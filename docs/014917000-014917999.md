# StackOverflow 问答 14917000-14917999

# opengl - 如何在OpenGL中独立移动对象

> ID：14917000
> 
> 赞同：-2
> 
> 时间：2013-02-17T01:09:00.170
> 
> 标签：opengl

鉴于我在画布上绘制了几个立方体，它们如何独立移动？如何为每个立方体定义不同的 onmouseup/onmousedown/onmousemove 侦听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:33:07.260

> 如何为每个立方体定义不同的 onmouseup/onmousedown/onmousemove 侦听器？

屏幕上通常只有一个指针，除非在多点触控环境中，或者可以为每个输入设备请求单独的指针。

所以只有一组鼠标事件处理程序是很自然的。如果您想在对象之间进行一些区分，您必须发挥创造力并想出一些方法来将事件位置与要更改的对象相关联。例如点击它。

OpenGL 只是一个绘图 API。它不处理对象，不知道鼠标是什么，或者输入事件是什么，也不管理场景，这也意味着它不会以每个对象的形式给你免费的糖果——听众。所有这些都必须由您（或某些第 3 方库）实施。

# javascript - 在模糊之前选择先前聚焦的输入

> ID：14917001
> 
> 赞同：1
> 
> 时间：2013-02-17T01:09:04.503
> 
> 标签：javascript, jquery

我的输入字段有这个自动建议菜单，并且由于有多个字段，我需要选择在单击 li 并模糊输入之前处于焦点的字段，因此它知道要选择哪个输入。有没有办法让最后一个输入字段在模糊之前聚焦？谢谢

```
function fill(thisValue) {
 if(thisValue === undefined){
   $('#suggestions').fadeOut();
    } else {
    $("input *//input in focus before blur//* .val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 600);
    $('.email').addClass('load');

     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:23:29.747

是的，但是您需要在单击 LI 时存储最后一个焦点元素，或者更准确地说，在单击它之前存储它，并且`blur`为时已晚。

```
var lastFocused = null;

$('li').on({
    mousedown: function() {
        lastFocused = document.activeElement; //saves focused element
    },
    click: function() {
        //do whatever you do on click
    }
});

function fill(thisValue) {
   if(thisValue == undefined && lastFocused) {
       $('#suggestions').fadeOut();
   } else {
       lastFocused.value = thisValue;
       setTimeout(function() {
          $('#suggestions').fadeOut();
       }, 600);
       $('.email').addClass('load');
  }
} 
```

这是一个快速[**演示**](http://jsfiddle.net/GEvWv/)，表明它有效！

如果您可以通过使用`data()`或类似的方法来避免全局变量，那就更好了，这只是为了演示它是如何完成的。

# java - 如何让我的 java 应用程序看到它需要的类？

> ID：14917002
> 
> 赞同：-1
> 
> 时间：2013-02-17T01:09:18.460
> 
> 标签：java, jar, runtime-packages

我用java构建了一个小命令行程序。它有一个在 main 方法中被实例化和使用的类。但是当我在命令行编译它时，它并没有“看到”它需要运行的类。它接受在运行时传入的参数。我可以在 Netbeans 中设置它并且运行良好。但我希望能够在命令行中使用它。我试过 jar-ing ，它抛出一个异常并且看不到我在 main 中实例化的类。我在我的 CS 课程中学习了 Java，但我的教授并没有特别深入地介绍部署。

有什么想法可以帮助我摆脱泡菜吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:26:50.787

你的任何一个课程都有包吗？如果他们这样做，他们将有一个“包装”的第一个声明，它会有所作为。

我将假设至少您的 Age 类确实有一个包，我将把包称为“a”。

让我们进一步假设一个主类“Alex”；它将有一个“import a.age;”的导入语句。

假设您在一个名为“george”的目录中。

您的 Alex.java 文件（没有 package 声明）需要在 george 中。Age.java 需要位于 george 下名为 a 的目录中。

您可以使用命令“javac Alex”编译您的主文件，并可以使用“java Alex”运行它。

如果您告诉我们有关您的问题的更多细节，我们可以更具体地说明您的需求。

# php - 正则表达式,正则表达式 PHP

> ID：14917003
> 
> 赞同：-5
> 
> 时间：2013-02-17T01:09:38.660
> 
> 标签：php, regex, expression

我需要验证以下格式的字符串：

数字、字母和 _
最小长度 4 和最大长度 15
至少 1 个字母 [az]

例如：

有效的：

*   A B C D

*   ABCDE

*   ABC_

*   01A_

*   A12345_BCDW1234

无效：

*   美国广播公司
*   01A
*   A12345_BCDW123411
*   _1212392034
*   ****_****
***   A_1**

 **我做了几次尝试，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:45:04.357

我不认为你可以在一个正则表达式中做到这一点，长度 {4,15} 和“必须包含一个字母”的约束的验证必须独立完成。

```
$test_inputs = array(
      'ABCD', 'ABCDE', 'ABC_', '01A_', 'A12345_BCDW1234'
    , 'ABC', '01A', 'A12345_BCDW123411', '_1212392034', '_', 'A_1'
);

$res = array();
foreach($test_inputs as $input)
{
    $res[$input] = (preg_match('/^[A-Z0-9_]{4,15}$/i', $input) && preg_match('/[A-Z]/i', $input));
}

var_dump($res); 
```**

# c# - CloudConfigurationManager.GetSetting 在生产中返回空字符串？

> ID：14917010
> 
> 赞同：4
> 
> 时间：2013-02-17T01:11:03.473
> 
> 标签：c#, azure

我刚刚将我的项目升级到 Azure 工具 1.8（2012 年 10 月 SDK），我遇到了一个奇怪的问题；

在我的 WorkerRole 中，我的调用`CloudConfigurationManager.GetSetting`返回 null（可以是空字符串，很难从日志文件中分辨出来）。换句话说; 我无法从 RoleEnvironment 获取设置。

信息：

*   模拟器/本地主机完美运行
*   通过 RDP 验证的 dll 版本
*   试图获取各种测试设置
*   相同的代码行现在在生产槽中运行得很好。
*   我正在使用来自 nuget 的 Microsoft.WindowsAzure.ConfigurationManager 1.8.0.0
*   向 app.config 添加了设置以进行测试，结果相同。

有什么线索吗？

**更新：**

调用代码（WorkerRole 中的方法 Run()）

```
public override void Run(){

   // Fetch connectionstring
   var connectionString = CloudConfigurationManager.GetSetting("ConnectionString");

   // connectionString is null here?

  [...]

} 
```

该设置在门户中可见，因此它肯定已部署。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:49:31.587

我已经修复它，以下步骤解决了它：

*   其中一个项目引用了`Microsoft.WindowsAzure.Configuration`1.7.0.0 版本。改变了这个（如果这是原因很奇怪，因为输出中的 dll 是正确的版本。也许它是在运行时从 GAC 加载的？）
*   删除了程序集绑定重定向`Microsoft.WindowsAzure.Configuration`
*   从 1升级`osFamily`到 2 (Windows 2008 SP2 -> Windows 2008 R2)

有些步骤可能是不必要的，但我不确定其中的哪一个:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:49:35.283

如何改用 RoleEnvironment.GetConfigurationSettingValue("ConnectionString") ；假设您正在尝试从服务配置文件 (cscfg) 中获取值？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T01:46:50.887

我有同样的问题。我已更新项目以使用 Azure SDK 2.0。我为我的 Web 和辅助角色更新了 NuGet 包，但 Visual Studio 中的 Azure 项目仍使用旧版本。

要解决此问题，请右键单击您的 Azure 项目并选择属性。在应用程序选项卡下，您将看到一个用于更新您的 Azure SDK 的按钮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-21T09:24:16.250

我在将 Azure SDK 从 2.0 升级到 2.2 后得到了这个。我能够通过以下方式修复：

1.  右键单击 Azure 项目并选择属性。根据应用程序选项卡更新 Azure SDK。感谢rattrick1的回答。
2.  右键单击以管理 NuGet 包。在左侧单击更新并更新 WindowsAzure.ConfigurationManager。

# eclipse - eclipse工作区保存杂项文件的位置

> ID：14917013
> 
> 赞同：0
> 
> 时间：2013-02-17T01:11:28.040
> 
> 标签：eclipse, workspace

这似乎是一个奇怪的问题，但我可以在 Eclipse 工作区中添加一个系统无法识别的文件夹吗？在某个地方保存我的笔记和我还没有准备好包含在构建中的 java 文件？

我尝试在 src 下放置一个目录，但 ecplise 尝试在其中编译文件，我只想要一个可以存放我不想让 eclipse 看到的东西的地方

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:17:49.350

Try excluding a folder/files by:

1.  Right-click a project folder in Project Explorer tree and then go to "Properties".
2.  click on Resource and then go to "Resource Filters".
3.  Add exclusion filters for files/folders .

![enter image description here](../Images/6e72e3a848cd3b644f43e61c8b82869b.png)

# php - 使用 preg_match 捕获标签

> ID：14917015
> 
> 赞同：0
> 
> 时间：2013-02-17T01:11:34.810
> 
> 标签：php, regex, preg-match, matching

我使用此功能从 RSS vimeo 读取和显示我想要的信息：

```
$url=array('http://vimeo.com/channels/hdnature/videos/rss'); 

foreach($url as $value){
$homepage = file_get_contents($value);
$movies = new SimpleXMLElement($homepage);
      foreach($movies->channel->item as $opt){

    $title= $opt->title;
    $tittle=mysql_real_escape_string($title);

    $link=$opt->link;
    $links=mysql_real_escape_string($link); 

    $des=$opt->description;
    $dess=mysql_real_escape_string($des);
    //Use that namespace
     $namespaces = $opt->getNameSpaces(true);
    //Now we don't have the URL hard-coded
     $dc = $opt->children($namespaces['dc']); 
    //echo $dc->publisher;
    //echo $dc->creator;
   //echo $link;

    $imgpattern = '/href="(.*?)"/i';
    preg_match($imgpattern, $des, $matches);
    $imageurl['image'] = $matches[1];
    echo $imageurl['image'];

    $tag = '/">(.*?)<\/a>/';
    preg_match($tag, $des, $matches);
    $tagurl['name'] = $matches[1];
    echo $tagurl['name']; 
```

我在`<description></description>`字段中有这个标签列表：

```
<p><strong>Tags:</strong> 
<a href="http://vimeo.com/tag:art">Art</a>, 
<a href="http://vimeo.com/tag:film">Film</a>,
<a href="http://vimeo.com/tag:movie">Movie</a>,
<a href="http://vimeo.com/tag:cinema">Cinema</a>,
<a href="http://vimeo.com/tag:creation">Creation</a>,
<a href="http://vimeo.com/tag:concept">Concept</a>,
<a href="http://vimeo.com/tag:experimental">Experimental</a>,
<a href="http://vimeo.com/tag:sound">Sound</a>,
<a href="http://vimeo.com/tag:music">Music</a>,
<a href="http://vimeo.com/tag:motion">Motion</a>,
<a href="http://vimeo.com/tag:copyleft">Copyleft</a>
and 
<a href="http://vimeo.com/tag:videoart">Videoart</a>
</p> 
```

我搜索在我的数据库中只保存艺术、电影、电影等单词。

我需要保存一个带括号的列表，并尝试使用 preg_match。

我有这个功能：

```
$tag = '/</strong>(.*?)</a></p>/';
preg_match($tag, $des, $matches);
$taglist['name'] = $matches[1];
echo $taglist['name']; 
```

但我只收到一个错误，而不是我希望的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:23:27.427

尝试这个

```
$des = '<p><strong>Tags:</strong> 
<a href="http://vimeo.com/tag:art">Art</a>, 
<a href="http://vimeo.com/tag:film">Film</a>,
<a href="http://vimeo.com/tag:movie">Movie</a>,
<a href="http://vimeo.com/tag:cinema">Cinema</a>,
<a href="http://vimeo.com/tag:creation">Creation</a>,
<a href="http://vimeo.com/tag:concept">Concept</a>,
<a href="http://vimeo.com/tag:experimental">Experimental</a>,
<a href="http://vimeo.com/tag:sound">Sound</a>,
<a href="http://vimeo.com/tag:music">Music</a>,
<a href="http://vimeo.com/tag:motion">Motion</a>,
<a href="http://vimeo.com/tag:copyleft">Copyleft</a>
and 
<a href="http://vimeo.com/tag:videoart">Videoart</a>
</p>';
$tag = '/">(.*?)<\/a>/';
preg_match_all($tag, $des, $matches);
print_r($matches[1]); 
```

# java - Pass Object reference within Intent without implementing Serializable or Parcelable

> ID：14917029
> 
> 赞同：13
> 
> 时间：2013-02-17T01:13:47.460
> 
> 标签：java, android, android-intent, android-activity, reference

I know similar questions have been asked multiple times. I think i read most of it. But none answer is applicable.

I need to pass complex Objects via Intents (Activity calls/Broadcasts). Everything is done within my process. That's why I see no reason to write my objects into Streams just to reassemble them a few milliseconds after. I want to pass my object reference through my application. Is there any way to do this.

Since my application will broadcast the same Event multiple times in a row I can't rely on static members. I need to get exacly the same object for what I broadcasted.

That's why I was thinking about a static "Referenceholder" that will accept an Object and return an integer that identifies this object in it's internal list so I can pass this integer via .putExtras. But as far as I know Java I could not clean up this Object from this list after it has been added because multiple Listeners could be interessted in the very same object and I would have to keep it in my Referenceholder for ever (assuming that a thread may be resumed at any time - even 2 minutes later).

Any ideas? Am I doing something wrong? Or any ideas of how I can clean up my referneces (probably after some seconds? this may lead to a crash but it seems to be more applicable than writing code that assembles and reassembles my objects for no reason)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T02:01:14.633

您的选择非常明确：无法在 Intent 中传递不可编组的对象（Parcelable、Serializable）。句号。

您可能能够做的是传递一些对不可编组对象的引用。这个想法是，您将按照将键传递给映射的顺序执行某些操作，该映射将该键映射到您有兴趣传递的值。如果 Intent 发送者和 Intent 接收者都可以访问地图，则可以传达对不可编组对象的引用。

我不明白，为什么你认为静态成员不是你想要的。我猜想自定义应用程序对象中的静态地图几乎正是您想要的。...我怀疑，从您对 WeakHashMaps 的评论中，您已经发现了这一点。

...除了到目前为止你所说的没有解释为什么你想让你的地图变弱。在使用弱映射之前，请查看软引用，以确保这不是您的意思。

祝你好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T02:29:21.070

**编辑：**

忘记这个解决方案。这没用。Android 正在处理您在 .startActivity() 中传递的 Intent。没有办法在活动中获得任何引用。这是 - 在我看来 - 很棒，但我的谷歌。您必须调用您的活动并将对象的引用放置在静态成员中......

正如 G. Blake Meike 所提到的，在 Android 中无法通过 Intents 传递对象引用。但是您也许可以使用[Wea​​kReferences](https://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html)。

[关于这个主题的一篇非常优秀的文章可以在这里找到： http](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references) ://weblogs.java.net/blog/2006/05/04/understanding-weak-references

我通过这个问题得到了解决方案： [是否可以获得对象引用计数？](https://stackoverflow.com/questions/5334137/is-it-possible-to-get-the-object-reference-count)

所以我基本上要做的是：我将使用 Intents 作为[WeakHashMap](https://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html)的 Key并将我的 Object 作为值传递。这似乎是唯一适合作为 Key 的对象，因为您放入 Intents extras 的所有内容都将被序列化。因此，每个 Intent 只能传递一个对象。你可以在你的 Acitivity 中实现子类来保存你的对象，然后把这个子类放到地图中。但是我仍然不确定接收者将获得的 Intent 对象是否与调用者创建的相同，但我认为是的。如果不是，我将编辑此解决方案（或者也许有人可以清除它）。

# entity-framework - Not sure how to create FK relationship using Code First Fluent API

> ID：14917030
> 
> 赞同：0
> 
> 时间：2013-02-17T01:14:14.170
> 
> 标签：entity-framework, ef-code-first

I have the following entities:

```
 public class Bicycle
       {
           public int BicycleId { get; set; }
           public DateTime YearOfManufacture { get; set; }
           public BicycleType BicycleType { get; set; }
       }

   public class BicycleType
       {
            public int BicycleTypeId { get; set; }
            public string Description { get; set; }
        } 
```

Every Bicycle must have just one BicycleType. A BicycleType could be associated with none to many Bicycles. I'm not sure how to create a Fluent Api FK relationship in this situation between Bicycle and BicycleType.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:19:11.550

从这里开始。这个网站有很多很好的信息。

[http://msdn.microsoft.com/en-us/data/jj591620](http://msdn.microsoft.com/en-us/data/jj591620)

# ruby - 红宝石 - ARGV.empty？ModuleName 否则这里的代码总是返回 ModuleName

> ID：14917033
> 
> 赞同：1
> 
> 时间：2013-02-17T01:15:13.107
> 
> 标签：ruby, module, argv

可能是愚蠢的问题

我有一些代码：

```
if ARGV.empty?
  ModuleName
else
  #Awesome Code Here
end 
```

但无论如何，ModuleName 模块总是被评估。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:46:57.810

我认为该模块实际上是在您需要它时进行评估的，而不是因为`ModuleName`到达该行。

例子：

在 foo.rb 文件中：

```
class Foo
   puts "foo"
end 
```

然后在irb中：

```
1.8.7 :001 > require 'foo'
foo
 => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:20:40.013

我不确定，但你可以测试你的脚本得到的参数，如下所示：

```
until ARGV.empty? do
  puts "Argument: '#{ARGV.shift}'"
end 
```

也许您实际上是在传递一些参数？

# spring - Spring 3 JDBC事务管理器不起作用

> ID：14917038
> 
> 赞同：0
> 
> 时间：2013-02-17T01:16:17.740
> 
> 标签：spring, spring-mvc

我正在使用 Spring 3、MYSQL 5.5、tomcat 6。在我的应用程序中，我有 3 个 DAO 方法在服务类方法中一个接一个地执行。

```
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = {
            Exception.class, RuntimeException.class })
   myService(){
      try {
         dao1.delete();
         dao1.update();
         dao1.save();
      } catch(){}
   }

Dao1 -
delete() throws exp1{ ---- some code ----}
save() throws exp1{ ---- some code ----}
update() throws exp2{ ---- some code ----} 
```

现在，即使引发异常，我的事务也会被提交，例如如果 update() 引发异常 delete() 并且 save() 不会回滚。我尝试查看 spring 日志，我可以看到它在异常后已提交事务

```
20:00:29,071 DEBUG SQLErrorCodesFactory:198 - Looking up default SQLErrorCodes for DataSource [org.apache.tomcat.dbcp.dbcp.BasicDataSource@44755866]
20:00:29,078 DEBUG SQLErrorCodesFactory:216 - Database product name cached for DataSource [org.apache.tomcat.dbcp.dbcp.BasicDataSource@44755866]: name is 'MySQL'
20:00:29,079 DEBUG SQLErrorCodesFactory:174 - SQL error codes for 'MySQL' found
20:00:29,081 DEBUG SQLErrorCodeSQLExceptionTranslator:399 - Translating SQLException with SQL state '42S02', error code '1146', message [Table 'xxx.xxxx' doesn't exist]; SQL was [DELETE FROM xxxx WHERE xxxx=?] for task [PreparedStatementCallback]
20:00:29,086 DEBUG xxxServiceImpl:1022 - Returning result after deleting product : xxxx.xxxxx.xxxxx.xxx.ResultVO Object {Result: false, Error code: 1016, Error text: Error while deleting data. Please try again later}
20:00:29,094 DEBUG DataSourceTransactionManager:752 - Initiating transaction commit
20:00:29,097 DEBUG DataSourceTransactionManager:264 - Committing JDBC transaction on Connection [jdbc:mysql://localhost:3306/xxx?autoReconnect=true, UserName=root@localhost, MySQL-AB JDBC Driver]
20:00:29,113 DEBUG DataSourceTransactionManager:322 - Releasing JDBC Connection [jdbc:mysql://localhost:3306/xxx?autoReconnect=true, UserName=root@localhost, MySQL-AB JDBC Driver] after transaction
20:00:29,115 DEBUG DataSourceUtils:332 - Returning JDBC Connection to DataSource 
```

如果我将 @Transactionl 放在 DAO 方法之前，事务会回滚，但我会收到 500 错误，说明事务已标记为回滚。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:09:34.810

删除`try {} catch {}`块。

仅当从方法将异常抛回给调用者时，才会发生事务回滚。

在您的情况下，您正在使用空`try..catch`块默默地杀死异常，因此异常永远不会传播到事务管理器，因此事务管理器永远不会收到回滚的信号。

在注解的情况下`dao`，当从 dao 层抛出异常时，dao 方法周围的事务代理将附加的事务（由服务层创建）标记为仅回滚，然后当控制从服务层返回时事务manager 尝试提交更改，但发现它被标记为只读。这就是错误来的原因。

# asp.net - 如果我编写一个处理路径 * 的处理程序，它是否具有与 httpmodule 相同的功能？

> ID：14917045
> 
> 赞同：0
> 
> 时间：2013-02-17T01:18:13.090
> 
> 标签：asp.net, iis, httphandler, httpmodule

```
 <handlers>
      <add name="TextHandler" path="*" verb="*" type="TextHandler" resourceType="Unspecified" />
 </handlers> 
```

我知道这`httphandlers`是用于处理文件扩展名的，`httpmodule's`似乎有一个更广泛的“网络”。
据我所知，这是唯一的区别，而且它是相当语义化的，因为无论如何相关的功能都是在 Web.config 文件中设置的。
例如，上面的元素适合任何路径，或者没有特定路径。
有了这个，我基本上没有一个httpmodule吗？
还是有更深层次的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:20:11.667

只有一个处理程序处理请求。许多模块可以处理请求。

所以，不，不一样。

# git - 我应该将 /usr/lib/git-core/ 添加到我的 PATH 中吗？

> ID：14917051
> 
> 赞同：1
> 
> 时间：2013-02-17T01:18:33.777
> 
> 标签：git, path, gitweb

我试图`gitweb`在我的 Mint 机器上进行设置。手册页告诉我`git-instaweb`在 git repo 中运行以开始。该命令未找到，但`apt-file`告诉我它在`/usr/lib/git-core/`. 所以我尝试用整个路径运行它，但它失败了，因为`git-sh-setup`没有找到另一个命令：

```
./git-instaweb: 22: .: git-sh-setup: not found 
```

该程序也在`/usr/lib/git-core/`.

似乎为了工作，必须将此目录添加到我的路径中。那是对的吗？如果不是，它应该如何设置？gitweb 手册页没有说明路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:43:14.747

好先生，不妨试试

```
git instaweb 
```

仔细注意缺少连字符`-`

# java - Java - Display Text OpenGL

> ID：14917052
> 
> 赞同：1
> 
> 时间：2013-02-17T01:18:58.827
> 
> 标签：java, opengl, drawstring

I am following a youtube tutorial about making an rpg in Java with OpenGL.

Now I am slowly getting ahead, and there is no GUI type tutorial yet so I want to add some text to say my stats and other stuff.

Here is the main class of my code

```
package com.base.engine;

import static org.lwjgl.opengl.GL11.GL_COLOR_BUFFER_BIT;
import static org.lwjgl.opengl.GL11.GL_DEPTH_TEST;
import static org.lwjgl.opengl.GL11.GL_MODELVIEW;
import static org.lwjgl.opengl.GL11.GL_PROJECTION;
import static org.lwjgl.opengl.GL11.glClear;
import static org.lwjgl.opengl.GL11.glClearColor;
import static org.lwjgl.opengl.GL11.glDisable;
import static org.lwjgl.opengl.GL11.glLoadIdentity;
import static org.lwjgl.opengl.GL11.glMatrixMode;
import static org.lwjgl.opengl.GL11.glOrtho;

import java.util.ArrayList;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;

import com.base.game.GUI;
import com.base.game.Game;
import com.base.game.Time;

public class Main {

    public static Game game;
    private static GUI gui;
    public static void main(String[] args){
        initDisplay();
        initGL();

        initGame();
        gui = new GUI("i");
        gameLoop();

        cleanUp();
    }

    public static ArrayList<GameObject> sphereCollide(float x, float y, float radius)
    {
        return game.sphereCollide(x, y, radius);
    }

    public static ArrayList<GameObject> rectangleCollide(float x1, float y1, float x2, float y2)
    {
        return game.rectangleCollide(x1,y1,x2,y2);
    }

    public static void initGame(){
        game = new Game();
    }

    public static void getInput(){
        game.getInput();
    }

    public static void update(){
        game.update();
    }

    public static void render(){

        glClear(GL_COLOR_BUFFER_BIT);
        glLoadIdentity();

        game.render();
        gui.drawText("Welcome to the jungle!");
        Display.update();
        Display.sync(60);

    }

    public static void cleanUp(){
        Display.destroy();
        Keyboard.destroy();
    }

    public static void gameLoop(){
        Time.init();
        while(!Display.isCloseRequested())
        {
            Time.update();
            getInput();
            update();
            render();
        }
    }

    public static void initGL(){
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0, Display.getWidth(), 0, Display.getHeight(), -1, 1);
        glMatrixMode(GL_MODELVIEW);
        glDisable(GL_DEPTH_TEST);

        glClearColor(0, 0, 0, 0);
        glDisable(GL11.GL_TEXTURE_2D);

    }

    public static void initDisplay(){

        try {
            Display.setDisplayMode(new DisplayMode(800,600));
            Display.create();
            Keyboard.create();
            Display.setVSyncEnabled(true);
        } catch (LWJGLException e) {
            e.printStackTrace();
        }
    }

} 
```

Here is the GUI class I kinda made.

```
package com.base.game;

import java.awt.Font;

import org.lwjgl.opengl.GL11;
import org.lwjgl.opengl.GL11.*;
import org.newdawn.slick.Color;
import org.newdawn.slick.TrueTypeFont;

import com.base.engine.Main;

/**
* @author Owen Butler
*/
public class GUI {

    private TrueTypeFont font;
    private TrueTypeFont font2;

    public GUI(String text) {

        // load a default java font
        Font awtFont = new Font("Times New Roman", Font.BOLD, 24);
        font = new TrueTypeFont(awtFont, false);

    }

    public void drawText(String text)
    {
        font.drawString((int)100, (int)50, "THE LIGHTWEIGHT JAVA GAMES LIBRARY", Color.yellow);
    }

} 
```

Now this works in a since. It adds something to the screen, but not text, instead it adds a yellow box. No text at all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:22:46.993

```
GL11.glEnable(GL11.GL_BLEND);
GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA); 
```

那应该行得通。

# c# - Why does my ASP.NET MVC 3 with EF application only work when I step through it while debugging?

> ID：14917055
> 
> 赞同：2
> 
> 时间：2013-02-17T01:19:20.487
> 
> 标签：c#, asp.net-mvc, entity-framework, linq-to-entities

I have a controller that updates values in a database using Entity Framework. Unfortunately, when I run my application it doesn't seem to work at all. When I put breakpoints in and step through a specific part of the code, it works perfectly.

Here's my controller code:

```
public ActionResult ManageGame(int id, FormCollection collection, string[] selectedPlayers)
    {
        var gameToUpdate = db.Games
            .Include("Teams")
            .Where(g => g.ID == id)
            .Single();

        if (TryUpdateModel(gameToUpdate, "", null, new string[] { "Players" }))
        {
            try
            {
                List<Player> team1Players = generateRandomTeam();
                List<Player> team2Players = generateRandomTeam(); 
```

If I put a breakpoint here and step through the rest of the code it's fine, otherwise nothing gets saved.

```
 foreach (var team in gameToUpdate.Teams)
                {
                    if (!team1added)
                    {
                        team.Players = team1Players;
                        team1added = true;
                    }
                    else
                    {
                        team.Players = team2Players;
                    }
                }

                db.Entry(gameToUpdate).State = EntityState.Modified;
                db.SaveChanges();
            }
            catch (DataException)
            {
                ModelState.AddModelError("", "Unable to save changes.");
            }
        }

        try
        {
            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

I have a feeling it's the way I'm assigning the new teams to the existing context, but from all the tutorials I've read, this is the way they do it, at least for string values. Does anybody know why I'm getting this bizarre behavior?

****UPDATE**** SOLVED

I solved my problem. My hunch was right, I just needed to add team.Players.Clear() before assigning the new group of players to the existing team.

```
foreach (var team in gameToUpdate.Teams)
{
    if (!team1added)
    {
        team.Players.Clear()
        team.Players = team1Players;
        team1added = true;
    }
    else
    {
        team.Players.Clear()
        team.Players = team2Players;
    }
} 
```

When I didn't have that, I got a primary key violation exception. Unfortunately I didn't see this exception, because my code was swallowing this as pointed out by DarK. So, after adding the Clear() method everything worked like a charm.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T01:39:16.793

看起来其他人也遇到了和你一样的问题。查看这些链接：[C# 代码仅在逐步执行时给出预期结果？](https://stackoverflow.com/questions/1492587/c-sharp-code-only-gives-expected-results-on-step-through),[代码只有在使用调试器单步执行时才能正确运行？](https://stackoverflow.com/questions/13841718/code-runs-correctly-only-when-stepping-through-it-with-debugger)

所以，如果你不止一次地实例化 Random 类，你会得到一些奇怪的结果。

编辑：

从您的代码看来，您正在使用异常。你可以注释掉 try-catch 并在不调试的情况下运行它，看看它是否抛出任何异常？

# java - Google AppEngine (Java) Memcache not storing data

> ID：14917062
> 
> 赞同：1
> 
> 时间：2013-02-17T01:20:37.317
> 
> 标签：java, google-app-engine, memcached, jcache

I have this code

```
//net.sf.jsr107cache.Cache, CacheException, CacheFactory, CacheManager all imported
private static Cache getCache() {

    Cache cache = null;
    try {
        CacheFactory cacheFactory = CacheManager.getInstance().getCacheFactory();
        cache = cacheFactory.createCache(Collections.emptyMap());
    } catch (CacheException e) {
        Logger.getLogger(MemcacheUtil.class.getName()).log(Level.SEVERE, 
                "Unable to obtain a cache instance! \n" + e.getMessage());
    }
    return cache;
} 
```

and use it like this

```
public static byte[] fetchFromMemcache(String key) {
    return (byte[]) getCache().get(key);
}

public static void saveInMemcache(String key, byte[] value) {
    getCache().put(key, value);
} 
```

but annoyingly, nothing gets stored in Memcache and no log message gets printed. Before implementing caching with JCache, I used the Low-level API and had the same problem too. I'm really confused. Is there any special setting (in code, on the appengine console, etc) that needs to be done before Memcache works? Does Memcache just hate me naturally? Is there something I'm doing (or failing to do) in code that's causing all these? Please I'll like to know how to go about this. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:08:17.837

在使用低级 API 使用 Memcache 之前，无需设置特殊设置（在代码中或在 appengine 控制台上）。

我使用这个 API 没有问题。

（如果你愿意，明天我可以给你我用来与内存缓存成功交换数据的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:35:00.547

下面是一个类的示例，该类提供了使用低级 API 从 Memcache 写入/读取的静态方法。优点是我使用缓存的单例实例，提供更好的响应时间。您正在为每个请求创建工厂和缓存服务的新实例，这基本上不是一个好主意。

```
import java.util.Collection;
import java.util.Map;
import java.util.Set;
import com.google.appengine.api.memcache.MemcacheService;
import com.google.appengine.api.memcache.MemcacheServiceFactory;
import com.google.appengine.api.memcache.Stats;

public class AppMemCache {
private static MemcacheService c = MemcacheServiceFactory.getMemcacheService();

public static boolean containsKey(Object key){
    return c.contains(key);
}

public static Object get(Object key){
    return c.get(key);
}

// returns only the cached key/object pairs 
public static Map<String, Object> getAll(Collection<String> keys){
    return c.getAll(keys);
}

public static void put(Object key, Object value){
    c.put(key, value);
}

public static void putAll( Map<String, Object> values){
    c.putAll(values);
}

public static boolean remove(Object key){
    return c.delete(key);
}

@SuppressWarnings({ "rawtypes", "unchecked" })
public static boolean deleteAll(Collection keys){
    Set deletedKeys = c.deleteAll(keys);
    if(deletedKeys.size() == keys.size())
        return true;
    return false;
}

public static Stats getStatistics(){
    return c.getStatistics();
}
} 
```

# javascript - Resize image without DOM elements?

> ID：14917064
> 
> 赞同：0
> 
> 时间：2013-02-17T01:20:42.173
> 
> 标签：javascript, html

I just wrote a [little script](https://gist.github.com/mnbayazit/efd4ba5cd4d73e5530ad) that resizes uploaded images into canvas thumbnails. While resizing images it slows down the rest of the web page.

I just discovered [web workers](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers) which I was hoping I could use to alleviate this problem by moving the resizing task into the [background](https://gist.github.com/mnbayazit/efd4ba5cd4d73e5530ad#file-resize_image-js).

The MDN article says you can't access the DOM, which is fine, but I was hoping I could still *create* DOM elements and pass a canvas back.

However, the `Image` object doesn't even seem to exist from inside my worker thread. Chrome tells me:

> Uncaught ReferenceError: Image is not defined resize_image.js:4

So... is there a way to do this without using those elements? I just want to manipulate the image data and then pass it back to the main thread in a usable form. I don't really care about the DOM elements themselves, but I'm not sure if the JS API gives me any other options?

* * *

My current resize method, which requires access to DOM elements:

```
resizeImage: function(file, width, height, callback) {
    var reader = new FileReader();
    reader.onload = function (fileLoadEvent) {
        var img = new Image();
        img.onload = function() {
            var srcX = 0, srcY = 0, srcWidth = img.width, srcHeight = img.height, ratio=1;

            var srcRatio = img.width/img.height;
            var dstRatio = width/height;
            if(srcRatio < dstRatio) {
                ratio = img.width/width;
                srcHeight = height*ratio;
                srcY = (img.height-srcHeight)/2;
            } else {
                ratio = img.height/height;
                srcWidth = width*ratio;
                srcX = (img.width-srcWidth)/2;
            }

            var canvas = document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(this, srcX, srcY, srcWidth, srcHeight, 0, 0, width, height);

            callback(canvas);
        };
        img.src = reader.result;
    };
    reader.readAsDataURL(file);
}, 
```

# java - 使用 Robot 类的 Java 机器人

> ID：14917072
> 
> 赞同：0
> 
> 时间：2013-02-17T01:21:29.840
> 
> 标签：java

我正在尝试使用 Robot 类创建一个游戏机器人。我尝试了以下代码来执行鼠标右键单击：

```
robot.mousePress(InputEvent.BUTTON3_MASK);
robot.mouseRelease(InputEvent.BUTTON3_MASK); 
```

它奏效了。

我正在客户端 3d 在线游戏上对其进行测试。

按“1”键应该执行某种运动游戏，当我尝试以下代码时它没有工作：

```
robot.keyPress(KeyEvent.VK_1);
robot.keyRelease(KeyEvent.VK_1); 
```

但是当我在游戏聊天中使用该代码时，它确实有效。

它已经过一遍又一遍的测试，我一直得到相同的结果。

是我做错了什么吗？或者游戏以某种方式检测到我不是按下那个键的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T01:23:18.233

您可能太快地释放密钥。在释放密钥之前尝试休眠 30~60ms：

```
robot.keyPress(KeyEvent.VK_1);
try {
    Thread.sleep(50);
} catch(Exception e) {
    e.printStackTrace();
}
robot.keyRelease(KeyEvent.VK_1); 
```

# vba - 将服务器上的 excel 文件导入另一个 excel 文件

> ID：14917077
> 
> 赞同：1
> 
> 时间：2013-02-17T01:23:00.077
> 
> 标签：vba, excel

我正在尝试编写一个宏来将托管在服务器上的 excel 文件导入工作簿。这是我到目前为止的代码。

```
Sub ranker()
'
' ranker macro
'

'
    Range("Ranker!A10:Ranker!Z100").ClearContents
    URL = Range("url!F2" & i).Text
    With ActiveSheet.QueryTables.Add(Connection:= _
        "FINDER;" & URL _
        , Destination:=Range("Ranker!$A$1:$Z$100"))
        .Name = "ranker"
        .CommandType = xlCmdTable
        .CommandText = Array("'MTD SAR$'")
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .PreserveColumnInfo = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

我唯一的问题是它会弹出以下对话框。

[对话框](http://imgur.com/b6R0x56)

我每次都需要选择“MTD SAR$”选项。我可以在 vba 代码中选择此选项以避免该对话框吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:33:29.787

我不记得`querytable`有能力指定你想要的工作表的方法。我已经使用 OLEDB 解决了这个问题。这是一个例子：

```
Sub Excel_QueryTable()

    Dim oCn As ADODB.Connection
    Dim oRS As ADODB.Recordset
    Dim ConnString As String
    Dim SQL As String

    Dim qt As QueryTable

    ConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\SubFile.xls;Extended Properties=Excel 8.0;Persist Security Info=False"
    Set oCn = New ADODB.Connection
    oCn.ConnectionString = ConnString
    oCn.Open

    SQL = "Select * from ['MTD SAR$']"

    Set oRS = New ADODB.Recordset
    oRS.Source = SQL
    oRS.ActiveConnection = oCn
    oRS.Open

    Set qt = Worksheets(1).QueryTables.Add(Connection:=oRS, _
Destination:=Range("Ranker!$A$1"))

    qt.Refresh

    If oRS.State <> adStateClosed Then
        oRS.Close
    End If

    If Not oRS Is Nothing Then Set oRS = Nothing
    If Not oCn Is Nothing Then Set oCn = Nothing

End Sub 
```

这是我使用的，当然是调整过的：[Query table with Excel as Data Source](http://vbadud.blogspot.com.au/2007/12/query-table-with-excel-as-data-source.html)

# ruby-on-rails - 推迟创建操作

> ID：14917085
> 
> 赞同：2
> 
> 时间：2013-02-17T01:23:39.027
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想要一个任何人都可以填写的表格，但必须登录才能提交 - 如果没有，请暂停该过程，直到他们这样做。

我的思考过程是，如果有人遇到表格，它会检查他们是否已登录，如果没有，用户仍然可以填写，而是提示登录或注册，而不是“提交”。如果他们单击任一链接（登录/注册），我希望它保存表单数据，最有可能是会话，让他们登录/注册，然后让计算机检查是否有保存的表单，如果是这样，则显示一个确认屏幕，新注册的用户可以接受它。

我已经在下面发布了我认为可以工作的代码，但事实并非如此 - 我在想知道 rails，可能有一些约定可以更快更容易地做到这一点！

而且我不相信我传递表单数据的方式是正确的，所以如果有人可以在那里纠正我，那就太好了！

看法

```
<%= form_for :comment, :url => {:action => 'create'} %>
    form fields here
<% if current_user %>
    <%= f.submit "Submit" %>
<% else %>
    <%= link_to "Log In", save_to_session_and_log_in_path(:comment => :comment) %> or 
    <%= link_to "Sign Up", save_to_session_and_sign_up_path(:comment => :comment) %>
<% end %> 
```

控制器

```
def save_to_session_and_log_in_path
  session[:temp_comment] = Comment.new(params[:comment])
  redirect_to log_in_path
end

def save_to_session_and_sign_up_path
  session[:temp_comment] = Comment.new(params[:comment])
  redirect_to sign_up_path
end 
```

用户*控制器

```
def create 
  #Normal create action, under the redirect:
  if session[:temp_comment]
    redirect_to confirm_comment
  else
    redirect_to users_home_page
  end
end 
```

* * *

我收到的错误是：

```
ActiveRecord::RecordNotFound in CommentsController#show

Couldn't find Comment with id=save_to_session_and_log_in
Rails.root: scrubbed

Application Trace | Framework Trace | Full Trace
app/controllers/comments_controller.rb:87:in `show'
Request

Parameters:

{"comment"=>"comment"
"id"=>"save_to_session_and_log_in"} 
```

我已经尝试过以各种方式对其进行调整，但它仍然让我来到这里，所以我无法测试我的任何代码是否正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:17:21.937

您的 CommentsController#create 和 #show 操作是什么？关于您的错误，您能否粘贴 rake 路由结果`save_to_session_and_log_in_path`和`save_to_session_and_sign_up_path`方法？由于您`id`当时没有，您应该将它们设置为`collection`路线。

--

不过，我这样做的方式是将表单提交给将处理每种情况的不同控制器。这样，您`CommentsController`将用于登录用户，并且您可以拥有一个`TemporaryCommentsController`可以处理客人发表的评论。

--

此外，根据评论的字段，我不知道将它们存储在会话中是否是个好主意。您可能可以在会话中存储一个 tmp_comment_id 并从数据库中恢复它。此外，使用 cron-job 删除所有记录。（这只有在“评论很大且‘难以’序列化”时才会出现问题）。

# php - PHP继续导致无限循环

> ID：14917086
> 
> 赞同：0
> 
> 时间：2013-02-17T01:23:40.493
> 
> 标签：php, mysql

我有一个奇怪的小问题。

我正在编写一个将多行插入 MySQL DB 的脚本，奇怪的是它们的 ID 在编辑时不一定是一个很好的整洁的 1、2、3 集。continue 语句必须跳过每一行，因为它在 PHP 中超时。在过去的几个小时里，这一直让我头疼。有任何想法吗？

谢谢！

```
$items = $_POST['invItemQuantity'];
$i = 1;
while($i <= $items) {
    if(!isset($_POST['item'.$i])) continue;
        //assign posts to variables
        $date = $_POST["item_date".$i];
        $description = $_POST["description".$i];
        $price = $_POST["price".$i];
        $ID = $_POST["item".$i];

        $que = "UPDATE invoice_items SET date='".$date."', description ='".$description."', price ='".$price."' WHERE item_ID=".$ID;
        $test .= $que."<br>";
        $i++; 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:26:13.300

```
if(!isset($_POST['item'.$i])) continue; 
```

在这种情况下，您忘记增加 i 。将其修复为：

```
if(!isset($_POST['item'.$i])) { $i++; continue; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:35:59.027

由于无论如何您都需要遍历所有项目字段，因此 for 循环可能更容易不要忘记您的增量操作。

```
$items = $_POST['invItemQuantity'];
for($i=1; $i<=$items; $i++)
{
    if(!isset($_POST['item'.$i])) continue;

    // ...
} 
```

您可能还想在代码中使用“$_POST['invItemQuantity']”之前对其进行一些验证（例如，验证它是否包含多个预期范围）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T01:35:51.000

你对此的整个方法很奇怪。我猜在你的表单中你有 item1、item2、item3 等。相反，你应该有 items[] 让它们作为数组提交。对每个 item_date、description 和 price 执行相同的操作。然后简单地运行：

```
foreach($_POST['items'] as $i => $item) {
    if(!empty($item)) {
        $date = mysql_real_escape_string(trim($_POST['item_date'][$i]));
        $description = mysql_real_escape_string(trim($_POST['description'][$i]));
        $price = mysql_real_escape_string(trim($_POST['price'][$i]));
        $ID = (int)$_POST['item'][$i];

        //UPDATE QUERY...
    }
} 
```

另一件事是你永远不应该接受用户输入并将其直接输入到数据库中，因为这会让你对 SQL 注入敞开大门。您应该始终先使用 mysql_real_escape_string （对于 mysql）对其进行转义。更好的是学习 MySQLi 或 PDO。

您可能还希望查看[filter_input](http://php.net/manual/en/function.filter-input.php)，这是确保您的输入干净的好方法。你永远不应该相信用户输入，如果可能的话，应该始终根据合适的变量白名单对其进行测试。

# excel - 使用宏剪切和粘贴字符串的一部分

> ID：14917087
> 
> 赞同：0
> 
> 时间：2013-02-17T01:24:01.560
> 
> 标签：excel, excel-2007, vba

如果字符串在第 9 个字符中有 - 符号，我需要一个宏来将字符串的一部分从 A 列剪切并粘贴到 B 列。我在 stackoverflow 上找到了一些代码，它们会复制/粘贴文本部分，但不会剪切/粘贴。我的数据看起来像这样

```
SUBIAIUP-456253
SUBIAIUP-254 
```

这是我到目前为止的代码：

```
Public Sub LeftSub()
 Dim cell As Range
 Dim sourceRange As Range

 Set sourceRange = Sheet1.Range("A1:A180")

 For Each cell In sourceRange

     If Mid(cell.Value, 9, 1) = "-" Then

     'this code should cut/paste the value from col A to col B, not copy/paste
     Sheets("Sheet1").Range("B" & cell.Row).Value = Mid(cell.Value, 9, 20)

     End If
  Next
 End Sub 
```

任何帮助深表感谢。
谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T01:32:46.110

如果要从 A 列中删除要粘贴到 B 列的值，请使用以下命令：

```
If Mid(cell.Value, 9, 1) = "-" Then
    cell.Offset(, 1).Value = Mid(cell.Value, 9)
    cell.Value = Left(cell, 8)
End If 
```

正如 Sid 和 Brett 指出的那样，如果我们从中点开始获取其余值，我们不需要 Mid 函数的字符数参数。如果要在 B 列值的开头使用破折号，请将中点设置为 9。如果要省略它，请将其设置为 10。

如果要将 A 列中的整个值剪切/粘贴到 B 列，请使用以下命令：

```
If Mid(cell.Value, 9, 1) = "-" Then
    'this code WILL cut/paste the value from col A to col B, not copy/paste
    cell.Cut cell.Offset(, 1)
End If 
```

# jquery - 结合 change、blur 和 ready 回调方法

> ID：14917089
> 
> 赞同：1
> 
> 时间：2013-02-17T01:24:18.090
> 
> 标签：jquery

有什么方法可以组合以下 3 条 jQuery 语句？

```
$("#search_building").change(function () {
    var building = $("#search_building").val();
    var room = $("#search_room").val();
    var dept = $("#dept").val();
    var dataString = 'room=' + room + '&' + 'building=' + building + '&' + 'dept=' + dept;
    $.ajax({
        type: "POST",
        url: "process_building.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#search_room').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableMon.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_mon').html(html);
        }
    });
});

$("#search_building").blur(function () {
    var building = $("#search_building").val();
    var room = $("#search_room").val();
    var dept = $("#dept").val();
    var dataString = 'room=' + room + '&' + 'building=' + building + '&' + 'dept=' + dept;
    $.ajax({
        type: "POST",
        url: "process_building.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#search_room').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableMon.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_mon').html(html);
        }
    });
});

$("#search_building").ready(function () {
    var building = $("#search_building").val();
    var room = $("#search_room").val();
    var dept = $("#dept").val();
    var dataString = 'room=' + room + '&' + 'building=' + building + '&' + 'dept=' + dept;
    $.ajax({
        type: "POST",
        url: "process_timetableMon.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_mon').html(html);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:26:12.663

jQuery[`on`](http://api.jquery.com/on)支持将同一个处理程序绑定到多个事件，并且是在 jQuery 1.7+ 中使用的合适方法。

```
$("#search_building").on("change blur", function () {
    // your code here
}); 
```

至于您的就绪处理程序，没有真正的`ready`事件，并且 jQuery 在这种情况下通常会忽略选择器并在任何情况下都在 DOM 就绪时执行。您可以简单地触发`blur`DOM 就绪：

```
$(function() {
    $('#search_building').blur();
}); 
```

# ios - 如何在设备上的每个触摸位置周围画一个圆圈？

> ID：14917090
> 
> 赞同：3
> 
> 时间：2013-02-17T01:24:55.917
> 
> 标签：ios, multi-touch, touchesbegan

这里的新程序员试图一步一步地做事。我试图找到一种方法在设备上每个当前触摸的位置周围画一个圆圈。两个手指在屏幕上，每个手指下一个圆圈。

我目前有在一个触摸位置画一个圆圈的工作代码，但是一旦我将另一根手指放在屏幕上，圆圈就会移动到第二个触摸位置，而第一个触摸位置是空的。当我添加第三个时，它会移动到那里等等。

理想情况下，我希望屏幕上最多可以有 5 个活动圆圈，每个手指一个。

这是我当前的代码。

```
@interface TapView ()
@property (nonatomic) BOOL touched;
@property (nonatomic) CGPoint firstTouch;
@property (nonatomic) CGPoint secondTouch;
@property (nonatomic) int tapCount;
@end

@implementation TapView

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
[super touchesBegan:touches withEvent:event];

NSArray *twoTouch = [touches allObjects];
    if(touches.count == 1)
    {
        self.tapCount = 1;
        UITouch *tOne = [twoTouch objectAtIndex:0];
        self.firstTouch = [tOne locationInView:[tOne view]];
        self.touched = YES;
        [self setNeedsDisplay];
    }
    if(touches.count > 1 && touches.count < 3)
    {
        self.tapCount = 2;
        UITouch *tTwo = [twoTouch objectAtIndex:1];
        self.secondTouch = [tTwo locationInView:[tTwo view]];
        [self setNeedsDisplay];
    } 
}
-(void)drawRect:(CGRect)rect
{
        if(self.touched && self.tapCount == 1)
        {
            [self drawTouchCircle:self.firstTouch :self.secondTouch];
        }
}
-(void)drawTouchCircle:(CGPoint)firstTouch :(CGPoint)secondTouch
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(ctx,0.1,0.1,0.1,1.0);
    CGContextSetLineWidth(ctx,10);
    CGContextAddArc(ctx,self.firstTouch.x,self.firstTouch.y,30,0.0,M_PI*2,YES);
    CGContextStrokePath(ctx);
} 
```

我确实在 appDelegate.m 的方法中`setMultipleTouchEnabled:YES`声明了。`didFinishLaunchingWithOptions`

我试图在方法中使用一个 if 语句，该语句基于 a`drawTouchCircle`更改为`self.firstTouch.x`，但这似乎破坏了整个事情，让我在任何触摸位置都没有圆圈。`self.secondTouch.x``self.tapCount`

我很难找到我的问题，而且我知道这可能很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:17:10.493

我刚刚写了一些似乎可以工作的代码。我添加了一个`NSMutableArray`名为`circles`视图的属性，其中包含`UIBezierPath`每个圆圈的属性。在`-awakeFromNib`我设置数组并设置`self.multipleTouchEnabled = YES`- （我认为您使用对 appDelegate.m 中的视图的引用来完成此操作）。

`-touchesBegan`在视图中，我在and方法中调用了这个`-touchesMoved`方法。

```
-(void)setCircles:(NSSet*)touches
{   
    [_circles removeAllObjects]; //clear circles from previous touch

    for(UITouch *t in touches)
    {
        CGPoint pt= [t locationInView:self];
        CGFloat circSize = 200; //or whatever you need
        pt = CGPointMake(pt.x - circSize/2.0, pt.y - circSize/2.0);
        CGRect circOutline = CGRectMake(pt.x, pt.y, circSize, circSize);
        UIBezierPath *circle = [UIBezierPath bezierPathWithOvalInRect:circOutline];
        [_circles addObject:circle];
    }
    [self setNeedsDisplay];
} 
```

触摸结束是：

```
-(void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event
{ 
    [_circles removeAllObjects];
    [self setNeedsDisplay];

} 
```

然后我循环`circles`访问`-drawRect`并调用`[circle stroke]`每一个

# javascript - 本机对象的奇怪行为是由什么引起的？

> ID：14917091
> 
> 赞同：1
> 
> 时间：2013-02-17T01:24:57.397
> 
> 标签：javascript, oop

最近我开始学习 JavaScript 中的面向对象编程。我的理解是，当引用变量时，我们实际上引用的不是它们的实际值，而是内存中的位置。这就是为什么所有那些应该复制实例的“*返回这个*”方法都不起作用的原因。

所以，示例代码：

```
//An example object with a simple property and
//failing "copy" function.
function MyObject()
{
    this.myProperty = 123;
    this.copy = function() { return this; };
}

var iOne = new MyObject();
var iTwo = iOne.copy();
iTwo.myProperty = 321; 
```

现在 iOne 和 iTwo 的“myProperty”属性都等于 321，因为“copy”方法返回了一个引用，而不是一个值。这种行为是意料之中的，一切正常。

现在，我尝试对原生对象类型 Number 执行相同的操作。让我们以更面向对象的程序员友好的方式创建它的一个实例：

```
var iOne = new Number(123);
var iTwo = iOne; //Equals "iTwo = iOne.copy()", except there isn't a copy method

iOne = 321; 
```

而现在，可怕的事情发生了。iOne 等于 321，但 iTwo 保持其值，仍然等于 123。

我不知道这种行为是由什么引起的。也许 Number 是某种“特殊”？也许与它相关的十进制数不仅仅是一个属性？或者也许它只是为了让没有经验的程序员的生活更轻松？最后一个选项与运算符有关。如果有人对此有所了解，请不要让我理解 JavaScript 的方式崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:27:27.027

对象、数组和字符串是通过引用（而不是通过副本）分配的。所有其他类型在分配时都是有效的副本（例如，它们创建一个与旧变量无关的新变量）。

字符串是一种特殊情况，因为它们是不可变的，因此当您更改字符串时，它总是会创建一个新字符串，因此即使之前的赋值是引用，它的行为更像是复制。

分配：

```
iOne = 321; 
```

正在用简单的原始数字类型替换 iOne 的值，因此它不会对任何其他变量产生影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:28:13.880

```
var iOne = new Number(123);
var iTwo = iOne; //Equals "iTwo = iOne.copy()", except there isn't a copy method

iOne = 321; 
```

`iOne`您正在用不同的原始编号覆盖变量持有的对象引用。

这些对象作为引用保存，但它们不是可以直接取消引用的指针，因此您无法替换该内存位置中保存的数据。你只能改变它*（如果对象是可变的）*。

具体来说，`Number`对象包装器是不可变的，或者至少它持有的原始值不能被替换。您只能替换整个对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T01:28:26.870

```
iOne = 321; 
```

该代码完成了预期的操作，您分配`321`给变量`iOne`，覆盖了它最初引用的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T01:36:27.007

“本机类型”和 Javascript 中的对象之间的行为没有真正的区别（除了本机类型是不可变的）。

在您的第二个示例中，您只是更改了变量`iOne`指向的内容，为什么要更改另一个自`iTwo`变量指向的内容？

在第一种情况下，您有两个变量指向同一个对象，如果您使用一个变量来改变对象，您也可以使用另一个变量观察变化（显然......它指向同一个对象）。

在 Javascript 中，你可以想象一切都是引用而不是值（副本）。如果你想复制一些你需要明确地做的事情......对于数组，你可以用来制作;`x.slice()`的浅拷贝 `x`对于对象，没有原始函数可以执行相同操作，因此您必须调用构造函数。

一个常见的 OOP 模式是有一个`.clone()`返回副本的成员函数，因此需要副本的人不需要知道如何制作每个类的副本。

```
function P2d(x, y) {
    this.x = x;
    this.y = y;
}

P2d.prototype.clone = function() {
    return new P2d(this.x, this.y);
} 
```

另一种特定于 Javascript 原型模型且在某些情况下可能有用的可能性是创建一个单独的对象，该对象看起来像一个浅副本，可以在不影响原始副本的情况下进行变异，但在读取时引用原始对象：

```
function fakeCopy(x) {
    function f() { }
    f.prototype = x;
    return new f;
}

p = new P2d(10, 20);
q = fakeCopy(p);
console.log(q.x); // Displays 10
q.y = 30;
console.log(q.y); // Displays 30
console.log(p.y); // Displays 20 -- original not changed
p.x = 99;
console.log(q.x); // Displays 99 (!) 
```

发生这种情况是因为 Javascript 对象有一个“原型链”，在访问成员进行读取时会对其进行搜索。`q`被创建为一个空对象，并以其原型为原型，因此在查找属性（用于读取）时，如果在内部找不到某些东西`p`，它将在内部进行搜索。但是，在编写时，将在内部设置一个属性，不会影响并且从那时起，将返回存在于中的值，而不必在原型链中上升。`p``q``q``p``q`

# python - Python中嵌套列表的总和

> ID：14917092
> 
> 赞同：11
> 
> 时间：2013-02-17T01:25:01.937
> 
> 标签：python, list, python-3.3

我尝试总结嵌套元素列表

例如，`numbers=[1,3,5,6,[7,8]]`应该产生`sum=30`

我写了以下代码：

```
def nested_sum(L):
    sum=0
    for i in range(len(L)):
       if (len(L[i])>1):
          sum=sum+nested_sum(L[i])
       else:
          sum=sum+L[i]
    return sum 
```

上面的代码给出了以下错误：

> 'int' 类型的对象没有 len()

我也试过了`len([L[i]])`，还是不行。

任何人都可以帮忙吗？它是 Python 3.3

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-17T01:29:07.293

您需要使用`isinstance`来检查元素是否为列表。此外，您可能希望遍历实际列表，以使事情变得更简单。

```
def nested_sum(L):
    total = 0  # don't use `sum` as a variable name
    for i in L:
        if isinstance(i, list):  # checks if `i` is a list
            total += nested_sum(i)
        else:
            total += i
    return total 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T06:37:52.290

通常认为[鸭类型](http://docs.python.org/2/glossary.html#term-duck-typing)更 Pythonic ，而不是显式类型检查。像这样的东西将采用任何可迭代的，而不仅仅是列表：

```
def nested_sum(a) :
    total = 0
    for item in a :
        try:
            total += item
        except TypeError:
            total += nested_sum(item)
    return total 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-17T01:41:15.783

具有列表理解的另一种解决方案：

```
>>> sum( sum(x) if isinstance(x, list) else x for x in L )
30 
```

编辑：对于超过两个级别的列表（谢谢@Volatility）：

```
def nested_sum(L):
    return sum( nested_sum(x) if isinstance(x, list) else x for x in L ) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-07-09T23:01:36.160

我会总结扁平列表：

```
def flatten(L):
    '''Flattens nested lists or tuples with non-string items'''
    for item in L:
        try:
            for i in flatten(item):
                yield i
        except TypeError:
            yield item

>>> sum(flatten([1,3,5,6,[7,8]]))
30 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-20T14:44:26.403

使用 lambda 处理嵌套列表的快速递归：

```
rec = lambda x: sum(map(rec, x)) if isinstance(x, list) else x 
```

`rec`，应用于列表，将返回总和（递归），在一个值上，返回该值。

```
result = rec(a) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-20T06:07:48.577

使用过滤器和映射以及递归的示例：

```
def islist(x): 
    return isinstance(x, list)

def notlist(x): 
    return not isinstance(x, list)

def nested_sum(seq):
    return sum(filter(notlist, seq)) + map(nested_sum, filter(islist, seq)) 
```

这是一个使用reduce和recursion的例子

```
from functools import reduce

def nested_sum(seq):
    return reduce(lambda a,b: a+(nested_sum(b) if isinstance(b, list) else b), seq) 
```

使用普通旧递归的示例：

```
def nested_sum(seq):
    if isinstance(seq[0], list):
        head = nested_sum(seq[0])
    else:
        head = seq[0]
    return head + nested_sum(seq[1:]) 
```

使用模拟递归的示例：

```
def nested_sum(seq):
    stack = []
    stack.append(seq)
    result = 0
    while stack:
        item = stack.pop()
        if isinstance(item, list):
            for e in item:
                stack.append(e)
        else:
            result += item
    return result 
```

处理自引用列表的调整留给读者作为练习。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-27T11:13:29.497

此代码也有效。

```
def add_all(t):
    total = 0
    for i in t:
        if type(i) == list: # check whether i is list or not
            total = total + add_all(i)
        else:
            total += i
    return total 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-02T03:53:48.720

```
 def sum_nest_lst(lst):
         t=0
         for l in lst:
             if(type(l)==int):
                 t=t+l
             if(type(l)==list):
                 t=t+sum(l)
         print(t) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-24T14:35:51.563

```
def nnl(nl): # non nested list function

    nn = []

    for x in nl:
        if type(x) == type(5):
            nn.append(x)

        if type(x) == type([]):
            n = nnl(x)

        for y in n:
            nn.append(y)

     return sum(nn)

 print(nnl([[9, 4, 5], [3, 8,[5]], 6])) # output:[9,4,5,3,8,5,6]

 a = sum(nnl([[9, 4, 5], [3, 8,[5]], 6]))
 print (a) # output: 40 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-30T05:54:59.070

**一个简单的解决方案是使用嵌套循环。**

```
def nested_sum(t):

    sum=0
    for i in t:
        if isinstance(i, list):
            for j in i:
                sum +=j
        else:
            sum += i        
    return sum 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-29T16:15:59.200

```
L = [1, 2, 3, [4, 5, 6], 5, [7, 8, 9]]
total = 0 # assign any var 
for a in L: # assign index and start to iterate using if else
    if (isinstance(a, list)): # since its a list you are basically repeating the prev step
        for b in a:
            total += b
    else:
        total += a
print(total) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-15T11:57:15.093

```
def list_sum(L):
    return sum(list_sum(x) if isinstance(x, list) else x for x in L) 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-02-28T16:15:49.463

```
def nested_sum(lists):
total = 0
for lst in lists:
    s = sum(lst)
    total += s
return total 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-02-17T20:43:26.830

```
 #nested sum

    l = [[1, 2], [3,5], [6,2], [4, 5, 6,9]] 

    def nested_sum(lst):

       sum = 0

       for i in lst:
          for j in i:
             sum = sum + j

       print(sum)

nested_sum(l) 
```

# javascript - 具有多个元素/范围的 AngularJS touchmove 事件

> ID：14917095
> 
> 赞同：3
> 
> 时间：2013-02-17T01:26:08.833
> 
> 标签：javascript, angularjs, mobile-safari, angularjs-directive

我正在尝试为 ng-repeat'ed 指令处理 touchmove 事件，无论 touchstart 发生在哪里。在我目前的代码中，如果其中一个元素检测到 touchstart，则所有 touchmove 事件都将由同一个元素处理，而不管触摸移动发生在屏幕上的哪个位置。当我使用 mousemove 执行类似的功能时，每个元素只有在鼠标悬停在相应元素上时才能正确接收 mousemove 事件。

我已经看到与 AngularJS 无关的关于检测 touchmove 事件的 DOM 元素的问题（[如何找出 touchmove javascript 事件的实际 event.target？](https://stackoverflow.com/questions/3918842/how-to-find-out-the-actual-event-target-of-touchmove-javascript-event)），但如果我这样做，我看不到处理方法在具有正确范围的指令/控制器内。

这是一个基本示例（为方便起见：http: [//jsfiddle.net/zMKKv/1/](http://jsfiddle.net/zMKKv/1/)）来比较 mousemove 和 touchmove 之间的行为差​​异：

```
<html lang="en" ng-app="myApp">

    <head>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
    </head>

    <body>
        <div ng-controller="countController">
            <counter ng-repeat="item in somedata" />
        </div>
    </body>

</html>

//-----------

.box {
  width: 150px;
  height: 150px;
  border: solid;
  float: left;
}

//-----------

var app = angular.module('myApp', []);

app.controller("countController", function ($scope) {
    $scope.somedata = [{
        label: "One",
        count: 0
    }, {
        label: "Two",
        count: 0
    }, {
        label: "Three",
        count: 0
    }];

    $scope.increment = function(item) {
      item.count = item.count + 1;
      $scope.$digest();
    };
});

app.directive("counter", function () {
    return {
        restrict: "E",
        template: '<div class="box">{{item.label}}<p>{{item.count}}</div>',
        link: function (scope, element, attrs) {

            element.on('mousemove', function () {
                scope.increment(scope.item);
            });

            element.on('touchmove', function (e) {
                e.preventDefault();
                scope.increment(scope.item);
            });
        }
    };
}); 
```

# java - 最小化后 JFrame 不会重新最大化

> ID：14917100
> 
> 赞同：2
> 
> 时间：2013-02-17T01:27:08.520
> 
> 标签：java, swing, jframe, minimize, maximize

我无法让自定义 JFrame 在最小化后正确最大化。这是我经历的过程：我打开框架，最大化它（下面的代码），最小化它，然后从扩展坞重新打开程序。但是，当我重新打开框架时，它会恢复到原来的大小，而不是最小化之前的最大化大小。

这些方法在按下最大化和最小化按钮时被调用。这是一个自定义的 JFrame，它没有装饰，所以我为这些操作制作了按钮。

```
private void maximizeAction(){
    setExtendedState(getExtendedState() | Frame.MAXIMIZED_BOTH);
}//=================================

private void minimizeAction(){
    setExtendedState(Frame.ICONIFIED);
}//================================= 
```

我尝试`setPreferredSize(new Dimension(screenWidth, screenHeight));`在最大化函数中添加一行，但是当我重新打开它时，这并没有改变框架的行为。

其他可能的促成因素可能是：

*   框架具有透明度和独特的框架形状，因此我覆盖了该`paint()`命令。但是，我使用继承变量，所以这些应该是准确的。就好像框架已经忘记了它有多大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:20:03.353

您需要保持之前的扩展状态。

```
private void minimizeAction(){
    setExtendedState(getExtendedState() | Frame.ICONIFIED);
}//================================= 
```

# c++ - C ++：如何在具有基类的父接口中实现功能？

> ID：14917101
> 
> 赞同：2
> 
> 时间：2013-02-17T01:27:09.163
> 
> 标签：c++, oop, inheritance, interface

考虑以下层次结构：

```
class Interface {
public:
    virtual void foo() = 0;
};

class SubInterface: public Interface {
public:
    virtual void bar() = 0;
};

class Base: public Interface {
public:
    void foo() {};
};

class Impl: public SubInterface, public Base {
public:
    void bar() {};
}; 
```

*   除了 foo() 之外，还有几个子接口提供其他方法。
*   一个子接口可以有多个实现类。
*   foo() 总是以同样的方式实现。

这是一个模拟如何使用这些类的示例：

```
int main() {
    SubInterface* view1 = new Impl(); // Error! Interface::foo() is pure virtual within Impl
    view1->foo();
    view1->bar();
    Interface* view2 = view1;
    view2->foo();
} 
```

为什么编译器看不到继承自`Interface::foo()`的实现？`Base``Impl`

我想我可以显式地实现`foo()`并将`Impl`调用委托给`Base`这样的：

```
class Impl: public SubInterface, public Base {
public:
    void foo() {
        Base::foo();
    }
    void bar() {};
}; 
```

但是，我必须对所有实现子接口的类都这样做，所以这种方式并不完全理想。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T01:34:34.893

`SubInterface`并且`Base`应该从虚拟继承，否则你会以[可怕的钻石](http://www.parashift.com/c++-faq/mi-diamond.html)`Interface`的形式产生歧义 基本上，发生的事情是 Impl 包含两个接口的“实例”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T01:39:08.040

这就是为什么 - 按照图表：

![在此处输入图像描述](../Images/ce43df9bd5567797911437f16be9df69.png)

# json - 字符串的 Java 验证器

> ID：14917104
> 
> 赞同：0
> 
> 时间：2013-02-17T01:27:44.007
> 
> 标签：json, hibernate-validator

如何使用 Hibernate 验证器验证在绑定到使用验证器注释注释的 Java 类的 JSON 有效负载中多次出现的元素？

假设我有以下内容：

```
class Person {
String name;
int age;
} 
```

我将 JSON 绑定到 Person。

JSON 有效负载如下所示：

```
{
 "name":"someName",
  "age":30
} 
```

假设有效负载有 2 个重复的“名称”字段，如下所示。

```
 {
     "name":"someName",
     "name" : "otherName",
      "age":30
 } 
```

然后我喜欢使用验证器来验证这一点。如果我使用 @Size(min=1, max=1)，它将适用于 Collection 对象。

我想知道如何为 String 做这项工作。使用 String @Size 会尝试查找字符串内容的长度，而不是负载中字符串内容的次数。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:44:37.813

这是不可能的。JSON 反序列化和 Bean 验证是两个***完全***不同的东西。当你的 Hibernate 验证启动时，它所看到的只是一个`Person`对象，只有一个名称字段。

*JSON 库*的行为将决定哪些“名称”字段将被反序列化到 Java bean 中（或者是否会引发异常）。在大多数情况下，如果您想验证没有提供重复项，那么您将需要编写一些自定义反序列化代码。

# sql - sql 多个复选框 OR 查询语句

> ID：14917107
> 
> 赞同：0
> 
> 时间：2013-02-17T01:28:31.880
> 
> 标签：sql

我将如何在具有多项选择的查询中使用它，它必须类似于

```
SELECT * FROM venue_event where venue = $check or $check ?? 
```

形式

```
 <form action="test.php" method="post">
 <input type="checkbox" name="check_list[]" value="value 1">
 <input type="submit" />
 </form>
 <?php
 if(!empty($_POST['check_list'])) {
 foreach($_POST['check_list'] as $check) {
        echo $check;
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:32:06.880

我不太了解 php，无法发布该部分，但您的 SQL 查询最终应该看起来像：

```
SELECT *
FROM venue_event
WHERE venue IN ('venue1','venue2'); 
```

或者您可以使用 OR：

```
SELECT *
FROM venue_event
WHERE venue = 'venue1' OR 
    venue = 'venue2'; 
```

# r - 如何在R或excel中将不同的组从列转置到行

> ID：14917109
> 
> 赞同：0
> 
> 时间：2013-02-17T01:29:01.003
> 
> 标签：r, excel, transpose

我搜索了一些答案，但似乎没有人能回答我的问题

我的数据看起来像这样（2 列，2 组组“1”和组“2”）

*   1 10
*   1 20
*   1 50
*   2 40
*   2 30
*   2 60

我想按每组将它从列转置到行，结果将如下所示

*   1 1 1
*   10 20 50
*   2 2 2
*   40 30 60

由于我有很多组，我无法一个一个手动完成。有人可以帮我吗？谢谢你。

谢谢大家，因为所有组的长度都相同（受弗洛里斯评论的启发），实际上我可以简单地使用矩阵来解决问题

```
 x=read.table(header=F,text="10 20 50 40 30 60")
    matrix(x,nrow=2,byrow=T) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:58:13.850

```
x <- read.table(header=F, text="1 10
1 20
1 50
2 40
2 30
2 60")

do.call(rbind, by(x, x$V1, FUN=t))
##     1  2  3
## V1  1  1  1
## V2 10 20 50
## V1  2  2  2
## V2 40 30 60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:03:19.857

如果您知道如何使用 VBA，那么编写一个简短的 sub() 来为您完成这项工作非常简单。我正在硬编码地址 - 你可以弄清楚如何移动它。我假设当您调用此宏时您的数据位于活动工作表上，并且您希望副本显示在原始数据的右侧（在 A 和 B 列中，从第 2 行开始 - 为您提供上面的标签空间）。此外，我将假设您的组编号为 1、2、3...，并且您不需要复制它们的值。然后代码看起来像这样（按F-11打开VBA编辑器，插入一个模块，然后复制这个）

```
Sub bigSwap()
dim R as Range, c as Range
dim grp
dim grpCount(1 To 100) ' assuming no more than 100 groups, or adjust this number
dim i

' just making sure it's properly initialized
for i=1 To 100
  grpCount(ii)=0
next i

Set R = Range("B2", [B2].End(xlDown)) ' this finds all the cells with values
' note - I am using [B2] as shorthand for Range("B2")

For each c in R.cells
  grp = c.offset(0, -1).value  ' find the corresponding group
  [D1].offset(grp, grpCount(grp)).value = c.value
  grpCount(grp) = grpCount(grp)+1  ' keep track of # in this row
next

End Sub 
```

我无法对此进行测试，但我相信它很好。如果您遇到问题，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T11:08:11.363

将单元格簇从列转置到行

假设 A2:A16 包含数据，请尝试...

C2，上下复制：

```
=INDEX($A$2:$A$16,ROWS(C$2:C2)*3-3+COLUMNS($C2:C2)) 
```

相应地调整参考。

先尝试一行，然后再做下一行，然后合并

# javascript - 链接到特定选项卡/直接到选项卡

> ID：14917110
> 
> 赞同：0
> 
> 时间：2013-02-17T01:29:01.383
> 
> 标签：javascript, html, tabs, hyperlink, shtml

是否可以直接链接到[http://www.antutu.com/Ranking.shtml](http://www.antutu.com/Ranking.shtml)等网站的标签？

我指的是标签推荐，最高，最低......

查看源代码，我在该块的脚本中找不到任何 class 和 id 引用：

```
<div class="tab">
<div class="tab_bg" id="mobile-tab">
<div class="fl tab_i"><a href="javascript:;"onclick="loadRanking_order(this,'mobile','df');">Recommend</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','hs');">Highest</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','ls');">Lowest</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','bv');">Cost-effective</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','be');">Experience</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','bp');">Hottest</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','bc');">Camera</a></div>
<div class="fl tab_i2"><a href="javascript:;" onclick="loadRanking_order(this,'mobile','up');">Professional</a></div>
<div class="cl"></div>
</div>
</div> 
```

哦，我对 html 和 javascript 真的很陌生，但我使用的是这个网站：[http ://www.dnnstuff.com/modules/aggregator-tabbed-modules/aggregator-demos/linking-directly-to-a-tab .aspx](http://www.dnnstuff.com/modules/aggregator-tabbed-modules/aggregator-demos/linking-directly-to-a-tab.aspx) 的代码作为指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:34:18.973

使用指向页面的实际链接不会如此。

单击选项卡时页面运行此代码

```
function loadRanking_order(obj, m, o) {
    $("div#" + m + "-tab div.tab_i,div#" + m + "-tab div.tab_i2").removeClass("tab_i").addClass("tab_i2");
    obj.parentNode.className = "fl tab_i"
    if (o == 'df') {
        $('#rank_' + m + '_lists').html($('#rank_' + m + '_default').html());
        return;
    }
    $.ajax({
        url: '/Ranking.shtml?cmd=ajax_' + m + '&o=' + o,
        dataType: "html",
        success: function (data) {
            $('#rank_' + m + '_lists').html(data);
        }
    });
} 
```

您也许可以在 iframe 中加载页面并自己调用 javascript 方法

# javascript - Safari中鼠标事件的Raphael js问题

> ID：14917112
> 
> 赞同：1
> 
> 时间：2013-02-17T01:29:13.190
> 
> 标签：javascript, safari, raphael, mouseevent

使用 Raphael 库时，我在 Safari 中遇到了很多鼠标事件问题（它只是不适用于鼠标事件）。

我读到它很常见，也许有一个解决方案（来自文档）：

> `Paper.safari()`
> 
> Safari (WebKit) 中有一个不方便的渲染错误：有时应该强制渲染。此方法应有助于处理此错误。

顺便说一句，我不明白如何让它工作..我喜欢这样：

```
var Paper = new Raphael(document.getElementById("paperId"), '300px', '300px');
Paper.safari(); 
```

你能告诉我我做错了什么吗？或者，否则，是否有替代解决方案？

我一直在寻找几个小时，没有结果...... :(

编辑：是的，问题在于用 url 填充 raphael 元素：

```
myClass.prototype.PhotoClick = function(){
    var that = this;
    $('.photo').each(
           function(){
                $(this).dblclick(function(event) {
                                        that.loadPhoto[index].attr({fill:"url(images/image1.jpg)"});
                                        });
            });
} 
```

抱歉，我不再发布更多内容，因为代码有点乱。但是，数组项是一个 raphael 对象，并且 url 路径是正确的。如果我用颜色填充元素，一切都很好。只是网址给我带来了问题...

希望现在更清楚

# wordpress - Wordpress 缩略图不工作 AWS EC2

> ID：14917113
> 
> 赞同：0
> 
> 时间：2013-02-17T01:29:14.157
> 
> 标签：wordpress, amazon-web-services, thumbnails

我有一个正在开发的网站 - 在等待从客户端获取服务器访问权限时，我一直在暂存它。

现在我们已经获得了服务器访问权限，他们正在使用 Amazon Web Services -Ubuntu。我对这项 AWS 服务非常陌生 - 但我的问题是当我进行搜索时我的缩略图不再有效

[这就是我想要的，并且在登台服务器](http://freelunchscreenprinting.com/testsite/?s=bread&x=0&y=0)上，在搜索结果中显示“特征图像”缩略图

[这是在 AWS 服务器上](http://learn.rupertport.com/?s=this+is&x=0&y=0)，没有缩略图。

有谁知道可能会发生什么？我是否必须联系 AWS 以进行不同的设置？我可以自己设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T08:03:36.333

我遇到了同样的问题。看起来缩略图文件没有创建（文件名-[维度].jpg）你应该安装 php-gd 来解决这个问题`sudo yum install php-gd`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:35:08.567

您的`img`标签在 src 属性中没有值

```
<img src="" class="post-thumb" alt="this is a post" width="186" height="186"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:28:57.900

最新版本的 Wordpress 需要 PHP 5.2 或更高版本。所以你需要安装最新版本的 php53-gd：

```
sudo yum install php53-gd 
```

# javascript - 将 if 添加到 Rails 的 AJAX（检查这是否 == DOM 元素）

> ID：14917114
> 
> 赞同：0
> 
> 时间：2013-02-17T01:29:24.200
> 
> 标签：javascript, jquery, ajax

当由 id 标识的特定 DOM 元素发生更改时，我正在使用一些执行 .post() 函数的 JavaScript：

```
$.fn.subSelectWithAjax = function() {
  var that = this;

  this.change(function() {
    $.post("/people/thisguy", {id: that.val()}, null, "script");
  });
}

$(document).ready(function(){
    $("#this_guy").subSelectWithAjax();
}); 
```

`#this_guy`是表单中的一个选择元素。当它发生变化时，它会执行 .post 函数并将其定向到 url “/people/thisguy”。

我想添加一个 if 语句来有条件地执行一个 .post 函数，该函数由正在执行 .subSelectWithAjax() 函数的元素的 id 确定。我试过这样：

```
$.fn.subSelectWithAjax = function() {
    var that = this;

    if(this==document.getElementById('#this_guy')) {
        this.change(function() {
            $.post("/people/thisguy", {id: that.val()}, null, "script");
        });
    } else {
        this.change(function() {
            $.post("/people/anyotherguy", {id: that.val()}, null, "script");
        });
    }
}

$(document).ready(function(){
    $("#this_guy").subSelectWithAjax();
    $("#that_guy").subSelectWithAjax();
    $("#the_other_guy").subSelectWithAjax();
}); 
```

我希望第一个 .post 函数在更改元素的 id 是 this_guy 时执行，即直接到 url“/people/thisguy”。但是，它总是执行 else 子句中指定的 .post 函数，我得出的结论是因为我没有将正确的参数传递给相等运算符。

此外，在 JavaScript 中，if 语句是否必须在语法上有效才能执行 else 子句？我也在尝试确定我所写的内容是否适用于其他检查，而不是我正在寻找的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:36:57.583

您`if`将始终失败，导致`else`块运行，因为您正在比较苹果和橙子：您需要比较两个 HTML 元素或两个 jQuery 对象，但现在您正在将 jQuery 对象与 HTML 元素进行比较，因此它们永远不可能平等。

```
$.fn.subSelectWithAjax = function() {
    var that = this; // In this context `this` is a jQ object, not an html elem

    if( this[0] == document.getElementById('#this_guy')) {
        this.change(function() {
            $.post("/people/thisguy", {id: that.val()}, null, "script");
        });
    } else {
        this.change(function() {
            $.post("/people/anyotherguy", {id: that.val()}, null, "script");
        });
    }
} 
```

至于您的最后一个问题，您的所有代码都必须在语法上有效，否则解释器将无法运行它，抛出错误并停止。

# ruby - 使用扩展 ActiveSupport::Concern

> ID：14917117
> 
> 赞同：8
> 
> 时间：2013-02-17T01:29:41.480
> 
> 标签：ruby, activesupport

我正在通过 CodeSchool 的 RubyBits 进行练习，但我并不理解：“**确保 AtariLibrary 类仅包含 LibraryUtils 模块，并让 ActiveSupport::Concern 负责加载其依赖项。然后，重构LibraryUtils 上的 self.included 方法以使用包含的方法**。”

```
module LibraryLoader

  extend ActiveSupport::Concern

  module ClassMethods
    def load_game_list
    end
  end
end

module LibraryUtils
  def self.included(base)
    base.load_game_list
  end
end

class AtariLibrary
  include LibraryLoader
  include LibraryUtils
end 
```

根据解决方案（如下），它似乎`ActiveSupport::Concern`不负责加载依赖项 - 您需要在 LibraryUtils 中包含 LibraryLoader。

您能帮我理解`ActiveSupport::Concern`正在做什么，以及为什么需要`extend`在两个模块中调用它吗？

```
module LibraryLoader
  extend ActiveSupport::Concern

  module ClassMethods
    def load_game_list
    end
  end
end

module LibraryUtils
  extend ActiveSupport::Concern
  include LibraryLoader

  #result of refactoring the self.included method
  included do
    load_game_list
  end
end

class AtariLibrary
  include LibraryUtils
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T18:02:35.813

当你调用`extend ActiveSupport::Concern`它时，它会寻找一个 ClassMethods 内部模块，并用它来扩展你的“主机”类。然后它将为您提供一个`included`方法，您可以将块传递给：

```
included do
 some_function
end 
```

该`included`方法将在包含的类的上下文中运行。如果您有一个模块需要另一个模块中的功能，`ActiveSupport::Concern`则将为您处理依赖关系。

# hibernate - Cascade.ALL 来自非拥有实体端

> ID：14917122
> 
> 赞同：1
> 
> 时间：2013-02-17T01:31:33.987
> 
> 标签：hibernate, associations, cascade

我在 Item 和 Category 之间有@ManyToMany（双向）关系。

```
class Item {
  @ManyToMany(cascade = CascadeType.ALL)
  Collection<Category> categories=new ArrayList<Category>();
}

class Category {
  @ManyToMany(mappedBy="categories", cascade = CascadeType.ALL)
  Collection<Item> items=new ArrayList<Item>();
} 
```

我在两者上都指定了 CascadeType.ALL。项目是所有者。多对多关系将使用第三个表 (Item_Category) 进行映射

1.  当我创建一个项目并将类别添加到该项目并保存该项目时，该项目中的所有类别都会保留。在连接表中也有必要的条目（如预期的那样）。

2.  但是，当我创建一个类别并向其添加新项目并保存该类别时，我看到在项目和类别表中创建了必要的条目，但在 Item_Category 连接表中没有插入。因此，无法正确创建关联。

这是预期的行为吗？这意味着只有当我们在 Item 中添加类别时关联表才会有条目，因为 Item 是关系的所有者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T01:48:20.167

你期待魔法，而 Hibernate 不是那样的。保存损坏的对象模型会使事情损坏。如果 Item 和 Category 具有双向关系，则必须*始终*设置关系的两端。仅仅因为你有 Hibernate 并不意味着你的代码可以是惰性的。

换句话说，你永远不会编写这样的代码并期望它能够工作，你会（假设一个工作`assert`关键字）吗？

```
Category c = new Category();
Item i = new Item();
c.getItems().add(i);
assert i.getCategories().contains(c); 
```

如果不是，为什么您希望在将 Hibernate 添加到组合中时它会起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T14:15:25.643

来自 Hibernate ORM 文档的[站点：示例 7.27。多对多关联](https://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#example-many-to-many-mapping-file)：

*> 仅对关联的反向端所做的更改不会保留 <*

如果您愿意，反向结束意味着不拥有的一方。所以是的，您应该调用关系拥有方的持久化方法来完全持久化 Item_Category 表。

# java - ORMLite 迭代 ForeignCollection 抛出异常

> ID：14917126
> 
> 赞同：1
> 
> 时间：2013-02-17T01:31:55.490
> 
> 标签：java, android, collections, ormlite, foreign-collection

我尝试迭代`ForeignCollection<OrderItems>`。如果`eager`设置为，则此方法有效，`true`但惰性选项仍然无效。

首先，我做

```
OrderDataSource orderDS = new OrderDataSource(getAppContext());
ws.Order order = orderDS.convertToWS(mOrder,ws.Order.class);
orderDS.close(); 
```

在哪里`close()`关闭数据库连接并`convertToWS()`进行迭代。

**一部分`convertToWS()`：**

```
Iterator<OrderItem> itr = order.getOrderItems().iterator();

while (itr.hasNext())
{
    OrderItem orderItem = itr.next();
    ...
} 
```

从返回后调用方法关闭`convertToWS()`。我与其他对象`convertToWS()`一起工作，遇到任何问题。

我也尝试使用`CloseableIterator`并在块中关闭它`finally`，但没有成功。期待这一点，我不关闭连接。

**例外：**

```
02-17 02:21:43.094: E/AndroidRuntime(4820): FATAL EXCEPTION: main
02-17 02:21:43.094: E/AndroidRuntime(4820): java.lang.IllegalStateException: database /data/data/my_app/databases/my_db (conn# 0) already closed
02-17 02:21:43.094: E/AndroidRuntime(4820):     at android.database.sqlite.SQLiteDatabase.verifyDbIsOpen(SQLiteDatabase.java:2082)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1556)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1538)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.android.AndroidCompiledStatement.getCursor(AndroidCompiledStatement.java:162)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.android.AndroidCompiledStatement.runQuery(AndroidCompiledStatement.java:57)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.stmt.SelectIterator.<init>(SelectIterator.java:55)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.stmt.StatementExecutor.buildIterator(StatementExecutor.java:232)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.BaseDaoImpl.createIterator(BaseDaoImpl.java:933)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.BaseDaoImpl.iterator(BaseDaoImpl.java:531)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.BaseDaoImpl.iterator(BaseDaoImpl.java:526)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.LazyForeignCollection.seperateIteratorThrow(LazyForeignCollection.java:74)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.LazyForeignCollection.iteratorThrow(LazyForeignCollection.java:60)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.LazyForeignCollection.closeableIterator(LazyForeignCollection.java:50)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.LazyForeignCollection.iterator(LazyForeignCollection.java:45)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.j256.ormlite.dao.LazyForeignCollection.iterator(LazyForeignCollection.java:26)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at orders.OrderDataSource.convertToWS(OrderDataSource.java:409)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at fragments.OrderDetailFragment.sendOrder(OrderDetailFragment.java:419)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at fragments.OrderDetailFragment.doPositiveClick(OrderDetailFragment.java:347)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at ui.dialogfragments.AlertDialogFragment$1.onClick(AlertDialogFragment.java:54)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at android.os.Looper.loop(Looper.java:137)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at android.app.ActivityThread.main(ActivityThread.java:4424)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at java.lang.reflect.Method.invokeNative(Native Method)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at java.lang.reflect.Method.invoke(Method.java:511)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-17 02:21:43.094: E/AndroidRuntime(4820):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:10:43.353

您需要打开数据库才能迭代值，因为您正在执行惰性查询，这意味着您第一次从外部集合访问对象时从数据库中获取数据。

因此，如果您正在扩展 ORMLiteActivity，那么您的数据库将保持打开状态，直到您销毁该屏幕。

这里的主要内容是在您使用数据时保持助手打开。

# c++ - 在命名空间中初始化 const 对象

> ID：14917130
> 
> 赞同：2
> 
> 时间：2013-02-17T01:32:43.460
> 
> 标签：c++, namespaces, constants, static-initialization, destruction

我在初始化命名空间中的一些 const 对象时遇到了问题。我有一个如下命名空间：

```
namespace myNamespace{
    const std::string HI = "Hi";
    const std::string BYE = "Bye";

    inline std::vector<std::string> createHiAndByeVector(){
        std::vector<std::string> temp;
        temp.push_back(HI);
        temp.push_back(BYE);
        return temp;
    }

    const std::vector<std::string> HI_AND_BYE = createHiAndByeVector();
} 
```

如果我调试初始化，我可以看到两者`HI`并`BYE`获得字符串文字。继续执行到 initialziae `HI_AND_BYE`，但是当我们进入`createHiAndByeVector()`函数时，两者`HI`都`BYE`没有值了。`push_back()`然后我在该方法中遇到分段错误。如果我查看调用堆栈，我会看到以下行：`__static_initialization_and_destruction_0()`. 到底是怎么回事？我的对象在构建后会立即被销毁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:41:46.540

我的猜测是这里的问题违反了单一定义规则（ODR）。这里的猜测是这段代码实际上是在一个头文件中，这也是你将函数声明为内联的原因。

现在，此代码在多个翻译单元（.cpp 文件）TU1 和 TU2 中编译。这导致两组常量和内联函数。现在，在链接时，常量彼此独立存在，因为它们具有内部链接（命名空间级别的 const 会导致这种情况）。但是，该函数没有内部链接，而是指示链接器通过`inline`. 现在，剩下的一个用于初始化 TU1 和 TU2 中的向量，但它使用其中一个的常量字符串。根据这些初始化的时间（未定义），它可以工作或不工作。这基本上就是上面 Deamonpog 提到的初始化顺序惨败。

回到 ODR，问题在于内联函数被编译了两次，但它们并不相同，因为它们隐式引用了不同的字符串常量。当您在标头中有匿名名称空间时，也会出现类似的问题。BTW：除此之外，这个问题与命名空间无关！有两种方法可以解决这个问题：

1.  也使 init 函数成为静态的。这将所有这些常量和函数与其他翻译单元中的兄弟区分开来。
2.  您只需在标头中声明 ( `extern string const BYE;`) 常量并`string const BYE = "Bye!";`在单独的 TU 中实现它们 ()。这样，您只有一个可以由程序的不同部分共享的实例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T02:07:37.420

我认为这是由于初始化惨败。以下链接可能会对您有所帮助。问题是全局/静态变量是以随机方式初始化的。初始化它们没有特定的顺序。所以也许你的 HI_AND_BYE 在 HI 或 BYE 被初始化之前被初始化了。！！！

[查找 C++ 静态初始化顺序问题](https://stackoverflow.com/questions/335369/finding-c-static-initialization-order-problems)

[http://www.parashift.com/c++-faq-lite/static-init-order.html](http://www.parashift.com/c++-faq-lite/static-init-order.html)

# ios - 使用 iOS 类别创建新颜色

> ID：14917144
> 
> 赞同：5
> 
> 时间：2013-02-17T01:35:14.487
> 
> 标签：ios, categories, uicolor

我想创建一些`UIColor`在我的应用程序中使用的新 s。不时地对 RGB 进行微调（确切的颜色阴影正在争论中）

目前我必须从 RGB 中创建新的颜色，并且代码被洒满并重复。

有没有更好的方法可以让我创建一种新的颜色并在我的应用程序中使用它。

```
[UIColor myNewCustomRedColor] 
```

这里最好的模式是什么 - Category 是正确的选择 - 如果是这样，如何？如果没有 - 推荐的方法是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T01:43:32.183

对于这样的事情，类别是一个不错的选择。我通常只制作一个新的 .h/.m 文件对，`MyCategories.h`/ `MyCategories.m`，其中包含您想要的常用类别。

MyCategories.h：

```
@interface UIColor (MyCategory)

+ (UIColor *)customRedColor;

@end 
```

我的类别.m

```
@implementation UIColor (MyCategory)

+ (UIColor *)customRedColor {
    return [UIColor redColor];
}

@end 
```

您可以在任何需要的地方导入 .h 文件，也可以将导入粘贴在 MyApp-Prefix.pch 文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T01:38:05.727

我在其他项目中使用的一种方法是创建一个 ProjectStyle.h 文件，其中包含自定义颜色的#defines 和其他与样式相关的常量。你只需要导入它。

就像是：

```
ProjectStyles.h

#define RED_HEADER_COLOR [UIColor colorWithRed:0.8f green:0.1f blue:0.1f alpha:0.9f]
#define RED_BACKGROUND_COLOR [UIColor colorWithRed:0.9f green:0.3f blue:0.1f alpha:1.0f]
#define PRIMARY_FONT [UIFont fontWithName:@"HelveticaNeue-Bold" size:12.0f] 
```

如果你想创建一些 UIColor 或 UIFont 对象的常量实例，你也可以有一个相应的 .m 文件，比如

```
ProjectStyles.m

+ (UIColor *) redHeaderColor 
{  return [UIColor colorWithRed:0.8f green:0.1f blue:0.1f alpha:0.9f];  }

+ (UIColor *) redBackgroundColor 
{  return [UIColor colorWithRed:0.9f green:0.3f blue:0.1f alpha:1.0f];  }

+ (UIFont *) primaryFont
{
    static UIFont *font = nil;
    if ( font == nil )
        font = [UIFont fontWithName:@"HelveticaNeue-Bold" size:12.0f];
    return font;
} 
```

然后当然要在标题中公开那些

我喜欢 ProjectStyle 方法的另一件事是，一段时间后，您将需要更多自定义的东西，而不仅仅是颜色 - 自定义字体、自定义线条和阴影。有一个 Style 类或标题来放置所有这些东西，让您可以在一个地方查找已经为各种事物定义的自定义元素，以及一个非常明显的#import，供以后的编码人员跟踪您集中的自定义信息.

如果您只是将自定义元素放在类别中，那么您最终会在多个类别中进行自定义，并且类别名称与其他第三方库发生冲突的可能性（大部分是远程的）。

# jquery - 计算容器中溢出的元素

> ID：14917145
> 
> 赞同：1
> 
> 时间：2013-02-17T01:35:26.123
> 
> 标签：jquery

假设我有以下标记（下面提供了 jsfiddle）

```
 <div class="masterContainer"> 
        <div class="filterContainerStrip"> 
            <div class="filterButton">Filter 001</div>
            <div class="filterButton">Filter 002</div>
             ...
        </div>
        <div class="hiddenFilterCount"> ... 4 filters hidden </div>
 </div> 
```

其中可能有任何可变数量的`filterButton`s ，`filterContainerStrip`但溢出被下拉并且通过容器上的设置、和`filterButtons`不再可见。`max-width``height``overflow-y: hidden`

我想知道`filterButtons`当前隐藏了多少，以便将其显示给用户。

这是小提琴 [jsfiddle](http://jsfiddle.net/FbXep/2/)

**更新的小提琴**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:10:23.497

如果顶部位置（相对于父级）+ 高度高于父级的高度，或者左侧位置 + 宽度高于父级的宽度，则假定元素不可见：

```
$(window).on('resize', function(){
    var hidden = $('.filterButton').filter(function(){  
      return (this.offsetTop + this.offsetHeight > this.parentNode.clientHeight)
          || (this.offsetLeft + this.offsetWidth > this.parentNode.clientWidth);
    });    

   $('.hiddenFilterCount').text('... ' + hidden.length + ' filters hidden');    
}); 
```

[演示](http://jsfiddle.net/nvgU5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T01:58:55.080

这应该有效：

```
var $cont= $('.filterContainerStrip'), contH=$cont.height();

var hiddenEls= $cont.children().filter(function(){
    return $(this).position().top >= contH;
}).length;

$('.hiddenFilterCount').text( hiddenEls+' filters hidden'); 
```

演示：http: [//jsfiddle.net/FbXep/3/](http://jsfiddle.net/FbXep/3/)

# python - 在 Tkinter GUI 中排列小部件

> ID：14917153
> 
> 赞同：0
> 
> 时间：2013-02-17T01:37:21.637
> 
> 标签：python, graphics, tkinter

我一直在尝试为我正在制作的定义测试程序创建一个小型 GUI。我的 GUI 需要如下所示：

```
Word: # label, then entry widget
Definition: # label, entry widget
Part of Speech: # label, then entry widget
Go Quit # each are buttons 
```

这是我到目前为止所拥有的：

```
from Tkinter import *

class GetWord:
    def __init__(self, master):
        self.frame = Frame(master)
        self.frame.pack()
        self.wordL = Label(self.frame, text = 'Word: ')
        self.wordL.pack(side = 'left')
        self.wordE = Entry(self.frame)
        self.wordE.pack(side = 'right', after=self.wordL)
        self.defL = Label(self.frame, text = 'Definitions: ')
        self.defL.pack(side = 'left', after=self.wordE)
        self.defE = Entry(self.frame)
        self.defE.pack(side = 'right', after=self.defL)
        self.posL = Label(self.frame, text = 'Part of Speech: ')
        self.posL.pack(side = 'left', after=self.defE)
        self.posE = Entry(self.frame)
        self.posE.pack(side = 'right', after=self.posL)
        self.buttonE = Button(self.frame, text = 'Go', command = self.getInfo)
        self.buttonE.pack(side='bottom', after=self.posE)
        self.quitB = Button(self.frame, text = 'Quit', fg = 'red', command = self.frame.quit)
        self.quitB.pack(side='bottom', after=self.buttonE)
    def getInfo(self):
        print self.wordE.get(), self.defE.get(), self.posE.get()

root = Tk()
f = GetWord(root)
root.mainloop() 
```

但是，他们不排队。如何将它们分别关联为“行”（一个标签，每个“行”一个条目，最后一个“行”与两个按钮）/

另外，我不确定这部分是如何工作的：

```
root = Tk()
f = GetWord(root)
root.mainloop() 
```

`root`不直接引用`GetWord`类，所以我不知道它是如何工作的。如果有人可以向我解释这一点，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:10:20.070

为此，您必须替换`pack`为`grid`。使用时`grid`，必须先命名小部件（例如）`f = Label(#info)`。然后，您设置`grid`，这与 pack 类似，但允许更多控制。`f.grid(row =1, column = 1, sticky = W)`. 要了解更多关于`grid`，请看这里：[http ://effbot.org/tkinterbook/grid.htm](http://effbot.org/tkinterbook/grid.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:16:47.177

至于第二部分，`root`确实访问`GetWord`类。`root = Tk()`将 root 设置为 Tkinter 窗口。通过说`f = GetWord(root)`，您将主窗口设置为`root`，这意味着所做的任何事情`f`都在具有名称的窗口中`root`。然后，`GetWord`做它的`__init__`方法。`root.mainloop()`告诉窗口运行并等待主窗口中所需的任何更改（如识别按钮按下或其他事件）。没有这个，窗口将不会做任何事情。

# c# - 通过变量全局访问控件

> ID：14917156
> 
> 赞同：0
> 
> 时间：2013-02-17T01:37:54.587
> 
> 标签：c#

我有两种形式，都有一个文本框，当输入一个字符串时，富文本框会显示它。我希望能够创建一个类或一些引用，在其中我可以定义一个变量'text'并将其设置为等于输入'textBox1.Text'。当用户在文本框中输入任何内容时，我想将其存储为变量，并将其显示在另一个屏幕上。如果我能够做到这一点，你能告诉我，它真的很令人沮丧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:44:45.517

听起来像[在 C# 中的两个实例化 WinForms 之间传递数据](https://stackoverflow.com/questions/14788077/passing-data-between-two-instantiated-winforms-in-c-sharp/14788132#14788132)

但在你的情况下，只需创建一个`static class`让说

```
public class static Setter
{
   //Properties
   public static string set1{ get; set; }
   public static string set2 { get; set; }
} 
```

然后你可以使用喜欢

```
string test = "test";
Setter.set1 = test; 
```

# c# - 字典中的迭代

> ID：14917165
> 
> 赞同：0
> 
> 时间：2013-02-17T01:40:07.883
> 
> 标签：c#, collections, dictionary, hashtable, enumeration

我有一本字典，我必须检查一个条件，直到字典的最后一个元素。我使用了方法 movenext，但它抛出异常。我想做的是当数组 B 中的元素出现时。将每个元素与 A 中的元素进行比较，直到最后一个元素大于B。然后删除满足条件的键值对。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections;
using System.Diagnostics;

namespace WellPuzzle
{

    class Solution
    {
        public void falling_disks(int[] A, int[] B)
        {

           Dictionary<int, int> d1 = new Dictionary<int, int>();

            List<KeyValuePair<int, bool>> list = new List<KeyValuePair<int, bool>>();

            var enum1 = d1.GetEnumerator();
            int count = 0;
            for (int i = 0; i <= A.Length - 1; i++)
            {
                //h1.Add(count++,A[i]);
                d1.Add(count++, A[i]);
            }

            foreach (int ele in B)
            {

                foreach (KeyValuePair<int, int> item in d1)
                {
                    var pair = item.Value;

                    if (ele <=pair && (enum1.MoveNext()!=null))
                    {
                        continue;
                    }
                    else if (ele <= pair && (enum1.MoveNext() == null))
                    {

                        list.Add(new KeyValuePair<int, bool>(pair, true));
                        d1.Remove(pair);
                    }
                    else
                    {
                        //add key of current pair as filled in second hashtable
                        //remove element from first hashtable
                        //iterate till last
                        list.Add(new KeyValuePair<int, bool>(pair, true));
                        d1.Remove(pair);
                    }
}
}
}
}

    class Program
    {
        static void Main(string[] args)
        {
            int[] A = new int[] { 5, 6, 4, 3, 6, 2, 3 };
            int[] B = new int[] { 2 };
            Solution s1 = new Solution();
            s1.falling_disks(A, B);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:47:01.290

迭代枚举时不能修改它。如中，

```
foreach(var item in someList)
{
   if (someCondition)
      someList.remove(item); // At run time you will get an exception saying that the collection was modified
} 
```

在这些情况下，您通常存储您需要删除的东西的 id，然后通过迭代新集合来删除它们，

```
var itemsToRemove = new List<int>();
foreach(var item in someList)
{
   if (someCondition)
      itemsToRemove.Add(item.Id);
}

foreach(var id in itemsToRemove)
{
   var item = someList.First(l => l.Id = id)
   someList.Remove(item);
} 
```

# c - 使用 C 自动化命令行实用程序的选项有哪些？

> ID：14917168
> 
> 赞同：3
> 
> 时间：2013-02-17T01:40:53.530
> 
> 标签：c, linux

是否有任何开放源代码库或标准函数允许 C 程序与其他命令行程序交互（例如可能请求用户输入）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T01:45:00.197

`expect`是一个流行的库，用于以编程方式与交互式程序（例如`ssh`）进行交互。它有一个被称为 C 的端口，它[`libexpect`](http://docs.activestate.com/activetcl/8.4/expect/libexpect.3.html)可以做你想做的事。`expect`模拟终端，因此对于不会与简单管道通信的应用程序特别有用。

# c++ - 在 shared_ptr 容器中查找元素？

> ID：14917169
> 
> 赞同：5
> 
> 时间：2013-02-17T01:41:01.547
> 
> 标签：c++, pointers, containers

我在`shared_ptr`.

这是我最终得到的结果：

```
std::vector<std::shared_ptr<Block>> blocks;

bool contains(Block* block) {
  for (auto i = blocks.begin(); i != blocks.end(); ++i) {
    if ((*i).get() == block) {
      return true;
    }
  }
  return false;
} 
```

`std::find`但是，我什至没有设法做到这一点`std::find_if`。有没有更符合 c++ 的方法来实现这一点？

**编辑**：这是我得到答案后的代码：

```
bool contains(Block* block) {
  auto found = std::find_if(blocks.begin(), blocks.end(), [block](std::shared_ptr<Block> const& i){
    return i.get() == block;
  });
  return found != blocks.end();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T01:45:57.053

尝试：

```
std::find_if(blocks.begin(), blocks.end(), 
  [block](std::shared_ptr<Block> const& i){ return i.get() == block; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-10T18:40:41.660

更简单：

```
bool contains(Block* block) {
  return std::any_of(blocks.cbegin(), blocks.cend(),
                     [block](std::shared_ptr<Block> const& i) { return i.get() == block; });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T03:04:03.447

根据其他人的回答和评论，以下是[ideone](http://ideone.com/Ve9EqA)的完整工作示例：

```
#include <vector>
#include <memory>
#include <algorithm>
#include <iostream>

using namespace std;

struct Block
{
    bool in_container(const vector<shared_ptr<Block>>& blocks)
    {
        auto end = blocks.end();
        return end != find_if(blocks.begin(), end,
                              [this](shared_ptr<Block> const& i)
                                  { return i.get() == this; });
    }
};

int main()
{
    auto block1 = make_shared<Block>();
    auto block2 = make_shared<Block>();

    vector<shared_ptr<Block>> blocks;
    blocks.push_back(block1);

    block1->in_container(blocks) ?
        cout << "block1 is in the container\n" :
        cout << "block1 is not in the container\n";

    block2->in_container(blocks) ?
        cout << "block2 is in the container\n" :
        cout << "block2 is not in the container\n";

    return 0;
} 
```

这是输出：

```
block1 is in the container
block2 is not in the container 
```

# qt - 为什么qt webkit无法加载本地图片？

> ID：14917173
> 
> 赞同：1
> 
> 时间：2013-02-17T01:42:16.693
> 
> 标签：qt, webkit

我正在将一个 html 文件加载到 QWebView 中：

```
<img src="/home/xxx/.config/xxx/chat_img/test.png" />
<img src="test.png" />
<img src="file://test.png" /> 
```

但是什么都没有显示。如果我把图片src换成网上图片（外源），比如 [http://domain.com/file.png](http://domain.com/file.png)那么就显示出来了。所以我想知道的是为什么 QWebView 没有加载我的本地文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:12:03.080

我无法重现您的问题。我尝试以这种方式创建 QWebView：

```
#include <QApplication>
#include <QWebView>
#include <QWebFrame>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QWebView view;
    view.page()->mainFrame()->load(QUrl::fromLocalFile(html_file));
    view.show();
    return app.exec();
} 
```

并且绝对路径或uri（您缺少斜杠）都在工作：

```
<img src="/abs/path/to/image.jpg" />
<img src="file:///abs/path/to/image.jpg" /> 
```

# c++ - 循环读取 dat 文件不正确

> ID：14917181
> 
> 赞同：0
> 
> 时间：2013-02-17T01:43:35.513
> 
> 标签：c++

再会，

我有一个循环读取 dat 文件，但循环读取数据不正确。我的 dat 文件包含以下数据

```
46780976 3750.40
W 250.00
D 1200.00
W 75.00
W 375.00
D 1200.00
I 5.50
W 400.00
W 600.00
D 450.50
W 35.65 
```

输出应该是

```
Account number: 46780976
Opening balance: R3750.40

Transaction    Amount    Balance Bank costs
Withdrawal     250.00    4000.00
Deposit       1200.00Ct  2800.00
Withdrawal        75.00  2725.00
Withdrawal      1375.00   1350.00
Deposit        1200.00Ct 1550.00
Interest         5.50    1555.50
Withdrawal      400.00   1155.50
Withdrawal      600.00   555.50     25.00
Deposit         450.00Ct 1005.50
Withdrawal       35.65    969.85
Banking costs    25.00    969.60

Closing balance: R969.60 
```

我得到以下

```
Account number : 46780976

Opening Balance : R 3750.4

Transaction        Amount          Balance         Bank Costs

Withdrawal            250            3500.4
Deposit            0 Ct            3500.4
Interest              0            3500.4

Withdrawal            250            3225.4
Deposit            1200 Ct            4425.4
Interest              0            4425.4

Withdrawal            75            4325.4
Deposit            1200 Ct            5525.4
Interest              0            5525.4

Withdrawal            375            5125.4
Deposit            1200 Ct            6325.4
Interest              0            6325.4

Withdrawal            375            5925.4
Deposit            1200 Ct            7125.4
Interest              0            7125.4

Withdrawal            375            6725.4
Deposit            1200 Ct            7925.4
Interest              5.5            7930.9

Withdrawal            400            7505.9
Deposit            1200 Ct            8705.9
Interest              5.5            8711.4

Withdrawal            600            8086.4
Deposit            1200 Ct            9286.4
Interest              5.5            9291.9

Withdrawal            600            8666.9
Deposit            450.5 Ct            9117.4
Interest              5.5            9122.9

Withdrawal            35.65            9062.25
Deposit            450.5 Ct            9512.75
Interest              5.5            9518.25

Withdrawal            35.65            9457.6
Deposit            450.5 Ct            9908.1
Interest              5.5            9913.6
Bank Costs           25            9888.6            25

Closing Balance : R 9888.6
Press any key to continue . . . 
```

我的代码：

```
do { 
   in_stream >> letter;

if (letter == 'W')

    in_stream >> withdrawal;
    openBalance -= withdrawal;
    cout << "\nWithdrawal" << "            "<< withdrawal << "            " << openBalance << endl;
    out_stream << withdrawal;

if (letter == 'D')

    in_stream >> deposit;
    openBalance += deposit;
    cout << "Deposit" <<"            "<< deposit <<" Ct" <<"            " << openBalance << endl;
    out_stream << deposit;

if (letter == 'I')

    in_stream >> interest;
    openBalance += interest;
    cout << "Interest" <<"              "<< interest <<"            " << openBalance << endl;
    out_stream << interest;

 if (openBalance < 1000)
     cout << "Bank Costs" <<"           "<< bankCost <<"            " << openBalance <<"            " << bankCost << endl;
    openBalance -= bankCost;
    out_stream << bankCost;

} while(!in_stream.eof()); 
```

请指出我正确的方向

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:55:41.027

你的第一个问题是你的 if 块。在 C++ 中，'if' 语句会影响紧随其后的事物 - 代码行或 block.so...

```
if( Xxx )
    thisHappensOnlyIfXxxIsTrue
thisAlwaysHappens

if( Xxx )
    thisHappensOnlyIfXxxIsTrue
    thisAlwaysHappens  // even though it's indented

if( Xxx ) {
    thisHappensOnlyIfXxxIsTrue
    thisDependsOnXxxToo
}
thisAlwaysHappens 
```

下一个问题是每次循环重新启动时都不会清除变量。你需要插入一个

```
do {
   deposit = 0;
   interest = 0;
   withdrawal = 0; 
```

在循环的开头（或结尾），以确保您没有重新使用上一次循环迭代中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:53:31.323

因为第一行是：

```
46780976 3750.40 
```

这条线会通过，但没有预期的效果：

```
in_stream >> letter; 
```

假设当然`letter`是类型`char`

**编辑**

```
// You need to read in the initial values here

do { 
   in_stream >> letter;

if (letter == 'W')
{
    in_stream >> withdrawal;
    openBalance -= withdrawal;
    cout << "\nWithdrawal" << "            "<< withdrawal << "            " << openBalance << endl;
    out_stream << withdrawal;
}

if (letter == 'D')
{
    in_stream >> deposit;
    openBalance += deposit;
    cout << "Deposit" <<"            "<< deposit <<" Ct" <<"            " << openBalance << endl;
    out_stream << deposit;
}

if (letter == 'I')
{

    in_stream >> interest;
    openBalance += interest;
    cout << "Interest" <<"              "<< interest <<"            " << openBalance << endl;
    out_stream << interest;
 }

 if (openBalance < 1000)
 {
     cout << "Bank Costs" <<"           "<< bankCost <<"            " << openBalance <<"            " << bankCost << endl;
    openBalance -= bankCost;
    out_stream << bankCost;
  }

} while(!in_stream.eof()); 
```

# c - C 这种无分支的黑客攻击实际上更快吗？

> ID：14917182
> 
> 赞同：7
> 
> 时间：2013-02-17T01:44:06.167
> 
> 标签：c

我试图在基于 Cortex-M 的[微控制器](http://www.vexrobotics.com/276-2194.html)上将值限制在 -127 和 127 之间。

[我有两个相互竞争的函数，一个使用条件，另一个使用我在这里](http://bob.allegronetwork.com/prog/tricks.html)找到的无分支 hack 。

```
// Using conditional statements
int clamp(int val) { return ((val > 127) ? 127 : (val < -127) ? -127 : val); }

// Using branchless hacks
int clamp(int val) {
    val -= -127;
    val &= (~val) >> 31;
    val += -127;
    val -= 127;
    val &= val >> 31;
    val += 127;

    return val;
} 
```

现在我知道在某些情况下，其中一种方法可能比另一种更快，反之亦然，但总的来说，使用无分支技术是否值得，因为我使用哪种方法对我来说并不重要，它们都会在我的情况下工作得很好吗？

关于微控制器的一些背景知识，它是一个基于 ARM 的微控制器，运行速度为 90 MIPS，具有 3 级管道、获取、解码和执行，它似乎有某种分支预测器，但我无法挖掘细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:59:11.663

ARM 代码（带有 GCC 4.6.3 的`-O3`）：

```
clamp1:
    mvn r3, #126
    cmp r0, r3
    movlt   r0, r3
    cmp r0, #127
    movge   r0, #127
    bx  lr

clamp2:
    add r0, r0, #127
    mvn r3, r0
    and r0, r0, r3, asr #31
    sub r0, r0, #254
    and r0, r0, r0, asr #31
    add r0, r0, #127
    bx  lr 
```

拇指码：

```
clamp1:
    mvn r3, #126
    cmp r0, r3
    it  lt
    movlt   r0, r3
    cmp r0, #127
    it  ge
    movge   r0, #127
    bx  lr

clamp2:
    adds    r0, r0, #127
    mvns    r3, r0
    and r0, r0, r3, asr #31
    subs    r0, r0, #254
    and r0, r0, r0, asr #31
    adds    r0, r0, #127
    bx  lr 
```

由于 ARM 的条件执行设计，两者都是无分支的。我敢打赌，它们在性能上基本上是可比的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T01:59:58.117

需要意识到的是，在分支指令方面，ARM 和 x86 架构非常不同。跳转会清除管道，这可能会导致多个时钟周期的加速，只是为了在吞吐量方面“回到原来的位置”。

[引用我前几天下载的pdf（ http://simplemachines.it/doc/arm_inst.pdf](http://simplemachines.it/doc/arm_inst.pdf)的pg14 ），

**条件执行**

*   大多数指令集只允许有条件地执行分支。
*   然而，通过重用条件评估硬件，ARM 有效地增加了指令数量。
*   所有指令都包含一个条件字段，用于确定 CPU 是否会执行它们。
*   未执行的指令占用 1 个周期。– 仍然必须完成循环，以允许获取和解码以下指令。
*   这消除了对许多分支的需要，这些分支会使管道停止（重新填充 3 个周期）。
*   允许非常密集的内联代码，没有分支。
*   不执行多条条件指令的时间损失通常小于分支或子程序调用的开销，否则将需要这些开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:49:23.147

不，C 语言没有速度。这是由 C 实现引入的概念。完美优化的编译器会将这两者转换为相同的机器代码。

C 编译器更有可能优化符合通用样式且定义明确的代码。第二个功能没有很好的定义。

这些加法和减法可能会导致整数溢出。整数溢出是未定义的行为，因此它们可能会导致您的程序发生故障。乐观地说，您的硬件可能会实现包装或饱和。稍微不乐观的是，您的操作系统或编译器可能会为整数溢出实现信号或陷阱表示。检测整数溢出可能会影响修改变量的感知性能。最坏的情况是你的程序失去了它的完整性。

& 和 >> 运算符具有符号类型的实现定义方面。它们可能导致负零，这是陷阱表示的一个示例。使用陷阱表示是未定义的行为，因此您的程序可能会失去其完整性。

也许您的操作系统或编译器实现了 int 对象的奇偶校验位检查。在这种情况下，试着想象每次变量更改时重新计算奇偶校验位，并在每次读取变量时验证奇偶校验位。如果奇偶校验失败，您的程序可能会失去完整性。

使用第一个功能。至少定义得很好。如果您的程序运行缓慢，优化此代码可能不会显着加快您的程序；使用分析器找到更重要的优化，使用更优化的操作系统或编译器或购买更快的硬件。

# c++ - 根据 cmake 目标启用宏

> ID：14917188
> 
> 赞同：1
> 
> 时间：2013-02-17T01:44:54.627
> 
> 标签：c++, macros, cmake

仅当特定的 cmake 目标使用相应的源文件时，我才尝试启用 C 宏。假设我有以下设置：

```
tests/test.cpp
src/code.cpp
include/code.hpp
CMakeList.txt 
```

代码.hpp

```
class MyClass
{
public:
    void normal_stuff();
#ifdef TEST
    int debug;
    void _dangerous_function()
    {
         debug++;
    }
#endif
} 
```

代码.cpp

```
#include "code.hpp"

MyClass::normal_stuff()
{
    // boring code
} 
```

测试.cpp

```
#include "code.hpp"

void some_test()
{
    MyClass foo;
    foo._dangerous_function();
} 
```

CMakeList.txt

```
project(foo)
include_directories(include)
file(GLOB_RECURSE foo_source src/*.cpp)
file(GLOB_RECURSE test_source test/*.cpp)
add_executeable(foo ${foo_source})
add_executeable(test ${test_source} ${foo_source}) 
```

我只想在为测试目标构建*code.cpp*而不是为 foo 目标构建时设置 TEST 。当然，在我包含*code.hpp之前，我可以在**test.cpp*中写“#define TEST” ，但是*code.cpp*对 MyClass 的看法与*test.cpp*不同。

 ***有谁知道我该怎么做？我知道，我*不*应该这样做，但我想知道，如果我能让它运行起来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T02:02:49.907

您可以设置一个特定于目标的属性来添加这样的定义：

```
set_target_properties(test PROPERTIES COMPILE_DEFINITIONS "TEST") 
```

[在这里](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aset_target_properties)和[这里](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#prop_tgt%3aCOMPILE_DEFINITIONS)阅读更多***

# c++ - 常量迭代器的向量构造函数内存分配，段错误

> ID：14917192
> 
> 赞同：0
> 
> 时间：2013-02-17T01:45:32.680
> 
> 标签：c++, vector, constructor, implementation, fault

我在弄清楚如何为这个构造函数分配空间时遇到了麻烦。它应该在开始和结束之间用另一个 Vector 的元素构造一个 Vector。

```
template <class T> Vector<T>::Vector(const_iterator start, const_iterator finish)
{
    array = new T[2 * capacity()];

    for( ; start != finish; start++ ){
        push_back(*start);
    }
} 
```

我一直在尝试调试这个，但无法弄清楚。push_back 看起来像这样：

```
template <class T> void Vector<T>::push_back(const T & val)
{
    if (size() == capacity()) {
        reserve (2 * capacity() + 1);
    }

    array[ theSize++ ] = val;
} 
```

这叫储备..

```
template <class T> void Vector<T>::reserve(int newCapacity)
{
    if (newCapacity < size()) {
        return;
    }

    T * array_copy = array;

    array = new T [newCapacity];
    for (int i = 0; i < size(); i++) {
        array[i] = array_copy[i];
    }

    theCapacity = newCapacity;

    delete [] array_copy;
} 
```

因此，缩小问题范围：

为什么会发生分段错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:48:36.517

您没有在构造函数中初始化`size()`和`capacity()`。被`push_back()`调用的构造函数可能会受到随机初始化值的影响。

# hadoop - Hadoop：地图上没有这样的方法

> ID：14917193
> 
> 赞同：0
> 
> 时间：2013-02-17T01:45:51.337
> 
> 标签：hadoop

我正在尝试创建一个与其他几个作业链接的 Hadoop 作业，使其看起来像 Map1 -> Reduce -> Map2 -> Reduce。我所有的类都在同一个文件中实现。我在第一份工作中遇到以下错误。

```
java.lang.RuntimeException: Error in configuring object
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:354)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:307)
at org.apache.hadoop.mapred.Child.main(Child.java:170)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
... 5 more
Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: work.graph.WorkGraph$Map1.<init>()
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:115)
at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
... 10 more
Caused by: java.lang.NoSuchMethodException: work.graph.WorkGraph$Map1.<init>()
at java.lang.Class.getConstructor0(Class.java:2706)
at java.lang.Class.getDeclaredConstructor(Class.java:1985)
at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:109) 
```

我查看了[Hadoop: No such Method Exception](https://stackoverflow.com/questions/11022812/hadoop-no-such-method-exception) already，但这并没有解决我的问题。有谁知道这个错误出现的其他原因？

编辑：我的代码如下所示：

```
public class WorkGraph {
    public static Hashmap dictionary = new Hashmap(); 
    public static class Map1 extends MapReduceBase implements Mapper {
         public void map {}
    }
    public static class Map2 extends MapReduceBase implements Mapper {
    }

public static void main(String[] args) throws Exception {
    JobConf job1 = new JobConf(WorkGraph.class);
    job1.setJobName("WorkGraph1");

    job1.setInputFormat(TextInputFormat.class);
    job1.setOutputFormat(TextOutputFormat.class);

    job1.setOutputKeyClass(Text.class);
    job1.setOutputValueClass(Text.class);

    job1.setMapperClass(Map1.class);

    FileInputFormat.addInputPath(job1, new Path(args[0]));
    FileOutputFormat.setOutputPath(job1, new Path(args[1] + "/map1"));

    JobClient.runJob(job1);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:13:25.213

我没有看到您的源代码的猜测是您将 Map1 类定义为 WorkGraph 的内部类，而不是静态类。Hadoop 需要能够使用反射创建 map/reduce 类的实例，并且需要类的默认构造函数。

如果您的代码类似于以下块，那么您的 Map1 类实际上是父 WorkGraph 类的内部子类，并且需要对父类的引用作为构造时的参数传入（编译对您隐藏了所有这些） ：

```
public class WorkGraph {
  public class Map1 extends Mapper {

  }
} 
```

这实际上应该是：

```
public class WorkGraph {
  public static class Map1 extends Mapper {

  }
} 
```

您可能会发现在 Map1 类文件上运行 javap 实用程序很有用，因为它应该向您显示编译器生成的内容。

# iis - web.config 中的 iis 重写规则需要帮助

> ID：14917194
> 
> 赞同：0
> 
> 时间：2013-02-17T01:45:55.163
> 
> 标签：iis, asp.net-mvc-4, url-rewriting, iis-7.5

我正在使用在 IIS 7.5 中运行的 mvc4 应用程序，但我在设置的重写规则方面遇到了问题。以下是我在 web.config 中的部分。

```
 <rewrite>
        <rules>
            <rule name="RewriteImage">
                <match url="/myassets/([_0-9a-z-]+)/images/category/([_0-9]+)-([_0-9a-z-]+)-([0-9]+)" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                </conditions>
                <action type="Rewrite" url="/myassets/{R:1}/images/category/cat_{R:2}_{R:4}_{R:3}.jpg" />
            </rule>
        </rules>
    </rewrite> 
```

我想在上面的 url 中将图像重写到另一个路径。

我提供以下 url`https://localhost/myassets/en-uk/images/category/123456-5x10-1_my+image+description.jpg`并希望它重写，`https://localhost/myassets/en-uk/images/category/cat_123456_1_5x10.jpg`但事实并非如此。

当我在 IIS 中对其进行测试时，一切正常，但通过浏览器，规则永远不会生效。我正在寻找关于我哪里出错的建议，因为这变得非常令人沮丧！

这是我唯一的规则，我尝试了一个简单的重定向规则，它将大写 url 重定向到小写 url，这很好。

我在 web.config 中注意到的一件事是，第一个 rewrite 标记下面有一个蓝色波浪线，表示它是 system.webserver 的未识别部分。

应用程序以集成模式运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-31T17:44:14.473

问题是您的正则表达式无效。来自[官方文档](https://docs.microsoft.com/en-us/iis/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)的说明：

> 例如，如果对该 URL 发出请求： [http://www.example.com/content/default.aspx?tabid=2&subtabid=3](http://www.example.com/content/default.aspx?tabid=2&subtabid=3)，并且在站点级别定义了重写规则，则： 规则模式获取URL 字符串`content/default.aspx`作为输入。

这意味着，你不应该用斜杠开始你的正则表达式。

工作示例是：

```
<rule name="RewriteImage">
    <match url="myassets/([_0-9a-z-]+)/images/category/([_0-9]+)-([_0-9a-z-]+)-([0-9]+)" />
    <action type="Rewrite" url="/myassets/{R:1}/images/category/cat_{R:2}_{R:4}_{R:3}.jpg" />
</rule> 
```

# svn - 使用 Tortoise 在 Subversion 中移动文件夹

> ID：14917197
> 
> 赞同：0
> 
> 时间：2013-02-17T01:46:25.783
> 
> 标签：svn, tortoisesvn, rename

我一直在分支文件夹中创建树干的里程碑。但是它们越来越多，而且都是相关的，所以我决定创建一个 /branches/milestones/1.0.0/ 并将所有 1.0.0 版本的里程碑放在那里。

如果是重命名，则 Tortoise 具有重命名功能。但是如何移动文件夹中的所有文件呢？如何让 Subversion 理解它并跟踪它而不是认为它是一个删除添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:53:16.370

在 Subversion 中，重命名和移动是同义词。两者都实现为带有历史记录的副本，然后立即删除。

# c# - 查找字符串是否包含日期和时间

> ID：14917203
> 
> 赞同：11
> 
> 时间：2013-02-17T01:47:17.720
> 
> 标签：c#

我正在做一个项目，我正在读取一个文件，该文件可能有两种不同的格式，一种包括日期和时间，另一种不包括。

当我在第一行读取时，我需要检查字符串是否包含日期和时间并读取文件并基于检查以某种方式读取文件。

我猜这将是某种正则表达式，但不知道从哪里开始，也找不到任何相关的东西。

感谢您的任何帮助，您可以提供。

**更新** 我认为我对我的要求不是很清楚。当我逐行读取日志文件时，该行可能如下所示：

```
Col1   Col2  Col3  Col4  Col5 
```

有时这条线可能会作为

```
Col1  17-02-2013 02:05:00 Col2  Col3  Col4  Col5 
```

当我阅读该行时，我需要检查字符串中是否包含日期和时间字符串。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T05:55:25.553

如果已经定义了日期的格式，可以使用Regex来解决。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace RegTest
{
    class Program
    {
        static void Main(string[] args)
        {
            string testDate = "3214312402-17-2013143214214";
            Regex rgx = new Regex(@"\d{2}-\d{2}-\d{4}");
            Match mat = rgx.Match(testDate);
            Console.WriteLine(mat.ToString());
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T01:49:10.983

**更新 2**：发现使用 DateTime.TryParseExact 是使用正则表达式的更好方法

```
DateTime myDate;
if (DateTime.TryParseExact(inputString, "dd-MM-yyyy hh:mm:ss", 
    CultureInfo.InvariantCulture, DateTimeStyles.None, out myDate))
{
    //String has Date and Time
}
else
{
    //String has only Date Portion    
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-11T06:00:24.680

```
 string s = " Subject: Current account balances for 21st December 2017 and 2nd January 2019 mnmnm ";//here is u r sample string

   s = s.ToLower();
   string newStrstr = Regex.Replace(s, " {2,}", " ");//remove more than whitespace
   string newst = Regex.Replace(newStrstr, @"([\s+][-/./_///://|/$/\s+]|[-/./_///://|/$/\s+][\s+])", "/");// remove unwanted whitespace eg 21 -dec- 2017 to 21-07-2017
   newStrstr = newst.Trim();
   Regex rx = new Regex(@"(st|nd|th|rd)");//21st-01-2017 to 21-01-2017
   string sp = rx.Replace(newStrstr, "");
   rx = new Regex(@"(([0-2][0-9]|[3][0-1]|[0-9])[-/./_///://|/$/\s+]([0][0-9]|[0-9]|[1][0-2]|jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec|january|february|march|april|may|june|july|augu|september|october|november|december)[-/./_///:/|/$/\s+][0-9]{2,4})");//a pattern for regex to check date format. For August we check Augu since we replaced the st earlier
   MatchCollection mc = rx.Matches(sp);//look for strings that satisfy the above pattern regex

   List<DateTime> dates=new List<DateTime>(); //Create a list to store the detected dates

   foreach(Match m in mc)
   {
        string s2=Regex.Replace(m.ToString(), "augu", "august");
        dates.Add(DateTime.Parse(s2);
   } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-09-30T16:50:05.477

使用此方法检查字符串是否为日期：

```
private bool CheckDate(String date)
{
    try
    {
        DateTime dt = DateTime.Parse(date);
        return true;
    }
    catch
    {
        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-09-11T16:07:31.970

> 这对我们有用：

如果字符串值是有效的日期时间值，那么它不会给出任何异常：

```
try
{
    Convert.ToDateTime(string_value).ToString("MM/dd/yyyy");
} 
```

如果字符串值是无效的日期时间值，则会给出异常：

```
catch (Exception)
{
} 
```

# android - AsyncTask 在完成之前不等待对象被创建

> ID：14917204
> 
> 赞同：1
> 
> 时间：2013-02-17T01:47:30.310
> 
> 标签：android, android-asynctask

我有一个对象，`MyObject`它自己填充了一些随机数。它不需要很长时间，似乎是瞬间的。但是，这些值在 UI 上使用，有时在 UI 构建时它还没有完全准备好。

我创建了一个`AsyncTask`用于实例化对象的对象，它位于本文的末尾。

但是，在以这种方式调用`doInBackground(...)`之前，不会完全实例化对象。`onPostExecute(...)`

```
protected MyObject doInBackground(Void... unused) {
    // this may take a few moments and cause a null reference
    // so make a task
    MyObject obj = new MyObject();
    return obj;
} 
```

我也尝试使用标志来表示完成，但它似乎也不能保证。

```
MyObject obj = new MyObject();
while (obj.isComplete() == false) {
    // do nothing. Wait for completion
}

return obj; 
```

里面`MyObject`很简单

```
public MyObject() {
    createValues(); // entire object created with this
    this.mComplete = true;
} 
```

它失败得更少，但仍然失败。如果这有助于竞争条件，则将其用于其计算的一部分`createValues()`。`ArrayList`

下面是一个`MyFragment`使用 中的任务的示例`methodCall()`。

**问题**我如何简单地等到`MyObject`完全实例化结束？

**堆栈跟踪**

```
java.lang.NullPointerException
    at MyFragment.setupFragment(MyFragment.java:95)
    at MyFragment.onTaskComplete(MyFragment.java:143)
    at MyTask.onPostExecute(MyTask.java:37)
    at MyTask.onPostExecute(MyTask.java:1)
    at android.os.AsyncTask.finish(AsyncTask.java:631) 
```

**分段**

```
public class MyFragment extends Fragment implements MyTask.OnTaskComplete {
    private MyObject mMyObject;

    // ...

    public void methodCall() {
        // generate puzzle and set it up in the background
        MyTask task = new MyTask(this);
        task.execute();
    }

    function void setupFragment() {
            // null pointer exception here
            // mMyObject is not initiated yet and only some times
            // values is an array of integers
        int example = this.mMyObject.values[0];
    }

    @Override
    public void onTaskComplete(MyObject obj) {
        // returned from MyTask
        this.mMyObject = obj;
        this.setupFragment(); 
    }
} 
```

**异步任务**

```
public class MyObjectTask extends AsyncTask<Void, Void, MyObject> {
    public static interface OnTaskComplete {
        public abstract void onTaskComplete(MyObject obj);
    }
    static final String TAG = "MyObjectTask";

    private OnTaskComplete mListener;

    public MyObjectTask(OnTaskComplete listener) {
        this.mListener = listener;
    }

    @Override
    protected MyObject doInBackground(Void... unused) {
        // this may take a few moments and cause a null reference
        // so make a task
        return new MyObject();
    }

    @Override
    protected void onPostExecute(MyObject obj) {
        this.mListener.onTaskComplete(obj);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:05:51.217

如果您在创建对象时没有在对象内创建任何新线程，那么您正在做的事情应该完全没问题。

您添加了一个回调，您需要在执行任务之前先设置它，然后在 AsyncTask 退出时触发它（doInBackground 完成并调用您的后执行）。

因此，从我在您的代码中看到的情况来看，构造函数不可能没有完成，并且您的对象会在回调中返回。

因此，请检查是否有可能在 createValues 方法中的对象中引发异常。

您是否有发生的异常的堆栈跟踪？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:48:11.607

您可以在 AsyncTask 的 onPreExecute 方法上创建对象。因此，当调用 doInBackground 时，您的对象将已经创建。在这一点上，您可以**调用该方法来创建 values**。

```
public class MyObjectTask extends AsyncTask<Void, Void, MyObject> {
    public static interface OnTaskComplete {
        public abstract void onTaskComplete(MyObject obj);
    }

    static final String TAG = "MyObjectTask";

    private OnTaskComplete mListener;
    private MyObject myObject;

    public MyObjectTask(OnTaskComplete listener) {
        this.mListener = listener;
    }

    @Override
    protected void onPreExecute() {
        myObject = new MyObject();
    }

    @Override
    protected MyObject doInBackground(Void... unused) {
         // this may take a few moments and cause a null reference
        // so make a task
        myObject.createValues();
       return myObject;
    }

    @Override
    protected void onPostExecute(MyObject obj) {
        this.mListener.onTaskComplete(obj);
    }
} 
```

# mongodb - 用法 od UnmapProperty、UnmapMember、UnmapField

> ID：14917209
> 
> 赞同：1
> 
> 时间：2013-02-17T01:48:21.843
> 
> 标签：mongodb, mongodb-.net-driver

我不清楚这些语句的用法。我举以下例子

```
if (!BsonClassMap.IsClassMapRegistered(typeof(Province)))
{
    BsonClassMap.RegisterClassMap<Province>(cm =>
        {
            cm.AutoMap();
            cm.SetIdMember(
            cm.GetMemberMap(c =>
            c.ProvinceId).SetIdGenerator(UniqueIdGenerator.Instance));
            cm.UnmapProperty(c => c.CountryId);
            cm.UnmapProperty(c => c.EloqueraId);
            cm.UnmapProperty(c => c.UpdateMode);
        });
} 
```

最后 2 个属性没有私有字段，但第一个 (CountryId) 有。我有一种感觉，当使用 UnmapProperty 时，私有字段不会被忽略，我应该更好地使用 UnmapMember ？？？

请有人更深入地解释如何处理这些陈述？或者给我提示在哪里可以找到它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:52:14.630

*UnmapMember*找到与*System.Reflection.MemberInfo*对应的*BsonMemberMap*并删除它的映射。

 *UnmapField和*UnmapProperty**都只*采用字段或属性名称，将其解析为*System.Reflection.MemberInfo*并调用*UnmapMember*

在某种程度上，UnmapField 和 UnmapProperties 是 UnmapMember 的语法糖，它们通过字段或属性字符串名称为您进行反射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:27:21.233

要初始化类映射，您可以：

1.  为您要序列化的每个成员调用 MapMember
2.  或调用 AutoMap 并让它自动找到成员

如果您希望对大多数成员进行序列化，但不是对所有成员进行序列化，有时调用 AutoMap 然后取消映射您**不希望序列化的成员会更容易（而不是为****您**想要序列化的所有成员调用 MapMember ）。*

# html - dontent div min-height=100% 创建空白

> ID：14917211
> 
> 赞同：0
> 
> 时间：2013-02-17T01:48:58.720
> 
> 标签：html, whitespace, css

我花了好几个小时寻找解决方案，但无济于事。

我有一个内容 div，我想至少将其扩展到页面底部，但在没有文本的情况下不要过分。相关代码如下：

```
#top {
 background-image: url('image.png');
 width: 798px;
 position:absolute;
 top:0px;
 margin-left:-399px;
 left:50%;
 display: block;
 height: 132px;
}

#content {
 position:absolute;
 top:132px;
 width: 798px;
 margin-left:-399px;
 left:50%;
 display: block;
 min-height:100%;
}

<body>

<div id="top"></div>
<div id="content">TEXT</div>

</body> 
```

问题在于，如您所见，内容 div 从页面下方 132px 开始，在页眉之后。这转化为 132px 的空白，我可以向下滚动查看。在文本填充它的较长页面上没有空格，但在简短的主页上，这是一个问题。

我尝试将内容 div 设置为底部：0；但它产生了相反的效果，因此 div 不会延伸到屏幕的初始底线以下，从而使文本在长页面上徘徊在 div 之外。

不幸的是，填充不会变成负数，所以我不能用这种方式将 132px 剃掉。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:43:26.807

添加一个容器，将其最大高度设置为 100%。在容器内，为顶部和内容设置单独的最大高度？

**CSS：**

```
#container {
    min-height:100%;
}
#top {
    background-image: url('image.png');
    width: 798px;
    position:absolute;
    top:0px;
    margin-left:-399px;
    left:50%;
    display: block;
    min-height:132px;
}
#content {
    position:absolute;
    top:132px;
    width: 798px;
    margin-left:-399px;
    left:50%;
    display: block;
    min-height:100%;
} 
```

**HTML：**

```
<body>
    <div id="container">
    <div id="top"></div>
    <div id="content"><p>TEXT</p></div>
    </div>
</body> 
```

# zsh - 重命名自定义函数

> ID：14917214
> 
> 赞同：2
> 
> 时间：2013-02-16T21:43:27.120
> 
> 标签：zsh, function

有一个 precmd() 可以做很多事情，比如检查 VCS 信息，当我在慢速安装的网络驱动器上导航时，我想禁用它。

`slow`在更改为慢速驱动器并将其更改回来之前，我想出了以下内容`fast`，我想知道是否有更简单的方法？

```
precmd_slow() {
    not_much
}
precmd_fast() {
    precmd_slow
    somemore1
    somemore2
}

precmd() {
    precmd_fast
}

slow() {
    precmd() {
        precmd_slow
    }
}

fast() {
    precmd() {
        precmd_fast
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:48:11.250

除了`precmd`函数之外，还有一个被调用的数组`precmd`，其中包含要同时调用的函数列表。您可以自己操作它，但`zshcontrib`具有`add-zsh-hook`简化问题的功能。

```
# precmd_slow and precmd_fast defined as before

autoload add-zsh-hook
add-zsh-hook precmd precmd_fast

fast () {
    add-zsh-hook -d precmd precmd_slow
    add-zsh-hook precmd precmd_fast
}

slow () {
    add-zsh-hook -d precmd precmd_fast
    add-zsh-hook precmd precmd_slow
} 
```

# javascript - 根据文本框值更改复选框状态

> ID：14917220
> 
> 赞同：0
> 
> 时间：2013-02-17T01:50:59.373
> 
> 标签：javascript, jquery, input, checkbox, textbox

我的网站中有一个表单，并且我的表单中有一个**只读**文本框。此文本框将从 URL 动态获取其值（A、B、C 或 D）。然后我在这个文本框下面有一些复选框。我想要的是根据该文本框的值更改这些复选框的状态。

例如，如果 textbox1 的值为**A**，则 checkbox1、checkbox3 和 checkbox6 被选中。我尝试了这样的事情，但没有奏效：

```
$("#textbox1").change(function(){
    var txt1=$("#textbox1").val();
        if(txt1=='A'){
        $(":checkbox[name='checkbox1']").prop('checked',true);
            $(":checkbox[name='checkbox3']").prop('checked',true);
        $(":checkbox[name='checkbox6']").prop('checked',true);
        }
        else {
        //nothing
      }
      }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:07:04.220

您需要对文本框使用更改事件，然后评估要检查的复选框。像这样：

```
$(function(){
    $("#myTextbox").on("change",function(){
        var $Textbox = $(this);
        var NewCheckbox;
        switch ($Textbox.val()){
            case "A":
                NewCheckbox = $("#checkboxA");
                break;
            case "B":
                NewCheckbox = $("#checkboxB");
                break;
            case "C":
                NewCheckbox = $("#checkboxC");
                break;
        }
        $("#checkboxA").attr('checked',false);
        $("#checkboxB").attr('checked',false);
        $("#checkboxC").attr('checked',false);

        NewCheckbox.attr('checked',true);
    });
}); 
```

# linux - ls 查找所有以 ./ 开头的目录

> ID：14917223
> 
> 赞同：1
> 
> 时间：2013-02-17T01:51:39.113
> 
> 标签：linux, shell, unix

> 问题：
> 
> 在您的主目录中，执行 ls 操作会显示所有以“.”开头的目录。您不应该看到普通文件，也不应该看到这些目录的内容。例子：
> 
> ~ $ ls ***_* __ *_* _** ../ ./ .ssh/ .ssh2/ .sunw/ .tin/

我跑了

```
ls -R .  -d | grep ./ 
```

它似乎有效。

但是，当我运行时 `ls -R . -d`，我注意到即使使用 -d，这些文件仍在列出。为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T01:54:33.260

我认为您被要求显示所有“点”目录，即

```
ls -ad .*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T02:06:18.510

（最短的）答案是：

```
ls -d .*/ 
```

因为：

*   `.*/`适用于**所有以“。”开头的目录。**
*   `-d`是因为**看不到这些目录的内容**

如果没有`/`最后，您会看到纯文件，这将是错误的答案。

如果没有该`-d`标志，您将看到目录的内容，这将是错误的答案。

不需要其他标志。

# c# - 如何拥有 RavenDB Web UI 的管理员权限

> ID：14917226
> 
> 赞同：2
> 
> 时间：2013-02-17T01:52:20.070
> 
> 标签：c#, ravendb

我正在从稳定版本 2261 运行 Raven.Server.exe。我可以从 localhost:8080 访问 raven 工作室，但我无法执行许多操作（如创建数据库）。当我尝试时，会弹出 Windows 身份验证，询问我的凭据。我在同一台计算机上以管理员身份运行，但我的凭据未被识别。使用嵌入式模式也会发生同样的事情。只有将应用程序放在 IIS 上，我才能以管理员身份使用 raven studio。但我希望能够使用基于控制台的服务器和/或嵌入式模式来做到这一点。请帮忙。

Asp .net mvc 4 应用程序配置：

```
RavenController.Store = new DocumentStore 
{ 
    ConnectionStringName = "RavenDB"
}

<add name="RavenDB" connectionString="Url=http://localhost:8080;" /> 
```

Raven.Server.exe.config：

```
<add key="Raven/Port" value="*"/>
<add key="Raven/DataDir" value="~\Database\System"/>
<add key="Raven/AnonymousAccess" value="Get"/> 
```

查看这些逐步描述问题的屏幕截图：

[http://issues.hibernatingrhinos.com/issueImageAttachments?issue=57-1412](http://issues.hibernatingrhinos.com/issueImageAttachments?issue=57-1412)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T18:49:34.337

您可以将“Raven/AnonymousAccess”的值更改为“Admin”。

```
<add key="Raven/AnonymousAccess" value="Admin"/> 
```

这对于生产来说可能是一个糟糕的想法。但是在控制台模式下运行以进行开发时应该做到这一点。

# php - Chrome 下载我的 PHP 文件

> ID：14917228
> 
> 赞同：3
> 
> 时间：2013-02-17T01:52:45.450
> 
> 标签：php, google-chrome

这是我第一次使用stackoverflow，所以我会尽量不要马上出丑哈哈。我刚刚决定选择 PHP，因为我已经厌倦了 C++ 和 Java，而且我刚刚安装了 Linux Mint 14，并决定我应该在我的新操作系统中选择一种新语言（除了不时使用 Ubuntu，我有到目前为止几乎完全使用 Windows）。

所以我很好地设置了我的环境，我可以通过终端运行我所有的 PHP 脚本，但是当我尝试在 Chrome 中运行脚本时（IE file:///home/stitches/Programming/PHP/HelloWorld/hw.php ) 它下载 PHP 文件而不是显示它。我很确定这不是我的任何安装，因为我在 Chrome 中使用 file:/// 方法非常频繁地绕过我学校计算机上被阻止的 C 驱动器，每当我单击 Chrome 目录浏览器中的某些内容时，它都会下载它（某些文件类型除外）。话虽如此，我根本没有太多 Linux 或 PHP 经验，而且它真的可以是任何东西。此外，当我运行测试脚本 (localhost/testphp.php) 时，它运行良好且无法下载。

谁能帮我吗？我希望能够在我的浏览器中测试我的脚本，因为这样我也可以在浏览器中测试它。我猜我可以将所有文件放在与 testphp.php 相同的目录中（无论在哪里。我不确定，但我确定我能找到它）所以我可以通过 localhost 访问它，但是我希望能够在它们当前所在的目录中组织我的脚本。

我确实想提一下，我确实进行了搜索，而与我有类似问题的少数人最终遇到了不同的问题或由其他原因引起的相同问题。除非我使用错误的术语进行搜索，否则我找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:54:58.957

这是服务器设置问题。您的服务器实际上并没有运行您的 PHP，然后才将其作为纯文件提供给浏览器。检查您的服务器的文档以正确设置 PHP。

如果是 Apache，请参见[this](http://www.php.net/manual/en/install.unix.apache2.php)和[this](http://www.howtogeek.com/howto/ubuntu/installing-php5-and-apache-on-ubuntu/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:59:35.417

> 此外，当我运行测试脚本 (localhost/testphp.php) 时，它运行良好且无法下载。...我猜我可以将所有文件放在与 testphp.php 相同的目录中（无论在哪里。我不确定，但我确定我可以找到它）所以我可以通过 localhost 访问它，但我更希望能够在它们当前所在的目录中组织我的脚本。

这是你的答案。使用 file:// URL 加载它们会下载该文件。通过 localhost 加载它们将它们作为代码运行，然后正确输出，就像`testphp.php`正在做的那样。

至于在该目录中组织它们，您可以将它们从您的网络主机文件夹（在哪里`testphp.php`）符号链接到您希望它们成为的目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T02:02:54.440

该`file://`协议将始终为您提供文件的内容。你想要的是让 web 服务器在文件上运行 PHP，然后给你结果。

听起来您已经正确安装了 Web 服务器和 php，因为您提到 localhost/testphp.php 示例正在运行。

根据您的安装，`testphp.php`可能在`/var/www/`. 试着把你的`hw.php`文件放在同一个地方，你应该会发现 localhost/hw.php 可以工作。

# java - 如何在 JComboBox 中添加不同的类类型？

> ID：14917229
> 
> 赞同：0
> 
> 时间：2013-02-17T01:53:02.013
> 
> 标签：java, swing, generics, jcombobox

是否可以在运行时实例化其类型在 JComboBox 中设置的对象？

假设我有一个抽象类`Fruits`。我有课程`Apple`和`Banana`扩展`Fruits`。有一个在运行时要实例化的对象的引用：`Fruits chosenFruit`

我想做这样的事情：

```
Fruits chosenFruit;
JComboBox<Fruits> combo = new JComboBox<Fruits>();

Apple appleCombo = new Apple();
Banana bananaCombo = new Banana();

combo.add(appleCombo );
combo.add(bananaCombo);

// When user chose a fruit in JComboBox and clicked OK:
chosenFruit = new combo.getSelectedItem().getClass(); // or .getType() ??? 
```

这里的问题是，我实例化了两个对象（appleCombo 和bananaCombo）只是为了将它们添加到JComboBox。但我只希望新对象的类型显示在 JComboBox 中并由用户设置。我希望这是合理的。

提前致谢！

**编辑：** 那么，有没有办法做这样的事情：

```
JComboBox<Class> combo = new JComboBox<Class>();
combo.add(Apple);
combo.add(Banana);
Fruits chosenFruit = new combo.getSelectedItem(); 
```

# windows - 使用 MSysgit 的 Perl 解释器在 Windows 上的 Apache 下 GitWeb 非常慢

> ID：14917230
> 
> 赞同：3
> 
> 时间：2013-02-17T01:53:05.730
> 
> 标签：windows, apache, msysgit, gitweb

我正在使用 Apache 2.2.22 (win64) 在 Windows Server 2008 R2 上运行 GitWeb。我按照这里的说明操作：[https](https://git.wiki.kernel.org/index.php/MSysGit:GitWeb) ://git.wiki.kernel.org/index.php/MSysGit:GitWeb 说明说我们应该在 gitweb.cgi 脚本中使用 perl 的 msysgit 版本作为 perl 的第一行。

GitWeb 可以工作，但速度极慢，加载一个页面大约需要 10 秒。我注意到的是，即使我使用 msysgit 的 Perl 版本作为第一行编写“Hello World”脚本，Apache 执行它的速度也很慢。但是，如果换成不同版本的 Perl，比如 cygwin 的 perl (C:/cygwin/bin/perl)，又快了。我无法使用除 msysgit 之外的任何其他类型的 perl 来执行 gitweb.cgi，因为当我这样做时，我会收到“未找到项目”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:54:18.183

几个小时后，我找到了替代解决方案。我们将使用 cygwin 的，而不是使用 msysgit 的 git 和 perl 版本：

1) 安装 Cygwin，并选择以下 cygwin 包：git（必要时还有 perl）

2）修改gitweb.cgi文件3处。
gitweb.cgi 的第一行应该说：

```
#!C:/cygwin/bin/perl 
```

确保 $GIT 变量设置正确，并采用“cygwin”格式：

```
our $GIT = "C:/cygwin/bin/git"; 
```

projectroot 目录必须是“cygwin”格式，而不是 msysgit 格式：

```
our $projectroot = "/cygdrive/c/temp/repos"; 
```

出于某种原因，cygwin 的 perl 版本在 apache 下的执行速度比在 msysgit 下的要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T03:53:51.120

只需在 httpd.conf 中添加下一行

SetEnv 登录服务器\机器

# javascript - Javascript 未正确启动

> ID：14917242
> 
> 赞同：-1
> 
> 时间：2013-02-17T01:55:06.130
> 
> 标签：javascript, jquery

我一直在工作的一个 wordpress 网站似乎对它的一些脚本的启动有些奇怪。我目前最关心的是下拉标题。它显然没有样式，因为我只是在试验，但是，如果你看，它不应该下降到页面的一定长度，虽然它这样做了，但在页面加载时，它会在用户交互时显示自己。有谁知道这可能会发生什么？任何帮助将非常感激。

该站点链接到[nextworld.kbddev.com](http://nextworld.kbddev.com)

这是我的酒吧代码：

```
<script>
$(function() {
    $(window).scroll(function(){
      if($(window).scrollTop() > 542){
          $("#follownav").slideDown("fast");
          $('#follownav').removeClass('hide').addClass('show');

      }
    });
    $(window).scroll(function(){
      if($(window).scrollTop() < 542){
          $("#follownav").slideUp("fast");
      }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:57:55.457

问题是您没有检查页面加载。

一个简单的解决方法是：

```
$(function(){
    $(window).scroll();
}); 
```

# iphone - 暂停执行直到 Websocket 连接

> ID：14917246
> 
> 赞同：5
> 
> 时间：2013-02-17T01:56:26.333
> 
> 标签：iphone, ios, concurrency, grand-central-dispatch

我正在使用[SocketRocket](https://github.com/square/SocketRocket)库来处理与 Websocket 的连接。它连接得很好，但我正在尝试运行一些必须首先等待 WS 连接的单元测试。由于知道 WS 已连接的唯一方法是通过其委托方法，因此我无法使此过程同步。我希望我的单元测试`setup`方法简单地创建一个 WS 连接然后`tearDown`关闭它。

我已经为我的 Websocket 类实现了两种类型的连接方法。前两个非常基本，我已经验证它们按预期工作。最后一个是我尝试将其阻塞主要用于测试目的。我无法让它工作，它最终会永远等待，所以我相信这是我的概念上的误解。

**我想我的大问题是如何在测试用例中停止执行以等待对代表的回电？**测试用例中出现的问题是我不能只在完成块中进行所有测试——测试方法将其视为成功并结束程序。

```
- (void)connect
{
    DLog(@"Websocket is connecting now");
    [_socket open];
}

- (void)connectWithCompletion:(WebsocketConnection)completion
{
    DLog(@"Connecting now...");
    [_onConnectBlocksToRun addObject:^{
        completion(self.isConnected, self.socket);
    }];
    [_socket open];
}

- (bool)connectBlocking // XXX Doesn't work!
{
    sem = dispatch_semaphore_create(0);
    [_socket open];

    dispatch_semaphore_wait(sem, DISPATCH_TIME_FOREVER);
    return _isConnected;
}

#pragma mark - Socket rocket delegate
- (void)webSocketDidOpen:(SRWebSocket *)webSocket
{
    DLog(@"Websocket has opened");
    _isConnected = YES;
    _socket = webSocket;

    for (void(^block)() in _onConnectBlocksToRun) {
        block();
    }
    [_onConnectBlocksToRun removeAllObjects];

    if (sem) {
        dispatch_semaphore_signal(sem);
        dispatch_release(sem);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T13:56:34.770

当您等待信号量发出信号时，主线程被阻塞，因此根本无法运行任何代码。如果您的库与 runloop 系统集成，您可以使用 runloop 运行`CFRunLoopRun()`而不是等待您的信号量。从您准备好的回调中，您可以使用`CFRunLoopStop( CFRunLoopGetMain() )`.

# javascript - 如何限制对地理空间数据的查询？

> ID：14917248
> 
> 赞同：1
> 
> 时间：2013-02-17T01:57:39.200
> 
> 标签：javascript, google-maps, mongodb, geolocation

我正在制作一个应用程序，该应用程序使用基于 MongoDb 中具有地理坐标的对象的标记创建和填充 Google 地图。但是，每次地图以任何方式更改时，我都会检查窗口内是否有任何标记。但是，这比我想要的更多地查询服务器和数据库，因此我想找到一种方法来限制这些查询。

我在想我可以在地图边界+ 1弧度的距离内获得标记。然后如果调整后的中心+距离超过了原来的中心+距离+1，那么客户端将向服务器查询新的标记。但是，我似乎无法理解这样做的数学。我已经有了获取地图边界半径的数学方法。

更具体地说，我想当圆 A（中心（x，y）和半径（r））和圆 B（中心（w，z）时，我将如何确定（以最少的处理能力/内存使用）和半径 (o)) 相交。

提前致谢！

# java - 为什么我的程序要添加一个新行？

> ID：14917254
> 
> 赞同：1
> 
> 时间：2013-02-17T01:58:47.673
> 
> 标签：java

所以我正在尝试使用 for 循环创建一个由“[]”组成的三角形示例。执行时，循环应使用给定的输入 2 打印出来：

```
[]
[][] 
```

但是，当我输入 2 并编译时，它会为框添加另一行，如下所示：

```
[]
[][]
[][][] 
```

这是否有幽灵机制，或者我错过了什么？

```
import java.util.Scanner;
public class NestedLoops
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);

        System.out.print("Enter a Number between 2-9: ");
        int width=input.nextInt();

        String r ="";
        for(int i=1; i<=width; i++)
        {
            for(int j=1; j<=i; j++)
            {
                r=r+"[]";
                System.out.println(r);
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T02:22:16.093

如果您阅读评论，就会有很多关于您做错了什么的提示。

但你真正需要的是关于如何自己解决问题的建议：

*   Joel 建议您应该使用调试器。如果您没有学过这方面的知识，您需要找到一个教程......与您正在使用的 IDE 相关。

*   ruakh 建议在代码中添加跟踪打印以打印出关键位置的变量值。这种方式也有效，尤其是在您无法将调试器附加到程序的情况下

*   我建议您“手动执行”该程序。拿一张纸和铅笔，写下变量的名称和值的“槽”。现在假设您正在执行语句*完全按照它们所写*的那样，在您的纸上写入/更改变量的值。

当然，你需要用你的大脑来解释上面会告诉你什么，建立对实际发生的事情的理解，以及修复它的计划。

Troubleshooting / debugging is something you learn to do with practice; i.e. by doing it *yourself*. And you'll need to learn this if you are ever to become a productive programmer.

The other *good thing* about doing your own trouble-shooting is that the practice helps your develop your skills in reading and understanding code, and ultimately your skills in writing it. And THAT ... my friend ... is the point of your homework!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:06:33.603

为此，您只需要一个 for 循环：

```
 for(int i=1; i<=width; i++)
    {
        r=r+"[]";
        System.out.println(r);
    } 
```

# javascript - 表单中单选按钮的javascript验证

> ID：14917258
> 
> 赞同：0
> 
> 时间：2013-02-17T01:59:12.273
> 
> 标签：javascript, forms, form-submit, radio, onsubmit

希望有人能阐明下面的代码，它总是提醒下面的错误。该代码旨在验证一个单选按钮是否被选中，否则返回 false 到当前页面，否则继续执行表单操作。提前谢谢你！！

```
 function onDisplayItemsForm(){
  var re = false;           // used to determine when a button is checked
  var radIdSelected = frmDisplayItems; 

// traverse the radio buttons
// if one is checked sets re to true, and stops the iteration
    for(var i=0; i<radIdSelected.length; i++) 
    {
      if(radIdSelected[i].checked == true) 
      {
       re = true;
   break;

       }

   if (!radIdSelected[i].checked) 
{
      alert("Please select product");
      return false;
    }
     return true;

  }
 }; 
```

表格如下：

```
 <form name="frmDisplayItems" action="showItem.php" onsubmit="return onDisplayItemsForm();" >

      <table width="50%" border="1">

  <th>Country of Origin</th>
  <th>Select</th>
  </tr>

         <td><input name=\"radId\" type=\"radio\" value=\"$id\" /></td>

  </tbody>
  </table>

  <p><input name="btnSubmit" type="submit" value="Select"/>  </p>
  </form> 
```

<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:23:07.183

这是`re`您要在循环完成**后检查的值：**

```
if (!re)
{
    alert("Please select product");
    return false;
}

return true; 
```

# java - org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“itemAttrService”的bean

> ID：14917264
> 
> 赞同：1
> 
> 时间：2013-02-17T02:00:14.137
> 
> 标签：java, spring, web.xml, pom.xml, zk

我正在 Spring + Hibernate + ZK 框架中尝试一个示例。我通过 pom.xml 文件打包了一个war文件。之后，当我运行程序时`on server`，它会引发以下异常

> org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“itemAttrService”的bean

这是 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.nagarro</groupId>
    <artifactId>ZKSpringHibernateExample</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>ZKSpringHibernateExample</name>
    <url>http://maven.apache.org</url>

    <repositories>
        <repository>
            <id>java.net</id>
            <url>http://download.java.net/maven/2/</url>
        </repository>
    </repositories>
    <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <!-- Spring framework -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- MySQL database driver -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>

        <!-- Hibernate framework -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.6.3.Final</version>
        </dependency>

        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>
        <!-- <dependency> <groupId>javax.persistence</groupId> <artifactId>persistence-api</artifactId> 
            <version>1.0.2</version> </dependency> -->

        <!-- Hibernate library dependecy start -->
        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
        </dependency>

        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>

        <dependency>
            <groupId>antlr</groupId>
            <artifactId>antlr</artifactId>
            <version>2.7.7</version>
        </dependency>
        <!-- Hibernate library dependecy end -->

        <!-- ZK Dependency start -->
        <dependency>
            <groupId>org.zkoss.zk</groupId>
            <artifactId>zkplus</artifactId>
            <version>6.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.zkoss.zk</groupId>
            <artifactId>zhtml</artifactId>
            <version>6.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.zkoss.zk</groupId>
            <artifactId>zkbind</artifactId>
            <version>6.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.zkoss.zk</groupId>
            <artifactId>zul</artifactId>
            <version>6.0.0</version>
        </dependency>
        <!-- ZK Dependency Ends -->

    </dependencies>
</project> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>DataSyncTreePOC</display-name>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/BeanLocations.xml,

        </param-value>
    </context-param>
    <servlet>
        <description>
        The ZK loader for ZUML pages</description>
        <servlet-name>zkLoader</servlet-name>
        <servlet-class>org.zkoss.zk.ui.http.DHtmlLayoutServlet</servlet-class>
        <init-param>
            <param-name>update-uri</param-name>
            <param-value>/zkau</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <description>
        The asynchronous update engine for ZK</description>
        <servlet-name>auEngine</servlet-name>
        <servlet-class>org.zkoss.zk.au.http.DHtmlUpdateServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>zkLoader</servlet-name>
        <url-pattern>*.zul</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>zkLoader</servlet-name>
        <url-pattern>*.zhtml</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>auEngine</servlet-name>
        <url-pattern>/zkau/*</url-pattern>
    </servlet-mapping>
    <!-- <error-page> <exception-type>java.lang.Throwable</exception-type> <location>/error/error.zul</location> 
        </error-page> -->
    <welcome-file-list>
        <welcome-file>pages/showDbData.zul</welcome-file>

    </welcome-file-list>
</web-app> 
```

我正在创造这样的豆子

```
ApplicationContext appContext = new ClassPathXmlApplicationContext("spring/config/BeanLocations.xml");
itemAttrService = (ItemAttributeService)appContext.getBean("itemAttrService"); 
```

我能够构建一个`appContext`但不是`itemAttrService`

`itemAttrService`在同一个文件中声明如下

```
@Autowired
private ItemAttributeService itemAttrService 
```

我还在我的服务类中使用了@Service 注释，就像这样

```
package com.nagarro.service.impl;

@Service("itemAttrService")
public class ItemAttributeServiceImpl implements ItemAttributeService{

code....
} 
```

看，这个类在`com.nagarro`包下，所以它应该被自动扫描。但是，这里不是这样。请告知我是否遗漏了我`pom.xml`或`web.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:57:58.703

您`spring/config/BeanLocations.xml`需要包含这样的一行：

```
<context:component-scan base-package="com.nagarro.service.impl" /> 
```

# html - 使Z轴正确堆叠

> ID：14917269
> 
> 赞同：1
> 
> 时间：2013-02-17T02:02:08.873
> 
> 标签：html, css, z-index

在下一页[http://blackburndigital.co.uk/boxes.html](http://blackburndigital.co.uk/boxes.html)我试图将数字（强）定位在 z 轴上的黑框（透镜）上，以便数字（强）最初可见.

这是html

```
<div class="fact">
<div class="lense"></div>
<strong>4</strong>
<p> Years in business   </p>
</div> 
```

和 css（为简单起见删除了一些值......查看上面链接上的源代码以获取完整的 css）

```
.fact 
{background:red; 
overflow: hidden; 
position: relative; }

.fact strong 
{ display: block;
position: relative;
 z-index: 10;}

.lense {width: 200%; 
height: 100%;
 z-index: 5; 
position: relative;} 
```

我不确定我做错了什么......有什么想法吗？

# android - 带有数字输入的 EditText 仅返回 0 作为字符串

> ID：14917273
> 
> 赞同：0
> 
> 时间：2013-02-17T02:03:05.313
> 
> 标签：android, android-edittext, gettext, tostring, settext

我有一个`EditText`只接受数字输入的，我正在使用以下代码将该输入转换为字符串，以便以后使用。

```
scoreString = Integer.parseInt(teamScore.getText().toString()); 
```

问题是......当我使用 setText() 时，它只显示“0”：

`previewText.setText( scoreString + " :");`

为什么整数不说明用户在编辑文本中输入的内容？

**编辑：**如果我使用`setText`带有大量字符串（其中有 6-8 个字符串）的 a，这会破坏在那里使用数字的能力吗？

- 我什至收集了最后一块字符串并将它们制成一个完整的字符串，然后使用 setText 作为`finalOutput`它，但它不起作用（见下文）

```
finalOutput = (sportName + ": " + team1NameString
                    + " " + team1ScoreString + ", " + team2NameString + " "
                    + team2ScoreString + " - " + quarterString + " "
                    + descriptionString);
            generatePreview.setText(finalOutput + ""); 
```

（对不起，我一直在更改变量名，请注意格式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:11:11.737

嗯，我可以按照您想要的方式确认以下工作（这意味着如果我在 EditView 中输入“65”，它会在 TextView 中输出“65：”）：

```
 EditText mEditView = (EditText)findViewById(R.id.myedittext);
    TextView mTextView = (TextView)findViewById(R.id.mytextview);

    int scoreString = Integer.parseInt(mEditView.getText().toString());
    mTextView.setText(scoreString + " :"); 
```

你的设置是一样的吗？

# powershell - PowerShell模板

> ID：14917276
> 
> 赞同：3
> 
> 时间：2013-02-17T02:03:34.410
> 
> 标签：powershell

我有一个包含两种模板变量的应用程序配置文件。第一个集合将在构建时由一些 powershell 脚本填充。第二个保留在配置文件中，但在运行时使用。

因此，在源代码管理下，该文件可能如下所示：

```
<property name="$($settings.elementName)" value="${valueThatIsSubstitutedAtRuntime}" /> 
```

构建后，我希望它是：

```
<property name="settingFromPosh" value="${valueThatIsSubstitutedAtRuntime}" /> 
```

但不幸的是，它的出现是

```
<property name="settingFromPosh" value="" /> 
```

我正在使用 Powershell for Developers 中描述的模板方法的略微修改版本。基本上，我使用要替换的变量填充 ScriptBlock，读取模板并使用模板内容调用 Invoke-Expression。它成功替换了它可以找到的值但也清除了它不能找到的任何值的脚本。

我不愿意使用正则表达式令牌替换，因为我想要模板中 ps 的全部功能。此外，我不想为我不想在构建期间填充的值引入不同的变量标记。

有没有办法将变量保留在无法替换的位置，或者可能将它们转义以使它们被忽略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:24:03.760

将您的字符串放在单引号中，以便 PowerShell 不会尝试扩展其中的任何变量，例如：

```
<property name="$($settings.elementName)" value='${valueThatIsSubstitutedAtRuntime}' /> 
```

然后您可以`$ExecutionContext.InvokeCommand.ExpandString(...)`在运行时使用扩展字符串，例如：

```
$foo = 'bar'
$str = '$foo'
$ExecutionContext.InvokeCommand.ExpandString($str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:49:03.447

你确定这个：

```
"${valueThatIsSubstitutedAtRuntime}" 
```

不应该是：

```
&{valueThatIsSubstitutedAtRuntime} 
```

第一个是括号变量的语法。我认为它正在寻找一个名为“大括号之间的任何内容”的变量（并没有找到它，因此它返回一个空字符串）。如果它是一个脚本块，我想你会想要调用它。

# html - 法语前端开发？

> ID：14917280
> 
> 赞同：0
> 
> 时间：2013-02-17T02:04:15.393
> 
> 标签：html, css, frontend

抱歉，如果这是一个愚蠢的问题，但我刚刚找到了一份用法语开发网站的工作。如果我在编写一个英文网站，有什么我应该做或不应该做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:13:15.490

我认为您无需担心设计/外观和感觉。

不过，您将有很多关于内容的担忧。

*   日期格式
*   货币格式
*   千位分隔符和其他东西

我假设您也不会背负处理内容的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T08:40:36.427

设计良好的 HTML 页面应该以某种方式处理法语中的一些印刷特性，例如标点符号周围的特殊间距规则。仅使用 HTML 和 CSS 处理它们有些棘手。请参阅我的页面[HTML 创作法文](http://www.cs.tut.fi/~jkorpela/html/french.html)。

# ruby-on-rails - rubymine 中的分析器

> ID：14917281
> 
> 赞同：6
> 
> 时间：2013-02-17T02:04:41.490
> 
> 标签：ruby-on-rails, performance, profiling, rubymine

我创建了分析和存储数据的繁重脚本，我真的需要知道我的代码的哪些行大部分时间都在消耗。Rubymine 是否具有分析器功能，或者可能以某种方式向其中添加分析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T10:17:22.857

我也在寻找它，但没有成功。如果你发现了什么，请告诉我。

同时......在Ruby本身中有两个模块可以帮助你

**基准测试**- [http://apidock.com/ruby/Benchmark](http://apidock.com/ruby/Benchmark)

你做这样的事情

```
require 'benchmark'

n = 50000
Benchmark.bm(7) do |x|
  x.report("for:")   { for i in 1..n; a = "1"; end }
  x.report("times:") { n.times do   ; a = "1"; end }
  x.report("upto:")  { 1.upto(n) do ; a = "1"; end }
end 
```

它会给你很好的分析结果表

```
 user     system      total        real
for:     1.050000   0.000000   1.050000 (  0.503462)
times:   1.533333   0.016667   1.550000 (  0.735473)
upto:    1.500000   0.016667   1.516667 (  0.711239) 
```

**Profiler__** – [http://apidock.com/ruby/Profiler__](http://apidock.com/ruby/Profiler__)

使用此模块的最简单方法是`require 'profile'`在您的脚本完成后，它会清除每个调用的数据。

检查此示例[http://ruby.about.com/od/advancedruby/a/profile.htm](http://ruby.about.com/od/advancedruby/a/profile.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T12:00:54.393

从 2019.1 版本开始，RubyMine 支持使用 RbSpy 进行分析。要分析脚本：

1.  （可选）在**Settings/Preferences |上配置探查器设置 构建、执行、部署 | Ruby Profiler**页面。
2.  右键单击编辑器或项目视图中的脚本，然后**选择 Run 'script name' with 'RbSpy profiler'**。

3.  **在Profiler**工具窗口中分析结果。**Flame Chart**选项卡随时显示调用堆栈的状态。每个帧代表堆栈中的一个方法/块（堆栈帧）。在 Y 轴上，有一个自下而上的堆栈深度。X 轴显示从最耗时的方法/块到最不耗时的方法/块排序的堆栈。

您可以从[Profile 应用程序](https://www.jetbrains.com/help/ruby/cpu-profiler.html)帮助主题中了解更多信息。

# python - Python 返回调用类对象

> ID：14917283
> 
> 赞同：0
> 
> 时间：2013-02-17T02:04:59.567
> 
> 标签：python, class, methods, return

我正在用 Python 制作一个名为 House 的课程。它具有实例变量，例如街道名称和街道编号。

```
h = House(1234, "main street")
>>>h.street_name
Main Street
>>>h.street_number
1234

>>>h
<__main__.House object at 0x27ffbd0> 
```

当您调用“h”时，程序应该返回“1234 Main Street”。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T02:08:27.337

您想定义一个`__str__`返回字符串表示的方法。例如：

```
class House:
    # other methods
    def __str__(self):
        return "%d %s" % (self.street_number, self.street_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:18:42.117

> ....Python 中的一个名为 House 的类。它有实例变量......

一个类没有实例变量。该实例有

.

“变量”在 Python 中是一个令人困惑的词。
Python 不向开发人员提供“变量”（= 框），只有对象。
人们混淆地称为“变量”的大部分时间是标识符（=名称）......或者也许......什么......我不知道，他们也不知道自己，因为没有变量在 Python 中使用 developer....

.

如果`h`它不是可调用对象（类，函数......），则无法调用

您所称的“调用”只是对 Python 向您呈现对象**h**的需求。由于它不是像整数或字符串那样的简单对象，而是一个实例，即具有数据属性和方法的属性的对象，Python 不会广泛地向您展示具有所有属性的实例和属性的值（对于某些实例可能很长），它会为您提供实例的简短描述，说明它是哪个类的实例，并给出它的地址。

# html - CSS3 过渡“捕捉到像素”

> ID：14917292
> 
> 赞同：1
> 
> 时间：2013-02-17T02:08:26.027
> 
> 标签：html, css, animation, css-transitions

我试图在 CSS3 中获得微妙的背景移动动画，就像 Xbox 上的 Metro 中的图像块或 Apple 幻灯片中的 Ken Burns 效果。问题是 CSS3 似乎将位置值四舍五入到最接近的整数，或者不支持亚像素渲染，所以结果看起来很生涩。

我在这里做了一个小提琴：http: [//jsfiddle.net/ykg3b/1/](http://jsfiddle.net/ykg3b/1/)
这是CSS

```
.test {
    width: 400px;
    height: 400px;
    background: url('http://img.fusynth.com/600/artists/8.jpg');
    background-size: cover;
    background-position-x: 0.01px;
    -webkit-transform: translateX(0.01px);
    -webkit-transform-style: preserve-3d;
    -webkit-backface-visibility: hidden;
    -webkit-transition: background-position-x 15s linear;
    -moz-transition: background-position-x 15s linear;
    -o-transition: background-position-x 15s linear;
    -ms-transition: background-position-x 15s linear;
    transition: background-position-x 15s linear;
}
.test:hover {
    background-position-x: -100.01px;
    -webkit-transition: background-position-x 15s linear;
    -moz-transition: background-position-x 15s linear;
    -o-transition: background-position-x 15s linear;
    -ms-transition: background-position-x 15s linear;
    transition: background-position-x 15s linear;
} 
```

如果您加快动画速度，抖动就会消失，因此不仅仅是浏览器延迟。

我还尝试将图像放入具有溢出的 div 中：隐藏并为其位置属性设置动画。一样的效果。我还尝试强制 Webkit 进行 3D 渲染。没有不同。

有没有办法让 CSS3 正确地做到这一点，还是我将不得不求助于 Canvas 或 WebGL？

谢谢！——基顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:40:04.373

Problem Solved! I animated the position inside of a masking div and then animated a CSS Translate Transform instead of the position directly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:39:25.130

There is a solution based on JavaScript.

[http://www.zachstronaut.com/posts/2009/03/04/smoothing-slow-js-animation-parallax.html](http://www.zachstronaut.com/posts/2009/03/04/smoothing-slow-js-animation-parallax.html)

# svn - 如何让 Subversion 跟踪分支上的更改

> ID：14917294
> 
> 赞同：2
> 
> 时间：2013-02-17T02:08:44.420
> 
> 标签：svn, tortoisesvn

假设我有一个任务要做，这需要一些时间才能完成。我想继续使用配置管理优势，当然不想在 Repo 之外保留更改，但我也不想在任务完成之前提交任务，就像我不想被其他人所做的更改搞砸一样可能影响我的任务。因此，我决定创建一个分支，对其进行处理，使用 to 进行测试，并且仅在正确测试更改并具有足够稳定性时才合并回主干，然后删除该分支。

那么，如何正确地分支和合并呢？当我在分支工作期间看到文件日志时，我希望能够在分支存在之前在主干中看到对其所做的更改。当我合并回主干时，我想看到在分支工作期间所做的更改，就好像它是直接在主干中完成的一样。

知道如何使用 Subversion 来实现吗？我使用 Tortoise，但如果需要，我可以使用另一个客户端进行分支和合并。

从 Subversion 1.5 到 1.7 是否发生了与此行为相关的更改，是否值得升级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:34:36.143

是的，这可以实现。

本书的这一部分介绍了合并：http: [//svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html)

1.7 对合并跟踪进行了改进，所以是的，升级会有所帮助：http: [//subversion.apache.org/docs/release-notes/1.7.html#merge-tracking-enhancements](http://subversion.apache.org/docs/release-notes/1.7.html#merge-tracking-enhancements)

# javascript - 第一次使用二进制有问题？

> ID：14917299
> 
> 赞同：0
> 
> 时间：2013-02-17T02:09:35.767
> 
> 标签：javascript, binary, bit-manipulation

为什么返回 10010 而不是 00001？

```
0110 >> 2 // 10010 
```

我认为这些位会向右移动 2 次，但事实并非如此。我期望的输出是`0001`or 1 但我得到了 0 。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:14:47.830

0110 是一个**八进制**常数，因为它以零开头：

```
>>> 0110
72
>>> 0110 >> 2
18
>>> bin(_)
'0b10010' 
```

这是 Python，但许多其他具有八进制常量的语言（Java、C、JavaScript ......）也是如此。并非所有语言都提供二进制常量。如果您没有它们，您可以使用十六进制常量（例如，0b0110 是 0x6）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:13:43.637

您的数字不会被解释为二进制，而是*八进制*（以 8 为底）。八进制`0110`是`72`十进制或`1001000`二进制。当您右移 2 时，就变成`10010`了您所看到的。

在编程语言中，前导零表示八进制是很常见的。根据您使用的语言，可能有也可能没有指定二进制文字的方法。

表达二进制数的更通用方法是使用十六进制，因为每个半字节（十六进制数字）正好是 4 位。

```
0 0000
1 0001
2 0010
3 0011
4 0100
5 0101
6 0110
7 0111
8 1000
9 1001
A 1010
B 1011
C 1100
D 1101
E 1110
F 1111 
```

因此，要制作 0110（二进制），我们将使用 0x6。要制作 01101101，我们将使用 0x6D。

# python - Pybrain前馈神经网络训练错误完全卡住

> ID：14917300
> 
> 赞同：2
> 
> 时间：2013-02-17T02:10:18.930
> 
> 标签：python, neural-network, pybrain, feed-forward

嘿伙计们，我需要一些关于我的 pybrain 代码的帮助。一切都很好，但是在第一次训练之后，训练错误并没有下降。事实上，它只是停留在 13.3484055174 处。我已经多次检查我的代码并将其与其他示例进行比较，但我一直遇到同样的问题。我也已经尝试过更改隐藏单元的数量、学习率、动量、权重衰减，但无济于事。我检查了参数，它从 [-1 到 1] 开始，然后上升到 ~240-250。我想知道是否有人可以看到它为什么不起作用。我敢肯定这是我缺少的一个非常简单的 1-liner。

我正在研究 kaggle 0-9 数字分类数据集。我已经让随机森林工作了，但我真的想让这个神经网络也能工作。任何帮助将不胜感激。

```
#learn digit classification with a nerual network

import pybrain
from pybrain.datasets import *
from pybrain.tools.shortcuts import buildNetwork
from pybrain.supervised.trainers import BackpropTrainer
from pybrain.structure.modules   import SoftmaxLayer
from pybrain.utilities           import percentError
import numpy

print "Importing training and test data"
data = numpy.genfromtxt('trainR.csv', delimiter = ',')
data = data[1:]
traindata = data[:(len(data)/2)]
testdata = data[(len(data)/2)+1:]

print "Importing actual data"
actualdata = numpy.genfromtxt('trainR.csv', delimiter = ',')

print "Adding samples to dataset and setting up neural network"
ds = ClassificationDataSet(784, 10, nb_classes = 10)
for x in traindata:
    ds.addSample(tuple(x[1:]),tuple(x[0:1]))
ds._convertToOneOfMany( bounds=[0,1] )
net = buildNetwork(784, 100, 10, bias=True, outclass=SoftmaxLayer)

print "Training the neural network"
trainer = BackpropTrainer(net, dataset=ds, momentum = 0.1,
                    verbose = True, weightdecay = 0.01)
for i in range(3):
    # train the network for 1 epoch
    trainer.trainEpochs( 1 )

    # evaluate the result on the training and test data
    trnresult = percentError( trainer.testOnClassData(), [x[0] for x in traindata] )

    # print the result
    print "epoch: " + str(trainer.totalepochs) + "  train error: " + str(trnresult)

print ""
print "Predicting with the neural network"
answerlist = []
for row in testdata:
    answer = numpy.argmax(net.activate(row[1:]))
    answerlist.append(answer)
tstresult = percentError(answerlist, [x[0] for x in testdata])
print "Test error: " + str(tstresult) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:46:07.843

尝试改变

```
 ds = ClassificationDataSet(784, 10, nb_classes = 10) 
```

至

```
ds = ClassificationDataSet(784, 1, nb_classes = 10) 
```

我认为`ClassificationDataSet`第二个参数是目标的维度，而不是 nb_classes 给出的类数。这取决于您的数据是如何组织的。最好的方法是将每个目标作为每个类的整数输入，然后使用`_convertToOneOfMany()`

如果您提供了您的第一个样本，将会很有用

# c++ - 更改功能区控件上的默认语言

> ID：14917302
> 
> 赞同：0
> 
> 时间：2013-02-17T02:10:39.803
> 
> 标签：c++, com, ribbon, windows-ribbon-framework

有谁知道如何更改功能区控件上的默认语言，我使用的是丹麦语窗口，所以对话框和标准标签是丹麦语，但我正在用英语编写应用程序。

我尝试更改资源文件中的语言，并尝试使用 std::locale 和 setlocale() 更改语言环境。但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:15:22.800

我终于自己找到了答案:)。

SetThreadPreferredUILanguages(MUI_LANGUAGE_NAME, L"en-US", NULL);

为我做了，但前提是完全安装了特定的语言包。我希望它会帮助别人。

# .net - 实体框架中的映射表

> ID：14917310
> 
> 赞同：1
> 
> 时间：2013-02-17T02:12:04.297
> 
> 标签：.net, entity-framework-ctp5

我在下面提供的链接中执行了以下任务，这对我使用 Entity Framework 5.0 和 Visual Studio 2010 来说效果很好。

[http://blogs.msdn.com/b/simonince/archive/2009/03/23/mapping-two-tables-to-one-entity-in-the-entity-framework.aspx](http://blogs.msdn.com/b/simonince/archive/2009/03/23/mapping-two-tables-to-one-entity-in-the-entity-framework.aspx)

但是，如果需要刷新数据库模式，如何防止对设计器所做的更改丢失并重新进行？

对于有很多表的数据库来说，这不会很漂亮......

# java - 使用java安装mysql

> ID：14917311
> 
> 赞同：1
> 
> 时间：2013-02-17T02:12:06.293
> 
> 标签：java, mysql, windows, installation

如果我有一个使用 mysql 服务器来保留其后端数据库的应用程序，有没有办法将 mysql 安装与应用程序安装程序捆绑在一起？

安装程序必须搜索是否存在现有的 mysql 服务器并将其配置为与应用程序一起使用或安装 mysql 并对其进行配置。目标平台是windows。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T02:26:30.430

您通常不能根据 MySQL 许可协议分发 mysql 数据库：

“ MySQL 软件用于您的个人应用程序，只要您不分发它们”

[http://www.mysql.com/about/legal/licensing//commercial-license.html](http://www.mysql.com/about/legal/licensing//commercial-license.html)

但是，如果您的应用程序是开源的，并且您在分发 MySql 方面达成了某种协议，那么您可以在下面的链接上下载并打包一组通用二进制文件，这将允许您将其作为安装的一部分使用包裹。

[MySql 二进制包](http://dev.mysql.com/doc/refman/5.1/en/binary-installation.html)

# jquery - 具有活动导航的动态 CSS 箭头位置

> ID：14917313
> 
> 赞同：0
> 
> 时间：2013-02-17T02:12:37.733
> 
> 标签：jquery, css, navigation

我试图弄清楚单击后如何将箭头移动到列表项的中心。单击后，该类将变为活动状态，并且需要根据列表项的中心更新三角形的位置。不确定我是否以正确的方式进行此操作，认为可能有更有效的方法来做到这一点。

```
$('.sort li.active a').click(function () {
    var $this = $(this);
    var offset = $this.offset();
    var width = $this.width();
    var centerX = offset.left + width / 2;
    console.log(centerX);
    $('#subheader:after').css('right', centerX);
}); 
```

[http://jsfiddle.net/afaQ8/](http://jsfiddle.net/afaQ8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:28:37.977

由于您已经将箭头显示为伪元素，因此可以使其显示在 li.active 上，因此您可以从中获取位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T04:08:12.903

使 li 的高度固定，单击时没有背景图像从所有兄弟姐妹中删除背景图像，并添加元素宽度的 x 偏移量的背景图像 - 箭头图像的大小。

# iphone - 自动布局是拉伸图像，自动布局，ios

> ID：14917314
> 
> 赞同：0
> 
> 时间：2013-02-17T02:12:40.783
> 
> 标签：iphone, ios, objective-c, autolayout, nslayoutconstraint

我以以下方式将 uiimageview 添加到按钮：

1.  uiimageview 是沿 y 轴的中心（刚刚再次编辑）
2.  uiimageview 的尾随空间总是距离按钮 10 个点

为此，我正在做以下事情

```
 // Just added these lines 
    UIImage *img                =   [UIImage imageNamed:@"reload.png"];
    indicator                   =   [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, img.size.width, img.size.width)];
    indicator.image             =   img;

    [self.logInButton addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: @"H:|[indicator]-(10)-|"
                                                                                 options:0
                                                                                 metrics:nil
                                                                                   views:NSDictionaryOfVariableBindings(indicator)]];

    [self.logInButton addConstraint:[NSLayoutConstraint constraintWithItem:self.logInButton
                                                              attribute:NSLayoutAttributeCenterY
                                                              relatedBy:NSLayoutRelationEqual
                                                                 toItem:indicator
                                                              attribute:NSLayoutAttributeCenterY
                                                             multiplier:1.0
                                                               constant:0]]; 
```

但是，我得到的是 uiimageview 像下面一样伸展

![在此处输入图像描述](../Images/81106895babc00a9c32f0539343997a0.png)

有没有人对此有任何想法。所有评论都在这里表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:17:38.527

您的约束是说图像视图应该与左边缘齐平并且距离右侧 10 个点，因此如果按钮大于图像的大小，图像将被拉伸。您要么需要将其在 x 方向居中（并消除右侧的那个），要么为图像视图设置特定大小。

# html - 不确定为什么这没有提交到我的操作页面？页面只是在提交时刷新

> ID：14917317
> 
> 赞同：0
> 
> 时间：2013-02-17T02:13:27.190
> 
> 标签：html

```
<html>
<body>
<link rel="stylesheet" type="text/css" href="css.css"
<form action="RegnDisplay.php" method="post" class="registration_form">
  <fieldset>
    <legend>Registration Form </legend>

    <p>Personal Information </p>

    <div class="elements">
      <label for="name">Name :</label>
      <input type="text" id="name" name="name" size="25" />
    </div>
    <div class="elements">
      <label for="e-mail">E-mail :</label>
      <input type="text" id="e-mail" name="e-mail" size="25" />
    </div>
        <p>Security Information </p>
    <div class="elements">
      <label for="Password">Password:</label>
      <input type="password" id="Password" name="Password" size="25" />
    </div>  
       <div class="elements">
          <label for="Password">Confirm Password:</label>
      <input type="password" id="Password_Confirm" name="Password_Confirm" size="25" />
    </div>
    <div class="submit">
     <input type="hidden" name="formsubmitted" value="TRUE" />
      <input type="submit" value="Register" />
    </div>
  </fieldset>
</form>
</body>
</html> 
```

这是一个基本表单，试图将用户提交的值发布到处理页面，但是我的页面只是闪烁而不执行操作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:42:56.080

第 3 行：

```
<link rel="stylesheet" type="text/css" href="css.css" 
```

应该：

```
<link rel="stylesheet" type="text/css" href="css.css"/> 
```

# coq - Coq 中的“详细”自动

> ID：14917318
> 
> 赞同：14
> 
> 时间：2013-02-17T02:13:32.520
> 
> 标签：coq, verbose

我正在学习 Coq 和我正在学习的书，( [CPDT](http://adam.chlipala.net/cpdt/html/toc.html)`auto` )在证明中大量使用。

由于我正在学习，我认为准确了解幕后工作可能对我有所帮助`auto`（早期的魔法越少越好）。有什么方法可以强制它准确显示它用于计算证明的策略或技术吗？

如果没有，是否有一个地方详细说明了什么`auto`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-17T04:48:23.837

有多种方法可以一目了然地了解引擎盖下发生的事情。

TLDR：放在`info`你的策略之前，或者`Show Proof.`在调用策略之前和之后使用并发现差异。

* * *

要查看特定策略调用一直在做什么，您可以在 is 前加上`info`，以显示它已采取的特定证明步骤。

（这可能会被 Coq 8.4 破坏，我看到他们提供`info_`了一些策略的版本，如果需要，请阅读错误消息。）

这可能是初学者想要的，它已经很简洁了。

* * *

另一种查看证明中当前情况的方法是使用命令`Show Proof.`。它将向您显示当前构建的带有漏洞的术语，并告诉您当前的每个目标应该填补哪个漏洞。

这可能更高级，特别是如果您使用诸如`induction`or之类的策略`inversion`，因为正在构建的术语将相当复杂，并且需要您了解归纳方案或依赖模式匹配的基本性质（CPDT 应该教您很快就好了）。

* * *

`Qed.`用(or )完成证明后`Defined.`，您还可以要求查看通过使用`Print term.`where `term`is the theorem/term 的名称构建的术语。

这通常是一个又大又丑的术语，它需要一些培训才能阅读这些涉及的术语。特别是，如果该术语是通过使用强大的策略（例如`omega`、`crush`等）构建的，则它可能会变得不可读。您基本上只会使用它来扫描您感兴趣的术语的某个特定位置。如果它超过 10 行，甚至不用费心以如此粗略的格式阅读它！:)

* * *

对于之前的所有内容，您可以`Set Printing All.`预先使用，以便 Coq 打印所有内容的展开、显式版本。它也很冗长，但当您想知道隐式参数的值是什么时会有所帮助。

这些都是我能想到的，但可能还有更多。

* * *

至于策略的作用，通常的最佳答案可以在文档中找到：

[http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@tactic155](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@tactic155)

基本上，`auto`尝试使用提供的所有提示（取决于您使用的数据库），并将它们组合到一定深度（您可以指定）来解决您的目标。默认情况下，数据库为`core`，深度为`5`.

更多信息可以在这里找到：

[http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#Hints-databases](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#Hints-databases)

# r - R中矩阵的两列相乘之和

> ID：14917323
> 
> 赞同：3
> 
> 时间：2013-02-17T02:14:13.313
> 
> 标签：r, matrix, dot-product

我正在使用以下方法在 R 中生成一个矩阵，

```
ncolumns = 3
nrows = 10
my.mat <- matrix(runif(ncolumns*nrows), ncol=ncolumns) 
```

该矩阵表示点在 3D 中的坐标。如何在R中计算以下？

```
sum of x(i)*y(i) 
```

例如，如果矩阵是，

```
x y z
1 2 3
4 5 6 
```

然后输出=`1*2 + 4*5`

我正在努力学习 R。所以任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T02:21:30.070

您正在寻找 %*% 功能。

```
ncolumns = 3
nrows = 10

my.mat <- matrix(runif(ncolumns*nrows), ncol=ncolumns)

(my.answer <- my.mat[,1] %*% my.mat[,2])

#       [,1]
# [1,] 1.519 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T02:20:21.397

你只需这样做：

```
#  x is the first column; y is the 2nd
sum(my.mat[i, 1] * my.mat[i, 2]) 
```

现在，如果要命名列，可以直接引用它们

```
colnames(my.mat) <- c("x", "y", "z")

sum(my.mat[i, "x"] * my.mat[i, "y"])

# or if you want to get the product of each i'th element 
#  just leave empty the space where the i would go
sum(my.mat[ , "x"] * my.mat[ , "y"]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T02:20:05.657

每列由 中的第二个参数指定`[]`，因此

```
my_matrix[,1] + my_matrix[,2] 
```

是你所需要的全部。

# math - 对变换求平方是什么意思？

> ID：14917324
> 
> 赞同：2
> 
> 时间：2013-02-17T02:14:33.500
> 
> 标签：math, sicp

我试图理解我为一个练习阅读的解决方案，该练习定义了一个对数时间过程，用于查找斐波那契数列中的第 n 个数字。问题是计算机程序的结构和解释 (SICP) 中的 1.19。

**剧透警报：**这个问题的解决方案将在下面讨论。

Fib(n) 可以按如下线性时间计算：从 a = 1 和 b = 0 开始。Fib(n) 始终等于 b 的值。因此，最初，当 n = 0 时，Fib(0) = 0。每次应用以下变换时，n 都会增加 1，Fib(n) 等于 b 的值。

```
 a <-- a + b
   b <-- a 
```

为了在对数时间内做到这一点，问题描述将变换 T 定义为变换

```
a' <-- bq + aq + ap
b' <-- bp + aq 
```

其中 p = 0 和 q = 1，最初，因此此转换与上述转换相同。

然后应用上述变换两次，练习指导我们用 a 和 b 的原始值来表示新的值 a'' 和 b''。

```
a'' <-- b'q + a'q + a'p = (2pq + q^2)b + (2pq + q^2)a + (p^2 + q^2)a
b' <-- b'p + a'q = (p^2 + q^2)b + (2pq + q^2)a 
```

然后，该练习将这种应用两次变换的应用称为“对变换求平方”。我的理解正确吗？

本练习的解决方案应用了使用上述平方变换值的技术来生成以对数时间运行的解决方案。问题如何在对数时间内运行？在我看来，每次我们使用平方变换的结果时，我们都需要进行一次变换而不是两次。那么我们如何连续每次将步数减半呢？

来自 schemewiki.org 的解决方案发布在下面：

```
 (define (fib n) 
   (fib-iter 1 0 0 1 n)) 
 (define (fib-iter a b p q count) 
   (cond ((= count 0) b) 
         ((even? count) 
          (fib-iter a 
                    b 
                    (+ (square p) (square q)) 
                    (+ (* 2 p q) (square q)) 
                    (/ count 2))) 
         (else (fib-iter (+ (* b q) (* a q) (* a p)) 
                         (+ (* b p) (* a q)) 
                         p 
                         q 
                         (- count 1))))) 

 (define (square x) (* x x)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:07:03.717

> 然后，该练习将这种应用两次变换的应用称为“对变换求平方”。我的理解正确吗？

*是的，对变换进行平方意味着应用两次，或者（如本练习的解决方案中的情况）找到另一个等效*于应用两次的变换。

> 问题如何在对数时间内运行？在我看来，每次我们使用平方变换的结果时，我们都需要进行一次变换而不是两次。那么我们如何连续每次将步数减半呢？

对给定变换求平方使我们能够减少步数，因为平方变换中的`p`和`q`增长速度比原始变换中的要快得多。这类似于使用连续平方比重复乘法更快地计算指数的方式。

> 那么我们如何连续每次将步数减半呢？

这在给出的代码中。只要`count`是偶数，`(/ count 2)`就在下一次迭代中传递计数。无论`n`在初始迭代中传入什么值，它甚至会在交替迭代中（最坏情况）。

如果您想在本练习中逐步推导平方变换，可以阅读我关于[SICP 练习 1.19：计算斐波那契数的博文。](http://www.billthelizard.com/2010/01/sicp-exercise-119-computing-fibonacci.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T06:34:46.490

@Bill-the-Lizard 提供了一个很好的证明，但是您允许自己对与变换有关的“两次”一词和“方形”一词的看法产生冲突。

a) 计算 T 项的两倍——即 T 的两倍——是乘法的一种情况。乘法的过程只是在每一步将 T 增加一个**常数值**的过程，其中常数值是原始项本身。

但相比之下：

b) 给定的斐波那契变换是一个需要在每个操作步骤使用项 T 的**最新状态**的过程（而不是使用一个常数值）。AND，操作公式不是一个简单的增量，而是实际上是一个二次表达式（即在每个连续步骤中都涉及平方）。

就像比尔说的那样，如果您在调试器中逐步执行这种连续的平方效应，它将变得非常清楚（每当我卡在某个地方时，我更喜欢手动计算一些简单的情况）。

换一种方式思考这个过程：

要到达目的地，如果您可以在下一步中走完当前距离的平方，但仍然设法花费固定的时间来完成每一步，那么您将比不断采取步骤更快地到达目的地，每个都在恒定时间内。

# javascript - 如何使用 jQuery 通过 src 属性选择 iframe？

> ID：14917325
> 
> 赞同：4
> 
> 时间：2013-02-17T02:14:42.667
> 
> 标签：javascript, jquery, html, jquery-selectors

我的代码：

HTML：

```
<iframe src="http://lorempixel.com/400/400/" width="400" height="400"></iframe> 
```

JS：

```
$("iframe[scr*='http://lorempixel.com/400/400/']").css("border", "3px solid blue"); 
```

小提琴：

[链接到 JsFiddle](http://jsfiddle.net/eNz4a/1/)

似乎可以通过其源属性选择 iframe。

先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T02:17:32.490

## 解决方案

您有一个错字，您应该引用的正确属性是`src`，而您的查询正在搜索一个名为`scr`但不存在的属性。

所以而不是

```
$("iframe[scr*='http://lorempixel.com/400/400/']").css("border", "3px solid blue"); 
```

你应该有

```
$("iframe[src*='http://lorempixel.com/400/400/']").css("border", "3px solid blue"); 
```

* * *

## 例子

## >[这是一个 jsfiddle，显示此错字已更正](http://jsfiddle.net/d439h/)

* * *

**参考：**

*   [http://reference.sitepoint.com/html/img/src](http://reference.sitepoint.com/html/img/src)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T02:16:41.283

您在 jQuery 选择器中拼错了“src”。目前是`scr`，应该是`src`。固定代码：

```
$("iframe[src*='http://lorempixel.com/400/400/']").css("border", "3px solid blue"); 
```

并修复了 JSFiddle：http: [//jsfiddle.net/Je3SG/1/](http://jsfiddle.net/Je3SG/1/)

# javascript - 如何附加到从闭包创建的 JavaScript 命名空间？

> ID：14917328
> 
> 赞同：0
> 
> 时间：2013-02-17T02:15:10.403
> 
> 标签：javascript, namespaces, javascript-namespaces

我有一个以下格式的命名空间，允许公共和私有成员：

```
function A() {
    return('a');
}

namespace1 = (function () {
    // private
    namespace2 = (function() {
        // private
        prC = function () {
            return(namespace1.puB() + 'c');
        };
        puC = function () {
            return(prC());
        };
        // public
        return({
            puC: puC
        });
    })();
    prB = function () {
        return(A() + 'b');
    };
    puB = function () {
        return(prB());
    };
    // public
    return({
        puB: puB,
        namespace2: namespace2
    });
})();

document.write('A() = '); try {  document.write(A()); } catch (ex) { document.write('inaccessible'); }
document.write('<BR />');
document.write('namespace1.prB() = '); try {  document.write(namespace1.prB()); } catch (ex) { document.write('inaccessible'); }
document.write('<BR />');
document.write('namespace1.puB() = '); try {  document.write(namespace1.puB()); } catch (ex) { document.write('inaccessible'); }
document.write('<BR />');
document.write('namespace1.namespace2.prC() = '); try {  document.write(namespace1.namespace2.prC()); } catch (ex) { document.write('inaccessible'); }
document.write('<BR />');
document.write('namespace1.namespace2.puC() = '); try {  document.write(namespace1.namespace2.puC()); } catch (ex) { document.write('inaccessible'); } 
```

输出：

```
A() = a
namespace1.prB() = inaccessible
namespace1.puB() = ab
namespace1.namespace2.prC() = inaccessible
namespace1.namespace2.puC() = abc 
```

我该如何将公共和私有成员都附加到这样的命名空间（即：来自不同的文件）？

[这是一个 JSFiddle](http://jsfiddle.net/CoryG/AagXJ/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:46:16.167

> *“我如何才能将公共和私有成员都附加到这样的命名空间......”*

好吧，你的函数被暴露了，因为你没有正确地声明你的变量`var`。

但是一旦你解决了这个问题，你就可以从任何可以引用你的对象的代码中添加更多公开的属性*（因为所有属性都是公开的） 。*`namespace`

* * *

添加更多引用本地*（私有）*函数的属性，您需要一个新函数和变量范围。

只需调用一个引用`namespace`对象的函数，在该函数内创建一些函数，然后添加引用这些本地函数的属性。

```
// Other file

(function() {
    var newLocalFunc = function() {
        // local function
    }

    var anotherLocalFunc = function() {
        // local function
    }

    namespace1.exposedFunc = function() {
        return newLocalFunc()
    }
    namespace1.namespace2.anotherExposedFunc = function() {
        return anotherLocalFunc()
    }
})(); 
```

再一次......不要忘记`var`在原始代码中的变量之前放置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:51:26.277

没有关键字声明的任何变量**`var`**都将在**全局范围内**。所以你的`puB()`函数不是不可访问或私有的，它只是不是`namespace1`函数返回的对象的成员。例如`window.prB()`，您会看到该方法存在于对象的全局范围内`window`。

```
<head>
    <script type="text/javascript">
        obj1 = {}; //in global scope
        var obj2 = {}; //in global scope. Although used the var keyword, this line itself is in the global scope; so the variable.
        function someFunc() {
            obj3 = {}; //in global scope
            var obj4 = {}; //'so-called' private (inaccessible from global scope)
        }
    </script>
</head> 
```

用于在同一个“命名空间”（或者说对象）下组合两个不同的 JS 文件：

**文件 1** .js

```
var namespace1 = (function() {
    // some code...
    var namespace2 = (function() {
        // some code...
        return {
            obj2: 'value2'
        };
    })();

    return {
        obj1: 'value1'
    };
})(); 
```

**文件 2** .js

```
namespace1.namespace3 = (function() {
    // some code...
    var ns4 = (function() {
        // some code...
        return {
            obj4: 'value4'
        };
    })();

    return {
        obj3: 'value3',
        namespace4: ns4
    };
})(); 
```

什么是什么：

*   `namespace1`在全局范围内声明；所以它可以从任何地方访问，它是我们的主要对象。
*   `namespace2`无法访问（私有）。
*   `namespace3`在全局范围内不可访问，但可以作为 的成员访问`namespace1`；例如：`namespace1.namespace3`。
*   `namespace4`可作为 的成员访问`namespace1`。例如： `namespace1.namespace4`。

所以; 我们主要对象的成员**`namespace1`**是：

```
namespace1 = {
    obj1: String,
    namespace3: {
        obj3: String,
        namespace4: {
            obj4: String
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T03:33:10.520

你离堪萨斯很远，这里。

您不能将事物“声明”为公共或私有。
只要您在函数内部定义事物，然后选择返回特定事物，或将它们附加到您作为参数传入的对象/数组中，那么您将拥有对这些事物的“公共”（外部）访问权限，之后函数返回。

为了获得“私人”访问权限，您返回一个引用内部某些内容的函数。

```
var Wallet = function (amount, overdraft_limit) {
    var balance = 0,
        overdraft = overdraft_limit || 0,

        deposit_funds = function (funds) { balance += funds; return true; },

        withdraw_funds  = function (request) {
            var funds = 0;
            balance -= request;
            funds = request;
            return funds;
        },

        validate_request = function (pin) { /* ... */ },

        sufficient_funds = function (val) { return val <= (balance + overdraft); },

        add = function (pin, deposit) {
            if (!validate_request(pin) || deposit <= 0) { return false; }

            var result = deposit_funds(deposit);
            return result;
        },

        deduct = function (pin, withdrawl) {
            if (!validate_request(pin) || withdrawl <= 0) { return false; }
            if (!sufficient_funds(withdrawl)) { return false; }

            var funds = withdraw_funds(withdrawl);
            return funds;
        },

        check = function () { return balance; },

        public_interface = { deduct : deduct, add : add, check : check };

    return public_interface;
};

var myWallet = Wallet(30, 20);

var cash = myWallet.deduct(40);
cash;             //  40
myWallet.check(); // -10

myWallet.balance = 40000000000;

cash = myWallet.deduct(4000);
cash;  // === false 
```

通过在我的“构造函数”内部构建函数，这些函数可以访问`balance`，我返回该“公共”对象的变量可以调用方法与“私有”数据交互，但不能通过任何方法访问或修改它但要使用那些“公共”功能。

使用 IIFE 将这些东西嵌套 8 层深，使用与我刚刚演示的完全相同的闭包概念。

明确决定要返回什么，不返回什么。
您发送到世界的功能是`public`。未返回或未附加到对象的函数内部的函数/等是私有的。
它们已被返回的“构造函数”函数关闭，现在它们 100% 不可访问，除非使用构造函数内部构建的函数，这些函数引用私有变量，并作为公共方法返回。

# java - 神经网络 - 更新网络

> ID：14917341
> 
> 赞同：2
> 
> 时间：2013-02-17T02:17:11.967
> 
> 标签：java, c++

我正在用 Java 构建我的第一个神经网络，并且我正在在线关注这个 C++ 示例

```
vector<double> CNeuralNet::Update(vector<double> &inputs)
{

//stores the resultant outputs from each layer

vector<double> outputs;

int cWeight = 0;

//first check that we have the correct amount of inputs

if (inputs.size() != m_NumInputs)
{
    //just return an empty vector if incorrect.
    return outputs;
}
//For each layer....

for (int i=0; i<m_NumHiddenLayers + 1; ++i)
{
    if ( i > 0 )
    {
        inputs = outputs;
    }
outputs.clear();
cWeight = 0;

//for each neuron sum the (inputs * corresponding weights).Throw
//the total at our sigmoid function to get the output.

for (int j=0; j<m_vecLayers[i].m_NumNeurons; ++j)
{
  double netinput = 0;

  int NumInputs = m_vecLayers[i].m_vecNeurons[j].m_NumInputs;

  //for each weight

  for (int k=0; k<NumInputs - 1; ++k)
  {

    //sum the weights x inputs

    netinput += m_vecLayers[i].m_vecNeurons[j].m_vecWeight[k] *

                inputs[cWeight++];
  }

  //add in the bias

  netinput += m_vecLayers[i].m_vecNeurons[j].m_vecWeight[NumInputs-1] *

              CParams::dBias;

  //we can store the outputs from each layer as we generate them.

  //The combined activation is first filtered through the sigmoid

  //function

  outputs.push_back(Sigmoid(netinput, CParams::dActivationResponse));

  cWeight = 0;

}

}

return outputs;

} 
```

关于这段代码，我有两个问题。首先，看似……奇怪的输入到输出的分配

```
//For each layer....

for (int i=0; i<m_NumHiddenLayers + 1; ++i)

{

if ( i > 0 )

{ 

    inputs = outputs;

}
outputs.clear(); 
```

这部分真的让我很困惑。他**刚刚**创建了输出……他为什么要将输出分配给输入？另外，为什么要++i？据我所知，在他之前的代码中，他仍然使用索引 [0]，这就是我正在做的事情。为什么突然改变？有理由留下最后一个吗？我知道如果没有其余的代码示例，这可能是一个很难看到的问题......

我的第二个问题是

```
//add in the bias

netinput += m_vecLayers[i].m_vecNeurons[j].m_vecWeight[NumInputs-1] *

          CParams::dBias;

//we can store the outputs from each layer as we generate them.

//The combined activation is first filtered through the sigmoid

//function

outputs.push_back(Sigmoid(netinput, CParams::dActivationResponse)); 
```

CParams::dBias 和 CParams::dActivationResponse 不会出现在此之前的任何位置。我现在为此创建了两个静态最终全局变量。我在正确的轨道上吗？

任何帮助，将不胜感激。这是一个个人项目，自从两周前我第一次了解到这个主题以来，我一直无法停止思考这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T12:40:18.933

我同意@kohakukun，我想在他的答案中加上我的答案，正如我所看到的，输出被分配给输入以计算下一层神经网络的输出。有时就像在我正在处理的网络中一样，我们可以有多个层，在我的项目中我有多个隐藏层，并且查看您的代码它可能在这里有类似的安排。因此，我认为您可以将我们的答案与您的代码联系起来，并且可能会在一定程度上解决您的疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:10:27.663

对于您的第一个问题：您将输入与刚刚生成的输出一起分配，以通过反向归纳来完善您的神经网络，以便它可以学习。

对于第二个问题：我认为你在正确的轨道上，因为偏差不会随着每次迭代而改变

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T03:03:09.160

在 for 语句中，第三部分不会在循环再次开始之前执行，这意味着 for (int i=0; i<10; ++i) 将与 for (int i=0; i <10；i++)。只有当 i>0 'inputs = outputs;' 时，这不是正确的行为吗？CParams 应该是一个类或命名空间名称，它必须存在于整个项目的某个位置。如果是类名，我认为使用全局静态是可以的。

# c# - 如何将可见性窗口属性从一种形式更改为另一种形式？

> ID：14917345
> 
> 赞同：0
> 
> 时间：2013-02-17T02:18:03.467
> 
> 标签：c#, winforms, properties, window, visibility

在我目前的项目中。我单击一个按钮，主窗体会将 ShowIcon 设置为 false 并将 Visibility 设置为 false。一旦我终止了第二个窗口，我想再次查看主窗体。通过将两个属性都重置为 true。这怎么可能？

以及我将在哪里放置代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:23:54.407

您可以覆盖`OnFormClossing`事件

```
protected override void OnFormClosing(FormClosingEventArgs e)
{
     // code that u want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:02:58.963

将此代码放在您的`button_click`活动中：

```
newform nf = new newform(); //or whatever the name of your second form is
this.Hide(); //to hide your mainform
nf.ShowDialog();
this.Show(); //to show your mainform after closing your new form
nf.Dispose(); //optional 
```

# batch-file - 以简单格式列出文件和文件夹的批处理文件

> ID：14917348
> 
> 赞同：0
> 
> 时间：2013-02-17T02:18:19.627
> 
> 标签：batch-file

我需要一个将文件夹及其文件（带日期）递归列出到文本文件的批处理文件。我在网上找了好几个，比如这个

```
echo off
for /d %%a in (*.*) do dir "%%a" >> Report.txt 
```

但没有我需要的简单格式。批处理文件将从顶部搜索目录运行。我想要顶部列出的搜索文件夹的完整路径，然后是文件夹和子文件夹名称，即使它们是空的，也没有路径，每个文件后面都带有时间戳。所以，像这样：

```
FullPathToTopFolder 
    FolderName1
        DateStamp   FileName1.txt      
        DateStamp   FileName2.txt      
        DateStamp   FileName3.txt      
    FolderName2
        DateStamp   FileName4.txt      
        DateStamp   FileName5.txt       
    FolderName3
        DateStamp   FileName6.txt      
    FolderName3
        /SubFolderName1
            DateStamp   FileName7.txt      
            DateStamp   FileName8.txt      
    FolderName4 
        /SubFolderName2
        /SubFolderName3
        /SubFolderName4
            DateStamp   FileName9.txt      
            DateStamp   FileName10.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:04:51.127

此脚本允许将顶层文件夹指定为第一个参数。如果未提供，则使用当前目录作为顶层文件夹。

*编辑以将输出重定向到文件*

```
@echo off
setlocal disableDelayedExpansion
pushd %1
set "tab=    "
set "indent="
call :run >report.txt
exit /b

:run
for %%F in (.) do echo %%~fF

:listFolder
setlocal
set "indent=%indent%%tab%"
for %%F in (*) do echo %indent%%%~tF   %%F
for /d %%F in (*) do (
  echo %indent%.\%%F
  pushd "%%F"
  call :listFolder
  popd
)
exit /b 
```

# java - Hibernate HQL 没有返回合适的构造函数

> ID：14917352
> 
> 赞同：0
> 
> 时间：2013-02-17T02:19:03.767
> 
> 标签：java, hibernate, hql

我有 HQL 查询

```
select new PaymentType(o.paymentType.idPaymentType) from Order as o where o.user='1' 
```

它抛出以下异常

```
org.hibernate.PropertyNotFoundException: no appropriate constructor in class: PaymentType
    at org.hibernate.util.ReflectHelper.getConstructor(ReflectHelper.java:187)
    at org.hibernate.hql.classic.QueryTranslatorImpl.renderSQL(QueryTranslatorImpl.java:631)
    at org.hibernate.hql.classic.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:220)
    at org.hibernate.hql.classic.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:185)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
    at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
    at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
    at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623) 
```

但是我已经声明了必需的构造函数，除此之外，还声明了其他具有不同数量和类型的参数的树构造函数，也没有参数构造函数。

```
public PaymentType(Integer idPaymentType) {
    this.idPaymentType = idPaymentType;
} 
```

**编辑：**

```
public class Order  implements java.io.Serializable {

     private Integer idOrder;
     private PaymentType paymentType;
     private DeliveryType deliveryType;
     ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:36:45.027

two things worth to check. 1.try use a fully qualified name of PaymentType

```
select new com.company.xxx.PaymentType(o.paymentType.idPaymentType) 
```

2.also make sure the id in entity **Order** is **int/integer** rather than **Long** or something else.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:25:16.613

在使用 Hibernate 之前，我已经看到了这个异常。据我回忆，它要么与没有无参数构造函数、没有公共访问权限的无参数构造函数有关，要么与您的实体类不可序列化有关。

尝试以下操作：

1.  确保你在`PaymentType`类中有这些构造函数：

    ```
    /** 
     * Default, parameter-less constructor
     */
    public PaymentType() {
    } 
    ```

2.  还有`Order`：

    ```
    /** 
     * Default, parameter-less constructor
     */
    public Order() {
    } 
    ```

3.  确保两者`PaymentType`都`Order`执行`java.io.Serializable`。

# virtualbox - 调整 vagrant box 上的磁盘空间大小

> ID：14917353
> 
> 赞同：10
> 
> 时间：2013-02-17T02:19:10.317
> 
> 标签：virtualbox, vagrant

我想给我的盒子更多的磁盘空间。我正在尝试通过 vagrantfile 执行此操作，如下所示：

```
Vagrant::Config.run do |config|
    # ..
    config.vm.customize ["modifyvm", :id, "--memory", 1024]
    config.vm.customize ["modifyhd", :id, "--resize", 4096]
end 
```

这给了我错误：

```
A customization command failed:
["modifyhd", "e87d8786-88be-4805-9c2a-45e88b8e0e56", "--resize", "4096"]

The following error was experienced:

VBoxManage: error: The given path 'e87d8786-88be-4805-9c2a-45e88b8e0e56' is not fully qualified
VBoxManage: error: Details: code VBOX_E_FILE_ERROR (0x80bb0004), component Medium, interface IMedium, callee nsISupports
VBoxManage: error: Context: "OpenMedium(Bstr(pszFilenameOrUuid).raw(), enmDevType, enmAccessMode, fForceNewUuidOnOpen, pMedium.asOutParam())" at line 178 of file VBoxManageDisk.cpp

Please fix this customization and try again. 
```

[我正在尝试将来自http://docs.vagrantup.com/v1/docs/config/vm/customize.html](http://docs.vagrantup.com/v1/docs/config/vm/customize.html) [http://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi](http://www.virtualbox.org/manual/ch08.html#vboxmanage-modifyvdi)的信息拼凑在一起

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T20:47:48.677

您正在向 modifyhd 发送 VM 的 UUID（由 vagrant 提供），而它需要 VDI 的 UUID。您将需要使用实际 VDI 文件或其 UUID 的绝对路径。您可以使用以下命令获取 VDI 的 UUID：（`VBoxManage showhdinfo <filename>`请参阅[virtualbox - 如何检查 vdi 的 uuid 是什么？](https://stackoverflow.com/questions/5379799/virtualbox-how-to-check-what-is-the-uuid-of-a-vdi)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-19T20:43:11.517

我创建了一个新磁盘，添加并扩展了旧磁盘。

我的流浪文件：

```
Vagrant.configure(2) do |config|
config.vm.box = "bseller/oracle-standard"
config.vm.define :oracle do |oracle| 
  oracle.vm.hostname = 'oraclebox'
  oracle.vm.synced_folder ".", "/vagrant", owner: "oracle", group: "oinstall" 
  oracle.vm.network :private_network, ip: '192.168.33.13'
  oracle.vm.network :forwarded_port, guest: 1521, host: 1521
  oracle.vm.provider :virtualbox do |vb|
     vb.customize ["modifyvm", :id, "--memory", "4096"]
     vb.customize ["modifyvm", :id, "--name", "oraclebox"]
     if !File.exist?("disk/oracle.vdi")
       vb.customize [
            'createhd', 
            '--filename', 'disk/oracle', 
            '--format', 'VDI', 
            '--size', 60200
            ] 
       vb.customize [
            'storageattach', :id, 
            '--storagectl', "SATA", 
            '--port', 1, '--device', 0, 
            '--type', 'hdd', '--medium', 'disk/oracle.vdi'
            ]
     end     
  end
  oracle.vm.provision "shell", path: "shell/add-oracle-disk.sh"
  oracle.vm.provision "shell", path: "shell/provision.sh"
end
end 
```

这将在

```
disk
    |-- oracle.vdi
shell
    |-- provision.sh
Vagrantfile 
```

并添加到您的框中。新磁盘是 60GB 我的 shell`provision.sh`

```
set -e
set -x

if [ -f /etc/disk_added_date ] ; then
   echo "disk already added so exiting."
   exit 0
fi

sudo fdisk -u /dev/sdb <<EOF
n
p
1

t
8e
w
EOF

sudo pvcreate /dev/sdb1
sudo vgextend VolGroup /dev/sdb1
sudo lvextend -L50GB /dev/VolGroup/lv_root
sudo resize2fs /dev/VolGroup/lv_root
date > /etc/disk_added_date 
```

该脚本从[SHC](https://askubuntu.com/questions/317338/how-can-i-increase-disk-size-on-a-vagrant-vm)改编为 box [bseller/oracle-standard](https://vagrantcloud.com/bseller/boxes/oracle-standard)。完整代码见我在 GitHub 中的项目[oraclebox](https://github.com/acfreitas/oraclebox)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-28T14:19:26.790

我一直在看这个，我还没有找到任何方法可以直接做到这一点。但是，您可以使用[Ansible](http://www.ansible.com/home)作为配置器来实现效果。首先，Vagrant 绝对可以创建和添加第二个磁盘，然后您可以使用 Ansible 以任何您喜欢的方式添加和挂载。

然而，Ansible 也有能力运行本地命令（在主机上）。这是 Ansible 的`local_action`特性。我在[这里](https://github.com/capsid/capsid-vagrant/blob/fa04993b5bb3cea8ea1c8ef608d09eec366c5769/roles/kernel/tasks/main.yml)使用它在内核升级后重新启动 Vagrant VM，并告诉主机等到它重新启动，但您可以将它与命令或 shell 操作一起使用来查找 HD 标识符、关闭 VM 并配置硬盘，然后重新启动。至少在理论上。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-01T18:36:52.537

虽然问题很旧，但我没有看到任何答案被接受。

`The given path 'e87d8786-88be-4805-9c2a-45e88b8e0e56' is not fully qualified` 出现是因为 UUID`e87d8...`是 VirtualBox vm UUID，而不是您的 SATA 存储磁盘设备 UUID。您可以通过 找到存储设备 UUID `VBoxManage showvminfo e87d8786-88be-4805-9c2a-45e88b8e0e56|grep vdi`。`:id`用 Vagrantfile modifyhd 行中的 SATA 存储 UUID替换。

它解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-13T14:46:04.750

好的...解决了...

VBoxManage.exe 不在我的路径中，所以我所做的是去（你必须去那个路径）：

C:\Program Files\Oracle\VirtualBox

然后使用命令：

VBoxManage.exe modifyhd "C:\Users\MyUser\VirtualBox VMs\MachineName\HDName.vdi " --resize 20480

对于 20 GB 大小的 HD

这不起作用： "C:\Program Files\Oracle\VirtualBox\VBoxManage.exe" modifyhd "C:\Users\MyUser\VirtualBox VMs\MachineName\HDName.vdi " --resize 20480

您必须在路径中：C:\Program Files\Oracle\VirtualBox

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-06T06:23:30.030

您可以添加新磁盘。首先使用 virtual box GUI 添加另一个虚拟磁盘

[![在此处输入图像描述](../Images/d35550547947be5907710e4f616c2d3b.png)](https://i.stack.imgur.com/sUGaC.jpg)

然后使用 fdisk 创建主磁盘分区

```
root@linux-dev:/# fdisk -l

Disk /dev/sdb: 20 GiB, 21474836480 bytes, 41943040 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk /dev/sda: 9.9 GiB, 10632560640 bytes, 20766720 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x83312a2b

Device     Boot    Start      End  Sectors  Size Id Type
/dev/sda1  *        2048 19816447 19814400  9.5G 83 Linux
/dev/sda2       19818494 20764671   946178  462M  5 Extended
/dev/sda5       19818496 20764671   946176  462M 82 Linux swap / Solaris

root@linux-dev:/# fdisk /dev/sdb

Welcome to fdisk (util-linux 2.25.2).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Device does not contain a recognized partition table.
Created a new DOS disklabel with disk identifier 0x5eb328b9.

Command (m for help): m

Help:

  DOS (MBR)
   a   toggle a bootable flag
   b   edit nested BSD disklabel
   c   toggle the dos compatibility flag

  Generic
   d   delete a partition
   l   list known partition types
   n   add a new partition
   p   print the partition table
   t   change a partition type
   v   verify the partition table

  Misc
   m   print this menu
   u   change display/entry units
   x   extra functionality (experts only)

  Save & Exit
   w   write table to disk and exit
   q   quit without saving changes

  Create a new label
   g   create a new empty GPT partition table
   G   create a new empty SGI (IRIX) partition table
   o   create a new empty DOS partition table
   s   create a new empty Sun partition table

Command (m for help): p

Disk /dev/sdb: 20 GiB, 21474836480 bytes, 41943040 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x5eb328b9

Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1):
First sector (2048-41943039, default 2048):
Last sector, +sectors or +size{K,M,G,T,P} (2048-41943039, default 41943039):

Created a new partition 1 of type 'Linux' and of size 20 GiB.

Command (m for help): p
Disk /dev/sdb: 20 GiB, 21474836480 bytes, 41943040 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x5eb328b9

Device     Boot Start      End  Sectors Size Id Type
/dev/sdb1        2048 41943039 41940992  20G 83 Linux

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks. 
```

使新创建的磁盘分区成为 ext4 文件系统

```
root@linux-dev:/# mkfs.ext4 /dev/sdb1 
mke2fs 1.42.12 (29-Aug-2014)
Creating filesystem with 5242624 4k blocks and 1310720 inodes
Filesystem UUID: 0301b56a-1d80-42de-9334-cc49e4eaf7b2
Superblock backups stored on blocks: 
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
    4096000

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done 
```

将磁盘分区挂载到目录

```
root@linux-dev:/# mount -t ext4 /dev/sdb1 /home/chenchun
root@linux-dev:/# df -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1       9.2G  3.3G  5.5G  38% /
udev             10M     0   10M   0% /dev
tmpfs            74M  4.4M   70M   6% /run
tmpfs           185M     0  185M   0% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           185M     0  185M   0% /sys/fs/cgroup
none            372G  240G  133G  65% /vagrant
/dev/sdb1        20G   44M   19G   1% /home/chenchun 
```

# github - 如何使用标签过滤 github 问题跟踪器上的问题？

> ID：14917354
> 
> 赞同：6
> 
> 时间：2013-02-17T02:19:17.903
> 
> 标签：github, issue-tracking

我第一次使用 github 问题跟踪器，我正在尝试管理一组大约 50 个未解决的问题。我想使用标准布尔查询对标签进行过滤。但我能弄清楚的只是AND查询。例如，我可以显示所有标记为`view/controller`和的问题`easy meat`。但我不知道如何执行以下任何查询：

*   显示所有已标记`view/controller`但未标记的*未*`easy meat`解决问题。

*   显示所有标记为`major refactoring`或的未决问题`needs thought`。

*   向我展示每个没有任何标签的未解决问题。

我已经搜索并且我有 RTFM，但我找不到一种方法来询问这些类型的查询。 **这样的查询甚至可能吗？** 如果是这样，如何问他们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-08T06:12:58.433

This *is* possible since [GitHub introduced the advanced filters](https://github.com/blog/1866-the-new-github-issues).

> Show me all open issues that are labeled `view/controller` but are not labeled `easy meat`.

```
is:open is:issue label:"view/controller" -label:"easy meat" 
```

Notice the `-` before `label:` which says *do not give me the issues containing this label*.

> Show me all open issues that are labeled either `major refactoring` or `needs thought`.

This is [not supported](https://stackoverflow.com/q/29136057/1420197) (using `label:A label:B` means *A and B* instead of *A or B*) but you can do two different queries:

```
is:open is:issue label:"major refactoring"
is:open is:issue label:"needs thought" 
```

> Show me every open issue that does not have any label.

Use the `no:label` query:

```
is:open is:issue no:label 
```

As additional info, you can refer to the [GitHub documentation](https://help.github.com/articles/searching-issues/). And, [`https://github.com/issues`](https://github.com/issues) can be your playgroud–being authenticated, you can search all the issues from repositories you have read access!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T07:24:29.813

不可能，至少只使用 GitHub Web 应用程序。可能有 3rd 方问题管理 Web 应用程序可以执行此操作（通过 GitHub API），但我不知道有任何可以完全执行且仅执行您想要的操作。查看：

[http://gissues.com/](http://gissues.com/)

[http://huboard.com/](http://huboard.com/)

[http://githubissues.herokuapp.com/](http://githubissues.herokuapp.com/)

[https://zapier.com/zapbook/github/trello/（trello](https://zapier.com/zapbook/github/trello/)集成）

有一些方法可以使用格式化的问题命名+搜索来实现几乎你想要的，如下所述： [https ://softwareengineering.stackexchange.com/questions/129714/how-to-manage-github-issues-for-priority-etc](https://softwareengineering.stackexchange.com/questions/129714/how-to-manage-github-issues-for-priority-etc)

# javascript - node.js - 向所有连接的广播消息

> ID：14917355
> 
> 赞同：1
> 
> 时间：2013-02-17T02:19:25.913
> 
> 标签：javascript, ajax, node.js

所以我们有以下 node.js 代码 -

```
var http = require('http');

var server = http.createServer(function (request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World! \n");
  response.end(");
}).listen(8125); 
```

假设我想向所有连接的用户广播一条消息， 函数中的`write`方法不会这样做。`response``createServer`

那么如何向所有连接的用户/客户端广播消息？

有没有办法用纯 Node.js 做到这一点？因为我现在才学习它，我现在更喜欢使用纯 node.js ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:27:52.797

这些是 HTTP 请求，因此不可能。HTTP 请求从第一次连接开始，并在所有数据发送完毕后结束。

在您的情况下，数据是

```
response.writeHead(200, {"Content-Type": "text/plain"});
response.write("Hello World! \n"); 
```

然后连接结束

```
response.end("); 
```

如果您正在寻找可以保持实时联系的东西，请查看以下内容：

[socket.io](https://github.com/learnboost/socket.io/) - 一个支持所有平台的实时传输库，并回退到旧软件。
[WebSocket-Node](https://github.com/Worlize/WebSocket-Node) - 客户端和服务器 websocket 实现。
[Faye](https://github.com/faye/faye) - 使用 Bayeux 协议的发布-订阅消息系统。

我只使用过`socket.io`，这就是广播的完成方式。

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.broadcast.emit('user connected');
}); 
```

# jquery - 处理带有大量 AJAX 调用的 jQuery 语句

> ID：14917356
> 
> 赞同：1
> 
> 时间：2013-02-17T02:19:38.380
> 
> 标签：jquery

处理具有许多 AJAX 调用的 jQuery 语句的最佳方法是什么？

下面的代码似乎效率低下。

```
$("#search_building").on("change blur", function () {
    var building = $("#search_building").val();
    var room = $("#search_room").val();
    var dept = $("#dept").val();
    var dataString = 'room=' + room + '&' + 'building=' + building + '&' + 'dept=' + dept;
    $.ajax({
        type: "POST",
        url: "process_building.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#search_room').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableMon.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_mon').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableTue.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_tue').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableWed.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_wed').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableThu.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_thu').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableFri.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_fri').html(html);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:26:56.590

用一个 AJAX 调用替换所有 AJAX 调用：

```
$.ajax({
  type: "POST",
  dataType: "json", 
  url: "process_all.php",
  data: dataString,
  cache: false,
  success: function (data) {
     //This is your json data
     //data[n] is just an illustration of how you could use your json that you get back.
     //In reality it depends on how you do your server side processing
     $('#grid2_day1').html(data[0]);
     $('#grid2_day2').html(data[1]);
     $('#grid2_day3').html(data[2]);
     $('#grid2_day4').html(data[3]);
     $('#grid2_day5').html(data[4]);
  }
}); 
```

另请注意，被调用的 URL 将是您进行所有处理或至少触发您需要执行的任何处理的地方。

要在处理后返回 JSON，请使用 PHP json_encode() 调用 JSON 编码数据

# c# - 两个模型之间的一对一关系？

> ID：14917357
> 
> 赞同：1
> 
> 时间：2013-02-17T02:19:51.087
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, asp.net-mvc-4

我有以下模型类（我首先使用 EF 代码来生成表）。

```
public class MyClass
{
    ....
    [Required, ForeignKey("Address")]
    public int Address1Id { get; set; }
    virtual public Address Address1 { get; set; }
    [Required, ForeignKey("Address")]
    public int Address12d { get; set; }
    virtual public Address Address2 { get; set; }
    [Required, ForeignKey("Address")]
    public int Address3Id { get; set; }
    virtual public Address Address3 { get; set; }
    ....
}
public class Address { .... } 
```

我希望创建视图`MyClass`显示所有地址字段，并且在保存`MyClass`. 但是脚手架为地址生成了一个 DropDownList 框。如何修改代码，使其像这些地址字段`MyClass`直接编码在类中一样，让控制器将地址保存在表`Address`和`AddressID`表中`MyClass`？

```
 <div class="editor-label">
        @Html.LabelFor(model => model.Address1Id, "Address")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Address1Id", String.Empty)
        @Html.ValidationMessageFor(model => model.Address1Id)
    </div> 
```

**更新：** 我尝试创建以下 ViewModel，但脚手架抱怨类中没有定义键。

```
public class DealViewModel
{
    public Deal Deal { get; set; }
    public Address Address { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:08:29.183

听起来您在问如何在 MVC 中为编辑/创建视图展平模型。您不想先创建一个 Person，然后再创建一个 Address，而是在一个屏幕中创建它。如果这就是您要问的，是的，您可以做到！事实上，做你想做的事情就像将你的创建视图更改为类似的东西一样简单：

```
<h3>Address 1</h3>
@Html.EditorFor(x => x.Address1)
<h3>Address 2</h3>
@Html.EditorFor(x => x.Address2)
...etc 
```

默认情况下，MVC 足够聪明，可以猜测您的“编辑器”`Address`应该是什么样子。字符串的文本字段、布尔值的复选框等。如果您的`[HttpPost]`控制器看起来像这样：

```
[HttpPost]
public ActionResult Create(Person person)
{
    if (ModelState.IsValid)
    {
        var context = new AppDbContext();
        context.People.Add(person);
        context.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(personViewModel);
} 
```

如果您`person`在调试器中检查，您应该会看到`Address`所有属性都已填写。是的，MVC ModelBinder 就是这么聪明！你不应该做任何其他事情。

**注意：**随着项目的进展，您的数据模型不可避免地会变得更加复杂，您可能会遇到从控制器到视图来回传递模型对象的问题。我强烈建议遵循使用 ViewModel 的模式，它是代表视图“模型”的普通对象，也就是说，它应该捆绑所有进出客户端的数据。这将允许您展平数据模型并仅包含您实际需要的字段。对于这个特定示例，您可能不需要使用此模式，但它在将来会有所帮助。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T10:41:28.420

您的外键属性不正确：

```
[Required, ForeignKey("Address1")]
...
[Required, ForeignKey("Address2")]
...
[Required, ForeignKey("Address3")]
... 
```

（`Address12d`我猜是错字）

# c# - 使用官方 C# 驱动程序的 MongoDB 聚合？

> ID：14917362
> 
> 赞同：0
> 
> 时间：2013-02-17T02:20:41.053
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在使用官方的 C# 驱动程序。不知道如何实现：
`Select MAX(TimeStamp) as MaxTimeStamp, ExtNo From AgentStatus Where TimeStamp>=@begin and TimeStamp <=@end Group By ExtNo`
任何帮助？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:58:22.023

已经使用 MapReduce 解决问题 :) 一个简单的演示[HERE](http://odetocode.com/blogs/scott/archive/2012/03/19/a-simple-mapreduce-with-mongodb-and-c.aspx)

# actionscript-3 - ActionScript3 中的遮罩

> ID：14917365
> 
> 赞同：-1
> 
> 时间：2013-02-17T02:21:40.133
> 
> 标签：actionscript-3

我正在尝试理解动作脚本中的掩码..一切对我来说似乎都有意义，但代码的一部分

```
function mouseM(event:MouseEvent):void {
if (mouseclick == 1) {
mask_mc.graphics.beginFill(0x000000);
mask_mc.graphics.drawEllipse(mouseX, mouseY, 70, 60);
mask_mc.graphics.endFill();
}
} 
```

我不确定如何准确地问这个问题，但它就在这里。为什么面具的“开始填充”是黑色的？那不会将图像涂成黑色（我知道它不会，它只是显示它）？beginfill 的确切功能是什么（除了显示图像lool）？就像它是如何工作的？抱歉，如果这听起来很荒谬……但是那部分代码真的让我在理解面具方面搞砸了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:01:39.737

您正在做的是绘制一个用作蒙版的形状。在这种情况下，一个圆圈。

它是什么颜色并不重要，因为 Flash 只对蒙版的形状感兴趣，而不是颜色。

画完圆圈后，Flash 会检查圆圈的哪个部分与您要遮盖的对象重叠，这样圆圈**未**覆盖的每个像素都将不可见。我想它真的应该被称为反蒙版，因为圆圈指示图像的哪些部分**不会**被蒙版，但将圆圈*（或您使用的任何形状）*称为蒙版已成为一般惯例。

同样，您只是在创建一个用作蒙版的形状。设置颜色只是为了让对象本质上存在..因为你不能完全有一个透明的圆圈。

随意将颜色更改为任何颜色，您会发现它没有区别，形状才是最重要的。

# c# - 在不使用 Linq 的情况下比较 2 List<>

> ID：14917368
> 
> 赞同：1
> 
> 时间：2013-02-17T02:22:11.083
> 
> 标签：c#, list

我正在使用 2 个列表，我想看看主要是否包含相同的类型。这两个列表不需要包含相同的计数或顺序，只需包含所有匹配的类型即可。我知道这对于 Linq 来说是很有可能的，但是我不能使用它。

```
 private static bool ContentsMatch(List<Type> list1, List<Type> list2)
    {
        if (list1.Count != list2.Count)
            return false;

        for (int i = 0; i < list1.Count; i++)
        {
            if (!list1[i].Equals(list2[i]))
                return false;
        }
        return true;
    } 
```

我尝试的上述方法只有在它们的顺序相同时才会返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:57:00.720

评论中提供的算法代码。

不依赖于订单或计数或重复项目。也是通用和抽象的。

```
bool IsSameSet<T>(IEnumerable<T> l1, IEnumerable<T> l2)
{
  return IsSubSet(l1, l2) && IsSubSet(l2, l1); 
}

bool IsSubSet<T>(IEnumerable<T> l1, IEnumerable<T> l2)
{
  var lookup = new Dictionary<T, bool>();

  foreach (var e in l1)
    lookup[e] = true;

  foreach (var e in l2)
    if (!lookup.ContainsKey(e))
      return false;

  return true;
} 
```

用法：

```
Type[] l1 = { typeof(object), typeof(int), typeof(long), typeof(object) };
Type[] l2 = { typeof(int), typeof(long), typeof(object) };

var result = IsSameSet(l1, l2);
Console.WriteLine(result);  // prints true 
```

用户练习：

添加一个附加参数以提供`IEqualityComparer<T>`要传递给字典的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:58:09.073

要比较任何用户定义的自定义类型，我们需要重写 Equals 和 GetHashCode。以下是您可以参考的代码片段：

```
 public class CustomizedDataType
    {
        private int field1;
        private string field2;

        public CustomizedDataType(int field1,string field2)
        {
            this.field1 = field1;
            this.field2 = field2;
        }

        public override bool Equals(object obj)
        {
            CustomizedDataType dataType = obj as CustomizedDataType;
            if (this.field1 == dataType.field1 && this.field2 == dataType.field2)
            {
                return true;
            }
            return false;
        }

        public override int GetHashCode()
        {
            return (this.field1.GetHashCode() + this.field2.GetHashCode());
        } 
```

要执行的示例代码：

```
 static void Main(string[] args)
    {
        //Test Data
        List<CustomizedDataType> dataTypeContaineer1 = new List<CustomizedDataType>();
        dataTypeContaineer1.Add(new CustomizedDataType(10,"Test10"));
        dataTypeContaineer1.Add(new CustomizedDataType(11, "Test11"));
        dataTypeContaineer1.Add(new CustomizedDataType(12, "Test12"));

        //Test Data
        List<CustomizedDataType> dataTypeContaineer2 = new List<CustomizedDataType>();
        dataTypeContaineer2.Add(new CustomizedDataType(100, "Test10"));
        dataTypeContaineer2.Add(new CustomizedDataType(11, "Test11"));
        dataTypeContaineer2.Add(new CustomizedDataType(12, "Test120"));

        //Checking if both the list contains the same types.
        if (dataTypeContaineer1.GetType() == dataTypeContaineer2.GetType())
        {
            //Checking if both the list contains the same count
            if (dataTypeContaineer1.Count == dataTypeContaineer2.Count)
            {
                //Checking if both the list contains the same data.
                for (int index = 0; index < dataTypeContaineer1.Count; index++)
                {
                    if(!dataTypeContaineer1[index].Equals(dataTypeContaineer2[index]))
                    {
                        Console.WriteLine("Mismatch @ Index {0}", index);
                    }
                }
            }
        }
    } 
```

输出 ：

![在此处输入图像描述](../Images/be09af76db877d0de532af51fd573262.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T03:02:04.603

假设您的意思是`List<T>`两者都有匹配`T`，您可以使用：

```
private static Boolean MatchingBaseType(IEnumerable a, IEnumerable b)
{
    return GetIListBaseType(a) == GetIListBaseType(b);
}

private static Type GetIListBaseType(IEnumerable a)
{
    foreach (Type interfaceType in a.GetType().GetInterfaces())
    {
        if (interfaceType.IsGenericType &&
            (interfaceType.GetGenericTypeDefinition() == typeof(IList<>) ||
             interfaceType.GetGenericTypeDefinition() == typeof(IEnumerable<>) ||
             interfaceType.GetGenericTypeDefinition() == typeof(ICollection<>))
        )
        {
            return interfaceType.GetGenericArguments()[0];
        }
    }
    return default(Type);
} 
```

您说计数无关紧要（尽管您正在检查`.Count()`--why？）但是如果两个列表具有相同的类型，则应该返回。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-17T02:34:53.607

You can use the C# keyword 'is' to see if an object is compatible with a given type. [http://msdn.microsoft.com/en-us/library/vstudio/scekt9xw.aspx](http://msdn.microsoft.com/en-us/library/vstudio/scekt9xw.aspx)

# javascript - jQuery触发基于输入的所有数字或只是字母的不同表单的提交

> ID：14917372
> 
> 赞同：0
> 
> 时间：2013-02-17T02:23:09.657
> 
> 标签：javascript, jquery, html, forms, submit

几个小时以来，我一直在尝试这样做。要么只有我的一种形式有效，要么根本没有。我无法获得表单功能或提交功能来做任何事情。它只是禁用整个事情并且不提交。任何帮助表示赞赏。

基本上我有两个表单，我想根据第一个表单的输入字段“s-webref”中的条目提交。

如果“s-webref”的输入全是数字，则提交第一个表单：“property-webref-search”。

如果没有，请提交第二个表格“property-search”。

我的第一个表格（位于顶部）：

```
 <form name="property-webref-search" id="property-webref-search" method="get" action="<?php bloginfo('url'); ?>/">

            <input type="text" class="text webref" id="s-webref" name="s" value="<?php _e('İlan no veya arama', 'woothemes'); ?>" onfocus="if (this.value == '<?php _e('İlan no veya arama', 'woothemes'); ?>') {this.value = '';}" onblur="if (this.value == '') {this.value = '<?php _e('İlan no veya arama', 'woothemes'); ?>';}" />

        <input type="submit" class="submit button" name="property-search-webref-submit" id="property-search-webref-submit" value="<?php _e('ara', 'woothemes'); ?>" /> 

        </form> 
```

我的第二种形式：

```
 <form name="property-search" id="property-search" method="get" action="<?php bloginfo('url'); ?>/">

        <input type="text" class="main-query text" id="s-main" name="s" value="<?php if ( $keyword != '' ) { echo $keyword; } else { _e('Arama...', 'woothemes'); } ?>" onFocus="if (this.value == '<?php _e('Arama...', 'woothemes') ?>') {this.value = '';}" onBlur="if (this.value == '') {this.value = '<?php _e('Arama...', 'woothemes') ?>';}" />
                <input class="view-button" type="submit" value="<?php _e('ara', 'woothemes') ?>" name="property-search-submit" />

        </form> 
```

这是我使用的 javascript，它使表单根本不起作用：

```
$('#property-search-webref-submit').click(function() {
var searcherz = $("input#s-webref").val();
if(searcherz.match(/^\d+$/)) {
$('form#property-webref-search').submit();
}
else {
$('form#property-search').submit();
}}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:29:48.937

表单始终在提交，因为您不会阻止提交按钮的默认操作：

```
$('#property-search-webref-submit').click(function(e) {
    e.preventDefault();
    var searcherz = $("#s-webref").val();
    if( /^\d+$/.test(searcherz) ) {
        $('#property-webref-search').get(0).submit();
    } else {
        $('#property-search').get(0).submit();
    }
}); 
```

# java - “无法创建...的通用数组” - 如何创建地图数组 ?

> ID：14917375
> 
> 赞同：43
> 
> 时间：2013-02-17T02:25:13.113
> 
> 标签：java, arrays, map, hashmap

我想使用 simpleJdbcInsert 类和 executeBatch 方法

```
public int[] executeBatch(Map<String,Object>[] batch) 
```

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcInsert.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcInsert.html)

所以我需要传递一个`Map<String,Object>`作为参数的数组。如何创建这样的数组？我尝试的是

```
Map<String, Object>[] myArray = new HashMap<String, Object>[10] 
```

这是错误：无法创建通用数组`Map<String, Object>`

A`List<Map<String, Object>>`会更容易，但我想我需要一个数组。那么如何创建一个数组`Map<String, Object>`呢？谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-17T02:56:51.363

由于 Java 中泛型的工作方式，您不能直接创建泛型类型的数组（例如`Map<String, Object>[]`）。`Map[]`相反，您创建一个原始类型 ( )的数组并将其转换为`Map<String, Object>[]`. 这将导致不可避免的（但可抑制的）编译器警告。

这应该可以满足您的需要：

```
Map<String, Object>[] myArray = (Map<String, Object>[]) new Map[10]; 
```

您可能想用 注释发生这种情况的方法`@SuppressWarnings("unchecked")`，以防止显示警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T12:36:17.590

您可以创建通用地图数组。

1.  创建地图列表。

    ```
    List<Map<String, ?>> myData = new ArrayList<Map<String, ?>>(); 
    ```

2.  初始化数组。

    ```
    Map<String,?>[] myDataArray = new HashMap[myData.size()]; 
    ```

3.  从列表中填充数组中的数据。

    ```
    myDataArray = myData.toArray(myDataArray); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T17:39:39.570

我在这方面遇到了一些困难，但我想出了一些我会尽可能简单地分享的东西。

我对泛型的经验仅限于集合，因此我在类定义中使用它们，例如：

```
public class CircularArray<E> { 
```

其中包含数据成员：

```
private E[] data; 
```

但是你不能创建和数组的泛型类型，所以它有方法：

```
@SuppressWarnings("unchecked")
private E[] newArray(int size)
{
    return (E[]) new Object[size];  //Create an array of Objects then cast it as E[]
} 
```

在构造函数中：

```
data = newArray(INITIAL_CAPACITY);  //Done for reusability 
```

这适用于泛型泛型，但我需要一个可以排序的列表：Comparables 列表。

```
public class SortedCircularArray<E extends Comparable<E>> { 
//any E that implements Comparable or extends a Comparable class 
```

其中包含数据成员：

```
private E[] data; 
```

但是我们的新类抛出 java.lang.ClassCastException：

```
@SuppressWarnings("unchecked")
private E[] newArray(int size)
{
    //Old: return (E[]) new Object[size];  //Create an array of Objects then cast it as E[]
    return (E[]) new Comparable[size];  //A comparable is an object, but the converse may not be
} 
```

在构造函数中一切都是一样的：

```
data = newArray(INITIAL_CAPACITY);  //Done for reusability 
```

我希望这会有所帮助，如果我犯了错误，我希望我们更有经验的用户能纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T10:25:24.057

来自[Oracle 教程](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays)[*原文如此*]：

> 您不能创建参数化类型的数组。例如，以下代码无法编译：
> 
> ```
> List<Integer>[] arrayOfLists = new List<Integer>[2];  // compile-time error 
> ```
> 
> 以下代码说明了将不同类型插入数组时会发生什么：
> 
> ```
> Object[] strings = new String[2];
> strings[0] = "hi";   // OK
> strings[1] = 100;    // An ArrayStoreException is thrown. 
> ```
> 
> 如果您使用通用列表尝试相同的操作，则会出现问题：
> 
> ```
> Object[] stringLists = new List<String>[];  // compiler error, but pretend it's allowed
> stringLists[0] = new ArrayList<String>();   // OK
> stringLists[1] = new ArrayList<Integer>();  // An ArrayStoreException should be thrown,
>                                             // but the runtime can't detect it. 
> ```
> 
> 如果允许参数化列表的数组，则前面的代码将无法抛出所需的 ArrayStoreException。

对我来说，这听起来很弱。我认为任何对泛型有足够了解的程序员都会很好，甚至期望在这种情况下不会抛出 ArrayStoredException。

更重要的是，大多数程序员只会这样做：

```
List<Integer> arrayOfLists = (List<Integer>) new List[2]; 
```

这将使它们处于完全相同的风险中，即未抛出 ArrayStoreException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-17T07:41:09.030

据我所知

首先尝试创建一个 java.lang.Object 数组，然后转换为通用类型 T

例子：

```
class Example<DataType>{
    public DataType array = (DataType[]) new Object[5] ; 
} 
```

这样，您可以创建一个泛型数据类型的数组

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-31T01:08:47.813

```
@SuppressWarnings("unchecked")
private Map<String,?>[] newArray(int n) {
  return new Map[n];
} 
```

与 a 一起`Stream`使用`Map<String,?>`：

```
 sql.executeBatch(myStream.toArray(this::newArray)); 
```

与 a 一起`List`使用`Map<String,?>`：

```
 sql.executeBatch(myList.toArray(newArray(0)); 
```

注意：JDK src 中积极使用了 SuppressWarnings 技巧 - [https://github.com/AdoptOpenJDK/openjdk-jdk14/blob/master/src/java.base/share/classes/java/util/ArrayList.java#L395： L404](https://github.com/AdoptOpenJDK/openjdk-jdk14/blob/master/src/java.base/share/classes/java/util/ArrayList.java#L395:L404)

致谢：@JonathanCallen

# sql - 在 Visual Basic 中使用数据集查询 2 个表

> ID：14917386
> 
> 赞同：1
> 
> 时间：2013-02-17T02:27:10.917
> 
> 标签：sql, vb.net, dataset

我的 Visual Basic 项目需要帮助。我有一个包含 2 个表、客户和订单的 Store.accdb 数据库。我希望能够在文本框中输入客户的姓名（或姓名的一部分），然后在单击搜索按钮时在 DataGridView 中显示姓名。然后在单独的 DataGridView 上，当用户单击“显示”按钮时，我想从我的第一个 DataGridView 显示所选客户的订单。

编辑：这就是两张桌子的样子

客户表 = custNum、custName、custAddress、custPhone

订单表 = orderNum、orderItem、custNum、价格、数量

```
con.ConnectionString = dbProvider & dbSource

    Try
        con.Open()
        sql = "SELECT custName FROM tblCustomers WHERE custName LIKE '%" & tbSearch.Text.ToUpper & "%'"
        ds = New DataSet
        da = New OleDb.OleDbDataAdapter(sql, con)
        da.Fill(ds, "CustomerDataset")
        gridCustomers.DataSource = ds
        gridCustomers.DataMember = "CustomerDataSet"

        con.Close()

    Catch ex As Exception
        MessageBox.Show("Could not establish a connection", "Database Error")
    End Try 
```

此代码工作正常，它填充了我的客户 datagridview。每当我只输入客户姓名的一部分时，我就会得到多行。如果我在文本框中输入“sm”，它将显示所有名称中带有“sm”的客户。当我单击显示按钮时，如何在我的第二个 datagridview 中显示所选客户（来自第一个 datagridview）的订单？我希望我说得通，英语不是我的第一语言，所以请多多包涵。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:56:28.143

其实，你只需要在两个表之间定义一个“外键”，你可以看这篇文章知道如何：

[www.codeproject.com/Articles/28273/Xml-Database-Demo](http://www.codeproject.com/Articles/28273/Xml-Database-Demo)

阅读“**添加数据表关系**”部分。

如果您使用 Access 制作了您的数据库，那么您必须做同样的事情。如果你使用 SQL，同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:41:21.490

您必须参加许多活动。从您那里选择客户时`datagridview`必须使用`datagridview's selectedIndexChange`事件（假设您有选择按钮`datagridview`）
您必须在`datagridview's selectedIndexChange`事件中使用相同的程序

```
con.ConnectionString = dbProvider & dbSource

Try
    con.Open()
    sql = "SELECT * FROM tblorders WHERE custName ='" & gridSelectedValue & "'"
    //Assuming you have custName column in order table
    ds = New DataSet
    da = New OleDb.OleDbDataAdapter(sql, con)
    da.Fill(ds, "OrderDataset")
    gridCustomers.DataSource = ds
    gridCustomers.DataMember = "OrderDataset"

    con.Close()

Catch ex As Exception
    MessageBox.Show(ex.message)
End Try 
```

**编辑**
如果您没有按顺序使用 custName，**那么**您应该在 DataGridView 的查询中使用 CustNum。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:48:01.877

第 1 步 - 更改有效的查询。不要只选择客户名称，而是选择客户 ID 或该表的主键。

第 2 步 - 显示您的数据时，添加一个带有查询字符串的锚标记，该查询字符串链接到显示订单的新页面。html 应如下所示：

```
<a href="orders.aspx?customer_id=1">Fred</a> 
```

在 orders.aspx 中，调用一个查询，返回 customer_id = 1 的所有订单。

哦，是的，顺便说一句，在将所有表单和 url 变量发送到数据库之前，将它们转换为参数。

# python - 未找到 Vim Omnicomplete 模式 (Python)

> ID：14917388
> 
> 赞同：1
> 
> 时间：2013-02-17T02:27:29.273
> 
> 标签：python, vim, omnicomplete

我读到，omnicompletion 应该“开箱即用”，但事实并非如此，我想知道我做错了什么。

我编译了最新版本的vim，它显示“+python”：

```
user$ vim --version
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Feb 16 2013 11:22:56)
MacOS X (unix) version
Compiled by user@computer.local
Normal version without GUI.  Features included (+) or not (-):
-arabic +autocmd -balloon_eval -browse +builtin_terms +byte_offset +cindent 
-clientserver +clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
-conceal +cryptv -cscope +cursorbind +cursorshape +dialog_con +diff +digraphs 
-dnd -ebcdic -emacs_tags +eval +ex_extra +extra_search -farsi +file_in_path 
+find_in_path +float +folding -footer +fork() -gettext -hangul_input -iconv 
+insert_expand +jumplist -keymap -langmap +libcall +linebreak +lispindent 
+listcmds +localmap -lua +menu +mksession +modify_fname +mouse -mouseshape 
-mouse_dec -mouse_gpm -mouse_jsbterm -mouse_netterm -mouse_sysmouse 
+mouse_xterm -multi_byte +multi_lang -mzscheme +netbeans_intg -osfiletype 
+path_extra -perl +persistent_undo +postscript +printer -profile +python 
-python3 +quickfix +reltime -rightleft -ruby +scrollbind +signs +smartindent 
-sniff +startuptime +statusline -sun_workshop +syntax +tag_binary 
+tag_old_static -tag_any_white -tcl +terminfo +termresponse +textobjects +title
 -toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo 
+vreplace +wildignore +wildmenu +windows +writebackup -X11 -xfontset -xim -xsmp
 -xterm_clipboard -xterm_save 
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  fall-back for $VIM: "/Users/user/Software/vim/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H   -DMACOS_X_UNIX -no-cpp-precomp  -g -O2 -D_FORTIFY_SOURCE=1      
Linking: gcc   -L/usr/local/lib -o vim       -lm -lncurses  -framework Cocoa     -framework Python 
```

我清除了我的 .vimrc 以离开：

```
" Automatic reloading of .vimrc
autocmd! bufwritepost .vimrc source %

filetype plugin on 
```

我的 ~/.vim/ 目录只是

```
autoload/pythoncomplete.vim 
```

我从[http://www.vim.org/scripts/script.php?script_id=1542下载的](http://www.vim.org/scripts/script.php?script_id=1542)

并且以下命令返回：

```
:echo &omnifunc
pythoncomplete#Complete 
```

这似乎很好。但每次我对以下 test.py 文件执行 control-xo 时：

```
#! /usr/bin/env python
import numpy
numpy.r 
```

在输入“num”或“numpy.r”后我得到

```
Omni completion (^O^N^P) Pattern not found 
```

我的安装有问题吗？任何想法都非常感谢。谢谢你。

**编辑**：根据 TankorSmash 关于安装 python 模式的建议，我可以让“num”完成到“numpy”，但不能让“numpy.r”完成任何事情。

这是我的新 .vimrc 文件：

```
" Automatic reloading of .vimrc
autocmd! bufwritepost .vimrc source %

" Pathogen load
filetype off

call pathogen#infect()
call pathogen#helptags()

filetype plugin indent on
syntax on 
```

和我的 .vim 目录树：

```
.vim
    autoload
        pathogen.vim
        pythoncomplete.vim
    bundle
        python-mode 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:19:07.360

您*不需要*任何第三方完成脚本即可完成 Python。

我没有（我唯一拥有的特定于 Python 的脚本是一个简短的 ftplugin），这些是我在点击`<C-x><C-o>`之后得到`numpy.`的建议`numpy.arc`......</p>

![麻木的。](../Images/6ff52969a6222fa3e3804c3abc4794d8.png)

![numpy.arc](../Images/1197f9164ceb9949c5785577aa02b824.png)

由于您似乎使用的是 Mac OS X，因此您*真的*不应该自己编译 Vim。安装最新的 MacVim 快照是在 Mac 上运行 Vim 的最佳方式，我相当肯定你会得到与在这台 Linux 机器上开箱即用的相同的建议。

***编辑***

我刚刚在我妻子的裸机 iMac（python 2.5）上的旧 MacVim（快照 53）上测试了相同的代码，我得到了或多或少相同的建议（485 vs 551）。

# php - 从php中的文件名获取完整路径

> ID：14917390
> 
> 赞同：-2
> 
> 时间：2013-02-17T02:27:38.557
> 
> 标签：php, filenames, filepath

所以我有一个包含 &title=blabla 的 URL

我知道如何提取标题并返回它。但是当我只有文件名时，我一直在寻找文件名的完整路径。

所以我必须有一种方法来在所有目录中搜索一个名为'blabla'的html文件，而它唯一的东西就是blabla。找到它后，它必须返回完整路径。

谁有我的解决方案？

```
<?php

$file = $_GET['title'];

if ($title = '') {
echo "information.html";
} else { 
//here it must search for the filepath and echo it.
echo "$filepath";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:32:15.520

```
$root = '/';               // directory from where to start search
$toSearch = 'file.blah';   // basename of the file you wish to search

$it = new RecursiveDirectoryIterator($root);
foreach(new RecursiveIteratorIterator($it) as $file){
  if($file->getBasename() === $toSearch){
    printf("Found it! It's %s", $file->getRealPath());

    // stop at the first match
    break;
  }
} 
```

请记住，根据您拥有的文件数量，这可能会非常慢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:35:42.333

您可以使用[此处](https://stackoverflow.com/questions/3826963/php-list-all-files-in-directory)提供的解决方案。

它允许您通过目录递归并列出目录和子目录中的所有文件。然后，您可以比较它是否与您要查找的文件匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T02:40:59.607

首先，这条线路有问题

```
if ($title = '') { 
```

见[http://www.php.net/manual/en/reserved.variables.files.php](http://www.php.net/manual/en/reserved.variables.files.php)

# sql - SQL 查询帮助需要在表中加入

> ID：14917394
> 
> 赞同：1
> 
> 时间：2013-02-17T02:28:56.850
> 
> 标签：sql

我有一个名为的表`babynames`，看起来像这样：

```
firstname |sex |year |count 
Bob |M| 2010| 150
Bob |M| 2009| 100
Bob |M| 2008| 122
Bob |F| 2007| 2
Bob |F| 2001| 1 
```

我想要做的是获取所有女性和男性婴儿姓名的列表，因此我的查询需要提取表中至少有两条记录并且至少有一个 M 和一个 F 的所有名字记录。

时间不早了，今晚我的脑子不太好。谁能建议一个可以帮助我完成这项任务的字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T02:33:42.390

有几种方法可以处理这个问题。一种是`COUNT(DISTINCT sex) = 2`在`HAVING`子句中使用 a 。一定要`GROUP BY firstname`。

```
SELECT 
  firstname
FROM babynames
GROUP BY firstname
HAVING COUNT(DISTINCT sex) = 2 
```

这是一个演示：[http ://sqlfiddle.com/#!2/5d221/1](http://sqlfiddle.com/#!2/5d221/1)

另一个将`INNER JOIN`针对同一张表的 2 个别名，其中一个查找`M`而另一个查找`F`. 如果两个条件都不匹配名称，则无法进行连接，并将从输出中排除。

```
SELECT
  DISTINCT
  m.firstname
FROM
  babynames f
  INNER JOIN babynames m ON f.firstname = m.firstname
WHERE
  f.sex = 'F'
  AND m.sex = 'M' 
```

[http://sqlfiddle.com/#!2/5d221/3](http://sqlfiddle.com/#!2/5d221/3)

# javascript - 是否有针对 Javascript 的文本 API 的自由言论？

> ID：14917396
> 
> 赞同：5
> 
> 时间：2013-02-17T02:29:18.083
> 
> 标签：javascript, text, speech, speech-to-text

我想创建一个使用语音到文本功能的 Web 界面。有谁知道任何可以用 Javascript 编写的文本 api 语音？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T02:54:22.527

有一个非常新的 HTML5 API，虽然 chrome 是唯一支持它的浏览器，但它是 HTML5 的内置功能，它仍然很棒而且准确。我不使用它，但您可以在此处了解更多信息：http: [//updates.html5rocks.com/2013/01/Voice-Driven-Web-Apps-Introduction-to-the-Web-Speech-API](http://updates.html5rocks.com/2013/01/Voice-Driven-Web-Apps-Introduction-to-the-Web-Speech-API)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T02:39:39.337

There are certainly APIs available that allow you to use JavaScript in conjunction with them: [http://speechapi.com/apis/javascript/](http://speechapi.com/apis/javascript/)

# github - 从 github 获取分支的完整副本

> ID：14917398
> 
> 赞同：0
> 
> 时间：2013-02-17T02:29:28.710
> 
> 标签：github, branch

我正在使用的存储库有一个名为`next`. 当我最初克隆存储库时，它将我的默认分支设置为`master`. 我已经将我的默认分支切换到`next`在线，并且我已经在我的本地克隆上签出了`next`分支（使用`-t`和选项）。`-b`键入`git branch`显示我有两个分支已检出（`master`和`next`），并且`next`是活动分支。

一切都很好，花花公子，但是分支中存在的文件不存在于`master`. 我曾假设当我获取上游并签出新分支时，丢失的文件会出现在我的本地仓库中......但是，他们没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:20:39.813

您可以尝试运行：

```
git reset --hard HEAD 
```

如果您没有任何本地更改（这会被破坏）。

# php - 将 Meteor 与另一种编程语言一起使用

> ID：14917399
> 
> 赞同：0
> 
> 时间：2013-02-17T02:29:37.743
> 
> 标签：php, javascript, asp.net, meteor

我在一个新项目上工作，并且 using`Meteor`对我的项目很有帮助，但是如果我可以在`Meteor`And之间混合使用，我有点困惑`ASP.net or PHP`。
我的想法是`ASP.net Or PHP`用于后端办公室（会员页面，管理页面......）和`Meteor`我的主页（它有投票系统，发布新主题......），我认为这`Meteor`可以完美地处理这些操作。
所以我的问题是这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:05:00.363

Meteor 在后台使用 NodeJS，它是一个服务器端 javascript 运行时。这意味着后端和前端由流星服务器和两者提供。您可以通过 http 对其他 PHP 或 ASP 服务器进行网络调用，但您不需要混合使用这些语言。

流星原则之一是：“一种语言。用 JavaScript 编写界面的客户端和服务器部分。” （[http://docs.meteor.com/#sevenprinciples](http://docs.meteor.com/#sevenprinciples)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T13:35:38.667

虽然 Meteor 的原则之一是“一种语言。用 JavaScript 编写界面的客户端和服务器部分。”，迁移到全 JavaScript 解决方案可能不适用于所有情况。

好消息是 Meteor 使用称为 DDP 的底层协议来管理用于使客户端集合保持最新的发布/订阅模式所需的通信。

我希望该协议最终将以所有主要语言实现，这意味着您可以在服务器端使用您选择的语言，并在客户端使用 javasScript 和 Meteor。

因此，要回答您的问题，是的，可以做到。做一个快速的谷歌搜索，我设法找到了[https://github.com/sonyarouje/DDPClient.NET](https://github.com/sonyarouje/DDPClient.NET)

如果这不能完全按照您的要求工作，您可以随时用任何语言自己实现协议。用 Meteor 团队的话来说

> 我们很乐意看到用于 Objective C、Java、Ruby、Python、PHP 等的 DDP 客户端。

以下是您可能感兴趣的其他一些链接：

*   [http://meteor.com/get-involved](http://meteor.com/get-involved)
*   [http://rubygems.org/gems/ruby-ddp-client](http://rubygems.org/gems/ruby-ddp-client)

# android - 添加或删除数据成员时，FragmentPagerAdapter 不会更新视图位置

> ID：14917402
> 
> 赞同：1
> 
> 时间：2013-02-17T02:29:52.743
> 
> 标签：android, android-fragments

首次制作 FragmentPagerAdapter 时，一切都很好。但是，当在适配器的某个位置添加或删除数据时，视图会停留在它们所在的位置。

[这是](http://www.youtube.com/watch?v=NpNcIt_WnSw)在我的 WIP 应用程序中演示该问题的视频，[这是我的应用程序的 APK](http://ge.tt/9jYfwuY/v/0)，您可以使用它来重现该问题。我的完整代码可以在我的[GitHub 项目](https://github.com/Gawdl3y/task-timer/tree/master/android)中查看。

这是我的适配器代码（也可[在此处](https://github.com/Gawdl3y/task-timer/blob/master/android/src/com/gawdl3y/android/tasktimer/adapters/TaskListFragmentAdapter.java)获得）：

```
public class TaskListFragmentAdapter extends FragmentPagerAdapter {
    private static final String TAG = "TaskListFragmentAdapter";

    public ArrayList<Group> groups;

    /**
     * Fill constructor
     * @param fm The FragmentManager to use
     * @param groups The groups to display
     */
    public TaskListFragmentAdapter(FragmentManager fm, ArrayList<Group> groups) {
        super(fm);
        this.groups = groups;
    }

    /* (non-Javadoc)
     * Gets the fragment at position
     * @see android.support.v4.app.FragmentPagerAdapter#getItem(int)
     */
    @Override
    public TaskListFragment getItem(int position) {
        Log.v(TAG, "Getting item " + position);
        return TaskListFragment.newInstance(groups.get(position));
    }

    /* (non-Javadoc)
     * Gets the position of a fragment
     * @see android.support.v4.view.PagerAdapter#getItemPosition(java.lang.Object)
     */
    @Override
    public int getItemPosition(Object o) {
        TaskListFragment item = (TaskListFragment) o;
        int position = groups.indexOf(item.group);

        if(position >= 0) {
            Log.v(TAG, "Item found at index " + position + ": " + item.group.toString());
            return position;
        } else {
            Log.v(TAG, "Item not found");
            return POSITION_NONE;
        }
    }

    /* (non-Javadoc)
     * Gets the count of fragments
     * @see android.support.v4.view.PagerAdapter#getCount()
     */
    @Override
    public int getCount() {
        return groups.size();
    }

    /* (non-Javadoc)
     * Gets the title of a fragment
     * @see android.support.v4.view.PagerAdapter#getPageTitle(int)
     */
    @Override
    public CharSequence getPageTitle(int position) {
        return groups.get(position).getName();
    }
} 
```

我更改数据的方式很简单；我`groups`在活动中有一个 ArrayList，它使用`groups.add(position, item)`. 活动然后简单地做：

```
adapter.groups = groups;
adapter.notifyDataSetChanged(); 
```

**更新：**

我稍微修改了我的代码，并为组添加了适当的 .equals() 方法，结果发生了一些变化。 `getItemPosition`当我在开头插入一个组时，现在被调用了两次（对于位置 1 和 2），并且最后两个组视图似乎正在正确更新。但是，添加的那个和原来的第一个仍然没有更新。我已经更新[了 APK](http://ge.tt/9jYfwuY/v/0)。

以下是在开头插入组并更改数据集时适配器的完整输出：

```
V/TaskListFragmentAdapter(3597): Item found at index 1: com.gawdl3y.android.tasktimer.classes.Group@b3336038
V/TaskListFragmentAdapter(3597): Item found at index 2: com.gawdl3y.android.tasktimer.classes.Group@b330f330 
```

就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:47:06.550

我终于解决了这个问题。我最终做的是`FragmentPagerAdapter`从`FragmentStatePagerAdapter`. 我的生成代码可以在我的[GitHub 项目](https://github.com/Gawdl3y/task-timer/tree/master/android/src/com/gawdl3y/android/tasktimer/adapters)中看到。相关文件是[TaskListFragmentAdapter.java](https://github.com/Gawdl3y/task-timer/blob/master/android/src/com/gawdl3y/android/tasktimer/adapters/TaskListFragmentAdapter.java)和[NewFragmentStatePagerAdapter.java](https://github.com/Gawdl3y/task-timer/blob/master/android/src/com/gawdl3y/android/tasktimer/adapters/NewFragmentStatePagerAdapter.java)。这个自定义版本是由 UgglyNoodle[在这里](http://code.google.com/p/android/issues/detail?id=37990)创建的，我自己进行了修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:52:09.410

我刚刚查看了您的资源，我认为问题在于您应该在添加新组后刷新任务中的组。假设您有 3 个小组，第一个小组有一些任务（例如视频）。现在您要在第一个组之前添加一个组，以便它进入列表的位置 0。现在您有 4 个组，并且您的任务仍然将组字段设置为 0，因为它们在您添加新组之前位于 0 组并且您没有刷新它。因此，即使 ViewPager 正在重新创建您的片段，您的任务也不是您想要的。

所以我认为当你添加一个新组并调用 reorder(groups) 时，你应该创建一个方法来刷新所有任务的 task.group 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T05:59:24.257

根据我对您的问题的理解，以及对您来源的简要阅读，我认为问题在于您只是在`notifyDataSetChanged()`呼吁`FragmentPagerAdapter`。但是，您还需要通知您`ViewPager`有关数据集中的此更改。

如果您愿意尝试[ViewPager Indicator 库](http://viewpagerindicator.com/)，您也可以调用`notifyDataSetChanged()`该**指标**。如果没有，我建议你查看`TabPageIndicator`这个库中的代码，看看它是如何达到你想要的效果的。

# c++ - 如何粗略计算和打印clock_t时间

> ID：14917405
> 
> 赞同：1
> 
> 时间：2013-02-17T02:31:05.787
> 
> 标签：c++, clock, ctime, cpu-speed

我正在计时执行三种不同类型的搜索（顺序、递归二进制和迭代二进制）需要多长时间。我有这些，它确实会迭代并完成搜索。我的问题是，当我对它们全部计时时，我每次都得到 0，即使我创建了一个 100,000 的数组，并且我让它搜索不在数组中的东西。如果我在搜索中设置一个断点，它显然会使时间变长，并且它给了我一个可以使用的合理时间。但否则它总是 0。这是我的代码，所有三个搜索计时器都是相似的。

```
 clock_t recStart = clock();
 mySearch.recursiveSearch(SEARCH_INT);
 clock_t recEnd = clock();
 clock_t recDiff = recEnd - recStart;
 double recClockTime = (double)recDiff/(double)CLOCKS_PER_SEC;
 cout << recClockTime << endl;

 cout << CLOCKS_PER_SEC << endl;

 cout << recClockTime << endl; 
```

对于最后两个，我得到`1000`和`0`。

我在这里做错了吗？还是在我的搜索对象中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:33:54.660

`clock()`不是一个准确的计时器，它只是不能很好地计时短时间间隔。

C 表示时钟*返回实现对程序使用的处理器时间的最佳近似，因为实现定义的时代开始仅与程序调用相关。*

如果在两个连续的时钟调用之间你的程序花费的时间少于时钟函数的一个单位，你可以得到 0。POSIX`clock`用`CLOCKS_PER_SEC`as定义单位`1000000`（单位是 1 微秒）。

（[http://pubs.opengroup.org/onlinepubs/009604499/functions/clock.html](http://pubs.opengroup.org/onlinepubs/009604499/functions/clock.html)）

要测量 x86/x64 中的时钟周期，您可以使用汇编来检索 CPU 时间戳计数器寄存器的时钟计数`rdtsc`。（可以通过内联汇编来实现？）请注意，它返回的是时间戳，而不是经过的秒数。因此，您还需要检索 cpu 频率。

但是，以秒为单位获得准确时间的最佳方法取决于您的平台。

* * *

综上所述，要*精确*`clock_t`到秒计算和打印时间几乎是不可能的。您可能希望在 Stackoverflow 上看到[这一点](https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter)，以找到更好的方法（如果准确性是重中之重）。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T03:55:39.687

`clock()`只是没有足够的分辨率-这是关于该主题的一个很好的讨论/博客 [http://www.guyrutenberg.com/2007/09/10/resolution-problems-in-clock/](http://www.guyrutenberg.com/2007/09/10/resolution-problems-in-clock/)

我认为两个选项要么使用`clock_gettime`甚至更好，您是否考虑过使用[OProfile](http://oprofile.sourceforge.net/news/)或[CodeAnalyst](http://developer.amd.com/tools/heterogeneous-computing/amd-codeanalyst-performance-analyzer/)？

我个人更喜欢使用工具——OProfile 很好。我之前没有使用过 CodeAnalyst - 然后是 Valgrind 和 gprof。

如果您坚持使用`clock_gettime`- 请查看 [http://www.guyrutenberg.com/2007/09/22/profiling-code-using-clock_gettime/](http://www.guyrutenberg.com/2007/09/22/profiling-code-using-clock_gettime/)*

# c++ - 使用 v8 的共享库与静态链接的 v8 不兼容？

> ID：14917406
> 
> 赞同：1
> 
> 时间：2013-02-17T02:31:44.220
> 
> 标签：c++, shared-libraries, v8, static-linking, chromium-embedded

以下是真正问题的一些背景故事：

我正在使用[Chromium Embedded Framework](http://code.google.com/p/chromiumembedded/) (CEF) 和[v8](https://code.google.com/p/v8/)开发一个项目，以提供与在嵌入式浏览器中运行的 JavaScript 的原生 C++ 函数绑定。

具体来说，我正在尝试做的是`v8::ObjectTemplate`在加载任何页面或上下文之前构造 a ，然后在 CEF 的`OnContextCreated`回调中，创建该模板的新实例并将其作为属性添加到全局`window`对象上。

问题是 CEF 的 API 包装了 v8 上下文和值，为您提供了一个（智能）指向接口的指针，完全隐藏了它在幕后使用 v8 的事实。由于 CEF 施加的限制，如果我使用 CEF 的包装器，项目会变得更加混乱，所以我宁愿让 v8 工作。`OnContextCreated`这是我实现 CEF回调的精简版：

```
void ContextHandler::OnContextCreated(
  CefRefPtr<CefBrowser> browser,
  CefRefPtr<CefFrame> frame,
  CefRefPtr<CefV8Context> context)
{
  context->Enter();

  v8::HandleScope scope;
  v8::Handle<v8::Context> v8context = v8::Context::GetCurrent();
  v8::Handle<v8::Object> window = v8context->Global();
  // _appObj is a v8::Handle<v8::ObjectTemplate> member of ContextHandler
  window->Set(v8::String::New("app"), _appObj->NewInstance());

  context->Exit();
} 
```

现在，请注意，虽然 CEF 在幕后使用 v8，但它并没有通过其 API 公开它。因此，检索上下文的 v8 版本的唯一方法是使用`v8::Context::GetCurrent()`，理论上它应该返回`v8::Context`被 包裹的内容`CefV8Context`。

另请注意，为了编译它，我需​​要编译并链接一个*单独*的v8（静态）库，再次因为 CEF 不通过其（动态）库公开 v8。

**所以这里的问题是**：

在运行项目并调用 时，它会在 v8 库中的某处发生错误`v8::Context::GetCurrent()`并崩溃。`EXC_BAD_ACCESS`经过进一步研究，我已经确认根据 CEF 的 API，我们*在*调用 后处于上下文中`context->Enter()`，但根据 v8 的 API，我们*不在*上下文中，这解释了错误。

从我对 C/C++ 库的极其有限的经验来看，这似乎意味着 CEF 的 v8 代码和我的 v8 代码在不同的内存空间中运行。v8 是静态库，CEF 是动态库，对它有影响吗？

我想知道为什么会发生这种情况，我能做些什么来解决这个问题或解决这个问题？

PS：我正在使用 C++11 构建它，并通过 XCode 在 Mac OS X 上发出叮当声，但这个问题也困扰着 Windows 上的 VS2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T20:40:01.883

要访问 CEF 使用的 V8 VM，您必须自己构建 CEF。libcef.dll 只是“真实”libcef 的 C++ 到 C 到 C++ 代理，它是一个静态库。当您自己编译 CEF 时，您可以更改程序以链接到该静态库而不是 DLL 的导入库。

通过这样做，您现在需要链接到 DLL 必须链接到的所有相同的静态库。这包括 V8。现在，这将允许直接访问 CEF 正在使用的同一 V8。它还删除了 CEF DLL 用于与实际 CEF 代码交互的 C++ 到 C 到 C++ 的转换代码。这也将让您在需要或需要时直接访问 WebCore/WebKit、Chromium、V8 以及它们使用的任何其他库。

参考 CEF 的构建说明：[https ://code.google.com/p/chromiumembedded/wiki/BranchesAndBuilding](https://code.google.com/p/chromiumembedded/wiki/BranchesAndBuilding)

构建后，您要为 CEF 链接的库是 libcef_static.lib。

# regex - Haskell 和正则表达式 - 为什么我的功能消除冗余空间不起作用？

> ID：14917407
> 
> 赞同：3
> 
> 时间：2013-02-17T02:32:06.160
> 
> 标签：regex, haskell

Haskell 和正则表达式 - 为什么我的功能消除冗余空间不起作用？

```
import Text.Regex
eliminateRedundantSpaces text =
 subRegex (mkRegex "\\s+") text " " 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T03:00:44.157

`Text.Regex`使用[Posix 正则表达式](http://en.wikipedia.org/wiki/Regular_expression#POSIX_Basic_Regular_Expressions)，并且没有`\s`定义缩写（这是许多其他实现采用的 perl 扩展）。相反，您可以使用`[:space:]`字符组，例如：

```
eliminateRedundantSpaces text =
   subRegex (mkRegex "[[:space:]]+") text " " 
```

# actionscript-3 - 阅读PDF，字符问题

> ID：14917411
> 
> 赞同：3
> 
> 时间：2013-02-17T02:33:14.040
> 
> 标签：actionscript-3, flash, actionscript, bytearray, purepdf

我正在尝试使用 PurePDF 在 PDF 文件中收集一些信息，但无法让 PurePDF 读取它。

每当 PurePDF 尝试读取任何 pdf 时，它都会说找不到它的标题，我尝试调试它并注意到从 bytearray 读取的字符串以日语字符的形式出现！在将我的 pdf 字节数组传递给 PurePDF 之前，我曾尝试更改它的字节序，但没有改变任何东西。

pdf文件没问题，因为每当我将它作为文本打开时，我都可以看到“%PDF-”标题，但由于某种原因，actionscript 得到了错误的字符码，所以 PurePDF 根本无法工作。

有任何想法吗？

谢谢。

* * *

更新：我不是字节数组专家，但我决定对其进行操作并通过调试器跟踪代码执行，发现它正在使用 readInt() 来获取字符，我只是将它重写为 readByte() 现在它正在阅读PDF！我仍然要看看这些功能是否会起作用......任何更喜欢低级编程的人都可以解释一下可能发生的事情吗？我不认为这个项目在 svn 中被破坏了

这是我一直在使用的代码，我认为它非常简单：

```
private function loadPdf():void
    {
        var loader:URLLoader=new URLLoader();
        loader.dataFormat=URLLoaderDataFormat.BINARY;
        loader.addEventListener(Event.COMPLETE, onLoadComplete);
        loader.load(new URLRequest(PDF_FILE));
    }

protected function onLoadComplete(event:Event):void
    {
        var data:ByteArray = URLLoader(event.target).data as ByteArray;
        pdfReader = new PdfReader(data);
        pdfReader.readPdf();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:57:28.360

我以前没有使用过 PurePDF，但我使用过 bytearray 从文件中提取信息。你到底想从这个 pdf 中得到什么？你想只提取文本吗？你也可以上传PDF的链接吗？如果我们看的是同一件事，会更容易提供帮助。

关于日文文本...当您阅读 bytearray 中的 PDF 时，不要期望很容易找到人类可读的文本，因为大部分数据用于设置文件结构等。PDF 中的实际文本和图片放置在名为流。所以通常你会找到一个文本流并将其提取到你的字节数组中。要正确显示文本，请使用 PDF 数据中提到的解码器类型（UTF-8、UTF-16 等）。

下面的这个链接更好地解释了 PDF 流：（“/Length”成为您的字节数组长度，“Filter”告诉您解码类型（字符集类型，例如 ASCII）等）

[http://blog.didierstevens.com/2008/05/19/pdf-stream-objects/](http://blog.didierstevens.com/2008/05/19/pdf-stream-objects/)

无论如何，如果你在十六进制编辑器中打开你的 PDF，这一切都是有意义的。如果需要，请尝试以下一种。现在您可以看到您的流位置在哪里，并告诉 AS3 从那里提取：

[http://www.hhdsoftware.com/free-hex-editor](http://www.hhdsoftware.com/free-hex-editor)

如果仍然存在问题，请将您的 PDF 上传到某处，并准确说明您要从文档中提取的内容。我会尽力为此提供确切的帮助（没有承诺，只是想提供帮助）..和平。

# javascript - 为什么我的数组 json 是空的？

> ID：14917412
> 
> 赞同：0
> 
> 时间：2013-02-17T02:33:16.063
> 
> 标签：javascript, jquery, arrays, json

我有下一个加载文件 json 的代码，并创建一个名为 questions 的数组。
如果我在 getArray 函数中执行 console.log(JSON.stringify(questions)) 它可以正常工作，但是如果我在外部执行相同的函数它不起作用，我尝试使用
alert(JSON.stringify(questions)) 和alert(questions.length) 它返回 [] 和 0，我的错误在哪里？

```
var questions = [];
function getArray(){
    $.getJSON('questions.json', function (json) {
        for (var key in json) {
            if (json.hasOwnProperty(key)) {
                var item = json[key]; 
                questions.push({
                    Category: item.Category
                });
            }
        }
        //console.log(JSON.stringify(questions)); //it works
           return questions;
    });
}
$(document).ready(function(){
getArray();
});

alert(JSON.stringify(questions)) //return []
alert(questions.length) //return 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:37:11.693

你不能使用`return`，因为它是异步的：

```
var callback = function(questions) {
    // Do something with questions here.
    alert(questions.length);
}

var questions = [];
function getArray(){
    $.getJSON('questions.json', function (json) {
        for (var key in json) {
            if (json.hasOwnProperty(key)) {
                var item = json[key]; 
                questions.push({
                    Category: item.Category
                });
            }
        }
        callback(questions);
    });
}
$(document).ready(function(){
getArray();
}); 
```

# php - 如何从迷宫中收集结果

> ID：14917415
> 
> 赞同：0
> 
> 时间：2013-02-17T02:33:39.673
> 
> 标签：php, javascript, html, mysql

我已经构建了一个 javascript 迷宫游戏，在不同的页面上有不同的级别。我有一个脚本可以计算用户完成关卡所需的秒数，并将其存储在变量中。我想收集所有级别的时间，最后将结果存储在 MySQL 数据库中。然后，我希望它能够显示结果，我知道该怎么做。一次将所有数据发送到数据库的实用且有效的方法是什么？

我的迷宫位于[http://thomaswd.com/maze](http://thomaswd.com/maze)。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:47:45.777

好吧，您可以使用 POST 方法在转到另一个页面时保留某种信息，并随意使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:41:40.427

jQuery .post() 可能带有 JSON 编码的数据怎么样？

# c# - 无法修改 MVC 4 内置登录控制器

> ID：14917418
> 
> 赞同：2
> 
> 时间：2013-02-17T02:34:08.560
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在使用 mvc4 应用程序内置的帐户注册和登录控制器（及其各自的模型）。我有自己的删除帐户的方法。所以我想在标准登录控制器中进行检查，以便它检查我是否自己删除了该帐户，然后将该人重定向到一个信息页面。

但是，当控制器被调用时，它只会传递我的代码行并仍然让用户登录。我已经检查了数据库。用户将 0 设置为其 IsActive（将帐户列为“活动”和“非活动”）值，应该被重定向。但他只是像我的代码行不存在一样登录......

这是控制器中的代码：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model, string returnUrl)
{
 if (WorkerDAL.IsActive(model.UserName)) RedirectToAction("DisplayDeletedUserMessage", "Home");    //my redirect code

 if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
         {
                    return RedirectToLocal(returnUrl);
         }

     // If we got this far, something failed, redisplay form
 ModelState.AddModelError("", "The user name or password provided is incorrect.");
 return View(model);
} 
```

我的 DAL 类的代码：

```
public static bool IsActive(string _username)
{  TimeTrackerEntities db = new TimeTrackerEntities();
   foreach (Worker worker in db.Workers)
   {
       if (worker.UserName == _username)
       {
             if (worker.IsActive == 1) return true;
             if (worker.IsActive == 0) return false;
       }
   }
return true;
} 
```

我是否对用户使用了错误的操作来进行重定向？或者像这样明显的东西？我基本迷路了...

编辑 - 感谢 Eric J. 和 Jonathon Page，代码现在可以正常工作。谢谢你们俩！我怎样才能将他们的两个评论都记为正确答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:38:12.793

I assume this line:

```
if (WorkerDAL.IsActive(model.UserName)) RedirectToAction("DisplayDeletedUserMessage", "Home"); 
```

should read

```
if (!WorkerDAL.IsActive(model.UserName)) RedirectToAction("DisplayDeletedUserMessage", "Home"); 
```

It looks like you're currently redirecting to display the deleted user message if the user *is* active.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:32:03.873

您缺少 return 关键字：

`RedirectToAction("DisplayDeletedUserMessage", "Home"); //my redirect code`

应该读：

`return RedirectToAction("DisplayDeletedUserMessage", "Home"); //my redirect code`

# php - 将单个值与数组进行比较 - 将值替换为数组中最接近的数字

> ID：14917420
> 
> 赞同：0
> 
> 时间：2013-02-17T02:34:17.727
> 
> 标签：php, arrays, math

标题冗长而混乱，见谅。

```
$array = (1,5,10,25,50);
$x = 8 
```

我如何将 $x 与数组中的每个值进行比较，然后选择最匹配的值。

在这种情况下，它将是 10。

我想象着创建一些 if 语句，但认为可能有更好的方法来做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:00:05.573

另一种方式，使用具有差异的中间数组：

```
$diff = array();

foreach($array as $n)      
  $diff[$n] = abs($x - $n);  // key = number, value = difference

// get the key that contains the smallest difference
$closest = array_search(min($diff), $diff); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:42:53.670

```
$min = 0;
foreach ($array AS $i => $v) {
  if (abs($array[$min] - $x) > abs($v - $x))
    $min = $i;
  // you can optimize this with :
  if ($v == $x)
    break;
}
$closest = $array[$min]; 
```

像这样的东西应该工作。

# c# - 在 C# 中处理 KeyDown 和 KeyPress 事件

> ID：14917422
> 
> 赞同：2
> 
> 时间：2013-02-17T02:34:43.700
> 
> 标签：c#, winforms, keyboard-events

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T06:07:49.617

1.  在我的事件处理程序中按`Ctrl`、`Alt`或`Shift`单独导致`Control`、`Alt`和`Shift`返回。单独按下这些键中的每一个都会导致在我的事件处理程序中返回。你确定你不处理这个事件吗？`true``KeyDown``false``KeyUp``KeyUp`

2.  正如@sean woodward 所说，`![Windows Key](../Images/a63ebe1d7f38cd83962261f68004dbf0.png)`应该映射到`Keys.LWin`或者`Keys.RWin`

3.  该`KeyPress`事件仅在按下其中一个字符键时引发，并将返回由按下的键或按下的键组合产生的字符。`Ctrl+Shift+B`不是一个字符，因此您不能`KeyChar`单独使用来获取该信息。尝试使用`KeyDown`or`KeyUp`事件并查看`Modifiers`属性以获取以逗号分隔的字符串，其中包含正在按下的修饰键。如果顺序很重要，您需要像`Modifiers`往常一样以相同的顺序返回键，即`Shift, Control, Alt`即使它们不是按的方式。

这是我使用的代码，您可以尝试使用它：

```
 KeyDown += (o, ea) =>
{
    System.Diagnostics.Debug.WriteLine("KeyDown => CODE: " + ea.KeyCode +
        ", DATA: " + ea.KeyData +
        ", VALUE: " + ea.KeyValue +
        ", MODIFIERS: " + ea.Modifiers +
        ", CONTROL: " + ea.Control +
        ", ALT: " + ea.Alt +
        ", SHIFT: " + ea.Shift);

};

KeyUp += (o, ea) =>
{
    System.Diagnostics.Debug.WriteLine("KeyUp => CODE: " + ea.KeyCode +
        ", DATA: " + ea.KeyData +
        ", VALUE: " + ea.KeyValue +
        ", MODIFIERS: " + ea.Modifiers +
        ", CONTROL: " + ea.Control +
        ", ALT: " + ea.Alt +
        ", SHIFT: " + ea.Shift);
};

KeyPress += (o, ea) => 
{
    System.Diagnostics.Debug.WriteLine("KeyPress => CHAR: " + ea.KeyChar);
}; 
```

# r - How can I plot graph for sample variance versus sample size while putting random numbers from 1 to 20 in R language

> ID：14917425
> 
> 赞同：-1
> 
> 时间：2013-02-17T02:35:28.593
> 
> 标签：r

How can I plot graph for sample variance versus sample size while putting random numbers from 1 to 20 in R language?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T03:06:20.627

特林克可能会讨厌我回答这个问题，但这是一个带有许多假设的粗略示例：

```
sample.max <- 20000
sample.sizes <- seq(1, sample.max, by=10)

myfun <- function (x){
var(sample(1:20, x, replace=TRUE))
}

variances <- sapply(sample.sizes, myfun)

plot(sample.sizes, variances, t='l') 
```

![在此处输入图像描述](../Images/d2aa3ec0cfa682ffbc9f05b4d37d886a.png)

# c# - How to rename and remap fields with illegal json field names

> ID：14917430
> 
> 赞同：1
> 
> 时间：2013-02-17T02:36:49.790
> 
> 标签：c#, json, deserialization, restsharp, json2csharp

I have used json2csharp to produce some nice c# class into which I can deserialize json.

It is actually working as expected EXCEPT that json2csharp named some of the fields **invalid_name** . I renamed those to valid csharp names but when serialized those class are null.

I found [this other SO post](https://stackoverflow.com/questions/13727469/having-trouble-finding-the-right-json-request)... where one of the answerers said the following...

> Keep in mind the class I have pasted below will not work directly, because of the naming of some of the fields in the json. You may have to rename them manually and map them.

This exactly describes my problem. Unfortunately, the answer gives no clues on actually HOW to "map them." So can someone tell me how to manually map some json arrays to c# classes.

I am using RestSharp deserializers, btw.

Any ideas?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T04:28:18.427

如果您使用 JSON.NET 作为基础或 JSON 解析，您可以重命名您的属性，然后用属性装饰它们以将它们与原始 JSON 对象对齐。

例如，JSON 中名为 1 的属性在 C# 中无效。这可以使用以下方法纠正：

```
 [JsonProperty("1")]
 public int? One { get; set; } 
```

如果要在类级别进行编辑，还有一个 JsonObject 属性，还有一个 JsonIgnore 对象来忽略属性的序列化。

# box2d - Box2D 接触过滤器不会触发在其他实体之上创建的实体

> ID：14917438
> 
> 赞同：1
> 
> 时间：2013-02-17T02:39:03.347
> 
> 标签：box2d

我有一个用于 Android 游戏的 box2d 设置，使用来自 LibGDX 的端口。

我正在使用接触过滤器来允许一些身体相互通过。但是，当我在另一个实体占据的位置创建一个这样的实体时，它们会重叠，这两个实体会卡住，并且永远不会调用接触过滤器。如果我撞到一个物体使其失去接触，然后又与另一个物体接触，它们会按预期相互穿过。但是，我想让身体从一开始就相互穿过。

我注意到一个动态物体和一个动态、静态或运动物体的这种行为。我的完整设置相当复杂，所以我不知道我的来源会对任何人有益。

我的主要问题是这听起来是否像正常的 box2d 行为（如果有人知道解决方法的话）。另一方面，如果你做了类似的事情而没有遇到这个问题，我想知道这样我就可以查找哪些错误可能导致我的程序运行不同。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:25:54.080

解决方案是通过 b2FixtureDef::filter 字段而不是联系人侦听器使用[碰撞过滤。](https://www.iforce2d.net/b2dtut/collision-filtering)

# php - php切换到mysqli：num_rows问题

> ID：14917447
> 
> 赞同：4
> 
> 时间：2013-02-17T02:40:13.070
> 
> 标签：php, mysqli

我最近开始将一些代码更新到 MySQL 改进的扩展，并且到目前为止一直是成功的：

```
// old code - works
$result = mysql_query($sql);
    if(mysql_num_rows($result) == 1){
    $row = mysql_fetch_array($result);
    echo $row['data'];
    }

// new code - doesn't work
$result = $mysqli->query($sql) or trigger_error($mysqli->error." [$sql]"); 
    if($result->num_rows == 1) {
    $row = $result->fetch_array();
    echo $row['data'];
    } 
```

如图所示，我正在尝试使用**面向对象的样式**。我没有得到 mysqli 错误，vardump 说没有数据……但 db 表中肯定有数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T02:54:45.113

试试这个：

```
<?php

// procedural style

$host = "host";
$user = "user";
$password = "password";
$database = "db";

$link = mysqli_connect($host, $user, $password, $database);

IF(!$link){
    echo ('unable to connect to database');
}

ELSE {
$sql = "SELECT * FROM data_table LIMIT 1";
$result = mysqli_query($link,$sql);
    if(mysqli_num_rows($result) == 1){
    $row = mysqli_fetch_array($result, MYSQLI_BOTH);
    echo $row['data'];
    }
}
mysqli_close($link);

// OOP style 

$mysqli = new mysqli($host,$user, $password, $database);
$sql = "SELECT * FROM data_table LIMIT 1";
$result = $mysqli->query($sql) or trigger_error($mysqli->error." [$sql]"); /* I have added the suggestion from Your Common Sence */
    if($result->num_rows == 1) {
    $row = $result->fetch_array();
    echo $row['data'];
    }

    $mysqli->close() ;

// In the OOP style if you want more than one row. Or if you query contains more rows.    

$mysqli = new mysqli($host,$user, $password, $database);
$sql = "SELECT * FROM data_table";
$result = $mysqli->query($sql) or trigger_error($mysqli->error." [$sql]"); /* I have added the suggestion from Your Common Sence */
    while($row = $result->fetch_array()) {
     echo $row['data']."<br>";
    }

    $mysqli->close() ;    

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:49:15.480

如前所述，您没有检查错误。
以这种方式运行所有查询

```
$result = $mysqli->query($sql) or trigger_error($mysqli->error." [$sql]"); 
```

如果没有显示错误并且 var dumps 说没有数据 - 那么答案很简单：您的查询没有返回数据。检查表中的查询和数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T14:20:00.383

在 PHP v 5.2 中，在从查询结果中获取数据行之前未设置 mysqli::num_rows：

```
$mysqli = new mysqli($host,$user, $password, $database);

if ($mysqli->connect_errno) {
    trigger_error(sprintf(
        'Cannot connect to database. Error %s (%s)',
        $mysqli->connect_error,
        $mysqli->connect_errno
    ));
}

$sql = "SELECT * FROM data_table";

$result = $mysqli->query($sql);

// a SELECT query will generate a mysqli_result
if ($result instanceof mysqli_result) {
    $rows = array();
    while($row = $result->fetch_assoc()) {
        $rows[] = $row;
    }

    $num_rows = $result->num_rows; // or just count($rows);

    $result->close();

    // do something with $rows and $num_rows
} else {
    //$result will be a boolean
}

$mysqli->close() ; 
```

# android - 使用 Nexus 7 创建接入点

> ID：14917450
> 
> 赞同：8
> 
> 时间：2013-02-17T02:40:51.843
> 
> 标签：android, wifi, adhoc, nexus-7, access-point

## 目的是什么？

使用 Android 设备（在我的例子中是 Nexus 7）创建一个接入点。最终目的是将 WiFly 卡连接到这个创建的网络并在这些设备之间交换数据。

## 硬件：

*   Nexus 7 与 Android 版本 4.2.2**植根**于 ROM CyanogenMod 10.1
*   WiFly 卡：与使用 Wifi 的 Zigbee 卡具有相同布局的 Arduino 扩展板（[产品](https://www.sparkfun.com/products/10822)）

## 软件：

我了解到 Android 4.2.2 版不允许创建接入点（该服务以编程方式被禁用）。这就是我使用 CyanogenMod 的 ROM 植根设备的原因。此 ROM 启用此服务。

谷歌已经从类中隐藏了一些方法`WifiManager`。具体来说，方法`setWifiApEnabled`。这就是为什么我在下面的代码中使用反射来调用方法的原因。

*源代码海量！*专注于方法`createAccessPoint()`。我选择放置整个源代码来帮助那些想知道我是如何做到这一切的人。

```
public class TestAccessPoint extends Activity {

static final String TAG = "AP_TEST";
static final String SSID = "\"Awesome Access Point\"";
static final String PSK = "\"helloworld\"";
String numberOfClientsConnected;
String wifiApEnable;
String wifiApState;
WifiConfiguration wifiApConfig;
WifiManager wifiManager;
WifiConfiguration wifiConfiguration;
BroadcastReceiver receiver;
BroadcastReceiver receiverWifiDisabled;
TextView textView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.accesspoint_test);
    textView = (TextView) findViewById(R.id.textView);

    wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    wifiConfiguration = new WifiConfiguration();

    if(wifiManager.isWifiEnabled()) {
        createAccessPoint();
    } else {
        Log.d(TAG, "Set wifi Enable");
        wifiManager.setWifiEnabled(true);
        receiverWifiDisabled = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                int wifiState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, WifiManager.WIFI_STATE_UNKNOWN);
                if ( wifiState == WifiManager.WIFI_STATE_ENABLED ) {
                    Log.d(TAG, "Wifi enable");
                    createAccessPoint();
                }
            }
        };
        registerReceiver(receiverWifiDisabled, new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION));
    }

    final Handler mHandler = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
                case 1:
                    textView.setText(
                        wifiApEnable + "\n" + 
                        wifiApState + "\n" +
                        "Nb of clients connected: " + numberOfClientsConnected + "\n" + 
                        "Wifi AP configuration: " + "\n" +
                        wifiApConfig.toString() + "\n" +
                        "WifiManager connection info: " +  "\n" + 
                        wifiManager.getConnectionInfo().toString() +
                        "DHCP state: " + wifiManager.getDhcpInfo().toString()
                    );
                break;
            }
        }
    };

    Thread thread = new Thread(new Runnable() {
        boolean alive = true;
        @Override
        public void run() {
            while(alive) {
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) { e.printStackTrace(); }

                numberOfClientsConnected = numberOfClientsConnected();
                wifiApEnable = isWifiApEnabled();
                wifiApState = getWifiApState();
                wifiApConfig = getWifiApConfiguration();

                mHandler.sendMessage(mHandler.obtainMessage(1));
            }
        }
    });
    thread.start();
}

@Override 
public void onDestroy() {
    super.onDestroy();
    if(receiver != null) {
        unregisterReceiver(receiver);
    }
    if(receiverWifiDisabled != null) {
        unregisterReceiver(receiverWifiDisabled);
    }
}

protected void createAccessPoint() {
    // Check if the Wifi configuration already exists
    List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
    int networkID = -1;
    if(list != null){
        for(WifiConfiguration conf : list) {
            Log.d(TAG, "Network ID: " + String.valueOf(conf.networkId) + " ; Network SSID: " + conf.SSID);
            if(conf.SSID.equals(SSID)) {
                Log.d(TAG, "SSID found");
                networkID = conf.networkId;
                wifiConfiguration = conf;
                break;
            }
        } 
    } else
        Log.d(TAG, "List of WifiConfiguration is null");

    // If the configuration exists, remove it to recreate it from scratch
    if(networkID != -1) {
        wifiManager.removeNetwork(networkID);
    }

    // Create a new WiFi configuration
    wifiConfiguration.SSID = SSID;
    wifiConfiguration.preSharedKey = PSK;
    wifiConfiguration.hiddenSSID = false;
    wifiConfiguration.status = WifiConfiguration.Status.ENABLED;

    wifiConfiguration.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    wifiConfiguration.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);

    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
    wifiConfiguration.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);

    wifiConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    wifiConfiguration.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);

    wifiConfiguration.allowedProtocols.set(WifiConfiguration.Protocol.RSN);

    // Catch Enumeration IpAssignment and ProxySettings from WifiConfiguration
    Enum ipAssignment = catchEnumIpAssignmentFromWifiConfiguration();
    Enum proxySettings = catchEnumProxySettingsFromWifiConfiguration();

    // Set IP address, gateway, DNS, etc
    try {
        Log.d(TAG, "Try to set IP, gateway and DNS");
        setIpAssignment(ipAssignment, wifiConfiguration);
        Log.d(TAG, "IpAssignment: Ok");
        setProxySettings(proxySettings, wifiConfiguration);
        Log.d(TAG, "ProxySettings: Ok");
        setIpAddress(InetAddress.getByName("192.168.2.100"), 24, wifiConfiguration);
        Log.d(TAG, "IpAddress: Ok");
        setGateway(InetAddress.getByName("192.168.2.1"), wifiConfiguration);
        Log.d(TAG, "Gateway: Ok");
        setDNS(InetAddress.getByName("192.168.2.1"), wifiConfiguration);
        Log.d(TAG, "DNS: Ok");
    } catch(Exception e) {
        e.printStackTrace();
    }

    // Add this new configuration to the wpa_supplicant file
    networkID = wifiManager.addNetwork(wifiConfiguration);
    if(networkID != -1)
        Log.d(TAG, "Succeed to update the WiFi configuration: " + networkID);
    else
        Log.d(TAG, "Failed to update the WiFi configuration");

    // Save the new configuration on the wpa_supplicant
    if(wifiManager.saveConfiguration())
        Log.d(TAG, "Succeed to save the wpa_supplicant");
    else
        Log.d(TAG, "Failed to save the wpa_supplicant");

    // Set the Wifi disable to be able to start the Access Point
    Log.d(TAG, "Set wifi disable");
    wifiManager.setWifiEnabled(false);

    receiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            int wifiState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, WifiManager.WIFI_STATE_UNKNOWN);
            if ( wifiState == WifiManager.WIFI_STATE_DISABLED ) {
                Log.d(TAG, "Wifi disabled");
                // When the Wifi is disable
                // Create the Access Point with the WiFi configuration
                try {
                    Method m = wifiManager.getClass().getMethod("setWifiApEnabled", WifiConfiguration.class, boolean.class);
                    boolean succeed = (Boolean) m.invoke(wifiManager, wifiConfiguration, true);
                    if(succeed)
                        Log.d(TAG, "Succeed to set wifi AP");
                    else
                        Log.d(TAG, "A problem occured while setting the wifi AP");
                } catch (Exception e) {
                    Log.e(TAG, "Failed to set wifi AP", e);
                }
            }
        }
    };
    registerReceiver(receiver, new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION));
}

protected String getWifiApState() {
    try {
        Method m3 = wifiManager.getClass().getMethod("getWifiApState");
        return "WiFi Ap State: " + String.valueOf(m3.invoke(wifiManager));
    } catch (NoSuchMethodException e1) {    e1.printStackTrace();
    } catch (IllegalArgumentException e) {  e.printStackTrace();
    } catch (IllegalAccessException e) {    e.printStackTrace();
    } catch (InvocationTargetException e) { e.printStackTrace(); }
    return null;
}

protected WifiConfiguration getWifiApConfiguration() {
    WifiConfiguration wifiConfiguration = null;
    try {
        Method m4 = wifiManager.getClass().getMethod("getWifiApConfiguration");
        wifiConfiguration = (WifiConfiguration) m4.invoke(wifiManager);
    } catch (Exception e) { e.printStackTrace(); }
    return wifiConfiguration;
}

protected String isWifiApEnabled() {
    try {
        Method m = wifiManager.getClass().getMethod("isWifiApEnabled");
        if((Boolean) m.invoke(wifiManager))
            return "WiFiAP enabled";
        else
            return "WiFiAP not enabled";
    } catch (Exception e) { e.printStackTrace(); }
    return null;
}

protected String numberOfClientsConnected() {
    int macCount = 0;
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader("/proc/net/arp"));
        String line;
        while ((line = br.readLine()) != null) {
            String[] splitted = line.split(" +");
            if (splitted != null && splitted.length >= 4) {
                String mac = splitted[3];
                if (mac.matches("..:..:..:..:..:..")) {
                    macCount++;
                } 
            }
        }
    } catch (Exception e) { e.printStackTrace();
    } finally {
        try {
            br.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return String.valueOf(macCount);        
}

@SuppressWarnings({ "unchecked", "rawtypes" })
protected Enum catchEnumIpAssignmentFromWifiConfiguration() {
    Enum DHCP = null;
    try {
        Class<Enum> enumIpAssignment = (Class<Enum>) Class.forName("android.net.wifi.WifiConfiguration$IpAssignment");
        DHCP = Enum.valueOf(enumIpAssignment, "DHCP");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    return DHCP;
}

@SuppressWarnings({ "unchecked", "rawtypes" })
protected Enum catchEnumProxySettingsFromWifiConfiguration() {
    Enum ProxySet = null;
    try {
        Class<Enum> enumProxySettings = (Class<Enum>) Class.forName("android.net.wifi.WifiConfiguration$ProxySettings");
        ProxySet = Enum.valueOf(enumProxySettings, "NONE");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    return ProxySet;
}

public static void setIpAssignment(Object assign , WifiConfiguration wifiConf)
        throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException {
    setEnumField(wifiConf, assign, "ipAssignment");     
}

public static void setProxySettings(Object assign , WifiConfiguration wifiConf)
        throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException {
    setEnumField(wifiConf, assign, "proxySettings");     
}

@SuppressWarnings({ "rawtypes", "unchecked" })
public static void setIpAddress(InetAddress addr, int prefixLength, WifiConfiguration wifiConf)
        throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException,
        NoSuchMethodException, ClassNotFoundException, InstantiationException, InvocationTargetException {
    Object linkProperties = getField(wifiConf, "linkProperties");
    if(linkProperties == null) return;
    Class laClass = Class.forName("android.net.LinkAddress");
    Constructor laConstructor = laClass.getConstructor(new Class[]{InetAddress.class, int.class});
    Object linkAddress = laConstructor.newInstance(addr, prefixLength);

    ArrayList mLinkAddresses = (ArrayList)getDeclaredField(linkProperties, "mLinkAddresses");
    mLinkAddresses.clear();
    mLinkAddresses.add(linkAddress);     
}

@SuppressWarnings({ "rawtypes", "unchecked" })
public static void setGateway(InetAddress gateway, WifiConfiguration wifiConf)
        throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException, 
        ClassNotFoundException, NoSuchMethodException, InstantiationException, InvocationTargetException {
    Object linkProperties = getField(wifiConf, "linkProperties");
    if(linkProperties == null)return;
    Class routeInfoClass = Class.forName("android.net.RouteInfo");
    Constructor routeInfoConstructor = routeInfoClass.getConstructor(new Class[]{InetAddress.class});
    Object routeInfo = routeInfoConstructor.newInstance(gateway);

    ArrayList mRoutes = (ArrayList)getDeclaredField(linkProperties, "mRoutes");
    mRoutes.clear();
    mRoutes.add(routeInfo);
}

@SuppressWarnings("unchecked")
public static void setDNS(InetAddress dns, WifiConfiguration wifiConf)
        throws SecurityException, IllegalArgumentException, NoSuchFieldException, IllegalAccessException {
    Object linkProperties = getField(wifiConf, "linkProperties");
    if(linkProperties == null)return;

    ArrayList<InetAddress> mDnses = (ArrayList<InetAddress>)getDeclaredField(linkProperties, "mDnses");
    mDnses.clear();
    mDnses.add(dns); 
}

public static Object getField(Object obj, String name)
        throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
    Field f = obj.getClass().getField(name);
    Object out = f.get(obj);
    return out;
}

public static Object getDeclaredField(Object obj, String name)
        throws SecurityException, NoSuchFieldException,
        IllegalArgumentException, IllegalAccessException {
    Field f = obj.getClass().getDeclaredField(name);
    f.setAccessible(true);
    Object out = f.get(obj);
    return out;
}  

public static void setEnumField(Object obj, Object value, String name)
        throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
    Field f = obj.getClass().getField(name);
    f.set(obj, value);
}
} 
```

此代码在我的 Nexus 7 上运行良好。它创建了一个接入点。我的笔记本电脑看到这个网络链接： ![在此处输入图像描述](../Images/683c29b43078ed6bf45a020260744c89.png)

它要求我输入 WPA 密钥。我需要用引号括起来写它是否不起作用（`"helloworld"`）。

之后，我的笔记本电脑连接到网络，但使用[Xirrus](http://www.xirrus.com/Products/Wi-Fi-Inspector.aspx)软件我意识到 DHCP 模块没有提供任何 IP 地址。

## 日志：

我得到两个有趣的日志。这是我启动应用程序的时候：

```
E/hostapd(): Configuration file: /data/misc/wifi/hostapd.conf
E/hostapd(): HT (IEEE 802.11n) in 11b mode is not allowed, disabling HT capabilites
I/hostapd(): rfkill: Cannot open RFKILL control device
W/hostapd(): wlan0: Could not connect to kernel driver
E/hostapd(): Using interface wlan0 with hwaddr 02:1a:11:fd:32:58 and ssid "\"Awesome Access Point\""
E/hostapd(): random: Cannot read from /dev/random: Try again
I/hostapd(): random: Only 0/20 bytes of strong random data available from /dev/random
I/hostapd(): random: Allow operation to proceed based on internal entropy 
```

这是当我将笔记本电脑与接入点连接和断开连接时：

```
I/hostapd(): wlan0: AP-STA-DISCONNECTED 00:27:10:ca:f0:80
I/hostapd(): wlan0: AP-STA-CONNECTED 00:27:10:ca:f0:80 
```

## 问题：

*   如果你认为我做错了，你能告诉我更好的方法吗？
*   你知道为什么我没有从 DHCP 模块获取 IP 地址吗？
*   你知道我可以从 DHCP 模块获得更多信息/日志吗？

谢谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:06:19.257

不幸的是，这是不可能的。用于 Nexus 7 的 Android ROM 库存版本根本无法创建 WiFi 接入点（默认情况下已关闭）。唯一合理的方法是 root 设备并加载一些自定义 ROM，如 CyanogenMod 或类似的东西。例如，CyanogenMod 已打开该功能。

很抱歉让您失望了，但是对于常规固件，这根本不可能。

# node.js - 异步文件追加

> ID：14917454
> 
> 赞同：2
> 
> 时间：2013-02-17T02:41:21.370
> 
> 标签：node.js, socket.io

在尝试学习 node.js/socket.io 时，我一直在搞乱创建一个简单的文件上传器，它从客户端浏览器获取数据块并在服务器端重新组装。

用于接收块的 socket.io 事件如下所示：

```
socket.on('sendChunk', function (data) {
    fs.appendFile(path + fileName, data.data, function (err) {
      if (err) 
       throw err;
      console.log(data.sequence + ' - The data was appended to file ' + fileName);
    });
  }); 
```

问题是由于异步调用，数据块不一定按照接收顺序附加。典型的控制台输出如下所示：

*   1 - 数据附加到文件 testfile.txt
*   3 - 数据附加到文件 testfile.txt
*   4 - 数据附加到文件 testfile.txt
*   2 - 数据附加到文件 testfile.txt

我的问题是，以非阻塞方式实现此功能但强制执行顺序的正确方法是什么。我看过像[async](https://github.com/caolan/async)这样的库，但我真的希望能够处理每一个库，而不是创建一个系列并在所有文件块都进入后运行。我仍然试图围绕所有这些事件驱动流，所以任何指针都很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T03:28:39.697

通常，您会为等待写入的数据使用队列，然后每当前一个追加完成时，您就会尝试写入下一段。像这样的东西：

```
var parts = [];
var inProgress = false;
function appendPart(data){
  parts.push(data);
  writeNextPart();
}

function writeNextPart(){
  if (inProgress || parts.length === 0) return;

  var data = parts.shift();
  inProgress = true;
  fs.appendFile(path + fileName, data.data, function (err) {
    inProgress = false;
    if (err) throw err;
    console.log(data.sequence + ' - The data was appended to file ' + fileName);

    writeNextPart();
  });
}

socket.on('sendChunk', function (data) {
  appendPart(data);
}); 
```

您将需要扩展它以保留基于文件名的`parts`队列`inProgress`。为了简单起见，我的示例假设这些将是恒定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:59:44.750

因为您需要附加顺序或同步。您可以使用`fs.appendFileSync`而不是`fs.appendFile`. 这是处理它的最快方法，但它会损害性能。

如果您想自己异步处理它，请使用使用`EventEmitter`. 事实证明，响应（以及请求）对象都是流。创建一个可写流`fs.createWriteStream`并写入所有片段以附加文件。

```
fs.createWriteStream(path, [options])#
Returns a new WriteStream object (See Writable Stream).

options is an object with the following defaults:

{ flags: 'w',
  encoding: null,
  mode: 0666 } 
```

在您的情况下，您将使用标志：'a'

# php - 通过 TCP 访问守护进程以保持 SSH 会话打开、创建新会话和发送命令

> ID：14917456
> 
> 赞同：0
> 
> 时间：2013-02-17T02:41:35.863
> 
> 标签：php, c, ssh, openssh

我目前正在设计一些 SSH 控制软件来向服务器组发送命令。前端是用 PHP 编写的，我目前正在使用 Net_SSH2 PHP 扩展。当我尝试一次执行多个命令时，这被证明是有问题的，或者通过 SSH 从延迟超过 150 毫秒的服务器请求命令的输出（需要几秒钟才能接收输出）
是否有现有的软件可以让我创建SSH 会话，让它们保持打开状态（如果断开连接则重新连接）并向我选择的会话发送命令，而无需在每次我想发送命令时打开新连接？
我目前正在使用这个设置
- Centos 6.3 64bit
- Nginx with PHP-FPM

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:45:49.523

您可以设置一个使用`exec()`和接收的远程 PHP 侦听器`POST`。然后你根本不需要使用 SSH。

调用者：

```
//command to execute is sent to this page
//prepare data
//use cURL to POST to listener 
```

听众：

```
//request is received
//process request
exec($command); 
```

# android - 方向更改时，片段视图为空

> ID：14917459
> 
> 赞同：2
> 
> 时间：2013-02-17T02:42:21.667
> 
> 标签：android, view, android-fragments

在将我的应用程序从正常活动样式移植到片段样式时，我遇到了一些问题。我开始注意到，当一个片段被重新创建或从后台堆栈中弹出时，它会失去它的视图。当我说我特别在谈论一个列表视图时。我正在做的是将项目加载到列表视图中，然后旋转屏幕。当它返回时，它会得到一个空指针异常。我调试它，果然列表视图为空。这是片段的相关代码

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup viewGroup, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.sg_question_frag, viewGroup, false);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        list = (ListView)getActivity().findViewById(R.id.sgQuestionsList);
        if (savedInstanceState != null) {
            catId = savedInstanceState.getInt("catId");
            catTitle = savedInstanceState.getString("catTitle");
        }
        populateList(catId, catTitle);
    } 
```

这就是它的名称（请记住，还有一些我正在使用的其他片段）

```
@Override
    public void onTopicSelected(int id, String catTitle) {
        // TODO Auto-generated method stub
        FragmentManager fm = this.getSupportFragmentManager();

        SGQuestionFragment sgQuestFrag = (SGQuestionFragment) fm.findFragmentByTag("SgQuestionList");
        FragmentTransaction ft = fm.beginTransaction();
        //If the fragment isnt instantiated
        if (sgQuestFrag == null) {

            sgQuestFrag = new SGQuestionFragment();
            sgQuestFrag.catId = id;
            sgQuestFrag.catTitle = catTitle;
            //Fragment isnt there, so we have to put it there

            if (mDualPane) {
                //TO-DO
                //If we are not in dual pane view, then add the fragment to the second container
                ft.add(R.id.sgQuestionContainer, sgQuestFrag,"SgQuestionList").commit();

            } else {
                ft.replace(R.id.singlePaneStudyGuide, sgQuestFrag, "SqQuestionList").addToBackStack(null).commit();
            }
        } else if (sgQuestFrag != null) {
            if (sgQuestFrag.isVisible()) {
                sgQuestFrag.updateList(id, catTitle);
            } else {
                sgQuestFrag.catId = id;
                sgQuestFrag.catTitle = catTitle;
                ft.replace(R.id.sgQuestionContainer, sgQuestFrag, "SgQuestionList");
                ft.addToBackStack(null);
                ft.commit();
                sgQuestFrag.updateList(id, catTitle);

            }
        }
        fm.executePendingTransactions();
    } 
```

我最终希望它做的是完全重新创建活动，忘记片段和所有内容，就像活动以横向模式或纵向模式启动一样。我真的不需要那里的片段，我可以使用一些保存的变量以编程方式重新创建它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T05:17:09.620

`Fragment`如果你想从一个总是`View`在方法`View`返回的视图中获取一个视图的引用`getView()`。在您的情况下，在您查找'`ListView`的`Fragment`视图时可能尚未附加到活动，因此引用将为空。所以你使用：

```
list = (ListView) getView().findViewById(R.id.sgQuestionsList); 
```

# ruby - Camping 在问号处拆分 URL

> ID：14917468
> 
> 赞同：0
> 
> 时间：2013-02-17T02:44:13.380
> 
> 标签：ruby, model-view-controller, url, camping, markaby

这是我的问题：

[Camping](https://camping.github.io/camping.io/)在问号处拆分网址。

所以如果我们有这样的代码：

```
Camping.goes :CodeLine
module CodeLine::Controllers
 class Index
  def get
   render :index
  end
 end
class TextEntered < R '/(.*)'
  def get(textStringEntered)
   "#{textStringEntered}"
  end
 end
end
module CodeLine::Views
 def index
  html do
   head do
    title "Uh Oh"
   end
   body do
    text "Looks like you got to the index"
    br
    br
    form :name => "input" do
     input :type => "text", :name => "text"
     input :type => "submit", :value => "Submit"
    end
   end
  end
 end
end 
```

运行`camping path/to/file`
进入`localhost:3301`浏览器并在文本字段中输入一些文本并点击提交后，您应该会看到斜杠后面的所有内容，但它会在问号处拆分 url，因为它认为斜杠后面没有任何内容，所以需要你给索引。

问题：是否可以设置`input`为不使用问号，或者我可以让露营不在问号处拆分？

附录 A
在
1\. Google Chrome
2\. Firefox
3\. Safari中测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:36:55.160

路由只匹配 URL 的*路径*：

```
https://example.com/hello/world?a=this&b=hello&c=world#nice
^       ^          ^            ^                      ^
Schema  Host       Path         Query parameters       Fragment 
```

在露营中，您可以通过以下方式访问查询参数`@input`：

```
@input.a # => "this"
@input.b # => "hello"
@input.c # => "world" 
```

查询参数更像是您可以传递给控制器​​的“选项”。例如，您不希望有一个单独的控制器来处理“按名称排序”和“按日期排序”，因此您可以使用查询参数：

```
class Search
  def get
    query = @input.q || "*"
    page = (@input.page || 1).to_i
    sort = @input.sort || "name"
    @results = fetch_results_from_database_or_something(query, page, sort)
    render :search
  end
end 
```

这样，所有这些工作：

```
/search?query=hello  # Page 1, sort by name
/search?page=5       # Page 5, sort by name, search for everything
/search?query=cars&page=4&sort=date 
```

# javascript - 如何获得完整的发布日期 Blogspot

> ID：14917471
> 
> 赞同：0
> 
> 时间：2013-02-17T02:44:56.417
> 
> 标签：javascript, date, datetime, blogger, blogspot

示例代码：

```
var postdate = entry.published.$t;
var month1 = [1,2,3,4,5,6,7,8,9,10,11,12];
var month2 = ["Jan","Feb","Mar","Apr","Mey","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
var d = postdate.split("-")[2].substring(0,2);
var m = postdate.split("-")[1];
var y = postdate.split("-")[0];
for(var u2=0; u2<month1.length; u2++){ if(parseInt(m)==month1[u2]){ m=month2[u2]; break;}}
var daystr = (showPostDate) ? '' + m + ' ' + d + ', ' + y + '' : "";
var item = '' + daystr + ''; 
```

发布日期的最终产品 = 2013 年 2 月 17 日

我想日期格式 = 2013 年 2 月 17 日星期六

```
var daynames = ["Monday","Tuesday", ... "Sunday"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:44:39.547

如果需要格式化。您可以使用发布日期来创建 Date 对象。像这样：

```
var d = new Date(2013,2,17); 
```

并使用 d 值创建您自己的日期：（[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)）。请参阅链接底部的示例。

使用以下内容获取日期并从数组中检索：

```
getDay
Returns the day of the week (0-6) for the specified date according to local time. 
```

像这样：

var day = ["星期一", "星期二", ....];
console.log(day[d.getDay()]);

# bash - 比较bash脚本中的字符串

> ID：14917474
> 
> 赞同：3
> 
> 时间：2013-02-17T02:45:39.623
> 
> 标签：bash

```
./build_binaries.sh: line 43: [: ==: unary operator expected 
```

我的这行 ( `line 43`) 对我`bash script`来说看起来是正确的，但它一直在抛出错误。

```
if [ ${platform} == "macosx" ]; then 
```

错误：

```
./foo.sh: line 43: [: ==: unary operator expected 
```

这是在 OSX 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T02:48:40.407

问题是这`$platform`是一个空字符串。通常的解决方法是将其放在引号中：

```
if [ "${platform}" == "macosx" ] 
```

例子：

```
$ unset x
$ [ $x == 3 ]
-bash: [: ==: unary operator expected
$ [ "$x" == "3" ]
$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T02:48:18.807

一种可能性是使用单个`=`. 这就是经典的记号。一些 shell 允许`==`，但其他 shell 不允许。

另外，你应该`${platform}`用双引号括起来；我认为这是一个空字符串，这是令人困惑的事情。

```
platform=
if [  $platform  == mac ]; then echo hi; else echo lo; fi
if [ "$platform" == mac ]; then echo hi; else echo lo; fi 
```

这会产生您在第二行看到的错误。

# apache-flex - 如何在 MXML 中从 Flash CS 导入符号？

> ID：14917476
> 
> 赞同：1
> 
> 时间：2013-02-17T02:45:52.603
> 
> 标签：apache-flex, flash-cs5, flashdevelop

我正在使用 FlashDevelop 在 Flex 中编写一个移动应用程序，并使用 Flash CS6 创建视觉资产。我在 Flash CS6 中创建了一个符号，并将其作为 AC3 导出到 SWC，然后将其导入到我的 FlashDevelop 项目中。然后我为它创建了一个类，如下所示：

```
package com 
{
import flash.display.Sprite;

  public class volmeter_class extends Sprite
  {
    private var design:volmeter;

    public function volmeter_class()
    {
        trace("I'm a MySymbol instance called", name);
        design = new volmeter();
        addChild(design);
    }     
  }  
} 
```

我现在正在寻求在我的应用程序页面上显示我创建的符号。为此，我怀疑我应该以某种方式将它导入到我的 MXML 中，但我不知道该怎么做。有人可以给我一些关于如何开始这样做的提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:31:32.437

在 Flash Pro 中，确保为符号指定了 AS Linkage。

![闪光符号](../Images/61df619b348c4e1e1520792b8aa1c0f5.png)

在项目的 ActionScript 构建路径中使用从 Flash Pro 发布的 SWC，可以通过 AS Linkage 实例化符号。或者，可以从 Flash Pro 的已发布 SWF 中嵌入符号。

纯 ActionScript 示例：

```
package
{
    import flash.display.Sprite;

    public class AppExample extends Sprite
    {
        public function AppExample()
        {
            var exampleSymbol:ExampleSymbol = new ExampleSymbol();
            addChild(exampleSymbol);
        }
    }
} 
```

弹性 MXML 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               creationComplete="creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                var exampleSymbol:ExampleSymbol = new ExampleSymbol();
                symbol.addChild(exampleSymbol);
            }
        ]]>
    </fx:Script>

    <s:SpriteVisualElement id="symbol" />

</s:Application> 
```

另一种方法是通过链接 Flash Pro 中的 SWF 来嵌入符号。

Flex MXML 嵌入示例：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Script>
        <![CDATA[
            [Embed('assets/library.swf', symbol = 'ExampleSymbol')]
            [Bindable]
            public static var ExampleSymbolClass:Class;
        ]]>
    </fx:Script>

    <s:Image source="{ExampleSymbolClass}" />

</s:Application> 
```

# php - php从数组/查询中提取并逐行定义php会话变量而不覆盖

> ID：14917477
> 
> 赞同：0
> 
> 时间：2013-02-17T02:45:52.197
> 
> 标签：php, session, extract

我有一个 mySQL 数据库，它在 index.php 的表中被查询和显示。我有一个名为 up.php 的文件，它处理对 index.php 中查询输出的每个表中的 < a > 的单击。我需要有一个变量，我可以从查询的每个单独行中的字段中提取该变量，以便在单击 < a > 时将变量传递给要操作的 up.php 文件。现在变量刚刚被覆盖，等于查询的最后一行的值，并且数据库经常更新，所以我不能只为每一行设置一个，它必须是动态的。

这是 index.php 文件

```
<?php
$sql = mysql_query("SELECT * FROM blogData ORDER BY id DESC");
//query for even numbered rows where mes_id = even
$sql2=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 0 ORDER BY mes_id DESC");
//query for odd numbered rows where mes_id = even
$sql3=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 1 ORDER BY mes_id DESC");

while(($row = mysql_fetch_array($sql))AND($row2 = mysql_fetch_array($sql2))AND($row3 = mysql_fetch_array($sql3)) ){
$id = $row['id'];
$title = $row['title'];
$content = $row['content'];
$category = $row['category'];
$podcast = $row['podcast'];
$datetime = $row['datetime'];

$message1=$row2['msg'];

//******* this is the variable from the query that needs to be held and not overwritten ********
$mes_id1=$row2['mes_id'];

$totalvotes1=$row2['totalvotes'];

$message2=$row3['msg'];

//******* this is the second variable from the query that needs to also be held and not overwritten *******
$mes_id2=$row3['mes_id'];

$totalvotes2=$row3['totalvotes'];

//attempting to implement this array...? not sure how to use it correctly...
$valuess[]=$row2['mes_id'];

//******* I was trying to use these session variables in up.php but they were being overwritten in the query ********
$_SESSION['message1'] = $row2['msg'];
$_SESSION['message2'] = $row3['msg'];
$_SESSION['mes_id1'] = $row2['mes_id'];
$_SESSION['mes_id2'] = $row3['mes_id'];
$_SESSION['totalvotes1'] = $row2['totalvotes'];
$_SESSION['totalvotes2'] = $row3['totalvotes'];
$_SESSION['valuess'] = $valuess[1];
?>

<?php
// variable used to display file name of $podcast without the extension
$noext = $podcast;
$echodub = rawurlencode($podcast);
// code to display $noext without the file extension
$info = pathinfo($noext);
$noext_name =  basename($noext,'.'.$info['extension']);
?>

<!--  ********* echo php variables in html format, in a table with the class of "podcast" -->
<table class="podcast" border="1">
<tr>
<td class="title">
 <?php echo $title; ?>
</td>
<td class="timeandcategory">
 <?php echo $datetime; ?>  <br>
 <?php echo $category; ?>
 <?php echo $_SESSION['mes_id1']; ?>
 <?php echo $_SESSION['mes_id2']; ?>
 <?php echo session_id(); ?>
</td>
</tr>
<tr>
<td class="content">
 <?php echo $content; ?>
</td>
<td class="myfblike">

<span class='st_fblike_large' displayText='Facebook Like'></span><br>
 <span class='st_facebook_large' displayText='Facebook'></span><br>
 <span class='st_twitterfollow_large' displayText='Twitter Follow'></span><br>
 <span class='st_pinterest_large' displayText='Pinterest'></span><br>
 <span class='st_email_large' displayText='Email'></span><br>
 <span class='st_sharethis_large' displayText='ShareThis'></span><br>

</td>

</tr>
<tr>
<td class="audio">
 <!--echo the audio file -->
  <ul class="playlist">
   <li><a href="<?php echo"uploads/$podcast"; ?>"><?php echo"$noext_name"; ?></a></li>

  </ul>

</td>
<td>

 <!-- ********** this is the cell in the table where the veriables need to be held and sent to up.php ******** -->

<div id="main">
<div id="left">
<span class='up'><a href="up.php" class="" id="<?php echo $_SESSION['mes_id']; ?>" name="up"><img src="up.png" alt="Down" /></a></span><br />
<?php echo $_SESSION['totalvotes1'] ?><br />
</div>
<div id="message">
<?php echo $_SESSION['message1'] ?>
</div>
<div class="clearfix"></div>
</div>
//********the down.php file is the same as the up.php file... just with opposite variables... im not concerned with this yet until i get the variables to display correctly in up.php
<div id="main">
<div id="left">
<br />
<?php echo $_SESSION['totalvotes2'] ?><br />
<span class='down'><a href="down.php" class="" id="<?php echo $_SESSION['mes_id2']; ?>" name="down"><img src="down.png" alt="Down" /></a></span>
</div>
<div id="message">
<?php echo $_SESSION['message2'] ?>
</div>
<div class="clearfix"></div>
</div>

</td>
</tr>

</table>

<br>
<?php
}
?> 
```

这是 up.php 文件

up.php

```
<?php
session_start();
include("config.php");

$message1 = $_SESSION['message1'];
$message2 = $_SESSION['message2'];
$mes_id1 = $_SESSION['mes_id1'];
$mes_id2 = $_SESSION['mes_id2'];
$totalvotes1 = $_SESSION['totalvotes1'];
$totalvotes2 = $_SESSION['totalvotes2'];
$ip=$_SERVER['REMOTE_ADDR'];

$ip_sql=mysql_query("select ip_add from Voting_IP where mes_id_fk='$mes_id1' and ip_add='$ip'");
$count=mysql_num_rows($ip_sql);
$ip_sql2=mysql_query("select ip_add from Voting_IP where mes_id_fk='$mes_id2' and ip_add='$ip'");
$count2=mysql_num_rows($ip_sql2);
//********* testing if these variables are being passed.....
echo $mes_id1;
echo $mes_id2;
$valuess[0] = $_SESSION['valuess'];
echo $valuess[0];
//********
// if the user has already voted, execute script
if($count==0 && $count2!=0)
{
$sql = "update Messages set totalvotes=totalvotes+1  where mes_id='$mes_id1'";
mysql_query( $sql);
$sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$mes_id1','$ip')";
mysql_query( $sql_in);
$sql = "update Messages set totalvotes=totalvotes-1  where mes_id='$mes_id2'";
mysql_query( $sql);
$sql_in = "DELETE FROM Voting_IP WHERE mes_id_fk='$mes_id2'";
mysql_query( $sql_in);
// if the user has not voted, execute script
}
else if($count==0 && count2==0)
{
$sql = "update Messages set totalvotes=totalvotes+1  where mes_id='$mes_id1'";
mysql_query( $sql);
$sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$mes_id1','$ip')";
mysql_query( $sql_in);
echo $mes_id1;
echo $mes_id2;
}
?> 
```

非常感谢任何能够帮助我的人！

```
$(".vote").click(function() 
{

var id = $(this).attr("id");
var name = $(this).attr("name");
var dataString = 'id='+ id ;
var parent = $(this);

if(name=='up')
{

$(this).fadeIn(200).html('');
$.ajax({
type: "POST",
url: "up.php",
data: dataString,
cache: false,

success: function(html)
{
parent.html(html);

}  });

}
else
{

$(this).fadeIn(200).html('');
$.ajax({
type: "POST",
url: "down.php",
data: dataString,
cache: false,

success: function(html)
{
   parent.html(html);
 }

 });

  }

});

  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:37:52.260

使用 javascript，我可以看到您需要做什么才能使其按您的意愿工作。

与其将`key1=value1`附加的 etc放在 上`href`，不如将其放在自己的名为 的属性中`data-options`，而不是`?`预先挂起它。所以看起来像：

```
<a href="" class="vote" name="up" data-options="key1=value1&key2=value2">Up/Down</a> 
```

从那里，您可以将 JS 修改为：

```
$(".vote").click(function() 
{

var id = $(this).attr("id");
var name = $(this).attr("name");
var eData = $(this).attr("data-options");
var dataString = 'id='+ id + '&' + eData ;
var parent = $(this); 
```

从那里，您可以通过 using 在 up.php 和 down.php 文件中访问它们`$_POST['key1']`，并且只需要回显您的 JS 期望从其 AJAX 调用返回的内容。^^

# php - 从文档中获取数据

> ID：14917479
> 
> 赞同：0
> 
> 时间：2013-02-17T02:46:33.897
> 
> 标签：php, javascript, html, document, converter

我想制作一个可以从常用文件类型（如 xsl 或 ppt）中获取值的网络应用程序，以允许我将其转换为自定义格式（如 Google Drive）。例如，使用 xsl（excel 文档）文件，我希望能够获取每个单元格的值。我会很好地获取文件的 html（例如获取显示 word 文档的 html 代码），因为可以从中提取值。我希望能够在客户端执行此操作，但我可以在服务器端与 PHP 一起使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:50:15.887

另一种方法是将文件作为 XML 导入。[PHP 对XML](http://php.net/manual/en/book.xml.php)有很好的支持，并且可以在短时间内完成这项工作。如果您可以将文件上传为[Open Doc 格式](http://en.wikipedia.org/wiki/OpenDocument)，您可以解析您列出的任何类型（XLS、PPT、DOC 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:52:24.007

从在线 Excel 表中获取数据的一种非常简单的方法是使用[Google Apps 脚本](https://developers.google.com/apps-script/)。这个过程在这里需要解释很多，但是通过一些谷歌搜索，你可以找到你所有的答案。

至于PPT，我想不出一个简单的方法。

至于文档（即 pdf、doc、docx），您也可以使用 Google Apps Script。

虽然，如果您为此制作自己的工具，您可能只想研究数据如何存储在文件中并从那里开始工作。

# c# - 在自引用表中查找顶级实体

> ID：14917480
> 
> 赞同：2
> 
> 时间：2013-02-17T02:46:47.833
> 
> 标签：c#, linq, entity-framework, lambda

在 Entity Framework 中，如何搜索 EF 顶层的对象？

如果我有一组具有子组件的子组件。这些子装配体可以放置在更大的装配体中。

在一个现实世界的例子中：假设我们用一台计算机构建了一个机柜，并且计算机具有部件。如何找到未安装在机柜中的计算机或未安装在计算机中的部件？

```
public class Component
{
    public int Id { get; set; }
    public string Model { get; set; }
    public string PartId { get; set; }
    public DateTime Manufactured { get; set; }
    public string SerialNumber { get; set; }
    public string ProductType { get; set; }
    public string Description { get; set; }
    public virtual List<Component> SubComponents { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:02:50.057

我想我在这里找到了答案......[自参考表](https://stackoverflow.com/questions/6383576/entity-framework-4-1-code-first-self-referencing-one-to-many-and-many-to-many-as)

```
public class Component
{
    [Key]
    public int Id { get; set; }
    public string Model { get; set; }
    public string PartId { get; set; }
    public DateTime Manufactured { get; set; }
    public string SerialNumber { get; set; }
    public string ProductType { get; set; }

    //Added this...
    public int? ParentComponentId { get; set; }
    [ForeignKey("ParentComponentId")]
    public virtual Component ParentComponent { get; set; }

    public virtual List<Component> SubComponents { get; set; }
    public string Description { get; set; }
} 
```

最初我试图向子组件添加外键，但实际上我需要父关系上的 FK。现在我的 EF 查询看起来像这样......

```
return _db.Components.Where(x => x.ParentComponent == null).ToList(); 
```

# ios - 将 NSString 转换回 NSDate

> ID：14917488
> 
> 赞同：1
> 
> 时间：2013-02-17T02:48:14.207
> 
> 标签：ios, objective-c, cocoa-touch, nsdate

我正在使用`NSDateFormatter`将当前日期转换为字符串（格式为：）`February 16, 2013`。如何将此字符串转换回`NSDate`对象？

```
NSString *dateString = [NSDateFormatter localizedStringFromDate:[NSDate date] dateStyle:NSDateFormatterLongStyle timeStyle:NSDateFormatterNoStyle]; 
```

问题似乎是写出了月份（`February`vs. `02`），而其他问题仅解释使用`NSDateFormatter`诸如 之类的格式`MM-dd-yyyy`，我认为这在这里是不可能的。我必须手动解析此日期，转换`February`为`02`，然后从那里开始吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T02:52:11.920

您可以使用相同 NSDateFormatter 类的 dateFromString 来执行反向转换。要使其工作，您需要定义 dateStyle，以便解析器知道应该如何解析文本字符串。对于您提供的日期样式，下面的代码将起作用：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterLongStyle];
NSDate *date = [dateFormatter dateFromString:@"February 16, 2013"];

NSLog(@"%@", date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:00:46.153

如果您希望能够使用本地化的日期格式，您应该使用模板

```
 NSString *dateString = [NSDateFormatter localizedStringFromDate:[NSDate date]
                                                       dateStyle:NSDateFormatterLongStyle
                                                       timeStyle:NSDateFormatterNoStyle];

NSLog(@"%@", dateString);

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];    
[dateFormatter setDateFormat:[NSDateFormatter dateFormatFromTemplate:@"MMMdY"
                                                             options:0
                                                              locale:[NSLocale currentLocale]]];

NSLog(@"%@", [dateFormatter dateFromString:dateString]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T03:42:14.553

Since you have a fixed format that you wish to parse, you must setup the date formatter with the locale of `en_US_POSIX`. Then you must set he date format to `MMMM dd, yyyy`. This will pare any date string that has the full month name, the month day, a comma, then the four-digit year.

# php - 为什么我在提取会话变量时收到此解析错误？

> ID：14917492
> 
> 赞同：0
> 
> 时间：2013-02-17T02:48:50.170
> 
> 标签：php

解析错误：语法错误，意外的“。” 在第 3 行的 /hsphere/local/home/teoti0/daleleeplumbing.com/Bryan/RegnDisplay.php

代码如下：

```
<?PHP
session_start(); //starts session
    echo "Name: " . $_SESSION['name']; . "<br />"; 
    echo "Email: " . $_SESSION['Email']; . "<br />";  
    echo "Password: " . $_SESSION['Password']; . "<br />"; 
    echo "Confirmed Password: " . $_SESSION['Password_Confirm']; .""; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:51:00.393

错位的分号。

```
echo "Name: " . $_SESSION['name'] . "<br />"; 
```

代替

```
echo "Name: " . $_SESSION['name']; . "<br />"; 
```

# subroutine - 如何使用 U2 Toolkit for .NET 将 U2 Business Logic Subroutine 的多值数据转换为 DataSet/DataTable 等 .NET 对象？

> ID：14917496
> 
> 赞同：2
> 
> 时间：2013-02-17T02:49:19.220
> 
> 标签：subroutine, u2, universe, unidata, u2netdk

我有以下子程序。它将 INPUT 作为参数 1，并将多值数据 OUTPUT 作为参数 2 发送。

SUBROUTINE MV_TO_DATASET_SELECT_SUBROUTINE(ARG_INPUT,ARG_OUTPUT)

x = ARG_INPUT ARG_OUTPUT = "100":@VM:"101":@VM:"102":@VM:"103":@FM:"Nancy":@VM:"Andrew":@VM:"Janet" :@VM:"玛格丽特":@FM:"01/06/1991":@VM:"06/07/1996":@VM:"11/08/1999":@VM:"12/10/2001 "

返回

上述子程序多值数据的Schema如下。

```
 DataSet ds = new DataSet();
        DataTable dt = new DataTable("Employee");
        ds.Tables.Add(dt);
        dt.Columns.Add("ID",typeof(Int32));
        dt.Columns.Add("Name", typeof(string));
        dt.Columns.Add("HireDate", typeof(DateTime)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:19:28.780

您可以通过以下方式之一完成此任务：

*   使用 MV_To_DataTable() 和 DataTable_To_MV()。您可以通过将 Empty DataTable 拖放到 Empty DataSet Deginer 中来创建子程序的架构。
*   通过将 Visual Studio Server Explorer 的 U2 子例程拖放到 DataSet Designer 中。U2 Subrotine 通过执行诸如 ST=SQLExecDirect(@HSTMT, "SELECT F1 AS COL1,F2 AS COL2 ,F3 AS COL3 FROM @TMP SLIST 9 ORDER BY 1") 等 API 返回结果集/数据集

## 使用 MV_To_DataTable() 和 DataTable_To_MV()

创建 ASP.NET Web 应用程序项目。在项目名称中键入“WebApplication_Subroutine”。 ![创建 ap.net 应用程序](../Images/55848765e663ae50e31647726f09fee6.png)

添加对 U2NETDK 程序集 (U2.Data.Client) 的引用 ![添加参考](../Images/d080360aa799f504e2b55a34c7ad948b.png)

更改标题“欢迎使用 ASP.NET！” '欢迎使用 U2 Toolkit for .NET Demo on Business Logic Subroutine's multi-value string data to .NET DataSet！ ![更改标题](../Images/e45c7ef081a8ef9337b75626f2875c5b.png)

打开“Default.aspx”文件并进入设计模式。 ![以设计模式打开网页](../Images/13b01204c50f0ed8b03e6fd88a2c699a.png)

请执行下列操作：

*   拖放按钮控件。将其命名为“加载”</li>
*   拖放按钮控件。将其命名为“更新”</li>
*   拖放 GridView 控件。

    ![拖放按钮](../Images/7b9621855cc177d2207903c176d5e7b6.png)

右键单击解决方案资源管理器。选择添加 -> 新建项目数据集。在名称框中，键入“Employee.xsd”</p>

![新项目 - 数据集](../Images/e1438346214de035c341eb75ceff2fe8.png)

将 DataTable 拖放到设计器中。将名称更改为“员工”表。 ![拖动数据表](../Images/fde491c80da263242c9cedc7e788ee6b.png)

创建 3 个新列（U2 子例程 Schema）：

*   ID - 数据类型：INT
*   名称 - 数据类型：字符串
*   HireDate - 数据类型：日期 ![创建 3 列](../Images/9215a4b946632dc18753bb5a269863cc.png) ![数据类型 cols](../Images/766dcc4ca1871198b671aa0814d406cf.png)

在设计模式下打开“Default.aspx”文件。双击“加载按钮”。它将在后面创建事件处理程序代码。 ![加载 evernt 处理程序](../Images/b6c547ac86bc814550f46b74d8441983.png)

剪切并粘贴以下代码。

```
protected void Button1_Click(object sender, EventArgs e)
        {
            U2ConnectionStringBuilder l = new U2ConnectionStringBuilder();
            l.Server = "127.0.0.1";
            l.UserID = "user";
            l.Password = "pass";
            l.Database = "HS.SALES";
            l.ServerType = "universe";
            string lconnstr = l.ToString();
            U2Connection c = new U2Connection();
            c.ConnectionString = lconnstr;
            c.Open();
            U2Command command = c.CreateCommand();
            command.CommandText = "CALL MV_TO_DATASET_SELECT_SUBROUTINE(?,?)";
            command.CommandType = CommandType.StoredProcedure;
            U2Parameter p1 = new U2Parameter();
            p1.Direction = ParameterDirection.InputOutput;
            p1.Value = "";
            p1.ParameterName = "@arg_input";
            command.Parameters.Add(p1);
            U2Parameter p2 = new U2Parameter();
            p2.Direction = ParameterDirection.InputOutput;
            p2.Value = "";
            p2.ParameterName = "@arg_output";
            command.Parameters.Add(p2);
            command.ExecuteNonQuery();

            Employee.EmployeeDataTable dt = new Employee.EmployeeDataTable();

            command.Parameters[1].MV_To_DataTable(dt);

            Session["GridDataset"] = dt;

            this.GridView1.DataSource = dt;
            this.GridView1.DataBind();
        } 
```

![加载代码](../Images/9cbda835acbc8ad6a1eff673d061e8f7.png)

运行应用程序。按“加载”按钮。

![运行 asp.net 应用程序](../Images/e7f3f9b288a20ad9b00c72daaddf27c9.png)

在设计模式下打开“Default.aspx”文件。双击“更新按钮”。它将在页面后面的代码中创建事件处理程序。剪切并粘贴以下代码。

```
 protected void Button2_Click(object sender, EventArgs e)
    {
        DataTable dt = (DataTable)Session["GridDataset"];

        //To TEST, change first row
        string s1 = (string)dt.Rows[0]["Name"];
        dt.Rows[0]["Name"] = s1 + "NewValue";

        // get the modified rows
        DataTable dt_changed = dt.GetChanges();

        //call DATASET_TO_MV_UPDATE_SUBROUTINE
        U2ConnectionStringBuilder l = new U2ConnectionStringBuilder();
        l.Server = "127.0.0.1";
        l.UserID = "user";
        l.Password = "pass";
        l.Database = "HS.SALES";
        l.ServerType = "universe";
        string lconnstr = l.ToString();
        U2Connection c = new U2Connection();
        c.ConnectionString = lconnstr;
        c.Open();
        U2Command command = c.CreateCommand();
        command.CommandText = "CALL DATASET_TO_MV_UPDATE_SUBROUTINE(?)";
        command.CommandType = CommandType.StoredProcedure;
        U2Parameter p1 = new U2Parameter();
        p1.Value = "";
        p1.Direction = ParameterDirection.InputOutput;
        p1.ParameterName = "@arg_data";
        command.Parameters.Add(p1);

        command.Parameters[0].DataTable_To_MV(dt_changed);

        // modified data going to subroutine
        string lData = (string)command.Parameters[0].Value;

        command.ExecuteNonQuery();
    } 
```

![更新代码](../Images/7214efaf7e8c3ad65be03f045d285a6c.png)

单击更新按钮时，请查看调试器中的修改值。 ![调试器](../Images/5ffbcfa0a9c2419f9509bf6f78b73f41.png)

## U2 Subrotine 返回结果集/数据集

在 Visual Studio 服务器资源管理器中创建 U2 数据连接。展开存储过程节点。 ![服务器资源管理器 u2 连接](../Images/e2a00a8584b82b2102e0268d8e75cda2.png)

转到返回结果集/数据集的子程序。将子例程拖放到数据集设计器中。它显示 INPUT 参数和结果集/数据集列。

![拖放子程序](../Images/c177c86f26afc4a51ca40f5fbbf5bc61.png)

# postgresql - 查找我的 Postgres 文本搜索词典

> ID：14917497
> 
> 赞同：8
> 
> 时间：2013-02-17T02:49:38.233
> 
> 标签：postgresql

几个月前，我为全文搜索创建了一个词库。我最近刚刚添加了一些条目，并且（我认为）我像这样更新它：

```
ALTER TEXT SEARCH CONFIGURATION english
    ALTER MAPPING FOR asciiword, asciihword, hword_asciipart
    WITH [my_thesaurus], english_stem; 
```

但是，我实际上不记得我的词库被称为什么。我怎么能弄清楚这个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T18:07:02.510

您可以在以下输出中找到它：

```
SELECT dictname FROM pg_catalog.pg_ts_dict; 
```

# javascript - 有人知道健壮的 JavaScript 伪类吗？

> ID：14917500
> 
> 赞同：0
> 
> 时间：2013-02-17T02:50:37.750
> 
> 标签：javascript, inheritance, scope, pseudo-class, overloading

我正在寻找一种相对简单但有效的机制来实现干净的外观：

*   公共、私有和受保护成员（具有实际的公共/私有/受保护访问权限，但仍可扩展）
*   继承（单个或多个）
*   构造函数重载（最好不必计算 args 并使用一组复杂的嵌套条件检查类型）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:40:37.510

好吧……在写这篇文章之前给自己泡了杯咖啡。唯一我不能帮助你的是超载。但没关系，我们开始吧：

```
// Class pattern with
//    - dynamic prototypes
//    - public, private, static, static private members
// Keeps functions named the way you want it to.
// Working example:
var YourClass = (function(){

    var Pseudo = function(){
        var args = arguments;

        // constuct the instance in here:
        var YourClass = function(){
            var public = this,
                private = {};

            public.foo = args[0] ? args[0] : "bar";
            public.staticPrivateInt = ++static_private.someInt;

            private.fibo = "nacci";

            // fibo is private - return it's value
            // with a getter to make it "protected"
            public.getFibo = function(){
                return private.fibo;
            }

            public.setFibo = function(value){
                if(typeof value === "string"){
                    // handle optional events here
                    return private.fibo = value;
                }else{
                    return false;
                }
            }
        };

        var static = Pseudo,
                 static_private = {};

        // statics:
        static_private.someInt = 100;
        static.increaseSomeInt = function(){
            ++static_private.someInt;
        }

        // extend on creation of an instance:
        YourClass.prototype = args[0] || new Object();  // or anything else, just an example

        return new YourClass;
    };
    return Pseudo;

}()); 
```

**用法：**

```
var myInstance = new YourClass({
    someCfg: true
});

console.log(myInstance.someCfg === true); // will log true 
```

由于 JavaScript 的词法作用域和闭包，我们确实可以**模拟**在其他语言（如 C++、Java 等）中设计类的方式。

使用该模式时请记住以下几点：

1.  在严格模式下，静态、私有或公共等变量名称将导致错误。如果需要，您可以重命名它们。
2.  不应存储静态私有变量，`static.private`因为它们不再是私有的（因此变量`static_private`）。

**这个怎么运作**

基本上，您需要的是：

1.  `public`可通过 访问的成员`<object>.<member>`。在 Javascript 中，这通常使用`this.<member> = <assignment>;`.

    => 为方便起见，创建一个简单的别名： `var public = this;`

2.  `private`成员在构造函数中可见，但在实例中不可见。他们仍然需要可访问`public`方法。

    =>`var private = {};` 你可以创建简单的变量，例如`var fibo="nacci";`，我觉得`private.fibo="nacci";`更具可读性。使用关键字创建的任何变量`var`都不能从构造函数的外部范围访问。

3.  `static`即使尚未创建类的实例，成员也要准备好。在 JavaScript 中执行此操作的常用方法是为构造函数本身分配一个值或函数。[在此处](https://stackoverflow.com/questions/14420178/static-members-in-javascript)查看 SO 问题

    => 同样，为了可读性： `var static = Pseudo;`

4.  `static private`成员：有时，您可能希望拥有在构造函数之外不可见的静态成员。

    => 使用词法范围来存储它们。`var static_private = {};`

有关类模式的进一步阅读：

*   *YAHOO 模块模式*： [http](http://www.yuiblog.com/blog/2007/06/12/module-pattern/) : //www.yuiblog.com/blog/2007/06/12/module-pattern/
*   Douglas Crockford（JS-Hercules）关于私人成员：http: [//javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)
*   [http://www.google.de/search?q=javascript+class+pattern&aq=f&oq=javascript+class+pattern](http://www.google.de/search?q=javascript%20class%20pattern&aq=f&oq=javascript%20class%20pattern)

# arrays - zsh 中的本地数组

> ID：14917501
> 
> 赞同：3
> 
> 时间：2013-02-17T02:50:49.080
> 
> 标签：arrays, zsh, local-variables

Zsh 有两个不错的特性，`local`关键字和数组概念。

```
local my_var # Declare variable local to this function 
```

和

```
arr=(1 2 3) # Create array with 3 elements
arr+=4 # Add a fourth element 
```

分别。

将它们 ( ) 结合起来的想法`local arr=()`是不可抗拒的，但似乎只是给出了一个错误？可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T02:50:49.080

至少[1999](http://www.zsh.org/mla/users/1999/msg00011.html)年的情况是不可能在一条线上，但这种解决方法是存在的：

```
local arr
arr=() 
```

学分应该归功于彼得斯蒂芬森当时回答这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-20T20:01:18.480

当然，现在你可以这样做：

```
local -a arr 
```

# c - 链表说明

> ID：14917507
> 
> 赞同：1
> 
> 时间：2013-02-17T02:51:21.253
> 
> 标签：c, linked-list

我是 C 新手，我正在尝试学习链表，有人可以解释一下下面的代码。我理解其中的一部分，但不是全部。

```
void deletefrombeginning( node **head, node **tail)
{
  node *temp;
  if(*head==NULL)
    return;
  temp=*head;
  if(*head==*tail) 
            *head=*tail=NULL;
  else
      {
          (temp->next)->prev=NULL;  <-- there is where i get lost.
          *head=temp->next;
       }
        free(temp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T02:55:40.200

```
(temp->next)->prev=NULL; 
```

这一行使你的新头的 prev 指针为 NULL。这样当您的链表中的第二个项目成为新的头时：

```
*head = temp->next; 
```

它没有 prev 指针，因此是新的头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T08:51:48.660

* * *

```
 ------              ------         
            |      | <--prev--- |      |
NULL <----- | temp |            | node | -----> ...
            |      | ---next--> |      |
             ------              ------ 
```

* * *

**简短的回答：**

*   `(temp->next)->prev=NULL;`确保`node->prev`不会访问无效内存。
*   `*head=temp->next;`成为`temp`列表的新负责人。

* * *

**长答案：**

*   您目前在`temp`。
*   你不能`temp`先删除，因为你会破坏链接（`node->prev`指向什么？）。
*   这意味着您必须首先删除与`temp`.
*   由于`temp`是第一个节点，`temp->prev`应该指向`NULL`.
*   所以`(temp->next)->prev=NULL;` 等价于`node->prev = NULL;`。
*   我们不能直接做`node->prev = NULL;`，因为我们不知道`node`此时存在。
*   `*head=temp->next`确保新的列表头是`node`（在我上面的 ascii 演示中）。
*   下一步然后释放`temp`.

* * *

**提示：**如果您像我一样挑剔，您可能希望在释放它后立即分配`temp`给`NULL`它。这确保您永远不会错误地访问`temp`其余代码。即使在释放内存后，仍然可以错误地访问内存。

# dns - 当我编辑应用程序域时，为什么 Facebook 会抛出错误？

> ID：14917509
> 
> 赞同：0
> 
> 时间：2013-02-17T02:51:30.937
> 
> 标签：dns, facebook-apps

我注册了一个 .cc 域名（www.kreative.cc）。但是，当我在应用程序管理器的 App Domains 字段中键入“kreative.cc”时，出现错误

> Erro 保存更改时出现问题。请稍后再试。

我确实测试了其他网址，它们都很好。我已经尝试了几天。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T17:11:21.753

您可以使用[facebook graph api](http://developers.facebook.com/docs/reference/api/application/)来编写您的[应用程序设置](http://developers.facebook.com/docs/reference/api/application/)，似乎 facebook 没有以这种方式验证输入。这是php中的一个简单示例：

```
<?php

include 'Zend/Http/Client.php';

$http = new Zend_Http_Client('https://graph.facebook.com/MY_APP_ID');
$http->setMethod('POST');
$http->setParameterPost(array(

        'access_token'                  =>      'MY_APP_ACCESS_TOKEN',
        'app_domains'                   =>      array('mydomain.cc'),
        'website_url'                   =>      'http://mydomain.cc',
        'page_tab_url'                  =>      'http://mydomain.cc',
        'secure_page_tab_url'   =>      'https://mydomain.cc',
));
$response = $http->request()->getBody(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T15:57:50.010

尝试在填写其余字段时将“应用程序域”字段留空 - 无论是 Facebook 应用程序的页面选项卡。这对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T15:21:45.217

我也有同样的问题。我正在关注开发人员错误报告[http://developers.facebook.com/bugs/130468767129410](http://developers.facebook.com/bugs/130468767129410)

如果您使用站点 IP 填写应用程序域名，您将获得成功。例如：`http://50.23.134.34`而不是[http://www.kreative.cc](http://www.kreative.cc)。

# python - Python客户端-服务器问题

> ID：14917510
> 
> 赞同：0
> 
> 时间：2013-02-17T02:51:49.557
> 
> 标签：python, multithreading, sockets, client-server

我正在制作一个聊天程序。我有一个（TCP）服务器，它为它获得的每个连接请求创建一个新线程。

1.  当客户端退出/终止连接时出现问题。服务器引发错误（如下）。我该如何处理？
2.  而且，服务器必须将从一个客户端接收到的“数据”发送到另一个（可变）客户端。
    我该如何实现这个？

客户端退出时收到此错误：

```
Exception in thread Thread-1:
    Traceback (most recent call last):
      File "C:\Python2.7 For Chintoo\lib\threading.py", line 552, in __bootstrap_inner
        self.run()
      File "C:\Python2.7 For Chintoo\lib\threading.py", line 505, in run
        self.__target(*self.__args, **self.__kwargs)
      File "C:\Users\karuna\Desktop\Jython\Python\My Modules\Network\Multi-server.py", line 23, in recv_loop
        data = client.recv(1024)
    error: [Errno 10054] An existing connection was forcibly closed by the remote host 
```

我的脚本：

**多服务器.py**

```
import os, socket, time, threading, random

class Server:
    def __init__(self,host,port,user):
        self.port = port
        self.host = host
        self.user = user
        self.bufsize = 1024
        self.addr = (host,port)

        self.socket = socket.socket(socket.AF_INET , socket.SOCK_STREAM)
        self.socket.bind(self.addr)
        print "Server running on",host,"at port",port

        self.socket.listen(5)

def recv_loop(server,client,caddr):
    print 'Connected To',caddr

    while True:
        global clients
        name = clients[client]
        data = client.recv(1024)
        if not data:
            break
        print name + " said: " + data
    client.close()

host = 'localhost'
port = random.randint(1025,60000)
user = 'No one'

server = Server(host, port, user)

clients = {}
threads = []
while True:
    client, caddr = server.socket.accept()
    # name extraction
    name = client.recv(1024)

    clients[client] = name

    thread = threading.Thread(target=recv_loop, args=(server,client, caddr))
    thread.start() 
```

**客户端.py**

```
from socket import *

host = 'localhost'
name = raw_input('Enter name: ')
port = int(raw_input('Enter server port: '))
bufsiz = 1024
addr = (host, port)

tcpClient = socket(AF_INET , SOCK_STREAM)
tcpClient.connect(addr)

# sending name
tcpClient.send(name)

while True:
    data = raw_input('> ')
    if not data:
        break
    tcpClient.send(data)
raw_input('Enter to Quit') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:43:23.750

我没有在 Python 中完成套接字编程，但您可能希望在客户端退出之前彻底关闭套接字连接。我会`close`在客户端使用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:55:21.720

**问题 1**

只需在客户端关闭套接字连接：

```
raw_input('Enter to Quit')
tcpClient.close() 
```

**问题 2**

您在这里查看生产者消费者问题。

基本解决方案：

接收循环应该获取一个`threading.Condition`，更新一个全局数组并调用`notifyAll`。发送循环应该`condition`从数组中获取、读取数据并发送到客户端。

# bash - -bash：命令替换：第 XX 行：语法错误：文件意外结束

> ID：14917511
> 
> 赞同：5
> 
> 时间：2013-02-17T02:51:52.760
> 
> 标签：bash

为什么下面的代码会给我标题中的错误？

```
_say_hey()
{
    echo "hey"
}
echo "$(_say_hey())" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T02:54:17.437

调用函数时，像普通命令一样调用它（去掉括号）：

```
echo "$(_say_hey)" 
```

注意`echo`这里是多余的；你可以单独写`_say_hey`一行来达到同样的效果。

# jquery - Opera 有时会忽略 jquery 功能，直到用户与页面交互之后

> ID：14917512
> 
> 赞同：0
> 
> 时间：2013-02-17T02:51:54.863
> 
> 标签：jquery, css, opera

我在歌剧中遇到了一个非常奇怪的错误。检查以下代码：

```
$(document).ready(function(){
    var $imgHeight = $('.collection-item-image').width() / 3 * 4;
    $('.collection-item-holder').css('padding-top',$imgHeight + 'px');

    $(window).resize(function(){
        var $imgHeight = $('.collection-item-image').width() / 3 * 4;
        $('.collection-item-holder').css('padding-top',$imgHeight + 'px');
    });
}); 
```

有时，Opera 会忽略在准备好文档时运行的代码。每个其他浏览器都可以正常运行。我以为它可能完全忽略了准备好的文档，但是我用警报功能对其进行了测试，发现它每次都有效。似乎虽然它有时会在正常的文档就绪条件下忽略它，但如果我在函数运行之前添加一个警报，在警报框中按“确定”后，代码每次都运行良好。出于某种原因，有时用户必须与页面交互才能运行。

任何人都知道为什么甚至更好的方法来解决或解决这个问题？请记住，这似乎只在以这种方式设置 CSS 时发生，并且在窗口调整大小时，代码会完美执行并按应有的方式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:33:50.400

根据[文档](http://api.jquery.com/ready/)：“传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序并运行其他 jQuery 代码的最佳位置。当使用依赖的脚本时CSS 样式属性的值，在引用脚本之前引用外部样式表或嵌入样式元素很重要。”

换句话说，这是在页面*结构*准备好后立即运行的，而不是在加载整个页面（图像、外部链接）时运行。由于您说它*有时会*起作用，所以这可能是一种竞争条件，当图像加载速度非常快或从缓存中加载时，它*可能*会在 DOM-ready 事件触发时准备好。**在您的情况下，当页面上的所有**媒体都已加载时， onload 是适当的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:24:23.267

不确定是什么导致了这个问题，但是将函数包装在里面`window.load()`已经解决了这个问题。

# asp.net-mvc - 在 MVC4 中创建子对象 - 父信息未传递给 Create() 控制器

> ID：14917516
> 
> 赞同：2
> 
> 时间：2013-02-17T02:52:55.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下 [HttpGet] Create() 方法：

```
 public ActionResult Create(int? parentId)
    {
        var model = new CreatePersonViewModel();

        // pull parent from db
        var parent = _db.Persons.FirstOrDefault(s => s.Id == parentId);

        model.Parent = parentSet;

        return View("Create", model);
    } 
```

如果我从另一个人的详细信息页面创建一个新人，我会传入该父人的 ID，然后构造一个包含父人的 viewModel。

POST 看起来像这样：

```
 [HttpPost]
    public ActionResult Create(CreatePersonViewModel viewModel)
    {
        if (ModelState.IsValid)
        {

            var parent = viewModel.Parent;  // This is always null for some reason

            var person = new Person() { Name = viewModel.Name };

            // if it has a parent, build new relationship
            if (parent != null)
            {
                person.Parent = parent;
                parent.Children.Add(person);
            };

            _db.Save();

            return RedirectToAction("detail", "person", new { personId = person.Id });
        }
        return View(viewModel);
    } 
```

由于某种原因，被推回 POST 方法的 viewModel 永远不会包含在 GET 控制器方法中定义的 Parent。我如何告诉 MVC 将父级从 GET 推送到 POST，而不会用父级的隐藏字段混淆视图？

如果有帮助，我的观点是：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CreatePersonViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:36:52.617

控制器操作将仅接收明确包含在 HTML 表单中的数据。

如果你想接收 Parent 对象，你需要把它放在隐藏`<input>`标签中。

请注意，来自客户端的任何数据都在攻击者的完全控制之下，并且不可信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:20:47.713

网络是无状态的，那么服务器如何知道您想在幕后传递哪些数据？

您可以使用 TempData 传递数据，它将保留在服务器上，直到您的下一个请求读取它为止。但是我不相信你在这里需要那个。由于您只使用父 ID 和名称之外的任何内容，请将其存储在客户端上 - 即您的视图模型仅包含这些字段 - 在您的视图模型中没有实体。

当您发布到服务器加载您的父母，分配一个新的孩子并保存它。将整个对象发送给客户端是没有意义的。

此外，我会在服务器上验证当前用户是否有权访问这些记录 - 如果适用，除非您的应用程序允许所有用户访问所有人。

# java - Javaw 仍然创建一个控制台窗口；为什么是这样？

> ID：14917524
> 
> 赞同：5
> 
> 时间：2013-02-17T02:55:12.593
> 
> 标签：java, console, jython, javaw

我的游戏引擎是 Jython 和 Java 的组合，所以我正在执行一个 jar 以及一个 python 脚本而不是一个类文件。

```
java -jar Jython.jar init.py 
```

但是，当我将“java”更改为“javaw”时，它不会像通常那样隐藏控制台。为什么会这样，有没有办法解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:00:48.417

我不认为 JavaConsole 是 java.exe 与 javaw.exe 的功能。不同之处在于 java.exe 将 stdout 和 stderr 写入 SystemConsole，而 javaw.exe 运行时没有 stdout 和 stderr 写入 SystemConsole。运行 java.exe 会阻塞，因为它连接到 SystemConsole。运行 javaw.exe 会将控制权返回给正在启动的 SystemConsole（或脚本），并在没有 SystemConsole 的情况下继续运行。

使用 java 控制面板或任务栏上的 java 图标禁用 JavaConsole。

![从 Java 控制面板](../Images/a34c6aa18a36b27e6950924088d6cfb5.png)

![从任务栏java图标](../Images/176275745acf62a9d2ddf60f4b006664.png)

# jquery - jqgrid 没有在 IE 中加载

> ID：14917526
> 
> 赞同：0
> 
> 时间：2013-02-17T02:55:26.850
> 
> 标签：jquery, jqgrid

我有一个 jqgrid，其中包含 Json 数据，并且在 Firefox 和 Chrome 中运行良好。当来到IE时，页面加载时它不会工作，但是当我按F12时，数据会加载然后没有问题，我不明白是什么问题。谁能帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:04:43.830

当我使用 console.log 时，javascript 没有正确加载。所以我使用

```
window.console && console.log(''); 
```

JqG​​rid 工作正常。干杯。请检查以下链接作为我得到答案的地方：

[IE 仅在按 F12 后运行 javascript](https://stackoverflow.com/questions/7602277/ie-runs-javascript-only-after-pressing-f12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:00:18.540

你有任何错误，你能显示一些代码吗？这是一个[较旧的答案](https://stackoverflow.com/a/11105038/403664)，提到在 jqGrid 初始化程序中的最后一个元素之后不能有尾随逗号。没有任何东西可看，这是我在黑暗中的刺。

# python - R 数据框的首选数据格式

> ID：14917528
> 
> 赞同：2
> 
> 时间：2013-02-17T00:02:52.137
> 
> 标签：python, r, dataframe

我正在用 Python 编写数据收集代码。我想生成一个尽可能容易导入 R 的数据框文件。我可以完全控制我的 Python 代码将产生什么，并且我想避免在 R 端进行不必要的数据处理，例如将列转换为因子/数字向量等。另外，如果可能的话，我希望在 R 端尽可能容易地导入该数据，最好是通过调用带有文件名的单个参数的单个函数。

我应该如何将数据存储到文件中才能实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T06:10:34.043

[您可以使用http://docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html) Python 的模块将数据写入 CSV ，然后在 R`csv`中使用就很简单了。（请参阅）`read.csv``?read.csv`

当您使用 将数据读入 R`read.csv`时，除非您另外指定，否则字符串将被转换为因子，数字字段将被转换为数字。空值将转换为`NA`.

导入一些数据后，您应该做的第一件事是查看其中的数据`?str`，以确保其中包含的数据类别符合您的期望。很多次我犯了一个错误，在数字字段中混合了一个字符值，最终得到了一个因子而不是一个数字。

需要注意的一件事是您可能必须设置自己的 NA 字符串。例如，如果您有“-”、“.”或其他一些表示空白的字符，则需要使用`na.strings`参数（可以接受字符串向量，即`c("-",".")`）来`read.csv`.

如果您有日期字段，则需要正确转换它们。如果您不指定日期或时间，R 不一定能识别它们（请参阅 参考资料`?as.Date`）

如果您事先知道每列将是什么，您*可以*使用`colClasses`.

彻底阅读`?read.csv`将为您提供更详细的信息。但我已经概述了一些常见问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T06:51:56.560

如果您的数据不是很大，特别是如果它不包含大量浮点值，那么使用 CSV 的 Brandon 的建议非常好，在这种情况下，CSV 格式效率极低。

更好地处理大型数据集的一个选项可能是在[pandas](http://pandas.pydata.org/)中构建一个等效的 DataFrame并使用它的工具转储到 hdf5，然后以这种方式在 R 中打开它。例如，请参阅[此问题](https://stackoverflow.com/questions/12278347/how-can-i-efficiently-save-a-python-pandas-dataframe-in-hdf5-and-open-it-as-a-da)以获取示例。

这种另一种方法感觉有点矫枉过正，但您也可以使用[pandas 的实验性 R 接口](http://pandas.pydata.org/pandas-docs/stable/r_interface.html)直接将内存中的数据帧传输到 R ，然后直接从 R 中保存。

# ajax - 如何通过 json API 调用获取文件（pdf）？

> ID：14917530
> 
> 赞同：1
> 
> 时间：2013-02-17T02:56:51.440
> 
> 标签：ajax, json, api, get

由于 pdf 关键字，我对这个答案的搜索一直受到干扰。

我正在尝试通过 API 调用获取文档。见下文：

```
(function($) {  // Handles opening a notes list page
   displayDocument = function(documentPath) {
    console.log("reached displayDocument");

    var callApi = documentPath;
    console.log(callApi);

    var documentReq = $.ajax({      
        beforeSend: function() { showLoader(); },
        url: callApi,
        dataType: 'json',
        contentType: 'application/pdf',
        headers: {
            Authorization: 'Token ' + authToken
        }
    });

    documentReq.success(function(data) {
        console.log("Got resume " + data);
    });
    documentReq.error(function(data) {
        console.log("Failed to get resume " + JSON.stringify(data));
    });
};
})(jQuery); 
```

我得到 200 OK 回复，请求转到“错误”。

documentReq.error 函数开始吐出这个：

获取简历失败 {"readyState":4,"responseText":"%PDF-1.4\r\n%����\r\n1 0 obj\r\n<<\r\n/Type /Catalog\ r\n/Pages 2 0 R\r\n>>\r\nendobj\r\n3 0 obj\r\n<<\r\n/CreationDate (D:20060515092800)\r\n/作者 (aaronb) \r\n/创作者 (Ikon Communications)\r\n/制作者 (Ikon Communications)\r\n/标题 (Aaron W)\r\n>>\r\nendobj\r\n2 0 obj\r\n <<\r\n/Type /Pages\r\n/Kids [4 0 R 5 0 R]\r\n/计数 2\r\n/资源 <<>>\r\n\r\n/ MediaBox [.00 .00 595.00 842.00]\r\n>>\r\nendobj\r\n4 0 obj\r\n<<\r\n/Count 1\r\n/Type /Pages\r\n /儿童 [6 0 R]\r\n/父母 2 0 R\r\n/MediaBox [.00 .00 612.00 792.00]\r\n>>\r\nendobj\r\n5 0 obj\r\n <<\r\n/Count 1\r\n/Type /Pages\r\n/Kids [7 0 R]\r\n/Parent 2 0 R\r\n/MediaBox [.00 .00 612.00 792.00 ]\r\n>>\r\nendobj\r\n6 0 obj\r\n<<\r\n/Type /Page\r\n/Parent 4 0 R\r\n/Contents [8 0 R]\r\n/Resources <<\r\n/ProcSet [/PDF /ImageB /ImageC /图像I /文本]\r\n/XObject <<\r\n/ed12522b-184c-403b-ba19-aba6d7723557 9 0 R\r\n>>\r\n\r\n>>\r\n\ r\n>>\r\nendobj\r\n7 0 obj\r\n<<\r\n/Type /Page\r\n/Parent 5 0 R

所以我想我只是错过了如何处理文档本身的东西，与使用 Key: "value"s 的普通 json 调用相比

有什么想法吗？或方向？

提前欢呼

# google-chrome-extension - 如何在 Chrome 扩展中实现带有声音的通知弹出窗口

> ID：14917531
> 
> 赞同：20
> 
> 时间：2013-02-17T02:56:54.517
> 
> 标签：google-chrome-extension, notifications

如何在 chrome 扩展中实现带有声音的通知弹出窗口。

就像[**用于 Gmail 的 Checker Plus**](https://chrome.google.com/webstore/detail/checker-plus-for-gmail/oeopbcgkkoapgobdbedcemjljbihmemj?hl=en)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-01-05T03:41:46.747

我认为`createHTMLNotification`自从写了接受的答案以来，这已经被弃用了。对于现在发生在此线程上的任何人，假设您`notifications`在清单中具有权限，这是一种自 2014 年 1 月起有效的方法：

**背景.js**

```
createNotification();
audioNotification();

function audioNotification(){
    var yourSound = new Audio('yourSound.mp3');
    yourSound.play();
}

function createNotification(){
    var opt = {type: "basic",title: "Your Title",message: "Your message",iconUrl: "your_icon.png"}
    chrome.notifications.create("notificationName",opt,function(){});

    //include this line if you want to clear the notification after 5 seconds
    setTimeout(function(){chrome.notifications.clear("notificationName",function(){});},5000);
} 
```

这里的一般想法是您将发送常规通知，然后在通知创建后立即使用普通的 JavaScript 方法播放声音。当然还有其他方法可以做到这一点并组织它，但我认为这在大多数情况下非常清楚并且很容易实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T07:07:05.423

您可以使用以下代码作为在桌面通知中播放声音的参考，它使用`<audio>`标签与`Desktop Notifications`.

# 示范

### 清单.json

使用清单文件注册通知权限和背景页面。

```
{
    "name": "Notification with Audio",
    "description": "http://stackoverflow.com/questions/14917531/how-to-implement-a-notification-popup-with-sound-in-chrome-extension",
    "manifest_version": 2,
    "version": "1",
    "permissions": [
        "notifications"
    ],
    "background": {
        "scripts": [
            "background.js"
        ]
    }
} 
```

### 背景.js

从后台应用程序创建通知页面。

```
// create a HTML notification:
var notification = webkitNotifications.createHTMLNotification(
    'notification.html' // html url - can be relative
);

// Then show the notification.
notification.show(); 
```

### 通知.html

播放一些随机歌曲

```
<html>
    <body>
        <p>Some Nice Text While Playing Song.. </p>
        <audio autoplay>
        <source src="http://www.html5rocks.com/en/tutorials/audio/quick/test.mp3" type="audio/mpeg" />
        <source src="http://www.html5rocks.com/en/tutorials/audio/quick/test.ogg" type="audio/ogg" />
        </audio>
    </body>
</html> 
```

# 参考

*   [通知](http://developer.chrome.com/extensions/notifications.html)

# java - 如何在java中制作“背景”桌面程序？

> ID：14917533
> 
> 赞同：2
> 
> 时间：2013-02-17T02:57:24.327
> 
> 标签：java, user-interface

我想知道如何制作像在您的桌面上运行但同时不在底部的任务栏中显示图片的那些无声程序之一？

这有点难以解释，因为我的经验仅限于制作显示在任务栏中的 GUI，并且顶部栏带有最小化、最大化和关闭按钮。

我想让一个程序运行，它是这样的：

![在此处输入图像描述](../Images/b7a22d2c4bbb3f8baebb8fd9f72a1df7.png)

看到那些盒子了吗？我将如何使用 Java 创建类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:07:39.270

您可以在 Java 中使用半透明窗口：http: [//docs.oracle.com/javase/tutorial/uiswing/misc/trans_shape_windows.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)

这将取决于平台的功能（您可以查询）。如果不需要半透明，您可能至少需要每个像素的透明度。不知道 Windows 7 和 Mac 是否都支持它们，您必须尝试一下。

# dart - Dart 正在应用程序目录中查找包（加载资源失败）

> ID：14917534
> 
> 赞同：1
> 
> 时间：2013-02-17T02:57:32.143
> 
> 标签：dart, dart-webui, dart-editor

运行 WebUI 新项目生成的代码时出现错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found)
    http://127.0.0.1:3030/Applications/dart/dart-sdk/pkg/web_ui/web_ui.dart
Failed to load a file http://127.0.0.1:3030/Applications/dart/dart-sdk/pkg/web_ui/web_ui.dart 
```

我已经运行了`pub install`，并且包是从 project/packages 目录符号链接的。

我应该设置一个标志吗？

pub.yaml：

```
name: test
description: A sample WebUI application
dependencies:
  browser: any
  js: any
  web_ui: any 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:00:06.730

我在 Preferences > Editor 中有 Package-root 目录，Directory Settings 指向`/Applications/dart/dart-sdk/pkg/`. 清除此字段可解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T19:02:35.150

当您复制/粘贴或移动文件夹时，也会发生这种错误。要修复它，您可以尝试打开 pubspec.yaml 并单击“运行 Pub 安装”（Pub Actions）。在某些情况下，这对我来说很好。

# jquery - 不能在 AJAX 中触发这个 jQuery

> ID：14917537
> 
> 赞同：0
> 
> 时间：2013-02-17T02:58:01.073
> 
> 标签：jquery, ajax

我正在尝试使用这个 jQuery`$projectWrapper.find('#test').html($("figure[style='position: absolute; top: 0px; left: 700px; z-index: 5; height: auto; cursor: pointer;'] img").attr('src'));`

在滑块中使用的这个 AJAX 函数内部。

基本上每次点击导航前或后我需要更新或重新触发我上面的jQuery，以便更新#test html。我尝试放置我的 jQuery，如下所示，`var $navLinksDiv`但它根本没有触发。如何重新编写此函数，以便我的 jquery 在每次单击时触发并更新#test ID 的 html？

谢谢

```
function eQsliderNavInit() {

    var $navLinksDiv = $( '#slides #next-prev-links img' );
    $projectWrapper.find('#test').html($("figure[style='position: absolute; top: 0px; left: 700px; z-index: 5; height: auto; cursor: pointer;'] img").attr('src'));
    var sliderHoverOverFunction = function() {
        if ( !$( 'body' ).hasClass('ie8') ) {
            $navLinksDiv.stop().animate( { opacity: 0.5 }, 200, 'easeInOutExpo' );
        }
        else {
            $navLinksDiv.css('visibility', 'visible');
        }
    } 

    var sliderHoverOutFunction = function() {
        if ( !$( 'body' ).hasClass('ie8') ) {
            $navLinksDiv.stop().animate({ opacity: 0 }, 450, 'easeInOutCubic');         
        }
        else {
            $navLinksDiv.css('visibility', 'hidden');
        }   
    } 

    $( '.slider' ).hover( sliderHoverOverFunction, sliderHoverOutFunction );

} 
```

# php - OAuthException：无效的 OAuth 访问令牌签名

> ID：14917542
> 
> 赞同：1
> 
> 时间：2013-02-17T02:59:59.270
> 
> 标签：php, facebook, facebook-graph-api, curl

当我将此网址直接输入浏览器时，我会将帖子发送到用户提要墙

```
https://graph.facebook.com/xx facebook uid xx/feed?access_token=xx app access token xx&message=Welcome%20to%20App!&method=post 
```

但是`OAuthException: Invalid OAuth access token signature.`当我使用此代码自动发布帖子时，它给了我这个错误

```
<?PHP

    include_once "inc/facebook.php";
    require_once 'inc/config.php';

// Create our application instance
$facebook = new Facebook(array(
    'appId'     => $app_id,
    'secret'    => $app_secret,
    ));

$dbh = new PDO('mysql:dbname='.$db_name.';host='.$db_host.';charset=utf8', $db_username, $db_password );

$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $dbh->prepare('SELECT fb_id FROM offline_access_users');

$stmt->execute();

$body = array(
            'message' => 'Test Multiple Messages', 
            'link'    => '',
            'picture' => '',
            'name'    => '',
            'description'=> ''
            );
    $batchPost=array();
    $i=1;       
    foreach ($stmt as $value) {
    $id = $value['fb_id'];

        $batchPost[] = array(
            'method' => 'POST',
            'relative_url' => "/" . $id . "/feed?access_token=" . $access_token,
            'body' => http_build_query($body) );    
        if($i++ == 50) {
            try {
                $multiPostResponse = $facebook->api('?batch=' . urlencode(json_encode($batchPost)), 'POST');
                echo "Success";
            } catch(FacebookApiException $e) {
                error_log($e);
                echo($e);
            }
            unset($batchPost);
            $i=1;
        }
    }

    if(isset($batchPost) && count($batchPost) > 0 ) {
        try{
            $multiPostResponse = $facebook->api('?batch=' . urlencode(json_encode($batchPost)), 'POST');
            echo "Success";
        } catch(FacebookApiException $e){
            error_log($e);
            echo($e);
        }
    }

$db = null;

?> 
```

我真的不知道如何解决这个问题。请帮我

# javascript - 内容替换功能：用下划线替换空格

> ID：14917545
> 
> 赞同：1
> 
> 时间：2013-02-17T03:00:20.947
> 
> 标签：javascript, replace

这是我的功能：

```
function process() {
var content = document.getElementById('content').value;
content = content.replace(/(<tt>(.*?)<tt>)/g, '$2');
document.getElementById('content').value = content;
} 
```

这是我的 HTML：

```
<textarea id="content" cols="48" rows="8"></textarea><br />
<input type="button" value="Process" onclick="process()" /> 
```

示例代码：

```
<tt>hello<tt> 
```

我的问题的目的是找出我是否可以用“下划线”替换“空格”例如，目前如果您要从上面获取我的示例代码并通过我的函数运行它，您将省略以下代码：

```
hello 
```

如果您要运行此代码：

```
<tt>hel lo<tt> 
```

通过该函数，这将是您的结果：

```
hel lo 
```

我更喜欢的结果是：

```
hel_lo 
```

它将空格替换为下划线。我确实意识到我可以插入这样的东西：

```
content = content.replace(/()/g, '_'); 
```

进入我的函数，但是如果要这样做，然后在下面运行此代码：

```
<tt>d j<tt>1 2 
```

那么结果将是

```
d_j1_2 
```

而不是我更喜欢的

```
d_j1 2 
```

总而言之，我想用下划线替换一个空格，但仅限于我的

```
<tt><tt> 
```

标签。始终感谢您的帮助，并在此先感谢您。我还将提供此示例的链接：[jsfiddle example](http://jsfiddle.net/WVUYX/40/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:04:22.553

想到的第一个方法如下：

```
content = content.replace(/(<tt>(.*?)<tt>)/g, function(m,p1,p2) {
             return p2.replace(/ /g,"_");
          }); 
```

该[`.replace()`方法](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)接受第二个参数中的回调，以便您可以对匹配项进行自定义处理。回调接收匹配和子匹配作为参数，并且无论您的回调返回什么都将用作替换文本，因此您可以仅替换第二个子匹配上的空格。

演示：http: [//jsfiddle.net/WVUYX/42/](http://jsfiddle.net/WVUYX/42/)

# eclipse - Eclipse 中的 Web 服务

> ID：14917546
> 
> 赞同：0
> 
> 时间：2013-02-17T03:00:41.270
> 
> 标签：eclipse, web-services

我在 Eclipse 中设置了许多项目。其中一个项目是 Web 服务客户端项目。当我在 eclipse Juno 中使用 Start Tomcat 插件启动 tomcat 时，我的 Web 服务项目没有运行。我收到 404 http 错误。但是，使用 Eclipse 中的服务器选项卡（在创建我的 Web 服务项目时，还会创建一个服务器项目），如果我启动服务器，我的 Web 服务项目将正确运行。

因此，我认为 Web 服务项目必须使用 Server->Start 选项启动，而不是使用插件启动 Tomcat。

我是 Web 服务的新手。任何人都可以分享一些关于这方面的信息，以及我如何才能让 Web 服务项目使用 Tomcat 插件运行。

问候

菲萨尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:16:37.987

您是否在服务器上添加了 Web 服务项目？右键单击 Webservice 项目并在服务器上运行或右键单击服务器并“添加或删除”资源

# xslt - XSLT 循环 XML 文件，删除子项，重新格式化日期

> ID：14917549
> 
> 赞同：0
> 
> 时间：2013-02-17T03:00:57.870
> 
> 标签：xslt, loops

我有一个很大的 XML 文件，我正在尝试编写循环遍历整个节点集（PRESOL、COMBINE 和 FAIROPS）并删除所有名为 DATE 的子节点的 XSLT。然后，我想将父节点的 DATE 重新格式化为 mm/dd/yyyy。这是我的代码，我使用的是 1.0 版：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="DATE">
    <xsl:text>
    </xsl:text>
    <xsl:text disable-output-escaping="yes">&lt;</xsl:text>
    <xsl:value-of select="name()"/>
    <xsl:text disable-output-escaping="yes">&gt;</xsl:text>
    <xsl:value-of select="concat(substring(., 1, 2), '/', substring(., 3, 2), '/', substring(., 5, 4))"/>
    <xsl:text disable-output-escaping="yes">&lt;/</xsl:text>
    <xsl:value-of select="name()"/>
    <xsl:text disable-output-escaping="yes">&gt;</xsl:text>
    <xsl:text>
    </xsl:text>
</xsl:template>
<xsl:template match="node()|@*">
    <xsl:copy> 
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="DATE[preceding::DATE]"/> 
```

我很难理解如何遍历整个节点集。我希望不要硬编码父节点名称。目前，我的代码只处理第一个父节点。此外，如果父节点没有子节点，我的代码将删除它的 DATE 节点，我不明白为什么。任何帮助将不胜感激。

我的意见

```
 <NOTICES>
  <PRESOL>
   <DATE>01242013</DATE>
   <AGENCY><![CDATA[Department of the Interior]]></AGENCY>
   <OFFICE><![CDATA[Fish and Wildlife Service]]></OFFICE>
   <LOCATION><![CDATA[CGS-WO]]></LOCATION>
   <ZIP>97232</ZIP>
   <CHANGES>
    <MOD>
     <DATE>01242013</DATE>
     <AGENCY><![CDATA[Department of the Interior]]></AGENCY>
     <OFFICE><![CDATA[Fish and Wildlife Service]]></OFFICE>
     <LOCATION><![CDATA[CGS-WO]]></LOCATION>
     <ZIP>97232</ZIP>
    </MOD>
   </CHANGES>
  </PRESOL>
  <COMBINE>
    <DATE>02102013</DATE>
    <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
    <OFFICE><![CDATA[Air Force Materiel Command]]></OFFICE>
    <LOCATION><![CDATA[Tinker OC-ALC  -  (Central Contracting)]]></LOCATION>
    <ZIP>73145-3015</ZIP>
  </COMBINE>
  <COMBINE>
   <DATE>02092013</DATE>
   <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
   <OFFICE><![CDATA[Military Sealift Command]]></OFFICE>
   <LOCATION><![CDATA[MSC Norfolk]]></LOCATION>
  </COMBINE>
  <COMBINE>
   <DATE>02092013</DATE>
   <AGENCY><![CDATA[Department of Veterans Affairs]]></AGENCY>
   <OFFICE><![CDATA[Grand Junction VAMC)]]></OFFICE>
   <LOCATION><![CDATA[Veterans Affairs Medical Center]]></LOCATION>
  </COMBINE>
  <PRESOL>
   <DATE>12272012</DATE>
   <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
   <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
   <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
   <CHANGES>
    <MOD>
     <DATE>01112013</DATE>
     <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
     <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
     <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
    </MOD>
   <MOD>
    <DATE>01112013</DATE>
    <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
    <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
    <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
   </MOD>
   <MOD>
    <DATE>01142013</DATE>
    <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
    <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
    <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
   </MOD>
   <MOD>
    <DATE>01142013</DATE>
    <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
    <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
    <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
   </MOD>
  </CHANGES>
 </PRESOL>
 <FAIROPP>
  <DATE>02082013</DATE>
  <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
  <OFFICE><![CDATA[Bureau of Medicine and Surgery]]></OFFICE>
  <LOCATION><![CDATA[NH Camp Pendleton]]></LOCATION>
  <ZIP>92055</ZIP>
  <CHANGES>
   <MOD>
    <DATE>02122011</DATE>
    <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
    <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
    <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
   </MOD>
  </CHANGES>
 </FAIROPP>
</NOTICES> 
```

期望的输出：

```
<NOTICES>
<PRESOL>
 <DATE>01/24/2013</DATE>
 <AGENCY><![CDATA[Department of the Interior]]></AGENCY>
 <OFFICE><![CDATA[Fish and Wildlife Service]]></OFFICE>
 <LOCATION><![CDATA[CGS-WO]]></LOCATION>
 <ZIP>97232</ZIP>
 <CHANGES>
  <MOD>
   <AGENCY><![CDATA[Department of the Interior]]></AGENCY>
   <OFFICE><![CDATA[Fish and Wildlife Service]]></OFFICE>
   <LOCATION><![CDATA[CGS-WO]]></LOCATION>
   <ZIP>97232</ZIP>
  </MOD>
 </CHANGES>
</PRESOL>
<COMBINE>
 <DATE>02/10/2013</DATE>
 <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
 <OFFICE><![CDATA[Air Force Materiel Command]]></OFFICE>
 <LOCATION><![CDATA[Tinker OC-ALC  -  (Central Contracting)]]></LOCATION>
 <ZIP>73145-3015</ZIP>
</COMBINE>
<COMBINE>
 <DATE>02/09/2013</DATE>
 <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
 <OFFICE><![CDATA[Military Sealift Command]]></OFFICE>
 <LOCATION><![CDATA[MSC Norfolk]]></LOCATION>
</COMBINE>
<COMBINE>
 <DATE>02/09/2013</DATE>
 <AGENCY><![CDATA[Department of Veterans Affairs]]></AGENCY>
 <OFFICE><![CDATA[Grand Junction VAMC)]]></OFFICE>
 <LOCATION><![CDATA[Veterans Affairs Medical Center]]></LOCATION>
</COMBINE>
<PRESOL>
 <DATE>12/27/2012</DATE>
 <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
 <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
 <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
 <CHANGES>
  <MOD>
   <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
   <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
   <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
  </MOD>
  <MOD>
   <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
   <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
   <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
  </MOD>
  <MOD>
   <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
   <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
   <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
  </MOD>
  <MOD>
   <AGENCY><![CDATA[Department of the Air Force]]></AGENCY>
   <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
   <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
  </MOD>
 </CHANGES>
</PRESOL>
<FAIROPP>
 <DATE>02/08/2013</DATE>
 <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
 <OFFICE><![CDATA[Bureau of Medicine and Surgery]]></OFFICE>
 <LOCATION><![CDATA[NH Camp Pendleton]]></LOCATION>
 <ZIP>92055</ZIP>
 <CHANGES>
  <MOD>
   <AGENCY><![CDATA[Department of the Navy]]></AGENCY>
   <OFFICE><![CDATA[Pacific Air Forces]]></OFFICE>
   <LOCATION><![CDATA[354 CONS - Eielson]]></LOCATION>
  </MOD>
 </CHANGES>
</FAIROPP>
</NOTICES> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:26:01.470

`DATE[preceding::DATE]`不正确，因为`preceding`轴包含*不是*当前节点祖先的节点。因此，这将匹配整个文档中除第一个 DATE 之外的*所有DATE。*你想说的是“当前 DATE 元素的任何父级也有一个 DATE 元素”：

```
<xsl:template match="DATE[../ancestor::*/DATE]"/> 
```

这`..`是为了确保我们不匹配上下文节点（当前`DATE`元素正在查看其任何祖先是否具有 DATE 元素）。

顺便说一句，您创建新元素的方法很糟糕。改用这个：

```
<xsl:template match="DATE">
    <xsl:element name="{name()}">
        <xsl:value-of select="concat(substring(., 1, 2), '/', substring(., 3, 2), '/', substring(., 5, 4))"/>
    </xsl:element>
</xsl:template> 
```

尽管在您的情况下甚至没有必要 - 只需让模板直接匹配文本节点：

```
<xsl:template match="DATE/text()">
    <xsl:value-of select="concat(substring(., 1, 2), '/', substring(., 3, 2), '/', substring(., 5, 4))"/>
</xsl:template> 
```

模板的最终版本：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="DATE/text()">
        <xsl:value-of select="concat(substring(., 1, 2), '/', substring(., 3, 2), '/', substring(., 5, 4))"/>
    </xsl:template>

    <xsl:template match="DATE[../ancestor::*/DATE]"/>

</xsl:stylesheet> 
```

# c# - 拆分字符串并乘以 8

> ID：14917550
> 
> 赞同：0
> 
> 时间：2013-02-17T03:01:23.343
> 
> 标签：c#

我遇到了麻烦。用户需要输入一个字符串，然后我需要对字符串进行计数并乘以相同的字符串。例如，如果用户输入字符串 The quick brown fox jumps over the lazy dog；
输出应该是这样的， = 22% 快速 = 11% 棕色 = 11% 狐狸 = 11% 跳跃 = 11% 超过 = 11% 懒惰 = 11% 狗 = 11%

这是我的代码

```
 string phrase = "The quick brown fox jumps over the lazy dog";
        string[] arr1 = phrase.Split(' ');

        for (int a = 0; a < arr1.Length; a++)
        {
            Console.WriteLine(arr1[a]);
        }

        Console.ReadKey(); 
```

该值为 22%，使用此公式计算，2/9 * 100。2 因为“the”被使用了两次，除以 9 因为字符串中有 9 个单词。我正在尝试比较每个字符串以确定它们是否相同但无法这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:17:09.577

强制性 LINQ 版本：

```
string phrase = "The quick brown fox jumps over the lazy dog";
string[] words = phrase.Split(' ');
var wc = from word in words
         group word by word.ToLowerInvariant() into g
         select new {Word = g.Key, Freq = (float)g.Count() / words.Length * 100}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:24:16.403

最少使用`LINQ`！

```
 string phrase = "The quick brown fox jumps over the lazy dog";
        string[] words = phrase.ToLower().Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

        var distinct_words = words.Distinct().ToArray();
        foreach (string word in distinct_words)
        {
            int count = words.Count(wrd => wrd == word);
            Console.WriteLine("{0} = {1} % ", word, count * 100 / words.Length);
        } 
```

或者

```
 string phrase = "The quick brown fox jumps over the lazy dog";
        string[] words = phrase.ToLower().Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
        var needed_lines =  from word in words.Distinct() let count = words.Count(wrd => wrd == word) select String.Format("{0} = {1} % ", word, count * 100 / words.Length);

        foreach (string neededLine in needed_lines)
        {
            Console.WriteLine(neededLine);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T03:07:03.480

我会通过使用两个列表来做到这一点

```
List<String> words  = new List<String>();
List<int> weight = new List<int>(); 
```

当你遍历你的字符串时，你只将唯一的单词添加到单词列表中，然后权重列表的相应索引增加 1；

然后，当您完成后，您可以将每个权重值除以字符串的长度 []

至于获取唯一值，您可以通过执行以下操作来完成：

*   自动将第一个字符串添加到列表中
*   之后的每个字符串都做 words.Contains(string[x])
*   如果它不包含它然后添加它
*   如果确实包含它，则执行 words.indexOf(string[x])
*   然后增加权重列表中的相应索引

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T03:20:34.297

```
string phrase = "The quick brown fox jumps over the lazy dog";
var parts = phrase.Split(' ');
var wordRatios = parts
                    .GroupBy(w => w.ToLower())
                    .Select(g => new{
                        word = g.Key,
                        pct = Math.Round(g.Count() * 100d / parts.Length)
                    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T03:53:40.763

你可以试试这个：

```
 var  yourarr = phrase.Split(' ').GroupBy(word => word.ToUpper()).Select(w => ((w.Count()*100/ phrase.Split(' ').Distinct().Count())).ToString()+"%"); 
```

# jquery - 在浏览器宽度更改之前，Div 的位置不正确

> ID：14917553
> 
> 赞同：0
> 
> 时间：2013-02-17T03:01:44.627
> 
> 标签：jquery, jquery-selectors

我一直在这个网站上工作，这个网站现在通过 wordpress 运行了很长时间。我的问题的基础是由我创建的这个 jquery 系统引起的，它在其他 div 之后显示 div，然后`nth-child`根据查看器浏览器宽度更改它们的位置。所以我在 wordpress 中有一个循环，它在一个名为“doublearticlewrapper”的 div 中显示我所有的帖子缩略图。默认情况下，有 4 个 div / 缩略图按行显示.. 总共有 64 个 div / 缩略图（我知道很多！）。

然后使用 jQuery 创建这 6 个额外的 div，它们本质上是广告点，这些 div 被称为“doublearticlewrapperadmp”。它们通过 jquery 和`nth-child`. 这是这个 repositoning `nth-child`jQuery 系统的 jQuery 代码：

```
$(document).ready(function(){ 
var $window = $(window);
var resized=false;
var resized500=false;
var resized600=false;
var resized700=false;
var resized800=false;

var sadfdsf=true;
var theDivs={
"div1": makeSpecialBox("doublearticlewrapperadmp", 'morecode'),

"div2": makeSpecialBox("doublearticlewrapperadmp", 'morecode'),

"div3": makeSpecialBox("doublearticlewrapperadmp", 'morecode'),

"div4": makeSpecialBox("doublearticlewrapperadmp", 'morecode'),

"div5": makeSpecialBox("doublearticlewrapperadmp", 'morecode'),

"div6": makeSpecialBox("doublearticlewrapperadmp", 'morecode'),

};

function makeSpecialBox(className, content) {
// Create a new special box with the class name and the content
var specialBox = $("<div />").addClass(className).html(content);
// Return the special box
return specialBox;
}

function removeSpecialBoxes() {
// Get the special boxes
var specialBoxes = $("#wrapper div").filter("[class^=doublearticlewrapperadmp]")
// Remove the special boxes
specialBoxes.remove();
}

function setNthPosition(theDiv,newPos){
// Generate the special box
var theClone=theDivs["div"+theDiv].clone();
// Append the special box after the nth-child
$("#wrapper div:nth-child("+newPos+")").after(theClone);
}

function checkWidth() {
var windowsize = $window.width();
if (windowsize >= 1442) {
    //if the window is in between the sizes of 440 and 500px
    //if(resized==false){
        // Remove special boxes
        removeSpecialBoxes();
        // Reposition
        setNthPosition(1,7);
        setNthPosition(2,15);
        setNthPosition(3,29);
        setNthPosition(4,37);
    setNthPosition(5,51);
    setNthPosition(6,61);
        resized=true;
  //  }
}

var windowsize = $window.width();
if (windowsize > 1022 && windowsize < 1441) {
    //if the window is in between the sizes of 500 and 600px
   // if(resized500==false){
         // Remove special boxes
        removeSpecialBoxes();
        // Reposition
       setNthPosition(1,7);
        setNthPosition(2,15);
        setNthPosition(3,29);
        setNthPosition(4,37);
    setNthPosition(5,51);
    setNthPosition(6,61);
        resized500=true;

   // }
 } 

if (windowsize > 479 && windowsize < 1023) {
    //if the window is in between the sizes of 600 and 700px
   // if(resized600==false){
        // Remove special boxes
        removeSpecialBoxes();
        // Reposition
        setNthPosition(1,7);
        setNthPosition(2,11);
        setNthPosition(3,23);
        setNthPosition(4,28);
    setNthPosition(5,39);
    setNthPosition(6,48);
        resized600=true;

    //}
}

 if (windowsize <=479) {
    //if the window is in between the sizes of 600 and 700px
   // if(resized700==false){
        // Remove special boxes
        removeSpecialBoxes();
        // Reposition
        setNthPosition(1,10);
        setNthPosition(2,20);
        setNthPosition(3,30);
        setNthPosition(4,40);
    setNthPosition(5,50);
    setNthPosition(6,60);
        resized600=true;

    //}
}

}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth);
}); 
```

这是一个非常长的代码，但基本上，这段代码创建了 6 个名为“doublearticlewrapperadmp”的 div，这些 div 显示在特定位置`nth-child`，然后如果查看者浏览器宽度在我的四个指定宽度之一中，则重新定位。

所有这些代码都可以接受一件破坏交易的事情......在浏览器调整像素大小或检查谷歌浏览器中的元素之前，jQuery div（doublearticlewrapperadmp）不会显示在正确的位置。这是一个真正的耻辱，因为我的网站依赖于使这个 jquery 代码正常工作。

这是我的网站（我无法将所有内容复制并粘贴到 jsFidle 中，因为有相当多的 PHP 代码）：

[http://www.motodz.com](http://www.motodz.com)（将浏览器大小调整一两个像素，或检查 chrome 中的元素以查看灰色广告框的位置变化）

我的网站是一个在线越野摩托车新闻网站，目前处于开发阶段...根据查看者的浏览器宽度，会有一些额外的空白或空间，但我会解决这个问题。通过 jquery 显示的 div 是灰色框，上面写着“在这里做广告”。这些 div 称为“doublearticlewrapperadmp”。尝试将浏览器大小调整一个像素，并观察 div 是如何移动到正确`nth-child`位置的。当查看器浏览器宽度更改为我指定的宽度之一时，这些 div 应该重新定位（并重新定位），但默认情况下它们位于不正确的位置。所以...

**情况：**

*   我有通过 jQuery & 放置在循环 div/缩略图之后的 div `nth-child`。

*   这些 div`nth-child`根据我的四个浏览器宽度范围重新定位或更改位置。

**问题：**

*   `nth-child`在将浏览器宽度调整为像素大小或在 Chrome 中检查元素之前，div 不会显示在正确的位置。

那么我该如何解决这个问题，以便通过 jQuery 显示的 div`nth-child`默认处于正确位置？任何帮助将真正，真正，真正感激！:)

**PHP循环代码：**

```
<?php if ( have_posts() ) : ?>
<?php while ( have_posts() ) : the_post(); ?>

.doublearticlewrapper code for thumbnail posts go here

<?php endwhile; ?> 
```

**///更新：///**

我将适当的 div 更改为类而不是 ID。这在某种程度上阻止了浏览器宽度更改时的闪烁问题。而且我还创建了一个 jsFiddle 来展示这个问题。我复制并粘贴了确切的 jQuery 代码并粘贴了主要的 CSS 代码。这是 jSfiddle：

[http://jsfiddle.net/Rs3wt/4/](http://jsfiddle.net/Rs3wt/4/)（请调整 HTML 窗口的大小，以便连续 4 个 div）

jSfiddle 实际上工作正常（除了微妙的闪烁）。这就是它正常工作的原因。默认情况下，第一个广告 div 在第 7 个文章 div 之后，第二个在 15 之后，第三个在 29 之后，第四个在 37 之后。这些都是我在 jQuery 代码中指定的所有正确位置。现在，如果你访问我的网站：

[http://www.motodz.com](http://www.motodz.com)

第一个广告 div 出现在第 7 个 div 之后（应该如此），但第二个广告 div 出现在第 16 个（而不是第 15 个）div 之后，然后第三个出现在第 31 个（而不是第 29 个）div 之后，然后是第四个广告 div出现在第 40 个（而不是第 37 个）div 之后。

如果您访问我的网站，请查看第一个广告 div 之后的任何广告 div，然后调整浏览器的大小或检查 google chrome 中的元素以观察它们移动到正确的位置。

所以这里的问题是，在我的网站上，广告 div 框在第 7、第 16、第 31 和第 40 个 div 之后加载，而不是在第 7 个、第 15、第 29 和第 37 个 div 之后加载，就像我在 jQuery 代码中指定它们的方式一样以及它们如何在 jsFiddle 演示中加载。

我不知道为什么它们会像 jsfiddle 一样加载到 Wordpress 中的不同位置，我尝试剥离所有其他 jquery 代码以查看它们是否是导致加载不正确的另一个代码，但它不起作用。也许它与循环有关，它创建了相同 div 的副本，就像在 jsfiddle 中一样，我手动输入了所有 div。我不知道，但任何帮助都会真正受到赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:08:58.123

问题的核心原因是[`:nth-child()`](http://api.jquery.com/nth-child-selector/)当广告项添加到 DOM 时，选择器在初始加载时的行为不符合预期。它本质上是在忽略它们。

如果您要计算每个广告之前有多少非广告项目，那么这些数字是有道理的。

为了解决这个问题，我建议你[`:nth-of-type()`](http://api.jquery.com/nth-of-type-selector/)在方法中使用选择器`setNthPosition()`。

```
function setNthPosition(theDiv, newPos) {
    // Generate the special box
    var theClone = theDivs["div" + theDiv].clone();
    // Get the nth-child
    var nthChild = $("#wrapper > div:nth-of-type(" + newPos + ")");
    // Append the special box after the nth-child
    nthChild.after(theClone);
} 
```

[jsfiddle](http://jsfiddle.net/rN64Y/3/) -使用**新方法**`:nth-of-type()`

[jsfiddle](http://jsfiddle.net/rN64Y/1/) -使用**原始方法**`:nth-child()`

# sml - 在 smlnj 中使用非默认重载运算符

> ID：14917554
> 
> 赞同：1
> 
> 时间：2013-02-17T03:01:59.893
> 
> 标签：sml, smlnj

smlnj 将使重载运算符，如 op + 默认使用 int，现在我想它返回一个真正的函数 * real -> real，我该怎么做内联方式？

“内联方式”意味着不像绑定一个新的val：

```
fun add(x:real,y:real) = x + y; 
```

如果我的记忆是正确的，那么有一些语法允许 sml 它只是做一些类似“cast” op + 到真实的事情，但我真的无法在任何地方找到它..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:47:54.613

有多种方法可以让 SML 键入`op+`作为真正的对应项。

根据您拥有的代码，

*   您可以按照建议，键入注释周围的函数，从而强制参数为`op+`实数类型。

*   由于您不固定加法函数（可能用作高阶函数？），您也可以从真实模块传递加法函数`Real.+`

*   或者你可以像这样注释它：`op+ : real * real -> real`，考虑到你可以使用它，这真的很丑陋和愚蠢`Real.+`。但这是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:32:22.487

如果运算符的默认实例不是您的值类型所需的实例，您可以在操作数上使用类型注释来强制执行所需的类型。

例如，虽然

```
val f = fn a => a + a 
```

将被输入`int -> int`，这个值

```
val g = fn a:real => a + a 
```

将被键入`real -> real`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:21:38.720

你可以声明

```
open Real 
```

在定义函数的范围内，但我强烈建议不要这样做。对函数进行类型注释是最好的方法。您不必注释每个参数，顺便说一句，做一个就足够了，或者在这种情况下，甚至是返回类型：

```
fun add(x : real, y) = x + y

fun add(x, y) : real = x + y 
```

# c - C：通过在函数中转换 void 指针来声明不同的类型

> ID：14917564
> 
> 赞同：0
> 
> 时间：2013-02-17T03:04:39.030
> 
> 标签：c, casting, struct, void-pointers

以下`insertSNode`函数插入`item`和`return`更新指针。在`insertSnode`函数中，来自不同`struct`的每个数据都被相应地取消引用。

**问题：我在****(LINE 1)、(LINE 2)、(LINE 3)、(LINE 4)** 上收到编译器错误，并显示以下错误消息：

> “成员引用基类型 'void' 不是结构或联合。”

**问题：**

如何摆脱编译器错误？如果我不能，或者，我们是否有更好的解决方案来编写与这种情况相同的函数？假设有太多`struct`类型（即Type_A、Type_B 等），用不同的类型声明创建不同的函数是极其低效的。

```
*pListTypeA = (Type_A *) insertSnode(*pListTypeA, pPreTypeA, pTypeAItem, TYPEA);
*pListTypeB = (Type_B *) insertSnode(*pListTypeB, pPreTypeB, pTypeBItem, TYPEB);
*pListTypeC = (Type_C *) insertSnode(*pListTypeC, pPreTypeC, pTypeCItem, TYPEC);
// more assignments 
```

`insertSnode`定义：

```
void* insertSnode(void* pList, void* pPre, char* item, const int type) {
    void *pNew;

    if (TYPEA == type) {
        pList = (Type_A*) pList;
        pPre =  (Type_A*) pPre;
        pNew =  (Type_A*) pNew;
    } else if (TYPEB == type) {
        pList = (Type_B*) pList;
        pPre =  (Type_B*) pPre;
        pNew =  (Type_B*) pNew;
    } else (TYPEC == type) {
        pList = (Type_C*) pList;
        pPre =  (Type_C*) pPre;
        pNew =  (Type_C*) pNew;
    }
    if (!(pNew = malloc(sizeof(*pList)))) {
        printf(ERR_NOT_ENOUGH_MEMORY);
        exit(EXIT_NOT_ENOUGH_MEMORY);
    }
    pNew->name = item;    // compiler error: (LINE 1)
    if (pPre == NULL) {
        pNew->link = pList;    // compiler error: (LINE 2)
        pList = pNew;
    } else {
        pNew->link = pPre->link;    // compiler error: (LINE 3)
        pPre->link = pNew;    // compiler error: (LINE 4)
    }
    return pList;
} 
```

**笔记：**

仅供参考：我能够在没有用于类型声明的 if 语句和只有一种类型（例如 Type_A）的情况下运行此代码。所以，我们都知道除了类型声明之外没有外部问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:07:31.853

这里的问题是下面的行

```
pList = (TYPE_A*) pList; 
```

仍然分配给一个`void*`指针，所以强制转换是无用的，其余代码的行为就好像它没有发生一样。

我不知道一个干净的方法来整齐地解决这个问题我很抱歉。我打算建议一个中间体`struct`，但这不起作用，因为您想直接修改实例。

如果是这样`C++`，泛型将是答案..

为了使您当前的想法发挥作用，您需要为每种类型创建不同的变量并将其转换为这些变量，或者在每次要使用变量时进行转换。

或者尝试按照 Michael Pryor 的建议将类型统一为一种。

否则，您可以尝试使用宏 - 请参阅下面的示例以了解上述代码中的一行。

```
#define OPERATEONTYPE(Type,TypeEnum)\
if(type == TypeEnum) {\
    ((Type*)pNew)->name = item;\
}

void* insertSnode(void* pList, void* pPre, char* item, const int type) {
         OPERATEONTYPE(Type_A,TYPEA)
    else OPERATEONTYPE(Type_B,TYPEB)
    else ....
}

#undef OPERATEONTYPE //should only be used/usable within that function anyway 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:20:40.970

如果每个“结构类型”都有一些共同的值（名称、下一个、上一个等），那么也许您想使用联合？将公共部分存储在通用结构中，然后使用联合来存储非公共部分。

注意@KarthikT 的回答是正确的，这些确实是语法错误，因为 pNew 始终是一个 void 类型，并且没有与之关联的“结构”，所以 pNew->name 是一个无意义的构造。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-17T03:29:12.343

正如 Karthik 所说，您必须在`c++`.
在 c 中，有一个解决方案。删除. `if...else if...else`_ 如下使用它。`insertSnode()`

```
void* insertSnode(void* pList, void* pPre, char* item, const int type) {
void *pNew;
 if (!(pNew = malloc(sizeof(*pList)))) {
    printf(ERR_NOT_ENOUGH_MEMORY);
    exit(EXIT_NOT_ENOUGH_MEMORY);
}
if (TYPEA == type) {
   if(pPre==NULL){
   (Type_A*)pNew->name=item;
   (Type_A*)pNew->link=plist;
   (Type_A*)pList=pNew;
 }else{
    (Type_A*)pNew->link=(Type_A*)pPre->link;
     (Type_A*)pPre->link;
  }
} else if (TYPEB == type) {
    if(pPre==NULL){
   (Type_B*)pNew->name=item;
   (Type_B*)pNew->link=plist;
   (Type_B*)pList=pNew;
 }else{
    (Type_B*)pNew->link=(Type_B*)pPre->link;
     (Type_B*)pPre->link;
  }
} else if(TYPEC == type) {
   if(pPre==NULL){
   (Type_C*)pNew->name=item;
   (Type_C*)pNew->link=plist;
   (Type_C*)pList=pNew;
 }else{
    (Type_C*)pNew->link=(Type_c*)pPre->link;
     (Type_C*)pPre->link;
  }
}

return pList;
} 
```

# python - 如何在 Python 中解析 Google Maps API 数据？

> ID：14917565
> 
> 赞同：0
> 
> 时间：2013-02-17T03:04:44.583
> 
> 标签：python, google-maps

我正在尝试解析我收到的 json 数据

```
 {'results': [{'address_components': [{'long_name': 'New York',
                                      'short_name': 'New York',
                                      'types': ['locality', 'political']},
                                     {'long_name': 'New York',
                                      'short_name': 'NY',
                                      'types': ['administrative_area_level_1',
                                                'political']},
                                     {'long_name': 'United States',
                                      'short_name': 'US',
                                      'types': ['country', 'political']}],
              'formatted_address': 'New York, NY, USA',
              'geometry': {'bounds': {'northeast': {'lat': 40.9152414,
                                                    'lng': -73.70027209999999},
                                      'southwest': {'lat': 40.495908,
                                                    'lng': -74.2590879}},
                           'location': {'lat': 40.7143528,
                                        'lng': -74.00597309999999},
                           'location_type': 'APPROXIMATE',
                           'viewport': {'northeast': {'lat': 40.9152414,
                                                      'lng': -73.70027209999999},
                                        'southwest': {'lat': 40.4959143,
                                                      'lng': -74.2557349}}},
              'types': ['locality', 'political']},
             {'address_components': [{'long_name': 'Manhattan',
                                      'short_name': 'Manhattan',
                                      'types': ['sublocality',
                                                'political']},
                                     {'long_name': 'New York',
                                      'short_name': 'New York',
                                      'types': ['locality', 'political']},
                                     {'long_name': 'New York',
                                      'short_name': 'New York',
                                      'types': ['administrative_area_level_2',
                                                'political']},
                                     {'long_name': 'New York',
                                      'short_name': 'NY',
                                      'types': ['administrative_area_level_1',
                                                'political']},
                                     {'long_name': 'United States',
                                      'short_name': 'US',
                                      'types': ['country', 'political']}],
              'formatted_address': 'Manhattan, New York, NY, USA',
              'geometry': {'bounds': {'northeast': {'lat': 40.882214,
                                                    'lng': -73.907},
                                      'southwest': {'lat': 40.6795479,
                                                    'lng': -74.047285}},
                           'location': {'lat': 40.7902778,
                                        'lng': -73.9597222},
                           'location_type': 'APPROXIMATE',
                           'viewport': {'northeast': {'lat': 40.820045,
                                                      'lng': -73.90331300000001},
                                        'southwest': {'lat': 40.698078,
                                                      'lng': -74.03514899999999}}},
              'partial_match': True,
              'types': ['sublocality', 'political']}],
 'status': 'OK'}
[
   {
      "lat": 40.7143528, 
      "lng": -74.00597309999999
   }, 
   {
      "lat": 40.7902778, 
      "lng": -73.9597222
   }
] 
```

例如，我如何能够解析“结果”？我想打印出结果中的所有数据。我的代码是...

```
import urllib, json
import pprint

URL2 = "http://maps.googleapis.com/maps/api/geocode/json?address=New+York&sensor=false"

googleResponse = urllib.urlopen(URL2)
jsonResponse = json.loads(googleResponse.read())
pprint.pprint(jsonResponse)
test = json.dumps([s['geometry']['location'] for s in jsonResponse['results']], indent=3)
print test['results'] 
```

我得到的错误是

回溯（最近一次通话最后）：

文件“C:/Python27/jstox.py”，第 10 行，在

打印测试['结果']

TypeError：字符串索引必须是整数，而不是 str

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:29:52.207

你实际上已经得到了你想要的结果。

```
import urllib, json
import pprint

URL2 = "http://maps.googleapis.com/maps/api/geocode/json?address=New+York&sensor=false"

googleResponse = urllib.urlopen(URL2)
jsonResponse = json.loads(googleResponse.read())
pprint.pprint(jsonResponse)
pprint.pprint(jsonResponse['results']) 
```

如果您熟悉这些，在这种情况下，可以将 json 数据与 Python[字典](http://docs.python.org/2/tutorial/datastructures.html)类似地处理。

# imacros - IMacros：语法错误：缺失；before 语句（错误代码：991）

> ID：14917567
> 
> 赞同：-5
> 
> 时间：2013-02-17T03:05:06.307
> 
> 标签：imacros

我正在尝试编辑我的 javascript 代码以使其正常运行。我不断收到这个语法错误： SyntaxError: missing ; before 语句（错误代码：991）

这是我的脚本：

```
VERSION BUILD=7601105 RECORDER=FX
TAB T=1
SET !ERRORIGNORE YES
URL GOTO=http://addmefast.com/free_points/twitter.html
URL GOTO=addmefast.com/free_points/twitter.html
WAIT SECONDS=5
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
TAG POS=1 TYPE=A ATTR=TXT:Follow
WAIT SECONDS=30
URL GOTO=http://addmefast.com/free_points/twitter_tweets.html
URL GOTO=addmefast.com/free_points/twitter_tweets.html
WAIT SECONDS=5
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
TAG POS=1 TYPE=A ATTR=TXT:Tweet
WAIT SECONDS=30
URL GOTO=http://addmefast.com/free_points/twitter_retweets.html
URL GOTO=addmefast.com/free_points/twitter_retweets.html
WAIT SECONDS=5
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
TAG POS=1 TYPE=A ATTR=TXT:Retweet
WAIT SECONDS=30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:49:04.373

这是真正的 javascript imacros 代码：

```
var macro;
macro =  "CODE:";
macro +=  "VERSION BUILD=7601105 RECORDER=FX" + "\n"; 
macro +=  "TAB T=1" + "\n"; 
macro +=  "SET !ERRORIGNORE YES" + "\n"; 
macro +=  "URL GOTO=http://addmefast.com/free_points/twitter.html" + "\n"; 
macro +=  "URL GOTO=addmefast.com/free_points/twitter.html" + "\n"; 
macro +=  "WAIT SECONDS=5" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Follow" + "\n"; 
macro +=  "WAIT SECONDS=30" + "\n"; 
macro +=  "URL GOTO=http://addmefast.com/free_points/twitter_tweets.html" + "\n"; 
macro +=  "URL GOTO=addmefast.com/free_points/twitter_tweets.html" + "\n"; 
macro +=  "WAIT SECONDS=5" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Tweet" + "\n"; 
macro +=  "WAIT SECONDS=30" + "\n"; 
macro +=  "URL GOTO=http://addmefast.com/free_points/twitter_retweets.html" + "\n"; 
macro +=  "URL GOTO=addmefast.com/free_points/twitter_retweets.html" + "\n"; 
macro +=  "WAIT SECONDS=5" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "TAG POS=1 TYPE=A ATTR=TXT:Retweet" + "\n"; 
macro +=  "WAIT SECONDS=30" + "\n"; 
iimPlay(macro); 
```

# android - Sqlite 数据库创建，Android 最佳实践

> ID：14917569
> 
> 赞同：0
> 
> 时间：2013-02-17T03:05:42.417
> 
> 标签：android, android-sqlite

我有一个很少有表的数据库。我想知道，在数据库中创建表的最佳方法是什么。我的表同时包含字符串（文本）和数字（整数和双精度数）。我应该使用所有数据类型 text、int、double 等创建表，还是应该使用所有文本创建表并在插入和读取以供显示之前对其进行转换。

假设这是我的桌子......

```
sqlDB.execSQL("create table if not exists "+scriptName+"(dateofpurchase text, buyorsell text," +
                " purchasedquantity int, purchasedprice double, investmentwithoutbrokerage double," +
                " brokerage double, servicetax double, stt double, stampduty double, othertaxes double," +
                " investmentwithbrokerage double)"); 
```

如果我使用所有“文本”创建表并在需要时对字符串进行必要的转换，而不是创建具有不同数据类型的表。

```
sqlDB.execSQL("create table if not exists "+scriptName+"(dateofpurchase text, buyorsell text," +
                    " purchasedquantity text, purchasedprice text, investmentwithoutbrokerage text," +
                    " brokerage text, servicetax text, stt text, stampduty text, othertaxes text," +
                    " investmentwithbrokerage text)"); 
```

在将数据插入表之前，我会将所有值转换为字符串，并在从表中检索值时，（用于计算）我会将它们转换回各自的数据类型。为了在屏幕上显示，我可以直接将它们用作字符串。

如果我如上所述创建表，那么创建具有所有数据类型的表有什么缺点/优点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:44:33.290

始终使用正确的数据类型创建表。在 SQLite 中，您不需要区分 BYTE 和 INTEGER 或 VARCHAR(n) 和 TEXT，数字和字符串之间存在显着差异。使用准确的类型可以使您的模型更易于理解，并且可以防止无效值，即数字字段中的字符串。从数字字段到字符串的转换很便宜；还要考虑您可能希望正确格式化货币值。因此，将它们存储为字符串不仅不切实际，而且可能会使您的代码严重复杂化（并破坏）。

# ember.js - 为什么我在 pre2 上工作的内容绑定不能在 RC 上工作

> ID：14917578
> 
> 赞同：0
> 
> 时间：2013-02-17T03:07:27.503
> 
> 标签：ember.js

我的 pre 2 中有以下代码

```
router.get('contentWithToolbarController').connectOutlet('toolbar', 'toolbar', {
    x1ButtonsVisible: true,
    x2ButtonsVisible: true,
    x3ButtonsVisible: true,
    x4ButtonsVisible: true
}); 
```

它正确绑定了“toolbarController”内容，模板/视图将反映此数据..

现在我试图通过在 setupController 中设置工具栏控制器的内容来在 RC 中进行类似的操作，所以我有

```
setupController: function(controller, model) {
    var toolbarController = this.controllerFor('toolbar');
        toolbarController.set('content', {
            x1ButtonsVisible: true,
            x2ButtonsVisible: true,
            x3ButtonsVisible: true,
            x4ButtonsVisible: true
        });
}) 
```

但这不起作用，视图不会根据这些设置更新。

我做错了什么？我的哪个假设是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:39:59.737

没有`this.controllerFor`了。

这`setupController`是我们看到的`App.ToolbarRoute`吗？如果是这样，您可以`controller`从函数的参数设置实例上的内容。

如果不是，那么您需要使用`needs`来设置另一个控制器：

**路由器**

`setupToolbar`每次我们进入这条路线时，指示控制器调用控制器上的方法。

```
App.IndexRoute = Ember.Route.extend({
    setupController: function(controller) {
        controller.setupToolbar();
    }
}); 
```

**控制器**

`needs`告诉`IndexController`它需要什么，并实际`setupToolbar`设置您的工具栏。这是建立另一个与`IndexController`.

```
App.IndexController = Ember.Controller.extend({
    needs: ['toolbar'],
    setupToolbar: function() {
        var toolbarController = this.get('controllers.toolbar');
        toolbarController.set('content', {
            x1ButtonsVisible: true,
            x2ButtonsVisible: true,
            x3ButtonsVisible: true,
            x4ButtonsVisible: true
        });

        // Is it true?
        console.log(toolbarController.get('content.x1ButtonsVisible'));
    }
}); 
```

小提琴：http: [//jsfiddle.net/pBUK7/](http://jsfiddle.net/pBUK7/)

进行此更改的原因是**不**`IndexRoute`应该负责设置其他不属于. 如果你真的需要这个功能，它应该像我们上面所做的那样自己完成。**`IndexController``IndexController`**

# java - 使用串行通信在微控制器上写入数据时遇到问题

> ID：14917580
> 
> 赞同：1
> 
> 时间：2013-02-17T03:07:34.850
> 
> 标签：java, com, serial-port, serial-communication, modbus

我正在尝试使用串行通信向微控制器发送命令，我可以编译并运行以下代码而没有任何错误，但值没有被写入寄存器。我究竟做错了什么？

**代码**

```
import java.io.*;

import javax.comm.*;

import net.wimpi.modbus.net.SerialConnection;
import net.wimpi.modbus.util.SerialParameters;

import java.util.*;

public class SerTest {

public static void main(String[] args)  {

Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

CommPortIdentifier portId = null;  
while (portIdentifiers.hasMoreElements())
{
  CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
  if(pid.getPortType() == CommPortIdentifier.PORT_SERIAL &&
     pid.getName().equals("COM4")) 
  {
      portId = pid;
      break;
  }
}
if(portId == null)
{
  System.err.println("Could not find serial port "); // + wantedPortName);
  System.exit(1);
}

SerialPort port = null;

try {
  port = (SerialPort) portId.open(
      "name", // Name of the application asking for the port 
      10000   // Wait max. 10 sec. to acquire port
  );
} catch(PortInUseException e) {
  System.err.println("Port already in use: " + e);
  System.exit(1);
}

try {
port.setSerialPortParams(

    9600 , SerialPort.DATABITS_8,
    SerialPort.STOPBITS_1,
    SerialPort.PARITY_EVEN);
}   catch (UnsupportedCommOperationException e1) {
// TODO Auto-generated catch block
e1.printStackTrace();
}

BufferedReader is = null;  
PrintStream    os = null;

try {
is = new BufferedReader(new InputStreamReader(port.getInputStream()));
} catch (IOException e) {
System.err.println("Can't open input stream: write-only");
is = null;
}

try {
os = new PrintStream(port.getOutputStream(), true);

} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}

// Actual data communication would happen here
os.print("08050080FF008D4B");

os.flush(); 

if (is != null)
try {
    is.close();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
if (os != null) os.close();
if (port != null) port.close();

} 

} 
```

我怀疑问题出在这一行

```
os.print("08050080FF008D4B"); 
```

这是向微控制器发送命令的正确方法吗？

**命令的含义**

```
08- Controller ID,
05- MODBUS function for coil writing,
0080- Address of a register where value is to be written,
FF00- Boolean value,
8D4B- CRC checksum , 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:25:42.467

您正在发送字符串`08050080FF008D4B`。您可能希望将它们作为*字节*而不是字符串值发送。您发送到设备的第一个字节是`0`，它是`0x30`十六进制的。根据您的字符串和命令的含义，您可能希望第一个字节是`0x08`.

所以，这样的事情可能会起作用（请注意，在不了解您正在使用的内容的情况下，我不能肯定地说）：

```
byte[] bytes = new byte[]{ 0x08,0x05,0x00,(byte)0x80,(byte)0xFF,0x00,(byte)0x8D,(byte)0x4B };
//Later on in your code....
os.write( bytes ); 
```

# c - C中最快的布尔表示

> ID：14917584
> 
> 赞同：1
> 
> 时间：2013-02-17T03:08:28.880
> 
> 标签：c, types, boolean

在 C 语言代码中，如果我有一堆仅用于逻辑运算的变量，那么将产生最快执行时间的数据类型是什么？

另外，这取决于我使用的是 ARM 还是 Intel 处理器、32 位还是 64 位系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T03:12:06.973

如果编译器允许，包含`<stdbool.h>`、使用`bool`和信任编译器/RTL 供应商会做正确的事情。否则使用`int`.

# ruby-on-rails - 在 Rails 中更改 Gemfile 时如何修复错误？

> ID：14917585
> 
> 赞同：0
> 
> 时间：2013-02-17T03:08:42.960
> 
> 标签：ruby-on-rails, ruby, bundle, gemfile

我是 Rails 新手，当我将 Gemfile 编辑到下面时，我一直遇到错误。它也可以在本教程的清单 2.1 下找到：[http ://ruby.railstutorial.org/chapters/a-demo-app#sec-planning_the_application](http://ruby.railstutorial.org/chapters/a-demo-app#sec-planning_the_application)

```
source 'https://rubygems.org'
gem 'rails', '3.2.7'
group :development do
  gem 'sqlite3', '1.3.5'
end
# Gems used only for assets and not required # in production environments by default. 
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end
gem 'jquery-rails', '2.0.0'
group :production do
  gem 'pg', '0.12.2'
end 
```

当我在终端中键入“bundle install”时，我收到一条错误消息：

```
Gemfile syntax error:
group :deve...3.2.7'ygems.org'
...                               ^ 
```

关于如何解决这个问题的任何建议？

# actionscript-3 - 在 Flash 中导入库依赖项（actionscript 3）

> ID：14917595
> 
> 赞同：0
> 
> 时间：2013-02-17T03:12:01.010
> 
> 标签：actionscript-3, flash-cs5

我正在使用 Flash CS5 为练习目的开发测验应用程序。

在我的 AS3 顶部，我有这个：

```
import flash.net.URLRequest;
import flash.net.URLLoader; 
```

我用它来加载 XML 文件。

我想知道，我应该导入那个库吗，因为即使我删除了那些行它也会成功编译？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:15:49.570

您可能将代码放在一个框架脚本中，该脚本使用伪`import flash.*.*`范围。

导入语句不会影响性能或文件大小，它只是帮助编译器理解您在引用`URLLoader`.

作为旁注，我强烈建议不要将代码放在框架动作中并使用文档类对象和/或外部`.as`文件。

# coffeescript - 定义一个函数并立即在 Coffee 中调用它，无法得到想要的结果

> ID：14917596
> 
> 赞同：2
> 
> 时间：2013-02-17T03:12:05.383
> 
> 标签：coffeescript

无法让我的 Coffee 脚本**完全编译成**：

```
( function (root) { return 'Hello Coffee'; }(this) ); 
```

第一次尝试：

```
do (root) ->
    'Hello Coffee' 
```

...没有生成与上面相同的代码，输出（带`--bare`）：

```
(function(root) {
  return 'Hello Coffee';
})(root); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T03:28:52.127

没有理由相信你可以完全得到那个 JavaScript，也可能没有理由完全得到那个 JavaScript。你可以得到一些功能上等价的东西：

```
((root) -> 'Hello Coffee')(@) 
```

变成这个 JavaScript：

```
(function(root) { return 'Hello Coffee'; })(this); 
```

它和你的 JavaScript 做同样的事情。

* * *

该[`do`关键字](http://coffeescript.org/#loops)用于循环内部：

> 当使用 JavaScript 循环生成函数时，通常会插入一个闭包包装器，以确保循环变量是封闭的，并且所有生成的函数不只是共享最终值。CoffeeScript 提供了`do`关键字，它立即调用传递的函数，转发任何参数。

你通常会`do`在这样的事情中使用：

```
for x in a
    do (x) ->
        $("##{x}").click -> console.log x 
```

你想打破循环变量和它在闭包中的使用之间的联系。这就是为什么`root`在 JavaScript 版本中出现两次的原因

```
do (root) ->
    'Hello Coffee' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T11:07:25.370

你可以这样做

```
do (root = @) ->
  'Hello Coffee' 
```

这段代码将被编译成

```
(function(root) {
  return 'Hello Coffee';
})(this); 
```

请参阅[CoffeeScript.org 控制台示例](http://coffeescript.org/#try:do%20(root%20%3D%20%40)%20-%3E%0A%20%20%22Hello%20Coffee%22)

# php - 在 Smarty 上使用多页的最佳方式

> ID：14917599
> 
> 赞同：9
> 
> 时间：2013-02-17T03:12:25.473
> 
> 标签：php, smarty

这是对多个页面使用 smarty 的最有效方法吗？：

```
if (empty($_GET[page])) {
    $template = "home.tpl";
    $smarty->assign('pagename', ' - Home');
} else {
    $page = $_GET["page"];
    switch ($page) {
        case "home":
            $template = "home.tpl";
            $smarty->assign('pagename', ' - Home');
            break;

        case "contact":
            $template = "contact.tpl";
            $smarty->assign('pagename', ' - Contact us');
            break;

        case "verify":
            $template = "verify.tpl";
            $smarty->assign('pagename', ' - Verify your account');
            break;

        default:
            $template = "404.tpl";
            break;
    }
}

$smarty->assign('sitename', $sitename);
$smarty->display($template); 
```

如果我有“登录”和“用户区”以及所有内容怎么办？我怎样才能让他们每个人都干净地完成自己的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T07:19:24.433

是的，

也许您可以将 $page 变量更新为以下内容：

```
<?php
$page = isset($_GET['page']) ? $_GET['page'] : '';
?> 
```

但是使用前端控制器更改页面的方式是个好方法。你可以做一些升级......我的工作流程；

1.  显示 index.html 文件并在前端控制器中加载该 index.htm 文件中的其他 TPL/HTML 文件。

就像是：

```
$content = "";
$page = isset($_GET['page']) ? $_GET['page'] : '';

// FRONTCONTROLLER
switch ($page) {
    case 'stack':
        require_once('includes/stack.php');
        $content = getContent();
        break;

    case 'overflow': 
        require_once('includes/overflow.php');
        $content = "overflow....";
        break;

    default:
        $content = "blalala";
        break;
}

$smarty->assign('page', $page);
$smarty->assign('content', $content);
$smarty->display('index.htm'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T02:34:18.593

这是我使用 Smarty 模板的主要 Index.php。在此页面中，我在管理面板中激活时包含了一个 JQuery 登录小部件。$sel 是你的 $page。

It goes through a Switch incase I add more views for the index page, for example a publicity view for those who get there though a google advert. So the publicity can link to ?sel=googlead1 and I can display a page based on that.

I call my authentification class and load the user (method called refreshes his presence on site so its not useless)

Then I load the selected page through a function call. After that I exit code execution.

In the function, I call a shared widget for several pages which allows the user to log in through a JQuery panel. That gets the page.

```
include "./include/includes.php";

$sel=null;
if(isset($_POST["sel"]) or isset($_GET["sel"]) )
{
    $sel =isset($_POST["sel"])?$_POST["sel"]:$_GET["sel"];
}

$auth = new authentification($dbconn, "", "","");
$user = $auth->checkuser();

switch($sel){
    default:    IndexPage();
}
exit;

function IndexPage(){   
    global $smarty, $lang, $config;

    //load the text for the login
    $smarty->assign("text", $lang["basiclogin"]);

    if($config["auth_widget"] == "true")
    {
        $smarty->assign("auth_widget",getAuthWidget());
    }
    //display the whole index page
    $smarty->display($config["index_theme_path"]."/index_page.tpl");
    exit;
} 
```

In the actual index_page.tpl I load the widget like so:

```
{if isset($auth_widget)}
<div id="auth_widget" style="float:right;">
    {$auth_widget}
</div>
{/if} 
```

Hope this helps show another way to organize your code with Smarty (which is really awesome in my opinion)

Edit: Here is the shared getAuthWidget function - notice it uses fetch instead of display.

```
/**
 * Allows various pages to get the authentification widget if desired
 * @global Object $smarty
 * @global Array $lang
 * @global Array $config
 * @global Array $user
 * @return Page returns the fetched template widget
 */
function getAuthWidget($err = ""){
    global $smarty, $lang, $config, $user;

    $smarty->assign("text", $lang["basiclogin"]);
    //check if user is loaded, if not, throw error
    if(isset($user) && $user["id"] >= -1)
    {
        $smarty->assign("user", $user);
    }
    else 
    {
        echo "user not set";
        exit;
    }

    return $smarty->fetch($config["index_theme_path"]."/auth_widget.tpl");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T02:07:03.310

My best option:

```
<?php
   $pages = array(
        "home" => array("home.tpl", " - Home"),
        "contact" => array("contact.tpl", " - Contact us"),
        "verify" => array("verity.tpl"), " - Verify your account"),
        "e404"   => array("404.tpl", " - Page not fount")
    );

    $pag_selected = $pages["e404"];
    if(isset($_GET["page"]) && isset($pages[$_GET["page"]])):
        $pag_selected = $pages[$_GET["page"]];
    endif;
    $smarty->assign('pagename', $pag_selected[1]);
    $smarty->display($pag_selected[0]);
?> 
```

# python - 需要创建一个 Python 2.7 骰子滚轮来确定字符统计信息

> ID：14917603
> 
> 赞同：-5
> 
> 时间：2013-02-17T03:13:11.980
> 
> 标签：python

我需要创建一个简短的程序，允许用户使用掷骰子方法创建他们的统计数据。它必须创建 2 个不同的统计数据，一个力量属性和一个技能属性。对于要创建的这些，它有一个 12 面骰子和一个 4 面骰子。然后将 12 面骰子的值除以力量属性的 4 面骰子，然后对技能属性重复此操作。就是这样，我不知道该怎么做，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:19:10.807

[我肯定会在这里](http://docs.python.org/2/library/random.html#random.randint)看看 stdlib 中的随机模块

然后，您可以执行以下操作：

```
import random

random.randint(1,12) 
# which produces random number between 1-12 
```

那应该让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:49:30.707

简短的回答是（正如 myusuf3 指出的那样）：

```
stat = random.randint (1, 12) / random (1, 4) 
```

或者

```
stat = random.randint (1, 12) // random (1, 4) 
```

无论你是否想要分数。

现在，如果您在游戏后期使用更多骰子（用于攻击掷骰、技能掷骰等），具有不同的面数（d4、d6、d8、d10）等，您可以创建自己的 Die 类（这肯定是你的例子有点矫枉过正，但我​​会画出来只是为了给你一个想法）：

```
class Die:
    def __init__ (self, sides):
        self.sides = sides

    def roll (self, times = 1):
        return sum (random.randint (1, self.sides) for _ in range (times) ) 
```

所以，一开始你可以实例化你的骰子：

```
d4 = Die (4)
d6 = Die (6)
d10 = Die (10) 
```

现在，例如，如果你用 5d10 进行伤害检定，你可以简单地输入：

```
damageRoll = d10.roll (5) 
```

--

更进一步，您可以使用 ADnD 伤害符号创建您自己的 Weapon 类（例如 2d4+1 的意思，掷两个有四个面的骰子，将结果相加并加 1）：

```
import random
import re

class Weapon:
    def __init__ (self, name, dmg):
            self.name = name
            self.dmg = dmg
            self.dice, self.sides, mod, iMod = re.match ('(\\d*)d(\\d+)(?:([+-])(\\d+))?', dmg).groups ()
            self.dice = int (self.dice) if self.dice else 1
            self.sides = int (self.sides)
            self.mod = 0 if not iMod else int (iMod) * (-1 if mod == '-' else 1)

    @property
    def damage (self):
        return max (0, sum (random.randint (1, self.sides) for x in range (self.dice) ) + self.mod)

w = Weapon ('Bad ass katana', '4d10+8')
for i in range (10):
    print (w.damage) 
```

# nosql - 在 Cassandra 中以原子方式更新共享状态

> ID：14917604
> 
> 赞同：2
> 
> 时间：2013-02-17T03:13:16.943
> 
> 标签：nosql, cassandra

## 问题：

我计划将 cassandra 用作我的应用程序的 nosql 数据存储。我的用例之一是更新用户的“余额”。假设每个用户的余额存储为键 UID_balance。现在如果我的应用程序想要更新多个用户的余额，我将如何处理原子性？

我想，在某些时候，应用程序基本上会执行以下操作：

```
1\. for each user u
2\.    current_balance = read_users_balance(u);
3\.    new_balance     = current_balance + delta_for_user(u);
4\.    write_users_balance(u, new_balance);
5\. end 
```

现在，这里有几个问题：

1.  与 cassandra 的连接可能会中断，导致代码仅更新少数用户的余额。
2.  在第 2 步和第 4 步之间，可能有另一个过程可以更新用户的余额，我将更新一个过时的余额，使用户的余额处于“损坏”状态。

RDBMS 解决了这些问题，因为它们提供了 ACID 属性，而 Cassandra 没有。我看到 Cassandra 最近（2012 年 10 月）开始提供 Atomic Batches。我不确定这是否是解决此问题的正确方法。

## 可能的解决方案：

这是我和一个朋友的头脑风暴。我们实际上并没有更新用户的余额，而是创建一个记录，将更新增量附加到不同的记录。例如：

```
UID1_balance = {100}
UID1_deltas  = {10,20,-40} 
```

为了获得当前余额，我们只需将增量应用于余额。我们可以有一个离线过程，将增量应用到用户的余额并修剪增量列表。

该解决方案有效并减少了损坏状态的可能性，但我认为这是一种矫枉过正的做法。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T02:48:14.057

我建议阅读“建立在流沙上”的论文，这会让你从账户的角度思考，他们甚至参考了这样的银行账户示例。注意：大通银行和富国银行不会在交易中转账，所以他在那篇文章中解释了我们如何在微观层面上做同样的事情，就像宏观层面一样；）。

这在为 cassandra 编写 PlayOrm 时也很有帮助，因为现在 PlayOrm wiki 上也有一个模式页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T10:48:30.810

由于没有锁，因此您最初的“读取修改写入”方法无法在 Cassandra 中使用。Cassandra 计数器部分解决了这个问题，但在两个地方无法满足您的要求：

1.  您不能使用多个计数器进行原子批处理，这意味着您最终可能会应用一些更新而其他更新不会。
2.  如果发生错误，您无法判断计数器是否增加了，因此最终可能会出现不准确的值。

这意味着您将增量存储为单独列的可能解决方案是获得所需保证的唯一方法，与 Cassandra 1.2 中的原子批处理一起使用（请参阅[http://www.datastax.com/dev/blog/atomic- cassandra-1-2 中的批次](http://www.datastax.com/dev/blog/atomic-batches-in-cassandra-1-2)）。您的解决方案就像实现计数器，其中每个计数器位于一行中，每个增量是一列。要阅读，您将一行中的列的所有值相加。

正如您所说，这里的问题是处理垃圾，因为这些增量列表会随着时间的推移而增长。如果没有太多更新没关系，但如果经常更新余额，阅读速度就会太慢。

通过读取增量然后原子地删除它们并为整个值添加一个增量，可以使您的“垃圾收集”离线过程变得安全。使用原子批处理和单线程进程可以确保安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T21:22:05.053

1.  正如理查德指出的那样，目前最好的方法是使用原子批处理来更新许多增量。如果出现问题，只需重播批处理。

2.  另一种可能的解决方案是使用 ZooKeeper 作为协调和分布式锁定服务：[http ://ria101.wordpress.com/tag/zookeeper/](http://ria101.wordpress.com/tag/zookeeper/)

3.  另一种可能的解决方案是使用[计数器](http://wiki.apache.org/cassandra/Counters)，所以你不需要这样做

    ```
    your current_balance = read_users_balance(u);
    new_balance     = current_balance + delta_for_user(u); 
    ```

    因为使用计数器，您无需在更新前读取余额。[http://www.datastax.com/dev/blog/whats-new-in-cassandra-0-8-part-2-counters](http://www.datastax.com/dev/blog/whats-new-in-cassandra-0-8-part-2-counters)

但是计数器存在问题，它们不是幂等的，因此如果您没有收到您的增量/减量成功的确认，您将无法重放该计数器，因为它可能导致过度计数。

新的柜台将解决这个[问题](https://issues.apache.org/jira/browse/CASSANDRA-4775)。

# php - Why is this regex replacing the dash character?

> ID：14917606
> 
> 赞同：1
> 
> 时间：2013-02-17T03:13:28.080
> 
> 标签：php, regex, preg-replace, preg-match

I'm trying to better understand regular expressions, but can't seem to understand this.

```
preg_replace("/[^a-zA-Z0-9.?!\s]/", "", $mystring); 
```

I thought that this would not replace dashes, because it would be counted as "through" in the example above. But every time I run it, the dash is removed.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T03:27:13.703

You don't provide a sample `$mystring` value, which would be helpful.

As it is written, this regular expression will replace one, and only one, character in `$mystring`. Specifically, your character class includes a carat character (`^`) at the very beginning. In any Perl-compatible regular expression engine (of which PHP is one), this indicates *not these things* (see [character classes](http://www.php.net/manual/en/regexp.reference.character-classes.php) for more). So your expression is essentially stripping anything that is **not**:

*   A lowercase letter between a and z
*   An uppercase letter between A and Z
*   A digit between 0 and 9
*   A period
*   A question mark
*   An exclamation mark
*   A whitespace character

The dash character is **not** one of the above, so it gets matched and replaced.

Your assumption about the "through"-ness of the dashes as you have written it are correct, however. The dash character is one of the 4 special characters in a character class, and it gets used to indicate a range of characters.

# java - 按比例减少一组数字以平衡总数

> ID：14917607
> 
> 赞同：0
> 
> 时间：2013-02-17T03:13:31.937
> 
> 标签：java, math

在我的代码中，我有一组项目，总计 100 个。即每个组中有一个项目总数，所有组的总数为 100。

现在，如果用户决定更改其中一个计数，我希望所有其他计数都进行缩放，以便它们彼此之间的比例仍然相同，但总计数仍然是 100。

即，如果我们从

```
[20, 30, 50] 
```

你把 50 改成 75 那么你最终会得到

```
[10, 15, 75] 
```

所以我需要一个函数，它接受索引参数和新值并调整数组中的值以平衡它们。

伪代码将是惊人的！Java 更是如此！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:16:56.733

您可以简单地将非用户更改数字的数字相加，获取它们与该数字的比率，并确保当您尝试增加或减少数字时比率不会改变。

例如

*   说：a + b + c + d = 100
*   并假设用户将 deltaA 添加到 a，

然后

```
int newB = (int) (b * ((double)b + c + d - deltaA) / (b + c + d)) 
```

其他人也一样：

```
int newC = (int) (c * ((double)b + c + d - deltaA) / (b + c + d)) 
int newD = (int) (d * ((double)b + c + d - deltaA) / (b + c + d)) 
```

请注意，这与 Java*无关*，实际上与编程无关，而只是最基本的代数。另请注意，由于四舍五入的挑战，此解决方案可能大于或小于 100 乘以 1 或 2。你将不得不对此做一些捏造。

# php - 将前导数字从字符串修剪到分隔符

> ID：14917608
> 
> 赞同：-2
> 
> 时间：2013-02-17T03:13:35.717
> 
> 标签：php, regex

我正在尝试将 PHP 中的前导数字去除到分隔符“_”示例：（左侧输入，右侧所需输出）

```
1_abc.jpg -> abc.jpg
01_abc.jpg -> abc.jpg
100_abc.jpg -> abc.jpg
100_12abc.jpg -> 12abc.jpg
12abc.jpg -> 12abc.jpg 
```

提前致谢。我真的不擅长正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:17:24.717

你真的需要正则表达式吗？

```
$pos = strpos($string, '_');

if($pos !== false)
  $string = substr($string, $pos + 1); 
```

...或者：

```
$string = preg_replace('/^\d+_/', '', $string); 
```

（`^`匹配字符串的开头并`d+`匹配数字）

# php - 如果发生错误，如何保持在同一页面上？

> ID：14917609
> 
> 赞同：0
> 
> 时间：2013-02-17T03:13:48.913
> 
> 标签：php

简化以下代码以说明我的问题。这是一个捕获数据的页面，它将发布捕获的信息并传递给另一个 php 页面进行处理。我试图确保输入了必填字段，但无论出现错误，它总是会转到调用页面。任何人都可以帮忙吗？

```
<?php
  if (empty($_POST) === false) {
    $required_field = array('first_name','last_name');
    foreach ($_POST as $key=>$value) {
    if (empty($value) && in_array($key, $required_field) === true) {
      $errors[] = 'Fields marked with asterisk are required';
      break 1;
      }
    }
  }
?>
<h1>Input Form</h1>

<?php
  if (empty($errors) === false) {
    echo output_errors($errors);
  }
?>

<form method="POST" action="UpdateDB.php" name="UpdateForm">
   <input type=text size="19" maxlength="19" name="firstname">
   <input type=text size="19" maxlength="19" name="lastname">   
   <input type="submit" value="Submit" >
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:54:13.100

下面的代码将检查页面是否使用 POST 方法调用，如果没有，它将打印输入表单。

php 脚本必须存储在 UpdateDB.php 中，

```
<?php

    if(!isset($_POST)){

    echo "<h1>Input Form</h1>";
    echo "<form method="POST" action="UpdateDB.php" name="UpdateForm"> <br/>" .
       "<input type=text size="19" maxlength="19" name="firstname"> <br/>" .
       "<input type=text size="19" maxlength="19" name="lastname">   <br/>" .
       "<input type="submit" value="Submit" >" .
    "</form>";
    }

    else{
         /*Form Action code goes here*/
          }
        }
    }

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:33:49.883

要么通过保留一个空属性将表单提交到当前页面`action`（并在此处进行处理），要么添加一个带有当前页面 URL 的隐藏字段：

```
<input type="hidden" name="sourceUrl" value="<?= $_SERVER['REQUEST_URI']; ?>" /> 
```

`UpdateDB.php`如果有错误，然后在您的脚本中重定向回此 URL。就像是：

```
$url = $_POST['sourceUrl']; // <- sanitize this (make sure it's your site)!

header('Status-Code: 301');
header('Location: http:// ' . $_SERVER["HTTP_HOST"] . $url); 
exit; // important: stop current script 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:44:48.677

好的，我找到了一个很好的例子来展示如何做到这一点 [http://yensdesign.com/2009/01/how-validate-forms-both-sides-using-php-jquery/](http://yensdesign.com/2009/01/how-validate-forms-both-sides-using-php-jquery/)

# perl - HTML::FormHandler 角色与字段

> ID：14917613
> 
> 赞同：3
> 
> 时间：2013-02-17T03:15:21.577
> 
> 标签：perl, forms, moose, catalyst

我正在使用[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)，为了不重复大量代码，我试图按照[HTML::FormHandler Cookbook](https://metacpan.org/module/GSHANK/HTML-FormHandler-0.40020/lib/HTML/FormHandler/Manual/Cookbook.pod#Split-up-your-forms-into-reusable-pieces)的建议将表单拆分为可重复使用的部分。它讨论了能够创建自己的字段或自己的角色来完成此任务，但是我无法真正区分两者之间的明确区别。我知道它们在实现/使用它们的方式上有所不同，但据我所知，它们似乎完成了相同的事情。我的问题是在任何情况下使用其中一种是明确的选择吗？或者这是一种更倾向于偏好的东西？谢谢您的帮助。我想在代码投入生产之前这样做，以后更难更改:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:00:41.207

一种选择是使用 Moose 类，另一种是使用 Moose 角色。

概念略有不同。这是[Moose Roles 手册](http://search.cpan.org/~doy/Moose-2.0604/lib/Moose/Manual/Roles.pod)的片段：

> 角色封装了一些可以在类之间共享的行为或状态。这是班级所做的事情。重要的是要了解角色不是类。您不能从角色继承，并且角色不能被实例化。我们有时会说角色被类或其他角色消耗。

类允许您使用继承，当您想要共享功能而不继承时，角色是很好的选择。

有关何时/不想使用继承的（人为的）示例，请参阅有关[角色与继承的文章](http://modernperlbooks.com/mt/2009/05/perl-roles-versus-inheritance.html)

# c - C:: how: 在循环中运行错误检查字符串是否太长

> ID：14917616
> 
> 赞同：-1
> 
> 时间：2013-02-17T03:16:24.853
> 
> 标签：c, string, loops, input

为一些家庭作业和我的生活而苦苦挣扎，我无法弄清楚这一点。伪逻辑将是

```
 printf("Enter a string\n"); 
```

然后运行循环检查字符串是否超过 10 个字符，如果没有重新提示输入小于 10 个字符的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:16:35.437

请就您的问题提出具体问题，并向我们提供您迄今为止的尝试。否则，我们将不得不对您对 C 的理解做出假设，而这样的假设可能看起来令人反感。

不能期望用户使用键盘输入“\0”字符，因此“字符串”可能来自标准输入的想法似乎很愚蠢。在用户按下这个 '\0' 键之前，你必须读取多少字节？最多十个。编写一个以 while 开始`x = 0;`并继续的循环`x < 10`。循环应该在`getchar() == '\0'`. 在循环之外，测试 x。如果 x 达到 10，则循环在输入 '\0' 之前结束；提示用户输入新字符串。

也许您的老师希望您使用其他字符作为终端字符，并将结果存储到数组中（在这种情况下，输入实际上不是*字符串*，因为 '\0' 与结尾无关）。编写完上述程序后，就可以对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:00:48.273

有多种方法可以做到这一点，具体取决于总体目标。

```
char input[11];

if (scanf("%10s", input) != 1)
    ...error...
...here, the string is not longer than 10 characters, and contains no white space... 
```

如果您决定让他们输入更多字符然后抱怨，或者如果您需要他们能够输入空格，那么：

```
char input[4096];

while (1)
{
    printf("Enter a string\n");
    if (fgets(input, sizeof(input), stdin) == 0)
        break;  // EOF or error
    size_t len = strlen(input);
    if (len > 0)
        input[--len] = '\0';   // Zap newline
    if (len <= 10)
        break;
 } 
```

这会循环提示、读取、截断、验证。您可能需要考虑在退出循环时如何区分 EOF 或错误和有效输入。如果代码实际上位于传递缓冲区以用于输入的函数中，则最容易做到这一点：

```
int prompt_for_string(const char *prompt, char *buffer, size_t buflen)
{
    while (1)
    {
        printf("%s", prompt);
        if (fgets(buffer, buflen, stdin) == 0)
            return EOF;
        size_t len = strlen(buffer);
        if (len > 0 && buffer[len-1] == '\n')
            buffer[--len] = '\0';
        if (len <= 10)
            return len;
    }
    return EOF;
} 
```

如果你真的下定了决心，你可以编写一个输入循环，用`getchar()`or 的一个亲戚代替`fgets()`or `scanf()`。它更复杂，并没有提供任何明显的好处。

# r - 如何在osx中 安装lme4的开发版

> ID：14917623
> 
> 赞同：0
> 
> 时间：2013-02-17T03:17:12.803
> 
> 标签：r

目前 lme4 的开发版本的标准安装存在问题。如何让当前的开发版本（0.99999911.0 或更高版本）在 OSX 中工作？

[http://lme4.r-forge.r-project.org](http://lme4.r-forge.r-project.org)中建议的命令

似乎不起作用：

```
install.packages("lme4",repos="http://r-forge.r-project.org") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:45:56.007

原来答案是通过 github 安装，使用`devtools`包。

```
library("devtools")
install_github("lme4",user="lme4") 
```

为此，需要最新版本的 Xcode，包括命令行工具。

# php - 为刚刚使用 javascript 加载的图像添加淡入效果

> ID：14917626
> 
> 赞同：0
> 
> 时间：2013-02-17T03:17:31.647
> 
> 标签：php, javascript, image, fade

我有以下 javascript 代码，每次用户将鼠标放在缩略图上时，都会将 div 中的图像更改为不同的图像。

我的问题是，如何应用淡入效果使图像变化更好？

谢谢

JS：

```
$('#thumbs').delegate('img', {
mouseover: function(){
    $('.mainImage').attr('src',$(this).attr('src').replace('thumb','image'));
    var $this = $(this),
    index = $this.index();
    $("#thumbs img").removeClass('thumbSelected');
        $this.addClass('thumbSelected');
}}); 
```

PHP：

```
<div id="thumbs">
<img class="thumbSelected" src="http://www.tahara.es/images/<?php echo $row2[thumb1]; ?>.jpg"  /><br />
<img src="http://www.tahara.es/images/<?php echo $row2[thumb2]; ?>.jpg"  /><br />
<img src="http://www.tahara.es/images/<?php echo $row2[thumb3]; ?>.jpg"  />
</div>

<div class="mainImage magnify">
<div class="large"></div><a href="http://www.tahara.es/images/<?php echo $row2[image1]; ?>.jpg" rel="lightbox" title="<?php echo $row2[name]; ?>">
<img class="mainImage small" src="http://www.tahara.es/images/<?php echo $row2[image1]; ?>.jpg" />
</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:47:36.593

在你的例子中，我相信：

```
$('#big-image img').fadeIn(300); 
```

将工作。

如果没有，那只是：

```
$('#imgid').fadeIn(300); 
```

或者：

```
$('#.classname').fadeIn(300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:55:32.933

查看 Jquery animate .. [http://api.jquery.com/animate/](http://api.jquery.com/animate/) 您可以配置持续时间、缓动（这可能是您缺少的）和完成回调（当第一个动画完成时添加额外的动画，例如增加不透明度从 0.8 到 1)

这实际上是您希望它看起来如何的问题，但动画会比淡入淡出更好

# c# - 如果事件不生成数据，为什么要用泛型参数替换 EventArgs？

> ID：14917627
> 
> 赞同：1
> 
> 时间：2013-02-17T03:17:40.837
> 
> 标签：c#, events, generics, delegates, event-handling

我很难从 MSDN [EventHandler Delegate](http://msdn.microsoft.com/en-us/library/db0etb8x%28v=vs.95%29.aspx)中理解以下短语：

*   *“如果您的事件不生成事件数据，请将[EventArgs](http://msdn.microsoft.com/en-us/library/system.eventargs%28v=vs.95%29.aspx)替换为泛型类型参数；...”*

我是否正确理解事件生成的数据存储在 的实例中`EventArgs`？

附带好奇：
这句话是否意味着如果事件生成数据则不使用泛型类型 EventArgs？为什么？

主要问题是：如果事件不生成数据，
为什么要打扰`EventArgs`（使其成为通用或非通用）？

**更新：**
从提到的文章和其中包含的代码示例中，我了解到不是委托：

```
public delegate void EventHandler(Object sender, EventArgs e) 
```

我要使用

```
public delegate void EventHandler<EventArgs>(Object sender, EventArgs e) 
```

当我的事件不生成数据时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:48:00.793

如果您只是使用`EventArgs`. 文档可能只是没有提到第二种可能性，因为在所有示例中只显示带有泛型参数的单个委托定义更容易。

此外，通过`EventArgs.Empty`而不是`null`.

如果您的事件确实有数据，则需要子类`EventArgs`化然后使用该子类（在他们使用的示例中`MyEventArgs`）。 `EventArgs`本身没有保存数据的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:32:45.703

从代码中，泛型类型参数受`EventArgs`( `where TEventArgs : EventArgs`) 约束。`EventHandler`这意味着这是delgate 支持的最基本的类型。

调用事件处理程序时，您可以只发送`null`而不是`EventArgs`实例吗？

至于为什么，我不确定为什么他们要求所有事件都有参数，这在当时似乎是个好主意。

他们需要的一个原因`EventArgs`是因为（在泛型之前）[EventHandler](http://msdn.microsoft.com/en-us/library/system.eventhandler%28v=vs.100%29.aspx)委托 required `EventArgs`，所以它可能是为了保持兼容性。

# javascript - 使用 qt-creator 将 Web 应用程序转换为桌面应用程序

> ID：14917633
> 
> 赞同：2
> 
> 时间：2013-02-17T03:18:40.400
> 
> 标签：javascript, html, web, qt-creator

我有一个可以通过浏览器运行的 Web 应用程序，但我想将它嵌入到 QT 应用程序中，它都是 HTML JavaScript 和 CSS。我的问题是，我可以用 QT Creator 做到这一点吗？如果可以，我需要什么才能让它工作？

如果您能指出任何可以为我提供更多信息的教程或网站，我将不胜感激。我已经查看了 QT project.org，但它严重缺乏关于如何执行我所要求的操作的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:29:57.873

可以看看这个让你开始的样本

[http://www.developer.nokia.com/Develop/Qt/Code_examples/](http://www.developer.nokia.com/Develop/Qt/Code_examples/)

# c# - 将数组传递给 WCF 函数

> ID：14917634
> 
> 赞同：1
> 
> 时间：2013-02-17T03:18:55.127
> 
> 标签：c#, .net, xml, wcf

因此，我有一个 C# 项目，其中我正在使用 Linq to xml 加载一个 XML 文档（包含学生姓名和 Id），并且我必须从 WCF 服务获取相关数据（他们的到期日、金额和内容）。我只需右键单击添加服务并添加服务引用，现在需要将数组传递给我初始化的 GetData 函数，但显然它为 null。我无法将我的数组转换为服务类型，并且该函数也返回数组。如何将数组分配给 studentArray ？

```
 ServiceReference1.ServiceClient client = new ServiceReference1.RycorServiceClient();

Application.ServiceReference1.Student[] studentArray = new ServiceReference1.Student[9];

        Student[] array = studentList.ToArray();

        //for (int i = 0; i <= array.Count(); i++)
        //    studentArray[i] = (RycorApplication.ServiceReference1.Student)array[i];

        //this gives me an error says Cannot convert type 'Application.Student' to 'Application.ServiceReference1.Student'.

        var data = client.GetData(studentArray); 
```

获取此数据后，如何将这些数据保存到我的 XML 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:11:13.423

您收到此错误是因为 Application.Student 是不同的类型，您可以尝试使用 Application.ServiceReference.Student 来保存学生列表而不是“studentList”类型。

我想“studentList”是一个“Application.Student”列表，你必须使用相同的模型或使用类似这样的东西在它们之间进行复制（在第一个答案中）： [将值从一个对象复制到另一个](https://stackoverflow.com/questions/2624823/copy-values-from-one-object-to-another)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:57:01.530

你几乎必须这样做：

```
List<ServiceReference1.Student> wcfStudentList = new System.Collections.Generic.List<ServiceReference1.Student>();
        foreach (var student in studentList)
        {
            wcfStudentList.Add(new ServiceReference1.Student()
            {
                ID = student.ID,
                Name = student.Name,
                ..etc..
            });
        }
        var data = client.GetStudentData(wcfStudentList.ToArray()); 
```

我确实不得不质疑，如果可以获取学生 ID 列表而不是传递整个对象，为什么不只是更改 WCF 调用？

# java - 对于每个未执行的循环

> ID：14917639
> 
> 赞同：0
> 
> 时间：2013-02-17T03:19:58.810
> 
> 标签：java, loops, foreach

由于某种原因`for-each`，我的方法中的所有循环都被完全忽略了，我不知道为什么。这是我的代码：

```
private static boolean notUsed(ArrayList<Integer> check, ArrayList<ArrayList<Integer>> used)
  {
    boolean c1 = false;
    boolean c2 = true;
    for (ArrayList<Integer> item : used) // Not executed
    {
      System.out.println("It works!");
      Collections.sort(item);
      Collections.sort(check);
      if (check.equals(item)) c1 = true;
    }
    ArrayList<Integer> existing = new ArrayList<Integer>();
    for (int item : check)
    {
      for (int exists : existing) // Not executed
      {
        if (exists == item) 
        {
          c2 = false;
          break;
        }
        else existing.add(item);
      }
      if (c2 == false) break;
    }
    if (c1 && c2) return true;
    else return false;
  } 
```

在过去的 15 分钟里，我一直在检查它，但看不出为什么代码拒绝打扰循环的内容。事实上，在此之前我什至不知道 java 可以避免执行循环。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:23:07.350

是的，你遗漏了一些明显的东西。

如果这些循环没有执行，则传递给例程的参数中没有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T03:22:28.953

你制作了一个新的 ArrayList

```
ArrayList<Integer> existing = new ArrayList<Integer>(); 
```

这是空的。

当 foreach 运行时，它没有可迭代的内容。因此，您的*“未执行”*评论是完全有效的。

然而，第一个循环取决于传递的具体内容。把一些打印语句算出List的大小。最有可能的是，这也是 0，这再次导致循环被“跳过”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T03:25:06.977

的大小`used`必须为 0，并且第二个循环未执行，因为`existing`它是一个新的 ArrayList，其大小肯定为 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T03:29:07.617

这是工作代码..这会给你想法。正如其他人提到的那样......不会有任何元素可以迭代......因为我运行了下面的代码并且每个循环都有效......

```
import java.util.ArrayList;
import java.util.Collections;

public class Test1 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ArrayList<ArrayList<Integer>> used = new ArrayList<ArrayList<Integer>>();
        ArrayList<Integer>item = new ArrayList<Integer>();
        item.add(1);
        used.add(item);
        notUsed(item,used );
    }

    private static boolean notUsed(ArrayList<Integer> check, ArrayList<ArrayList<Integer>> used)
      {
        boolean c1 = false;
        boolean c2 = true;
        for (ArrayList<Integer> item : used) // Not executed
        {
          System.out.println("It works!");
          Collections.sort(item);
          Collections.sort(check);
          if (check.equals(item)) c1 = true;
        }
        ArrayList<Integer> existing = new ArrayList<Integer>();
        for (int item : check)
        {
          for (int exists : existing) // Not executed
          {
            if (exists == item) 
            {
              c2 = false;
              break;
            }
            else existing.add(item);
          }
          if (c2 == false) break;
        }
        if (c1 && c2) return true;
        else return false;
      }

} 
```

# chef-infra - Chef 11 重新生成验证密钥

> ID：14917640
> 
> 赞同：2
> 
> 时间：2013-02-17T03:20:00.127
> 
> 标签：chef-infra

我无法设置我的节点，所以我将尝试重新生成我的验证器密钥。为老厨师 10 重新生成密钥的说明位于[此处](http://wiki.opscode.com/display/chef/Common+Errors)

我试过删除 /etc/chef-server/-validator.pem 并重新启动服务器。我希望重新生成密钥，但到目前为止还没有重新创建。

以下是厨师 10 的步骤，我正在尝试将其翻译为厨师 11。

```
$ ls -l /etc/chef/validation.pem
-rw-r--r-- 1 root root 1676 2011-07-14 11:44 /etc/chef/validation.pem
$ sudo rm /etc/chef/validation.pem
$ sudo /etc/init.d/chef-server restart
 * Restarting chef-server
 ~ Killing pid 10783 with INT
 ~ In 12051
   ...done.
$ ls -l /etc/chef/validation.pem
-rw------- 1 chef chef 1679 2011-07-14 11:55 /etc/chef/validation.pem 
```

这是我的厨师 11 的步骤（不工作）我已将我的公司名称清理为“”

```
ls -l /etc/chef-server/<myOrg>-validation.pem
sudo rm /etc/chef-server/<myOrg>-validation.pem
sudo chef-server-ctl restart
ls -l /etc/chef-server/<myOrg>-validation.pem
ls: cannot access <myOrg>-validation.pem: No such file or directory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:38:07.477

以管理员身份使用 webui。编辑客户端“chef-validator”并选中“Regenerate Private Key”复选框。然后将其复制/粘贴到 /etc/chef-server/chef-validator.pem 以及您需要的任何其他地方。

# jquery - 链接的下拉菜单似乎在 IE8 下不起作用

> ID：14917642
> 
> 赞同：0
> 
> 时间：2013-02-17T03:20:07.217
> 
> 标签：jquery, internet-explorer-8

我有两个下拉列表-第二个是根据第一个中选择的选项更新的。

在 IE8 上测试这些后，我发现当第一个下拉列表更改时，第二个下拉列表根本不更新！它仍然是空的！

我该如何解决？它在 Chrome 和 Firefox 下运行良好。

jQuery

```
$("#dept").on("change blur", function () {
        var dept = $("#dept").val();
        var dataString = 'dept=' + dept;
        $.ajax({
            type: "POST",
            url: "process_dept.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#moduleCode').html(html);
            }
                });
        $.ajax({
            type: "POST",
            url: "process_moduleCode.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#moduleName').html(html);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:21:19.120

难道只有`document`有一个现成的功能，所以：

```
$("#dept").ready(function () { ... 
```

真的完全无效，更令人惊讶的是它确实在某些浏览器中工作？

从[**文档**](http://api.jquery.com/ready/)：

> .ready() 方法只能在匹配当前文档的 jQuery 对象上调用，因此可以省略选择器。

也许应该是：

```
$("#dept").on('change', function () { ... 
```

如果您尝试将 ajax 函数绑定到`#dept`元素更改时，并且我假设下拉菜单是`select`元素。

# python - 如何像其他brew，pip一样调用python脚本

> ID：14917652
> 
> 赞同：0
> 
> 时间：2013-02-17T03:21:32.067
> 
> 标签：python, shell

我用这样的参数制作了python脚本。

### 调整大小.py

```
def resize(path):
    # try resize action.

if  len(sys.argv) == 2:
    resize(sys.argv[1])
else:
    raise "you can't file path as argument." 
```

现在我可以使用这个脚本 `python /path/to/dir/resize.py my_picture.png`

但我想像这样从命令行的任何地方调用这个脚本

`./resize my_picture.png`

你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:23:20.567

您需要添加 python shebang 语句以便在不使用 开头的情况下调用它`python`，就像在顶部一样`resize.py`：

```
#!/usr/bin/env python 
```

您还需要确保您`chmod +x resize.py`的文件以使其可执行。这应该让你继续使用 Unix 系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:25:29.487

您可以将`resize`函数的目录放在路径中，或者将`resize`函数移动到路径中的某个位置。

如果您想将它添加到您的路径中，并且它位于`/foo/bar/resize`，那么您必须添加`/foo/bar`到您的路径中。您可以通过将其放入您的`.bashrc`或其他东西中来做到这一点，例如：

```
PATH=/foo/bar:$PATH 
```

如果您不想这样做，您可以将其复制到已存储二进制文件的位置，例如`/usr/bin`.

另外，不要忘记将其标记为可执行文件`chmod +x resize`

# linux - 安装 HTML::TreeBuilder::XPath 失败

> ID：14917657
> 
> 赞同：-4
> 
> 时间：2013-02-17T03:23:25.640
> 
> 标签：linux, perl, shell, unix, html-tree

我正在尝试安装 ** HTML::TreeBuilder::XPath of version 0.13 ** 但它失败了。

任何人都可以建议可能是什么原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:27:50.100

您的 Scalar::Util 版本安装错误。（这可能不是你的错；一些发行版已经这样做了。）首先重新安装 Scalar::Util。

```
$ cpan Scalar::Util 
```

或者如果它抱怨 Scalar::Util 是最新的。

```
$ cpan
cpan> force test Scalar::Util
cpan> force install Scalar::Util  # Only do this if the tests were successful!!
cpan> quit 
```

# java - 由于 BEAST 修复，Java 通过 JNDI/LDAP/TLS 与 Active Directory 通信有任何问题吗？

> ID：14917659
> 
> 赞同：1
> 
> 时间：2013-02-17T03:24:08.787
> 
> 标签：java, ssl, active-directory, beast

Microsoft 和 Java 都进行了更改以解决 BEAST 漏洞。根据[这篇 MSDN 文章](http://blogs.msdn.com/b/jdbcteam/archive/2012/01/19/patch-available-for-sql-server-and-java-6-update-30.aspx)，似乎一些互操作性问题已经出现，微软显然提供了一个 SQL Server 补丁来帮助与 Java 6 更新 30 及更高版本的互操作性。

由于 BEAST 问题与 TLS 协议有关，我认为类似的互操作性问题可能会随着尝试与 Windows 系统通信 TLS 的 Java 代码一起出现。所以...

*   有谁知道在 Java 6 更新 29 或更高版本上运行的 Java 代码尝试通过 JNDI、LDAP 和 TLS 与 Active Directory 通信时发生的任何类似的互操作性问题？

*   任何人都知道为什么微软的互操作性补丁似乎是针对 SQL Server 而不是 Windows？

# javascript - Javascript - 检测 Youtube 默认缩略图

> ID：14917664
> 
> 赞同：5
> 
> 时间：2013-02-17T03:25:00.333
> 
> 标签：javascript, image, youtube-api

有什么方法可以查看 Youtube 缩略图是否真的存在，或者 Youtube 是否将其替换为默认缩略图？

例如，没有此缩略图的视频：http: [//img.youtube.com/vi/G75WApUdYJ4/maxresdefault.jpg](http://img.youtube.com/vi/G75WApUdYJ4/maxresdefault.jpg) 一个带有现有缩略图的视频：http: [//img.youtube.com/vi/pkyLAWX5V30/maxresdefault.jpg](http://img.youtube.com/vi/pkyLAWX5V30/maxresdefault.jpg)

故事：我只是尝试使用 Youtube 的 maxresdefault-Thumbnails 作为我的“媒体播放器页面”的背景。使用普通图像可以正常工作，但出于任何原因，某些 Youtube 视频没有 maxresdefault-Thumbnail。如果我加载此图像，我只会得到小的默认缩略图，这在全高清屏幕上并不是很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:40:01.693

[您可以使用0.jpg](http://img.youtube.com/vi/G75WApUdYJ4/0.jpg)、[1.jpg](http://img.youtube.com/vi/G75WApUdYJ4/1.jpg)、[2.jpg](http://img.youtube.com/vi/G75WApUdYJ4/2.jpg)或[3.jpg](http://img.youtube.com/vi/G75WApUdYJ4/3.jpg)而不是提供默认图像（请参阅[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)）。

如果这不能满足您的需求，您可以比较每个图像的 Base64 编码，如此答案中所定义：[Get image data in JavaScript?](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)

# php - PHP 版本和 windows 7

> ID：14917671
> 
> 赞同：-5
> 
> 时间：2013-02-17T03:25:50.847
> 
> 标签：php, windows

在装有 Windows 7 的 PC 中输入`PHP -version`时，我得到：

![PHP 错误](../Images/63927d99ddb73eadb9897f2fd3795b02.png)

大家知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:28:51.773

尝试：

```
php -v 
```

应该够了

# html - 如何让浮动 div 占用所有可用空间

> ID：14917673
> 
> 赞同：1
> 
> 时间：2013-02-17T03:26:38.363
> 
> 标签：html, css, css-float

我有以下 HTML：

```
<div class="section">
    <p class="left">Some text</p>
    <div class="right">
        <p>item 1, item 2, item 3, item 4, item 5, item 6, item 7, item 8</p>
    </div>
</div> 
```

和 CSS：

```
div.section {
    margin: 30px;

    background: blue;
}

div.section p.left {
    display: inline;
    margin-top: 4px;

    background: red;
}

div.right {
    float: right;
    word-wrap: break-word;

    background: green;
} 
```

[你可以在这个 Fiddle](http://jsfiddle.net/2JLJR/4/)中玩这些。它看起来像这样：

![问题](../Images/383ca210149a6c0050a145ea781af9d1.png)

相反，我希望它看起来像这样，将右浮动包装`<div>`到没有 "left" 的可用宽度`<p>`：

![所需的解决方案](../Images/73a0482ce2de35f1cc3673c015e60ce1.png)

我怎样才能做到这一点（请不要告诉我 Javascript，应该有办法用 CSS 做到这一点）。当我为 float 指定宽度时，我得到了我想要的包装`<div>`，但我不能这样做，因为左侧的宽度会`<p>`有所不同。

**更新**

请允许我添加一些细节。所有文本都是动态生成的，并且父级的宽度会`<div>`发生变化。可能有 100 个项目，而不是 8 个。拆分`<p>`不是一个可行的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T03:30:07.843

也许

```
<div class="section">
    <p class="left">Some text</p>
    <div class="right">
        <p>item 1, item 2, item 3, item 4, item 5, item 6, item 7</p>
        <p>item 8</p>
    </div>
</div> 
```

似乎工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T03:37:02.020

```
<div class="container">
<div class="left" style="float:left;width:10%">
Some Text
</div>
<div class="right" style="float:left; width:90%">
<p>item 1, item 2, item 3, item 4, item 5, item 6, item 7</p>
<p>item 8</p>
</div>
<div style="clear:both">perhaps this without text if you want nothing else to float below</div>

</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T14:05:14.323

我试了一下，我相信这就是你要找的。 [http://jsfiddle.net/2JLJR/4/](http://jsfiddle.net/2JLJR/4/)

我给了各个元素一个浮点数和一个百分比宽度。

```
div#wrapper {
 margin: 30px;
 float:left;
 background: blue;
 height:auto;
}

p.left {
 display: block;
 width:20%;
 float:left;
 background: red;
}

div.right {
 float: right;
 word-wrap: break-word;
 width:80%;
 background: green;
 text-align:justify;
} 
```

# java - 如何在嵌套循环中反转一串数字

> ID：14917674
> 
> 赞同：0
> 
> 时间：2013-02-17T03:26:44.720
> 
> 标签：java

这是一个家庭作业问题，所以我想要帮助，而不是答案。

我正在尝试根据用户输入的数字从数字中创建 2 个三角形。

```
"Enter a number between 2-9: "3"
1
12
123

  1
 21
321 
```

IE2：

```
"Enter a number between 2-9: "5"
1
12
123
1234
12345

    1
   21
  321
 4321
54321 
```

我已经能够完成第一个三角形。但是当我添加我的嵌套循环时，它会将我的第一个三角形与从嵌套循环开发的数字混淆。它还将所有数字放在一条垂直的直线上。我尝试了不同嵌套循环的变体，甚至尝试弄乱 a `StringBuilder`，但仍然不成功。到目前为止，这是我在代码中的内容：

```
import java.util.Scanner;

public class NestedLoops
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);

        System.out.print("Enter a Number between 2-9: ");
        int width = input.nextInt();

        String r = "";
        for (int i = 1; i <= width; i++)
        {
            r = r + i;
            System.out.println(r);

        }

    }

} 
```

同样，我正在寻求帮助/理解，而不仅仅是答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:01:35.803

问题的第二部分有两个方面。

1.  您需要以相反的顺序生成带有数字的字符串：

    *   您可以通过在另一端添加数字来做到这一点。
    *   您可以通过反转字符串来做到这一点。
2.  您需要安排左侧有空格。

    *   您可以通过在字符串的左端添加所需数量的空格来做到这一点。
    *   您可以通过使用 System.out.format(...) 和模板来做到这一点，该模板将字段中的字符串与所需的字符数右对齐。（好吧，这有点太晦涩了......）

或者，您可以在字符数组或字符串构建器中构建字符串，而不是使用字符串连接。

“诀窍”是在开始剪切代码之前弄清楚您将使用什么策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:29:34.100

您需要使用队列。例如。[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/LinkedList.html)

对数字进行排队，直到达到最大值，然后开始对它们进行排序。

当你出队时，你需要应用相反的

```
Queue<String> q = new LinkedList<String>();
        for (int i = 1; i <= width; i++)
        {
            r = r + i;
            q.add(r);
            System.out.println(r);

        }

        while(!q.isEmpty()){
            String j = q.remove();
             //reverse j
            System.out.println(reverse(j));
        } 
```

我把倒车部分留给你做:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T03:36:05.647

您可以在第一个循环之后添加另一个循环吗

```
String r = "";
String space = "";
    for (int i = width; i >= 1; i--)
    {
        r = r + i;
        System.out.println(r);

    } 
```

尝试一下。尚未测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T03:51:13.790

尝试

```
 int width = 5;
    // for all lines; number of lines = width
    for (int line = 1; line <= width; line++) {
        // print numbers from 1 to current line number  
        for (int n = 1; n <= line; n++) {
            System.out.print(n);
        }
        // end of line
        System.out.println();
    }
    // add empty line between triangles
    System.out.println();
    // for all lines; number of lines = width
    for (int line = 1; line <= width; line++) {
        // printing padding spaces, number of spaces = with - line number
        int nSpaces = width - line;
        for (int i = 0; i < nSpaces; i++) {
            System.out.print(" ");
        }
        // print numbers from number of current line to 1
        for (int n = line; n >= 1; n--) {
            System.out.print(n);
        }
        // end of line
        System.out.println();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T04:32:20.667

```
public static void main(String[] args)
{
    int n = 5;

    for(int i=1; i<=n; i++)
    {            
        for (int j=(n*2), k=n; j>1; j--) 
        {
            if (k <= i) 
            {
                System.out.print(k);
            } 
            else 
            {
                System.out.print('*');
            }

            k += (j)-1 > n ? -1 : 1;
        }

        System.out.println();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T22:14:59.697

刚刚尝试在scala中实现。不喜欢的请忽略..:-)

```
 class Triangle extends App
{
  val width = Console.readInt()

  if (width < 2 || width > 9)
  {
     throw new RuntimeException()
  }

  var i, j = 1;

  for (i <- 1 to width)
  {
     for (j <- 1 to i)
     {
        print(j)
     }
     print("\n")
  }

  for (i <- 1 to width)
  {
     for (dummy <- 1 to width-i)
     {
        print(" ")
     }
     for (j <- i to 1 by -1)
     {
       print(j)
     }
     print("\n")
  }
} 
```

# php - PHP - 仅遍历数据库中的某些字段的最佳实践

> ID：14917678
> 
> 赞同：0
> 
> 时间：2013-02-17T03:27:29.583
> 
> 标签：php, database

我正在制作一个可以同时运行多个房间的游戏。我有一个 MySQL 表“房间”来保存所有房间的信息。

此表中的字段包括“id”，房间的数字 id，以及“user1”到“user6”，房间中用户的数字 id。

在一页上，我必须对所有房间的这些信息做一些事情，我当前的代码是这样的：

```
//query() is just a function which implements mysqli::query with logging,
//  error handling, etc. It uses the same connection on each call so
//  there is no overhead of opening a new connection.
$q = query("SELECT id,some_other_fields,user1,user2,user3,...,user6 FROM rooms");
while($r = $q->fetch_assoc()){
    //some stuff here

    foreach(array($r['user1'],$r['user2'],...,$r['user6']) as $user)
        stuff((int)$user);

    //some more stuff
} 
```

如您所见，我必须为用户显式创建一个数组并循环遍历它。
有更好的方法吗？

我正在考虑这段代码：

```
$q = query("SELECT id,some_other_fields FROM rooms");
while($r = $q->fetch_assoc()){
    //some stuff here

    foreach(query("SELECT user1,user2,user3,...,user6 FROM rooms WHERE id=".$r['id'])->fetch_assoc() as $user)
        stuff((int)$user);

    //some more stuff
} 
```

如果房间数量通常在 10~20 间左右，这样是否合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:53:08.500

在执行查询之前创建一个字段数组，如下所示

```
$fields = array('user1','user2','user3','user4');

$q = query("SELECT id,some_other_fields, ". implode($fields, ',') ." FROM rooms");
while($r = $q->fetch_assoc()){
    //some stuff here

    foreach($fields as $field)
        stuff((int)$r[$field]);

    //some more stuff
} 
```

然后你可以改变你的查询和你的循环，而只改变一行代码。

# php - 使用 XmlReader 解析子节点

> ID：14917679
> 
> 赞同：2
> 
> 时间：2013-02-17T03:28:10.293
> 
> 标签：php, xml, xmlreader

我解析一个大型 XML 文档，在解析子节点时遇到了很多麻烦。下面是我要解析的示例。

```
<link rel="http://xxxxx/people.employees" title="employees">
    <people>
      <link href="/154" rel="http://catalog/person" title="Guy Nom" />
      <link href="/385" rel="http://catalog/person" title="Carrie Jin" />
      <link href="/162" rel="http://catalog/person" title="Joe Zee" />
      <link href="/2125" rel="http://catalog/person" title="Mark Polin" />
      <link href="/9293" rel="http://catalog/person" title="Stephen Castor" />
      <link href="/21822" rel="http://catalog/person" title="Callum Tinge" />
      <link href="/2022" rel="http://catalog/person" title="Brian Lennon" />
      <link href="/2040" rel="http://catalog/person" title="Jorja Fox" />
      <link href="/2046" rel="http://catalog/person" title="Harry Harris" />
      <link href="/2399" rel="http://catalog/person" title="Sam Muellerleile" />
    </people>
  </link>
  <link rel="http://xxxxx/people/others" title="others">
    <people>
      <link href="/7143" rel="http://catalog/person" title="James Smith" />
    </people>
  </link> 
```

我需要区分“员工”和“其他人”并将它们存储在单独的字段中。我想做如下的事情：

```
if($xmlReader->localName == 'link') {
    if ($xmlReader->getAttribute('title') == "employees"){
      //GO TO NEXT LINK TAG AND GET NAME
      $myObject->employees[$myObject->employees_count]['name'] = $xmlReader->getAttribute('title');
      $myObject->employees_count++;

    } else if ($xmlReader->getAttribute('title') == "others"){
      //GO TO NEXT LINK TAG AND GET NAME
      $myObject->others[$myObject->others_count]['name'] = $xmlReader->getAttribute('title');
      $myObject->others_count++;

    }
  } 
```

显然，上面评论的部分对我来说是个问题。我不知道如何阅读这些子元素，而且在我看来，这方面的 PHP 文档一点也不好。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T08:07:25.140

对于 XmlReader，您可以使用该[`$depth`属性](http://www.php.net/manual/en/class.xmlreader.php#xmlreader.props.depth)。`<link>`元素会喜欢 have `1`(one) 所以当你继续阅读时，你可以检查当前元素是否仍然是它的子元素，因为你会看到 a`END_ELEMENT`相同的元素`$depth`，然后你知道子元素都被消耗掉了。

在昨天的回答中，我展示了如何通过扩展来封装该逻辑`XML_Reader`：

*   [为什么这个 xmlreader 代码不起作用？](https://stackoverflow.com/a/14904227/367456)

它允许将父元素的深度传递给一个名为的新方法`readToNextChildElement($depth)`，该方法仅允许您遍历子元素。

使用示例：

```
$depth = $reader->depth; # parent elements depth
while ($reader->readToNextChildElement($depth)) {
    # only children
} 
```

实现是：

```
class MyXMLReader extends XMLReader
{
    ...

    public function readToNextChildElement($depth)
    {
        // if the current element is the parent and
        // empty there are no children to go into
        if ($this->depth == $depth && $this->isEmptyElement) {
            return false;
        }

        while ($result = $this->read()) {
            if ($this->depth <= $depth) return false;
            if ($this->nodeType === self::ELEMENT) break;
        }

        return $result;
    }

    ... 
```

您可以在链接的答案中找到其余代码。根据您的需要，这可能会有所帮助-如果您希望以此`XML_Reader`为基础。否则，如果您可以将整个文档加载到内存中，则 Xpath 更易于使用来查询您的元素。

```
$employees_names = array_map(
    'strval', 
    $sxml->xpath('//link[@title="employees"]//link/@title')
); 
```

那是[*SimpleXML*](http://php.net/manual/en/book.simplexml.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T06:40:43.293

使用 XMLReader::readInnerXML()

```
<?php
$reader = new XMLReader();
$reader->open("filename.xml");

while ($reader->read()) {

    if($reader->name=='Foo' && $reader->nodeType == XMLReader::ELEMENT) {

        $reader->moveToElement();
        $Foo = new SimpleXMLElement($reader->readOuterXml());

        //$Foo->bar

    }
}
$reader->close();
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T05:20:02.513

就个人而言，我会使用[`SimpleXML`](http://www.php.net/manual/en/class.simplexmlelement.php)它，因为 XMLReader 根本没有很好的文档记录，并且（取决于您的需要）如果您没有 XMLReader 正常工作来解析文档的其他部分，那么应该可以很好地工作。话虽如此，这是我使用的代码以及输入。

**测试.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<result>
<link rel="http://xxxxx/people.employees" title="employees">
    <people>
        <link href="/154" rel="http://catalog/person" title="Guy Nom" />
        <link href="/385" rel="http://catalog/person" title="Carrie Jin" />
        <link href="/162" rel="http://catalog/person" title="Joe Zee" />
        <link href="/2125" rel="http://catalog/person" title="Mark Polin" />
        <link href="/9293" rel="http://catalog/person" title="Stephen Castor" />
        <link href="/21822" rel="http://catalog/person" title="Callum Tinge" />
        <link href="/2022" rel="http://catalog/person" title="Brian Lennon" />
        <link href="/2040" rel="http://catalog/person" title="Jorja Fox" />
        <link href="/2046" rel="http://catalog/person" title="Harry Harris" />
        <link href="/2399" rel="http://catalog/person" title="Sam Muellerleile" />
    </people>
</link>
<link rel="http://xxxxx/people/others" title="others">
    <people>
        <link href="/7143" rel="http://catalog/person" title="James Smith" />
    </people>
</link>
</result> 
```

然后用 PHP 解析该示例（注意，我没有在这里包含你的变量，但你应该能够从中得出你需要的东西。此外，最后是验证，即显示，已经人口稠密。）

```
<?php

$xml = simplexml_load_file('test.xml','SimpleXMLElement', LIBXML_NOCDATA);
//Place holder variables as I don't have access to the object.
$emp=array();$emp_count=0;$other=array();$other_count=0;

foreach($xml->link as $links) {
    $at = $links->attributes();
    if($at['title'] == 'employees') {
        foreach($links->people->link as $person) {
            $emp_count++;
            $employee = $person->attributes();
            $emp[] = (string)$employee['title'];
        }
    } elseif($at['title'] == 'others') {
        foreach($links->people->link as $person) {
            $other_count++;
            $others = $person->attributes();
            $other[] = (string)$others['title'];
        }
    }
}
echo "<pre>";
echo "Employees: $emp_count\n";
print_r($emp);

echo "Others: $other_count\n";
print_r($other);

echo "</pre>";
?> 
```

这是输出（所以你不必自己运行它^^）

```
Employees: 10
Array
(
    [0] => Guy Nom
    [1] => Carrie Jin
    [2] => Joe Zee
    [3] => Mark Polin
    [4] => Stephen Castor
    [5] => Callum Tinge
    [6] => Brian Lennon
    [7] => Jorja Fox
    [8] => Harry Harris
    [9] => Sam Muellerleile
)
Others: 1
Array
(
    [0] => James Smith
) 
```

我希望这会有所帮助！

# python - Python和MySql，将数据插入到通过外键连接的两个表中的另一种方法

> ID：14917688
> 
> 赞同：1
> 
> 时间：2013-02-17T03:29:23.917
> 
> 标签：python, mysql, insert

**你好，我用外键连接了两个MySql表，我想通过python向它们插入数据。这是一段有效的代码，但应该有另一种专业的方法来这样做，否则我不需要外键，我只需插入第二个表的第一个表 customer_id 列的 ID。谢谢你的帮助。**

```
 Product = str(self.Text.GetValue())
    Product2 = str(self.Description.GetValue())       
    db=MySQLdb.connect('127.0.0.1', 'root','password', 'database') 
    cursor = db.cursor()  
    cursor.execute("INSERT INTO customer (Address) VALUES (%s)", (Product))  
    cursor.execute("SELECT id FROM customer ORDER BY id DESC LIMIT 1")
    rows = cursor.fetchall()
    the_id= rows[0][0]
    cursor.execute("INSERT INTO product_order (customer_id, description) VALUES (%s,%s)", (the_id,Product2))        
    cursor.execute("commit") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:32:06.057

用于`db.insert_id()`获取最后插入的 id/customer_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:33:32.773

呃[`the_id = cursor.lastrowid`](http://www.python.org/dev/peps/pep-0249/)……

# asp.net - onhashchange 和 backstack 仅适用于 localhost

> ID：14917691
> 
> 赞同：0
> 
> 时间：2013-02-17T03:30:05.743
> 
> 标签：asp.net, web-config, localhost

我在我的网页中使用哈希更改和 onhashchange 事件。在本地测试时（使用 asp.net 开发服务器），`window.onhashchange`事件会正确触发并将哈希更改推送到后台堆栈。但是，当网站部署到服务器（IIS 7.5）时，从相同客户端计算机上的相同浏览器访问，事件不会触发，虽然我可以看到地址栏中的哈希值发生了变化，但它们没有被推送到backstack 和 back 键导致上一页。我应该调整任何 IIS/asp.net 配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:24:54.200

原来是IE兼容模式。这个答案解决了这个问题：[https](https://stackoverflow.com/a/5887271/986080) ://stackoverflow.com/a/5887271/986080 。

# java - java.awt.Robot 的本机源代码

> ID：14917697
> 
> 赞同：6
> 
> 时间：2013-02-17T03:31:50.237
> 
> 标签：java, c++, java-native-interface

我正在尝试查找 Java Robot 函数的本机实现。[我在这里](http://cr.openjdk.java.net/~ohair/openjdk7/jdk7-build-copyright/webrev/jdk/src/windows/native/sun/windows/awt_Robot.cpp.html)找到了 Windows 实现。哪里可以找到mac和linux版本。我主要是想找出它在做什么，看看我如何在 C++ 中自己实现这个功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-25T13:50:30.083

好的，所以我做了一些挖掘，找到了我想要的东西。这些可能不是最新版本，但元数据在那里。

*   Linux：[awt_robot.c](http://searchcode.com/codesearch/view/17994444)
*   Mac：[CRobot.m](http://cr.openjdk.java.net/~michaelm/7113349/jdk8/webrev.2/jdk/src/macosx/native/sun/awt/CRobot.m.html)
*   赢：[awt_robot.cpp](http://cr.openjdk.java.net/~ohair/openjdk7/jdk7-build-copyright/webrev/jdk/src/windows/native/sun/windows/awt_Robot.cpp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T09:50:14.987

这个类的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Robot.java)似乎没有任何本地方法，可能调用被委托到其他地方。无论如何，OpenJDK 似乎是一个合适的搜索位置，因为这是一个完整的项目，而不仅仅是用 Java 编写的部分。

# c# - 查询后删除数据

> ID：14917702
> 
> 赞同：1
> 
> 时间：2013-02-17T03:32:07.093
> 
> 标签：c#, linq, datetime, linq-to-entities, entity-framework-5

我需要帮助编写这个 LINQ 查询，这就是我想要做的 - 我有两个表

```
Message
===
Name
MessageTypeID  -> Foreign Key
Date

MessageType
===
ID **(the foreign key)
Name 
```

我的 Get API 方法返回具有以下结构的 JSON 对象：

```
- List<MessageType>
- Name
- List<Message> 
```

问题：我希望将消息类型对象中的消息列表过滤为仅包含日期小于今天的消息。

我的第一个解决方案是执行以下操作 - 但这只会多次返回第一个 messagetype 对象。

```
var mt = from m in db.MessageType
         join l in db.Message on m.MessageTypeID equals l.MessageTypeID
         where m.SenderID == id && l.Date < DateTime.Now
         select m;
return mt.AsEnumerable(); 
```

然后我尝试在查询后删除联接并删除数据，但这导致了异常。

```
var myList = mt.ToList();
foreach (var mtype in myList)
{
    foreach (var mess in mtype.LibMessages)
    {
        if (mess.VisibleEndDate < DateTime.Now)
        {
            // remove expired message. 
            mtype.LibMessages.Remove(mess);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:43:41.387

您不能在 ForEach 中修改您正在迭代的集合 请按如下方式修改内部循环：

```
var myList = mt.ToList();
foreach (var mtype in myList)
{
    foreach (var mess in mtype.LibMessages.ToList())
    {
        if (mess.VisibleEndDate < DateTime.Now)
        {
            // remove expired message. 
            mtype.LibMessages.Remove(mess);
        }
    }
} 
```

# javascript - JQuery Knockout ComputedObservable Write 没有被调用 ObservableArray

> ID：14917703
> 
> 赞同：2
> 
> 时间：2013-02-17T03:32:41.423
> 
> 标签：javascript, jquery, knockout.js, ko.observablearray, computed-observable

我正在尝试绑定一个内部使用可观察数组的计算可观察对象。加载时确实会调用“读取”方法。但是当表中的值改变并且焦点被移动时，不会调用“write”方法。请注意，对于不包装数组而是简单字符串的简单计算 observables，“write”方法有效。但是，对于这种情况，它不起作用。我查看了 Knockout api 文档和在线论坛，但找不到任何相关信息。有人可以请教吗？以下是 HTML 代码

```
 <thead>
        <tr><th>People Upper Case Name</th></tr>
        </thead>
        <tbody data-bind="foreach: uppercasepeople">
        <tr>
           <td ><input type="text" data-bind="value: name"/></td>            
        </tr>
        </tbody>
        </table> 
```

以下是 Java Script 代码

```
 <script type="text/javascript">

var MyViewModel = function () {

    var self = this;
    var self = this;

    //Original observable array is in lower case
    self.lowercasepeople = ko.observableArray([
    { name: "bert" },
    { name: "charles" },
    { name: "denise" }
]);

    //coputed array is upper case which is data-bound to the ui
    this.uppercasepeople = ko.computed({
        read: function () {
            alert('read does get called :)...yaaaa!!!');
            return self.lowercasepeople().map(function (element) {
                var o = { name: element.name.toUpperCase() };
                return o;
            });
        },
        write: function (value) {
            alert('Write does not get called :(... why?????');
            //do something with the value
            self.lowercasepeople(value.map(function (element) { return element.toLowerCase(); }));
        },
        owner: self
    });

}

ko.applyBindings(new MyViewModel()); 
```

我将代码与 Knockout API 文档中显示的示例类似，以便人们轻松关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:49:35.060

您拥有的计算出的 observable 只处理数组本身。`write`仅当您尝试直接设置 的值时，才会调用该函数`uppercasepeople`。

在这种情况下，您可能希望使用在 person 对象本身上计算的可写对象并使名称可观察。然后，可写计算将名称转换为大写，并在写入时用小写值填充可观察的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:03:22.303

```
var MyViewModel = function () {

var self = this;

//Original observable array is in lower case
self.lowercasepeople = ko.observableArray([
{ name: "bert" },
{ name: "charles" },
{ name: "denise" }
]);

self.recententlyChangedValue = ko.observable();

//coputed array is upper case which is data-bound to the ui
this.uppercasepeople = ko.computed({
    read: function () {
        alert('read does get called :)...yaaaa!!!');
        return self.lowercasepeople().map(function (element) {
            var o = { name: element.name.toUpperCase() };
            return o;
        });
    },
    write: function (value) {
        alert('It will be called only when you change the value of uppercasepeople field');
        //do something with the value 

         self.recententlyChangedValue(value);             
    },
    owner: self
});
} 
```

# ruby-on-rails - 充当可标记标签所有者错误

> ID：14917705
> 
> 赞同：1
> 
> 时间：2013-02-17T03:32:58.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, acts-as-taggable-on

我有如下代码：

```
Parent Class
->acts_as tagger

Child Class
->acts_as_taggable 
```

如果我打印“child.tag_list”，我会得到正确的结果，例如“A”。如果我打印'parent.owned_tags'，我会得到：

```
#<ActsAsTaggableOn::Tag id: 7, name: "A"> 
```

任何想法为什么父母拥有的标签的格式会以这种方式出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:54:53.613

我只使用了一周的行为作为标记，但这是我的两分钱......

我认为这是因为通常当您在可标记对象上获取和设置标签时，使用字符串最容易做到这一点。当我们想知道我们拥有的标签时，我们希望通过标签将实际对象放在集合中，以便我们可以做我们想做的事情。`parent.owned_tags.map{|tag| tag.name}.join(', ')`在你的情况下，我们会用我认为的东西映射那个数组。

那有意义吗？最好添加一个方法，这样我们就可以做到`parent.owned_tag_list`。也许已经存在用于输出字符串？！

# css - CSS 百分比大小说明符将元素大小调整为大于指定大小

> ID：14917712
> 
> 赞同：0
> 
> 时间：2013-02-17T03:34:06.510
> 
> 标签：css, web

在 CSS 中，我从来没有真正理解为什么会发生这种情况，但是每当我分配一些东西 a`margin-top:50%`时，元素就会被推到页面底部，几乎完全离开页面。我假设 50% 时，元素将位于页面的中间。

设置元素的宽度和高度属性也会发生这种情况。如果我将 div 的宽度设置为 100%，则 div 的右侧会离开可视屏幕，我必须滚动才能看到它。

为什么会发生这种情况，有没有办法解决它？

编辑：

这是我的CSS代码。我也在使用引导程序，但这是我在引导程序之外注意到的一个问题。

```
html{
height:100%;
min-height: 100%;
min-width: 100%;
}
#button_container{
width:100%;
clear:both;
margin:0 auto;
margin-top: 25%;
}

#donate_section, #contrib_section{
display:inline;
}
#contrib_section{
float:right;
} 
```

样板 HTML 标记：

```
<body>
    <div id="someid"> 
         <div>
             <a></a>
         </div>
         <div>
             <a></a>
         </div>
     </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:40:38.643

读这个，然后再读一遍：[http ://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

您的“宽度”设置仅设置内容部分-因此您的总宽度为内容+边距+填充+边框。因此，如果宽度 = 50%，那么在这一切之后，你真的有更多的 55% 左右（具有正常的、较小的边距/填充/边框）。如果您希望您的 div 在外部仅占 50%，则需要有一个在其外部 50% 的无填充/边距/边框 div，或任何数量的其他解决方案。

您也可能正在处理浏览器渲染并不完美的事实。如果您想避免滚动，通常不应使用 100% 的宽度。（这也是一个很好的“Web 2.0”设计，如果你遵循那所学校——从可用性/可读性的角度来看，你*应该*在两边都有空白）。

编辑：另外，你的 % 是相对于*宽度*，而不是高度。例如，参见[CSS 流体布局：margin-top 基于百分比随着容器宽度增加而增加](https://stackoverflow.com/questions/10629294/css-fluid-layout-margin-top-based-on-percentage-grows-when-container-width-incr)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:41:02.730

引用通常与父元素“相对”。除非你说的是body标签的第一个孩子。

# android - 从软件键盘读取 Keycode / Keychar

> ID：14917713
> 
> 赞同：0
> 
> 时间：2013-02-17T03:34:50.463
> 
> 标签：android, keyboard, char, keycode

我需要的是：

1.  单击按钮即可调出软件键盘。这里有很多答案。
2.  一旦用户按下软件键盘上的任何键（除了 switch ime，...），我想触发一个监听器，它将键码/键字符传输到另一个方法。因此，如果用户按下`a`我想接收`'a'`或`65`（keycode for `a`）。

有没有类似的东西已经可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:27:37.187

您可以使用 onKeyDown 侦听器，默认情况下，它将键代码传递到事件处理程序。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    Lod.d("ON KEY DOWN", "KEY CODE: " + keyCode);

    return super.onKeyDown(keyCode, event);
} 
```

请记住在此处返回一个值，因为事件处理程序需要返回类型为**boolean**。

# java - 从字符串中删除“”之外的空格

> ID：14917716
> 
> 赞同：2
> 
> 时间：2013-02-17T03:35:49.960
> 
> 标签：java, string, char, token, stringtokenizer

如何删除字符串上“”之外的所有空格？例如：

```
0507 ? "Y e a" : "No" 
```

应该返回：

```
0507?"Y e a":"No" 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:55:31.107

尝试

```
 String s = "0507 ? \"Y e a\" : \"No\"".replaceAll(" +([?:]) +", "$1");
    System.out.println(s); 
```

印刷

```
0507?"Y e a":"No" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:47:34.783

- 您可以使用 st.split() 函数按 " 拆分

- 然后仅在数组的偶数索引上应用 st.replaceAll("\s","")

- 然后使用各种实用程序连接数组的所有元素，如 Apache Commons lang StringUtils.join(

**例如：**

原始字符串 - 0507？“是”：“不是”

用 " ..... {0507 ? ,Y ea, : ,No} 分割后

在数组的偶数索引上应用 st.replaceAll("\s","") .... {0507? ,是的,:,否}

使用 StringUtils.join(s, "\"") 连接...... 0507? "Y e a":"No"

示例代码：

```
 String input="0507 ? \"Y e a\" : \"No\"";
    String[] inputParts = input.split("\"");

    int i = 0;
    while(i< inputParts.length)
    {
        inputParts[i]=inputParts[i].replaceAll("\\s", "");
        i+=2;
    }

    String output = StringUtils.join(inputParts, "\""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T03:59:41.453

或尝试 StringTokenizer ：读取[标记](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String%29)器使用默认分隔符集，即“\t\n\r\f”：空格字符、制表符、换行符、回车符和换页符.

```
 StringTokenizer tok=new StringTokenizer(yourString);
    String temp="";

    while(tok.hasMoreElements()){
        temp=temp+tok.nextElement();
    }

    System.out.println("temp"+temp); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T14:52:41.960

这段代码

```
static Pattern groups = Pattern.compile("([^\\\"])+|(\\\"[^\\\"]*\\\")");
public static void main(String[] args) {
    String test1="0507 ? \"Y e a\" : \"No\"";
    System.out.println(replaceOutsideSpace(test1));
    String test2="0507 ?cc \"Y e a\" :bb \"No\"";
    System.out.println(replaceOutsideSpace(test2));
    String test3="text text  text   text \"Y e a\" :bb \"No\"  \"\"";
    System.out.println(replaceOutsideSpace(test3));
    String test4="text text  text   text \"Y e a\" :bb \"No\"  \"\" gaga gag   ga  end";
    System.out.println(replaceOutsideSpace(test4));
}
public static String replaceOutsideSpace(String text){
    Matcher m = groupsMatcher(text);
    StringBuffer sb = new StringBuffer(text.length());
    while(m.find()){
        String g0=m.group(0);
        if(g0.indexOf('"')==-1){g0=g0.replaceAll(" ", "");}
        sb.append(g0);
    }
    return sb.toString();
}
private synchronized static Matcher groupsMatcher(String text)
{return groups.matcher(text);} 
```

印刷

```
0507?"Y e a":"No"
0507?cc"Y e a":bb"No"
texttexttexttext"Y e a":bb"No"""
texttexttexttext"Y e a":bb"No"""gagagaggaend 
```

# ios - 在设备上显示图像时出现问题

> ID：14917720
> 
> 赞同：0
> 
> 时间：2013-02-17T03:36:27.120
> 
> 标签：ios, objective-c, cocoa-touch, uiimageview

我正在开发我的第一个 IOS 应用程序。该应用程序通过 PHP 网页从数据库下载并显示数据。这一切都很好。我还从同一个 Web 服务器抓取图像以显示在 UIImageView 中。这一切都在模拟器上运行良好。

在我的测试设备（3GS）上，一切正常，除了我无法将下载的图像显示在我的 UIImageView 中。

如果没有互联网连接，我可以在模拟器和设备上显示我包含在应用程序包中的备用图像。

```
// Inside My data class Implementation
- (void)setUpTheData
{
--- other code ---

NSURL *myImageURL = [NSURL URLWithString:myImageURLString];
NSData *myImageRawData = [NSData dataWithContentsOfURL:myImageURL];
self.myImageData = myImageRawData;

}

- (NSData*)getTheImageData
{
    return _myImageData;
}

// Inside my viewDidLoad
UIImage *theImage = [UIImage imageWithData:[theRemoteData getTheImageData]];
_testImage.image = theImage; 
```

我比较了模拟器和设备的图像数据，它们是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:54:29.200

试试 viewDidAppear 而不是 viewDidLoad 也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:39:40.247

我在数据类的 imageData 属性中设置了一个弱指针。更改为强解决了我的问题。

# javascript - 是否可以让这个 YouTube 视频自动播放并填满 100% 的屏幕

> ID：14917721
> 
> 赞同：2
> 
> 时间：2013-02-17T03:36:29.507
> 
> 标签：javascript, html, youtube, flash

所以我有这个看起来像这样的代码并播放 YouTube 视频：

```
// The "main method" of this sample. Called when someone clicks "Run".
  function loadPlayer() {
    // The video to load
    var videoID = "XjMQmXAJ3y4"
    // Lets Flash from another domain call JavaScript
    var params = { allowScriptAccess: "always"};
    // The element id of the Flash embed
    var atts = { id: "ytPlayer" };
    // All of the magic handled by SWFObject (http://code.google.com/p/swfobject/)
    swfobject.embedSWF("http://www.youtube.com/v/" + videoID +
                       "&enablejsapi=1&playerapiid=player1",
                       "videoDiv", 800, 600, "8", null, null, params, atts); 
```

是否可以让视频填满屏幕（100% 宽度和 100% 高度）？

另外，我想知道是否可以使视频自动播放？

--

编辑：自动播放问题已修复，但全屏宽度和高度问题仍然存在，我试图实现以下代码无济于事：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document
$(window).width();   // returns width of browser viewport
$(document).width(); // returns width of HTML document
</script>

<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
  google.load("swfobject", "2.1");
</script>    
<script type="text/javascript">

var locationToRedirect = "http://URL.com";

  function EventListener(ev)
{

    if(!ev)
    {
        window.location.href = locationToRedirect;
    }
    else if(ev == 5)
    {
        ytpl = document.getElementById("ytPlayer");
        ytpl.playVideo();
    }

}
  function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById("ytPlayer");
    ytplayer.addEventListener("onStateChange", "EventListener");
  }

  // The "main method" of this sample. Called when someone clicks "Run".
  function loadPlayer() {
    // The video to load
    var videoID = "XjMQmXAJ3y4"
    // Lets Flash from another domain call JavaScript
    var params = { allowScriptAccess: "always"};
    // The element id of the Flash embed
    var atts = { id: "ytPlayer" };
    // All of the magic handled by SWFObject (http://code.google.com/p/swfobject/)
    swfobject.embedSWF("http://www.youtube.com/v/" + videoID +
                       "&enablejsapi=1&playerapiid=player1&autoplay=1",
                       "videoDiv", screen.height, screen.width, "8", null, null, params, atts);
  }
  function _run() {
    loadPlayer();
  }
  google.setOnLoadCallback(_run);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:45:27.233

请参阅[此问题](https://stackoverflow.com/questions/3437786/how-to-get-web-page-size-browser-window-size-screen-size-in-a-cross-browser-wa)以获取屏幕的大小。然后，您可以使用这些值代替您拥有的位置，`800, 600`即我认为您拥有播放器的高度和宽度的位置。

然后只需`&autoplay=1`在视频 ID 后添加即可。[来源](http://support.google.com/youtube/bin/answer.py?hl=en&answer=1181821)。

编辑：我发现了另一个涵盖屏幕分辨率的问题。[如何在 javascript 和/或 php 中获取访问者的屏幕分辨率？](https://stackoverflow.com/questions/1091540/how-to-get-screen-resolution-of-visitor-in-javascript-and-or-php)

# ios - 使用可达性的语义问题

> ID：14917722
> 
> 赞同：1
> 
> 时间：2013-02-17T03:36:30.730
> 
> 标签：ios, semantics, reachability

我已经被这个**语义问题**警告困扰了一个星期，而且变得令人沮丧。有人愿意看看吗？任何建议都将被亲切地采纳。<3

**WebViewController.m**

```
#import "WebViewController.h"
#import "Reachability.h"

@implementation WebViewController
@synthesize webView;
@synthesize backbtn;
@synthesize forwardbtn;
@synthesize webAddy;
@synthesize activityIndicator;
@synthesize loadingLabel;

- (void)viewDidLoad {
    loadingLabel.hidden = YES;
    backbtn.enabled = NO;
    forwardbtn.enabled = NO;
    webView.scalesPageToFit = YES;
    activityIndicator.hidesWhenStopped = YES;

    if([Reachability currentReachabilityStatus] == NotReachable)
{ 
        UIAlertView *av = [[[UIAlertView alloc] 
                            initWithTitle:@"Sorry" 
                            message:@"You are not connected to the internet. Please Try again"
                            delegate:nil 
                            cancelButtonTitle:@"OK"
                            otherButtonTitles:nil] autorelease];
        [av setDelegate:self];
        [av show];
    }
    else
    {
        NSURL *url = [NSURL URLWithString:webAddy];
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [webView loadRequest:requestObj];
    }

    [super viewDidLoad];
} 
```

*警告*将我重定向到第 20 行。编译器告诉我：“*找不到类方法‘+currentReachabilityStatus’（返回类型默认为‘id’）* ”

如果需要更多信息，请告诉我。再次感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T03:40:40.433

见[这里](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_h.html#//apple_ref/doc/uid/DTS40007324-Classes_Reachability_h-DontLinkElementID_5)。

`- (NetworkStatus) currentReachabilityStatus;`不是类方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:40:42.310

使用`[[Reachability reachabilityForInternetConnection] currentReachabilityStatus]`而不是`[Reachability currentReachabilityStatus]`.

`currentReachabilityStatus`是一个实例方法，所以你首先需要一个实例。

# ruby-on-rails - 我的 Rails 应用程序在 Heroku 上的 redis 缓存

> ID：14917728
> 
> 赞同：1
> 
> 时间：2013-02-17T03:38:11.293
> 
> 标签：ruby-on-rails, heroku, redis

我正在尝试在 Heroku 上使用 Redis。

我在初始化器上设置如下。

```
redis_url = ENV["REDISTOGO_URL"] || "redis://127.0.0.1:6379/0/myapp"
RedisApp::Application.config.cache_store = :redis_store, redis_url
RedisApp::Application.config.session_store :redis_store, redis_server: redis_url 
```

会话工作正常。但是片段缓存会出错。

```
ActionView::Template::Error (Error connecting to Redis on 127.0.0.1:6379 (ECONNREFUSED)): 
```

我相信缓存试图访问错误的位置。

我犯了什么错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-18T08:41:27.347

您必须更改`ENV`变量，`ENV["REDIS_URL"]`它将使用 Heroku 本身提供的变量

# python - 即使显示更多链接，也可以从 html 获取所有链接

> ID：14917736
> 
> 赞同：1
> 
> 时间：2013-02-17T03:40:13.993
> 
> 标签：python, html, beautifulsoup

我正在使用 python 和 beautifulsoup 进行 html 解析。

我正在使用以下代码：

```
from BeautifulSoup import BeautifulSoup
import urllib2
import re

url = "http://www.wikipathways.org//index.php?query=signal+transduction+pathway&species=Homo+sapiens&title=Special%3ASearchPathways&doSearch=1&ids=&codes=&type=query"

main_url = urllib2.urlopen(url)
content = main_url.read()
soup = BeautifulSoup(content)

for a in soup.findAll('a',href=True):
    print a[href] 
```

但我没有得到像这样的输出链接：http: [//www.wikipathways.org/index.php/Pathway :WP26](http://www.wikipathways.org/index.php/Pathway:WP26)

还有一点是有 107 条路径。但我不会得到所有链接，因为其他链接取决于页面底部的“显示链接”。

那么，如何从该网址获取所有链接（107 个链接）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:30:40.567

你的问题是第 8 行，`content = url.read()`. 你实际上并没有阅读网页，你实际上什么也没做（如果有的话，你应该得到一个错误）。

`main_url`是您要阅读的内容，因此将第 8 行更改为：

```
content = main_url.read() 
```

您还有另一个错误，`print a[href]`. `href`应该是一个字符串，所以它应该是：

```
print a['href'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T03:43:05.677

我建议使用`lxml`它更快更好地解析 html 值得花时间学习它。

```
from lxml.html import parse
dom = parse('http://www.wikipathways.org//index.php?query=signal+transduction+pathway&species=Homo+sapiens&title=Special%3ASearchPathways&doSearch=1&ids=&codes=&type=query').getroot()
links = dom.cssselect('a') 
```

那应该让你继续前进。

# ruby-on-rails - 使用 Twitterstream Gem 获取特定于美国的推文

> ID：14917747
> 
> 赞同：0
> 
> 时间：2013-02-17T03:41:52.703
> 
> 标签：ruby-on-rails, ruby, twitter, gem

我有一个关于使用 tweetstream gem 的问题！我目前正在从 twitter 下载 1% 的流，但我希望能够下载仅在美国 48 州以下地区过滤的推文，有什么办法可以用这个（或其他）gem 做到这一点？这是我到目前为止的代码。任何和所有的帮助表示赞赏！

谢谢，-本

```
require 'tweetstream'

TweetStream.configure do |config|
    config.consumer_key = ####
    config.consumer_secret = ####
    config.oauth_token = ###
    config.oauth_token_secret = ####
    config.auth_method = :oauth
end

TweetStream::Client.new.sample do |status|
    puts "#{status.user.screen_name}: #{status.text}"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:50:45.507

我想通了（在一些帮助下！）。

我刚刚使用了 TweetStream::Client.new.locations('-125.00','25.0','-70.00','50.00', nil) 并且它起作用了！

# javascript - 通过 toDataURL 将画布保存到图像失败

> ID：14917748
> 
> 赞同：1
> 
> 时间：2013-02-17T03:41:55.523
> 
> 标签：javascript, image, html, canvas, base64

我在下面创建了一个测试代码，您可以在 Jsfiddle 上对其进行操作：

[http://jsfiddle.net/Stallman41/57hvX/31/](http://jsfiddle.net/Stallman41/57hvX/31/)
HTML：

```
<canvas id="test_canvas" style="background-color : #FFFF00" ; width="500px"
; height="340px"></canvas>
<br>
<button id="test_put_btn">Put an image</button>
<br>
<button id="save_dataURL">Save to dataURL</button>
<br>
<button id="draw_back">Final step: draw 3 images back.</button>
<br>
<img id="first_img"; width="100px" ; height="100px" ;></img>
<img id="second_img"; width="100px" ; height="100px" ></img>
<img id="third_img"; width="100px" ; height="100px" ;></img> 
```

Javascript：

```
var drawing_plate;
var context;
var dataURL_arr = new Array();
$(document).ready(function () {
drawing_plate = document.getElementById("test_canvas");
context = drawing_plate.getContext('2d');

$("#test_canvas").bind("mousedown", Touch_Start);
$("#test_canvas").bind("mousemove", Touch_Move);
$("#test_canvas").bind("mouseup", Touch_End);

}); //document ready. 

function Touch_Start(event) {
event.preventDefault();
touch = event;
touch_x = touch.pageX;
touch_y = touch.pageY;

line_start_x = touch.pageX - 0;
line_start_y = touch.pageY - 0;

context.beginPath();
context.moveTo(line_start_x, line_start_y);
}

function Touch_Move(event) {
event.preventDefault();
touch = event; //mouse
line_end_x = touch.pageX - 0;
line_end_y = touch.pageY - 0;
context.lineTo(line_end_x, line_end_y);
context.stroke();
}

$("#test_put_btn").click(function () {
var test_img = new Image();
test_img.src = "http://careerscdn.sstatic.net/careers/gethired/img/careers2-      ad-header-so-crop.png";
context.drawImage(test_img, 0, 0);
});

$("#save_dataURL").click(function () {

dataURL_arr.push(drawing_plate.toDataURL("image/png"));
});

$("#draw_back").click(function () {
  var f_image= $("#first_img")[0];
  var s_image= $("#second_img")[0];
  var t_image= $("#third_img")[0];

f_image.onload= function()
{
    f_image.src= dataURL_arr[0];
}
    f_image.src= dataURL_arr[0];

s_image.onload= function()
{
    s_image.src= dataURL_arr[0];
}
    s_image.src= dataURL_arr[0];      

t_image.onload= function()
{
    t_image.src= dataURL_arr[0];
}
     t_image.src= dataURL_arr[0];

}); 
```

我在Android系统上开发了一个绘图板，将绘图保存到一个dataURL字符串中。他们可以在画布上绘制一些东西并将图像放在画布上。而且我需要让用户在小图标上看到他们的绘图。
我`canvas.toDataURL("image/png")`用来保存base64字符串。我选择`<img>`作为小图标容器。但是，我得到的只是图标上可以显示图纸，通常，当我写`img.src= canvas.toDataURL("image/png");`图像时，什么都没有显示！
我调查这个问题很长时间。
1.我认为问题可能是dataURL字符串太长了？
2.操作系统的支持：Android？

此处 Jsfiddle 中的代码显示了我的 Android PhoneGap 开发中的类似过程。
首先，您只需在画布上绘制一些东西，然后按`Press an image`，然后按`Save to dataURL`。但是你应该把这个过程做三遍。在这种情况下，字符串数组包含由图纸和图像生成的 base64 字符串。
最后，您按下`Final step: draw 3 images back.`，图像图标上不会显示任何内容。
**总结：**
根据我的经验，正如我所写`img.src= canvas.toDataURL("image/png");`（无论 img 是 dom 元素还是`var img = new Image();`）。它并不总是有效：**有时它有效……但有时不……**（我在 Android 4.0.1 上工作，phonegap 1.7.0）

**其次**，特别是如果我将大量 base64 字符串存储到一个数组中，并将它们分配给大量图像 DOM 元素，它肯定会失败。
**第三**，如果用户只在画布上画一些东西，它总是可以工作的。（除了Jsfiddle中的示例代码，但它适用于我的Android系统......）但是如果他绘制图像`context.drawImage(~)`，图像不会显示图。
太多的困惑......
**我需要让用户可以在小图标中查看他们的图纸，还有其他选择吗？**

一些参考资料：

[1](https://stackoverflow.com/questions/6169032/copying-canvas-via-todataurl-after-draw-operation-does-not-work)
[2](https://stackoverflow.com/questions/4776670/should-setting-an-image-src-to-data-url-be-available-immediately)
[3](https://stackoverflow.com/questions/7783582/get-size-of-todataurl-image-before-upload)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:43:44.243

我只是偶然发现了这个问题。

单击`Put an image`，然后单击`Save to dataURL`，然后检查您的 JavaScript 控制台是否有类似的内容：

```
 SecurityError: DOM Exception 18 
```

这是一个浏览器安全功能。因为您插入了来自不同域的图像，所以它被视为跨域请求。

如果您[消除了安全错误](http://jsfiddle.net/c24w/57hvX/36/)，您可以将画布导出到数据 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T09:17:48.097

您的代码中的另一件事。

您尝试在您的 test_put_btn onclick 事件处理程序中绘制到画布上的图像，您的图像将永远不会显示（或者它有时会意外工作），因为您无需等待图像加载到画布上。

您必须处理图像的“onload”事件并将其绘制到处理程序中以允许绘制图像。

在你的 test_img.src 语句之前，你必须把：

```
test_img.onload = function() 
{
   context.drawImage(test_img, 0, 0);
}; 
```

另外，您尝试访问的图像无法访问-->[对我来说它不起作用](http://careerscdn.sstatic.net/careers/gethired/img/careers2-ad-header-so-crop.png)

# pdf - 如何实现pdf.js在pdf查看器中查看pdf文件？

> ID：14917749
> 
> 赞同：0
> 
> 时间：2013-02-17T03:41:58.860
> 
> 标签：pdf, pdf.js

我想在 pdf.js 查看器的新页面中打开链接到文档中的 pdf 文件。

我已经从 github 下载了 zip 文件：

[https://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)

并转到示例文件夹中的两个 index.html 文件。

打开这些文件中的任何一个时，我都会得到空白页。

谁能告诉我如何实现 pdf.js 以便我可以在 pdf 查看器的新页面中打开 pdf 文档？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T00:33:09.383

尝试在带有 viewer.html 的查询字符串中使用 '?file=url'。
例如：www.example.com/pdf-js/web/viewer.html?File="URL"

来源：[github上的pdf-js](https://github.com/mozilla/pdf.js/issues/2496#issuecomment-11597900)

是的，正如@Silent 所提到的，如果不使用任何网络服务器，你肯定会遇到跨域问题。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:37:06.400

让我猜你试图通过 chrome 直接打开示例。您的网址可能以 file:/// 开头。这会导致您的浏览器出现跨源请求错误。要正确查看示例，您需要一个 LAMP 堆栈。

# knockout.js - KnockoutJS 可见不适合我

> ID：14917755
> 
> 赞同：4
> 
> 时间：2013-02-17T03:43:17.393
> 
> 标签：knockout.js

下面是一些表格代码。我不希望该行显示数据项的 Id 是否为 0。我尝试这样编写它：

> 数据绑定=“可见：$data.Id > 0”

但这行不通。也没有将 0 放在引号中。我也试过：

数据绑定 =“可见：$index > 0”

但这会使所有行消失！我确定这是一个简单的语法问题，但我没有看到它......

```
 <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>URL</th>
                <th>Disabled</th>
                <th>Parent</th>
                <th></th>
            </tr>
        </thead>
        <tbody data-bind="foreach: menuItemModels">

            <tr  data-bind="visible: $data.Id > 0">

                <td>
                    <input type="text" class="input-block-level" data-bind="value: $data.Name" /></td>
                <td>
                    <input type="text" class="input-block-level" data-bind="value: $data.Url" /></td>
                <td style="text-align: center;">
                    <input type="checkbox" data-bind="value: $data.Disabled" /></td>
                <td>                      
                    <select data-bind="options: $root.menuItemModels, optionsValue: 'Id', optionsText: 'Name', value: ParentId"></select>
                </td>
                <td>
                    <button class="btn btn-primary" type="submit"data-bind="click: $root.update">Update</button>
                    <button class="btn btn-primary" type="submit" data-bind="click: $root.remove">Delete</button>
                </td>
            </tr>
        </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T04:23:54.393

当您在表达式中访问 observable 的值时，您需要将其作为函数调用。

如果`Id`是可观察的，那么您需要将其称为`$data.Id() > 0`.

`visible`绑定确实对值是否为真/假起作用，所以你真的可以把它减少到`visible: Id`. 当您将一个简单的 observable 传递给绑定（不在表达式中）时，Knockout 会为您解开它（将其作为函数调用）。

`$index`也是一个可观察的，所以它的想法是一样的：`visible: $index`

# javascript - 删除（取消链接）匹配正则表达式的文件

> ID：14917757
> 
> 赞同：35
> 
> 时间：2013-02-17T03:43:23.357
> 
> 标签：javascript, node.js, file-io, filesystems

我想从一个目录中删除几个文件，匹配一个正则表达式。像这样的东西：

```
// WARNING: not real code
require('fs').unlink(/script\.\d+\.js$/); 
```

* * *

由于`unlink`不支持正则表达式，我使用它来代替：

```
var fs = require('fs');

fs.readdir('.', (error, files) => {
    if (error) throw error;

    files.filter(name => /script\.\d+\.js$/.test(name)).forEach(fs.unlink);
}); 
```

这可行，但 IMO 比它应该的要复杂一些。

* * *

有没有更好的内置方法来删除与正则表达式匹配的文件（甚至只使用通配符）？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2019-02-19T00:47:56.643

不，Node 库中没有通配符。如果你不想从 NPM 中提取一些东西，那么不用担心，它只需要一行代码。但是在我的测试中，其他答案中提供的代码大多不起作用。所以这是我的代码片段，经过测试，可以正常工作，纯原生 Node 和 JS。

```
let fs = require('fs')
const path = './somedirectory/'
let regex = /[.]txt$/
fs.readdirSync(path)
    .filter(f => regex.test(f))
    .map(f => fs.unlinkSync(path + f)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-17T14:30:28.063

您可以查看 glob [https://npmjs.org/package/glob](https://npmjs.org/package/glob)

```
require("glob").glob("*.txt", function (er, files) { ... });
//or
files = require("glob").globSync("*.txt"); 
```

glob 在内部使用 minimatch。它通过将 glob 表达式转换为 JavaScript RegExp 对象来工作。[https://github.com/isaacs/minimatch](https://github.com/isaacs/minimatch)

您可以对回调中的匹配文件执行任何操作（或者在 globSync 返回的对象的情况下）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-10T14:54:33.187

我有一个非常简单的解决方案来做到这一点。使用 fs.readdir API 读取 node.js 中的目录。这将给出目录中所有文件的数组。拥有该数组后，使用 for 循环对其进行迭代，应用正则表达式。下面的代码将删除所有以“en”和扩展名“.js”开头的文件

```
fs.readdir('.', (err, files)=>{
   for (var i = 0, len = files.length; i < len; i++) {
      var match = files[i].match(/en.*.js/);
      if(match !== null)
          fs.unlink(match[0]);
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T21:10:45.753

答案可能取决于您的环境。看起来您正在 node.js 上运行。快速阅读 node.js 文档表明没有“内置”方法可以执行此操作，即没有一个函数调用可以为您执行此操作。下一个最好的事情可能涉及少量的函数调用。正如我在评论中所写，我认为仅依靠标准的 node.js 函数调用，没有任何简单的方法可以使您的建议答案更简洁。也就是说，如果我站在你的立场上，我会采用你已经建议的解决方案（尽管稍微清理了一下）。

一种替代方法是转到外壳，例如，

```
var exec = require('child_process').exec;
exec('ls | grep "script[[:digit:]]\\\+.js" | xargs rm'); 
```

就个人而言，我更喜欢你提供的解决方案而不是这个 gobbledygook，但也许你正在寻找不同的东西。

# python - Heroku 应用有 0 个 Dynos

> ID：14917763
> 
> 赞同：2
> 
> 时间：2013-02-17T03:44:45.003
> 
> 标签：python, heroku, flask

我的 Heroku 应用有 0 个测功机。

我尝试添加一个，但它不起作用。

```
heroku ps:scale web=1 
```

你如何添加测功机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:47:46.527

如果您登录 heroku.com 并使用如下所示的滑块，则可以转到 Web 界面。

![在此处输入图像描述](../Images/d0fa3d049c5575245c62cedd178d1072.png)

您还需要一个有效`Procfile`的扩展才能工作。

# jquery - Rails 3 JQuery 移动表单提交

> ID：14917765
> 
> 赞同：0
> 
> 时间：2013-02-17T03:45:09.690
> 
> 标签：jquery, ruby-on-rails, jquery-mobile

我正在尝试使用 jquery mobile 创建我的 rails 应用程序的移动版本。我在 js 文件中包含以下内容：

```
 $(document).on("mobileinit", function(){
$.extend(  $.mobile , {
    ajaxEnabled: false
});
}); 
```

我遇到的问题是，如果我尝试登录（使用设计），我将被重定向到会话的创建视图。

如果我在未输入任何信息的情况下单击登录，则似乎只是将带有错误的文本呈现到屏幕上。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:43:55.353

我在这里找到了答案：

[https://github.com/plataformatec/devise/wiki/How-To:-Make-Devise-work-with-other-formats-like-mobile,-iphone-and-ipad-%28Rails-specific%29](https://github.com/plataformatec/devise/wiki/How-To:-Make-Devise-work-with-other-formats-like-mobile,-iphone-and-ipad-%28Rails-specific%29)

最后归结为以下几点：

设计初始化器

config.navigational_formats = [:html, :mobile]

动作控制器初始化器：

ActionController::Responder.class_eval 做别名 :to_mobile :to_html end

查询：

$(document).on("mobileinit", function(){ $.extend( $.mobile , { ajaxEnabled: false, }); });

# qt - Qt 调用另一个 UI

> ID：14917766
> 
> 赞同：0
> 
> 时间：2013-02-17T03:45:15.490
> 
> 标签：qt, visual-studio-2008, qt-designer, qmainwindow

我在我的项目中使用 Qt Designer 创建了 2 个 *.ui，其中一个是主屏幕，另一个是对话框小部件。对话框小部件由主屏幕中的功能之一调用。

如何连接主窗口中的函数来调用对话框小部件？

例如，如果我在主窗口的菜单中单击 [关于 > 作者]，我应该能够调用对话框小部件。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:00:54.580

这取决于您保存对话框指针的位置。例如，您可以在主窗口上创建一些信号并将其与对话框 show() 插槽（或 exec() 如果您需要它是模态的）连接。或者，如果您将对话框指针保留在主窗口中，那么您可以直接将其与 show/exec 方法一起使用。

至于 About->Author 菜单：为此，您应该创建 QAction 并将其添加到菜单中。并且 QAction 有 trigger() 信号，您可以将其连接到对话框的 exec/show 插槽。

# javascript - 为什么Javascript“类”实现会用同名的函数声明覆盖类名？

> ID：14917768
> 
> 赞同：0
> 
> 时间：2013-02-17T03:45:57.033
> 
> 标签：javascript, coffeescript, closures, iife

我正在研究 Coffeescript 的输出，试图深入了解幕后发生的事情。当我声明一个新类 Person 时，会创建一个名为 Person 的变量，其中包含一个 IIFE。

```
var Person;

Person = (function() {
  function Person() {
    this.doThing();
  }

  Person.prototype.doThing = function() {};

  return Person;

})(); 
```

让我感到困惑的是，IIFE 本身包含一个名为 Person 的命名函数声明。这会覆盖原始的 Person 变量，还是 Javascript 认为这是一个新的范围？当 doThing 添加到 Person 的原型时，具体指的是哪个对象？

也许我的问题暴露了更深层次的困惑:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T03:53:31.093

IIFE 作为一个函数，创建了一个新的作用域，以便`'class'`很好地隐藏所有逻辑。`Person`IIFE的内部被返回并分配给`Person`它的外部，但是如果 IIFE 返回了其他东西，那么这就是外部的`Person`。

`doThing`被赋值给了原型`Person`里面，但是又既然`Person`被返回了，那就是在IIFE里面引用的同一个函数对象。

# asp.net - 为什么@Html.Action 在块内时不显示其 Html？

> ID：14917769
> 
> 赞同：0
> 
> 时间：2013-02-17T03:45:59.810
> 
> 标签：asp.net, html, razor, asp.net-mvc-4, html-helper

我花了两个小时才意识到，如果我将 Action 放在块内，它不会显示部分视图。

```
<div>
    @if (ViewBag.Tab == "summary")
    {
        Html.Action("Summary");
    }
    else { ... } 
</div> 
```

但是，如果我执行以下操作，它会起作用，但如果不是我想要的：

```
<div>
    @if (ViewBag.Tab == "summary")
    {   <div>
        Html.Action("Summary");
        </div>
    }
    else { ... } 
</div> 
```

有没有办法使用第一个选项显示部分视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T03:55:26.227

你的两个例子都不能正常工作。`Html.Action`返回一个`MvcHtmlString`. 您需要为其添加前缀`@`：

```
@if (ViewBag.Tab == "summary")
{
    @Html.Action("Summary"); // prefix with @ works fine.
} 
```

# ios - 从横向或纵向 UIImage 中找到最大的中心正方形并将其缩放到一个大小

> ID：14917770
> 
> 赞同：3
> 
> 时间：2013-02-17T03:46:17.660
> 
> 标签：ios, uiimage, crop

我需要从缩放到一定尺寸的纵向或横向图像中找到最大的中心正方形。例如，如果我得到一个尺寸为 1200x800 的图像，我需要将居中的正方形缩小到 300x300 的尺寸。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-17T20:35:46.120

我在 stackoverflow 上找到了这个问题的答案，该答案已被广泛复制。但是这个答案是不正确的，所以想发布正确的答案，如下所示：

```
+ (UIImage*) cropBiggestCenteredSquareImageFromImage:(UIImage*)image withSide:(CGFloat)side
{
  // Get size of current image
  CGSize size = [image size];
  if( size.width == size.height && size.width == side){
    return image;
  }

  CGSize newSize = CGSizeMake(side, side);
  double ratio;
  double delta;
  CGPoint offset;

  //make a new square size, that is the resized imaged width
  CGSize sz = CGSizeMake(newSize.width, newSize.width);

  //figure out if the picture is landscape or portrait, then
  //calculate scale factor and offset
  if (image.size.width > image.size.height) {
    ratio = newSize.height / image.size.height;
    delta = ratio*(image.size.width - image.size.height);
    offset = CGPointMake(delta/2, 0);
  } else {
    ratio = newSize.width / image.size.width;
    delta = ratio*(image.size.height - image.size.width);
    offset = CGPointMake(0, delta/2);
  }

  //make the final clipping rect based on the calculated values
  CGRect clipRect = CGRectMake(-offset.x, -offset.y,
                               (ratio * image.size.width),
                               (ratio * image.size.height));

  //start a new context, with scale factor 0.0 so retina displays get
  //high quality image
  if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
    UIGraphicsBeginImageContextWithOptions(sz, YES, 0.0);
  } else {
    UIGraphicsBeginImageContext(sz);
  }
  UIRectClip(clipRect);
  [image drawInRect:clipRect];
  UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  return newImage;
} 
```

我之前发现的错误答案如下：

```
+ (UIImage*) cropBiggestCenteredSquareImageFromImage:(UIImage*)image withSide:(CGFloat)side
{
  // Get size of current image
  CGSize size = [image size];
  if( size.width == size.height && size.width == side){
    return image;
  }

  CGSize newSize = CGSizeMake(side, side);
  double ratio;
  double delta;
  CGPoint offset;

  //make a new square size, that is the resized imaged width
  CGSize sz = CGSizeMake(newSize.width, newSize.width);

  //figure out if the picture is landscape or portrait, then
  //calculate scale factor and offset
  if (image.size.width > image.size.height) {
    ratio = newSize.width / image.size.width;
    delta = (ratio*image.size.width - ratio*image.size.height);
    offset = CGPointMake(delta/2, 0);
  } else {
    ratio = newSize.width / image.size.height;
    delta = (ratio*image.size.height - ratio*image.size.width);
    offset = CGPointMake(0, delta/2);
  }

  //make the final clipping rect based on the calculated values
  CGRect clipRect = CGRectMake(-offset.x, -offset.y,
                               (ratio * image.size.width) + delta,
                               (ratio * image.size.height) + delta);

  //start a new context, with scale factor 0.0 so retina displays get
  //high quality image
  if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
    UIGraphicsBeginImageContextWithOptions(sz, YES, 0.0);
  } else {
    UIGraphicsBeginImageContext(sz);
  }
  UIRectClip(clipRect);
  [image drawInRect:clipRect];
  UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  return newImage;
} 
```

这段代码的问题是它没有正确裁剪。

两种代码都可以在以下图片上试用： [https ://s3.amazonaws.com/anandprakash/ImageWithPixelGrid.jpg](https://s3.amazonaws.com/anandprakash/ImageWithPixelGrid.jpg)

正确的算法在上述基本网址上生成以下图像： [https ://s3.amazonaws.com/anandprakash/ScreenshotCorrectAlgo.png](https://s3.amazonaws.com/anandprakash/ScreenshotCorrectAlgo.png)

错误的算法在上面的基本 url 上生成以下图像 - 注意每边宽度上的额外 50px。 [https://s3.amazonaws.com/anandprakash/ScreenshotWrongAlgo.png](https://s3.amazonaws.com/anandprakash/ScreenshotWrongAlgo.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T04:19:36.123

上面的答案与 UIImage 上的 Swift 扩展相同：

```
private extension UIImage {
    func cropBiggestCenteredSquareImage(withSide side: CGFloat) -> UIImage {
        if self.size.height == side && self.size.width == side {
            return self
        }
        let newSize = CGSizeMake(side, side)
        let ratio: CGFloat
        let delta: CGFloat
        let offset: CGPoint
        if self.size.width > self.size.height {
            ratio = newSize.height / self.size.height
            delta = ratio * (self.size.width - self.size.height)
            offset = CGPointMake(delta / 2, 0)
        }
        else {
            ratio = newSize.width / self.size.width
            delta = ratio * (self.size.height - self.size.width)
            offset = CGPointMake(0, delta / 2)
        }
        let clipRect = CGRectMake(-offset.x, -offset.y, ratio * self.size.width, ratio * self.size.height)
        if UIScreen.mainScreen().respondsToSelector(#selector(NSDecimalNumberBehaviors.scale)) {
            UIGraphicsBeginImageContextWithOptions(newSize, true, 0.0)
        } else {
            UIGraphicsBeginImageContext(newSize);
        }
        UIRectClip(clipRect)
        self.drawInRect(clipRect)
        let newImage = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
        return newImage
    }
} 
```

# performance - CPU负载分布不均

> ID：14917774
> 
> 赞同：0
> 
> 时间：2013-02-17T03:46:52.090
> 
> 标签：performance, hardware, cpu-usage

我有一个 CPU 负载不均匀的系统，模式很奇怪。它提供 apache、弹性搜索、redis 和电子邮件。

这是`mpstat`输出。注意最后 12 个内核的 %usr 远低于前 12 个内核。

```
# mpstat -P ALL
Linux 3.5.0-17-generic (<server1>)    02/16/2013      _x86_64_        (24 CPU)

10:21:46 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle
10:21:46 PM  all   17.15    0.00    2.20    0.33    0.00    0.09    0.00    0.00   80.23
10:21:46 PM    0   27.34    0.00    4.08    0.56    0.00    0.53    0.00    0.00   67.48
10:21:46 PM    1   24.51    0.00    3.25    0.53    0.00    0.34    0.00    0.00   71.38
10:21:46 PM    2   26.69    0.00    4.20    0.50    0.00    0.24    0.00    0.00   68.36
10:21:46 PM    3   24.38    0.00    3.04    0.70    0.00    0.23    0.00    0.00   71.65
10:21:46 PM    4   24.50    0.00    4.04    0.57    0.00    0.15    0.00    0.00   70.74
10:21:46 PM    5   21.75    0.00    2.80    0.74    0.00    0.15    0.00    0.00   74.55
10:21:46 PM    6   28.30    0.00    3.75    0.84    0.00    0.04    0.00    0.00   67.07
10:21:46 PM    7   30.20    0.00    3.94    0.16    0.00    0.03    0.00    0.00   65.67
10:21:46 PM    8   30.55    0.00    4.09    0.12    0.00    0.03    0.00    0.00   65.21
10:21:46 PM    9   32.66    0.00    3.40    0.09    0.00    0.03    0.00    0.00   63.81
10:21:46 PM   10   32.20    0.00    3.57    0.08    0.00    0.03    0.00    0.00   64.12
10:21:46 PM   11   32.08    0.00    3.92    0.08    0.00    0.03    0.00    0.00   63.88
10:21:46 PM   12    4.53    0.00    0.41    0.34    0.00    0.04    0.00    0.00   94.68
10:21:46 PM   13    9.14    0.00    1.42    0.32    0.00    0.04    0.00    0.00   89.08
10:21:46 PM   14    5.92    0.00    0.70    0.35    0.00    0.06    0.00    0.00   92.97
10:21:46 PM   15    6.14    0.00    0.66    0.35    0.00    0.04    0.00    0.00   92.81
10:21:46 PM   16    7.39    0.00    0.65    0.34    0.00    0.04    0.00    0.00   91.57
10:21:46 PM   17    6.60    0.00    0.83    0.39    0.00    0.05    0.00    0.00   92.13
10:21:46 PM   18    5.49    0.00    0.54    0.30    0.00    0.01    0.00    0.00   93.65
10:21:46 PM   19    6.78    0.00    0.88    0.21    0.00    0.01    0.00    0.00   92.12
10:21:46 PM   20    6.17    0.00    0.58    0.11    0.00    0.01    0.00    0.00   93.13
10:21:46 PM   21    5.78    0.00    0.82    0.10    0.00    0.01    0.00    0.00   93.29
10:21:46 PM   22    6.29    0.00    0.60    0.10    0.00    0.01    0.00    0.00   93.00
10:21:46 PM   23    6.18    0.00    0.61    0.10    0.00    0.01    0.00    0.00   93.10 
```

我有另一个系统，一个运行 MySQL 的数据库服务器，它显示了一个均匀的分布。

```
# mpstat -P ALL
Linux 3.5.0-17-generic (<server2>)    02/16/2013      _x86_64_        (32 CPU)

10:27:57 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle
10:27:57 PM  all    0.77    0.00    0.07    0.68    0.00    0.00    0.00    0.00   98.47
10:27:57 PM    0    2.31    0.00    0.19    1.86    0.00    0.01    0.00    0.00   95.63
10:27:57 PM    1    1.73    0.00    0.17    1.87    0.00    0.01    0.00    0.00   96.21
10:27:57 PM    2    2.62    0.00    0.25    2.51    0.00    0.01    0.00    0.00   94.62
10:27:57 PM    3    1.60    0.00    0.17    1.99    0.00    0.01    0.00    0.00   96.23
10:27:57 PM    4    1.86    0.00    0.16    1.84    0.00    0.01    0.00    0.00   96.13
10:27:57 PM    5    2.30    0.00    0.25    2.45    0.00    0.01    0.00    0.00   94.99
10:27:57 PM    6    2.05    0.00    0.20    1.89    0.00    0.01    0.00    0.00   95.86
10:27:57 PM    7    2.13    0.00    0.20    2.31    0.00    0.01    0.00    0.00   95.36
10:27:57 PM    8    0.82    0.00    0.11    4.05    0.00    0.03    0.00    0.00   94.99
10:27:57 PM    9    0.70    0.00    0.18    0.06    0.00    0.00    0.00    0.00   99.06
10:27:57 PM   10    0.18    0.00    0.04    0.01    0.00    0.00    0.00    0.00   99.77
10:27:57 PM   11    0.20    0.00    0.01    0.01    0.00    0.00    0.00    0.00   99.78
10:27:57 PM   12    0.13    0.00    0.01    0.01    0.00    0.00    0.00    0.00   99.86
10:27:57 PM   13    0.04    0.00    0.01    0.00    0.00    0.00    0.00    0.00   99.95
10:27:57 PM   14    0.03    0.00    0.01    0.00    0.00    0.00    0.00    0.00   99.97
10:27:57 PM   15    0.03    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.97
10:27:57 PM   16    0.05    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.94
10:27:57 PM   17    0.41    0.00    0.10    0.04    0.00    0.00    0.00    0.00   99.45
10:27:57 PM   18    2.78    0.00    0.06    0.14    0.00    0.00    0.00    0.00   97.01
10:27:57 PM   19    1.19    0.00    0.08    0.19    0.00    0.00    0.00    0.00   98.53
10:27:57 PM   20    0.48    0.00    0.04    0.30    0.00    0.00    0.00    0.00   99.17
10:27:57 PM   21    0.70    0.00    0.03    0.16    0.00    0.00    0.00    0.00   99.11
10:27:57 PM   22    0.08    0.00    0.01    0.02    0.00    0.00    0.00    0.00   99.90
10:27:57 PM   23    0.30    0.00    0.02    0.06    0.00    0.00    0.00    0.00   99.62
10:27:57 PM   24    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
10:27:57 PM   25    0.04    0.00    0.03    0.00    0.00    0.00    0.00    0.00   99.94
10:27:57 PM   26    0.06    0.00    0.01    0.00    0.00    0.00    0.00    0.00   99.93
10:27:57 PM   27    0.01    0.00    0.01    0.00    0.00    0.00    0.00    0.00   99.98
10:27:57 PM   28    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.99
10:27:57 PM   29    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
10:27:57 PM   30    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
10:27:57 PM   31    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.99 
```

两者都是运行 Ubuntu 12.10（非虚拟）的专用系统。

我已经考虑并阅读了有关设置 nice、taskset 或尝试调整调度程序的信息，但我不想做出任何轻率的决定。此外，这个系统本身并没有表现“糟糕”，我只是想确保所有核心都被正确利用。

让我知道我是否可以提供更多信息。非常感谢任何关于“server1”上的 CPU 负载的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T03:51:19.250

在某些内核达到 100% 而其他内核没有达到 100% 之前，这不是问题（即在您向我们展示的统计数据中，没有任何迹象表明分布不均匀会对性能产生负面影响）。在您的情况下，您可能有相当多的进程均匀分布，导致每个内核的基本负载为 6-10%，然后再增加约 12 个线程，*每个*线程需要 10-20% 的内核。您不能在内核之间拆分单个进程/线程。

# python - raw_input 函数中的逗号

> ID：14917780
> 
> 赞同：0
> 
> 时间：2013-02-17T03:47:48.790
> 
> 标签：python

这会是什么输出？我看到了输出，但无法理解为什么会发生这种情况。

```
def multiple(x,y):  
    mul = x*y  
    return mul  

x=int(raw_input("Enter value 1 ")),  
y=int(raw_input("Enter value 2 "))  
print multiple(x,y) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T03:50:31.327

在您的代码中，第一种方式`,`末尾的实际上是包含用户输入的 a。当您调用该函数时，您实际上所做的是将元组乘以一个整数，这只是将元组 ( )乘以。`raw_input``x``tuple``x``y`

例如：

```
>>> x = 2,
>>> x * 5
(2, 2, 2, 2, 2)
>>> x = 2
>>> x * 5
10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T03:50:04.887

逗号`x`等于大小为 1 的元组（包含 int）。

简单测试：

```
>>> a = 1,
>>> print a
(1,) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T03:59:09.570

一个很大的错误是，如果 x 和 y 不是数字（也就是字符串），那么函数就会被搞砸。这可以通过说来解决： `try: mul = float(x) * float(y)` 那么，要捕获 x 或 y 不是数字的情况， `except TypeError: print('Please do not give a string...')` 在这种情况下，你想证明 mul 无效，所以你说， `mul = None` 现在你可以`return mul`符合 try 和 except 语句.

这可确保输入是小数点数字，而不是字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T03:49:50.940

首先，您定义一个名为的函数，它将和（的参数）`multiple`相乘，然后返回该值。然后它接受两个不同变量的输入，并且（与上面的参数不同），相乘（通过调用），然后将它们输出，这就是您所看到的输出。`x``y``multiple``x``y``multiple``print`

然而，逗号只是简单地定义`x`为一个元组。

# javascript - 删除动态生成的 点击

> ID：14917782
> 
> 赞同：3
> 
> 时间：2013-02-17T03:48:01.810
> 
> 标签：javascript, jquery, event-delegation

我正在尝试`<div>`单击它。当我尝试使用它时，`.live()`它告诉我：

> 对象没有方法 live()

我使用的是 jQuery 版本 1.9，因此`live`已被删除。

```
$(document).ready(function(){
    $('#addhelper').click(function(){
        $('div#containerr').append('<div class ="helpcont"><input type="text" name="helper_caption[]" class="input-large" placeholder="Caption">'+
      '<input type="text" name="helper_url" class="input-large" placeholder="Url">'+
      '<input type="text" name = "helper_source" class="input-large" placeholder="Source"><button class = "remove" type="button">remove</button></div>');
    });

    $("button.remove").on({
        click: function(){
            $(this).remove('div.helpcont');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T03:50:03.940

```
$("#containerr").on('click', '.remove', function(){
  $(this).closest('.helpcont').remove();
}); 
```

`#containerr`**=不是**动态添加的最近的父级

`click` = 事件（您可以通过用空格分隔多个事件来添加多个事件）

`.remove` = 触发事件的选择器

* * *

PS：使用选择器`#id`代替`element#id`. 无论如何，ID 都应该是唯一的，因此无需采用缓慢的方式，让 jQuery 检索所有 DIV 元素，然后搜索具有给定 ID 的元素。

# codeigniter - CodeIgniter 更新页面 - 需要简单的 CRUD 网站帮助

> ID：14917785
> 
> 赞同：0
> 
> 时间：2013-02-17T03:48:45.653
> 
> 标签：codeigniter

在浏览了论坛并开始尝试创建一个基本的 CRUD 网站后，我目前正在努力拥有一个更新文章如下的页面。如果有人能告诉我哪里出错了，我将非常感激。我在“新闻/输入”处收到 404 错误

模型（在 news_model.php）

```
public function update($id, $data)
 {
   $this->db->where('id', $id);
   $this->db->update('news', $data); 
 } 
```

控制器（news.php）

```
public function update($id){

    $data = array(
    'title' => $this->input->post('title'),
    'slug' => $this->input->post('slug'),
    'text' => $this->input->post('text'));

 if($this->news_model->exists($id)) {
  $this->news_model->update($id, $data);
} 
   else {
     $this->news_model->insert($data);
  }
} 
```

html (views/news/input.php)

```
 <h2>Update a news item</h2>

   <?php echo validation_errors(); ?>

   <?php echo form_open('news/update') ?>

   <label for="title">Title</label> 
   <input type="input" name="title" /><br />

   <label for="slug">Slug</label> 
   <input type="input" name="slug" /><br />

   <label for="text">Text</label>
   <textarea name="text"></textarea><br />

   <input type="submit" name="submit" value="Update an item" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:48:59.140

你得到一个 404 因为你的新闻控制器似乎没有方法“输入”。尝试添加如下内容：

```
public function input(){
   // load the form 
   $this->load->view('/news/input');
} 
```

请注意，要更新数据，您需要先获取并将其传递到视图中，然后使用 set_val() 和其他 CI 函数呈现（填写的）表单。
目前，您正在“硬编码” HTML 表单，这使得填充和维护状态（当验证失败时）变得困难。我建议你通过 CI 网站上的表单教程来玩。

编辑：

创建更新/插入（upsert）控制器更改如下：

控制器：

```
 function upsert($id = false){

          $data['id'] = $id;    // create a data array so that you can pass the ID into the view.

                 // you need to differntiate the bevaviour depending on 1st load (insert) or re-load (update):

           if(isset($_POST('title'))){  // or any other means by which you can determine if data's been posted. I generally look for the value of my submit buttons

                if($id){
                     $this->news_model->update($id,  $this->input->post()); // there's post data AND an id -> it's an update        
                } else {
                     $this->news_model->insert($id,  $this->input->post()); // there's post data but NO id -> it's an insert        
                }

            } else { // nothing's been posted -> it's an initial load. If the id is set, it's an update, so we need data to populate the form, if not it's an insert and we can pass an empty array (or an array of default values) 

                if($id){
                     $data['news'] = $this->news_model->getOne($id); // this should return an array of the news item. You need to iterate through this array in the view and create the appropriate, populated HTML input fields.       
                } else {
                     $data['news'] = $this->news_model->getDefaults(); // ( or just array();)  no id -> it's an insert 
                }

            }

            $this->load->view('/news/input',$data);
    } 
```

并在您的视图中将 $id 修改为 action-url：

```
 <?php echo form_open('news/upsert/'.$id) ?> 
```

# bash - 将变量与 grep 一起使用，以及关于此的 IF 语句

> ID：14917796
> 
> 赞同：1
> 
> 时间：2013-02-17T03:50:31.483
> 
> 标签：bash, variables, grep

我正在寻找使用变量在文件中搜索字符串。

我有一个可以接受 3 或 4 个参数的脚本：需要 3 个；第四个不是强制性的。

我想在文本文件中搜索在同一行中匹配的 3 个参数，如果它们匹配，那么我想删除该行并用我的新行替换它 - 基本上它会更新第 4 个参数（如果设置），并避免重复条目。

目前这就是我所拥有的：

```
input=$(egrep -e '$domain\s+$type\s+$item' ~/etc/security/limits.conf)

if [ "$input" == "" ]; then

    echo $domain $type $item $value >>~/etc/security/limits.conf

    echo \"$domain\" \"$type\" \"$item\" \"$value\" has been successfully added to your limits.conf file.

else
    cat ~/etc/security/limits.conf | egrep -v "$domain|$type|$item" >~/etc/security/limits.conf1
    rm -rf ~/etc/security/limits.conf
    mv ~/etc/security/limits.conf1 ~/etc/security/limits.conf

    echo $domain    $type    $item   $value >>~/etc/security/limits.conf

    echo \"$domain\" \"$type\" \"$item\" \"$value\" has been successfully added to your limits.conf file.
    exit 0
fi 
```

现在我已经知道`input=egrep`etc.. 不起作用；如果我对某些值进行硬编码，它会起作用，但它不会接受这些变量。基本上我有`domain=$1`，`type=$2`等等。

我想要这样，如果所有 3 个变量在一行中都不匹配*，*那么它只会将参数附加到文件的末尾，*但*如果参数匹配，那么我希望它们被删除，并附加到文件。我知道我可以使用 sed 和 awk 等其他东西，但我还没有学习它们。

这是一个学校作业，非常感谢所有帮助，但我也想了解它为什么以及如何工作/不工作，所以如果你也能提供答案，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:19:58.240

三件事：

*   要分配命令的输出，请使用 var=$(cmd)。
*   不要在作业中的 = 周围放置空格。
*   表达式不在单引号中展开：使用双引号。

总结一下：

```
input=$(egrep -e "$domain\s+$type\s+$item" ~/etc/security/limits.conf) 
```

另请注意， ~ 是您的主目录，所以如果您的意思是`/etc/security/limits.conf`而不是`/home/youruser/etc/security/limits.conf`，请不要使用 ~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:25:24.280

这一行：

 ~~~~```
input=$(egrep -e '$domain\s+$type\s+$item' ~/etc/security/limits.conf) 
```~~  ~~需要在正则表达式周围加上双引号，以允许 shell 插入变量值。

```
input=$(egrep -e "$domain\s+$type\s+$item" ~/etc/security/limits.conf) 
```

您需要小心使用反斜杠；在这种情况下，您可能不必将它们加倍，但您应该确定自己知道原因。

您应该知道，您的第一个命令在选择的内容上比用于从文件中删除数据`egrep`的第二个命令要严格得多。`egrep`第一个需要在单行中包含三个字段的条目；第二个只需要与任何一个单词匹配（并且可能是更大单词的一部分）来删除该行。

由于`~/etc/security/limits.conf`是文件，所以不需要使用;`-r`选项`rm`。`-r`除非您打算删除目录，否则建议不要使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T11:57:47.323

您的脚本中有几个错误。这是您的脚本，添加了一些评论

```
input=$(egrep -e '$domain\s+$type\s+$item' ~/etc/security/limits.conf)
     # use " not ' in the string above or the shell can't expand your variables.
     # some versions of egrep won't understand '\s'. The safer, POSIX character class is [[:blank:]].

if [ "$input" == "" ]; then
     # the shell equality test operator is =, not ==. Some shells will also take == but don't count on it.
     # the normal way to check for a variable being empty in shell is with `-z`
     # you can have problems with tests in some shells if $input is empty, in which case you'd use [ "X$input" = "X" ].

    echo $domain $type $item $value >>~/etc/security/limits.conf
    # echo is unsafe and non-portable, you should use printf instead.
    # the above calls echo with 4 args, one for each variable - you probably don't want that and should have double-quoted the whole thing.
    # always double-quote your shell variables to avoid word splitting ad file name expansion (google those - you don't want them happening here!)

    echo \"$domain\" \"$type\" \"$item\" \"$value\" has been successfully added to your limits.conf file.
    # the correct form would be:
    # printf '"%s" "%s" "%s" "%s" has been successfully added to your limits.conf file.\n' "$domain" "$type" "$item" "$value"

else
    cat ~/etc/security/limits.conf | egrep -v "$domain|$type|$item" >~/etc/security/limits.conf1
    # Useless Use Of Cat (UUOC - google it). [e]grep can open files just as easily as cat can.

    rm -rf ~/etc/security/limits.conf
    # -r is for recursively removing files in a directory - inappropriate and misleading when used on a single file.

    mv ~/etc/security/limits.conf1 ~/etc/security/limits.conf
    # pointless to remove the file above when you're overwriting it here anyway

    # If your egrep above failed to create your temp file (e.g. due to memory or permissions issues) then the "mv" above would zap your real file. the correct way to do this is:
    #     egrep regexp file > tmp && mv tmp file
    # i.e. use && to only do the mv if creating the tmp file succeeded.

    echo $domain    $type    $item   $value >>~/etc/security/limits.conf
    # see previous echo comments.

    echo \"$domain\" \"$type\" \"$item\" \"$value\" has been successfully added to your limits.conf file.
    # ditto

    exit 0
    # pointless and misleading having an explicit "exit <success>" when that's what the script will do by default anyway.

fi 
```~~~~

# c# - 将 C# MD5 哈希复制到 PHP

> ID：14917802
> 
> 赞同：1
> 
> 时间：2013-02-17T03:51:24.163
> 
> 标签：c#, php, md5

我必须将 C# 哈希从下面的代码复制到 PHP 中。我一直在寻找，但到目前为止还没有找到解决方案。

从[这篇关于创建 md5 哈希字符串的文章](http://blog.stevex.net/c-code-snippet-creating-an-md5-hash-string/)：

```
using System;
using System.Text;
using System.Security.Cryptography;

// Create an md5 sum string of this string
static public string GetMd5Sum(string str)
{
    // First we need to convert the string into bytes, which
    // means using a text encoder.
    Encoder enc = System.Text.Encoding.Unicode.GetEncoder();

    // Create a buffer large enough to hold the string
    byte[] unicodeText = new byte[str.Length * 2];
    enc.GetBytes(str.ToCharArray(), 0, str.Length, unicodeText, 0, true);

    // Now that we have a byte array we can ask the CSP to hash it
    MD5 md5 = new MD5CryptoServiceProvider();
    byte[] result = md5.ComputeHash(unicodeText);

    // Build the final string by converting each byte
    // into hex and appending it to a StringBuilder
    StringBuilder sb = new StringBuilder();
    for (int i=0;i<result.Length;i++)
    {
        sb.Append(result[i].ToString("X2"));
    }

    // And return it
    return sb.ToString();
} 
```

对于输入=“123”，上面的代码给了我“5FA285E1BEBE0A6623E33AFC04A1FBD5”

我尝试了以下 PHP 代码，但它没有给出相同的输出。

从 SO 问题[PHP MD5 not matching C# MD5](https://stackoverflow.com/questions/11638089/php-md5-not-matching-c-sharp-md5)：

```
$str = "123";
$strUtf32 = mb_convert_encoding($str, "UTF-32LE");
echo md5($strUtf32); 
```

此代码的结果为 =“a0d5c8a4d386f15284ec25fe1eeeb426”。顺便说一句，将 UTF-32LE 更改为 utf-8 或 utf-16 仍然不会给我相同的结果。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:40:11.407

是的，正如 CodesInChaos 建议的那样，您的编码错误。

在 php 方面试试这个：

```
$str = "123";
$strUtf32 = mb_convert_encoding($str, "UTF-16LE");
echo md5($strUtf32); 
```

这会给你`5FA285E1BEBE0A6623E33AFC04A1FBD5`。这将`System.Text.Encoding.Unicode`在 c# 端匹配。

否则更改`System.Text.Encoding.Unicode`为`System.Text.Encoding.UTF32`c# 端。这会给你`A0D5C8A4D386F15284EC25FE1EEEB426`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:53:09.317

呃，C# 代码创建了一个 MD5 哈希，而 PHP`mb_convert_encoding`函数只是对字符串进行编码......

另外，这不是您提供的链接中的完整代码。您缺少重要的 MD5 功能：

```
$str = "123";
$strUtf32 = mb_convert_encoding($str, "UTF-16");
echo md5($strUtf32); <===== 
```

如果该代码匹配，则应该没有理由为什么它不应该工作，因为 MD5 算法仍然是相同的，并且不会因语言而异。

# junit - 如何在 Jenkins 中使用 Email-ext 获取 Junit 测试结果

> ID：14917804
> 
> 赞同：2
> 
> 时间：2013-02-17T03:51:56.210
> 
> 标签：junit, jenkins, email-ext

我需要在默认的 html_gmail.jelly 脚本中添加什么以使其显示已测试的类，包括在每个类中运行了多少测试？

Jenkins 作业完成后，您可以在如下所示的地址中深入查看 Junit 测试结果：

[http://somecompany.jenkins.com/view/App_Automation/job/Application_Under_Test/129/testReport/com.AUT.testing.mobile/](http://somecompany.jenkins.com/view/App_Automation/job/Application_Under_Test/129/testReport/com.AUT.testing.mobile/)

测试结果是由 build.xml 生成的，所以只是指向那个 xml 文件的问题吗？

email-ext 页面显示了一个干净的示例，但没有显示用于实现此目的的令牌：[http ://wiki.hudson-ci.org/download/attachments/3604514/html.jpg](http://wiki.hudson-ci.org/download/attachments/3604514/html.jpg)

当前使用 ${FAILED_TESTS} 令牌会生成一个不错的 Tested；失败的; 跳过的数字，但没有指出哪些测试通过/失败/跳过。我想显示测试的总数，包括实际运行的测试。

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T18:21:03.367

好的，我想出了如何通过将 var=pass 或 var=fail 添加到这些分配的标记来显示通过和失败的方法。

**首先进入这个路径下的Jelly脚本：**

~/.hudson/plugins/email-ext/WEB-INF/classes/hudson/plugins/emailext/templates/automation.jelly

$DEFAULT_SUBJECT (${build.testResultAction?.failCount} ${build.testResultAction?.failureDiffString})

**在詹金斯中设置配置**

```
DEFAULT SUBJECT:
$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!

DEFAULT CONTENT:
$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS: 
```

检查 $BUILD_URL 处的控制台输出以查看结果。

```
Changes:
${CHANGES}

Changes Since Last Success
${CHANGES_SINCE_LAST_SUCCESS}

Failed Tests:
${FAILED_TESTS}

Build Log:
${BUILD_LOG}

Total Amount of Tests:
${TEST_COUNTS, var}

Total = $TEST_COUNTS
Failed = ${TEST_COUNTS,var="fail"}

Total = $TEST_COUNTS
Passed = ${TEST_COUNTS,var="pass"}

Job Description:
${JOB_DESCRIPTION} 
```

**将其放在电子邮件作业中** ${JELLY_SCRIPT,template="html-with-health-and-console"} 注意可用的模板在路径中注明`~/.hudson/plugins/email-ext/WEB-INF/classes/hudson/plugins/emailext/templates/automation.jelly`或创建您自己的。

# java - 将整数从用户输入传递到另一个类

> ID：14917806
> 
> 赞同：1
> 
> 时间：2013-02-17T03:52:25.993
> 
> 标签：java, string, parsing, user-interface, integer

我在将整数从一个类正确传递到另一个类时遇到问题。

我正在创建一个 GUI，用户可以在文本字段中输入一个数字来调整 JPanel 中网格的大小。

如果我用正常的 int 编写它，如下所示，它可以正常工作，

```
public int getGridSize() {
    return 6;
} 
```

但是当我尝试更改代码时，它从文本字段中获取字符串（字段中的默认文本是数字“12”），如下所示。

```
private void initComponents() {

        gridPanel1 = new lizasummerschol.GridPanel();
        gridSize = new javax.swing.JTextField();

    gridSize.setText("12");
        gridSize.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                gridSizeActionPerformed(evt);
            }
        });

 private void goBActionPerformed(java.awt.event.ActionEvent evt) {                                    
     size = Integer.parseInt(gridSize.getText());
     gridPanel1.executeUserCommands("reset"); 
     goB.setText("s "+size);
 }                                   

public void setGridSize() {
   this.size = size;
}

public int getGridSize() {
  if (this.size > 0) {
    return this.size;
  }
    else {
       return 10;
      }
} 
```

无论用户输入什么，网格都保持 10x10，就好像它不满足大于 0 的条件一样。网格是在一个名为 GridPanel 的 JPanel 中生成的。这是我认为相关的代码。

```
package lizasummerschol;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JPanel;

public class GridPanel extends JPanel implements MouseListener, ActionListener {
    GridJApplet myGridJApplet = new GridJApplet();    
    public int NUMBER_ROWS;
    public int NUMBER_COLS; 
public static int LEFT = 15;
public static int DOWN = 15;
public static int SIZE = 15;

    private int particleColour;
    private int fixedness;
    private int iteration;

    private Graphics bufferGraphics;

    private Image offScreenImage;
    private Image offScreenImageDrawed;
    private Graphics offScreenGraphics;
    private Graphics offScreenGraphicsDrawed;

private int [][] particle;
    private int [][] fixed;

    public GridPanel() {      
            addMouseListener( this );
    reset();
    }
    //Initialise particle with random colours

    private void initialiseRandomly() {
        NUMBER_ROWS = NUMBER_COLS = myGridJApplet.getGridSize();    
        particle = new int[NUMBER_ROWS][NUMBER_COLS];
        fixed = new int[NUMBER_ROWS][NUMBER_COLS];

      for ( int i=0; i < NUMBER_ROWS; i++ ) {
    for ( int j=0; j < NUMBER_COLS; j++ ) {
        if( Math.random()*3 < 1 ) {
            particle[i][j] = 0 ;
                            } else if ( Math.random()*3 < 2) {
            particle [i][j] = 1 ;
                           } else {
                               particle[i][j] = 2 ;
            }
                    fixed[i][j] = 0;
        }
       }  
    iteration = 1;
} 
```

已解析为整数的字符串是否与整数不同？我的想法是，当小程序初始化时，它应该从 gridSize 中获取“12”，然后当 gridSize 中的文本发生更改（并按下“Go”按钮）时，它将使用新尺寸重新绘制 GridPanel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:34:28.313

当我问到你的解析何时发生时，你说：

> 它由 reset() 调用它在小程序启动时启动。

然后就像我怀疑的那样：您在`getText()`GUI 正在构建时调用 JTextField，并且在用户有任何时间与 GUI 交互之前。此时文本字段将不包含任何逻辑值是有道理的。

解决方案就像我在上面的评论中所说的那样，在事件侦听器（例如 ActionListener）中进行解析。这意味着解析将在用户触发事件时进行，例​​如按下触发 ActionListener 的 JButton 或单击 JLabel 并触发 MouseListener 时。通过这种方式，您可以在用户表示已完成输入并且需要进行计算时从用户那里获取信息。

例如：

```
import java.awt.event.*;
import java.lang.reflect.InvocationTargetException;
import javax.swing.*;

public class ParseTextFieldEg extends JApplet {

   @Override
   public void init() {
      try {
         SwingUtilities.invokeAndWait(new Runnable() {
            public void run() {
               createGui();
            }
         });
      } catch (InvocationTargetException e) {
         e.printStackTrace();
      } catch (InterruptedException e) {
         e.printStackTrace();
      }
   }

   private void createGui() {
      ParseTextFieldPanel panel = new ParseTextFieldPanel();
      panel.reset();  // *** calling reset at the wrong time!

      getContentPane().add(panel);
   }

}

class ParseTextFieldPanel extends JPanel {
   private JTextField textField = new JTextField(10);
   private JButton button = new JButton("Push Me");

   public ParseTextFieldPanel() {
      add(textField);
      add(button);

      button.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            reset();  // *** calling reset at the *right* time!
         }
      });
   }

   public void reset() {
      int myInt;
      try {
         myInt = Integer.parseInt(textField.getText());
         JOptionPane.showMessageDialog(this, "myInt is " + myInt);
      } catch (NumberFormatException e) {
         JOptionPane.showMessageDialog(this, "myInt is not yet available or is a non-number");
      }
   }

} 
```

# vb.net - 在 VB 中从 SQL 中检索数据（第 2 部分）

> ID：14917829
> 
> 赞同：3
> 
> 时间：2013-02-17T03:56:46.157
> 
> 标签：vb.net, visual-studio-2012, sql-server-2012

我正在尝试通过 sql 从数据库中检索数据来填充列表框。我之前问过这个问题，但我使用的是不同的配置，而我现在使用的配置没有给出任何结果。

[从 SQL 中检索 VB 中的数据](https://stackoverflow.com/questions/14529534/retrieving-data-in-vb-from-sql)

那是我的旧帖子。我现在将代码提供给我尝试的新版本。

```
Imports System.Data.Sql
Imports System.Data.SqlClient

Public Class Form1

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim conn As New SqlConnection
        conn.Open()
        Dim comm As New SqlCommand("SELECT name FROM Table_1", conn)
        Dim reader As SqlDataReader = comm.ExecuteReader
        Dim dt As New DataTable
        dt.Load(reader)
        ListBox1.Items.Add(dt)

    End Sub
End Class 
```

如果有人愿意帮助我，我将不胜感激。如果可能，请在尝试启发我时使用实用的方法，因为这样效果最好。

编辑 1

```
Imports System.Data.Sql
Imports System.Data.SqlClient

Public Class Form1

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim connString As String = "Data Source=THE_SHOGUNATE\SQLEXPRESS;Initial Catalog=le_database;Integrated Security=True"
    Dim conn As New SqlConnection(connString)
    conn.Open()
    Dim comm As New SqlCommand("SELECT name FROM Table_1", conn)
    Dim reader As SqlDataReader = comm.ExecuteReader
    Dim dt As New DataTable
    dt.Load(reader)
    ListBox1.DataSource = dt

End Sub
End Class 
```

使用此代码，列表框会填充 6 个“System.Data.DataRowView”字符串实例，其中 6 是我表中的项目数。我如何获得实际值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T04:03:29.160

你错过了`connectionString`
如果你想从数据库中填充列表有很多方法

**使用数据读取器**

```
Imports System.Data.Sql
Imports System.Data.SqlClient

Public Class Form1

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim connectionString As String = "Data Sourec=localhost;........."
    Dim conn As New SqlConnection(connectionString)
    conn.Open()
    Dim comm As New SqlCommand("SELECT name FROM Table_1", conn)
    Dim reader As SqlDataReader = comm.ExecuteReader
    /* As it is not working i commented this
    listBox1.ItemsSource = dt; // use this instead of  ListBox1.Items.Add(dt)
    //because Add event add only one item in the list. 
     */
    Dim i As Integer
    i=0
    while reader.read() 
    listbox1.Items.Add(dr(i).ToString);
    i++
    End While

 End Sub
End Class 
```

**使用数据表**

```
Imports System.Data.Sql
Imports System.Data.SqlClient

Public Class Form1

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    Dim connectionString As String = "Data Sourec=localhost;........."
    Dim conn As New SqlConnection(connectionString)
    conn.Open()
    // Create new DataAdapter
    SqlDataAdapter a = new SqlDataAdapter("SELECT * FROM EmployeeIDs", c)
    // Use DataAdapter to fill DataTable
    DataTable dt = new DataTable();
    a.Fill(dt);
    ListBox1.DataSource = dt;
    ListBox1.DataTextField = "name";

 End Sub
End Class 
```

**编辑：**
连接字符串的其他参数取决于您的安全性等等。您必须看到此链接[SQL Server 2008 的连接字符串](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T04:47:13.217

绑定后设置`DisplayMember`属性：`DataSource`

```
ListBox1.DataSource = dt
ListBox1.DisplayMember="name" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T19:10:45.823

我看到的最后一个解决方案应该可以工作，但是关于 SQL Server，有几个重要的最佳实践需要牢记。

1）尽可能避免 Select * ，而是明确命名您的列。如果您不打算拉下表中的所有列，则选择 * 会使 SQL 执行额外的工作。它也不是面向未来的，因为 dba 将来可能会添加一个 VARBINARY(MAX) 列，并用 gigs 的 blob 数据填充它，这种情况会使您编写的查询大大减慢并且不必要。

2）永远记得在你完成后关闭你的 SQLConnection。这将释放 SQL 连接和资源。

```
if (cn.State != ConnectionState.Closed)
cn.Close(); 
```

另一个很酷的技巧是使用 USING 指令，该指令将在执行超出范围时处理 SqlConnection 对象。

```
using (SqlConnection cn = new SqlConnection(sConnectionString))
{
    if (cn.State != ConnectionState.Open)
    cn.Open();

   // add query code here.

    if (cn.State != ConnectionState.Closed)
    cn.Close();
} 
```

1.  不要忘记在读取循环完成后关闭您的 SqlDataReader。

    if (!dr.IsClosed) dr.Close();

我希望这有帮助。

安德烈·拉涅利

# javascript - Javascript - 从子窗口访问全局变量

> ID：14917839
> 
> 赞同：2
> 
> 时间：2013-02-17T03:59:54.483
> 
> 标签：javascript

当一个窗口打开一个子窗口时

```
 var someVar = "someValue";
    newWin = window.open("somepage.html","",""); 
```

子窗口可以访问父窗口的全局变量

```
 var x = window.opener.someVar;
    alert(x); 
```

这在 Firefox 18、IE6、IE7、Opera 11.52、Safari 5.1.1 中工作正常（子警报“someValue”）但在 Chrome 24.0（也许更新的 Safaris 也是如此？）中失败，当它发出“未定义”警报时。

哎呀！还有人经历过这个吗？任何解决方法？

* * *

过去，我可以在任一方向访问全局变量，也可以在另一个窗口中执行函数。我不想看到这个功能消失。戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:11:39.147

它似乎仍然对我有用。在此站点上，在 Chrome 控制台的此页面上亲自尝试：

```
 this.test = "hello"
 window.open(window.location.href) //opens the same page 
```

（您必须确保允许弹出窗口，因此您可能需要执行两次）。然后，在弹出窗口的控制台中：

```
 console.log(window.opener.test) 
```

你会看到“你好”。

也就是说，我注意到 Chrome 在跨域访问方面是最严格的，*尤其是*在本地开发站点时（例如，如果您只是通过文件系统直接使用 file:// 访问 html 文件）。我喜欢在 Chrome 中开发，如果我在本地开发，我需要运行某种 Web 服务器来提供页面，而 Firefox 会很乐意让我直接通过文件系统访问它们并且不会抱怨 XSS 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:11:06.067

多谢你们，

是的，我正在做 file:// 我刚刚将它上传到我的服务器，它在那里工作正常。此外，在父窗口中，我仍然可以对子窗口执行功能。看起来双向的一切都可以在服务器上正常工作。

这是我的场景。我正在为 Windows 程序 BeerSmith2（[Beer Homebrewing 程序](http://beersmith.com)）开发一个附加组件。此 Windows 应用程序使用小型“强制”浏览器（您计算机上的 IE）来显示来自 Windows 应用程序的“报告”。我的插件需要将应用程序的小型俘虏浏览器拆分为全屏浏览器（相同的 IE），并将大量变量从俘虏传递到全屏。

所以不涉及服务器，我真的只需要支持 IE，但我试图让它跨浏览器，以便我的插件将来也可以与 Mac 版本的 BeerSmith2 一起使用。我在 Firefox 中开发，然后让它在 IE6 上运行（如果它在 IE6 上运行，它可以在任何东西上运行），然后在 IE-later/Opera/Safari/Chrome 中进行最后的调整，这通常只有很小的困难。

想象一下当整个程序（几千行 JS 代码）在最新的 Chrome 上完全失败时我的恐惧。由于没有服务器，我不能做Ajax，我想不出任何其他方法来做这件事。所以我想我被困住了。我希望萨法菲不要效仿。

IE 有一个关于在 file://'s 中运行 JS 的令人讨厌的弹出警告，但您可以将其关闭。Chrome 只是默默地在窗口之间传递变量失败，我认为它没有给你任何选择。哇，微软确实做了正确的事情！

谢谢你的帮助。戴夫

# html - Set alpha/transparency of whole canvas in Raphael html5

> ID：14917842
> 
> 赞同：0
> 
> 时间：2013-02-17T04:00:32.407
> 
> 标签：html, canvas, svg, raphael, opacity

Using Raphael to draw SVG in html5, is it possible to set the alpha opacity of the whole canvas?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:46:04.977

You can change the opacity of a Raphael element like this:

```
 raphaelElement.attr(opacity,.75); 
```

If you're going to draw your svg on a canvas, just set context.globalAlpha and all drawing after that will be at the specified opacity:

```
 context.globalAlpha = 0.75; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:42:19.460

There are a couple of things you can do. You can define a global [Paper.set](http://raphaeljs.com/reference.html#Paper.set "Paper.set"), add each element to the set, and apply the opacity attribute to the set, or use [Paper.forEach()](http://raphaeljs.com/reference.html#Paper.forEach "Paper.forEach()") to apply the opacity to each element at once.

* * *

## Using a Set

Create something like:

```
globalSet = paper.set(); 
```

Then as you create an element, add it to the set:

```
el = paper.circle(60, 60, 50);
el2 = paper.circle(90, 60, 50);

globalSet.push(el, el2);
globalSet.attr({opacity: .75}); 
```

Here's a jsFiddle: [http://jsfiddle.net/TA9vn/2/](http://jsfiddle.net/TA9vn/2/)

* * *

## Using forEach()

Instead of using a set, use the `forEach()` method for paper.

```
paper.forEach(function (element) {
    element.attr({opacity: .75});
}); 
```

jsFiddle: [http://jsfiddle.net/JCvBT/2/](http://jsfiddle.net/JCvBT/2/)

# jsf - 复合组件中的 myfaces 操作方法抛出

> ID：14917845
> 
> 赞同：0
> 
> 时间：2013-02-17T04:01:12.993
> 
> 标签：jsf, jsf-2, composite-component, myfaces

我在涉及复合组件和操作方法的 myfaces 2.1.10（与 TomEE 打包）遇到了一个奇怪的问题。本质上，看下面的例子，myfaces 似乎认为 action 方法是一个属性，并抛出一个 ElException。相同的代码适用于 Mojarra（在 jBoss 7.1.2 下）。

知道我做错了什么吗？

例外：

```
 javax.el.ELException: /index.xhtml: Property 'act' not found on type com.company.dept.beans.SomeBean
org.apache.myfaces.view.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:55)
    org.apache.myfaces.view.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:46)
    org.apache.myfaces.view.facelets.compiler.UILeaf.encodeAll(UILeaf.java:505)
    javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:541)
    javax.faces.component.UIComponentBase.encodeAll(UIComponentBase.java:541)
    org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1981)
    org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285)
    javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59)
    org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:116)
    org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:199) 
```

名为“菜单”的复合组件：

```
 <composite:interface displayName="Navigation Menu Bar" shortDescription="Navigation menu bar">          
        <composite:attribute name="action" method-signature="java.lang.String action()"/>
    </composite:interface>

    <composite:implementation>
    <div id="#{cc.clientId}:menuComponent">
        <h:form>
            <h:commandButton action="#{cc.attrs.action}" value="execute action" />
        </h:form>
    </div>
    </composite:implementation> 
```

以下页面使用上面的组件

```
<h:head>
</h:head>
<h:body>
  <menu:menu action="#{someBean.act}"/>
</h:body>
</html> 
```

带有 action 方法的 backing bean

```
package com.company.dept.beans;

import javax.inject.Named;

@Named
public class SomeBean { 

    public String act() {
        System.out.println("ACT CALLED");
        return "SUCCESS";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T14:34:10.700

这是由于应用程序的打包方式。其中一个包含 xhtml 的 jar 文件缺少 faces-config.xml 文件，导致 MyFaces 找不到它。奇怪的是，莫哈拉似乎并不在意……

# c# - 使用 jQuery 查找在代码隐藏中创建的控件

> ID：14917846
> 
> 赞同：1
> 
> 时间：2013-02-17T04:01:19.707
> 
> 标签：c#, jquery, asp.net

我希望能够访问在代码隐藏中创建的 jQuery 中的标签控件。

我已经像这样在代码隐藏中向我的页面添加了控件

```
 Label L = new Label();
        L.ID = "txt" + i;
        L.Text = dr["category_name"].ToString();
        L.CssClass = "heading";
        divCat.Controls.Add(L); 
```

是否可以通过 ID 或 jQuery 中的替代选项找到这些控件？以下给出了一个错误，指出没有这样的控制：

```
$(function () {
  $(".hoverlabel").hover(function () {
    $("#<%=txt1.ClientID %>").show();
  });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:12:47.737

我不确定它是否有效。
您可以利用`ClientIDMode="Static"` 例如。

```
<asp:TextBox ID="txtEcho2" runat="server" ClientIDMode="Static" /> 
```

在你的情况下

```
 Label L = new Label();
    L.ID = "txt" + i;
    L.Text = dr["category_name"].ToString();
    L.CssClass = "heading";
    divCat.Controls.Add(L); 
    L.ClientIDMode= ClientIDMode.Static; 
```

和你的jQuery函数

```
 $(function () {
        $(".hoverlabel").hover(function () {
        $("#txt1").show();
       });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:12:16.827

你不能做你想做的事……那样。

您正在尝试将字符串用作代码中的对象。以这个普通的 C# 为例：

```
string myString = "HelloString";
string lowerString = HelloString.ToLower(); // This won't work.. 
```

这相当于你正在尝试做的事情。

解决方法是使用`FindControl`：

```
$(function () {
    $(".hoverlabel").hover(function () {
        $("#<%= FindControl("txt1").ClientID %>").show();
    });
}); 
```

这将根据您动态分配的 ID 找到一个控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:15:00.383

假设代码隐藏实际上呈现一个 html `<label>`，你的 jQuery 可能是这样的：

```
$(function () {
  $(".hoverlabel").hover(function () {
    $("label.heading").show();
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T04:57:46.893

只需分配一个额外的“标识 CSS 类”：

```
var L = new Label();
L.ID = "txt" + i;
L.Text = dr["category_name"].ToString();
L.CssClass = "heading myLabel"; // Set multiple classes separated by spaces
divCat.Controls.Add(L); 
```

然后你可以用这个 jQuery 语句来控制：

```
$(function () {
  $(".hoverlabel").hover(function () {
    $(".myLabel").show();
  });
}); 
```

# sum - 在数组中求和的算法？

> ID：14917848
> 
> 赞同：-2
> 
> 时间：2013-02-17T04:01:27.193
> 
> 标签：sum, set, subset-sum, array-algorithms

假设您有一些数组，其中包含您知道都是正数且小于数字 N 的元素。

有人可以给我一个算法的一般高级描述，以找出数组中是否存在某个子集，其中所有元素加起来正好等于 N？

它不需要特别高效；我正在使用的设备非常小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:12:16.097

如果效率不重要，那么高级算法是：

```
input: array A[1..K] of positive numbers, positive N

    for each subset S of { 1..K }
        sum = 0
        for each i in S
            sum = sum + A[i]
        end
        if (sum equals N) return true
    end
    return false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T04:12:25.653

伪代码。效率极低。

```
if empty(numbers) return false
return hasSumSubset(numbers, N)

boolean hasSumSubset(numbers[], N):
   p = pop(numbers)
   if empty(numbers) return N == p
   return hasSumSubset(numbers, N-p) or hasSumSubset(numbers, N) 
```

如果您实际实现了这一点，请确保`numbers`为递归调用复制（而不是通过 ref 传入）；否则它将无法正常工作。

# visual-studio-2012 - Visual Studio 2012 Code First 默认仍使用 SQLEXPRESS

> ID：14917849
> 
> 赞同：6
> 
> 时间：2013-02-17T04:01:30.030
> 
> 标签：visual-studio-2012, entity-framework-5, sql-server-express, localdb

我创建了一个全新的 Web API 项目，创建了一个简单的 Code First 模型（一个具有 id 和 dbcontext 对象的类，仅此而已），然后在包管理器控制台中运行 Enable-Migrations。

我注意到它在 SQLEXPRESS 而不是 LocalDB 中创建数据库，尽管 DefaultConnection 字符串指向 Web.config 文件中的 (LocalDB)。这会导致后续查询失败，声称数据库尚未初始化。

如何让 VS 2012 中的 Enable-Migrations 命令指向 LocalDB 而不是 SQLExpress？我尝试安装 SQL Management Studio 2012 Express 并停止 SQLEXPRESS 数据库，但这只会导致 Enable-Migration 命令失败。

有小费吗？

注意：我安装了 VS 2010，以及它附带的所有默认软件（如 SQL Server），所以这可能会造成干扰。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-16T20:42:21.497

看起来您必须实际指定（在上下文构造函数中） DefaultConnection 应该由上下文使用。例如：

```
public class QueensFinalDb : DbContext
{
    public QueensFinalDb()
        : base("name=DefaultConnection")
    {

    }
} 
```

否则我猜它使用 machine.config 中的第一个连接字符串，在我的例子中是：

```
<connectionStrings>
    <add name="LocalSqlServer" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:46:04.343

我能找到的只有这个：

> 如果安装了 SQL Express（包含在 Visual Studio 2010 中），则在本地 SQL Express 实例 (.\SQLEXPRESS) 上创建数据库。如果未安装 SQL Express，则 Code First 将尝试使用 LocalDb ((localdb)\v11.0) - LocalDb 包含在 Visual Studio 2012 中。
> 
> 注意：如果安装了 SQL Express，它将始终获得优先权，即使您使用的是 Visual Studio 2012

[在这里](http://msdn.microsoft.com/en-us/data/jj591621.aspx)。

# c++ - 打开文件时，C 还是 C++？

> ID：14917850
> 
> 赞同：1
> 
> 时间：2013-02-17T04:01:33.293
> 
> 标签：c++, c, file, fstream

目前，我正在将 C++ 用于我正在编写的程序，并且我有一个关于 Old v New 的查询。

在网上看，我看到人们使用 C++ 语法打开文件。我正在转向 C++，所以我应该跟上时代的步伐，但是在我看来，使用 C 方式还是后者更好？我正在考虑：

*   安全。
*   速度。
*   内存使用情况。（虽然我想我可能对此有一个想法。）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:20:03.053

普通 C 和普通 C++ 都不能让您访问操作系统的安全功能。在 Windows 和 Linux/UNIX 中，有与文件系统相关的安全功能，您必须使用它们才能设置或查询文件访问权限。

无论您是用 C 还是 C++ 编写，安全性仍然是您的责任。这两种语言都不能让您摆脱输入验证和错误检查之类的事情。

文件 I/O 速度应该在相同平台上使用相同编译器大致相同，除非您使用不同的缓冲模式或不同大小的缓冲区。文件 I/O 函数中隐式使用的内存量也应如此。

如果您使用 C++ 编写，您通常应该使用 C++ I/O 函数，除非您无法使用它们（例如，您无法访问特定于操作系统的功能，因此被迫使用由你的操作系统）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T04:04:16.623

使用 C++ 标准库为您提供的功能。当且仅当您遇到速度或内存问题时，才开始分析并探索其他选项。

# configuration - Debian：./configure 由于 PKG_CHECK 而失败

> ID：14917854
> 
> 赞同：1
> 
> 时间：2013-02-17T04:02:40.423
> 
> 标签：configuration, makefile, debian, pkg-config

我想构建一个修改版的 lighttpd。我遵循本教程： [http ://h264.code-shop.com/trac/wiki/Mod-H264-Streaming-Lighttpd-Version2](http://h264.code-shop.com/trac/wiki/Mod-H264-Streaming-Lighttpd-Version2)

这是我到目前为止所做的

```
apt get install lighttpd
apt get install automake autoconf libtool 
cd /var/tmp
wget http://h264.code-shop.com/download/lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar.gz
tar -zxvf lighttpd-1.4.18_mod_h264_streaming-2.2.9.tar.gz
wget http://download.lighttpd.net/lighttpd/releases-1.4.x/lighttpd-1.4.28.tar.gz
tar ... 
```

在我将所有文件和数据复制到目录和 Makefile.am 之后，我输入了：

```
./autogen.sh
./configure --enable-maintainer-mode --prefix=${HOME}/test/lighttpd-1.4.28 
```

控制台返回：

```
 ...
        checking for pkg-config... no
        checking for libev support... ./configure: line 12184: syntax error near unexpected token `LIBEV,'
./configure: line 12184: `      PKG_CHECK_MODULES(LIBEV, libev, ,'
root@foo... 
```

有些人通过安装“pkg-config”解决了这个问题。我安装了这个包，但我仍然无法运行配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:18:28.980

我刚刚发现这个版本的 lighttpd 包含一个错误。我从 1.4.28 切换到 1.4.30，一切顺利。

# jquery - 剑道移动视图加载完成

> ID：14917857
> 
> 赞同：0
> 
> 时间：2013-02-17T04:03:30.893
> 
> 标签：jquery, html, kendo-ui

当我使用 kendo mobile 显示视图时，我有未显示的地图和显示为 null 的 div 高度值。我想在视图加载完成时运行一个函数以显示地图并计算 div 高度，任何人都可以提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:08:37.097

使用移动视图的**显示**事件。当视图可见时触发 show 事件。

```
<div data-role="view" data-show="showMap">

<script>
function showMap() {
///code to display map when view becomes visible
}
</script> 
```

# javascript - 命名下拉菜单 - Google 地图

> ID：14917859
> 
> 赞同：1
> 
> 时间：2013-02-17T04:03:39.410
> 
> 标签：javascript, google-maps

我正在制作索马里的自定义地图。我已在此提琴手中发布了代码here

[http://jsfiddle.net/nr7dU/](http://jsfiddle.net/nr7dU/)

我正在尝试获取右上角的下拉菜单（标题显示为空白）以显示自定义标题。我相信麻烦的代码如下。任何帮助将不胜感激

```
var styledMap = new google.maps.StyledMapType(styles, {name:"Custom"}); 
var myOptions = {
zoom: 6,
center: new google.maps.LatLng(6.0442, 45.7194),
mapTypeControl: true,
streetViewControl: false,
mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
navigationControl: true,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions);
map.mapTypes.set('map_style', styledMap);
map.setMapTypeId('map_style'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:17:24.240

设置`mapTypeIds`-options-option 的`mapTypeControlOptions`：

```
mapTypeIds:
 ['map_style',google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE] 
```

[**http://jsfiddle.net/doktormolle/MTbv7/**](http://jsfiddle.net/doktormolle/MTbv7/)

# c - 如何在 gcc linux 中编译多个 .c 和 .h 文件？

> ID：14917864
> 
> 赞同：5
> 
> 时间：2013-02-17T04:04:54.053
> 
> 标签：c, gcc

所以我有一个源 mainClass.c，我在其中定义了 main。我有一个头文件class1.h和class1.c中class1.h中定义的所有函数的实现。我在 class1.h 中有两个变量（全局），分别命名为 cond 和 mutex，它们现在正在 class1.c 中使用，将来我可能也会在我的 mainClass.c 中使用它。现在要编译所有源文件以生成一个目标文件，我正在执行以下操作：

`gcc -Wall -pthread -I/home/2008/ariarad/mainClass1 mainClass1.c class1.c -o out`

/home/2008/ariarad/mainClass1 是我所有的头文件和源文件所在的位置，我在其中一个 .c 文件中使用 pthead.h。即使我已将其包含在其中，它也会抱怨，因此我必须将其包含在内。

现在，当我运行上述命令时，出现以下错误：

```
class1.c:3:16: error: redefinition of ‘cond’
class1.h:66:16: note: previous definition of ‘cond’ was here
class1.c:4:17: error: redefinition of ‘mutex’
class1.h:67:17: note: previous definition of ‘mutex’ was here 
```

以防万一我在 class1.h 周围有一个 ifndef 和 endif 块，以避免多重包含。我绝对不会重新定义 .c 文件的头文件中定义的变量。那么有人可以帮我为什么它仍然给我错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T04:08:41.020

您不能在头文件中定义全局变量。您必须在其中一个 .c 文件中定义它们，然后`extern`在头文件中使用：

在 .c 文件之一中：

```
int cond; 
```

在 .h 文件之一中，所有需要该变量的 .c 文件都必须包含该文件：

```
extern int cond; 
```

# ipad - 在 Cocos2d 中为角色制作动画

> ID：14917865
> 
> 赞同：0
> 
> 时间：2013-02-17T04:05:10.617
> 
> 标签：ipad, animation, cocos2d-iphone

我正在创建一个应用程序，它代表具有动画和交互区域的书页。有一个角色自始至终都是不变的，但每一页都有不同的外观，所以我不能很容易地重复使用框架。这个角色有翅膀、腿和眼睛，它们都需要以不同的方式移动。我想知道将它们从 PSD 带入应用程序的最佳方式是什么？我能想到的两种方法是：

1.  为动画的每一帧创建一个单独的 png，然后循环浏览它们（这将组合成一个单独的精灵图集）
2.  将角色拆分成各个部分，然后在应用程序中手动定位、旋转、缩放和移动它们。

我正在考虑第 2 点的主要原因是，如果我执行第 1 点，那么我将需要为每个页面创建大量动画帧，并且还要将它们全部创建两次以适应正常和视网膜显示。

请让我知道正确的方法可能是什么，如果有什么我应该记住的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:37:23.553

选项 1 听起来更可行。300 帧有点太多了，但你不必同时将它们全部加载到内存中。将您的帧划分为多个 1024*1024 的 spritesheet，并确保同一动画的所有帧都在一个 spritesheet 上。所以，在任何给定的时刻，只有一个纹理会加载到内存中，我想这是最小的。

您还可以通过为在不同姿势下表现相同的事物创建单独的动画来进行更多优化。例如，如果眼睛在不同姿势中眨眼完全相同，您可以停止为每个姿势创建单独的帧，只是为了眨眼。只需取出眼睛（哎哟！），为它们创建一个单独的动画，然后将其放置在角色的动画节点上。

选择选项 2 会为您和糟糕的设备带来不必要的并发症。

# android - 如何将 onclicklistener 实现为动态创建的文本视图？

> ID：14917868
> 
> 赞同：0
> 
> 时间：2013-02-17T04:06:18.380
> 
> 标签：android, dynamic, onclicklistener

目前，我在将 onclicklistener 实现为动态创建的 textview 时遇到了一些问题。我会更详细地解释这个问题。我需要做的是，当我单击活动中的按钮时，我需要创建文本视图，当我单击该文本视图时，它应该被删除。但我无法为每个文本视图设置 onclicklistener。因为，textviews 的设置 onclicklistener 是写在上述按钮（用于创建 textview 的按钮）的 onclick 函数中，所以当它退出按钮的 onclick 函数时，它的范围就会消失（我认为这是问题所在）。所以我尝试使用可见和不可见功能，这将事先创建文本视图并使它们不可见，并且仅在单击按钮（用于创建文本视图的按钮）时才可见。

这是我的代码这个按钮addphone将通过插入edittext phoneno中存在的值来动态创建textview

```
addphone.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
            // TODO Auto-generated method stub
        if(phoneno.getText().toString().length() > 0 && counter < MAX)
            {
                addphoneno[counter] = phoneno.getText().toString();
                phoneno.setText("");
                final TextView mybox = new TextView(getApplicationContext());
                mybox.setText(addphoneno[counter]);
                mybox.setPadding(5, 5, 5, 5);
                mybox.setBackgroundColor(Color.rgb(99, 99, 99));
                contactbox[counter] = mybox;
                contactbox[counter].setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
                contactbox[counter].setId(100+counter);
                contactbox[counter].setText(addphoneno[counter]+"  "+"X");

                contactbox[counter].setClickable(true);
                contactbox[counter].setOnClickListener(this);     //This doesn't work!!!!!
                counter = counter+1;
            }
    }
}); 
```

但是上一行中的 setOnClickListener 不起作用

所以任何人都可以帮我解决这个问题。我希望你清楚我的问题。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T05:07:23.840

你可以试试这个：

```
private OnClickListener phoneViewClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        // your code
    }
}; 
```

并在您的 TextViews 中使用该侦听器：

```
contactbox[counter].setOnClickListener(phoneViewClickListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:33:27.480

如果您的按钮是在 xml 布局上定义的，您可以这样做。

在您的 xml 布局中，您可以定义当用户单击您的按钮时将调用哪个方法：

```
 <?xml version="1.0" encoding="utf-8"?>
 <Button xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/add_phone"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/button_send"
     android:onClick="addTextView" />  // This is most imporant line 
```

您的活动必须有一个具有相同名称的方法和一个 View 参数，如下所示：

```
/** Called when the user touches the button */
public void addTextView(View view) {
    // Do something in response to button click
    if(phoneno.getText().toString().length() > 0 && counter < MAX)
        {
            addphoneno[counter] = phoneno.getText().toString();
            phoneno.setText("");
            final TextView mybox = new TextView(getApplicationContext());
            mybox.setText(addphoneno[counter]);
            mybox.setPadding(5, 5, 5, 5);
            mybox.setBackgroundColor(Color.rgb(99, 99, 99));
            contactbox[counter] = mybox;
            contactbox[counter].setLayoutParams(new   LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
            contactbox[counter].setId(100+counter);
            contactbox[counter].setText(addphoneno[counter]+"  "+"X");

            contactbox[counter].setClickable(true);
            contactbox[counter].setOnClickListener(this);     //This will work \o/
            counter = counter+1;
        }
}
} 
```

在这种方法上，您应该将代码放入 addViews。

由于所有添加的 textview 的行为必须相同（我是这样理解的），当用户单击它时将其删除， **您可以使您的活动实现 onClickListener 并且您只需要正确实现您的 onClick 方法活动。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:23:35.973

您必须实际定义一个 onClickListener 而不是简单地将其设置为布尔值。

```
contactbox[counter].setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        //this is where you would handle your click event
    }
}); 
```

祝你好运！

# jquery - 加载页面上和刷新网站后的 JQuery 动画

> ID：14917870
> 
> 赞同：1
> 
> 时间：2013-02-17T04:06:44.427
> 
> 标签：jquery, jquery-animate

我正在尝试在侧面放置浮动框（例如用于购物篮）。它工作正常但我不喜欢当我打开页面（在 CHROME 和 IE9 中）时，该框从顶部动画到该位置。请参阅 www.arturtest.co.uk 在 Firefox 中很好。这是我的jQuery：

```
$(document).ready(function(){
    $(window).scroll(floatSides);
    floatSides();
});

function floatSides () {
    var offset = $(document).scrollTop() + 120;
    $('.floatingBox').animate({top: offset + "px"},{duration:750,queue:false});
} 
```

我只是希望它们出现在像 FireFox 这样的好地方。

有任何想法吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:18:36.383

为了快速修复，在初始调用 之后`floatSides()`，使用 强制动画立即完成`.finish()`。它看起来像这样。

```
$(document).ready(function(){
    $(window).scroll(floatSides);
    floatSides();
    $('.floatingBox').finish();
}); 
```

# blogger - Blogger 侧边栏上的“添加到收藏夹”按钮

> ID：14917872
> 
> 赞同：0
> 
> 时间：2013-02-17T04:07:03.217
> 
> 标签：blogger, sidebar, bookmarks

我想在 Blogger 的博客侧边栏上添加一个“添加到收藏夹”按钮。我已经有了图像，但我需要代码。我希望它适用于所有浏览器。你会给我什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T15:46:09.660

首先，我认为它适用于 Explorer 不确定其余部分。

您可以添加一个图像小部件，这样您就可以毫无问题地上传您想要的图像。

一旦你选择了图片，唯一的事情就是在博客小部件选项中你可以声明一个链接到这个图片的 URL，但不是你真正想要的，链接到功能“添加到收藏夹”。为此，首先您必须在链接字段中引入任何 URL。不用担心哪个 URL，它不会被使用。

在修改代码之前，请保存一份备份副本。

完成后，转到“模板”->“编辑 HTML”并查找图像小部件，以便找到它查找：

```
<b:widget id='Image1' locked='false' title='' type='Image'> 
```

找到后，转到小部件标签内的以下部分

```
<b:includable id='main'>
<b:if cond='data:title != &quot;&quot;'>
  <h2><data:title/></h2>
</b:if>
<div class='widget-content'>
  <b:if cond='data:link != &quot;&quot;'> 
```

并更改此行（这将是与先前在博客中的图像关联的 URL 的信息）：

```
 <a expr:href='data:link'> 
```

通过这个将图像链接到“添加到收藏夹”的链接：

```
 <a href='javascript:window.external.AddFavorite(&apos;YOUR-BLOG-URL&apos;, &apos;TEXT-TO-APPEAR&apos;)'> 
```

[您应该将您的博客 URL ( http://nameofyourblog.blogspot.com](http://nameofyourblog.blogspot.com) )替换为 YOUR-BLOG-URL，将添加到收藏夹时对话框中显示的文本替换为 TEXT-TO-APPEAR。

# c++ - std::string 搜索字符串中的数字并在前后插入空格

> ID：14917876
> 
> 赞同：0
> 
> 时间：2013-02-17T04:08:20.370
> 
> 标签：c++, string

我有这个字符串：

> 字符串strInput =“33kfkdsfhk33 324234k334k 333 3 323434/545435436***33/rrrr34 e3mdgmflkgfdlglk3434424dfffff555555555555gggggg00000033lll-111111 1974-1-12;”

我想将其格式化为：

> " 33 kfkdsfhk 33 324234 k 334 k 333 3 323434 / 545435436 *** 33 /rrrr 34 e 3 mdgmflkgfdlglk 3434424 dfffff 555555555555 gggggg 00000033lll - 111111 "17 - 19

即找到一个数字，并在数字前后插入空格。

请不要 Boost... 只有标准 C++ 库。

这是我尝试过的，在数字后插入空格，我想对所有连续数字进行分组以获得所需的输出。

```
strInput = "33kfkdsfhk33  324234k334k     333 3   323434/545435436***33/rrrr34       e3mdgmflkgfdlglk3434424dfffff555555555555gggggg00000033lll-111111 1974-1-12";
for ( std::string::iterator it=strInput.begin(); it!=strInput.end(); ++it)
{
    static bool flag = false;
    if(isdigit(*it) && !flag)
    {
        strInput.insert(it,1,' ');
        flag = true;
    }
    else
        flag = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:40:20.910

您的解决方案实际上在概念上看起来相当不错，但有一个主要问题：在您`insert`进入一个字符串之后，指向它的所有迭代器都可能无效，尤其是您的循环迭代器`it`。这可能导致段错误和各种难以解释的错误。

作为一种替代解决方案，我建议不要修改您开始使用的字符串，而只是从中读取并逐步构建一个新的字符串，在您进行操作时在您想要的位置插入空格。这实际上只是对您当前代码的微小修改！

```
string strInput = ... // whatever;
string newString = "";
bool currentisdigit = false;
bool previouswasdigit = false;
for ( std::string::iterator it=strInput.begin(); it!=strInput.end(); ++it)
{
    previouswasdigit = currentisdigit;
    currentisdigit = isdigit(*it);
    if(currentisdigit && !previouswasdigit)
        newString.push_back(' ');
    if(!currentisdigit && previouswasdigit)
        newString.push_back(' ');
    newString.push_back(*it);
} 
```

# php - Wordpress 重命名自定义帖子类型

> ID：14917879
> 
> 赞同：0
> 
> 时间：2013-02-17T04:08:50.863
> 
> 标签：php, mysql, wordpress

我正在研究一个 Wordpress 数据库模型，在该模型中，我在以下布局中添加了许多带有分类法的自定义帖子类型

```
function my_custom_settings(){
    register_post_type( 'my_custom_post_type',array(  
      'labels' => array(  
        'name' => __( 'My Custom Post Type' ),  
        'singular_name' => __('My Custom Post Type')  
    ),  
      'public' => true,  
      'menu_position' => 6,  
      'rewrite' => array(
        'slug' => 'my-custom-post-type',
        'with_front' => true,
    )));

    register_taxonomy('my_custom_taxonomy','my_custom_post_type',array(  
      'hierarchical' => true,  
      'label' => 'My Custom Taxonomy',  
      'query_var' => true,  
      'rewrite' => array('slug' => 'my-custom-taxonomy')  
    )); 
}
add_action('init','my_custom_settings'); 
```

我想知道是否可以在保持数据库关系和帖子完好无损的同时更改实际注册帖子类型的名称空间（例如`my_custom_post_type`to ）。`my_other_custom_post_type`我的问题是很多帖子类型都有相似的命名空间，这变得令人困惑，所以我想我需要知道要更改的特定数据库字段，并且想知道是否有人知道位置和/或是否有更简单的重命名方法自定义帖子类型。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T07:24:41.093

这些方面的东西？

```
UPDATE  `wp_posts` SET  `post_type` =  '<new post type name>' WHERE  `post_type` = '<old post type name>'; 
```

# java - 使用 CameraDevice 和 CameraSettings javacv

> ID：14917880
> 
> 赞同：1
> 
> 时间：2013-02-17T04:08:56.893
> 
> 标签：java, javacv

我不知道这些课程是如何运作的。我想知道有哪些相机可用。另外，如果可能的话，我想更改相机的设置（我想我可以自己弄清楚，但举个例子会很棒）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T11:21:12.187

获取您可以简单使用的相机列表

```
int n = com.googlecode.javacv.cpp.videoInputLib.videoInput.listDevices();

for (int i = 0; i < n; i++) {
   String info = com.googlecode.javacv.cpp.videoInputLib.videoInput.getDeviceName(i);

   System.out.println(info);
} 
```

您可以通过调用获得图像分辨率

```
grabber.getImageWidth();
grabber.getImageHeight(); 
```

也可以用于设置`setImageWidth()`，`setImageHeight()`

# java - Maven中的多重包装

> ID：14917881
> 
> 赞同：4
> 
> 时间：2013-02-17T04:09:36.280
> 
> 标签：java, maven, ant

我有一个项目，其中很少有像 A、B 和 C 这样的组件。所有组件都暴露了其他组件正在使用的其余接口。所以，我使用 ant 来生产 A.war、A-services.jar、B.war、B-services.jar、C.war、C-services.jar。

A-services.jar 包含 B 和 C 的接口声明。B-services.jar 包含 A 和 C 的接口声明。C-services.jar 包含 A 和 B 的接口声明。

我想将它迁移到 Maven。但是我在某些地方读过，让一个 pom 生成多个包（如**A-services.jar**和**A.war** ）并不是一个好主意。最好的方法应该是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T04:16:32.520

我认为您拥有 A-services 的原因是因为共享数据模型等。在这种情况下，您最终会拥有多个项目。A 服务的 POM。然后是另一个依赖于 A-services 的 A WAR 项目。而且您的 B 项目还依赖于 A 服务。

话虽如此，您似乎真的只需要将您的项目分成数据模型项目和实施项目。

您将有六个项目。不要试图让 Maven 从同一个项目中生成 WAR 和 JAR。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T04:18:27.087

您*可能会*发现这`maven-assembly-plugin`对您有所帮助，但正如 Andrew 所说，您确实需要将您的项目分成适当的模块。这就是 Maven 的真正用途。

# ios - iOS - 使用 CATransition 在两个 UIView 之间正确设置动画

> ID：14917882
> 
> 赞同：2
> 
> 时间：2013-02-17T04:09:52.087
> 
> 标签：ios, uiview, uiviewanimationtransition, catransition

我的屏幕上已经有一个 UIView，我希望根据我检测到的滑动手势从四个方向（左、右、上、下）之一“滑入”一个新的 UIView。获取 swipegesture 信息已经完成并且不是问题，但是现在，让我们说如果我向左滑动，那么我希望另一个 UIView 实例从右侧“滑入”。

具体来说，当新的 UIView 从右侧滑入时，旧的 UIView 开始向左滑出视图，直到完全滑出视图。换句话说，我希望你可以在动画期间看到两个 UIView，直到原始 UIView 不再可见。在您的 iPad 上可以看到相同类型的效果，例如，当您在主屏幕上并向左滑动时 - 当您的主屏幕滑出视图时，它会从右侧滑入另一个应用程序图标屏幕左边。我想要实现的唯一警告是，您不能在中途停止过渡。

无论如何，这是我到目前为止的代码 - 我认为我很接近但想获得一些帮助，也许可以完成我需要在这里完成的事情：

```
 UIView *newView = [[UIView alloc] init];
    newView.frame = CGRectMake(0, 0, TileView.frame.size.width, TileView.frame.size.height);
    [TileView addSubView:view];
    CATransition *transitionAnimation = [CATransition animation];
    [transitionAnimation setDuration:1];
    [transitionAnimation setType:kCATransitionPush];
    [transitionAnimation setSubtype:kCATransitionFromRight];
    [transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]]; 
```

UIView TileView 是我的 viewController 的子视图。是否需要为 newView 进行任何其他设置以使所有内容与屏幕位置相匹配？我*认为*KCATransitionPush 是我正在寻找但不是 100% 确定的动画类型。

对我在这里缺少的任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:59:36.847

尝试设置这两个属性也....

```
transitionAnimation.fromValue=[NSValue valueWithCATransform3D:CATransform3DMakeTranslation(0.0, 0.0, 0.0)];
transitionAnimation.toValue=[NSValue valueWithCATransform3D:CATransform3DMakeTranslation(excursion, 0.0, 0.0)]; 
```

# android - 使用 jTwitter android 进行授权

> ID：14917886
> 
> 赞同：0
> 
> 时间：2013-02-17T04:10:35.343
> 
> 标签：android, twitter, twitter-oauth, signpost, jtwitter

我是 twitter api 和异步任务的新手。我正在尝试使用 jTwitter 的 OAuth，这似乎是简单的 API。由于您不能在主线程上进行网络操作。我为这项工作创建了一个异步任务。它向我抛出了我不理解的异常。请帮助我解决异常。

这是代码

```
Twitter twitter = null;
private EditText tweetTxt = null;
private Button postBtn = null;

private OAuthSignpostClient client = null;
private String CALLBACK_URI = "myapp://twitt";

private String authUrl = null;
private ProgressDialog postDialog = null;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    postBtn=(Button)findViewById(R.id.button1);

    postBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            new MyTask().execute();

        }
    });

}

private class MyTask extends AsyncTask<Void, Void, Void> {

    protected void onPreExecute() {
        Toast.makeText(getApplicationContext(), "pre execute", Toast.LENGTH_LONG).show();
    }

    @Override
    protected Void doInBackground(Void... arg0) {

        client = new OAuthSignpostClient("" ,"", CALLBACK_URI);

        authUrl = client.authorizeUrl().toString();
        getApplicationContext().startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

protected void onNewIntent(Intent intent) {

    super.onNewIntent(intent);
    Uri uri = intent.getData();
    //Check if you got NewIntent event due to Twitter Call back only
    if (uri != null && uri.toString().startsWith(CALLBACK_URI))
    {
    try
    {
    String verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);
    client.setAuthorizationCode(verifier);
    }
    catch(Exception e){
    Log.d("exception", e.getMessage());
    }
    }} 
```

和我得到的例外

```
 02-17 10:58:54.751: E/AndroidRuntime(987): FATAL EXCEPTION: AsyncTask #1
  02-17 10:58:54.751: E/AndroidRuntime(987): java.lang.RuntimeException: An error occured while executing doInBackground()
  02-17 10:58:54.751: E/AndroidRuntime(987):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at java.lang.Thread.run(Thread.java:856)
  02-17 10:58:54.751: E/AndroidRuntime(987): Caused by: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
  02-17 10:58:54.751: E/AndroidRuntime(987):    at android.app.ContextImpl.startActivity(ContextImpl.java:886)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at android.app.ContextImpl.startActivity(ContextImpl.java:880)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
  02-17 10:58:54.751: E/AndroidRuntime(987):    at com.example.retrieve.contacts.twitter.MainActivity$MyTask.doInBackground(MainActivity.java:72) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:05:07.690

该`doInBackground()`方法不适用于执行任何 UI 任务。你应该使用`onPostExecute()`它。如果您需要在 中显示`Toast`，`doInBackground()`请将其放入 a`Runnable()`中，如代码所示。

```
Runnable run = new Runnable() {

    @Override
    public void run() {

        // SHOW A TOAST
        Toast.makeText(getApplicationContext(), "background stuff", Toast.LENGTH_LONG).show();                          
    }
}; MainActivity.this.runOnUiThread(run); 
```

# c++ - 创建显示功能

> ID：14917890
> 
> 赞同：1
> 
> 时间：2013-02-17T04:11:11.830
> 
> 标签：c++, function

我正在为此工作，但无法弄清楚如何开始为以下程序编写函数。

给出的代码是：

```
#include <iostream>
#include <string>
#include "BACCOUNT.H"
using namespace std;

void display(const bankAccount & anAcct)
{

}

int main()
{
bankAccount a("Annie Hill", 123.00);
bankAccount b("Becker" , 45.60);
display(a);
display(b);
return 0;
} 
```

我需要编写一个显示函数来显示bankAccount a 和bankAccount b 的名称和余额。

我已经为此工作了大约 3 天，甚至不知道如何开始。

我的输出需要是：

```
bankAccount: Hill, Annie, $123.00
bankAccount: Becker, Bob, $45.00 
```

到目前为止我得到的是；

```
anAcct.name();
string name = anAcct.name();
int space = name.find("5"); 
name.substr(0, 5);
name.substr(5, 9);
name.length();

cout << name; 
```

我知道这很遥远，我一直在尝试反复试验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:18:45.457

您可以在您的 bankAccount 类中重载 << 运算符，并让该运算符从显示函数中打印您的类的内容。例如参考代码

```
 friend std::ostream& operator<<(std::ostream& os, bankAccount& a)
    {
      os << a.name() << ":" << a.accountBalance();
    }

    void display(const bankAccount & anAcct)
   {
     std::cout << anAcct;
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:18:17.110

bankAccount 是你的班级，你应该至少有 2 个变量！是名称，第二个是数量，您需要一个使用 getter 显示这些变量的 diolay() 函数

```
 void bankAccount::display(){
    std::cout << this->getname() <<this->getamount<< "$ "<< std::endl;
} 
```

在主函数中使用 a.display() 就可以了

# objective-c - `id` 类型是否经常用于编写 Objective C 程序？

> ID：14917894
> 
> 赞同：4
> 
> 时间：2013-02-17T04:11:45.493
> 
> 标签：objective-c

我正在阅读“Objective C 编程”一书，他对`id`类型的解释不多，也没有做太多练习，所以我想知道你多久使用`id`一次，程序员是否大部分时间都避免使用它? （因为他解释了一些问题）

我确定它已被使用，如果您能提及某些情况，那就太好了，它是唯一的解决方案……就像来自某种应用程序开发的现实生活中的编程案例一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T04:18:43.293

`id`是 Objective C 中的通用类型。它可以表示`*`任何 Objective-C 类型的 a，例如`NSString *`,`NSArray *`等。Objective-C 的巧妙之处在于你可以向 发送消息`id`，如果另一端的对象理解消息，它将像往常一样被处理，*而发件人不必知道真实的类型*。

它通常在定义任何泛型时使用。例如，`NSArray`是一个`id`s 的数组；由程序员将特定类型的对象放入容器中（例如`NSNumber`、`NSString`等）。它在 Objective-C 中的许多其他地方都使用过（例如在`IBAction`为接口构建器定义 s 时，在定义`init`方法时等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T04:19:21.383

这`id`有点像一个包罗万象的数据类型。它用于保存任何类型的值。

常见用途是用于`init...`方法的返回类型。集合类使用它，因为它们可以容纳任何对象。请参阅各种 getter 方法返回值以及在可变版本的集合类中添加/设置对象的各种方法。

当您需要对可以是任何类但必须遵守协议的对象的引用时，它也可以与协议结合使用。示例包括许多委托属性，例如`UITableView` `delegate`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T04:19:35.840

id 是 Objective-C 中的通用对象类型。它可以容纳任何物体。

一个现实世界的例子：解析你不知道的 json，如果根元素是数组或字典。但 id 会带他们两个。

我经常使用它，但经常与协议定义结合使用：`id<NetworkPrinterProtocol>`. 这意味着它应该是任何类型的对象，但它确实满足 NetworkPrinterProtocol。通常用于定义委托。

请参阅[*WP：Objective-C — 动态类型*](http://en.wikipedia.org/wiki/Objective-C#Dynamic_typing)

# assembly - 通过移位和加法计算 13*x

> ID：14917895
> 
> 赞同：-2
> 
> 时间：2013-02-17T04:11:53.277
> 
> 标签：assembly, mips, pcspim

我刚刚开始学习汇编并且无法使此代码正常工作，因此如果有人可以帮助我，我将不胜感激。

```
main:
ori $5,$0,x 
addu $10,$0,$5
sll $5,3,shft 
addu $10, $0, $5
sll $5,2,shft 
addu $10,$0 ,$5 
```

“编写一个计算 13*x 的程序。通过将寄存器 $5 用于 x 并使用 ori 指令在程序开头加载它来执行此操作。假设 x 是用无符号二进制表示的正整数。通过移位和计算 13*x加法。不要使用显式乘法指令。不要输入或输出。将结果放在程序末尾的寄存器 $10 中。编写程序，以便可以轻松更改 x 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:16:58.520

以下是基本步骤。由于`13x`与 相同`(8 + 4 + 1)x`，因此您可以通过移位和添加来做到这一点（伪代码）：

```
move x to accumulator.

shift x left twice, it is now 4x.
add x to accumulator.

shift x left once more, it is now 8x.
add x to accumulator. 
```

现在累加器持有`13x`。您所要做的就是找出正确的 MIPS 指令来做到这一点。

* * *

我会告诉你一些你做错的事情，虽然含糊不清，因为这看起来像家庭作业:-)

`$5`应该按照我上面指定的顺序进行修改。如果将它向左移动三，然后向左移动另外两，即乘以 2 ⁵或`32`。

此外，您可能需要检查其中一些参数的顺序。他们似乎不符合预期。

# java - 关于 java 中的 Marker 接口

> ID：14917900
> 
> 赞同：1
> 
> 时间：2013-02-17T04:12:22.527
> 
> 标签：java

我是标记接口的新手，但我通过查看 decomplier、serilizable 和 clonnable 等接口来探索它们，我使用以下 url 也是为了更好地理解[http://javarevisited.blogspot.in/2012/01/what- is-marker-interfaces-in-java-and.html](http://javarevisited.blogspot.in/2012/01/what-is-marker-interfaces-in-java-and.html)

现在我的问题是，当我们在实现中设计我们的普通接口时，我们是否也可以设计我们的标记接口，如果是，请告知如何设计它们，如果不是，请解释原因。

我唯一的查询请告知我们是否可以让我们的接口也像标记一样，我想创建我自己的标记接口，因为 java 已经提供了请告知我可以创建自己的接口来像标记一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:25:18.463

要创建标记接口，您需要创建一个没有方法的接口：

```
interface MyMarker {
} 
```

你就完成了。现在如果你的类实现了这个接口，它就是一个 MyMarker 类型的类。就是这样。

**编辑**
你状态：

> 除了使用内置标记接口来制作类 Serializable 或 Clonnable 之外。也可以开发自己的标记界面。标记接口是对代码进行分类的好方法。您可以创建标记接口以逻辑划分代码，如果您有自己的工具，则可以对这些类执行一些预处理操作。现在请告知我如何在我的类实现该标记接口时向 java 编译器提供任何指示就像在可序列化标记接口的情况下发生的那样......

您最初询问了标记接口，上面是如何创建它们的。您可以让任何类实现它们，这会将要区分的类标记为已标记。您如何处理这些信息取决于您自己。至于连载的魔力，我不是专家，但我希望在幕后有很多反思。

你到底想用这种方式完成什么？

# java - Java中C是A的子类时“C c = new C()”和“A c = new C()”的区别

> ID：14917903
> 
> 赞同：3
> 
> 时间：2013-02-17T04:12:54.410
> 
> 标签：java, inheritance

假设我们有 A 类作为父类，C 类扩展它。

```
class A
{
    void m()
    {
        System.out.println("A.m");
    }
}

class C extends A
{
    @Override
    void m()
    {
        System.out.println("C.m");
    }
} 
```

`A a`引用和`C c`当我们使用它们指向相同的对象类型时有什么区别，例如`A a = new C();`和`C c = new C();`？

从这个问题：[Java继承与C#继承](https://stackoverflow.com/questions/13323099/java-inheritance-vs-c-sharp-inheritance)，它看起来像`a`并`c`指向C的对象类型，使用它们似乎没有区别。

我测试了这段代码，它们都打印了`C.m`.

```
class inherit {

    void x(A a)
    {
        a.m();
    }

    public static void main(String[] args) {
        System.out.println("hello");
        A a = new C();
        C c = new C();
        a.m();
        c.m();

        new inherit().x(a);
        new inherit().x(c);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:34:08.360

这取决于对象将用于什么。

如果你真正需要的是一个具有`A`' 接口（即`A`' 类型）的对象，强烈建议使用`A a = new C();`. 这样可以清楚地表明您需要一个`A` *接口*，而不是一个`C` *实现*。稍后当您改变主意时，您可以安全地将其更改为，`A a = new Another_Subtype_Of_A();`而不会破坏其他代码。

当`A`是接口时尤其如此（在您的情况下，`A`是一个类）。例如，如果你只想要一个列表，`List list = new ArrayList();`显然比`ArrayList list = new ArrayList();`. 这就是所谓的“编程接口，而不是实现”。

如果您正在创建一个特别需要`C`接口的对象（尤其是那些不存在于 中的接口`A`），您最好选择`C c = new C();`. 如果您`A a = new C()`改为编写，迟早您仍然必须将对象强制转换为`C`（因为 A 没有您想要的所有接口），那么为什么还要麻烦呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T04:17:57.497

这与变量的运行时类型无关。您可能只知道`Vehicle`在编译时您有一个对象，并且基于用户输入，它可能是 a`GarbageTruck`或`SportsCar`.

```
GarbageTruck t;
...
t = new SportsCar();  //can't do this!

// so we do this:
Vehicle t;
if(user.isFast()) {
   t = new SportsCar();
} else {
   t = new GarbageTruck();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T04:23:37.117

Java 是关于接口和实现的。

接口只是一组公共字段（方法和属性），描述了用户如何与实现接口的类进行交互。

实现是*实际上*使这些方法和属性做某事的代码。实现可以是 的类，`implements`也`interface`可以是其他实现的子类。

当您实例化一个类时，您正在编写如下代码：

```
Interface a = new Implementation(); 
```

很多时候，我们将接口和实现包装在一起......换句话说，当我们定义 a 时`class`，无论我们是否显式实现接口，我们都在用`public`我们编写的每个方法定义一个接口。

因此，接口会影响我们可以调用的方法，但实现会影响我们调用它们时发生的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T04:20:11.233

首先`A`是父类，`C`当你这样做时是子类，`A a = new A()`然后`A`创建对象并由`A`句柄持有。当你这样做时`C c = new C()`，对象`C`正在创建并且`C`句柄持有它。但是当你这样做时，`A a = new C()`对象`C`被创建并且`A`句柄持有它。这意味着`C`现在已经使用了 的所有属性。虽然句柄`A`被使用的属性（实例）`C`使用。这就是我们的多态性。现在它将使用 C 而不是 A 的所有重载方法

**以用法为例**
当您创建一个为子类创建方法的大型项目时，差异就出现了
假设您有`hello`方法
`public void hello(C c) { }`

将来你有另一个类 B 扩展 A.. 在这种情况下你不能使用`hello`它的参数是 C.. 并且想象你有很多类作为 A 的子类需要使用这种方法（那么有多少这样的方法您将创建）。多态是救援
你用 A 作为参数创建你好，现在你可以对..
`public void hello (A x) { }`
的所有孩子使用相同的方法。 现在所有人都可以使用*这就是多态的美妙之处*`A`
`A c = new C()
A b = new B()`
`hello`

# postgresql - Postgresql - 加拿大邮政编码的域

> ID：14917904
> 
> 赞同：-1
> 
> 时间：2013-02-17T04:13:07.877
> 
> 标签：postgresql, postal-code

我正在尝试实施一个域来检查加拿大的正确邮政编码。我写了以下内容，但出现约束错误。你能告诉我我可能错在哪里吗？我真的很感激。

```
CREATE DOMAIN can_postal_code varchar(6) 
CONSTRAINT valid_postal_code 
CHECK (VALUE ~   '^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]\d[ABCEGHJKLMNPRSTVWXYZ]\d$'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:37:48.263

[对于高达 9.0](http://www.postgresql.org/docs/8.2/interactive/sql-syntax-lexical.html)的 postgresql使用美元报价：

```
CHECK (VALUE ~ 
    $regex$^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]\d[ABCEGHJKLMNPRSTVWXYZ]\d$$regex$
); 
```

# math - 将坐标从一个参考系转换到另一个参考系

> ID：14917906
> 
> 赞同：0
> 
> 时间：2013-02-17T04:13:14.683
> 
> 标签：math, rotation, coordinates, image-rotation

我正在尝试确定我的对象检测系统的准确性，因此我将原始图像（下图）的旋转图像放入 90 度、45 度、135 度、180 度等位置，以便系统检测和转换点检测每个旋转图像及其各自的参考系到原始图像的参考系（绿色），以便我可以结合各自的检测来确定准确性。

原图链接：

[http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/37024-Tabby-cat-white-background.jpg](http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/37024-Tabby-cat-white-background.jpg)

例如：系统读取原始图像顺时针旋转 90 度的图像

[http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/37024-Tabby-cat-white-background2.jpg](http://i1116.photobucket.com/albums/k572/Ruihong_Zhou/37024-Tabby-cat-white-background2.jpg)

使用旋转后的图像，系统会检测到红点所示的东西。然而，这是参考紫色参考系。如何将红点的坐标转换回绿色的原始图像参考系以进行比较？

我考虑过对点使用旋转矩阵，但是这些矩阵似乎只适用于固定的参考系。

# java - 使用 JarBundler 将 Java 转换为 MacOSX 的 .app 文件

> ID：14917908
> 
> 赞同：13
> 
> 时间：2013-02-17T04:14:22.503
> 
> 标签：java, macos, jar, executable-jar

我要做的就是将一个简单的 java 程序转换为一个 macOSX .app 文件，这样我就可以将它作为一个简单的可执行文件分发。

我到处阅读，每个人都说同样的话：

1.  使用 Xcode - 据我所知，Xcode 不再支持 Java 构建
2.  使用 Jar Bundler - 所有的教程似乎都过时了，而且它不起作用。当我运行时： java -jar jarbundler-2.0.0.jar

    控制台返回“jarbundler-2.0.0.jar 中没有主要清单属性”

    如果我是对的，这对于打包 jar 文件的人来说将是一个失败，对吗？但我试过从其他网站和其他版本下载它，但我得到了同样的东西。

3.  他们说您可以自己创建目录和文件，然后将文件夹重命名为 .app ，然后在其上运行命令或其他内容，但这很复杂，因为我不确切知道如何创建 info.plist 文件...如果你想这样做，到目前为止我发现的最好的网站是这个：[Java Deployment Options for OSX](http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/03-JavaDeployment/JavaDeployment.html)

我已经将我的代码编译成一个 .jar 文件，我有一个图标和一切，我需要做的就是以某种方式将它打包成一个 .app 文件。

我在这里先向您的帮助表示感谢！

# 解决方案

编辑：我明白了！经过 7 或 8 小时的搜索和阅读后，它可以工作了。由于我是新手，因此我将发布我学到的所有内容，以拯救遇到同样问题的其他人免于遭受痛苦。我放弃了自己动手的方法，回到了 JarBundler。如果其他人正在阅读本文并且他们对 ANT 一无所知，这就是我所做的：下载 JarBundler，我从这里获得了我的：[Mac OS X JarBundler ANT Task](http://informagen.com/JarBundler/)并按照那里的说明进行操作。

下载时，将 jarbundler-2.2.0.jar 文件放在这里：

/usr/share/ant/lib

您可能必须运行命令来移动它，例如：

sudo mv jarbundler-2.2.0.jar ~/../../usr/share/ant/lib/jarbundler-2.2.0.jar

就像我说的，我还在学习，但这对我有用。

确保您移动了正确的 jarbundler，这是我遇到问题的地方，我移动了整个文件夹，而不是内部 .jar 文件，因此请确保您移动了您下载的文件夹 zip 中的 .jar，而不是整个文件，否则当你去构建它时，你会得到一个错误，比如 error: taskdef class net.sourceforge.jarbundler.JarBundler could not be found。

然后你需要将你的代码编译成 .jar 文件（有两种类型，一种类似于 .zip，另一种是可执行文件）你想要一个普通的 JAR 文件，而不是可执行文件，所以你首先需要编译获取 .class 文件的代码，然后打开命令提示符并按照此处的说明进行操作：[创建 Jar 文件](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)命令将如下所示：

jar cf myName.jar *.class

获得 jar 文件后，您需要在同一文件夹中创建一个 .xml 文件，并且需要将其命名为 build.xml。使用文本编辑器对其进行编辑。按照上面链接上的说明创建它。它看起来像这样：

```
//build.xml

<project name="MyProject">

<taskdef name="jarbundler"
classname="net.sourceforge.jarbundler.JarBundler" />

<target name="bundle">

<jarbundler dir="release"
        name="Apollo's Image Editor"
        mainclass="ImageEditorGUI" 
        jar="ApolloIE.jar"
        icon="Aperture.icns" />

</target>

</project> 
```

从那里（顺便说一下，我使用的是 Macbook Pro），您所要做的就是从该文件夹运行命令行：

蚂蚁束

它应该在一个名为 release 的文件夹中创建一个 .app 文件。总结一下：你只需要你的 .jar 文件和 build.xml 文件在同一个文件夹中，然后运行命令：ant bundle （或者你在 build.xml 文件中命名你的目标，我将它命名为 bundle）

祝你好运，希望这对那里的任何人都有帮助。

如果有人想知道，我将 JarBundler 生成的 Info.plist 放入我正在制作的目录中，它就可以工作了！所以这就是问题所在，我只是不知道如何正确格式化它......这里是：[Info.plist](http://i.stack.imgur.com/KWDoh.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:30:15.833

在 Mac OS X 上，[应用程序包](http://en.wikipedia.org/wiki/Application_bundle)是一个名称以 结尾的目录，`.app`其中包含应用程序使用的资源。该[游戏](http://robotchase.sourceforge.net/)是使用[构建脚本](http://sourceforge.net/p/robotchase/code/67/tree/trunk/build.xml)*在原位*构建捆绑包的示例。[此处](https://stackoverflow.com/a/8956715/230513)引用了其他参考资料。`ant`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T07:48:02.027

如果您想使用 Oracle Java 而不是 Apple 已停产的 Java，您应该使用[Java Application Bundler](https://java.net/projects/appbundler/)而不是 JarBundler。

另请参阅这些答案：

*   [应用程序在 Mac OS X 上使用 Apple 的 Java 6 而不是 Oracle 的 Java 7？](https://stackoverflow.com/questions/14806709/application-is-using-java-6-from-apple-instead-of-java-7-from-oracle-on-mac-os-x/15271448#15271448)
*   [为 Mac 捆绑 Java 7 .jar](https://stackoverflow.com/questions/12102716/bundle-a-java-7-jar-for-mac/15379462#15379462)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T00:18:44.150

为我工作！出于某种原因，我不能将 jarbundler`.jar`文件放在 Ant 区域中，而是必须从 build.xml 中显式指向它（我把它放在 中`<projectRoot>/jarbundler/jarbundler-2.2.0.jar`）。我的 build.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TripleWhammy" default="default" basedir=".">        
    <taskdef name="jarbundler"
             classname="net.sourceforge.jarbundler.JarBundler"
             classpath="jarbundler/jarbundler-2.2.0.jar" />

    <target name="bundle">
        <jarbundler dir="."
                    name="Triple Whammy"
                    mainclass="org.bigclue.TripleWhammy"
                    jar="target/triple-whammy-1.0-jar-with-dependencies.jar"
                    icon="triple-whammy.icns"/>
    </target>
</project> 
```

这在我的项目目录中创建了“Triple Whammy.app”。我的图标看起来不错。甜的。

现在我已经构建了一个简单的可分发骰子`.app`，是时候构建一些很棒的东西了......

（Mac OS X 10.6.8、Java 1.6.0_51、Ant 1.8.4；使用 Maven 3.0.4 及其“程序集”插件版本 2.4 构建了我的 .jar）。

# asp.net-mvc - IChartStorageHandler 实现，handler 不触发

> ID：14917909
> 
> 赞同：0
> 
> 时间：2013-02-17T04:14:30.553
> 
> 标签：asp.net-mvc, azure, httphandler, mschart, charts

我正在尝试通过 .Net4.5/MVC4 应用程序实现**IChartStorageHandler**以在基于[http://goo.gl/WAapl的 Azure 上使用](http://goo.gl/WAapl)

我无法达到我在下面的课程中设置的任何断点。所以我的问题是，“有什么技巧可以用来强制它”？谢谢！

[您可以在http://msdn.microsoft.com/en-us/library/dd456629.aspx](http://msdn.microsoft.com/en-us/library/dd456629.aspx)找到有关参数的详细信息

```
namespace MvcWebRole1.Codes
{
    public class ChartImageHandler : IChartStorageHandler
    {

        public ChartImageHandler()
        {
            throw new NotImplementedException();
        }

        #region IChartStorageHandler Members

        public void Delete(string key)
        {
            throw new NotImplementedException();
        }

        public bool Exists(string key)
        {
            throw new NotImplementedException();
        }

        public byte[] Load(string key)
        {
            throw new NotImplementedException();
        }

        public void Save(string key, byte[] data)
        {
            throw new NotImplementedException();
        }

        #endregion

    }
} 
```

web.config 部分 #1

```
 <appSettings>
    <add key="ChartImageHandler" value="handler=MvcWebRole1.Codes.ChartImageHandler, MvcWebRole1; webDevServerUseConfigSettings=false;" />
  </appSettings> 
```

web.config 部分 #2

```
 <system.webServer>
    <handlers>
      <remove name="ChartImageHandler"/>
      <add name="ChartImageHandler" path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="integratedMode" />
    </handlers>
  </system.webServer> 
```

控制器

```
public ActionResult ChartImage()
{
    // get data 
    string path = HttpContext.Server.MapPath("~/App_Data/Test.csv");
    IEnumerable<Bar> data = BarRepository.Get(path);

    // generate chart
    byte[] chartResult = data.Generator();

    // return the chart
    return File(chartResult, "image/png");
}

public static class ChartOperations
{
    private static Chart _chart1;

    public static byte[] Generator(this IEnumerable<Bar> data)
    {
        // initial variable tasks
        _chart1 = new Chart() {DataSource =  data.ToList()};

        // generate the chart
        DoTheHardWork();

        // save chart to memory string
        var image = new MemoryStream();
        _chart1.SaveImage(image);
        var result = image.GetBuffer();

        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:32:35.367

你能检查一下 system.web/httpHandlers 下是否有 ChartImageHandler 的条目吗？如果是，请删除它。

此外，它可能与此无关，但在您的 web.config 第 1 部分中，您不应该提及 storage=file; 以及使它看起来像：

```
<add key="ChartImageHandler" value="storage=file;handler=MvcWebRole1.Codes.ChartImageHandler, MvcWebRole1; webDevServerUseConfigSettings=false;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T13:55:00.410

也许您可以在创建类后立即启动调试器？

```
public ChartImageHandler()
{
    System.Diagnostics.Debugger.Launch();
    //throw new NotImplementedException();
} 
```

更多信息请访问[http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:38:41.273

这可能是一个愚蠢的问题，但是当您尝试在处理程序中打断点时，您实际上是在打开一个包含 ASP.NET 图表的页面吗？只有在加载图表时才会点击图表处理程序。

# jquery - jquery hover_caption插件隐藏透明度，是z-index

> ID：14917910
> 
> 赞同：0
> 
> 时间：2013-02-17T04:14:39.990
> 
> 标签：jquery, css, hover, z-index

我试图将黑色文本悬停在 ul 中的 imgs 上的白色透明胶片上，但我认为透明度隐藏在 img 后面。我正在使用 Corey Schires 的 hover_caption jquery 插件。这是我的代码的链接。

[http://blooming-citadel-2598.herokuapp.com/Residential/](http://blooming-citadel-2598.herokuapp.com/Residential/)

和 jquery 库 [https://github.com/coryschires/hover-caption](https://github.com/coryschires/hover-caption)

```
(function($) {
$.hover_caption = {
  defaults: {
    caption_font_size: '13px',
    caption_color: 'black',
    caption_bold: false,
    caption_default: "fix me"
   }
}

$.fn.extend({
    hover_caption: function(config) {

  var config = $.extend({}, $.hover_caption.defaults, config);

    return this.each(function() {

      var image = $(this);

      // set variable for wrapper div
      var width = image.width();
      var height = image.height();

      // variables for caption
      var caption_padding = width * .07; // dynamic margin depending on img width

      //  set caption to title attr if set
      var caption = image.attr('title') ? image.attr('title') : config.caption_default;

      // add necessary html and css
      image
        .css({
          'z-index': '0',
          'position': 'relative'
        })
       .wrap('<div>')
       .parent()
        .css({
          'width': width,
          'height': height
        })
        .prepend('<h3>'+ caption +'</h3>')
        .find('h3')
        .addClass('hover_caption_caption') // use this hook for additional styling
        .css({
          'padding': caption_padding,
          'color': config.caption_color,
          'width': width,
          'font-size': config.caption_font_size,
          'position': 'absolute',
          'margin': 0
        })
        .hide();

        if (config.caption_bold) { image.css('font-weight', 'bold') };

        // add hover event to toggle message
        image.parent().hover(function() {
          $(this).addClass('hover_caption').find('h3').show();
        }, function() {
          $(this).removeClass('hover_caption').find('h3').hide();
        });

      })
    }
})

})(jQuery); 
```

他在他的 jquery 中将 img 的 z-index 设置为 -1，我不得不将其更改为 0，这样图像就不会隐藏在他们的父母之下。这也打破了一切。图像嵌套在父悬停元素 div.hover_caption

```
div.hover_caption {
    background-image: url(/img/hover_image_white.gif);
    background-color: rgb(255,255,255, 0.8);
    z-index: 1000!important;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:23:55.797

div 中的 img 标签在逻辑上被放在 div 的背景之上。您无法使用 z-index 更改该行为。例如，您可以做的是添加`opacity: 0.4`到`div.hover_caption img`. 这将使您的图像透明，以便您的 div 上的背景通过它显示。

# selenium - 无法使用 Selenium::Remote::Driver 添加 cookie

> ID：14917914
> 
> 赞同：1
> 
> 时间：2013-02-17T04:15:13.590
> 
> 标签：selenium

我无法使用此模块添加 cookie。

即使我使用一个简单的例子.. $driver->add_cookie('foo','bar','/','my_server',0);

我得到错误：

（执行命令时出错：处理命令时发生未知的服务器端错误。：给定的“cookie”参数无效（警告：服务器未提供任何堆栈跟踪信息）命令持续时间或超时：20 毫秒构建信息：版本： '2.24.1'，修订版：'17205'，时间：'2012-06-19 17:28:14' 系统信息：os.name：'Windows 7'，os.arch：'amd64'，os.version： '6.1', java.version: '1.7.0_13' 驱动程序信息: driver.version: RemoteWebDriver 会话 ID: cdbf4aca4034937573ca0cea4a9e5977 在 C:/workspace/ST/t/TestCl.pm 第 21 行。）

我还尝试在我的主机文件中欺骗一个看起来真实的域名并将其指向服务器。然而，它根本没有帮助。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-17T02:53:56.053

对于阅读本文的任何人，cookie 都必须在字典中，如下所示：

```
add_cookie({‘name’ : ‘foo’, ‘value’ : ‘bar’, ‘path’ : ‘/’}) 
```

# jquery - 将 AJAX 加载指示器插入到具有多个 AJAX 调用的语句中

> ID：14917916
> 
> 赞同：1
> 
> 时间：2013-02-17T04:16:09.737
> 
> 标签：jquery

将 AJAX 加载指示器插入具有多个 AJAX 调用的语句的最佳方法是什么？

例如：

```
$("#search_building").on("change blur", function () {
    var building = $("#search_building").val();
    var room = $("#search_room").val();
    var dept = $("#dept").val();
    var dataString = 'room=' + room + '&' + 'building=' + building + '&' + 'dept=' + dept;
    $.ajax({
        type: "POST",
        url: "process_building.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#search_room').html(html);
        }
    });
    $.ajax({
        type: "POST",
        url: "process_timetableMon.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_mon').html(html);
        }
    });
         $.ajax({
        type: "POST",
        url: "process_timetableTue.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_tue').html(html);
        }
    });
        $.ajax({
        type: "POST",
        url: "process_timetableWed.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_wed').html(html);
        }
    });
        $.ajax({
        type: "POST",
        url: "process_timetableFri.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#grid2_wed').html(html);
        }
    });
        $.ajax({
        type: "POST",
        url: "process_roomList.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#list2').html(html);
        }
    });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T05:18:02.463

从我的[博客](http://thebigredgeek.blogspot.com/2013/02/ajax-indicators.html)：

随着您的代码库变得越来越难以阅读和维护，使用计数器和其他不合标准的方法将鼓励代码功能障碍。实现这一点的理想方法是使用事件驱动的方法。它更容易维护，并导致更少的意大利面条代码。你可以很容易地实现这样的事情：

```
//First, we need an object that will contain our 'event domain'
var EventDomain = new function(config,callback){

this.__listeners = {}; //this will store references to functions associated to events

this.on = function(event,listener){ //here, we provide a member that binds 
                                    //a 'listener' function to an event string
    if (typeof this.__listeners[event] == "undefined"){
        this.__listeners[event] = [];
    }
    this.__listeners[event].push(listener);
};
this.emit = function(event,params){ //here, we provide a member that 'emits' an
                                    //event string, calling any 'listener' functions
                                    //and passing a parameter object 
                                    //{param1: val1, param2:val2, paramN, valN} 
    if(typeof event == "string"){
        event = { type: event };
    }
    if(!event.target){
        event.target = this;
    }

    if(!event.type){
        throw new Error("Event object missing 'type' property.");
    }
    if(this.__listeners[event.type] instanceof Array){
        var listeners = this.__listeners[event.type];
        for (var i=0, len=listeners.length; i < len; i++){
            listeners[i](params);
        }
    }
};
this.removeListener = function(type, listener){ //here, we provide a member that allows
                                                //us to remove a 'listener' function 
                                                //from an event
    if(this.__listeners[type] instanceof Array){
        var listeners = this.__listeners[type];
        for (var i=0, len=listeners.length; i < len; i++){
            if (listeners[i] === listener){
                listeners.splice(i, 1);
                break;
            }
        }
    }
};
this.removeAllListeners = function(type){ //here, we provide a member that allows
                                          //us to remove ALL 'listener' functions
                                          //from an event
    if(this.__listeners[type] instanceof Array){
        delete this.__listeners[type];
    }
};
}; 
```

现在我们有了一个事件域，我们可以将它与上面的代码片段一起使用。但首先，让我们创建一个对象来充当我们的 ajax 调用的控制器：

```
var AjaxController = new function(){  
    var counter;  //create a private member called counter
    this.onLoad = function(fn){ //here, we provide a member to specify what to do
                                //when ajax requests begin
        EventEmitter.on('ajax_loading',(function(fn){ //bind 'ajax_loading' event to an  
                                                      //ajax loading indicator
            return function(){ //yet another closure
                if(counter<1){ //obviously, we only want to do something on the first
                               //load, not every single time.  Otherwise, you'll end
                               //end up trying to show the exact same loading animation
                               //for each ajax call
                    fn();
                }
                counter++;
            };
        })(fn));
    };

    this.onComplete = function(fn){ //here we provide a member to specify what to do
                                    //when ALL ajax requests have finished
        EventEmitter.on('ajax_complete',(function(fn){ //bind the 'ajax_complete' event 
                                                       //to a loading indicator
            return function(){ //yet another closure
                counter--; //decrement concurrent loading
                if(counter<1){ //its only finished once the counter is 0!
                   fn();
                }
            }
        })(fn));
    };

    var constructor = function(){ //good object oriented programming uses constructors!
        counter = 0;
        //Now, lets overload the original $.ajax method to provide functionality
        //for our event driven approach
        $.ajax = (function(ajax){ //this is called a 'closure'.  
                                  //We pass it the original function and it wraps and 
                                  //returns it, overloading the original method                                       
            function overloadAjax(params){ //this is our overloading function
                  if(params.success){ //if there is a success parameter passed
                                      //to the ajax call, overload that as well
                                      //to emit the 'ajax_complete' event
                     params.success = (function(success){
                         function overloadSuccess(data){
                             EventDomain.emit('ajax_complete');
                             success(data);
                         }
                         return overloadSuccess; //return and overload success
                     })(params.success);
                  }
                  EventDomain.emit('ajax_loading'); //emit the 'ajax_loading' event
                                                    //for each ajax call
                  ajax(params);
            }
            return overloadAjax; //here we return 'overload' back to $.ajax, overloading       
                                 //the original
        })($.ajax);

    }
    constructor(); //we call the constructor after all members have been prototyped 
} 
```

现在我们已经为自己创建了一个很好的、可重用的 ajax 加载器工具包，让我们使用它：

```
AjaxController.onLoad(function(){
   //put some code here to do DOM manipulation to add a loader, or however you
   //want to 'indicate' ajax loading
});

AjaxController.onComplete(function(){
   //put some code here to do some DOM manipulation to remove your loader, or however
   //you want to 'indicate' that ajax loading is complete
}); 
```

现在，它只是工作：

```
$("#search_building").on("change blur", function () {

var building = $("#search_building").val();
var room = $("#search_room").val();
var dept = $("#dept").val();
var dataString = 'room=' + room + '&' + 'building=' + building + '&' + 'dept=' + dept;
$.ajax({
    type: "POST",
    url: "process_building.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#search_room').html(html);
    }
});
$.ajax({
    type: "POST",
    url: "process_timetableMon.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#grid2_mon').html(html);
    }
});
     $.ajax({
    type: "POST",
    url: "process_timetableTue.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#grid2_tue').html(html);
    }
});
    $.ajax({
    type: "POST",
    url: "process_timetableWed.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#grid2_wed').html(html);
    }
});
    $.ajax({
    type: "POST",
    url: "process_timetableFri.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#grid2_wed').html(html);
    }
});
    $.ajax({
    type: "POST",
    url: "process_roomList.php",
    data: dataString,
    cache: false,
    success: function (html) {
        $('#list2').html(html);
    }
});
    }); 
```

在前端将事件驱动编程与面向对象编程相结合的巨大好处是，您最终可以让您的开发人员腾出更多的时间来进行更多的实际内容创建和更少的问题解决。创建一个可重用的框架需要更多的时间开始，但在未来会有指数级的时间/质量优势。如果您想在这些概念方面获得更多帮助，请随时给我发电子邮件：rhyneandrew@gmail.com。我很乐意免费为您提供帮助；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:18:42.657

您可以使用计数器来记录正在进行的 AJAX 请求的数量。当计数器大于 1 时，显示加载指示器。每次收到响应，减 1。当计数器达到 0 时，隐藏加载指示器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:25:17.483

`$.ajax()`您可以在通话中使用类似这样的东西：

```
$.ajaxSetup({
    beforeSend:function(){
        // show image here
        $("#busy").show();
    },
    complete:function(){
        // hide image here
        $("#busy").hide();
    }
}); 
```

# android - 未找到 ID 的 Android 片段

> ID：14917919
> 
> 赞同：3
> 
> 时间：2013-02-17T04:16:34.720
> 
> 标签：android, view, instance, fragment

我正在尝试为应用程序创建双窗格/单窗格设置。在我将所有内脏放入碎片之前，它工作正常，我不知道是什么导致它不起作用。当我进行方向更改时，问题就出现了。起初，由于某种原因，它没有重新创建视图。它会调用onCreateView，但我无法在视图内的listview上获得句柄并且变得空（我知道我的布局对于横向和纵向都是正确的，因为如果它从那里开始，它可以在纵向和横向上工作）。所以，我所做的是将 setRetainInstance 添加到 true，认为这可以解决我的问题。好吧，这带来了另一个问题，我现在没有为 ID 找到视图。

我认为现在发生的事情是它试图将自己重新附加到它在方向改变之前拥有的 ID，并且它不像现在在不同的布局上那样存在。我尝试创建一个新片段并添加它，但这也不起作用。我正在努力使用几乎无法使用的 Android 的思想片段系统。任何帮助，将不胜感激。这是相关代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.study_guide);
    //Create The Ad Service

    //Check to see if the view is landscape or portrait
    if (this.findViewById(R.id.singlePaneStudyGuide) != null) {
        mDualPane = false;
    } else if (this.findViewById(R.id.doublePaneStudyGuide) != null) {
        mDualPane = true;
    }
    LinearLayout layout = (LinearLayout)findViewById(R.id.addbox);
    adView = new AdView(this,AdSize.SMART_BANNER,"a1511f0352b42bb");
    layout.addView(adView);
    AdRequest r = new AdRequest();
    r.setTesting(true);
    adView.loadAd(r);

    //Inflate Fragments depending on which is selected
    //if (savedInstanceState == null) {
        FragmentManager fm = this.getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        SGListFragment newFrag = new SGListFragment();

        if (mDualPane == true) {
            ft.add(R.id.sgScrollContainer, newFrag, "SgListView").commit();
        } else {
            ft.add(R.id.singlePaneStudyGuide, newFrag, "SgListView").commit();

        }
        fm.executePendingTransactions();
    //}
} 
```

我尝试使用片段管理器查找片段并将其重新分配给不同的布局，但由于某种原因，它仍在寻找旧布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:30:27.243

你必须重写你的代码如下：

```
 //Inflate Fragments depending on which is selected
    //if (savedInstanceState == null) {
    FragmentManager fm = this.getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    // here the trick starts 
    int oldId = (mDualPane == true) ? R.id.singlePaneStudyGuide 
                                    : R.id.sgScrollContainer;
    Fragment oldFragment = fm.findFragmentById(oldId);
    if(null != oldFragment){
        ft.remove(oldFragment);
        ft.commit();
        fm.executePendingTransactions();
        ft = fragmentManager.beginTransaction();
    }
    // end of tricks
    SGListFragment newFrag = new SGListFragment();

    if (mDualPane == true) {
        ft.add(R.id.sgScrollContainer, newFrag, "SgListView").commit();
    } else {
        ft.add(R.id.singlePaneStudyGuide, newFrag, "SgListView").commit();

    } 
```

# mysql - 如何在rails中设置外键？

> ID：14917921
> 
> 赞同：0
> 
> 时间：2013-02-17T04:16:43.020
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, foreign-keys, rails-activerecord

我正在尝试保存具有外键属性的对象。我不明白为什么它不起作用。外键在数据库中被定义为非空。

```
class Store < ActiveRecord::Base
  attr_accessible :latitude, :longitude, :description
  validates :store_group, :presence => true
  validates :description, :presence => true, :length => {:maximum => 500}
  validates :latitude,    :presence => true
  validates :longitude,   :presence => true

  belongs_to :store_group
end

class StoreGroup < ActiveRecord::Base
  attr_accessible :name, :description, :image
  validates :name, :presence => { :message => "Store group can not be empty" }
end 
```

所以，我正在尝试保存一家商店：

```
group = StoreGroup.new(:name=>"name",:description=>"description",:image=>"image")
store = Store.new(:store_group=>group,:latitude=>1,:longitude=>1,:description=>"description")
store.save 
```

但是，MySQL 引发了一个异常：

```
Mysql2::Error: Column 'store_group' cannot be null: INSERT INTO `stores` (`created_at`, `store_group`, `description`, `latitude`, `longitude`, `updated_at`) VALUES ('2013-02-17 04:09:15', NULL, 'description', 1.0, 1.0, '2013-02-17 04:09:15') 
```

为什么？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:42:57.693

您正在尝试`store_group`通过`store`. 因此使用：

```
accepts_nested_attributes_for :store_group 
```

在你的`Store`模型中

[在此处阅读有关 accept_nested_attributes_for 的信息](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:23:09.700

首先，从长远来看，如果您将 a 添加`has_many :stores`到 StoreGroup 可能会更容易，例如，如果您想要检索属于特定 StoreGroup 的所有商店。其次，您应该通过它的 StoreGroup 添加商店，并且由于您已经有一个关联，所以它相当简单（注意对 的更改`Store.create`）：

```
group = StoreGroup.create(name: "name", description: "description", image: "image")
group.stores << Store.create(lat: 1, long: 1, desc: "description") 
```

此方法将自动设置`:store_group_id`并保存新的 Store 实例作为其 StoreGroup 的“子”。请注意，您还需要更改代码以考虑现有的 StoreGroups，以便以后可以将商店添加到现有的 StoreGroups。在 Rails 3.2.x 中使用`.first_or_create`with`.where(...)`子句是惯用的，尽管在以前的 Rails 版本中存在具有创建权限的动态查找器（例如，find_or_create_by_name_and_store_group_id）。

最后，删除，`validates :store_group`因为关联验证不能那样工作。如果你真的必须，使用`validates :store_group_id`.

# dojo - 用dojo.clone修改后如何获取原始对象？

> ID：14917922
> 
> 赞同：0
> 
> 时间：2013-02-17T04:16:46.993
> 
> 标签：dojo

我有一个从服务返回的对象`studentInfo`（它的 id 为 1）。

我克隆如下：

```
this.studentsInformation=dojo.clone(studentInfo); 
```

现在我尝试更新克隆的对象 -`studentInfo` 我已经更新（比如 id 1）并存储在数据库中。如果我创建一个新的学生信息并尝试在数据库中更新，它必须使用 id 2。但对象的 id 为 1...

而且如果我打印this.studentsInformation，它不会显示原始对象..它只有修改过的对象..

所以我想要修改后的原始对象，也想在克隆后存储更新的信息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:56:28.073

为什么不在克隆中存储对原始对象的引用？

```
this.studentsInformation=dojo.clone(studentInfo);
this.studentsInformation.myMama=studentInfo; 
```

卢西安

# hibernate - 未找到组件类休眠

> ID：14917924
> 
> 赞同：1
> 
> 时间：2013-02-17T04:17:23.900
> 
> 标签：hibernate, netbeans, jasper-reports, ireport

每当我尝试将 ireport 与 netbeans 中的休眠连接时，我都会收到错误消息“找不到组件类：Sustainability.ProductionSavingId”。该程序在我运行时没有显示任何错误，但是当我尝试使用休眠将 ireport 连接到数据库时，它会引发错误。我已经添加了所需的类路径和 jar 文件。

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Feb 1, 2013 7:21:28 PM by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
    <class name="Sustainability.Productionsaving" table="productionsaving"                          catalog="gdp">
        <composite-id name="id" class="Sustainability.ProductionsavingId">
            <key-property name="categoryName" type="string">
                <column name="CategoryName" length="25" />
            </key-property>
            <key-property name="date" type="timestamp">
                <column name="Date" length="19" />
            </key-property>
        </composite-id>
        <many-to-one name="users" class="Sustainability.Users" fetch="select">
            <column name="Username" length="20" />
        </many-to-one>
        <many-to-one name="category" class="Sustainability.Category" update="false" insert="false" fetch="select">
            <column name="CategoryName" length="25" not-null="true" />
        </many-to-one>
        <property name="savingAmount" type="java.lang.Double">
            <column name="SavingAmount" precision="22" scale="0" />
        </property>
        <property name="quantity" type="java.lang.Double">
            <column name="Quantity" precision="22" scale="0" />
        </property>
        <property name="unit" type="string">
            <column name="Unit" length="5" />
        </property>
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Feb 1, 2013 7:21:28 PM by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
    <class name="Sustainability.Productionsaving" table="productionsaving"                          catalog="gdp">
        <composite-id name="id" class="Sustainability.ProductionsavingId">
            <key-property name="categoryName" type="string">
                <column name="CategoryName" length="25" />
            </key-property>
            <key-property name="date" type="timestamp">
                <column name="Date" length="19" />
            </key-property>
        </composite-id>
        <many-to-one name="users" class="Sustainability.Users" fetch="select">
            <column name="Username" length="20" />
        </many-to-one>
        <many-to-one name="category" class="Sustainability.Category" update="false" insert="false" fetch="select">
            <column name="CategoryName" length="25" not-null="true" />
        </many-to-one>
        <property name="savingAmount" type="java.lang.Double">
            <column name="SavingAmount" precision="22" scale="0" />
        </property>
        <property name="quantity" type="java.lang.Double">
            <column name="Quantity" precision="22" scale="0" />
        </property>
        <property name="unit" type="string">
            <column name="Unit" length="5" />
        </property>
    </class>
</hibernate-mapping>

/**
 * Productionsaving generated by hbm2java
 */
public class Productionsaving  implements java.io.Serializable {

     private ProductionsavingId id;
     private Users users;
     private Category category;
     private Double savingAmount;
     private Double quantity;
     private String unit;

    public Productionsaving() {
    }

    public Productionsaving(ProductionsavingId id, Category category) {
        this.id = id;
        this.category = category;
    }
    public Productionsaving(ProductionsavingId id, Users users, Category category, Double savingAmount, Double quantity, String unit) {
       this.id = id;
       this.users = users;
       this.category = category;
       this.savingAmount = savingAmount;
       this.quantity = quantity;
       this.unit = unit;
    }

    public ProductionsavingId getId() {
        return this.id;
    }

    public void setId(ProductionsavingId id) {
        this.id = id;
    }
    public Users getUsers() {
        return this.users;
    }

    public void setUsers(Users users) {
        this.users = users;
    }
    public Category getCategory() {
        return this.category;
    }

    public void setCategory(Category category) {
        this.category = category;
    }
    public Double getSavingAmount() {
        return this.savingAmount;
    }

    public void setSavingAmount(Double savingAmount) {
        this.savingAmount = savingAmount;
    }
    public Double getQuantity() {
        return this.quantity;
    }

    public void setQuantity(Double quantity) {
        this.quantity = quantity;
    }
    public String getUnit() {
        return this.unit;
    }

    public void setUnit(String unit) {
        this.unit = unit;
    }
}

    import java.util.Date;

/**
 * ProductionsavingId generated by hbm2java
 */
public class ProductionsavingId  implements java.io.Serializable {

     private String categoryName;
     private Date date;

    public ProductionsavingId() {
    }

    public ProductionsavingId(String categoryName, Date date) {
       this.categoryName = categoryName;
       this.date = date;
    }

    public String getCategoryName() {
        return this.categoryName;
    }

    public void setCategoryName(String categoryName) {
        this.categoryName = categoryName;
    }
    public Date getDate() {
        return this.date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

   public boolean equals(Object other) {
         if ( (this == other ) ) return true;
         if ( (other == null ) ) return false;
         if ( !(other instanceof ProductionsavingId) ) return false;
         ProductionsavingId castOther = ( ProductionsavingId ) other; 

         return ( (this.getCategoryName()==castOther.getCategoryName()) || ( this.getCategoryName()!=null && castOther.getCategoryName()!=null && this.getCategoryName().equals(castOther.getCategoryName()) ) )
 && ( (this.getDate()==castOther.getDate()) || ( this.getDate()!=null && castOther.getDate()!=null && this.getDate().equals(castOther.getDate()) ) );
   }

   public int hashCode() {
         int result = 17;

         result = 37 * result + ( getCategoryName() == null ? 0 : this.getCategoryName().hashCode() );
         result = 37 * result + ( getDate() == null ? 0 : this.getDate().hashCode() );
         return result;
   }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:37:21.240

该错误意味着您正在引用类路径中不存在的类。确保使用正确的包名和类名引用类。您的包裹名称对我来说似乎不标准。它应该是这样的

`com.mycompany.whatever.Sustainability`

所以请确保你不会错过那个。我还注意到在您粘贴的错误`ProductionSavingId`中，您显示的 hbm 的大小写不同。也许它的大小写不匹配。

# java - 如何评估 Java 中递归算法的效用？

> ID：14917925
> 
> 赞同：5
> 
> 时间：2013-02-17T04:17:33.450
> 
> 标签：java, algorithm, recursion

## 背景：

我正在尝试学习算法和java。运行 320x320 的网格，100 次试验的运行速度比非递归 Quick-Union 实现快 5 倍。但是，在大约 400x400（160,000 个站点）的网格之上，我有堆栈溢出错误。

我知道java没有针对尾递归进行优化（更不用说非尾递归了）。但是，我认为有时可以选择递归算法而不是非递归版本，因为它可以运行得更快且同样安全。

请记住，我只是在学习这些东西，我的代码可能不是最优的。但是，我将其包括在内是为了更好地理解我的问题。

## 问题

何时可以在 Java 应用程序中安全地使用递归算法（假设它比非递归替代方案运行得更快），评估的过程是什么？

## 递归与联合查找实现的统计数据

（注意：2x Ratio 就是上一个当前运行时间除以上一个运行时间）

```
|-----------|-----------|------------|-------------|-------------|
|     N     | Recursive | Recursive  | Quick-Union | Quick-Union |
|  (sites)  |    time   |  2x Ratio  |    time     |  2x Ratio   |
|===========|===========|============|=============|=============|
|     196   |      35   |            |      42     |             |
|     400   |      25   |    0.71    |      44     |     1.05    |
|     784   |      45   |    1.80    |      46     |     1.05    |
|    1600   |     107   |    2.38    |      86     |     1.87    |
|    3136   |      48   |    0.45    |     113     |     1.31    |
|    6400   |      75   |    1.56    |     303     |     2.68    |
|   12769   |     183   |    2.44    |     858     |     2.83    |
|   25600   |     479   |    2.62    |    2682     |     3.13    |
|   51076   |    1253   |    2.62    |    8521     |     3.18    |
|  102400   |    4730   |    3.77    |   27256     |     3.20    |
|-----------|-----------|------------|-------------|-------------| 
```

## 递归类

```
public class PercolateRecur implements Percolation {
  // the site has been opened for percolation but is not connected
  private final int OPEN = 0;
  // the site is not open for percolation (default state)
  private final int BLOCKED = -1;
  // the matrix that will be percolated. Values default to `BLOCKED = -1`
  // two sites that are connected together share the same value.
  private int[][] matrix;
  // the size of the sides of the matrix (1 to n)
  private int size;
  // whether water can flow from top to bottom of the matrix
  private boolean percolated;

  public PercolateRecur(int N) {
    percolated = false;
    size = N;
    initMatrix();
  }

  /**
   * initializes the matrix to default values
   */
  private void initMatrix() {
    matrix = new int[size+1][size+1];
    // open up the top of the matrix
    for (int x = 1; x < size+1; x++)
      matrix[x][0] = x;

    // set all values in matrix to closed
    for (int x = 1; x < size+1; x++)
      for (int y = 1; y < size+1; y++)
        matrix[x][y] = BLOCKED;
  }

  /**
   * indicates site (x,y) is a valid coordinate
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return boolean
   */
  private boolean isValid(int x, int y) {
    return x > 0 && x < size+1 && y > 0 && y < size+1;
  }

  /**
   * returns value of site above (x,y)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return int value
   */
  private int above(int x, int y) {
    if (y <= 0)
      return BLOCKED;
    else
      return matrix[x][y-1];
  }

  /**
   * returns value of site below (x,y)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return int value
   */
  private int below(int x, int y) {
    if (y >= size)
      return BLOCKED;
    else
      return matrix[x][y+1];
  }

  /**
   * returns value of site left of (x,y)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return int value
   */
  private int left(int x, int y) {
    if (x <= 0)
      return BLOCKED;
    return matrix[x-1][y];
  }

  /**
   * returns value of site right of (x,y)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return int value
   */
  private int right(int x, int y) {
    if (x >= size)
      return BLOCKED;
    else
      return matrix[x+1][y];
  }

  /**
   * connects (x,y) to open adjacent sites
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   */
  private void connect(int x, int y) {
    if (isFull(x,y))
      return;
    if (above(x,y) > OPEN)
      matrix[x][y] = above(x, y);
    else if (below(x, y) > OPEN)
      matrix[x][y] = below(x, y);
    else if (left(x, y) > OPEN)
      matrix[x][y] = left(x, y);
    else if (right(x, y) > OPEN)
      matrix[x][y] = right(x, y);
    else if (matrix[x][y] == BLOCKED)
      matrix[x][y] = OPEN;
  }

  /**
   * recursively connects open sites in same group as (x,y)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   */
  private void expand(int x, int y) {
    if (!isFull(x, y))
      return;
    if (above(x,y) == OPEN)
      openWith(x,y-1, matrix[x][y]);
    if (below(x,y) == OPEN)
      openWith(x,y+1, matrix[x][y]);
    if (left(x,y) == OPEN)
      openWith(x-1,y, matrix[x][y]);
    if (right(x,y) == OPEN)
      openWith(x+1,y, matrix[x][y]);
  }

  /**
   * opens a site (x,y) on the matrix
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   */
  public void open(int x, int y) {
    if (percolated || !isValid(x, y))
      return;
    connect(x, y);
    expand(x, y);
  }

  /**
   * opens a site with given value
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @param val value of point
   */
  private void openWith(int x, int y, int val) {
    matrix[x][y] = val;
    open(x, y);
  }

  /**
   * Returns whether site (x,y) is open
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return true if not blocked
   */
    public boolean isOpen(int x, int y) {
    return matrix[x][y] > BLOCKED;
  }

  /**
   * Returns whether site (x,y) is full (connected to the top)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return true if is full
   */
  public boolean isFull(int x, int y) {
    return matrix[x][y] > OPEN;
  }

  /**
   * indicates whether site is blocked (not open)
   * @param x x-portion of x/y coordinate
   * @param y y-portion of x/y coordinate
   * @return true if blocked
   */
  public boolean isBlocked(int x, int y) {
    return matrix[x][y] == BLOCKED;
  }

  /**
   * indicates whether water can flow from top to bottom of matrix
   * @return true if matrix is percolated
   */
  public boolean percolates() {
    for (int x = 1; x <= size; x++)
      if (matrix[x][size] > OPEN)
        percolated = true;
    return percolated;
  }

  /**
   * prints the matrix to the command line
   */
  public void print() {
    for (int y = 1; y < size+1; y++) {
      System.out.println();
      for (int x = 1; x < size+1; x++) {
        if (matrix[x][y] == BLOCKED)
          System.out.print("XX ");
        else if (matrix[x][y] < 10)
          System.out.print(matrix[x][y] + "  ");
        else
          System.out.print(matrix[x][y] + " ");
      }
    }
    System.out.println();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T05:34:27.533

在 Java 中实现递归算法的问题之一是 Java 平台没有执行标准的“尾调用消除”优化。这意味着深度递归需要一个深度堆栈。而且由于 Java 线程堆栈不会“增长”，这意味着您很容易受到堆栈溢出的影响。

有两种解决方法：

*   通过使用`-Xss`命令行上的选项或在构造函数中显式提供（更大的）堆栈大小来增加线程堆栈大小`Thread`。

*   在您的 Java 代码中显式地实现尾调用消除……这至少可以说是丑陋的。

在您的情况下，第一个解决方法将为您提供“真正递归”的度量。第二个......好吧，该算法将不再是真正的递归，但这就是您可以做的，以使递归算法在 Java 中适用于“深度”问题。

注意：您始终可以将 Java 中的递归算法转换为等效的迭代算法，该算法使用“模拟堆栈”数据结构来保存递归状态。两个版本的算法复杂度应该相同。也许您也应该尝试这种方法，并将“模拟堆栈”变体作为第三对列包含在您的评估中。

# c# - C# 中 PowerOf 函数的当前上下文中不存在变量 (iUserNum2)

> ID：14917926
> 
> 赞同：0
> 
> 时间：2013-02-17T04:17:41.103
> 
> 标签：c#

/* 你好我是一名学生，试图做一些练习编程任务，但我似乎无法让我的一个变量在函数中工作，我需要用户输入变量的值，但它想要我们在 PowerOf 函数而不是 Main 函数中声明它，很抱歉成为 n00b，但任何帮助将不胜感激。[：*/

```
using System;

namespace ThePowerOf
{
    class MainClass
    {
        public static void Main (string[] args)
        {

            string sUserInput;
            int iUserNum1 = 0;
            int iUserNum2 = 0;
            int iPower = 0;

            Console.WriteLine ("Enter a number");
            sUserInput = Console.ReadLine();
            iUserNum1 = Int16.Parse(sUserInput);

            Console.WriteLine ("Enter a number");
            sUserInput = Console.ReadLine();
            iUserNum2 = Int16.Parse(sUserInput);

            iPower = PowerOf(iUserNum1);

            Console.WriteLine((iUserNum1) + (" To the power of ") + (iUserNum2) + (" = ") + (iPower));
            Console.ReadLine();

        }

        static int PowerOf(int iUserNum1)

        {   

        for (int i = 0; i < iUserNum2; ++i)

        {

        iUserNum1 = (iUserNum1 * iUserNum1);

        }       

        return iUserNum1;   

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:23:35.063

您的函数声明方式错误，如何通过传递单个参数来计算提高到数字的幂（除非其中一个值是常数）

固定方法减速：

```
 static int PowerOf(int iUserNum1, int iUserNum2)
    {
        int result = 1;
        for (int i = 0; i < iUserNum2; i++)
        {
            result = result*iUserNum1;
        }
        return result;
    } 
```

并改变你调用函数的方式，用 2 个参数正确调用它！

```
 static void Main()
    {
        string sUserInput;
        int iUserNum1 = 0;
        int iUserNum2 = 0;
        int iPower = 0;

        Console.Write("Enter a number : ");
        sUserInput = Console.ReadLine();
        iUserNum1 = Int32.Parse(sUserInput); // iUserNum1 is declared as 'int' so Int32.Parse()

        Console.Write("Enter a number to waise power to :");
        sUserInput = Console.ReadLine();
        iUserNum2 = Int32.Parse(sUserInput); // iUserNum2 is declared as 'int' so Int32.Parse()

        iPower = PowerOf(iUserNum1, iUserNum2);

        Console.WriteLine(iUserNum1 + " To the power of " + iUserNum2 + " = " + iPower);
        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:23:45.047

将您的声明移至`iUserNum2`班级级别：

```
class MainClass
{
    int iUserNum2 = 0; // PUT IT HERE
    public static void Main (string[] args)
    { 
```

方法中声明的变量不共享。在类中声明的变量是共享的（前提是它们是非静态的并且在非静态方法中使用......但这是供您稍后学习的）。

# java - Java：通过套接字的DataOutputStream在另一端是错误的（这是Python）

> ID：14917928
> 
> 赞同：0
> 
> 时间：2013-02-17T04:18:05.380
> 
> 标签：java, python, sockets, hwnd

我有一个`Socket`,`s`和一个`long`, `1312992`。

```
DataOutputStream out = new DataOutputStream(s.getOutputStream());
out.writeLong(hwnd);
out.flush(); 
```

正在做

```
self.hwnd, = struct.unpack('!Q', self.appletconn.recv(8))
print(self.hwnd) 
```

在（python）接收端打印出`51`. 我认为我的发送代码有问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:46:37.840

使用 tcpdump 或 wireshark 之类的数据包捕获工具并检查线路上发生了什么。我猜，您可能在发送和/或接收端混合了文本和二进制文件。

# ruby - 遍历数组数组返回与预期不同的值

> ID：14917934
> 
> 赞同：1
> 
> 时间：2013-02-17T04:19:09.397
> 
> 标签：ruby, arrays, range

```
1.9.3-p286 :039 > (0...x.right.first.chem_species.size).each do |atom|
1.9.3-p286 :040 >     puts x.right.first.chem_species[atom]
1.9.3-p286 :041?>   end
H
2
O
1
 => 0...2 
1.9.3-p286 :042 > x.right.first.chem_species[0]
 => ["H", 2] 
1.9.3-p286 :043 > 
```

为什么 puts 不输出 `["H",2]`then `["O",1]`。（作为第二种方法返回）。这似乎不对

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T04:53:45.033

来自[精美手册](https://ruby-doc.org/core/Kernel.html#method-i-puts)：

> **puts(obj, ...) → 无**
> 
> 相当于
> 
> ```
> $stdout.puts(obj, ...) 
> ```

对于[`IO.puts`](https://ruby-doc.org/core/IO.html#method-i-puts)：

> **puts(obj, ...) → 无**
> 
> [...] 如果使用数组参数调用，则将每个元素写入新行。

所以`puts [1,2]`打印`1`并`2`用换行符分隔。

当你这样做时：

```
1.9.3-p286 :042 > x.right.first.chem_species[0]
 => ["H", 2] 
```

您正在让`irb`显示数组并将`irb`用于`inspect`生成输出并且`['H', 2].inspect`是`["H", 2]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:33:48.627

看起来像：

```
(0...x.right.first.chem_species.size).each 做 |atom|
  放 x.right.first.chem_species[atom]
结尾

```

可以更清楚地写成：

```
x.right.first.chem_species.each 做 |atom|
  放原子
结尾

```

# linux - $PATH 相对于别名的优势

> ID：14917942
> 
> 赞同：6
> 
> 时间：2013-02-17T04:20:23.257
> 
> 标签：linux, shell, unix

我对 Linux 和 Unix 比较陌生。在互联网的帮助下，我终于弄清楚了我的工作方式`$PATH`和别名。`.bashrc`

但我真的找不到任何描述何时使用哪个的东西。

假设我在 Library/Frameworks 中安装了 Python3.3 并且可执行文件是 `/Library/Frameworks/Python.framework/Versions/3.3/bin/python3`，但我想通过`python3`在终端中键入来执行 python 3.3。

当我正确理解它时，（至少）有三种方法可以实现这一点：

1）我在我的 .bashrc 中修改 $PATH：

```
export PATH=/Library/Frameworks/Python.framework/Versions/3.3/bin:${PATH} 
```

2）我在我的 .bashrc 中设置了一个别名：

```
alias python3=/Library/Frameworks/Python.framework/Versions/3.3/bin 
```

3）创建符号链接（symlink）：

```
ln -s /Library/Frameworks/Python.framework/Versions/3.3/bin /usr/local/bin 
```

您会说什么（根据您的经验）是“推荐”的方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T04:26:33.393

放入`python3`路径是在文件系统中的任何位置调用它的正确方法。符号链接是将命令更改为`python`并使脚本不依赖于版本的最佳方法（您可以运行依赖于 python 的脚本使用符号链接和需要 python 3.0 的脚本特别使用 python3，即使在您的计算机上它们是一样的东西）。符号链接仍然是文件系统中的文件，因此它们仍然需要在您的路径中。

当您尝试创建某种与命令行实用程序的默认行为不同的行为时，我只看到使用的别名，例如默认`ls`添加 -a 的别名。

符号链接也存储在文件系统中，因此一旦创建它们就存在于所有其他登录的用户中，而别名仅适用于定义它们的登录用户。他们还可以应用文件权限。

这是[一篇有趣的文章](http://digitalformula.net/articles/pimp-my-prompt-like-paul-irish/4/)，介绍了您可以通过`.bash_profile`包括一些很棒的别名对终端执行的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T07:34:36.423

首先，没有理由将 Python 安装在`/Library/Frameworks/`目录中。我的建议是（至少对于初学者来说）你不应该添加像你的`/Library`. 如果你从源代码编译它，你应该用标准[构建它](http://docs.python.org/3/using/unix.html#building-python)`./configure`（它可能进入`/usr/local/`）

我不太了解从源代码编译 Python，但大多数 Linux 源代码默认`./configure`-d 到一个`/usr/local/`前缀，所以它们的二进制文件`/usr/local/bin/`通常已经默认在你的`PATH`

一些 Linux 发行版有一个`/etc/profile`which 间接地，如果该目录`$HOME/bin/`存在，则将其添加到您的`PATH`; 在这种情况下，只需添加二进制文件和脚本（或符号链接），这是最简单的方法。

我的一般建议是避免使用非常长或非常具体的`PATH`. 特别是，在您`PATH`的每个产品中添加一个目录是恕我直言的错误。请参阅例如[GNU 编码标准的目录变量部分](http://www.gnu.org/prep/standards/html_node/Directory-Variables.html)，并保持`PATH`简短。就我个人而言，我只在`/usr/local/bin/`（系统范围内）或中添加程序`$HOME/bin/`，也许作为符号链接（所以我不改变我的`PATH`，因为它已经包含了`/usr/local/bin/`和`$HOME/bin`）。

^(根据过去的经验，很长`PATH`是一场噩梦，会减慢你的交互式 shell)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:28:27.857

我建议使用别名，如果您使用不同版本的 Python，这将更容易发生冲突。shell 将查找 PATH 变量，并在它与 Python 的可执行文件匹配的任何地方执行它。别名必须放在您的 shell 配置文件中，例如`.bash_profile`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T03:03:58.167

谢谢大家的解释。

As I already said, I am pretty new to Unix and Linux. I just wrote an article about those things (aliases, symlinks $PATH) for my blog for other "newbies". I like to write about those things, because they really interest me, and I want to share my experiences - I hope they are helpful to other people, too. Furthermore, it helps me to deepen my understanding if I have to explain things - and it is a good future reference, too!

It would be nice if you could skim over the article very quickly, and if I got some things wrong, I would be very happy about suggestions!

[http://scientific-ocean.com/2013/02/17/an-introduction-to-linuxunix-executables-path-aliases-and-symlinks/](http://scientific-ocean.com/2013/02/17/an-introduction-to-linuxunix-executables-path-aliases-and-symlinks/)

# python - python - lxml：强制执行属性的特定顺序

> ID：14917943
> 
> 赞同：15
> 
> 时间：2013-02-17T04:20:23.650
> 
> 标签：python, xml, lxml

我有一个 XML 编写脚本，它为特定的第 3 方工具输出 XML。

我使用原始 XML 作为模板来确保构建所有正确的元素，但最终的 XML 看起来不像原始的。

我以相同的顺序编写属性，但 lxml 以自己的顺序编写它们。

我不确定，但我怀疑第 3 部分工具期望属性以特定顺序出现，我想解决这个问题，以便我可以查看导致它失败的属性顺序，还是其他原因。

源元素：

```
<FileFormat ID="1" Name="Development Signature" PUID="dev/1" Version="1.0" MIMEType="text/x-test-signature"> 
```

我的源脚本：

```
sig.fileformat = etree.SubElement(sig.fileformats, "FileFormat", ID = str(db.ID), Name = db.name, PUID="fileSig/{}".format(str(db.ID)), Version = "", MIMEType = "") 
```

我生成的 XML：

```
<FileFormat MIMEType="" PUID="fileSig/19" Version="" Name="Printer Info File" ID="19"> 
```

有没有办法限制它们的书写顺序？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-15T12:43:42.503

看起来 lxml 按照您设置它们的顺序序列化属性：

```
>>> from lxml import etree as ET
>>> x = ET.Element("x")
>>> x.set('a', '1')
>>> x.set('b', '2')
>>> ET.tostring(x)
'<x a="1" b="2"/>'
>>> y= ET.Element("y")
>>> y.set('b', '2')
>>> y.set('a', '1')
>>> ET.tostring(y)
'<y b="2" a="1"/>' 
```

请注意，当您使用 ET.SubElement() 构造函数传递属性时，Python 会构造一个关键字参数字典并将该字典传递给 lxml。这会丢失您在源文件中的任何顺序，因为 Python 的字典是无序的（或者，它们的顺序是由字符串哈希值确定的，这可能因平台而异，或者实际上因执行而异）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-23T19:38:37.720

# OrderedDict 属性

从 lxml 3.3.3 开始（可能也在早期版本中），您可以将[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)属性传递给`lxml.etree.(Sub)Element`构造函数，并且在使用时将保留顺序`lxml.etree.tostring(root)`：

```
sig.fileformat = etree.SubElement(sig.fileformats, "FileFormat", OrderedDict([("ID",str(db.ID)), ("Name",db.name), ("PUID","fileSig/{}".format(str(db.ID))), ("Version",""), ("MIMEType","")])) 
```

请注意，即使您向构造函数提供 an ，ElementTree API ( `xml.etree.ElementTree`) 也**不会保留属性顺序！**`OrderedDict``xml.etree.ElementTree.(Sub)Element`

更新：还要注意，使用构造函数的`**extra`参数`lxml.etree.(Sub)Element`来指定属性不会**保留**属性顺序：

```
>>> from lxml.etree import Element, tostring
>>> from collections import OrderedDict
>>> root = Element("root", OrderedDict([("b","1"),("a","2")])) # attrib parameter
>>> tostring(root)
b'<root b="1" a="2"/>' # preserved
>>> root = Element("root", b="1", a="2") # **extra parameter
>>> tostring(root)
b'<root a="2" b="1"/>' # not preserved 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-17T22:58:09.107

**属性顺序和可读性** 正如评论者所提到的，属性顺序在 XML 中没有语义意义，也就是说它不会改变元素的含义：

```
<tag attr1="val1" attr2="val2"/>

<!-- means the same thing as: -->

<tag attr2="val2" attr1="val1"/> 
```

SQL 中有一个类似的特性，列顺序不会改变表定义的含义。XML 属性和 SQL 列是一个*集合* （不是*有序集合*），因此对于其中任何一个，“官方”可以说的只是属性或列是否存在于集合中。

也就是说，对于人类的可读性，这些东西出现的顺序和在这样的构造被创作并出现在文本（例如源代码）中并且必须被解释的情况下，肯定会有所不同，仔细的排序对我来说很有意义.

**典型的解析器行为**

任何将属性顺序视为重要的 XML 解析器都将不符合 XML 标准。这并不意味着它不会发生，但根据我的经验，这肯定是不寻常的。尽管如此，根据您提到的工具的出处，这可能值得测试。

据我所知，`lxml`没有指定顺序属性出现在序列化 XML 中的机制，如果确实如此，我会感到惊讶。

为了测试行为，我强烈倾向于只编写一个基于文本的模板来生成足够的 XML 来测试它：

```
id = 1
name = 'Development Signature'
puid = 'dev/1'
version = '1.0'
mimetype = 'text/x-test-signature'

template = ('<FileFormat ID="%d" Name="%s" PUID="%s" Version="%s" '
            'MIMEType="%s">')

xml = template % (id, name, puid, version, mimetype) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-12T00:04:53.917

我已经看到 XML 的使用者期望规范化 XML 的顺序很重要。规范 XML 指定对属性进行排序：

> 按字典顺序递增，名称空间 URI 作为主键，本地名称作为辅助键（空的名称空间 URI 在字典上是最少的）。（[https://www.w3.org/TR/xml-c14n2/](https://www.w3.org/TR/xml-c14n2/)第 2.6 节）

因此，如果您的应用程序期望从规范 XML 中得到的那种顺序，lxml 确实支持使用`method=`打印参数以规范形式输出。（见[https://lxml.de/api.html](https://lxml.de/api.html)的标题 C14N ）

例如：

```
from lxml import etree as ET 
element = ET.Element('Test', B='beta', Z='omega', A='alpha') 
val = ET.tostring(element, method="c14n") 
print(val) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T01:28:45.017

您需要封装一个新字符串，它在比较时给出顺序，在打印和获取字符串时给出值。

这是一个例子：

```
class S:
    def __init__(self, _idx, _obj):
        self._obj = (_idx, _obj)

    def get_idx(self):
        return self._obj[0]

    def __le__(self, other):
        return self._obj[0] <= other.get_idx()

    def __lt__(self, other):
        return self._obj[0] < other.get_idx()

    def __str__(self):
        return self._obj[1].__str__()

    def __repr__(self):
        return self._obj[1].__repr__()

    def __eq__(self, other):
        if isinstance(other, str):
            return self._obj[1] == other
        elif isinstance(other, S):
            return self._obj[
                       0] == other.get_idx() and self.__str__() == other.__str__()
        else:
            return self._obj[
                0] == other.get_idx() and self._obj[1] == other

    def __add__(self, other):
        return self._obj[1] + other

    def __hash__(self):
        return self._obj[1].__hash__()

    def __getitem__(self, item):
        return self._obj[1].__getitem__(item)

    def __radd__(self, other):
        return other + self._obj[1]

list_sortable = ['c', 'b', 'a']
list_not_sortable = [S(0, 'c'), S(0, 'b'), S(0, 'a')]
print("list_sortable ---- Before sort ----")
for ele in list_sortable:
    print(ele)
print("list_not_sortable ---- Before sort ----")
for ele in list_not_sortable:
    print(ele)
list_sortable.sort()
list_not_sortable.sort()
print("list_sortable ---- After sort ----")
for ele in list_sortable:
    print(ele)
print("list_not_sortable ---- After sort ----")
for ele in list_not_sortable:
    print(ele) 
```

运行结果：

```
list_sortable ---- Before sort ----
c
b
a
list_not_sortable ---- Before sort ----
c
b
a
list_sortable ---- After sort ----
a
b
c
list_not_sortable ---- After sort ----
c
b
a
dict_sortable ---- After sort ----
a 3
b 2
c 1
dict_not_sortable ---- After sort ----
c 1
b 2
a 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-14T11:19:52.613

lxml 在后台使用 libxml2。它保留了属性顺序，这意味着对于单个元素，您可以像这样对它们进行排序：

```
x = etree.XML('<x a="1" b="2" d="4" c="3"><y></y></x>')
sorted_attrs = sorted(x.attrib.items())
x.attrib.clear()
x.attrib.update(sorted_attrs) 
```

*如果您希望它们全部*排序，则不是很有帮助。如果您希望它们全部排序，您可以使用`c14n2`输出方法（XML 规范化版本 2）：

```
>>> x = etree.XML('<x a="1" b="2" d="4" c="3"><y></y></x>')
>>> etree.tostring(x, method="c14n2")
b'<x a="1" b="2" c="3" d="4"><y></y></x>' 
```

这将对属性进行排序。不幸的是，它有 ignoring 的缺点，`pretty_print`如果您想要人类可读的 XML，这不是很好。

如果您使用`c14n2`，那么 lxml 将使用自定义 Python 序列化代码来编写`sorted(x.attrib.items()`为所有属性调用自身的 XML。如果您不这样做，那么它将改为调用[`xmlNodeDumpOutput()`](http://www.xmlsoft.org/html/libxml-tree.html#xmlNodeDumpOutput)不支持排序属性但支持漂亮打印的 libxml2 函数。

因此，唯一的解决方案是手动遍历 XML 树并对所有属性进行排序，如下所示：

```
from lxml import etree

x = etree.XML('<x a="1" b="2" d="4" c="3"><y z="1" a="2"><!--comment--></y></x>')
for el in x.iter(etree.Element):
    sorted_attrs = sorted(el.attrib.items())
    el.attrib.clear()
    el.attrib.update(sorted_attrs)

etree.tostring(x, pretty_print=True)

# b'<x a="1" b="2" c="3" d="4">\n  <y a="2" z="1">\n    <!--comment-->\n  </y>\n</x>\n' 
```

# javascript - 为什么 Kinetic 3 的文本在 Firefox 中中断？

> ID：14917945
> 
> 赞同：-1
> 
> 时间：2013-02-17T04:20:37.130
> 
> 标签：javascript, firefox, kineticjs

Kinetic.js 3 目前无法在 Firefox 中运行。（请参阅错误[835064](https://bugzilla.mozilla.org/show_bug.cgi?id=835064)）似乎 Firefox[处理鼠标事件的方式与其他浏览器不同](https://stackoverflow.com/questions/13435690/html5-drag-and-drop-mouse-position-in-firefox)，但我不确定是否有解决此拖动问题的简单解决方法，或者是否必须为 Kinetic.js 4.0 完全重写 Web 应用程序+（在 Firefox 中有效）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:01:26.910

没有测试过，但你可以试试这个。

```
<script src="https://local-py.googlecode.com/svn-history/r7/trunk/js/kinetic-v3.10.1.js"></script>
<script>
/* 3.10.1 */ 
//Kinetic.Stage.prototype._setMousePosition = function(evt) {
//    var mouseX = evt.offsetX || (evt.clientX - this._getContentPosition().left + window.pageXOffset);
//    var mouseY = evt.offsetY || (evt.clientY - this._getContentPosition().top + window.pageYOffset);
//    this.mousePos = {
//        x: mouseX,
//        y: mouseY
//    };
//} 
/* 4.3.1 */
Kinetic.Stage.prototype._setMousePosition = function(evt) {
   var mouseX = evt.clientX - this._getContentPosition().left;
   var mouseY = evt.clientY - this._getContentPosition().top;
   this.mousePos = {
       x: mouseX,
       y: mouseY
   };
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:03:47.987

这似乎是 Firefox 在 Azure 画布中使用 Cairo 的错误。当使用 Cairo 后端时，这显然总是在 Firefox 18-19 中发生，并且[在 Firefox 20 中已修复](https://developer.mozilla.org/en-US/docs/Firefox_20_for_developers)。

# java - Java中静态字段的用途是什么？

> ID：14917947
> 
> 赞同：0
> 
> 时间：2013-02-17T04:21:59.723
> 
> 标签：java, static

从问题[System.out.println 在 Java 中的含义是什么？](https://stackoverflow.com/questions/3406703/whats-the-meaning-of-system-out-println-in-java)我发现`out`in`System.out.println`是一个静态字段。

从 C/C++ 背景来看，静态方法很容易理解，因为它与 C 中的函数相同。但是，我不确定静态字段的用例。

它只是一种使用多种方法而不实例化对象的方法，就像我们使用`System.out.println` 而不实例化任何东西一样吗？还是有静态字段的用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:25:45.973

静态字段是类的一个属性，它在堆上分配并且独立于特定的对象实例。

例如，您可以使用静态变量来计算类的实例数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T04:30:05.257

`static`变量/方法不仅具有无需实例化即可使用的特性，而且它们在多个实例之间也是一致的。

例如，

```
public class A {
    public int a = 1;
    public static int b = 2;
} 
```

现在，当我执行`A a1 = new A()`and时`A a2 = new A()`，`A.a`获得 2 倍的内存并存储在对象实例中，而`A.b`只获得一次内存并存储在实例之外。

这方面的一个主要例子是

```
a1.b = 3;
System.out.println(a2.b); 
```

这将打印 3 而不是 2，因为`a1`更改了`b`整个类的值，因此也更改了所有实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T05:50:14.457

除了 System 中的 .out var 之外，它还可以用作类的所有实例都可以更新的共享变量

```
private static int meatballsConsumed; 
```

或作为通用共享变量

```
public static String thisSeemsDangerous; 
```

或者作为一个常数

```
public static final String FLD_OF_DREAMS = "COSTNER,KEVIN"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T04:26:38.463

该类`System`只有一个`OutputStream`写入标准输出（称为`out`）的实例，因此它是一个静态变量。我们不需要多个实例，因为只有一个标准输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T04:26:46.810

静态字段是已设置的字段，无需实例化类即可获取（使用 new ClassName()）。

例如：

```
public class MyClass {
  public static int number = 1;
} 
```

使用上面的代码，您可以使用`MyClass.number`.

```
public class MyClass {
  public int number = 1;
} 
```

现在，您需要通过构造函数实例化 MyClass。由于没有声明构造函数，您只需使用 new MyClass()：

```
MyClass cl = new MyClass();
cl.number; // <-- The number 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T04:27:23.427

`out`是一个`object`。`PrintStream`

`System`是`java.lang`包中的一个类

`println`是`PrintStream`类的实例方法（不是静态方法）

`out`要在`System`不实例化的情况下访问该字段`System`，请声明该字段`static`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-17T04:27:47.747

静态字段也称为“类”字段（与“实例”字段相反）。

这意味着无需先实例化类就可以访问它们。

因此，您可以调用类方法（如`Math.abs()`在`Math`类上），而无需实例化一个`Math`类。您还可以访问诸如`Math.PI`.

此外，更改类属性意味着它会影响该类的所有实例，这意味着被实例化的每个对象都会看到此值的更改，从而允许您通过单个属性更改来影响它们。

# ios - StoreKit.isSupported 在 iOS 设备上返回 false

> ID：14917948
> 
> 赞同：3
> 
> 时间：2013-02-17T04:22:03.160
> 
> 标签：ios, storekit

我最近购买了 Milkman StoreKit 原生扩展，用于在 iOS 上进行应用内购买。我在 iPhone 4S 上初始化 StoreKit 时遇到问题。

我按照 Milkman 游戏示例中的说明进行操作，我的代码如下所示：

```
log("Is Supported " + StoreKit.isSupported());    
if(StoreKit.isSupported())
{   
    StoreKit.create();
    log("StoreKit Initialized.");

    // make sure that purchases will actually work on this device before continuing!
    // (for example, parental controls may be preventing them.)
    if (!StoreKit.storeKit.isStoreKitAvailable())
    {
        log("Store is disable on this device.");
        return;
    }
} 
```

StoreKit.isSupported() 函数的文档说明如下：

```
isSupported ()  method   
public static function isSupported():Boolean
Checks if the current platform supports StoreKit. Note that this only determines whether the app is running under iOS (as opposed to Android, Windows, etc.) Use this call before initializing StoreKit in order to confirm that you are on iOS. (So that you can avoid initializing StoreKit on an unsupported platform when building a multi-platform app.)

Returns
Boolean — true if StoreKit is supported; false otherwise. 
```

当我在笔记本电脑上从 Flash Builder 运行我的应用程序时，Storekit.isSupported() 函数返回 false（正如预期的那样，它不是 iOS 设备）。但是，当我构建 IPA 并部署到我的 iPhone 4 时，它仍然返回 false，尽管我有 WiFi 连接并检查我对手机上的 IAP 没有任何限制。

有没有人遇到过同样的问题并解决了，或者有人对我接下来可能尝试的方法有什么建议吗？

非常感谢

# macos - 奇数尺寸的 CALayer 模糊

> ID：14917949
> 
> 赞同：1
> 
> 时间：2013-02-17T04:22:28.043
> 
> 标签：macos, cocoa, drawing, calayer, quartz-scheduler

我将`-contents`a 的属性设置`CALayer`为各种`CGImageRefs`，我注意到当我设置内容的图像具有奇数大小时，图像变得模糊。

我的图层框架本身在像素上，我将其设置为不调整其内容的大小。有没有办法强制图层在像素上绘制它的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:46:25.097

我必须将 anchorPoint 设置为 (0,0) 并更改我的代码以定位我的图层以占图层大小的一半，并使新框架具有完整的位置。

# c++ - 我可以在 C 程序中使用用 C++ 创建的共享库吗？

> ID：14917952
> 
> 赞同：34
> 
> 时间：2013-02-17T04:23:35.253
> 
> 标签：c++, c, compilation, shared-libraries

我正在使用 C 创建程序。但是，我需要使用许多只有 C++ 的 API 的库。那么，我是否可以在 C++ 中创建一个共享对象，然后使用 C 访问它的功能？

1.  我将传递和返回的唯一数据是与 C 兼容的数据类型。
2.  转换或迁移到 cpp 不是这里的选项。

如果无法连接这些代码，我如何从 C++ 代码获取信息到 C 代码？我尝试从 C 调用 C++ 函数，但在包含`<string>`. 所以当我从 C 调用 C++ 函数时，我应该只使用与 C 编译器兼容的代码吗？

### C++ 头文件 cppfile.hpp

```
#ifndef CPPFILE_H
#define CPPFILE_H
    #ifdef __cplusplus
    extern "C" {
    #endif

    extern int myfunction(const char *filename);

   #ifdef __cplusplus
   }
   #endif
#endif 
```

### C++ 文件 cppfile.cpp

```
#include "cppfile.hpp"
#include <string>
int myfunction(const char *filename) {
    String S(filename);
    return 0;
} 
```

### C 文件 cmain.c

```
#include "cppfile.hpp"
int main(int argc, char **argv)
{
     int i = myfunction(argv[1]);
     printf("%d\n", i);
     return 0;
} 
```

### 编译：

```
gcc -c cmain.c
g++ -fPIC -shared -o cppfile.so cppfile.cpp 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-18T13:04:26.720

你想要更像这样的东西（在这里我将使用一个更有意义的例子）：

### C/C++ 头文件 - animal.h

```
#ifndef ANIMAL_H
#define ANIMAL_H

#ifdef __cplusplus
class Animal {
public:
    Animal() : age(0), height(0) {}
    Animal(int age, float height) : age(age), height(height) {}
    virtual ~Animal() {}

    int   getAge();
    void  setAge(int new_age);

    float getHeight();
    void  setHeight(float new_height);

private:
    int age;
    float height; // in metres!
};
#endif /* __cplusplus */

#ifdef __cplusplus
extern "C" {
#endif
    struct animal; // a nice opaque type

    struct animal *animal_create();
    struct animal *animal_create_init(int age, float height);
    void           animal_destroy(struct animal *a);

    void           animal_setage(struct animal *a, int new_age);
    void           animal_setheight(struct animal *a, float new_height);
    int            animal_getage(struct animal *a);
    float          animal_getheight(struct animal *a);
#ifdef __cplusplus
}
#endif

#endif /* ANIMAL_H */ 
```

### C++ 动物实现文件 - animal.cpp

```
#include "animal.h"
#define TO_CPP(a) (reinterpret_cast<Animal*>(a))
#define TO_C(a)   (reinterpret_cast<animal*>(a))

void  Animal::setAge(int new_age) { this->age = new_age; }
int   Animal::getAge() { return this->age; }
void  Animal::setHeight(float new_height) { this->height = new_height; }
float Animal::getHeight() { return this->height; }

animal *animal_create() {
    animal *a = TO_C(new Animal);
    return a;
}

animal *animal_create_init(int age, float height) {
    animal *a = TO_C(new Animal(age, height));
    return a;
}

void animal_destroy(animal *a) {
    delete TO_CPP(a);
}

void animal_setage(animal *a, int new_age) {
    TO_CPP(a)->setAge(new_age);
}

void animal_setheight(animal *a, float new_height) {
    TO_CPP(a)->setHeight(new_height);
}

int animal_getage(animal *a) {
    TO_CPP(a)->getAge();
}

float animal_getheight(animal *a) {
    TO_CPP(a)->getHeight();
} 
```

### C 客户端代码 - main.c

```
#include "animal.h"
#include <stdio.h>

int main()
{
    // 6'0" 25yo (perhaps a human? :P)
    struct animal *a = animal_create(25, 1.83); 

    animal_setage(a, 26); // birthday
    printf("Age: %d\nHeight: %f", animal_getage(a), animal_getheight(a));

    animal_destroy(a);
    return 0;
} 
```

### C++ 客户端代码 - main.cpp

```
#include "animal.h"
#include <iostream>

int main()
{
    // 6'0" 25yo (perhaps a human? :P)
    Animal* a = new Animal(25, 1.83);
    a->setAge(26); // birthday
    std::cout << "Age:    " << a->getAge() << std::endl;
    std::cout << "Height: " << a->getHeight();

    delete a;
    return 0;
} 
```

因此，当您编译库时，您`animal.cpp`使用 C++ 编译器进行编译。然后，您可以使用 C 代码链接到它，并使用这些`animal_xxx`函数。

注意 和 的`struct animal`使用`Animal`。`Animal`是一个普通的 C++ 类型。这正是它的样子。`struct animal`，另一方面，是一种“不透明”的类型。这意味着您的 C 程序可以看到它的存在，并且可以拥有一个，但它不知道里面有什么。它所知道的是它有一个函数，它需要一个`struct animal*`.

在真正的库中，您将希望有内存分配的自定义点。因此，假设这是 library `libjungle`，您可能至少需要`jungle_setmalloc`合理`jungle_setfree`的默认值。然后，您可以设置全局`new`和`delete`in`libjungle`的 C++ 代码以使用这些用户定义的函数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-17T05:49:24.093

这是完全可能的。下面是如何快速： 1.) 你有一个带有 C API 的 header.h，它不包含任何 Cplusiness。

```
#ifndef MIXEDCCPP_H
#define MIXEDCCPP_H

#ifdef __cplusplus
extern "C" {
#endif
#include <stdint.h> // Any C-compatible headers will go here.

// C API goes here.  C Functions can't contain any CPPiness.
void myclass_setName( void *pClassObj, const char *pName, int nameLen );

#ifdef __cplusplus
}
#endif

#ifdef __cplusplus

// Stuff that is only compatible with CPP goes here
// __cplusplus section won't get processed while compiling C files.

#include <vector> // CPP headers.

class MyClass {
   // Classes etc.
};
#endif // #ifdef __cplusplus

#endif // MIXEDCCPP_H 
```

然后在 .cpp 中，您只需创建一些甚至可以在其中包含 CPP 的 C-API 函数：

```
#include "mixedccpp.h"

extern "C" {
// C API goes here.  C Functions can't contain any CPPiness in their prototypes.
void myclass_setName( void *pClassObj, const char *pName, int nameLen )
{
    // But CPP knowledge can go inside the function - no problem, since this is a CPP file.
    MyClass *pMyClass = static_cast<MyClass *>(pClassObj);
    pMyClass->setName( pName, nameLen );
}

} // #extern "C"

// CPP Stuff goes here... or vice-versa. 
```

在您的情况下，您实际上不需要在标头中声明任何 CPP 代码，因为您正在调用外部库。但是您需要在您的 CPP 文件中创建可以调用 CPP 库的 C 兼容函数。对需要从 C 文件调用的函数使用 extern "C"，然后使用 C-structs 而不是类，如果需要类，则使用 void * 指向它们，然后将它们从任何时候你需要访问它们的 C 函数。一个标准的 makefile 应该能够很好地编译它，假设它将 .cpp 文件编译为 .cpp 并理解 extern "C" {}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T04:40:49.163

您的 C 代码不能使用 C++ 标头`<string>`。您必须确保声明要从 C 调用的 C++ API 中的函数`extern "C"`（正如您所拥有的那样），并且仅使用 C 编译器识别的类型（如您所拥有的那样）。

如果您的任何代码使用 C++，您还需要与 C++ 编译器链接。如果您准备花费大量精力来获得正确的加载器选项，则可以这样做，但是使用 C++ 编译器要简单得多：

```
gcc -c cmain.c
g++ -fPIC -shared -o cppfile.so cppfile.cpp
g++ -o cmain cmain.o cppfile.so 
```

当然，您需要：

1.  加入. `#include <stdio.h>`_`cmain.c`
2.  `std::string S(filename);`中使用`cppfile.cpp`。

此外，如果程序在没有参数的情况下被调用，你会得到：

```
$ ./cmain
terminate called throwing an exceptionAbort trap: 6
$ ./cmain x3
0
$ 
```

您需要防止滥用，即使在测试程序中也是如此。

# c++ - 为 std::vector 实现 '+' 运算符

> ID：14917959
> 
> 赞同：1
> 
> 时间：2013-02-17T04:24:32.273
> 
> 标签：c++, overloading

我正在尝试添加对添加 std::vector 的支持。这是我到目前为止的代码。不起作用的部分是我尝试打印结果的部分。我知道 valarray 但我无法让它以我想要的方式工作（大多数情况下我还没有找到将向量转换为 valarray 的简单方法）。

这是错误：

```
../src/VectorOperations.cpp:26:6: error: need 'typename' before 'std::vector<T>::iterator' because 'std::vector<T>' is a dependent scope 
```

* * *

```
class VectorOperations
{
public:
    //Vector Operations
    std::vector<double> logv(std::vector<double> first);
    std::vector<double> raiseTo(std::vector<double> first, int power);
    std::vector<double> xthRoot(std::vector<double> first, int xth);
    double sumv(std::vector<int> first);

    std::vector<double> operator + ( const std::vector<double> & ) const;
    std::vector<double> operator - ( const std::vector<double> & ) const;
    std::vector<double> operator * ( const std::vector<double> & ) const;
    std::vector<double> operator / ( const std::vector<double> & ) const;

};

template <typename T>
std::vector<T> operator+(const std::vector<T>& a, const std::vector<T>& b)
{
    assert(a.size() == b.size());
    std::vector<T> result;
    result.reserve(a.size());
    std::transform(a.begin(), a.end(), b.begin(),
               std::back_inserter(result), std::plus<T>());

    std::cout<<"Results from addition follow: \n";
    //HERE'S THE PROBLEM: I WANT TO PRINT OUT BUT I GET ERRORS
        for(std::vector<T>::iterator it = a.begin(); it != a.end(); ++it) {
            /* std::cout << *it; ... */
        }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:32:06.123

`std::vector<T>::iterator`取决于模板类型，尝试添加`typename`：

```
for(typename std::vector<T>::iterator it = a.begin(); it != a.end(); ++it) {
    ^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T05:41:20.157

编译器错误会告诉您***确切***的操作。`for`但是，我建议不要使用自己的循环，而是使用[**`std::copy()`**](http://en.cppreference.com/mwiki/index.php?title=Special%3aSearch&search=std%3a%3acopy)：

```
std::copy(v.begin(), v.end(), std::ostream_iterator<T>(os, ", ")); 
```

例如：

```
template <typename T>
std::ostream& operator <<(std::ostream& os, std::vector<T> const& v)
{
    os << "{";
    std::copy(v.begin(), v.end(), std::ostream_iterator<T>(os, ", "));
    return os << "}";
} 
```

[应用您自己的格式样式来品尝。]

然后你可以调用：

```
std::cout << "Results from addition follow: \n" << result << std::endl; 
```

[最好从***外部*** `operator +`，因为这将是添加两个 s 的意外副作用`vector`。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T04:33:07.710

在`std::vector<T>::iterator it`. 应该是`typename std::vector<T>::iterator`
您可以参考此 SO 链接以获取有关 typename 的详细信息[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

# php - 如何将 2D JavaScript 数组发布到服务器？

> ID：14917966
> 
> 赞同：0
> 
> 时间：2013-02-17T04:25:57.687
> 
> 标签：php, javascript, jquery

我有一个数组 myData=[[1,2,3],[4,5,6],....,[..,..,..]] 我想将它发布到服务器。

通常，对于 JS 变量，我只是将变量放入文本框，然后使用 JS 提交表单。但是，当我将二维数组放入文本框时，JS 将其转换为字符串，使其变为一维数组，如下所示： [1,2,3,4,5,6....]

我希望能够将整个二维数组发布到服务器并使用 PHP 在下一页上检索它。我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:32:24.403

您应该使用 JSON 将数组转换为带有 javascript 的字符串，然后将字符串解析回 php.ini 中的数组。

例如：

```
var myData = var data = [['hooray',1],['test','meow'],[0,3,2]];
var myData_string = JSON.stringify(myData); 
```

这会将您的对象/数组变成一个字符串，然后您可以使用 php 发布和解析，如下所示：

```
$myData = json_decode($input); 
```

**参考：**

*   [**JSON** (javascript)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON)

*   [**json_decode()** (php)](http://php.net/manual/en/function.json-decode.php)

# c# - 使用日期搜索数据库

> ID：14917967
> 
> 赞同：1
> 
> 时间：2013-02-17T04:26:11.047
> 
> 标签：c#, sql, ms-access, datetime

在我的 Windows 表单中，我有一个文本框，用户可以在其中输入格式为 16/02/2013 的日期，以搜索该特定日期的所有条目。在数据库中，我有一列以这种格式存储日期。16/02/2013 02:47:36 AM。

有人可以建议我使用 sql 查询从数据库中提取该特定日期的所有条目并将其放在数据集上。

我正在使用它，但它不起作用。

```
public DataSet OrderByDate(string date)
{
    //  string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
    DataSet dataSet = new DataSet();
    OleDbConnection oleConn = new OleDbConnection(connString);

    try
    {
        oleConn.Open();
        string sql = "SELECT  Customer.[Title] + SPACE(2)  + Customer.[Customer's Name] as CustomerName, Customer.[Customer's Ebayname], Customer.[Email Address], Customer.[Phone Number], Customer.[Address 1] + SPACE(2)  +Customer.[Address 2] + SPACE(2)  + Customer.[City] + SPACE(2)  + Customer.[Post Code]+  SPACE(2)  + Customer.[Country] as Address, Customer.[Item Purchased], Customer.[Purchased Date], Customer.[Total Price] FROM Customer WHERE [Purchased Date] LIKE '" + "'" + date + "%'";
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
        dataAdapter.Fill(dataSet, "Customer");
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
    }
    finally
    {
        oleConn.Close();
    }
    if (dataSet.Tables.Count <= 0)
        return null;
    else
        return dataSet;
} 
```

在数据库中，日期时间以日期/时间格式存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:11:11.220

以这种方式传递日期值不起作用，因为您的 SQL 引擎无法识别 .NET 中的默认格式化日期和时间值。

要将任何数据传递给您的查询，最好始终使用参数。为您的命令字符串添加一个参数：

```
string sql = "SELECT * FROM Customer WHERE PurchaseDate = @pdate";

OleDbDataAdapter adapter = new OleDbDataAdapter(sql, connection);
adapter.SelectCommand.Parameters.AddWithValue("pdate", date);
adapter.Fill(dataSet, "Customer"); 
```

`@pdate`在命令文本中是一个参数。如示例中所示，必须在执行命令之前提供参数的值。

您还可以使用简单的字符串连接将值填充到 SQL 语句中，但这仅适用于简单的整数或字符串值，并且通常不推荐，因为它会受到 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T04:31:18.833

在数据库方面，如果您的数据类型是日期，您可以简单地执行以下操作：

```
where yourdatefield = @dateIn 
```

如果是日期时间，您可以这样做：

```
where yourdatefield >= @dateIn
and yourdatefield < the day after @dateIn 
```

由于您使用的是 .net，因此您需要在应用程序代码中进行一些改进。首先，将日期字符串转换为 DateTime 对象。其次，将所有用户输入转换为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T05:07:11.347

您可能需要也可能不需要在 sql 中将日期时间用单引号括起来，我不记得了：

```
 DateTime start = DateTime.Parse("16/02/2013").Date;
        DateTime end = start.AddDays(1);
        string sql = "Select * From Customer WHere PurchasedDate >= {0} and PurchasedDate < {1}";
        sql = string.Format(sql, start, end); 
```

此外，这是我在这里写的一种快速而肮脏的方法。它应该可以工作，但您真的应该将此查询参数化。

# python - 访问数组 Python 中的元素

> ID：14917975
> 
> 赞同：2
> 
> 时间：2013-02-17T04:27:35.567
> 
> 标签：python, numpy

这是我第一次处理多维数组，我在访问元素时遇到了问题。我正在尝试获取图片的红色像素，但只是数组中的前 8 个元素。这是代码

```
import Image
import numpy as np

im = Image.open("C:\Users\Jones\Pictures\1.jpg")
pix = im.load() 

r, g, b = np.array(im).T
print r[0:8] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T04:30:33.140

由于您正在处理图像，`r`因此是一个二维数组。要获取图像中的前 8 个像素，请尝试

```
r.flatten()[:8] 
```

如果第一行少于 8 个像素，这将自动环绕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T04:35:01.500

你可以这样做：

```
r[0][:8] 
```

但是请注意，如果第一行少于 8 个像素，这将不起作用。要解决此问题，请执行以下操作：

```
from itertools import chain
r = list(chain.from_iterable(r))
r[:8] 
```

或（如果您不想`import`使用整个模块）：

```
r = [val for element in r for val in element]
r[:8] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T04:39:59.800

你也想要所有的行吗？试试这个`r[:,:8]`

只想要第一行？试试这个`r[0,:8]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T05:28:37.510

我认为它可以更简单。此示例使用随机矩阵（这将是您的`r`矩阵）：

```
In [7]: from pylab import *                 # convention

In [8]: r = randint(0,10,(10,10))           # this is your image

In [9]: r
array([[7, 9, 5, 5, 6, 8, 1, 4, 3, 4],
       [5, 4, 4, 4, 2, 6, 2, 6, 4, 2],
       [1, 4, 9, 9, 2, 6, 1, 9, 0, 6],
       [5, 9, 0, 7, 9, 9, 5, 2, 0, 7],
       [8, 3, 3, 9, 0, 0, 5, 9, 2, 2],
       [5, 3, 7, 8, 8, 1, 6, 3, 2, 0],
       [0, 2, 5, 7, 0, 1, 0, 2, 1, 2],
       [4, 0, 4, 5, 9, 9, 3, 8, 3, 7],
       [4, 6, 9, 9, 5, 9, 3, 0, 5, 1],
       [6, 9, 9, 0, 3, 4, 9, 7, 9, 6]]) 
```

然后，提取前 8 列并做一些事情

```
In [17]: r_8 = r[:,:8]              # extract columns

In [18]: r_8
Out[18]: 
array([[7, 9, 5, 5, 6, 8, 1, 4],
       [5, 4, 4, 4, 2, 6, 2, 6],
       [1, 4, 9, 9, 2, 6, 1, 9],
       [5, 9, 0, 7, 9, 9, 5, 2],
       [8, 3, 3, 9, 0, 0, 5, 9],
       [5, 3, 7, 8, 8, 1, 6, 3],
       [0, 2, 5, 7, 0, 1, 0, 2],
       [4, 0, 4, 5, 9, 9, 3, 8],
       [4, 6, 9, 9, 5, 9, 3, 0],
       [6, 9, 9, 0, 3, 4, 9, 7]])

In [19]: r_8 = r_8 * 2              # do something

In [20]: r_8
Out[20]: 
array([[14, 18, 10, 10, 12, 16,  2,  8],
       [10,  8,  8,  8,  4, 12,  4, 12],
       [ 2,  8, 18, 18,  4, 12,  2, 18],
       [10, 18,  0, 14, 18, 18, 10,  4],
       [16,  6,  6, 18,  0,  0, 10, 18],
       [10,  6, 14, 16, 16,  2, 12,  6],
       [ 0,  4, 10, 14,  0,  2,  0,  4],
       [ 8,  0,  8, 10, 18, 18,  6, 16],
       [ 8, 12, 18, 18, 10, 18,  6,  0],
       [12, 18, 18,  0,  6,  8, 18, 14]]) 
```

现在，这就是诀窍。`r`替换using中的前 8 列`hstack`：

```
In [21]: r = hstack((r_8, r[:,8:]))             # it replaces the FISRT 8 columns, note the indexing notation 

In [22]: r
Out[22]: 
array([[14, 18, 10, 10, 12, 16,  2,  8,  3,  4],    # it does not touch the last 2 columns
       [10,  8,  8,  8,  4, 12,  4, 12,  4,  2],
       [ 2,  8, 18, 18,  4, 12,  2, 18,  0,  6],
       [10, 18,  0, 14, 18, 18, 10,  4,  0,  7],
       [16,  6,  6, 18,  0,  0, 10, 18,  2,  2],
       [10,  6, 14, 16, 16,  2, 12,  6,  2,  0],
       [ 0,  4, 10, 14,  0,  2,  0,  4,  1,  2],
       [ 8,  0,  8, 10, 18, 18,  6, 16,  3,  7],
       [ 8, 12, 18, 18, 10, 18,  6,  0,  5,  1],
       [12, 18, 18,  0,  6,  8, 18, 14,  9,  6]]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T05:04:56.973

编辑：至于 DSM 所指出的，OP 实际上是使用*numpy array*。

我收回我的答案，因为 nneonneo 是正确的

# django - 默认安全的 django ORM 层---如何？

> ID：14917978
> 
> 赞同：1
> 
> 时间：2013-02-17T04:28:09.400
> 
> 标签：django, security, defensive-programming

我正在经营一家 Django 商店，我们为每个客户提供一个与所有其他客户的图完全分开的对象图。数据是中等敏感的，所以我不希望其中任何一个从一个客户端泄漏到另一个客户端，也不希望一个客户端删除或更改另一个客户端的数据。

我想构建我的代码，以便我默认编写符合安全要求的代码（不需要*硬*保证），但是当我知道我需要时让我覆盖它们。

我主要担心的是`Twig.objects.get(...)`，我忘记添加`client=request.client`，同样对于`Leaf.objects.get`我必须检查的地方`twig__client=request.client`。这很快变得容易出错和复杂。

有什么好方法可以解决我自己的健忘问题？我如何使这成为我不必考虑的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:39:54.787

我想到的一个候选解决方案是：

*   将默认对象管理器设置为`DANGER = models.Manager()`我的抽象基类。
*   `ok(request)`在所述基类上有一个`.filter(leaf__twig__branch__trunk__root__client=request.client)`适用的方法。
*   在可行的情况下使用`MyModel.ok(request)`而不是。`MyModel.objects`

这可以改进吗？一个不太好的问题是当视图调用模型方法时，例如`branch.get_twigs_with_fruit`，我现在必须传递 a`request`以使其运行，`ok`或者我必须调用`DANGER`. 我都不喜欢：-\

有什么方法可以访问当前请求吗？我认为这可能会缓解这种情况......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:08:46.403

我会解释一个不同的问题，但我认为解决方案可能需要研究。

有一次我在做一个可视化数据的项目，我需要一个非常大的表来存储所有可视化的所有数据。结果证明这是一个大问题，因为我必须做一些`Model.objects.filter(visualization=5)`不太优雅且效率不高的事情。

为了让事情变得更简单、更高效，我最终动态创建了动态模型。本质上，我会动态地在数据库中创建一个单独的表，然后只在其中存储一个可视化的数据。我的代码是这样的：

```
def get_model_class(table_name):
    class ModelBase(ModelBase):
        def __new__(cls, name, bases, attrs):
            name = '{}_{}'.format(name, table_name)
            return super(ModelBase, cls).__new__(cls, name, bases, attrs)

    class Data(models.Model):
        # fields here
        __metaclass__ = ModelBase
        class Meta(object):
            db_table = table_name

    return Data

dynamic_model = get_model_class('foo') 
```

这对我的目的很有用，因为它允许查询更快，但回到你的问题我认为这样的事情可能很有用，因为这将确保每个客户端的数据不仅通过外键分开，而且实际上是分开的在数据库中。

使用此方法非常简单，除非在使用模型之前，您必须调用该函数来为每个客户端获取它。为了使事情更高效，您可以缓存/记忆函数调用的结果，这样它就不必多次重新计算同一事物。

# php - 没有输出的PHP GET方法

> ID：14917979
> 
> 赞同：1
> 
> 时间：2013-02-17T04:28:11.003
> 
> 标签：php, curl

我想要做的是打开一个 url 并使用 PHP 传递变量，

每次我使用 cURL 方法时，它都会打开页面并显示输出，之后不会跟随重定向。

未找到 HttpRequest。

我能做些什么？

```
$ch = curl_init($url);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    curl_exec($ch);

    curl_close($ch); 
```

对于隐私问题，我无法发布 url 是什么，但这就是当它卷曲页面时给我带来问题的代码，它实际上显示了它正在卷曲的内容。

# android - 如何绘制矩形对象的网格？

> ID：14917982
> 
> 赞同：1
> 
> 时间：2013-02-17T04:28:47.110
> 
> 标签：android, object, drawing

我是 Android 新手，我仍在寻找好的资源。

我的问题涉及在屏幕上绘制矩形对象网格的最佳方法。我需要网格中显示的每个对象都有一个初始文本（或作为文本的 int）值，当用户触摸该对象时，文本将变为彩色形状。此外，每个对象都需要知道（或能够找出）其直接邻居的状态。

我不知道要扩展哪个类才能同时显示文本和形状，并能够处理触摸输入。

感谢您的帮助。

编辑：我很抱歉，但我不知道如何更清楚。也许一些背景会有所帮助。我有一个主要活动，它将一个 int 值作为输入并创建一个 Intent 将该值发送到另一个活动。然后，其他活动显示 100 个随机数的网格。用户需要选择一系列网格点，用户选择的一定数量的点将从随机数变为彩色形状。更改的点由我将在代码中提供的逻辑控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:41:23.260

SO Q with basic android graph：Android中[的自定义动态图](https://stackoverflow.com/questions/7701175/custom-dynamic-graph-in-android)

### Android 官方自定义控件指南

[https://developer.android.com/guide/topics/ui/custom-components.html](https://developer.android.com/guide/topics/ui/custom-components.html)

### 视图控件上的 Android 参考页面，您将在该页面上进行扩展

[https://developer.android.com/reference/android/view/View.html](https://developer.android.com/reference/android/view/View.html)

### 自定义视图控件的真实世界代码示例（您特​​别感兴趣`onDraw()`）

[http://www.java2s.com/Open-Source/Android/App/ringdroid/com/ringdroid/WaveformView.java.htm](http://www.java2s.com/Open-Source/Android/App/ringdroid/com/ringdroid/WaveformView.java.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-30T04:39:56.520

我知道这个问题被问了很长时间，但也许它会帮助人们:)

将此添加到“ **attrs.xml** ”（或根据需要创建新的）

```
<resources>
<declare-styleable name="RectanglesGridView">
    <attr name="cellSize" format="dimension" />
    <attr name="cellColor1" format="color" />
    <attr name="cellColor2" format="color" />
</declare-styleable> 
```

这就是类 - “ **RectanglesGridView.java** ”

```
package com.gilapps.movinglivewallpaper.UI.views;

import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Build;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.view.View;

import com.gilapps.movinglivewallpaper.R;

public class RectanglesGridView extends View {
    private final static float DEFAULT_CELL_SIZE_DP = 10;
    private final static int DEFAULT_CELL_COLOR1 = Color.GRAY;
    private final static int DEFAULT_CELL_COLOR2 = Color.WHITE;
    private int mColor1 = DEFAULT_CELL_COLOR1;
    private int mColor2 = DEFAULT_CELL_COLOR2;
    private float mCellSize;
    private Paint mPaint;
    private boolean mIsColor1;
    private int mWidth;
    private int mHeight;

    public RectanglesGridView(Context context) {
        super(context);
        mCellSize = convertDpToPixel(DEFAULT_CELL_SIZE_DP);
        mPaint = new Paint();

    }

    public RectanglesGridView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint = new Paint();
        loadAttributes(context, attrs);

    }

    public RectanglesGridView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        mPaint = new Paint();
        loadAttributes(context, attrs);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public RectanglesGridView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        mPaint = new Paint();
        loadAttributes(context, attrs);
    }

    private void loadAttributes(Context context, AttributeSet attrs) {
        TypedArray a = context.getTheme().obtainStyledAttributes(
                attrs,
                R.styleable.RectanglesGridView,
                0, 0);

        try {
            mCellSize = a.getDimension(R.styleable.RectanglesGridView_cellSize, convertDpToPixel(DEFAULT_CELL_SIZE_DP));
            mColor1 = a.getColor(R.styleable.RectanglesGridView_cellColor1, DEFAULT_CELL_COLOR1);
            mColor2 = a.getColor(R.styleable.RectanglesGridView_cellColor2, DEFAULT_CELL_COLOR2);

        } catch (Exception e) {
            mCellSize = convertDpToPixel(DEFAULT_CELL_SIZE_DP);
        } finally {
            a.recycle();
        }
    }

    private float convertDpToPixel(float dp){
        Resources resources = getContext().getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * ((float)metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT);
        return px;
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        mWidth = w;
        mHeight = h;
        super.onSizeChanged(w, h, oldw, oldh);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        for (float r=0;r<mHeight;r+=mCellSize) {
            for (float c=0;c<mWidth;c+=mCellSize) {
                mPaint.setColor(mIsColor1 ? mColor2 : mColor1);
                mIsColor1 = !mIsColor1;
                canvas.drawRect(c,r,c+mCellSize,r+mCellSize,mPaint);
            }
            mIsColor1 = !mIsColor1;
        }

        super.onDraw(canvas);
    }
} 
```

**用法：**

```
<com.gilapps.movinglivewallpaper.UI.views.RectanglesGridView
            app:cellColor1="#33000000"
            app:cellColor2="white"
            app:cellSize="10dp"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /> 
```

*   添加`xmlns:app="http://schemas.android.com/apk/res-auto"`到根视图
*   如果需要，更改包名称
*   享受！:)

# mysql - 通过 Xcode 连接到 mysql - appstore 会允许吗？

> ID：14917984
> 
> 赞同：0
> 
> 时间：2013-02-17T04:29:29.590
> 
> 标签：mysql, database, xcode

我对 obj-c 很陌生，我正在做这个应用程序，您可以在其中单击注释，将您带到该国。我想使用外部 php 脚本连接到 MySql：

```
<?php
include("connect.php");

$land = $_GET['land'];

$res = mysql_query("SELECT * FROM lande WHERE name = '$land'");
$row = mysql_fetch_array($res);

$flag = $row['flag'];

echo $flag;
echo $land;

?> 
```

这是我在 Xcode 中的按钮：

```
-(void)button:(id)sender {

 if (mapView.selectedAnnotations.count == 0)
 {
    //no annotation is currently selected
    return;
 }

 id<MKAnnotation> selectedAnn = [mapView.selectedAnnotations objectAtIndex:0];
 country_title = selectedAnn.title;

 UIViewController* Countries = [[UIViewController alloc] initWithNibName:@"Countries" bundle:[NSBundle mainBundle]];

 NSString *strUrl = [NSString stringWithFormat:@"http://localhost:8888/app/country.php?land=%@",country_title];

 NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strUrl]];

 NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

 NSLog(@"%@",strResult);

 [self.view addSubview:Countries.view];

} 
```

如何打印我的结果？这完全合法吗？应用商店会允许吗？还有另一种方法吗？我知道 SQLite，但似乎很难...... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:46:44.383

没有禁止在应用程序中使用外部数据库资源的规则。我一直使用这种方法来包含无法在本地存储的不断变化的额外数据。但是，您的设备上没有 PHP 服务器，因此要完全做到这一点，您需要连接到远程服务器。

如果你一心想在本地做这一切可能想读一点 SQLite，如果你能做 MySQL，你会很好地使用 SQLite。

# java - Apple .app（使用 Ant 的 JarBundler 构建）不会运行

> ID：14917989
> 
> 赞同：0
> 
> 时间：2013-02-17T04:30:07.657
> 
> 标签：java, macos, ant, jarbundler

我使用以下内容构建我的应用程序`build.xml` 当我单击 release/MyApp.app 时，它不会运行！！！

但是当我这样做时

```
java -jar release/MyApp.app/Contents/Resources/Java/helloworld.jar 
```

可执行文件（Windows）确实出现了，这意味着它`helloworld.jar`是正确构建的。但由于某种原因，`app`不知道加载它。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="App Builder" default="build_app" basedir=".">

  <taskdef name="jarbundler"
           classname="net.sourceforge.jarbundler.JarBundler" />

  <target name="build_app">
    <jarbundler dir="release"
            name="MyApp"
            mainclass="com.test" 
            jar="helloworld.jar" />
  </target>
</project> 
```

有谁知道这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:31:38.863

+1 垃圾神。测试时（来自您之前的问题），我的应用程序无法启动。这是因为 Stub 使用的是 Java 6 而不是 Java 7 ......看图。一旦我将文件编译到 Java 6，它就可以正常工作了。

另外，请确保您包含所有相关的 Jar 文件...

我用这个作为我的目标...

```
<target name="default">
    <delete dir="package" failonerror="false"/>
    <mkdir dir="package"/>
    <jarbundler dir="package"
                name="Cars"
                mainclass="testanimation10.TestAnimation10">
        <jarfileset dir="dist">
            <include name="**/*.jar" />
            <!--<exclude name="**/CVS" />-->
        </jarfileset>
    </jarbundler> 
```

**更新**

我从 java.net 下载了[Java Application Bundler](http://java.net/projects/appbundler)，它似乎是 Apple 捆绑器的替代品，并遵循[此处](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)的基本说明，并且能够构建一个能够运行在 Java 7 下编译的二进制文件的包

# batch-file - 用于移动 n 个文件交换时间的批处理脚本

> ID：14917997
> 
> 赞同：0
> 
> 时间：2013-02-17T04:31:22.663
> 
> 标签：batch-file

我目前有一个脚本可以将 temp_dir 中的所有文件移动到 dir 并处理文件。我想将其更改为批量移动 n 个文件来处理它们。通过批处理脚本实现它的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T04:55:42.973

我不太确定你需要什么。

*   您是否打算分批处理每个文件，直到没有文件剩余？
*   或者您是否打算只处理每个目录的前 N ​​个文件，而忽略其余所有文件？

* * *

### 场景一：N个批次处理每个文件

您可以使用模运算暂停每 N 个循环。模数计算除法后的余数。如果模数为 0，则分子除以分母。它是这样工作的：

```
0 % 3 = 0
1 % 3 = 1
2 % 3 = 2
3 % 3 = 0
4 % 3 = 1
5 % 3 = 2
6 % 3 = 0 
```

等等。

这是一个示例批处理脚本，其中包含一个模运算来暂停每个`%filesPerChunk%`循环迭代。用`.bat`扩展名保存它并尝试一下。

```
@echo off
setlocal enabledelayedexpansion

set /a "filesPerChunk=5, idx=0"

for /F "delims=" %%I in ('dir /s /b') do (
    echo Processing %%I

    set /a "idx+=1"
    set /a "mod=idx %% filesPerChunk"

    if !mod! equ 0 (
        echo --- END OF CHUNK ---
        pause
    )

) 
```

* * *

### 场景 2：只处理每个目录的前 N ​​个文件

这可以通过一个简单的计数器来完成，该计数器针对遇到的每个文件递增，并在遇到新目录时重置为 0。

```
@echo off
setlocal enabledelayedexpansion

set filesPerChunk=5

for /F "delims=" %%I in ('dir /s /b') do (

    if "!dir!"=="%%~dpI" (
        set /a "idx+=1"
    ) else (
        if defined dir echo ---
        set idx=0
        set "dir=%%~dpI"
    )

    if !idx! lss %filesPerChunk% (
        echo Processing %%I
    )
) 
```