# StackOverflow 问答 14334000-14334999

# python-2.7 - PyQGIS 加载 DLL 失败

> ID：14334000
> 
> 赞同：1
> 
> 时间：2013-01-15T08:47:28.903
> 
> 标签：python-2.7, qgis

我已经在“gis.stackexchange”论坛中问过这个问题，但它似乎更适合这个问题。

我在 Python Shell 导入模块“qgis.core”时遇到问题。当我输入“import qgis.core”时，Shell（“idle.pyw”）给了我这个错误：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import qgis.core
ImportError: DLL load failed: Impossibile trovare il modulo specificato (Trad "Impossible to find the specified module"). 
```

我已经按照“PyQGIS 食谱”说明将环境设置为指向正确的文件夹。就我而言，路径是：

PYTHOPATH=C:\"QGIS_path"\apps\qgis\python; 路径=C:\"QGIS_path"\apps\qgis\bin。

我错过了什么吗？Shell 无法找到的正确库应该是什么？我正在使用 Windows 7 64 位、QGIS Lisboa（版本 1.8）、Python 2.7.2（包含在 QGIS 包中的那个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T16:59:12.887

我不喜欢混合我的 python 安装，所以我动态添加路径。
您需要的路径如下：

```
import sys
sys.path.extend([r"C:\Program Files\QGIS Valmiera\apps",r"C:\Program Files\QGIS Valmiera\apps\qgis\bin",r"C:\Program Files\QGIS Valmiera\apps\Python27"])

import qgis.core 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-31T05:50:07.807

检查此链接[import-qgis-core-in-pycharm-no-module-named-pyqt5-qtcore](https://gis.stackexchange.com/questions/337558/import-qgis-core-in-pycharm-no-module-named-pyqt5-qtcore) 如果需要，也可以忽略 pycharm 设置。

这个对我有用，

设置-qgispy.bat

`@ECHO off set OSGEO4W_ROOT=C:\QGIS call "%OSGEO4W_ROOT%\bin\o4w_env.bat" call "%OSGEO4W_ROOT%\bin\qt5_env.bat" call "%OSGEO4W_ROOT%\bin\py3_env.bat" path %OSGEO4W_ROOT%\apps\qgis\bin;%PATH% set QGIS_PREFIX_PATH=%OSGEO4W_ROOT%\apps\qgis set GDAL_FILENAME_IS_UTF8=YES set VSI_CACHE=TRUE set VSI_CACHE_SIZE=1000000 set QT_PLUGIN_PATH=%OSGEO4W_ROOT%\apps\qgis\qtplugins;%OSGEO4W_ROOT%\apps\qt5\plugins set PYTHONPATH=%OSGEO4W_ROOT%\apps\qgis\python set PYTHONHOME=%OSGEO4W_ROOT%\apps\Python37 set PYTHONPATH=%OSGEO4W_ROOT%\apps\Python37\lib\site-packages;%PYTHONPATH% set QT_QPA_PLATFORM_PLUGIN_PATH=%OSGEO4W_ROOT%\apps\Qt5\plugins\platforms set QGIS_PREFIX_PATH=%OSGEO4W_ROOT%\apps\qgis`

接着，

C:\> 设置-qgispy.bat

C:\> python 文件.py

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-03-08T07:07:45.103

我认为不是 sys.path.extend()。从 qgis python 控制台复制 sys.path 并使用它。希望这会奏效。

# java - 关于使用 Java 处理大型 XLS 文件的 API / 框架的建议

> ID：14334008
> 
> 赞同：-1
> 
> 时间：2013-01-15T08:47:58.643
> 
> 标签：java, open-source, xls

我需要技术选择来使用 Java 处理更大的 XLS 文件

1.  它需要处理没有内存不足异常的xmls文件

2.  它需要在内存（工作内存）使用上进行优化

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:49:29.223

Apache POI 框架是最佳选择 -[链接](http://poi.apache.org/)

它的[基于事件的 api](http://poi.apache.org/spreadsheet/how-to.html#event_api)有助于最佳的内存优化

[如果正确实施，它可以处理更大的 Excel 工作表，如此处](https://stackoverflow.com/questions/4897766/processing-large-xlsx-file-in-java)所示

> 示例读取大文件：

```
 public void parseExcel(File file) throws IOException {

            OPCPackage container;
            try {
                container = OPCPackage.open(file.getAbsolutePath());
                ReadOnlySharedStringsTable strings = new ReadOnlySharedStringsTable(container);
                XSSFReader xssfReader = new XSSFReader(container);
                StylesTable styles = xssfReader.getStylesTable();
                XSSFReader.SheetIterator iter = (XSSFReader.SheetIterator) xssfReader.getSheetsData();
                while (iter.hasNext()) {
                    InputStream stream = iter.next();

                    processSheet(styles, strings, stream);
                    stream.close();
                }
            } catch (InvalidFormatException e) {
                e.printStackTrace();
            } catch (SAXException e) {
                e.printStackTrace();
            } catch (OpenXML4JException e) {
                e.printStackTrace();
            }

    }

    protected void processSheet(StylesTable styles, ReadOnlySharedStringsTable strings, InputStream sheetInputStream) throws IOException, SAXException {

            InputSource sheetSource = new InputSource(sheetInputStream);
            SAXParserFactory saxFactory = SAXParserFactory.newInstance();
            try {
                SAXParser saxParser = saxFactory.newSAXParser();
                XMLReader sheetParser = saxParser.getXMLReader();
                ContentHandler handler = new XSSFSheetXMLHandler(styles, strings, new SheetContentsHandler() {

                @Override
                    public void startRow(int rowNum) {
                    }
                    @Override
                    public void endRow() {
                    }
                    @Override
                    public void cell(String cellReference, String formattedValue) {
                    }
                    @Override
                    public void headerFooter(String text, boolean isHeader, String tagName) {

                    }

                }, 
                false//means result instead of formula
                );
                sheetParser.setContentHandler(handler);
                sheetParser.parse(sheetSource);
            } catch (ParserConfigurationException e) {
                throw new RuntimeException("SAX parser appears to be broken - " + e.getMessage());

} 
```

# javascript - 上传之前在 Phonegap 中压缩视频文件

> ID：14334009
> 
> 赞同：1
> 
> 时间：2013-01-15T08:48:06.850
> 
> 标签：javascript, android, cordova, phonegap-plugins

您好我正在使用 Phonegap 捕获视频方法来捕获和上传视频，但是我想在上传到服务器之前压缩文件。

有什么方法可以在客户端压缩文件吗？

这效率如何？

任何指针将不胜感激。

伊斯梅尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:57:23.230

没有本机 API 可以执行此操作。但是，您可以试试这个名为 JSZip 的库：

[http://stuartk.com/jszip/](http://stuartk.com/jszip/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:22:30.457

我会考虑将文件转换为 mpeg 压缩。

试试这个 jquery 库[链接](http://fmj-sf.net/ffmpeg-java/getting_started.php)

那么您不需要解压缩文件，您可以将其作为压缩格式播放。

# uninstallation - 如何使用 installjammer 执行静默卸载

> ID：14334012
> 
> 赞同：2
> 
> 时间：2013-01-15T08:48:13.843
> 
> 标签：uninstallation, silent

我正在尝试使用 InstallJammer 进行静默安装和卸载。

通过在平台信息下将默认安装模式更改为静默，我能够静默安装。但是如何将卸载指定为静默？

提前致谢，

斯里雷卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T13:08:52.560

InstallJammer 将在已安装产品的根目录中创建uninstall.exe。做

```
uninstall.exe /s 
```

从命令提示符进行静默卸载。

您可以通过执行以下操作查看所有可能的选项：

```
uninstall.exe /? 
```

# macos - 我应该如何在 C 中逐行读取文件？

> ID：14334014
> 
> 赞同：0
> 
> 时间：2013-01-15T08:48:36.150
> 
> 标签：macos, unicode, utf-8, getline, fgets

我想逐行读取文件。我`fgets()`工作正常，但是如果一行比我传递给的缓冲区大小长，我不确定该怎么办`fgets()`？此外，由于`fgets()`似乎不支持 Unicode，并且我想允许 UTF-8 文件，它可能会错过行尾并读取整个文件，不是吗？

然后我想我会用`getline()`. 但是，我在 Mac OS X 上，虽然在`getline()`中指定`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/stdio.h`，但不在 中`/usr/include/stdio`，所以`gcc`在 shell 中找不到它。显然，它并不是特别便携，而且我希望我正在开发的库通常是有用的。

那么在 C 中逐行读取文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:37:43.347

首先，您不太可能需要担心像[U+2028](http://www.charbase.com/2028-unicode-line-separator)这样的非标准行终止符。普通文本文件不应该包含它们，并且绝大多数现有的读取普通文本文件的软件都不支持它们。您提到`getline()`了哪些在 glibc 中可用，但在 MacOS 的 libc 中不可用，如果`getline()`确实支持这种花哨的行终止符，我会感到惊讶。几乎可以肯定的是，您只需支持 LF (U+000A) 和 CR+LF (U+000D U+000A) 就可以逃脱。为此，您无需关心 UTF-8。这就是 UTF-8 的 ASCII 兼容性的美妙之处，而且是设计使然。

至于比你传递给的缓冲区更长的支持行`fgets()`，你可以在 fgets 周围加上一点额外的逻辑来做到这一点。在伪代码中：

```
while true {
    fgets(buffer, size, stream);
    dynamically_allocated_string = strdup(buffer);
    while the last char (before the terminating NUL) in the buffer is not '\n' {
        concatenate the contents of buffer to the dynamically allocated string
        /* the current line is not finished. read more of it */
        fgets(buffer, size, stream);
    }
    process the whole line, as found in the dynamically allocated string
} 
```

`/etc/passwd`但是，我想您会再次发现，从解析系统配置文件之类的软件到（某些）脚本语言的软件，确实有很多软件根本不会打扰。根据您的用例，使用“足够大”的缓冲区（例如 4096 字节）并声明您不支持更长的行可能就足够了。您甚至可以将其称为安全功能（行长限制是防止来自精心制作的输入文件的资源耗尽攻击）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:18:54.143

基于[这个答案](https://stackoverflow.com/a/314422/79202)，这就是我想出的：

```
#define LINE_BUF_SIZE 1024

char * getline_from(FILE *fp) {
    char * line = malloc(LINE_BUF_SIZE), * linep = line;
    size_t lenmax = LINE_BUF_SIZE, len = lenmax;
    int c;

    if(line == NULL)
        return NULL;

    for(;;) {
        c = fgetc(fp);
        if(c == EOF)
            break;

        if(--len == 0) {
            len = lenmax;
            char * linen = realloc(linep, lenmax *= 2);

            if(linen == NULL) {
                // Fail.
                free(linep);
                return NULL;
            }
            line = linen + (line - linep);
            linep = linen;
        }

        if((*line++ = c) == '\n')
            break;
    }
    *line = '\0';
    return linep;
} 
```

阅读`stdin`：

```
char *line;
while ( line = getline_from(stdin) ) {
    // do stuff
    free(line);
} 
```

要读取其他文件，我首先使用以下命令打开它`fopen()`：

```
FILE *fp;
fp = fopen ( filename, "rb" );
if (!fp) {
    fprintf(stderr, "Cannot open %s: ", argv[1]);
    perror(NULL);
    exit(1);
}

char *line;
while ( line = getline_from(fp) ) {
    // do stuff
    free(line);
} 
```

这对我来说非常有效。我很想看到[@paul-tomblin 建议](https://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c/314422#comment156611_314422)`fgets()`的替代方案，但我今晚没有精力弄清楚。

# postgresql - 如何使 PostgreSQL 中的全文搜索有用？

> ID：14334028
> 
> 赞同：0
> 
> 时间：2013-01-15T08:49:58.463
> 
> 标签：postgresql

我在 postgresql 8.4 中有一本俄语词典。

我尝试使用完整搜索，但遇到了一些麻烦。

1.  我没有得到任何结果，因为尝试按 4-5 个符号查找单词。例如：

    ```
    select * from parcels_temp where name_dispatcher @@ to_tsquery('Нику'); 
    ```

    获取结果：0 行。

    ```
    select * from parcels_temp where name_dispatcher @@ to_tsquery('Никуд'); 
    ```

    获取结果：2 行。这是正确的。

2.  我尝试通过字典中未包含的单词进行搜索。这种情况下我该怎么办？如何在 PostgreSQL 中更新字典？

3.  它必须创建列`tsvector`还是我可以使用`to_tsvector`我查询的函数？还是更慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:48:58.950

1.  Postgresql 索引器不处理短于 3 个字符的字符串。这样做是为了减少索引大小和生成时间。

2.  很显然，你什么也得不到。有更新字典的方法，请参阅文档。

3.  [在 tsvector 字段上使用 GIN 索引](http://www.postgresql.org/docs/9.2/static/textsearch-indexes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T07:13:04.293

1：默认情况下，postgreSQL 只匹配整个单词。您可以选择进行前缀匹配：

```
select * from parcels_temp where name_dispatcher @@ to_tsquery('Нику:*'); 
```

请参阅：[https ://www.postgresql.org/docs/9.5/static/textsearch-controls.html](https://www.postgresql.org/docs/9.5/static/textsearch-controls.html)

3：可以在其上创建列和GIN索引，也可以不创建列只创建索引。我认为它们在性能方面是相同的。详情见： [https ://www.postgresql.org/docs/9.5/static/textsearch-tables.html](https://www.postgresql.org/docs/9.5/static/textsearch-tables.html)

# sed - 使用 sed 查找两个模式之间的线条

> ID：14334032
> 
> 赞同：7
> 
> 时间：2013-01-15T08:50:03.037
> 
> 标签：sed

我在 text.txt 中有如下几行：

```
blah blah..
blah abc blah..
blah abc blah
blah blah..
blah blah..
blah blah..
blah efg blah blah
blah blah..
blah abc blah
blah abc blah
blah abc blah
blah abc blah
blah abc blah
blah blah..
blah efg blah blah
blah blah..
blah blah.. 
```

我想在“efg”和“efg”之前输出每次最后出现的“abc”之间的行，对于上面的例子，我想输出：

```
blah abc blah
blah blah..
blah blah..
blah blah..
blah efg blah blah
blah abc blah
blah blah..
blah efg blah blah 
```

我知道 sed 可以使用两种模式选择范围，例如：

```
sed -n '/abc/,/efg/p' test.txt 
```

但是输出将从“abc”的第一次出现而不是最后一个开始，输出如下：

```
blah abc blah..
blah abc blah
blah blah..
blah blah..
blah blah..
blah efg blah blah
blah abc blah
blah abc blah
blah abc blah
blah abc blah
blah abc blah
blah blah..
blah efg blah blah 
```

我可以在命令行上进行任何增强，以便输出将从最后一次出现的“abc”开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T09:25:23.793

这可能对您有用（GNU sed）：

```
sed -n '/\<abc\>/,/\<efg\>/{/\<abc\>/{h;d};H;/\<efg\>/{x;p}}' file 
```

# facebook-graph-api - 调用 Ads API 到达时间返回“应用程序没有此操作的权限”

> ID：14334034
> 
> 赞同：1
> 
> 时间：2013-01-15T08:50:16.510
> 
> 标签：facebook-graph-api, facebook-ads-api

按照达到的广告 API 文档（[http://developers.facebook.com/docs/reference/ads-api/reachestimate/](http://developers.facebook.com/docs/reference/ads-api/reachestimate/)），我在调用时收到“错误”响应

**https://graph.facebook.com/act_0000000000000000/reachestimate?currency=EUR&targeting_spec={'countries':['US']}&access_token= *_* __**

（注意：act_0000000000000000 是我的用户 ID，**_**是我的访问令牌 - 这些令牌适用于其他广告 API 调用）。

使用 Graph API Explorer 工具，我收到有关此 API 调用的以下响应

```
{
  "error": {
    "message": "(#10) Application does not have permission for this action",
    "type": "OAuthException",
    "code": 10
  }
} 
```

但是，当我打电话时

**https://graph.facebook.com/1111111111111111/reachestimate?currency=EUR&targeting_spec={'countries':['US']}&access_token= *_* __**

其中 1111111111111111 是一个广告组，我得到一个有效的数据结构。

有没有人在其他地方遇到过这个？是否有某个“神奇”设置可以在用户帐户上启用此功能（为 ads_management、offline_access 启用）？

任何想法都非常受欢迎。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:29:44.597

谢谢@Igy - 刚刚确认我的问题确实是在帐户字段中滥用了我的 UserID - 已经迁移这些查询以使用指定的帐户 ID 并按预期工作。

# google-chrome - Chrome 说我的网站包含恶意软件？

> ID：14334035
> 
> 赞同：8
> 
> 时间：2013-01-15T08:50:26.883
> 
> 标签：google-chrome, malware-detection

Chrome 说，当我访问我的网站时，搜索后我从网站上清理了我的代码，但 chrome 仍然显示然后我从我的网站上删除了所有文件，只是上传了 index.html（空白文件），但仍然显示警告。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T09:08:27.743

Chrome 警告将基于记录在站点或域中发现恶意软件的黑名单，这不是实时“扫描”，并不一定意味着恶意软件出现在*该*页面或特定*时间*。从您的问题中不清楚您是否创建了一个新文件夹和 index.html 并且在浏览到该 URL 时还看到了恶意软件警告，或者您是否已将网站内容替换为空文件夹和 index.html并且该警告仍在显示。采取措施对网站进行消毒后，您可以申请审核，这有助于消除[http://support.google.com/webmasters/bin/answer.py?hl=zh-CN&answer=163633](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=163633)警告。

即使您对自己的网站内容有信心，也应该认真对待恶意软件警告，因为黑客使用自动工具包来查找网站中的漏洞并将代码注入其中以感染访问者，因为这些工具包在很大程度上是自动的，没有默默无闻的保护你可能会假设。

如果您无法找到并解决 Chrome 警告的问题，您应该为您的访问者 - 以及您自己的声誉 - 删除网站内容，直到您解决问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-13T06:54:05.160

谷歌浏览器的恶意软件黑名单应该基于谷歌安全浏览建议使用的相同数据。您可以通过以下 url访问特定站点（例如*stackoverflow.com ）的此信息：*

`http://www.google.com/safebrowsing/diagnostic?site=stackoverflow.com`

只需将域替换为您自己的域，它就会向您说明为什么您的站点会在 Chrome 中生成恶意软件警告。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-09-22T03:30:57.457

1.在浏览器窗口的右上角，点击Chrome菜单Chrome菜单。选择设置。单击显示高级设置。在“隐私”下，取消选中“保护您和您的设备免受危险网站”复选框。

# ruby-on-rails-3 - 设计 - 在特定密码更改页面中更改其他用户密码时出现批量分配错误

> ID：14334036
> 
> 赞同：1
> 
> 时间：2013-01-15T08:50:28.843
> 
> 标签：ruby-on-rails-3, devise

在我正在使用的 RoR 应用程序中，客户端需要进行一些自定义 - 基本上他要求管理员能够更改其他用户的密码，并且密码更改页面与编辑个人资料详细信息的页面不同。我已经设置了自定义操作来处理这个问题，即我自己在用户控制器中的 change_password 操作。

```
Users Controller Actions
def change_password
    @user = User.find(params[:id])
  end

  def update_password # I post to this
    @user = User.find(params[:id])
    if @user.update_attributes!(params[:user])
      redirect_to users_path, :notice => "User updated."
    else
      redirect_to users_path, :alert => "Unable to update user."
    end
  end 
```

这是 routes.rb 条目

```
devise_for :users, :skip => [:registrations]                                          
    as :user do
      get 'users/edit' => 'devise/registrations#edit', :as => 'edit_user_registration'    
      put 'users' => 'devise/registrations#update', :as => 'user_registration'            
    end
  resources :users
...

  match "/users/:id/change_password" =>"users#change_password", :as=>:change_password_user, :via=>:get
  match "/users/:id/update_password" => "users#update_password", :as=>:update_password_user, :via=>:post 
```

这是我的用户模型

```
class User < ActiveRecord::Base
  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable, :registerable,
  devise :database_authenticatable, #:registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :as => :admin
  attr_protected :username, :name, :email, :password, :password_confirmation, :remember_me

  validates_uniqueness_of :username
  validates_presence_of :username, :email

  validates_uniqueness_of :email
end 
```

但是我不断收到这个质量属性分配错误

```
Can't mass-assign protected attributes: password, password_confirmation 
```

奇怪的是我已将所有这些属性设置为accessible_protected。我可以编辑其他用户的详细信息，但不能编辑他们的密码。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:16:47.940

有很多方法可以解决这个问题。我将尝试解释一些。

我认为你的问题的关键是你混淆了`MassAssignmentSecurity`角色。您已经为角色定义了 a并`Whitelist`为`admin`角色定义了 a 。该错误表明您尝试分配角色上的某些内容。`Blacklist``default``Blacklist``default`

由于您正在定义不同的角色，我假设您可能希望以这种方式修复它：

更改您的管理员`Whitelist`

```
attr_accessible :role_ids, :password, :password_confirmation, as: :admin 
```

然后分配为管理员：

```
if @user.update_attributes!(params[:user], as: :admin) 
```

（如果您的控制器操作包括密码字段以外的字段，这可能会导致新的违规行为。）

另一种选择是坚持使用默认角色。您可以通过几种方式绕过安全性。

我不推荐的第一个选项是不将密码和密码确认作为`User`参数的一部分传递，并在您的视图中单独发送。然后，您可以像这样手动设置这些字段：

```
@user.assign_attributes(params[:user])
@user.password = params[:password]
@user.password_confirmation = params[:password_confirmation]
if @user.save! 
```

但是，执行以下操作更容易跳过保护：

```
@user.assign_attributes(params[:user], without_protection: true)
if @user.save! 
```

有关更多信息，本指南相当不错： http: [//guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

我希望这会有所帮助。

# java - Android 应用程序的 java.net.UnknownHostException

> ID：14334039
> 
> 赞同：1
> 
> 时间：2013-01-15T08:50:37.283
> 
> 标签：java, android, android-manifest

我面临着这个让我发疯的挑战，不知道如何解决它。我开发了一个 android 应用程序，它将使用 post 将一些数据发布到远程 url。这是我的处理方法

```
public static String fetchStringFromRemotePOST(String url,List<NameValuePair> nameValuePairs){
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);
    Log.i("URL",url);
    String line = "";
    String content = "";
    try{
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = client.execute(post);

        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        while ((line = rd.readLine()) != null) {
          content += line;              
        }
    }catch(Exception e){
        Log.d("String Fetch ERROR",e.toString());
    }
    return content;
} 
```

并调用该方法

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("post","okpokor"));      
String url = "http://wwww.host.com/post.php";    
String response = UtilMethod.fetchStringFromRemotePOST(url,nameValuePairs); 
```

而且，我已经在 Android 清单文件中包含了互联网权限

```
<uses-permission 
        android:name="android.permission.INTERNET" />
<application
 ... 
```

我已经解决了之前在其他线程上讨论过的相同问题，但没有一个建议对我真正有用，比如重新启动 Eclipse 和 AVD 等建议。

真的需要帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:01:02.020

检查你的 URL 你有 4

> 万维网

，
将其更改为：

> [http://www.host.com/post.php](http://www.host.com/post.php)

# iphone - 无法从 NSUserDefaults 检索 NSMutableArray

> ID：14334043
> 
> 赞同：0
> 
> 时间：2013-01-15T08:50:52.130
> 
> 标签：iphone, objective-c, xcode, nsmutablearray, nsuserdefaults

我在本地存储中为包含 NSString 列表的 NSMutableArray 保留数据时遇到问题。当应用程序运行时，我有一个保存方法和一个获取方法似乎都可以工作。但是，一旦我关闭应用程序并重新启动，数组中的项目就消失了。

```
NSMutableArray*ImageTags; 
```

获取数据

```
-(NSMutableArray*)GetDataNSMutableArray:(NSString*)ItemName
{
    NSMutableArray *GetData = [[NSMutableArray alloc] init];
    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingSavedArray = [currentDefaults objectForKey:ItemName];
    if (dataRepresentingSavedArray != nil)
    {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingSavedArray];
        if (oldSavedArray != nil)
            GetData = [[NSMutableArray alloc] initWithArray:oldSavedArray];
        else
            GetData = [[NSMutableArray alloc] init];
    }
    return GetData;
} 
```

保存数据

```
-(void)SaveDataNSMutableArray:(NSString*)ItemName:(NSMutableArray*)Data
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:Data] forKey:ItemName];

} 
```

如何添加项目

```
[ImageTags addObject:Control.titleLabel.text] 
```

如何保存数组

```
[super SaveDataNSMutableArray:CVC_ImageURL:ImageTags]; 
```

如何检索数组

```
ImageTags = [super GetDataNSMutableArray:CVC_ImageURL]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:55:37.800

NSUserDefaults 总是返回不可变的实例。

不相关：（约定说 methodNames 应始终以小写字母开头）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T08:56:41.253

```
[[NSUserDefaults standardUserDefaults] synchronize] 
```

将 NSUserDefaults 中的所有内容转储到持久存储

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:57:22.543

您不能将可变数组存储到用户默认值。存储不可变副本并检索它并转换为可变副本以在下次启动期间访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:41:52.943

您可以在保存时进行同步：

```
-(void)SaveDataNSMutableArray:(NSString*)ItemName:(NSMutableArray*)Data
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:Data] forKey:ItemName];

[[NSUserDefaults standardUserDefaults] synchronize] //add this code of a line.

} 
```

# ios - 如何在目标 C 中调用 JavaScript 函数

> ID：14334047
> 
> 赞同：24
> 
> 时间：2013-01-15T08:50:59.830
> 
> 标签：ios, uiwebview

我是 Objective C 的新程序员。我在 Objective C 中添加了一些 html 文件。在这个 html 文件中包含简单的 javascript 函数。我需要通过目标 C 代码调用该函数。我用谷歌尝试了很多时间。但我找不到真正的方法来做到这一点。波纹管包含 html 文件：

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function myFunction()
            {
                alert("Hello World!");
            }
            </script>
    </head>

    <body>
        <button onclick="myFunction()">Try it</button>
    </body>
</html> 
```

我这样调用这个函数：它是正确的还是错误的？如果错了，该怎么做。请帮忙。

```
NSString *path;
NSBundle *thisBundle = [NSBundle mainBundle];
path = [thisBundle pathForResource:@"first" ofType:@"html"];
NSURL *instructionsURL = [NSURL fileURLWithPath:path];
[webView loadRequest:[NSURLRequest requestWithURL:instructionsURL]];

 NSString * jsCallBack = [NSString stringWithFormat:@"myFunction()"];
 [webView stringByEvaluatingJavaScriptFromString:jsCallBack];

[webView stringByEvaluatingJavaScriptFromString:@"myFunction()"]; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-15T09:22:13.550

```
NSString *path;
NSBundle *thisBundle = [NSBundle mainBundle];
path = [thisBundle pathForResource:@"first" ofType:@"html"];
NSURL *instructionsURL = [NSURL fileURLWithPath:path];
[webView loadRequest:[NSURLRequest requestWithURL:instructionsURL]];

 NSString * jsCallBack = [NSString stringWithFormat:@"myFunction()"];
 [webView stringByEvaluatingJavaScriptFromString:jsCallBack];

[webView stringByEvaluatingJavaScriptFromString:@"myFunction()"]; 
```

如果所有这些代码都是从一个地方调用的，那么它将无法工作，因为页面加载是异步的，并且带有 JavaScript 代码的页面此时还没有准备好。尝试`[webView stringByEvaluatingJavaScriptFromString:@"myFunction()"];`在 UIWebViewDelegate 回调方法中调用此方法`–webViewDidFinishLoad:`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-21T11:31:51.377

```
<!DOCTYPE html>
<html>
<head>

    <script type="text/javascript" charset="utf-8" src="your.js"></script>
    <script type="text/javascript" charset="utf-8" src="andYourJsfileName.js"></script>

    <script>
        function myFunction('yourParameter') 
        {
            // do your javascript operation

            //alert("my Hello World!");
            return value;
        }

    </script>
</head>

<body>
    <!--button onclick="myFunction()">Try it</button-->
</body> 
```

将 html 文件添加到项目文件夹。将您的 javascript 文件也添加到项目文件夹中。

将 html 文件和本机代码添加到您的 viewController.m 之后

```
-(void)loadMyWebView {
    webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 100, 200)];
    NSString *path;
    NSBundle *thisBundle = [NSBundle mainBundle];
    path = [thisBundle pathForResource:@"first" ofType:@"html"];
    NSURL *instructionsURL = [NSURL fileURLWithPath:path];

    NSString* htmlString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

    webView.delegate=self;

    [webView loadHTMLString:htmlString baseURL:instructionsURL];
    // [self.view addSubview:webView];  (if you want to access the javascript function and don't want to add webview, you can skip that also.)
}

- (void)webViewDidFinishLoad:(UIWebView*)theWebView {
    NSString* returnValue =[theWebView stringByEvaluatingJavaScriptFromString:@"myFunction('pass your parameter')"];
    NSLog(@"returnValue = %@ ",returnValue);
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{

    NSLog(@" didFailLoadWithError");
} 
```

在你的 didLoad 方法中调用它 `[self loadMyWebView];`

在这里，您可以将任何 javascript 文件添加到项目中并将其包含到 html 文件中。您可以在标签内调用 javascript 函数。（就像你以前调用 js 函数一样。）

您可以将任何参数传递给 javascript 函数并将任何参数返回给目标函数。

**记住 :::** 添加所有 js 文件后不要忘记将它们添加到***Copy Bundle Resources***

**为了避免警告 :::从*****编译源*** 中删除它们

 ** * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-03T11:36:50.410

可以使用 JavaScriptCore 框架从 Objective-C 运行 JavaScript 代码。

```
#import <JavaScriptCore/JavaScriptCore.h>

...

JSContext *context = [[JSContext alloc] init];
[context evaluateScript: @"function greet(name){ return 'Hello, ' + name; }"];
JSValue *function = context[@"greet"];
JSValue* result = [function callWithArguments:@[@"World"]];
[result toString]; // -> Hello, World 
```

这是一个演示：

[https://github.com/evgenyneu/ios-javascriptcore-demo](https://github.com/evgenyneu/ios-javascriptcore-demo)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-25T13:29:30.710

文件名.js：

```
function greet() {
    hello(“This is Javascript function!”);
} 
```

将此文件复制到捆绑资源中。

现在`#import <JavaScriptCore/JavaScriptCore.h>`在头文件中

```
 @property (nonatomic,strong) JSContext *context; // Declare this in header file

       // This code block goes into main file
        NSString *scriptPath = [[NSBundle mainBundle] pathForResource:@"FileName" ofType:@"js"];
        NSString *scriptString = [NSString stringWithContentsOfFile:scriptPath encoding:NSUTF8StringEncoding error:nil];

        self.context = [[JSContext alloc] init];
        [self.context evaluateScript:scriptString];

        self.context[@"hello"] = ^(NSString text) {
            NSLog(@"JS : %@",text);
        }

        JSValue *function = self.context[@"greet"];
        [function callWithArguments:@[]]; 
```

这个代码块对我有用。它显示“这是 Javascript 函数！” 在控制台中。希望这有效！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-12T06:27:35.920

试试这个：

```
NSString *jsCallBack = [NSString stringWithFormat:@"setPhoto('%@')",profileImgPath];

[webView stringByEvaluatingJavaScriptFromString:jsCallBack]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-08T07:06:51.437

demo.js 文件：

```
function say(data) {
  return data;
} 
```

视图控制器.m

```
- (NSString *)invokeJS {

    NSString *scriptPath = [[NSBundle mainBundle] pathForResource:@"demo" ofType:@"js"];
    NSLog(@"path: %@", scriptPath);
    NSString *script = [NSString stringWithContentsOfFile:scriptPath encoding:NSUTF8StringEncoding error:nil];

    self.context = [[JSContext alloc] init];
    [self.context evaluateScript:script];

    JSValue *function = self.context[@"say"];//invoke function name
    JSValue *data = [function callWithArguments:@[@"Hello World"]];//invoke function argument

    NSString *result = [data toString];//the result: Hello World

    return result;
} 
```*

# selenium - Selenium 中的 ElementNotVisibleException

> ID：14334048
> 
> 赞同：1
> 
> 时间：2013-01-15T08:51:06.533
> 
> 标签：selenium, selenium-webdriver, selenium-chromedriver

即使在实例化我使用的 WebDriver 时，Selenium WebDriver 也会为正在加载的元素在弹出窗口中抛出 ElementNotVisibleException 问题：

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

发生在 Chromedriver 和 IEDriver

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:38:26.183

似乎解决方案很简单：

```
WebElement cBoxOverlay = wait.until(ExpectedConditions
            .visibilityOf(driver.findElement(By.id("cboxOverlay")))); 
```

驱动程序等待加载 cBox，然后尝试找到关闭按钮

# domain-driven-design - 事件溯源链事件

> ID：14334053
> 
> 赞同：6
> 
> 时间：2013-01-15T08:51:20.867
> 
> 标签：domain-driven-design, event-sourcing

我正在使用事件源实现有界上下文，但遇到了问题。假设我正在模拟一场足球比赛，我对个人进球（谁进球等）和总分都感兴趣。因此，如果我有一个 Match 聚合根，理想情况下我希望引发名为 GoalScored 和 ScoreChanged 的​​事件。我希望像这样从域中明确说明分数的原因是我不希望许多不同的侦听器和可能的其他有界上下文都计算相同的东西。

这看起来很简单，但是：Match 对象有一个添加新目标的 Goal() 方法。本着事件溯源的精神，这不会直接改变 Match 状态，而是引发一个 GoalScored 事件，该事件在 Match 中处理，然后改变状态（以及被推送到非规范化器的事件）。因此，就提高 ScoreChanged 而言，在处理 GoalScored 事件之前，分数实际上并没有改变，所以我是否应该引发另一个事件来响应该事件 (ScoreChanged)，从而有效地链接事件？我不这么认为，首先，当从事件存储重新加载聚合根时，每次都会创建大量额外事件以响应每个 GoalScored。

我还考虑过在引发 GoalScored 的命令处理程序中计算得分，这是一种“假设”的情况。然后我可以在命令处理程序中引发这两个事件。不过，我真的不想那样做——它看起来并不“正确”。计算分数对于足球来说很简单，但其他游戏（例如板球）需要更多的工作。

我可以将目标和得分都放在 GoalScored 事件中，这很公平，但又似乎不对 - 得分与 GoalScored 事件本身无关。

讨论事件溯源时使用的所有示例似乎都使用电子商务客户/订单域，而我从未见过与此类似的案例。

有没有人有处理这种情况的经验？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T16:05:13.823

就像其他建模一样，选择干净的域事件应该导致在域中镜像的概念。您说“分数与 GoalScored 事件本身无关”。但确实如此。在足球比赛中，比分可以改变的唯一方式是进球是否进球。但是，进球可以被收回，例如通过越位判罚或其他处罚。目前尚不清楚您是否要对此进行建模。

域方法一次发出多个事件是很常见的。一个好的框架将很容易将它们视为一组，例如作为单个提交。为什么不同时发出 GoalScored 和 ScoreChanged 事件？

您可能还想考虑这个域是否有任何命令。足球比赛本身就是记录系统。来自比赛的事件已经成为历史的记录。您是否只是在编写一个将事件流处理成更多事件流的系统？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-13T18:44:28.390

在考虑事件溯源时，通常会有所帮助的一件事是注意您的时态——您说的是 StartMatch，但在事件的意义上它实际上是事件 MatchStarted。

至于 ScoreChanged，您是否在 Match 之外使用此事件？如果不是，分数应该是唯一可公开访问的部分，而 GoalScored 事件只是改变了这一点。这以较小的方式保留了 CQRS（我如何获得分数并不取决于我如何更改它）。然后 Score 可以在内部保持一个状态，或者可以重播所有 GoalScored 事件以在每次调用它时得出一个数字。正确设计的事件源解决方案的“感觉”总是可以从事件中重新生成任何状态。

现在，如果 ScoreChanged 需要提醒系统的其他部分（例如玩家排名），您可以将事件多播到不同的根，或者您可能需要重构您的设计。在这种情况下，您是想实时更新球员，还是只在比赛结束后更新？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-30T10:06:28.957

我在 scala 中有一个用于事件溯源的开源项目，其中包含篮子如何使用它的示例。以防万一对你有用[https://github.com/politrons/Scalaydrated](https://github.com/politrons/Scalaydrated)

# java - 石英 cron 作业中的 NullPointerException

> ID：14334055
> 
> 赞同：0
> 
> 时间：2013-01-15T08:51:36.270
> 
> 标签：java, spring, spring-mvc, quartz-scheduler

我对使用 Quartz Scheduler 实现的 cron 作业有疑问。它抛出 NullPointerException。这个问题只发生在服务器上，所以我无法调试它。这是堆栈跟踪：

```
[org.quartz.core.JobRunShell] Job myExampleJobs.simple job threw an unhandled 
Exception: 
java.lang.NullPointerException
    at com.example.schedule.JobScheduler.autowireProcessor(JobScheduler.java:269)
    at com.example.schedule.Job.execute(Job.java:17)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) 
```

`JobScheduler`类没有 269 行，也没有`autowireProcessor`方法。也许这是来自 Spring 框架的方法？我找不到有关这种方法的任何信息。也许问题涉及 SimpleJob 或 JobScheduler 中的自动装配类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:10:50.197

您在该行中有不同版本的文件

```
com.example.schedule.JobScheduler.autowireProcessor 
```

似乎您已经从某处复制粘贴此代码，并且您访问了一些具有不同版本源的示例代码。

如果可能，提供更多代码。

# xml - Joomla，为特定视图添加任务参数

> ID：14334056
> 
> 赞同：4
> 
> 时间：2013-01-15T08:51:38.250
> 
> 标签：xml, view, joomla, task

我尝试添加 url 参数 task=all 车辆，但是在创建此视图的菜单链接后，任务参数仍然不存在

```
<?xml version="1.0" encoding="utf-8"?>
<metadata>
    <layout title="Multiple Categories">
        <message><![CDATA[Displays a selected categories of an application]]></message>
    </layout>

    <fields name="params">
        <fieldset name="params" addfieldpath="/administrator/components/com_vehiclemanager/elements" label="Params">
            <field name="categorylayout" type="categorylayout" default="1" class="inputbox" label="Select layout" multiple ="false" size="1" description="Choose a layout" required="false" />
            <field name="back_button" type="list" label="Back Button" required="false" description="Show/Hide a Back Button" >
                <option value="">Use Global</option>
                <option value="0">Hide</option>
                <option value="1">Show</option>
            </field>
            <field name="single_category" type="category" default="1" class="inputbox" label="Category" multiple ="true" size="1" description="Choose a vehicle Categories" required="true" />
        </fieldset>
    </fields>
    <url>
        <param name="task" value="all_vehicles" ></param>
    </url>
</metadata> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:31:12.283

你可以试试这个-

```
<!-- Add fields to the request variables for the layout. -->
<fields name="request">
    <fieldset name="request">    
        <field name="task" type="hidden"
            label=""
            required=""
            description=""
            default="all_vehicles"
        />
    </fieldset>
</fields> 
```

# sql-server - SQL Server 存储过程创建临时表并插入值

> ID：14334061
> 
> 赞同：8
> 
> 时间：2013-01-15T08:52:04.953
> 
> 标签：sql-server, sql-server-2005, stored-procedures

我正在尝试从不同的表中选择值并将其插入到临时表中。

我需要临时表中的标识字段。当我尝试执行以下代码时，它会引发错误：

> *消息 2714，级别 16，状态 1，过程 SelectCashDetails，第 27 行
> 数据库中已经有一个名为“#ivmy_cash_temp1”的对象。*

即使在引发相同的错误之后，我也会尝试将临时表更改为不同的名称。

这是我的代码：

```
ALTER PROCEDURE [dbo].[SelectCashDetails] 
(
   @trustcompanyid BigInt,
   @trustaccountid BigInt,
   @planid BigInt,
   @fromdate varchar(20),
   @todate varchar(20),
   @movetype varchar(20),
   @typedesc varchar(20)
)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    CREATE TABLE #ivmy_cash_temp1          
     ( tmovedate datetime,          
       tmovedesc varchar(20),    
       tmoneymovetype varchar(20),
       tplanbal decimal(18,6),         
       tsourcetype BigInt,           
       tdestinationtype BigInt) 

   SELECT 
       IDENTITY(int) AS id, 
       CMM.movedate,
       CDCP.paramdesc,
       CMM.movementtypecd,
       CMM.amountmoved,
       CMM.planbalance,
       cmm.sourceaccounttypeid,
       cmm.destinationaccounttypeid 
   into #ivmy_cash_temp1  
   from 
       cash_moneymove CMM 
   inner join 
       CDC_PARAMETERS CDCP on CMM.movedescriptioncd=CDCP.paramcd 
   where 
       CMM.movedescriptioncd = @typedesc 
       and PARAMNAME = 'Cash AccountType Desc'

   select * from #ivmy_cash_temp1
END 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T08:56:46.240

一条`SELECT INTO`语句为您创建表。不需要`CREATE TABLE`事先声明。

发生的事情是您在语句中创建`#ivmy_cash_temp1`，`CREATE`然后数据库在您执行`SELECT INTO`. 这会导致错误，因为它正在尝试创建您已经创建的表。

消除该`CREATE TABLE`语句或更改填充它的查询以使用`INSERT INTO SELECT`格式。

如果您需要将唯一 ID 添加到新行，那么最好使用`SELECT INTO`... 因为`IDENTITY()`仅适用于此语法。

# twitter - 从foursquare发布到twitter时的坐标差异

> ID：14334062
> 
> 赞同：1
> 
> 时间：2013-01-15T08:52:08.047
> 
> 标签：twitter, foursquare

我正在使用 twitter 数据（通过用户时间线 api 端点获取）和foursquare 数据（通过场地 api 端点）的组合，并且我看到foursquare 中的场地坐标之间存在一些差异（响应-> 场地-> 位置->lat/lng）和推文的“坐标”属性中返回的坐标（来自foursquare）。

例如在 api explorer [https://developer.foursquare.com/docs/explore#req=venues/4c1e4d1ec09ed13a66f8828e查看场地](https://developer.foursquare.com/docs/explore#req=venues/4c1e4d1ec09ed13a66f8828e)

我看到纬度和经度值分别为 38.506721964840004 和 -90.33079780133309。

在来自foursquare的一条推文中，引用了同一地点的URL，“坐标”属性被列为38.50676845，-90.33067839

虽然这不是很大的差异，但它可能在 11m 左右（取决于纬度）。我怀疑这是舍入错误，因为它不仅是最后一位不同的数字。

对此有何见解？一个是个人登记入住时的位置，另一个是实际场地位置吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:18:55.883

随着 Foursquare 收集更多信息并更新每个场地的位置模型，场地坐标会不断更新。

除了这些增量更改之外，场地管理员和许多超级用户还可以在不正确的情况下直接编辑场地的纬度/经度。

# php - 在 php 中使用 json_encode 方法时在数据库中插入重复条目

> ID：14334063
> 
> 赞同：0
> 
> 时间：2013-01-15T08:52:16.920
> 
> 标签：php, mysqli, prepared-statement, json

我在 php mysql 中遇到问题，在调用 json_encode 方法后在数据库中获得类似的条目。这是我的 php 代码：

```
class xyz
{

    private $_mysqli;

    public function __construct( $hostname, $user, $password, $database ) {

        $this->_mysqli = new mysqli( $hostname, $user, $password, $database );
        if (  mysqli_connect_errno() ) {

            die('couldn\'t connect connection ('. mysqli_connect_errno(). ')'. mysqli_connect_error() );
        }

        return $this->_mysqli;

    }

    public function insert( $user, $app ) {

        if ($stmt = $this->_mysqli->prepare("INSERT INTO `track` ( user, app ) VALUES (?, ?)")) {

            $stmt->bind_param( 'ss', $user, $app );

            $stmt->execute();

            $stmt->close();

        } else {

            printf( "Prepared Statement Error: %s\n", $this->_mysqli->error );
        }
    }

    public function __destruct() {

        return $this->_mysqli->close();

    }

    public function app( $params = array(), $index = NULL ) {

        //get ads from array based on scheduling

        if (is_null( $index )) {

            return $params;

        } else {

            //$this->insert( $user, $ap );

            echo json_encode(array('delay' => '43200000', 'success' => 'true', 'result' => json_encode($params[$index]) ));

        }
    }

}

error_reporting( E_ALL );
ini_set( "display_errors", 1 );

$user = $_REQUEST['user'];
$app = $_REQUEST['app'];

require 'config.inc.php'; //file contain db credentials and array named $params

$res = new xyz( 'localhost', 'root' , '#####' ,'user_db' );

$res->insert( $user, $app );
$res->app($params, 1); 
```

如果我调用`$res->insert_query( $imei, $pn )`and `$res->app($params, 1)`，它会在浏览器上显示一次 json，但会在数据库中插入两次条目。这两种情况都会发生，我可以将插入函数放在应用程序函数中，也可以使用类对象在外部调用。就好像我在这些功能中有一个错误。但我无法解决它，请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:30:50.660

由于我正在运行 ubuntu 11.10，并使用 chromium 浏览有**严重错误**的浏览器。在这个问题上花了几个小时后，我发现在使用 php 的**json_encode方法时，在****chromium 浏览器**中会出现另一个 mysql 插入查询，我还将 php 包从 5.3.6 升级到 5.4，但问题仍然存在于 chromium 上。另一方面，其他浏览器 chrome、mozilla firefox、safari 行为正常，只插入一个带有 json_encode 函数的条目。铬也没有动态更新，那么我们将它用于开发工作是可悲的。

# android - 如何在选项卡式活动中获取数据列表？

> ID：14334068
> 
> 赞同：4
> 
> 时间：2013-01-15T08:52:30.147
> 
> 标签：android, android-intent, android-emulator, android-listview, android-facebook

我制作了一个程序，在其中我正在获取我所有 Facebook 好友的列表以及他们的姓名、出生日期和个人资料图片，但我决定在我现有的程序中使用标签，因此我也为此编写了代码，但每当我运行我的应用程序，每次我得到标签但没有得到朋友列表时..

在我的情况下，我没有在 TabSample 类中获取 FriendsList 活动数据，为什么？

*SplashScreen.java:-*

```
 private final static int FACEBOOK_AUTHORIZE_ACTIVITY_RESULT_CODE = 0;
   private final static int FRIENDS_LIST_ACTIVITY = 1;
   public void onRequestReceived(int result, String message) {
    Log.d(LOG_TAG, "onRequestReceived(" + result + ")");
    if(isFinishing())
        return;
    switch (result) {
    case FacebookRequest.COMPLETED:
        Intent intent = new Intent(this, com.chr.tatu.sample.friendslist.TabSample.class);
        intent.putExtra("FRIENDS", message);
        while (System.currentTimeMillis() - startTime < DELAY) {
            try { Thread.sleep(50); } catch (Exception e) {}
        }
        startActivityForResult(intent, FRIENDS_LIST_ACTIVITY);
        isLoadingFriends = false;
        break;
    case FacebookRequest.IO_EXCEPTION:
    case FacebookRequest.FILE_NOT_FOUND_EXCEPTION:
    case FacebookRequest.MALFORMED_URL_EXCEPTION:
    case FacebookRequest.FACEBOOK_ERROR:
        FacebookUtility.displayMessageBox(this, this.getString(R.string.friends_error));
        onButton();
        break;
    }
} 
```

*FriendsList.java:-*

```
 public class FriendsList extends Activity  implements FacebookRequest, OnItemClickListener {
private static String LOG_TAG = "FriendsList";
private static JSONArray jsonArray;
private static ListView friendsList;
private Handler mHandler;
private Button saveGreeting;
public void onCreate(Bundle savedInstanceState) {
    mHandler = new Handler();
    super.onCreate(savedInstanceState);     
    try {
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        getActionBar().hide();
    } catch (Exception e) {}
    setContentView(R.layout.friends_list_screen);
    try {
        setProgressBarIndeterminateVisibility(false);

    } catch (Exception e) {}

    init();

    saveGreeting = (Button) findViewById(R.id.greeting);
    saveGreeting.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        customGreeting(v);
        }
    });
}

public void customGreeting(View v) {
    Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
    myWebLink.setData(Uri.parse("http://google.com/"));
    startActivity(myWebLink);
}

@Override
public void onDestroy() {
    super.onDestroy(); 
    exit();
}

private void exit() {
    if (friendsList != null)
        friendsList.setAdapter(null);
    friendsList = null;
    jsonArray = null;
    GetProfilePictures.clear();
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    finish();
    exit();
}

private void init() {

        friendsList = (ListView) findViewById(R.id.friends_list);
        friendsList.setOnItemClickListener(this);
        friendsList.setAdapter(new FriendListAdapter(this));
        friendsList.setTextFilterEnabled(true);

        friendsList.setDivider(null); 
        friendsList.setDividerHeight(0);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Log.d(LOG_TAG, "onCreateOptionsMenu()"); 
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.menu, menu);
    return super.onCreateOptionsMenu(menu);
}
/**
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Log.d(LOG_TAG, "onOptionsItemSelected()");
    switch (item.getItemId()) {
        case R.id.menu_refresh:
            FacebookUtility.logout(this);
            setProgressBarInDVisibility(true);
            return true;
        case R.id.retry_button:
        GetProfilePictures.clear();
        init();
        return true;                
        default:
            return super.onOptionsItemSelected(item); 

    }
}
**/

public void onRequestReceived(int result, String message) {
    Log.d(LOG_TAG, "onRequestReceived(" + result + ")");
    if(isFinishing())
        return;
  //    setProgressBarInDVisibility(false);
    switch (result) {
    case FacebookRequest.COMPLETED:
        FacebookUtility.clearSession(this);
        finish();
        break;
    case FacebookRequest.IO_EXCEPTION:
    case FacebookRequest.FILE_NOT_FOUND_EXCEPTION:
    case FacebookRequest.MALFORMED_URL_EXCEPTION:
    case FacebookRequest.FACEBOOK_ERROR:
        FacebookUtility.displayMessageBox(this, this.getString(R.string.logout_failed));
        break;
    }
}

public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
//  Log.d(LOG_TAG, "onItemClick()");

     try {
            final long friendId;
            friendId = jsonArray.getJSONObject(position).getLong("uid");
            String name = jsonArray.getJSONObject(position).getString("name");
            new AlertDialog.Builder(this).setTitle(R.string.post_on_wall_title)
                    .setMessage(String.format(getString(R.string.post_on_wall), name))
                    .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            Bundle params = new Bundle();

                            params.putString("to", String.valueOf(friendId));
                            params.putString("caption", getString(R.string.app_name));
                            params.putString("description", getString(R.string.app_desc));
                            params.putString("picture", FacebookUtility.HACK_ICON_URL);
                            params.putString("name", getString(R.string.app_action));
                            FacebookUtility.facebook.dialog(FriendsList.this, "feed", params,
                                    (DialogListener) new PostDialogListener());
                        }

                    }).setNegativeButton(R.string.no, null).show();
        } catch (JSONException e) {
            showToast("Error: " + e.getMessage());
        }
    }

    public class PostDialogListener extends BaseDialogListener {
        @Override
        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                showToast("Message posted on the wall.");
            } else {
                showToast("No message posted on the wall.");
            }
        }
    }

    public void showToast(final String msg) {

        mHandler.post(new Runnable() {
            @Override
            public void run() {
                Toast toast = Toast.makeText(FriendsList.this, msg, Toast.LENGTH_LONG);
                toast.show();
            }
        });
    }

public class FriendListAdapter extends BaseAdapter implements SectionIndexer {
    private LayoutInflater mInflater;

    private GetProfilePictures picturesGatherer = null;
    FriendsList friendsList;
    private String[] sections;

    Hashtable<Integer, FriendItem> listofshit = null;

    public FriendListAdapter(FriendsList friendsList) {
        Log.d(LOG_TAG, "FriendListAdapter()");
        this.friendsList = friendsList;
        sections = new String[getCount()];
        listofshit = new Hashtable<Integer, FriendItem>();
        for (int i = 0; i < getCount(); i++) {
            try {

                sections[i] = jsonArray.getJSONObject(i).getString("name").substring(0);
                sections[i] = jsonArray.getJSONObject(i).getString("birthday").substring(1);

                } catch (JSONException e) {
                sections[i] = "";
                Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            }
        }
        if (picturesGatherer == null) {
            picturesGatherer = new GetProfilePictures();
        }
        picturesGatherer.setAdapterForListener(this);
        mInflater = LayoutInflater.from(friendsList.getBaseContext());
    }

    public int getCount() {
        Log.d(LOG_TAG, "getCount()");
        if (jsonArray == null)
            return 0;
        return jsonArray.length();
    }

    public Object getItem(int position) {
        Log.d(LOG_TAG, "getItem()");
        return listofshit.get(position);
    }

    public long getItemId(int position) {
        Log.d(LOG_TAG, "getItemId()");
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        Log.d(LOG_TAG, "getView(" + position + ")");

        JSONObject jsonObject = null;
        try {
            jsonObject = jsonArray.getJSONObject(position);
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
        }

        FriendItem friendItem;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.single_friend, null);
            friendItem = new FriendItem();

            convertView.setTag(friendItem);
        }
        else {
            friendItem = (FriendItem) convertView.getTag();
        }

        friendItem.friendPicture = (ImageView) convertView.findViewById(R.id.picture_square);
        friendItem.friendName = (TextView) convertView.findViewById(R.id.name);
        friendItem.friendDob = (TextView) convertView.findViewById(R.id.dob);
        friendItem.friendLayout = (RelativeLayout) convertView.findViewById(R.id.friend_item);

        try {
            String uid = jsonObject.getString("uid");
            String url = jsonObject.getString("pic_square");
            friendItem.friendPicture.setImageBitmap(picturesGatherer.getPicture(uid, url));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        try {
            friendItem.friendName.setText(jsonObject.getString("name"));
            friendItem.friendDob.setText(jsonObject.getString("birthday"));
        } catch (JSONException e) {
            Log.e(LOG_TAG, "getJSONObject: " + e.getMessage());
            friendItem.friendName.setText("");
            friendItem.friendDob.setText("");
        }

        listofshit.put(position, friendItem);
        return convertView;
    }

    public int getPositionForSection(int position) {
        return position;
    }

    public int getSectionForPosition(int position) {
        return position;
    }

    public Object[] getSections() {
        return sections;
    }
}

class FriendItem {
    TextView friendDob;
    int id;
    ImageView friendPicture;
    TextView friendName;
    RelativeLayout friendLayout;

}
} 
```

*TabSample.java:-*

```
 public class TabSample extends TabActivity {
/** Called when the activity is first created. */

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabmain);
    setTabs() ;

}
private void setTabs()
{
    addTab("All", R.drawable.tab_menu, FriendsList.class);
    addTab("Current Month", R.drawable.tab_offers, FriendsList.class);

    addTab("Current Week", R.drawable.tab_location, FriendsList.class);
    addTab("Today", R.drawable.tab_reservation, FriendsList.class);
}

private void addTab(String labelId, int drawableId, Class<?> c)
{
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, c);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

    View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);
}
   } 
```

请告诉我必须在哪里添加此代码：

```
Bundle extras = getIntent().getExtras();
        String response = extras.getString("FRIENDS");

        Log.d(LOG_TAG, "onCreate()" + response);

        try {
            jsonArray = new JSONArray(response);
        } catch (JSONException e) {
            FacebookUtility.displayMessageBox(this, this.getString(R.string.json_failed));
        } 
```

并且任何其他代码都需要从**FriendsList**类移动到**TabSample**类

# assemblies - 在内存中运行的程序的地址是什么？

> ID：14334070
> 
> 赞同：1
> 
> 时间：2013-01-15T08:52:46.493
> 
> 标签：assemblies, memory-address

我写了一个 asm 程序，它的开头是这样的：

```
org 0100h
mov ax,cs
mov ds,ax
mov es,ax 
```

但是当我用winhex查看程序时，地址不是0100h。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-17T20:07:29.777

我将从[这个问题中引用 Paul R 和 Michael Chourdakis](https://stackoverflow.com/questions/3407023/what-does-org-assembly-instruction-do)

“ORG 用于设置汇编器位置计数器。这可能会或可能不会在链接时转换为加载地址。”

“ORG 只是指示在哪里放置与当前段相关的下一段代码/数据。

将它用于固定地址是没有用的，因为最终地址取决于在汇编时未知的段。”

# java - Mac 用户无法访问 BigblueButton 远程类，因为 Apple 已禁用 java

> ID：14334072
> 
> 赞同：0
> 
> 时间：2013-01-15T08:53:03.833
> 
> 标签：java, macos, bigbluebutton

我在我的 perl 网站中使用*BigBluebutton*服务进行远程视频课程。但是最近我们的 Mac 用户遇到了一个问题，他们无法访问在线网络课程，因为 Apple 在较新的操作系统上禁用了 java。*BigblueButton*的某些功能使用 java。如果我们对此有任何替代解决方案，请告诉我。

[http://www.macrumors.com/2013/01/11/apple-blocks-java-7-on-os-x-to-address-widespread-security-threat/](http://www.macrumors.com/2013/01/11/apple-blocks-java-7-on-os-x-to-address-widespread-security-threat/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:30:22.270

在 BigBlueButton 0.80（2012 年 6 月 19 日发布）中，我们使用自生成的代码签名证书来签署桌面共享小程序。Mountain Lion 现在禁用使用自签名证书的 Java 小程序。

在 BigBlueButton 0.81（开发中）中，我们有一个适当的代码签名证书来签署小程序。

要在 Mountain Lion 上运行 BigBlueButton 0.80 小程序，请参阅此答案 [Java applet with self-signed certificate on OS X Mountain Lion](https://stackoverflow.com/questions/11136805/java-applet-with-self-signed-certificate-on-os-x-mountain-lion)

问候，... 弗雷德

BigBlueButton 开发人员

# iphone - iOS 网络接口名称到底是什么意思？什么是 pdp_ip ？什么是ap？

> ID：14334076
> 
> 赞同：12
> 
> 时间：2013-01-15T08:53:51.230
> 
> 标签：iphone, ios, objective-c, mac-address, network-interface

我使用以下代码打印所有接口及其mac地址

```
- ( void )interfaceInfo{

int                 mib[6];
size_t              len;
char                *buf;
unsigned char       *ptr;
struct if_msghdr    *ifm;
struct sockaddr_dl  *sdl;

mib[0] = CTL_NET;
mib[1] = AF_ROUTE;
mib[2] = 0;
mib[3] = AF_LINK;
mib[4] = NET_RT_IFLIST;

char name[128];
memset(name, 0, sizeof(name));
for (int i=1; i<20; i ++) {
    if (if_indextoname(i, name)) {
        printf("%s ",name);            
    }else{
        continue;
    }

    if ((mib[5] = if_nametoindex(name)) == 0) {
        printf("Error: if_nametoindex error\n");
        return NULL;
    }

    if (sysctl(mib, 6, NULL, &len, NULL, 0) < 0) {
        printf("Error: sysctl, take 1\n");
        return NULL;
    }

    if ((buf = malloc(len)) == NULL) {
        printf("Could not allocate memory. error!\n");
        return NULL;
    }

    if (sysctl(mib, 6, buf, &len, NULL, 0) < 0) {
        printf("Error: sysctl, take 2");
        free(buf);
        return NULL;
    }

        ifm = (struct if_msghdr *)buf;
        sdl = (struct sockaddr_dl *)(ifm + 1);
        ptr = (unsigned char *)LLADDR(sdl);
        NSString *macString = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X",
                       *ptr, *(ptr+1), *(ptr+2), *(ptr+3), *(ptr+4), *(ptr+5)];
        printf(" %s\n",[macString cStringUsingEncoding:NSUTF8StringEncoding]);
        free(buf);
    }
    return nil;
} 
```

我在 iPhone 5 上运行代码，输出为

```
lo0  00:00:00:00:00:00
pdp_ip0  00:00:00:00:00:00
pdp_ip1  00:00:00:00:00:00
pdp_ip2  00:00:00:00:00:00
pdp_ip3  00:00:00:00:00:00
ap1  EA:8D:28:44:32:2F
en0  E8:8D:28:44:32:2F
en1  EA:8D:28:44:32:31
awdl0  4A:79:85:44:5B:4D
//I faked parts data 
```

我想知道pdp_ip是什么？什么是ap1，en1？

我发现en0是wifi硬件mac地址

ap1 和 en1 是虚拟接口吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T12:42:29.527

ap1、en0、en1 是 iOS 和 Mac 上接口的名称。如果您在 Mac 上输入 Terminal，`ifconfig`您将得到相同的 en0、en1 等。

pdp_ip 接口是用于 3G 和蜂窝数据的接口，而 ap1 用于表示当前活动的数据连接、Wi-Fi、蜂窝数据或蓝牙。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-22T12:33:58.460

lo = localhost
en = ethernet
ap = 可能用于接入点（如果您充当 wifi 主机）

pdp_ip = 可能是 PDS 数据包？PDS 是电话数据服务，是 GSM 的数据部分。由于有四个，我可以假设 PDS 有能力提供四个离散通道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T06:28:39.830

从我的研究看来（即我没有找到任何确认文档）如果上面的代码返回多个“awdl0”条目，则启用了 Wi-Fi。类似地，多个“pdp_ip0”条目表示启用了蜂窝数据。然后可以使用其他库（最显着的是可达性）来指示已使用上述任何一种方式建立了数据连接。

# django - django 中 auth_user 表的问题

> ID：14334083
> 
> 赞同：0
> 
> 时间：2013-01-15T08:54:15.333
> 
> 标签：django, django-users

我想更新 django 中 auth_user 表的一些字段。实际上我正在将一些用户从一个网站迁移到另一个网站，所以我想更新 auth_user 表中的密码字段。但是当我使用更新查询时，它给了我一些错误

我尝试过的一些事情

```
values=User.objects.get(username=request.POST['username'])
        values.password=request.POST['password']
        values.password.save() 
```

它给出了**“unicode”对象的错误没有属性“保存”**

如果我试过这个

```
values=User.objects.get(username=request.POST['username']).update(password=request.POST['password']) 
```

那么错误是**“用户”对象没有属性“更新”**

实际上我不想向用户发送电子邮件以更新他们的密码并将他们重定向到忘记密码页面。但是，每当用户尝试登录站点并且如果他的密码不匹配但他正确输入了密码但由于迁移他的密码在 django 中不起作用，那么他输入的密码必须在 auth_user 表中更新（加密密码）。

在这两者之间，我确保该用户是前一个站点的身份验证用户。

所以请给我一些建议，以便我可以在 auth_user 表中更新他的密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:06:46.950

django 中的密码存储为 sha256 哈希，因此设置

```
user.password = 'new password' 
```

这不是一个好主意。幸运的是，django 有一些方法可以处理你的密码哈希。第二件事：

```
values.password.save() 
```

在这里，您尝试在密码对象上执行 save() 方法，密码对象是字符串，而不是用户对象。`values.save()`会更好，但仍然不正确。你想要做的是：

```
values.set_password('new password') # Takes care of hashing
values.save() 
```

[更多关于 Django 文档中的主题](https://docs.djangoproject.com/en/dev/topics/auth/default/#changing-passwords)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:50:16.910

（代表欧普）

我用了这个，问题解决了

```
u = User.objects.get(username__exact='john')
u.set_password('new password')
u.save() 
```

# java - 在创建 jar 文件时处理依赖关系

> ID：14334085
> 
> 赞同：0
> 
> 时间：2013-01-15T08:54:27.463
> 
> 标签：java, import, jar

我创建了一个包，其他程序员通过导入他们的代码来使用它。我的程序使用其他 jar 文件进行 XML 解析，我不希望其他人担心依赖关系 确保我的 jar 文件始终获取其依赖关系的最佳方法是什么？

1.  我应该在原始 jar 中包含依赖项吗？
2.  有没有替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:56:03.803

我想说最干净的解决方案是使用 bulid 脚本，例如使用 Ant 或 Maven。在 Maven 中，您可以创建一个名为 mayank 的本地存储库。现在，您的所有团队成员只需要包含依赖项 mayank；所有其他依赖项将自动下载。他们不必担心其他任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:05:17.437

1.  如果您想将源代码作为 zip 存档发布，我会将依赖项保留在项目 jar 之外。例如在文件夹名称 lib 中。

2.  我会使用像 Maven (http://maven.apache.org) 这样的构建工具来管理我的依赖项。设置像 Nexus (http://www.sonatype.org/nexus) 这样的存储库非常容易，您的团队成员可以在其中获取您的 jar 和所有必需的依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:04:48.150

使用[jarjar](http://code.google.com/p/jarjar/)，似乎完全符合您的要求，不会强迫您的潜在用户完全使用 Maven（有些可能使用旧的 Ant 脚本或 IDE 功能直接添加 .jar 文件）。

# vb.net - 调试输出中的嵌入式 RavenDB 日志记录

> ID：14334088
> 
> 赞同：1
> 
> 时间：2013-01-15T08:54:51.280
> 
> 标签：vb.net, ravendb

我目前正在 RavenDB 中进行调查并设置这个简单的测试

```
<TestFixtureSetUp()>
Public Sub Setup()
    _embeddableDocumentStore = New EmbeddableDocumentStore With {.DataDirectory = "localdatabase"}
    _embeddableDocumentStore.Initialize()

End Sub

<Test> Public Sub CreateDB()
    Dim session = _embeddableDocumentStore.OpenSession()
    Dim results = session.Query(Of testclass)().ToList()

    For Each testclass In results
        session.Delete(testclass)
    Next
    session.SaveChanges()

    session.Store(New testclass With {.Id = 4, .Name = "177mdffarsdfdffds6t2in611"})
    session.Store(New testclass With {.Id = 2, .Name = "17fd7martrsdfdffds6t2in611"})
    session.Store(New testclass With {.Id = 3, .Name = "re177marsdfdfffdfds6t2in611"})
    session.SaveChanges()

    results = session.Query(Of testclass)().ToList()

    For Each testclass In results
        session.Delete(testclass)
    Next
    session.SaveChanges()        
    results = session.Query(Of testclass)().ToList()

    Assert.AreEqual(0, results.Count())
End Sub

<TestFixtureTearDown()>
Public Sub TearDown()
    _embeddableDocumentStore.Dispose()
    _embeddableDocumentStore = Nothing
End Sub 
```

但是我可以让嵌入式 RavenDB 数据库将调试信息写入 Visual Studio 调试输出吗？我尝试在 bin\debug 文件夹中添加带有此内容的 nlog.config，但是当我调试时，我在输出中没有得到有关查询的信息......我做错了什么？

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.netfx35.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <target xsi:type="Console" Name="Console" />
  </targets>
  <rules>
    <logger name="Raven.Client.*" writeTo="Console"/>
  </rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:22:16.703

*原谅我拙劣的VB翻译，我平时都是用C#开发的*

特别是关于单元测试的日志记录——我发现使用抽象层更容易忘记 NLog。

```
Imports Raven.Abstractions.Logging

...

<TestFixtureSetUp>
Public Sub Setup()
    LogManager.RegisterTarget(Of DebugTarget)()
End Sub

Class DebugTarget
    Inherits Target

    Public Overrides Sub Write(logEvent As LogEventInfo)

        ' whatever you want to do
        If logEvent.Level >= LogLevel.Info Then

            Debug.WriteLine("{0} - {1} - {2}", _
                            logEvent.TimeStamp.ToLocalTime().ToString("hh:mm:ss.fff"), _
                            logEvent.Level, _
                            logEvent.FormattedMessage)
        End If

    End Sub

End Class 
```

关于您的整个测试 - 有很多问题：

1.  单元测试不应写入磁盘。不仅有性能成本，而且多个测试可能会相互影响。而是在内存中运行。
2.  不要对文档存储使用测试设置/拆卸。每个测试都应该有自己的内存文档存储。将其放在`Using`语句块中以在测试完成时处理。
3.  不要试图通过删除记录来管理您自己的清理工作。每次都开始清洁。
4.  会话应**始终**放在`Using`语句块中。无论是测试还是实际代码。
5.  测试时，最好为测试的安排/执行部分和断言部分创建单独的会话。否则，您不一定要检查数据库中的内容 - 您可能只是检查会话中跟踪的内容。
6.  单元测试应始终`WaitForNonStaleResults`对任何查询使用自定义。否则，您可能正在测试陈旧的结果。 [阅读此处了解有关过时结果的更多信息。](http://ravendb.net/docs/client-api/querying/stale-indexes)

[这是正确编写的测试的完整示例。](https://gist.github.com/4540196)

# c++ - OpenCV 中的像素值超过 255 - 1D 直方图

> ID：14334092
> 
> 赞同：1
> 
> 时间：2013-01-15T08:54:55.447
> 
> 标签：c++, visual-studio-2010, visual-c++, opencv

[http://www.huahongquan.com/index.php/blog/x-ly-nh-video-s/11-opencv-topic-02-get-histogram](http://www.huahongquan.com/index.php/blog/x-ly-nh-video-s/11-opencv-topic-02-get-histogram)

我使用他的代码为我的图像计算一维直方图。问题是，范围设置为 0-255，但是当我打印值时，我得到的像素值超过 255（即 15842、73132）

我需要在代码中添加一些内容吗？

@George 这就是我打印值并使用 Mat 的方式。

```
for(int i = 0 ; i < 256 ; i++){
cout << "Value"  << i << " = " << histogram.at<float>(i) << endl;        
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T13:15:27.273

我认为您所说的 0-255 范围是 bin 的数量，而不是像素值。

`histogram.at<float>(i)`是落入 bin 的像素数，`i`因此它可以是从 0 到输入图像大小（宽 * 高）的任意整数。

例如，输出`Value254 = 4182`意味着有 4182 个像素，其值为 254。

# android - 为什么Android正常布局文件夹总是以横向模式打开屏幕

> ID：14334093
> 
> 赞同：0
> 
> 时间：2013-01-15T08:55:02.527
> 
> 标签：android, layout, landscape, portrait

我已经将我在Android项目中的布局资源划分到了L layout、layout-large、layout-normal-port-xhdpi-800x480等多个文件夹中。

问题是当我单击（布局）文件夹中的 xml 文件时，该文件夹是它始终以横向打开的默认文件夹；我试图切换到纵向，但它会在 (layout-normal-port-xhdpi-800x480) 文件夹中打开 xml 文件。

如何将默认布局视为纵向而不是横向？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:06:23.713

我建议使用新的布局限定符。

看这里：[支持多屏](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)

layout-sw600dp（7 英寸平板电脑）
layout-sw720dp（10 英寸平板电脑）
等。

它们都列在那里。

# c# - 响应数据显示在 jquery 的错误部分

> ID：14334094
> 
> 赞同：0
> 
> 时间：2013-01-15T08:55:03.143
> 
> 标签：c#, jquery, asp.net, ajax, json

我正在将一些数据从 jquery.ajax 发送到 aspx，在那里解析并写入响应，但是该数据出现在错误部分，我认为发生了一些错误，没有显示，但正确的数据错误返回部分。代码如下。

查询

```
var json = "{'uname':'" + $("#uname").val() + "','pwd':'" + $("#pwd").val() + "'}";
        alert(json);
        $.ajax({
            type: "POST",
            url: "DataProcess.aspx?Save=1",
            data: json,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (msg) {
                alert(msg);
            },
            error: function (msg) { alert("failed: " + msg.responseText); }
        }); 
```

数据处理.aspx.cs

```
namespace Test
{
    public partial class DataProcess : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
                ProcessAjaxRequest();
        }
        private void ProcessAjaxRequest()
        {
            if (Request.ContentType.Contains("json") && Request.QueryString["Save"] != null)
                SaveMyData();
        }
        private void SaveMyData()
        {
            System.IO.StreamReader sr = new System.IO.StreamReader(Request.InputStream);
            string line = "";
            line = sr.ReadToEnd();
            JObject jo = JObject.Parse(line);
            Response.Write(line);
            Response.Write((string)jo["uname"]);
            Response.Write((string)jo["pwd"]);

        }
    }
} 
```

所以我得到了错误部分的响应，有什么问题？

我遇到了问题，上面的代码是正确的，现在我的另一个疑问是，我可以从同一个 aspx.cs 调用特定的非静态方法吗，我的意思是当我尝试类似“DataProcess.aspx/Test?Save=1”的时候. 它给出了错误说不是网络方法，我将方法声明为

```
[WebMethod]
public void Test(){
} 
```

K伙计们，我以为问题已经消失了，刚才我观察到，如果我写一个字符串来响应像这样的Response.Write（“成功”），它会出现在jquery错误块中，但是当我写这样的东西时“ Response.Write(0);"，它进入成功块。第一个应该也来了，有人解释一下是什么问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:13:35.763

不确定确切的问题，但您的 json 看起来像一个字符串。应该是这样的

```
var json = {'uname':'" + $("#uname").val() + "','pwd':'" + $("#pwd").val() + "'}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:34:49.343

我假设您已经了解[PageMethods](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)（即用`WebMethod`关键字修饰的静态方法）。
关于您后面的问题，**不可能**将非静态（实例）方法用作页面方法。原因很简单——实例方法可以访问实例变量，包括控制树。如果没有视图状态，ASP.NET 无法保证回发方案中的正确控件树状态。对于这样的需求，`UpdatePanel`是要走的路——因为它在 ASP.NET 控件模型中提供了 AJAX。页面方法适用于流线型通信，其中请求/响应数据是极简的，没有开销（即您希望在客户端/服务器之间通信的唯一有意义的数据）。

# ios - 如何在开发者环境中测试 iOS 购买？

> ID：14334096
> 
> 赞同：0
> 
> 时间：2013-01-15T08:55:11.977
> 
> 标签：ios, in-app-purchase

我想从我的工作站在我的设备上安装应用程序并在开发环境而不是沙盒环境中测试应用程序购买？每次我尝试它时，它都会带我进入沙盒环境。

iOS 如何区分购买必须在沙盒环境中运行还是在生产环境中运行？我想做一个端到端的测试，就像普通用户一样？

我目前有一个问题，付款是在我的沙盒环境中进行的，但不是在生产环境中？可能是什么问题？我的应用内购买项目在应用商店工具包上可用是否有任何延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:32:40.317

我不明白您所说的“*在开发环境中而不是在沙盒环境中*”是什么意思。In-App Purchase Sandbox 用于开发目的。

iOS 使用代码签名区分沙盒和生产环境。如果您使用 iPhone 开发人员配置文件进行代码签名，则您处于沙盒环境中。如果您使用的是 iPhone 分发配置文件，则您处于生产环境中。

是的，App Store 服务器有一些延迟。激活您的应用内购买需要一些时间。您可能会在一段时间内收到“*未找到产品*”错误。就像 Game-Center 一样，当您的应用刚上线时，您有一段时间看不到排行榜。

# events - 带有 Img 滑块的 Mootools 灯箱

> ID：14334111
> 
> 赞同：0
> 
> 时间：2013-01-15T08:56:39.080
> 
> 标签：events, mootools, lightbox, duration

我为我的网站使用 Mootools Mediabox。这个mediaboxAdvanced v1.4.6。

现在我正在寻找一个图像在 5 秒后自动更改的解决方案。在代码中我找到了thie

```
{id:"mbNextLink",href:"#"})).addEvent("click",R) 
```

但是没有找到具有持续时间和 addEvent 的解决方案。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:58:31.323

只需查看代码，您应该可以通过扩展 mediaboxAdvanced 代码来做到这一点。

只需`Mediabox = {`在代码中查找并在之后添加一个函数。例如：

```
showNext: function(){
    next();
}, 
```

那么您应该可以使用`setInterval`例如使其在 5 秒后自动前进。

# mysql - MySQL 在 datediff 中跳过周末

> ID：14334119
> 
> 赞同：1
> 
> 时间：2013-01-15T08:57:16.750
> 
> 标签：mysql, datetime

在[上](https://stackoverflow.com/questions/14317924/mysql-count-n-consecutive-days-in-normal-form-tables)一个关于“在正常表格中连续计算 N 天”的问题中，我得到了这个答案，它工作正常。我意识到我需要跳过计算周末，例如：如果用户在周五和下周一开会，那么这应该算作连续 2 天，并且不会因为周末而刹车。

这是解释我现在拥有的代码。

```
DROP TABLE IF EXISTS meetings;
CREATE TABLE IF NOT EXISTS meetings 
( meeting_id int(10) unsigned NOT NULL AUTO_INCREMENT
, meeting_time datetime NOT NULL
, PRIMARY KEY (meeting_id)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS meetings_users;
CREATE TABLE IF NOT EXISTS meetings_users 
( user_id int(10) unsigned NOT NULL
, meeting_id int(10) unsigned NOT NULL
, PRIMARY KEY (meeting_id,user_id)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS users;
CREATE TABLE IF NOT EXISTS users 
( user_id int(10) unsigned NOT NULL AUTO_INCREMENT
, PRIMARY KEY (user_id)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

INSERT INTO  users ( user_id ) VALUES (1),(2),(3),(4);

INSERT INTO meetings ( meeting_id, meeting_time ) VALUES 
(1, '2013-01-14 10:00:00'), 
(2, '2013-01-15 10:00:00'), 
(3, '2013-01-16 10:00:00'),
(4, '2013-01-17 10:00:00'),
(5, '2013-01-18 10:00:00'),
(6, '2013-01-19 10:00:00'),
(7, '2013-01-20 10:00:00'),
(8, '2013-01-11 10:00:00');

INSERT INTO meetings_users (meeting_id, user_id ) VALUES 
(1, 1), 
(2, 1),
(2, 3),
(3, 1),
(3, 3),
(4, 2),
(4, 3), 
(5, 2), 
(6, 1),
(8, 1);

SET @dt = '2013-01-15';

SELECT user_id
     , start
     , DATEDIFF(@dt,start)+1 cons
  FROM
     (
       SELECT a.user_id
            , a.meeting_date Start
            , MIN(c.meeting_date) End
        , DATEDIFF(MIN(c.meeting_date),a.meeting_date)  + 1 diff
         FROM (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) a
         LEFT
         JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) b
       ON b.user_id = a.user_id
          AND a.meeting_date = b.meeting_date + INTERVAL 1 DAY
         LEFT
         JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) c
       ON c.user_id = a.user_id
          AND a.meeting_date <= c.meeting_date
         LEFT
         JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) d
           ON d.user_id = a.user_id
          AND c.meeting_date = d.meeting_date - INTERVAL 1 DAY
        WHERE b.meeting_date IS NULL
      AND c.meeting_date IS NOT NULL
          AND d.meeting_date IS NULL
        GROUP
       BY a.user_id
        , a.meeting_date
     ) x
 WHERE @dt BETWEEN start AND end;
 +---------+------------+------+
 | user_id | start      | cons |
 +---------+------------+------+
 |       1 | 2013-01-14 |    2 |
 |       3 | 2013-01-15 |    1 |
 +---------+------------+------+ 
```

我尝试创建自己的函数来替换原始 DATEDIFF，以便根据[这个](https://stackoverflow.com/a/13316436/1312107)答案跳过周末（我将其命名为 CustomDateDiff）并且工作得很好，但我认为问题仍然存在于`a.meeting_date = b.meeting_date + INTERVAL 1 DAY`我应该跳过的地方`INTERVAL`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:42:47.213

好的，从[这里](https://stackoverflow.com/questions/1828948/mysql-function-to-find-the-number-of-working-days-between-two-dates)获取一些代码，我已经修改了我之前对@dt 中的因素的回复...

```
@dt = '2013-01-15';
SELECT *
     , @dt target
     , 5 * (DATEDIFF(@dt, start) DIV 7) + MID('0123444401233334012222340111123400001234000123440', 7 * WEEKDAY(start) + WEEKDAY(@dt) + 1, 1)+1 cons
FROM (
    SELECT x.user_id
         , MIN(x.start) start
         , COALESCE(y.end,x.end) end
         , MAX(COALESCE(y.diff,0)+x.diff) ttl
      FROM
         (
         SELECT a.user_id
                , a.meeting_date Start
                , MIN(c.meeting_date) End
            , DATEDIFF(MIN(c.meeting_date),a.meeting_date)  + 1 diff
             FROM (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) a
             LEFT
             JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) b
           ON b.user_id = a.user_id
              AND a.meeting_date = b.meeting_date + INTERVAL 1 DAY
             LEFT
             JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) c
           ON c.user_id = a.user_id
              AND a.meeting_date <= c.meeting_date
             LEFT
             JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) d
               ON d.user_id = a.user_id
              AND c.meeting_date = d.meeting_date - INTERVAL 1 DAY
            WHERE b.meeting_date IS NULL
          AND c.meeting_date IS NOT NULL
              AND d.meeting_date IS NULL
            GROUP
           BY a.user_id
            , a.meeting_date
    )x
    LEFT JOIN
       (
         SELECT a.user_id
                , a.meeting_date Start
                , MIN(c.meeting_date) End
            , DATEDIFF(MIN(c.meeting_date),a.meeting_date)  + 1 diff
             FROM (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) a
             LEFT
             JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) b
           ON b.user_id = a.user_id
              AND a.meeting_date = b.meeting_date + INTERVAL 1 DAY
             LEFT
             JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) c
           ON c.user_id = a.user_id
              AND a.meeting_date <= c.meeting_date
             LEFT
             JOIN (SELECT DISTINCT mu.user_id,DATE(m.meeting_time) meeting_date FROM meetings_users mu JOIN meetings m ON m.meeting_id = mu.meeting_id) d
               ON d.user_id = a.user_id
              AND c.meeting_date = d.meeting_date - INTERVAL 1 DAY
            WHERE b.meeting_date IS NULL
          AND c.meeting_date IS NOT NULL
              AND d.meeting_date IS NULL
            GROUP
           BY a.user_id
            , a.meeting_date
    )y
    ON y.user_id = x.user_id
    AND y.start = x.end+INTERVAL 3 DAY AND WEEKDAY(x.end) = 4
    GROUP BY user_id,end
)j
WHERE @dt BETWEEN start AND end; 
```

# kdevelop - 在 KDevelop 中安装项目失败

> ID：14334121
> 
> 赞同：0
> 
> 时间：2013-01-15T08:57:22.823
> 
> 标签：kdevelop

我在 KDevelop 中有一个项目，但是尝试从 IDE 中安装 if 只会给出以下输出：

```
/home/<myusername>/Projects/rect/build/release> kdesu -t -- make -j8 install
*** Failed *** 
```

但是，当我从终端中完全相同的位置（KDevelop 之外）运行完全相同的命令时，它会要求输入 root 密码，并且安装得很好。我能找到的问题的所有可能解决方案要么是缺少 kdesu，要么是 kdesu 安装在`PATH`默认情况下未打开的位置；但是，我的系统上肯定有 kdesu，并且我已经导出了它的位置，就像我说的那样，KDevelop 似乎试图运行的确切命令在 IDE 之外运行良好。

那么，如何让安装选项在 KDevelop 本身中工作？

如果这很重要，我正在使用 Debian Wheezy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:02:05.173

我通过创建一个指向 kdesu 二进制文件的符号链接来解决这个问题`/usr/local/bin`，这似乎工作得很好。不过，我仍然很好奇为什么它以前不起作用，因为包含 kdesu 的目录位于`PATH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T02:42:44.823

当然我的问题`PATH`是我只是在控制台中设置它，但`PATH`对于 GUI 应用程序是不同的（感谢 DJDuff 指出这一点，不敢相信我不知道这一点） - 我通过添加`PATH="$PATH:/usr/lib/kde4/libexec"`（这些二进制文件的位置）到我的`.profile`文件[中，如这里建议的那样。](https://superuser.com/questions/121261/how-can-i-set-environment-variables-for-a-graphical-login-on-linux)

# asp.net - 如何读取 HTTP POST 接口生成的 xml 响应

> ID：14334128
> 
> 赞同：0
> 
> 时间：2013-01-15T08:57:48.050
> 
> 标签：asp.net, xml, httpwebrequest

我生成对此处提到的用于发送短信的某个 API 的请求[http://help.voxeo.com/go/help/evolution.sms.postapi](http://help.voxeo.com/go/help/evolution.sms.postapi)

该请求生成如下 XML 响应

```
 <rsp stat="ok">

 <success msg="accepted" transactionid="2e47fe224d25559a696a7bdddec1828b" messageid="cf0d21f067e5b386a2e042134687eb5c"/>

  </rsp> 
```

我想了解响应中的 rsp stat 是否正常或失败，我该怎么做。

这些是前两行我如何从响应流中获取特定的 xml 标记

```
 HttpWebResponse response = (HttpWebResponse)myReq.GetResponse();

 Stream content = response.GetResponseStream(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:25:26.227

为什么不使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)来解析 XML。例如，

```
using(var reader = new StreamReader(content))
{
   var doc = new XmlDocument();
   doc.LoadXml(reader.ReadToEnd()); 
   // you may want to compare case in-sensitive
   if (doc.DocumentElement.Attributes["stat"].Value == "ok") 
   {
       // success
   }
} 
```

*（还有一种`Load`方法可以直接从流中加载，但我不确定它是否需要在开头声明 xml）*

另一种选择是使用`XmlReader`以防响应可能很长，并且您希望尽快解析初始位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:33:53.793

尝试阅读`XmlTextReader`（[http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader%28v=vs.71%29.aspx)）

# c++ - 我们应该如何在 C++ 中实现实用程序/帮助程序模块？

> ID：14334130
> 
> 赞同：1
> 
> 时间：2013-01-15T08:57:51.383
> 
> 标签：c++

1）实用程序类，只使用静态方法，块复制和创建

```
class myUtils
{
public:
    static void utilFunc();
    static void utilGreatFunc();

private:
    utils() { } // block creation
    utils(const utils &) { }
    ~utils() { }
} 
```

2) 使用命名空间

```
namespace myUtils 
{
    void utilFunc();
    void utilGreatFunc();
} 
```

这样做的最好方法是什么？我想命名空间的方式，对我来说更清晰，写起来也更简单。或者也许还有其他更好的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:59:24.960

您永远不会在 C++ 中使用“具有静态方法的实用程序类”。那是Java主义。相反，请使用您的第二个解决方案并将函数放在`namespace`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:52:45.537

几年前有很多关于帮助类的讨论，你仍然可以搜索和阅读。我对此的看法是帮助类几乎总是一种难闻的气味（一种强烈的气味）。他们让我们看到程序员不知道将他的代码放在哪里，然后他创建了一个 MyBagOfThingsHelper 类，它打破了 OOP 的最基本原则。

可能，最重要的是 SRP。问问自己：MyBagOfThingsHelper 类的职责是什么？

它产生的强耦合又如何呢？

我知道这既不是您所要求的，也不是您想要阅读的，但最好的既不是命名空间也不是类，而是避免它们，避免它们。

# xml - 从 char 数组 libxml2 获取根节点

> ID：14334134
> 
> 赞同：0
> 
> 时间：2013-01-15T08:58:22.157
> 
> 标签：xml, xml-parsing, libxml2

我能够从文件中读取 xml，例如。

```
xmlDoc *doc = NULL;
xmlNode *root = NULL;
doc = xmlReadFile("config.xml", NULL, 0);
root = xmlDocGetRootElement(doc); 
```

但是我想从一个字符数组而不是一个文件中读取 XML 可以请任何人告诉我该怎么做，例子会更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T13:48:06.970

代替 xmlReadFile，使用 xmlReadMemory

[http://xmlsoft.org/html/libxml-parser.html#xmlReadMemory](http://xmlsoft.org/html/libxml-parser.html#xmlReadMemory)

```
xmlDoc *doc = NULL;
xmlNode *root = NULL;
char *xml = "<node/>";
doc = xmlReadMemory(xml, strlen(xml), NULL, NULL, 0);
root = xmlDocGetRootElement(doc); 
```

# multithreading - 为什么只有 1 个 CPU 的操作系统不会在两个线程之间执行循环？

> ID：14334137
> 
> 赞同：0
> 
> 时间：2013-01-15T08:58:27.983
> 
> 标签：multithreading, iis-7

问题：操作系统没有在两个线程之间执行循环，系统只是挂起。

我们的系统在 c++ 中实现为 HTTP 本机代码模块，用于 IIS/W2008 R2 64 位。设想：

*   请求 1 到达 Web 服务器；IIS 启动了一个新线程 (t1)。线程正在执行。

*   请求 2 在请求 1 完成之前到达。IIS 启动一个新线程 (t2)。该线程进入一个循环等待共享资源可用。这种行为是我们的程序。由于线程二 (t2) 进入循环，它开始消耗 100% 的 CPU。

问题：操作系统没有在两个线程之间执行循环，系统只是挂起。如果它将执行切换到第一个线程，则共享资源将被释放并且第二个线程也可以运行。

更奇怪的是：这种行为只在机器作为 1 个 CPU 时才会发生。如果我们向机器添加另一个 CPU，它会完美运行，在两个线程之间切换会按预期进行。什么都挂着。

在只有 1 个 CPU 时使其工作的一种解决方法（以及更好的编程）是在检查共享资源的可用性时将“sleep(100)”放入循环中。

当只有 1 个 CPU 时，为什么操作系统不在两个线程之间执行循环？它与VMWare有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:23:06.950

> 该线程进入循环等待共享资源可用

这听起来像是同步事物的错误方式，您需要在线程之间进行信号传递，以便操作系统获得执行上下文切换的提示。

# c# - 将 Div 数据属性作为数据源分配给 JQuery 自动完成

> ID：14334141
> 
> 赞同：2
> 
> 时间：2013-01-15T08:58:47.707
> 
> 标签：c#, jquery, asp.net

我正在使用**JS**方法将计算机语言的名称分配给`div` 例如的数据属性

```
<div id="Languages" data-Languages=''></div> 
```

和`js`代码

```
var langs='["Perl", "PHP", "Python", "Ruby", "Scala", "C#"]';
$('#Languages').data('Languages', langs); 
```

但是当我在文本框中输入文本时，它给了我一个错误 Object Expected 我正在使用这一行进行自动完成

```
$(function () { 
    $("#tags").autocomplete({ source: $('#Languages').data('Languages') }); 
}); 
```

当我创建另一个变量并将其作为在 jquery[网站中实现的源传递时，它工作得很好](http://jqueryui.com/autocomplete/)

我想用 div 的数据属性来处理它，因为将来我想使用`JSON`它来获取页面加载时的自动完成数据并将其分配给 div 数据属性。

对不起，如果这个问题听起来很愚蠢，这是我的第二天`jquery`和所有这些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:03:22.250

不确定这是否完全是您的问题，但您的数组周围有单引号，使其成为字符串。

它应该是：

```
var langs = ["Perl", "PHP", "Python", "Ruby", "Scala", "C#"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T09:04:44.410

你的 langs 就像 '' 这使它成为一个字符串。您需要一个行为类似于自动完成源的数组。您正在尝试的数据的 ID 和密钥也不匹配。试试这个

```
var langs = ["Perl", "PHP", "Python", "Ruby", "Scala", "C#"];
$('#locations').data('languages', langs);
$(function () { $("#tags").autocomplete({ 
  source: $('#locations').data('languages') }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:23:43.513

问题是您在页面就绪功能之外将数据分配给 div，而 div 并未实际加载到页面上。试试下面提到的代码，它对我来说很好。

```
$(function () { 
    var langs = ["Perl", "PHP", "Python", "Ruby", "Scala", "C#"];
    $('#locations').data('languages', langs);
    $("#tags").autocomplete({ 
       source: $('#locations').data('languages') }); 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:13:29.017

这与@Rahul 解决方案没有太大区别。

但也许您想直接从 data 属性中读取：

```
var langs = ["Perl", "PHP", "Python", "Ruby", "Scala", "C#"];

$('#locations').attr('data-Languages', langs);

$(function () { $("#tags").autocomplete({ 
    source: $('#locations').data('languages').split(',')}); 
}); 
```

工作示例：http: [//jsbin.com/oyusub/4/](http://jsbin.com/oyusub/4/)

# c# - RestSharp 序列化错误

> ID：14334142
> 
> 赞同：1
> 
> 时间：2013-01-15T08:58:48.730
> 
> 标签：c#, restsharp

知道为什么我会收到序列化错误吗？我用其他网络方法尝试过，它奏效了。就是这个特别的。

```
public T Execute<T>(RestRequest request) where T : new()
    {
        var client = new RestClient
            {BaseUrl = BaseUrl, Authenticator = new HttpBasicAuthenticator(AccountSid, SecretKey)};

        var response = client.Execute<T>(request);

        if (response.ErrorException != null)
        {
            throw response.ErrorException;
        }
        return response.Data;
    } 
```

这是对象。

```
 public class Order
{
    public Order() { }
    public string ProductName { get; set; }
    public double SoldPrice { get; set; }
    public double Fees { get; set; }
    public String BuyerEmail { get; set; }
    public String BuyerName { get; set; }
} 
```

这是我的 JSON。

```
"[{\"ProductName\":\"Demo  Hinges\",\"SoldPrice\":700.0,\"Fees\":21.0,\"Size\":\"\",\"BuyerEmail\":\"\",\"BuyerName\":\"\"}]" 
```

我收到这个错误。

System.InvalidCastException：无法将“RestSharp.JsonArray”类型的对象转换为“System.Collections.Generic.IDictionary`2[System.String,System.Object]”类型。在 RestSharp.Deserializers.JsonDeserializer.FindRoot(String content) 在 RestSharp.Deserializers.JsonDeserializer.Deserialize[T](IRestResponse response) 在 RestSharp.RestClient.Deserialize[T](IRestRequest request, IRestResponse raw)}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:29:51.013

看起来 Order 是保留字。我将其更改为 SaleOrder，它就像一个魅力。

# routing - 任何具有可靠 OpenStreet 地图数据的路由 API？

> ID：14334143
> 
> 赞同：0
> 
> 时间：2013-01-15T08:58:52.733
> 
> 标签：routing, openstreetmap

我正在寻找一个使用 OpenStreet Map Data 来计算路线的可靠 API，因为我买不起 Google/Bing 最低价格许可证。有没有这样的服务，即使它有订阅费，但不是那么高（最高 30 美元/月）。

您的似乎是一个很好的实现，但不幸的是，他们没有足够的硬件来使系统足够可靠以用于商业应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:41:06.420

你可以试试[OSRM](http://project-osrm.org/)。我认为他们有一些在线服务，您可以将其用于原型设计，但如果您想将其用于更大的事情，您可能必须自己运行代码。

# android - 是否可以将此库与 android 2.3 一起使用？

> ID：14334144
> 
> 赞同：-4
> 
> 时间：2013-01-15T08:58:54.077
> 
> 标签：android, version

我对这个框架很感兴趣：[https ://github.com/ragunathjawahar/android-saripaar](https://github.com/ragunathjawahar/android-saripaar)

不幸的是在 manifest.xml 它说

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" /> 
```

我还能在 Android 2.3 上使用它吗？我很好奇，因为我知道那里有一个 android v4 支持库，我想知道这是否有帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:01:05.677

好吧，API 级别 9 是 Android 2.3 - 2.3.2，也称为 Gingerbread。

**android:minSdkVersion**为4，也称为 Donut (1.6)。所以是的，你可以使用它。

对于所有代号、标签和内部版本号，请[**在此处查看**](http://source.android.com/source/build-numbers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:02:46.113

是的。`android:minSdkVersion="4"`说它与 API 级别 4 以上的任何版本兼容，因此您可以使用它，因为 android 2.3 是 API 级别9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:01:32.953

它确实说 minSDKverion 4，即 Donut (1.6)，那你为什么不呢？

[**您可以从此处查看**](http://developer.android.com/about/dashboards/index.html)与 sdk 编号相对应的版本及其使用统计信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:01:41.257

最小值为 4，因此只要 SDK 高于版本 4，您就可以使用它。所以是的。

# .net - 只有在配置中将 enableSessionState 设置为 true 时，才能使用会话状态

> ID：14334147
> 
> 赞同：34
> 
> 时间：2013-01-15T08:59:13.837
> 
> 标签：.net, visual-studio-2010, session, asp.net-mvc-2

我正在使用 vs 2010 使用 c# 开发 Asp.net MVC 2 应用程序。当我在调试模式下本地运行我的应用程序时，我遇到了下面提到的错误。

错误信息图像如下：

![在此处输入图像描述](../Images/91dfc9d8fac362c9db9b5616ec10dbe9.png)

错误消息文本如下：

> 会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在`<configuration>\<system.web>\<httpModules>` 应用程序配置的部分中。

我为解决这个问题所做的工作如下：

尝试 1：web.config 文件已更改如下：

```
<system.webServer>
       <modules runAllManagedModulesForAllRequests="true">
        <remove name="Session" />
        <add name="Session" type="System.Web.SessionState.SessionStateModule, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
</system.webServer 
```

尝试2如下：

![在此处输入图像描述](../Images/c02ae837ca31f92f73f0fcad0997f720.png)

但不幸的是，我仍然遇到上面提到的相同问题。

**更新**

![在此处输入图像描述](../Images/a5289078c4dab6849ae236093061494a.png)

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-15T09:47:04.880

您是否也在该部分中启用了会话状态？

```
 <system.web>
      <pages enableSessionState="true" /> 
 </system.web> 
```

还是您将其添加到页面中？

```
 <%@Page enableSessionState="true"> 
```

您是否确认该`ASP.NET Session State Manager Service`服务正在运行？在您的屏幕截图中不是。它设置为启动模式`Manual`，每次使用时都需要启动它。要启动它，请突出显示该服务并单击工具栏上的绿色播放按钮。要自动启动它，请编辑属性并调整启动类型。

或者将 SessionState 的 mode 属性设置为`InProc`，这样就不需要状态服务了。

```
 <system.web>
      <sessionState mode="InProc" />
 </system.web> 
```

查看[MSDN 以了解有关在 ASP.NET 会话状态中存储数据的所有可用选项](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)。

* * *

注意：最好让您的控制器从会话中获取值并将值添加到您的页面/控件（或 ViewBag）的模型中，这样视图不依赖于 HttpSession，您可以选择稍后此项目的不同来源，代码更改最少。或者更好的是，[根本不使用会话状态](https://stackoverflow.com/questions/10181629/why-session-is-a-disaster-in-asp-net-mvc-application)。当您使用大量异步 javascript 调用时，它可能会影响您的性能。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-23T23:52:22.457

另外，如果您正在运行 SharePoint 并遇到此错误，请不要忘记运行

```
Enable-SPSessionStateService -DefaultProvision 
```

否则您将继续收到上述错误消息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-15T14:23:49.290

实际上`jessehouwing`给出了正常情况的解决方案。

但就我而言，我在我的`web.config file`

就像下面这样。

第一 ：

```
<modules runAllManagedModulesForAllRequests="true">
        <remove name="Session" />
        <add name="Session" type="System.Web.SessionState.SessionStateModule, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</modules> 
```

第二个 ：

```
<sessionState mode="Custom" customProvider="DefaultSessionProvider">
            <providers>
                <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="PawLoyalty" applicationName="PawLoyalty"/>
            </providers>
 </sessionState> 
```

所以在我的情况下，我必须评论第二个。B'cos 那件事是为了生产。当我评论第二个时，我的问题就消失了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-11-04T18:34:28.313

我想让大家知道，有时这个错误只是一些奇怪的内存错误的结果。重新启动你的电脑并回到视觉工作室，它就会消失！！奇怪！在你开始像我一样玩弄你的网络配置文件等之前尝试一下！！！！;-)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-02T21:40:29.470

在我的情况下，问题只是通过使用`HttpContext.Current.Session`而不是`Session`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-28T06:31:21.760

**对于 SharePoint** 可以在 C:\inetpub\wwwroot\wss\VirtualDirectories\Sitecollection 端口号中找到 Web 配置文件 - 并进行更改

```
 <system.web>
  <pages enableSessionState="true" /> 
 </system.web> 
```

并使用以下命令运行 SharePoint 命令行管理程序

```
 Enable-SPSessionStateService -DefaultProvision 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-06-27T09:28:01.643

我意识到有一个公认的答案，但这可能会对人们有所帮助。我发现在使用 IIS Express 8 在 Visual Studio 2012 中运行使用 NET 3.5 框架的 ASP.NET 站点时，我遇到了类似的问题。我尝试了上述所有解决方案，但都没有奏效 - 最后在内置的 VS 2012 网络服务器工作正常。不知道为什么，但我怀疑它是 3.5 框架和 IIS 8 之间的链接。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-13T07:42:05.327

[以下给定路径的答案工作正常。](http://forums.asp.net/t/1499512.aspx?Session%20state%20can%20only%20be%20used%20when%20enableSessionState%20is%20set%20to%20true%20either%20in%20a%20configuration%20file%20or%20in%20the%20Page%20directive%20)

我找到了一个完美的解决方案！将以下内容添加到 web.config：

```
<system.webServer>
<modules>
<!-- UrlRewriter code here -->
<remove name="Session" />
<add name="Session" type="System.Web.SessionState.SessionStateModule" preCondition="" />
</modules>
</system.webServer> 
```

希望这对其他人有帮助！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-26T12:15:22.963

`Public Sub New()`由于后面代码中网页的（Visual Basic）构造函数中引发了未处理的异常，因此为我引发了此错误。

如果您实现构造函数，请将代码包装在 Try/Catch 语句中，看看它是否解决了问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-26T16:35:19.323

1.  可能是您的 Skype 在 80 端口拦截您的请求，在 Skype 选项中取消选中
2.  或者当没有代理时，您的 IE 已检查代理的连接
3.  或者你的提琴手可以拦截并充当代理，取消选中它！

解决了上面的问题，解决了我的问题！

海德科技

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-09T02:26:30.480

仅在调试 ASP .Net 应用程序时出现此错误。

我还在`Session["mysession"]`我的 Visual Studio Watch 中添加了一些变量。

问题解决了一次，我从手表中删除了会话变量。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-11-12T10:44:05.410

如果您在 Web.Config 中有以下内容，则会话状态可能会被破坏：

```
<httpModules>
  <clear/>
</httpModules> 
```

如果是这种情况，您可能需要注释掉该部分，并且您不需要任何其他更改来解决此问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-13T14:32:26.663

有时可能需要一个

> [WebMethod(EnableSession = true)]

来自网络服务

# c# - Microsoft 代码段等待 System.Threading.Thread 完成

> ID：14334153
> 
> 赞同：2
> 
> 时间：2013-01-15T08:59:26.980
> 
> 标签：c#, multithreading, wait

我正在查看有关修饰符“volatile”的 Microsoft MSDN 参考页面，并且有点不确定他们提供的代码段等待线程完成执行的方式。

我知道这只是示例代码，并且线程很快完成，但我相信下面的代码对于试图理解线程的开发人员来说并不是很好。

我相信微软实际上已经提供了一个代码片段，它将在代码中引入一个“紧密循环”。现在我很感激它不会影响这个代码片段（那么多），但是如果开发人员使用这个代码并尝试将它用于一些更密集的多线程代码，我会假设“紧密循环”会出现问题吗？

```
using System;
using System.Threading;
class Test
{
   public static int result;   
   public static volatile bool finished;
   static void Thread2() {
      result = 143;    
      finished = true; 
   }
   static void Main() {
      finished = false;
      // Run Thread2() in a new thread
      new Thread(new ThreadStart(Thread2)).Start();
      // Wait for Thread2 to signal that it has a result by setting
      // finished to true.
      for (;;) {
         if (finished) {
            Console.WriteLine("result = {0}", result);
            return;
         }
      }
   }
} 
```

片段参考： http: [//msdn.microsoft.com/en-gb/library/aa645755 (v=vs.71).aspx](http://msdn.microsoft.com/en-gb/library/aa645755(v=vs.71).aspx)

在上面的示例中，等待线程完成的更好方法是什么，不会引入这种“紧密循环”情况？

或者，实际上根本不会引入“紧密循环”吗？

请注意，该片段的目的是演示“volatile”关键字，因此使用 Thread.Join() 将使片段脱离我相信的上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:10:00.810

这个片段没有说明如何等待，这只是说明了`volatile`从不同线程对字段的访问。

要简单地等待您的后台线程，您可以使用以下代码段：

```
AutoResetEvent autoEvent = new AutoResetEvent(false);
ThreadPool.QueueUserWorkItem((o) =>
                              {
                                   // do your stuff
                                   ((AutoResetEvent)o).Set();
                              }, autoEvent);
autoEvent.WaitOne(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:13:24.693

正如您所说，等待线程完成的最佳方法是使用[Thread.Join](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx)或 ManualResetEventSlim 事件，但是这些都不需要[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.110%29.aspx) bool。

可以通过在循环中添加对[Thread.SpinWait的调用来使用示例中的代码。](http://msdn.microsoft.com/en-us/library/system.threading.thread.spinwait.aspx)这将有助于防止处理器饥饿。在 .Net 版本 4 中，Microsoft 添加了一个名为[SpinWait](http://msdn.microsoft.com/en-us/library/system.threading.spinwait.aspx)的结构，可以更有效地使用它。

[Joseph Albahari 的“C# 中的线程”中](http://www.albahari.com/threading/part5.aspx#_SpinLock_and_SpinWait)有更多关于此的信息

# javascript - iframe 随着内容的变化自动调整高度

> ID：14334154
> 
> 赞同：23
> 
> 时间：2013-01-15T08:59:29.833
> 
> 标签：javascript, jquery, html, iframe

我有一个 iframe，您可以在以下链接中看到；-

[http://one2onecars.com](http://one2onecars.com)

iframe 是屏幕中央的在线预订。我遇到的问题是，虽然 iframe 的高度在页面加载时还可以，但我需要它以某种方式在页面内容调整时自动调整高度。例如，如果我在在线预订中进行邮政编码搜索，它会创建一个下拉菜单，然后使“下一步”按钮不可见。

我需要发生的是，当在线预订的内容发生变化时，iframe 会自动调整到 iframe 的新高度（动态），因为它没有加载任何其他页面。

我使用 jquery 尝试了几个不同的脚本来尝试解决这个问题，但它们似乎都只在页面首次加载时自动调整 iframe 的高度，而**不是**随着 iframe 内容的变化。

这甚至可能吗？

我目前拥有的代码目前具有设定的高度：-

```
 <div id="main-online-booking">

            <iframe id="main-online-frame" class="booking-dimensions" src="http://www.marandy.com/one2oneob/login-guest.php" scrolling="no" frameborder="0"></iframe>

        </div>

#main-online-booking {
    height: 488px;
    border-bottom: 6px #939393 solid;
    border-left: 6px #939393 solid;
    border-right: 6px #939393 solid;
    z-index: 4;
    background-color: #fff;
}

.booking-dimensions {
    width: 620px;
    height: 488px;
} 
```

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-15T09:17:03.390

**设置间隔**

这~~只要~~ *（由于浏览器技术的进步而更正，请参阅[David Bradshaw 的回答](https://stackoverflow.com/questions/14334154/iframe-auto-adjust-height-as-content-changes/14334416#answer-22991952)）*使用 iframe 实现此目的的向后兼容方法是自己使用`setInterval`并密切关注 iframe 的内容。当它改变它的高度时，你会更新 iframe 的大小。不幸的是，没有这样的事件可以让您轻松聆听。

*一个基本示例*，这仅在大小已更改的 iframe 内容是主页面流的一部分时才有效。如果元素是浮动的或定位的，那么您必须专门针对它们来查找高度变化。

```
jQuery(function($){
  var lastHeight = 0, curHeight = 0, $frame = $('iframe:eq(0)');
  setInterval(function(){
    curHeight = $frame.contents().find('body').height();
    if ( curHeight != lastHeight ) {
      $frame.css('height', (lastHeight = curHeight) + 'px' );
    }
  },500);
}); 
```

显然，根据您的需要，您可以修改此代码的透视图，以便它从 iframe 自身运行，而不是期望成为主页的一部分。

**跨域问题**

您会发现的问题是，由于浏览器的安全性，如果 iframe 与主页位于不同的主机上，它不会让您访问 iframe 的内容，因此实际上您无能为力，除非您有添加方法出现在 iframe 中的 html 的任何脚本。

**阿贾克斯**

~~其他一些人建议尝试通过 AJAX 使用第三方服务，除非该服务支持这种方法，否则你不太可能让它工作——特别是如果它是很可能需要的预订服务通过 https/ssl 操作。~~

看起来您可以完全控制 iframe 内容，您可以选择完整的选项，使用 JSONP 的 AJAX 将是一个选项。但是，警告一句话。如果您的预订系统是多步骤的，那么您需要确保您有一个设计良好的用户界面——可能还有一些历史/片段管理代码——如果您要走 AJAX 路线。这一切都是因为您永远无法判断用户何时决定在浏览器中向前或向后导航（iframe 会在合理范围内自动处理）。设计良好的 UI 可能会妨碍用户这样做。

**跨域通信**

如果您可以控制双方（听起来像您这样做），您还可以使用跨域通信选项`window.postMessage`- 请参阅此处了解更多信息[https://developer.mozilla.org/en-US/docs/DOM/window。留言](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-04-10T15:08:09.280

现代浏览器和部分 IE8 具有一些新功能，使这项任务比以前更容易。

## 留言

[postMessage](https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage) API 提供了一种在 iFrame 与其父级之间进行通信的简单方法。

要将消息发送到父页面，您可以按如下方式调用它。

```
parent.postMessage('Hello parent','http://origin-domain.com'); 
```

在另一个方向，我们可以使用以下代码将消息发送到 iFrame。

```
var iframe = document.querySelector('iframe');
iframe.contentWindow.postMessage('Hello my child', 'http://remote-domain.com:8080'); 
```

要接收消息，请为消息事件创建事件侦听器。

```
function receiveMessage(event)
{
  if (event.origin !== "http://remote-domain.com:8080")
    return;

  console.log(event.data);
}

if ('addEventListener' in window){
    window.addEventListener('message', receiveMessage, false);
} else if ('attachEvent' in window){ //IE
    window.attachEvent('onmessage', receiveMessage); 
```

这些示例使用 origin 属性来限制消息发送到哪里并检查它来自哪里。可以指定`*`允许发送到任何域，并且在某些情况下您可能希望接受来自任何域的消息。但是，如果您这样做，您需要考虑安全隐患并对传入消息实施您自己的检查，以确保它包含您所期望的内容。在这种情况下，iframe 可以将其高度发布到“*”，因为我们可能有多个父域。但是，检查传入消息是否来自 iFrame 是个好主意。

```
function isMessageFromIFrame(event,iframe){
    var
        origin  = event.origin,
        src     = iframe.src;

    if ((''+origin !== 'null') && (origin !== src.substr(0,origin.length))) {
        throw new Error(
            'Unexpect message received from: ' + origin +
            ' for ' + iframe.id + '. Message was: ' + event.data  
        );
    }

    return true;
} 
```

## 突变观察者

更现代的浏览器的另一个进步是[MutationObserver](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)，它允许您观察 DOM 中的变化；因此，现在可以检测可能影响 iFrame 大小的更改，而无需不断地使用 setInterval 进行轮询。

```
function createMutationObserver(){
    var
        target = document.querySelector('body'),

        config = {
            attributes            : true,
            attributeOldValue     : false,
            characterData         : true,
            characterDataOldValue : false,
            childList             : true,
            subtree               : true
        },

        observer = new MutationObserver(function(mutations) {
            parent.postMessage('[iframeResize]'+document.body.offsetHeight,'*');
        });

    log('Setup MutationObserver');
    observer.observe(target, config);
}

var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;

if (MutationObserver){
    createMutationObserver();
} 
```

## 计算出准确的高度

获得 iFrame 的准确高度并不像应有的那么简单，因为您可以选择六种不同的属性来检查它们，但它们都没有给出始终正确的答案。我想出的最好的解决方案是只要你不使用 CSS 来溢出 body 标签，这个函数就可以工作。

```
function getIFrameHeight(){
    function getComputedBodyStyle(prop) {
        return parseInt(
            document.defaultView.getComputedStyle(document.body, null),
            10
        );
    }

    return document.body.offsetHeight +
        getComputedBodyStyle('marginTop') +
        getComputedBodyStyle('marginBottom');
} 
```

这是 IE9 版本，对于很长的 IE8 版本，请参阅此[答案](https://stackoverflow.com/questions/22402895/why-does-document-body-offsetheight-document-body-bottommargin-not-equal-docum)。

如果您确实溢出了正文并且您无法修复您的代码来阻止它，那么使用`offsetHeight`或的`scrollHeight`属性`document.documentElement`是您的最佳选择。两者都有优点和缺点，最好只是测试两者，看看哪个适合你。

## 其他问题

其他需要考虑的事情包括，页面上有多个 iFrame，CSS :Checkbox 和 :Hover 事件导致页面调整大小，避免在 iFrame 的 body 和 html 标签中使用 height auto，最后调整窗口大小。

## IFrame 调整器库

我将所有这些都包含在一个简单的无依赖库中，它还提供了一些此处未讨论的额外功能。

[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

这适用于 IE8+。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-11T06:52:36.750

我写了这个脚本，它非常适合我。随意使用它！

```
function ResizeIframeFromParent(id) {
    if (jQuery('#'+id).length > 0) {
        var window = document.getElementById(id).contentWindow;
        var prevheight = jQuery('#'+id).attr('height');
        var newheight = Math.max( window.document.body.scrollHeight, window.document.body.offsetHeight, window.document.documentElement.clientHeight, window.document.documentElement.scrollHeight, window.document.documentElement.offsetHeight );
        if (newheight != prevheight && newheight > 0) {
            jQuery('#'+id).attr('height', newheight);
            console.log("Adjusting iframe height for "+id+": " +prevheight+"px => "+newheight+"px");
        }
    }
} 
```

您可以在循环中调用该函数：

```
<script>
jQuery(document).ready(function() {
    // Try to change the iframe size every 2 seconds
    setInterval(function() {
        ResizeIframeFromParent('iframeid');
    }, 2000);
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:13:00.207

使用这个脚本：

```
$(document).ready(function () {
  // Set specific variable to represent all iframe tags.
  var iFrames = document.getElementsByTagName('iframe');

  // Resize heights.
  function iResize() {
    // Iterate through all iframes in the page.
    for (var i = 0, j = iFrames.length; i < j; i++) {
    // Set inline style to equal the body height of the iframed content.
      iFrames[i].style.height = iFrames[i].contentWindow.document.body.offsetHeight + 'px';
    }
  }

 // Check if browser is Safari or Opera.
 if ($.browser.safari || $.browser.opera) {
    // Start timer when loaded.
    $('iframe').load(function () {
    setTimeout(iResize, 0);
    });

   // Safari and Opera need a kick-start.
   for (var i = 0, j = iFrames.length; i < j; i++) {
     var iSource = iFrames[i].src;
     iFrames[i].src = '';
     iFrames[i].src = iSource;
   }
 } else {
    // For other good browsers.
    $('iframe').load(function () {
    // Set inline style to equal the body height of the iframed content.
    this.style.height = this.contentWindow.document.body.offsetHeight + 'px';
    });
  }
}); 
```

**注意：**在网络服务器上使用它。

# xcode - Xcode 4 编辑器中的问题

> ID：14334157
> 
> 赞同：-2
> 
> 时间：2013-01-15T08:59:37.847
> 
> 标签：xcode, xcode4, xcode4.5

我在 Xcode (4.5) 的独家新闻中进行了编辑，但现在编辑器中的所有内容都如下图所示。如何阻止这个 ![在此处输入图像描述](../Images/6e458766cbe441e62f01ad892826cc2c.png)

这是另一个截图

![在此处输入图像描述](../Images/db4662e5f5dd7b44426423f6a645a9aa.png) 使用编辑器变得非常困难。我试图重置 Xcode 设置但没有任何反应

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:04:28.640

从菜单中，选择“编辑器 -> 代码折叠 -> 焦点跟随选择”。

# vbscript - 经典asp | VBScript - 选择 80040e10 错误

> ID：14334158
> 
> 赞同：0
> 
> 时间：2013-01-15T08:59:40.997
> 
> 标签：vbscript

我有一个来自 Access db 的非常简单的 select 语句：

```
sqlopen = "select * from master WHERE keycodecond = SbmitVal ;" 
```

失败并显示“80040e10 No value given for a or more required parameters”。

但是，如果我使用它运行（即用 2 替换 SbmitVal）它可以工作

```
sqlopen = "select * from master WHERE keycodecond = 2 ;" 
```

当我询问 nb SbmitVal 时，它的值也为 2 - 但由于“keycodecond”值是一个自动编号字段，我认为这与数据不匹配有关，但我需要 keycodecond 来测试变量......如果有人可能能够提供建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:03:00.573

尝试：

```
sqlopen = "select * from master WHERE keycodecond = " & SbmitVal & ";" 
```

看起来好像您不是在发送变量`SbmitVal`，而是在发送单词`SbmitVal`。

通常最好也参数化您的查询，尽管没有使用 Access DB 我不确定这是否可能。

# arrays - 节点js中的数组表现奇怪

> ID：14334160
> 
> 赞同：0
> 
> 时间：2013-01-15T08:59:48.237
> 
> 标签：arrays, node.js

我正在使用 node js 创建一个多人游戏网站。所以每次连接套接字时，我都会在这样的数组中添加该套接字

```
var users = [];
var games = [];
var joinKey = [];
var key = 0;
var usersKey = 101;
var gamesKey = 201;

io.sockets.on('connection', function (socket) {
    socket.on('connect', function(){
        console.log('connect');
        var clientId = usersKey;
        socket.clientId = clientId;
        users[usersKey] = socket;
        usersKey++;
        socket.emit('getClientId', clientId);
        console.log(socket.clientId + ' connected');
        console.log('Total users: ' + users.length);
    }); 
```

这里总用户显示 102，因为用户密钥是 101，它会自动记录从 0 到 100 的空白值。我猜这不正常。另外，如果我使用索引从其他数组中检索套接字，则如果索引是字符串，则它是未定义的，例如“g201”

```
socket.on('createNewGame', function(){
        var game = [];
        var clientId = socket.clientId;
        game[clientId] = socket;
        console.log(game);
        var gameId = 'g' + gamesKey;
        gamesKey++;
        games[gameId] = game;
        console.log('Total Games: ' + games.length)
        socket.gameId = gameId;

        var publicKey = ++key;
        joinKey[publicKey] = gameId;

        socket.emit('gameCreated', publicKey);
    }); 
```

如果这是此处数组的行为，我不知道如何插入和获取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:05:13.610

回答你的第一点：

数组使用从 0 开始的数字索引。

当您手动将一个值放入 101 时，它将填充其余的值，因为它必须从 0 开始运行，这些将用未定义的填充。（*根据 Andrew Barretts 的评论*）

回答你的第二点：

如果您需要一个“关联数组”或至少人们所说的关联数组，那么您应该使用对象。

```
game= new Object();
game["g1"]=...
game["g25"]=...
... 
```

# php - 手动连接远程 mySql 数据库

> ID：14334166
> 
> 赞同：0
> 
> 时间：2013-01-15T09:00:31.980
> 
> 标签：php, mysql, database-connection

我想知道如何从 Windows 7 连接到远程服务器中的 MySql 数据库。我想从管理面板提供外部连接。如何连接到数据库？我有一个 php 编码来插入和检索远程数据库中的值。但在此之前我需要手动连接到远程数据库吗？请你帮我解决这个问题。#

```
 <?PHP 
         $user_name = "fbapp"; 
         $password = " 123";
         $database = "fb_db";
         $server = "mysql.dfw1.stabletransit.com";

           $db_handle = mysql_connect($server, $user_name, $password);
           $db_found = mysql_select_db($database, $db_handle);

       if ($db_found) {

      $SQL = "INSERT INTO Sample(Firstname, Lastnamme)
      VALUES (35,67)");

       $result = mysql_query($SQL);

       mysql_close($db_handle);

       echo "Records added to the database";

      }
     else {

     echo "Database NOT Found ";
     mysql_close($db_handle);
    }
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:07:28.667

1.  只需创建一个 mysql 用户并允许从您的主机进行连接。因此，在 example1.com MYSQL 上创建用户并允许您的新用户从您的 example2.com 进行连接。
2.  然后允许来自该主机的 mysql 端口上的防火墙规则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:12:12.343

打开命令提示符

```
 mysql -u user_name -ppassword -h ip-adress 
```

使用运行mysql的机器的IP地址

# android - ACRA 无法处理 Application#onCreate() 中发生的异常

> ID：14334168
> 
> 赞同：1
> 
> 时间：2013-01-15T09:00:39.973
> 
> 标签：android, acra

我在我的 android 应用程序中使用[ACRA 。](https://github.com/ACRA/acra)

但是我发现当 Application#onCreate() 方法中发生异常时，它只保存报告文件，而不是引发对话框来发送它。

我的代码有问题吗？

```
@ReportsCrashes(formKey="")
public class MyAndroidApplication extends Application
{
        public void onCreate()
        {
            ACRAConfiguration config = ACRA.getConfig();
            config.setMailTo("test@test.com");
            config.setResToastText(R.string.acra_toast);
            config.setResDialogText(R.string.acra_dlg_txt);
            config.setResDialogCommentPrompt(R.string.acra_dlg_comment_prpmpt);
            try
            {
                config.setMode(ReportingInteractionMode.DIALOG);
            }
            catch (ACRAConfigurationException e)
            {
                logger.error("fail to config ACRA", e);
                return;
            }
            ACRA.setConfig(config);
            ACRA.init(this);
            someMethodThrowsException();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:32:05.543

的`onCreate`是在创建`Application`之前调用`Activity`的并且没有 UI，因此 ACRA 无法显示对话框。来自android[文档](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)`onCreate`

> 在应用程序启动时调用，在创建任何活动、服务或接收器对象（不包括内容提供者）之前调用。实现应该尽可能快（例如使用状态的延迟初始化），因为在此函数中花费的时间直接影响启动进程中的第一个活动、服务或接收器的性能。如果您覆盖此方法，请务必调用 super.onCreate()。

所以，一定要调用`super.onCreate()`，你上面的例子是缺失的，你不应该在那里做很多会导致异常的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:35:18.500

我看到您的代码存在两个问题。

1.  `super.onCreate()`初始化 ACRA 后不调用
2.  `@Reportscrashes`即使在运行时设置了参数，您的类也应该有注释。否则，您将在 logcat 中收到错误，说*ACRA#init 已调用但 Application 上没有 ReportsCrashes 注释*

另外，我不确定应用程序是否可以显示对话框，因为它没有与之关联的 UI 布局。如果您更改以上两点，吐司报告工作正常。

# asp.net - Gridview 不导出到所有页面的 excel 工作表

> ID：14334169
> 
> 赞同：0
> 
> 时间：2013-01-15T09:00:41.730
> 
> 标签：asp.net

我有`Gridview`并且我有三个选项可以将数据导出到 Excel 表：

1.  当前页面
2.  所有页面
3.  前100行

它适用于当前，但其他选项不起作用。

代码：

```
protected void btnExportGrid_Click(object sender, EventArgs e)
{
    Table table = new Table
    {
        GridLines = this.gv_RquestedOrdres.GridLines
    };
    if (this.rdoBtnListExportOptions.SelectedIndex == 1)
    {
        this.gv_RquestedOrdres.AllowPaging = false;
        this.gv_RquestedOrdres.DataBind();
    }
    else if (this.rdoBtnListExportOptions.SelectedIndex == 2)
    {
        this.gv_RquestedOrdres.PageSize = 100;
        this.gv_RquestedOrdres.DataBind();
    }
    GridViewExportUtil.Export("Orders.xls", this.gv_RquestedOrdres);
}

private string Gridview(Panel gv)
{
    StringBuilder sb = new StringBuilder();
    StringWriter sw = new StringWriter(sb);
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    gv.RenderControl(hw);
    return sb.ToString();

} 
```

GridViewExportUtil 类：

```
public class GridViewExportUtil
{
    public static void Export(string fileName, GridView gv)
    {
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", fileName));
        HttpContext.Current.Response.ContentType = "application/ms-excel";
        HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.Unicode;
        HttpContext.Current.Response.BinaryWrite(System.Text.Encoding.Unicode.GetPreamble());
        using (StringWriter writer = new StringWriter())
        {
            using (HtmlTextWriter writer2 = new HtmlTextWriter(writer))
            {
                Table table = new Table();
                if (gv.HeaderRow != null)
                {
                    PrepareControlForExport(gv.HeaderRow);
                    table.Rows.Add(gv.HeaderRow);
                }
                foreach (GridViewRow row in gv.Rows)
                {
                    PrepareControlForExport(row);
                    table.Rows.Add(row);
                }
                if (gv.FooterRow != null)
                {
                    PrepareControlForExport(gv.FooterRow);
                    table.Rows.Add(gv.FooterRow);
                }
                table.RenderControl(writer2);
                HttpContext.Current.Response.Write(writer.ToString());
                HttpContext.Current.Response.End();
            }
        }
    }

    private static void PrepareControlForExport(Control control)
    {
        for (int i = 0; i < control.Controls.Count; i++)
        {
            Control control2 = control.Controls[i];
            if (control2 is LinkButton)
            {
                control.Controls.Remove(control2);
                control.Controls.AddAt(i, new LiteralControl((control2 as LinkButton).Text));
            }
            else if (control2 is ImageButton)
            {
                control.Controls.Remove(control2);
                control.Controls.AddAt(i, new LiteralControl((control2 as ImageButton).AlternateText));
            }
            else if (control2 is HyperLink)
            {
                control.Controls.Remove(control2);
                control.Controls.AddAt(i, new LiteralControl((control2 as HyperLink).Text));
            }
            else if (control2 is DropDownList)
            {
                control.Controls.Remove(control2);
                control.Controls.AddAt(i, new LiteralControl((control2 as DropDownList).SelectedItem.Text));
            }
            else if (control2 is CheckBox)
            {
                control.Controls.Remove(control2);
                control.Controls.AddAt(i, new LiteralControl((control2 as CheckBox).Checked ? "True" : "False"));
            }
            if (control2.HasControls())
            {
                PrepareControlForExport(control2);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:17:31.393

您正在使用网格视图导出数据 - 这仅意味着网格视图的当前页面将呈现为导出的 html。要呈现完整的数据（或前 100 行），请相应地设置页面大小。因此，页面索引为 1 的 100 行的页面大小将为您提供前 100 行导出，而禁用分页应该为您提供所有页面 - 导出结束后恢复分页。

另一种选择是使用实际数据（您已绑定到网格）进行 CSV 导出（可以在 excel 中打开）（或使用 html 导出`Table`，`Row`而不是使用网格视图行，使用数据添加单元格进入 html `Row`)

# spring-security - 是否可以在 UserDetailsS ervice 中访问 Principal？

> ID：14334170
> 
> 赞同：0
> 
> 时间：2013-01-15T09:00:43.097
> 
> 标签：spring-security

我已经实现了一个自定义`AbstractPreAuthenticatedProcessingFilter`，它在方法中返回一个`Principal`（实际上是`Object`根据签名）`getPreAuthenticatedPrincipal(HttpServletRequest)`。

我正在自定义实现一个`UserDetailsService`需要以`Principal`某种方式访问​​的。我尝试过使用`SecurityContextHolder.getContext().getAuthentication().getPrincipal()`，它抛出了一个`NullPointerException`因为`getAuthentication()`是空的。

我如何访问`Principal`其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:05:25.223

它为 null 的原因是 spring security 无法识别到那时的委托人。[从AbstractPreAuthenticatedProcessingFilter](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)的 javadoc 中提取：

> 用于处理处理预身份验证请求的过滤器的基类，其中假定主体已通过外部系统的身份验证。

UserDetailService 负责加载用户对象。然后，在成功验证后，将设置包含给定用户对象的主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:35:26.733

而不是`org.springframework.security.core.userdetails.UserDetailsService`，我实现`org.springframework.security.core.userdetails.AuthenticationUserDetailsService<Authentication>`了，这是`AbstractPreAuthenticatedProcessingFilter`. 这里的`loadUserDetails()`方法将`Authentication`对象作为参数，因此我的问题得到了解决。

# c# - PInvoke GetPackageId 失败并出现错误 122

> ID：14334179
> 
> 赞同：1
> 
> 时间：2013-01-15T09:01:22.620
> 
> 标签：c#, pinvoke

我正在尝试从 kernel32.dll 调用此函数（GetPackageId）：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh446607 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh446607(v=vs.85).aspx)

我将结构和导入定义如下：

```
 [StructLayout(LayoutKind.Sequential)]
    public struct PACKAGE_ID
    {
        uint reserved;
        uint processorArchitecture;
        PACKAGE_VERSION version;
        String name;
        String publisher;
        String resourceId;
        String publisherId;
    }

    [StructLayout(LayoutKind.Explicit)]
    public struct PACKAGE_VERSION
    {
        [FieldOffset(0)] public UInt64 Version;
        [FieldOffset(0)] public ushort Revision;
        [FieldOffset(2)] public ushort Build;
        [FieldOffset(4)] public ushort Minor;
        [FieldOffset(6)] public ushort Major;
    }  

    [DllImport("kernel32.dll", EntryPoint = "GetPackageId", SetLastError = true)]
    static extern int GetPackageId(IntPtr hProcess,out uint bufferLength,out PACKAGE_ID pBuffer); 
```

并这样称呼它：

```
 PACKAGE_ID buffer = new PACKAGE_ID();
    result = GetPackageId(hProcess, out bufferLength, out buffer); 
```

但是我得到的返回值为 122 (ERROR_INSUFFICIENT_BUFFER)。我对 PInvoke 比较陌生，不太确定如何从这里开始。我需要在调用函数之前初始化字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:48:06.917

您将需要更改 p/invoke：

```
[DllImport("kernel32.dll", SetLastError=true)]
static extern int GetPackageId(
    IntPtr hProcess,
    ref int bufferLength,
    IntPtr pBuffer
); 
```

您一旦通过`0`长度就调用它：

```
int len = 0;
int retval = GetPackageId(hProcess, ref len, IntPtr.Zero); 
```

然后你需要检查`retval`equals `ERROR_INSUFFICIENT_BUFFER`。如果没有，那么你有一个错误。

```
if (retval != ERROR_INSUFFICIENT_BUFFER)
    throw new Win32Exception(); 
```

否则你可以继续。

```
IntPtr buffer = Marshal.AllocHGlobal(len);
retval = GetPackageId(hProcess, ref len, buffer); 
```

现在您可以`retval`对照`ERROR_SUCCESS`.

```
if (retval != ERROR_SUCCESS)
    throw new Win32Exception(); 
```

最后我们可以将缓冲区转换为`PACKAGE_ID`.

```
PACKAGE_ID packageID = (PACKAGE_ID)Marshal.PtrToStructure(buffer, 
    typeof(PACKAGE_ID)); 
```

把它们放在一起，它看起来像这样：

```
int len = 0;
int retval = GetPackageId(hProcess, ref len, IntPtr.Zero);
if (retval != ERROR_INSUFFICIENT_BUFFER)
    throw new Win32Exception();
IntPtr buffer = Marshal.AllocHGlobal((int)len);
try
{
    retval = GetPackageId(hProcess, ref len, buffer);
    if (retval != ERROR_SUCCESS)
        throw new Win32Exception();
    PACKAGE_ID packageID = (PACKAGE_ID)Marshal.PtrToStructure(buffer,
        typeof(PACKAGE_ID));
}
finally
{
    Marshal.FreeHGlobal(buffer);
} 
```

* * *

从评论看来，我们还需要对`PACKAGE_ID`结构的编组方式进行更改。

我建议如下：

```
[StructLayout(LayoutKind.Sequential)]
public struct PACKAGE_ID
{
    uint reserved;
    uint processorArchitecture;
    PACKAGE_VERSION version;
    IntPtr name;
    IntPtr publisher;
    IntPtr resourceId;
    IntPtr publisherId;
} 
```

然后调用`Marshal.PtrToStringUni`将`IntPtr`字符串字段转换为 C# 字符串。自然，这种转换需要在调用`FreeHGlobal`.

我的猜测是 API 实际上在`PACKAGE_ID`. 这就是为什么您必须询问要分配多少内存的原因。我手头没有 Windows 8 来测试这个假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:05:19.513

从 GetPackageId 的文档看来，您应该在调用时将缓冲区的大小作为参数发送，即 bufferLength 应该使用传递的缓冲区的大小进行初始化。

返回时，bufferLength 将告诉您返回缓冲区的大小。

还是误读了文档？

# iis-7 - IIS 7 工作进程

> ID：14334182
> 
> 赞同：0
> 
> 时间：2013-01-15T09:01:33.897
> 
> 标签：iis-7

我有 iis 7.0，每个应用程序池运行一个网站。但是，一些工作进程有用户名：网络服务，我不知道他们正在运行什么应用程序。

有可能找到它们吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:11:07.560

您可以在 IIS 管理器中查看每个网站/应用程序并检查它们正在使用的应用程序池。

Foreach 网站和应用程序：在 IIS 管理器中选择站点/应用程序，然后选择“基本设置”。AppPool 的名称应该在显示的属性对话框中。

这样就够了吗？

# java - 使用扫描仪检查用户输入的正确方法

> ID：14334183
> 
> 赞同：1
> 
> 时间：2013-01-15T09:01:37.243
> 
> 标签：java, syntax, java.util.scanner

我对编程很陌生，我写了一个应用程序来处理特定形状的区域。

如果需要，我可以`AreaCalculations`在另一个班级提供，但效果很好。

我的问题是检查用户何时键入字符而不是双精度字符。正如您从我的代码中看到的那样，我通过使用 while 循环和`(!reader.NextDouble())`.

这可行，但我必须重复这个问题。我可以在整个程序中这样做，但有没有更简单/更整洁的方法？

谢谢，

克雷格

到目前为止我的代码：

```
package areaprog;

import java.util.Scanner;

public class Mainprog {

public static void main (String [] args){

    //Area Menu Selection
    System.out.println("What shape do you need to know the area of?\n" +
    "1: Square?\n" +
    "2: Rectangle?\n" +
    "3: Triangle?\n" +
    "4: Circle? \n" +
    "5: Exit\n"     
    );

    //User input for menu

    Scanner reader = new Scanner(System.in);
    System.out.println("Number: ");

    //Menu syntax checking
    while (!reader.hasNextDouble())
    {
        System.out.println("Thats not a number you tool.\n");
        System.out.println("Now pick again\n" +
                "1: Square?\n" +
                "2: Rectangle?\n" +
                "3: Triangle?\n" +
                "4: Circle? \n" +
                "5: Exit\n"     
                );

        reader.next(); //ask for next token?        
    }               
        double input = reader.nextDouble();
        reader.nextLine();

    //Depending on user selection, depends on what method is called using switch.
Scanner scan = new Scanner(System.in);

    //Square selection
    if (input == 1){
        System.out.println("What is a length of 1 side of the Square?\n");
            double s1 = scan.nextDouble();
            double SqAns = AreaCalculator.getSquareArea(s1);
            System.out.println("The area of you square is: " + SqAns);

                   }

    //Rectangle selection    
        if (input == 2){
        System.out.println("What is the width of your rectangle?.\n");
            double r1 = scan.nextDouble();
        System.out.println("What is the height of your rectangle?\n");
            double r2 = scan.nextDouble();
            double RecAns = AreaCalculator.getRectArea(r1, r2);
        System.out.println("The area of your rectangle is: " + RecAns);    
        }
    //Triangle selection
    if (input == 3){
        System.out.println("What is the base length of the triangle?.");
            double t1 = scan.nextDouble();
        System.out.println("What is the height of your triangle?");
            double t2 = scan.nextDouble();
            double TriAns = AreaCalculator.getTriArea(t1, t2);
        System.out.println("The area of your triangle is " + TriAns);
    }
    //Circle selection
    if (input == 4){
        System.out.println("What is the radius of your circle?.");
            double c1 = scan.nextDouble();
            double CircAns = AreaCalculator.getCircleArea(c1);
        System.out.println("The area of your circle is " + CircAns);    

    }
    //Exit application
    if (input == 5){
        System.out.println("Goodbye.");

    }

}

} 
```

好的，所以我添加了一个异常来捕获错误。所以它现在在处理不使用整数的人的方式上更干净了。

数字：1 正方形的 1 边的长度是多少？

a 你为什么要变得聪明？使用整数。

但是然后程序就结束了....我如何让他们回到主菜单，甚至让他们重新输入最后的努力？

谢谢，

克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:17:30.150

就菜单驱动程序而言，它很好。但正如你所说： *“这有效，但我必须重复这个问题。”*

所以阅读[java中的异常处理教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

因此，您的代码将如下所示：

```
 try
   {
    System.out.println("Thats not a number you tool.\n");
    System.out.println("Now pick again\n" +
            "1: Square?\n" +
            "2: Rectangle?\n" +
            "3: Triangle?\n" +
            "4: Circle? \n" +
            "5: Exit\n"
            );

input = reader.nextDouble();
 }
   catch(InputMismatchException err)
    {
  System.out.print(err.getMessage());

     } 
```

不要忘记导入`import java.util.InputMismatchException`或`import java.util.*`

并且尝试在`try`块外声明变量，可能在外面是不可见的。

# php - 根据先前的下拉菜单显示第二个下拉菜单 .in 代码点火器

> ID：14334187
> 
> 赞同：0
> 
> 时间：2013-01-15T09:01:56.863
> 
> 标签：php, jquery, css, ajax, codeigniter

我有两个下拉框，实际上我通过调用一个 id 使用 jquery 和 ajax 完成了这个功能，如果我选择一个东西，它将出现在第二个选择框中，但我面临的主要问题是我使用的模板选择框使用一些名为“cho”的类名，好像我不使用这个类显然我的选择框看起来是有线的，所以我喜欢它的风格。所以如果我在我的第二个选择框中使用这个类，结果显示然后功能不起作用，但如果我不使用该类，那么它将起作用，所以我想要的是：我想使用 css 类并实现该功能我检查了每个 css 文件但我找不到 cho 类所以我想如果我无法更改 css 文件，可能有 jquery 中的方法可以解决此问题。

这是我的第一个选择框，选择框和 css 工作正常。

```
<?php echo form_dropdown('cat_id', $records2, '#', 'id="category" class =  "cho"');?> 
```

第二个选择框 - 没有 css ..功能成功

```
 <?php echo form_dropdown('item_id', $records3, '#', 'id="items"'); ?> 
```

使用 css--functionality 将不起作用，但 css 可以：

```
 <?php echo form_dropdown('item_id', $records3, '#', 'id="items" class = "cho"'); ?> 
```

我的JavaScript：

```
<script type="text/javascript">// <![CDATA[
    $(document).ready(function(){       
        $('#category').change(function(){ 
            $("#items > option").remove(); 
            var category_id = $('#category').val();  
            $.ajax({
                type: "POST",
                url: "stockInController/get_Items/"+category_id, 

                success: function(items) 
                {
                    $.each(items,function(item_id,item_name) 
                    {
                        var opt = $('<option />'); 
                        opt.val(item_id);
                        opt.text(item_name);
                        $('#items').append(opt); 
                    });
                }                 
            });             
        });
     });        
 </script> 
```

两个下拉列表的html文件源

```
 <div class="controls">
 <select name="cat_id" id="category" class = "cho">
         <option value="1">jeans</option>
         <option value="2">shirts</option>
     </select>
     <br />
   </div>
</div> 
```

项目：sdf belo gamer dsf blue

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:09:58.573

您是否尝试过 firebug 或任何其他类似工具来找出您的“cho”类。也试试这个代码

```
$("#items").addClass("cho"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:44:48.793

确定尝试通过名称选择：

```
 <script type="text/javascript">// <![CDATA[
$(document).ready(function(){       
    $('#category').change(function(){ 
        $('select[id="items_chzn"] > option').remove(); 
        var category_id = $('#category').val();  
        $.ajax({
            type: "POST",
            url: "stockInController/get_Items/"+category_id, 

            success: function(items) 
            {
                $.each(items,function(item_id,item_name) 
                {
                    var opt = $('<option />'); 
                    opt.val(item_id);
                    opt.text(item_name);
                    $('select[id="items_chzn"]').append(opt); 
                });
            }

        });

    });
 });

        </script> 
```

如果您仍然遇到问题，请尝试在 ajax 调用后在函数中使用警报。

# jsf - 如何使数字输入区域最初为空而不是 0 或 0.00？

> ID：14334188
> 
> 赞同：9
> 
> 时间：2013-01-15T09:02:17.030
> 
> 标签：jsf, input, numbers, zero

我有一个应该得到一个数字的输入位置。我希望它显示为空。但是，当我运行我的程序时，我得到 0 或 0.00 作为默认值。我怎样才能让它为空？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T11:13:14.897

如果您将值绑定到原语而不是其包装表示，则会发生这种情况。原语`int`始终默认为`0`并且原语`double`始终默认为`0.0`。您想使用`Integer`or `Double`(or `BigDecimal`) 代替。

例如：

```
public class Bean {

    private Integer number;

    // ...
} 
```

然后在处理表单提交时还有两件事需要考虑。首先，您需要指示 JSF 将提交的空字符串值解释为`null`，否则 EL 仍会将空字符串强制为`0`or `0.0`。这可以通过以下上下文参数来完成`web.xml`：

```
<context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
</context-param> 
```

其次，如果您使用的是 Tomcat/JBoss 或任何使用 Apache EL 解析器的服务器，那么您需要指示它不要通过以下 VM 参数强制`null`类型`0`或`0.0`在类型的情况下`Number`（它不直观地处理`Number`类型，好像它们是原语）：

```
-Dorg.apache.el.parser.COERCE_TO_ZERO=false 
```

### 也可以看看：

*   [空弦疯狂](http://balusc.omnifaces.org/2015/10/the-empty-string-madness.html)
*   [绑定到 Integer 属性的 h:inputText 正在提交值 0 而不是 null](https://stackoverflow.com/questions/3116517/hinputtext-which-is-bound-to-integer-property-is-submitting-value-0-instead-of)
*   [绑定到 String 属性的 h:inputText 正在提交空字符串而不是 null](https://stackoverflow.com/questions/2203322/hinputtext-which-is-bound-to-string-property-is-submitting-empty-string-instead)
*   [javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL 自 Java EE 7 / EL 3.0 起不再起作用](https://stackoverflow.com/questions/21880017/javax-faces-interpret-empty-string-submitted-values-as-null-does-not-work-anymor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-27T04:20:17.433

我不同意以前给出的答案，但我认为您可能正在寻找

```
<h:inputText id="number" binding="#{controller.inputBox}" value="#{controller.number}" >
     <f:event type="preRenderComponent" listener="#{controller.preRenderInput}" />
</h:inputText> 
```

并在控制器内部

```
private double number; // getters and setters
private UIInput inputBox; // getters and setters
public void preRenderInput() {
        // if it is the first request
        if(!FacesContext.getCurrentInstance().isPostback()) {
            inputBox.setValue("");
        }
} 
```

JSF 2.0+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T13:40:56.580

您可以在 primefaces-extension 中使用 inputNumber 而不是 inputText。像这样

```
<pe:inputNumber  /> 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-01-15T09:28:38.407

在您的 XHTML 代码中，假设您的输入字段为：

```
<h:inputText id="newname" value="#{youAction.newName}"
        style="width:130px" styleClass="form">
</h:inputText> 
```

在您的托管 Bean 操作类中，将此字段映射为：

```
@ManagedBean(name="yourAction")
public class YourAction {

   private String newName;
   ...

   // Add Getter & Setter Methods
   ... 
} 
```

通过这种方式，您将不会在输入字段中获得 0 或 0.00 作为默认值。

# jquery - jquery 选项卡 cookie 限制

> ID：14334189
> 
> 赞同：0
> 
> 时间：2013-01-15T09:02:17.897
> 
> 标签：jquery, jquery-tabs

cookie 可以记住多少标签有限制吗？我在页面中有一系列 6 个主要选项卡和子选项卡。子选项卡的数量取决于主选项卡。我注意到如果我有 15 个或更少的子选项卡，cookie 会记住选项卡，但如果我有更多的子选项卡，则重新加载浏览器后 cookie 的值为 0。配置有限制吗？

我创建主选项卡：

```
var $mainTab = $( "#tabs" ).tabs({
      cookie: {
            name: 'mainCookie',
            expires: 1
        }
    }); 
```

和这样的子标签：

```
 var $tab1 = $( "#tabs-1" ).tabs({
          cookie: {
            name: 's',
            expires: 1
        }
    }); 
```

然后在页面加载读取值：

```
var c_main = $.cookie('mainCookie');
var c_sub = $.cookie('s'); 
```

主选项卡始终没问题，但正如我所说，子选项卡仅在该主选项卡少于或 15 个选项卡时才有效。

# linux - 在 Linux 中将一个用户的所有设置/二进制文件应用和传输给另一个用户

> ID：14334190
> 
> 赞同：4
> 
> 时间：2013-01-15T09:02:19.567
> 
> 标签：linux, unix, home-directory

在 linux 机器中，我们可能必须针对该 linux 机器编译我们的程序。

现在，如果我们已经有一些其他用户（不是root。一个典型的用户。）已经为这台机器编译了许多程序，是否可以做这样的事情？

例如，用户 oldGuy 在他的主目录中有 mpirun、python 和其他几个程序，他可以在他的目录中调用“mpirun”或任何其他二进制文件，而无需键入“./mpirun”。他还完成了各种其他设置。

现在，假设我们有一个名为 newGuy 的新用户。如果在我们的服务器中，oldGuy 已经编译了 newGuy 想要的所有二进制文件，而不是让 newGuy 浪费时间编译 oldGuy 已经拥有的程序并正确设置所有内容，newGuy 是否可以从 oldGuy“继承”一些二进制文件、设置等?

例如，oldGuy 可以直接从 Bash 调用“mpirun”，newGuy 可以做任何事情以便立即与 oldGuy 在同一页面上（所有相同的设置），而无需编译程序和设置其他设置等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:26:28.073

主`oldGuy`目录包含您需要的所有内容，因此您可以将所有文件复制到主目录中`newGuy`。

更好的方法：当您向系统添加新用户时，系统的内容将`/etc/skel`用作创建新用户主页的*骨架。*因此，您可以自定义`/etc/skel`目录，为要添加到系统的每个新用户添加所需的所有内容。

看看[这里](http://linuxers.org/howto/how-set-default-content-new-users-home-directory-using-etcskel) 和[这里](http://linuxg.net/the-unix-and-linux-skeleton-directory-etcskel/) 的一些例子。

# c++ - 在 C++ 中创建一个超类类型的数组来动态存储子类对象

> ID：14334193
> 
> 赞同：3
> 
> 时间：2013-01-15T09:02:30.350
> 
> 标签：c++, dynamic, dynamic-memory-allocation, object-slicing

请考虑以下代码：

```
 #include <iostream>
    using namespace std;
    class superclass;
    class subclass;
    class subclass2;
    class superclass
    {
    public:
        unsigned int a;
        superclass **superman;

    };
    class subclass : public superclass
    {
    public:
        unsigned int b;
    };
    class subclass2 : public superclass
    {
    public:
        unsigned int b;
    };
    class runner
    {
    public:
        superclass **superman;
        runner()
        {
            *superman=new superclass[2];
            superman[0]=new subclass;
            superman[0]->a=3;
            superman[1]=new subclass2;
            superman[1]->a=4;
        }

    };
    int main() {

        runner r;
        cout<<r.superman[0]->a<<" "<<r.superman[1]->a;
        return 0;
    } 
```

如您所见，我想创建对父类的引用的动态分配存储，然后每个父类都可以指向子类，但是我不知道如何从该数组中再次提取子类，因此我可以访问它变量 b;

我尝试了以下方法，但它们对我不起作用并给出错误“从'超类*'转换为非标量类型'子类'请求”和“从'超类*'转换为非标量类型'subclass2'请求”

```
 subclass s1=r.superman[0];
    subclass2 s2=r.superman[1]; 
```

我确定我错过了一些小东西。

PS：我找不到类似的问题，但如果存在，请重定向我，我也想要一个不需要我使用向量或任何内置的预先存在的库类的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:05:41.067

在这种情况下，您真的需要智能指针，而超类不需要指向自身的指针。您可以将超类指针存储在指向实际派生类的向量中，因此多态性仍然有效：

```
#include <memory>
#include <vector>

struct superclass
{
public:
  superclass() : a(0) {}
  virtual ~superclass() {}  // it's important to define virtual destructor as superclass is a base class
  int getA() const { return a; }

private:
  unsigned int a;
};

class subclass : public superclass
{
public:
    unsigned int b;
};
class subclass2 : public superclass
{
public:
    unsigned int b;
};

class runner
{
public:
  std::vector<std::unique_ptr<superclass>> superman;
  runner()
  {    
      superman.emplace_back(new subclass());
      superman.emplace_back(new subclass2());
  }    
}; 
```

然后你可以简单地访问它：

```
 int main() 
   {    
       runner r;
       std::cout << r.superman[0]->getA() <<" " < <r.superman[1]->getA();
       return 0;
   } 
```

旁注：如果可以的话，隐藏你的数据，通过 set/get 函数访问数据，不要将成员声明为 public。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:06:32.833

```
 superclass **superman;
    runner()
    {
        *superman=... 
```

这几行代码为代码提供了未定义的行为。您不能取消引用未初始化的指针并期望一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:44:59.043

添加一个`virtual`析构函数`superclass`并使用`dynamic_cast`：

```
class superclass
{
public:
    unsigned int a;
    superclass **superman;
    virtual ~superclass(){}; // You must at least have one virtual method
                             // in your superclass and destructor is good choice 
                             // Otherwise, dynamic_cast wouldn't work:
                             // error: ... (source type is not polymorphic) !
};
// ...
// s1 and s2 must be pointers:
subclass  *s1=dynamic_cast<subclass* >(r.superman[0]);
subclass2 *s2=dynamic_cast<subclass2*>(r.superman[1]);
//... 
```

*注意：从基类转换为派生类时要小心。并且不要忘记释放分配的内存。*

# linux - 我如何知道设备驱动程序是否在 Linux 中工作？

> ID：14334198
> 
> 赞同：1
> 
> 时间：2013-01-15T09:02:38.293
> 
> 标签：linux, driver

对于鼠标，如果我发出命令`cat /dev/input/mouse1`然后移动鼠标，控制台中就会有输出。由此我知道鼠标可以工作。

但是对于我的笔记本电脑的触摸板，即`mouse0`，当我发出`/dev/input/mouse0`并触摸触摸板时，我看不到任何输出。

那我怎么知道像我的触摸板这样的设备的驱动程序是否真的工作？它们是否真的可以与操作系统通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T15:28:21.313

这取决于您的驱动程序希望如何与设备通信并向您提供响应。

您的驱动程序需要像鼠标一样创建**procfs**或**sysfs接口。**因此，如果您的驱动程序创建了这样的界面，您肯定可以看到，但您必须寻找它们，有时用它们的术语很难找到它们。

不用说，它们存在并且如果它们正在工作，它们正在与您的操作系统通信，但是它们是否提供了**procfs**或**sysfs**接口，这是驱动程序特定的并且不能马上说出来，需要一些文档或代码。

# xml - 在两个网站之间导出和导入没有物理 XML 文件的数据

> ID：14334205
> 
> 赞同：0
> 
> 时间：2013-01-15T09:02:58.123
> 
> 标签：xml

好的，我有这种情况，

假设有两个镜像站点，例如：

```
masterwebsite.com

slavewebsite.com 
```

masterwebsite.com 是管理员编辑某个插件内容的地方。slavewebsite.com 是用户使用插件的地方，但他们不能编辑任何内容或插件功能。

是否可以将某个 XML 变量导出为字符串（作为导出函数的输出），然后由从站网站中的调用函数读取，而无需创建 XML 物理文件？

更新： XML 文件变量由以下方式输出：

```
$myxmlvariable = $xml->array2xml($doc_data, 'documentation_export'); 
```

这可以在导出函数中找到，让我们说：

```
doc_export() 
```

它将位于 masterwebsite.com

导入的功能将是：

```
doc_import($xml) 
```

这将在 slavewebsite.com 中找到。

请注意，这些是 Wordpress 插件实现。

如果是，有哪些概念和必要的步骤？我不是在寻找代码，只是在寻找操作原理。如果有人可以对此有所了解，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:55:38.343

没有物理xml文件？我认为您想在 flay 上或作为后台进程使用此 xml。我认为一个简单的 REST 服务可以帮助您做到这一点。您可以在预期输出的地方使用简单的 AJAX 调用来使用此休息服务。如果您选择 REST，那么[此](http://blog.garethj.com/2009/02/17/building-a-restful-web-application-with-php/)链接可能会对您有所帮助

# c# - 通过查询字符串为下拉列表赋值

> ID：14334208
> 
> 赞同：0
> 
> 时间：2013-01-15T09:03:01.457
> 
> 标签：c#, asp.net, .net, telerik

我将所选值存储在查询字符串变量中第 1 页的 DDL 列表中，然后尝试在第 2 页将其分配给来自用户控制页面的相同下拉列表。但是，在将值分配给第 2 页上的 DDList 时，我得到了数组索引超出范围异常或空值异常。

我已调试并验证查询字符串是否正确，但无法将此值分配给 ddl 列表。下面粘贴的代码：

```
 <telerik:RadComboBox 
      ID="cmbSearchOaO" 
      runat="server"
      AutoPostBack="true"
      AppendDataBoundItems="true" 
      Width="200px"
      DataSourceID="odsOwnedAndOperated"
      DataTextField="Owned_And_Operated_Nm"
      DataValueField="Owned_And_Operated_Id"
      OnSelectedIndexChanged="PopulateApplicationTypeDropDown">
 </telerik:RadComboBox>

  ddl2.SelectedValue = Request.QueryString["No2"];           
  ddl2.FindItemByValue(Request.QueryString["No2"].ToString()).Selected = true; 
```

正确的值填充在 中`Request.QueryString["No2"]`，但我需要将它存储在 LHS 上，即 ddl 列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:14:28.967

试试这个解决方案。在我的示例中，我使用了 ASP.NET DropdownList 控件

**保存 page1 和 page 2 使用的下拉列表的用户控件**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="DDlUserControl.ascx.cs" Inherits="WebApplication2.DDlUserControl" %>
<asp:DropDownList ID="ddlTest" runat="server" AutoPostBack="True" Height="20px" 
    Width="223px">
    <asp:ListItem Value="1">Item 1</asp:ListItem>
    <asp:ListItem Value="2">Item 2</asp:ListItem>
    <asp:ListItem Value="3">Item 3</asp:ListItem>
    <asp:ListItem Value="4">Item 4</asp:ListItem>
    <asp:ListItem Value="5">Item 5</asp:ListItem>
    <asp:ListItem Value="6">Item 6</asp:ListItem>
    <asp:ListItem Value="7">Item 7</asp:ListItem>
    <asp:ListItem Value="8">Item 8</asp:ListItem>
</asp:DropDownList> 
```

**第1页html页面**

```
<p>
        <uc1:DDlUserControl ID="DDlUserControl1" runat="server" />
    </p>
    <p>
        <asp:Button ID="btnSubmit" runat="server" onclick="btnSubmit_Click" 
            Text="Go to Page 2" />
    </p> 
```

**后面的第 1 页代码**

```
protected void btnSubmit_Click(object sender, EventArgs e)
        {
            var ddl = DDlUserControl1.FindControl("ddlTest") as DropDownList;
            Response.Redirect("Page2.aspx?no="+ddl.SelectedValue);
        } 
```

**第 2 页 html**

```
<div>

        This is page 2<br />
        <br />
        <uc1:DDlUserControl ID="DDlUserControl1" runat="server" />

    </div> 
```

**Page2 后面的代码**

```
protected void Page_Load(object sender, EventArgs e)
        {
            var selectedVal = Request.QueryString["no"];
            var ddl = DDlUserControl1.FindControl("ddlTest") as DropDownList;
            ddl.SelectedValue = selectedVal;
        } 
```

# .net - 按预定义数组中的值加载惰性集合

> ID：14334211
> 
> 赞同：0
> 
> 时间：2013-01-15T09:03:03.343
> 
> 标签：.net, lazy-loading

假设我有 Lazy 集合，在某些情况下我想要预加载（预加载我的意思是取一些值并通过 Lazy 集合包装它们）

```
var lazyCollection = new Lazy<T[]>(() => ....);
var TCollection = GetTValues().ToArray(); 
```

如何制作类似`lazyCollection = TCollection`or 的东西`lazyCollection = new Lazy<T[]>(TCollection)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:51:49.327

你可以简单地使用这样的东西：

```
var lazyCollection = new Lazy<T[]>(() => TCollection); 
```

# android - 如何使用 BaseAdapter 检索列表视图？

> ID：14334213
> 
> 赞同：0
> 
> 时间：2013-01-15T09:03:08.257
> 
> 标签：android

我已经创建了 android 应用程序来使用 ArrayList 中的 BaseAdapter 检索 Listview，但在 Listview 中没有显示任何内容。我的应用程序的描述是我想使用 BaseAdapter 检索列表视图。当我的应用程序在模拟器上运行时，单击模拟器上的菜单按钮时屏幕上不显示任何内容，仅在单击添加启动该活动中的新活动后添加按钮显示在屏幕上，我创建了两个editText。提交后，返回上一个活动并显示列表视图。

请任何人都可以帮我找出这个错误

> *以下是适配器类*

```
package com.oj2.exlistview;

import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView.FindListener;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class TimeTrackAdapter extends BaseAdapter {

    ArrayList<TimeRecord> times = new ArrayList<TimeRecord>();
    public Context cntxt;
    public TimeTrackAdapter(Context cnt,ArrayList<TimeRecord> list2) {
        super();
        cntxt = cnt;
        times = list2;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return new TimeTracker().getList1().size(); 
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return getItem(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        if (convertView == null){
            System.out.println("in getView");
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());
            convertView = inflater.inflate(R.layout.time_list_item, parent,false);
            TimeRecord time = times.get(position);

            TextView timeTextView = (TextView) convertView.findViewById(R.id.timeView);
            timeTextView.setText(time.getTimes());

            TextView noteTextView = (TextView) convertView.findViewById(R.id.noteView);
            noteTextView.setText(time.getNotes());

        }
        return convertView;
    }

} 
```

> **以下是活动类**

```
 package com.oj2.exlistview;

    import java.util.ArrayList;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.MenuInflater;
    import android.view.MenuItem;
    import android.widget.ListView;

    public class TimeTracker extends Activity{
        TimeTrackAdapter timeTrackAdapter;
        ListView listView;
        TimeRecord timerecord;
        public ArrayList<TimeRecord> list1 = new ArrayList<TimeRecord>();

        public static final int TIME_ENTRY_REQUEST_CODE = 1;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_list);
            System.out.println("in onCreate()");

        }

        public ArrayList<TimeRecord> getList1() {
            return list1;
        }

        public void setList1(ArrayList<TimeRecord> list1) {
            this.list1 = list1;
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // TODO Auto-generated method stub
            super.onCreateOptionsMenu(menu);
            System.out.println("in onCreateOptionsMenu");
            MenuInflater mI = getMenuInflater();

            mI.inflate(R.menu.time_list_menu,menu);
            return true;
        }
        @Override   
        public boolean onMenuItemSelected(int featureId, MenuItem item) {
            // TODO Auto-generated method stub
            System.out.println("in onMenuItemSelected");
            if (item.getItemId()==R.id.add_time_menu_item) {
                Intent intent = new Intent(this, AddTimeActivity.class);
                startActivityForResult(intent, TIME_ENTRY_REQUEST_CODE);

                return true;
            }
            return super.onOptionsItemSelected(item);
        }
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            // TODO Auto-generated method stub
            super.onActivityResult(requestCode, resultCode, data);
            System.out.println("in onActivityResult");
            if (requestCode==TIME_ENTRY_REQUEST_CODE) {
                if (resultCode==RESULT_OK) {
                    String Time = data.getStringExtra("time");
                    String Note = data.getStringExtra("note");

                    list1.add(new TimeRecord(Time, Note));

                    timeTrackAdapter = new TimeTrackAdapter(this,list1);
                    listView = (ListView) findViewById(R.id.timeListView);
                    listView.setAdapter(timeTrackAdapter);
                    listView.getAdapter();
                    /* timeTrackAdapter.addTimeRecord(new TimeRecord(Time, Note));*/
                    timeTrackAdapter.notifyDataSetChanged();
                }
            }
        }

    } 
```

> **以下是 AddTimeActivity**

```
 package com.oj2.exlistview;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.View;
    import android.widget.EditText;

    public class AddTimeActivity extends Activity{

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.add_time);
        }

        public void onCancle(View view) {
            finish();
        }
        public void onSave(View view) {
            Intent intent = getIntent();

            EditText TimeView = (EditText) findViewById(R.id.editText1);
            intent.putExtra("time", TimeView.getText().toString());

            EditText Noteview = (EditText)findViewById(R.id.editText2);
            intent.putExtra("note", Noteview.getText().toString());

            this.setResult(RESULT_OK, intent);
            finish();
        }
    } 
```

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:13:37.330

首先，不要`Activity`在`Adapter`. Activity对象是Android自己创建的，用来展示Views。它与适配器无关。

您要在其中显示数据的布局必须包含一个`<ListView ... />`带有`android:id="@+id/whatEverId"`属性的标签。

然后你要做的是使用它的**id**`ListView`在你的 TimeTracker 活动中检索对象：

 **```
ListView lv = (ListView) findViewById(R.id.whatEverId); 
```

然后创建您的适配器并告诉您的 ListView 您希望它显示的视图将由您的自定义适配器创建：

```
TimeTrackerAdapter adapter = new TimeTrackerAdapter(this, myListOfData);
lv.setAdapter(adapter); 
```

**myListOfData**是您`ArrayList`包含的数据。其余的是明确的，应该完成这项工作。**

# ruby - Ruby：bundler exec 在获取信号时未按预期运行

> ID：14334215
> 
> 赞同：1
> 
> 时间：2013-01-15T09:03:16.720
> 
> 标签：ruby, bundler, supervisord

我正在尝试使用[Bundler](http://gembundler.com)使用[Supervisord设置](http://supervisord.org)[Kibana](http://kibana.org)。使用 Bundler 安装 Kibana 依赖项完全没有问题。我试着跑步，它奏效了。我还尝试在查看在 htop 中生成的进程时使用 Ctrl-C 杀死它，并且它起作用了。`bundle exec ruby kibana.rb`

但是，当使用 supervisord（或类似 SIGINT 或 SIGTERM 之类的信号）杀死 bundler 时，由它产生的两个孩子会存活下来。因此，如果在 supervisord 中重新启动 kibana 作业，则重新启动将失败，因为重新启动的作业将尝试分配的端口已在使用中。

据我所知，bundler exec 不应该分叉，据我所知，它不会。当它收到信号时，它的行为并不像我预期的那样。

我能做些什么？从捆绑器切换可能是一个解决方案，但它是不可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:52:18.133

我解决了。我在下面写了一个小的 run_kibana bash 助手（在另一个[Stack Overflow 线程](https://stackoverflow.com/questions/1526746/bash-trap-of-term-what-am-i-doing-wrong)中找到）：

```
function kill_kibana() {
  echo "Trapped termination of Kibana subprocessess"
  pkill -TERM -P $1
}

bundle exec ruby kibana.rb &
pid=$!
trap "kill_kibana $pid" SIGINT SIGTERM SIGKILL SIGQUIT
wait $pid 
```

它就像一个魅力。扩展它以发送被捕获在 kill_kibana() 函数中的实际信号可能是合理的。

# powershell - 使用 Get-EventLog 查询多个事件 id

> ID：14334216
> 
> 赞同：1
> 
> 时间：2013-01-15T09:03:17.907
> 
> 标签：powershell

我有一个事件 ID 列表，我需要使用 PowerShell 2.0 在多个服务器上查询。下面是脚本：

```
$a = Get-Date
$b = $a.AddDays(-1)
$b = $b.ToShortDateString();
$StartTime = "10:00:00 PM"
$EndTime = "11:00:00 PM"

$SMS_000 = "XXSMS01"
$SMS_SQL_000 = "XXXXXSQL01"

Get-EventLog -ComputerName $SMS_000, $SMS_SQL_000 -LogName Application -After $b -Before $b -Source "SMS Server" | ?{$_.EventID -eq 5055 -and $_.Event -eq 6829} 
```

我想将结果存储到一个 obj 中，然后将其传递给创建 HTML 报告。以上只是过程的一部分。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:34:11.763

```
$events = Get-EventLog -ComputerName $SMS_000, ... 
```

但是，您需要将过滤器从

```
?{$_.EventID -eq 5055 -and $_.Event -eq 6829} 
```

至

```
?{$_.EventID -eq 5055 -or $_.EventID -eq 6829} 
```

因为`$_.Event`不是有效属性，并且一个事件不能有 2 个不同的 ID。

# python - 用于 SAAS 的 Tornado Web 应用程序中的子域

> ID：14334222
> 
> 赞同：2
> 
> 时间：2013-01-15T09:03:43.943
> 
> 标签：python, webserver, subdomain, tornado, saas

我有一个运行在 www.mywebsite.com 的网络应用程序。

我要求用户注册并为他们的登录输入一个子域名。例如，如果用户输入子域为“demo”，那么他的登录 url 应该是“www.demo.mywebsite.com”。

如何在 tornado web 应用程序中做到这一点，因为 tornado 本身就是一个 web 服务器。或者使用 nginx 或其他 Web 服务服务为应用程序提供服务是唯一的方法？

感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:58:10.967

`self.request.host`under`tornado.web.RequestHandler`将包含子域，因此您可以根据子域更改应用程序逻辑，例如。`current_user`基于 cookie + 子域加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:58:34.640

Tornado itself does not handle subdomains.

You will need to something like NGNIX to control subdomain access.

# ios - 风速应用程序 - iOS

> ID：14334224
> 
> 赞同：-3
> 
> 时间：2013-01-15T09:04:05.507
> 
> 标签：ios, fft, audiounit

我一直在研究 Apple 的 Aurio Touch 示例代码。我想知道如何像风速计一样使用它来测量风速。对此有何建议？麦克风会对声音做出反应，将空气吹入麦克风确实会单独测量声音。如何实现这个来测量风速？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:52:35.077

您可以使用 AVAudioRecorder 来执行此操作。

// 1 .Init AVAudioRecorder 像这样：

```
 NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];

            NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                                      [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                                      [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                                      [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                                      [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                                      nil];

            NSError *error;

            recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

            if (recorder) {
                [recorder prepareToRecord];
                //        recorder.delegate = self;
                recorder.meteringEnabled = YES;
                [recorder record];

            } 
```

// 2\. 初始化一个定时器来获取平均功率

```
levelTimer = [NSTimer scheduledTimerWithTimeInterval: 0.03 target: self selector: @selector(levelTimerCallback) userInfo: nil repeats: YES];

-(void)levelTimerCallback
{
    [recorder updateMeters];

    float peak = [recorder averagePowerForChannel:0];
    float value = [meterTable valueAt:peak];
    //meterTable = [[MeterTable alloc] initWithMinDecibels:-80\. TableSize:50 Root: 1.3];
    //Value 0.0~1.0 ,
} 
```

您可以从 Apple 示例 avTouch 中获取[MeterTable](http://developer.apple.com/library/ios/#samplecode/avTouch/Listings/MeterTable_h.html)

# javascript - 画架超链接

> ID：14334232
> 
> 赞同：0
> 
> 时间：2013-01-15T09:04:28.930
> 
> 标签：javascript, dom-events, easeljs

Easeljs - 超链接。

使用easeljs 脚本：如何超链接到另一个网站？例如：当一个`onClickEvent`事件发生时，另一个窗口会打开——在我的例子中，我想将一个变量、一个 ID 发送到另一个页面，并在 ID 上发送一个 SQL 请求以获取更多详细信息。

任何样品都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T17:19:22.107

![在此处输入图像描述](../Images/db57c0fc9050b5f55cf015d4749551fc.png)

当您单击红色形状时，它将打开 google.com。您可以像这样添加任何画架对象的超链接。

```
 <!DOCTYPE HTML>
<html>
<head>
<title></title>

<style>
    #myCanvas{
        background-color:#CCC;
    }
</style>

<script src="easeljs-0.7.1.min.js"></script>
<script src="jquery-1.7.2.min.js"></script>
<script>
var canvas, stage;
$().ready(function(e) {
    canvas = document.getElementById("myCanvas");
    stage = new createjs.Stage(canvas);
    var shape = new createjs.Shape();
    shape.graphics.beginFill("#ff0000").drawRect(0, 0, 100, 100);
    stage.addChild(shape);
    shape.x = 200, shape.y = 100;
    shape.addEventListener("click", goURL, false);
    stage.update();

});
function goURL(){
    window.open("http://google.com");
    }
</script>

</head>
<body onload="init()">
<canvas id="myCanvas" width="500" height="400">

</canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:44:34.930

[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

```
window.open(URL,name,specs,replace); 
```

但是请注意，如果不遵循用户事件，浏览器可能会阻止像这样的弹出窗口/新选项卡。您还可以通过 jQuery.get 或 jQuery.ajax 等检索详细信息，然后直接在您的应用程序中显示信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T07:39:01.727

如果您只想重定向到另一个页面而不是打开新窗口/选项卡，您也可以使用[window.location 。](https://developer.mozilla.org/en-US/docs/Web/API/Window/location)例如：

```
var id = 0 //the variable you want to pass;

shape.addEventListener("click", gotoURL);

function gotoURL(){
  location.assign( 'http://yoursite.com/search?id='+id );
} 
```

# active-directory - 将 SPN 添加到计算机帐户的权限

> ID：14334234
> 
> 赞同：2
> 
> 时间：2013-01-15T09:04:31.967
> 
> 标签：active-directory, rhel

我正在尝试将一些 RHEL6 框添加到 S2008R2 域。该[过程](https://fedorahosted.org/sssd/wiki/Configuring%20sssd%20to%20authenticate%20with%20a%20Windows%202008%20Domain%20Server#CreatingServiceKeytabonAD)的一部分是在 AD 中创建一个计算机帐户，然后向其中添加一个 SPN。

几乎所有指南都说您需要 AD 的管理员权限，但这对我不可用。我想给 Linux 管理员在 AD 上可能的最低权限。谁能告诉我他们需要目标 OU 的哪些权限才能执行此操作？

添加计算机对象是显而易见的，但是它们无法添加 SPN。

如果我退后一步并从 Linux 端尝试它（使用*net ads join creatupn="host\jhgfjg"*），那么它会添加对象，但再次不会添加 SPN。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:35:13.533

这实际上是针对 serverfault.com 的，但无论如何我都会回答。

在您的机器上安装 Samba，进行设置并以 root 身份执行

```
net ads join -U<adminaccount>@<realm>
net ads keytab create
net ads keytab add <SPN> 
```

你完成了。

# java - 将pdf文件添加到swing java中的jeditorpane

> ID：14334235
> 
> 赞同：0
> 
> 时间：2013-01-15T09:04:37.933
> 
> 标签：java, swing, jeditorpane

我正在尝试在 jeditorPane 中打开 pdf 文件，它打开 pdf 页面但不是以实际格式而是以二进制格式。是否可以在 jeditorpane 或 jtextpane 中打开 pdf 文件。我正在使用以下代码。

```
 try
 {
  JEditorPane pane1= new JEditorPane();
  File f1= new File("path of the pdf file");
  pane1.setPage(f1.toURL());
 }
  catch(Exception ex)
  {
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:35:30.030

JEdi​​torPane 默认不支持 PDF 格式。如果您实施适当的`EditorKit`，您可以使其工作，但我相信这将是一项非常乏味的工作。

然而，Adobe 似乎提供了一个 Java bean PDF 查看器，您可以将其集成到您的应用程序中以显示 PDF。看看[这篇文章](http://today.java.net/pub/a/today/2005/10/20/accessing-pdf-with-acrobat-viewer-javabean.html)。

# bash - 书籍 - bash 脚本和 unix 命令

> ID：14334236
> 
> 赞同：0
> 
> 时间：2013-01-15T09:04:42.143
> 
> 标签：bash, unix, command

我开始在 Unix 环境中学习 Bash shell 脚本，并且正在寻找一本好书/参考指南，其中包括以下内容：

*   Bash 脚本 - 基础知识（条件、循环等），以及更高级的概念
*   unix 命令概述 - 解释基本命令，如 grep、find 等，并以清晰的示例说明它们用于解决 UNIX 中常见问题的用法，例如删除所有超过 3 天的文件、查找所有包含“foo”的文件等。

你们知道任何这样的手册/书吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:06:34.333

是的。ABS 它是免费的 [Advanced Bash-Scripting Guid](http://tldp.org/LDP/abs/html/)

# ios - 从 UISplitViewController 中的 Detail 视图控制器导航到正常的全尺寸 UIViewController

> ID：14334241
> 
> 赞同：0
> 
> 时间：2013-01-15T09:04:57.103
> 
> 标签：ios, objective-c, uiviewcontroller, uisplitviewcontroller, uistoryboardsegue

当有人单击详细视图控制器中的表格单元格时，我想导航到 a `UIViewController`out of a 。`UISplitViewController`

将 segue 设置为 an`UIViewController`无法正常工作。

如何退出`UISplitViewController`并显示全尺寸`UIViewController`并导航回`UISplitViewController`？我想在`UIViewController`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:45:05.703

使用方法在 UISplitViewController 上显示 UIViewController。

```
[self presentModalViewController:viewController animated:YES]; 
```

希望这可以帮助。

# image - Cuda 图像平均滤波器

> ID：14334251
> 
> 赞同：14
> 
> 时间：2013-01-15T09:05:50.930
> 
> 标签：image, image-processing, matrix, cuda, gpu

**平均滤波器**是线性类的加窗滤波器，用于平滑信号（图像）。该滤波器用作低通滤波器。过滤器背后的基本思想是对信号（图像）的任何元素取其邻域的平均值。

* * *

如果我们有一个`m x n`矩阵并且我们想在其上应用具有大小`k`的平均滤波器，那么对于矩阵中的每个点，该 `p:(i,j)`点的值将是正方形中所有点的平均值

![方形内核](../Images/0ad358302dc231f34099e70c528f67e4.png)

该图是对大小为 的滤波的 Square kernel，`2`黄色框是要平均的像素，所有的网格都是相邻像素的平方，像素的新值将是它们的平均值。

问题是这个算法很慢，特别是在大图像上，所以我考虑使用`GPGPU`.

**现在的问题是**，如果可能的话，如何在 cuda 中实现？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-15T10:50:59.257

这是一个[尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel)图像处理问题的经典案例，可以很容易地映射到 CUDA 框架。平均滤波器在图像处理领域被称为[Box Filter](http://en.wikipedia.org/wiki/Box_blur)。

最简单的方法是使用 CUDA 纹理进行过滤，因为边界条件可以很容易地通过纹理处理。

假设您在主机上分配了源和目标指针。该程序将是这样的。

1.  分配足够大的内存来保存设备上的源图像和目标图像。
2.  将源图像从主机复制到设备。
3.  将源图像设备指针绑定到纹理。
4.  指定适当的块大小和足够大的网格以覆盖图像的每个像素。
5.  使用指定的网格和块大小启动过滤内核。
6.  将结果复制回主机。
7.  解绑纹理
8.  免费设备指针。

# 盒式过滤器的示例实现

**核心**

```
texture<unsigned char, cudaTextureType2D> tex8u;

//Box Filter Kernel For Gray scale image with 8bit depth
__global__ void box_filter_kernel_8u_c1(unsigned char* output,const int width, const int height, const size_t pitch, const int fWidth, const int fHeight)
{
    int xIndex = blockIdx.x * blockDim.x + threadIdx.x;
    int yIndex = blockIdx.y * blockDim.y + threadIdx.y;

    const int filter_offset_x = fWidth/2;
    const int filter_offset_y = fHeight/2;

    float output_value = 0.0f;

    //Make sure the current thread is inside the image bounds
    if(xIndex<width && yIndex<height)
    {
        //Sum the window pixels
        for(int i= -filter_offset_x; i<=filter_offset_x; i++)
        {
            for(int j=-filter_offset_y; j<=filter_offset_y; j++)
            {
                //No need to worry about Out-Of-Range access. tex2D automatically handles it.
                output_value += tex2D(tex8u,xIndex + i,yIndex + j);
            }
        }

        //Average the output value
        output_value /= (fWidth * fHeight);

        //Write the averaged value to the output.
        //Transform 2D index to 1D index, because image is actually in linear memory
        int index = yIndex * pitch + xIndex;

        output[index] = static_cast<unsigned char>(output_value);
    }
} 
```

**包装功能：**

```
void box_filter_8u_c1(unsigned char* CPUinput, unsigned char* CPUoutput, const int width, const int height, const int widthStep, const int filterWidth, const int filterHeight)
{

    /*
     * 2D memory is allocated as strided linear memory on GPU.
     * The terminologies "Pitch", "WidthStep", and "Stride" are exactly the same thing.
     * It is the size of a row in bytes.
     * It is not necessary that width = widthStep.
     * Total bytes occupied by the image = widthStep x height.
     */

    //Declare GPU pointer
    unsigned char *GPU_input, *GPU_output;

    //Allocate 2D memory on GPU. Also known as Pitch Linear Memory
    size_t gpu_image_pitch = 0;
    cudaMallocPitch<unsigned char>(&GPU_input,&gpu_image_pitch,width,height);
    cudaMallocPitch<unsigned char>(&GPU_output,&gpu_image_pitch,width,height);

    //Copy data from host to device.
    cudaMemcpy2D(GPU_input,gpu_image_pitch,CPUinput,widthStep,width,height,cudaMemcpyHostToDevice);

    //Bind the image to the texture. Now the kernel will read the input image through the texture cache.
    //Use tex2D function to read the image
    cudaBindTexture2D(NULL,tex8u,GPU_input,width,height,gpu_image_pitch);

    /*
     * Set the behavior of tex2D for out-of-range image reads.
     * cudaAddressModeBorder = Read Zero
     * cudaAddressModeClamp  = Read the nearest border pixel
     * We can skip this step. The default mode is Clamp.
     */
    tex8u.addressMode[0] = tex8u.addressMode[1] = cudaAddressModeBorder;

    /*
     * Specify a block size. 256 threads per block are sufficient.
     * It can be increased, but keep in mind the limitations of the GPU.
     * Older GPUs allow maximum 512 threads per block.
     * Current GPUs allow maximum 1024 threads per block
     */

    dim3 block_size(16,16);

    /*
     * Specify the grid size for the GPU.
     * Make it generalized, so that the size of grid changes according to the input image size
     */

    dim3 grid_size;
    grid_size.x = (width + block_size.x - 1)/block_size.x;  /*< Greater than or equal to image width */
    grid_size.y = (height + block_size.y - 1)/block_size.y; /*< Greater than or equal to image height */

    //Launch the kernel
    box_filter_kernel_8u_c1<<<grid_size,block_size>>>(GPU_output,width,height,gpu_image_pitch,filterWidth,filterHeight);

    //Copy the results back to CPU
    cudaMemcpy2D(CPUoutput,widthStep,GPU_output,gpu_image_pitch,width,height,cudaMemcpyDeviceToHost);

    //Release the texture
    cudaUnbindTexture(tex8u);

    //Free GPU memory
    cudaFree(GPU_input);
    cudaFree(GPU_output);
} 
```

好消息是您不必自己实现过滤器。CUDA 工具包附带免费的信号和图像处理库，名为 NVIDIA Performance Primitives aka NPP，由 NVIDIA 开发。NPP 利用支持 CUDA 的 GPU 来加速处理。平均滤波器已经在 NPP 中实现。当前版本的 NPP (5.0) 支持 8 位、1 通道和 4 通道图像。功能是：

*   `nppiFilterBox_8u_C1R`对于 1 个通道图像。
*   `nppiFilterBox_8u_C4R`对于 4 通道图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T09:26:17.723

一些基本的想法/步骤：

1.  将图像数据从 CPU 复制到 GPU
2.  调用内核为每一行（水平）构建平均值并将其存储在共享内存中。
3.  调用内核为每列（垂直）构建平均值并将其存储在全局内存中。
4.  将数据复制回 CPU 内存。

您应该能够通过 2D 内存和多维内核调用轻松地扩展它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T09:27:20.303

如果过滤器的大小是正常的而不是巨大的，那么平均过滤器是使用 CUDA 实现的一个很好的例子。您可以使用方形块进行设置，并且块的每个线程都负责计算一个像素的值，方法是对其邻居求和和平均。

如果将图像存储在全局内存中，则可以轻松对其进行编程。一种可能的优化是将图像块加载到块的共享内存中。使用幻像元素（这样在查找相邻像素时不会超过共享块的尺寸），您可以计算块内像素的平均值。

唯一需要注意的是“拼接”最终将如何完成，因为共享内存块将重叠（因为额外的“填充”像素）并且您不想计算它们的值两次。

# api - SPARQL 获得多个子项

> ID：14334252
> 
> 赞同：3
> 
> 时间：2013-01-15T09:05:52.763
> 
> 标签：api, sparql

我使用简单的 SPARQL 查询来查询 API：

```
PREFIX ...
SELECT DISTINCT *
    WHERE {
    ?item dct:date ?date .
    ?item dct:title ?title .
    ?item rdfs:info ?info .
    } 
```

这给我一个xml

```
<results>
    <result>
        <binding name='title'>
            <literal>titletitle</literal>
        </binding>
        <binding name='info'>
            <uri>link</uri>
        </binding>
        <binding name='date'>
            <literal datatype='http://www.w3.org/2001/XMLSchema#dateTime'>2012-12-21T02:26:00+00:00</literal>
        </binding>
        <binding name='item'>
            <uri>link</uri>
        </binding>
    </result>
    ...
</results> 
```

但问题是：我知道，与该项目匹配的 rdfs:info 链接不止一个。我怎样才能查询这样我得到

```
...
<binding name='info'>
    <uri>link1</uri>
</binding>
<binding name='info'>
    <uri>link2</uri>
</binding>
<binding name='info'>
    <uri>link3</uri>
</binding>
... 
```

? 这很简单，还是我需要一个子查询或一些奇怪的`UNION`？如果我只是尝试

```
 PREFIX ...
SELECT DISTINCT *
    WHERE {
    ?item dct:date ?date .
    ?item dct:title ?title .
    OPTIONAL (?item rdfs:info ?info1 ).
    OPTIONAL (?item rdfs:info ?info2 ).
    } 
```

`?info1`这将返回和的值的所有可能排列`?info2`。另外，我不知道信息项的数量。

如果我添加`FILTER (?info1 != ?info2)`，我仍然会得到一些排列。`FILTER (?info1 < ?info2)`我认为从代数的角度来看，丢弃排列是可能的。但是我如何申请`<`uris？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:39:39.620

你不能这样做，我害怕。a `SELECT`（或者实际上是 any `WHERE`）的结果是表格的，并且您不能有嵌套表（如在某些关系数据库中找到的那样）或任何其他合适的结构。

直接的选项是添加`ORDER BY ?item`到您现有的查询。这样至少可以将所有内容保持在一起，因此您可以逐项处理。在过去，我编写了包装器来迭代这样的关系数据，允许类似：

```
foreach (item: iterateOverBy(results, "item")
    foreach (date: iterateOverBy(results, "date")
        foreach (title: iterateOverBy(results, "title")
            foreach (info: iterateOverBy(results, "info")
                ...do something... 
```

但是 SPARQL 当然可以返回 RDF，所以你可以使用：

```
CONSTRUCT { ?item dct:date ?date ; dct:title ?title ; rdfs:info ?info }
WHERE ... 
```

在内部，它会做同样的工作，但结果不会像遗嘱那样包含很多重复`SELECT`。

我的最后建议不适合给定的问题，但我应该提一下。

到目前为止，实际的查询处理并没有真正改变，只是结果的形式。但是假设查询表单的位置：

```
WHERE {
  ...some condition to select items...
  ?item dct:date ?date .
  ?item ... as before ...
} 
```

条件可能是`FILTER (?date > ...something...)`or`?item rdf:type ex:InterestingItem`或其他。

在这种情况下，您可能会考虑`DESCRIBE`：

```
DESCRIBE ?item WHERE { ...some condition to select items... } 
```

这将返回（在 rdf 中）有关符合该条件的项目的信息。在这里，查询只是挑选出项目，而不是我们想知道的关于它们的事情。

# c# - 将 HWND 转换为 IntPtr (CLI)

> ID：14334261
> 
> 赞同：11
> 
> 时间：2013-01-15T09:06:27.503
> 
> 标签：c#, mfc, c++-cli, command-line-interface

我的 C++ MFC 代码中有一个 HWND，我想将此 HWND 传递给 C# 控件并将其作为 IntPtr 获取。

我的代码有什么问题，我该如何正确执行？（我认为使用 CLI 指针有问题，因为我收到一个错误，它无法从 System::IntPtr^ 转换为 System::IntPtr。但我不知道如何让这一切正常工作。 ..)

我的 C++ MFC 代码：

```
HWND myHandle= this->GetSafeHwnd();
m_CLIDialog->UpdateHandle(myHandle); 
```

我的 C# 代码：

```
public void UpdateHandle(IntPtr mHandle)
{
   ......
} 
```

我的 CLI 代码：

```
void CLIDialog::UpdateHandle(HWND hWnd)
{
   System::IntPtr^ managedhWnd = gcnew System::IntPtr();
   HWND phWnd; // object on the native heap

   try
   {

       phWnd = (HWND)managedhWnd->ToPointer();
        *phWnd = *hWnd; //Deep-Copy the Native input object to Managed wrapper.

       m_pManagedData->CSharpControl->UpdateHandle(managedhWnd);
    } 
```

当前发生错误（无法从 IntPtr^ 转换为 IntPtr）`m_pManagedData->CSharpControl->UpdateHandle(managedhWnd);`

如果我将 CLI 代码更改为：

```
void CLIDialog::UpdateHandle(HWND hWnd)
{
   System::IntPtr managedhWnd;
   HWND phWnd; // object on the native heap

   try
   {

       phWnd = (HWND)managedhWnd.ToPointer();
        *phWnd = *hWnd; //Deep-Copy the Native input object to Managed wrapper.

       m_pManagedData->CSharpControl->UpdateHandle(managedhWnd);
    } 
```

所以在这种情况下，在 C# 中得到的值是 0。

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T09:28:05.693

要从 HWND（只是一个指针）转换为 IntPtr，您只需调用它的构造函数，并且不需要 gcnew，因为它是一个值类型。因此，这应该可以将 HWND 从本地传递到托管：

```
void CLIDialog::UpdateHandle( HWND hWnd )
{
  IntPtr managedHWND( hwnd );
  m_pManagedData->CSharpControl->UpdateHandle( managedHWND );
} 
```

这是一个您可以从托管代码调用并从本机代码中获取本机 HWND 的函数：

```
void SomeManagedFunction( IntPtr hWnd )
{
  HWND nativeHWND = (HWND) hWnd.ToPointer();
  //...
} 
```

# symfony - 带有 use_controllers 的 Symfony 2 资产错误路径：false

> ID：14334271
> 
> 赞同：4
> 
> 时间：2013-01-15T09:07:14.253
> 
> 标签：symfony, path, controllers, assetic

我尝试在调试模式下将 use_controllers 设置为 false，因为在我的机器上，需要 5 到 15 秒，然后我手动生成了资产。

生成的文件很好，但是当我在浏览器中打开页面时，没有加载任何 css 或 js 文件。我查看了开发人员工具，发现 symfony 正在尝试从“localhost/_controller/js/08f6dbe_jquery-1.7.2.min_1.js”加载文件。如果我手动删除路径中的“_controller”，它可以正常工作，但我不知道，为什么 symfony 会生成错误的路径。

一些代码：

```
#config_dev.yml

assetic:
use_controller: false 
```

base.html.twig

```
{% javascripts '../app/Resources/public/js/libs/jquery-1.7.2.min.js'
     <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

我希望你能帮助我，抱歉英语不好

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-31T23:00:50.197

它只是与清除您的开发缓存有关。更改配置时，我也遇到了同样的事情，但是您需要为您的开发环境手动执行 app/console cache:clear。它不适用于简单的页面刷新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-18T12:12:51.463

我遇到了完全相同的问题，但清除缓存后问题解决了

`php app/console cache:clear`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T10:46:20.823

您可以在 twig tpl 中设置 output="js/*.js"

```
{% javascripts 
    '../app/Resources/public/js/libs/jquery-1.7.2.min.js' output='js/*.js'
     <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

这应该生成类似这样的内容 - “//localhost/js/f31e898_jquery_.js” 例如
，您可以将 * 替换为实际名称 'jquery'，但为了避免缓存，最好使用 *.

希望这可以帮助

# iphone - 自定义 UITableview 单元格可访问性无法正常工作

> ID：14334272
> 
> 赞同：3
> 
> 时间：2013-01-15T09:07:25.830
> 
> 标签：iphone, uitableview, uiaccessibility

我有一个加载表格视图的类。在这个表格视图中有 4 个部分，每个部分有 1 行。每个部分行加载不同的自定义单元格。我已禁用自定义单元格的可访问性。但是启用了单元格中元素的可访问性。

语音开启时，它首先正确读取每个单元组件。但是在我们用三指手势滚动表格后，表格中的第一个或第二个单元格获得焦点，并且语音不会读取单元格内的元素。

任何机构都可以在这个问题上帮助我吗？

这是我用自定义单元格加载表格的代码

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ if ([indexPath section] == 1  ) 
    {
        static NSString* SettingsTableId = @"HomeAddress";
        pHomeAddressCell = (HomeAddress *)[tableView dequeueReusableCellWithIdentifier:SettingsTableId];

        if (pHomeAddressCell==nil) 
        {
            NSArray *nib=[[NSBundle mainBundle] loadNibNamed:@"HomeAddress" owner:self options:nil];
            pHomeAddressCell=[nib objectAtIndex:0];

        }
        pHomeAddressCell.delegate = self;
        return pHomeAddressCell ;
    }} 
```

在自定义单元格“HomeAddress”中，我有一个文本视图和两个按钮。

我发现这个问题只出现在 iOS 低于 6 的设备中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:46:55.540

“故事板 - 原型表视图单元格不适用于 VoiceOver”.. 至少在 iOS 5 中。

我不知道 .. 它是否在 iOS 6 中得到修复。问题似乎是 VoiceOver 或 UIAccessibility API 干扰了原型单元格的加载。静态表格视图单元格不会出现此问题..

您可以查看 Open Radar 错误报告[http://www.openradar.me/search?query=voiceover](http://www.openradar.me/search?query=voiceover)

# matplotlib - Matplotlib 3D 绘图中较暗的背景

> ID：14334274
> 
> 赞同：6
> 
> 时间：2013-01-15T09:07:35.920
> 
> 标签：matplotlib

我在 matplotlib 中绘制以下图像。我的问题是，图像看起来不错，但是，我想让背景变暗，因为当我打印此图像时，灰度部分不会出现在打印中。有人可以告诉我 API 进行此更改吗？

我使用简单的 API 来绘制 3D 曲线 -

```
ax.plot(X1, Y1, Z1, '^', c='r')
ax.plot(X2, Y2, Z2, 'o', c='b') 
```

![在此处输入图像描述](../Images/866403b33479dca69729320dd20b623d.png)

我也尝试过的是这个 -

```
fig = plt.figure(figsize=(10,10))
ax = fig.gca(projection='3d',  axisbg='gray') 
```

这会将颜色更改为深灰色，但也会更改图像外部的颜色 -

![在此处输入图像描述](../Images/74f79141570b1c43ceb74551e583b362.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T10:03:58.607

我通过使用以下代码实现了它 -

```
ax = fig.add_subplot(111, projection='3d')
plt.gca().patch.set_facecolor('white')
ax.w_xaxis.set_pane_color((0.8, 0.8, 0.8, 1.0))
ax.w_yaxis.set_pane_color((0.8, 0.8, 0.8, 1.0))
ax.w_zaxis.set_pane_color((0.8, 0.8, 0.8, 1.0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-24T17:52:50.090

使用 Matplotlib 的深色背景[样式表](https://matplotlib.org/gallery/style_sheets/dark_background.html)，它对通常为黑色的元素（文本、边框等）使用白色

[![在此处输入图像描述](../Images/54d6fe3491b14311da11daa3577b6f80.png)](https://i.stack.imgur.com/De0PH.png)

```
import numpy as np
import matplotlib.pyplot as plt

plt.style.use('dark_background')

fig, ax = plt.subplots()

L = 6
x = np.linspace(0, L)
ncolors = len(plt.rcParams['axes.prop_cycle'])
shift = np.linspace(0, L, ncolors, endpoint=False)
for s in shift:
    ax.plot(x, np.sin(x + s), 'o-')
ax.set_xlabel('x-axis')
ax.set_ylabel('y-axis')
ax.set_title("'dark_background' style sheet")

plt.show() 
```

# c# - 将 GridView 单元格值保存在列表中

> ID：14334277
> 
> 赞同：0
> 
> 时间：2013-01-15T09:08:04.287
> 
> 标签：c#, asp.net, gridview, null, nullreferenceexception

我想将 GridView 单元格保存在列表中以将其与另一个列表进行比较。

这是我尝试过的：

```
 BudgetCommessa budgetCommessa = new BudgetCommessa();
        List<BudgetCommessa> listaDaGridView = new List<BudgetCommessa>();
        for (int i = 1; i <= preventivoView.Rows.Count; i++)
        {
            budgetCommessa.Task = Convert.ToString(preventivoView.SelectedRow.Cells[0].Text);//SelectedDataKey.Values[0]);
            listaDaGridView.Add(budgetCommessa);
        } 
```

但即使填充了 GridView 的单元格（0,0），我也会收到 NullReferenceException

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:11:41.670

您应该检查您的 gridview 是否有任何选定的行。除此之外，您的代码中还有其他问题：

1.  循环应从 0 开始并应以 继续`Rows.Count - 1`。
2.  您应该在 for 循环中进行实例化`budgetCommesa`，否则您最终会得到一个对象列表，它们都指向相同的值。

所以你的代码应该是这样的：

```
for (int i = 0; i < preventivoView.Rows.Count; i++)
 {
        if(preventivoView.SelectedRow != null)
            {            
            BudgetCommessa budgetCommessa = new BudgetCommessa();
            budgetCommessa.Task = Convert.ToString(preventivoView.SelectedRow.Cells[0].Text);//SelectedDataKey.Values[0]);
            listaDaGridView.Add(budgetCommessa);
            }
 } 
```

如果您希望从所有行的单元格中获取值，那么无论选择如何，您都必须**迭代每一行，而不是 SelectedRow**：

```
for (int i = 0; i < preventivoView.Rows.Count; i++)
 {
    BudgetCommessa budgetCommessa = new BudgetCommessa();
    budgetCommessa.Task = Convert.ToString(preventivoView.Rows[i].Cells[0].Text);//SelectedDataKey.Values[0]);
    listaDaGridView.Add(budgetCommessa);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:17:36.850

试试这个 ：

```
 budgetCommessa.Task = preventivoView.Rows[i].Cells[0].Text; 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:30:11.350

如果要使用选定的行，则需要在网格中添加一个按钮字段。

```
<asp:GridView ID="GridView1" runat="server" OnSelectedIndexChanged="SelectedRow_changed">
    <Columns>
        <asp:ButtonField ButtonType="Button" CommandName="Select" HeaderText="Select Row"
            Text="Select" />
    </Columns>
</asp:GridView> 
```

然后更改所选行的事件。

```
public void SelectedRow_Changed(object sender, GridViewSelectEventArgs e)
{
  GridViewRow row = CustomersGridView.Rows[e.NewSelectedIndex];
  BudgetCommessa budgetCommessa = new BudgetCommessa();
  //Would of shifted one because of the new button column
  budgetCommessa.Task = Convert.ToString(row.Cells[1].Text);
} 
```

如果您想引用每一行并遍历它们，请使用 Habib 的答案，因为这是正确的。

# java - 覆盖 log4j 不起作用

> ID：14334278
> 
> 赞同：2
> 
> 时间：2013-01-15T09:08:08.320
> 
> 标签：java, properties, configuration, log4j

我有一个具有以下配置的 log4j 属性：

```
log4j.appender.LOG=org.apache.log4j.RollingFileAppender
log4j.appender.LOG.File=${directory}/log/app.log
log4j.appender.LOG.layout=org.apache.log4j.PatternLayout
log4j.appender.LOG.layout.ConversionPattern=%d{dd MMM HH:mm:ss,SSS} %-5p [%c{1}] %m%n
log4j.appender.LOG.Threshold=DEBUG
log4j.appender.LOG.append=false
log4j.appender.LOG.bufferedIO=false

log4j.appender.LOGHISTORY=org.apache.log4j.DailyRollingFileAppender
log4j.appender.LOGHISTORY.File=${directory}/log/old-logs/app.log
log4j.appender.LOGHISTORY.File.DatePattern='.'yyyy-MM-dd
log4j.appender.LOGHISTORY.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGHISTORY.layout.ConversionPattern=%d{dd MMM HH:mm:ss,SSS} %-5p [%c{1}] %m%n
log4j.appender.LOGHISTORY.Threshold=DEBUG
log4j.appender.LOGHISTORY.append=true
log4j.appender.LOGHISTORY.bufferedIO=false 
```

我想将前一天日志的历史记录保存在“log/old-logs”文件夹中。这与 DailyRollingFileAppender 配合得很好。

我还想在“日志”文件夹中记录当天的日志。这在我的本地主机（Windows + Eclipse + Geronimo）上运行良好，但在我的测试服务器（Linux + WebSphere）上运行不正常。在这种情况下，“app.log”不会被覆盖，所有内容都被附加到日志的末尾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:31:35.013

AFAIK`Rolling file appender`只会在达到指定的最大大小时滚动文件。每次重新启动应用程序时，上述场景可能在本地副本中为您工作，日志文件将因为`.append = false`. 在生产环境中，我认为服务器不会重新启动，这就是文件按照`.append = false`. 这可能是您的情况，为什么覆盖不起作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:30:11.717

检查[这个](https://stackoverflow.com/questions/3468735/log4j-append-true-property-fail)。您应该使用带有大写 A 的 Append。

```
 log4j.appender.LOG.Append=false 
    log4j.appender.LOGHISTORY.Append=true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:45:41.297

对于 RollingFileAppender，您需要指定属性“MaxFileSize”。这将告诉 log4j 在文件达到该大小时滚动文件。

eg: 当日志文件大小达到 2MB 时，下面将翻转

```
log4j.appender.LOG=org.apache.log4j.RollingFileAppender
log4j.appender.LOG.File=${directory}/log/app.log
log4j.appender.LOG.layout=org.apache.log4j.PatternLayout
log4j.appender.LOG.layout.ConversionPattern=%d{dd MMM HH:mm:ss,SSS} %-5p [%c{1}] %m%n
log4j.appender.LOG.Threshold=DEBUG
log4j.appender.LOG.MaxFileSize=2MB
log4j.appender.LOG.MaxBackupIndex=2 (This is optional, tells log4j the maximum backup files to take) 
```

# lotus-domino - Lotus Java 代理无法在网络驱动器上写入

> ID：14334279
> 
> 赞同：0
> 
> 时间：2013-01-15T09:08:11.940
> 
> 标签：lotus-domino, javaagents

### 要解决的问题

我在 Lotus Domino 8.5.3 服务器上的数据库中有一个 java 代理，用于在网络驱动器上创建导出数据。代理的签名者列在服务器文档的所有可编程性限制字段中。服务器的windows用户名添加到所有访问的文件夹，除了“完全访问”和“特殊权限”。代理不能在网络驱动器上创建文件，但可以在本地驱动器上创建文件。

### 错误消息（Domino 服务器日志）

```
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') printing: NotersMain: Can't find resource for bundle java.util.PropertyResourceBundle, key file_operation_not_allowed
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message: java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key file_operation_not_allowed
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at java.util.ResourceBundle.getObject(ResourceBundle.java:407)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at java.util.ResourceBundle.getString(ResourceBundle.java:421)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at lotus.notes.JavaString.getFormattedString(Unknown Source)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at lotus.notes.AgentSecurityManager.checkWrite(Unknown Source)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at java.io.FileOutputStream.<init>(FileOutputStream.java:180)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at java.io.FileOutputStream.<init>(FileOutputStream.java:81)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at java.io.FileWriter.<init>(FileWriter.java:57)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at ExportDocumentFilteredFields.export(Unknown Source)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at JavaAgent.NotesMain(Unknown Source)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at lotus.domino.AgentBase.runNotes(Unknown Source)
2013.01.15 09:32:42   AMgr: Agent ('excelExport|excelExport' in 'Applications\ExcelJavaExport\ExcelJavaExport.nsf') error message:  at lotus.domino.NotesThread.run(Unknown Source) 
```

### 问题

什么可能导致这个问题，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:57:44.770

最后，我们找到了通过 Lotus Java Agent 在网络驱动器上实现写入的解决方案：

1.  使用**[Microsoft Windows UNC](http://en.wikipedia.org/wiki/Path_%28computing%29#Uniform_Naming_Convention "微软视窗UNC")**作为路径而不是映射名称
2.  **使用任务管理器**检查Domino 服务器的**Windows 用户名**
***   将适当的权限添加到 Domino 服务器的 Windows 用户名到文件夹**

# php - 字符串中的 Eclipse 模板 (PHP)

> ID：14334280
> 
> 赞同：0
> 
> 时间：2013-01-15T09:08:15.740
> 
> 标签：php, javascript, eclipse, templates

有没有办法让模板在字符串中工作？

例如，我有一个名为“xyz”的 JS 类。我用 php 建立了一个网站，并有一个名为 $bla 的变量。

$bla 是 JS 代码所在的字符串，我想要一种自动完成功能。

$bla = "<script> xyz.</script>";

当我输入 xyz。它应该显示 JS 类的方法。有没有办法做到这一点？

# objective-c - 动态创建 XML 文件

> ID：14334281
> 
> 赞同：0
> 
> 时间：2013-01-15T09:08:15.937
> 
> 标签：objective-c, xml, ipad, xcode4.2, nsxmlparser

我正在开发基于 Web 服务的 iPad 应用程序。由于该应用程序完全基于 Web 服务，因此我必须为 Web 服务请求创建大量 xml 文件。现在我正在硬编码 xml 请求并将参数传递给它。有没有办法在目标 C 中动态创建 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:21:27.157

无需硬编码。

您可以通过创建 xml 文件来自动执行任务。您可以自己创建一个 xml 创建器来根据需要创建文件。

或者 ，

您可以从[这里](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSXML_Concepts/NSXML.html#//apple_ref/doc/uid/TP40001269)获得帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:21:54.067

查看 github 上的 KissXML，创建节点对象并添加子对象等以从中生成 XML 文件，我正在使用它来生成 KML 文件，效果很好。

# javascript - code igniter auth(Tank Auth) 无缘无故让我退出（即可能超载）

> ID：14334282
> 
> 赞同：0
> 
> 时间：2013-01-15T09:08:22.677
> 
> 标签：javascript, ajax, codeigniter, apache2, tankauth

我有一个控制器和一个如下所示的视图，它可以在一段时间内完美运行，但是在向服务器发出一些请求之后（即每隔一秒重新加载一次），它将在这条线上失败

```
 if (!$this->tank_auth->is_logged_in()) 
```

无缘无故，我不知道天气是拥堵还是...

当我尝试在 firebug 中调试客户端代码并在此行上放置一个断点时

```
 $('#buy_reload').load('buy/reload'); //And press f8 every time 
```

它像魅力一样有什么问题？加载？

Z 控制器

```
class Buy extends CI_Controller
{
function __construct()
{
    parent::__construct();

    $this->load->helper('url');
    $this->load->library('tank_auth');
    $this->load->model(array('tank_auth/users','players','cash','inventory','items','shopping_cart','purchases','processing'));
}

function reload()
{
    if (!$this->tank_auth->is_logged_in()) { 
        redirect('/auth/login/');
    } else {
            //do those stuffs
           }

}
} 
```

Z 视图内的脚本

```
 <script>
   setInterval(function() {
   $('#buy_reload').load('buy/reload');
   }, 1 * 1000);
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:36:02.037

我对 Tank Auth 和 CodeIgniter 2.1 有类似的问题。会话和 Ajax 调用似乎存在问题。以下链接将为您提供帮助

[http://ellislab.com/forums/viewthread/199753/#962141](http://ellislab.com/forums/viewthread/199753/#962141)

[http://ellislab.com/forums/viewthread/203821/#951378](http://ellislab.com/forums/viewthread/203821/#951378)

问题出在会话类的 sess_update 函数中，它会在 X 秒后生成一个新的 session_id。每个页面都有一个 session_id，如果 session_id 在 ajax 调用之前过期，该调用将失败。

# sql-server-2008 - 本地站点间歇性无法连接到 SQL Server，而 SSMS 可以

> ID：14334283
> 
> 赞同：0
> 
> 时间：2013-01-15T09:08:23.643
> 
> 标签：sql-server-2008, asp.net-mvc-4

我遇到了一个最奇怪的问题：当我编写一个新站点时，一切工作正常，而我正在工作的一个晚上突然站点无法再连接到 SQL Server。我可以使用 SQL Server Management Studio 愉快地连接，但该站点引发以下异常。

此机器上的防火墙已完全禁用。

一个问题是我让 SQL Server 在我创建的本地用户下运行。有时，当我重新启动 SQL Server 服务以查看是否可以解决问题时，该服务会抱怨登录失败。然后，我重新输入最初使服务运行的相同凭据，然后在再次说明该帐户已被授予登录作为服务权限后启动。但是，我尝试使用 NETWORK SERVICES 和 LOCAL SYSTEM，这两者都会从我的站点提示相同的异常。

但是，有时它确实有效。我在连接域的笔记本上运行它，所以我想知道这是否与我在家时无法与域交谈有关。然而，我创建的服务帐户是一个本地帐户。

我在 Windows 8 Enterprise 上的 IIS Express 上运行它（以防万一它是 Win8 的一些已知问题）。

添加`Pooling=no`到连接字符串也没有效果。[[参考](https://stackoverflow.com/a/9413670/88496)]

这是我的连接字符串：`Data Source=.;Initial Catalog=NotesBoard;Integrated Security=SSPI;` 我还在“。”上使用了我的机器名称。以同样的结果。甚至尝试过 FQDN。

> System.Web.HttpException 未被用户代码处理
> HResult=-2147467259 消息=无法连接到 SQL Server 数据库。Source=System.Web ErrorCode=-2147467259 WebEventCode=0 StackTrace: 在 System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString) at System.Web.DataAccess.SqlConnectionHelper.EnsureDBFile(String connectionString) 在 System .Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation) 在 System.Web.Security.SqlRoleProvider.GetRolesForUser(String username) 在 WebMatrix.WebData.SimpleRoleProvider.GetRolesForUser(String username) 在 System.Web.Security.RolePrincipal。 IsInRole(String role) at ASP._Page_Views_Shared__Layout_cshtml.Execute() in d:`1 body) at System.Web.WebPages.WebPageBase.PopContext() at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 续）
> InnerException: System.Web.HttpException HResult=-2147467259 消息=无法连接到 SQL Server 数据库。Source=System.Web ErrorCode=-2147467259 WebEventCode=0 StackTrace: 在 System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) at System.Web.Management.SqlServices.SetupApplicationServices （字符串服务器、字符串用户、字符串密码、布尔可信、字符串连接字符串、字符串数据库、字符串 dbFileName、SqlFeatures 功能、布尔安装）在 System.Web.Management.SqlServices.Install（字符串数据库，字符串 dbFileName，字符串连接字符串）在系统.Web.DataAccess.SqlConnectionHelper.CreateMdfFile（字符串全文件名，String dataDir, String connectionString) InnerException: System.Data.SqlClient.SqlException HResult=-2146232060 消息=建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）Source=.Net SqlClient 数据提供者 ErrorCode=-2146232060 Class=20 LineNumber=0 Number=-1 Server="" State=0 StackTrace: at System .Data.SqlClient.SqlInternalConnection.OnError（SqlException异常，`1 wrapCloseInAction) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover) at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions) at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource 1 次重试，DbConnectionOptions userOptions, DbConnectionInternal& connection)`1 retry, DbConnectionOptions userOptions) at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`在 System.Web.Management.SqlServices 的 System.Data.SqlClient.SqlConnection.Open() 处.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) InnerException:

**更新：**[这里](https://stackoverflow.com/q/14357791/88496) 的新帖子中更清楚地定义了这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:45:02.917

> 服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

看起来像 Web 服务器和 SQL 服务器之间的网络问题。可能是任何东西：防火墙、DNS、...也可能是您的 SQL 服务器出现间歇性问题。

与您的系统管理员联系以获取更多详细信息。你的代码没有问题。

# ios - GPUImage 创建一个自定义过滤器来改变选定的颜色

> ID：14334286
> 
> 赞同：3
> 
> 时间：2013-01-15T09:08:39.040
> 
> 标签：ios, image-processing, opengl-es, gpuimage

使用令人惊叹的 GPU 图像框架，我正在尝试使用自定义片段着色器创建一个自定义过滤器，该着色器将一些颜色向量作为制服传递，详细说明每个片段用制服中的一种颜色替换选择的颜色。我使用 Quartz 做到了这一点，它可以工作，但是由于我正在使用这个框架在 OpenGL 世界中迈出第一步，所以我想尝试一下 GPU 处理。
我制作的片段着色器似乎工作正常，但输出有问题。我只发布了一个调试 porpoise 的示例

```
varying highp vec2 textureCoordinate;

uniform sampler2D inputImageTexture;

bool compareVectors (lowp vec3 x,lowp vec3 y){
    bool result;
    if (x.r != y.r) {
        return result = false;
    }
    if (x.b != y.b) {
       return result = false;
    }
    if (x.g  != y.g ) {
       return result = false;
    }
    return result = true;
}

void main()
{
    lowp vec3 tc = vec3(0.0, 0.0, 0.0);

    lowp vec4 pixcol = texture2D(inputImageTexture, textureCoordinate).rgba;
    lowp vec3 sampleColors[3];
    lowp vec3 newColors[3];
    sampleColors[0] = vec3(0.2, 0.2, 0.2);
    sampleColors[1] = vec3(0.0, 0.0, 0.0);
    sampleColors[2] = vec3(1.0, 1.0, 1.0);

    newColors[0] = vec3(0.4, 0.4, 1.0);
    newColors[1] = vec3(0.3, 0.4, 1.0);
    newColors[2] = vec3(0.6, 0.7, 0.5);
    if (pixcol.a >= 0.2) {
        if (compareVectors (sampleColors[0],pixcol.rgb))
            tc = newColors[0];
        else if (compareVectors (sampleColors[1],pixcol.rgb))
            tc = newColors[1];
        else if (compareVectors (sampleColors[2],pixcol.rgb))
            tc = newColors[2];
        else
            tc = pixcol.rgb;
    }
    else
        tc = pixcol.rgb;

    gl_FragColor = vec4(tc.rgb, pixcol.a);
} 
```

生成的图像有很多伪影。如果写入磁盘，它在屏幕上似乎是像素化的，并且创建得不好。这是一些屏幕。
![开始图像](../Images/5fa0b57c5f38dcf00c5fe5027b8bdd7a.png) ![从屏幕过滤的图像](../Images/a820baa915820ef973f72d6b894b8cb0.png) ![从磁盘过滤的图像](../Images/82a4b0130d613e8802d424c94667a812.png)

第一张是起始图，第二张是过滤后的法师在iphone屏幕上的截图，第三张是写入磁盘的过滤后的图像。深入研究我记得纹素和像素不是一回事，所以可能我没有正确映射它们。我想要一个 1:1 的位置比率，但可能不会发生。
我怎样才能做到这一点？
谢谢，安德里亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T07:43:19.030

正如布拉德在评论中所说，解决方案是简单地在一系列值中面对纹素颜色。这是由于浮点精度（我现在写它感觉很愚蠢，这很明显）。起始图像具有固定的受控颜色，但由于原始图像是采样的，因此可能与起始图像的信息不相等。这是正确的片段着色器：

```
varying highp vec2 textureCoordinate;
uniform sampler2D inputImageTexture;

bool compareVectors (lowp vec3 sample,lowp vec3 texel){
    bool result;
    if ( abs(texel.r-sample.r) > 0.1 ) {
        return result = false;
    }
    if ( abs(texel.g-sample.g) > 0.1 ) {
        return result = false;
    }
    if ( abs(texel.b-sample.b) > 0.1 ) {
        return result = false;
    }

    return result = true;
}

void main()
{
    lowp vec3 tc = vec3(0.0, 0.0, 0.0);

    lowp vec4 pixcol = texture2D(inputImageTexture, textureCoordinate).rgba;
    lowp vec3 sampleColors[3];
    lowp vec3 newColors[3];
    sampleColors[0] = vec3(0.5, 0.5, 0.5);
    sampleColors[1] = vec3(0.0, 0.0, 0.0);
    sampleColors[2] = vec3(1.0, 1.0, 1.0);

    newColors[0] = vec3(0.4, 0.4, 1.0);
    newColors[1] = vec3(0.3, 0.4, 1.0);
    newColors[2] = vec3(0.6, 0.7, 0.5);

    if (pixcol.a >= 0.2) {
        if (compareVectors (sampleColors[0],pixcol.rgb))
            tc = newColors[0];
        else if (compareVectors (sampleColors[1],pixcol.rgb))
            tc = newColors[1];
        else if (compareVectors (sampleColors[2],pixcol.rgb))
            tc = newColors[2];
        else
            tc = pixcol.rgb;
    }
    else
        tc = pixcol.rgb;

    gl_FragColor = vec4(tc.rgb, pixcol.a);
} 
```

我要感谢布拉德找到了答案。希望这可以帮助。

# javascript - 不允许多次单击按钮/图标

> ID：14334288
> 
> 赞同：4
> 
> 时间：2013-01-15T09:08:45.813
> 
> 标签：javascript, jquery

我正在创建一个打地鼠风格的游戏，其中给出了一个总和，数字从容器底部到顶部动画。游戏的目的是点击总和的正确答案并收集尽可能多的正确答案。

我的问题是用户可以多次单击数字和其他图标，导致它崩溃。有没有办法克服这个问题？

我试过这个[jQuery`one`函数](http://api.jquery.com/one/)

```
$(".character").one("click", function() {
}); 
```

但是图标重新出现，所以我需要它们再次可点击。

我也试图设置一个超时时间，但似乎无法让它工作。有人可以将e指向正确的方向。

```
 setTimeout(function() {
    $(".character").one("click", function() {
    });
}, 3000); 
```

小提琴：http: [//jsfiddle.net/GvNB8/](http://jsfiddle.net/GvNB8/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:21:51.710

您的主要问题是重新显示角色时您没有与角色互动。在这种情况下，阻止用户单击的唯一方法是构建一种方法来防止在超时后快速连续单击两次。

该方法看起来像这样：

```
function clickThrottled(fn) {
  var click = true;
  return function () {
    if(click) {
      click = false;
      fn.apply(this, arguments);
      setTimeout(function () { click = true; }, 1000);
    }
  };
} 
```

然后，您可以像这样使用该函数：

```
$('.character').click(clickThrottled(function () {
   // do your one time magic.
})); 
```

我在这里使用的是 JavaScript 闭包。传递给 click 事件处理程序的函数只会调用底层函数一次，然后忽略所有调用 1 秒钟，然后重新启用自身。

我仍然建议您使用一种正常的方法，即在将元素重新绘制到屏幕上时重新启用它们 - 但上述方法也有效..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:27:58.383

为什么不只是添加一条信息表明该项目已被点击：

```
$(".character").click(function(){
    if(!$(this).data("hasBeenClicked")) {
        $(this).data("hasBeenClicked", true);
        // the rest of your logic ...
    }
}); 
```

# windows-phone-7 - 更改低端/高端 Wp7 设备中的应用程序行为

> ID：14334291
> 
> 赞同：1
> 
> 时间：2013-01-15T09:08:58.180
> 
> 标签：windows-phone-7, marketplace

我将实现总是运行的动画，它会过多地消耗内存和 CPU 使用率。由于在低端设备（256 MB RAM，如 LUMIA 510）中，ui 会挂起一段时间。因此决定仅在高内存设备（超过 512 MB 的 RAM 中运行动画，如 710、雷达、820 等）。这可以通过获取设备总内存来完成。

```
DeviceExtendedProperties.GetValue("DeviceTotalMemory"); 
```

这种行为在市场上是否可以接受。？请澄清一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:28:11.217

为什么不会呢？您只是根据设备的内存大小执行操作。这与验证应用程序是否始终如一地工作并遵循 Marketplace 的这些规则无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:26:30.613

有一种更好的方法可以检测 256 MB 的设备，使用`DeviceExtendedProperties.GetValue("ApplicationWorkingSetLimit")` [诺基亚开发者门户中的描述](http://www.developer.nokia.com/Community/Wiki/Best_practice_tips_for_delivering_apps_to_Windows_Phone_with_256_MB)。这个想法没问题，我在一些应用程序中也是如此。

# javascript - Javascript 和 Sqlite

> ID：14334292
> 
> 赞同：17
> 
> 时间：2013-01-15T09:09:13.097
> 
> 标签：javascript, html, sqlite

我正在使用 HTML5 和 Javascript 创建一个应用程序。此应用程序将与 Windows 和 iOS 6 (iPad) 兼容。我需要使用 javascript 访问本地数据库。这是一个纯粹的离线应用程序，不涉及服务器端。

我的困境是——

1.  W3C 不再支持 WebSQL。

2.  IndexedDB 适用于 Firefox，但不适用于 iOS6。

3.  最重要的是，我想避免 HTML5 本地数据库存储，因为它会在清除历史记录时清除数据。

我想在本地为应用程序建立一个持久的数据库，比如 SQLite。是否可以使用纯 javascript 访问 SQLite，以便它可以在 Windows 和 iPad 上与 Firefox 一起使用。

编辑：该应用程序不会从 iPad (iOS6) 中的浏览器运行。而是将应用程序打包成 ipa 文件并安装在 iPad 设备中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T10:59:49.107

您正在寻找的是[polyfill](http://remysharp.com/2010/10/08/what-is-a-polyfill/)。

根据[HTML5 Please](http://html5please.com/#indexeddb)，[IndexedDB Polyfill](http://nparashuram.com/IndexedDBShim/)通过 WebSQL 实现 IndexedDB API。（polyfill 的作者也在 Mozilla Hacks 上写了[一篇](https://hacks.mozilla.org/2012/07/using-indexeddb-api-today-the-indexeddb-polyfills/)关于它的文章。）

Facebook 也作为[polyfill](https://github.com/facebook/IndexedDB-polyfill)。根据[这个拉取请求](https://github.com/daleharvey/pouchdb/pull/132)（到另一个项目），第一个 polyfill 的作者 Parashuram Narasimhan 似乎更喜欢 Facebook 的 polyfill，并且正在考虑退出他自己的项目。（但话又说回来，Facebook repo 看起来像是一次性代码转储，可能没有任何正在进行的开发。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T10:34:39.093

有几点需要注意。

1.  它是一个纯粹的客户端应用程序。
2.  不使用网络存储（本地和会话）

剩下的选项是使用 webSQL、IndexedDB、第三方框架或自定义解决方案。

**webSQL** :- 支持仅限于 webkit 浏览器和 w3c 宣布其死亡。[浏览器支持](http://caniuse.com/#search=webSQL)

**IndexedDB** :- 支持 IE10、chrome 和 Firefox。[浏览器支持](http://caniuse.com/#search=indexedDB)。旧版本的 IE 不支持。

**第三方框架**：- [sequelsphere](http://www.sequelsphere.com/)是一个独立于平台的解决方案来解决这个问题。它是一个完全用 javascript 编写并使用 webSQL 或 IndexedDB 的 RDMS。

**自定义解决方案**：-在像本教程这样[的跨平台 Web 应用程序上同时支持 IndexedDB 和 WebSQL](http://labs.ft.com/2012/09/ft-style-web-app-on-firefox-and-ie6-to-ie10/)，我们可以创建自定义跨浏览器数据库解决方案，或者可以使用类似 json 存储选项的[草坪椅。](http://brian.io/lawnchair/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T18:28:29.153

我们有同样的问题并在这个[线程](https://stackoverflow.com/questions/12247380/offline-access-sqlite-or-indexeddb)上得到了回答。

如果您需要单个表 DB，Lawnchair 是一个不错的选择 - 我们需要多个表，因此开发了自己的包装器。

使用 HTML-5 和 JavaScript 创建一个 Web 应用程序，这样它就可以在桌面浏览器和 iPad 上运行。使用PhoneGap 使其成为iPad 的本机应用程序。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-22T07:00:18.257

请检查这是否有帮助。您可以将 javascript 用于前端和后端（用于数据库交互）。有很多插件也可用于此框架。[http://www.nodejs.org](http://www.nodejs.org)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-15T10:29:39.770

这是 100% 可能的。我可以推荐一个用于在 html5 sqlite 中访问数据的 javascript 库。文档和示例代码：[单击此处](https://cordova.codeplex.com/wikipage?title=How%20to%20use%20nova.data)

我用那个lib做了一个android演示（通过使用phonegap）。效果很好！

[在此处下载演示](http://www.novasoftware.com/developer/PhoneGap.aspx?utm_source=codeplex&utm_medium=phonegap&utm_term=phonegap&utm_content=cordova&utm_campaign=leo)

# json - 如何在 jquery UI autcomplete 中同时添加硬编码值和 JSON 值？

> ID：14334297
> 
> 赞同：1
> 
> 时间：2013-01-15T09:09:50.900
> 
> 标签：json, jquery-ui-autocomplete

我正在为状态字段使用 jquery UI 自动完成插件。这是我的代码：

自动完成：

```
 {

  source: function( request, response ) {

            jQuery.ajax({
                url:base+"/stateSearchJSON",
                dataType: "jsonp",
                data: {
                    maxRows: 10,
                    startsWith: request.term

                },
                success: function( data ) {

                    response( jQuery.map( data.states, function( item ) {
                        return {
                                       value: item.stateName,
                                       label: item.stateName
                                  }

                    }));
                                        jQuery('.ui-autocomplete').css('width', '188px');
                }
            });
        }
  } 
```

现在对于状态字段，我想向自动完成添加一个硬编码值，即“三态”。值：标签：'tristate'，值：CT，NY，NJ。

自动完成应该填充 JSON 响应和三态的硬编码值。

如何将 JSON 和硬编码值合并为自动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:36:23.033

通过：[http ://api.jqueryui.com/autocomplete/#method-search](http://api.jqueryui.com/autocomplete/#method-search)

与您使用的变体无关，**标签**始终被视为文本。

如果您希望标签被视为 html，您可以使用 Scott González 的 html 扩展：
[https ://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.html.js](https://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.html.js)

# c++ - C中的一种方式哈希函数

> ID：14334305
> 
> 赞同：-2
> 
> 时间：2013-01-15T09:10:07.863
> 
> 标签：c++, c

有没有什么方法可以计算 C 编程中的单向哈希，它返回结果哈希值的字节数组.. 谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T09:18:32.750

您可以为此使用 Lib。例如 libgcrypt。

看看[这里](http://ubuntuforums.org/showthread.php?t=337664)。这与您在这里提出的问题几乎相同。

对于 libgcrypt11-dev 包 (gcrypt.h)

```
#include <gcrypt.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv){

  /* Test for arg string */
  if ( argc < 2 ){
    fprintf( stderr, "Usage: %s <string>\n", argv[0] );
    exit( 1 );
  }

  /* Length of message to encrypt */
  int msg_len = strlen( argv[1] );

  /* Length of resulting sha1 hash - gcry_md_get_algo_dlen
   * returns digest lenght for an algo */
  int hash_len = gcry_md_get_algo_dlen( GCRY_MD_SHA1 );

  /* output sha1 hash - this will be binary data */
  unsigned char hash[ hash_len ];

  /* output sha1 hash - converted to hex representation
   * 2 hex digits for every byte + 1 for trailing \0 */
  char *out = (char *) malloc( sizeof(char) * ((hash_len*2)+1) );
  char *p = out;

  /* calculate the SHA1 digest. This is a bit of a shortcut function
   * most gcrypt operations require the creation of a handle, etc. */
  gcry_md_hash_buffer( GCRY_MD_SHA1, hash, argv[1], msg_len );

  /* Convert each byte to its 2 digit ascii
   * hex representation and place in out */
  int i;
  for ( i = 0; i < hash_len; i++, p += 2 ) {
    snprintf ( p, 3, "%02x", hash[i] );
  }

  printf( "%s\n", out );
  free( out );

} 
```

# sql - SQL查询-如何计算两个日期的平均时间差，格式为：5天13小时

> ID：14334308
> 
> 赞同：0
> 
> 时间：2013-01-15T09:10:19.973
> 
> 标签：sql, db2, timestamp, datediff

我用以下格式编写了 SQL 表达式：

```
 select date1,date2,
cast ( Floor ( timestampdiff   (4, char (     timestamp (DATE2)-  
     timestamp (DATE1)))/1440) as char (3))||'days' ||' '  
 || cast ( Floor ( Mod ( timestampdiff (4, char(   timestamp (DATE2)-  
     timestamp (DATE1))) , 1440) / 60) as char (3)) ||'hours' 
```

因此，我在几分钟内有所不同，然后将其转换为几天和几小时。示例结果将是：

```
DATE1                  DATE2                  DIFFERENCE
2012-01-01 10:00:00    2012-01-03 12:00     2 days 2 hours
2012-01-03 11:00:00    2012-01-03 12:00     0 days 1 hours 
```

这是我目前得到的结果，没关系。但是现在我想获得具有平均差异值的单独结果。所以第一行的分钟数是 3000。第二行的分钟数是 60。平均值是 (3000+60)/2=1530 = 1 天 1 小时

所以我想要这种格式的结果：平均值：“1天1小时”

我正在使用 db2。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:42:02.717

我不知道 db2，但我是为 sql server 做的，估计不会有很多变化

[sqlFiddle](http://sqlfiddle.com/#!6/9398e/1)

您需要的是聚合函数中的 OVER() 子句

```
select *, DATEDIFF(hour, date1, date2)/24 as days
,DATEDIFF(hour, date1, date2)%24 as hours
,DATEDIFF(hour, date1, date2) as asdf,
AVG(DATEDIFF(hour, date1, date2)) over() as avgHours
from #temp 
```

# android - 适用于不同屏幕尺寸的 Android 布局

> ID：14334309
> 
> 赞同：0
> 
> 时间：2013-01-15T09:10:22.567
> 
> 标签：android, android-layout, android-intent

我是 android 新手，我正在尝试为不同的屏幕尺寸创建一个布局。是否有可能或者我想为不同的屏幕创建不同的布局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:40:05.010

当然，您只能在 中提供布局`res/layout`，但在其他屏幕尺寸上它可能看起来很难看，即使（或因为）Android 尝试对其进行缩放。

*无法**在单个文件中*为不同的分辨率定义布局。可以将布局设计为动态的，以便 Android 可以尽可能地将其调整到给定的分辨率。

# c# - DataGrid 重复列

> ID：14334312
> 
> 赞同：0
> 
> 时间：2013-01-15T09:10:25.440
> 
> 标签：c#, wpf, datagrid

我正在创建一个带有`DataGrid`.

`DataGrid`绑定到 上`Properties`的字段`ViewModel`。

但是，对于其中一列，我希望每一行都有相同的值绑定到 View 模型上的某个其他属性。

具体来说，该表显示命名的货币值，重复的列将显示货币代码（每一行都相同）。

我无法弄清楚如何做到这一点，我尝试使用以下内容：

```
 <DataGrid ItemsSource="{Binding Properties}">
    <DataGrid.Columns>
      <DataGridTextColumn Header="Target" Binding="{Binding Target}"/>
      <DataGridTextColumn Header="Value" Binding="{Binding Value}"/>
      <DataGridTemplateColumn Header="Currency">
        <DataGridTemplateColumn.CellTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Properties.NodeCurrency}"/>
          </DataTemplate>
        </DataGridTemplateColumn.CellTemplate>
      </DataGridTemplateColumn>
    </DataGrid.Columns>
  </DataGrid> 
```

我正在使用没有`DataContext`在视图中键入的 Caliburn 框架。我不确定这是否对这个问题很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:24:45.403

您可以尝试通过 Binding 的 RelativeSource 来实现。例如：

```
<TextBlock Text="{Binding Property.NodeCurrency, RelativeSource={RelativeSource  AncestorType=Window}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:25:04.263

您可以在绑定上使用 RelativeSource/FindAncestor 来绑定到当前 DataContext 之外的其他 DataContext ：

```
<TextBlock
   Text="{Binding Property.NodeCurrency, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:48:44.097

在两位回答者的帮助下，我需要的实际绑定是：

```
<TextBlock Text="{Binding DataContext.Property.NodeCurrency, RelativeSource={RelativeSource AncestorType=UserControl}}"/> 
```

缺少的一点是指定我绑定到 的`DataContext`，`UserControl`然后深入研究`ViewModel`.

# c++ - C/C++ 中的 typedef 是否真的通过组合复合类型（例如 int*）来创建新类型？

> ID：14334317
> 
> 赞同：7
> 
> 时间：2013-01-15T09:10:30.657
> 
> 标签：c++, c, types, grammar, typedef

最近我发现`typedef`我的代码中的工作与我提议的完全不同。像这样的一个例子：

```
typedef int *ptype;
ptype v1 = 0, v2 = 0; 
```

结果：v1 和 v2 都被定义为指向`int`类型的指针。但是如果你只是简单地将第二句中的`ptype`by替换为or ，那么只有 v1 将是指针，而 v2 是正常的。似乎没有做简单的替换。更重要的是，当涉及到复杂的修饰符时：`int *``int *v1 = 0, v2 = 0;``int* v1 = 0, v2 =0;``int``typedef`

```
typedef int *ptype;
const ptype v3 = 0; 
```

结果将是：v3 是一个`const`指针，如果我们写的话，它不是指向`const`int的指针`const int *v3 = 0;`。在上面的代码`const`中，代表整体的修饰符`ptype`，而不是`int`内部`ptype`。因此，它看起来真的像是`typedef`结合了复合类型`int*`并创建了一个新类型。

但是，权威的 C/C++ 参考网站[cplusplus](http://www.cplusplus.com/doc/tutorial/other_data_types/)说“typedef 不会创建不同的类型。它只会创建现有类型的同义词”。所以我真的很困惑，希望有人可以帮助解释`typedef`. 谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T09:19:50.937

“同义词”并不意味着“文本替换”。`ptype`不是`int *`由预处理器或任何东西逐字扩展为。

这意味着您可以执行以下操作：

```
typedef int *ptype;
ptype a;
int *b;

a = b;   // OK 
```

赋值是有效的，因为`ptype`和`int *`是相同的类型；不需要类型转换或强制转换。

`typedef`只是让您给现有类型一个新名称。但是该名称将现有类型的每个方面组合成一个不可分割的实体，例如，`ptype a, b;`等效于`ptype a; ptype b;`（并且`const ptype`表示“const 指向 int 的指针”，因为`ptype`表示“指向 int 的指针”）。

换句话说，就声明而言，由创建的新*名称*`typedef`表现得像内置关键字，但这些名称表示的实际*类型*是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:18:53.470

当 cplusplus.com 说这`typedef`不会创建新类型时，他们的意思是在任何可以使用 value 的地方也可以使用`ptype`type 的值，`int*`反之亦然。因此，如果您定义一个带`ptype`参数的函数，您可以传递它`int*`而无需任何转换。

这并不意味着 a`typedef`被实现为像 a 那样的纯文本替换`#define`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T10:39:55.857

参考 C89，第 3.5 节，这`ptype v1 = 0, v2 = 0;`是不等同于`int *v1 = 0, v2 = 0;`. 更高版本的 C 和 C++ 是由 C89 提供的，在这方面基本相同。

在`ptype v1 = 0, v2 = 0;`中，`ptype`是“声明说明符”，并且`v1 = 0, v2 = 0`是“初始化声明符列表”。具体来说，`ptype`是一个“类型说明符”，更具体地说，它是一个“typedef-name”。因此，我们声明了两个变量 (`v1`和`v2`)，它们都具有 type `ptype`，这是`int*`.

在`int* v1 = 0, v2 = 0`,`int*`中*不是*“声明说明符”，因为它由一系列“类型说明符”、“存储类说明符”和“类型限定符”组成。您可以依次查找其中的每一个，但将它们放在一起相当于一个完整的关键字列表，例如`static`or `const`，内置类型名称，加上 typedef 和 enum 名称以及结构/联合说明符。它们*不*包括`*`，这是复合类型语法的一部分。所以在这种情况下`int`是“声明说明符并且`*v1 = 0, v2 = 0`是”init-declarator list“。一旦我们分解“init-declarator list”的语法，`*`它只适用于`v1`，而不适用于`v2`。那'`int*``int`

类似地，您可以编写`ptype *v1 = 0, v2 = 0;`，它将定义 one`pytpe*`和 one `ptype`。也就是说，一`int**`加一`int*`。

`const int *`vs的语法`const ptype`得出了类似的结果——在前者中，`const`“类型限定符”适用于，`int`但在后者中适用于`ptype`.

# django - request.POST.getlist 在 Django 中返回 None 列表？

> ID：14334318
> 
> 赞同：2
> 
> 时间：2013-01-15T09:10:33.563
> 
> 标签：django

我有一个这样的html模板：

```
<table border="1" align="center">

{% for result in result %}
<tr>
<td><input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice }}" /></td>
<td><label for="choice{{ forloop.counter }}">{{ choice }}</label><br /></td>
<td>{{ result.file_name }}</td>
<td>{{ result.type }}</td>
<td>{{ result.size }}</td>
<td>{{ result.end_date }}</td>
<td>{{ result.source }}</td>
{% endfor %}
</tr>
</table>
{{ c }}
<h4><a href="/delete_files/">Delete File</a></h4> 
```

`result variable`生成自：

```
def uploaded_files(request):
    log_id = request.user.id
    b = File.objects.filter(users_id=log_id, flag='F') #Get the user id from session .delete() to use delete
    return render_to_response('upload.html',  {'result': b}, context_instance=RequestContext(request)) 
```

这是我尝试从模板中选择值的地方：

```
def delete_files(request):
    log_id = request.user.id
    choices = request.POST.getlist('choice') #Get the file name from the as a list
    for i in choices:
        File.objects.filter(users_id=log_id, file_name=i).update(flag='D')
    return render_to_response('upload.html', {'c': choices}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:27:22.737

选择后包括 [] 因为您收到数组表单请求

`choices = request.POST.getlist('choice[]')`

这将解决你的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:01:10.603

正如 Rohan 在评论中提到的，您在模板中没有`<form>`标签，并且似乎只是假设单击普通`<a>`链接将提交一些数据。这根本不是它的工作原理：如果你想从输入元素提交数据，它们需要在 a 内`<form>`，你需要适当地设置该`action`表单，并且你需要使用`<input type="submit">`(or `button`) 而不是链接提交它.

顺便说一下，这是基本的 HTML，而不是 Django。

# mysql - 按like子句中的匹配数排序mysql结果集

> ID：14334320
> 
> 赞同：0
> 
> 时间：2013-01-15T09:10:35.210
> 
> 标签：mysql, sql-order-by, sql-like

场景是我使用 like 运算符实现了搜索查询：

```
.. WHERE caption LIKE 'hello%' OR text LIKE '%hello'
      OR caption LIKE 'jame%' OR text LIKE 'jame%' 
```

该表类似于：

```
id | caption | text
---------------------
1  | Hi      | Hi Jame
2  | Hello   | Hello firend
3  | Jame    | Hello jame 
```

所以我希望结果集是这样的：

```
id | caption | text
---------------------
3  | Jame    | Hello jame
1  | Hi      | Hi Jame
2  | Hello   | Hello firend 
```

因为第 3 行有更多的`WHERE`和`LIKE`子句匹配。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:19:51.363

```
SELECT            *
FROM     ( SELECT *,
                 CASE
                         WHEN caption LIKE 'hello%' OR text LIKE '%hello'
                         THEN 1
                         WHEN caption LIKE 'jame%' OR text LIKE 'jame%'
                         THEN 2                         
                         ELSE 0
                 END AS weight
         FROM    your_table
         )
         q
WHERE    q.weight > 0
ORDER BY q.weight 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:17:41.347

试试这个

```
 WHERE caption LIKE 'hello%' OR text LIKE '%hello'
  OR caption LIKE 'jame' OR text LIKE 'jame'
  ORDER BY caption DESC 
```

或者像这样更容易

```
 WHERE caption LIKE 'hello' 
  OR caption LIKE 'jame'
  ORDER BY caption DESC 
```

# r - 在存在可选参数的情况下如何处理省略号（...）？

> ID：14334322
> 
> 赞同：4
> 
> 时间：2013-01-15T09:10:44.357
> 
> 标签：r, ellipsis, optional-arguments

当我在函数定义中使用可选参数时，省略号有问题。为了澄清，我定义了以下函数：

```
func1 <- function (x) (x-2)^2

func3 <- function (fun, arg.curve.user){
  arg.curve.user$expr <-  substitute(func1)
  arg.curve.default <- list(col = "blue", n = 1000, main = "This is a test")
  arg.curve <- modifyList (arg.curve.default, arg.curve.user)
  do.call("curve", arg.curve)
}

# optimizes func1 and call func2 to plot func1
func2 <- function (lb, ub, n.restarts = 5, n.sim = 10, ...){
  arg.curve.user <- as.list(substitute(list(...)))
  output <- gosolnp(fun = func1, LB = lb, UB = ub,  n.restarts =  n.restarts, 
  n.sim =  n.sim)$par
  func3(fun = func1, arg.curve.user = arg.curve.user)
   return(output)
} 
```

通过调用 func2，对 func1 进行优化，并通过 func3 调用（需要**Rsolnp**包）进行绘制。

`func2 ( lb = 0, ub = 8, n.restarts = 5, n.sim = 10, n = 200, from = 0, to = 8)`

但是假设用户拼写错误`n.restarts`并写道`nrestarts`：

`func2 ( lb = 0, ub = 8, nrestarts = 5, n.sim = 10, n = 200, from = 0, to = 8)`

在这种情况下，我希望 R 实施以下计划来处理 的缺失`n.restarts`：

1.  将默认值（即 5）分配给 n.restarts 作为可选参数
2.  最后声明一个警告：“nrestarts”不是图形参数

但这不会发生，而是 **R 将 n (200) 的值分配给 n.restarts**！

谁能帮我解决这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T10:25:54.313

当用户未提供参数时，它部分匹配`n`参数。`n.restarts`相反，与@Andrie 的建议相反（当然，它会起作用），有一种机制可以让你以你有的方式继续使用 argument`n`和 and `n.restarts`。诀窍是*在*. **_** *`...`*

 *```
func2 <- function (lb, ub, ..., n.restarts = 5, n.sim = 10){
  writeLines(paste("Value of `n.restarts` is", n.restarts))
  arg.curve.user <- as.list(substitute(list(...)))
  output <- gosolnp(fun = func1, LB = lb, UB = ub,  n.restarts =  n.restarts, 
                    n.sim =  n.sim)$par
  func3(fun = func1, arg.curve.user = arg.curve.user)
  output
} 
```

在使用中，这给出了：

```
> func2 (lb = 0, ub = 8, n.restarts = 2, n.sim = 10, n = 200,
+        from = 0, to = 8)
Value of `n.restarts` is 2          <---- Here!

Iter: 1 fn: 6.926e-15    Pars:  2.00000
Iter: 2 fn: 2.501e-15    Pars:  2.00000
solnp--> Completed in 2 iterations

Iter: 1 fn: 8.336e-16    Pars:  2.00000
Iter: 2 fn: 8.336e-16    Pars:  2.00000
solnp--> Completed in 2 iterations
[1] 2
> func2 (lb = 0, ub = 8, nrestarts = 2, n.sim = 10, n = 200,
+        from = 0, to = 8)
Value of `n.restarts` is 5          <---- Here! Default

Iter: 1 fn: 2.83e-15     Pars:  2.00000
Iter: 2 fn: 2.5e-15  Pars:  2.00000
solnp--> Completed in 2 iterations

Iter: 1 fn: 2.037e-15    Pars:  2.00000
Iter: 2 fn: 2.037e-15    Pars:  2.00000
solnp--> Completed in 2 iterations

Iter: 1 fn: 1.087e-15    Pars:  2.00000
Iter: 2 fn: 1.087e-15    Pars:  2.00000
solnp--> Completed in 2 iterations

Iter: 1 fn: 8.558e-16    Pars:  2.00000
Iter: 2 fn: 8.558e-16    Pars:  2.00000
solnp--> Completed in 2 iterations

Iter: 1 fn: 7.147e-16    Pars:  2.00000
Iter: 2 fn: 7.147e-16    Pars:  2.00000
solnp--> Completed in 2 iterations
[1] 2
Warning messages:
1: In plot.window(...) : "nrestarts" is not a graphical parameter
2: In plot.xy(xy, type, ...) : "nrestarts" is not a graphical parameter
3: In axis(side = side, at = at, labels = labels, ...) :
  "nrestarts" is not a graphical parameter
4: In axis(side = side, at = at, labels = labels, ...) :
  "nrestarts" is not a graphical parameter
5: In box(...) : "nrestarts" is not a graphical parameter
6: In title(...) : "nrestarts" is not a graphical parameter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:52:33.270

如果您坚持定期进行参数评估，您更有可能立即收到警告。同样，您不需要使用特殊的评估来获得您想要的行为。使用非标准评估是一个坏主意，因为您不太可能完全重现 R 的默认行为，从而给您和您的用户带来细微的错误。

```
library(Rsolnp)

func1 <- function (x) (x-2)^2

func3 <- function (fun, col = "blue", n = 1000, main = "This is a test", ...){
  curve(func1, ..., n = n, col = col, main = main)
}

# optimizes func1 and call func2 to plot func1
func2 <- function (lb, ub, n.restarts = 5, n.sim = 10, ...){
  output <- gosolnp(fun = func1, LB = lb, UB = ub, n.restarts = n.restarts, 
  n.sim =  n.sim)$par
  func3(fun = func1, ...)
  return(output)
} 
```

然后当你运行：

```
func2 ( lb = 0, ub = 8, nrestarts = 5, n.sim = 10, n = 200, from = 0, to = 8) 
```

您会收到以下警告

```
Warning messages:
1: In plot.window(...) : "nrestarts" is not a graphical parameter
2: In plot.xy(xy, type, ...) : "nrestarts" is not a graphical parameter
3: In axis(side = side, at = at, labels = labels, ...) :
  "nrestarts" is not a graphical parameter
4: In axis(side = side, at = at, labels = labels, ...) :
  "nrestarts" is not a graphical parameter
5: In box(...) : "nrestarts" is not a graphical parameter
6: In title(...) : "nrestarts" is not a graphical parameter 
```*

# c - C头文件到delphi

> ID：14334323
> 
> 赞同：2
> 
> 时间：2013-01-15T09:10:45.060
> 
> 标签：c, delphi

我有一段 C 代码。我需要帮助将其翻译为 Delphi 代码。

# 1)

```
/*
 * Color is packed into 16-bit word as follows:
 *
 *  15      8 7      0 
 *   XXggbbbb XXrrrrgg
 *
 * Note that green bits 12 and 13 are the lower bits of green component
 * and bits 0 and 1 are the higher ones.
 * 
 */
#define CLR_RED(spec)      (((spec) >> 2) & 0x0F)
#define CLR_GREEN(spec)    ((((spec) & 0x03) << 2) | ((spec & 0x3000) >> 12))
#define CLR_BLUE(spec)     (((spec) >> 8) & 0x0F) 
```

# 2)

```
#define CDG_GET_SCROLL_COMMAND(scroll)    (((scroll) & 0x30) >> 4)
#define CDG_GET_SCROLL_HOFFSET(scroll)     ((scroll) & 0x07)
#define CDG_GET_SCROLL_VOFFSET(scroll)     ((scroll) & 0x0F) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T09:16:50.667

这些是参数化的宏。由于 Delphi 不支持这些，因此您需要使用函数来代替，这无论如何都更干净。

*   `>>`是右移，`shr`在德尔福
*   `<<`是左移，`shl`在德尔福
*   `&`是“按位与”，`and`在 Delphi 中，
    Delphi 在处理整数时使用位运算符，在处理布尔值时使用逻辑运算符，因此只有一个运算符`and`可以同时替换`&&`and `&`。
*   `|``or`在 Delphi 中是“按位或”
*   `0x`是十六进制文字的前缀，`$`在 Delphi 中

所以`#define CLR_GREEN(spec) ((((spec) & 0x03) << 2) | ((spec & 0x3000) >> 12))`变成这样：

```
function CLR_GREEN(spec: word):byte;
begin
  result := byte(((spec and $03) shl 2) or ((spec and $3000) shr 12));
end; 
```

（我手头没有delphi，所以可能会有小错误）

以类似的方式转换其他宏。

# c# - 主窗口如何在其包含的用户控件中捕获属性的 NotifyPropertyChanged 事件

> ID：14334324
> 
> 赞同：1
> 
> 时间：2013-01-15T09:10:45.693
> 
> 标签：c#, .net, wpf, mvvm

我有一个 UserControl，它包含 bool 属性 A。在包含该 UserControl 的主窗口中，我必须启用/禁用一个按钮取决于 A 的值。我试图将 A 作为公共和绑定按钮，如下所示：

```
<Button IsEnabled="{Binding MyUserControl.A}"/> 
```

在 UserControl 中，我为 Property A 设置了 PropertyChangedEventHandler，如下所示：

```
private bool _a;
public bool A
{
    get
    {
         return _a;
    }
         set
    {
         if (_a == value)
             return
         _a = value;
         OnPropertyChanged("A");
    }
} 
```

看起来不错。但我不知道为什么它不起作用。似乎我缺乏一些实现来在主窗口与其用户控件之间进行通信（因为使用 OnPropertyChanged，用户控件内的所有绑定都可以正常工作）。

我有一些解决方案是 1\. 使用 Messenger 从 Usercontrol 发送消息，内容为 A，主控件将捕获并将值设置为按钮的 IsEnabled。2\. 创建一个事件并在 A 的值发生变化时提出它。

您对这个问题以及如何解决它有任何想法吗？您认为以下 2 种解决方案效果如何，或者您有其他建议吗？

## 谢谢阅读。

<<编辑>>这个问题解决了。在代码隐藏中设置用户控件的数据上下文时是我的错误，并且不承认我已经在数据模板中设置了它们。--> 所以，复制使用户控件的视图模型初始化了 2 次。--> 不知何故，它使 NotifyPropertyChange 工作不正确。

对不起，这个问题的标题不适合这个愚蠢的错误。看来我采取了正确的方法来解决标题问题。感谢您的阅读和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:02:56.057

在 wpf 中显示用户控件的另一种方法。[在此处](https://stackoverflow.com/questions/12054249/alternate-way-to-display-usercontrols-in-wpf)查看此 StackOverflow 讨论

INotifyPropertyChanged 的​​备用：绑定的依赖属性。

//用户控件

```
public partial class UserControl1 : UserControl
{
   public bool A
    {
        get { return (bool)GetValue(AProperty); }
        set { SetValue(AProperty, value); }
    }

    public static readonly DependencyProperty AProperty =
        DependencyProperty.Register("A", typeof(bool), typeof(UserControl1), new UIPropertyMetadata(false));

    public UserControl1()
    {
        InitializeComponent();
        DataContext = this;
    }
} 
```

}

//主窗口.xaml

```
 <Window x:Class="WpfApplication1.MainWindow"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:src="clr-namespace:WpfApplication1"
      Height="300" Width="300">
    <StackPanel>
      <src:UserControl1 x:Name="myControl" />
      <Button IsEnabled="{Binding A, ElementName=myControl}" />
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:22:58.223

绑定表达式始终使用[DataContext](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)作为评估绑定路径的基础。因此，在您的情况下，`DataContext`必须是窗口本身，您可以在代码隐藏文件的窗口的构造函数中设置它：

```
this.DataContext = this; 
```

另请注意，要工作您的窗口需要有一个名为`MyUserControl`.

另一种选择是为您可能在 XAML 中实例化的 MyUserControl 实例提供一个名称，然后`ElementName`在绑定表达式中使用：

```
<Grid>
    <loc:MyUserControl Name="myUserControl" />
    <Button IsEnabled="{Binding A, ElementName=myUserControl}" />
</Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:41:45.077

您需要通过在资源中声明它来创建 UserControl 的实例并将其设置为数据上下文，然后您才能使用它。尝试这个。

```
<Window.Resources>
    <WpfApplication2:UserControl1 x:Key="MyUserControl"/>
</Window.Resources>

<StackPanel DataContext="{StaticResource MyUserControl}">
    <Button IsEnabled="{Binding Path=A}" Content="Test" Height="20" />
</StackPanel> 
```

# android - 无法删除sqlite中的记录

> ID：14334327
> 
> 赞同：0
> 
> 时间：2013-01-15T09:10:52.970
> 
> 标签：android, sqlite

我的应用程序会将数据库中的所有信息显示到列表视图中。当我单击列表视图中的一行时，应用程序会通知您要将其从数据库中删除吗？但是错误是当我单击确定时，应用程序通知错误。我不明白为什么错误无法打开数据库。源代码

```
public class Index extends Activity {

 private ArrayList<String> DateArray = new ArrayList<String>();
    private ArrayList<String> CostArray = new ArrayList<String>();
    private ArrayList<String> SalesArray = new ArrayList<String>();
    private ArrayList<String> ProfitArray = new ArrayList<String>();
    private ArrayList<String> IDArray = new ArrayList<String>();
    private DB_Adapter mDb = new DB_Adapter(this);
    ListView listview;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.index);
    listview = (ListView) ((Activity) this)
            .findViewById(R.id.listView1);
    workoffline();
}

 @Override
protected void onRestart() {
    // TODO Auto-generated method stub
     workoffline();
    super.onRestart();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    workoffline();
    super.onResume();
}

public void clearArray()
    {
        DateArray.clear();
        CostArray.clear();
        SalesArray.clear();
        ProfitArray.clear();
        IDArray.clear();
    }

public void workoffline()
{
    clearArray();
    try {
        // mở kết nối đến databse sqlite
        mDb.openDB();
        // lấy thông tin thông qua IDDelivery
        Cursor mCursor = mDb.getAll();
        // Duyệt record từ đầu
        if (mCursor.moveToFirst()) {
            do {
                IDArray.add(mCursor.getString(0));
                DateArray.add(mCursor.getString(1));
                CostArray.add(mCursor.getString(2));
                SalesArray.add(mCursor.getString(3));
                ProfitArray.add(mCursor.getString(4));

            } while (mCursor.moveToNext());
            listview.setAdapter(new DataAdapter(this, DateArray
                    .toArray(new String[DateArray.size()]), CostArray
                    .toArray(new String[CostArray.size()]), SalesArray
                    .toArray(new String[SalesArray.size()]), ProfitArray
                    .toArray(new String[ProfitArray.size()])));
            listview.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    final int ID = Integer.valueOf(IDArray.get(position));
                        try {

                            Index.this.runOnUiThread(new Runnable() {
                                public void run() {

                                    AlertDialog.Builder builder = new AlertDialog.Builder(
                                            Index.this);
                                    builder.setTitle("Waring!");
                                    builder.setMessage("Are you delete!")
                                            .setCancelable(false)
                                            .setPositiveButton("Ok",
                                                    new DialogInterface.OnClickListener() {
                                                        public void onClick(
                                                                DialogInterface dialog, int id) {
                                                                mDb.delete_byID(ID);
                                                        }
                                                    });
                                    builder.setNegativeButton("Không", new DialogInterface.OnClickListener() {
                                        @Override
                                        public void onClick(DialogInterface dialog, int which) {

                                        }
                                    });
                                    AlertDialog alert = builder.create();
                                    alert.show();
                                }
                            });

                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
            });

        }
        // Đóng database
        mDb.closeDB();
    } catch (Exception e) {
        e.printStackTrace();
    }

}
} 
```

记录猫错误

```
01-15 16:06:50.940: E/AndroidRuntime(17932): FATAL EXCEPTION: main
01-15 16:06:50.940: E/AndroidRuntime(17932): java.lang.IllegalStateException: database not open
01-15 16:06:50.940: E/AndroidRuntime(17932):    at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1619)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at Data.DB_Adapter.delete_byID(DB_Adapter.java:94)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at com.example.xitinshop.Index$1$1$1.onClick(Index.java:102)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at android.os.Looper.loop(Looper.java:130)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at android.app.ActivityThread.main(ActivityThread.java:3683)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at java.lang.reflect.Method.invokeNative(Native Method)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at java.lang.reflect.Method.invoke(Method.java:507)
01-15 16:06:50.940: E/AndroidRuntime(17932):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 -15 16:06:50.940: E/AndroidRuntime(17932):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 01-15 16:06:50.940: E/AndroidRuntime(17932):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:53:49.307

尝试在按钮单击中打开和关闭数据库，如下所示：

```
.setPositiveButton("Ok",
    new DialogInterface.OnClickListener() {
        public void onClick(
                DialogInterface dialog, int id) {
                mDB.openDB();
                mDb.delete_byID(ID);
                myDB.closeDB();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:56:49.773

您打开数据库，查询数据，然后再次关闭数据库。之后会执行 onClick 方法，因此此时 DB 已经关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:05:38.617

在 SQLiteOpenHelper 类中打开和关闭数据库始终是一种更好的做法。

像，

```
public class FriendsDatatbaseHelper extends SQLiteOpenHelper {
public int deleteContact(String contact_id) {
    db = getWritableDatabase();
     int delete = db.delete(FRIENDS_TABLE_NAME, "contact_index=" + contact_id, null);
     db = getWritableDatabase();
     return delete;
}
} 
```

# javascript - Chrome.i18n 是否有标准格式的 message.json

> ID：14334331
> 
> 赞同：2
> 
> 时间：2013-01-15T09:10:59.173
> 
> 标签：javascript, google-chrome-extension

我使用 Chrome.i18n 并编写了几个 message.json 文件。而且我不知道应该为它选择哪种文件格式。ANSI、UTF-8 或其他。而且我发现大多数 chrome 扩展都选择了 ANSI。它是 message.json 文件的标准格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T10:30:45.050

您的文件必须保存为[UTF-8](//en.wikipedia.org/wiki/UTF-8)，非[ASCII](//en.wikipedia.org/wiki/ASCII)字符（重音字母、汉字*等*）才能正常工作。如果任何消息中不存在此类字符，则“ANSI”设置可能会起作用。不要选择[UTF-16](//en.wikipedia.org/wiki/UTF-16)。

文本编辑器经常通过寻找字节值的特征模式来猜测文本文件的字符编码。在没有非 ASCII 字符的情况下，无法将[Windows-1252](//en.wikipedia.org/wiki/Windows-1252)或其他所谓的“ANSI”编码与 UTF-8 区分开来，因为 ASCII 是两者的共同子集。您的文本编辑器显然假定为“ANSI”，仅当您看到的 Chrome 扩展程序中实际使用非 ASCII 字符时才指示 UTF-8。

一些文本编辑器（尤其是 Windows 记事本）将[字节顺序标记](//en.wikipedia.org/wiki/Byte_order_mark)(BOM) 添加到保存为 UTF-8 的任何文件中。尽管该字符允许确定文件的 UTF-8 编码，但 Google Chrome 不希望看到它并且[无法加载 JSON 文件](https://stackoverflow.com/questions/6342089/chrome-extension-internationalization-error)。

如果您使用 Windows 记事本，您应该切换到[Notepad++](http://notepad-plus-plus.org/)或其他可以选择另存为“UTF-8 without BOM”的文本编辑器。您还应该考虑将编辑器设置为默认使用 UTF-8，即使对于现有文件也是如此。

# java - 如何在 Eclipse 中查找方法的接口

> ID：14334334
> 
> 赞同：0
> 
> 时间：2013-01-15T09:11:06.010
> 
> 标签：java, eclipse, interface, overriding

我有一个实现数字接口的类。它的一部分看起来像这样：

```
class Z implements A, B, C, ... {
  @override
  public void foo( Bar b ) {
      ...
  } 
```

有没有办法，最好是快捷方式，询问 Eclipse 该方法`foo`来自哪个接口？

（注：使用 Eclipse 版本 Juno）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:12:50.463

在您的方法覆盖旁边的边距中应该有一个向上的箭头。点击那个。

我不确定是否有关联的键盘快捷键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T09:16:12.077

在课堂上的任意位置按`CTRL`+ `F3`+ `F3`。这`foo1`是来自`Inter1`和`foo2`来自`Inter2`。 ![在此处输入图像描述](../Images/6928814ec7ec4f1336c5c25c5bac30f7.png)

更新：（供参考）

```
public class Impl implements Inter1, Inter2 {

    @Override
    public void foo() {
    // TODO Auto-generated method stub

    }

    @Override
    public void foo1() {
    // TODO Auto-generated method stub

    }

}

public interface Inter1 {
    void foo1();
}

public interface Inter2 {
    void foo2();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:27:44.247

试试这个，真的很有帮助...

按 Ctrl+f3+f3

# java - 在消息侦听器的 onMessage() 方法中接收到的 jsp 上显示和显示消息

> ID：14334338
> 
> 赞同：-2
> 
> 时间：2013-01-15T09:11:09.857
> 
> 标签：java, spring, activemq

我的控制器中有用于接收消息的 onmessage 方法现在我想在 jsp 上显示该消息，它是如何完成的，消息可以很容易地打印在控制台上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:52:04.203

我认为您需要阅读有关如何构建 Web 应用程序的信息。

基本上，JMS/ActiveMQ 为 Web 应用程序提供异步数据。在大多数情况下，您会处理消息并将其放入数据库中。然后您可以使用新填充的数据来构建您的 JSP 网站（当用户重新加载它时）。

JMS -> 你的应用程序 -> 数据库 <-> 控制器/JSP <-> 网站

做你要求的事情，在消息到达的那一刻在用户网站上打印数据是可能的，但超出了这个问题的范围，因为它与[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29) (ajax/push) 和 servlet 端等技术有更多关系事物以及一些路由逻辑。问这个问题，你可能甚至不应该考虑它（还）。

# javascript - 如何用html和js制作无限地图

> ID：14334343
> 
> 赞同：1
> 
> 时间：2013-01-15T09:11:43.277
> 
> 标签：javascript, html, sql

我正在尝试实现一个看似动态的 div 无限映射。我的主要问题是当用户拖动板时如何在任何方向上生成新的瓷砖，然后地图应该如何/如何存储在数据库中。

[这](http://jsbin.com/unanuf/31)是我的快速入门。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:17:02.320

一种方法是将每个单词的坐标存储在 R-Tree 中。然后，您将使用 R-Tree 查找您希望看到的坐标边界内的所有单词。这可以在您的后端完成（许多数据库系统支持索引空间坐标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:37:13.760

我怀疑网格只是大而不是真正的无限。

您只存储放置的瓷砖。

棋盘的“视野”是有限的，即使是小地图版本也只有大约 256x256。

“空”板可以仅绘制，从左上角（或其他单点）以及屏幕的宽度和深度派生。

您还可以使用伪随机数在程序上改变每个空白方块的外观。

# c# - 实体框架 - 删除复杂对象

> ID：14334349
> 
> 赞同：0
> 
> 时间：2013-01-15T09:12:03.780
> 
> 标签：c#, entity-framework

我有以下实体框架对象：
评估、阶段、公寓
评估包含许多阶段，阶段包含许多公寓。

我正在尝试删除某个阶段，如下所示：

```
var deletedStages =
  originalEvaluation.Stages.Where(s => s.State == StateTypes.Deleted);

deletedStages.ToList().ForEach(stage => 
{
  stage.Apartments.ToList().ForEach(
    apartment => stage.Apartments.Remove(apartment)
  );

  originalEvaluation.Stages.Remove(stage);
});

deletedStages.ToList().ForEach(stage =>
{
  stage.Apartments.ToList().ForEach(apartment =>
    shechtmanEntities.Apartments.DeleteObject(apartment)
  );

  shechtmanEntities.Stages.DeleteObject(stage);
});
}
}
try
{
  shechtmanEntities.SaveChanges();
} 
```

但我不断收到异常：**“无法更改关系，因为一个或多个外键属性不可为空”**。

我知道它与空外键有关，但我不明白哪个？为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:14:02.870

尝试仅删除评估或阶段并依靠级联删除来删除它的子实体（在您的情况下为公寓），而不是单独删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:23:48.463

如果您不能级联删除（SQL 服务器可能对此很有趣：[https](https://stackoverflow.com/a/6065583/613004) : //stackoverflow.com/a/6065583/613004）asdutzu 建议，那么：

如果它是一对多关系（听起来像是），那么您需要在删除父对象*之前手动删除每个子对象并保存更改。*IE 删除该公寓（或将其重新分配给另一个舞台），然后删除该舞台，依此类推。

否则，如果是多对多，并且连接表是通过实体模型暴露出来的，那么先删除stages和apartments之间的join，然后再删除stage。如果没有，`detach`则从舞台上的公寓并保存更改，然后再删除舞台。

# actionscript-3 - 如何使用 Flash 库项目中的嵌入标签获取类？

> ID：14334350
> 
> 赞同：0
> 
> 时间：2013-01-15T09:12:07.883
> 
> 标签：actionscript-3, flash

我创建了一个库项目，其中包含一个嵌入图像，如下所示`AssetLib`。

```
 [Embed(source="Frame_Title_BG.png")]
   private var Frame_Title_BG:Class; 
```

然后我将 swc 导出到我现有的 actionscript 项目中。所以我假设 img `Frame_Title_BG`应该在内存中，但是当我尝试创建类时

```
var assetCLs:Class = getClassByAlias('Frame_Title_BG');
var asset = new  assetCLs(); 
```

我无法得到`assetCLs`;

在我看来，所有的类都应该在 applicationDomain 中。

那么如何在我当前的项目中使用该类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T05:07:26.250

作为替代方案，您可以将资产定义为公共静态变量，然后您应该能够执行以下操作：

```
public class AssetLib
{
    [Embed(source="Frame_Title_BG.png")]
    public static var Frame_Title_BG:Class;
} 
```

然后在另一个班级：

```
var frameBG:Bitmap = new AssetLib.Frame_Title_BG() as Bitmap;
addChild( frameBG ); 
```

甚至

```
var frameBG:Bitmap = new AssetLib['Frame_Title_BG']() as Bitmap;
addChild( frameBG ); 
```

只是另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:23:36.483

在嵌入类名之前添加“ClassHolder_”：

```
 var imageClass:Class= ApplicationDomain.currentDomain.getDefinition('AssetLib_Frame_Title_BG') as Class;
    var bitmap:DisplayObject = new imageClass();
    addChild(bitmap); 
```

# kendo-ui - 将 Javascript 事件绑定到 KendoUI 移动 ListView

> ID：14334352
> 
> 赞同：1
> 
> 时间：2013-01-15T09:12:12.503
> 
> 标签：kendo-ui

我正在使用 KendoUI，`fire`当用户触摸每个特定的 LI 项目时，我需要一些 javascript 事件。这可能吗？这是我映射它们的方式..帮助！

在此先感谢:) 新的。

```
<ul data-role="listview" data-style="inset" data-type="group">
    <li><a data-role="button" data-click="runFunctionOne">Function One</a></li>
    <li><a data-role="button" data-click="runFunctionTwo">Function Two</a></li>
</ul> 
```

JS::

```
functionOne() {
    alert("Function one pressed");
};

functionTwo() {
    alert("Function two pressed");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:37:25.277

请记住，您还可以使用[Kendo 列表视图单击事件。](http://docs.kendoui.com/api/mobile/listview#click)单击链接以查看文档。参数“e”使您可以访问列表视图的 dataItem，它是控件数据源的子集。

像这样

```
 $("#customerList").kendoMobileListView({
                                            dataSource: customerDataSource,
                                            template: '<a>${Company}<span class="k-status-text"> <br />${CustNo}</span></a>',
                                            dataType:"json",
                                            style: "inset",
                                            click: function(e){
                                                var index = $(e.item).index();
                                                var text= $(e.item).index();
                                                alert(e.dataItem.CustNo);
                                                // redirect to
                                                app.navigate("#overview-customer");

                                            },
                                            dataBound: function(e){
                                                alert("Ive been bound");
                                            }
                                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:19:57.157

对的，这是可能的！

这是 JavaScript：

```
function runFunctionOne() {
    alert("Function one pressed");
};

function runFunctionTwo() {
    alert("Function two pressed");
}; 
```

您忘记了`function`函数名称之前的关键字以及 HTML 中的函数名称 was`runFunctionOne`和 not `functionOne`。

# python - 如何读取 Jinja2 模板并获取需要的变量列表来呈现它？

> ID：14334353
> 
> 赞同：1
> 
> 时间：2013-01-15T09:12:24.953
> 
> 标签：python, jinja2

我需要获取模板上下文中所需的变量列表，以便能够向将使用[我的服务](http://github.com/novagile/diecutter)的程序员提供一些反馈。

我怎样才能做到这一点 ？

我正在考虑提供一个上下文对象，该对象将在模板尝试访问它时创建变量，然后在渲染后给我上下文对象中的变量列表。

那可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T16:26:27.527

解析模板，您可以找到所有变量：http: [//jinja.pocoo.org/docs/api/#the-meta-api](http://jinja.pocoo.org/docs/api/#the-meta-api) 包括示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-01T09:05:48.960

使用 jinja2[元 API](http://jinja.pocoo.org/docs/dev/api/#the-meta-api)

```
from jinja2 import Environment, FileSystemLoader,meta

PATH = os.path.dirname(os.path.abspath(__file__)) #get the path of current file
TEMPLATE_ENVIRONMENT = Environment(
                autoescape=False,
                loader=FileSystemLoader(os.path.join(PATH)),
                trim_blocks=False)
template_source =TEMPLATE_ENVIRONMENT.loader.get_source(TEMPLATE_ENVIRONMENT,   template_filename)[0] #replace template_filename with your template file relative to current file
parsed_content = TEMPLATE_ENVIRONMENT.parse(template_source)
variables= meta.find_undeclared_variables(parsed_content)
print variables 
```

输出：使用的变量集

```
set(['CONFIG_PARAM_HTTPS_PROXY_PORT', 'CONFIG_PARAM_HTTP_PROXY_PORT']) 
```

# c++ - Do/while 循环无法正常运行

> ID：14334355
> 
> 赞同：0
> 
> 时间：2013-01-15T09:12:25.503
> 
> 标签：c++

我在让我的 do/while 循环正常运行时遇到问题。该程序在第一次复飞时运行良好，但是当我输入“y”时，当它询问我是否想“告诉更多”时，程序只是询问用户问题（不允许我输入字符串）然后 couts陈述。我究竟做错了什么？以及如何让它正常运行？

```
using namespace std;

int main()
{
    int i, numspaces = 0;
    char nextChar;
    string trimstring;
    string uc, rev;
    string answer;
    char temp;
    cout << "\n\n John Acosta"
    <<" Exercise 1\n"
    << "\n\n This program will take your string, count the number\n"
    << " of chars and words, UPPERCASE your string, and reverse your string.";

    string astring;
    do {
        cout << "\n\nTell me something about yourself: ";
        getline (cin, astring);

        trimstring = astring;
        uc = astring;
        rev = astring;

        for (i=0; i<int(astring.length()); i++)
        {
            nextChar = astring.at(i); // gets a character
            if (isspace(astring[i]))
                numspaces++;
        }

        trimstring.erase(remove(trimstring.begin(),trimstring.end(),' '),trimstring.end());
        transform(uc.begin(), uc.end(),uc.begin(), ::toupper);

        for (i=0; i<rev.length()/2; i++)
        {
            temp = rev[i];
            rev[i] = rev[rev.length()-i-1];
            rev[rev.length()-i-1] = temp;
        }

        cout << "\n\tYou Entered: " << astring
        << "\n\tIt has "<<trimstring.length()
        << " chars and "<<numspaces+1
        << " words."
        << "\n\tUPPERCASE: "<<uc
        << "\n\tReversed: "<<rev
        << "\n\n";

        cout<<"\n\nwant to tell me more? Enter \"y\" for YES and \"n\" for NO\n\n";
        cin>>answer;
        cout<<"\n";

    } while(answer == "y");                 //contiue loop while answer is 'y'; stop when 'n'

    {
        cout <<"\n Thanks. Goodbye!\n";     //when loop is done
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:16:26.563

输入运算符的`>>`工作方式如下：首先它跳过空格，如果有的话；然后它读取字符串直到它到达下一个空格，在你的情况下是`'y'`. 这个换行符然后留在流中，所以当你在循环开始时，`getline`你会在`"y"`.

您可以使用以下[`ignore`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)功能删除它：

```
cout<<"\n\nwant to tell me more? Enter \"y\" for YES and \"n\" for NO\n\n";
cin>>answer;
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
cout<<"\n"; 
```

# javascript - 为什么“大小”属性不会像移动设备上的列表框那样显示多个选项？

> ID：14334357
> 
> 赞同：0
> 
> 时间：2013-01-15T09:12:35.253
> 
> 标签：javascript, html, cordova, select, listbox

我正在使用 Phone-gap 构建一个移动应用程序。我被困在一个地方。

如果我设置 size="5" 它会在 safari 和 Firefox 浏览器中显示包含 5 个元素的列表框（我在这两个浏览器上进行了测试），但它仅在设备（iPhone 和 Android）上测试时才显示为下拉列表。

知道如何解决这个问题吗？

```
<div>

<select name="mySelect" id="mySelect" size="5">

<option value="1">1</option>

<option value="2">2</option>

<option value="3">3</option>

<option value="4">4</option>

<option value="5">5</option>

</select>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:27:28.487

您对选择几乎无能为力，而且可用的选项也不多。我通常会遇到死胡同。

你可以试试无序列表。

```
<ul>
    <li></li>
    <li></li>
</ul> 
```

# c# - 在多播上接收所有 udp 数据包

> ID：14334372
> 
> 赞同：0
> 
> 时间：2013-01-15T09:13:30.560
> 
> 标签：c#, sockets, udp, multicast, udpclient

我正在使用 c# UdpClient（代码中的客户端）来接收多播组上的数据。在 while 循环中会发生以下情况：

```
while(receiving)
    //First i check if data is available, polltime = 100ms
    if(client.Client.Poll(polltime, SelectMode.SelectRead))
    {
        //if data is present 
        data = client.Receive(ref remoteEp);
        ...
    }
    else
    {
        //100ms
        Thread.sleep(sleeptime);
    } 
```

不知何故，我经常错过应该在多播上的数据包（如果有多个），我猜 udp 数据包丢失不会那么多。接收可以做得更好还是有人知道问题）

Edit1：发送的数据也是由 c# UdpClient 发送的，是大小为 1024 的字节数组

Edit2：在 Wireshark 中我可以看到丢失的数据包没有到达，所以问题可能真的是 udp 数据包丢失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:05:03.607

我建议接收循环的以下实现：

```
while (receiving)
{
    try
    {
        // block until data is present
        data = client.Receive(ref remoteEp);
        ...
    }
    catch (SocketException ex)
    {
        receiving = false;
    }
} 
```

# graphics - SSRS 图表 - 删除箭头

> ID：14334374
> 
> 赞同：6
> 
> 时间：2013-01-15T09:13:33.683
> 
> 标签：graphics, reporting-services

我们正在尝试做这样的图表： ![在此处输入图像描述](../Images/30af66e5e85cfdd406290be278134f95.png)

问题在红色圆圈中。我们不希望箭头在那里。但是当我们关闭它们时，数字将重叠。如何解决？（比如让箭头不可见等）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-10T11:24:38.357

您必须将焦点放在图表系列上并按 F4 以获取其属性。按照 SmartLabels 区域并更改 CalloutLineAnchor 属性以更改箭头并放置另一个符号或全部删除。您也可以选择禁用属性来删除所有符号。

# html - 使用具有当前状态的图像和 CSS 的导航栏

> ID：14334383
> 
> 赞同：3
> 
> 时间：2013-01-15T09:14:07.797
> 
> 标签：html, css, navigation

我试图让我的导航栏有一个当前页面指示器，并且我已经研究了所有可能的文章，并遵循了确切的示例，但它仍然无法正常工作。

我正在使用只有两个图像的精灵图像。该图像的宽度为 480，高度为 40，每个图像的宽度为 240，高度为 40。一侧是蓝色，另一侧是黄色。

我想让关闭状态成为蓝色方，然后将悬停、活动和当前状态设为黄色方。但是，我现在不在乎处于活动状态。

**所以，我的问题是：我的关闭状态（蓝色侧），悬停状态（黄色侧）工作完美。我只需要我当前的状态（黄色侧）即可工作。因此，当您单击菜单项时，图像会保持黄色。**

*我为任何可怕的编码道歉，因为这是我的第一次尝试*

这是我的 html 的一部分：（我将只使用三个菜单项之一，配置文件。）

```
<body bgcolor="CEB86C"; class="profile">

    <div id="navigation">
        <ul>
            <li><a class= "news" href="news.html" title"news"></a></li> 
            <li><a class="profile " href="index.html" title"profile"></a><li>
            <li><a class= "about" href="about.html" title"about"></a><li>
        </ul>
    </div> 
```

这是CSS：

```
#navigation ul {
    list-style: none;
    text-align: center;
}
#navigation li {
    display: inline;
}
#navigation li a {
    text-indent: -5000px;
    display: inline-block;
    height: 40px;
}
#navigation li a.profile {
    width: 240px;
    background: url(images/profile.jpg);
    text-decoration: none;
}
#navigation li a.profile:hover {
    background: url(images/profile.jpg);
    background-position: -240px;
    text-decoration: none;
}
#navigation li a.profile:current {
    background: url(images/profile.jpg);
    background-position: -240px;
    background-repeat: no-repeat;
    text-decoration: none;
} 
```

感谢您的任何意见，并在此先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:20:33.620

假设您`body`根据您所在的页面更改类，那么您只需修改最后一个 css 声明即可：

```
.news #navigation li a.news,
.profile #navigation li a.profile,
.about #navigation li a.about {
    background:url(images/profile.jpg);
    background-position: -240px; 
    background-repeat: no-repeat;
    text-decoration:none;
} 
```

编辑 - 如果您有 3 个单独的图像，那么您可以执行以下操作：

```
.news #navigation li a.news {
    background:url(images/news.jpg);
    background-position: -240px; 
    background-repeat: no-repeat;
    text-decoration:none;
}

.profile #navigation li a.profile {
    background:url(images/profile.jpg);
    background-position: -240px; 
    background-repeat: no-repeat;
    text-decoration:none;
}

.about #navigation li a.about {
    background:url(images/about.jpg);
    background-position: -240px; 
    background-repeat: no-repeat;
    text-decoration:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:21:20.483

尝试`#navigation li a.accountbutton:active`代替`:current`

# c# - 绑定html属性不起作用

> ID：14334386
> 
> 赞同：1
> 
> 时间：2013-01-15T09:14:12.950
> 
> 标签：c#, asp.net

第一个例子有效。第二次失败了为什么？

```
(I except ErrorMessage="<%# Model.StringProvider.GetString("Login.UserNameRequired.ErrorMessage")%>") 
```

将调用的字符串放入 ErrorMessage 不会发生。

```
<asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName"><%= Model.StringProvider.GetString("Login.UserNameLabel")%></asp:Label>

<asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                        ControlToValidate="UserName" ErrorMessage="<%# Model.StringProvider.GetString("Login.UserNameRequired.ErrorMessage")%>"
                                        ToolTip='<%= Model.StringProvider.GetString("Login.UserNameRequired.ToolTip")%>.' ValidationGroup="Login1">

                                        </asp:RequiredFieldValidator> 
```

'' 和 "" 都不起作用

# gcc - 如何链接两个冲突的共享库？

> ID：14334388
> 
> 赞同：1
> 
> 时间：2013-01-15T09:14:26.163
> 
> 标签：gcc, linker, solaris

我的项目正在使用 ACE 库，需要链接另一个库 libsdk.so，它使用的是另一个版本的 ACE 库。

链接顺序如下： ...-lMyAce -lsdk -lAnotherAce

应用程序运行时，MyAce 中的 libsdk.so 调用方法（我检查了核心转储），应用程序崩溃。

如果我将链接顺序更改为： ...-lsdk -lAnotherAce -lMyAce

我的代码在 AnotherAce 中调用了方法，它也崩溃了。

如果我只链接我的 ACE，那就崩溃了。如果只链接AnotherAce，会有一些链接错误。

让 libsdk.so 调用它的 ACE 库，我的代码调用我的 ACE 库。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:55:32.973

Solaris 链接器有一个可能会有所帮助的选项，尽管真正重新设计您的应用程序以在同一程序中不需要两组具有相同名称的库将是最佳解决方案。

[Direct Bindings](http://docs.oracle.com/cd/E26502_01/html/E26507/aehzq.html#scrolltoc)在每个库或程序中记录它在哪个库中找到了符号，因此如果 libsdk.so 是使用 -B direct -lAnotherAce 构建的，它将记录它的每个引用转到 AnotherAce，而不是 MyAce。然后，您将您的代码与 -B direct -lsdk -lMyAce 链接（不包括 -lAnotherAce，因为 libsdk 依赖项会处理此问题），并且您的代码将记录它对 MyAce 的调用。

# android - 在“google maps android api v2”中更改道路颜色

> ID：14334389
> 
> 赞同：0
> 
> 时间：2013-01-15T09:14:32.727
> 
> 标签：android, google-maps, google-maps-api-3, android-mapview, google-maps-android-api-2

我想知道是否有等效于 javascript api v3: [Styled Maps](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html) 因为我需要更改道路颜色，并且想掩盖道路标签。

是否可以直接来自android v2 api？

我尝试使用 javascript v3 api 来解决先例问题，但我的应用程序也需要像[这样](http://gmaps-samples-flash.googlecode.com/svn/trunk/examples/Map3DSimple.html)倾斜，而且 javascript v3 api 看起来没有倾斜 :( 。

最后，有人有解决方案：为 ROADMAP 添加倾斜到 javascript v3 api 或/和更改 android v2 api 中的道路颜色

谢谢 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:16:22.910

不幸的是，此时您无法执行其中任何一项。JavaScript Maps API 不支持倾斜，Android v2 API 不支持样式地图。

# android - Android 谷歌地图 APIv2 信息窗口和标记

> ID：14334390
> 
> 赞同：2
> 
> 时间：2013-01-15T09:14:34.130
> 
> 标签：android, progress-bar, android-imageview, google-maps-android-api-2

我正在使用适用于 Android 的 Google 地图 APIv2。我已经实现了 MapFragment，将标记放在我需要的地方，为标记添加了自定义 InfoWindow。

问题是 - 我的 InfoWindow 中有AsyncImages**并****在**那里有**ProgressBar**。问题是 - **ProgressBar**没有旋转，并且在我从缓存中获取图像后没有设置它。AsyncImages 运行良好。我已经将它测试到另一个类。 我已经用单个**ProgressBar替换了我的****AsyncImages**视图- 相同。它不旋转。 有什么建议么？

 ******## UPD。

微调器不旋转的原因

> 注意：绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用 View.draw(Canvas)）。这意味着对视图的任何后续更改都不会反映在地图上的信息窗口中。要稍后更新信息窗口（例如，加载图像后），请调用 showInfoWindow()。此外，信息窗口不会尊重任何普通视图的典型交互性，例如触摸或手势事件。但是，您可以在整个信息窗口上收听通用单击事件，如下节所述。

所以问题是 - 如何以最佳方式从地图上的网络/缓存中实现 AsyncImages？ ***在getContentInfo()***
方法 之外的某个地方创建 Views 数组，并创建像*OnImageDownloaded*这样的监听器？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:25:52.123

如[Google Maps Android API v2 文档](https://developers.google.com/maps/documentation/android/marker#info_windows)所述：

> 注意：绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用`View.draw(Canvas)`）。这意味着对视图的任何后续更改都不会反映在地图上的信息窗口中。要稍后更新信息窗口（例如，加载图像后），请调用`showInfoWindow()`. 此外，信息窗口不会尊重任何普通视图的典型交互性，例如触摸或手势事件。但是，您可以在整个信息窗口上收听通用单击事件，如下节所述。

也许您应该尝试`showInfoWindow()`在代码中再次调用某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T08:51:25.917

我在这里遇到了同样的问题。

我认为为旋转（不确定）进度条调用 showInfoWindows() 对我来说没有意义，我也不确定它是否有效。（当然 showinfoWindows 可能对水平进度条有意义）所以我选择了以下三种解决方案之一，

1）在“正在加载...”文本旁边留下没有动画的进度条，它至少给用户一个想法。2) 将加载旋转轮放在 UI 中的其他位置。3）使用对话框片段来显示加载过程，但这实际上取决于您希望通过应用程序实现的感觉。

我个人选择了第一个。

我真的希望谷歌将来会解决这个问题。********

# android - 如何获取 TextView 的“layout_weight”？

> ID：14334391
> 
> 赞同：0
> 
> 时间：2013-01-15T09:14:39.863
> 
> 标签：android, textview, layoutparams

我有一`TableLayout`对夫妇`TextViews`。我想找到的`layout_weight`，`TextView`但我不知道如何。我尝试了以下方法：

```
TableRow.LayoutParams lp = tv1.getLayoutParams(); 
```

和：

```
ViewGroup.LayoutParams lp = tv1.getLayoutParams(); 
```

在第一种情况下，我得到类型不匹配：“无法从 ViewGroup.LayoutParams 转换为 TableRow.LayoutParams”，第二种情况工作正常，但`ViewGroup.LayoutParams`没有`weight`字段。

所有不同类型的`LayoutParams`都令人困惑，我永远不确定在哪里使用哪个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T01:19:21.663

你第一次尝试就几乎成功了。您只需要转换为正确的类型：

```
TableRow.LayoutParams lp = (TableRow.LayoutParams) tv1.getLayoutParams(); 
```

`LinearLayout.LayoutParams`（包括）的任何子类都`TableRow.LayoutParams`将有一个`weight`字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:34:53.277

尝试这个

```
TextView text = new TextView(v.getContext());
text.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f)); 
```

试试[这个](http://developer.android.com/reference/android/widget/TableRow.LayoutParams.html)链接

# wordpress - Disqus 评论表单未显示在自托管的 Wordpress 网站上

> ID：14334393
> 
> 赞同：4
> 
> 时间：2013-01-15T09:15:02.643
> 
> 标签：wordpress, disqus

我已按照在我的网站上安装 Disqus 评论系统的所有说明进行操作，但旧的评论表单仍然可见。

我的问题是：是`<?php comment_form(); ?>`足以显示评论或者需要在 single.php 页面上添加其他内容。

我还应该注意什么？

我没有安装任何其他评论引擎。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:23:25.967

好的，我找到了。而不是使用`<?php comment_form(); ?>`我不得不使用`<?php comments_template(); ?>`. 那成功了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-30T10:31:08.013

在您的网站上安装 woody 片段插入一个新的 php 片段：

```
comments_template(); ?> 
```

进入小部件选择自定义html并放置代码：

```
<div id="disqus_thread">
[wbcr_php_snippet id="THE ID WHAT WOODY GAVE YOU"]
</div> 
```

并将小部件放置在您想要的位置

显然不要忘记在站点范围内启用评论

# c# - 具有并发用户的 C# Web 服务的最佳方法

> ID：14334396
> 
> 赞同：1
> 
> 时间：2013-01-15T09:15:13.397
> 
> 标签：c#

我对 C# 相当陌生，但对 C++ 有经验。

我正在寻找一个网络服务，我可以从一个网站上调用它来拉取类似于价格比较网站的酒店价格。我的问题是；什么是能够处理并发负载并允许数据请求在后台运行同时更新用户界面的最佳方法。

基本上，我已经准备好所有代码，并且可以从 Booking.com 之类的网站中提取 XML 数据，以每个用户为基础。

但是想改变这种工作方式，让我一次向 10 个供应商发送请求，然后在后台 Web 服务工作以获取费率。

前端，然后将刷新以获取最新数据。

任何帮助或建议将不胜感激。

# java - 小程序优化 JVM

> ID：14334397
> 
> 赞同：0
> 
> 时间：2013-01-15T09:15:19.757
> 
> 标签：java, struts2, applet, jvm, aspose

我在 Struts 2 Web 项目中使用 Aspose Slide 生成 PPT (2003)，因为它在 RAM 中很贪婪，所以我们使用线程以异步模式执行它，使用 FIFO 堆栈，一个接一个地运行线程，它工作正常，但是关于用户数量，生成 PPT 可能会花费很长时间，所以我正在考虑一个问题，但我不确定，问题是：

我可以使用 Applet 在客户端运行 PPT 生成吗？这是一个好习惯吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:38:10.030

您当然可以在客户端生成演示文稿，并且出于您提到的原因，如果可能的话，应该始终在客户端上完成耗时的过程。

您可能需要考虑在客户端上使用 javascript 来生成文件而不是 applet，因为 applet 将要求用户在其系统上安装 java 插件，并且您需要安全证书来签署 applet。

*另一方面，*Javascript不需要任何特殊插件，也不需要安全证书，因为您可以生成文件数据并使用数据 URI 动态创建链接，以便用户下载/启动演示文稿**

# jquery - jquery是/否对话框问题

> ID：14334400
> 
> 赞同：2
> 
> 时间：2013-01-15T09:15:26.540
> 
> 标签：jquery, jquery-ui, jquery-dialog, confirm

我正在开发网络应用程序，当我尝试验证并提交这样的表单时，它工作正常。

```
 var res = confirm ("Are u want to continue?")
                if (res)
                {
                    var stra_validator = $("#form").validate(form_rule);
                    stra_validator.reset();
                    return stra_validator.form();

                }else{
                    $('#someID').focus();
                    return false;
                } 
```

但是当我尝试使用 jQuery 对话框时，我是这样使用的

```
 var btns = {};
                      btns['Yes'] = function(){ 
                          $(this).dialog("close");

                          var stra_validator = $("#form").validate(form_rule);
                    stra_validator.reset();
                    return stra_validator.form();// continue the process 
                      };
                      btns['No'] = function(){ 
                          $(this).dialog("close");
                                     $('#someID').focus();
                    return false;
                      };
                      $("<div></div>").dialog({
                        autoOpen: true,
                        title: 'Condition',
                        modal:true,
                        buttons:btns
                      }); 
```

它没有继续下一步我的意思是不提交。但是，如果我单击“否”，则它正在聚焦。我在这里做错了什么？请帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:25:04.217

我认为 $(this).dialog() 在按钮上下文中是错误的。

尝试这个：

```
var btns = {};
btns['Yes'] = function() {

  // Here you have to reference the real dialog
  $('#dialog').dialog("close");
  alert('come here');
  var stra_validator = $("#form").validate(form_rule);
  stra_validator.reset();

  return stra_validator.form();
  // continue the process
};
btns['No'] = function() {
  $('#dialog').dialog("close");
  $('#someID').focus();

  return false;
};

// Never created a div on the fly but it's working well and I just added an ID
$('<div id="dialog"></div>').dialog({
autoOpen : true,
title : 'Condition',
modal : true,
buttons : btns
}); 
```

# internet-explorer - IE9-z-index/溢出问题？

> ID：14334401
> 
> 赞同：0
> 
> 时间：2013-01-15T09:15:40.657
> 
> 标签：internet-explorer, z-index, css

我目前正在这个网站上工作：http: [//goo.gl/uRGsh](http://goo.gl/uRGsh)

我遇到的问题是在 IE9 中 - 菜单中的徽标似乎被切断了。或者这就是我认为至少会发生的事情。在 IE10 开发工具（在 ie9 模式下）中进行测试时，将鼠标悬停在不同的菜单项上时会出现很多闪烁，并且子菜单覆盖了标识的下部。在运行虚拟机或其他东西的browserlab上进行测试时，徽标被简单地切断（仅菜单内的部分可见）。

IE8截图：

![IE8截图](../Images/41c8b61fcab168bfdccded56a8c82bde.png)

我花了几个小时试图解决这个问题。标志周围的包装纸有`overflow: visible;`，所以这不*应该*是原因。顶部菜单栏的 z-index 也高于子菜单，因此子菜单不应与徽标重叠。徽标位于顶部菜单栏中。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:52:18.160

IE9 和 Chrome 在我的机器上看起来是一样的。

您是否尝试过删除历史记录和缓存以及所有这些东西？

使用 z-index 时，还必须说明位置。似乎不是徽标上的位置。

编辑

我只是无法复制您在快照中显示的此错误。在两台不同的机器上尝试了 XP 上的 IE8 和 Chrome，以及 W7 上的 IE9。

也许你的虚拟机有问题，但你确实说过你刚刚在另一台电脑上检查过。？

我现在确实看到了.logotype 上的位置。它的 z-index: 7 列出时：

```
.header-section .full-menu .logotype 
```

并且菜单容器是 z-index:6 列出时

```
.header-section .menu-container 
```

我不认为这是 z-index 的事情。我注意到上面是溢出的：可见的。也许它应该被隐藏起来。

如果不是这样，我会尝试将 z-index:6 或更少（也使用 position:relative）应用于各种

```
.header-section .menu-container ul 
```

和

```
.header-section .menu-container li 
```

和

```
.header-section .menu-container li a 
```

也许带有 .logo-placeholder 的东西。上面没有位置或z-index。我无法确定它的用途。

这里有点猜测。很难看到我何时无法复制该问题。

# android - 我可以在不使用 Google 地图的情况下使用 Android Google Map API

> ID：14334402
> 
> 赞同：0
> 
> 时间：2013-01-15T09:15:42.923
> 
> 标签：android, google-maps

我想使用自己的 WMS/WFS 服务，例如 Orthophotos。是否可以使用 Google Android Map API 来加载此地图？

因为在使用 Google Maps 商业时，我必须购买 Google Premier 许可证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:22:27.413

> 是否可以使用 Google Android Map API 来加载此地图？

不，您不能将自己的地图传递给 Android 上的 Google 地图框架。

您可以为此目的使用特殊工具。阅读[这个答案](https://stackoverflow.com/a/14283055/782599)。

> 因为在使用 Google Maps 商业时，我必须购买 Google Premier 许可证吗？

不可以。对于 Android，即使您的应用已付费，您也可以使用 Google Maps API。[在这里](https://groups.google.com/d/msg/google-maps-api/dm4K72FMKME/IjW6OEnWXUsJ)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:21:40.673

我认为这是不可能的；我认为 Google API 只能用于 Google 服务。为什么当 Google 提供最简单的地图服务并且 Google API 是免费的且无需付费时，您必须寻找其他服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:30:17.767

我认为你不能。如果你想避免谷歌，试试这个：

1.  [OSMdroid](http://code.google.com/p/osmdroid/)
2.  [地图锻造](http://code.google.com/p/mapsforge/)
3.  [地图任务](http://devblog.mapquest.com/2011/11/17/no-preset-limit-on-free-map-api-transactions/)

免费

# winforms - 从 c# 中的 vbscript 函数返回一个值

> ID：14334403
> 
> 赞同：0
> 
> 时间：2013-01-15T09:15:44.957
> 
> 标签：winforms, c#-4.0, vbscript

我正在 c# 中从我的代码中执行一个 .vbs 文件，以检查用户的真实性。我正在传递用户名和密码值，登录时单击 .vbs 将运行并对用户进行身份验证。如果用户不真实，则 vbs 中的函数返回一个值，我如何在 c# 的代码中获取该值并使用它在应用程序的 UI 中显示正确的错误消息。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:52:32.333

不是展示生产代码，而是展示

1.  那/它“原则上如何工作”
2.  您必须在文档中查找哪些关键字/组件

演示.cs：

```
using System;
using System.Diagnostics;

namespace Demo
{
    public class Demo
    {
        public static void Main(string [] args) {
            string user  = "nix";
            if (1 <= args.Length) {user = args[0];};
            string passw = "nix";
            if (2 <= args.Length) {passw = args[1];};
            string cscript = "cscript";
            string cmd = string.Format("\"..\\vbs\\auth.vbs\" {0} {1}", user, passw);
            System.Console.WriteLine("{0} {1}", cscript, cmd);

            Process process = new Process();
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.CreateNoWindow = true;
            process.StartInfo.FileName = "cscript.exe";
            process.StartInfo.Arguments = cmd;
            try {
              process.Start();
              System.Console.WriteLine(process.StandardOutput.ReadToEnd());
              System.Console.WriteLine(process.ExitCode);
            } catch (Exception ex) {
              System.Console.WriteLine(ex.ToString());
            }
        }
    }
} 
```

auth.vbs：

```
Option Explicit

Dim nRet : nRet = 2
If WScript.Arguments.Count = 2 Then
   If "user" = WScript.Arguments(0) And "passw" = WScript.Arguments(1) Then
      WScript.Echo "ok"
      nRet = 0
   Else
      WScript.Echo "fail"
      nRet = 1
   End If
Else
   WScript.Echo "bad"
End If
WScript.Quit nRet 
```

输出：

```
demo.exe
cscript "..\vbs\auth.vbs" nix nix
fail

1

demo.exe user passw
cscript "..\vbs\auth.vbs" user passw
ok

0 
```

也许您可以通过忘记返回文本并仅使用 .Exitcode 来简化事情。

# android - 静态菜单栏的活动与片段

> ID：14334405
> 
> 赞同：0
> 
> 时间：2013-01-15T09:15:50.520
> 
> 标签：android, android-activity, menu, android-fragments, android-4.0-ice-cream-sandwich

我已经开发了 5 个仅使用活动的 Android 应用程序（例如，不时使用 ViewPagers 的片段）。

我必须为平板电脑和手机开发一个针对 Android ICS 的新应用程序，顶部有一个非常简单和静态的菜单栏（比如单行上的 4 个按钮）。我不需要任何单窗格/多窗格布局，具体取决于用户是否拥有手机或平板电脑。

菜单栏的每个按钮都会打开一个不同的屏幕，始终将菜单栏保持在应用程序的顶部。我的问题是，是否为每个屏幕使用片段而不是活动是实现此目的的正确方法。

除了避免一些代码重复（基本上是菜单栏的行为）之外，我看不到使用 Fragments 的任何优势。

**编辑**

首先非常感谢您如此准确和如此快速地回答我的问题。

您的回答对我很有帮助：例如，我害怕只有一个 Activity 一个我的应用程序，但我现在明白这是一件好事。

你想知道我的应用程序实际上会做什么，所以...会有 4 个不同的屏幕：一个新闻屏幕、一个视频屏幕（带有实时流媒体视频播放器）、一个搜索过去的视频屏幕和一个基本的联系人屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:37:38.637

> 我的问题是，是否为每个屏幕使用片段而不是活动是实现此目的的正确方法。

你的场景很简单，你可以去任何一种方式。我会选择片段而不是活动，主要是因为：

1.  *始终将菜单栏保持在应用程序的顶部。*- 使用基于片段的应用程序，您可以在各个屏幕之间进行更平滑的过渡（它还可以让您将按钮栏保持在原位）。

2.  应用程序的各个屏幕之间的通信更容易，因为您将所有片段都放在一个父级中`Activity`（但由于我不知道您的应用程序做了什么，所以我不确定这是否相关）。

3.  Your app may be small now but you may get new ideas/requests to improve it in the future and this may be an easier task to do when your app is composed from fragments(which should be designed as loosely coupled components). Again, not knowing what your app does, this may or not may be relevant. An example scenario would be the need(in the future) to insert a `ViewPager` for the content of the app(so you allow the user to also swipe to a page not only click a `Button`). Using fragments this would be very simple as you need to setup the `ViewPager` and insert the content fragments, using `Activities` would mean a lot more refactoring.

# css - 如何共享常用的 CSS 样式

> ID：14334414
> 
> 赞同：4
> 
> 时间：2013-01-15T09:16:59.940
> 
> 标签：css

在我的页面上，我有几个块（`div`）具有相同的样式（菜单面板、信息面板`background`、`border`页脚面板，...）。

现在我想只写一次这种风格，而不是为每个面板重复它。然而，我没有看到任何舒适的方式来做到这一点。

* * *

我研究的一种方法是引入一个专门的类（例如`panelClass`）来捕获常见的面板样式。然后在 (X)HTML 中，我只需将该类添加到每个应该是面板的元素中。

但这感觉不对。毕竟我将在 (X)HTML 中“揭示实现”。我不再能够轻松透明地更改内容，因为这需要修改 (X)HTML。

更不用说它引入了类的顺序问题（因此如果需要，CSS属性将被覆盖的顺序）。

**编辑：（**对科林答案的扩展解释）

*通过“揭示实现”，我的意思是（X）HTML（“内容”）与 CSS（“表示”）的联系比我希望的要强得多。也许我正在追求一个遥不可及的理想（甚至可能是一个虚幻或虚幻的理想！）但我试图将“内容”与“演示”分开。*

*因此，拥有一个类`menu`并不坏，因为它描述的是“内容”而不是“呈现”。而使用类似的类（我从引用的文章和该站点上的其他一些文章中了解到的）`menu box bordered left_column`是不好的，因为它将演示与内容混合在一起。一旦你开始添加这样的类，你可能会直接将该 CSS 添加到`style`属性中。它肯定会做更多的工作和不可维护的结果，但在概念上（当涉及内容 - 呈现分离时）它不会产生任何影响。*

*现在我确实意识到，在现实生活中，对于真实页面（丰富而美观）来说，将内容与演示完全分开几乎是不可能的。但是您仍然可以（应该？）至少尝试这样做。*

*也只需看看文章末尾的“但是”[应用于 CSS 的单一职责原则](http://csswizardry.com/2012/04/the-single-responsibility-principle-applied-to-css/)。在我看来，`island`他使用的课程已经是演示性的，因为它没有描述内容。它描述了如何显示它。一旦您看到他在内容方面没有共同点的元素上使用（或可能使用）该类的广泛程度，这一点就会立即显而易见。*

**结束编辑**

* * *

另一种方法是使用选择器分组。所以我会有类似的东西：

```
#menu, #info, #footer {
  background: /* ... */
  border: /* ... */
} 
```

这避免了修改 (X)HTML 的需要。但仍然会导致订单问题。并且也很难对样式进行逻辑分组。特别是如果它们分布在许多文件中。

* * *

我认为我真正想要的是能够命名一组属性并以某种方式将它们导入选择器中。例如`#include`，在 C++ 中。有什么办法可以做到这一点？我对此表示怀疑，但也许...

如果没有那么还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:45:52.467

使用类来定义样式是正确的方法。

> 我研究的一种方法是引入一个专门的类（例如 panelClass）来捕获常见的面板样式。然后在 (X)HTML 中，我只需将该类添加到每个应该是面板的元素中。

对我来说，这正是我会做的方式。

> 但这感觉不对。毕竟我将在 (X)HTML 中“揭示实现”。

揭示实施是否存在安全问题？

Harry Roberts 的一些精选帖子：

[http://csswizardry.com/2012/04/my-html-css-coding-style/](http://csswizardry.com/2012/04/my-html-css-coding-style/)

[http://csswizardry.com/2012/04/the-single-responsibility-principle-applied-to-css/](http://csswizardry.com/2012/04/the-single-responsibility-principle-applied-to-css/)

[http://csswizardry.com/2012/05/keep-your-css-selectors-short](http://csswizardry.com/2012/05/keep-your-css-selectors-short)

我发现他使用 CSS 大开眼界的风格，它可能会对你有所帮助

**更新**

根据您的更新，我同意您的观点，您应该尝试将结构与演示文稿分开，尽管有时我们无法完全管理它。是否完全有可能，我不知道。

我部分不同意这个`island`类，填充属性对我来说有点悬停在结构和表现的边界上。结构性的，因为它改变了它所应用的任何元素的布局，表现性的，因为填充改变了它在页面上的外观。

在理想的世界中，您永远不需要包含 的类属性`menu box bordered left_column`，因为您将编写几个将结构和表示分开的类。

考虑您的情况，我可能会创建一个面板类 .panel{ margin:10px 0; 填充：10px；显示：块}

和一个面板显示类

.panel-display{ 背景色:#1111e4 } .panel-display > a{ color:#fff }

通过这种方式，我可以在不影响网站结构的情况下玩演示文稿。（nb我不确定这是否对你有帮助！，这对我来说似乎是合乎逻辑的）

# jquery - Drop, clone, Draggable, 拖入新div后继续克隆

> ID：14334418
> 
> 赞同：1
> 
> 时间：2013-01-15T09:17:10.807
> 
> 标签：jquery, asp.net, clone, draggable, droppable

这是我第一次尝试通过克隆元素进行拖放。通过阅读文章并浏览本网站上发布的示例和其他问题，我已经走到了这一步。但是我没有想到的一件事是图像的克隆。一旦我将图像放入新的 div 中，它就会克隆并且仍然可以移动。但在我移动克隆后，它会继续克隆新图像，将现有图像留在新的 Div 中。我已经搜索并尝试了许多有类似问题的帖子，它们不做任何事情。我相信我克隆后，它仍然与现有的 Div 绑定？？

这是我的代码：

```
<script>
    var copy = 0;
    $(function () {
        $("#iWidget").accordion();
        $("#iWidget img").draggable({
            cursor: 'move',
            revert: 'invalid',
            appendTo: "body",
            helper: "clone"
        });
        $("#iBoard img").draggable();
        $("#iBoard").droppable({
            drop: function (event, ui) {
                copy++
                var TemEle = $(ui.helper).clone().attr("id", $(this).attr('id') + copy);
                $(this).append(TemEle)
                TemEle.draggable();
                alert('drop id:' + TemEle.attr('id'));
            }
        });
    });

<div class="iPage">
<div id="iBoard">
</div>

<div id="iWidget">
    <h1>Network</h1>
    <div>
        <asp:Image ImageUrl="Images/Network/WRouterONLINE.gif" ID="WRouterONLINE" runat="server"  Height="30px" Width="30px" />
        <asp:Image ImageUrl="Images/Network/ModemONLINE.gif" ID="ModemONLINE" runat="server"  Height="30px" Width="30px" />
    </div>
    <h1>Servers</h1>
    <div>
        <asp:Image ImageUrl="Images/Server/ServerONLINE.gif" ID="ServerONLINE" runat="server"  Height="30px" Width="30px" />
    </div>
    <h1>Workstations</h1>
    <div>
        <asp:Image ImageUrl="Images/Workstations/AlienwareONLINE.gif" ID="AlienwareONLINE" runat="server"  Height="30px" Width="20px" />
        <asp:Image ImageUrl="Images/Workstations/PCONLINE.gif" ID="PCONLINE" runat="server"  Height="30px" Width="30px" />
    </div>
    <h1>Other</h1>
    <div>
        <asp:Image ImageUrl="Images/Other/PS3ONLINE.gif" ID="PS3ONLINE" runat="server"  Height="30px" Width="30px" />
        <asp:Image ImageUrl="Images/Other/BlueRayONLINE.gif" ID="BlueRayONLINE" runat="server"  Height="30px" Width="30px" />
        <asp:Image ImageUrl="Images/Other/TabletONLINE.gif" ID="TabletONLINE" runat="server"  Height="30px" Width="30px" />
    </div>
</div> 
```

谢谢！

# jquery - 使用 A Href onclick 显示 Div 并隐藏其他

> ID：14334427
> 
> 赞同：1
> 
> 时间：2013-01-15T09:17:47.803
> 
> 标签：jquery, html, href

我有一个带有一些链接的菜单。像这样：

```
<ul id="nav"><li><a href="#" class="tartalom">Some Div 1</a></li><li><a href="#" class="tartalom2">Some Div 2</a></li></ul> 
```

这是我的div。

```
 <div class="tartalom1>Bla bla bla</div> 

  <div class="tartalom2>Yeeah yeah yeah</div> 
```

如果我单击链接以打开具有相同类的 div 并关闭其他类（如果它们已打开），如何使其成为可能？我试过这个，但它没有帮助：

```
 $(document).ready( function(){
  $('.tartalom').click( function(){ // set of divs to be clickable
   $(this).siblings('div').hide(); // it's already showing, right?
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:19:55.303

您需要先到达封闭的 div 才能访问兄弟 div。您可以使用[**最接近（）**](http://api.jquery.com/closest/)函数来查找匹配搜索条件的最近祖先。

**[现场演示](http://jsfiddle.net/rajaadil/c4mJC/)**

```
$(document).ready( function(){
  $('.tartalom').click( function(){ // set of divs to be clickable
      $(this).closest('div').siblings('div').hide(); // it's already showing, right?
  });
}); 
```

您还**错过**了div 中`tartalom1`和class的结束引号。`tartalo2`

# node.js - 如何使用密码保护开发 MongoDB 服务器？

> ID：14334429
> 
> 赞同：0
> 
> 时间：2013-01-15T09:17:55.167
> 
> 标签：node.js, mongodb, mongoose

我想用密码保护我的开发 MongoDB 服务器，我在 mongoose 中使用该密码。我知道如何在数据库级别设置密码。但我需要 MongoDB 服务器本身。

我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:01:22.377

要强制 MongoDB 使用身份验证，您需要`–-auth`在服务启动时将参数添加到 MongoDB。

如果您使用的是未经授权的用户，您将收到一个错误，或者如果您尝试执行类似列出服务器“显示 dbs”上的可用数据库之类的操作，您将收到相同的错误

```
error: { “$err” : “unauthorized for db [mydatabase] lock type: -1 ” } 
```

MongoDB服务器连接在它使用管理数据库首先连接的意义上，然后您可以列出数据库。因此，要获取数据库列表，您需要确保在管理员中切换到具有读/写权限的帐户。

但`--auth`将是对每个连接的强制身份验证。

愉快的探索...

更多信息：[http ://docs.mongodb.org/manual/administration/security/#authentication](http://docs.mongodb.org/manual/administration/security/#authentication)

# performance - 如何注释多行代码？- 页面加载时的文件权重和性能

> ID：14334435
> 
> 赞同：0
> 
> 时间：2013-01-15T09:18:13.563
> 
> 标签：performance, file, filesize, page-load-time

我想知道我是否有一个 JavaScript 插件，例如，大约 50Kb，如果我将其注释掉，但无论如何我在页面中加载文件，服务器端和浏览器端的重量会是 50Kb 吗？

我的意思是 50kb 的 JavaScript，完全被注释掉，但无论如何加载，会影响页面加载性能以及如果它没有被注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:20:53.483

浏览器将更快地呈现页面，但显然它不会对服务器产生任何影响。JavaScript，无论是否被注释掉，仍然需要下载。

# spring-data-jpa - 将 Spring 数据 JPA 与 MS SQL 服务器一起使用

> ID：14334437
> 
> 赞同：0
> 
> 时间：2013-01-15T09:18:17.757
> 
> 标签：spring-data-jpa

我正在使用 Spring data JPA、Hibernate 和 MS SQL Server 设置一个应用程序，不幸的是，我的配置搞砸了。

我希望这里的代码能让事情更清楚：。

这是我的 mvc-dispatcher.xml，它是应用程序上下文：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/data/jpa 
    http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

<context:component-scan base-package="com.yyy.yyy" />

<context:property-placeholder location="classpath:db.properties"/>

<!--  DATA BASE -->
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="true" />
            <property name="database" value="SQL_SERVER" />
        </bean>
    </property>
    <property name="persistenceUnitName" value="punit" />
</bean>

<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClass}" /> 
    <property name="url" value="${jdbc.url}" /> 
    <property name="username" value="${jdbc.user}" /> 
    <property name="password" value="${jdbc.pwd}" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<jpa:repositories base-package="com.yyy.yyy.yyy.repository"/>

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/pages/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

现在，我还有一个 persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="punit">     
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect" />
            <property name="hibernate.connection.url" value="${jdbc.url}" />
            <property name="hibernate.connection.driver_class" value="${jdbc.driverClass}" />
            <property name="hibernate.connection.username" value="${jdbc.user}" />
            <property name="hibernate.connection.password" value="${jdbc.pwd}" />
            <property name="hibernate.hbm2ddl.auto" value="create-drop" /> 
        </properties>
    </persistence-unit>
</persistence> 
```

我不明白我应该把数据库连接数据放在哪里？而且我也无法连接到数据库（我的连接被拒绝） - 我在服务器启动时遇到异常。

我的项目在 Tomcat 上运行，我使用[https://github.com/SpringSource/spring-data-jpa-examples](https://github.com/SpringSource/spring-data-jpa-examples)作为模板。

**编辑** 我设法克服了这些问题并成功发布到 tomcat，方法是删除持久性 XML 文件并仅使用 spring 上下文文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jpa="http://www.springframework.org/schema/data/jpa" xmlns:tx="http://www.springframework.org/schema/tx" xsi:schemaLocation="         http://www.springframework.org/schema/beans              http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         http://www.springframework.org/schema/context          http://www.springframework.org/schema/context/spring-context-3.0.xsd         http://www.springframework.org/schema/data/jpa          http://www.springframework.org/schema/data/jpa/spring-jpa.xsd         http://www.springframework.org/schema/tx          http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
   <context:component-scan base-package="yyy.yyy.yyy" />
   <context:property-placeholder location="classpath:db.properties" />
   <!-- DATA BASE -->
   <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
      <property name="dataSource" ref="dataSource" />
      <property name="packagesToScan" value="yyy.yyy.yyy.yyy.domain" />
      <property name="jpaVendorAdapter">
         <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="false" />
            <property name="showSql" value="true" />
            <property name="database" value="SQL_SERVER" />
            <property name="databasePlatform" value="org.hibernate.dialect.SQLServerDialect" />
         </bean>
      </property>
   </bean>
   <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
      <property name="driverClassName" value="net.sourceforge.jtds.jdbc.Driver" />
      <property name="url" value="jdbc:jtds:sqlserver://localhost;databaseName=db" />
      <property name="username" value="yyy" />
      <property name="password" value="yyyyy" />
   </bean>
   <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
      <property name="entityManagerFactory" ref="entityManagerFactory" />
      <property name="dataSource" ref="dataSource" />
   </bean>
   <tx:annotation-driven transaction-manager="transactionManager" />
   <jpa:repositories base-package="yyy.yyy.yyy.yyy.repository" />
   <!-- MVC -->
   <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix">
         <value>/WEB-INF/pages/</value>
      </property>
      <property name="suffix">
         <value>.jsp</value>
      </property>
   </bean>
</beans> 
```

该应用程序现在加载正常，但是当我使用我的存储库并调用保存时，我得到连接被拒绝的异常。

有谁知道为什么？

请帮忙。伊多布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:22:03.183

您在`db.properites`这里指的是文件：`<context:property-placeholder location="classpath:db.properties"/>` 它在项目中的位置？

# python - python中的过滤函数

> ID：14334442
> 
> 赞同：0
> 
> 时间：2013-01-15T09:18:35.103
> 
> 标签：python

我有 1 个列表“name_list”。

```
name_list=['Name:Bill,Age:28,Height:6.1', 'Name:Dona,Age:23,Height:6.1','Name:Bill,Age:22,Height:6.1', 'Name:Shelly,Age:24,Height:7'] 
```

1）我想用常见数据对列表进行排序。例如输出应该是这样的：

```
out=['Name:Bill,Age:28,Height:6.1', 'Name:Bill,Age:22,Height:6.1'] 
```

2）我想用 Max 对列表进行排序。年龄。例如，如果我想查看谁的年龄最大输出应该是这样的。

```
out=['Name:Bill,Age:28,Height:6.1'] 
```

这是我到目前为止所做的：

```
name_list=['Name:Bill,Age:28,Height:6.1', 'Name:Dona,Age:23,Height:6.1','Name:Bill,Age:22,Height:6.1', 'Name:Shelly,Age:24,Height:7'] 

out = filter(lambda x:'Name:Bill' in x and 'Height:6.1' in x,list) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:02:31.383

您必须将列表转换为更易于处理的结构，例如：

```
people = [
    dict(x.split(':') for x in y.split(','))
    for y in name_list
] 
```

这给了你类似的东西：

```
[{'Age': '28', 'Name': 'Bill', 'Height': '6.1'}, 
 {'Age': '23', 'Name': 'Dona', 'Height': '6.1'}, 
 {'Age': '22', 'Name': 'Bill', 'Height': '6.1'}, 
 {'Age': '24', 'Name': 'Shelly', 'Height': '7'}] 
```

遍历此列表并选择您需要的任何属性。例如，要查找最年长的人：

```
oldest = max(people, key=lambda x: x['Age']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:40:42.583

我将使用以下方法组织数据`collections.namedtuple`：

```
In [41]: from collections import namedtuple
         person = namedtuple('person','name age height')

In [42]: persons=[person(*(i.split(':')[1] for i in n.split(','))) 
                                               for n in name_list]

In [43]: max(persons,key=lambda x:x.age)
Out[43]: person(name='Bill', age='28', height='6.1')

In [44]: max(persons,key=lambda x:x.height)
Out[44]: person(name='Shelly', age='24', height='7')

In [45]: max(persons,key=lambda x:x.height).name
Out[45]: 'Shelly'
In [46]: persons
Out[46]: 
[person(name='Bill', age='28', height='6.1'),
 person(name='Dona', age='23', height='6.1'),
 person(name='Bill', age='22', height='6.1'),
 person(name='Shelly', age='24', height='7')] 
```

# javascript - 更改把手符号

> ID：14334444
> 
> 赞同：0
> 
> 时间：2013-01-15T09:18:50.220
> 
> 标签：javascript, handlebars.js, template-engine

我有两个团队在同一个项目上工作，他们都使用具有相同符号“{{X}}”但上下文不同的模板引擎（客户端和服务器端引擎）。
现在我想做的是将[Handlebars](http://handlebarsjs.com/)符号从 {{ }} 更改为其他内容，例如 <% %>

例如，我想使用这种表示法：

```
 <div><%X%></div> 
```

代替 ：

```
 <div>{{X}}</div> 
```

需要在 Handlebars.js 上进行一些编辑，但我找不到。
我怎样才能做到这一点 ？

知道我可以通过换行来用[Mustache做到这一点](https://raw.github.com/janl/mustache.js/master/mustache.js)

```
exports.tags = ["{{", "}}"]; 
```

到

```
exports.tags = ["<%", "%>"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:39:07.800

在继续使用这种方法之前，您真的应该三思而后行。修改[Handlebars.js](http://handlebarsjs.com/)并添加自定义功能将引入几个管理问题，这些问题可能会在项目的后期阶段带来更高的成本。考虑以下几点：

1.  如果您修改当前版本，则要跟上该工具的未来更新将非常困难或耗时。
2.  当前有关该工具的文档和教程变得过时或难以遵循。
3.  任何添加到项目中的新开发人员都需要适应变化并尝试了解该工具的新功能。

鉴于这些要点，我建议遵循每个第三方工具提供的标准和最佳实践。

希望这会有所帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T07:17:07.070

Handlebars 是用正式语法定义的。您需要更改[https://github.com/wycats/handlebars.js/blob/master/src/handlebars.l](https://github.com/wycats/handlebars.js/blob/master/src/handlebars.l)

# iphone - QLPreviewController 问题

> ID：14334447
> 
> 赞同：-1
> 
> 时间：2013-01-15T09:19:30.280
> 
> 标签：iphone, ios, ipad, mobile

我正在尝试使用 iPad 中的 QLPreviewController 从 URL 显示文档、图像、PDF。它适用于 iOS5 之前的较低版本，但与 iOS6 和 QLPreviewController 不兼容的东西正在用作子视图，我没有使用导航控制器。

是否有任何其他库可用于在 iOS 中显示文档。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:43:52.677

不要将 QLPreviewController 的视图作为子视图添加到另一个视图，而是以模态方式呈现为推送到导航堆栈参考[QLPreviewController 文档参考](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)或使用[UIDocumentInteractionController](http://www.google.co.in/url?sa=t&rct=j&q=uidocumentinteractioncontroller%20programming%20guide&source=web&cd=2&cad=rja&ved=0CDoQFjAB&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2Fdocumentation%2FFileManagement%2FConceptual%2FDocumentInteraction_TopicsForIOS%2FIntroduction%2FIntroduction.html&ei=4iX1UO2tJIaIrAeLkoCwBA&usg=AFQjCNGEoCFO5nq-nQLNf8jrmZK5-r9piA&bvm=bv.41018144,d.bmk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:16:55.373

如果您只需要 PDF 和图像，请查看`UIImage+PDF`类别：[https ://github.com/mindbrix/UIImage-PDF](https://github.com/mindbrix/UIImage-PDF)

这使您可以在 UIImageView 中呈现与 JPG 或任何其他类型的图像相同的 PDF 图像。但是，如果您需要渲染办公文档，这将无济于事。在这种情况下，请遵循 @pradeepa 的建议。

# javascript - ！自调用匿名函数之前的字符

> ID：14334448
> 
> 赞同：0
> 
> 时间：2013-01-15T09:19:31.437
> 
> 标签：javascript

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

我刚刚遇到了一个 tablesorter 插件，在查看源代码时，我发现该插件设置了自调用匿名函数 - 没什么不寻常的。然而，我不知道主角的目的是什么`!`：

```
!(function($) {})(jQuery); 
```

我的意思是，它与此有何不同：

```
(function($) {})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:21:05.250

出于所有意图和目的，它根本没有区别。它否定了函数调用的返回，但由于返回值没有分配给任何东西，所以它是没有意义的。

# android - 服务未在重新启动时启动

> ID：14334449
> 
> 赞同：0
> 
> 时间：2013-01-15T09:19:31.637
> 
> 标签：android, android-manifest, android-broadcast

我正在尝试在启动设备时启动服务。我已经搜索了很多并按照步骤进行操作，但仍然没有成功。一旦手机重新启动，它会在开始时显示“应用程序已意外停止”。我知道它来自接收器文件，但无法弄清楚问题出在哪里。

接收器.java

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class Receiver extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent arg1) {
        // TODO Auto-generated method stub
        if(arg1.getAction().equals(Intent.ACTION_BOOT_COMPLETED))
        {
            Intent myIntent = new Intent();
            myIntent.setAction("com.androidhive.jsonparsing.UpdateService");
            context.startService(myIntent);
        }
    }   
} 
```

AndroidManifest

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".AndroidJSONParsingActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- Single List Item View -->
    <activity
        android:label="Single Menu Item"
        android:name=".SingleMenuItemActivity" >
    </activity>
    <service android:name=".UpdateService">
        <intent-filter>
            <action android:name="com.androidhive.jsonparsing.UpdateService"/>
        </intent-filter>
    </service>
    <receiver android:name=".MyReceiver" 
        android:enabled="true"
        android:exported="false">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
        </intent-filter>
    </receiver>
</application> 
```

有什么我需要添加的，以便服务完美启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:20:55.877

将您的接收器声明`AndroidManifest.xml`为：

```
 <receiver android:name=".Receiver" 
        android:enabled="true"
        android:exported="false">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
        </intent-filter>
    </receiver> 
```

因为你有 BroadcastReceiver 类，`Receiver.class`但在 AndroidManifest.xml 中声明它 `MyReceiver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:32:34.530

请检查你的 android manifest 它应该是这样的：

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name" >
<activity
    android:label="@string/app_name"
    android:name=".AndroidJSONParsingActivity" >
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<!-- Single List Item View -->
<activity
    android:label="Single Menu Item"
    android:name=".SingleMenuItemActivity" >
</activity>
<service android:name=".UpdateService">
    <intent-filter>
        <action android:name="com.androidhive.jsonparsing.UpdateService"/>
    </intent-filter>
</service>
<receiver android:name=".Receiver" 
    android:enabled="true"
    android:exported="false">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
    </intent-filter>
</receiver> 
```

问题在于您的接收者的声明。请检查 android:name 标签，它应该有正确的类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T06:25:37.473

而不是使用

```
Intent myIntent = new Intent();
myIntent.setAction("com.androidhive.jsonparsing.UpdateService");
context.startService(myIntent); 
```

尝试在接收器中执行此操作

```
Intent myIntent = new Intent(context, UpdateService.class);
context.startService(myIntent); 
```

# apple-push-notifications - 将 PushSharp 与多个 Apple 频道一起使用

> ID：14334453
> 
> 赞同：5
> 
> 时间：2013-01-15T09:19:42.417
> 
> 标签：apple-push-notifications, pushsharp

我是 PushSharp 的新手，并试图了解如何使用它。

我有一种情况，我有不同版本的苹果应用程序。例如：MyApp、MyAppHD、MyAppPremium、MyAppPremiumHD。我对这些和 4 个不同的推送证书有不同的捆绑标识符。

当我收集设备 pushid 时，我知道哪个属于哪个捆绑标识符。

我的问题是，如果我将它与 PushSharp 一起使用，我会创建 4 个不同的 PushService 实例吗？或者我是否将 4 个 Apple 频道添加到一个 PushService？

如果我能够使用 4 个通道，我如何指定特定设备属于哪个通道？

如果我创建多个实例，我想知道这样做是否会对性能造成重大影响，或者此时是否无关紧要？

谢谢杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:01:06.727

最好的方法是使用 4 PushBroker（v2 中的新 PushService）。

PushBroker 多没问题，每一个都很轻。

如果一个应用程序由一个服务管理，则更容易控制每个应用程序。

# windows-phone-7 - 动态设置 ListItem 前台

> ID：14334456
> 
> 赞同：0
> 
> 时间：2013-01-15T09:19:48.107
> 
> 标签：windows-phone-7, windows-phone-7.1, listitem, foreground

我有一个在我的应用程序中填充 ListBox 的数组。首先，我需要将每个listboxItem 的前景设置为灰色，通过将前景色绑定到listboxItem，这很容易。

问题出现在我必须单独（基于其他后端因素）将特定的 listboxItems 前景设置为黑色的地方。诀窍是在已填充的列表框上选择特定项目并重新设置前景，而无需重新渲染整个列表框。

我绑定到列表框的每个对象都有一个 guid/唯一 ID。因此，如果我可以只选择列表框中的项目（'其中 id=1635135;？），然后将该项目前景设置为黑色..

很难更清楚地解释这一点，但是如果您有任何问题，请提出！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:37:34.547

如果您`INotifyPropertyChanged`在 ViewModel 中实现，只需将所需项目的 Foreground 属性更改为黑色，它们就会在您的 UI 中自动从灰色变为黑色。

# android - 为什么支持 v4 demo 使用 java 代码实现 XML 布局？

> ID：14334457
> 
> 赞同：0
> 
> 时间：2013-01-15T09:19:49.623
> 
> 标签：android

来自片段布局Demo：
有一个`simple_list_item_checkable_1.xml`

```
<com.example.android.supportv4.view.CheckableFrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    <TextView
            android:id="@android:id/text1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:minHeight="?android:attr/listPreferredItemHeight"
            android:gravity="center_vertical"
    />
</com.example.android.supportv4.view.CheckableFrameLayout> 
```

有一堂课`CheckableFrameLayout.java`

```
public class CheckableFrameLayout extends FrameLayout implements Checkable {
    private boolean mChecked;

    public CheckableFrameLayout(Context context) {
        super(context);
    }

    public CheckableFrameLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setChecked(boolean checked) {
        mChecked = checked;
        setBackgroundDrawable(checked ? new ColorDrawable(0xff0000a0) : null);
    }

    public boolean isChecked() {
        return mChecked;
    }

    public void toggle() {
        setChecked(!mChecked);
    }

} 
```

我真的不知道为什么演示会以这种方式编写，我可以将其切换为 XML 代码吗？
我试过谷歌，但我仍然找不到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:20:44.817

CheckableFrameLayout 是自定义显示元素，而不是内置的 Android UI 小部件。它的行为在源代码中定义，它的 UI 在 XML 中定义。

# jquery-ui - jQuery UI 可调整大小/可选择在主干视图中不起作用

> ID：14334460
> 
> 赞同：0
> 
> 时间：2013-01-15T09:19:52.970
> 
> 标签：jquery-ui, backbone.js, backbone-views, jquery-ui-resizable, jquery-ui-selectable

我有我的模型的视图，在初始化中我使用以下代码

```
initialize: function (){
        _.bindAll(this, 'render'); 
        this.listenTo(this.model, "change", this.render);
        this.$el.draggable({
            opacity: 0.5,
            containment: "parent"
        });
        this.$el.resizable();
        this.$el.selectable();
    }, 
```

虽然可拖动的作品，可调整大小和可选择的作品没有（我还没有测试过其他 jQuery UI 交互来检查它们是否有效）。我尝试将其放置`this.$el.resizable`在渲染函数中，但这也不起作用。我正在使用 jQuery 1.8.3 和 jQuery UI 1.9.2（我确实在我的 html 中包含了必要的 jquery-ui.css）。当视图呈现时，我检查浏览器中的元素，它确实有一个类，`ui.draggable, ui.resizable`并且`ui.selectable`它应该是，但它只是可拖动的。

试图解决这个问题，我在`resize: both`要调整大小的元素的类中使用了 CSS3 属性，它工作得很好，但我真的很想利用 jQuery UI 来调整大小，我很好奇为什么它赢了不行。

有什么想法我可能做错了吗？

编辑：添加了 jsfiddle 示例[http://jsfiddle.net/IgnorantUser/u7JkX/](http://jsfiddle.net/IgnorantUser/u7JkX/)所描述的问题是在`ButtonInCanvas`主干视图的初始化中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:26:20.233

好的，显然`this.$el.html(this.template(this.model.toJSON()));`在我的`ButtonInCanvas`视图上的渲染功能中使用是导致问题的原因。上述获取模型的“标题”属性，并将其作为 html 内容传递到视图中。

解决方案是放入`this.$el.html(this.template(this.model.toJSON()));`init函数。如果需要在渲染函数中完成，应该有另一个 div，在我们要调整大小的那个中，它将从模型中获取标题属性。在下面的 JSBIN 中，您可以看到在按钮内使用 div 的解决方案。（感谢用户 shoky，来自 #jquery freenode irc 频道的实现和他的提醒） [http://jsbin.com/uxequq/1/edit](http://jsbin.com/uxequq/1/edit)

我真的不明白为什么会出现问题（也许`this.template(this.model.toJSON())`在我的渲染函数中，导致视图重新渲染？）所以请随时指出原因，并帮助我进一步理解！

干杯!

# c# - 在运行时将数据绑定到转发器

> ID：14334464
> 
> 赞同：0
> 
> 时间：2013-01-15T09:20:03.657
> 
> 标签：c#, asp.net, repeater

我在运行时将数据绑定到转发器控件时遇到问题，我知道如何在 aspx 中绑定数据，但无法弄清楚如何在运行时执行此操作。我有未知数量的行要绑定，并且在每一行中我有未知数量的项目，这个结构是一个列表列表，我在后面的代码中将它分配给转发器数据源。但是要获得我想要的格式，我应该在后面的代码中的 ItemDataBound 事件中写什么而不是这个代码？

```
<asp:Repeater ID="RepeaterCategories" runat="server" OnItemCreated="RepeaterCategories_ItemCreated" OnItemDataBound="R1_ItemDataBound">
<ItemTemplate>
<asp:LinkButton ID="parent1Link" runat="server" ForeColor="#570000" CommandArgument='<% #Eval("ParentID1") %>'
Text='<% #Eval("ParentName1") %>' Font-Size="Small" Font-Underline="False" Font-Bold="True"
Font-Names="Arial" PostBackUrl='<% #CategoryId(Eval("ParentID1")) %>'>
 </asp:LinkButton>
&nbsp;
 <asp:Image ID="Image3" runat="server" Width="7px" ImageUrl="~/Img/next.png" />
&nbsp;
</ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:05:58.043

这是您应该执行的操作的示例：

你的 aspx 页面

```
<asp:Repeater ID="rpt" runat="server" OnItemDataBound="rpt_ItemDataBound">
                                <ItemTemplate>
                                    <li>
                                        <img id="imgArticle" runat="server"><p>
                                            <a href="#" id="aTitle" runat="server"></a>
                                        </p>
                                        <span class="grey">
                                            <asp:Literal ID="litCountry" runat="server"></asp:Literal>
                                            <asp:Literal ID="litTime" runat="server"></asp:Literal>
                                        </span></li>
                                </ItemTemplate>
                            </asp:Repeater> 
```

绑定中继器：

```
rpt.DataSource = articles; // articles is a Generic List which has data
rpt.DataBind(); 
```

在项目数据绑定上：

```
protected void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                var item = (Article)e.Item.DataItem;
                if (item.Title != null)
                    ((HtmlAnchor)e.Item.FindControl("aTitle")).InnerText = item.Title;
                if (item.Country != null)
                {
                    if (item.Country.Length > 0)
                        ((Literal)e.Item.FindControl("litCountry")).Text = item.Country + " ,";
                }
                ((Literal)e.Item.FindControl("litTime")).Text = item.CreationDate.ToString();

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:58:52.107

如果你有一个特别复杂的安排，你有几个选择。您可以使用带有 AutoGenerated 列的 GridView 并使用 OnItemDataBound 进行微调。或者您当然可以将原始 HTML 输出到 DIV 中。

# r - R中属性列的ggplot表示

> ID：14334470
> 
> 赞同：1
> 
> 时间：2013-01-15T09:20:22.837
> 
> 标签：r, ggplot2

我有两组时间序列数据。我想根据时间和日期绘制它们。此外，它们是异常值标题下相应时间的属性数（-1 或 1），它们应在图中用异常值 =“-1”的符号表示。此外，我的代码中的另一个问题是在 Legend 中，图例的标题和图例的内容之一出现了类似的情况。

```
true   pred   outlier   dtt 
0.05       0    1   9/29/2007 0:00  
-0.33      0    1   9/29/2007 1:00  
-0.41      0    1   9/29/2007 2:00  
-0.69      0    1   9/29/2007 3:00  
-0.68      0    1   9/29/2007 4:00  
-0.43   -0.53   1   9/29/2007 5:00  
-0.12   -0.23   1   9/29/2007 6:00  
0.15    0.16    1   9/29/2007 7:00  
0.56    0.39    1   9/29/2007 8:00  
0.98    0.87    1   9/29/2007 9:00  
1.18    1.27    1   9/29/2007 10:00 
2.14    1.31    1   9/29/2007 11:00 
4.12    2.87    1   9/29/2007 12:00 
5.59    5.43    1   9/29/2007 13:00 
6.90    6.52    1   9/29/2007 14:00 
6.40    7.80    1   9/29/2007 15:00 
5.88    5.78    1   9/29/2007 16:00 
6.14    5.58    1   9/29/2007 17:00 
4.61    6.20    -1  9/29/2007 18:00 
5.15    6.20    1   9/29/2007 19:00 
2.74    4.54    -1  9/29/2007 20:00 
4.66    4.54    1   9/29/2007 21:00 
5.10    4.74    1   9/29/2007 22:00 
4.79    5.53    1   9/29/2007 23:00 
```

应用代码：

```
ggplot(second_data_results_node25, aes( second_data_results_node25$dtt)) +
    geom_line(aes(y = second_data_results_node25$true, colour = "TRUE")) + 
    geom_line(aes(y = second_data_results_node25$pred, colour = "Prediction")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:11:16.573

为了使用 绘图`ggplot2`，您必须相应地调整数据。由于您有两个变量，您可以将`melt`它们（我在`reshape2`这里用来融化）并按如下方式使用：`group``ggplot2`

```
require(ggplot2)
require(reshape2)
df <- structure(list(true = c(0.05, -0.33, -0.41, -0.69, -0.68, -0.43, 
-0.12, 0.15, 0.56, 0.98, 1.18, 2.14, 4.12, 5.59, 6.9, 6.4, 5.88, 
6.14, 4.61, 5.15, 2.74, 4.66, 5.1, 4.79), pred = c(0, 0, 0, 0, 
0, -0.53, -0.23, 0.16, 0.39, 0.87, 1.27, 1.31, 2.87, 5.43, 6.52, 
7.8, 5.78, 5.58, 6.2, 6.2, 4.54, 4.54, 4.74, 5.53), outlier = c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, -1L, 1L, -1L, 1L, 1L, 1L), dtt = c("9/29/2007 0:00", "9/29/2007 1:00", 
"9/29/2007 2:00", "9/29/2007 3:00", "9/29/2007 4:00", "9/29/2007 5:00", 
"9/29/2007 6:00", "9/29/2007 7:00", "9/29/2007 8:00", "9/29/2007 9:00", 
"9/29/2007 10:00", "9/29/2007 11:00", "9/29/2007 12:00", "9/29/2007 13:00", 
"9/29/2007 14:00", "9/29/2007 15:00", "9/29/2007 16:00", "9/29/2007 17:00", 
"9/29/2007 18:00", "9/29/2007 19:00", "9/29/2007 20:00", "9/29/2007 21:00", 
"9/29/2007 22:00", "9/29/2007 23:00")), .Names = c("true", "pred", 
"outlier", "dtt"), class = "data.frame", row.names = c(NA, -24L
))

df.m <- melt(df, names(df)[3:4], names(df)[1:2])
df.m$outlier <- factor(df.m$outlier)
df.m$dtt <- strptime(as.character(df.m$dtt), format = "%m/%d/%Y %H:%M")
p <- ggplot(df.m, aes(x = dtt, y = value, group = variable, color = variable))
p <- p + geom_point(aes(shape = outlier))
p <- p + geom_line()
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1))
p 
```

![结果_ggplot2](../Images/2a22668f3744317d12327e3c5ae6345c.png)

# c++ - 优化传输数据缓冲区的内存和性能

> ID：14334471
> 
> 赞同：0
> 
> 时间：2013-01-15T09:20:24.493
> 
> 标签：c++, optimization, embedded

我有一个准备数据缓冲区的函数，然后通过外部提供的 API 函数发送它，如下所示：

```
send(uint8_t* data_buf, uint32_t length) 
```

在我的特殊情况下，我的代码总是准确地发送 8 个字节并且前 7 个字节总是相同的（我无法改变这个事实；它是某种消息头）。

因为我在一个有限的嵌入式环境中，我想优化我的代码的大小和性能，或者至少选择两者的最佳折衷。

目前，我看到两个选项：

1.  创建一个全局数组。一次初始化前 7 个字节，然后在发送数组之前覆盖最后一个字节。
2.  创建一个本地数组，写入所有 8 个字节，然后发送。

有没有比上面提到的两个更好的解决方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T09:30:04.587

即使在嵌入式系统上，您也可以指望拥有超过 8*字节*的缓存。因此，性能真的不重要。`databuf[8]`在这两种情况下都将完全缓存。第一种情况的代码大小可能会小 2-3 条指令。

（通常还有另一个问题：代码/闪存大小和 RAM 大小是不同的约束，当您可以 XIP 时）。

# jquery - 未加载带有 JQuery Mobile 的 Ajax Flexcroll

> ID：14334472
> 
> 赞同：1
> 
> 时间：2013-01-15T09:20:25.040
> 
> 标签：jquery, ajax, jquery-mobile, mobile

我正在使用 Flexcroll，但我遇到了 Ajax 问题。

我有 Index.html 和 page1.html 并将滚动代码放在 Page1.html 中。当我从 index.html 打开链接时，它在我刷新页面之前不起作用。所以请帮助解决这个问题。

我在页面之间的转换中使用了 JQuery Mobile。

这是我的滚动代码：

```
<div id="mycustomscroll" class="flexcroll">
  <div class="myajaxcontent" >
        <img src="images/zzz.png">
  </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:20:00.410

您是否尝试过`fleXenv.updateScrollBars()`在ajax请求完成时申请？

您需要版本 2.1.1 [或 2.0.0] 才能拥有 updateScrollBars 方法。

此处的文档： [http ://www.hesido.com/flexcroll/flexcroll-programming.htm#update](http://www.hesido.com/flexcroll/flexcroll-programming.htm#update)

我这样使用它：

```
$('.myajaxcontent').load('/Page1.html', function(response, status, xhr) {
    ...
    ...
    fleXenv.updateScrollBars();
} 
```

# c - 如何保护 wcslen 功能和其他类似功能

> ID：14334475
> 
> 赞同：0
> 
> 时间：2013-01-15T09:20:38.987
> 
> 标签：c, winapi

根据[http://msdn.microsoft.com/en-us/library/78zh94ax%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/78zh94ax%28v=vs.80%29.aspx)，

wcslen 函数和其他类似函数会招致缓冲区溢出问题带来的潜在威胁。

我应该担心吗，如果是，我怎样才能安全地使用这些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:49:18.997

你应该担心的事情和你应该担心的事情`wcslen`一样多，例如`strlen`。这些函数需要一个 C 字符串，即指向以空字节 (0x00) 终止的字符序列的指针。如果您不包含空字节，它们将愉快地继续遍历内存（超出您传递给它们的任何缓冲区的限制）：

```
const char s1[] = { 'a', 'b', 'c' }; /* Array of three characters, no null-terminator */
strlen( s1 );                        /* Unsafe, anything may happen. */

const char s2[] = "abc";             /* Array of three characters plus null-terminator */
strlen( s2 );                        /* Safe, returns '3'. */ 
```

# c# - 由于asp.net中的会话超时，登录后重定向到同一页面

> ID：14334477
> 
> 赞同：1
> 
> 时间：2013-01-15T09:20:42.687
> 
> 标签：c#, asp.net

嗨，由于asp.net Web应用程序中的会话超时，登录后是否有任何方法可以登陆相同的页面。我最近从 java 迁移到 .net，任何建议都会很有帮助。举个例子

我在**Page1**上，当我在**Page1 上空闲时**，我的会话被破坏了，我被重定向到**Logging**页面。在我登录到系统后，我目前在**默认**页面上。我想要做的只是在登录后重定向到**Page1 。**对不起，我的英语不好。

这是Web.config

```
<authentication mode="Forms">
<forms loginUrl="~/Login.aspx" timeout="2880"/>
</authentication> 
```

和登录按钮功能 #region"Validate login user" public void ValidateUser() {

```
 try
        {
            string con = ConnectionSetting.SQLDBConnectionString();
            sUserNameT = this.txtUname.Text.ToLower();
            sPassWordT = this.txtPassword.Text;
            Some required functions user......

            if (check some stuff)
            {
                Decrypting and other stuff....
                if (matching password)
                {
                    if (if the logging success)
                    {
                        LoadScreensByUser(userbyactive.UserId, con);
                        UserLogedDetails(userbyactive.UserId);//Log User Loging Records.
                        Response.Redirect("~/Main.aspx");
                    }
                    else
                    {
                        Output...();
                    }
                }
                else
                {
                    Output...();
                }
            }
            else
            {
                Output...();
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
    #endregion 
```

在这里，我提供了最低要求的代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:55:46.917

你应该改变

```
Response.Redirect("~/Main.aspx"); 
```

对这个方法

[`FormsAuthentication.RedirectFromLoginPage(userbyactive.UserId, false);`](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)

否则你将永远出现在页面中`Main.aspx`

`RedirectFromLoginPage`会将您发送到浏览器先前请求的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:37:29.727

尝试将其添加到您的`web.config`文件中

```
 <authentication mode="Forms">
        <forms loginUrl="~/Index.aspx" timeout="120" slidingExpiration="true"/>
    </authentication> 
```

有关使用 asp.net 的 Authenticatio 模式的更多信息，请参见[THIS](http://msdn.microsoft.com/en-us/library/aa291347%28v=vs.71%29.aspx)和[THIS](http://www.c-sharpcorner.com/UploadFile/kaps_deo/Authentication07242007033135AM/Authentication.aspx)

# sqlite - 如何在 SQLite 中用另一个字符串替换一个字符串？

> ID：14334478
> 
> 赞同：0
> 
> 时间：2013-01-15T09:20:44.793
> 
> 标签：sqlite, replace

我的 SQlite 数据库中有一个名为 Date 的列，其中包含 100 行。格式为 12-31-2012 16:34:17 pm

我需要用 12-31-2012 16:34:17 pm 替换它如何实现这个？

我想到了更新命令，但我很困惑如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:25:22.130

在包含以 pm 结尾的日期的行中将 pm 替换为 pm

```
UPDATE <tablename>
   SET Date=REPLACE(Date, 'p.m.', 'pm') 
```

**未测试**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:43:11.300

在php中......

```
<?php
$dbhandle = sqlite_open('sqlitedb');
$query = sqlite_query($dbhandle, 'SELECT primarykeyid, Date FROM table');
while ($row = sqlite_fetch_array($query, SQLITE_ASSOC)) {
    if ((substr($row['Date'], -4) == 'p.m.') {
        $datestringtoupdate = substr($row['Date'], 0, -4).'pm';
    } else {
        $datestringtoupdate = substr($row['Date'], 0, -4).'am';
    }
    $update = sqlite_query($dbhandle, "UPDATE table SET Date='$datestringtoupdate' WHERE primarykeyid=$row[primarykeyid]");
}
?> 
```

# objective-c - 警告：尝试呈现其视图不在窗口层次结构中的 ViewController

> ID：14334480
> 
> 赞同：1
> 
> 时间：2013-01-15T09:20:47.733
> 
> 标签：objective-c, xcode

我正在使用 Vserv complete sdk 进行 addintegeration。我正在调用我的 adViewController 来展示我的 add。如果失败的添加失败，我将从我的 addViewController 带到 SplashViewController。但我收到此警告
`Warning: Attempt to present <SplashViewController: 0x1dd697b0> on <AdViewController: 0x1dd68690> whose view is not in the window hierarchy!`并且无法导航到我的下一个视图是 SplashViewController ..我已经尝试了以下所有方法是代码。你们能帮帮我吗：

**AdViewController.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
     appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];

    // Do any additional setup after loading the view from its nib.
}

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
   if([Util isInternetAvailable])
    {
        //Initializes SDK
       [VservAdManager initializeSDK];

        CGRect frame1;

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
            frame1 = CGRectMake(0,0,1024,768);

        else
            frame1 = CGRectMake(0,0,320,480);

        vservAdView = [[VservAdView alloc] initWithFrame:frame1];

        [vservAdView requestAd:self:@"7825":nil];

        [self.view addSubview: vservAdView];
    }
    else{

        appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
        appDelegate.window.rootViewController = appDelegate.splashViewController;
        [self presentModalViewController:appDelegate.splashViewController animated:NO];
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }
    else {
        return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
    }
}

- (void)adReceivedNotification:(VservAdView*)vservAd{
    NSLog(@"adReceivedNotification");
}

- (void)adFailedNotification:(VservAdView*)vservAd{
    NSLog(@"adFailedNotification");
    appDelegate.window.rootViewController = appDelegate.splashViewController;
    [self presentViewController:appDelegate.splashViewController animated:NO completion:Nil];

}

- (void)adSkipedNotification:(VservAdView*)vservAd{
    NSLog(@"adSkipedNotification");
    appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    appDelegate.window.rootViewController = appDelegate.splashViewController;
    [self presentModalViewController:appDelegate.splashViewController animated:NO];
} 
```

**SplashViewController.h**

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    [self setupMovie];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }
    else {
        return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
    }
}

-(void)setupMovie{
    NSLog(@"setup Movie");
    NSString* moviePath = [[NSBundle mainBundle] pathForResource:@"Splash" ofType:@"mp4"];
    NSURL* movieURL = [NSURL fileURLWithPath:moviePath];

    playerCtrl =  [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
    playerCtrl.scalingMode = MPMovieScalingModeFill;
    playerCtrl.controlStyle = MPMovieControlStyleNone;

    //  playerCtrl.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification object:nil];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad){
        [playerCtrl.view setFrame:CGRectMake(0, 0, 1024, 768)];
    }
    else{
        [playerCtrl.view setFrame:CGRectMake(0, 120, 320, 240)];
        }

//    [playerCtrl.view setTransform:CGAffineTransformMakeRotation(-M_PI/2)];

    [self.view addSubview:playerCtrl.view];
    [playerCtrl setRepeatMode:MPMovieRepeatModeNone];
    [playerCtrl play];
}

-(IBAction)moviePlayBackDidFinish:(id)sender{
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [self presentModalViewController:appDelegate.revealController animated:NO];
    appDelegate.window.rootViewController = appDelegate.revealController;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:25:29.977

如果将窗口的根视图设置为 splashViewController，为什么要在 self 上显示视图？

```
appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
appDelegate.window.rootViewController = appDelegate.splashViewController;
[self presentModalViewController:appDelegate.splashViewController animated:NO]; 
```

而是使用这个

```
appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
//appDelegate.window.rootViewController = appDelegate.splashViewController;
[appDelegate.window presentModalViewController:appDelegate.splashViewController animated:NO]; 
```

# php - $wpdb->get_row 在单个页面上不起作用。500内部服务器错误

> ID：14334483
> 
> 赞同：0
> 
> 时间：2013-01-15T09:20:58.097
> 
> 标签：php, ajax, wordpress

我`500 Internal Server Error`在尝试查询数据库时不断得到。数据由 Ajax 传递到该特定页面。

这是代码：

```
<script type="text/javascript">

            $(document).ready(function(){
                    $(".pool-player-list-a").click(function(){
                        /* Prosleđujem parametre za upis u bazu na stranicu insert_tim.php */   
                        var id = $(this).next().val();
                        var br_dresa = $(this).next().next().val();
                        var zapisnik = <?php echo $zapisnik->id; ?>;
                        var mec = <?php echo $zapisnik->idMeca; ?>;

                        $.post('../wp-content/plugins/leaguemanager/admin/insert_tim.php', {id: id, zapisnik: zapisnik, mec: mec, br_dresa: br_dresa},

                    function(data){
                        $("#message").html(data);
                        $("#message").hide();
                        $("#message").fadeIn(500);
                    });
                    return false;
                });
            });

        </script>

        <div id='message'></div>

        <div id='pool-holder'>      

            <!-- Lista igrača iz domaćeg tima -->
            <div id="pool-home">
                <h3 style="margin:0; padding:10px;" align="center">DOMAĆI</h3>

                <?php

                    $igraci_home = $this->igraci_u_timu($league_id, $mec->home_team);

                    foreach ($igraci_home as $igrach){
                        /* Listam igrače */
                        echo "<div class='pool-player-list'>
                                <a class='pool-player-list-a' id='insertTim' href='#'>
                                    $igrach->ime $igrach->prezime
                                </a>
                                <input type='hidden' class='igracId' value='$igrach->id' />
                                <input type='hidden' class='brDresa' value='$igrach->brojDresa' />
                              </div>";
                    }

                ?>

            </div> 
```

我已经用变量检查了所有内容。一切都很好。

这`insert_tim.php`是发送服务器错误的页面。

```
<?php
global $wpdb;

$id = intval( $_POST['id'] );

$row = $wpdb->get_row("SELECT * FROM wp_pls_leaguemanager_person WHERE id = '$id'", ARRAY_A);

echo $row['ime'];

?> 
```

它适用于其他页面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:31:16.807

请仔细阅读[这篇](http://codex.wordpress.org/AJAX_in_Plugins)关于 WordPress 插件中的 AJAX 的文章。

您需要将 AJAX 请求发送到特殊脚本，而不是直接发送到您的插件！然后您使用操作处理请求。

但是你做了什么？- 你向你的脚本发送请求，所以它对 WordPress 一无所知:)。WordPress 必须包含您的插件，然后您的插件才能访问本机函数和类。

**更新。更详细的解释。**

AJAX 只是从给定的链接调用您的脚本。当您直接调用脚本（http://site.com/wp-content/plugins/myplugin/insert_tim.php）时，php 开始执行它，仅此而已！它不会启动 WordPress 引擎。所以 $wpdb 将是未定义的变量，在使用时会抛出异常（如果在您的 php 配置中禁用了异常显示，那么您只会看到“内部服务器错误 500”）。当然，如果您删除 $wpdb 使用 - 一切都会好起来的。

WordPress 的*ajaxurl (http://site.com/wp-admin/admin-ajax.php)*有什么变化？如果你打开这个文件 - 你会看到，它包含 WordPress 引擎负载：

```
/** Load WordPress Bootstrap */
require_once( dirname( dirname( __FILE__ ) ) . '/wp-load.php' ); 
```

因此，如果您将 ajaxurl 传递给您的 AJAX 调用 - 然后此脚本将加载 WordPress 引擎，然后使用操作 - 将调用您的函数并且您的函数将看到 $wpdb 类。

**记住规则：不要直接使用 AJAX 调用插件的 PHP 脚本。使用原生 WordPress 行为。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T08:11:04.327

我有同样的问题。实际上，AJAX 没有得到 $wpdb 对象。你需要在那里设置你的路径，它会正常工作。

```
require_once( 'path/to/wordpress/wp-includes/wp-db.php' );
if ( file_exists( 'path/to/wordpress/wp-content/db.php' ) )
    require_once( 'path/to/wordpress/wp-content/db.php' );

$wpdb = new wpdb( 'user', 'password', 'database', 'host' ); 
```

# javascript - 更新 jQuery .each() 中的加载栏

> ID：14334484
> 
> 赞同：2
> 
> 时间：2013-01-15T09:21:00.860
> 
> 标签：javascript, jquery, twitter-bootstrap

我确定这一定是一个常见问题，但经过大量搜索我找不到答案。我有一个 twitter-bootstrap 加载栏，我想在计算的每个阶段完成后对其进行更新。

这是更新加载栏的功能：

```
var lb = $('#loading-bar');
var lbc = 0;

function increment_loading_bar(pc) {
    setTimeout(function(){
        lbc = lbc + pc;
        lb.width(lbc+"%");;
    }, 1);
} 
```

更新栏的调用在 .each() 循环中

```
var inc = 100/array.length();

$.each(array,function(index,element){
    increment_loading_bar(inc/2);

    //
    //Gnarly processing ....
    //

    increment_loading_bar(inc/2);
} 
```

但是，这仅在所有处理完成后才会更新。执行代码时如何强制重绘条形图？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:49:35.517

> 正如我在我的问题中所说， /redraw/ 需要在代码执行时强制执行

据我所知，您只能通过偶尔暂停进程来间接强制重绘。例如像这样：

```
var inc = 100/array.length();
var processQueue = array;
var currentIndex;

setTimeout(runProcess, 5);

function runProcess() {
   var element = processQueue[currentIndex];

   // Process the element here
   // ....

   increment_loading_bar(inc);

   currentIndex++;

   if (currentIndex < processQueue.length) {
      setTimeout(runProcess, 5);
   } else {
      // processing has finished
   }
} 
```

这样，您可以在每一步之间给浏览器一些时间（在本例中为 5 毫秒）以重绘加载栏。

# sql - 如何在 PostgreSQL 中根据 XPath 结果连接表？

> ID：14334485
> 
> 赞同：1
> 
> 时间：2013-01-15T09:21:04.200
> 
> 标签：sql, xml, postgresql, select

我有一个表`views`，其中有一列包含 XML 文档（存储为`text`）。这是一个简化版本：

```
<?xml version="1.0"?>
<view>
  <image>
    <sequence>
      <param name="scan">129</param>
    </sequence>
  </image>
  <image>
    <sequence>
      <param name="scan">1</param>
    </sequence>
  </image>
  [...]
</view> 
```

另一个表包含 XML 中引用的扫描。如果目前重构为新表不切实际，如何在 SQL 查询中连接这两个表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:21:04.200

如果您的 PostgreSQL 已使用 编译`--with-libxml`，则以下查询应该可以工作：

```
SELECT ...
  FROM views
  JOIN scans ON scans.id = ANY (
           xpath(
               '/view/image/sequence/param[@name = "scan"]/text()',
                views.xml::xml)::text[]::int[])
; 
```

那是：

1.  投`views.xml`从`text`到`xml`。
2.  将所有扫描 ID 值作为`xml`using的数组获取`xpath()`。
3.  [将`xml`数组转换为一个数组，`text`然后转换为一个数组`int`](http://postgresql.1045698.n5.nabble.com/proposal-casting-from-XML-to-int-numeric-text-tp1979792p1979797.html)（您不能直接`xml[]`转换为`int[]`，至少在 PostgreSQL 9.2 中）。
4.  检查 XML 中的至少一个扫描 ID 是否匹配。

# haskell - 清除本地 cabal 存储库

> ID：14334490
> 
> 赞同：8
> 
> 时间：2013-01-15T09:21:25.960
> 
> 标签：haskell, cabal

在强行安装最新的“bytestring”包后，我偶然发现了一个依赖地狱。我想清除所有本地包，以便`cabal-install`之后可以重新使用它们。

这样做的正确方法是什么？有没有更好的方法来重新创建本地存储库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T09:47:40.317

在 OS X 上，您可以清除以下目录：

```
~/Library/Haskell/ghc-XXX/lib/ 
```

全局安装的包在里面，但它们通常由 Haskell 平台安装程序安装，因为默认情况下只为当前用户安装包：

```
/Library/Haskell/ghc-XXX/lib/ 
```

如果您使用的是 Windows 或 Linux，请在 ghci 中尝试以下代码（[源代码）：](http://www.haskell.org/haskellwiki/Cabal-Install)

```
:m System.Directory
getAppUserDataDirectory "cabal" 
```

那里的配置文件将告诉您将用户包安装到哪里。

# javascript - jQuery Accordion/Toggle Panel - 仅关闭/打开特定类

> ID：14334492
> 
> 赞同：0
> 
> 时间：2013-01-15T09:21:26.523
> 
> 标签：javascript, css, accordion, jquery

社区！

我现在真的需要你的帮助。我想制作一个可以打开所有选项卡的手风琴。通过搜索网络，我找到了一个很好的解决方案：

[http://jsbin.com/eqape/968/edit](http://jsbin.com/eqape/968/edit)

每个部分的第一个 Div-Container 是关闭/打开的那个。我想定义 3 个 div 容器。一个在顶部（始终显示），一个在中心（具有切换功能），一个在底部（始终显示）。这可能吗 ？我该怎么做？我是 jQuery 新手，所以这让我抓狂。

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:08:26.853

我觉得你太努力了。如果我理解正确，您只需要任何 .top 来切换相邻的 .content。由于我更熟悉在 JSFiddle 中工作，因此我将代码设置在那里：

[http://jsfiddle.net/SuyS2/1/](http://jsfiddle.net/SuyS2/1/)

```
$('.top').click(function () {
  $(this).next('.content').slideToggle();
}); 
```

如果我遗漏了什么，请告诉我。

更新：

如果您希望切换部分*和内部内容，您可以这样做：*

[http://jsfiddle.net/SuyS2/5/](http://jsfiddle.net/SuyS2/5/)

```
$('.section-heading').click(function () {
  $(this).next('.section-wrapper').slideToggle();
});

$('.top').click(function () {
  $(this).next('.content').slideToggle();
}); 
```

# xaml - 当为 windows8 应用程序 XAML 单击图钉时如何使信息框出现

> ID：14334495
> 
> 赞同：0
> 
> 时间：2013-01-15T09:21:32.563
> 
> 标签：xaml, windows-8, bing-maps

我是 Windows-8 应用程序和 xaml 的新手，我需要 bing 地图方面的帮助。

我正在尝试开发一个带有地图的高尔夫应用程序，该地图具有显示全国各地高尔夫球场的图钉。单击图钉时，应该会出现一个信息框，其中包含有关该特定高尔夫球场的一些概要和一个链接，该链接会将用户重定向到有关该高尔夫球场的页面。

我在网上找到的大多数示例都使用 JavaScript，因为我使用的是 XAML（桌面应用程序），所以我无法使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:37:20.203

所以处理**图钉点击事件**并将导航代码放在里面：

```
this.frame.Navigate(typeof(PageClass),parameter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:39:31.077

您应该检查[Bing Maps SDK for Windows Store apps](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)。

# iphone - 显示 Game Center GKMatchmakerViewController 会关闭其他视图

> ID：14334496
> 
> 赞同：1
> 
> 时间：2013-01-15T09:21:38.537
> 
> 标签：iphone, ios, game-center

尝试在我的游戏视图上显示 GKMatchmakerViewController 时遇到问题。

通常，我通过自动匹配 2 个对手以编程方式创建多人游戏，并且效果很好。

但是当我尝试显示标准的 Game Center Matchmaking 视图时，它会关闭我的游戏视图并将我推回菜单。

菜单视图 -> 游戏视图。

我认为问题可能是我的菜单视图充当我的主视图，并且在显示 Game Center 视图时删除了所有其他视图（因为当时只能显示一个视图控制器）。

我是否设置了我的视图层次结构错误？应该怎么做才能在显示游戏中心视图时不会关闭我的游戏视图？

## 编辑 - 使用调用 GKMatchMakerViewController 的代码进行更新

GameviewController 与当我想显示游戏中心匹配控制器时调用的方法

```
 - (void)presentCustomVSBattle {

    ourRandom = arc4random();
    [self setGameState:kGameStateWaitingForMatch];

   AppDelegate * delegate = (AppDelegate *) [UIApplication sharedApplication].delegate;

    [[GCHelper sharedInstance] findCustomMatchWithMinPlayers:2 maxPlayers:2 viewController:delegate.viewController delegate:self];
} 
```

// 这个方法在 GCHelper.m 中被调用

```
 - (void)findCustomMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCHelperDelegate>)theDelegate {

if (!gameCenterAvailable) return;

matchStarted = NO;
self.match = nil;
self.presentingViewController = viewController;
delegate = theDelegate;

if (pendingInvite != nil) {

    [presentingViewController dismissModalViewControllerAnimated:NO];
    GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
    mmvc.matchmakerDelegate = self;
      [presentingViewController presentViewController:mmvc animated:YES completion:nil];

    self.pendingInvite = nil;
    self.pendingPlayersToInvite = nil;
    } 
else {

        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
        request.minPlayers = minPlayers;
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
        mmvc.matchmakerDelegate = self;

         [presentingViewController presentViewController:mmvc animated:YES completion:nil];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:29:41.837

在您的情况下，dismissView Controller 调用看起来没有必要，请尝试摆脱它们:)

# android - 同时多语言和多主题

> ID：14334498
> 
> 赞同：1
> 
> 时间：2013-01-15T09:21:48.767
> 
> 标签：android

我正在开发一个具有多语言支持的应用程序（使用*/res/values-* ** 方式）并成功。然后我想使用 Holo 和下降的旧设备（例如 2.3.*）来使用默认设备（使用*/res/values-v11*方式）。

所以，我最终得到了一个类似于这个的结构（没有语言的结构是 EN，默认情况下）：

*   /res/值
*   /res/values-v11
*   /res/values-de
*   /res/values-de-v11
*   /res/values-es
*   /res/values-es-v11

...在每个我都有以下内容：

*   字符串.xml
*   主题.xml

... 其中*strings.xml*是定义本地化文本的位置，并且*Themes.xml*具有：

对于*非 v11*目录（旧设备）

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <style name="MyTheme" parent="@android:style/Theme">
        <!-- Any customizations for your app running on pre-3.0 devices here -->
    </style>
</resources> 
```

对于*-v11*目录（+3.0 设备）

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <style name="MyTheme" parent="@android:style/Theme.Holo">
        <!-- Any customizations for your app running on devices with Theme.Holo here -->
    </style>
</resources> 
```

记住将此属性添加到 AndroidManifest.xml 上的应用程序标记中

```
android:theme   ="@style/MyTheme" 
```

这适用于所有语言和所有设备，包括当前和旧版，以及正确的主题选择和一切。在多个物理设备中进行了测试。

**所以，问题：**

你不认为这是高度可维护的吗？我的意思是，对于每种语言，我们都有 2 个完全相同的 string.xml 文件，但是对于每个新文本，我们必须填写两次，从而增加了拼写错误的风险。如果你有*analytics.xml*，*styles.xml*，... 里面也会发生同样的情况

*使用strings.xml*在 Android 中进行如此出色的语言处理，是否有任何其他解决方法可以更好地使用这种多主题和多语言？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:42:46.753

我不确定你为什么需要类似的东西

```
values-de-v11 
```

我会使用这样的东西：

```
values
values-de
values-fr
values-es
values-cat
... 
```

并将翻译放入每个 strings.xml 文件中。另一方面，您还可以添加文件夹：

```
values
values-v11 
```

在里面你可以添加你的主题。

文件夹值应该同时具有默认语言（通常是英语）的 strings.xml 和没有 holo 的设备的后备主题文件。

您可以检查文档中的所有可能性：

[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# extjs4 - Extjs 4 Basic（无法加载图表）

> ID：14334500
> 
> 赞同：1
> 
> 时间：2013-01-15T09:21:52.997
> 
> 标签：extjs4

我只是在学习 ExtJs-4。

我被困在面板上创建图表栏。

这只是来自官方 Ext 网站的相同代码。

这是我的面板，其中包含创建图表、模型和商店的代码。

```
 Ext.define("park.view.mainPanel",{
    extend:'Ext.panel.Panel',
    alias: 'widget.mainPanel',
    title: 'edit User',
            initComponent: function(){
        Ext.define('WeatherPoint', {
            extend: 'Ext.data.Model',
            fields: ['temperature', 'date']
        });

        var store = Ext.create('Ext.data.Store', {
            model: 'WeatherPoint',
            data: [
                { temperature: 58, date: new Date(2011, 1, 1, 8) },
                { temperature: 63, date: new Date(2011, 1, 1, 9) },
                { temperature: 73, date: new Date(2011, 1, 1, 10) },
                { temperature: 78, date: new Date(2011, 1, 1, 11) },
                { temperature: 81, date: new Date(2011, 1, 1, 12) }
            ]
        });

         var chart = Ext.create('Ext.chart.Chart', {

           store: store,
            theme: 'Category1',
        });

        this.callParent(arguments);

    }

}); 
```

如果有人知道，这应该很容易。但很难将它修复为像我这样的noobie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:55:20.413

您应该添加`chart`为您的面板子项。尝试添加`this.items = [chart];`之前`this.callParent(arguments);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T17:26:12.637

您的图表定义中缺少图表轴和系列。

# jquery - 使用 jQuery 提交表单在 Internet Explorer 上不起作用

> ID：14334502
> 
> 赞同：0
> 
> 时间：2013-01-15T09:21:58.287
> 
> 标签：jquery, html, internet-explorer-9

我使用此代码将文件提交到我的网络服务器`jQuery`：

```
<input type="file" name="userfile" id="userfile" size="20" onChange="$('#ajaxupload').fadeIn();$(this).closest('form').submit(); return false;" style="display : none;" />
<input type="submit" value="Neue Datei hinzuf&uuml;gen" onclick="$('#userfile').click(); return false;" /> 
```

这可以正常工作`Firefox`，`Safari`但不能正常工作`Internet Explorer`，那么这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:30:47.700

`onChange`显然，您正在使用的那个版本的 IE 不支持。改用[jQuery`.change()`](http://api.jquery.com/change/) _

```
<script type="text/javascript">
    $('.userfile').change(function () {
        $('#ajaxupload').fadeIn();
        $(this).closest('form').submit(); 
        return false;
    });

    $('.submitUserFile').click(function () {
        $('#userfile').click();
        return false;
    });
</script>

<input type="file" name="userfile" id="userfile" size="20" style="display : none;" />
<input type="submit" id="submitUserFile" value="Neue Datei hinzuf&uuml;gen" /> 
```

# c - 两个空格作为 scanf 分隔符

> ID：14334505
> 
> 赞同：0
> 
> 时间：2013-01-15T09:22:10.067
> 
> 标签：c

我希望能够扫描这种格式的字符串

```
"hello world        !!!!" 
```

到

```
{"hello world", "!!!!"} 
```

这 2 个字符串用 1 个以上的空格分隔。我可以解析这个或至少检测scanf中的2个连续空格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:37:29.173

从您的问题来看，您似乎对有多个空格这一事实不感兴趣，而只是为了解析它们。

不要害怕！单个空格字符`*scanf`已经忽略了*所有*空格（包括`'\n'`, `'\r'`,`'\t'`和`'\v'`在“C”语言环境中）。因此，以最简单的形式，您可以这样阅读：

```
scanf("%s %s", str1, str2); 
```

当然，您需要进行错误检查。一种安全的方法是：

```
char str1[100];
char str2[100];

scanf("%99s", str1);
ungetc('x', stdin);
scanf("%*s");

scanf("%99s", str2);
ungetc('x', stdin);
scanf("%*s"); 
```

这是一种通常安全的方式（与您的特定问题无关）。

`ungetc`+`scanf("%*s")`忽略字符串的剩余部分（如果有）。请注意，您在第二个之前不需要任何空格，`scanf("%99s")`因为之前`scanf`已经忽略了所有空格`%s`（实际上在所有`%*`除了`%c`and之前`%[`）。

* * *

如果你真的想确保至少有两个空格，并且你坚持使用`scanf`，你可以这样做：

```
 char str1[100];
    char str2[100];
    char c;

    scanf("%99s", str1);
    ungetc('x', stdin);
    scanf("%*s");

    scanf("%c", &c);
    if (c != ' ')
        goto exit_not_two_spaces;
    scanf("%c", &c);
    if (c != ' ')
        goto exit_not_two_spaces;

    scanf("%99s", str2);
    ungetc('x', stdin);
    scanf("%*s");

    return /* success */
exit_not_two_spaces:
    ungetc(c, stdin);
    return /* fail */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:49:47.363

这段代码可以帮助你

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int main()
{
    char a_buf[5][100] = {0}, sep[3] ,*buf = a_buf[0];
    int i = 0;
    buf = a_buf[0];
    while (scanf("%s%2[ ]",buf,sep) > 1) {
        if (strlen(sep)==1)
        {
            buf += strlen(buf);
            *buf++ = ' ';
        }
        else
            buf = a_buf[++i];
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T09:29:59.843

根据 c++ 参考（[http://www.cplusplus.com/reference/cstdio/scanf/](http://www.cplusplus.com/reference/cstdio/scanf/)）

> 该函数将读取并忽略在下一个非空白字符之前遇到的任何空白字符（空白字符包括空格、换行符和制表符——参见 isspace）。格式字符串中的单个空格验证从流中提取的任意数量的空格字符（包括无）。

我认为你应该使用gets：[http](http://www.cplusplus.com/reference/cstdio/gets/) ://www.cplusplus.com/reference/cstdio/gets/然后解析返回的字符串。

编辑。使用 fgets()，而不是 gets()

# linux - ARM Linux 下 Poco 的定时器问题

> ID：14334516
> 
> 赞同：0
> 
> 时间：2013-01-15T09:22:36.980
> 
> 标签：linux, timer, poco-libraries

我正在使用 Poco 1.4.4 和 Debian Linux 进行嵌入项目。

从 SSH 终端启动我的软件，一切正常，但是当我从 init.d 脚本运行它并启动系统时，Poco 计时器挂起，但其余程序运行正常。

在 Timer-callback 函数中，我尝试连接到返回一些数据的远程 HTTP 服务器。

我不确定这是 Poco 问题、Linux 问题还是我的代码中的错误。

为什么从 SSH 启动一切正常而从 init.d 启动不起作用？你有什么主意吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:33:28.697

黑暗中的一枪，但是当回调被调用时，网络可能没有启动吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:42:59.087

正如 Martin 所说，这是一个 Linux 服务订单问题。用“S05MyService”更改“S03MyService”名称，解决了我的问题。谢谢。

# javascript - 如何使用 html5 和 javascript 在黑莓 10 中访问 api

> ID：14334526
> 
> 赞同：0
> 
> 时间：2013-01-15T09:23:07.193
> 
> 标签：javascript, html, cordova, blackberry-10

我是黑莓 10 的新手。我正在通过 phonegap 使用 html5 和 javascript 开发一个应用程序。当我在波纹模拟器中运行应用程序时，我无法从 api 获取数据。出乎意料的是，我得到了 xmlhttp 状态-> 0。

当我在浏览器上点击 api url 时，它工作正常。不知道具体是什么问题。

请帮助我如何访问blackberry10中的api？

我在这里附上我的代码。

HTML 代码：

```
<div data-role="page" id="homePage">
    <div data-role="header">
        <div>
            <div class="choose-city-head-A">
                <span ><img src="images/m.png" height="70%" style="margin-top:12px;margin-left:45%;" /></span>
                <span style="float:right; margin-top:25px; margin-right:20px;"><img src="images/close.png" height="40%" /></span>
                <span style=" float:right;margin-right:20px; margin-top:25px;"><img src="images/help.png" height="40%" /></span>
            </div>
            <div class="choose-city-head-B">
                <h2> Choose City </h2>
            </div>
        </div>
    </div>
    <div data-role="content">
        <div id="home_data" ></div>
    </div>
    <div data-role="footer" class="choose-city-head-A" data-position="fixed">
        <img src="images/prev_button.png" style="margin-left:90px;" />
        <img src="images/favourities.png" style="margin-left:60px;" />
        <img src="images/sms.png" style="margin-left:60px;" />
        <img src="images/next.png" style="margin-left:60px;" />
    </div>
</div> 
```

javascript代码：

```
var xmlhttp = new XMLHttpRequest();

function showHome()
{
    xmlhttp.open("GET", "url", true);
//  xmlhttp.setRequestHeader("Content-Type","text/xml");
    xmlhttp.send(null);
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4) {
            alert(xmlhttp.status); //status i am receiving is 0
            if (xmlhttp.status == 200)
            {
                var responsexml=xmlhttp.responseText;
                var xmlDoc=xmlhttp.responseXML;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:21:34.250

你的代码是正确的..

我之前也遇到过这个问题尝试再次安装模拟器..希望它能像对我一样工作......！！

干杯！！

# html - 三星 Galaxy Note 10.1 的机身宽度

> ID：14334528
> 
> 赞同：0
> 
> 时间：2013-01-15T09:23:16.227
> 
> 标签：html, css, galaxy-tab

我在平板电脑“Galaxy note 10.1”中显示[我的项目](http://www.kuenstleralm.com)页面时遇到问题。该页面没有正文元素的全宽背景图像，例如页脚元素。在每个浏览器中，这都运行良好，但在 Galaxy 平板电脑中却不行。我从未针对平板电脑进行过优化，也不知道如何找到解决此错误的方法。

有没有办法在 Galaxy Note 中将元素的宽度设置为 100%？

感谢 Piklis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:51:24.247

也许你在谈论

```
<meta name="viewport" content="width=device-width, target-densitydpi=device-dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
```

# javascript - 来自 json 文件的可视化搜索和数据

> ID：14334529
> 
> 赞同：1
> 
> 时间：2013-01-15T09:23:13.253
> 
> 标签：javascript, mysql, json, backbone.js

有人知道如何正确使用 VisualSearch（基于骨干网）吗？事实上，我有一个 jsp 文件，它从 mysql BDD 向我发回一个带有电子邮件和 ID 的 json 数组，我只是想让它们出现在我安装在第二个 jsp 页面中的 VisualSearch 框中，但我不知道该怎么做在 VS javascript 部分中：在方面匹配、值匹配之间非常迷失......如果有人知道......他会拯救我的一天;-) 提前谢谢。

# java - 超类中的 java EE 注入

> ID：14334530
> 
> 赞同：1
> 
> 时间：2013-01-15T09:23:17.627
> 
> 标签：java, dependency-injection

我正在尝试在超类中注入一个 bean，如下所示：

```
public class DsmCrudDaoProcuder 
{

    @Produces
    public static DsmCrudDao produceDao(InjectionPoint injectionPoint) {
        return ((CRUDSessionBase)injectionPoint.getBean()).createCrudDao();
    }
}

public abstract class CRUDSessionBase{

    @Resource public SessionContext context;

    protected static Log log = LogFactory.getLog(CRUDSessionBase.class.getName());
    protected static Log logger = LogFactory.getLog(CRUDSessionBase.class.getName());

    @Inject @New
    DsmCrudDao dao;

    /**
     * Get the concrete DAO
     * 
     * @return
     */
    protected abstract DsmCrudDao createCrudDao();

....
} 
```

这在部署时失败：

> WELD-001409 在注入点 [[field] @Inject com.windriver.dsm.ejb.CRUDSessionBase.dao] 具有限定符 [@Default] 的类型 [DsmCrudDao] 的不明确依赖项。可能的依赖项 [[Managed Bean [class com.windriver.dsm.labmanagement.dao.TECodeCoverageDao] 带有限定符 [@Any @Default]，Managed Bean [class com.windriver.dsm.enterprise.dao.BinaryGroupDao] 带有限定符 [@Any @Default]、Managed Bean [class com.windriver.dsm.labmanagement.dao.TeBlockCoverageDao] 带限定符 [@Any @Default]、Managed Bean [class com.windriver.dsm.enterprise.dao.DeviceSupportedServiceDao] 带限定符 [@Any @默认]， ....

错误列表中的所有 bean 都是`DsmCrudDao`.

有没有办法使这项工作？

# ios - 使用图标和文本创建 UIBarButtonItem

> ID：14334531
> 
> 赞同：1
> 
> 时间：2013-01-15T09:23:22.947
> 
> 标签：ios

我想创建一个 UIBarButtonItem，它的左侧有一个图标，右侧有一个文本。任何提示如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T09:28:07.447

Aligning text and image on`UIButton`配置它`contentEdgeInset`，`imageEdgeInsets`并`titleEdgeInsets`查看[Aligning text and image on UIButton with imageEdgeInsets 和 titleEdgeInsets](https://stackoverflow.com/questions/4564621/aligning-text-and-image-on-uibutton-with-imageedgeinsets-and-titleedgeinsets)

```
 UIImage *img = [UIImage imageNamed:@"08-chat.png"];

    UIButton *customBarBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    [customBarBtn setBackgroundImage:chatImage forState:UIControlStateNormal];
    [customBarBtn setTitle:@"Chat" forState:UIControlStateNormal];
    customBarBtn.imageEdgeInsets = UIEdgeInsetsMake(0, 0, 0, spacing);
    customBarBtn.titleEdgeInsets = UIEdgeInsetsMake(0, spacing, 0, 0);
    customBarBtn.frame = (CGRect) {
        .size.width = 100,
        .size.height = 30,
    };

    UIBarButtonItem *barButton= [[[UIBarButtonItem alloc] initWithCustomView:customBarBtn] autorelease]; 
```

# syntax-highlighting - WebStorm 为 Jade 配置检查支持

> ID：14334536
> 
> 赞同：0
> 
> 时间：2013-01-15T09:23:33.747
> 
> 标签：syntax-highlighting, pug, validation, webstorm

**有没有办法在[WebStorm](http://www.jetbrains.com/webstorm/)的[配置检查](http://www.jetbrains.com/webstorm/webhelp/inspections-2.html)中添加 Jade 支持？**

您可以通过单击右下角的*Yeoman lookalike来***配置检查***![在此处输入图像描述](../Images/5684f244998f762593fddb654aa68260.png)*

 *Jade 插件处于活动状态，但**配置检查**中没有 Jade ：

![在此处输入图像描述](../Images/90cb5fd8587155a2408ee7f6350a52ba.png)

这很烦人，因为当您有一个语法无效的翡翠模板（忘记逗号）时：

```
button(type='button' class='btn btn-primary') 
```

WebStorm 没有抱怨，但我在编译模板时遇到了一个严重的错误。更快地检测到此类错误会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:56:44.960

Jade 插件没有必须以神奇方式启用的隐藏功能；您想要的错误突出显示在当前版本中根本没有实现。欢迎您在[http://youtrack.jetbrains.com/提交功能请求](http://youtrack.jetbrains.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:44:24.440

使用最新 EAP 中新的“文件观察器”功能，可以让 WebStorm 在您更改文件时自动编译 Jade。一旦检测到错误，它将在输出窗口中显示错误。*

# html - 适用于所有屏幕尺寸分辨率的网站

> ID：14334540
> 
> 赞同：-3
> 
> 时间：2013-01-15T09:23:44.553
> 
> 标签：html, css

我想将我的网站调整为不同的屏幕分辨率。我已经像这样设置了我的css，但它不起作用：

```
body {
    background: #317070;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    line-height: 1;
    margin : 0;
    padding: 0;
    width:100%;
    height:100%;
} 
```

我应该怎么办 ？RQ：我检查了这个链接：[http ://css-tricks.com/resolution-specific-stylesheets/](http://css-tricks.com/resolution-specific-stylesheets/)

编辑

我也有

```
html {
    margin:0;
        padding:0;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:32:32.777

您可以使用溢出来阻止滚动：无；但在这种情况下，您将完全隐藏一些文本。您的目标是什么 - 也根据决议更改文本或什么？对于较小的屏幕，垂直滚动是很正常的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:56:37.133

你的问题有点有限，所以这是我来的

```
body,html {
  margin:0;
  padding:0;
  height:100%;
  width:100%;
  font-size:16px;
}
/* max-width of an image is 100% width, images will shrink at a smaller screen */
img { 
  max-width:100%; 
}
/* for example, smaller font-size at a lower resolution of smaller then 480px */
@media screen and (max-width:480px) {
  body { font-size: 0.8em; }
} 
```

对于移动屏幕，您可以查看视口：[视口元标记](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

# mysql - ODBC 调用失败。一般故障。

> ID：14334545
> 
> 赞同：0
> 
> 时间：2013-01-15T09:24:02.447
> 
> 标签：mysql, ms-access, odbc

我最近试图将 MYsql 数据库的后端连接到 MS Access 2007-2010 的前端。

我已经下载了 oracle MySQL ODBC 连接器，但它似乎无法连接。

失败消息非常通用，是否有确切的原因找出连接失败的原因。

# javascript - 如何在 javascript 中表达 3cos(30)？

> ID：14334547
> 
> 赞同：0
> 
> 时间：2013-01-15T09:24:19.290
> 
> 标签：javascript

看起来从 javascript 处理几何表达式的唯一方法是 Math 对象。

但是我不能表达 3cos(30) 虽然 cos(30) 可以表达为 Math.cos(30)。

如何在 javascript 中表达 3cos(30)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:25:41.870

是否`3cos(30)`意味着 30 的余弦的三倍？在这种情况下，您可以这样计算：

```
var result = 3 * Math.cos(30); 
```

编辑：请注意，`cos()`期望它的参数是弧度，而不是度数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:29:34.067

如果`30`是，您应该使用( [π](http://en.wikipedia.org/wiki/Pi) )`30 degrees`将其转换为弧度`Math.PI`

```
radians = degrees * (π/180) 
```

所以

```
30 * π/180 => 30° = π/6 
```

和你的公式

```
3 * Math.cos(Math.PI/6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:26:23.877

如果`3cos(30)`是`3 x Cos(30)`：

```
3 * Math.cos(30) 
```

# javascript - HTML5 地理位置不起作用，在某些浏览器中为 404

> ID：14334548
> 
> 赞同：1
> 
> 时间：2013-01-15T09:24:20.610
> 
> 标签：javascript, browser, geolocation

我有一个使用地理位置的网络应用程序。它适用于大多数位置的大多数浏览器，这很棒。但是有时我会收到 404 错误。我已将其附在下图中。

对地理定位函数的 javascript 调用是这样完成的......

```
navigator.geolocation.getCurrentPosition(successCallback, geo_error, { enableHighAccuracy: true, maximumAge: 600000, timeout: 600000 }); 
```

有谁知道为什么在某些情况下我会得到这个 404？是否由于此特定机器所在的网络条件？

![错误信息](../Images/03f3aa3f587d471f8e5b71d3a00e21c1.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:31:47.087

使用地理定位和启用 GPS 的应用程序时，您应该假设在某些情况下，地理定位*会*失败，并且您应该构建一个异常处理组件，如果地理定位确实发生错误，该组件不会失败。即使由于错误或用户拒绝浏览器提供 GPS 位置的权限而未正确获取当前 GPS 位置，您的应用程序仍应继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:17:49.683

恐怕我没有立竿见影的解决办法。在 Chrome 论坛中快速搜索显示此问题是最近出现的。您可能需要等待谷歌浏览器的升级。

[http://code.google.com/p/chromium/issues/detail?id=116986](http://code.google.com/p/chromium/issues/detail?id=116986)

# android - getFileDescriptor 在从扩展文件中读取 mp3 文件时返回 null

> ID：14334550
> 
> 赞同：10
> 
> 时间：2013-01-15T09:24:30.783
> 
> 标签：android, apk-expansion-files

我已经成功下载并存储了扩展文件。但是当我尝试播放里面的 mp3 时它崩溃了..

```
 ZipResourceFile expansionFile = APKExpansionSupport.getAPKExpansionZipFile(getApplicationContext(),
                    1, 0);

            InputStream fileStream = expansionFile.getInputStream("mysong.mp3");
            AssetFileDescriptor asd = expansionFile.getAssetFileDescriptor("mysong.mp3");
            MediaPlayer mediaPlayer = new MediaPlayer();
                    mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                    mediaPlayer.setDataSource(asd.getFileDescriptor(), asd.getStartOffset(), asd.getLength());
                    asd.close();
                    mediaPlayer.prepare();
                    mediaPlayer.start(); 
```

在这里，logcat 说输入流和文件描述符都是空的。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:40:03.557

最后它解决了..文件名应该是完整的路径..

```
AssetFileDescriptor asd = expansionFile.getAssetFileDescriptor("main.1.com.mypackage.app/mysong.mp3"); 
```

# database - Heroku 数据库缓存

> ID：14334552
> 
> 赞同：1
> 
> 时间：2013-01-15T09:24:32.493
> 
> 标签：database, ruby-on-rails-3, postgresql, caching, heroku

在起重机及以上的[Heroku DB 计划](https://addons.heroku.com/heroku-postgresql#basic)中，缓存不是 0 字节。

这是否意味着在这些计划中，如果代码有

```
User.find(10) 
```

例如，那么查询的结果会被保存吗？从而提高数据库查询的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:38:14.763

PostgreSQL 没有查询结果缓存。除非 Heroku 在他们的自定义内部 PostgreSQL 分支中添加了一个（非常不可能），否则它很可能是数据库可用的磁盘缓存，用于存储从磁盘读取的表和索引的内容，因此不必重新读取它们。再次访问。这是块级缓存，而不是查询级或行级缓存。

大量用于缓存的 RAM 会对 PostgreSQL 性能产生巨大影响，尤其是在 I/O 性能较差的设置（如 Amazon EC2）上。

一些应用程序级别的工具，如 Hibernate ORM 和其他 JPA 实现*确实*维护查询结果缓存，或者更确切地说是实体缓存。我不知道 ActiveRecord 是否这样做，但如果这样做，它将在应用程序服务器端，而不是数据库端。

# c# - TextRenderer 不绘制一些符号字符

> ID：14334553
> 
> 赞同：1
> 
> 时间：2013-01-15T09:24:35.560
> 
> 标签：c#, drawtext, text-rendering

我正在尝试同时使用`Graphics.DrawString`和绘制一些文本`TextRenderer.DrawText`。我使用*Symbol*字体，但输出不一样 -`TextRenderer`不处理符号“小于或等于”、“大于或等于”和“不等于”（字节值`0xA3`、、、`0xB3`）`0xB9`- 它绘制框而不是他们。但是，其他特殊符号被正确绘制 - 例如“平方根”`(0xD6).`我在两种方法中都使用相同的字体。我该怎么做才能`TextRenderer`正确绘制这些符号？

**编辑：**

我正在运行带有捷克语版本的 .NET 4、Windows 7 Ultimate（但我已经用英语版本对其进行了测试，并且看起来相同）。

以下是我的测试应用程序的代码：

```
private void panelDrawString_Paint( object sender, PaintEventArgs e )
{
    byte[] array = new byte[] { 0xA3, 0xB3, 0xB9, 0xA4, 0xD6, 0xB4, 0xB0 };
    string s = new string( array.Select( b => (char) b ).ToArray() );

    using( StringFormat sf = StringFormat.GenericDefault )
    using( Font font  = new Font( "Symbol", 14, FontStyle.Regular ) )
    {
        sf.Alignment = StringAlignment.Center;
        sf.LineAlignment = StringAlignment.Center;

        e.Graphics.DrawString( s, font, SystemBrushes.WindowText, panelDrawString.ClientRectangle, sf );
    }
}

private void panelTextRenderer_Paint( object sender, PaintEventArgs e )
{
    byte[] array = new byte[] { 0xA3, 0xB3, 0xB9, 0xA4, 0xD6, 0xB4, 0xB0 };
    string s = new string( array.Select( b => (char) b ).ToArray() );

    using( Font font  = new Font( "Symbol", 14, FontStyle.Regular ) )
    {
        TextRenderer.DrawText( e.Graphics, s, font, panelTextRenderer.ClientRectangle, panelTextRenderer.ForeColor );
    }
} 
```

这是输出：

![上面代码的输出](../Images/84ace4ab6f5281b5dbf5d55dc46a45b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T17:50:10.097

发布回复可能有点晚。

[如此链接](http://www.codeproject.com/Questions/557898/CustomplusDrawingplusTextplususingplusspecificplus)中所述， GdiCharSet 是您的问题的原因。Microsft 承认它不支持每个平台的所有版本。

字体由字形（如平方根的基数的“√”）和代码页（如平方根的基数的 0xD6）组成。矩形字形是为任何未知的代码页值绘制的。

但是，在您的情况下，TextRenderer 和 DrawString 使用的代码页值与您认为使用的代码页值不同。

您创建的包含字符的字符串还将代码页转换为 UFT16。这意味着当值被类型转换为 char 值并放置在字符串中时，值 0xA3 将转换为[0x2264 。](http://www.fileformat.info/info/unicode/char/2264/index.htm)

DrawText 和 DrawString 都使用不同的方法来打印字形。DrawString 打印您的预期结果，因为它将命名值“小于或等于”转换为字形。然而，DrawText 打印属于 0x2264 的字形。

出于您的目的，您应该只使用 DrawString。

# ruby-on-rails - rmagick 和 imagemagick 有什么区别？

> ID：14334556
> 
> 赞同：1
> 
> 时间：2013-01-15T09:24:58.880
> 
> 标签：ruby-on-rails

我需要安装 rmagick 才能在 windows 平台上安装 imagemagick 吗？它们如何相互关联？谁能帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:31:13.263

[`rmagick`](http://rmagick.rubyforge.org/)是允许使用 ImageMagick 图像处理例程的 Ruby 库/包装器。

如果您只是想要 ImageMagick 及其命令行实用程序，如`convert`,`mogrify`等，那么您当然不需要`rmagick`- 只需安装[ImageMagick](http://imagemagick.org)。

如果您想从 Ruby 或 Ruby on Rails 操作图像，那么您需要两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:32:06.573

不，我认为你有相反的方式，你需要先安装 imagemagick，然后安装 rmagick。

Rmagic 是在 Ruby 中使用 imagemagick 的 Ruby 扩展。另一方面，Imagemagick 是实际的“程序”。

您应该查看本指南：[http ://rmagick.rubyforge.org/install-faq.html](http://rmagick.rubyforge.org/install-faq.html)

> 首先你必须安装 ImageMagick 或 GraphicsMagick，这些库需要很多其他的库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T09:32:24.617

rmagick 是允许您与 ImageMagick 库交互的 Ruby gem（它是二进制代码，可以从命令行运行）

因此，仅当您想从 Ruby 代码中使用 ImageMagick 时才需要 rmagick。（并且必须安装 ImageMagick）

使用 rmagick 不是强制性的，但如果您不想使用它，则必须自己编写对命令行工具的所有调用。

# sql - 具有大量记录的表的分区视图和性能

> ID：14334558
> 
> 赞同：1
> 
> 时间：2013-01-15T09:25:01.770
> 
> 标签：sql, sql-server

目前我正面临查询和存储过程的性能问题。以下是场景：

我们在一个数据库中有 3-4 个表 ( `SQL Server 2000 SP4`)，它们有大量的记录。其中一张表有超过 2500 万条记录。这些表维护着销售记录，并且每天都有数千条记录添加到其中。每当执行存储过程时，都需要 15-30 分钟才能完成。表上有 3-4 个连接。用户经常抱怨它。索引是正确的。为了提高性能，我们实现了分区视图。该解决方案是通过参考[MSDN上的以下文章实现的](http://msdn.microsoft.com/en-us/library/ms190019%28v=sql.105%29.aspx)

我们已按年拆分销售记录，性能有所提高，查询/存储过程现在需要 3-5 分钟才能运行。为了进一步提高性能，我们按月拆分销售记录。我们维护了 4 年的数据，现在我们接近拥有 48 个销售数据表（按月拆分销售数据后）。我期待这可以提高性能。但这并没有发生。该查询的执行速度比前一个（按年拆分数据）慢得多，这让我感到惊讶。同样在查看查询计划后，我发现它正在对所有 48 个销售表进行索引扫描，而不是仅扫描相关表。例如，当查询存储期间`19-NOV-2012`和的过程时`20-DEC-2012`，它应该只考虑 2 个表`NOV-2012` 和`DEC-2012`. 但它正在考虑所有 48 张桌子。所以我的问题是：

1.  为什么要考虑所有表而不是只考虑相关表。例如在上面的例子中`NOV-2012`和`DEC-2012`

2.  为什么按年逻辑（按年拆分销售记录）比按月逻辑（按月拆分销售记录）表现更好

以下是分区视图的代码。
例如年 其他年份被省略。

```
 SELECT * FROM tbl_Sales_Jan2010
UNION ALL
SELECT * FROM tbl_Sales_Feb2010
UNION ALL
SELECT * FROM tbl_Sales_Mar2010
UNION ALL
SELECT * FROM tbl_Sales_Apr2010
UNION ALL
SELECT * FROM tbl_Sales_May2010
UNION ALL
SELECT * FROM tbl_Sales_Jun2010
UNION ALL
SELECT * FROM tbl_Sales_Jul2010
UNION ALL
SELECT * FROM tbl_Sales_Aug2010
UNION ALL
SELECT * FROM tbl_Sales_Sep2010
UNION ALL
SELECT * FROM tbl_Sales_Oct2010
UNION ALL
SELECT * FROM tbl_Sales_Nov2010
UNION ALL
SELECT * FROM tbl_Sales_Dec2010 
```

以下是表结构。

```
CREATE TABLE [dbo].[tbl_Sales_Jan2010](
    [SalesID] [numeric](10, 0) NOT NULL,
    [StoreNumber] [char](3) NOT NULL,
    [SomeColumn1] [varchar](15) NOT NULL,
    [Quantity] [int] NOT NULL,
    [SalePrice] [numeric](18, 2) NOT NULL,
    [SaleDate] [datetime] NOT NULL,
    [DeptID] [int] NOT NULL,
    [CatCode] [char](3) NOT NULL,
    [AuditDate] [datetime] NOT NULL CONSTRAINT [DF_tbl_Sales_Jan2010_EditDate]  DEFAULT (getdate()),
    [SomeColumn2] [varchar](15) NULL,
    [SaleMonthYear] [int] NULL CONSTRAINT [DF__tbl_Sales__SaleY__Jan2010]  DEFAULT (12010),
    [SaleDateInIntFormat] [int] NULL,
 CONSTRAINT [PK_tbl_Sales_Jan2010] PRIMARY KEY CLUSTERED 
(
    [SalesID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF
GO
ALTER TABLE [dbo].[tbl_Sales_Jan2010]  WITH CHECK ADD CHECK  (([SaleMonthYear] = 12010)) 
```

以下是查询

```
SELECT     SUM(C.Quantity) as total
    FROM         Productdatabase.dbo.tbl_Product A , Productdatabase.dbo.tbl_Product_Category B, XDatabase.dbo.vw_Sales_Test C, tbl_Store D
    WHERE     A.ProductID = B.ProductID AND B.CategoryID = @CateID
    AND C.SomeColumn = A.PRoductCode
    AND D.StoreCode = C.StoreNumber
    AND D.country = @country
    AND D.status = 0
    And C.SaleMonthYear between @BeginMonthYear and @EndMonthYear               
    AND C.SalDate between @FromSaleDate and @ToSaleDate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:28:39.760

设置分区的人并没有真正想到他在做什么。除了不使用分区（这是一个 SQL Server 功能），很可能是为了成本......

```
SELECT * FROM tbl_Sales_Jan2010 
```

在联合中添加 WHERE 条件，然后查询分析器可以排除由于错误的 where 子句而不相关的表。即添加：

```
(([SaleMonthYear] = 12010 
```

在那里。

其次，解决您的其他问题。真的。要点是：

> 我们在一个数据库（SQL Server 2000 SP4）中有 3-4 个表，它们有大量的记录。其中一张表有超过 2500 万条记录。

让我发笑。2500万不算小，不算小，但“休”是什么？我的意思是，我使用的表格每天添加数亿行并将数据保留 2 年。2500 万是中端服务器可以轻松处理的。我建议你要么有坏硬件（我的意思是坏的），要么有其他事情发生。

设计问题如：

```
[SaleMonthYear] 
```

这不应该存在 - 它应该是 SaleYearMonth，因此您可以进行范围测试（在 201005 和 201008 之间），而您现在无法有效地进行该测试，并且如果您曾经使用它，那么您将完全破坏任何索引排序。

这太荒谬了，因为这是一个你完全没有收获的数字。

```
Whenever a stored procedure is executed it takes 15-30 minutes to complete 
```

让我在这里说清楚。在这样的情况下可接受的中档硬件（即适当的服务器、32-64gb 内存、一打到 24 个高速磁盘）上，这不可能需要 15 到 30 分钟。不是你在那里写的代码。

除非你有锁拥塞（糟糕的应用程序设计）或服务器过载的其他东西（糟糕的应用程序设计/糟糕的管理）。我希望这样的查询具有适当的索引，以低于一分钟的速度返回。

无论如何，分区通过快速消除大量检查来工作 - 并且在您的情况下也是/主要是删除优化（您可以只删除表，不需要删除语句进行硬索引更新）。但是，您实现它的方式不是 MS sasys 应该完成的方式，不是逻辑所说的应该完成的方式，并且不会给出任何结果，因为您的分区未集成到查询中。

如果您查看表和查询，它仍然必须检查每个表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:30:49.387

从您引用的同一篇 MSDN 文章中：

> 分区视图不需要 CHECK 约束来返回正确的结果。但是，如果尚未定义 CHECK 约束，则查询优化器必须搜索所有表，而不是仅搜索那些覆盖分区列上的搜索条件的表。如果没有 CHECK 约束，视图的运行方式与任何其他带有 UNION ALL 的视图一样。查询优化器不能对存储在不同表中的值做出任何假设，也不能跳过搜索参与视图定义的表。

在您的问题中，您指定了一个日期范围为 2012 年 11 月 19 日至 2012 年 12 月 20 日的查询。我假设这将是 SaleDate 列中包含的值，但您的约束是 SaleMonthYear 列。

您确定定义的约束是正确的吗？您也可以发布您的查询吗？

拉吉

# mysql - 使用 sqlalchemy 和 pyro 进行会话管理

> ID：14334561
> 
> 赞同：2
> 
> 时间：2013-01-15T09:25:10.407
> 
> 标签：mysql, session, sqlalchemy, pyro

我实际上是在使用 SQLAlchemy 和 MySQL 和 Pyro 来制作服务器程序。许多客户端连接到此服务器以发出请求。这些程序仅提供来自数据库 MySQL 的信息，有时还会进行一些计算。

为每个客户端创建一个会话还是为每个客户端使用相同的会话更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:24:54.237

你想要的是一个[`scoped_session`](http://docs.sqlalchemy.org/en/latest/orm/session.html#contextual-thread-local-sessions).

好处是（与客户端之间的单个共享会话相比）：

*   无需锁定
*   支持的交易
*   到数据库的连接池（由 SQLAlchemy 隐式完成）

**如何使用它**

您只需创建`scoped_session`：

```
Session = scoped_session(some_factory) 
```

并在您的 Pyro 方法中访问它：

```
class MyPyroObject():
    def remote_method(self):
         Session.query(MyModel).filter... 
```

**在幕后**

上面的代码保证了 Session 是根据需要创建和关闭的。会话对象在您第一次在线程中访问时立即创建，并将在线程完成后被删除/关闭（[ref](http://docs.sqlalchemy.org/en/latest/orm/session.html#thread-local-scope)）。由于每个 Pyro 客户端连接在默认设置下都有自己的线程（不要更改它！），每个客户端将有一个会话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T14:14:17.383

我能尝试的最好的方法是在每个客户的请求中创建新的会话。我希望表演不会受到惩罚。

# freeze - STS（Springsource Tool Suite）冻结几秒钟

> ID：14334562
> 
> 赞同：1
> 
> 时间：2013-01-15T09:25:14.827
> 
> 标签：freeze, sts-springsourcetoolsuite

我正在使用基于 Eclipse 4.2.1 的 STS 3.1.0，但我遇到了一个烦人的问题：当我更改活动编辑器选项卡时它冻结了。

为了解决这个问题，我编辑了*artifacts.xml*（你可以在你的 STS 安装文件夹中找到它），搜索*firefox*并评论了两个找到的与 firefox 相关的条目（我找到了两个，也许你只有一个或两个以上） . 之后，我的 STS 不再冻结。

我希望这有帮助。

# c# - Windows 应用商店应用程序中的内存管理

> ID：14334568
> 
> 赞同：2
> 
> 时间：2013-01-15T09:25:30.877
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps

我试图在图像被一一加载到内存中时释放内存。

我正在处理图像幻灯片，所有图像都与列表绑定。当播放幻灯片图像在内存中一一加载时，现在我尝试在显示第二张图像时将第一张图像从内存中删除。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:26:34.370

删除所有对 image1 的引用，处理需要处理的内容并等待 GC 发挥作用。

# django - 使用表单向导时获取 url 参数

> ID：14334570
> 
> 赞同：0
> 
> 时间：2013-01-15T09:25:37.747
> 
> 标签：django

当我使用表单向导时，有没有办法在我的 url 中传递参数？

```
 url(r'^foo/(?P<slug>[a-z0-9-]+)/add_bar/$',
        AddBarWizard.as_view([AddBarForm1, AddBarForm2,
        AddBarForm3], template_name='add-Bar.html'),
        name='add_bar'), 
```

覆盖 get() 方法，我有我的请求，但 GET 是空的，调试中的任何内容都没有给我我正在等待的 slug。

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:43:18.720

抱歉，我的 slug 在我的 kwargs 中，不在请求中。GET Oo

然后，我没事，我有我的蛞蝓:)

# python - 如何检查列表索引是否存在

> ID：14334586
> 
> 赞同：1
> 
> 时间：2013-01-15T09:26:40.863
> 
> 标签：python, list

我有以下列表

```
a = ['a','c','d'] 
```

我需要检查列表索引 4（或任何索引）是否存在于列表中。是否有类似于 python 中的 php [isset](http://php.net/manual/en/function.isset.php)的方法（不使用异常处理）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T09:27:28.010

```
if len(a) > 4:
    # list contains fourth element, a[4] 
```

或者

```
try:
    a[4] # do something with a[4]
except IndexError:
    print "there is no element a[4]" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T09:27:48.157

您可以使用`len()`来检查索引是否存在。

作为`len(list)`返回类似的东西`last_index+1`：

```
In [18]: a = ['a','c','d']

In [19]: len(a)-1 > 4  #or len(a)>4
Out[19]: False

In [20]: len(a)-1 > 2
Out[20]: True 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T09:28:24.343

您可以随时检查：

```
if index < len(a):
    # do stuff 
```

# applescript - 查找与 Applescript 规则匹配的文件名

> ID：14334587
> 
> 赞同：1
> 
> 时间：2013-01-15T09:26:44.290
> 
> 标签：applescript

客户有一个巨大的 WordPress 上传文件夹，每个文件有 7 或 8 个大小版本。

我正在寻找过滤掉`-NNNxNNN`作为文件名一部分的所有图像 - “NNN”是任意数字。例如：

*   原上传文件：`7Metropolis711.jpg`
*   相同文件的调整大小版本示例：`7Metropolis711-792x373.jpg`

我为此使用Automator，我只是在寻找Applescript以从输入的文件文件夹中过滤掉这些文件.. IE：

![在此处输入图像描述](../Images/40e45fd17453aa5378195e795e49a428.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:05:15.283

试试这个。您可以看到一个处理程序“isFormatNNNxNNN(fileName)”，它测试您的格式的文件名。显然删除了代码的前 2 行。它们被使用，所以我可以在 AppleScript 编辑器中测试它。它们应该等于您在 Automator 中的输入变量。

***编辑***：根据您的评论，我修改了脚本以在文件名中包含多个“-”。现在我开始查看文件扩展名前面的文本，因为我假设您的格式是文件名中的最后一个字符。

它在 Automator 中不起作用，因为您必须在代码周围放置“on run {input, parameters}”。我现在已经这样做了，所以只需将其复制/粘贴到 automator 中。

```
on run {input, parameters}
    set newList to {}
    repeat with aFile in input
        if not (my isFormatNNNxNNN(aFile)) then set end of newList to (contents of aFile)
    end repeat
    return newList
end run

on isFormatNNNxNNN(theFile)
    set theBool to false
    try
        tell application "System Events"
            set fileName to name of theFile
            set fileExt to name extension of theFile
        end tell

        set endIndex to (count of fileExt) + 2
        set nameText to text -(endIndex + 7) thru -endIndex of fileName
        if nameText starts with "-" then
            if character 5 of nameText is "x" then
                -- test for numbers
                text 2 thru 4 of nameText as number
                text 6 thru 8 of nameText as number
                set theBool to true
            end if
        end if
    end try
    return theBool
end isFormatNNNxNNN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:58:34.630

这是另一种方法：

```
on run {input}
    set newList to {}
    repeat with aFile in input
        tell application "System Events" to set fileName to name of aFile
        try
            set variableName to do shell script "echo " & quoted form of fileName & " | grep -Eo [0-9]{3}x[0-9]{3}"
        on error
            set end of newList to (aFile's contents)
        end try
    end repeat
    return newList
end run 
```

![在此处输入图像描述](../Images/039765a981b12a6b7ff23f6f4a53c884.png)

# java - 获取和设置方法不改变数组

> ID：14334589
> 
> 赞同：0
> 
> 时间：2013-01-15T09:26:50.733
> 
> 标签：java, arrays, class

我扩展了一个类，希望通过使用 set1sub(sub.local) 方法来存储一个全局数组（使类中的数组被另一个对象看到）

```
public class BattleShipsClient extends ShipLocations implements Runnable, BattleShipConstants
{

BattleShipsClient()
{ 
}

public void placeBoard(int player) throws IOException// this is only called once and not updated when clicked again 
{
    while(getLocations())

    {
        while(isWaiting())//true
        {
            toServer.writeInt(player);
    int row = getRowSelected();
    int col = getColumnSelected();
    int choice=Integer.parseInt(JOptionPane.showInputDialog("Please 1 for a sub, 2 for a battleship and 3 for a destroyer"));
    clickCount ++;

    if(clickCount >2)
    {
        setLocation(false);
        continueToPlay=true;
    }

    if (choice ==1 &&sub.placed==false)
    {
        String orientation =JOptionPane.showInputDialog("please enter your orientations");

        if(orientation.equalsIgnoreCase("h"))
        {

            //row os the same
            //column number will be sent, then plus one on the other side
            sub.local = new int[2][2];
            sub.local[0][0] =row;
            sub.local[0][1]=col;
            sub.local[1][0]=row;
            sub.local[1][1] =col+1;

            toServer.writeInt(row);
            toServer.writeInt(col);

            toServer.writeChar('s');

            sub.placed=true;
            setp1sub(sub.local);
                          /*setp1sub(new int[][]{{row,col},
                    {row,col+1}});*/

            grid[row][col+1].setToken(getMyToken());

        } 
```

然后我有一个船舶位置类，但是当我创建船舶位置类的新对象并尝试读取该数组时，它总是设置为 [[0, 0], [0, 0]]，我尝试将其设为静态和原子

```
public class ShipLocations {

int [][] p1sub;

public ShipLocations()
{
    p1sub = new int[2][2];
}
public int[][] getp1sub()
{
    return p1sub;
}
public void setp1sub(int[][] local) {
    for (int i = 0;i <local.length;i++)
    {
        for(int j = 0;j<local.length;j++)
        {
            p1sub [i][j]= local[i][j];
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:11:47.403

每当您创建 ShipLocations（或子类）的新实例时，都会调用构造函数，在您的情况下，它会重新初始化 p1sub 数组。

在您的设计中，您过度使用继承。您不应该仅仅为了使用它的方法和变量而从一个类继承。

在类中存储全局变量：

```
public class ShipLocations {
 static int [][] p1sub;
 static{
  p1sub = new int[2][2];
 }
 public static void setp1sub(...){...}
 public static int[][] getp1sub(){...}
} 
```

然后通过类名使用它而不是创建实例：

```
int [][] x = ShipLocations.getp1sub(); 
```

尽管应尽可能避免使用全局变量。它被认为是糟糕的设计，并且在重用代码时可能会成为问题。正确的做法是将 ShipLocations 对象作为 BattleShipsClient 中的局部变量，并在初始化新实例时设置它。然后，您将首先创建一个公共 ShipLocation 对象并将其交给应该看到相同数组的每个客户端。

# ios - 如何防止 uitabbaritem 将我带到“root”控制器？

> ID：14334592
> 
> 赞同：0
> 
> 时间：2013-01-15T09:27:04.337
> 
> 标签：ios, uitabbar, uitabbaritem, pushviewcontroller

在我的应用程序中，我有几个 uiTabBarItems（如搜索、项目列表、帐户）。当我单击帐户时，用户应该输入凭据以登录。成功登录后，tabbaritem 的名称被更改并推送新的视图控制器（配置文件）。但是，当我单击配置文件 tabbaritem 时，会显示登录控制器（该选项卡分支的根目录）。有没有办法禁用这个导航？

![在此处输入图像描述](../Images/f798f20b306b0b84613cf39efb13da00.png)

![在此处输入图像描述](../Images/6542116197eec1ebfd560e77b70b6a1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:43:53.157

将导航控制器放在标签栏控制器中。也就是说标签栏中的视图将有一个导航控制器。`tabBar:didSelectItem:`您可以使用委托控制标签栏操作。希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:14:21.697

好的，我终于设法解决了这个问题（在 Prajwal 提供的答案的帮助下，你得到了 +1 的帮助）来解决这个问题。

我所要做的就是使用以下代码删除索引 0 处的导航跟踪（因此我的登录控制器从导航堆栈中删除）：

```
NSMutableArray *navigationArray = [[NSMutableArray alloc] initWithArray: self.navigationController.viewControllers];

// [navigationArray removeAllObjects];    // This is just for remove all view controller from navigation stack.
[navigationArray removeObjectAtIndex: 2];  // You can pass your index here
self.navigationController.viewControllers = navigationArray; 
```

我在这里找到[从导航堆栈中删除视图控制器](https://stackoverflow.com/questions/10281545/removing-viewcontrollers-from-navigation-stack)

# testng - TestNG：如何知道 DataProvider 何时开始和结束调用方法

> ID：14334593
> 
> 赞同：0
> 
> 时间：2013-01-15T09:27:10.623
> 
> 标签：testng

我正在使用 TestNG 的数据提供程序功能。我需要介于`BeforeMethod`和之间的东西`BeforeClass`。

`DataProvider`调用的每个项目，`BeforeMethod`但我想知道何时`DataProvider`开始将项目发送到方法以及何时完成。

看起来这`BeforeClass`在链条中太高了。中间有什么东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:19:40.480

没有这样的钩子，但您可以通过创建“假”数据提供者来轻松插入自己的钩子，这些提供者会在调用真正的数据提供者之前调用您的钩子。

```
@DataProvider
public Object[][] fakeDp() {
    // invoke before data provider method
    result = invokeRealDataProvider();
    // invoke after data provider method
    return result
}

@Test(dataProvider = "fakeDp") { ... } 
```

至于实现，您可以创建自己的 @BeforeDataProvider 注释并在您的 fakeDp() 中自己查找并在您的测试方法中指定它：

```
@RealDataProvider(dataProvider = "realDp")
@Test(dataProvider = "fakeDp") { ... } 
```

然后你的 fakeDp() 只需要查找 @RealDataProvider 注释来找出它应该调用哪个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:26:45.440

AFAIK，没有这样的钩子。我能想到的解决方法是，如果数据中传递了一些东西，告诉我我是第一个，我是最后一个，基于它你可以开始和结束你的过程..或者保存数据数组的大小，递增计数每个方法运行（在 beforemethod 中），检查 beforemethods 中的第一个和最后一个计数（与之前保存的大小相比）并执行所需的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T11:22:11.623

请使用 IDataProviderListener 跟踪 DataProvider 方法的开始/结束。看起来 IDataProviderListener 完全符合主题启动器的需求。IDataProviderListener 有两个方法 beforeDataProviderExecution 和 afterDataProviderExecution。当 TestNg 准备执行方法时调用 beforeDataProviderExecution，并且在所有准备执行的测试之后（在任何测试开始之前）调用 afterDataProviderExecution。例子：

```
import org.testng.annotations.DataProvider;
import org.testng.annotations.Listeners;
import org.testng.annotations.Test;

@Listeners(CustomDataProviderListener.class)
public class demo {

    @DataProvider
    public Object[] integerDataProvider() {
        return new Integer[]{1, 2};
    }

    @Test(dataProvider = "integerDataProvider")
    public void test1(Integer value) {
        System.out.println(value);
    }
}

import org.testng.IDataProviderListener;
import org.testng.IDataProviderMethod;
import org.testng.ITestContext;
import org.testng.ITestNGMethod;

public class CustomDataProviderListener implements IDataProviderListener {
    @Override
    public void beforeDataProviderExecution(IDataProviderMethod iDataProviderMethod, ITestNGMethod iTestNGMethod, ITestContext iTestContext) {
        System.out.println("CustomDataProviderListener -> beforeDataProviderExecution");
    }

    @Override
    public void afterDataProviderExecution(IDataProviderMethod iDataProviderMethod, ITestNGMethod iTestNGMethod, ITestContext iTestContext) {
        System.out.println("CustomDataProviderListener -> afterDataProviderExecution");
    }
}

output:
CustomDataProviderListener -> beforeDataProviderExecution 
CustomDataProviderListener -> afterDataProviderExecution 

1
2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-13T20:33:42.660

BeforeClass 似乎确实是您的最佳选择。如果您想分组调用测试，可以缩小 BeforeClass 的范围。

```
 @BeforeClass(groups = "dataProvider")
 public void dataProviderBeforeMethod() {
   //do something
 }
 @Test(groups = "dataProvider", dataProvider = "dataProviderClass", threadPoolSize = 10)
 public void testWithdataProvider(){
   //test something
 }
 @DataProvider(name = "dataProviderClass", parallel = true)
 private Iterator<Object[]> dataProviderClass() {
   List<Object[]> myData = new ArrayList<>();
     //setup data
   return myData.iterator();
 } 
```

# delphi - 如果列标题是垂直打印机，FastReport CrossView 无法正确计算列宽

> ID：14334610
> 
> 赞同：1
> 
> 时间：2013-01-15T09:28:07.037
> 
> 标签：delphi, delphi-xe2, fastreport

我有一个带有长列名的 FastReport CrossTab 报告，如果我要打印它，它会扩展到多个页面。我想也许我可以旋转列标题以节省一些空间。但是 FastReport 不能正确计算列宽，生成的报告如下所示：

![在此处输入图像描述](../Images/3ee4fdd5e6c2a2a571ffd5a803ae2c9a.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:14:53.930

我通过开票从 Fast-Report 网站获得了很好的[帮助](http://support.fast-report.com/)。这似乎是您可能需要在那里提出的问题。

# c++ - 如何在 C++ 套接字程序中检查已连接客户端的可用性

> ID：14334614
> 
> 赞同：1
> 
> 时间：2013-01-15T09:28:18.617
> 
> 标签：c++, sockets, client-server

我用 C++ 编写了一个套接字客户端服务器程序。该程序运行良好，我现在要做的是定期检查连接的客户端是否可用。我知道可以在服务器程序中使用 while(true) 循环来完成。但它会使用更多的cpu资源。有没有其他有效的方法来检查客户端的可用性？我听说过一种叫心跳的东西。这对我有帮助吗？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:01:13.410

根据定义，客户端是“连接的”，它是“可用的”，否则它不会是“连接的”。如果您需要持久连接，只需使用提供持久性的传输协议（如 TCP）并让 TCP 完成其工作。它自己的保持活动和重传定时器已经设置为满足网络特性（如果不是，这是一个系统问题，而不是特定应用程序应该单独管理的问题）。只需发送和接收数据并管理在其中一方离开或无法访问时最终出现的连接错误。

任何状况之下：

*   不要为了测试而做愚蠢的无限循环发送/接收 empy 消息：互联网上有数十亿个节点：如果有人这样做，整个互联网将被“乒乓球”填满。弯曲宽度是有代价的。远远超过 CPU 和内存。不要浪费它。

*   不要试图让自己超时或恢复丢失的数据包。您甚至无法想象为什么网络可以决定重新路由或丢弃数据包，有百分之一的充分理由。让 TCP 和 IP 始终如一地发挥作用。所有试图自行解决网络问题的应用程序都只会给网络管理员带来麻烦。

*   简而言之：如果套接字打开并且没有错误，则计算机已连接。如果它出错，只需将其关闭并尝试重新打开它（并等待传输协议超时。它可能长达几分钟，但不要试图逃避网络协议规则：你在网络中独自一人，而不是你可以制定这些规则）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:43:21.147

为什么不及时触发主事件而不是无限循环？

我从某人那里听说，现代 MB 架构和内存设计可以通过应用具有某些特殊性的缓存方法来实现可重用性，从而消除分配和重新分配内存块的需要，这也有助于避免在外部和内部创建过多的片段。我不介意再次检查这个，因为我现在正在听我的在线教授的在线采访......：D。祝您搜索顺利！

[编辑]我及时使用ping方法阅读了其他回复`ongard`，这非常好，但请注意客户端也可以阻止来自其他计算机的ping。

# jquery - 使用 jQuery 更改图像并将主图像删除为缩略图

> ID：14334615
> 
> 赞同：1
> 
> 时间：2013-01-15T09:28:22.800
> 
> 标签：jquery

现在我点击缩略图（link_to_thumbnail1.jpg），更大的图像（link_to_big_image1.jpg）显示在带有 id 的 div 中`#imageWrap`。

**如何使用 jquery 更改带有`#imageWrap`缩略图的 div 内的当前图像？**

示例：我点击缩略图 1（link_to_thumbnail1.jpg），`#imageWrap`（Link_to_main_image0.jpg）中的当前图像变为缩略图 1，以此类推...

我希望，有办法解决这个问题。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.thumbnail').live("click", function() {
            $('#mainImage').hide();
            $('#imageWrap').css('background-image', "url('/ajax-loader.gif')");
            var i = $('<img />').attr('src',this.href).load(function() {
                $('#mainImage').attr('src', i.attr('src'));
                $('#imageWrap').css('background-image', 'none');
                $('#mainImage').fadeIn();
            });
            return false; 
        });
    });
</script>

<div class="Image" id="imageWrap">    
    <img src="Link_to_main_image0.jpg" alt="" title="" id="mainImage" />     
</div>

<a href="link_to_thumbnail1.jpg" class="thumbnail">
    <img src="link_to_big_image1.jpg" alt="" title="" /> 
</a>

<a href="link_to_thumbnail2.jpg" class="thumbnail">
    <img src="link_to_big_image2.jpg" alt="" title="" />     
</a>

<a href="link_to_thumbnail3.jpg" class="thumbnail">
    <img src="link_to_big_image3.jpg" alt="" title="" /> 
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:55:00.757

是你要找的吗？：

[http://jsbin.com/avofoj/1/edit](http://jsbin.com/avofoj/1/edit)

```
$(document).ready(function(){
  $('.thumbnail').click(function(){
    $('#imageWrap img').empty();
    $('#imageWrap img').attr('src',$(this).attr('src'));
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:40:50.287

我对你想要达到的目标有点困惑。但是，如果您有 a`<div class="imageWrapper"></div>`并且希望它包含其他内容，则可以`.html()`像这样使用该函数：

```
$('.imageWrapper').html('<img src="whatever_i_need_to_be_here_now.jpg" />'); 
```

# asp.net - 我有一个带有某些列的网格视图，例如 Event,Date(in dd-mm-yyyy format) ，我想根据日期溢出网格视图行吗？

> ID：14334617
> 
> 赞同：1
> 
> 时间：2013-01-15T09:28:25.403
> 
> 标签：asp.net, gridview

例如：

网格视图包含以下数据：

```
Event                             Date
All India Chess                 14-03-2013
Karnataka Chess                 25-04-2013
Haryana Chess                   14-03-2013 
```

我希望结果为：

```
Event                                Date 
                 13(March)
All India Chess                 14-03-2013
Haryana Chess                   14-03-2013

                 13(April)
Karnataka Chess                 25-04-2013 
```

# nhibernate - NHibernate 可以在不延迟加载整个集合的情况下查询特定子项吗？

> ID：14334618
> 
> 赞同：2
> 
> 时间：2013-01-15T09:28:28.793
> 
> 标签：nhibernate, linq-to-nhibernate

当我有一个带有一对多子集合的实体对象，并且我需要查询一个特定的子对象时，是否有一个我还没有想出的功能或一些聪明的模式来避免 NHibernate 获取整个儿童收藏？

例子：

```
class Parent 
{
    public virtual int Id { get; proteced set; } // generated PK
    public virtual IEnumerable<Child> Children { get; proteced set; }
}

class Child
{
    public virtual int Id { get; protected set; } // generated PK
    public virtual string Name { get; protected set; }
    public virtual Parent Parent { get; protected set; }
}

// mapped with Fluent

class Service
{

    private readonly ISessionFactory sessionFactory;

    public Service(ISessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
    }

    void DoSomethingWithChildrenNamedBob(int parentId)
    {
        using(var session = sessionFactory.OpenSession())
        {
            var parent = session.Get<Parent>(parentId);
            // Will cause lazy fetch of all children!
            var childrenNamedBob = parent.Children.Where(c => c.Name == "Bob"); 
            // do something with the children
        }
    }
} 
```

我知道这不是最好的例子，因为在这种情况下，可能只是直接查询子实体，但我遇到过我已经有一个父对象并且需要遍历它的特定子树的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:25:16.050

简短的回答：没有。更长的答案：您可以通过一些技巧来做到这一点。

上面 Rippo 的回答显示了您将如何以“正确的”NHibernate 方式执行此操作（无论是使用 Linq 还是 QueryOver 或 HQL 都无关紧要 - 关键是您必须走出父级 -> 子级关系才能进行查询）。您可以更进一步，将其隐藏在外观后面。但要这样做，您必须完全删除映射关系并始终将其替换为查询。您将取出 Parent -> Children 映射，但保留 Child -> Parent 映射不变；然后重写 Parent 上的属性，如下所示：

```
public virtual IQueryable<Child> Children
{
    get
    {
        // somehow get a reference to the ISession (I use ambient context), then
        return session.Query<Child>().Where(c => c.Parent == this);
    }
} 
```

现在，当您使用时，`Parent.Children`您会返回一个可查询的集合，因此您可以编写

```
IEnumerable<Child> childrenNamedBob = parent.Children.Where(c => c.Name == "Bob"); 
```

您可以这样做并保留映射的唯一方法是修改 NHibernate 的集合对象（或注入您自己的）。Diego Mijelshon（在这些部分周围）写了一个确切的峰值，将 IQueryable 支持添加到 NHibernate 集合中，这样你就可以做到

```
IEnumerable<Child> childrenNamedBob = parent.Children.AsQueryable().Where(c => c.Name == "Bob"); 
```

但据我所知，这从未进一步发展，也​​没有明显的计划将这种能力添加到 NH。我已经运行了 Diego 的代码，它确实可以工作，但显然它不是生产质量，也没有经过测试，而且我认为它从未被正式“发布”过，即使是作为一个私人补丁。

这是关于 NH 问题跟踪器的讨论链接：[https ://nhibernate.jira.com/browse/NH-2319](https://nhibernate.jira.com/browse/NH-2319)

我相信 NH 应该开箱即用地支持这一点，因为这是大多数 .NET 开发人员想要与几乎任何可枚举的东西进行交互的自然方式，现在我们有了 Linq，并且如果没有副作用就无法做到这一点将无限集合加载到 RAM 中很糟糕。但是传统的 NH 模型是会话 -> 查询，这是 99% 的人使用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T10:06:07.380

几周前我在 NHusers 上问了同样的问题，但没有得到答案，所以我怀疑答案是`you will always get all the parents children and then perform a in-memory filter`. 在许多情况下，这可能是看待它的正确方式。

在您的情况下，我会将查询重写为：-

```
var childrenNamedBob = session.Query<Children>()
  .Where(w => w.Parent.Id == parentId && w.Name == "Bob"); 
```

然后简单地获取父母（如果 childrenNamedBob 有结果），您可以调用：-

```
 var parent = childrenNamedBob.First().Parent; 
```

或者正如您正确指出的那样：-

```
var parent = session.Get<Parent>(parentId); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-02T20:36:54.253

您现在可以直接使用 NHibernate 5 做到这一点，无需特定代码！

见[https://github.com/nhibernate/nhibernate-core/blob/master/releasenotes.txt](https://github.com/nhibernate/nhibernate-core/blob/master/releasenotes.txt)

```
Build 5.0.0
=============================

** Highlights
...
    * Entities collections can be queried with .AsQueryable() Linq extension without being fully loaded.
... 
```

# java - Java 7 Update 10 中的零日安全漏洞

> ID：14334620
> 
> 赞同：1
> 
> 时间：2013-01-15T09:28:50.190
> 
> 标签：java, security

*我在 1 月 11 日和 1 月 13 日阅读了有关Java 7 Update 10 中的零日安全漏洞*的技术文章，并在 1 月 13 日得知 Oracle 已针对相同的漏洞发布了补丁*更新 11*。但所有的新闻都只是包含肤浅的数据。

谁能解释一下漏洞是什么以及修复方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:32:01.460

AFAIK，在 Java 7 的 MethodHandle 本机代码中有一个具有“中”级安全模型的小程序存在一个错误，它允许您取消设置 SecurityManager，即使您已经有一个。这有效地使您可以访问本地程序。它将具有与进程相同的访问权限

如果您的安全级别是推荐和默认的“高”，则不会发生这种情况。

即您必须首先降低您的安全级别，但该错误将其降低到低于应有的水平。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:50:28.587

可以在这里找到分析：

[https://partners.immunityinc.com/idocs/Java%20MBeanInstantiator.findClass%200day%20Analysis.pdf](https://partners.immunityinc.com/idocs/Java%20MBeanInstantiator.findClass%200day%20Analysis.pdf)

归结为`sun.reflect.Reflection.getCallerClass(int)`没有正确处理新引入的​​反射 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:33:00.540

你可以阅读它......发行说明

[http://www.oracle.com/technetwork/java/javase/7u11-relnotes-1896856.html](http://www.oracle.com/technetwork/java/javase/7u11-relnotes-1896856.html)

可以在 [http://www.oracle.com/technetwork/topics/security/alert-cve-2013-0422-1896849.html找到错误描述](http://www.oracle.com/technetwork/topics/security/alert-cve-2013-0422-1896849.html)

# slickgrid - 推荐用于部署的 SlickGrid 稳定版本是什么

> ID：14334621
> 
> 赞同：0
> 
> 时间：2013-01-15T09:28:55.400
> 
> 标签：slickgrid

是否有应该用于部署的稳定版本的 SlickGrid，或者是否推荐做法是拍摄 github 存储库的快照并将其用于部署？我看到了许多标签，但没有一个是最近的（例如，标签*2.02*已有 7 个月的历史，从那时起有很多提交）。

到目前为止，我一直在跟踪 SlickGrid github 存储库以进行开发，但我想在部署之前修复一个版本。如果有推荐的稳定包下载可用（也许有但我没有遇到过？），那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T13:59:39.143

[SlickGrid 2.1 可在 github 上发布](https://github.com/mleibman/SlickGrid/releases/tag/2.1)- 官方邮件列表公告[在这里](https://groups.google.com/forum/#!topic/slickgrid/ypIS60kQ06U)。

# iphone - 液体物理游戏

> ID：14334623
> 
> 赞同：2
> 
> 时间：2013-01-15T09:28:57.337
> 
> 标签：iphone, ios, cocos2d-iphone, game-engine

我必须开发一个将水放在桶中的游戏。用户可以通过摇动设备使水在桶周围移动。桶内会有重量较轻的圆环和泥浆沉降在桶底。用户可以从桶底抽入空气，圆环和泥浆会对从桶底施加的气压产生反应，就像在正常世界中一样。

我可以使用来实现这一点`cocos2d-box2d`吗？还是我应该使用不同的游戏引擎？

您能否分享与该主题相关的示例应用程序或教程的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:07:14.597

您可以使用 box2d 实现此目的。有关更多信息，请查看以下链接：

```
http://www.iforce2d.net/b2dtut/buoyancy
http://www.sideroller.com/wck/?f=6
http://files.slembcke.net/temp/Waves1D.tgz
http://www.emanueleferonato.com/2012/05/16/simulating-mudslime-with-box2d-bitmaps-and-filters/ 
```

# c# - 运行功能测试

> ID：14334627
> 
> 赞同：1
> 
> 时间：2013-01-15T09:29:20.440
> 
> 标签：c#, visual-studio-2012, functional-testing

当我尝试从 Visual Studio 2012 Ultimate 运行我的测试时，我得到了这个输出

> ------ 发现测试开始 ------
> 
> ========== 发现测试已完成：找到 0 个 (0:00:05.8242806) ==========

这是代码：

```
[Then(@"the submitter company list is in alphabetical order")] 
public void ThenTheSubmitterCompanyListIsInAlphabeticalOrder() 
{ 
    List<string> submitterCompanyList = _currentFilingPage.SubmitterCompanyList;
    submitterCompanyList.Should().BeInAscendingOrder(); 
} 
```

我创建了一个 .bat 文件，我可以从那里运行我的测试。请帮助我从视觉工作室运行我的测试。（额外信息：我在测试资源管理器上看不到我的测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:09:42.660

所有测试都必须具有[TestMethodAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testmethodattribute%28v=vs.110%29.aspx)，以便 MSTest/Visual Studio 可以找到它们。

*   [请参阅：MSDN 单元测试剖析](http://msdn.microsoft.com/en-us/library/ms182517%28v=vs.100%29.aspx)

因此，编辑您的代码并将其添加`TestMethod`到您的方法中，以便可以将其作为测试找到。此外，您的方法必须添加到 a 中`TestClass`：

```
[TestClass]
public class TestClass
{
    [TestMethod]
    public void ThenTheSubmitterCompanyListIsInAlphabeticalOrder()
    {
    }
} 
```

# python - 在python中通过命令行传递的参数

> ID：14334628
> 
> 赞同：0
> 
> 时间：2013-01-15T09:29:25.627
> 
> 标签：python, python-2.7

这个问题可能是一个愚蠢的问题。由于我是这个 python 的新手，请在这个问题上帮助我。

```
if __name__== '__main__' :
    path=sys.argv[1] 
```

在上面的代码中，我从命令行读取参数。我的论点是系统中某个文件的路径。当我不提供参数时，它会引发错误“列表索引超出范围”

而不是从命令行读取，我想以下列方式输入

> “输入文件路径..”

在显示此行之后，我如何通过按 Tab 并以路径作为输入来解析文件系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:31:10.753

`sys.argv`只是一个列表，说它`sys.argv[1]`与说`args = [0]; args[1]`你需要检查索引是否`1`确实存在相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:32:07.447

尝试这个：

```
path = raw_input("enter path to your file..")

print path 
```

如果您正在使用命令行参数`hello.py myfile.txt`，则使用

```
if len(sys.argv) > 1:
    path = sys.argv[1] 
```

更新：

如果您需要向用户显示目录中的所有文件。用这个：

```
import os

i = 1

for item in os.listdir("F:/python/Lib"):
    if os.path.isfile(os.path.join("F:/python/Lib", item)):
        print str(i) + " : " + item
        i += 1 
```

输出：

```
>>> 
1 : abc.py
2 : abc.pyc
3 : aifc.py
4 : antigravity.py
5 : anydbm.py
6 : argparse.py
7 : ast.py
8 : asynchat.py
9 : asyncore.py
10 : atexit.py
11 : atexit.pyc
12 : audiodev.py
13 : base64.py
14 : base64.pyc
15 : BaseHTTPServer.py
16 : BaseHTTPServer.pyc
17 : Bastion.py
18 : bdb.py
19 : bdb.pyc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:37:50.367

> 我如何通过按 Tab 键解析文件系统并将路径作为输入

这不是一件容易的事，因为您*按下选项卡*意味着完成，这是在`bash`或`batch`级别（您正在运行 python 程序的终端）上完成的。

您可能需要添加一个从`os`and`sys`模块调用适当子例程的函数，并执行自定义完成。

[在这里](https://stackoverflow.com/questions/5637124/tab-completion-in-pythons-raw-input)你可以找到我的意思的想法，希望它有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:47:02.643

*一些不太相关的东西*：

如果您想执行更复杂的命令行选项解析，请考虑使用`argparse` [模块](http://docs.python.org/dev/library/argparse.html)。

这是我制作的脚本中模块的简单演示：

```
import argparse

parser = argparse.ArgumentParser(description='MD5 Cracker')
parser.add_argument('target', metavar='Target_MD5_Hash', help='The target MD5 that you want to have cracked.')
parser.add_argument('--online', '-o', help='MD5 Cracker will try to crack the password using online MD5 cracking websites and databases', default=False)
parser.add_argument('--list', '-l', help='MD5 Cracker will try to crack the passwork offline with a dictionary attack using the list supplied', default=False)
parser.add_argument('--interactive', '-i', help='MD5 Cracker will enter interactive mode, allowing you to check passwords without reinitiating the software each time', default=False)

if __name__ == '__main__':
    cli_args = parser.parse_args()
    args_dict = cli_args.__dict__ # here it is cast into a dictionary to allow for easier manipulation of contents 
```

# delphi - 在 VisualCLX 表单中过滤（禁用）鼠标滚轮消息

> ID：14334629
> 
> 赞同：1
> 
> 时间：2013-01-15T09:29:26.890
> 
> 标签：delphi, delphi-7, clx

我继承了一个 Delphi 7 (VisualCLX) 应用程序来维护，我想在应用程序`WM_MOUSEWHEEL`的主窗体 ( `TForm`) 上过滤一些 Windows 消息，例如鼠标滚轮 ()，这可能在 Visual CLX 上吗？如何 ？

我知道这在 VCL 上是可能的，但我正在寻找*旧*的跨平台（CLX）上的一些解决方案......

**笔记**

我需要禁用鼠标滚轮事件，因为它会不断更改活动页面`TPageControl`（

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:38:06.667

在 CLX 中过滤输入消息并不简单。似乎没有像 VCL 的`OnMessage`.

您可以使用简单的插入器停止 CLX 页面控件处理的鼠标滚轮事件。在声明主窗体类之前，将此代码添加到主窗体中。

```
type
  TPageControl = class(QComCtrls.TPageControl)
  protected
    function DoMouseWheel(Shift: TShiftState; WheelDelta: Integer; 
      const MousePos: TPoint): Boolean; override;
  end; 
```

然后在单元的实现部分，添加：

```
function TPageControl.DoMouseWheel(Shift: TShiftState; WheelDelta: Integer; 
  const MousePos: TPoint): Boolean;
begin
  Result := True;
end; 
```

如果您在不同的表单上有多个页面控件，那么您应该在一个单元中声明插入器，该单元可以由您的应用程序中的所有表单共享。或者甚至可能派生出一个适当的成人子类。

# c# - 设计一个 XML 阅读器

> ID：14334632
> 
> 赞同：-1
> 
> 时间：2013-01-15T09:29:36.490
> 
> 标签：c#, xml, visual-studio-2010

我已经分配了为 xml 阅读器创建类结构的任务！到目前为止，我得到的是一个简单的 xml 文件有两个主要类。元素和属性。我可以使用内置的 c# xml 阅读器来读取 xml 文件！但我的代码应该能够识别 xml 元素、结构以及属性。到目前为止，我已经识别了主要的两个类，但我现在坚持这一点。如果有人可以解释一种可能的理论或方法，因为我是编程新手，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:35:52.523

以下是关于如何以 OOP 方式设计“XML 阅读器”的三个非常好的示例：

*   [XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)
*   [xml文档](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)
*   [XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

它们将 XML 文档、XML 文档组成的部分和 XML 文档的结构映射到相应类的结构，并引入了构建和分析 XML 文档的方法。

如果您想练习并构建自己的类结构而不“作弊”（即查看其他人是如何做到的），您可以从检查[XML 规范](http://www.w3.org/TR/REC-xml/)开始并确定 XML 文档可以包含的元素/部分（元素、属性、数据类型等）很可能这些元素中的许多应该在您的设计中具有相应的类。接下来，您必须考虑您希望能够使用 XML***做什么。***这也会影响你的设计。

作为一般规则，您应该始终牢记生成的 API 应该易于使用。您的目标“受众”可能是了解 XML 的开发人员，因此您的类应该反映他们对 XML 的了解（名称应该相似等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:46:04.543

我认为您应该使用完善的 API 来达到您的目的。除此之外，我认为您可以使用责任链设计模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:01:24.260

XML 阅读器和 XML 文档之间是有区别的。它们以不同的模式为模型。

.NET 中的读取器仅用于读取流并在遇到某些元素/属性或其他类型的节点时停止。如果您想要快速或者您有一个不想保留在内存中的大流，这可能是实用的。

XML 文档读取整个流并实例化一个表示它的对象模型。如果您需要了解结构并且它适合记忆，这是实用的。

如果您要实现阅读器，您可以创建诸如 ReadNext() 之类的方法，该方法将读取并返回它找到的下一个节点。对于初学者，我会坚持解析 xml 元素及其属性，而不是注释、名称空间和其他更困难的事情。

# scala - 如何通过 WHERE 子句条件参数化 Scala Slick 查询？

> ID：14334634
> 
> 赞同：0
> 
> 时间：2013-01-15T09:29:53.303
> 
> 标签：scala, scalaquery, slick

假设这两个简单的查询：

```
def findById(id: Long): Option[Account] = database.withSession { implicit s: Session =>
  val query = for (a <- Accounts if a.id === id) yield a.*
  query.list.headOption
}

def findByUID(uid: String): Option[Account] = database.withSession { implicit s: Session =>
  val query = for (a <- Accounts if a.uid === uid) yield a.*
  query.list.headOption
} 
```

我想重写它以删除样板副本，如下所示：

```
def findBy(criteria: ??? => Boolean): Option[Account] = database.withSession {
  implicit s: Session =>
    val query = for (a <- Accounts if criteria(a)) yield a.*
    query.list.headOption
}

def findById(id: Long) = findBy(_.id === id)

def findByUID(uid: Long) = findBy(_.uid === uid) 
```

我不知道如何实现它，因为我还没有解开 for 理解中涉及的几个隐式转换。更具体地说：方法中的类型是`??? => Boolean`什么`findBy`？

**编辑**

这些是 Account 和 Accounts 类：

```
case class Account(id: Option[Long], uid: String, nick: String)

object Accounts extends Table[Account]("account") {
  def id = column[Option[Long]]("id")
  def uid = column[String]("uid")
  def nick = column[String]("nick")
  def * = id.? ~ uid ~ nick <> (Account, Account.unapply _)
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:05:31.250

我有这个助手表：

```
abstract class MyTable[T](_schemaName: Option[String], _tableName: String) extends Table[T](_schemaName, _tableName) {
  import scala.slick.lifted._
  def equalBy[B: BaseTypeMapper]
    (proj:this.type => Column[B]):B => Query[this.type,T] = { (str:B) => 
     Query[this.type,T,this.type](this) where { x => proj(x) === str} }

} 
```

现在你可以这样做：

```
 val q=someTable.equalBy(_.someColumn) 
 q(someValue) 
```

# java - 如何从 JTable 中删除重复的行？

> ID：14334640
> 
> 赞同：1
> 
> 时间：2013-01-15T09:30:03.343
> 
> 标签：java, swing, jtable

在这个类中，我试图只在`JTable`. 数据来自数据库。我不需要重复数据。

```
public JTable getHeute(){

            DBconnect verbinden = new DBconnect();
            verbinden.erstelleVerbindung();

            JTable Habwesend=new JTable();
            Habwesend.setBounds(10, 30, 290, 400);
            Habwesend.setEnabled(false);
            DefaultTableModel dm=new DefaultTableModel();

            try {
            ResultSet rs= verbinden.sqlStatement.executeQuery("select MA_ID from AB_Spanne where(Date() >= Start and Date() <= Ende)");
            ResultSetMetaData rsmd=rs.getMetaData();
            //Coding to get columns-
            int cols=rsmd.getColumnCount();
            String c[]=new String[cols];
            for(int i=0;i<cols;i++){
                c[i]=rsmd.getColumnName(i+1);
                for (int k = 0; k < c.length; k++) {
                    dm.addColumn(c[k]);
                }

            }

            Object row[]=new Object[cols];
            while(rs.next()){
                for(int i=0;i<cols;i++){
                        row[i]=rs.getString(i+1);
                    }
                dm.addRow(row);
            }

            Habwesend.setModel(dm);
            verbinden.schliesseVerbindung();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:38:56.440

将您的查询更改为：

```
"SELECT DISTINCT MA_ID from AB_Spanne where(Date() >= Start and Date() <= Ende)" 
```

您可以在 java 中执行此操作（不推荐且性能不佳）：

```
//UNTESTED CODE
List<Object> Objectlist = new List<Object>();
// ...
Object row[]=new Object[cols];

while(rs.next()){

   for(int i=0;i<cols;i++){
      row[i]=rs.getString(i+1);
   }

   if !(Objectlist.Contains(row)){
      dm.addRow(row);
   }
} 
```

// 我想为了让包含方法起作用，您可能需要创建自己的对象，在其中覆盖相等/比较方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:57:53.703

而不是[List](http://java.sun.com/javase/6/docs/api/java/util/List.html)，使用[Set](http://java.sun.com/javase/6/docs/api/java/util/List.html)并保持其余代码相同。那是你的java解决方案，白衣：

```
// Set dm = new HashSet();
  Object row[]=new Object[cols];
            while(rs.next()){
                for(int i=0;i<cols;i++){
                        row[i]=rs.getString(i+1);
                    }
                dm.addRow(row);
            }
           Habwesend.setModel(dm);
            verbinden.schliesseVerbindung(); 
```

# cocoa - 如何设置具有可变单元格大小的 IKImageBrowserView？

> ID：14334642
> 
> 赞同：0
> 
> 时间：2013-01-15T09:30:06.247
> 
> 标签：cocoa, ikimagebrowserview

我正在开发一个工具，它允许用户导入视频剪辑并从这些视频剪辑制作电影。

为了表示导入的视频剪辑，我创建了视频剪辑`IKImageBrowserView`的帧图像并将其添加为缩略图图像。到这里一切正常。

但现在我想根据视频剪辑持续时间显示缩略图大小。即每个缩略图图像都具有基于持续时间的不同大小。（我想显示将根据视频剪辑的持续时间更改的缩略图图像宽度。

如果我使用`[imageBrowser setCellSize:];`，那么它将影响所有缩略图大小。但我想为每个缩略图应用不同的大小。

有人可以帮我解决这个问题吗？

如果`IKImageBrowserView`不是最适合我的问题，那么请建议我最好的控制来解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T03:17:52.153

`IKImageBrowserCell`最好的解决方案是为您的自定义 实现您自己的子类`IKImageBrowserView`

首先，你需要子类化`IKImageBrowserView`并覆盖`newCellForRepresentedItem:` 在这个方法中，返回一个你自己的子类的实例`IKImageBrowserCell`。

在您的子类中`IKImageBrowserCell`，重写以下方法以根据表示的视频剪辑动态修改布局：（要检索应符合非正式协议的视频剪辑数据模型，请`IKImageBrowserItem`使用`-[IKImageBrowserCell representedItem]`）

```
- (NSRect) imageContainerFrame;
- (NSRect) imageFrame; 
- (NSRect) selectionFrame;
- (NSRect) titleFrame;
- (NSRect) subtitleFrame;   
- (NSImageAlignment) imageAlignment; 
```

还有一个关于 ADC 的演示项目，可以在

[http://developer.apple.com/library/mac/#/legacy/library/samplecode/ImageKitDemo/Introduction/Intro.html](http://developer.apple.com/library/mac/#/legacy/library/samplecode/ImageKitDemo/Introduction/Intro.html)

# gwt - GWT 序列化不应该返回接口：参数和包含的对象呢？

> ID：14334644
> 
> 赞同：2
> 
> 时间：2013-01-15T09:30:11.287
> 
> 标签：gwt, gwt-rpc

*关于 GWT RPC 中的方法不应返回*像 List 这样的接口，而是像 ArrayList 这样的具体类这一事实已经存在一些问题，因为否则“GWT 需要包含所有可能的实现”。参见例如[在 GWT 中，为什么方法不应该返回接口？](https://stackoverflow.com/questions/6059211/in-gwt-why-shouldnt-a-method-return-an-interface)

这是我的问题：这是否仅限于返回类型本身？方法的参数如何？如果返回对象包含一个接口怎么办，例如

```
public class MyReturnObject implements IsSerializable {
   List<String> listOfUnspecifiedType1;
   List<Long> listOfUnspecifiedType2;
   ...
} 
```

我见过的例子都是关于返回类型本身的。我不明白为什么返回一个接口会是一个问题，但返回一个只包装一个接口的对象却不是问题；但也许我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:42:42.560

从链接的问题中可以清楚地看出它是递归应用的（一旦您了解为什么应该尽可能使用最派生的类型，很明显它是递归的）。

方法参数也是如此，不仅是返回类型及其字段：如果您发送一个，`List<X>`则 GWT 必须为所有`List`类生成序列化代码：`ArrayList`、`LinkedList`等。

当然，这同样适用于类，不仅是接口：`AbstractList`与`List`.

而且因为生成是在优化之前，源路径中所有可能的类都将被包括在内，不仅是您在代码中使用的那些；然后它们会阻碍优化过程，因为所有这些类*现在*都被您的应用程序使用。

因此，规则是：**尽可能使用最具体的类型**。推论是：不要害怕 DTO，**不要试图不惜一切代价发送您的业务/域对象**。

# android - 实现滑动菜单时的 InvocationTargetException

> ID：14334645
> 
> 赞同：1
> 
> 时间：2013-01-15T09:30:14.233
> 
> 标签：android, slider, slidingdrawer

我正在构建需要实现滑动菜单的应用程序。所以我已经集成[了这个](https://github.com/jfeinstein10/SlidingMenu)库。但是当我启动此活动时，我的应用程序会崩溃。这是 xml、java 和堆栈跟踪的片段。

xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

    <com.slidingmenu.lib.SlidingMenu
        xmlns:sliding="http://schemas.android.com/apk/res-auto"
        android:id="@+id/slidingmenulayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        sliding:viewAbove="@layout/activity_main"
        sliding:viewBehind="@layout/red" >
    </com.slidingmenu.lib.SlidingMenu>

</RelativeLayout> 
```

.java文件：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SlidingMenu menu = (SlidingMenu) findViewById(R.id.slidingmenulayout);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setFadeDegree(0.35f);
        menu.setShadowWidth(5);
        menu.setBehindWidth(200);
        menu.setSlidingEnabled(true);
        menu.setBehindScrollScale(0.5f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.red);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

和错误日志：

```
02-05 14:12:50.024: E/AndroidRuntime(1072): FATAL EXCEPTION: main
02-05 14:12:50.024: E/AndroidRuntime(1072): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.slidingdrawerexample/com.example.slidingdrawerexample.MainActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class com.slidingmenu.lib.SlidingMenu
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.ActivityThread.access$600(ActivityThread.java:123)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.os.Looper.loop(Looper.java:137)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.ActivityThread.main(ActivityThread.java:4424)
02-05 14:12:50.024: E/AndroidRuntime(1072): at java.lang.reflect.Method.invokeNative(Native Method)
02-05 14:12:50.024: E/AndroidRuntime(1072): at java.lang.reflect.Method.invoke(Method.java:511)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
02-05 14:12:50.024: E/AndroidRuntime(1072): at dalvik.system.NativeStart.main(Native Method)
02-05 14:12:50.024: E/AndroidRuntime(1072): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class com.slidingmenu.lib.SlidingMenu
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createView(LayoutInflater.java:606)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:268)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.Activity.setContentView(Activity.java:1835)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.example.slidingdrawerexample.MainActivity.onCreate(MainActivity.java:16)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.Activity.performCreate(Activity.java:4465)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
02-05 14:12:50.024: E/AndroidRuntime(1072): ... 11 more
02-05 14:12:50.024: E/AndroidRuntime(1072): Caused by: java.lang.reflect.InvocationTargetException
02-05 14:12:50.024: E/AndroidRuntime(1072): at java.lang.reflect.Constructor.constructNative(Native Method)
02-05 14:12:50.024: E/AndroidRuntime(1072): at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createView(LayoutInflater.java:586)
02-05 14:12:50.024: E/AndroidRuntime(1072): ... 22 more
02-05 14:12:50.024: E/AndroidRuntime(1072): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createView(LayoutInflater.java:606)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.slidingmenu.lib.SlidingMenu.setContent(SlidingMenu.java:342)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.slidingmenu.lib.SlidingMenu.(SlidingMenu.java:235)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.slidingmenu.lib.SlidingMenu.(SlidingMenu.java:190)
02-05 14:12:50.024: E/AndroidRuntime(1072): ... 25 more
02-05 14:12:50.024: E/AndroidRuntime(1072): Caused by: java.lang.reflect.InvocationTargetException
02-05 14:12:50.024: E/AndroidRuntime(1072): at java.lang.reflect.Constructor.constructNative(Native Method)
02-05 14:12:50.024: E/AndroidRuntime(1072): at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createView(LayoutInflater.java:586)
02-05 14:12:50.024: E/AndroidRuntime(1072): ... 33 more
02-05 14:12:50.024: E/AndroidRuntime(1072): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createView(LayoutInflater.java:606)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-05 14:12:50.024: E/AndroidRuntime(1072): at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.slidingmenu.lib.SlidingMenu.setContent(SlidingMenu.java:342)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.slidingmenu.lib.SlidingMenu.(SlidingMenu.java:235)
02-05 14:12:50.024: E/AndroidRuntime(1072): at com.slidingmenu.lib.SlidingMenu.(SlidingMenu.java:190)
02-05 14:12:50.024: E/AndroidRuntime(1072): ... 36 more
02-05 14:12:50.024: E/AndroidRuntime(1072): Caused by: java.lang.reflect.InvocationTargetException
02-05 14:12:50.024: E/AndroidRuntime(1072): 
```

# magento - 将产品添加到购物车 magento soap 时出错

> ID：14334647
> 
> 赞同：3
> 
> 时间：2013-01-15T09:30:15.890
> 
> 标签：magento, soap

当我尝试通过soap API将产品添加到Magento中的购物车时，出现此错误： **SoapFault:Call to a member function setFinalPrice() on a non-object**

我采取以下步骤：

*   创建一个`cart($this->call($this->_session, 'cart.create', array($store));)`
*   设置客户地址和信息(cart_customer.set, cart_customer.addresses)

这会在 时产生以下数组`calling(cart.info)`：

```
Array
(
    [store_id] => 0
    [created_at] => 2013-01-15 09:19:49
    [updated_at] => 2013-01-15 09:19:51
    [converted_at] => 
    [is_active] => 0
    [is_virtual] => 0
    [is_multi_shipping] => 0
    [items_count] => 0
    [items_qty] => 0.0000
    [orig_order_id] => 0
    [store_to_base_rate] => 1.0000
    [store_to_quote_rate] => 1.0000
    [base_currency_code] => EUR
    [store_currency_code] => EUR
    [quote_currency_code] => EUR
    [grand_total] => 0.0000
    [base_grand_total] => 0.0000
    [checkout_method] => guest
    [customer_id] => 
    [customer_tax_class_id] => 3
    [customer_group_id] => 1
    [customer_email] => test@test.nl
    [customer_prefix] => 
    [customer_firstname] => Test
    [customer_middlename] => 
    [customer_lastname] =>  TestLasname
    [customer_suffix] => 
    [customer_dob] => 
    [customer_note] => 
    [customer_note_notify] => 1
    [customer_is_guest] => 0
    [remote_ip] => 
    [applied_rule_ids] => 
    [reserved_order_id] => 
    [password_hash] => GkV4mSKHqgQ=
    [coupon_code] => 
    [global_currency_code] => EUR
    [base_to_global_rate] => 1.0000
    [base_to_quote_rate] => 1.0000
    [customer_taxvat] => 
    [customer_gender] => 0
    [subtotal] => 0.0000
    [base_subtotal] => 0.0000
    [subtotal_with_discount] => 0.0000
    [base_subtotal_with_discount] => 0.0000
    [is_changed] => 1
    [trigger_recollect] => 0
    [ext_shipping_info] => 
    [gift_message_id] => 
    [is_persistent] => 0
    [quote_id] => 4506
    [shipping_address] => Array
    (
        [address_id] => 
        [quote_id] => 4506
        [created_at] => 2013-01-15 09:19:51
        [updated_at] => 2013-01-15 09:19:51
        [customer_id] => 
        [save_in_address_book] => 0
        [customer_address_id] => 
        [address_type] => shipping
        [email] => 
        [prefix] => 
        [firstname] => Test
        [middlename] => 
        [lastname] =>  TestLastname
        [suffix] => 
        [company] => 
        [street] => street 24
        [city] => Amsterdam
        [region] => 
        [region_id] => 
        [postcode] => 3454 BM
        [country_id] => NL
        [telephone] => 565765765765
        [fax] => 
        [same_as_billing] => 0
        [free_shipping] => 0
        [collect_shipping_rates] => 1
        [shipping_method] => 
        [shipping_description] => 
        [weight] => 0.0000
        [subtotal] => 0.0000
        [base_subtotal] => 0.0000
        [subtotal_with_discount] => 0.0000
        [base_subtotal_with_discount] => 0.0000
        [tax_amount] => 0.0000
        [base_tax_amount] => 0.0000
        [shipping_amount] => 0.0000
        [base_shipping_amount] => 0.0000
        [shipping_tax_amount] => 0.0000
        [base_shipping_tax_amount] => 0.0000
        [discount_amount] => 0.0000
        [base_discount_amount] => 0.0000
        [grand_total] => 0.0000
        [base_grand_total] => 0.0000
        [customer_notes] => 
        [applied_taxes] => a:0:{}
        [discount_description] => 
        [shipping_discount_amount] => 
        [base_shipping_discount_amount] => 
        [subtotal_incl_tax] => 0.0000
        [base_subtotal_total_incl_tax] => 
        [gift_message_id] => 
        [hidden_tax_amount] => 
        [base_hidden_tax_amount] => 
        [shipping_hidden_tax_amount] => 
        [base_shipping_hidden_tax_amnt] => 
        [shipping_incl_tax] => 0.0000
        [base_shipping_incl_tax] => 0.0000
    )

[billing_address] => Array
    (
        [address_id] => 
        [quote_id] => 4506
        [created_at] => 2013-01-15 09:19:51
        [updated_at] => 2013-01-15 09:19:51
        [customer_id] => 
        [save_in_address_book] => 0
        [customer_address_id] => 
        [address_type] => billing
        [email] => 
        [prefix] => 
        [firstname] => Test
        [middlename] => 
        [lastname] =>  TestLastname
        [suffix] => 
        [company] => 
        [street] => street 24
        [city] => Amsterdam
        [region] => 
        [region_id] => 
        [postcode] => 3454 BM
        [country_id] => NL
        [telephone] => 565765765765
        [fax] => 
        [same_as_billing] => 0
        [free_shipping] => 0
        [collect_shipping_rates] => 0
        [shipping_method] => 
        [shipping_description] => 
        [weight] => 0.0000
        [subtotal] => 0.0000
        [base_subtotal] => 0.0000
        [subtotal_with_discount] => 0.0000
        [base_subtotal_with_discount] => 0.0000
        [tax_amount] => 0.0000
        [base_tax_amount] => 0.0000
        [shipping_amount] => 0.0000
        [base_shipping_amount] => 0.0000
        [shipping_tax_amount] => 0.0000
        [base_shipping_tax_amount] => 0.0000
        [discount_amount] => 0.0000
        [base_discount_amount] => 0.0000
        [grand_total] => 0.0000
        [base_grand_total] => 0.0000
        [customer_notes] => 
        [applied_taxes] => a:0:{}
        [discount_description] => 
        [shipping_discount_amount] => 
        [base_shipping_discount_amount] => 
        [subtotal_incl_tax] => 0.0000
        [base_subtotal_total_incl_tax] => 
        [gift_message_id] => 
        [hidden_tax_amount] => 
        [base_hidden_tax_amount] => 
        [shipping_hidden_tax_amount] => 
        [base_shipping_hidden_tax_amnt] => 
        [shipping_incl_tax] => 0.0000
        [base_shipping_incl_tax] => 0.0000
    )

[items] => Array
    (
    )

[payment] => Array
    (
        [quote_id] => 4506
        [payment_id] => 
    )
) 
```

但是当我尝试`execute(cart_product.add)`使用以下数组时：

```
Array
(
     'sku' => '44567788855',
     'quantity' => 1
 ) 
```

我收到有关`setFinalPrice`.

问题是，我无权访问此 Magento 安装（仅限 API 帐户）。我使用该站点（http://www.magentocommerce.com/api/soap/checkout/cartProduct/cart_product.add.html）作为所有示例代码。

**使用 product_id 而不是 sku 有效。不知何故，这不起作用，但记录在他们的 API 中**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T10:13:23.443

请参考此[链接](http://www.magentocommerce.com/answers/discussion/1725/Order-creation-via-API-fails/p1)和[此处](http://www.magentocommerce.com/boards/viewthread/245129/#t348443)

它可能会对你有所帮助..我也厌倦了我的 magento 用 product_id 代替 sku for `execute(cart_product.add)`。它工作正常。

请检查我的要求

```
 <soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:Magento" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:shoppingCartProductAdd soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <sessionId xsi:type="xsd:string">d77fdb68c787871ce1373001120b1520</sessionId>
         <quoteId xsi:type="xsd:int">1</quoteId>
         <products xsi:type="urn:shoppingCartProductEntityArray" soapenc:arrayType="urn:shoppingCartProductEntity[]">
<product_id xsi:type="xsd:string">2</product_id>
</products>
         <storeId xsi:type="xsd:string">0</storeId>
      </urn:shoppingCartProductAdd>
   </soapenv:Body>
</soapenv:Envelope> 
```

我的回应是

```
 <SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="urn:Magento" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
   <SOAP-ENV:Body>
      <ns1:shoppingCartProductAddResponse>
         <result xsi:type="xsd:boolean">true</result>
      </ns1:shoppingCartProductAddResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我正在使用 SOAP 客户端来测试肥皂。

祝你好运

# uitableview - 一个 SectionIndexTitles 中的多个部分

> ID：14334648
> 
> 赞同：0
> 
> 时间：2013-01-15T09:30:25.443
> 
> 标签：uitableview, xamarin.ios, sections

我现在有一个包含多个部分的 UITableView。仅当我添加一个带有部分标题（ABCDE 等）的起始字母的列表作为 SectionIndexTitles 并且该列表尚未过滤为双精度值时。

所以列表将是：

*   一个
    *   标题 = ABBA
    *   光盘 1
    *   光盘 2
*   一个
    *   接头 = AC/DC
    *   光盘 1
    *   光盘 2
*   乙
    *   标题 = 后街男孩
    *   光盘 1
    *   光盘 2
*   D
    *   标题 = D12
    *   光盘 1
    *   光盘 2
*   D
    *   标头 = Damien Rice
    *   光盘 1
    *   光盘 2
*   D
    *   标头 = David Guetta
    *   光盘 1
    *   光盘 2
*   乙
    *   标头 = 猫王
    *   光盘 1
    *   光盘 2
*   乙
    *   标题 = 埃里克克莱普顿
    *   光盘 1
    *   光盘 2

一切正常，但我想要的是以下内容：

*   一个
    *   标题 = ABBA
    *   光盘 1
    *   光盘 2
    *   接头 = AC/DC
    *   光盘 1
    *   光盘 2
*   乙
    *   标题 = 后街男孩
    *   光盘 1
    *   光盘 2
*   D
    *   标题 = D12
    *   光盘 1
    *   光盘 2
    *   标头 = Damien Rice
    *   光盘 1
    *   光盘 2
    *   标头 = David Guetta
    *   光盘 1
    *   光盘 2
*   乙
    *   标头 = 猫王
    *   光盘 1
    *   光盘 2
    *   标题 = 埃里克克莱普顿
    *   光盘 1
    *   光盘 2

如果你去字母 E，你会从埃尔维斯普雷斯利开始。

获取所有可用的第一个字母不是问题，但如果我运行应用程序并单击 E，列表将转到 D12 而不是 Elivs Presley。

所以问题与 SectionIndexTitles 的索引和部分自身有关，但我找不到解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:12:41.477

尝试区分您的数组，然后再将其用于`SectionIndexTitles`：

```
sectionTitles = sectionTitles.Distinct().ToList(); 
```

因此，您将删除节标题中的双 A 和其他字母。

请注意，您应该检查`SectionFor`方法代码以正确滚动`UITableView`到您的部分。

# java - 使用 Pattern 和 Matcher 检索一些文本

> ID：14334655
> 
> 赞同：1
> 
> 时间：2013-01-15T09:31:14.023
> 
> 标签：java, webpage, design-patterns, matcher

我想使用`Pattern`&从网页中检索一些值`Matcher`

```
<form name="loginForm"  id="loginForm"  method="post" onsubmit="ScrollUp(60);return validateLoginForm();" 
                 enctype="multipart/form-data" action="/login.php">
                 <input type="hidden" name="Rpidci" value="">
                <div class="last_box">
                    <div class="second_box_heading_panel">
                        <h1>Existing users  - 
                            <span> Login here</span>
                        </h1>
                    </div>
                    <div class="second_box_form_panel">
                        <div class="error-msg">
                                                        </div>
                        <div class="name_form_panel">
                            <div class="name">User Name
                            </div>
                            <div class="name_text_field">
                                <input name="sHZnGSgdzmIJoKWOCHmYez" type="text" class="existing_user round_four" id="sHZnGSgdzmIJoKWOCHmYez" maxlength="10" value=""/>
                            </div>
                        </div>
                        <div class="name_form_panel">
                            <div class="name">Password 
                            </div>
                            <div class="name_text_field"><input name="AWrPDfe" type="password" class="existing_user round_four" id="AWrPDfe" maxlength = "20"
                            value=""/>
                            </div>
                        </div>

                              <div class="login_btn"><a href="javascript:void(0);" onclick="javascript:ScrollUp(70);return validateLoginForm();"><img src="images/login_btn.png" title="login here" /></a></div>
                            </div>
                            </div>
                      <div class="name_form_panel"></div>

                                                        </div> 

                    </div>
              </form> 
```

我想检索这两个字段的值

`<input name="sHZnGSgdzmIJoKWOCHmYez" type="text" class="existing_user round_four" id="sHZnGSgdzmIJoKWOCHmYez" maxlength="10" value=""/>`

&

`<input name="AWrPDfe" type="password" class="existing_user round_four" id="AWrPDfe" maxlength = "20" value=""/>`

我尝试了几次，但未能获得输出。请帮忙。

**编辑：**

我尝试的代码如下：（与我最初写的不一样，因为我很沮丧并且把它搞砸了）

```
Matcher matcher = Pattern.compile("<form name=\"loginForm\" .+ method=\"post\" .+ action=\"/login.php\">\\s*<input[^>]+>\\s*<input[^>]+>\\s*").matcher(loginResp);

        String[] strArr = matcher.group(0).split("<input");
        String str1 = "";
        String str2 = "";
        String str3 = "";
        String str4 = "";

        Pattern localPattern = Pattern.compile(" name=\"([^\\s]+)\" type=\"text\" id=\"([^\\s]+)\" value=\"([^\\s]+)\" />");
        Matcher localMatcher2 = localPattern.matcher(strArr[3]);
        if (localMatcher2.find()) {
            str1 = localMatcher2.group(1);
            echo("STR1 " + str1);
            str2 = localMatcher2.group(3);
            echo("STR2 " + str2);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:34:47.560

与以往一样，我建议使用 HTML 解析器，例如[JTidy](http://jtidy.sourceforge.net/)或[JSoup](http://jsoup.org/)。您不能使用正则表达式可靠地做到这一点，而 HTML 解析器是一个更简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:40:27.820

您可以使用 xpath 查询来获取这两个字段的值，而不是使用正则表达式。 [请参阅此链接](http://www.vogella.com/articles/JavaXML/article.html)以获取 xpath 教程。

# android - 多个 android 设备上的相同序列号。亚行没用。如何更改序列号？

> ID：14334656
> 
> 赞同：6
> 
> 时间：2013-01-15T09:31:14.200
> 
> 标签：android, adb, serial-number

我买了很多（500+）便宜的中国平板电脑，配备 AllWinner 处理器和 Android 4.0.3。所有平板电脑都有相同的序列号。我无法使用 ADB.EXE 在多个设备（带有 USB 集线器）上同时部署我的应用程序，因为它无法区分它们。

我正在考虑更改内部序列号的预部署过程，这可能吗？序列号存储在哪里？

**注意：平板电脑是有根的**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T11:19:22.310

您需要`/sys/class/android_usb/android0/iSerial`使用每个设备的唯一值填充 sysfs 文件。大多数供应商使用自定义初始化脚本来执行此操作，该脚本将从持久系统属性或常规文件中读取值，并在每次开机时将其放入 sysfs 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T10:04:10.203

尝试编辑`/data/misc/wifi/serialno` 然后重新启动，它对我来说是一个永久的解决方案

这个号码的位置可能因安卓版本而异

序列号应该保存在一个文件中，里面只有序列号，没有`\n`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T09:05:42.943

通过编辑 /system 中的“build.prop”文件构建编号等。可以通过将属性 'ro.serialno=' 添加到 build.prop 文件来更改序列号

# php - Facebook javascript + php，如何保证数据的有效性？

> ID：14334658
> 
> 赞同：1
> 
> 时间：2013-01-15T09:31:30.417
> 
> 标签：php, javascript, facebook

我在前端使用 facebook 的 javascript SDK：

```
jQuery("#pct_fbbutton").live("click",function(){
        FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            console.log('Conected');
            FB.api('/me/likes', function(response) { user_likes = response;
            FB.api('/me', function(response)       { user       = response; 
                send_server(user, user_likes);
            });
            });

        } else if (response.status === 'not_authorized') {
            console.log('not_authorized');
            login();
        } else {
            console.log('not_logged_in');
            login();
        }
    });
}); 
```

如您所见，在用户使用 facebook 登录后，我会通过 AJAX 将两个对象发送到 php 脚本（使用函数**send_server**）。

我可以在后端使用 $facebook->getAccessToken() 访问当前生成的令牌，但据我所知，这是从 javasript sdk 制作的 cookie 中检索的，考虑到所有前端数据都可以被黑客入侵，使用令牌如何确保用户数据在 php 上有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:36:44.137

答案是使用 PHP 而不是 JavaScript 来执行图形调用，尤其是当您的客户端脚本的唯一目的是将其发送到服务器时；

假设您进行了正确的 https 证书检查，那么在服务器上收集数据是确保数据未被篡改的唯一实用方法。

访问令牌的有效性也很简单，因为如果提供的 access_token 值无效，Facebook 将返回错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:50:37.577

在后端检索到 access_token 后，尝试获取用户的个人资料。如果获取成功，则客户端为您提供了正确的 access_token，您应该保存它。像下面的例子应该可以工作，但你可以找到更多的例子：

```
<?php

$facebook = new Facebook(array(
    'appId'  => $initMe["appId"],
    'secret' => $initMe["appSecret"],
));

$facebook->setAccessToken($initMe["accessToken"]);
$user = $facebook->getUser();

if ($user) { 
   $user_profile = $facebook->api('/me');
   print_r($user_profile);
}
?> 
```

# c - 为什么 ffdec_h264 不在 gstreamer 中提供调试信息？

> ID：14334659
> 
> 赞同：1
> 
> 时间：2013-01-15T09:31:31.180
> 
> 标签：c, plugins, h.264, gstreamer

我正在 gstreamer 上进行多媒体应用程序调试，并且正在使用`GST_DEBUG`选项进行调试。例如下面的命令

```
GST_DEBUG=filesrc:5, qtdemux:5, ffdec_h264:5 gst-launch filesrc location=data/bdmp4/rihanna0.mp4 ! qtdemux name=demuxer demuxer. ! queue ! faad ! audioconvert ! audioresample ! autoaudiosink demuxer. ! queue ! ffdec_h264 ! ffmpegcolorspace ! autovideosink 
```

将对输入的 mp4 文件进行解码，同时生成有关 gstreamer 插件`qtdemux`、`filesrc`和`ffdec_h264`. 该命令的管道表示是

![在此处输入图像描述](../Images/a133dca92c57ef63360b2be98a1659f9.png)

我的问题是上面的命令显示了有关插件的调试信息`qtdemux`，`filesrc`如下所示

```
0:00:00.018162514 [334m12243[00m      0x219a4f0 [32;01mINFO   [00m [00m                 filesrc gstfilesrc.c:374:gst_file_src_set_location:[00m filename : data/bdmp4/rihanna0.mp4
0:00:00.018222356 [334m12243[00m      0x219a4f0 [32;01mINFO   [00m [00m               filesrc gstfilesrc.c:375:gst_file_src_set_location:[00m uri      :     file:///home/leonzo/Documents/workspace/videc/videcoframework/data/bdmp4/rihanna0.mp4
0:00:00.062045799 [334m12243[00m      0x219a4f0 [32;01mINFO   [00m [00m             filesrc gstfilesrc.c:969:gst_file_src_start:<filesrc0>[00m opening file data/bdmp4/rihanna0.mp4
0:00:00.062195045 [334m12243[00m      0x219a4f0 [32;01mINFO   [00m [00m             filesrc gstfilesrc.c:969:gst_file_src_start:<filesrc0>[00m opening file data/bdmp4/rihanna0.mp4
0:00:00.062564845 [334m12243[00m      0x2415c50 [37mLOG    [00m [00m             qtdemux qtdemux.c:3810:gst_qtdemux_loop:<demuxer>[00m loop at position 0, state 0
0:00:00.062671771 [334m12243[00m      0x2415c50 [37mLOG    [00m [00m             filesrc gstfilesrc.c:829:gst_file_src_create_read:<filesrc0>[00m Reading 16 bytes at offset 0x0
0:00:00.062717752 [334m12243[00m      0x2415c50 [36mDEBUG  [00m [00m             qtdemux qtdemux.c:1982:extract_initial_length_and_fourcc:[00m length 0x00000018
0:00:00.062746012 [334m12243[00m      0x2415c50 [36mDEBUG  [00m [00m             qtdemux qtdemux.c:1984:extract_initial_length_and_fourcc:[00m atom type ftyp
0:00:00.062782358 [334m12243[00m      0x2415c50 [37mLOG    [00m [00m             filesrc gstfilesrc.c:829:gst_file_src_create_read:<filesrc0>[00m Reading 24 bytes at offset 0x0
0:00:00.062808183 [334m12243[00m      0x2415c50 [36mDEBUG  [00m [00m             qtdemux qtdemux.c:1911:qtdemux_parse_ftyp:<demuxer>[00m major brand: mp42
0:00:00.062831369 [334m12243[00m      0x2415c50 [37mLOG    [00m [00m             qtdemux qtdemux.c:3810:gst_qtdemux_loop:<demuxer>[00m loop at position 24, state 0
0:00:00.062854234 [334m12243[00m      0x2415c50 [37mLOG    [00m [00m             filesrc gstfilesrc.c:829:gst_file_src_create_read:<filesrc0>[00m Reading 16 bytes at offset 0x18
0:00:00.062888181 [334m12243[00m      0x2415c50 [36mDEBUG  [00m [00m             qtdemux qtdemux.c:1982:extract_initial_length_and_fourcc:[00m length 0x024a4f05
0:00:00.062904672 [334m12243[00m      0x2415c50 [36mDEBUG  [00m [00m             qtdemux qtdemux.c:1984:extract_initial_length_and_fourcc:[00m atom type mdat
0:00:00.062922459 [334m12243[00m      0x2415c50 [37mLOG    [00m [00m             qtdemux 
.... 
```

但它没有给出关于`ffdec_h264`插件的任何调试报告。

如何开启插件调试`ffdec_h264`？或者是否有另一个接受调试的 h264 gstreamer 解码插件

谢谢你的任何回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T20:40:23.203

ffdec_h264 没有自己的调试类别。所有gstffmpeg元素的类别都是ffmpeg，所以你可以做ffmpeg:5，或者我做的*ff*:5

# python - 对 cmd Python 模块使用 utf-8 输入

> ID：14334664
> 
> 赞同：1
> 
> 时间：2013-01-15T09:31:40.887
> 
> 标签：python, unicode, utf-8, command-line-interface

在创建一个小型 CLI 笔记本应用程序的过程中，我决定使用[`cmd`](http://docs.python.org/2/library/cmd.html)Python 库（另请参阅[`cmd`](http://pymotw.com/2/cmd/index.html#module-cmd)PyMOTW）。

我的外壳是 UTF-8。

```
→ echo $LANG
fr_FR.utf-8
→ echo $LC_ALL
fr_FR.utf-8 
```

它运行良好。

```
→ echo "東京"
東京 
```

启动我的小应用程序的代码并尝试使用 utf-8：

```
→ python nb.py 
log> foobar
2013-01-15 foobar
log> æ±äº¬
2013-01-15 æ±äº¬ 
```

**已编辑**预期的输入/输出是。当我输入 utf-8 字符时，在这种情况下是重音字符或日文字符，我得到了垃圾。

```
log> 東京
2013-01-15 東京 
```

因此，当启动程序时，命令行会更改输入的类型。

```
#!/usr/bin/env python2.7
# encoding: utf-8
import datetime
import os.path
import logging
import cmd

ROOT = "~/test/"
NOTENAME = "notes.md"

def todaynotepath(rootpath, notename):
    isodate = datetime.date.today().isoformat()
    isodate.replace("-", "/")
    return rootpath + isodate.replace("-", "/") + "/%s" % (notename)

def addcontent(content):
    logging.info(content)

class NoteBook(cmd.Cmd):
    """Simple cli notebook."""
    prompt = "log> "

    def precmd(self, line):
        # What is the date path NOW
        notepath = todaynotepath(ROOT, NOTENAME)
        # if the directory of the note doesn't exist, create it.
        notedir = os.path.dirname(notepath)
        if not os.path.exists(notedir):
            os.makedirs(notedir)
        # if the file for notes today doesn't exist, create it.
        logging.basicConfig(filename=notepath, level=logging.INFO, format='%(asctime)s - %(message)s')
        return cmd.Cmd.precmd(self, line)

    def default(self, line):
        if line:
            print datetime.date.today().isoformat(), line
            addcontent(line)

    def do_EOF(self, line):
        return True

    def postloop(self):
        print

if __name__ == "__main__":
    NoteBook().cmdloop() 
```

所以我想在原始的 cmd 类中可能有一些东西需要覆盖。我检查了模块，但还没有运气。

编辑 2：`LESSCHARSET`按照@dda 的建议添加

```
LANG=fr_FR.utf-8
LANGUAGE=fr_FR.utf-8
LC_ALL=fr_FR.utf-8
LC_CTYPE=fr_FR.UTF-8
LESSCHARSET=utf-8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:17:43.843

我认为在 SO 上还有另一个类似的问题，但专门针对 C 共享库模块；这个答案在那里可能更合适，但我现在找不到链接`:)`

简而言之，我的回答是 -`locale.setlocale(locale.LC_ALL, '')`在加载模块之前尝试（我`cmd`自己还没有使用过）。更详细地说：

我试图将 SWIG Python 绑定用于 Subversion (SVN)。这些基本上是 SWIG 直接从 SVN C 库代码 ( `libsvn1`) 生成的 Python 自动接口。当我`svn status MyWorkingCopy`从终端运行时，它会挂接到`libsvn`代码中——而且它多年来一直没有失败（对于那个存储库）。但是，当我从同一个终端运行 Python 示例（`svn status`执行`libsvn`与.

这意味着 Python 以某种方式“影响”了库在字符集方面的行为。但我的终端不断报告：

```
$ locale
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE="en_US.UTF-8"
...
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

因此，这与终端/shell（`bash`在这种情况下）的想法无关 - 它与底层 C 代码（`libsvn`在这种情况下）对当前设置的看法有关。我认为，同样的情况也适用于 python：

```
$ python -c 'import locale; print locale.getdefaultlocale()'
('en_US', 'UTF-8') 
```

所以，现在是关于查看 C 代码看到的内容，从终端运行时与从 Python 运行时（在同一终端中）。进一步调试`libsvn`，事实证明它实际上来自另一个库`libapr`（Apache Portable Runtime），SVN 使用它来分配内存。我最终做的是重复在独立 C 程序`libsvn`中使用的字符串复制；`libapr`然后通过 SWIG 将其构建为 Python 模块。这个程序，`aprtest`接受一个字符串作为参数，调用`libapr`引擎来复制它，并显示结果；它的来源发布在这里：

*   [http://sdaaubckp.sourceforge.net/dbg/swig-py/aprtest/](http://sdaaubckp.sourceforge.net/dbg/swig-py/aprtest/)

请参阅脚本[build-aprtest.sh](http://sdaaubckp.sourceforge.net/dbg/swig-py/aprtest/build-aprtest.sh)了解我使用过的库版本（Ubuntu 11.04）；构建，运行`bash build-aprtest.sh`。

现在，如果你在终端中运行这样构建的可执行文件，你会得到：

```
$ locale
LANG=en_US.UTF-8
...
$ ./aprtest "test"
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 0 
(*dest)->data: test
$ ./aprtest "test東京"
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 22 
```

尽管终端报告，`libapr`引擎在命令行输入 UTF-8 时显然失败了`UTF-8`。`aprtest_s`当我们通过 Python作为共享模块（称为）运行时：

```
$ python -c 'import aprtest_s; aprtest_s.pysmain("test")'
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 0 
(*dest)->data: test
$ python -c 'import aprtest_s; aprtest_s.pysmain("test東京")'
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 22 
```

...同样的事情发生了（*顺便说一句，对于 SVN 和 APR 的相同问题，但对于 Perl，请参阅[Is there a variable or function that return the native platform encoding (APR_LOCALE_CHARSET)](http://www.perlmonks.org/?node_id=740533)*）。所以我们可以得出结论：

*   C 程序是直接从终端运行还是通过 Python 运行都没有关系 - C 程序只看到与调用程序可能看到的不同的语言环境/编码设置
*   ASCII 字符串没有问题，只有 UTF-8 字符串

那么，svn 客户端如何从终端正常工作，同时最终使用`libapr`而不会崩溃？好吧，可以看出[aprtest_s.c](http://sdaaubckp.sourceforge.net/dbg/swig-py/aprtest/aprtest_s.c)的源代码的注释；它是通过使用 C 函数设置程序自己的语言环境，`setlocale(LC_CTYPE,"")`事实证明，它[设置了进程的语言环境的所有类别](http://pubs.opengroup.org/onlinepubs/009695399/functions/setlocale.html)。这个问题实际上是在[apr-dev 邮件列表中提到的： Re: Misbehavior of apr_os_locale_encoding on Windows](http://mail-archives.apache.org/mod_mbox/apr-dev/201004.mbox/%3c4BC4B92D.2000500@xbc.nu%3e)：

> ...从 55 个不同的当前语言环境中选择一个可能只能由应用程序正确完成，而不是 APR。

因此，通过在 C 应用程序中进行编码`setlocale()`，我们显然明确地选择了默认语言环境，因此`libapr`了解它。在测试用例中，此调用`setlocale`必须发生在调用`apr_xlate_open`.

现在，发布的版本`aprtest`不做`setlocale`，所以当我们使用 Python 版本时，我们可以看到 Python 发生了什么（还要注意[这个](http://www.velocityreviews.com/forums/t730678-how-does-python-get-the-value-for-sys-stdin-encoding.html)）`locale.setlocale()`：

```
$ PYTHONIOENCODING='utf-8' echo 'import sys;print sys.stdin.encoding' | python
None
$ echo 'import sys;print sys.stdin.encoding' | PYTHONIOENCODING='utf-8' python
utf-8
$ locale
LANG=en_US.UTF-8
LANGUAGE=en_US:en
...
$ python
Python 2.7.1+ (r271:86832, Sep 27 2012, 21:16:52) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import aprtest_s
>>> aprtest_s.print_locale()
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
>>> aprtest_s.pysmain("test")
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 0 
(*dest)->data: test
>>> aprtest_s.pysmain("test東京")
LC_CTYPE 0 CODESET 14
ANSI_X3.4-1968
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 22 
>>> import locale
>>> print locale.getdefaultlocale()
('en_US', 'UTF-8')
>>> print locale.getlocale()
(None, None)
>>> import sys
>>> print sys.stdin.encoding
UTF-8
>>> locale.setlocale(locale.LC_ALL, '')
'en_US.UTF-8'
>>> print sys.stdin.encoding
UTF-8
>>> print locale.getlocale()
('en_US', 'UTF-8')
>>> aprtest_s.pysmain("test")
LC_CTYPE 0 CODESET 14
UTF-8
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 0 
(*dest)->data: test
>>> aprtest_s.pysmain("test東京")
LC_CTYPE 0 CODESET 14
UTF-8
apr_xlate_open: apr_err=0
apr_xlate_conv_buffer apr_err == 0 
(*dest)->data: test東京
>>> 
```

因此，为了确定 C 应用程序在 Python 中看到的是什么 - 使用`locale.getlocale()`( ~~NOT`locale.getdefaultlocale()`~~ )。我现在理解的方式是`getdefaultlocale`返回一些保存在某处的操作系统/用户设置，这些设置被*认为*是默认设置，但在应用程序启动时必须*应用为默认设置；*并`getlocale`获取实际的、当前应用的语言环境设置。我猜，当我们`setlocale`使用空字符串调用时，这会导致其余代码：读取默认设置（由 给出的设置`getdefaultlocale`），*然后*将默认设置应用为当前设置。

最后一点 - 尽管它看起来相关，但`stdin`/的编码设置`stdout`（显然）与当前语言环境的编码无关（至少正如在该环境中运行的 C 程序所看到的那样）。

希望这对某人有帮助，
干杯！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:51:02.797

你的代码对我来说非常适合，卡尔。看到这个：

```
dda$ ./nb.py 
log> tagada
2013-01-15 tagada
log> 香港
2013-01-15 香港
log> 
```

该`notes.md`文件包含正确的条目。所以我认为这不是`cmd`问题所在，但可能是您的终端设置中的问题。尝试添加

```
export LESSCHARSET=utf-8 
```

在你的`.profile`.

# python - 初始化后更改 CharField 值

> ID：14334667
> 
> 赞同：0
> 
> 时间：2013-01-15T09:31:51.977
> 
> 标签：python, django, django-forms, django-widget

我有一个页面“A”，其中包含一些 CharField 以编程方式填充。要填充的值来自另一个页面“B”，该页面由仅在显示页面时（在 init 之后）执行的 javascript 代码打开。这是这种情况：

1.  A页`__init__`
2.  在初始化期间，启动一个监听 8080 端口的线程
3.  页面A初始化并显示-->执行模板中的javascript
4.  javascript 标签打开一个新网页，将数据发送到 8080
5.  线程读取页面B发送的数据，并**尝试填充CharFields**

有没有办法做到这一点？不知道。。。刷新方法。。。

如果不可能...

*   我需要一种`init`在表单 OR之前调用 javascript 函数的方法
*   一种修改所创建页面的 HTML 代码的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:44:03.497

这似乎过于复杂。除此之外，捆绑等待某人填写表格的整个过程是一个坏主意。

虽然我不能真正理解你想要做什么，但似乎有更好的解决方案。这里有几种可能性：

*   页面A在初始化表单之前重定向到页面B，B在提交时重定向回A；
*   页面 A 加载弹出窗口，然后通过 Ajax 加载表单；
*   页面 B 在通过客户端 Javascript 提交时动态填写 A 中的表单字段；

等等。

# firefox - 无法在 FireFox 上最近发布的 webdriver 中“单击”

> ID：14334678
> 
> 赞同：0
> 
> 时间：2013-01-15T09:32:25.607
> 
> 标签：firefox, click, webdriver, intermittent

我在单击 Firefox 上的按钮或超链接时遇到间歇性问题。我正在使用 webdriver 版本 2.27 和 FF17。

这些按钮是简单的 html 按钮 -

```
<input class="btn" type="button" title="AddP" onclick="navigateToUrl('/p/tyy/SelectSearch?addTo=006y67&retURL=%2F00999yu2Boy9','MM_LIST','addP');" name="addP" value="Add P"> 
```

我使用定位器：`name=addP`

对于超链接，我使用定位器作为：`link=hyperlinktext`

点击不会有任何异常失败，它只会突出显示按钮或链接，但不会执行实际的点击。

故障频率为3次。

谢谢天空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:01:39.847

这是我发现的：

**[问题1](https://stackoverflow.com/questions/7709185/selenium-2-webdriver-not-able-to-find-link)：**我用`By.linkText("test test").click`的是应该的`By.partialLinkText("test test").click`。感谢stackoverflow的回答。

**问题 2：**我重写了失败按钮的 css 定位器，以从上面某个父级的类开始。例如，而不是

> css=输入[名称='j_id0:j_id2:j_id3:j_id4']

我现在正在使用

> css=.individualPalette 输入[名称='j_id0:j_id2:j_id3:j_id4']

它一直有效。我不确定为什么？

我仍然要重新运行我的脚本几次，以确保这些有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:21:33.203

至少升级到 Selenium 2.28。在此之前，Firefox 17 存在一些错误。

# database - JPA + Spring如何使用自定义表和数据初始化数据库

> ID：14334681
> 
> 赞同：1
> 
> 时间：2013-01-15T09:32:30.737
> 
> 标签：database, spring, jpa, acl

在我的应用程序中，我使用 Spring 上下文和 JPA。我有一组带有注释的实体`@Entity`，它们的表是在系统启动期间自动创建的。最近我开始使用 Spring ACL，所以我必须有[以下额外的 DB 模式](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/appendix-schema.html)，并且我不希望将这些表映射到实体（只是我不需要它们，因为 Spring ACL 独立管理它们）。

1.  我想自动将管理员用户帐户插入到 `User`实体表中。如何正确地做到这一点？
2.  我想在系统启动期间初始化 Spring ACL 自定义表，但是 SQL 脚本文件似乎不是一个好的解决方案，因为如果我使用不同的数据库进行生产和功能测试，不同的 SQL 方言不允许我在两者上正确执行脚本引擎（例如，当使用 MySQL 和 HSQL 时）。

起初我尝试`ServletListener`在 servlet 初始化期间使用它检查数据库并添加必要的数据和模式，但这不适用于集成测试（因为根本不涉及 servlet）。

我想要实现的是在 JPA 初始化所有实体表之后启动的 Spring bean (?)，使用注入的 DAO 插入所有启动数据并以某种方式创建 Spring ACL 模式。然后 - 我希望将 bean 从 IoC 中删除（因为我不再需要它了）。是否可以？

或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-11T09:08:28.200

默认 JPA 允许您在加载 persistence.xml 时添加 SQL 脚本：

[http://docs.oracle.com/javaee/7/tutorial/persistence-intro005.htm](http://docs.oracle.com/javaee/7/tutorial/persistence-intro005.htm)

将此属性添加到您的 persistence.xml 文件中：

```
 <property name="javax.persistence.sql-load-script-source"
              value="META-INF/sql/data.sql" /> 
```

并用您的默认值填充 data.sql 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:20:42.597

如果您使用的是 EclipseLink，则可以在 JPA 登录后使用 SessionEventListener 来执行代码。您可以在 postLogin 事件中执行架构创建和设置。

您可以使用 EclipseLink (org.eclipse.persistence.tools.schemaframework) 中的架构框架以独立于数据库平台的方式创建表和 DDL。（TableDefinition、SchemaManager 类）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T04:57:55.550

我使用[PostConstruct](http://docs.oracle.com/javase/8/docs/api/javax/annotation/PostConstruct.html)注释来调用初始化方法。

如文档所述：**PostConstruct 注释用于需要在完成依赖注入以执行任何初始化后执行的方法。** 您可以简单地添加一个带有 @PostConstruct 注解的方法的 spring bin，这些方法将在创建表后执行（或者我们可以说，它们在其他 bean 准备好之后执行）。

代码示例：

```
@Component
public class EntityLoader {

    @Autowired
    UserRepository userRepo;

    @PostConstruct
    public void initApiUserData() {
        User u = new User();
        // set user properties here
        userRepo.save(u);
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:40:00.280

如果你使用hibernate，那么`import.sql`在类路径根目录下创建一个sql脚本。Hibernat 将在启动时执行它。- 这在以前的休眠版本中有效。在当前版本 4.1 的文档中，我没有发现任何有关此功能的提示。

但是 Hibernate 4.1 还有一个特性

财产：`hibernate.hbm2ddl.import_files`

> 包含在 SessionFactory 创建期间执行的 SQL DML 语句的可选文件的逗号分隔名称。这对于测试或演示很有用：例如，通过添加 INSERT 语句，您可以在部署数据库时使用最少的数据集填充数据库。文件顺序很重要，给定文件的语句在以下文件的语句之前执行。这些语句仅在创建模式时执行，即如果 hibernate.hbm2ddl.auto 设置为 create 或 create-drop。
> 
> 例如 /humans.sql,/dogs.sql

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-09T04:19:53.397

你可以尝试使用[flyway](http://flywaydb.org/)

*   使用 SQL DDL 创建表作为 SQL 迁移和
*   可能使用基于 SQL 或 Java 的迁移将一些数据放入表中。如果需要环境或其他信息，您可能想要使用后者。

这比听起来要容易得多，如果不是必须的话，您最终也会获得飞行路线本身作为奖励。

# java - Spring 和 Jackson 集成

> ID：14334682
> 
> 赞同：1
> 
> 时间：2013-01-15T09:32:32.197
> 
> 标签：java, json, spring

我在使用 JacksonMapper 在 JSON 对象处返回 Java 类时遇到此异常。

org.codehaus.jackson.map.JsonMappingException: No serializer found for class $Proxy57 and properties found to create BeanSerializer (为避免异常，禁用 SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS) ）（通过参考链：java.util.HashMap["exception "]->org.springframework.core.convert.ConversionFailedException["targetType"]->org.springframework.core.convert.TypeDescriptor["annotations"])

```
at org.codehaus.jackson.map.ser.StdSerializerProvider$1.serialize(StdSerializerProvider.java:55)

at org.codehaus.jackson.map.ser.ArraySerializers$ObjectArraySerializer.serialize(ArraySerializers.java:66)

at org.codehaus.jackson.map.ser.ArraySerializers$ObjectArraySerializer.serialize(ArraySerializers.java:35)

at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:218)

at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:122)

at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:218)

at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:122)

at org.codehaus.jackson.map.ser.MapSerializer.serializeEntries(MapSerializer.java:131)

at org.codehaus.jackson.map.ser.MapSerializer.serialize(MapSerializer.java:74)

at org.codehaus.jackson.map.ser.MapSerializer.serialize(MapSerializer.java:19)

at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:260)

at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:212)

at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:694)

at org.springframework.web.servlet.view.json.MappingJacksonJsonView.renderMergedOutputModel(MappingJacksonJsonView.java:151)

at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)

at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)

at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)

at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)

at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)

at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)

at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)

at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)

at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)

at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)

at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:343)

at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)

at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.oauth.provider.OAuthProviderProcessingFilter.doFilter(OAuthProviderProcessingFilter.java:173)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.oauth.provider.OAuthProviderProcessingFilter.doFilter(OAuthProviderProcessingFilter.java:193)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.oauth.provider.OAuthProviderProcessingFilter.doFilter(OAuthProviderProcessingFilter.java:193)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:109)

at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355)

at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149)

at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)

at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)

at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)

at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:206)

at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:179)

at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
at java.lang.Thread.run(Thread.java:662) 
```

我想知道 Spring 创建了哪个类 $Proxy57 对象，以便我可以调试我的代码，而且我在服务器上发现这个错误也非常罕见。所以我没有得到正确的原因。此异常有时会导致我的服务器崩溃。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:24:57.510

当您使用 ORM 时，它会根据您持久保存的对象创建代理对象。这样，它可以通过该代理*延迟加载*（即，仅在需要时加载）信息。Jackson 不知道如何序列化这些代理，只是普通的 POJO。通常，当您将对象传递给 jackson 时，ORM 会话已经关闭并且延迟加载尝试失败。我确信您尝试序列化 ORM 代理对象的事实是您的问题的根本原因。

一种解决方案是在 ORM 中禁用延迟加载。当然，您将失去延迟加载带来的所有好处。仔细考虑您*延迟加载*的内容和不加载的内容（如果您使用我强烈建议的 JPA，请明确注释您的 POJO 关系）。

另一种解决方案是编写一个自定义的 Jackson 序列化程序，它知道如何序列化这些对象。

我在使用 hibernate 时遇到了同样的问题，这个[小模块](https://github.com/FasterXML/jackson-module-hibernate)就是这样做的：我的 Jackson 现在序列化 Hibernate 特定的对象和数据类型。

# backbone.js - 主干.js 集合获取 0 个结果导致错误

> ID：14334684
> 
> 赞同：0
> 
> 时间：2013-01-15T09:32:34.013
> 
> 标签：backbone.js

我有一个骨干集合，它设置为从 URL 获取结果（在我的情况下为事件），然后在解析方法中对响应执行一些数据操作。当 api 提供结果时（如下），获取成功并且一切都按预期运行。

```
{
  events: [
   { event1... },
   { event2... },
   ...
  ]
} 
```

但是，当结果集为空时（如下所示）， fetch 会运行其错误函数而不是成功调用，并且似乎根本不会执行我的 parse 方法。

```
{
  events: []
} 
```

这是否符合预期？如中，当有 0 个结果时，主干是否应该抛出错误，如果是这样，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:35:55.450

此错误是由 API HTTP 响应代码 (500) 触发的。结果，Backbone 的行为是正确的。

# excel - 将单元格选择从 Excel 复制到 JSF 2 组件中

> ID：14334688
> 
> 赞同：1
> 
> 时间：2013-01-15T09:32:49.007
> 
> 标签：excel, jsf-2, components, copy-paste

我需要将多个 excel 单元格的数据复制到 JSF2 组件中。不管它是primefaces、openfaces还是richfaces组件。Primefaces 有一个很好的组件叫做 sheet，但我不认为它提供了将数据从 excel 复制到它的功能。

谁能告诉我，有没有办法？我不想使用文件上传。

# wpf - '[WPFApplication].MainWindow' 的部分声明不得指定不同的基类

> ID：14334689
> 
> 赞同：0
> 
> 时间：2013-01-15T09:32:58.727
> 
> 标签：wpf, telerik, interop, window, radwindow

我在一个 `WPF\Telerik 项目中工作。我遇到了一个非常奇怪的问题，由于功能的相互依赖性，我无法使用解决方法。

我的项目具有自动注销功能，为此我必须使用如下所示的这段代码。

```
private void InitializeAutoLogoffFeature()
    {
        HwndSource windowSpecificOSMessageListener = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);
        windowSpecificOSMessageListener.AddHook(new HwndSourceHook(CallBackMethod));
        LogOffHelper.LogOffTime = logOffTime;
        LogOffHelper.MakeAutoLogOffEvent += new MakeAutoLogOff(AutoLogOffHelper_MakeAutoLogOffEvent);
        LogOffHelper.StartAutoLogoffOption();

    } 
```

在这`HwndSource windowSpecificOSMessageListener = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);`行代码中，我必须通过 window( `this`)。

因此必须使用因为构造函数只接受类型`[Window_Name]`来实现窗口。`Window``WindowInteropHelper``Window`

但是当我暗示如下

```
public partial class MainWindow : Window
{ 
```

我得到一个错误，

```
Partial declarations of '[WPFApplication].MainWindow' must not specify different base classes 
```

这`MainWindow`不是一个`Window`它的一个`Telerik window`。

XML 如下所示。

```
 <telerik:RadWindow x:Class="[WPFApplication].MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        Header="POS" Height="820" Width="1280" 
        WindowStartupLocation="CenterScreen">

    <telerik:RadWindow.Resources>
.. 
```

这是我的 App.xaml

```
<Application x:Class="[WPFApplication].App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow"
         >

<Application.Resources>

</Application.Resources> 
```

我也尝试过使用此代码`App.xaml.cs`

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        new MainWindow().Show();
        base.OnStartup(e);
    }
} 
```

我应该如何克服这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:38:30.993

如果你`MainWindow`是 a `RadWindow`，你需要

```
public partial class MainWindow : RadWindow 
```

因为你的窗口的类`XAML`和`.cs`需要是相同的：

```
<telerik:RadWindow x:Class="[WPFApplication].MainWindow" ...>
         ^^^^^^^^^ 
```

根据[这个线程](http://www.telerik.com/community/forums/wpf/window/show-in-taskbar.aspx)中的帖子，`RadWindow`使用一个`Window`可以像这样访问的容器

```
var window = this.ParentOfType<Window>(); 
```

因此您可以使用您的`RadWindow`as `MainWindow`（[知识库文章](http://www.telerik.com/support/kb/wpf/window/radwindow-as-main-window.aspx)）并将标准 WPF 窗口传递给 InteropHelper

# php - 将原始 http_referer 传递给其他页面

> ID：14334691
> 
> 赞同：0
> 
> 时间：2013-01-15T09:33:04.160
> 
> 标签：php, navigation, breadcrumbs, http-referer

我有一个使用单独的画廊页面设置的业务资料。这些页面的标题是一个 php 包含。

我正在尝试为此配置文件设置面包屑路径，因此我使用 http_referer 来跟踪我来自哪个列表页面。

```
if ($title == 'Business Profile'){
session_start();
$referer = $_SERVER['HTTP_REFERER'];
}
?> 
```

我遇到的问题是将 http_referer 作为变量从业务配置文件传递到图库页面。我将如何做到这一点，以便我可以从业务资料和图库链接回列表页面？如果我在图库页面上使用 http_referer，它只会带我回到我来自的个人资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:41:01.180

你可以使用cookies吗？例如在您的着陆页上；

```
if(!isset($_COOKIE['HTTP_REFERER']))
{
    $expiryTime = time()+(60*60*24); // Set to expire after 1 day
    setcookie('HTTP_REFERER',$_SERVER['HTTP_REFERER'],$expiryTime,'/');
} 
```

然后在所有其他页面上，您可以检测是否已经设置了 cookie；

```
if(isset($_COOKIE['HTTP_REFERER']))
{
    $referer = $_COOKIE['HTTP_REFERER'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:17:23.957

1）我应该检查引用地址是否来自我的服务器。

2）如果没有，您可以将其保存到会话或cookie。

3）最后你可以随心所欲地使用它；

```
<?php
session_start();
if(strstr($_SERVER['HTTP_REFERER'],$_SERVER['SERVER_NAME'])===FALSE){
    $_SESSION['refererPage']= $_SERVER['HTTP_REFERER'];
    // or set cookie by Stu
}
?> 
```

使用例如。

```
<?php
if(!empty($_SESSION['refererPage']))
    echo '<a href="'.$_SESSION['refererPage'].'">Back</a>';
?> 
```

# ruby-on-rails - 在 Rails 中使用 Ajax 作为整个页面渲染

> ID：14334694
> 
> 赞同：0
> 
> 时间：2013-01-15T09:33:19.287
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery, ruby-on-rails-3.2

在这里，我想通过 ajax 调用 _employee_registers.html.erb。只有搜索输出将使用 ajax 显示。我正在关注这个[http://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)。它运作良好。但我现在想在我的项目中实现它。

我的 index.html.erb

```
<%= link_to 'New Employee register', new_employee_register_path %>
<%= form_tag employee_registers_path, :method => 'get', :id => "employee_registers_search" do %>
  <p>
    <%= select_tag "fieldtype", options_for_select([ "name", "email" ], "name") %>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil%>
  </p>
  <div id="employee_registers"><%= render 'employee_registers' %></div>
<% end %>
<br /> 
```

我的 index.js.erb

```
$("#employee_registers").html("<%= escape_javascript(render("employee_registers")) %>"); 
```

我的 _employee_registers.html.erb 部分

```
<h1>Listing employees</h1>
<% @employee_registers.each do |employee_register| %>
<div class="span2 curve">
    <div class="profile_img">
        <%= image_tag employee_register.image.url,:size => "150x180"%>
</div>
         <p><strong><%= employee_register.first_name %><%= employee_register.last_name %>
         <br>
         <%= employee_register.department.name%><%=employee_register.division.name%><br>
            <%=mail_to employee_register.wemail%><br></strong></p>
    %><br/></br/>
<% end %>

</div>
<br /> 
```

我的 application.js

```
$(function() {
  $("#employee_registers th a").live("click", function() {
          $.getScript(this.href);
        return false;
         });
       $("#employee_registers_search input").keyup(function() {
       $.get($("#employee_registers_search").attr("action"), $("#employee_registers_search").serialize(), null, "script");
       return false;
  }); 
```

我的问题是，而不是只 refresing 那个 div

```
$("#employee_register").html 
```

它正在提供所有页面的输出，并且 ajax 不起作用。

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-wysihtml5/core.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-wysihtml5/index.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-responsive.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/companies.css?body=1" media="all" rel="stylesheet" type="text/css" />

<script media="all" src="/assets/bootstrap.js?body=1" type="text/javascript"></script> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:05:50.280

您的代码存在一些问题。

我认为主要问题是您希望您的表单根据搜索提供employee_registers，但您没有来自搜索操作的javascript响应。

假设您有这样的搜索操作

```
def search
 @employee_registers = Employee.where(:name => params[:search])
end 
```

然后在你的 search.js.erb 文件中

```
$("#employee_registers").append("<%= j(render @employee_registers)  %> 
```

（ j() 是 escape_javascript() 的别名）

在您的 _employee_registers.html.erb 部分

```
<div class="span2 curve">
    <div class="profile_img">
        <%= image_tag employee_register.image.url,:size => "150x180"%>
    </div>
    <p><strong><%= employee_register.first_name %><%= employee_register.last_name %>
    <br>
    <%= employee_register.department.name%><%=employee_register.division.name%><br>
    <%=mail_to employee_register.wemail%><br></strong></p>
    <br/></br/>
</div>
<br /> 
```

现在您必须更改 index.html.erb 文件中的一些代码

```
<%= link_to 'New Employee register', new_employee_register_path %>
<%= form_tag employee_registers_path, , :remote => true, :method => 'get', :id =>    "employee_registers_search" do %>
  <p>
    <%= select_tag "fieldtype", options_for_select([ "name", "email" ], "name") %>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil%>
  </p>
  <div id="employee_registers"></div>
<% end %>
<br /> 
```

我没有对此进行测试，您的代码中的其他地方可能存在错误。您的问题包含大量代码，并且您解释了错误是什么，这很好。但是，不清楚你想做什么。试着多解释一点，你会得到更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:46:49.273

我可以看到两件事，

1）制作你的表格`remote => true`

```
<%= form_tag employee_registers_path, :method => 'get', :remote => true, :id => "employee_registers_search" do %> 
```

2）您在搜索表单本身内拥有用户列表，这有点不寻常，尝试将其放在`form`标签之外（这与您的错误无关，只是作为一种练习）

高温高压

# c# - 匿名向asp表添加控件

> ID：14334697
> 
> 赞同：0
> 
> 时间：2013-01-15T09:33:56.297
> 
> 标签：c#, asp.net, anonymous-methods

我想匿名执行以下功能。我该怎么做-

```
 TableRow tr = new TableRow();
            TableCell tc = new TableCell();
            Label lbl = new Label();
            lbl.Text = link;
            tc.Controls.Add(lbl);
            tr.Cells.Add(tc);
            tblMain.Rows.Add(tr); 
```

**更新**

就像我们一样——

```
tblMain.Rows.Add(new TableRow(/* Here I will add a TableCell */)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:44:30.060

没有匿名方法可以做你想做的事。

您最接近的是类初始化程序，您在问题中提到了它：

`tblMain.Rows.Add(new TableRow() { Property = "SomeValue" })`

类初始化器允许你做的是`{ }`你在上面一行看到的东西。因此，您可以用更少的代码行添加控件，但您并没有真正获得任何好处，但这是一种偏好。

编辑：

为了回应关于在一行代码中执行此操作的评论，让我在此阻止您。您需要在这里查看更大的图景 - 您认为一行代码对于另一位开发人员来说有多容易理解，如果您不在，他们可能必须照顾该代码？

还要考虑调试。如果您正在单步执行代码并且其中一个控件出现问题，则能够将鼠标悬停在变量名称上会更容易，也更方便，那么您必须将头绕在单行上并尝试通过即时/本地窗口挖掘属性。

相信我，我以前使用过类似的代码，最终结果是我希望找到负责的开发人员并将他们的手放在设置为 170C 的 George Foreman 烤架上。

如果您是唯一会查看此代码的开发人员，那么就足够公平了。但是，据我所知，没有办法将此代码重构为单行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:51:41.150

假设您的意思是自主：由于您可以创建一个表格行，因此代码有效。要创建多个，请使用 for 循环。

```
int iterationTimes = 10;

for (int i = 1; i <= iterationTimes ; i++)
{
    TableRow tr = new TableRow();
    TableCell tc = new TableCell();
    Label lbl = new Label();
    lbl.Text = link;
    tc.Controls.Add(lbl);
    tr.Cells.Add(tc);
    tblMain.Rows.Add(tr);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:54:04.970

```
//Declare a new table and add it as child of tdparent
        Table table1 = new Table();
        table1.ID = "tablename";
        table1.Style.Add(HtmlTextWriterStyle.Width, "auto");
        tdparent.Controls.Add(table1);

        //Decalre a new table row and add it as child of tableskills
        TableRow tr1 = new TableRow();
        tr1.ID = "tr1Skills";
        table1.Controls.Add(tr1);

        CompanyBAL objBAL = new CompanyBAL();

        int id;

        if (ddlFunctional.SelectedValue == "All")
        {
            id = -99;
        }
        else
        {
            id = Convert.ToInt32(ddlFunctional.SelectedValue.ToString());
        }

        DataSet ds = objBAL.GetSkillSets(id);

        for (int i = 0; i < ds.Tables[1].Rows.Count; i++)
        {
            TableCell td = new TableCell();

            td.ID = "td" + ds.Tables[1].Rows[i]["skilltype"].ToString();
            td.Style.Add(HtmlTextWriterStyle.VerticalAlign, "top");
            td.Style.Add(HtmlTextWriterStyle.Width, "auto");

            tr1.Controls.Add(td);

            // add CheckBoxList to tabelCell
            CheckBoxList cbl = new CheckBoxList();

            cbl.ID = "cbl" + ds.Tables[1].Rows[i]["skilltype"].ToString();
            cbl.Style.Add(HtmlTextWriterStyle.Width, "auto");

            td.Controls.Add(cbl);
        }

        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            TableCell tbCell = ((TableCell)tr1.FindControl("td" + ds.Tables[0].Rows[i]["skilltype"].ToString()));

            CheckBoxList cb= ((CheckBoxList)tbCell.FindControl("cbl" + ds.Tables[0].Rows[i]["skilltype"].ToString()));

            cb.Items.Add(new ListItem(ds.Tables[0].Rows[i]["skillname"].ToString(), ds.Tables[0].Rows[i]["skillname"].ToString()));

        } 
```

您可以在表格内添加表格控件和控件

# ruby-on-rails-3 - 尽管请求似乎已正确设置，但由于模型验证，Curl Post 请求引发错误 (422)

> ID：14334699
> 
> 赞同：0
> 
> 时间：2013-01-15T09:34:02.437
> 
> 标签：ruby-on-rails-3, json, curl

我正在尝试创建一个简单的 crud 接口来吐出一些 json。(API)

我正在使用鼓舞人心的狂欢代码库来制作它，到目前为止，还没有任何令牌可以确保它的安全

请看下面的代码：

### 助手/api/api_helper.rb

```
module Api
  module ApiHelper
    def required_fields_for(model)
      required_fields = model._validators.select do |field, validations|
        validations.any? { |v| v.is_a?(ActiveModel::Validations::PresenceValidator) }
      end.map(&:first)
    end

    def product_attributes
      [:id, :name]
    end
  end
end 
```

### 意见/api/products/new.rabl

```
object false
node(:attributes) { [*product_attributes] }
node(:required_attributes) { required_fields_for(Product) } 
```

### 控制器/api/products_controller.rb

```
def new
end

def create
  @product = Product.new(params[:product])
  if @product.save
    respond_with(@product, :status => 201, :default_template => :show)
  else
    invalid_resource!(@product)
  end
end 
```

当我通过 curl 进行发布请求时，由于产品名称不应为空（模型验证），该方法返回 422 Unprocessable Entity 错误。如您所见，名称设置正确！

没发现这有什么问题（序列化？）谢谢你的想法

```
curl -v -H "Accept: application/json" -H "Content-type: application/json" -X POST -d ' {"attributes":{"name":"test"}}'  http://localhost/api/brands

* About to connect() to localhost port 80 (#0)
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 80 (#0)
> POST /api/products HTTP/1.1
> User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8r zlib/1.2.3
> Host: localhost
> Accept: application/json
> Content-type: application/json
> Content-Length: 31
> 
< HTTP/1.1 422 Unprocessable Entity
< Content-Type: application/json; charset=utf-8
< X-Meta-Request-Version: 0.2.0
< X-UA-Compatible: IE=Edge
< Cache-Control: no-cache
< X-Request-Id: e32527947ed4ae51052b4d65d9d4539f
< X-Runtime: 0.042655
< Connection: close
< 
* Closing connection #0
{"errors":{"name":["doit \u00eatre rempli(e)"]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:40:41.197

JSON 有效负载应该嵌套在模型的名称下。尝试这个：

```
-d ' {"product":{"name":"test"}}' 
```

# javascript - Ember.js - 添加一个 maxBinding 到 Ember.TextField

> ID：14334706
> 
> 赞同：2
> 
> 时间：2013-01-15T09:34:19.397
> 
> 标签：javascript, ember.js, handlebars.js

我想知道实现以下目标的最简单方法是什么：

```
{{view Ember.TextField type="number" maxBinding="quantity" valueBinding="firstName"}} 
```

以上不起作用 - 我需要做的就是将值绑定到`max`属性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:39:44.567

默认情况下不绑定 max 属性。见[text_field.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/text_field.js#L56)

最简单的方法是通过像这样扩展现有的文本字段来创建自己的文本字段：

```
App.MyTextField = Ember.TextField.extend({
    attributeBindings: ['max']
}); 
```

然后你应该能够做到这一点：

```
{{view App.MyTextField type="number" maxBinding="quantity" valueBinding="firstName"}} 
```

# canvas - 在画布上绘制多个多行文本视图？

> ID：14334707
> 
> 赞同：0
> 
> 时间：2013-01-15T09:34:45.537
> 
> 标签：canvas, textview, draw, multiline

我正在一个 Android 项目中工作，我想在给定宽度的画布上绘制三个不同的用户输入。这三个输入应具有可定制的布局/不同的打印。想一想报纸上的文字广告，其中标题、内容和联系数据有不同的文字布局。到目前为止，我使用[此](http://www.helloandroid.com/tutorials/how-draw-multiline-text-canvas-easily)解决方案来格式化有关换行符等的输入。

现在它看起来像这样：
`TextView tv_title = new TextView(this);
tv_title.setText(titleText);
tv_title.setDrawingCacheEnabled(true);
tv_title.setWidth(advert_width);
advert_height = tv_title.getMinimumHeight();`

`Canvas canvas = new Canvas();
Bitmap b =Bitmap.createBitmap(advert_width,advert_height, Bitmap.Config.ARGB_8888);
canvas.setBitmap(b);
Paint backgroundPaint = new Paint();
backgroundPaint.setColor(Color.WHITE);
canvas.drawPaint(backgroundPaint);`

我认为这会将位图的大小完全调整为 TextView 所需的高度，这样我就可以保存每个“Text-Bitmap”的高度并将它们绘制在另一个画布上。
不幸的是，TextView.getMinHeight() 和 View.getMinimumHeight() 都抛出一个异常，我想它们只有在你首先使用 Setter 时才有效。

谁能想到另一种解决方案如何获得多行 Textview 的高度？

最好的问候，
克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:48:23.107

我建议您参考我在此处找到的答案并扩展您的特定需求。 [https://stackoverflow.com/a/15092729/1759409](https://stackoverflow.com/a/15092729/1759409)

例如，这三种方法首先发送一个设置尺寸的矩形来填充文本。矩形的初始大小可以通过调用底部的两个方法来创建适合文本的尺寸来计算。在这里发表评论，我可以进一步扩展。

# xcode - xcrun 找不到 Xcode 路径

> ID：14334708
> 
> 赞同：8
> 
> 时间：2013-01-15T09:34:45.787
> 
> 标签：xcode, command-line, xcrun

Mac OS X 10.8.2
Xcode 4.5.2（安装在 /Applications/Xcode.app）

尝试
`xcode-select -switch /Applications/Xcode.app`
之后
`xcode-select -print-path`
输出正确的路径（/Applications/Xcode.app）。但因
`xcrun -find gcc`
错误
xcrun 失败：错误：无法统计活动 Xcode 路径“/Developer/Xcode.app/Contents/Developer”。（没有这样的文件或目录）。

**更新 1：**
这里是权限说明符

```
ls -l /Applications/Xcode.app 
```

总计 0
drwxr-xr-x@ 16 我的管理员 544 Oct 30 23:38 内容

```
ls -l /Applications/Xcode.app/Contents 
```

总计 24
drwxr-xr-x@ 8 我的管理员 272 10 月 30 日 23:30 应用程序
drwxr-xr-x@ 9 我的管理员 306 10 月 30 日 23:36 开发人员
drwxr-xr-x@ 5 我的管理员 170 10 月 30 日 23:30 框架
-rw-r--r--@ 1 我的管理员 15289 10 月 19 日 14:22 Info.plist
drwxr-xr-x@ 3 我的管理员 102 8 月 5 日 08:03 库
drwxr-xr-x@ 3 我的管理员 102 10 月 30 日23:10 MacOS
drwxr-xr-x@ 16 我的管理员 544 Oct 30 23:37 OtherFrameworks
-rw-r--r--@ 1 我的管理员 19 年 10 月 8 日 14:22 PkgInfo
drwxr-xr-x@ 56 我的管理员 1904 10 月 30 日 23:36 插件
drwxr-xr-x@ 52 我的管理员 1768 10 月 30 日 23:46 资源
drwxr-xr-x@ 17 我的管理员 578 10 月 30 日 23:46 SharedFrameworks
drwxr-xr-x@ 4 我的管理员 136 Oct 17 21:50 XPCServices
drwxr-xr-x@ 3 我的管理员 102 Oct 30 23:10 _CodeSignature
-rw-r--r--@ 1 我的管理员 523 Oct 30 23:10 version.plist

```
ls -l /Applications/Xcode.app/Contents/Developer 
```

总计 0
drwxr-xr-x@ 3 我的管理员 102 8 月 5 日 07:29 文档
drwxr-xr-x@ 7 我的管理员 238 12 月 20 日 21:09 库
drwxr-xr-x@ 7 我的管理员 238 Oct 30 23:46 Makefile
drwxr-xr-x@ 5 我的管理员 170 十月 30 23:28 平台
drwxr-xr-x@ 3 我的管理员 102 十月 10 01:37 工具链
drwxr-xr-x@ 22 我的管理员 748 十月 30 23:31 工具
drwxr- xr-x@ 7 我的管理员 238 Oct 30 23:46 usr
请帮忙。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-15T13:30:41.453

固定的！在终端：

```
$ DEVELOPER_DIR="/Applications/Xcode.app/Contents/Developer/"  
$ export DEVELOPER_DIR 
```

说明：
阅读时`man xcrun`我注意到有 DEVELOPER_DIR 环境变量优先于 xcode-select。所以在这里我们将该变量设置为正确的路径。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-31T07:58:10.847

运行这个来设置你的开发者文件夹：

```
sudo /usr/bin/xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-12-24T10:13:51.760

打开 Xcode > Preferences > Locations > 从下拉列表中选择您的 Xcode 版本并退出 Xcode [ref](http://theredfoxfire.github.io/2016-03-03-react-native-failed-build.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-25T14:36:10.063

我已经尝试了所有可能的选项：

*   重新安装 Xcode
*   改变了各种路径
*   重新安装开发者工具
*   我什至重新安装了操作系统！

[不过，从这里](http://git-scm.com/download/mac)下载最新的 GIT 版本就可以了。

我认为这是升级操作系统的错误。我认为重新安装干净/格式也可以修复它（因为所有设置都被保留了）

请注意：重新启动当前终端窗口，这不是临时解决方案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-12T11:45:00.963

## 执行以下步骤

打开 Xcode

首选项->位置->命令行工具->选择Xcode版本

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-14T10:06:29.327

将以下行添加到 '~/.bashrc' 文件中：

```
export DEVELOPER_DIR=”/Applications/XCode.app/Contents/Developer” 
```

运行`source ~/.bashrc`，然后重新启动终端。

# php - 我们如何在php中选择一个字符串到特定字符？注意：不使用explode()

> ID：14334717
> 
> 赞同：1
> 
> 时间：2013-01-15T09:35:30.560
> 
> 标签：php

我们如何在php中选择一个字符串到特定字符？

即我有一个字符串`Wednesday 16-January-2013`。我只需要到达第一个空格。

即输出应该是`Wednesday`。

我用explode做到了，

```
<?php
explode(" ",Wednesday 16-January-2013)
?> 
```

但是代码中允许过多的爆炸和数组。所以，

我怎么能**不使用 explode()**呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:44:25.330

从 PHP 5.3.0 开始，您可以使用[strstr](http://php.net/manual/en/function.strstr.php)函数返回第一次出现针头之前的大海捞针部分（不包括针头）：

```
$dayOfWeek = strstr('Wednesday 16-January-2013', ' ', true);
echo $dayOfWeek; // prints Wednesday 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:41:46.410

您可以简单地使用`strstr()`：

```
strstr('Wednesday 16-January-2013', ' ', true); 
```

第三个参数`$before_needle`使函数只返回空格之前的部分。

也可以看看：[`strstr()`](http://www.php.net/strstr)

在 PHP 5.3 之前（或者如果你需要根据空间的存在进行分支）你可以这样写：

```
$s = 'Wednesday 16-January-2013';
if (($p = strpos($s, ' ')) !== false) {
    echo substr($s, 0, $p);
} else {
    // space wasn't found, bad, bad.
} 
```

*如果在字符串的开头找到空格，也可以认为是错误；在那种情况下，条件很简单`if ($p = strpos($s, ' ')) {`（即它存在并且不出现在开头）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:39:27.353

您可以使用以下`substr`方法执行此操作：

```
substr ( string $string , int $start [, int $length ] ) 
```

你可以像这样结合使用它`strpos`：

```
$spacelocation = strpos($originalstring, " ");

if ($spacelocation !== false) {
    $day = substr($originalstring, 0, $spacelocation);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:42:06.457

一个例子：

```
$str = "Wednesday 16-January-2013";
$out = substr( $str, 0, strpos( $str, " " )); 
```

# java - org.slf4j.impl.StaticLoggerBinder.SINGLETON 错误

> ID：14334720
> 
> 赞同：1
> 
> 时间：2013-01-15T09:35:39.930
> 
> 标签：java, spring, hibernate

`remote failure: Error occurred during deployment: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/hibernate-config.xml]: Invocation of init method failed; nested exception is java.lang.IllegalAccessError: tried to access field org.slf4j.impl.StaticLoggerBinder.SINGLETON from class org.slf4j.LoggerFactory. Please see server.log for more details.`

我得到了上面的错误，但我的项目中有`slf4j-api-1.5.2`jars `slf4j12-1.5.2`。我搜索了这个错误，大家都说你的项目没有`slf4j`jar或者你必须升级你的jar文件。我保证有这两种情况。现在我不知道我必须做什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T20:34:05.803

查看[http://www.slf4j.org/faq.html#IllegalAccessError](http://www.slf4j.org/faq.html#IllegalAccessError) - 1.5.5 和 1.5.6 版本之间的 slf4j 发生了重大变化。您的 Hibernate 版本可能调用了旧版本的 slf4j，这会导致此问题。查看您的依赖项并确保版本兼容。

# dojo - 创建 Dojo 内存导致 Uncaught TypeError: Cannot read property 'style' of null

> ID：14334722
> 
> 赞同：0
> 
> 时间：2013-01-15T09:35:41.797
> 
> 标签：dojo, ibm-mobilefirst

我正在尝试创建一个简单的工作灯应用程序，但尝试创建一个新`Memory`的原因是： `Uncaught TypeError: Cannot read property 'style' of null at mobile-ui-layer.js:378`

这似乎很奇怪，因为我不明白创建 Memory 对象与样式有什么关系。

在 Chrome 中调试时，我`var testStore = new Memory({data:storeData})`在行之后立即得到它。

```
require (
                    ["dojo", 
                    "dojo/parser", 
                    "dojo/_base/xhr",
                    "dijit/form/ComboBox",  
                    "dojo/store/JsonRest", 
                    "dojo/ready",
                    "dojox/mobile/EdgeToEdgeStoreList",
                    "dojox/mobile",
                    "dojox/mobile/parser",
                    "dojox/io/xhrWindowNamePlugin",
                    "dojox/io/windowName", 
                    "dojox/io/xhrPlugins", 
                    "dojo/dom-style", 
                    "dojo/dom", 
                    "dojo/dom-class", 
                    "dojo/_base/Deferred",
                    "dojo/store/Memory"], function(JsonRestStore, EdgeToEdgeStoreList, xhrPlugins, Memory) {

            storeData = [
                                 { "label": "Wi-Fi", "icon": "images/i-icon-3.png", "rightText": "Off", "moveTo": "bar" },
                                 { "label": "VPN", "icon": "images/i-icon-4.png", "rightText": "VPN", "moveTo": "bar" }
                             ];
                    var testStore = new Memory({data:storeData});
                    var testList = new dojox.mobile.EdgeToEdgeStoreList({store:testStore}, "testList");
                    storeList.startup();
            }); 
```

供参考：这是worklight 5.0.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:18:04.533

您的主要问题是`require`数组中的所有依赖项都需要与函数中的参数名称匹配。例如

```
require(['dep1','dep2','dep3'],function(dep1,dep2,dep3){}); 
```

所以推断一下

```
require(
["dojo",
  "dojo/parser",
  "dojo/_base/xhr",
  "dijit/form/ComboBox",
  "dojo/store/JsonRest",
  "dojo/ready",
  "dojox/mobile/EdgeToEdgeStoreList",
  "dojox/mobile",
  "dojox/mobile/parser",
  "dojox/io/xhrWindowNamePlugin",
  "dojox/io/windowName",
  "dojox/io/xhrPlugins",
  "dojo/dom-style",
  "dojo/dom",
  "dojo/dom-class",
  "dojo/_base/Deferred",
  "dojo/store/Memory"], function (dojo,parser,xhr,ComboBox,JsonRest,ready,EdgeToEdgetStoreList,mobile,parser,xhrPlugin,windowname,xhrPlugins,domStyle,dom,domClass,Deferred,Memory) {

  storeData = [{
    "label": "Wi-Fi",
    "icon": "images/i-icon-3.png",
    "rightText": "Off",
    "moveTo": "bar"
  }, {
    "label": "VPN",
    "icon": "images/i-icon-4.png",
    "rightText": "VPN",
    "moveTo": "bar"
  }];
    console.log(Memory);
  var testStore = new Memory({

    data: storeData
  });  
    var storeList = new dojox.mobile.EdgeToEdgeStoreList({
    store: testStore
  }, "testList");
  storeList.startup();

}); 
```

您的代码片段中发生的情况是该参数`Memory`实际上是一个不同于其名称所暗示的类。根据依赖数组顺序，它是一个`EdgeToEdgeStoreList`.

# java - 接受小写文本或字符

> ID：14334731
> 
> 赞同：0
> 
> 时间：2013-01-15T09:36:39.607
> 
> 标签：java, spring, jsf-2

我正在使用 JSF2.0、Spring 3 和 Hibernate 4。

在 jsf 中是否可以在 inputText 中以大写或小写形式输入文本或字符？我的意思是即使用户输入大写，inputText 也应该始终接受小写字符。

这在 JSF 2 中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T10:00:40.047

您可以实现自己的验证器来验证文本大小写。检查[本](http://viralpatel.net/blogs/javaserver-faces-jsf-validation-tutorial-error-handling-jsf-validator/)教程。但这不是客户端验证 - 请求将被发送到服务器，如果它不是有效的页面将被重新加载并显示验证错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:06:44.167

您可以使用[Converter](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)自动转换输入；有关更多信息，请参阅 Java EE 6[教程](http://docs.oracle.com/javaee/6/tutorial/doc/gjcut.html)。

```
@FacesConverter("lowerConverter")
public class LowerConverter implements Converter {
    @Override
    public Object getAsObject(FacesContext cx, UIComponent component,
                              String value) throws ConverterException {
        if(value == null) {
            return null;
        }
        Locale locale = cx.getExternalContext().getRequestLocale();
        return value.toLowerCase(locale);
    }

    @Override
    public String getAsString(FacesContext cx, UIComponent component,
                              Object value) throws ConverterException {
        if(value == null) {
            return null;
        }
        return value.toString();
    }
} 
```

# javascript - jQuery (Mobile) 单页 Web 应用程序中的事件管理

> ID：14334736
> 
> 赞同：1
> 
> 时间：2013-01-15T09:36:59.833
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

我对以下**单页 Web 应用**案例的**实用建议**和**最佳实践感兴趣。**

 **1.  有没有更好的方法来处理这些事件？
2.  我已经抽象了 ShoppingCart 对象并使用了原型模式，因此我可以在将来扩展它以使用任何指定的框架，如 jQuery、下划线、Zepto 或其他任何东西。有没有更好的办法？

我将 jQuery/jQuery Mobile 用于单页购物车。当然，购物车有多个可以通过 AJAX 调用注入的伪页面。一个页面主要由一个表单和一些网格组成。视图是在服务器端生成的。

主要`ShoppingCart`对象是抽象的，可以单独使用 jQuery，也可以使用 jQuery 和 jQuery Mobile。

它看起来像这样：

```
var ShoppingCart = function(){

  // Some general vars.

}

ShoppingCart.prototype.init = function(){

  this.router();

} 
```

该`router`方法处理当前页面事件和动作，例如绑定事件或绘制某些动态 HTML 元素。

```
ShoppingCart.prototype.router = function(){

  switch(this.currentPageId()){

    case 'productPage':
        this.bindProductQty();
        this.bindProductPricingOptionsElements();
        this.bindOrderButton();
    break;

    case 'checkoutPage':
        this.bindDeleteProduct();
        this.paintStates();
        // [...]
    break;

    // [...]

  }

} 
```

使用 jQuery Mobile 初始化示例：

```
var myShoppingCart = new ShoppingCart();

// Override some of the original methods methods.

myShoppingCart.paintPopup = function( msg, options ) {

    return $.dynamic_popup(msg);

}

myShoppingCart.paintPaymentMethods = function(){

    ShoppingCart.prototype.paintPaymentMethods();

    // Refresh the menu in jQuery Mobile.
    $('#payment').selectmenu('refresh');

}

// [...]

// Init the ShoppingCart using jQuery Mobile
// myShoppingCart.setDebug(true);
myShoppingCart.init(); 
```

PS：我还不熟悉 Node.js 或任何其他衍生产品。**

# asp.net-mvc - KendoUI Grid 删除数据列表上的预排序设置

> ID：14334738
> 
> 赞同：1
> 
> 时间：2013-01-15T09:37:00.157
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid

我在局部视图中有一个 kendoui 网格，由服务器端模型对象填充。没关系。但是模型，IQueryable ist 定义为按标题排序。在网格中，没有排序，或者按 Id。

我无法检查应用程序（SQL Server Express）执行的 sql。是否有任何我需要设置的设置或其他设置，不会修改预排序列表？

这是查看代码：

```
@(Html.Kendo().Grid<DataModel.Buch>(Model)
    .Name("books")
    .Columns(columns =>
    {
        columns.Bound(b => b.Privat).Title("P/G").Width(40).Template(@<text>
    @if (item.Privat)
    {
        <img src="~/Images/home_32.png" alt="private" title="privates Buch" />
    }
    else
    {
        <img src="~/Images/company_32.png" alt="business" title="TLRZ-eigenes Buch" />
    }
    </text>);
        columns.Bound(b => b.Titel).Template(@<text>@Html.ActionLink(item.Titel, "Details", "Book", new { id = item.Id }, null)</text>);
        columns.Bound(p => p.DatumAufnahme).Title("Aufnahme").Format("{0:d}").Width(120);
        columns.Bound(b => b.Isbn).Title("ISBN");
        columns.Bound(b => b.Verlag);
        columns.Bound(b => b.Author).Title("Autor");
        columns.Bound(b => b.Ausgeliehen).Template(@<text>
    @if (item.Ausgeliehen)
    {
        <span data-sid="@item.Leihen.Single(l => !l.Rueckgabedatum.HasValue).BenutzerSid" data-field="FullName"><img src='/Images/loader_circle_16.gif' alt='lade' />(ja...)</span>
    }
    else
    {
        <span>nein</span>
    }
    </text>);
        columns.Bound(p => p.BenutzerSid).Title("Verantwortliche(r)").Template(@<span data-sid="@item.BenutzerSid" data-field="FullName"><i><img src='/Images/loader_circle_16.gif' alt='lade' />(wird geladen...)</i></span>);
    })
    .Pageable()
    .Sortable()) 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:06:34.467

[初始排序方向应按照文档的此](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/configuration#sort)部分所示进行配置。

```
.DataSource(dataSource => dataSource
    .Server()
    .Sort(sort =>
    {
        // Sort by UnitsInStock in descending order
        sort.Add(p => p.UnitsInStock).Descending();
        // then by ProductName in ascending order
        sort.Add(p => p.ProductName);
    })
) 
```

# php - preg_match 字符串以 'DO' 开头，后跟任何字符

> ID：14334739
> 
> 赞同：0
> 
> 时间：2013-01-15T09:37:00.793
> 
> 标签：php, regex

这是我的起始正则表达式不起作用：

```
'/^(DO)(?<cmd>.{1,6})$/' 
```

该表达式应匹配任何以“DO”开头的字符串，“DO”之后的字符串长度必须最少为 1 个字符，最多为 6 个字符。

我的期望：

```
 DO // NOT A MATCH
 DO123 // MATCH
 DOaaa123 // MATCH
 DOaaa123b // NOT A MATCH 
```

* * *

```
?<cmd> 
```

是一个命名的子模式：匹配存储为关联数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:47:12.373

为什么会有？? 尝试`^(DO)(.{1,6})$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:13:46.037

似乎这是一个向后兼容性问题，尽管[文档更改日志](http://php.net/manual/en/function.preg-match.php)说：

> 5.2.2 命名子模式现在接受语法 (?) 和 (?'name') 以及 (?P)。仅接受以前的版本 (?P)。

使用 PHP 5.4.8，windows IIS

这工作正常：

```
'/^(DO)(?P<cmd>.{1,6})$/' 
```

# javascript - 正则表达式缺少括号

> ID：14334740
> 
> 赞同：7
> 
> 时间：2013-01-15T09:37:03.333
> 
> 标签：javascript, regex, parentheses

我认为 Regex 不能用于检测丢失的括号是否正确（因为无法计算对）？使用 JavaScript，我已经截断了大约一千个字符串，需要手动编辑。我希望能够使用代码将这个列表缩小到需要注意的那些。字符串可以被认为是以下形式：

*   （这很好，不需要注意）
*   这也[好]
*   这很糟糕（需要编辑
*   这[（也）不好
*   就像这}不好
*   这个字符串没有任何类型的括号，但也必须考虑

如果这不可能，那么我只需要编写一个函数来查找括号对。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T11:31:44.690

```
function isFine(str) {  
  return /[(){}\[\]]/.test( str ) && 
    ( str.match( /\(/g ) || '' ).length == ( str.match( /\)/g ) || '' ).length &&
    ( str.match( /\[/g ) || '' ).length == ( str.match( /]/g ) || '' ).length &&
    ( str.match( /{/g ) || '' ).length == ( str.match( /}/g ) || '' ).length;
} 
```

测试

```
isFine('(this is fine and does not need attention)');                 // true
isFine('This is also [fine]');                                        // true
isFine('This is bad( and needs to be edited');                        // false
isFine('This [is (also) bad');                                        // false
isFine('as is this} bad');                                            // false
isFine('this string has no brackets but must also be considered');    // false 
```

但请注意，这不会检查括号顺序，即被`a)b(c`视为没问题。

为了记录，这里有一个函数检查丢失的括号并检查每种类型是否正确平衡。它不允许`a)b(c`，但它确实允许`(a[bc)d]`，因为每种类型都是单独检查的。

```
function checkBrackets( str ) {
    var lb, rb, li, ri,
        i = 0,
        brkts = [ '(', ')', '{', '}', '[', ']' ];   
    while ( lb = brkts[ i++ ], rb = brkts[ i++ ] ) { 
        li = ri = 0;
        while ( li = str.indexOf( lb, li ) + 1 ) {
            if ( ( ri = str.indexOf( rb, ri ) + 1 ) < li ) {
                return false;
            }
        }
        if ( str.indexOf( rb, ri ) + 1 ) {
            return false;
        } 
    }
    return true;
} 
```

最后，在 Christophe 的帖子之后，这似乎是检查缺少括号并检查所有括号是否正确平衡和嵌套的最佳解决方案：

```
function checkBrackets( str ) {
    var s;
    str = str.replace( /[^{}[\]()]/g, '' );
    while ( s != str ) { 
        s = str;
        str = str.replace( /{}|\[]|\(\)/g, '' )
    }
    return !str;
};

checkBrackets( 'ab)cd(efg' );        // false   
checkBrackets( '((a)[{{b}}]c)' );    // true   
checkBrackets( 'ab[cd]efg' );        // true   
checkBrackets( 'a(b[c)d]e' );        // false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T22:47:25.697

您不能在正则表达式本身中进行递归，但您始终可以在 JavaScript 中进行。

这是一个例子：

```
// First remove non-brackets:
string=string.replace(/[^{}[\]()]/g,"");
// Then remove bracket pairs recursively
while (string!==oldstring) {
  oldstring=string;
  string=string.replace(/({}|\[\]|\(\))/g,"");
} 
```

其余的是不匹配的括号。

现场演示：http: [//jsfiddle.net/3Njzv/](http://jsfiddle.net/3Njzv/)

如果您需要计算配对，您可以一次更换一个并添加一个计数器：

```
// First remove non-brackets:
string=string.replace(/[^{}[\]()]/g,"");

// Then remove bracket pairs recursively
var counter=-1;
while (string!==oldstring) {
  counter ++;
  oldstring=string;
  string=string.replace(/({}|\[\]|\(\))/,"");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T10:24:24.613

可以使用递归正则表达式来验证匹配的括号。例如，在 Perl 中，以下表达式匹配正确`()` `{}` `[]`嵌套的字符串：

```
$r = qr/(?:(?>[^(){}\[\]]+)|\((??{$r})\)|\{(??{$r})\}|\[(??{$r})\])*/; 
```

为了清楚起见，扩展了相同的表达式：

```
$r = qr/
    (?:
        (?>
            [^(){}\[\]]+
        )
    |
        \(
            (??{$r})
        \)
    |
        \{
            (??{$r})
        \}
    |
        \[
            (??{$r})
        \]
    )*
/x; 
```

外部组被量化`*`而不是`+`匹配空字符串，因此为了`$r`有用，实际匹配必须使用利用前瞻/后视或以其他方式建立上下文的表达式来完成，例如`/^$r$/`. 例如，以下仅打印文件中没有正确嵌套的行：

```
perl -ne '$r = qr/(?:(?>[^(){}\[\]]+)|\((??{$r})\)|\{(??{$r})\}|\[(??{$r})\])*/; print if !m/^$r$/' file 
```

为了澄清您的问题：如果这些是文件名而不是文件内容，您可以将`ls`or`find`或其他任何内容的输出通过管道传输到上述命令 sans 中`file`：

```
ls | perl -ne '$r = qr/(?:(?>[^(){}\[\]]+)|\((??{$r})\)|\{(??{$r})\}|\[(??{$r})\])*/; print if !m/^$r$/' 
```

但是，正如其他人所说，一般来说，非正则表达式解决方案可能更好。

注意来自[Perl 文档](http://perldoc.perl.org/perlre.html#Extended-Patterns)：“警告：这个扩展的正则表达式功能被认为是实验性的，可能会在没有通知的情况下进行更改。由于正则表达式引擎中未来优化的影响，执行的具有副作用的代码在不同版本之间的执行可能不同。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T09:58:38.437

一些正则表达式风格能够匹配嵌套括号等递归结构，但语法非常复杂，通常只写一个函数就更容易了。JavaScript 正则表达式根本不支持递归。

# ruby-on-rails - Apache 乘客错误：mod_passenger 中的意外错误

> ID：14334743
> 
> 赞同：0
> 
> 时间：2013-01-15T09:37:20.787
> 
> 标签：ruby-on-rails, apache, passenger

我最近洗了我的**/tmp**，但我不知道它有一些 phusion 乘客所需的文件。现在我的乘客正在寻找现在不存在的文件。我尝试运行**passenger-install-apache2-module**来获取apache2 所需的文件。但不幸的是，它没有在 /tmp 中获取文件。有什么办法可以找回这些文件？？

我收到以下错误：

```
Unexpected error in mod_passenger: Cannot connect to Unix socket '/tmp/passenger.1.0.1144/generation-0/socket': No such file or directory (2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:15:55.107

我做了以下步骤，它奏效了：

```
gem install passenger
sudo /etc/init.d/apache2 restart 
```

现在我检查了乘客所需的 /tmp 文件，然后我做了：

```
rvmsudo  passenger-install-apache2-module 
```

# c# - 如何将双递归方法转换为循环？

> ID：14334744
> 
> 赞同：18
> 
> 时间：2013-01-15T09:37:25.580
> 
> 标签：c#, algorithm, recursion, for-loop

这是我简化的双重递归方法。它没有任何用处，但说明了所需的递归调用：

```
void Main()
{
    Test(2, 3, 4);
}

int n1 = 0;
int n2 = 0;

void Test(int i1, int i2, int v)
{
    if (v == 0)
    {
        (n1 + n2).Dump();
    }
    else
    {
        n1 = i1 + 10;
        n2 = i2 + 20;
        Test(n1, n2, v - 1);
        Test(n2, n1, v - 1);
    }   
} 
```

我不太清楚如何将其编写为循环以查看性能是否有所提高。

我已经更正了明显错误的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:02:21.930

任何可以递归完成的事情也可以使用堆栈完成。假设您只想要您在示例中编写的功能：

i1 和 i2 最终将被添加到全局变量 n1、n2 的总和中。您可以总结它们并将结果分配给代码开头的 n1 或 n2 以简化功能。使用堆栈，您可以执行以下操作：

```
int n1 = 0;
int n2 = 0;

void Test2(int i1, int i2, int v)
{
    Stack<int> s = new Stack<int>(new[] {v});
    n1 = i1 + i2;

    while (s.Any())
    {
        v = s.Pop();
        if (v == 0)
        {
            Console.Out.WriteLine(n1 + n2);
        }
        else
        {
            int tmp = n1;
            n1 = n2 + 10;
            n2 = tmp + 20;
            s.Push(v - 1);
            s.Push(v - 1);
        }
    }
} 
```

其输出与递归代码相同：

```
125
155
155
215
215
245
245
335
335
365
365
425
425
455
455 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T11:46:33.453

尝试这种迭代（无堆栈）方法：

```
int n1 = 0;
int n2 = 0;

void MyWay(int start1, int start2, int plus1, int plus2, int v)
{
    n1 = start2 + plus2 * v;
    n2 = start1 + plus1 * v;
    for (int i = 0, pow = 1 << v; i < pow; i++)
    {
        if ((i & 1) == 0)
        {
            int temp = n2;
            n2 = n1;
            n1 = temp;
        }
        for (int mask = i; mask > 0 && (mask & 1) == 0; mask >>= 1)
        {
            n1 += plus1;
            n2 += plus2;
        }
        Console.WriteLine(n1 + n2);
    }
} 
```

应称为：

```
MyWay(2, 3, 10, 20, 4); 
```

您示例中的所有常量都传递给函数，因此它是完全通用的。此外，重要的事实是，**函数完成后 n1 和 n2 的值将与递归方法完成后完全相同**。

* * *

## 关于性能：

当然，它会带来一些时间的改进，但不会太多。但它会给出很大的输入参数。我的方法也不会消耗额外的内存（递归和堆栈方法消耗）。

* * *

## 关于性能的更新：

我已经在本地测试了您和我的方法 - 每次调用 1 000 000 次。结果如下：

**递归：225.1774 毫秒**

**迭代：152.1194 毫秒**

* * *

## [更新] 如果您在函数完成后不需要 n1 和 n2 ，您可以使代码更短：

```
void MyWayTwo(int start1, int start2, int plus1, int plus2, int v)
{
    plus1 += plus2;
    int n = start1 + start2 + plus1 * v;
    for (int i = 0, pow = 1 << v; i < pow; i++)
    {
        for (int mask = i; mask > 0 && (mask & 1) == 0; mask >>= 1)
            n += plus1;
        Console.WriteLine(n);
    }
} 
```

调用时输出`MyWayTwo(2, 3, 10, 20, 4);`：

```
125
125
155
155
215
215
245
245
335
335
365
365
425
425
455
455 
```

## 更简化的解决方案：

```
void MyWayTwo(int s1, int s2, int p1, int p2, int v)
{
    p1 += p2;
    s1 += s2;
    for (int i = 1 << v, p = i << 1; i < p; i++)
    {
        for (int m = i; (m & 1) == 0; m >>= 1)
            s1 += p1;
        Console.WriteLine(s1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:43:32.397

如果您只想使用最终结果，我可以给您此代码

```
protected void TestIt(int i1, int i2, int v)
{
    int tot = 0;
    for (; v > 0; v--)
        tot = tot * 2 + 30;
    Console.Out.WriteLine(tot + i1 + i2);
} 
```

如果您需要中间结果，不幸的是，此代码将无法提供给您。

# font-face - 字体生成器背后的机制是什么？

> ID：14334745
> 
> 赞同：0
> 
> 时间：2013-01-15T09:37:28.680
> 
> 标签：font-face, converter

我想知道，fontsquirrel dot com 的@font-face 生成器如何轻松地将字体转换为不同的版本，并在一分钟内为我们制作一个 css。CSS 不是我的问题，我想知道为什么在网络上或网络上没有其他类似的服务可用。我找到了 font2web dot com，但这并不总是有效。

我渴望他们如何在 fontsquirrel 中制作这样的转换器？依据是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T21:33:47.880

我不能告诉你其他人是怎么做到的，因为他们通常不会真正做广告，但我可以告诉你我是怎么做到的：http: [//freedockstar.com/fontface/](http://freedockstar.com/fontface/)

想法真的很简单。我有安装了[FontForge](http://fontforge.org/)的 linux 机器。现在，当您上传字体文件时，PHP 使用自定义脚本调用 fontforge 来转换上传的文件，生成 css，以 html 格式预览，将其全部打包成一个 zip 文件并将输出发送给用户。我正在使用的 FontForge 脚本如下所示：

```
#!/usr/local/bin/fontforge
Open($1)
Generate($2:r + ".ttf")
Open($1)
Generate($2:r + ".otf")
Open($1)
Generate($2:r + ".eot")
Open($1)
Generate($2:r + ".svg")
Open($1)
Generate($2:r + ".woff") 
```

仅此而已。当然，除了所有 PHP 和 JS 使其与 Web 界面一起工作；）

# javascript - 我可以在 winjs 中获取 blob 和文本类型的数据。现在我想获取 json 类型。并且我必须将其转换为 XML 格式的 json 数据

> ID：14334749
> 
> 赞同：0
> 
> 时间：2013-01-15T09:37:32.990
> 
> 标签：javascript, winjs

```
 <script src="/js/default.js"></script>
    </head>
    <body>
    <div id="xhrDiv"></div>
    <script type="text/javascript">

    //to fetch text type

    WinJS.xhr({ url: "http://www.sportskeeda.com/2013/01/15/fluminense-in-talks-with-       riquelme/", responseType: "text" })
   .done(
     function (request) {
     var text = request.responseText;
     var subText = text.substring(text.indexOf("Brazilian"), text.indexOf("Xinhua.") + 9);
     xhrDiv.innerHTML = subText;
     });

     // to fetch blob type

     WinJS.xhr({ url: "http://www.microsoft.com/windows/Framework/images/win_logo.png",    responseType: "blob" })
     .done(
     function (request) {
     var imageBlob = URL.createObjectURL(request.response);
     var imageTag = xhrDiv.appendChild(document.createElement("image"));
     imageTag.src = imageBlob;
     });

    </script> 
```

# iphone - 仅使用 iPhone 的顶部麦克风

> ID：14334755
> 
> 赞同：2
> 
> 时间：2013-01-15T09:37:41.683
> 
> 标签：iphone, ios, audio

据我所知，iPhone 上有 2 个麦克风。1 靠近顶部的音频插孔旁边，另一个是您说话的麦克风。默认麦克风似乎是你说话的那个。

如何以编程方式选择要使用的麦克风？我正在为我的应用程序使用 Core Audio。

基本上我想用顶级麦克风录音。目前，当我录制时，正在使用底部麦克风。有没有办法覆盖默认麦克风设置？

我知道可以通过以下方式覆盖默认扬声器设置。

```
UInt32 yes = YES;

AudioSessionSetProperty( kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,        sizeof(UInt32),   &yes ); 
```

iPhone上的麦克风有什么类似的吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-27T06:50:27.713

使用 AVAudioSession 获取可用的输入。

```
NSLog(@"%@", [AVAudioSession sharedInstance].availableInputs);

"<AVAudioSessionPortDescription: 0x14554400, type = MicrophoneBuiltIn; name = iPhone Microphone; UID = Built-In Microphone; selectedDataSource = Back>" 
```

然后使用这些输入之一来获取可用的数据源，就像这样。

```
NSLog(@"%@", [AVAudioSession sharedInstance].availableInputs[0].dataSources);

"<AVAudioSessionDataSourceDescription: 0x145afb00, ID = 1835216945; name = Bottom>",
"<AVAudioSessionDataSourceDescription: 0x145b1870, ID = 1835216946; name = Front>",
"<AVAudioSessionDataSourceDescription: 0x145b3650, ID = 1835216947; name = Back>" 
```

**我们可以看到，这款 iPhone 上实际上有三个麦克风：顶部正面、顶部背面和底部。现在您可以设置您的首选数据源。**

```
AVAudioSessionPortDescription *port = [AVAudioSession sharedInstance].availableInputs[0];
for (AVAudioSessionDataSourceDescription *source in port.dataSources) {
    if ([source.dataSourceName isEqualToString:@"Back"]) {
        [port setPreferredDataSource:source error:nil];
    }
} 
```

希望这可以帮助您快乐编码！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-15T07:08:45.507

swift 4 我的 2 美分：

```
class func test3Mics(){

        guard let inputs = AVAudioSession.sharedInstance().availableInputs else{
            return
        }
        print(inputs.debugDescription)

        for input in inputs{
            print(input.dataSources ?? "??")
        }

        // set preferred:
        let preferredPort = inputs[0]
        if let dataSources = preferredPort.dataSources{
        for source in dataSources {
                if source.dataSourceName=="Back" {
                    do {
                        try preferredPort.setPreferredDataSource(source)
                    }catch _ {
                            print("cannot set frontDataSource")
                    }
                }
            }
        }
    } 
```

# oracle - 重新排列后获取前 10 个数据

> ID：14334761
> 
> 赞同：1
> 
> 时间：2013-01-15T09:37:57.883
> 
> 标签：oracle, rownum

我有一张评论历史记录表。根据日期（从新到旧）重新排列数据（按子句排序）后，我只需要选择十个数据。我可以知道如何实现吗？这可以使用rownum来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:40:33.377

```
SELECT  *
FROM    (
        SELECT  *
        FROM    comment
        ORDER BY
                comment_date DESC
        )
WHERE   rownum <= 10 
```

# php - 如何从 Facebook 获取发件人 ID

> ID：14334766
> 
> 赞同：4
> 
> 时间：2013-01-15T09:38:26.287
> 
> 标签：php, facebook, facebook-graph-api

假设我是 A。A 向 B 发送邀请。当 B 接受我的好友请求时，我会在我的页面上获取请求 ID，但是如何在我的 php 页面上获取 Mine(A) 的 UID？

请帮我。我为此奋斗了 6 小时。

我正在使用这些（见下文）代码来获取 request_Id。但是从这些我怎样才能获得发件人 ID？

```
 <?php
    require_once('phps/fbsdk/src/facebook.php');
    $config = array
    (
      'appId' => '27c3932323897****82',
      'secret' => '******************************',
    );
    $facebook = new Facebook($config);
    //get the request ids from the query parameter
     $request_ids = explode(',', $_REQUEST['request_ids']);

     //build the full_request_id from request_id and user_id
      function build_full_request_id($request_id, $user_id) {
      return $request_id . '_' . $user_id;
     }

     //for each request_id, build the full_request_id and delete request
     foreach ($request_ids as $request_id)
     {
     echo ("reqeust_id=".$request_id."<br>");
     $full_request_id = build_full_request_id($request_id, $user_id);
     echo ("full_request_id=".$full_request_id."<br>");

    try {
     $delete_success = $facebook->api("/$full_request_id",'DELETE');
     if ($delete_success) {
        echo "Successfully deleted " . $full_request_id;}
     else {
       echo "Delete failed".$full_request_id;}
    }
    catch (FacebookApiException $e) {
    echo "error";}
    }
 ?>` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:47:42.970

使用您获得的请求 ID 调用图形 api (graph.facebook.com/{REQUEST_ID})，您将收到发件人 ID，您将获得如下信息：

```
{
  "id": "493703870648580", 
  "application": {
    "name": "Send Requests How To", 
    "id": "403223126407920"
  }, 
  "to": {
    "name": "Chris Abe Colm", 
    "id": "100003086810435"
  }, 
  "from": {
    "name": "Christine Abernathy", 
    "id": "1424840234"
  }, 
  "data": "{\"badge_of_awesomeness\":\"1\",\"social_karma\":\"5\"}", 
  "message": "Learn how to make your Android apps social", 
  "created_time": "2012-10-07T17:29:57+0000"
} 
```

有关图形 api 的更多信息：http: [//developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

PS：从您的示例中删除您的应用程序机密

# mobile - 网络移动应用程序

> ID：14334770
> 
> 赞同：0
> 
> 时间：2013-01-15T09:38:30.787
> 
> 标签：mobile, web

我终于集中注意力，在你的网站上尝试了很多试验。

我决定在我开发的移动网络应用程序中加入 zxing 解码器。因此，我有兴趣在我的 webmobile 项目（不是本机而是 webmobile）中使用 zxing 开源代码。

现在可以确定的是，我恳请您： - 通过哪个链接我可以找到要在我的 Web 应用程序中使用的开源代码？- 是否有教程或文档可以正确进行并使用开源代码？

我再次感谢您的宝贵合作。

干杯

卡罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:00:55.820

代码在这里：[http ://code.google.com/p/zxing/downloads/list](http://code.google.com/p/zxing/downloads/list)

一些文档：[http ://code.google.com/p/zxing/wiki/ScanningFromWebPages](http://code.google.com/p/zxing/wiki/ScanningFromWebPages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:54:32.320

我读了你的建议

我必须链接到这样的 URL，其中 {CODE} 是返回代码值的占位符。

是否可以在我的网页中导入 zxing 开源代码而不是调用 zxing URL？

卡洛

# regex - 如何使用 Vim 或 Perl 在文件中的特定行上方插入一行？

> ID：14334772
> 
> 赞同：7
> 
> 时间：2013-01-15T09:38:37.667
> 
> 标签：regex, perl, vim, sed

我想插入行

```
<hr /> 
```

在文件中每次出现的标题 2 行之上 - 例如，在此模式之上

```
<h2>variable pattern here</h2> 
```

所以上面应该变成

```
<hr />
<h2>variable pattern here</h2> 
```

我怎样才能用 Vim、Sed 或 Perl 做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T09:52:51.420

vim方式：

cmd`:g/<h2>/normal O<hr />` 将完成这项工作。

在这里看到它：（我以 sudo_O 为例）

![在此处输入图像描述](../Images/83f656cd6c979e350d039d90eb4cc2e0.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-15T09:42:48.370

你`sed`可以这样做`sed '/<h2>/i <hr />'`：

```
$ cat file
<html>
<h2>variable pattern here</h2>
<h3>not here</h3>
<h2>heading</h2>
<h2>Something</h2>

$ sed '/<h2>/i <hr />' file
<html>
<hr />
<h2>variable pattern here</h2>
<h3>not here</h3>
<hr />
<h2>heading</h2>
<hr />
<h2>Something</h2> 
```

第一部分`/<h2>/`匹配包含`<h2>`的行，第二部分使用`i`命令插入`<hr />`匹配的行上方。

一个不错的选择`sed`是`-i`将更改保存回文件而不是打印到，`stdout`但首先要确保更改正确。

```
sed -i '/<h2>/i <hr />' file 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-15T09:54:50.717

在 Vim 中执行此操作的众多方法之一：

```
:g/h2/norm O<hr /><CR> 
```

分解：

1.  `:g[lobal]`作用于与模式匹配的每一行，请参阅`:h :global`.

2.  `h2`我们正在寻找的模式，它可能会变得更聪明一些。

3.  `norm[al]`运行*正常*模式命令，请参阅`:h :normal`.

4.  `O`在当前行上方打开一个新行并进入*插入*模式。

5.  `<hr />`是您要插入的内容。

6.  我们点击`<CR>`( `<RETURN>`) 来运行整个程序。

另一种方式，使用单个替换：

```
:%s/^\s*<h2/<hr \/>\r&<CR> 
```

分解：

1.  `:%s[ubstitute]/`对缓冲区的每一行执行替换，请参阅`:h :s`.

2.  `^`将模式锚定到行的开头。

3.  `\s*`匹配任意数量（0 到多个）的空白字符。如果您确定所有 HTML 标记都在第 1 列，则不是严格需要的。

4.  `<h2`是我们真正在寻找的模式。

5.  `<hr />`是我们要插入的。

6.  因为我们希望它在自己的行上，所以它后面跟着一个`\r`,

7.  最后是匹配的文本，`&`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-15T10:50:16.860

Perl 中的命令行解决方案。

```
perl -i~ -p -e'/<h2>/ and $_ = "<hr />\n$_"' your_file.html 
```

命令行标志说明：

*   **-i**就地编辑（替换现有文件），备份到your_file.html~
*   **-p**打印文件中的每一行
*   **-e**为文件中的每一行执行的代码

如果该行包含 ( `/<h2>/`)，则在其前面`<hr />`添加（当前行在 $_ 中）。

但是您是否考虑过这是否是最好的方法？如果您想在每个 H2 元素上方添加一行，那么也许您应该使用 CSS 来做到这一点？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-15T09:46:00.180

```
use strict;
use warnings;
use Tie::File;

tie my @file, 'example.html'
  or die "Unable to tie file: $!";

@file = map { m!<h2>.*</h2>!
            ? ( "<hr />", $_ )
            : $_ } @file;

untie @file; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T10:50:51.820

```
perl -plne 'print "<hr />" if(/\<h2\>variable pattern here\<\/h2\>/)' your_file 
```

输入文件：

```
> cat temp
<h2>variable pattern here</h2>
1
<h2>variable pattern here</h2>
2
<h2>variable pattern here</h2>
3
4
<h2>variable pattern here</h2> 
```

现在执行

```
> perl -plne 'print "<hr />" if(/\<h2\>variable pattern here\<\/h2\>/)' temp
<hr />
<h2>variable pattern here</h2>
1
<hr />
<h2>variable pattern here</h2>
2
<hr />
<h2>variable pattern here</h2>
3
4
<hr />
<h2>variable pattern here</h2> 
```

这只会输出到控制台。如果你想就地改变它：

```
perl -pi -lne 'print "<hr />" if(/\<h2\>variable pattern here\<\/h2\>/)' your_file 
```

# internet-explorer-9 - 具有透明度的png图像在IE9中消失

> ID：14334774
> 
> 赞同：1
> 
> 时间：2013-01-15T09:38:44.390
> 
> 标签：internet-explorer-9, png, mod-pagespeed, png-24

[关联](http://floridaseating.com/products/classic-indoor-collection)

起初，png 图像会加载，然后在 IE9 中消失。

不太确定。

谢谢。

更新。我启用了 mod_pagespeed，这似乎与问题有关。我禁用了插件，问题解决了。有什么方法可以启用它并按应有的方式显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T14:14:00.187

这听起来像一个 mod_pagespeed 错误。请在此处提交错误报告：[https ://code.google.com/p/modpagespeed/issues/list](https://code.google.com/p/modpagespeed/issues/list)

但临时解决方法是对这些图像使用[ModPagespeedDisallow](https://developers.google.com/speed/pagespeed/module/restricting_urls)。

# java - Primefaces UI：重复不起作用

> ID：14334777
> 
> 赞同：7
> 
> 时间：2013-01-15T09:38:48.510
> 
> 标签：java, jsp, primefaces

我正在尝试在 Primefaces 中创建手风琴面板。我正在尝试使用它来创建它，`ui:repeat`以便我可以动态创建面板选项卡。但不知何故，我的代码不起作用，手风琴面板是空的并且没有任何选项卡。任何人都可以给我的原因或指出我如何实现这一目标。

这是我的豆子。

```
@ManagedBean(name = "divisionList")
public class Divisions implements Serializable {

private List<String> divStrings;

public List<String> getDivStrings() {
        return divStrings;
    }
    public Divisions(){
        divStrings=new ArrayList<String>();
        divStrings.add("Division A") ;
        divStrings.add("Division B");
   }

} 
```

在我的 xhtml 中：

```
<p:accordionPanel >
         <ui:repeat value="#{divisionList.divStrings}" var="divis">
               <p:tab title="#{divis}">
                            Content
               </p:tab>
         </ui:repeat>
</p:accordionPanel> 
```

**编辑：**

但是当它像这样打印时它的工作：O

```
<ui:repeat value="#{divisionList.divStrings}" var="divis">
    <h:outputText value="#{divis}" />
</ui:repeat> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T10:09:53.367

你的 ui:repeat 没有问题，不要把它包在一个空的里面

```
<p:accordionPanel > 
```

或者删除 uirepeat 并填写您的手风琴面板的值

这样做

```
<p:accordionPanel value="#{test.divStrings}" var="divis" >
           <p:tab title="#{divis}">
                        Content
           </p:tab>
</p:accordionPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:57:49.627

不要在构造函数中初始化列表，而是尝试在 @PostConstruct 注释方法中初始化它。

```
 @PostConstruct
   public void init(){
        divStrings=new ArrayList<String>();
        divStrings.add("Division A");
        divStrings.add("Division B");
   } 
```

# objective-c - Objectivec - nsrange 计算很奇怪

> ID：14334784
> 
> 赞同：0
> 
> 时间：2013-01-15T09:39:20.363
> 
> 标签：objective-c, nsrange

它很奇怪。我预计最后一个 NSLog 打印 3 但它不是

```
NSString *value = @"0(234)6";

NSRange beginParenthesis = [value rangeOfString:@"("];
NSRange endParenthesis = [value rangeOfString:@")"];

if (beginParenthesis.location != NSNotFound && endParenthesis.location != NSNotFound)
{
    NSLog(@"%ld", endParenthesis.location); // 5
    NSLog(@"%ld", beginParenthesis.location + 1); // 2
    NSLog(@"%ld", endParenthesis.location - beginParenthesis.location + 1); // 5?
} 
```

我将 beginParenthesis.location + 1 保存到变量中...效果很好，我期望...为什么？

```
NSRange beginParenthesis = [value rangeOfString:@"("];
NSRange endParenthesis = [value rangeOfString:@")"];

if (beginParenthesis.location != NSNotFound && endParenthesis.location != NSNotFound)
{
    NSInteger start = beginParenthesis.location + 1;
    NSLog(@"%ld", endParenthesis.location); //5
    NSLog(@"%ld", start); // 2
    NSLog(@"%ld", endParenthesis.location - start); // 3
} 
```

论文之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:49:53.237

数学题：

endParenthesis.location - beginParenthesis.location + 1 给出 u ( 5 - 1 + 1) 即等于 5 。但是 endParenthesis.location - start 给你 5 - 2 即 3。

所以你把括号像这样：

```
 NSLog(@"%ld", endParenthesis.location - (beginParenthesis.location + 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:54:41.860

它称为运算符优先级。见[这里](http://en.wikipedia.org/wiki/Order_of_operations)。

# django - django 加入购物车

> ID：14334785
> 
> 赞同：0
> 
> 时间：2013-01-15T09:39:21.020
> 
> 标签：django

我正在开发一个允许用户将模型对象添加到他们的购物车的项目，我目前正在使用 Jim McGaw 的《Beginning Django E-Commerce》一书[http://www.amazon.com/exec/obidos/ASIN/1430225351/ref =nosim/liqurule-20/](https://rads.stackoverflow.com/amzn/click/com/1430225351)。我试图修改上述书中的代码以适合我的目的，但它似乎不起作用。每次我尝试添加到购物车时，我都会收到错误消息

## cart_items.package_id 可能不为 NULL

我将应用程序添加到 INSTALLED_APP 元组中，我可以看到购物车甚至没有保存。只保存了 cart_id 和 date_created。

```
models.py (packageInfo)
from django.db import models
from django.contrib.auth.models import User

DESCRIPTION = (
    ('L', 'Leather Shoes'),
    ('E', 'Electronics'),
    ('F', 'Files'),
    )

class PackageInfo(models.Model):
    user            = models.ForeignKey(User, null = True)
    vendor_name     = models.CharField(max_length=100)
    description     = models.CharField(max_length = 1, choices = DESCRIPTION)
    quantity        = models.IntegerField(max_length = 10)
    total_value     = models.IntegerField(max_length = 10)
    created_at      = models.DateTimeField(auto_now_add = True)

    class Meta:
        db_table = 'packageinfo'
        ordering = ['-created_at']
    def __unicode__(self):
        return unicode (self.vendor_name)

models.py (Cart)
from django.db import models
from packageInfo.models import PackageInfo

class CartItem(models.Model):
    cart_id         = models.CharField(max_length = 50)
    date_added      = models.DateTimeField(auto_now_add = True)
    #packageinvoice  = models.ImageField(upload_to = 'invoices', help_text = '.jpg,     .png, .pdf etc')
    package         = models.ForeignKey( PackageInfo, unique = False)

    class Meta:
        db_table = 'cart_items'
        ordering = ['date_added']

cart.py (Cart)
from Cart.models import CartItem 
from packageInfo.models import PackageInfo 
from django.shortcuts import get_object_or_404 
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User

import random 

CART_ID_SESSION_KEY = 'cart_id' 

# get the current user's cart id, sets new one if blank 
def _cart_id(request): 
     if request.session.get(CART_ID_SESSION_KEY,'') == '': 
           request.session[CART_ID_SESSION_KEY] = _generate_cart_id() 
     return request.session[CART_ID_SESSION_KEY] 

def _generate_cart_id(): 
     cart_id = '' 
     characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()' 
     cart_id_length = 50 
     for y in range(cart_id_length): 
          cart_id += characters[random.randint(0, len(characters)-1)] 
     return cart_id 

# return all items from the current user's cart 
def get_cart_items(request): 
     return CartItem.objects.filter(cart_id=_cart_id(request)) 

# add an item to the cart 
def add_to_cart(request):
    postdata = request.POST.copy() 

    vendor_name = postdata.get('vendor_name','')
    description = postdata.get('description','')
    quantity = postdata.get('quantity','')
    total_value = postdata.get('total_value','')

    ci = CartItem()

    ci.vendor_name = vendor_name
    ci.description = description
    ci.quantity = quantity
    ci.total_value = total_value
    ci.cart_id = _cart_id(request) 
    ci.save() 

forms.py (packageInfo)

from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from packageInfo.models import PackageInfo

class PackageInfoForm(ModelForm):    
    class Meta:
        model = PackageInfo

    # override the default __init__ so we can set the request 
    def __init__(self, request=None, *args, **kwargs): 
        self.request = request 
        super(PackageInfoForm, self).__init__(*args, **kwargs) 

     # custom validation to check for cookies 
    def clean(self):         
        if self.request: 
            if not self.request.session.test_cookie_worked(): 
                raise forms.ValidationError("Cookies must be enabled.") 
        return self.cleaned_data

views.py (packageinfo)

from Cart import cart
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template import RequestContext, Context
from packageInfo.forms import PackageInfoForm

def show_product(request):
    if request.method == 'POST':
        postdata = request.POST.copy()
        form = PackageInfoForm(request, postdata)
        if form.is_valid():
            cart.add_to_cart(request)
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            return HttpResponseRedirect('/package-information/cart/')
    else:
        form = PackageInfoForm(request=request)
    request.session.set_test_cookie()
    return render_to_response("account/package-info.html", {'form': form}, context_instance=RequestContext(request))

def show_cart(request): 
     cart_items = cart.get_cart_items(request) 
     return render_to_response("account/cart.html", {'cart_items': cart_items}, 
        context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:34:50.420

在`add_to_cart`您设置的功能中：

```
ci = CartItem()

ci.vendor_name = vendor_name
ci.description = description
ci.quantity = quantity 
```

但这些字段与 PackageInfo 模型有关。我认为您需要保存`PackageInfoForm`在`show_product`视图中并在`add_to_cart`.

```
def add_to_cart(request, package):
    ...
    ci.package = package 
```

# php - 操作数应包含 1 列，但在子查询中需要一个最大值（值）

> ID：14334788
> 
> 赞同：2
> 
> 时间：2013-01-15T09:39:37.790
> 
> 标签：php, mysql, sql

我需要将 MySql 数据库导出到 SQLite 数据库，我只从媒体中获取所需的数据，以使 de SQLite 数据库尽可能小。

我有一个查询，只给我与最新版本的条目相关的animalsMedias 或plantsMedias，已发布且未归档的动物或植物。

```
SELECT AM.*, max(A.version) AS version FROM animalsMedias AS AM INNER JOIN animals
AS A ON(AM.idAnimal = A.idAnimal AND A.filed = 0 AND A.published = 1) GROUP BY 
A.idLanguaje, A.idVersion; 
```

为了只获取与媒体相关的内容，我尝试在“媒体”表上进行选择，该表只返回与上一次选择的结果相关的媒体，所以我将两者都放在“IN()”中，但我得到了错误：

```
#1241 - Operand should contain 1 column(s) 
```

那就是查询：

```
SELECT * from medias 
WHERE idMedia IN(SELECT AM.*, max(A.version) AS version FROM
animalsMedias AS AM 
INNER JOIN animals AS A ON(AM.idAnimal = A.idAnimal AND A.filed = 0 
AND A.published = 1) 
GROUP BY A.idLanguaje, A.idVersion) 
OR idMedia IN(SELECT PM.*, max(P.version) AS version FROM plantsMedias AS PM 
INNER JOIN plants AS P ON(PM.idPlant = P.idPlant AND P.filed = 0 AND P.published = 1) 
GROUP BY P.idLanguaje, P.idVersion); 
```

如果我必须只使用 1 个操作数，我如何获得“max（A.version）”？如果我理解得很好，在 IN 中我必须只有“IN（SELECT AM.idMedia FROM ....”才能正确。

谢谢你的建议，对不起我的英语，我尽力了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:56:27.030

`JOIN`表而不是这些`IN`谓词：

```
SELECT 
  ....
  A.version AVersion,
  P.Version PVersion
FROM medias m
INNER JOIN animalsMedias AS AM  ON m.idMedia = am.Id
INNER JOIN plantsMedias  AS PM  ON m.idMedia = PM.ID
LEFT JOIN
(
  SELECT idAnimal, max(A.version) AS version 
  FROM animals
  WHERE A.filed = 0 
    AND A.published = 1     
  GROUP BY A.idLanguaje, A.idVersion 
) AS  A  ON AM.idAnimal = A.idAnimal 
LEFT JOIN
(
  SELECT idPlant, MAX(Version) version
  FROM Plants
  WHERE field = 0 AND published = 1
  GROUP BY P.idLanguaje, P.idVersion
) AS p ON PM.idPlant = P.idPlant; 
```

# php - 从术语创建自定义链接

> ID：14334789
> 
> 赞同：0
> 
> 时间：2013-01-15T09:39:41.627
> 
> 标签：php, wordpress

我正在寻找为我的 Wordpress 术语创建自定义链接，我已经完成了以下操作：

```
<?php $terms = get_the_terms( $post->ID, 'blog' );                  
if ( $terms && ! is_wp_error( $terms ) ) : 
    $blog_links = array();
    $blog_slugs = array();

    foreach ( $terms as $term ) {
        $blog_links[] = $term->name;
    }

    foreach ( $terms as $termslug ) {
        $blog_slugs[] = $termslug->slug;
    }   

    $blog = join( ", ", $blog_links );
    $blogs = join( ", ", $blog_slugs ); 
?>

<a href="<?php bloginfo('url'); ?>/blog/<?php echo $blogs; ?>"><?php echo $blog; ?></a>
<?php endif; ?> 
```

这将创建网址：

[http://www.domain.com/blog/news,%20guest-blogs](http://www.domain.com/blog/news,%20guest-blogs)

链接的文本看起来像这样（即，它使所有链接成为一个链接 - 见截图）：

![在此处输入图像描述](../Images/61b5383a62fee9874df151355ade3fbe.png)

哪个很近！我实际上想将每个术语分成一个链接（中间有一个逗号）并制作网址[http://www.domain.com/blog/news](http://www.domain.com/blog/news)和[http://www.domain.com/blog/guest-博客](http://www.domain.com/blog/guest-blogs)。我想我缺少一个`foreach`单独输出每个链接的方法。

有人可以帮我把最后一点弄对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:44:44.963

可能很容易使用

`<?php echo get_the_term_list( $post->ID, 'blog', '', ', ', '' ); ?>`

* * *

你的代码有问题......也许这样的事情会做......

```
<?php $terms = get_the_terms( $post->ID, 'blog' );                  
if ( $terms && ! is_wp_error( $terms ) ) : 
    $blogs = array();

    foreach ( $terms as $term ) {
        $blogs[] = '<a href="' . get_bloginfo('url') . '/blog/'. $term->slug .'">' . $term->name . '</a>';
    }    

    $blog_links = join( ", ", $blogs);

    echo $blog_links;

endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:55:47.187

您的代码仅提供一个输出`a`元素，您需要修改此代码段，以便其中的每个元素`$terms`生成一个`a`具有正确 href 和锚点的元素。这可能是一种解决方案

```
<?php 
$terms = get_the_terms( $post->ID, 'blog' );                  
if ( $terms && ! is_wp_error( $terms ) ) : 
    $output = array();
    foreach($terms as $term):
        // Use sprintf to quickly modify the template
        $output[] = sprintf("<a href='%s'>%s</a>", get_bloginfo('url') . '/blog/' . $term->slug, $term->name);
    endforeach;
    echo implode(', ' $output); // This is the result
endif; 
?> 
```

# android - 如何将 android 与 mysqldatabase 连接起来？

> ID：14334792
> 
> 赞同：-1
> 
> 时间：2013-01-15T09:39:51.537
> 
> 标签：android, mysql

我有一个与 mysql 相关的小型项目。我尝试了多种方式将 android 与 mysql 连接起来，例如

1.  将它们更改为 127.0.0.1
2.  将它们更改为 ip
3.  将它们更改为 10.0.2.2 并在 eclipse 上设置

我已经尝试了两个星期，但我做不到。
我的笔记本是dell vostro 3450 64 bits

**ps 如果我向真实主机询问 URL，您介意吗？

这是我的代码。

**获取json.php**

```
<?
    $objConnect = mysql_connect("localhost","root","root");
    $objDB = mysql_select_db("mydatabase");

    // $_POST["txtKeyword"] = "a"; // for Sample

    $strKeyword = $_POST["txtKeyword"];
    $strSQL = "SELECT * FROM customer WHERE 1 AND Name LIKE '%".$strKeyword."%'  ";

    $objQuery = mysql_query($strSQL);
    $intNumField = mysql_num_fields($objQuery);
    $resultArray = array();
    while($obResult = mysql_fetch_array($objQuery))
    {
        $arrCol = array();
        for($i=0;$i<$intNumField;$i++)
        {
            $arrCol[mysql_field_name($objQuery,$i)] = $obResult[$i];
        }
        array_push($resultArray,$arrCol);
    }

    mysql_close($objConnect);

    echo json_encode($resultArray);
?> 
```

**activity_main.xml**

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TableRow
      android:id="@+id/tableRow1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" >

     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Search Customer : "
        android:layout_span="1"
        android:textAppearance="?android:attr/textAppearanceMedium" />

     <EditText
         android:id="@+id/editText1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:ems="4" >

     </EditText>

     <Button
         android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="OK" />

    </TableRow>

    <View
        android:layout_height="1dip"
        android:background="#CCCCCC" />

  <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.1">   

     <ListView
         android:id="@+id/listView1"
         android:layout_width="match_parent"
         android:layout_height="wrap_content">
     </ListView>

    </LinearLayout>

    <View
        android:layout_height="1dip"
        android:background="#CCCCCC" />

    <LinearLayout
      android:id="@+id/LinearLayout1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:padding="5dip" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="By.. ThaiCreate.Com" />

    </LinearLayout>

</TableLayout> 
```

**活动列.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
    android:id="@+id/ColCustomerID" 
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:layout_weight="0.2"
        android:text="CustomerID"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/ColName" 
        android:layout_width="0dp"
        android:layout_height="wrap_content" 
        android:layout_weight="1.0"
        android:text="Name"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/ColEmail"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Email"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

**MainActivity.java**

```
package com.myapp;

public class MainActivity extends Activity {

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Permission StrictMode
        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
        }

        final Button btn1 = (Button) findViewById(R.id.button1);
        // Perform action on click
        btn1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                SearchData();
            }
        });

    }

    public void SearchData()
    {
         // listView1
        final ListView lisView1 = (ListView)findViewById(R.id.listView1);   

        // editText1
        final EditText inputText = (EditText)findViewById(R.id.editText1); 

        /**
         * [{"CustomerID":"C001","Name":"Win Weerachai","Email":"win.weerachai@thaicreate.com" ,"CountryCode":"TH","Budget":"1000000","Used":"600000"},
         * {"CustomerID":"C002","Name":"John Smith","Email":"john.smith@thaicreate.com" ,"CountryCode":"EN","Budget":"2000000","Used":"800000"},
         * {"CustomerID":"C003","Name":"Jame Born","Email":"jame.born@thaicreate.com" ,"CountryCode":"US","Budget":"3000000","Used":"600000"},
         * {"CustomerID":"C004","Name":"Chalee Angel","Email":"chalee.angel@thaicreate.com" ,"CountryCode":"US","Budget":"4000000","Used":"100000"}]
         */

        String url = "http://10.0.2.2/android/getJSON.php";

        // Paste Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("txtKeyword", inputText.getText().toString()));

        try {
            JSONArray data = new JSONArray(getJSONUrl(url,params));

            final ArrayList<HashMap<String, String>> MyArrList = new ArrayList<HashMap<String, String>>();
            HashMap<String, String> map;

            for(int i = 0; i < data.length(); i++){
                JSONObject c = data.getJSONObject(i);

                map = new HashMap<String, String>();
                map.put("CustomerID", c.getString("CustomerID"));
                map.put("Name", c.getString("Name"));
                map.put("Email", c.getString("Email"));
                map.put("CountryCode", c.getString("CountryCode"));
                map.put("Budget", c.getString("Budget"));
                map.put("Used", c.getString("Used"));
                MyArrList.add(map);

            }

            SimpleAdapter sAdap;
            sAdap = new SimpleAdapter(MainActivity.this, MyArrList, R.layout.activity_column,
                    new String[] {"CustomerID", "Name", "Email"}, new int[] {R.id.ColCustomerID, R.id.ColName, R.id.ColEmail});      
            lisView1.setAdapter(sAdap);

            final AlertDialog.Builder viewDetail = new AlertDialog.Builder(this);
            // OnClick Item
            lisView1.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> myAdapter, View myView,
                        int position, long mylng) {

                    String strCustomerID = MyArrList.get(position).get("CustomerID")
                            .toString();
                    String sName = MyArrList.get(position).get("Name")
                            .toString();
                    String strEmail = MyArrList.get(position).get("Email")
                            .toString();
                    String strCounryCode = MyArrList.get(position).get("CounryCode")
                            .toString();
                    String strBudget = MyArrList.get(position).get("Budget")
                            .toString();
                    String strUsed = MyArrList.get(position).get("Used")
                            .toString();

                    viewDetail.setIcon(android.R.drawable.btn_star_big_on);
                    viewDetail.setTitle("Member Detail");
                    viewDetail.setMessage("MemberID : " + strCustomerID + "\n"
                            + "Name : " + sName + "\n" 
                            + "strEmail : " + strEmail + "\n" 
                            + "strCounryCode : " + strCounryCode + "\n" 
                            + "strBudget : " + strBudget + "\n"
                            + "Used : " + strUsed);
                    viewDetail.setPositiveButton("OK",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    dialog.dismiss();
                                }
                            });
                    viewDetail.show();

                }
            });

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public String getJSONUrl(String url,List<NameValuePair> params) {
        StringBuilder str = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            HttpResponse response = client.execute(httpPost);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) { // Download OK
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    str.append(line);
                }
            } else {
                Log.e("Log", "Failed to download file..");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return str.toString();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:04:15.377

尝试这个：

```
$objConnect = mysql_connect("localhost","root","root");
if (! $objConnect)
{
  die('Could not connect: ' . mysql_error());
} 
```

并检查客户端上的消息是否返回任何错误并显示给我们。

# java - 读取和写入文件 - Java 空格

> ID：14334794
> 
> 赞同：0
> 
> 时间：2013-01-15T09:40:04.410
> 
> 标签：java, string, file-io, filewriter, replaceall

我想从文件中读取并写入文件。输入文件如下

```
<ORLANDO>   <0%>
    As I remember, Adam, it was upon this fashion bequeathed me by will but poor a thousand crowns, and, as thou sayest,
<ORLANDO>

"A s   I   r e m e m b e r    A d a m    i t   w a s   u p o n   t h i s   f a s h i o n   b e q u e a t h e d   m e   b y   w i l l   b u t   p o o r   a   t h o u s a n d   c r o w n s    a n d    a s   t h o u   s a y e s t    c h a r g e d   m y   b r o t h e r   o n  ..." 
```

我编写了一个 java 程序来删除带有标签的行，并用空格替换任何标点符号。但是写出的每个字母之间都有一个空格，并且在行之间也有很多空白行。如何删除它们？. 请帮忙。

```
String line=null;
    try {
        BufferedReader br=new BufferedReader( new FileReader("filename"));
        PrintWriter writer = new PrintWriter(new FileWriter("filename"));
    try {
            while((line=br.readLine())!=null)
            {

                if(!line.contains("<"))
                {
                    line=(line.replaceAll("\\p{Punct}",""));

                    writer.println(line);
                    writer.flush();

                 }
            }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:50:55.103

默认情况下，当您使用 PrintWriter 打开文件时，它会截断文件。您可以将其设置为追加，但无论哪种方式，您都无法重写您正在以这种方式读取的文件。

相反，您应该创建一个新文件并写入该文件。完成后，您可以删除原始文件并重命名副本（如果完全相同，则删除副本）

> 但是写出的每个字母之间都有一个空格，并且在行之间也有很多空白行。

这会发生在您编写 UTF-16 但将其读取为 ASCII 或 UTF-8 的情况下。避免这种情况的方法是不使用不是默认的 UTF-16。

```
try (BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream("filename"), StandardCharsets.UTF_8));
     PrintWriter pw = new PrintWriter(new OutputStreamWriter(new FileOutputStream("filename.tmp"), StandardCharsets.UTF_8))) {
    for(String line; (line = br.readLine())!=null;) {
        pw.println(line.replaceAll("<[^>]+>", ""));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:45:38.790

您是否使用正确的编码打开写入的文件。看起来您编写 UTF-8 并使用 ASCII 或任何 ISO-8859 编码打开它。

# dart - 成员函数可以像 C++ 中的 const 吗？

> ID：14334796
> 
> 赞同：2
> 
> 时间：2013-01-15T09:40:07.077
> 
> 标签：dart

假设我有一个 C++ 函数签名：

```
bool Foo::bar() const; 
```

其中末尾的“const”表示 Foo 中的任何成员变量都不会通过调用 bar 来改变。有与此类似的 Dart 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:02:37.260

不，我不这么认为。如果你觉得有这样的功能会很棒，请star [issue 7908](http://dartbug.com/7908)。

# hibernate - 从插件调用代码时出现问题：“org.eclipse.core.resources”

> ID：14334800
> 
> 赞同：2
> 
> 时间：2013-01-15T09:40:14.920
> 
> 标签：hibernate, gwt

我已经将 gwt 与 Hibernate 集成，但是当我创建 hibernate.reveng.xml 时，我有一个错误，我不能实体 bean 类。错误消息；

从插件调用代码时出现问题：“org.eclipse.core.resources”。[在此处输入链接描述][1]

```
java.lang.NullPointerException
at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener$2.visit(WorkspaceChangeListener.java:74)
at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:69)
at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)
at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener.resourceChanged(WorkspaceChangeListener.java:70)
at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:291)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285)
at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149)
at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:395)
at org.eclipse.core.internal.resources.Workspace.checkpoint(Workspace.java:557)
at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:263)
at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T07:49:43.257

这个问题的主题最好是这样的： *NullPointerException from org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener（从插件调用代码时出现问题：“org.eclipse.core.resources”。*

我在用：

*   *JBoss 开发人员工作室（核心功能）7.0.1.GA-v20130930-2238-B7 com.jboss.jbds.product.feature.feature.group JBoss 由 Red Hat*
    *   （见 Eclipse->Help->About->Installation Details->Installed Software）
*   *JBossTools Archives 核心插件 3.4.100.Final-v20130717-0846-B106 (org.jboss.ide.eclipse.archives.core)*
    *   （见 Eclipse->Help->About->Installation Details->Plug-ins）

我没有找到最终答案，但有几点可以缩小原因（如果不需要，在 Eclipse 中**卸载 JBOSS Dev Tools可能会解决它）：**

*   已经修复了类似的错误，但没有进一步解释可能导致它的原因：

    *   2009：[https ://issues.jboss.org/browse/JBIDE-3538?_sscc=t](https://issues.jboss.org/browse/JBIDE-3538?_sscc=t)

    *   2007：[https ://issues.jboss.org/browse/JBIDE-1199?_sscc=t](https://issues.jboss.org/browse/JBIDE-1199?_sscc=t)

*   2008：这里我们有更多（插件代码相关）开发人员提示：[https ://issues.jboss.org/browse/JBIDE-2746?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel&_sscc =t](https://issues.jboss.org/browse/JBIDE-2746?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel&_sscc=t)

    *   *忘记设置组件*

    *   *忘了关*

    *   *当资源 = 工作区根时的 NPE*

*   我的一些相关异常（这似乎不是原因，而是“问题触发器”）：

    *   *AutoBuildJob.doBuild* - 触发

        ```
        java.lang.NullPointerException
        at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener$2.visit(WorkspaceChangeListener.java:74)
        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:69)
        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)
        at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener.resourceChanged(WorkspaceChangeListener.java:70)
        at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:291)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
        at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285)
        at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149)
        at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:396)
        at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1531)
        at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:156)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
        ```

    *   *JavaScriptPreferencesManager.createSuspendOnException* - 触发

        ```
        java.lang.NullPointerException
        at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener$2.visit(WorkspaceChangeListener.java:74)
        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:69)
        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)
        at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener.resourceChanged(WorkspaceChangeListener.java:70)
        at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:291)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
        at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285)
        at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149)
        at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:396)
        at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1531)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2354)
        at org.eclipse.debug.core.model.Breakpoint.run(Breakpoint.java:341)
        at org.eclipse.wst.jsdt.debug.internal.core.breakpoints.JavaScriptExceptionBreakpoint.<init>(JavaScriptExceptionBreakpoint.java:79)
        at org.eclipse.wst.jsdt.debug.internal.core.JavaScriptPreferencesManager.createSuspendOnException(JavaScriptPreferencesManager.java:168)
        at org.eclipse.wst.jsdt.debug.internal.core.JavaScriptPreferencesManager.access$2(JavaScriptPreferencesManager.java:166)
        at org.eclipse.wst.jsdt.debug.internal.core.JavaScriptPreferencesManager$StartJob.run(JavaScriptPreferencesManager.java:80)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
        ```

    *   *DebugUIPlugin.buildAndLaunch -*相关/触发

        ```
        java.lang.NullPointerException
        at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener$2.visit(WorkspaceChangeListener.java:74)
        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:69)
        at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)
        at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener.resourceChanged(WorkspaceChangeListener.java:70)
        at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:291)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
        at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285)
        at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149)
        at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:396)
        at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1531)
        at org.eclipse.core.internal.resources.Workspace.buildInternal(Workspace.java:532)
        at org.eclipse.core.internal.resources.Workspace.build(Workspace.java:423)
        at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:830)
        at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:707)
        at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1018)
        at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1222)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
        ```

    *   …… `InternalWorkspaceJob.run`_

    *   …… `at org.jboss.tools.common.model.filesystems.impl.EclipseFileBodySource.write`_

    *   ...

# c# - 在 c# 中处理 c++ 结构

> ID：14334802
> 
> 赞同：1
> 
> 时间：2013-01-15T09:40:17.197
> 
> 标签：c#, c++, struct, bytearray

我有一个关于在 c# 中处理来自 c++ 的结构的问题。

我有一个来自第三方的 c++ 结构，例如：

```
typedef struct 
{
//For application usage, will not access by the core
void* file;         //Application
void* lock;         //Application
void* appParam1;    //Application, maybe filename
unsigned int appParam2;     //Application, maybe length
void* appParam3;    //Application, maybe folder

//Will be used by the core and the hosting application
unsigned char streamMode;       //Read, Write or Append
unsigned int fileOffset;        //Actual file offset
unsigned char buf[DC_STREAM_BUF_SIZE];      //Buffer for reading and writing data
unsigned short bufSize;     //Buffer size, how much is filled from the buffer
unsigned short  bufOffset;      //Offset in reading and writing in the buffer
unsigned char queryData;        //Indicator if actual data are queried

//For internal use only, do not touch
unsigned char requestType;
signed int deviceId;
signed int param1;
unsigned short crc;
void* callback;
unsigned char objType;
void* obj;

} STREAM_HANDLE; 
```

在 C# 中，此结构定义为：

```
[StructLayoutAttribute(LayoutKind.Sequential), Serializable]
public class STREAM_HANDLE
{

    public IntPtr file;         
    public object lockobj;      
    public IntPtr appParam1;

    [MarshalAsAttribute(UnmanagedType.U4)] public uint appParam2;
    public IntPtr appParam3;

    [MarshalAsAttribute(UnmanagedType.U1)]public byte streamMode;

    [MarshalAsAttribute(UnmanagedType.U4)]public uint fileOffset;       

    [MarshalAsAttribute(UnmanagedType.ByValArray, SizeConst = 0x0FFF)]public byte[] buf;

    [MarshalAsAttribute(UnmanagedType.U2)]public ushort bufSize;
    [MarshalAsAttribute(UnmanagedType.U2)]public ushort bufOffset;  
    [MarshalAsAttribute(UnmanagedType.U1)]public byte queryData;

    //For internal use only, do not touch
    [MarshalAsAttribute(UnmanagedType.U1)]public byte requestType;
    [MarshalAsAttribute(UnmanagedType.I4)]public int deviceId;
    [MarshalAsAttribute(UnmanagedType.I4)]public int param1;
    [MarshalAsAttribute(UnmanagedType.U2)]public ushort crc;

    public IntPtr callback;
    [MarshalAsAttribute(UnmanagedType.U1)]public byte objType;
    public IntPtr obj;
} 
```

我在 c# 中也有一个指向这个结构的 IntPtr，这样我就可以用这个指针调用 c++ 函数。这很好用。

**现在的问题是我想从 c# 中填充数组“buf”，以便 c++ 函数可以将其读出。这不起作用。**

这是我用来在 C# 中创建句柄的更多代码

```
STREAM_HANDLE Handle = new STREAM_HANDLE
    {
        file = Marshal.StringToHGlobalAnsi(name),
        appParam1 = Marshal.StringToHGlobalAnsi(name),
        buf = new byte[0x0FFF],
        lockobj = new object(),
    };

 IntPtr HandlePointer = Marshal.AllocHGlobal(Marshal.SizeOf(Handle));
 Marshal.StructureToPtr(Handle, HandlePointer, true); 
```

**我必须用 HandlePointer 调用一些 c++ 函数，并且我必须修改 c# 中“buf”的内容。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:31:37.600

Attribute将`MarshalAs`仅确保`buf`在分配时将字段编组为内联数组`Marshal.AllocHGlobal`。该结构的 C# 表示具有常规的 .Net 数组引用作为字段。您已经像往常一样分配和初始化它。如果你想以你想要的方式使用它，你必须在 C# 表示和非托管句柄之间来回切换。

另一种方法是将其声明为`fixed`数组。这仅在`unsafe`上下文中是可能的：

```
unsafe struct InplaceArrayUnsafe
{
    public fixed byte Buf[10];
}

unsafe
{
    InplaceArrayUnsafe a;
    Console.WriteLine(a.Buf[4]);
    Debug.Assert(sizeof(a)); // can even do this
    UnmanagedFunction(&a); // and this
} 
```

# sql - Oracle DB 和一种查找哪些表相互链接的方法

> ID：14334804
> 
> 赞同：0
> 
> 时间：2013-01-15T09:40:23.180
> 
> 标签：sql, database, oracle, map, database-schema

> **可能重复：**
> [从现有 Oracle 数据库生成数据库图/ER 图的工具？](https://stackoverflow.com/questions/2091599/tools-to-generate-a-database-diagram-er-diagram-from-existing-oracle-database)

我正在使用大型数据库。我正在使用 SQL Developer 访问 Oracle 数据库。我有大量的表和模式，并且这些表以某种方式相互关联。即表A中的字段也存在于B中......

我听说有一种方法可以找出它们是如何链接的并生成图表或树/列表。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:52:38.753

首先，您可以查询 user_constraints/all_constraints/dba_constraints 以生成表之间定义的外键关系列表。可以将其格式化为输入到将生成关系的有向图的许多绘图程序。我为此使用了graphviz，因为在最简单的级别上，您只需要沿以下行输出文本：

```
table1 -> table2
table2 -> table2
table2 -> table3 
```

您可以在此基础上将节点定义为“记录”，以添加有关表的更多信息。

优点：完全免费，比 ER 工具更好的自动布局缺点：需要一些编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:15:08.577

试试[Oracle 数据建模器](http://www.oracle.com/technetwork/developer-tools/datamodeler/overview/index.html)。您可以从现有的数据库模式生成 ER 图。

# mysql - Mysql获取分组的第一条和最后一条记录

> ID：14334805
> 
> 赞同：0
> 
> 时间：2013-01-15T09:40:25.670
> 
> 标签：mysql, subquery, grouping

我有一个查询问题，我无法弄清楚如何执行。

让我简化表结构；

```
|-------------|--------|
| node_id     |  id    |
| 2610        |  1643  |
| 2610        |  1644  |
| 2610        |  1645  |
| 2610        |  1646  |
| 2611        |  1647  |
| 2611        |  1648  | 
```

等等

我需要通过查询获取按 node_id 分组的第一条和最后一条记录，按 id 排序结果必须是：

```
| 2610  | 1643  | 1645  |
| 2611  | 1647  | 1648  | 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:44:44.657

```
SELECT  node_id, MIN(id), MAX(id)
FROM    mytable
GROUP BY
        node_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T09:16:01.110

您可以使用以下查询：

```
SELECT * FROM table_name where (id = (select max(id) from table_name) || id = (select min(id) from table_name)) 
```

它将返回两条记录。首先是具有最低 id 的行，其次是具有最高 id 的记录。

# asp.net - 用户无法更改 radgrid 中的复选框

> ID：14334810
> 
> 赞同：0
> 
> 时间：2013-01-15T09:40:41.033
> 
> 标签：asp.net, checkbox, radgrid

我使用此代码向 radgrid 添加一个复选框列。在我的程序中，我想动态添加行。但是当我使用我的代码并运行程序时，复选框对用户禁用，他/她无法更改它。我应该怎么做允许用户更改复选框吗？

我的代码：

```
<telerik:GridCheckBoxColumn DataField="Discontinued" HeaderText="Discontinued"
                                      DataType="System.Boolean" ShowFilterIcon="False">
                                </telerik:GridCheckBoxColumn> 
```

并动态添加行：

```
 DataTable table = new DataTable();
            table.Columns.Add("DeliveryID");
            table.Columns.Add("DeliveryName");

            DataRow dr = table.NewRow();

            dr["DeliveryName"] = "uk";

            table.Rows.Add(dr);

            DataRow dr2 = table.NewRow();

            dr2["DeliveryName"] = "US";

            table.Rows.Add(dr2);

            RadGrid1.DataSource = table;

            RadGrid1.Rebind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:01:59.070

`GridCheckBoxColumn`只能在网格处于编辑模式时选中/取消选中。已经有大量信息可以回答您的问题。尝试这些开始：

*   [默认情况下，如何将 Telerik RadGrid 设置为编辑模式？](https://stackoverflow.com/questions/4379448/how-do-i-set-telerik-radgrid-to-edit-mode-by-default-asp-net)
*   [GridCheckboxColumn 复选框不起作用](http://www.telerik.com/community/forums/aspnet-ajax/grid/gridcheckboxcolumn-checkboxes-don-t-work.aspx)

# c# - NHibernate - 从没有连接的参考列中选择 Id

> ID：14334812
> 
> 赞同：0
> 
> 时间：2013-01-15T09:40:45.617
> 
> 标签：c#, linq, nhibernate, reference, fluent-nhibernate

我有两个简单的对象 A 和 B。对象 A 引用了对象 B。

```
public class A
{
    public virtual Guid AId { get; set; }
    public virtual string Name { get; set; }
    public virtual B BObject { get; set; }
}

public class B
{
    public virtual Guid BId { get; set; }
    public virtual string Name { get; set; }
} 
```

我用 Fluent-NHibernate 映射了这两个对象：

```
public class AMap : ClassMap<A>
{
    public AMap()
    {
        Id(x => x.AId);
        Map(x => x.Name);
        References<B>(x => x.BObject);
    }
}

public class BMap : ClassMap<B>
{
    public BMap()
    {
        Id(x => x.BId);
        Map(x => x.Name);
    }
} 
```

创建数据库后，我得到两个表。A 的表有一个附加列“BObject_id”。

我有一个特殊情况，我只需要选择被引用对象 B 的 id。我使用 LINQ 来选择它。

```
var test = session.Query<A>().Select(x => x.BObject.BId); 
```

这会产生 sql 查询（我使用的是 MSSQL2012）：

```
select b1_.BId as col_0_0_ from iadb.[A] a0_ left outer join iadb.[B] b1_ on a0_.BObject_id=b1_.BId 
```

Hibernate先将两张表连接起来，然后选择B的key列

我的问题是：

是否可以仅从表 A 中选择“BOject_id”列的值？

我想在这种特殊情况下避免加入，并在其他情况下使用引用的好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:45:25.457

`A`您可以使用*只读* `BId`属性扩展您的 C# 类：

```
public class A
{
    public virtual Guid AId { get; set; }
    public virtual string Name { get; set; }
    public virtual B BObject { get; set; }
    public virtual Guid BId { get; set; } // virtual "navigational" property
} 
```

将其映射为*readonly*。这很重要，因为它将针对与引用 BObject 相同的列。

```
public AMap()
{
  Id(x => x.AId);
  Map(x => x.Name);
  References<B>(x => x.BObject)
    .Column("BOject_id");
  Map(x => x.BId)
    .Column("BOject_id") // the same column names
    .ReadOnly();
} 
```

现在您无需加入即可获得它：

```
var test = session.Query<A>().Select(x => x.BId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:04:45.807

你有没有试过这个：

```
var test = session.Query<A>().Select(x => x.BObject).Select(x => x.BId); 
```

在这种情况下，NHibernate 应该为 B 创建代理而不连接，并且仅访问已创建代理的标识符不应触发 DB 访问。

# vim - for-in 结构中的 vim 脚本很奇怪

> ID：14334815
> 
> 赞同：0
> 
> 时间：2013-01-15T09:40:47.967
> 
> 标签：vim

```
 5 function VaptGet(command_arg, package_arg, ...)
  6     let vapt_command = ''
  7     let command_list = ['install', 'remove']
  8     echo command_list
  9     for commands in command_list:
 10         if commands == a:command_arg:
 11             let vapt_command = commands
 12         endif
 13     endfor
 14     echo a:package_arg
 15     echo "hello world"
 16 endfunction
 17 command! -nargs=* VaptGet call VaptGet(<f-args>) 
```

当我运行时：

```
:VaptGet install tab 
```

我得到：

```
['install', 'remove']
Error detected while processing function VaptGet:
line    4:
E121: Undefined variable: command_list:
E15: Invalid expression: command_list:
tab
hello world 
```

有人可以告诉我为什么`command_list`缺少 var

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:37:50.857

`for`Vim 在循环和其他结构中不使用冒号：

```
for commands in command_list
    if commands == a:command_arg
        let vapt_command = commands
    endif
endfor 
```

# vbscript - vbscript - 如何按第一个数字一个一个地使用文件？

> ID：14334819
> 
> 赞同：0
> 
> 时间：2013-01-15T09:41:08.317
> 
> 标签：vbscript, powerpoint

你能给我一个建议吗？

我正在使用 Windows 并使用 MS 电源点，我想自动使用我的图片文件

他们被命名为

```
1_MOD_82.1542.bmp
2_MOD_102.8821.bmp
3_MOD_152.3541.bmp 
```

等等..我想用它而不是打字

```
ActiveWindow.Selection.SlideRange.Shapes.AddPicture(Filename:="F:\somedir\1_MOD_82.1542" 
```

所以我想要一些像这样的循环（但这段代码只是想法，不起作用）

```
for i:=0, i++,i<10 do
ActiveWindow.Selection.SlideRange.Shapes.AddPicture(Filename:="F:\somedir\%i*" 
```

我想制作一个循环，它将按起始编号使用图像文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:56:19.240

添加一个内循环：

```
Set fso = CreateObject("Scripting.FileSystemObject")

For i = 0 To 9
  For Each f In fso.GetFolder("F:\somedir").Files
    If f.Type = "Bitmap-Image" Then
      If CInt(Left(f.Name, 1)) = i Then
        ActiveWindow.Selection.SlideRange.Shapes.AddPicture(f.Path)
      End If
    End If
  Next
Next 
```

可以像这样添加检查以确保第一个字符是数字：

```
If f.Type = "Bitmap-Image" Then
  c = Left(f.Name, 1)
  If IsNumeric(c) Then
    If CInt(c) = i Then
      '...
    End If
  End If
End If 
```

处理图像的另一个（更复杂的）选项是将它们枚举到断开连接的[记录](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681510%28v=vs.85%29.aspx)集中，然后[过滤](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676691%28v=vs.85%29.aspx)记录集。这样您就不必在每个循环周期中枚举 images 文件夹中的所有文件。

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set rs  = CreateObject("ADOR.Recordset")
rs.Fields.Append "Name", 200, 80
rs.Fields.Append "Path", 200, 255
rs.Open

For Each f In fso.GetFolder("F:\somedir").Files
  If f.Type = "Bitmap-Image" Then
    rs.AddNew
    rs("Name").Value = f.Name
    rs("Path").Value = f.Path
    rs.Update
  End If
Next

For i = 0 To 9
  rs.Filter = "Name LIKE '" & i & "%'"
  rs.MoveFirst
  Do Until rs.EOF
    ActiveWindow.Selection.SlideRange.Shapes.AddPicture(rs("Path").Value)
    rs.MoveNext
  Loop
Next 
```

# magento - 奇怪的问题，magento 站点只能使用 https url 访问

> ID：14334820
> 
> 赞同：0
> 
> 时间：2013-01-15T09:41:14.453
> 
> 标签：magento, redirect, https

我正在尝试为我朋友的小商店建立一个 magento 商店（我们称之为站点 A），他目前在服务器上运行另一个网上商店（我们称之为站点 B）。

我已经在`/magento`文件夹中安装了magento（ver 1.7.0.2），我的第一个问题是使用普通`http://`url无法访问商店，只能使用`https://`url访问。

例如：如果我`myfriendsshop.com/magento`在浏览器中输入或输入，我将被重定向到 myfriendsshop.com，这是站点 B 的主页，

如果我`myfriendsshop.com/magento/index.php`改为在浏览器中输入，我将能够访问站点 A 的主页。

如果我`https://kmsdirect.co.uk/magento/`进入浏览器，我也可以访问站点A的主页。

我还在站点 A 中创建了一些测试产品，但是如果我单击该产品，我将再次重定向到站点 B，除非我使用`https://`url 访问该产品页面。有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:26:58.430

您可能想检查以下两件事：

*   您的虚拟主机是否为站点 A 和站点 B 正确设置？
*   在 System - Configuration - General - Web 下检查后端中的 base-url。确保为站点 A 和站点 B 正确配置它们

# java - Jetty WebSocketClient over ssl

> ID：14334821
> 
> 赞同：11
> 
> 时间：2013-01-15T09:41:19.107
> 
> 标签：java, ssl, websocket, jetty

我有一个在嵌入式码头（8.1.8.v20121106）中运行的 WebSocket 服务器，并希望使用码头 WebSocketClient 从另一个 Java 应用程序连接到它。这是我使用的测试方法：

```
@Test
public void testWebSockets() throws Exception {
    logger.debug("START testWebSockets()");
    WebSocketClientFactory factory = new WebSocketClientFactory();
    factory.setBufferSize(4096);
    factory.start();        

    WebSocketClient client = factory.newWebSocketClient();
    client.setMaxIdleTime(30000);
    client.setMaxTextMessageSize(1024);
    client.setProtocol("MyProtocol");                                       

    WebSocket webSocket = new ClientWebSocket();
    String wsUrl = "ws://localhost:8080/websocket";
    String wssUrl = "wss://localhost:8443/websocket";
    Future future = client.open(new URI(wssUrl), webSocket);
    WebSocket.Connection connection = (Connection) future.get(10, TimeUnit.SECONDS);
    assertNotNull("No connection!", connection);
    connection.sendMessage("TestMessage");
    connection.close();
    logger.debug("END testWebSockets()");
} 
```

使用 wsUrl 不是问题，但我无法让它与 wss 一起使用。我认为服务器不是问题，因为我从 javascript 连接 wss 没有问题。我在这个测试中做错了什么？

服务器和客户端都在 ssl 设置上记录“坏记录 MAC”。这是服务器日志的最后一部分：

```
 2013-01-15 10:26:06,398 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] unwrap OK NEED_TASK consumed=107 produced=0
2013-01-15 10:26:06,399 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NEED_TASK i/o/u=75/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1
,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NEED_TASK filled=69/75 flushed=0/0
2013-01-15 10:26:06,413 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NEED_UNWRAP i/o/u=75/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=
-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NEED_UNWRAP filled=0/75 flushed=0/0
2013-01-15 10:26:06,415 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] unwrap OK NEED_UNWRAP consumed=6 produced=0
2013-01-15 10:26:06,416 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NEED_UNWRAP i/o/u=69/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=
-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NEED_UNWRAP filled=0/69 flushed=0/0
2013-01-15 10:26:06,419 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] unwrap OK NEED_WRAP consumed=69 produced=0
2013-01-15 10:26:06,420 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NEED_WRAP i/o/u=0/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,
b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NEED_WRAP filled=0/0 flushed=0/0
2013-01-15 10:26:06,421 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] wrap OK NEED_WRAP consumed=0 produced=6
2013-01-15 10:26:06,422 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NEED_WRAP i/o/u=0/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,
b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NEED_WRAP filled=0/0 flushed=6/0
2013-01-15 10:26:06,423 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] wrap OK FINISHED consumed=0 produced=69
2013-01-15 10:26:06,424 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NOT_HANDSHAKING i/o/u=0/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0
,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NOT_HANDSHAKING filled=0/0 flushed=69/0
2013-01-15 10:26:06,426 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NOT_HANDSHAKING i/o/u=0/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0
,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NOT_HANDSHAKING filled=0/0 flushed=0/0
2013-01-15 10:26:06,428 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - [Session-1, SSL_NULL_WITH_NULL_NULL] SslConnection@9063ac SSL NOT_HANDSHAKING i/o/u=245/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s
=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0} NOT_HANDSHAKING filled=245/245 flushed=0/0
2013-01-15 10:26:06,430 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ssl - SCEP@1dac071{l(/127.0.0.1:65084)<->r(/127.0.0.1:8444),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1r}-{SslConnection@9063ac SSL NEED_WRAP
i/o/u=245/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0}}
javax.net.ssl.SSLException: bad record MAC
        at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1639)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1607)
        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:979)
        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)
        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.eclipse.jetty.io.nio.SslConnection.unwrap(SslConnection.java:524)
        at org.eclipse.jetty.io.nio.SslConnection.process(SslConnection.java:359)
        at org.eclipse.jetty.io.nio.SslConnection.access$900(SslConnection.java:48)
        at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.fill(SslConnection.java:666)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
        at org.eclipse.jetty.io.nio.SslConnection.handle(SslConnection.java:196)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:722)
2013-01-15 10:26:06,463 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ChannelEndPoint - close SCEP@1dac071{l(/127.0.0.1:65084)<->r(/127.0.0.1:8444),d=true,open=true,ishut=false,oshut=false,rb=false,wb=false,w=true,i=1!}-{SslConnection@906
3ac SSL NEED_WRAP i/o/u=245/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0}}
2013-01-15 10:26:06,469 qtp9902580-25 DEBUG org.eclipse.jetty.http.HttpParser -
javax.net.ssl.SSLException: bad record MAC
        at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1639)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1607)
        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:979)
        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)
        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.eclipse.jetty.io.nio.SslConnection.unwrap(SslConnection.java:524)
        at org.eclipse.jetty.io.nio.SslConnection.process(SslConnection.java:359)
        at org.eclipse.jetty.io.nio.SslConnection.access$900(SslConnection.java:48)
        at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.fill(SslConnection.java:666)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
        at org.eclipse.jetty.io.nio.SslConnection.handle(SslConnection.java:196)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:722)
2013-01-15 10:26:06,506 qtp9902580-25 DEBUG org.eclipse.jetty.http.HttpParser - HttpParser{s=-14,l=0,c=0}
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
        at org.eclipse.jetty.io.nio.SslConnection.handle(SslConnection.java:196)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:722)
Caused by: javax.net.ssl.SSLException: bad record MAC
        at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1639)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1607)
        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:979)
        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)
        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.eclipse.jetty.io.nio.SslConnection.unwrap(SslConnection.java:524)
        at org.eclipse.jetty.io.nio.SslConnection.process(SslConnection.java:359)
        at org.eclipse.jetty.io.nio.SslConnection.access$900(SslConnection.java:48)
        at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.fill(SslConnection.java:666)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 9 more
2013-01-15 10:26:06,470 qtp9902580-23 Selector0 DEBUG org.eclipse.jetty.io.nio - destroyEndPoint SCEP@1dac071{l(null)<->r(0.0.0.0/0.0.0.0:8444),d=true,open=false,ishut=true,oshut=true,rb=false,wb=false,w=true,i=1!}-{SslConnection@9063ac
SSL NEED_WRAP i/o/u=245/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-14,l=0,c=0},r=0}}
2013-01-15 10:26:06,555 qtp9902580-25 DEBUG org.eclipse.jetty.server.AsyncHttpConnection - Disabled read interest while writing response SSL NEED_WRAP i/o/u=245/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0
,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=0},r=0}
2013-01-15 10:26:06,559 qtp9902580-23 Selector0 DEBUG org.eclipse.jetty.server.AbstractHttpConnection - closed AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=0},r=0
2013-01-15 10:26:06,560 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio - EOF
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
        at org.eclipse.jetty.io.nio.SslConnection.handle(SslConnection.java:196)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Thread.java:722)
Caused by: javax.net.ssl.SSLException: bad record MAC
        at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1639)
        at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1607)
        at sun.security.ssl.SSLEngineImpl.readRecord(SSLEngineImpl.java:979)
        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:884)
        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:758)
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.eclipse.jetty.io.nio.SslConnection.unwrap(SslConnection.java:524)
        at org.eclipse.jetty.io.nio.SslConnection.process(SslConnection.java:359)
        at org.eclipse.jetty.io.nio.SslConnection.access$900(SslConnection.java:48)
        at org.eclipse.jetty.io.nio.SslConnection$SslEndPoint.fill(SslConnection.java:666)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 9 more
2013-01-15 10:26:06,623 qtp9902580-25 DEBUG org.eclipse.jetty.io.nio.ChannelEndPoint - close SCEP@1dac071{l(null)<->r(0.0.0.0/0.0.0.0:8444),d=true,open=false,ishut=true,oshut=true,rb=false,wb=false,w=true,i=1-}-{SslConnection@9063ac SSL
NEED_WRAP i/o/u=245/0/0 ishut=false oshut=false {AsyncHttpConnection@17fc2ee,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=0},r=0}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T16:15:53.917

我也尝试过使用 Jetty 9.0.3，但得到了与 Jetty 相同的异常 [- SSL Websocket Client](https://stackoverflow.com/questions/16285511/jetty-ssl-websocket-client)

由于码头 websocket 客户端似乎有其他人没有的问题，我切换到[异步 http 客户端](https://github.com/AsyncHttpClient/async-http-client)，它对我来说运行完美：

```
@Test
public void testNingWebSockets() throws Exception {
    logger.debug("START testNingWebSockets()");

    String wsUrl = "ws://localhost:8081/websocket";
    String wssUrl = "wss://localhost:8444/websocket";
    AsyncHttpClient client = new AsyncHttpClient();
    WebSocketUpgradeHandler handler = new WebSocketUpgradeHandler.Builder().addWebSocketListener(new ClientWebSocket()).build();
    WebSocket websocket = client.prepareGet(wssUrl).execute(handler).get();
    Assert.assertNotNull("No connection!", websocket);
    logger.debug("Connection made: " + websocket.isOpen());
    websocket.sendMessage("TestMessage".getBytes());
    Thread.sleep(1000);
    websocket.close();
    logger.debug("END testNingWebSockets()");
} 
```

# sql - BigQuery 加入 - 错误：意外

> ID：14334831
> 
> 赞同：1
> 
> 时间：2013-01-15T09:42:11.583
> 
> 标签：sql, join, google-bigquery

我反复得到

`Error: Unexpected. Please try again.`

使用此查询：

```
SELECT Pollen.start, DNase.start, DNase.DNasecleavage
FROM   DNAse_raw_seq.DNAse_raw_seq_Chr1_table AS DNase
JOIN   DNAse_raw_seq.polleninput AS Pollen
       ON DNase.start  = Pollen.start
       where Pollen.GeneID contains "At1"; 
```

昨天我在类似的 table2 上使用了相同的查询，效果很好。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:08:46.990

知道了！

功能查询如下所示

```
SELECT Pollen.GeneID, Pollen.start, DNase.DNasecleavage
FROM   DNAse_raw_seq.DNAse_raw_seq_Chr1_table AS DNase
JOIN   DNAse_raw_seq.polleninput AS Pollen
       ON DNase.start = Pollen.start
       where Pollen.GeneID contains "At1"; 
```

我不允许选择 DNase.start....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:56:27.910

```
SELECT Pollen.start, DNase.start, DNase.DNasecleavage
FROM   DNAse_raw_seq.DNAse_raw_seq_Chr1_table AS DNase
JOIN   DNAse_raw_seq.polleninput AS Pollen
       ON DNase.start  = Pollen.start
       where Pollen.GeneID contains "At1"; 
```

您想在“Pollen.GeneID”上使用 where 但您没有选择它。您可以通过将其添加到选择来修复它。像这样：

```
SELECT Pollen.GeneID, Pollen.start, DNase.start, DNase.DNasecleavage
FROM   DNAse_raw_seq.DNAse_raw_seq_Chr1_table AS DNase
JOIN   DNAse_raw_seq.polleninput AS Pollen
       ON DNase.start  = Pollen.start
       where Pollen.GeneID contains "At1"; 
```

# javascript - javascript中的单引号到双引号，以及双引号到单引号

> ID：14334832
> 
> 赞同：2
> 
> 时间：2013-01-15T09:42:12.463
> 
> 标签：javascript, jquery

我想改变

每个单引号到双引号和每个双引号到单引号

在 jquery 或 js 中。

```
var myString = " tes't tes\"t tes\"t te'st ";
console.log(myString);

for (i = 0; i < myString.length; i++) {
    console.log(myString[i]);
    if (myString[i] == "'") {
        myString[i] == "\"";
            continue;
    }
    if (myString[i] == "\"") {
        myString[i] == "'";
            continue;
    }
}

console.log(myString); 
```

但是我的功能不能正常工作。请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:49:31.297

在`if`s 中，你不是在做一个赋值 ( `myString[i] == "\"";`)，而是一个比较。这应该是一个单一的`=`. 唯一的问题是，字符串是不可变的，因此这不会按预期工作。解决方案，构建一个新字符串：

```
function flipQuotes(str) {
  var result = [], i = 0, lim = str.length, c;

  for (; i < lim; i += 1) {
    c = str.charAt(i);
    switch(c) {
      case '"':
        result.push("'");
        break;

      case "'":
        result.push('"');
        break;

      default:
        result.push(c);
    }
  }

  return result.join('');
}

var myString = " tes't tes\"t tes\"t te'st ";
console.log(
  flipQuotes(myString) // => ' tes"t tes't tes't te"st '
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:48:38.100

你在做比较，而不是评估。此外，您不能以这种方式更改字符串，您需要创建一个新字符串：

```
var myString = " tes't tes\"t tes\"t te'st ";
    console.log(myString);
    var str = [];

    for (i = 0; i < myString.length; i++) {
        console.log(myString[i]);
        if (myString[i] == "'") {
            str.push("\"");
        }
        else if (myString[i] == "\"") {
            str.push("'");
            continue;
        }
       else
      {
        str.push(myString[i]);
      }
    }
    str.join("");

    console.log(str); 
```

[在这个现场演示](http://jsfiddle.net/Tgvht/1/)中检查它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:54:28.400

除了不正确地使用`==`运算符之外，您的代码中还有另一个问题：

`myString[i]`可用于获取字符串的*第 i 个*字符（在大多数浏览器中）；但它不能用来“改变”那个字符。这将起作用：

```
var a = myString[i]; 
```

这不会：

```
myString[i] = a; 
```

[`charAt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt)这是您的代码，经过细微更改以及使用and[`substring`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)来读取和更改字符串的字符而重新编写：

```
var myString = " tes't tes\"t tes\"t te'st ";
console.log(myString);
for (i = 0; i < myString.length; i++) {
    if (myString.charAt(i) == "'") {
        myString = myString.substring(0, i) + '"' + myString.substring(i + 1);
    } else if (myString.charAt(i) == '"') {
        myString = myString.substring(0, i) + "'" + myString.substring(i + 1);
    }
}
console.log(myString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T09:59:14.013

这是使用不同方法的另一种解决方案：

```
var myString = " tes't t%es\"t tes\"t te'st ",
result = myString.replace(/%/g, '\\%')
.replace(/'/g, '%')
.replace(/"/g, "'")
.replace(/[^\\]%/g, function (m) {
   return m[0] + '"';
})
.replace('\\%', '%'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T10:02:22.253

首先，字符串是不可变的，对字符串的任何操作`.replace()`实际上都会返回一个新字符串。您不能执行以下操作：

```
myString[ i ] = "x"; 
```

您的另一个错误是使用比较运算符作为赋值运算符。

```
myString[ i ] == "x"; 
```

知道了这一点，您需要构造一个新字符串并将 的值替换为`myString`新值。构造字符串的一种方法是使用`.split('')`方法创建字符串的数组表示，对数组执行突变，然后使用数组的方法恢复为字符串`.join('')`。

```
var myString = " tes't tes\"t tes\"t te'st ";
var tokens = myString.split('');

for (i = 0; i < tokens.length; i++) {
  if (tokens[i] == "'") {
    tokens[i] = "\"";
    continue;
  }
  if (tokens[i] == "\"") {
    tokens[i] = "'";
    continue;
  }
}
myString = tokens.join('');
console.log(myString); 
```

# macos - 从 TideSDK 中的自定义 URL 检索参数

> ID：14334833
> 
> 赞同：0
> 
> 时间：2013-01-15T09:42:13.890
> 
> 标签：macos, url-scheme, tidesdk

我在 TideSDK 中组合了一个桌面应用程序，并且在查找通过自定义启动 URL 传递给应用程序的参数时遇到了一些麻烦。

应用程序在调用适当的协议时启动（称为 aaa://），但我无法弄清楚如何获取 URL 字符串。我读了几个线程，建议我可以通过 Ti.API.application.getArguments() 调用获取字符串，但它返回一些奇怪的东西（见下文）。

```
// launch application with aaa://some_args_here
var args = Ti.API.application.getArguments();
// returns (StaticBoundList) [ /path/to/app, "-psn_0_721072", ] 
```

我并不完全惊讶这似乎不起作用，因为 API 文档说 getArguments 方法返回命令行参数列表。

任何有关如何访问启动 URL 的见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:53:36.943

看看 window.location.search

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T00:06:32.587

目前似乎没有“官方”的方式来做到这一点，所以我想出了我自己的解决方案，它似乎工作得很好（尽管目前它只为 OSX 实现）。

翻遍TideSDK源码，找到了创建原生应用委托的地方。我在应用委托中添加了一个 URL 启动处理程序，它将启动 URL 存储在一个新的应用委托成员中，并通过 Ti.UI 中的绑定将其连接到 API。

如果其他人对此功能感兴趣，或者对如何在 Windows 上完成此任务有见解，请与我们联系！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T03:38:28.340

虽然我没有你的问题，但只想说以下功能对我来说很好用。

> var args = Ti.API.application.getArguments();

这可能是 urlprotocl 注册表的问题吗？

我的 url 协议是这样设置的：[MSDN](http://msdn.microsoft.com/en-us/library/aa767914#app_ex)

因此“命令”中的值是

> "C:\YOUR_APP_FOLDER\YOURAPP.exe" "%1"

在win7和winxp上测试，都成功拿到了参数。

# terminal - UNIX - 处理终端窗口状态更改

> ID：14334837
> 
> 赞同：0
> 
> 时间：2013-01-15T09:42:27.667
> 
> 标签：terminal, window, state

我想检测运行我的 CLI 程序的窗口何时变为活动/不活动。

具体来说，我的程序定期从服务器接收数据并将它们显示在终端窗口上。每当收到新数据时，我都会更改窗口的标题以通知用户。我想做的是在他看到这些新数据后重置窗口的名称。

我正在使用 python，但我想如果你有一个通用的解决方案，我可以继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:45:52.040

某些终端，例如`xterm`让您将这些信息作为焦点事件获取。如果启用 DEC 模式 1004

```
CSI ? 1004 h 
```

然后您将获得焦点/焦点事件发送为

```
CSI I      # focus in
CSI O      # focus out 
```

# extjs - Ext JS 并将数据加载到表单中

> ID：14334838
> 
> 赞同：1
> 
> 时间：2013-01-15T09:42:29.547
> 
> 标签：extjs

我已经构建了一个简单的 MVC 应用程序，其中有一个表单，我需要将数据加载到其中。

我想知道是否应该使用商店或直接使用模型类来加载这些数据。我的网格已经有一个商店。

所以我看到了这 3 个选项。

1.  使用模型类加载数据
2.  使用现有存储加载数据（网格已使用此存储）
3.  创建第二个商店并使用它加载我的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:52:58.310

*   如果您的商店使用相同的模型并且您编辑的数据（记录）将被加载到该商店中（例如，如果您在双击网格时打开表单）或者可以插入其中我建议您去用专卖店的办法。

*   如果您编辑不一定会加载到网格存储中的记录（模型实例），您应该使用模型加载数据。

*   仅当上述两点都成立并且您也不想将该表单中的多个记录（模型实例）编辑批处理到对服务器的一个请求时，才需要第二个存储。

*   第三种选择是将表单直接绑定到服务器，但我建议您使用模型方法。

> **请注意**，如果您需要为商店和模型设置不同的代理，只需在模型上设置一个，在商店上设置一个。默认情况下，商店将继承模型的代理，但从不继承模型商店的代理

# r - 如何将数据框插入到 SQL Server 表中？

> ID：14334840
> 
> 赞同：23
> 
> 时间：2013-01-15T09:42:33.330
> 
> 标签：r, rodbc

我正在尝试将数据框上传到 SQL Server 表，我尝试将其分解为一个简单的 SQL 查询字符串。

```
library(RODBC)
con <- odbcDriverConnect("driver=SQL Server; server=database")

df <- data.frame(a=1:10, b=10:1, c=11:20)

values <- paste("(",df$a,",", df$b,",",df$c,")", sep="", collapse=",")

cmd <- paste("insert into MyTable values ", values)

result <- sqlQuery(con, cmd, as.is=TRUE) 
```

..这似乎工作但不能很好地扩展。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T11:20:17.200

[编辑]也许粘贴`names(df)`可以解决缩放问题：

```
 values <- paste( " df[  , c(", 
                     paste( names(df),collapse=",") ,
                                   ")] ", collapse="" ) 
      values
      #[1] " df[  , c( a,b,c )] " 
```

您说您的代码正在“工作”。我还认为如果想“上传”，我会使用 sqlSave 而不是 sqlQuery。

我猜想这更有可能做你描述的事情：

```
 sqlSave(con, df, tablename = "MyTable") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-05T07:46:40.270

这对我有用，我发现它更简单。

```
library(sqldf)
library(odbc)
con <- dbConnect(odbc(),
                 Driver = "SQL Server",
                 Server = "ServerName",
                 Database = "DBName",
                 UID = "UserName",
                 PWD = "Password")
dbWriteTable(conn = con, 
             name = "TableName", 
             value = x)  ## x is any data frame 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-21T11:48:15.757

由于`insert INTO`限制为 1000 行，您可以`dbBulkCopy`从[rsqlserver](https://github.com/agstudy/rsqlserver)包中。

`dbBulkCopy`[是一个 DBI 扩展，它连接 Microsoft SQL Server 流行的名为bcp](http://msdn.microsoft.com/en-us/library/7ek5da1a(v=vs.110).aspx)的命令行实用程序，以快速将大文件批量复制到表中。例如：

```
url = "Server=localhost;Database=TEST_RSQLSERVER;Trusted_Connection=True;"
conn <- dbConnect('SqlServer',url=url)
## I assume the table already exist
dbBulkCopy(conn,name='T_BULKCOPY',value=df,overwrite=TRUE)
dbDisconnect(conn) 
```

# android - Android AChartEngine：SalesComparisonChart 行未达到确切值

> ID：14334841
> 
> 赞同：4
> 
> 时间：2013-01-15T09:42:41.590
> 
> 标签：android, charts, achartengine

我正在使用适用于 android 的 AChartEngine 库，并且正在使用 SalesComparisonChart 类绘制图表。但我注意到绘制的线在数量上没有达到相同的值，它被绘制在低于照片中的确切值的下方。在东方类别中，值为 3608 和 4358，但线条低于这些值。有人能帮我吗 ？

![在此处输入图像描述](../Images/f2bf36428b0a4c76d51db145ee9b5e29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:00:35.047

请在 AChartEngine 问题跟踪器中创建问题。

在解决此问题之前，您可以使用 LineChart 而不是三次折线图，也可以添加自定义注释。

```
series.addAnnotation("text", x, y); 
```

# java - Java：是否会收集瞬态对象垃圾？

> ID：14334848
> 
> 赞同：4
> 
> 时间：2013-01-15T09:42:55.217
> 
> 标签：java, garbage-collection, transient

我的程序显示了内存泄漏的趋势。当内存使用达到峰值时，GC 计数更多，对象被垃圾回收。

我们发现一个类是导致内存泄漏趋势的原因。

但是我想检查一下为什么该类实际上是垃圾收集的，当我探索该类时，该类中只有一个瞬态对象。

瞬态对象是未序列化的对象。但是瞬态性质与垃圾收集有什么关系吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T09:44:23.910

没有瞬态对象这样的东西。有一些瞬态*字段*，在序列化过程中会被忽略——但这对垃圾回收没有影响。

基本上，我认为你需要在别处寻找你的泄漏（如果你确实*有*泄漏）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T09:44:43.937

> 瞬态性质与收集的垃圾有什么关系吗？

没什么。

关键字表示它不应该被序列化，`transient`所以如果有任何东西，它意味着反序列化的对象比它们本来的要小。

> 我们发现一个类是导致内存泄漏趋势的原因。

您将发生内存泄漏，因为您在不需要时将此类对象保留在集合中。您必须确保以这种方式保留的对象在不需要时被删除。

* * *

仅仅因为您保留了数据，并不意味着您有泄漏。您可能需要这些数据，因此您需要比预期更多的内存。在这种情况下，您需要通过设置`-Xmx`或`-mx`命令行选项来增加最大内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:45:12.180

不，没有关系。请记住，如果 GC 最终正确清理了所有内容，您就不会遇到内存泄漏的情况；这就是 GC 的工作方式。你不应该担心迟到的 GC，如果你担心，你只需要调整 JVM 参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:45:39.283

瞬态不会影响垃圾收集。

*   也许寻找在紧密循环中使用的对象，其中对象相互引用，这可能会减慢垃圾收集速度。

*   也许探索使用 Java 的弱引用。

*   也许看看调整垃圾收集设置。ConcurrentSweepGC 可以提供帮助。

*   也许只是看看分配更多的堆栈和堆空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T09:52:22.400

Java中确实存在“可以被垃圾收集的瞬态对象”，`WeakReference`用于应该在gc运行后立即收集的对象以及`SoftReference`更好地保留但如果内存不足则应该丢弃的对象。

该`transient`关键字对内存管理没有影响。

# windows - 为什么这段代码说 echo 已关闭？

> ID：14334850
> 
> 赞同：41
> 
> 时间：2013-01-15T09:43:06.937
> 
> 标签：windows, batch-file, cmd

这段代码有什么问题？它说`ECHO is off`。

```
@ECHO off
set /p pattern=Enter id:
findstr %pattern% .\a.txt > result
if %errorlevel%==0 (
set var2= <result
echo %var2%
set var1=%var2:~5,3%
echo %var1% > test.txt
echo %var1%
) else (
echo error
)
del result
pause 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-15T09:56:59.707

如果您的变量在某处为空，则与单独使用命令“echo”相同，它只会打印 echo 的状态。

为避免这种情况，您应该将所有`echo`命令替换为以下内容：

```
echo var2: %var2% 
```

这样，如果`%var2%`为空，它将只打印“echo var2:”而不是“echo off”。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-15T11:54:16.083

正如 Laurent 所说，这不是 . 的问题`ECHO`，而是您的代码的问题。

在批处理文件中，块在执行之前会被完全解析。
解析时，将完成所有百分比扩展，因此您的变量似乎无法在块内更改。

但是由于存在延迟扩展，延迟扩展将在执行时进行评估，而不是在解析块时进行评估。

它必须启用，默认情况下延迟扩展是禁用的。

```
@ECHO off
setlocal EnableDelayedExpansion
set /p pattern=Enter id:
findstr %pattern% .\a.txt > result
if %errorlevel%==0 (
  set var2= <result
  echo(!var2!
  set var1=!var2:~5,3!
  echo(!var1! > test.txt
  echo(!var1!
) else (
  echo error
)
del result 
```

我在这里使用了构造`echo(`而不是`echo`因为这将确保即使变量为空也能回显一个空行。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-08-25T09:44:26.560

不确定，如果这篇文章仍然被阅读，但仍然如此。`@echo off`您应该尝试以下操作：在您必须输入之后的代码之上

```
 setlocal enabledelayedexpansion 
```

此外，在任何您想使用在括号中更改的变量的任何地方（如`For-Loops`or `If's`），您都必须将in 更改`%`为`!``!varname!`

这应该有帮助...

问候

geisterfurz007

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T01:22:22.120

您的问题的解决方案是在 if 块完成后放置“echo”。尝试这个：

```
@ECHO off
set /p pattern=Enter id:
findstr %pattern% .\a.txt > result
if %errorlevel%==0 (
    set var2= <result
    set var1=%var2:~5,3%
    goto print 
) else (
    echo error
    goto result
)
:print
echo %var2%
echo %var1% > test.txt
echo %var1%

:result
del result
pause 
```

这样你就可以看到你想要的解决方案。干杯! ;]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T10:33:23.330

![在此处输入图像描述](../Images/9fac957001ba6cdfaa96bde28651276c.png)首先在你有这个批处理文件的同一目录中创建一个文件 a.txt ...在其中写一些文本...注意：只有 Windows 2000 Windows ME Windows XP Windows Vista Windows 7 支持 FINDSTR

```
set /p pattern=Enter id:
findstr %pattern% a.txt > __query.tmp
set /p result=<__query.tmp
if %errorlevel%==0 (
set var2= %result%
echo %var2%
set var1= %var2:~5,3%
echo %var1% > test.txt
echo %var1%
) else (
echo error
)
del __query.tmp
pause 
```

运行这个bath文件..你会在新创建的文件test.txt中找到你在a.txt中的第一行字符串的子字符串(start=5,length=3)。终于让它工作了！

# java - 在java项目（eclipse）中导入一些android类

> ID：14334851
> 
> 赞同：-2
> 
> 时间：2013-01-15T09:43:10.757
> 
> 标签：java, android, eclipse, class, import

我需要在 Eclipse 中访问非 android 项目（只是 java 项目）中的一些 android 类。

我实际上需要做的：

```
Class c = Class.forName("android.widget.Button"); 
```

显然我得到一个 java.lang.ClassNotFoundException: android.widget.Button

我可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:31:16.963

不要在 eclipse 中添加 Android Classpath Container，而是添加单独的 android.jar..its 建议添加最高的 android 版本，然后创建一个 local.properties 文件来存储构建脚本的位置。

# android - 如何在android中调用apk字体使用CSS？

> ID：14334854
> 
> 赞同：0
> 
> 时间：2013-01-15T09:43:12.793
> 
> 标签：android, css, android-webview

我为 webview 设置了字体。由于字体文件太大，将字体文件放入服务器时会严重影响加载时间。

所以我决定把字体文件打包成apk。但是我不知道如何在css中调用它？

谁能给我一些建议？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:58:09.477

您可以像这样在css中设置路径

```
@font-face {
   font-family: 'android_myface';
   src: url('file:///android_asset/fonts/myfont.ttf'); 
} 
```

并使用它

```
html{
    font-family: 'android_myface', serif;
} 
```

把你的 myfont.ttf 文件放在你的assets文件夹中

# linux - 如何将其他字段附加到 CSV 文件中的每一行？

> ID：14334860
> 
> 赞同：1
> 
> 时间：2013-01-15T09:43:24.193
> 
> 标签：linux, bash, shell, csv, scripting

这不是关于在文件中添加新文本行的问题。这是关于将数据附加到每一行。

我在 CSV 文件中有超过 300 行，我想在每行中添加更多文本，用逗号分隔（用于 MS Excel 图表的格式）。

从*ex.txt*文件：

```
12:11, 321
12:12, 23 
```

我想在每一行附加更多字段，如下所示：

```
12:11, 321, 222, 55
12:12, 23, 33, 402 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:46:54.163

```
 while read line; do
     # modify $whatYouWantToAppend
     echo -e "${line} ${whatYouWantToAppend}\n" >> newTest.txt
 done < test.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:02:18.810

### 使用来自 GNU CoreUtils 的粘贴

假设您没有附加静态字符串，您的问题是您需要从一个文件中读取文本并从另一个文件中附加文本。这正是[粘贴](http://www.gnu.org/software/coreutils/manual/html_node/paste-invocation.html)命令的作用。

### 示例文件

文件1的内容：

```
12:11, 321
12:12, 23 
```

文件2的内容：

```
 222, 55
 33, 402 
```

请注意 file2 第一列中的前导空格。这是保留您所描述的格式所必需的，该格式似乎是 CSV，每个分隔符后都有前导空格。

### 示例调用和输出

```
$ paste -d, file1 file2
12:11, 321, 222, 55
12:12, 23, 33, 402 
```

# ms-access - 捕获 Dsum Null 导致计算不正确

> ID：14334862
> 
> 赞同：1
> 
> 时间：2013-01-15T09:43:49.883
> 
> 标签：ms-access, vba

`j`并且`d`两者都评估相同的函数，但是当我`If IsNull`用来捕获任何空值时，d 的值没有被正确评估。这是什么原因造成的？

```
 Dim d As Integer
    Dim j As Integer

    j = DSum("Count", "qry_nihr_unique")
    If IsNull(d = DSum("Count", "qry_nihr_unique")) Then
        MsgBox "No records were found for the data criteria you entered"
        GoTo ESub
    Else
        Me.un_p.Value = d
    End If

    Debug.Print "j = " & j
    Debug.Print "d = " & d

    j = 58
    d = 0 
```

**回答后更新代码**

```
 Dim d
    d = DSum("Count", "qry_nihr_unique")
    If IsNull(d) Then
        MsgBox "No records were found for the data criteria you entered"
        GoTo ESub
    Else
        Me.un_p.Value = d
    End If 
```

在下面 HansUp 的回答之后，我相信这是写这个的最有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:39:22.950

在 内`IsNull()`，代码检查是否`d`等于`DSum()`表达式。这是一个相等测试，没有分配给`d`. 所以 的值`d`保持不变 --- 它被初始化为零并保持为零。

情况很像这个立即窗口会话：

```
? DSum("id", "tblFoo")
 134 
d = 0
? (d = DSum("id", "tblFoo"))
False
? d
 0
? IsNull(d = DSum("id", "tblFoo"))
False
? d
 0 
```

以下语句将`DSum()`结果分配给`d`; 不测试两者是否相等：

```
d = DSum("id", "tblFoo")
? d
 134 
```

# c# - EF代码优先和静态表的多对多关系

> ID：14334863
> 
> 赞同：0
> 
> 时间：2013-01-15T09:43:50.247
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

我正在使用 Entity Framework 5 和代码优先方法。

我有一`Product`门课，可以有零个或多个`ProductColors`。使用播种将颜色预填充到数据库中。颜色表不应使用 EF 填充新项目，因为它是不会增长的项目的静态列表。颜色在许多产品中重复使用。

我的模型类：

```
public class Product
{
    public int ID { get; set; }
    public string Title { get; set; }
    public virtual ICollection<ProductColor> Colors { get; set; }
}

public class ProductColor
{
    public int ID { get; set; }
    public string Title { get; set; }
} 
```

在我的`DbMigrationsConfiguration`：

```
protected override void Seed(... context)
{
    context.ProductColors.AddOrUpdate(
        p => p.ID,
        new ProductColor(1, "White"),
        new ProductColor(2, "Black"),
        new ProductColor(3, "Red"));
} 
```

在我的`DbContext`：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Product>().HasMany(x => x.Colors).WithMany();
}

public DbSet<Product> Products { get; set; } 
```

My`Products`是从 viewmodel 对象创建的，无论是在第一次创建时，还是在后期编辑时：

```
Product product = new Product { ID = productViewModel.ID };

product.Colors = new List<ProductColor>();
foreach (int colorId in productViewModel.SelectedColorIds)
{
    ProductColor productColor = productColors.Find(m => m.ID == colorId);
    product.Colors.Add(productColor);
} 
```

它们在创建时像这样保存在数据库中：

```
db.Products.Add(product);
db.SaveChanges(); 
```

当它们被编辑时，就像这样：

```
db.Entry(product).State = EntityState.Modified;
db.SaveChanges(); 
```

EF 生成`Products`,`ProductColor`和`ProductProductColor`表最初就好了。首次创建和保存产品时，颜色已正确保存在`ProductProductColor`表中。

但是当我编辑/修改`Product`and`Colors`集合时，数据库中的颜色没有更新。似乎它无法识别颜色集合已被修改。我怎样才能做到这一点？

很抱歉这篇冗长的文章，但我想包括所有元素，以防有人需要完整的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:15:01.510

我设法找到了解决方案。我没有创建新`Product`实例（使用与以前相同的 ID），而是从数据库中获取产品。

```
IQueryable<Product> products = 
    from p in db.Products.Include("Colors")
    select p;
Product product = Enumerable.FirstOrDefault(products, p => p.ID == id); 
```

然后当我更改`Colors`集合时，似乎项目的跟踪正在工作并正确序列化到数据库中。

在阅读了解原因后，我看到从数据库中获取产品会创建一个代理对象，该对象为我跟踪集合。手动创建时`Product`，它无法跟踪对集合的更改。

# c++ - 我的 c++ 应用程序没有正确地在文件上写入数据

> ID：14334864
> 
> 赞同：0
> 
> 时间：2013-01-15T09:43:50.840
> 
> 标签：c++, visual-c++, file-io, unicode, mfc

我正在开发一个 C++ MFC 应用程序（使用 Visual Studio 2010）

我已经编写了用于在文件中存储数据的代码（代码在按钮单击事件中）

```
wfstream myfile;
myfile.open("ttt.txt");
if(!myfile)
    MessageBox(L"Problem");
else
{
    myfile <<"arash";
    myfile << ";program";
    myfile << ";test";
    myfile << ";a";
    MessageBox(L"OK");
myfile.close();

} 
```

但输出文件是：

```
arash;program;test;aحححححححححح 
```

而且我不知道`حححححححححح`是从哪里来的？！！！

我也试过

```
myfile << _T("arash");
myfile << _T(";program");
myfile << _T(";test");
myfile << _T(";a"); 
```

但它什么都没有改变

我能做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:45:46.863

您必须为文件输出提供宽字符字符串，因为它是一个宽字符文件：

```
myfile << L"arash";
myfile << L";program";
myfile << L";test";
myfile << L";a"; 
```

宏不起作用的原因`_T`可能是您没有`_UNICODE`定义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:50:35.637

除了使用 提供宽字符文字（`L"something"`因为这是一个宽字符流，您必须这样做）之外，文件可能已经包含来自先前操作的垃圾数据。

听起来您想在写入文件之前截断文件（删除所有现有数据）。你可以这样做

```
myfile.open("ttt.txt", ios_base::in | ios_base::out | ios_base::trunc); 
```

# tridion - 当我们单击 SDL Tridion 按钮时，新用户界面站点编辑 2011 SP1 在 Internet Explorer 中不起作用

> ID：14334865
> 
> 赞同：1
> 
> 时间：2013-01-15T09:43:52.433
> 
> 标签：tridion, tridion-2011

当我单击 SDL Tridion 按钮时，它会重定向到 tcm，但会显示消息页面未找到！无法进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:15:36.723

检查您是否在页面模板的“启用页面内联编辑”模板构建块中指定了正确的 URL。

如果您不确定它是否正确，请尝试在浏览器中打开它——这应该会显示工具栏和一个白页，上面写着“找不到页面！无法编辑”。

URL 通常是`http://yourserver/WebUI/Editors/SiteEdit/`.

# android - 按钮未显示在简单的 android 应用程序中

> ID：14334869
> 
> 赞同：0
> 
> 时间：2013-01-15T09:43:58.600
> 
> 标签：android, android-layout

我正在创建一个简单的 Android 应用程序来在静音和正常配置文件设置之间切换。我正在学习 android 开发，这个程序来自 Android Application Development for Dummies。这是`activity_main.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    >

    <ImageView 
        android:id ="@+id/phone_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:src="@drawable/phone_on"
        />    

    <Button 
        android:id="@+id/toggleButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="@string/toggle_silent_mode"
        />

</LinearLayout> 
```

这是代码`MainActivity.java`： package com.example.silentmodetoggle;

```
import android.graphics.drawable.Drawable;
import android.media.AudioManager;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class MainActivity extends Activity 
{
    private AudioManager mAudioManager;
    private boolean mPhoneIsSilent;

    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mAudioManager = (AudioManager)getSystemService(AUDIO_SERVICE);      

        checkIfPhoneIsSilent();
        setButtonClickListener();       
    }

    private void checkIfPhoneIsSilent() 
    {
        int ringerMode = mAudioManager.getRingerMode();
        if (ringerMode == AudioManager.RINGER_MODE_SILENT)
            mPhoneIsSilent = true;
        else
            mPhoneIsSilent = false;
    }

    private void setButtonClickListener() 
    {
        Button toggleButton = (Button)findViewById(R.id.toggleButton);
        toggleButton.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View arg0) 
            {
                if (mPhoneIsSilent)
                {
                  mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                    mPhoneIsSilent = false;
                }
                else
                {
                        mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                    mPhoneIsSilent = true;
                }

                toggleUi();             
            }   
        } );    
    }

    private void toggleUi()
    {
        ImageView imageview = (ImageView)findViewById(R.id.phone_icon);
        Drawable newPhoneImage;

        if (mPhoneIsSilent)
            newPhoneImage = getResources().getDrawable(R.drawable.phone_silent);
        else
            newPhoneImage = getResources().getDrawable(R.drawable.phone_on);

        imageview.setImageDrawable(newPhoneImage);  
    }

    protected void onResume()
    {
        super.onResume();
        checkIfPhoneIsSilent();
        toggleUi();
    }

    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

问题是`togglebutton`我运行应用程序时不可见。另外，如果我将配置文件更改为静音然后正常，则应用程序中仅显示图像（属于

> mPhoneIsSilent = 假。

谁能解释缺少什么？

# java - 如何在 php 中引用其他对象？

> ID：14334870
> 
> 赞同：0
> 
> 时间：2013-01-15T09:43:59.593
> 
> 标签：java, php

我对 PHP 很陌生，我来自 Java。我在Java中有一个这样的类：

```
class A {
}

class B{
} 
```

在同一个包中。在类内部`A`，我定义了一个类型的数据类型，`B`例如：

```
 B bType; 
```

我希望在 php 中具有相同的行为。有可能这样做吗？

有没有办法在 php 中“打包”我的类？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:15:27.093

PHP 不支持静态类型，但您可以使用类型提示在方法中定义数据类型。例如...

```
<?php

class A
{
    public function test(B $b) // Must be a method within B or a new exception will be thrown.
    {
        echo 1 + $b->test(); // adds one plus the return value of $b->test() from the B class.
    }
}

class B
{
    public function test() 
    {
        return 1;
    }
}

    class C
    {
         public function test()
         {
              $b = new B; // initializes the B class.
              return $b->test(); // calls the test method within the B class.
         }
    }

$a = new A;
$a->test(new B); // returns 2 
```

您还可以`gettype($a)`用来检测某种数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:48:13.317

您可以使用命名空间（即*包装*）。如果你真的想*打包*，那么你应该看看[http://php.net/manual/en/book.phar.php](http://php.net/manual/en/book.phar.php)（但我想直到现在，没有人真正这样做）。

您可以强制函数中的类型，但不能强制变量。

```
function (Array $bla, YourClass $test) {
   /** ... **/
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:48:30.927

类内部`A`定义：

```
$BClass = new B(arguments for contructor);
$BClass = new B; //without contructor 
```

# image - 在电晕的系统文档目录中插入图像文件

> ID：14334872
> 
> 赞同：0
> 
> 时间：2013-01-15T09:44:10.017
> 
> 标签：image, coronasdk

我是电晕新手，我正在尝试从 iPhone 相机拍摄多张照片并尝试将这些照片插入到 . 中`system.douments.directory`。有人可以帮助我如何在此目录中插入具有唯一名称的新图像文件。如果我想自定义保存图像的位置怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:37:36.497

我可以通过使用以下代码片段来做到这一点

```
local dateTime = os.date("%c" )
display.save(imageCaptured,tostring(dateTime)..".jpg") 
```

dateTime 总是给我一个新名字，`imageCaptured`是我从相机 api 拍摄的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:25:29.037

在大多数情况下，你不能。

Corona 通常只能保存在应用程序沙箱中。

对于图像，您可以使用以下方法保存到库中：

[http://docs.coronalabs.com/api/library/display/capture.html](http://docs.coronalabs.com/api/library/display/capture.html)

# java - 在服务器上物理保存 URL 生成的 PDF

> ID：14334874
> 
> 赞同：-1
> 
> 时间：2013-01-15T09:44:13.863
> 
> 标签：java, pdf, pdf-generation

我有一个生成 PDF 的 URL Id .. 我想使用 java 将该 pdf 文件保存在我的服务器中。PDF 是动态生成的，因此它在服务器上不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:48:08.927

试试这个代码片段：

```
URL pdfUrl = new URL("http://www.website.com/pdf_location.pdf");
ReadableByteChannel rbc = Channels.newChannel(pdfUrl.openStream());
FileOutputStream fos = new FileOutputStream("file.pdf");
fos.getChannel().transferFrom(rbc, 0, 1 << 24); 
```

替换`http://www.website.com/pdf_location.pdf`为实际的 PDF URL。替换`file.pdf`为 PDF 文件的名称和路径。

# windows - Windows RT .NET 兼容性

> ID：14334875
> 
> 赞同：2
> 
> 时间：2013-01-15T09:44:16.773
> 
> 标签：windows, windows-8, windows-runtime, tablet, .net-framework-version

我只需要知道我是否需要相同的框架来开发适用于平板电脑 (Windows RT) 和 PC 的 Windows 8 应用程序，或者平板电脑仍然使用 .NET 紧凑框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T09:48:38.993

在 Windows RT（即 Windows 8 的平板电脑/ARM 版本）上运行的唯一应用程序类型是 Windows 应用商店应用程序。这些是在 WinRT API 之上运行的全屏应用程序。

您可以在这些设备上使用 .NET 4.5 的子集，并使用 XAML 来构建您的界面，就像在桌面上使用 WPF 一样。

您可以在 MSDN-.NET [for Windows Store 应用程序概述](http://msdn.microsoft.com/en-GB/library/windows/apps/br230302.aspx)上阅读更多信息。本文介绍了 .NET 的主要版本与您可用的 Windows RT 子集之间的许多更改。通常，`Windows.Runtime`将为某些不再存在的 .NET 方法提供替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:56:32.277

[http://www.infragistics.com/community/blogs/nick-landry/archive/2012/06/19/developing-apps-for-microsoft-surface-windows-8-windows-rt-and-windows-phone。 aspx](http://www.infragistics.com/community/blogs/nick-landry/archive/2012/06/19/developing-apps-for-microsoft-surface-windows-8-windows-rt-and-windows-phone.aspx)

这是所有相关信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T18:02:59.383

至于 .Net 兼容性，[适用于 Windows 应用商店应用程序的 .NET](http://msdn.microsoft.com/en-GB/library/windows/apps/br230302.aspx)链接指出，较轻版本的 .Net 框架（恰当地称为“适用于 Windows 应用商店应用程序的 .NET”）将在 Windows RT 中可用，因此可用的 API 也一样将是框架的完整桌面版本中可用的子集。例如。在 Windows RT 中，[Windows 窗体](http://msdn.microsoft.com/en-us/library/dd30h2yb%28v=vs.110%29.aspx)将不可用。

您还可以创建可**移植类库**项目来开发可从 Windows 应用商店应用程序使用的 .NET Framework 库。该项目必须包含 .NET for Windows Store 应用程序作为目标平台之一。当您想要构建可从适用于不同平台的应用程序（如 Windows Phone 应用程序、桌面应用程序和 Windows 应用商店应用程序）中使用的功能时，这很有用。

[开发中心 - Windows 应用商店应用程序](http://msdn.microsoft.com/en-in/windows/apps/br211386.aspx)是开始的最佳（和官方）位置。

# jquery - 使用 jquery，如何在 ajax 响应 HTML 内容中突出显示搜索词

> ID：14334883
> 
> 赞同：0
> 
> 时间：2013-01-15T09:44:39.190
> 
> 标签：jquery, highlighting

我看到很多用于在常规页面中查找搜索词的库和插件，但它们并不是为了处理突出显示 ajax 响应内容中的字符串而编写的。例如，我发现许多脚本调用主函数，例如：

```
`returnDataSearchTermHighlightified = highlight(searchString);` 
```

（^^^ 来自接受的答案：[突出显示搜索词（仅选择叶节点）](https://stackoverflow.com/questions/3241169/highlight-search-terms-select-only-leaf-nodes)）

...该`highlight()`函数缺少的第二个参数会自动填充页面的整个 HTML 正文。但在我的情况下，我不想突出显示父正文中的关键字，而是仅在 ajax 响应内容中（我在父正文中填充的 div），所以我不能这样做，例如：

```
returnDataSearchTermHighlightified = highlight(searchString); 
```

...如果我尝试这个：

```
...
var jqxhr = $.ajax(

        {
            type: 'POST',
            url: ajaxWorkerSourceUrl,
            data: form_data,
            timeout: 15000
        }
    )
    .success(function(returnData) {
        $("#ajaxSpinner").fadeOut('slow');
        searchString = 'example';
        returnDataSearchTermHighlightified = highlight(searchString, returnData); 
```

...然后页面似乎加载我的 ajax 响应没有错误，但响应内容是空的！谁能指点我解决这个问题？..甚至是设计用于处理jquery ajax响应内容中的关键字突出显示的库或插件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:59:33.830

似乎`function highlight(term, base)`需要`base`是 Element 或 jQuery 类型。

尝试

```
.success(function(returnData) {
        $("#ajaxSpinner").fadeOut('slow');
        var searchString = 'example',
            base = $(returnData);
        highlight(searchString, base);
        base.appendTo(document.body); //whatever you were going to do.. 
```

# python - pandas ols 中的最大依赖项数？

> ID：14334898
> 
> 赞同：1
> 
> 时间：2013-01-15T09:45:25.550
> 
> 标签：python, pandas, linear-regression

我在数据集上运行 pandas OLS。如果我在 x 值中使用少于 20 个时间序列运行它，一切正常是否有最大的依赖 pandas.ols 可以处理？这就是我正在做的事情，除了我有文件中的数据而不是使用 DataReader 获取它：

```
from pandas import Series, DataFrame, ols
from pandas.io.data import DataReader
from DataContainer import DataContainer
import random

window = 21
basic = DataReader("BHI", "yahoo")
print len(basic)
dependance = 15

sp100 = [
            "AAPL", "ABT", "ACN", "AEP", "ALL", "AMGN", "AMZN", "APC",
            "AXP", "BA", "BAC", "BAX", "BK", "BMY", "BRK.B", "CAT", "C", "CL",
            "CMCSA", "COF", "COP", "COST", "CPB", "CSCO", "CVS", "CVX", "DD", "DELL",
            "DIS", "DOW", "DVN", "EBAY", "EMC", "EXC", "F", "FCX", "FDX", "GD", "GE",
            "GILD", "GOOG", "GS", "HAL", "HD", "HNZ", "HON", "HPQ", "IBM", "INTC",
            "JNJ", "JPM_1", "KFT", "KO", "LLY", "LMT", "LOW", "MA", "MCD", "MDT", "MET",
            "MMM", "MO", "MON", "MRK", "MS", "MSFT", "NKE", "NOV", "NSC", "NWSA",
            "NYX", "ORCL", "OXY", "PEP", "PFE", "PG", "PM", "QCOM", "RF", "RTN",
            "SBUX", "SLB", "SLE", "SO", "SPG", "T", "TGT", "TWX", "TXN", "UNH", "UPS",
            "USB", "UTX", "VZ", "WAG", "WFC", "WMB", "WMT", "XOM"
        ]

keys = random.sample(sp100, dependance)

data = {key: DataReader(key, "yahoo") for key in keys}
vals = {key: DataFrame(data=Series(data[key], name=key), index=basic.index) for key in data}
model = ols(y=basic, x=vals, window=window) 
```

一旦相关性> = 20，就会发生错误，但从不发生相关性<20。vals 字典就在那里，因为我的本地数据结构为每个 DataFrame 赋予了相同的名称，这是 ols 不喜欢的，而且我没有找到更好的方法来重命名 DataFrame。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:18:36.563

好的，这似乎是 pandas 0.9.0 和/或 statsmodels 0.4.2 的错误/功能。升级到 pandas 0.10.0 和 statsmodels 0.5.0 现在一切正常。

# android - 简单挂载不起作用（Android 模拟器）

> ID：14334900
> 
> 赞同：1
> 
> 时间：2013-01-15T09:45:27.573
> 
> 标签：android, linux, shell

我需要在`/system`我正在使用的 Android 模拟器上重新挂载目录读写，我有 root 访问权限但仍然没有成功。我通过 adb 运行 shell，我尝试了以下组合：

```
mount -o rw,remount /system

mount -o remount,rw /system 
```

我迷路了，请帮助。

ps 我正在通过 ubuntu 运行模拟器，虽然我不认为这应该有所作为

# jquery - Jquery $post 请求在 Django 中不起作用

> ID：14334901
> 
> 赞同：2
> 
> 时间：2013-01-15T09:45:35.433
> 
> 标签：jquery, django, post, get

我正在尝试将来自 javascript 的 $post 请求用于我的 django 模板，但是我缺少一些东西，因为它不起作用。

我将向您展示我的代码：

这是模板：

```
//TEMPLATE
//This code will send a string to django "views.py" file,
//then it will show a pop up message from the data retreived from "views.py"

function test_post(){ 
   $.post("/xhr_test", 
      {name: "Monty", food: "Spam", csrftoken : "{{ csrf_token }}" },

      function(data) {
          alert(data)
      ;}); 
}; 
```

这是views.py：

```
// VIEWS.PY
//Depending on the type of request it will send a message or another.

def xhr_test(request):
    if request.is_ajax():
        if request.method == 'GET':
            message = "This is an XHR GET request"
        elif request.method == 'POST':
            message = "This is an XHR POST request"
            # Here we can access the POST data
            print request.POST
    else:
        message = "No XHR"
    return HttpResponse(message) 
```

此代码未按应有的方式显示“这是一个 XHR POST 请求”消息。但是，当使用 $get 请求时，它确实显示“这是一个 XHR GET 请求”消息。

类似的疑问是this [thread](https://stackoverflow.com/questions/9085068/django-jquery-get-to-post)的答案。即使我使用那里提供的答案，代码也不起作用。

我猜答案一定与“{{ csrf_token }}”有关，但不确定如何......

任何类型的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:56:20.233

csrf 令牌的正确发布键是`csrfmiddlewaretoken`如果您遵循默认的使用方式`django.middleware.csrf.CsrfViewMiddleware`。

但是，您应该查看 CSRF[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)中的 AJAX 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:59:11.263

如果这是由于 csrf 令牌（您可以使用 firebug 在浏览器中检查它），然后在您的 views.py 中使用它

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def xhr_test(request):
   ........... 
```

# ios - ios pushViewController 来自 imagePickerController：didFinishPickingMediaWithInfo

> ID：14334906
> 
> 赞同：2
> 
> 时间：2013-01-15T09:45:40.963
> 
> 标签：ios, uinavigationcontroller

在我的应用程序中，我用相机拍照后，我想导航到另一个视图控制器

> didFinishPickingMediaWithInfo

现在，我正在dismissViewControllerAnimated 函数的完成块中执行此操作，但我觉得这不是最优雅的方式。你能告诉我如何才能做得更好吗？这是确切的代码

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = info[UIImagePickerControllerMediaType];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info[UIImagePickerControllerOriginalImage] scaledCopyOfSize:CGSizeMake(175.0f, 175.0f)];

        [self dismissViewControllerAnimated:YES completion:^(void){
            setVC = [[SetVCr alloc]init];

            [[self navigationController]pushViewController:seVC animated:YES];
        }];   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:15:56.467

您可以直接从选择器推送新的视图控制器

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
        NSString *mediaType = info[UIImagePickerControllerMediaType];

        if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
            UIImage *image = [info[UIImagePickerControllerOriginalImage]  scaledCopyOfSize:CGSizeMake(175.0f, 175.0f)];
            setVC = [[SetVCr alloc]init];
           [picker pushViewController:seVC animated:YES];//you can push new view controller directly from the picker
        }   
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T17:46:38.040

I suggest setting your completion block to nil and on the next line call the 'performSegueWithIdentifier' method as written below:

```
[self performSegueWithIdentifier:@"segueToNewcontroller" sender:self]; 
```

# javascript - Sprite 未显示 renderToTexture Map / rendertarget map

> ID：14334909
> 
> 赞同：1
> 
> 时间：2013-01-15T09:45:50.727
> 
> 标签：javascript, three.js, webgl

我正在使用three.js，我设置了第二个场景和相机并添加了一个圆柱体。现在我设置了一个渲染目标，我想在一个精灵（HUD-Sprite 可以这么说）上显示这个渲染场景，但是精灵没有显示出来。我在原始场景中添加了一个平面，它完美地显示了渲染目标。

我已经检查过的内容：

1）当使用 rtTexture 作为 MeshLambertMaterial 的贴图时，它工作得非常好

*2) 当使用ImageUtils*为 sprite 加载图像并将其用作 SpriteMaterial 的贴图时，它工作得很好，并且样条线显示在它应该在的位置！

我有一种我忽略了一些东西的感觉。如果有人可以帮助我会很酷。

好的，伙计们，我创建了一个 jsFiddle，也许这会有所帮助！

[我的 RenderTarget Sprite 问题的小提琴](http://jsfiddle.net/Pk85y/38/)

如您所见，rendertarget 正确显示在平面上，并且其中有一个带有屏幕空间坐标的精灵，但它不显示 renderTarget。

```
rttMaterial = new THREE.SpriteMaterial( { color: 0xFF0000, map: rtTexture, 
                                         alignment: THREE.SpriteAlignment.topLeft,
                                         useScreenCoordinates: true}  ); 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T21:43:28.003

您必须在后台`WebGLRenderer`执行此操作，因为它不受支持。

```
sprite.material.map.__webglTexture = rtTexture.__webglTexture; 
```

小提琴：http: [//jsfiddle.net/Pk85y/47/](http://jsfiddle.net/Pk85y/47/)

三.js r.61

# javascript - 在纯javascript中转换jquery

> ID：14334911
> 
> 赞同：1
> 
> 时间：2013-01-15T09:45:54.237
> 
> 标签：javascript, jquery

你怎么能把它从 jquery 库转换成纯 javascript？

```
function appendText(){
    var text = $("#text").val();

    if ( $("#text").val() ){
    var textArea = "<div class='divex'> <li style='list-style-type:none;' id='t"+counter+"'>"+text+"</li><button id='b"+
    counter+"'name='t"+counter+"' >edit</button></div>";    
    $("#text").val();
    $("#addedText").after(textArea);
    $("#t"+counter).clear;    
    $("#t"+counter).attr('readonly','readonly');
    $("#b"+counter).bind('click',makeAreaEditable);
    $("#text").val('');
    $('.divex').sortable();                                                 
    counter++;
    }
    else{
    }   
}; 
```

一开始我尝试了这样的事情：

```
var counter=0;
function appendText(){
    var text = document.getElementById('text');

    if ( document.getElementById('text').value ){
    var textArea = "<div class='divex'> <li style='list-style-type:none;'id='t"+counter+"'>"+text+"</li><button id='b"+
    counter+"'name='t"+counter+"' >edit</button> </div>";

    var texty = document.getElementById('addedText').appendChild(textArea); 
```

但我有一些问题。

> 我想我没有正确地将文本归于列表。这是我到目前为止所得到的：

```
 var counter=0;
    function appendText(){

        var text = document.getElementById('text').value;

        if ( document.getElementById('text').value ){   
        var div = document.createElement('div');
        div.class = 'divex';
        var li = document.createElement('li');

        div.appendChild(li);
        document.createTextNode(text);

        var bigdiv = document.getElementById('addedText');
        bigdiv.appendChild(text);

        counter++;
        }
        else{
        }   
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:56:15.817

`.appendChild()`需要一个 DOM 元素，而不是`textarea`变量中的 HTML 字符串。

您必须先使用`document.createElement`，例如：

```
var div = document.createElement('div');
div.class = 'divex';
var li = document.createElement('li');
div.appendChild(li);
// etc. 
```

然后用于在-element`document.createTextNode()`内创建文本。`li`等等..

# scripting - 在 ClearCase 中查找指向版本的合并箭头

> ID：14334919
> 
> 赞同：4
> 
> 时间：2013-01-15T09:46:29.990
> 
> 标签：scripting, merge, clearcase

我想在脚本中找到所有指向某个版本的合并箭头。当我使用以下命令描述元素的版本时：

```
ct describe filename@@/main/some_branch/3 
```

我得到以下结果：

```
Hyperlinks:
  Merge <- filename@@/main/other_branch/2 
```

我只想`ct describe`输出要在我的脚本中使用的相关信息，即。合并箭头来自的版本。在我的情况下，输出应该看起来像这样：

```
filename@@/main/other_branch/2 
```

`-fmt`我在手册页中没有找到任何相关参数。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:09:02.013

[`fmt_ccase`手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)中的唯一选项是

```
%[hlink:filter]p 
```

> 显示超链接源和目标，箭头从源指向目标。可选的 H 参数仅列出超链接名称。
> 您可以选择指定一个过滤器字符串，前面有一个冒号。此过滤器（如果存在）将输出限制为与过滤器字符串匹配的名称。匹配字符串时考虑大小写。

如果这不起作用，您必须使用`grep`/`awk`命令才能从`cleartool describe`输出中提取这些版本。

限制了`cleartool descr -ahlink`一点输出。

```
–ahlink 
```

> 该列表包括超链接到 pname 的对象的路径名，用 →（列出的对象是 to-对象）或 ←（列出的对象是 from-object）注释。
> 
> 例如：

```
-> M:\gamma\vob1\proj\include\db.c@@\main\52 <- M:\gamma\vob1\proj\bin\vega@@\main\5 
```

* * *

[除了完整的脚本选项，您还可以查看R&D Reporter](http://www.gomidjets.com/rnd-reporter.php)等外部第三方工具，它们可以可视化*和导出*这些相同的超链接。
然而：

*   这是一个商业工具
*   根据导出输出和您想要的内容，您最终可能只解析另一个输出以提取您需要的内容。

有关该工具的更多信息，请联系[Tamir Gefen](https://stackoverflow.com/users/138479/tamir-gefen)。

# google-app-engine - 在 mgwt 中未触发的点击事件

> ID：14334920
> 
> 赞同：1
> 
> 时间：2013-01-15T09:46:33.680
> 
> 标签：google-app-engine, gwt, mgwt

我刚刚开始学习[mgwt](http://code.google.com/p/mgwt/)。创建 a`Button`并添加 a后`TapHandler`，不会触发点击事件。我不知道代码中有什么问题。我已将其部署在 GAE 上并在 Android 设备上访问该站点。下面是代码`onModuleLoad()`

```
import com.citrix.demo.client.css.AppBundle;
import com.google.gwt.activity.shared.ActivityMapper;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.core.client.GWT.UncaughtExceptionHandler;
import com.google.gwt.dom.client.StyleInjector;
import com.google.gwt.place.shared.PlaceHistoryHandler;
import com.google.gwt.user.client.Timer;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.SimplePanel;
import com.googlecode.mgwt.dom.client.event.tap.TapEvent;
import com.googlecode.mgwt.dom.client.event.tap.TapHandler;
import com.googlecode.mgwt.mvp.client.AnimatableDisplay;
import com.googlecode.mgwt.mvp.client.AnimatingActivityManager;
import com.googlecode.mgwt.mvp.client.Animation;
import com.googlecode.mgwt.mvp.client.AnimationMapper;
import com.googlecode.mgwt.ui.client.MGWT;
import com.googlecode.mgwt.ui.client.MGWTSettings;
import com.googlecode.mgwt.ui.client.MGWTStyle;
import com.googlecode.mgwt.ui.client.animation.AnimationHelper;
import com.googlecode.mgwt.ui.client.dialog.TabletPortraitOverlay;
import com.googlecode.mgwt.ui.client.layout.MasterRegionHandler;
import com.googlecode.mgwt.ui.client.layout.OrientationRegionHandler;
import com.googlecode.mgwt.ui.client.widget.Button;
import com.googlecode.mgwt.ui.client.widget.LayoutPanel;

/**
 * @author Daniel Kurka
 * 
 */
public class MgwtAppEntryPoint implements EntryPoint {
    private static LayoutPanel layout = new LayoutPanel();

    private void start() {

        //set viewport and other settings for mobile
        MGWT.applySettings(MGWTSettings.getAppSetting());
        final ClientFactory clientFactory = new ClientFactoryImpl();

        // Start PlaceHistoryHandler with our PlaceHistoryMapper
        AppPlaceHistoryMapper historyMapper = GWT.create(AppPlaceHistoryMapper.class);
        final PlaceHistoryHandler historyHandler = new PlaceHistoryHandler(historyMapper);

        historyHandler.register(clientFactory.getPlaceController(), clientFactory.getEventBus(), new com.citrix.demo.client.activities.HomePlace());

        if ((MGWT.getOsDetection().isTablet())) {
            // very nasty workaround because GWT does not correctly support
            // @media
            StyleInjector.inject(AppBundle.INSTANCE.css().getText());

            createTabletDisplay(clientFactory);
        } else {
            createPhoneDisplay(clientFactory);

        }
        historyHandler.handleCurrentHistory();

    }

    private void createPhoneDisplay(ClientFactory clientFactory) {

        AnimatableDisplay display = GWT.create(AnimatableDisplay.class);
        PhoneActivityMapper appActivityMapper = new PhoneActivityMapper(clientFactory);
        PhoneAnimationMapper appAnimationMapper = new PhoneAnimationMapper();
        AnimatingActivityManager activityManager = new AnimatingActivityManager(appActivityMapper, appAnimationMapper, clientFactory.getEventBus());
        activityManager.setDisplay(display);
        RootPanel.get().add(display);
    }

    private void createTabletDisplay(ClientFactory clientFactory) {

        SimplePanel navContainer = new SimplePanel();
        navContainer.getElement().setId("nav");
        navContainer.getElement().addClassName("landscapeonly");
        AnimatableDisplay navDisplay = GWT.create(AnimatableDisplay.class);
        final TabletPortraitOverlay tabletPortraitOverlay = new TabletPortraitOverlay();
        new OrientationRegionHandler(navContainer, tabletPortraitOverlay, navDisplay);
        new MasterRegionHandler(clientFactory.getEventBus(), "nav", tabletPortraitOverlay);
        ActivityMapper navActivityMapper = new TabletNavActivityMapper(clientFactory);
        AnimationMapper navAnimationMapper = new TabletNavAnimationMapper();
        AnimatingActivityManager navActivityManager = new AnimatingActivityManager(navActivityMapper, navAnimationMapper, clientFactory.getEventBus());
        navActivityManager.setDisplay(navDisplay);
        RootPanel.get().add(navContainer);

        SimplePanel mainContainer = new SimplePanel();
        mainContainer.getElement().setId("main");
        AnimatableDisplay mainDisplay = GWT.create(AnimatableDisplay.class);
        TabletMainActivityMapper tabletMainActivityMapper = new TabletMainActivityMapper(clientFactory);
        AnimationMapper tabletMainAnimationMapper = new TabletMainAnimationMapper();
        AnimatingActivityManager mainActivityManager = new AnimatingActivityManager(tabletMainActivityMapper, tabletMainAnimationMapper, clientFactory.getEventBus());
        mainActivityManager.setDisplay(mainDisplay);
        mainContainer.setWidget(mainDisplay);
        RootPanel.get().add(mainContainer);

    }

    @Override
    public void onModuleLoad() {

        GWT.setUncaughtExceptionHandler(new UncaughtExceptionHandler() {
            @Override
            public void onUncaughtException(Throwable e) {
                Window.alert("uncaught: " + e.getMessage());
                e.printStackTrace();
            }
        });

        new Timer() {
            @Override
            public void run() {
                start();
            }
        }.schedule(1);

        //set viewport and other settings for mobile
        MGWT.applySettings(MGWTSettings.getAppSetting());
        MGWTStyle.getTheme().getMGWTClientBundle().getMainCss().ensureInjected();
        Label label = new Label("Welcome");
        label.setAutoHorizontalAlignment(Label.ALIGN_CENTER);
        Button button = new Button();
        button.setRound(true);
        button.setText("Click");
        button.addTapHandler(new TapHandler() {
            @Override
            public void onTap(TapEvent event) {
                Window.alert("Hola !");             
            }
        });

        layout.add(label);
        layout.add(button);
        //build animation helper and attach it
        AnimationHelper animationHelper = new AnimationHelper();
//      RootPanel.get().add(layout);
        RootPanel.get().add(animationHelper);
        animationHelper.goTo(layout, Animation.POP);
    }
} 
```

有人可以帮我解决这个问题吗？谢谢..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:51:17.310

您正在向一个区域添加多个 AnimatableDisplay。这些会重叠。

我猜您只是在 mgwt 展示中添加了几行代码，而没有删除展示代码。要解决此问题，您可以从计时器中删除对 start() 的调用。

# php - Android 中的错误：使用 PHP 的 GCM

> ID：14334921
> 
> 赞同：2
> 
> 时间：2013-01-15T09:46:42.100
> 
> 标签：php, android, google-cloud-messaging

我在 PHP 中使用以下代码将 GCM 消息发送到 Android：

```
<?php
$apiKey = "xxxxx"; //my api key

$registrationIDs = array("APA91bGGN7o7AwVNnv35lwP5Jw8OTJQL331XcxPfEIu4xt-ZKLe6R0aSSbAve99uKSDXhzE9L2PVLihpqFt0DEawhymUs9h5ICbTMweMAEJypg6ZLFqmf6SOGlyULQzudw9MM1DjbPaaKbo--wxWoHGkjyec2H_63e7mesYjaRf4_rgxBe655M0");

// Message to be sent
$message = "Message Text";

// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),
                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'
                );

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

echo $result; 
```

它工作正常。在这里，我手动添加了我的设备令牌（硬编码）。

但是当我尝试从数据库中获取设备令牌时，我得到了下面提到的错误。

代码：

```
<?php
include 'config.php';
if($_REQUEST['msg']!='')
{
    echo $message = $_REQUEST['msg']; 
// Replace with real BROWSER API key from Google APIs
$apiKey ="xxxxxx"; //my api key    
// Replace with real client registration IDs 
$sql = mysql_query("SELECT `device_token` FROM `users`");
$result = mysql_fetch_array($sql);

$registrationIDs = $result;

// Message to be sent
$message = $_REQUEST['msg'];

// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),
                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'
                );

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

echo $result;

} 
```

我也试过用`json_encode($registration_ids)`没用。

```
"registration_ids" field is not a JSON array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:52:38.163

我终于找到了解决办法。我使用 for 循环将所有结果放入数组中，并使用将数组转换为 JSON 数组`json_encode();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T11:14:18.180

我遇到了同样的错误，因为我的数组*索引*没有正确排序，我使用 PHP 的*sort()*函数修复了它。

**排序前**

```
$registration_ids = Array
(
    [1] => "xxx"
    [6] => "xxx"
    [8] => "xxx"
) 
```

**种类**

```
sort($registration_ids); 
```

**排序后**

```
$registration_ids = Array
(
    [0] => "xxx"
    [1] => "xxx"
    [2] => "xxx"
) 
```

**传递给 PHP 的 cURL**

```
$fields = array(
    'registration_ids' => $ids,
    'data' => array('message' => $data)
);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields)); 
```

# python - Python 命名空间的意外行为（2.7 和 3）

> ID：14334922
> 
> 赞同：1
> 
> 时间：2013-01-15T09:46:42.753
> 
> 标签：python

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

我只是想检查一下我期望它的工作方式是否正确。这是我正在编写的课程的简化版本：

```
class Foo(object):
     def __init__(self):
         pass
     def bar(self, test1=[], test2=[]):
         if test2:
             test1.append(1)
         print test1 
```

现在，对我来说，test1 和 test2 - 除非设置 - 在调用函数 bar 时应该始终设置为空列表。这意味着当 test1 被打印时，列表中应该只有一个项目（假设你只给出一个项目作为参数）。然而，这种情况并非如此：

```
>>> i = Foo()
>>> i.bar()
[]
>>> i.bar(test2=[1])
[1]
>>> i.bar()
[1, 1]
>>> i.bar(test2=[1])
[1, 1, 1] 
```

在这种情况下，您会期望使用整数得到类似的结果：

```
class Foo(object):
     def __init__(self):
         pass
     def bar(self, test1=0, test2=0):
         if test2:
             test1 += 1
         print test1 
```

但在这里，test1 始终设置为 0：

```
>>> i = Foo()
>>> i.bar()
0
>>> i.bar(test2=1)
1
>>> i.bar(test2=1)
1
>>> i.bar(test2=1)
1 
```

似乎列表在函数或类的命名空间中是持久的，但整数不是。

这可能是我的一个误解，所以想澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:51:17.667

函数的默认参数是*在声明函数时设置的*，而不是每次调用函数时设置的。因此，在声明函数时创建的列表只创建一次，并且每隔一次调用该函数时都会被引用。另请参阅[此问题](https://stackoverflow.com/q/1132941/1907098)。

因为列表是可变的，所以当你改变它们时，任何引用它的东西也会改变。但是整数是*不可变*的（它们不能更改），因此当您将变量重新分配给另一个整数时，只有该变量会更改，因为它引用了*不同*的对象。

# java - 禁用 JOptionPane.dialog 上的确定按钮，直到用户输入

> ID：14334931
> 
> 赞同：12
> 
> 时间：2013-01-15T09:47:13.927
> 
> 标签：java, swing, joptionpane

我需要用户输入一个名称，并且我想禁用确定按钮，直到给出一些输入。我怎样才能禁用它...？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-15T09:56:02.043

`JOptionPane`允许您提供一个组件作为消息窗格以及可以在其上显示的控件/选项。

如果您将正确的侦听器添加到消息组件，那么您应该能够影响用作选项的控件。

看看[JOptionPane.showOptionDialog(Component parentComponent, Object message, String title, int optionType, int messageType, Icon icon, Object[] options, Object initialValue)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showOptionDialog(java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int,%20int,%20javax.swing.Icon,%20java.lang.Object[],%20java.lang.Object))

**更新**

例如...

![在此处输入图像描述](../Images/8f26a7729dbec2f0341b088bd62d20a9.png)

```
public class TestOptionPane05 {

    public static void main(String[] args) {
        new TestOptionPane05();
    }

    protected JOptionPane getOptionPane(JComponent parent) {
        JOptionPane pane = null;
        if (!(parent instanceof JOptionPane)) {
            pane = getOptionPane((JComponent)parent.getParent());
        } else {
            pane = (JOptionPane) parent;
        }
        return pane;
    }

    public TestOptionPane05() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JButton okay = new JButton("Ok");
                okay.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        JOptionPane pane = getOptionPane((JComponent)e.getSource());
                        pane.setValue(okay);
                    }
                });
                okay.setEnabled(false);
                final JButton cancel = new JButton("Cancel");
                cancel.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        JOptionPane pane = getOptionPane((JComponent)e.getSource());
                        pane.setValue(cancel);
                    }
                });

                final JTextField field = new JTextField();
                field.getDocument().addDocumentListener(new DocumentListener() {
                    protected void update() {
                        okay.setEnabled(field.getText().length() > 0);
                    }

                    @Override
                    public void insertUpdate(DocumentEvent e) {
                        update();
                    }

                    @Override
                    public void removeUpdate(DocumentEvent e) {
                        update();
                    }

                    @Override
                    public void changedUpdate(DocumentEvent e) {
                        update();
                    }
                });

                JOptionPane.showOptionDialog(
                                null, 
                                field, 
                                "Get", 
                                JOptionPane.YES_NO_OPTION, 
                                JOptionPane.QUESTION_MESSAGE, 
                                null, 
                                new Object[]{okay, cancel}, 
                                okay);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:50:21.607

据我所知，如果不覆盖，这是不可能的`JOptionPane`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:15:25.013

> 我需要用户输入一个名称，并且我想禁用确定按钮，直到给出一些输入。

错误的方法。

即定义'什么是名字'=可以是任何东西。

因此，实际上，您要做的不是接受空字符串，

并且您在按下“确定”按钮后进行错误检查。

如果为空 - 弹出错误消息/重复输入请求/确认取消/您想做的任何事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:49:50.593

尝试搜索用于Java 的**swinglabs**或**jGoodies**库。他们为您需要的东西内置了类型。

# javascript - jquery动画完成

> ID：14334933
> 
> 赞同：14
> 
> 时间：2013-01-15T09:47:29.737
> 
> 标签：javascript, jquery, animation, jquery-animate

```
<div class="factuuradres"></br><h3></h3></div>
<div class="factuuradresbutton">Meer Informatie</div>           

<script type="text/javascript">
    $(".factuuradresbutton").toggle(function(){
        $(".factuuradres").animate({
            height: "310px"
        }, 500 );
        complete: function() {
            $(".factuuradresbutton").html("Toch geen factuuradres")
            $(".factuuradres").html('<h2>Factuuradres</h2><div class="title_textbox3"><h3>Postcode:</h3></div><div class="textbox3"><input type="text" class="postcode" name="Postcode" value=""/></div><div class="title_textbox4"><h3>Huisnummer:</h3></div><div class="textbox4"><input type="text" class="huisnummer" name="Huisnummer" value=""/></div><div class="title_textbox"><h3>Straat:</h3></div><div class="textbox"><input type="text" class="field" name="Straat" value=""/></div><div class="title_textbox"><h3>Plaats:</h3></div><div class="textbox"><input type="text" class="field" name="Plaats" value=""/></div>')
        }
    },

    function(){
        $(".factuuradres").animate({
            height: "160px"
        }, 500 );
        $(".factuuradresbutton").html("Ander factuuradres?")
        $(".factuuradres").html("Factuuradres")
    });
</script> 
```

我想知道为什么`complete: function()`不起作用，谁能给我建议？

这也是工作脚本，但是一旦您单击按钮，它就会中断。一两秒钟后，它按预期工作。

```
<script type="text/javascript">
    $(".factuuradresbutton").toggle(function(){
    $(".factuuradres").animate({
        height: "610px"
    }, 500 );
    $(".factuuradresbutton").html("Toch geen factuuradres")
    $(".factuuradres").html('<h2>Factuuradres</h2><div class="title_textbox3"><h3>Postcode:</h3></div><div class="textbox3"><input type="text" class="postcode" name="Postcode" value=""/></div><div class="title_textbox4"><h3>Huisnummer:</h3></div><div class="textbox4"><input type="text" class="huisnummer" name="Huisnummer" value=""/></div><div class="title_textbox"><h3>Straat:</h3></div><div class="textbox"><input type="text" class="field" name="Straat" value=""/></div><div class="title_textbox"><h3>Plaats:</h3></div><div class="textbox"><input type="text" class="field" name="Plaats" value=""/></div>')
    },
    function(){
    $(".factuuradres").animate({
        height: "160px"
    }, 500 );
    $(".factuuradresbutton").html("Ander factuuradres?")
    $(".factuuradres").html("Factuuradres")
    });
</script> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-15T09:58:44.480

刚刚看到你的评论并改变了我对此的回答：http: [//jsfiddle.net/t3ttW/1/](http://jsfiddle.net/t3ttW/1/)

```
$(".factuuradresbutton").toggle(function () {
      $(".factuuradres").animate({
        height: "610px"
      }, {
        duration: 500,
        complete: function () {
          $(".factuuradresbutton").html("Toch geen factuuradres")
          $(".factuuradres").html('<h2>Factuuradres</h2><div class="title_textbox3"><h3>Postcode:</h3></div><div class="textbox3"><input type="text" class="postcode" name="Postcode" value=""/></div><div class="title_textbox4"><h3>Huisnummer:</h3></div><div class="textbox4"><input type="text" class="huisnummer" name="Huisnummer" value=""/></div><div class="title_textbox"><h3>Straat:</h3></div><div class="textbox"><input type="text" class="field" name="Straat" value=""/></div><div class="title_textbox"><h3>Plaats:</h3></div><div class="textbox"><input type="text" class="field" name="Plaats" value=""/></div>');
        }
      });
    },

    function () {
      $(".factuuradres").animate({
        height: "160px"
      }, 500);
      $(".factuuradresbutton").html("Ander factuuradres?")
      $(".factuuradres").html("Factuuradres")
    }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T09:53:49.900

```
 $(".factuuradres").animate({
        height: "310px"
    }, 500, function() {
        $(".factuuradresbutton").html("Toch geen factuuradres")
        $(".factuuradres").html('<h2>Factuuradres</h2><div class="title_textbox3"><h3>Postcode:</h3></div><div class="textbox3"><input type="text" class="postcode" name="Postcode" value=""/></div><div class="title_textbox4"><h3>Huisnummer:</h3></div><div class="textbox4"><input type="text" class="huisnummer" name="Huisnummer" value=""/></div><div class="title_textbox"><h3>Straat:</h3></div><div class="textbox"><input type="text" class="field" name="Straat" value=""/></div><div class="title_textbox"><h3>Plaats:</h3></div><div class="textbox"><input type="text" class="field" name="Plaats" value=""/></div>')
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T09:55:15.740

动画完成时要调用的回调函数是 animate 函数的参数。目前代码没有将函数作为参数传递。

# angularjs - Testacular 不运行 e2e 测试

> ID：14334934
> 
> 赞同：0
> 
> 时间：2013-01-15T09:47:31.687
> 
> 标签：angularjs, karma-runner, angular-scenario

我再次在使用 testacular 运行 angularJS e2e 测试时遇到问题。这次的输出是

```
Chrome 23.0: Executed 0 of 13 (skipped 13) SUCCESS (0.117 secs / 0 secs)
info: Disconnecting all browsers 
```

没有运行测试，这是我的配置文件。

```
basePath = './';

files = [
    ANGULAR_SCENARIO,
    ANGULAR_SCENARIO_ADAPTER,
    'e2e/*.js'
];

autoWatch = false;

browsers = ['Chrome'];

singleRun = true;

proxies = {
    '/': 'http://localhost:8080/'
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:30:33.517

Ok guys, here is a solution for this problem. I posted this question in angular google groups and here is the link: [https://groups.google.com/forum/?fromgroups=#!topic/testacular/fumqhOAEH3s](https://groups.google.com/forum/?fromgroups=#!topic/testacular/fumqhOAEH3s) it was a bug and it is fixed by the author.

# jetty - 如何在嵌入式码头服务器中启用 eTag

> ID：14334936
> 
> 赞同：2
> 
> 时间：2013-01-15T09:47:36.837
> 
> 标签：jetty, embedded-jetty

嵌入式码头服务器是否支持 etags？我们应该有自定义过滤器实现来实现它，还是我们已经内置了支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:31:28.017

Jetty 的已发布版本不支持 ETag。

但是，[Jetty 的下一个版本将支持 ETag](https://bugs.eclipse.org/bugs/show_bug.cgi?id=393947)（即将到期）。

寻找***之后***的版本...

*   码头 7.6.8
*   码头 8.1.8
*   码头 9.0.0.M4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T01:43:45.993

我找到了这个自定义过滤器，现在将在一个项目中尝试它[http://candrews.integralblue.com/2009/02/http-caching-header-aware-servlet-filter/](http://candrews.integralblue.com/2009/02/http-caching-header-aware-servlet-filter/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T21:54:14.110

来自[https://www.eclipse.org/jetty/javadoc/9.4.12.v20180830/org/eclipse/jetty/servlet/DefaultServlet.html](https://www.eclipse.org/jetty/javadoc/9.4.12.v20180830/org/eclipse/jetty/servlet/DefaultServlet.html)：

支持以下 initParameters，这些可以在 servlet 本身上设置，也可以设置为 ServletContext initParameters，前缀为 org.eclipse.jetty.servlet.Default。

`etags` 如果为 True，则将处理弱 etag。

# ios - UISplitViewController：如何通过按钮事件而不是通过滑动手势在详细视图中呈现主视图

> ID：14334939
> 
> 赞同：1
> 
> 时间：2013-01-15T09:47:41.960
> 
> 标签：ios, uisplitviewcontroller

滑动手势很酷，可以纵向呈现主视图。但我想知道如何通过按钮事件而不是通过滑动手势来呈现表格。我不想呈现popover，我喜欢幻灯片动画。任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:44:11.927

为了将来参考，通过设置拆分视图控制器委托并实现这两种方法，您应该可以开始使用了。

```
- (void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)button
    {
        //remove button from navigation bar in detail navigation controller
        ((UINavigationController*)[svc.viewControllers objectAtIndex:1]).topViewController.navigationItem.leftBarButtonItem = nil;
    }

- (void)splitViewController: (UISplitViewController*)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem*)barButtonItem forPopoverController: (UIPopoverController*)pc{

        //add button to navigation bar in detail navigation controller
        barButtonItem.title = @"Navigation";
        ((UINavigationController*)[svc.viewControllers objectAtIndex:1]).topViewController.navigationItem.leftBarButtonItem = barButtonItem;

    } 
```

barButtonItem 的实例为您处理所有切换过程。

# cakephp - 如何在 cakephp 中使用 refere() 函数进行重定向？

> ID：14334949
> 
> 赞同：0
> 
> 时间：2013-01-15T09:48:38.753
> 
> 标签：cakephp

我想在重定向到登录的同一页面上重定向。Cake php 有函数 referer() 来使用它。大多数人建议将它与 AUTH 组件一起使用。但我没有使用 auth。所以请帮助我如何在没有身份验证组件的情况下使用referer()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T09:57:31.740

您是否尝试查看文档？ [http://book.cakephp.org/2.0/en/controllers.html#Controller::redirect](http://book.cakephp.org/2.0/en/controllers.html#Controller::redirect)

它在那里陈述了完全相同的事情：

```
If you need to redirect to the referer page you can use:
$this->redirect($this->referer()); 
```

Referer() 与 Auth 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:59:56.090

来自 CakePHP 文档。AuthComponent 将通过 $this->Auth->redirect() 处理重定向到您请求的页面。

```
// UsersController.php

public function login() {
  if ($this->request->is('post')) {
    if ($this->Auth->login()) {
      return $this->redirect($this->Auth->redirect());
    } else {
      $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
    }
  }
} 
```

# java - 快速排序（Java）中使用的不寻常的查找和while循环

> ID：14334951
> 
> 赞同：2
> 
> 时间：2013-01-15T09:48:40.553
> 
> 标签：java, algorithm, sorting, loops, quicksort

请看一下这个来自快速排序的代码片段和实现，它来自《[Data Structures and Problem Solving Using Java](http://catalogue.pearsoned.co.uk/catalog/academic/product/0,1144,0321546229,00.html) 》一书：

```
 int i, j;

    for(i = low, j = high -1;;){

        while(array[++i].compareTo(pivot) < 0)
            ;
        while(pivot.compareTo(array[--j]) < 0)
            ;
        if(i >= j)
            break;
        swapReferences(array, i, j);
    } 
```

我很难理解这是如何工作的。根据我的理解，for 循环只是声明了起点，并且不包含任何关于何时完成 for 循环的规则；这是由 if 语句处理的，对吗？此外，如果没有括号，我不清楚 while 循环。分号和没有缩进表明它们没有嵌套。但是循环中没有实际的代码。我是否正确地说每个while都是独立的，一个将较低的值与枢轴进行比较，一个比较较高的值，在满足每个while循环标准时进行交换。每次 for 循环继续执行该过程时， i 递增并且 j 递减，直到满足 if 语句的条件，此时它会从 for 循环中中断？它是否正确？

编辑：更新代码以准确反映书中的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T09:52:38.920

你的分析是正确的。循环使用和隐式完成它们的`while`工作。它可以重写为更清晰`++i``--j`

```
do i++; while (array[i] < pivot);
do j--; while (pivot < array[j]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:52:25.823

while 循环是空的 - 实际工作是在其谓词中的递增和递减运算符中完成的。

for 循环实际上也是一个无限循环，仅当 i >= j 时才由 break 语句退出。

它的语法有点奇怪——我不确定我是这样写的——可能是过早的优化......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:01:38.617

是的，您的评估是正确的。

省略边界条件和步骤指令并不少见。你甚至看到

```
for (;;) {
...
} 
```

很多时候，构建一个无限循环。另一方面，更严格的代码约定（NASA、关键任务、实时系统）明确禁止代码中的无限循环。

该`while`构造是合法的，但非常丑陋。如果我正在审查团队中某人的代码，我不会接受这种结构。一方面，我非常严格地要求在所有条件和循环块周围使用大括号，即使它们只有一行。

考虑这个语法上合法的结构并考虑它的作用

```
int i = 0;
while (i++ < 10)                                                                ;
{
    System.out.println(i);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T10:19:30.590

这里的for循环只是用于初始化。for循环中没有指定增量或任何规则。这意味着for循环将继续执行，直到它遇到abreak语句。

while(array[++i] - pivot < 0); 这意味着每一步 i 将递增 1 并检查条件。此 while 循环将持续到 (array[++i] - pivot ) 等于或大于 0。然后执行将转到下一个 while 循环 while(pivot - array[--j] < 0) 这个while循环将持续到(pivot - array[--j] ) 等于或大于0。然后它会检查if条件。如果满足，它将中断主循环。否则，函数 swapReferences 将被执行并且 for 循环将继续。

# c++ - 创建一个 N 维数组，其中 N 在运行时确定 (C++)

> ID：14334952
> 
> 赞同：3
> 
> 时间：2013-01-15T09:48:40.587
> 
> 标签：c++, multidimensional-array

我正在将 N-Dim 图像立方体编码为不同的图像格式。直到运行时我才知道图像的尺寸，而我用来从原始图像中读取的库需要一个 N-dim 数组目标缓冲区作为参数。

如何在 C++ 中声明这样的数组？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:43:05.333

简短的回答是您不能在 C++ 中声明这样的数组。数组的维度是类型的一部分（有一个杂项例外，有时对于数组声明，*其中一个*维度的值可能是未知的）。`extern`维数始终是类型的一部分，并且在编译时必须知道类型。

您可能可以做的是使用适当大小的“平面”数组。例如，如果您需要一个 3x3...x3 数组，那么您可以`3^n`在运行时计算，动态分配那么多`int`（可能使用 a`vector<int>`方便），并且您拥有与`int[3][3]...[3]`. 您可以通过`void*`.

我不确定在 C++ 中将平面数组别名为多维数组是否严格合法。但首先，您调用的函数实际上可能不会以这种方式为其别名，因为它在编译时也不知道维度。其次，它会在实践中工作（如果没有，你调用的函数要么被破坏，要么有一些狡猾的方法来处理这个问题，你应该找出并复制）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T09:53:26.520

在这种情况下，您不能使用数组。数组仅适用于那些在编译时大小和维度已知的数据。**尝试使用std::vector**数组代替

# matlab - 为什么保存到名为 temp 的文件夹会导致数据加载在 Matlab 的 for 循环中减慢？

> ID：14334953
> 
> 赞同：10
> 
> 时间：2013-01-15T09:48:42.657
> 
> 标签：matlab, file-io

重要更新

我刚刚发现在重新启动 Matlab 和计算机后，这个简化的代码也不再为我重现问题......我很抱歉占用你的时间来处理一个不起作用的脚本。但是，如果我在内部“for”循环中的任何文件夹（我尝试过）中保存任何内容，旧问题仍然存在于我的原始脚本中。出于我的目的，我已经解决了这个问题，除非我绝对需要它，否则根本不进行保存。`for`原始脚本在循环和使用`save`or方面具有以下结构`load`：

```
load() % .mat files, size 365x92x240
for day = 1:365
    load() % .mat files, size 8x92x240

    for type = 1:17
        load() % .mat files size 17x92x240
        load() % .mat files size 92x240

        for step 1:8
            %only calculations
        end
        save() % .mat files size 8x92x240

    end 
    save() % .mat files, size 8x92x240
end

% the load and saves outside the are in for loops too, but do not seem to affect the described behavior in the above script
load() % .mat files size 8x92x240
save() % .mat files size 2920x92x240
load() 
save() % .mat files size 365x92x240
load()
save() % .mat files size 12x92x240 
```

如果完全运行，脚本将节省大约。10 Gb，负载约。2Gb 数据。

整个脚本相当冗长，并且进行了大量的保存和加载。不幸的是，在我设法以简化版本重现问题之前，在这里分享所有内容是相当不切实际的。当我沮丧地发现，相同的代码有时会表现出不同的行为时，它立即变得比预期的更乏味，因为要找到一个始终如一地重现该行为的简化。一旦我确定产生问题的可管理代码，我会尽快回来。

* * *

以前的问题描述（注意。下面的代码不能确定重现所描述的问题。）：

我刚刚了解到，在 Matlab 中，如果不减慢下一轮循环中的数据加载速度，就不能在循环中将保存文件夹命名为**temp 。**`for`我的问题是为什么？

如果您有兴趣自己重现问题，请参阅下面的代码。要运行它，您还需要加载一个名为**anyData.mat**的 matfile和两个用于保存的文件夹，一个名为**temp**，另一个名为**temporary**。

```
clear all;clc;close all;profile off;
profile on

tT= zeros(1,endDay+1);
tTD= zeros(1,endDay+1);

for day = 0:2;
    tic
    T = importdata('anyData.mat')
    tT(day+1)=toc; %loading time in seconds

    tic
    TD = importdata('anyData.mat')
    tTD(day+1)=toc;

    for type = 0:1
        saveFile = ones(92,240);

        save('AnyFolder\temporary\saveFile.mat', 'saveFile') % leads to fast data loading 
        %save('AnyFolder\temp\saveFile.mat', 'saveFile') %leads to slow data loading

    end % end of type 

end% end of day

profile off
profile report

plot(tT) 
```

您将在绘图的 y 轴上看到，当您在稍后的`for`循环中保存到**temp**而不是**临时**时，数据加载需要更长的时间。有没有人知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:07:28.603

这里有两件事

1.  for 循环期间的存储是一项昂贵的操作，因为它通常会打开文件流并在继续之前将其关闭。你可能无法避免这种情况。
2.  第二件事是存储速度及其缓存速度。最有可能的程序使用临时文件夹来存放自己的临时文件，并有一个垃圾收集器或软件来处理这些文件以清理它们。如果您开始打开和关闭此文件夹的文件流，您必须发送请求以获得对该文件夹的独占写入访问权限。这再次增加了时间。

如果您正在执行图像处理操作并且您有多个图像，则由于其速度、缓存和 MATLAB 可用的当前内存，您可能会遇到写入硬盘驱动器的瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T20:30:51.663

我无法重现该问题，怀疑它是特定于系统和数据大小的。但是一些可以帮助您摆脱困境的一般性评论：

正如评论者和上述答案所指出的那样，双 for 循环中的文件 i/o 可能是非常寄生的，特别是在您只需要访问文件中的部分数据，而其他系统操作会延迟该过程的情况下，或者数据文件足够大，甚至需要虚拟内存（Windows）/交换空间（Linux）来加载它们。在后一种情况下，您可能会在打开文件时将文件从硬盘的一部分移动到另一部分！

我假设您正在加载/保存，因为您没有 c.10GB 的内存来将所有内容保存在内存中进行计算。实际问题没有描述，所以我不能确定，但​​认为您可能会发现`matfile`该类很有用...... [TMW 文档](http://uk.mathworks.com/help/matlab/ref/matfile.html)。这用于直接映射到 mat 文件/从 mat 文件映射。这个：

*   降低文件流打开和关闭 IOPS

*   允许任意大的可变大小（由磁盘大小控制，而不是内存）

*   允许您部分读取/写入（即只写入数组的某些元素而不加载整个文件）

*   如果您的 mat 文件太大而无法保存在内存中，请避免将其加载到非常麻烦的交换空间中。

希望这可以帮助。

汤姆

# python - 为 python 应用程序定义不同的路由

> ID：14334955
> 
> 赞同：1
> 
> 时间：2013-01-15T09:48:47.757
> 
> 标签：python, routes, flask

这是我的python代码

```
 import os
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello World!'
def Fun():
    return 'Having Fun!'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

在加载`www.example.com/`它时，它会转到`hello`函数并返回`Hello World!` How to point a url like `www.example.com/Fun`to another function`Fun`

***更新（工作代码）***

更新了代码但仍然无法正常工作

```
import os
from flask import Flask

app = Flask(__name__)

@app.route('/')

def hello():
    return 'Hello World --  jay!'

@app.route('/fun')
def fun():
    return 'have func!'

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:52:51.397

装饰器 @app.route 为您的控制器设置 url。所以这段代码应该可以工作：

```
@app.route('/fun')
def fun():
    return 'Having Fun!' 
```

# dojo - 以编程方式将粗体和字体添加到 dijit/form/select

> ID：14334959
> 
> 赞同：3
> 
> 时间：2013-01-15T09:49:16.720
> 
> 标签：dojo

嗨，如何以编程方式为 dijit/form/select 中的每个选项添加粗体和字体大小等样式？

```
ready(function()//This function won't run until the DOM has loaded and other modules that register have run
{
 parser.parse();
var select_Card = new Select
({options:
[
 {label:"Select Card", value:"", selected:true},
 {label:"Mk7ABC Card", value:"testdata1970_05", selected:false},
 {label:"Mk7CBC Card", value:"testdata1970_10", selected:true},
 {label:"Mk10DC Card", value:"testdata2060_03", selected:false},
 {label:"Mk6BC Card", value:"dbProdigy", selected:false},
 {label:"Mk6NBC Card", value:"dbProdigy_MK6N", selected:false},
], style:{width:'250px'}
}, "select_Card");

select_Card.startup();
    });
    }); 
```

请告知谢谢克莱门特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T15:46:38.233

为您的 json 中的标签设置样式。

```
require(["dojo/ready", "dijit/form/Select"], function(ready, Select){
ready(function(){ 
  var select_Card = new Select({
    options:[
     {label:"Select Card", value:"", selected:true},
     {label:"<b>Mk7ABC Card</b>", value:"testdata1970_05", selected:false},
     {label:"<span style='color:red;'>Mk7CBC Card</span>", 
        value:"testdata1970_10", selected:true},
     {label:"Mk10DC Card", value:"testdata2060_03", selected:false},
     {label:"Mk6BC Card", value:"dbProdigy", selected:false},
     {label:"Mk6NBC Card", value:"dbProdigy_MK6N", selected:false},
    ], style:{width:'250px'}
  }, "select_Card");
  select_Card.startup();
});
}); 
```

[http://jsfiddle.net/cswing/udJuv/](http://jsfiddle.net/cswing/udJuv/)

# extjs - 如何为文件上传字段提供默认值

> ID：14334961
> 
> 赞同：1
> 
> 时间：2013-01-15T09:49:22.360
> 
> 标签：extjs

团队，

我们面临一个问题，我们无法为文件上传字段定义默认值。基本上，我们希望在用户上传文件之前显示一个帮助文本，如“上传文件”。

```
xtype: 'textfield'
,inputType: 'file'
,fieldLabel: 'File Upload'
,value:'File Upload'
,autoCreate: { tag: 'input', type: 'text', size: '20', autocomplete: 'off', multiple: 'multiple' }
,name:'import_filename'
, id:'import_filename' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T03:32:36.700

我也遇到了这个问题并且 setRawValue() 有效。您可以在侦听器中渲染组件。

```
listeners : {
                render : function(comp){
                    comp.setRawValue(fileName);
                }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:19:10.847

我想你在谈论[`emptyText`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File-cfg-emptyText). 当字段中没有值时，此配置显示文本。

> **注意：**如果使用 inputType:'file'，则不支持 emptyText，应避免使用。

# php - 关于 PHP QUERY

> ID：14334962
> 
> 赞同：-5
> 
> 时间：2013-01-15T09:49:26.127
> 
> 标签：php

```
<?php

$cat_id = $globalClass->getRow("prod_category","`category`='".$get_cat['id']."'");

for($m = 0; $m<count($cat_id); $m++)

{

$product = $globalClass->getRow1("product","`id`='".$cat_id[$m]['prod_id']."'");
if(!empty($product[0]['id']))
{
for($k=0; $k<count($product); $k++)

{

?> 
```

`$product = $globalClass->getRow1("product","`如何在id中按名称升序使用 order`='".$cat_id[$m]['prod_id']."'");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:22:15.920

根据您的信息，我可以建议您如下：

```
$product = $globalClass->getRow1("product","id='".$cat_id[$m]['prod_id']."' order by name asc"); 
```

# java - NetBeans：更改 Java 项目的字符集会导致问题

> ID：14334963
> 
> 赞同：0
> 
> 时间：2013-01-15T09:49:29.667
> 
> 标签：java, database, character-encoding, connection

我想问是否有人和我有同样的问题：

**我从编码UTF-8**开始我的项目（是默认项目的编码）。但由于我来自中欧，我决定**将编码更改为 Unicode**，因为我不想只在`JOptionPane.showMessageDialog()`Windows 中使用英文字母。
我的应用程序也连接到数据库，并且在将字符集更改为 Unicode 连接后突然不起作用说

**`com.mysql.jdbc.CommunicationsException:`
`Communications link failure due to underlying exception`**

然后我决定通过将字符集更改回 UTF-8 来测试它，并且应用程序能够再次连接。我什至比较了我的连接字符串字符位置，如果它们在 UTF-8 和 Unicode 中不同，但它们是相同的！

我的问题是：**当我想避免连接问题时，如何在我的项目中使用东欧字母（与默认 UTF-8 不同的字符集）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:23:02.013

UTF-8 并未涵盖斯洛伐克字母表中的所有符号，这就是我决定将字符集更改为 UTF-16 的原因。编译后，一些特定的斯洛伐克字母在 UTF-8 中看起来与我预期的不同。
我不明白的是，如果我将字符集更改为 UTF-16，则会更改我的连接字符串（看起来像`jdbc:mysql://localhost/db_name?user=root&password=password`），其中仅包含来自 ASCII 代码表的符号，而我的程序无法连接......
使用 latin2 和Windows-1250 我没有问题连接和使用中欧字符。Unicode 在 NetBeans 7.2 中导致此类问题是某种错误吗？

# matlab - 从文件中读取矩阵时禁止打印

> ID：14334964
> 
> 赞同：2
> 
> 时间：2013-01-15T09:49:30.677
> 
> 标签：matlab

我在两个文件中有两个大矩阵，我想要相乘的 A (21,000 x 80,000) 和 B(3,000 x 80,000)：

C = A*B_转置

目前我有以下脚本：

```
A = dlmread('fileA')
B = dlmread('fileB')
C = A*(B')
dlmwrite('result', C)
exit 
```

然而，读取矩阵（前两行）需要很长时间，Matlab（在每个 dlmread 之后）继续打印这些矩阵。您知道如何禁用此打印并使该过程更快吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T09:52:24.697

要禁止打印，您只需在每行后放置一个分号：

```
A = dlmread('fileA');
B = dlmread('fileB');
dlmwrite('result', A * B'); 
```

* * *

加快读取速度的一种方法是告诉 Matlab 你正在使用什么分隔符，这样就不需要推断它。例如，如果文件是制表符分隔的，您可以使用

```
A = dlmread('fileA','\t'); 
```

或者如果它是逗号分隔的，你可以使用：

```
A = dlmread('fileA',','); 
```

除此之外，您可以考虑使用不同的文件格式。文件在哪里生成？如果它们是由另一个 Matlab 进程生成的，那么您可以将它们保存为 Matlab 的二进制格式，使用`load`and访问`save`：

```
A = [1 2; 3 4];
save('file.mat','A');
clear A;
load('file.mat','A'); 
```

* * *

为了快速进行基准测试，我将以下矩阵写入两个文件：

```
>> A = [1 2 3; 4 5 6; 7 8 9];
>> dlmwrite('test.txt',A);
>> save('test.mat','A'); 
```

然后我运行了两个基准测试：

```
>> tic; for i=1:1000; dlmread('test.txt',','); end; toc
Elapsed time is 0.506136 seconds.
>> tic; for i=1:1000; load('test.mat','A'); end; toc
Elapsed time is 0.260381 seconds. 
```

这里使用的版本`load`是该版本的一半时间`dlmread`。您可以对适当大小的矩阵进行自己的基准测试，看看什么最适合您。

# .net - 唯一标识具有 Func 主体参数的匿名方法

> ID：14334967
> 
> 赞同：3
> 
> 时间：2013-01-15T09:49:40.097
> 
> 标签：.net, caching, expression, anonymous, func

我正在尝试编写一些神奇的代码来处理可能或不可能的缓存。基本上，这个想法是有一个带有静态方法的 CacheManager 类，它接受一个 Func 作为参数来执行。在静态方法的主体中，它将能够执行该 Func 并使用一个缓存键来缓存结果，该缓存键唯一地标识该 Func 传递的内部结构（具有 0 个或多个参数的匿名方法）。随后使用提供的相同参数调用该静态方法将产生相同的缓存键并返​​回缓存结果。

我需要一种唯一标识传入的匿名函数的方法。

***编辑：**一旦我调整了匿名函数语法，表达式就提供了答案。*

我担心必须在运行时编译表达式对性能的影响。鉴于这是一种支持缓存性能的尝试，编译花费任何大量时间都是愚蠢的。有什么想法吗？

**用于测试的基本存储库：**

```
public class Product
{
    public int ID { get; set; }
    public string Name { get; set; }
}

public class ProductRepository
{
    private List<Product> products { get; set; }

    public ProductRepository()
    {
        products = new List<Product>() { new Product() { ID = 1, Name = "Blue Lightsaber" }, new Product() { ID = 2, Name = "Green Lightsaber" }, new Product() { ID = 3, Name = "Red Lightsaber" } };
    }

    public Product GetByID(int productID)
    {
        return products.SingleOrDefault(p => p.ID == productID);
    }
} 
```

**缓存管理器：**

```
public class CacheManager
{
    public static TResult Get<TResult>(Expression<Func<TResult>> factory)
    {
        if (factory == null) throw new ArgumentNullException("factory");

        var methodCallExpression = factory.Body as MethodCallExpression;
        if (methodCallExpression == null) throw new ArgumentException("factory must contain a single MethodCallExpression.");

        string cacheKey = "|Repository:" + methodCallExpression.Method.DeclaringType.FullName + "|Method:" + methodCallExpression.Method.Name + "|Args";
        foreach (var arg in methodCallExpression.Arguments)
        {
            cacheKey += ":" + (arg is ConstantExpression ? ((ConstantExpression)arg).Value : Expression.Lambda(arg).Compile().DynamicInvoke());
        }

        if (HttpContext.Current.Cache[cacheKey] == null)
        {
            HttpContext.Current.Cache[cacheKey] = factory.Compile().Invoke();
        }
        return (TResult)HttpContext.Current.Cache[cacheKey];
    }
} 
```

**用法：**

```
ProductRepository productRepository = new ProductRepository();
int productID = 1;
Product product;

// From repo
product = CacheManager.Get<Product>(() => productRepository.GetByID(1));

// From cache
product = CacheManager.Get<Product>(() => productRepository.GetByID(productID)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:14:15.697

看起来你想做一些类似[Memoization](http://en.wikipedia.org/wiki/Memoization)的事情。记忆化是一种存储已计算结果的方法，这似乎是您的要求。

更好的方法是创建一个与原始函数对象不同的新函数对象，它将结果存储在 Dictionary 中并对提供的参数执行查找。这个新函数将处理缓存，并在未命中的情况下添加到缓存中。

此类将创建一个参数的函数的记忆版本：

```
public static class memofactory
{
    public static Func<In, Out> Memoize<In, Out>(Func<In, Out> BaseFunction)
    {
        Dictionary<In,Out> ResultsDictionary = new Dictionary<In, Out>();

        return Input =>
            {
                Out rval;
                try
                {
                    rval = ResultsDictionary[Input];
                    Console.WriteLine("Cache hit"); // tracing message
                }
                catch (KeyNotFoundException)
                {
                    Console.WriteLine("Cache miss"); // tracing message
                    rval = BaseFunction(Input);
                    ResultsDictionary[Input] = rval;
                }
                return rval;
            };
    }
} 
```

根据您的示例，用法是：

```
 ProductRepository productRepository = new ProductRepository();
        int productID = 1;
        Product product;

        Func<int, Product> MemoizedGetById = memofactory.Memoize<int, Product>(productRepository.GetByID);

        // From repo
        product = MemoizedGetById(1);

        // From cache
        product = MemoizedGetById(productID); 
```

# javascript - 如何检查 X 个具有相同类但不同 id 的元素是否具有相同的特定 css 属性？

> ID：14334968
> 
> 赞同：1
> 
> 时间：2013-01-15T09:49:43.400
> 
> 标签：javascript, jquery

如何检查 X 个相同`class`但不同的元素是否具有相同`id`的特定 css 属性？想象一下，有 20 个元素或类似的某个类具有相同的类。像这儿

```
<div class="back" id="i1"></div>
<div class="back" id="i2"></div>
<div class="back" id="i3"></div>

<style>
   back{width:100px;height:100px;float:left;}
   #i1{background-image:url(img1.jpg);}
   #i2{background-image:url(img2.jpg);}
</style> 
```

如果它们相同，我会添加一个类，但我想这很容易。我所拥有的一个例子是[here](http://jsfiddle.net/5WxQM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:54:52.113

要测试 css 属性，您可以使用`.css()`，例如：

```
if ($('#i1').css('background-image') == $('#i2').css('background-image')) {
    // do something
} 
```

假设您想检查所有“.back” div 是否都相同`background-image`（我希望这是您想要实现的目标）。你可以用这样的东西：

```
var same = 1;
var property = $(".back").first().css('background-image');
$(".back").each(function() {
    if ($(this).css('background-image') != property)
        same = 0;
});
if (same == 1) {  // all properties where the same 
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:03:52.703

我真的看不出你在做什么，但你可以在这些线上做点什么。

```
var arr = [];
$.each($('.back'), function() {
  arr.push($(this).css('background-image'));
}); 
```

或者可能，

```
$.each($('.back'), function() {
    if ($(this).css('background-image') === 'lookingForThis.jpg') {
        alert('Found it!');  
}
}); 
```

# c# - 在 CustomizedMessageBox 上单击 Ok 时，主窗体被停用

> ID：14334969
> 
> 赞同：0
> 
> 时间：2013-01-15T09:49:48.580
> 
> 标签：c#, .net, winforms, messagebox

我创建了`CustomizedMessageBox`一个继承形式。
我在其中接受了标题、消息、图标、按钮等 的静态`SHOW()`方法。`customizedMessageBox`

我的问题是，当我单击“确定”时`CustomizedMessageBox`，被调用的主窗体`CustomizedMessageBox.Show(...)`被停用，即我系统上的其他一些应用程序获得焦点。

这并不总是发生，但`CustomizedMessageBox`至少会被调用 4-5 次。请建议我该怎么做。

我在互联网上读到设置`MDIParent`可以解决这个问题，但就我而言，SHOW 方法是静态的，所以我不能为此使用 MDI 父子概念。

代码详情如下：

```
//Calling static show method of Customized Message Box    
CustomizedMessageBox.Show("Data Not Found","Title", CustomizedMessageBox.CyButtons.Ok, CustomizedMessageBox.CyIcon.Error);    

class CustomizedMessageBox : Form    
{    

  static private CustomizedMessageBox _newMessageBox;    

  //CyButton and CyIcon are enums defined in CustomizedMessageBox class    
  static public DialogResult Show(string message, string title, CyButtons mButtons, CyIcon mIcon)    
  {    
   //Build Message Box by setting properties of "_newMessageBox"    
   _newMessageBox.ShowDialog();    
   //return DiaglogResult    
  }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:47:41.657

你可以得到一个 DialogResult 并且一旦点击 OK 再次给你的父母焦点。例如

```
if (CustomizedMessageBox.Show() == DialogResult.OK)
{
   this.Focus();
} 
```

# r - 将经纬度坐标转换为R中的国家名称

> ID：14334970
> 
> 赞同：25
> 
> 时间：2013-01-15T09:49:49.127
> 
> 标签：r, maps, geocode, rworldmap

我有一个纬度和经度坐标列表，并希望找出他们都居住在哪个国家。

我修改了[这个关于 lat-long to US states 的问题](https://stackoverflow.com/questions/8751497/latitude-longitude-coordinates-to-state-code-in-r)的答案，并且有一个工作功能，但我遇到的问题是`worldHires`地图（来自`mapdata`包）已经过时并且包含许多过时的国家，如南斯拉夫和苏联。

我将如何修改此功能以使用更现代的包，例如`rworldmap`？到目前为止，我只设法让自己沮丧......

```
library(sp)
library(maps)
library(rgeos)
library(maptools)

# The single argument to this function, points, is a data.frame in which:
#   - column 1 contains the longitude in degrees
#   - column 2 contains the latitude in degrees
coords2country = function(points)
{
    # prepare a SpatialPolygons object with one poly per country
    countries = map('worldHires', fill=TRUE, col="transparent", plot=FALSE)
    names = sapply(strsplit(countries$names, ":"), function(x) x[1])

    # clean up polygons that are out of bounds
    filter = countries$x < -180 & !is.na(countries$x)
    countries$x[filter] = -180

    filter = countries$x > 180 & !is.na(countries$x)
    countries$x[filter] = 180

    countriesSP = map2SpatialPolygons(countries, IDs=ids, proj4string=CRS("+proj=longlat +datum=wgs84"))

    # convert our list of points to a SpatialPoints object
    pointsSP = SpatialPoints(points, proj4string=CRS("+proj=longlat +datum=wgs84"))

    # use 'over' to get indices of the Polygons object containing each point 
    indices = over(pointsSP, countriesSP)

    # Return the state names of the Polygons object containing each point
    myNames = sapply(countriesSP@polygons, function(x) x@ID)
    myNames[indices]
}

##
## this works... but it has obsolete countries in it
## 

# set up some points to test
points = data.frame(lon=c(0, 5, 10, 15, 20), lat=c(51.5, 50, 48.5, 47, 44.5))

# plot them on a map
map("worldHires", xlim=c(-10, 30), ylim=c(30, 60))
points(points$lon, points$lat, col="red")

# get a list of country names
coords2country(points)
# returns [1] "UK"         "Belgium"    "Germany"    "Austria"    "Yugoslavia"
# number 5 should probably be in Serbia... 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-15T16:22:59.043

感谢您精心构建的问题。只需进行几行更改即可使用 rworldmap（包含最新的国家/地区），请参见下文。我不是 CRS 方面的专家，但我认为我必须对 proj4string 所做的更改没有任何区别。其他人可能想对此发表评论。

这对我有用并给了：

```
> coords2country(points)
[1] United Kingdom     Belgium            Germany            Austria           
[5] Republic of Serbia 
```

一切顺利，安迪

```
library(sp)
library(rworldmap)

# The single argument to this function, points, is a data.frame in which:
#   - column 1 contains the longitude in degrees
#   - column 2 contains the latitude in degrees
coords2country = function(points)
{  
  countriesSP <- getMap(resolution='low')
  #countriesSP <- getMap(resolution='high') #you could use high res map from rworldxtra if you were concerned about detail

  # convert our list of points to a SpatialPoints object

  # pointsSP = SpatialPoints(points, proj4string=CRS(" +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0"))

  #setting CRS directly to that from rworldmap
  pointsSP = SpatialPoints(points, proj4string=CRS(proj4string(countriesSP)))  

  # use 'over' to get indices of the Polygons object containing each point 
  indices = over(pointsSP, countriesSP)

  # return the ADMIN names of each country
  indices$ADMIN  
  #indices$ISO3 # returns the ISO3 code 
  #indices$continent   # returns the continent (6 continent model)
  #indices$REGION   # returns the continent (7 continent model)
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T10:36:28.563

您可以使用我的`geonames`包从[http://geonames.org/](http://geonames.org/)服务中查找：

```
> GNcountryCode(51.5,0)
$languages
[1] "en-GB,cy-GB,gd"

$distance
[1] "0"

$countryName
[1] "United Kingdom of Great Britain and Northern Ireland"

$countryCode
[1] "GB"

> GNcountryCode(44.5,20)
$languages
[1] "sr,hu,bs,rom"

$distance
[1] "0"

$countryName
[1] "Serbia"

$countryCode
[1] "RS" 
```

从 r-forge 获取它，因为我不确定我是否会费心将它发布给 CRAN：

[https://r-forge.r-project.org/projects/geonames/](https://r-forge.r-project.org/projects/geonames/)

是的，它依赖于外部服务，但至少它知道共产主义发生了什么...... :)

# python - Python/Django - 我可以创建多个类似 pdf 文件的对象，将它们压缩并作为附件发送吗？

> ID：14334976
> 
> 赞同：4
> 
> 时间：2013-01-15T09:50:01.133
> 
> 标签：python, django

我正在使用 Django 创建一个 Web 应用程序，其中输入了一些参数并创建了绘图。我想要一个链接，可以下载 zip 文件中的所有图。为此，我正在编写一个视图，它将创建所有图（我已经编写了创建每个图并显示它们的视图），然后将它们压缩，将 zip 文件保存为响应对象。

我可以做到这一点的一种方法是创建每个图，将其作为 pdf 文件保存到磁盘，然后最后将它们全部压缩为响应。但是，如果可能的话，我想回避保存到磁盘？

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T03:11:13.853

根据 Krzysiek 的建议，这对我有用`StringIO`。这`canvas`是一个`canvas`由 matplotlib 创建的对象。

```
#Create the file-like objects from canvases
file_like_1 = StringIO.StringIO()
file_like_2 = StringIO.StringIO()
#... etc...
canvas_1.print_pdf(file_like_1)
canvas_2.print_pdf(file_like_2)
#...etc....

#NOW create the zipfile
response = HttpResponse(mimetype='application/zip')
response['Content-Disposition'] = 'filename=all_plots.zip'

buff = StringIO.StringIO()
archive = zipfile.ZipFile(buff,'w',zipfile.ZIP_DEFLATED)
archive.writestr('plot_1.pdf',file_like_1.getvalue())
archive.writestr('plot_2.pdf',file_like_2.getvalue())
#..etc...
archive.close()
buff.flush()
ret_zip = buff.getvalue()
buff.close()
response.write(ret_zip)
return response 
```

所有这些的压缩部分取自[https://code.djangoproject.com/wiki/CookBookDynamicZip](https://code.djangoproject.com/wiki/CookBookDynamicZip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T10:00:22.903

查看[StringIO](http://docs.python.org/2/library/stringio.html) python 模块。它实现`file`了内存中字符串的行为。

# android - 升级我的应用程序后 FileOutputStream 是否持续存在？

> ID：14334977
> 
> 赞同：0
> 
> 时间：2013-01-15T09:50:06.403
> 
> 标签：android, file, save, upgrade

在我的应用程序中，我使用 FileOutputStream 类保存了一些文件：

```
 FileOutputStream fos;
    fos = openFileOutput("my_file", Context.MODE_PRIVATE);
    ObjectOutputStream os = new ObjectOutputStream(fos);
    os.writeObject(classToSave);
    os.close(); 
```

如果我升级我的应用程序，我会执行：

```
 FileInputStream fis = null;
    fis = openFileInput("my_file");
    ObjectInputStream is = new ObjectInputStream(fis);
    myData = (MyClass) is.readObject();
    is.close(); 
```

fis是 null*还是*包含我在升级之前保存的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:54:02.480

升级后文件本身仍然存在。是否可以检索序列化对象取决于您`MyClass`在源代码中所做的更改。

# php - PHP：爆炸数组

> ID：14334978
> 
> 赞同：0
> 
> 时间：2013-01-15T09:50:06.913
> 
> 标签：php, mysql, sql, select

我有两个`table`for`article`和`setting`。在`table`我放置的文章`id,title,date ..etc`和设置中`table`，我有一行名称`featuredarticle`和文章的放置`id`，特色文章带有单独的逗号。现在我只需要列出/打印我的特色文章。如何 ？

表文章：

```
ID | TITLE | DATE | PUBLISH
1
2
3
4
5 
```

表设置/行精选文章：

```
1,2,5 
```

![在此处输入图像描述](../Images/dca2854e48c51e7c29fcd320288cc8d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:52:44.650

```
SELECT  a.*
FROM    articles a
        INNER JOIN settings b
            ON FIND_IN_SET(a.ID, b.featuredarticle) <> 0 
```

*   [FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

如果您有时间更改表架构，请更改它。用逗号分隔列的值是一个糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:55:33.373

你可以试试这个-

```
SELECT * FROM article
     JOIN settings ON FIND_IN_SET( id, featuredarticle) 
```

请看演示：[demo](http://sqlfiddle.com/#!2/21466/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T09:52:52.937

从数据库获取数据到数组并使用：

$newArray = explode(".", $dataDbArray);

# c++ - 我们应该更喜欢 Boost 还是标准库？

> ID：14334982
> 
> 赞同：28
> 
> 时间：2013-01-15T09:50:35.543
> 
> 标签：c++, boost

我正在阅读 Boost 数组文档，我看到了这一行：

> 如果你使用 C++11，你应该考虑使用 std::array 而不是 boost::array

我的印象是，对于它的主要库，Boost 总是比标准库更可取，因为：

*   boost 的性能永远不会比标准库差
*   boost 可能会提供更多功能
*   boost 最终与标准 lib 具有相同的质量（编写 C++ 标准的人是积极的 boost 开发人员/主管）
*   几年后，主要的增强功能最终出现在标准库中

那么我更喜欢 boost 而不是 stdlib 是对的吗？

如果不是/更复杂，我的哪些假设需要更正？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-15T09:57:06.140

我认为您应该在可用时使用标准库，因为...它是标准的并且随编译器一起提供。此外，如果你使用 boost，你需要一个烦人的外部依赖。

所以，我的建议是：尽可能使用 std 。如果您正在编写可移植代码，也必须使用旧编译器编译，您可以考虑使用您自己的命名空间（例如：cxx0x），根据您使用的编译器嵌入 std 或 boost 命名空间（这称为**命名空间别名**):

```
#ifdef COMPILER_HAS_CXX0X
    #include <memory>
    namespace cxx0x = std;
#else
    #include <boost/shared_ptr.hpp>
    namespace cxx0x = boost;
#endif

...

cxx0x::shared_ptr< MyClass > = ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T09:53:05.630

取自[Boost](http://www.boost.org/users/index.html)人自己：

> 为什么组织应该使用 Boost？
> 
> 一句话，生产力。使用像 Boost 这样的高质量库可以加速初始开发，减少错误，减少轮子的重新发明，并降低长期维护成本。而且由于 Boost 库倾向于成为事实上或法律上的标准，许多程序员已经熟悉它们。
> 
> C++ 标准库的 TR1 中包含 10 个 Boost 库，因此计划在以后进行完全标准化。更多 Boost 库正在为 TR2 准备中。使用 Boost 库可以让组织在采用新技术方面处于领先地位。
> 
> 许多组织已经使用通过 Boost 实现的程序，例如 Adob​​e Acrobat Reader 7.0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T10:03:25.017

根据我自己的经验，我现在更喜欢使用 boost。也许这是历史原因，但我发现 VC2008 附带的 TR1 中的 STD 尝试有太多错误，尽管 PJ Plauger 尽了最大努力，但他无法重现经过同行评审和检查的 boost 代码的质量相当多的历史。

除非他们实际上可以获取 boost 代码并在 STD 中使用它，否则为什么他们会更好地重现它？当然，有时他们可能会，而且真的应该一起努力，而不是互相对抗。

我现在做的一件事是声明一个别名命名空间，通常`spns`这样调用：

```
namespace spns = boost; 
```

之后我可以`spns::shared_ptr`在我的整个代码中使用（spns 代表“共享指针命名空间”），如果我们以后更改为 std，那么很容易去一个地方并只编辑该行和包含。

说到 C++11，标准有很大的变化，boost 的代码是 C++03。所以现在桌子很可能会转向图书馆的某些部分。我认为一些 boost 的优秀库对于 C++11 来说几乎已经过时了，例如，没有人会再使用`boost::lambda`了，他们只会对 lambda 使用新的语言语法。

所以是的，当你迁移到 C++11 时，可能是时候放弃部分 boost 库并使用新版本了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T10:14:24.790

如果某件事可以是标准的，那就让它成为标准。如果不能，请尽可能使用更标准的解决方案（BOOST 就是为此而设计的）

许多标准库功能都取自 boost，它们继续存在以支持在那些尚未标准化的功能时部署的应用程序。

将 boost 用于标准化功能实际上是一种“向后看”。有时是必要的（可能是标准库特定的实现不包括所有需要的东西......通常会在 Windows 上看到 boost::thread 而不是 std::thread，因为一些编译器尚未移植 std 实现）但我不会把它定为规则。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T10:08:35.623

我在针对 C++11 开发的开源软件中看到的趋势是将 API 兼容（子集）特性从 STD 转移到 boost——因为 boost 可用于非 C++11 兼容的编译器，其中 std 特性（显然）不是。

[mosh](https://github.com/keithw/mosh)就是一个很好的例子。

对于 API 兼容的功能，只需切换命名空间即可。事实上，如果可以的话，没有理由不将其作为配置选项。

侧边栏：如果您要链接到最新版本的非仅头文件 boost 库，请预先警告某些功能不再可用，除非 boost 是用`-std=c++11`. `boost::filesystem`我最近在API中使用某些函数时遇到了这个问题。

# php - 存储 IP 地址时出错

> ID：14334986
> 
> 赞同：0
> 
> 时间：2013-01-15T09:50:50.750
> 
> 标签：php, sql

我创建了一个快速简单的会员推荐脚本来检查会员 ID，如果这是一个注册 ID，它将检查数据库中它来自的 IP，如果它不在列表中，它将奖励会员 1 分.

但是，当我检查超过 30 个不同 IP 地址的测试版本时，并非所有 IP 地址都已存储，并且似乎在某个时间点后停止保存它们。

该数据库只是一个常规的 mysql 数据库。

您将如何存储 IP 和奖励附属公司？

编辑：代码

```
function awardAffiliate() {
global $wpdb;

//get the affliateID from the url. 
$url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; 
$affiliateID = basename(parse_url($url,  PHP_URL_PATH));

//get the IP address. 
$ipAddress = $_SERVER['REMOTE_ADDR'];
/

$checkAffiliate = $wpdb->get_results( $wpdb->prepare("SELECT user_id, user_count FROM affiliate_members WHERE user_id = '$affiliateID'"));

foreach ($checkAffiliate as $affiliate) { 

    $regAffiliateID = $affiliate->user_id;
    $regAffiliateCount = $affiliate->user_count;
}

// ammend them so that the count is +1 and the ip address is pushed into the array. add ',' before new ipaddress

$newCount = $regAffiliateCount + 1;

$updateffiliate = $wpdb->get_results( $wpdb->prepare("UPDATE affiliate_members SET user_count = '$newCount' WHERE user_id = '$affiliateID'"));

$checkIpaddresses = $wpdb->get_results( $wpdb->prepare("SELECT affiliateID, source FROM affiliate_ip WHERE affiliateID = '$affiliateID'"));

foreach ($checkIpaddresses as $ipaddress) { 
    $ipSource = $ipaddress->source;
}

$addIP = "," .$ipAddress;
$ipSource .= $addIP;

$updateIpAddress = $wpdb->get_results( $wpdb->prepare("UPDATE affiliate_ip SET source = '$ipSource' WHERE affiliateID = $affiliateID")); 
```

}

# linux - makefile 出错时如何运行特定命令？

> ID：14334988
> 
> 赞同：1
> 
> 时间：2013-01-15T09:50:59.990
> 
> 标签：linux, shell, ubuntu, makefile

我有一个调用的makefile

```
... 
```

> @lessc less/mything.less > style.uncompressed.css

当lessc编译器出现错误时，我可以运行像“beep”或“paplay ...”这样的命令吗？如果我该怎么做？

我在后台运行它，并且有一个脚本检查文件夹以进行更改，如果发生更改，则执行此 makefile。我没有第二台显示器，我不希望控制台始终位于顶部。所以出错时的声音会很棒。也许有人知道另一种解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:59:40.777

Make 对构建失败的默认操作是使用非零退出代码退出。如果 make 以非零退出代码终止，您可以围绕它创建一个简单的包装器，调用声音生成命令：

```
make
if [ $? -ne 0 ]; then
    tput bel
    aplay <sound to play>.mp3
fi 
```

# cruisecontrol.net - 从 CruiseControl.net 运行 Nant 脚本并忘记时尚

> ID：14334994
> 
> 赞同：0
> 
> 时间：2013-01-15T09:51:21.573
> 
> 标签：cruisecontrol.net, nant

如何在 Cruise Control .NET 中以一种一劳永逸的方式编写 Nant 或 Exec 任务（调用 nant.exe）。我不希望 CruiseControl 等待 Nant 脚本完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:45:30.673

首先，这不是巡航控制的设计目的。理想情况下，它将捕获输出并将其存储在构建日志中。

但是，如果你想调用一个进程而不是等待它退出，你需要调用一个进程，然后启动你的 nant 实例并立即退出。

您可以通过使用精心设计的 cmd 调用来实现这一点，例如

```
cmd.exe /c "start '' /b nant.exe <target> -Dparam=value" 
```

尽管我没有尝试过，但这应该可以工作。

# php - PHP函数检查两个数组是否相同，同时忽略指定键的值

> ID：14334995
> 
> 赞同：8
> 
> 时间：2013-01-15T09:51:23.417
> 
> 标签：php, arrays, phpunit

我需要一个 PHP 函数，它可以断言两个数组相同，同时忽略指定键集的值（只有值，键必须匹配）。

实际上，数组必须具有相同的结构，但可以忽略某些值。

例如，考虑以下两个数组：

```
Array
(
    [0] => Array
        (
            [id] => 0
            [title] => Book1 Title
            [creationDate] => 2013-01-13 17:01:07
            [pageCount] => 0
        )
)

Array
(
    [0] => Array
        (
            [id] => 1
            [title] => Book1 Title
            [creationDate] => 2013-01-13 17:01:07
            [pageCount] => 0
        )
) 
```

如果我们忽略 key 的值，它们是相同的`id`。

我还想考虑嵌套数组的可能性：

```
Array
(
    [0] => Array
        (
            [id] => 0
            [title] => Book1 Title
            [creationDate] => 2013-01-13 17:01:07
            [pageCount] => 0
        )

    [1] => Array
        (
            [id] => 0
            [title] => Book2 Title
            [creationDate] => 2013-01-13 18:01:07
            [pageCount] => 0
        )
)

Array
(
    [0] => Array
        (
            [id] => 2
            [title] => Book1 Title
            [creationDate] => 2013-01-13 17:01:07
            [pageCount] => 0
        )

    [1] => Array
        (
            [id] => 3
            [title] => Book2 Title
            [creationDate] => 2013-01-13 18:01:07
            [pageCount] => 0
        )
) 
```

因为我需要它进行测试，所以我提出了以下扩展[PHPUnit_Framework_TestCase](http://www.phpunit.de/manual/3.8/en/writing-tests-for-phpunit.html)并使用其断言函数的类：

```
class MyTestCase extends PHPUnit_Framework_TestCase
{
    public static function assertArraysSame($expected, $actual, array $ignoreKeys = array())
    {
        self::doAssertArraysSame($expected, $actual, $ignoreKeys, 1);
    }

    private static function doAssertArraysSame($expected, $actual, array $ignoreKeys = array(), $depth, $maxDepth = 256)
    {
        self::assertNotEquals($depth, $maxDepth);
        $depth++;

        foreach ($expected as $key => $exp) {
            // check they both have this key
            self::assertArrayHasKey($key, $actual);

            // check nested arrays 
            if (is_array($exp))
                self::doAssertArraysSame($exp, $actual[$key], $ignoreKeys, $depth);

            // check they have the same value unless the key is in the to-ignore list
            else if (array_search($key, $ignoreKeys) === false)
                self::assertSame($exp, $actual[$key]);

            // remove the current elements
            unset($expected[$key]);
            unset($actual[$key]);
        }

        // check that the two arrays are both empty now, which means they had the same lenght
        self::assertEmpty($expected);
        self::assertEmpty($actual);
    }
} 
```

`doAssertArraysSame`遍历其中一个数组并递归断言这两个数组具有相同的键。它还会检查它们是否具有相同的值，除非当前键在要忽略的键列表中。

为确保两个数组具有完全相同数量的元素，在迭代过程中删除每个元素，并且在循环结束时，该函数检查两个数组是否为空。

用法：

```
class MyTest extends MyTestCase
{
    public function test_Books()
    {
        $a1 = array('id' => 1, 'title' => 'the title');
        $a2 = array('id' => 2, 'title' => 'the title');

        self::assertArraysSame($a1, $a2, array('id'));
    }
} 
```

我的问题是：有没有更好或更简单的方法来完成这项任务，也许使用一些已经可用的 PHP/PHPUnit 函数？

编辑：请记住，我*不一定*想要 PHPUnit 的解决方案，如果有一个普通的 PHP 函数可以做到这一点，我可以在我的测试中使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:06:19.897

我不确定这是否比您已经使用的解决方案更好，但是当我有这个确切需求时，我之前使用过类似的类。它能够给你一个简单的真假响应，并且不耦合到测试框架，这对你来说可能是也可能不是一件好事。

```
class RecursiveArrayCompare
{
    /**
     * @var array
     */
    protected $ignoredKeys;

    /**
     *
     */
    function __construct()
    {
        $this->ignoredKeys = array();
    }

    /**
     * @param array $ignoredKeys
     * @return RecursiveArrayCompare
     */
    public function setIgnoredKeys(array $ignoredKeys)
    {
        $this->ignoredKeys = $ignoredKeys;

        return $this;
    }

    /**
     * @param array $a
     * @param array $b
     * @return bool
     */
    public function compare(array $a, array $b)
    {
        foreach ($a as $key => $value) {
            if (in_array($key, $this->ignoredKeys)) {
                continue;
            }

            if (!array_key_exists($key, $b)) {
                return false;
            }

            if (is_array($value) && !empty($value)) {
                if (!is_array($b[$key])) {
                    return false;
                }

                if (!$this->compare($value, $b[$key])) {
                    return false;
                }
            } else {
                if ($value !== $b[$key]) {
                    return false;
                }
            }

            unset($b[$key]);
        }

        $diff = array_diff(array_keys($b), $this->ignoredKeys);

        return empty($diff);
    }
} 
```

还有一些基于您提供的数组的示例：

```
$arr1 = array(
    'id' => 0,
    'title' => 'Book1 title',
    'creationDate' => '2013-01-13 17:01:07',
    'pageCount' => 0
);

// only difference is value of ignored key
$arr2 = array(
    'id' => 1,
    'title' => 'Book1 title',
    'creationDate' => '2013-01-13 17:01:07',
    'pageCount' => 0
);

// has extra key
$arr3 = array(
    'id' => 1,
    'title' => 'Book1 title',
    'creationDate' => '2013-01-13 17:01:07',
    'pageCount' => 0,
    'extra_key' => 1
);

// has extra key, which is ignored
$arr4 = array(
    'id' => 1,
    'title' => 'Book1 title',
    'creationDate' => '2013-01-13 17:01:07',
    'pageCount' => 0,
    'ignored_key' => 1
);

// has different value
$arr5 = array(
    'id' => 2,
    'title' => 'Book2 title',
    'creationDate' => '2013-01-13 17:01:07',
    'pageCount' => 0
);

$comparer = new RecursiveArrayCompare();
$comparer->setIgnoredKeys(array('id', 'ignored_key'));

var_dump($comparer->compare($arr1, $arr2)); // true
var_dump($comparer->compare($arr1, $arr3)); // false
var_dump($comparer->compare($arr1, $arr4)); // true
var_dump($comparer->compare($arr1, $arr5)); // false 
```

## 编辑

使用像这样的单独类的好处是可以直接对这个类进行单元测试，以确保它的行为符合预期。如果您不能保证它们正常工作，您就不想依赖工具进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:24:36.803

你可以 foreach 数组元素

```
foreach ($array1 as $index => $subArray)
{
    $this->assertEquals($array1[$index]['title'], $array2[$index]['title');
    $this->assertEquals($array1[$index]['creationDate'], $array2[$index]['creationDate');
    $this->assertEquals($array1[$index]['pageCount'], $array2[$index]['pageCount');
} 
```