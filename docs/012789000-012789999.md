# StackOverflow 问答 12789000-12789999

# python - 用于 SSH 和 VNC 的 Paramiko 脚本

> ID：12789000
> 
> 赞同：0
> 
> 时间：2012-10-08T20:28:34.333
> 
> 标签：python, paramiko

我正在尝试编写一个脚本以在远程连接到我办公室的各种计算机时使用。我们还使用 VNC 来允许我们查看用户桌面。我一直在尝试找到一个允许我这样做的脚本，但我没有运气。现在，我们在终端中使用 SSH 命令（我们都使用 Mac），如下所示：

```
ssh "hostname" -L 5901:127.0.0.1:5900 
```

这需要 RSA 指纹和用户密码。永远不会要求用户名，因为它与计算机上的用户配置文件相同。5901 也可以是 5902、5903 等，具体取决于我们的 VNC 客户端中指定的显示端口。

我最终想创建一个提示输入主机名和显示端口的脚本，假设用户名和密码可以永久存储在脚本中。如果没有，我们也需要这些提示。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:00:34.293

我之前有一个类似的用例，所以我把这个脚本放在一起：

[http://code.activestate.com/recipes/576810-copy-files-over-ssh-using-paramiko/](http://code.activestate.com/recipes/576810-copy-files-over-ssh-using-paramiko/)

要通过 SSH 建立 VNC 隧道，您需要转发端口 5900 以连接到真实的 xorg 实例，例如 via `x11vnc`，或端口 5901 连接到第一个虚拟 xorg（例如 via `vncserver`），5902 连接到第二个 xorg 等。

我不知道 paramiko 能够转发端口，但似乎有一个纯 Python 模块可以做到这一点[https://gist.github.com/1399529](https://gist.github.com/1399529)

# c - C：我如何构造一个不被覆盖的 line_buffer？

> ID：12789001
> 
> 赞同：0
> 
> 时间：2012-10-08T20:28:35.143
> 
> 标签：c, buffer

以下代码似乎覆盖了 a ，因此它只包含一堆与输入文件的最后一行相同的行。如何构造 while 循环，以便将每个缓冲区行存储在数组的单独实例中？

```
void readfile(const char *filename) {
FILE *f;
f = fopen(filename, "r");
char *a[500];
char *array[50];
char line_buffer[BUFSIZ];
char line=0;
//struct cal_event one[200];

while (fgets(line_buffer, sizeof(line_buffer), f)) {
    ++line;
    a[line] = (char*) &line_buffer;
    //printf("%s ", a[line]);
}
int l;
for(l=1; l<30; l++) {
    printf("%s ", a[l]);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:31:33.720

您最好的选择可能是为每一行分配一个新缓冲区并将地址分配给`a[line]`.

分配指针应该看起来像：

```
a[line++] = ... 
```

这样第一个赋值是偏移量 0 处的第一个元素，而不是您现在拥有的偏移量 1 处的第二个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:31:34.050

您需要为每一行分配空间。省略错误检查等，通常是这样的：

```
char buffer[max_line_len];
char *lines[max_lines];
size_t line=0;

while (fgets(buffer, sizeof(buffer), f)) {
    lines[line] = malloc(strlen(buffer)+1);
    strcpy(lines[line], buffer);
    ++line;
} 
```

# google-maps-api-3 - 当我将 FusionTablesLayer 与 Google Maps JavaScript API v3 一起使用时出现空白页

> ID：12789004
> 
> 赞同：2
> 
> 时间：2012-10-08T20:28:49.807
> 
> 标签：google-maps-api-3, google-fusion-tables

我使用融合表的数据准备了一个简单的页面。（ FusionTablesLayer 与 Google Maps JavaScript API v3 ）但地图不显示。您可以在此处查看该页面： [http](http://www.siterary.com/0test.html) ://www.siterary.com/0test.html 。有什么问题 ？代码如下

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>test</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBK_ErFIm-CYBsslK_9ZB6m0wPV197UaJg&sensor=false"></script>
    <script>

      function initialize() {

        var  istanbul = new google.maps.LatLng(41.01, 28.97);

        map = new google.maps.Map(document.getElementById('map_canvas'), {
          center: istanbul,
          zoom: 11,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        layer = new google.maps.FusionTablesLayer({
          query: { 
            select:  'Location' ,
            from: '1s3DYRvmNAfKgo-swjG39-8UEb9tHMm0UPHvW_tc'
          }
        });
        layer.setMap(map);
      }
    </script>
  </head>
  <body onload="initialize()">

<B>MAP</B> <BR>

    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:37:18.330

您的网站上不存在“/maps/documentation/javascript/examples/default.css”文件。您的地图没有有效的尺寸。

[工作版本](http://www.geocodezip.com/v3_FusionTablesLayer_blankmap.html)

**代码片段：**

```
function initialize() {

  var istanbul = new google.maps.LatLng(41.01, 28.97);

  map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: istanbul,
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  layer = new google.maps.FusionTablesLayer({
    query: {
      select: 'Location',
      from: '1s3DYRvmNAfKgo-swjG39-8UEb9tHMm0UPHvW_tc'
    }
  });
  layer.setMap(map);
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#map_canvas {
  height: 100%;
}
@media print {
  html,
  body {
    height: auto;
  }
  #map_canvas {
    height: 650px;
  }
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<B>MAP</B> 
<BR>

<div id="map_canvas"></div>
```

# javascript - 高于阈值的阴影面积图 - 谷歌图表

> ID：12789007
> 
> 赞同：3
> 
> 时间：2012-10-08T20:29:01.040
> 
> 标签：javascript, charts, google-visualization

我查看了各种 javascript 图表库并决定使用[google 图表](https://google-developers.appspot.com/chart/interactive/docs/gallery/areachart)。但是，我无法弄清楚如何在面积图的顶部添加阴影（以指示极值）。它有点像图表交叉点。

我[使用 Highcharts 创建了一个 jsfiddle](http://jsfiddle.net/WWfEV/3)。

`fillColor: { linearGradient: [0,103,0,104], stops: [ [0, '#ff8888'], [1, '#aaaaff'], ] }` 有没有其他人遇到并解决了这个问题？

-- 我尝试添加颜色/渐变范围但没有成功。这是[谷歌图表jsfiddle](http://jsfiddle.net/LAGsz/1/)

# asp.net - 处理程序页面 (.ashx) 可以获取配置设置吗？

> ID：12789008
> 
> 赞同：2
> 
> 时间：2012-10-08T20:29:01.370
> 
> 标签：asp.net, vb.net, handler

处理程序页面 (.ashx) 能否获取在 web.config 的应用程序设置中设置的键值？对于 asp.net

回答：是的，详情见评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:32:53.100

是的，您可以使用`ConfigurationManager`该类获取设置。

```
var value = ConfigurationManager.AppSettings["Key"] 
```

更多信息

*   [MSDN - ConfigurationManager 类](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)

# c++ - 使用 C++ 中的 LoadLibrary 和 2 个 DLL 的显式 DLL 链接

> ID：12789009
> 
> 赞同：0
> 
> 时间：2012-10-08T20:29:05.877
> 
> 标签：c++, dll, linker, loadlibrary, explicit

这是我在 stackoverflow 上的第一篇文章，我从一个问题开始。

我在 C++ 中用 qt 编写了一个 gui 应用程序。目前，我一直在加载和保存传递给我的 dll。对于加载和保存，我决定为加载和保存任务设置功能。但主要问题是加载不同的 DLL 文件。

我目前有以下代码用于加载和保存，但是当我从加载切换到保存时出现错误。我知道它与“FreeLibrary()”函数有关。但如果执行 FreeLibrary(hDLLimp)，我将无法重复加载我的“imlib.dll”。返回的 hDLLimp 为 0。如果我将 FreeLibrary 注释掉，加载函数可以重新执行多次。但是保存功能不起作用。hDLLexp 变为“0”并且句柄消失了。

* * *

```
 // Load function

HINSTANCE         hDLLimp = 0;
GETCOUNTS         fncgetcounts;
GETITEM           fncgetitem;
IMPEXPINTERFACE   fncimportinterface;
TProcLib          *proclib;
TNativeSurface    nativesurface;
char              filepath[_MAX_PATH];

hDLLimp = LoadLibrary(TEXT("implib.dll"));
DWORD Error = GetLastError();
if( hDLLimp == 0 )
{
    QMessageBox *msgBox = new QMessageBox;
    msgBox->setText("implib.dll konnte nicht geladen werden");
    msgBox->exec();
    return;
}

fncgetcounts = (GETCOUNTS) GetProcAddress(hDLLimp, "GetCounts");
fncgetitem = (GETITEM) GetProcAddress(hDLLimp, "GetItem");
fncimportinterface = (IMPEXPINTERFACE) GetProcAddress(hDLLimp, "ImportInterface");

for (long i=0; i<fncgetcounts()-1; i++) {
     if ((proclib = fncgetitem(i))==NULL) break;
     if (strcmp(proclib->ResName, "SDFIMPORT")==0) {
        strcpy(filepath, "test.sdf");
        fncimportinterface(filepath, _MAX_PATH, &(proclib->PrgId), 2, &nativesurface, 0, 0, NULL, NULL, 1); 
        break;
     }
  }
//FreeLibrary(hDLLimp); 
```

* * *

```
 //Export/Save function

HINSTANCE         hDLLexp = 0;

GETCOUNTS         fncgetcounts;

GETITEM           fncgetitem;

IMPEXPINTERFACE   fncexportinterface;

TProcLib          *proclib;

TNativeSurface    nativesurface;

char              filepath[_MAX_PATH];

hDLLexp = LoadLibrary(TEXT("explib.dll"));
if( hDLLexp == 0 )
    {
        QMessageBox *msgBox = new QMessageBox;
        msgBox->setText("explib.dll konnte nicht geladen werden");
        msgBox->exec();
        return;
    }

    fncgetcounts = (GETCOUNTS) GetProcAddress(hDLLexp, "GetCounts");
    fncgetitem = (GETITEM) GetProcAddress(hDLLexp, "GetItem");
    fncexportinterface = (IMPEXPINTERFACE) GetProcAddress(hDLLexp, "ExportInterface");

    for (long i=0; i<fncgetcounts()-1; i++) {
         if ((proclib = fncgetitem(i))==NULL) break;
         if (strcmp(proclib->ResName, "SDFEXPORT")==0) {
            strcpy(filepath, "test.sdf");
            fncexportinterface(filepath, _MAX_PATH, &(proclib->PrgId), 2, &nativesurface, 0, 0, NULL, NULL, 1); 
            break;
         }
      }
    //FreeLibrary(hDLLexp); 
```

# ruby-on-rails - 启动服务器时出现Rails错误

> ID：12789010
> 
> 赞同：0
> 
> 时间：2012-10-08T20:29:07.447
> 
> 标签：ruby-on-rails

我刚从 rails 开始，启动服务器时出现以下错误。

```
$ rails s
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/tracelines19.rb:12:in `require': dlopen(/usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/trace_nums19.bundle, 9): Symbol not found: _ruby_current_thread (LoadError)
Referenced from: /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/trace_nums19.bundle
Expected in: flat namespace in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/trace_nums19.bundle - /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/trace_nums19.bundle
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/tracelines19.rb:12:in `rescue in <module:TraceLineNumbers>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/tracelines19.rb:8:in `<module:TraceLineNumbers>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/tracelines19.rb:6:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/linecache19.rb:69:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/linecache19-0.5.12/lib/linecache19.rb:69:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
from /Users/Crysfel/Sites/rails/quizzpot/config/application.rb:13:in `<top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我在用着：

导轨 3.2.8 红宝石 1.9.3p194

这是我的 config/application.rb 文件：

```
 require File.expand_path('../boot', __FILE__)

    # Pick the frameworks you want:
    require "active_record/railtie"
    require "action_controller/railtie"
    require "action_mailer/railtie"
    require "active_resource/railtie"
    require "sprockets/railtie"
    # require "rails/test_unit/railtie"

    if defined?(Bundler)
      # If you precompile assets before deploying to production, use this line
      Bundler.require(*Rails.groups(:assets => %w(development test)))
      # If you want your assets lazily compiled in production, use this line
      # Bundler.require(:default, :assets, Rails.env)
    end

    module Quizzpot
      class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    # config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:31:41.577

堆栈跟踪显示您遇到了`linecache19`gem 的问题。谷歌搜索显示其他人也遇到了同样的问题：这似乎是该 gem 与 Ruby 1.9.3 之间的不兼容。

`linecache19`在您的 Gemfile 中吗？如果是这样，您可以将其删除吗？（您真的需要它吗？）如果它不在 Gemfile 中，请查看 Gemfile.lock 并查看它是否被列为您的其他 gem 之一的依赖项。

# ios - iOS：自动布局中的多行 UILabel

> ID：12789013
> 
> 赞同：191
> 
> 时间：2012-10-08T20:29:16.487
> 
> 标签：ios, iphone, cocoa-touch, autolayout, uilabel

我在尝试使用自动布局实现一些非常基本的布局行为时遇到了麻烦。我的视图控制器在 IB 中看起来像这样：

![在此处输入图像描述](../Images/885ba88a42cc546fafcaf3ffad899888.png)

最上面的标签是标题标签，不知道会有多少行。我需要标题标签来显示所有文本行。我还需要将另外两个标签和小图像放在标题的正下方，不管它有多高。我已经设置了标签和小图像之间的垂直间距约束，以及标题标签与其父视图之间的顶部间距约束以及小图像与其父视图之间的底部间距约束。白色的 UIView 没有高度限制，因此它应该垂直拉伸以包含其子视图。我已将标题标签的行数设置为 0。

如何让标题标签调整大小以适应字符串所需的行数？我的理解是我不能使用 setFrame 方法，因为我使用的是自动布局。而且我必须使用自动布局，因为我需要那些其他视图保持在标题标签下方（因此有约束）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-10-23T14:02:58.340

使用`-setPreferredMaxLayoutWidth`和`UILabel`自动布局应该处理其余的。

```
[label setPreferredMaxLayoutWidth:200.0]; 
```

请参阅[有关 preferredMaxLayoutWidth 的 UILabel 文档](https://developer.apple.com/documentation/uikit/uilabel/1620534-preferredmaxlayoutwidth)。

**更新：**

只需将`height`storyboard中的约束设置为`Greater than or equal to`，无需设置PreferredMaxLayoutWidth。

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2013-08-05T02:09:11.390

将标签集的行数扩展为 0，更重要的是，将自动布局集高度设置为 >= x。自动布局将完成其余的工作。您还可以包含基于先前元素的其他元素以正确定位。

![自动布局](../Images/a8b0c3926d115d91399bff8d536e2504.png)

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2015-03-21T07:30:13.050

来源：[http ://www.objc.io/issue-3/advanced-auto-layout-toolbox.html](http://www.objc.io/issue-3/advanced-auto-layout-toolbox.html)

**多行文本的内在内容大小**

UILabel 和 NSTextField 的内在内容大小对于多行文本是不明确的。文本的高度取决于行的宽度，这在解决约束时尚未确定。为了解决这个问题，这两个类都有一个名为 preferredMaxLayoutWidth 的新属性，它指定了用于计算内在内容大小的最大线宽。

由于我们通常事先不知道这个值，因此我们需要采取两步的方法来解决这个问题。首先我们让 Auto Layout 完成它的工作，然后我们在布局过程中使用生成的框架来更新首选的最大宽度并再次触发布局。

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    myLabel.preferredMaxLayoutWidth = myLabel.frame.size.width;
    [super layoutSubviews];
} 
```

第一次调用 [super layoutSubviews] 是标签获取其框架集所必需的，而第二次调用是在更改后更新布局所必需的。如果我们省略第二次调用，我们会得到一个 NSInternalInconsistencyException 错误，因为我们在布局过程中进行了更改，需要更新约束，但我们没有再次触发布局。

我们也可以在标签子类本身中执行此操作：

```
@implementation MyLabel
- (void)layoutSubviews
{
    self.preferredMaxLayoutWidth = self.frame.size.width;
    [super layoutSubviews];
}
@end 
```

在这种情况下，我们不需要先调用 [super layoutSubviews]，因为当 layoutSubviews 被调用时，我们已经在标签本身上有了一个框架。

为了从视图控制器级别进行此调整，我们挂钩到 viewDidLayoutSubviews。此时，第一个 Auto Layout pass 的框架已经设置好了，我们可以使用它们来设置首选的最大宽度。

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];
    myLabel.preferredMaxLayoutWidth = myLabel.frame.size.width;
    [self.view layoutIfNeeded];
} 
```

***最后，确保标签上没有明确的高度约束，其优先级高于标签的内容压缩阻力优先级。否则它将胜过计算的内容高度。确保检查所有可能影响标签高度的约束。***

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-10-18T21:03:07.850

我只是在与这个确切的场景作斗争，但是还有很多视图需要根据需要调整大小并向下移动。这让我发疯，但我终于想通了。

这是关键：Interface Builder 喜欢在您添加和移动视图时加入额外的约束，而您可能不会注意到。在我的例子中，我有一个视图在中途有一个额外的约束，指定它和它的父视图之间的大小，基本上将它固定到那个点。这意味着它上面的任何东西都不能调整得更大，因为它会违反这个约束。

判断是否是这种情况的一种简单方法是尝试手动调整标签大小。IB会让你成长吗？如果是这样，下面的标签是否按照您的预期移动？在调整大小以查看约束将如何移动视图之前，请确保已检查这两项：

![IB菜单](../Images/7fe87a7a1c69bc98301936ff250a2b62.png)

如果视图被卡住，请遵循其下方的视图，并确保其中一个视图没有顶部空间来进行超级视图约束。然后只需确保标签的行数选项设置为 0，它应该会处理其余部分。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-04-11T01:01:03.690

我发现您需要以下内容：

*   顶部约束
*   前导约束（例如左侧）
*   尾随约束（例如右侧）
*   设置内容拥抱优先级，水平到低，如果文本很短，它将填充给定的空间。
*   设置内容压缩阻力，水平到低，所以它会换行而不是尝试变宽。
*   将行数设置为 0。
*   将换行模式设置为自动换行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-28T06:33:07.880

我有一个 UITableViewCell ，它有一个文本换行标签。我按如下方式进行文本换行。

1) 设置 UILabel 约束如下。

[![在此处输入图像描述](../Images/0ea1091a2c842b33c9e92206a21cfa45.png)](https://i.stack.imgur.com/ODSQP.png)

2) 设置编号。行数为 0。

3) 为 UITableViewCell 添加了 UILabel 高度约束。

```
@IBOutlet weak var priorityLabelWidth: NSLayoutConstraint! 
```

4) 在 UITableViewCell 上：

```
priorityLabel.sizeToFit()
priorityLabelWidth.constant = priorityLabel.intrinsicContentSize().width+5 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-02T16:34:10.457

在有关该主题的许多主题中找到的不同解决方案都没有完美地适用于我的案例（动态表格视图单元格中的 x 动态多行标签）。

我找到了一种方法：

在标签上设置约束并将其多行属性设置为 0 后，创建 UILabel 的子类；我叫我的 AutoLayoutLabel ：

```
@implementation AutoLayoutLabel

- (void)layoutSubviews{
    [self setNeedsUpdateConstraints];
    [super layoutSubviews];
    self.preferredMaxLayoutWidth = CGRectGetWidth(self.bounds);
}

@end 
```

* * *

## 回答 #8

> 赞同：-12
> 
> 时间：2012-10-09T08:35:19.300

一种方法...随着文本长度的增加，尝试使用更改（减小）标签文本的字体大小

```
Label.adjustsFontSizeToFitWidth = YES; 
```

# iphone - 强制自定义相机覆盖的水平方向

> ID：12789019
> 
> 赞同：0
> 
> 时间：2012-10-08T20:29:45.237
> 
> 标签：iphone, objective-c, ios

我正在尝试在我的自定义相机叠加层上强制定向，但我正在努力让它工作，我已经尝试过了，

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);

} 
```

但自从 Xcode 更新到 4.5 版后，这似乎不再起作用。

另外，在单个视图上强制水平方向的正确方法是什么，据我了解，上述不是最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:42:49.740

对于ios6，需要做以下事情。

> *   (BOOL)shouldAutorotate { 返回 YES; }
> 
> -(NSUInteger)supportedInterfaceOrientations { 返回 UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft; }

# ruby - Lookbehind 和 lookahead 正则表达式

> ID：12789023
> 
> 赞同：0
> 
> 时间：2012-10-08T20:30:03.957
> 
> 标签：ruby, regex

我有这样的字符串：

> journals/cl/SantoNR90:::Michele Di Santo::Libero Nigro::Wilma Russo:::Modula-2 中的程序员定义控制抽象

我需要捕获`Michele Di Santo`, `Libero Nigro`，`Wilma Russo`但不是最后一个。

这个正则表达式几乎符合我的需要：

```
/(?<=::).*?(?=::)/ 
```

但它有问题，它捕获了第三个冒号

```
str.scan(/(?<=::).*?(?=::)/) #=> [":Michele Di Santo", ...] 
```

如您所见，第一场比赛的开头有一个冒号。

如何修复此正则表达式以避免第三个冒号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T20:32:39.057

不要为此使用正则表达式。您需要做的就是将输入字符串拆分为`:::`，从结果数组中取出第二个字符串，然后将其拆分为`::`。与正则表达式版本相比，编码速度更快、运行速度更快且更易于阅读。

编辑：代码：

```
str.split(':::')[1].split('::') 
```

在 CodePad 上运行：http: [//codepad.org/1BNNwoh6](http://codepad.org/1BNNwoh6)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T20:47:33.737

这样做的表达式可能是：

```
(?<=::)[^:].*?(?=::) 
```

虽然如果要搜索的字符串始终采用“xxx:::A::B::C:::xxx”的形式并且您只关心 A、B 和 C，请考虑使用更具体的字符串，并使用捕获组以获取 A、B 和 C：

```
:::(.+?)::(.+?)::(.+?)::: 
```

`$1`,`$2`并将`$3`包含组匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:40:31.373

我会使用一个简单`split`的字符串，因为该字符串基本上是一个带有冒号而不是逗号的 CSV：

```
str = 'journals/cl/SantoNR90:::Michele Di Santo::Libero Nigro::Wilma Russo:::Programmer-Defined Control Abstractions in Modula-2'
items = split(':')
str1, str2, str3 = items[3], items[5], items[7]

=> [
      [0] "Michele Di Santo",
      [1] "Libero Nigro",
      [2] "Wilma Russo"
  ] 
```

您还可以使用：

```
str1, str2, str3 = str.split(':').select{ |s| s > '' }[1, 3] 
```

如果可以使用引号冒号，请使用 CSV 模块并将字段分隔符设置为 ':'。

# scrapy - Scrapy 教程异常

> ID：12789024
> 
> 赞同：8
> 
> 时间：2012-10-08T20:30:04.940
> 
> 标签：scrapy

我正在关注[http://media.readthedocs.org/pdf/scrapy/0.14/scrapy.pdf](http://media.readthedocs.org/pdf/scrapy/0.14/scrapy.pdf)上的 Scrapy 教程文档，并且我已经验证了 items.py 和 dmoz_spider.py 的输入（不是剪切和粘贴）正确.

对我来说，第一个“嗯……”部分是这条指令：

> 这是我们第一个蜘蛛的代码；将其保存在 dmoz/spiders 目录下名为 dmoz_spider.py 的文件中

我使用的是最新版本的 Ubuntu，并且没有创建 dmoz 文件夹，所以我将此代码放入 ~/tutorial/tutorial/spiders。（这是我的第一个错误吗？）

所以这是我的 dmoz_spider.py 脚本：

```
from scrapy.spider import BaseSpider

class DmozSpider(BaseSpider):
   name = "dmoz"
   allowed_domains = ["dmoz.org"]
   start_urls = [
    "http://www.dmoz.org/Computers/Programming/Languages/Python/Books/",
    "http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/"
   ]

def parse(self, response):
   filename = response.url.split("/")[-2]
   open(filename, 'wb').write(response.body) 
```

在我的终端我输入

```
scrapy crawl dmoz 
```

我明白了：

```
2012-10-08 13:20:22-0700 [scrapy] INFO: Scrapy 0.12.0.2546 started (bot: tutorial)
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Enabled extensions: TelnetConsole, SpiderContext, WebService, CoreStats, MemoryUsage, CloseSpider
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Enabled scheduler middlewares: DuplicatesFilterMiddleware
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, DownloaderStats
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Enabled item pipelines: 
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2012-10-08 13:20:22-0700 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2012-10-08 13:20:22-0700 [dmoz] INFO: Spider opened
2012-10-08 13:20:22-0700 [dmoz] DEBUG: Crawled (200) <GET http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/> (referer: None)
2012-10-08 13:20:22-0700 [dmoz] ERROR: Spider error processing <http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/> (referer: <None>)
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/twisted/internet/base.py", line 1178, in mainLoop
    self.runUntilCurrent()
  File "/usr/lib/python2.7/dist-packages/twisted/internet/base.py", line 800, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 362, in callback
    self._startRunCallbacks(result)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 458, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 545, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/scrapy/spider.py", line 62, in parse
    raise NotImplementedError
exceptions.NotImplementedError: 

2012-10-08 13:20:22-0700 [dmoz] DEBUG: Crawled (200) <GET http://www.dmoz.org/Computers/Programming/Languages/Python/Books/> (referer: None)
2012-10-08 13:20:22-0700 [dmoz] ERROR: Spider error processing <http://www.dmoz.org/Computers/Programming/Languages/Python/Books/> (referer: <None>)
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/twisted/internet/base.py", line 1178, in mainLoop
    self.runUntilCurrent()
  File "/usr/lib/python2.7/dist-packages/twisted/internet/base.py", line 800, in runUntilCurrent
    call.func(*call.args, **call.kw)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 362, in callback
    self._startRunCallbacks(result)
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 458, in _startRunCallbacks
    self._runCallbacks()
--- <exception caught here> ---
  File "/usr/lib/python2.7/dist-packages/twisted/internet/defer.py", line 545, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "/usr/lib/python2.7/dist-packages/scrapy/spider.py", line 62, in parse
    raise NotImplementedError
exceptions.NotImplementedError: 

2012-10-08 13:20:22-0700 [dmoz] INFO: Closing spider (finished)
2012-10-08 13:20:22-0700 [dmoz] INFO: Spider closed (finished) 
```

在我的搜索中，我看到其他人说可能没有安装 twisted ......但是如果我使用 Scrapy 的 Ubuntu 软件包安装程序，它不会被安装吗？

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T09:52:39.187

BaseSpider 中的 parse 方法被调用而不是您的方法，因为您没有正确覆盖 parse 方法。您的缩进是错误的，因此 parse 被声明为 DmozSpider 类之外的函数。欢迎来到蟒蛇 :)

和twisted无关，我可以看到twisted在tracebacks中，所以很明显是安装的。

# gradle - Gradle + Artifactory 可以支持 5 个组件的版本号吗？

> ID：12789025
> 
> 赞同：1
> 
> 时间：2012-10-08T20:30:06.607
> 
> 标签：gradle, artifactory

我们的内部编号方案对版本号有五个组成部分，例如：`1.22.333.4444.55555`.

Artifactory 支持吗？通过 Gradle？

这是一个类似的[问题](https://stackoverflow.com/questions/12598207/how-to-configure-a-longer-version-number-in-artifactory)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:54:56.353

这真的取决于你所说的“支持”是什么意思。

***它容易实现吗？是的。***因为 Gradle 版本声明是一个简单的**Groovy 字符串变量赋值**，并且 Artifactory 接受所有工件的解析和部署，**而不管它们的路径如何**。

版本方案只有在它不是标准时才会有所不同，您希望 Artifactory 将其识别为有效模块的一部分，并执行除了简单的部署和解析之外的不同操作，这些操作依赖于模块识别；在这种情况下，您可以[“教”](http://wiki.jfrog.org/confluence/display/RTF/Repository+Layouts) Artifactory 如何识别您的布局。

# mysql - 使用 Yii Querybuilder 与编写实际查询

> ID：12789026
> 
> 赞同：0
> 
> 时间：2012-10-08T20:30:06.750
> 
> 标签：mysql, sql, yii

使用 Yii QueryBuilder（或任何其他类型的查询构建器）来构建实际查询而不是仅仅写出查询的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:36:01.017

来自[指南](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)：
当您需要以程序方式或基于应用程序中的某些条件逻辑来组装 SQL 语句时，最好使用查询生成器。使用查询生成器的主要好处包括：

*   它允许以编程方式构建复杂的 SQL 语句。
*   它会自动引用表名和列名，以防止与 SQL 保留字和特殊字符发生冲突。
*   它还引用参数值并尽可能使用参数绑定，这有助于降低 SQL 注入攻击的风险。
*   它提供了一定程度的数据库抽象，简化了向不同数据库平台的迁移。

# django - 重构时的 Django-Mongo 模型默认行为

> ID：12789028
> 
> 赞同：1
> 
> 时间：2012-10-08T20:30:25.933
> 
> 标签：django, mongodb, django-models

我不完全确定这个引擎是如何工作的，但让我设置一个场景。我有一个 Django-Mongo 项目，其中有一个模型类，例如：

```
class BaseModel(models.Model):
    created_at = models.DateTimeField(null=False, auto_now_add=True)
    modified_at = models.DateTimeField(null=False, auto_now=True) 
```

我创建了一堆基础模型，项目中的一切都很可爱，我得到了很多数据。然后，稍后项目增长，我们需要扩展 BaseModel。突然变成：

```
class BaseModel(models.Model):
    created_at = models.DateTimeField(null=False, auto_now_add=True)
    modified_at = models.DateTimeField(null=False, auto_now=True)
    active = models.BooleanField(default=True) 
```

所以我知道 mongo 将允许我在不接触数据库的情况下更改它，但是说我接下来要做的就是执行如下查询：

```
BaseModel.objects.filter(active=True) 
```

我是否应该期望需要使用默认值但尚未访问的旧记录显示在此查询中？还是我需要为查询引擎做任何特定的事情来实现我正在寻找的值与默认值匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:23:40.600

好的，经过反复试验，找到了答案。当 Django 执行查询时，它会查看 Mongo 在数据库中的内容并忽略任何默认设置。但是，当你已经得到一个对象时，Django 会将默认值放入内存中的对象中（而不是在 Mongo 记录中）。

这似乎有点恶心。这意味着，在我们可以查询重构的字段之前，我们需要做一次这样的事情：

```
for mod in BaseModel.objects.all():
    mod.save() 
```

不用说，这可能是一个非常昂贵的查询。值得庆幸的是，它只需要运行一次，但仍然如此。

如果有更好的选择那就太好了。

# java - 如果我在 java 或 cmd 提示符中有该共享驱动器的路径，如何查找共享驱动器 IP 地址

> ID：12789033
> 
> 赞同：0
> 
> 时间：2012-10-08T20:30:54.313
> 
> 标签：java, path, cmd, windows-share

我有一个像这样的路径 Windows 网络共享驱动器。

```
String url="//sample/data/Documents/network/test/"; 
```

如何使用 java 程序或 cmd 提示符使用此路径找到该驱动器的 IP 地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:36:10.510

通过 cmd 提示符，您可以将 IP ping 到“sample”（按照问题中的示例），因为控制台必须将主机名解析为 IP 地址。

通过java，也许`InetAddress.getByName('sample')`可以工作。

所有这一切都假设共享不会超过 NetBIOS 和所有旧的东西。正如评论所说，这不适用于IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:36:49.747

虽然@Greg 是对的，但我认为在大多数情况下，您可以从 URL 中提取主机名，然后使用`InetAddress.getByName()`，即类似于以下内容

```
String host = url.substring(2).replaceFirst("/.*", "");
InetAddress.getByName(host); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T16:48:25.813

打开 windows cmd 提示符，输入 nslookup \network_share_drive_name 它将返回您的网关服务器和网络共享驱动器的名称和地址。在这里你可以输入 nslookup \sample

# java - Java - JSONObject 字符集

> ID：12789034
> 
> 赞同：0
> 
> 时间：2012-10-08T20:31:05.783
> 
> 标签：java, json, utf-8, character-encoding, utf8-decode

我正在使用来自 org.json.* 的 JSONObject

我需要用这样的字符串字段构造 JSONObject

```
field:"englishletters123\u1234\u3456"//UTF-8 encoding 
```

所以，我正在这样做

```
myJSONObject.put("field", myString); 
```

但不是这个，我得到的是带有流利（非英语）字母的对象，而不是它们的 UTF-8 表示。

```
String newString = new String(oldString.getBytes(...), ...);
myJSONObject.put("field", newString); 
```

也不行

有没有办法进行这样的操作？也许我应该使用其他图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:42:36.340

我对那个 JSON 序列化库不太熟悉，但既然你问了，谷歌的 GSON 库就很棒。它通过反射处理几乎所有事情，就像创建一个适合您尝试创建的 JSON 文本描述的对象一样简单。

例如：

```
public class Thing{
    public String field = "whatever you want";
}

Gson gson = new Gson();

String jsonString = gson.toJson(new Thing()); 
```

反序列化也很简单：

```
Thing t = gson.fromJson(jsonString, Thing.class); 
```

当然，图书馆还有很多东西，但这是它的基础。

# forms - symfony propel:form:generate 抛出 ErrorException

> ID：12789040
> 
> 赞同：2
> 
> 时间：2012-10-08T20:31:19.980
> 
> 标签：forms, exception, symfony, propel

我使用 symfony 标准 2.1

我的 composer.json 文件：

```
{
"name": "xxx",

"description": "xxx",
"autoload": {
    "psr-0": {
        "": "src/"
    }
},
"minimum-stability": "dev",
"authors": [
    {
        "name": "xxx",
        "email": "xxx"
    }
],
"require": {
    "php": ">=5.3.2",
    "ext-iconv": "*",
    "ext-intl": "*",
    "igorw/composer-yaml": "dev-master",
    "symfony/symfony": "2.1.*",
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "1.0.*",
    "twig/extensions": "1.0.*",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.1.*",
    "symfony/monolog-bundle": "2.1.*",
    "sensio/distribution-bundle": "2.1.*",
    "sensio/framework-extra-bundle": "2.1.*",
    "sensio/generator-bundle": "2.1.*",
    "jms/security-extra-bundle": "1.2.*",
    "jms/di-extra-bundle": "1.1.*",
    "propel/propel-bundle": "1.1.*"
},
"scripts": {
    "post-install-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap"
    ],
    "post-update-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap"
    ]
},
"config": {
    "bin-dir": "bin"
},
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web"
}
} 
```

[我在http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html](http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html)上安装了推进器

然后我用了命令

> php app/console propel:form:generate @AcmeDemoBundle 图书作者

并引发以下异常：

> [ErrorException] 可捕获的致命错误：传递给 Propel\PropelBundle\Command\AbstractCommand::getSchemasFromBundle() 的参数 1 必须实现接口 Symfony\Component\HttpKernel\Bundle\BundleInterface，给定 null，在 \vendor\propel\propel-bundle\ 中调用Propel\PropelBundle\Command\FormGenerateCommand.php 在第 55 行并在 \vendor\propel\propel-bundle\Propel\PropelBundle\Command\AbstractCommand.php 第 268 行中定义

我已经尝试过几次（创建新项目并遵循 propel 的安装说明）；我还通过安装分支 1.1 的所有标签（一个接一个）来尝试它，但我总是从上面得到 ErrorException。我已经搜索过是否有人有同样的问题，但我没有找到任何人，我也不知道我能做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:46:07.490

你的操作系统是哪个？

如果它的 windows 和你使用 powershell 那么你可能和我有同样的问题。该`@`符号是 powershell 中的运算符（请参阅[Powershell 中的“@”符号有什么作用？](https://stackoverflow.com/questions/363884/what-does-the-symbol-do-in-powershell)）

所以在windows powershell中，必须引用捆绑名称

```
php app/console propel:form:generate '@AcmeStoreBundle' 
```

也许问题也出现在其他操作系统上

官方问题：[https ://github.com/propelorm/PropelBundle/issues/180](https://github.com/propelorm/PropelBundle/issues/180)

# ruby-on-rails - 在 Mac OSX Snow Leopard 上安装 PostgreSQL for Rails 3 - 错误消息

> ID：12789048
> 
> 赞同：3
> 
> 时间：2012-10-08T20:32:12.523
> 
> 标签：ruby-on-rails, macos, postgresql, homebrew

我已经使用 Brew 安装了 PostgreSQL（之前曾尝试使用 PostgreSQL 网站上的独立安装程序进行安装），但是当我尝试捆绑安装时收到以下错误消息：

```
Errno::EACCES: Permission denied - /Users/xxxxx/.rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1/.gemtest An error occurred while installing pg (0.14.1), and Bundler cannot continue. Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

我在 Stackoverflow 上找到了各种潜在的解决方案，但似乎都没有解决这个问题。

`psql --version`返回：9.2.1 `which psql`返回：/usr/local/bin/psql

任何人都认识到这个错误，和/或对如何修复它有任何进一步的想法？

如果做不到这一点，我想我可以在本地坚持使用 SQLite，并在生产环境中使用 PostgreSQL。我假设我需要手动对`database.yml`文件进行以下更改（我即将首次部署）：

```
production:
  adapter: postgresql
  encoding: unicode
  database: myapp_production
  pool: 5
  username: myapp
  password: 
```

而且，在我的 gemfile 中，包括以下内容（请注意，运行 bundle install 返回相同的错误，但因为我假设生产服务器上的 PostgreSQL 安装不会有任何错误，我认为它应该仍然有效？） ：

```
group :production do

  gem 'pg'

end 
```

**编辑：**从头开始，如果 gem 'pg' 包含在 gemfile 中，Webrick 根本不会运行。

**编辑 2：**另外，当我尝试运行 rvmsudo gem install pg 时，我得到了这个：

```
ld: in /usr/local/lib/libssl.0.9.8.dylib, missing required architecture x86_64 in file
collect2: ld returned 1 exit status
make: *** [pg_ext.bundle] Error 1 
```

** 编辑 3：** 承认失败。

嗨伙计，

首先，感谢您的所有帮助。

不幸的是，两天后，我将不得不认输。

无论我尝试哪种方法，无论我使用 EnterpriseDB 版本还是 Homebrew 安装版本的 PostgreSQL，我都无法安装 pg gem。我已经尝试了以下所有方法：

```
install gem pg

sudo install gem pg

rvmsudo install gem pg

sudo env PATH=/library/PostgreSQL/9.2/bin:$PATH gem install pg (when using the EnterpriseDB installer)

rvmsudo env PATH=/library/PostgreSQL/9.2/bin:$PATH gem install pg (ditto)

rvmsudo env PATH=/library/PostgreSQL/9.2/bin:$PATH ARCHFLAGS="-arch x86_54" gem install 
```

我选择上述任何一种方法都会返回以下错误：

```
ld: in /usr/local/lib/libssl.0.9.8.dylib, missing required architecture x86_64 in file 
```

每当我尝试通过捆绑安装安装 gem 时，都会收到以下错误：

```
Errno::EACCES: Permission denied - /Users/xxx/.rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1/.gemtest
An error occurred while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

我不能在这上面花更多的时间，所以我硬着头皮，可能会改用 MySQL。

再次感谢，

格雷姆

****最终编辑 - 已修复！请参阅下面的答案以了解我是如何做到的，因为它可能对其他人有所帮助******

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T17:13:24.767

是的！！！！

对不起，但我想我可能会跳到空中。我*想*我可能已经让它工作了。

万一其他人遇到这个问题，这就是我在 Snow Leopard 上安装 gem 所做的（Lion 的过程可能不同）：

1) 确保卸载任何旧版本的 PostgreSQL - EnterpriseDB 和 Homebrew 版本。对于 EnterpriseDB，请参阅[此 Stackoverflow 问题/答案](https://stackoverflow.com/questions/2715055/how-to-uninstall-postgresql-on-my-mac-running-snow-leopard)，对于 Homebrew，只需执行`brew uninstall postgresql --force`.

2) 执行`brew install postgresql`Homebrew 安装。

3) 现在，问题（正如 Chris Travers 在之前的评论中指出的 - 谢谢 Chris！）似乎是由 OpenSSL 引起的。看来我的版本（我猜是 Snow Leopard 的默认版本，因为直到今天我才听说过）是旧版本，所以我不得不使用 Homebrew 安装更新的版本（我也使用过MacPorts 卸载旧版本 - 不确定在同一台计算机上安装 MacPorts 和 Homebrew 是否合适，但是......）：

1.  麦克波特：`sudo port uninstall openssl`
2.  自制：`brew install openssl`

这应该将 OpenSSL 更新到最新的 64 位版本（我认为？）。

4) 继[另一个 Stackoverflow 帖子之后](https://stackoverflow.com/questions/9846900/trouble-installing-pg-gem)，我执行了以下操作：

```
sudo gem install pg -- --with-ldflags='-L/usr/local/Cellar/openssl/0.9.8s' 
```

成功！这*似乎*奏效了。我仍然需要设置一个新的 Rails 项目来检查所有安装是否正常，但是当我的 Gemfile 中包含 gem 'pg' 时，bundle install 不会导致任何问题，所以手指交叉:-)

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:37:42.713

在我看来，您在安装时缺少有关 OpenSSL（无论是头文件还是其他文件）的内容。我会仔细检查那里的安装。如果不这样做，我建议您考虑禁用此 gem 上的 SSL 支持，但是您这样做。我查看了源代码，它看起来像是针对 libpq 编译的，它可能已经能够链接到 OpenSSL，所以这可能不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T04:48:37.117

这对我有用：

1) 从我的控制台安装 postgres gem

```
brew install postgres
sudo env ARCHFLAGS="-arch x86_64" gem install pg 
```

2）然后在我的 GemFile 中，这样我就可以继续使用 sqlite 进行开发：

```
group :development, :test do
   gem 'sqlite3'
end
group :production do
  gem 'pg'
end 
```**

# c - 即使文件不存在，execvp 也不返回

> ID：12789050
> 
> 赞同：0
> 
> 时间：2012-10-08T20:32:36.923
> 
> 标签：c, execvp

我正在为课堂写一个小shell。我呼吁`execvp`使用非内置命令。在开发它的一段时间内，它以 -1 正常返回，一切正常。但是，现在我可以在 shell 中输入任何内容，它会启动一个进程，该进程会立即以状态 11 终止（SIGSEGV，分段错误）。

Meta：我曾尝试将其缩减为 SSCCE，但没有成功：当我删除 周围的所有内容时`execvp`，它可以正常运行。我很乐意提供完整的源代码，但目前超过 750 行似乎过多。

这是调用 execvp 的函数。

```
void eval(char *cmdline)
{
char **argv = malloc(MAXLINE);
int bg = parseline(cmdline,argv);

if (argv[0] == 0)
{
    free(argv);
    return;
}
if(builtin_cmd(argv) == 0)
{
    pid_t pid;
    sigset_t set, oset;

    /* set mask */
    sigemptyset(&set);
    sigaddset(&set, SIGCHLD);
    sigprocmask(SIG_SETMASK, &set, &oset);

    /* proceed to fork */
    if ((pid = Fork()) == 0)
    {
        app_debug("execvp <%s>", argv[0]);
        setpgid(0,0);
        sigprocmask(SIG_UNBLOCK, &set, &oset);
        execvp(argv[0], argv);
        app_notify("%s command not found.", errno, argv[0]);
        exit(0);
    } else if (pid == -1) {
        app_notify("fork failed");
        return;
    } else {
        addjob(jobs, pid, bg + 1, cmdline);
        sigprocmask(SIG_UNBLOCK, &set, &oset);
        if (bg == 0) {
            app_debug("[%d] (%d) Waiting for %s", pid2jid(pid), pid, cmdline);
            waitfg(pid);
        } else {
            app_notify("[%d] (%d) %s", pid2jid(pid), pid, cmdline);
        }
    }
}
free(argv);
return;
} 
```

这是解析线。

```
int parseline(const char *cmdline, char **argv)
{
static char array[MAXLINE]; /* holds local copy of command line */
char *buf = array;          /* ptr that traverses command line */
char *delim;                /* points to first space delimiter */
int argc;                   /* number of args */
int bg;                     /* background job? */

strcpy(buf, cmdline);
buf[strlen(buf)-1] = ' ';  /* replace trailing '\n' with space */
while (*buf && (*buf == ' ')) /* ignore leading spaces */
buf++;

/* Build the argv list */
argc = 0;
if (*buf == '\'') {
buf++;
delim = strchr(buf, '\'');
}
else {
delim = strchr(buf, ' ');
}

while (delim) {
argv[argc++] = buf;
*delim = '\0';
buf = delim + 1;
while (*buf && (*buf == ' ')) /* ignore spaces */
       buf++;

if (*buf == '\'') {
    buf++;
    delim = strchr(buf, '\'');
}
else {
    delim = strchr(buf, ' ');
}
}
argv[argc] = NULL;

if (argc == 0)  /* ignore blank line */
return 1;

/* should the job run in the background? */
if ((bg = (*argv[argc-1] == '&')) != 0) {
argv[--argc] = NULL;
}
return bg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:48:11.760

在 execvp 之后，`app_notify("%s command not found.", errno, argv[0]);`seg 立即出现故障。它本质上包装了一个 printf 并且在引用的字符串之后应该只有一个参数，因为只有一个替换。

调试的关键是发现`set follow-fork-mode child`gdb。

感谢您的帮助，吉姆等人。

# wpf - 当我使用日历控件选择日期时，为什么要单击两次才能关闭此窗口？

> ID：12789055
> 
> 赞同：0
> 
> 时间：2012-10-08T20:32:52.303
> 
> 标签：wpf, wpf-controls

> **可能重复：**
> [WPF 日历控件按住鼠标](https://stackoverflow.com/questions/6024372/wpf-calendar-control-holding-on-to-the-mouse)

我在 WPF 中创建了一个简单的窗口，其中包含一个日历控件。当我单击日历控件中的日期时，需要单击两次才能关闭窗口。我猜当单击日历时，窗口会以某种方式失去焦点。

如果我在我的操作系统中单击另一个打开的窗口，我可以一键关闭应用程序的窗口。

我尝试连接到日历的`SelectedDatesChanged`属性并调用`this.Focus()`，但没有效果。

当我选择带有日历的日期时，是否有另一种方法可以以编程方式使窗口重新成为焦点？

# python - 消息队列：从某个时间开始获取消息

> ID：12789061
> 
> 赞同：0
> 
> 时间：2012-10-08T20:33:14.077
> 
> 标签：python, rabbitmq, message-queue

我正在实施 Web 服务的规范。我有一个函数`getMessages(time)`，您可以在其中指定时间，并且您会收到自该时间以来返回给您的所有消息。我想使用消息队列（例如 RabbitMQ）来备份此功能，但我不确定您是否可以执行诸如查询队列以获取早于某个日期的消息之类的事情，或者即使这样做是个好主意这样做（我知道同步问题，特别是如果队列与 Web 服务位于不同的服务器上，但这是规范所要求的）

# .net - Lucene .Net SetBoost on Field 不影响结果

> ID：12789063
> 
> 赞同：3
> 
> 时间：2012-10-08T20:33:32.003
> 
> 标签：.net, lucene

在向文档添加字段时，我编写了以下代码来测试 SetBoost 方法。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using Lucene;
using Lucene.Net;
using Lucene.Net.Analysis;
using Lucene.Net.Analysis.Standard;
using Lucene.Net.Documents;
using Lucene.Net.Index;
using Lucene.Net.QueryParsers;
using Lucene.Net.Search;
using Lucene.Net.Store;
using Directory = Lucene.Net.Store.Directory;
using Version = Lucene.Net.Util.Version;

namespace LuceneTest
{
    public class LuceneTest
    {
        static void Main(string[] args)
        {
            var product1 = new Document();
            product1.Add(new Field("Id", "1", Field.Store.YES, Field.Index.NOT_ANALYZED));
            var title1 = new Field("title", "Special One", Field.Store.YES, Field.Index.ANALYZED);
            title1.SetBoost(2f);
            product1.Add(title1);
            product1.Add(new Field("synopsis", "special synopsis", Field.Store.YES, Field.Index.ANALYZED));

            var product2 = new Document();
            product2.Add(new Field("Id", "2", Field.Store.YES, Field.Index.NOT_ANALYZED));
            var title2 = new Field("title", "Special Two", Field.Store.YES, Field.Index.ANALYZED);
            title2.SetBoost(2f);
            product2.Add(title2);
            product2.Add(new Field("synopsis", "special synopsis", Field.Store.YES, Field.Index.ANALYZED));

            var product3 = new Document();
            product3.Add(new Field("Id", "3", Field.Store.YES, Field.Index.NOT_ANALYZED));
            var title3 = new Field("title", "Normal One", Field.Store.YES, Field.Index.ANALYZED);
            title3.SetBoost(2f);
            product3.Add(title3);
            product3.Add(new Field("synopsis", "special synopsis", Field.Store.YES, Field.Index.ANALYZED));

            var product4 = new Document();
            product4.Add(new Field("Id", "4", Field.Store.YES, Field.Index.NOT_ANALYZED));
            var title4 = new Field("title", "Normal Two", Field.Store.YES, Field.Index.ANALYZED);
            title4.SetBoost(2f);
            product4.Add(title4);
            product4.Add(new Field("synopsis", "special synopsis", Field.Store.YES, Field.Index.ANALYZED));

            var product5 = new Document();
            product5.Add(new Field("Id", "5", Field.Store.YES, Field.Index.NOT_ANALYZED));
            var title5 = new Field("title", "Special Three", Field.Store.YES, Field.Index.ANALYZED);
            title5.SetBoost(2f);
            product5.Add(title5);
            product5.Add(new Field("synopsis", "normal synopsis", Field.Store.YES, Field.Index.ANALYZED));

            Directory directory = FSDirectory.Open(new DirectoryInfo(Environment.CurrentDirectory + "\\Lucene"));
            Analyzer analyzer = new StandardAnalyzer();
            var writer = new IndexWriter(directory, analyzer, true, IndexWriter.MaxFieldLength.UNLIMITED);

            writer.AddDocument(product1);
            writer.AddDocument(product2);
            writer.AddDocument(product3);
            writer.AddDocument(product4);
            writer.AddDocument(product5);
            writer.Optimize();
            writer.Close();

            Console.WriteLine("searching...");
            var indexReader = IndexReader.Open(directory, true);
            var indexSearcher = new IndexSearcher(indexReader);

            var booleanQuery1 = new BooleanQuery();
            booleanQuery1.Add(new BooleanClause(new PrefixQuery(new Term("title", "special")), BooleanClause.Occur.SHOULD));
            booleanQuery1.Add(new BooleanClause(new PrefixQuery(new Term("synopsis", "special")), BooleanClause.Occur.SHOULD));

            var booleanQuery2 = new BooleanQuery();
            booleanQuery2.Add(new BooleanClause((Query)booleanQuery1, BooleanClause.Occur.MUST));
            TopDocs results = indexSearcher.Search(booleanQuery2, (Filter)null, 200);
            var hits = results.ScoreDocs;

            foreach (var hit in hits)
            {
                var document = indexSearcher.Doc(hit.doc);
                Console.WriteLine(document.Get("Id") + " " + document.Get("title") + " " + hit.score);
            }
            Console.WriteLine("done...");
            Console.ReadLine();
        }

    }   

} 
```

我正在使用 Lucene 版本 2.9.4.1。我在标题字段上设置了提升。当我在标题和概要字段中搜索术语“特殊”时，我希望产品 1、2 和 5 位于顶部，但我得到以下结果：

```
searching...
1 Special One 1.414214
2 Special Two 1.414214
3 Normal One 0.3535534
4 Normal Two 0.3535534
5 Special Three 0.3535534
done... 
```

产品 5 与产品 3 和 4 的得分相同，尽管它的标题中有“特殊”一词，只是没有概要。

任何帮助或想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:01:48.183

我相信问题在于您正在使用 PrefixQueries。前缀查询被重写为恒定评分查询。您可以自己设置重写方法，例如：

```
PrefixQuery pquery = new PrefixQuery(new Term("title", "special"));
pquery.setRewriteMethod(MultiTermQuery.SCORING_BOOLEAN_QUERY_REWRITE); 
```

或者您可以尝试只使用 TermQuery 而不是 PrefixQuery。无论哪种方式，您都应该看到场级提升生效。

哦，请注意，如果您想了解为什么结果会按原样进行评分，您应该查看[Searcher.explain](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_2/api/core/org/apache/lucene/search/Searcher.html#explain%28org.apache.lucene.search.Query,%20int%29)。评分变得复杂，这是理解和调整它的非常方便的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:59:07.103

在 Lucene In Action, second edition, page 49, section 2.5.2 Boosting fields “但请记住，当您想要更改字段或文档的提升时，您必须完全删除然后阅读整个文档，或者使用 updateDocument方法，它做同样的事情”。

当您使用相同的索引文件进行测试时，我认为您需要在打开索引之前调用 writer.updateDocument。

# c# - 为什么 new FontFamily("Invalid font") 不抛出异常？

> ID：12789064
> 
> 赞同：4
> 
> 时间：2012-10-08T20:33:41.320
> 
> 标签：c#, wpf, fonts, font-family

为什么下面的代码没有抛出异常？

```
FontFamily font = new FontFamily("bla bla bla"); 
```

我需要知道`font`我当前的操作系统中是否存在特定的（作为 FontFamily、FontStyle、FontWeight 的组合...）。我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T21:37:37.107

这是设计使然。程序经常要求机器上不存在的字体，尤其是在远离程序员住所的国家。字体映射器产生一个替代方案。字体替换通常非常普遍。如果您在 Windows 机器上，您现在正在查看 Arial。但是我可以将你好世界粘贴到这篇文章中，你会看到它准确呈现，即使 Arial 没有汉字字形。

所以第一个提示是不要真正担心可用的字体。Windows api 有 EnumFontFamiliesEx() 来枚举可用的字体系列。但这并没有在 WPF 中公开，那里与 OpenType 存在一些摩擦，这是一种与 Windows 集成得相当差的字体标准。当 Adob​​e 参与微软所做的任何事情时，似乎又是一个阴影。

关于 Winforms 的 FontFamily 类的评论有些混乱。在这种情况下实际上是可用的，它的 GetFamilies() 方法返回一个可用系列的数组。但只有 TrueType，而不是 OpenType 字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:40:46.683

你可以使用类`System.Drawing.Text.InstalledFontCollection`

[http://msdn.microsoft.com/en-us/library/system.drawing.text.installedfontcollection.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.text.installedfontcollection.aspx)

WPF 有一个特定于框架的方法`Fonts.SystemFontFamilies`

[http://msdn.microsoft.com/en-us/library/system.windows.media.fonts.systemfontfamilies.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.fonts.systemfontfamilies.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:41:21.690

您可以使用 Fonts.SystemFontFamilies 集合浏览系统上可用的字体 - 使用一些 Linq 来匹配您需要的任何条件；

```
// true
bool exists = (from f in Fonts.SystemFontFamilies where f.Source.Equals("Arial") select f).Any();

// false
exists = (from f in Fonts.SystemFontFamilies where f.Source.Equals("blahblah") select f).Any(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T20:51:11.877

为了回答为什么它不抛出异常的问题，根据[MSDN 上的 FontFamily Constructor，](http://msdn.microsoft.com/en-us/library/2ext31w1%28v=vs.85%29.aspx)直到框架版本 3.5 才添加异常。

我怀疑您的目标是 3.0 或更低版本。

干杯!

# jquery-mobile - Jquery移动对话框关闭到很远

> ID：12789066
> 
> 赞同：1
> 
> 时间：2012-10-08T20:33:58.680
> 
> 标签：jquery-mobile

我目前有一个对话框，允许您下载文件，以及另一个链接（有问题的链接）将用户转移到另一个页面，该页面将您链接到外部 API。

当我弹出对话框时，我可以单击`close`并正确关闭对话框。当我点击外部链接时，页面会正确加载，一切都是如此。

但是，如果我点击后退按钮，它会将`#ui-dialog`has 保留在 URL 中，并且不会将任何内容加载到页面中。

我试图将`changehash`值设置为`false`，但是当我这样做并且如果我关闭对话框时，它会让我在浏览器历史记录中走得太远。

```
$(document).ready(function () {
    VaultManager.GetFolderConent(VaultManager.UserRootFolderGuid, "My Vault");
    $.mobile.changePage.defaults.changeHash = false;
});

function PopDialog() {
    $.mobile.changePage( 'MobileFileOptions.htm', { reverse:false,  transition:'pop', role:'dialog' });
} 
```

而不是`PopDialog()`，我也试过这个：

```
<a href="MobileFileOptions.htm" data-rel="dialog" data-transition="pop"> 
```

这里是`MobileFileOptions.htm`：

```
<div data-role="page">//I have tried data-role="dialog" as well

    <div data-role="header" data-theme="e">
        <h1 id="popupHeader">File</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <div id="divFileName"></div>
        <div id="divFileSize"></div>
        <div id="divFileCreated"></div>
        <ul data-role="listview" data-inset="true">
            <li><a href="javascript:VaultManager.DownloadFile();">Download</a></li>
            <li>
                <a href="BoxManager.aspx" data-rel="external" id="boxLink">
                    Send to Box.NET
                </a>
            </li>
        </ul>
    </div><!-- /content -->
</div> 
```

我在某处遗漏了什么吗？

我是 jQuery Mobile 的新手，所以，我可能犯了一些错误，我无法从文档中获得太多帮助。

# jquery - 从模态提交之前检查选项

> ID：12789069
> 
> 赞同：2
> 
> 时间：2012-10-08T20:34:08.200
> 
> 标签：jquery

我在页面上有一个表单，但是没有提交。有一个使用 colorbox 插件启动模式对话框的链接。提交按钮实际上在那个对话框中。为了让我提交表单，我使用了 delegate() 因为提交按钮没有添加到 DOM，直到模式启动。

我添加了一个必须在提交表单之前选中的复选框，但我认为我遗漏了一些东西，因为无论是否选中，我都无法提交。

这是我的代码

**JS**

```
$('#openModal').colorbox({ 
    html: 'some text <input type="checkbox" name="chk" id="chk"><input id="mySubmit" type="button" value="submit form">' 
});

$('#mySubmit').click(function() {

    if ($('#chk').is(':checked')) {
        $('#myForm').submit();
    } else {
        alert('Must check first...');
    }
}); 
```

**HTML**

```
 <div id="openModal">open modal</div>

</form> 
```

我错过了什么？

更新：有一个失踪的身份证...... dah。感谢@McMaster 抓住它。添加了身份证...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:39:28.080

在这种情况下，您似乎没有委托您的点击事件。

尝试这个

```
$('body').delegate('click' ,'#mySubmit' ,function() {

    if ($('#chk').is(':checked')) {
        $('#myForm').submit();
    } else {
        alert('Must check first...');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:39:34.177

您正在动态添加`input`颜色框中使用的元素。注意从`name`到的变化`id`。

```
$('#openModal').colorbox({
    html: '<input type="checkbox" id="chk" /><input id="mySubmit" type="button" value="...">';
}); 
```

因此你应该使用`on`.

```
$('#mySubmit').on("click", function() {
    if ($('#chk').is(':checked')) {
        $('#myForm').submit();
    } else {
        alert('Must check first...');
    }
}); 
```

# android - Eclipse 中“Android 设备选择器”中的红色“X”

> ID：12789070
> 
> 赞同：1
> 
> 时间：2012-10-08T20:34:28.320
> 
> 标签：android, eclipse, avd

我创建了一个 Android 4.0 AVD。当我启动 AVD 并运行我的应用程序时，4.0 AVD 旁边有一个红色的“X”。当我选择该 AVD 时，它不会安装应用程序。

在我的 AndroidManifest.xml 中，我有`<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>`，我认为这对于 4.0 设备应该没问题（SKD 16 是 4.1）

这是 Android 设备选择器的屏幕截图 ![在此处输入图像描述](../Images/ff3bb19175af88af5db8555f2bc05b88.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:45:49.960

试试这些：

1.  **通过“ adb kill-server** ”和“ **adb start-server** ”让你的 adb 喘口气，看看它是否修复
2.  让eclipse运行按钮，启动你的模拟器而不是手动启动它
3.  使用其他版本的 sdk 重新创建您的 avd 并检查它们是否有效。如果只有版本 4.0 不起作用，我想您必须删除此版本 (4.0) sdk 并从头开始重新安装。

# sdk - 在父项选择上选择项目子项

> ID：12789072
> 
> 赞同：2
> 
> 时间：2012-10-08T20:34:29.520
> 
> 标签：sdk, rally

我正在为 Rally 自定义应用程序实现项目选择器，并希望在从选择器中选择父项时自动选择项目子项。我能够获得要选择的对象的 ObjectID 和 Name，但似乎无法从选择器中选择它们。我尝试使用“fireEvent”方法但没有成功。这是我到目前为止所拥有的：

```
var teamPick = this.down('#filterPanel').add({
    xtype: 'rallymultiobjectpicker',
    id: 'teams',
    modelType: 'project',
    fieldLabel: 'Teams',
    listeners: {
        select: function(field, selected) {
            Ext.create('Rally.data.WsapiDataStore', {
                autoLoad: true,
                fetch: [ 'Name', 'ObjectID' ],
                filters: [
                    { property: 'Parent.ObjectID', value: selected.ObjectID }
                ],
                model: 'Project',
                listeners: {
                    load: function(store, data) {
                        Ext.Array.each(data, function(child) {
                            console.log(child.get('Name')); //Logs the child name
                        });
                    }
                }
            });
        },
        scope: this
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:14:03.827

你用的是2.0p3吗？存在一个已知问题，即在 MultiObjectPicker 中未正确触发事件。这应该在 2.0p4 中解决。我在 2.0p4 应用程序中运行了您的代码，它按预期运行。

作为旁注，您的子项目查询也可以这样编写：

```
filters: [
    { property: 'Parent', value: '/project/' + selected.ObjectID }
] 
```

该组件的 2.0p4 版本还添加了一个名为 selectionchange 的新事件，它为您提供当前选定值的数组（因为它是一个多选选择器）。There are individual select and deselect events that fire when a specific item is selected/deselected.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:45:59.293

我能够在不使用 fireEvent 方法的情况下完成此操作。相反，我使用 getValue 和 setValue 方法并手动将子项目添加到状态：

```
 this.down('#filters').add({
        xtype: 'rallymultiobjectpicker',
        id: 'teams',
        modelType: 'project',
        listeners: {
            blur: function() { this.down('#teams').collapse(); },
            select: function(field, selected) {
                Ext.create('Rally.data.WsapiDataStore', {
                    autoLoad: true,
                    fetch: [ 'Name', 'ObjectID' ],
                    filters: [
                        { property: 'Parent.ObjectID', value: selected.ObjectID }
                    ],
                    model: 'Project',
                    listeners: {
                        load: function(store, data) {
                            var selected = this.down('#teams').getValue();
                            Ext.Array.each(data, function(child) {
                                selected.push(child.data);
                            });
                            this.down('#teams').setValue(selected);
                        },
                        scope: this
                    }
                });
            }
            scope:    this
        }
    }); 
```

# bash - Bash eval 替换 $() 并不总是等效的？

> ID：12789079
> 
> 赞同：12
> 
> 时间：2012-10-08T20:35:11.487
> 
> 标签：bash, eval, substitution, quote

每个人都说 eval 是邪恶的，你应该使用 $() 作为替代。但是我遇到了这样一种情况，即在 $()中对*取消引用的处理方式不同。*

背景是我经常被带有空格的文件路径烧伤，所以喜欢引用所有这些路径。更想知道我所有的可执行文件来自哪里的偏执狂。更偏执，不相信自己，所以喜欢能够显示我将要运行的创建的命令。

下面我尝试使用 eval 与 $() 的变化，以及命令名称是否被引用（因为它*可能*包含空格）

```
 BIN_LS="/bin/ls"
  thefile="arf"
  thecmd="\"${BIN_LS}\" -ld -- \"${thefile}\""

  echo -e "\n    Running command   '${thecmd}'"
  $($thecmd)

          Running command   '"/bin/ls" -ld -- "arf"'
      ./foo.sh: line 8: "/bin/ls": No such file or directory

  echo -e "\n    Eval'ing command  '${thecmd}'"
  eval $thecmd

          Eval'ing command  '"/bin/ls" -ld -- "arf"'
      /bin/ls: cannot access arf: No such file or directory

  thecmd="${BIN_LS} -ld -- \"${thefile}\""

  echo -e "\n    Running command   '${thecmd}'"
  $($thecmd)

          Running command   '/bin/ls -ld -- "arf"'
      /bin/ls: cannot access "arf": No such file or directory

  echo -e "\n    Eval'ing command  '${thecmd}'"
  eval $thecmd

          Eval'ing command  '/bin/ls -ld -- "arf"'
      /bin/ls: cannot access arf: No such file or directory

  $("/bin/ls" -ld -- "${thefile}")

      /bin/ls: cannot access arf: No such file or directory 
```

所以......这令人困惑。除了 $() 构造之外，带引号的命令路径在任何地方都有效吗？一个更短、更直接的例子：

```
$ c="\"/bin/ls\" arf"
$ $($c)
-bash: "/bin/ls": No such file or directory
$ eval $c
/bin/ls: cannot access arf: No such file or directory
$ $("/bin/ls" arf)
/bin/ls: cannot access arf: No such file or directory
$ "/bin/ls" arf
/bin/ls: cannot access arf: No such file or directory 
```

如何解释这个简单的 `$($c)` 案例？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T20:49:46.243

引用单词的使用`"`是您与 Bash 交互的一部分。当您键入

```
$ "/bin/ls" arf 
```

在提示符处或在脚本中，您是在告诉 Bash 该命令由单词`/bin/ls`and组成`arf`，而双引号实际上是在强调这`/bin/ls`是一个单词。

当您键入

```
$ eval '"/bin/ls" arf' 
```

你告诉 Bash 命令由单词`eval`和`"/bin/ls" arf`. 由于 的目的`eval`是假装它的参数是一个实际的人工输入命令，这相当于运行

```
$ "/bin/ls" arf 
```

并`"`像提示一样处理。

请注意，这种伪装是特定于`eval`; Bash 通常不会特意假装某些东西是真正的人工输入的命令。

当您键入

```
$ c='"/bin/ls" arf'
$ $c 
```

被`$c`替换，然后进行*分词*（请参阅[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)[中的第 3.5.7 节“分词”](http://www.gnu.org/software/bash/manual/bashref.html#Word-Splitting)*），因此命令的词是`"/bin/ls"`（注意双引号！）和`arf`. 不用说，这是行不通的。（这也不是很安全，因为除了分词之外，`$c`还会进行文件名扩展等。通常你的参数扩展应该总是用双引号引起来，如果不能，那么你应该重写你的代码所以他们可以。未引用的参数扩展正在自找麻烦。）*

 *当您键入

```
$ c='"/bin/ls" arf'
$ $($c) 
```

这与以前相同，只是现在您还尝试将非工作命令的输出用作*新*命令。不用说，这不会导致非工作命令突然工作。

正如 Ignacio Vazquez-Abrams 在他的回答中所说，正确的解决方案是使用数组，并正确处理引用：

```
$ c=("/bin/ls" arf)
$ "${c[@]}" 
```

它设置`c`为具有两个元素的数组，`/bin/ls`和`arf`，并将这两个元素用作命令的单词。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T20:47:34.297

事实上，它首先没有意义。[请改用数组。](http://mywiki.wooledge.org/BashFAQ/050)

```
$ c=("/bin/ls" arf)
$ "${c[@]}"
/bin/ls: cannot access arf: No such file or directory 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T21:05:06.833

从[bash 的手册页中](http://linux.die.net/man/1/bash)，关于`eval`：

> eval [arg ...]：args 被读取并连接到一个命令中。该命令随后被 shell 读取并执行，其退出状态作为 eval 的值返回。

当`c`定义为`"\"/bin/ls\" arf"`时，外引号将导致*整个事物*作为 的第一个参数进行处理，该参数`eval`应为命令或程序。您需要以`eval`单独列出目标命令及其参数的方式传递参数。

该`$(...)`构造的行为不同于`eval`因为它不是带参数的命令。它可以一次处理整个命令，而不是一次处理一个参数。

关于您原始前提的注释：人们说这`eval`是邪恶的主要原因是因为脚本通常使用它来执行用户提供的字符串作为 shell 命令。虽然有时很方便，但这是一个**主要**的安全问题（通常没有实用的方法在执行字符串之前对其进行安全检查）。`eval`如果您在脚本中使用硬编码字符串，则安全问题不适用，就像您正在做的那样。`$(...)`但是，使用或在脚本内部进行命令替换通常更容易和更干净``...``，没有留下真正的用例`eval`。*

# configuration - 一个 infinispan 的多个 memcached？

> ID：12789084
> 
> 赞同：0
> 
> 时间：2012-10-08T20:35:53.247
> 
> 标签：configuration, memcached, infinispan

Infinispan 了解 memcached 协议。

是否可以在不实际启动多个 infinispan 实例的情况下将多个 infinispan 缓存公开为不同端口上的 memcached 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:43:47.550

目前似乎不可能，而且由于我对 scala 没有那么丰富的经验，因此我无法使其与代码一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T15:58:04.253

不，每个 Infinispan CacheManager/Cache 实例有一个 Memcached 服务器。不过，启动多个 Infinispan 实例应该很容易，有什么问题吗？

# c# - WPF ContentControl 一些不清楚的地方

> ID：12789090
> 
> 赞同：1
> 
> 时间：2012-10-08T20:36:22.410
> 
> 标签：c#, wpf, user-controls

我的解决方案中有一些用户控件，在主窗口中我只是更改 ContentControl 的内容。在一个用户控件中有一个计时器

```
 BringTrinket trincket = new BringTrinket();
    trincket.TrincketBringed += new TrincketBringedEventHandler(trincket_TrincketBringed);
    this.contentSwitcher.Content = new BringTrinket();
    }

    void trincket_TrincketBringed(object sender, TrincketEventArgs e)
    {            
        MessageBox.Show(e.TrincketNumber);
        this.contentSwitcher.Content = new Loading();
    }` 
```

在某些事件后主窗口应该将内容更改为 (new Loading())，没关系！

```
public partial class BringTrinket : UserControl, ISwitchable
{
    public event TrincketBringedEventHandler TrincketBringed;

    private DispatcherTimer timer;

    public BringTrinket()
    {
        InitializeComponent();
        /////////////////////////////////////////////////////////////////////////////
        timer = new DispatcherTimer();
        timer.Interval = new TimeSpan(0, 0, 0, 0, 1800);
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
        /////////////////////////////////////////////////////////////////////////////
    }

    /////////////////////////////////////////////////////////////////////////////
    void timer_Tick(object sender, EventArgs e)
    {
        if (TrincketBringed != null)
        {
            TrincketBringed(this, new TrincketEventArgs("Hello"));
            //TrincketBringed = null;
        }
    } 
```

但是在我在 BringTrinket 中导航 Timer 仍然工作之后，我如何处理该用户控件？（我知道我可以将 TrincketBringed 设置为 null，但计时器仍然可以工作）

我认为不仅计时器，而且用户控件都保留在内存中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:02:45.670

那么，您的问题是如何停止计时器？使用`timer.Stop()`. 顺便说一句，如果您将代码重命名`TricketBringed`为.`Trincket**Brought**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:05:58.027

看起来您的计时器在您的第一个用户控件中。您需要在失去对该对象的引用之前停止计时器，或者更好的是，将计时器移出您的控制范围。

# android - 比较 2 个日期

> ID：12789095
> 
> 赞同：0
> 
> 时间：2012-10-08T20:36:34.620
> 
> 标签：android

> **可能重复：**
> [比较 Java 中的日期](https://stackoverflow.com/questions/2592501/compare-dates-in-java)

我需要比较两个日期 date1 和 date2，条件是：

1.  日期 1 < 日期 2
2.  日期 1 + 14 月 <= 日期 2

对于第一个条件我使用 if(date2.after(date1))

但是第二个我不确定...

我正在使用日历 calendar = Calendar.getInstance(); 日历.setTime(fecha1); calendar.add(Calendar.MONTH, +14); 日期 nuevaFecha1 = (日期) calendar.getTime();

一些想法如何验证这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:42:45.240

尝试这个

```
 Calendar calendar1 = Calendar.getInstance(); 
    calendar1.set(Calendar.YEAR, year);
    calendar1.set(Calendar.MONTH, month );
    calendar1.set(Calendar.DAY_OF_MONTH, day);  

    Calendar calendar2 = Calendar.getInstance(); 
    calendar2.set(Calendar.YEAR, year);
    calendar2.set(Calendar.MONTH, month );
    calendar2.set(Calendar.DAY_OF_MONTH, day); 

    long mills1 = calendar1.getTimeInMillis();
    long mills2 = calendar2.getTimeInMillis();

    if(mills1 > mills2){

    }else{
    } 
```

# r - 如何在 R 中转换字符列

> ID：12789098
> 
> 赞同：2
> 
> 时间：2012-10-08T20:36:52.443
> 
> 标签：r, reshape

使用这样的数据框

```
df <- data.frame(Season=c("1992","1993","1993"),
               Team=c("Man Utd.","Blackburn","Blackburn"),
               Player=c("Peter Schmeichel(42)","Tim Flowers(39)","Bobby Mimms(4)"),
               Order = c(1,1,2)) 
```

我如何做到这一点

```
 1992  Man Utd. Peter Schmeichel(42)     
   1993 Blackburn      Tim Flowers(39)  Bobby Mimms(4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:39:20.147

这是一种选择：

```
library(reshape2)
dcast(df,Season+Team~Order,value.var = "Player") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:40:52.283

这是一个解决方案：

```
library(plyr)
ddply(df, .(Season, Team), summarize, Players = paste(Player, collapse = " "))

#-----
  Season      Team                        Players
1   1992  Man Utd.           Peter Schmeichel(42)
2   1993 Blackburn Tim Flowers(39) Bobby Mimms(4) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T20:43:48.293

坚持使用基础 R，您可以执行以下操作：

```
aggregate(list(Player = df$Player), 
          list(Season = df$Season, Team = df$Team), paste)
#   Season      Team                          Player
# 1   1993 Blackburn Tim Flowers(39), Bobby Mimms(4)
# 2   1992  Man Utd.            Peter Schmeichel(42) 
```

### 更新

从接受的答案中看到您想要的输出后，请注意，这也可以使用 base R 的`reshape()`函数：

```
reshape(df, direction = "wide", idvar=c("Season", "Team"), timevar="Order")
#   Season      Team             Player.1       Player.2
# 1   1992  Man Utd. Peter Schmeichel(42)           <NA>
# 2   1993 Blackburn      Tim Flowers(39) Bobby Mimms(4) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T10:06:50.397

另一种选择是使用`tidyr

```
library(tidyr)
spread(df,Order,Player) 
```

# jquery - 使用Jquery拖放复制原始元素而不删除

> ID：12789100
> 
> 赞同：0
> 
> 时间：2012-10-08T20:37:12.970
> 
> 标签：jquery, drag-and-drop, clone

我有一个小部件，我可以在其中将项目放入容器中。我希望能够将原始元素留在可放置容器之外，以便用户可以将相同的元素拖放到容器中（因此容器可以有多个相同的元素）。我正在使用克隆助手，但不知道如何不删除原始元素。任何帮助表示赞赏。谢谢！下面是我的代码：

```
$(function() {
var $gallery = $( "#gallery" ),
    $trash = $( "#trash" );

$( "li", $gallery ).draggable({
    cancel: "a.ui-icon", 
    revert: "invalid", 
    containment: $( "#demo-frame" ).length ? "#demo-frame" : "document", // stick to demo-frame if present
    helper: "clone",
    cursor: "move"
});

$trash.droppable({
    accept: "#gallery > li",
    activeClass: "ui-state-highlight",
    drop: function( event, ui ) {
        deleteImage( ui.draggable );
    }
});

$gallery.droppable({
    accept: "#trash li",
    activeClass: "custom-state-active",
    drop: function( event, ui ) {
        recycleImage( ui.draggable );
    }
}); 
```

HTML：

```
<div class="demo ui-widget ui-helper-clearfix">

<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">
    <li class="ui-widget-content ui-corner-tr" a href="link/to/trash/script/when/we/have/js/off">
        <h5 class="fpheader">Red</h5>   

    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">Orange</h5>

    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader"Yellow</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">Green</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheaderr">Blue</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">Purple</h5>
    </li>
    <li class="ui-widget-content ui-corner-tr">
        <h5 class="fpheader">White</h5>

    </li>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:44:18.203

克隆助手克隆您正在拖动的元素，以便在拖动时显示。否则，它不会在放置时克隆元素。您需要在放置处理程序中做的是自己克隆元素（您可以使用`ui.draggable`）并将其附加到您的可放置容器。

这是一个例子：

```
$trash.droppable({
    accept: "#gallery > li",
    activeClass: "ui-state-highlight",
    drop: function( event, ui ) {
        var element = ui.draggable.clone().appendTo($(this));
        element.draggable({
            cancel: "a.ui-icon", 
            revert: "invalid", 
            containment: $( "#demo-frame" ).length ? "#demo-frame" : "document", // stick to demo-frame if present
            helper: "clone",
            cursor: "move"
        });
    }
}); 
```

# google-app-engine - 读取应用上传的 XML 文件

> ID：12789106
> 
> 赞同：0
> 
> 时间：2012-10-08T20:37:51.437
> 
> 标签：google-app-engine, gwt

我正在使用 Java、GWT 和 Eclipse。我有一个要解析的静态 XML 文件，以获取将填充列表框和其他信息的某些数据。如何在代码的服务器端和客户端读取静态 XML 文件？我在哪里放置 XML 文件？另外，如果我只希望服务器可以访问它（因为它包含敏感数据），我可以把它放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:55:43.817

如果你只在服务器端需要它，把它放在 /war/WEB-INF 目录下，你可以直接在你的服务器代码中读取它。

如果您需要客户端的文件，则可以使用 DataResource：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#DataResource](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#DataResource)

如果您希望在客户端可以访问此文件，请将其放在 /war 目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:55:52.943

我建议您使用任何好的 XML 解析器解析文件服务器端（例如，请参阅[本教程](http://www.java-samples.com/showtutorial.php?tutorialid=152)）并将生成的数据放入 POJO。对于客户端需要的数据，您可以对服务器进行 RPC 调用以检索先前填充的 POJO。放置 XML 文件以防止其被直接访问的好地方是 webapp 的 WEB-INF 目录下。

# android - 循环结构给出错误的结果

> ID：12789107
> 
> 赞同：0
> 
> 时间：2012-10-08T20:37:58.217
> 
> 标签：android, string, compare

我正在尝试将我的数据库中的项目与 EditText（用户输入）的值进行比较。答案可以有多个答案，以“，”分隔。我首先将它们放入一个字符串数组中，然后将它们与答案进行比较。LevenshteinDistance 检查答案是否更好（[http://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance)）。

```
 userAnswer = etUserAnswer.getText().toString().toLowerCase();
        String[] answers = qAnswer.split(",");

        for (String answer : answers) {
            if (answer.equals(userAnswer)) {
                Toast.makeText(getApplicationContext(), ("Answer Correct"),
                        Toast.LENGTH_SHORT).show();
                tvMessage.setText("You smartass!");
            } else {
                Toast.makeText(getApplicationContext(), ("Wrong"),
                        Toast.LENGTH_SHORT).show();

                points = points - 4;
                String answerGood = answer.toLowerCase();

                LevenshteinDistance lDistance = new LevenshteinDistance();
                int comparisonCheck = lDistance.computeLevenshteinDistance(
                        userAnswer, answerGood);

                if (comparisonCheck == 1) {
                    tvMessage.setText("Almost there, but not quite yet!");

                } else if (comparisonCheck > 1) {
                    tvMessage.setText("Are you serious, totally wrong?!");
                }
            }

        } 
```

假设我在数据库中有一个问题的答案如下：tree,test,radio

我有**两个问题**：

**1.**当我输入“radi”时，它给了我“几乎在那里……”，这很好。如果我输入“tes”，它也应该给我这个，但它给了我“你是认真的，...”行。我想它一直在与上一个比较。

**2.**每次我输入不正确的内容时，我都会得到 -12 而不是 -4。我想这是因为我有三个答案并且它循环了三次..但我不知道如何让它只计算一次..

任何人都可以在路上帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:51:51.443

假设您不需要知道给出最小 Levenshtein 距离的单词，您可以修改循环以仅找到最小距离；

```
userAnswer = etUserAnswer.getText().toString().toLowerCase();
String[] answers = qAnswer.split(",");
LevenshteinDistance lDistance = new LevenshteinDistance();
int minDistance = lDistance.computeLevenshteinDistance(
                    userAnswer, answers[0].toLowerCase());

for (int i = 1; i < answers.length; ++i) {
    minDistance = Math.min(minDistance, lDistance.computeLevenshteinDistance(
                    userAnswer, answers[i].toLowerCase()));
}

if (minDistance == 0) {
    // Correct answer...
} else {
    // Wrong answer...
    points -= 4;
    // etc etc...
} 
```

# iphone - iPhone中的JSON Webservice问题？

> ID：12789108
> 
> 赞同：0
> 
> 时间：2012-10-08T20:38:15.530
> 
> 标签：iphone, ios, json, web-services

目前我在 iPhone 应用程序中工作，使用 JSON 发送请求并获得响应以读取它。

请求（示例网址）：

```
http://www.Genifer.com/index.php?q=api/username-available&username=stephen 
```

我指的是来自浏览器（Firefox）的响应：

```
{"status":true,"result":true} 
```

我在xcode中试过：

```
NSString *urlString = [NSString stringWithFormat:@" http://www.Genifer.com/index.php?"];
        NSString *parameter = [NSString stringWithFormat:@"q=api/username-available&username=stephen"];   

        NSData *parameterData = [parameter dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
        NSURL *url = [NSURL URLWithString:urlString];

        NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];

        [theRequest addValue: @"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
        [theRequest setHTTPMethod:@"POST"];
        [theRequest setHTTPBody:parameterData]; 

        NSURLConnection *connection = [[NSURLConnection alloc] 
                                       initWithRequest:theRequest delegate:self];

        if( connection )
        {
            mutableData = [[NSMutableData alloc] init];
        }
        else 
        {

        } 

-(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)response
{
    [mutableData setLength:0]; 
    NSLog(@"mutableData:%@",mutableData);
}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [mutableData appendData:data];
    NSLog(@"mutableData:%@",mutableData);

}

-(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [mutableData release];
    [connection release];
    return;
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

        NSString *jsonStr = [[NSString alloc] initWithData:mutableData encoding:NSUTF8StringEncoding]; 
        NSLog(@"JSonSTr : %@", jsonStr);

} 
```

回应来了：

```
 JSonSTr : <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我在 Firefox 浏览器中引用请求，得到类似 {"status":true,"result":true} 的响应。但我试图在 xcode 中集成相同的请求，但响应不同，如何解决这个问题？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:48:03.863

你能检查一下吗

```
NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSDictionary *jsonDict = [jsonString JSONValue]; 
```

通过执行以下操作检查字典中弹出的值

```
 NSDictionary *question = [jsonDict objectForKey:@"status"]; 
```

# sql-server - 存储过程不起作用

> ID：12789115
> 
> 赞同：-2
> 
> 时间：2012-10-08T20:38:52.710
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我创建了一个存储过程来根据传递给参数的某些值检索一些详细信息。这需要在存储过程执行的 SQL 之间进行切换。以下是代码：

```
USE [DFS]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[DAFS]
@EmailID Nvarchar(128),
@clientID int,
@userType Varchar(50),
@Success numeric output, 
@msg varchar(100) output  

AS

BEGIN
    if @userType='Normal User'
        IF EXISTS (SELECT 1 FROM dbo.Allcdn 
                    WHERE EmailID = @EmailID AND ClientID = @clientID) 
            begin
                set @Success=0
                set @msg='Carry on ....'
            end
        else
            begin
                set @Success=6  
                set @msg='Not allowed ...' 
            END
        end
    else
        Begin
            IF EXISTS (SELECT 1 FROM dbo.Alcon 
                        WHERE EmailID = @EmailID AND ClientID = @clientID) 
                BEGIN
                    set @Success=0
                    set @msg='Carry on...' 
                END 
            END
        End
    end
END 
```

整个处理基于变量@userType。不知道为什么存储过程没有编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:44:11.510

格式化是您的朋友，只需快速浏览一下，您的 s 似乎就太多了`END`——请参阅[SQL Fiddle with working Demo](http://sqlfiddle.com/#!3/85aff)：

```
CREATE PROCEDURE [dbo].[DAFS]
  @EmailID Nvarchar(128),
  @clientID int,
  @userType Varchar(50),
  @Success numeric output, 
  @msg varchar(100) output  

AS
BEGIN
  if @userType='Normal User'
    IF EXISTS (SELECT 1 FROM dbo.Allcdn 
                WHERE EmailID = @EmailID AND ClientID = @clientID) 
      begin
        set @Success=0
        set @msg='Carry on ....'
      end
    else
      begin
        set @Success=6  
        set @msg='Not allowed ...' 
      END
  else
    Begin
      IF EXISTS (SELECT 1 FROM dbo.Alcon 
                    WHERE EmailID = @EmailID AND ClientID = @clientID)
        BEGIN
          set @Success=0
          set @msg='Carry on...' 
        END 
    END
end 
```

# eclipse - Eclipse 格式化程序不严格？

> ID：12789116
> 
> 赞同：2
> 
> 时间：2012-10-08T20:39:00.710
> 
> 标签：eclipse, code-formatting

我用它来将我的最大线宽设置为 80：

```
org.eclipse.jdt.core/org.eclipse.jdt.core.formatter.lineSplit=80 
```

让我们面对现实吧，Eclipse 的格式化程序**并不**严格。

它的成功率非常高，而且格式确实非常好，但它不是 100% 严格的，有时它会留下 > 80 个字符的行数，因此对于仅`lint`s 并拒绝不*严格*匹配 80 列的代码的项目来说它是无用的限制并要求 Eclipse 代码自动格式化。

这 2 个东西，基于 Eclipse 的格式化和`lint`，只有在成功率为 100% 时才能真正协同工作。如果不是，即使手动更改代码也会在保存时触发“重新格式化/重排”，签入炸弹并拒绝提交。

我无法禁用客户端上的格式，也无法绕过`lint`ing。

有*没有*办法让美妙的 Eclipse 格式化程序 100% 严格？“”之类的东西`considerTheLimitSeriously=true`？

注意：它在方法签名方面非常“不严格”，但不仅如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:57:14.237

抱歉，在行拆分方面，没有办法让格式化程序 100% 严格。根据[JLS 3.8。标识符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)：

> 标识符是 Java 字母和 Java 数字的无限长度序列，其中第一个必须是 Java 字母。

所以有可能有些行*不能*被分割而不会导致编译错误。

您可以做的最好的事情是尽可能严格地设置格式，然后查看代码中的特定行以查看失败的地方。在 Eclipse 主菜单上转到 Window > Preferences，然后转到 Java > Code Style > Formatter 选项卡，然后单击 Edit。在那里您会找到一个换行选项卡，您可以在其中自定义换行规则。

# python - 附加到python中字符串列表中的字符串

> ID：12789117
> 
> 赞同：0
> 
> 时间：2012-10-08T20:39:01.467
> 
> 标签：python

所以我认为这是对一年前关于添加/扩展字符串等问题的回答。

```
s  = 'foo'
s += 'bar'
s += 'baz'

l = []
l.append('foo')
l.append('bar')
l.append('baz') 
```

我的问题是如何将这两个功能结合起来？我会返回：

```
['foo','bar','baz'] 
```

但是如果我想在列表中每个字符串的末尾添加一个字母然后让它返回：

```
['food','bars','bazy'] 
```

这是一件事还是一厢情愿？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T20:41:25.857

我不确定我是否理解。您是否正在寻找这样的东西：

```
first_list = ['foo','bar','baz']
second_list = [x+y for x,y in zip(first_list,'dsy')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:43:13.257

您可以与和`zip()`一起使用。`join()``map()`

```
In [72]: lis=['foo','bar','baz']

In [73]: map("".join,zip(lis,'dsy')) 
Out[73]: ['food', 'bars', 'bazy'] 
```

# java - Perl 脚本不在 Java 中运行

> ID：12789119
> 
> 赞同：1
> 
> 时间：2012-10-08T20:39:12.270
> 
> 标签：java, perl

我正在编写代码以从 java 运行 perl 脚本。我提供给 java 程序的命令通过 shell 工作得很好。但是，当提供给运行时的 exec() 方法时，相同的命令会返回退出代码 2。为什么会这样？

我的代码是：

```
package org.nlp.rishabh;

import java.io.BufferedReader;
import java.io.InputStreamReader;

public class ReferenceExtractor {
public static void main( String[] args ) throws Exception {

    String parscitCommand = "/home/rishabh/Desktop/parscit/bin/citeExtract.pl ";
    String parscitOptions = "-m ";
    String parscitAction = "extract_all ";
    String paperPath = "/home/rishabh/Desktop/aas.txt";
    String xml = null;

    String command = parscitCommand + parscitOptions + parscitAction + paperPath;
    System.out.println( command );

    try {
        Runtime runtime = Runtime.getRuntime();
        Process pr = runtime.exec( command );
//      Process pr = runtime.exec( new String[] { "perl", parscitCommand, parscitOptions, parscitAction, paperPath } );

        BufferedReader reader = new BufferedReader( new InputStreamReader( pr.getInputStream() ) );
        String temp;
        StringBuilder sb = new StringBuilder();

        while ( ( temp = reader.readLine() ) != null ) {
            sb.append( temp );
        }

        xml = sb.toString();

        int returnVal = pr.waitFor();
        System.out.println( returnVal );
    } catch ( Exception e ) {
        e.printStackTrace();
    }

    System.out.println( xml );
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:44:06.577

您的文件在您的桌面上。您可能以某种方式运行 java 代码，使其以另一个用户身份运行，而没有您的桌面权限。

尝试将文件移动到公共位置或检查运行 java 进程的用户（您使用的是像 tomcat 这样的 Web 容器吗？只是通过控制台运行 JVM 实例？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:44:40.197

Perl 脚本不是可执行程序。它是一个脚本 - 只是一个文本文件。当您使用 shell 运行它时，就像 `./myscript.pl`您正在利用以下特性一样`sh`- 解析脚本第一行的 linux shell，提取`!#/bin/perl`并*真正*运行您的脚本，如下所示：

`/bin/perl myscript.pl`

当您从 java 运行 perl 脚本时，您必须执行类似的操作。使用`perl`命令运行脚本或（可能）使用`/bin/sh myscript.pl`. 我不确定最后一个版本是否有效，但请尝试一下。理论上应该。

# playframework-2.0 - Play 2.0.4 / Ebean 2.7.3 - DB主键排序

> ID：12789124
> 
> 赞同：2
> 
> 时间：2012-10-08T20:39:30.397
> 
> 标签：playframework-2.0, ebean

我遇到了 Play Framework 2.0.4 的问题。

我有通过 Ebean ORM 管理的模型。这些模型具有带序列自动生成器的数字主键 ID (int)。底层数据库是 PostgreSQL。

问题是，当我将新对象保存到数据库时，ID 的选择范围是 1 到 20 + 数据库中的最后一个 ID。我从 Play 源中发现，这与数据库批量大小有关。如果我将批量大小更改为 1。一切都应该没问题。我在这里找到了一种如何更改所需值的方法[https://github.com/playframework/Play20/wiki/JavaEbean](https://github.com/playframework/Play20/wiki/JavaEbean)。无论如何，在我的 Ebean 版本（2.7.3）中似乎没有 ServerConfigStartup 接口。可能它是 2.7.5 中的新功能。在我的 Play 版本中忽略了使用 ebean.properties 的另一种方式。

问题是.. 有没有办法改变 Play 2.0.4 中的批量大小.. 或.. 有没有办法强制 Ebean/PostgreSQL 使用增量为 1 的 ID 排序？

# javascript - 轮播使用 ContentFlow.js Javascript

> ID：12789126
> 
> 赞同：0
> 
> 时间：2012-10-08T20:39:43.040
> 
> 标签：javascript, jquery, carousel

我有一个带有 7 张图片的封面流式轮播：

```
<!-- ===== FLOW ===== -->
<div id="contentFlow" class="ContentFlow">
    <!-- should be place before flow so that contained images will be loaded first -->
    <div class="flow">
            <a class="item" href="javascript:void(0);" id="toggle_value1"><img class="content" src="image1.png"/></a>            
            <a class="item" href="javascript:void(0);" id="toggle_value2"><img class="content" src="image2.png"/></a>            
            <a class="item" href="javascript:void(0);" id="toggle_value3"><img class="content" src="image3.png"/></a>            
            <a class="item" href="javascript:void(0);" id="toggle_value4"><img class="content" src="image4.png"/></a>            
            <a class="item" href="javascript:void(0);" id="toggle_value5"><img class="content" src="image5.png"/></a>            
            <a class="item" href="javascript:void(0);" id="toggle_value6"><img class="content" src="image6.png"/></a>            
            <a class="item" href="javascript:void(0);" id="toggle_value4"><img class="content" src="image7.png"/></a>            
    </div>
</div> 
```

它利用这个轮播封面流程：http: [//jacksasylum.eu/ContentFlow/docu.php](http://jacksasylum.eu/ContentFlow/docu.php)

我希望有一个单独的 div 与随当前内容变化的轮播完全分开（点击每个图像）。当前内容是中间最大的内容（参见上面引用的网站）。以下是根据轮播中活动的项目显示和消失的 div。

```
<div id="div1" style="display:none;"></div>
<div id="div2" style="display:none;"></div>
<div id="div3" style="display:none;"></div> 
```

需要帮助概念化我将如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:33:32.707

一个开始的地方是将您的 div (div1, div2, div3) 放在带有类标题的 div 中。contentflow 显示每个活动项目的唯一标题，因此您的 div 的标题将随着活动项目的每次更改而改变（无需显示：无）：

```
<div class="item"> <img class="content" src="someImageFile.jpg"/> 
 <div class="caption">
 <div id="div1">Content1</div>
 <div id="div2">Content2</div>
 <div id="div3">Content3</div>
 </div> </div> 
```

# haskell - Haskell：从一串位中获取一位

> ID：12789128
> 
> 赞同：3
> 
> 时间：2012-10-08T20:39:47.917
> 
> 标签：haskell

所以我使用格雷码生成器来生成所有可能的长度为 6 的位字符串。生成器如下：

```
gray :: Integer -> String
gray n
 | n == 0 = [""]
 | n >  0 = map (++"0") (gray (n-1)) ++
            map (++"1") (reverse (gray (n-1)))

recipes = gray 6 
```

然后，我尝试从这些字符串中的每一个中获取特定位并将该位转换为整数。我正在通过以下方式执行此操作：

```
cost' :: String -> Cost
cost' r i = toInteger( ord ( r!!i ) ) 
```

现在，由于某种原因，这不起作用。无论我使用什么 'i' 值，函数 cost' 将导致 48（如果列表的位置 2 中的位为 0 -> 例如 '100000'）或 49（如果位置 2 中的位列表是 1 --> ex. '101000'）。

为什么会这样对我来说没有任何意义。我的理解是字符串在 Haskell 中存储为列表，并且要从 Haskell 中的列表 'r' 中获取某个元素 'i'，执行 'r! ！一世'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T20:42:14.590

那是因为`ord`返回字符的码位号，`'0'`就是码位48，`'1'`就是码位49。你要使用的函数是[`digitToInt`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Data-Char.html#v:digitToInt)。

# php - 使用 PHP/MYSQL 进入测验中的下一个问题

> ID：12789130
> 
> 赞同：1
> 
> 时间：2012-10-08T20:40:27.470
> 
> 标签：php, mysql

我正在用 php 进行测验，如果他们得到正确答案，我将无法进入下一个问题。我想保持在同一页面上。如果提交了正确答案，我尝试将 1 添加到问题的主键，但这似乎不起作用。

```
 <?php
include('includes/config.inc.php');
?>
<?php  
    if ($_POST==true && array_key_exists('ans', $_POST)){

        $ans = $_POST['ans'];
        $question = $_POST['question'];

        $sql=mysql_query("SELECT * FROM answer WHERE pk_answer = $ans;");
        while($row=mysql_fetch_array($sql)){
            $correct=$row['correct'];   
        }
        echo $correct;
        if ($correct == 1) { 
         echo "You are so cool!!!!";
        } else {
            $msg = "You submitted an incorrect answer. Please try again.";
            $incorrect = $ans;
        }
    }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>G.A.M.E.</title>
<style>
    .incorrect {
        color: #F00;
        font-weight:bold;   
    }
</style>

</head>

<body>

    <h3>ASTM SAFETY QUIZ QUESTION 1</h3>

  <?php
$sql=mysql_query("SELECT * FROM quiz LIMIT 1");
while($row=mysql_fetch_array($sql)){
    $pk_quiz=$row['pk_quiz'];
    $fk_module=$row['fk_module'];
    $fk_task=$row['fk_task'];
    $quiz_benchmark=$row['quiz_benchmark'];
    $question=$row['question'];
?>
  <p><?php echo $question; }?></p>

<form id="quiz" name="form1" method="post" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
<?php  $sql2=mysql_query("SELECT * FROM answer ORDER BY RAND()");
while($row2=mysql_fetch_array($sql2)){
$pk_answer=$row2['pk_answer'];
$fk_quiz=$row2['fk_quiz'];
$answer=$row2['answer'];
$correct=$row2['correct'];
?>

      <input type="radio" name="ans" value="<? echo $pk_answer; ?>" id="RadioGroup1_0" />
      <?php if ($fk_answer =  $pk_quiz) {
                if ($incorrect == $pk_answer) {
                    echo '<span class="incorrect">'.$answer."</span>";
                } else {
                    echo $answer; 
                }
      }}?>
      <input name="question" type="hidden" value="<?php echo $pk_quiz; ?>" />
    <br /><input name="Submit" type="submit" value="submit" />
</p>
</form>

<?php if ($msg == true) { echo $msg; } ?>

</body>
</html> 
```

# c# - 从可观察集合中的当前行设置 VM 中的属性

> ID：12789132
> 
> 赞同：0
> 
> 时间：2012-10-08T20:40:36.890
> 
> 标签：c#, wpf, mvvm

全部 -

我正在尝试根据 Observable 集合中的当前项目（也在 VM 中）在 VM 中设置公共属性。所以本质上 - 我想根据我所在的行将 shadecolor 设置为蓝色或粉红色（参见下面的示例代码）。另请参阅最终结果的图像。

有人可以建议 - 我怎么能做到这一点 - 我真的被这个问题困住了

请参阅下面的示例代码：

模型.cs

```
public class Model
{
    public Employee empdetails { get; set; }
}

public class Employee
{
    public string fname { get; set; }
    public string lname { get; set; }
    public Enum gender { get; set; }
}

public enum gender
{
    Male,
    Female
} 
```

视图模型.cs

```
public class ViewModel
{
    public ObservableCollection<Model> employees {get; set;}
    public myCommand NextCommand { get; set; }
    private Color _shadecolor;

    public Color shadecolor
    {
        get
        {
            return _shadecolor;
        }
        set
        {
            _shadecolor = value;
        }
    }

    public ViewModel()
    {
        employees = new ObservableCollection<Model>()
        {
            #region Populating Emp 1
            new Model()
            {
                empdetails = new Employee()
                {
                    fname = "John",
                    lname = "Smith",
                    gender = gender.Male
                }
            },
            #endregion

            #region Populating Emp 2
            new Model()
            {
                empdetails = new Employee()
                {
                    fname = "Robert",
                    lname = "Ally",
                    gender = gender.Female
                }
            },
            #endregion
        };

        NextCommand = new myCommand(myNextCommandExecute, myCanNextCommandExecute);
    }

    private void myNextCommandExecute(object parameter)
    {

    }

    private bool myCanNextCommandExecute(object parameter)
    {
        return true;
    }
} 
```

查看.xaml

```
<Window x:Class="WpfApplication1.View"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="View" Height="500" Width="500"  WindowStyle="None" AllowsTransparency="True" Background="Transparent">
<Border VerticalAlignment="Top" HorizontalAlignment="Left" BorderBrush="Silver" BorderThickness="2" CornerRadius="15">
    <Border.Background>
        <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.511,0.957">
            <GradientStop Color="LightGray" Offset="0.55" />
            <GradientStop Color="{Binding shadecolor}" Offset="1.3" />
        </LinearGradientBrush>
    </Border.Background>
    <Grid Width="300" Height="300" Margin="3">
        <StackPanel VerticalAlignment="Top" >
            <TextBlock Text="{Binding Path=employees/empdetails.fname}" />
            <Button Command="{Binding NextCommand}" Content="Next" Width="100"></Button>
        </StackPanel>
    </Grid>
</Border>
</Window> 
```

![在此处输入图像描述](../Images/71ea5ecc690d8af7c34e5faeaa25967d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:49:55.230

我相信您想要绑定 SelectedItem={Binding SelectedItem} ，其中 Selected 项目也在视图模型上，作为可观察属性公开。

```
public Model SelectedItem
{
   ...
} 
```

我不完全确定您要在这里实现什么，因为您的 XAML 中没有任何从 Selector 派生的东西，因此这里没有选定项目的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:12:55.093

为什么不使用 ValueConverter？

`<GradientStop Color="{Binding Path=gender, Converter={StaticResource GenderToColorConverter}" Offset="1.3" />`

然后在您的价值转换器中：

```
If value == Gender.Male return blue; 
return pink; 
```

从技术上讲，我认为你返回了一个画笔，但不要引用我的话。

这是一些示例代码：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            this.DataContext = new ViewModel(GetTestEmployees());
        }

        static IEnumerable<Employee> GetTestEmployees()
        {
            return new[]
            {
                new Employee()
                {
                    FirstName = "Tom",
                    LastName = "Selleck",
                    Gender = Gender.Male
                },
                new Employee()
                {
                    FirstName = "Pat",
                    LastName = "Sajak",
                    Gender = Gender.Male,
                },
                new Employee()
                {
                    FirstName = "Mae",
                    LastName = "West",
                    Gender = Gender.Female
                }
            };
        }
    }

    public class ViewModel : INotifyPropertyChanged
    {
        public ViewModel(IEnumerable<Employee> employees)
        {
            _employees = new ObservableCollection<Employee>(employees);
            SelectedEmployee = employees.First();
        }

        ObservableCollection<Employee> _employees;
        public ObservableCollection<Employee> Employees
        {
            get { return _employees; }
        }

        Employee _selectedEmployee;
        public Employee SelectedEmployee 
        {
            get { return _selectedEmployee; }
            set
            {
                _selectedEmployee = value;
                RaisePropertyChangedEvent("SelectedEmployee");
            }
        }

        public void Next()
        {
            var curr = Employees.IndexOf(_selectedEmployee);

            if (curr == -1) throw new ArgumentOutOfRangeException();

            var next  = (curr + 1) % Employees.Count;

            SelectedEmployee = Employees[next];
        }

        ICommand _nextCommand;
        public ICommand NextCommand
        {
            get
            {
                if (_nextCommand == null)
                    _nextCommand = new NextCommand(this);

                return _nextCommand;
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChangedEvent(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public class NextCommand : ICommand
    {
        ViewModel _viewModel;

        public NextCommand(ViewModel viewModel)
        {
            _viewModel = viewModel;
        }

        public bool CanExecute(object parameter)
        {
            //throw new NotImplementedException();

            return true;
        }

        public event EventHandler CanExecuteChanged;

        public void Execute(object parameter)
        {
            //throw new NotImplementedException();

            _viewModel.Next();
        }
    }

    public class Employee
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public Gender Gender { get; set; }
    }

    public enum Gender
    {
        Male,
        Female
    }

    public class GenderToColorConverter : IValueConverter
    {

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            var gender = (Gender)value;

            if (gender == Gender.Male)
            {
                return Colors.Blue;
            }

            return Colors.Pink;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();

}
} 
```

这是相应的标记：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <loc:GenderToColorConverter x:Key="GenderToColorConverter"/>
    </Window.Resources>
    <Grid>
        <ListBox ItemsSource="{Binding Employees}"
                      SelectedItem="{Binding SelectedEmployee}">
            <ListBox.Template>
                <ControlTemplate TargetType="ListBox">
                    <Grid>
                        <ContentControl DataContext="{TemplateBinding SelectedItem}">
                            <StackPanel >
                                <StackPanel.Background>
                                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.511,0.957">
                                        <GradientStop Color="LightGray" Offset="0.55" />
                                        <GradientStop Color="{Binding Path=Gender, Converter={StaticResource GenderToColorConverter}}" Offset="1.3" />
                                    </LinearGradientBrush>
                                </StackPanel.Background>
                                <TextBox Text="{Binding FirstName}"/>
                                <TextBox Text="{Binding LastName}"/>
                            </StackPanel>
                        </ContentControl>
                    </Grid>
                </ControlTemplate>
            </ListBox.Template>

        </ListBox>

        <Button VerticalAlignment="Bottom" HorizontalAlignment="Center" Content="Next" Command="{Binding NextCommand}"/>
    </Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T05:32:35.577

我能够使用 Firoso 提到的方法来实现这个（完全工作的）解决方案（利用 Josh 的最佳实践，将 UI 逻辑排除在 VM 之外）。

发布完整的代码片段/图像以造福他人。

模型

```
public class Model : CommonBase
{
    public Employee empdetails { get; set; }
}

public class Employee : CommonBase
{
    private string _fname;
    public string fname 
    {
        get
        {
            return _fname;
        }

        set
        {
            _fname = value;
            OnPropertyChanged("fname");
        }
    }
    public string lname { get; set; }
    private Enum _gender;
    public Enum gender
    {
        get
        {
            return _gender;
        }
        set
        {
            _gender = value;
            OnPropertyChanged("gender");
        }
    }
}

public enum gender
{
    Male,
    Female
} 
```

视图模型

```
public class ViewModel
{
    public Model employees { get; set; }
    public myCommand NextCommand { get; set; }

    public ViewModel()
    {
        employees = new Model()
        {
            empdetails = new Employee()
            {
                fname = "John",
                lname = "Doe",
                gender = gender.Male
            }
        };

        NextCommand = new myCommand(myNextCommandExecute, myCanNextCommandExecute);
    }

    private void myNextCommandExecute(object parameter)
    {
        employees.empdetails.fname = "Ally";
        employees.empdetails.lname = "Smith";
        employees.empdetails.gender = gender.Female;
    }

    private bool myCanNextCommandExecute(object parameter)
    {
        return true;
    }
} 
```

看法

```
<Window x:Class="WpfApplication1.View"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:loc="clr-namespace:WpfApplication1"
    Title="View" Height="500" Width="500"  WindowStyle="None" AllowsTransparency="True" Background="Transparent">
<Window.Resources>
    <loc:GendertoColorConverter x:Key="GendertoColorConverter"/>
</Window.Resources>
<Border VerticalAlignment="Top" HorizontalAlignment="Left" BorderBrush="Silver" BorderThickness="2" CornerRadius="15">
    <Border.Background>
        <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.511,0.957">
            <GradientStop Color="LightGray" Offset="0.55" />
            <GradientStop Color="{Binding Path=employees.empdetails.gender, Converter={StaticResource GendertoColorConverter}}" Offset="1.3" />
        </LinearGradientBrush>
    </Border.Background>
    <Grid Width="300" Height="300" Margin="3">
        <StackPanel VerticalAlignment="Top" >
            <TextBlock Text="{Binding Path=employees.empdetails.fname}" />
            <Button Command="{Binding NextCommand}" Content="Next" Width="100"></Button>
        </StackPanel>
    </Grid>
</Border> 
```

![在此处输入图像描述](../Images/180336d5aa7eca2176159400a969df4a.png)

# events - 优化更新 ng-model 和 ng-style 焦点的 AngularJS 指令

> ID：12789136
> 
> 赞同：3
> 
> 时间：2012-10-08T20:40:53.537
> 
> 标签：events, focus, blur, angularjs

我是 AngularJS 的新手，我正在制作几个自定义的 Angular 指令来做我以前用 Jquery 做的事情，但是有一种情况我不确定我是否在做“角度方式” ”。它有效，但我认为可能有更好的方法。

我想做的是这个搜索框：

当焦点位于搜索框上时，应用程序必须将框中文本的颜色从灰色更改为黑色。然后应用程序还必须检查框中的当前文本，如果它是默认文本，则应用程序必须清除文本。

当框失去焦点（模糊）时，应用程序必须将框的文本改回灰色。只有当文本框在失去焦点时为空时，它才必须放回默认文本。

这是一个 jsfiddle，它设置了一个指令来完美地完成所有这些工作。 [http://jsfiddle.net/Rick_KLN/5N73M/2/](http://jsfiddle.net/Rick_KLN/5N73M/2/)

但是我怀疑有更好的方法来做到这一点。

似乎控制器中的所有这三个变量都应该是不必要的。我似乎也有 4 个 if，else 语句太多了，并且绑定到所有事件是矫枉过正的，因为只使用了焦点和模糊，并且它们在 if 语句中指定。

有关优化此指令的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:05:20.707

您可以创建一个需要 ng-model 指令的自定义指令，然后在指令的链接函数中提供第四个参数，该参数是对模型的引用。这将允许您观察模型的变化并做出相应的反应。这是小提琴：http: [//jsfiddle.net/brettlaforge/6t39j/3/](http://jsfiddle.net/brettlaforge/6t39j/3/)

```
var app = angular.module('app', []);

app.directive('searchbar', function() {
    return {
        require: 'ngModel',
        link: function(scope, elm, attrs, model) {

            var options = scope.$eval(attrs.searchbar);
            scope.$watch(attrs.ngModel, function(value) {
                // If the input element is currently focused.
                if (!elm.is(":focus")) {
                    // If the input is empty.
                    if (value === undefined || value === "") {
                        // Set the input to the default. This will not update the controller's model.
                        elm.val(options.default);
                    }
                }
            });

            elm.on('focus', function(event) {
                // If the input is equal to the default, replace it with an empty string.
                if (elm.val() === options.default) {
                    elm.val('');
                }
            });

            elm.on('focusout', function(event) {
                // If the input is empty, replace it with the default.
                if (elm.val() === '') {
                    elm.val(options.default);
                }
            });
        }
    };
});

function FormCtrl($scope) {
    $scope.search = "";
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:21:22.550

您正在寻找的“默认文本”行为由 HTML5`placeholder`属性自动处理。[几乎所有现代浏览器](http://caniuse.com/input-placeholder)都支持它，并且可以使用 CSS 设置样式，如下所示：

### 标记：

```
<input id="searchBar" type="text" placeholder="Search" /> 
```

### CSS：

```
#searchBar                                  { color: #858585; }    
#searchBar:focus                            { color: #2c2c2c; }    
#searchBar:focus::-webkit-input-placeholder { color: transparent; }
#searchBar:focus::-moz-placeholder          { color: transparent; }
#searchBar:focus:-moz-placeholder           { color: transparent; }
#searchBar:focus:-ms-input-placeholder      { color: transparent; } 
```

就是这么简单。

* * *

**笔记：**

*   伪元素和伪类 (`-webkit-input-placeholder`等) 将占位符文本隐藏在焦点上。通常它会一直保留到您开始输入。
*   我分叉了你原来的 jsFiddle。它不再是真正的 AngularJS 应用程序了：http: [//jsfiddle.net/Smudge/RR9me/](http://jsfiddle.net/Smudge/RR9me/)
*   *对于较旧的浏览器：*您仍然可以使用与上述相同的代码，但如果不支持该属性，您可以使用 Modernizr（或类似的东西）[回退到仅使用 javascript 的方法。](https://www.google.com/search?q=placeholder+fallback)

# python - 隐藏文件属性

> ID：12789138
> 
> 赞同：2
> 
> 时间：2012-10-08T20:40:57.347
> 
> 标签：python, attributes

在 Python 中，如何隐藏特定文件？或者如何在不使用外部 API/模块（如 WIN32API 等）的情况下将文件属性设置为“隐藏”。

标准库中肯定有一些东西吗？由于该`os`模块确实允许设置“读取”和“写入”属性，因此非常奇怪的是文档中没有提及`os`“隐藏”...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:43:19.240

利用

```
fn = 'c:\\file.txt'
p = os.popen('attrib +h ' + fn)
t = p.read()
p.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:44:18.570

并非所有操作系统*都具有*文件“隐藏”的概念，并且大多数操作系统（即使是所有不同版本的 Windows 7 等。*nix 的形式*仍然*比 Windows 更多）通过具有第一个字符来表示它文件名是句点 ( `.`)。在支持它的操作系统上，*您*必须使用一些外部 API 或工具才能在文件上设置它。

# javascript - 访问对象内的对象属性

> ID：12789141
> 
> 赞同：72
> 
> 时间：2012-10-08T20:41:06.650
> 
> 标签：javascript, object, properties

> **可能重复：**
> [访问同一对象中的 JavaScript 对象文字值](https://stackoverflow.com/questions/12659792/access-javascript-object-literal-value-in-same-object)

首先看下面的 JavaScript 对象

```
var settings = {
  user:"someuser",
  password:"password",
  country:"Country",
  birthplace:country
} 
```

我想将`birthplace`值设置为相同`country`，所以我将对象值`country`放在前面`birthplace`但它对我不起作用，我也使用过`this.country`但它仍然失败。我的问题是如何在对象中访问对象的属性。

一些用户沉迷于询问“您想做什么或发送脚本等”，这些人的答案很简单“我想访问对象内的对象属性”并且上面提到了脚本。

任何帮助将不胜感激 ：）

问候

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-08T20:42:43.770

*使用对象字面*量语法时，您不能在初始化期间引用对象。您需要在创建对象后引用它。

```
settings.birthplace = settings.country; 
```

* * *

在初始化期间引用对象的唯一方法是使用构造函数。

此示例使用匿名函数作为构造函数。新对象是用 引用的`this`。

```
var settings = new function() {
    this.user = "someuser";
    this.password = "password";
    this.country = "Country";
    this.birthplace = this.country;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:42:44.467

您无法访问其自身内部的对象。您可以使用变量：

```
var country = "country";
var settings = {
  user:"someuser",
  password:"password",
  country:country,
  birthplace:country
} 
```

# wpf - 用点替换逗号

> ID：12789143
> 
> 赞同：0
> 
> 时间：2012-10-08T20:41:07.420
> 
> 标签：wpf

我有一个使用实体框架访问数据库的 WPF 应用程序。当用户在绑定到小数字段的价格文本框中键入值并插入逗号时，WPF 会自动将其删除。事实是，在意大利，逗号是小数点分隔符，所以我想留下逗号并用“。”替换它。点字符。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:47:58.617

有两种方法可以解决这个问题，因为 blam 建议您可以将其作为按键事件处理并即时进行转换，或者您可以使用字符串绑定而不是十进制绑定进行输入验证并构建转换层以提供将字符串解释为十进制。

# java - 使用 eclipse jdt/ast 内联 java 代码

> ID：12789147
> 
> 赞同：0
> 
> 时间：2012-10-08T20:41:21.567
> 
> 标签：java, eclipse, abstract-syntax-tree, eclipse-jdt

我正在尝试使用 eclipse jdt/ast 内联 java 方法。

例如，我想做这个代码

```
class Hello {
    static void hello() {
        System.out.println("hello");
    }

    public static void main(String[] args) {
        hello();
        System.out.println("z");
        hello();
        System.out.println("h");
        hello();
    }
} 
```

进入这个。

```
class Hello {    
    public static void main(String[] args) {
        System.out.println("hello");
        System.out.println("z");
        System.out.println("hello");
        System.out.println("h");
        System.out.println("hello");
    }
} 
```

我可以将 hello() 方法的主体块存储在`Block bl`.

我也有 main() 方法的主体块存储在 中`Block block`，我可以删除 hello(); `ExpressionStatement`s 在块中。

然后，我需要将 插入`Block bl`到`hello();`调用的位置。我试过

```
block.statements().add(position, bl.getAST()); 
```

和

```
block.statements().add(position, bl); 
```

where`position`是 statements() 中方法的位置`hello()`，但它们都会引发错误。

可能有什么问题？`Block`照原样，`Statement`我猜一个可以插入`Block`。`Block#statements()`

![在此处输入图像描述](../Images/5b9396fec65cfb7c53cc0c62b537f72f.png)

# 添加

基于sevenforce的回答，我可以插入块，但我已经`{`包含了`}`。

```
class Hello {
    public static void main(String[] args) {
    {
        System.out.println("hello");
    }
    System.out.println("z");
    {
        System.out.println("hello");
    }
    System.out.println("h");
    {
        System.out.println("hello");
    }
    }
} 
```

有什么办法可以去除它们吗？

## 添加2

使用此代码：

```
ASTNode singleStmt = (ASTNode) bl.statements().get(0);
block.statements().add(position, ASTNode.copySubtree(bl.getAST(), singleStmt)); 
```

它仅显示方法中的第一条语句`hello()`。例如，与

```
static void hello() {
    System.out.println("hello");
    System.out.println("hello2");
} 
```

我只`System.out.println("hello");`内联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:06:48.470

`add`抛出异常有几个原因。通常，特定的异常应该给你一个提示。例如要添加的节点必须在同一个`AST`.

在您的情况下，我猜您尝试添加相同的`block`对象，该对象已在`MethodDeclaration`节点中使用，`hello()`并且每个节点只允许有一个父节点。

一个可能的解决方案是复制节点：

```
block.statements().add(position, ASTNode.copySubtree(bl.getAST(), bl)); 
```

* * *

对于提取单个语句，以下应该起作用：

```
ASTNode singleStmt = (ASTNode) bl.statements().get(0);
block.statements().add(position, ASTNode.copySubtree(bl.getAST(), singleStmt)); 
```

* * *

要添加块中的所有语句，您可以循环：

```
for (int i = 0; i < bl.statements().size(); i++) {
     ASTNode singleStmt = (ASTNode) bl.statements().get(i);
     block.statements().add(position + i,
         ASTNode.copySubtree(bl.getAST(), singleStmt));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T06:11:50.533

您可能会考虑替换方法调用，而不是添加到块中。

```
final ASTRewrite rewriter = ASTRewrite.create(compilationUnit.getAST());

rewriter.replace(methodInvocationNode, blockNode, null); 
```

# javascript - 单击功能上的简单Jquery动画位置

> ID：12789151
> 
> 赞同：0
> 
> 时间：2012-10-08T20:41:32.890
> 
> 标签：javascript, jquery, html, css, jquery-animate

我正在尝试将 div 的顶部位置设置为动画 -130px，因此它将移出屏幕。它不工作，我不能锻炼为什么！我显然是一个 jQuery/Javascript 新手。

基本上我有一个 ID 为 #NavShrink 的按钮/超链接，单击此按钮时，我希望 div #Header 向上滑出屏幕 130 像素，将其底部 20 像素留在屏幕上。

没发生什么事！

这是我的代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Title</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
<style type="text/css">
body {
padding:0px;
margin:0px;
font-family: Helvetica, sans-serif;
font-size:11px;
color:#7b7a7a;
}

#Header {
height:150px;
background-color:#f4f4e9;
}

#MainNav {
padding:20px 20px 0px 20px;
width:1140px;
margin-left:auto;
margin-right:auto;
text-align:right;

position:relative;
height:130px;
}

a#NavShrink {
display:block;
width:15px;
height:15px;
background-image:url(../images/ShrinkNav.png);
position:absolute;
bottom:5px;
right:0px;
}

</style>
</head>
<body>
<div id="Wrap">
<div id="Header">
    <div id="MainNav">
            <script language="javascript" type="text/javascript">
            $('#NavShrink').click(function() {
            $('#Header').animate({ top: "-=130px"})
            })
            </script>
            <a href="#Shrink" id="NavShrink"></a>

</div>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:54:24.347

将您的代码包装在文档就绪调用中：

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

或将您的代码放在文档末尾，在结束`</body>`标记之前。在您希望它作用的元素存在之前，您正在执行您的代码。

此外，将您的动画调用更改为`$('#Header').animate({ top: "-=130"})`（无像素），并给出`#Header`一个位置（例如位置：相对）。

这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/mPaTd/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:56:14.190

除了[j08961](https://stackoverflow.com/a/12789326/82548)提出的问题之外，我想，另一个问题是您正在为`top`属性设置动画；这实际上在具有（默认属性）的`div`（或其他元素）中没有任何意义。`position: static``position`

要制作动画，只需分配`position: relative`给相关的`div`.

[JS Fiddle demo](http://jsfiddle.net/davidThomas/K2Jhg/1/)简短，但希望是说明性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:57:45.810

嘿，这就是你要找的东西：http: [//jsfiddle.net/EGc96/](http://jsfiddle.net/EGc96/)

您还可以`.toggle`用于幻灯片效果或 sliup 和 down。

希望它适合原因`:)`

**代码**

```
$('#NavShrink').click(function() {
    $('#Header').animate({
       // top: "-=130",
        height: "-=130"
    });
});​ 
```

# google-maps - 如何使用 Google 地图中的路线 API 从 XML 文件中加载标记

> ID：12789153
> 
> 赞同：0
> 
> 时间：2012-10-08T20:41:39.723
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试从用于输出方向的地图上的 XML 文件加载标记。基本上，它是 Google 文档页面上的两个演示的组合。

路线：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel)

XML： http: [//gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/downloadurl_info.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/downloadurl_info.html)

我首先创建了路线图，然后尝试添加包含标记的 XML 文件。

我可能犯了一个简单的错误，但由于我不擅长 js 和编码，所以找不到什么。没有显示错误，只有一个空白页。

这是我当前的代码：

```
<script>
  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var mapOptions = {
      zoom: 7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: new google.maps.LatLng(41.850033, -87.6500523)
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById('directions-panel'));
    var control = document.getElementById('control');
    control.style.display = 'block';
    map.controls[google.maps.ControlPosition.TOP].push(control);
  }   
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  downloadUrl("http://gmaps-samples-v3.googlecode.com/svn/trunk/xmlparsing/moredata.xml", function(data) {
  var markers = data.documentElement.getElementsByTagName("marker");
  for (var i = 0; i < markers.length; i++) {
    var latlng = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
                                parseFloat(markers[i].getAttribute("lng")));
    var marker = createMarker(markers[i].getAttribute("name"), latlng);
   }
 });

  function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var request = {
      origin: start,
      destination: end,
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

这是（非工作）jsFiddle：http: [//jsfiddle.net/ajJ3u/](http://jsfiddle.net/ajJ3u/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:28:27.993

快速回顾的问题：

1.  您正在创建地图两次。
2.  您没有 createMarker 功能。如果该调用来自其中一个示例，则您错过了将其带到新地图的机会。
3.  downloadUrl 受跨域安全限制。如果您的页面没有在“http://gmaps-samples-v3.googlecode.com”域中运行，它将无法运行。您需要从与页面运行所在的域相同的域访问 xml，或者使用代理。

[来自/到来自 xml 的标记的方向示例（从 Mike Williams 的 v2 教程翻译为 v3](http://www.geocodezip.com/v3_MW_example_map4c.html)

# php - 有代码，但这是什么错误？

> ID：12789154
> 
> 赞同：2
> 
> 时间：2012-10-08T20:41:54.987
> 
> 标签：php

好的，我正在尝试在将文件上传到服务器时对其进行加密。我在 stackoverflow 上找到[了](https://stackoverflow.com/questions/2448256/php-mcrypt-encrypting-decrypting-file/2448441#2448441)代码，但是我在植入它时遇到了问题。我得到了错误 `unexpected '(', expecting ',' or ';' in where/the/file/is.php`。它指向`const KEY = md5('somesecretcode');`线。我知道它是说它期待在 之后的行尾`md5`，但我不知道为什么？您认为它会接受现在“加密”的字符串作为有效字符串。如果需要，我会上传更多代码。提前感谢您的帮助！我对此很陌生，所以请不要太粗鲁。

这是代码

```
<?php

class Encryption
{
const CYPHER = MCRYPT_RIJNDAEL_256;
const MODE   = MCRYPT_MODE_CBC;
const KEY    = md5('somesecretcode');

public function encrypt($plaintext)
{
    $td = mcrypt_module_open(self::CYPHER, '', self::MODE, '');
    $iv = mcrypt_create_iv(mcrypt_enc_get_iv_size($td), MCRYPT_RAND);
    mcrypt_generic_init($td, self::KEY, $iv);
    $crypttext = mcrypt_generic($td, $plaintext);
    mcrypt_generic_deinit($td);
    return base64_encode($iv.$crypttext);
}

public function decrypt($crypttext)
{
    $crypttext = base64_decode($crypttext);
    $plaintext = '';
    $td        = mcrypt_module_open(self::CYPHER, '', self::MODE, '');
    $ivsize    = mcrypt_enc_get_iv_size($td);
    $iv        = substr($crypttext, 0, $ivsize);
    $crypttext = substr($crypttext, $ivsize);
    if ($iv)
    {
        mcrypt_generic_init($td, self::KEY, $iv);
        $plaintext = mdecrypt_generic($td, $crypttext);
    }
    return trim($plaintext);
}
}

?> 
```

我这样称呼它...

```
$encrypted_string = Encryption::encrypt('this is a test'); // Åž-\Ž“kcþ1ÿ4gî:Xƒã%
$decrypted_string = Encryption::decrypt($encrypted_string); // this is a test 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:44:40.350

您不能将函数调用或数组与`const`. 您将不得不找到另一种设置常量的方法（或者只是硬编码 的值`md5('somesecretcode')`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:03:41.923

您不能使用“const”，因为它会在编译时解析，此时函数调用尚不可能。

您可以像这样使用定义功能

```
define('KEY', md5('somesecretcode')); 
```

这是一个函数，在运行时执行并且可以工作。您必须将其放置在可以执行的地方——例如类构造函数。

但是在这种情况下使用 define 并不是一个很好的设计，因为创建类的实例会将一些内容写入全局（或命名空间）范围。

所以你需要重新考虑你的解决方案。如果您坚持保持静态方法调用，也许将秘密作为输入参数传递给函数？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T20:56:56.343

`const`您不应该使用函数来初始化`constructor`.
您可以改为：

```
class Encryption
{
    const CYPHER = MCRYPT_RIJNDAEL_256;
    const MODE   = MCRYPT_MODE_CBC;
    const KEY    = '';

    public function __construct(){
        $this->KEY = md5('somesecretphrase');
    }
... 
```

**更新**：
这不是真的！
尽管这段代码似乎在工作，但它真正做的是创建另一个名为的对象成员`KEY`（即使它没有`$`- 这有点令人困惑）并将其分配给`md5('somesecretphrase')`. 该成员不是常数，可以随时更改。 可以引用
的类成员保持为空！`KEY``self::KEY`

# javascript - 在画布中渲染 mathML 在 Safari 上失败。图片加载回调未触发

> ID：12789160
> 
> 赞同：1
> 
> 时间：2012-10-08T20:42:30.457
> 
> 标签：javascript, canvas, svg, mobile-safari, mathml

我正在尝试将 mathML 渲染到 HTML5 画布中。到目前为止，最好的[建议是将 mathML 作为 SVG 外来对象嵌入，渲染到图像中，然后将图像渲染到画布中。](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)

问题是这种方法在 Firefox 中有效，但在 iPad 上失败。你可以在这里看到一些例子：

> 将 mathML渲染[为 SVG](http://webductive.com/examples/svg.html)。适用于 Firefox 和 iPad。
> 
> [在画布中](http://webductive.com/examples/canvas.html) 渲染mathML 。适用于FF。在 iPad 上失败。
> 
> [画布渲染](http://webductive.com/examples/debug_canvas.html) 的调试版本。绘图延迟到 mouseDown。这允许在 iPad 上使用[firebug lite 。](http://getfirebug.com/firebuglite)

canvas.html 示例中的代码是：

```
<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
        <title>Canvas Test</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.js"></script>
    <script type="text/javascript">

window.addEventListener('load', function () {
    var drawMath = function() {
    // Get the canvas element.
    var elem = document.getElementById('myCanvas');
    var ctx = elem.getContext("2d");
    var data = "<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>" +
            "<foreignObject width='100%' height='100%'>" +
            "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:20px'>" +
        "<math xmlns='http://www.w3.org/1998/Math/MathML' display='block'>" +
        "<mrow>" +
        "<mi _moz-math-font-style='italic'>x</mi>" +
        "<mo>=</mo>" +
        "<mfrac>" +
        "<mrow>" +
        "<mo>&#x2212;</mo>" +
        "<mi _moz-math-font-style='italic'>b</mi>" +
        "<mo>&#xB1;</mo>" +
        "<msqrt>" +
        "<mrow>" +
        "<msup>" +
        "<mi _moz-math-font-style='italic'>b</mi>" +
        "<mn>2</mn>" +
        "</msup>" +
        "<mo>&#x2212;</mo>" +
        "<mn>4</mn>" +
        "<mi _moz-math-font-style='italic'>a</mi>" +
        "<mi _moz-math-font-style='italic'>c</mi>" +
        "</mrow>" +
        "</msqrt>" +
        "</mrow>" +
        "<mrow>" +
        "<mn>2</mn>" +
        "<mi _moz-math-font-style='italic'>a</mi>" +
        "</mrow>" +
        "</mfrac>" +
        "</mrow>" +
        "</math>" +
            "</div>" +
            "</foreignObject>" +
            "</svg>";
    var DOMURL = self.URL || self.webkitURL || self;
    mathimg = new Image();
    var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
    var url = DOMURL.createObjectURL(svg);
    mathimg.src = ""; // Trick from http://code.google.com/p/chromium/issues/detail?id=7731 (Didn't help)
    var drawImg = function() {
        ctx.drawImage(mathimg, 0, 0);
        DOMURL.revokeObjectURL(url);
    };
    mathimg.addEventListener("load", function(e) {
        drawImg();
    }, false);
    mathimg.src = url;
    };
    drawMath();
});
    </script>
  </head>

  <body>
    <canvas id="myCanvas">
      Render some math here
    </canvas>

  </body>
</html> 
```

当您在 Firefox 中运行此代码时，将调用图像加载回调。在 iPad 上，不会调用 load 并且不会渲染任何内容。

我已经尝试了一些事情，包括在设置回调之前明确设置 image.src 的[建议。](http://code.google.com/p/chromium/issues/detail?id=7731)

此外，用计时器（300 毫秒延迟）替换加载回调似乎没有帮助。代码被执行，但仍然没有渲染。由于我的目标平台是 iPad，这是一个严重的障碍。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-25T14:58:38.427

从 {type: "image/svg+xml;charset=utf-8"} 中删除 'charset=utf-8'

```
var svg = new Blob([data], {type: "image/svg+xml"}); 
```

# javascript - Javascript扩展参数传递

> ID：12789162
> 
> 赞同：1
> 
> 时间：2012-10-08T20:42:37.167
> 
> 标签：javascript, node.js

```
var Model = function(client, collection) {
  this.client = client;
  this.collection = collection;
};

Model.prototype = {
  constructor: Model,
  getClient: function(callback) {
    this.client.open(callback);
  },
  getCollection: function(callback) {
    var self = this;

    this.getClient(function(error, client) {
      client.collection(self.collection, callback);
    });
  },
  extend: function(key, fn) {
    var self = this;

    this[key] = function() {
      fn.call(self); // A
    };
  }
}; 
```

我想要实现的是我可以“扩展”模型的功能。

```
var userModel = new Model(client, 'users');
userModel.extend('create', function(data, callback) {
  this.getCollection(function(error, collection) {
    collection.insert(data, { safe: true }, function(error, doc) {
      callback.call(doc);
    });
  });
});

userModel.create({ fullName: 'Thomas Anderson' }, function() {
  console.log(this); // { _id: '123456789012345678901234', fullName: 'Thomas Anderson' }
}); 
```

在 A 的某个地方，我必须进行参数传递，自定义“创建”函数（数据和回调）的参数计数是可变的。

这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:47:04.877

是的！您想使用`.apply`方法而不是`.call`方法。两者都应用上下文，但该`.apply`方法需要一个数组作为参数 - 或参数集合本身！

```
extend: function(key, fn) {
    var self = this;

    this[key] = function() {
      fn.apply(self,arguments); // the special arguments variable is array-like
    };
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:02:14.443

在@zetlen 评论之后还有一件事，函数的范围（this）是函数调用的最后一个点后面的内容，在这种情况下：

```
userModel.create(); 
```

该函数的“this”变量将是“userModel”。

所以只要你用“modelname.functionName()”调用它，你就不需要传递自我：

```
extend: function(key, f) {
    this[key] = f;
} 
```

（要不就）

```
userModel.someMethod = function() { ... }; 
```

然后，当您调用 modelkey 时，您会将参数直接传递给函数，并且您将拥有所需的范围。

```
var userModel = new Model(...);
userModel.extend('hi', function(arg) {
  this === userModel;
  arg === 42;
});
userModel.hi(42); 
```

看看这个小提琴看看它：http: [//jsfiddle.net/NcLQB/1/](http://jsfiddle.net/NcLQB/1/)

但是请记住，如果您取出模型的功能，它将不再具有范围，如果您这样做，您最好像您的代码片段一样继续这样做。

```
var funct = userModel.hi;
funct(); // this === global!!!

// OR

// When the event is fired the scope isn't userModel
otherThing.on('someEvent', userModel.hi); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:08:50.597

除非您有任何隐藏的原因在原型中创建`extend`方法并强制执行范围，否则您可以将方法分配给创建的实例：

```
var userModel = new Model(client, 'users');
userModel.create = function(data, callback) {
  this.getCollection(function(error, collection) {
    collection.insert(data, { safe: true }, function(error, doc) {
      callback.call(doc);
    });
  });
}); 
```

它会更快，更干净，您不必担心通过另一个函数传递参数。

通过封装来强制执行范围（或上下文）并不总是一件好事，因为您正在限制语言的动态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T20:48:57.873

```
 this[key] = function() {
      fn.apply(self, arguments);
    }; 
```

# tridion - SDL Tridion：如何安排页面定期发布？

> ID：12789171
> 
> 赞同：7
> 
> 时间：2012-10-08T20:42:53.253
> 
> 标签：tridion, tridion-2011

我必须安排一个页面每周自动发布一次。如果盒子功能可以安排它，我看不到任何结果。如何使用 SDL Tridion 2011 API 实现这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T02:35:46.027

最好的办法是编写一个使用 SDL Tridion Core Service 的小型命令行或 power shell 脚本，然后使用 Windows 任务计划程序安排它运行。一旦你创建了一个核心服务客户端（[这里有很多关于 SO 的例子](https://stackoverflow.com/search?q=tridion%20core%20service)），你就可以调用 publish 方法，如下所示：

```
_client.Publish(pageId, publishInstruction, targets, priority, readOptions); 
```

如果您需要更多详细信息，请从以下 URL 下载 CoreService API 并搜索“ICoreService2011.Publish”：

[https://www.sdltridionworld.com/downloads/documentation/SDLTridion2011SP1/index.aspx](https://www.sdltridionworld.com/downloads/documentation/SDLTridion2011SP1/index.aspx)

# c# - 在不同的线程中更新我的标签并等待结果

> ID：12789179
> 
> 赞同：0
> 
> 时间：2012-10-08T20:43:36.293
> 
> 标签：c#, winforms

在我的应用程序中，我正在启动进程（Tshark）并开始捕获，在完成捕获后，我正在检查创建的文件并从进程输出中解析接收到的数据包的数量以更新我的 UI。在这一点上，如果创建的文件很大，所有的 UI 都会卡住，直到收到的数据包数量的结果，所以我想在不同的线程中执行它。

```
Capinfos capInfo = new Capinfos(); //my class who return the number of packets
ThreadStart tStarter = delegate {label.Text = capInfo._numberOfPackets.ToString("#,##0"); };
Thread thread = new Thread(tStarter);
thread.IsBackground = true;
thread.Start(); 
```

此代码返回一个跨线程错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:48:09.537

你做错了。您应该在不同的线程中执行数据包捕获，仅访问 UI 线程中的 UI 元素。

有很多不同的方法可以做到这一点。最常见的可能是：

*   您可以在需要时使用`Control.Invoke`和`Control.BeginInvoke`编组回 UI 线程
*   你可以使用`BackgroundWorker`which 为你做一些事情；您将连接进度报告事件以从正确的线程更新 UI
*   如果您使用 C# 5 和 .NET 4.5，您可以使用 async/await 在单个异步方法中自动返回 UI 线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:51:21.867

您似乎正在尝试使用 UI 线程 ( `label.Text = ---`) 以外的线程更新 UI。我认为这可能就是问题所在。您可以使用`Task`s 来实现异步。您可以使用`Task`'`ContinueWith`方法等待任务完成，然后再使用`BeginInvoke`. [http://msdn.microsoft.com/en-us/library/dd235678.aspx](http://msdn.microsoft.com/en-us/library/dd235678.aspx)

# sql-server-2008 - 将变量值从控制流传递到 SSIS 中的数据流

> ID：12789182
> 
> 赞同：2
> 
> 时间：2012-10-08T20:43:49.370
> 
> 标签：sql-server-2008, ssis, business-intelligence

我有一个相当简单的 SSIS 包，我无法成功地将包范围变量的值从控制流传递到数据流任务。考虑下图：

![控制流](../Images/97d70795f8d86a9612efaf02815d80a5.png)

执行 SQL 任务从“机器”列表中获取值。这用于控制一个 ForEach 循环容器，效果很好。接下来，脚本任务执行一些数学运算并将单个数字分配给包作用域变量（整数类型）。我添加了在循环期间弹出的消息框，以便我可以验证此变量的值是否设置正确。

最后一个图标是我想在其中使用变量值的数据流。我有一个简单的脚本任务，它只包含一个消息框，向我显示同一变量的当前值。每次，变量都是我最初在设计器（BIDS）中设置的值。因此，该值不会“传递”到数据流。我已经多次验证变量的名称是正确的（包括区分大小写的值）。

这应该很简单，我对这个问题感到沮丧。我将不胜感激和建议或意见。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:32:02.533

您如何从脚本任务中设置包变量？它应该看起来像这样（c#）：

```
DTS.Variables["testVariable"].Value = "some value"; 
```

然后从数据流任务中的脚本组件对其进行测试：

```
public override void PostExecute()
{
    base.PostExecute();

    MessageBox.Show(Variables.testVariable, "test");
} 
```

我在一个测试包中做了这个，它工作得很好。

编辑

还要确保将变量添加到脚本任务属性的 ReadWriteVariables 部分。

# php - Node.js 套接字的 php 的 fgetc() 等价物是什么？

> ID：12789183
> 
> 赞同：3
> 
> 时间：2012-10-08T20:43:54.077
> 
> 标签：php, node.js

php 中 fgetc() 函数的 Node.js 等价物是什么？我将如何将它应用于套接字？

我正在处理这个 php 脚本的 node.js 端口： [http ://code.google.com/p/bf2php/source/browse/trunk/rcon/BF2RConBase.class.php](http://code.google.com/p/bf2php/source/browse/trunk/rcon/BF2RConBase.class.php)

基本上它使用套接字连接到基于战地 2 的游戏服务器。我正在查看的功能是：

```
protected function read($bare = false) {
    $delim = $bare ? "\n" : "\x04";
    for($buffer = ''; ($char = fgetc($this->socket)) != $delim; $buffer .= $char);
    return trim($buffer);
} 
```

它应该直接从套接字（根据我收集的内容）抓取第一行，直到'\ n'为止。我假设输出用于获取加密盐。该函数在套接字连接事件中被调用，作为生成登录所需的加密密码的代码的一部分。谁能告诉我这个函数的 Node.js 等价物可能是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:53:50.807

[文档](http://nodejs.org/api/net.html#net_net_createconnection_options_connectionlistener)有一个很好的例子来说明如何通过网络连接到服务器。

```
var net = require('net');
var client = net.connect({port: 8124},
    function() { //'connect' listener
  console.log('client connected');
  client.write('world!\r\n');
});
client.on('data', function(data) {
  console.log(data.toString());
  client.end();
});
client.on('end', function() {
  console.log('client disconnected');
}); 
```

只需更改`data`事件处理程序以缓冲传入数据，直到您收到所需的信息。

为此，您需要知道如何使用[`Buffer`](http://nodejs.org/api/buffer.html).

* * *

这是一个具体示例，说明如何缓冲流中的数据并解析由特定字符分隔的消息。我在链接的 PHP 中注意到，您尝试实现的协议使用 EOT (0x04) 字符分隔消息。

```
var net = require('net');

var max = 1024 * 1024 // 1 MB, the maximum amount of data that we will buffer (prevent a bad server from crashing us by filling up RAM)
    , allocate = 4096; // how much memory to allocate at once, 4 kB (there's no point in wasting 1 MB of RAM to buffer a few bytes)
    , buffer=new Buffer(allocate) // create a new buffer that allocates 4 kB to start
    , nread=0 // how many bytes we've buffered so far
    , nproc=0 // how many bytes in the buffer we've processed (to avoid looping over the entire buffer every time data is received)
    , client = net.connect({host:'example.com', port: 8124}); // connect to the server

client.on('data', function(chunk) {
    if (nread + chunk.length > buffer.length) { // if the buffer is too small to hold the data
        var need = Math.min(chunk.length, allocate); // allocate at least 4kB
        if (nread + need > max) throw new Error('Buffer overflow'); // uh-oh, we're all full - TODO you'll want to handle this more gracefully

        var newbuf = new Buffer(buffer.length + need); // because Buffers can't be resized, we must allocate a new one
        buffer.copy(newbuf); // and copy the old one's data to the new one
        buffer = newbuf; // the old, small buffer will be garbage collected
    }

    chunk.copy(buffer, nread); // copy the received chunk of data into the buffer
    nread += chunk.length; // add this chunk's length to the total number of bytes buffered

    pump(); // look at the buffer to see if we've received enough data to act
});

client.on('end', function() {
    // handle disconnect
});

client.on('error', function(err) {
    // handle errors
});

function find(byte) { // look for a specific byte in the buffer
    for (var i = nproc; i < nread; i++) { // look through the buffer, starting from where we left off last time
        if (buffer.readUInt8(i, true) == byte) { // we've found one
            return i;
        }
    }
}
function slice(bytes) { // discard bytes from the beginning of a buffer
    buffer = buffer.slice(bytes); // slice off the bytes
    nread -= bytes; // note that we've removed bytes
    nproc = 0; // and reset the processed bytes counter
}

function pump() {
    var pos; // position of a EOT character

    while ((pos = find(0x04)) >= 0) { // keep going while there's a EOT (0x04) somewhere in the buffer
        if (pos == 0) { // if there's more than one EOT in a row, the buffer will now start with a EOT
            slice(1); // discard it
            continue; // so that the next iteration will start with data
        }
        process(buffer.slice(0,pos)); // hand off the message
        slice(pos+1); // and slice the processed data off the buffer
    }
}

function process(msg) { // here's where we do something with a message
    if (msg.length > 0) { // ignore empty messages
        // here's where you have to decide what to do with the data you've received
        // experiment with the protocol
    }
} 
```

完全未经测试，因此可能存在错误。这里要收集的主要内容是，当数据到达时，您将其缓冲在内存中。在缓冲区中找到分隔符后，您可以处理该消息。

# c# - SPListItem.Update 为 Forms 认证用户抛出 UnauthorizedAccessException

> ID：12789185
> 
> 赞同：0
> 
> 时间：2012-10-08T20:44:06.017
> 
> 标签：c#, asp.net, sharepoint-2007, moss2007-security

我正在尝试修复一些将项目插入 SharePoint 列表的代码（我没有编写）。问题是代码适用于匿名用户，但如果用户通过 ASP.NET 表单身份验证登录，则在调用 SPListItem 的 Update 方法时会收到 UnauthorizedAccessException。当它工作时，作为匿名用户，我可以看到 SPListItem 的 SPWeb 的 SPUser 是 SharePoint 系统帐户。但是当用户使用表单身份验证登录时，SPUser 为空。有人可以解释这种行为以及如何解决它吗？

最初只有最上面的代码块位于 RunWithElevatedPrivileges 委托中，但我尝试将其全部移到内部。一旦我开始工作，我将插入一些 using 块：

```
SPSecurity.RunWithElevatedPrivileges(delegate()
        {
            rootWeb = SPContext.Current.Site.RootWeb;
            rootWeb.AllowUnsafeUpdates = true;
            currentWeb = SPContext.Current.Web;
            currentWeb.AllowUnsafeUpdates = true;

        try
        {
            // Get site information
            SPList franDir = rootWeb.GetList("/Lists/Directory");
            SPQuery query = new SPQuery();
            query.Query = "<Where><Eq><FieldRef Name='Subsite'/><Value Type='Text'>" + currentWeb.Name +
                 "</Value></Eq></Where>";

            SPListItemCollection items = franDir.GetItems(query);

            SPList l = rootWeb.GetList("/Lists/Request");

            SPListItem li = l.Items.Add();
            li["Location"] = siteName;
            //...set more fields

            li.Update();

        }
        catch (Exception ex)
        {
            rootWeb.Dispose();
            logger.ErrorException("An error occured adding item", ex);
            throw ex;
        }

        rootWeb.Dispose();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:41:38.443

感谢@AlexeiLevenkov，我发现这不起作用，因为我使用的是使用默认权限创建的 SP 对象的现有实例。作为代码什么都不做的证明，当以匿名用户身份运行时，即使没有 RunWithElevatedPrivileges 调用，代码也会成功。我做了这个改变，它照顾它。

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
     rootWeb = new SPSite(SPContext.Current.Site.ID).RootWeb; 
```

非常感谢！

# .net - 为什么 WinRT 框架程序集与其（不同的）非 WinRT 对应项具有相同的完全限定名称？

> ID：12789191
> 
> 赞同：13
> 
> 时间：2012-10-08T20:44:18.793
> 
> 标签：.net, windows-8, assemblies, windows-runtime, .net-4.5

这实际上只是一个好奇心类型的问题。我处理在程序集和原始 IL 中查找类型。不过，Windows 8 确实对我正在实施的某些东西产生了影响。我发现 WinRT 和非 WinRT 框架程序集共享相同的完全限定名称。

因此，不可能客观地判断一个程序集是依赖于框架程序集的 WinRT 还是非 WinRT 版本（是的，可以同时使用两者）。这些程序集在布局和实现的类型方面有很大不同。

为什么他们在构建 WinRT 程序集时不更改公钥令牌或版本号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T10:21:22.590

WinRT 有一组投影，其中一个旨在将 winrt apis 投影为“.net 框架”友好的方式，另一个投影用于 Cpp 和 html/js 堆栈。

事实上，如果有人想创建新的预测来支持其他语言和框架，他们可以做到。

让事情看起来像 .net 框架有一组重要的目的：

已经知道.net开发的第一手开发者不需要从头开始，winrt看起来很像一个普通的.net框架程序。

然后存在许多独立于平台的 .net 框架代码，因此可以在任何支持框架核心例程子集的任何环境中重新编译或重用该代码，这是一个关键主题，因为这提供了一种简化的方式来给 .net .net 开发人员的功能。

最后但并非最不重要的一点是，当前的 .net 开发人员创建了大量代码，微软在创建“.net”投影时的一项承诺是提供与已创建的 .net 例程的一些兼容性，这就是解释，因为一些程序集包含一些存根和签名看起来像 .net 框架对应物。

它们是参考程序集，这意味着类似于“代理程序集”。代理必须在某种程度上看起来像真实对象，但不是真实对象的完整图像。您必须清楚 Winrts .net 投影与完整的 .net 参考程序集无关，WinRT 中没有 .net 框架，只是功能的一小部分。这就是原因，因为您没有所有类型，当然您也没有所有方法或属性。

没有其他产品，我的意思是没有其他框架或其他程序集做同样的事情，只是元数据的代理。不是其他 .Net Fx 版本，绝对不是。是为在运行时和其他跨越某些平台边界的其他程序之间建立桥梁而创建的程序集。所以我认为使用相同名称设置 FQN 是完全可以接受的，因为在将来的版本中可能存在另一个指向另一个 .net fx 版本的引用程序集。我相信使用相同的名称和版本是了解您引用的 .net fx 程序集的快捷方式，顺便说一句，保留程序集名称“兼容层”

# sqlite - Sqlite 查询用另一个表中的列替换列

> ID：12789192
> 
> 赞同：1
> 
> 时间：2012-10-08T20:44:33.520
> 
> 标签：sqlite

我有 2 个表，一个正在索引另一个。

我正在查询 Table#1，它有一列（字符串），其中的 ID 对应于 Table#2 中的唯一行。我试图在 Sqlite 中编写一个查询，如果 Table#1 中的列值不是空字符串，则允许我从 Table#2 中检索值。

有点像：

```
"SELECT TMake,TModel,TTrim,IYear,[%q] AS TPart1 FROM AppGuide WHERE TPart1 != ''" 
```

但不是检索索引值 (TPart1)，而是想从 Table#2 中获取字符串。

这可能吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:39:27.093

您可以使用相关子查询：

```
SELECT TMake,
       TModel,
       ...,
       (SELECT stringvalue
        FROM Table2
        WHERE Table2.ID = Table1.TPart1)
FROM Table1
WHERE Table1.TPart1 != '' 
```

但是，这些执行起来相当慢，因此您最好使用连接（这将返回完全相同的结果）：

```
SELECT Table1.TMake,
       Table1.TModel,
       ...,
       Table2.stringvalue
FROM Table1 LEFT JOIN Table2 ON Table1.TPart1 = Table2.ID
WHERE Table1.TPart1 != '' 
```

如果您不想从中获取`Table1`没有匹配`Table2`记录的记录，请删除`LEFT`.

# azure - Azure 表存储访问时间 - 从插入/读取

> ID：12789193
> 
> 赞同：4
> 
> 时间：2012-10-08T20:44:34.660
> 
> 标签：azure, insert, storage, import-from-csv

我正在制作一个程序来存储和读取一些存储在 CSV 文件中的 Azure 表。我得到的是 CSV 文件，它可以有不同数量的列，并且在 3k 到 50k 行之间。我需要做的是在 Azure 表中上传该数据。到目前为止，我设法上传数据并检索它。我正在使用 REST API，为了上传，我正在创建 XML 批处理请求，每个请求有 100 行。现在效果很好，只是上传时间太长了，例如。对于 3k 行，大约需要 30 秒。有什么办法可以加快速度吗？我注意到处理响应（对于`ReadToEnd()`命令）需要大部分时间。我在某处读到将代理设置为 null 可能会有所帮助，但在我的情况下并没有多大作用。

我还在某处发现可以将整个 XML 请求上传到 blob，然后从那里执行它，但我找不到任何这样做的示例。

```
 using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(content, 0, content.Length);
        }

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse()) 
        { 
            Stream dataStream = response.GetResponseStream();
            using (var reader = new StreamReader(dataStream))
            {
                String responseFromServer = reader.ReadToEnd();
            }
        } 
```

至于从 azure 表中检索数据，我设法为每个请求获取 1000 个实体。至于那个，3k 行的 CS 大约需要 9 秒。从流中读取也需要大部分时间。当我调用这部分代码时（再次`ReadToEnd()`）：

```
 response = request.GetResponse() as HttpWebResponse;
        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
        {
             string result = reader.ReadToEnd();
        } 
```

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:12:14.757

正如您所提到的，您使用的是 REST API，您可能必须编写额外的代码并依赖您自己的方法来实现与使用客户端库不同的性能改进。在您的情况下，最好使用存储客户端库，因为您可以使用已经构建的功能来加速插入、更新插入等，如此[处](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/09/15/windows-azure-tables-introducing-upsert-and-query-projection.aspx)所述。

但是，如果您使用的是存储客户端库和 ADO.NET，则可以使用下面由 Windows Azure Table 团队编写的文章作为提高 Azure 访问性能的受支持方式：

[Windows Azure 表的 .NET 和 ADO.NET 数据服务性能提示](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/d84ba34b-b0e0-4961-a167-bbe7618beb83/)

# java - 为什么这个 java 计时器示例永远不会结束

> ID：12789199
> 
> 赞同：1
> 
> 时间：2012-10-08T20:44:43.997
> 
> 标签：java, timertask

我正在寻找一个 Java 计时器示例，并在 [http://www.javaprogrammingforums.com/java-se-api-tutorials/883-how-use-timer-java.html找到了以下代码](http://www.javaprogrammingforums.com/java-se-api-tutorials/883-how-use-timer-java.html)

但是，如果您运行该示例，尽管它确实打印 Timer stop now... 它不会返回到命令提示符。这至少是我使用 cmd.exe 在我的 Windows XP 机器上发生的情况。

为什么在这种情况下它不将控制权返回到提示符？

```
import java.util.Timer;
import java.util.TimerTask;

public class TimerSample {

    public static void main(String[] args) {
        //1- Taking an instance of Timer class.
        Timer timer = new Timer("Printer");

        //2- Taking an instance of class contains your repeated method.
        MyTask t = new MyTask();

        //TimerTask is a class implements Runnable interface so
        //You have to override run method with your certain code black

        //Second Parameter is the specified the Starting Time for your timer in
        //MilliSeconds or Date

        //Third Parameter is the specified the Period between consecutive
        //calling for the method.

    timer.schedule(t, 0, 2000);

    }
}

class MyTask extends TimerTask {
    //times member represent calling times.
    private int times = 0;

    public void run() {
        times++;
        if (times <= 5) {
            System.out.println("I'm alive...");
        } else {
            System.out.println("Timer stops now...");

            //Stop Timer.
            this.cancel();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:49:59.930

它不会返回到您的命令提示符，因为它不应该这样做。Timer 创建单个非守护线程来运行所有任务。除非您提出要求，否则它不会终止线程。当您执行`task.cancel()`方法时，您只是取消当前任务，而不是整个计时器仍处于活动状态并准备执行其他操作。

要终止计时器，您应该调用它的`stop()`方法，即`timer.stop();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:50:03.723

在实际程序中，您将保留计时器对象的副本，并且当要关闭例如程序时执行 timer.cancel()。

对于这个简单的例子，我在 timer.schedule(t, 0, 2000); 之后添加了下面的代码。

```
try {
   Thread.sleep(20000);
    } catch(InterruptedException ex) {
    System.out.println("caught " + ex.getMessage());
    }

    timer.cancel();

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:01:46.413

您需要使用计时器显式终止计时器。[取消（）](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html#cancel%28%29)，例如：

```
class MyTask extends TimerTask {
 private int times = 0;
 private Timer timer;

 public MyTask(Timer timer) {
    this.timer = timer;
 }

 public void run() {
    times++;
    if (times <= 5) {
        System.out.println("I'm alive...");
    } else {
        System.out.println("Timer stops now...");

        //Stop Timer.
        this.cancel();
        this.timer.cancel();
    }
  }
} 
```

# c# - 编写此布尔表达式时，哪种风格更可取？

> ID：12789204
> 
> 赞同：0
> 
> 时间：2012-10-08T20:45:23.563
> 
> 标签：c#, coding-style, boolean-logic, code-readability

我知道这个问题在某种程度上是一个品味问题。我承认这不是我不明白的事情，这只是我想听听别人的意见。

我需要编写一个带有两个参数的方法，一个布尔值和一个字符串。布尔值在某种意义上（很快就会很明显）是多余的，但它是该方法必须接受两个参数的规范的一部分，并且如果布尔值具有“错误”值，则必须引发带有特定消息文本的异常. `true` **当且仅当**字符串不为空或为空时，布尔值必须为。

所以这里有一些不同的风格来写（希望如此！）同样的事情。你觉得哪一个最**易读**，并且符合良好的编码习惯？

```
// option A: Use two if, repeat throw statement and duplication of message string
public void SomeMethod(bool useName, string name)
{
  if (useName && string.IsNullOrEmpty(name))
    throw new SomeException("...");
  if (!useName && !string.IsNullOrEmpty(name))
    throw new SomeException("...");

  // rest of method
}

// option B: Long expression but using only && and ||
public void SomeMethod(bool useName, string name)
{
  if (useName && string.IsNullOrEmpty(name) || !useName && !string.IsNullOrEmpty(name))
    throw new SomeException("...");

  // rest of method
}

// option C: With == operator between booleans
public void SomeMethod(bool useName, string name)
{
  if (useName == string.IsNullOrEmpty(name))
    throw new SomeException("...");

  // rest of method
}

// option D1: With XOR operator
public void SomeMethod(bool useName, string name)
{
  if (!(useName ^ string.IsNullOrEmpty(name)))
    throw new SomeException("...");

  // rest of method
}

// option D2: With XOR operator
public void SomeMethod(bool useName, string name)
{
  if (useName ^ !string.IsNullOrEmpty(name))
    throw new SomeException("...");

  // rest of method
} 
```

当然，也欢迎您提出其他可能性。消息文本`"..."`将类似于“如果 'useName' 为真，则必须给出名称，如果 'useName' 为假，则不允许使用名称”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:10:08.053

尽管在某些情况下可以使用这些技巧来提高可读性，但在这种情况下，我会说 C、D、E 是糟糕的选择——它们采用两种不同的预期场景并将它们组合成一个条件，这可能会让人难以理解你的意图/混淆读者。这使得代码更难维护和调试（你必须想一想才能理解发生了什么，这增加了你犯错误的风险）。

（我会进一步使用 D 和 E 并说它们也很糟糕，因为它们将二进制算术应用于布尔值，这意味着您依赖于从 bool（真/假）到可以安全的某个整数值的隐式转换异或然后隐式转换回布尔值。我更喜欢避免隐式转换，并小心地将布尔值视为布尔值）

A、B 是更好的选择，因为它们简单而明确地依次说明了它们对每个预期场景的含义。将来维护您的代码的人不太可能对代码在不同条件下的预期行为感到困惑。

但是，这里有几个其他选项可能会使代码更易于阅读：

```
bool nameIsValid = (!string.IsNullOrEmpty(name));
if (useName)
{
  if (!nameIsValid) 
    throw new SomeException("..."); 
}
else if (nameIsValid) 
{
  throw new SomeException("..."); 
} 
```

（使用`else`使读者不必重新评估“useName”条件，这可以加快阅读时间）

或者，以更紧凑的方式：

```
bool nameIsValid = (!string.IsNullOrEmpty(name));
if ((useName && !nameIsValid) || (!useName && nameIsValid))
    throw new SomeException("..."); 
```

（使用临时变量，您可以压缩/减少代码并使其更具可读性，同时仍明确指定您希望涵盖的两个单独场景）

甚至：

```
bool nameIsValid = (!string.IsNullOrEmpty(name));

// If we are using a name it MUST be valid
if (useName && !nameIsValid)
    throw new SomeException("..."); 

// If we are NOT using a name, it is illegal to supply one
if (!useName && nameIsValid)
    throw new SomeException("..."); 
```

注释可用于阐明检查的目的，并允许阅读您的代码的人了解代码的用途，而无需考虑条件表达式的含义。（我的意思是很容易看出它做*了什么*，但条件`!usename && nameIsValid`并不能解释我们*为什么*要检查它。

最后一个例子是我个人的偏好——因为我已经说明了我打算发生什么，为什么我打算这样做，以及实际编写代码来实现它。这允许任何阅读代码的程序员轻松检查我所说的意思。它为您提供了一个简单的交叉检查。（有些人会声称这样做的风险是有人可以在不更新评论的情况下修改代码，这会使评论产生误导 - 但如果快速浏览显示代码和评论似乎彼此不匹配，那么你*知道的*有问题，值得花时间在该代码上进行修复。如果它们匹配，则快速交叉检查成功，您可以更加确信代码可能符合预期（因此您只需要考虑设计是否正确，而不是实现））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:50:34.983

如果方法需要知道字符串是空还是空，它可以自己检查它，它不需要强制调用者进行检查，或者冒着调用者（有意或无意）传入错误布尔值的风险价值。首先不需要传递这样的布尔值，因此不需要检查它，因为你知道你不会做错。

话虽如此，我不知道为什么有人不会选择选项 C，如果他们需要比较两个布尔表达式。A 和 B 只是多余的。它是为了添加代码而添加代码。这就像在那里扔无操作一样。D 只是不必要的深奥。当有一个运算符*完全*符合您的要求`operator ==`（

# javascript - 有没有办法优化svg的性能？

> ID：12789207
> 
> 赞同：1
> 
> 时间：2012-10-08T20:45:29.507
> 
> 标签：javascript, charts, svg, d3.js

我正在使用 d3.js 制作一个应用程序，但我正在驱动大量数据并且图形太大，这会减慢我的导航速度。

有人可以告诉我什么可能是解决方案或前进的方向。

这是应用程序。[http://www.ingeniosolido.com/s2m2/prototype30/line_zoom_actual_30_interval.html](http://www.ingeniosolido.com/s2m2/prototype30/line_zoom_actual_30_interval.html)

这是代码。 [https://gist.github.com/3854943](https://gist.github.com/3854943)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:50:26.147

看起来您并没有进行很多特定于元素的交互。您可能会考虑渲染到画布。请参阅：[d3.js 的 HTML5 画布替代品，图形可视化库](https://stackoverflow.com/questions/10591753/html5-canvas-alternatives-for-d3-js-graph-visualization-library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:27:14.150

您是否尝试过删除一些（阅读：大多数/全部）剪辑路径？不使用裁剪路径几乎总是更快（除非它裁剪掉昂贵的区域，例如过滤器、不透明度、复杂的几何图形等）。

它看起来有点像你至少可以将一些剪辑移动到一个级别，例如在父 <g> 元素上。

此外，您链接到的 svg 并不真正符合大标记的条件。

# jenkins - 如何查看来自 Jenkins 电子邮件的详细日志消息？

> ID：12789210
> 
> 赞同：0
> 
> 时间：2012-10-08T20:45:41.243
> 
> 标签：jenkins, jenkins-plugins, email-ext

我[无法让电子邮件分机正常工作](https://stackoverflow.com/questions/12748411/why-are-jenkins-extended-emails-not-including-extended-information)。我查看了系统日志（“管理 Jenkins”/“系统日志”），它显示作业成功运行，但没有关于电子邮件的工作原理。

有什么方法可以打开日志记录，以便我可以观看默认或电子邮件分机触发的电子邮件部分？如果我能看到它在做什么，也许我可以知道为什么电子邮件不起作用。

**编辑**：我们正在运行 Jenkins 1.484。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T10:03:27.670

你可以这样做：

1.  去配置系统系统日志，并添加一个新的记录器
2.  选择一个对您有意义的名称。
3.  配置要收集其输出的记录器及其级别

你可以看看那里：[https ://wiki.jenkins-ci.org/display/JENKINS/Logging](https://wiki.jenkins-ci.org/display/JENKINS/Logging)

# file - 通过添加 10 重命名文件 - Unix

> ID：12789212
> 
> 赞同：-2
> 
> 时间：2012-10-08T20:45:47.727
> 
> 标签：file, unix, rename

我有一些文件命名如下：

```
abc21pqr.txt
abc22pqr.txt
abc23pqr.txt 
```

依此类推，直到

```
abc1000pqr.txt 
```

我想取“abc”和“pqr”之间的数字，将该数字加 10 并重命名文件：

所以我的输出文件名应该是：

```
abc31pqr.txt
abc32pqr.txt
abc33pqr.txt 
```

依此类推，直到

```
abc1010pqr.txt 
```

如何使用 Unix one-liner 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:35:46.340

对于[GNU Bash](http://www.gnu.org/software/bash/)，假设数字前后的字符串是固定的，并且所有文件都在当前目录中：

```
find -maxdepth 1 -type f -name 'abc[0-9]*pqr.txt' |
    sed 's|^./abc||; s|pqr\.txt$||' |
    sort -nr |
    while read src; do
       mv abc${src}pqr.txt abc$((src+10))pqr.txt
    done 
```

# php - PHP Slim 框架数据库类不起作用

> ID：12789215
> 
> 赞同：0
> 
> 时间：2012-10-08T20:46:01.690
> 
> 标签：php, slim

几个小时以来我一直在努力解决这个问题，但我似乎无法弄清楚这个问题，基本上我有一个库文件，它在所有地方都被调用并且在任何地方都可以正常工作，除了我在这里调用它的地方.

在我尝试访问 db 对象并查询任何内容之前，我可以变得苗条以正常工作吗？我可能很昏暗，但这或多或少正是它在苗条的文档中所说的方式，并在其中添加了几行额外的行，因此停止工作是没有意义的。

```
 require_once "libary.php";
    require 'Slim/Slim.php';
    \Slim\Slim::registerAutoloader();

    $app = new \Slim\Slim();

    $app->get('/login/:username/:password', function ($username, $password) {
  //check the login details against the db...
    echo "I SEE THIS";
    $query = "select * from sometable";
    $db->query($query);
    echo "I DONT SEE THIS";

    });
    $app->run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:45:55.260

很抱歉响应缓慢，相当尴尬，但只需要在该内联函数中插入一行代码：

全球 $db

我曾假设（错误地）该变量在函数中是可见的，因为它是在我们的库中定义的。

谢谢

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T10:31:57.080

您可以避免将 GLOBAL 与**use**关键字一起使用（PHP >= 5.3.0）：

```
$app->get('/login/:username/:password', function ($userstrong textname, $password) use ($db) {
    //check the login details against the db...
    echo "I SEE THIS";
    $query = "select * from sometable";
    $db->query($query);
    echo "I DONT SEE THIS";
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T16:52:49.813

您还可以将数据库作为单例注入应用程序，因此：

```
$app->container->singleton('db', function () use ($dbcfg){
    return new \myDatabaseClass($dbcfg);
}); 
```

然后它将始终在此处提供给您：

```
$app->db->query(); 
```

有关更多详细信息，请参见：http: [//docs.slimframework.com/#DI-Overview](http://docs.slimframework.com/#DI-Overview)

# c - 构建错误：多重定义

> ID：12789218
> 
> 赞同：0
> 
> 时间：2012-10-08T20:46:31.440
> 
> 标签：c, build, header-files, multiple-definition-error

我有一个头文件，其中包含一个实际上是 ttf 字体文件的**无符号字符数组。**在 .c 文件中，我可以加载字体并使用它（我在 .c 文件中包含 ttf 头文件），但问题是当我尝试在另一个 c 文件中使用它时，我得到了这两个错误之一；

我可以得到的第一个错误是我的数组未声明。

所以我包含了包含我的数组的头文件，我得到了第二个错误；多重定义...

有人可以帮忙吗？我不明白。我希望我的解释很清楚，并对我的近似英语感到抱歉:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:48:26.390

使用`extern`.

在您的头文件中，制作：

```
extern unsigned char my_array[]; 
```

在*一个* `.c`文件中，定义了数组。

# android - SDK版本切换中Android新API的调用方法

> ID：12789219
> 
> 赞同：3
> 
> 时间：2012-10-08T20:46:32.907
> 
> 标签：android

最新的 Android API 有一些有用的方法，这些方法不适用于旧的 Android 版本。例如`DatePicker`， 有一个新方法`setCalendarViewShown()`，它不适用于 Android 2.2（8 级）等旧 API。

但是，我已将最低 API 级别设置为 8，目标级别设置为 16。因此，如果可用，我想使用这些方法（在 11 级以上的设备上）。

现在我尝试以编程方式区分几个 API 级别，如果可用，调用如下方法：

```
if (android.os.Build.VERSION.SDK_INT >= 11) {
    datePicker.setCalendarViewShown(false);
} 
```

这种方法好吗？在 Eclipse 中，只有一些警告，但它们当然可以被抑制。由于检查了`SDK_INT`，这段代码应该没问题并且不会引起任何问题，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:13:53.793

> 这种方法好吗？

我会使用`Build.VERSION_CODES.HONEYCOMB`而不是`11`为了可读性，否则是的。

> 在 Eclipse 中，只有一些警告，但它们当然可以被抑制。

Eclipse 会指出`setCalendarViewShown()`API Level 8 中不存在。它没有可靠的方法来确认您只是在版本保护块中调用该方法，所以它只是抱怨。使用`TargetApi(11)`注释将摆脱它，同时仍然确保如果您向需要高于 11 的方法添加其他内容，您将再次收到警告*。*

> 由于检查了 SDK_INT，这段代码应该没问题，不会引起任何问题，不是吗？

是的。

顺便说一句，在这种特殊情况下，您可以使用 XML 属性 ( `android:calendarViewShown`) 来替换调用。由于旧版本会自动忽略 XML 属性，因此您可以跳过`Build`检查。

# bash - 在 Bash 中，如何检查用户登录

> ID：12789220
> 
> 赞同：-4
> 
> 时间：2012-10-08T20:46:35.190
> 
> 标签：bash

如果使用 bash 脚本如何每 5 分钟记录一次登录用户数。每个测量值都需要附加到文本文件中。每个测量应该有一行文本，格式如下。

2011 年 10 月 11 日星期五 13:12:04 EDT 8 个用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:51:41.410

这会将单个用户的多次登录计为多个匹配项，*即*如果您使用同一帐户 ssh 进入机器 3 次，这将显示`3 users`

`echo $(date) $(who | awk '{print $1}' | wc -l) users >> log.txt`

要将来自一个用户名的多个登录视为一个匹配项，这就是您想要的：

`echo $(date) $(who | awk '{print $1}' | uniq | wc -l) users >> log.txt`

# html - HTML5 画布中的文本 API 仍然这么慢吗？

> ID：12789221
> 
> 赞同：1
> 
> 时间：2012-10-08T20:46:47.633
> 
> 标签：html, canvas

我已经阅读了一些关于画布中的文本 API 在浏览器中运行缓慢的文章。这些文章已经有一年了，这段时间有什么改进吗？例如，谷歌是否在其谷歌地图 MapsGL 中使用画布文本 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T23:59:20.037

我最近使用 fillText() 和 strokeText()在[我的网站上对此进行了分析：](http://www.structuredcanvaslanguage.com/ProfilingJS/)

填充文本（）

1.  157.1ms Safari 5.1.7
2.  215.8 毫秒 Chrome v21
3.  210.6 毫秒 Chrome v22
4.  426.1 毫秒 IE 9（64 位）
5.  994.5 毫秒火狐 15.0.1 994。

笔画文本（）

1.  196.6 毫秒 Chrome v21
2.  193.0ms Chrome v22
3.  3793.1ms IE 9 (64bit)
4.  6149.0ms 火狐 15.0.1
5.  9628.8ms Safari 5.1.7

是的，我认为速度很慢，但确实依赖于浏览器。在那里测试测试代码，您可以自己运行它，但实际上，FF 可能会超时等待测试完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:01:09.287

查看 Google Maps GL，可以看到它使用了一个名为[https://maps.gstatic.com/cat_js/intl/en_ALL/mapfiles/435c/maps2/%7Bmain,mod_util,mod_vt%7D.js的文件](https://maps.gstatic.com/cat_js/intl/en_ALL/mapfiles/435c/maps2/%7Bmain,mod_util,mod_vt%7D.js)

在那，确实有对fillText（）的调用，文件中有6个“fillText”实例。

# mysql - 如何更新sql server中的每条记录

> ID：12789225
> 
> 赞同：0
> 
> 时间：2012-10-08T20:47:09.027
> 
> 标签：mysql, sql, sql-server, sql-server-2008

我需要使用更新脚本更新表中的每条记录

查询1：

```
Select acheivementsId 
from Students 
where student_id = 2 
```

结果:: 61 条记录// acheivementid 的数量

查询 2：

```
Select acheivementsId 
from Students 
where student_id = 4 
```

结果：61 条记录// acheivementid 的数量

我需要用 student_id = 4 acheivementId 更新 Student_id = 2 acheivementid。

如何编写更新 61 条记录的更新语句。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-08T20:58:38.460

尝试这个：

```
UPDATE Students 
   SET acheivementsId = (SELECT acheivementsId from Students where Student_id=4) 
WHERE Student_id=2 
```

# jquery - FancyBox Jquery 调整大小

> ID：12789229
> 
> 赞同：1
> 
> 时间：2012-10-08T20:47:19.117
> 
> 标签：jquery, resize, fancybox

当我打开 fancybox 时，我得到了两个不同的显示。这发生在我测试过的所有浏览器中——一个很好并且大小正确（下图左侧的示例），第二个被拉伸到 100%。我已经清除了缓存并在不同的机器上进行了检查——而且我不断得到这两个结果。有没有办法可以确保fancybox 的宽度永远不会超过700px。

[问题图片](http://snapsay.com/issue.jpg)

在 jquery.fancybox.js 文件中，我有以下内容：

```
defaults: {
  padding : 15,
  margin  : 20,
  width     : 800,
  height    : 600,
  minWidth  : 100,
  minHeight : 100,
  maxWidth  : 700,
  maxHeight : 800, 
```

请协助，因为这让我发疯:-)

# typescript - TypeScript 中的类类型检查

> ID：12789231
> 
> 赞同：361
> 
> 时间：2012-10-08T20:47:32.063
> 
> 标签：typescript, typechecking

在 ActionScript 中，可以使用[is 运算符](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f8a.html)在运行时检查类型：

```
var mySprite:Sprite = new Sprite(); 
trace(mySprite is Sprite); // true 
trace(mySprite is DisplayObject);// true 
trace(mySprite is IEventDispatcher); // true 
```

是否可以检测变量（扩展或）是否是某个类或与 TypeScript 的接口？

我在语言规范中找不到任何关于它的信息。在使用类/接口时它应该在那里。

* * *

## 回答 #1

> 赞同：474
> 
> 时间：2012-10-08T20:54:10.410

> ### [4.19.4 instanceof 运算符](https://github.com/Microsoft/TypeScript/blob/v1.8.10/doc/spec.md#4.19.4)
> 
> 运算符要求左操作数为 Any 类型、`instanceof`对象类型或类型参数类型，右操作数为 Any 类型或“Function”接口类型的子类型。结果总是布尔原始类型。

所以你可以使用

```
mySprite instanceof Sprite; 
```

请注意，此运算符也在 ActionScript 中，但不应再在那里使用：

> is 运算符是 ActionScript 3.0 的新功能，允许您测试变量或表达式是否是给定数据类型的成员。在先前版本的 ActionScript 中，instanceof 运算符提供了此功能，但在 ActionScript 3.0 中，instanceof 运算符不应用于测试数据类型成员资格。应该使用 is 运算符而不是 instanceof 运算符进行手动类型检查，因为表达式 x instanceof y 仅检查 x 的原型链是否存在 y（在 ActionScript 3.0 中，原型链不提供继承层次结构）。

TypeScript`instanceof`也有同样的问题。由于它是一种仍在开发中的语言，我建议您提出这种设施的建议。

也可以看看：

*   MDN：[实例化](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/instanceof)

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2016-11-21T10:42:39.203

TypeScript 有一种在运行时验证变量类型的方法。您可以添加一个返回*类型谓词*的验证函数。因此，您可以在 if 语句中调用此函数，并确保该块中的所有代码都可以安全地用作您认为的类型。

TypeScript 文档中的示例：

```
function isFish(pet: Fish | Bird): pet is Fish {
   return (<Fish>pet).swim !== undefined;
}

// Both calls to 'swim' and 'fly' are now okay.
if (isFish(pet)) {
  pet.swim();
}
else {
  pet.fly();
} 
```

查看更多信息： [https ://www.typescriptlang.org/docs/handbook/advanced-types.html](https://www.typescriptlang.org/docs/handbook/advanced-types.html)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2020-04-20T08:47:06.273

您可以`instanceof`为此使用运算符。来自 MDN：

> instanceof 运算符测试构造函数的原型属性是否出现在对象的原型链中的任何位置。

如果您不知道原型和原型链是什么，我强烈建议您查找。这里还有一个 JS（TS 在这方面的工作方式类似）示例，它可能会阐明这个概念：

```
 class Animal {
        name;

        constructor(name) {
            this.name = name;
        }
    }

    const animal = new Animal('fluffy');

    // true because Animal in on the prototype chain of animal
    console.log(animal instanceof Animal); // true
    // Proof that Animal is on the prototype chain
    console.log(Object.getPrototypeOf(animal) === Animal.prototype); // true

    // true because Object in on the prototype chain of animal
    console.log(animal instanceof Object); 
    // Proof that Object is on the prototype chain
    console.log(Object.getPrototypeOf(Animal.prototype) === Object.prototype); // true

    console.log(animal instanceof Function); // false, Function not on prototype chain 
```

本例中的原型链为：

动物 > Animal.prototype > Object.prototype

# c# - “--”在 C# 中代表什么以及它在 VB 中的作用

> ID：12789236
> 
> 赞同：1
> 
> 时间：2012-10-08T20:47:49.480
> 
> 标签：c#, vb.net, visual-studio-2010

我有这个示例代码

```
public class MyClass
{
    private static int tempKey = 0;

    public MyClass()
    {
        this.Key = --tempKey;
    }
    public int Key {get; set;}
} 
```

--tempkey 究竟做了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T20:49:15.873

它递减`tempKey`并返回新值。与 比较`tempKey--`，它也会递减 tempKey，但返回原始值。

[请参阅此处](http://msdn.microsoft.com/en-us/library/36x43w8w(v=vs.71).aspx)的Microsoft 文档。

> 自增运算符 (++) 将其操作数加 1。自增运算符可以出现在其操作数之前或之后：

```
++ var 
var ++ 
```

在哪里：

> var 表示存储位置或属性或索引器的表达式。
> 
> 第一种形式是前缀递增操作。操作的结果是操作数增加后的值。
> 
> 第二种形式是后缀递增操作。操作的结果是操作数在递增之前的值。

编辑：这对 C# 有效。Visual Basic 没有这个递增/递减运算符。

在 Visual Basic`--tempKey`中，计算`-1 * (-1 * tempKey)`结果等于`tempKey`.

![在此处输入图像描述](../Images/e51bb4e159e683dd15a62d8945879e7b.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T21:29:18.960

“--x”是预减算术运算符。这意味着该值在语句中使用之前减 1。

```
int x = 10;
Console.WriteLine(--x); // This will print 9 
```

"x--" 是后减算术运算符。表示使用该值，然后减 1。

```
int x = 10;
Console.WriteLine(x--); // This will print 10
Console.WriteLine(x):   // This will print 9 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T20:50:11.897

它将变量减 1，然后计算为减量后的值。因此，在您给出的示例中，构造函数将从 0 递减`tempKey`到 -1，然后也设置`Key`为相同的值 -1。例如：

```
int x = 5;
int y = --x;  // x gets set to 4 and they y is also set to 4

int x2 = 5;
int y2 = x2--;  // x2 gets set to 4 and then y gets set to 5 (x2's value prior to decrement) 
```

VB 中没有等价的运算符。在VB中，`--tempKey`不会有影响。变量名称前的单个减号将否定该值。变量名称前的连续两个减号将使该值取反两次，从而将其恢复为原始值。例如：

```
Dim x As Integer = 5
Dim y As Integer = --x  ' x still equals 5 and y also gets assigned 5 
```

换句话说，它与说 相同`y = -1 * -1 * x`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T20:48:51.893

它从 tempkey 的值中减去 1。

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/6a71f45d.aspx](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)

具体来说，来自[http://msdn.microsoft.com/en-us/library/wc3z3k8c.aspx](http://msdn.microsoft.com/en-us/library/wc3z3k8c.aspx)

> 减量运算符 (--) 将其操作数减 1。减量运算符可以出现在其操作数之前或之后：--variable 和 variable--。第一种形式是前缀递减操作。操作的结果是操作数“在”它被递减之后的值。第二种形式是后缀减量操作。操作的结果是操作数“之前”被递减的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T20:50:14.753

-- 运算符是减法运算符。在这种情况下，它从 tempKey 变量中减去 1。因为在变量之前，所以先减去值，再返回到 this.Key 值。如果它在变量 tempkey-- 之​​后，那么它会在将值返回到 this.Key 之后减去该值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T20:50:25.670

`--i`递减数字并返回递减的结果，同时`i--`也会递减数字，但返回递减前的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T20:52:35.793

它是一个预减运算符。实际上，它从 tempKey 中减去一个。因此，当第一次调用构造函数 MyClass 时， tempKey 将其值更改为 -1，然后 this.Key 获得值 -1。由于 tempKey 是静态的，因此对构造函数的每次后续调用都会递减 tempKey。

# c - 苹果 vDSP 示例的问题

> ID：12789240
> 
> 赞同：0
> 
> 时间：2012-10-08T20:48:09.157
> 
> 标签：c, macos, linker, vdsp

我在使用vDSP的苹果[示例时遇到问题。](http://developer.apple.com/library/mac/#documentation/Performance/Conceptual/vDSP_Programming_Guide/SampleCode/SampleCode.html#//apple_ref/doc/uid/TP40005147-CH205-47850)我尝试了所有这些，但最后我需要卷积样本。我什至无法通过链接器获取它：

```
Undefined symbols for architecture i386:
  "_conv", referenced from:
      _ConvTiming in main.o
ld: symbol(s) not found for architecture i386 
```

是错误消息（无论我为什么架构构建或）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:16:04.180

您需要在构建中包含 Accelerate 框架。

# java - Java - 计算到arraylist的路线距离，但不断添加第三个元素

> ID：12789243
> 
> 赞同：2
> 
> 时间：2012-10-08T20:48:17.320
> 
> 标签：java, arraylist

所以我试图通过长和纬来计算我拥有的每条路线的距离。我将它添加到 arrayList，然后移动到下一条路线。它似乎正在计算前 3 个的路线，但它似乎只是继续添加第 3 个元素。

谁能看到我做错了什么？这是一个相当大的功能

```
ArrayList<Integer> xCoords = new ArrayList<Integer>();
        ArrayList<Integer> yCoords = new ArrayList<Integer>();
        int fitness2 = 0;

        for (List<Integer> eachChromeNew : populationShuffle){

            for (int n =0; n < eachChromeNew.size();n++){

                xCoords.add(geoPoints.get(n).getLongitudeE6());
                yCoords.add(geoPoints.get(n).getLatitudeE6());

            }
            for (int c = 0; c < xCoords.size();c++){

                if(c != xCoords.size()-1)
                {

                int x1 = xCoords.get(c);
                int y1 = xCoords.get(c + 1);

                int x2 = yCoords.get(c);
                int y2 = yCoords.get(c + 1);

                fitness2 += Math.sqrt((Math.pow(x2 - x1,2) + Math.pow(y2 - y1, 2)));
                }
                fitnessArrayTest.add(fitness2);
            }
            System.out.println("Fitness Test is: = " +fitness2);

        } 
```

这是输出

```
10-08 21:43:10.715: I/System.out(26785): Fitness Test is: = 669448211
10-08 21:43:10.715: I/System.out(26785): Fitness Test is: = 2092025460
10-08 21:43:10.720: I/System.out(26785): Fitness Test is: = 2147483647
10-08 21:43:10.720: I/System.out(26785): Fitness Test is: = 2147483647
10-08 21:43:10.720: I/System.out(26785): Fitness Test is: = 2147483647
10-08 21:43:10.720: I/System.out(26785): Fitness Test is: = 2147483647 
```

编辑

因此，在将其更改为建议的两倍后，它似乎略有工作，但在几次之后似乎稳步增加。这就是我的意思：

1

```
0-08 21:56:07.275: I/System.out(28729): Fitness Test is: = 6.694724656380861E8
10-08 21:56:07.275: I/System.out(28729): Fitness Test is: = 2.0921019557100217E9
10-08 21:56:07.275: I/System.out(28729): Fitness Test is: = 4.267888470215804E9
10-08 21:56:07.275: I/System.out(28729): Fitness Test is: = 7.196832009155435E9
10-08 21:56:07.280: I/System.out(28729): Fitness Test is: = 1.0878932572528923E10
10-08 21:56:07.280: I/System.out(28729): Fitness Test is: = 1.5314190160336267E10
10-08 21:56:07.280: I/System.out(28729): Fitness Test is: = 2.050260477257744E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 2.644417640925244E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 3.313890507036129E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 4.0586790755903984E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 4.878783346588052E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 5.774203320029091E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 6.744938995913514E10
10-08 21:56:07.285: I/System.out(28729): Fitness Test is: = 7.790990374241312E10
10-08 21:56:07.290: I/System.out(28729): Fitness Test is: = 8.912357455012492E10 
```

出现在数字末尾的这些 E8、E9 和 E10 是什么？

编辑

在马丁建议将其除以 1000000 之后，我得到了更好的答案范围，但是我知道遇到了另一个问题，希望是最后一个问题。这是健身每次都会增加，我期待的是随机顺序。这是新的输出

```
10-08 22:18:49.990: I/System.out(2576): Fitness Test is: = 669.4690141960474
10-08 22:18:49.995: I/System.out(2576): Fitness Test is: = 2092.0939129186613
10-08 22:18:49.995: I/System.out(2576): Fitness Test is: = 4267.874696167842
10-08 22:18:49.995: I/System.out(2576): Fitness Test is: = 7196.8113639435915
10-08 22:18:49.995: I/System.out(2576): Fitness Test is: = 10878.903916245905
10-08 22:18:50.000: I/System.out(2576): Fitness Test is: = 15314.152353074784
10-08 22:18:50.005: I/System.out(2576): Fitness Test is: = 20502.556674430216
10-08 22:18:50.005: I/System.out(2576): Fitness Test is: = 26444.116880312213
10-08 22:18:50.005: I/System.out(2576): Fitness Test is: = 33138.83297072078
10-08 22:18:50.005: I/System.out(2576): Fitness Test is: = 40586.70494565593
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 48787.73280511766
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 57741.916549105954
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 67449.25617762083
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 77909.75169066226
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 89123.40308823026
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 101090.21037032483
10-08 22:18:50.010: I/System.out(2576): Fitness Test is: = 113810.17353694596
10-08 22:18:50.015: I/System.out(2576): Fitness Test is: = 127283.29258809367
10-08 22:18:50.015: I/System.out(2576): Fitness Test is: = 141509.56752376774 
```

现在有人能看出什么不对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:51:29.787

问题是您正在使用`int`您的`fitness2`变量，并且您正在达到它可以处理的上限。鉴于您正在处理本质上是浮点数的大数，为什么不使用`double`呢？

您看到的效果是一种奇怪的效果组合，主要是因为您使用`+=`的是`int`运算符，但右侧是`double`. 使用 执行算术运算，然后使用[JLS 第 5.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)的规则`double`转换回，其中包括当结果太大或太小时时的此步骤：`int`

> 该值必须太大（一个大的正值或正无穷大），第一步的结果是类型`int`or的最大可表示值`long`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:54:00.963

这里的提示`2147483647`是 MAX_INT。你达到了上限。您*可以*尝试将 Fitness2 更改为 long 以确认这是问题所在，但我不建议将其作为修复。

我建议使用 double，因为这就是 Math.sqrt 正在处理的问题。

**编辑**：这与您的问题无关，但请注意，当您远离赤道时，您的计算将非常不准确。经线聚集在一起，因此您会夸大东西方向的距离。一个简单的解决方法是用 y 坐标的平均值的余弦来缩放 x 坐标。[注意：这假设地球是一个完美的球体，但事实并非如此，但它会让你非常接近]

**编辑 2**：E8、E9 等表示`* 10 ^ 8`等`* 10 ^ 9`。所以 1.0E9 比 1.0E8 大 10 倍。

您的坐标以微度为单位（每度 1000000）。您可能还想将 x1 x2 等更改为双精度值，然后将值除以 1000000。

**编辑3**：如果您不打算累积结果，那么您需要`distance2`在每次迭代之间重置。尝试`double fitness2` *进入*外循环。那是，

```
ArrayList<Integer> yCoords = new ArrayList<Integer>();

for (List<Integer> eachChromeNew : populationShuffle){
    double fitness2 = 0; 
```

# java - 网页内容在阅读过程中发生变化

> ID：12789246
> 
> 赞同：0
> 
> 时间：2012-10-08T20:48:32.473
> 
> 标签：java, url, io

在java中，当我们建立到给定URL的连接然后打开一个流来读取它时，当网站的内容在读取过程中发生变化时会发生什么？

例如，我们的光标指向第 1000 行，本应包含章节标题，但现在页面在第 1000 行出现了完全不同的内容，或者内容不再有 1000 行那么大？

如果给定网站每 1-2 秒更新一次内容，例如股票变化，其中可能只包括最近 1 秒内变动的股票（内容增长和缩小），会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:50:20.063

*实际*发生的行为完全取决于 Web 服务器本身，并且不受客户端的控制。

大多数 Web 服务器会一次发送整个完整的文档，就好像它是某个特定文档状态的“快照”一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:58:02.567

恕我直言，当客户端请求资源时，http服务器将发送可用的内容。

例子：

*   客户要求 index.html 页面`GET /index.html`
*   服务器在一个会话中发送整个页面。
*   客户端解析页面，发现它指向一个css文件，所以它要求文件..等等。

因此，您无法获取 HTML 页面的第一部分，然后再获取另一个版本的第二部分，因为服务器会立即为整个页面提供服务。

动态页面通常具有静态布局，并且使用 ajax 更新数据。

# javascript - 跨域脚本（仅限 IE 和 Firefox）

> ID：12789253
> 
> 赞同：-1
> 
> 时间：2012-10-08T20:49:19.873
> 
> 标签：javascript, iframe, xmlhttprequest

我被要求解决一个挑战，如果我们将 JS 交付到非友好（也称为跨域）IFRAME（将第 3 方代码写入页面），并从该 IFRAME 内部确定代码所在的 iframe 的 x&y 偏移量交付。由于历史上跨站点脚本的限制，这一直被认为是行不通的，但我们现在需要拥有这种能力。任何人都知道可以让我开始的任何技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:53:26.747

老实说，我将从放弃 iframe 开始。跨站点脚本是一回事，但您可能正在寻找的是网络爬虫。

[http://en.wikipedia.org/wiki/Web_scraping](http://en.wikipedia.org/wiki/Web_scraping)

虽然我想知道如果您从另一个网站获取内容，您的意图是否是善意的......

# c# - 喜欢页面时，Azure ACS Facebook 错误 191 redirect_uri 不属于应用程序

> ID：12789255
> 
> 赞同：2
> 
> 时间：2012-10-08T20:49:29.647
> 
> 标签：c#, facebook, azure, acs

我正在使用 Facebook C# SDK 从我的 ACS 安全 Web 应用程序中向 Facebook 发布点赞，但出现错误：

> API 错误代码：191
> API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

我相信这是因为我喜欢的页面的 url 与 Facebook 应用程序域不匹配。

细节：

*   我试图“喜欢”的页面是（例如）http://mysite.com/Story.aspx。

*   在 ACS 中，我的安全登录页面的链接是 https://mysite-acs.accesscontrol.windows.net/。

*   在 Facebook 中，我的应用程序域是 mysite-acs.accesscontrol.windows.net，“使用 Facebook 登录的网站”下的站点 URL 是：https://mysite-acs.accesscontrol.windows.net/

*   我喜欢的页面具有正确的“og”标签，并且位于不安全的页面上。

有什么方法可以让 Facebook Like 与 ACS 合作？

更新：我找到了一个（临时）解决方案。

我找到了一种解决方法，可以让我拥有多个 Facebook 应用程序域，但这绝对不是一个完美的解决方案。解决方法是在 App Domains 框中指定 ACS url*和站点 url。*然后，在使用 Facebook 登录的网站下，我在站点 URL 框中输入了 ACS url，然后，在移动 Web 下，我在移动站点 URL 框中输入了站点 URL。现在 Facebook 上的链接完美运行，因为 Facebook 可以看到我网站上的页面。在找到真正的解决方案之前，我不会将问题标记为已解决，但希望如果他们被卡住，它可以帮助某人。感谢您的回复。非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:08:38.487

如果可以，您需要在此处使用 CNAME 指向您的 Azure 站点。您确实有 facebook 不允许的冲突域。您可以将 accesscontrol.windows.net 添加为 Facebook 中的域，也可以在 DNS 提供商中设置 CNAME 以从“mysite.com”指向 accesscontrol.windows.net。

这些是你的选择。

希望这可以帮助！

# c++ - 如何画一条宽度可变的线？

> ID：12789258
> 
> 赞同：0
> 
> 时间：2012-10-08T20:49:52.817
> 
> 标签：c++, variables, line

```
#include <iostream>
#include <cmath>
#include "graph1.h"

using namespace std;

int main()
{
    int diameter = 0;
    int height = 0;
    double rate = 0;
    char repeat = 'y';
    int obj_num = 0;

    displayGraphics();

    obj_num = drawRect(0,0,50,400);
    setColor(obj_num,200,200,200);

    obj_num = drawRect(0,400,640,79);
    setColor(obj_num,71,35,35);

    obj_num = drawLine(50,50,150,50,5);
    setColor(obj_num,80,80,80);

    displayBMP("faucet.bmp",150,12);

    do
    {
        do
        {
            cout << "Enter the diamater of the cylinder <in inches > 0 but <= 300: ";
            cin >> diameter;
        if((diameter<0) || (diameter>300))
        { 
            cout << "Incorrect diamater entered; value must be between 1 and 300" << endl;

        }
        }while((diameter<0) || (diameter>300));

        do
        {
            cout << "Enter the height of the cylinder <in inches > 0 but <= 325: ";
            cin >> height;
        if((height<0) || (height>325))
        {
            cout << "Incorrect height entered; value must be between 1 and 325" << endl;
        }

        }while((height<0) || (height>325));

        do
        {
            cout << "Enter the facet water's rate: <gallons/minute> ";
            cin >> rate;
        if((rate<0) || (rate>100))
        { 
            cout << "Incorrect rate entered; value must be between 1 and 100" << endl;

        }
        }while((rate<0) || (rate>100));

//I need to draw the lines here. The graphics window has a faucet that is supposed to fill 
//up a cylinder made out of 3 lines. I don't know how to make the lines vary from the users 
//input since lines are hard coded with points and all i am receiving is the width for the 
//bottom line and the height for the left and right lines. 

      cout << "Repeat program? (y/n): ";
      cin >> repeat;

      clearGraphics();

    }while ( (repeat == 'y') || (repeat == 'Y') );
    return 0;
} 
```

这是一个截图供参考： ![截屏](../Images/9baef3cba9c2b8c37354dbd127565627.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:02:08.170

如何绘制更粗的线很大程度上取决于您的图形库提供的内容。在这个特定问题的情况下，您似乎正在使用讲师提供的库，因此在 Stack Overflow 上对此的具体帮助将很少。询问您的讲师，或查看随课程材料提供的文档。

根据您分配的水龙头管道的位置和用于绘制它的命令，看起来**最终的参数`drawLine`**是宽度：

```
obj_num = drawLine(50,50,150,50,5); 
```

如果您没有库提供的绘制较粗线条的方法，则始终可以使用蛮力方法并简单地**绘制多条相邻线**。对于您的作业，您应该绘制四个像素厚的圆柱壁，因此绘制四条线，每条线的*x*坐标比前一条多一个。

另一种画粗线的方法是**画出你想要的粗细的矩形**。定义一个四像素宽的矩形，然后绘制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:59:15.140

所以， 当你调用 drawline 函数时，你有可变的**高度，插入这个变量。**

# php - 如何使用 php json_decode() 从 JSON 文件中提取精确值？

> ID：12789267
> 
> 赞同：0
> 
> 时间：2012-10-08T20:50:14.393
> 
> 标签：php

```
 {
   "kind": "books#volume",
   "id": "a3ERAAAAYAAJ",
   "etag": "Pax/JBMS5hw",
   "selfLink": "https://www.googleapis.com/books/v1/volumes/a3ERAAAAYAAJ",
   "volumeInfo": {
    "title": "Passion-flowers",
    "authors": [
     "Julia Ward Howe"
    ],
    "publishedDate": "1854",
    "industryIdentifiers": [
     {
      "type": "OTHER",
      "identifier": "HARVARD:32044023800626"
     }
    ],
    "pageCount": 187,
    "printType": "BOOK",
    "contentVersion": "full-1.0.0",
    "imageLinks": {
     "smallThumbnail": "http://bks2.books.google.it/books?id=a3ERAAAAYAAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api",
     "thumbnail": "http://bks2.books.google.it/books?id=a3ERAAAAYAAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"
    },
    "language": "en",
    "previewLink": "http://books.google.it/books?id=a3ERAAAAYAAJ&printsec=frontcover&dq=flowers&as_brr=7&hl=&cd=1&source=gbs_api",
    "infoLink": "http://books.google.it/books?id=a3ERAAAAYAAJ&dq=flowers&as_brr=7&hl=&source=gbs_api",
    "canonicalVolumeLink": "http://books.google.it/books/about/Passion_flowers.html?hl=&id=a3ERAAAAYAAJ"
   },
   "saleInfo": {
    "country": "IT",
    "saleability": "FREE",
    "isEbook": true
   },
   "accessInfo": {
    "country": "IT",
    "viewability": "ALL_PAGES",
    "embeddable": true,
    "publicDomain": true,
    "textToSpeechPermission": "ALLOWED",
    "epub": {
     "isAvailable": false,
     "downloadLink": "http://books.google.it/books/download/Passion_flowers.epub?id=a3ERAAAAYAAJ&hl=&output=epub&source=gbs_api"
    },
    "pdf": {
     "isAvailable": true,
     "downloadLink": "http://books.google.it/books/download/Passion_flowers.pdf?id=a3ERAAAAYAAJ&hl=&output=pdf&sig=ACfU3U0sPdmPZp_LmFzZXatBjMeV54xJxA&source=gbs_api"
    },
    "webReaderLink": "http://books.google.it/books/reader?id=a3ERAAAAYAAJ&as_brr=7&hl=&printsec=frontcover&output=reader&source=gbs_api",
    "accessViewStatus": "FULL_PUBLIC_DOMAIN"
   }
  } 
```

您好，我有一个 Json 文件，看起来像我在上面发布的部分。我想提取此文件中包含的所有标题以及缩略图 url。我尝试使用此代码访问第一个标题项，但没有成功：

```
<?php

$file = file_get_contents("volumes.json");

$json = json_decode($file, true);

$json->items->volumeInfo[0]->title;

?> 
```

我**在第 7 行尝试获取非对象的属性。**为什么我不能将 $json 作为对象访问？我该怎么做才能提取所有数据？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:52:41.333

你可以试试

```
$json = json_decode($file, true);
var_dump($json['volumeInfo']['title']); 
```

或者

```
$json = json_decode($file);
var_dump($json->volumeInfo->title); 
```

输出

```
string 'Passion-flowers' (length=15) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:52:50.180

问题是您将 $json 作为数组加载。如果要将其作为对象加载，则需要执行以下操作：

```
$json = json_decode($file, false); 
```

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:56:22.723

如果您明确告诉`json_decode()`始终返回数组（第二个参数，这很好），您不应该尝试使用对象表示法访问结果中的任何内容。

# c++ - 读/写 unicode c++

> ID：12789273
> 
> 赞同：1
> 
> 时间：2012-10-08T20:50:32.133
> 
> 标签：c++, file-io, encoding, utf-8, wofstream

可悲的是，这是我本周第三次发布问题。

我必须使用 unicode 编码（或 UTF8）将文本写入文件。
这就是我所做的：

创建`wofstream mystream;`然后我`wstring`像这样放一个`mystream << L"hello world";`

第一个问题：在我的情况下，流使用什么样的编码？

其次，我想加载我的新文件，但是如何读取这些行？`ifstream`'s`getline`不起作用，因为这条线显然被毁了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T21:42:10.103

我认为“unicode encoding”是指 UTF-16。实际上有几种编码可能被称为 Unicode 编码，但大多数不熟悉 Unicode 的人认为它是指 UTF-16（我认为主要是因为微软在他们的所有文档中都犯了这个错误）。我的回答还假设您正在为 Windows 编写代码，因此您的内部数据是存储在 wchar_t 字符串中的 UTF-16。

* * *

使用宽流对象并不意味着文件输入或输出将使用宽字符完成。事实上，宽流将使用流区域设置的 codecvt 方面，以便在流的字符类型 (wchar_t) 和 char 之间进行转换。

在 C++11 中，有一些 codecvt 方面可用于执行 UTF-16 或 UTF-8 输入/输出；[`codecvt_utf8`](http://en.cppreference.com/w/cpp/locale/codecvt_utf8), [`codecvt_utf16`](http://en.cppreference.com/w/cpp/locale/codecvt_utf16), [`codecvt_utf8_utf16`](http://en.cppreference.com/w/cpp/locale/codecvt_utf8_utf16).

`codecvt_utf8`将在外部 UTF-8 多字节序列和内部 UTF-32/UCS4 或 UCS2 数据之间进行转换。`codecvt_utf16`将在外部 UTF-16 多字节序列和内部 UTF-32/UCS4 或 UCS2 数据之间进行转换。`codecvt_utf8_utf16`将在外部 UTF-8 多字节序列和内部 UTF-16 数据之间进行转换。

没有内置方法可以在外部 UTF-16 多字节序列和内部 UTF-16 数据之间进行转换，这是在内部使用 UTF-16 编码的 wchar_t 字符串和在外部使用 UTF-16 编码的文件时想要的。

但是由于您指出 UTF-8 输出是可以接受的，因此 codecvt_utf8_utf16 方面将运行良好。

```
#include <fstream>
#include <codecvt>

int main() {
    std::wofstream mystream("test.txt");
    mystream.imbue(std::locale(std::locale(),
                   new std::codecvt_utf8_utf16<wchar_t, 0x10ffff, std::codecvt_mode(std::consume_header|std::generate_header)>));
    mystream << "Hello, World!\n";
} 
```

另请注意，此示例在 codecvt_utf8_utf16 方面设置选项以生成和读取所谓的“UTF-8 BOM”。这是微软猜测文件编码的惯例，在其他平台上通常不合适。

* * *

以下内容与手头的问题无关，但方面的生命周期管理与大多数其他现代 C++ 生命周期管理不同。

构面是引用计数的，当具有特定构面的最后一个语言环境被销毁时，该构面将被删除，除非已通过使用 refs 参数构造构面来明确禁用该构面`1`。上面的示例代码将生命周期管理留给了语言环境，因此看起来类似于内存泄漏。但是，代码是正确的。就异常安全而言，唯一可能在成功分配和本地环境假定的已分配对象的所有权之间运行的代码[`std::locale()`](http://en.cppreference.com/w/cpp/locale/locale/locale)是声明为 noexcept 的表达式。

另一种选择是使用不受区域设置管理的构面，并简单地确保它比区域设置和所有副本的寿命更长。使用具有静态存储持续时间的构面很简单，但请记住通过将其引用计数设置为 1 来指示语言环境不应删除构面。

```
static std::codecvt_utf8_utf16<wchar_t, 0x10ffff, std::codecvt_mode(std::consume_header|std::generate_header)> mycodecvt(1);
mystream.imbue(std::locale(std::locale(), mycodecvt)); 
```

如果语言环境仅在特定范围内短时间存在，那么您可以使用普通的局部变量。这与上述相同，但没有`static`. 只需确保在方面超出范围之前销毁语言环境（以及每个副本）。

这是智能指针无法让事情变得更好的一次，因为将所有权移交给智能指针无视对象是很棘手的。您必须弄清楚如何手动处理在语言环境收到构面并因此获得所有权但在智能指针放弃所有权之前发生的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:56:52.920

`wchar_t`，支持`wstream`和的类型，`wstring`取决于平台：在 Windows 上为 2 个字节，在某些（全部？）Linux 上为 4 个字节。所以你最终会写出“Unicode”，但究竟哪个 Unicode 会受到许多变量的影响。你可能会写 UTF32/UCS4，你最终可能会使用 UTF16/UCS2。

如果您想使用特定的、受良好控制的编码（例如 UTF8 或 UCS-2LE 与 UCS-2BE 来控制字节序）进行编写，那么您需要像[iconv](http://www.gnu.org/software/libiconv/)这样的东西。您还可以使用`std::locale`流[`imbue`](http://www.cplusplus.com/reference/iostream/ios/imbue/)，请参阅[https://stackoverflow.com/a/1275260/105929](https://stackoverflow.com/a/1275260/105929)。

# javascript - 从多维数组中提取值

> ID：12789278
> 
> 赞同：3
> 
> 时间：2012-10-08T20:51:07.920
> 
> 标签：javascript, loops, for-loop, multidimensional-array

我有很多汽车品牌和型号。我已经将品牌提取到一个单独的数组中，但我正在努力提取模型，同时还要保持它们与品牌的关联。

这是数组的示例：

```
var dataa = new Array
        (
            ['Acura','','Integra','Mdx','Rl','Rsx','Slx','Tl','Tsx'],
            ['Aixam','','400','505','600'],
            ['Alfa romeo','','145','146','147','155','156'],
            ['Aston martin','','.','DBS','Db7','Db9']); 
```

如您所见，我有一个多维数组，其中包含汽车品牌（位于`dataa[0][0]`），然后是一个空值，然后是该品牌的模型。

我正在使用此代码来获取汽车制造商：

这给了我每个嵌套数组的第一个值 -> dataa[i][0]：

```
for (var i = 0; i < dataa.length; i++) {
  document.write(dataa[i][0] + "<br>");
} 
```

我的问题从这里开始。

我不能提取所有模型并将它们分配给正确的汽车制造商。我尝试过 for 循环、带刹车的循环、while 循环和带条件语句的循环，但我做不到。

请在这里给我一些建议。jQuery 或其他一些技术会帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:53:15.687

在你的循环里面放一个循环。

```
for (var i = 0; i < dataa.length; i++) {
    document.write("<h2>Starting new inner loop!</h2><br>");
    for (var j = 0; j < dataa[i].length; j++) {
        document.write(dataa[i][j] + "<br>");
    }
} 
```

现在，对于外部 Array 中的每个 Array，您正在执行一个单独的循环。

[这是一个演示](http://jsfiddle.net/GJgUD/)

# javascript - 从点击加载变量数据

> ID：12789291
> 
> 赞同：1
> 
> 时间：2012-10-08T20:51:55.120
> 
> 标签：javascript, jquery

我有一些简单的链接，例如：

```
<a id="en">EN</a> <a id="fr">FR</a> etc... 
```

和以下代码：

```
$en = 'This is some data that should appear in the textarea for EN';
$de = '';
$es = '';
$fr = '';
$it = '';
$pl = '';
$pt = '';
$zhcn = '';
$zhtw = '';
$jp = '';

$(document).ready(function(){

    $('a').click(function(e){

        $code = $ + $(this).attr('id');

        $('textarea.code').val( $code );

    });

}); 
```

我想要做的是当用户单击链接时，从相关变量中获取数据并将其放入带有代码类的文本区域中。目前我刚刚得到：`function (a,b){return new e.fn.init(a,b,h)}en`

我该怎么做呢？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:56:44.580

你需要做：

```
$('a').click(function(e){

    var $code = "$" + $(this).attr('id');

    $('textarea.code').val( window[$code] );

}); 
```

假设变量是全局的。

这是[一个关于 JSFiddle 的演示](http://jsfiddle.net/AMXFn/)（由 wirey 提供）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:56:53.957

您可能希望使用对象来分组此信息。

```
var data = {
  "en" : "This is some data that should appear in the textarea for EN",
  "de" : "",
  "es" : "",
  "fr" : "",
  "it" : "",
  ...
} 
```

这样你就不需要弄乱了[`eval`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)。

```
var str = data[ this.id ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:00:40.813

首先，您有一个错字：`$ + $(this).attr('id');`应该是`"$" + $(this).attr('id');`. 但这不是真正的问题。

您正在将输入评估为文字字符串，而不是变量。因此， 的值`$code`被设置为文字字符串“$en”，而不是`$en`变量的值。

你可以用`eval($code)`它来做，但这是一个非常糟糕的主意。不要那样做。相反，您应该做的是安排您的变量，以便您可以按名称访问它们。有不止一种方法可以做到这一点，但我会这样做：

```
var data = {
    en: 'This is some data that should appear in the textarea for EN',
    de: '',
    es: '',
    fr: '',
    it: '',
    pl: '',
    pt: '',
    zhcn: '',
    zhtw: '',
    jp: ''
};

$(document).ready(function(){    

    $('a').click(function(e){    

        var $code = data[$(this).attr('id')];    

        $('textarea.code').val( $code );    

    });    
}); 
```

# html - 修复了 100% 宽度的 DIV 覆盖滚动条

> ID：12789299
> 
> 赞同：6
> 
> 时间：2012-10-08T20:52:21.773
> 
> 标签：html, css, stylesheet, css-position

我有一个包含大数据表的 div 页面。div 具有溢出值，`overflow-x:hidden;overflow-y:scroll;`而不是页面滚动，您只需使用此 div 的滚动条滚动即可。但是，表格标题（thead）是固定的，并且在您滚动时停留在 div 的顶部，但它覆盖了滚动条。
我希望表格标题是带有滚动条的 div 的 100%，但我希望它像表格的其余部分一样，而不是覆盖滚动条。
我已经在 Chrome、Firefox 和 IE9 中测试过，它们看起来都一样！

## HTML

```
 <div style='position:absolute;bottom:0;height:396px;width:100%;overflow-y:scroll;overflow-x:hidden;'>
  <table id='select-customer-results' style='margin-top:-1px;position:fixed;width:100%;'>
   <tr>
    <th style='width:15%;'>Code</th>
    <th style='width:85%;'>Name</th>
   </tr>
   </table>
   <div style='height:37px;'></div>
   <table id='select-customer-results'>
    <!--A lot of rows!-->
   </table>
  </div> 
```

​<h2>CSS

```
table#select-customer-results{
 width:100%;
 margin-top:-5px;
}
table#select-customer-results tr{
 border-bottom:1px solid #797979;
}
table#select-customer-results tr:nth-child(even){
 background:#EBF2F7;
}
table#select-customer-results td,table#select-customer-results th{
 font-family:Helvetica, Arial, sans-serif;
 padding:5px;
 border:1px solid #797979; 
}
table#select-customer-results td{
 cursor:pointer; 
}
table#select-customer-results tr.clickable:hover{
 background-color:#BCC2C6;
}
table#select-customer-results th{
 color:#FFF;
 padding:7px;
 padding-top:10px;
 font-weight:bold;
 text-align:left;
 box-shadow:0 2px 3px 0 #474747;
 -webkit-box-shadow:0 2px 3px 0 #474747;
 -moz-box-shadow:0 2px 3px 0 #474747;
 background: #878787;
 background: -moz-linear-gradient(top,  #878787 0%, #6E6E6E 50%, #5C5C5C 51%, #7B7B7B 100%);
 background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#878787), color-stop(50%,#6E6E6E), color-stop(51%,#5C5C5C), color-stop(100%,#7B7B7B));
 background: -webkit-linear-gradient(top,  #878787 0%,#6E6E6E 50%,#5C5C5C 51%,#7B7B7B 100%);
 background: -o-linear-gradient(top,  #878787 0%,#6E6E6E 50%,#5C5C5C 51%,#7B7B7B 100%);
 background: -ms-linear-gradient(top,  #878787 0%,#6E6E6E 50%,#5C5C5C 51%,#7B7B7B 100%);
 background: linear-gradient(to bottom,  #878787 0%,#6E6E6E 50%,#5C5C5C 51%,#7B7B7B 100%);
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#878787', endColorstr='#7B7B7B',GradientType=0 );
}​ 
```

### 这是 jsfiddle 上的示例：

[http://jsfiddle.net/Q3sbp/](http://jsfiddle.net/Q3sbp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:07:12.910

我注意到您的代码存在一些问题。首先，它不是[语义](http://en.wikipedia.org/wiki/Semantic_Web)的。标签的全部意义在于`th`它是机器可读的，但是您已经拆分了表格，以便您`th`的 s 用于没有内容的表格，而有内容的表格没有标题。另一个问题是您`id`对两个表都使用相同的。该`id`属性应该唯一地定义一个元素。如果您想将相同的样式应用于两个表，您应该给它们一个类。

除了这些，让我们看看一些解决方案。我的第一个想法是在`th`表格上设置一个负边距，这样它就出现在 div 之外（准确地说是在它上面）。但是，这不起作用，因为 div 的全部意义在于将其`overflow-y`设置为`scroll`. 因此，您应该做的是将表格的代码移到 div 之外。

这是[在 JSFiddle 上的样子](http://jsfiddle.net/Uy4JE/)。

我把代码改了一点。我去掉了`height: 35px`那里奇怪的div，也去掉了绝对定位。绝对定位两者以使它们对齐并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:06:41.787

`position:fixed`你需要在他的标题表上起飞。此外，您还需要删除`<div style='height:37px;'></div>`，因为它在标题后添加了不必要的空间。这是[更新的小提琴](http://jsfiddle.net/Q3sbp/4/)。

# xpath - 将 XPath 转换为 CSS

> ID：12789300
> 
> 赞同：0
> 
> 时间：2012-10-08T20:52:23.820
> 
> 标签：xpath, css-selectors

```
//td[@class='Bu']/following::td[@class='Bu']

```

或者

```
//td[@class='Bu'][2]

```

使用 XPath 时两者的结果相同，那么如何将它们更改/转换为 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:56:58.920

如果第二个`td.Bu`是跟随兄弟（意味着他们共享同一个父级），或者他们的父级是兄弟姐妹并且只有两个，则只能使用 CSS 选择器执行此操作：

```
td.Bu ~ td.Bu 
```

如果它们完全不相关，那么使用 CSS 是不可能的。

# mongodb - 显式连接到 Mongo 副本集有什么好处？

> ID：12789307
> 
> 赞同：3
> 
> 时间：2012-10-08T20:52:47.390
> 
> 标签：mongodb

显然，我知道为什么要使用副本集。

但是，我对直接连接到 PRIMARY mongo 实例和连接到副本集之间的区别感到困惑。具体来说，如果我使用 Mongoose 从我的 node.js 应用程序连接到 Mongo，是否有令人信服的理由使用 connectSet() 而不是 connect()？我会假设连接（）仍然存在故障转移的好处，但也许这就是我错的地方......

我问的原因是，在猫鼬中，connectSet() 方法似乎记录较少且使用良好。但是，我无法想象您不想连接到集合的场景，因为建议始终在 3x+ 副本集上运行 Mongo...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:18:21.433

如果您只连接到主服务器，那么您将获得故障转移（也就是说，如果主服务器发生故障，将会有一个短暂的暂停，直到选出新的主服务器）。副本集中的复制也使备份更容易。缺点是所有写入和读取都转到单个主节点（MongoDB 副本集一次只有一个主节点），因此它可能成为瓶颈。

另一方面，允许与从属设备的连接允许您扩展读取（而不是写入 - 那些仍然必须转到主服务器）。您的吞吐量不再受运行主节点的机器规格的限制，而是可以分布在从属节点周围。但是，您现在遇到了一个新的陈旧读取问题；也就是说，您有可能从从站读取过时的数据。

现在认真考虑一下您的应用程序的行为方式。阅读量大吗？它需要扩展多少？它可以在某些情况下处理陈旧的数据吗？

顺便说一句，副本集中至少 3 个成员的目的是提供弹性和安全复制，*而不是*提供多个节点来连接。如果您有 3 个节点并且丢失了一个，您仍然有足够的节点来选择新的主节点*并*复制到备份节点。

# mysql - 这个 MySQL 多表连接好吗？

> ID：12789312
> 
> 赞同：3
> 
> 时间：2012-10-08T20:53:14.847
> 
> 标签：mysql

我有一张表`service_contacts` ，可以包含`listids`表`lists`和表中`contactids`的内容`contacts`。 有和表`contact_list_relationship`之间的关系。`contacts``lists`

我正在尝试提取可能在 a `contactid`in`service_contacts`或 a `listid`（每个列表包含`contactids`）中的所有联系人。

```
SELECT d.* FROM service_contacts a 
LEFT JOIN lists b 
    ON a.calllistid=b.listid
LEFT JOIN contact_list_relationship c 
    ON c.listid=b.listid
INNER JOIN contacts d
    ON d.contactid=c.contactid OR d.contactid=a.contactid
WHERE a.memberid=12345 
```

这运行，并拉出预期的结果。到目前为止......我只是想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:35:47.273

假设您要加入的字段已编入索引/或最好使用`FOREIGN KEY`约束定义（强制索引），您应该没问题。

然而 MySQL 并不总是使用索引，即使它们可用。要检查正在使用的索引，您可以对您的语句运行解释，即

```
EXPLAIN 
SELECT d.* FROM service_contacts a 
LEFT JOIN lists b 
    ON a.calllistid=b.listid
LEFT JOIN contact_list_relationship c 
    ON c.listid=b.listid
INNER JOIN contacts d
    ON d.contactid=c.contactid OR d.contactid=a.contactid
WHERE a.memberid=12345; 
```

结果将通知您在语句中使用了哪些索引。如果结果不符合预期，您可以强制 Mysql 使用索引，方法是*`indexname`*在每次引用表后声明 'force key for join。

# java - Java：使用 OOP 构建用户控制系统

> ID：12789319
> 
> 赞同：1
> 
> 时间：2012-10-08T20:53:28.530
> 
> 标签：java, swing, oop, class

我希望我能解释一下。

我没有问题，只是我想知道如何构建我的用户系统控制，我想知道我的想法是否正确：

我的点子：

*一类（文件1）函数，方法和操作

*摆动元素、按钮、文本框等的其他类（文件 2）。

*但我不知道如何连接这两个类。

例如：：我有2个文本框（用户，密码）和一个按钮，然后当按下按钮时，将每个文本框（文件2）的数据发送到一个函数（文件1）并处理。

如果你有其他选择，我会读它。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:11:55.670

您应该使用[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模式来解决您的问题。基本上，您的视图（swing 文件）只知道如何显示内容，并让类（控制器）的用户订阅以在内容更改时接收通知（这是通过 swing 侦听器完成的）。当内容更改时，控制器可以对其进行操作，必要时修改模型并更新视图（同样，使用视图提供的方法）。

GUI 不应该涉及功能。它应该只包含用于显示您想要的内容的代码。这有助于创建更好的架构。

# objective-c - 从视图 1 到视图 2

> ID：12789345
> 
> 赞同：0
> 
> 时间：2012-10-08T20:56:20.743
> 
> 标签：objective-c, ios, cocoa-touch, storyboard

我被困在我的代码中。当用户登录时，我无法转到另一个视图。

我有一个类 UILoginClass (Tableviewcontroller) 和一个类 ImageViewController (viewcontroller)。

检查下面的图像。

我想从 UILoginClass 到 ImageViewController 但我做不到。有人帮忙吗？

![在此处输入图像描述](../Images/514943d69a3044d883f3afa08f0ca38f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:14:45.027

1) 创建一个从登录屏幕的视图控制器到图像视图控制器的“推送”segue（按 ctrl 并从源视图控制器图标拖动到目标视图控制器）。

![ctrl+从源视图控制器拖动到目标视图控制器](../Images/35c81f3342b25d9a4debffc8cb7de1d1.png)

2）给那个segue一个标识符（单击IB中的序列->属性检查器->标识符。它只是一个字符串标识符，允许您在需要时启动该segue。

3) 在代码中，当登录被验证时，调用 performSegueWithIdentifier:sender: 与你给 segue 的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:01:19.863

听起来您想要的是从登录类到图像视图控制器的推送序列。在 Xcode 故事板中，您可以通过在源中按住 ctrl 单击并拖动到目标来添加转场。一定要给segue一个名字。然后在 Login Class 中可以调用 UIViewController 方法 performSegueWithIdentifier:sender:。

哦，你可以摆脱从导航控制器到图像视图控制器的推送序列。

# php - 为什么在 CodeIgniter 中完全调用 sess_update？

> ID：12789347
> 
> 赞同：5
> 
> 时间：2012-10-08T20:56:23.067
> 
> 标签：php, codeigniter

为什么在 CodeIgniter 中完全需要更新 session Id。我知道您可以控制在配置中更新会话 ID 的频率。但是为什么他们每 5 分钟（默认）更改一次会话的 ID？

为什么不能创建一次会话并且在会话过期之前使用相同的 id？

更新会话的函数在这里：

```
/**
 * Update an existing session
 *
 * @access  public
 * @return  void
 */
function sess_update()
{
    // We only update the session every five minutes by default
    if (($this->userdata['last_activity'] + $this->sess_time_to_update) >= $this->now)
    {
        return;
    }

    // Save the old session id so we know which record to
    // update in the database if we need it
    $old_sessid = $this->userdata['session_id'];
    $new_sessid = '';
    while (strlen($new_sessid) < 32)
    {
        $new_sessid .= mt_rand(0, mt_getrandmax());
    }

    // To make the session ID even more secure we'll combine it with the user's IP
    $new_sessid .= $this->CI->input->ip_address();

    // Turn it into a hash
    $new_sessid = md5(uniqid($new_sessid, TRUE));

    // Update the session data in the session data array
    $this->userdata['session_id'] = $new_sessid;
    $this->userdata['last_activity'] = $this->now;

    // _set_cookie() will handle this for us if we aren't using database sessions
    // by pushing all userdata to the cookie.
    $cookie_data = NULL;

    // Update the session ID and last_activity field in the DB if needed
    if ($this->sess_use_database === TRUE)
    {
        // set cookie explicitly to only have our session data
        $cookie_data = array();
        foreach (array('session_id','ip_address','user_agent','last_activity') as $val)
        {
            $cookie_data[$val] = $this->userdata[$val];
        }

        $this->CI->db->query($this->CI->db->update_string($this->sess_table_name, array('last_activity' => $this->now, 'session_id' => $new_sessid), array('session_id' => $old_sessid)));
    }

    // Write the cookie
    $this->_set_cookie($cookie_data);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:54:15.637

这是出于安全原因，以防止欺骗。会话被加密并存储在您的 Cookie 中。任何人都可以复制您的 Cookie 并转到另一台 PC 并登录。

假设会话没有过期。这意味着如果我在你的电脑上窃取你的 cookie，我可以从任何地方登录，因为我在 cookie 中加密了你的会话 ID。如果框架每 5 分钟更新一次会话，这几乎是不可能发生的。

如果你不喜欢它的工作方式，你总是可以通过扩展 Codeigniter 核心系统的库来为 Sessions 创建自己的库。虽然不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:54:07.943

这是一项安全功能。

谷歌

会话劫持会话固定

例如，您至少应该在用户登录系统时更改会话 ID。

> 通过登录创建新会话的用户应使用 session_regenerate_id 函数分配一个新的会话 ID。劫持用户会在登录前尝试设置他的会话 ID；如果您在登录时重新生成 ID，则可以避免这种情况。

您可以在此处阅读有关会话安全的更多信息：

[php 安全最佳实践](https://stackoverflow.com/questions/3012315/php-security-best-practices#answer-3012330)
[如何创建防弹会话](http://blog.teamtreehouse.com/how-to-create-bulletproof-sessions)

# sql - SQL - WHERE 子句中的派生字段

> ID：12789349
> 
> 赞同：2
> 
> 时间：2012-10-08T20:56:32.907
> 
> 标签：sql, sql-server

> **可能重复：**
> [sql server 使用计算列](https://stackoverflow.com/questions/8135774/sql-server-use-computed-column)

有没有办法做到这一点：

```
select Name, 
    (SELECT Max(reference) 
        from Rematch 
        WHERE Gender='M' and convert(varchar,getdate,103) = '08/10/2012'
    ) As MaxReferenceMale, 
    (SELECT Max(reference) 
        from Rematch 
        WHERE Gender='F' and convert(varchar,getdate,103) = '08/10/2012'
    ) As MaxReferenceFemale
WHERE (Gender='M' and Reference > MaxReferenceMale) Or 
    (Gender='F' and Reference > MaxReferenceFemale) 
```

我意识到可能有更好的方法来编写查询。是否可以在 WHERE 子句中引用 MaxReferenceFemale 和 MaxReferenceMale？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:59:06.883

贴一个

```
SELECT * FROM (...) WHERE ... 
```

围绕您的查询。一旦 WHERE 子句位于外部 SELECT 的内部，您就可以在 WHERE 子句中使用别名列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:59:24.693

如果要在`WHERE`子句中引用它们，则需要一个子查询：

```
SELECT *
FROM
(
   select Name,  Gender, Reference 
      (SELECT Max(reference) 
        from Rematch 
        WHERE Gender='M' and convert(varchar,getdate,103) = '08/10/2012') As MaxReferenceMale, 
      (SELECT Max(reference) 
        from Rematch WHERE Gender='F' and convert(varchar,getdate,103) = '08/10/2012') As MaxReferenceFemale
) x
WHERE (Gender='M' and Reference > MaxReferenceMale) 
    Or (Gender='F' and Reference > MaxReferenceFemale) 
```

查看您的原始查询，您似乎`FROM`在查询中缺少一个子句，因此使用子查询的语法将类似于：

```
select x.name, x.MaxReferenceMale, x.MaxReferenceFemale
from rematch r
left join
(
    select Name, 
        (SELECT Max(reference) 
            from Rematch 
            WHERE Gender='M' and convert(varchar,getdate,103) = '08/10/2012'
        ) As MaxReferenceMale, 
        (SELECT Max(reference) 
            from Rematch 
            WHERE Gender='F' and convert(varchar,getdate,103) = '08/10/2012'
        ) As MaxReferenceFemale
    from rematch
) x
    on r.name = x.name
WHERE (r.Gender='M' and r.Reference > x.MaxReferenceMale) Or 
    (r.Gender='F' r.and Reference > x.MaxReferenceFemale) 
```

# clojure - Clojure 动态绑定

> ID：12789350
> 
> 赞同：8
> 
> 时间：2012-10-08T20:56:39.430
> 
> 标签：clojure, dynamic-scope

我意识到以下是一个坏主意，原因有很多。我还意识到，鉴于我的 stackoverflow 代表为 23，因此很自然地假设我是一个学习编程的新手。但是，请幽默我，并专注于“我们如何做到这一点”而不是“你为什么要这样做/你不想这样做”方面。

我想要的是：

```
(def dog (Dog. ...))
(def cat (Cat. ...))

(with-animal dog
  (println (str "Dog: " (speak) "\n")))
(with-animal cat
  (println (str "Cat: " (speak) "\n"))) 
```

输出：

```
Dog: woof
Cat: meow 
```

所以基本上，我希望*with-animal*成为一个宏，所有出现的“speak”函数调用都映射到我正在调用块的对象。

特别是，我不想写：

```
(let-binding [speak (fn [] "woof")] ...)
(let-binding [speak (fn [] "meow")] ...) 
```

相反，我希望 with-animal 将*speak*函数映射到我正在调用的对象的某个方法。

在 Clojure 中有没有一种干净的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T21:46:53.797

动态绑定的存在是有原因的，它有很多很好的用途，所以不用担心因为试图理解它而被激怒:-) 在许多旧的 Clojure 教程中存在一些混淆，这些教程早于添加 ^:dynamic 元数据的需要到您希望动态重新绑定的变量。

第一个示例通过重新绑定现有名称来使用动态绑定。这消除了宏引入新符号的需要：

* * *

首先制作一些动物，我在这个例子中只是使用地图，很多人会使用一些其他类型的对象：

```
(def dog {:sound #(str "wooooof")})
(def cat {:sound #(str "mewwww")}) 
```

将我们将要重新绑定的函数定义为动态的（允许重新绑定）

```
(defn :^dynamic speak [] (println "eh?")) 
```

编写一个基本的模板宏来绑定动物中的函数：

```
(defmacro with-animal [animal & body] 
    `(binding [speak (:sound ~animal)] 
       ~@body)) 
```

并测试它：

```
(with-animal dog  
  (println (str "Dog: " (speak) "\n")))
Dog: wooooof 
```

* * *

现在是“高级版本”，它只是`speak`使用 let 将符号引入范围，而不需要动态绑定。这并不是说绑定在某些方面不好，它只是更符合你不写的愿望。`(let-binding [speak (fn [] "meow")] ...)`这种类型的 maco 称为照应（如果你喜欢这样花哨的名字）：

重要的部分是显式将非限定符号引入范围`~'`的符号之前：`speak`

```
user> (defmacro with-animal [animal & body]
    `(let [~'speak (:sound ~animal)] 
        ~@body))
#'user/with-animal

user> (with-animal dog 
        (println (str "Dog: " (speak) "\n")))
Dog: wooooof 

nil 
```

* * *

我希望这两个示例之间的对比有助于回答您关于将行为从对象绑定到范围的问题。第一个示例绑定了 maco 主体的值以及从该主体调用的任何内容。第二个示例只为宏的主体引入名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T15:09:50.920

如果您真的想让动物类型说话惯用，请使用 Clojure 协议：

```
(defprotocol ISpeak
  (speak [animal] "make the type say it's thing"))

(deftype Dog []
  ISpeak
  (speak [this] "Woof!"))

(deftype Cat []
  ISpeak
  (speak [_] "Meow!!")) ;;you can "drop" the item if not used using _

(def a-dog (Dog.))
(speak a-dog)
;;=>"Woof!"

(def a-cat (Cat.))
(speak a-cat)
;;=>"Meow!!" 
```

请注意，您可以使用 speak 方法扩展任何类型（类）。

```
(extend java.util.Random
  ISpeak
  {:speak (fn [_] "I'm throwing dices at you!")})

(speak (java.util.Random.))
;;=>"I'm throwing dices at you!" 
```

Java 类的语法略有不同，请参阅[协议文档](http://clojure.org/protocols)以获取更多信息。

# json - 带有 JSON 结果示例的 Bing Search HTTP 请求？

> ID：12789355
> 
> 赞同：5
> 
> 时间：2012-10-08T20:56:54.727
> 
> 标签：json, curl, bing

请帮助找出以 JSON 格式返回结果的必应搜索请求的参数。
文档“迁移 Bing 搜索 API 应用程序”告诉我们：
`To authenticate a Bing Search API request with Windows Azure Marketplace, you must obtain an account key. This mode of authentication replaces the AppID used in the Bing Search API 2.0.`

另一方面，同一文档提供了以下仍然使用 Appid 的示例：

```
http://api.search.live.net/xml.aspx?Appid=App&query=odata&sources=web&count=2 
```

以下请求：

```
curl "https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/v1/Web?Query=%27xbox%27&$top=50&$format=json$accountKey=TPP....VRTWiq4=$Appid=conceptor" 
```

导致以下错误：
`The authorization type you provided is not supported. Only Basic and OAuth are supported`

请给出一个 Bing 搜索 URL 的示例，该 URL 可用于 CURL 命令行以获取 JSON 格式的搜索结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-24T22:35:08.687

您需要在基本身份验证标头中将您的应用密钥作为 Base64 编码字符串发送。

```
Authorization: Basic {{ encoded_app_key }} 
```

顺便说一句，上一个答案链接到旧 Bing api 的概述，因此如果您使用数据市场 api，则无用。

这是您使用 jQuery 的示例。

```
$.ajax({
    type:'POST',
    url:url,
    headers: {
        "Authorization": "Basic " + encodedAppKey
    }
}).done(function(data) { 
    alert(data);
}); 
```

有用的链接：[http ://social.msdn.microsoft.com/Forums/windowsazure/en-US/9f085915-81b6-488d-a348-1c3ca769d44f/migrating-to-windows-azure-bing-search-api-with-jquery -jsonp](http://social.msdn.microsoft.com/Forums/windowsazure/en-US/9f085915-81b6-488d-a348-1c3ca769d44f/migrating-to-windows-azure-bing-search-api-with-jquery-jsonp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:44:54.913

现在，您应该只使用 datamarket.azure 风格的 API 调用。旧的不能再工作了。身份验证的一个很大区别是您不需要在查询 URL 中包含您的 AppID。将弹出一个身份验证窗口，您只需提供您的默认帐户密钥（或您在帐户中创建的任何密钥）。看到这个[非常好的新 Bing API 总结](https://stackoverflow.com/questions/10844463/bing-search-api-and-azure)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-16T22:19:34.127

所有这些答案现在都已经过时了。您必须使用 JSONP 才能向不同的 URL 发出请求。

在 ajax 请求中使用：

类型：'POST'，jsonp：“jsonp”，

# javascript - 使用 JS 从不同页面获取图像源 URL

> ID：12789358
> 
> 赞同：2
> 
> 时间：2012-10-08T20:57:08.613
> 
> 标签：javascript, ajax, jquery

每个人：

我试图从一个页面中获取图像的源 URL，并在另一个页面的一些 JavaScript 中使用它们。我知道如何使用 JQuery .load() 提取图像。但是，我不想加载所有图像并将它们显示在页面上，而是只想获取源 URL，以便可以在 JS 数组中使用它们。

第 1 页只是一个带有图像的页面：

```
<html>
  <head>
  </head>
  <body>
    <img id="image0" src="image0.jpg" />
    <img id="image1" src="image1.jpg" />
    <img id="image2" src="image2.jpg" />
    <img id="image3" src="image3.jpg" />
  </body>
</html> 
```

第 2 页包含我的 JS。（请注意，最终目标是将图像加载到数组中，将它们随机化，并使用 cookie，每 10 秒在页面加载时显示一个新图像。所有这些都有效。但是，而不是将图像路径硬编码到我的 javascript 中如下图所示，我更喜欢根据它们的 ID 从第 1 页获取路径。这样，图像不会总是需要标题为“image1.jpg”等）

```
<script type = "text/javascript">
        var days = 730;
        var rotator = new Object();
        var currentTime = new Date();
        var currentMilli = currentTime.getTime();
        var images = [], index = 0;
        images[0] = "image0.jpg";
        images[1] = "image1.jpg";
        images[2] = "image2.jpg";
        images[3] = "image3.jpg";
        rotator.getCookie = function(Name) { 
            var re = new RegExp(Name+"=[^;]+", "i"); 
            if (document.cookie.match(re)) 
                return document.cookie.match(re)[0].split("=")[1];
                return''; 
        }
        rotator.setCookie = function(name, value, days) { 
            var expireDate = new Date();
            var expstring = expireDate.setDate(expireDate.getDate()+parseInt(days));
            document.cookie = name+"="+value+"; expires="+expireDate.toGMTString()+"; path=/";
        }
        rotator.randomize = function() {
            index = Math.floor(Math.random() * images.length);
            randomImageSrc = images[index];
        }
        rotator.check = function() {
            if (rotator.getCookie("randomImage") == "") {
                rotator.randomize();
                document.write("<img src=" + randomImageSrc + ">");
                rotator.setCookie("randomImage", randomImageSrc, days);
                rotator.setCookie("timeClock", currentMilli, days);
            }
            else {
                var writtenTime = parseInt(rotator.getCookie("timeClock"),10);
                if ( currentMilli > writtenTime + 10000 ) {
                    rotator.randomize();
                    var writtenImage = rotator.getCookie("randomImage")
                    while ( randomImageSrc == writtenImage ) {
                        rotator.randomize();
                    }
                    document.write("<img src=" + randomImageSrc + ">");
                    rotator.setCookie("randomImage", randomImageSrc, days);
                    rotator.setCookie("timeClock", currentMilli, days);
                }
                else {
                    var writtenImage = rotator.getCookie("randomImage") 
                    document.write("<img src=" + writtenImage + ">");
                }
            }
        }
        rotator.check()
    </script> 
```

谁能指出我正确的方向？我的直觉是使用 JQuery .get()，但到目前为止我还没有成功。

如果我能澄清，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:29:35.180

尝试这个。

```
<script>
$.get('http://path/to/page/1', function(data) {
    var imgs = $('<div/>').html(data).find('img');
    imgs.each(function(i, img) {
        alert(img.src); // show a dialog containing the url of image
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:26:39.720

我不明白您为什么要为此使用 cookie。您应该获取 page1，找到图像，然后使用 setInterval 更新 src。

```
$.get('page1.html', function(data, status) { // get the page with the images
    var parser = new DOMParser();
    var xmldoc = parser.parseFromString(data, "text/html");  //turn it into a dom

    var imgs = xmldoc.getElementsByTagName('img'); //get the img tags
    var imageSrcs = Array.prototype.slice.call(imgs).map(function(img) {
       return img.src; //convert them to an array of sources
    });

    setInterval(function() { // run this every 10 seconds
        var imags = document.getElementsByTagName('img'); // find the images on this page
        Array.prototype.slice.call(imgs).forEach(function(img) {
             var imgSrc = Math.floor(Math.random()*imageSrcs.length);  //get a random image source
             img.src = imageSrcs[imgSrc];  //set this image to the src we just picked at random
        });
    }, 10000);

}, 'html'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:35:20.287

为什么不使用ajax？您可以将包含所有图像的外部页面部分 .load() 放入隐藏容器中，然后通过回调推断您需要的信息。

外部.html

```
<html>
....
    <div id="imgContainer">
         <img id="image0" src="image0.jpg" />
         <img id="image1" src="image1.jpg" />
         <img id="image2" src="image2.jpg" />
         <img id="image3" src="image3.jpg" />
    </div>
</html> 
```

ajax.js

```
function ajaxContent(reg, extReg) {

var toLoad = 'external.html' + extReg;

function loadContent() {
    $(reg).load(toLoad,'',getSrcPaths())
}

function getSrcPaths() {
    $(reg + ' #image0').delay(200).fadeIn('slow');
    $(reg + ' #image1').delay(200).fadeIn('slow');
    // or however you want to store/display the images
}
} 
```

然后 onload 只需调用 ajaxContent 之类的

```
<body onload="ajaxContent('#hiddenContainer','#imgContainer')">
     ....
</body> 
```

如果您的图像很大或页面加载受到负面影响，这当然不是真正相关的。尽管由于您现在实际上拥有图像，您甚至可以只显示它们而不是隐藏它们。我想这取决于您需要操纵多少原件。

# java - Java EE：如何获取我的应用程序的 URL？

> ID：12789359
> 
> 赞同：4
> 
> 时间：2012-10-08T20:57:13.390
> 
> 标签：java, jakarta-ee

在 Java EE 中，如何动态检索应用程序的完整 URL？

例如，如果 URL 是`"localhost:8080/myapplication/"`，我想要一个可以简单地将其返回给我的方法，无论是作为字符串还是其他东西。

我将 GlassFish 作为应用程序服务器运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T20:59:36.640

在您有权访问的任何 servlet 或过滤器中`HttpServletRequest`，您可以查看客户端使用什么 URL 来访问您的应用程序，例如 try [`HttpServletRequest.getRequestURL()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL())。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-01T09:43:36.067

在 JSF 中，我能够使用以下辅助函数相对轻松地实现这一点（您所需要的只是对 的引用`HttpServletRequest`：

```
public static String getRequestUrl() {
    HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    StringBuffer requestURL = request.getRequestURL();
    if (request.getQueryString() != null) {
        requestURL.append("?");
        requestURL.append(request.getQueryString());
    }
    return requestURL.toString();
} 
```

# parsing - Haskell - 从输入执行基本前缀操作

> ID：12789361
> 
> 赞同：1
> 
> 时间：2012-10-08T20:57:16.967
> 
> 标签：parsing, haskell, matching

> **可能重复：**
> [Haskell 解析器到 AST 数据类型，赋值](https://stackoverflow.com/questions/12712149/haskell-parser-to-ast-data-type-assignment)

我被困在一个问题上，我已经有一段时间了。我得到了一个字符串表，目的是使用前缀运算符计算一系列 Int 值，这些前缀运算符与数字一起作为输入输入。

这个想法是在控制台中写ie“+ 3 * 2 4”并让它计算3 +（2 * 4），然后输出答案。我对 Haskell 还很陌生，我会很感激一些帮助。谢谢。

我编写了一些代码来将字符串解析为字符串表，其中每个数字和运算符作为字符串表中的单个元素导入 Data.Char

```
 import Data.Char

    data AST = Leaf Int | Sum AST AST | Min AST | Mult AST AST

    parseCharacter :: String -> [String]
    parseCharacter [] = []
    parseCharacter (' ':xs) = parseCharacter xs
    parseCharacter ('(':xs) = "(": parseCharacter xs
    parseCharacter (')':xs) = ")": parseCharacter xs
    parseCharacter ('+':xs) = "+": parseCharacter xs
    parseCharacter ('-':xs) = "-": parseCharacter xs
    parseCharacter ('*':xs) = "*": parseCharacter xs
    parseCharacter (x:xs) = if isDigit x then (takeWhile isDigit (x:xs)) : parseCharacter (dropWhile isDigit xs) else parseCharacter xs 
```

# facebook-graph-api - 网站的 Facebook 洞察与现场 Facebook 按钮数不匹配

> ID：12789362
> 
> 赞同：2
> 
> 时间：2012-10-08T20:57:18.497
> 
> 标签：facebook-graph-api, social-networking, facebook-insights

我将 Facebook Insights 用于网站和我网站上的 Facebook 按钮。但是，两者报告的数据并不匹配。按钮报告的计数似乎总是明显高于 Facebook Insights 中报告的计数。

例如，此页面[http://www.appmyworld.com/blog/top-5-iphone-and-ipad-apps-of-the-week-10412.html](http://www.appmyworld.com/blog/top-5-iphone-and-ipad-apps-of-the-week-10412.html)的 Facebook 计数为 52，它由根据 AddThis 获得 19 次赞、21 次分享和 12 条评论，并由[http://sharedcount.com确认](http://sharedcount.com)

但是，进入我的网站的 Facebook Insights 并查看该特定页面，它仅显示 4 个总操作，由 1 个赞和 3 个分享组成。至少我希望它显示总共 40 个，由 19 个喜欢和 21 个分享组成（我不确定它会跟踪 12 条评论）。

关于为什么会发生这种情况的任何想法？我担心的是，如果我们的网站没有因为 Facebook 活动而获得信誉？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:35:37.937

您从哪个小组获得 Facebook 洞察数据？确保您的应用 ID 在您的页面上正确无误，并确保您考虑了正确的时间范围。您可以在此处阅读有关如何使用 Facebook Insights 的信息：[https ://developers.facebook.com/docs/insights/](https://developers.facebook.com/docs/insights/)

# linker - autoconf 无法链接我的目标文件 - 未定义对 `Gtk::Main::Main 的引用（静态库问题？）

> ID：12789366
> 
> 赞同：1
> 
> 时间：2012-10-08T20:57:38.777
> 
> 标签：linker, autotools

我复活了我的一些旧代码，令人沮丧的是我现在无法编译。链接时未定义的引用错误表明存在一些奇怪的静态库问题，但是当我链接到对我来说没有意义的标准 gtkmm 库时。

我正在使用 GNU autotools 并且从头开始，即：

```
aclocal
automake --gnu --add-missing
autoconf
./configure
make 
```

我已将问题简化为一个非常简单的测试用例：

```
#include <gtkmm/main.h>
#include <gtkmm/window.h>

int main(int argc, char *argv[])
{
    Gtk::Main kit(argc, argv);
    Gtk::Window window;
    Gtk::Main::run(window);

    return EXIT_SUCCESS;
} 
```

并在链接时调用 g++：

```
g++ `pkg-config gtkmm-2.4 --cflags` -ggdb -g -O2 `pkg-config gtkmm-2.4 --libs`  -o simple src/simple.o 
```

这导致

```
src/simple.o: In function `main':
/home/ben/projects/qctviewer/src/simple.cpp:6: undefined reference to `Gtk::Main::Main(int&, char**&, bool)' 
```

但我可以像这样手动链接：

```
g++ -ggdb -g -O2 -o simple src/simple.o `pkg-config gtkmm-2.4 --cflags` `pkg-config gtkmm-2.4 --libs` 
```

* * *

也许我的自动工具设置有问题，所以供参考：

生成文件.am

```
AUTOMAKE_OPTIONS = subdir-objects
AM_CXXFLAGS = `pkg-config gtkmm-2.4 --cflags` -ggdb
AM_LDFLAGS = `pkg-config gtkmm-2.4 --libs`   
bin_PROGRAMS = simple   
simple_SOURCES = src/simple.cpp 
```

配置.ac

```
AC_PREREQ([2.68])
AC_INIT([qctviewer], [0.4.0], [ben@zass.bangham.com], [qctviewer], [http://bangham.com/qctviewer])
AC_CONFIG_SRCDIR([src/palette.cpp])
AC_CONFIG_HEADERS([config.h])
AC_PROG_CXX
AC_PROG_CC
AC_HEADER_STDBOOL
AM_INIT_AUTOMAKE([1.9 foreign])
AC_CONFIG_FILES([Makefile])
AC_OUTPUT 
```

如果相关，安装的相关库是：

```
ben@linux:~$ dpkg --get-selections | grep gtkmm
libgtkmm-2.4-1c2a               install
libgtkmm-2.4-dev                install
libgtkmm-3.0-1              install
libgtkmm-3.0-dev                install 
```

我已经对 3.0 库运行了这个，结果相同。

TIA，本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:23:36.293

Doh，我终于找到了指向答案的神奇搜索词。

[错误位置的链接器标志](https://stackoverflow.com/questions/4241683/linker-flags-in-wrong-place?rq=1)表明我误用了 LDFLAGS，应该改用 LDADD。

添加到configure.ac：

```
PKG_CHECK_MODULES([libgtkmm], [gtkmm-3.0]) 
```

在 Makefile.am 中修改：

```
AM_CXXFLAGS = ${libgtkmm_CFLAGS}
# AM_LDFLAGS ....
simple_LDADD = ${libgtkmm_LIBS} 
```

# ruby-on-rails - 通过 Ruby on Rails 使用 wget

> ID：12789369
> 
> 赞同：6
> 
> 时间：2012-10-08T20:57:48.053
> 
> 标签：ruby-on-rails, webserver, wget

我想建立一个简单的网站，可以`www.example.com/index.html`在客户端请求时下载网页并将其快照存储在服务器上。我正在考虑使用命令`wget`下载网页。Ruby on Rails 能够处理这个任务吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T21:06:35.640

是的。

您可以[通过反引号、 exec 和 system 在 Ruby 中执行 shell 命令](http://rubyquicktips.com/post/5862861056/execute-shell-commands)。请注意，每个返回的东西都略有不同：

1.  后记号

    ```
    `wget http://www.yahoo.com` 
    ```

2.  `exec`：

    ```
    exec('wget http://www.yahoo.com') 
    ```

3.  `system`：

    ```
    system('wget http://www.yahoo.com') 
    ```

[这篇博客文章](http://blogforever.eu/blog/2011/05/21/creating-a-snapshot-of-a-blog-post-using-wget/)似乎与您正在尝试做的事情相同。

此外，还有几个很棒的 Ruby 库可以做到这一点：

1.  [mechanize](http://mechanize.rubyforge.org/) with [mechanize download](http://mechanize.rubyforge.org/Mechanize/Download.html) - 看看这个[railscast](http://railscasts.com/episodes/191-mechanize)
2.  [httparty - 一个](https://github.com/jnunemaker/httparty)[更难使用的 http 库的](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)简单包装器。获得响应正文后，您需要将其保存到数据库或文件中。
3.  [typhoeus](https://github.com/typhoeus/typhoeus) - 如果您需要这种能力，可以并行发出 http 请求的简单机制

它们将提供一个更干净的 Ruby 接口来处理从各种请求返回的数据。

* * *

测试所有这些选项的最佳方法是使用 Rails 控制台。转到 Rails 应用程序的根目录并键入：

```
rails c 
```

进入控制台后，您可以模拟实际的服务器调用。

在控制台中运行`wget`会将文件放在 Rails 根目录中，这不是您想要的。`tmp`是此类事物的标准目录。您可以根据 URL 动态生成路径，如下所示：

```
# tmp directory
path = Rails.root.join('tmp')
# create sub-directory as md5 hash based on URL
sub_dir = Digest::MD5.hexdigest(url)
# append sub_dir on the path
destination_path = path.join(sub_dir) 
system("wget -P #{destination_path} #{url}") 
```

确保还包括[这篇文章中的选项](http://blogforever.eu/blog/2011/05/21/creating-a-snapshot-of-a-blog-post-using-wget/)

# ember.js - Ember.js 控制器“init”方法进行身份验证

> ID：12789370
> 
> 赞同：0
> 
> 时间：2012-10-08T20:57:57.070
> 
> 标签：ember.js

我需要一个控制器，将其用作所有其他控制器的父级。我需要能够检查登录状态，我不想通过手动调用一个方法来做到这一点——我在想父控制器必须有某种方法，它可能会被自动调用。

但我找不到任何东西。对此有什么想法吗？

# objective-c - 无法将按钮连接到文件的所有者

> ID：12789375
> 
> 赞同：0
> 
> 时间：2012-10-08T20:58:14.260
> 
> 标签：objective-c, ios, xcode, uibutton

我刚刚开始使用 X-code（现在坚持使用 3.2.6）并且遇到了与这篇文章中描述的类似的问题： [Connect a UILabel in Interface Builder and XCode?](https://stackoverflow.com/questions/3826906/connect-a-uilabel-in-interface-builder-and-xcode) ，但仍然无法弄清楚我要去哪里错了。

当我按住 ctrl 单击按钮并拖动到文件所有者图标时，我知道应该弹出一个菜单，但没有任何反应。

任何想法都非常感谢。

这是 MyHelloWorldViewController.h 的代码：

```
#import <UIKit/UIKit.h>

@interface MyHelloWorldViewController : UIViewController {

}

- (IBAction) myButtonWasClicked:(id)sender;
{
NSLog(@"button clicked");
}

@end 
```

和 MyHelloWorldViewController.m：

```
#import "MyHelloWorldViewController.h"

@implementation MyHelloWorldViewController

- (void)didReceiveMemoryWarning {
   [super didReceiveMemoryWarning];
}

- (void)dealloc {
    [super dealloc];
}

- (void)viewDidUnload {
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:34:40.133

首先，删除接口方法中的方法体。该文件应仅用于声明方法签名（实现进入 .m 文件）。

尝试像这样重写它：

```
#import <UIKit/UIKit.h>

@interface MyHelloWorldViewController : UIViewController {

}

- (IBAction) myButtonWasClicked:(id)sender;

@end 
```

和 MyHelloWorldViewController.m：

```
#import "MyHelloWorldViewController.h"

@implementation MyHelloWorldViewController

- (void)didReceiveMemoryWarning {
   [super didReceiveMemoryWarning];
}

- (void)dealloc {
    [super dealloc];
}

- (void)viewDidUnload {
}

- (IBAction) myButtonWasClicked:(id)sender
{
    NSLog(@"button clicked");
}

@end 
```

如果这不能解决问题，请仔细检查以确保您没有将按钮添加到`MainWindow.xib`文件中。查看 Interface Builder 中的 nib 层次结构窗口...确实`File's Owner`说`"UIApplication"`或`"MyHelloWorldViewController?"` 如果是前者，则您正在编辑错误的 nib。回到 Xcode 并打开`MyHelloWorldViewController.xib`.

# c++ - `char16_t` 和 `char32_t` 是用词不当吗？

> ID：12789376
> 
> 赞同：12
> 
> 时间：2012-10-08T20:58:22.780
> 
> 标签：c++, c++11, language-lawyer

^(**注意：**我敢肯定有人会称这是主观的，但我认为这是相当有形的。)

C++11 为我们提供了新的`basic_string`类型`std::u16string`和，分别为和提供了`std::u32string`类型别名。`std::basic_string<char16_t>``std::basic_string<char32_t>`

在这种情况下，子字符串的使用`"u16"`对`"u32"`我来说意味着“UTF-16”和“UTF-32”，这很愚蠢，因为C++当然没有文本编码的概念。

这些名称实际上反映了字符类型`char16_t`和`char32_t`，但这些名称似乎有误。它们*是*无符号的，因为它们的底层类型是无符号的：

> `[C++11: 3.9.1/5]:`[..] 类型`char16_t`和`char32_t`表示具有相同大小、符号和对齐方式的不同类型`uint_least16_t`和`uint_least32_t`，分别 [..]

但在我看来，这些名称违反了这样的约定，即此类无符号类型的名称开头`'u'`为 ，并且使用诸如`16`unqualified 之类的数字之类的术语`least`表示固定宽度类型。

那么，我的问题是：**我是在想象事物，还是这些名字从根本上存在缺陷？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T10:54:31.737

您引用的命名约定（`uint32_t`,`int_fast32_t`等）实际上仅用于*typedefs*，而不用于原始类型。原始整数类型是 {signed, unsigned} {char, short, int, long, long long}, {相对于浮点或十进制类型} ...

然而，除了这些整数类型之外，还有四种*不同的*、唯一的、基本类型、、、`char`和，`wchar_t`它们是各自文字的类型、、和用于字母数字类型数据，类似地用于那些. 这些类型当然也是整数类型，因此它们在*某些*算术整数类型中具有相同的布局，但是语言在前者、算术类型（您将用于计算）和后者之间做出了非常明确的区分“字符”类型，形成某种类型的 I/O 数据的基本单元。`char16_t``char32_t``''``L''``u''``U''`

 *（我之前曾[在这里](https://stackoverflow.com/questions/6796157/unicode-encoding-for-string-literals-in-c11)和[这里](https://stackoverflow.com/questions/6300804/wchars-encodings-standards-and-portability)讨论过这些新类型。）

所以，我认为`char16_t`并且`char32_t`实际上非常恰当地命名以反映它们属于整数类型的“char”系列的事实。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T02:42:42.827

> 这些名字有根本缺陷吗？

（我认为这个问题的大部分已经在评论中得到了回答，但要做出回答）不，一点也不。`char16_t`并且`char32_t`是为特定目的而创建的。为所有 Unicode 编码格式提供数据类型支持（UTF-8 包含在 中`char`），同时保持它们尽可能通用，而不是将它们限制为仅 Unicode。它们是无符号还是具有固定宽度与它们是什么没有直接关系：**字符数据类型**。保存和表示[字符](http://en.wikipedia.org/wiki/Character_%28computing%29)的类型。有符号性是表示*数字*而非字符的数据类型的属性。这些类型旨在**存储字符**，基于 16 位或 32 位的字符数据，不多也不少。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-09T02:24:25.793

根据定义，它们*没有*根本性的缺陷——它们是标准的一部分。如果这冒犯了你的情感，那么你必须找到一种方法来处理它。提出这一论点的时间是在最新标准获得批准之前，而那个时间已经过去了。*

# php - 内爆结果仍然不如预期

> ID：12789377
> 
> 赞同：0
> 
> 时间：2012-10-08T20:58:24.977
> 
> 标签：php

我处理以下代码中表示的一些文本文件：

编码 ：

```
$file = file($files);
$lines = str_replace("'", '', $file);
$noMultipleSpace = removeMultipleSpaces($lines);
$fileContents = array();
foreach($noMultipleSpace as $line) {
    if (isLatin($line) && count(preg_split('/\s+/', $line)) > 25) {
        $newContent = preg_split('/\\.\\s*/', $line);
        foreach($newContent as $newsContent) {
            $pos1 = stripos($newsContent, ':');
            if ($pos1 == false && count(preg_split('/\s+/', $newsContent) > 3) && isLatin($newsContent)) {
                $fileContents[] = $newsContent;
            }
        }
        $content = implode('.', $fileContents);
    }
}​ 
```

具有以下功能：

```
function isLatin($string) {
 return preg_match('/^\\s*[a-z,A-Z]/', $string) > 0;
}

function removeMultipleSpaces($string){
 return preg_replace('/\s+/', ' ',$string);
} 
```

但是，在 implode 过程中，点粘贴在下一句中。例如`sentence1 .Sentence2`。我的期望是`sentence1\. Sentence2`。怎么了？谢谢你 ：）

输入是文本文件，例如：

```
ChengXiang Zhai
Department of Computer Science University of Illinois at Urbana Champaign

ABSTRACT
Temporal Text Mining (TTM) is concerned with discovering temporal patterns in text 
information collected over time. Since most text information bears some time stamps, TTM has many applications in multiple domains, such as summarizing events in news articles and
revealing research trends in scientific literature. In this paper, we study a particular TTM 
task ­ discovering and summarizing the evolutionary patterns of themes in a text stream. We
define this new text mining problem and present general probabilistic methods for solving
this problem through (1) discovering latent themes from text; (2) constructing an evolution
graph of themes; and (3) analyzing life cycles of themes. Evaluation of the proposed methods
on two different domains (i.e., news articles and literature) shows that the proposed 
methods can discover interesting evolutionary theme patterns effectively. Categories and 
Subject Descriptors: H.3.3 [Information Search and Retrieval]: Clustering General Terms: 
Algorithms Keywords: Temporal text mining, evolutionary theme patterns, theme threads, 
clustering

1.

INTRODUCTION 
```

我只想得到重要的句子，从`Temporal Text Mining (TTM)...`直到`effectively`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:14:03.207

您的中间句子似乎有一个尾随空格，导致内爆分隔符出现。

尝试这个：

```
$file = file($files);
$lines = str_replace("'", '', $file);
$noMultipleSpace = removeMultipleSpaces($lines);
$fileContents = array();
foreach($noMultipleSpace as $line) {
    if (isLatin($line) && count(preg_split('/\s+/', $line)) > 25) {
        $newContent = preg_split('/\\.\\s*/', $line);
        foreach($newContent as $newsContent) {
            $pos1 = stripos($newsContent, ':');
            if ($pos1 == false && count(preg_split('/\s+/', $newsContent) > 3) && isLatin($newsContent)) {
                $fileContents[] = $newsContent;
            }
        }
        $fileContents = array_map('trim', $fileContents);
        $content = implode('.', $fileContents);
    }
}​ 
```

# php - How to for-loop over two arrays in PHP?

> ID：12789380
> 
> 赞同：0
> 
> 时间：2012-10-08T20:58:43.613
> 
> 标签：php, arrays, for-loop

> **Possible Duplicate:**
> [foreach with three variables add](https://stackoverflow.com/questions/7748115/foreach-with-three-variables-add)

I'm new to PHP so bear with me.

I have a url with two variables like so:

```
 ?foo=1,2,3,4&bar=a,b,c,d 
```

Both parameters will always have the same amount of elements. I need to loop through the amount of elements like so:

```
1a
2b
3c
4d 
```

and on each iteration assign two variables for `foo` and `bar` value.

If this was javascript no problem, but I have no idea how to do this PHP. This is what I have:

```
$foo = strtok($rvar_foo,",");
$bar = strtok($rvar_bar,",");
while ( $foo ){
  # now how do I get the corresponding value for $bar?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:01:01.427

```
$foo = isset($_GET['foo']) ?  explode(",", $_GET['foo']) :  array();
$bar = isset($_GET['bar']) ?  explode(",", $_GET['bar']) :  array();

for ($i = 0; $i < count($foo); $i++) {
    echo $foo[$i] . $bar[$i] . "<br />";
} 
```

Is this what you want?

Output

```
1a
2b
3c
4d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:18:56.823

Use [`array_map`](http://www.php.net/manual/en/function.array-map.php):

```
function my_function($a, $b)
{

    var_dump($a . $b );
    // Do something with both values.
    // The first parameter comes from the first array, etc.
}

array_map("my_function", explode(",",$_GET['a']), explode(",",$_GET['b'])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:07:04.980

Maybe you are looking for [`array_combine`](http://se.php.net/manual/en/function.array-combine.php). It creates an array from two arrays, using one array for the keys, the other array for the values.

```
$foo = explode(',', $_GET['foo']);
$bar = explode(',', $_GET['bar']);
$foobar = array_combine($foo, $bar); 
```

This would result in `$foobar` using the values from `$foo` as its keys and `$bar` for the values.

Calling `print $foobar[1]` would result in `a` being printed to the output. (You can find a running example [**here**](http://codepad.org/92Q73Tpe))

# jquery - 单击事件未在内部 div 上触发

> ID：12789381
> 
> 赞同：1
> 
> 时间：2012-10-08T20:58:47.620
> 
> 标签：jquery, html, css

如果我将 .thumbnail div 放在 #thumbhider 和 #thumbcontent div 之外，那么点击事件可以正常工作并且符合预期。目前他们没有。

网址： http: [//www.samcoles.co.uk/dustbowl/guitars.php](http://www.samcoles.co.uk/dustbowl/guitars.php)

我猜这与溢出有关：隐藏在包含的 div 上？我该如何解决这个问题？

**的JavaScript：**

```
//this is within $(document).ready function
$(".thumbnail").click(function () {

    var IMAGE_DIR = "images/guitars/";
    var img = $(this).find("img").attr("alt");
    $("#mainphoto").attr("src", IMAGE_DIR + img);
    if(captions) {
        $("#imgcaption").text(captions[img]);
    }
}); 
```

**的CSS：**

```
div.thumbnail { background-color: #000000; padding: 1px; float: left; width: 69px; height: 69px; cursor: pointer; }
div#thumbhider { width: 673px; height: 70px; overflow: hidden; margin: 0 auto; margin-top: 19px; position: relative; }
div.thumbcontent { height: 70px; background-color: #00ff00; width: 0 auto; display: inline; position: relative; } 
```

**的HTML：**

```
<div id="thumbhider">
        <div class="thumbcontent">
            <div style="margin-right:15px;" class="thumbnail"><img alt="1.png" src="thumber.php?img=images/guitars/1.png&amp;h=69&amp;w=69"></div>
            <div style="margin-right:15px;" class="thumbnail"><img alt="10.png" src="thumber.php?img=images/guitars/10.png&amp;h=69&amp;w=69"></div>

            <!--etc....-->

            <div style="clear:both;"></div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:18:02.633

`position:relative`从中删除`div.thumbcontent`

```
div.thumbcontent {
    height: 70px;
    background-color: lime;
    width: 0 auto;
    display: inline;
    /*position:relative*/
} 
```

# html - 如何在 XHTML 中使用 HTML5 功能

> ID：12789382
> 
> 赞同：6
> 
> 时间：2012-10-08T20:58:50.793
> 
> 标签：html, xhtml

我需要一些有关网络编程的帮助。我必须从学校完成这项任务，教授已经提供了有关结构的详细信息。其中之一是我的网站应该符合 XHTML（严格或过渡）。另一个是我需要使用至少一个 HTML5 功能。如果没有任何新标签可以通过 XHTML 验证，我该如何使用 HTML5 功能？

我将它声明为 XHTML 1.0 过渡。

这是我遇到问题的 HTML 代码。

```
<body id="index" class="home">
<header id="banner" class="body">
<h1><a href="#">Header1 </a></h1>

<nav><ul>
<li class="active"><a href="#">home</a></li>
<li><a href="#">portfolio</a></li>
<li><a href="#">blog</a></li>
<li><a href="#">contact</a></li>
</ul></nav>

</header>
</body> 
```

在带有 header 和 nav 的行中，它表示元素未定义，并且 header 中没有属性 id 和 class。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T21:30:55.353

似乎最有意义的分配解释是，您需要使用HTML5 的[XHTML 线性化](http://www.w3.org/TR/html5/the-xhtml-syntax.html#the-xhtml-syntax)，也称为 XHTML5。这仅仅意味着您像其他人一样使用 HTML5，但使用通用 XML 原则。

在示例情况下，这将意味着以下标记：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body id="index" class="home">
<header id="banner" class="body">
<h1><a href="#">Header1 </a></h1>

<nav><ul>
<li class="active"><a href="#">home</a></li>
<li><a href="#">portfolio</a></li>
<li><a href="#">blog</a></li>
<li><a href="#">contact</a></li>
</ul></nav>

</header>
</body>
</html> 
```

XHTML 1.0 文档类型完全不同。它们定义了 HTML 的固定版本，因此您不能在静态标记中使用这些版本不允许的任何内容，即与 XHTML 1.0 和 HTML 4.01 相比，HTML5 中的任何新内容（这可能是“HTML5 功能”在那作业）。“兼容 XHTML（严格或过渡）”的要求是模糊的，但如果它是专门指 XHTML 1.0，那么分配是自相矛盾的（除非您应该使用客户端脚本来获得“HTML5 功能” ”）。

（由于@Alohci 的评论，这个答案在很大程度上被重写了。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T21:01:16.000

根据您的作业对“HTML5”的定义，仅使用标记是不可能的。一个文档不能使用新的 HTML5 元素同时保持与任何 XHTML 1.0 文档类型兼容。

但是，如果您被允许使用 HTML5 引入的 JavaScript API，例如[`localStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)，您可以编写脚本来访问这些 API，而无需使用任何新的 HTML5 元素（例如`<header>`或`<nav>`）。这些 API 不依赖于 HTML5 标记，因此可以与任何风格的标记一起使用，但无论如何通常称为“HTML5 功能”。

# mysql - 在相当复杂的 JOIN 中重复列名

> ID：12789386
> 
> 赞同：1
> 
> 时间：2012-10-08T20:59:06.290
> 
> 标签：mysql, join, duplicates

所以我有一个相对复杂的 MySQL 查询，它给出了一个重复的列，原因我无法确定。我对 SQL 有点陌生。

该查询应该将“问题”条目列表与“票证”数据库相结合，特别是特定的最新票证`id`。`JOIN`因此，我有一个内部查询，它自己执行一个`ticket`表来获取最新的票。这可以正常工作。然后，我尝试`JOIN`使用数据库进行此内部选择`problem`，但是，我得到了 Duplicate Column Name `id`，尽管这是我要加入的列名。我的理解是，当您加入特定列时，不应将其“视为”重复...

无论如何，查询：

```
SELECT * FROM `problem` P
LEFT JOIN (
    SELECT * FROM (
        SELECT id, MAX(ticket_id) AS ticket_id
        FROM `ticket`
        WHERE ticket_status = 'o'
        GROUP BY id
    ) AS MAX
    INNER JOIN (
        SELECT id, ticket_id, other_data, time_stamp FROM `ticket`
    ) CUR ON MAX.id = CUR.id AND MAX.ticket_id = CUR.ticket_id
) T ON P.id=T.id
WHERE
        P.since IS NOT NULL; 
```

正如我所说，如果我这样做：

```
SELECT * FROM (
    SELECT id, MAX(ticket_id) AS ticket_id
    FROM `ticket`
    WHERE ticket_status = 'o'
    GROUP BY id
) AS MAX
INNER JOIN (
    SELECT id, ticket_id, other_data, time_stamp FROM `ticket`
) CUR ON MAX.id = CUR.id AND MAX.ticket_id = CUR.ticket_id 
```

我得到一张最新票的表格`id`。

我试图解决的一件事是，`SELECT MAX.* FROM (`而不是仅仅`SELECT * FROM (`. 这消除了重复列名错误，但内部查询不再返回任何`other_data`或`time_stamp`- 我只得到`id`和`ticket_id`列。当然，这首先违背了加入的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:02:51.483

尝试使用 为连接查询中的所有列指定别名，就像您为该字段`AS`所做的那样。`MAX(ticket_id)`

例如：

```
INNER JOIN (
    SELECT id AS cur_id, ticket_id as cur_ticket_id  ... etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:03:51.053

别名 id 列如下：

```
SELECT * FROM `problem` P
LEFT JOIN (
    SELECT * FROM (
        SELECT id AS max_id, MAX(ticket_id) AS ticket_id
        FROM `ticket`
        WHERE ticket_status = 'o'
        GROUP BY max_id
    ) AS MAX
    INNER JOIN (
        SELECT id AS cur_id, ticket_id, other_data, time_stamp FROM `ticket`
    ) CUR ON MAX.max_id = CUR.cur_id AND MAX.ticket_id = CUR.ticket_id
) T ON P.id=T.max_id
WHERE
        P.since IS NOT NULL; 
```

我在评论中写道，您可以只选择所需的列以避免重复，并且问题作者理解我的意思是外部选择，我说的是内部选择。希望我写的对，没有测试。

```
SELECT * FROM `problem` P
LEFT JOIN (
    SELECT CUR.id, CUR.ticket_id, CUR.other_data, CUR.time_stamp FROM (
        SELECT id, MAX(ticket_id)
        FROM `ticket`
        WHERE ticket_status = 'o'
        GROUP BY max_id
    ) AS MAX
    INNER JOIN (
        SELECT id, ticket_id, other_data, time_stamp FROM `ticket`
    ) CUR ON MAX.max_id = CUR.cur_id AND MAX.ticket_id = CUR.ticket_id
) T ON P.id=T.id
WHERE
        P.since IS NOT NULL; 
```

# ruby-on-rails - HMAC URL而不是登录？

> ID：12789389
> 
> 赞同：0
> 
> 时间：2012-10-08T20:59:08.530
> 
> 标签：ruby-on-rails, security, hmac

在实现我的站点（Rails 站点，如果它有任何区别）时，我的设计重点之一是减轻用户创建另一个用户名和密码的需要，同时仍然提供有用的每个用户功能。

我打算这样做的方式是：

1.  用户在网站上输入信息。信息通过服务器端会话与用户相关联。
2.  用户完成输入信息，服务器通过电子邮件向用户发送访问URL，大致形式如下：`http://siteurl/<user identifier>/<signature: HMAC(secret + salt + user identifier)>`
3.  用户单击 URL，站点查找用户 ID 和 salt，并使用服务器存储的秘密计算 HMAC，并验证计算的 HMAC 和签名是否匹配。

我的问题是：这是完成我想要做的事情的一种相当安全的方式吗？是否存在使其无用的常见攻击？是否有令人信服的理由放弃我避免使用用户名/密码的愿望？是否有关于该主题的必读书籍或文章？

请注意，我不是在处理信用卡号码或任何非常私密的东西，但我仍然希望保持信息的合理安全。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T03:45:21.950

一个词（嗯，实际上是两个）——`Referer`标题。您的用户在访问您的站点后访问的下一个站点将在此标头中看到他的凭据。此外，用户在以这种方式受到威胁后将无法更改其凭据。

用户名/密码身份验证的想法是它涉及两条独立的信息——一个已知的用户 ID 和一个未知的密码，可以根据每个用户自由更改。在您的系统中（除了Referer 之外），所有密码都只有一个密码——“秘密”。我还怀疑暴力破解签名（因为我知道我的用户 ID）并恢复秘密会相当容易，从而使整个系统变得无用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T04:50:23.317

我考虑过类似的 iPhone 应用程序的无密码登录——Web 应用程序的最大问题是登录变得不必要的乏味。

也就是说，这是一个简单的修改：

1.  用户输入电子邮件地址。
2.  服务器生成一个随机身份验证（例如 128 位 /dev/urandom，base64 编码）令牌并`H(authtoken)`与时间戳一起保存到数据库，然后发送一封电子邮件`https://example.com/login/userid?auth=authtoken`
3.  用户单击 URL，服务器检查令牌是否在数据库中且未过期，*从数据库中删除令牌*并设置会话 cookie。

您的服务器需要存储更多状态，但无论如何它都需要存储状态。它的工作原理与任何良好的密码重置流程大致相同，这*大概*使其在*理论上*不会降低安全性。然而，在实践中，它并没有像 account-hijack-via-password-reset 那样留下明显的审计线索，因为“密码重置”流程现在是正常的登录流程。

你也可以对 MAC 和时间戳做类似的事情`(uid,timestamp,MAC_k(uid,timestamp))`——基本问题是任何有权访问 MAC 密钥（例如数据库备份）的人都可以生成任意身份验证令牌，并且数据库一直都在泄露。

在散列/MAC 处理时，请注意“加密拼接”攻击。

此外，一个常见的错误是透露给定的电子邮件地址是否有帐户（登录时通常会显示“无效的电子邮件/密码”，但密码重置流程会将其泄露出去——更好的方法是始终发送电子邮件，并说“有没有与此电子邮件关联的帐户”*在电子邮件中*，理想情况下与成功响应的字节数相同！）。

# c# - 使用 Excel 文件检索数据以进行单元测试 c#

> ID：12789391
> 
> 赞同：1
> 
> 时间：2012-10-08T20:59:20.413
> 
> 标签：c#, web-services, unit-testing

我正在为 Web 服务测试编写单元测试。我添加了对 C# 单元测试解决方案的服务引用，并开始使用 Web 服务中的类进行测试。我还添加了一个 Excel 文件来提供单元测试值。

下面是一个关于我之前在做什么的例子

```
[DataSource("System.Data.Odbc"
 ,"Dsn=Excel Files;dbq=|DataDirectory|\\TestData.xlsx;defaultdir=C:\\TestData;driverid=1046;maxbuffersize=2048;pagetimeout=5"
 ,"Sheet1$"
 ,DataAccessMethod.Sequential)
 ,DeploymentItem("TestProject1\\TestData.xlsx")
 ,Owner("")
 ,Description("")
 ,TestMethod()]
public void test1()
{
    try
    {
        var Service = new Service.ServiceClient();
        var Cid = testContextInstance.DataRow["CId"].ToString();
        var MNumber = testContextInstance.DataRow["MNumber"].ToString();
        var VID = testContextInstance.DataRow["VID"].ToString();
        var isVisit = new Service.ISVisit()
        {
            CID = Cid,
            MNum = MNumber,
            VCode = VID
        };

    var first = Service.Medis(isVisit).Cast<Service.ISMedi>().FirstOrDefault();
    // Assert
    Assert.AreEqual("12345678", first.Proc.ProcID);
    }
    catch (Exception ex1)
    {
        if (ex1.InnerException != null)
            Debug.WriteLine(ex1.InnerException.Message);
        Assert.Fail(ex1.Message);
    }
} 
```

此 test1 已通过`.Medis()`，`IsVisit`是服务中的类。到目前为止，我在 Excel 文件中只有一行，我能够检索数据并对其进行测试。

![enter image description here](../Images/e4169d36ad809bbfa54aee50b9d1b96d.png)

但是现在的要求是，如果excel文件中的行多于一行，单元测试应该循环遍历每一行并测试每一行以查看通过/失败。

![enter image description here](../Images/ebe3b442f6c5af043940e9cfe196dc13.png)

Please Help me with this.How to loop through each row in the excel file in and check the test results.How to handle this situation in c# unitesting.Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:19:04.973

You are already doing it, [`DataSource`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.datasourceattribute.aspx) attribute runs test once per row in source file. Your problem is asserting results.

To solve it, your excel files should also contain some sort of *expected result for row* column (`ProcId` perhaps), which you'll retrieve together with row data and assert against at the end:

```
// ...
var VID = testContextInstance.DataRow["VID"].ToString();
var expectedResult = testContextInstance.DataRow["ExpectedResult"].ToString();
var isVisit = new Service.ISVisit()
{
    CID = Cid,
    MNum = MNumber,
    VCode = VID
};

// ...

Assert.AreEqual(expectedResult, first.Proc.ProcID); 
```

# r - 在R中将两行排序为一行

> ID：12789392
> 
> 赞同：1
> 
> 时间：2012-10-08T20:59:22.710
> 
> 标签：r, sorting, dataset

我有如下大型数据集：

```
myd <- data.frame (var1 = c("A", "A", "B1-1", "B1-1", "C", "C", "D1", "D1"),
                   var2 = c(1,    2,    2,       2,     3,  1,   1,    4))
 var1 var2
1    A    1
2    A    2
3 B1-1    2
4 B1-1    2
5    C    3
6    C    1
7   D1    1
8   D1    4 
```

请注意，var1 中的每个级别重复两次，并且在 var2 中有两个值。

对于 var1 的每个级别，我想创建一个新数据集，其中 var2 值现在按行排列（缩短）并合并为一列，输出类型如下：

```
 var1    var2.h1 var2.h2      h1.h2  
1    A      1         2           12
2   B1-1    2         2           22
3    C      1         3           13
4   D1      1         4           14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:29:45.030

```
library(plyr)
ddply(myd, .(var1), function(x) {
     foo <- data.frame(rbind(x$var2), sprintf("%s%s", x$var2[1], x$var2[2]))
     names(foo) <- c("var2.h1", "var2.h2", "h1.h2")
     foo
    })

var1 var2.h1 var2.h2 h1.h2
1    A       1       2    12
2 B1-1       2       2    22
3    C       3       1    31
4   D1       1       4    14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:45:08.283

```
library("reshape2")
myd$pos <- c("h1", "h2")
myd.wide <- dcast(myd, var1~pos, value.var="var2")
names(myd.wide)[2:3] <- paste("var2", names(myd.wide)[2:3], sep=".")
myd.wide$h1.h2 <- paste0(myd.wide$var2.h1, myd.wide$var2.h2) 
```

这使

```
> myd.wide
  var1 var2.h1 var2.h2 h1.h2
1    A       1       2    12
2 B1-1       2       2    22
3    C       3       1    31
4   D1       1       4    14 
```

# css - 带有 textarea 溢出的 CSS 奇怪的固定位置错误

> ID：12789395
> 
> 赞同：3
> 
> 时间：2012-10-08T21:00:04.057
> 
> 标签：css

我可能遗漏了一些小东西，但目前我无法弄清楚：

我有一个文档，尾部有以下 div

```
<div style="position:fixed; display:block; width:300px; height:100px; top:30px; left:30px; background:#333;">
    <textarea>
        asdf
    </textarea>
</div>
<canvas width="640" height="480"></canvas> 
```

每当我在文本区域中输入几十行文本时，当我退格时，我的固定位置就会脱钩，并将所有内容向右/向下推约 250-350 像素。请注意，这特别发生在退格到换行符时。非常奇怪的错误（通过 chrome）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T12:55:03.427

试试这个：（文本区域之间没有空格）

```
<div style="position:fixed; display:block; width:300px; height:100px; top:30px; left:30px; background:#333;">
    <textarea>asdfWhenever I enter a few dozen lines of text into the textarea, when I backspace my fixed positioning goes off the hook and pushes everything to the right / down about 250-350px. Note that this specifically happens when backspacing into a line break. Very weird bug (via chrome).</textarea>
</div>
<canvas width="640" height="480"></canvas> 
```

# mysql - 如何通过一个 SQL 查询获得多个计数？

> ID：12789396
> 
> 赞同：427
> 
> 时间：2012-10-08T21:00:05.157
> 
> 标签：mysql, sql, join, count, group-by

我想知道如何编写这个查询。

我知道这个实际的语法是假的，但它会帮助你理解我想要什么。我需要这种格式，因为它是更大查询的一部分。

```
SELECT distributor_id, 
COUNT(*) AS TOTAL, 
COUNT(*) WHERE level = 'exec', 
COUNT(*) WHERE level = 'personal' 
```

我需要在一个查询中返回所有这些。

此外，它需要在一行中，因此以下内容不起作用：

```
'SELECT distributor_id, COUNT(*)
GROUP BY distributor_id' 
```

* * *

## 回答 #1

> 赞同：921
> 
> 时间：2012-10-08T21:07:34.047

您可以使用`CASE`带有聚合函数的语句。`PIVOT`这与某些 RDBMS中的函数基本相同：

```
SELECT distributor_id,
    count(*) AS total,
    sum(case when level = 'exec' then 1 else 0 end) AS ExecCount,
    sum(case when level = 'personal' then 1 else 0 end) AS PersonalCount
FROM yourtable
GROUP BY distributor_id 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-10-08T21:03:31.023

一种肯定有效的方法

```
SELECT a.distributor_id,
    (SELECT COUNT(*) FROM myTable WHERE level='personal' and distributor_id = a.distributor_id) as PersonalCount,
    (SELECT COUNT(*) FROM myTable WHERE level='exec' and distributor_id = a.distributor_id) as ExecCount,
    (SELECT COUNT(*) FROM myTable WHERE distributor_id = a.distributor_id) as TotalCount
FROM (SELECT DISTINCT distributor_id FROM myTable) a ; 
```

**编辑：**
请参阅@KevinBalmforth 的性能细分，了解为什么您可能不想使用此方法而应选择@Taryn♦ 的答案。我要离开这个，所以人们可以理解他们的选择。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-10-08T21:05:21.163

```
SELECT 
    distributor_id, 
    COUNT(*) AS TOTAL, 
    COUNT(IF(level='exec',1,null)),
    COUNT(IF(level='personal',1,null))
FROM sometable; 
```

`COUNT`仅计算`non null`值，并且仅当满足您的条件时`DECODE`才会返回非空值。`1`

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2015-12-03T16:02:52.913

基于其他已发布的答案。

这两个都会产生正确的值：

```
select distributor_id,
    count(*) total,
    sum(case when level = 'exec' then 1 else 0 end) ExecCount,
    sum(case when level = 'personal' then 1 else 0 end) PersonalCount
from yourtable
group by distributor_id

SELECT a.distributor_id,
          (SELECT COUNT(*) FROM myTable WHERE level='personal' and distributor_id = a.distributor_id) as PersonalCount,
          (SELECT COUNT(*) FROM myTable WHERE level='exec' and distributor_id = a.distributor_id) as ExecCount,
          (SELECT COUNT(*) FROM myTable WHERE distributor_id = a.distributor_id) as TotalCount
       FROM myTable a ; 
```

但是，性能却大不相同，随着数据量的增长，这显然会更加相关。

我发现，假设没有在表上定义索引，使用 SUM 的查询将进行一次表扫描，而使用 COUNT 的查询将进行多次表扫描。

例如，运行以下脚本：

```
IF OBJECT_ID (N't1', N'U') IS NOT NULL 
drop table t1

create table t1 (f1 int)

    insert into t1 values (1) 
    insert into t1 values (1) 
    insert into t1 values (2)
    insert into t1 values (2)
    insert into t1 values (2)
    insert into t1 values (3)
    insert into t1 values (3)
    insert into t1 values (3)
    insert into t1 values (3)
    insert into t1 values (4)
    insert into t1 values (4)
    insert into t1 values (4)
    insert into t1 values (4)
    insert into t1 values (4)

SELECT SUM(CASE WHEN f1 = 1 THEN 1 else 0 end),
SUM(CASE WHEN f1 = 2 THEN 1 else 0 end),
SUM(CASE WHEN f1 = 3 THEN 1 else 0 end),
SUM(CASE WHEN f1 = 4 THEN 1 else 0 end)
from t1

SELECT 
(select COUNT(*) from t1 where f1 = 1),
(select COUNT(*) from t1 where f1 = 2),
(select COUNT(*) from t1 where f1 = 3),
(select COUNT(*) from t1 where f1 = 4) 
```

突出显示 2 个 SELECT 语句并单击 Display Estimated Execution Plan 图标。您会看到第一个语句将执行一次表扫描，第二个语句将执行 4 次。显然，一次表扫描优于 4。

添加聚集索引也很有趣。例如

```
Create clustered index t1f1 on t1(f1);
Update Statistics t1; 
```

上面的第一个 SELECT 将执行单个聚集索引扫描。第二个 SELECT 将执行 4 次聚集索引搜索，但它们仍然比单个聚集索引扫描更昂贵。我在一个有 800 万行的表上尝试了同样的事情，而第二个 SELECT 仍然要贵得多。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2015-12-03T16:12:57.523

对于 MySQL，这可以缩短为：

```
SELECT distributor_id,
    COUNT(*) total,
    SUM(level = 'exec') ExecCount,
    SUM(level = 'personal') PersonalCount
FROM yourtable
GROUP BY distributor_id 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-10-08T21:03:50.757

好吧，如果您必须在一个查询中获得所有信息，则可以进行联合：

```
SELECT distributor_id, COUNT() FROM ... UNION
SELECT COUNT() AS EXEC_COUNT FROM ... WHERE level = 'exec' UNION
SELECT COUNT(*) AS PERSONAL_COUNT FROM ... WHERE level = 'personal'; 
```

或者，如果您可以在处理后执行以下操作：

```
SELECT distributor_id, COUNT(*) FROM ... GROUP BY level; 
```

您将获得每个级别的计数，并且需要将它们全部加起来以获得总数。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-09-20T19:07:36.807

我做了这样的事情，我只是给每个表一个字符串名称以在 A 列中识别它，并为列计数。然后我将它们全部合并，以便它们堆叠。在我看来，结果非常好 - 不确定它与其他选项相比效率如何，但它让我得到了我需要的东西。

```
select 'table1', count (*) from table1
union select 'table2', count (*) from table2
union select 'table3', count (*) from table3
union select 'table4', count (*) from table4
union select 'table5', count (*) from table5
union select 'table6', count (*) from table6
union select 'table7', count (*) from table7; 
```

**结果：**

```
-------------------
| String  | Count |
-------------------
| table1  | 123   |
| table2  | 234   |
| table3  | 345   |
| table4  | 456   |
| table5  | 567   |
------------------- 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-11-09T19:15:05.320

基于 Bluefeet 接受的回复，并添加了细微差别，使用`OVER()`：

```
SELECT distributor_id,
    COUNT(*) total,
    SUM(case when level = 'exec' then 1 else 0 end) OVER() ExecCount,
    SUM(case when level = 'personal' then 1 else 0 end) OVER () PersonalCount
FROM yourtable
GROUP BY distributor_id 
```

在 () 中不使用`OVER()`任何内容将为您提供整个数据集的总数。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-13T07:10:58.483

我认为这也适用于你`select count(*) as anc,(select count(*) from Patient where sex='F')as patientF,(select count(*) from Patient where sex='M') as patientM from anc`

你也可以像这样选择和计算相关表`select count(*) as anc,(select count(*) from Patient where Patient.Id=anc.PatientId)as patientF,(select count(*) from Patient where sex='M') as patientM from anc`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-04T12:53:57.807

在 Oracle 中，您将执行类似的操作

```
SELECT
    (SELECT COUNT(*) FROM schema.table1),
    (SELECT COUNT(*) FROM schema.table2),
    ...
    (SELECT COUNT(*) FROM schema.tableN)
FROM DUAL; 
```

# ios5 - 如何在 iOS 5 上显示 SDK 3.1 的 Facebook 帖子对话框预览？

> ID：12789398
> 
> 赞同：0
> 
> 时间：2012-10-08T21:00:30.737
> 
> 标签：ios5, ios6, facebook-ios-sdk

我升级了我的游戏以使用 facebook SDK 3.1，它适用于 iOS 6，我希望它也适用于 iOS 5。我希望它像在 SDK 3.0 中一样显示帖子的 facebook 预览。

这是我的代码。现在它只是自动发布。Facebook 现在是否允许在用户不输入状态的情况下自动分享和更新状态？Facebook 过去不允许这样做。

```
if(!displayedNativeDialog)
{
NSLog(@"\nNative dialog failed to display.");

[self performPublishAction:^{

// otherwise fall back on a request for permissions and a direct post
NSMutableDictionary* params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:[NSString stringWithFormat:@"%s", m_pLink], @"link", [NSString stringWithFormat:@"%s", m_pGameName], @"name", nil];

[FBRequestConnection startWithGraphPath:@"me/feed" parameters:params HTTPMethod:@"POST"
completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
{
[self showAlert:message result:result error:error];
}
];

}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:14:22.670

您必须在 Build Phases 配置选项中将 Frameworks AdSupport、Social 和 Accounts 从必需更改为可选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:20:10.560

tkanzakic 指出了正确的答案，所以我将再次重新发布链接，因为有人可能在答案回复中看不到它。

[https://github.com/sakrist/FacebookSample](https://github.com/sakrist/FacebookSample)

我测试了这个框架，它运行良好。它遵循 facebook sdk 规范。

谢谢，

# sql - SQL Server 用户定义函数不返回任何内容

> ID：12789401
> 
> 赞同：0
> 
> 时间：2012-10-08T21:00:55.823
> 
> 标签：sql, sql-server

以下查询是为 SQL Server 编写的，如果我硬编码`@TempStaff`，那么它可以正常工作并且有一个值，`@Tempstaff`但是这样的代码不会返回任何内容。

查询是收集员工级别及以下的所有员工：

```
DECLARE 
    @TempStaff  varchar(10),
    @staff_Full_name varchar (30)   
BEGIN
SELECT @staff_Full_name = 'Doe, John'
DECLARE @staffNameTable TABLE
    (
    StaffID     char(7),
    StaffName   Varchar(50)
    )
INSERT INTO @staffNameTable
SELECT * FROM dbo.fn_Staff_Full_Name()

SELECT  @TempStaff =    (
                SELECT  StaffId
                FROM    @staffNameTable st
                WHERE   st.StaffName = @staff_Full_name 
                )
END 
DECLARE @staff  TABLE
            (
    StaffId char(10)
    )

INSERT INTO @staff (StaffId)
SELECT * FROM dbo.fn_Supervisor_List(10, @TempStaff)` 
```

功能是

```
ALTER FUNCTION [dbo].[fn_Supervisor_List] 
(
    @looptill   Int,
    @StaffId    varchar(10)
)
RETURNS 
@staff  TABLE
    (
    StaffId char(10)
    )
AS
BEGIN
    DECLARE 
        @loop       int 

    INSERT  INTO    @staff
    SELECT  s.StaffId
    FROM    Staff s with (nolock)
    WHERE   s.StaffId like @StaffId

    BEGIN
        SELECT  @loop = 0

        WHILE   @loop < @looptill 
        BEGIN

            INSERT  INTO    @staff
            SELECT  s.StaffId
            FROM    dbo.StaffSupervisors s with (nolock)
            --WHERE s.super_id in   (
            WHERE   s.SupervisorId in   (
                        SELECT  s2.StaffId
                        FROM    @Staff s2
                        )
            AND s.StaffId not in    (
                            SELECT  s2.StaffId
                            FROM    @Staff s2
                            )
            SELECT  @loop = @loop + 1
        END
    END
    RETURN 
END 
```

当我在填充后运行 SELECT @TempStaff 时 - 我得到了我期望的变量，但是当我最后运行 SELECT * FROM @Staff 时，@Staff 是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:00:35.957

好的，我发现了问题，我已将 Value @TempStaff 声明为 Varchar，但是当我将其更改为 INT 时，它工作正常。感谢所有发布建议的人。我肯定会研究 CTE 的。

# sql-server-2008 - 如何在表中容纳不同类型的唯一标识符？

> ID：12789402
> 
> 赞同：0
> 
> 时间：2012-10-08T21:00:56.543
> 
> 标签：sql-server-2008, database-design

我目前有一个包含`IDENTITY`字段的表。该字段被声明为`INT`类型。问题是我有一些新的独特价值，但它们不是`INT`. 它们是字母数字的，所以我不能把它们放在`INT`现场。我唯一的选择是创建另一列并将它们粘贴在新`NON-IDENTITY`列中还是有其他选择？上面的示例仅适用于 2 种不同的身份格式，但如果我开始获得更多身份格式怎么办？我不想为每种类型的格式化 alpha（数字）创建一个列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:14:56.697

替代方法是：

1.  使用与旧表完全相同的方案创建一个临时表
2.  将表的值复制到新的临时表
3.  丢弃旧表
4.  根据旧表的方案创建一个新表，但具有文本标识
5.  将临时表中的数据复制到新创建的带有文本标识的表中
6.  删除临时表

当然，在此过程中您必须注意有关此表的任何潜在操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:06:59.400

一个表包含多个必须是唯一的列的情况并不少见。我认为真正的问题是您在这里要达到什么级别的规范化，是否添加该列支持或破坏您的目标关系规范化级别或您认为可以接受的程度？

例如，考虑到第三个正常和/或著名的“每个非键属性都会揭示关于键、整个键的事实，除了键之外什么都没有......*所以帮帮我 Codd* ”。

您添加的新唯一值是否添加了有关由键标识的行的事实？

此外，主键通常是聚集索引，但并非必须如此。您还可以在同一个表上设置其他唯一索引，这在“您要完成什么”的上下文中被认为是“好的”并进行优化。

# c++ - 如何将随机生成的整数存储到字符串中？

> ID：12789408
> 
> 赞同：-1
> 
> 时间：2012-10-08T21:01:21.490
> 
> 标签：c++, string, int, store

我有一个函数可以在 (0,1) 之间生成 15 个整数。如何将这些生成的整数存储到字符串中并将它们视为字符串？

这是我的代码，当我计算它时 str 包含符号。帮助？ ***** ** *** ****** ========== 000000000000000000

```
int _tmain(int argc, _TCHAR* argv[])
{
  string str;

  for(int i = 0; i<15; i++){
    int random =  rand()%2 ; 
    cout<< random ; 
    str += random ;
  }
  cout<<str ; 

  system("pause");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:04:10.633

尝试这个：

```
str += random ? "1" : "0"; 
```

这仅在有两种选择时才有效`random`- 如果可能有更多值，那么您需要不同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:04:20.263

使用 std::stringstream：

```
std::stringstream ss;

for(int i = 0; i<15; i++){
    int random = rand()%2; 
    ss << random; 
}

std::string str = ss.str(); 
```

# javascript - input 在空输入上返回 true

> ID：12789411
> 
> 赞同：2
> 
> 时间：2012-10-08T21:01:29.473
> 
> 标签：javascript, jquery, html, input

我无法解决这个问题！我在按钮单击时进行了简单的 jquery 验证，以验证输入字段是否为空。

[http://fiddle.jshell.net/fyxP8/3/](http://fiddle.jshell.net/fyxP8/3/)

我不知道为什么输入字段在为空时返回值不为空。

很感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T21:05:56.470

看这个演示： http: [//fiddle.jshell.net/Tj7Z8/](http://fiddle.jshell.net/Tj7Z8/)

额外`;`的 if 语句

希望能满足需求`:)`

**代码**

```
function checkinputs(ticker, btn) {
    alert(ticker + "[ " + $(btn).parent().find("input").val() + " ]" + $(btn).parent().find("input").val().length);
    var x = false;
    if (ticker == 0) {
        if ($(btn).parent().find("input").val() != '' ) {
            alert($(btn).parent().find("input").attr("name") + "<>" + $(btn).parent().find("input").val());
            x = true;
        }
    }

    return x;
}
var progressTicker = 0;
$("button[class$='nextBtn']").click(function() {
    var returns = checkinputs(progressTicker, this);
    alert(returns);
    if (returns == true) {
        alert('inside');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:15:31.490

我想你只是在这一行的脚本中有错字

```
 if ($(btn).parent().find("input").val() != '' ); { 
```

冒号错位了……比较

[http://fiddle.jshell.net/fyxP8/10/](http://fiddle.jshell.net/fyxP8/10/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T21:28:41.093

```
if (condition);
{
   operation();
} 
```

第一个`;`关闭 if，因此无论条件的值如何，都将始终执行操作。另一方面，这是正确的：

```
if (condition)
{
   operation();
} 
```

# ruby-on-rails - 按管理员级别自定义 ActiveAdmin CSV 输出

> ID：12789417
> 
> 赞同：0
> 
> 时间：2012-10-08T21:02:00.250
> 
> 标签：ruby-on-rails, ruby, csv, activeadmin

我想以与限制索引区域的项目类似的方式限制 CSV 下载的列。

对于我的索引，我有：

```
index do
    column "Name" do |purchase|
      purchase.user.full_name
    end
    if current_admin_user.superuser?
      column "User" do |purchase|
          link_to purchase.user.email, admin_user_path(purchase.user)
      end
    end
end 
```

只有高级管理员才能查看用户的电子邮件地址。

如果我对 CSV 做同样的事情，AA 会抛出一个错误：

```
undefined local variable or method `current_admin_user' 
```

我可以在函数内进行 current_admin_user 检查而不会出错：

```
column "User Name" do |purchase|
  if current_admin_user.superuser?
    purchase.user.full_name.gsub(',','')
  end
end 
```

但这有点草率，因为它给较小的管理员用户留下了死列。

有人为我解决了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:51:38.970

尝试

```
index do
  column "Name" do |purchase|
    purchase.user.full_name
  end
  column "User", :if => proc{ current_admin_user.superuser? } do |purchase|
      link_to purchase.user.email, admin_user_path(purchase.user)
  end
  end
end 
```

# php - php mysql 按变量搜索？

> ID：12789419
> 
> 赞同：0
> 
> 时间：2012-10-08T21:02:01.943
> 
> 标签：php, mysql

请帮助我如何从 mysql 中检索数据，在我的 sql 查询中有一个变量。我的 php 代码是

```
$status=$_GET['status'];
$query="SELECT * FROM students WHERE status='$status' "; 
```

当我运行查询 mysql 生成

```
 unknown column 'Lead' 
```

其中 Lead 是 $status 的值。我用 \'$status\' ， '{$status}' 尝试过，但同样的错误。请帮助我，我从昨天开始就在努力，但没有找到解决方案。我尝试了 mysql_real_escape_string() 但同样的错误..可能是我使用错误的语法。

```
 $query="SELECT * FROM students WHERE status=".mysql_real_escape_string($status); 
```

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:36:38.410

```
$status=$_GET['status'];
$query="SELECT * FROM students WHERE status='".$status."'"; 
```

转义是一个好主意，但我认为 mysql_escape_string 已被弃用并且不鼓励使用它，您应该始终使用`mysql_real_escape_string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:12:49.447

恐怕'status'是sql的保留字：见[http://drupal.org/node/141051](http://drupal.org/node/141051)

尝试：

$status = mysql_real_escape_string($status)

$query = "SELECT * FROM `students` WHERE `status` = '$status'";

# javascript - 在 ember 中维护多个状态

> ID：12789423
> 
> 赞同：2
> 
> 时间：2012-10-08T21:02:12.187
> 
> 标签：javascript, url-routing, ember.js

考虑一个使用 Ember 编写的 ftp 浏览器应用程序。它可能具有层次结构的树视图和当前选择的文件的列表视图。并将当前选择存储在 URL 中：

baseUrl/#路径

例如

www.emberftp.com/#stuff/docs/programming

没那么难。

然而！现在考虑将此应用程序扩展为具有两个类似于 Windows Commander 的浏览器视图。一个视图当前正在浏览 /stuff/docs/programming 和另一个 /backup/images。

显然，这需要在某个级别上有多个出口，但是 URL 会发生什么？

首先，这完全支持吗？如果是，应该如何设置路由和序列化/反序列化？该 URL 实际是什么样的？

baseUrl/#?browser1=/stuff/docs/programming&browser2=/backup/images

也许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:03:55.800

Ember 路由器将更新浏览器的 URL 以反映当前应用程序状态。这样做是为了让用户可以通过 URL 返回或共享他的当前状态。请务必注意，路由器在给定时间只能处于一种状态。

路由器就是使用序列化和反序列化来重新创建它的状态。这基本上是将当前应用程序状态转换为可共享 URL 的想法，反之亦然。要解决您发布的问题，您可能应该有一个模型，我们`window`称之为`browsers`. 然后，当您通过 URL 加载窗口时，您可以轻松地重建所有 ftp 浏览器。我认为处理一个模型会使序列化/反序列化过程更容易概念化。

无论如何，这就是您的模型的外观。

```
App.Window.create({
  id: 1,
  browsers: [1, 2]
});

App.Browser.create({
  id: 1,
  path: "/stuff/docs/programming"
});

App.Browser.create({
  id: 2,
  path: "/backup/images"
}) 
```

你的路由器只需要知道如何反序列化“/windows/:window_id”。

# emacs - Emacs 桌面：帧分割和服务器模式

> ID：12789428
> 
> 赞同：1
> 
> 时间：2012-10-08T21:02:25.030
> 
> 标签：emacs

我的`.emacs`文件中有以下内容：

```
(desktop-save-mode 1)
(setq desktop-dirname             "~/.emacs.d/desktops/default/"
      desktop-base-file-name      "emacs.desktop"
      desktop-base-lock-name      "lock"
      desktop-path                (list desktop-dirname)
      desktop-load-locked-desktop t) 
```

我通常启动一个 Emacs 服务器[服务器模式](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html)，然后调用`emacsclient -c`启动会话。

1.  我认为`locks`当我关闭我的 Emacs 客户端或服务器时，我的没有被正确释放（为了修补这个问题，我设置`desktop-load-locked-desktop`为`t`上面）。据我了解，在杀死客户端`M-x kill-emacs`的同时`C-x C-c`杀死服务器。但是 Emacs什么时候**保存桌面**？，什么时候杀死**服务器**或杀死**客户端**？

2.  当我重新加载我的桌面时，Emacs 不会恢复任何帧分割。Emacs 桌面可以保存拆分吗？如果没有，是否有其他方法可以保存和恢复它们？

这一切都在 Emacs 24.2.1 上（提出问题时的最新稳定版本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T16:46:47.320

1.  Emacs 在杀死“the”客户端时不会释放锁（可以同时有多个客户端）。我想我们可以让 desktop.el 在最后一个客户端断开连接时尝试保存桌面，或者更确切地说，当最后一帧被破坏时。请`M-x report-emacs-bug`请求此新行为。

2.  AFAIK desktop.el 仍然不知道如何保存“框架分割”（Emacs 称之为窗口配置）。[我认为这与在 Emacs](https://stackoverflow.com/questions/392314/saving-window-configurations-in-emacs)中保存窗口配置相同的问题

# java - 此查询的正则表达式

> ID：12789429
> 
> 赞同：-3
> 
> 时间：2012-10-08T21:02:25.267
> 
> 标签：java, regex

我想看看 a 是否`.`存在于字符串中，后跟一个数字

```
E.g 123.456 = True
E.g 123456\. = False
E.g 123456 = False
E.g 123.456\. = True 
```

那里有任何正则表达式天才吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T21:03:58.580

```
\.(?=[0-9]) 
```

匹配一个点当且仅当它后跟一个数字。在Java中，即

```
Pattern regex = Pattern.compile("\\.(?=[0-9])");
Matcher regexMatcher = regex.matcher(subjectString);
foundMatch = regexMatcher.find(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:03:46.890

`'\\.\\d'`我相信正则表达式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:14:20.173

这工作正常：

```
String regex="\\.\\d"; 
```

# javascript - javascript 在使用母版页的内容页面中不起作用

> ID：12789431
> 
> 赞同：1
> 
> 时间：2012-10-08T21:02:39.333
> 
> 标签：javascript, asp.net

我使用一种 javascript，当我在没有母版页的页面中使用它时，它可以正常工作，但是当我在使用母版页的内容页面中使用它时，它不起作用我该怎么解决这个问题？

我没有在母版页中使用任何 JavaScript 代码，这是必要的吗？

```
//Page1 without MasterPage
....
<head runat="server">
    <link rel="stylesheet" href="StyleSheet.css" type="text/css" media="screen"/>
    <script src="jquery-1.4.4.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="jquery.maskedinput.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () 
        {
            $.mask.definitions['~'] = "[+-]";
            $("#date").mask("99/99/9999"); //Date
            $("input").blur(function () 
            {
                $("#info").html("Unmasked value: " + $(this).mask());
            }).dblclick(function () {
                $(this).unmask();
            });
        });
    </script>
</head>
....
<body>
    <form id="form1" runat="server">
    date :  <asp:TextBox ID="date"  runat="server" ></asp:TextBox>
.....

//page2 with MasterPage
...
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
   <link rel="stylesheet" href="StyleSheet.css" type="text/css" media="screen"/>
    <script src="jquery.maskedinput.js" type="text/javascript" charset="utf-8"></script>
    <script src="jquery-1.4.4.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () 
        {
            $.mask.definitions['~'] = "[+-]";
            $("#date").mask("99/99/9999"); //Date
            $("input").blur(function () 
            {
                $("#info").html("Unmasked value: " + $(this).mask());
            }).dblclick(function () {
                $(this).unmask();
            });
        });
    </script>
</asp:Content>
....
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
     date : <asp:TextBox ID="date"  runat="server" ></asp:TextBox>
</asp:Content>

//Master Page
...
<head runat="server">
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:45:43.760

In asp.net when a UserControl is placed in a container the unique IDs of its contained controls are recalculated to avoid problems with multiple controls of the same type. this is true even for pages inside master pages.

to retrieve the correct unique ID of the controls in your page you need to write something like this

```
$("#<%= date.ClientID %>").mask("99/99/9999"); 
```

the `<%= ... %>` will be evaluated at runtime and replaced with the correct id (ClientID is a property of asp.net control which holds the unique id of the control to be rendered)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:17:38.987

呈现控件的 ID 与您调用它的 ID 不同。

如果您查看发送到浏览器的 HTML 源代码，您的`date`控件实际上将被称为`ct100_date`.

所以找到实际渲染的 ID 并更改`$("#date")`为`$("#ct100_date")`.

例如，如果您查看源代码并在呈现的 HTML 中找到您的文本框控件，它将如下所示：

```
<input type="text" id="ct100_date" /> 
```

Javascript \ jQuery running on the browser will only find the control if you search for the *exact* `id` of the control. So take the `id` of the control in the HTML and seach for it with (*for example*) `$("#ct100_date")`

# jquery-mobile - 添加一个 JQM“你确定吗？” 我的 Jquery Mobile 弹出框的对话框提示

> ID：12789433
> 
> 赞同：4
> 
> 时间：2012-10-08T21:02:45.917
> 
> 标签：jquery-mobile

我有一个像这样的 jQuery Mobile 弹出框（请参见下面的代码），并且需要为每个提示“您确定吗？”的选项添加一个对话框。确定或取消：

（**注意：**我暂时删除了除第一个之外的所有选项以使代码更清晰）

```
<!--- Status, Suspend, Restore, Disconnect popup dialog box --->
<div data-role="popup" id="popupStatus" data-overlay-theme="a" data-theme="c"         
    style="max-width:500px;" class="ui-corner-all">
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete"     data-iconpos="notext" class="ui-btn-right">Close</a>
    <div data-role="header" data-theme="a" class="ui-corner-top">
        <h1>Status</h1>
    </div>
    <div data-role="content" data-theme="d" 
        class="ui-corner-bottom ui-content" data-backbtn="false">
        <h3 class="ui-title">Choose an Action:</h3>
        <a href="edit_ttStatus.cfm?id=<cfoutput>#rsTicketDetail.ttNum#</cfoutput>&id1=<cfoutput>#rsTicketDetail.sta#</cfoutput>" class="ui-corner-all" data-role="button" data-inline="false"  data-transition="flow" data-theme="b">Change</a> 
    </div>      
</div> 
```

**这是 Dialog 的代码**，但我不确定如何将其与上述代码“集成”：

```
<div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
    <h3 class="ui-title">Are you sure?</h3>
    <p>This action will ________ the ticket.</p>
    <a href="#" class="ui-corner-all" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>    
    <a href="#" class="ui-corner-all" data-role="button" data-inline="true" data-transition="flow" data-theme="b">OK</a>  
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T02:46:28.163

您可以尝试以下解决方案。

请注意，**帖子末尾提供了一个完整的工作示例（代码+屏幕截图）** ...

**1 -**在弹出框中的所有选项中添加一个类（**例如** ：） 。`myopt``#popupStatus`

`Validate`带有另外 2 个选项（和）的示例`Cancel`：

```
<div data-role="popup" id="popupStatus" data-theme="c" data-overlay-theme="a" style="max-width: 500px;">

    <!-- BACK BUTTON -->
    <a href="#" data-rel="back" data-role="button" data-theme="a"
        data-icon="delete" data-iconpos="notext" class="ui-btn-right">
        Close
    </a>

    <!--  HEADER -->
    <div data-role="header" data-theme="a">
        <h1>Status</h1>
    </div>

    <!-- CONTENT -->
    <div data-role="content" data-theme="d" data-backbtn="false">
        <h3>Choose an Action:</h3>

        <!-- OPTIONS -->
        <a href="#" class="myopt" 
            data-role="button" data-inline="false" data-theme="b">
            Change
        </a> 

        <a href="#" class="myopt" 
            data-role="button" data-inline="false" data-theme="b">
            Validate
        </a> 

        <a href="#" class="myopt" 
            data-role="button" data-inline="false" data-theme="b">
            Cancel
        </a>
    </div>
</div> 
```

**2 -**为弹出消息定义一个 ID 属性（**例如** ：） ，并包含一个标签（例如：） ，该标签将包含您要“集成”的动态消息（根据您从弹出）：`#popup_option``Are you sure?``<span>``<span id="myoption"></span>``#popupStatus`

```
<!-- POPUP BOX - FOR OPTIONS -->
<div data-role="popup" id="popup_option" 
    data-theme="a" class="ui-corner-bottom ui-content" data-overlay-theme="a">

    <div data-role="content">
        <h3 class="ui-title">Are you sure?</h3>

        <!-- INLCUDE THE SPAN TAG -->
        <p>This action will <span id="myoption"></span> the ticket.</p>

        <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">
            Cancel
        </a>

        <a href="#" class="ui-corner-all" data-role="button" data-inline="true" data-transition="flow" data-theme="b">
            OK
        </a>
    </div>
</div> 
```

**3 -**为弹出框的选项定义以下点击事件函数`#popupStatus`：

```
$(".myopt").click(function() {
    var ind = $(this).index();
    var toset = "";

    switch(ind) {
        case 1: 
            toset = "change";
            break;
        case 2:
            toset = "validate";
            break;
        case 3:
            toset = "cancel";
            break;
    };

    $("#myoption").html(toset);

    $( "#popupStatus" ).popup("close");

    setTimeout( function(){ $( '#popup_option' ).popup( 'open', { transition: "flow" } ) }, 100 );
}); 
```

**上面的函数执行以下操作：**

*   它首先在弹出框中获取被单击选项的索引`#popupStatus`，并将其存储在变量中`ind`。 `ind`将等于`1`, `2`, 或`3`如果选项`Change`, `Validate`, 或被`Cancel`点击（分别）。

*   变量`toset`是我们想要在弹出框内动态“整合”的内容`#popup_option`，取决于我们之前在弹出框中点击的选项`#popupStatus`。它最初设置为`""`。

*   从`switch`语句中，在代码中，我们将变量的值设置为`toset`、`change`或`validate`，`cancel`这取决于我们从弹出窗口中选择的选项`#popupStatus`。

*   我们将弹出窗口`toset`内的标签内的值/内容包括在内`<span>``#popup_option``$("#myoption").html(toset);`

*   我们关闭弹出窗口`#popupStatus`并打开`#popup_option`其中包含动态生成的消息（`change`、、`validate`或`cancel`）。我们注意到我们需要使用该函数
    打开弹出框。您不能使用 直接打开它，因为不允许链接弹出窗口。`#popup_option``setTimeout``$( '#popup_option' ).popup( 'open', { transition: "flow" } );`

[**您可以查看提到以下内容的在线文档**](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)：

> 该框架目前不支持弹出窗口的链接，因此无法嵌入从一个弹出窗口到另一个弹出窗口的链接。弹出窗口中所有带有**data-rel="popup"**的链接根本不会做任何事情。
> 
> 这也意味着自定义选择菜单在弹出窗口中不起作用，因为它们本身是使用弹出窗口实现的。如果您在弹出窗口中放置一个选择菜单，即使您指定**data-native-menu="false"** ，它也会呈现为本机选择菜单。
> 
> 使链式弹出窗口工作的解决方法是使用超时，例如在绑定到调用弹出窗口的**popupafterclose事件中。**在以下示例中，当第一个弹出窗口关闭时，第二个将通过延迟调用 open 方法打开：

* * *

## **完整示例：**

```
<html>
    <head>
        <meta name='viewport' content='minimum-scale=1.0, width=device-width, maximum-scale=1.0, user-scalable=no' />

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

        <script>
            $(function() {

                $(".myopt").click(function() {
                    var ind = $(this).index();
                    var toset = "";

                    switch(ind) {
                        case 1: 
                            toset = "change";
                            break;
                        case 2:
                            toset = "validate";
                            break;
                        case 3:
                            toset = "cancel";
                            break;
                    };

                    $("#myoption").html(toset);

                    $( "#popupStatus" ).popup("close");

                    setTimeout( function(){ $( '#popup_option' ).popup( 'open', { transition: "flow" } ) }, 100 );

                });
            });
        </script>
    </head>

    <body>

        <!-- YOUR JQUERY MOBILE PAGE -->
        <div data-role="page" id="my_page">
            <div data-role="content">
                <a href="#popupStatus" data-role="button" data-rel="popup" data-position-to="window"> Open
                    Status, Suspend, Restore, Disconnect popup dialog box 
                </a>

                <!--- Status, Suspend, Restore, Disconnect popup dialog box --->
                <div data-role="popup" id="popupStatus" 
                    data-theme="c" data-overlay-theme="a" style="max-width: 500px;">

                    <!-- BACK BUTTON -->
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">
                        Close
                    </a>

                    <!--  HEADER -->
                    <div data-role="header" data-theme="a">
                        <h1>Status</h1>
                    </div>

                    <!-- CONTENT -->
                    <div data-role="content" data-theme="d" data-backbtn="false">
                        <h3>Choose an Action:</h3>

                        <!-- OPTIONS -->
                        <a href="#" class="myopt" 
                            data-role="button" data-inline="false" data-theme="b">
                            Change
                        </a> 

                        <a href="#" class="myopt" 
                            data-role="button" data-inline="false" data-theme="b">
                            Validate
                        </a> 

                        <a href="#" class="myopt" 
                            data-role="button" data-inline="false" data-theme="b">
                            Cancel
                        </a>
                    </div>
                </div>

                <!-- POPUP BOX - FOR OPTIONS -->
                <div data-role="popup" id="popup_option" 
                    data-theme="a" class="ui-corner-bottom ui-content" data-overlay-theme="a">

                     <div data-role="content">
                        <h3 class="ui-title">Are you sure?</h3>

                        <p>This action will <span id="myoption"></span> the ticket.</p>

                        <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">
                            Cancel
                        </a>

                        <a href="#" class="ui-corner-all" data-role="button" data-inline="true" data-transition="flow" data-theme="b">
                            OK
                        </a>
                    </div>
                </div>

            </div><!-- content -->
        </div><!-- page -->

    </body>
</html> 
```

**测试截图：**

打开页面：

![1](../Images/1e1c62f9696a8cb18f24a6e0e87904e8.png)

点击上图按钮后：

![2](../Images/dc9ee942883438a41c511d278e72b102.png)

选择选项后`Validate`：

![3](../Images/c33d768a02f9c3989eec54337ce58c4a.png)

希望这可以帮助。如果您有任何问题，请告诉我:)。

# php - 我的 Zend 导航菜单是否应该被显式缓存？

> ID：12789434
> 
> 赞同：1
> 
> 时间：2012-10-08T21:02:48.327
> 
> 标签：php, zend-framework, caching, doctrine-orm, zend-navigation

好的，所以我使用 Zend Framework 1.12 和 Doctrine 2.2.3。这个`Zend_Navigation`类对我来说太简单和静态了，所以我正在实现自己的导航类。

场景如下：

我的应用程序要求导航菜单由标准（强制）项目（例如“主页”、“关于我们”等）以及用户特定项目（取决于用户角色）组成。动态菜单项存储在数据库（MySQL）中，我使用 Doctrine 作为我的 ORM 和 DBAL。

我正在尝试编写自己的导航类和部分视图来呈现其内容，并且在这样做时，我想知道我会遇到哪些性能问题，如果我在每次操作调用时查询数据库，然后将菜单项发回到页面？实现缓存的最佳方式是什么？我已经开始使用`Zend_Registry_Namespace`来存储我的菜单类（该类还存储当前活动的菜单项，我在部分视图中使用它来将 CSS 样式附加到该项目）。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:39:59.397

因此，您不是在开发用户可以创建自己的菜单结构和内容的 CMS。在这种情况下，您根本不应该将菜单信息存储在关系数据库中。与仅从 PHP 数组或配置文件中读取相同信息相比，从数据库中查询数据总是需要大量开销。您也不需要在会话中存储任何内容。事实上，这真的是一个简单的案例。让用户登录，确定用户的用户组/权限并以编程方式拼凑菜单。

您可以事先准备不同的菜单部分，然后只需合并数组并将最终数组发送到导航渲染器。

例子：

每个人都能得到的标准菜单：

```
$navArray = array(
    array(
        'controller' => 'index',
        'label' => 'Home',
    ),
    array(
        'controller' => 'about',
        'label' => 'About',

    )
); 
```

然后根据 ACL 角色添加条目：

```
if ($user->getRole() == 'administrator')
{
    $navArray[] = array(
        'controller' => 'tools',
        'label' => 'Tools'
    );
} 
```

# c# - 如何以编程方式更新本地机器上的颠覆密码？

> ID：12789436
> 
> 赞同：3
> 
> 时间：2012-10-08T21:02:50.717
> 
> 标签：c#, svn, authentication, tortoisesvn, cryptoapi

我正在构建一个小型内部工具，供我公司的开发人员使用。小目标之一是在我们更改密码时更新多个位置。需要更新的这些位置之一是颠覆。大多数开发人员都使用 TortoiseSvn，但并非所有人都使用（所以我更喜欢程序中立的解决方案，但这不是必需的）。

根据我对这个主题的研究，我的第一印象是 Tortoise 或其他应用程序将具有我可以使用的更改密码功能。从我能找到的情况来看，情况并非如此。所以我的下一个想法是更改存储在 %APPDATA%\Subversion\auth\svn.simple 中的加密密码。这样，我们就可以绕过任何程序，只需修复本地机器凭据，然后就可以愉快地前进了。

对于 Windows 机器，subversion 使用 wincrypt 密码存储进行加密。使用该代码非常简单。我发现这个[DPAPI（来自 Obviex）](http://www.obviex.com/Samples/Dpapi.aspx)代码可以为我处理加密。它只是为我处理细节（小记：我遇到了一些小问题，`System.Security.Cryptography.ProtectedData`所以我决定坚持这种方式）。

使用此代码，我能够从 svn.simple 文件夹中解密密码并发现它有效（之前保存的身份验证已解密并显示正确的密码）。但是，当我将密码加密并将其存储在适当的位置时，我总是会从 TortoiseSvn 获得登录屏幕。它不喜欢我的加密密码。

那么我的问题是什么......有没有人完成了类似于我想要做的事情？我应该忘记尝试更新颠覆密码吗？我是否应该强制签出存储库并提供凭据（我可以使用[SharpSvn](http://sharpsvn.open.collab.net/)执行此操作），然后在完成后删除存储库？

猜猜我只是希望发现有人已经解决了这个问题并且可以指出我正确的方向。如果您有任何问题，请告诉我。

其他值得注意的链接：

*   [关于提取 TortoiseSVN 密码的 Stackoverflow 问题](https://stackoverflow.com/questions/3883129/extract-tortoisesvn-saved-password)
*   [TortoiseSVN 密码解密器](http://www.leapbeyond.com/ric/TSvnPD/)- 用于解析 svn.simple 中的文件。为将新的加密密码应用于现有的 svn 身份验证文件进行了一些小的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:48:55.343

我知道这与您所要求的方向完全不同，但在正确的情况下，它可以实现您的目标......

如果您使用 Active Directory 来管理您的用户并且您愿意切换您的 SVN 服务器应用程序，您应该考虑使用[VisualSVN 服务器](http://www.visualsvn.com/server/)。它支持针对 LDAP 的身份验证，并且在 authz 文件中使用用户的 SID，因此用户名和密码的更改是透明的。此外，它可以[免费用于商业用途](http://www.visualsvn.com/server/licensing/)。

# javascript - 在 iOS 上的 JavaScript/MobileSafari 中检测耳机

> ID：12789438
> 
> 赞同：3
> 
> 时间：2012-10-08T21:02:56.113
> 
> 标签：javascript, ios, mobile-safari

是否可以在 MobileSafari 上的 JavaScript 中检测是否通过耳机而不是内置扬声器播放音频？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:05:19.103

不它不是。如果您想要与底层操作系统进行这种级别的交互，您需要一个应用程序。也许你可以考虑用 phonegap 或类似的东西制作一个应用程序，它基本上创建一个 webview 来包含你的应用程序（以网页的形式），但将底层操作系统的部分暴露给 webview。

# ruby - 如何将方法映射到数组上？

> ID：12789442
> 
> 赞同：0
> 
> 时间：2012-10-08T21:03:31.747
> 
> 标签：ruby

假设我有一个方法（实际上是一个助手）：

```
def f(x)  
  x + 1  
end 
```

我想要做的是将它映射到这样的枚举上：

```
(1..10).map &f 
```

显然它不会引发`ArgumentError: wrong number of arguments (0 for 1)` 错误。我知道我可以像这样在块中调用这个方法：

```
(1..10).map {|x| f x } 
```

但这对我来说似乎不是一个优雅的解决方案。对此还能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:07:02.643

你可以使用：

```
(1..10).map(&method(:f)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:09:41.767

首先，我看不出这有任何不雅之处

```
(1..10).map {|x| f x } 
```

通常，您应该使用它。但是，在特殊情况下，可以使用一种特殊的形式（您需要在对象上调用方法并且该方法不接受参数）。

```
class Fixnum
  def f
    self + 1
  end
end

(1..10).map(&:f) 
```

在这两种方法之间，我每天都会采用第一种。

# ios - NSJSONSerialization-header 在 JSONData 前面

> ID：12789459
> 
> 赞同：1
> 
> 时间：2012-10-08T21:05:06.233
> 
> 标签：ios, nsjsonserialization

我正在使用 NSJSONSerialization 类来解析以下 JSON 数据，但是，它返回 null。我的 JSONData 前面有标题，“jsonp1343930692（”。有什么办法可以在放入 NSJSONSerialization 之前处理/消除它？

```
 jsonp1343930692("snapshot":[{"timestamp":1349143800,"data":[{"label_id":10,"lat":29.7161,"lng":-95.3906,"attr":{"ozone_level":37,"exp":"IN","gridpoint":"29.72:-95.39"}},{"label_id":10,"lat":30.168456,"lng":-95.50448}]}]}) 
```

我也把我的代码放在这里只是给快照：

```
(void) httpRequest
{
url1=[NSURL URLWithString: url];
_weak ASIHTTPRequest *request1=[ASIHTTPRequest requestWithURL:url1];
[request1 setCompletionBlock:^{
   requestData=[request1 responseData];
   [self parsing];

 }];

}

(void) parsing
{
    NSError myError =nil;
    NSDictionary *dic=[NSJSONSerialization JSONObjectWithData:requestData     options:NSJSONMutableLeaves error:&myError];

NSLog(@"%@",dic);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:00:33.743

我正在从浏览器中试一试，所以我不确定它是否有效

```
-(void) parsing
{
    NSString *responseString = [[NSString alloc] initWithData:requestData
                                                     encoding:NSUTF8StringEncoding];
    // you gotta extract a valid JSON format
    // this is not very clean code, You need to depend on what your server responds
    // and fail gracefully
    // I'm assuming that your json data will always be between ()
    // NOTE: in your question you're missing a '{' at the begining of your json to be valid
    NSData *data = nil;
    NSRange *range = [responseString rangeOfString:@"("];
    if (range.location != NSNotFound && range.location < responseString.length) {
        responseString = [responseString substringFromIndex:range.location + 1];
        responseString = [responseString substringToIndex:responseString.length -1];
        data = [responseString dataUsingEncoding:NSUTF8StringEncoding];
    }
    if (data) {
        NSError myError =nil;
        NSDictionary *dic=[NSJSONSerialization JSONObjectWithData:data     
                                                          options:NSJSONMutableLeaves
                                                            error:&myError];
        if(!error) {
            NSLog(@"%@", dic);
        } else {
            //Serialization error
            NSLog(@"%@", error);
        }
    } else {
        //something went wrong with json data extraction
        // fail gracefully
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:54:54.197

这应该有效，并且还保证在第一个括号处停止。

```
NSScanner *scanner = [NSSccaner scannerWithString:JSONPString];
[scanner scanUpToString:@"(" intoString:NULL]; //This gets rid of the jsonpNNNNN
NSString *JSONWrappedInParens = [[scanner string] substringFromIndex:[scanner scanLocation]]; //Now we have our JSON wrapped in parentheses
NSCharacterSet *parens = [NSCharacterSet characterSetWithCharactersInString:@"()"]; //trim the parentheses leaving all internal parens untouched.
NSString *justJSON = [JSONWrappedInParens stringByTrimmingCharactersInSet:parens]; 
```

希望这可以帮助！

# asp.net - 是否可以在 Visual Studio .net 发布的网站内运行？

> ID：12789462
> 
> 赞同：1
> 
> 时间：2012-10-08T21:05:09.040
> 
> 标签：asp.net, .net, visual-studio, web

您好，我需要你们的确认。我有一位客户发布了网站（asp.net 2.0）并且网站在线。客户没有此网站项目的解决方案或原始源代码。我的问题是：是否可以在本地下载此代码并在 Visual Studio 中连续运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:07:52.957

简单的答案是不。

您确实需要源代码才能在 Visual Studio 中构建和运行网站。Visual Studio 的目的是帮助开发人员构建网站甚至扩展网站（看起来像您想要做的），并且这样做需要源代码文件。

您可以做的是尝试设置[IIS](http://www.iis.net/learn)（Internet 信息服务）并在本地运行网站的副本，但它不是您在问题中所述的 Visual Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:20:45.280

有时您可能会在实时服务器上找到源代码文件，或者它们的备份。如果没有，您可以使用 dll 和[一些软件](https://stackoverflow.com/questions/2425973/open-source-alternatives-to-reflector)来使用反射查看代码。

其中一些还为您重新生成 Visual Studio 项目 - 我知道 .Net Reflector 的付费版本可以。

如果你这样做，取决于你使用什么，一些代码可能不会完全按照它编写的方式出现，但它应该以相同的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:12:28.977

您可以在 cassini、iis 或 iis express 中运行它，但如果这是您所追求的，则无法单步执行代码。

如果你想简单地检查代码，我推荐 IL spy。这就是我使用的。

[http://ilspy.net/](http://ilspy.net/)

# node.js - stream.pipe 预期但得到了 process.nextTick(stream.resume)

> ID：12789463
> 
> 赞同：0
> 
> 时间：2012-10-08T21:05:18.390
> 
> 标签：node.js

随着[流](http://nodejs.org/api/stream.html)在 node.js 中变得越来越流行，我试图深入了解它们。我查看了[JSONStream](https://github.com/dominictarr/JSONStream)和[event-stream](https://github.com/dominictarr/event-stream)等流行模块的代码，并通读了[stream-handbook](https://github.com/substack/stream-handbook)。

还有一件事我不明白。我有时会看到以下模式：

主.js：

```
var module = require('./module')
module('something').pipe(process.stdout) 
```

模块.js：

```
var Stream = require('stream')

module.exports = function(string) {
  var stream = new Stream()
  stream.readable = true

  stream.resume = function() {
    stream.emit('data', string)
    stream.emit('end')
  }

  process.nextTick(stream.resume)

  return stream
} 
```

我认为这真的很令人困惑，因为我会`pipe`在`module.js`. 在示例中，我必须查找这一行`process.nextTick()`，然后找到被调用的函数。作为初学者，您可能不知道是做什么`process.nextTick()`的，因此没有机会了解该模块的作用。

这种模式是编写流模块的某种“最佳实践”吗？为什么不在 a 中实现逻辑`stream.pipe = function(dest){}`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:58:24.967

对您提出的问题尚不完全清楚，但`process.nextTick()`在这些情况下使用的用途是允许模块的用户在创建流*之后*但*在*发出任何事件之前添加其`'data'`等事件处理程序。在您的示例中不是必需的，它只是在客户端用作流的事件处理程序；这就是为什么它不在.**`stream.pipe``module.js`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T02:10:42.583

这样做是为了避免在订阅者（您输入的可写流）订阅之前触发“数据”事件。这种对`stream.resume`您的数据的“让球滚动”的调用。顺便说一句，他们正在整理 Readable Stream 位以使其更加直观。您可能想关注[这里](https://npmjs.org/package/readable-stream)。

编辑：顺便说一句，您应该知道调用`process.nextTick`意味着该函数将在下一次通过节点的事件循环时被调用。这就是延迟执行（我同意这是欺骗性的）是如何完成的。**

# php - 表单内的下拉列表....如何在没有按钮的情况下触发操作？

> ID：12789468
> 
> 赞同：0
> 
> 时间：2012-10-08T21:05:37.117
> 
> 标签：php, html

```
<form id="form1" name="form1" method="post" action="foo.php">

  sort by:
  <select>
  <option name="date">sort by date</option>
  <option name="name">sort by name</option>
  <option name="price">sort by price</option>
  </select>

</form> 
```

我想要的是，当我选择一个选项时，表单中的操作将自动执行？所以简而言之，我选择的内容将通过 $_POST 在 foo.php 中发送。我不希望输入按钮执行操作。

我需要 Javascript 来实现这一点吗？你能告诉我这样做的代码吗？如果它需要javascript那么如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:07:34.547

这将需要 JavaScript，但如果您愿意使用 jQuery，那么这真的很容易。使用 jQuery 将是：

```
$('#form1 select').on('change', function() {
  $('#form1').submit();
}); 
```

`select`在 JavaScript 中，您正在绑定元素的 onChange 事件。一种方法是：

```
<select onChange="document.form1.submit()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:08:51.380

为此，您需要 javascript。

尽管您应该使用[不显眼的 javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，但基本代码如下所示：

```
<select onChange="document.forms['form1'].submit();"> 
```

您将事件处理程序附加到`change`事件并让它提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:16:11.673

最简单的方法是直接将 javascript 与您的选择元素一起使用。该事件是 onChange。

```
 <select onchange="javascript:document.form1.submit();"> 
```

你也可以选择基于 jQuery 的表单。[从http://jquery.com/](http://jquery.com/)下载 jQuery javascript并将其包含在您的 HTML 中。之后，使用：

```
 <select id="sort"> 
```

而且，在你的内部：

```
 $(document).ready(function(){
           $("#sort").change(function() {
                    $(this).parent().submit();
           });
 }); 
```

# css - 如何使用鼠标悬停菜单

> ID：12789471
> 
> 赞同：0
> 
> 时间：2012-10-08T21:05:52.850
> 
> 标签：css

我的CSS是：

```
.jokesmenu  li a:hover {
    background-color: #35afe3;
    background-image:-webkit-gradient(
        linear, 
        left top, 
        left bottom, 
        from(rgb(69, 199, 235)),
        to(rgb(38, 152, 219))
    );
background-image:-webkit-linear-gradient(
        top, 
        rgb(69, 199, 235), 
        rgb(38, 152, 219)
    );
    background-image:-moz-linear-gradient(
        top,
        rgb(69, 199, 235), 
        rgb(38, 152, 219)
    );
background-image:-o-linear-gradient(
        top, 
        rgb(69, 199, 235), 
        rgb(38, 152, 219)
    );
    background-image:-ms-linear-gradient(
        top, 
        rgb(69, 199, 235), 
        rgb(38, 152, 219)
    );
background-image:linear-gradient(
        top, 
        rgb(69, 199, 235), 
        rgb(38, 152, 219)
    );
    filter: progid:DXImageTransform.Microsoft.gradient(
        GradientType=0,
        StartColorStr='#45c7eb', 
        EndColorStr='#2698db'
    );
color:#fff;
    list-style:none;
    text-decoration:none;
} 
```

html是：

```
<ul class="jokesmenu">
            <li class="jokesmenu"><a href="http://www.domain.com/jokes_sms/">SMS<span><?php echo $jokes_sms; ?></span></a>    </li>

</ul> 
```

如何使用上面的 css 悬停菜单？我用笑话菜单作为李。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:17:15.567

你到底想做什么？如果您将链接悬停在您希望列表背景更改的列表中？

如果是这样，请尝试从 li 中删除“jokesmenu”类并设置两个 CSS 规则

```
ul.jokesmenu { background: #eee; }
ul.jokesmenu li a:hover > ul.jokesmenu { background: #000; }

<ul class="jokesmenu">
<li><a href="#">Link</a></li>
</ul> 
```

因此，当您悬停链接时，这应该会更改列表背景。希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T11:49:07.670

如果你想让 li 作为活动或悬停阶段。然后你必须jquery

```
$("li a").hover(
  function () {
    $(this).parent('li').addClass('active');
  }, 
  function () {
    $(this).parent('li').removeClass('active');
  }
); 
```

# wordpress - Google Maps API 使旧版 iOS 移动 Safari 崩溃

> ID：12789474
> 
> 赞同：1
> 
> 时间：2012-10-08T21:06:01.647
> 
> 标签：wordpress, google-maps-api-3

我在我的个人网站上通过 google maps v3 api 调用地图。一切似乎都运行良好 - 直到我被告知我的网站使移动设备崩溃......

在最初的震惊和恐惧之后，我开始测试多个设备，但它似乎只影响旧的 iOS 版本。它在装有最新 iOS 6 的 iPhone 4 和 5 上运行良好。它在 iOS 5.1 上使我的 iPAD 1 崩溃，并且已经看到它也使 iPhone 4S（未知 iOS）崩溃；我测试过的安卓手机似乎运行良好......所以如果我的观察是正确的，它似乎是一个版本而不是性能问题。

我在这里找到了关于此类问题的唯一其他参考：http: [//blog.rotacoo.com/lazy-loading-instances-of-the-google-maps-api](http://blog.rotacoo.com/lazy-loading-instances-of-the-google-maps-api) ...虽然问题似乎很多API 调用次数。我只执行一个...

到目前为止，我尝试调用 Google Maps API 的 v3.8 / v3.9 / 3.10，将我加载的地图重置为基本设置等，异步加载......但问题似乎是一致的......

目前我正在像这样在标题中加载 API：

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=****&sensor=false"></script> 
```

我确实尝试通过functions.php中的入队脚本加载它，但似乎&会产生很多问题......

我正在运行最新的 Wordpress，您可以在以下位置查看该站点：[www.deborre.net](http://www.deborre.net)

非常感谢任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T03:41:23.590

我知道这已经晚了，但我遇到了同样的问题，我摆脱了标记动画。我正在尝试使用带有 DROP 动画的自定义标记，它在桌面上运行良好，但一直使我的 iPad 2 崩溃。不确定这是否是此处所述问题的解决方案，但它可能会在未来为某人省去一些麻烦。

另外，我使用的是 Modernizr，所以我的最终代码如下所示（在 iPad2 和 iPhone5 上测试 - 均为 iOS6）：

```
new google.maps.Marker({
    position: new google.maps.LatLng($this.attr('data-lat'), $this.attr('data-lon')),
    map: map,
    animation: Modernizr.touch ? '' : google.maps.Animation.DROP,
    icon: icon,
    shadow: shadow
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:26:08.493

我最好的猜测是，这是这些设备上的内存总量问题。运行 iOS < 4 的 iPhone 几乎都是非常旧的设备。不幸的是，这会影响 iOS 5 上的原始 iPad。

WordPress 网站往往没有得到很好的优化。只需查看页面上大量的 <script> 标记和样式表。

虽然这不是最好的答案，但请尝试减少页面上外部脚本和样式表的数量，看看是否会有所不同。构建了 WordPress 主题之后，这当然不是特别容易做到的。

# apache - Apache Virtual Hosts Strange Behavior

> ID：12789479
> 
> 赞同：0
> 
> 时间：2012-10-08T21:06:39.040
> 
> 标签：apache, virtual, hosts

I have a virtual - host file containing the following:

```
# lc.glsamcrm.com
#

<VirtualHost *:80>
    ServerAdmin webmaster@lc.glsamcrm.com
    ServerName lc.glsamcrm.com
    ServerAlias glsamcrm.com
    DirectoryIndex index.html
    DocumentRoot /var/www/glsamcrm/htdocs/  
    ErrorLog /var/www/glsamcrm/logs/error.log
    CustomLog /var/www/glsamcrm/logs/access.log combined

    ServerAdmin webmaster@crm.glstest.com
    ServerName crm.glstest.com
    ServerAlias crm.glstest.com
    DirectoryIndex index.html
    DocumentRoot /var/www/glsamcrm_prod/htdocs/ 
    ErrorLog /var/www/glsamcrm_prod/logs/error.log
    CustomLog /var/www/glsamcrm_prod/logs/access.log combined   
</VirtualHost> 
```

when I point my browser to lc.glsamcrm.com all works fine. When I point my browser to crm.glstest.com, I get the "THIS WORKS" index page located in the etc/www/ folder. What is going on?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:11:28.883

You need two separate VirtualHost directives. This is because you can only put one ServerName, DocumentRoot, and a few others per VirtualHost.

```
<VirtualHost *:80>
    ServerAdmin webmaster@lc.glsamcrm.com
    ServerName lc.glsamcrm.com
    ServerAlias glsamcrm.com
    DirectoryIndex index.html
    DocumentRoot /var/www/glsamcrm/htdocs/  
    ErrorLog /var/www/glsamcrm/logs/error.log
    CustomLog /var/www/glsamcrm/logs/access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@crm.glstest.com
    ServerName crm.glstest.com
    ServerAlias crm.glstest.com
    DirectoryIndex index.html
    DocumentRoot /var/www/glsamcrm_prod/htdocs/ 
    ErrorLog /var/www/glsamcrm_prod/logs/error.log
    CustomLog /var/www/glsamcrm_prod/logs/access.log combined   
</VirtualHost> 
```

# asp.net-mvc-3 - MVC 3 EditorFor 列表同时指定模板

> ID：12789481
> 
> 赞同：2
> 
> 时间：2012-10-08T21:06:42.257
> 
> 标签：asp.net-mvc-3

我比赛迟到了。我正在为 EditorFor 苦苦挣扎。

不是使用模板在文本框中显示实体的名称，而是将名称写入屏幕。它似乎正在编写对象的第一个属性，因为在我的真实项目中正在编写一个 guid。

如何在指定模板时使用 editorfor？

**家庭控制器**

```
public ActionResult Index()
    {
            HomeModel homeModel = new HomeModel();
            homeModel.RoomModels = new List<RoomModel>();
            homeModel.RoomModels.Add(new RoomModel() { RoomName = "Room-1" });
            homeModel.RoomModels.Add(new RoomModel() { RoomName = "Room-2" });
            homeModel.RoomModels.Add(new RoomModel() { RoomName = "Room-3" });

            return View(homeModel);
    } 
```

**家庭模型**

```
public class HomeModel
    {
        public List<RoomModel> RoomModels { get; set; }
    } 
```

**房间模型**

```
public class RoomModel
{
    public string RoomName { get; set; }
} 
```

**/Views/Home/Index.cshtml**

```
@model MVC.Temp.Models.Home.HomeModel

<h1>Home</h1>
<div id="RoomModels">
    @Html.EditorFor(m => m.RoomModels, "_RoomModelEditor")
</div> 
```

**/Views/Home/_RoomModelEditor.cshtml**

```
@model MVC.Temp.Models.Home.RoomModel
@Html.TextBoxFor(x => x.RoomName) 
```

**电流输出：**

![在此处输入图像描述](../Images/5a9092fb2f9fca45954517050d29d41a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:11:24.420

您需要将编辑器模板放在名为**EditorTemplates**的目录中。所以正确的路径应该如下：

```
/Views/Home/EditorTemplates/_RoomModelEditor.cshtml 
```

从[文档](http://msdn.microsoft.com/en-us/library/ee407414%28v=vs.98%29.aspx)中：

> 如果在控制器的 EditorTemplates 文件夹中找到名称与 templateName 参数匹配的模板，则使用该模板来呈现表达式。如果在控制器的 EditorTemplates 文件夹中找不到模板，则会在 Views\Shared\EditorTemplates 文件夹中搜索与 templateName 参数名称匹配的模板。如果没有找到模板，则使用默认模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:11:59.847

在`/Views/Home`名为`EditorTemplates`. 调用您的模板`RoomModel.cshtml`。

所以完整的模板名称是`/Views/Home/EditorTemplates/RoomModel.cshtml`.

使用类的名称作为编辑器模板的名称意味着，无论何时，`@Html.EditorFor(m => m.RoomModels)`它都会自动使用您的编辑器模板。

**更新**

如果您有多个具有需要共享相同编辑器模板的视图的控制器，则将您的模板放入`/Views/Shared/EditorTemplates`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T21:11:11.563

我认为您的问题是您传递的是 a`List<RoomModel>`而不是 a `RoomModel`。

您应该更改 EditorTemplate 以接受列表...或在显示每个 RoomModel 的视图中执行 Foreach。

# asp.net - 创建动态菜单？

> ID：12789482
> 
> 赞同：1
> 
> 时间：2012-10-08T21:06:50.027
> 
> 标签：asp.net, .net, html, menu

我在 SO 和 Google 上搜索了答案，所以请不要因为我没有找到我要找的东西而感到难过！:)

在 HTML 页面（使用 ASP .NET 4.5）中，我应该使用哪种类型的链接菜单？基本上，我想在页面左侧有一个“菜单”，由`List<string,string>`（href、text 或类似的东西）填充，我不知道在 HTML 中使用什么类型来允许这样做。

我在网上找到了一些东西，告诉我有关循环（大声笑）和其他非常明显的东西，但我找不到任何东西告诉我“放下`<li>`标签并将其留空，您将在页面加载中放入链接”或类似的东西。我只需要知道前端类型，如果您有更多信息的链接，那就太好了！但我迫切需要的是要使用的 HTML 类型和它应该位于的结构。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:12:48.650

好吧，您只有一组有限的 html 项目作为选择。HREF、INPUT TYPE="BUTTON" 或 INPUT TYPE="SUBMIT"。

通常菜单是用 A 标签实现的。

当然，有些网站只是简单地对几乎所有导致回发/页面加载的内容应用一点 onclick javascript 优点。

尽管只需打开您喜欢的网站并检查它的 html，您可能会得到更好的服务。

**简单输出：**

```
<ul>
  <li><a href="home.aspx">Home</a></li>
  <li><a href="Accounts.aspx">Accounts</a></li>
  <li><a href="Logout.aspx">Log Off</a></li>
</ul> 
```

**在您的菜单控件中：**

```
<asp:Repeater id="MenuRepeater">
  <headertemplate>
    <ul>
  </headertemplate>
  <itemtemplate>
    <li><a href='<%# ((DataRowView)Container.DataItem)["PageFile"]%>'><%# ((DataRowView)Container.DataItem["DisplayName"]%></a></li>
  </itemtemplate>
  <footertemplate>
    </ul>
  </footertemplate>
 </asp:Repeater> 
```

**代码背后：**

```
protected void Page_Load(object sender, EventArgs e) {
  // have something load a datatable with your page file and display name references  

  MenuRepeater.DataSource = GetMenu();
  MenuRepeater.DataBind();
}

protected void DataTable GetMenu() {
  // you would normally pull this from a database, this is here
  // only to show the idea.
  DataTable menu = new DataTable();
  menu.Columns.Add("PageFile", typeof(String));
  menu.Columns.Add("DisplayName", typeof(String));

  DataRow row = menu.NewRow();
  row["PageFile"] = "home.aspx";
  row["DisplayName"] = "Home";
  menu.Rows.Add(row);

  row = menu.NewRow();
  row["PageFile"] = "Accounts.aspx";
  row["DisplayName"] = "Accounts";
  menu.Rows.Add(row);

  row = menu.NewRow();
  row["PageFile"] = "Logout.aspx";
  row["DisplayName"] = "Logout";
  menu.Rows.Add(row);

  return menu;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:22:41.553

### 选项1

由于您使用的是 ASP.NET WebForms，因此您可以访问该`Menu`控件。

[我写了一篇](http://jupaol.blogspot.mx/2012/09/custom-aspnet-sitemapprovider-combining.html)关于编写动态的文章`SiteMapDataSource`，您可以将其中的概念应用到创建菜单中。（菜单可以使用 a 进行数据绑定`SiteMapDataSource`）

如果您使用 ASP.NET 4.5 和 WebForms，您可以配置 Menu 控件以呈现`<ul> <li>`元素：

示例在（*web.config*文件）：

```
<pages controlRenderingCompatibilityVersion="4.5"> 
```

上面的行将使用和元素呈现一个`Menu`控件`<ul>``<li>`

### 选项 2

使用`BulletedList`控件。此控件自动呈现`<ul>`列表：

```
<asp:BulletedList runat="server"  DisplayMode="HyperLink" BulletStyle="LowerAlpha">

</asp:BulletedList> 
```

### 选项 3

另一种方法是使用*HTML 列表*，使用`<ul>`和`<li>`

然后只需使用 CSS 样式来创建您想要的效果

### 参考

注意：无论如何，**[我强烈建议您阅读我](http://jupaol.blogspot.mx/2012/09/custom-aspnet-sitemapprovider-combining.html)**关于动态的博客`SiteMapProviders`

自己看一下：

*   [http://www.cssmenus.co.uk/](http://www.cssmenus.co.uk/)

*   [http://cssmenumaker.com/](http://cssmenumaker.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:27:45.060

就通用 HTML 结构而言，没有具体的方式来设置导航，但我个人将导航设置为`<ul>`这样的：

```
<ul id="navigation">
  <li>
    <a href="#">Homepage</a>
  </li>
  <li>
    <a href="#">Second Page</a>
  </li>
  <li>
    <a href="#">Third Page</a>
  </li>
</ul> 
```

* * *

### 奖励：下拉菜单

下拉菜单显然增加了混合的复杂性。当您想要添加子导航（下拉菜单）时，您通常会在`<ul>`标签内添加另一个标签`<li>`以创建二级列表。这是一个例子：

```
<ul id="navigation">
  <li>
    <a href="#">Homepage</a>
  </li>
  <li>
    <a href="#">Second Page</a>
    <ul>
      <li>
        <a href="#">Child Link #1</a>
      </li>
      <li>
        <a href="#">Child Link #2</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#">Third Page</a>
  </li>
</ul> 
```

如果您需要在悬停时隐藏/显示下拉菜单，您只需添加一些 CSS：

```
#navigation ul {
  display: none;
}
#navigation li:hover > ul {
  display: block;
} 
```

* * *

只要用户易于使用，如何获取链接并不重要。我喜欢这种`<ul>`方法，因为它在没有任何 CSS 的情况下也是可读的，而且在语法上也很有意义。IMO，列表是 HTML 解释这种层次结构的最佳方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-23T06:49:30.233

动态左侧菜单 - 简单

```
 C# CLASS FILES
        public class url_details
        {
            public string url;
            public string page_name;
            public string icon;
        }

        C# inside login page            
        List<url_details> url_list = new List<url_details>();            
        foreach (DataRow dr in dataTable.Rows)
        {
            url_details url_item = new url_details();
            url_item.url = dr["url"].ToString();
            url_item.page_name = dr["page_name"].ToString();
            url_item.icon = dr["icon"].ToString();
            url_list.Add(url_item);
        }           
        Session["urls"] = url_list;

        C#-HTML MENU FORM
         <%
            var uruls = (List<url_details>)Session["urls"];
            foreach (var url in uruls)
            {%>
                <li><a href="..<%=url.url %>"><%=url.icon %><span><%=url.page_name %></span></a></li>

            <% }                

        %> 
```

# maven - 你如何阻止 maven 尝试访问 http://repo.maven.apache.org？

> ID：12789488
> 
> 赞同：49
> 
> 时间：2012-10-08T21:07:09.587
> 
> 标签：maven, repository, maven-3

开发机无法上网，超时约60s。当我尝试构建时，我看到

```
Downloading: http://repo.maven.apache.org/maven2/com/google/gsa-connector/2.8.0/gsa-connector-2.8.0.pom 
```

但是，我的 POM 中有以下内容：

```
 <repository>
      <id>bb-nexus</id>
      <url>http://repo.dev.bloomberg.com/content/groups/public</url>
      <releases><enabled>true</enabled></releases>
      <snapshots><enabled>true</enabled></snapshots>
    </repository>
    <repository>
      <id>nexus-3rdparty</id>
      <url>http://repo.dev.bloomberg.com/content/repositories/thirdparty/</url>
      <releases><enabled>true</enabled></releases>
      <snapshots><enabled>true</enabled></snapshots>
    </repository> 
```

它总是先尝试去 repo.maven。我什至尝试添加到 D:\.m2\settings.xml

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://repo.dev.bloomberg.com/content/groups/public</url>
    </mirror>
  </mirrors> 
```

基于[http://maven.apache.org/guides/mini/guide-mirror-settings.html](http://maven.apache.org/guides/mini/guide-mirror-settings.html)但它继续首先尝试 repo.maven。我正在使用 Apache Maven 3.0.4 (r1232337; 2012-01-17 03:44:56-0500)

我不能使用 -o 因为它仍然需要访问本地 repo.dev。

* * *

这是“有效设置”：

```
D:\Users\chloe\Projects\team\confluence-plugin>mvn help:effective-settings
[INFO] Scanning for projects...
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-install-plugin/maven-metadata.xml
[WARNING] Could not transfer metadata org.apache.maven.plugins:maven-install-plugin/maven-metadata.xml from/to central (
http://repo.maven.apache.org/maven2): Connection to http://repo.maven.apache.org refused
...
[INFO]
[INFO] --- maven-help-plugin:2.1.1:effective-settings (default-cli) @ bb-confluence-plugin ---
[INFO]
Effective user-specific configuration settings:

<?xml version="1.0" encoding="UTF-8"?>
...
<settings xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLoca
tion="http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd">
  <localRepository xmlns="http://maven.apache.org/SETTINGS/1.1.0">d:\.m2\repository</localRepository>
  <pluginGroups xmlns="http://maven.apache.org/SETTINGS/1.1.0">
    <pluginGroup>org.apache.maven.plugins</pluginGroup>
    <pluginGroup>org.codehaus.mojo</pluginGroup>
  </pluginGroups>
</settings>

[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-09T21:26:33.647

所有 pom 文件都继承自 maven super POM [http://maven.apache.org/ref/3.0.4/maven-model-builder/super-pom.html](http://maven.apache.org/ref/3.0.4/maven-model-builder/super-pom.html) ，其中包含以下条目：

```
<repositories>
    <repository>
        <id>central</id>
        <name>Central Repository</name>
        <url>http://repo.maven.apache.org/maven2</url>
        <layout>default</layout>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories> 
```

尝试在你的 pom 中设置它（使用`<id>central</id>`）：

```
<repositories>
    <repository>
        <id>central</id>
        <url>http://repo.dev.bloomberg.com/content/groups/public</url>
        <releases>
            <enabled>false</enabled>
        </releases>
    </repository>
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>central</id>
        <url>http://repo.dev.bloomberg.com/content/groups/public</url>
        <releases>
            <enabled>false</enabled>
        </releases>
    </pluginRepository>
</pluginRepositories> 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-02-27T22:25:41.700

# 覆盖中央存储库

## 这个怎么运作：

大多数组织将需要设置一个或多个共享存储库，因为不是每个人都可以部署或简单地从中央 Maven 存储库下载。要发布版本以供其网络内的不同环境使用，组织通常希望设置所引用的内容作为内部存储库。

在为您的项目使用此存储库时，有两种选择：将其用作镜像，或让它覆盖中央存储库。如果它旨在成为中央存储库的副本，并且可以让开发人员在他们的设置中配置它是可以接受的，那么您可以将它用作镜像。或者就像在这种情况下，您想要阻止访问中央存储库以获得更大的控制，从项目级别而不是在每个用户的设置中配置存储库，或者在同一存储库中包含您自己的工件，您应该覆盖中央存储库存储库。

此外，在这一点上，非常重要的是要记住 maven 依赖项执行的解析过程，它有两个主要的存储库块设置：

1.  与礼仪相关的将在我们内部列出；
2.  与将在节点中添加或在生命周期中使用的插件相关。

## 解决方案：

作为一个面向对象的框架，Maven 的所有 POM 都有一个隐含的父级，即 Super POM。在其定义下，首先列出了依赖项和插件的解析器存储库配置：

```
<repositories>
    <repository>
      <id>central</id>
      <name>Maven Repository Switchboard</name>
      <layout>default</layout>
      <url>http://repo1.maven.org/maven2</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
  </repositories>

  <pluginRepositories>
    <pluginRepository>
      <id>central</id>
      <name>Maven Plugin Repository</name>
      <url>http://repo1.maven.org/maven2</url>
      <layout>default</layout>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
    </pluginRepository>
  </pluginRepositories> 
```

要使用您的内部存储库覆盖中央存储库，您必须在设置文件和/或使用标识符 central ( `<id>central</id>`) 的 POM 中定义一个存储库。通常，这必须同时定义为常规存储库和插件存储库，以确保所有访问都是一致的。例如：

```
<repositories>
    <repository>
      <id>central</id>
      <name>Maven Repository Switchboard</name>
      <layout>default</layout>
      <url>http://repo.dev.bloomberg.com/content/groups/public</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
  </repositories>

  <pluginRepositories>
    <pluginRepository>
      <id>central</id>
      <name>Maven Plugin Repository</name>
      <url>http://repo.dev.bloomberg.com/content/groups/public</url>
      <layout>default</layout>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
    </pluginRepository>
  </pluginRepositories> 
```

相关链接：[Coderwall - 阻止 maven 尝试访问其中央存储库](https://coderwall.com/p/zr6bga)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T17:44:38.587

尝试在报告/插件块中设置以下内容

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-project-info-reports-plugin</artifactId>
        <version>2.9</version>
        <configuration>
            <dependencyLocationsEnabled>false</dependencyLocationsEnabled>
        </configuration>
    </plugin> 
```

# css - 在两个固定的 div 元素之间创建一个滚动 div

> ID：12789492
> 
> 赞同：1
> 
> 时间：2012-10-08T21:07:29.537
> 
> 标签：css, html, position

我对如何在网站中定位 div 有点陌生，所以我希望有人能在这里提供帮助。我想要的是一个三明治类型的设置，在两个 div 中间有一个滚动内容。这样我就有了一个页眉 div 和一个页脚 div，它们都必须在页面上保持静态。然后，在它们之间，我必须有一个内容 div 填充两个固定 div 之间的空间，并且能够自行滚动。我将如何构建像这样简单的东西？或者这根本不简单？

更新：我创建了一个我认为几乎是我想要的小提琴。我的页眉和页脚在页面上保持静态。但是，我不得不欺骗主 div 的上边距，以便它的内容在标题之后立即开始。实际上，我仍然存在的唯一问题是内容的结尾在底部被页脚截断。我需要查看全部内容。

小提琴：http: [//jsfiddle.net/fgskS/18/](http://jsfiddle.net/fgskS/18/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:26:07.010

只需将连续元素的高度设置为等于 100% 并将内容 DIV 设置为在 Y 轴上滚动：

```
<header>
    <h1>Sandwich Layout</h1>
</header>
<div id="main" role="main">

</div>
<footer>
    Footer stuff here
</footer>

html,
body { height: 100%; margin: 0; padding: 0; } /* This is important */

header,
footer { background: #ccc; height:20%; }

#main { height: 60%; overflow-y:scroll; } 
```

小提琴：http: [//jsfiddle.net/kboucher/3E8Gg/](http://jsfiddle.net/kboucher/3E8Gg/)

2020 年更新：

HTML：

```
<header>
    <h1>Sandwich Layout</h1>
</header>
<div class="main" role="main">
  <div class="fake-height">Content here</div>
</div>
<footer>
    Footer stuff here
</footer> 
```

CSS：

```
body,
html {
  height: 100vh;
  overflow: hidden;
  margin: 0;
  padding: 0;
}

body {
  display: flex;
  flex-direction: column;
}

header,
footer {
  background: #eee;
  padding: 1rem;
}

.main {
  flex: 1 0 auto;
  height: 0; // prevents flex box expanding out of view-height
  overflow-y: auto;
  padding: 1rem;

  .fake-height {
    height: 1000px;
  }
} 
```

[https://codepen.io/kboucher/pen/dyomxWN](https://codepen.io/kboucher/pen/dyomxWN)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:09:22.967

如果您将页眉和页脚 div 设置为固定，您可以为您的内容创建一个主 div，该 div 将按照您想要的方式滚动。

# excel - 删除excel工作表中除表单控件外的所有形状

> ID：12789499
> 
> 赞同：14
> 
> 时间：2012-10-08T21:08:14.313
> 
> 标签：excel, vba

我有一个 excel 工作表，其中绑定到按钮的宏根据工作表中的用户输入参数绘制动态形状。

我正在尝试编写一个新的宏来清理工作表，或者换句话说，删除工作表中的所有形状。

我尝试使用下面的代码，它确实删除了所有形状，但是按钮表单控件也在此过程中被删除。有没有一种简单的方法可以只删除工作表中的形状（箭头、文本框、椭圆等）？非常感谢！！！

```
Sub DeleteAllShapes()

Dim Shp As Shape

For Each Shp In ActiveSheet.Shapes
    Shp.Delete
Next Shp

End Sub 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T21:42:14.710

要仅删除自选图形和文本框，您可以使用：

```
Sub DeleteAllShapes()

Dim Shp As Shape

For Each Shp In ActiveSheet.Shapes
    If Shp.Type = msoAutoShape Or Shp.Type = msoTextBox Then Shp.Delete
Next Shp

End Sub 
```

或者，您可以反过来工作并指定不删除的类型。您可以使用枚举类型，但使用类型名称更具可读性。以下代码段将删除除表单控件和 OLE 控件对象之外的所有内容。

```
Sub DeleteAllShapes()

Dim Shp As Shape

For Each Shp In ActiveSheet.Shapes
    If Not (Shp.Type = msoOLEControlObject Or Shp.Type = msoFormControl) Then Shp.Delete
Next Shp

End Sub 
```

MSO 形状类型的完整列表。 [http://msdn.microsoft.com/en-us/library/office/aa432678(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/aa432678(v=office.12).aspx)

Ron de Bruin 收集了大量可能与遇到此问题的任何其他人相关的片段。 [http://www.rondebruin.nl/controlsobjectsworksheet.htm](http://www.rondebruin.nl/controlsobjectsworksheet.htm)

# dynamics-crm-4 - Dynamics CRM 4.0 中的自定义实体发生错误

> ID：12789500
> 
> 赞同：0
> 
> 时间：2012-10-08T21:08:31.087
> 
> 标签：dynamics-crm-4

我有几个为 Microsoft Dynamics CRM 4.0 定义的自定义实体。其中一半工作，另一半不工作。当我导航到它们时，我看到的只是“发生错误”。

人们对a）我如何才能更具体和b）为什么有些实体可能会显示数据列表而其他实体只显示“发生错误”有什么建议吗？

谢谢，我真的卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:40:47.430

在我们提供任何更具体的帮助之前，我们需要查看堆栈跟踪。

[为此，您需要启用跟踪。](http://support.microsoft.com/kb/907490)

# vb.net - Silverlight 网站通过 visual basic.net

> ID：12789502
> 
> 赞同：0
> 
> 时间：2012-10-08T21:08:44.327
> 
> 标签：vb.net, silverlight

我想知道，根据通过我的软件输入的值，有什么方法可以从我的 vb.net 程序中调用由 silverlight 构建的网站 url？

更具体地说，我要调用的 url 是[http://lakein.mygisonline.com](http://lakein.mygisonline.com)，我想通过我的应用程序（例如 45-15-36-362-008.000-041）编写包裹搜索而不是编写它在主网站上，然后我需要它根据此标准打开页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:02:20.140

该网站由 The Sidwell Company 创建，他们在此处提供文档：

[http://www.sidwellco.com/gis-software-products/software-support/](http://www.sidwellco.com/gis-software-products/software-support/)

我会去探索它，看看他们是否有可用的开发人员 API。

您可以将包裹 ID 作为 URL 的一部分传递。

# ios - 使用格式复制文本 - iOS 6 NSAttributedString 到粘贴板

> ID：12789507
> 
> 赞同：2
> 
> 时间：2012-10-08T21:08:57.413
> 
> 标签：ios, copy, ios6, nsattributedstring, uipasteboard

如何以编程方式从 UITextView 复制格式化文本（例如*斜体*），以便在粘贴到另一个程序（例如邮件）时保留格式？我假设正确的方法是将 NSAttributedString 复制到粘贴板。现在，我可以通过以下方式将常规字符串复制到粘贴板：

```
NSString *noteTitleAndBody = [NSString stringWithFormat:@"%@\n%@", [document title], [document body]];
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
pasteboard.string = noteTitleAndBody; 
```

我注意到，如果我使用标准文本选择“复制”菜单项从 UITextView 中选择并复制文本，它会按需要工作。但我需要通过我创建的按钮来访问它。

我想也许我可以调用[UIResponderStandardEditActions](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponderStandardEditActions_Protocol/UIResponderStandardEditActions.html#//apple_ref/doc/uid/TP40008313-CH1-SW1) Copy 方法。使用以下内容，粘贴到邮件中确实保留了格式，但我的应用程序也因此崩溃。

```
NSMutableAttributedString *noteTitleAndBody = [[NSMutableAttributedString alloc] initWithString:[document title]];
[noteTitleAndBody appendAttributedString:[document body]];
[noteTitleAndBody copy:nil]; 
```

将不胜感激正确方法的示例。

PS - 我知道存在与 NSAttributedString 和粘贴板相关的现有线程，但它们似乎要么[用于 Cocoa](https://stackoverflow.com/questions/2581407/copy-nsattributedstring-to-pasteboard)，[不引用 UIResponderStandardEditActions Copy 方法](https://stackoverflow.com/questions/12601039/copy-nsattributedstring-in-uipasteboard)，要么早于 iOS 6，其中许多 UITextView 属性可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:26:40.390

以下内容适用于当前作为第一响应者的任何 textView：

```
[UIApplication sharedApplication] sendAction:@selector(copy:) to:nil from:self forEvent:nil]; 
```

因为我的复制按钮只有在我的 textView 退出 firstResponder 时才能访问，所以我必须做更多的事情：

```
[self.noteTextView select:self];
self.noteTextView.selectedRange = NSMakeRange(0, [self.noteTextView.text length]);
[[UIApplication sharedApplication] sendAction:@selector(copy:) to:nil from:self forEvent:nil];
[self.noteTextView resignFirstResponder]; 
```

感谢以下帖子为我指明了正确的方向：

[从 UIResponderStandardEditActions 执行复制/剪切](https://stackoverflow.com/questions/8031175/perform-copy-cut-from-uiresponderstandardeditactions)

[我可以从 UIResponderStandardEditActions 调用选择方法吗？](https://stackoverflow.com/questions/4641087/can-i-call-a-select-method-from-uiresponderstandardeditactions)

# ruby-on-rails - 返回前检查多个条件

> ID：12789509
> 
> 赞同：2
> 
> 时间：2012-10-08T21:09:06.170
> 
> 标签：ruby-on-rails, ruby

我想返回`mycollection.first.user.name`，但`mycollection`或`mycollection.first`可能为零。以下代码很丑陋，但有效：

```
if mycollection && mycollection.first && mycollection.first.user
  mycollection.first.user.name
end 
```

什么是红宝石方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:23:26.437

如果您碰巧使用的是 Rails，它会添加一个方法来`Object`调用`try`，这可能会有所帮助：

```
mycollection.try(:first).try(:user).try(:name) 
```

这将依次调用`first`、`user`和，但如果链中的任何值是，它只会返回而不抛出异常。`name``nil``nil`

如果你不使用 Rails，你可以很容易地自己定义它：

```
class Object; def try(method,*args,&block); send(method,*args,&block); end end
class NilClass; def try(method,*args,&block); nil; end end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:24:15.403

有些人不太热衷于 try()，但它肯定是您可能喜欢的一种方法。

```
name = mycollection.try(:first).try(:user).try(:name) 
```

如果任何内容为 nil，则 name 将为 nil，否则将返回 name 的值。

此外，您可能想要重构您的模型，以便您可以这样调用：

```
item.user_name

class ItemClass
  def user_name
    user.try(:name)
  end
end 
```

item 是集合中的第一个。

```
name = if mycollection && item = mycollection.first
  item.user_name
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:25:25.743

在纯 Ruby 中，你可以这样做：

```
if mycollection && mycollection.first.respond_to?(:user)
  mycollection.first.user.name
end 
```

那是因为如果`mycollection`是一个空数组，`mycollection.first`将返回 nil：

```
irb(main):002:0> nil.respond_to?(:user)
false 
```

# c# - ApplicationSettingsBase 不保存嵌套对象

> ID：12789511
> 
> 赞同：0
> 
> 时间：2012-10-08T21:09:12.847
> 
> 标签：c#, wpf, application-settings

我有这个设置类

```
class AppSettings : ApplicationSettingsBase
{
    [UserScopedSettingAttribute()]        
    public ObservableCollection<TrackViewModel> TracksViewModel
    {
        get { return (ObservableCollection<TrackViewModel>)(this["TracksViewModel"]); }
        set { this["TracksViewModel"] = value; }
    } 
```

...

TracksViewModel 有一个属性 Track (my Model)，它是一个类。这个类也有一个空的构造函数，所以我想这没有问题。

无论如何，当我保存设置时，所有属性都被保存，但 Track 对象。在输出调试中，我没有收到任何错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:15:56.747

appsettings 如何知道它们的 ViewModel 类型？您可能想要检查该对象的序列化。

或者，您很多人不想为此使用 appsettings 并滚动您自己的 xml 文件来保存这些东西。

这里有几个链接：

[http://www.codeproject.com/Articles/6730/Custom-Objects-From-the-App-Config-file](http://www.codeproject.com/Articles/6730/Custom-Objects-From-the-App-Config-file)

[如何将类对象存储在应用程序配置文件中](https://stackoverflow.com/questions/4387444/how-to-store-class-object-in-app-config-file)

[我可以将对象保存到 app.config 文件吗？](https://stackoverflow.com/questions/4382783/can-i-save-an-object-to-the-app-config-file)

[如何从 app.config 中读取自定义 XML？](https://stackoverflow.com/questions/1148611/how-to-read-custom-xml-from-the-app-config)

[如何在.net中序列化集合](https://stackoverflow.com/questions/639303/how-to-serialize-collections-in-net)

# google-app-engine - Google App Engine 是否支持 256 位 SSL 证书？

> ID：12789513
> 
> 赞同：4
> 
> 时间：2012-10-08T21:09:15.260
> 
> 标签：google-app-engine, ssl-certificate

我已经使用虚拟 IP (VIP) 为 Google App Engine 项目安装了证书，如下所述：[https ://developers.google.com/appengine/docs/ssl](https://developers.google.com/appengine/docs/ssl)

如果服务器支持，证书将使用 256 位加密，但当前使用的是 128 位加密。有没有办法让它使用 256 位加密代替？我无法在文档或其他任何地方找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T03:07:09.543

在客户端提供可接受的密码列表后，服务器选择使用的握手协议和对称密码；Google 不提供更改密码偏好的方法。

[App Engine 似乎优先选择带有RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)密钥交换的RC4-SHA（几乎所有知道[TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security) 1.0 都可用的东西） 。选择这可能是为了加快握手速度（非临时[Diffie-Hellman](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)握手[速度提高了 2 倍](http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html)），最大限度地减少 CPU 使用，并作为针对 TLS 1.0 + [CBC](http://en.wikipedia.org/wiki/Cipher_block_chaining#Cipher-block_chaining_.28CBC.29) [AES的](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)[BEAST 攻击](http://arstechnica.com/business/2011/09/new-javascript-hacking-tool-can-intercept-paypal-other-secure-sessions/)的缓解控制。

由于他们选择了 RC4-SHA，您并没有牺牲任何重要的安全性，尽管有趣的是，他们不使用临时 Diffie-Hellman 或[ECDHE](http://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman)密钥交换来实现[完美的前向保密](http://en.wikipedia.org/wiki/Perfect_forward_secrecy)，因为他们[公开声明](http://googleonlinesecurity.blogspot.com/2011/11/protecting-data-for-long-term-with.html)在他们的其他属性上使用它.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T05:13:42.930

App Engine 团队的话：

“我们只接受带有最小大小为 1024 位的 RSA 密钥的证书。

该证书仅用于验证身份，而 SSL 通道上的数据通信使用客户端和服务器之间通常支持的“最佳”对称密码进行加密。

我们的服务器支持一大堆对称密码，但我们更喜欢 AES128 而不是 AES256。如果客户端只支持 AES256，那么我们将使用它。”

# windows - PowerShell - 从 URL 中下载不包含文件名的文件

> ID：12789516
> 
> 赞同：5
> 
> 时间：2012-10-08T21:09:17.180
> 
> 标签：windows, powershell, download

我四处搜索并尝试了一些东西，但没有让它工作。该链接将是例如：（`http://www.website com/file/[fileID]`例如`http://www.website com/file/1wA5fT`）并且会出现一个框是否保存文件。

据我所知，我已经尝试过了，但它没有用。

```
$source = "http://www.website.com/file/[fileID]"
$dest = "C:\Users\Charles\Desktop\Downloads\"

$wc = New-Object System.Net.WebClient
$wc.DownloadFile($source, $dest) 
```

编辑：

如果我为目的地输入文件名，我就能够正确下载文件。但是我需要从例如提取文件名

`<a href="http://www.website.com/file/[fileID]">Filename.txt</a></li></div></ul>`

在我挑出这个之后，我将如何将文件名挑出到 $Filename 中？

```
$source = "http://www.website.com/file/[fileID]"
$dest = "C:\Users\Charles\Desktop\Downloads\$Filename"

$wc = New-Object System.Net.WebClient
$wc.DownloadFile($source, $dest) 
```

该代码将起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T19:49:22.793

```
$source = "http://www.website.com/file/someFile.txt"
$Filename = [System.IO.Path]::GetFileName($source)
$dest = "C:\Users\Charles\Desktop\Downloads\$Filename"

$wc = New-Object System.Net.WebClient
$wc.DownloadFile($source, $dest) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T16:50:39.217

我打电话时遇到了与您描述的相同的错误：

```
$source = "http://www.website.com/file/[fileID]"
$dest = "C:\Users\Charles\Desktop\Downloads\"

$wc = New-Object System.Net.WebClient
$wc.DownloadFile($source, $dest) 
```

但是当我更改 $dest 以包含完整路径时（包括它工作的文件的名称）

```
$dest = "C:\Users\Charles\Desktop\Downloads\[aFileName]" 
```

# facebook - 应用画布页面不工作

> ID：12789518
> 
> 赞同：-2
> 
> 时间：2012-10-08T21:09:18.380
> 
> 标签：facebook, canvas

我们所有的画布页面都停止工作。例如：[https](https://apps.facebook.com/paf-donations/) ://apps.facebook.com/paf-donations/ 。这会导致页面出现错误代码：错误 501 (net::ERR_INSECURE_RESPONSE)：未知错误。请指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:15:15.670

[您在https://fb.guidebycell.com/paf-donations/](https://fb.guidebycell.com/paf-donations/)的服务器 SSL 证书已过期。要求您的开发人员/管理员更新它

![在此处输入图像描述](../Images/99544064ea0a40d68f35e79e55aa2f99.png)

# java - 在透明的 JFrame 中设置组件的可见性

> ID：12789523
> 
> 赞同：2
> 
> 时间：2012-10-08T21:09:48.100
> 
> 标签：java, swing, jframe, transparency, alpha-transparency

问题：单击按钮时隐藏已添加到透明 JFrame 的 JPanel。

问题：JPanel 未正确隐藏，但仍以较深的颜色显示。如果没有启用 alpha 通道，它会隐藏起来。

谢谢你的帮助。

示例代码：

```
public class TestJFrame extends JFrame {

private JButton mSwitchButton = new JButton("Switch");
private JPanel mPanel = new JPanel();

public static void main(String[] args) {
    new TestJFrame();
}

public TestJFrame() {
    setSize(400, 300);      
    getContentPane().setLayout(new BorderLayout());
    this.setBackground(new Color(50, 50, 50, 50));      
    mPanel.setBackground(Color.RED);
    getContentPane().add(mPanel, BorderLayout.CENTER);
    getContentPane().add(mSwitchButton, BorderLayout.SOUTH);        
    mSwitchButton.addMouseListener( new MouseListener() {           
                    ...

        @Override
        public void mouseClicked(MouseEvent arg0) {
            mPanel.setVisible(false);
        }
                    ...
    });     
    pack();
    setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:45:58.273

较深的颜色与 JFrame 有关——JFrame 本身就是没有被正确隐藏的东西。但是，当您设置时，您的 JPanel 被很好地隐藏了

```
this.setBackground(new Color(50, 50, 50, 50)); 
```

然后删除JPanel，你剩下的是50 alpha值。将其设置为：

```
this.setBackground(new Color(50, 50, 50, 0)); 
```

当我在我的机器上测试它时纠正了这个问题。

# ruby-on-rails - 使用 Ruby on Rails 在 JSON 源中呈现动态变量

> ID：12789525
> 
> 赞同：4
> 
> 时间：2012-10-08T21:10:06.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json, api

我只是想为我们的客户创建一个 API 来与我们的主要 Rails 3 应用程序进行交互。

一方面，我希望 json 响应包含一些表单。基本上是我们控制并出现在他们网站上的一些表单代码。

我有这个工作正常（简化）：

```
def login_form
  @response = Form.find_by_something(params[:something_else])
  if @response 
    render :status=>200, :json=>{:response => @response} 
  end
end 
```

在客户端，我可以获取：

```
@logins = HTTParty.get("#{set_auth_url}/api/v1/logins.json?auth_token=xyz&something_else=abc").parsed_response 
```

并显示表格

```
= @logins["response"].html_safe 
```

问题是，表单代码有一些动态变量：

例如：

```
<div class="login">
  <FORM name="form1" METHOD="get" action="<%= request.path %>?">
  <INPUT TYPE="HIDDEN" NAME="chal" VALUE="<%= params['challenge'] %>">
  <% if @current_location['success_url'] %>
    <INPUT TYPE="HIDDEN" NAME="userurl" VALUE="/success">
  <% end %>
  <input type="hidden" name="UserName" placeholder="Username" value="<%= @user['username']['username'] %>">
  <input type="submit" name="login" value="Login" class="btn">
</div> 
```

我想知道这是否是个好主意？如果是这样，我怎样才能在 html 中打破这些变量？

如果不是，有人可以推荐一个更好的方法来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:43:36.593

在准备响应时，这些变量在服务器端是否已知？在这种情况下，我会尝试通过模板引擎运行它们`:json=> { :response => ERB.new(@response).result(binding) }`- 客户端只会收到适用于他的案例的 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:06:28.173

为什么不为此使用 Javascript 模板，如 Jquery 模板或 Mustache 或 Handlebar

所以像这样将表单保留在客户端

我将在这里使用 Mustache 来描述它....

```
...

    <script id="template" type="text/template">
      <div class="login">
      <FORM name="form1" METHOD="get" action={{request_path}}>
      <INPUT TYPE="HIDDEN" NAME="chal" VALUE={{challenges}}>
      {{boolean_value}} 
      <INPUT TYPE="HIDDEN" NAME="userurl" VALUE="/success">
      {{/boolean_value}}
      <input type="hidden" name="UserName" placeholder="Username" value={{user_name}}>
      <input type="submit" name="login" value="Login" class="btn">
     </div>
    </script>

</html> 
```

下一部分是以 ajax 的形式获取响应

使用任何 Javascript 框架我想它可以实现我在这里使用 jQuery

```
<script type="text/javascript">
  $(document).ready(function() {
    $.ajax({
      // make ajax call over here
      success: function(data)  {
        // JSON DATA 
         var template = $('script#template').html();
         $([container where html is place]).html(Mustache.to_html(template,data));
      }

    })
 }) 
```

希望这个帮助

不知道您希望如何使用普通的 Form html 标签而不是 form_tag，因为它不包含真实性令牌

希望这有帮助

# matlab - matlab的lsqr线性方程求解器相关的困惑

> ID：12789528
> 
> 赞同：0
> 
> 时间：2012-10-08T21:10:18.740
> 
> 标签：matlab

我对 matlab 中的 lsqr 线性方程求解器感到困惑。它指出如果 A 是一致的，x = lsqr(A,b) 试图求解 x 的线性方程组 A*x=b。我不明白他们所说的一致是什么意思。谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:24:25.337

这意味着方程组有一个解。考虑另一种**不一致**的情况——这将是一个没有解的方程组。举个简单的例子，在平面中找到一对（不相同的）平行线的交点——这可以用一个不一致的方程组来描述。请参阅此以获得更完整的解释[http://en.wikipedia.org/wiki/System_of_linear_equations#Consistency](http://en.wikipedia.org/wiki/System_of_linear_equations#Consistency)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:16:55.323

[一致 == 它至少有一个解决方案](http://www.mathwords.com/c/consistent_system_eqns.htm)

# android - 线程和电池消耗

> ID：12789531
> 
> 赞同：7
> 
> 时间：2012-10-08T21:10:36.000
> 
> 标签：android, thread-sleep

我正在开发每 5 秒检查一次手机状态的应用程序。我这样做了：

```
Thread checking = new Thread() {
    public void run(){
        while( <<some status>> ) {
            <<checkstatus and do something>>
            Thread.sleep(5000);
        }
    }
} 
```

这对电池有害吗？我怎么能以另一种方式做到这一点？几秒钟后服务停止工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T21:17:50.253

要回答您的问题，这取决于您在 while 循环中执行的操作。

如果您不使用和唤醒任何“昂贵”的组件（例如互联网、蓝牙、其他传感器和屏幕），您应该没问题。本质上，这就是操作系统在后台运行的方式，使用线程是最便宜的方式之一。

此外，如果您的任务是 CPU 密集型的，您也会耗尽电池电量。

如果你做得对，你的服务应该可以正常工作。

另一种方法是使用处理程序，它将为您抽象出大部分线程管理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:47:35.823

Thread.sleep() 使当前线程暂停，这意味着 CPU 将可用于其他线程或将直接关闭。还请注意睡眠强制上下文切换，但你在安全方面有很大的睡眠间隔。所以，一般来说，一切都取决于你。

例如，您可以使用[PowerTutor](https://play.google.com/store/apps/details?id=edu.umich.PowerTutor)来确保您的应用程序得到正确设计和实施。

# android - 滚动视图和线性布局

> ID：12789532
> 
> 赞同：3
> 
> 时间：2012-10-08T21:10:46.823
> 
> 标签：android, layout

我试图在 Android 中获得一个非常简单的布局，但我无法让它工作。我想要的只是一个标题（通过`include`一个 XML 文件），然后是一个`ScrollView`显示大量文本的 a，以及底部的两个按钮，它们应该始终可见。

我一直在摆弄`LinearLayout`s 和`RelativeLayout`s，但不知何故，我无法让它工作。到目前为止，我所拥有的是：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">

    <include layout="@layout/header" />

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    <ScrollView
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="@+id/svDisclaimer"
        >
           <TextView 
               android:layout_width="fill_parent"
               android:layout_height="wrap_content" 
               android:id="@+id/tvDisclaimer">
           </TextView>
    </ScrollView>
         <LinearLayout      android:orientation="horizontal" 
              android:layout_width="fill_parent" 
              android:layout_height="wrap_content" 
              android:layout_below="@+id/svDisclaimer"
               >
      .. [ snip ] ..
        </LinearLayout>
        </RelativeLayout>
</LinearLayout> 
```

（ .. [snip] .. 是我的按钮所在的位置）标题在那里，滚动视图弹出，但按钮无处可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:15:21.780

您的 ScrollView 的高度设置为`fill_parent`将 ScrollView 下方的所有内容推离屏幕底部。您将永远不会看到无法滚动到的内容...请尝试以下模式：

```
<ScrollView >
    <RelativeLayout >
        <TextView />
        <LinearLayout >
            <!-- [ snip ] -->
        </LinearLayout>
    </RelativeLayout>
</ScrollView> 
```

您也可以使用 RelativeLayout 位置标签来删除 LinearLayout。( `android:below`, `android:toRightOf`, 等)

* * *

尝试使用我评论中的此配置：

```
<ScrollView
    ...
    android:above="@+id/buttons" >

    ...
</ScrollView>
<LinearLayout
    android:id="@+id/buttons"
    android:layout_alignParentBottom="true"
    ... >

    ...
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:23:50.333

就像 Sam 所说，将 ScrollView 的高度设置为 fill_parent 会将按钮推离屏幕。不过，有一种方法可以使用 RelativeLayout 的布局标签使其工作。尝试这个：

```
<LinearLayout>
[snip]
    <RelativeLayout>
         <!-- Declare the buttons *before* the ScrollView, but use layout params to move
         them to the bottom of the screen -->
         <LinearLayout
            android:id="@+id/buttonParent"
            android:layout_alignParentBottom="true">
              [Buttons go here]
         </LinearLayout>
         <!-- The "android:layout_above" attribute forces the ScrollView to leave space for the buttons -->
         <ScrollView
           android:height="fill_parent"
           android:layout_above="@id/buttonParent" />
             [snip]
         </ScrollView>
    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T22:10:06.813

另一种选择是将必须留在屏幕上的顶部和底部元素放在框架布局中。[http://android-er.blogspot.ca/2011/06/example-of-framelayout.html](http://android-er.blogspot.ca/2011/06/example-of-framelayout.html)

# php - MYSQL中的if条件用于排序距离和检查状态

> ID：12789536
> 
> 赞同：0
> 
> 时间：2012-10-08T21:11:02.673
> 
> 标签：php, mysql, sorting, if-statement

我正在编写一个代码来显示最近的商店位置及其营业状态（例如商店是否按月营业或关闭）。我正在使用以下代码，该代码适用于距离，但我想对列表进行排序以显示数据及其打开状态，然后按距离对列表进行排序。如果条件代码进入查询，你能帮我把我的 PHP 放在下面吗？我有 2 列`'start_date'`的值为`'int'`月份，并且`'end_date'`......我正在使用以下 php 代码来显示 html 中的状态。你能帮我改进我的查询，先按打开状态对结果进行排序，然后按距离对结果进行排序

```
$currMonth = date('m');

$query="SELECT *,
            6371 * 2 * ASIN(SQRT( POWER(SIN(($lat - latitude) * pi()/180 / 2), 2) +     COS($lat * pi()/180) * COS(latitude * pi()/180) *
            POWER(SIN(($long - longitude) * pi()/180 / 2), 2) )) as
            distance, $currMonth >= start_date as open FROM table_name 
            GROUP BY Id HAVING distance <= $km ORDER by distance ASC ,open ASC";

if (($currMonth >= $row['start_date']) && ($currMonth <= $row['end_date']))
$Status = "open";
else
$Status = "close"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:50:07.357

替换您的查询的这一行

```
$currMonth >= start_date as open FROM table_name 
```

有了这个：

```
IF($currMonth >= start_date AND $currMonth <= end_date, 'open', 'closed') as open FROM table_name 
```

它使用这样的内联 IF 条件 -`IF(condition, true_result, false_result)`

如果条件为真，则结果为`true_result`。如果条件为假，则结果为`false_result`。

`ORDER`如果要先按打开状态排序，然后再按距离排序，还需要更改子句的顺序：

```
... ORDER BY open ASC, distance ASC 
```

# macos - 可执行文件在构建后可以链接到动态库吗？

> ID：12789540
> 
> 赞同：0
> 
> 时间：2012-10-08T21:11:10.877
> 
> 标签：macos, binaryfiles, dynamic-linking

我已经建立了一个二进制'foo'。我现在希望可执行文件链接到动态库“bar”。如何将 foo 链接到 bar？（使用`ld`或任何其他方式）。我不想在 OSX 或Linux`DYLIB_INSERT_PATH`上的等价物上使用。`LD_PREOAD`

我想在 OSX 上这样做，但这个问题是一个通用问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:23:40.677

你的意图是什么？

链接过程解析符号：它提供对需求的满足。

如果可执行文件不需要动态库提供的任何符号，链接器将完全丢弃它。

您可以用另一个动态库替换一个动态库，但是当它不存在时您无法解决需求。

# kobold2d - 游戏中心登录头像只有 Kobold2d 的任何解决方案

> ID：12789549
> 
> 赞同：2
> 
> 时间：2012-10-08T21:11:45.590
> 
> 标签：kobold2d

我是使用 Kobold2d v2.0.4 的初学者，我正在创建的游戏仅适用于 iOS 6，并且设计为仅在横向上运行，当我实现游戏中心时，我发现 iOS 6 上的游戏中心登录只能在肖像，所以我搜索并找到了解决方案，但问题是我找不到将它们放在 Kobold2d 中的位置。将此添加到您的 RootViewController

```
-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

-(BOOL)shouldAutorotate {
    return [[UIDevice currentDevice] orientation] != UIInterfaceOrientationPortrait;
} 
```

我曾尝试寻找 KKRootViewController 但我能找到，我只是想知道其他 Kobold2d 开发人员如何找到解决此问题的解决方案。如果您不介意，请告诉我您如何解决它。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:30:13.590

我自己没有测试过，我认为如果您将此代码放在项目的 AppDelegate 类中它可能会起作用。如果没有，您可能必须在 KKRootViewController 或 CCDirector 上使用这些方法创建一个类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:02:48.207

实际上对我有用的是在应用程序摘要中选择纵向和横向，然后在 UINavigationController 上创建一个类别，因为 Kobold2D 使用导航控制器作为窗口上的 rootViewController。

```
@implementation UINavigationController (GameCenter)

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

-(BOOL)shouldAutorotate {
    return [[UIDevice currentDevice] orientation] != UIInterfaceOrientationPortrait;
}

@end 
```

并将其导入 AppDelegate.m 文件。无论如何，谢谢你的想法......

# iphone - 另一个 CustomBadge 困境

> ID：12789550
> 
> 赞同：1
> 
> 时间：2012-10-08T21:11:47.387
> 
> 标签：iphone, ios

我不知道如何更新我以前的帖子/问题，所以我开始了另一个。（我在这里没有问很多问题。对stackoverflow来说还是很新的）

我现在有三个徽章，需要一起（或独立）控制它们。

```
-(void)viewWillAppear:(BOOL)animated{

[self fillBadges];

//********** Start Custom Badge All ***************//
NSString *myNewString = [NSString stringWithFormat:@"%i",allBadge];

if (allBadge >= 1) {
    CustomBadge *customBadgeAll = [CustomBadge customBadgeWithString:myNewString];
    customBadgeAll.tag = 100;
    [customBadgeAll setFrame:CGRectMake(125, 90, customBadgeAll.frame.size.width, customBadgeAll.frame.size.height)];
    [self.view addSubview:customBadgeAll];

}else{
    [[self.view viewWithTag:100] removeFromSuperview];
}

//********** Start Custom Badge 1  ***************//
NSString *myNewString1 = [NSString stringWithFormat:@"%i",badge1];

if (badge1 >= 1) {
    CustomBadge *customBadge1 = [CustomBadge customBadgeWithString:myNewString1];
    customBadge1.tag = 200;
    [customBadge1 setFrame:CGRectMake(125, 165, customBadge1.frame.size.width, customBadge1.frame.size.height)];
    [self.view addSubview:customBadge1];
}else{
    [[self.view viewWithTag:200] removeFromSuperview];
}

//********** Start Custom Badge 2 ***************//
NSString *myNewString2 = [NSString stringWithFormat:@"%i",badge2];
if (badge2 >= 1) {
    CustomBadge *customBadge2 = [CustomBadge customBadgeWithString:myNewString2];
    customBadge2.tag = 300;
    [customBadge2 setFrame:CGRectMake(125, 232, customBadge2.frame.size.width, customBadge2.frame.size.height)];
    [self.view addSubview:customBadge2];
}else{
    [[self.view viewWithTag:300] removeFromSuperview];
}

//********** End Custom Badge ***************//

[self.view setNeedsDisplay];
[[self navigationController] setNavigationBarHidden:NO animated:NO]; 
```

}

if else 语句正在工作。然而 removeFromSuperview （当它工作时）只会以与设置方式相反的顺序一一删除徽章，并且只有当我离开视图并返回它时。在这种情况下 3 次。例如：打开 3 个徽章。在 viewBadgeSet 中，badge2 设置为 >1，然后 badge1 设置为 >1，最后 badge3 设置为 >1（无特定顺序）。我查看 viewMainButtons 中的视图，现在打开了三个徽章。现在，如果 viewBadgeReset 中的所有标记都设置为 0，那么我回到 viewMainButtons，badge3 将消失。然后我必须转到另一个视图，然后返回 viewMainButtons，badge1 将消失，再次离开视图并返回 viewMainButtons，最后 badge3 将消失。我希望这是有道理的。如何一起从视图中删除所有徽章？抱歉这么浓。我希望这个问题不会太模糊。我只是不确定该怎么做。

（显然我没有足够的积分进入聊天）

谢谢

# php - 如何中止正在进行的 yiiGridView 更新调用？

> ID：12789557
> 
> 赞同：1
> 
> 时间：2012-10-08T21:12:15.357
> 
> 标签：php, yii

我正在尝试使用 Yii 框架实现即时搜索机制。我想要做的是捕捉关键事件并每次更新搜索词。它正在工作，但根据用户的打字速度会出现问题。我需要的是一种中止正在进行的更新调用的方法，这样只有最后一次搜索和网格视图更新调用才重要。

这是代码

```
var runningQSRequest = false;
var qsrequest;
function activate_quicksearch() {

    if (runningQSRequest){
        qsrequest.abort(); //this doesn't work in Yii framework
    }

    runningQSRequest = true;
    qsrequest = $.fn.yiiGridView.update('products-grid', {
        data: $.cookie('filter_query') + '&Products[name]=' + escape($("#quick-search").val())
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:37:38.133

不要中止请求，而是尝试[限制](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

# ember.js - ember 路由序列化和反序列化参数

> ID：12789558
> 
> 赞同：1
> 
> 时间：2012-10-08T21:12:22.800
> 
> 标签：ember.js, coffeescript, ember-old-router

我有一个使用日期参数来检索事件集合的 ember 路由。我正在使用反序列化函数来获取集合。获取集合后，url 从“/day/2012-10-08”变为“/day/undefined”。

这些事件包括一系列日期，因此我不能使用数据来序列化日期参数。相反，我应该能够返回 url 上的参数。我下面的示例在反序列化时在路由器“current_params”上设置一个属性，并在序列化时返回它。我想知道是否可以访问 serialize 方法中的参数。

```
 day: Ember.Route.extend
        route: "/day/:date"

        deserialize: (router, params) ->
          router.set('current_params', params)
          router.get('store').findQuery( App.Event, { date: params.date } )

        serialize: (router, context) ->
          router.get('current_params')

        connectOutlets: (router, context) ->
          router.get('applicationController').connectOutlet( 'timecard', context ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:55:41.453

我已经看到命名路由更改为方法失败`undefined`时`serialize`，虽然这里没有足够的信息可以确定，但我强烈怀疑是这种情况。

我认为依靠路由器为您保留这样的信息是错误的。它并非旨在成为任意信息的存储库，只是为了保持您的应用程序状态。

我的建议是将日期范围信息移动到控制器中。所以如果控制器是`TimecardController`那么

```
TimecardController = Ember.ObjectController.extend
    #other controller stuff
    #more controller stuff

    event_date: new Date 
```

然后在你的路由器中

```
deserialize: (router, param) ->
    @get('timecardController').set 'event_date', params.date
    @get('store').findQuery App.Event, {date: params.date}
serialize: (router, context) ->
    date = @get('timecardController.event_date')
    #or on older ember builds @getPath('timecardController.event_date')
    '' + date.getFullYear() + '-' + (date.getMonth()+1) + '-' + date.getDate() 
```

# sql - sql server 表类型冲突操作数

> ID：12789560
> 
> 赞同：18
> 
> 时间：2012-10-08T21:12:30.597
> 
> 标签：sql, sql-server, stored-procedures

我在两个不同的数据库模式中定义了相同的表类型。当我尝试从一个模式调用 SP 到另一个传递类型作为参数的模式时，我收到以下错误：

> “操作数类型冲突 myCustomType 与 myCustomType 不兼容”

我有以下代码：

### 类型定义

```
CREATE TYPE myCustomType AS TABLE
(
  somevalue INT, 
  somevalue2 INT
); 
```

### 存储过程定义

```
USE DB1
GO
CREATE PROC1( 
  @myVar myCustomType READONLY
)
AS
BEGIN
  EXEC db2.dbo.PROC2 @myVar
END

GO

USE DB2
GO
CREATE PROC2( 
  @myVar myCustomType READONLY
)
AS
BEGIN
  --do something with myVar  
END 
```

### 执行

```
USE db1
GO
DECLARE @myVar myCustomType
INSERT into @myVar(1,2)
EXEC PROC1 @myVar 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-08T21:57:07.783

您遇到了用户定义表类型的限制之一。

请参阅此[Microsoft Connect 项目](https://web.archive.org/web/20140315022646/http://connect.microsoft.com/SQLServer/feedback/details/293895/tvp-error-in-calling-a-stored-procedure-with-a-table-variable-with-same-definition)，按“设计”关闭。

给出的理由是

1.  proc 参数的 [table]type 必须与传入参数的类型完全相同
2.  验证规则 (1) 是否被应用变得越来越昂贵

在数据库之间传递表类型参数是不可能的，因为你不能使用类似的代码

```
create proc PROC2( 
 @myVar db1.dbo.myCustomType READONLY
) 
```

错误是：

> 类型名称“db1.dbo.myCustomType”包含的前缀数量超过了最大数量。最大值为 1。

仅仅因为您将它们命名为相同并在 DB1 和 DB2 中为它们提供了相同的定义并不会使它们成为相同的类型 - 它们仍然不兼容，就像下面在单个 db 上也失败的情况一样：

```
CREATE TYPE myCustomTypeX AS TABLE
(
somevalue INT, 
somevalue2 INT
);
GO
create proc procX
@in myCustomTypeX readonly
AS
select * from @in myCustomTypeX;
GO
declare @myCustomTypeX TABLE
(
somevalue INT, 
somevalue2 INT
);
exec procX @myCustomTypeX

--
Msg 206, Level 16, State 2, Procedure procX, Line 0
Operand type clash: table is incompatible with myCustomTypeX 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T09:09:13.530

我在两个数据库上都使用了 SQL Server 2012，这个限制仍然适用。

这里有一篇很棒的文章，里面充满了解决方法：http: [//www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)

对于我的直接问题，我使用 XML 将数据表从一个 proc 传递到另一个。这很笨重，但我一次只需要通过几十条记录。不止于此，我开始担心性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T13:54:00.960

唯一可行的方法是通过 CLR 用户定义类型，它也有其限制： [https ://technet.microsoft.com/en-us/library/ms178069%28v=sql.105%29.aspx](https://technet.microsoft.com/en-us/library/ms178069%28v=sql.105%29.aspx)

# java - PlayN 和兼容性

> ID：12789566
> 
> 赞同：1
> 
> 时间：2012-10-08T21:13:15.183
> 
> 标签：java, android, playn

在某些手机上，我无法执行 PlayN 项目。每次我得到：

```
E/AndroidRuntime(10336): Uncaught handler: thread main exiting due to uncaught exception
E/AndroidRuntime(10336): java.lang.NoSuchMethodError: playn.android.GameViewGL.setEGLContextClientVersion
E/AndroidRuntime(10336):        at playn.android.GameViewGL.<init>(GameViewGL.java:85)
E/AndroidRuntime(10336):        at playn.android.GameActivity.onCreate(GameActivity.java:73)
E/AndroidRuntime(10336):        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(10336):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
E/AndroidRuntime(10336):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
E/AndroidRuntime(10336):        at android.app.ActivityThread.access$2200(ActivityThread.java:119)
E/AndroidRuntime(10336):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
E/AndroidRuntime(10336):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(10336):        at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(10336):        at android.app.ActivityThread.main(ActivityThread.java:4363)
E/AndroidRuntime(10336):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(10336):        at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(10336):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
E/AndroidRuntime(10336):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
E/AndroidRuntime(10336):        at dalvik.system.NativeStart.main(Native Method)
I/Process ( 2238): Sending signal. PID: 10336 SIG: 3 
```

我在三星 Galaxy S1 和 Acer A500 上得到了它。但在 Google Nexus S 上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:19:55.400

它需要具有支持在软件中模拟的 openGL20*或*openGL20 的 GPU 的设备（中国制造的几种型号都这样做）

# vbscript - 如何输入双引号？

> ID：12789575
> 
> 赞同：0
> 
> 时间：2012-10-08T21:14:14.190
> 
> 标签：vbscript

在 VBS 中，我想做这样的事情：

```
Name=inputbox("You wake up. You are on an island. You don't remember how you got here. In       
fact, you don't even remember your name. What is your name?")
fname=inputbox("Ah, yes. My name is " &Name ". I remember now.") 
```

我该怎么做？我不能 在中间使用*&Name吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:16:29.437

你快到了。您需要`&`在变量的两侧使用连接运算符 , ：

```
fname = inputbox("Ah, yes. My name is " & Name & ". I remember now.") 
```

我不太确定我是否了解您对报价的理解。如果要在字符串中包含双引号，则需要通过编写`""`. 所以创建一个只有一个双引号字符的字符串的方法是这样的`""""`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:24:57.523

从理论上讲，如果您想让您的代码与 VB.Net/C# 的代码相似，您可以执行以下操作：

```
fname = inputbox(Replace("Ah, yes. My name is {0}. I remember now.", "{0}", Name)) 
```

只是我在这个问题上的 0.02 美元。这将允许您像阅读较新的东西一样阅读它，但使用较旧的功能。

# html - 调整 td 的宽度以使行宽均匀

> ID：12789580
> 
> 赞同：2
> 
> 时间：2012-10-08T21:14:44.670
> 
> 标签：html, html-table, width, tablelayout

我正在尝试生成每行中包含不同数量单元格的表格。

*   第一行是标题行（每隔一行包含单元格）。这个标题是表格的宽度。

*   第二行有2个单元格......

*   第三个有 1 个单元格...

*   第四个有4个细胞......

*   第五行也是最后一行有 3 个单元格。

我想要设置表格，以便行跨越表格的整个宽度。如果表格是 1000px...

*   标题为 1000px 宽

*   第二行的单元格将是 500px EACH

*   第三行的单元格为 1000px

*   第 4 行中的单元格将是 250px EACH

*   第 5 行中的单元格分别为 333px、334px 和 333px（从左到右）

我发现我可以对前 4 行使用 colspan，但第 5 行（带有 3 个单元格）需要一个非整数值。如果没有我可以告诉的 colspan，第 5 行中的单元格不会扩展到它们的列之外......

*   尝试宽度：## CSS 代码

*   在每个单元格的 div 标签内

*   在 td 标签内

*   创建一个或多个定义单元格宽度的类

*   标识每个单元格，带或不带 div 标签，并单独定义宽度

*   并调整表格布局：选项

几天后，我现在走到了尽头。我唯一能想到的就是故意将每行中的单元格数量增加三倍，以便 colspan 都是整数值。以我想要的方式格式化表格听起来很不方便并且非常困难。

这是一个网站的蝙蝠侠电影表——我正在建立一个练习网站，以学习 HTML/CSS。几个月来我一直在断断续续地使用 HTML，几周来一直在使用 CSS。

PS：它没有用于布局，我只是试图调整表格本身的布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:28:25.957

那么使用 colspan 的表格除了最后一行都很好吗？

您是否考虑过在最后一行的 colspaned 单元格中包含一个包含 3 个单元格的单行表？

```
<table>
    <thead>
        <tr>
           <th colspan="4">
           </th> 
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="2"></td>    
            <td colspan="2"></td>
        </tr>
        <tr>
            <td colspan="4"></td>    
        </tr>
        <tr>
            <td></td>    
            <td></td>
            <td></td>    
            <td></td>
        </tr>
        <tr>
            <td colspan="4">
                <table>
                    <tbody>
                       <tr>
                           <td></td>
                           <td></td>
                           <td></td>
                       <tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table> 
```

您可能还需要为内表设置宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:17:35.380

`colspan`是一个整数。它允许特定单元格扩展以填充多于一列。

例如：

```
-------------------------
|        |          |   |
-------------------------
|                   |   |
------------------------- 
```

第二行的第一个单元格有`colspan="2"`。使用`width`（HTML 或 CSS）以更绝对的方式设置宽度。

此表的 HTML 如下所示：

```
<table>
    <tr>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="2"></td>
        <td></td>
    </tr>
</table> 
```

请注意，第二行只有两个单元格，因为第一行占据了两列。

**编辑**
所以基本上，你需要整数。您有一行有 4 个单元格，还有一行有三个单元格。所以 4 行中的每个单元格占据了水平空间的 1/4。3 行中的每个单元格占用水平空间的 1/3。现在你需要使这些[分数等价](http://www.mathsisfun.com/equivalent_fractions.html)。

我会为你省去做数学的步骤。第`colspan`4 行中的每个单元格是`3`，第 3 行中的 colspan 是`4`。第`colspan`1 行是...鼓声请`12`...。

```
<table>
    <tr>
        <td colspan="12"></td>
    </tr>
    <tr>
        <td colspan="4"></td>
        <td colspan="4"></td>
        <td colspan="4"></td>
    </tr>
    <tr>
        <td colspan="3"></td>
        <td colspan="3"></td>
        <td colspan="3"></td>
        <td colspan="3"></td>
    </tr>
</table> 
```

生产

```
-------------
|           |
-------------
|   |   |   |
-------------
|  |  |  |  |
------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:32:22.560

我能想到几个选择：

1）。使用嵌套的 div 而不是表格。行可以是具有相同宽度的 div，而单元格可以是具有以百分比指定的相对宽度的 div。（50%、25%、33%）

```
    <div class="row"><div class="cell100"></div></div>
    <div class="row"><div class="cell50"></div><div class="cell50"></div></div>
    ...

```

2）。如果您觉得出于某种原因需要使用表格，您可以指定表格的列数与每行所有单元格计数的最小公倍数匹配。例如，您的将是 1、2、3 和 4。最小公倍数是 12。一个单元格的行将有一个 colspan 为 12 的单元格。一个有 2 个单元格的行将有一个 colspan 为 6 的单元格。3 个单元格将每个单元格的 colspan 为 4。4 个单元格的 colspan 为 3。

```
    <表格>
    <tr><td colspan="12">...</td></tr>
    <tr><td colspan="6">...</td><td colspan="6">...</td></tr>
    ...
    <tr><td colspan="3">...</td><td colspan="3">...</td><td colspan="3">...</td></ tr>
    </table>

```

3）。或者，您可以使用与[bootstrap](http://twitter.github.com/bootstrap/)或[960 网格系统](http://960.gs/)或任何其他网格系统一起提供的网格系统。

我推荐 1 或 3，因为它们是可重复使用的，但是选项 2 也可以。

# android - 在 x86 上使用 Eclipse 调试（理解）Dalvik VM

> ID：12789585
> 
> 赞同：1
> 
> 时间：2012-10-08T21:15:05.250
> 
> 标签：android, dalvik

我想了解 Dalvik VM 是如何使用像 Eclipse 这样的交互式调试器工作的。

例如，我想看看 Dalvik 如何加载一个应用程序（dex 文件），如何解释字节码，最后它如何触发 JIT 并在本地运行已编译的代码。

如果我能用调试器看到这样的步骤，那就太好了。

为此，我只需要在 x86 Linux 机器上编译和运行 Dalvik VM。在没有任何 Android 平台的情况下，技术上可行吗？

如果不可能，是否有任何测试环境让 Dalvik 在某种程度上只能看到解释器或 JIT？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:31:40.047

可以为宿主环境编译 dalvik。实际上，当您构建最新版本的 android 时，您很可能已经拥有 dalvik 的主机构建，它在预 odexing 系统映像时使用。查找 dalvikvm 可执行文件，例如 out/host/linux-x86/bin。

在您尝试在主机上运行 dalvikvm 之前，您需要构建完整的框架，并将 BOOTCLASSAPTH 环境变量设置为所有各种 bootclasspath 框架 jar 的冒号分隔路径。

或者，您也可以使用 gdbserver 在设备本身上调试 dalvikvm。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T17:02:04.660

如果您想在 Android 设备上的 IDE 中调试本机应用程序，这并不是那么简单。

请查看[调试 Android 本机应用程序](http://apienthusiast.blogspot.com/2014/07/debugging-android-native-applications.html)以获取分步教程。

# twitter-bootstrap - Twitter Bootstrap 多个下拉菜单不起作用

> ID：12789593
> 
> 赞同：2
> 
> 时间：2012-10-08T21:15:48.033
> 
> 标签：twitter-bootstrap

我在使用 Twitter Bootstrap 下拉菜单时遇到问题。第一个下拉菜单有效，但其他所有下拉菜单无效。我发现这篇文章：[Bootstrap 2.1.1 下拉菜单无法正常工作](https://stackoverflow.com/questions/12671127/bootstrap-2-1-1-dropdowns-not-working-properly)，但这是直接从 twitter bootstrap 站点复制的代码，在我升级到 2.0 之前它可以工作。

这是一个 JSFiddle 链接[http://jsfiddle.net/unWCN/](http://jsfiddle.net/unWCN/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:50:52.017

问题在于您的`data-target`属性。它们应该指向特定的下拉父级，或者`#`如果您使用默认标记。

如果您设置`data-target="#"`下拉切换器，您的代码可以正常工作：[jsfiddle](http://jsfiddle.net/Sherbrow/unWCN/4/)

注意：如果该`data-target`属性不存在，`href`将使用 。检查[插件文档](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T22:01:23.367

这似乎是 Bootstrap 2.1.0 中与 data-target 属性相关的一个[已知错误](https://github.com/twitter/bootstrap/pull/4811)，并且可能会在下一个版本中修复。

同时，您可以应用用户提交的修复程序之一。这将涉及修改`clearMenus`js/bootstrap-dropdown.js 中的函数。

[由 SoapSeller 修复：](https://github.com/twitter/bootstrap/commit/9f739736)

```
function clearMenus() { 
    $(toggle).parent().removeClass('open')  
} 
```

[由 erlendfh 修复：](https://github.com/erlendfh/bootstrap/commit/e9a648cd39dc6b5e0f126b7272adeac816ece758)

```
function clearMenus() {
    $(toggle).each(function () {
        getParent($(this)).removeClass("open")
    })
} 
```

我没有亲自测试过这些，但 SoapSeller在 jsFiddles[之前](http://jsfiddle.net/6fAm3/2/)和[之后](http://jsfiddle.net/fY849/2/)链接，说明了他的解决方案。

# backup - 意外令牌：语句中的 BACKUP

> ID：12789603
> 
> 赞同：1
> 
> 时间：2012-10-08T21:16:34.920
> 
> 标签：backup, hsqldb, database-backups

尝试在 HSQLDB 数据库中进行在线备份时遇到问题：

我正在使用这个 rc 文件：

```
urlid pentaho
url jdbc:hsqldb:hsql://localhost:9001/hibernate
username PENTAHO_USER
password whatever 
```

这个命令行：

```
java -jar ..\data\lib\hsqldb-1.8.0.jar --rcFile conn.rc pentaho 
```

连接后，我尝试按照手册执行备份命令：

```
BACKUP DATABASE TO './' BLOCKING; 
```

但我得到的只是这个错误消息：

```
SQL Error at 'stdin' line 1:
"BACKUP DATABASE TO './' BLOCKING"
Unexpected token: BACKUP in statement [BACKUP] 
```

问题是：有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:38:35.730

旧版本的 HSQLDB 不支持 BACKUP 命令。使用版本 2.2.9 而不是 1.8.0。

# python - 连接时出现 cx_Oracle 错误 ORA-24315 ... 有时

> ID：12789604
> 
> 赞同：0
> 
> 时间：2012-10-08T21:16:39.740
> 
> 标签：python, oracle, cx-oracle

我编写了一个脚本并在桌面“A”上运行它，目标是 Oracle 数据库（10g）和桌面“B”上的应用服务器。它运行没有任何问题。

然后我将脚本复制到桌面“B”并在以下代码段中吐出以下内容：“ORA-24315：非法属性类型”：

```
cx_dsn = cx_Oracle.makedsn(cx_hostname, cx_port, cx_SID)
cx_connection = cx_Oracle.Connection(cx_username + '/' + cx_password + '@'+ cx_dsn ) 
```

两台机器的配置如下：

*   Windows 7（64 位）
*   32 位版本的 Python (ActiveState)
*   pypm install cx-oracle（导致版本 cx_Oracle.clientversion() = (11, 2, 0, 3, 0) - 是的，这确实表明 v11，但它适用于桌面“A”的 10g 版本）

但是桌面“B”安装了 Oracle 10g 和 WebSphere 7 - 桌面“A”没有

我已经搜索过，很多人都遇到过这个问题或类似的问题，但总的来说，唯一建议的解决方案是：

1.  确保路径在 Python 库之前不引用 Oracle 库 - 我想这里的建议是桌面 B 上的 Oracle 安装正在干扰。所以我配置了路径，使它只引用 Python（没有提到 Oracle 等）——这没有帮助
2.  确保您使用的是 32 位版本的所有内容或 64 位版本的所有内容 - 我做过，就 Python 而言，全面使用 32 位版本
3.  确保 cx-Oracle 与您所针对的数据库匹配...好吧，看起来我有问题但是...奇怪的是脚本确实可以在桌面“A”上运行，所以我想它一定是环境上的桌面'B'。所以我开始安装专用的 10g 版本的 cx_Oracle。也没有成功。（此查询[https://stackoverflow.com/questions/10456598/cx-oracle-multiple-instances-of-oracle-10-and-11-plus-oracle-home](https://stackoverflow.com/questions/10456598/cx-oracle-multiple-instances-of-oracle-10-and-11-plus-oracle-home)没有得到回答，但听起来很相似）

所以我被困住了 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T12:54:53.613

在安装另一个不同版本的 Oracle 客户端后，我们遇到了 ORA-24315 错误。在 PATH 环境变量中，我们只是更改了 Oracle 路径条目的顺序。可能 cx_Oracle 只考虑 Oracle 在 PATH 变量中的第一次出现。

我们的配置：Win 7、Oracle 11.2.0.3、cx_Oracle-5.1.1-11g.win32-py2.6

更改：另外安装了 Oracle 10.2.0

产生的错误消息：cx_Oracle.DatabaseError: ORA-24315: 非法属性类型

我们如何让它再次工作：将 PATH 顺序从 path_to_Oracle10;path_to_Oracle11;... 更改为 path_to_Oracle11;path_to_Oracle10;...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-28T07:18:43.053

无论我如何尝试连接，我都会收到错误*ORA-24315 。*

解决方案：

我最初下载/安装的是 Ora11g 版本，但数据库是 10g。我安装了10g版本的cx_Oracle，第一次连接就成功了。

# c - 如何将文件读入 C 中的行数组？

> ID：12789606
> 
> 赞同：-1
> 
> 时间：2012-10-08T21:16:51.143
> 
> 标签：c, arrays

> **可能重复：**
> [将文本文件读入 c 中的数组](https://stackoverflow.com/questions/410943/reading-a-text-file-into-an-array-in-c)

我正在努力将文本文件逐行读取到数组的行中。我不允许使用 malloc 或相关命令。我找到的最新代码是这样的，它不起作用：

```
void readfile(const char *filename) {
FILE *f;
f = fopen(filename, "r");
int linecount;
char inputError;
char a[500];
char array[50];
//struct cal_event one[200];

linecount = 0;
while(inputError != EOF) {
    inputError = fscanf(f, "%s\n", array);
    linecount++;
}
fclose(f);
char names[linecount][500];

f = fopen(filename, "r");
int i;
for(i = 1; i < linecount; i++)
    fscanf(f, "%s", names[i]);
    printf("%s ", names[i]);
fclose(f);
} 
```

我需要一个代码示例！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:31:00.730

```
while(inputError != EOF) {
    inputError = fscanf(f, "%s\n", array);
    linecount++;
} 
```

`fscanf`对于每个循环迭代，您的“目标”指针都是相同的。这意味着每次迭代都会将数据写入相同的位置，覆盖之前的内容。您需要跟踪缓冲区内容的*结尾*，并使用指向缓冲区结尾的指针作为“目标”指针。

跟踪缓冲区内容的结尾意味着您可以做另一件非常重要的事情：确保您的数组不会溢出。由于您的数组被硬编码为 50 个字符，因此您必须确保读取的字符（总数）不超过 50 个。否则，您将破坏内存，并可能发生各种不好的事情。

根据您的标题，您似乎想将文件读入一个数组，以便每个数组元素都是一个字符串（代表一行文本）。由于字符串本身就是一个数组，因此您希望您的`array`对象是一个*数组数组*。您也可以将其称为二维数组。例如：

```
char array[50][100]; 
```

这将创建一个能够容纳 50 行文本的数组，其中每行最多可以包含 100 个字符。然后，您会将第一行读入`array[0]`，将下一行读入`array[1]`，等等。

# grails - 域类层次结构中的 namedQuery 的 Grails 2.0 单元测试问题

> ID：12789609
> 
> 赞同：0
> 
> 时间：2012-10-08T21:17:00.897
> 
> 标签：grails

Grails 2.0 - 在对使用命名查询的控制器进行单元测试时，出现“在 BaseDomain 上找不到属性（子域 1 属性）”错误。应用程序运行良好并返回正确的结果，但单元测试失败。

```
class BaseDomain {
    static namedQueries = {
        listDuplicates {instance ->
           if(instance instanceof SubDomain1) {
            eq('subdomain1property', instance.subdomain1property)
           }
        }
    }
}

class SubDomain1 extends BaseDomain {
  String subdomain1property
} 
```

控制器的单元测试有

```
@Mock([BaseDomain, SubDomain1]) 
```

控制器有这条线

```
BaseDomain.listDuplicates(instance) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:45:40.927

将特定测试用例从单元移动到集成测试并解决了问题。如果我在单元测试中找到模拟多态性的方法，我将更新答案。

# c# - C#中的P/Invoke，如何找出CallingConvention？

> ID：12789612
> 
> 赞同：0
> 
> 时间：2012-10-08T21:17:29.060
> 
> 标签：c#, winapi, pinvoke

我将我的项目从 VS2005（针对 .net 2）更新到 VS2010（针对 .net4）。似乎默认情况下启用了[pInvokeStackImbalance MDA](https://stackoverflow.com/a/6768223/166286)，然后我得到了一堆`"unbalanced the stack"`异常。以这个为例：

```
[DllImportAttribute("gdi32.dll")]
private static extern IntPtr CreateSolidBrush(BrushStyles enBrushStyle, int crColor); 
```

它在 .net 2 中工作，但现在它抛出异常。我把它改成了这个，它可以工作：

```
[DllImportAttribute("gdi32.dll", CallingConvention = CallingConvention.ThisCall)]
private static extern IntPtr CreateSolidBrush(BrushStyles enBrushStyle, int crColor); 
```

令我惊讶的是，[pinvoke.net](http://www.pinvoke.net/default.aspx/gdi32/CreateSolidBrush.html)将其列为

```
[DllImport("gdi32.dll")]
static extern IntPtr CreateSolidBrush(uint crColor); 
```

为什么我的老人不工作？似乎 pinvoke.net 是错误的，但我如何找出哪个调用转换是给定一个 win32 函数？

**编辑**
我的项目正在使用[C# Rubber Rectangle](http://www.codeproject.com/Articles/27389/C-Rubber-Rectangle)中的代码进行 XOR 绘图。显然，代码需要修复才能在 .Net 4 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:19:57.983

[`CreateSolidBrush`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183518.aspx)使用`stdcall`. 几乎所有 Win32 API 都这样做。他们从不使用`thiscall`. 该函数声明为：

```
HBRUSH CreateSolidBrush(
  __in  COLORREF crColor
); 
```

所以你的错误只是你的版本有太多参数。您找到的 pinvoke.net 声明是正确的。

该`stdcall`约定将参数从右向左推，这解释了即使使用额外的虚假参数，您的代码也是如何工作的。

# c# - 使用 javascript 停止按钮 OnClick 事件

> ID：12789623
> 
> 赞同：3
> 
> 时间：2012-10-08T21:17:59.193
> 
> 标签：c#, javascript, jquery, asp.net

我试图在我的按钮的单击事件发生在服务器端之前运行一些 javascript，但是 javascript 代码运行，并且服务器端代码在此之后运行，无论如何。这是我所拥有的：

```
<script type="text/javascript" language="javascript">
  $(document).ready(function() {
    SubmitClick = function() {
        if ($("#<%= fuFile.ClientID %>").val() == "") {
            $("#error").html("File is required");

            return false;
        }
    }
  });
</script>

<asp:FileUpload ID="fuFile" runat="server" />

<asp:Button ID="btnSubmit" runat="server" Text="Submit"
  OnClientClick="SubmitClick()" UseSubmitBehavior="false"
  OnClick="btnSubmit_Click" />

<span id="error"></span> 
```

我认为在 javascript 函数中设置`UseSubmitBehavior="false"`和返回`false`会起作用，但事实并非如此。在服务器端代码运行之前，我的错误消息会显示一秒钟。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T21:22:19.583

通常要取消客户点击，你会添加这个`return false;`

您可以更新您的代码来执行此操作，它应该可以工作：`OnClientClick="return SubmitClick();"`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T21:29:28.427

如果您使用的是 JQuery：

```
$btn.on("click", function (e) {
    e.preventDefault();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T21:34:30.493

对我有用的是：删除`OnClientClick="SubmitClick()"`并设置`UseSubmitBehavior`回true。

然后将您的`$(document).ready()`方法更改为

```
$(document).ready(function () {
    $('#btnSubmit').click(function () {
        if ($("#<%= fuFile.ClientID %>").val() == "") {
            $("#error").html("File is required");

            return false;
        }

        return true;
    });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T21:22:42.240

您需要在 OnClientClick 事件中使用 return 来返回取消提交的行为。

试试这个

```
OnClientClick="return SubmitClick()" 
```

# haskell - Haskell List.insert 应用于太少的参数

> ID：12789625
> 
> 赞同：0
> 
> 时间：2012-10-08T21:18:05.140
> 
> 标签：haskell

所以，我正在研究一个函数，它已经按照从小到大的顺序获取两个列表，并以它们都被排序的方式合并它们。我的想法是将第二个列表分成头部和尾部，使用插入将头部排序到第一个列表中，然后再次运行该函数。但是在运行时我得到：

```
Couldn't match expected type `[t0]' with actual type `[a0] -> [a0]'
    In the return type of a call of `List.insert'
    Probable cause: `List.insert' is applied to too few arguments 
```

我对如何解决这个问题有点困惑，这里是代码：

```
combsort((x:xs):(y:ys)) = combsort(List.insert(y (x:xs)) : ys)
combsort((x:xs):[]) = [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:26:13.823

你有太多的一组括号，

```
combsort((x:xs):(y:ys)) = combsort(List.insert(y (x:xs)) : ys) 
```

应该

```
combsort ((x:xs):(y:ys)) = combsort (List.insert y (x:xs) : ys) 
```

请注意，函数应用程序不需要括号。

在您的原始文件中，`List.insert(y (x:xs))`被解析为`List.insert`应用于应用于`y`list的结果`(x:xs)`，例如

```
List.insert foo
  where
    foo = y (x:xs) 
```

# bash - 使用 shell 脚本远程运行本地脚本 here 文档

> ID：12789627
> 
> 赞同：3
> 
> 时间：2012-10-08T21:18:21.363
> 
> 标签：bash, shell, unix, ssh

我需要远程运行脚本。我正在使用以下 shell 脚本

```
 for server in $servers
     do
     LOCAL_VAR=<some_value>
     ssh $server <<EOF
      command1 $LOCAL_VAR
      command2..
      ..
      exit
      EOF
    done 
```

bash 显示意外的文件结尾语法错误。如果我删除此块，其余代码工作正常。你能告诉我远程执行脚本的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:32:45.507

如果你想在你的 中添加这样的缩进`here-doc`，你应该添加`-`如下代码：

```
for server in $servers
do
    LOCAL_VAR=<some_value>
    ssh $server <<-EOF
    command1 $LOCAL_VAR
    command2..
    ..
    exit
    EOF
done 
```

复制粘贴时要小心，有时您可能会对制表符或空格感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:47:47.447

解决方案是在脚本的第 1 列中添加文字标签。tl;dr 文字标签 (EOF) 没有缩进

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:29:29.017

关闭heredoc 的EOF 不能有任何前导空格。在找到脚本结尾之前，Bash 认为它没有到达字符串的结尾。

[http://tldp.org/LDP/abs/html/here-docs.html](http://tldp.org/LDP/abs/html/here-docs.html)

> 结束限制字符串，在 here 文档的最后一行，必须从第一个字符位置开始。不能有前导空格。限制字符串后的尾随空格同样会导致意外行为。空格可防止限制字符串被识别。

# iphone - 子类崩溃 - iOS

> ID：12789628
> 
> 赞同：0
> 
> 时间：2012-10-08T21:18:27.173
> 
> 标签：iphone, objective-c, ios, xcode

当我尝试创建某个子类的新文件时出现此错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SDNestedTableViewController", referenced from:
      _OBJC_CLASS_$_MenuViewController in MenuViewController.o
"_OBJC_METACLASS_$_SDNestedTableViewController", referenced from:
      _OBJC_METACLASS_$_MenuViewController in MenuViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我制作了一个名为`MenuViewController`子类的文件`SDNestedTableViewController`

[这是](https://github.com/serverdensity/ios-SDNestedTable)子类文件的链接。

有任何想法吗？

PS 总的来说，我正在尝试将[SDNestedTable 添加到子视图](https://stackoverflow.com/questions/12788043/add-sdnestedtable-to-a-subview)中，如果您能提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:19:52.390

你确定你的

项目设置 > 构建阶段 > 编译源

你所有的 .m 文件都在里面吗？（MenuViewController && SDNestedTableView 控制器）？

# java - 使用矩阵操作多个模型？

> ID：12789629
> 
> 赞同：-1
> 
> 时间：2012-10-08T21:18:29.683
> 
> 标签：java, opengl, lwjgl

我该怎么做呢？到目前为止，我只能旋转一个模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:03:11.063

> Quote: 哦，等等，我想我现在明白了。我绑定 vbo，应用矩阵，取消绑定，绑定第二个 vbo，然后应用新模型矩阵？

您的矩阵唯一有效果的时候是您调用`glDrawArrays/glDrawElements`或调用它们的类似导数之一。

绘制多个对象的方法，每个对象都有自己的矩阵，类似于以下伪代码：

```
foreach (Object obj in List<Object>) {
    setupVertexAttributes(obj.attributes);   //setup the attributes (VBOs)
    uploadMatrix(obj.matrix);                //set the matrix
    glDrawElements(obj.indices);             //draw the object

} 
```

# javascript - 使用 javascript 函数在 asp.net 中打印的打印问题

> ID：12789630
> 
> 赞同：0
> 
> 时间：2012-10-08T21:18:49.910
> 
> 标签：javascript, asp.net

所以我有一个 div，里面有很多行，然后单击按钮，我尝试打印所有行，但由于某种原因，我只得到了大约 1/3 的行。这是它正在使用的代码。

```
 function buildPrint()
    {
        var sourceDiv = document.getElementById("display_div");
        document.getElementById("print_div").innerHTML = sourceDiv.innerHTML;
        window.print();
    }

<asp:Content ID="Content3" ContentPlaceHolderID="BodyPlaceHolder" runat="server">
<div id="display_div">
<asp:CheckBox ID="showAllOptionals" runat="server" Text="Show All Optionals" AutoPostBack="true" />
<asp:Literal ID="mainTable" runat="server" />
</div>
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="PrintContent" runat="server">
<div id="print_div" style="page-break-after:always;">
</div> 
```

后端代码：

```
<input onclick=\"buildPrint();\" id=\"printBtn\" type=\"button\" value=\"Print\"> 
```

有谁知道为什么我不能让它打印整个完整的 div ？？？我还应该提到它在 Chrome 中运行良好，但 IE 是我遇到问题的地方。

# javascript - Jquerymobile 选择菜单不适用于超过 73 条记录

> ID：12789637
> 
> 赞同：1
> 
> 时间：2012-10-08T21:19:18.073
> 
> 标签：javascript, jquery, select, jquery-mobile, menu

我有一个选择菜单，通过 Ajax 调用填充一个 php 脚本，该脚本从 XML 形式的表中返回产品列表。

产品表有大约 400 条记录，出于某种原因，选择菜单没有显示任何内容，而选择语句则返回全部。使用 Firebug 进行故障排除，我可以看到 php 代码成功地将所有 400 条记录正确返回到浏览器，但它没有显示。

当我将选择语句更改为“SELECT ProductID,ProductName FROM product WHERE ProductID < 74”时，它可以工作，显示前 73 个项目。认为这可能是由于第 74 项有问题，我将 where 子句更改为“> 74”，但这也没有返回任何内容。但是，“> 74 和 < 120”的 where 子句有效。

可能是什么原因？请在下面找到代码片段。

代码的javascript如下：

```
function populateProducts(xmlindata) {

var mySelect = $('#ili_product');
 $(xmlindata).find("Product").each(function()
  {
    optionValue=$(this).find("id").text();
    optionText = $(this).find("name").text();
    mySelect.append($('<option></option>').val(optionValue).html(optionText));    
  });
} 
```

php代码是：

```
<?php

include("dbconfig.inc.php");

header("Content-type: text/xml");
echo "<?xml version=\"1.0\" ?>\n";
echo "<products>\n";
$select = "SELECT ProductID,ProductName FROM product";
try {
    foreach($dbh->query($select) as $row) {
        echo "<Product>\n\t<id>".$row['ProductID']."</id>\n\t<name>".$row['ProductName']."</name>\n</Product>\n";
    }
}
catch(PDOException $e) {
    echo $e->getMessage();
    die();
}

echo "</products>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:40:11.483

在基于 xml/json 数据生成/形成 html 时转义引号和其他字符是一个好习惯

在你的情况下，

`optionValue=$(this).find("id").text().replace('\'','&quot;');`

或者`replace("'", "&rsquo;");`

这样你就可以转义引号，如果它们是导致问题的原因。不确定问题是否是由于琴弦断裂造成的。

你可以像这样转义多个字符。

`.replace(/&/g, "&amp;").replace(/'/g, "&quot;")`;

注意`//`正则表达式和`g`标志，这将全局查找字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:26:39.773

这也可能是因为您返回的数据中的一些非法字符没有正确转义..

检查console.log($(xmlindata)) 是否返回所有数据.. 特别是检查在可能破坏字符串的值中可能包含**"**或**'等字符的值**

# android - Android 将活动保持在后台

> ID：12789648
> 
> 赞同：2
> 
> 时间：2012-10-08T21:20:51.960
> 
> 标签：android, android-activity

我有一个多活动应用程序 - MainActivity、CpuActivity 等。我的 CpuActivity 具有具有`savedInstanceState`. 每当我按回或向上导航到 MainActivity 时，CpuActivity 都会被杀死并且`savedInstanceState`丢失。是否可以将保存的数据/活动保留在后台，或者我是否需要使用某种临时存储（例如 SharedPreferences）？

数据应该只存储到整个应用程序被杀死，那么有没有比 SharedPreferences 更好的系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:33:58.417

一个简单的解决方案是将数据存储在您的应用程序实例中。为此，您必须在清单中指定一个应用程序实现（应用程序标记中的 android:name 属性）。您可以使用[getApplication() 方法](http://developer.android.com/reference/android/app/Activity.html#getApplication%28%29)获取应用程序。

# ios - Cocoa-Touch - 使只读 UITextField 成为第一响应者

> ID：12789652
> 
> 赞同：3
> 
> 时间：2012-10-08T21:21:34.760
> 
> 标签：ios, cocoa-touch, uitextfield, becomefirstresponder

我有一个`UITextField`我已经将它设置为的`inputView`，`UIPickerView`因此用户可以在其中的几个值之间进行选择。但是，我无法使文本字段成为第一响应者。

如果我设置我的文本字段`userInteractionEnabled = NO`，那么它不会成为第一响应者，但如果我将它设置为`YES`它将成为第一响应者，但我会在那里有一个我不想要的闪烁光标。那么如何让一个只读的`UITextField`成为第一响应者呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:02:17.607

从您的问题看来，您不需要`UITextField`. 因此，实现此目的的另一种方法是在顶部添加一个，这将带来选择器`UILabel`。`UIButton`在选择器中选择任何值时，`UILabel`可以修改文本。

# dart - Dart - 尝试扩展类时“没有这种类型”

> ID：12789661
> 
> 赞同：1
> 
> 时间：2012-10-08T21:22:38.200
> 
> 标签：dart

我正在尝试制作一个简单的程序来玩 Dart。尝试使用 Circle 扩展 Vec2 时，我收到一条错误消息，指出“没有此类类型”存在 Vec2

我有这样的结构：

内部 geom/geom.dart

```
#library("geom");

#import("dart:math", prefix:'Math');

#source("Vec2.dart");
#source("Circle.dart"); 
```

**有两个简单的类**

内部 geom/Vec2.dart

```
class Vec2 {
    num x;
    num y;
} 
```

内部 geom/Circle.dart

```
class Circle extends Vec2 {
    num radius;
    Circle(this.radius) : super();
} 
```

在 Dart 中进行子类化的正确方法是什么？类必须都存在于同一个文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:21:06.787

您的代码有效，我刚刚使用编辑器版本 0.1.0.201210010959、构建 13075 和编辑器版本版本 0.1.0.201210082015、构建 13393 进行了测试。如果您希望这样做，您可以为每个文件创建一个类。（注意，Dart 不需要每个文件一个类。）

您是否仔细检查了您的路径？请粘贴您的版本号，也许是屏幕截图。更好的是，提供指向您的目录的链接。

# batch-file - 无法运行 BAT 文件来生成自定义日期？

> ID：12789665
> 
> 赞同：0
> 
> 时间：2012-10-08T21:22:53.573
> 
> 标签：batch-file, dos, windows-shell

我在 DOS shell 中运行以下代码以生成一个 SCR 文件，然后我将使用该文件连接到 FTP 服务器并下载文件。

```
echo open myftp.mywebsite.com >> myscript.SCR
echo myusername >> myscript.SCR
echo mypassword >> myscript.SCR
echo lcd "C:\myfolder" >> myscript.SCR
echo cd outgoing >> myscript.SCR 
```

上面运行良好，但 BAT 文件被下面的代码挂断了

```
for /F "tokens=2-4 delims=/ " %i in ('date /t') do echo get mydownloadfile_%k%i%j.TXT >> myscript.SCR 
```

有人知道解决方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:43:00.467

虽然很丑，但您可以使用日期/时间切片，例如：

```
echo %date:~10,4%-%date:~4,2%-%date:~7,2%_%time:~0,2%-%time:~3,2%-%time:~6,2% >> mydate.scr 
```

此特定字符串取决于区域设置，并且仅适用于美国区域设置。对于其他语言环境，您需要调整索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:09:23.193

根据上面**ccpizza**的回答，我也经常使用内置的字符串操作功能，并且适用于美国日期格式。

但是，如果您需要确保*非美国日期*（不同顺序的日期部分）可以正常工作，那么这是您的一个选择。

```
for %%A IN (%Date%) do ( for /F "tokens=1-3 delims=/-" %%B in ("%%~A") do ( set MyDate=%%D%%B%%C ) )
echo get mydownloadfile_%MyDate%.txt >> myscript.SCR 
```

重新排列文件名中的日期部分以适合您的文件名格式。

*   %%D = 年
*   %%B = 月
*   %%C = 天

# shell - Bourne Shell 编程：在列表中查找最小/最大数

> ID：12789666
> 
> 赞同：0
> 
> 时间：2012-10-08T21:22:54.213
> 
> 标签：shell, search

我正在尝试编写一个 shell 程序，给定一个未排序的数字列表（每行一个，任何符号，任何大小），返回给定一个参数的最大数字或返回给定另一个参数的最小数字。也就是说，如果我输入“myProgram 1 list”，它会输出最大的数字，但如果我输入“myProgram 0 list”，它会输出最小的数字。

我想我知道如何确定要输出的数字（使用第一个参数切换大小写？）但我不知道如何在列表中找到最大/最小的数字。有没有一些简单的方法可以找到这个号码？谁能给我一些提示？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:54:00.283

我们不想破坏所有的乐趣，是吗？你没有要求解决方案，你只是要求提示。所以我们开始：

1.  放`min=""`
2.  逐行读取文件
    1.  将获得的值`x`与`min`（如果`min`为空怎么办？）
    2.  如果它更小，请设置`min=x`
3.  打印`min`

您所要做的就是将其翻译为 sh，对于`max`.

可能有更简单的方法，但这是我能想到的最简单的纯 sh 算法。

# entity-framework - 对我的实体框架查询使用过多的 foreach 循环？

> ID：12789669
> 
> 赞同：1
> 
> 时间：2012-10-08T21:23:17.010
> 
> 标签：entity-framework, c#-4.0

我正在尝试学习实体框架。我很高兴我从查询中返回的结果为我提供了我需要的数据，但我发现我正在使用分配的 for-each 循环和单独的数据库请求来获取我需要的信息。

如果有人可以查看我的代码并建议是否有一种方法可以使事情更简洁，并且如果我没有真正获得实体框架提供的功能，我将不胜感激（我想我在某处错过了这一点！ ！）。这里的任何方式都是问题和代码（我希望这是有道理的）：

尝试从我的数据库中的 4 个表中查询。一个是不相关的（由于我的懒惰 - 我需要修改它，但目前它不是一个交易破坏者）。其他 3 个与 1 对多关系相关。这是一个摘要：

UserClients - 不相关的表（应该链接到 LeadClient 但不重要）

[LeadClient PK = GroupCode] 一对多对 [Matters FK = LeadCode] [Matters PK = MatterNumber] 一对多对 [Invoices FK = Matter]

我正在尝试创建一个 DTO 对象列表来填充 GridView。我的 DTO 如下：

```
public class dto
{
    public string clientCode { get; set; }
    public string clientName { get; set; }
    public decimal totalDebt { get; set; }

} 
```

我将 statementName 变量传递给一个方法，然后我查询 UserClients 以获取客户端代码列表。

这是我填充 List 对象的方法：

```
 public static List<dto> StateNameLeadCodes(string stateName)
    {
        //DTO objects
        List<dto> items = new List<dto>();

        //Leadcode list for statement name
        List<string> leadcodes = (from o in repository.UserClients where o.StatementName == stateName select o.LeadCode).ToList();

        //From leadcodes populate items list
       foreach(string s in leadcodes)
       {
           //Get clientCode and matter list for the client code
           var code = (from o in repository.LeadClients where o.GroupCode == s select new { o.ClientName, o.Matters}).First();

           dto temp = new dto();

           temp.clientCode = s;

           temp.clientName = code.ClientName;

           //Get a list if invoices for each matter 
           foreach (Matter m in code.Matters)
           {
               List<Invoice> invoices = (from o in repository.Invoices where o.Matter == m.Matternumber select o).ToList();
               //Calculate total debt for all invoices
               foreach (Invoice inv in invoices)
               {
                   temp.totalDebt += (inv.debt_Fee + inv.debt_Costs + inv.debt_VAT);
               }

           }

                items.Add(temp);
            }

        return items;
         } 
```

当我想将单个项目和列表的组合返回到 DTO 时，我发现自己在做类似的事情。我看到我的 Entity 类有一个 EntityCollection 用于一对多关系。我试图选择实体对象作为我的选择语句的一部分，但我收到 EnitityCollection 无法转换为 List<> 的错误。

如何清理此代码的任何提示和指示都会很棒 - 在此先感谢！

根据要求添加了实体对象的图像：

![实体图像](../Images/75f84390f80cd47ea7529d9eaf880cd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:38:43.860

我不确定我是否正确阅读并理解了所有内容（对我来说*真的*很难阅读:)），但您可以尝试以下解决方案：

```
public static List<dto> StateNameLeadCodes(string stateName)
{
    return (from uc in repository.UserClients
            join lc in repository.LeadClients
                on uc.LeadCode equals lc.GroupCode
            where uc.StatementName == stateName
            select new dto
            {
                clientCode = uc.LeadCode,
                clientName = lc.ClientName,
                totalDebt = lc.Matters
                    .Sum(m => m.Invoices
                        .Sum(i => i.debt_Fee + i.debt_Costs + i.debt_VAT))
            }).ToList();
} 
```

如果 LeadClient 的 Matter 集合或 Matter 的 Invoices 集合为空，则可能会出现问题，因为 EF 无法将空集合的总和具体化为一个`decimal`值。可能有必要使用类似的东西

```
totalDebt = lc.Matters
    .Sum(m => m.Invoices
        .Sum(i => (decimal?)(i.debt_Fee + i.debt_Costs + i.debt_VAT)) ?? 0m) 
```

# button - 带有预定义文本的 Google+1 按钮。

> ID：12789671
> 
> 赞同：0
> 
> 时间：2012-10-08T21:23:27.577
> 
> 标签：button, share, google-plus

是否有可能拥有一个与预定义文本共享特定链接的 Google+1 按钮（如果愿意，用户可以对其进行编辑）？

（我已经看到带有预定义文本的 Twitter-Tweet-Buttons 类似。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T15:58:14.407

[+1 按钮](https://developers.google.com/+/web/+1button/)既可以 +1 也可以共享特定链接。该共享的预览将显示页面的标题和图像（不再显示描述）。Google+ 使用的所有数据都来自它在抓取页面时在页面上找到的“[片段”。](https://developers.google.com/+/web/snippet/)用户不能编辑文本，但如果有多个缩略图可用，则用户可以从可用缩略图中进行选择。

# ruby-on-rails - 从字符串中删除单词时，正则表达式会比遍历单词列表更快吗？

> ID：12789679
> 
> 赞同：2
> 
> 时间：2012-10-08T21:24:10.583
> 
> 标签：ruby-on-rails, ruby, regex, string

现在，我正在使用这种技术从搜索中删除不需要的单词：

```
IGNORED_WORDS.each { |e| params[:query].gsub!(e,'') } 
```

我的同事告诉我，正则表达式替换会更快。这是真的吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T22:10:40.150

如果您正在使用正则表达式，您将使用 将所有被忽略的单词组合成一个正则表达式`Regexp.union`，并且有两个原因可以想到为什么使用它可能会更快。

1) Ruby 中不需要迭代。正则表达式匹配必须查看有问题的单个正则表达式中的备选方案，但这是由用 C 实现的 Oniguruma 正则表达式引擎完成的。这比使用您的解决方案在 Ruby 中迭代每个被忽略的单词要快。

2）由于您将使用一个将所有单词作为替代词的正则表达式，因此一旦使用某个替代词成功，特定位置的匹配就会停止，并且忽略的单词列表中的其他替代词将不会在该位置匹配.

并且 2) 意味着您可以通过按照出现在文本中的可能性顺序重新排列被忽略的单词来提高速度。

**编辑**对不起，2）可能没有多大意义，因为它比其他方法更快，因为在您的其他方法中，gsub！将从原始字符串中删除匹配的单词，因此位于该位置的子字符串将不会与后面的单词匹配。在这方面，应该没有区别。但是，如果您在不替换的情况下进行匹配，例如计算被忽略的单词等，那么正则表达式方法在这方面也更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T22:17:41.850

正如@sawa 刚才所说，找到您的任何一个`IGNORED_WORDS`（如果数组很大）的更快方法是执行以下操作：

```
# just compile the regexp once, then use it as many times as you want
IGNORED = Regexp.union(*IGNORED_WORDS)

# then inside a method somewhere...
string.gsub!(IGNORED, '') 
```

我不知道 Oniguruma 正则表达式引擎有多聪明，但是一个好的基于 DFA 的引擎会将这样的正则表达式编译到一个状态机中，该状态机进行一次线性传递`string`（从不回溯）。如果它将正则表达式直接编译为本机代码，那就更好了（但 Oniguruma 没有——它在内部使用字节码）。对于这样的任务，基于 DFA 的引擎会很糟糕——没有显式的字符串操作调用会触及它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:40:45.087

看起来天真的正则表达式并不快：

```
require "benchmark"

IGNORED_WORDS = ["foo", "bar"]

def regex
  my_string = "I foo'd her right in the bar last night!"
  IGNORED_WORDS.each { |e| my_string.gsub! Regexp.new(Regexp.escape(e)), '' }
end

def non_regex
  my_string = "I foo'd her right in the bar last night!"
  IGNORED_WORDS.each { |e| my_string.gsub!(e, '') }
end

puts "With regex:    ", Benchmark.measure { (1..100000).each { regex } }
#   1.750000   0.010000   1.760000 (  1.780110)
puts "Without regex: ", Benchmark.measure { (1..100000).each { non_regex } }
#   1.580000   0.000000   1.580000 (  1.592312) 
```

`Regex`在这种情况下，从忽略单词列表中的每个单词创建一个实例会产生额外的开销，而 using`gsub`只需要原始字符串。

但是，如果您知道所有被忽略的单词都有一个可以编写自定义正则表达式的模式，那么您可以避免循环遍历`IGNORED_WORDS`数组 - 这肯定会更快。（`O(1)`而不是，确切地说`O(n)`，`n`是 的数量。）`IGNORED_WORDS`

# java - 这是完成我想要完成的事情的一种非常不优雅的方式。好奇有什么更好的方法

> ID：12789683
> 
> 赞同：1
> 
> 时间：2012-10-08T21:24:17.793
> 
> 标签：java

它的工作原理和一切，但它看起来很可怕。我们只需要一个包含曲棍球运动员数据的文本文件来获取数据。然后我们获取这些数据并从中创建玩家。然后列出这些球员的名单。我们从来没有给每支球队的胜利数量，所以我几乎想知道这*是否是*你能做的最好的。

基本上，它想要完成的是找到获胜最多的团队。这是通过计算每个球员的获胜目标，并根据他们来自哪支球队来判断的，并为该球队计算。

我通过遍历所有玩家并找到唯一的团队名称来创建团队列表作为团队对象来实现这一点。

然后我浏览了球员名单，如果球员的球队与当前球队相同，那么他们就会为获胜进球得分。

然后，在另一个 for 循环中，找到这些目标数量最多的团队。

归还这支球队。

对于一个小任务，总共有四个 for 循环。看起来很恶心。

```
 /**
     * Returns the team with the most wins
     */
    public Team getTeamWithMostWins() {
        Team teamWithMostWins = new Team();
        List<Team> teams = new List<Team>();

        if (!players.isEmpty()) {

            // Compile the List of teams
            for (int i = 0; i < players.size(); i++) {
                if (!teams.contains(players.get(i).getTeam())) {
                    teams.add(new Team(players.get(i).getTeam()));
                }
            }

            // Set the wins for the teams
            for (int i = 0; i < players.size(); i++) {
                String team = players.get(i).getTeam();
                int winningGoals = players.get(i).getWinningGoals();

                // Go through the teams List to set the points
                for (int j = 0; j < teams.size(); j++) {
                    // If the current player's team is equal to the current team in the loop
                    if ((teams.get(j).getName()).equals(team)) {
                        teams.get(j).incrementWinsBy(winningGoals);
                    }
                }
            }

            int mostWins = teams.get(0).getWins();

            // Find the team with the most wins
            for (int i = 1; i < teams.size(); i++) {
                if (teams.get(i).getWins() > mostWins) {
                    teamWithMostWins = teams.get(i);
                }
            }

        }
        else {
            teamWithMostWins = null;
        }

        return teamWithMostWins;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:32:05.863

正如 Jordan Denison 在评论中指出的那样，您可以使用 for-each 循环。请参阅下面的示例。

此外，目前您只会获得胜场数多于第一队的最后一支队伍。为了获得最多胜利的团队，您必须更新最多胜利：

```
int mostWins = teams.get(0).getWins();

// Find the team with the most wins
for(Team team : teams) {
    if (team.getWins() > mostWins) {
        teamWithMostWins = team;
        mostWins = team.getWins(); // <--- Update the most wins every time you find a team with more wins
    }
} 
```

## 更新

此外，请考虑使用其他答案中显示的地图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:38:46.500

您可以使用地图来存储每支球队的胜利次数：

```
import java.util.Map;
import java.util.HashMap;

/**
 * Returns the team with the most wins
 */
public Team getTeamWithMostWins() {
    if (players.isEmpty()) {
        return null;
    }

    Map<Team, Integer> teamWins = new HashMap<String, Integer>();

    // Set the wins for the teams
    for (Player player : players) {
        Integer count = teamWins.get(player.getTeam());
        count = (count == null)? 0 : count;
        teamWins.set(player.getTeam(), count + player.getWinningGoals());
    }

    Team teamWithMostWins = null;
    Integer mostWins = 0;

    for (Map.Entry<Team, Integer> teamWins : map.entrySet()) {
        Team team = entry.getKey();
        Integer wins = entry.getValue();
        if (wins > mostWins) {
            mostWins = wins;
            teamWithMostWins = team;
        }
    }

    return teamWithMostWins;
} 
```

为此，您必须将 hashCode() 和 equals() 方法添加到您的 Team 类。

*   [hashmap 自定义类键 && 对象保存/加载](https://stackoverflow.com/questions/7264373/hashmap-custom-class-key-object-saving-loading)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:40:33.410

您可以通过将其分解为具有有意义名称的较小函数来改进此代码。

除此之外，您使用 Java 的事实有点束缚您的手脚。在对高阶函数有更好支持的语言中，这种代码可以写得非常非常简洁。

因为你要求一个例子......这是你的代码到 Ruby 的粗略端口：

```
teams = players.map(&:team).uniq
best_team = teams.max_by { |t| players.select { |p| p.team == t }.map(&:winning_goals).reduce(0,&:+) } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T21:37:35.573

```
int                  max      = 0;
Team                 mostWins = null;
Map< Team, Integer > counters = new HashMap<>();
for( Player player : players )
{
    Integer counter = counters.get( player.getTeam());
    if( counter == null ) counter = player.getWinningGoals();
    else                  counter = player.getWinningGoals() + counter
    counters.put( player.getTeam(), counter );
    if( counter > max )
    { 
        max      = counter;
        mostWins = player.getTeam();
    }
}
return mostWins; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T22:52:44.467

使用谷歌番石榴：

```
final Multiset<Team> teamWins = HashMultiset.create();
for (Player player : players) {
  teamWins.add(player.getTeam(), player.getWinningGoals());
}

Team teamWithMostWins =
  Collections.max(teamWins, new Comparator<Team>() {
    public int compareTo(Team team1, Team team2) {
        return teamWins.count(team1) - teamWins.count(team2);
    }
  });

int mostWins = teamWins.count(teamWithMostWins); 
```

基本上，番石榴系列让您的计数部分变得更简单。没有编译这个，但它应该给你正确的想法。只需确保 Team 具有正确的 .hashCode 和 .equals 方法（或者您可以假设您不会在不同的对象实例中复制团队数据）；

# iphone - 目标c：未找到初始化方法

> ID：12789686
> 
> 赞同：0
> 
> 时间：2012-10-08T21:24:25.667
> 
> 标签：iphone, objective-c

我在创建自定义类的类型时遇到问题`Frank`。当我这样做时，我收到以下错误：

> 找不到类方法'+initWithWorld::'（返回类型默认为'id'）

我的班级是这样定义的：

```
@interface Frank : NSObject {
    PhysicsSprite *frankSprite;
    b2Body *body;

    float weight;
}

@property (readonly) b2Body *body;

-(void)initWithWorld:(b2World *) world :(CCNode *)parent;

-(void)moveLeft;
-(void)moveRight;

@end 
```

我像这样创建对象：

```
frank = [Frank initWithWorld:world :self]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:27:15.403

需要先**分配**一个对象：

```
frank = [ [ Frank alloc ] initWithWorld: world :self ]; 
```

您的`init`方法是**成员**方法（宽度为`-`符号），这意味着您需要在**分配**的对象上调用它，而不是**类**方法（带有`+`符号）。

**编辑**

正如@JustSid 所指出的，这样的`init`方法还必须返回一个对象（类型`id`）。
所以正确的方法原型是：

```
- ( id )initWithWorld: ( b2World * )world : ( CCNode * )parent; 
```

然后实现应该是这样的：

```
- ( id )initWithWorld: ( b2World * )world : ( CCNode * )parent;
{
    if( ( self = [ self init ] ) )
    {
        /* Your initialisation here */
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:27:18.977

您正在调用`initWithWorld::`作为类方法而不是实例方法。你需要

```
frank = [[Frank alloc] initWithWorld:world :self]; 
```

该方法`+alloc`是一个类方法，它返回一个新分配但未初始化的接收器实例（在本例中为 class `Frank`）。唯一允许您对此类对象执行的操作是初始化它，这是通过调用适当的`-init`方法（在本例中为`-initWithWorld::`）来完成的。

# session - JMeter - 在线程组之间共享会话

> ID：12789692
> 
> 赞同：5
> 
> 时间：2012-10-08T21:25:51.190
> 
> 标签：session, jmeter, threadgroup

我对 JMeter 还很陌生；我一直在寻找一种在并发执行的线程组中的 HTTP 请求之间共享会话 ID 的方法。我检查了其他问题，但它们似乎没有处理会话，并且我已经实现了在线程之间共享 CSV 变量的目标。

我的测试套件结构：

```
Test Plan
- HTTP Cookie Manager
- CSV Data Set (sharing mode: all threads)
- HTTP URL Re-Writing Modifier (session arg name: jsessionid, caches session id)

- Thread Group 1
---Controller
------HTTP Request (uses csv value)

...

- Thread Group N (duplicates of TG 1)
---Controller
------HTTP Request (uses csv value) 
```

这是我的测试计划采用的流程（如 View Results Tree Listener 所示）：

```
HTTP Request (TG 1-1) CSV Value: (1) *caches session id, let's say 123
...
HTTP Request (TG N-1) CSV Value: (1) *caches different session id, let's say 456
HTTP Request (TG 1-2) CSV Value: (2) jsessionid=123
...
HTTP Request (TG N-2) CSV Value: (2) jsessionid=456 
```

我的目标是一次发送多个具有相同会话 ID 的相同请求。如您所见，除了会话 ID 之外，它们是相同的。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:55:18.150

一个相当不幸的手动解决方案：

手动获取会话 ID，将其放入用户定义的变量中，将会话变量附加到我的 HTTP 请求中的 url，而无需使用 HTTP URL 重写修饰符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:35:52.783

看看 jMeter 插件的[InterThreadCommunication](http://code.google.com/p/jmeter-plugins/wiki/InterThreadCommunication)。

使用它，您可以从一个线程将字符串值放入全局参数队列，然后从另一个线程获取该值，即使在不同的线程组中也是如此。

# php - 为什么这个 JQuery/Ajax 表单总是失败？

> ID：12789699
> 
> 赞同：0
> 
> 时间：2012-10-08T21:26:13.970
> 
> 标签：php, jquery, ajax, forms

我不断收到错误警报。我的 php 文件就在同一个目录中，如果我将浏览器直接指向它，它就会起作用。

这是一个作为参数`onCLick`调用`process`和发送的按钮。`plan_id`

```
 <span class="payment_options" id="option2"><button class="btn btn-success" id="paypal_monthly" style="margin-left: 10px;"  onclick="process(this.id);">PayPal</button></span> 
```

这是它调用的脚本

```
<script>
function process(plan_id) {
    var data = plan_id;
    $.ajax({
            type: "POST",
            url: "process_paypal.php",
            data: data,
            dataType: "json",
            success: function (data) { 
                $.post('https://www.paypal.com/cgi-bin/webscr', data);
                return false;
        },
        error: function(data) {
            alert("Oh no! An error occured!");
            return false;
        }
    });
}
</script> 
```

有没有办法可以查看有关错误的更多详细信息？我有 chrome 的控制台，但它没有显示任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:30:23.590

将您的数据作为键发送：值对..

```
var data = { 'plan_id' : plan_id }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:34:33.263

我将问题缩小到处理 php 脚本。它正在调用 HTML/PHP 页面`header("location: page.php");`并将其发送回 AJAX - 因此字符非法字符`<`

# c - 在文本文件中搜索 ID (Turbo c)

> ID：12789701
> 
> 赞同：1
> 
> 时间：2012-10-08T21:26:18.010
> 
> 标签：c, turbo-c

我有这个小作业：

> 给定一个文本文件，创建一个函数，在文件中搜索用户提供的特定 ID。如果存在，请按如下方式打印整个配置文件：
> 
> `ID_genre_name_age_height`

在文本文件中只有一个配置文件：

> `19800372_male_David_19_1.75`

因此，如果我输入相同的 ID，我的函数应该打印该信息。

我的代码，到目前为止不起作用如下：

```
#include <conio.h>
#include <fcntl.h>
#include <string.h>
#include <stdio.h>
#include <iostream.h>
 int menu ();

main ()
{
int dato;
void create();
void Store();
void read();
void search();

clrscr();
   do
{
    dato=menu();
    switch (dato)
    {
        case 1:
            create();
            break;
        case 2:
            store();
            break;
        case 3:
            read();
            break;
        case 4:
            search();
            break;

        case 5:
            return -1;

        default: cout<<"\n Error";
             getch ();
             break;
      }

    }
    while (dato !=5);

    getch();
    return 0;

}

int menu ()
{
     int op;
     clrscr();
     cout<<"\n File creator system";
     cout<<"\n1 Create a file";
     cout<<"\n2 Store Information";
     cout<<"\n3 Read a file";
     cout<<"\n4 Search Information";
     cout<<"\n5 Exit...\n";
     cout<<"\n";
     cin>>op;

     return op;
}
.
.
.
.

  void search()
   {
    char ID[10],
    char ID1[10];
    char genre[10];
    char name[20];
    int age;
    float height;

 FILE *in;
 in=fopen("c:\\exercise.txt","r");

  clrscr();
  printf("Enter ID: ");
   fgets (ID1,10,stdin);

 do{
    fscanf(in,"%9s %s %s %d %4s",ID,genre,name,age,height);
  if (strcmpi(ID,ID1)==0)
   {
    printf("ID:%9s\n",ID);
    printf("Genre:%s\n",genre);
    printf("Name:%s\n",name);
    printf("Age:%d\n",age);
    printf("Height:%4s\n",height);
   }
  }while(!feof(in));
 fclose(in);

 getch();
 } 
```

我不知道为什么它不起作用，我输入了 ID，它就在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:43:41.597

1.  检查是否`fopen`成功。

2.  如果您的输入文件有：`ID_genre_name_age_height`那么这将被视为单个字符串。由于您似乎将它们读入变量，因此您应该将输入文件作为空格分隔的字符串列表。

3.  您所有的变量都是 char 数组，但您使用`%f`一些未定义的行为。适当地改变你的变量类型。

4.  检查 fscanf() 的返回值以查看没有读取错误。

5.  `feof`告诉您是否读取了输入文件，而不是文件末尾。这意味着循环将比您期望的多执行一次。考虑类似`fgets`then 的事情`sscanf()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:51:51.080

重新阅读文档`fscanf`，您使用不正确，请检查返回码！编译器还应该给你一个警告（或 9 个），如果你没有警告，那么你会感到羞耻。

```
t.c: In function ‘search’:
t.c:13:5: warning: ‘gets’ is deprecated (declared at /usr/include/stdio.h:638) [-Wdeprecated-declarations]
t.c:16:9: warning: unknown conversion type character ‘.’ in format [-Wformat]
t.c:16:9: warning: format ‘%d’ expects argument of type ‘int *’, but argument 5 has type ‘char *’ [-Wformat]
t.c:16:9: warning: unknown conversion type character ‘.’ in format [-Wformat]
t.c:16:9: warning: too many arguments for format [-Wformat-extra-args]
t.c:19:13: warning: format ‘%f’ expects argument of type ‘double’, but argument 2 has type ‘char *’ [-Wformat]
t.c:22:13: warning: format ‘%d’ expects argument of type ‘int’, but argument 2 has type ‘char *’ [-Wformat]
t.c:23:13: warning: format ‘%f’ expects argument of type ‘double’, but argument 2 has type ‘char *’ [-Wformat]
t.c:6:46: warning: unused variable ‘age’ [-Wunused-variable] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:46:17.710

你的 fscanf 转换和变量类型不匹配。

```
 fscanf(in, "%.0f %s %s %d %.2f", ced, sex, nombre, edad, altura); 
```

`ced`应该是`pointer to float`；它是`char[10]`；`"%9s"`改为使用

`sex`并且`nombre`几乎没问题：存在缓冲区溢出的危险

`edad`应该是`pointer to int`：它是未定义的：定义它并使用正确的转换

`altura`应该是`pointer to float`：它是`char[5]`：`"%4s"`改用

# jquery - 手动向 jQuery 验证器添加和删除验证错误

> ID：12789702
> 
> 赞同：40
> 
> 时间：2012-10-08T21:26:29.580
> 
> 标签：jquery, jquery-validate

我有一个搜索表单和基于剔除的结果网格。执行搜索时，asp.net mvc 上会进行一些服务器端验证，如果模型状态无效，它会通过 JSON 返回模型错误列表。

我已经设置了 jQuery 验证，并且默认验证（正则表达式、必需等）使用`jquery.unobtrusive`插件自动映射。我发现`$.validate().showErrors({prop:error})`作为一种基于来自服务器的 json 响应动态显示错误的方法，但我认为这不是使用它来显示服务器验证消息的正确方法，因为之后无法重置字段（`input-validation-error` `class`未删除）。

我需要一种在客户端上设置和重置错误的工作方法，如果存在于`$.validate`.

我在 jsFiddle 上的问题有一个例子：http: [//jsfiddle.net/goranobradovic/ughCm/](http://jsfiddle.net/goranobradovic/ughCm/)

要重现它，请单击添加错误，然后删除错误，输入保持红色。

这是因为 showErrors 函数不会添加任何由验证触发的规则，因此字段保持“有效”并且它不在用于从无效字段中删除的`elements()`列表中。`resetForm``input-validation-error` `class`

基本上，我想要简单的方法来添加/删除客户端永远不满意的自定义消息的验证规则，以避免在我手动设置错误时提交表单并且`invalid` `class`在删除错误消息后必须删除。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T21:48:34.580

我已经通过用我自己的覆盖 jQuery 验证器中的 showErrors 函数解决了这个问题，该函数与不显眼的生成验证跨度兼容，并清理了具有无效类的有效字段。这不是很好的解决方法，但它有效。

这是带有解决方案的 jsfiddle：http: [//jsfiddle.net/goranobradovic/ughCm/5/](http://jsfiddle.net/goranobradovic/ughCm/5/)

更新：根据站点指南，由于指向外部站点的链接不是正确的答案，因此我在此处添加代码示例。对于已经熟悉 jQuery 验证的任何人，只需查看 showErrors 函数中的两行代码。我用 validator.settings.showErrors = showErrors; 将它分配给验证器。

HTML：

```
<form id="experiment" action="/" method="post">

<fieldset>
  <legend></legend>
        <div class="editor-label">
          <label for="Email">Email</label>
        </div>
        <div class="editor-field">
<input data-val="true" data-val-email="&amp;#39;Email&amp;#39; not valid email address." data-val-required="&amp;#39;Email&amp;#39; is mandatory." id="Email" name="Email" type="text" value=""><span class="field-validation-valid" data-valmsg-for="Email" data-valmsg-replace="true"></span>        
        </div>
        <div class="editor-label">
          <label for="FirstName">First name</label>
        </div>
        <div class="editor-field">
          <input class="text-box single-line" id="FirstName" name="FirstName" type="text" value="">
          <span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
          <label for="LastName">Last name</label>
        </div>
        <div class="editor-field">
          <input class="text-box single-line" id="LastName" name="LastName" type="text" value="">
          <span class="field-validation-valid" data-valmsg-for="LastName" data-valmsg-replace="true"></span>
        </div>   
</fieldset>
    <p>
        <button type="submit" class="save ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-secondary" value="Save" role="button" aria-disabled="false"><span class="ui-button-text">Save</span><span class="ui-button-icon-secondary ui-icon ui-icon-disk"></span></button>

    </p>
</form>
<br/>

<button id="add">Add error</button>
<button id="remove">Remove error</button>

<br/>
<br/>
Debug:
<div id="debug"></div> 
```

JavaScript：

```
var validator = {};

function addError(e) {
    validator.showErrors({
        "FirstName": "test error"
    });
}

function removeError(e) {
    validator.showErrors({
        "FirstName": null
    });
    fixValidFieldStyles($("form"), validator);
}

$(document).ready(function() {
    var $form = $("#experiment");
    // prevent form submission
    $form.submit(function(e) {
        e.preventDefault();
        return false;
    });
    $("#add").click(addError);
    $("#remove").click(removeError);
    $("#debug").html("<h1>Validator properties:</h1>");
    validator = $form.validate();
    validator.settings.showErrors = showErrors;
    for (var i in validator) {
        var row = $("<span></span>").html(i).append("<br/>");
        $("#debug").append(row);
    }
});

function showErrors(errorMessage, errormap, errorlist) {
    var val = this;
    errormap.forEach(function(error, index) {
        val.settings.highlight.call(val, error.element, val.settings.errorClass, val.settings.validClass);
        $(error.element).siblings("span.field-validation-valid, span.field-validation-error").html($("<span></span>").html(error.message)).addClass("field-validation-error").removeClass("field-validation-valid").show();
    });
}

function fixValidFieldStyles($form, validator) {
    var errors = {};
    $form.find("input,select").each(function(index) {
        var name = $(this).attr("name");
        errors[name] = validator.errorsFor(name);
    });
    validator.showErrors(errors);
    var invalidFields = $form.find("." + validator.settings.errorClass);
    if (invalidFields.length) {
        invalidFields.each(function(index, field) {
            if ($(field).valid()) {
                $(field).removeClass(validator.settings.errorClass);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-12T10:04:17.190

我做了一些更简单的事情——基本上添加了将错误更完整地注册到验证器中的能力。我将以下内容添加到 jquery.validate.js（在 showErrors 下方）：

```
addErrors: function (errors) {
        for (var i = 0; i < errors.length; i++) {
            this.errorList.push({
                element: $(errors[i].element)[0],
                message: errors[i].message
            });
        }           
        this.showErrors();
    }, 
```

然后代替调用 form.validate().showErrors() 你可以做例如

```
form.validate().addErrors([{
    element: $('#myinput'),
    message: 'A manual error message'
}]); 
```

最后，因为表单在提交时可能没有被标记为无效，您可能希望强制对 keyup 或类似内容进行验证：

```
$('#myinput').one('keyup', function(){ $(this).valid(); }); 
```

（注意：这没有经过实战测试，但我敢肯定，至少有一个解决方案在某处以这种方式存在）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-14T21:41:02.910

我最终以一种简单的方式解决了问题，清除了错误，然后显示了新的错误。

```
// get the form inside we are working - change selector to your form as needed
var $form = $("form");

// get validator object
var $validator = $form.validate();

// get errors that were created using jQuery.validate.unobtrusive
var $errors = $form.find(".field-validation-error span");

// trick unobtrusive to think the elements were succesfully validated
// this removes the validation messages
$errors.each(function(){ $validator.settings.success($(this)); })

// clear errors from validation
$validator.resetForm();

// Then show the errors
$.validator().showErrors({prop:error} 
```

# php - Android：使用 php 在服务器上上传图像

> ID：12789703
> 
> 赞同：1
> 
> 时间：2012-10-08T21:26:30.413
> 
> 标签：php, android, image, upload

始终在服务器上上传 0KB 的图像 test.jpg！

这是图片：

[![](../Images/e21a1e2150f4c540f28378987754f25f.png)](https://i.stack.imgur.com/snzpq.jpg)

所以你可以看到我在服务器上得到了什么。

我将不胜感激任何帮助或建议，我希望我能解决问题..

安卓代码：

```
 public class Main extends Activity {

InputStream inputStream;
   @Override
   public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher);   
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 90, stream); //compress to which format you want.
    byte [] byte_arr = stream.toByteArray();
    String image_str = Base64.encodeBytes(byte_arr);
    ArrayList<NameValuePair> nameValuePairs = new  ArrayList<NameValuePair>();

    nameValuePairs.add(new BasicNameValuePair("image",image_str));

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://server/uploader2.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        String the_string_response = convertResponseToString(response);
        Toast.makeText(this, "Response " + the_string_response, Toast.LENGTH_LONG).show();
    }catch(Exception e){
          Toast.makeText(this, "ERROR " + e.getMessage(), Toast.LENGTH_LONG).show();
          System.out.println("Error in http connection "+e.toString());
    }
}

public String convertResponseToString(HttpResponse response) throws IllegalStateException, IOException{

     String res = "";
     StringBuffer buffer = new StringBuffer();
     inputStream = response.getEntity().getContent();
     int contentLength = (int) response.getEntity().getContentLength(); //getting content length…..
     Toast.makeText(this, "contentLength : " + contentLength, Toast.LENGTH_LONG).show();
     if (contentLength < 0){
     }
     else{
            byte[] data = new byte[512];
            int len = 0;
            try
            {
                while (-1 != (len = inputStream.read(data)) )
                {
                    buffer.append(new String(data, 0, len)); //converting to string and appending  to stringbuffer…..
                }
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            try
            {
                inputStream.close(); // closing the stream…..
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
            res = buffer.toString();     // converting stringbuffer to string…..

            Toast.makeText(this, "Result : " + res, Toast.LENGTH_LONG).show();
            //System.out.println("Response => " +  EntityUtils.toString(response.getEntity()));
     }
     return res;

}} 
```

和 php 代码... (uploader2.php)

```
<?php
$base=$_REQUEST['image'];
$binary=base64_decode($base);
header('Content-Type: image/jpg; charset=utf-8');
$file = fopen('test.jpg', 'wb');
fwrite($file, $binary);
fclose($file);
echo 'Image upload complete!!, Please check your php file directory……';
echo "<img src=test.jpg>";
?> 
```

问题是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T05:04:34.413

文件上传功能：

```
private void doFileUpload(){
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    DataInputStream inStream = null; 
    String exsistingFileName = "/sdcard/six.3gp";
    // Is this the place are you doing something wrong.
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;
    String urlString = "http://192.168.1.5/upload.php";
    try
    {
        Log.e("MediaPlayer","Inside second Method");
        FileInputStream fileInputStream = new FileInputStream(new File(exsistingFileName) );
        URL url = new URL(urlString);
        conn = (HttpURLConnection) url.openConnection();
        conn.setDoInput(true);
        // Allow Outputs
        conn.setDoOutput(true);
        // Don't use a cached copy.
        conn.setUseCaches(false);
        // Use a post method.
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
        dos = new DataOutputStream( conn.getOutputStream() );
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + exsistingFileName +"\"" + lineEnd);
        dos.writeBytes(lineEnd);
        Log.e("MediaPlayer","Headers are written");
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        while (bytesRead > 0)
        {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
        BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            tv.append(inputLine);
        // close streams
        Log.e("MediaPlayer","File is written");
        fileInputStream.close();
        dos.flush();
        dos.close();
    }
    catch (MalformedURLException ex)
    {
        Log.e("MediaPlayer", "error: " + ex.getMessage(), ex);
    }
    catch (IOException ioe)
    {
        Log.e("MediaPlayer", "error: " + ioe.getMessage(), ioe);
    }

    //------------------ read the SERVER RESPONSE
    try {
        inStream = new DataInputStream ( conn.getInputStream() );
        String str;            
        while (( str = inStream.readLine()) != null)
        {
            Log.e("MediaPlayer","Server Response"+str);
        }
        /*while((str = inStream.readLine()) !=null ){

        }*/
        inStream.close();
    }
    catch (IOException ioex){
        Log.e("MediaPlayer", "error: " + ioex.getMessage(), ioex);
    }
} 
```

上传.php

```
<?php

move_uploaded_file($_FILES['uploadedfile']['tmp_name'], "./upload/".$_FILES["uploadedfile"]["name"]);

mysql_connect("localhost","root","");
        mysql_select_db("chat");

if(isset($_REQUEST['msg']))
{
    $a = $_REQUEST['msg'];
    $sql = "INSERT INTO  upload(image)VALUES('$a')";
    mysql_query($sql);
    }
?> 
```

# mysql - mysql计算优化

> ID：12789709
> 
> 赞同：0
> 
> 时间：2012-10-08T21:26:51.113
> 
> 标签：mysql, query-optimization

我在表格中有一个列需要保存“正”和“负”值或“无值”。我必须非常总结数百万行！经常显示给用户。我的问题是：哪个 sum 运算会更快。

1.  如果我用 0 标记“无价值”，用 1 标记“正”，用 -1 标记“负”
2.  如果我用 0 标记“无价值”，用 1 标记“正”，用 2 标记“负”

我的首选选项是 1。因为它可以节省我额外处理 php 的工作量，并且会立即显示正确的结果。问题是在数据库中使用符号（-1,0,+1）的天气会减慢它的速度，或者就像我不使用符号（0,1,2）一样。请记住，我将拥有数百万行，并且会定期对其进行总结。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:37:18.057

1）因为它会给你直接的结果！

不，只要列的类型定义为有符号整数或实数，符号就不会影响性能...

你的问题应该是关于数据类型的，一个 int 是首选，不太喜欢的是一个浮点数，最不喜欢一个字符串，虽然 mysql 可以对字符串求和，但转换会很慢。

此外，假设该表仅包含其他两个表之间的一些交叉引用和向上/向下投票，如果您仅在投票时删除所有 0 值并插入行，那将快得多。如果您正在缓存值并使用触发器来更新缓存列引用的表，那么您可以更快地进行投票/取消投票。

一个自动更新投票总和的小提琴示例，[http: //sqlfiddle.com/#!2/044c3/1](http://sqlfiddle.com/#!2/044c3/1)

# asp.net - 从没有 gridview 或 form 的数据源获取变量

> ID：12789710
> 
> 赞同：0
> 
> 时间：2012-10-08T21:26:52.433
> 
> 标签：asp.net, datasource

我有一个 ASP.NET 页面。它创建一个像这样的数据源：

```
 <asp:ObjectDataSource ID="uxOrderSource" runat="server" SelectMethod="OrdersGetOne" TypeName="Vevo.Domain.DataSources.OrdersDataSource">
 <selectparameters>
     <asp:QueryStringParameter Name="orderID" QueryStringField="OrderID" Type="String" />
 </selectparameters>
 </asp:ObjectDataSource> 
```

然后它在这里使用数据源，如下所示：

```
 <asp:FormView ID="uxOrderView" runat="server" DataSourceID="uxOrderSource" CssClass="CheckoutCompleteCustomerFormView"> 
```

然后它引用该数据源中的电子邮件字段，如下所示：

```
<%# Eval("Email") %> 
```

我的问题是，在页面上创建此表单之前，我需要将该电子邮件拉出并设置一个脚本变量及其值，以便在迭代订单行项目时使用它。因为对于每个订单行项目（发生在表单创建之前的页面上）我需要调用第三方 API 并发送行项目信息，但该行项目信息也需要电子邮件，并且电子邮件不存在订单行项目数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:57:27.623

基于此：

> 我只需要访问数据源中的字段值，而无需在 formview 或 gridview 中使用数据源

最简单的方法是使用以下代码将您的`GridView`或`FormView`手动绑定到后面的代码中：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        this.myGridView.DataSource = this.GetYourDataSourceManually();
        this.myGridView.DataBind();
    }
} 
```

如果你想使用脚本，我认为有两种方法，`GridView`用你想要的数据渲染，然后使用 JQuery 找到每个已经渲染的元素并用它来调用你的第三方 API

或者..

使用 JQuery 在客户端使用您要使用的数据公开 Web 服务（一个 PageMethod 以使其保持简单）

我的 GitHub 站点上有很多功能示例：

*   [https://github.com/jupaol/LearningProjects/tree/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter09%20-%20Scripts](https://github.com/jupaol/LearningProjects/tree/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter09%20-%20Scripts)

*   [https://github.com/jupaol/SO-Answers/tree/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/JQuery/Ajax](https://github.com/jupaol/SO-Answers/tree/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/JQuery/Ajax)

# javascript - $.browser 在 Chrome 中无法正常工作

> ID：12789712
> 
> 赞同：1
> 
> 时间：2012-10-08T21:26:57.347
> 
> 标签：javascript, jquery, google-chrome

我想`$.browser`在我的脚本中使用，但它不能按我的意愿工作。例如，在 Chrome 中，它具有属性`safari`并`webkit`设置为`true`.

为什么会这样？

这是一个[小提琴](http://jsfiddle.net/pkjW4/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:29:22.977

在这种情况下，它发生是因为您在此版本中使用小提琴`jQuery 1.7.2`，您可以找到：

```
// Deprecated, use jQuery.browser.webkit instead
if ( jQuery.browser.webkit ) {
    jQuery.browser.safari = true;
} 
```

两种浏览器`chrome`都`safari`基于 webkit。

**解决方案：**

1.  您可以更新 jQuery。就像在这个[小提琴](http://jsfiddle.net/pkjW4/1/)中一样。
2.  您可以使用[文档](http://api.jquery.com/jQuery.browser/)中的建议，例如：

    ```
    $.browser.chrome = navigator.userAgent.toLowerCase().indexOf('safari') > -1;
    $.browser.safari = ( $.browser.safari && /chrome/.test(navigator.userAgent.toLowerCase()) ) ? false : true; 
    ```

[您可以在此处](http://jsfiddle.net/pkjW4/2/)观看此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:29:14.967

可能是因为这是 Chrome 用户代理的一部分。见这里： [http ://www.useragentstring.com/pages/Chrome/](http://www.useragentstring.com/pages/Chrome/)

这个[SO answer](https://stackoverflow.com/a/3364740/50109)可能会回答您可能需要的内容。

# bash - 获取部分字符串然后更新它

> ID：12789714
> 
> 赞同：2
> 
> 时间：2012-10-08T21:27:04.043
> 
> 标签：bash

我有这个字符串

```
blah --arg1 --arg2 --etc doh 
```

有时`doh`以斜线结尾，有时不是。

我需要提取`doh`并分配给一个var。

然后将其替换为`/some/path/doh`

我不会把我的尝试放在这里，它们太丑陋了。

- - 更新 - -

mm，我不确定我是否理解答案，对不起。

最后的字符串应该是这样的：

```
blah --arg1 --arg2 --etc /some/path/doh 
```

并`doh`分配给一个var，比如说`foo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:34:26.917

假设你使用类似的东西[`getopts`](http://wiki.bash-hackers.org/howto/getopts_tutorial)来解析选项，它只是

```
echo "/some/path/$1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:44:40.283

有点丑但工作

首先摆脱最终的斜杠：

```
$ str='blah --arg1 --arg2 --etc doh///'
$ str=$(shopt -s extglob; echo "${str%%+(/)}")
$ echo $str
blah --arg1 --arg2 --etc doh 
```

下一次提取`doh`

```
$ var=${str##* }
$ echo $var
doh 
```

最后从字符串中删除它并添加前缀`/some/path`

```
$ echo "${str%"$var"} /some/path/$var"
blah --arg1 --arg2 --etc  /some/path/doh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:38:25.170

如果字符串不是命令行参数：

```
VAR="blah --arg1 --arg2 --etc doh"
LAST=`echo $VAR | awk -F" " '{ print $NF }'`
echo "/some/path/$LAST" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T21:38:28.733

如果它确实来自脚本的参数，请查看 Tripleee 写的内容。

如果不：

```
echo "/some/path/$(echo "$STRING" | awk '{print $NF}')" 
```

# iphone - 格式化 NSDate 后，新日期比实际日期早一天

> ID：12789717
> 
> 赞同：3
> 
> 时间：2012-10-08T21:27:13.703
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我有一个奇怪的问题。将我的 stringDate 转换为 NSDate 后，我的 NSDate 对象比实际日期少一天

-example- StringDate = 2012 年 6 月 30 日 ---> NSDate 是 2012 年 6 月 29 日

这是我的代码。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd/MM/yyyy"];
    NSDate *date = [dateFormatter dateFromString:[genkInfo objectForKey:CALENDAR_DATE]]; 
```

我正在转换这个日期，因为我从 web 服务中将它作为字符串取回。网络服务返回以下内容

```
"date": "30/06/2012" 
```

有人知道这是怎么可能的吗？

提前致谢

**编辑**

好的，所以上述问题的解决方案是设置 TimeZone

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT+0:00"]]; 
```

但现在我有另一个问题。现在格式是 YYYY-MM-DD 但我想要 YYYY-DD-MM

我怎样才能做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T21:32:08.343

添加以下内容：

> [dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT+0:00"]];

实际上数据所在的时区。

# wpf - 我可以在 DataGrid 样式中执行此操作吗？

> ID：12789721
> 
> 赞同：0
> 
> 时间：2012-10-08T21:27:23.993
> 
> 标签：wpf, xaml

我想知道是否可以将 CellStyle、ColumnHeaderStyle 和 RowStyle 放入 DataGrid 样式中？

例如：

```
 <Style x:Key="DataGridStyle2" TargetType="DataGrid" BasedOn="{StaticResource {x:Type DataGrid}}">
    <Setter Property="SelectionUnit" Value="FullRow"/>
    <Setter Property="GridLinesVisibility" Value="None"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="HeadersVisibility" Value="Column"/>
    <Setter Property="CellStyle" Value="{StaticResource DataGridCellStyle2}"/>
    <Setter Property="ColumnHeaderStyle" Value="{StaticResource DataGridColumnHeader2}"/>
    <Setter Property="RowStyle" Value="{StaticResource DataGridRowStyle2}"/>
</Style> 
```

主窗口.xaml

```
 <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Collection}" Height="149.5" VerticalAlignment="Bottom" 
              Style="{Binding DataGridStyle2}">
      <DataGrid.Columns>
       ....
      <DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:52:03.387

简短的回答是`YES`您可以在 dataGrid 样式中设置样式，因为`CellStyle`它本身是数据网格的 DP，因此您可以像`Dependency Properties`样式中的其他样式一样设置它。

# debugging - WinDbg psscor4 命令 !ASPXPages / !DumpHttpContext 缺少大多数 ThreadId 并显示 XXX

> ID：12789728
> 
> 赞同：1
> 
> 时间：2012-10-08T21:28:01.980
> 
> 标签：debugging, c#-4.0, windbg

我正在分析在运行 .NET 4 的 Windows Server 2008 R2 SP1 机器上使用 procdump -ma w3wp 获取的转储文件。

```
0:000> !ASPXPages
Going to dump the HttpContexts found in the heap.
Loading the heap objects into our cache.
HttpContext    Timeout  Completed     Running  ThreadId ReturnCode   Verb RequestPath+QueryString
0x0353f65c      110 Sec        no      1429 Sec     XXX        200   GET /Nav/ResTry.aspx qs1
0x03545a18      110 Sec       yes                   XXX        302   GET /Nav/
0x0354f26c      110 Sec        no      1366 Sec     XXX        200   GET /Nav/ResTry.aspx te
0x0355a45c      110 Sec       yes                   XXX        200   POST /Service/ResInhId_68022569!
0x035d8454      110 Sec       yes                   XXX        302   POST /Service/ResIntf.ashx act
0x035e1268      110 Sec        no      1213 Sec     XXX        200   GET /Nav/ResTry.aspx te
0x12e77088      110 Sec        no         6 Sec     XXX        200   GET /Nav/Activities.mvc/Index/2/7 
0x12e85b10      110 Sec        no         5 Sec     215        200   GET /service/Ressaveresult.aspx even
0x12e89cb8      110 Sec        no         5 Sec     XXX        200   GET /Nav/Activities.mvc/Index/2/5 topicid=1
0x12ed5038      110 Sec        no         4 Sec     XXX        200   GET /Nav/Ressave.aspx e
0x12ed9dc0      110 Sec       yes                   XXX        302   GET /Nav/DoItem.aspx ItemId=71937319 
```

这里有 70 多个线程，但我修剪了输出。

为什么大多数 ThreadId 没有出现并显示为 XXX？如果我使用

```
 !threads 
```

我几乎可以看到每个 ID，但鉴于缺少页面名称，因此很难找出他们在做什么。这些线程没有标记为已完成，**我不相信它们真的死了，即使这就是所谓的 XXX 的意思**。当我查看 IIS 中当前正在执行的请求时，出现了许多这样的页面。

如果我跑

```
 !threadpool 
```

我确实看到几十个线程在运行，即使我只看到少数没有 XXX 的 ThreadId，这表明它们没有死，但不知何故 WinDbg 或 psscor4 没有正确加载 ThreadId。

另一个问题是为什么这些没有被 IIS 发送 Thread.Abort 并且超过了它们指定的超时时间。充当死神的线程是否也可能因机器上的高 CPU 问题而延迟？我们可以在 windbg 中验证这一点并以某种方式识别这个特殊线程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:05:08.417

对于已完成的请求，ThreadId 通常为 XXXX。它们仍在内存中，因为它们还没有被垃圾收集。然而奇怪的是，对于 Completed=no 的请求，您也有 XXXX。尝试运行 ~*e !clrstack 以获取所有托管线程的堆栈。以这种方式。您将确切地看到转储时发生了什么。

# java - 在 Java 1.4 中计算两个列表的不对称差异

> ID：12789735
> 
> 赞同：1
> 
> 时间：2012-10-08T21:28:38.407
> 
> 标签：java, collections, guava, set, asymmetric

我有两个清单：

```
List x = [1, 2, 5, 7, 8];
List y = [1, 3, 4, 5]; 
```

我试图得到以下计算的不对称差异：

```
x - y (what's in x that's not in y) => 2 7 8
y - x (what's in y that's not in x) => 3 4 
```

我已经检查了一些关于[this](https://stackoverflow.com/questions/23445/how-best-to-compare-two-collections-in-java-and-act-on-them)和[this](https://stackoverflow.com/questions/919387/how-can-i-calculate-the-difference-between-two-arraylists)的指针，但是我的背上有一些限制：

1.  我想要实现的正是 guava 的[Sets.difference](http://guava-libraries.googlecode.com/svn/tags/release04/javadoc/com/google/common/collect/Sets.html)提供的，除了我坚持使用 Java 1.4（我很容易将我的实现从使用 Lists 更改为 Sets）

2.  使用[Collection.removeAll/retainAll](http://commons.apache.org/collections/)将是一个交易破坏者，因为这些方法就地工作。我在列表中持有的对象是一些实际映射到 Hibernate 的重型 POJOS。

3.  从这个意义上说，我需要一些应该从基于哈希的实现中解决的东西，因为这种计算已经在那些 POJOS 中实现了。

底线是，有没有像 Java 1.4 的 Sets 实用程序类的东西？或者可以计算两个集合的不对称差异的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T22:10:13.670

对于短列表来说，就地工作可能很好，但有数百个元素，转换为`HashSet`应该更快。但是速度是你的问题吗？你没有提到它，但如果没有，那么你需要的一切都由 JDK 提供，即使在你的旧版本中也是如此。我不确定你的目标是什么，所以我提出了多种选择。

如果您想从`x`中包含的所有内容中删除`y`，请执行`x.removeAll(y)`或`x.removeAll(new HashSet(y))`。前者对于短列表更快，后者对于长列表。

如果您不想修改`x`，我建议创建一个副本。以 Guava 的方式创建视图是可能的，但它的工作量更大，并且使用视图比直接使用集合要慢（尤其是在使用大型`List`s 时，因为它们的速度很慢`contains`）。

如果您想同时从另一个列表的元素`x`和元素中删除，请执行以下操作：`y``HashSet xx = new HashSet(x), yy = HashSet(y); x.removeAll(y); y.removeAll(x);`

请注意，通过创建新集合，不会复制任何对象，只会创建对旧对象的新引用。

# java - 同步写入两个集合

> ID：12789737
> 
> 赞同：2
> 
> 时间：2012-10-08T21:28:48.383
> 
> 标签：java, concurrency, atomic

如果地图还没有，我需要为地图添加一些价值。键-> 值（如果已设置）应始终位于两个集合中（即`put`应以原子方式发生在两个映射中）。我试图按如下方式实现这一点：

```
private final ConcurrentMap<String, Object> map1 = new ConcurrentHashMap<String, Object>();
private final ConcurrentMap<String, Object> map2 = new ConcurrentHashMap<String, Object>();

public Object putIfAbsent(String key) {
    Object retval = map1.get(key);
    if (retval == null) {
        synchronized (map1) {
            retval = map1.get(key);
            if (retval == null) {
                Object value = new Object(); //or get it somewhere
                synchronized (map2) {
                    map1.put(key, value);
                    map2.put(key, new Object());
                }
                retval = value;
            }
        }
    }
    return retval;
}

public void doSomething(String key) {
    Object obj1 = map1.get(key);
    Object obj2 = map2.get(key);
    //do smth
} 
```

这在所有情况下都能正常工作吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:34:52.933

几个问题：

*   不要使用“双重检查锁定”。快速的 Google 搜索将显示大量文章，这些文章解释了这种技术的问题。只需检查`synchronized`块内部。
*   您不需要在`map1`和上同步`map2`。只需使用其中一种。
*   内同步`doSomething`。确保在用于同步的*同一*对象上进行同步`putIfAbsent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:38:56.053

您永远不应该将同步与 ConcurrentHashMap 一起使用（这几乎违背了目的）。对 CHH 进行原子添加的最佳方法是使用内置的替换方法。例如：

```
do {

    oldValue1 = map1.get(key1);
    oldValue2 = map2.get(key2);
    newValue1 = // some logic to determine a new value for key1/value1
    newValue2 = // some more logic to determine a new value for key2/value2

} while (!map1.replace(key1, oldValue1, newValue1) && !map2.replace(key2, oldValue2, newValue2)); 
```

我不知道如何专门针对您的示例进行调整，但这应该会给您一个开始的地方。基本上发生的事情是您从地图中获取密钥，执行一些逻辑，如果密钥仍然与逻辑之前相同，它将替换条目并返回true，然后循环将中断。否则它只会重复循环，直到它可以原子地进行更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T20:18:51.380

好的，我终于找到了这个解决方案：

```
private Map<String, Object> map1 = new HashMap<String, Object>();
private Map<String, Object> map2 = new HashMap<String, Object>();

private final ReentrantReadWriteLock rwl = new ReentrantReadWriteLock();

public void putIfAbsent(String key, Object o) {
    rwl.readLock().lock();
    try {
        if (map1.get(key) == null) {
            rwl.readLock().unlock();
            rwl.writeLock().lock();
            try {
                if (map1.get(key) == null) {
                    map1.put(key, getValue());
                    map2.put(key, getValue());
                }
            }finally {
                rwl.readLock().lock();
                rwl.writeLock().unlock();
            }
        }
    } finally {
        readLock.unlock();
    }
}

public void readMap(String key) {
   rwl.readLock().lock();
    try {
       Object obj1 = map1.get(key);
       Object obj2 = map2.get(key);
    } finally {
        rwl.readLock().unlock();
    }

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T22:10:28.940

为了做你想做的事，我会使用原子引用：

```
class PairHolder {
   public final ConcurrentMap map1;
   public final ConcurrentMap map2;
   public PairHolder(...) // set values here.
}

private AtomicReference<PairHolder> mapHolder = ... // initialize it somehow

do {
  PairHolder holder = mapHolder.get();
  ConcurrentMap map1 = holder.map1.clone()
  ConcurrentMap map2 = holder.map2.clone()
  newMap1.putIfAbsent(...);
  newMap2.putIfAbsent(...);
} while (!mapHolder.compareAndSet(holder, new PairHolder(newMap1,newMap2)) 
```

这样你就可以确定，mapHolder 包含对 PairHolder 的引用，而这两个映射又以原子方式 100% 更新。至少 CAS 应该保证这一点，但是在多处理器系统上它可能是错误的。

# xml - 将动态元素和属性添加到 groovy MarkupBuilder 或 StreamingMarkupBuilder

> ID：12789738
> 
> 赞同：11
> 
> 时间：2012-10-08T21:28:53.167
> 
> 标签：xml, groovy, markupbuilder

我见过很多使用 Groovy`MarkupBuilder`构建 XML 文档的示例，但它们似乎都对文档中的每个元素使用静态属性（属性名称在编译时都是已知的）。如果我试图构建一个属性名称直到运行时才知道的 XML 文档，该怎么办？我还没有弄清楚解决此类问题所需的语法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T07:50:58.917

以属性名称作为键的映射应该做到这一点。您需要将键括在大括号中，以便 Groovy 知道您的意思是使用值`a`而不是键`a`：

```
import groovy.xml.MarkupBuilder

new MarkupBuilder().root {
  def a = 'dynAttr'
  node( [ (a):'woo' ] )
} 
```

会产生：

```
<root>
  <node dynAttr='woo' />
</root> 
```

# sass - grunt 说没有找到“sass”目标

> ID：12789746
> 
> 赞同：3
> 
> 时间：2012-10-08T21:29:27.883
> 
> 标签：sass, gruntjs

我正在尝试设置 grunt-contrib-sass 以便我可以使用 grunt 来处理 sass-to-css 编译。我在使用`grunt init:makefile`. 当我只是为了测试东西而跑时`grunt sass`，终端返回一个“没有找到“sass”目标。”

我的设置：

*   $sass -v 返回“Sass 3.2.1”

*   $ruby -v 返回“ruby 1.9.3p194”

*   “node_modules”文件夹包含“grunt-contrib-sass”

*   基于 grunt-contrib-sass 文档，我的 grunt.js 文件目前如下所示：

```
module.exports = function(grunt) {

grunt.initConfig({
lint: {
  files: ['grunt.js', 'lib/**/*.js', 'test/**/*.js']
},
test: {
  files: ['test/**/*.js']
},
watch: {
  files: '<config:lint.files>',
  tasks: 'lint test'
},
jshint: {
  options: {
    curly: true,
    eqeqeq: true,
    immed: true,
    latedef: true,
    newcap: true,
    noarg: true,
    sub: true,
    undef: true,
    boss: true,
    eqnull: true
  },
  globals: {},
   sass: {                                     // Task
    dist: {                                 // Target
        files: {                            // Dictionary of files
            'main.css': 'main.scss',        // 'destination': 'source'
            'widgets.css': 'widgets.scss'
        }
    },
    dev: {                                  // Another target
        options: {                          // Target options
            style: 'expanded'
        },
        files: {
            'main.css': 'main.scss',
            'widgets.css': [
                'button.scss',
                'tab.scss',
                'debug.scss'                
            ]
        }
    }
}
}
});
grunt.loadNpmTasks('grunt-contrib-sass');

grunt.registerTask('default', 'lint sass');

}; 
```

任何和所有的帮助表示赞赏......非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T22:16:41.077

仔细检查你的闭合花括号。你的`sass`街区在你的`jshint`街区之内。尝试这个：

```
module.exports = function(grunt) {
grunt.initConfig({
  lint: {
    files: ['grunt.js', 'lib/**/*.js', 'test/**/*.js']
  },
  test: {
    files: ['test/**/*.js']
  },
  watch: {
    files: '<config:lint.files>',
    tasks: 'lint test'
  },
  jshint: {
    options: {
      curly: true,
      eqeqeq: true,
      immed: true,
      latedef: true,
      newcap: true,
      noarg: true,
      sub: true,
      undef: true,
      boss: true,
      eqnull: true
    },
    globals: {},
  },
  sass: {                                   // Task
    dist: {                                 // Target
        files: {                            // Dictionary of files
            'main.css': 'main.scss',        // 'destination': 'source'
            'widgets.css': 'widgets.scss'
        }
    },
    dev: {                                  // Another target
        options: {                          // Target options
            style: 'expanded'
        },
        files: {
            'main.css': 'main.scss',
            'widgets.css': [
                'button.scss',
                'tab.scss',
                'debug.scss'                
            ]
        }
    }
}
});
grunt.loadNpmTasks('grunt-contrib-sass');

grunt.registerTask('default', 'lint sass');

}; 
```

# javascript - AngularJS：在视图中输入未绑定到预期范围

> ID：12789749
> 
> 赞同：10
> 
> 时间：2012-10-08T21:29:28.400
> 
> 标签：javascript, angularjs

我在从视图内部绑定输入时遇到问题。我以为它会绑定到控制器范围，但它似乎绑定到子范围，所以上面没有更新。

如果其他项目在 ng-repeat 中，它们会像我预期的那样绑定（我不确定为什么）。

这是一个例子：http:
[//jsfiddle.net/hMpsB/1/](http://jsfiddle.net/hMpsB/1/)

如果输入不在 ng-repeat 内，将输入绑定到正确范围的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T21:39:03.763

在您的示例中，您将有更好的运气将您绑定`$scope.test`到对象而不是像这样的原始类型：

```
$scope.test = { val: "test value" }; 
```

你可以看到[这个小提琴](http://jsfiddle.net/8cvQ5/)作为一个工作示例。

[在ngView](http://docs.angularjs.org/api/ng.directive:ngView)中创建的子范围将复制您的值，并且由于您`$scope.test`的原始字符串是原始字符串，因此它没有指向父值的链接，因此您的输入将修改子范围副本。绑定到对象时，您的子作用域拥有对象引用的副本，但最终会修改对象的同一实例。

您可以查看[此问题](https://stackoverflow.com/questions/12574765/better-design-for-passing-data-to-other-ng-views-in-angularjs-persisting-it-ac)以获取有关创建服务以跨多个控制器持久保存数据的更多信息（这与您的问题有点相似）。

您也可以按照[此答案](https://stackoverflow.com/a/12749969/1207991)`$parent`中的描述考虑使用，尽管 Mark 提到它没有记录，并且如果在某处引入另一个子范围可能会变得混乱。

# android - 按格式化日期列对 sqlite 游标结果进行分组的方法

> ID：12789756
> 
> 赞同：1
> 
> 时间：2012-10-08T21:30:08.380
> 
> 标签：android, sqlite, arraylist, cursor

有没有比我要提出的更简单的方法来分组和呈现来自 SQLite 数据库的数据？如果是这样，你会如何改进它？

在我为健身房做的应用程序中，我需要能够按日期、降序（最新在顶部）记录 5 种类型的锻炼课程的历史记录。本着分享代码以更好地理解的精神，这是我的表创建：

```
private static final String CREATE_TABLE_BJJ = "CREATE TABLE IF NOT EXISTS "
    // TODO finish this
    + TABLE_BJJ + "(" + COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
    + BJJ_HISTORY_MOVE + " TEXT NOT NULL, " + BJJ_HISTORY_MOVECOUNT + " INTEGER NOT NULL, "
    + BJJ_HISTORY_PERFORMEDBY + " TEXT NOT NULL, " + BJJ_HISTORY_PERFORMEDTO
    + " TEXT NOT NULL, " + DATE + " datetime NOT NULL, " + UPLOADED
    + " INTEGER NOT NULL DEFAULT 0);"; 
```

一旦数据被记录，这会导致类似这样的结果： ![表行](../Images/fd0366785df1bbb6317eed4e94bb94a3.png)

但是，对于历史页面，我需要以某种方式将按日期执行的所有移动分组到一行中，其中包含执行移动次数的总和，如下面的屏幕截图所示：

![示例屏幕](../Images/be0b995c9a1b56a9670d0e1b49afd8f9.png)

**我想的可能是用** [SELECT DISTINCT STATEMENT](https://stackoverflow.com/questions/7403224/android-sqlite-how-to-select-distinct-valuse-from-1-column-in-table) **的结果填充一个数组，然后用这样的结果填充一个数组：**

```
String query ="SELECT DISTINCT Date FROM BJJHistory";
ArrayList<String> dateList = new ArrayList<String>();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Cursor  cursor = database.rawQuery(query,null);
if (cursor != null) {
    cursor.moveToFirst();
    if (!cursor.isAfterLast())
    {
         do
         {
              String datestr = sdf.format(new Date(cursor.getString(0))); 
              dateList.add(datestr);
         }
         while (cursor.moveToNext());
    }

}
return cursor; 
```

**我有一个自定义类来保存结果：**

```
Public class History {
public String numMoves;
public String date;

public History() {
    super();
}

public History(final String numMoves, final String date) {
    super();
    this.numMoves = numMoves;
    this.date = date;
    }
} 
```

**之后，使用数组创建游标以将数据拉回，如下所示：**

```
final ArrayList<History> BJJHistory = new ArrayList<History>();
for (int i = 0; dateList.size(); i++) {
    final Cursor cursor = db.rawQuery("SELECT COUNT(*) FROM BJJHistory WHERE Date LIKE '" + dateList(i).toString() + "%'") > 0, null); 
    if (cursor != null) {
        cursor.moveToFirst();

        BJJHistory.add(new History(cursor.getString(0).toString(),dateList[i].toString())) 
    } 
```

*很多打字*

最后，使用数组适配器用生成的历史项目数组列表填充列表视图。我仍然需要使用一种方法来实现一个 onclick 侦听器，该侦听器会在数据库中查询每个日期的所有项目，因此用户可以看到他们在该日期做了什么动作，但现在主列表视图更重要。

一如既往，提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:27:45.187

该[`GROUP BY`子句](http://www.sqlite.org/lang_select.html#resultset)做你想做的事；该[`date`功能](http://www.sqlite.org/lang_datefunc.html)还有助于：

```
SELECT COUNT(*), date("Date") FROM BJHistory GROUP BY date("Date") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:03:30.040

我最终让它与我上面发布的稍微修改的版本一起工作。对于任何感兴趣的人，这是我的代码（可能会有所改进）：

**首先，我从表中获取所有唯一日期：**

```
public String[] getUniqueDates(final String tablename) {
    final String query = "SELECT DISTINCT Date FROM " + tablename
            + " ORDER BY Date DESC";

    final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    final SimpleDateFormat sourceFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
    final Cursor cursor = database.rawQuery(query, null);
    String datestr = null;

    final Set<String> set = new LinkedHashSet<String>();
    if (cursor != null) {
        cursor.moveToFirst();
        if (!cursor.isAfterLast()) {
            do {
                // Convert the date to YYYY-MM-DD
                try {
                    final Date dt = sourceFormat.parse(cursor.getString(0));
                    datestr = sdf.format(dt);
                } catch (final ParseException e) {
                    e.printStackTrace();
                }
                set.add(datestr);
            } while (cursor.moveToNext());
        }
        cursor.close();
    }

    return set.toArray(new String[0]);
} 
```

**然后我的数据库访问类中有一个类，它选择与日期匹配的日期数：**

```
public String selectCount(final String date) {
    String count = "";
    final Cursor cursor = database.rawQuery("SELECT COUNT(*) FROM "
            + SQLiteHelper.TABLE_BJJ + " WHERE Date LIKE '" + date
            + "%'", null);
    if (cursor != null) {
        cursor.moveToFirst();
        count = cursor.getString(0);
        cursor.close();
    }

    return count;
} 
```

**将数据放入ListView的肉和土豆：**

```
String[] DateArray = datasource.getUniqueDates(SQLiteHelper.TABLE_BJJ);
final History BJJHistoryArray[] = new History[DateArray.length];
for (int i = 0; i < DateArray.length; i++) {
    String suffix;
    if (datasource.selectCount(DateArray[i]).equals("1"))
        suffix = " Move";
    else
        suffix = " Moves";
    BJJHistoryArray[i] = new History(datasource.selectCount(DateArray[i]) + suffix,
            DateArray[i]);
}

final HistoryAdapter adapter = new HistoryAdapter(this, R.layout.history_row,
        BJJHistoryArray);
BJJHistory.setAdapter(adapter); 
```

**这导致以下结果：**

![截屏](../Images/9769f9bdccc8d091d9d391407652dc5d.png)

当使用日志条目按钮记录新条目时，它会刷新查询，因此`1`每次都会将数字向上更改。

***需要改进的地方：***

1.  为该`selectCount()`方法添加一个参数，以便它可以在任何表上使用。
2.  如果可能，尝试优化游标。
3.  如果可能，优化代码。

# php - 使用方括号使用 cURL/PHP 指定多个 URL

> ID：12789757
> 
> 赞同：0
> 
> 时间：2012-10-08T21:30:10.910
> 
> 标签：php, url, curl

我有大量类似于此的 URL：

```
 $nodes = array(
    'http://www.example.com/product.php?page=1&sortOn=sellprice',
    'http://www.example.com/product.php?page=2&sortOn=sellprice',
    'http://www.example.com/product.php?page=3&sortOn=sellprice'
); 
```

手册在`cURL`这里（http://curl.haxx.se/docs/manpage.html）声明我可以使用方括号'[]'来指定多个网址。在上面的示例中使用这将类似于：

```
'http://www.example.com/product.php?page=[1-3]&sortOn=sellprice' 
```

到目前为止，我一直无法正确引用它。这是我目前尝试使用的完整代码段：

```
$nodes = array(
    'http://www.example.com/product.php?page=1&sortOn=sellprice',
    'http://www.example.com/product.php?page=2&sortOn=sellprice',
    'http://www.example.com/product.php?page=3&sortOn=sellprice' 
);

$node_count = count($nodes);

$curl_arr = array();
$master = curl_multi_init();

for($i = 0; $i < $node_count; $i++)
{
    $url =$nodes[$i];
    $curl_arr[$i] = curl_init($url);
    curl_setopt($curl_arr[$i], CURLOPT_RETURNTRANSFER, true);
    curl_multi_add_handle($master, $curl_arr[$i]);
}

do {
    curl_multi_exec($master,$running);
} while($running > 0);

echo "results: ";
for($i = 0; $i < $node_count; $i++)
{
    $results = curl_multi_getcontent  ( $curl_arr[$i]  );
    echo( $i . "\n" . $results . "\n");
echo 'done'; 
```

我似乎找不到更多关于此的文档。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:34:55.920

您链接的文档是 cURL 命令行二进制文件的手册页，*不适*用于PHP 使用的[libcurl 。](http://curl.haxx.se/libcurl/)如果您想在 PHP 中同时检索多个 URL，正确的方法是使用`curl_multi_*`函数，根据您显示的代码示例，您似乎已经意识到了这一点。

# asp.net - MasterPages 的内容布局指南

> ID：12789761
> 
> 赞同：0
> 
> 时间：2012-10-08T21:30:18.050
> 
> 标签：asp.net, visual-studio-2010, html, master-pages

有经验的 MS Visual Web 开发人员能否就如何最好地在母版页中设置内容部分提供一些指导（也欢迎链接）。

microsoft 文档显示[（此处）](http://msdn.microsoft.com/en-us/library/ehszf8ax%28v=vs.100%29.aspx)使用表创建母版页。但是，据我了解，使用表格并不是很好的做法，有些不赞成。

我有一个母版页，但在我随后的派生页面上，我在不使用代码中的表格的情况下努力将内容放到内容区域。

我知道这是非常基本的，但它的定义不是很好，而且我更习惯于直接拖放 windows 窗体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:34:40.797

您可能想查看本教程： [http](http://www.asp.net/web-forms/tutorials/master-pages/creating-a-site-wide-layout-using-master-pages-cs) ://www.asp.net/web-forms/tutorials/master-pages/creating-a-site-wide-layout-using-master-pages-cs 。

他们不使用表格元素，而是使用 div 元素和一些 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:26:29.600

我认为这与网页设计技能有关，而不是在 Visual Studio 母版页方面的专家。MasterPage 只允许您定义区域来放置东西，设计取决于您，表格或 div。

您甚至可以从 Web 获取精心设计的模板，将标记粘贴到您的 MasterPage 文件中，并在您想要的内容中填写 ContentPlaceHolder 标签，例如 SideBar、Navigation Menu、MainContent、Footer 等。

```
<div id="header">
  some header content here
</div>

<div id="layout">

   <div id="leftsidebar"></div>

   <div id="maincontent">
      <!-- Content Pages will go here -->
      <asp:ContentPlaceHolder runat="server" ID="MainContent">
      </asp:ContentPlaceHolder>
   </div>

</div>

<div id="footer">
   some footer content here
</div> 
```

那只是一个样本。它可以比这更美丽、复杂、光滑等。这取决于您作为网页设计师的技能

# ruby-on-rails - 如何在保持休息的同时为模型制作几个不同的编辑/更新视图？（导轨）

> ID：12789763
> 
> 赞同：0
> 
> 时间：2012-10-08T21:30:33.420
> 
> 标签：ruby-on-rails, model-view-controller

我有一个模型“Voyage”，它需要几种不同类型的表格。

有到达表、离开表、登记表等。

目前，我通过在控制器中创建新操作来实现这一点，例如

```
 def arrival_form
    ...
    end

    def departure_form
    ...
    end 
```

所有这些基本上都是编辑/更新操作。

我觉得可能有更好，更清洁的方法来做到这一点，但我只是无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:55:04.840

您当然可以通过选择这样的通用视图来呈现您的表单：

```
def edit
  # logic omitted
  render "#{params[:state]}_form" if Voyage::STATES.include? params[:state]
end 
```

或者，如果您的表单是某种 step_by_step 向导，您可以在表单生成中使用 @voyage.state。我想你应该已经明白了。你应该`Voyage`用行动更新你的实例`update`就好了。

# jquery - jQuery“宽度：切换”在 Chrome

> ID：12789767
> 
> 赞同：2
> 
> 时间：2012-10-08T21:31:16.193
> 
> 标签：jquery, google-chrome, jquery-animate, width

这是我的简单问题：http: [//jsfiddle.net/Bergkamp/FBxGX/12/](http://jsfiddle.net/Bergkamp/FBxGX/12/)

我想始终显示一个“红色 div”。它适用于 IE 和 Firefox，但在 Chrome 中我只能打开一次，然后当我再次打开时，红色 div 框会转到“灰色 div”的底部。我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:46:19.417

您不需要使包装器具有`float`属性，它们只是内联块，对吗？（因为它们有固定的宽度）

删除

```
.befoglalo{
 float:left;
}​ 
```

为您提供您想要的，如您在此处看到的：（在 Chrome 最新版、Firefox 最新版、Safari 5、Opera idk 和 IE7/9 中进行了测试）

[http://jsfiddle.net/FBxGX/13/](http://jsfiddle.net/FBxGX/13/)

# windbg - WinDbg psscor4 !ASPXPages -ip 未列出任何内容

> ID：12789768
> 
> 赞同：1
> 
> 时间：2012-10-08T21:31:25.067
> 
> 标签：windbg

我正在分析在运行 .NET 4 的 Windows Server 2008 R2 SP1 机器上使用 procdump -ma w3wp 获取的转储文件。

```
 !ASPXPages –ip 
 Going to dump the HttpContexts found in the heap.
 HttpContext    Client IP            Server IP         ThreadId
 Total 42 HttpContext objects 
```

此命令输出仅列出标头，与填充正常输出（但没有 IP）的 !ASPXPages 相比没有值。任何想法为什么会在我的转储文件上发生这种情况？

# c# - 动态创建的文本框上的 C# 线程安全文本更新

> ID：12789773
> 
> 赞同：1
> 
> 时间：2012-10-08T21:31:53.000
> 
> 标签：c#, multithreading, thread-safety

我知道如何对已经定义的文本框进行线程安全更新[http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx) .... 我如何在文本框上执行此操作稍后在程序中生成？非常感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:38:59.053

给定一些`TextBox`对象，只需调用它：

```
TextBox foo = new TextBox(...);

// Code to add the new box to the form has been omitted; presumably
// you do this already.

Action update = delegate { foo.Text = "Changed!"; };

if (foo.InvokeRequired) {
    foo.Invoke(update);
} else {
    update();
} 
```

如果您经常使用此模式，则此扩展方法可能会有所帮助：

```
public static void AutoInvoke(
    this System.ComponentModel.ISynchronizeInvoke self,
    Action action)
{
    if (self == null) throw new ArgumentNullException("self");
    if (action == null) throw new ArgumentNullException("action");

    if (self.InvokeRequired) {
        self.Invoke(action);
    } else {
        action();
    }
} 
```

然后，您可以将代码简化为：

```
foo.AutoInvoke(() => foo.Text = "Changed!"); 
```

这只会做正确的事情，在主 GUI 线程上执行委托，无论您当前是否正在其上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:00:51.423

我们在这里肯定需要更多信息，但据我所知，您在感叹线程的 main 函数不接受任何参数这一事实。您可以使文本框成为周围类的成员，并以这种方式访问​​它们。如果你走这条路，一定要为线程使用互斥锁或其他一些锁定设备。

# javascript - Javascript：如果子 iframe 陷入无限循环，父母可能会杀死它吗？

> ID：12789778
> 
> 赞同：8
> 
> 时间：2012-10-08T21:32:09.007
> 
> 标签：javascript, iframe, infinite-loop

我有一个包含外部内容的 iframe 页面。我不希望外部内容中的无限循环使我的整个页面崩溃。有什么办法可以解决这个问题。

我试图设置一些东西，父子 iframe 每隔一段时间发送消息，如果子 iframe 没有响应太长时间，父级更改 iframes src，但这似乎不起作用。一旦 iframe 开始循环，父级的 setTimeout 函数就不再执行。在此处查看我的代码（请注意，如果您执行它会导致您的选项卡崩溃，请在执行前打开控制台以查看日志记录）：

```
<html>
<head>
</head>
<body>
<script type="text/javascript">
var scr = 'script';
var html = '<html><head><script>\n' +
'  window.addEventListener("message", answer, false);' +
'  function answer() { console.log("answered"); parent.postMessage(\'hi\', \'*\');}' +
'  setTimeout("while(1){console.log(\'in loop\')};", 3000)' +
"</" + scr + "></head><body>IFRAME</body</html>";

var lastAnswer = (new Date()).getTime();
var iframe = document.createElement('iframe');
queryChild();

window.addEventListener("message", receive, false);
function receive() {
  lastAnswer = (new Date()).getTime();
  console.log('got answer');
}

function queryChild() {
  console.log('querying');
  if((new Date()).getTime() - lastAnswer > 5000) {
    console.log('killing');
    iframe.src = '';
  } else if(iframe.contentWindow){
    iframe.contentWindow.postMessage('hi', '*');
  }
  setTimeout(queryChild, 2000);
};

document.body.appendChild(iframe);
iframe.contentWindow.document.open();
iframe.contentWindow.document.write(html);
iframe.contentWindow.document.close();

</script>
</body>
</html> 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T22:55:59.313

我对此类问题的经验是，除非您可以在将外部代码提供给`iframe`（作为 URL 或通过[srcdoc](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)属性）之前访问外部代码，否则循环将完全中断任何 JavaScript 执行。

无论你实现什么样的超时功能，它都不会被调用，因为 iframe 代码执行会消耗 100% 的资源，直到浏览器报告崩溃。

您的选择是：

*   **在将代码添加到之前**自动清理代码**`iframe`，这被证明是不切实际的，因为有无限的方法可以无限循环，并且您将无法全部捕获它们。您必须编写一个扫描程序脚本，该脚本可以检测无限循环，同时在扫描代码的过程中不会崩溃。**
***   使用像**[Google Caja](http://code.google.com/p/google-caja/)****这样的沙盒解决方案**来清理代码。但是，如果没有大量配置，这将在结构上改变代码。*   如果应用程序具有**创建虚拟环境**和监控它们的能力，您可以执行 iframe 代码（比如说在某种虚拟机上），检查进程是否锁定并使用该结果来确定您是否可以安全地设置属性到您的`iframe.src`代码的 URL。这可能是唯一可以保证某种保证该代码不会立即锁定的解决方案（但是，有很多方法可以在稍后的执行点产生竞争条件，因此无法确定永远不会锁定浏览器）。**

 ****摘要**：除非您能找到一种方法在将代码显示在 中之前对其进行广泛测试，否则您`iframe`不能保证 iframe 代码不会锁定浏览器选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:33:38.327

尝试这个：

```
<script>
 document.getElementById('iframeID').onload= function() { //When the iframe loads quickly
     clearTimeout(killerTimer); // Stop the Killer Timer
 };
 var killerTimer = setTimeout( function() {
     document.getElementById("iframeID").setAttribute("src",""); //Otherwise, kill the iframe
 }, 3000 ); 
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:37:25.177

它高度依赖于浏览器，某些浏览器为每个页面（或 iframe）使用一个线程，在这种情况下，您的脚本无法执行，直到 iframe 执行结束（无限循环）。其他一些人每页（或 iframe）有一个线程，也许您可​​以做到。

我敢肯定的是，如果您希望支持企业浏览器（如 IE8），那么您就做不到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T21:37:51.587

这个

```
console.log('killing');
    iframe.src = ''; 
```

不会杀的`iframe`。根据[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能从您的域操作外部域。只是更改`src`an`iframe`不会触发`iframe`. `src`会改变，但`iframe`不会被导航。

如果您从内部收到消息，`iframe`您应该`iframe`从文档树中删除并在文档树中插入一个*新消息*，以便使用`removeChild`

```
document.body.removeChild(iframe);
document.body.appendChild(newiframe); 
```

看看我在这里创建的这个简单的演示：http: [//jsbin.com/avodeb/1/](http://jsbin.com/avodeb/1/)**

# java - 尝试查找给定路径中是 否存在文件

> ID：12789780
> 
> 赞同：0
> 
> 时间：2012-10-08T21:32:16.563
> 
> 标签：java, filepath

我对java相当陌生，我正在尝试查找LINUX路径中指定的文件是否存在。

```
private void validateFilePath(String filePath) {

        File dir = new File(filePath);

        if(dir.exists()){
                System.out.println("File exists in the path " + dir);
                setTARGET_IMG_DIR("filePath");
                return; 
        }else{
            System.out.println("File does not exists in the path: " + dir);
            return;
        }

    } 
```

如果我像这样从根目录提供绝对路径，则 dir.exists 可以正常工作

```
/Users/yv/Documents/Eclipse-workspace/InputParser/bin/test.txt 
```

但是如果我给出一个相对路径， `test.txt`或者`/InputParser/bin/test.txt`它说文件不存在。

我打算创建一个这个项目的 jar，因此这应该适用于相对路径（同一目录中的文件）和来自根目录的绝对路径。我该如何处理？

是否可以从根目录搜索该文件的绝对路径并将其附加到文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:35:18.567

似乎是因为您的eclipse程序运行的当前目录不是所在的目录`test.txt`。另请注意，这`/InputParser/bin/test.txt`是绝对路径，而`InputParser/bin/test.txt`，或是`./InputParser/bin/test.txt`相对路径。您可以在 wikipedia 上找到有关路径的更多详细信息[（查看类 Unix）](https://en.wikipedia.org/wiki/Path_%28computing%29)

现在，要找出 eclipse 运行程序的目录，您可能需要添加

```
System.out.println(System.getProperty("user.dir")); 
```

- 在您的程序中，正如 Alex 所指出的那样-

编辑：更改命令以获取当前目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:44:32.657

Eclipse 通常以设置为 的项目目录运行`user.dir`，即执行的基本目录。所以如果绝对路径是：

```
/Users/yv/Documents/Eclipse-workspace/InputParser/bin/test.txt 
```

那么相对路径将是：

```
bin/test.txt 
```

`user.dir`您可以通过从 Java 的系统属性中获取属性来仔细检查工作目录。有关 Java 系统属性的更多信息，[请查看文档](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:40:00.187

将项目根目录添加到您的类路径并用于`Class.getResource()`检查是否存在并`Class.getResourceAsStream()`读取文件的内容。无论您的文件是在文件系统中还是在 jar 中，这都是一样的。

# ruby-on-rails - 从自定义 SessionController 中检索设计错误

> ID：12789784
> 
> 赞同：0
> 
> 时间：2012-10-08T21:32:34.020
> 
> 标签：ruby-on-rails, authentication, devise

我制作了自己的 SessionController，它扩展了 Devise::SessionsController。这样，它可以根据用户是在浏览器中还是使用移动设备来响应 HTML、JSON 和 XML。

如果格式是HTML，我就打电话`super`，一切正常。如果是 JSON/XML，我希望能够在登录失败时显示错误以及 401 状态代码。现在我有：

```
respond_to do |format|
    format.html { super }

    if current_user
        ...
    else
       format.json { render :json => { :status => 401 } }
    end
end 
```

我想添加`:errors => ???`到该哈希。但是如何从 Devise 获取错误列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:07:35.603

通常，表单错误存储在`object.errors`（用于视图中）。`resource`根据设计核心 SessionsController 中的代码，您似乎可以从对象中提取错误

# java - 休眠：如果父层是新的，则不将更新级联到子层

> ID：12789785
> 
> 赞同：0
> 
> 时间：2012-10-08T21:32:36.590
> 
> 标签：java, hibernate

我有一个带有这样的休眠映射的类：...

基本上我用一些 StreamRef 传播一个新的（或旧的）磁带，然后点击

```
 session.saveOrUpdate(tapeInstance); 
```

如果磁带是旧的或新的。我添加的流引用都是新的（但如果我从数据库中检索磁带，我希望能够轻松访问它的流引用）。

不幸的是，我似乎不能像我想要的那样“懒惰”——我想要的行为基本上是“如果磁带是新的，那么这意味着它的所有流都是新的，所以永远不要查看如果您可以对它们进行更新，请始终插入它们”，但是“如果磁带是旧的，请更新它，删除其旧的流引用，然后将新的流添加到其中——它们将永远是新的/唯一的，所以只需添加它们”所以基本上，*不要*级联更新，而是级联保存。这可能吗？

我通过设置 cascade="merge, delete, lock, refresh, evict, replicate, delete-orphan" （基本上，它缺少保存更新），然后手动删除所有旧流，然后手动添加每个流， 一次一个。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:54:46.633

通过设置 cascade="AllDeleteOrphan"，可以通过列表进行插入和删除。为了避免更新，我们需要为主键正确指定一个未保存的值。NHibernate 然后将使用主键的值来确定它是新实例还是现有实例。注意：通过使用“AllDeleteOrphan”级联选项，如果一个tapeInstance 被删除，所有关联的streamref 都会被删除。

# javascript - jQuery更改功能无法正常工作

> ID：12789786
> 
> 赞同：1
> 
> 时间：2012-10-08T21:32:42.083
> 
> 标签：javascript, jquery, jquery-selectors

我有相同的 id，命名两个 html 选择。如果我更改第一个 html 选择，那么它可以正常工作，但如果我更改第二个 html 选择，那么它就不起作用。请有人能指出我在这里可能做错了什么吗？非常感谢。这是我的代码：

```
<html>
<head>
<title>the title</title>
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
   <script type="text/javascript" language="javascript">
  $(document).ready(function() {
      $("#name").change(function(){
          $.post(
             "data.php",
             $("#testform").serialize(),
                 function(data) {
                $('#stage1').html(data);
             }
          );
          var str = $("#testform").serialize();
          $("#stage2").text(str);
      });
   });
   </script>
</head>
<body>
   <div id="stage1" style="background-color:blue; color: white">
          STAGE - 1
   </div>

<form id="testform">
 <table>
 <tr>
 <td><p>Fruit:</p></td>
 <td>
     <select id="name" name="name[]">
         <option>Apple</option>
         <option>Mango</option>
         <option>Orange</option>
         <option>Banana</option>
     </select>
 </td>
</tr>
 <tr>
 <td><p>Fruit:</p></td>
 <td>
     <select id="name" name="name[]">
         <option>Apple</option>
         <option>Mango</option>
         <option>Orange</option>
         <option>Banana</option>
     </select>
 </td>
</tr>
</table>
</form>
</body>
</html> 
```

php代码：

```
<?php
$fruit=$_REQUEST["name"];
$n = count($fruit);

for($i=0;$i<$n; $i++)
{
    echo $fruit[$i]."<br/>";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:34:14.150

您`id`的 's 应该是唯一的 - 使用`ID`选择器将始终/仅让您获得它遇到的第一个元素 ID

您可以使用

```
$('select[name="name[]"]') 
```

得到你的选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:34:27.520

那是因为

```
$("#name")  // id selector 
```

只会选择具有 id 的第一个元素并忽略第二个元素..

您页面上的 ID 应该是唯一的。尝试用类替换它，它应该可以正常工作。

`$(".name") ;`// 将你的 id="name" 改为 class="name"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:35:08.117

该`id`属性是唯一的，只能用于选择一个元素。一旦找到第一个，就不会再存在了。

如果要将多个元素组合在一起，请使用`class`属性，该属性可以使用`.classname`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T23:29:44.067

1.  ID 应该是唯一的。原因是 javascript 只找到它遇到的第一个带有“id”的元素。

    ```
    $('#name') 
    ```

    上面的选择器代码将选择 id 为“name”的第一个元素。

2.  类用于此目的。Javascript 将使用它遇到的“类”创建一个元素数组。

    ```
    $('.name') 
    ```

    上面的选择器代码将选择所有类为“名称”的元素。这可能是您问题的可能解决方案。也就是说，如果您在这两种情况下更改了两个选择元素中的任何一个，都会触发“更改”事件。

# android - 连接到打开的 WiFi

> ID：12789788
> 
> 赞同：15
> 
> 时间：2012-10-08T21:32:47.093
> 
> 标签：android, encryption, wifi

我使用下面的代码连接到加密网络。但是，如果网络不安全并且我将密钥留空（“”），那么它就会失败。有谁知道如何解决这个问题？此外，是否可以使用 ssid / bssid 检测网络是否打开？还是我必须使用过滤器进行扫描？

```
public void connectToSSID(final String ssid, final String key) {
    Log.i("wifimaster", "connection to "+ssid);

    WifiConfiguration wc = new WifiConfiguration();
    wc.SSID = "\""+ssid+"\""; //IMPORTANT! This should be in Quotes!!  
    wc.priority = 40;
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN); 
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
    wc.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);

    wc.preSharedKey = "\""+key+"\"";
    wc.wepKeys[0] = "\""+key+"\""; //This is the WEP Password
    wc.wepTxKeyIndex = 0;

    wc.preSharedKey = "\""+key+"\"";

    int res = wifiManager.addNetwork(wc);
    Log.d("WifiPreference", "add Network returned " + res );
    boolean es = wifiManager.saveConfiguration();
    Log.d("WifiPreference", "saveConfiguration returned " + es );
    boolean b = wifiManager.enableNetwork(res, true);   
    Log.d("WifiPreference", "enableNetwork returned " + b );

    if(b)
        Toast.makeText(c, c.getString(R.string.connected), Toast.LENGTH_SHORT).show();
    else
        Toast.makeText(c, c.getString(R.string.unconnected), Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T06:36:37.300

利用

```
wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); 
```

只有，它会工作。

删除所有其他分配`wc`，不必将它们用于连接到网络的简单任务。你不是`creating`一个网络，你正在连接一个网络`existing`。

有关完整解决方案，请查看此链接：[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically) 它有你需要知道的一切。

# javascript - 使用 Chrome 将空参数传递给 javascript 函数

> ID：12789795
> 
> 赞同：0
> 
> 时间：2012-10-08T21:34:03.140
> 
> 标签：javascript, function, google-chrome, parameters

我有以下标记：

```
<a href="#" onclick="boom('fus', '', 'dah')">Pow</a> 
```

还有一个 JavaScript 函数：

```
function boom(first, second, third) {
    // Do bad stuff with parameters
} 
```

在 IE8 中，这很好用。在 Chrome 中，onclick 方法甚至不会触发。注意标记中的空参数。如果该参数已填写，Chrome 将不会有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-12T07:36:41.733

如果没有传递任何值或未定义，则仅使用默认值初始化形式参数。

所以你应该试试这个

```
<a href="#" onclick="boom('fus', undefined, 'dah')">Pow</a> 
```

# r - 如何修复在R中作为数值返回的字符值？

> ID：12789797
> 
> 赞同：2
> 
> 时间：2012-10-08T21:34:11.707
> 
> 标签：r

我是一个新的 R 用户，在尝试重命名列中的某些记录时遇到了一些困难。

我的数据有名为 classcode 和 fish_tl 的列，等等。Classcode 是一个字符值，fish_tl 是数字。

当 classcode='OCAL' 且 fish_tl<20 时，我需要重命名 classcode 的值，使其现在为“OCALYOY”。我不想更改类代码中的任何其他记录。

我正在运行以下代码：

```
data$classcode<-ifelse(data$classcode=='OCAL'& data$fish_tl<20,
                              'OCALYOY',data$classcode) 
```

我的问题似乎与“其他”方面有关：代码运行良好，并按预期返回“OCALYOY”，但类代码的其他值现在已转换为数字（尽管当我查看该字段的模式时，它仍然作为“字符”返回）。

我究竟做错了什么？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:41:33.597

尽管您指出 R 认为这是性格问题，但您可能会陷入因素与性格问题。无论如何，环绕`as.character()`您的代码似乎可以解决我的问题：

```
> ifelse(data$classcode=='OCAL'& data$fish_tl<20,
+        'OCALYOY',as.character(data$classcode))
#-----
 [1] "BFRE"    "BFRE"    "BFRE"    "HARG"    "OCALYOY" "OYT"     "OYT"     "PFUR"   
 [9] "SPAU"    "BFRE"    "OCALYOY" "OCAL" 
```

如果不是这样，您能否通过将输出添加到您的问题而不是文本表示来使您的问题[可重现？](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)`dput()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:39:43.043

您可以制作 else 部分`as.character(data$classcode)`。`ifelse`关于参数的类有一些奇怪的语义，它把你的因素变成了它的底层数字表示。 `as.character`将其保留为字符值。

# ruby-on-rails - 使用 Rails 4 界面困难进行敏捷 Web 开发

> ID：12789808
> 
> 赞同：1
> 
> 时间：2012-10-08T21:35:10.357
> 
> 标签：ruby-on-rails

我一直在按照书中的示例制作在线目录，并且在第 8 章任务 C：目录显示中遇到了一些令人沮丧的困难。

我已经按照说明输入了样式表的代码，但与书中显示的内容相比，它产生了略微倾斜的结果。虽然本质上是次要的和美学的，但它对我的信心有点冲击，并且在尝试继续阅读这本书时有点刺激。

![截屏](../Images/dac16e320cf3a6847f830cf62edf24e3.png)

如您所见，边框看起来有点混乱，顶部的图像覆盖了标题文本。

我一次又一次地通过代码，但似乎无法找出我哪里出错了。谁能给我一些线索？

来自 application.css.scss 的代码（我假设它在这里）

```
#banner {
    background: #9c9;
    padding: 10px;
    border-bottom: 2px solid;
    font: small-caps 40px/40px "Times New Roman", serif;
    color: #282;
    text-align: center;

    img {
        float: left;
    }
}

#notice {
    color: #000 !important;
    border: 2px solid red;
    padding: 1em;
    margin-bottom: 2em;
    background-color: #f0f0f0;
    font: bold smaller sans-serif;
}

#columns {
     background: #141;

     #main {
        margin-left: 17em;
        padding: 1em;
        background: white;
    }

    #side {
        float: left;
        padding: 1em 2em;
        width: 13em;
        background: #141;

        ul {
            padding: 0;

            li {
                list-style: none;

                a {
                    colour: #bfb;
                    font-size: small;
                }
            }
        }

    } 
```

唯一给我提示的是在崇高的文本 2 中，所有以哈希开头（#banner、#notice 等）都是绿色的，但 #main 不是出于某种原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T00:44:13.707

我也一样。我不确定如何解决这个问题，因为#banner.img 应该向左浮动。在检查编译后的 application.css 时，我发现以下内容：

```
#banner {
  background: #9c9;
  padding: 10px;
  border-bottom: 2px solid;
  font: small-caps 40px/40px "Times New Roman", serif;
  color: #282;
  text-align: center; }
  #banner img {
    float: left; } 
```

如上所示，我们有一个正确关闭的“#banner img {”起始块，并且#banner 块在与“text-align：center;”位于同一行之前正确关闭。即使我在 #banner 和 #banner img 块之后消除了所有其他 css 元素，问题仍然存在。

以我有限的 CSS 知识，我能很快弄清楚的唯一正确定位是从 #banner 块中删除 text-align: center ，并添加一些填充，或者设置 #banner 的左边距。 img 到 -400px 什么的。它不是很优雅也不是完美的功能（调整大小搞砸了）。

# ruby - Heroku 所说的 app[web.1] 是什么意思？

> ID：12789811
> 
> 赞同：0
> 
> 时间：2012-10-08T21:35:18.070
> 
> 标签：ruby, heroku, rack, thin

`app[web.1]`Heroku是什么意思`<main>:48`？

我的崩溃仅发生在 Heroku 而不是我的计算机上，我正在尝试确定导致崩溃的精确行。这些是日志

```
2012-10-08T21:31:49+00:00 app[web.1]: <main>:48:in `method_missing': wrong number of arguments (1 for 2) (ArgumentError)
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:137:in `start'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:104:in `block in initialize'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/bin/rackup:4:in `<top (required)>'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `load'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:104:in `==='
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `<main>'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:102:in `initialize'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:9:in `new'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/thin.rb:9:in `run'
2012-10-08T21:31:49+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:102:in `each'
2012-10-08T21:31:50+00:00 heroku[web.1]: Process exited with status 1
2012-10-08T21:31:50+00:00 heroku[web.1]: State changed from starting to crashed
2012-10-08T21:31:52+00:00 heroku[router]: Error H10 (App crashed) -> GET placeboxy.herokuapp.com/ dyno= queue= wait= service= status=503 bytes= 
```

崩溃是在我的代码中还是在 Web 服务器 Thin 或其他地方？

**编辑**我更改了 Procfile 以在 Heroku 上运行服务器独角兽并且崩溃停止。彪马也没有错误。有任何想法吗？瘦有错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T23:00:20.937

这`app[web.1]`是 heroku 添加到日志的标签，用于标记哪个进程正在发出日志，因为所有日志都收集在一个中心位置，您仍然可以过滤单个进程并解析进程日志。

该`<main>:48:`部分表示由于异常而停止执行的文件/行。在这种情况下 ( `<main>`)，它是正在运行的主脚本。你可能不会在那里找到你的错误。您必须在回溯中搜索失败的代码部分，寻找不是外部库或核心 ruby​​ 的东西。您显示的回溯没有帮助，通常堆栈跟踪中的错误要低得多。

# php - 如何优化此 RewriteEngine 代码？

> ID：12789814
> 
> 赞同：1
> 
> 时间：2012-10-08T21:35:33.243
> 
> 标签：php, mod-rewrite

我有服务器过载，服务器管理员说这个问题是由 htaccess 文件引起的

这是代码：

```
RewriteEngine On
RewriteBase /here/
RewriteRule ^top/?$ index.php?mode=top [QSA]
RewriteRule ^top/video/?$ index.php?mode=top&cat=vids [QSA]
RewriteRule ^top/picture/?$ /index.php?mode=top&cat=pics [QSA]

RewriteRule ^random$ index.php?mode=random [QSA]
RewriteRule ^random/video/?$ index.php?mode=random&cat=vids [QSA]
RewriteRule ^random/picture/?$ index.php?mode=random&cat=pics [QSA]

RewriteRule ^new/?$ index.php [QSA]
RewriteRule ^new/video/?$ index.php?mode=&cat=vids [QSA]
RewriteRule ^new/picture/?$ index.php?mode=&cat=pics [QSA]

RewriteRule ^video/([0-9]+)_(.*)$ item.php?cat=vids&id=$1 [QSA]
RewriteRule ^picture/([0-9]+)_(.*)$ item.php?cat=pics&id=$1 [QSA]
ErrorDocument 404 /item.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:39:28.970

减少重写，把路由完全放到PHP里面处理404——

例子：

```
RewriteBase /my_blog

RewriteCond /var/www/my_blog/%{REQUEST_FILENAME} !-f
RewriteCond /var/www/my_blog/%{REQUEST_FILENAME} !-d
RewriteRule ^router.php [PT] 
```

在`router.php`这样做`var_dump($_SERVER);`时，您会看到请求的 URL 是什么以及您可以处理什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:27:41.693

这会让你走到一半：

```
RewriteEngine On
RewriteBase /here/
RewriteRule ^(top|random|new)/?$ index.php?mode=$1 [QSA]
RewriteRule ^(top|random|new)/(video|picture)/?$ index.php?mode=$1&cat=$2 [QSA]
RewriteRule ^(video|picture)/([0-9]+)_(.*)$ item.php?cat=$1&id=$2 [QSA]
ErrorDocument 404 /item.php 
```

这不会给你完全相同的结果——你`cat`要么是`video`or `picture`，要么不是`vids`or `pics`，所以你必须改变你的脚本才能让它工作。

如果你不能完成这项工作，你可以使用这个稍微简化的版本：

```
RewriteEngine On
RewriteBase /here/
RewriteRule ^(top|random|new)/?$ index.php?mode=$1 [QSA]
RewriteRule ^top/video/?$ index.php?mode=top&cat=vids [QSA]
RewriteRule ^top/picture/?$ /index.php?mode=top&cat=pics [QSA]

RewriteRule ^random/video/?$ index.php?mode=random&cat=vids [QSA]
RewriteRule ^random/picture/?$ index.php?mode=random&cat=pics [QSA]

RewriteRule ^new/video/?$ index.php?mode=&cat=vids [QSA]
RewriteRule ^new/picture/?$ index.php?mode=&cat=pics [QSA]

RewriteRule ^video/([0-9]+)_(.*)$ item.php?cat=vids&id=$1 [QSA]
RewriteRule ^picture/([0-9]+)_(.*)$ item.php?cat=pics&id=$1 [QSA]
ErrorDocument 404 /item.php 
```

# javascript - CSS/JavaScript 裁剪图像

> ID：12789818
> 
> 赞同：15
> 
> 时间：2012-10-08T21:36:13.967
> 
> 标签：javascript, html, css, image

如何使用 css 或 javascript 定位要裁剪的图像上的特定位置，无需大脚本的简单方法，

之前的图片：
![在此处输入图像描述](../Images/a74e24ccbad88b2f7a41c569908b16ed.png)

我希望查看下图中突出显示的位置：

![在此处输入图像描述](../Images/fb17b7dd4b2e582be79303d8c658e589.png)

虽然不是确切的突出显示，只是试图解释它不必从最顶部开始，我想选择特定的图像比例， **并且在裁剪后如何调整大小？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-08T21:41:15.733

一种方法是使用`overflow: hidden`将图像作为子元素的元素，它本身绝对定位在原始元素的上下文中。结果是，`overflow: hidden`元素的大小掩盖了图像。

这是该方法的示例：

HTML

```
<div id='crop-the-cats'>
    <img src='http://i.stack.imgur.com/ArS4Q.jpg'>
</div>​ 
```

CSS

```
#crop-the-cats {
    width: 100px;
    height: 80px;
    overflow:hidden;   
    position:relative;
}

#crop-the-cats img {
    position: absolute;
    top: -60px;
    left: -70px;
} 
```

*​见[http://jsfiddle.net/Da9CT/](http://jsfiddle.net/Da9CT/)*

另一种方法是使用图像作为图像的背景并使用重新定位它`background-position`：

HTML

```
<div id='crop-the-cats'></div>​ 
```

CSS

```
#crop-the-cats {
    width: 100px;
    height: 80px;
    background-image: url(http://i.stack.imgur.com/ArS4Q.jpg);
    background-position: -50px -60px;
} 
```

*​见[http://jsfiddle.net/Da9CT/2/](http://jsfiddle.net/Da9CT/2/)*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T21:41:12.580

您不能使用 javascript / css 裁剪图像，但可以将其放置在隐藏溢出的元素内：http: [//jsbin.com/ebenem/1/edit](http://jsbin.com/ebenem/1/edit)

让我知道这是否有帮助！

# python - python中三组的交集？

> ID：12789820
> 
> 赞同：7
> 
> 时间：2012-10-08T21:36:20.907
> 
> 标签：python, intersection, set, set-intersection

目前我被困在试图找到三组的交集。现在这些集合实际上是我正在转换成集合的列表，然后试图找到它们的交集。

这是我到目前为止所拥有的：

```
for list1 in masterlist:
    list1 = thingList1
for list2 in masterlist:
    list2 = thingList2
for list3 in masterlist:
    list3 = thingList3

d3 = [set(thingList1), set(thingList2), set(thingList3)] 
setmatches c = set.intersection(*map(set,d3)) 
print setmatches 
```

我得到

```
set([]) 
Script terminated. 
```

我知道有一种更简单更好的方法可以做到这一点，但我找不到...

*编辑*

好的，这就是我现在所拥有的。

```
setList=()
setList2=()
setList3=()

for list1 in masterlist:
    setList=list1
    for list2 in masterlist:
        setList2=list2
        for list3 in masterlist:
            setList3=list3

setmatches=set(setList) & set(setList2) & set(setList3)
print setmatches 
```

仍然没有给我我正在寻找的东西：这是我确保在每个列表中的一个匹配项。它给了我看起来像是所有集合的添加。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-08T21:38:25.230

我认为您只是在寻找：

```
set(thingList1) & set(thingList2) & set(thingList3) 
```

与号是 Python（以及其他一些语言）中的交集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T21:37:40.973

```
set1 & set2 & set3 
```

应该工作......至少我认为

```
>>> set((1,2,3)) & set((2,3,4)) & set((3,4,5))
set([3]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T21:50:19.443

```
set.intersection(*map(set,d3)) 
```

*实际上会*起作用，但因为`d3`已经包含你可以做的集合：

```
set.intersection(*d3) 
```

而且，事实上，只有第一个需要是 a `set`- 其他可以是任何可迭代的，并且`intersection`会自行设置它们。

您遇到的问题似乎不在此代码中 - 相反，

```
for list1 in masterlist:
    list1 = thingList1 
```

实际上不会将任何东西放入`thingList1`. 如果不看外观就很难分辨`masterlist`，但您可能想要类似的东西：

```
for list1 in masterlist:
   thingList1[:] = list1 
```

`print`在你做交叉点之前你的三个列表，以确保它们包含你所期望的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T21:39:01.290

你需要这样的东西：

```
frozenset(list1) & frozenset(list2) & frozenset(list1) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T21:41:49.763

你说的是一组列表？

```
In [1]: mylist = [ [1, 2, 3, 4], [3, 4, 5, 6, 7], [2, 3, 4, 5, 6] ]

In [2]: result = set(mylist[0])

In [3]: for item in mylist:
   ...:     result = result.intersection(item)
   ...:     
   ...:     

In [4]: result
Out[4]: set([3, 4]) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-27T18:22:20.837

这应该可以解决问题：

```
reduce(lambda x,y: x&y, mysetlist) 
```

# php - PHP邮件可能会被垃圾邮件过滤掉？

> ID：12789821
> 
> 赞同：2
> 
> 时间：2012-10-08T21:36:20.410
> 
> 标签：php

我正在创建一家小公司，并希望在我的客户注册我的服务以激活他们的帐户后向他们发送电子邮件。我目前正在使用 PHP 的 mail() 函数，但是我担心我的电子邮件会被垃圾邮件过滤器过滤掉。有没有更好的方法来解决这个问题？

```
$email = 'XZY Client Email address @ somedomain.com';

$emailSubject = "Welcome to XYZ Service!";

$to = $email;
$subject .= "".$emailSubject."";
$headers .= "From: no-reply@XYZService.com\r\n" .
 "X-Mailer: php";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$message = "<html><body>";
$message .= "Welcome to XYZ Service! \n Activate your account by clicking the following link: link...";

mail($to, $subject, $message, $headers); 
```

有没有办法对这些电子邮件进行身份验证，以便我的客户知道它们来自我的实际服务？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:44:35.557

我不确定这是否是您想要的，但您可以设置一个邮件服务器来处理您的所有电子邮件。

尝试使用该邮件服务器发送电子邮件，看看它们是否仍然被过滤。

顺便说一句，在 *nix 系统上设置邮件服务器是免费的，值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:39:17.857

您可以尝试让一些主要的邮政主管（AOL、Gmail、Hotmail 等）将您的邮件服务器列入白名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T03:14:06.800

我有一个简单的街机网站，我高中的人都在使用它，很长一段时间以来我一直在使用你展示的方法。我没有查看我的代码来验证它们是否相同，但它们看起来相当接近，而且我的代码可以与 gmail 和我遇到的所有其他知名服务一起使用！

请记住，一些托管公司限制了每分钟可以发送的 PHP 邮件数量。我的每分钟只允许 9 个，我知道我在运行测试邮件发送时意外被暂停了几次，哈哈。

# operating-system - 以下是仅限用户还是仅限操作系统的说明？

> ID：12789824
> 
> 赞同：-1
> 
> 时间：2012-10-08T21:36:39.913
> 
> 标签：operating-system

我的作业中有这些选项。我会解释我的原因，我希望有人可以批评他们？

**指出以下 CPU 指令是用户专用指令还是 O/S 专用指令或两者兼而有之？**

1.  执行停止 CPU 执行的“睡眠”指令

    > 仅限用户，因为我只见过程序员写 sleep

2.  用新的内存地址加载“程序计数器”PC 寄存器

    > 我认为这只是O / S。

3.  读取磁盘控制器寄存器

    > 仅限操作系统。

4.  产生中断的“陷阱”

    > 据我了解`trap`，通常是用户程序错误，并且由于 O/S 是软件应用程序，所以可能两者都有

5.  将警报超时值加载到时钟寄存器中

    > 仅操作系统

6.  读取处理器状态字 PSW 寄存器

    > 仅限操作系统。

7.  加载内存下限寄存器

    > 仅操作系统

8.  添加两个内存位置的内容

    > 两个都。O/S 也需要做计算。

我真的不明白如何区分用户和 O/S 特定指令。它们本质上都是“用户”程序。

有人可以验证这些答案，告诉我为什么我错了，以及如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:55:17.470

> 我真的不明白如何区分用户和 O/S 特定指令。它们本质上都是“用户”程序。

不同之处在于：你是为了让这件事发生而开始了一项任务，还是它自己发生了？

您是否启动了从硬盘驱动器读取的任务，或者您是否只是指示操作系统这样做？（在大多数情况下，所有设备访问都是操作系统指令）

有时教授想让你说“读取硬盘驱动器是用户启动的”，但“操作系统的抢先式多任务处理始终是操作系统启动的”或“用户操作可能会在等待设备完成响应和操作系统时保持有限状态在抢占式多任务操作系统中返回控制"

* * *

这些是我解释答案的方式，但如果你在课程作业中找不到这些答案，那么采用我的答案对你没有任何帮助。请注意，我在每个之后都做了一个简短的介绍来解释我为什么选择这些东西。我不是你的教授，无法知道他/她的意图，所以请确保你能理解我的回答。此外，在 ASM 中编程有助于回答其中一些问题......

1.  执行停止 CPU 执行的“睡眠”指令

    > 操作系统。Sleep 实际上只是一个计数器，表示跳过一个或多个周期的执行，并且通常由 API 调用建模。这可以允许调度程序访问延迟重新加载被抢占的任务，直到多轮之后。再一次，许多非常基本的平台甚至需要一个 NOP 循环计数器才能接近模拟睡眠命令。

2.  用新的内存地址加载“程序计数器”PC 寄存器

    > 操作系统。程序计数器寄存器旨在供系统使用以跟踪程序的当前执行，并且在多进程抢占期间可用于保存程序的当前执行点。

3.  读取磁盘控制器寄存器

    > 操作系统。一般而言，用户命令不与磁盘子系统交互，尽管在旧系统上*可以*访问它们，通常是通过直接寄存器访问。在更现代的系统中，磁盘只能由操作系统访问，并且只能由用户通过 API 访问。

4.  产生中断的“陷阱”

    > 用户，操作系统。这是当我们生成请求让 O/S 为我们处理情况时，我们将控制权交给内部内核。它还可能导致某些东西返回故障状态。

5.  将警报超时值加载到时钟寄存器中

    > 操作系统。这些计时器通常被认为具有系统级访问权限，因为它们用于监视系统的其余部分。通常会在支持这种保护的 CPU 中受到保护（例如那些支持环级执行预防的 CPU）。

6.  读取处理器状态字 PSW 寄存器

    > 用户，操作系统。值得注意的是，PSW 寄存器仅受系统级控制。在极少数情况下，人们可能会发现一种系统允许用户读取一个、两个或仅一些 PSW 寄存器。由于这些是程序执行的状态字段，因此通常不需要用户可读。

7.  加载内存下限寄存器

    > 用户，操作系统。所有内存寄存器分配都是通过 CPU 命令完成的，这些命令直接从加载到 CPU 寄存器中的二进制可执行文件接收。没有任何限制（除了在参与的处理器中更改执行环级别），这些限制特别防止在应用程序级别发生。某些设备交互可能会或可能不会被允许，并且寄存器通常是设备在旧硬件上的交互方式。请注意，基本内存地址可能不是`0`，并且 O/S 可能会专门拦截内存调用以对应用程序进行沙箱处理。

8.  添加两个内存位置的内容

    > 用户，操作系统。这是算法设计的基本要求，通常是设计到 CPU 单元中的第一个也是最基本的命令之一。

# php - 无法使用 PHP 打印 MySQL 查询的结果

> ID：12789826
> 
> 赞同：0
> 
> 时间：2012-10-08T21:36:56.657
> 
> 标签：php, mysql, echo

我有以下 MySQL 查询

```
$jokerQuery = mysql_query("SELECT `Joker sport`,
        COUNT(`Joker sport`) AS jokerCount
        FROM Profiles
        WHERE `CompetitorID` = 5
        GROUP BY `Joker sport`
        ORDER BY COUNT(`Joker sport`) DESC
        LIMIT 1
    "); 
```

在 phpMyAdmin 中返回以下结果

```
Joker sport | jokerCount
8           | 8 
```

我认为下面的 php 会显示结果，但它不起作用。我应该写什么来回显结果？

```
$jokerResult = mysql_fetch_array($jokerQuery);
echo $jokerResult['Joker sport'];
echo $jokerResult['jokerCount']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:42:46.403

试试这个，在[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)`MYSQL_ASSOC`中添加为 const ：

```
$jokerResult = mysql_fetch_array($jokerQuery, MYSQL_ASSOC);
echo $jokerResult['Joker sport'];
echo $jokerResult['jokerCount']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:50:59.090

你也可以试试：

```
$jokerResult = mysql_fetch_array($jokerQuery, MYSQL_ASSOC);
print_r($jokerResult); 
```

查看列名。

# asp.net - 在 GridView Row 上注册 SelectedIndexChanged 事件

> ID：12789827
> 
> 赞同：1
> 
> 时间：2012-10-08T21:36:59.250
> 
> 标签：asp.net, gridview, postback

我正在为 ASP.NET GridView 中的每一行注册一个回发事件。

```
protected void gvLRR_RowDataBound(object sender, GridViewRowEventArgs e) {
  if (e.Row.RowType == DataControlRowType.DataRow) {

    if (cs == null)
      cs = Page.ClientScript;

    e.Row.Attributes.Add("onclick", 
      cs.GetPostBackEventReference((GridView)sender, "Select$" + e.Row.RowIndex.ToString()));
  }
} 
```

用户单击行时调用的事件是 GridView gvLRR 的 SelectedIndexChanged。

**问题：** 只要我将页面指令 EnableEventValidation 设置为 false，所有这些都可以正常工作，但是如果我不将其设置为 false，那么当用户单击 GridView 中的一行时，页面就会爆炸。但是，我认为这有点 hack，因为当单击 GridView 行时，我不应该仅仅为了让回发事件工作而禁用事件验证。那么有没有更好的方法来做到这一点？我可以以某种方式注册回发事件以进行行点击并以某种方式设法仍然启用事件验证吗？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:48:26.740

在网上搜索时，我发现了这个...[单击gridview上的行并触发回发c#](http://forums.asp.net/t/1666327.aspx/1?click%20row%20on%20gridview%20and%20trigger%20postback%20c%20)

HTH :)

# bash - 使用 bash 代码中的选项

> ID：12789828
> 
> 赞同：0
> 
> 时间：2012-10-08T21:37:00.603
> 
> 标签：bash, shell, getopt, getopt-long, getopts

> **可能重复：**
> [在 bash shell 脚本中使用 getopts 来获取长短命令行选项](https://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options)

例如，我试图弄清楚如何使用像 -e/--email -h/--help 这样的标志。

**更新：** 当前示例：

```
while getopts ":ec:h" OptionArgument; do
case $OptionArgument in

        e ) S1=${OPTARG};;
        c ) S2=${OPTARG};;
        h ) usage;;
        \?) usage;;
        * ) usage;;
esac
done 
```

但是，如果我留空，它什么也不做。如果我添加 -h 它仍然运行并且不会显示使用情况。

**更新2**

```
while [ $1 ]; do
        case $1 in
                '-h' | '--help' | '?' )
                        usage
                        exit
                        ;;
                '--conf' | '-c' )

                        ;;
                '--email' | '-e' )
                        EMAIL=$1
                        ;;
                * )
                        usage
                        exit
                        ;;
        esac
        shift
done 
```

-h/--help 有效，但其他一切都失败并显示使用情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:59:10.243

如果您想要长的 GNU 选项**和**短的选项，请参阅此脚本以在您的脚本[http://stchaz.free.fr/getopts_long.sh](http://stchaz.free.fr/getopts_long.sh)和示例中获取源代码：

例子 ：

```
#!/bin/bash
# ( long_option ) 0 or no_argument,
# 1 or required_argument, 2 or optional_argument).

Help() {
cat<<HELP
Usage :
    $0 [ --install-modules <liste des modules> ] [-h|--help]
HELP
    exit 0
}

. /PATH/TO/getopts_long.sh

OPTLIND=1
while getopts_long :h opt \
    install-modules 1 \
    help 0 "" "$@"
do
    case "$opt" in
        install-modules)
            echo $OPTLARG
        ;;
        h|help)
            Help; exit 0
        ;;
        :)
           printf >&2 '%s: %s\n' "${0##*/}" "$OPTLERR"
           Help
           exit 1
        ;;
    esac
done
shift "$(($OPTLIND - 1))" 
```

# c# - 如何在 C# 控制台应用程序中进行 telnet

> ID：12789830
> 
> 赞同：1
> 
> 时间：2012-10-08T21:37:11.437
> 
> 标签：c#, console-application

在 C# 控制台应用程序中需要执行 telnet 实用程序并知道所需端口是否打开

```
 var ping = new Ping();
        var rply = ping.Send("192.168.1.117");
        if (rply.Status == IPStatus.Success)
        {
            Console.WriteLine("up");
            Console.WriteLine("Press any key to continue");
            Console.ReadKey(true);

          }
        else
        {
            Console.WriteLine("down");
            Console.WriteLine("Press any key to continue");
            Console.ReadKey(true); 
```

我正在使用上面的代码来 ping，但是对于 telnet 和端口我应该怎么做，以便在控制台应用程序中它应该执行 telnet 实用程序并让用户知道所需的端口是打开的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T21:40:39.397

一般来说，服务器管理员不喜欢你连接然后丢弃（查看端口是否打开的唯一真正方法）。但是，如果你想这样做，你可以这样做：

```
TcpClient tc = null;
try
{
    tc = new TcpClient("192.168.1.117", 23);
    // If we get here, port is open
} 
catch(SocketException se) 
{
    // If we get here, port is not open, or host is not reachable
}
finally
{
   if (tc != null)
   {
      tc.Close(); 
   }
} 
```

# android - 从 Activity 的片段中查找列表视图

> ID：12789833
> 
> 赞同：1
> 
> 时间：2012-10-08T21:37:16.370
> 
> 标签：android, tabs, actionbarsherlock, fragment

在我的应用程序中，我使用带有标签导航的 SherlockActionBar。在扩展 SherlockFragmentActivity 的活动 MyFragmentActivity 中，我添加了 3 个带有片段的选项卡

```
 mTabsAdapter.addTab(
            bar.newTab().setText(getString(R.string.filmtab)),
            FragmentFilm.class, null);
    mTabsAdapter.addTab(
            bar.newTab()
                    .setText(getString(R.string.cinematab)),
            FragmentCinema.class, null);
    mTabsAdapter.addTab(
            bar.newTab()
                    .setText(getString(R.string.dintornitab)),
            FragmentPdi.class, null); 
```

FragmentPdi 类具有以下代码：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{

    View view = inflater.inflate(R.layout.tab_pdi_info, container, false);

    return view;
} 
```

布局是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
            android:id="@+id/list_places"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" > 
    </ListView>  

</RelativeLayout> 
```

在 MyFragmentActivity 我想找到以这种方式填充它的列表视图：

```
final ListView elencoPlaces = (ListView)findViewById(R.id.list_places); 
```

……

但我有`NullPointerException`！

为什么？？

在另一个片段（FragmentFilm 和 FragmentCinema）中，我有其他视图，例如 textview，没有这个问题！

请帮我！谢谢你。

PS这是在片段中动态填充视图的正确方法，还是我必须在片段类中填充视图？如果第二个我如何将变量从活动传递到片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:25:52.163

如果您在布局文件中只有一个列表视图，请不要费心覆盖 oncreateview。默认布局会给你那么多。然后你可以使用内置在 ListFragment 中的方法——比如 getListView() 和 setListAdapter()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:27:11.490

好的，但我不明白为什么我有另一个片段 FragmentCinema 我有这个 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:paddingTop="10dip" android:id="@+id/otherCinemas" android:layout_width="fill_parent" android:layout_height="wrap_content"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <LinearLayout android:orientation="horizontal" android:id="@+id/plotSeparatorOtherCin" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_below="@id/txtProgrammation">
        <ImageView android:layout_gravity="center_vertical" android:background="@drawable/palm_divider_line" android:layout_width="20.0dip" android:layout_height="wrap_content" android:layout_marginRight="5.0dip" />
        <TextView android:layout_gravity="center_vertical" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/altricinema" android:textStyle="bold" />
         <ImageView android:id="@+id/showOtherCinemas" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" 
          android:src="@drawable/ic_action_freccia_cinema"
          />
       <ImageView android:layout_gravity="center_vertical" android:background="@drawable/palm_divider_line" android:layout_width="fill_parent" android:layout_height="wrap_content" /> 
    </LinearLayout>

    <ListView
        android:id="@+id/listOtherCinemas"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_below="@id/plotSeparatorOtherCin"
        android:visibility="gone" >
    </ListView>

</RelativeLayout> 
```

和这个类代码：

```
public class FragmentCinema extends SherlockFragment 
```

{

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.tab_cinema_info, container, false);

    return view;
} 
```

}

当我使用 findViewbyId 最终 ListView CinemasOther = (ListView)findViewById(R.id.listOtherCinemas); 有用！但是在 FragmentPdi 中不起作用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:18:42.740

如果你想在 ListFragments 中使用 ListView，你的 ListView 必须有 id `android:id="@+id/android:list`"!

# java - 有时在计划任务中没有任何内容打印到 servlet 的输出流

> ID：12789835
> 
> 赞同：3
> 
> 时间：2012-10-08T21:37:20.520
> 
> 标签：java, servlets, scheduling

我需要限制某些外部服务的连接速率（在我的 servlet 中），我决定尝试一下 ScheduledExecutorService。调度本身似乎运行得很好，但输出只是偶尔打印 - 在大多数情况下没有输出任何内容。为什么会发生这种情况？我使用 Tomcat 7 作为测试服务器。

```
int waitingtimeinmilliseconds = 5000;

ScheduledExecutorService scheduledExecutorService = Executors.newSingleThreadScheduledExecutor();

ScheduledFuture scheduledFuture = scheduledExecutorService.schedule() {

    public void run() {

        Fetcher fetcher = new Fetcher(loginname, password);
        List<Item> items = fetcher.fetchItems();
        // do something with the results

        //ServletOutputStream
        out.print("teststring" + items.size());

    }

}, waitingtimeinmilliseconds, TimeUnit.MILLISECONDS);
scheduledExecutorService.shutdown(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:45:17.773

您会发现非常详尽的描述是什么导致了您的问题：[HttpServletResponse 似乎定期过早发送](https://stackoverflow.com/questions/9316904)（另请检查：[在 servlet 中启动一个新线程](https://stackoverflow.com/questions/10330104)）。

基本上，您不能使用外部线程写入 servlet 输出。一旦你离开`doGet()`/ `doPost()`，servlet 容器会假定你已经完成并在将输出刷新到客户端后丢弃它。但是由于您正在异步写入流，因此*有时*输出会通过，而其他时候会被丢弃。

如果您希望您的速率限制非常可扩展，请考虑使用`async`servlet（从 3.0 开始）。如果你只是想限制一些客户端，[`RateLimiter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/RateLimiter.html)from [guava](/questions/tagged/guava "显示标记为“番石榴”的问题")会为你工作¹。

^(1 - 请参阅RateLimiter -在我的博客上[发现 Google Guava 。](http://nurkiewicz.blogspot.no/2012/09/ratelimiter-discovering-google-guava.html))

# c# - 与字符串数组连接的 Where 子句

> ID：12789837
> 
> 赞同：5
> 
> 时间：2012-10-08T21:37:32.510
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, linq-to-entities

我想知道是否有一种方法可以使用 int 数组创建连接的 WHERE 子句。我需要得到整个数组组合的结果。我可以做类似的事情：

```
public ViewResult Results(int? programId, int? programYear, int? programTypeId, string toDate, string fromDate, int?[] programTypeIdList, int?[] programIdList)
{
    surveyResponseRepository.Get().Any(x => x.ProgramId == programIdList);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:43:23.713

使用[`Contains`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.contains.aspx)：

```
surveyResponseRepository.Get().Any(x => programIdList.Contains(x.ProgramId)); 
```

尽管这会告诉您任何结果是否符合该标准。

我怀疑你想使用`Where`而不是`Any`：

```
surveyResponseRepository.Get().Where(x => programIdList.Contains(x.ProgramId)); 
```

另外，你为什么要使用一个可以为空`int`的数组？如果您试图使参数成为可选参数，只需将其保留为常规`int`s 数组并检查是否为空：

```
public ViewResult Results(int? programId, int? programYear, int? programTypeId, string toDate, string fromDate, int[] programTypeIdList, int[] programIdList)
{
    return surveyResponseRepository.Get()
        .Where(x => programIdList == NULL 
                    || programIdList.Contains(x.ProgramId));

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:42:55.933

你可以这样做：

```
public ViewResult Results(int? programId, int? programYear, int? programTypeId, string toDate, string fromDate, int?[] programTypeIdList, int?[] programIdList) 
{
     surveyResponseRepository.Get().Where(x => programIdList.HasValue && programIdList.Value.Contains(x.ProgramId)); 
} 
```

# haskell - 使用 wl-pprint 的不可分组的换行符

> ID：12789845
> 
> 赞同：2
> 
> 时间：2012-10-08T21:38:05.360
> 
> 标签：haskell, pretty-print

我正在为一种简单的空白敏感语言编写漂亮的打印机。

比起 Wadler 库，我更喜欢 Leijen 漂亮的打印机库，但是 Leijen 库在我的领域有一个问题：我插入的任何换行符都可能被`group`构造覆盖，这可能会压缩任何行，这可能会改变语义的输出。

我认为我不能在 wl-pprint 中实现不可分组的行（尽管我很想错）。

稍微看一下 wl-pprint-extras 包，我认为即使是暴露的内部接口也不允许我创建一条不会被`group`.

我只需要依靠我从未使用过的事实`group`，还是我有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:00:07.870

你确实需要避免`group`，是的。该库旨在根据您指定的输出宽度促进包装或不包装。

根据您正在实现的语言的语法，您还应该小心使用它们的`softline`and`softbreak`和`</>`and运算符。`<//>`我没有理由看到你不能使用`<$>`and`<$$>`代替。

`sep`, `fillSep`,`cat`和`fillCat`全部`group`直接或间接使用（并且具有您想要避免的不确定的语义/与宽度相关的换行符）。但是，鉴于您的目的，我认为您不需要它们：

使用`vsep`or`hsep`代替`sep`or `fillSep`。
使用`hcat`or`vcat`代替`cat`or `fillCat`。

你可以使用像

```
import Text.PrettyPrint.Leijen hiding (group,softline,softbreak,
                                      (</>),(<//>),
                                      sep,fillSep,cat,fillCat) 
```

确保您不调用这些函数。

我想不出一种方法来确保您使用的函数不会在某个地方调用 group ，但我认为这些是要避免的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:45:26.070

鉴于您希望能够进行分组，并且还需要能够确保某些行没有被插入，我们为什么不使用库设计者在数据类型中而不是在代码中编码语义这一事实。这个绝妙的决定使其非常可重新设计。

数据类型使用构造函数对`Doc`换行符进行编码`Line :: Bool -> Doc`。Bool 表示删除行时是否省略空格。（当它们在那里时，行缩进。）让我们替换 Bool：

```
data LineBehaviour = OmitSpace | AddSpace | Keep

data Doc = ...
    ...
    Line !LineBehaviour   -- not Bool any more 
```

语义即数据设计的美妙之处在于，如果我们将这些`Bool`数据替换为`LineBehaviour`数据，那么没有使用它但未更改地传递它的函数就不需要编辑。函数查看 Bool 因更改而中断的内容 - 我们将通过更改旧语义所在的数据类型来准确重写需要更改以支持新语义的代码部分。在我们完成所有我们应该做的更改之前，程序不会编译，而我们不需要接触不依赖于换行语义的代码行。万岁！

例如，`renderPretty`使用`Line`构造函数，但在模式`Line _`中，所以我们可以不理会它。

首先，我们需要`Line True`用`Line OmitSpace`和`Line False`替换`Line AddSpace`，

```
line = Line AddSpace

linebreak = Line OmitSpace 
```

但也许我们应该添加我们自己的

```
hardline :: Doc
hardline = Line Keep 
```

我们也许可以使用使用它的二元运算符

```
infixr 5 <->
(<->) :: Doc -> Doc -> Doc
x <-> y = x <> hardline <> y 
```

和垂直分隔符的等价物，我想不出比非常垂直的分隔符更好的名字：

```
vvsep,vvcat :: [Doc] -> Doc
vvsep = fold (<->)
vvcat = fold (<->) 
```

行的实际删除发生在`group`函数中。一切都可以保持不变，除了：

```
flatten (Line break)    = if break then Empty else Text 1 " " 
```

应该改为

```
flatten (Line OmitSpace)    = Empty
flatten (Line AddSpace)     = Text 1 " "
flatten (Line Keep)         = Line Keep 
```

就是这样：我找不到其他可以改变的地方！

# objective-c - Objective-C中下划线的意思是什么

> ID：12789846
> 
> 赞同：1
> 
> 时间：2012-10-08T21:38:17.773
> 
> 标签：objective-c, ios

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)
> [为什么在 iOS 中使用前导下划线重命名合成属性？](https://stackoverflow.com/questions/5466496/why-rename-synthesized-properties-in-ios-with-leading-underscores)

我是 iOS 编程的新手。

我总是在别人的代码中看到这样的说法

*@synthesize textNoteOrLink = _textNoteOrLink;*

无论如何，下划线的含义是什么？在这种情况下，我们可以只使用“textNoteOrLink”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:44:22.323

是的，你可以写`textNoteOrLink`。

许多开发人员在实例变量名称的开头加上下划线（@synthesizing 属性实际上为该属性添加了一个 ivar）以避免意外使用 ivars 而不是属性，绕过 setter 和 getter。

恕我直言，这是一件好事，但如果您不喜欢它，请不要使用它，但请注意不要混淆属性和 ivars。

# php - Assetic/Twig：在模板编译过程中抛出异常（无法找到文件）

> ID：12789852
> 
> 赞同：2
> 
> 时间：2012-10-08T21:38:40.677
> 
> 标签：php, linux, symfony, twig, assetic

我正在将 Symfony2 项目移动到开发服务器，并且树枝无法找到样式表。它在我的本地机器（MacBook Pro OS X）上找到样式表。

以下作品：

```
php app/console assest:install
php app/console assetic:dump
php app/console cache:clear 
```

我正在使用 Assetic 提供我的资产并使用以下格式：

```
{# app/Resources/views/Foo.html.twig #}
{% block stylesheets%}
   {%  stylesheets
      filter='lessphp,cssrewrite'
      '@FooBundle/Resources/public/css/foo/Bar.less'
      '@FooBundle/Resources/public/js/twitter-bootstrap/less/bootstrap.less'
      '@FooBundle/Resources/public/js/twitter-bootstrap/less/responsive.less'
      output= 'css/main.css'
    %}

    <link href="{{ asset_url }}" 
       type='text/css' rel="stylesheet" media='screen'/>

    {% endstylesheets %}
{% endblock %} 
```

但是当我在服务器上加载它时，我得到一个错误：

```
An exception has been thrown during the compilation of a template 
("Unable to find file "@FooBundle/Resources/public/css/foo/Bar.less".")
in "::Foo.html.twig". 
```

该过程在第一个资产处停止。服务器是运行 PHP 5.4 的 Linux x63 EL5 机器。

是什么导致了这个异常？为什么找不到样式表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:16:00.323

有一个字母大小写的情况，我们有一个小写字母，而应该有一个大写字母。

因此，对于示例，`foo`应该是`Foo`：

```
@FooBundle/Resources/public/css/foo/Bar.less 
```

本来应该：

```
@FooBundle/Resources/public/css/Foo/Bar.less 
```

# java - 使用 Array.newInstance() 创建一个新的泛型类型数组

> ID：12789854
> 
> 赞同：4
> 
> 时间：2012-10-08T21:38:49.877
> 
> 标签：java, mergesort

作为实践，我正在尝试实现合并排序算法，但在尝试实例化泛型类型数组时很快就卡住了。我不完全确定我的计划是否会成功，但现在有趣的部分（或令人沮丧，取决于你何时问我）是 merge() 方法中的第二行。newInstance() 方法需要知道它应该作为什么类启动，但即使 arr1.getClass() 编译得非常好，它在运行时也不会工作。

```
public void mergeSort(T[] arr) {

    T[] merged = merge(Arrays.copyOfRange(arr, 0, arr.length/2), Arrays.copyOfRange(arr, arr.length/2+1, arr.length-1));

}

@SuppressWarnings({"unchecked"})
public T[] merge(T[] arr1, T[] arr2) {
    // A new array of type T that will contain a merged version of arr1 and arr2
    T[] merged = (T[]) Array.newInstance(arr1.getClass(), arr1.length+arr2.length);

    int i1 = 0, i2 = 0;
    for (int i = 0; i < arr1.length + arr2.length; i++) {
        if (arr1[i1].compareTo(arr2[i2]) < 0) {
            merged[i] = arr1[i1];
            i1++;
        } else {
            merged[i] = arr2[i2];
            i2++;
        }
    }

    return merged;
} 
```

错误信息是：

```
Exception in thread "main" java.lang.ClassCastException: [[Ljava.lang.String; cannot be cast to [Ljava.lang.Comparable;
    at sort.SortingAndSearching.merge(SortingAndSearching.java:94)
    at sort.SortingAndSearching.mergeSort(SortingAndSearching.java:84)
    at sort.SortingAndSearching.main(SortingAndSearching.java:19) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T21:43:14.103

认为我看到了问题...当您这样做时`Array.newInstance(...)`，它会采用组件类型（在您的情况下，您希望它是字符串）。但是，您正在处理数组类（arr1 是 String[] 类型，而您正在处理`arr1.getClass()`）。相反，做

```
arr1.getClass().getComponentType() 
```

让`String`课堂脱离`String[]`

每个[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int%5B%5D%29)：

```
 static Object newInstance(Class<?> componentType, int[] dimensions) 
```

> componentType - 表示新数组的**组件类型**的 Class 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:51:51.003

我复制并粘贴了您提供的代码，但它甚至无法编译。在做了一些修复之后，我来到了这个：

```
public class Test {

  public <T extends Comparable> void mergeSort(T[] arr) {
    T[] merged = merge(Arrays.copyOfRange(arr, 0, arr.length / 2), Arrays.copyOfRange(arr, arr.length / 2 + 1, arr.length - 1));
  }

  public <T extends Comparable> T[] merge(T[] arr1, T[] arr2) {
    // A new array of type T that will contain a merged version of arr1 and arr2
    T[] merged = (T[]) Array.newInstance(arr1.getClass(), arr1.length + arr2.length);

    int i1 = 0, i2 = 0;
    for(int i = 0; i < arr1.length + arr2.length; i++) {
      if(arr1[i1].compareTo(arr2[i2]) < 0) {
        merged[i] = arr1[i1];
        i1++;
      } else {
        merged[i] = arr2[i2];
        i2++;
      }
    }
    return merged;
  }
} 
```

由于您使用的是该`compareTo`方法，因此您必须告诉`T`实现该接口的编译器。

# ant - 使用 ant 阐明 REST API 文档生成

> ID：12789863
> 
> 赞同：2
> 
> 时间：2012-10-08T21:39:21.920
> 
> 标签：ant, enunciate

我正在尝试集成 Enunicate 以生成我们现有 API 的 REST 文档。

我收到警告“警告：未知工件 'docs'。工件将不会被导出。” 蚂蚁任务执行时。

我的设置中是否缺少某些内容？

enunicate.xml 是：

```
<?xml version="1.0"?>
<enunciate label="Empath REST api" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://enunciate.codehaus.org/schemas/enunciate-1.23.xsd">
<modules>
    <!-- Docs -->
    <docs splashPackage="com.parc.perceptum.common" title="Empath REST API"
        copyright="PARC">        <download name="License" file="LICENSE.txt" description="The license file governing the use of this API." />
    </docs> 
</modules>
</enunciate> 
```

相关的蚂蚁片段是：

```
<path id="enunciate.classpath"> 
    <fileset refid="project.libs"/> 
    <fileset dir="${java.home}"> 
            <include name="lib/tools.jar"/> 
    </fileset> 
    <pathelement path="${servlet-lib}" />
    <pathelement path="${mysql-lib}" />
</path>

<taskdef name="enunciate" classname="org.codehaus.enunciate.main.EnunciateTask"> 
    <classpath refid="enunciate.classpath"/>
</taskdef>

<target name="new-rest-api-doc">
    <enunciate basedir="src/com/parc/perceptum/">
      <include name="**/*.java"/>
      <classpath refid="enunciate.classpath"/>
      <export artifactId="docs" destination="restapi"/>
    </enunciate>
</target> 
```

谢谢

金星

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:38:21.217

看起来您的类路径中可能没有发音库。因此，Enunciate 不会选择它的任何模块（包括提供“文档”工件的 docs 模块）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T15:20:27.580

artifactId 的值应该是 'war.file'

# iphone - iPhone 5 屏幕调整大小未调整

> ID：12789869
> 
> 赞同：1
> 
> 时间：2012-10-08T21:39:54.187
> 
> 标签：iphone, ios, xcode

我已经阅读了一些帖子，并且能够在我的大部分应用程序中实现，但是主屏幕没有完全显示在 iphone 5 上。底部有大约 1 英寸的空间，我似乎无法修复.

我附上了一些图片来澄清任何问题。

@2x 图像正在正确加载，似乎视图被限制在较小的尺寸上，这在模拟器上显示得很好。

有什么想法吗？

```
#import "Mainscreencantroller.h"
#import "OBShapedButton.h"
@interface Mainscreencantroller ()

@end

@implementation Mainscreencantroller
@synthesize delegate;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

选择自动调整大小的所有内容（中间箭头和外部箭头）

我注意到这里的长度和宽度并没有像所有其他 xib 文件一样变灰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:43:48.807

我刚刚完成了对 iPhone 5 支持的更新。我的很多背景图像都是中心对齐的，我需要将它们更改为顶部对齐，以便在更大的屏幕尺寸下正常工作。

# mysql - MySQL中的布尔值和布尔值有什么区别？

> ID：12789870
> 
> 赞同：10
> 
> 时间：2012-10-08T21:39:55.553
> 
> 标签：mysql

我正在学习 MySQL，当我想添加一个布尔列时，我看到有两个选项：bool 和 boolean。它们之间有什么区别吗？感谢您的时间。

编辑：我应该在 bool 类型的长度中写什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T21:42:16.337

BOOL 和 BOOLEAN 都是 TINYINT(1) 的同义词（[来源](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)）。换句话说，没有区别。

# ruby-on-rails-3 - 使用属性名称访问我的载波模型对象

> ID：12789873
> 
> 赞同：0
> 
> 时间：2012-10-08T21:40:06.157
> 
> 标签：ruby-on-rails-3, haml, carrierwave

我正在尝试放置带有部分渲染的文件链接，如下所示：

```
#Main haml file
= render :partial => 'file_upload', :locals => {:f => f, :file_download => 'residence_cert'}
#Inside the partial
%a{:href => @postulant_info[file_download]} 
```

但这只是使用文件名而不是文件的完整路径创建链接。然后意识到这`@postulant_info[file_download]`只是给我一个带有文件名的字符串，而不是carrierwave对象

```
-logger.debug @postulant_info.residence_cert #this is returning my carrierwave object -> 'DocumentUploader'
-logger.debug @postulant_info['residence_cert'] #but this one is just returning a String, the DB record with the file name 
```

一种解决方案可以将 url 像本地一样放在渲染中，`= render :partial => 'file_upload', :locals => {:f => f, :file_download => 'residence_cert', :url => @postulant_info.residence_cert.url}`但我认为当您在部分模板中拥有属性名称时，“应该”是不必要的。
任何想法将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:46:51.130

我非常不确定您的问题到底是什么，以及您要达到的目标，但是如果您想输出文件的链接，那么在您的部分中

```
%a{:href => @postulant_info.residence_cert.url} 
```

足够。`@postulant_info.residence_cert`会给你一个上传器的实例（`DocumentUploader`），该`#url`方法返回上传文件的完整 url

顺便说一句，你应该避免在你的局部变量中使用实例变量，局部变量应该使用的唯一变量是它已经被给定了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:52:32.170

最后我可以通过以下方式实现它：

```
%a{:href => @postulant_info.send(file_download)} 
```

# ruby - Ruby/Selenium WebDriver 2：快速查找新元素

> ID：12789874
> 
> 赞同：0
> 
> 时间：2012-10-08T21:40:05.997
> 
> 标签：ruby, selenium-webdriver

**环境：**

*   红宝石 1.8.7
*   硒网络驱动程序 2
*   Ubuntu 12.04 桌面
*   火狐 13.0.1

**问题：**

我有 div 标签被用作选择。您单击 div 并显示一个下拉样式窗口，其中包含更多 div 标记作为选择选项。现在我可以进入并创建一种方法来为每个“div as select”单击这些选项中的每一个，但我真正想要的是编写一段代码来单击我知道的 div，然后确定哪些 div现在显示并在单击后启用。然后我可以随机点击其中一个选项。

所以我当前的代码是这样的：

```
allDivs = brwsr.find_elements(:tag_name, 'div')
origDivs = allDivs
allDivs.each do |e|
  if ... # Get the div I want
    e.click
    newDivs = brwsr.find_elements(:tag_name, 'div')
    origDivs.each do |orig|
      newDivs.delete(orig)
    end
    # Do something with remaining new divs here
  end
end 
```

我遇到的主要问题是这非常慢。我目前有大约 200 个 div 可以旋转，这个方法需要几分钟才能完成。通常，我不会期望通过几百个数组元素旋转需要很长时间。但确实如此。

为了缩短我尝试过滤 allDivs 和 newDivs 的时间，方法是旋转它们一次并删除任何未显示和启用的内容。

所以我目前陷入了一个非常缓慢的解决方案。我不介意这种“发现新 div”的速度有点慢，因为它也会导致脚本开发时间更短。但是，花费几分钟来完成太长了。

**第一个问题：** Selenium 能否仅返回在 find_elements 调用周围使用一些额外的 API 字符串显示和启用的元素？

**第二个问题：**是否有人有更好的方法来查找新的 div 元素而不必遍历元素数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:50:56.077

如果您可以发布一些您尝试自动化的 DOM 的示例 HTML，那将非常有帮助。

话虽如此，ruby webdriver 绑定确实支持通过链接查找元素。因此，给定一些像这样的html：

```
<div class="outer">
  <div class="one">
    <div class="alpha">A</div>
    <div class="beta">B</div>
    <div class="gamma">C</div>
  </div>
  <div class="two">
    <div class="alpha">A</div>
    <div class="beta">B</div>
    <div class="gamma">C</div>
  </div>
  <div class="three">
    <div class="alpha">A</div>
    <div class="beta">B</div>
    <div class="gamma">C</div>
  </div>
</div> 
```

您可以编写这样的代码来在第二组 div（“two”）中找到“B”div：

```
group = brwsr.find_element(:class => "two")
desired_item = group.find_element(:class => "beta") 
```

或者，更简单的是通过 ruby​​ 的链接功能：

```
desired_item = brwsr.find_element(:class => "two").find_element(:class => "beta") 
```

我最喜欢的另一种方法是通过 CSS 选择器选择元素，它使用易于阅读的语法更快地选择元素：

```
desired_item = brwsr.find_element(:css => "div.two div.beta") 
```

# makefile - make：ifneq 中的错误：单词意外（预期为“）”）

> ID：12789876
> 
> 赞同：2
> 
> 时间：2012-10-08T21:40:08.943
> 
> 标签：makefile

我想为 LaTeX 文档创建一个 makefile（在这个最小的例子中）。当没有文件“makeindexstyle.ist”时，应该创建它（通过运行make makeindexstyle.ist）并用于格式化索引。规则 `%.pdf`反映了这一点。但是，它还没有工作，我收到错误

```
ifneq (, ) {
/bin/sh: 1: Syntax error: word unexpected (expecting ")")
make: *** [master.pdf] Error 2 
```

怎么了？

```
Parts from Makefile:

MASTER = master
TEX = slave

TEXI = texi2dvi -p

all: $(MASTER:=.pdf)

%.pdf: %.tex $(TEX:=.tex)
    ifneq ($(wildcard makeindexstyle.ist), ) { # if makeindexstyle.ist exists, compile and build index
        $(TEXI) $<
        make makeindexstyle.ist
        makeindex -c -s makeindexstyle.ist $(MASTER:=.idx)
    }
    endif
    $(TEXI) $<

makeindexstyle.ist:
    @(echo "...") > makeindexstyle.ist 
```

更新：我试图尽可能简单地查看错误来自哪里。除其他外（如引用），我试过这个：

```
%.pdf: %.tex $(TEX:=.tex)
    exist := $(wildcard "absolute-path-to-makeindexstyle.ist")
    ifneq ($strip $(exist)),)
             echo "foo"
    endif
    $(TEXI) $< 
```

但结果是

```
exists := 
make: exists: Command not found
make: *** [book.pdf] Error 127 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:09:26.253

同时，我可以在 shell 端解决它：

```
IDX = "makeindexstyle.ist"
%.pdf: %.tex $(TEX:=.tex)
    @if test -f $(IDX); then \
        echo "foo"; \
    fi
    $(TEXI) $< 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T22:01:27.543

这听起来像是[如何检查 Makefile 中是否存在文件？](https://stackoverflow.com/questions/5553352/check-if-a-file-exists)或[如何通过测试文件是否存在来有条件地设置 Makefile 变量](https://stackoverflow.com/questions/1077676/how-to-conditional-set-up-a-makefile-variable-by-testing-if-a-file-exists)。

尝试

```
ifneq ($(wildcard makeindexstyle.ist),) 
```

没有空间。或者，抛开`""`争论？

# asp.net-web-api - 为什么一个类需要数据协定属性而另一个不需要

> ID：12789877
> 
> 赞同：0
> 
> 时间：2012-10-08T21:40:09.137
> 
> 标签：asp.net-web-api

我正在使用 .NET Web API，当然还返回序列化为 JSON 的类。到目前为止，我还没有为任何类使用 Data Contract 属性，但是对于下面的这个类，我这样做了，我不知道为什么。Intellitrace 只是说该类无法序列化并尝试添加 DataContract 属性。我会但想知道为什么。

```
public class Card : BaseGridVM
{

    private IEnumerable<Pc> _pcCards;
    private IEnumerable<Pt> _ptCards;
    private IEnumerable<MembershipCard> _membershipCards;

    public Grid.Result Pt
    {
        get { return GetPtCardGrid(); }
    }
    public Grid.Result Pc
    {
        get { return GetPcCardGrid(); }
    }
    public Grid.Result Membership
    {
        get { return GetMembershipCardGrid(); }
    }

    public Card(IEnumerable<Pc> pcCards, IEnumerable<Pt> ptCards, IEnumerable<MembershipCard> membershipCards)
    {
        _pcCards = pcCards;
        _ptCards = ptCards;
        _membershipCards = membershipCards;
    }

    private Grid.Result GetPtCardGrid()
    {
        var headers = new List<Grid.Header>
                          {
                              new Grid.Header() {label = "Card Name", width = 250},
                              new Grid.Header() {label = "Pts", width = 50},
                              new Grid.Header() {label = "Activation Date", width = 50}
                          };

        var rows = new List<Grid.Row>();
        foreach (var card in _ptCards)
        {
            var row = new Grid.Row
            {
                id = card.id,
                enabled = card.active.HasValue && (bool)card.active,
                cell = new string[3]
            };

            row.cell[0] = card.cardName;
            row.cell[1] = card.pts.HasValue ? card.pts.ToString() : "0";
            row.cell[2] = card.activationDate.HasValue ? card.activationDate.ToString() : "-";

            rows.Add(row);
        }

        return buildGrid(rows, headers, 1, 3);
    }

    private Grid.Result GetPcCardGrid()
    {
        var headers = new List<Grid.Header>
                          {
                              new Grid.Header() {label = "Offer Title", width = 200},
                              new Grid.Header() {label = "Pces Required", width = 70},
                              new Grid.Header() {label = "Activation Date", width = 50}
                          };

        var rows = new List<Grid.Row>();
        foreach (var card in _pcCards)
        {
            var row = new Grid.Row
            {
                id = card.id,
                enabled = card.active.HasValue && (bool)card.active,
                cell = new string[3]
            };

            row.cell[0] = card.cardName;
            row.cell[1] = card.pces.HasValue ? card.pces.ToString() : "0";
            row.cell[2] = card.creationDate.HasValue ? card.creationDate.ToString() : "-";

            rows.Add(row);
        }

        return buildGrid(rows, headers, 1, 3);
    }

    private Grid.Result GetMembershipCardGrid()
    {
        var headers = new List<Grid.Header>
                          {
                              new Grid.Header() {label = "Card Name", width = 200},
                              new Grid.Header() {label = "Members", width = 70}
                          };

        var rows = new List<Grid.Row>();
        foreach (var card in _membershipCards)
        {
            var row = new Grid.Row
            {
                id = card.id,
                enabled = card.active.HasValue && (bool)card.active,
                cell = new string[2]
            };

            row.cell[0] = card.cardName;
            row.cell[1] = card.membersCount.HasValue ? card.membersCount.ToString() : "0";

            rows.Add(row);
        }

        return buildGrid(rows, headers, 1, 3);
    }
} 
```

这是基础 GridVM

```
 public abstract class BaseGridVM
{
    protected static Grid.Result buildGrid(IEnumerable<Grid.Row> rows, IEnumerable<Grid.Header> headers, int page, int steps)
    {
        var row_array = rows.ToArray();
        var result = new Grid.Result
        {
            rows = row_array,
            page = page,
            records = row_array.Count(),
            steps = steps,
            headers = headers.ToArray()
        };
        return result;
    }
} 
```

这是另一个不需要数据合同的类

公共类仪表板VM：IDashboardVM {

```
 public IResults_Dashboard results { get; private set; }
    public Grid.Result topCompaniesGrid
    {
        get { return BuildTopCompanies(); }
    }
    public Grid.Result topAdsGrid
    {
        get { return BuildTopAds(); }
    }

    public DashboardVM(IResults_Dashboard results)
    {
        this.results = results;
    }
    private static Grid.Result buildGrid(IEnumerable<Grid.Row> rows, IEnumerable<Grid.Header> headers, int page, int steps)
    {
        var row_array = rows.ToArray();
        var result = new Grid.Result
                         {
                             rows = row_array,
                             page = page,
                             records = row_array.Count(),
                             steps = steps,
                             headers = headers.ToArray()
                         };
        return result;
    }

    private Grid.Result BuildTopCompanies()
    {
        var headers = new List<Grid.Header>
                          {
                              new Grid.Header() {label = "Company Name", width = 150, click = true},
                              new Grid.Header() {label = "Coupon Views", width = 50, click = true},
                              new Grid.Header() {label = "Coupon Clicks", width = 50},
                              new Grid.Header() {label = "Coupon Redemptions", width = 50},
                              new Grid.Header() {label = "Ad Views", width = 50, click = true},
                              new Grid.Header() {label = "Ad Clicks", width = 50},
                              new Grid.Header() {label = "Reward Cards", width = 50},
                              new Grid.Header() {label = "Fees", width = 50}
                          };

        var rows = new List<Grid.Row>();
        foreach (var company in results.companies)
        {
            var row = new Grid.Row {id = Convert.ToInt32(company.companyId), cell = new string[8]};

            row.cell[0] = company.companyName;
            row.cell[1] = company.couponViews.ToString();
            row.cell[2] = company.couponClicks.ToString();
            row.cell[3] = company.couponRedemptions.ToString();
            row.cell[4] = company.adViews.ToString();
            row.cell[5] = company.adClicks.ToString();
            row.cell[6] = company.rewardCards.ToString();
            row.cell[7] = company.revenue.ToString();

            rows.Add(row);
        }

        return buildGrid(rows, headers, 1, 3);
    }

    private Grid.Result BuildTopAds()
    {
        var headers = new List<Grid.Header>
                          {
                              new Grid.Header() {label = "Company Name", width = 150, click = true},
                              new Grid.Header() {label = "Ad Name", width = 150, click = true},
                              new Grid.Header() {label = "Views", width = 50},
                              new Grid.Header() {label = "Clicks", width = 50},
                              new Grid.Header() {label = "Fees", width = 50}
                          };

        var rows = new List<Grid.Row>();
        foreach (var ad in results.ads)
        {
            var row = new Grid.Row {id = Convert.ToInt32(ad.Id), cell = new string[5]};

            row.cell[0] = ad.companyName;
            row.cell[1] = ad.name;
            row.cell[2] = ad.views.ToString();
            row.cell[3] = ad.clicks.ToString();
            row.cell[4] = ad.fees.ToString();

            rows.Add(row);
        }

        return buildGrid(rows, headers, 1, 3);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:19:59.660

我通过添加无参数构造函数并向属性添加 set 方法解决了这个问题，而无需 Data Contract。

我从中收集到的是，序列化程序使用无参数构造函数创建一个新对象，然后将公共值复制过来。我这样说是因为当我没有将 set 方法添加到属性时，它给了我一个空对象。一旦我添加了 set 方法，值就会在对象中返回。

我认为它可以更复杂一点。我不知道为什么它会创建另一个对象而不是使用我给出的对象，但那是另一个话题！

# php - 我正在调试的代码中的函数似乎没有考虑到 DST 的转换

> ID：12789879
> 
> 赞同：7
> 
> 时间：2012-10-08T21:40:28.700
> 
> 标签：php, mysql, calendar, dst

我正在调试一个会议室预订日历，该日历是由不再与我合作的人整理的。这是一场噩梦，因为它有很多问题，但我无法弄清楚究竟是什么导致了最后一个错误。日历会检查房间是否已经在特定时间被预订，并且他们没有显示在正确的时间预订的问题，但是如果有人在房间空出后一小时或更短的时间内尝试预订同一个房间移入或移出 DST，它显示房间仍被预订。例子：

*   用户看到房间已为 11 月 29 日上午 9 点至 10 点预订。
*   然后，用户尝试在 11 月 29 日上午 10:30 至下午 12:00 预订房间。
*   日历取消第二个请求并通知用户房间已被预订。

应该注意的是，在转换为 DST（11 月 4 日）之前的任何时候都不会发生这种情况。这是确定房间是否可用的函数：

```
 function calCheck($starttime, $endtime, $cal_name, $cat_id, $myDB, $myHost, $myUser, $myPass) {
    $timezone = 'America/Denver';
    date_default_timezone_set ($timezone);
    $dset = new DateTime($odate, new DateTimeZone($timezone));
    $dset2 = $dset->getOffset();

    //$starttime = $starttime + 1;
    //$endtime = $endtime  - 1;     
    $starttime = $starttime - $dset2 + 1;
    $endtime = $endtime - $dset2 - 1;
    $starttime = $starttime;
    $endtime = $endtime; 

    //echo $starttime .'</br>'. $endtime . '</br>';
    $db = new myDB($myDB, $myHost, $myUser, $myPass);
    $db->myDB_Connect();
    //echo 'calcheck</br>';
    $ck_query = 'SELECT * FROM vw_cal_chk 
                    WHERE (stime < '. $starttime . '  AND etime > ' . $starttime . ' ) and Calendar = "' . $cal_name . '" and cat_id = "' .$cat_id . '"
                    OR (stime < ' . $endtime . ' AND etime > ' . $endtime . ') and Calendar = "' . $cal_name . '" and cat_id = "' .$cat_id . '"
                    OR (stime >= '. $starttime . ' AND etime < ' . $endtime .') and Calendar = "' . $cal_name . '" and cat_id = "' .$cat_id . '"';
    $ck_result = $db->myQuery($ck_query);
    $num = mysql_num_rows($ck_result);  
    //echo $ck_query . '</br>' . $num;
    if ($num >> 0){
        $avail = 1;
    } else {
        $avail = 0;
    }
    return $avail;
} 
```

到目前为止，我所有的时间戳都是 UTC 格式，我注意到该`$odate`变量实际上从未在任何地方实例化，但我无法确定要传递什么值才能使偏移正常工作。如果我能找出它想要什么样的约会，我应该能够解决剩下的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:42:32.127

$odate 为 null，默认为现在为您提供当前偏移量。您想要的是设置计划时的偏移量，而不是此时的偏移量。看起来您的数据库日期是山区时间，并且您的 startdate 是 utc 并且您正在减去偏移量以返回山区（我认为您会添加偏移量而不是减法，所以我可能会颠倒过来，您可以查询你的数据库并弄清楚？）

无论如何，您应该使用 $startdate 而不是 now() 来计算偏移量，尝试将 $startdate 切换为 $odate，看看会发生什么。如果这不起作用，请尝试从 startdate 构建一个字符串，然后从该字符串生成一个新日期。如果没有其他输出该字符串应该让您清楚地了解 $startdate 是 UTC 还是山区

# php - 与 PHP 在 C 中的“爆炸”并行：使用分隔符将 char* 拆分为 char*

> ID：12789883
> 
> 赞同：2
> 
> 时间：2012-10-08T21:40:38.813
> 
> 标签：php, c, explode, strtok

> **可能重复：**
> [在 C 中使用分隔符拆分字符串](https://stackoverflow.com/questions/9210528/split-string-with-delimiters-in-c)

我正在寻找一种使用分隔符将 char* “分解[”](http://php.net/manual/en/function.explode.php)为其他 char* 的好方法。

我的分隔符将是`#`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T21:55:05.863

您可以`strtok`像 CrazyCasta 所说的那样使用，但他/她的代码是错误的。

```
char *tok;
char *src = malloc(strlen(srcStr) + 1);
memcpy(src, srcStr);

tok = strtok(src, "#");
if(tok == NULL)
{
    printf("no tokens found");
    free(src);
    return ???;
}
printf("%s ; ", tok);
while((tok = strtok(NULL, "#")))
    printf("%s ; ", tok);
printf("\n");
free(str); 
```

请注意，`strtok`必须第一次使用源指针调用，之后您必须使用`NULL`. 也`src`必须是可写的，因为`strtok`写入`\0`会终止找到的字符串。因此，根据您阅读字符串的方式（以及以后是否要使用它），您应该复制它。但正如我所说，这并不总是必要的。

编辑：

一个`explode`函数可能如下所示：

```
char *strdup(const char *src)
{
    char *tmp = malloc(strlen(src) + 1);
    if(tmp)
        strcpy(tmp, src);
    return tmp;
}

void explode(const char *src, const char *tokens, char ***list, size_t *len)
{   
    if(src == NULL || list == NULL || len == NULL)
        return;

    char *str, *copy, **_list = NULL, **tmp;
    *list = NULL;
    *len  = 0;

    copy = strdup(src);
    if(copy == NULL)
        return;

    str = strtok(copy, tokens);
    if(str == NULL)
        goto free_and_exit;

    _list = realloc(NULL, sizeof *_list);
    if(_list == NULL)
        goto free_and_exit;

    _list[*len] = strdup(str);
    if(_list[*len] == NULL)
        goto free_and_exit;
    (*len)++;

    while((str = strtok(NULL, tokens)))
    {   
        tmp = realloc(_list, (sizeof *_list) * (*len + 1));
        if(tmp == NULL)
            goto free_and_exit;

        _list = tmp;

        _list[*len] = strdup(str);
        if(_list[*len] == NULL)
            goto free_and_exit;
        (*len)++;
    }

free_and_exit:
    *list = _list;
    free(copy);
} 
```

那么你必须调用它：

```
char **list;
size_t i, len;
explode("this;is;a;string", ";", &list, &len);
for(i = 0; i < len; ++i)
    printf("%d: %s\n", i+1, list[i]);

/* free list */
for(i = 0; i < len; ++i)
    free(list[i]);
free(list); 
```

这是一个使用 valgrind 运行的示例：

```
valgrind ./a 
==18675== Memcheck, a memory error detector
==18675== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al. 
==18675== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==18675== Command: ./a 
==18675== 
1: this
2: is
3: a
4: string
==18675== 
==18675== HEAP SUMMARY:
==18675==     in use at exit: 0 bytes in 0 blocks
==18675==   total heap usage: 9 allocs, 9 frees, 114 bytes allocated
==18675== 
==18675== All heap blocks were freed -- no leaks are possible
==18675== 
==18675== For counts of detected and suppressed errors, rerun with: -v
==18675== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:44:38.100

通常这是[strtok](http://www.gnu.org/software/libc/manual/html_node/Finding-Tokens-in-a-String.html)函数的用途：

```
char* tok;
tok = strtok(srcStr, "#");

while(tok != NULL)
{
    // Do stuff with tok
    tok = strtok(NULL, "#");
} 
```

# c# - C# windows phone 7 in a Database：每个用户都有特定的数据表？

> ID：12789884
> 
> 赞同：0
> 
> 时间：2012-10-08T21:40:42.347
> 
> 标签：c#, database, linq, windows-phone-7

我在我的第一个使用数据库的 Windows Phone 7 应用程序中。我创建了一个包含 4 个表的数据库：

```
namespace database
{
public class AccountDataContext : DataContext
{
    public AccountDataContext(string connectionString)
        : base(connectionString)
    {
    }
    public Table<Account> Accounts
    {
        get
        {
            return this.GetTable<Account>();
        }
    }

    public Table<user> users
    {
        get
        {
            return this.GetTable<user>();
        }
    }

    public Table<link> links
    {
        get
        {
            return this.GetTable<link>();
        }
    }
    public Table<player> players
    {
        get
        {
            return this.GetTable<player>();
        }
    }
}
} 
```

我创建了一个登录页面，您可以在其中登录或注册新用户...

“问题”是每个注册和登录的用户都可以看到相同的数据。

我想知道如何拆分（或其他）数据库，以便表：帐户、链接和播放器将特定于添加到“用户”表中的每个用户。或者我应该为每个注册的新用户创建一个新数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T08:42:15.473

只需在每个表类（account.cs links.cs player.cs）中添加一个“用户 ID”字段。登录时，将用户ID（对应登录的用户）保存在数据库中，添加新帐户，链接或玩家信息时也只需添加与当前会话对应的“用户ID”

# .htaccess - HTAccess 仅对网站开放

> ID：12789886
> 
> 赞同：0
> 
> 时间：2012-10-08T21:40:50.693
> 
> 标签：.htaccess

为了保护我的网站，我在每个子目录中放置了空白 html 和一个 htaccess 文件，但我没有意识到拒绝所有访问也意味着拒绝来自网站本身的访问。当我尝试加载页面并进入图像文件夹时，服务器响应：

```
Failed to load resource: the server responded with a status of 403 (Forbidden) 
```

那么如何更改此 htaccess 代码：

```
order allow,deny
deny from all

Options All -Indexes 
```

拒绝访问网站*之外*的所有内容，这意味着网站本身可以访问自己的内容（图像、js、css），但外界没有人可以访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:09:41.210

您已经实现了既定目标，但显然这并不是您*真正*想要的。基本上，浏览您网站的*每个人都*来自外部并从您的服务器请求资产。当我`index.html`从您的服务器请求 或任何其他页面时，它不会按原样向我发送完整的包，其中包含所有页面资产，它只会向我发送包含`index.html`. 那时浏览器会解析并相应地处理它；当它遇到在您的服务器上有一个图像标签时`src`，它会触发对该资产的新请求，并希望您的服务器将其发回作为响应。[是的，我意识到这一切都被简化得可笑。]

由于您现在已经完成了设置，因此您拒绝访问从您的服务器请求任何资产的任何人和每个人，这就是您收到`403`响应的原因。所以无论你真正想做的是什么，都需要一种更专注的方法。我会试一试，猜猜你真正想要做的是防止人们热链接你的图片？

# php - 使用来自 2 个不同表的数据填充多选列表框

> ID：12789888
> 
> 赞同：2
> 
> 时间：2012-10-08T21:41:00.850
> 
> 标签：php

所以这就是我想要做的。我有一个包含公司列表的表格。我有另一个表，其中包含特定员工的公司列表。这是表格

**公司**
company_id
名称

**employees_companies**
empcomp_id
employee_id
company_id

目前我有一个列表框，其中填充了所有公司的列表。当用户设置新员工时，他们可以从列表框中选择一个或多个公司。提交表单后，我创建一个包含所有选定公司的数组，遍历它们并将新记录添加到 employees_companies 表中。这一切都很好。我遇到的问题是用户可以编辑这些公司的表单。首先，我用所有公司的列表填充列表框。接下来，我需要为该用户突出显示employees_companies 表中列出的公司。现在，无论查询中返回了多少条记录，都只会突出显示一条记录。

这是获取所有公司和员工公司列表的代码

```
// get list of all companies
mysql_select_db($database_freight, $freight);
$query_rsCompanyList = "SELECT * FROM companies ORDER BY scac ASC";
$rsCompanyList = mysql_query($query_rsCompanyList, $freight) or die(mysql_error());
$row_rsCompanyList = mysql_fetch_assoc($rsCompanyList);
$totalRows_rsCompanyList = mysql_num_rows($rsCompanyList);

// get employees companies
$colname_rsEmployeeCompanyList = "17";
if (isset($_GET['employee_id'])) {
  $colname_rsEmployeeCompanyList = $_GET['employee_id'];
}
mysql_select_db($database_freight, $freight);
$query_rsEmployeeCompanyList = sprintf("SELECT * FROM employees_companies WHERE employee_id = %s", GetSQLValueString($colname_rsEmployeeCompanyList, "int"));
$rsEmployeeCompanyList = mysql_query($query_rsEmployeeCompanyList, $freight) or die(mysql_error());
$row_rsEmployeeCompanyList = mysql_fetch_assoc($rsEmployeeCompanyList);
$totalRows_rsEmployeeCompanyList = mysql_num_rows($rsEmployeeCompanyList); 
```

这是表格

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>test</title>
</head>
<body>
<form id="frmAdd" name="frmAdd" method="post" action="test.php">
  <select name="company_id[]" size="4" multiple="multiple" id="company_id[]">
    <?php do { ?>
    <option value="<?php echo $row_rsCompanyList['company_id']?>"
    <?php
        do {
            if (!(strcmp($row_rsCompanyList['company_id'], $row_rsEmployeeCompanyList['company_id']))) {echo "selected=\"selected\"";}
        } while ($row_rsEmployeeCompanyList = mysql_fetch_assoc($rsEmployeeCompanyList)); ?>><?php echo $row_rsCompanyList['name']?></option>
    <?php
} while ($row_rsCompanyList = mysql_fetch_assoc($rsCompanyList));
  $rows = mysql_num_rows($rsCompanyList);
  if($rows > 0) {
      mysql_data_seek($rsCompanyList, 0);
      $row_rsCompanyList = mysql_fetch_assoc($rsCompanyList);
  }
?>
  </select>
  <input type="submit" name="button" id="button" value="Submit" />
</form>
</body>
</html> 
```

==================================================== ============================= 几乎明白了，但只有一个问题。公司名称未填充在列表框中。我注意到您的代码没有结束选项标记。我添加了它并输入了 $company_id 作为值，因此它使用 company_id 填充列表框，但我将如何回显公司名称。

这是我创建数组的地方

```
// get list of all companies
mysql_select_db($database_freight, $freight);
$query_rsCompanyList = "SELECT company_id, name FROM companies ORDER BY scac ASC";
$rsCompanyList = mysql_query($query_rsCompanyList, $freight) or die(mysql_error());

$all_company_ids = array();
while ($row_rsCompanyList = mysql_fetch_array($rsCompanyList)) {
  $all_company_ids[] = $row_rsCompanyList['compnay_id'];
}

// get list of all employees companies
$colname_rsEmployeeCompanyList = "17";
if (isset($_GET['employee_id'])) {
  $colname_rsEmployeeCompanyList = $_GET['employee_id'];
}
mysql_select_db($database_freight, $freight);
$query_rsEmployeeCompanyList = sprintf("SELECT company_id FROM employees_companies WHERE employee_id = %s", GetSQLValueString($colname_rsEmployeeCompanyList, "int"));
$rsEmployeeCompanyList = mysql_query($query_rsEmployeeCompanyList, $freight) or die(mysql_error());

$emp_company_ids = array();
while ($row_rsEmployeeCompanyList = mysql_fetch_array($rsEmployeeCompanyList)) {
  $emp_company_ids[] = $row_rsEmployeeCompanyList['compnay_id'];
} 
```

这是表单选项

```
<?php foreach($all_company_ids as $company_id): ?>
  <option value="<?php echo $company_id; ?>" <?php if(in_array($company_id, $emp_company_ids)) echo "selected=\"selected\""; ?>><?php echo $company_id; ?></option>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:16:44.417

我认为这就是您想要的：显示所有公司 ID 并仅突出显示属于员工的那些。
如果我是对的，这是一种更简单的方法：

```
<?php
$all_company_ids = array(); // You should populate this as you wish, but it's better not to do it in your form!
$emp_company_ids = array(); // Again get this items from the database!
?>

<select name="company_id[]" size="4" multiple="multiple" id="company_id[]">
<?php foreach($all_company_ids as $company_id): ?>
  <option value="<?php echo $company_id; ?>" <?php if(in_array($company_id, $emp_company_ids)) echo "selected=\"selected\""; ?>></option>
<?php endforeach; ?>
</select> 
```

请注意，我没有详细介绍如何获取所有公司 ID 或员工的公司 ID。

这个想法很简单：
你首先得到所有的公司 ID。然后你遍历它们并将每一个显示为一个`option`，如果该项目属于员工，你选择它！

我自己没有尝试过这段代码，但由于这个想法很简单，它应该可以正常工作。

**编辑** 对于公司名称，一种简单的方法是`$all_company_ids`用公司的`id`和`name`作为键填充，值对如下：

```
$all_companies = array();
while ($row_rsCompanyList = mysql_fetch_array($rsCompanyList)) {
  $all_companies[$row_rsCompanyList['compnay_id']] = $row_rsCompanyList['name'];
} 
```

然后你可以像这样显示名称：

```
<select name="company_id[]" size="4" multiple="multiple" id="company_id[]">
<?php foreach($all_companies as $company_id => $company_name): ?>
    <option value="<?php echo $company_id; ?>" <?php if(in_array($company_id, $emp_company_ids)) echo "selected=\"selected\""; ?>><?php echo $company_name ?></option>
<?php endforeach; ?>
</select> 
```

请注意，我将`$all_company_ids`变量重命名为`$all_companies`. 我也修复了选项标签。

# android - 在两个 ViewPager 内容之间切换

> ID：12789889
> 
> 赞同：0
> 
> 时间：2012-10-08T21:41:01.737
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager, android-support-library

在我的应用程序中，我在 ActionBar 中启用了下拉菜单。用户有两个元素可供选择。根据选择，我希望 ViewPager 显示来自不同 FragmentPagerAdapter 的不同内容。用户必须具有随时切换的能力。

我尝试在侦听器中设置两个不同的 PagerAdapters，但没有成功。寻呼机每次都会重新加载以前的片段。[此处](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view/7287121#7287121)和[此处](https://stackoverflow.com/questions/7369978/how-to-force-viewpager-to-re-instantiate-its-items)描述了类似的问题。但是，在我的方法中，我不想更改一个适配器的内容。我真的只想在两个单独的适配器之间切换。

这整件事对我来说似乎真的很混乱。是否有任何已知的解决方法，或者我的问题是否有替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T03:03:05.257

如果您的应用程序可能，我建议使用`FragmentStatePagerAdapter`而不是`FragmentPagerAdapter`. 每个适配器都应该能够存储单独的片段列表，并且在切换到另一个适配器时应该保持片段的保存状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:24:32.620

> 我尝试在侦听器中设置两个不同的 PagerAdapters，但没有成功。寻呼机每次都会重新加载以前的片段。

我假设您正在使用`FragmentPagerAdapter`or `FragmentStatePagerAdapter`。两者都通过标签名称将它们的片段存储在 中`FragmentManager`，因此这种切换方法将不起作用。

> 是否有任何已知的解决方法，或者我的问题是否有替代解决方案？

一种方法是 fork `FragmentPagerAdapter`or `FragmentStatePagerAdapter`，替换该`makeFragmentName()`方法以使用替代标记语法，并为您的两个之一使用修改后的适配器类。

# sql - 如何转换处理 OPENXML、WITH 和 BIGINT 的 T-SQL？

> ID：12789901
> 
> 赞同：2
> 
> 时间：2012-10-08T21:42:03.923
> 
> 标签：sql, tsql, azure-sql-database

我正在尝试将一个过程转换为在 SQL Azure 中使用。我首先收到一条错误消息，`OPENXML`说 SQL Azure 不支持它，然后我发现它可以替换为`nodes`.

但我不确定如何转换`WITH (Id BIGINT '.')`零件。我知道`WITH`创建一个子查询，但`'.'`这里在做什么？

```
CREATE Procedure [dbo].[DocsR]
    @ids    xml     -- <Ids><Id>1</Id><Id>2</Id></Ids>
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @IdsXml xml 
    exec sp_xml_preparedocument @IdsXml OUTPUT, @Ids

    SELECT
        DoctId,
        DocNm
    FROM
        Docs
    WHERE
        --DocId IN (SELECT Id FROM OPENXML(@IdsXml, '/Ids/Id', 2) WITH (Id BIGINT '.'))
          DocId IN (SELECT Id FROM @IdsXml.nodes('/Ids/Id') WITH (Id BIGINT '.'))
END
GO 
```

错误：

```
Incorrect syntax near the keyword 'with'. If this statement is a common 
table expression, an xmlnamespaces clause or a change tracking context clause, 
the previous statement must be terminated with a semicolon. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:52:51.713

尝试以下操作：

```
 SELECT
        DoctId,
        DocNm
    FROM
        Docs
    WHERE
          DocId IN (SELECT Id = node.value('.', 'INT') 
                      FROM @IdsXml.nodes('/Ids/Id') AS R(node)) 
```

# c# - 在 mvc 上获取站点 url

> ID：12789904
> 
> 赞同：3
> 
> 时间：2012-10-08T21:42:12.453
> 
> 标签：c#, asp.net-mvc

我想编写一个返回站点 url 的小辅助函数。来自 PHP 和 Codeigniter，我很沮丧，因为我不能让它按照我想要的方式工作。

这是我正在尝试的：

```
@{
    var urlHelper = new UrlHelper(Html.ViewContext.RequestContext);
    var baseurl = urlHelper.Content("~");
}

<script>
    function base_url(url) {

        url = url || "";
        return '@baseurl' + url;
    }
</script> 
```

我想返回我的应用程序的基本 url，这样我就可以进行 ajax 调用而不必担心路径。这是我打算如何使用它：

```
// Development
base_url(); // http://localhost:50024

// Production
base_url("Custom/Path"); // http://site.com/Custom/Path 
```

我怎么能做这样的事情？

**编辑**

我想要绝对路径，因为我已经抽象了进行 ajax 调用的 js 对象。所以假设我有：

```
function MyController() {
   // ... js code
   return $resource('../MyController/:id');
}

// then
var my_ctrl = MyController();
my_ctrl.id = 1;
my_ctrl.get(); // GET: ../MyController/1 
```

这在我的路线是时有效，`http://localhost:8080/MyController/Edit`但在 is 时会失败`http://localhost:8080/MyController`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:06:06.337

我设法这样做：

```
@{
    var url = Request.Url;
    var baseurl = url.GetLeftPart(UriPartial.Authority);
} 
```

谢谢你们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:46:27.587

你知道`@Url.Action("actionname")`和`@Url.RouteUrl("routename")`吗？

这两个都应该做你所描述的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:52:32.203

您可以使用构建您的 URL，而不是*手动创建您的 URL。*`@Url.Action()`

```
<p>@Url.Action("Index", "Home")</p>
/Home/Index

<p>@Url.Action("Edit", "Person", new { id = 1 })</p>
/Person/Edit/1

<p>@Url.Action("Search", "Book", new { title = "Gone With The Wind" })</p>
/Book/Search?title="Gone+With+The+Wind" 
```

现在使用此选项的绝对最佳理由是`@Url.Action`自动应用您在 Global.asax 文件中定义的任何虚 URL 路由。像撒哈拉以南沙漠一样干燥！:)

* * *

在您的情况下，您可以通过两种方式创建“自定义路径”。

选项 A)

```
<p>@Url.Action("Path", "Custom")</p>
/Custom/Path 
```

选项 B)

您可以使用 Global.asax 文件[创建路由。](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-cs)因此，您的控制器/动作组合可以是您想要的任何东西，并且您可以创建自定义虚荣路由 url - 无论控制器/动作组合如何。

# ios - 在 RubyMotion 应用程序中使用 Facebook SDK

> ID：12789907
> 
> 赞同：2
> 
> 时间：2012-10-08T21:42:23.910
> 
> 标签：ios, static-linking, facebook-ios-sdk, rubymotion

我正在尝试将 Facebook SDK 包含在我的 ruby​​motion 应用程序中，但出现以下错误：

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_ASIdentifierManager”，引用自：FacebookSDK(FBSettings.o) 中的 objc-class-ref “_OBJC_CLASS_$_SLComposeViewController”，引用自：FacebookSDK(FBNativeDialogs.o) 中的 objc-class-ref “_SLServiceTypeFacebook "，引用自：FacebookSDK(FBNativeDialogs.o) 中的 +[FBNativeDialogs composeViewControllerWithSession:handler:] ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）耙中止！命令失败，状态为 (1)：[/Applications/Xcode.app/Contents/Developer...]

我已经尝试通过 cocoapod“Facebook-iOS-SKD”添加它

```
 app.pods do 
   pod "Facebook-iOS-SDK"
 end 
```

作为供应商项目

```
app.vendor_project('vendor/FacebookSDK.framework', :static, :products => ['FacebookSDK'], :headers_dir => 'Headers') 
```

我在这里做错了什么？如何让它正确链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T22:45:25.010

由于 Facebook SDK 3.1 具有特定于 iOS 6 的框架，因此我必须在 Rakefile 中将这些框架指定为“弱”。

```
app.weak_frameworks += %w(AdSupport Social) 
```

归功于 Laurent Sansonetti 的修复。

# perl - 如何提取字符串的最后一个元素并使用它在循环内增长数组

> ID：12789908
> 
> 赞同：0
> 
> 时间：2012-10-08T21:42:29.130
> 
> 标签：perl

我有一个这样的数据集：

```
10001;02/07/98;TRIO;PI;M^12/12/59^F^^SP^09/12/55

;;;;;M1|F1|SP1;11;10;12;10;12;11;1.82;D16S539

;;;;;M1|F1|SP1;8;8;8;8;10;8;3.45;D7S820

;;;;;M1|F1|SP1;14;12;12;11;14;11;1.57;D13S317

;;;;;M1|F1|SP1;12;12;13;12;13;8;3.27;D5S818

;;;;;M1|F1|SP1;12;12;12;12;12;8;1.51;CSF1PO

;;;;;M1|F1|SP1;8;11;11;11;11;8;1.79;TPOX

;;;;;M1|F1|SP1;6;9;9;6;8;6;1.31;TH01 
```

我正在尝试提取不以数字开头的行的最后一个元素，即除第一行之外的所有行。我想将这些值放在一个名为 @markers 的数组中。

我正在尝试通过以下代码：

```
#!usr/bin/perl
use warnings;
use strict;

open FILE, 'test' || die $!;

while (my $line = <FILE>) {

    my @fields = (split /;/), $line;

    if ($line !~ m/^[0-9]+/) {

    my @markers = splice @fields, 0, @fields - 1;

    }
} 
```

但这不起作用。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:48:02.377

*   您创建一个名为`@markers`每次循环的新变量。
*   `my @fields = (split /;/), $line;`意味着`(my @fields = (split /;/, $_)), $line;`。你的意思是`my @fields = (split /;/, $line);`
*   `'test' || die $!`和刚才一样`'test'`。

```
use strict;
use warnings;

open my $FILE, '<', 'test'
   or die $!;

my @markers;
while (<$FILE>) {
    chomp;
    next if /^\s*\z/;  # Skip blank lines.
    my @fields = split /;/;
    push @markers, $fields[-1]
        if $fields[0] eq '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:57:26.973

您没有正确使用函数 split() 。我在下面的代码中修复了它并打印了值：

```
#!/usr/bin/perl
use warnings;
use strict;

open FILE, 'test' || die $!;

while (my $line = <FILE>) {

    my @fields = split( /;/, $line);

    if ($line !~ m/^[0-9]+/) {

        print "$fields[-1]";
#    my @markers = splice @fields, 0, @fields - 1;

    }
} 
```

# php - 使用 Zend PDF 加载多个 PDF 并在每个 PDF 上绘制

> ID：12789914
> 
> 赞同：2
> 
> 时间：2012-10-08T21:43:07.510
> 
> 标签：php, zend-framework, pdf

我正在尝试使用 zend pdf 从文件中加载多个 pdf（每个 1 页 pdf），然后在每个上绘制文本、图像等。理想情况下，绘制的文本和图像将添加到函数中。但是，当我尝试进行一些基本绘图时，它会在 pdf 中返回错误。在我尝试在页面上绘制文本之前，代码工作得很好。

```
require_once 'zendframework/library/Zend/Loader/Autoloader.php';
include 'form-structures.php'; //

$loader = Zend_Loader_Autoloader::getInstance();

$pdfMerged = new Zend_Pdf();

//load pdf 
$loadedpdf = Zend_Pdf::load("form-url.pdf");

//clone pdf 
$page1 = clone $loadedpdf->pages[0];

// add text etc.
$page1->drawText('Some text...', 400, 500);

drawmore($page1);

//merge pdf
$pdfMerged->pages[] = $page1;

// do again
$loadedpdf = Zend_Pdf::load("form-url.pdf");
$page = clone $loadedpdf->pages[0];
$pdfMerged->pages[] = $page;

echo $pdfMerged->render(); 
```

下面的 form-structure.php 文件具有在页面上绘制额外内容的功能：

```
function drawmore($page)
{
        $page->drawText("Height is: 600px", 300,800);
        return $page;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:24:21.037

解决。

Zend PDF 不能在屏幕上绘制文本，除非您已经指定了字体。

我刚刚补充说：

```
$page1->setFont(Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA), 20); 
```

它修复了错误。

# regex - eclipse搜索并用通配符替换

> ID：12789918
> 
> 赞同：7
> 
> 时间：2012-10-08T21:43:24.547
> 
> 标签：regex, eclipse, wildcard, replace

我正在尝试消除**`id="someId"`**在每种情况下 someId 不同的所有情况。我曾尝试使用此语法：**`(id="\w+\"\(\))`**因为其他海报在类似情况下使用它。但我不明白语法，当然它不起作用。

有人可以告诉我为什么这种语法不正确，并可能指向一个解释语法的资源吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T22:08:18.553

选中“正则表达式”复选框。表达式是

```
id\s*=\s*"[^"]+" 
```

`\s*`表示*空间*，`*`表示*零个或多个*

`[^"]`表示*除引用之外*的任何内容，`+`表示*一个或多个*

要捕获字符串`"([^"]+)"`，`$1`请在*替换为*字段中使用。

更多信息请访问[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

# java - Java中的MongoDB聚合查询

> ID：12789919
> 
> 赞同：3
> 
> 时间：2012-10-08T21:43:26.067
> 
> 标签：java, mongodb, aggregation-framework

我是 Java 新手，想知道如何在 Java 中构建 mongoDB 查询。

```
 db.coll.aggregate(
       { $match : {
        loc: {
            "$ref" : "location", 
            "$id" : ObjectId("4fe69610e7e9fa378c3c802e")
        }
    }},
       { $unwind : "$ActivityList" },
   { $match : {
       'ActivityList.user': {
            "$ref" : "userProfile",
            "$id" : ObjectId("4fdeafe1de26fd298262bb82")
        } 
    }},
    { $group : {
        _id : "$ActivityList.type",
        latest: { $max: '$ActivityList.timestamp' }
    }}
); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-03T13:50:29.533

聚合命令有限制，管道不能对 Binary、Symbol、MinKey、MaxKey、DBRef、Code、CodeWScope 的值进行操作。检查[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)以获取更多信息。

# javascript - 在javascript中一次又一次地增加价值

> ID：12789920
> 
> 赞同：-1
> 
> 时间：2012-10-08T21:43:37.243
> 
> 标签：javascript, jquery, ruby-on-rails-3, unobtrusive-javascript

在我的 JavaScript 中，我有三个`Links`. `second link`是否打开取决于`first link id`所选内容。一切正常。但是在选择之后`second link`，如果我想更改`first link`，`second link`仍然会为旧版本打开`id`。如果我想更改`first link`，所有的`fields`都应该更改并按照`first link.`

```
 var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) {
      var question_link = $('#question_picker').attr('href');
      question_link = question_link.replace(/\?+$/, '');
      question_link = question_link + '?columns[enr_rds_section_id]=' + id;
      $('#question_picker').attr('href', question_link);
      $("#modal_popup").dialog("destroy");

  };

  var generic_lookup_Enr_Rds_Question2009_selected = function(id, to_s) {
      var answer_link = $('#answer_picker').attr('href');
      answer_link = answer_link.replace(/\?+$/, '');
      answer_link = answer_link + '?columns[enr_rds_question_id]=' + id;
      $('#answer_picker').attr('href', answer_link);
      $("#modal_popup").dialog("destroy");
  }; 
```

## html

```
<div class="question">
      <%= f.label :Section %>
      <%= link_to pro_generic_lookup_data_path("Enr::Rds::Section2009", format: :js), data: {remote: true} do %>
        <%= image_tag("Search-icon.gif", border: 0, :alt => "Look up Sections", title: 'Lookup Sections') %>
      <% end %>
 </div>

  <div class="question">
      <%= f.label :Question %>
      <%= link_to pro_generic_lookup_data_path("Enr::Rds::Question2009", format: :js), data: {remote: true}, id: "question_picker" do %>
        <%= image_tag("Search-icon.gif", border: 0, :alt => "Look up Questions", title: 'Lookup Questions', :class => "image_section_search") %>
      <% end %>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:49:44.473

Solved it by Javascript using cascading dropdown function by example. Thanks guys.

# java - 类的标记方法在 Java 中是框架私有的

> ID：12789922
> 
> 赞同：1
> 
> 时间：2012-10-08T21:43:46.327
> 
> 标签：java, design-patterns, frameworks

我目前正在编写一些框架代码。最近，我不得不向一个需要公开的类添加一些方法，因为该包之外的类需要访问它。该类的客户也可以访问该类，但我的客户不能访问这些方法 - 我只是希望它们对框架中的其他框架类可见。

将它们标记为公开并没有帮助，因为我的客户也可以访问它。将其标记为受保护或包私有无济于事，因为此类的 java 包之外的框架类需要访问它。

我能做些什么来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:47:29.210

我不知道您使用的是什么框架，但如果您有方面，您可以根据调用者或凭据限制对该包的调用。

我很难调和“可以访问课程”和“无法访问的方法”。它是哪一个？如果你不能调用它的方法，那么访问这个类意味着什么？

我想知道您的框架为世界增添了哪些在 Spring 之类的东西中没有更好的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:50:29.987

没有其他我能想到的编译时检查。除了您所描述的之外，Java 没有任何其他可见性修饰符。

如果您想限制某些方法只能由您的框架访问，您应该首先考虑重组您的框架以使用“包私有”可见性级别。`public`具有非常清晰的语义意味着每个人都可以访问它。如果某些东西仅供您的框架使用，那么它应该是`protected`或“包私有”，以便其他人无法看到它。

您*可以*在运行时通过使用来检查哪个类调用了您的方法来做一些事情`StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace()`，但这不会很好地执行（因为它会创建一个异常），我会警告不要这样做。

**编辑：**有一种更有效的方法可以通过使用[此处](https://stackoverflow.com/a/2924426/263004)描述的方法来确定调用类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T21:53:10.673

阅读您的帖子让我想起了我不久前在 apidesign.org 上读到的名为[FriendPackages](http://wiki.apidesign.org/wiki/FriendPackages)的内容。我没有使用过这个解决方案，但我认为这是一本有趣的书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T21:59:06.320

几个解决方案：

1.  定义一个“公共”接口，这是您的客户知道的接口，而您的类实现了另一个“内部”接口，该接口扩展了这个“公共”接口。
2.  使用某种模块管理框架，如[OSGI](http://www.osgi.org/)或[Java8 模块](http://www.slideshare.net/mfrancis/java-8-modules-jigsaw-and-osgi-neil-bartlett)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T13:42:29.000

其他答案中有一些有趣且有用的建议，尤其是双界面的想法。

但我的看法是，您不应该过于努力地实施访问控制或强制执行 API 纪律。事实是，无论您做什么，人们都可以绕过您提出的任何障碍进行编程，以防止他们的程序使用“内部”接口。阻止这种情况的唯一方法是强制他们在安全沙箱中运行他们的代码。我怀疑这是否可行，更不用说可以接受了。

无论如何，尽量清楚地表明客户代码使用您的内部 API 是一个坏主意。但是不要添加大量额外的代码、昂贵的运行时检查和其他会妨碍的东西。将您的客户视为负责任的成年人。如果他们想忽略你的强烈建议，让他们处理后果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T21:53:28.787

当基类属于“框架”包时，通过继承，在包可见性处声明“仅框架”方法。

只有“框架”包可以调用它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T22:07:45.270

*   创建一个名为`MyService`
*   将您最喜欢的方法访问器放在该接口中。
*   实现两个不同的版本。一个用于远程，一个用于内部使用
*   为了保护您的方法，`return new IllegalAccessException()`请为您的客户端版本实现添加。
*   使用将返回其实现的单例外观：`public static MyService getService(Boolean client)`

# css - 为什么我的下拉 ul 位置不会改变？

> ID：12789934
> 
> 赞同：1
> 
> 时间：2012-10-08T21:44:48.477
> 
> 标签：css, drop-down-menu, css-position

我有 ul.children 这是下拉菜单的 ul 设置为

```
position:absolute;
left:-25px; 
```

但它的位置仍然保持不变，就好像它在 left 设置为 0 时绝对定位一样。当您将鼠标悬停在菜单上并且它消失时，它会在消失之前短暂地向左消失 25px。你知道是什么原因造成的，我怎样才能让它实际显示左：-25px？

参考链接：[http ://www.brainbuzzmedia.com/themes/simplybusiness/](http://www.brainbuzzmedia.com/themes/simplybusiness/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:48:43.437

我在你的 CSS 中找到了这个：

```
div.nav-menu ul li:hover ul,
div.nav-menu ul li.sfHover ul {
left:0; 
```

只需删除“left：0”，它应该可以工作！:)

# c++ - 用 lambda 替换纯虚拟接口

> ID：12789935
> 
> 赞同：3
> 
> 时间：2012-10-08T21:44:52.033
> 
> 标签：c++, lambda, c++11

我需要实现以下接口：

```
class xml_writer
{
public:
    virtual void write(const void* data, size_t size) = 0;
};
void xml_document::save(xml_writer& writer, const char_t* indent = "\t", unsigned int flags = format_default, xml_encoding encoding = encoding_auto) const; 
```

我想我可以像这样使用 lambda：

```
// call save on XML passing lambda in place of xml_writer
std::array<char, 4096> request;
xml->save([&](const void* data, const std::size_t size) { std::memcpy(request.begin(), data, size); }); 
```

但是很可惜在clang3.1中编译失败！

是否可以使用这样的 lambda，即代替纯虚拟接口？我的重点是减少样板代码，而不是过多的虚拟功能开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:55:07.410

简单的答案是否定的，你不能使用 lambdas 来实现接口。lambda 的唯一接口是 required `operator()`，它是非虚拟的。Lambda 不会从任何类型继承，也不能从任何类型继承。

您可以做的是提供接近使用的扩展类型的定义并手动实现捕获：

```
std::array<char,4096> request;
struct ToArrayWriter : xml_writer {
   ToArrayWriter(std::array<char,4096>& array) : array(array) {}
   void write( const void* data, size_t size ) {
      std::memcpy(&array[0],data,size);
   }
   std::array<char,4096>& array;
} writer(request);
xml->save( writer ); 
```

# android - 打开图像对话框/GridView 很慢

> ID：12789939
> 
> 赞同：0
> 
> 时间：2012-10-08T21:45:02.830
> 
> 标签：android, gridview

**是）我有的**

我在活动中有一个“打开图像对话框”。此“对话框”仅显示文件夹和兼容图像。为此，我有一个带有 gridview 的图层，我用包含图像和文本的行填充。

文本用于文件名，图像用于图像预览。

**我的问题**

如果我看到的文件夹没有很多图像，则该对话框运行良好。我正在研究 SII，当我尝试打开相册（8Mpx 的照片）时，我的代码运行速度非常慢，即使每次重绘新行也是如此。

**我的代码**

我认为主要问题在于预览图像的创建，因为如果我删除这部分一切正常。对于图像，我有：

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
   View grid;

   if(convertView==null){
       grid = new View(mContext);
       LayoutInflater inflater=getLayoutInflater();
       grid=inflater.inflate(R.layout.row, parent, false);
   }else{
       grid = (View)convertView;
   }

   ImageView icon = (ImageView)grid.findViewById(R.id.file_image);
   TextView label = (TextView)grid.findViewById(R.id.file_text);
   label.setText(item.get(position));
    if (item.get(position).equals("/")){
        icon.setImageResource(R.drawable.folderupup);
    }else if (item.get(position).endsWith("../")) {
        icon.setImageResource(R.drawable.folderup);
    }else if (item.get(position).endsWith("/")) {    
        icon.setImageResource(R.drawable.folder);
    }else{
        Bitmap b = BitmapFactory.decodeFile(path.get(position));
        Bitmap b2 = Bitmap.createScaledBitmap(b, 55, 55, false);
        icon.setImageBitmap(b2);
    }

   return grid;
  }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:40:30.177

在某处，代码调用它（数据是图像的完整路径名）：

```
DiskLruCache.Editor editor = mHttpDiskCache.edit(key);
if (editor != null) {
       if (downloadUrlToStream(data,editor.newOutputStream(DISK_CACHE_INDEX))) {
             editor.commit();
       } else {
             editor.abort();
       }
} 
```

因为我不知道如何更改它，所以我现在修改了 url 接收器，而不是从网络中读取它从文件中读取：

```
 public boolean downloadUrlToStream(String urlString, OutputStream outputStream) {
        disableConnectionReuseIfNecessary();
        HttpURLConnection urlConnection = null;
        BufferedOutputStream out = null;
        BufferedInputStream in = null;

        try {

            in = new BufferedInputStream(new FileInputStream(new File(urlString)), IO_BUFFER_SIZE);
            out = new BufferedOutputStream(outputStream, IO_BUFFER_SIZE);

            int b;
            while ((b = in.read()) != -1) {
                out.write(b);
            }
            return true;
        } catch (final IOException e) {
            Log.e(TAG, "Error in downloadBitmap - " + e);
        } finally {
            if (urlConnection != null) {
                urlConnection.disconnect();
            }
            try {
                if (out != null) {
                    out.close();
                }
                if (in != null) {
                    in.close();
                }
            } catch (final IOException e) {}
        }
        return false;
    } 
```

但是gridview加载图像的速度非常慢。我认为这是因为最后一种方法。我怎样才能做得更好？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:42:26.153

最后，我完成了 Android 页面所说的所有操作，而没有为缓存做任何事情。现在列表加载速度很快。也许我可以像文辉指出的那样添加一个内存缓存，但它太快了，对我的目的来说并不重要。

测试已在 SII 上完成，其文件夹包含大约 400 个 8Mpx

# mysql - 为什么 MySQL 中的“重命名数据库”命令被认为是危险的？

> ID：12789941
> 
> 赞同：1
> 
> 时间：2012-10-08T21:45:08.633
> 
> 标签：mysql, database

MySQL 有一个 rename database 命令，但是在以后的版本中它被删除了，因为“使用这个语句可能会导致数据库内容的丢失，这就是它被删除的原因”。

好奇为什么它可能是危险的，我搜索了相关的讨论，但没有找到。如果您知道技术细节，请提出为什么它是危险的，谢谢！

[13.1.32。重命名数据库语法](http://dev.mysql.com/doc/refman/5.1/en/rename-database.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T01:10:19.300

针对该声明记录了几个错误。

*   [RENAME DATABASE 破坏例程](http://bugs.mysql.com/bug.php?id=28360)
*   [RENAME DATABASE 破坏事件](http://bugs.mysql.com/bug.php?id=17565)

因此，至少部分问题在于它可能会破坏常规和事件。

我觉得这个笔记特别有趣。

> 我修改了手册部分以表明 RENAME DATABASE 会破坏存储的例程和事件。

# ruby - 捆绑更新后 Rails 服务器无法启动

> ID：12789948
> 
> 赞同：0
> 
> 时间：2012-10-08T21:46:01.330
> 
> 标签：ruby, ruby-on-rails-3, thin, ruby-1.9.3

我运行了 bundle update ，现在我的服务器抛出以下错误：

```
rails s
/Users/toptier/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:77:in `rescue in rescue in block in require': undefined method `gsub' for nil:NilClass (NoMethodError)
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:72:in `rescue in block in require'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:62:in `block in require'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
from /Users/toptier/Desktop/Projects/bestapp/config/application.rb:9:in `<top (required)>'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.2/lib/rails/commands.rb:53:in `require'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.2/lib/rails/commands.rb:53:in `block in <top (required)>'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.2/lib/rails/commands.rb:50:in `tap'
from /Users/toptier/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.2/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:31:in `require'
from script/rails:31:in `<main>' 
```

行 application.rb:9 是：

```
Bundler.require(*Rails.groups(:assets => %w(development test))) 
```

这是我的宝石清单：

```
source 'https://rubygems.org'
gem 'rails', '3.2.2'
gem 'pg'

gem 'thin'
gem 'eventmachine'
group :development do
   gem 'ruby-debug-base19'
   gem 'ruby-debug-ide'
  gem 'sqlite3'
end
gem 'sass-rails',   '~> 3.2.3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do

   gem 'coffee-rails', '~> 3.2.1'

   # See https://github.com/sstephenson/execjs#readme for more supported runtimes
    #  gem 'therubyracer'

   gem 'uglifier', '>= 1.0.3'
end

gem "rails_config"
gem 'unicorn'
gem 'delayed_job_active_record'
gem 'rest-client'
gem 'httparty'
gem 'em-http-request'
gem 'devise'
gem 'paperclip'
gem 'activeadmin'
gem "meta_search",    '>= 1.1.0.pre'

gem 'aws-s3', :require => 'aws/s3' 
gem 'aws-sdk';

gem 'jquery-rails'
gem 'mysql2'
gem 'imgkit'
gem 'websnap'

gem 'randumb'
gem 'heroku'
gem 'newrelic_rpm'
gem 'annotate', 
:git => 'git://github.com/jeremyolliver/annotate_models.git', 
:branch => 'rake_compatibility'

gem 'tinymce-rails'

gem 'mail' 
```

服务器很薄

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T23:37:52.450

尝试运行

```
bundle exec rails s 
```

# php - PHP使用PDO检查用户是否存在

> ID：12789953
> 
> 赞同：3
> 
> 时间：2012-10-08T21:46:24.840
> 
> 标签：php, mysql, pdo

我正在设置一个函数来检查`users`我的数据库的表中是否存在传递的用户名。为此，我使用以下代码：

```
function usernameCheck($username) {
    $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
    $stmt = $con->prepare("SELECT username FROM users WHERE username = ':name'");
    $stmt->bindParam(':name', $username);
    $stmt->execute();

    if($stmt->rowCount() > 0){
        echo "exists!";
    } else {
        echo "non existant";
    }
} 
```

但是，无论我尝试设置什么`$username`，我都无法得到任何`exists!`回报。我试过改变它来检查额外的列，比如`userID`，但它仍然不起作用。我认为我的语法是正确的，但我是 PDO 的新手，所以我可能遗漏了一些容易修复的东西。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T21:48:15.730

你不需要逃避。

```
$stmt = $con->prepare("SELECT username FROM users WHERE username = :name"); 
```

`:name`没有任何引号的写作应该可以解决问题。PDO 库已经为您进行了转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T05:32:58.050

试试下面的 SQL 查询

```
$query="SELECT username FROM users WHERE username = 'name'";
$query_res =   $con->query($query);
$count= count($query_res->fetchAll());
if($count > 0){
 //user exists
} 
```

# ubuntu - 找出在 ubuntu 上使用端口 80 的内容

> ID：12789959
> 
> 赞同：4
> 
> 时间：2012-10-08T21:47:01.293
> 
> 标签：ubuntu, port80

我无法在端口 80 上运行服务，因为它似乎已被另一个程序使用。问题是，使用 nestat -lpn | grep :80 （或此命令的变体）不显示任何使用端口 80 的进程。

我在学校提供的未知虚拟机上运行 Ubuntu 12.04.1 LTS。假设它们没有施加任何类型的限制，因此服务器被认为就像一个直接连接到互联网的物理盒子。

正如我已经说过的，对端口 80 进行 greping netstat 不会产生任何输出，即使是 sudo。只是为了确保它对端口 22 的正确运行 greping 会启动 sshd。端口 8080 和 443 似乎也在使用中，但未显示在 netstat 上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T21:52:39.317

您的错误是否表明它确实在使用，或者您只是无法打开套接字？

只是一个想法，但您是否尝试以 root 身份运行它？80 端口有点特别，所以你可以试一试。事实上，1024以下的所有端口都受到保护，只能由root打开。

欢迎来到 SO :)

# java - Java While循环程序

> ID：12789960
> 
> 赞同：1
> 
> 时间：2012-10-08T21:47:03.843
> 
> 标签：java, loops, while-loop

我正在尝试获取“y”、“Y”、“n”或“N”的有效输入。

如果输入无效（例如任何以“y”或“n”开头的单词），我希望它重新提示用户输入。

到目前为止，我有：

```
while  (again.charAt(0) != 'N' && again.charAt(0) != 'n' && again.charAt(0) !='Y' && again.charAt(0) != 'y' ) {
    System.out.println ("Invalid Inpur! Enter Y/N");
    again = numscan.next();
}

if (again.charAt(0)== 'N' || again.charAt(0) == 'n') {
    active = false;                   
} else {
    if (again.charAt(0)== 'Y' || again.charAt(0) == 'y'){
        active = true;
        random = (int) (Math.random () *(11));
    }
} 
```

我遇到的问题是，如果我输入任何以字母“y”或“n”开头的单词，它会将其视为有效输入（因为它是插槽 0 处的字符）。我需要帮助解决此问题，以便在用户输入以“y”或“n”开头的单词时重新提示用户。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:48:51.127

您*可以*测试以确保输入的长度为 1：

```
again.length() == 1 
```

**但**更好的方法可能是：

```
while (! (again.equalsIgnoreCase("n") || again.equalsIgnoreCase("y"))) {
    ...
} 
```

甚至

```
while (! again.matches("[nyNY]")) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:49:52.080

假设`again`是一个包含完整用户输入的字符串，您可以使用：

```
while (!again.equals("N") && !again.equals("n") ... 
```

*仅当整个*字符串匹配时，该`.equals()`方法才会匹配。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:48:47.367

其中一种方法是：

首先检查`again`字符串`length`是否只有一个字符。如果没有，请再次询问。

```
if(again.length() ==1)
{
 while  (again.charAt(0) != 'N' && again.charAt(0) != 'n' && again.charAt(0) !='Y' && again.charAt(0) != 'y' ) {
               System.out.println ("Invalid Inpur! Enter Y/N");
                again = numscan.next();
            }
.....

}else
     {
System.out.println ("Invalid Inpur! Enter Y/N");
                    again = numscan.next();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T21:49:47.180

听起来你想要的是：

```
while  (!again.equals("N") && !again.equals("n") && !again.equals("Y") && !again.equals("y") ) {
    System.out.println ("Invalid Inpur! Enter Y/N");
    again = numscan.next();
} 
```

这样，您以后还可以根据需要轻松添加是/否等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T22:09:56.563

正则表达式可以替代进行严格的输入检查。以下代码验证 y 或 n 忽略大小写。

```
while (!again.matches("(?i)^[yn]$")){
    System.out.println ("Invalid Inpur! Enter Y/N");
    again = numscan.next();
}
active = (again.equalsIgnoreCase("Y"))? true : false; 
```*

# php - 为什么我无法连接到远程 MySQL 数据库？

> ID：12789961
> 
> 赞同：0
> 
> 时间：2012-10-08T21:47:08.883
> 
> 标签：php, mysql, firewall, remote-access

> **可能重复：**
> [如何理解“无法连接”mysql错误消息？](https://stackoverflow.com/questions/11231168/how-to-understand-cant-connect-mysql-error-messages)

我试图遵循几乎所有我能找到的关于这个主题的教程，但无济于事。我正在尝试通过 PHP 连接到远程 MySQL 数据库，但似乎连接超时或什么的。这是我的 PHP 代码：

```
$link = mysql_connect('remote-server-ip:3306', $username, $password);
if($link){
    echo "Connected.";
}else{
    echo "Not connected: ".mysql_error();
} 
```

当我浏览到该页面时，它会加载大约 30 秒，然后才会显示：

```
Warning: mysql_connect(): Can't connect to MySQL server on 'remote-server-ip' (4) in /var/www/vhosts/*****/httpdocs/*****/*****.php on line 6 
```

这是我在远程服务器上为尝试允许此连接所做的操作：

*   添加了 IPtables 规则以允许来自我的服务器的连接。
*   设置 my.cnf 监听所有 TCP 请求
*   向我的数据库添加了可以从我的服务器 IP 连接的用户

似乎仍然没有任何效果。我真的可以在这里使用一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:52:06.287

如果您等待一段时间，则可能无法访问该 ip。首先尝试 ping MySQL 服务器。然后尝试在端口 3306 上远程登录它。你应该得到一个连接。然后看看是否可以从 SQL 服务器本身连接到 MySQL，即本地连接。必须先做基础

# javafx-2 - javafx，获取应用程序线程的引用

> ID：12789962
> 
> 赞同：2
> 
> 时间：2012-10-08T21:47:09.863
> 
> 标签：javafx-2

在摇摆中，我们有：

```
boolean SwingUtilities.isEventDispatchThread() 
```

如果从 swing 事件调度线程调用，则返回 true。

javafx中有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T21:52:24.607

是的，您可以通过以下方式检查[您是否在 FX 线程中](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#isFxApplicationThread%28%29)：

```
Platform.isFxApplicationThread(); 
```

请注意，许多 UI 交互方法在 FX 线程外调用时会抛出异常。

# javascript - 发送请求后jQuery ajax中止

> ID：12789971
> 
> 赞同：2
> 
> 时间：2012-10-08T21:48:05.293
> 
> 标签：javascript, ajax, jquery

可能最好修改这个问题：

我的代码中有一个 ajax 调用，我想在发送后立即取消调用。基本上，我不想等待响应，我只想从客户端发送整个请求。谁能提供一些关于如何实现这一目标的想法？

我在 Chrome 中尝试了以下操作，但似乎从未实际发送过请求（我正在服务器端记录收到的请求）。

基本上：

```
var sendRequest = jQuery.ajax({
    url: '/awesomeness.txt',
    dataType : 'json',
    timeout: 2000,
    cache: false,
    success: function(result) {}
});

sendRequest.abort(); 
```

我也尝试将超时设置为 1，但奇怪的是，如果我从新浏览器加载页面，则不会发送请求（如果我刷新发送的页面）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:49:49.470

就这么简单：

```
jQuery.ajax({
    url: '/awesomeness.txt',
    dataType : 'json',
    timeout: 2000,
    cache: false,
    afterSend: function() {/*run awesome code*/}
    success: function(result) {}
});

// call whatever you want after send
afterSend(); 
```

所以没有内置的 jquery.ajax 事件，但您可以在之后立即调用该函数`$.ajax();`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T21:50:43.887

只需`YOUR_COOL_FUNCTION`在您的代码块之后调用。

这将起作用，因为 ajax 请求使用回调，因此它不会为了执行请求而阻止当前执行，但它会发出请求，然后继续执行您的代码，因此就像放置任何所需的代码块一样简单在这个 AJAX 调用之后。

# perl - 使用 activeperl 设置 sublime text 2？

> ID：12789975
> 
> 赞同：9
> 
> 时间：2012-10-08T21:48:29.583
> 
> 标签：perl, sublimetext2, activeperl

使用 sublime text 2 的新手，我想知道如何让它指向 activeperl.exe（在 win7 上）。

我正在测试编译器以确保它可以与简单的东西一起工作，例如：

```
$x = 1;
$print "$x"; 
```

但它让我对如何 $x 不是公认的语法大发雷霆。我确实将 ST2 指向了我的 python 可执行文件，但我忘记了我应该编辑路径的迷宫中的哪个文件。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-01T04:27:36.503

这对我有用，取自：[http ://www.perlmonks.org/?node_id=935014](http://www.perlmonks.org/?node_id=935014)

1.  单击“首选项-> 浏览包”
2.  导航到“Perl”子文件夹
3.  创建一个名为“Perl.sublime-build”的文件，其内容如下：

```
 {
      "cmd": ["perl", "-w", "$file"],
      "file_regex": ".* at (.*) line ([0-9]*)",
      "selector": "source.perl"
    } 
```

4.  通过单击“工具 -> 构建系统 -> Perl”手动设置构建系统
5.  您现在可以通过混合 Ctrl+B 来运行您的 Perl 脚本

我正在运行这个版本的 ActiveState Perl：

```
C:\>perl --version
Binary build 1402 [295342] provided by ActiveState http://www.ActiveState.com
Built Oct  7 2011 15:49:44 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T09:04:13.523

我使用 Sublime Text 3 并在这个编辑器中运行 perl 程序，你应该：

1.  单击*“首选项-> 浏览包”*
2.  导航到*“Sublime Text”*子文件夹库*“Lib”*
3.  创建一个名为的文件`Perl.sublime-build`，其内容如下：

```
{
  "cmd": ["perl", "-w", "$file"],
  "file_regex": ".* at (.) line ([0-9])",
  "selector": "source.perl"
} 
```

4.  *通过单击“工具 -> 构建系统 -> Perl”*手动设置构建系统
**   您现在可以按 运行您的 Perl 脚本`Ctrl+B`。*

 *注意：文件`Perl.sublime-build`应该在这个根目录中创建： `\Sublime Text 3\Lib`.*

# android - 在edittext上插入符号

> ID：12789981
> 
> 赞同：1
> 
> 时间：2012-10-08T21:49:05.527
> 
> 标签：android, android-edittext, currency

我有两个 editText ：

```
prix = (EditText)findViewById(R.id.prix); 
```

编辑文本（prix），我想在数字后面插入€ 10€</p>

```
remise = (EditText)findViewById(R.id.remise); 
```

edittext (remise) 我想在数字之后插入 % 为 10%

我想使用 Textwatcher，但在我的情况下我不明白。

# actionscript-3 - Adobe Air AS3，配置窗口，分析器建议库代码

> ID：12789982
> 
> 赞同：4
> 
> 时间：2012-10-08T21:49:12.700
> 
> 标签：actionscript-3, air, flex4

我的应用程序创建了一个包含几个组的窗口。当窗口关闭时，GC 不会收集窗口及其后代。

Flash Builder Profiler 帮助我找到并删除事件侦听器，直到我无法发现问题的地步，因为它指向从`Window.as`.

具体来说，比较打开窗口之前和关闭窗口之后的游荡对象，并选择`MyWin`类（1 个实例）：

MyPackageName.MyWin（10 条路径）

10x 以下行：

> 功能 [savedThis] 569222 GCRoot：是字节：308

单击方法面板中的每个“功能”，我会在每个“功能”的顶部看到以下 10 个：

```
spark.components:Window:creationCompleteHandler()    Window.as line 2610
spark.components:Window:creationCompleteHandler()    Window.as line 2613
spark.components:Window:creationCompleteHandler()    Window.as line 2616
spark.components:Window:creationCompleteHandler()    Window.as line 2619
spark.components:Window:creationCompleteHandler()    Window.as line 2625
spark.components:Window:creationCompleteHandler()    Window.as line 2639
spark.components:Window:creationCompleteHandler()    Window.as line 2636
Spark.components.supportClasses:SkinnableComponent:attachSkin() SkinnableComponent.as line 694
Spark.components:SkinnableContainer:partAdded()      SkinnableContainter.as line 959
Spark.components:SkinnableContainer:partAdded()      SkinnableContainter.as line 957 
```

所有这些都以某种方式从 MyWin.initialize() 调用。

我已经删除了我的代码创建的每个事件侦听器，并删除了所有转换。但仍然无法弄清楚这个的含义以及我该如何处理窗口。任何帮助，将不胜感激，因为我已经挣扎了几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T09:58:45.257

```
You can try to use 

    System.pauseForGCIfCollectionImminent(1)

http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/System.html#pauseForGCIfCollectionImminent%28%29

or try to use 

    System.gc() 

in this way

   private var numCollected; uint = 0;

   private function gCollect(): void
   {
       addEventListeners(Event.ENTER_FRAME, onEFGCollect);
   }

   private function onEFGCollect(event: Event): void
   {
     numCollected++;
     System.gc();
     if(numCollected > 2)
         removeEventListeners(Event.ENTER_FRAME, onEFGCollect);
   } 
```

在那里，我们在不同的框架中使用 System.gc() 两次，因为要收集对象需要将所有对象标记为已收集 - 只有在 System.gc() 之后才能收集对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:50:54.107

据我所知，最好的方法是确保对相关窗口的所有引用都设置为空。我以前研究过这个，找不到任何直接的方法让垃圾收集器立即工作。

# google-app-engine - 错误：redirect_uri_mismatch 与使用 Big Query API 的谷歌应用程序？

> ID：12789983
> 
> 赞同：2
> 
> 时间：2012-10-08T21:49:20.253
> 
> 标签：google-app-engine, google-bigquery

嗨，我一直在尝试制作一个使用 Biq Query API 的应用程序。

当我在本地加载应用程序时，OAuth2 的所有身份验证和客户端机密都可以正常工作，但是在部署代码后，我收到以下错误：

错误：redirect_uri_mismatch 请求详细信息

```
scope=https://www.googleapis.com/auth/bigquery
response_type=code
redirect_uri=https://terradata-test.appspot.com/oauth2callback
access_type=offline
state=https://terradata-test.appspot.com/
display=page
client_id=660103924069.apps.googleusercontent.com 
```

但是查看我的 API 控制台，我发现重定向 uri [https://terradata-test.appspot.com/oauth2callback](https://terradata-test.appspot.com/oauth2callback)在我的列表中或重定向 uri 的：

> 重定向 URI：
> 
> 1.https://terradata-test.appspot.com/oauth2callback
> 
> 2.http://terradata-test.appspot.com/oauth2callback
> 
> 3.http://1.terradata-test.appspot.com/oauth2callback
> 
> 4.https://code.google.com/oauthplayground

我不确定我缺少什么来解决这个问题？为什么 API 控制台中列出的 uri 会出现重定向错误？

该应用程序构建 OAuth2 装饰器以传递到 Biq 查询 API，如下所示：

```
CLIENT_SECRETS = os.path.join(os.path.dirname(__file__),
   'client_secrets.json')

decorator = oauth2decorator_from_clientsecrets(
    CLIENT_SECRETS,
    'https://www.googleapis.com/auth/bigquery')

http = httplib2.Http(memcache)   

bq = bqclient.BigQueryClient(http, decorator) 
```

我应该放更多代码来澄清这种情况吗？任何投入将不胜感激。非常感谢！

山

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:46:43.220

在标准 Web 服务器 OAuth 2.0 流程（授权码）中，有 3 个地方使用了 redirect_uri。它在所有三个地方都必须相同：

1.  在 URL 中，您将用户重定向到，以便他们批准访问并获得授权码。
2.  在 API 控制台中
3.  在将授权代码交换为访问令牌（+ 可能是刷新令牌）时，在服务器到服务器的 HTTPS 帖子中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-01T21:42:34.477

[您必须使用https://console.cloud.google.com/apis/credentials](https://console.cloud.google.com/apis/credentials)上的后续步骤创建 API 凭据

客户端 Oauth Id Web 类型 JavaScript 授权 -> [https://yourapp.appspot.com](https://yourapp.appspot.com)

URI 已授权 -> [https://yourapp.appspot.com/oauth2callback](https://yourapp.appspot.com/oauth2callback)

这是您在部署之前必须在本地应用程序中使用的凭据

# nfc - NFC dev takeit - 它存在吗？

> ID：12789989
> 
> 赞同：1
> 
> 时间：2012-10-08T21:49:43.807
> 
> 标签：nfc

我对开发可能会也可能不会与移动设备交互的 NFC 应用程序非常感兴趣。但现在，我刚刚开始，想知道是否有任何开发工具包可用于开始玩弄 API 和库。

我的意思是，我没有带 NFC 的手机，我想开发一些东西并测试一些想法。我可以购买用于测试的 NFC 芯片、某种开发套件，而无需实际购买整个智能手机吗？！？

在投入数百美元之前测试一些想法和概念证明会很好。智能手机的移动应用程序当然可以在以后开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:41:25.450

如果您的预算有限，我建议您搜索二手 Nexus S 或类似设备（甚至可能是损坏的设备，屏幕破裂，只要它可以正常工作）。这可能与一个相当不错的 NFC 开发套件的成本大致相同（或者对于损坏的设备来说更少），并且可以更长时间地满足您的需求。

另一种选择是只购买 libnfc 支持的非接触式阅读器[，](http://www.libnfc.org/documentation/hardware/compatibility)例如 SCL3711。

无论如何，您可能还想购买一些空的 NFC 标签。如果您对此非常认真，那么可能值得投资于功能不是最简单和最有限的标签。在这种情况下，您可以选择基于 MIFARE Classic 的标签或基于 DESFire 的标签；这些通常可以在线获得。

您可能还可以获得一些（使用过的）公共交通票、图书馆图书标签（从废弃的书籍中）、滑雪缆车通行证、旧的访问控制徽章等来进行实验。通常您无法写入此类标签，但它们可能仍然适合进行试验。

# html - 表 td 对齐问题？

> ID：12789990
> 
> 赞同：0
> 
> 时间：2012-10-08T21:49:46.027
> 
> 标签：html, css, html-table

我正在尝试使按钮与文本框对齐，但我无法让它工作，如果您需要更多代码，我会很高兴发布它:)

![在此处输入图像描述](../Images/ad9cdd36cd999eb7abf3c1da7ab646f0.png)

这是我的代码：http: [//jsfiddle.net/Hunter4854/FFcAu/](http://jsfiddle.net/Hunter4854/FFcAu/)

```
<table class="chatMain" width="100%" height="100%" cellpadding="10" cellspacing="0" border="0">

    <tr>

        <td align="center" class="MainView" valign="middle">1</td>

        <td align="center" valign="middle" class="SideAd" width="185px" rowspan="3">AD</td>

    </tr>

    <tr>

        <td align="center" class="controls" valign="middle">

            <textarea class="chatInput"></textarea>

            <button type="submit">Send</button>

        </td>                                   

    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:55:39.280

尝试添加`vertical-align: middle`到表单元素本身。

表格单元格的整个内容（作为实体）在单元格内垂直对齐，而内容内每个内联元素的相互对齐是通过`vertical-align`这些内联元素而不是表格单元格指定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T22:02:12.263

`display: block`将and添加`float: left`到您的`.chatInput`和`button`类中：

```
.chatInput
{
    display:block;
    float:left;
    width: 500px;
    font-size: 12pt;
    height: 75px;
    box-sizing: border-box;
    border: 1px solid #000;
    padding-left: 5px;
    padding-right: 5px;
    outline: none;
    resize:none;
}

button {
    display:block;
    float:left;
    height:75px;
} 
```

小提琴：http: [//jsfiddle.net/kboucher/xH8sm/](http://jsfiddle.net/kboucher/xH8sm/)

# magento - Magento 自定义 PDF 发票

> ID：12789994
> 
> 赞同：2
> 
> 时间：2012-10-08T21:49:56.383
> 
> 标签：magento, invoice

Magento 中的 pdf 发票有问题。我想自定义 pdf 发票，我用它来交付。所以我需要一个总价（只有总价）的字段。我怎样才能得到这个总价？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:26:24.303

Magento 在 PDF 中显示总数的方式与在购物车和结帐中的显示方式几乎相同；它检索总数的数组，并在遍历它们时显示它们。

据我了解，您只想在发票 PDF 中显示总计？

处理总计的代码可以`/app/code/core/Mage/Sales/Order/Pdf/Abstract.php`在一个名为 的函数中找到`insertTotals`。

由于它在`Abstract.php`文件中，代码将用于发票、贷项通知单等，因此您不仅必须`/app/code/core/Mage/Sales/Order/Pdf/Invoice.php`通过将其复制到来覆盖文件`/app/code/local/Mage/Sales/Order/Pdf/Invoice.php`（不要弄乱核心！），而且您还必须覆盖该`insertTotals`函数只显示总计数据：

```
public function insertTotals($page, $source){
    $order = $source->getOrder();
    $totals = $this->_getTotalsList($source);
    $lineBlock = array(
        'lines'  => array(),
        'height' => 15
    );

    foreach ($totals as $total) {
        $total->setOrder($order)
            ->setSource($source);

        // only allow Grand Total to be displayed
        if ($total->getSourceField() != 'grand_total')
        {
            continue;
        }

        if ($total->canDisplay()) {
            foreach ($total->getTotalsForDisplay() as $totalData) {
                $lineBlock['lines'][] = array(
                    array(
                        'text'      => $totalData['label'],
                        'feed'      => 475,
                        'align'     => 'right',
                        'font_size' => $totalData['font_size'],
                        'font'      => 'bold'
                    ),
                    array(
                        'text'      => $totalData['amount'],
                        'feed'      => 565,
                        'align'     => 'right',
                        'font_size' => $totalData['font_size'],
                        'font'      => 'bold'
                    ),
                );
            }
        }
    }

    $page = $this->drawLineBlocks($page, array($lineBlock));
    return $page;
} 
```

# iphone - 尝试在 Master detail App Xcode 中保存详细视图数据

> ID：12789998
> 
> 赞同：2
> 
> 时间：2012-10-08T21:50:21.593
> 
> 标签：iphone, xcode, sdk, save

我是 iPhone 开发的新手，所以我想知道我需要做什么。

我有一个适用于 iPhone 的 Master Detail 应用程序，并且在详细视图中有文本字段、日期选择器和图像。所有这些都由用户定义。我需要知道如何将所有这些信息保存在文本字段（或标签）和图像视图中。我是否需要单独保存每个文本字段，或者我可以一次完成所有操作。我也意识到当我退出模拟器时，我的新表格视图单元消失了。如果您需要我的代码或更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:43:28.073

我在我的一个应用程序中遇到了类似的问题。可能有一种方法可以一次完成所有操作，但我总是单独完成每个操作，这需要一段时间，但它确实有效。至于表格视图单元格消失，那是正常的。模拟器总是像您刚刚下载应用程序一样启动。

PS如果你喜欢我的回答，请点击复选标记