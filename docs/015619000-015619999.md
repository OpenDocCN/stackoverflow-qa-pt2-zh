# StackOverflow 问答 15619000-15619999

# node.js - 是否有等效于 JGroups 的 Node.js 来提供可靠的多播？

> ID：15619006
> 
> 赞同：1
> 
> 时间：2013-03-25T15:44:10.073
> 
> 标签：node.js, multicast, jgroups

有谁知道node.js是否有等效的JGroups？我正在寻找可以提供可靠多播的东西，理想情况下是一些非常吸引人的 JGroups 的“增值”功能（例如视图/集群成员资格/管理）。我还希望能够在不允许本地多播的环境（例如大多数云，例如 AWS）中通过 TCP 实现“可靠多播”。

我对服务器-服务器集群、消息传递、状态共享和弹性感兴趣，而不是对客户端浏览器的多播。

如果这样的事情不存在，但您有兴趣与我合作实施，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-21T19:33:27.760

这个包可以让你建立一个简单的基于 TCP 的 p2p 消息传递网络；我从来没有尝试过。与 JGroups 相比，它看起来很简单，但可以作为一个起点：

[烟雾信号](https://github.com/marcelklehr/smokesignal)

# jsf - 在 EL 表达式中将数据表对象 var 作为参数传递：如何使其健壮？

> ID：15619009
> 
> 赞同：3
> 
> 时间：2013-03-25T15:44:17.453
> 
> 标签：jsf, datatable, el, page-lifecycle

在[Core JavaServer Faces](http://horstmann.com/corejsf/)中，我们找到以下从 DataTable 中删除行的示例，其中 tableData.names 是 Name 对象的列表：

```
<h:dataTable value="#{tableData.names}" var="name" ... />    
    <h:commandLink value="Delete" action="#{tableData.deleteRow(name)}" /> 
</h:dataTable> 
```

它带有一个警告，如果我们使用请求范围并且列表更改“在表格的呈现和响应的解码之间”，这可能不会删除正确的行。

> 注意：如果数据表的值具有*请求范围*，请确保数据在表的呈现和响应的解码之间不会发生变化（第 3 版第 226 页）

任何人都可以根据 JSF 生命周期来解释该引用吗？如果“呈现响应”是 JSF 生命周期的最后阶段，那么“解码响应”在哪里适合？它们是否意味着解码以下回发请求（发送生成的 ID 以识别行并因此识别名称对象）？

并且：我们如何以更强大的方式实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:06:32.170

方法表达式不会在显示表单的请求期间进行评估（书上所说的编码步骤），而是在处理表单提交的请求期间（书上所说的解码步骤）。数据表行的输入和操作是根据表的行索引确定的。在处理表单提交期间，JSF 重新遍历数据模型以查找提交的值和调用的操作。

因此，如果`<h:dataTable value>`它与请求范围的 bean 相关联，因此数据模型是基于每个请求重新初始化的，那么您将面临在处理表单`#{item}`提交期间*实际*引用错误索引处的项目的风险，因为在请求显示表单和提交表单时，数据库可能已经检索到一个新项目，或者已经删除了另一个项目，这可能会将所需项目移动到不同的索引。

为了避免这种情况，需要将 bean 放置在视图范围内，以便在初始请求的（后）构造函数中初始化的完全相同的数据模型将在回发中保留，而无需在每个请求开始时重新初始化它因此可能包含不同的项目或以不同的顺序。如果数据模型的加载与最终用户完全控制的特定请求参数相关联，例如搜索查询，则影响更大。

另一种选择，在这个特定的非幂等“删除这个项目”案例中实际上是一个糟糕的选择，但对于幂等“编辑这个项目”案例来说是一个很好的选择，那就是使用 GET 链接。所需的项目立即呈现为`<a>`元素的查询字符串参数。

```
<h:link value="Edit" outcome="edit">
    <f:param name="id" value="#{item.id}" />
</h:link> 
```

# time - SSAS 2008 - 在自己的表上建立时间维度的最佳实践？

> ID：15619016
> 
> 赞同：2
> 
> 时间：2013-03-25T15:44:39.650
> 
> 标签：time, ssas, olap, dimension

我正在使用 SSAS 2008 创建基于星型模式的多维数据集。

我想就在 DW 数据库中创建自己的日期/时间表作为时间维度的基础还是在 SSAS 中的数据源/服务器选项中使用“生成时间表”是否是最佳做法提出建议？

第二个问题：假设“在数据源中生成”不是一个选项，创建自己的表或在服务器上生成哪个更好？

有两个因素可能会影响决定：

1) 将使用 YTD 措施
2) 将在第一遍中使用公历，但将在第二遍中添加穆斯林日历。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:05:46.310

好吧，如果我说它更容易而且 SSAS 会做得很好，即使用“生成时间表”选项，那么您的第二个问题也将得到回答，即在服务器上生成。我已经做到了，而且效果很好。

# java - 在 Java MVC 模式中我应该在哪里调用我的 swingworker

> ID：15619019
> 
> 赞同：2
> 
> 时间：2013-03-25T15:44:47.230
> 
> 标签：java, swing, model-view-controller, swingworker

我有一个程序，基本上就像这个 MVC 示例中的一样：http: [//www.leepoint.net/notes-java/GUI/structure/40mvc.html](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)

在我的程序中有一个过程需要相当多的时间来冻结我的 GUI。我希望 GUI 在进程运行时不断更新。为此，我相信我需要使用 SwingWorker。我不知道在我的 MVC 模式中我应该在哪里调用这个 SwingWorker。

我的想法是我应该在控制器的 MultiplyListener actionlistener 中运行它。这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:31:25.847

在这种情况下，*模型*是一种随时间演变的数学运算，可能是通过迭代。显然，工人属于模型，如此[处所示](https://stackoverflow.com/a/4637725/230513)。该`setProgress()`方法将通知任何一个`PropertyChangeListener`，并且`process()`可以通知任何其他侦听*视图，如此*[处](https://stackoverflow.com/a/13205322/230513)所示。

附录：在第二个[示例](https://stackoverflow.com/a/13205322/230513)中，worker 更新了一个不同的*模型*：图表的数据集名为`collection`. 反过来，图表会监听数据集并根据变化进行自我更新。

在[引用的示例中](http://www.leepoint.net/notes-java/GUI/structure/40mvc.html)，*控制器*代表*模型*和*视图*安装动作侦听器。在这个相关[示例](https://stackoverflow.com/a/3072979/230513)中，GUI 操作侦听器位于其各自*视图*的本地。无论哪种情况，[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)封装都是合适的选择。当*模型*的内部状态响应用户发起的操作而发生变化时，模型会通知其观察者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:09:37.253

我认为你`SwingWorker`属于*控制*，我会告诉你为什么。我觉得*模型*应该尽可能地与*视图*无关，并且应该在创建时考虑到它可以与不同的视图和控件一起使用，如果需要的话，甚至可以与完全不同的 GUI 库一起使用。例如，您当前希望在 Swing GUI 中使用*模型*，但如果稍后您想在 Android 应用程序中使用它怎么办？为了允许使用尽可能少的修改，大多数 Swing 特定的代码，例如 a`SwingWorker`应该驻留在*Control*或*View*中。

例如，请查看[此答案](https://stackoverflow.com/a/15729267/522444)。

# android - Android 物理引擎（顶部有摄像头）

> ID：15619020
> 
> 赞同：0
> 
> 时间：2013-03-25T15:44:48.563
> 
> 标签：android, 2d, physics, physics-engine

我正在为 Android 开发游戏，但我需要一个物理引擎来检测和响应碰撞（我用 Nape Physis 开发了一个简单的游戏），但我需要这个物理引擎允许所有对象都在地面上，并且“相机”将位于游戏对象的顶部，而不是垂直。所以，物理引擎只需要检测碰撞和响应，不需要重力之类的东西。

有人对此有提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:51:10.557

jBox2d 工作得很好，如果您也对绘制图形的框架感兴趣，请将它与 AndEngine 结合使用。

# windows - 从参数扩展短名称

> ID：15619028
> 
> 赞同：1
> 
> 时间：2013-03-25T15:44:58.423
> 
> 标签：windows, batch-file, cmd

我知道通过使用`%~s1`我可以将第一个参数扩展为短路径（[ref](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx)）

现在我有一个奇怪的问题，文件扩展名由于某种原因被添加到这个缩短的路径中。例如，考虑这个简单的批处理文件，称为`test.cmd`：

```
@echo %1
@echo %~s1 
```

如果我通过这个论点：

```
C:\>test.cmd "C:\Documents and Settings\zzz\My Documents\My Music\Library\I AWAKE\[2008] The Core\I Awake - The Cor.m4a"
"C:\Documents and Settings\zzz\My Documents\My Music\Library\I AWAKE\[2008] The Core\I Awake - The Cor.m4a"
C:\DOCUME~1\zzz\MYDOCU~1\MYMUSI~1\Library\IAWAKE~1\_2008_~1\I Awake - The Cor.m4am4a 
```

您可以看到“m4a”已添加到返回的缩短路径中。

有人知道为什么会这样吗？

* * *

**更新**

如果有人愿意，这里是如何复制它（我使用相同的文件夹名称，因为我不知道它与使用的某些字符有关）：

```
C:\Temp>md "My Documents\Library\I AWAKE\[2008] The Core\"
C:\Temp>echo test > "My Documents\Library\I AWAKE\[2008] The Core\I Awake - The Core.dat"
C:\Temp>test.cmd "c:\Temp\My Documents\Library\I AWAKE\[2008] The Core\I Awake - The Core.dat" 
```

![图像](../Images/5b90c13ccf3deac77ec3b853837a8132.png)

请注意，文件名不会缩短，尽管它存在。如果不需要缩短文件名，会发生以下情况：

![图像](../Images/3f5a01cbaaa5a607c833c319a46ec62b.png)

它与`I AWAKE`文件夹名称有关。如果我更改其他文件夹名称，我会得到错误的结果，但如果我更改`I AWAKE`为其他名称（不以 开头`I ...`），我会得到正确的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:55:30.640

经过一番研究，我发现只有一个网站涉及这个问题：[http](http://www.pcreview.co.uk/forums/long-filename-short-filename-conversion-incorrect-t3693699.html) ://www.pcreview.co.uk/forums/long-filename-short-filename-conversion-incorrect-t3693699.html 。错误发生在内部有两个“长名称”的路径中，字符长度也起作用：

```
C:>md "12345 6789\t st"

C:>echo test> "12345 6789\t st\test.dat"

C:>for /r "12345 6789" %i in (*.*) do @echo %~si
C:\123456~1\TST~1\test.datt 
```

这里出现了一个额外的`t`. 如果第一个路径名变得更长，则扩展名也变得越来越长：

```
 C:>for /r "12345     6789" %i in (*.*) do @echo %~si
 C:\123456~1\TST~1\test.datt.dat 
```

该`dir /x`命令不受影响。

# php - 如何让鼠标悬停功能在多个图像上工作，每个图像都有单独的伴随文本？

> ID：15619030
> 
> 赞同：1
> 
> 时间：2013-03-25T15:45:03.657
> 
> 标签：php, javascript, html, mouseover

我正在创建一个画廊，它加载图像文件夹中的所有图像。画廊使用 PHP。我有这个工作正是我想要的。它创建每个 div 并为每个 div 分配一个单独的 id。但是，在此右侧，我希望有一个区域，如果您将鼠标悬停在任何图像上，该区域将显示描述。

到目前为止，我的搜索结果是空的，所以这是下一个停靠港。

我能够让单个 div 元素显示/隐藏，但是当涉及到多个时，我无法解决。

那只是我测试它。

```
<html>
<body>
    <script>    
        function mover(){
                document.getElementById("visiblediv").style.display="block";
        }
        function mout() {
            document.getElementById("visiblediv").style.display="none";
        }
    </script>

    <div id = "div1" onmouseover="mover()" onmouseout="mout()">
        Show the div
    </div>
    <div id = "visiblediv" style="visibility:visible;border:1px dotted black">
        This div is visible
    </div>

    <div id = "div2" onmouseover="mover()" onmouseout="mout()">
        Show the div
    </div>
    <div id = "visiblediv" style="visibility:visible;border:1px dotted black">
        Doesn't work because using same id?
    </div>
</body>
</html> 
```

这是我目前拥有的 PHP 和 HTML，它们可以生成图库并分配单独的 id。我正在使用来自 [http://www.lateralcode.com/create-a-simple-picture-gallery-using-php/](http://www.lateralcode.com/create-a-simple-picture-gallery-using-php/)的画廊代码， 它使用 Lightbox 2 [http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

```
<?php
# SETTINGS
$max_width = 150;
$max_height = 150;
$counter = 1;

function getPictureType($ext) {
    if ( preg_match('/jpg|jpeg/i', $ext) ) {
        return 'jpg';
    } else if ( preg_match('/png/i', $ext) ) {
        return 'png';
    } else if ( preg_match('/gif/i', $ext) ) {
        return 'gif';
    } else {
        return '';
    }
}

function getPictures() {
    global $max_width, $max_height;
    if ( $handle = opendir('images/gallery/') ) {
        $lightbox = rand();
        echo '<ul id="pictures">';
        while ( ($file = readdir($handle)) !== false ) {
            if ( !is_dir('images/'.$file) ) {
                $split = explode('.', 'images/gallery/'.$file); 
                $ext = $split[count($split) - 1];
                if ( ($type = getPictureType($ext)) == '' ) {
                    continue;
                }
                if ( ! is_dir('thumbs') ) {
                    mkdir('thumbs');
                }
                if ( ! file_exists('thumbs/'.$file) ) {
                    if ( $type == 'jpg' ) {
                        $src = imagecreatefromjpeg('images/gallery/'.$file);
                    } else if ( $type == 'png' ) {
                        $src = imagecreatefrompng('images/gallery/'.$file);
                    } else if ( $type == 'gif' ) {
                        $src = imagecreatefromgif('images/gallery/'.$file);
                    }
                    if ( ($oldW = imagesx($src)) < ($oldH = imagesy($src)) ) {
                        $newW = $oldW * ($max_width / $oldH);
                        $newH = $max_height;
                    } else {
                        $newW = $max_width;
                        $newH = $oldH * ($max_height / $oldW);
                    }
                    $new = imagecreatetruecolor($newW, $newH);
                    imagecopyresampled($new, $src, 0, 0, 0, 0, $newW, $newH, $oldW, $oldH);
                    if ( $type == 'jpg' ) {
                        imagejpeg($new, 'thumbs/'.$file);
                    } else if ( $type == 'png' ) {
                        imagepng($new, 'thumbs/'.$file);
                    } else if ( $type == 'gif' ) {
                        imagegif($new, 'thumbs/'.$file);
                    }
                    imagedestroy($new);
                    imagedestroy($src);
                }

                global $counter;
                echo '<li id="image'.$counter.'"><a href="'.'images/gallery/'.$file.'" rel="lightbox['.$lightbox.']">';
                echo '<img src="thumbs/'.$file.'" alt="" />';
                echo '</a></li>';
                $counter++;
            }
        }
        echo '</ul>';

    }
}
?>
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!--LINKS-->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/mueseomain.css">   

    <!--PORTFOLIO ONLY LINKS-->
    <link rel="stylesheet" href="css/lightbox.css" type="text/css" media="screen" />

    <style type="text/css">
        #pictures li {
            float:left;
            height:<?php echo ($max_height + 15); ?>px;
            list-style:none outside;
            width:<?php echo ($max_width + 15); ?>px;
            text-align:center;
        }
        #image_area img {
            border:5px solid white;
            outline:1px solid #ccc;
        }
    </style>

    <!--SCRIPTS-->
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>  

    <!--PORTFOLIO ONLY SCRIPTS-->
    <script type="text/javascript" src="js/gallery/prototype.js"></script>
    <script type="text/javascript" src="js/gallery/scriptaculous.js?load=effects,builder"></script>
    <script type="text/javascript" src="js/gallery/lightbox.js"></script>

</head>
<body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div id="content_wrapper1">
        <?php include 'includes/header.php'; ?>
    </div>  

    <div id="content_wrapper2">

        <div id="image_wall">
                <div id="image_area">
                    <?php getPictures(); ?>
                </div>
            <div id="description_area">
                <p id="text" class="image1">kasdjfbksdjfhsdfhsdjldfbgsdkfsdklfsdf
                ashdfgaskfhgsdjkfhsdlfjkhasdlfkhsdlfkhsdlfj
                aksfbhaskdjfhsdjlfhsdlkfhsdlfkhsdlfhsdlfk<?php echo $counter ?></p>
            </div>
        </div>
    </div>

    <div id="footer_wrapper">
        <?php include 'includes/footer.php'; ?>
    </div>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
</body>
</html> 
```

很简单，我想在每个图像的鼠标悬停时使一个带有特定于该图像的文本的 div 出现在描述区域中，并且在鼠标移出时消失。

如果我没有说得足够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:28:08.893

是的，它发生是因为您使用相同的 id 2 次。（document.getElementById() 只返回一个元素）。（当第一个元素被注释掉时，将显示第二个元素[。http://jsfiddle.net/7gvNY/4/](http://jsfiddle.net/7gvNY/4/)）

[W3C 指南说你必须使用一个 id 一次！](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

所以我认为你应该阅读 ids 和 classes 之间的区别以避免下次你的错误。
当您了解 ids 和 classes 之间的区别时，[这](http://jsfiddle.net/7gvNY/6/)是一个有效的实现。
要通过类名获取所有元素，只需使用`getElementsByClassName()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:06:54.513

我认为你需要做的是创建一个像 setDescriptionText(elt_id) 这样的 Javascript 函数。然后，在鼠标悬停事件中，使用悬停元素的 ID 调用此函数。此函数应根据在 div 的 innerHTML 中传递的 ID 设置 visiblediv 的文本（或应该具有动态/描述文本的 div，id 应该是唯一的）。您还需要在此处显示 div，即：

```
elt_id.innerHTML = "This is the picture's description, it's super cool!"
elt_id.setAttribute("visibility","visible");
elt_id.setAttribute("display","block"); 
```

您应该为 onmouseout 设置另一个函数，例如 clearDescriptionText(elt_id)。这可能包括以下调用

```
elt_id.innerHTML = "";
elt_id.setAttribute("visibility","invisible");
elt_id.setAttribute("display","none"); 
```

第一个将清除 div 中的文本（和任何其他 HTML）。最后两个将使元素不可见。

# asp.net-mvc-3 - 困难的“选择”表达

> ID：15619034
> 
> 赞同：0
> 
> 时间：2013-03-25T15:45:15.917
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我有一个具有多个“打开任务”的项目模型：

```
[NotMapped]
public IEnumerable<Task> OpenTasks
{
   get
   {
       //All tasks where status id == 1 (= open tasks)
       return Tasks.Where(t => t.TaskStatusId == (int)EnumTaskStatus.taskStatus.openTask);
   }
} 
```

一个任务模型有多个用户：

```
public virtual ICollection<Useraccount> Useraccounts { get; set; } 
```

现在我想获取项目特定用户的所有未完成任务。它看起来像这样：

```
project.OpenTasks.Where(my user is in t => T.useraccounts); 
```

但我不确定我的 where 条件会是什么样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:48:34.590

尝试这个：

```
project.OpenTasks.Where(x => x.Useraccounts.Contains(myUser)); 
```

如果`Useraccount`不覆盖相等成员，则需要使用以下内容：

```
project.OpenTasks.Where(x => x.Useraccounts.Any(x => x.Id == myUser.Id)); 
```

# php - 数组总是返回 null

> ID：15619035
> 
> 赞同：0
> 
> 时间：2013-03-25T15:45:16.000
> 
> 标签：php, sql, pdo

我在这里有这部分代码（我当然有一个构造函数等并创建了对象）

```
function searchUsers($term)
{
    $searchUserSQL = "SELECT userID, givenName, familyName from userbase where givenName or familyName = :name";
    $searchUserPrepare = $this->prepare($searchUserSQL);
    $searchUserPrepare->bindParam(':name', $term);
    $searchUserPrepare->setFetchMode(PDO::FETCH_ASSOC);
    $searchUserPrepare->execute();
    $searchUserResult = $searchUserPrepare->fetchAll();
    foreach($searchUserResult as $row){
            $row['userBaseData']=$this['givenName'];
            $results[] = $row;
        }
        return $results;
} 
```

但结果始终为 NULL。当我在 PHPmyAdmin 中测试这个 qry 时，我也没有得到任何结果。

但是在我的表userbase中有一个名为userID、givenName和familyName的列名，而且搜索词也是正确的。我不知道我的 qry 做错了什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:55:13.683

`SELECT userID, givenName, familyName from userbase where givenName or familyName = :name`

我什至不确定该查询将如何工作，特别是在 WHERE 子句中。

```
SELECT
    u.userID
  , u.givenName
  , u.familyName
FROM `userbase` u
WHERE u.givenName = :given_name
  OR u.familyName = :family_name; 
```

然后绑定`$term`到两者`:given_name`和`:family_name`

* * *

**编辑**整个事情在一起*（重写）*

```
function searchUsers( $term )
{
    $sql = <<<SQL
SELECT
    u.userID
  , u.givenName
  , u.givenName AS `userBaseData`
  , u.familyName
FROM `userbase` u
WHERE u.givenName = :given_name
  OR u.familyName = :family_name;
SQL;

    $stmt = $this->prepare( $sql );
    $stmt->bindParam( ":given_name", $term, PDO::PARAM_STR );
    $stmt->bindParam( ":family_name", $term, PDO::PARAM_STR );
    $stmt->execute();

    return ( $stmt->rowCount() > 0 )
        ? $stmt->fetchAll( PDO::FETCH_ASSOC )
        : array();

} 
```

**编辑 2**

真的不知道你想用`$row['userBaseData'] = $this['givenName']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:05:05.517

我假设您使用的是 PDO，那么您必须先连接到数据库：

```
$conector = new connection("server","database"); // Your custom class to connect to a DB
$con = $conector->connect(); // Return the connector
$con->exec('SET CHARACTER SET utf8'); // A must have
$con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // A must have to handle exceptions and know better the errors that it gives, use try - catch
$consulta = $con->prepare("SELECT userID, givenName, familyName from userbase where givenName or familyName = :name;");
$consulta->bindParam(':name', $name, PDO::PARAM_STR);
$data = array('name' => $term);
$consulta->execute($data);
foreach($consulta as $row){
        $row['userBaseData']=$this['givenName'];
        $results[] = $row;
}
return $results; 
```

试试那个代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:53:41.693

```
 $results = array();    
    foreach($searchUserResult as $row){
        $row['userBaseData'] = ??????;
        $results[] = $row;
    }
    return $results; 
```

更换 ？？？？？？具有正确的变量。当前的变量名是错误的！

现在至少你会返回空数组..

# c# - 是否有语法进行反向类型推断？

> ID：15619038
> 
> 赞同：1
> 
> 时间：2013-03-25T15:45:27.970
> 
> 标签：c#, generics, types, type-inference

当我试图回答这个问题时：

[是否可以摆脱 Service 类中的 TClient 泛型类型](https://stackoverflow.com/questions/15539072/is-it-possible-to-get-rid-of-the-tclient-generic-type-in-the-service-class)

我发现了一个奇怪的用法，我从来没有设计过这种不可编译的语法，下面是我遇到的一个代表：

```
interface IGeneric<T> {
}

partial class SomeClass {
    // won't compile
    public static void SomeMethod<U>(Action<T> d) where T: IGeneric<U> {
    }
} 
```

即使声明为：

```
class Concrete: IGeneric<object> {
}

partial class SomeClass {
    public static void SomeMethod<U>(Action<IGeneric<U>> d) { // compiles
    }
} 
```

不会**使**以下代码可编译：

```
var d=default(Action<Concrete>);
SomeClass.SomeMethod(d); // won't compile 
```

我不知道在**不**涉及两个类型参数的情况下可以使用的语法。

所以我想知道这种反向类型推断是否有语法？还是解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T06:04:44.883

简单回答是不。这甚至与类型*推断*无关——它与类型*约束*有关。您只能添加约束在同一声明中引入的类型参数。所以这：

```
public static void SomeMethod<U>(Action<T> d) where T: IGeneric<U> 
```

是无效的，因为您试图`T`在`U`, 当它`U`实际上是在方法声明中引入时进行约束。事实上，`T`它本身在*任何地方*都不是类型参数——但即使`SomeClass`在`T`.

在许多与此类*似的*情况下，您可以通过非泛型类型中的额外静态方法，通过类型推断创建泛型类型的实例 - 但具体情况通常是您有两个类型参数并且您想要明确指定*其中之一*。

需要注意的重要一点是，一个`Action<Concrete>`简单的*不是*一个`Action<IGeneric<object>>`。例如，`Concrete`可能会暴露一些 an`Action<Concrete>`可能依赖的额外属性 - 但给定 an`Action<IGeneric<object>>`你可以很容易地用*不同*的实现来调用它`IGeneric<object>`。您现有的`SomeMethod`尝试通过特定`Action<U>`而不是解决该问题`Action<IGeneric<T>>`- 但此时*使用*该操作相对困难。即使类型推断有效，这也很少（根据我的经验）是一种实用的方法。

一旦您更改为真正的协变委托（并假设您使用的是 C# 4），除非您关心，否则`U`您可以简单地使用不同的签名：

```
using System;

interface IGeneric<T> {}

class SomeClass
{    
    public static void SomeMethod<T>(Func<IGeneric<T>> d) {}
}

class Concrete: IGeneric<object> {}

class Test
{
    static void Main()
    {
        var d = default(Func<Concrete>);
        // This compiles fine
        SomeClass.SomeMethod(d);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T19:53:21.717

问题是您试图将 a`Action<T>`视为 T 中的协变，但事实并非如此。事实上，它是逆变的。

例如，如果你有一个协变委托，像这样。

```
delegate T CovariantCall<out T>(); 
```

你可以很容易地做你所要求的。

```
CovariantCall<IGeneric<object>> covariant = default(CovariantCall<Concrete>); 
```

您的第一个示例无法编译，因为您`T`在方法的声明类型参数列表中省略了 。不过，这是一个更好的主意，而且它之所以有效，是因为约束只验证并且不影响参数方差，但是您必须明确指定您正在寻找哪些参数并且无法推断它。

```
public static void SomeMethod<T, U>(Action<T> d) where T: IGeneric<U>
{ 
    ...
}

SomeClass.SomeMethod<Concrete, object>(default(Action<Concrete>)); 
```

C# 类型推断的能力是有限的，这就是其中之一。如果不明确指定类型，您将无法执行您所要求的操作。

# c# - 在 C# 或 VB.NET 中将按钮列添加到 DataGridView 的右侧

> ID：15619039
> 
> 赞同：1
> 
> 时间：2013-03-25T15:45:32.187
> 
> 标签：c#, vb.net, datagridview

我想在用 C# 或 VB.NET 编写的 WinForms 应用程序中向 DataGridView 的两侧添加一列按钮。

每个按钮与一行相关联并随行移动，如下所示：

1.  无论视图有多宽，两侧的按钮始终可见。因此，即使用户向左或向右滚动，按钮也会固定在原位并始终可见
2.  当用户在网格中上下滚动时，按钮会随着相关的行滚动。

我想向 DataGridView 添加列并冻结它们（例如`dataGridView1.Columns[0].Frozen = true`），但问题是我无法冻结网格中的第一列和最后一列。

您是否可以想到另一种在网格两侧设置动态按钮的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:07:44.167

如果您希望第一个并且所有列始终可见`datagridview`，请使用

```
DataGridView.AutoSizeColumnMode = Fill 
```

当然中间列的宽度会自动改变......

**或者在这里您的问题的另一种解决方法：**

在您`DataGridView`创建带有按钮（“左按钮”）的第一列并将其冻结。

然后在您的 Main 右侧`DataGridView`创建另一个`DataGridView`（将调用它`dgvRightButton`）

添加一个`DatGridViewButtonColumn`。然后同步这两个的一个滚动事件`datagridview`

**VB.NET 代码**

```
Private Sub dgvTest1_Scroll(sender As Object, e As ScrollEventArgs) Handles dgvMain.Scroll
    If e.ScrollOrientation = ScrollOrientation.VerticalScroll Then
        Me.dgvRightButton.FirstDisplayedScrollingRowIndex = Me.dgvMain.FirstDisplayedScrollingRowIndex
    End If
End Sub 
```

我第二次使用的测试代码`datagridview`（仍然是 VB.NET 代码，但注释是 C#）：

```
//dgvRightButton_ButtonColumn - Buttons column instance(predefined column with Designer)
//dgvMain_SomeValueColumn - predefined column from Main DataGridView

Private Sub dgvRightButton_CellClick(sender As Object, e As DataGridViewCellEventArgs) Handles dgvLeftButton.CellClick
    //Check if column are buttons column(maybe you want add more columns later)
    If Me.dgvRightButton_ButtonColumn.Name = Me.dgvRightButton.Columns(e.ColumnIndex).Name Then
        //Getting value from Main DataGridView by rowIndex
        Dim sValue As String = Me.dgvMain.Rows(e.RowIndex).Cells(Me.dgvMain_SomeValueColumn.Name).Value
        MessageBox.Show(sValue)
    End If
End Sub 
```

将相同数量的按钮添加到第二个`DataGridView`将是：

```
Private Sub dgvRightButton_AddRows()
    For i As Int32 = 0 To Me.dgvTest1.Rows.Count - 1
        Me.dgvRightButton.Rows.Add(New String() {"Right"})
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:26:28.803

除了法比奥的回答，我想给出我自己实施相同方法的发现。

`dgvMain`我添加了两个名为和的DataGridView 组件`dgvDelete`。后者位于前者的右侧，是按钮出现的位置。

因为`dvgDelete`它位于下方 18 个像素，`dgvMain`并且它的高度小了 34 个像素。这确保它与`dgvMain`. 我给了它一个垂直滚动条，但没有给它一个水平滚动条。

在`dgvMain`我删除了垂直滚动条。

我将两者绑定到同一个数据源（在我的情况下是一个数组），但阻止`dgvDelete`了自动生成列：

```
dgvDelete.AutoGenerateColumns = false; 
```

我添加了一列`dgvDelete`包含按钮。

与 Fabio 类似，我添加了以下代码 (C#) 来处理滚动。

```
private void dgvDelete_Scroll(object sender, ScrollEventArgs e)
{
    if (e.ScrollOrientation == ScrollOrientation.VerticalScroll)
    {
        dgvMain.FirstDisplayedScrollingRowIndex = dgvDelete.FirstDisplayedScrollingRowIndex;                
    }
} 
```

我添加了一列按钮`dgvMain`并冻结了第一列：

```
dgvMain.Columns[0].Frozen = true; 
```

所以现在我在可编辑数据的两侧固定了一列按钮。

将两个网格绑定到同一个数据源的一个很好的特性是，当您在`dgvMain`网格中移动时，相应行中的按钮`dvgDelete`会自动为您突出显示。

`dgvMain`我什至可以在第一列按钮的左侧立即添加第三个网格，但前提是性能影响可以忽略不计。

# java - 等待监听器在做...而 GUI

> ID：15619042
> 
> 赞同：0
> 
> 时间：2013-03-25T15:45:40.533
> 
> 标签：java, events, while-loop, listener, wait

我为随机过程（例如 2+2 、 14/2 等）创建了一个程序。

我尝试创建一个 GUI。我有 5 个按钮（添加用于添加，Div 用于划分等）当用户单击添加按钮时，我向 JTextArea 发送一条消息以添加一条消息：

2 + 4 =

（或其他随机数）

我有一个用户可以写答案的 JTextField。因此，如果他写 6 一条成功消息出现在 JText 区域（如果他输入错误答案但失败消息相同）和其他 2 个随机数，所以：

2+4 = 6

是的！

3+4 =

并继续直到 c.isOverLimit() 方法返回 true（经过 10 个进程）。

```
int x = 10;

do {
    String string = String.format("%d %s %d =", p.getNumber1(),
                                  p.getOperator(), p.getNumber2());
    writeMessage(string);
    textField.addActionListener(
    new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                p.checkAnswer(Double.parseDouble(e.getActionCommand()));
                writeMessage(p.getMessage(Double.parseDouble(
                                              e.getActionCommand())));
                textField.setText("");
            }
            catch(Exception ex) {
                System.out.println(ex.getMessage());
            }
        }
    }
    );
    c = Proccess.getCounter();
    x--;
}
while (x != 0); 
```

我的问题是，当我按下添加按钮时，我有这个输出：

4+3=

4+3=

4+3=

4+3=

4+3=

4+3=

4+3=

4+3=

4+3=

4+3=

错误是 do...while 运行了 10 次，并且不会因为用户的答案而停止。不要注意我使用的方法。我的程序在控制台程序中正确运行，所以我的错在此时...做

对不起我的英语不好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:00:39.413

计算调用次数应该在`actionPerformed`方法中完成。删除`do...while`循环并改用它：

```
int x = 10;
textField.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        if (x >= 0) {
            try {
                p.checkAnswer(Double.parseDouble(e.getActionCommand()));
                writeMessage(p.getMessage(Double.parseDouble(e.getActionCommand())));
                textField.setText("");
            } catch(Exception ex){
                System.out.println(ex.getMessage());
            }
            x--;
        } else {
            // quit, or whatever you want to do
        }
    }
}); 
```

# android - 应用内购买可以购买什么

> ID：15619044
> 
> 赞同：0
> 
> 时间：2013-03-25T15:45:46.283
> 
> 标签：android, in-app-purchase

是否可以在应用购买 v3.3 中查看可通过谷歌购买的内容。

我到处找了，我不知道如何检查你想要的物品是否可以购买（例如，我想稍后在应用程序中有一个产品，我检查我是否已将它添加到应用内购买与否，无需上传带有这些更新的新应用或带有这些更新的新数据库。

这可能吗，有没有办法查询哪些物品可以购买？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:34:33.920

不完全的。

如果您有产品的 SKU 代码，您可以使用[getSkuDetails()](http://developer.android.com/google/play/billing/billing_reference.html#getSkuDetails)查询其详细信息。但是，您需要事先列出代码。

# python - 无法在 django 数据库中创建表

> ID：15619045
> 
> 赞同：1
> 
> 时间：2013-03-25T15:45:48.827
> 
> 标签：python, django, web

大家好，我正在尝试在 django 数据库中创建表，或者换句话说，我正在尝试同步数据库，但这是我遇到的错误

```
-bash-3.2$ ~/html/ENV/bin/python2.7 manage.py syncdb
Creating tables ...
Creating table red_carpet_contactus
ValueError: The database backend does not accept 0 as a value for AutoField. 
```

这是模型文件

```
from django.db import models
#from django.contrib.auth.models import User

class Page (models.Model):
    Info= models.TextField()
    page_name=models.CharField(max_length=100)
    def __unicode__(self):
        return u"%s" % self.page_name

class category(models.Model):
    category_name = models.CharField(max_length=255)
    def __unicode__(self):
        return u"%s" %(self.category_name)

class contactus(models.Model):
    PageName = models.CharField(max_length=255)
    Phone = models.CharField(max_length=255)
    Mob = models.CharField(max_length=255)
    Address = models.CharField(max_length=255)
    Fax = models.CharField(max_length=255)
    Email = models.CharField(max_length=255)
    def __unicode__(self):
        return u"%s" %(self.page_name)

class gallery(models.Model):
    title = models.CharField(max_length=200, blank=True, null=True)
    Description = models.CharField(max_length=200, blank=True, null=True)
    picture = models.FileField(upload_to='photos/')
    thumbnail = models.FileField(upload_to='thumbnail/', blank=True, null=True)

    def __unicode__(self):
        return u"%s" % self.picture.url

class images(models.Model):
    image = models.FileField(upload_to='images/')

#addition of the main page logo
class Main_page_img(models.Model):
    logo = models.FileField(upload_to='images/')

    def __unicode__(self):
        return u"%s" % self.logo.url

class fields_class(models.Model):
    data = models.TextField()
    content = models.CharField(max_length=150)
    def __unicode__(self):
        return u"%s" % self.content

class trips_main_data(models.Model):
    image = models.ManyToManyField(gallery)
    short_description = models.CharField(max_length=255)
    trip_name = models.CharField(max_length=255)
    country_info = models.TextField(blank=True, null=True)
    trip_info = models.TextField()
    fields = models.ManyToManyField(fields_class,blank=True, null=True)
    category = models.ForeignKey(category)

    def __unicode__(self):
        return u"%s" % self.trip_name 
```

那么你会建议我如何解决这个问题吗？

# kendo-ui - Kendo UI MVC 从 MultiSelect 小部件将 Grid 绑定到 DataSource

> ID：15619048
> 
> 赞同：0
> 
> 时间：2013-03-25T15:45:54.707
> 
> 标签：kendo-ui, kendo-grid, kendo-asp.net-mvc

我们正在使用 Kendo UI MVC，需要过滤大量记录并将它们显示在只读 DataGrid 中。该页面具有 MultiSelect 小部件，每个小部件都允许用户从特定数据库列的不同值列表中进行选择。在用户在 MultiSelect 小部件中输入他的选择后，他将单击“刷新”按钮来更新网格。Grid 的 DataSource.Ajax.Read 方法应该将用户的选择传递给服务器并在 Grid 中显示结果。

我知道如何填充 MultiSelect 小部件以及如何通过 Ajax 从服务器返回数据，但我不清楚如何将用户的选择传递给 Grid.DataSource.Read()。

按钮将用户的选择传递给 DataSource、触发 Read 方法并在 Grid 中显示结果的最佳方式是什么？

编辑：将小部件放在 Grid 的 ToolBar 中将满足我们的需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:24:18.480

在 Grid.Toolbar.Template 中嵌入小部件

# bash - 使用 awk 转义 @

> ID：15619050
> 
> 赞同：0
> 
> 时间：2013-03-25T15:46:03.737
> 
> 标签：bash, shell, ssh, awk, cut

我有以下内容：

`ssh $DOMAIN -l root "grep "'$EMAIL@$DOMAIN'" /var/log/maillog | grep retr= | grep -v retr=0 | awk '{ print "'$11'" }' | cut -d, -f1 | cut -d= -f2 | awk '{ t += $1 } END { print "'total: '", t, "' bytes transferred over POP3'"}'"`

运行此命令会给出以下输出：

> 标准输入：不是 tty
> 
> awk: { t += blah@email.com } END { print total: , t, 通过 POP3 传输的字节数}
> 
> awk: ^ 表达式中的无效字符“@”

看起来问题`awk '{ t += $1 }`出在$ 1中的@，但是我尝试了几种不同的方法来逃避它，但没有运气。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:58:08.067

我不认为这是您运行的命令，因为引号不匹配（有多余的`"`）。听起来您实际运行的命令扩展了“$1”，从而导致 awk 解释文字电子邮件地址，而不是从第一个字段读取。

最后一部分应该是：

```
awk '{ t += $1 } END { print "total: ", t, " bytes transferred over POP3"}' 
```

# objective-c - 目标 c - 在运行时扩展单元格高度

> ID：15619053
> 
> 赞同：2
> 
> 时间：2013-03-25T15:46:05.820
> 
> 标签：objective-c, uitableview, heightforrowatindexpath

我有一个自定义单元格，其中一个标签可以大到足以证明添加“查看更多”按钮是合理的。因此，我将标签的内容截断为 5 行，然后添加此按钮以扩展内容（如果需要）。

我的问题是：这可以在不使用 tableView 的 reloadData 的情况下完成吗？

我在“查看更多”按钮（在自定义单元格内）的触摸事件上尝试了此代码：

```
 self.contentView.frame = self.backgroundView.frame = self.accessoryView.frame =  CGRectMake(0, 0, self.contentView.frame.size.width, self.contentView.frame.size.height + 80); 
```

什么都没发生！我想我需要一种方法来扩展单元格行高以及表格视图的内容高度。

提前致谢，

* * *

版：我在链接[ios - Expand table view cell like Twitter app](https://stackoverflow.com/questions/14967696/ios-expand-table-view-cell-like-twitter-app)中检查了解决方案，我已在自定义单元格中应用了此代码（在触摸事件上）：

```
self.contentExpanded = YES;
UITableView *tableView = [self parentTableView];
NSIndexPath *indexPath = [tableView indexPathForCell:self];

[tableView beginUpdates];
[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
[tableView endUpdates]; 
```

我现在有 2 个问题：1) reloadRowsAtIndexPaths 正在执行整个 reloadData。2）自定义单元格是知道单元格高度的那个。访问此方法时，self.contentExpanded 始终等于 NO。

***方法 parentTableView 取自[对单元格的父 tableView 的引用](https://stackoverflow.com/questions/5620622/reference-to-the-parent-tableview-of-a-cell)

* * *

第 2 版：我认为问题不在于 heightForRow。我无法避免为所有单元格调用此方法...

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *) indexPath
 {        
    CellObject *object;  
      if(self.searchTableData)
          object = [self.searchTableData objectAtIndex:indexPath.row];
      else
          object = [self.database.cellObjectsFetchedResultsController objectAtIndexPath:indexPath];  

    id cell = [TableViewCellFactory createFromCellObject:object fromPrototypeTable:self.tableView];

    CGFloat height = [cell getHeightRowForCellObject:object];

    return height;

} 
```

在自定义单元格中：

```
 - (CGFloat)getHeightRowForCellObject:(CellObject *)cellObject
  {

CGFloat messageHeight = 0;

if (![cellObject.content isEqualToString:@""])
{
    UILabel *tempMessageLabel = [[UILabel alloc] init];

    tempMessageLabel.font = [UIFont systemFontOfSize:14];
    tempMessageLabel.autoresizingMask =  (UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin );
    tempMessageLabel.numberOfLines = 5;
    tempMessageLabel.text = cellObject.content;
    [tempMessageLabel sizeToFit];
    CGFloat lineHeight = [tempMessageLabel.text sizeWithFont:tempMessageLabel.font].height;
    CGSize size = [tempMessageLabel.text sizeWithFont:tempMessageLabel.font
                                    constrainedToSize:CGSizeMake(280, lineHeight * tempMessageLabel.numberOfLines)
                                        lineBreakMode:UILineBreakModeWordWrap];
    messageHeight = size.height;

    if(self.contentExpanded)
        messageHeight += 100;
}
return messageHeight;
} 
```

# symfony - 是否可以使用 createQueryBuilder 进行插入/更新？如果没有，我应该使用什么功能？

> ID：15619054
> 
> 赞同：14
> 
> 时间：2013-03-25T15:46:07.793
> 
> 标签：symfony, doctrine-orm, insert-update, createquery

现在，我成功地创建了一个使用 Doctrine 的函数 createQueryBuilder 从数据库中检索数据的函数。

有谁知道是否有类似的功能来插入或更新数据库？或者我如何使用 createQueryBuilder？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-26T06:06:02.130

Doctrine 2 ORM 不支持`INSERT`通过[DQL](http://www.doctrine-project.org/docs/orm/2.1/en/reference/dql-doctrine-query-language.html)或[DQL 查询生成器](http://docs.doctrine-project.org/en/latest/reference/query-builder.html)。有关完整的语法，请检查[DQL 的 EBNF](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#ebnf)。

要在 ORM 中处理插入，您总是手动实例化一个实体并将其保存在实体管理器中：

```
$user = new \My\Entity\User();

$entityManager->persist($user);
$entityManager->flush(); 
```

您只能在 Doctrine ORM 中通过 DQL 处理`SELECT`和处理`UPDATE`：`DELETE`

*   选择：

    ```
    SELECT u FROM My\Entity\User u WHERE u.id = :userId 
    ```

*   更新：

    ```
    UPDATE My\Entity\User u SET u.status = 'banned' WHERE u.id = :userId 
    ```

*   删除

    ```
    DELETE My\Entity\User u WHERE u.id = :userId 
    ```

您也可以使用 QueryBuilder 处理这些操作：

*   选择：

```
 $queryBuilder = $entityManager->createQueryBuilder();
    $queryBuilder
        ->select('u')
        ->from('My\Entity\User', 'u')
        ->where($queryBuilder->expr()->eq('u.id', ':userId')); 
```

*   删除：

```
 $queryBuilder = $entityManager->createQueryBuilder();
    $queryBuilder
        ->delete('My\Entity\User', 'u')
        ->where($queryBuilder->expr()->eq('u.id', ':userId')); 
```

*   更新：

```
 $queryBuilder = $entityManager->createQueryBuilder();
    $queryBuilder
        ->update('My\Entity\User', 'u')
        ->set('u.status', 'banned')
        ->where($queryBuilder->expr()->eq('u.id', ':userId')); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T01:08:26.707

另一个使用 QueryBuilder 的选项是使用 Doctrine DBAL 准备和执行函数。可能不如使用 QueryBuilder 灵活，但对于在某些情况下执行 INSERT 可能很有用。

使用方法是从实体管理器获取数据库连接。

```
$sql = "INSERT INTO table (field1, field2) VALUES ('foo', 'var')";
$stmt = $em->getConnection()->prepare($sql);
$stmt->bindValue(':invoice', $invoiceId);
$result = $stmt->execute(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-21T08:28:25.600

如果您使用 DBAL queryBuilder，则可以插入。

```
$qb = $connection->createQueryBuilder(); 
```

要使用 queryBuilder 插入，如下所示：

```
$qb->insert('MuBundle:MyClass', 'momc')
   ->values (array(
       'property1 (id for example)' => '?'
       'property2 (name for exmaple)' => '?'
   ))
   ->setParameter(0, $id)
   ->setparameter(1, $name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-10T14:00:45.393

除非您愿意编写 DQL 或 SQL，否则无法使用 QueryBuilder 插入数据。如果您正在寻找一种简单地将数据插入数据库表的方法，则必须首先确保将数据加载到要插入数据的表的实体类中。例如`$em->persist($entity);`

# javascript - 使用带有 javascript 的计数来迭代 var 名称

> ID：15619057
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:46:36.570
> 
> 标签：javascript, loops, var

我需要编写一个循环，将以下 2 个语句迭代 44 次。

```
 window.onload = function() {
        var input1 = document.getElementById("alpha1");
        var input2 = document.getElementById("alpha2");
        var input3 = document.getElementById("alpha3");
        input1.onkeypress = alphaFilterKeypress;
        input2.onkeypress = alphaFilterKeypress;
        input3.onkeypress = alphaFilterKeypress;
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:48:05.737

它没有问题：

```
for (var i = 1; i < 45; i++) {
    var input = document.getElementById("alpha" + i);
    input.onkeypress = alphaFilterKeypress;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:50:44.337

与其循环 44 次，不如委派事件？附加单个侦听器，并检查 id 是否与给定模式匹配

```
document.body.addEventlistener('keypress', alphaFilterKeypress, false); 
```

您必须更改函数定义 - 添加此检查：

```
function alphaFilterKeypress(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (!target.id.match(/alpha[0-9]+/))
    {//don't handle the event
        //event was fired on an element with another (or no) id
        return e;//don't handle it here
    }
    //an element with id alpha[number] fired the event
    //handle the event
} 
```

正如您从[上一个 SO question中看到的那样，您使用的](https://stackoverflow.com/questions/4843472/javascript-listener-keypress-doesnt-detect-backspace)*“关键”*事件的类型很重要。如果`keypress`事件不会在退格键、控制键等键上接收到...您可能希望更喜欢使用该`keydown`事件。
试一试，找出最适合您需求的活动

# python - django - 如何将图像数组发布到视图

> ID：15619058
> 
> 赞同：1
> 
> 时间：2013-03-25T15:46:43.250
> 
> 标签：python, html, django, http, post

从昨天开始，我就被困在这个问题上。我有一个表单，用户可以在其中选择更多图像文件并提交。现在我无法`POSTED`在我的views.py 中捕获这些图像文件。

我的html：

`<input type="file" name="images[]" />` `<input type="file" name="images[]" />`

在我的views.py中我这样做了：

`images = request.POST.getlist('images[]')`

但是一旦我`print images`，我得到`[]`，空数组。我究竟做错了什么？我想获取所有选定的图像文件并将它们保存到我认为的 db 中。

**编辑：**
这是我的 html：

```
<form action="/save/" method="post" enctype="multipart/form-data"> 
 <input type="file" name="images[]" /> 
 <input type="file" name="images[]" />
<input type="submit" value="send" />
</form> 
```

这是我的意见.py

```
fotos = request.POST.getlist('images[]')
for i in range(len(fotos)):
  print fotos[i] 
```

这里是打印`[]`，而不是每个图像的名称。为什么这个数组是空的？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:52:54.487

当 Django 处理文件上传时，它与常规的 POST 字段有点不同。数据被放置`request.FILES`并需要在那里访问。[有关处理文件上传的文档是一个很好的起点。](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)

# c# - 当我更改计算机时更改 C# 应用程序中文本的颜色

> ID：15619059
> 
> 赞同：0
> 
> 时间：2013-03-25T15:46:45.527
> 
> 标签：c#

我在 c# Visual Studio 中创建了一个应用程序，我将文本颜色设置为蓝色。当我在另一台计算机上打开应用程序时，文本颜色变为黑色

请有任何想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:48:10.077

他们使用不同的操作系统吗？

此外，该 PC 上使用的“主题”会影响某些组件的颜色。

例如，如果您在应用程序中将组件的颜色设置为，`ActiveCaption`您可能会发现另一台 PC 将具有不同颜色的活动字幕。

**如果您想查看特定值（例如 R、G、B），则创建一组局部变量，您可以在调试期间查看这些变量，或者为每台机器写入文件。**

例子：

```
Byte acR = System.Drawing.SystemColors.ActiveCaption.R;
Byte acG = System.Drawing.SystemColors.ActiveCaption.G;
Byte acB = System.Drawing.SystemColors.ActiveCaption.B; 
```

# java - 骆驼路线需要很长时间才能优雅地关闭

> ID：15619063
> 
> 赞同：1
> 
> 时间：2013-03-25T15:46:54.977
> 
> 标签：java, activemq, apache-camel

我正在将 30 个 Apache Camel v. 2.10.3 路由直接部署到 ActiveMQ 中。ActiveMQ 在几秒钟内启动，Camel 回复说它在大约 2 秒钟内启动了所有路由。

没有外部系统连接到 ActiveMQ，也没有任何消息通过 Camel。然后我等待几秒钟，然后按“Ctrl-C”（在 Windows 上）终止 ActiveMQ。然后骆驼开始它的正常关机程序......

我的问题是 ActiveMQ 无法在 300 秒内关闭所有路由。无论我做什么，它都会继续报告关闭 Camel 需要 375 秒。

我试过在路线上设置启动顺序，但似乎没有任何效果。

我之前在 ServiceMix 上部署了相同的路由，没有任何问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:32:39.953

我想到了。

我已将我的代理重命名为“localhost”以外的名称，但已要求 Camel 连接到 vm://localhost。这导致了以下结果：[http://fusesource.com/kbs/show/?id=193592-warn-brokerregistry-broker-localhost-not-started-so-using-other_broker_name-instead](http://fusesource.com/kbs/show/?id=193592-warn-brokerregistry-broker-localhost-not-started-so-using-other_broker_name-instead)。

当我要求 Camel 连接到 vm://mybroker 时，它按预期工作。

# sql-server - 使用 in(....) SQL server 的值进行排序选择

> ID：15619064
> 
> 赞同：0
> 
> 时间：2013-03-25T15:46:59.960
> 
> 标签：sql-server, database

有没有办法订购结果（例如）

```
SELECT id,age, Location
FROM Student 
WHERE Location in ('NY','DC','MI','TE') 
```

而不是让它们作为

```
id     age     Location
1       2       DC
2       2       NY
4       2       MI
6       2       TE 
```

结果应按 ('NY','DC','MI','TE') 中的顺序排列：

```
id     age     Location
2       2       NY
1       2       DC
4       2       MI
6       2       TE 
```

我认为有一个临时表并将其插入 `('NY','DC','MI','TE')`到该表中是可能的。然后使用左连接将根据需要对其进行排序。

有没有更好的解决方案。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:54:23.073

在 MySQL 中，这可以使用 来完成`FIND_IN_SET`，它返回第二个参数中第一个参数出现的索引，后者是一个包含逗号分隔值的字符串。

我认为同样的事情应该可以使用`CHARINDEX`- 试试这个：

```
SELECT id, age, location
FROM student 
WHERE location IN ('NY','DC','MI','TE')
ORDER BY CHARINDEX (location, 'NY,DC,MI,TE') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T16:03:42.600

假设您不必从表中选择城市代码，请尝试以下操作：

```
ORDER BY FIELD(Location,'NY','DC','MI','TE')
ORDER BY FIND_IN_SET(Location,'NY,DC,MI,TE')
ORDER BY LOCATE(CONCAT(',',Location,','),',NY,DC,MI,TE,')
ORDER BY Location IN ('NY','DC','MI','TE') 
```

`IN`也可以接受子查询 ( `ORDER BY Location IN SELECT city_code FROM ...`)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T15:57:46.357

任何解决方案都大致相当于使用临时表。您可以使用 CTE 或子查询，但本质上您使用不同的语法来执行相同的操作。

# java - 关闭对话片段时刷新片段

> ID：15619065
> 
> 赞同：0
> 
> 时间：2013-03-25T15:47:04.997
> 
> 标签：java, android, android-fragments, android-alertdialog

服务器上有一些更新数据库的同步过程，我想在单击对话关闭时刷新父活动以获取视图中的同步值。

我有三个片段`FragmentA.java`-`FragmentB.java`和`ragmentC.java`

在`FragmentA.java`，我有公共接口`OnEntrySelectedListener`，它有方法`getDialog()`和其他片段类`FragmentB.java`实现这个接口并有`getDialog()`方法的定义。

**片段A.java**

```
class FragmentA extends Fragment
{
  public interface OnEntrySelectedListener
  {
    getDialog();
  }
} 
```

**片段B.java**

```
 class FragmentB extends FragmentActivity implements FragmentA.OnEntrySelectedListener
   {
     @Override
    public void getDialog(Bundle bundle) {
        FragmentC cf = new FragmentC(); 
        cf.setArguments(bundle);
        cf.show(getSupportFragmentManager(), "dialog");
        }
    } 
```

**片段C.java**

```
class FragmentC extends DialogFragment {
        @Override
    public void onCreate(Bundle savedInstanceState) {
        //some code here
        }

    @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) 
    {
    view = inflater.inflate(R.layout.shared,container, false);
        view.findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) 
        {
          getDialog().dismiss(); //Here after dismiss, I want to refresh FragmentA
         }
     });
         return view;

 } 
```

现在我想`FragmentA`刷新`FragmentC`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:56:00.910

您可以向 C 添加一个接口和回调来执行以下操作：

```
 @Override
  public void onDismiss(DialogInterface dialog) {
    if (getActivity() != null && getActivity() instanceof Dismissed) {
      ((Dismissed) getActivity()).dialogDismissed();
    }
    super.onDismiss(dialog);
  }

  public interface Dismissed {
    public void dialogDismissed();
  } 
```

然后在主要活动中，您可以实现接口，当您收到呼叫时，您将其转发到片段 A。

您还可以触发 FragmentA 会监听的刷新事件。

# php - 附加到 Apache 环境路径

> ID：15619071
> 
> 赞同：0
> 
> 时间：2013-03-25T15:47:18.940
> 
> 标签：php, macos, apache, environment-variables

我有一个 Web 可访问的 PHP 脚本，它使用 shell 命令将 PDF 拖放到文本中。我通过 MacPorts 安装了 Poppler，并且正在使用 pdftotext。我能够从 CL 成功运行命令，并且在将 PHP 脚本中的完整路径提供给“/opt/local/bin/pdftotext”时。所以，我知道我的 $PATH 是正确的并且权限是足够的，但是当我尝试在 exec() 中简单地执行“pdftotext”时，我仍然得到 127 的退出状态：找不到命令。

我已经尝试了[如何将路径添加到 Apache PATH 变量？](https://stackoverflow.com/questions/2837697/how-do-i-add-paths-to-the-apache-path-variable)和[http://lists.apple.com/archives/macos-x-server/2008/Sep/msg00433.html](http://lists.apple.com/archives/macos-x-server/2008/Sep/msg00433.html)。我修改了 /etc/paths 和 /etc/profile，并添加了 /etc/paths.d/macports 都指向“/opt/local/bin”。setenv、apache_setenv 等也都没有效果。

我正在为我的本地开发使用 MAMP（我认为是 1.9）安装，OSX 10.6，PHP 5.3.5，我知道的一切都落后了:-) ...我的 $PATH 被修改为指向 MAMP bin/php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:16:41.047

/etc/paths.d/macports 将影响 macports 的 PATH 变量，而不是 Apache。您可能需要添加 /etc/parhs.d/apache （或其他）来执行您需要的操作。
**编辑**：还检查[这个](https://stackoverflow.com/questions/3428647/php-exec-path-variable-missing-elements)和[这个](https://stackoverflow.com/questions/6901583/adding-to-the-path-environment-variable-in-a-php-script)线程的解决方案。它有些过时，但仍然可以提供帮助。

# asp.net-mvc - WebAPI 删除不起作用 - 405 方法不允许

> ID：15619075
> 
> 赞同：129
> 
> 时间：2013-03-25T15:47:43.670
> 
> 标签：asp.net-mvc, asp.net-mvc-4, http-status-code-405

感谢您对此提供的任何帮助，因为该网站应该在今晚上线！

我有一个带有 Delete 方法的 web api 控制器。该方法在我运行 IIS Express（Windows 8）的本地机器上执行良好，但一旦我将它部署到实时 IIS 服务器（Windows Server 2008 R2），它就停止工作并抛出以下错误消息：

**HTTP 错误 405.0 - Method Not Allowed 无法显示您正在查找的页面，因为使用了无效的方法（HTTP 动词）**

我在网上寻找解决方案，并实施了最合理的解决方案。我的网络配置具有以下设置：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
<handlers>
    <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
    <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
    <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
    <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
    <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
    <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers>
</system.webServer> 
```

我还尝试更改 IIS 中的处理程序映射和请求过滤，但无济于事。请注意，IIS 中的 WebDAV 创作规则似乎已被禁用。

任何想法将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2013-03-25T16:05:03.323

我最终找到了解决方案！如果您遇到同样的问题，请将以下内容添加到您的 web.config

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true">
        <remove name="WebDAVModule"/> <!-- ADD THIS -->
    </modules>
    ... rest of settings here 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2014-09-22T12:58:57.227

在某些情况下，仅从模块中删除它会产生下一个错误：

> **500.21**处理程序“WebDAV”在其模块列表中有一个错误模块“WebDAVModule”
> 
> 模块：IIS Web 核心通知：ExecuteRequestHandler”

[这里](https://stackoverflow.com/questions/6697171/how-can-i-get-odata-delete-to-work)提出了解决方案。还需要从处理程序中删除它。

```
<system.webServer>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
    <handlers>
        <remove name="WebDAV" />
    </handlers>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-03-13T10:12:13.210

就我而言，上述解决方案均无效。这是因为我更改**了**`Delete`方法中的参数名称。

我有

```
public void Delete(string Questionid) 
```

代替

```
public void Delete(string id) 
```

我需要使用该`id`名称，因为这是在我的`WebApiConfig`文件中声明的名称。请注意`id`第三行和第四行中的名称：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我从[这里](https://social.msdn.microsoft.com/Forums/vstudio/en-US/8a383373-326b-47e1-afd6-21bb05a59db8/webapi-v2-visual-studio-2013-iis-express-http-405-delete-method-not-allowed?forum=wcf)得到了这个解决方案。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-04-16T07:54:47.783

HTTP`DELETE`动词的 Javascript 必须是这样的：

```
$.ajax({
    **url: "/api/SomeController/" + id,**
    type: "DELETE",
    dataType: "json",
    success: function(data, statusText) {
        alert(data);
    },
    error: function(request, textStatus, error) {
        alert(error);
        debugger;
    }
}); 
```

不要使用这样的东西**：**

```
...
data: {id:id}
... 
```

就像您使用该`POST`方法时一样。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-03-20T10:10:53.233

如果您使用的是 IIS 7.0 或更高版本。此问题主要与 IIS 服务器上的 WebDAV 扩展模块有关。这发生在使用发布或删除操作时。

**请在网络配置中尝试以下设置**

```
<system.webServer>
   <modules>
       <remove name="WebDAVModule" />
   </modules>
   <handlers>
     <remove name="WebDAV" />
   </handlers>
</system.webServer> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-12-20T13:51:53.180

在这里尝试了几乎所有解决方案后，这对我有用。将此添加到您的 API 配置文件中

```
<system.webServer>
    <handlers>
      <remove name="WebDAV" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <modules>
        <remove name="WebDAVModule" />
    </modules>
</system.webServer> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-05-20T02:01:01.087

我也遇到了同样的问题，我正在调用 WebAPi 并收到此错误。在 web.config 中为服务添加以下配置解决了我的问题

```
 <modules runAllManagedModulesForAllRequests="true">
        <remove name="WebDAVModule"/> <!-- add this -->
    </modules> 
```

在 web.config 文件中解决了我的问题。这就是我从客户端调用的方式

```
using (var client = new HttpClient())
{
    client.BaseAddress = new Uri(environment.ServiceUrl);
    client.DefaultRequestHeaders.Accept.Clear();
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
    HttpResponseMessage response = client.DeleteAsync("api/Producer/" + _nopProducerId).Result;
    if (response.IsSuccessStatusCode)
    {
        string strResult = response.Content.ReadAsAsync<string>().Result;
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-08T11:59:16.257

转到 applicationHost.config（通常在 C:\Windows\System32\inetsrv\config 下）文件并注释掉 applicationHost.config 中的以下行

1）在 <handlers> 下：

```
<add name="WebDAV" path="*" verb="PROPFIND,PROPPATCH,MKCOL,PUT,COPY,DELETE,MOVE,LOCK,UNLOCK" modules="WebDAVModule" resourceType="Unspecified" requireAccess="None" /> 
```

2）还注释掉上述处理程序在 <modules> 下引用的以下模块

```
<add name="WebDAVModule" /> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-05T06:10:29.820

就我而言，我错过了添加`{id}`，`[Route("")]`我得到了同样的错误。添加它为我解决了这个问题：`[Route("{id}")]`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-24T09:42:27.687

只是补充。如果这是你的配置

```
config.Routes.MapHttpRoute(
            名称：“默认API”，
            routeTemplate: "api/{controller}/{id}",
            默认值：新 { id = RouteParameter.Optional }
```

请按照 Hugo 所说的继续做，不要将 Route 属性设置为控制器的 get 方法，这在我的情况下是个问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-24T12:19:18.917

我有 405 错误 Method Not Allowed 因为我忽略了将 WebApi 控制器上的 Delete 方法公开。

我花了很长时间才找到这个（太长了！），因为在这种情况下我会预料到 Not Found 错误，所以我错误地假设我的 Delete 方法被拒绝了。

Not Allowed 而不是 Not Found 的原因是我也有一个 Get 方法用于相同的路由（这将是实现 REST 时的正常情况）。public Get 函数被路由匹配，然后因为 http 方法错误而被拒绝。

我知道一个简单的错误，但它可能会为其他人节省一些时间。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-31T20:47:40.960

我们必须在 web.config 中添加自定义标头，因为我们的请求有多个标头会混淆 API 响应。

```
<httpProtocol>
    <customHeaders>
        <remove name="Access-Control-Allow-Methods" />
        <remove name="Access-Control-Allow-Origin" />
        <remove name="Access-Control-Allow-Headers" />
    </customHeaders>
</httpProtocol> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-20T12:24:35.043

我有类似的问题，但对于 PUT - 没有其他建议对我有用。

但是我使用的是id`int`而不是默认值。`string`添加`{id:int}`到路线解决了我的问题。

```
 [Route("api/Project/{id:int}")]
    public async Task<IHttpActionResult> Put(int id, [FromBody]EditProjectCommand value)
    {
       ...
    } 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-01-26T07:54:57.327

Delete 方法顶部的 [HttpPost] 属性为我解决了这个问题：

```
[HttpPost]
public void Delete(int Id)
{
  //Delete logic
} 
```

# android - Eclipse 无法识别我对 HTC 的渴望

> ID：15619083
> 
> 赞同：0
> 
> 时间：2013-03-25T15:48:11.717
> 
> 标签：android, eclipse, windows-7, adb, htc-android

我正在尝试使用我的 HTC Desire 作为我的 Android 应用程序的测试手机，但 Eclipse 就是看不到它，现在如果我去设备管理器有一个黄色！，我点击卸载，重新连接我的 HTC 手机电脑无法安装驱动，谁能帮我解决这个问题？我真的需要能够将我的 HTC 手机用作测试设备。

帆布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:58:26.100

即使使用官方驱动程序，我在 HTC 手机和一些三星手机上也总是遇到同样的问题。

我发现如果您安装 PDANet [http://pdanet.co/](http://pdanet.co/)这将为您安装驱动程序并且它似乎总是有效。之后您实际上不需要该软件并且可以卸载，但它成功安装了驱动程序并检测到设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T09:29:30.730

在 Windows 8.1 上安装 HTC Sync Manager 解决了我与 HTC Desire 600 的问题。您可以从这里下载它：
[http](http://www.htc.com/www/support/software/htc-sync-manager.aspx)
://www.htc.com/www/support/software/htc-sync-manager.aspx 来自这里的详细信息： [http://grindheadgames.com/htc-desire-showing-adb-devices-fix/](http://grindheadgames.com/htc-desire-showing-adb-devices-fix/)

**重要提示：**我还注意到 USB 设置中有一个名为**'HTC Sync Manager'**的复选框。您应该检查它以启用“ **USB 调试**”。否则，尽管您在“应用程序开发”部分启用了 USB 调试，但 USB 调试将不起作用。

# c++ - 如何为一个非常大的筛子保留内存？

> ID：15619084
> 
> 赞同：0
> 
> 时间：2013-03-25T15:48:14.787
> 
> 标签：c++, arrays, memory-management, limit

我想通过筛选多达 100,000,000 个来生成素数，但是声明这个范围的 bool 数组会使我的程序崩溃。这是我的代码：

```
long long i,j,n;
bool prime[100000000+1];
prime[1]=prime[0]=false;
for(i=2;i<=100000000;i++){
    prime[i]=true;
}
for(i=2;i<=100000000;i++){
    if(prime[i]==false){
        continue;
    }
    for(j=i*2;j<=100000000;j+=i){
        prime[j]=false;
    }
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:54:57.073

数组素数的大小为 100 MB，不允许在堆栈上声明如此大的数组。尝试将数组放在全局范围内以在堆上分配它，或者使用 new(in `C++`) 或 malloc(in `C`) 分配它。之后不要忘记释放内存！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:19:13.100

变量可以存储在三个不同的内存区域：静态内存、自动内存、动态内存。自动内存（非静态局部变量）的大小有限，你越过了它，这会使程序崩溃。另一种方法是将您的数组标记为静态，这会将您的数组放置在静态存储中，或者使用动态内存。

由于这被标记为 C++... 使用`std::vector`简单易用并使用动态内存。

```
#include <vector>
//...
//...
long long i,j,n;
std::vector<bool> prime(100000000+1, true);
prime[1]=prime[0]=false;
for(i=2;i<=100000000;i++){
    if(prime[i]==false){
        continue;
    }
    for(j=i*2;j<=100000000;j+=i){
        prime[j]=false;
    }
} 
```

`std::vector<bool>`使用“位效率”表示，这意味着这里的 std::vector 将比传统数组少占用大约 8 ¹倍的内存。

`std::bitset`类似，但大小是恒定的，您必须将其标记为静态以避免占用自动内存中的空间。

您还没有问过，但 Erastostenes Sieve 并不是计算大量素数的最快算法。似乎[阿特金筛子](http://en.wikipedia.org/wiki/Sieve_of_Atkin)更快，使用更少的内存。

¹ - 当您的系统有 8 位字节时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:36:39.550

你不应该*做*一个这样大小的整体筛子。相反，使用 Eratosthenes 的分段筛子在连续的段中执行筛分。在第一段，计算段内每个筛选素数的最小倍数，然后以正常方式将筛选素数的倍数标记为合数；当所有的筛选素数都用完后，该段中剩余的未标记数为素数。然后，对于下一段，每个筛分素数的最小倍数是在前一段中结束筛分的倍数，因此筛分一直持续到完成。

考虑以 20 为一组从 100 到 200 筛分的例子；5个筛选素数是3、5、7、11和13。在从100到120的第一段中，位数组有10个槽，槽0对应101，槽*k*对应100 + 2*k* + 1， slot 9对应119。segment中3的最小倍数是105，对应slot 2；槽 2+3=5 和 5+3=8 也是 3 的倍数。槽 2 处 5 的最小倍数是 105，槽 2+5=7 也是 5 的倍数。7 的最小倍数是 105在插槽 2 处，插槽 2+7=9 也是 7 的倍数。以此类推。

函数`primes`接受参数*lo*、*hi*和*delta*；*lo*和*hi*必须是偶数，其中*lo* < *hi*，并且*lo必须大于**hi*的平方根。段大小是*delta*的两倍。长度为*m*的数组*ps包含小于**hi*平方根的筛分素数，由于偶数被忽略，因此删除了 2，这是通过正常的 Eratosthenes 筛法计算的。数组*qs*包含进入*筛子的偏移量*****相应筛选素数的当前段中最小倍数的位数组。在每个段之后，*lo*前进两倍*delta* ，因此与*筛位数组的索引**i*对应的数字是*lo* + 2 *i* + 1。****

 ***```
function primes(lo, hi, delta)
  sieve := makeArray(0..delta-1)
  ps := tail(primes(sqrt(hi)))
  m := length(ps)
  qs := makeArray(0..m-1)
  for i from 0 to m-1
    qs[i] := (-1/2 * (lo + ps[i] + 1)) % ps[i]
  while lo < hi
    for i from 0 to delta-1
      sieve[i] := True
    for i from 0 to m-1
      for j from qs[i] to delta step ps[i]
        sieve[j] := False
      qs[i] := (qs[i] - delta) % ps[i]
    for i from 0 to delta-1
      t := lo + 2*i + 1
      if sieve[i] and t < hi
        output t
    lo := lo + 2*delta 
```

对于上面给出的示例，这称为`primes(100, 200, 10)`。在上面给出的示例中，`qs`初始为 [2,2,2,10,8]，对应于最小倍数 105、105、105、121 和 117，并为第二段重置为 [1,2,6,0 ,11]，对应于最小倍数 123、125、133、121 和 143。

*delta*的值很关键；您应该使*delta*尽可能大，只要它适合高速缓存内存，以提高速度。将您的语言库用于位数组，这样您只需为每个筛子位置取一个位。如果你需要一个简单的 Eratosthenes 筛来计算筛分质数，这是我最喜欢的：

```
function primes(n)
  sieve := makeArray(2..n, True)
  for p from 2 to n step 1
    if sieve(p)
      output p
      for i from p * p to n step p
          sieve[i] := False 
```

[您可以在我的博客](http://programmingpraxis.com/contents/themes/#Prime%20Numbers)上看到更多涉及素数的算法。***

# ember.js - Ember.js ListView 处理事件

> ID：15619087
> 
> 赞同：0
> 
> 时间：2013-03-25T15:48:18.397
> 
> 标签：ember.js

Ember.js rc1 版本引入了不同的事件/动作处理。似乎不可能在一种方法中访问事件和控制器的上下文 - 尽管在旧的 ember 版本中是可能的。

查看描述我的问题的 jsFiddle：

[jsFiddle](http://jsfiddle.net/macpit/npdCy/)

```
var controller = Ember.ArrayController.create({
    itemSelected: function(context) {
        console.log(context);
        this.set('name', context.fullName);
    },        
    content: [
        {fullName: "aaaa"},
        {fullName: "bbbb"},
        {fullName: "cccc"},
    ]
});
var view = Ember.View.create({
    template: Ember.Handlebars.compile(template),
    controller: controller,
    click: function(event) {          
        console.log("clicked");
    }
}); 
```

目前我需要有两个回调：一个在控制器中获取上下文（列表项），第二个在视图中获取事件和元素。只在一个回调中同时拥有两者会更方便。我正在开发的逻辑同时需要 - 它是一个选择模型，需要访问控制器的内容和生成事件的元素。

任何想法如何在最新的 ember 版本中执行此操作？？？？谢谢，qmacpit

# imagemagick - Imagemagick Mogrify 裁剪输出名称

> ID：15619091
> 
> 赞同：1
> 
> 时间：2013-03-25T15:48:29.387
> 
> 标签：imagemagick, filenames, crop, mogrify

使用时`mogrify -crop 500x500 *.jpg`

我得到输出`*-1.jpg, *-2.jpg, *-3.jpg, *-4.jpg`

是否可以更改以使其获得不同的分隔符。例如。下划线？

输出：`*_1.jpg, *_2.jpg, *_3.jpg, *_4.jpg,`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T23:50:39.497

你可以这样做`convert`：

```
convert *.jpg -crop 500x500 -set filename:f "%t_%p" '%[filename:f].jpg' 
```

有关更多信息，请参阅[此页面](http://www.imagemagick.org/script/escape.php)。

# count - 对列中的唯一值进行编号

> ID：15619093
> 
> 赞同：2
> 
> 时间：2013-03-25T15:48:35.563
> 
> 标签：count, awk, unique, sas

我有一个文件，其中第一列有一个家庭标识符列表

```
AB
AB
AB
AB
SAR
SAR
EAR 
```

有没有一种方法可以创建一个新列，其中每个重复都被编号，为每个重复创建一个新标签，即

```
AB_1
AB_2
AB_3
AB_4
SAR_1
SAR_2
EAR_1 
```

我可以在 SAS 中执行此操作，但正在寻找 bash 选项（可能是 awk）

```
data file;
set file; 
count+1;
by name;
if first.name then count=1;
new_name=compress(name||'_'||count);
run; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:56:57.070

```
$ awk '{print $1"_"++a[$1]}' file
AB_1
AB_2
AB_3
AB_4
SAR_1
SAR_2
EAR_1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:57:17.570

试试这个单行：

```
awk '{a[$0]++;print $0"_"a[$0]}' file 
```

使用您的输入数据：

```
kent$ echo "AB
AB
AB
AB
SAR
SAR
EAR"|awk '{a[$0]++;print $0"_"a[$0]}'
AB_1
AB_2
AB_3
AB_4
SAR_1
SAR_2
EAR_1 
```

# excel - Wpf 表单和 Office 2003 excel 插件

> ID：15619094
> 
> 赞同：0
> 
> 时间：2013-03-25T15:48:36.833
> 
> 标签：excel, wpf-controls, ms-office, excel-2003

我想创建一个可以在单击菜单项时显示的 wpf 控件表单。但这个应用程序应该是 excel 的插件。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:49:02.320

不是 WPF，但 Excel 2003 可用于创建对话框。请参阅 SDK 或[http://xll.codeplex.com](http://xll.codeplex.com)和 dialog.h 头文件。文件 error.cpp 有一个如何使用它的示例。相当古老的学校，但它的工作原理。

# python - Python中小数点后的浮点数加零

> ID：15619096
> 
> 赞同：42
> 
> 时间：2013-03-25T15:48:37.757
> 
> 标签：python, floating-point, decimal

我正在从文件中读取数据，对其进行修改并将其写入另一个文件。新文件将被另一个程序读取，因此保留准确的格式至关重要

例如，我的输入文件中的一个数字是：

```
1.000000 
```

我的脚本对列应用了一些数学运算并应返回

```
2.000000 
```

但目前返回的是

```
2.0 
```

`my_float = 2.0`例如，对于文件，我将如何编写浮点数`my_float = 2.00000`？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-25T15:50:03.347

将其格式化为小数点后 6 位：

```
format(value, '.6f') 
```

演示：

```
>>> format(2.0, '.6f')
'2.000000' 
```

该[`format()`函数按照给定的](http://docs.python.org/3/library/functions.html#format)[格式说明](https://docs.python.org/3/library/string.html#formatspec)将值转换为字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-09-16T02:08:57.153

从 Python 3.6 开始，也可以进行[f 字符串](https://www.python.org/dev/peps/pep-0498/)格式化。这看起来像：

```
f"{value:.6f}" 
```

例子：

```
> print(f"{2.0:.6f}")
'2.000000' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-30T09:17:50.273

我已经尝试了 n 种方法，但没有一种方法能像我想要的那样奏效，最后，这对我有用。

```
foo = 56
print (format(foo, '.1f'))
print (format(foo, '.2f'))
print (format(foo, '.3f'))
print (format(foo, '.5f'))

output:

56.0 
56.00
56.000
56.00000 
```

这意味着 的第二个参数`format`采用您必须达到的小数位。请记住，`format`返回字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T17:35:38.797

上面是使用 format() 命令的答案，但如果您使用需要表示精确值的浮点数，您可能需要查看 Decimal 标准库对象。您可以在其上下文类中设置精度和舍入，但默认情况下，它将保留您放入其中的零的数量：

```
>>> import decimal
>>> x = decimal.Decimal('2.0000')
>>> x
Decimal('2.0000')
>>> print x
2.0000
>>> print "{0} is a great number.".format(x)
2.0000 is a great number. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-06T06:59:36.130

我在 f 字符串中使用变量时遇到了问题。当所有其他方法都失败时，请阅读手册:)

“与常规字符串文字共享相同语法的结果是替换字段中的字符不得与外部格式化字符串文字中使用的引用冲突。”

[https://docs.python.org/3/reference/lexical_analysis.html#f-strings](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)

一个例子：

```
my_number = 90000
zeros = '.2f'

my_string = f"{my_number:,{zeros}}"

print (my_string)
90,000.00 
```

my_string = f'{my_number:,{zeros}}'

由于单引号，将不起作用。

**包含 f 字符串的引号**和 f 字符串中使用的字符串变量**应该不同**。

如果对字符串变量使用单引号，则对 f 模块使用双引号，反之亦然。

# node.js - 测试多次触发的事件

> ID：15619102
> 
> 赞同：1
> 
> 时间：2013-03-25T15:48:50.170
> 
> 标签：node.js, events, testing

所以，我使用 vows js 来测试节点应用程序。

我有一些代码多次发出相同的事件。

在测试触发一次的事件时，Vows (0.7.0) 似乎很好，但如果您的代码多次发出相同的事件，vows 就会抱怨。

一年多前提交了一个我认为可能解决此问题的拉取请求，但它似乎没有发生任何事情......

有人知道一个测试框架，它可以让我测试一个发出相同事件 n 次的对象吗？

这就是我的意思（誓言）：

```
vows.describe("Vows test").addBatch({
"A test ": {
    topic: function () {
        var topic = new(events.EventEmitter);
        for(var i=0; i<10;i++) {
            topic.emit('woot', 'woot');
        }
        return topic;
    },
    on: {
        "woot": {
            "will catch event the woot event" : function (ret) {
                assert.strictEqual(ret, 'woot');
            }
        }
    }
} 
```

})

干杯...

# sql - 影响查询结果的括号

> ID：15619106
> 
> 赞同：2
> 
> 时间：2013-03-25T15:49:06.660
> 
> 标签：sql, sql-server, tsql

我对正在运行的查询的结果感到困惑。希望这不会以我拍打我的头并感觉自己像个白痴而告终，但在这里（SQL Server 2008）。

第一个查询是这样的：

```
SELECT p.product_number,p.long_desc
FROM products p
WHERE p.prod_status = 1
AND ((p.long_desc IS NULL) OR (p.long_desc LIKE '%N/A%'))
ORDER BY p.product_number 
```

第二个版本是这样的：

```
 SELECT p.product_number,p.long_desc
 FROM products p
 WHERE p.prod_status = 1
 AND p.long_desc IS NULL 
 OR p.long_desc LIKE '%N/A%'
 ORDER BY p.product_number 
```

第二个版本中有三个产品没有出现在第一个版本中，但对我来说这两个查询应该给出相同的结果。出现在第二个但不是第一个的三个项目都具有列`N/A`中的值`long_desc`。

但是，还有许多其他`N/A`版本也出现在这两个版本中。

我对这里使用括号有什么不明白的地方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T15:51:15.137

`AND`具有比`OR`（参见[文档](http://msdn.microsoft.com/en-us/library/ms190276.aspx)）更高的优先级，因此没有括号，查询等效于：

```
 SELECT p.product_number,p.long_desc
 FROM products p
 WHERE (p.prod_status = 1
 AND p.long_desc IS NULL) 
 OR p.long_desc LIKE '%N/A%'
 ORDER BY p.product_number 
```

# jquery-mobile - JQuery Mobile 上两页合一的响应式设计

> ID：15619108
> 
> 赞同：1
> 
> 时间：2013-03-25T15:49:08.760
> 
> 标签：jquery-mobile, responsive-design

我正在尝试使用响应式设计的 JQuery Mobile 创建一个移动应用程序。

换句话说，我希望在智能手机中将“page1.html”和“page2.html”加载到这样的单独页面中：

```
 _________              __________
|Page1    |             |Page2    |
|.html    |  on click   |.html    |
|         | <---------  |         |
|         |             |go to    |
|go to    | on click    |page1 btn|
|page2 btn| ----------> |         |
|_________|             |_________| 
```

而且，在平板电脑中，我希望 page1.html 和 page2.html 像这样加载到同一页面中：

```
-----------------------------
|Page1.html   | Page2.html   |
|                            |
|                            |
|                            |
|                            |
|                            |
|---------------------------- 
```

如何使用 JQueryMobile 做到这一点？我曾尝试 $.mobile.loadpage(url) 和 $.mobile.changepage(url) 但问题是页面已被替换，我需要在平板电脑的单个视图中拥有两个页面。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:16:58.253

它很简单，就像@Omar 说的那样，首先使用像这样的单页模板，'data-role=page' 表示每个页面。

```
<body>
 <div data-role="page" data-theme="d" id="pageOne">
 <---header---->
 <--- content --->
 <---footer---->
 </div>
 <div data-role="page" data-theme="d" id="pageTwo">
 <---header---->
 <--- content --->
 <---footer---->
 </div> 
```

现在，Jquery mobile 将在首次加载时自动显示“pageOne”并隐藏“pageTwo”，导航到“pagetwo”时将隐藏“pageOne”。

在此之后，您可以编写类似于以下内容的 CSS 媒体查询：

```
@media all and (min-width: 450px) {
   #pageOne{
    display:block;
    float: left;
    width:50%;
    postion:relative;
    }
   #pagetwo{
    display:inline-block;
    float:right;
    width:50%;
    padding-left: 2em;
    postion:relative;
    }
} 
```

因此，如果任何宽度大于上述宽度（450px）的页面，两个页面都会并排显示。希望这可以帮助。这是我制作的一个简单的工作示例。

[http://jsfiddle.net/uwZpM/](http://jsfiddle.net/uwZpM/)

# windows - 为什么 git sparse checkout 会留下目录？

> ID：15619112
> 
> 赞同：3
> 
> 时间：2013-03-25T15:49:17.407
> 
> 标签：windows, git, sparse-checkout

一些背景知识： 我公司的服务模式最初是基于设备的服务器模式。我们将向我们的客户发送一台装有 Windows Server 2003/2008 的服务器，预装了一个网络服务器和我们的软件。我们将所有客户端特定的配置移至 Git 存储库，并使用 sparse-checkout 使每个服务器仅包含客户端软件正常运行所必需的内容。

在设置稀疏结帐时，我们遇到了巨大的不一致。干的好

```
git clone git@github.com:ourclientconfigrepo.git .
git config core.sparsecheckout true
echo www.thisclient.com/ > .git/info/sparse-checkout
git read-tree -m -u HEAD 
```

预期的结果是

```
ls
www.thisclient.com/ 
```

但我们得到

```
ls
www.thisclient.com/
www.randomclient1.com/
www.randomclient2.com/
www.randomclient3.com/ 
```

我已经尝试了多次，每次都在一个新目录中，每次都出现问题。我的 ju-git-su 在这里失败了。我们使用的是 git 版本 1.8.1.msysgit.1。

感谢您的帮助，如果我需要提供更多信息，请告诉我。

## ---编辑1---

澄清：存储库只是我们客户的配置目录。每个客户端在存储库中都有一个不同的目录，我们试图在每个客户端的单独服务器上进行稀疏检出，因此我们试图排除除了有问题的客户端之外的所有内容。

## ---编辑2---

只是一个更新，结果证明它是 Windows 文件夹权限的问题，Git 试图删除非空目录。通过删除空文件夹来修复它。感谢您提供帮助的所有尝试！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-06-14T19:33:56.620

您的克隆操作不是创建稀疏克隆的正确方法。代替：

```
git clone ... 
```

你应该使用这个序列：

```
mkdir repo ; cd repo ; git init
git remote add -f origin <url>
git config core.sparsecheckout true
echo <dir1>/ >> .git/info/sparse-checkout
echo <dir2>/ >> .git/info/sparse-checkout
echo <dir3>/ >> .git/info/sparse-checkout
git pull origin master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:01:34.127

部分解决方案：根据[git-read-tree(1)](https://www.kernel.org/pub/software/scm/git/docs/git-read-tree.html#_sparse_checkout)，您可以通过放置 ! 在文件名前面。然而，这可能是一个误写（这意味着这也适用于目录，而不是文件）。

我会继续调查。

根据[https://stackoverflow.com/a/11222033/1210278](https://stackoverflow.com/a/11222033/1210278)，您可以使用`git update-index --skip-worktree www.randomclient1.com/`.

[https://stackoverflow.com/a/9575837/1210278](https://stackoverflow.com/a/9575837/1210278)暗示排除仅适用于目录，并表示它存在一些错误。

# python - Anaconda Acclerate / NumbaPro CUDA 链接错误 OSX

> ID：15619132
> 
> 赞同：5
> 
> 时间：2013-03-25T15:50:19.717
> 
> 标签：python, gpu, jit, anaconda, numba-pro

总体目标是使用[NumbaPro](http://docs.continuum.io/numbapro/index.html)在 GPU 上运行一些功能（在 OSX 10.8.3 上）。

在开始之前，我只是想把所有东西都设置好。根据[这个页面](http://docs.continuum.io/numbapro/CUDASupport.html)，我安装了 CUDA，注册为 CUDA 开发人员，下载了 Compiler SDK 并设置了 NUMBAPRO_NVVM=/path/to/libnvvm.dylib 环境变量。

但是，运行这个基本的测试功能：

```
from numbapro import autojit

@autojit(target='gpu')
def my_function(x):
    if x == 0.0:
        return 1.0
    else:
        return x*x*x

print my_function(4.4)
exit() 
```

引发此错误：

```
File ".../anaconda/lib/python2.7/site-packages/numba/decorators.py", line 207, in compile_function
    compiled_function = dec(f)
File "...lib/python2.7/site-packages/numbapro/cudapipeline/decorators.py", line 35, in _jit_decorator
File "...lib/python2.7/site-packages/numbapro/cudapipeline/decorators.py", line 128, in __init__
File "...lib/python2.7/site-packages/numbapro/cudapipeline/environment.py", line 31, in generate_ptx
File "...lib/python2.7/site-packages/numbapro/cudapipeline/environment.py", line 186, in _link_llvm_math_intrinsics
KeyError: 1 
```

我试过@vectorize'ing 而不是autojit，同样的错误。@autojit 本身没有目标可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T00:14:38.410

为了子孙后代，我询问了 Continuum Support。他们回应：

> 您似乎正在运行具有计算能力 1.x 的 CUDA GPU。NVVM 只支持 CC2.0 及以上。我们绝对应该有更好的错误报告，并在 NumbaPro 文档中明确说明支持的计算能力。

# python - 特定模块有表单导入错误 Django

> ID：15619133
> 
> 赞同：1
> 
> 时间：2013-03-25T15:50:20.777
> 
> 标签：python, forms, module

我在 forms.py 的特定模块中导入表单字段时遇到问题我有以下代码

```
from django import forms
from django.forms import ModelForm
from koalified.seeker.models import *
from django.contrib.auth.models import User

class RegistrationForm(ModelForm):
    username = forms.CharField(label=(u'Username'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
    ver_password = forms.CharField(label=(u' Verify Password'), widget=forms.PasswordInput(render_value=False))
    email = forms.EmailField()

    class Meta:
            model = Seeker
            exclude = ('user','verified','premium')

    def clean_username(self):
            ''' Checking username availability '''
            username = self.cleaned_data['username']
            try:
                    User.objects.get(username=username)
            except User.DoesNotExist:
                    if len(username)  >= 5 and len(username) < 21:
                        return self.cleaned_data['username']
                    else:
                        raise forms.ValidationError("Username must be between 5 and 20 characters")
            raise forms.ValidationError("That username is already in use")

    def clean_ver_password(self):
            password = self.cleaned_data.get('password')
            ver_password = self.cleaned_data.get('ver_password')

            if not ver_password:
                    raise forms.ValidationError("You must confirm your password")
            if password != ver_password:
                    raise forms.ValidationError("Passwords do not match")
            return ver_password 
```

我不断收到一个视图不存在错误，我已经研究过，它建议进入 shell 并尝试导入。这是导入的以下输出

```
Traceback (most recent call last):
    File "<console>", line 1, in <module>
    File "/home/jmcguffee1/django.koalified.com/koalified/koalified/seeker/forms.py", line 6, in <module>
    class RegistrationForm(ModelForm):
    File "/home/jmcguffee1/django.koalified.com/koalified/koalified/seeker/forms.py", line 7, in RegistrationForm
    username = forms.CharField(label=(u'Username'))
    AttributeError: 'module' object has no attribute 'CharField' 
```

我查看了一些问题，发现人们可能有拼写问题，但我一遍又一遍地尝试这个，无法让它在我的其他模块中加载表单工作得很好，比如我的登录表单

```
from django.contrib.auth.models import User
from django import forms

class LoginForm(forms.Form):
    username = forms.CharField(label=(u'Username'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False)) 
```

我已经尝试手动导入字段并且它有效，即

```
from django.forms.fields import CharField, EmailField
username = CharField() 
```

这工作正常我已经回到我的外壳并导入 django.forms 并尝试从那里加载它

> > > from django import forms username = forms.CharField(label=(u'Username')) 用户名

我检查了我的 models.py 和 views.py 中的循环调用，并且没有其他 django 表单的导入。似乎这个特定模块没有正确加载表单字段。如果不够清楚，可以提供更多信息。

这是答案的解决方案

```
>>> from django import forms
>>> print 'form is : ', forms
form is :  <module 'django.forms' from '/home/jmcguffee1/django.koalified.com/kf/lib/python2.6/site-packages/Django-1.4.3-py2.6.egg/django/forms/__init__.pyc'>
>>> from koalified.seeker.models import *
>>> print 'form is : ', forms
form is :  <module 'django.forms.forms' from '/home/jmcguffee1/django.koalified.com/kf/lib/python2.6/site-packages/Django-1.4.3-py2.6.egg/django/forms/forms.pyc'>
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:57:29.470

这是一个猜测：在您的 models.py 文件中，您是否导入了表单模块？我猜你会的。那么这一行就是问题所在：

```
from koalified.seeker.models import * 
```

这会将模型模块中的*每个*全局名称导入当前命名空间。由于其中一个名称是`forms`，它指的是当前的表单模块，因此它会覆盖顶部的导入：所以`forms`现在指的是同一个模块，而不是 Django 表单模块。

这就是为什么**你不应该使用`from x import *`. 要么只是做`from koalified.seeker import models`并参考`models.Seeker`等，要么做`from koalified.seeker.models import Seeker, TheOtherModel`等。IMO第一个更好，但这是一个偏好问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:58:16.877

星号导入是弄乱命名空间的可靠方法。尝试添加几个打印语句，如下所示，并检查星形导入后绑定的“表单”名称

```
from django import forms
print "forms is :", forms
# ....
from koalified.seeker.models import *
print "forms is :", forms 
```

# java - 在java中可逆地改组一个int数组

> ID：15619134
> 
> 赞同：4
> 
> 时间：2013-03-25T15:50:26.337
> 
> 标签：java, arrays, shuffle, steganography

我有一个相当大的 int 数组。我需要使用一个键完全洗牌。我应该能够使用相同的键获得原始数组。我搜索了任何洗牌算法，但我发现像 Fisher Yates 这样的算法不使用密钥。

int 数组是图像的像素值。我需要将数据隐藏到其中。因此，在对数组进行洗牌后隐藏数据，只有在拥有密钥的情况下才能访问数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:53:22.913

Fisher-Yates 使用伪随机数生成器，您可以使用密钥对其进行播种（查找加密 PRNG）。要反转该过程，请使用相同的键对索引数组 [0, *n* ) 进行洗牌，然后执行反向洗牌。

# c# - 我想修改 IE 如何生成 cookie

> ID：15619135
> 
> 赞同：0
> 
> 时间：2013-03-25T15:50:28.193
> 
> 标签：c#, asp.net, internet-explorer

人们使用两个不同的网站，我们称它们为 A 和 B。现在，就登录页面而言，A 和 B 在设计上几乎相同，但 A 和 B 的用户帐户登录存储在单独的数据表和信息中是不同的。当有人登录 A 时，IE 会将他们的信息存储在一个 cookie 中，并在进入 B 时调用它，即使它们并不相同。在登录 Web 表单中，我找不到生成 cookie 的代码，所以我假设一切都在 IE 中完成。我在每个用户的 AppData 文件夹中找到了据称存储所有 IE cookie 的文件“index.dat”，但我不知道如何访问它，更不用说更改 IE 存储 cookie 的方式了。

我的目标是让 IE 为 A 和 B 提供不同的 cookie。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:54:39.153

将站点放在不同的域上。如果站点共享一个域，它们将看到彼此的 cookie。你无法改变这一点。这就是 cookie 的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:07:36.457

所以我想您想将默认的 asp.net 表单身份验证 cookie 名称更改为其他名称。

web.config 中的类似内容：

```
 <authentication mode="Forms">
    <forms name="myCustomCookieForApp1" ... />
  </authentication> 
```

你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/ff647070.aspx](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:57:37.523

IE 将 A 的 cookie 发送到 B 的唯一方法是，如果它们在同一个域中，并且您尚未配置登录机制以将 cookie 限制到您的子域。

查看[在父域请求中发送的子域 cookie？](https://stackoverflow.com/questions/3865345/sub-domain-cookies-sent-in-a-parent-domain-request)

# crystal-reports-2010 - Crystal Report 将公式结果显示为 00

> ID：15619136
> 
> 赞同：0
> 
> 时间：2013-03-25T15:50:28.920
> 
> 标签：crystal-reports-2010

首先，如果以前有人问过这个问题，我想道歉，我只是找不到答案。直截了当：我的问题如下：我正在为 VS2010 使用 Crystal Reports，并且我有一个字段应该根据 If 检查显示 1 或 -1

```
If IsNull ({Orders.OrderReplacedBy})
Then 1
Else -1 
```

它应该在我的报告 1 中显示该字段的空值，否则显示 -1。问题是，在我的报告中，无论 if 测试的值如何，我都只得到 .00。此外，我还有另一个公式字段，它是报告上显示的所有 1 和 -1 的总和，它似乎有点奇怪。在我的数据库中，我总共有 772 行，其中 39 为 NULL（因此应该有 733 个 1 和 39 个 -1，总和为 694），显示的总和为 488。总和的代码如下：

```
Sum({@N}) 
```

其中 N 是我计算 1 和 -1 的字段。

到目前为止我已经尝试过：

*   将 If 测试从 IsNull 更改为`ToText({Orders.OrderReplacedBy})=""`
*   将 If 测试更改`{Orders.OrderReplacedBy}>0`为，因为数据库中的 OrderReplacedBy 字段是数字并且不能有小于零的值，因此 NULL 应该只触发 Else。
*   尝试将公式的显示更改为`"1"`，`ToNumber("1")`但似乎没有任何效果

老实说，我不知道还有什么可以尝试的，而且我对 Crystal Reports 也一无所知（我只使用了 2 天，只需要修改现有应用程序的报告）。

任何帮助，将不胜感激，

谢谢 ：）

PS：我正在使用 Silverlight 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:01:38.607

由于没有人回答，我认为这没有发生在任何人身上，或者没有太大的兴趣。但是在做了更多的研究并尝试了其他东西之后，我发现了一个我会发布的解决方法（也许其他人会碰到这个，谁知道？）：在 N 公式中（我不知道为什么它没有我最后一次尝试工作）我改变了这样的事情：

```
If IsNull({Orders.OrderReplacedBy})
Then "1"
Else "-1" 
```

添加了一个未在报告中使用的新公式，称为 Numbers

```
If {@N}="1"
Then 1
Else -1 
```

然后我更改了求和公式以匹配中间字段

```
Sum({@Numbers}) 
```

我仍然不知道为什么报告不想向我显示 N 公式中的数字，也不知道为什么 sum 公式没有计算出正确的总和。

我希望这至少对其他人有用，

干杯!

# kendo-ui - 剑道编辑器模板（网格）

> ID：15619139
> 
> 赞同：0
> 
> 时间：2013-03-25T15:50:40.227
> 
> 标签：kendo-ui, kendo-grid

我正在尝试使用[Editor Templates](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/editor-templates)填充一个下拉列表以在我的 Kendo Grid 中使用。

我的 StatesEditor.cshtml 包含：

```
@(Html.Kendo().DropDownList()
.Name("State") 
.DataValueField("StateID") 
.DataTextField("ShortName") 
.BindTo((System.Collections.IEnumerable)ViewData["states"])) 
```

在我的控制器中，我有：

```
public ActionResult Index()
    {
        var db = new ACoreEntities();
        db.Configuration.ProxyCreationEnabled = false;
        var states = db.StateLookups;

        var stateList = states.Select(state => state.ShortName);

        ViewData["states"] = stateList;

        return View("~/Views/System/PMarkup/Index.cshtml");
    } 
```

在我的实际网格中，当我单击该行的“编辑”按钮时，我得到一个包含 51 个“未定义”条目的下拉列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:28:44.850

我最终创建了一个 State 模型，然后在我的 ActionResult 中我将代码更改为：

```
ViewData["states"] = new ACoreEntities()
            .StateLookups
            .Select(s => new State
            {
                Id = s.StateID,
                ShortName = s.ShortName
            })
            .OrderBy(s => s.ShortName); 
```

# java - $avg 不返回平均值

> ID：15619142
> 
> 赞同：0
> 
> 时间：2013-03-25T15:50:48.773
> 
> 标签：java, mongodb, average, jongo

这是我的代码：

```
//Build the query
        //match only records in cluster 1
        DBObject match = new BasicDBObject("$match", new BasicDBObject("clusterId",_id));
        //the projected result must be : clusterId, squeezePlay, weakShowdown, playsWithFriends
        DBObject projectFields = new BasicDBObject("clusterId",1);
        projectFields.put("squeezePlay", 1);
        projectFields.put("weakShowdown", 1);
        projectFields.put("playsWithFriends", 1);
        DBObject project = new BasicDBObject("$project", projectFields);        
        //the groupfields are the average of each category grouped by clusterId
        DBObject groupFields = new BasicDBObject("_id",new BasicDBObject("clusterId","$clusterId"));
        groupFields.put("squeezePlay", new BasicDBObject("$avg","$squeezePlay"));
        groupFields.put("weakShowdown", new BasicDBObject("$avg","$weakShowdown"));
        groupFields.put("playsWithFriends", new BasicDBObject("$avg","$playsWithFriends"));
        DBObject group = new BasicDBObject("$group", groupFields);

        AggregationOutput output = coll.aggregate( match, project, group); 
```

数据库中的玩家如下：

```
 Player p1 = new Player();
        p1.SetClusterID(1);
        p1.SetId("Player 1");
        p1.SetNumberOfPlays(21);
        p1.SetPlaysWithFriends(22);
        p1.SetSqueezePlay(23);
        p1.SetWeakShowdown(24);

        Player p2 = new Player();
        p1.SetClusterID(1);
        p2.SetId("Player 2");
        p2.SetNumberOfPlays(11);
        p2.SetPlaysWithFriends(12);
        p2.SetSqueezePlay(13);
        p2.SetWeakShowdown(14); 
```

输出应该是： (17.0, 18.0, 19.0) 但我得到的是：`"Averages are: 23.0 22.0 24.0"`这对我来说更像是一个 Max（或者可能只是 Player 1 的结果）......我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:56:01.377

打字错误：

你应该`p2.setClusterId(1)`在实例化播放器 p2 之后说

# html - 调整内联 div 的大小时如何使文本换行而不先将 div 移到新行上？

> ID：15619144
> 
> 赞同：1
> 
> 时间：2013-03-25T15:50:50.180
> 
> 标签：html, css, text, resize

我正在尝试为我正在做的网站布局评论板，但在调整大小时遇到​​了一些麻烦。

示例：http: [//jsfiddle.net/kvDr3/2](http://jsfiddle.net/kvDr3/2)

```
.container {
  width: 70%;
  background-color: yellow;
}

.post {
  padding-bottom: 10px;
  padding-top: 10px;
}

.number {
  width: 40px;
  margin-right: 10px;
  display: inline-block;
  text-align: center;
}

.message {
  display: inline-block;
}

.title {
  color: black;
}

.info {
  color: #999;
}
```

```
<body>
  <div class="container">

    <div class="post">
      <div class="number">1.</div>
      <div class="message">
        <div class="title">Bla bla bla bla blaaaaaaaa bla bla bla sheep bla chair bla bla bla foo bla bla bla </div>
        <div class="info">Post by JoshuaESummers</div>
      </div>
    </div>

    <div class="post">
      <div class="number">2.</div>
      <div class="message">
        <div class="title">Bla bla bla bla blaaaaaaaa </div>
        <div class="info">Post by JoshuaESummers</div>
      </div>
    </div>

  </div>
</body>
```

即使页面调整大小，我也想保持我的“数字”和“消息”之间的空间不变。我不确定 JSFiddle 是如何加载的——但是当“结果”选项卡足够宽时，两条评论的数字右侧都有空间。

当页面变小时，顶部 div 在文本开始换行之前跳下一行 - 同时将较短的帖子留在适当的位置 - 这一切看起来都相当难看！我不想使用表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:18:52.443

[http://jsfiddle.net/kvDr3/7](http://jsfiddle.net/kvDr3/7)

```
.post {
    white-space: nowrap;
}
.number {
    float: left;
}
.title, .info {
    white-space: normal;
    margin-right: 60px;
} 
```

您可能还想在 .container 上放置最小宽度或溢出隐藏。最终，当你缩小它时，东西就会推出。

# java - 用于查询 LDAP 的 Java API

> ID：15619147
> 
> 赞同：9
> 
> 时间：2013-03-25T15:51:00.540
> 
> 标签：java, active-directory, ldap

我正在寻找查询 LDAP 服务器以从中检索所有用户条目。我遇到了一些图书馆

1.  [开放式LDAP](http://www.openldap.org/jldap/overview.html)
2.  [LDAP SDK](https://www.unboundid.com/products/ldapsdk/)
3.  [Mozilla 目录](https://wiki.mozilla.org/Directory)
4.  [Apache 目录 API](http://directory.apache.org/api/)

我的要求是查询像 AD 服务器这样的 LDAP 实现中的所有用户，易于编程和图书馆周围的良好社区。我在这里找不到明显的赢家。有人能告诉我广泛使用且强大的 API 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T15:59:30.687

与 Java 一起使用的最佳 API 是[UnboundID LDAP SDK](https://ldap.com/unboundid-ldap-sdk-for-java/)。它清晰、完整、完全实现了 LDAP 标准规范、易于使用和理解、文档齐全、线程安全，而且标准版是免费的。甚至没有其他 API 可以接近。

### 也可以看看

*   [使用 UnboundID LDAP SDK 的 LDAP 示例](https://code.google.com/p/ldap-sample-code/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-08-16T23:23:00.927

不得不潜入 Java LDAP SDK 市场，因为一些带有 SDK 错误的旧 LDAP JAVA 程序需要修复，而且我有一段时间失去了对支持的 Java LDAP API 的最新概述。一些研究让我看到了几个古老的概述和这个相当古老的线程。我想，我只是在这里分享我更新的 SDK 发现。

到目前为止，Java LDAP SDK 市场似乎提供了以下功能：

*   jLDAP（Novell Java LDAP SDK）、OpenLDAP Java SDK（Novell LDAP SDK 的兄弟分支）、Netscape/Sun Java LDAP SDK、OpenDS LDAP SDK：所有 4 个存储库似乎实际上已经死掉/无人维护了好几年（其中一些已经有十年了） ） 现在。看不到支持公司或活跃的社区。

*   Oracle LDAP SDK：基本上是以前的 Netscape/Sun Java SDK，有付费的 Oracle 支持，但也没有维护。甚至在开源世界中都不存在。

*   OpenDJ Java LDAP SDK：支持公司已经远离开源市场，不再维护这个 SDK。最新的 SDK 版本 3.0.0 已经有好几年了，从未离开 beta 阶段，最新的官方发布版本更早：2.6.11。据说 SDK 的商业版本也几乎被放弃了。

*   ldaptive.org：一些大学项目。以前的 JNDI 包装器，但现在声称拥有自己的 LDAP SDK 协议实现。在大学外围似乎没有社区或用户。没有死，但目前还不清楚，这里可以期待什么质量状态。如果你问我，这个项目会做得更好，花时间支持 Apache LDAP SDK 项目，因为实际上没有人需要另一个look-mom-I-also-made-an LDAP-Client-SDK在一个充满其他大多数平庸的 JAVA LDAP SDK 的饱和市场中。

*   Apache LDAP SDK：与其他 Apache 项目相比，LDAP SDK 的速度确实很慢。不知何故，Apache LDAP 似乎错过了一个真正的公司支持的东西，它只是有才华的爱好爱好者推动事情向前发展。您可能不想使用 SDK V1.0 开始任何新项目，因为它们声明 V2.0 破坏了接口代码。但是您可能还不想使用 SDK V2.0，因为它仍然是 beta 版，没有人知道它会保持 beta 多长时间（V1 保持 beta 6 年......）。SDK 远未消亡，它只是显示出非常缓慢的进展。

*   Java JNDI：自古以来就内置在 Java 中，自发布以来就没有改变。Still 对于编码来说真的很难看，文档是一团糟，除了基本搜索之外的每项任务都是实现的噩梦，基本上每个项目都无法正确实现它，有几件事被设计破坏了。似乎有一些关于未来 JDK 的 JNDI-LDAP 继任者的概念想法，但到目前为止还没有遵循。

*   无绑定SDK：成熟的，维护最好的SDK，功能丰富，但背后的公司还是风投，烧钱。到目前为止，看起来他们不会很快站起来。因此，SDK 支持的长期方面尚不清楚。商业项目中 SDK 的前党员曾经是它的 GPL 许可证。开源版本现在似乎也有 LGPL 许可证（可能适合也可能不适合项目）。

*   Spring：似乎是一个稳定的 LDAP SDK，而且拥有庞大的 Spring 社区。但功能较少且没有最前沿的东西。虽然个人还没有使用此 SDK 的经验。

所以现在，Java LDAP 似乎有四个合理的选择：JNDI、Unbound、Spring、Apache，各有优缺点。一旦你开始使用 JNDI，你可能会非常讨厌它。一个好的建议可能是，不要急于迁移旧 SDK 的项目，而是投入额外的精力来实现包装器代码，以便以后在需要时能够轻松地切换 SDK。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T05:44:29.790

检查[Apache Directory Client API](http://directory.apache.org/api/)，它是开源的并且有一个活跃的社区（完全披露：我从事 Apache Directory 项目），最重要的是 Apache Directory Client 默认支持所有基本的 LDAP 控件，包括密码策略和 syncrepl，这与一些支持这些的商业版本不同仅在付费版本中。

如果需要，您可以轻松添加新的/自定义控件和扩展操作，并且在注释驱动的[测试框架的帮助下启动内存目录服务器非常容易](http://svn.apache.org/repos/asf/directory/apacheds/trunk/test-framework/)

查看此[示例](http://svn.apache.org/repos/asf/directory/apacheds/trunk/ldap-client-test/src/test/java/org/apache/directory/shared/client/api/operations/ClientAddRequestTest.java)，了解如何利用 API 和测试框架进行单元测试。

而且，如果您在单元测试中需要 Kerberos v5 服务器，它只是一个[注释](http://svn.apache.org/repos/asf/directory/apacheds/trunk/kerberos-test/src/test/java/org/apache/directory/server/kerberos/kdc/KerberosTcpITest.java)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T13:14:02.203

我们使用 UnboundID LDAP SDK。很好，有很多例子和很好的支持。

对 JLDAP 和 Mozilla 目录 API 的支持和维护不佳是我们退出使用它们的原因。

像[https://wiki.mozilla.org/LDAP_Java_SDK](https://wiki.mozilla.org/LDAP_Java_SDK)不存在。JLDP sdk 已多年未更新。（我记得是 2009 年）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-04T06:13:09.943

我在生产中使用[https://www.ldaptive.org/](https://www.ldaptive.org/)，到目前为止我很高兴它就像“ORM”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-05T14:11:52.187

还有来自 Imperva 的开源库[https://github.com/imperva/domain-directory-controller](https://github.com/imperva/domain-directory-controller)

在那里你可以找到一个很好的查询示例。

# performance - 用于 mongodb 精细搜索的许多索引

> ID：15619151
> 
> 赞同：2
> 
> 时间：2013-03-25T15:51:13.043
> 
> 标签：performance, mongodb, indexing

在这里提到[这个](https://stackoverflow.com/questions/3416402/badoo-com-user-search-how-can-this-be-done)问题：

我正在使用 mongodb 作为我的主数据库在一个类似的站点上工作。可以想象，每个用户对象都有很多需要可搜索的字段，例如心情、城市、年龄、性别、吸烟者、饮酒者等。

现在，除了每个集合不能超过 64 个索引的问题之外，将索引分配给我的所有字段是否明智？

可能还有另一种可行的方法：标签（请参阅[另一个](https://stackoverflow.com/questions/7869125/mongodb-many-indexes-vs-single-index-on-array-of-sub-documents)问题）如果我在一组预定标签上设置索引，然后对它们进行文本搜索，会更好吗？因为我只使用一个索引。你怎么看？例如：

```
{
   name: "john",
   tags: ["happy", "new-york", "smoke0", "drink1"]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:43:53.777

MongoDB [（还）不支持索引交集](https://jira.mongodb.org/browse/SERVER-3071)，所以规则是：每个查询一个索引。您的某些查询参数的选择性极低，极端的例子是布尔值，索引这些参数通常会减慢而不是加快速度。

作为一个简单的近似，您可以创建一个以最高选择性字段开头的复合索引，例如 {"city", "age", "mood", ... }。但是，您将始终必须使用城市约束。如果您查询 {age, mood}，则不会使用上述索引。

如果您可以使用索引将结果集缩小到合理的大小，那么该集中的扫描将不会影响性能。更准确地说，如果您说`limit(100)`MongoDB 必须扫描 200 个项目来填充这 100 个项目，那么这并不重要。

危险在于对数据库的搜索范围非常狭窄——如果您必须对整个数据集执行扫描以找到唯一不快乐、饮酒且年龄超过 95 岁的不吸烟者，事情会变得很糟糕。

如果您想允许非常细粒度的搜索，那么像 SolR 这样的专用搜索数据库可能是更好的选择。

编辑：这个`tags`建议对我来说有点像使用撬棍——也许MongoDB FAQ 中推荐的[键/值多键索引是一个更干净的解决方案：](http://docs.mongodb.org/manual/faq/indexes/#how-can-i-effectively-use-indexes-strategy-for-attribute-lookups)

```
{ _id : ObjectId(...),
  attrib : [
            { k: "mood", v: "happy" },
            { k: "city": v: "new york" },
            { k: "smoker": v: false },
            { k: "drinker": v: true }
           ]
} 
```

但是，YMMV 和 'clean' 和 'fast' 通常并不指向同一个方向，因此这种`tags`方法可能一点也不差。

# qt - 使用 Qt 设置 http get 请求参数

> ID：15619153
> 
> 赞同：6
> 
> 时间：2013-03-25T15:51:15.260
> 
> 标签：qt, rest, curl, parse-platform

我正在 Qt 中开发一个使用 REST API 从 Parse.com 检索数据的基本应用程序。我浏览了一些类引用和 cURL 手册，但仍然不清楚如何设置请求参数。例如，我想对用户进行身份验证。这是 Parse 提供的 curl 示例：

```
curl -X GET \
-H "X-Parse-Application-Id: myappid" \
-H "X-Parse-REST-API-Key: myapikey" \
-G \
--data-urlencode 'username=test' \
--data-urlencode 'password=test' \
https://api.parse.com/1/login 
```

我像这样设置网址和标题

```
QUrl url("https://api.parse.com/1/login");
QNetworkRequest request(url);

request.setRawHeader("X-Parse-Application-Id", "myappid");
request.setRawHeader("X-Parse-REST-API-Key", "myapikey");

nam->get(request); 
```

当没有参数时效果很好，但是我应该使用什么来实现与 curl 与 --data-urlencode 开关相同的效果？

谢谢你的时间

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T17:10:52.750

不幸的是，QUrl::addQueryItem() 在 qt5 中已弃用，但从那里开始，我发现 QUrlQuery 类具有 addQueryItem() 方法，并且可以生成 QUrl 的 setQuery() 方法可接受的查询字符串，因此它现在看起来像这样工作正常：

```
QUrl url("https://api.parse.com/1/login");
QUrlQuery query;

query.addQueryItem("username", "test");
query.addQueryItem("password", "test");

url.setQuery(query.query());

QNetworkRequest request(url);

request.setRawHeader("X-Parse-Application-Id", "myappid");
request.setRawHeader("X-Parse-REST-API-Key", "myapikey");

nam->get(request); 
```

感谢克里斯的提示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T16:25:37.580

我相信`QUrl::addQueryItem()`这就是你要找的

```
QUrl url("https://api.parse.com/1/login");
url.addQueryItem("username", "test");
url.addQueryItem("password", "test");
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T09:57:41.897

尝试使用[QtCUrl](https://github.com/pavlonion/qtcurl)。如果您熟悉 curl，这很容易。

```
QtCUrl cUrl;

QUrl url("https://api.parse.com/1/login");
url.addEncodedQueryItem("username", "test");
url.addEncodedQueryItem("password", "test");

QtCUrl::Options opt;
opt[CURLOPT_URL] = url;
QStringList headers;
headers
    << "X-Parse-Application-Id: myappid"
    << "X-Parse-REST-API-Key: myapikey"

opt[CURLOPT_HTTPHEADER] = headers;
QString result = cUrl.exec(opt); 
```

# iphone - iphone IOS 无论如何都要在工具栏中添加控件以显示在前面

> ID：15619154
> 
> 赞同：0
> 
> 时间：2013-03-25T15:51:19.653
> 
> 标签：iphone, uitoolbar, badge

这有点小技巧，但试图在工具栏项上获得徽章。快到了，但它出现在后面，尝试了正常的方法到达前面，但没有运气。

![在工具栏后面](../Images/e031b6d2c7be7c750bce47fba5c5e4b8.png)

```
deletedCountBadge = [CustomBadge customBadgeWithString:@"0"];
deletedCountBadge.frame = CGRectMake(100,10,25,25);

UIView *view = (UIView *)[bottomToolBar.subviews objectAtIndex:0];
[view addSubview:deletedCountBadge]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:14:13.207

让它与网络上的几个不同的指针一起工作。

1）如果您完全移动工具栏（.frame =），请确保在布局之后设置项目

2）可以使用负间距项目让它显示在你想要的地方。

![在此处输入图像描述](../Images/afd9d3ef30c04ab8891b883f201f6aae.png)

```
UIBarButtonItem *deleteBadge = [BarButtonItemBadge barButtonItemBadge:@"1" insideColor:[UIColor blueColor]];

UIBarButtonItem *negativeSeperator = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
negativeSeperator.width = -30;

[bottomToolBarDictionaryButtonItems addObject:deleteBadge];
[bottomToolBarDictionaryButtonItems addObject:negativeSeperator];

// after any layout, of tool bar

[bottomToolBar setItems:bottomToolBarDictionaryButtonItems]; 
```

# visual-studio - CSLA：真的需要很多独立的项目吗？

> ID：15619156
> 
> 赞同：0
> 
> 时间：2013-03-25T15:51:28.313
> 
> 标签：visual-studio, csla

我正在查看 ProjectTracker CSLA 示例解决方案，它有 DAL 的项目、DAL 的 EF 实现以及业务对象/规则/等的项目。

我知道将逻辑分离拆分到项目中是一种很好的做法，我担心将 DAL 和 EF 放入业务程序集中真的有问题吗？

似乎构建时间受项目数量的影响最大。

如果我遵循示例布局，我正在开发的应用程序可能有 18 个或更多项目。

我知道我可以制定多种解决方案来帮助缓解这种情况，但我不想从一开始就走这条路。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T04:12:06.553

建议使用多个项目，这些项目对于充分利用 CSLA 及其 n 层架构是必要的。

如果您毫无疑问地知道您永远不需要 n 层部署、永远不需要高级安全性、永远不需要增加可扩展性，并且通常不打算构建企业级应用程序，那么您可以使用更少的项目。

事实上，如果您正在构建一个您知道将部署为 2 层应用程序的应用程序，那么您可以将业务类和数据访问类与 UI 代码一起直接放入您的 UI 项目中。

这是一个好主意吗？不。

它会起作用吗？是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T19:10:58.850

为了借鉴 Rocky 的回答，我工作的公司使用 CSLA，我们最初在业务类中拥有所有 DAL 代码。当时我们使用 Oracle 10g 作为我们的 dbms，但想切换到 SQL Azure（我们同时进行了相当大的系统升级和架构更改）。所以，我们做了以下事情：

*   将 DAL 接口实现为项目
*   实施 2 个 DAL 项目，一个用于 Oracle 和 SQL（实际上是 3 个带有模拟数据库，但更多的是用于概念证明）

这让我们可以同时测试两个数据库中的转换。如果我们从 DAL 项目开始，这将更容易完成。

长话短说，这可能需要更多时间，但除非你对洛基的所有观点都持肯定态度，否则这是值得的。

# css - 显示所有图像的 CSS 精灵

> ID：15619157
> 
> 赞同：2
> 
> 时间：2013-03-25T15:51:29.140
> 
> 标签：css

我正在尝试使用 1 个包含 4 个图像的单个图像文件并使用 CSS sprite 显示它们。不知何故，所有 4 张图像都显示出来了。我指的是 w3schools 中的一个例子。

```
<div id="ViewTypeContainer" style="float: right; margin-top: 10px; margin-right: 10px;">
  <img id="calendarView" alt="" src="/Images/ButtonToggle.png" height="1" width="1"/>
  <img id="grdView" alt="" src="/Images/ButtonToggle.png" height="1" width="1" />
</div>

CSS:

#ViewTypeContainer img#calendarView {
    width:82px;
    height:82px;
    background: url('/Images/ButtonToggle.png') 0 0;
}

#ViewTypeContainer img#grdView  {
    width:82px;
    height:82px;
    background: url('/Images/ButtonToggle.png') -30px 0;
} 
```

我的图像文件是 .png 格式：

![在此处输入图像描述](../Images/f779c007219ee35c1b7277b2854388c3.png)

谁能发现我的错误？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:55:58.783

是的：您的`img`标签也具有`src`指向精灵图像的属性。

如果您希望精灵图像以 CSS 中指定的位置显示，则图像的`src`属性中需要透明图像。

在此处使用您的图像的工作示例（我使用了透明 GIF的[数据 URI ）：](http://en.wikipedia.org/wiki/Data_URI_scheme)

*   [http://jsfiddle.net/7Ns8L/](http://jsfiddle.net/7Ns8L/)

这是另一个使用语义 HTML 的示例（取决于这些控件实际执行的操作），即没有`<img>`标签：

*   [http://jsfiddle.net/7Ns8L/1/](http://jsfiddle.net/7Ns8L/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:09:39.647

确切地。您正在为图像提供背景图像。因此，IMG 标签在精灵顶部显示为正常大小。如果您使用背景位置 css 属性，则最容易应用精灵的概念。您可以通过为您的 IMG 标签源生成透明 .png 的麻烦（我不推荐它），或者只是将 IMG 标签替换为 div 并为 div 提供相同的 ID 和 CSS。

# forms - 获取在 Windows 窗体 MonthCalendar for Powershell 中选择的日期数

> ID：15619158
> 
> 赞同：0
> 
> 时间：2013-03-25T15:51:29.440
> 
> 标签：forms, events, powershell, calendar

我正在使用 Powershell 创建一个 GUI 日历，并且我需要能够为用户选择它们时选择的日期数分配一个变量。我想我将不得不使用一个事件，但不知道如何进行。基本上，如果用户选择超过 10 天的范围，我需要在同一个表单上的复选框进行检查。我正在用列表框做类似的事情，但我似乎无法弄清楚如何对日历做同样的事情。谢谢。

列表框代码：

```
$Listbox2 = New-Object System.Windows.Forms.ListBox 
$Listbox2.Location = New-Object System.Drawing.Size(240,80) 
$Listbox2.Size = New-Object System.Drawing.Size(140,210) 
$Listbox2.Height = 210
$Listbox2.SelectionMode = "MultiExtended"
$Listbox2Content | ForEach-Object {[void] $Listbox2.Items.Add($_)}
$Listbox2.Font = New-Object System.Drawing.Font("Microsoft Sans Serif",11,0,3,1)
$Listbox2.Add_SelectedValueChanged({
    If (($Listbox2.SelectedItems).Count -ge 10) {$Checkbox2.Checked = $True}
    If (($Listbox2.SelectedItems).Count -lt 10) {$Checkbox2.Checked = $False}
    }) 
```

日历代码：

```
$Calendar = New-Object System.Windows.Forms.MonthCalendar
$Calendar.Location = New-Object System.Drawing.Size(12,80)
$Calendar.ShowTodayCircle = $False
$Calendar.ShowToday = $True
$Calendar.MaxDate = (Get-Date).AddDays(1)
$Calendar.MinDate = $OldestLog
$Calendar.MaxSelectionCount = "$CalendarDateRange"
$MenuBox.Controls.Add($Calendar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:06:48.557

脚本块打印所选日期的`$data_selected`数量。我将它附加到`DataSelected`事件中，以便在您单击日期或进行范围选择时触发。

```
Add-Type -AssemblyName System.Windows.Forms
$date_selected = {
    write-host (($_.End - $_.Start).Days + 1)
}

$form = New-Object Windows.Forms.Form   
$form.text = "Calendar"
$form.FormBorderStyle = 'FixedDialog'
$form.Size = New-Object Drawing.Size(190,190) 

$cal = New-Object System.Windows.Forms.MonthCalendar   
$cal.add_DateSelected($date_selected)

$form.Controls.Add($cal)
$form.Add_Shown($form.Activate())  
$form.showdialog() | Out-Null 
```

# php - 每个提交php的新数组值

> ID：15619161
> 
> 赞同：0
> 
> 时间：2013-03-25T15:51:46.953
> 
> 标签：php, file-handling

不太了解 PHP，想知道每次提交时如何从数组中获取新值，我有一个包含 5 个字段的表单，表单将信息发送到 txt 文件，然后我只想取前两个项目表单提交并将其显示在列表项中的时间，但似乎无法弄清楚循环应该如何工作？请问有什么提示吗？

现在我有这个，它成功地打印出 txt 文件中的第一个文本块，但是当我再次提交表单时没有任何反应，有什么问题？

```
$myFile = 'demo.txt';
$content = file_get_contents('demo.txt');
$content_array = explode(";", $content);

<div id="info_php">
       <ul id="list_php">
            <?php for($i=count($content_array); $i < 1; $i--);
             echo '<li>'; echo $content_array[0]; echo'</li>';?>
        </ul>       
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:55:25.073

您有语法错误，for 循环以分号终止，并且您仅将第一个元素打印为`$content_array[0]`，而不是使用循环变量。尝试这个：

```
 <?php 
 for($i=count($content_array); $i < 1; $i--) {
     echo '<li>'; echo $content_array[$i]; echo'</li>'; 
 }
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:58:36.853

您需要做的第一件事是像这样更改循环：

```
<?php
    $count = count($content_array); // total rows
    $limit = $count > 2 ? $count - 2 : 0; // at most we want two rows
    for ($i = $count; $i > limit; $i--) {
        echo '<li>' . $content_array[$i - 1] . '</li>';
    }
?> 
```

这将获得txt文件的最后两行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:37:46.967

就是这个！

```
<?php
    $myFile = 'demo.txt';
    $content = file_get_contents($myFile);
    $content_array2 = explode("\n", $content);      
?>

<?php for($i = 0; $i < count($content_array2); $i++):
       $values = explode(';', $content_array2[$i]);?>
       <li><?php echo $values[0].$values[1]; ?></li>
<?php endfor; ?> 
```

# jquery - IE7 和 jQuery：这怎么行不通？(.css())

> ID：15619167
> 
> 赞同：2
> 
> 时间：2013-03-25T15:52:28.517
> 
> 标签：jquery, internet-explorer-7

我对一些 CSS IE7 兼容性问题感到疯狂，所以我选择在那个问题上使用 javascript。

这是我的代码：

```
// fix ie7 menu
if ($('html').hasClass('ie7')) {
    var submenus = $('header .menu > li > ul.sub-menu');
    $.each(submenus,function(key,submenu){
        var w = $(submenu).width();
        $(submenu).children('li').css('width','300px');
        alert(key+" submenu li "+$(submenu).children('li').width());
    });
} 
```

如您所见，我试图强制 ul.sub-menu 元素的子元素采用其父元素的宽度 (w)。没有运气，所以我硬编码了“300px”值以进行测试。然后我尝试了“300”。依然没有。

我的 $(submenu).children('li') 元素怎么可能没有 300px 的宽度？我在 Chrome 中测试了这段代码，效果很好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:54:35.603

```
if ($('html').hasClass('ie7')) {
var submenus = $('header .menu > li > ul.sub-menu');
submenus.each(function(){
    var w=$(this).width();
    $(this).children('li').css('width',w+'px');
});
} 
```

# python - 如何使用nginx在反向代理下设置同步传输？

> ID：15619168
> 
> 赞同：0
> 
> 时间：2013-03-25T15:52:30.550
> 
> 标签：python, nginx, web.py

我正在使用 Nginx 的反向代理。当我将文件发布到 Nginx 时，它似乎会将整个文件存储在本地，并在收到整个文件后将其转发到后端服务器。有没有办法让 Nginx 同步接收和转发数据？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:36:19.237

这个 SO 链接已经给出了否定的回答：[nginx files upload streaming with proxy_pass](https://stackoverflow.com/questions/12282342/nginx-files-upload-streaming-with-proxy-pass)

上述问题的答案来自维护 nginx 代码库的人之一。所以你可以暂时忘记它。

如果不传输文件两次真的很重要，如果您可以控制上游服务器，则可以尝试使用 nginx 上传模块。[http://wiki.nginx.org/HttpUploadModule](http://wiki.nginx.org/HttpUploadModule)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:09:08.533

你的意思是流媒体。是的，你可能想玩**proxy_buffering**、**proxy_store**和/或**proxy_temp_file_write_size**：

[http://wiki.nginx.org/HttpProxyModule#proxy_store](http://wiki.nginx.org/HttpProxyModule#proxy_store)

[http://wiki.nginx.org/HttpProxyModule#proxy_buffering](http://wiki.nginx.org/HttpProxyModule#proxy_buffering)

[http://wiki.nginx.org/HttpProxyModule#proxy_temp_file_write_size](http://wiki.nginx.org/HttpProxyModule#proxy_temp_file_write_size)

**旁注**：由于 nginx 是单线程的，所以你真的想使用该功能（否则一次上传可能会阻塞整个服务器很长时间）。

# php - 显示从星期一开始的一周报告

> ID：15619173
> 
> 赞同：0
> 
> 时间：2013-03-25T15:52:51.420
> 
> 标签：php, mysql

我想根据本周和本月生成一份报告。我该如何计算？

我的意思是：我如何获取今天的日期并根据“... BETWEEN monday AND today”查询数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:13:34.503

date("N") 会给你星期几（ 1-monday 到 7-sunday ）
所以向后移动天数会让你回到星期天。
但是因为我们想要星期一，N-1 会带你回到星期一

星期一 1 -(1-1) = 0 天
星期二 2 -(2-1) = 1 天
...
星期日 7 - (7-1) = 6 天

日期（“Ymd”，时间戳）；将给出日期
date("Ymd 00:00:00, timestamp) 将给出日期时间

日期（“Ym-01”，时间戳）；将给出该月的第一天

根据需要在查询中使用这些

例如

```
<?php
$month_start=date("Y-m-01");
$last_monday=date("Y-m-d", strtotime("-".(date("N")-1)." days"));
$today=date("Y-m-d");
$sql1="SELECT * FROM table WHERE my_date BETWEEN :month_start AND :today";
$sql2="SELECT * FROM table WHERE my_date BETWEEN :last_monday AND :today";

?> 
```

我省略了 sql，因为我们不知道您的 mysql_ mysqli_ 还是 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:58:10.663

```
$date= new DateTime(date('Y-m-d'));
while(true)
{   
    if($date->format("w") != 1 )// 0 for sunday, 1 for monday, etc
    {
         //do things
         $date->modify("-1 day");
    }else{
         return;
    }
} 
```

# jquery - 多个文档就绪呼叫 - 不工作

> ID：15619176
> 
> 赞同：0
> 
> 时间：2013-03-25T15:52:55.817
> 
> 标签：jquery, document-ready

根据这里的这个问题： [jQuery - multiple $(document).ready ...?](https://stackoverflow.com/questions/5263385/jquery-multiple-document-ready)

当有多个文档就绪调用时，每个调用将依次运行。但是，我刚刚在我的网站上关注了一个问题，直到我有多个呼叫而第二个呼叫不起作用。

我在下面的 JSFiddle 中复制了这个：http: [//jsfiddle.net/h7q9Z/](http://jsfiddle.net/h7q9Z/)

就像有两个文档就绪语句一样。如果您点击创建按钮，则提交表单。

像这样删除第一个准备好的语句 [http://jsfiddle.net/h7q9Z/1/](http://jsfiddle.net/h7q9Z/1/)

并点击创建并阻止表单提交。

为什么是这样？

根据需要复制的代码： 脚本：

```
 jQuery(document).ready(function () {

            });

        });

$(function(e) {

        $("#mainForm").submit(function (e) {
          e.preventDefault();
            return false;

        });
    }); 
```

html:

```
<form id="mainForm" action="nonExistantPage.asp" method="get">
    Funky Thing:<input></input>
            <button id="submitButton">Create</button>

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:55:36.047

删除第二个`});`，您的代码将编译。

```
 jQuery(document).ready(function () {

        });

    }); 
```

# javascript - 如何将复杂样式应用于 Select2 组件的选择？

> ID：15619177
> 
> 赞同：2
> 
> 时间：2013-03-25T15:52:56.117
> 
> 标签：javascript, css, jquery-select2

今天在使用Select2插件的时候遇到了一个看似简单的造型任务，但是好像我想要实现的东西比我想象的要难。这是我想要做的：

用户应该能够从下拉菜单中选择联系人。每个联系人条目都应显示为联系人的个人资料图片和旁边的一些数据。折叠时，下拉列表应显示所选联系人（即所选联系人的个人资料图片和旁边的一些数据），旁边有一个“下拉三角形”。在展开状态下，下拉菜单应另外显示其他联系人，每个联系人都有个人资料图片和数据。简而言之，我想按照[select2 示例页面](http://ivaynberg.github.com/select2/)上的“模板”示例中所述进行模板化，只是布局更复杂（左侧的个人资料图片加上图片旁边的三个堆叠的文本行）。

我设法通过使用select2 选项将所需的样式应用于**结果**`formatResult`，使用格式函数将图像和数据包装在样式化的 div 元素中（请注意，我使用 Twitter Bootstrap 的“媒体”css 类进行样式设置）：

```
function formatContactResult(item) {
 if(!item.id)
    return "No contact selected";

 var contact = JSON.parse(item.text);
 return "<div class='media'><a class='pull-left' href='#'><img style='margin-top: 5px;' class='media-object' data-src='holder.js/64x64' src='" + contact.thumbUrl + "' /></a><div class='media-body' style='font-size: 11px;'><strong>" + contact.displayName + "</strong><br />" + contact.jobTitle + "</div></div>"
}; 
```

我的问题：我不知道如何将这样的复杂布局应用于**selection**。我知道该`formatSelection`选项，但`formatSelection`函数的返回值被包装在一个`span`元素中，该元素不是复杂布局的合适包装器。虽然我知道它无效，但我尝试应用我上面提到的相同布局功能，但这会导致奇怪的结果（所需的布局被推到右边很远）。

有没有人知道如何使用 select2 实现所描述的布局？

如果有任何兴趣，我正在使用带有 Knockout.js 和 Twitter Bootstrap 的 Select2 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:01:33.703

我想通了 - 问题是组件中`div`包含的所有元素`select2-choice`都绝对定位和样式`select2.css`：

```
.select2-container .select2-choice div {
    display: block;
    width: 18px;
    height: 100%;
    position: absolute;
    right: 0;
    top: 0;
    [...]
} 
```

该样式用于渲染下拉框的“下拉三角形”，恰好是一个`div`元素。不幸的是，三角形`div`没有自己的 CSS 类名，应该用来设置它的样式。

因此，作为一种解决方法，我创建了一个新的 CSS 类并将其应用于`div`我想要在组件内部呈现的`select2-choice`元素。这个想法是覆盖位置和宽度属性：

```
.innerDiv {
    position: relative !important; 
    width: auto !important;
} 
```

# crystal-reports - vb.net形式的水晶报表布局设计器

> ID：15619179
> 
> 赞同：0
> 
> 时间：2013-03-25T15:53:01.053
> 
> 标签：crystal-reports

我需要在运行时更改水晶报表中绑定字段的位置，例如：我有一个包含 4 个字段/参数的报表。

我需要制作 1 个表单，用户可以更改它的位置，并且该字段的水晶报告将具有该位置...如果不抱歉，希望 qtn 很清楚

我不想要成熟的布局设计师......只是改变值/字段位置的一个小形式

# python - 为什么我不能将控制标识符写入文件或将它们分配给字符串或列表

> ID：15619183
> 
> 赞同：3
> 
> 时间：2013-03-25T15:53:14.850
> 
> 标签：python, pywinauto

我正在使用 pywinauto 列出特定应用程序的控件标识符。我可以做到这一点。但是，我想将这些控件标识符保存到文件中，或者更好地将它们分配给字符串或列表，但不能写入或分配它们....有谁知道以编程方式将这些标识符保存到文件或内存中的方法？

示例代码：

```
import os
import time
from pywinauto import application
from SendKeys import SendKeys

app=application.Application()
app.start_(r"C:\Program Files\myapp.exe")

app.dlg.print_control_identifiers()

Control Identifiers:
Button - 'Exit'   (L900, T649, R975, B672)
        'Button' 'Button0' 'Button1' 'Exit' 'ExitButton'
Button - 'About'   (L339, T646, R410, B672)
        'About' 'AboutButton' 'Button2'
...
...
... 
```

我尝试了以下方法：

```
my_App_ci = app.dlg.print_control_identifiers() 
```

和：

```
my_App_ci = []
my_App_ci.append(app.dlg.print_control_identifiers()) 
```

无济于事....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-01-16T13:40:09.000

您可以使用 print_control_identifiers(filename="path\to\your\desktop\file.txt")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:59:26.263

print_control_identifiers prints to stdout instead of returning a string. I did a quick look at the source and I could not see any functions to get them as strings, which is pretty crappy design IMHO.

You could capture the information by reassigning sys.stdout to an StringIO object and get the string from that. Or read the source to see what print_control_identifiers does and make a version that returns a list of strings.

# plone - 将个人资料图像导入 Plone 中的成员个人肖像

> ID：15619187
> 
> 赞同：2
> 
> 时间：2013-03-25T15:53:25.533
> 
> 标签：plone

我正在尝试将肖像图像批量上传到会员资料。使用mtool的getPersonalPortrait函数，我发现对象（FSImage）没有像上传人像图片的人像（Image）那样的“data”属性。

如果没有现有的个人资料照片，我应该如何继续将图像上传到这些成员肖像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:10:34.900

为上传的肖像创建*新对象：* `OFS.Image()`

```
from OFS.Image import Image

portrait = Image(id=user_login, title='', file=fportrait) 
membertool._setPortrait(portrait, user_login) 
```

其中`fportrait`是打开的文件对象或图像数据作为字符串。

# robocopy - 为什么？ROBOCOPY：错误 32 (0x00000020) 访问目标目录。该进程无法访问该文件，因为它正被另一个进程使用

> ID：15619193
> 
> 赞同：3
> 
> 时间：2013-03-25T15:53:44.447
> 
> 标签：robocopy

在此先感谢您的帮助。

我正在使用`ROBOCOPY`将一些文件从驱动器复制到同一台计算机上的另一个文件。每隔一段时间，我就会收到一个错误。它没有按应有的方式重试 999 次，而是重试了一次并失败了。我有几个问题：

1.  为什么首先会发生此错误？

2.  为什么不`ROBOCOPY`按定义重试 999 次？

命令如下：

```
mkdir C:\Users\tempuser\AppData\Local\temp\test1
robocopy /R:999 /W:5 /NP /E /XO /NFL /NDL E:\test1 C:\Users\tempuser\AppData\Local\temp\test1 test* 
```

```
-------------------------------------------------- -----------------------------------------
   ROBOCOPY :: 强大的 Windows 文件复制                              
-------------------------------------------------- -----------------------------------------

  开始时间：2013 年 3 月 25 日，星期一 4:20:51 AM
   来源：E:\test1
     目标：C:\Users\tempuser\AppData\Local\temp\test1

    文件：测试*

  选项：/NDL /NFL /S /E /DCOPY:DA /COPY:DAT /NP /XO /R:999 /W:5

-------------------------------------------------- ----------------------------

2013/03/25 04:20:51 错误 32 (0x00000020) 访问目标目录 C:\Users\tempuser\AppData\Local\temp\test1
该进程无法访问该文件，因为它正被另一个进程使用。

等待 5 秒... 正在重试...

-------------------------------------------------- ----------------------------

               总复制跳过不匹配失败额外
    目录：1 0 0 0 1 0
   文件：0 0 0 0 0 0
   字节：0 0 0 0 0 0
   时间：0:00:05 0:00:00 0:00:05 0:00:00
   结束 : 2013 年 3 月 25 日星期一 4:20:56 AM

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-12T21:52:43.947

这很可能是 robocopy 中的一个错误。它至少有一个围绕错误 32 / 正在使用的文件的其他错误：/b（备份）模式将失败并出现此错误，即使文件没有被完全锁定（并且可以使用 'copy'、'xcopy'、Windows 资源管理器复制，和不带 /b 的 robocopy），所以我怀疑它在处理使用中文件的方式通常存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T02:48:51.030

ROBOCOPY 中没有“错误”。

有些东西不时“锁定”您的源文件夹和文件。并非总是如此，因为这是基于您的副本“有时”工作这一事实的证据。

我会放置一个脚本将您的源文件“复制”到另一个位置（最好是驱动器），然后使用 ROBOCOPY 从那个新位置到您的另一个或最终位置。使用移动选项为下一次备份等保留中间位置。

我用这个...

```
robocopy <source path> <target path> <files> /s /j /r:2 /w:5 /log+:robocopy.log 
```

# ios - 客户端 telnet ansi 标签颜色

> ID：15619196
> 
> 赞同：1
> 
> 时间：2013-03-25T15:53:53.073
> 
> 标签：ios, objective-c

我的代码是一个简单的 telnet 客户端，我有一个 UItextview 来查看我的 telnet 服务器的输入流。我的问题是当我的 telnet 服务器发送带有我看到的颜色标签的流时：

输出 t= [37m[2J[34m myText

我认为这是一个“ansi”格式问题

这是我的流输入代码：

```
 -(void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

   switch (streamEvent) {

    case NSStreamEventOpenCompleted:

               NSLog(@"Stream opened");

        break;

    case NSStreamEventHasBytesAvailable:

        if (theStream == inputStream) {

            uint8_t buffer[1024];

            int len;

            while ([inputStream hasBytesAvailable]) {

                len = [inputStream read:buffer maxLength:sizeof(buffer)];

                if (len > 0) {

                 output = [[NSString alloc] initWithBytes:buffer length:len 

                            encoding:NSASCIIStringEncoding];

                    if (nil != output) {

                        NSLog(@"output=%@",output);

                        [self envoiDonnees];

                    }

                }

            }

        }

          break; 
```

有没有办法在我的 Uitextview 监视器中查看颜色？或一种过滤颜色标签以使其看不到的方法

提前谢谢

# jquery - jQuery - 修剪（）文档中所有元素的优雅方式？

> ID：15619199
> 
> 赞同：2
> 
> 时间：2013-03-25T15:54:01.987
> 
> 标签：jquery, trim

清理自动生成的 html 带来更多乐趣。注入标签的大量无关空间：

`<span>Lorem Ipsum&nbsp;&nbsp;&nbsp;</span> dolor sit...`（  代表实际空间，而不是实体）

jQuery 提供了一个 $.trim() 来截断字符串末尾的空格。有没有一种快速而优雅的方法可以将其应用于 each() 循环以从所有内联标签中删除所有空格，还是我注定要选择 => 获取 html => 修剪 => 替换 html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:55:56.640

阅读[文档](http://api.jquery.com/html/)

```
$(selector).html(function(i, old){
    return $.trim(old);
}); 
```

[小提琴](http://jsfiddle.net/bevacqua/bmfRE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:00:25.687

*下面的代码将删除任何没有元素 children*的节点周围的空白。

```
$('span').filter(function() {
    return $(this).children().length === 0;
}).text(function(_, old) {
    return $.trim(old);
}); 
```

对子元素的测试可确保您不会错误地修改任何带有嵌套标签的元素，尽管它可能会给您留下比您想要的更多的空间。

见[http://jsfiddle.net/alnitak/c7aT6/](http://jsfiddle.net/alnitak/c7aT6/)

# ios - 当我加载另一个 UIView 时如何使用 MKMapView 解除 UIView

> ID：15619203
> 
> 赞同：1
> 
> 时间：2013-03-25T15:54:22.113
> 
> 标签：ios, uiview, mkmapview, core-location, crash-reports

我正在做一个应用程序，该应用程序包含一个包含`MKMapView`要转到的应用程序，**没关系**，但是当我想再次加载应用程序崩溃时，它不会给出任何错误，只是崩溃并显示它崩溃的机器代码，但它首先说：然后是很多机器代码。`back button``UIView``MKMapView``main menu`**`UIView``MKMapView``com.apple.CoreLocation.ConnectionClient.0x1e5d5220`**

 **崩溃报告在这里： ![在此处输入图像描述](../Images/5aff3c184f337cf9cae45812ee880135.png)

我必须补充一点，我**第一次**加载`UIView`它是**100% 工作**的。

谢谢你的帮助。

PS：为什么这么说`dealloc?`是因为我认为做类似的事情`dealloc`可能会解决我的问题，并且与第一次运行相同。

**EDIT1：** 我的`- (void) viewDidLoad;`方法。

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSString *response = [self sendPostToURL: @"http://hidden.php"
                                withPost: @"hidden"];
[self tratarXML: response];
yo = @"Posición actual";
self.locationManager = [[CLLocationManager alloc] init];
self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;
self.locationManager.distanceFilter = kCLDistanceFilterNone;
[self.mapView setDelegate: self];
[self.mapView setZoomEnabled: NO];
[self.mapView setScrollEnabled: NO];
if ([CLLocationManager locationServicesEnabled])
{
    self.locationManager.delegate = self;
    self.mapView.showsUserLocation = YES;
    [self.mapView setMapType: MKMapTypeStandard];
    [self.mapView setUserTrackingMode: MKUserTrackingModeFollowWithHeading animated: NO];
    [self.locationManager startUpdatingLocation];
    //[self.locationManager startUpdatingHeading];
    self.mapView.userLocation.title = yo;
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                    message:@"Debe activar la localización en esta aplicación para funcionar"
                                                   delegate:self
                                          cancelButtonTitle:@"Aceptar"
                                          otherButtonTitles:nil, nil];
    [alert show];
}
} 
```

**EDIT2：** 我的后退按钮代码：

```
- (IBAction) iniciar: (id)sender
{
if ([iniciar.title isEqualToString:@"Volver"])
{
    menuViewController *obj = [[menuViewController alloc] initWithNibName:@"menuViewController" bundle:nil withUser:user];
    [self presentViewController:obj animated:YES completion:nil];
}
else
{
    // censored
} 
```

我正在使用简单的 *.xib 导航器，而不是情节提要等...

**EDIT3：** 加载菜单按钮`MKMapView UIView`

```
- (IBAction) TEST: (id)sender
{
mapaViewController *obj = [[mapaViewController alloc] initWithNibName: @"mapaViewController" bundle: nil withUser: user];
[self presentViewController:obj animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:51:08.060

有3件事是错误的：

1.  您的后退按钮代码不应调用 a`presentViewController`而是 a `dismissViewController`。现在您正在视图控制器之后添加视图控制器！当你回去时，你想摆脱你的视图控制器。
2.  在后退按钮代码中，添加`self.locationManager.delegate = nil;`
3.  同样，在返回按钮代码中，添加`self.mapView.delegate = nil;`

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:45:29.597

看起来您正在执行一系列 presentViewController 调用以从主菜单转到地图视图控制器，然后返回主菜单。这不是应该做的。您可能根本不应该进行模态转换，但如果这样做，您应该让主菜单关闭地图视图控制器，而不是让地图视图控制器呈现另一个主菜单控制器。

更好的方法是使用导航控制器。主菜单应该是导航控制器的根视图控制器，您将按下以转到地图视图控制器。您将在导航栏中自动获得一个后退按钮，它将带您返回（返回到同一实例）主菜单控制器。无需任何后退按钮代码。所有这些在故事板中实现起来会容易得多。**

# java - 删除标点问题

> ID：15619206
> 
> 赞同：0
> 
> 时间：2013-03-25T15:54:34.073
> 
> 标签：java

我试图在字符串中找到一个单词。但是，由于一段时间，它无法识别一个单词。我试图删除标点符号，但它似乎没有效果。我在这里错过了什么吗？这是我正在使用的代码行：**s.replaceAll("([az] +) [?:!.,;]*","$1");**

```
String test = "This is a line about testing tests. Tests are used to examine stuff";
    String key = "tests";
    int counter = 0;

    String[] testArray = test.toLowerCase().split(" ");

    for(String s : testArray)
    {
        s.replaceAll("([a-z] +) [?:!.,;]*","$1");
        System.out.println(s);
        if(s.equals(key))
        {
            System.out.println(key + " FOUND");
            counter++;
        }
    }

    System.out.println(key + " has been found " + counter + " times.");
} 
```

我设法通过使用**s = s.replaceAll("\W","") 找到了解决方案（尽管可能并不理想）**；感谢大家对如何解决这个问题的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:55:09.027

`Strings`是不可变的。您需要将结果分配给`replaceAll`新的`String`：

```
s = s.replaceAll("([a-z] +)*[?:!.,;]*", "$1");
                           ^ 
```

此外，您的正则表达式要求单词和标点符号之间存在空格。在 的情况下`tests.`，这是不正确的。您可以使用可选（零个或多个）字符调整正则表达式来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:22:05.293

您还可以在拆分操作中利用正则表达式。尝试这个：

```
String[] testArray = test.toLowerCase().split("\\W+"); 
```

这将在撇号上拆分，因此您可能需要使用特定的字符列表对其进行一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:07:56.130

您的正则表达式似乎无法按您的意愿工作。如果您想找到在那之后有一段时间的东西，那么这将起作用

```
([a-z]*) [?(:!.,;)*] 
```

它返回“测试”。当它在您给定的字符串上运行时。

还

```
[?(:!.,;)*] 
```

只需指出可以替换的标点符号。

但是我不确定你为什么不使用 substring() 函数。

# android - ImageSpan 在 Android 4.2 Jelly Bean 中删除以下文本

> ID：15619209
> 
> 赞同：3
> 
> 时间：2013-03-25T15:54:38.683
> 
> 标签：android, textview, android-4.2-jelly-bean

[我的问题与此处](https://stackoverflow.com/questions/13867815/text-is-messed-up-with-imagespan-in-edittext)描述的问题非常相似。但它仅在 Android 4.2 设备上测试时出现。在带有 Android 2.2 的旧测试设备上，一切都很好。

**我的问题**

我在 TextView 的中间添加了一个 ImageSpan，它的外壳替换了 TextView 的一个字符。在 Android 4.2*中，ImageSpan 之后*不会显示任何文本。在 Android 2.2 中，一切正常。

**代码示例**

```
 CharSequence chars = txtView.getText();
    SpannableStringBuilder stringBuilder = new SpannableStringBuilder(chars);

    for (int i = 0; i < chars.length(); i++) {
        int codePoint = Character.codePointAt(chars, i);
        if (codePoint > 255) {
               // loading the bitmap ...
               ImageSpan img = new ImageSpan(context, bmp, ImageSpan.ALIGN_BASELINE);
               stringBuilder.replace(i, i + 1, "");
               stringBuilder.setSpan(img, i, i + 1, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
        }
    }
    txtView.setText(stringBuilder, BufferType.SPANNABLE); 
```

**截图**

![Android 2.2 屏幕截图显示了它应该如何](../Images/aaa3e4f364ffaabc9e65c2f7c6fe244b.png) ![显示错误的 Android 4.2 屏幕](../Images/c066896ee0de04a9f1450f885f48592b.png)

**到目前为止我尝试过的**

我尝试了几乎所有可以添加的 Spanned -Constant，[但](http://developer.android.com/reference/android/text/Spanned.html)`setSpan`在 4.2 设备上没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:11:59.717

I'm really sorry that I posted this, cause I found the answer myself. I really thought that I tried `Spanned.SPAN_INCLUSIVE_EXCLUSIVE` before, but I obviously didn't. Anyway...

`stringBuilder.setSpan(img, i, i + 1, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);`

works for me at Android 4.2 and Android 2.2\. Hopefully this thread will help someone else in the future.

# android - Android - 以编程方式下载另一个应用程序

> ID：15619215
> 
> 赞同：0
> 
> 时间：2013-03-25T15:54:52.310
> 
> 标签：android, google-play

是否可以以编程方式下载应用程序？我并不是说要在某个应用上启动 Google Play。假设我有 3 个应用程序，它们都相关但具有不同的功能。是否可以创建第 4 个应用程序，当您下载时它还会下载其他 3 个应用程序并用作它们的中心？如果是这样，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:15:22.180

是的。我前几天刚做了这个。您的应用将需要一些权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.INSTALL_PACKAGES"/>
<uses-permission android:name="android.permission.DELETE_PACKAGES"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

写入外部存储是因为您必须在某处下载并保存您的 APK 文件。

此外，您需要以某种方式获取文件。我使用 Java 的`HttpUrlConnection`对象进行实际下载（您可能可以搜索有关如何在 Android 应用程序中下载文件的更好解释，但它非常简单）。

下载文件后，您只需启动包管理器并告诉它安装。不幸的是，用户在安装应用程序时将面临与往常相同的对话框，他们可以选择拒绝安装。要在没有用户干预的情况下安装，您可能需要从您的应用程序连接到 ADB 并以这种方式调用包管理器，尽管我不确定那里会涉及哪种权限。如果您不介意用户看到安装确认对话框，那么此代码将起作用：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.setDataAndType(Uri.fromFile(new File("/sdcard/whereever-you-saved-this.apk")), "application/vnd.android.package-archive");
    startActivityForResult(intent, 0); 
```

如果您正在安装的 APK 覆盖了您用于启动包管理器的应用程序，则 FLAG_ACTIVITY_NEW_TASK 可防止某些手机崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:04:47.383

还有[扩展文件](http://developer.android.com/google/play/expansion-files.html)的选项。也许这可能符合要求？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:02:49.293

您不能自动安装应用程序，这对用户来说风险很大。

您可以下载一堆新的 APK，但用户必须自己打开 .apks 来安装它们。

但是，您也可以在内部创建 1 个大应用程序，但将其显示为多个小应用程序，因为您可以将多个活动设置为启动器活动。也许这对你来说是一个选择？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-27T10:22:20.847

你也可以这样做：

通过网络服务从服务器下载 APKs 文件，下载后使用 INSTALL_PACKAGES 权限安装这些 APK 文件。

# groovy - Groovy 范围 - 如何在方法中访问脚本变量

> ID：15619216
> 
> 赞同：37
> 
> 时间：2013-03-25T15:54:53.420
> 
> 标签：groovy, scope

我对 Groovy 中的范围规则有疑问。在下面的代码片段中，我有三个变量，`a`具有本地范围，`b`具有脚本范围，并且`c`应该使用`@Field`注释获取脚本范围。

```
#!/usr/bin/groovy
import groovy.transform.Field;

//println org.codehaus.groovy.runtime.InvokerHelper.getVersion()

def a = 42;
b = "Tea"
@Field def c = "Cheese"

void func()
{
    // println a // MissingPropertyException
    println b // prints "Tea"
    println c // prints "Cheese" with groovy 2.1.2, MissingPropertyException with groovy 1.8.6

}

class Main
{
    def method()
    {
        // println a // MissingPropertyException
        // println b // MissingPropertyException
        // println c // MissingPropertyException with both 1.8.6\. and 2.1.2
    }

}

func();
new Main().method(); 
```

我`MissingPropertyException`在注释指示的行上得到 s。预计会出现异常`a`，因为该变量具有本地范围。但我希望`b`内部可以访问`method()`- 它不是。 `@Field`在 groovy 1.8.6 中没有做任何事情，尽管升级后它可以工作，所以我猜这是一个老错误。然而，无论哪个版本`c`都无法访问内部`method()`。

所以我的问题是：

1.  为什么我不能访问用`@Field`inside 注释的变量`method()`？
2.  如何引用里面的脚本变量`method()`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-25T16:26:41.643

当您在 groovy 脚本中的声明之外有方法或语句时`class`，会创建一个隐式类。要回答您的问题：

1.  在您的示例中，`func()`可以访问该字段`c`，因为它们都是隐式类的成员。类`Main`不是，所以它不能。

2.  您需要将对脚本变量的引用传递给`method()`. 一种方法是传递隐式定义的`binding`对象，通过它您可以访问所有脚本范围变量。

例子：

```
#!/usr/bin/groovy
import groovy.transform.Field;

//println org.codehaus.groovy.runtime.InvokerHelper.getVersion()

def a = 42;
b = "Tea"
@Field def c = "Cheese"

void func()
{
    // println a // MissingPropertyException
    println b // prints "Tea"
    println c // prints "Cheese" with groovy 2.1.2, MissingPropertyException with groovy 1.8.6

}

class Main
{
    def scriptObject
    def binding

    def method()
    {
        // println a // MissingPropertyException
        println binding.b
        println scriptObject.c
    }
}

func();
new Main(scriptObject: this, binding: binding).method(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-25T16:28:30.617

该脚本`Main`在同一个文件中生成为两个单独的类。

由于`Main`不是 Script 类的内部类，所以它看不到 Script 类`java.lang.Object c`内部的字段。

您要么必须将此脚本显式包装在具有`static main( args )`方法（和内部`Main`类）的类中，要么需要将脚本类的实例传递给方法，例如：`Main.method( this )`

这是上面脚本生成的那种东西：

```
class Script032034034 {
  Object c

  Script032034034() {
    c = 'Cheese'
  }

  Object run() {
    Object a = 42
    b = 'Tea'
    func()
    new Main().method()
  }

  void func() {
    println b
    println c
  }
}

class Main {
  Object method() {
  }
} 
```

# openmpi - 我是用 OpenMPI 还是 MPICH 编译的？

> ID：15619218
> 
> 赞同：2
> 
> 时间：2013-03-25T15:54:54.407
> 
> 标签：openmpi, mpich

我在我的 Linux 机器上有一个可执行文件，我知道它已经用`OpenMPI`或`MPICH`库编译过。

问题：如何确定是哪一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:56:30.227

以下诊断过程假定 MPICH/MPICH2 和 Open MPI 是您可能已链接的唯一可能的 MPI 实现。其他（尤其是商业）MPI 实现确实存在，并且可能具有不同的库名称和/或库符号。

首先确定您是否动态链接：

```
% ldd my_executable
        linux-vdso.so.1 =>  (0x00007ffff972c000)
        libm.so.6 => /lib/libm.so.6 (0x00007f1f3c6cd000)
        librt.so.1 => /lib/librt.so.1 (0x00007f1f3c4c5000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x00007f1f3c2a7000)
        libc.so.6 => /lib/libc.so.6 (0x00007f1f3bf21000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f1f3c969000) 
```

如果您`libmpich.so`在该列表中看到，那么您已动态链接到 MPICH（或 MPICH2）。如果你看到`libmpi.so`，那么你已经链接到 Open MPI。

如果两者都不存在，那么您可能只是静态链接。在这种情况下，我们需要检查二进制文件以寻找可区分的符号：

```
% ( nm my_executable | grep MPIR_Free_contextid >/dev/null ) && echo "MPICH"
% ( nm my_executable | grep ompi_comm_set_name >/dev/null ) && echo "Open MPI" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T15:01:45.217

开放式 MPI 应用程序对可以在环境变量中传递的 MCA 参数做出反应。只需在单例模式下（即没有`mpirun`/ `mpiexec`）运行可执行文件，`sysinfo_base_verbose`并将其设置为 30：

```
$ OMPI_MCA_sysinfo_base_verbose=30 ./program 
```

如果你得到如下输出：

```
[hostname:pid] mca: base: components_open: Looking for sysinfo components 
```

那么这不仅仅是可执行文件使用 Open MPI 的有力指示。

# git - 如何告诉 git 忽略以波浪号开头的文件？

> ID：15619219
> 
> 赞同：10
> 
> 时间：2013-03-25T15:54:55.717
> 
> 标签：git, gitignore

我的文本编辑器创建以波浪号开头的交换文件。我不小心将这些检查到了 git 中。我如何告诉 git 在我的项目树中的任何地方忽略任何这样的文件？

所以我有

```
/folder/another/file.txt
/folder/another/~file.txt 
```

我想`~file.txt`被 git 忽略。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-25T15:56:29.227

只需使用 .gitignore 文件：

```
echo '~*' >> .gitignore 
```

或者，您也可以将这一行写入`.git/info/exclude`项目范围的本地忽略文件（您显然无法签入，就像您可以使用 一样`.gitignore`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:59:11.543

```
echo '~*' >> .gitignore 
```

这将附加所需的条目。

否则`.gitignore`手动编辑文件并添加`~*`新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T01:24:49.790

1.  首先检查 git 是否曾经将您的文件添加到跟踪文件中。

    状态

是的 ？所以从 git 中删除文件或文件夹

```
git rm --cached <file-name> or git rm -r --cached <folder-name> 
```

然后，将以下模式附加到 .gitignore 文件（星号“*”匹配除斜杠之外的任何内容。）

```
echo '.~*' >> .gitignore 
```

就是这样！

# javascript - 在我的自定义指令中使用动态指定的 ng 指令

> ID：15619224
> 
> 赞同：0
> 
> 时间：2013-03-25T15:55:04.510
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试创建一个像这样的自定义表格元素：

```
<datatable items='tableItems' columns='columnsConfig' /> 
```

这里的“tableItems”是我的项目数组，“columnsConfig”是用于列渲染的配置，例如：

```
$scope.tableItems = [...]; 
$scope.columnsConfig = [
        {   
            name: 'check',
            with: '20px',
            renderer: function (rowItem, cellValue) {
                return '<input ng-click="clickHandler()" type="checkbox"/>';
            }
        },

        {name: "person.fullName", text: "Name", visible: true, width: '150px'},

        {
            name: "person.age",
            text: "Age",
            renderer: function(rowItem, cellValue) {
                return cellValue + ' years old';
            }
        }
 ]; 
```

在渲染器函数中，我可以指定一些额外的数据处理或模板。

在我的指令模板中，我有这个：

```
 <tbody>
            <tr ng-repeat="item in items">
                <td ng-repeat="column in columns"
                    ng-show="column.visible"
                    ng-bind-html-unsafe="getCellValue(item, $index)">
                </td>
            </tr>
        </tbody> 
```

在“getCellValue”函数中，我调用了我的渲染器函数。这是指令代码：

```
angular.module('components', [])
    .directive('datatable', function () {
        return {
            restrict: 'E',
            templateUrl: '../pages/component/datatable.html',

            scope: {
                items: "=",
                columns: "="               
            },

            controller: function ($scope, $element) {

                $scope.getCellValue = function (item, columnIndex) {
                    var column = $scope.columns[columnIndex];

                    // return render function result if it has been defined
                    if (column.renderer) {
                        return column.renderer(item, getItemValueByColumnName(item, column.name));
                    }

                    // return item value by column   
                    return getItemValueByColumnName(item, column.name);
                };
            }
        }
    }); 
```

除 ng-... 指令外，一切正常。我想我必须通过 $compile 或其他东西对“渲染器”函数结果进行一些额外的处理，但我不知道如何实现这一点。所以问题是当我通过渲染器函数指定 ng 指令时，它们是如何工作的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:10:32.773

经过一些调查，我找到了下一个解决方案：

```
//after all DOM manipulations we should recompile parts that has been modified
setTimeout(function () {
    applyAfterRenderDOMChanges();
}, 0);

var applyAfterRenderDOMChanges = function () {
    var cells = $('td', element).children();
    $compile(cells)(scope);
    scope.$apply();
}; 
```

我对这种解决方案的效率有些担忧，但到目前为止效果很好。

# file-io - 创建用于测试文件访问的大型 csv 文件

> ID：15619225
> 
> 赞同：5
> 
> 时间：2013-03-25T15:55:06.930
> 
> 标签：file-io, go

我想创建一个 10 GB 的文件，如下所示：

```
prefix:username:timestamp, number 
```

所以一个例子就像：

```
login:jbill:2013/3/25, 1 
```

我想通过创建像上面那样的随机行来创建一个 10GB 的文件。

我怎么能在 Go 中做到这一点？

我可以有一个前缀数组，例如：

```
login, logout, register 
```

还有一组用户名：

```
jbill, dkennedy 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T18:35:06.427

例如，

```
package main

import (
    "bufio"
    "fmt"
    "math/rand"
    "os"
    "strconv"
    "time"
)

func main() {
    fileSize := int64(10e9) // 10GB
    f, err := os.Create("/tmp/largefile")
    if err != nil {
        fmt.Println(err)
        return
    }
    w := bufio.NewWriter(f)
    prefixes := []string{"login", "logout", "register"}
    names := []string{"jbill", "dkennedy"}
    timeStart := time.Date(2012, 1, 1, 0, 0, 0, 0, time.UTC)
    timeDur := timeStart.AddDate(1, 0, 0).Sub(timeStart)
    rand.Seed(time.Now().UnixNano())
    size := int64(0)
    for size < fileSize {
        // prefix:username:timestamp, number
        // login:jbill:2012/3/25, 1
        prefix := prefixes[int(rand.Int31n(int32(len(prefixes))))]
        name := names[int(rand.Int31n(int32(len(names))))]
        time := timeStart.Add(time.Duration(rand.Int63n(int64(timeDur)))).Format("2006/1/2")
        number := strconv.Itoa(int(rand.Int31n(100) + 1))
        line := prefix + ":" + name + ":" + time + ", " + number + "\n"
        n, err := w.WriteString(line)
        if err != nil {
            fmt.Println(n, err)
            return
        }
        size += int64(len(line))
    }
    err = w.Flush()
    if err != nil {
        fmt.Println(err)
        return
    }
    err = f.Close()
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Println("Size:", size)
} 
```

输出：

```
register:jbill:2012/8/24, 15
login:jbill:2012/10/7, 98
register:dkennedy:2012/8/29, 70
register:jbill:2012/6/1, 89
register:jbill:2012/5/24, 63
login:dkennedy:2012/3/29, 48
logout:jbill:2012/7/8, 93
logout:dkennedy:2012/1/12, 74
login:jbill:2012/4/12, 14
login:jbill:2012/2/5, 83 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T16:44:48.763

这是一种天真的方法（1GB）：

```
package main

import (
    "fmt"
    "log"
    "os"
)

func main() {
    myfile, err := os.OpenFile("myfile", os.O_WRONLY|os.O_CREATE, 0644)
    if err != nil {
        log.Fatal(err)
    }
    defer myfile.Close()
    var pos int
    var line string
    // sample: login:jbill:2013/3/25, 1
    line = fmt.Sprintf("%s:%s:%s, %d\n", "login", "jbill", "2013/3/25", 1)
    for pos < 1024*1024*1024 {
        bytes, err := myfile.Write([]byte(line))
        if err != nil {
            log.Fatal(err)
        }
        pos = pos + bytes
    }
} 
```

这需要永远（1:16），因为输出没有缓冲。通过添加 bufio 您可以显着减少时间

```
package main

import (
    "bufio"
    "fmt"
    "log"
    "os"
)

func main() {
    myfile, err := os.OpenFile("myfile", os.O_WRONLY|os.O_CREATE, 0644)
    if err != nil {
        log.Fatal(err)
    }
    defer myfile.Close()
    mybufferedfile := bufio.NewWriter(myfile)
    var pos int
    var line string
    // sample: login:jbill:2013/3/25, 1
    line = fmt.Sprintf("%s:%s:%s, %d\n", "login", "jbill", "2013/3/25", 1)
    for pos < 1024*1024*1024 {
        bytes, err := mybufferedfile.WriteString(line)
        if err != nil {
            log.Fatal(err)
        }
        pos = pos + bytes
    }
    err = mybufferedfile.Flush()
    if err != nil {
        log.Fatal(err)
    }
} 
```

我的机器上还有 26 秒，我希望看到更快的解决方案。

顺便说一句：你需要做随机文件，但这留给读者作为练习:)

# plot - 在 Maxima 中绘制 ODE 的解（“表达式 evalues 无处不在”）

> ID：15619231
> 
> 赞同：2
> 
> 时间：2013-03-25T15:55:20.470
> 
> 标签：plot, maxima

我正在`w`使用 Maxima 求解二阶 ODE，它给了我一些答案，但我不知道如何绘制表达式。会话如下所示：

```
eq: -E*(I0+I1*x)*'diff(w,x,2)=(f1/6)*x^3+(f0/2)*x^2+l*(f0/2+2*f1*l^2/3)*x;
sol2: ode2(eq,w,x);
solbc2: bc2(sol2,x=0,w=0,x=l,w=0);
solNum: subst([E=1,I0=1,I1=1,f0=1,f1=1,l=1],solbc2); 
```

当我尝试`solNum`用

```
plot(solNum,[x,0,1]); 
```

我正进入（状态

```
plot2d: expression evaluates to non-numeric value everywhere in plotting   range.
plot2d: nothing to plot. 
```

我是 Maxima 初学者，如果我忽略了一些明显的事情，我深表歉意。我看过的教程只显示`plot2d`了一个表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:10:52.300

只需绘制[解决方案的 RHS 即可](http://maxima.sourceforge.net/docs/manual/en/maxima_20.html#rhs)。

```
eq: -E*(I0+I1*x)*'diff(w,x,2)=(f1/6)*x^3+(f0/2)*x^2+l*(f0/2+2*f1*l^2/3)*x;
sol2: ode2(eq,w,x);
solbc2: bc2(sol2,x=0,w=0,x=l,w=0);
solNum: subst([E=1,I0=1,I1=1,f0=1,f1=1,l=1],solbc2);

plot2d(rhs(solNum),[x,0,1]); 
```

# jquery - 基于浏览器#链接触发点击事件

> ID：15619233
> 
> 赞同：0
> 
> 时间：2013-03-25T15:55:23.917
> 
> 标签：jquery

我目前有一个缩略图库，单击它会为模态窗口设置动画并通过 ajax 加载内容。我使用“window.location.hash”为加载到我的模态中的内容创建了一个唯一的 url。

```
var base_url = "http://www.ddbremedy.co.uk/siteupdate/";

$('#work_gallery li a').on('click', function(event) {

    event.preventDefault();
    postLink = $(this).attr('href');
    window.location.hash = postLink.replace(base_url, "");
}); 
```

然后模态动画进入并通过 ajax 加载内容。然后，当我关闭模式时，我添加此代码以删除加载 ajax 页面时添加的哈希和 url 后缀。

```
if ("pushState" in history) {
    history.pushState("", document.title, window.location.pathname);
} else {
    window.location.hash = "";
} 
```

这一切都很好，但我需要的是能够获取生成的 ajax 链接并在粘贴到新窗口时自动触发正确缩略图上的单击事件以加载正确的内容。我知道基本上可以检测 url 中是否有哈希和特定单词，如下所示：

```
var pathname = window.location.hash;
if (pathname.indexOf("work") >= 0) {
    // trigger click event on correct thumbnail to launch modal   
} 
```

我知道我可能需要触发这样的点击事件：

```
$('#work_gallery li a').trigger('click'); 
```

但我不知道如何根据 ajax 内容的 url 将其应用于正确的缩略图。modal 本身是使用 jquery 完成的，没有任何插件，我也需要保持这种方式。任何帮助将不胜感激。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:02:48.290

设法让它工作。@BenM 为我指出了正确的方向。我是这样做的：

首先，我运行一个名为“checkUrl”的函数，它检查 URL 以查看它是否包含哈希。

```
checkUrl = function() {
    if (window.location.hash) {

    }
};

checkUrl(); 
```

然后在 if 语句中，我将哈希路径存储到变量中，并将其从哈希中拆分出来。然后我将哈希后的字符串存储到一个变量中。

```
var pathname = window.location.hash,
    rez = pathname.split('#'),
    linkUrl = rez[1]; 
```

然后，我将该变量作为具有该特定 href 的链接的选择器传递，并在相应链接上触发单击事件，然后以正确的模式进行动画和加载。

```
$("a[href='http://www.ddbremedy.co.uk/siteupdate/" + linkUrl + "']").trigger('click'); 
```

希望这将有助于将来的某人。

# sql - 在 sqlite3 中连接分层文件路径

> ID：15619236
> 
> 赞同：1
> 
> 时间：2013-03-25T15:55:31.440
> 
> 标签：sql, sqlite

我有以下 SQL 架构：

```
 CREATE TABLE Folders(
     id INTEGER PRIMARY KEY, 
     path TEXT NOT NULL, 
     level INTEGER DEFAULT 0,
     parentId INTEGER) 
```

parentId != NULL 的项目是根项目，并且在“路径”中具有完整路径。子文件夹仅按其名称和描述它们位于根文件夹下方的级别来保存。我现在想为此数据构建所有项目的完整路径。

CTE 在 SQLite 中不可用，所以我创建了这个查询来获取项目的完整路径：

```
select f.id, ifnull(group_concat(p.path, '\')||'\', '')||f.path as path
  from folders f 
  left outer join (select * from folders order by parentId, level) p on (p.parentId=f.parentId or p.id=f.parentId) and p.level < f.level
  group by f.id 
```

然而，当我用“解释”查看执行计划时，这似乎效率很低。我在 parentId、路径和级别上创建了一个索引，但这似乎并没有太大改善。

我试图检查[http://www.sitepoint.com/article/hierarchical-data-database/](http://www.sitepoint.com/article/hierarchical-data-database/)但它有重定向问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:43:47.770

如果根和子级之间的级别数是可变的，则不能这样做。您所做的事情是不正确的，充其量您可以与直接孩子一起加入根。

有不同的解决方案可以将分层数据编码到表中并避免递归查询的需要。例如，请参阅[https://communities.bmc.com/communities/docs/DOC-9902](https://communities.bmc.com/communities/docs/DOC-9902)。

由于其中一种解决方案是具有具体化路径，因此您应该意识到实际上您需要的是在每条记录中都有完整的路径，这样您就可以通过简单的查询获得所需的数据。

# c# - C# 中的日期时间功能

> ID：15619245
> 
> 赞同：-3
> 
> 时间：2013-03-25T15:55:53.343
> 
> 标签：c#, asp.net, date

我必须以 YYYY-MM-DD 格式从数据库中检索日期并将其显示为以下格式：

> 周一 25 日

目前我的代码如下所示：

```
Label fixtureDateLabel = new Label();
fixtureDateLabel.Text = dReaderGameweekFixtures["fixtureDate"].ToString(); 
```

如何调整它以我想要的格式显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:57:15.207

您可以使用以下`ToString`方法执行此操作：

```
var result = DateTime.Parse(
  dReaderGameweekFixtures["fixtureDate"].ToString()
).ToString("ddd dd"); 
```

据我所知，您需要一些额外的东西来制定日期编号的后缀，[这里已经很方便地提供了](https://stackoverflow.com/questions/2050805/getting-day-suffix-when-using-datetime-tostring)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:57:45.693

您需要根据其中一种可用格式格式化字符串：

[http://msdn.microsoft.com/en-gb/library/az4se3k1.aspx](http://msdn.microsoft.com/en-gb/library/az4se3k1.aspx)

将其传递给`ToString`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:58:33.793

继续下面的链接，足以满足您的需求并增加您的知识...

[http://www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:59:07.903

您应该使用带有格式参数的 DateTime 的 ToString 方法

在此处查看一些信息 - [http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

```
Label fixtureDateLabel = new Label();
DateTime d = dReaderGameweekFixtures["fixtureDate"];
fixtureDateLabel.Text = d.ToString("yyyy-MM-dd"); 
```

# .net - 使用 DTE 自动化，如何更改平台

> ID：15619255
> 
> 赞同：2
> 
> 时间：2013-03-25T15:56:09.497
> 
> 标签：.net, automation, envdte

我正在使用 VS 2012 并尝试使用 DTE 将配置更改为发布并将所有项目的目标平台设置为任何。

谁能告诉我如何更改平台，因为该属性是只读的？

谢谢太平绅士

# php - 如何在启用 W3 Total Cache 的情况下根据地理位置进行重定向？

> ID：15619262
> 
> 赞同：1
> 
> 时间：2013-03-25T15:56:31.623
> 
> 标签：php, wordpress, geolocation, w3-total-cache

使用 WordPress 多站点安装和 W3 Total Cache 并在 Amazon EC2 上托管，我想根据用户的地理位置为一组页面创建重定向。

更清楚地说：我有一个美国内容页面和一个非美国内容页面。如果美国的某人访问非美国页面，他们应该被重定向，反之亦然，如果来自加拿大的人访问美国页面，他们应该被重定向。

我愿意在我的托管环境中使用服务、WordPress 的另一个插件（只要它不影响 W3 总缓存）或需要编码解决方案的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T17:45:58.460

@andrew 如果您使用如下结构：

domain.com/us/page domain.com/global/page

这些是单独的页面，将单独缓存。

确保 W3 没有缓存您的地理定位插件的重定向脚本，因为它经常会导致问题（关闭 js 的缩小以进行测试）。

您还可以通过将页面添加到 W3 管理区域的排除列表中来排除缓存页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:39:53.387

You may want to consider something like this.

[http://wordpress.org/extend/plugins/geographical-redirect/](http://wordpress.org/extend/plugins/geographical-redirect/)

or

[http://wordpress.org/extend/plugins/source-redirect-site/](http://wordpress.org/extend/plugins/source-redirect-site/)

or

[http://codecanyon.net/item/wp-geoip-country-redirect/3589163](http://codecanyon.net/item/wp-geoip-country-redirect/3589163)

Or you can make your own using:

[http://www.maxmind.com/en/country](http://www.maxmind.com/en/country)

# javascript - 按类或 ID 选择元素

> ID：15619264
> 
> 赞同：1
> 
> 时间：2013-03-25T15:56:32.910
> 
> 标签：javascript, jquery, jquery-selectors

我正在处理一个 ASP.NET 页面，在该页面中，我根据数据库中的值生成一些 JavaScript 代码。

例如，在数据库中可能有公式`sum([#itemA])`，它的计算结果类似于`$('#itemA').change(function(){ sum(this); });`。

我知道我可以使用 jQuery 选择器（例如`$('[id*=itemA]')`or ）来选择元素`$('[class*=itemA]')`，但我想知道是否有任何方法可以组合这些选择器，以便选择具有类*或*ID 的任何元素`itemA`。

现在在我的代码中，我只是使用`if/else`块来处理 ID 或类，但如果有更简单的实现，我很乐意使用它。

我查看了[jQuery 文档](http://api.jquery.com/category/selectors/)并搜索了一下，但我没有看到任何回答我的问题的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:59:17.190

这应该可以解决问题

```
$('[id*=itemA], [class*=itemA]') 
```

有关更多详细信息，请查看[官方 jquery 文档](http://api.jquery.com/multiple-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:59:40.483

使用多个选择器，例如

```
 $('.class1, .class2....., .classn') 
```

您可以按字面意思使用 ID 名称、类名称或您指定的选择器，用逗号分隔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:59:06.793

Like in css, when selectors are separated by `,`they are cumulated :

```
var elements = $('[id*=itemA], [class*=itemA]') 
```

# c# - 如何将多个对象发送到 WCF 方法

> ID：15619270
> 
> 赞同：3
> 
> 时间：2013-03-25T15:56:58.507
> 
> 标签：c#, asp.net, wcf

我有一个 wcf 服务，我将按照以下方法发送一个列表。但是我想通过 post 方法发送两个参数，如下面的方法意味着可以是列表或任何与服务层中的实体相同的对象。这可能吗？

下面是我将对象数组发送到服务的过程。它运行良好。

**jQuery代码：**

> ```
>  var listOfObjects=new Array(); 
> ```

```
 //creating list of objects
      for(var i=0;i<5;i++)
       {   var MyEntity=new Object();
           MyEntity.TestId =i;
           MyEntity.TestId =i+"testName";
           listOfObjects.push(MyEntity);
       }

       var jsonList=JSON.stringify(listOfObjects);
       var dataToSend = '{"myEntity":'+jsonData+'';

        //Saving info
        $.ajax({
            type: "POST",
            async: false,
            data: dataToSend,
            url: "../ServiceLayer/myService.svc/SaveResults",
            contentType: "application/json; charset=utf-8",
            dataType: "json",          
            success: function () {
                alert("success");
            },
            error: function () {
                alert("Error");
            }
        }); 
```

**周转基金：**

```
 [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json,
     ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    public void SaveLabResults(List<MyEntity> myEntity)
    {
          var lstEntities=myEntity;
    } 
```

**实体：**

```
[DataContract]
public class MyEntity
{
    [DataMember]
    public string TestId { get; set; }
    [DataMember]
    public string TestName { get; set; }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:20:43.030

当然可以，只需添加另一个参数。

```
 [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json,
     ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    public void SaveLabResults(List<MyEntity> myEntity,List<MyEntity> myEntity2)
    {
          var lstEntities=myEntity;
          var lstEntities2=myEntity2;
    } 
```

和：

```
var dataToSend = '{"myEntity":'+jsonData+', "myEntity2":'+jsonData2+' }';
//Saving info
$.ajax({
    type: "POST",
    async: false,
    data: dataToSend,
    url: "../ServiceLayer/myService.svc/SaveResults",
    contentType: "application/json; charset=utf-8",
    dataType: "json",          
    success: function () {
        alert("success");
    },
    error: function () {
        alert("Error");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:21:54.843

是的，可以发送多个参数，您只需在 Web 方法和客户端都声明它们：

```
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json,
 ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
public void SaveLabResults(List<MyEntity> myEntity, SomeObject secondParameter)
{
      var lstEntities=myEntity;
} 
```

在客户端：

```
var dataToSend = '{"myEntity":'+jsonData+', "secondParameter":'+secondObject+'}'; 
```

参数名称必须在服务器端和客户端都匹配。

# c# - 在包装器字典类和包装器 Key 结构中实现 IEnumerable.GetEnumerator()

> ID：15619271
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:56:58.980
> 
> 标签：c#, .net, dictionary

我有这个结构包含在一个

```
public class Class1<TKey1> : IDictionary<TKey1, Class2>
{
    #region Private Fields
    private Dictionary<Key, Class2> _class2Manager = new Dictionary<Key, Class2>(new KeyEqualityComparer());
    #endregion

    #region Key
    protected internal struct Key
    {
        private TKey1 _TKeyValue1;

        public TKey1 TKeyValue
        {
            get { return _TKeyValue1; }
            set { _TKeyValue1 = value; }
        }
        public Key(TKey1 keyValue)
        {
            _TKeyValue1 = keyValue;
        }
        ///Other Key Code
    }
    #endregion
    ///Other Class1 Code
} 
```

我正在尝试模拟（实现）我的`_class2Manager`字典的字典功能`class1`。当我想实现该[`GetEnumerator()`](http://msdn.microsoft.com/en-us/library/s9eb7a3t(v=vs.100).aspx)方法时，问题就出现了。我不确定如何将`IEnumerator<KeyValuePair<Key, Class2>>` 返回的对象转换`_class2Manager.GetEnumerator()`为`IEnumerator<KeyValuePair<TKey1, Class2>>`

```
IEnumerator<KeyValuePair<TKey1, Class2>> IEnumerable<KeyValuePair<TKey1, Class2>>.GetEnumerator()
{
    IEnumerator<KeyValuePair<Key, Class2>> K = _class2Manager.GetEnumerator();
} 
```

我如何转换`IEnumerator<KeyValuePair<Key, Class2>>`为`IEnumerator<KeyValuePair<TKey1, Class2>>`?

我已经考虑过[cast](https://stackoverflow.com/questions/828342/what-is-the-best-way-to-convert-an-ienumerator-to-a-generic-ienumerator)，但我认为这不是我需要做的正确转换它的确切事情。

任何建议表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:01:03.053

在您的`GetEnumerator()`功能代码中，您可以尝试：

```
foreach (KeyValuePair<Key, Class2>> entry in _MasterFrames)
    yield return new KeyValuePair<Key1, Class2>(entry.Key.TKeyValue, entry.Value); 
```

基本上，这只会将每个字典中的每个条目转换`Key`为一个。`Key1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:40:20.880

当您想将一系列对象从一种类型映射到另一种类型时，您可以使用`Select`：

```
return _class2Manager.Select(pair => 
        new KeyValuePair<Key1, Class2>(pair.Key.TKeyValue, pair.Value))
    .GetEnumerator(); 
```

# c# - 可空字段和 SQL 为空问题

> ID：15619272
> 
> 赞同：6
> 
> 时间：2013-03-25T15:57:03.323
> 
> 标签：c#, linq, entity-framework, nullable, isnull

与我的问题相关的 stackoverflow 上有大量问答，但我无法推断出问题的原因以及在这种情况下最有效的解决方案；

因此，我有一个方法允许您传递 parentID，并根据值使用 LINQ 查询过滤记录。数据库中的字段允许 NULL 值。现在，如果我在 where 子句中使用运算符比较字段`==`，则发出的 sql 是错误的（它不`IS NULL`用于比较），因此查询产生 0 个结果。我使用`Object.Equals()`方法解决了这个问题。那行得通，但是现在我在传递 NON NULL 值时遇到异常，一个整数

> 无法创建“System.Object”类型的常量值。此上下文仅支持原始类型或枚举类型。

所以我写了一个简单的方法

```
using (TestEntities context = new Entities())
{
    return from c in context.ItemMappings
           where c.ParentID.Equals(parentID)
           select new ItemDTO
           {
               ItemID = c.Item.ItemID,
               ItemName = c.Item.ItemName,
               ItemType = new ItemTypeDTO
               {
                   TypeID = c.Item.Type.TypeID,
                   TypeName =c.Item.Type.TypeName
               };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:05:33.283

是的，如果是 SQL，您的问题也会发生。您必须明确处理 null ，这应该有效：

```
Where (parentID == null && c.ParentID == null) || (parentID == c.ParentID) 
```

这假设您希望 null 匹配。如果您希望 null 返回所有未过滤的结果，请改为：

```
Where (parentID == null) || (parentID == c.ParentID) 
```

我什至有时也遇到了麻烦，并且发现 LINQ 一直正确翻译的方式是：

```
Where (parentID == null) || (parentID != null && parentID == c.ParentID) 
```

这是因为即使在 SQL 中，如果您执行 where `ParentID = @ParentID`，空匹配不会返回任何结果，您必须使用`ISNULL`将其转义为空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T11:35:22.500

允许为空你也可以尝试这样

```
 GSectionID = emp.SectionID ?? Guid.Empty, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-05T18:38:30.467

在 EF6 中，您可以使用 UseCSharpNullComparisonBehavior 来解决此问题。您需要将上下文选项 UseCSharpNullComparisonBehavior 设置为 true，它的行为类似于 C#。

```
objectContext.ContextOptions.UseCSharpNullComparisonBehavior = true; 
```

您可以在以下链接中查看更多信息：http: [//entityframework.codeplex.com/workitem/145](http://entityframework.codeplex.com/workitem/145)

# php - GoDaddy 服务器上的 Joomla“未指定输入文件”

> ID：15619273
> 
> 赞同：2
> 
> 时间：2013-03-25T15:57:07.817
> 
> 标签：php, joomla

这个错误有据可查，但对我没有任何帮助。

**问题：访问任何***带有*index.php 的url 时输出“未指定输入文件” 。

例如，*[http://example.com/index.php/any-url](http://example.com/index.php/any-url)*会产生“未指定输入文件”。

*[http://example.com/any-url/](http://example.com/any-url/)*工作得很好。

该站点最近从 Network Solutions 托管转移到 GoDaddy，并且正在使用 Joomla 2.5.9 和 PHP 5.3.21。

我最近使用但失败的解决方案来自[Joomla 论坛](http://forum.joomla.org/viewtopic.php?p=2700376)。

如果我将此添加到 htaccess 文件的末尾：

```
RewriteRule ^index.php/(.*)/? /$1 [L] 
```

一切正常显示，但每个页面需要几秒钟才能加载。

**.htaccess 文件**

```
#AddHandler phpini-cgi .php
#Action phpini-cgi /cgi-bin/php5-custom-ini.cgi
##
# @package      Joomla
# @copyright    Copyright (C) 2005 - 2012 Open Source Matters. All rights reserved.
# @license      GNU General Public License version 2 or later; see LICENSE.txt
##

##
# READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE!
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
##

## Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

## Mod_rewrite in use.

RewriteEngine On

## Begin - Rewrite rules to block out some common exploits.
# If you experience problems on your site block out the operations listed below
# This attempts to block the most common type of exploit `attempts` to Joomla!
#
# Block out any script trying to base64_encode data within the URL.
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL.
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL.
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL.
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#

## End - Rewrite rules to block out some common exploits.

## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
## End - Custom redirects

##
# Uncomment following line if your webserver's URL
# is not directly related to physical file paths.
# Update Your Joomla! Directory (just / for root).
##

RewriteBase /

## Begin - Joomla! core SEF Section.
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for something within the component folder,
# or for the site root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
## End - Joomla! core SEF Section.
RewriteEngine On 
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot@yahoo.com [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Custo [OR] 
RewriteCond %{HTTP_USER_AGENT} ^DISCo [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [OR] 
RewriteCond %{HTTP_USER_AGENT} ^eCatch [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [OR] 
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GetRight [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [OR] 
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Grafula [OR] 
RewriteCond %{HTTP_USER_AGENT} ^HMView [OR] 
RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR] 
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [OR] 
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR] 
RewriteCond %{HTTP_USER_AGENT} ^InterGET [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [OR] 
RewriteCond %{HTTP_USER_AGENT} ^JetCar [OR] 
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^larbin [OR] 
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [OR] 
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Navroad [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NearSite [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [OR] 
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Octopus [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [OR] 
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [OR] 
RewriteCond %{HTTP_USER_AGENT} ^pavuk [OR] 
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [OR] 
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [OR] 
RewriteCond %{HTTP_USER_AGENT} ^ReGet [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [OR] 
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [OR] 
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [OR] 
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Wget [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Widow [OR] 
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR] 
RewriteCond %{HTTP_USER_AGENT} ^Zeus 
RewriteRule ^.* - [F,L]

RewriteRule ^index.php/(.*)/? /$1 [L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:42:57.983

由于无论哪种方式都有错误，我建议`/index.php/`从 url 中完全删除，无论如何这对您的 SEO 有好处，而且更好。

所以就在下面`RewriteEngine on`放

```
RewriteCond %{REQUEST_URI} ^/index\.php/
RewriteRule ^index.php/(.*) /$1 [R=301,L] 
```

现在，每次您尝试访问[http://example.com/index.php/any-url](http://example.com/index.php/any-url)时，您都会被重定向到[http://example.com/any-url](http://example.com/any-url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T06:08:40.830

您只需要使用 URL 重写。转到 Joomla 的后端，然后站点->全局配置。转到站点选项卡，然后在 SEO 设置下的右侧，启用使用 URL Rewiting 选项。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T20:38:09.193

就像转到全局配置并将搜索引擎友好 URL 从 ON 变为 OFF 一样简单，仅此而已。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-02T05:36:25.893

我真的在网上四处寻找解决方案......

禁用搜索引擎友好 URL 是神奇的解决方案，就这么简单..

感谢矿石的贡献....

# html - Cufon 字体不工作。有人请指教吗？

> ID：15619274
> 
> 赞同：1
> 
> 时间：2013-03-25T15:57:10.433
> 
> 标签：html, css, cufon

我无法在网站上使用这种 Cufon 字体。代码有什么问题吗？我附上了代码的截图。不知道为什么代码没有使用标签正确实现。

[http://i.stack.imgur.com/K1DKS.jpg](http://i.stack.imgur.com/K1DKS.jpg)

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:00:11.380

您没有加载 cufon js 文件。

以下是Cufon的使用方法：

[https://github.com/sorccu/cufon/wiki/Usage](https://github.com/sorccu/cufon/wiki/Usage)

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Playing with Cufón</title>
        <!-- Stylesheets here, before all scripts. Helps avoid styling issues. -->
        <link rel="stylesheet" type="text/css" href="style.css" />
        <!--
        If you want to use complex selectors with Cufón, load a selector engine (JavaScript framework) here.
        We support jQuery, Sizzle, MooTools, Dojo, Prototype and other popular frameworks.
        -->
        <script src="cufon-yui.js" type="text/javascript"></script>
        <script src="YourFont.font.js" type="text/javascript"></script>
        <script type="text/javascript">
            Cufon.replace('h1'); // Works without a selector engine
            Cufon.replace('#sub1'); // Requires a selector engine for IE 6-7, see above
        </script>
    </head>
    <body>
        <h1>Your custom font here</h1>
        <h2 id="sub1">Your custom font here too</h2>
        <!-- To avoid delays, initialize Cufón before other scripts at the bottom -->
        <script type="text/javascript"> Cufon.now(); </script>
        <!-- Google Analytics and other scripts here -->
    </body>
</html> 
```

# c - 声明一个二维字符数组？

> ID：15619276
> 
> 赞同：0
> 
> 时间：2013-03-25T15:57:11.563
> 
> 标签：c

是否可以像这样声明一个二维数组：

```
char words[128][25]; 
```

然后像这样分配给它：

```
int i=0;

while(fscanf(fp,"%s" words[i++]) != EOF){  
 printf("Copied");
} 
```

我在一段代码中看到了它，不明白所以试了一下，当它试图运行这一行时，它只是从代码块中崩溃。当它被这样声明时，它是一种完全无效的使用数组的方式吗？它编译得很好，只是不运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:02:50.427

正如猛禽解释的那样，当你等于 EOF 时，你也会循环。这意味着你永远不会得到“复制”，除非文件是空的。你可能的意思是：

```
while(fscanf(fp,"%s",words[i++]) != EOF){  
 printf("Copied");
} 
```

*   编辑：

参考 Whoz 的评论，这是一个危险的代码，如果你的代码的行数多于用单词初始化的行数，那么你会得到一个异常，除此之外，我确实会说明提取的行数（或单词数） (-1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:59:39.123

这是使用数组的合法方式；问题似乎出在您的时间：

```
while(fscanf(fp,"%s words[i++]) == EOF){ 
```

您只需要在 . 后面加上一个结束引号和逗号`"%s`。

# python - Python 传入要用作动态属性的参数列表

> ID：15619289
> 
> 赞同：0
> 
> 时间：2013-03-25T15:57:43.593
> 
> 标签：python, list, parameter-passing, args

我有这个是 Flask 中 Jinja2 模板特有的（但与两者都没有具体关系，只是我正在构建更通用的东西的上下文）：

```
class MultipleMacroFor(object):
    def __init__(self, macro):
        self.macro = macro

    def renderable(self, macro_var):
        return get_template_attribute(self.macro, macro_var)

class ResponseItemMacros(MultipleMacroFor):
    def __init__(self):
        super(ResponseItemMacros, self).__init__(macro="macros/response_items.html")

    @property
    def general_macro(self):
        return self.renderable('general_macro')

RI = ResponseItemMacros() 
```

一个用例的例子：

```
 RI.general_macro # returns the renderable 'general_macro' from 'macros/response_items.html' that can be used with in a Jinja2 template 
```

我想变成这样：

```
class MultipleMacroFor(object):
    def __init__(self, macro, which_macros):
          self.macro = macro
          self.which_macros = which_macros

     # take which_macros and have them each be returnable as in the function above but
     # respond to the more general case, not specifically requiring construction  
     # @property
     # def (passed in var which_macro)(self):
     #   return self.renderable(passed in var which_macro)

RI = MultipleMacroFor(macro="macros/response_items.html", macros=['general', 'etc', 'etal']) 
```

然后用例：

```
RI.general_macro #as above but without having to construct the intermediate ResponseItemsMacros class 
```

并将传入的列表作为属性调用，仅根据传入的列表动态构造，而不是作为第一个示例手动构造。第一个示例需要从两个类手动构建我要使用的实例。第二个是希望只使用 1 个可以用要调用的属性实例化的类，这将通过可渲染函数工作以生成相关的命名宏。

只有我不知道该怎么做这个atm。任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:08:57.963

您不能拥有每个实例的属性（或者至少不能不弄乱**get_attribute**，这是您真正应该避免的事情）。最简单的解决方案是使用**getattr**。

```
class MultipleMacroFor(object):
    def __init__(self, macro, names):
        self._macro = macro
        self._names = names

    def get_renderable(self, macro_var):
        return get_template_attribute(self.macro, macro_var)

    def __getattr__(self, name):
        if name in self._names:
            return self.get_renderable(name)
        raise AttributeError(
            "object %s has no attribute '%s'" % (
                type(self).__name__, name)
            ) 
```

一个更复杂的方法是动态构建一个子类然后实例化它。

```
class MultipleMacroFor(object):
    def __init__(self, macro, names):
        self._macro = macro
        self._names = names

    def get_renderable(self, macro_var):
        return get_template_attribute(self.macro, macro_var)

def MultipleMacroForFactory(macro, names):
    attrs = dict()
    for name in names:
        attrs[name] = property(
            lambda self, name=name: self.get_renderable(name)
            )

    clsname = "MultipleMacroFor%s" % "".join(
        name.capitalize() for name in names
        )

    return type(clsname, (MultipleMacroFor,), attrs)(macro, names) 
```

# java - 如何在 GAE(Java) 上将数据发布到 https 网站

> ID：15619295
> 
> 赞同：0
> 
> 时间：2013-03-25T15:57:53.977
> 
> 标签：java, google-app-engine, post, https

在 Google App Engine 上，我使用的是 JAVA。我对我的项目有一些疑问。

我想从需要登录的网站获取一些数据

通常，我会使用下面的 HttpURLConnection 来完成这项工作

问题是，该网站不是“http://...”而是“https://..”上面的代码不起作用。

如何在 GAE 上使用 java 登录网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:01:33.717

您可能需要使用 SSL 证书，老实说，我还没有在 GAE 上使用过密钥库等。

你能发布你的堆栈跟踪吗？

# php - 多表单输入数组问题

> ID：15619296
> 
> 赞同：0
> 
> 时间：2013-03-25T15:57:58.283
> 
> 标签：php, arrays, forms

我有一个带有复选框数组的表单，它有助于我申请参加比赛的课程，并输入该课程的价格

所以我从数据库中循环出类的行的 id，它是所选复选框（类字段）的值。现在价格没有存储在数据库中，所以本质上它只是一个供用户输入价格的输入字段。

我已将输入字段的名称设置为，`price[]`因此它是表单提交中的价格数组。

我遇到的问题是使用 foreach 循环遍历数组。

```
$classes= $_POST["classes"];  == (checkbox )

$price= $_POST["price"];  == ( input text field )

my foreach is like so 

foreach($classes as $key=>$n){

          // print_r($price[$key]);

           mysql_query("INSERT INTO tbl_set_shows (show_id, class, price) 

                         VALUES (
                        '$showid',
                        '$n',
                        '$price[$key]')")
              or die(mysql_error().'error');            

} 
```

例如，我检查类选项 1、2 和 3（按此顺序），这很好，我在表中完美地获得了价格和类的值。

但是，如果我选择说类 5、10 和 15 以及价格输入，我会失去价格的价值，因此`// print_r($price[$key]);`如果我不遵循该顺序，它就是空的。

谁能指出我正确的方向？

# knockout.js - Kendo UI Broken Bindings（级联组合 - 参数映射问题）

> ID：15619300
> 
> 赞同：0
> 
> 时间：2013-03-25T15:58:11.533
> 
> 标签：knockout.js, cascade-filtering, kendo-combobox

我正在使用 Kendo UI Combos 和淘汰赛。我正在尝试级联一个组合的结果以过滤另一个组合中的可用数据。

父组合中的 dataTextField 值不能按原样用于过滤子组合数据，因此我使用 parameterMap 选项来更改它。不幸的是，这似乎不起作用，绑定时我收到错误...

```
Message: SyntaxError: Expected ':';

Bindings value: kendoComboBox: 
    {scrollable: 
        { virtual: true }
    ,filter: 'contains',
    pageable: true, 
    dataTextField: 'Description', 
    dataValueField: 'Id', 
    autoBind: false, 
    placeholder: 'Select...' ,
    cascadeFrom: 'NotifierServiceType',
    dataSource: 
        {type : 'odata',
        serverPaging: true,
        serverFiltering: true,
        serverSorting: true,
        pageSize: 100,
        filter : {field : 'LookUpType', operator : 'eq', value:15},
        transport: {    
                read: {        url: 'http://xxx/INS/services/LookUpService.svc/LookUpItems',        dataType: 'json'    } , 
                parameterMap: function(data, type) 
                    { return { filter[filters][0][field]: 'ParentId';}
                } 
            }
        }, 
    value:notifierSubDivisionId
    } 
```

删除 parameterMap 部分后，它会正确绑定，但不会像预期的那样过滤子组合。

任何帮助将不胜感激。

编辑：

这是使级联组合工作的修改后的代码：

```
parameterMap: function(data, action) { 
    var filterStem; 
    var filter; 
    filterStem = '$inlinecount=allpages&$top=100&$filter=(LookUpType+eq+15';
    if (data.filter.filters[1] === undefined){  
        filter = ')'; }
    else {
        filter = '+and+ParentId+eq+' + data.filter.filters[1].value + ')' ;
    }  
    return filterStem + filter; }}} 
```

我确信有更好的方法来修改过滤器 - 有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:02:59.517

您可以为 oData 尝试 kendoUI + jaydata，这是一个成功的组合。（免责声明：我为 JayData 工作）。我们在这里有一个关于级联组合的演示：http: [//jaydata.org/examples/KendoUI/cascadingcombobox.html](http://jaydata.org/examples/KendoUI/cascadingcombobox.html) 对于一个简单的级联组合，您只需要几行自定义 JavaScript 代码。

```
$data.initService(url)
.then(function (remoteDB) {
    $("#categories").kendoComboBox({
      placeholder: "Select category...",
      dataTextField: "Category_Name",
      dataValueField: "Category_ID",
      dataSource: remoteDB.Categories.asKendoDataSource()
    });

    var products = $("#products").kendoComboBox({
      autoBind: false,
      cascadeFrom: "categories",
      placeholder: "Select product...",
      dataTextField: "Product_Name",
      dataValueField: "Product_ID",
      dataSource: remoteDB.Products.asKendoDataSource()
    }).data("kendoComboBox");
}); 
```

# python - python中的Boid；计算两个物体之间的距离

> ID：15619307
> 
> 赞同：1
> 
> 时间：2013-03-25T15:58:39.180
> 
> 标签：python, vector, distance, boids

我正在尝试用 Python 中的 boids 对飞行中鸟类的行为进行编程。我还没有找到太多，但目前我被困在定义两个 boid 之间距离的函数上。它必须使用公式 (a,b) = sqrt( (a_x - b_x)^2 + (a_y - b_y)^2) ) 其中 a 和 b 是我必须计算距离的两个向量， a_x 和 b_x 是向量的 x 分量，a_y 和 b_y 是 y 分量。我收到有关公式中索引的错误。我已经尝试了多种方法来解决，但我就是不知道该怎么做......

这是我到目前为止所得到的。我对编程很陌生，所以我只知道基础知识，我不确定我所拥有的其余部分是否还可以。

```
WIDTH = 1000            # WIDTH OF SCREEN IN PIXELS
HEIGHT = 500            # HEIGHT OF SCREEN IN PIXELS
BOIDS = 20              # NUMBER OF BOIDS IN SIMULATION
SPEED_LIMIT = 500       # FOR BOID VELOCITY
BOID_EYESIGHT = 50      # HOW FAR A BOID CAN LOOK
WALL = 50               # FROM SIDE IN PIXELS
WALL_FORCE = 100        # ACCELERATION PER MOVE

from math import sqrt
import random
X = 0
Y = 1
VX = 2
VY = 3

def calculate_distance(a,b):
    a = []
    b = []
    for x in range (len(a)):
        for y in range (len(b)):
            distance = sqrt((a[X] - b[X])**2 + (a[Y] - b[Y])**2)
            return distance

boids = []

for i in range(BOIDS):
    b_pos_x = random.uniform(0,WIDTH)
    b_pos_y = random.uniform(0,HEIGHT)
    b_vel_x = random.uniform(-100,100)
    b_vel_y = random.uniform(-100,100)
    b = [b_pos_x, b_pos_y, b_vel_x, b_vel_y]

    boids.append(b)

    for element_1 in range(len(boids)):
        for element_2 in range(len(boids)):
            distance = calculate_distance(element_1,element_2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:41:50.483

问题是：

*   您没有将任何 boid 数据传递到您的函数中，只是将索引`element_1`和`element_2`. 所以`calculate_distance`对boids一无所知。
*   即使您传入 boid 数据，您也将空列表分配给`a`and `b`，这意味着您的循环内部永远不会执行。

你想要这样的东西：

```
for element_1 in range(len(boids)):
    for element_2 in range(len(boids)):
        distance = calculate_distance(boids[element_1],boids[element_2]) 
```

接着

```
def calculate_distance(a,b):
    return sqrt((a[0] - b[0])**2 + (a[1] - b[1])**2) 
```

# java - JTable 不更新自身

> ID：15619310
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:58:57.360
> 
> 标签：java, swing, jtable, refresh, repaint

当我从组合框中的数据库中选择一个表时，我希望我的 jtable 自行更新。但是什么也没发生，程序给出了数组索引超出范围的异常。我使用`repaint()`和`revalidate()`功能，但我找不到解决方案。

**编辑：**我现在在这里有空指针异常：`table.setModel(tableModel);`

```
 public class DBC extends JFrame{

    static String tablo;
    static JTextField tf = new JTextField(20);
    static int columnCount;
    static JPanel tfPanel = new JPanel();
    static String[] sutunlar;
    static JLabel sutunLabel;
    static JPanel sutunPanel = new JPanel(new BorderLayout());
    static JTable table;
    static JScrollPane scrollPane;
    static DefaultTableModel tableModel;

    public static void main(String[] args) throws Exception {

        Class.forName("com.mysql.jdbc.Driver");
        Connection connect = DriverManager.getConnection("jdbc:mysql://localhost:3306/project"
                  ,"root","123456789");

        final Statement statement = connect.createStatement();

        JLabel tabloSec = new JLabel("Tablo Seçin:");
        final JComboBox<String> tablolar = new JComboBox<String>();
        final DatabaseMetaData md = connect.getMetaData();
        final ResultSet rs = md.getTables(null, null, "%", null);

        while (rs.next()) {
            tablolar.addItem(rs.getString(3));
        }

        tablolar.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent arg0) {

                tablo = tablolar.getSelectedItem().toString();

                try {

                     ResultSet rs2 = statement.executeQuery("SELECT * FROM "+tablo);
                     ResultSetMetaData rsmd = rs2.getMetaData();
                     columnCount = rsmd.getColumnCount();

                     sutunlar = new String[columnCount];

                     Object columnNames[] = new Object[columnCount];
                     Object rowData[][] = {{""}};
                     tableModel = new DefaultTableModel(rowData, columnNames);

                         for(int i=0;i<columnCount;i++){

                             sutunlar[i] = rsmd.getColumnLabel(i+1);
                             columnNames[i] = sutunlar[i];

                             }

                         tableModel.addRow(rowData);
                         tableModel.addColumn(columnNames);
                         table.setModel(tableModel);
                         table.repaint();
                         scrollPane = new JScrollPane(table);
                         sutunPanel.add(scrollPane);
                         sutunPanel.revalidate();
                         sutunPanel.repaint();

                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

        JButton ekle = new JButton("Ekle");
        ekle.addActionListener(new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent e) {

                try {
                    switch(tablo){
                    case "department":

                        statement.executeUpdate("INSERT INTO department(Name,Location) VALUES('"+tf.getText()+"')");
                    case "employee":

                        statement.executeUpdate("INSERT INTO employee(Id,FirstName,LastName,Sex,Address,Email,Salary,BirthDate,JoinDate) VALUES('"+tf.getText()+"')");
                    case "engineer":

                        statement.executeUpdate("INSERT INTO engineer(EngineerType) VALUES('"+tf.getText()+"')");
                    case "manager":

                        statement.executeUpdate("INSERT INTO manager(Department) VALUES('"+tf.getText()+"')");
                    case "project":

                        statement.executeUpdate("INSERT INTO project(Name,Number,Value) VALUES('"+tf.getText()+"')");
                    case "secretary":

                        statement.executeUpdate("INSERT INTO secretary(TypingSpeed) VALUES('"+tf.getText()+"')");
                    }

                } catch (SQLException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
        });

        JButton cik = new JButton("Çık");
        cik.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                System.exit(0);
            }
        });

        JPanel panel = new JPanel(new FlowLayout());

        panel.add(tabloSec);
        panel.add(tablolar);
        panel.add(sutunPanel);
        panel.revalidate();
        panel.add(ekle);
        panel.add(cik);

        JFrame frame = new JFrame("Deneme");
        frame.setSize(600,600);
        frame.setLocationRelativeTo(null);
        frame.add(panel);
        frame.setVisible(true);
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:04:21.683

你不应该更换`JTable`

```
table = new JTable(1,columnCount); 
```

相反，更新现有的`TableModel`或创建新的`TableModel`并使用`JTable#setModel`来替换模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:49:55.770

> 但是什么也没发生，程序给出了数组索引超出范围的异常。

不要使用数组，因为您不知道将从 SQL 查询返回的数据量。

您应该使用 Vector 作为列名。您还需要为数据提供第二个向量。最后，对于返回的每一行，您需要一个新的向量，将其添加到数据向量中。

目前，您的代码甚至没有尝试从 ResultSet 中获取数据。你只得到不是很有用的列名。

获得所有数据后，您可以使用 columnName Vector 和 data Vector 创建一个新的 DefaultTableModel。然后你使用 table.setModel() 方法来更新你的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:04:02.553

从数据库中取回数据后，尝试添加 SwingUtilities.invokeLater() 。它可能是一个事件调度问题。另外，不要在 actionListener() 中构造你的 GUI 组件（那肯定会导致问题）

# command-line - 如何在 Rust 中访问命令行参数？

> ID：15619320
> 
> 赞同：163
> 
> 时间：2013-03-25T15:59:30.493
> 
> 标签：command-line, rust

[Rust 教程](https://doc.rust-lang.org/book/guessing-game.html)没有解释如何从命令行获取参数。`fn main()`在所有示例中仅以空参数列表显示。

访问命令行参数的正确方法是什么`main`？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2013-03-25T18:16:47.837

您可以使用[`std::env::args`](https://doc.rust-lang.org/stable/std/env/fn.args.html)or[`std::env::args_os`](https://doc.rust-lang.org/stable/std/env/fn.args_os.html)函数访问命令行参数。这两个函数都返回参数的迭代器。前者迭代`String`s （易于使用），但如果其中一个参数不是有效的 unicode，则会出现恐慌。后者迭代`OsString`s 并且从不恐慌。

请注意，迭代器的第一个元素是程序本身的名称（这是所有主要操作系统的约定），因此第一个参数实际上是第二个迭代元素。

处理结果的一种简单方法`args`是将其转换为`Vec`：

```
use std::env;

fn main() {
    let args: Vec<_> = env::args().collect();
    if args.len() > 1 {
        println!("The first argument is {}", args[1]);
    }
} 
```

您可以使用整个[标准迭代器工具箱](https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html)来处理这些参数。例如，仅检索第一个参数：

```
use std::env;

fn main() {
    if let Some(arg1) = env::args().nth(1) {
        println!("The first argument is {}", arg1);
    }
} 
```

您可以在[crates.io](https://crates.io)上找到用于解析命令行参数的库：

*   [docopt](https://crates.io/crates/docopt)：您只需编写帮助消息，并为您生成解析代码。
*   [clap](https://crates.io/crates/clap)：您使用流利的 API 描述要解析的选项。比 docopt 更快，并为您提供更多控制。
*   [getopts](https://crates.io/crates/getopts)：流行的 C 库的端口。更低级别，甚至更多控制。
*   [structopt](https://crates.io/crates/structopt)：建立在 clap 之上，使用起来更加符合人体工程学。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-10-23T02:22:00.343

[Docopt](https://github.com/docopt/docopt.rs)也可用于 Rust，它会根据使用字符串为您生成解析器。作为 Rust 的一个好处，宏可用于自动生成结构并进行基于类型的解码：

```
docopt!(Args, "
Usage: cp [-a] SOURCE DEST
       cp [-a] SOURCE... DIR

Options:
    -a, --archive  Copy everything.
") 
```

您可以通过以下方式获得论点：

```
let args: Args = Args::docopt().decode().unwrap_or_else(|e| e.exit()); 
```

自述文件和[文档](https://docs.rs/docopt)有大量完整的工作示例。

免责声明：我是这个库的作者之一。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-07-08T21:24:13.300

Rust在[getopts crate](https://crates.io/crates/getopts)`getopt`中有-style CLI 参数解析。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-01-09T12:33:05.827

对我来说，getopts 总是觉得太低级，而 docopt.rs 太神奇了。我想要一些明确而直接的东西，如果我需要它们，它们仍然可以提供所有功能。

这就是[clap-rs](https://github.com/kbknapp/clap-rs)派上用场的地方。
感觉有点像 Python 中的 argparse。这是它的外观示例：

```
let matches = App::new("myapp")
                      .version("1.0")
                      .author("Kevin K. <kbknapp@gmail.com>")
                      .about("Does awesome things")
                      .arg(Arg::with_name("CONFIG")
                           .short("c")
                           .long("config")
                           .help("Sets a custom config file")
                           .takes_value(true))
                      .arg(Arg::with_name("INPUT")
                           .help("Sets the input file to use")
                           .required(true)
                           .index(1))
                      .arg(Arg::with_name("debug")
                           .short("d")
                           .multiple(true)
                           .help("Sets the level of debugging information"))
                      .get_matches(); 
```

您可以像这样访问您的参数：

```
println!("Using input file: {}", matches.value_of("INPUT").unwrap());

// Gets a value for config if supplied by user, or defaults to "default.conf"
let config = matches.value_of("CONFIG").unwrap_or("default.conf");
println!("Value for config: {}", config); 
```

（复制自[官方文档](https://github.com/kbknapp/clap-rs#quick-example)）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-05T21:46:44.997

从 0.8/0.9 版开始，函数 args() 的正确路径是`::std::os::args`，即：

```
fn main() {
  let args: ~[~str] = ::std::os::args();
  println(args[0]);
} 
```

看起来，即使是标准 I/O，Rust 现在仍然很不稳定，所以这可能很快就会过时。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-05T23:47:53.970

锈又变了。`os::args()`已弃用，取而代之的是`std::args()`. 但`std::args()`不是数组，它返回一个*迭代器*。您可以遍历命令行参数，但不能使用下标访问它们。

[http://doc.rust-lang.org/std/env/fn.args.html](http://doc.rust-lang.org/std/env/fn.args.html)

如果您希望命令行参数作为字符串向量，现在可以使用：

```
use std::env;
...
let args: Vec<String> = env::args().map(|s| s.into_string().unwrap()).collect(); 
```

*Rust - 学会拥抱变化的痛苦。*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-10-09T14:30:34.420

另请查看 structopt：

```
extern crate structopt;
#[macro_use]
extern crate structopt_derive;

use structopt::StructOpt;

#[derive(StructOpt, Debug)]
#[structopt(name = "example", about = "An example of StructOpt usage.")]
struct Opt {
    /// A flag, true if used in the command line.
    #[structopt(short = "d", long = "debug", help = "Activate debug mode")]
    debug: bool,

    /// An argument of type float, with a default value.
    #[structopt(short = "s", long = "speed", help = "Set speed", default_value = "42")]
    speed: f64,

    /// Needed parameter, the first on the command line.
    #[structopt(help = "Input file")]
    input: String,

    /// An optional parameter, will be `None` if not present on the
    /// command line.
    #[structopt(help = "Output file, stdout if not present")]
    output: Option<String>,
}

fn main() {
    let opt = Opt::from_args();
    println!("{:?}", opt);
} 
```

[https://github.com/TeXitoi/structopt](https://github.com/TeXitoi/structopt)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-11T17:46:01.480

barjak[所说](https://stackoverflow.com/questions/15619320/how-can-i-access-command-line-parameters/15621897#15621897)的适用于字符串，但如果您需要将参数作为数字（在本例中为 uint），则需要像这样转换：

```
fn main() {
    let arg : ~[~str] = os::args();
    match uint::from_str(arg[1]){
         Some(x)=>io::println(fmt!("%u",someFunction(x))),
         None=>io::println("I need a real number")
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-11-10T14:43:23.117

[Rust 书“No stdlib”一章](https://doc.rust-lang.org/stable/book/no-stdlib.html)介绍了如何访问命令行参数（另一种方式）。

```
// Entry point for this program
#[start]
fn start(_argc: isize, _argv: *const *const u8) -> isize {
    0
} 
```

现在，该示例也确实具有`#![no_std]`我认为这意味着通常情况下，std 库将具有您的二进制文件的真正入口点并调用一个名为`main()`. 另一种选择是使用 '禁用`main`垫片' `#![no_main]`。如果我没记错的话，就是对编译器说您正在完全控制程序的启动方式。

```
#![no_std]
#![no_main]

#[no_mangle] // ensure that this symbol is called `main` in the output
pub extern fn main(argc: isize, argv: *const *const u8) -> isize {
    0
} 
```

* * *

[如果您只想读取命令行参数，我认为这不是一种“好”的做事方式。其他答案中提到的`std::os`模块似乎是一种更好的做事方式。为了完成，我发布了这个答案。]

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-17T13:36:21.363

[自 2013 年 5 月Calvin 的回答](https://stackoverflow.com/questions/15619320/how-can-i-access-command-line-parameters/16500034#16500034)以来，Rust 已经发展。现在可以使用以下命令解析命令行参数`as_slice()`：

```
use std::os;

fn seen_arg(x: uint)
{       
    println!("you passed me {}", x);
}
fn main() {
    let args = os::args();
    let args = args.as_slice();
    let nitems = {
            if args.len() == 2 {
                    from_str::<uint>(args[1].as_slice()).unwrap()
            } else {
                    10000
            }
    };

    seen_arg(nitems);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-11T17:19:08.017

~~从较新的 Rust 版本（Rust > 0.10/11）开始，数组语法将不起作用。您将不得不使用 get 方法。~~

数组语法（再次）在夜间工作。因此，您可以在 getter 或数组索引之间进行选择。

```
use std::os;

fn main() {
  let args = os::args();
  println!("{}", args.get(1));
}

// Compile
rustc args.rs && ./args hello-world // returns hello-world 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-24T23:14:55.307

如果要迭代命令行参数：

```
use std::env::{args,Args};

fn main() {
    let mut args:Args=args();
    // args.nth(0) cannot borrow as mutable. that is why  let mut args
    // nth return an element of iterator
    let first=args.nth(1).unwrap();
    // iterator has next method. we want to get the first element of next iterator. NOT args.nth(2)
    // chars returns an iterator
    let operator=args.nth(0).unwrap().chars().next().unwrap();
    let second=args.nth(0).unwrap();
} 
```

如果您想直接访问第 n 个参数：

```
fn get_nth_arg(n:usize)->String{
    std::env::args().nth(n).unwrap()
} 
```

# excel - 在 PowerShell 中不使用 Com 对象创建/修改 Excel 电子表格？

> ID：15619323
> 
> 赞同：0
> 
> 时间：2013-03-25T15:59:34.323
> 
> 标签：excel, powershell, report, powershell-2.0, spreadsheet

有没有办法在不使用 Com 对象的情况下使用 PowerShell 生成 excel 电子表格？我有一些非常丑陋的脚本，它们可以打开 Excel Com 对象、添加数据、运行一些宏并保存文件以创建我需要的报告。如果我可以定义电子表格格式，然后使用 PowerShell 将 csv 转换为该格式，我认为它会更快，并且整体上更好的脚本。我怎么能那样做？可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:15:13.187

是工作簿`.xls`还是`.xlsx`文件？后者基本上是 Zip 存档中的一堆 XML 文件，因此您可以从存档中提取 XML 文件并从那里继续。如果您需要手工制作`.xlsx`文件，[则此](http://www.visualbasicscript.com/fb.ashx?m=71130)在 visualbasicscript.com 上的发布可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:11:44.753

如果您对访问电子表格/工作簿中的原始数据、将其转储到 CSV 和/或在 Excel 之外进行一些其他处理感到满意，请参阅[此答案](https://stackoverflow.com/a/15537692/1324345)以开始通过 ODBC & 访问数据`System.Data`。

# ruby-on-rails - 共享模板的共享缓存？

> ID：15619326
> 
> 赞同：0
> 
> 时间：2013-03-25T15:59:38.500
> 
> 标签：ruby-on-rails, ruby, haml

我们为我们的网络应用程序使用客户端模板。

但是我们有**很多**东西要生成。生成模板大约需要 4 到 5 秒，因此我们使用`- cache(:action_suffix => 'tmpl_timeline') do`它来缓存它。

这导致响应时间的改进，但仅在第一次访问项目之后。我们希望将其缓存共享`tmpl_timeline`给我们所有的项目。

每个项目都有一个独特的网址，例如：`domain.com/[:unique_hash]`

我已经看到我们可以修改控制器上缓存的路径，但我真的不知道它对我有什么帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:07:05.740

好的，经过一天的测试，我找到了看起来不错的解决方案。

我做了一个这样的助手

```
 def template_cache
      if !Rails.cache.exist? 'tmpl_timeline_' + I18n.locale.to_s
        Rails.cache.write('tmpl_timeline_' + I18n.locale.to_s, render('shared/templates_timeline') )
      end

      Rails.cache.read( 'tmpl_timeline_' + I18n.locale.to_s ).html_safe
    end 
```

现在每次部署时，我都会清理 rails Cache，并且会为使用它的每个视图缓存此模板

# java - Java：如何强制对类进行注释？

> ID：15619332
> 
> 赞同：3
> 
> 时间：2013-03-25T16:00:00.930
> 
> 标签：java, annotations, abstract-class

我有一个抽象类：

```
public abstract class AbstractItem 
```

和几个具体的类：

```
public class ConcreteItem1 extends AbstractItem
public class ConcreteItem2 extends AbstractItem
public class ConcreteItem3 extends AbstractItem 
```

我也有一个自定义注释：

```
@Target(value = ElementType.TYPE)
@Retention(value = RetentionPolicy.RUNTIME)
public @interface MyAnnotation 
```

如何强制我的 ConcreteItems 使用 MyAnnotation？我可以在 AbstractItem-Class 中以某种方式定义它吗？

# azure - Azure Cent OS 卸载我的数据驱动器

> ID：15619348
> 
> 赞同：1
> 
> 时间：2013-03-25T16:00:33.170
> 
> 标签：azure, centos, mount

我有一个在 Windows Azure 上运行的 Cent OS VM 实例。我有一个 1TB 的数据驱动器安装到该 VM 以保存应用程序的数据库文件。每隔一周左右的时间间隔，我的数据库就会崩溃，我发现我的数据驱动器在未经我许可的情况下被自动卸载。

我的数据驱动器仍然存在，所有数据都完好无损。我必须登录并重新挂载“sudo mount /dev/sdd1 /mount/datadrive”。这对我的数据和使用它的进程来说是令人沮丧和有害的。

卸载之前的日志中也没有任何内容，也没有关于卸载驱动器的任何内容。这就像我的驱动器被卸载并且日志被清除干净。我不是Linux专家。重新启动时是否会擦除日志？我的机器是否正在重新启动并且我的驱动器没有被重新安装？

我究竟做错了什么？知道为什么会这样吗？我怎样才能让它停下来？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T00:22:19.233

请参阅[http://www.techotopia.com/index.php/Adding_a_New_Disk_Drive_to_a_CentOS_System#Configuring_CentOS_to_Automatically_Mount_a_File_System](http://www.techotopia.com/index.php/Adding_a_New_Disk_Drive_to_a_CentOS_System#Configuring_CentOS_to_Automatically_Mount_a_File_System)。您需要配置 CentOS 以自动挂载文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:32:36.110

我们可以通过多种方式了解您的问题。我可以建议访问您的管理门户并在设置部分中查找操作日志，以查看是否有显示机器已重新启动的日志。随着时间的 Azure VM 重新启动日志存储在内部，因此如果您[在此处](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/threads)使用 Windows Azure 论坛打开联系请求，我们肯定可以查看它对您的问题的影响。

此外，当您的虚拟机未安装数据磁盘时，您能否验证数据磁盘是否在虚拟机仪表板部分的 Windows Azure 门户中显示您的虚拟机的一部分？

虚拟机重新启动后，数据磁盘安装仍然存在，因此我确信虚拟机重新启动不会是您的问题。我怀疑是由于某些**未知问题**，虚拟机配置在重新启动后离开数据磁盘，或者在问题返回未安装的磁盘后导致重新启动。如果您通过论坛联系 Azure VM 支持并报告问题，我当然可以查看。

# java - 如何正确设置 javamail 以使用 STARTTLS？

> ID：15619349
> 
> 赞同：2
> 
> 时间：2013-03-25T16:00:37.733
> 
> 标签：java, smtp, jakarta-mail, starttls

在设置我的会话时，我正在设置 starttls.enable 和 .required 属性，但是当连接发生时，根据文档它应该会失败：

> mail.smtp.starttls.enable boolean 如果为 true，则在发出任何登录命令之前启用使用 STARTTLS 命令（如果服务器支持）将连接切换到受 TLS 保护的连接。请注意，必须配置适当的信任库，以便客户端信任服务器的证书。默认为 false。” [http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)

```
props = new Properties();
props.put("mail.smtps.host", MAILSERV);
props.put("mail.smtps.socketFactory.port", 465);
props.put("mail.smtps.auth", "true");
props.put("mail.smtps.port", 465);
props.put("mail.smtps.socketFactory.fallback", "false");
props.put("mail.smtps.socketFactory.class","utils.DummySSLSocketFactory");
props.put("mail.smtps.quitwait", "false");
props.put("mail.smtp.starttls.enable", "true");
props.put("mail.smtp.starttls.required", "true");
Session session = Session.getInstance(props, authenticator);  

transport = session.getTransport("smtps");
transport.connect(mailServer, port, username, password);
transport.sendMessage(message, message.getAllRecipients()); 
```

那么我做错了什么让我在服务器不支持的情况下使用 Starttls？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:54:52.183

我在使用 STARTTLS 时遇到的问题是由于我获得了安全传输造成的：

```
transport = session.getTransport("smtps"); 
```

将其更改为“smtp”后，我能够使用 STARTTLS。

# c# - 类似于 Dropthings 中的 Nullabletype 的新语法？

> ID：15619352
> 
> 赞同：0
> 
> 时间：2013-03-25T16:00:44.880
> 
> 标签：c#

我最近下载了 Dropthings 门户，并在代码中发现了一种新语法。

```
ConfigurationManager.AppSettings["t"] ?? string.Empty 
```

我想知道它是否类似于 NULLABLE 类型，如果 config... 为 NULL，则将使用此值。有人可以澄清我的观察，因为我在 MSDN 中也找不到等效示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:02:04.577

是的，你是对的，

`a ?? b`意思是，`a`如果`a` 不为空，`b`如果是

这有点相当于`a == null ? b : a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:02:27.847

> [??](http://msdn.microsoft.com/en-IN/library/ms173224.aspx) _ [运算符](http://msdn.microsoft.com/en-IN/library/ms173224.aspx)称为*空值合并运算符*，用于为可空值类型或引用类型定义默认值。如果操作数不为空，则返回左侧操作数；否则返回正确的操作数。

例子

```
 int? x = null;

 // y = x, unless x is null, in which case y = -1\. 
 int y = x ?? -1; 
```

查看[ScottGu 的博客](http://weblogs.asp.net/scottgu/archive/2007/09/20/the-new-c-null-coalescing-operator-and-using-it-with-linq.aspx)以了解此运算符的简单说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T16:02:31.957

您的`??`代码中的 实际是 C# 语言中内置的一项功能。它被称为[Null Coalescing Operator](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。您可以在任何 C# 代码中使用它。

```
string someValue = null;
Console.WriteLine(someValue ?? "Default Value"); //Default Value 
```

# java - 如何向肥皂标题添加属性？

> ID：15619354
> 
> 赞同：1
> 
> 时间：2013-03-25T16:00:50.053
> 
> 标签：java, soap, axis, soap-client

我想向肥皂标题添加属性，例如

```
 <soapenv:Header attr="somevalue"attr1="somevalue"/> 
```

使用 Axis 1。但 API 不允许我这样做。我在另一个标题元素中得到了这个元素，比如

```
 <soapenv:Header>
        <soapenv:Header attr="somevalue"attr1="somevalue"/>
    </soapenv:Header> 
```

任何帮助表示赞赏。

这是添加标题的代码

```
SOAPFactory factory = SOAPFactory.newInstance();
String prefix = "soapenv";
String uri="http://schemas.xmlsoap.org/soap/envelope/";
SOAPElement Elem;
Elem = factory.createElement("Header",prefix,uri);
Elem.addAttribute(QName.valueOf("attr"), "value");
Elem.addAttribute(QName.valueOf("attr"), "value");
SOAPHeaderElement soapheader=new SOAPHeaderElement(Elem);
stub.setHeader(soapheader); 
```

# video - 在 Away3D 中增加 Videotexture 的分辨率

> ID：15619355
> 
> 赞同：0
> 
> 时间：2013-03-25T16:00:51.483
> 
> 标签：video, away3d

显然，任何纹理的最大尺寸为 2048 像素。但是因为我在 Sphere 中使用了这个纹理，所以图像看起来有点像素化。

我想以某种方式提高分辨率。谁能告诉我这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:39:06.550

2048x2048 是 Stage3D 允许的最大纹理尺寸。

您可以查看映射到倒置立方体（如天空盒）而不是球体。然后重新渲染视频以在 2048 帧内有 6 个单独的流，甚至是单独的流。

但请记住，VideoTexture 在其当前状态下非常缓慢且效率低下。在我们可以访问 GPU 上解码的视频帧之前，它都是 CPU，并且需要在每次渲染时将每一帧推送到 GPU！

# c++ - 如何使用来自 std::string 的 rapidjson 进行解析？

> ID：15619360
> 
> 赞同：4
> 
> 时间：2013-03-25T16:01:07.977
> 
> 标签：c++, rapidjson

如何使用来自 std::string 的 rapidjson 进行解析？我正在尝试（json字符串有效，我在[jsonlint.com](http://jsonlint.com)上检查过）

```
Document document;
char * writable = new char[contentString.size() + 1];
std::copy(contentString.begin(), contentString.end(), writable);
writable[contentString.size()] = '\0'; // don't forget the terminating 0
std::cout<<writable<<"\n";
if (document.Parse<0>(writable).HasParseError())
    return 1; 
```

**contentString**是我的**json std::string**，但是当我开始时我总是得到错误（**return 1**）。我也试过没有 size()+1 和 '\0' 但没有（绝望的测量编程）。谁能帮我 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-11T10:23:03.967

试试这个解析 std::string

```
std::string str = "{ \"hello\" : \"world\" }";
copiedDocument.Parse<0>(str.c_str()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-24T07:48:34.823

如果 contentString 是 std::string，请尝试

```
document.Parse<0>(contentString.c_str()).HasParseError() 
```

如果 contentString 是 char *，试试

```
document.Parse<0>(contentString).HasParseError() 
```

你最好发布你的原始代码片段

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T16:10:49.880

你有没有尝试过

```
if (document.Parse<0>(contentString.c_str()).HasParseError())
    return 1; 
```

?

因为，从文档中，我看不出你为什么想要任何“可写”的东西......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T16:16:34.893

在我看来，您发送 json 的字符串有错误，您使用正确，建议您尝试发送：

```
const char json[] = "{ \"hello\" : \"world\" }"; 
```

看看它是否有效，如果很明显这是一个缓冲区问题..你可以从那里继续我相信

# javascript - 如何在一个容器内有两个 div，以便在调整另一个大小时自动调整大小以填充容器？

> ID：15619370
> 
> 赞同：0
> 
> 时间：2013-03-25T16:01:39.620
> 
> 标签：javascript, css, html

我不确定如何最好地解释这一点，但基本上我想要的是一个容器 div，它是我屏幕的 100%，其中有两个 div，它们是高度的 50%。我想要它，以便用户可以在容器 div 高度的 20%-80% 之间调整顶部 div 的大小，并让下部 div 自动填充容器而不会溢出它。我遇到了两个问题：

1.  如果我将顶部 div 的高度设置为 50%（使用 CSS 或将高度设置为容器 offsetHeight 一半的 DOMContentLoaded 函数），它将不允许用户将其缩小到该大小以下。

2.  显然 onresize 在 Chrome 中的 div 中不起作用，所以我找不到修改较低 div 高度的方法。

我的问题是：

1.  这甚至可能吗？
2.  在两个div之间放置一些元素并使用html5可拖动会更好吗？我需要支持的唯一浏览器是 Google Chrome。
3.  还是我最好使用框架？

不允许使用外部 JavaScript 库。所以没有jQuery。

这是我到目前为止所拥有的：

```
<html>
<head>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function set_top_div_height() {
            var container_height = document.getElementById('container').offsetHeight;
            var top_div = document.getElementById('top');
            top_div.style.height = container_height / 2 + "px";
        });
    </script>
    <style type="text/css">
        div {
            -moz-box-sizing:border-box;
            -webkit-box-sizing:border-box;
            box-sizing:border-box;
        }

        #container {
            width: 100%;
            height: 100%;
            border: solid black 1px;
            overflow: hidden;
        }

        #top {
            width 100%;
            min-height: 20%;
            max-height: 80%;
            resize: vertical;
            overflow: auto;
            border-bottom: solid black 1px;
            background-color: #333;
        }

        #bottom {
            width: 100%;
            height: 50%;
            background-color: #ccc;
        }
    </style>
</head>
<body>
<div id="container">
    <div id="top">
        Top
    </div>
    <div id="bottom">
        Bottom
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:28:41.880

不要设置顶部 div 的高度。

消除

```
top_div.style.height = container_height / 2 + "px"; 
```

将底部 div 的高度设置为 100%

```
#bottom {
height:100%;
} 
```

页面加载时，顶部 div 将是最小高度 (20%)。它还取决于内容高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:38:08.103

你应该做的是设置div`min-height`和`max-height`调整大小时设置 %`height`以使两个高度的总和始终为 100%。

HTML

```
<div class="container">
  <div class="top_block"></div>
  <div class="bottom_block"></div>
</div> 
```

CSS

```
div.container{ height: 100%; border: 1px solid salmon; }
div.container > div{ min-height: 20%; max-height: 80%; }
div.container > div.top_block{ height: 50%; background-color: lightgreen; }
div.container > div.bottom_block{ height: 50%; background-color: dodgerblue; } 
```

如您所见，两个 div 的高度都在最小 20% 和最大 80% 之间，您可以使用`height`.

如果将其设置为 100%，则两个 div 将具有 80% 的高度，因为它是您设置的最大值。

与最小值相同，如果将高度设置为 0%，则会导致 div 具有 20% 的高度。

由于您不希望溢出，因此您应该使用 javascript 控制 % 高度，这样当顶部 div 的高度为 70% 时，底部的高度为 30%。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:20:01.760

好的，我通过创建一个函数来调整底部 div 的大小并使用 setTimeout 来轮询更新，从而找到了部分问题的答案。所以现在剩下的唯一问题是，我怎样才能将我的顶部 div 的高度更改为 50%，而不会导致 Chrome 阻止它稍后再次小于该大小？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T18:02:55.320

好的，我找到了一个使用 html5 和可拖动的更好的解决方案：

```
<html>
<head>
<script type="text/javascript">
    function update_size(ev) {
        ev.preventDefault();
        var top_div = document.getElementById('top');
        var bottom_div = document.getElementById('bottom');
        var left_height = document.getElementById('left').offsetHeight;
        var new_top_height = Math.floor(ev.clientY);
        var new_bottom_height = left_height - new_top_height - 4;
        top_div.style.height =  new_top_height + "px";
        bottom_div.style.height = new_bottom_height + "px";
    }

    function drop(ev) {
        ev.preventDefault();
        update_size(ev);
    }

    document.addEventListener("DOMContentLoaded", function () {
        var top_div = document.getElementById('top');
        var bottom_div = document.getElementById('bottom');
        var left_height = document.getElementById('left').offsetHeight;
        var new_top_height = Math.floor((left_height - 4) / 2);
        var new_bottom_height = left_height - new_top_height - 4;
        top_div.style.height =  new_top_height + "px";
        bottom_div.style.height = new_bottom_height + "px";
    });
</script>
<style type="text/css">
    body {
        margin: 0px;
    }

    div {
        -moz-box-sizing:border-box;
        -webkit-box-sizing:border-box;
        box-sizing:border-box;
    }

    #container {
        width: 100%;
        height: 100%;
    }

    #left {
        width: 80%;
        height: 100%;
        float: left;
        clear: left;
    }

    #right {
        width: 20%;
        height: 100%;
        float: left;
        clear: right;
        border-left: solid black 1px;
    }

    #top {
        width 100%;
        height: 50%;
        overflow: auto;
        background-color: #333;
    }

    #seperator {
        width: 100%;
        height: 4px;
        background-color: black;
    }

    #bottom {
        width: 100%;
        height: 50%;
        overflow: auto;
        background-color: #ccc;
    }
</style>
</head>
<body>
<div id="container">
    <div id="left">
        <div id="top" ondrop="drop(event)" ondragover="update_size(event);">
            Top
        </div>
        <div id="seperator" draggable="true">
            &nbsp;
        </div>
        <div id="bottom" ondrop="drop(event)" ondragover="update_size(event);">
            Bottom
        </div>
    </div>
    <div id="right">
        Right
    </div>
</div>
</body>
</html> 
```

# spring - 使用 StaticMessageSource 并使用空语言环境进行单元测试

> ID：15619371
> 
> 赞同：0
> 
> 时间：2013-03-25T16:01:39.863
> 
> 标签：spring, unit-testing

我正在对使用 messageSource 并传入[staticMessageSource](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/context/support/StaticMessageSource.html)以用作模拟对象的服务进行单元测试。staticMessageSource 允许使用 addMessage(String code, Locale locale, String msg) 以编程方式创建消息。语言环境是这里的必需参数（不能为空）。但是，对于来自真实 messageSource 的消息，我使用 null 语言环境，这意味着我不能使用 staticMessageSource 作为模拟消息源。谁能想到解决这个问题的方法？我不想为我的所有消息设置语言环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:58:14.237

您可以考虑滚动您自己的 MessageSource 实现。该接口只公开了三个方法，实现一个`addMessage`将预解析消息存储在地图中的方法应该足够简单。

# wpf - WPF 与自定义控件绑定

> ID：15619373
> 
> 赞同：1
> 
> 时间：2013-03-25T16:01:46.830
> 
> 标签：wpf, binding, properties

我目前正在设计一个系统（我在 WPF 中的第一个），我希望将我的自定义控件的属性绑定到控件样式中设置的元素。

```
<Style TargetType="{x:Type c:Connection}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type c:Connection}">
                <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                    <Line Stroke="Red" X1="90" X2="90" Y1="90" Y2="5"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我希望将 Line (X1/2 Y1/2) 的元素绑定到我的连接控件中的属性。但是，只要我添加一个连接元素（在代码中，即使没有绑定），我就会得到一个类型初始化错误。我的连接类如下：

```
public class Connection : Control
{
    public Connector StartElement { get; set; }
    public Connector EndElement { get; set; }

   #region Properties

    #endregion

} 
```

我初始化如下： Connection con = new Connection(); （然后我将它添加到画布上）。

如何将坐标绑定到连接器中的点？（例如 StartElement.GetXPosition()）；

亲切的问候汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:41:07.537

你确定你正确地创建了你的元素吗？

这对我有用：

在`Connection.cs`文件中

```
using System.Windows.Controls;

public class Connector {
  public int X { get; set; }
  public int Y { get; set; }
}

public class Connection : Control {
  public Connector StartElement { get; set; }
  public Connector EndElement { get; set; }
} 
```

`Xaml`：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:WpfApplication1">
  <UserControl.Resources>
    <Style TargetType="{x:Type local:Connection}">
      <Setter Property="SnapsToDevicePixels"
              Value="true" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type local:Connection}">
            <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
              <Line Stroke="Red"
                    X1="{Binding StartElement.X}"
                    X2="{Binding EndElement.X}"
                    Y1="{Binding StartElement.Y}"
                    Y2="{Binding EndElement.Y}" />
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </UserControl.Resources>
  <Canvas x:Name="canvasElement"
          Background="White" />
</UserControl> 
```

和`UserControl`代码隐藏：

```
public UserControl1() {
  InitializeComponent();
  Connection connectionVariable = new Connection {
    StartElement = new Connector { X = 0, Y = 0 },
    EndElement = new Connector { X = 300, Y = 300 }
  };
  canvasElement.Children.Add(connectionVariable);
  Canvas.SetLeft(connectionVariable, 0);
  Canvas.SetTop(connectionVariable, 0);
} 
```

运行这个，我看到一条红色的对角线。

# synchronization - 不同模块之间的 VHDL 同步

> ID：15619377
> 
> 赞同：0
> 
> 时间：2013-03-25T16:02:00.453
> 
> 标签：synchronization, vhdl

我已经非常努力地在互联网上搜索解决方案。但我失败了，这就是我把它放在这里的原因。

我正在尝试在 FPGA 中设计一个 I2C 模块。基本上它从其他块接收数据、模式信息。接收后，I2C 将从其环境设备中导出或读取数据。

我的问题是，当 I2C 与 FPGA 内部的其他模块通信时，I2C 如何与其他模块同步？我的意思是 I2C 怎么知道从其他块收到的 DATA 和 MODE 是否来自以前的？还是最新的？

我目前的想法是使用从其他块生成的脉冲来通知 I2C“新数据”即将到来。我能知道是否还有其他方法吗？这些方法之间有什么区别？

非常感谢。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:27:04.323

> 我的意思是 I2C 怎么知道从其他块收到的 DATA 和 MODE 是否来自以前的？还是最新的？

对于（几乎）我设计中的所有信号，有一个称为启用的额外信号，例如：data & data_en

因此 data_en = '1' 表示数据的新值。

这使设计生活变得轻松。您可以在状态机或计算管道中等待下一次启用并在正确的时钟周期开始处理。如果您的结果已准备好，只需将关联的 result_en 设置为“1”，下一个块就可以开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:02:43.387

如果您阅读 UM10204 [I2C 总线规范和用户手册](http://www.nxp.com/documents/user_manual/UM10204.pdf)(PDF, 1.4 MB)，您可能会发现 I ² C 比您预期的要复杂，但定义明确。

VHDL 中的参考设计可能会派上用场。试试 Frank Buss 的[I2C Slave 和 PCA9555 示例实现](http://www.frank-buss.de/vhdl/i2c_slave-0.4.zip)（ZIP，829KB）。PCA9555 （数据表，PDF [529KB ）显示了从 I](http://www.nxp.com/documents/data_sheet/PCA9555.pdf) ² C 接口对两个 8 位端口设备的读取和写入脉冲。中断用于向输入端口事件发送信号以使主机读取设备。我已经以这种方式将 PCA9555 系列设备用于 SONET 警报。

您的“从其他块生成的用于通知的脉冲”听起来是兼容的。一种替代方法可能是在一个或多个设计块上同时具有两条 I ² C 总线或同时具有主设备和从设备。Lattice Semiconductor 有一个参考主设计（参见[I2C（集成电路间）总线主控制器](http://www.latticesemi.com/products/intellectualproperty/referencedesigns/i2cbusmastercontroller.cfm)，ZIP 文件下载 494KB，VHDL 和 Verilog，仅许可用于 Lattice 实现）可用于教授您自己的主设计实现，也对流量生成器进行验证很有用。

# facebook - 在 Facebook 社交评论插件 fb:comments 中仅显示朋友的评论

> ID：15619379
> 
> 赞同：0
> 
> 时间：2013-03-25T16:02:04.833
> 
> 标签：facebook

如果一个人进入我的网站，他应该只会在 fb:comments 社交插件 ( [https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/) ) 中看到他朋友的评论。

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:11:04.153

**编辑**

虽然在 facebook 的文档中，但使用新版本的评论社交插件，这个选项无处可寻。除非有一些未记录的元标记允许这样做，否则对评论社交插件的每条评论都将是公开的。使评论仅对朋友可用：**取决于用户及其隐私设置**

```
Moderation tools

Admins can choose to make the default for new comments entered either “visible to everyone” or “has limited visibility” on the site (i.e., the comment is only visible to the commenter and their friends), to help mitigate irrelevant content.

Admins can also blacklist words and ban users. If a new comment is published from a banned user or contains a blacklisted word, this comment will automatically have limited visibility.

To moderate, you need to list yourself as an admin. To do this, simply include open graph meta tags on the URL specified as the href parameter of the plugin. These tags must be included in the <head> of the document. Include:

<meta property="fb:admins" content="{YOUR_FACEBOOK_USER_ID}"/>
To add multiple moderators, separate the uids by comma without spaces.

If your site has many comments boxes, we strongly recommend you specify a Facebook app id as the administrator (all administrators of the app will be able to moderate comments). Doing this enables a moderator interface on Facebook where comments from all plugins administered by your app id can be easily moderated together. You can choose to specify either fb:app_id or fb:admins, but not both. This tag should be specified in the <head>.

<meta property="fb:app_id" content="{YOUR_APPLICATION_ID}"/>
You can moderate comments from just this plugin inline. If you have specified your app id as the admin, you can moderate all your plugins at http://developers.facebook.com/tools/comments.

When you implement multiple comments boxes on your site and tie them together using an app_id, the moderation settings you choose will apply to all your comments boxes. For example, changing the moderation setting to 'has limited visibility' will affect all comments boxes under the same app_id. If you need to apply different moderation paradigms in different areas of your site, you should use two or more app_ids. You may then apply different moderation settings each group of comments boxes. 
```

来源：[https ://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T16:13:17.170

实际上仍然可以将评论框设置为“可见性有限”——在审核仪表板上，在“设置”>“审核模式”下，选择“让我在每条评论出现之前批准它”。如果您从不批准任何内容，用户将只能看到他们朋友的评论。

# php - url重写htaccess 123reg

> ID：15619384
> 
> 赞同：0
> 
> 时间：2013-03-25T16:02:24.270
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我不知道为什么看起来我的 htaccess 重写 url 在 123reg 上根本不起作用。在 ovh（我的测试环境）上：http:www.luckyunlucky.co.uk/mvc 它在 123reg 上正常工作：http://www.petitmondelondon.co.uk[只有](http://www.petitmondelondon.co.uk) 索引可以访问，之后我有一个错误 404。

我的 htaccess：根：

```
SetEnv PHP_VER 5
SetEnv REGISTER_GLOBALS 0
RewriteBase /
<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine on
RewriteRule    ^$    public/    [L]
RewriteRule    (.*) public/$1    [L]
</IfModule> 
```

并且在公共场合

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ index.php?url=$1 [PT,L]

</IfModule>
<IfModule !mod_rewrite.c>
ErrorDocument 404 index.php
</IfModule> 
```

这只是一场噩梦，请帮助我！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:22:38.503

我的名字是 Ray，我在 123-reg 工作，我可以看到 petitmondelondon.co.uk 已在 123-reg 注册，但设置为 301 重定向到由第 3 方托管的域。如果您可以向我提供支持票号，我将能够帮助您将域指向您希望上述代码工作的主机。

# salesforce - 如何从 java 下载 renderas='pdf' visualforce 页面？

> ID：15619385
> 
> 赞同：0
> 
> 时间：2013-03-25T16:02:25.027
> 
> 标签：salesforce

阅读此页面[http://www.forcedisturbances.com/2012/07/downloading-visual-force-pages-that-are.html](http://www.forcedisturbances.com/2012/07/downloading-visual-force-pages-that-are.html)，我尝试了此代码，但它似乎对我不起作用。

```
ConnectorConfig config = new ConnectorConfig();
config.setUsername(USERNAME);
config.setPassword(PASSWORD);
connection = Connector.newConnection(config);

URL url = new URL("https://c.na14.visual.force.com/apex/ReportPrintOut?id=");
url.openConnection().addRequestProperty("Authorization", "Bearer " + config.getSessionId());
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.connect(); 
```

我可以验证 salesforce 连接器对象是否成功，因为我没有抛出无效登录异常，并且可以成功查询数据。URL调用得到的url数据如下，说明session id有问题。但是我无法弄清楚问题是什么。

```
HTTP Code: 200
<script>
if (window.location.replace){ 
    window.location.replace('https://login.salesforce.com/?ec=302&startURL=%2Fvisualforce%2Fsession%3Furl%3Dhttps%253A%252F%252Fc.na14.visual.force.com%252Fapex%252FReportPrintOut%253Fid%253D');
} else {;
    window.location.href ='https://login.salesforce.com/?ec=302&startURL=%2Fvisualforce%2Fsession%3Furl%3Dhttps%253A%252F%252Fc.na14.visual.force.com%252Fapex%252FReportPrintOut%253Fid%253D';
} 
</script>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:06:28.917

我能够通过更换来解决这个问题

```
url.openConnection().addRequestProperty("Authorization", "Bearer " + config.getSessionId()); 
```

经过

```
url.openConnection().setRequestProperty("Authorization", "Bearer " + config.getSessionId()); 
```

# php - 具有相同纵横比的多个图像调整大小

> ID：15619389
> 
> 赞同：-3
> 
> 时间：2013-03-25T16:02:30.303
> 
> 标签：php, javascript, image, resize, image-resizing

如何调整具有相同纵横比的多个图像的大小。例如，

960x600 1152x720 1280x800 1440x900 1680x1050 1920x1200 2560x1600 2880x1800 3840x2400

如果我们的图像尺寸为 3840x2400，这些像素的纵横比相同。我需要将图像从 3840x2400 调整为上述像素。最好使用工具或 PHP 脚本或 Javascript 解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:29:44.257

```
<?php
  $source = imagecreatefromjpeg("path_to_source/filename.jpg");
  $width = 960;
  $height = $width*(imagesy($source)/imagesx($source));
  $destination = imagecreatetruecolor($width, $height);
  imagecopyresampled($destination, $source, 0, 0, 0, 0, $width, $height, imagesx($source), imagesy($source));
  imagejpeg($destination,"path_to_destination/filename.jpg");
?> 
```

更改`$width`为其他尺寸...

# django - 如何将从 Transifex 下载的 .po 文件加载到我的 Django-CMS 项目中？

> ID：15619394
> 
> 赞同：0
> 
> 时间：2013-03-25T16:02:45.363
> 
> 标签：django, internationalization, gettext, django-cms

我安装了 Django-CMS，一切都很好。

现在我想要法语翻译，`cmsplugin-blog`我通过这个链接 ( [https://www.transifex.com/projects/p/cmsplugin-blog/language/fr/](https://www.transifex.com/projects/p/cmsplugin-blog/language/fr/) ) 发现法语翻译已经 100% 完成。所以我从 Transifex Web 界面下载了 .po。

现在我该如何使用它？

我尝试将下载的 .po 文件复制到我的 project/locale/fr/LC_MESSAGES/ 目录。该文件名为`for_use_cmsplugin-blog_djangopo_fr.po`.

我跑了`django-admin.py compilemessages`，现在我有一个`.mo`同名的文件。重新启动后`runserver`，翻译不会出现..虽然它们是我自己的`django.po/mo`文件。

我必须做一些特别的事情以便它检测到该文件，还是必须将其内容合并到 django.po 文件中？如果我这样做了，当我`makemessages`下次运行时，它不会删除`django.po`文件合并部分中的所有翻译，而这些翻译在我的项目的某些文件中找不到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:50:18.570

您可能希望将下载的文件重命名为`project/locale/fr/LC_MESSAGES/django.po`，以便 Django 找到该文件。有关更多信息，请参阅[Django 本地化文档](https://docs.djangoproject.com/en/1.5/topics/i18n/translation/#how-django-discovers-translations)，了解它如何发现您的文件。

# angularjs - 从数组中删除元素会使迭代器无效

> ID：15619399
> 
> 赞同：1
> 
> 时间：2013-03-25T16:02:58.470
> 
> 标签：angularjs

在 AngularJS 中，我试图从类别数组中删除每个计数为 0 的类别。

```
// remove all categories that have a count of 0
i = 0;
angular.forEach( $scope.categories, function( category )
{           
    if( category.count == 0)
    {
        $scope.categories.splice( i, 1 );
    }
    i++;
}); 
```

此代码从数组中删除第一个计数为 0 的类别，但不删除下一个类别。我想，`splice`使迭代器无效？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T03:54:27.970

您可以在 1.6 或更高版本的 Array 对象上使用可用的过滤器方法。

```
function countFilter(category, index, array) {
  return (category.count != 0);
}
$scope.categories = $scope.categories.filter(countFilter); 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

如果您需要支持旧版本的 javascript，请查看上面链接的兼容性部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:30:05.040

我只会创建一个具有非零计数的新数组。像这样的东西：

```
// remove all categories that have a count of 0
var nonZeroCategories = [];
angular.forEach( $scope.categories, function( category )
{           
    if( category.count > 0)
    {
        nonZeroCategories.push(category)
    }
});
$scope.categories = nonZeroCategories; 
```

另外，作为一个仅供参考，迭代器函数有第二个参数，即索引，所以如果你需要它，你不需要`i`在`forEach`. 你可以这样做：

```
angular.forEach( $scope.categories, function( category, i ) {
    ..... 
```

# php - 从同一个 MySQL Query 填充两个 javascript 数组

> ID：15619402
> 
> 赞同：0
> 
> 时间：2013-03-25T16:03:12.917
> 
> 标签：php, javascript, mysql

我试图从同一个查询 ( ) 中填充这两个数组 ( 和 ) ，`time2`但是只填充了第一个数组， 我不明白为什么......实现了，当我需要获取一些数组位置的值时，应该会出现正确的值。这就是为什么我不能创建另一个相同的查询。 这可能吗？`text``$result`
`ORDER BY RAND ()`

```
 //Array Time
    var time2 = [<?php $title=$_GET["title"];

    $result = mysql_query("SELECT tag, round(avg(timecode)) as timecode, group_id
    FROM tags
    WHERE tags.filename = '".$title."'
    GROUP BY group_id, tag
    ORDER BY RAND()");

    while($row = mysql_fetch_array($result))
        {
        $timecode = $row['timecode'];
        print $timecode;
        print ",";
        }?>]

    //Array Text

    var text = [<?php

    while($row = mysql_fetch_array($result))
        {
        $tag = $row['tag'];
        print "'";
        print $tag;
        print "'";
        print ",";
        }?>] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:48:46.190

首先，您应该明确地改变 mysql_* 系列函数，因为它们显然已被弃用。不这样做的*唯一*正当理由是您的 php 安装已过时并且您无法控制服务器（因为它是托管的），即使这样也是勉强可以接受的。

我会通过这样做来解决你的问题：

```
<script>
var time2 = [];
var text = [];
<?php
  $title=$_GET["title"];

  $result = mysql_query("SELECT tag, round(avg(timecode)) as timecode, group_id FROM tags WHERE tags.filename = '".$title."' GROUP BY group_id, tag ORDER BY RAND()");

  while($row = mysql_fetch_array($result))
  {
    echo "time2.push('".$row['timecode']."');";
    echo "text.push('".$row['tag']."');";
  }
?>
</script> 
```

这允许您“同时”填充两个变量。好吧，实际上您让客户完成工作，我个人认为这没有问题。

另一种可能更明智的做法（我不会向您展示）是让页面对数据执行 AJAX 请求，以简单的 JSON 结构返回所有数据并在客户端上对其进行排序。 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:08:26.130

`mysql_fetch_array`是一个基于光标的函数。它将运行到结果集的末尾并停止。再次调用它仍将返回“结果集结束”。

..它已被弃用。

你应该：

1.  切换到 PDO 或 mysqli
2.  将整个结果集读出到本地变量，然后循环创建您的 javascript

# javascript - 使用 jQuery 在 textarea 中插入脚本标签

> ID：15619403
> 
> 赞同：1
> 
> 时间：2013-03-25T16:03:13.523
> 
> 标签：javascript, jquery, html, textarea

我正在尝试使用嵌入代码创建一个文本区域，以便用户可以复制该代码。我有两种嵌入方法（第一种方法是带有配对 div 的脚本），另一种是 iframe）。我使用户能够通过发送到服务器的参数来选择嵌入式小部件的大小。

textarea 内容应该是这个`<script src="http://mysite.com/embed/product_id/width/height"></script>`

通常，当通过 HTML 打印出来时，它会被设置为编码的 HTML (& lt; & gt;)，但在这种情况下，我需要通过 Javascript 进行设置。

**所以这不起作用：**

```
$('textarea.embed_code').val('<script src="http://mysite.com/embed/product_id/width/height"></script>'); 
```

结束标记打破了设置此行的初始脚本标记。

任何关于如何更改脚本源中的宽度和高度的建议也可以（正则表达式、字符串替换...），在这种情况下，我只需从 HTML 中打印出 textarea 内容。

任何其他标签都可以正常工作，问题出在`<script>`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T16:04:22.063

要将字符串`"</script>"`作为数据包含在`<script>`元素中，请转义`/`: `"<\/script>"`。这将破坏 HTML 结束标记语法，同时在 JavaScript 字符串文字语法中等效。

# apache-pig - Pig - 日期字符串到长转换

> ID：15619404
> 
> 赞同：2
> 
> 时间：2013-03-25T16:03:26.437
> 
> 标签：apache-pig

我在源文本文件中有一些日期值，如下面的第 3 列

```
123|text|2000-02-05 01:00:00-0500|true 
```

如何将它们转换为 Pig latin 中相应的 long 值？谢谢。

```
a = load 'test.txt';
b = <what should be here>(a);
dump b; --output contains long value for column 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:33:46.843

您可以使用[Piggybank中的 UDF 使用](http://pig.apache.org/docs/r0.11.0/udf.html#piggybank)[CustomFormatToISO UDF](http://pig.apache.org/docs/r0.11.0/api/org/apache/pig/piggybank/evaluation/datetime/convert/CustomFormatToISO.html)将日期字符串转换为 ISO 格式，然后使用[ISOToUnix UDF](http://pig.apache.org/docs/r0.11.0/api/org/apache/pig/piggybank/evaluation/datetime/convert/ISOToUnix.html)将 ISO 格式的日期转换为 Unix 毫秒。

从 pig 0.11 开始，您可以使用 DateTime 类型并调用[ToUnixTime](http://pig.apache.org/docs/r0.11.0/api/org/apache/pig/builtin/ToUnixTime.html)内置 UDF。

您也可以针对该问题编写自己的 UDF，这非常简单。

# python - Django - 使用 Django 学习网站开发 - 无法确定 view.py 或 urls.py 中是否有 SyntaxError

> ID：15619405
> 
> 赞同：1
> 
> 时间：2013-03-25T16:03:28.617
> 
> 标签：python, django, django-forms

我正在尝试遵循书中的教程 - Learning Website Development with Django (2008), Chapter 5, Page 72

我收到以下错误[http://dpaste.com/1034485/](http://dpaste.com/1034485/)并且我无法确定它是否在我的 views.py 或 urls.py 文件中。（PS Dpaste Link 有效期至 2013 年 3 月 19 日）

与我发现的类似问题如下：

1.  [http://markmail.org/message/w3s6sacserx2mwdi](http://markmail.org/message/w3s6sacserx2mwdi)（非常相似但找不到答案）

2.  [Django - AttributeError => 'set' object has no attribute 'get'](https://stackoverflow.com/questions/10406606/django-attributeerror-set-object-has-no-attribute-get?answertab=active#tab-top)（类似情况但错误不一样。在这个问题中 - 错误实际上是在表单代码和设置文本字段的属性中。我删除它们，现在代码工作正常。但是，我不确定他做了什么以及他编辑了什么代码。

我的代码如下：

视图.py

```
def bookmark_save_page(request):
    if request.method == "POST":
        form = BookmarkSaveForm(request.POST)
        if form.is_valid():
            # Create or get link            
            link, dummy = Link.objects.get_or_create(
                url=form.cleaned_data['url']
            )

            # Create or get bookmark.
            bookmark, created = Bookmark.objects.get_or_create(
                user = request.user,
                link=link,
            )

            # Update bookmark title
            bookmark.title = form.cleaned_data['title']
            # If the bookmark is being updated, clear old tag list.
            If not created:
                bookmark.tag_set.clear()

            # Create new tag list.
            tag_names = form.cleaned_data['tags'].split()
            for tag_name in tag_names:
                tag, dummy = Tag.objects.get_or_create(name=tag_name)
                bookmark.tag_set.add(tag)
            # Save bookmark to database
            bookmark.save()
            return HttpResponseRedirect('/user/%s/' % request.user.username)
        else:
            form = BookmarkSaveForm()

        variables = RequestContext(request, {'form' : form })
        return render_to_response('bookmark_save.html', variables) 
```

错误信息：

```
> Environment:

> Request Method: GET

> Django Version: 1.4
> Python Version: 2.7.3

> 5\. from bookmarks.views import *

> Exception Type: SyntaxError at /
> Exception Value: invalid syntax (views.py, line 56) 
```

如果帖子太冗长，请道歉。不确定需要什么信息。

注意：views.py 的第 56 行是 `If not created:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:07:21.833

```
 # If the bookmark is being updated, clear old tag list.
   #    ↓ should be lowercase
        if not created:
            bookmark.tag_set.clear() 
```

# c# - 为什么在结构中使用 LINQ 时必须复制“this”（如果我这样做可以吗）？

> ID：15619407
> 
> 赞同：17
> 
> 时间：2013-03-25T16:03:32.127
> 
> 标签：c#, linq, struct

下面的代码在不可变结构中包含一个简单的 LINQ 查询。

```
struct Point
{
   static readonly List</*enum*/> NeighborIndexes;
   //and other readonly fields!

    public IEnumerable<FlatRhombPoint> GetEdges()
    {
        return from neighborIndex in NeighborIndexes;
             select GetEdge(neighborIndex);
    }
} 
```

它不编译。

> 结构中的匿名方法、lambda 表达式和查询表达式无法访问“this”的实例成员。考虑将“this”复制到匿名方法、lambda 表达式或查询表达式之外的局部变量，并改用本地变量。

**有谁知道为什么不允许这样做？**

消息建议的修复工作正常：

```
 public IEnumerable<FlatRhombPoint> GetEdges()
    {
        var thisCopy = this;

        return from neighborIndex in NeighborIndexes;
             select thisCopy.GetEdge(neighborIndex);
    } 
```

但这是标准做法吗？是否有理由在结构中没有这样的查询？（在更大的计划中，制作副本并不会让我担心性能方面的问题）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-25T16:05:51.967

结构上的实例方法是通过对[隐藏](http://blog.slaks.net/2010/12/when-can-you-write-ref-this.html)[参数的](http://blog.slaks.net/2010/12/when-can-you-write-ref-this.html)*引用*来调用`this`的。 这就是为什么结构方法能够改变它们被调用的结构的原因。[`ref`](http://blog.slaks.net/2010/12/when-can-you-write-ref-this.html)

当您`this`在 lambda 表达式或 LINQ 查询中使用（或任何其他局部变量/参数）时，编译器会将其转换为[编译器生成的闭包类](http://blog.slaks.net/2011/06/delegates-vs-function-pointers-part-4-c.html)上的字段。

CLR 不支持`ref`字段，因此捕获的内容不可能`this`与常规`this`. （这也是不能`ref`在 lambda 中使用参数的原因）

迭代器方法也有同样的问题——它们被编译成一个隐藏的枚举器类，所有的变量或参数都变成了类中的字段（这就是迭代器不能接受`ref`参数的原因）。
然而，对于迭代器，C# 做出了相反的决定。在迭代器中，您[可以使用`this`](http://blog.slaks.net/2010/12/when-shouldnt-you-write-ref-this.html)，但它将被复制到枚举器类的字段中。
这意味着如果您在迭代器中对结构进行变异，则调用者的副本不会发生变异。

# c# - Html.ListBoxFor 只显示直到 9 个被选中的元素，>10 个元素没有被选中

> ID：15619408
> 
> 赞同：0
> 
> 时间：2013-03-25T16:03:41.550
> 
> 标签：c#, asp.net-mvc

我正在使用 HTML ListBoxFor 字段。我的模型包含一个字符串，其中包含指示选择了哪些值的分隔项和一个包含复选框值的多选元素。在我看来，我呼吁：

```
 @Html.ListBoxFor(x => x.SelectedItems, Model.MultiElements) 
```

当我查看我的发布方法时，我看到所有选定的项目都已发布。当我查看我的数据库时，我看到所有选定的值都已存储，当检索数据时，所有项目都在模型中检索。即使在我的代码中有断点，我也会看到模型数据中的所有值都被选中......

但是，在列表框中，所有被选中的第 9 位以上的元素都没有在 HTML 元素中被选中。快把我逼疯了，有人知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:15:47.317

发现问题。可怕但有效： [http ://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/05ee3b35-f3d3-48b4-83f5-ca3d9073624e/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/05ee3b35-f3d3-48b4-83f5-ca3d9073624e/)

# c - 求解 C 中的超越方程

> ID：15619413
> 
> 赞同：0
> 
> 时间：2013-03-25T16:03:55.620
> 
> 标签：c, math, equation

我需要在 C 中求解这个超越方程：

x = 2.0 - 0.5sen(x)

我试过这个：

```
double x, newx, delta;

x = 2.0 - 0.5; 
newx = sin(x);
delta = fabs(newx * x);

printf("%f", delta); 
```

这是对的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:44:35.903

使用数值方法来求解您的方程，例如[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method)或（更容易使用，并且在实践中不会太慢）[割线法](http://en.wikipedia.org/wiki/Secant_method)。对于最后一个，*不要*为下一个 x 重写表达式，这样写是为了不影响舍入误差（根附近的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:58:41.367

最简单的解决方案是迭代您给出的公式，直到它收敛到解决方案。这是求解类型方程的[定点迭代方法](http://en.wikipedia.org/wiki/Fixed-point_iteration)`x = f(x)`。

```
#define TOLERANCE 1e-8
#define MAX_ITER 50

double solve_equation() {
    double x = 1.0; /* 1.0 is our initial guess */
    double x_old;
    int i = 0;      /* iteration counter */
    do {
        x_old = x;
        x = 2 - 0.5*sin(x); /* magic! */
        i++;
    } while (fabs(x-x_old)/x > TOLERANCE && i < MAX_ITER);

    return x;
} 
```

在这种特殊情况下，该方法收敛速度很快，迭代次数的上限是不必要的。答案原来是 1.50121007326。

对于一般[求根](http://en.wikipedia.org/wiki/Root-finding_algorithm)，您可能会发现其他算法更有用，例如[二分法](http://en.wikipedia.org/wiki/Bisection_method)、[割线法](http://en.wikipedia.org/wiki/Secant_method)或[牛顿](http://en.wikipedia.org/wiki/Newton%27s_method)法或[哈雷](http://en.wikipedia.org/wiki/Halley%27s_method)法。

# jquery - KINETIC.JS 从存储的 json 加载图像

> ID：15619414
> 
> 赞同：2
> 
> 时间：2013-03-25T16:03:55.770
> 
> 标签：jquery, json, html, load, kineticjs

我能够从使用 json = stage.toJSON(); 创建的虚拟 json 字符串一次加载多个图像。离线这工作完美无缺，它甚至还记得我拖动它的位置。然而，当我把它放到我的服务器上时，只有第一张图像出现，其余的被隐藏，直到我点击它所在的位置。这是服务器性能的问题吗？上传到我的服务器的代码是相同的。出于测试目的，我仅使用 godaddy 进行托管。谢谢

任何帮助对我来说都很有价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T12:29:55.227

由于您在客户端工作，因此不能是服务器问题。可能它在您的机器上工作，因为已经缓存了图像。

检查您是否缓存了舞台定义中存在的所有图像（检查图像对象的 src），以将它们添加到动力学层（例如放置一个包含所有图像的隐藏 div 并使用 window.load 事件），否则您将调用绘图事件在图像完全加载之前。

希望这可以帮助

# ruby-on-rails - 最新的 Active_Model_Serializers 打破了设计视图

> ID：15619417
> 
> 赞同：3
> 
> 时间：2013-03-25T16:03:59.993
> 
> 标签：ruby-on-rails, ruby, devise, active-model-serializers

我正在对我们的一位客户使用的 Rails 应用程序进行一些更新。

长话短说，它依赖于 Devise 进行身份验证和 Active Model Serializers 来序列化我们 API 中的数据。

当前版本使用[Active Model Serializers 的一个分支](https://github.com/pushcx/active_model_serializers)，这是一个相当旧的版本。我需要最新版本的 Active Model Serializers 中的一些功能，所以我将 gem 更改为查看[master](https://github.com/rails-api/active_model_serializers)。方便的是，fork 中的更改已添加到 AMS 的最新版本中，因此我更改了语法，一切看起来都很好。

但是，一旦我退出该站点并重新登录，我就意识到有些东西非常糟糕。正如预期的那样，注销的用户会被重定向到 /users/sign_in。然而，自从 gem 更新以来，该页面现在是空白的 - 没有标题，没有 HTML，什么都没有。只是白色。我恢复到旧版本的 gem 以确认这是问题所在，并且 /users/sign_in 页面运行良好。

检查我的 rails 调试输出，我显示以下内容：

```
Started GET "/users/sign_in" for 127.0.0.1 at 2013-03-25 11:15:05 -0500
Processing by Devise::SessionsController#new as HTML
Completed 406 Not Acceptable in 76ms (ActiveRecord: 2.1ms) 
```

有人对为什么我的观点突然空白有一些提示吗？

## 附加信息

我不确定这是否相关，但这也很有趣。我尝试卷曲 /users/sign_in 页面，并在 cURL 上得到 JSON 响应。

```
{"user":{"id":null,"email":"","name":null}} 
```

这不是在普通浏览器上实现的。

__

在我的路线中，我有以下行将 Devise 映射到 /users，并覆盖注册控制器。

```
devise_for :users, :controllers => { :registrations => 'registrations'} 
```

注册控制器如下所示：

```
class RegistrationsController < Devise::RegistrationsController
  before_filter :authenticate_user!, :redirect_unless_admin

  private
  def redirect_unless_admin
    unless current_user && current_user.admin?
      redirect_to root_path
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:33:30.550

好吧，不可避免地，一旦我发布问题，我总是会立即找到答案。

[显然](https://stackoverflow.com/questions/14319868/ember-js-with-devise-on-rails-application-406-not-acceptable-on-sign-up)，最新版本的 Devise 默认只有一个`respond_to`on `:html`。

正常的问题是人们无法让 Devise 的 JSON 视图工作。出于某种原因——可能是由于代码库混乱——对我来说恰恰相反。为了解决这个问题，我将以下内容添加到我的应用程序控制器中。

```
respond_to :html 
```

现在，再一次，一切都很好。

# javascript - 我希望页面底部的表格仅出现在第二个选项卡的底部

> ID：15619419
> 
> 赞同：0
> 
> 时间：2013-03-25T16:04:03.570
> 
> 标签：javascript, html, css

我是 js、css 和 html 的新手。我正在尝试制作一个网站，但遇到了一些问题。我想让出现在页面底部的表格只出现在第二个选项卡的底部。现在的问题是表格出现在每个选项卡的底部。如果有人可以帮助我，那就太好了。代码如下：

```
<html>
    <head>
    <title>Apricot Consulting Group</title>
    <link type="text/css" rel="stylesheet" href="apricot.css"/>
    <script type="text/javascript">
    var tabLinks = new Array();
    var contentDivs = new Array();

    function init() {

      // Grab the tab links and content divs from the page
      var tabListItems = document.getElementById('tabs').childNodes;
      for ( var i = 0; i < tabListItems.length; i++ ) {
        if ( tabListItems[i].nodeName == "LI" ) {
          var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
          var id = getHash( tabLink.getAttribute('href') );
          tabLinks[id] = tabLink;
          contentDivs[id] = document.getElementById( id );
        }
      }
      // Assign onclick events to the tab links, and
      // highlight the first tab
      var i = 0;

      for ( var id in tabLinks ) {
        tabLinks[id].onclick = showTab;
        tabLinks[id].onfocus = function() { this.blur() };
        if ( i == 0 ) tabLinks[id].className = 'selected';
        i++;
      }

      // Hide all content divs except the first
      var i = 0;

      for ( var id in contentDivs ) {
        if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
        i++;
      }
    }

    function showTab() {
      var selectedId = getHash( this.getAttribute('href') );

      // Highlight the selected tab, and dim all others.
      // Also show the selected content div, and hide all others.
      for ( var id in contentDivs ) {
        if ( id == selectedId ) {
          tabLinks[id].className = 'selected';
          contentDivs[id].className = 'tabContent';
        } else {
          tabLinks[id].className = '';
          contentDivs[id].className = 'tabContent hide';
        }
      }

      // Stop the browser following the link
      return false;
    }

    function getFirstChildWithTagName( element, tagName ) {
      for ( var i = 0; i < element.childNodes.length; i++ ) {
        if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
      }
    }

    function getHash( url ) {
      var hashPos = url.lastIndexOf ( '#' );
      return url.substring( hashPos + 1 );
    }

</script>
  </head>

<body onload="init()">

            <p> <img src="apricot.jpg" width="312" height="93" class="center"/> </p>

<ul id="tabs">
    <li><a href="#aboutus">About Us</a></li>
    <li><a href="#services">Services</a></li>
    <li><a href="#resources">Resources</a></li>
    <li><a href="#computers">Computers</a></li>
</ul>

<div class="tabContent" id="aboutus">

<h1>About Us</h1>
    <div>
    <p>Apricot  Recruitment is a privately owned recruitment consultancy that
has been providing effective business solutions to organisations
throughout the UK.  At Apricot Recruitment we help find rewarding
temporary and permanent jobs for the job seeker, as well as provide
companies with highly skilled and motivated staff.  Our specially
trained consultants will find high quality candidates that match your
specific requirements. Clients and Candidates alike appreciate the
personal service we offer. Independent status means we always work in
the best interest of our customers and are therefore able to offer
complete flexibility of service. Each assignment is treated
individually in order to match both the client and candidates
requirements.</p>

</div>

</div>

<div class="tabContent" id="services">

<h1>Services</h1>

<div>

<p>Successful companies are built by successful people. Your company
needs the most talented, ambitious and determined individuals in order
to thrive. However, tracking down the ideal candidate can be
challenging.  We at Apricot Recruitment help you find that ideal
candidate.</p>

<p>By using our services you are able to outsource all your recruitment
needs to a single recruitment partner who oversees the entire supply
chain.  With an in depth knowledge of London Business, Apricot
Recruitment is ideally placed to help you locate and attract the best
possible candidates for your business. We specialise in going the
extra mile to find exactly the candidate to suit your business. Using
industry contacts and numerous research methods, we know precisely
where to look for your desired person.</p>

<p>The first step in recruiting the right candidates for your company is
learning about your business requirements, we thoroughly question,
evaluate and pre-interview all candidates before recommending only the
most appropriate for interview. This ensures you receive the very best
person for your role.</p>

<p>The Apricot Recruitment team uses a range of tools to source the best
possible talent.  These tools include:</p>

<ul>
<li>Extensive online and internal database searching.</li>
<li>Advertising in Premium Mediums.</li>
<li>Skills Assessment.</li>
<li>Headhunting.</li>
<li>Reference Checking.</li>
</ul>

</div>
</div>

<div class="tabContent" id="resources">

<h1>Resources</h1>

<div>

<p>We use lots of resources like monster, totaljobs, gumtree, etc.</p>

</div>
</div>

<div class="tabContent" id="computers">

<h1>Computers</h1>

    <p>Lots of computers.</p>
    <div>

<div id="DivPhotoGalleryFX"></div>
<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript">
 var flashvars = {};
 var params = {};
 params.base = "";
 params.scale = "noscale";
 params.salign = "tl";
 params.wmode = "transparent";
 params.allowFullScreen = "true";
 params.allowScriptAccess = "always";
 swfobject.embedSWF("PhotoGalleryFX.swf", "DivPhotoGalleryFX", "935", "300", "9.0.0", false, flashvars, params);

</script>

</div>

</div>

</body>

<div id="table">

<center>
<table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>
</center>

</div>

<script>

tabLinks[services].onclick = display: block;

</script>

</html> 
```

CSS

```
body {
    background-color: black;
}

h1 {
    font-family: times new roman;
    color: black;
    font-weight: bold;
}

p {

    font-family: times new roman;
    color: black;
}

ul {
    font-family: times new roman;
    color: black;
}

img.center {

display: block;
margin-left: auto;  
margin-right: auto; 

}

 body { font-size: 90%; font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif; }
      ul#tabs { list-style-type: none; margin: 30px 0 0 0; padding: 0 0 0.5em 0; }
      ul#tabs li { display: inline; }
      ul#tabs li a { color: black; background-color: goldenrod; border: 1px solid #c9c3ba; border-bottom: none; padding: 0.3em; text-decoration: none; }
      div.tabContent { border: 30px solid #c9c3ba; padding: 0.5em; background-color: goldenrod; }
      div.tabContent.hide { display: none; }
    div.table {display:none;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:20:12.717

尝试这个。您的代码中似乎还有其他错误，但只需要在您的标记中移动表格：

```
<html>
<head>
<title>Apricot Consulting Group</title>
<link type="text/css" rel="stylesheet" href="apricot.css"/>
<script type="text/javascript">
    var tabLinks = new Array();
    var contentDivs = new Array();

    function init() {

      // Grab the tab links and content divs from the page
      var tabListItems = document.getElementById('tabs').childNodes;
      for ( var i = 0; i < tabListItems.length; i++ ) {
        if ( tabListItems[i].nodeName == "LI" ) {
          var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
          var id = getHash( tabLink.getAttribute('href') );
          tabLinks[id] = tabLink;
          contentDivs[id] = document.getElementById( id );
        }
      }
      // Assign onclick events to the tab links, and
      // highlight the first tab
      var i = 0;

      for ( var id in tabLinks ) {
        tabLinks[id].onclick = showTab;
        tabLinks[id].onfocus = function() { this.blur() };
        if ( i == 0 ) tabLinks[id].className = 'selected';
        i++;
      }

      // Hide all content divs except the first
      var i = 0;

      for ( var id in contentDivs ) {
        if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
        i++;
      }
    }

    function showTab() {
      var selectedId = getHash( this.getAttribute('href') );

      // Highlight the selected tab, and dim all others.
      // Also show the selected content div, and hide all others.
      for ( var id in contentDivs ) {
        if ( id == selectedId ) {
          tabLinks[id].className = 'selected';
          contentDivs[id].className = 'tabContent';
        } else {
          tabLinks[id].className = '';
          contentDivs[id].className = 'tabContent hide';
        }
      }

      // Stop the browser following the link
      return false;
    }

    function getFirstChildWithTagName( element, tagName ) {
      for ( var i = 0; i < element.childNodes.length; i++ ) {
        if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
      }
    }

    function getHash( url ) {
      var hashPos = url.lastIndexOf ( '#' );
      return url.substring( hashPos + 1 );
    }

</script> 
```

```
 <body onload="init()">

                <p> <img src="apricot.jpg" width="312" height="93" class="center"/> </p>

    <ul id="tabs">
        <li><a href="#aboutus">About Us</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#resources">Resources</a></li>
        <li><a href="#computers">Computers</a></li>
    </ul>

    <div class="tabContent" id="aboutus">

    <h1>About Us</h1>
        <div>
        <p>Apricot  Recruitment is a privately owned recruitment consultancy that
    has been providing effective business solutions to organisations
    throughout the UK.  At Apricot Recruitment we help find rewarding
    temporary and permanent jobs for the job seeker, as well as provide
    companies with highly skilled and motivated staff.  Our specially
    trained consultants will find high quality candidates that match your
    specific requirements. Clients and Candidates alike appreciate the
    personal service we offer. Independent status means we always work in
    the best interest of our customers and are therefore able to offer
    complete flexibility of service. Each assignment is treated
    individually in order to match both the client and candidates
    requirements.</p>

    </div>

    </div>

    <div class="tabContent" id="services">

    <h1>Services</h1>

    <div>

    <p>Successful companies are built by successful people. Your company
    needs the most talented, ambitious and determined individuals in order
    to thrive. However, tracking down the ideal candidate can be
    challenging.  We at Apricot Recruitment help you find that ideal
    candidate.</p>

    <p>By using our services you are able to outsource all your recruitment
    needs to a single recruitment partner who oversees the entire supply
    chain.  With an in depth knowledge of London Business, Apricot
    Recruitment is ideally placed to help you locate and attract the best
    possible candidates for your business. We specialise in going the
    extra mile to find exactly the candidate to suit your business. Using
    industry contacts and numerous research methods, we know precisely
    where to look for your desired person.</p>

    <p>The first step in recruiting the right candidates for your company is
    learning about your business requirements, we thoroughly question,
    evaluate and pre-interview all candidates before recommending only the
    most appropriate for interview. This ensures you receive the very best
    person for your role.</p>

    <p>The Apricot Recruitment team uses a range of tools to source the best
    possible talent.  These tools include:</p>

    <ul>
    <li>Extensive online and internal database searching.</li>
    <li>Advertising in Premium Mediums.</li>
    <li>Skills Assessment.</li>
    <li>Headhunting.</li>
    <li>Reference Checking.</li>
    </ul>
    <table border="1">
    <tr>
    <td>row 1, cell 1</td>
    <td>row 1, cell 2</td>
    </tr>
    <tr>
    <td>row 2, cell 1</td>
    <td>row 2, cell 2</td>
    </tr>
    </table>
    </center>

    </div>
    </div>

    <div class="tabContent" id="resources">

    <h1>Resources</h1>

    <div>

    <p>We use lots of resources like monster, totaljobs, gumtree, etc.</p>

    </div>
    </div>

    <div class="tabContent" id="computers">

    <h1>Computers</h1>

        <p>Lots of computers.</p>
        <div>

    <div id="DivPhotoGalleryFX"></div>
    <script type="text/javascript" src="swfobject.js"></script>
    <script type="text/javascript">
     var flashvars = {};
     var params = {};
     params.base = "";
     params.scale = "noscale";
     params.salign = "tl";
     params.wmode = "transparent";
     params.allowFullScreen = "true";
     params.allowScriptAccess = "always";
     swfobject.embedSWF("PhotoGalleryFX.swf", "DivPhotoGalleryFX", "935", "300", "9.0.0", false, flashvars, params);

    </script>

    </div>

    </div>

    </body>

    <div id="table">

    <center>

    </div>

    <script>

    tabLinks[services].onclick = display: block;

    </script> 
```

# c# - 如何从 ObservableCollection 中获取 IndexOf Removed Item

> ID：15619420
> 
> 赞同：1
> 
> 时间：2013-03-25T16:04:05.477
> 
> 标签：c#, wpf, observablecollection

我想`ObservableCollection`用撤消/重做功能覆盖我，
但是我如何获得 OldItem 的 IndexOf，因为它仍然是 -1

看起来没有 CollectionChanging() 实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:07:26.197

在删除操作中， 的`OldStartingIndex`属性`NotifyCollectionChangeEventArgs`将告诉您在删除之前集合中的项目的索引。

例如

```
var col = new ObservableCollection<string>();
col.Add("hello");
col.Add("world");
col.CollectionChanged += (sender, e) => Console.WriteLine(e.OldStartingIndex);
col.RemoveAt(1);
col.RemoveAt(0); 
```

这将打印出来

```
1
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:07:34.923

对我来说，一种解决方案是为您的数据保留一个单独的列表并`ObservableCollection<int>`保留序列索引，这将使其权重更轻。您可以将 a`List<ObservableCollection<int>>`作为历史缓存，并动态更新列表中的当前位置（将其视为导航历史）。请注意，这取决于您的性能要求，如果您的数据很长，这是有问题的，否则更容易实现。

# html - 点击照片幻灯片

> ID：15619421
> 
> 赞同：1
> 
> 时间：2013-03-25T16:04:10.320
> 
> 标签：html, ajax

当我点击每一张照片时，我试图让我的照片按顺序出现。当我单击第一个图像时，它会转到第二个图像，但第三个图像却不一样。

主页上的代码：

```
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajax_info.html",true);
xmlhttp.send();
}
</script>

<div id="myDiv">

<h2><a><button type="submit" onclick="loadXMLDoc()"><img src="/project2_ver3/vor/pic5.jpg" alt="vor" width="540" height="418"/></a></button></h2>

</div> 
```

然后**ajax_info.html**的代码：

```
<!DOCTYPE html>
<html>
<body>

<script>
function loadXMLDoc2()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDivv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","\project2_ver3\ajax_infoo.html",true);
xmlhttp.send();
}
</script>

<div id="myDivv">

<h2><button type="submit" onclick="loadXMLDoc2()"><img src="/project2_ver3/vor/pic2.jpg" alt="vor" width="540" height="418"/></button></h2>

</div>

</body>
</html> 
```

最后是**ajax_infoo.html**的代码：

（代码修剪）：

```
xmlhttp.open("GET","ajax_infooo.html",true);
xmlhttp.send();
}
</script>
<div id="myDiv">
<h2><button type="submit" onclick="loadXMLDoc2()"><img src="/project2_ver3/vor/pic1.jpg" alt="vor" width="540" height="418"/></button></h2>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:46:59.680

问题是您要替换完整的“myDiv”innerHTML。这样做将停用您为按钮编写的 onclick 函数。尝试解决这个问题。那应该解决它。

# ios - 来自数组的 const unsigned char 的 XCode IOS 方法输入

> ID：15619428
> 
> 赞同：0
> 
> 时间：2013-03-25T16:04:48.217
> 
> 标签：ios, arrays, function, methods, initializer

目前，我有许多实例方法用于生成一些数据，我想为单个方法更改这些数据，该方法接受我传递给它的输入，编译器告诉我数组初始化器必须是初始化器列表或字符串文字。

我将字符串传递给这样的方法：-

```
 [self buildrawdata2:(const unsigned char *)"0ORANGE\0"]; 
```

这是当数组使用设置为“0ORANGE\0”的字符串时有效的方法，我传递的字符串也缺少最后的“\0”，我相信这是因为它是一个控制字符/转义序列，无论如何要保留它并像下面硬编码的字符串一样传递它：-

```
 - (void)buildrawdata2:(const unsigned char *)inputString2;

 {
     NSLog(@"ViewController::buildrawdata2");
     NSLog(@"ViewController::buildrawdata2 - inputstring2: %s", inputString2);

     //this works when set like this
     const unsigned char magic2[] = "0ORANGE\0";  

     const uint8_t pattern1 = {0xFC};
     const uint8_t pattern2 = {0xE0};

     uint8_t rawdata2[56];
     uint8_t index = 0;

     int byte = 0;
     int bit = 0;

     while (magic2[byte] != 0x00) {

         while (bit < 8) {

        if (magic2[byte] & (1<<bit)) {
            //add pattern2 to the array
            rawdata2[index++] = pattern2;
        }else{
            //add pattern1 to the array
            rawdata2[index++] = pattern1;
        }

        // next bit please
        bit++;
      }

      //next byte please
      byte++;

      //reset bit index
      bit = 0;

      }

      NSLog(@"buildrawdata2::RawData %@", [NSData dataWithBytes:rawdata2 length:56]);

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:46:49.713

看起来我已经找到了解决方案，我很高兴听到其他人对此方法的看法或改进它的建议。

我没有使用传递给方法的字符串并尝试直接更新数组初始化程序，而是使用字符串来确定应该使用哪个数组初始化程序。为此，我必须在 if 块之前创建一个指针，以便我可以从 if 块中为其分配字符串。

```
 const unsigned char *magic = NULL;

 if (inputString == @"0APPLES") { magic = (const unsigned char*) "0APPLES\0";}
 else if (inputString == @"0ORANGE") { magic = (const unsigned char*) "0ORANGE\0";} 
```

最近也尝试过这种方式，它也可以工作：-

```
 const unsigned char apples[] = "0APPLES\0";
 const unsigned char orange[] = "0ORANGE\0";
 const unsigned char *magic;

 if (inputString2 == @"0APPLES") { magic = apples;}
 else if (inputString2 == @"0ORANGE") { magic = orange;} 
```

然后可以像这样调用该方法：-

```
 [self buildrawdata1:@"0APPLES"];
 [self buildrawdata1:@"0ORANGE"]; 
```

# php - composer.phar 安装旧包

> ID：15619431
> 
> 赞同：3
> 
> 时间：2013-03-25T16:04:56.997
> 
> 标签：php, composer-php

我在使用“Composer”时遇到问题 当我在装有 Linux 操作系统的笔记本电脑上使用 Composer 时，Composer 安装的组件版本比已安装的组件版本旧。当我在办公室的 Windows PC 上使用 Composer 时，一切正常（在版本控制下使用相同的“composer.phar”文件）。

可能是什么问题呢？我使用的命令`php composer.phar update`来自项目目录。

提前感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:43:47.527

这很可能是因为您`composer.lock`的 linux 机器上有一个文件。Composer 有两个主要命令：`install`和`update`.

安装将检查`composer.lock`文件是否存在。如果是，该文件将用于确定要安装哪些版本的依赖项。如果没有，它将隐式执行`update`以获取最新的匹配版本。

更新将始终尝试获取最新的匹配版本，然后将它们写入`composer.lock`文件。

这里的建议是：

*   提交您的`composer.lock`版本控制（将其从 中删除`.gitignore`）。
*   在您的 linux 机器上运行`composer update`以获取最新版本。

# php - 清除 php 中的回显消息

> ID：15619432
> 
> 赞同：0
> 
> 时间：2013-03-25T16:04:58.140
> 
> 标签：php, javascript, ajax, html

我有一个文本框，用户可以在其中开始输入公司名称，然后它将开始列出可供选择的公司。我遇到的问题是，如果我单击带有空框的 ENTER，它会显示消息“请输入股票”，但是当用户开始输入前一条消息时，它会停留在那里并且还会显示建议。如何删除上一条消息？这是页面

```
if($_SERVER["REQUEST_METHOD"] == "POST"){

    $stock = lookup(strtoupper($_POST["symbol"]));

    if(empty($_POST["symbol"])){

        echo"You must enter a stock symbol";
        exit;

    }else if($_POST["symbol"]){

    $price = number_format($stock['price'], 2);

    echo "A share of {$stock['name']} costs $price";
    }

}

else{

    // render portfolio
render("stock_search.php", ["title" => "Get Quote"]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:10:43.593

您应该在（重新）开始输入时使用 JavaScript 隐藏或清除建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:22:51.773

您应该重定向到页面，以便页面刷新并删除消息

```
if($_SERVER["REQUEST_METHOD"] == "POST"){

$stock = lookup(strtoupper($_POST["symbol"]));

if(empty($_POST["symbol"])){

    echo"You must enter a stock symbol";
    //use redirect method to move page or refresh the same page not use exit; 

}else if($_POST["symbol"]){

$price = number_format($stock['price'], 2);

echo "A share of {$stock['name']} costs $price";
}

}

else{

    // render portfolio
render("stock_search.php", ["title" => "Get Quote"]);
} 
```

# java - Scriptella：如何从 clob 对象中动态获取数据，然后将其插入数据库？

> ID：15619433
> 
> 赞同：1
> 
> 时间：2013-03-25T16:04:58.820
> 
> 标签：java, etl, scriptella, janino

我是使用 Scriptella 的新手。

我的要求是这样的：

1）首先，我有一些非常大的 xml 文件，我必须从中将数据插入数据库。因此，我决定将 xml 文件插入为 clob 对象。这是我使用的语法：

```
<script connection-id="out" >
 insert into DUMMY_TABLE1 values(5, ?{textfile 'D:\Workspace\src\Menu_for_order.xml'}) 
```

它已成功运行。

2）接下来，我想做 - 获取 Clob 数据，然后将其解析为 xpath 查询，最后，将 xpath 字段下的文本值提取到数据库列中。

为此，我在查询块中编写了一个 java janino 块，如下所示：

```
 <query connection-id="out">
  select data as "data" from dummy_table1
 <script connection-id="java">

      java.sql.Clob clob = (java.sql.Clob) get("data");

      org.xml.sax.InputSource inputSource = new org.xml.sax.InputSource(clob.getCharacterStream());
      javax.xml.xpath.XPath xpath = javax.xml.xpath.XPathFactory.newInstance().newXPath();
      java.lang.String xpathExpression = "CommunicationCenter/Response/MenuData/Menu/Noun";

      org.w3c.dom.NodeList nodes = (org.w3c.dom.NodeList) xpath.evaluate(xpathExpression, inputSource, javax.xml.xpath.XPathConstants.NODESET);
</script> 
```

我的问题是 -**我必须将在“节点”节点列表中获取的数据插入到数据库列中。**

我怎样才能做到这一点？

对于 XML，我们可以在“查询”块中编写 Xpath 表达式，然后，对于每个获取的 xpath 字段，我们可以将数据插入 DB。

但是在这里，如果数据在 Clob 对象中，我如何从 Xpath 查询中提取数据？我必须使用 Java 代码来获取 Clob 数据。但在那之后，我该如何插入数据，因为 Scriptella 中有另一个约束：

*我们不能在脚本块中使用脚本。*由于“get”只能在“script”块内使用，我必须在这里使用 script 标签。

但是，你会告诉我使用**全局变量**。但是还有另一个问题：我要声明多少个全局变量？“nodes”节点列表中有很多字段。所以不可能为每个字段声明全局变量，对吧？？

任何人都可以给我一个关于这个具体问题的提示吗？你能告诉我Scriptella有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:14:59.097

从这个问题中，我不清楚您要将哪些数据插入到数据库列中。它是 XML 内容，还是从 NodeList 中提取的某些特定元素或属性值？我假设是后者。脚本不能放在其他脚本中是正确的。您需要一个查询元素来将数据提供给内部元素。这是一个如何实现的示例：

```
<query connection-id="out">
    select data as "data" from dummy_table1
   <query connection-id="java">
       java.sql.Clob clob = (java.sql.Clob) get("data");
       org.xml.sax.InputSource inputSource = new org.xml.sax.InputSource(clob.getCharacterStream());
       javax.xml.xpath.XPath xpath = javax.xml.xpath.XPathFactory.newInstance().newXPath();
      java.lang.String xpathExpression = "CommunicationCenter/Response/MenuData/Menu/Noun";

      org.w3c.dom.NodeList nodes = (org.w3c.dom.NodeList) xpath.evaluate(xpathExpression, inputSource, javax.xml.xpath.XPathConstants.NODESET);
      String someText = nodes.item(0).getTextContent();
      set("someText", someText); //Set variable for the inner script
      query.next(); //Executes inner script and make variables available to it
      <script connection-id="out">
          INSERT INTO TABLE VALUES(?someText);
      </script>
  </query> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:23:43.417

尝试在脚本标签中移动您的查询？并将您当前的脚本标签转换为（janino）查询？要在当前脚本标记中移动查询，您可能需要自己启动数据库连接。HTH 或希望给出了一些想法。

# objective-c - 在目标 C 中使用 alloc 的目的

> ID：15619434
> 
> 赞同：3
> 
> 时间：2013-03-25T16:04:59.387
> 
> 标签：objective-c

和有什么区别

```
 NSNumber *number = [[NSNumber alloc]initWithInt:13]; 
```

和

```
NSNumber *number = [NSNumber initWithInt:13]; 
```

当两者都解决相同的目的时，为什么还要分配？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T16:11:31.630

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:31:04.567

Graham Lee 已经给出了正确答案，这就是为什么你应该接受它作为正确答案。如今，在我看来`[NSNumber numberWithInt:42];`只是一个捷径`[[NSNumber alloc] initWithInt:42]`

# c++ - 如何区分终止程序的不同方式？

> ID：15619440
> 
> 赞同：0
> 
> 时间：2013-03-25T16:05:12.907
> 
> 标签：c++, windows, c++builder-2007

我正在使用 C++Builder 2007 为 Windows 编写程序。

当我的程序关闭时，它的行为应该会有所不同，具体取决于它的关闭方式：

1.  用户单击应用程序窗口的“X”：返回应用程序的用户登录。
2.  程序通过 TaskManager 终止：然后在那里终止程序。这一点尤其重要，因为程序不能阻止 Windows 关闭。

得到一个 OR 另一个很容易：实现一个`TForm::OnClose()`or`OnCloseQuery()`来处理事件。但是，两者都没有告诉我导致事件的原因。是否有另一种方法可以知道实际导致关闭事件的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:16:13.673

您可以使您的主窗体 lsiten 到`WM_SYSCOMMAND`消息。如果您收到这条命令类型为 的消息`SC_CLOSE`，那么您就知道用户已经单击了关闭按钮、按下了 Alt+F4 或从系统菜单中选择了“关闭”。然后你可以做任何你喜欢的事情（而不是让默认操作关闭表单）。

例如，您可以再次显示登录对话框。

这不会影响关闭主窗体/应用程序的其他方式，因此您仍然可以从任务管理器中的（第一个选项卡）关闭应用程序。

[以前，这个 Q 被标记为 Delphi。因此，我的答案的第一个版本包含了这个想法的 Delphi 实现。]

# python - 将复合名词与基本名词分开第 2 部分

> ID：15619441
> 
> 赞同：1
> 
> 时间：2013-03-25T16:05:19.237
> 
> 标签：python

好吧，我之前问过一个问题，我得到了我想要的答案。但是我现在有更多问题。

我有一个这样的列表：

```
name = ['road', 'roadwork', 'pill', 'pillbox', 'pillow', 'ball',
'football', 'basketball', 'work', 'box', 'foot', 'basket'] 
```

下面的代码将带有复合名词的单词与基础单词分开：

```
for candidate in name:
    for word in name:
        if word != candidate and word in candidate:
            break      
        else:              
            print candidate 
```

但是我意识到代码过于严格，因为它还会从列表中删除“枕头”。

是否有可以生成以下结果的代码：

```
name = ['road', 'pill', 'pillow', 'ball', 'work', 'box', 'foot', 'basket'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:52:06.137

对于您的平均单词，确定它是否是复合词的最简单方法是将其切成两半，看看两半是否都是单词。您必须使用不同的截断点重复测试，因此运行时间与单词的长度成正比。[对于任何英文单词，除了189,000 个字符长的化学名称](http://en.wikipedia.org/wiki/Titin#Linguistic_significance)之外，它应该相当快。

```
words = ['road', 'roadwork', 'pill', 'pillbox', 'pillow', 'ball', 'football', 'basketball', 'work', 'box', 'foot', 'basket']

wordSet = set(words)

def isWord(w):
    return w in wordSet

def isCompoundWord(word):
    for idx in range(1, len(word)):
        left = word[:idx]
        right = word[idx:]
        if isWord(left) and isWord(right):
            return True
    return False

nonCompoundWords = [word for word in words if not isCompoundWord(word)]
print nonCompoundWords 
```

输出：

```
['road', 'pill', 'pillow', 'ball', 'work', 'box', 'foot', 'basket'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:10:15.230

您将需要找出减去匹配项后剩下的单词是否是另一个单词。会有一些情况，我想词源不匹配的地方。例如，我正在考虑包含另一个单词加上“is”的单词，其中“is”没有被用作它的含义。

编辑：例如：

```
words = ['book','store','bookstore','booking']
li = []
for word in words:
    for test in words:
        if test in word:
            temp = word[len(test):]
            if temp in words and word not in li:
                li.append(word) 

for x in li:
    words.remove(x)
print words 
```

# c# - 使用 WCF Web 服务发送 1 个具有 100 万个整数的数组等于大超时？

> ID：15619443
> 
> 赞同：3
> 
> 时间：2013-03-25T16:05:25.813
> 
> 标签：c#, wcf, web-services, soap

我创建了一个与我的应用程序 c# 相关的 webService。

**所有方法都可以完美运行**。然而，一个函数有问题“ **TimeOut** ”。此方法应返回一个整数数组，其中包含大约 [1,000,000] **（100 万）个整数。** 我正确地获得了数据，但在调用我的方法后大约**4-5 分钟！**100 万个整数的表等待大约 5 分钟是否正常？我发现我的应用程序可能需要太长时间和烦人。您知道发送大数据的解决方案或更好的方法吗？

*   其他压缩方法？
*   其他响应格式（xml、数组..）？

* * *

这是我在服务器端的配置文件：

**网页配置**

```
<?xml version="1.0"?>
<configuration>

  <system.web>
      <customErrors mode="Off"/>
      <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>

    <diagnostics performanceCounters="Default" />
    <bindings>
      <basicHttpBinding>
        <binding name="Elevation_ServiceSoap" closeTimeout="00:02:00" messageEncoding="Mtom"
          openTimeout="00:02:00" receiveTimeout="00:02:00" sendTimeout="00:02:00"
          allowCookies="true" maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
          maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
        <binding name="BasicHttpBinding_IGeocodeService" allowCookies="true"
          maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
        <binding name="BasicHttpBinding_IImageryService" allowCookies="true"
          maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        </binding>
      </basicHttpBinding>
    </bindings>

    <client>
      <endpoint address="http://gisdata.usgs.gov/XMLWebServices2/Elevation_Service.asmx"
        binding="basicHttpBinding" bindingConfiguration="Elevation_ServiceSoap"
        contract="ElevationService.Elevation_ServiceSoap" name="Elevation_ServiceSoap" />
      <endpoint address="http://dev.virtualearth.net/webservices/v1/geocodeservice/GeocodeService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IGeocodeService"
        contract="GeocodeService.IGeocodeService" name="BasicHttpBinding_IGeocodeService" />
      <endpoint address="http://dev.virtualearth.net/webservices/v1/imageryservice/imageryservice.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IImageryService"
        contract="ImageryService.IImageryService" name="BasicHttpBinding_IImageryService" />
    </client>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment - binaryHttp -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <dataContractSerializer maxItemsInObjectGraph="10000000"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

这是我在客户端的配置文件：

**应用程序配置**

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" closeTimeout="00:02:00"
                    openTimeout="00:02:00" receiveTimeout="00:02:00" sendTimeout="00:02:00"
                    allowCookies="true" maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
                        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <behaviors >
            <serviceBehaviors>
                <behavior name="debug">
                    <serviceDebug includeExceptionDetailInFaults="true" />
                    <dataContractSerializer maxItemsInObjectGraph="10000000"/>
                </behavior>
            </serviceBehaviors>
        </behaviors>

        <client>
            <endpoint address="http://blalbloslblalbla/WebServiceArcadia_World_deploy/Service1.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService1"
                contract="WebServiceArcadia_World.IService1" name="BasicHttpBinding_IService1" />
        </client>
        <services>
            <service name="WebServiceArcadia_World_deploy.IService1">

            </service>
        </services>
    </system.serviceModel>
    <system.web>
        <httpRuntime executionTimeout="90" maxRequestLength="1048576" useFullyQualifiedRedirectUrl="false" minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="100"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:13:12.333

最简单的解决方案是对结果进行分页：设置 WCF 服务可以返回的整数限制（例如 2000），并调用它直到响应包含 0 数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:13:23.487

如果您的服务和客户端在同一台电脑上运行，请尝试 net.pipe 绑定，如果不是 - 请尝试 net.tcp 绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:11:08.207

我认为您应该尝试对结果进行分页，以便为每个请求带来更少的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:09:02.667

下午好。最后，正确的解决方案是更改编码模式！实际上默认 [WCF] 发送响应格式“xml”全文。这是非常沉重的！设计了一个整数数组。对于每个索引/值 [WCF] 标签都会添加格式中不必要的文本：示例。

**XML**

```
<!-- Too heavy with text / tag useless for the customer -->
<xmlns blabalala .........  />
<item>11</item>
<item>2</item>
<item>41</item>
..... 
```

**简单的二进制格式/或 Json**更轻等...：

```
11,2,41,2,6,7,34,8,43,12,76, ..... 
```

无论如何，我终于改变了传输二进制的方法！在选择编码方法和发送流媒体或其他方面对我有很大帮助的页面！

微软在此处的文章 ->[大数据和流式处理 - WCF](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

不时变化！~3min - ~3min 30sec - ~4min ... 不过已经好一点了。我认为不幸的是，没有其他方法可以使用 [WCF] 更快地做到这一点，否则使用“WebSocket”将是最好的解决方案。对于我的应用程序，我挂起使用 [wcf] .. 我认为我的方法添加了 webService 访问模式“异步”以允许在我下载期间添加一个 progressBar。欢迎其他想法;-)

# symfony - symfony 2 web forlder 中的错误 404

> ID：15619445
> 
> 赞同：1
> 
> 时间：2013-03-25T16:05:29.227
> 
> 标签：symfony, http-status-code-404, assets

我想在里面添加一个变量的样式表

```
{% stylesheets combine=true
    '@MyBundle/Resources/public/css/*'
    '@MyBundle/Resources/public/XXX/css/*'
    '@CramifCramifKitBundle/Resources/public/jquery/css/' ~ jquery_theme ~ '/jquery-ui-1.1.10.custom.min.css'
    filter='cssembed'
%}
    <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
{% endstylesheets %} 
```

但不可能将变量放在 {% stylesheets %} 块中。

所以我决定这样做：

```
{% stylesheets combine=true
    '@CramifCramifKitBundle/Resources/public/css/*'
    '@CramifCramifKitBundle/Resources/public/JQMenu/css/*'
    filter='cssembed'
%}
    <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
{% endstylesheets %}
    <link type="text/css" rel="stylesheet" href="{{ asset('bundles/mybundle/jquery/css/' ~ jquery_theme ~ '/jquery-ui-1.1.10.custom.min.css') }}" /> 
```

当然我运行了命令行： assets:install

资源在 web/bundles/mybundle 文件夹下，没问题

问题是服务器返回 404 错误（路径是正确的）。不仅如此，当我在浏览器中输入 url 甚至到 web 下的 bundles 文件夹时，同样的错误 404

也许您可以告诉我另一种使用动态路径加载 css 的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:42:48.347

这是 Assetic 中的一个已知问题：

尝试 在你的块中`@BundleName/Resources/public/`替换`bundles/names/{css, js, images or whatever}/*``{% stylesheets %}`

更多信息在这里：[https ://github.com/kriswallsmith/assetic/issues/53#issuecomment-2523420](https://github.com/kriswallsmith/assetic/issues/53#issuecomment-2523420)

# java - PersistenceManager.getObjectById 与祖先键

> ID：15619451
> 
> 赞同：1
> 
> 时间：2013-03-25T16:05:53.607
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo, datanucleus

我正在为数据存储区使用 JDO 创建一个 Java GAE 应用程序。

我有这两个类用户和文件夹。

```
@PersistenceCapable
public class User {    
  @PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private Key key;
  @Persistent
  private Folder rootFolder;    
  //getters and setters...
}

@PersistenceCapable
public class Folder {   
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private Key key;
  @Persistent
  private List<Folder> subfolders;    
  //getters and setters...
} 
```

我想检索一个给定**ID (Long)**的文件夹，所以我尝试这样做：

```
Key key = KeyFactory.createKey(Folder.class.getSimpleName(), 371);
folder = this.pm.getObjectById(Folder.class, key); 
```

但这不起作用。它抛出这个异常：

```
org.datanucleus.exceptions.NucleusObjectNotFoundException: 
Could not retrieve entity of kind Folder with key Folder(371) 
```

我认为这是因为文件夹的**密钥**也包含其祖先的密钥，但我的问题是我无法知道给定其 ID 的文件夹的所有**祖先路径**。

我所知道的是路径中的第一个祖先，即拥有根文件夹的用户。我发现有一种`Query.setAncestor(Key)`方法可能适合这里，但它只适用于查询，而不适用于“密钥查找”......

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:34:37.973

我不熟悉 Java 方面的事情，但数据存储在 Java/Python 上基本相同。

一旦你开始使用祖先，ids/names 就不再是实体的唯一标识符。唯一标识符是 id 加上整个祖先路径的组合。在不同的祖先下可能有多个具有相同 id 的实体。如果没有整个祖先路径，您就没有唯一键。

您可以做的最好的事情是查询与该 id 匹配的实体，然后在返回的集合中找出您想要的实体。您可以在 Query 之后再次执行 getObjectById 以获得一致的版本，但这对新实体并没有真正的帮助。

您可能想重新审视一些事情，例如在这种情况下您是否真的需要祖先。如果这样做，则需要设计一些位置来存储文件夹的整个祖先路径，以便在执行 getObjectById 时可以参考它。或者，如果您计划文件夹名称是唯一的，请使用名称而不是 id，以便更容易查找。等等

# php - 使用 JSMin.php 缩小 Javascript

> ID：15619452
> 
> 赞同：3
> 
> 时间：2013-03-25T16:05:56.763
> 
> 标签：php, javascript, performance, zend-framework, minify

我在服务器端有一个带有 JSMin 缩小的网站。问题是我的服务器在实施 JSMin 后变慢了

发生这种情况是因为有一些 URL 导入了一些其他特定文件，并且这些文件被添加到缩小的文件中。

现在我想知道我是否应该始终将这些特定脚本加载到一个大的缩小文件中，或者我是否应该忘记这种方法并将脚本作为单独的文件导入。

我正在使用 Zend Framework 1.11.x 和 BundlePhu + JSMin

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:02:04.567

我在许多项目中实施的最佳解决方案是将所有 javascript 拆分为最大 200kb 的有限文件。我总是将 JS 分成两个（或很少三个）文件。第一个是库（jquery、zepto、swfobject、bootup...）和“用户代码”（我自己的 $().clicks...）。

`.htaccess`我的文件夹中有一个`/js`将所有内容重写`scripts.js?version=45445`为`compiler.php`. 然后编译器脚本验证版本号，检查缓存的编译脚本并返回它。如果未找到，则即时编译，放入缓存并返回。这样，js 每小时都会编译一次，并且总是被缩小。

我很高兴您确实关心通过压缩节省的 1kb。

这是一个示例代码：

```
#.htaccess
RewriteEngine on
RewriteRule ^scripts_(\d+).js(.*)$ __compress_js.php?_v=$1 [L] 
```

然后像这样，在 php

```
<?php
// __compress_js.php
ob_start();
include 'config.php';
$cache = FileCache::getInstance();
$cache->setPath(CACHE_PATH);

$cache_key = '_compressed_' . VERSION . '.js';

if ( ! $cache->check($cache_key, 3600)){
    $js = JSMin... // array of files
    $cache->write($cache_key, $js);
}
Header::js();
echo $cache->read($cache_key, 3600); 
```

上述解决方案只会减慢第一次命中。其他所有人都获得了缓存的 javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:54:08.947

如果将所有脚本压缩到一个文件中，客户端性能会更好。浏览器必须做的最慢的事情之一就是建立一个新的 http 连接来下载一个新文件。通过将所有 JavaScript 放入一个缩小文件中，与拥有一堆单独的缩小脚本相比，您可以显着提高性能。

另一方面，进行额外的处理会损害您的服务器性能。是否要以服务器性能换取客户端性能取决于您。但请记住，有研究表明，[只要 100 毫秒的客户端减速就会影响您网站的转化率](http://alistapart.com/article/improving-ux-through-front-end-performance)。

# javascript - Javascript匿名函数似乎无法在Firefox上运行jQuery代码或console.log

> ID：15619453
> 
> 赞同：1
> 
> 时间：2013-03-25T16:06:08.020
> 
> 标签：javascript

嗨，我希望有人可以在这里帮助我:) 我正在尝试设置一个类似于 jQuery 的时尚库。这是我到目前为止所拥有的。

 `````
/*!
 * Sentinal Javascript Library V1.0.0
 * http://sentinal.com
 *
 * Depends on jQuery v1.9.1
 *
 * Copyright 2013 Sentinal Team and other contributors
 * Released under license
 * http://sentinal.com/license
 *
 * Date 25-3-2013
 */ 
(function ( window, location, $, undefined ){

// Can't do this because several apps including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
// Support: Firefox 18+
//"use strict";
var 
    // A central reference to the root Sentinal(document)
    rootSentinal,

    // Use the correct document accordingly with window argument (sandbox)
    document = window.document,
    location = window.location,

    // Map over Sentinal in case of overwrite   
    _Sentinal = window.Sentinal,

    // Map over the $S alias in case of overwrite (Namespace alias for Sentinal)
    _$S = window.$S,

    // Version of this library 
    core_version = "1.0.0",

    // Define a local copy of Sentinal
    Sentinal = function() {
        // The Sentinal object is actually just the init constructor 'enhanced'
        return new Sentinal.fn.init();
    };

    Sentinal.fn = Sentinal.prototype = {
        // The current version of Sentinal being used
        Sentinal: core_version,

        constructor: Sentinal,

        init: function (){
                $(document).ready(function(){
                $('body').append('<h1>It Works!</h1>');
                console.log( "Sentinal Version is reporting : " + $S.fn.version() );
            });
        },

        version: function (){
            return core_version;
        },

        render: function (){

        },

        send: function () {

        },

        recieve: function () {

        }

    };

    // Give the init function the jQuery prototype for later instantiation
    Sentinal.fn.init.prototype = Sentinal.fn;

    window.Sentinal = window.$S = Sentinal;

})( window, location, jQuery ); 
````  `我现在遇到的问题要么与我的图书馆不知道 $(document).ready 有关。或者是范围问题，但是其中包含一些 jQuery 的 init 方法不会将 html 附加到文档的正文中，并且 console.log 也不起作用。

任何信息都将受到极大的欢迎:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:50:40.747

匿名函数并不总是自行执行。它们由传递给它们的函数（或通过参数对象访问）命名。

您的问题是您永远不会调用 init 函数，这意味着永远不会调用 $(document).ready() 函数，因此您的匿名函数永远不会附加到文档的 ready 事件。

尝试完全删除 init 函数，并在代码末尾调用 $(document).ready() ，如下所示：

```
. . .  

window.Sentinal = window.$S = Sentinal;

$(document).ready(function(){
            $('body').append('<h1>It Works!</h1>');
            console.log( "Sentinal Version is reporting : " + $S.fn.version() );
        });

// Give the init function the jQuery prototype for later instantiation
Sentinal.fn.init.prototype = Sentinal.fn;

})( window, location, jQuery ); 
```

或者，您可以像这样立即调用您的 init 函数：

```
 init: function (){
            $(document).ready(function(){
            $('body').append('<h1>It Works!</h1>');
            console.log( "Sentinal Version is reporting : " + $S.fn.version() );
        });
    }(); // call the function immediately, 
```

此外，您不需要将 window 对象传递到您的插件中，因为它是全局对象，因此可以随时随地访问。``

# android - 文件上传在 WebView 中不起作用

> ID：15619454
> 
> 赞同：0
> 
> 时间：2013-03-25T16:06:09.530
> 
> 标签：android, file, file-upload, webview

我有一个本机 android 应用程序来显示一个网站。我是新手。我使用了一个 webview 对象来显示该站点，除了文件上传之外，一切都很完美。我尝试了我在互联网上看到的任何东西，但我找不到解决这个问题的方法。当我点击文件上传时，什么也没有发生。没有错误，没有其他操作......我只是收到一个警告，如“openFileChooser 从未在本地使用”。我阅读了有关此警告的文章，但我真的被卡住了。我正在 Galaxy S3 冰淇淋三明治上测试它。任何帮助将不胜感激。

```
WebView webView;
private ValueCallback<Uri> mUploadMessage;  
private final static int FILECHOOSER_RESULTCODE=1; 
@Override  
 protected void onActivityResult(int requestCode, int resultCode,  
                                    Intent intent) {  
  if(requestCode==FILECHOOSER_RESULTCODE)  
  {  
   if (null == mUploadMessage) return;  
            Uri result = intent == null || resultCode != RESULT_OK ? null  
                    : intent.getData();  
            mUploadMessage.onReceiveValue(result);  
            mUploadMessage = null;  

  }  
 }  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_form_content_view);
    // Show the Up button in the action bar.
    setupActionBar();

    Intent intent = getIntent();
    final String message = intent.getStringExtra(ListOfForms.EXTRA_MESSAGE);
    WebViewClient wvc=new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
             if (errorCode == 401) {             
                 webView.setHttpAuthUsernamePassword("http://project.mysite.com","mydomain","myuser","mypass");
             }
           }

        public void onReceivedHttpAuthRequest(WebView view,
        HttpAuthHandler handler, String host, String realm)        {
      handler.proceed("myuser", "mypass"); 
        }
    };

    WebChromeClient wcc = new WebChromeClient() {

         public void onGeolocationPermissionsShowPrompt(String origin, GeolocationPermissions.Callback callback) {
            callback.invoke(origin, true, false);
         }

         public void openFileChooser(ValueCallback<Uri> uploadMsg) {  

          mUploadMessage = uploadMsg;  
          Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
          i.addCategory(Intent.CATEGORY_OPENABLE);  
          i.setType("image/*");  
          FormContentView.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);  

         } 
    };

    webView = (WebView) findViewById(R.id.wvFormContent);

    webView.setWebChromeClient(wcc);

    webView.setWebViewClient(wvc);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setGeolocationEnabled(true);
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    webView.getSettings().setAllowFileAccess(true);
    webView.getSettings().setAllowContentAccess(true);
    webView.getSettings().setAppCacheEnabled(true);
    webView.getSettings().setDatabaseEnabled(true);
    webView.getSettings().setDomStorageEnabled(true);
    webView.loadUrl("http://project.mysite.com");

    String myVariable = "dummy";
    webView.loadUrl("javascript:document.getElementById('txtMyVariable').text = '"+myVariable+"';");

}

private void setupActionBar() {

    getActionBar().setDisplayHomeAsUpEnabled(true);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.form_content_view, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:

        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:44:47.043

我找到了解决方案，我为不同的 android 版本创建了不同的 openFileChooser 函数。我的版本是 4.1.2，我声明了我的处理函数，如：

```
public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) 
```

如果我以这种方式声明文件上传调用会命中该函数。所以我在开始的帖子中写的示例代码不适用于 Android 4.1.2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T01:51:47.567

添加多个 openFileChooser、showFileChooser 和 onShowFileChooser 方法适用于大多数 Android 版本，但对于具有破坏文件输入的 WebView 错误的 Android 4.4 KitKat（占当前 Android 设备的 29%）则失败。

我使它适用于每个Android版本的解决方法是使用Javascript在应用程序和网站之间进行通信，并检测用户何时想要上传文件，并从应用程序（在webview之外）上传它，然后更新webview当文件完成加载时，告诉网站文件在服务器中的位置。

请在此处查看我的答案，我将在此处解释我的解决方案：[https ://stackoverflow.com/a/43443981/2566593](https://stackoverflow.com/a/43443981/2566593)

# c# - 使用数组拆分方法分隔名称/数字

> ID：15619455
> 
> 赞同：0
> 
> 时间：2013-03-25T16:06:10.787
> 
> 标签：c#, arrays

我被指示编写一个程序，该程序从用户那里收集保龄球得分（整数）和名称，用空格分隔，并使用该`Split`方法将它们中的每一个排序到一个数组中。必须对输出进行格式化以找到平均分数并将其输出到控制台，并按照从低到高的顺序对分数（和名称）进行排序。

除了找到一种方法来用相应的分数对名称进行排序之外，我已经能够做任何事情。

这是我到目前为止所拥有的。为了澄清，我需要帮助为我的名称数组编写排序算法。

```
using System;

class Program
{
    //class variables
    const int MAX = 10;

    static void Main()
    {
        //declare array
        int[] score = new int[MAX];
        string[] name = new string[MAX];

        //program prologue
        Console.WriteLine("****************Bowling Project****************");
        Console.WriteLine("Please enter a name and a score for each player. For example 'John 145'.\nHit enter when you are done.");

        //for loop to get input
        for (int i=0; i<MAX; i++)
        {
            Console.Write("Enter a name and a score for player #{0}: ", (i + 1));
            string input = Console.ReadLine();
            if (input == "")
            {

                break; // if nothing is entered, it will break the loop
            }
            //split the user data into 2 arrays (integer and string)
            string[] separateInput = input.Split();
            name[i] = separateInput[0];
            score[i] = int.Parse(separateInput[1]);
        }

        Console.WriteLine("\n****************Input Complete****************");

        //calculate the average score and send to the console
        CalculateScores(score);

        Console.WriteLine("The scores for the game are:");

        //sort the scores
        BubbleSort(score);

        Console.ReadLine();
    }//End Main()
    //CalculateScores Method
    //Calculates the average score of an array of integers
    //Takes an array of integers as parameters
    //Returns void
    //Outputs the average to the console
    static void CalculateScores(int[] score)
    {
        int sum = 0;
        int average = 0;
        for (int i = 0; i < score.Length; i++)
        {
            sum += score[i];
            average = sum / score.Length;
        }
        Console.WriteLine("The average score was {0}", average);
    }//End calculateScores

    //Swap method
    //Takes 2 integers as parameters
    //Switches the value of 2 integers (a and b)
    static void Swap(ref int a, ref int b)
    {
        int temp = a;
        a = b;
        b = temp;
    }

    //BubbleSort method
    //Sorts an array of integers
    //Takes an array of integers as a parameter
    //Returns void
    //Outputs to the console
    static void BubbleSort(int[] score)
    {

        for (int j = 0; j < score.Length -1; j++)
        {
            for (int i = 0; i < score.Length - 1; i++)
            {
                if (score[i] > score[i + 1])
                {
                    Swap(ref score[i], ref score[i + 1]);
                }
            }
        }
        foreach (int a in score)
            Console.WriteLine("{0}", a);
        Console.ReadLine();
    }
}//End class Program 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:12:08.127

Assuming that `names[]` corresponds 1 to 1 with `score[]`:

Just take your `BubbleSort` method, and pass both `names[]` and `score[]` into it

Then, you whenever you do an operation on `score[]` do it on `names[]` too.

something like this

```
static void BubbleSort(int[] score, string[] names)
{

    for (int j = 0; j < score.Length -1; j++)
    {
        for (int i = 0; i < score.Length - 1; i++)
        {
            if (score[i] > score[i + 1])
            {
                Swap(ref score[i], ref score[i + 1]);
                Swap(ref names[i], ref names[i + 1]);
            }
        }
    }
    foreach (int a in score)
        Console.WriteLine("{0}", a);
    Console.ReadLine();
} 
```

you might have to make a `swap` method for strings

```
static void Swap(ref string a, ref string b)
{
    string temp = a;
    a = b;
    b = temp;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:11:11.403

您应该创建一个单独的类来存储玩家及其分数数组。

然后制作一组玩家，您可以根据他们的`name`

编辑：我已将我的答案更新为基于您的原始代码的已实施播放器类。如果这是一个大学项目，这可能会被抄袭检查员看到，所以我会小心使用它。

```
public class Player
{
     public Player(){}
     public Player(string name, int score)
     {
         m_name = name;
         m_score = score;
     }
     public Player(Player p)
     {
         m_name = p.Name;
         m_score = p.Score;
     }
     public string Name
     {
         get{return m_name;}
     }
     public int Score
     {
         get{return m_score;}
     }
     private string m_name
     private int m_score
}

Player[] players = new Player[MAX];
static void BubbleSort(Player[] players)
{

    for (int j = 0; j < players.Length -1; j++)
    {
        for (int i = 0; i < players.Length - 1; i++)
        {
            if (players[i].Score > players[i + 1].Score)
            {
                Swap(ref players[i], ref players[i + 1]);
            }
        }
    }
    foreach (Player a in players)
        Console.WriteLine("{0}", a.Score);
    Console.ReadLine();
}
   static void Swap(ref Player a, ref Player b)
    {
        Player temp = a;
        a = b;
        b = temp;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:11:32.790

无需创建两个数组，因为您失去了玩家姓名和分数之间的语义含义。但也不需要为此创建一个新类。您可以重用内置类/结构，例如 Tuple<...> 或 KeyValuePair<...>。对于订购，您可以使用 linq-extension 方法。

```
static void Main(string[] args)
{
    // just some sample players
    const string player1 = "David 100";
    const string player2 = "Jennifer 1430";
    const string player3 = "Eve 234";

    // the string-array with information about players
    var players = new[] { player1, player2, player3 };

    // initialize the array: a tuple is the name of the player and the score
    var scores = new List<Tuple<string, int>>(players.Length);

    foreach (string player in players)
    {
        // split by whitespace
        string[] info = player.Split(' ');

        // be failure tolerant: split must result in at least 2 entries and second one must be integer
        int score;
        if (info.Length <= 2 && int.TryParse(info[1], out score))
            scores.Add(new Tuple<string, int>(info[0], score));
    }

    // print average score
    Console.WriteLine("Average score for {0} players is: {1}{2}", scores.Count, scores.Select(t => t.Item2).Average(), Environment.NewLine);

    // print score of each single player (ordered from highest to lowest score)
    foreach (Tuple<string, int> score in scores.OrderByDescending(t=>t.Item2))
        Console.WriteLine("Player '{0}' => score: {1}", score.Item1, score.Item2);

    Console.WriteLine();
    Console.WriteLine("Press any key to exit.");
    Console.ReadKey();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:18:17.950

不要使用两个松散关联值的集合，而是使用一个类的单个集合：

```
public class BowlingScore {

  public string Name { get; private set; }
  public int Score { get; private set; }

  public BowlingScore(string name, int score) {
    Name = name;
    Score = score;
  }

} 
```

对集合使用列表而不是数组：

```
List<BowlingScore> scores = new List<BowlingScore>(); 
```

在您的循环中，您可以创建类的实例并添加到列表中：

```
BowlingScore item = new BowlingScore(separateInput[0], int.Parse(separateInput[1]);
scores.Add(item); 
```

通过使用列表而不是数组，它将仅包含您实际添加的项目。您当前的代码将需要另一个变量来跟踪数组中实际使用了多少项目，这样您就不会包括最后留空的项目。

现在，由于您将名称和分数作为一个单元，您可以使用与排序数组相同的方法对列表进行排序，只需比较对象的属性。当您交换整个对象时，名称将在您按分数排序时跟随分数，反之亦然。

列表中的项目可以像数组一样使用索引访问，只有列表的长度在`Count`属性中而不是`Length`.

# node.js - 如何在服务器中使用 node-postgres？

> ID：15619456
> 
> 赞同：11
> 
> 时间：2013-03-25T16:06:11.550
> 
> 标签：node.js, node-postgres

我正在编写一个使用 Postgres 数据库的 Node.js Web 服务器。我曾经像这样连接每个新请求：

```
app.get('/', function (req, res) {
  pg.connect(pgconnstring, function (err, client) {
    // ...
  });
}); 
```

但经过几次请求后，我在尝试连接时注意到 Heroku 出现“内存不足”错误。我的数据库只有 10 行，所以我不知道这是怎么发生的。我所有的数据库访问都是这种形式：

```
client.query('SELECT * FROM table', function (err, result) {
  if (err) {
    res.send(500, 'database error');
    return;
  }

  res.set('Content-Type', 'application/json');
  res.send(JSON.stringify({ data: result.rows.map(makeJSON) }));
}); 
```

假设内存错误是由于与数据库有多个持久连接，我切换到`node-postgres`在文件顶部仅连接一次的几个示例中看到的样式：

```
var client = new pg.Client(pgconnstring);
client.connect();

app.get('/', function (req, res) {
  // ...
}); 
```

但是现在，当我在连接中断后尝试执行查询时，我的请求会挂起（无限期地？）。（我通过杀死一个 Postgres 服务器并重新启动它来模拟它。）

那么我该怎么做其中之一呢？

1.  正确汇集 Postgres 连接，以便我每次都可以“重新连接”而不会耗尽内存。
2.  让全局客户端在网络故障后自动重新连接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T05:47:39.870

我假设您使用的是最新版本的 node-postgres，其中连接池得到了极大的改进。您现在必须将连接检查回池中，否则您将破坏连接：

```
app.get('/', function (req, res) {
  pg.connect(pgconnstring, function (err, client, done) {
    // do some stuff
    done();
  });
}); 
```

至于全局连接上的错误处理（#2，但我会使用池）：

```
client.on('error', function(e){
  client.connect(); // would check the error, etc in a production app
}); 
```

所有这一切的“缺失”文档都在[GitHub wiki 上](https://github.com/brianc/node-postgres/wiki)。

# php - PHP通过相对路径包含文件

> ID：15619458
> 
> 赞同：0
> 
> 时间：2013-03-25T16:06:20.470
> 
> 标签：php, path, include

此绝对路径成功包含我的文件`httpapi.inc.php`：

`require_once '/home/devel/wwwroot/nm/dev/http-api/http-api/src/httpapi.inc.php';`

调用文件是：

来电者亲属：

`/devel/phi/dev/appcenter-head/appcenter/application/nm/index.php`

来电者位置：

`/home/devel/wwwroot/phi/dev/appcenter-head/appcenter/application/nm`

现在，如何根据相对路径包含相同的文件，例如：

`/devel/nm/dev/http-api/http-api/index.php`

我必须“按原样”使用此路径，因为它是用户传递的配置选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:09:41.207

`require()`并且`include()`应该相对于配置[的包含路径](http://www.php.net/manual/en/ini.core.php#ini.include-path)和当前执行的脚本进行操作。所以，这应该工作：

```
require_once('src/httpapi.inc.php'); 
```

但是，准确地说，当前脚本的直接工作实际上被指定为默认配置中的包含路径之一。如果你搞砸了，它就不会起作用。

> 用一个 。在包含路径中允许相对包含，因为它表示当前目录。

**关于您的最新编辑**，您的路径有很大不同，因此使用完整路径或添加`/home/devel/wwwroot/nm/dev/http-api/http-api/`到您的配置和使用更简单`require_once('src/httpapi.inc.php')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:12:05.720

You might use the document root from the $_SERVER variable: [http://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)

```
require_once $_SERVER['DOCUMENT_ROOT'] . '/nm/dev/http-api/http-api/src/httpapi.inc.php'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T16:08:56.767

```
 include "src/httpapi.inc.php"; 
```

# image - 如何使用沙盒解决方案在 SharePoint 2010 中为自定义网站模板设置预览图像

> ID：15619462
> 
> 赞同：0
> 
> 时间：2013-03-25T16:06:31.283
> 
> 标签：image, sharepoint-2010, sandbox, preview

今天，我遇到了使用沙盒解决方案在 SharePoint 2010 中为自定义网站模板设置预览图像的问题。

我使用了团队站点模板并在 Elements.xml 文件的 ImageURL 中给出了图标图像。作为它的沙箱，我将图像文件存储在网站集样式库中。我的问题是如何为网站集样式库中存在的图像 URL 提供相对 URL。

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
<WebTemplate BaseConfigurationID="0" 
           BaseTemplateID="1"
           BaseTemplateName="STS"
           Subweb="FALSE"
           Name="WTTeamSite"
           Title="Team site"
           Description="Create a Team site"
           ImageUrl="/Style Library/img/site-icon.png"
           DisplayCategory="Custom" /> 
</Elements> 
```

如果我提供完整的网址，例如：`http://wsdl:3333/sites/Corporate/Styles Library/img/site-icon.png`它有效。但是，如果我给出相对 URL，例如 [../../Styles Library/img/site-icon.png] 或 [../Styles Library/img/site-icon.png] 或 [~sitecollection/Styles Library/img /site-icon.png] 或 [样式库/img/site-icon.png] 或 [/样式库/img/site-icon.png] 不起作用。如何使用相对 URL 使此预览图像工作。

注意：我不能使用 layouts 文件夹，因为它必须是沙盒解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T22:19:47.823

我认为问题在于您引用 URL 的方式。

当您有一个相对 URL 时，该引用是相对于 webapp 级别的。例如`http://wsdl:3333/`

因此，使用您提供的 URL，如果您想要一个相对 URL，您的 ImageURL 将是：

```
/sites/Corporate/Styles Library/img/site-icon.png 
```

为了验证您有一个“好”的 URL，我喜欢通过更改站点徽标并单击“单击此处进行测试”链接来运行测试。

这是您遇到沙盒解决方案的缺点的地方，其中 URL 取决于站点集合，以及具有访问“/_layouts/Images”映射文件夹的场解决方案的优点，其中 URL 不会更改。

我使用的一种可能的解决方法是将图像放在根站点上，或者有一个名为“资源”的静态网站集，或者其他东西，你可以在其中放置需要全局访问的东西，它是一个已知的 URL .

# floating-point-exceptions - MCH1206 浮点溢出情况

> ID：15619468
> 
> 赞同：1
> 
> 时间：2013-03-25T16:06:45.437
> 
> 标签：floating-point-exceptions

IBM OS400 C ILE 程序

有谁知道 MCH1206 何时在 C 程序中发布？C 程序没有定义任何错误处理。

在我的环境中，每当发生溢出时， - 例如 result = pow(a,b)

如果发生溢出，则将结果设置为 HUGE_VAL，并继续执行。在作业日志中，我可以看到此消息：
“CEESDXPD 中发生浮点溢出异常。”

但是，在另一个环境中，它会停止执行并发出此消息
“检测到浮点溢出条件。应用程序错误。MCH1206 在语句 00000038 处不受 F07RTB 监控”

是否有全局处理（例如在系统级别定义）？数学库的全局处理？

谢谢

# php - Codeigniter 2.1 - 先上传图片，然后在数据库中创建图库

> ID：15619469
> 
> 赞同：0
> 
> 时间：2013-03-25T16:06:46.800
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我需要一些建议，我该怎么做：我制作了通过 HTML5 拖放功能上传图像的脚本，它正在工作。我想创建一个系统，用户放置图像以供上传（并上传），写下画廊的名称和描述，然后单击提交，需要一个函数来创建画廊，提供 ID 并将该 ID 提供给图像并将图像传输到指定文件夹（画廊名称）。目前我不知道我该怎么做。此外，如果用户决定不创建图库，则需要删除上传的图像（我想这可以通过 cron job 完成）。

画廊数据库如下：

```
gallery
    id_gallery
    name
    description
    date_created

gallery_images
    id_image
    gallery_id
    path 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:28:51.787

您无需将文件移动到另一个文件夹。只要应用程序可以找到它们，它们住在哪里都没关系（请参阅：`path`）。

您对数据库的计划是什么？您显示了架构，但提到您不知道如何使用它？

无论如何...如果您`active`在图库表中添加了一个字段，那么您可以在提交时将其标记为活动。

```
gallery
    id_gallery int
    name text
    description text
    date_created date
    active default 0

gallery_images
    id_image int
    gallery_id int
    path text 
```

如果您在上传第一张图片时（或在某个时候）实例化一个图库，并为每张上传的图片在 gallery_images 中插入一行，您可以像这样提交：

```
function submit_gallery($id = NULL, $active = NULL)
{
    if($id AND $active === 1)
    {
        $this->db->where('id', $id);
        $this->db->update('gallery', array('active' => 1));
    }

    //could have a "cancel" button call this. or use a cron job
    elseif($id AND $active === 0)
    {

        $this->db->where('gallery_id', $id);
        $imgs = $this->db->get('gallery_images');

        foreach($imgs->result() as $img)
        {
            //delete the img files
            unlink($img->path);
        }

        $this->db->where('gallery_id', $id);
        $this->db->delete('gallery_images');

    }
} 
```

# asp.net-mvc - 如何从任何控制器调用局部视图？

> ID：15619473
> 
> 赞同：0
> 
> 时间：2013-03-25T16:06:57.117
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我正在使用 ASP.net MVC4 并查看引擎剃须刀。如何从任何控制器调用局部视图？我有这个视图：Reclamante = Claimant，Victima = Victim，Conductor = Driver 和 DRC 在每个控制器中 我需要调用局部视图“Registro de Persona”，我可以这样做吗？在代码中我有这个：查看：

```
$("#newVictima").click(function () {
    $('#dialogVictima').load('@Url.Action("raRegistroPersona", "raTabVictima", new { area = "Reclamos" })',
            function (response, status, xhr) {
                $('#dialogVictima').dialog('open');
         });
    }); 
```

控制器 (raTabVictima)

```
public ActionResult raRegistroPersona(){
    return View("_raRegistroPersona");
} 
```

我想在每个控制器中使用部分视图（“Registro de Persona”），而不是为每个控制器创建相同的部分视图，我能做到吗？

![在此处输入图像描述](../Images/c2db7a8eac7e3867a7e1c5fdee64f3eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:26:35.387

```
RedirectToAction("Action Name", "Controller Name", new { area = "Area Name" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T14:06:03.517

我想在区域控制器中显示菜单。菜单位于 MVC 结构的顶部。

```
@{Html.RenderAction("UserMenu", "MyController", new { area="" });} 
```

它对我有用。

# php - 阻止 Facebook Likebox 用户离开我的网页

> ID：15619475
> 
> 赞同：0
> 
> 时间：2013-03-25T16:07:05.000
> 
> 标签：php, javascript, jquery, facebook, facebook-likebox

我的需求如下：

*   我有一个带有 webview 组件的 iOS 手机。
*   **我使用 webview 在带有Likebox**的应用程序上显示我的 Facebook 页面提要
***   一切正常，但是当用户点击likebox中的链接时，它会离开网页并被重定向到facebook，这是正常的**`BUT I WOULD LIKE TO DISABLE THAT FEATURE`****

 **任何身体都可以帮忙吗？

我可以使用以下方法完成任何工作：PHP、jQuery

### 理想情况下，我希望保持按钮正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:45:13.550

您可以使用 jquery 来拦截对该 div 中任何链接的点击，然后让它们返回 false，对吗？

```
$('#likebox a').click(function() { return false; }); 
```

也许？**

# python - Django 完整性错误——用户的多个外键

> ID：15619476
> 
> 赞同：0
> 
> 时间：2013-03-25T16:07:07.533
> 
> 标签：python, django

我正在尝试设计一个带有“所有者”列和“客户”列的基本 CRM。因为客户端只能有一个所有者，所以它们都与 User 表具有一对一的关系。“所有者”列是返回用户表的简单外键。这是模型的样子：

```
class CRM (models.Model):     
    client = models.OneToOneField(User, related_name='client')     
    owner = models.ForeignKey(User, related_name='owner') 
```

但是，当我运行代码向所有者添加多个客户端时，Django 抱怨：完整性错误，列 owner_id 不是唯一的。

如果我让所有者独一无二，那么没有所有者可以拥有多个客户。我目前正在使用 Django Admin 进行添加。如何解决这个问题？谢谢！

# machine-learning - 从一组向量中学习表示

> ID：15619480
> 
> 赞同：1
> 
> 时间：2013-03-25T16:07:11.803
> 
> 标签：machine-learning, nlp, unsupervised-learning

我目前正在处理以下问题：我有一组特征向量（实值）描述一个公共实体（如对象或事件）的不同实例。使用这些向量，我想学习该实体的通用表示（向量）（无论是在相同的向量空间中还是在简化的向量空间中）。

最直接的解决方案是使用算术平均值。但是，我想知道您是否也可以提出其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:21:13.480

目前尚不完全清楚“通用表示”的要求是什么，但您可以查看[Vector quantization](http://en.wikipedia.org/wiki/Vector_quantization)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:54:08.167

您还应该查看 Principal Component Analysis (just google) 和[Sparse Dictionary Learning](http://spams-devel.gforge.inria.fr/)。

# javascript - JS：如何在 for 循环中延迟或设置间隔？

> ID：15619482
> 
> 赞同：2
> 
> 时间：2013-03-25T16:07:18.807
> 
> 标签：javascript, jquery, google-maps-api-3, for-loop, delay

我的项目调用有速度限制的谷歌地图 API。所以我的 for 循环必须放慢速度。

我有以下**for循环JS代码**：

```
// Iterate Data and create markers
for (var i in Data) {
    address = Data[i].address;
    tag = Data[i].tag
    placeAddressOnMap(address, tag);
    i = i + 1 ;
} 
```

我应该如何处理以减慢现有的 for 循环？

* * *

我尝试了以下不起作用的**JS 代码：**

```
// Iterate Data and create markers
for (var i in Data) {
    address = Data[i].address;
    tag = Data[i].tag
    placeAddressOnMap(address, tag);
    i = i + 1 ;
    setTimeout(function () { i = i }, 2000); // failing delay using setTimeout(function () { }, 2000);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:10:21.433

我相信您想设置一个时间间隔，我没有您的完整代码，但其中包含以下内容：

```
var timesRun = -1;
var interval = setInterval(function(){
    timesRun += 1;
    if(timesRun == Data.length){
        clearInterval(interval);
    }
    address = Data[i].address;
    tag = Data[i].tag
    placeAddressOnMap(address, tag);
}, 2000); 
```

重要的小演示： [**演示**](http://jsfiddle.net/TSW6t/1/)

您的代码不起作用的原因是因为 for 循环继续进行。因为 setTimeout 是异步的。假设您的 for 循环迭代需要 1 毫秒（只是一个示例）。setTimeout 中的代码将在 0、2001、2002、2003、2004 毫秒等时触发。而不是 0、2000、4000 等。

# php - MySQL 不会使用 URL 变量更新

> ID：15619487
> 
> 赞同：0
> 
> 时间：2013-03-25T16:07:31.097
> 
> 标签：php, mysql

我无法让我的代码正常工作。如果我将它输入 phpMyAdmin 它可以工作，但是当我在代码中尝试它时，它不会更新数据库。

```
<?php
$con = mysql_connect("SERVER","USER","PASSWORD");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("DATABASE", $con);

$sp=mysql_real_escape_string($_GET['file']);

$query = "UPDATE TDB SET WEIGHT=100000 WHERE PATH='$sp'"; 

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:22:24.097

试试这个代码片段，看看你是怎么做的。

```
<?php
$con = mysql_connect("SERVER","USER","PASSWORD");
if (!$con) {
  die('Could not connect: ' . mysql_error());
} else {
    mysql_select_db("DATABASE", $con);
    $sp=mysql_real_escape_string($_GET['file']);
    $query = "UPDATE TDB SET WEIGHT=100000 WHERE PATH='$sp'"; 
    $result = mysql_query($query);
    mysql_close($con);
}
?> 
```

我建议这样做，因为 PHP 不再支持 mysql。

```
<?php
$mysqli = new mysqli("localhost", "user", "password", "database");

if (!$mysqli) {
  die('Could not connect: ' . $mysqli->connect_error);
} else {
    $sp = $mysqli->real_escape_string($_GET['file']);
    $query = "UPDATE TDB SET WEIGHT=100000 WHERE PATH='$sp'"; 
    $mysqli->query(query);
    $mysqli->close();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:12:35.547

```
<?php
$con = mysql_connect("SERVER","USER","PASSWORD");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("DATABASE", $con);

$sp=mysql_real_escape_string($_GET['file']);

$sql = "UPDATE TRACKDB SET WEIGHT=100000 WHERE PATH='$sp'"; 

$result = mysql_query($sql) or die(mysql_error());

mysql_close($con);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:09:03.877

您没有执行您的查询。您只是在定义一个恰好包含一些 SQL 的字符串，例如

```
$sql = "blah blah blah";
$result = mysql_query($sql) or die(mysql_error()); <--forgot this 
```

# xaml - 最后一项的 ListView 填充

> ID：15619492
> 
> 赞同：2
> 
> 时间：2013-03-25T16:07:39.917
> 
> 标签：xaml, windows-runtime, winrt-xaml

我有一个这样的`ListView`定义`Grid`：

```
<Border BorderThickness="1" Grid.Row="1" VerticalAlignment="Top" Margin="0,0,0,50" BorderBrush="Gray">
  <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Grid Grid.Row="0">
        <TextBlock Text="Test" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
    <ListView 
        Grid.Row="1"
        ItemsSource="{Binding MyItems}"
        Padding="40,40,40,40"/>
  </Grid> 
```

我的问题是我希望 listview 的最后一项距离 listView 的底部 40 像素，但我的代码不起作用，顶部填充没问题，但底部没有效果。这就像在列表视图的开头和结尾添加一个空白项目，但这是一件愚蠢的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:08:07.667

您可以将 ListView 放在另一个 Scrollviewer 中并填充 ListView 本身。

# java - .get() 读取的休眠多对多自映射

> ID：15619494
> 
> 赞同：0
> 
> 时间：2013-03-25T16:07:51.380
> 
> 标签：java, hibernate

我正在使用休眠进行 DBS 映射。我有文档类：

```
@Entity
@Table(name = "DOKU")
public class Dokument implements Serializable {

@Id
@GeneratedValue
@Column(name = "id")
private int id;

@Column
private String val;

@ManyToMany(cascade = CascadeType.ALL)
@JoinTable(name = "RELATIVES",
        joinColumns = {@JoinColumn(name = "DOK1_ID")},
        inverseJoinColumns = {@JoinColumn(name = "DOK2_ID")})
private Set<Dokument> iPoint = new HashSet<>();

@ManyToMany(mappedBy = "iPoint", cascade = CascadeType.ALL)
private Set<Dokument> pointMe = new HashSet<>(); 
```

和测试代码：

```
 Session session = HibernateUtil.getSessionFactory().openSession();
    session.beginTransaction();

    Dokument dok = new Dokument("master");

    Dokument d1 = new Dokument("slave");
    dok.getiPoint().add(d1);

    session.save(dok);
    session.save(d1);

    session.getTransaction().commit();
    session.close(); 
```

它将所有内容正确保存在 DBS 中。当我试图通过以下方式读回它时：

```
Session session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();

Dokument read = (Dokument) session.get(Dokument.class, 31);

System.out.println(read.getiPoint());

session.close(); 
```

我得到由 getiPoint 引起的堆栈溢出异常。session.get 自己工作。你看到代码中有任何错误吗？谢谢你。

//编辑我让Netbeans生成那些方法，还是同样的错误

```
@Override
public int hashCode() {
    int hash = 5;
    hash = 97 * hash + this.id;
    return hash;
}

@Override
public boolean equals(Object obj) {
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    final Dokument other = (Dokument) obj;
    if (this.id != other.id) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:29:22.253

给您带来问题的代码行`System.out.println(read.getiPoint());`实际上是两个操作。将它们拆分为：

```
Set<Dokument> mySet = read.getiPoint();
System.out.println(mySet); 
```

并重新运行，你会看到你`StackOverflowException`的来自第二行。检查`Dokument.toString()`方法，它导致您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:49:30.003

对不起各位，我的大错。我的 Document.toString 是：

```
@Override
public String toString() {
    return "Dokument{" + "id=" + id + ", val=" + val + ", iPoint=" + iPoint + ", pointMe=" + pointMe + '}';
} 
```

所以它保持 iPointing 和 iPointing。对不起我的疏忽。

# php - JSON数据在数组中的原因？

> ID：15619499
> 
> 赞同：0
> 
> 时间：2013-03-25T16:08:02.367
> 
> 标签：php, jquery, json

这可能是一个愚蠢的问题，但由于我已经很久没有编程了，我想知道为什么我应该在数组中发送 Json 数据？我问的原因是我正在使用 Ajax 回调构建一个简单的 jQuery 表单（是的，没有必要将 json 用于简单的事情，但我想学习如何使用它）。该脚本将 id 号发送到 php 函数，根据 id 号可以返回一个或多个表单。所以问题是我为什么要以数组的形式发送 JSON 数据？

不知道这是否重要，但这是正在重新调整的数据的结构。

```
foreach ($list as $row) {
  $out[] = ('<tr><td><a href="'.$row['link_form'].'">'.$row['name_form'].'</a></td>   <td>'.$row['date_added'].'</td></tr>'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:22:22.937

您用于返回数据的数据结构在理论上应该与数据本身的数据结构相匹配。因此，如果要返回具有相似属性的事物列表，则应使用数组；如果您要返回的内容更适合描述为键值对，请返回一个对象。

使用 JSON，您可以嵌套这些。因此，例如，您可以拥有一个对象数组，这是一个非常常见的用例。假设您要返回一个 DB 表：每条记录都可以是一个数组元素，它是一个描述字段的对象。

```
[
  {"id": 1, "name": "Joe Bloggs"},
  {"id": 2, "name": "Jane Doe"},
  {"id": 3, "name": "I.P. Freely"}
] 
```

鉴于在这种情况下您的对象是同质的——具有相同的键值结构——您*可以*返回一个数组数组，而不是。或者，您可以使事情变得非常通用并返回一个描述表格的对象，然后返回一个数组数组，这些数组可以读出内容：

```
{
  "fields": [
              {"name": "id",   "type": "number"},
              {"name": "name", "type": "string"}
            ],
  "data":   [
              [1, "Joe Bloggs"],
              [2, "Jane Doe"],
              [3, "I.P. Freely"]
            ]
} 
```

这完全取决于您和数据的最终用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:20:57.843

由于几个原因，在 AJAX 中 JSON 优于 XML。我希望这会有所帮助。

[JSON 和 XML 比较](https://stackoverflow.com/questions/4862310/json-and-xml-comparison)

# php - 在 Magento 中添加属性以关联可配置产品的产品

> ID：15619503
> 
> 赞同：3
> 
> 时间：2013-03-25T16:08:15.163
> 
> 标签：php, magento-1.7

我想将自定义属性的值设置为可配置产品的关联产品。

1.  我创建了一个属性和属性集
2.  当我创建一个可配置产品时，我会选择稍后选择每个值所需的属性集。

    ```
    $product = Mage::getModel('catalog/product');
    $stockData = $product->getStockData();
    $stockData['qty'] = $qty;
    $stockData['is_in_stock'] = 1;
    $stockData['manage_stock'] = 1;
    $stockData['use_config_manage_stock'] = 1;
    $today = "'".date("Y-m-d")."'";
    $product->setStoreId(0)
        ->setTypeId("configurable")  
        ->setAttributeSetId($attribute_set_id)
        ->setName($es_name)
        ->setDescription($es_description)
        ->setShortDescription($es_short_description)
        ->setSku($sku)
        ->setWeight(1.0)
        ->setStatus(2)  
        ->setVisibility(4) 
        ->setPrice($price)
        ->setTaxClassId($tax_class)  // Impuestos
        ->setStockData($stockData)   // Stock
        ->setCategoryIds($categories) 
        ->setWebsiteIDs(array(1))  // Website total
        ->setData('news_from_date', $today)
            ->save(); 
    ```

3.  我必须创建与从属性集中选择的属性一样多的关联产品。例如：带有选项 40、41、42 的 custom_attribute。所以我必须用我的 custom_attribute 和 value 创建一个简单的产品，但不知道该怎么做。例如：创建一个与我的 custom_attribute 40 和另一个值为 42 的可配置产品相​​同的简单产品。知道一个或多个属性可以关联到相同的属性集，并且必须动态创建所有内容。

是否有诸如 $product->setAttribute("custom_attribute",$value) 之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:15:09.113

是的，你已经在使用它了。Magento 使用魔术方法 - 将属性 custom_attribute 的值设置为 $value，执行以下操作：

```
$product->setCustomAttribute($value) 
```

要将 some_other_thing 的值设置为 $value，请执行以下操作：

```
$product->setSomeOtherThing($value) 
```

看到图案了吗？

或者，您可以直接使用 setData 方法：

```
$product->setData('custom_attribute', $value) 
```

# java - mergeSort - Java 中的破坏性与非破坏性

> ID：15619506
> 
> 赞同：0
> 
> 时间：2013-03-25T16:08:31.197
> 
> 标签：java, arrays, oop, recursion, mergesort

谁能向我解释这个实现mergeSort算法的*非破坏性*函数和这个函数/mergeSort算法的*破坏性实现之间的区别？*

```
public class MergeSort{

    public static int[] merge(int[] A, int[] B){
        System.out.println("merge: |A|="+A.length+", |B|="+B.length);
        for(int i=0; i<A.length; i+=1) System.out.print(A[i] + ",");
        System.out.println();
        for(int i=0; i<B.length; i+=1) System.out.print(B[i] + ",");
        System.out.println();

        int [] C = new int[ A.length + B.length ];
        int a = 0, b = 0;
        for( int c = 0; c < C.length; c+=1 ){
            if (a == A.length ){
                C[c] = B[b];
                b+=1;
            }else if (b == B.length ){
                C[c] = A[a];
                a+=1;
            }else{
                if (A[a] < B[b]){
                    C[c] = A[a];
                    a+=1;
                }else{
                    C[c] = B[b];
                    b+=1;
                }
            }
        }
        for(int i=0;i<C.length;i+=1) System.out.print(C[i] + ",");
        System.out.println();
        return C;
    }

    public static int[] mergeSort(int[] M){
        System.out.println("mergesort : |M|="+M.length);
        for(int i=0; i<M.length; i+=1) System.out.print(M[i] + ",");
        System.out.println();

        if (M.length ==1){
            int [] C = new int[1]; 
            C[0] = M[0];
            return C;
        }

        int[] A = new int[ M.length/2 ];
        System.arraycopy(M,0,A,0,M.length/2);
        int[] AA = mergeSort(A);
        int[] B = new int[ M.length - M.length/2 ];
        System.arraycopy(M,M.length/2,B, 0, M.length - M.length/2);
        int[] BB = mergeSort(B);

        return merge(AA,BB); 

    }// mergeSort

} 
```

如上所述，我知道此函数返回输入数组的“副本”（非解构）。如何将其更改为破坏性功能，换句话说，输入数组本身会发生突变而不是生成副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:52:38.177

您可以很容易地覆盖原始数组中的值，假设您的 mergeSort() 方法完成了它应该做的事情，这样的事情可以正常工作。

```
public void overwritingMergeSort(int[] M) {
    int[] sorted = mergeSort(M);
    for(int i = 0; i < sorted.length; i++) {
        M[i] = sorted[i];
    }
}

int[] arr = new int[]{2,5,1,4,3};
System.out.println(Arrays.toString(arr));
overwritingMergeSort(arr);
System.out.println(Arrays.toString(arr)); 
```

这打印：

```
[2,5,1,4,3]
[1,2,3,4,5] 
```

# sql - 如何在 SQL 中聚合 7 天

> ID：15619507
> 
> 赞同：2
> 
> 时间：2013-03-25T16:08:36.860
> 
> 标签：sql, sql-server, sql-server-2008

我试图在 SQL Server 中汇总 FY13 的 7 天数据（从 2012 年 10 月 1 日开始，到 2013 年 9 月 30 日结束），但到目前为止还没有运气。有人可以看看。下面是我的示例数据。

```
DATE       BREAD    MILK    
10/1/12    1        3
10/2/12    2        4
10/3/12    2        3
10/4/12    0        4
10/5/12    4        0
10/6/12    2        1
10/7/12    1        3
10/8/12    2        4
10/9/12    2        3
10/10/12   0        4
10/11/12   4        0
10/12/12   2        1
10/13/12   2        1 
```

所以，我想要的输出是这样的：

```
DATE       BREAD    MILK
10/1/12    1        3
10/2/12    2        4
10/3/12    2        3
10/4/12    0        4
10/5/12    4        0
10/6/12    2        1
Total      11       15
10/7/12    1        3
10/8/12    2        4
10/9/12    2        3
10/10/12   0        4
10/11/12   4        0
10/12/12   2        1
10/13/12   2        1
Total      13       16

--------through 9/30/2013 
```

请注意，由于 FY13 于 2012 年 10 月 1 日开始并于 2012 年 9 月 30 日结束，FY13 的第一周是 6 天而不是 7 天。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:42:57.130

您可以为日期值添加一个新的计算列，以按周对它们进行分组并对其他列求和，如下所示：

```
SELECT DATEPART(ww, DATEADD(d,-2,[DATE])) AS WEEK_NO, 
       SUM(Bread) AS Bread_Total, SUM(Milk) as Milk_Total
FROM YOUR_TABLE
GROUP BY DATEPART(ww, DATEADD(d,-2,[DATE])) 
```

**注意**：我使用`DATEADD`并减去 2 天，根据您的日期将一周的第一天设置为星期一。如果需要，您可以修改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T17:06:32.263

将选项与[GROUP BY ROLLUP](http://msdn.microsoft.com/en-us/library/bb522495%28v=sql.105%29.aspx)运算符一起使用

```
SELECT CASE WHEN DATE IS NULL THEN 'Total' ELSE CONVERT(nvarchar(10), DATE, 101) END AS DATE,
       SUM(BREAD) AS BREAD, SUM(MILK) AS MILK
FROM dbo.test54
GROUP BY ROLLUP(DATE),(DATENAME(week, DATE)) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c678a/5)上的演示[](http://sqlfiddle.com/#!3/c678a/5)

 **结果：

```
DATE        BREAD   MILK
10/01/2012  1       3
10/02/2012  2       4
10/03/2012  2       3
10/04/2012  0       4
10/05/2012  4       0
10/06/2012  2       1
Total       11      15
10/07/2012  1       3
10/08/2012  4       7
10/10/2012  0       4
10/11/2012  4       0
10/12/2012  2       1
10/13/2012  2       1
Total       13      16 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:44:09.583

上面的 WITH ROLLUP 建议可以提供帮助；您需要保存数据并根据需要进行转换。

您需要做的最重要的事情是正确识别您的周数。如果您还没有将它们加载到表中以便您可以识别它们，您可以即时构建它们。这是一种方法：

```
CREATE TABLE #fy (fyear int, fstart datetime, fend datetime);
CREATE TABLE #fylist(fyyear int, fydate DATETIME, fyweek int);

INSERT INTO #fy
SELECT 2012, '2011-10-01', '2012-09-30'
UNION ALL
SELECT 2013, '2012-10-01', '2013-09-30';

INSERT INTO #fylist
        ( fyyear, fydate )

SELECT fyear, DATEADD(DAY, Number, DATEADD(DAY, -1, fy.fstart)) AS fydate
FROM Common.NUMBERS
CROSS APPLY (SELECT * FROM #fy WHERE fyear = 2013) fy
WHERE fy.fend >= DATEADD(DAY, Number, DATEADD(DAY, -1, fy.fstart));

WITH weekcalc AS
(
    SELECT DISTINCT DATEPART(YEAR, fydate) yr, DATEPART(week, fydate) dt
    FROM #fylist

),
    ridcalc AS
(
    SELECT 
    ROW_NUMBER() OVER (ORDER BY yr, dt) AS rid, yr, dt
    FROM weekcalc
)   

UPDATE #fylist
SET fyweek = rid
FROM #fylist
JOIN ridcalc
    ON DATEPART(YEAR, fydate) = yr
    AND DATEPART(week, fydate) = dt;

 SELECT list.fyyear, list.fyweek, p.[date], COUNT(bread) AS Bread, COUNT(Milk) AS Milk
 FROM products p
 JOIN #fylist list 
    ON p.[date] = list.fydate
 GROUP BY list.fyyear, list.fyweek, p.[date] WITH ROLLUP; 
```

上面的`Common.Numbers`参考是一个简单的数字表，我用于这类事情（从 1 到 1M）。您也可以根据需要即时构建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:17:34.030

以下是如何完成的总体思路：

您需要为每一行创建一个派生列，以确定该记录属于哪个会计周。一般来说，您可以从 10/1 中减去该记录的日期，得到经过的天数，除以 7，然后将结果取底。

然后您可以 GROUP BY 该派生列并使用 SUM 聚合函数。

最大的问题是您开始时每周工作 6 天。您可能需要添加一些逻辑以确保星期从星期日或您使用的任何一天开始，但这应该可以帮助您开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:16:22.720

您正在寻找汇总。在这种情况下，您将需要至少多一列作为分组依据来进行汇总，最简单的方法是添加一个计算列，按日期将它们分组为周。

看一看：[使用 ROLLUP 汇总数据](http://msdn.microsoft.com/en-us/library/ms189305%28v=sql.90%29.aspx)**

# php - 解析错误：语法错误，意外的“：”

> ID：15619508
> 
> 赞同：0
> 
> 时间：2013-03-25T16:08:38.540
> 
> 标签：php, ternary-operator

为什么我收到此错误，代码在开发人员展示的现场演示中运行，并且代码相同？非常感激任何的帮助。

```
$method = $_SERVER['HTTP_X_HTTP_METHOD_OVERRIDE'] ?: $_SERVER['REQUEST_METHOD']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:48:43.893

问题不在于三元运算符缺少其他说明的参数这一事实。问题可能是服务器的 PHP 版本。

直接来自[PHP 文档](http://php.net/manual/en/language.operators.comparison.php)：

> 从 PHP 5.3 开始，可以省略三元运算符的中间部分。表达式 expr1 ?：如果 expr1 的计算结果为 TRUE，则 expr3 返回 expr1，否则返回 expr3。

它的编写方式适用于 PHP 版本等于或高于 5.3 的任何服务器。

否则它应该用它的等效表达式重写：

```
$method = $_SERVER['HTTP_X_HTTP_METHOD_OVERRIDE'] ?  $_SERVER['HTTP_X_HTTP_METHOD_OVERRIDE'] : $_SERVER['REQUEST_METHOD']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:11:10.543

改变这个

```
$method = $_SERVER['HTTP_X_HTTP_METHOD_OVERRIDE'] ?: $_SERVER['REQUEST_METHOD']; 
```

至

```
$method = $_SERVER['HTTP_X_HTTP_METHOD_OVERRIDE'] ? "" : $_SERVER['REQUEST_METHOD']; 
```

或者

```
$method = $_SERVER['HTTP_X_HTTP_METHOD_OVERRIDE'] ? NULL : $_SERVER['REQUEST_METHOD']; 
```

# python - 在 python CGI 脚本中生成带有小胡子的 html 页面

> ID：15619511
> 
> 赞同：0
> 
> 时间：2013-03-25T16:08:56.697
> 
> 标签：python, cgi, mustache

我需要将静态网站部署到允许 ssh 访问和 python 脚本（通过 CGI）的主机。到目前为止，我在 mustache 的帮助下使用了本地生成的 html 内容。到目前为止，一切都很好。现在不同的人（对命令行的能力要差得多）需要更新静态页面。所以我把所有的 .mustache 文件都塞到​​服务器上以供共享访问。

挑战：我需要编写一个小的 Python CGI 程序，该程序在启动时会运行小胡子转换以重新生成静态页面。它不需要向浏览器输出任何花哨的东西（一些“正在做，文件名，完成”就足够了）。

所以它需要：

*   从 URL 调用
*   将所有 .mustache 文件及其标头处理为 html

基本上将此 bash 脚本转换为 URL 可调用 python：

```
#!/bin/bash
# Processes mustache templates into html files
echo "Commencing conversion"
for f in *.mustache
  do
       curfile=${f/.mustache/}
   echo "Processing - $curfile"
   cat parameters.yml $f | mustache > $curfile.html
  done
echo "Finished, check the results!" 
```

我该怎么做（是的，我承认：我的 Python 技能比我的普通话差）？明确一点：我不想在阅读或使用 Python Web 框架时生成页面，只需自动生成 html

# c++ - QFile 不会打开文件

> ID：15619517
> 
> 赞同：3
> 
> 时间：2013-03-25T16:09:17.917
> 
> 标签：c++, file, qt, qfile

我有一个程序，我基本上是从 Qt 网站上偷来的，试图打开一个文件。该程序拒绝打开任何我对为什么感到困惑的东西。我找了很多文档，但什么也没找到，请您解释一下为什么它不起作用。

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QFile>
#include <QTextStream>
#include <QString>
MainWindow::MainWindow(QWidget *parent) :
    QWidget(parent)
{
    QFile file("C:/n.txt");
    if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
             return;
    QTextStream in(&file);
    QString f=in.readLine();
    lab =new QLabel("error",this);
    lab->setGeometry(100,100,100,100);
    lab->setText(f);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T05:50:23.390

在打开文件之前，您可以随时检查是否存在：

```
QFile file("myfile.txt");
if (!file.exists()) {
    // react
} 
```

如果文件存在但未打开，您可以获得错误状态和消息：

```
QString errMsg;
QFileDevice::FileError err = QFileDevice::NoError;
if (!file.open(QIODevice::ReadOnly)) {
    errMsg = file.errorString();
    err = file.error();
} 
```

并且总是：如果文件是 openend，那么记得关闭它。在您的示例中，您没有：

```
file.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:57:16.910

FileError [QFile::error](http://doc.qt.digia.com/4.7/qfile.html#error) () const 返回文件错误状态。I/O 设备状态返回错误代码。例如，如果 open() 返回 false，或者读/写操作返回 -1，则可以调用该函数来查找操作失败的原因。另请参见 unsetError()。

贴出错误代码。不应该是 QFile file("C:\n.txt"); \ 不是 / 在 Windows 中？

# highcharts - 如何让 x 轴扩展以占用更多图表宽度

> ID：15619519
> 
> 赞同：0
> 
> 时间：2013-03-25T16:09:22.697
> 
> 标签：highcharts, gwt-highcharts

从附图中可以看出，我的 x 轴类别在中间聚集在一起。如何配置 highcharts 以占用更多的 x 轴？注意：图表大小是动态的，它会根据整个浏览器大小和应用程序内的拆分面板而增长和缩小。因此，点宽的显式计算不是一种选择（我希望 highcharts 可以为我完成这项工作）。

注意：图片是垂直裁剪的。

![在此处输入图像描述](../Images/3eed7bd6e9244f9d0ccf902010243077.png)

我使用的图表选项是：

```
highchart.setAnimation(false);
Legend legend = new Legend();
legend.setEnabled(false);
highchart.setLegend(legend);

highchart.getXAxis().setCategories(result.getAxisXCategories().toArray(new String[] {}));
highchart.setType(Series.Type.COLUMN);
ColumnPlotOptions options = new ColumnPlotOptions();
options.setStacking(Stacking.NORMAL);
options.setGroupPadding(0);
options.setAnimation(true);
highchart.setColumnPlotOptions(options); 
```

换句话说，图例已关闭，列图选项设置为零组填充。

[更新：这是一个显示相同问题](http://jsfiddle.net/z4eeP/)的 JSFiddle

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:56:15.790

对于遇到相同问题的其他人，解决方案是设置 ColumnPlotOptions 的 pointRange 选项。在 JSON 中，这看起来像：

```
"plotOptions": {
        "column": {
            "stacking": "normal",
            pointRange: 1,
                "groupPadding": 0
        }
    } 
```

在 GWT-Highcharts 中，您实际上没有针对 pointRange 的特定 API。因此设置一个像这样的通用选项：

```
ColumnPlotOptions options = new ColumnPlotOptions();
options.setOption("pointRange", 1.0);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:53:39.853

您可以尝试设置 pointWidth() [http://api.highcharts.com/highcharts#plotOptions.column.pointWidth](http://api.highcharts.com/highcharts#plotOptions.column.pointWidth)

# php - 我的标记技术正确吗？

> ID：15619520
> 
> 赞同：0
> 
> 时间：2013-03-25T16:09:24.977
> 
> 标签：php, mysql, normalization, tagging

这是我的表结构 **标签表**

```
ID------ TAG_NAME
1         PHP
2         MYSQL 
```

**文章表**

```
ID----- ART_TITLE -- CATEGORY ---    TAGS    --- CREATED_ON
1       some title1     22         ["1","2"]       13258465
2       some title2     23         ["4","5"]       13258465
3       some title3     21         ["5","7"]       13258465 
```

标签值是 json 数组。我被带有标签 ID 的展示文章卡住了。谁能告诉我该怎么做或我需要使用哪种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:10:55.900

您应该有一个`article_tags`（有两列`tag_id`和`article_id`）表，它以规范化的方式将标签与文章相关联。将标签作为 JSON 数组是不可索引、不可搜索等的。

# java - 在java中调用类，使用字符串中的类名

> ID：15619521
> 
> 赞同：2
> 
> 时间：2013-03-25T16:09:26.813
> 
> 标签：java, class

有什么简单的方法可以实现这一点。

假设我有一个带有 POJO 名称的字符串数组，并且我正在尝试打印所有属性列表，有什么方法可以轻松实现这一点吗？\

```
String [] nameofClass;
for(String name:nameofClass)
name.class.getDeclaredFields(); 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T16:11:00.693

`Class.forName(name).getDeclaredFields()`在你的`for`循环内可能是你正在寻找的。

请注意，它`name`应该是类的*完整路径*，即不仅是，`TheClass`而是`the.package.to.TheClass`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:15:43.327

是的你可以。请参见下面给出的示例：

```
 String [] nameofClass = {"java.lang.Object","java.lang.Thread"};//Give complete path of the class
        try{
            for(String name : nameofClass)
            {
                Class cl = Class.forName(name);
                System.out.println(cl);
                System.out.println("\t"+java.util.Arrays.toString(cl.getDeclaredFields()));
            }
        }catch(Exception ex){System.out.println(ex);} 
```

# jquery - 如何在 CSS 中做一个类似于 .hasClass() jQuery 方法的 CSS 选择器？

> ID：15619522
> 
> 赞同：-3
> 
> 时间：2013-03-25T16:09:29.707
> 
> 标签：jquery, css

我有以下html标签：

```
<li class="menu expanded"> 
```

`li`当它具有类菜单时，我需要将单击事件绑定到标记。

我正在尝试使用这个选择器：`li[class="menu"]`，但是当它也有类时它`expanded`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:10:54.340

如果您要选择同时具有菜单和扩展类的列表项，请使用：

```
$('li.menu.expanded').click(function(){
//stuff
}) 
```

否则

```
$('li.menu').click(function(){
//stuff
}) 
```

就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T16:11:16.067

这个选择器应该可以工作

```
$('li.menu') 
```

将选择所有`li`包含类的标签`menu`，无论它是否是唯一的 css 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:12:24.610

If you want to use the raw jQuery attribute selector to look for a class you can do the following which will search for a substring in the attribute value

```
li[class*="menu"] 
```

However when searching classes in jQuery you are better off just using the class syntax

```
$('li.menu') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:14:06.947

根据“扩展”是否为现有“菜单”添加了一些功能，您可以使用以下内容：

```
$('li.menu').click(function(){
if ($(this).hasClass('expanded')) ...
 ...
}) 
```

# html - 无法在 KO Grid 中选择文本

> ID：15619523
> 
> 赞同：0
> 
> 时间：2013-03-25T16:09:38.293
> 
> 标签：html, css, knockout.js, kogrid

在 kogrid 中，我无法选择网格中的任何文本。您可以在他们的示例中看到这一点

[http://ericmbarnard.github.com/KoGrid/#/examples](http://ericmbarnard.github.com/KoGrid/#/examples)

无论如何我可以让它能够选择单元格中的文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:15:20.383

它是用**Knockoutjs 构建**的，所以有一个你需要选择的文本的 Observable，我敢肯定。

我不知道这个 KO Grid，但知道 KO 你需要做什么只是看看`ko.observable()`你需要哪一个，并为你的目的创建一个自定义函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:15:58.983

这可能是因为默认的 kogrid.css 有这个部分

```
.kgNoSelect{
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

分叉代码，并删除此定义，您应该能够选择文本。

# ruby - 获取具有雾的 Cloudfile 列表 - 堆栈级别太深

> ID：15619527
> 
> 赞同：1
> 
> 时间：2013-03-25T16:09:42.513
> 
> 标签：ruby, fog

我正在尝试使用“fog”gem (github.com/fog/fog) 获取我的 Rackspace Cloudfiles 帐户中所有文件的列表。但是，我一直遇到堆栈级别太深的错误。

```
require 'rubygems'
require 'fog'

RACKSPACE_USERNAME = 'USERNAME'
RACKSPACE_API_KEY = 'API_KEY'

connection_rackspace = Fog::Storage.new({
  :provider           => 'Rackspace',
  :rackspace_username => RACKSPACE_USERNAME,
  :rackspace_api_key  => RACKSPACE_API_KEY
})

connection_rackspace.directories.each do |directory_rackspace|
  directory_rackspace.files.each do |file_rackspace|
    puts file_rackspace.key
  end
end 
```

我认为它与那个“每个”循环有关，但不知道从这里去哪里。

# c# - C# 连接到 Oracle 数据库

> ID：15619530
> 
> 赞同：1
> 
> 时间：2013-03-25T16:09:43.877
> 
> 标签：c#, oracle, oracle11g

我一直在 Java 上做应用程序，与 MySQL 连接，但现在我正在用 Oracle 做 C#。这是我到目前为止的代码：

```
using System.Data.OracleClient;

namespace Chat
{
    class DBconnector
    {
        static private string GetConnectionString()
        {
            return "Data Source=myserver.server.com;Persist Security Info=True;" +
                "User ID=myUserID;Password=myPassword;Unicode=True";
        }
        static public void ConnectAndQuery()
        {

            string connectionString = GetConnectionString();
            using(OracleConnection conn = new OracleConnection())
            {
                conn.ConnectionString = connectionString;
                conn.Open();
                Console.WriteLine("State: " + conn.State);
                Console.WriteLine("Connction String: " + conn.ConnectionString);

                OracleCommand command = conn.CreateCommand();
                string sql = "SELECT * FROM users";
                command.CommandText = sql;

                OracleDataReader reader = command.ExecuteReader();
                while(reader.Read())
                {
                    string myField = (string)reader["MYFIELD"];
                    Console.WriteLine(myField);
                }
            }

        }

    }
} 
```

困扰我的是，我不知道要输入什么来交换连接字符串中的“myserver.server.com”、“myUserID”和“myPassword”。我想它是“localhost/”之类的，但是对于 Oracle，我在浏览器中并没有与 MySQL 相同的可视界面，因此我有点迷路了。

我遵循了本教程：[Instant Oracle using C#](http://www.codeproject.com/Articles/18692/Instant-Oracle-Using-C) ，我正在做的是将连接字符串直接包含在我的代码中，但不使用 tsanames.ora 外部文件。长话短说 -> 我不确定如何修改我自己的数据库的连接字符串，如果有任何其他错误或建议 - 请随时说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:17:11.020

我不确定你是否可以在不修改 tnsnames 的情况下做到这一点，但这并不难：

```
YOURSERVER = (DESCRIPTION = (ADDRESS = (PROTOCOL= TCP)
(Host= <your_server_hostname_or_IP>)(Port= <port>))(CONNECT_DATA = (SID = <DB_instance name>)) ) 
```

如果您对如何填写这些内容有疑问，您应该咨询离您最近的 DBA。

然后只需将 YOURSERVER 添加到：

```
return "Data Source=YOURSERVER; ... 
```

用户名和密码与您要连接的架构相关。

# c# - 下拉列表未在网格视图中更新

> ID：15619533
> 
> 赞同：0
> 
> 时间：2013-03-25T16:10:06.137
> 
> 标签：c#, asp.net, gridview, drop-down-menu

我有一个填充了从数据库中的表中提取的元素的网格视图。每行包含 2 个文本框和 1 个下拉列表。加载页面时会填充下拉列表。

我的问题是：当我编辑行时，从下拉列表中选择另一个项目，然后单击更新按钮，没有任何变化。下拉列表仍然返回其默认值，修改后的值都不会在数据库中更新（删除不起作用等）。我无法理解原因。请帮我。

我的网格视图：

```
<asp:GridView ID="MyGridView" runat="server" AutoGenerateColumns="false"    OnRowDataBound="GridView_OnRowDataBound" OnRowUpdating="GridView_OnRowUpdating" 
 DataKeyNames="id" DataSourceID="DataSource" ><AlternatingRowStyle BackColor="White" />
<Columns>
    <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" ShowCancelButton="True" />

 <asp:TemplateField HeaderText="currentCity" SortExpression="currentCity" ItemStyle-  HorizontalAlign="Center" Visible="false">
        <ItemTemplate>
            <asp:Label runat="server" ID="lblcurrentCity" Text='<%#   Bind("CodiceContrattoRisorsa") %>' Visible="false" ></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="id" SortExpression="id" ItemStyle-HorizontalAlign="Center" >
        <ItemTemplate>
            <asp:TextBox runat="server" ID="txtId" Text='<%# Bind("id") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

 <asp:TemplateField HeaderText="name" SortExpression="name" ItemStyle-  HorizontalAlign="Center" >
        <ItemTemplate>
            <asp:TextBox runat="server" ID="txtName" Text='<%# Bind("name") %>'>    </asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="city" SortExpression="city" ItemStyle-  HorizontalAlign="Center">
        <EditItemTemplate>
            <asp:DropDownList ID="ddlCity" runat="server"></asp:DropDownList>
        </EditItemTemplate>
        <ItemTemplate>
            <asp:DropDownList ID="ddlCity" runat="server" Enabled="false"  >
            </asp:DropDownList>
        </ItemTemplate>
    </asp:TemplateField>

 </Columns>
 <RowStyle BackColor="#EFF3FB" />
 <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
 </asp:GridView>

 <asp:EntityDataSource ID="DataSource"
    runat="server" ContextTypeName="Context"
    EntitySetName="users" EntityTypeFilter="user"
    EnableDelete="True" EnableUpdate="True" /> 
```

正在加载页面......

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
            MyGridView.DataBind();
    }

protected void GridViewCausali_OnRowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            // initialize ddl in gridview
            DropDownList ddl = (DropDownList)e.Row.FindControl("ddlCity");
            List<city> cities = new List<city>();
            cities = GetFromDB();

            ddl.DataSource = cities;
            ddl.DataBind();

            ddl.Items.FindByValue((e.Row.FindControl("lblcurrentCity") as                                                     
            Label).Text).Selected = true;

        }
    }

protected void GridView_OnRowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        DropDownList ddl = (DropDownList)MyGridView.Rows[e.RowIndex].FindControl("ddlCity");
        string test = ddl.SelectedValue;
        Label lbl = (Label)MyGridView.Rows[e.RowIndex].FindControl("lblcurrentCity");
        lbl.Text = ddl.SelectedValue;
        ddl.Items.FindByValue((MyGridView.Rows[e.RowIndex].FindControl("lblcurrentCity") as Label).Text).Selected = true;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:23:55.047

我建议你添加`DefaultContainerName property`，添加`stringconnection`

```
<asp:EntityDataSource ID="DataSource" runat="server" 
    ConnectionString="name=..."
    DefaultContainerName="..." 

    EntitySetName="users" 
    EnableDelete="True" EnableInsert="True" EnableUpdate="True"/> 
```

# php - 在php中使用数组自动化相同的功能

> ID：15619536
> 
> 赞同：0
> 
> 时间：2013-03-25T16:10:15.090
> 
> 标签：php, arrays

假设我有一个像

```
function crear($first, $second, $third, $fourth, $fifth, $sixth){
    $sixth= ($sixth > 0 ? "<span class='required'>*</span>" : "");
    if($fourth=='input'){
        echo "\t   <div class='field-box ".$third."' id='".$first."_field_box'>  \n";
        echo "\t\t <div class='display-as-box' id='".$first."_display_as_box'>".$second."  ".$sixth.":</div>  \n";
        echo "\t\t <div class='input-box' id='".$first."_input_box'> \n";
        echo "\t\t <input id='field-".$first."' name='".$first."' type='text' maxlength='".$fifth."' /> </div><div class='clear'></div>  \n";
        echo "\t   </div>\n";
    }
} 
```

我多次调用它：

```
crear('title1', 'Title 1','odd',  'input', '50', 0 );
crear('title2', 'Title 2','even', 'input', '50', 0 );
crear('title3', 'Title 3','odd',  'input', '30', 1 );
crear('title4', 'Title 4','even', 'input', '50', 0 );
crear('title5', 'Title 5','odd',  'select', '19', 1 );
crear('title6', 'Title 6','even', 'select', '19', 0 ); 
```

我怎么能只调用这个函数来传递所有这些数据。

我正在考虑创建一个数组，但我必须修改函数，最好的方法是什么......我可以轻松假设的唯一一个是奇数和偶数场，其他必须是变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:15:16.287

使用[`call_user_func_array()`功能](http://php.net/manual/en/function.call-user-func-array.php)。这允许您将数组传递给通常只接受参数列表的函数。

因此，假设您的数组如下所示：（基于问题中的数据）

```
$input = array(
    array('title1', 'Title 1','odd',  'input', '50', 0 ),
    array('title2', 'Title 2','even', 'input', '50', 0 ),
    array('title3', 'Title 3','odd',  'input', '30', 1 ),
    array('title4', 'Title 4','even', 'input', '50', 0 ),
    array('title5', 'Title 5','odd',  'select', '19', 1 ),
    array('title6', 'Title 6','even', 'select', '19', 0 ),
); 
```

您可以使用`call_user_func_array()`将数据传递到您的函数中，如下所示：

```
foreach($input as $data) {
    call_user_func_array('crear', $data);
} 
```

`call_user_func_array()`您可以在 PHP 手册中找到更多信息：http: [//php.net/manual/en/function.call-user-func-array.php](http://php.net/manual/en/function.call-user-func-array.php)

# javascript - javascript Date对象使用输入中的字符串创建

> ID：15619539
> 
> 赞同：0
> 
> 时间：2013-03-25T16:10:22.927
> 
> 标签：javascript, date

我在 IE8 和一些较旧的浏览器中遇到了日期对象的问题。在网站上，我已经隐藏了输入，我在其中保存日期，并且在更改后新日期应该在该字段中。

在我的机器上一切都很好，但在我得到的其他一些机器上`NaN-NaN-NaN`，这是我的代码：

```
var date = new Date($('#curDate').val());
//date.setDate(date.getDate() - 7);
var dateMsg = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
alert(dateMsg); 
```

当我运行这个文件（php）时，在隐藏输入中我得到了本周 2013-03-25 的星期一日期。

此警报`NaN-N..`在 Win XP IE8 上返回给我，在非常旧的 mac 上，我发现它是对象的问题。如何获取日期值并将其转换为javascript中的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:16:05.627

永远不要使用`new Date(some_string)`- 它不可靠，因为它取决于用户的语言环境。

自己将字符串分解为其`yy/mm/dd`组件，然后调用`new Date(y, m - 1, d)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:16:09.727

你的连字符有问题..

> 用斜杠（'/'）转换你的连字符（'-'）

```
var dateStr=$('#curDate').val();
var a=dateStr.split(" ");
var d=a[0].split("-");
var t=a[1].split(":");
var date = new Date(d[0],(d[1]-1),d[2],t[0],t[1],t[2]); 
```

或者

```
var date=new Date(convertToSlash($('#curDate').val()));

    function convertToSlash(string){
      var response = string.replace(/-/g,"/");
      return response;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T07:48:39.853

您还可以使用新的 Date(some_string) 格式。这是可靠的。但是，日期字符串必须采用 ISO 格式，即 yyyy/mm/dd。

# c# - 如何使用 c# 在图片框中重置为默认背景色？

> ID：15619541
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:10:43.540
> 
> 标签：c#, winforms, picturebox

我需要你的帮助。我在 C#、Winforms 中使用图片框创建了一架钢琴。在图片框的属性中，我已将背景颜色设置为适当的注释（白色和黑色注释）。

我创建了一个组合框，这样我就可以选择和弦，比如 C 和弦、D 和弦……在这个链接上，你可以看到 C 和弦的正确音符。

[钢琴c和弦](http://www.read-and-play-piano.com/images/free-piano-chords-1.jpg)

当我选择一个和弦（如 C 和弦）时，相应音符的背景颜色变为红色，但是当我在组合框中选择另一个和弦时，之前选择的和弦保持红色时出现问题。

所以我的问题是，当我在组合框中选择其他内容时，我是否可以将背景颜色设置回默认设置或破坏以前的行为，或者我需要使用图片框以外的其他内容？

这是我的代码：

```
private void comboBox_selectNote_SelectedIndexChanged(object sender, EventArgs e)
    {
        switch (comboBox_selectNote.SelectedIndex)
        {
            case 0: //C
                //RED
                pbC1.BackColor = Color.Red;
                pbE1.BackColor = Color.Red;
                pbG1.BackColor = Color.Red;
                break;
            case 1: //C#
                //RED
                pbCsharp1.BackColor = Color.Red;
                pbF1.BackColor = Color.Red;
                pbGsharp1.BackColor = Color.Red;
                break; 
```

......

请我需要你的帮助，我已经尝试了一些东西，但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:15:54.443

您必须将`BackColor`其他`PictureBox`-es 的 重新分配给原始颜色。例如，您可以创建一个`Color`存储原始颜色的 s 数组，然后将这些颜色复制到`PictureBox`要重置的 -es 中。一些代码：

```
// assumes you have NUM_KEYS piano keys / PictureBoxes
Color[] pianoKeyColors = new Color[NUM_KEYS];
// fill the pianoKeyColors array with the colors you want,
// perhaps alternating white-black-white- ...
// you may want to do that in the constructor for your Form

// you should also store the PictureBox-es in an array, so you can easily
// reference the one you want

private void comboBox_selectNote_SelectedIndexChanged(object sender, EventArgs e)
{
    // reset all PictureBox-es to the original colors
    for (int key = 0; key < NUM_KEYS; key++)
        pianoKeys[key].BackColor = pianoKeyColors[key];
    // and then only set the BackColor to Red of keys in the chord
    switch (comboBox_selectNode.SelectedIndex)
    {
        case 0: // C chord
            pianoKeys[KEY_C1].BackColor = Color.Red;
            pianoKeys[KEY_E1].BackColor = Color.Red;
            pianoKeys[KEY_G1].BackColor = Color.Red
            break;
        ... and the other cases ...
    }
} 
```

# scala - 使用 FileStream 读取文件，会阻塞吗？

> ID：15619542
> 
> 赞同：3
> 
> 时间：2013-03-25T16:10:43.543
> 
> 标签：scala

所以在 Scala 中，当我使用 java 文件流库时，如：

```
inStream = Option(new FileInputStream(file))
  ..
  in.read(imageData)
  Some(imageData) 
```

这会导致阻塞操作吗？换句话说，是否应该将其包装在 Future 中以使其异步？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:23:59.840

这是一个阻塞操作。

将它包装在 a`Future`不会使文件操作异步，但它*会*占用`Future`执行器服务/线程池中的一个线程......

**附录**

JVM 中的所有执行都发生在一个线程上。当一个人使用一个`Future`线程时，发生封装计算的线程与启动该线程的线程不同`Future`。当您使用旧`java.io`的操作时，无论您是直接调用它们还是将它们交给`Future`.

如果打算创建高并发系统，则根本不进行阻塞操作。使用`Future`and 参与者可以让您实现高并发，而不会产生每个线程的 I/O 操作的高开销，*但前提是 I/O 操作本身是非阻塞的*。

# grails - grails spring security core plugin - 使用用户名和电子邮件登录

> ID：15619547
> 
> 赞同：1
> 
> 时间：2013-03-25T16:10:57.217
> 
> 标签：grails, spring-security

是否可以将 spring 安全调用配置为能够通过电子邮件和用户名进行身份验证？目前，正如我从文档中看到的那样，userLookup.userDomainClassName 配置为匹配一个字段，例如用户名，因此用户需要输入用户名才能登录。是否可以让用户使用电子邮件或用户名登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T19:05:03.450

您可以通过创建[自定义 UserDetailsS​​erice](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)来完成此操作。

在执行`loadUserByUsername`搜索时首先通过用户名，然后如果失败，则通过电子邮件搜索。

# netty - Netty 客户端连接

> ID：15619548
> 
> 赞同：0
> 
> 时间：2013-03-25T16:10:58.727
> 
> 标签：netty

在 netty 中创建客户端连接时我有一个问题。

```
Configuring a channel
Options are used to configure a channel:

 ClientBootstrap b = ...;

 // Options for a new channel
 b.setOption("remoteAddress", new InetSocketAddress("example.com", 8080));
 b.setOption("tcpNoDelay", true);
 b.setOption("receiveBufferSize", 1048576); 
```

在这里，为什么我们没有一个绑定方法将通道绑定到客户端连接发起的端口（在客户端）？我们唯一需要提供的就是提供服务器地址和端口，如下所示：

```
channel = bootstrap.connect(new InetSocketAddress(host, port)); 
```

这会在客户端或服务器端创建一个新通道吗？这个通道在客户端绑定了什么端口？

我们在执行服务器端 BootStrap 时进行绑定，如下所示

```
 ServerBootstrap b = ...;
 channel = b.bind(b.getOption("localAddress")); 
```

我很困惑，无法理解客户端从哪个端口将数据发送到服务器以及使用了什么通道？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:57:48.463

您应该使用`ClientBootstrap.connect(remoteAddress, localAddress)`来指定要创建的套接字的本地地址。或者，您可以调用`ClientBootstrap.bind(localAddress).sync()`，然后调用`ClientBootstrap.connect(remoteAddress)`来实现相同的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:23:51.943

当您使用创建客户端连接时，您`connect(SocketAddress remoteAddress))`会在客户端创建一个通道。connect 方法绑定本地地址，然后连接到远程地址。当 connect 方法中不指定本地地址时，该方法将绑定本地 ip 和随机端口。如果你想决定使用哪个本地端口，你需要使用`connect(SocketAddress remoteAddress, SocketAddress localAddress)`方法。

# c# - ASP.Net WebForms LinkBut ton 单击，打开新选项卡，通过隐藏的 html 输入变量传递 id

> ID：15619556
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:11:13.313
> 
> 标签：c#, asp.net, webforms, parameter-passing, new-window

我有一个带有通过用户控件构建的转发器的 aspx 网络表单页面。每个中继器项目都有一个链接按钮。我想要发生的是，当单击 LinkBut​​ton（在页面 A 的用户控件上的中继器中）时，会在新选项卡中打开 url，并传递该 LinkBut​​ton 旁边的隐藏 ID（根据 Web 开发安全性最佳实践如果可能）到新选项卡中的 aspx 页面（页面 B）。 

页面 A 和页面 B 都在同一个应用程序中。

我上面描述的目的是让用户在从通过单击链接按钮打开的 URL 返回后可以轻松地返回到他们的搜索结果。

我对如何做到这一点的想法持开放态度，这些想法更接近标准的最佳实践方法。

**到目前为止，我已经尝试过：**

1) 跨页发布——这适用于传递 id，但不适用于在新标签中打开。

2）将 PostBackUrl 设置为页面 B 的 url，使用 OnClientClick 调用 javascript 设置 Page.Form.Target="_blank" 以将来自用户控件的隐藏 ID 设置为页面 B 上的 html 隐藏输入的值。 

3) 我还尝试在 OnClientClick 中使用 window.open("page B url", "_newtab")。

*   **a)** 到目前为止，唯一有效的方法是上述 3 种不同方法中的第 2 种。 

    但是，在新选项卡中加载页面 B 后，我不知道如何将页面 A 的 Page.Form.Target 重置为之前的状态，然后将其设置为“_blank”

*   **b）我尝试过的重置 Page.Form.Target 的方法是：**

*   **1) **重置页面 A 的 Page_Load 中的目标，其中 IsPostBack == true --> 导致页面 B 加载与页面 A 相同的内容。

*   **2）** 在页面A的用户控件的Page_Load中重置目标->与方法1相同的结果

*   **3）在页面A的用户控件中重置页面A的用户控件的LinkBut​​ton的OnUnLoad中的目标-->与方法1相同的结果**

*   **4)** 通过 LinkBut​​ton 的 OnClientClick 重置 javascript 中的目标 --> 不起作用

*   **5)** 使用来自页面 A 的包含对页面 A 表单的引用的公共变量重置页面 B 的 Page_Load 中的目标
    （类似于可以通过跨页面发布完成的操作）--> 不起作用。 

**我想接下来尝试的是：**

**1）**     在页面A上包装另一个用户控件以显示页面B的内容，在asp面板（面板B）中

**2）**     将页面B的内容放入新的用户控制页面

**3）**     将页面A上的搜索结果内容包装在一个asp Panel（Panel A）中。

**4)**     当新用户控件上的repeater中的LinkBut​​ton被点击时，Panel A中的搜索结果内容将被隐藏，Panel B将显示出来。

**5）**     当用户想要返回搜索结果时，点击Panel B内容中的“Return to Search”链接按钮，Panel B会被隐藏，Panel B的内容会被清除，Panel A会再次显示。

***我还不确定这是否会奏效。***

看起来这应该不是那么困难。

这是一个直截了当的概念，我认为这是 Web 开发中相当普遍的情况。

我觉得 Wiley Coyote 试图抓住 Road Runner，因为我想出了精心设计的聪明、深思熟虑的计划，但都完全失败了。

我现在举着一个小牌子，上面写着：“救命！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T09:57:50.377

我通过以下代码解决了同样的问题，您只需在您的 HTML 页面中尝试此操作以获取按钮`GRIDVIEW`：

```
 <asp:LinkButton ID="LinkButton1" runat="server" Text="View" CommandArgument='<%# Bind("ref") %>'
   OnClick="LinkButton1_Click" OnClientClick="document.forms[0].target ='_blank';">View</asp:LinkButton>*** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:01:54.657

我实际上已经弄清楚了。

我通过结合这篇文章上的标记答案，[当我们点击 LinkBut​​ton 时如何打开新标签](http://forums.asp.net/t/1849927.aspx/1?How%20to%20Open%20new%20tab%20when%20we%20click%20on%20LinkButton)，以及这篇文章上的标记答案，[是否可以将点击事件添加到超链接？](http://forums.asp.net/t/1395793.aspx/).

用户控件的转发器中的我的**转发器 ItemTemplate**看起来与此类似：

```
<asp:HiddenField ID="hfId" runat="server"  
    Value='<%# Eval("Id") %>'/>
<asp:HyperLink ID="myLink" runat="server" 
    Text='<%# Eval("Name") %>' 
    NavigateUrl="/myUrl.aspx" 
    Target="_blank"  />
<asp:Button ID="btnSubmit" runat="server" 
    Text="Submit" 
    OnClick="BtnClick"
    Style="display: none;" /> 
```

这是我在**转发器的 ItemDataBound 中的**代码：

```
protected void RptrItemDataBound(object sender, RepeaterItemEventArgs e)
{
  if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
  {
    var myId = "";

    var myNameLink = e.Item.FindControl("myLink") as HyperLink;

    if (myNameLink != null)
    {
      var submitButton = e.Item.FindControl("btnSubmit") as Button;

      if (submitButton != null)
      {
        var submitButtonClientId = submitButton.ClientID;

        myNameLink.Attributes.Add("onclick", "onNameClick('" + submitButtonClientId + "')");
      }
    }
  }
}//end RptrItemDataBound 
```

**javascript**代码 ：

```
<script type="text/javascript">
  function nameClick(buttonId)
  {
    document.getElementById(buttonId).click();
  }
</script> 
```

这是**BtnClick C# 代码**：

```
protected void BtnClick(object sender, EventArgs e)
{
  var btnSelect = sender as Button;

  if (btnSelect == null)
  {
    return;
  }

  var myListItem = (RepeaterItem)btnSelect.DataItemContainer;

  if (myListItem != null)
  {
    var hfId = myListItem.FindControl("hfId") as HiddenField;

    if (hfId != null)
    {
      var intId = int.Parse(hfId.Value);

      Session["selectedId"] = intId;
    }//end if (hfId != null)
  }//end if (myListItem != null)
}//end btnClick 
```

# ruby-on-rails - if-else 中的链式条件过多

> ID：15619559
> 
> 赞同：1
> 
> 时间：2013-03-25T16:11:14.943
> 
> 标签：ruby-on-rails, ruby

使用 Rails。如何最好地重写`country_photo`?

```
# country.rb
class Country < ActiveRecord::Base
  has_many :zones

  def country_photo
    if !zones.blank? && !zones.first.shops.blank? && !zones.first.shops.first.photos.blank?
      zones.first.shops.first.photos.first.url(:picture_preview)
    end
  end
end

# zones.rb
class Zone < ActiveRecord::Base
  belongs_to :country
  has_many :zone_shops
  has_many :shops, :through => :zone_shops
end

# zone_shop.rb
class ZoneShop < ActiveRecord::Base
  belongs_to :zone
  belongs_to :shop
end

# shop.rb
class Shop < ActiveRecord::Base  

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:53:53.300

假设您想在视图中显示图像，我会这样做：

```
# show.html.haml
- if @country.photo
  image_tag @country.photo.url(:picture_preview)

# country.rb
class Country < ActiveRecord::Base
  def photo
    zones.first.photo unless zones.blank?
  end
end

# zone.rb
class Zone < ActiveRecord::Base
  def photo
    shops.first.photo unless shops.blank?
  end
end

# shop.rb
class Shop < ActiveRecord::Base
  def photo
    photos.first unless photos.blank?
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:26:13.413

请注意`!x.blank?`-> `x.present?`。无论如何，如果您可以在`if`s 中进行分配（它们在 Ruby 中很常见），您可以编写：

```
def country_photo
  if (zone = zones.first) &&
     (shop = zone.shops.first) &&
     (photo = shop.photos.first) 
    photo.url(:picture_preview)
  end
end 
```

如果你喜欢花哨的抽象，可以使用[Ick](http://ick.rubyforge.org/)编写：

```
def country_photo
  zones.first.maybe { |zone| zone.shops.first.photos.first.url(:picture_preview) }
end 
```

# java - 在来自 HTTP 客户端的 PUT 请求后获取“需要 411 长度”

> ID：15619562
> 
> 赞同：10
> 
> 时间：2013-03-25T16:11:17.310
> 
> 标签：java, http, rest, put, content-length

我正在开发一个实现 HTTP 客户端的 Java 程序。我测试它向服务器发送请求。GET、POST 和 DELETE 请求工作正常。例如，在一个 POST 请求之后，我得到一个输出

```
Data extracted:
{"status":{"message":"ok"}} 
```

并且数据库反映所做的更改。

但是，在 PUT 请求之后，我得到了指示错误的网页的以下 html 标记。

```
Data extracted:
<html>
<head><title>411 Length Required</title></head>
<body bgcolor="white">
<center><h1>411 Length Required</h1></center>
<hr><center>nginx/1.2.6</center>
</body>
</html> 
```

因此数据库中没有变化。

我发现这可能与 Content-Length 标头有关，但我不确定。在尝试添加此标头后，我的程序等待一分钟，然后引发异常，通知它无法处理服务器响应。

如果需要，我还可以提供任何代码或堆栈跟踪。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T16:17:26.083

是的，与`Content-Length`. HTTP 错误 411 表示

> 服务器拒绝接受没有定义 Content-Length 的请求。如果客户端在请求消息中添加了包含消息体长度的有效 Content-Length 头字段，则客户端可以重复请求。

因此，当您在 POST/PUT 方法中发送空时`RequestBody`，您还需要发送`Content-Length:0`. 因此，在您的请求中添加此标头。我不认为这个标头会导致您添加到请求对象中的问题。

# php - Running PHP on Tomcat 7

> ID：15619566
> 
> 赞同：1
> 
> 时间：2013-03-25T16:11:41.317
> 
> 标签：php, tomcat

I am trying to setup PHP on Apache Tomcat 7 using [these notes](http://www.linuxquestions.org/questions/slackware-14/apache-tomcat-7-0-11-and-php-925305/). I made changes to Web.XML of the web server from my research on the web and it looks like the following:

```
<listener><listener-class>php.java.servlet.ContextLoaderListener</listener-class></listener>
<servlet>
<servlet-name>PhpJavaServlet</servlet-name>
<servlet-class>php.java.servlet.PhpJavaServlet</servlet-class>
</servlet>
<servlet>
<servlet-name>PhpCGIServlet</servlet-name>
<servlet-class>php.java.servlet.fastcgi.FastCGIServlet</servlet-class>
    <init-param><param-name>prefer_system_php_exec</param-name><param-value>On</param-value></init-param>
    <init-param><param-name>php_include_java</param-name><param-value>On</param-value></init-param>
</servlet>
<servlet-mapping><servlet-name>PhpJavaServlet</servlet-name><url-pattern>*.phpjavabridge</url-pattern> </servlet-mapping>
<servlet-mapping><servlet-name>PhpCGIServlet</servlet-name><url-pattern>*.php</url-pattern></servlet-mapping> 
```

Now the Listener entry seem to be preventing the Tomcat7 startup. Below is the data from trace. Has anybody seen or fixed this before? Please share your thoughts.

```
SEVERE: Exception sending context initialized event to listener instance of class php.java.servlet.ContextLoaderListener
java.lang.NullPointerException
    at java.io.File.<init>(File.java:222)
    at php.java.bridge.http.NPChannelFactory.test(NPChannelFactory.java:61)
    at php.java.bridge.http.FCGIConnectionPool.<init>(FCGIConnectionPool.java:175)
    at php.java.bridge.http.FCGIConnectionPool.<init>(FCGIConnectionPool.java:189)
    at php.java.servlet.ContextLoaderListener.createConnectionPool(ContextLoaderListener.java:541)
    at php.java.servlet.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:185)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1114)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1673)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
25-mrt-2013 16:38:55 org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
25-mrt-2013 16:38:55 org.apache.catalina.core.StandardContext startInternal 
```

# pandas - horizontally centered xlabels for pandas timeseries plotting

> ID：15619568
> 
> 赞同：1
> 
> 时间：2013-03-25T16:11:44.477
> 
> 标签：pandas

When plotting a Series with a PeriodIndex, pandas always locates the xlabels on the beginning of a Period:

```
DATA = pd.Series(np.random.randn(120), index=pd.period_range("2013-01", "2012-12", freq="M"))
DATA.plot(ax=plt.gca()) 
```

So in this case, the annual labels (2003, ... 2012) are located at the first of January of each year. How can I have the annual labels centered horintally, while keeping the xticks at their places?

So in my example, I want the major_xticks located on each Jan 1st, but the label "2012" be centered between 2012-01-01 and 2013-01-01.

# stata - Convert multiple dta files to tab separated files in Stata

> ID：15619573
> 
> 赞同：1
> 
> 时间：2013-03-25T16:12:02.997
> 
> 标签：stata

Is there a way to convert a number of dta files to tab separated files at once, without loading each data set into Stata?

Something like :

```
x<- get *.dta filenames from directory
foreach file_with_filename in x
     convert to tab separated file 
```

Apparently the *outsheet* function can be only used by referring to the dataset (or variable names) currently loaded in memory.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:08:18.397

像这样的东西。这`fs`是您需要安装的便捷命令，但只需安装一次。

```
clear 
ssc inst fs, replace
fs *.dta 

foreach f in `r(files)' {
    use "`f'" 
    local newname : subinstr local f ".dta" ".txt" 
    outsheet using `newname'
} 
```

请注意，这`outsheet`是一个命令，而不是一个函数。

（编辑删除强制逗号分隔；问题是关于制表符分隔）

# objective-c - How to define a tappable area defined by coordinates

> ID：15619574
> 
> 赞同：1
> 
> 时间：2013-03-25T16:12:04.680
> 
> 标签：objective-c, touch, coordinates, area, tap

I am writing a small iPad application that draws a shape from a list of coordinates. I would like to tap anywhere inside the shape and have some action occur (i.e. NSLog proving it worked).

Does anyone know how to create a tappable area that is defined by a list of coordinates?

The shape is being drawn on top of a MKMapView.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:30:45.037

我的方法是：

让标记形状的点位于 UIView 的子类中。为该类覆盖 pointInside:withEvent:。然后看看[如何确定二维点是否在多边形内？](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)并使用您的新知识来实现​​ pointInside:withEvent:

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event 
{
    //Left as homework
} 
```

您可以使用常规的点击手势识别器：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:17:33.113

只有 的 实例是`UIView`可点击的，它们的区域由它们的 rectangle 属性定义`frame`。原则上，可以（对于非常简单和特定的形状）用多个`UIView`s 来近似由坐标定义的区域，但这可能不是您想要的。

# javascript - jQuery find() method not working on only one(!) class

> ID：15619577
> 
> 赞同：1
> 
> 时间：2013-03-25T16:12:08.313
> 
> 标签：javascript, jquery

jQuery's find() method is not working with everything except my class *.szenenkasten*. It doesn't make any sense at all...

Simplified source code:

HTML

```
<ul class="NavBar">
    <li></li>  
    <li></li> 
    <li></li> 
    <li></li> 
    <li></li>         
</ul>

<span class="szenenkasten"></span>
<span class="szenenkasten"></span>
<span class="szenenkasten"></span>
<span class="szenenkasten"></span>
<span class="szenenkasten"></span> 
```

jQuery

```
alert($('.NavBar').find('li').length);
 //returns 5
alert($('.szenenkasten').find('span').length);
 //returns 0
alert($('span').find('.szenenkasten').length);
 //returns 0
alert($('span.szenenkasten').length);
//returns 5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:12:53.307

在您的 jquery 元素的后代中[查找外观。](http://api.jquery.com/find/)在这里，您的跨度不是后代，而是相同的元素。

不要在这里使用 find 但过滤：

```
alert($('.szenenkasten').filter('span').length); 
```

或者干脆

```
alert($('span.szenenkasten')); 
```

# python - Displaying the Name of a Table on an Template

> ID：15619578
> 
> 赞同：0
> 
> 时间：2013-03-25T16:12:10.777
> 
> 标签：python, django

I have a model/table, `WeekOne` with various fields. It also has a unicode field:

```
def __unicode__(self):
    return u'Week One' 
```

`WeekOne` is a foreign key of `user`, defined using the variable `weekOne.` Thinking I could leverage the unicode field in a template, I tried to display the name using the following code:

```
{{ user.weekOne }} 
```

Nothing showed up. It's not an issue of my models functioning properly, I access other fields in model/weekOne throughout the template without issue. What's the best way to display the name of a table? Do I need to create a "Name" field? That seems like kind of a waste, since every user would have a WeekOne table with the redundant "Name" field.

Here is the model of UserProfile, which is what the user variable references:

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    weekOne = models.OneToOneField(WeekOne) 
```

When I do something like user.weekOne.items (items is a field in weekOne), it shows up on the template.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:29:58.493

尝试这个

```
{{ user.userprofile.weekOne }} 
```

PS：不要将模型称为表。模型是一个类。它用于与数据库表对话。表名和模型名可以不同。

# java - Could not load definitions from resources

> ID：15619583
> 
> 赞同：2
> 
> 时间：2013-03-25T16:12:28.520
> 
> 标签：java, eclipse, ant, rapidminer

I have a (hopefully) very basic question. I'm very unfamiliar with Ant, I'm just trying to use a build file so I can write some plugins for an open source application I found recently, Rapid Miner. I've been trying to compile it with Eclipse (following Eclipses.org's own instructions on how to do so.) Every time I click Run though I get an error that looks like this:

```
Buildfile: C:\Users\jcarr14\Eclipse\Workspace\RapidMiner_Unuk\build.xml
  [taskdef] Could not load definitions from resource net/sf/antcontrib/antlib.xml. It could not be found.

BUILD FAILED
C:\Users\jcarr14\Eclipse\Workspace\RapidMiner_Unuk\build.xml:329: taskdef class   com.oracle.appbundler.AppBundlerTask cannot be found
using the classloader AntClassLoader[]

Total time: 306 milliseconds 
```

It seems to me that there must be a file missing, but I can't figure out where it is supposed to be and as a result, I can't figure out if it is actually there or not, or even if Eclipse is the culprit. I did go into the Eclipse folder and look for a net/sf/antcontrib/antlib.xml, but was unable to locate anything.

I'm assuming that it's possible the problem is not with Eclipse at all, but with Rapid Miner. So I looked for that same location inside of the RapidMiner project structure and was unable to find it. I have also posted a similar question to this one on RapidMiner's forums, just in case this is RapidMiner specific.

I suppose the basic question I need answered is how to check if Ant is installed properly in Eclipse. Once I know that Eclipse is working fine I can then throw all my focus on figuring out what is wrong with RapidMiner...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:57:23.750

看来您需要安装[ant-contrib](http://ant-contrib.sourceforge.net/)。

# matlab - svmtrain error "Group must be a vector."

> ID：15619584
> 
> 赞同：1
> 
> 时间：2013-03-25T16:12:29.963
> 
> 标签：matlab, libsvm

I am trying to train a SVM with the Matlab interface of [LibSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/), but I get following error

```
 model = svmtrain(Classes(train),Attributes(train,:),'-s 0 -t 2');
 ??? Error using ==> svmtrain at 172 Group must be a vector. 
```

See also comment here: [support vector machines in matlab](https://stackoverflow.com/questions/4976539/support-vector-machines-in-matlab#comment5560472_4976577)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:12:29.963

The problem is, that Matlab is using its [own SVM implementation](http://www.mathworks.com/help/stats/svmtrain.html) which takes among other things the variables in different order.

To make it work, make sure that the LibSVM library is part of your Matlab's Search Path. One option would be to use the Matlab filebrowser (`Current Folder`) to go the LibSVM folder and use the menu `Add to Path` -> `Selected Folders and Subfolders`. If this solves your problem and you need LibSVM regularly, add the folder to your `startup.m` using [`addpath`](http://www.mathworks.de/de/help/matlab/ref/addpath.html).

See also: [Error: Undefined function or method 'svmtrain' for input arguments of type 'double'](https://stackoverflow.com/questions/10115219/error-undefined-function-or-method-svmtrain-for-input-arguments-of-type-doub)

# jboss7.x - Jconsole 随机停止连接

> ID：15619588
> 
> 赞同：0
> 
> 时间：2013-03-25T16:12:46.867
> 
> 标签：jboss7.x, jmx, java-6, jconsole, spring-remoting

我们有一个运行和托管 Web 应用程序的 jboss 7 实例。JMX 远程已通过用户名/密码身份验证打开，我们可以正常连接到它。请不要我们使用 Jboss/bin/jconsole.bat 进行连接。但是有时我们注意到在以下 2 种情况之后，除非我们重新启动 jboss 服务器，否则它会停止允许与 jmx 的任何更多连接。情况是 1）我们尝试使用 jconsole 对 JVM 进行堆转储 2）我们在通过 spring JMX 公开的 c3p0 数据源对象上调用 softreset 方法

不一定在做任何 2 之后它总是会停止工作。有时它会在尝试一次堆转储后或有时在 3-4 次成功尝试后停止建立新连接。关于 jconsole 的这种随机行为的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:10:49.687

我认为您对 AS 7.1.x 的连接泄漏错误有所了解，并且已在 7.2.x 版本中修复。

我建议您使用 EAP 6.1.0.Alpha1（与 7.2.0.Final 相同）并重试。

如果我没记错的话，这是原始问题[https://issues.jboss.org/browse/REMJMX-45](https://issues.jboss.org/browse/REMJMX-45)

# z3 - Z3 正时变化

> ID：15619592
> 
> 赞同：5
> 
> 时间：2013-03-25T16:13:03.217
> 
> 标签：z3

自从升级到 Z3 的开源版本（最新的 git master）后，我注意到使用 C API（从 2 到 122 秒）重复运行几乎相同的 SMT 查询之间存在显着的时间差异。查询之间的唯一区别是数组的命名（在 QF_AUFBV 逻辑中）。

我们按如下方式分配数组：

```
Z3_symbol s = Z3_mk_string_symbol(z3_context, arrayName);
Z3_mk_const(z3_context, s,
            Z3_mk_array_sort(z3_context, getSort(32), getSort(8))); 
```

下面是一个示例查询（转换为 SMT-LIB）。用其他名称（例如，“a”或“arr51_0x2628008”）替换“arr51”会显着改变查询的持续时间，最多可更改两个数量级。在不改变数组名称的情况下重复运行不会表现出明显的时序变化。

有趣的是，Z3 3.2 的旧二进制版本似乎不受数组命名的影响（并且对于我们的大多数查询来说运行得更快）。

```
(benchmark klee
:status unsat
:logic QF_AUFBV
:extrafuns ((arr51 Array[32:8]))
:assumption
(let (?x13 (concat (select arr51 bv58[32]) (concat (select arr51 bv57[32]) (select arr51 bv56[32]))))
(let (?x16 (concat (select arr51 bv59[32]) ?x13))
(let (?x23 (concat bv0[32] ?x16))
(let (?x34 (bvsub (bvadd (concat (extract[33:0] ?x23) bv0[30]) (concat (extract[35:0] ?x23) bv0[28])) (concat (extract[40:0] ?x23) bv0[23])))
(let (?x42 (bvadd (bvadd ?x34 (concat (extract[44:0] ?x23) bv0[19])) (concat (extract[45:0] ?x23) bv0[18])))
(let (?x50 (bvadd (bvsub ?x42 (concat (extract[47:0] ?x23) bv0[16])) (concat (extract[49:0] ?x23) bv0[14])))
(let (?x58 (bvsub (bvadd ?x50 (concat (extract[50:0] ?x23) bv0[13])) (concat (extract[52:0] ?x23) bv0[11])))
(let (?x66 (bvadd (bvadd ?x58 (concat (extract[56:0] ?x23) bv0[7])) (concat (extract[59:0] ?x23) bv0[4])))
(let (?x68 (extract[63:32] (bvsub ?x66 ?x23)))
(flet ($x79 (= bv1[32] bv30[32]))
(let (?x80 (ite $x79 (concat bv0[30] (extract[31:30] (bvsub ?x16 ?x68))) (ite (= bv1[32] bv31[32]) (concat bv0[31] (extract[31:31] (bvsub ?x16 ?x68))) bv0[32])))
(flet ($x85 (= bv1[32] bv29[32]))
(flet ($x90 (= bv1[32] bv28[32]))
(let (?x91 (ite $x90 (concat bv0[28] (extract[31:28] (bvsub ?x16 ?x68))) (ite $x85 (concat bv0[29] (extract[31:29] (bvsub ?x16 ?x68))) ?x80)))
(flet ($x96 (= bv1[32] bv27[32]))
(flet ($x102 (= bv1[32] bv26[32]))
(let (?x103 (ite $x102 (concat bv0[26] (extract[31:26] (bvsub ?x16 ?x68))) (ite $x96 (concat bv0[27] (extract[31:27] (bvsub ?x16 ?x68))) ?x91)))
(flet ($x108 (= bv1[32] bv25[32]))
(flet ($x114 (= bv1[32] bv24[32]))
(let (?x115 (ite $x114 (concat bv0[24] (extract[31:24] (bvsub ?x16 ?x68))) (ite $x108 (concat bv0[25] (extract[31:25] (bvsub ?x16 ?x68))) ?x103)))
(flet ($x119 (= bv1[32] bv23[32]))
(flet ($x125 (= bv1[32] bv22[32]))
(let (?x126 (ite $x125 (concat bv0[22] (extract[31:22] (bvsub ?x16 ?x68))) (ite $x119 (concat bv0[23] (extract[31:23] (bvsub ?x16 ?x68))) ?x115)))
(flet ($x131 (= bv1[32] bv21[32]))
(flet ($x137 (= bv1[32] bv20[32]))
(let (?x138 (ite $x137 (concat bv0[20] (extract[31:20] (bvsub ?x16 ?x68))) (ite $x131 (concat bv0[21] (extract[31:21] (bvsub ?x16 ?x68))) ?x126)))
(flet ($x142 (= bv1[32] bv19[32]))
(flet ($x147 (= bv1[32] bv18[32]))
(let (?x148 (ite $x147 (concat bv0[18] (extract[31:18] (bvsub ?x16 ?x68))) (ite $x142 (concat bv0[19] (extract[31:19] (bvsub ?x16 ?x68))) ?x138)))
(flet ($x153 (= bv1[32] bv17[32]))
(flet ($x157 (= bv1[32] bv16[32]))
(let (?x158 (ite $x157 (concat bv0[16] (extract[31:16] (bvsub ?x16 ?x68))) (ite $x153 (concat bv0[17] (extract[31:17] (bvsub ?x16 ?x68))) ?x148)))
(flet ($x163 (= bv1[32] bv15[32]))
(flet ($x168 (= bv1[32] bv14[32]))
(let (?x169 (ite $x168 (concat bv0[14] (extract[31:14] (bvsub ?x16 ?x68))) (ite $x163 (concat bv0[15] (extract[31:15] (bvsub ?x16 ?x68))) ?x158)))
(flet ($x173 (= bv1[32] bv13[32]))
(flet ($x179 (= bv1[32] bv12[32]))
(let (?x180 (ite $x179 (concat bv0[12] (extract[31:12] (bvsub ?x16 ?x68))) (ite $x173 (concat bv0[13] (extract[31:13] (bvsub ?x16 ?x68))) ?x169)))
(flet ($x184 (= bv1[32] bv11[32]))
(flet ($x190 (= bv1[32] bv10[32]))
(let (?x191 (ite $x190 (concat bv0[10] (extract[31:10] (bvsub ?x16 ?x68))) (ite $x184 (concat bv0[11] (extract[31:11] (bvsub ?x16 ?x68))) ?x180)))
(flet ($x196 (= bv1[32] bv9[32]))
(flet ($x202 (= bv1[32] bv8[32]))
(let (?x203 (ite $x202 (concat bv0[8] (extract[31:8] (bvsub ?x16 ?x68))) (ite $x196 (concat bv0[9] (extract[31:9] (bvsub ?x16 ?x68))) ?x191)))
(flet ($x207 (= bv1[32] bv7[32]))
(flet ($x213 (= bv1[32] bv6[32]))
(let (?x214 (ite $x213 (concat bv0[6] (extract[31:6] (bvsub ?x16 ?x68))) (ite $x207 (concat bv0[7] (extract[31:7] (bvsub ?x16 ?x68))) ?x203)))
(flet ($x219 (= bv1[32] bv5[32]))
(flet ($x224 (= bv1[32] bv4[32]))
(let (?x225 (ite $x224 (concat bv0[4] (extract[31:4] (bvsub ?x16 ?x68))) (ite $x219 (concat bv0[5] (extract[31:5] (bvsub ?x16 ?x68))) ?x214)))
(flet ($x230 (= bv1[32] bv3[32]))
(flet ($x236 (= bv1[32] bv2[32]))
(let (?x237 (ite $x236 (concat bv0[2] (extract[31:2] (bvsub ?x16 ?x68))) (ite $x230 (concat bv0[3] (extract[31:3] (bvsub ?x16 ?x68))) ?x225)))
(flet ($x241 (= bv1[32] bv1[32]))
(let (?x69 (bvsub ?x16 ?x68))
(flet ($x243 (= bv1[32] bv0[32]))
(let (?x245 (bvadd (ite $x243 ?x69 (ite $x241 (concat bv0[1] (extract[31:1] ?x69)) ?x237)) ?x68))
(let (?x253 (ite (= bv16[32] bv30[32]) (concat bv0[30] (extract[31:30] ?x245)) (ite (= bv16[32] bv31[32]) (concat bv0[31] (extract[31:31] ?x245)) bv0[32])))
(let (?x261 (ite (= bv16[32] bv28[32]) (concat bv0[28] (extract[31:28] ?x245)) (ite (= bv16[32] bv29[32]) (concat bv0[29] (extract[31:29] ?x245)) ?x253)))
(let (?x269 (ite (= bv16[32] bv26[32]) (concat bv0[26] (extract[31:26] ?x245)) (ite (= bv16[32] bv27[32]) (concat bv0[27] (extract[31:27] ?x245)) ?x261)))
(let (?x277 (ite (= bv16[32] bv24[32]) (concat bv0[24] (extract[31:24] ?x245)) (ite (= bv16[32] bv25[32]) (concat bv0[25] (extract[31:25] ?x245)) ?x269)))
(let (?x285 (ite (= bv16[32] bv22[32]) (concat bv0[22] (extract[31:22] ?x245)) (ite (= bv16[32] bv23[32]) (concat bv0[23] (extract[31:23] ?x245)) ?x277)))
(let (?x293 (ite (= bv16[32] bv20[32]) (concat bv0[20] (extract[31:20] ?x245)) (ite (= bv16[32] bv21[32]) (concat bv0[21] (extract[31:21] ?x245)) ?x285)))
(let (?x301 (ite (= bv16[32] bv18[32]) (concat bv0[18] (extract[31:18] ?x245)) (ite (= bv16[32] bv19[32]) (concat bv0[19] (extract[31:19] ?x245)) ?x293)))
(let (?x309 (ite (= bv16[32] bv16[32]) (concat bv0[16] (extract[31:16] ?x245)) (ite (= bv16[32] bv17[32]) (concat bv0[17] (extract[31:17] ?x245)) ?x301)))
(let (?x317 (ite (= bv16[32] bv14[32]) (concat bv0[14] (extract[31:14] ?x245)) (ite (= bv16[32] bv15[32]) (concat bv0[15] (extract[31:15] ?x245)) ?x309)))
(let (?x325 (ite (= bv16[32] bv12[32]) (concat bv0[12] (extract[31:12] ?x245)) (ite (= bv16[32] bv13[32]) (concat bv0[13] (extract[31:13] ?x245)) ?x317)))
(let (?x333 (ite (= bv16[32] bv10[32]) (concat bv0[10] (extract[31:10] ?x245)) (ite (= bv16[32] bv11[32]) (concat bv0[11] (extract[31:11] ?x245)) ?x325)))
(let (?x341 (ite (= bv16[32] bv8[32]) (concat bv0[8] (extract[31:8] ?x245)) (ite (= bv16[32] bv9[32]) (concat bv0[9] (extract[31:9] ?x245)) ?x333)))
(let (?x349 (ite (= bv16[32] bv6[32]) (concat bv0[6] (extract[31:6] ?x245)) (ite (= bv16[32] bv7[32]) (concat bv0[7] (extract[31:7] ?x245)) ?x341)))
(let (?x357 (ite (= bv16[32] bv4[32]) (concat bv0[4] (extract[31:4] ?x245)) (ite (= bv16[32] bv5[32]) (concat bv0[5] (extract[31:5] ?x245)) ?x349)))
(let (?x365 (ite (= bv16[32] bv2[32]) (concat bv0[2] (extract[31:2] ?x245)) (ite (= bv16[32] bv3[32]) (concat bv0[3] (extract[31:3] ?x245)) ?x357)))
(let (?x371 (ite (= bv16[32] bv0[32]) ?x245 (ite (= bv16[32] bv1[32]) (concat bv0[1] (extract[31:1] ?x245)) ?x365)))
(let (?x372 (concat bv0[32] ?x371))
(let (?x380 (bvsub (bvadd (concat (extract[32:0] ?x372) bv0[31]) (concat (extract[34:0] ?x372) bv0[29])) (concat (extract[36:0] ?x372) bv0[27])))
(let (?x386 (bvsub (bvadd ?x380 (concat (extract[38:0] ?x372) bv0[25])) (concat (extract[40:0] ?x372) bv0[23])))
(let (?x392 (bvsub (bvadd ?x386 (concat (extract[42:0] ?x372) bv0[21])) (concat (extract[44:0] ?x372) bv0[19])))
(let (?x398 (bvsub (bvadd ?x392 (concat (extract[46:0] ?x372) bv0[17])) (concat (extract[48:0] ?x372) bv0[15])))
(let (?x404 (bvsub (bvadd ?x398 (concat (extract[50:0] ?x372) bv0[13])) (concat (extract[52:0] ?x372) bv0[11])))
(let (?x410 (bvsub (bvadd ?x404 (concat (extract[54:0] ?x372) bv0[9])) (concat (extract[56:0] ?x372) bv0[7])))
(let (?x416 (bvsub (bvadd ?x410 (concat (extract[58:0] ?x372) bv0[5])) (concat (extract[60:0] ?x372) bv0[3])))
(let (?x420 (extract[63:32] (bvadd ?x416 (concat (extract[62:0] ?x372) bv0[1]))))
(let (?x427 (ite $x79 (concat bv0[30] (extract[31:30] (bvsub ?x371 ?x420))) (ite (= bv1[32] bv31[32]) (concat bv0[31] (extract[31:31] (bvsub ?x371 ?x420))) bv0[32])))
(let (?x433 (ite $x90 (concat bv0[28] (extract[31:28] (bvsub ?x371 ?x420))) (ite $x85 (concat bv0[29] (extract[31:29] (bvsub ?x371 ?x420))) ?x427)))
(let (?x439 (ite $x102 (concat bv0[26] (extract[31:26] (bvsub ?x371 ?x420))) (ite $x96 (concat bv0[27] (extract[31:27] (bvsub ?x371 ?x420))) ?x433)))
(let (?x445 (ite $x114 (concat bv0[24] (extract[31:24] (bvsub ?x371 ?x420))) (ite $x108 (concat bv0[25] (extract[31:25] (bvsub ?x371 ?x420))) ?x439)))
(let (?x451 (ite $x125 (concat bv0[22] (extract[31:22] (bvsub ?x371 ?x420))) (ite $x119 (concat bv0[23] (extract[31:23] (bvsub ?x371 ?x420))) ?x445)))
(let (?x457 (ite $x137 (concat bv0[20] (extract[31:20] (bvsub ?x371 ?x420))) (ite $x131 (concat bv0[21] (extract[31:21] (bvsub ?x371 ?x420))) ?x451)))
(let (?x463 (ite $x147 (concat bv0[18] (extract[31:18] (bvsub ?x371 ?x420))) (ite $x142 (concat bv0[19] (extract[31:19] (bvsub ?x371 ?x420))) ?x457)))
(let (?x469 (ite $x157 (concat bv0[16] (extract[31:16] (bvsub ?x371 ?x420))) (ite $x153 (concat bv0[17] (extract[31:17] (bvsub ?x371 ?x420))) ?x463)))
(let (?x475 (ite $x168 (concat bv0[14] (extract[31:14] (bvsub ?x371 ?x420))) (ite $x163 (concat bv0[15] (extract[31:15] (bvsub ?x371 ?x420))) ?x469)))
(let (?x481 (ite $x179 (concat bv0[12] (extract[31:12] (bvsub ?x371 ?x420))) (ite $x173 (concat bv0[13] (extract[31:13] (bvsub ?x371 ?x420))) ?x475)))
(let (?x487 (ite $x190 (concat bv0[10] (extract[31:10] (bvsub ?x371 ?x420))) (ite $x184 (concat bv0[11] (extract[31:11] (bvsub ?x371 ?x420))) ?x481)))
(let (?x493 (ite $x202 (concat bv0[8] (extract[31:8] (bvsub ?x371 ?x420))) (ite $x196 (concat bv0[9] (extract[31:9] (bvsub ?x371 ?x420))) ?x487)))
(let (?x499 (ite $x213 (concat bv0[6] (extract[31:6] (bvsub ?x371 ?x420))) (ite $x207 (concat bv0[7] (extract[31:7] (bvsub ?x371 ?x420))) ?x493)))
(let (?x505 (ite $x224 (concat bv0[4] (extract[31:4] (bvsub ?x371 ?x420))) (ite $x219 (concat bv0[5] (extract[31:5] (bvsub ?x371 ?x420))) ?x499)))
(let (?x511 (ite $x236 (concat bv0[2] (extract[31:2] (bvsub ?x371 ?x420))) (ite $x230 (concat bv0[3] (extract[31:3] (bvsub ?x371 ?x420))) ?x505)))
(let (?x421 (bvsub ?x371 ?x420))
(let (?x516 (bvadd (ite $x243 ?x421 (ite $x241 (concat bv0[1] (extract[31:1] ?x421)) ?x511)) ?x420))
(let (?x524 (ite (= bv3[32] bv30[32]) (concat bv0[30] (extract[31:30] ?x516)) (ite (= bv3[32] bv31[32]) (concat bv0[31] (extract[31:31] ?x516)) bv0[32])))
(let (?x532 (ite (= bv3[32] bv28[32]) (concat bv0[28] (extract[31:28] ?x516)) (ite (= bv3[32] bv29[32]) (concat bv0[29] (extract[31:29] ?x516)) ?x524)))
(let (?x540 (ite (= bv3[32] bv26[32]) (concat bv0[26] (extract[31:26] ?x516)) (ite (= bv3[32] bv27[32]) (concat bv0[27] (extract[31:27] ?x516)) ?x532)))
(let (?x548 (ite (= bv3[32] bv24[32]) (concat bv0[24] (extract[31:24] ?x516)) (ite (= bv3[32] bv25[32]) (concat bv0[25] (extract[31:25] ?x516)) ?x540)))
(let (?x556 (ite (= bv3[32] bv22[32]) (concat bv0[22] (extract[31:22] ?x516)) (ite (= bv3[32] bv23[32]) (concat bv0[23] (extract[31:23] ?x516)) ?x548)))
(let (?x564 (ite (= bv3[32] bv20[32]) (concat bv0[20] (extract[31:20] ?x516)) (ite (= bv3[32] bv21[32]) (concat bv0[21] (extract[31:21] ?x516)) ?x556)))
(let (?x572 (ite (= bv3[32] bv18[32]) (concat bv0[18] (extract[31:18] ?x516)) (ite (= bv3[32] bv19[32]) (concat bv0[19] (extract[31:19] ?x516)) ?x564)))
(let (?x580 (ite (= bv3[32] bv16[32]) (concat bv0[16] (extract[31:16] ?x516)) (ite (= bv3[32] bv17[32]) (concat bv0[17] (extract[31:17] ?x516)) ?x572)))
(let (?x588 (ite (= bv3[32] bv14[32]) (concat bv0[14] (extract[31:14] ?x516)) (ite (= bv3[32] bv15[32]) (concat bv0[15] (extract[31:15] ?x516)) ?x580)))
(let (?x596 (ite (= bv3[32] bv12[32]) (concat bv0[12] (extract[31:12] ?x516)) (ite (= bv3[32] bv13[32]) (concat bv0[13] (extract[31:13] ?x516)) ?x588)))
(let (?x604 (ite (= bv3[32] bv10[32]) (concat bv0[10] (extract[31:10] ?x516)) (ite (= bv3[32] bv11[32]) (concat bv0[11] (extract[31:11] ?x516)) ?x596)))
(let (?x612 (ite (= bv3[32] bv8[32]) (concat bv0[8] (extract[31:8] ?x516)) (ite (= bv3[32] bv9[32]) (concat bv0[9] (extract[31:9] ?x516)) ?x604)))
(let (?x620 (ite (= bv3[32] bv6[32]) (concat bv0[6] (extract[31:6] ?x516)) (ite (= bv3[32] bv7[32]) (concat bv0[7] (extract[31:7] ?x516)) ?x612)))
(let (?x628 (ite (= bv3[32] bv4[32]) (concat bv0[4] (extract[31:4] ?x516)) (ite (= bv3[32] bv5[32]) (concat bv0[5] (extract[31:5] ?x516)) ?x620)))
(let (?x636 (ite (= bv3[32] bv2[32]) (concat bv0[2] (extract[31:2] ?x516)) (ite (= bv3[32] bv3[32]) (concat bv0[3] (extract[31:3] ?x516)) ?x628)))
(let (?x642 (ite (= bv3[32] bv0[32]) ?x516 (ite (= bv3[32] bv1[32]) (concat bv0[1] (extract[31:1] ?x516)) ?x636)))
(let (?x648 (bvsub ?x371 (bvadd (concat (extract[28:0] ?x642) bv0[3]) (concat (extract[30:0] ?x642) bv0[1]))))
(= bv253[8] (extract[7:0] ?x648))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))
:assumption
(let (?x13 (concat (select arr51 bv58[32]) (concat (select arr51 bv57[32]) (select arr51 bv56[32]))))
(let (?x16 (concat (select arr51 bv59[32]) ?x13))
(not (= bv4294967295[32] ?x16))))
:assumption
(let (?x13 (concat (select arr51 bv58[32]) (concat (select arr51 bv57[32]) (select arr51 bv56[32]))))
(let (?x16 (concat (select arr51 bv59[32]) ?x13))
(bvule bv100000[32] ?x16)))
:assumption
(let (?x13 (concat (select arr51 bv58[32]) (concat (select arr51 bv57[32]) (select arr51 bv56[32]))))
(let (?x16 (concat (select arr51 bv59[32]) ?x13))
(bvule ?x16 bv999999[32])))
:assumption
(let (?x13 (concat (select arr51 bv58[32]) (concat (select arr51 bv57[32]) (select arr51 bv56[32]))))
(let (?x16 (concat (select arr51 bv59[32]) ?x13))
(let (?x17 (sign_extend[32] ?x16))
(bvsle bv0[64] ?x17))))
:formula
true
) 
```

我已经尝试明确设置随机种子，但这（不出所料）没有帮助：

```
Z3_set_param_value(z3_config, "ARITH_RANDOM_SEED", "0");
Z3_set_param_value(z3_config, "RANDOM_SEED", "0"); 
```

Z3仅仅通过更改符号名称就显示出如此显着的时序变化是否正常？

此外，是否有任何数组命名方案可以全面减少求解器时间？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T00:39:15.480

我们在包含以下形式的表达式的基准中观察到这种差异

*   `(bvadd t_1 ... t_n)`， 或者
*   `(bvmul t_1 ... t_n)`

基准可能未明确包含此类术语。例如，该术语`(bvadd a (bvsub b (bvadd c d))`被简化为一个整数。

在许多情况下，术语`t_i`s 的顺序对性能有显着影响。变量名称影响这些术语的顺序。Z3 有两个公式简化器。

旧的（位于`src/ast/simplifier`）使用与每个表达式关联的内部 id 对 AC 运算符的参数进行排序。这种方法不受名称更改的影响，但它有另一个令人讨厌的副作用：我们创建表达式的顺序会影响内部 id 分配，从而影响术语的顺序`t_i`。这是许多 Z3 应用程序中的一个问题。

新的简化器（位于`src/ast/rewriter`）使用不同的方法。它根据表达式的结构使用总顺序对表达式进行排序。在这种新方法中，我们创建表达式的顺序无关紧要，但名称很重要。新代码使用这个新的公式简化器。但是，我们仍然有使用旧简化器的旧代码。

对于`QF_AUFBV`基准，使用了两个公式简化器。在我们用新的简化器替换所有出现的旧简化器之后，这将在未来发生变化。

最后，如果您可以向我们发送您遇到性能问题的一组基准测试，那就太好了。这将有助于我们改进 Z3。

**编辑**

我想强调一下，主要问题是表单表达式的出现`(bvadd t_1 ... t_n)`。其次，对于`QF_AUFBV`基准测试，两个简化器都被使用。在当前版本中，很难避免这种时序波动。例如，如果我们重新排序假设，我们还应该观察时间波动。

这是对您的实例中发生的情况的描述，以及名称影响行为的原因。这有点技术性，但它应该澄清正在发生的事情。

1-执行新的简化器。这个简化器使用哈希表缓存中间结果。AST 的哈希码取决于用于常量和函数符号的名称。

2-新的简化器完成后，缓存被删除。我们遍历存储在缓存中的 AST 并减少它们的引用计数器。如果计数器为零，则删除 AST。重要提示：哈希表中 AST 的顺序取决于它们的哈希码。因此，哈希码（以及名称）可能会影响删除 AST 的顺序。

3- Z3 中的 AST 管理器为每个 AST 节点分配一个内部 ID。当一个 AST 节点被删除时，它的 ID 会被回收。也就是说，可以将 ID 分配给新的 AST 节点。我们这样做是因为我们不想用完 ID。

4- 当旧的简化器被执行时，它会创建新的 AST，并将回收的 ID 分配给这些新的 AST。

5- 由于旧的简化器使用 ID 对 的参数进行排序`bvadd`，因此当我们更改变量的名称时，我们可以获得不同的顺序。

概括

不同的名称 ==> 不同的哈希 ==> 哈希表中的不同顺序 ==> 不同的删除顺序 ==> 回收的 ID 以不同的顺序重复使用 ==> 具有不同 ID 的新 AST ==> 影响旧简化器如何对参数进行排序的`bvadd`

# asp.net-mvc - 在 asp.net mvc 视图上生成本地资源失败？

> ID：15619594
> 
> 赞同：0
> 
> 时间：2013-03-25T16:13:07.330
> 
> 标签：asp.net-mvc, visual-studio, localization, resources

尝试使用 Visual Studio 2010、MVC 4 本地化现有的大型 MVC 网站。

如果我将视图切换到设计视图，然后选择工具 -> 生成本地资源，则没有任何 html 文本被推送到资源文件，我得到的只是一个 app_localresources/pagename.aspx.resx 文件，其中包含一个无用的条目：

```
 <data name="PageResource1.Title" xml:space="preserve">
     <value>&lt;asp:ContentPlaceHolder ID="TitleContent" runat="server" /&gt;</value>
 </data> 
```

是否有我缺少的设置阻止它工作？

还是我们必须手动从这个现有的大型 mvc 网站中手动删除所有 html 文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:01:31.520

在进行了一些谷歌搜索之后，用于生成本地资源的 VS 工具似乎只在实际的 web 表单 .net 控件上运行，并且忽略了所有其他 aspx 代码和 html 文本，因此对于 MVC 应用程序来说它非常没用。

我们将采用不同的路线，即为所有视图文件的副本创建一个单独的文件夹，并让应用程序在运行时根据用户选择的文化切换视图路径。

我们将把整个单独的视图页面文件夹交给翻译人员，希望他们不要把 aspx 代码搞砸太多。O_o 然后文件将返回给设计人员以修复布局。o_o

否则，将所有字符串剥离到资源文件中需要数周时间，然后翻译人员将无法获得他们正在翻译的内容的上下文，并且设计人员会适应，因为布局会被搞砸。

# iphone - 即使设置了核心数据关系也没有保存

> ID：15619597
> 
> 赞同：3
> 
> 时间：2013-03-25T16:13:18.257
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext, save

对于在保存之前设置的实体，我有一个强制`genericCall`关系。日志显示不是 nil，但在尝试保存托管对象上下文时出现验证错误，说明未设置关系。`PlaylistCall``PlaylistCall``genericCall`

什么可能导致在保存期间已经设置为 nil 的关系？

我已验证或尝试的内容：

*   我使用共享单例作为整个应用程序的托管对象上下文，因此我肯定在同一个托管对象上下文中工作
*   `GenericCall`和之间存在反比关系`PlaylistCall`
*   一时兴起，我尝试删除该关系，然后重新创建它，但这并没有起到任何作用，所以它看起来像是我的代码中的一个错误，而不是 Xcode 中的一个随机错误
*   我尝试使用`setValue:forKey`而不是动态属性访问器（点表示法）没有变化

以下是日志：

```
2013-03-25 11:48:35.400 Project[30599:c07] Supposed to add <PlaylistCall: 0xa1be450> (entity: PlaylistCall; id: 0xa17dea0 <x-coredata:///PlaylistCall/tBB209BC5-EF9A-4DAE-9A55-0001B97499392> ; data: {
    delaySetting = 0;
    genericCall = "0xd4ad520 <x-coredata://7EB1AFB2-7B49-431E-9700-275307B4D1C1/GenericCall/p367>";
    orderInTable = 4;
    playlist = nil;
    repeatSetting = 0;
    repeatType = 0;
    volumeSetting = 100;
}) with generic call <GenericCall: 0xd4c3fd0> (entity: GenericCall; id: 0xd4ad520 <x-coredata://7EB1AFB2-7B49-431E-9700-275307B4D1C1/GenericCall/p367> ; data: {
    animalCategory = "0xc0aaa80 <x-coredata://7EB1AFB2-7B49-431E-9700-275307B4D1C1/AnimalCategory/p19>";
    callDescription = "Call Name";
    numberOfTimesOnPlaylist = 0;
    numberOfTimesPlayed = 0;
    playlistCall = "0xa17dea0 <x-coredata:///PlaylistCall/tBB209BC5-EF9A-4DAE-9A55-0001B97499392>";
    soundFile = "sound_file_name";
    timeLength = "0.21";
})
2013-03-25 11:48:35.402 Project[30599:c07] Error saving.  Reason(s): 
    PlaylistCall: The attribute 'genericCall' cannot be empty. 
```

这是我设置和保存值的方式：

```
GenericCall *genericCall = [self.fetchedResultsController objectAtIndexPath:indexPath];
PlaylistCall *playlistCall = (PlaylistCall *)[NSEntityDescription insertNewObjectForEntityForName:@"PlaylistCall" inManagedObjectContext:commonContext.managedObjectContext];
[self.playlist addPlaylistCall:playlistCall withGenericCall:genericCall orderInTable:[self.playlist.playlistCalls count]];
// Note: all other attributes are setup via model defaults
[commonContext save]; 
```

我设置关系的 NSManagedObject 子类`Playlist`：

```
- (void)addPlaylistCall:(PlaylistCall *)playlistCall withGenericCall:(GenericCall *)genericCall orderInTable:(int)orderInTable
{
    NSMutableOrderedSet *tempSet = [NSMutableOrderedSet orderedSetWithOrderedSet:self.playlistCalls];
    playlistCall.genericCall = genericCall;
    playlistCall.orderInTable = [NSNumber numberWithInt:orderInTable];
    NSLog(@"Supposed to add %@ with generic call %@", playlistCall, playlistCall.genericCall);
    [tempSet addObject:playlistCall];
    self.playlistCalls = tempSet;
} 
```

我的通用托管对象上下文单例 ( `CommonContext`) 看起来像这样（是的，我已经验证了`self.managedObjectContext`不是 nil 并且不会更改）：

```
// Saves the managed object context
- (BOOL)save
{
    NSError *anError;
    if ([self.managedObjectContext hasChanges] && ![self.managedObjectContext save:&anError]){
        [self handleSaveError:anError];
        return NO;
    } else {
        return YES;
    }
} 
```

关于我可能做错的任何想法？这看起来很简单，我在我的应用程序的其他任何地方都使用相同的方法来设置关系，所以我必须缺少一些东西。谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:37:41.040

很难确定，但这里有一个符合症状的场景：

1.  `GenericCall`在创建新的`PlaylistCall`. 但这`GenericCall` *已经具有*非`nil`价值 for `playlistCall`。
2.  您`playlistCall.genericCall = genericCall`使用新的`PlaylistCall`.
3.  已经存在的`PlaylistCall`实例将其`genericCall`关系设置为`nil`-- 因为这是一对一的关系，这是本例中的默认行为。
4.  保存失败——不是因为`PlaylistCall`你创建了新的，这很好，而是因为前一个`PlaylistCall`留下了悬空`genericCall`关系。

如果发生这种情况，您需要检查现有的`playlistCall`并在保存更改之前对其进行合理的处理 - 很可能将其重新分配`genericCall`为指向其他内容，或者可能只是删除实例。

# networking - 如何测试网络监控？

> ID：15619599
> 
> 赞同：0
> 
> 时间：2013-03-25T16:13:31.093
> 
> 标签：networking, network-programming, cluster-computing, network-monitoring

我目前正在构建一个网络监控系统，如果有任何接口错误或网络问题，它将通知我。在构建它之后，我们希望能够在将它实施到我们的网络之前测试它是否工作，因此需要一种模拟交换机或网络设备上的网络接口错误的方法？

我正在考虑切断以太网电缆或错误地端接它们，但理想情况下，我需要能够产生大量不同类型接口错误的东西

任何帮助将非常感激

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:44:22.027

模拟网络故障的方法之一是动态更改防火墙设置。您可以使数据包丢失、托管、消失等。这不需要对任何东西造成任何物理损坏:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:59:32.857

You could download Nagios which is a powerful, enterprise-class host, service, application, and network monitoring program. Designed to be fast, flexible, and rock-solid stable. Nagios runs on *NIX hosts and can monitor Windows, Linux/Unix/BSD, Netware, and network devices.

you can download other network monitoring systems from [sourceforge](http://sourceforge.net/directory/?q=network%20monitor) they have many different network tools written in different languages most of them are open source. you can take notes of their design and maybe add to the application you building.

if you want to test your application the best thing to do is to tested on real environment, I believe their might be one or two Virtual Lab.

But Ideally I would tested on real interfaces

# excel - 在 excel 中表示负百分比而不是 0.0%

> ID：15619600
> 
> 赞同：0
> 
> 时间：2013-03-25T16:13:32.737
> 
> 标签：excel, math, statistics, operators, excel-formula

如何在excel中显示负百分比？

我需要找到最坏的情况。

**电流输入**

```
if A = 15/19   = 78.9%
   B = 162/268 = 60.4%
   C = 0/5     = 0.0%
   D = 0/90    = 0.0% 
```

**需要输出。**
供参考`numerator and divisor is coming from another cell`

```
if A = 15/19   = 78.9%
   B = 162/268 = 60.4%
   C = 0/5     = -5.0%
   D = 0/90    = -90% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:18:30.520

我无法理解您的问题，但您只会得到一个负百分比，其中分子或分母之一低于零：

```
0/5 = 0%
5/5 = 100%
-5/5 = -100%
5/-5 = -100% 
```

如果您假设我们在这里讨论的是员工，比较分配的任务数量与完成的任务数量，并且您想以不同的方式判断两名员工，即使他们都没有完成任何事情，您将不得不使用除百分比之外的其他东西。

在您的示例中，您暗示 0/5 与 0/90 不同，但这**也**意味着完成 10/20 任务（50％）的人应该与完成 200/400 任务（也是 50％）的人不同。

你可以做的一些事情是给每个员工一些价值，比如他们完成的每项任务都得到 2 分，而他们没有完成的每项任务都减去 3 分。

```
A = (15 *2) - (4  *3) =   18 points
B = (162*2) - (106*3) =    6 points
C = (0  *2) - (5  *3) =  -15 points
D = (0  *2) - (90 *3) = -270 points 
```

这里的问题是你需要决定权重，正如评论所指出的那样，这个权重会给完成 200/400 任务的人比完成 10/20 任务的人更少的分数。看起来您已经决定使用修改后的“百分比”值，因此进一步的论点没有实际意义，但必须根据数字背后的含义来确定权重。

我将在下面给出一个替代方案，其中完成一项任务给予 3 分，而未能完成一项任务则减去 2 分：

```
A = (15 *3) - (4  *2) =   37 points
B = (162*3) - (106*2) =  274 points
C = (0  *3) - (5  *2) =  -10 points
D = (0  *3) - (90 *2) = -180 points 
```

我可能考虑的另一个指标是取所有 205 个未完成的任务，并根据每个用户有多少未完成的任务分配百分比：

```
A =   4 / 205 =   1.9%
B = 106 / 205 =  51.7%
C =   5 / 205 =   2.4%
D =  90 / 205 =  43.9% 
```

在这种情况下，您将对未能完成未完成任务池中最大百分比的人进行排名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:59:43.120

这就是我最终做的

细胞`A1 = 0.0%`

然后我做了以下使用 if else 条件。

**输出**
![输出](../Images/64f81e8b58690599b3d0cdda1149f6fa.png)

D2 中的公式

```
=IF(IFERROR(C2/B2,"")=$A$1,-B2*0.01,IFERROR(C2/B2,"")) 
```

![在此处输入图像描述](../Images/b8b9fed46e004b2161c38e8197fccb34.png)

希望它会帮助别人

# rest - 使 jquery AJAX POST 到 resful API

> ID：15619603
> 
> 赞同：3
> 
> 时间：2013-03-25T16:13:34.583
> 
> 标签：rest, jquery

我正在尝试将使用 Cordova 插件的 REST 调用转换为 JQuery AJAX POST。我没有正确的 JQuery 代码，调用出现连接被拒绝错误（命中 localhost）。我已成功向本地主机发出 GET 请求，因此不存在连接问题。

REST API 代码：

```
@Path("/track")
public class TrackResource {  
   ... 
```

我试图命中的 TrackResource 类中的方法：

```
@POST
@Path("{trackid}")
@Consumes("application/json")
@Produces("application/json")
public Response addToResource(@PathParam("trackid") String trackid, String bodyJson) { 
```

AJAX 代码：

```
var trackingJSON = JSON.stringify(tracking_data);
var urlAjax =  "http://localhost:7001/ds/resources/track/" + trackid;

$.ajax({
    type: "POST",
    url: urlAjax,
    data: trackingJSON,
    beforeSend: function() { $.mobile.showPageLoadingMsg("b", "Loading...", true) },
    complete: function() { $.mobile.hidePageLoadingMsg() },
    success: function(data) { alert("ajax worked"); },
    error: function(data) {alert("ajax error"); },
    dataType: 'json'
}); 
```

我不确定我是否在 ajax 调用中正确使用了 data 选项，但我的理解是，您可以将要传递的数据放在服务器端。

我确实对同一个 TrackResource 类有其他 GET 调用，所以我知道 URL 的基本部分是正确的。我知道 trackid 值也正确填充。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:19:16.910

如果您要发布 JSON 字符串，请确保您还设置了`contentType: "application/json"`.

```
var trackingJSON = JSON.stringify(tracking_data);
var urlAjax =  "http://localhost:7001/ds/resources/track/" + trackid;

$.ajax({
    type: "POST",
    url: urlAjax,
    contentType: "application/json",
    data: trackingJSON,
    beforeSend: function() { $.mobile.showPageLoadingMsg("b", "Loading...", true) },
    complete: function() { $.mobile.hidePageLoadingMsg() },
    success: function(data) { alert("ajax worked"); },
    error: function(data) {alert("ajax error"); },
    dataType: 'json'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:14:43.167

我需要使用我的计算机的路由器地址 192 .... 才能访问我的本地主机...我在实际的 Android 设备上运行该应用程序，但是，我想尝试使用本地主机或 127.0.0.1 AJAX 调用一定是引起了问题。

# .htaccess - 我可以将旧 URL 从旧 CDN 重定向到新 CDN 吗？

> ID：15619616
> 
> 赞同：0
> 
> 时间：2013-03-25T16:14:07.930
> 
> 标签：.htaccess, redirect, cdn, shopify

我目前有一个使用 Shopify 的网站设置。我们聘请了一家网络开发公司的服务来为我们建立一个新网站来取代我们的 Shopify 网站。

Shopify 网站包含 MP3 下载。这些直接链接到我们已经分发给客户的 PDF。Shopify 已在内容交付网络上自动托管这些文件。这些 URL 看起来像这样[http://cdn.shopify.com/s/files/1/0058/7082/files/c_semi.mp3?316](http://cdn.shopify.com/s/files/1/0058/7082/files/c_semi.mp3?316)。

当我们托管我们的新网站时，我们将获得一个新的 CDN，作为我们新托管公司的软件包的一部分。

我们将能够在此服务器上编写一个 .htaccess 文件，因此我将使用 301 重定向重定向我们所有的标准页面 URL。

所以我的问题是，托管在我们 Shopify CDN 上的文件呢？它们直接从其他媒体链接到，因此 URL 需要保持不变。

如何将带有 Shopify URL（例如[http://cdn.shopify.com/s/files/1/0058/7082/files/c_semi.mp3?316](http://cdn.shopify.com/s/files/1/0058/7082/files/c_semi.mp3?316) ）的文件重定向到我们新网站上的替代位置？

在此先感谢-SWD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:17:44.463

我想你会发现，一旦你的 shopify 商店关门了；我假设您将在其他网站准备好上线时执行此操作，您的数据将被删除，包括 CDN 数据。

您可能需要通过 shopify 商店重定向（保持开放一段时间）

或者

找不到时使用谷歌网站管理员工具重定向网址。

# performance - HDFS 序列文件性能调优

> ID：15619620
> 
> 赞同：1
> 
> 时间：2013-03-25T16:14:14.447
> 
> 标签：performance, hadoop, hdfs, sequencefile

我正在尝试使用 Hadoop 处理大量存储在**序列文件中的小文件**。我的程序是**高度 IO 绑定的**，所以我想确保 IO 吞吐量足够高。

我编写了一个 MR 程序，它从序列文件中读取小样本文件并将这些文件写入**ram 磁盘**(/dev/shm/test/)。还有另一个独立程序可以删除写入 ram 磁盘的文件而无需任何计算。所以测试应该几乎是**纯 IO 绑定的**。但是，IO 吞吐量并没有我想象的那么好。

我有 5 个数据节点，每个数据节点有 5 个数据磁盘。每个磁盘可以提供大约 100MB/s 的吞吐量。理论上这个集群应该能够提供 100MB/s * 5（磁盘）* 5（机器）= 2500MB/s。但是，我只能得到大约 600MB/s。我在5台机器上运行**“iostat -d -x 1”**，发现**IO负载不均衡**。通常只有少数磁盘具有 100% 的利用率，一些磁盘的利用率非常低（10% 或更少）。有些机器有时甚至没有 IO 加载。这是屏幕截图。（当然每个磁盘/机器的负载变化很快）

![磁盘利用率](../Images/ab40898dcd6396fb2e05e89128ebee89.png)

这是另一个屏幕截图，显示了**“top -cd1”**命令的 CPU 使用情况： ![CPU使用率](../Images/fa9bd9d6f8b5c14c011cd744b58d4d14.png)

这是关于我的案例的一些更详细的配置：

Hadoop 集群硬件：5 台 Dell R620 机器，配备 128GB 内存和 32 核 CPU（实际上是 2 台 Xeon E5-2650）。2 HDD 由一个用于 CentOS 的 RAID 1 磁盘和 5 个用于 HDFS 的数据磁盘组成。所以你可以在上面的截图中看到 6 个磁盘。

Hadoop设置：块大小128MB；数据节点处理程序计数为 8；每个任务跟踪器 15 个地图；2GB Map减少子堆进程。

测试文件集：约40万个小文件，总大小320GB。存储在 160 个序列文件中，每个 seq 文件大小约为 2GB。我尝试将所有文​​件存储在许多不同大小的 seq 文件中（1GB、512MB、256MB、128MB），但性能并没有太大变化。

我不会期望整个系统可以有 100% 的 IO 吞吐量（2500MB/s），但我认为**40%（1000MB/s）**或更多应该是合理的。谁能提供一些性能调整指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:59:20.603

我自己解决了这个问题。提示：高 CPU 使用率。CPU使用率如此之高是非常不正常的，因为它几乎是一个纯粹的IO工作。根本原因是每个任务节点获得大约 500 个映射，每个映射只使用一个 JVM。默认情况下，hadoop map reduce 配置为为新映射创建新的 JVM。

解决方案：将“mapred.job.reuse.jvm.num.tasks”的值从1修改为-1，表示JVM将被无限制地重用。

# android - 我无法让 Mono for Android 活动首选项正常工作

> ID：15619621
> 
> 赞同：0
> 
> 时间：2013-03-25T16:14:16.690
> 
> 标签：android, android-activity, xamarin.android, sharedpreferences, android-preferences

在我的 mono for android 应用程序中，我想将活动的用户设置保存到活动首选项中。每当用户更改此值时，我都会这样做：

```
ISharedPreferences prefs = GetPreferences(FileCreationMode.Append);
        ISharedPreferencesEditor editor = prefs.Edit();
        editor.PutInt(NO_PIXELS_PER_HOUR_KEY, m_noPixelsPerHour);
        editor.Commit(); 
```

其中 NO_PIXELS_PER_HOUR_KEY 是：

```
private const string NO_PIXELS_PER_HOUR_KEY = "PIXELS_PER_HOUR"; 
```

然后应该在活动的 OnCreate 方法中再次加载该值：

```
ISharedPreferences preferences = GetPreferences(FileCreationMode.Append); 
int tempNoPixelsPerHour = preferences.GetInt(NO_PIXELS_PER_HOUR_KEY, -1);
        if (tempNoPixelsPerHour == -1)
            m_noPixelsPerHour = (int)(m_deviceHeight * 0.25);
        else
            m_noPixelsPerHour = tempNoPixelsPerHour; 
```

问题是该值似乎没有持续存在！每当我退出活动并返回活动时，都会返回默认值 -1。我不知道它是否没有正确保存或没有正确加载。任何帮助，将不胜感激！谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:38:48.027

我不知道用于 android 的 mono，但在 android 中，我们在 java 中调用 getsharedpreferences()。在这里，您只调用可以是任何首选项但设置首选项的首选项。您可以尝试诸如 getdefaultsharedpreference 之类的东西。

编辑：我不确定，但你可以试试这个..

```
ISharedPreferences _preferences = PreferenceManager.GetDefaultSharedPreferences(your_context) 
```

# java - 使用 JTable 的 Nimbus 外观

> ID：15619626
> 
> 赞同：1
> 
> 时间：2013-03-25T16:14:25.657
> 
> 标签：java, swing, jtable, look-and-feel, nimbus

我正在制作下载管理器，并且正在使用`JTable`. 为了`JTable`显示`JProgressbar`当我应用 nimbus 外观时我正在使用表格单元格渲染器，由于表格单元格渲染器，我的程序给出了异常但没有单元格渲染器表格，并且外观和感觉运行良好。

我的表格单元格渲染器代码是：

```
public class TableRender implements TableCellRenderer {    
    @Override
    public Component getTableCellRendererComponent(JTable table, 
        Object value, boolean isSelected, boolean hasFocus, 
        int row, int column) {

        return (JProgressBar) value;
    }        
} 
```

对于 Nimbus 的外观和感觉是：

```
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (ClassNotFoundException | InstantiationException | IllegalAccessException
    | UnsupportedLookAndFeelException e) {
    // If Nimbus is not available, you can set the GUI to another look and feel.
} 
```

# javascript - Javascript函数不会激活onClick

> ID：15619627
> 
> 赞同：0
> 
> 时间：2013-03-25T16:14:47.853
> 
> 标签：javascript, function, onclick

在我的页面标题中：

```
<script>
function formula()
{
    document.forms["inquire"]["search"].value.scrollIntoView();
}
</script> 
```

在我的页面正文中：

```
<div id="nav">
<form id="inquire" name="inquire" onSubmit="return false;">
Search or inquire here: <input type="text" id="search" name="search" value="<?php search($_GET['search']) ?>" autocomplete="off"/>
<input type="button" name="btnSearch" id="btnSearch" onClick="formula();"/>
</form>
</div> 
```

我想在这里发生的是，当单击*btnSearch*时，它会激活*formula()*，从表单中的查询中*获取**值*，然后滚动到我称为*formula*的单独 div 中的值。如果我把**document.getElementById(this.form.search.value).scrollIntoView();** 直接进入*btnSearch的**onClick*，但是无论我如何将其设置为函数，它都拒绝工作。这里有谁知道它为什么会这样做，或者我该如何解决？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:16:59.737

它不起作用，因为您的功能错误：

```
function formula() {
  document.getElementById(document.forms.inquire.search.value).scrollIntoView();
} 
```

该代码获取搜索字段的值并将其用于“id”查找。检查是否确实有一个“id”，其中输入的值可能是一个好主意：

```
function formula() {
  var element = document.getElementById(document.forms.inquire.search.value);

  if (element) element.scrollIntoView();
} 
```*

# java - scjp 测试中的正则表达式测试

> ID：15619629
> 
> 赞同：3
> 
> 时间：2013-03-25T16:14:58.043
> 
> 标签：java, regex

我正在尝试解决有关正则表达式的 scjp 测试。

这是一个代码...

```
import java.util.regex.*;

public class TestRegex {
    public static void main(String[] args) {
        Pattern p = Pattern.compile(args[0]);
        Matcher m = p.matcher(args[1]);
        boolean b = false;
        while (b = m.find()) {
            System.out.print(m.start() + m.group());
        }
    }
} 
```

和

```
java TestRegex "\d*" ab34ef 
```

这个测试的答案是`01234456`。除了最后一个输出（6）之外，我理解了所有内容。由于“ab34ef”中的最后一个索引是 5，怎么可能打印 6 ？

任何帮助....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:18:46.843

`\d*`意思是“零个或多个数字”，实际上什么都不匹配。6 是匹配字符串中最后一个字符之后的空字符串。

# jquery - 无法使用自定义选择事件处理程序更改选择菜单的选项

> ID：15619631
> 
> 赞同：0
> 
> 时间：2013-03-25T16:15:04.050
> 
> 标签：jquery, drop-down-menu, clone, select-menu

在下面的调用函数`onSelectEvent:`中负责处理和切换选项。我正在尝试通过此变量获取选项值，但调用函数中的此变量冻结了选择菜单的选项。

```
jQuery(document).ready(function($){     
    var selectEvent = function($el){
        $(".selectmenu").change(function() {
            var selectedValue = $("select.selectmenu").val(); 
            alert('Selected event' + selectEvent);
        });
    };
    $(".selectmenu").scrollectBox({                           
        preset: 'dropdown',
        numVisibleOptions: 4,
        scrollInterval: 150, 
        scrollOn: 'hover',
        listWidth: 160,
        onSelectEvent: selectEvent  
   });
}); 
```

代码可能是错误的，但我怎样才能正确地编写类似的语法。

谢谢，

**编辑：**

插件网址：

[https://github.com/afEkenholm/ScrollectBox](https://github.com/afEkenholm/ScrollectBox)

[https://github.com/afEkenholm/ScrollectBox/blob/master/index.html](https://github.com/afEkenholm/ScrollectBox/blob/master/index.html)

[https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js](https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js)

```
<div id = "translate">
     <select onchange="Translate(this)" name="select" id="translator" class="selectmenu" >
     <option value="Select Language">Select Language</option>
     <option value="en|af">Afrikaans</option>
     <option value="en|sq">Albanian</option>
     </select>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:31:27.703

尝试这个：

```
var selectEvent = function($el){
     console.log($el);
     var selectedValue = $el.html(); 
     alert(selectedValue);return false;
}; 
```

或者如果你想要`change event`那么试试

```
var selectEvent = function($el){
    console.log($el);
    $el.change(function() {
        var selectedValue = $(this).html(); 
        alert('Selected value' + selectedValue);// I think its value not event
    });
}; 
```

# ios - 如何使带有 AVCaptureVideoPreviewLayer 的 UIView 看起来更好？

> ID：15619632
> 
> 赞同：1
> 
> 时间：2013-03-25T16:15:11.367
> 
> 标签：ios, objective-c, uiview, avfoundation, calayer

我正在尝试构建 UIView 的子类以使用 AVFoundation 快速拍摄一个快照。它工作得很好，但我真的很想让角落变圆或添加一点阴影。如何使用 Core Graphics 等来实现这一点？

GitHub：[https ://github.com/dariolass/QuickShotView](https://github.com/dariolass/QuickShotView)

**更新：**结果如下：

[http://www.bytolution.com/qsv.png](http://www.bytolution.com/qsv.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:30:04.320

使用 QuartzCore

```
#import <QuartzCore/QuartzCore.h> 
```

然后你可以修改你的视图层：

```
someView.layer.cornerRadius = 8;
someView.layer.shadowOffset = CGSizeMake(-15, 20);
someView.layer.shadowRadius = 5;
someView.layer.shadowOpacity = 0.5; 
```

或类似的东西

# database - 对于具有大 blob 和数据冗余的非同质对象，我应该使用哪个数据库？

> ID：15619637
> 
> 赞同：1
> 
> 时间：2013-03-25T16:15:24.403
> 
> 标签：database, database-design, nosql

我正在研究存储迄今为止我一直存储在数据库中的单个文件中的数据。我正在寻找一些建议，我应该使用哪个数据库或数据库类型。以下是要求列表：

*   我需要能够以分层/面向对象的方式存储数据，即有像 car.chassis.color = red 这样的键，键上有任意深度。
*   这些对象的结构不是同质的，有些对象具有其他对象没有的字段。
*   我希望能够对键执行查询，但我不需要进行连接的能力，即不需要外键。
*   其中一些值是大型二进制 blob（大约 10-100MB，从不大于 1GB），并且存在大量冗余，因此内置压缩会很好。
*   寻找开源解决方案。
*   我想从 python 中使用它。

除了最基本的 MySQL 数据库之外，我对任何东西都不熟悉，所以任何指针都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:54:32.150

听起来像文档数据库会满足您的需求。我会研究的两个是 MongoDB 和 CouchDB（可能也是 Couchbase）。

Couch 和 Mongo 都允许将数据存储为 JSON，这可以满足您对具有任意深度键的数据的要求。

这两个数据库还允许您插入异构文档。Mongo 特别有一个名为 $exists 的运算符来检查给定文档中是否存在字段。

我会在 Couch 上向 Mongo 点头以进行临时查询。我只是觉得更容易。

两者都不能很好地支持连接。两者都可以使用 map/reduce 功能，但否则假设您不会进行连接。

两者都支持添加文件。Mongo 使用 gridfs ( [http://docs.mongodb.org/manual/applications/gridfs/](http://docs.mongodb.org/manual/applications/gridfs/) ) 而 Couch 使用附件 ( [http://wiki.apache.org/couchdb/HTTP_Document_API#Attachments](http://wiki.apache.org/couchdb/HTTP_Document_API#Attachments) )。

Mongo 有一个 Python 驱动程序（[http://docs.mongodb.org/ecosystem/drivers/python/），Couch](http://docs.mongodb.org/ecosystem/drivers/python/)通过 HTTP 工作，所以你只需要 Python 中的 curl 之类的东西。

CouchDB 最近受到了很多关注，但 Mongo 现在更有动力。

# string - 可以通过引用操作连接到字符串的var吗

> ID：15619639
> 
> 赞同：0
> 
> 时间：2013-03-25T16:15:32.710
> 
> 标签：string, perl, reference, concatenation

我需要用连接到变量的固定文本初始化一个字符串，如下所示：

```
 my $id = 0;
   my $text ="This is an example, id: ".$id."\n"; 
```

现在，在 0->9 的想象循环中，我只想修改`$id`值而不更改固定文本。我猜想使用引用应该像这样工作

```
for($i = 0; $i < 9; $i++) {
    my $rid = \$id;
    ${$rid}++;
    print $text;
} 
```

想要的输出是

```
This is an example, id: 0
This is an example, id: 1
This is an example, id: 2 
```

等等......但它不工作。

我误解了参考系统吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:41:20.173

您误解了参考系统。

和

```
my $id = 0;
my $text ="This is an example, id: ".$id."\n"; 
```

该文本在该点与 id 的值连接，在本例中为 0。该文本失去了与变量 $id 的所有连接。然后在循环中

```
for($i = 0; $i < 9; $i++) {
    my $rid = \$id;
    ${$rid}++;
    print $text;
} 
```

您正在使用( 其中 in 成为at的另一个名称来增加`$id`变量， 但这对文本没有影响，因为它没有对变量的引用。`$rid``$id``my $rid = \$id;``$id`

做你想做的最干净的方法是使用闭包

```
my $id = 0;
my $textfunc = sub { return "This is an example, id: ".$id."\n" }; 
```

然后在你的循环中

```
for($i = 0; $i < 9; $i++) {
    $id++;
    print $textfunc->();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:03:13.037

您似乎对引用感到困惑。也许您正在考虑以下 C 指针场景：

```
char text[] = "This is a test xx\n";
char *cursor = text + 15;
*cursor = ' 1'; 
```

不知道是怎样的思考过程会带来这样的印象，一旦你将 的内容内`$id`插进去`my $x = "Test string $id"`，就可以通过改变 的值来改变内插字符串的值`$id`。

正如我所说，你真的很困惑。

现在，如果您希望某个地方的子例程能够在不将输出格式嵌入子例程的情况下格式化某些输出，则可以将消息格式化程序作为参数之一传递给子例程，如下所示：

```
my $formatter = sub { sprintf 'The error code is %d', $_[0] };

forbnicate([qw(this that and the other)], $formatter);

sub frobnicate {
    my $args = shift;
    my $formatter = shift;

    # ...

    for my $i (0 .. 9) {
       print $formatter->($i), "\n";
    }

    return;
} 
```

这肯定会变得乏味，因此您基本上可以拥有一个格式化程序包，并让潜艇使用他们需要的任何格式化程序：

```
package My::Formatters;

sub error_code {
    my $class = shift;
    return sprintf 'The error code is %d', $_[0];
} 
```

在主脚本中：

```
use My::Formatters;

for my $i (0 .. 9) {
    My::Formatters->error_code($i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T19:15:14.550

正如思南指出的那样，有一种更简单的方法可以做到这一点。如果您想将`$text`字符串分开以实现可维护性和/或重用性，您也可以考虑使用`sprintf`，例如：

```
my $id = 0;
my $max_id = 9;
my $text = "This is an example, id: %d\n";

for (my $i = $id; $i < $max_id; $i++) {
    print sprintf($text, $i+1);
} 
```

# sql-server-2008 - 从服务器手动运行 SSIS 包“加载 dts.dll 失败”

> ID：15619640
> 
> 赞同：0
> 
> 时间：2013-03-25T16:15:33.723
> 
> 标签：sql-server-2008, ssis

在我们的新服务器上，当我尝试从 SSMS 中的集成服务运行 SSIS 包时（即通过右键单击包并选择“运行”），我收到以下错误

```
The program has failed to Load the library "c:\Program Files\Microsoft SQL Server\100\DTS\Binn\dts.dll" 
```

奇怪 - dll 文件位于该地址，SQLAgent 登录（集成服务和 Sql 代理在其下运行）有权执行该文件，而我有权执行该文件（这意味着我们都可以完全控制包含dll）。我看不出集成服务无法加载库的任何原因

服务器上的所有软件包都会发生这种情况

停止和重新启动服务（SQL 和 SSIS）未解决问题

有任何想法吗？

# css - 在动态 Web 项目中访问 c ss、js 文件的问题

> ID：15619641
> 
> 赞同：0
> 
> 时间：2013-03-25T16:15:34.300
> 
> 标签：css, eclipse, spring-mvc, web.xml

我在尝试从 jsp 文件 (WEB-INF/jsp/index.jsp) 访问 css 和 js 文件时遇到问题。我通读了 Stack Overflow 上其他人面临的一些类似问题。

![在此处输入图像描述](../Images/4b0544db6c688589deb8dbb62b05230d.png)

我将这行代码添加到我的 SpringMVCProj-servlet.xml 中，它使事情变得更加复杂。

```
<mvc:resources mapping="/WebContent/**" location="/WebContent/" /> 
```

**SpringMVCProj-servlet.xml**

```
<context:component-scan base-package="com.myapp" />
<mvc:resources mapping="/WebContent/**" location="/WebContent/" />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

**Web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring MVC Application</display-name>

  <welcome-file-list>
<!--     <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>
 -->    
 <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>
  </welcome-file-list>

   <servlet>
      <servlet-name>SpringMVCProj</servlet-name>
      <servlet-class>
         org.springframework.web.servlet.DispatcherServlet
      </servlet-class>
      <load-on-startup>1</load-on-startup>
   </servlet>

   <servlet-mapping>
      <servlet-name>SpringMVCProj</servlet-name>
      <url-pattern>/</url-pattern>
   </servlet-mapping>

<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>/WEB-INF/SpringMVCProj-servlet.xml</param-value>
</context-param>

<listener>
   <listener-class>
      org.springframework.web.context.ContextLoaderListener
   </listener-class>
</listener>

</web-app> 
```

这是在我添加代码行之前。

```
 <mvc:resources mapping="/WebContent/**" location="/WebContent/" /> 
```

![在此处输入图像描述](../Images/a026e0ce92df9f92b6f0782dc68909c7.png)

这之后...

![在此处输入图像描述](../Images/23863023c5d29b39d4215105ebca86a4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:48:27.237

在我将 SpringMVCProj-servlet.xml 更改为此之后，它起作用了。

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop.xsd">

    <mvc:annotation-driven />
    <mvc:resources mapping="/**" location="/" />

    <context:component-scan base-package="com.myapp" />
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

</beans> 
```

# assembly - 在 MIPS 汇编语言中使用“计数器”进行递归调用

> ID：15619642
> 
> 赞同：0
> 
> 时间：2013-03-25T16:15:34.373
> 
> 标签：assembly, recursion, mips

我正在尝试解决/理解我的 MIPS 汇编编程任务中可能出现的问题。这是相当基本的，我们必须实现一个递归调用，更新“计数器”并在计数器达到 0 时退出循环。根据 PCSpim，我的错误在我运行程序时显示计数器值为 NULL。

```
.data
string: .asciiz "Recursive call counter "

.text
.globl main

main:       
    subu    $sp, $sp, 32        # create stack frame

    sw  $ra, 28($sp)        # save ($fp, $ra) registers
    sw  $fp, 24($sp)

    addu    $fp, $sp, 28        # set up the new frame pointer

    sw  $s0, 20($sp)        # save other GPR’s

    li  $s1, 10         # load counter to $s1

    li  $v0, 4          # print counter message and counter
    la  $a0, string
    syscall
    li  $v0, 4
    la  $a0, ($s1)
    syscall

    jal recursive_call      # jump to recursive call

    lw  $s0, 20($sp)        # restore registers

    lw  $fp, 24($sp)        # restore SP, FP, $ra for the caller
    lw  $ra, 28($sp)        

    addu    $sp, $sp, 32        # restore the caller's stack pointer

    jr $31              #end program

recursive_call:
    subu    $sp, $sp, 32        # create stack frame

    sw  $ra, 28($sp)        # save ($fp, $ra) registers
    sw  $fp, 24($sp)

    addu    $fp, $sp, 28        # set up the new frame pointer

    sw  $s0, 20($sp)        # save other GPR’s

    sub     $s1, $s1, 1     # subtract one from counter

    li  $v0, 4          #print counter number
    la  $a0, ($s1)
    syscall

    beq     $s0, $zero, SKIP    # if counter = 0, go to skip

    jal     recursive_call      # jump to recursive call

SKIP:   
    lw  $s0, 20($sp)        # restore registers

    lw  $fp, 24($sp)        # restore SP, FP, $ra for the caller
    lw  $ra, 28($sp)        

    addu    $sp, $sp, 32        # restore the caller's stack pointer

    jr $ra 
```

任何帮助将不胜感激。我将继续进行故障排除，看看我是否想出了任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:25:12.387

我不确定这应该是什么：

```
li  $v0, 4
la  $a0, ($s1)
syscall 
```

你可能想要：

```
li $v0,1  # print_int
mov $a0,$s1
syscall 
```

然后是这样的：

```
beq     $s0, $zero, SKIP    # if counter = 0, go to skip 
```

你的柜台在，`$s1`但你正在比较`$s0`。

# ios - 确定图像选择器媒体类型是否为视频

> ID：15619643
> 
> 赞同：7
> 
> 时间：2013-03-25T16:15:35.787
> 
> 标签：ios, cocoa-touch, uiimagepickercontroller, uti

我见过各种检查返回的媒体类型是否`-imagePickerController:didFinishPickingMediaWithInfo:`为视频的方法。比如我的方式：

```
- (void)imagePickerController:(UIImagePickerController *)imagePicker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    if (UTTypeEqual(kUTTypeMovie, 
    (__bridge CFStringRef)[info objectForKey:UIImagePickerControllerMediaType])) 
    {
        // ...
    }
} 
```

或者

```
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
if ([mediaType isEqualToString:(NSString *)kUTTypeMovie]) { 
```

或者

```
if ([mediaType isEqualToString:(NSString *)kUTTypeVideo] || 
    [mediaType isEqualToString:(NSString *)kUTTypeMovie]) 
```

或者

```
if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) 
```

或者

```
if ([mediaType isEqualToString:@"public.movie"] 
```

每个人似乎都有不同的方法来做到这一点。检查媒体类型的推荐方法是什么？最好采用包含“所有图像类型”或“所有视频类型”的方式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-31T20:01:03.780

最好检查与特定 UTI的**一致性。**

现在，iOS 告诉你它是 a `public.movie`，但明年它会说什么呢？你会看到人们`public.video`也在检查。太好了，所以你硬编码了两种类型而不是一种。

但是问“这是一部电影吗？”不是更好吗？而不是硬编码您认为 iOS 将返回的特定类型？有一种方法可以做到这一点：

```
NSString *mediaType = info[UIImagePickerControllerMediaType];
BOOL isMovie = UTTypeConformsTo((__bridge CFStringRef)mediaType,
                                kUTTypeMovie) != 0; 
```

使用这种方法，`isMovie`应该是`YES`如果返回电影（无论返回哪种特定类型）如果 mediaType 表示电影，因为所有电影都符合`kUTTypeMovie`. 要非常清楚，如果是 a `kUTTypeVideo`this 也会将其识别为电影，因为`kUTTypeVideo`符合`kUTTypeMovie`.

同样，您可以检查返回的东西是否是图像：

```
NSString *mediaType = info[UIImagePickerControllerMediaType];
BOOL isImage = UTTypeConformsTo((__bridge CFStringRef)mediaType,
                                kUTTypeImage) != 0; 
```

`isIamge`如果返回图像应该`YES`是，因为所有图像都符合`kUTTypeImage`.

在此处查看 Apple 的（部分）类型树：[Uniform Type Identifiers Are Declared in a Conformance Hierarchy](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/UniformTypeIdentifier.html)。您可以获得一个不太有用但更完整的列表，其中列出了您的系统当前识别的所有 UTI 及其与 shell 的一致性：

```
/System/Library/Frameworks/CoreServices.framework/Frameworks\
/LaunchServices.framework/Versions/A/Support/lsregister -dump 
```

特别是，您可以看到 public.video 是这样定义的：

```
--------------------------------------------------------
type    id:            8344
    uti:           public.video
    description:   video
    flags:         exported  active  core  apple-internal  trusted  
    icon:          
    conforms to:   public.movie
    tags:          
-------------------------------------------------------- 
```

请注意，如果类型也相同，则`UTTypeConformsTo`返回。`true`来自 Apple 的文档：

> 如果统一类型标识符等于或符合第二种类型，则返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T09:50:58.990

I would say the difference between the first method `UTTypeEqual` and the second and third methods (`NSString` comparison), is a matter of preference in dealing with `CFStringRefs` or `NSStrings`.

The 4th type appears to be referencing `kUTTypeMovie` by its actual string value which you should absolutely not do as it is private and may actually change. Aside from that it is just like the second and third methods.

It does look like you'll probably want to check against a few more types depending on how thorough you want/need to be.

I would probably check for `kUTTypeAudiovisualContent, KUTTypeMovie, KUTTypeVideo, kUTTypeQuickTimeMovie, kUTTypeMPEG, kUTTypeMPEG4`.

Full list from [UTType Reference](https://developer.apple.com/library/mac/documentation/MobileCoreServices/Reference/UTTypeRef/Reference/reference.html)

```
kUTTypeAudiovisualContent
An abstract type identifier for audio and/or video content.
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeMovie
An abstract type identifier for a media format which may contain both video and audio. Corresponds to what users would label a "movie"
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeVideo
An abstract type identifier for pure video data(no audio).
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeAudio
An abstract type identifier for pure audio data (no video).
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeQuickTimeMovie
The type identifier for a QuickTime movie.
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeMPEG
The type identifier for a MPEG-1 or MPEG-2 movie.
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeMPEG4
The type identifier for a MPEG-4 movie.
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeMP3
The type identifier for MP3 audio.
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeMPEG4Audio
The type identifier for a MPEG-4 audio layer (.m4a, or the MIME type audio/MP4).
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h.

kUTTypeAppleProtectedMPEG4Audio
The type identifier for Apple protected MPEG4 format (.m4p, iTunes music store format).
Available in iOS 3.0 and later.
Declared in UTCoreTypes.h. 
```

# objective-c - 每 X 分钟获取一次 iPhone 位置

> ID：15619644
> 
> 赞同：0
> 
> 时间：2013-03-25T16:15:40.397
> 
> 标签：objective-c, locationmanager

我不能通过主要的位置更改，因为它必须每 X 分钟检查一次，无论他们是否已经移动。

这就是我现在尝试做的方式。我正在尝试在另一个线程中运行 locationManager 并暂时休眠该线程，问题是它使前端休眠，因此用户无法点击任何东西。（这必须在应用程序未运行时运行）

```
[locationManager performSelectorInBackground:@selector(startUpdatingLocation) withObject:nil];

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
        [NSThread sleepForTimeInterval:10.0]; //600
        NSLog([NSString stringWithFormat:@"Longitude: %0.3f", newLocation.coordinate.longitude]);
        NSLog([NSString stringWithFormat:@"Latitude: %0.3f", newLocation.coordinate.latitude]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:19:36.080

不要那样做......我的意思是睡眠部分。您可以手动处理“无论他们是否已移动”部分。只是不要使用 CLLocationManager 事件来触发您的业务逻辑。保存位置，然后随时查看。如果它没有改变，那么你的逻辑没有任何改变，因为无论如何你都需要它。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   self.location = newLocation;
} 
```

您可以使用 NSTimer 每 X 分钟报告一次该属性上的任何内容。使用“重大更改”来节省电池

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:23:12.647

而不是睡觉`NSThread`，你可以使用`NSTimer`

```
-(void)yourMethod{
   //your stuffs here

    if (/*once you are done*/) {
        [self.timer invalidate];
        self.timer=nil;
    }
}

-(IBAction)button:(id)sender;{

    self.timer=[NSTimer scheduledTimerWithTimeInterval:600.f target:self selector:@selector(yourMethod) userInfo:nil repeats:YES];
} 
```

# java - 如何使用导入另一个架构文件的架构文件验证 XML？

> ID：15619653
> 
> 赞同：1
> 
> 时间：2013-03-25T16:16:07.797
> 
> 标签：java, xml, xsd, moxy, xsd-validation

我想根据[这个模式](http://www.forum-datenaustausch.ch/generalinvoicerequest_430.xsd.zip)（在 zip 里面）验证 XML 文件；它导入另外两个 XSD 文件。

```
 <import namespace="http://www.w3.org/2000/09/xmldsig#" 
       schemaLocation="xmldsig-core-schema.xsd"/>
   <import namespace="http://www.w3.org/2001/04/xmlenc#" 
       schemaLocation="xenc-schema.xsd"/> 
```

这 2 个文件也可在此处获得：

*   [http://www.forum-datenaustausch.ch/xmldsig-core-schema.zip](http://www.forum-datenaustausch.ch/xmldsig-core-schema.zip)
*   [http://www.forum-datenaustausch.ch/xenc-schema.zip](http://www.forum-datenaustausch.ch/xenc-schema.zip)。

在验证时，我收到此错误：

```
Src-resolve: Cannot Resolve The Name 'xenc:EncryptedData' To A(n) 'element Declaration' Component. 
```

我的验证/解组代码如下所示（使用 moxy 作为 JAXB 提供程序）：

```
jaxbContext = JAXBContext.newInstance(type.getRequestType().getPackage().getName());
Unmarshaller um = jaxbContext.createUnmarshaller();

SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Schema schema = sf.newSchema(new StreamSource(this.getClass().getResourceAsStream("/xsd/" + type.getXsdName())));
um.setSchema(schema);

root = um.unmarshal(new StreamSource(new ByteArrayInputStream(xmlData)), type.getRequestType()); 
```

在你问类型做什么之前：我编写的代码可以从[http://www.forum-datenaustausch.ch/](http://www.forum-datenaustausch.ch/)导入所有类型的发票。但是 4.3 及更高版本使用两个附加的模式文件。如何验证 XML 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T18:12:29.220

看看[这篇文章](https://stackoverflow.com/questions/9280226/referencing-a-xsd-schema-within-jar-file)接受的答案。根据我在您的帖子中看到的一点点，并且据我所记得，您加载 XSD 的方式的问题与按照您的方式进行操作有关，工厂没有获得基本 uri ，因此它不能应用其智能来解析对其他两个 XSD 的引用。我必须假设您的其他两个 XSD 也作为资源打包在同一个 jar 中，在同一个目录中。

我不得不承认我对错误消息很感兴趣，这似乎暗示它加载的模式是有效的，所以它可能是一个 XML 问题；如果以上内容对您没有帮助，那么您也应该考虑发布有问题的 XML ......

更新：根据我的评论，它按描述工作。请参阅下面的代码片段：

```
SchemaFactory schemaFactory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
Schema compiledSchema = schemaFactory.newSchema(new SOTests().getClass()
    .getClassLoader().getResource("generalInvoiceRequest_430.xsd"));
Validator validator = compiledSchema.newValidator();
try {
    validator.validate(new StreamSource("D:\\...\\dentist_ersred_TG_430.xml"));
    System.out.println("Valid.");
}
catch (SAXException ex) {
    System.out.print("Not valid because..." + ex.getMessage());
} 
```

您不需要加载比第一个 XSD 更多的内容，也不应该加载，因为所有导入都提供了模式位置的提示。

![在此处输入图像描述](../Images/79126333430edb7c6b1afb87f5ff4527.png)

XSD 文件都**在**生成的 jar 中的同一目录中，它们必须是，因为用于导入的相对 URI 指示相同的父级。

![在此处输入图像描述](../Images/8a17ba493722960991cc11663de33bb4.png)

[带有从此处](http://www.forum-datenaustausch.ch/xmlstandards_generelle_rechnung_beispiele_anfrage_4.3_20100901.zip)下载的文件之一的程序输出：

```
Valid. 
```

并在引入无效内容后：

```
Not valid because...cvc-complex-type.2.4.a: Invalid content was found starting with element 'wrong'. One of '{"http://www.forum-datenaustausch.ch/invoice":processing}' is expected. 
```

我对阅读本文的人的建议：

*   使用 getResource() 获取 URL；正如我上面所说， StreamResource 没有基本 URI，因此不能取消引用根据您的 xsd:import schemaLocation 属性的相对引用。
*   当明确提供时，让架构/工厂为您加载。
*   确保提供时，相对引用与 jar 文件中的文件夹结构相匹配。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-05T08:38:40.277

这里有类似的问题。我试图将其导入`GeneralInvoice`集成软件。

1.  Parser 不喜欢导入模式开头的 DOCTYPE 标记。解决方法：删除`DOCTYPE`部分。
2.  解析器不支持 anyAttribute、anyURI 等。解决方案：将 anyURI 更改为字符串并通过添加注释来删除其他内容。
3.  必须先导入 xenc 和 xwldsig xsd，然后在第二步中导入 GeneralInvoice。

希望这可以帮助

# php - 正则表达式无法转义字符

> ID：15619658
> 
> 赞同：-2
> 
> 时间：2013-03-25T16:16:16.173
> 
> 标签：php, regex, preg-match

所以这里是正则表达式：

```
$reg_exUrl = "(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))"; 
```

这是错误：

```
Parse error: syntax error, unexpected ',' in 
```

仍然找不到解决方案如何在我的代码中使用它，我需要如何转义它以便存储在变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:17:13.207

转义正则表达式中的双引号

```
$reg_exUrl = "(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\".,<>?«»“”‘’]))"; 
```

# sql-server - 类似于 MySQL 的 DATE_SUB / INTERVAL

> ID：15619659
> 
> 赞同：11
> 
> 时间：2013-03-25T16:16:19.330
> 
> 标签：sql-server, tsql

在 MySQL 中，以下内容将告诉您一个月前的日期：

```
SELECT DATE_SUB(NOW(), INTERVAL 1 MONTH); 
```

SQL[小提琴](http://sqlfiddle.com/#!2/d41d8/9544)。

这如何在 SQL Server 中完成？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T16:20:36.123

尝试这个

```
SELECT DATEADD(month, -1, GETDATE()); 
```

# ios - 如何根据 iOS 设备定义 PTM_RATIO

> ID：15619661
> 
> 赞同：1
> 
> 时间：2013-03-25T16:16:27.430
> 
> 标签：ios, cocos2d-iphone, box2d

我正在使用 Cocos2D+Box2D 进行游戏开发。由于 Box2D 使用米而不是像素，我需要定义像素与米的比率。所以我在代码顶部定义了一个 PTM_RATIO：

```
define PTM_RATIO 32 
```

但是 32 对于 iPhone<5 来说很好，对于其他设备我需要设置不同的数字。是否可以根据设备类型定义此比率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:28:48.897

顺便说一句，您可以将代码中出现的所有 PTM_RATIO 替换为

`[Box2DHelper pixelsToMeterRatio]`

这样您就可以毫无问题地在 Retina 分辨率和正常分辨率之间切换。

查看文件 [http://subversion.assembla.com/svn/oiram/trunk/GoLeft/GoLeft/Box2DHelper.mm](http://subversion.assembla.com/svn/oiram/trunk/GoLeft/GoLeft/Box2DHelper.mm)

要了解 CC_CONTENT_SCALE_FACTOR，请查看[何时使用 CC_CONTENT_SCALE_FACTOR()？](https://stackoverflow.com/questions/11200916/when-to-use-cc-content-scale-factor)

更新：例如，为 iPad 提供不同的 PTM

```
#define isIPad UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad 
#define PTM_RATIO (isIPad ? 64 : 32) 
```

# javascript - 使用 jQuery 为长时间运行的进程保持会话活动

> ID：15619663
> 
> 赞同：2
> 
> 时间：2013-03-25T16:16:30.163
> 
> 标签：javascript, jquery, asp.net

在 ASP.NET Web 窗体应用程序中，我有一个父窗体，它在 IFrame 中包含另一个内容页面。当用户单击内容页面中的链接时，将启动一个长时间运行的过程（> 30 分钟）。完成后，会向用户显示一个弹出窗口，指示已处理的记录数。

我需要以编程方式防止会话超时，而不更改 Web.config 中的默认 20 分钟。我一直在尝试实现此处发布的 Heartbeat 示例（以及整个网络，所以我知道它应该可以工作） [Keeping ASP.NET Session Open / Alive](https://stackoverflow.com/questions/1431733/keeping-asp-net-session-open-alive) ，但它似乎主要用于空闲会话。

就我而言，一旦内容页面请求进入服务器端并启动长时间运行的进程，就不会调用 HTTP 处理程序。当这个过程完成时，所有的调用都会像被“排队”一样立即一个接一个地进行。

这是我的 HTTP 处理程序：

```
<%@ WebHandler Language="VB" Class="KeepSessionAliveHandler" %>

Imports System
Imports System.Web

Public Class KeepSessionAliveHandler
    Implements IHttpHandler, SessionState.IRequiresSessionState

    Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
        context.Session("heartbeat") = DateTime.Now
        context.Response.AddHeader("Content-Length", "0")

    End Sub

    Public ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
        Get
            Return False
        End Get
    End Property

End Class 
```

父页面的 Head 元素中的 Javascript 函数。创建间隔每 8 秒调用一次处理程序（在生产中增加到 10 分钟）。

```
function KeepSessionAlive() 
{    
    if (intervalKeepAliveID) 
        clearTimeout(intervalKeepAliveID); 

    intervalKeepAliveID = setInterval(function() 
    {
        $.post("KeepSessionAliveHandler.ashx", null, function() 
        {
            // Empty function
        });
    }, 8000);
} 
```

`intervalKeepAliveID`在应用程序所有页面中包含的主要 Javascript 文件中声明。

这是我在内容页面 Head 中的 onclick 事件的代码

```
$(document).ready(function() 
{
    // Ensuring my code is executed before ASP.NET generated script
    $("#oGroup_lnkSubmit_lnkButton").attr("onclick", null).removeAttr("onclick").click(function() 
    {
        // Prevent the browser from running away
        // e.preventDefault();

        window.parent.KeepSessionAlive();              

        // Wave goodbye
        //window.location.href = $(this).attr('href');

        WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions($(this).attr("name"), "", true, "", "", false, false));                    
    });
}); 
```

在某处我读到 Javascript 在单个线程中运行，但鉴于我的重复间隔在内容页面之外，我认为这不应该适用于此......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:24:05.477

JS 是单线程的不是问题 - AJAX 的 A 代表异步 - 例如它不会阻塞（即使你告诉它阻塞，它实际上只是保留状态直到收到响应）

从这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms178581.aspx)...

> 每个会话对 ASP.NET 会话状态的访问是独占的，这意味着如果两个不同的用户发出并发请求，则同时授予对每个单独会话的访问权限。但是，如果对同一个会话发出两个并发请求（通过使用相同的 SessionID 值），则第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。（如果因为第一个请求超过了锁超时，信息上的独占锁被释放，第二个会话也可以获得访问权。）如果@Page指令中的EnableSessionState值设置为ReadOnly，则请求只读会话信息不会导致对会话数据的独占锁定。然而，

[有关问题的更详细说明和解决方法，请参阅此页面](http://www.davidcoombes.co/?p=151)，该解决方法可让您更好地控制阻止的实施方式和潜在的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:45:44.303

我认为您这里有几个活动部件相互阻碍，无法正常运行。

*   因为您的进程正在服务器线程中运行，所以这会阻止处理其他请求。
*   因为keepalive依赖于从服务器获得响应，所以它没有完成。

我建议您研究像[ASP.NET SignalR](http://signalr.net)这样的解决方案，同时将长时间运行的进程作为单独的线程生成，以便您的服务器可以继续为传入的请求提供服务。

# c++ - 用 boost::regexp 忽略大小写

> ID：15619665
> 
> 赞同：3
> 
> 时间：2013-03-25T16:16:38.623
> 
> 标签：c++, case-insensitive, boost-regex

奇怪的是，谷歌拒绝回答这样简单的问题：
如何使 boost::regexp 不区分大小写？

这就是我所拥有的：

```
static const boost::regex bad_words("(?:^|.* )(f(?:uc|a)k(?:i[ng]{1,2})?|bitch(?:es|iz)?)(?:$| .*)");   //reduced to the english ones 
```

当然，我也想过滤大写的坏词。这就是我匹配它们的方式：

```
//std::string ms; - chat messsage
//boost::match_results<std::string::const_iterator> results;  - prewious regexp results
else if(boost::regex_match(ms, results2, bad_words)) {   //
        std::stringstream msg;
        msg<<"Avoid bad words! Word '"<<results2[1]<<"' is banned!";
        this->whisper(results[1], msg.str());   //name, message
} 
```

那么，不敏感的正则表达式还有另一个功能吗？还是另一个正则表达式对象？或者修改器`i`可用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T16:33:00.093

您可以使用以下`boost::regex::icase`选项：

```
static const boost::regex bad_words("...your regex...", boost::regex::icase); 
```

# javascript - 在javascript中重新排序数组

> ID：15619667
> 
> 赞同：4
> 
> 时间：2013-03-25T16:16:41.910
> 
> 标签：javascript, arrays

有很多关于这个主题的问题/答案。没有一个符合我的具体情况。希望有人可以提供帮助：

我有一组索引，例如：

```
var indexes = [24, 48, 32, 7, 11]; 
```

还有一组看起来与此类似的对象：

```
var items = [{
              name : "whatever",
              selected : false,
              loading : true,
              progress : 55,
              complete : false
},
{
              name : "whatever 2",
              selected : false,
              loading : false,
              progress : 100,
              complete : true
}]; 
```

数组中的每个整数`indexes`对应于 items 数组中对象的实际索引。

最后，我有一个变量，它定义了 items 数组中的新插入位置：

```
 var insertindex = ?? 
```

我想做的是将所有`objects`索引存储在`indexes`数组中的项目数组中，删除它们，然后最后将它们放回去，所有这些都在变量定义的指定索引处彼此相邻`insertindex`。

我一直在尝试`splice()`通过将每个索引处的对象复制到临时数组中来使用，然后将它们从原始数组中删除，然后最终循环通过这个新的临时数组并将它们放回新位置的原始项目数组中，但似乎碰到一堵精神砖墙，无法让它正常工作。

总而言之，我只想从 items 数组中取出与索引数组中定义的索引匹配的所有对象，将它们放在一起并将它们重新插入到预定义的索引处，然后重新插入 items 数组中。

**帮助进行概念可视化**。如果您将该应用程序视为 javascript 文件管理器，则允许对多个不必相邻的文件选择进行重新排序。`indexes`定义当前选择的数组和`items`定义文件列表的数组。最后`rearoderindex`定义了所有选定文件应移动到的新插入位置。

编辑：正如这里正确建议的那样，我现在正在使用的代码是：

```
function reorder(items, indexes, insertindex){

        var offset = 0;
        var itemscopy = items.slice(0); //make shallow copy of original array
        var temparray = new Array(); // create temporary array to hold pulled out objects

        //loop through selected indexes and copy each into temp array
        for(var i=0, len=indexes.length; i<len; i++){ 
            array[i] = itemscopy[self.cache.selecteditems[i]];
        }

        //remove all selected items from items array
        for(var i=0, len=indexes.length; i<len; i++){
            items.splice(indexes[i], 1);
        }

        //finally loop through new temp array and insert the items back into the items array at the specified index, increasing the index each iteration using the offset variable.
        for(var i=0, len=temparray.length; i<len; i++){
            items.splice((insertindex+offset), 0, array[i]);
            offset++;
        }

} 
```

我知道这是非常可怕的，循环三遍应该是不必要的。但是我一直在尝试很多不同的方法，有些在一个方向重新排序时有效，有些在另一个方向上，大部分，根本没有。我想我以后会考虑优化这个功能，一旦我让它准确地工作。

我确定我一定是在做一些非常愚蠢的事情或完全忽略了一些事情，但对于我的一生，我现在无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:12:44.917

如果您不关心`indexes`数组的顺序，我建议您使用另一个简短的解决方案：

```
items.splice.apply(items, [insertIndex, 0].concat(indexes.sort(function(a, b) {
    return a - b;
})).map(function(i, p) {
    return p > 1 ? items.splice(i - p + 2, 1).pop() : i;
})); 
```

**演示：http:** [//jsfiddle.net/T83fB/](http://jsfiddle.net/T83fB/)

为了简短起见，我使用[`Array.map()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)了旧 IE 浏览器不支持的方法。然而，使用[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map#Compatibility)的 shim 总是很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:30:35.770

您可以使用该`.splice()`函数将元素添加到数组中，也可以从中删除元素。一般原则是：

1.  将索引按数字升序排序
2.  迭代`indexes`，删除该索引处的元素（调整删除项目的数量）并将其存储在`removedItems`数组中
3.  将`removedItems`数组重新添加到所需的索引处

执行此操作的代码如下所示：

```
var removedItems = [];
// sort indexes
indexes.sort(function(a, b) {
    if(a < b) return -1;
    else if(b < a) return 1;
    return 0;
});
for(var i = 0; i < indexes.length; i++) {
    var index = indexes[i];
    removedItems.push(items.splice(index - removedItems.length, 1));
}
var insertIndex = 1;
items.splice.apply(items, [insertIndex, 0].concat(removedItems)); 
```

看看[这个 jsFiddle 演示](http://jsfiddle.net/j5jQt/1/)。

# c# - 如何在 C# 中正确退出/停止/处置控制台应用程序

> ID：15619668
> 
> 赞同：1
> 
> 时间：2013-03-25T16:16:48.213
> 
> 标签：c#, console-application

我注意到在我的任务管理器中我有这个应用程序的几个副本 - 虽然不占用任何 CPU 资源。

我知道我一定做错了什么，所以我问集体......

这是经过消毒的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Diagnostics;

namespace AnalyticsAggregator
{
class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        try
        {
            bool onlyInstance = false;
            Mutex mutex = new Mutex(true, "AnalyticsAggregator", out onlyInstance);
            if (!onlyInstance)
            {
                return;
            }

                            "Do stuff with the database"

            GC.KeepAlive(mutex);
        }
        catch (Exception e)
        {

                EventLog eventlog = new EventLog("Application");
                eventlog.Source = "AnalyticsAggregator";
                eventlog.WriteEntry(e.Message, EventLogEntryType.Error);
            }
        }
    }
}
} 
```

我有其他不是互斥/单例的控制台应用程序表现出相同的行为，我做错了什么？我假设某种类型的处置...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:21:50.110

控制台应用程序将在完成后终止，通常是在它运行到其`Main`入口点方法的末尾时，尽管您必须小心摆脱您可能一直在管理的任何挥之不去的资源，因为它们可以使底层进程保持活动状态。

您可以使用 显式退出`Environment.Exit`，`Application.Exit`尽管根据我的经验后者是基于表单的（与清除消息泵和关闭窗口等有关）。

底线是一定要做好家务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:21:06.887

您可以尝试添加`using`关于使用`Mutex`. 例子：

```
using (Mutex mutex = new Mutex(true, "AnalyticsAggregator", out onlyInstance))
{
    if (!onlyInstance) return;
    ... database stuff ...
} 
```

`Mutex`当大括号内的代码以任何方式（正常执行或异常）退出时，这将自动处理实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:21:00.493

```
Application.Exit(); 
```

是标准方法吗，但是除非您希望通过用户输入退出应用程序（例如，您想退出应用程序（y/n）吗？），关闭控制台应该足够了。

# java - JAVA 将我自己的表单显示为对话框

> ID：15619669
> 
> 赞同：0
> 
> 时间：2013-03-25T16:16:59.640
> 
> 标签：java, forms, dialog, jdialog, showdialog

创建 Java 应用程序，并有一个任务：需要从我的“父”表单打开新表单，但它应该像对话框一样打开（阻止“父”表单编辑，同时打开新表单）

尝试将 JDialog 组件添加到表单中，然后显示它，但它不会“阻止”表单编辑，而且它建议在与“父”表单相同的类中编写所有功能。

我想有一个单独的表单类，我可以在其中实现，然后只从“父”表单调用它。

例如：如果您尝试过 C#，有一个简单的方法可以做到这一点，只需创建表单，然后调用函数 showDialog。那么 JAVA 中最简单的方法是什么？

//================================================= ===

**已经找到解决方案：**

*扩展JDialog

（因为我使用的是 netbeans，这很容易：在项目包上 New->Other->swing GUI forms->DialogForm）

*   增加了一个构造函数

    ```
     public ConnectDialog(Window owner,
        Dialog.ModalityType modal) {
    super(owner, modal);
    initComponents();
    this.setLocationRelativeTo(owner); 
    ```

*   然后从我的表单中调用它：

    ```
     ConnectDialog cf = new ConnectDialog(this,Dialog.ModalityType.DOCUMENT_MODAL);
    cf.setVisible(true); 
    ```

不知道这是最好的解决方案，但对我来说它正在工作。

)

# c++ - C++ - 为什么静态字符串在被不同函数引用时给出的地址略有不同？

> ID：15619671
> 
> 赞同：3
> 
> 时间：2013-03-25T16:17:01.043
> 
> 标签：c++, pointers, reference, struct, memory-address

只是试图掌握 C++ 的复杂性，因此我在搞乱字符串和指针。但是，我遇到了一些我不太了解的事情。

首先，我使用的是相同的函数，据我所知，每次都给它相同的参数。我从主函数和另一个函数调用它，并从每个函数中获取略有不同的地址。下面是从内存的某些部分读取数据的函数。

```
void printDataFromAddressForLength(char* pointer, long length)
{
    cout << "\n" << endl;

    for (int i=0; i<length; i++)
    {
        cout << "&pointer: " << &pointer + i << "\tData: " << pointer + i << endl;
    }
} 
```

这个函数的目标是在每一行上打印当前地址和值，然后迭代并可以在任何地方使用，做同样的事情——非常简单的函数，没有真正的目的。

这是我在 main() 中的代码

```
MessageData messageData = returnStruct();
printDataFromAddressForLength(messageData.pChar, messageData.length); 
```

我还从我的 returnStruct() 函数中调用 printDataFromAddressForLength。这段代码可以在下面看到。

```
// Returns MessageData from function 
MessageData returnStruct()
{
static string staticTestString = "Time and time again";

MessageData metaData;
MessageData* pMetaData = &metaData;

pMetaData->pChar = &staticTestString[0];
pMetaData->length = staticTestString.length();

printDataFromAddressForLength(pMetaData->pChar, pMetaData->length);

return metaData;
} 
```

下面的输出来自从内部返回结构调用的 printDataFromAddressForLength() 函数。注：0x0027F* *7* *

```
&pointer: 0027F7BC      Data: Time and time again
&pointer: 0027F7C0      Data: ime and time again
&pointer: 0027F7C4      Data: me and time again
&pointer: 0027F7C8      Data: e and time again
&pointer: 0027F7CC      Data:  and time again
&pointer: 0027F7D0      Data: and time again
&pointer: 0027F7D4      Data: nd time again
&pointer: 0027F7D8      Data: d time again
&pointer: 0027F7DC      Data:  time again
&pointer: 0027F7E0      Data: time again
&pointer: 0027F7E4      Data: ime again
&pointer: 0027F7E8      Data: me again
&pointer: 0027F7EC      Data: e again
&pointer: 0027F7F0      Data:  again
&pointer: 0027F7F4      Data: again
&pointer: 0027F7F8      Data: gain
&pointer: 0027F7FC      Data: ain
&pointer: 0027F800      Data: in
&pointer: 0027F804      Data: n 
```

此输出来自 main 本身调用的 printDataFromAddressForLength() 函数。注：0x0027F* *8* *

```
&pointer: 0027F8BC      Data: Time and time again
&pointer: 0027F8C0      Data: ime and time again
&pointer: 0027F8C4      Data: me and time again
&pointer: 0027F8C8      Data: e and time again
&pointer: 0027F8CC      Data:  and time again
&pointer: 0027F8D0      Data: and time again
&pointer: 0027F8D4      Data: nd time again
&pointer: 0027F8D8      Data: d time again
&pointer: 0027F8DC      Data:  time again
&pointer: 0027F8E0      Data: time again
&pointer: 0027F8E4      Data: ime again
&pointer: 0027F8E8      Data: me again
&pointer: 0027F8EC      Data: e again
&pointer: 0027F8F0      Data:  again
&pointer: 0027F8F4      Data: again
&pointer: 0027F8F8      Data: gain
&pointer: 0027F8FC      Data: ain
&pointer: 0027F900      Data: in
&pointer: 0027F904      Data: n 
```

据我所知，我首先调用该函数，传入一个指针和长度。

然后我将包含这两个参数的结构返回给 main，并使用我期望的相同参数调用相同的函数，长度显然是相同的，但 pChar 有一个奇怪的地址增量。

将不胜感激任何见解！

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:22:08.517

您正在打印形式参数“指针”的地址，而不是字符串的地址。

```
void printDataFromAddressForLength(char* pointer, long length)
{
    cout << "\n" << endl;

    for (int i=0; i<length; i++)
    {
        cout << "&pointer: " << (void*)(pointer + i) << "\tData: " << pointer + i << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T16:21:53.240

你没有打印你认为你是什么。的类型`&pointer`是`char * *`：指向指针的指针。然后你添加`i`到它，它增加了指向类型的大小（不是`char`，但是`char *`）

尝试这个：

```
cout << "&pointer: " << (void*)&pointer[i] 
```

# android - PhoneGap Android 与网站不同的字体大小

> ID：15619672
> 
> 赞同：0
> 
> 时间：2013-03-25T16:17:02.003
> 
> 标签：android, css, cordova

我用 phonegap 包装了我的网站。但所有字体都比平时大。如果我用手机浏览器打开我的页面，字体是正常的。你能提出任何解决方案吗？

# heroku - Heroku 上未初始化的常量 Gem::Package

> ID：15619674
> 
> 赞同：0
> 
> 时间：2013-03-25T16:17:11.480
> 
> 标签：heroku, gzip, tar

尝试`Gem::Package::TarWriter`在 Heroku上使用

```
Gem::Package::TarWriter.new(tar_str) do |writer| 
```

以错误结束：

```
uninitialized constant Gem::Package 
```

但一切都在本地工作。

[一篇文章](http://betterlogic.com/roger/2010/08/rubygems-woes/)对此进行了解释：“当 ruby​​ 本身以非管理员身份安装时，您正在从以管理员身份打开的命令窗口运行 gem install”（反之亦然）。

好的，但我无法完全控制 Heroku。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-13T15:13:36.127

老问题，但是当我遇到一个`uninitialized constant Gem::Package`.

就我而言，`require 'rubygems/package'`这是需要的。在某些时候这不是必需的，但现在它是。

# wcf-data-services - 当存储在一台服务器上而服务在另一台服务器上时，文件存储服务应该如何设计？

> ID：15619680
> 
> 赞同：0
> 
> 时间：2013-03-25T16:17:24.723
> 
> 标签：wcf-data-services, cloud-storage

我的公司为应用程序购买了巨大的存储空间来存储文件。我们公司将来可能总是有可能选择不同的存储供应商。因此，我不想通过使用其 REST 服务直接访问存储，而是想在其之上设计一个包装器，以便在需要时可以更改底层存储而无需进行太多更改。

我将要创建的服务 (REST) 在与存储服务器不同的服务器上运行。这是更好的方法吗？因为我看到当客户端通过使用服务上传文件时，必须先将文件加载到我的服务器上，然后再将其推送到存储服务器。

构建这样的东西的更好方法应该是什么？我们更喜欢在 .NET 中执行此操作，但如果合适，我们可以选择不同的技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:34:54.057

这将取决于您要优化的内容。如果您的后端存储 API 发生变化，您的方法可以优化客户端应用程序的开发时间。如果您预计您的后端存储 API 会经常更改，那么这是一个有效的优化，我会说您在正确的轨道上。我会使用 WCF 之类的东西（不一定是 WCF DataServices，它更针对结构化数据，例如数据库）。

但是，如果您的后端存储 API 不经常更改，那么增加额外的包装层的开销可能不值得。

这将是我的决定性问题，您预计后端存储 API 的更改频率如何？

# java - 取消选中java中的复选框

> ID：15619682
> 
> 赞同：7
> 
> 时间：2013-03-25T16:17:29.773
> 
> 标签：java, jcheckbox

在我的程序中，每当调用此方法时，我都想取消选中所有复选框。有人可以解释为什么它不起作用吗？每当我调用此方法时，复选框仍处于选中状态。

```
private void nextQuestionButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                   

     clearOptions();

}    

public void clearOptions ()   
{ 
    //Make sure the check boxes are not checked
    optionA.setSelected(false);
    optionB.setSelected(false);
    optionC.setSelected(false);
    optionD.setSelected(false);  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-27T09:20:23.047

首先，您需要将所有复选框的代码放在例如状态更改方法的顶部，然后取消选中复选框，您可以创建一个变量，如状态并将变量值设置为 false，然后您可以打电话`checkbox.setSelected(false);`或`boolean state = false; CheckBox.setSelected(state);`就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T20:57:16.447

最简单的方法是将相同的按钮组应用于所有复选框。然后只需使用：

```
buttonGroup1.clearSelection(); 
```

在尝试了几乎所有方法之后。这是迄今为止最简单和最有效的一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-11T09:28:34.690

如果您确定`checkbox`已选中，则可以切换它。

```
checkbox.toggle(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T04:31:49.260

我尝试将此方法用于具有空参数的复选框组：

```
checkboxGroup1.setSelectedCheckbox(null); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T16:34:25.117

一般来说，在 Swing 中所做的任何更改都不会传播到可视元素。一个众所周知的例外是`JTextField.setText()`（对 setText 的任何调用都会立即更新可视文本元素）。

它甚至记录在 API 文档中：[http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setSelected(boolean)](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setSelected(boolean))。

您可以保留您的代码，但您必须（in）验证容器。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-06-23T21:17:46.663

```
 public void clearOptions ()   
{ 
            checkbox1.setState(false); 
             checkbox2.setState(false);
             checkbox3.setState(false);
             checkbox4.setState(false);
} 
```

# ios - API 进程阻塞映射和交互

> ID：15619687
> 
> 赞同：0
> 
> 时间：2013-03-25T16:17:34.680
> 
> 标签：ios, objective-c, multithreading

我正在构建一个 iOS 应用程序（6.0+），流程是这样的：

1.  触摸应用程序图标
2.  应用程序开始加载，显示第一个视图（地图视图）
3.  一旦应用程序有了位置，通过 http 请求从 API 获取有关它的信息
4.  使用该数据填写一些地图注释

我发现在 2 点，应用程序完全停止响应，直到 4 点结束。感觉就像是一次糟糕的体验，就像应用程序在完成添加注释之前一直冻结一样。

我怎样才能绕过这种阻塞行为？我怀疑答案与我如何处理我的任务有关，但我真的不知道在哪里看，或者它是否真的是我应该解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:23:36.707

您应该使用异步请求从服务器获取数据，否则应用程序将等待直到请求完成。

您可以使用 NSURLConnection 的以下类方法之一

[连接请求：代表：](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/connectionWithRequest%3adelegate%3a)

[发送异步请求：队列：完成处理程序：](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest%3aqueue%3acompletionHandler%3a)

或者使用像[AFNetworking这样的框架](https://github.com/AFNetworking/AFNetworking)

# sql-server-2008 - 获得客户普遍购买的TOP N对产品

> ID：15619690
> 
> 赞同：1
> 
> 时间：2013-03-25T16:17:37.337
> 
> 标签：sql-server-2008, tsql

我遇到了这样一个问题，即退回客户共同购买的前 N ​​对产品。假设我有以下查询：

```
SELECT c.CustomerKey, ProductAlternateKey
FROM 
    [AdventureWorksDW2008R2].[dbo].[FactInternetSales] FIS JOIN
    dbo.DimCustomer C ON C.CustomerKey = FIS.CustomerKey JOIN
    dbo.DimProduct P ON P.ProductKey = FIS.ProductKey

GROUP BY 
    C.CustomerKey, P.ProductAlternateKey 
```

它返回以下结果：

```
CustomerKey  | ProductAlternateKey| 
-------------+-----------+
0001         | A                  |
0001         | B                  |
0002         | A                  | 
0002         | B                  |
0002         | C                  |
0003         | B                  |
0003         | C                  |
0004         | A                  |
0004         | B                  |
0005         | A                  |
0005         | C                  | 
```

从这个查询中，我想找到客户购买的前 2 对产品，所以在我的示例中 -> (A,B) 3 次出现和 (B,C) -> 2 次出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:44:50.773

使用 RANK 或 DENSERANK 函数。MSDN 关于 Rank 功能：http: [//msdn.microsoft.com/en-us/library/ms176102.aspx](http://msdn.microsoft.com/en-us/library/ms176102.aspx)

自提取 SQL 的示例用法：

```
declare @Person Table ( personID int identity, person varchar(8));

insert into @Person values ('Brett'),('Sean'),('Chad'),('Michael'),('Ray'),('Erik'),('Queyn');

declare @Orders table ( OrderID int identity, PersonID int, Desciption varchar(32), Amount int);

insert into @Orders values (1, 'Shirt', 20),(1, 'Shoes', 50),(2, 'Shirt', 22),(2, 'Shoes', 20),(3, 'Shirt', 20),(3, 'Shoes', 50),(3, 'Hat', 20),(4, 'Shirt', 20),(5, 'Shirt', 20),(5, 'Pants', 30),
(6, 'Shirt', 20),(6, 'RunningShoes', 70),(7, 'Shirt', 22),(7, 'Shoes', 40),(7, 'Coat', 80);

with a as 
    (
    Select
        person
    ,   o.Desciption
    ,   o.Amount
    ,   rank() over(partition by p.personId order by Amount) as Ranking
    ,   Dense_rank() over(partition by p.personId order by Amount) as DenseRanking
    from @Person p
        join @Orders o on p.personID = o.PersonID
    )
select *
from a 
where Ranking <= 2  -- determine top 2, 3, etc.... whatever you want.
order by person, amount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T02:40:27.880

测试一下：

```
declare @Orders table ( OrderID int identity, PersonID int,  Description varchar(32), ProductId int, Amount int);

insert into @Orders values (1, 'Shirt', 1, 20),(1, 'Shoes', 2, 50),(2, 'Shirt', 1, 22),(2, 'Shoes', 2, 20),(3, 'Shirt', 1, 20),(3, 'Shoes', 2, 50),(3, 'Hat',   3, 20),(4, 'Shirt', 1, 20),(5, 'Shirt', 1, 20),(5, 'Pants', 4, 30),(6, 'Shirt', 1, 20),(6, 'RunningShoes', 5, 70),(6, 'Hat', 3, 20),(7, 'Shirt', 1, 22),(7, 'Shoes', 2, 40),(7, 'Coat', 6, 80);

select
     top 2       
     I.Description,
     M.Description
from @Orders as I
inner join @Orders as C on C.ProductId = I.ProductId   and C.PersonId <> I.PersonId
inner join @Orders as M on C.PersonId = M.PersonId and C.ProductId <> M.ProductId
where 
    I.productid = 3
    and I.ProductId<>M.ProductId
group by 
    I.Description
    ,M.Description
order
    by count(2) desc 
```

# c - 在 C shell 中实现历史

> ID：15619691
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:17:40.153
> 
> 标签：c, shell, history

我正在创建一个简单的 C shell，并被要求实现一个历史功能，有人知道我会怎么做吗？它应该能够打印历史，保存并加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:21:10.063

您可以使用数组`char *`将命令保存在内存中。

```
char *history_command[MAX_COMMAND]; 
```

并使用磁盘中的文件来保存`history_command`阵列。

每次`history_command`更改数组时都会删除文件并将其保存`history_command`在相同的文件名中

保留一个`start`索引（最初为零）和大小，所以如果`size < MAX_COMMAND`，你写到`history[size++]`，如果`size == MAX_COMMAND`你写到`history[start++]`（后面跟着`start %= MAX_COMMAND;`）。这样你的数组就变成了圆形（**@shahbaz**建议）

否则，您可以对此类行为使用链表。这是一个先进先出队列。所以用链表处理可能是另一种解决方案

# ant - 删除除一个以外的文件夹

> ID：15619692
> 
> 赞同：6
> 
> 时间：2013-03-25T16:17:41.820
> 
> 标签：ant

在 src 文件夹下，我有以下文件夹：daos、business 和 model。我想使用 ant 脚本删除除“model”之外的所有文件夹。所以我尝试了：

```
 <delete includeemptydirs="true">
    <fileset dir="${basedir}/src">
    <include name="**/*"/>
    <exclude name="model/*"/>
    </fileset>
   </delete> 
```

所有文件夹都被删除，除了“模型”是空的。它的所有文件都被删除。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-04T14:27:52.270

致未来的谷歌人：

什么对我有用：

```
<fileset dir="target">
    <include name="*/"/>
    <exclude name="big_and_complex_dir/"/>
</fileset> 
```

这删除了下面的所有内容（每个文件*和*目录）`target/`，除了`target/big_and_complex_dir`.

我的预期目标是避免不必要的目录演练，在“ `big_and_complex_dir`”的情况下需要很长时间。

似乎 ant 的文件集解释具有非平凡、非直观的行为，`/`如果我们也打算进行递归子目录操作，我们需要关闭包含/排除路径。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-25T21:10:12.357

试试吧

```
<delete includeemptydirs="true">
    <fileset dir="${basedir}/src">
        <include name="**/*"/>
        <exclude name="**/model/**"/>
    </fileset>
</delete> 
```

# android - 通过系统应用程序以编程方式静默安装 apk（无 root）

> ID：15619693
> 
> 赞同：36
> 
> 时间：2013-03-25T16:17:54.143
> 
> 标签：android, android-install-apk

我有 android:sharedUserId="android.uid.system" (UID: 1000) 的系统级应用程序。

设备没有root！清单中包含 INSTALL_PACKAGES 权限。

我可以静默安装下载的 *.apk 吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-27T13:29:29.420

我发现了问题。

1.  添加了“ `android.permission.INSTALL_PACKAGES`”权限。
2.  我使用“ `signapk.jar`”和我从设备制造商那里获得的证书签署了我的应用程序。
3.  `pm install /.../app.apk`现在这个应用程序可以使用“ ”而不用“su”来安装其他应用程序。

有用！

PS仅使用“pm install”**更新应用程序**不会用新应用程序替换现有应用程序，而是返回 exit_value = 0。所以更新有两种方法：

*   使用“ `pm install -r /.../app.apk`”；
*   首先使用“ ”删除应用程序`pm uninstall com.mydomain.myapp`（您需要“ `android.permission.DELETE_PACKAGES`”权限），然后安装新的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T16:29:53.417

你不能。仅仅拥有相同的 UID 是不够的。您还必须使用与 ROM 本身相同的密钥进行签名。

出于安全原因，不允许静默安装应用程序或更新您自己的应用程序。

# regex - 嵌套在其他模式中的正则表达式模式

> ID：15619695
> 
> 赞同：1
> 
> 时间：2013-03-25T16:18:00.023
> 
> 标签：regex

我有一个包含一些嵌入变量的字符串，我需要提取这些变量的名称。我不精通正则表达式，我无法让它工作。

这是字符串外观的示例：

> Lorem ipsum dolor sit amet {% #varName1 %}, consectetur adipisicing #non_var elit, sed
> 
> {% #varName2|prop1 %} 做 eiusmod tempor incididunt ut labore et dolore magna aliqua
> 
> {% 标识符 #varName3|prop2 %}。Ut enim ad minim veniam。

变量名称带有前缀`#`并放置在这些分隔符`{%`和`%}`. 使用这个表达式我可以匹配变量名：

```
(?<=#)(.*?)(?=[\s\|]) 
```

但是，这也匹配`#non_var`不在分隔符内且不是有效变量的内容。

我也试过这个：

```
(?<={% )(#(.*?)[^\s\|])(?= %}) 
```

但这仅匹配`#varName1`and `#varName2|prop1`（我不需要该`prop1`部分）。预期的结果是匹配：

`varName1`,`varName2`和`varName3`.

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:25:17.267

由于您没有提到正在使用哪种语言/应用程序，我将给出一个一般用例；我自己已经在 Notepad++ 中成功尝试过。

您可以使用正则表达式：

```
(\{%[^#]*#)([\w]*)(.*?%\}) 
```

这里`varname`可以包含任意长度的字母、数字和下划线。如果要强制执行变量名称的第一个字符可能不是数字的条件，请使用：

```
(\{%[^#]*#)([a-z_][\w]*)(.*?%\}) 
```

这将识别 和 之间的所有内容，包括`{%`和`%}`。现在您可以使用对第二个匹配子表达式的反向引用（`$2`在 Notepad++ 中；`\2`在许多编程语言中）来获取`varnames`.

对于您的输入文本，

> Lorem ipsum dolor sit amet {% #varName1 %}, consectetur adipisicing #non_var elit, sed {% #varName2|prop1 %} do eiusmod tempor incididunt ut labore et dolore magna aliqua {% identifier #varName3|prop2 %}。Ut enim ad minim veniam。

我的搜索和替换给了我：

> Lorem ipsum dolor sit amet varName1, consectetur adipisicing #non_var elit, sed varName2 do eiusmod tempor incididunt ut labore et dolore magna aliqua varName3。Ut enim ad minim veniam。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:32:17.010

试试这个 - 我认为这是正确的：

```
(?<=\{%.*#)[\w|]+(?=.*%\}) 
```

# c++ - 兑换 至 C++，Win32

> ID：15619696
> 
> 赞同：13
> 
> 时间：2013-03-25T16:18:11.733
> 
> 标签：c++, string, vector

有没有一些方法可以将向量转换为 C++、win32 中的向量？

我有这个带数字的字符串向量：

```
std::vector<std::string> DataNumbers; 
```

我需要将此向量字符串转换为向量整数。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-25T16:26:23.653

鉴于：

```
std::vector<std::string> DataNumbers;
// Fill DataNumbers
std::vector<int> Data; 
```

您可以使用`std::transform`. 使用 a`std::back_inserter`将值插入`std::vector<int>`. 对于一元函数，使用`std::stoi`用于将字符串转换为整数的 lambda 表达式。

```
std::transform(DataNumbers.begin(), DataNumbers.end(), std::back_inserter(Data),
               [](const std::string& str) { return std::stoi(str); }); 
```

这是一个没有 lambdas 的版本（`std::bind`改为使用）：

```
typedef int(*stoi_type)(const std::string&, std::size_t*, int);
std::transform(DataNumbers.begin(), DataNumbers.end(), std::back_inserter(Data),
               std::bind(static_cast<stoi_type>(&std::stoi),
                         std::placeholders::_1, nullptr, 10)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T16:50:30.043

尝试这个：

```
 std::vector<std::string> DataNumbers;
    // Fill DataNumbers
    std::vector<int> intNumbers;
    for (int i=0; i<= 5; i++)
    {
     int num = atoi(DataNumbers.at(i).c_str());
     intNumbers.push_back(num);
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T16:21:31.237

C++ 的做法是这样的：

```
vector<std::string> input = ...;
vector<int> output;

for (auto &s : input) {
    std::stringstream parser(s);
    int x = 0;

    parser >> x;

    output.push_back(x);
} 
```

在不知道输入失败时你想做什么的情况下，这里没什么好说的了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-14T09:27:16.030

关于什么：

```
#include <algorithm>
#include <boost/lexical_cast.hpp>

template<typename C1, typename C2>
void castContainer(const C1& source, C2& destination)
{
    typedef typename C1::value_type source_type;
    typedef typename C2::value_type destination_type;
    destination.resize(source.size());
    std::transform(source.begin(), source.end(), destination.begin(), boost::lexical_cast<destination_type, source_type>);
} 
```

它可以将vector<string> 转换为vector<int>，也可以将其他container<T1> 转换为container2<T2>，例如：list -> list。

完整代码：

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>
#include <string>
#include <boost/lexical_cast.hpp>

template<typename C1, typename C2>
void castContainer(const C1& source, C2& destination)
{
    typedef typename C1::value_type source_type;
    typedef typename C2::value_type destination_type;
    destination.resize(source.size());
    std::transform(source.begin(), source.end(), destination.begin(), boost::lexical_cast<destination_type, source_type>);
}

template<typename T, typename T2>
std::vector<T>& operator<<(std::vector<T>& v, T2 t)
{
    v.push_back(T(t));
    return v;
}

main(int argc, char *argv[])
{   
    std::vector<std::string> v1;
    v1 << "11" << "22" << "33" << "44";
    std::cout << "vector<string>: ";
    std::copy(v1.begin(), v1.end(), std::ostream_iterator<std::string>(std::cout, ", "));
    std::cout << std::endl;

    std::vector<int> v2;
    castContainer(v1, v2);

    std::cout << "vector<int>: ";
    std::copy(v2.begin(), v2.end(), std::ostream_iterator<int>(std::cout, ", "));
    std::cout << std::endl;
} 
```

# requirejs - Durandal 中哪种 RequireJS 语法是正确的？

> ID：15619697
> 
> 赞同：1
> 
> 时间：2013-03-25T16:18:17.473
> 
> 标签：requirejs, durandal

我对 Durandal 很陌生，但考虑到我在 jQuery 和一点 KnockoutJS 方面的背景，我认为它是一个很棒的框架，但是我遇到了似乎是在 Durandal 中使用 RequireJS 的两种不同方法。

在 Durandal 示例中，使用了以下语法： [Durandal / App / samples / modal / index.js](https://github.com/BlueSpire/Durandal/blob/master/App/samples/modal/index.js)

```
 define(['durandal/app', './customModal'], function (app, CustomModal) {

    return {
        showCustomModal: function() {
            app.showModal(new CustomModal()).then(function(response) {
                app.showMessage('You answered "' + response + '".');
            });
        }
    };
}); 
```

这里的依赖项/要求（这是正确的词吗？）被定义为调用 define ( `['durandal/app', './customModal']`) 的第一个参数。

在 Durandal 文档中，使用了以下语法：[创建模块](http://durandaljs.com/documentation/Creating-A-Module/)

```
define(function(require){
  var backend = require('backend');

  return {
    customers:ko.observableArray([]),
    activate:function(){
      var that = this;
      return backend.getCustomers().then(function(results){
        that.customers(results);
      });
    }
  };
}); 
```

这里只有函数被传递给定义的调用，需要作为该函数的依赖项/要求。然后调用 require 函数以获取所需的实际依赖项/需求 ( `var backend = require('backend');`)。

来自 .net IoC 背景，第一个似乎是正确的，定义我的要求并让 requirejs 框架为我定位依赖项，第二个似乎是服务定位器反模式。

我对这两种方法的解释是否正确，应该使用第一种方法，并且文档是错误的（！）？

如果不是，这两种方法的优缺点是什么？建议使用哪一个，为什么？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:34:09.943

我认为无论你最喜欢哪种方式都是要走的路。我认为 requirejs 做到了，所以你可以做这两种方式，所以它可以支持[commonjs 模块格式](http://requirejs.org/docs/api.html#cjsmodule)。

根据 requirejs 的网站，如果您使用 durandal 解决其依赖项的方式：

```
define(function(require) { var app = require('durandal/app');  app.start(); } 
```

“这个包装器依赖 Function.prototype.toString() 来提供函数内容的有用字符串值。这在一些设备上不起作用，比如 PS3 和一些旧的 Opera 移动浏览器。” --[引用自 requirejs](http://requirejs.org/docs/api.html#cjsmodule)

但这是一个边缘案例，我认为没有太多人关心。除此之外.. 我会选择最适合您的套房。

我不确定您所说的服务定位器反模式是什么意思。我很确定这两种方式都是有效的，无论如何你选择这样做纯粹是为了美观。

**编辑****

Durandal 不再使用上述模式来解决其依赖关系。它现在使用这种方式：

```
define(['./app','./system'], function (app, system) { //... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:59:03.183

两种方式都是正确的。请浏览 Require JS 文档。Durandal JS 建立在 JQuery、Knockout 和 RequireJS 之上。浏览这篇博文。

# php - RSS 提要活动和非活动作业

> ID：15619702
> 
> 赞同：0
> 
> 时间：2013-03-25T16:18:31.813
> 
> 标签：php, mysql, wordpress

我需要你的建议。我有一个 wordpress 网站，我正在使用作业 rss 提要在数据库中填充作业。rss 提要作业 url 始终包含活动作业。

现在我该如何更新数据库，以便它始终显示活动的作业。我必须做这样的事情吗？

1.我必须从数据库中获取作业 url 并检查它是否返回 200 或 302 状态代码

2.从提要 url 中获取作业 id 并检查数据库。如果 id 已经存在，则使用标志 1（活动作业）更新这些 id，其余的 id 用 -1（非活动作业）更新，否则添加新条目

请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:25:54.880

除非作业更新提要不断更新，否则我可能会设置一个后台进程（即 cronjob）来获取 RSS 并更新数据库（可能正如您在上面的选项 2 中所建议的那样）。您可以将 cron 设置为根据您的目的尽可能频繁地运行。

您的选项＃1 似乎是一个糟糕的选择，因为您最终需要为数据库中的每个项目进行一堆 cURL 调用或其他任何操作。

您的选项#2 将允许单个 cURL 调用来获取 RSS。然后，您将从 XML 中提取一组 ID。然后我会利用数据库上的事务首先将所有记录更新为活动 = -1，然后将匹配记录更新为活动 = 1。这当然是假设您在数据库中没有大量的工作记录在这种情况下，您可能需要考虑优化更新，以免触及所有记录。

# hadoop - 新创建的 S3 目录的时间戳为 1969-12-31

> ID：15619712
> 
> 赞同：0
> 
> 时间：2013-03-25T16:19:08.313
> 
> 标签：hadoop, amazon-s3

我遇到了这个奇怪的问题，我在 S3N 上创建的所有目录都具有相同的时间戳，即 1969-12-31

我使用“hadoop fs -mkdir”并使用 mapreduce 作业创建了目录并获得了相同的时间戳。

如何获得正确的时间戳？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:26:29.377

这只是 s3-hdfs 实现中内置的一个 hack，因为 s3 并没有真正的目录概念，所以 hadoop 无处可读取目录创建/修改日期。

事实上，在 s3 中，所有文件都存储为根级对象，并且键中允许使用斜线“/”。因此，与 hdfs 不同的是，键前缀（目录）没有元数据。

例如，在 hdfs 中：

`/some/path.txt`<- /some 和 /some/path.txt 都有包含创建/修改日期的元数据

在 S3 中：

`/some/path.txt`是文件的名称。没有目录。添加斜杠作为分隔符只是允许 hadoop 假装 s3 具有目录的约定。如果你喜欢，你可以称它为 some-path.txt（尽管 hadoop 不会那么高兴）

因此，当您运行类似的东西时`hadoop fs -ls s3n://bucket/directory1/`，只需对创建日期使用默认值。

# windows-8 - Win8 Live Tile 垂直图像对齐

> ID：15619713
> 
> 赞同：0
> 
> 时间：2013-03-25T16:19:09.227
> 
> 标签：windows-8, vertical-alignment, live-tile

有什么方法可以垂直对齐活动磁贴的图像？我放入瓷砖的图像对于瓷砖来说太大了，它只显示图像的中心，但我想显示顶部。

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:35:19.313

方形图块为 150x150 像素，宽图块为 310x150 像素。来源：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh846296.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh846296.aspx)

只需自己调整图像大小，然后根据需要格式化/裁剪它（显示顶部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:34:38.727

没有。您无法在动态磁贴中对齐图像。您唯一的选择是为动态磁贴提供您想要显示的确切图像。您可以通过在应用程序或后台任务中本地或远程操作图像来完成此操作。如果您正在执行推送通知，那么服务器端操作是您唯一的选择。

# php - 在wordpress中，像“localhost/category/test/?var=123”这样的多级URL不能使用$_GET['var']？

> ID：15619715
> 
> 赞同：0
> 
> 时间：2013-03-25T16:19:16.327
> 
> 标签：php, web, wordpress, wordpress-theming

我正在为wordpress设计一个主题，但是在向url添加查询时，会出现问题：

这两种情况，我在文件 class-wp.php 中的 WP->parse_request(..) 中使用 $_GET['var'] ：

当 url 像这样 "loscalhost/?var=123", $_GET['var'] return 123;

当 url 像这样“localhost/category/test/?var=123”时，它不起作用，$_GET['var'] return null。

有人可以告诉我这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:38:47.960

WordPress 旨在忽略它不期望的任何 URL 查询参数。如果你想使用查询变量，那么你必须通知 WordPress 期望它。在你的情况下：

```
function filter_add_query_vars($query_vars)
{   
    $query_vars[] = 'var'; 
    return $query_vars;
}
add_filter( 'query_vars', 'filter_add_query_vars' ); 
```

将代码放在主题的functions.php中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T02:37:07.823

**这是一个草率的解决方案**：因为我什至可以使用 $_GET 来接收 URL 中的变量，例如 wp-blog-header 文件中的“localhost/category/test/?var=123”，但我可以使用 $_SERVER ['REQUEST_URI'] 来检索整个 URL，所以我更改了 wp-blog-header.php 中的代码。我改变

```
wp(); 
```

成为：

```
$url_array = explode('?', $_SERVER['REQUEST_URI']);
wp($url_array[1]); 
```

它可以工作，因为 wp() 也会收到额外的查询。

**但是我还是不明白为什么 $_GET 不起作用，所以我也等待一个有效的解释......**

# c# - 当用户在 TextBox 中输入值时，如何自动添加 ,00？

> ID：15619723
> 
> 赞同：0
> 
> 时间：2013-03-25T16:19:37.503
> 
> 标签：c#, .net

我的表单中有一些文本框，用户需要在其中输入文章的不同价格，我想做的是`,00`在文本更改时自动添加。因此，当用户键入时，`123`它会显示为`123,00`！

我尝试使用下面的代码，但它似乎不起作用：

```
private void textBox6_TextChanged(object sender, EventArgs e)
    {
        if (!textBox6.Text.Contains(","))

        textBox6.SelectionStart =textBox6.TextLength;
        textBox6.Text += ",00";
    } 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:21:44.940

仅用于`String.EndsWtih`检查字符串的结尾。

```
private void textBox6_TextChanged(object sender, EventArgs e)
{
    if (!textBox6.Text.EndsWith(",00"))
        textBox6.Text += ",00"
} 
```

除非您确实需要立即进行更改，否则请`TextChanged`使用事件而不是事件。`Leave`每次按下键时都进行这样的复杂操作往往效果不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:23:35.013

将代码与 TextBox 的按键事件一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:23:42.743

试试下面的代码：

```
textBox6.BeginInvoke(delegate ()=> 
{
   textBox6.Text +=",00"
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:23:58.147

就像 Jason 所说，您可以使用该`leave`事件，如果这不合适，则将其转换为字符串并将其反馈回文本框，如下所示：

```
 private void textBox6_TextChanged(object sender, EventArgs e)
        {

            string myString = textBox6.Text;
            if (!myString.Contains(','))
            {
                myString += ",00";
            }

            textBox6.Text = myString;
        } 
```

**我还建议查看检查以确保用户只输入数值。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:24:20.780

试试 string.Format。

```
string numStr = textBox6.Text;
decimal num;

if(decimal.TryParse(numStr, out num)){
  textBox6.Text = string.Format("{0:#,##0.00}", num);
} 
```

但是，如果您需要逗号 ',' 作为小数分隔符，则需要指定一些文化。

# java - 为什么我的 Hibernate 会话总是为空？

> ID：15619725
> 
> 赞同：0
> 
> 时间：2013-03-25T16:19:44.117
> 
> 标签：java, mysql, database, hibernate, null

我正在使用 Hibernate 连接到我的数据库，当我想从数据库加载数据时，我在会话中得到空指针异常。我不知道为什么？一切对我来说都很好：<我有这个类可以从数据库中读取：

```
package bbstats.domain;

import bbstats.util.HibernateUtil;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;

import java.util.List;

public class EventManager extends HibernateUtil
{

    @Autowired
    SessionFactory sessionFactory;

    protected Class<DbUserData> clazz;

    public List<DbUserData> getAll()
    {
        return this.getCurrentSession().createCriteria(clazz).list();
    }

    protected final Session getCurrentSession()
    {
        return this.sessionFactory.getCurrentSession();
    }

    public static void main(String args[])
    {
        EventManager eventManager = new EventManager();
        System.out.println(eventManager.getAll());
    }
}

package bbstats.util;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public class HibernateUtil extends HibernateDaoSupport
{
    private SessionFactory sessionFactory;

    @Autowired
    public void anyMethodName(SessionFactory sessionFactory)
    {
        setSessionFactory(sessionFactory);
    }
}

package bbstats.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Table;
@Entity
@Table(name = "Users")
public class DbUserData
{
    @Column(name = "id", unique = true, nullable = false)
    private Long id;
    @Column(name = "nick", nullable = false, length = 26)
    private String title;

    public DbUserData() {}

    public Long getId() {
        return id;
    }

    private void setId(Long id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
} 
```

当我尝试运行它时，我得到了异常：

```
Exception in thread "main" java.lang.NullPointerException
    at bbstats.domain.EventManager.getCurrentSession(EventManager.java:25) 
```

它在这里：

```
protected final Session getCurrentSession()
{
    return this.sessionFactory.getCurrentSession();
} 
```

为什么？我怎样才能解决这个问题？

编辑：我有这个标签的文件是正确的吗？我没有其他带有标签的文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:utils="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <!-- Hibernate session factory -->
    <bean id="sessionFactory"
          class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
        <property name="packagesToScan" ref="sessionFactoryDomainToScan"/>

    </bean>

    <utils:list id="sessionFactoryDomainToScan">
        <value>bbstats.domain</value>
    </utils:list>

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="properties" ref="clientProperties"/>
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
    </bean>

    <bean id="clientProperties"
          class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="locations" value="/database.properties"/>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>

    </bean>
</beans> 
```

还是应该为我的 EventManager 类添加一些其他 bean？可能不需要一些豆子吗？

依赖项：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.2.1.RELEASE</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.9.Final</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.5.6-Final</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>net.sourceforge.jtds</groupId>
        <artifactId>jtds</artifactId>
        <version>1.3.0</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.0.3.RELEASE</version>
    </dependency> 
```

现在那个例外： `Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'eventManager' defined in class path resource [hibernate.cfg.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [hibernate.cfg.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: [Lorg/hibernate/engine/FilterDefinition; Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [hibernate.cfg.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:27:32.673

您应该从 spring 上下文中检索 EventManager 实例。

您可以将 eventManager 定义为文件中的 bean。您可以将其定义为：

```
<bean id="eventManager" class="bbstats.domain.EventManager">
 <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

假设您的 spring 配置文件名为 springConfig.xml 并且 eventManager 定义为 bean，那么您可以使用

```
ApplicationContext context = 
          new ClassPathXmlApplicationContext(new String[] {"springConfig.xml"});

        EventManager eventManager = (EventManager)context.getBean("eventManager"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:23:46.593

为了注入 SessionFactory（感谢注解`@Autowired`），bean`EventManager`必须由容器（即 Spring）而**不是**您自己实例化（就像您在 main 方法中所做的那样`EventManager eventManager = new EventManager();`：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:20:45.153

删除此方法：

```
 @Autowired
    public void anyMethodName(SessionFactory sessionFactory)
    {
        setSessionFactory(sessionFactory);
    } 
```

并为方法添加`@Autowired`注释`setSessionFactory`。

**更新**

海这个链接（在这里你可以找到解决方案）：

1.  [第一的](https://stackoverflow.com/questions/8565051/spring-3-1-hibernate-4-sessionfactory)
2.  [第二](https://stackoverflow.com/questions/7528862/exception-noclassdeffounderror-for-cacheprovider)
3.  [第三](https://stackoverflow.com/questions/10472206/maven-hibernate-spring-problems)

# c++ - 我能以某种方式找出基类构造函数中对象的类型吗？

> ID：15619726
> 
> 赞同：0
> 
> 时间：2013-03-25T16:19:58.860
> 
> 标签：c++, inheritance, casting, dynamic-cast

`Group`是 的子类`Element`。任何组都可以包含元素（自然可以是组）。每个元素都向其包含的组注册自己，该组被传递到构造函数中。但`dynamic_cast`在构造函数完成之前似乎不起作用。

我是否仍然可以`add_element`从构造函数自动调用但仍确保对象已准备就绪`dynamic_cast`？

```
#include <iostream>
#include <vector>

class Group;

class Element {
public:
    Element(Group* group);
    virtual ~Element();

private:
    Group* group;
};

class Group : public Element {
public:
    Group(Group* group);
    void add_element(Element* element);
    void remove_element(Element* element);

private:
    std::vector<Element*> elements;
};

Element::Element(Group* group) : group(group)
{
    if (group)
        group->add_element(this);
}

Element::~Element()
{
    if (group)
        group->remove_element(this);
}

Group::Group(Group* group) : Element(group)
{
}

void Group::add_element(Element* element)
{
    if (dynamic_cast<Group*>(element))
        std::cout << "Adding a group" << std::endl;
    else
        std::cout << "Adding an element" << std::endl;
    elements.push_back(element);
}

void Group::remove_element(Element* element)
{
    // No need to implement this actually...
}

int main()
{
    Group* parent = new Group(0);
    Group* child = new Group(parent);
} 
```

**注意：**这里的原始问题有所不同，但事实证明这`dynamic_cast`不是问题；`dynamic_cast`在构造函数中是。

# c# - 带有 C++ 2008 Redistributables 的 VS2010 安装项目？

> ID：15619728
> 
> 赞同：1
> 
> 时间：2013-03-25T16:20:02.840
> 
> 标签：c#, c++, visual-studio, windows-installer, setup-project

情况如下：

*   我有一个安装 C# 可执行文件的 Visual Studio **2010**安装项目
*   安装包含一个引用 C++ dll 的 C# dll
*   C++ dll 需要 C++ **2008**库

问题是让安装项目安装 C++ 2010 库非常容易，但我在尝试安装 2008 时运气不佳。

*   对于 2010，只需在项目的 Properties > Prerequisites 部分中选择 C++ 2010 即可。2008 年不是一个选择。
*   我找到了很多关于使用合并模块安装 C++ 可再发行组件的文档。但是，在我机器的 C:\Program Files (x86)\Common Files\Merge Modules 目录中，我只有 C++ 2010 合并模块。我无法从任何有信誉的来源找到可供下载的 C++ 2008 合并模块。
*   我可以很容易地下载可[再发行安装程序](http://www.microsoft.com/en-us/download/details.aspx?id=15336)，但我不知道如何让安装项目使用它。
*   我发现这篇关于创建引导程序包的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/ms165429%28v=vs.100%29.aspx)然而，[Bootstrapper Manifest Generator](http://archive.msdn.microsoft.com/bmg)似乎只适用于 VS2008 和 VS2005（见评论）。

我无权/能力执行以下任何操作，我认为这可以解决问题：

*   安装 VS2008 以获得正确的合并模块
*   使用不同的安装程序，例如 InstallShield。
*   重新编译 C++ dll 以使用 2010 库。

如果有人以前遇到并解决过这个问题，我欢迎您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:26:53.990

合并模块随附 VS2008 和 VS2008 许可证。创建依赖于 2008 运行时的 C++ dll 的人可能拥有 VS2008 的许可证。您可以要求他们提供给您——这样做是合法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:20:54.547

为了在 VS 2010 中添加 C++ 2008 可再发行组件作为先决条件，我发现以下步骤是有效的：

1.  确定可再发行产品的产品密钥。这里有一个很好的列表：http: [//blogs.msdn.com/b/astebner/archive/2009/01/29/9384143.aspx](http://blogs.msdn.com/b/astebner/archive/2009/01/29/9384143.aspx)
2.  将安装可执行文件和相应的 xml 文件添加到引导程序目录 ( `C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages`)，如下所述：http: [//insomniacgeek.com/clickonce-4-0-package-for-the-c-2008-sp1-redist-atl-security -更新/](http://insomniacgeek.com/clickonce-4-0-package-for-the-c-2008-sp1-redist-atl-security-update/)
3.  重新启动 VS，并检查安装项目的先决条件列表。现在所有人都应该在场。

另外，顺便说一句，我发现除非您采取此问题中概述的步骤：[Visual C++ 2010 Runtime Libraries 先决条件不断弹出在 VS 2010 创建的安装程序上，](https://stackoverflow.com/questions/7785328/visual-c-2010-runtime-libraries-prerequisite-keeps-popping-up-on-a-vs-2010-cre)您的 C++ 2010 可再发行组件将始终尝试安装，即使它们已经存在.

# c# - 如何使用 SqlCommand 将多个 T-SQL 语句（由 GO 分隔）链接到对 SQL 的单个调用中

> ID：15619729
> 
> 赞同：8
> 
> 时间：2013-03-25T16:20:08.350
> 
> 标签：c#, .net, sql, sqlcommand

我有一个 C# 桌面应用程序，它调用各种 SQL Server 存储过程来执行将数据导出和导入 SQL Server 2008 R2 数据库的各种工作。

这些都可以正常工作，没问题。我的应用程序使用所有参数等都可以很好地调用它们。

为了“帮助用户”，我编写了一个按钮来将所有存储过程添加到配置的数据库中。为此，我创建了一个脚本：

```
USE [%DATABASENAME%]
GO        

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[spMyProc1]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[spMyProc1]
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[spMyProc2]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[spMyProc2]
GO

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[spMyProc3]') AND type in (N'P', N'PC'))
DROP PROCEDURE [dbo].[spMyProc3]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[spMyProc1]
        @VariousParams varchar(100),
    @ResultText varchar(4000) OUTPUT
AS
BEGIN
  -- Code removed for brevity
END

GO
--

CREATE PROCEDURE [dbo].[spMyProc2]
        @VariousParams varchar(100),
    @ResultText varchar(4000) OUTPUT
AS
BEGIN
  -- Code removed for brevity
END

GO
--

CREATE PROCEDURE [dbo].[spMyProc3]
        @VariousParams varchar(100),
    @ResultText varchar(4000) OUTPUT
AS
BEGIN
  -- Code removed for brevity
END

GO 
```

当我在 SQL Server Management Studio 中运行它时，它运行良好，完全没有问题。

但是，在我的 C# 应用程序中，抛出了一个异常，并且我收到了大量错误，如下所示：

> 'GO' 附近的语法不正确。
> 'GO' 附近的语法不正确。
> 'GO' 附近的语法不正确。
> 'GO' 附近的语法不正确。
> 'GO' 附近的语法不正确。
> 'GO' 附近的语法不正确。
> 'CREATE/ALTER PROCEDURE' 必须是查询批处理中的第一条语句。
> 在此上下文中不能使用具有返回值的 RETURN 语句。
> 在此上下文中不能使用具有返回值的 RETURN 语句。
> 'GO' 附近的语法不正确。
> 必须声明标量变量“@MessageText”。
> 必须声明标量变量“@ListOfIDsToImport”。
> 必须声明标量变量“@SourceDataFolder”。
> 
> 必须声明标量变量“@SequenceNo”。
> 必须声明标量变量“@UserID”。
> 必须声明标量变量“@SequenceNo”。
> 必须声明标量变量“@UserID”。
> 必须声明标量变量“@ListOfIDsToImport”。
> 必须声明标量变量“@ListOfIDsToImport”。
> 必须声明标量变量“@ListOfIDsToImport”。
> 必须声明标量变量“@MessageText”。
> 必须声明标量变量“@MessageText”。
> 必须声明标量变量“@MessageText”。
> 'GO' 附近的语法不正确。
> 变量名“@PS_DEFAULT”已被声明。
> 变量名称“@PS_ERROR_MSG”已被声明。变量名称在查询批处理或存储过程中必须是唯一的。
> 变量名称“@PS_ERROR_SEVERITY”已被声明。变量名称在查询批处理或存储过程中必须是唯一的。
> 必须声明标量变量“@SequenceNo”。
> 'GO' 附近的语法不正确。

（这是 ex.Message 中的内容，被下面代码中的 catch 块捕获）。

我的代码非常简单，如下所示：

```
 bool retVal = false;
    string command = Properties.Resources.MyApp_StoredProcedures.ToString().Replace("%DATABASENAME%", Properties.Settings.Default.DBName);

    try
    {
        sqlCmd = new SqlCommand(command, csSQLConnection._conn);
        sqlCmd.ExecuteNonQuery();
        retVal = true;
    }
    catch (Exception ex)
    {
        retVal = false;
    }
    finally
    {
        sqlCmd.Dispose();
    } 
```

（上面的替换只是替换了脚本顶部 USE 行中的占位符，当我单步通过该行时，我可以看到它的工作原理）。

所以基本上，我做错了什么，因为 SQL 本身似乎很好？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:26:10.360

据我所知，您不能设置单个 ADO.NET 对象来执行包含批处理终止符（“GO”）的脚本。您必须做以下两件事之一：

1.  创建一个 SQL Management Studio 对象并在后台运行它。我知道 SQL Management Studio 的文件夹中有 DLL 可以从 SSMS 中工作。我已经创建了 .NET 代码来为某人打开 SSMS 并即将加载它，但不直接执行它。

2.  为每个方法执行一个并分解您的 SQL 脚本，以将“GO”语句中的对象数组创建到 List 或类似的内存中。然后使用“foreach”语句遍历该列表，以使用适当的 try/catch 块执行每一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:23:50.520

这应该很容易...

摆脱 GO，这是 SSMS 特定的语法，SQL 语言不需要或支持它，而是你应该用 ; 终止你的个人创建脚本 . 让我知道情况如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T14:29:39.427

如果脚本来自 a [`Stream`](https://msdn.microsoft.com/en-us/library/system.io.stream%28v=vs.110%29.aspx "MSDN – 流类")（例如来自嵌入式资源，通过[`Assembly.GetManifestResourceStream()`](https://msdn.microsoft.com/en-us/library/5kx66y1a%28v=vs.110%29.aspx "MSDN – Assembly.GetManifestesourceStream（类型，字符串）")、来自 a[`FileStream`](https://msdn.microsoft.com/en-us/library/system.io.filestream%28v=vs.110%29.aspx "MSDN – FileStream 类")或 a [`MemoryStream`](https://msdn.microsoft.com/en-us/library/system.io.memorystream%28v=vs.110%29.aspx "MSDN – MemoryStream 类")）。您可以使用以下内容拆分可以包括的[SSMS](https://msdn.microsoft.com/en-us/library/ms174173.aspx "MSDN – 使用 SQL Server 管理工作室") [SQLCMD](https://msdn.microsoft.com/en-us/library/ms174187.aspx#Anchor_4 "MSDN – 编辑 SQLCMD 脚本：支持的语法")批处理脚本`GO`：

```
public IEnumerable<string> GetScriptParts(Stream script)
{
    const string reBatchSeparator = @"^(/\*.\*/)?\s*GO\s*(/\*.*\*/)?\s*(--.*)?$";

    using (StreamReader sr = new StreamReader(script))
    {
        StringBuilder sb = new StringBuilder();
        while(!sr.EndOfStream)
        {
            string line = sr.ReadLine();
            if (!batchSeparator.IsMatch(line))
            {
                sb.AppendLine(line);
            }
            else
            {
                string part = sb.ToString();
                if (!string.IsNullOrEmpty(part))
                {
                    yield return part;
                }
                sb.Clear();
            }
        }

        string part = sb.ToString();
        if (!string.IsNullOrEmpty(part))
        {
            yield return part;
        }
    }
} 
```

该方法`ExecuteBatch`通过以下方式顺序执行脚本部分[`SqlCommand`](https://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand%28v=vs.110%29.aspx "MSDN – SqlCommand 类")：

```
public void ExecuteBatch(SqlConnection conn, Stream script)
{
    foreach (string part in GetScriptParts(script))
    {
        SqlCommand cmd = conn.CreateCommand();

        cmd.CommandText = part;
        cmd.ExecuteNonQuery();
    }
} 
```

# asp.net-mvc - 自定义控制器命名空间处理

> ID：15619732
> 
> 赞同：2
> 
> 时间：2013-03-25T16:20:19.263
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在将现有应用程序从 ASP.NET webforms 移动到 ASP.NET MVC。

在 admin 目录和 public 目录下都有一些页面名称，例如 /help/ 和 /admin/help/

命名空间与目录结构相匹配，因此 /help 页面将在 MyApplication.Help 中，而 /admin/help 将在 MyApplication.Admin.Help 中。我想为控制器保留该设置，所以理想情况下我想拥有 MyApplication.Help.HelpController 和 MyApplication.Admin.Help.HelpController。

我已经设置了这样的路线

```
 routes.MapRoute(
      "Admin",
        // Route name
      "admin/{controller}/{action}/{id}",
        // URL with parameters
      new { controller = "Home", action = "Index", id = "" },
        // Parameter defaults
    new []{"MyApplication.Admin.*"}
        //namespaces to find controller in
    ).DataTokens["UseNamespaceFallback"] = false;

    routes.MapRoute(
      "Default",
        // Route name
      "{controller}/{action}/{id}",
        // URL with parameters
      new { controller = "Home", action = "Index", id = "" },
        // Parameter defaults
    new [] { "MyApplication.*" }
        //namespaces to find controller in
    ).DataTokens["UseNamespaceFallback"] = false; 
```

使用此设置，/admin/help 路由工作正常，但 /help 路由失败，抱怨多个类型与名为“help”的控制器匹配（因为 MyApplication.Help.HelpController 和 MyApplication.Admin.Help.HelpController 显然都匹配MyApplication.* 我给出的命名空间）。

是否有可能

1.  为两条路由设置命名空间，以便第二条匹配“除了管理员之外的任何东西”

2.  为两条路线设置命名空间，以便第二条路线仅在有一层文件夹但没有两层时匹配，或者

3.  编写一个自定义方法，告诉路由在哪个命名空间中查找控制器（这样我就可以自己实现这个逻辑）？

不幸的是，更改文件夹层次结构（例如，将所有非管理页面放在“公共”文件夹/命名空间下）不是一种选择（因为我正在逐步迁移到 MVC，因此某些页面仍然用作 Web 表单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:38:39.433

所以这就是我最终要做的，至少现在是这样。对于非管理员路由，我创建了一个方法，该方法将列出所有适当的命名空间并在应用程序启动时将它们注册到路由中。大概这会在一定程度上减慢应用程序的启动速度，但我看不出有什么不同。

如果有人有更好的方法，我很高兴听到。

```
routes.MapRoute(
  "Admin",
    // Route name
  "admin/{controller}/{action}/{id}",
    // URL with parameters
  new { controller = "Home", action = "Index", id = "" },
    // Parameter defaults
new []{"MyApplication.Admin.*"}
    //namespaces to find controller in
).DataTokens["UseNamespaceFallback"] = false;

routes.MapRoute(
  "Default",
    // Route name
  "{controller}/{action}/{id}",
    // URL with parameters
  new { controller = "Home", action = "Index", id = "" },
    // Parameter defaults
GetNonAdminNamespaces()
    //namespaces to find controller in
).DataTokens["UseNamespaceFallback"] = false;

  private static string[] GetNonAdminNamespaces()
  {
      var namespaces = new HashSet<string>();
      System.Type[] allTypes =  Assembly.GetCallingAssembly().GetTypes();
      foreach (var item in allTypes)
      {
          string ns = item.Namespace;
          if ( !string.IsNullOrEmpty(ns) && ns.StartsWith("MyApplication.") && !ns.StartsWith("MyApplication.Admin."))
          {
              namespaces.Add(ns);
          }
      }
      return namespaces.ToArray();
  } 
```

# node.js - 如何处理单个页面 Web 应用程序的多个视图

> ID：15619733
> 
> 赞同：0
> 
> 时间：2013-03-25T16:20:24.090
> 
> 标签：node.js, pug

所以我正在构建一个简单的 node.js Web 应用程序。但我对单个 Web 应用程序的工作方式有点困惑。我现在没有在前端使用backboneMVC。这个概念是我在页面上有两个选项卡，即文件夹和列表。因此，我希望能够通过诸如**host/folder/{folder-id}**之类的静态 URL 来显示文件夹的内容，并对列表执行相同的操作。

如果我只是 res.render 带有参数的视图模板以响应 Restful 请求，这似乎很好。

但是当这两个在同一个页面上并且必须通过标签点击访问而不离开主页时，我很困惑。我可以通过使用带有 # 标签的前端路由来让它工作（所以你最终会得到**host/index.html#/folder/{id}**）

所以我想知道，**有没有一种更简单的方法可以使用部分模板，我可以通过jade模板部分来切换主页的一部分，而无需离开index.html？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:40:46.580

您可能想查看 Page.js 以在单页应用程序中加载模板（[http://github.com/visionmedia/page.js](http://github.com/visionmedia/page.js)），它也来自 Visionmedia，与制作 Jade 的人相同。

我发现它比小型应用程序/站点的主干更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:31:36.693

您可能会查看[资产机架](http://asset-rack.org)。它有助于将静态内容推送到浏览器。

它可以将 Jade 模板预编译成 javascript 函数，然后您可以在客户端上呈现这些函数。语法非常简单：

```
new JadeAsset({
  url: '/templates.js',
  dirname: './templates'
}); 
```

因此，如果您的模板目录如下所示：

```
index.jade
contact.jade
user/
    profile.jade
    info.jade 
```

然后像这样在客户端上引用您的模板：

```
$('body').append(Templates['index']());
$('body').append(Templates['user/profile']({username: 'brad', status: 'fun'}));
$('body').append(Templates['user/info']()); 
```

这是一个链接：

[http://asset-rack.org](http://asset-rack.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T04:48:21.740

我以前没有尝试过直接渲染部分，但如果我理解你的问题，你能做这样的事情吗？

创建视图以生成部分输出。使用路由为您提供端点以从中获取它们。从您的站点触发一些 javascript 以使用该端点的输出替换 -say- 块。

可能看起来像这样：在 routes.js 中：

```
app.get('/folder/:id', folders.show) 
```

在控制器/folders.js 中：

```
exports.create = function (req,res){
  res.render('folders/partial')
} 
```

在文件夹/show.jade 中：

```
button#tab1
.tab
  .result 
```

然后一些简单的 jquery 用部分内容替换您网站上的内容：

```
$('#tab1').click(function() {
  $.get('/folder/:id', function(data) {
    $('.result').html(data);
  })
}) 
```

# c# - Linq to Entities - 转换表对象

> ID：15619735
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:20:27.597
> 
> 标签：c#, asp.net, entity-framework, linq-to-entities

我正在使用实体框架（数据库 1st），并且在将实体转换为 linq 到实体查询的一部分时遇到了一些问题，对此非常新，因此我们将不胜感激。

基本上，我有 2 个表，'tblContactTypes' 和 'tblContactDetails'，如果我返回一组联系人详细信息，如何为每个表返回一个联系人类型？我可以返回 tblContactType 类的实例，但我不确定如何返回 Contact Type 对象。

我的课程如下（我要整理的行是 GetAll() 方法中的'ContactType = x.tblContactType'） -

数据层 -

```
public partial class tblContactType
{
    public tblContactType()
    {
        this.tblContactDetails = new HashSet<tblContactDetail>();
    }

    public int ContactTypeID { get; set; }
    public string Name { get; set; }
    public string ExpressionValidator { get; set; }

    public virtual ICollection<tblContactDetail> tblContactDetails { get; set; }
}

public partial class tblContactDetail
{
    public tblContactDetail()
    {
        this.tblCustomerContactDetails = new HashSet<tblCustomerContactDetail>();
    }

    public int ContactDetailID { get; set; }
    public string ContactDetail { get; set; }
    public int ContactTypeID { get; set; }

    public virtual tblContactType tblContactType { get; set; }
    public virtual ICollection<tblCustomerContactDetail> tblCustomerContactDetails { get; set; }
} 
```

业务层 -

```
 public class ContactTypeVO
{
    public int ContactTypeID { get; set; }
    public string Name { get; set; }
    public string ExpressionValidator { get; set; }

    /// <summary>
    /// Determines whether this instance is new.
    /// </summary>
    /// <returns>
    ///   <c>true</c> if this instance is new; otherwise, <c>false</c>.
    /// </returns>
    public bool IsNew()
    {
        return ContactTypeID == 0;
    }
}

public class ContactDetailVO
{
    public int ContactDetailID { get; set; }
    public string ContactDetail { get; set; }
    public int ContactTypeID { get; set; }
    public tblContactType ContactType { get; set; }
    public ICollection<tblCustomerContactDetail> CustomerContactDetails { get; set; }

    /// <summary>
    /// Determines whether this instance is new.
    /// </summary>
    /// <returns>
    ///   <c>true</c> if this instance is new; otherwise, <c>false</c>.
    /// </returns>
    public bool IsNew()
    {
        return ContactDetailID == 0;
    }
}

    public class ContactDetailDAO : IDisposable
{
    /// <summary>
    /// The repository
    /// </summary>
    public IContactDetailsRepository repository;

    /// <summary>
    /// Initializes a new instance of the <see cref="ContactDetailEO" /> class.
    /// </summary>
    public ContactDetailDAO()
    {
        repository = new ContactDetailsRepository();       
    }

    /// <summary>
    /// Saves the specified contact detail.
    /// </summary>
    /// <param name="contactDetail">The contact detail.</param>
    public void Save(ContactDetailVO contactDetail)
    {
        if (this.IsValid())
        {
            if (contactDetail.IsNew())
            {
                repository.Add(new tblContactDetail
                {
                    ContactDetailID = contactDetail.ContactDetailID,
                    ContactDetail = contactDetail.ContactDetail,
                    ContactTypeID = contactDetail.ContactTypeID
                });
            }
            else
            {
                var saveItem = repository.AsQueryable().Where(x => x.ContactDetailID == contactDetail.ContactDetailID).FirstOrDefault();
                if (saveItem != null)
                {
                    saveItem.ContactDetailID = contactDetail.ContactDetailID;
                    saveItem.ContactDetail = contactDetail.ContactDetail;
                    saveItem.ContactTypeID = contactDetail.ContactTypeID;
                    repository.Update(saveItem);
                }
            }
        }
        else
        {
            // ERROR
        }
    }

    /// <summary>
    /// Gets all.
    /// </summary>
    /// <returns></returns>
    public List<ContactDetailVO> GetAll()
    {
        var contacts = repository.AsQueryable()
        .Select(x => new ContactDetailVO
        {
            ContactDetailID = x.ContactDetailID,
            ContactDetail = x.ContactDetail,
            ContactTypeID = x.ContactTypeID,
            ContactType = x.tblContactType,
        });

        return contacts.ToList();
    }

    /// <summary>
    /// Gets the by ID.
    /// </summary>
    /// <param name="id">The id.</param>
    /// <returns></returns>
    public ContactDetailVO GetByID(int id)
    {
        var contactDetail = repository.AsQueryable().Where(x => x.ContactDetailID == id).FirstOrDefault();
        if (contactDetail == null)
            return null;

        return new ContactDetailVO
        {
            ContactDetailID = contactDetail.ContactDetailID,
            ContactDetail = contactDetail.ContactDetail,
            ContactTypeID = contactDetail.ContactTypeID,
            ContactType = contactDetail.tblContactType
        };
    }

    /// <summary>
    /// Determines whether this instance is valid.
    /// </summary>
    public bool IsValid()
    {
        return true;
    }

    /// <summary>
    /// Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.
    /// </summary>
    public void Dispose()
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:55:10.157

您需要手动构建您的 ContactTypeVO 对象实例。x.tblContactType 是 tblContactType 类型的实例，它不会神奇地转换为 ContactTypeVO 的实例。

我的建议是要么实现一个 ContactTypeVO 构造函数，它接受一个 tblContactType 实例并适当地设置属性，要么实现一个隐式转换运算符来做同样的事情。

构造方法示例：

```
public ContactTypeVO( tblContactType object )
{
    ContactTypeId = object.ContactTypeId;
    <etc> = object.<etc>
} 
```

然后将 ContactType = x.tblContactType 更改为 ContactType = new ContactTypeVO( x.tblContactType )

# facebook - 如何使用 facebook API 获取公共墙贴

> ID：15619742
> 
> 赞同：12
> 
> 时间：2013-03-25T16:20:49.633
> 
> 标签：facebook, api, facebook-graph-api, token, facebook-wall

我正在尝试从个人资料 facebook 获取墙贴。我对粉丝页面没有任何问题，并且我的用户令牌有效（至少对于粉丝页面）。

此帖子的示例：[https](https://www.facebook.com/aurelia.filion/posts/10151342315613445) ://www.facebook.com/aurelia.filion/posts/10151342315613445 如您所见，该帖子是公开的。

所以我尝试：graph.facebook.com/529628444_10151342315613445?access_token=MY_TOKEN graph.facebook.com/10151342315613445?access_token=MY_TOKEN

它返回：“错误”：{“消息”：“不支持的获取请求。”，“类型”：“GraphMethodException”，“代码”：100

在我的 Api 图形浏览器中，我也看不到该用户的帖子。graph.facebook.com/529628444?fields=posts（529628444 是 aurelia.filion 的 ID）

那么是否有可能获得墙帖？它是公开的，应该是获取它们的一种方式

谢谢

* * *

好的，我将以不同的方式解释，我的目标是使用图表获取此类帖子（我可以获取除论文之外的所有其他帖子）

facebook.com/aurelia.filion/posts/10151342315613445

facebook.com/aurelia.filion/posts/10151336175793445

但我收到错误“不支持的获取请求”。

我已经尝试过用户令牌和应用令牌此链接不起作用：graph.facebook.com/529628444_10151342315613445?access_token=MY_TOKEN

当我尝试使用提要时，我看不到我想要的帖子。

如果我请求帖子 graph.facebook.com/529628444/posts?limit=100&access_token=TOKEN 我可以看到除该死的帖子之外的所有内容（链接、照片等）！！

我怎样才能获得这些帖子，这是一个令牌问题，它看起来像一个状态，它是不同的，我的意思是我们需要权限吗？graph.facebook.com/529628444?fields=statuses&access_token=TOKEN 它不返回任何结果！它是空的！

编辑

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T16:25:04.100

## 编辑

这个答案是在 Graph API 版本处于其第一个版本时写回的。那时您可以使用用户 ID 获取用户提要，现在用户 ID 不再在应用程序之间共享。facebook 还创建了一个[新的 API](https://developers.facebook.com/docs/public_feed/)，它只对它的一些合作伙伴可用。

因此，除非用户使用过您的应用，否则您现在无法获取公共用户供稿。不过，您仍然可以获得页面提要。

## 旧版

此答案适用于图形 api v1

所以你必须使用这个`https://graph.facebook.com/529628444?fields=feed&access_token=YOUR_TOKEN`

如果您只想查询公共数据，您可以通过以下方式创建 APP Token：

```
https://graph.facebook.com/oauth/access_token?
client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&
grant_type=client_credentials 
```

并使用此令牌而不是使用您的用户令牌。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-17T14:14:01.923

我不知道这篇文章是否太旧，但我只是在寻找解决问题的方法时才发现它。

无论如何，我将展示我是如何设法从公共用户那里获取提要的：

```
 var fbul = "https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=[AppID]&client_secret=[AppSecret]";
        var fburl = "https://graph.facebook.com/201317759900688?fields=feed&";

        $.get(fbul, function(auth_token){
            $.ajax({
                dataType: "jsonp",
                url: fburl+auth_token,
                success: function(res){
                    console.log(res);

                }
            });
        }); 
```

这里有一个小小的解释：你必须去 facebook 开发控制台 ( [https://developers.facebook.com](https://developers.facebook.com) ) 并注册一个新的网络应用程序。只需继续顶部导航中的“我的应用程序”，然后继续“添加新应用程序”。完成后，您可以访问您的 App ID 和您的 APP Secret。

第一个链接“var fbul”是获取访问提要所需的 access_token。

```
var fbul = "https://graph.facebook.com/oauth/access_token?type=client_cred&client_id=[AppID]&client_secret=[AppSecret]"; 
```

只需将 [AppID] 和 [AppSecret] 更改为您自己的密钥。

第二个链接是访问提要（我们没有在此处添加 acces_token，因为我们在 ajax 请求中这样做）

```
var fburl = "https://graph.facebook.com/201317759900688?fields=feed&"; 
```

这里的数字（2013177599....）是来自公共站点的频道 ID。要获得该号码，只需访问[http://findmyfacebookid.com/](http://findmyfacebookid.com/)并输入公众用户的 facebook URL。

这几乎就是你需要的一切。

现在编写您的 ajax 请求，如下所示：

```
$.get(fbul, function(auth_token){
            $.ajax({
                dataType: "jsonp",
                url: fburl+auth_token,
                success: function(res){
                    console.log(res);

                }
            });
        }); 
```

您现在将在控制台中看到结果。

使用成功函数以您想要的方式处理结果。

# c# - FileExtensionsAttribute 和常量 Extensions

> ID：15619745
> 
> 赞同：1
> 
> 时间：2013-03-25T16:21:03.350
> 
> 标签：c#, .net, asp.net-mvc, data-annotations

我遇到了 FileExtensionsAttribute 的问题。验证工作得很好。但我想动态更改 FileExtensionsAttribute 的 Extensions 属性。问题是该属性只接受常量值。

我想实现类似：

```
[Required]
[FileExtensionsAttribute(Extensions = MyStringVariable)]
public HttpPostedFileBase Files { get; set; } 
```

我怎样才能做到这一点？是为此创建自定义属性的唯一方法吗？似乎不可能对 FileExtensions 进行子类化，因为它是密封的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:22:59.173

没有办法用属性来做到这一点。属性在元数据中是不可变的，并且不能以这种方式动态更改。

# javascript - 使用字段名称创建新的 Javascript 数组

> ID：15619747
> 
> 赞同：1
> 
> 时间：2013-03-25T16:21:05.590
> 
> 标签：javascript, arrays, field-names

我有一个正在读入数组的数据文件。原始数据文件创建的数组如下所示：

```
var originalArray = [ {vendor: 2001, bananas: 50, apples:75, oranges: 12},
                      {vendor: 2002, bananas: 25, apples:60, oranges: 82},
                      {vendor: 2003, bananas: 36, apples:41, oranges: 73},
                      {vendor: 2004, bananas: 59, apples:62, oranges: 87}]; 
```

我使用 .filter 从数组中选择了一个供应商（这工作正常），但是我需要将新数组（仅包含一个供应商代码的数组）更改为一个看起来像这样的数组。

```
var desiredArray = [ {fruitName: "bananas", qty: 50},
                     {fruitName: "apples", qty: 75 },
                     {fruitName: "oranges", qty: 12} ]; 
```

使用 .push 我可以获得数量，但是如何让水果名称从字段名称变为“fruitName”字段中的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:31:13.873

如果你有选定的供应商对象，你可以做这样的事情来创建`desiredArray`.

```
var desiredArray = [];
var selectedVendor = originalArray[2]; // this is the vendor you got via .filter

for(property in selectedVendor) {
    if(property !== 'vendor') {
        desiredArray.push({fruitName: property, qty: selectedVendor[property]});
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:34:45.163

尝试这个

```
var vendorId = 2001;

var desiredArray = originalArray.filter( function( v ) {

    return v.vendor == vendorId ;

}).map( function( v ){

    var s = [];

    for ( var i in v ){

        if ( i == 'vendor' ) continue;

        s.push( {fruitName: i , qty: v[i] } );            
    }
    return s;

}).pop(); 
```

`desiredArray`有价值_

```
[ {fruitName: "bananas", qty: 50},
  {fruitName: "apples", qty: 75 },
  {fruitName: "oranges", qty: 12} ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:07:26.050

```
 var a = [{vendor:2001,apple :50,orange:20},{vendor:2002,apple:50, orange:10}];

   var matchedVendor = 2001; 
```

过滤器

```
 var filteredArray = [];
    for (var i=0; i < a.length; i++){
    if(a[i].vendor === matchedVendor){
     filteredArray = a[i];
          break;
     }}

    var desiredArray = [];

    for(prop in filteredArray){
    if(prop !== "vendor"){
        desiredArray.push({fruitName:prop,qty:filteredArray[prop]});
    }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T16:38:02.517

使用`for...in`循环：

```
 var currentVendor;
    var desiredArray = [];

    //ok, this is only an example
    currentVendor = {vendor: 2001, bananas: 50, apples:75, oranges: 12};
    for (var prop in currentVendor) {
        if(prop!='vendor')
            desiredArray.push({fruitName: prop, qty: currentVendor[prop]});
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:35:21.560

```
var fruit = {};
for (var i = 0; i < originalArray.length; i++) {
  for (var key in originalArray[i]) {
    if (key != selectedVendor)
      continue;
    if (!fruit[key])
      fruit[key] = 0;
    fruit[key] += originalArray[i][key];
  }
}
var desiredArray = [];
for (var fruitName in fruit) {
  desiredArray.push({fruit: fruitName, qty: fruit[fruitName]});
} 
```

# php - 使用 PHP 显示等待时间

> ID：15619752
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:21:15.373
> 
> 标签：php, datetime, time

我想使用这个简单的计算来显示患者的等待时间；

```
waiting time (the clock time - the arrival time) 
```

在插入表格中；我已使用以下代码将 current_time (arrival_time) 插入已成功的 PATIENT 表中。

```
// validate arrival time 
date_default_timezone_set('Europe/London');
$time = time();

$sql="INSERT INTO Patient(Forename, Surname, Gender, Date_Of_Birth, Address, Patient_History, Illness, Priority, Arrival_Time)
VALUES('$patient_name', '$patient_lastname', '$gender', '$date', '$address', '$history', '$illness', '$priority', '$time')"; 
```

这是输出代码；

```
<?php

$conn = mysqli_connect("localhost","root","") or die ("No connection");
mysqli_select_db($conn, "a&e") or die('Could not select database.');

$query = "SELECT PatientID, Forename, Surname, Gender, Illness, Priority, Arrival_Time, TIMEDIFF(Arrival_time,NOW()) as Waiting_Time FROM Patient";
$result = mysqli_query($conn, $query) or die("Invalid query");

echo "<table border='1'>
<tr>
<th>PatientID</th>
<th>Forename</th>
<th>Surname</th>
<th>Gender</th>
<th>Illness</th>
<th>Priority</th>
<th>Waiting_Time</th>
</tr>";

 while ($row = $result->fetch_object()){

  echo "<tr>
  <td>" . $row->PatientID . "</td>
  <td>" . $row->Forename . "</td>
  <td>" . $row->Surname . "</td>
  <td>" . $row->Gender . "</td>
  <td>" . $row->Illness . "</td>
  <td>" . $row->Priority . "</td>
  <td>" . $row->Waiting_Time . "</td>
  </tr>";

}

echo "</table>";
mysqli_close($conn);
?> 
```

我将如何使用以下计算来计算等待时间；(时钟时间-到达时间)

**请注意：Arrival_Time 类型为 TIME。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:27:04.623

我们今天已经经历过了。

[计算等待时间的简单时间函数](https://stackoverflow.com/questions/15613783/simple-time-function-to-calculate-waiting-time/15613848#15613848)

您不需要在 PHP 中执行此操作，因为它已经在您的查询中完成 $row->Waiting_Time 是时钟时间与到达时间。

如果您现在正在寻找基于 PHP 的解决方案而不是正确的解决方案，那么您显然是在尝试做一些功课，而我一开始就不应该帮助您（更愚弄我）不仅如此，您还可以去告诉你的讲师/老师他们是一个白痴，强迫你使用内置 MySQL 函数可以更好地处理的 PHP 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:24:54.817

您可以简单地从当前时间中减去数据库中的时间，然后使用[日期对其进行格式化](http://www.php.net/date)

```
$waiting_time = date("H:i:s", time() - $arrival_time); 
```

# html - Superfish - 在 .active 悬停父母上保留 css 设置

> ID：15619753
> 
> 赞同：1
> 
> 时间：2013-03-25T16:21:17.133
> 
> 标签：html, css, menu, parent, superfish

我试图在菜单的所有级别上保持相同的设置（背景颜色：#457BB7），就像在这个打印中一样：

[http://img838.imageshack.us/img838/7943/ex1fn.jpg](http://img838.imageshack.us/img838/7943/ex1fn.jpg)

问题是当我向它添加“活动”类时，只有当鼠标悬停在当前项目上时（例如：“网络安全”变得突出，但“Segrança”和“Produtos”保持正常），就像这张图片：

[http://img9.imageshack.us/img9/4486/ex2l.jpg](http://img9.imageshack.us/img9/4486/ex2l.jpg)

我用“a”、“li”和“ul”尝试了很多不同的东西，但结果变化不大。

这是菜单的代码（不是全部）：

```
<ul class="Menu">
           <li> <a href="#" style="cursor:default">Soluções</a>
                <ul>
                  <li><a href="seguranca.htm">Segurança</a></li>
                  <li><a href="monit_integ.htm">Monitorização Integrada</a></li>
                  <li><a href="alta_disp.htm">Alta Disponibilidade</a></li>
                  <li><a href="gest_patr.htm">Gestão de Património</a></li>
                  <li><a href="spool.htm">Tratamento de Spool</li>
                </ul>
            </li>
          <li class="active"><a href="#" style="cursor:default">Produtos</a>
                <ul>
                  <li><a href="#" style="cursor:default">Segurança iSeries</a>
                      <ul>
                        <li><a href="net_secur.htm">Network Security</a></li>
                        <li><a href="atrty_broker.htm">Autohority Broker</a></li>
                      </ul>
                  </li> ... 
```

CSS是这样的：

```
.Menu    { margin:0; padding:0; padding-bottom:0; width:700px;}
.Menu ul { margin:0; padding:0; }
.Menu li { float:left; width:150px; list-style:none; position:relative; z-index:999; height:26px; }
.Menu a  { display:block; padding-left:2px; padding-top:2px; color:#FFFFFF; text-decoration:none; vertical-align:middle; overflow:hidden; }

.Menu li ul                                        { top:-999em; position:absolute; text-align:left; }
.Menu li:hover li ul, .Menu li.sfHover li ul       { top:-999em; vertical-align:middle; text-align:left; }
.Menu li li:hover li ul, .Menu li li.sfHover li ul { top:-999em; vertical-align:middle; text-align:left; }

.Menu li:hover ul, ul.Menu li.sfHover ul             { left:0px;  top:26px; font-size:13px; text-align:left;}
.Menu li li:hover ul, ul.Menu li li.sfHover ul       { left:200px; top:2px; font-size:13px; text-align:left;}
.Menu li li li:hover ul, ul.Menu li li li.sfHover ul { left:0px; top:26px; text-align:left;}

.Menu a:hover       { color:#FFFFFF; font-weight:bold;  }
.Menu li:hover      { background-color:#457BB7; color:#FFFFFF; }
.Menu li.sfHover    { background-color:#457BB7; color:#FFFFFF; }

/* superfish */
.superfish li:hover ul, .superfish li li:hover ul, .superfish li li li:hover ul { top: -999em; vertical-align:middle; }

.Menu li            { background-color:#235995; width:100px; height:26px; text-align:center; }
.Menu li li         { background-color:#235995; width:200px; height:18px; float:none;  text-align:left;}
.Menu li li li      { background-color:#235995; width:180px; height:18px; float:none;  text-align:left;}

.Menu li.active         { background-color:#346AA6; width:100px; height:24px; text-align:center; }
.Menu li.active a       { background-color:#346AA6; width:100px; height:24px; text-align:center; }
.Menu li.active li a    { background-color:#235995; width:200px; height:18px; float:none; text-align:left;}
.Menu li.active li li a { background-color:#235995; width:180px; height:18px; float:none; text-align:left;}

.Menu li.active li a:hover { background-color:#457BB7; }
.Menu li.active a:hover { background-color:#457BB7; } 
```

我确定缺少一些愚蠢的东西，但是你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:03:27.473

下面的代码适用于 css、styes

```
<ul class="Menu">
   <li> <a href="#" style="cursor:default">Soluções</a>
        <ul>
          <li><a href="seguranca.htm">Segurança</a></li>
          <li><a href="monit_integ.htm">Monitorização Integrada</a></li>
          <li><a href="alta_disp.htm">Alta Disponibilidade</a>
            <ul>
                <li><a href="monit_integ.htm">lorem ipsum</a></li>
                <li><a href="alta_disp.htm">lorem ipsum</a>
            </ul>
          </li>
          <li><a href="gest_patr.htm">Gestão de Património</a></li>
          <li><a href="spool.htm">Tratamento de Spool</li>
        </ul>
    </li> 
```

# apache - 将顶级域移动到子目录以使用 Apache 在同一域上托管多个站点

> ID：15619754
> 
> 赞同：3
> 
> 时间：2013-03-25T16:21:18.430
> 
> 标签：apache, mod-rewrite, apache2

我使用 SaaS LAMP 应用程序在不同域上有多个站点。我正在尝试将所有站点移动到单个域下，并允许添加其他站点，而无需使用 Apache 配置。

例如...

```
www.domain1.com
www.domain2.com 
```

会搬到

```
www.domain.com/domain1
www.domain.com/domain2 
```

静态文件仍会在 html 中显示为具有顶级 src 属性

```
/some-image.jpg 
```

但实际上文件现在位于

```
document_root/domain1/some-image.jpg 
```

所以我必须将“domain1”部分添加到静态文件的路径中。在 apache 配置中处理这个问题的最佳方法是什么？还是有另一种更简单的方法来完成我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T04:49:57.257

使用 Linux 命令`sed`：

```
cd www.domain.com/domain1/
sed -i 's/document_root/document_root\/domain1/g' * 
```

这将为 中的所有实例更改所有出现的`document_root`to 。`document_root/domain1``www.domain.com/domain1/`

# asp.net - 向 ReportViewer 添加默认消息

> ID：15619756
> 
> 赞同：0
> 
> 时间：2013-03-25T16:21:18.873
> 
> 标签：asp.net, reportviewer, reporting-services, rdlc

我有一些带有 2 个表格和每个图表的报告。还有几个文本框用于标题、页眉和页脚。

我已经知道，如果我想在没有返回数据时设置自定义消息，我可以单击报告元素（表格、图表等）并在“属性”中将其写入`NoRowsMessage`字段中。

但是，由于我的报告包含多个元素，因此该消息会重复多次。我觉得这看起来很难看。

此外，我的文本框、页眉和页脚仍然显示。

当没有数据时，是否有任何方法可以隐藏整个报告或阻止其呈现，而只是在屏幕上显示一条消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:17:17.330

我不知道 SSRS 中的任何特定功能，但您可以尝试各种解决方法来模仿这一点：

**您可以根据数据**集中的行隐藏报表中的所有元素，方法是向报表添加与**Body**大小相同的**Rectangle**，然后将所有报表对象添加到**Rectangle**中。

 ****将**Rectangle**`Hidden`的属性设置为：

 **`=IIf(CountRows("DataSet1") = 0, true, false)`

这意味着如果**Dataset**中没有行，则**Rectangle**及其所有子元素将被隐藏。

如果要显示一条消息，请在**Rectangle**之外的报表底部添加一个**TextBox** ，并将其属性设置为相反的表达式：**`Hidden`**

 **`=IIf(CountRows("DataSet1") = 0, false, true)`

因此，这样，当**Dataset**中没有行时，您将显示一条且只有一条消息。您还可以获得对 No Rows 消息格式进行更多控制的优势。

**您可以对Header**和**Footer**做类似的事情。在所有情况下都显示这些对我来说很有意义，但我想这取决于您的要求。

所以这是一组相当复杂的步骤，但可能会让你接近你想要的结果。********

# c# - 如何在 C# Win 表单应用程序中使用 MS 通信器返回可用联系人列表？

> ID：15619757
> 
> 赞同：0
> 
> 时间：2013-03-25T16:21:23.137
> 
> 标签：c#, winforms, visual-studio, lync-2010

我刚刚下载了 VS 2012 来尝试创建一个带有按钮和列表区域的简单应用程序。有一个我要存储的联系人列表，因此当单击该按钮时，该列表将填充所有在 MS communicator/lync 联系人列表中可用的联系人。我是否必须让我的通信器/lync 运行此应用程序才能运行并不重要。

我确实看到了*Microsoft Office Communicator Automation API*，但不确定我是否想从那里开始进一步研究。请建议我应该往哪个方向前进（我几乎不了解 C#）来完成这个小应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:01:12.527

如果您希望显示 Lync 联系人列表（并且只想显示所有联系人），那么已经构建了 WPF/Silverlight 控件，您可以将其放入您的应用程序中。更多信息在这里，但肯定有一个 ContactList 控件：[http ://thoughtstuff.co.uk/2012/05/microsoft-lyncs-development-secret-its-easy/](http://thoughtstuff.co.uk/2012/05/microsoft-lyncs-development-secret-its-easy/)

但是，如果您想获取联系人对象的列表，以便使用、过滤、以不同方式显示等，请查看允许您执行此操作的[Lync Client SDK 。](http://www.microsoft.com/en-us/download/details.aspx?id=36824)这里有一个使用 SDK 检索和发布 SelfContact 信息的示例：http: [//code.msdn.microsoft.com/lync/Lync-2013-Retrieve-and-91ebdca7](http://code.msdn.microsoft.com/lync/Lync-2013-Retrieve-and-91ebdca7)

# jquery - 响应式图像裁剪

> ID：15619759
> 
> 赞同：5
> 
> 时间：2013-03-25T16:21:38.183
> 
> 标签：jquery, html, css, responsive-design

我一直在尝试裁剪屏幕尺寸低于 768 像素宽度的图像。图像应从左侧和右侧均匀裁剪。

这是全尺寸图像的示例（图像的尺寸为 900 像素宽 x 250 像素高。：

![](../Images/95d016523ec79065ce96f403be5b1901.png)

这是我在屏幕尺寸小于 768p 宽时尝试创建的裁剪版本。在这个版本中，图像的宽度为 320 像素，但应该从 768 像素开始裁剪：

![](../Images/d78520fa474bb96795a98362c91fd3d0.png)

这是我到目前为止一直在使用的 HTML：

```
<div class="container">
    <div class="image-container">
        <img src="http://i.imgur.com/H7cpsLK.jpg" />
    </div>
</div> 
```

这是CSS：

```
.container {
    width: 1280px;
    max-width: 100%;
    min-width: 768px;
}

.image-container {
    width:100%;
}

img {
    max-width:100%;
    height:auto;
}

@media only screen and (max-width:768px) {
    .image-container {max-width:768px; overflow:hidden;}
} 
```

这是我一直用来尝试创建它的小提琴：http: [//jsfiddle.net/QRLTd/](http://jsfiddle.net/QRLTd/)

是否可以同时从左侧和右侧裁剪图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:30:26.203

`**[LIVE DEMO](http://jsfiddle.net/QRLTd/4/)**`

HTML：

```
<div class="container">
    <div class="image-container"></div>
</div> 
```

CSS：

```
.container {
    width: 100%;
    height:200px;
}

.image-container {
    position:relative;
    margin:0 auto;
    background:url(http://i.imgur.com/H7cpsLK.jpg) no-repeat center center;
    background-size:cover;
    max-width:768px;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T20:44:28.163

具有艺术指导（选择性裁剪/缩放）的响应式图像是一个棘手的领域。幸运的是，您只是试图向中心裁剪，这更容易一些。Roko 的解决方案似乎适用于 css，但您仍在加载全尺寸图像（慢）。

如果你想进一步优化和提高你的页面速度，你应该加载不同大小的图像，这样移动浏览器就不必下载桌面大小或更糟、视网膜显示大小的图像。常见的解决方案是使用媒体查询断点和 CSS3 替换您的 img.src，并准备好图像的预裁剪版本。

或者，您可以使用[Pixtulate](http://www.pixtulate.com)等服务为每个访问者动态执行此裁剪。这也将使您能够通过预设的焦点裁剪中心，并且您的图像将针对每个访问者的屏幕正确调整大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:30:15.890

您始终可以使用较高的 z-index 值将某些 div 绝对定位在左右两侧。

我从未使用或见过任何通过 css 裁剪的图像，但您绝对可以在paint 或 photoshop 中裁剪图像，上传两个图像，然后用 css 替换您想要显示的图像，并可能使用媒体查询。

# python - Google Calendar API v3 中对 OAuth 服务帐户的参与者的限制？

> ID：15619763
> 
> 赞同：2
> 
> 时间：2013-03-25T16:21:42.680
> 
> 标签：python, google-calendar-api, google-oauth

我在我的域的超级管理员帐户中创建了一个服务帐户。[我可以使用谷歌在此处（ https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation) ）提供的“域范围授权”模型连接到谷歌日历 API v3 。我可以列出我自己的事件，列出其他人的事件。没问题。

但是，在插入与外部参与者的活动时，我遇到了问题。需要明确的是，当在我自己的域中包含与会者时，我可以很好地插入事件。（除了需要捕获的神秘空白异常！）

我可以成功地向外部参与者插入一些这样的活动，但很快，我开始得到：

```
HttpError 403: "Calendar usage limits exceeded" 
```

如果我让它静置几个小时，我可以再次运行它并插入一些事件，但它会再次出现此错误。

注意：我没有达到每个用户的配额，而且我离每日礼貌限制还差得很远。我在插入之间的代码中也有睡眠。事件的主体也被确认是良好的。

我已将此问题隔离为外部的活动参与者，看看我在运行仅限于同一域上的参与者的完全相同的代码时如何没有收到这些错误。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T18:32:33.470

也许您达到了每秒 5 个请求的限制？您每秒尝试插入多少次？我没有发现（这里：[使用限制](https://developers.google.com/google-apps/calendar/pricing)）日历 API 有每秒使用限制，但其他一些 API 确实有这样的限制...... 5/sec 或 10/sec api 调用......

# ruby-on-rails - Heroku 上 Rails 应用程序中的随机超时异常

> ID：15619766
> 
> 赞同：11
> 
> 时间：2013-03-25T16:21:48.070
> 
> 标签：ruby-on-rails, heroku, timeout

我在 Heroku 上托管了一个 Rails 3.2 应用程序，并且每天在 Rails 应用程序中出现 2-3 次超时。这些*不是*H12 请求超时，而是发生在 Rails 堆栈中某处的超时。因此，它们实际上会在站点上生成异常并出现在我的 Airbrake 日志中。

超时发生的地方似乎是完全随机的；有时它在像 Formtastic 这样的 gem 中，或者在 HAML 视图中，或者在 ActiveRecord 代码中。您可以在此处查看一些回溯的示例：[https ://gist.github.com/dpmccabe/5238273](https://gist.github.com/dpmccabe/5238273)

该站点没有获得太多流量并且在两个测功机上运行良好（尽管由于 Adept Scale 附加组件它们会自动扩展）。HTTP_X_HEROKU_QUEUE_WAIT_TIME 标头通常较低或为零，因此我认为这不是路由问题。我什至尝试从 Thin 切换到 Unicorn，但没有任何效果（我的 unicorn.rb 显示在上面的要点中）。

这些超时异常似乎在整个应用程序中随机发生的事实并没有给我太多继续。我确实有 New Relic，但我不确定如何调试它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T02:51:36.690

我也遇到了同样的问题。虽然我还没有解决它，但我想我会加入我目前所看到的内容。我正在使用 rack-timeout gem（根据您的回溯，看起来您也是如此）并将超时设置为 15 秒。看看新的遗物，我对任何请求的平均应用服务器响应时间都远低于 200 毫秒。然而，像你一样，我每天会遇到 2-3 个错误，如下所示：

```
undefined method `result' for #<Timeout::Error: execution expired> 
```

错误发生在范围广泛的操作上，似乎没有任何操作特别容易产生错误。该错误甚至发生在简单的 CRUD DELETE 操作上。我在 Heroku 的 Cedar 堆栈上运行 rails 3.2 应用程序。我运行两个网络 dyno，每个都有 3 个独角兽工人。它们每个都始终保持在 512mb 限制以下。

到目前为止，我发现的唯一线索是，我经常在日志中的超时附近看到类似以下内容：

```
[AMBER] LOG: process 21289 acquired ShareLock on transaction 105259 after 32366.132 ms 
```

你看到类似的东西吗？锁定记录的数据库操作可能会导致超时，我不太确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T15:37:22.970

我在 Heroku 上托管的应用程序中遇到了同样的问题。

我检查了日志，发现处理时间超过 30 秒的请求很少，导致 heroku 出现超时错误。在我的情况下，问题是打印到日志，我有一个登台服务器，它有很多输入和输出数据打印到服务器日志，打印时间超过 30 秒，heroku 会假设请求仍在处理中，即使之后响应是从远程 api 收到的，因为它还没有完成将数据打印到日志中。

因此，我删除了所有将输入（由代码构造的输入 xml 数据）和输出（从 api 接收的 xml 数据）数据打印到日志的打印语句。

1.  所以我建议你检查日志，看看请求是否需要超过 30 秒来处理
2.  检查您是否正在打印需要时间在日志上打印的数据（用于调试目的）。

同样，这可能不是您问题的答案，但这就是我解决问题的方法。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:07:15.710

根据[Heroku Dev Center](https://devcenter.heroku.com/articles/request-timeout)的说法，如果完成时间超过 30 秒，路由器将终止请求。您可以使用[rack-timeout gem](https://github.com/kch/rack-timeout)来查找瓶颈。只要让你的超时时间少于 30 秒

```
Rack::Timeout.timeout = 15 # seconds 
```

如果您有多个并行请求，请考虑使用[Unicorn](http://blog.codeship.io/2012/05/06/Unicorn-on-Heroku.html)

# c# - 我无法访问光标的位置（以编程方式移动鼠标）

> ID：15619768
> 
> 赞同：1
> 
> 时间：2013-03-25T16:21:51.223
> 
> 标签：c#, position, instance, mouse-cursor

这是我的代码：

```
 private void MoveCursor(int x, int y)
    {
        // Set the Current cursor, move the cursor's Position,
        // and set its clipping rectangle to the form. 

        System.Windows.Forms.Cursor cursorMouse = new System.Windows.Forms.Cursor(System.Windows.Forms.Cursor.Current.Handle);
        cursorMouse.Position = new System.Drawing.Point(x, y);
        System.Windows.Forms.Cursor.Clip = new System.Drawing.Rectangle(cursorMouse.Position, cursorMouse.Size);
    } 
```

这就是我的控制台所说的：

```
 Error  11  Member 'System.Windows.Forms.Cursor.Position.get' cannot be accessed with an instance reference; qualify it with a type name instead    F:\Win8\Kinect\InterfaceController\celmaibun\KinectToolbox\KinectToolbox\GesturesViewer\MainWindow.xaml.cs  1314    13  NkGesturesViewer
 Error  12  Member 'System.Windows.Forms.Cursor.Position.get' cannot be accessed with an instance reference; qualify it with a type name instead    F:\Win8\Kinect\InterfaceController\celmaibun\KinectToolbox\KinectToolbox\GesturesViewer\MainWindow.xaml.cs  1315    77  NkGesturesViewer 
```

现在，我是 C# 的初学者，我更习惯于 java 和 android。一位朋友告诉我，这与实例有关。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-30T21:27:54.520

您可能已经找到了答案或找到了解决方法，但由于我遇到了同样的问题，我想我会发布我发现的内容。

当我添加对 System.Windows.Forms.DataVisualization.Charting 的引用时，我弹出了错误。光标使用该引用的方式似乎与通常不同，并覆盖了典型的 Cursor.Position。

就我而言，就像用“MousePosition”替换“Cursor.Position”一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:28:47.260

我建议你这个代码

```
var pc = new PointConverter();
var pt = new Point();
pt = (Point)pc.ConvertFromString(string.Format("{0}, {1}",x,y));
cursorMouse.Position = pt; 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.drawing.pointconverter.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.pointconverter.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T07:01:59.870

我发现问题出在哪里，Kinect 没有将屏幕的参数从 0 发送到显示宽度，而且它在身体的左侧还有一个 - 和右侧的 +，所以我不得不做一个函数计算将鼠标移动到的核心点。

# python - 将 Scapy 输出打印到 wxPython 文本控制器

> ID：15619771
> 
> 赞同：0
> 
> 时间：2013-03-25T16:22:04.420
> 
> 标签：python, wxpython, scapy

感谢您花时间看我的问题。

我正在学习 wxPython 的诀窍，我想采用一个输出到终端的工作程序并对其进行整容。使用 Scapy，我正在嗅探我的无线接口以获取探测请求/探测响应，它按预期工作。但是，我不想输出到终端窗口，而是将其输出到我的新 GUI 中的 StaticText (tc2) 框架。

到目前为止，我一直在使用教程来创建我的 GUI，但是，当前代码仍然在加载我的 GUI 之前将 Scapy 输出到终端，因为嗅探函数一直运行到它被用户杀死，因此从未真正加载 GUI。我已经尝试将嗅探功能放在 wx.StaticText 行中，但让它在那里打印并不高兴。

我的 Scapy 程序和 GUI 程序都可以独立工作，但是它们不能同时工作。我的目标是将返回值显示到 StaticText 框。以下是与我的问题相关的一小部分代码。

```
tc2 = wx.TextCtrl(panel, wx.ID_ANY, size=(300,100), style = wx.TE_MULTILINE|wx.TE_READONLY|wx.HSCROLL)

btn1 = wx.Button(panel, label='Sniff', size=(70, 30))
self.Bind(wx.EVT_BUTTON, self.OnSniff, btn1)

redir=RedirectText(tc2)
sys.stdout=redir

def OnSniff(self,e):
sniff(iface="mon0",prn=packets,store=0)

def packets(p):
if p.haslayer(Dot11ProbeReq):
    dstmac=p.addr1
    mac=p.addr2
    if p.info == "":
    ssid="BROADCAST"
    else:
    ssid=p.info

    print "%s is probing %s %s" % (mac,dstmac,ssid)

if p.haslayer(Dot11ProbeResp):
    dstmac=p.addr1
    bssid=p.addr2
        ssid=p.info
        print "%s (%s) Probe Response to %s" % (ssid,bssid,dstmac)

wx.Yield() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:45:36.820

在 wxPython 应用程序加载之前，您不想开始嗅探。因此，您要么希望在按钮或菜单事件处理程序中开始嗅探，要么可以使用 wx.CallLater 在应用程序加载后通过将 CallLater 命令放在 wx 代码的 init 末尾来开始执行。

当我重定向 ping 命令（除其他外）时，我做了类似的事情。你可以看看我关于这个主题的[教程。](http://www.blog.pythonlibrary.org/2010/06/05/python-running-ping-traceroute-and-more/)如果您需要更多有关重定向标准输出的背景知识，请参阅[此处](http://www.blog.pythonlibrary.org/2009/01/01/wxpython-redirecting-stdout-stderr/)。

我在这里的另一个答案中涵盖了这个问题的基本要点：[将命令提示符输出重定向到 python 生成的窗口](https://stackoverflow.com/questions/15471007/redirect-command-prompt-output-to-a-python-generated-window/15479602#15479602)

基本上你想使用这样的东西重定向文本：

```
class RedirectText:
    def __init__(self,aWxTextCtrl):
        self.out=aWxTextCtrl

    def write(self,string):
        self.out.WriteText(string) 
```

然后在我的 ping 示例中，我执行了以下操作：

```
def pingIP(self, ip):
    proc = subprocess.Popen("ping %s" % ip, shell=True, 
                            stdout=subprocess.PIPE) 
    print
    while True:
        line = proc.stdout.readline()                        
        wx.Yield()
        if line.strip() == "":
            pass
        else:
            print line.strip()
        if not line: break
    proc.wait() 
```

要查看的主要内容是子进程调用中的 stdout 参数，并且 wx.Yield() 也很重要。Yield 允许文本“打印”（即重定向）到标准输出。没有它，在命令完成之前文本不会显示。我希望这一切都说得通。

如果您需要在单独的线程中运行它，这里有几个关于该主题的链接：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# javascript - html 表和 Javascript 在此下添加新表

> ID：15619779
> 
> 赞同：0
> 
> 时间：2013-03-25T16:22:19.393
> 
> 标签：javascript, html-table

我有以下 html 代码，它是一个包含一些关于用户教育的字段的表格。

```
<table border="0" style="margin: auto; ">

<td width="60%" >

<fieldset style="width:530px; padding-left:5px; background-color:white " >

    <INPUT type="button" value="Add new Table" onclick="addRow('dataTable')" />

    School/University/College*</br>
    <input name="school_1" type="text" size="73"/>
    </br></br>
    Field of Study</br>
    <input name="field_1" type="text" size="73"/>
    </br></br>
    Specialized subjects</br>
    <input name="specialized_subject_1" type="text" size="73" />
    </br></br>
    Degree</br>
    <input name="degree_1" type="text" size="73"/>
    </br></br>
    Grade</br>
    <input name="grade_1" type="text" size="73" />
    </br></br></br>

        Attended from:&nbsp;<select name="month_1_1"> 
        <option value=" "> EMPTY </option> 
        <option value="January">January</option> 
        </select>

        <select id="year_1_1" name="year_1_1"> 
        <option value=" "> EMPTY </option>
        <option value="2009">2009</option>
       </select>&nbsp;&nbsp;&nbsp;&nbsp;

        Until:&nbsp;<select name="month_1_2"> 
        <option value=" "> EMPTY </option> 
        <option value="January">January</option>                        
        </select>

        <select name="year_1_2"> 
        <option value=" "> EMPTY </option>
        <option value="2009">2009</option>
       </select>&nbsp;&nbsp;    

    </h2></font>
    </fieldset>

</td>

</table> 
```

我正在使用以下 Javascript 代码，以便用户在此下添加一个新表，以添加有关他的教育的更多详细信息，以防他想这样做。我的 Javascript 代码不起作用。任何想法如何解决这一问题？

```
 <SCRIPT language="javascript">
      function addRow(tableID) {

        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var colCount = table.rows[0].cells.length;

        for(var i=0; i<colCount; i++) {

            var newcell = row.insertCell(i);

            newcell.innerHTML = table.rows[0].cells[i].innerHTML;
            //alert(newcell.childNodes);
            switch(newcell.childNodes[0].type) {
                case "text":
                        newcell.childNodes[0].value = "";
                        break;
                case "select-one":
                        newcell.childNodes[0].selectedIndex = 0;
                        break;
            }
        }
    }

</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:27:15.370

替换这个：

```
<table border="0" style="margin: auto; "> 
```

有了这个：

```
<table border="0" style="margin: auto;" id="dataTable"> 
```

每当您不知道 javascript 代码中的错误是什么时，您应该检查控制台。我不知道您使用哪个浏览器进行调试，但您可以[在此处](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)查看在哪里可以找到 javascript 控制台。

你的 javascript 在我的控制台中抛出了这个错误：

```
TypeError: 'null' is not an object (evaluating 'table.rows') 
```

这意味着`table`是`null`。当您定义表时，`getElementById`我刚刚看到 html 页面中实际上并不存在该 id。

要进一步回答有关限制表数量的问题，请将整个代码包装在 if 语句中并声明一个全局变量。

```
<SCRIPT language="javascript">
var counter = 0;

if (counter > 9)
alert("can't add more");
else {

counter++;

// paste your actual JS code here

}

</SCRIPT> 
```

# d3.js - 此 NVD3 示例中的超链接

> ID：15619786
> 
> 赞同：1
> 
> 时间：2013-03-25T16:22:38.080
> 
> 标签：d3.js, nvd3.js

[http://nvd3.org/ghpages/scatter.html](http://nvd3.org/ghpages/scatter.html)

我想让每个小数据（圆圈）成为可点击的链接。我的真正意图是让每个数据点都有一个模态窗口弹出窗口，但现在我只是从一个链接开始，因为我是初学者，所以更容易。

我[在 d3.js 对象中找到了这个链接超链接](https://stackoverflow.com/questions/13104681/hyperlinks-in-d3-js-objects)

并试图修改代码。

这是我的数据集，如您所见，我添加了键/元素（不确定它是哪个）“url”并指定了一个链接。

```
var data = [{key: 'Group1', values: [{x: 1, y: 1, url:"https:google.com"}, {x: -2, y: 3}, {x: 4, y: -9}]},
            {key: 'Group2', values: [{x: 2, y: 0}, {x: -4, y: -4}, {x: 1, y: 8}]}];

  return data; 
```

然后按照第一个链接，我将其粘贴到代码的 html 中

```
nodeEnter.append("svg:a")
  .attr("xlink:href", function(d){return d.url;})  // <-- reading the new "url" property
.append("svg:rect")
  .attr("y", -barHeight / 2)
  .attr("height", barHeight)
  .attr("width", barWidth)
  .style("fill", color)
  .on("click", click);  // <- remove this if you like 
```

但它不起作用，我想这是 nvd3 与纯 d3 代码不兼容。任何人都可以帮助我提供我需要执行此操作的代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:06:49.623

如果您阅读nvd3 散点图的[源代码，您会看到可以设置多个参数，但不能设置这个。](https://github.com/novus/nvd3/blob/master/src/models/scatter.js)

Nvd3 是一个提供可重用图表的库，这意味着它们提供了一大堆功能，但是由于公开或不公开，即使它们尝试拥有尽可能多的功能，您也会受到一些限制。您在代码中尝试执行的操作将不起作用，因为在调用 nvd3 散点图时您无法直接控制它。

不过有一个好消息：Nvd3 是开源的，所以你可以修改 scatter.js 的源代码，以便为所欲为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T16:38:45.083

您可以查看源代码并注释指针事件行

```
div.tooltip {
  position: absolute;   
  text-align: center;   
  width: 60px;  
  height: 28px;     
  padding: 2px; 
  font: 12px sans-serif;    
  background: lightsteelblue;   
  border: 0px;                  
  border-radius: 8px;
 /*  pointer-events: none;  This line needs to be removed */

} 
```

有关更多信息，请参阅[此](https://gist.github.com/d3noob/c37cb8e630aaef7df30d)链接。

# c# - 网络接口不包含“”的定义

> ID：15619788
> 
> 赞同：1
> 
> 时间：2013-03-25T16:22:40.430
> 
> 标签：c#, wpf, windows-8, code-reuse, network-interface

我最近为我正在做的 WPF 应用程序创建了这段代码。我重用代码的项目是一个 Windows 8 应用程序。代码本身是相同的，所以我真的不知道可能是什么问题。它们之间的唯一区别当然是所使用的应用程序和 .NET Framework。在 WPF 应用程序中，我的目标是 .NET 3.0，而对于 Windows 8 应用程序，我使用的是 .NET 4.5。

如您所知，这是一种扩展方法：

```
public static bool isTunnel(this NetworkInterface adapter)
        {
            return adapter.NetworkInterfaceType == NetworkInterfaceType.Tunnel;
        } 
```

它为该方法给出的错误是：

```
Error   3   'System.Net.NetworkInformation.NetworkInterface' does not contain a definition for 'NetworkInterfaceType' and no extension method 'NetworkInterfaceType' accepting a first argument of type 'System.Net.NetworkInformation.NetworkInterface' could be found (are you missing a using directive or an assembly reference?)

Error   4   The name 'NetworkInterfaceType' does not exist in the current context 
```

在我的模型课中，我遇到了类似的问题。在这条线上：

```
foreach (NetworkInterface adapter in NetworkInterface.GetAllNetworkInterfaces()) 
```

它会导致错误，指出 NetworkInterface 中不存在 GetAllNetworkInterfaces()。这是确切的错误：

```
Error   15  'System.Net.NetworkInformation.NetworkInterface' does not contain a definition for 'GetAllNetworkInterfaces' 
```

关于在 Windows 8 应用程序中重用来自 WPF 应用程序的代码，有什么我不知道的吗？

**更新：**使用 ianainterfacetype 我能够修复一半的扩展方法，因为我能够分辨它们是以太网、无线还是隧道。我仍在寻找一种方法来判断它们是由 VirtualBox 还是由 VMware 创建的。

对于那些想了解ianainterfacetype 的人，您可以在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkadapter.ianainterfacetype.aspx)找到信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:26:02.173

`GetAllNetworkInterfaces`不适用于 Windows 应用商店（地铁）应用。[MSDN 文档](http://msdn.microsoft.com/en-us/library/k056bfdz.aspx)表明只有该方法`GetIsNetworkAvailable`可用于 Windows 应用商店应用程序。绿色公文包指示它是否可用于 Windows 应用商店应用程序。

我不知道任何可用于 Windows 应用商店应用程序的 API 可以为您提供您正在寻找的信息。

# c# - 在主线程上做一些工作

> ID：15619793
> 
> 赞同：0
> 
> 时间：2013-03-25T16:23:00.500
> 
> 标签：c#, .net, multithreading

我在一个有很多线程的应用程序中。在其中一个线程中，我需要在主线程上运行一些行。

这是因为 Windows XP 在创建者线程结束时释放 I/O 资源（重叠 I/O）。我需要在单例创建中进行实例化。

我怎么能这样做？

在题外话之前：

这与 GUI 无关，所以不要提出类似的建议，`myControler.BeginInvoke`因为我没有 GUI 元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:33:42.210

您不能只在主线程上运行一些代码，因为它可能正忙于做其他事情。您需要一些框架来完成此任务，Windows UI 消息传递就是此类框架的一个示例。

如果您的应用程序是非 ui 的，那么您可以实现一个静态消息队列，将您的委托放在那里，并从主线程不断检查该队列，从中汇集委托并执行它们。

但是，更好的方法是重新评估您的应用程序架构。也许您可以将 IO 对象的工作隔离到一个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T07:05:51.267

我终于做到了：

1.  我添加了一个`BlockingCollection`我需要创建的所有 IP
2.  当我“开始”我的单例时，我只需在该集合中添加我的 IP
3.  然后我开始一个新线程，将 Background 属性设置为 True，在这个集合上进行迭代

该线程不会消耗太多资源，因为他只会在等待下一次迭代时被阻塞，并且在应用程序期间保持活动状态。

我为 Windows XP 及更低版本添加了执行此操作的条件。

# java - 在 JPanel 中重绘查询

> ID：15619796
> 
> 赞同：0
> 
> 时间：2013-03-25T16:23:22.383
> 
> 标签：java, swing, graphics, jpanel, repaint

我是一个缺乏经验的（除非你算上 70 年代初的 PDP-8）程序员，在封闭类中使用重绘方法苦苦挣扎。

该类旨在显示当地的航空地图，然后在地图上绘制小圆圈以绘制飞机的通道。随着时间的推移，地图将显示飞机降落在当地机场的最常用路径。

问题是，经过一天的努力，我仍然无法进行重绘。

与图形有关的类是：

```
package com.slatter.radarboxconnect;

import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

/**
* A RADAR Plotting Frame 
*/
public class DrawPanel extends JPanel {

    public static BufferedImage img = null; // Create a BufferedImage object
    public int cx = 700,cy = 500,cdia = 70; // Aircraft Echo parameters

    public DrawPanel() {

        // Create Graphic of map
        try {
            img = ImageIO.read(new File("full.jpeg"));  //Get the map
        } catch (IOException e){
        }
    }

    @Override 
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        //Draw the Map and a sample red dot
        g.drawImage(img, 0, 0, 1400, 1000, 0, 0, 1400, 1000, null);
        g.setColor(Color.red);
        g.drawOval(cx,cy, cdia, cdia);
        g.fillOval(cx,cy, cdia, cdia);
    }

    public void DpPlotEcho(int x, int y, int pdia) {

         cx=x;
         cy=y;
         cdia=pdia;
         repaint(cx,cy,cdia,cdia);
    }

} 
```

我在一个单独的框架中创建这个面板，并从应用程序的主体调用 DpPlotEcho() 方法。

地图和屏幕中央的一个小红点正确显示，但在尝试通过 DpPlotEcho() 方法重新绘制时不会发生更新。

所以两个问题：

1.  我如何说服重绘工作（主要问题）和
2.  如何确保所有点都留在屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:33:42.220

> 我如何说服重绘工作（主要问题）

每次更改要为组件绘制的数据时，您只需在组件上调用 repaint()。然后paintComponent() 方法将重新绘制整个组件。

> 如何确保所有点都留在屏幕上。

每次调用 paintComponent() 方法时，您都需要重新绘制所有圆圈。

这通常由以下方式完成：

1.  保留要绘制的所有圆圈的 ArrayList，然后遍历列表
2.  将每个圆圈绘制到 BufferedImage 上，然后仅绘制图像。

有关每种方法的示例，请参阅[自定义绘画方法。](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:27:11.780

尝试不带参数的[repaint()](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#repaint%28%29)`repaint(int x, int y, int width, int height)` ，仅重绘组件的指定矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T06:21:20.640

我认为您应该尝试添加一个新功能：

```
public void paint(Graphics g){
    super.paint(g);
    g.drawImage(img, 0, 0, 1400, 1000, 0, 0, 1400, 1000, null);
    g.setColor(Color.red);
    g.drawOval(cx,cy, cdia, cdia);
    g.fillOval(cx,cy, cdia, cdia);
} 
```

这是我一直做的事情，它对我有用。

# css - 主页导航上的 Z-index

> ID：15619797
> 
> 赞同：1
> 
> 时间：2013-03-25T16:23:25.953
> 
> 标签：css, z-index

我的网站主页上的 z-index 设置有问题。它正在切断较长的下拉子菜单。它只在主页上执行此操作。z-index 设置为 9999。这个主题被称为 Woo Themes 的 Scrollider。该网站的网址是 www.kuhnflyfish.com。我尝试在 Chrome 的开发者工具中添加 z-index 属性。如果您在主页上向下滚动一点，以使内容包装器位于导航下方，您可以更轻松地看到问题。我什至尝试给内容包装器一个负的 z-index 值，但这没有用。任何建议将不胜感激。下面是未经编辑的 CSS。

```
ul.nav ul {
  width: 11.089em;
  visibility: hidden;
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 9999 !important;
  margin: 0;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:04:06.947

解决方案是从父容器中删除`z-index`定义，以便子元素与重叠的`#wrapper`.

去做这个：

1.  `z-index`从**layout.css**`.has-slider #content-top`的**第 439**行删除
***   `z-index`从**layout.css**`.has-slider #header`的**第 446**行删除***   添加`z-index: -1;`到**layout.css**`.has-slider #featured-wrap`的**第 469**行****

 ******这将允许`.sub-menu`元素堆叠在`#wrapper`容器上方，因为它们现在都在同一个堆叠上下文中。

请记住，`z-index`在父级上设置 将设置一个新的堆叠上下文。此父级中的子级不能出现在包含高于`z-index`初始父级的值的任何父级兄弟姐妹之上。

* * *

分解解释：

**Parent-1 (z-index: 1;)**
-> Child (z-index: 999;) | 将出现在 Parent-2 下方，因为 Parent-1 的 z-index 低于 Parent-2

**Parent-2 (z-index: 2;)********

# java - 返回列表中每个元素的第一个元素？

> ID：15619806
> 
> 赞同：0
> 
> 时间：2013-03-25T16:23:46.403
> 
> 标签：java, list

我不确定如何做到这一点，

说我有这个，

```
List<SetOfStuff> example = [[a,b,c],[1,2,3],[x,y,z]];
return example; 
```

有没有办法让我只返回每组的第一个元素，例如。

`return [[a],[1],[x]];`

甚至更好

```
return [a,1,x]; 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:47:11.780

本质上，您正在使用以下行在列表中定义一个集合（我猜 SetOfStuff 是某种集合）：

```
 List<SetOfStuff> example = [[a,b,c],[1,2,3],[x,y,z]]; 
```

您需要首先`example`使用 List 的 get() 方法获取一个元素，然后从 List 的 get() 方法中获取您返回的结果的第一个元素。要访问 List 中的每个元素（因此每个 Set），您需要某种循环。以下是有关如何执行此操作的半伪代码。这取决于您如何访问 SetOfStuff 中的元素。

```
 List<Object> firstElements = new List<Object> (); // normally, using Object is not a great idea, but I don't know much about the data in example. Change this accordingly
    for (int i = 0; i < example.size(); i++){ // this iterates over every element in the list
        firstElements.add(example.get(i).getFromSet(0)); // in this, I assume that getFromSet(0) gets the first element from the SetOfStuff object
    } 
```

这是您正在寻找的基本格式。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T18:06:19.513

如果 SetOfStuff 有结构，并且你声明它是一个 POJO，那么`getId()`如果它还没有一个方法，那么就给它一个方法。然后，从

```
public List<SetOfStuff.ID> extractIds(List<SetOfStuff> stuffList) {
    List<SetOfStuff.ID> ids = new ArrayList<>() // Java 7.
    for((SetOfStuff stuff: stuffList) {
        ids.add(stuff.getId());
   }
    return ids;
} 
```

`SetOfStuff.ID`如有必要，请使用实际类型。考虑一个带有转换方法的函数式编程库，并尽可能使用 Java 8 lambdas。

# c# - Aforge：使用 C# 进行傅立叶变换

> ID：15619807
> 
> 赞同：0
> 
> 时间：2013-03-25T16:23:49.030
> 
> 标签：c#, fft, aforge

我正在尝试使用 Aforge 进行傅立叶变换。根据文档，此代码应该可以工作。

```
Bitmap a1 = new Bitmap("c://z3.bmp");
ComplexImage complexImage1 = ComplexImage.FromBitmap(a1);
complexImage1.ForwardFourierTransform();
Bitmap fourierImage = complexImage1.ToBitmap();
fourierImage.Save("c:/z2.bmp"); 
```

出于某种原因，出现了一个奇怪的错误：“图像宽度和高度应该是 2 的幂。” 我不知道这意味着什么，代码应该可以完美运行。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:27:09.703

好吧，根据错误，您将不得不使用宽度和高度是 2 的幂的图像。

在调用傅立叶变换之前，通过用零填充图像来放大图像，使其高度和宽度正好为 (2,4,8,16,256,512,1024,...) 像素。

标准的快速傅立叶算法仅适用于这些维度。如果图像不匹配，某些实现会在内部放大图像，看起来 Aforge 不匹配。

我认为 Aforge 使用标准的 .net 图形类，所以你可以这样做：

```
 using (Bitmap large = new Bitmap(widthPOWER_OF_2, heightPOWER_OF_2, PixelFormat.YOUR_FORMAT))
    using (Graphics largeGraphics = Graphics.FromImage(large))
    {
        largeGraphics.DrawImage(smallbitmap, 0 , 0); 
     }
   } 
```

# twitter-bootstrap - Durandal 打破 Bootstrap 的响应式菜单？

> ID：15619816
> 
> 赞同：1
> 
> 时间：2013-03-25T16:24:02.727
> 
> 标签：twitter-bootstrap, single-page-application, durandal

我正在将我的申请转移到 Durandal 并且不得不说 - 这绝对是一种乐趣。我喜欢一切都是如何运作的。

我不太明白的一件事是我的导航栏。如果您在 VS 的 Durandal SPA 模板中将浏览器的大小调整为 <768px（我相信这是触发器），菜单项不会被推到按钮后面——它们只是堆叠。

我期望的行为是这里看到的行为：

[http://twitter.github.com/bootstrap/examples/fluid.html](http://twitter.github.com/bootstrap/examples/fluid.html)

有没有我缺少的设置？如果没有，是否有人知道我如何重新获得此功能？谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:36:44.757

你可以查看示例页面的源代码，你会看到按钮就是这段代码：

```
<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
</button> 
```

使导航栏崩溃的是类 nav-collapse：

```
<div class="nav-collapse collapse">
    <p class="navbar-text pull-right">
        Logged in as <a href="#" class="navbar-link">Username</a>
    </p>
    <ul class="nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</div> 
```

考虑到这一点，您可以使 durandal 导航栏折叠。

您需要在 html 页面中包含来自 bootstrap ( bootstrap.js ) 的 js 文件。

# javascript - 无法理解来自 javascript 的错误

> ID：15619820
> 
> 赞同：-2
> 
> 时间：2013-03-25T16:24:06.507
> 
> 标签：javascript, console

我又遇到了另一个问题。我已尽我所能从以前的错误中吸取教训，但我又不得不问另一个问题，因为我又遇到了另一个问题。我写了更多的代码，这似乎又破坏了整个代码。当我点击我的按钮时，这些错误出现在控制台中。我发现它有错误的行，我看不出它有什么错误。我已经上传到这个了。抱歉无法更好地解释。控制台有问题的行上有注释。也为我糟糕的语法道歉，我对编程很陌生.. [http://jsfiddle.net/EUK8J/2/](http://jsfiddle.net/EUK8J/2/)

这条线说 explore 没有定义，但它以前工作过。

```
<button onclick="explore()">Explore</button> 
```

这里是它的定义：

```
function explore(){
if(stam>1){
    redStam();
    refresh();
    if (rNumber<=0.33){
        stam=(stam+100);
    }
    else if (rNumber<=0.66){
        cash=(cash+100);
    }
    else    {health=(health-10);
    }
}
else{alert("You have no stamina")}} 
```

我知道这里没有太多的编码，但提供的链接有完整的代码，希望足以帮助显示我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:27:31.253

jsfiddle 站点会将您的 JavaScript 代码包装在一个函数中，除非您通过左侧的第二个下拉选择器明确告诉它不要这样做。因此，您的函数将不是全局的。如果您使用“No wrap (in `<head>`)”或“No wrap (in `<body>`)”，那么它会起作用。

（当我说“它会起作用”时，我的意思是它至少能够找到你的功能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:28:20.973

你只是错过了一个点：

```
document.getElementById('health') innerHTML = health; 
```

`document.getElementById('health')`和之间`innerHTML`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:31:19.050

在小提琴中，您必须选择`nowrap`...

![在此处输入图像描述](../Images/0ccfb0ad851c02b75d74a26024ec4387.png)

`alert("You have no stamina")`缺少一个分号。

`document.getElementById('health').innerHTML = health;`给你一个语法错误，因为它缺少`.`after `('health')`。

# python - 匹配不包含特定字符串的文件

> ID：15619823
> 
> 赞同：1
> 
> 时间：2013-03-25T16:24:14.073
> 
> 标签：python, regex

如何搭配

```
aby_<ANYTHING>.csv
xyz_<ANYTHING>.csv 
```

但不是

```
aby_<ANYTHING>_Result.csv
xyz_<ANYTHING>_Result.csv 
```

而`<ANYTHING>`可以是使用正则表达式的任何字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:29:40.223

怎么样 ：

```
'^(aby|xyz)_.*?(?<!_Result)\.csv$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:30:16.207

你可以试试正则表达式

```
^.*(?!_Result)\.csv$ 
```

这将匹配任何一系列字符，然后不是字符串“_Result”，然后是字符串“.csv”。它还将期望匹配整个字符串。

# mocking - 在briefjs上实现模拟数据服务（查询失败）

> ID：15619824
> 
> 赞同：2
> 
> 时间：2013-03-25T16:24:14.223
> 
> 标签：mocking, metadata, breeze, dataservice

我正在尝试实现模拟数据服务。我正在注册新的数据类型，使用初始化数据创建一个新实体，但在执行查询时出现错误：“此查询没有可用的元数据”。我不明白为什么会这样。我的实体管理器包含我注册的数据类型，它还包含一个已创建实体的集合。我认为我的查询由于命名空间而失败，所以我尝试查询“Tag：#Football.Models” - 结果相同。我也试过 executeLocally() 方法，同样的东西......

脚步：

1) 创建微风数据服务、数据存储和管理器。

2) 创建新的元数据类型并将其添加到数据存储区。

3）创建注册类型的新实体并通过一些模拟数据对其进行初始化。

4) 执行查询获取实体集合；第 4 步失败 - 发生错误：“错误：没有可用于此查询的元数据”

这是我的代码：

```
 //1st step
           var mockDataService = new breeze.DataService({
                serviceName: "mockDataService",
                hasServerMetadata: false
            });

            var mockMetadataStore = new breeze.MetadataStore(
                {
                    namingConvention: breeze.NamingConvention.camelCase
                });

            var queryOptions = new breeze.QueryOptions({
                fetchStrategy: breeze.FetchStrategy.FromLocalCache
            });

            var entityManager = new breeze.EntityManager({
                dataService: mockDataService,
                metadataStore: mockMetadataStore,
                queryOptions: queryOptions
            });
           // 2nd step
            var et = new breeze.EntityType({
                shortName: "Tag",
                namespace: "Football.Models",
                autoGeneratedKeyType: breeze.AutoGeneratedKeyType.Identity,
                defaultResourceName: "tags"
            });
            et.addProperty(new breeze.DataProperty({
                name: "id",
                dataType: breeze.DataType.Int32,
                isNullable: false,
                isPartOfKey: true
            }));
            et.addProperty(new breeze.DataProperty({
                name: "name",
                dataType: breeze.DataType.String,
                isNullable: false
            }));
            mockMetadataStore.addEntityType(et);
            mockMetadataStore.registerEntityTypeCtor("Tag", null);
                //3rd step 
                etType = mockMetadataStore.getEntityType("Tag");
            var newTag = etType.createEntity({id:1,name:"tag"});
            entityManager.addEntity(newTag);
                // 4th step
                var a =  breeze.EntityQuery
              .from("Tag")
              .using(entityManager).execute()
              .then(querySucceed).fail( function(err) {
                    alert(err);
                                // and i got an error:
                                // Error: There is no metadata available for this query
               });; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:39:34.323

更新至版本 1.2.7

您不再需要调用*setEntityTypeForResourceName*或*addDataService*方法来完成您描述的模拟设置。

--- 上一个答案 ----------------------------------------------------

你很亲密。您需要做的就是添加以下两行

```
 mockMetadataStore.setEntityTypeForResourceName("Tag", et); // or "Tags"
   mockMetadataStore.addDataService(mockDataService); 
```

在这条线之后

```
 mockMetadataStore.addEntityType(et); 
```

在这种情况下，实际上都不需要这些，但现在它们是。下一个版本将删除对这个“额外”代码的需求。这些方法仍然有用，但在这种特定情况下不是。

此外，您应该更改您的**defaultResourceName**或您的**EntityQuery.from**子句，以便名称匹配。（这包括案例 - 请参阅下面的评论）。

原因是**defaultResourceName**是您正在查询的“集合/资源”的名称，而不是“entityType”的名称，即资源名称是您传递给**EntityQuery.from**子句的名称。一个好的约定是资源名称是它查询的 entityType 名称的复数形式，尽管这绝不是必需的。因此，您可以更改“from”子句或“defaultResourceName”

旁注，多个资源名称可以返回相同的实体类型，因此名称“defaultResourceName”中的“default”。

此外，只有属性名称通过namingConventions 的转换，所以您的resourceNames 应该**正是**服务器所期望的。

# python - Matplotlib全屏不起作用

> ID：15619825
> 
> 赞同：1
> 
> 时间：2013-03-25T16:24:15.700
> 
> 标签：python, numpy, matplotlib, scipy

我正在拼命地在 Ubuntu 12.10 上的 matplotlib 中制作全屏绘图。我已经尝试了所有可以在网上找到的东西。我需要我的情节完全全屏，而不仅仅是最大化。有没有人让这个工作？如果是这样，你能分享一下如何吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:04:15.853

**已解决**- 我的问题是我没有使用最新版本的 Matplotlib。我执行了以下步骤以在 Ubuntu 12.10 的 Matplotlib 中全屏工作。

1.  卸载matplotlib`sudo apt-get remove python-matplotlib`
2.  为 matplotlib 安装了构建依赖项`sudo apt-get build-dep python-matplotlib`
3.  使用 pip 安装 matplotlib 1.2`sudo pip install matplotlib`
4.  设置 matplotlib 以使用 GTK 后端`matplotlib.rcParams['backend'] = 'GTK'`
5.  当情节在屏幕上并且有效时使用键盘快捷键'f'！

# graphics - 光线追踪 - 如何结合漫反射和镜面反射颜色？

> ID：15619830
> 
> 赞同：10
> 
> 时间：2013-03-25T16:24:41.800
> 
> 标签：graphics, 3d, raytracing

我一直在阅读许多关于光线追踪和着色的文章，但我的光线追踪图像看起来不太好。我说的是镜面高光附近非常明亮的绿色区域。结果绿色在这里最大化，看起来像。如何调整颜色和/或阴影计算以使其看起来正确？

（不要介意愚蠢的代码，我只是想先让原则正确）。

这是它的外观：

![在此处输入图像描述](../Images/80b7eaa250ccd053736145bd3492d8a0.png)

这里只是漫反射分量：

![在此处输入图像描述](../Images/03d67f1613f15c9e212a41cea4d2be76.png)

这里只是镜面反射分量：

![在此处输入图像描述](../Images/2a57b482d24a4cf253c3614a2b4db650.png)

编辑：将漫反射更改为颜色diffuseColor = ColorMake(0.0f, 0.6f, 0.0f); 然后图像如下所示：

![在此处输入图像描述](../Images/1bc83f5f8976d6a6966d7767c3f0bb9b.png)

```
Point lightPosition = PointMake(-100.0f, 100.0f, -100.0f);
Color diffuseColor  = ColorMake(0.0f, 1.0f, 0.0f);
Color specularColor = ColorMake(1.0f, 1.0f, 1.0f);
Color pixelColor    = ColorMake(0.0f, 0.0f, 0.0f);

//  Trace...

            // Diffuse
            Point intersectionPosition = PointMake(x, y, z);
            Vector intersectionNormal = VectorMake((x - xs) / rs, (y - ys) / rs, (z - zs) / rs);
            Vector intersectionNormalN = VectorNormalize(intersectionNormal);
            Vector lightVector          = VectorSubtract(lightPosition, intersectionPosition);
            VectorlightVectorN         = VectorNormalize(lightVector);
            float      cosTheta        = VectorDotProduct(intersectionNormalN, lightVectorN);
            if (cosTheta < 0.0f)
            {
                cosTheta = 0.0f;
            }

            pixelColor = ColorMultScalar(diffuseColor, cosTheta);

            // Specular
            Vector incomVector    = VectorSubtract(intersectionPosition, lightPosition);
            Vector incomVectorN   = VectorNormalize(incomVector);

            float myDot = - VectorDotProduct(incomVectorN, intersectionNormalN);
            float myLen = 2.0f * myDot;

            Vector tempNormal     = VectorMultScalar(intersectionNormalN, myLen);
            Vector reflectVector  = VectorAdd(tempNormal, incomVectorN);
            Vector reflectVectorN = VectorNormalize(reflectVector);

            float mySpec = MAX(-VectorDotProduct(reflectVectorN, incomVectorN), 0);
            mySpec       = powf(mySpec, 5);

            specularColor = ColorMultScalar(specularColor, mySpec);
            pixelColor    = ColorAdd(pixelColor, specularColor);
            pixelColor    = ColorClamp(pixelColor);

            [self putPixelatX:i andY:j andR:pixelColor.r andG:pixelColor.g andB:pixelColor.b]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T16:51:27.890

问题是，当您计算球体的漫反射颜色时，您已经有一小块像素区域为 1 或非常接近 1（在绿色通道中）。将“phong”分量（在所有通道中的值接近 1）相加，得到 >= 1 的像素区域。然后将颜色值钳制为 1 时，>=1 的区域代表出去。

您可以使用图片编辑程序对此进行测试，并对两层（漫反射层上方的 phong 层）进行“加法”叠加。这给出了您看到的结果 - 以及预期的结果。

您可以通过多种措施避免该问题：

1.  您可以将光源调暗一点，也就是将您从余弦计算出的漫反射强度乘以亮度——比如 0.8 或 0.7。
2.  您可以限制球体的颜色饱和度（即绿色）并使其不那么绿色；）
3.  使用色调映射运算符将像素的颜色值标准化为 [0..1] 范围 - 但是这个主题很广泛 - 维基百科可能会给出很好的介绍。您甚至不必全力以赴，因为对于非基于物理的渲染，更简单的色调映射操作符可能就足够了，并产生令人赏心悦目的结果。

我的光线追踪实验可以追溯到几年前，但你可以试试这些东西。

* * *

**更新1：**

我注意到一件事，当您对输出图像进行伽玛校正时 - 效果不太明显；） - 好吧，这有点不完整。

最终的解决方案是进行物理正确或仅使用另一种着色模型：[Wikipedia on Specular highlight](https://en.wikipedia.org/wiki/Specular_highlight)。

* * *

**更新 2：**

一种实际的解决方案是计算 phong 对最终像素颜色的贡献（即您的变量`mySpec`）。这个想法是只使用镜面反射实际上不为 0 的漫反射分量的一部分，也就是说，如果你有一些镜面反射分量，你实际上并没有看到那么多（或根本没有）漫反射分量，所以它可以是调整为：

```
float diffuseContrib = 1.f - mySpec; 
```

那应该看起来不错，但我不确定它实际上有多*正确:)。*

*但是请注意；这假设您的镜面反射和漫反射分量在 [0..1] 范围内。*

我的结果看起来是这样的：

![使用镜面反射贡献计算的漫反射贡献](../Images/c752d02173e1be6fb86526429ffba60a.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T21:20:57.117

这一直是“镜面 + 漫反射 + 环境”照明模型的问题。也就是说，它是一种黑客攻击，因此不能保证正确性。

如果您如此热衷于首先巩固您的基础知识，请查看 Matt Pharr 和 Greg Humphreys 的优秀书籍“基于物理的光线追踪”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T21:50:16.070

为什么不做（光+环境）*漫反射+镜面反射？即在将光照和阴影与漫反射相乘后添加镜面反射分量？这将给出明确的亮点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-28T18:10:47.820

您应该阅读[Blinn/Phong 模型](http://en.wikipedia.org/wiki/Phong_reflection_model)。这里有一些示例着色器片段代码。基本上，您使用它们各自的角度缩放单个组件（环境、漫反射、镜面反射项）并将它们相加。

```
varying vec3 N;
varying vec3 v;    
void main (void)  
{  
   vec3 L = normalize(gl_LightSource[0].position.xyz - v);   
   vec3 E = normalize(-v); // we are in Eye Coordinates, so EyePos is (0,0,0)  
   vec3 R = normalize(-reflect(L,N));  

   //calculate Ambient Term:  
   vec4 Iamb = gl_FrontLightProduct[0].ambient;    

   //calculate Diffuse Term:  
   vec4 Idiff = gl_FrontLightProduct[0].diffuse * max(dot(N,L), 0.0);
   Idiff = clamp(Idiff, 0.0, 1.0);     

   // calculate Specular Term:
   vec4 Ispec = gl_FrontLightProduct[0].specular 
                * pow(max(dot(R,E),0.0),0.3*gl_FrontMaterial.shininess);
   Ispec = clamp(Ispec, 0.0, 1.0); 
   // write Total Color:  
   gl_FragColor = gl_FrontLightModelProduct.sceneColor + Iamb + Idiff + Ispec;     
} 
```

^(取自：[http ://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/lighting.php](http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/lighting.php))

# java - 如何将静态类保存到Java中的文件？

> ID：15619837
> 
> 赞同：2
> 
> 时间：2013-03-25T16:24:58.663
> 
> 标签：java, file, static

给定一个静态类，例如`MyStaticClass`，它有两种方法可以将自身保存到文件或从文件中加载，例如：

```
private static void save() throws IOException {
  FileOutputStream fos = new FileOutputStream(new File("myfile.dat"));
  ObjectOutputStream oos = new ObjectOutputStream(fos);
  oos.writeObject(???);
  oos.close();
}

private static void load() throws IOException {
  FileInputStream fis = new FileInputStream(new File("myfile.dat"));
  ObjectInputStream ois = new ObjectInputStream(fis);
  ??? = (MyStaticClass) ois.readObject();
  ois.close();
} 
```

我应该用什么代替`???`通常放置对象实例的位置？

有没有办法将静态类保存到与用于实例的文件不同的文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:34:17.773

据我所知，你不能那样做。但是您可以单独编写静态字段，而不是一次性编写整个类。

例如。

```
public class MyClass() {

    private static String staticField1;
    private static String staticField2;

    static {
        load();
    }

    private static void saveField(String fieldName, Object fieldValue) throws IOException {
      FileOutputStream fos = new FileOutputStream(new File("MyClass-" + fieldName + ".dat"));
      ObjectOutputStream oos = new ObjectOutputStream(fos);
      oos.writeObject(fieldValue);
      oos.close();
    }

    private static Object readField(String fieldName) throws IOException {
      FileInputStream fis = new FileInputStream(new File("MyClass-" + fieldName + ".dat"));
      ObjectInputStream ois = new ObjectInputStream(fis);
      Object value = ois.readObject();
      ois.close();

      return value;
    }

    private static void save() throws IOException {
      saveField("staticField1", staticField1);
      saveField("staticField2", staticField2);
    }

    private static void load() throws IOException {
      staticField1 = (String)readField("staticField1");
      staticField2 = (String)readField("staticField2");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:45:08.953

我不确定您所说的“静态类”是什么意思。如果您的意思是类的*状态*仅由静态数据成员组成，则将这些数据成员存储在 save() 方法中，并在 load 方法中更新它们。

另一方面，如果您想要保存非静态状态，那么看起来 save 方法不应该是静态的，而 load 方法应该是静态的，并返回一个新实例。

# plone - 将 portlet 添加到 Plone 首页

> ID：15619838
> 
> 赞同：2
> 
> 时间：2013-03-25T16:24:59.870
> 
> 标签：plone, portlet

我尝试在基于 Plone 的网站 www.capital-tennis.org 上管理内容。我对 Plone 本身几乎一无所知。

我想在网站的首页（主页）添加 2 个 portlet，一个在左侧（在白色空白处），一个在右侧（在联赛/锦标赛链接的右侧）。左侧的新 portlet 应该反映首页顶部 EVENTS 文件夹中的 4 个外部可见事件，基本上充当转发器以引起对首页上这些事件的关注。首页上的这 4 个事件应该是缩略图视图。右侧的新 portlet 应该是指向网站的外部链接。

我不完全知道我有什么样的权限。我知道我可以删除内容并将内容添加到其他页面。我想我可以对首页做同样的事情。

我不知道我是否必须使用网站上的 portlet 管理工具，或者我是否可以编写 HTML 代码来对这两个 portlet 的创建进行逆向工程。

当您回复时，请把我当成白痴，一步步指导我按下每个按钮，等等。我真的非常感谢您的帮助。

埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:39:48.870

如果您拥有完整的管理员权限，您应该会在登录后在首页某处看到*管理 portlet链接。*

![管理 portlet](../Images/7d4372ad29ce28b4c9fbcd0aa49a1e74.png)

在这里你可以添加

*   自动拉取站点上已发布事件的事件 portlet

*   静态文本 portlet，您可以在其中使用所见即所得编辑器输入文本和链接

![在此处输入图像描述](../Images/a7a5eed6c1b931c2f558813499845a70.png)

无需编程。甚至不需要编写 HTML。

请检查您是否可以完成此操作，如果看起来您到达那里，然后在问题评论中询问其他信息（如果需要），我可以修改答案。

# .net-4.0 - 在 Servicestack 客户端的上下文中使用流

> ID：15619840
> 
> 赞同：1
> 
> 时间：2013-03-25T16:25:05.310
> 
> 标签：.net-4.0, servicestack, httpwebresponse

虽然我已经了解了如何[轻松写入响应流](https://stackoverflow.com/questions/10040680/servicestack-and-returning-a-stream)，但我想知道在 ServiceStack 客户端（例如`ServiceClientBase`）的上下文中是否可以访问服务器的响应流。

在我开始访问该`HttpWebResponse`对象之前，我想仔细检查一下我没有重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:36:42.940

有关如何访问[基础原始响应类型](https://stackoverflow.com/a/15580459/85785)的示例，请参阅这个较早的答案。

[C# ServiceClient wiki](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client)也是关于 ServiceStack 内置 C#/.NET 服务客户端的权威文档。[它包括一个关于访问底层原始响应的](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client#support-for-native-built-in-response-types)不同方式的部分，包括通过 Response 流：

```
using (Stream responseStream = client.Get<Stream>("/poco/World")) {
    var dto = responseStream.ReadFully().FromUtf8Bytes().FromJson<PocoResponse>();
    dto.Result //Hello, World
} 
```

# visual-studio-2010 - Visual Studio 中行号旁边的这些图标是什么？

> ID：15619841
> 
> 赞同：3
> 
> 时间：2013-03-25T16:25:11.857
> 
> 标签：visual-studio-2010, visual-studio

在我在 Visual Studio 2010 中的一些 C++ 文件中，行号旁边有这些奇怪的图标。我无法单击它们、右键单击它们或以任何方式与它们交互。我唯一能做的就是移动/删除代码行，这些图标跟随它们所在的行/在删除行时被删除。

我到处寻找，但一无所获。谁能告诉我这些是什么？

![图片](../Images/7002ac4bd62667505920eed60fe5926a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:29:47.540

那些是书签。

`Edit -> Bookmarks -> Toggle bookmark`您可以使用菜单选项或按`Ctrl+K`两次删除书签。

您可以使用`Edit -> Bookmarks -> Clear bookmarks`或按`Ctrl+K, Ctrl+L`删除文件中的所有书签。

书签的目的是您可以在它们之间快速跳转。

# php - 在 PHP 中使用 SimpleXML xpath 解析带有冒号的标签

> ID：15619844
> 
> 赞同：0
> 
> 时间：2013-03-25T16:25:22.617
> 
> 标签：php, xpath, simplexml, xml-namespaces

有没有一种简单的方法可以使用 SimpleXML xpath 解析标签名称中带有冒号的标签？

**例子：**

```
<v12:ProcessShipmentResponse>SUCCESS</v12:ProcessShipmentResponse> 
```

这是我用来解析未命名空间但与命名空间标签中断的标签的代码。

```
 $xml = simplexml_load_string($responseXMLL, NULL, NULL, 'http://schemas.xmlsoap.org/soap/envelope/');

    foreach ($xml->xpath('soapenv:Body') as $body) {

        $custInfoArr['status'] = (string) $body->v12:ProcessShipmentReply->v12:HighestSeverity;
        $custInfoArr['trackingCode'] = (string) $body->v12:ProcessShipmentReply->v12:CompletedShipmentDetail->v12:CompletedPackageDetails->v12:TrackingIds->v12:TrackingNumber;
        $custInfoArr['labelCode'] = (string) $body->v12:ProcessShipmentReply->v12:CompletedShipmentDetail->v12:CompletedPackageDetails->v12:Label->v12:Parts->v12:Image;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:19:54.990

这个问题之前已经问过很多次了。这些不是“带有冒号的标签”，它们是 XML 命名空间，需要在任何解析器中进行特殊处理。

对于 SimpleXML，这是由[`->children()`](http://uk.php.net/manual/en/simplexmlelement.children.php)和[`->attributes()`](http://uk.php.net/manual/en/simplexmlelement.attributes.php)方法提供的。

您可以依赖别名/前缀不变（不能保证这一点，因为 XML 文档的“语义”不会改变）并`true`用作第二个参数（在您的情况下`$body->children('v12', TRUE)`）或为命名空间设置一个常量URI（保证不会改变）并通过它（在你的情况下`define('XMLNS_FEDEX_V12', 'http://fedex.com/ws/ship/v12'); /* ... */ $body->children(XMLNS_FEDEX_V12)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:33:32.790

看看[这个](http://www.php.net/manual/en/simplexmlelement.registerxpathnamespace.php)。

```
 public bool SimpleXMLElement::registerXPathNamespace(string $prefix,string $ns); 
```

来自php手册：

> 为下一个 XPath 查询创建一个前缀/ns 上下文。特别是，如果给定 XML 文档的提供者更改了名称空间前缀，这将很有帮助。registerXPathNamespace 将为关联的命名空间创建一个前缀，允许访问该命名空间中的节点，而无需更改代码以允许提供者指定的新前缀。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T16:46:32.067

需要像这样注册命名空间。这是一个工作示例，以防有人需要。

```
 $xml = simplexml_load_string($result, NULL, NULL, 'http://schemas.xmlsoap.org/soap/envelope/');
        $xml->registerXPathNamespace('env', 'http://schemas.xmlsoap.org/soap/envelope/');
        $xml->registerXPathNamespace('v12', 'http://fedex.com/ws/ship/v12');
        $bodies = $xml->xpath('env:Body');

        foreach($bodies as $body){

          $reply = $body->children('v12', TRUE)->ProcessShipmentReply;
          $custInfoArr['status'] = (string) $reply->HighestSeverity;
          $custInfoArr['trackingCode'] = (string) $reply->CompletedShipmentDetail->CompletedPackageDetails->TrackingIds->TrackingNumber;
          $custInfoArr['labelCode'] = (string) $reply->CompletedShipmentDetail->CompletedPackageDetails->Label->Parts->Image;

        } 
```

# javascript - 设置属性不起作用

> ID：15619845
> 
> 赞同：0
> 
> 时间：2013-03-25T16:25:23.163
> 
> 标签：javascript, html

我需要在我的选择选项中添加第二个属性，称为“服务”，但是当我检查源时，只设置了“值”属性

```
for(var index = 0;  index < list.length; index ++){
        elementToBeAdded.options[index + 1]  = new Option(list[index].description, list[index].id);

        elementToBeAdded.options[index + 1].setAttribute("service",list[index].service);
} 
```

**输出：**

```
<option value="myValue">
  my text
</option> 
```

**预期输出：**

```
<option value="myValue" service="myService">
  my text
</option> 
```

如何在创建选项时为每个选项添加属性？

最终我需要为每个选项保存一个额外的值，以便在选择一个选项时可以使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:59:46.933

你可以为这种东西制作功能：

```
function setAttributes(element, attributes) {
  for(var key in attributes) {
    element.setAttribute(key, attributes[key]);
  }
} 
```

并像这样使用这个函数：

```
setAttributes(option, {"value": "myValue", "service": "myService"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:21:27.377

大多数浏览器中的**“查看源代码”**功能的职责是显示浏览器最初读取的源代码。因此，通过客户端代码对文档所做的进一步更改将不会反映在源的查看器中。但是，您可以使用浏览器的 DOM 检查器（大多数浏览器都有）来分析和查看文档的最新版本。

如果您的目标是确保在元素上正确设置属性，您可以简单地尝试使用`yourOption.getAttribute('service')`.

# jquery - jQuery检查动画结束后的正确位置

> ID：15619848
> 
> 赞同：0
> 
> 时间：2013-03-25T16:25:34.550
> 
> 标签：jquery, jquery-animate

我有以下 jQuery 代码

```
$('.sidebar-address').animate({
    'right' : "+=500px"
});

var sideBarPos = $('.sidebar-address').css('right');
console.log(sideBarPos); 
```

我想在动画结束后检查位置，但它每次返回 -500px 而应该给我值 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:27:49.330

您需要在动画完成后检查它，因此您需要将其放入动画的回调中，例如：

```
$('.sidebar-address').animate({
    'right' : "+=500px"
},function(){
    var sideBarPos = $(this).css('right');
    console.log(sideBarPos);
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/se7h2/)**

否则，您的代码会在动画完成之前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:32:18.383

如果它在动画完成之前显示，您可以添加代码作为回调。

```
$('.sidebar-address').animate({
    'right' : "+=500px"
}, ANIMATION-TIME, function() {
    console.log($(this).css('right'));
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:30:39.150

你有两种可能。为您的 console.log 和变量创建一个 setTimeout 函数，或者将其放入动画的回调中。

将代码放入回调中的示例（最佳解决方案）。

```
$('.sidebar-address').animate({
    'right' : "+=500px"
},function(){
    var sideBarPos = $('.sidebar-address').css('right');
    console.log(sideBarPos);
}); 
```

使用 setTimeout 的示例，只是为了测试动画的结果：

```
$('.sidebar-address').animate({
    'right' : "+=500px"
});

setTimeout(function() {
    var sideBarPos = $('.sidebar-address').css('right');
    console.log(sideBarPos);
}, 1000); // if animation is 900, put 1000. 
```

# java - 我的正则表达式模式中的误解

> ID：15619849
> 
> 赞同：0
> 
> 时间：2013-03-25T16:25:35.300
> 
> 标签：java, regex

美好的一天，我的模式有问题`[\\d{1,4}]{1,3}+[x?]{0,2}+[\\'?\\d{1,4}]`

该模式必须检查测量系统输入是否正确。

最大的字符串可能是`9999x9999x9999'9999`，并且永远不会`x`在末尾，但也可能只是`'9999`因为这意味着半径！

所以我的问题是，当我有`9999x`or时它是正确的，而`9999x9999x9999x9999x99999`当`1`：/

我不明白为什么`1`是假的以及如何`x`在每个之后限制和整数`x`！

为了更多的理解，这是`widthXheightXdepth'radius`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:47:46.920

`[]`是[字符类](http://www.regular-expressions.info/charclass.html)。您可能想`()`改用。

从您[之前的问题](https://stackoverflow.com/questions/15618207/specific-pattern-match)来看，您想接受表格

```
Int
Int x Int
Int x Int x Int 
```

并且

```
Int ' Int
Int x Int ' Int
Int x Int x Int ' Int 
```

因此，您的模式必须绝对接受一个`Int`，最多可选两个`x Int`，然后是可选`' Int`的。

你可以像这样实现它。

```
Int( x Int){0,2}(' Int){0,1} 
```

或代替`{0,1}`使用`?`标记

* * *

现在你说它`Int`在 1-9999 范围内。因此，您的号码在 start in range 中至少包含一位数字，在 range 中包含`1-9`十到三位数`0-9`。你可以把它写成

```
[1-9][0-9]{0,3} 
```

或者改为`[0-9]`使用`\\d`（它是相同的 - d 是数字短）

* * *

现在尝试将其结合起来，您将获得最终模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:34:13.507

尝试`/(?:\d{1,4}x\d{1,4}x\d{1,4})?'\d{1,4}/`

您也可以将第一个模式组合在一起`(?:(?:\d{1,4}x){2}\d{1,4})?`，但我认为第一个模式更具可读性。

您`[]`不必要地使用字符类（括号部分，）。

此外，假设 (x,y,z) 三元组必须完全定义或完全不存在，那么您`x?`并没有做您想做的事情，因为如果您有数字，那么您必须`x`也有。

# java - 加密后图像大小增加

> ID：15619851
> 
> 赞同：1
> 
> 时间：2013-03-25T16:25:39.530
> 
> 标签：java, image-processing, netbeans, encryption, bufferedimage

我开发了一个项目来加密图像。该程序运行良好，但在加密 148 KB png 图像后，它变为 257 KB。当同一个文件被解密回来时，我得到了旧图像，但图像现在是 219 KB。为什么体积几乎翻了一番？

我的代码：[无法读取 jar 中的图像](https://stackoverflow.com/questions/15243928/cannot-read-image-in-jar?answertab=active#tab-top)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:56:59.493

问题不在于您的加密/解密步骤，而在于您如何读取和写入 PNG。

`FileInputStream`您应该使用和之类的二进制流来读取和写入 PNG `FileOutputStream`。通过保持二进制，您可以确保您不会更改数据。

图像更改大小（148 KB -> 219 KB）的原因是您没有保留原始文件的所有属性。

例如，输出宽度、高度和类型使用以下语句进行硬编码（而不是从原始图像中填充）：

```
BufferedImage writeImage = new BufferedImage(512, 512, BufferedImage.TYPE_BYTE_GRAY); 
```

# html - CSS :hover - 如何使 :hover 在文本上影响图像？

> ID：15619855
> 
> 赞同：1
> 
> 时间：2013-03-25T16:26:00.000
> 
> 标签：html, css, hover

我有一个使用图像完成的导航菜单，并且我使用 CSS 过渡和不透明度在图像上设置了鼠标悬停发光效果的动画。出于 SEO 目的，我希望导航菜单包含文本链接。

发光效果是使用 CSS`background-image`和 html 前景图像完成的。在将鼠标悬停在前景图像的不透明度上时，它会慢慢变为 0，从而显示下方的背景图像。

我已经研究出如何将文本放置在图像上，用于`position:relative`父级`div`和. 但是当鼠标悬停在文字上时，不再算作悬停在图像上，因为文字在图像上方。结果，发光效果不起作用。`position:absolute``p`

在 Flash 中，将鼠标悬停在一个对象上很容易导致另一个对象发生变化。有没有办法在 CSS 中做到这一点？如果没有，那么javascript可以做我需要的吗？

**编辑**

感谢您的回复。这是代码。抱歉，如果它很乱，我多年来没有做过任何 HTML 编码，也从未使用过 CSS。

**到目前为止，我只在第一个按钮上放置了文本和链接。**

```
<div id="nav">
  <ul>
    <li><a href="index.htm"><p class="homebutton">HOME</p><img class="navbutton" src="_images/home-button.png" alt="Website Navigation. Home Button" title="Home" height="115" width="120" /></a></li>
    <li><img class="navbutton" src="_images/how-button.png" alt="Website Navigation. How To Use Our Services Button" title="How To Use Our Services" height="115" width="120" /></li>
    <li><img class="navbutton" src="_images/playstation-button.png" alt="Website Navigation. Playstation Repair Button" title="Playstation Repair" height="115" width="120" /></li>
    <li><img class="navbutton" src="_images/xbox-button.png" alt="Website Navigation. Xbox Repair Button" title="Xbox Repair" height="115" width="120" /></li>
    <li><img class="navbutton" src="_images/wii-button.png" alt="Website Navigation. Wii Repair Button" title="Wii Repair" height="115" width="120" /></li>
    <li><img class="navbutton" src="_images/reviews-button.png" alt="Website Navigation. Customer Reviews Button" title="Customer Reviews" height="115" width="120" /></li>
    <li><img class="navbutton" src="_images/map-button.png" alt="Website Navigation. Location And Map Button" title="Location and Map" height="115" width="120" /></li>
    <li><img class="navbutton" src="_images/contact-button.png" alt="Website Navigation. Contact Us Button" title="Contact Us" height="115" width="120" /></li>
  </ul>

<!-- end .nav --></div> 
```

CSS

```
#nav {
  background-image: url(../_images/nav-bg.png);
  width:960px;
  height:115px;
  margin-bottom:10px;
  position:relative;
}

.navbutton {
  -webkit-transition:opacity 0.7s ease-in-out;
  -moz-transition:opacity 0.7s ease-in-out;
  -o-transition:opacity 0.7s ease-in-out;
  transition:opacity 0.7s ease-in-out;
  float:left;
}

img.navbutton:hover {
  opacity:0;
}      

.homebutton {
  position:absolute;
  left:19px;
  top:70px;
  color:rgba(255,255,255,1);
  font-weight:bold;
  font-size:16px;
} 
```

**编辑 2**

好的，我创建了一个小提琴以使其更易于理解：http: [//jsfiddle.net/sK5q2/](http://jsfiddle.net/sK5q2/)

如您所见，当鼠标悬停在文本上时，图像不会褪色

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:52:33.880

根据您更新的问题和小提琴（感谢小提琴！）这是一个修复：

[http://jsfiddle.net/sK5q2/1/](http://jsfiddle.net/sK5q2/1/)

就像简单地调整 CSS 选择器一样简单：

改变：`img.navbutton:hover {`

至：`a:hover img.navbutton {`

我会尽力解释，但可能做得不好。;)

如果元素是兄弟姐妹，例如...

```
<img />
<p>Text</p> 
```

...你可以用你喜欢的风格重新定位它们，但它们几乎是相互独立的。虽然您的 CSS 样式确实将一个放在另一个之上，但它纯粹是视觉上的，而不是技术性的。将鼠标移到文本上看起来就像您从`<img/>`元素移到`<p/>`元素上一样。

如果您看到上面的 HTML，请在鼠标触摸可视图像时想象该布局。将`<img/>`在代码中突出显示。如果您随后触摸文本，`<p/>`则会突出显示，这是一个不同的元素。

现在，如果你把它包装在一个链接中......

```
<a>
    <img />
    <p>Text</p>
</a> 
```

...并且您将链接定位为 的热点，无论鼠标是否*也触摸**或*标记，`:hover`您总是会触摸链接热点。*`<img/>` *`<p/>`**

 **从这个意义上说，如果您正在触摸图像，`<a/>`标签将与`<img/>`元素一样突出显示。如果您移至文本，`<a/>`标签仍将突出显示，但现在该`<p/>`元素已突出显示。

问题是，我们的 CSS 样式针对的是“总是被触动”的元素`<a/>`。

抱歉，这比我想象的更难解释。希望这会有所帮助！=)

干杯!

* * *

.. 原帖..

* * *

我感觉您真正的问题只是一个 CSS 问题，但我根据您所描述的内容创建了一个概念验证小提琴：

[http://jsfiddle.net/7rU7L/](http://jsfiddle.net/7rU7L/)

这个概念是一个标准的水平“标签”列表，其样式直接取自 Dan Cedarholm 的 CSS/HTML 模式站点 pea.rs ( [http://pea.rs/navigation/horizo](http://pea.rs/navigation/horizontal-tabs) ​​ntal-tabs )

```
<li id="a"><a href="#"><img /><b>Ahy!</b></a></li> 
```

这个概念是你有一个链接，里面有一个图像和一些文本。在这种情况下，我使用了`<img />`标签并简单地将它们设置为红色背景和固定的宽度/高度。

`<b/>`然后我将标签绝对定位在图像上。

悬停时，我调整`<b/>`标签的左侧位置（而不是颜色）。

（*为简单起见，我在此示例中缩写了代码*）

```
li a:hover b{
    left:45px;
} 
```

您只需使用伪类定位父`<a>`标记，然后选择要设置样式的子元素（在本例中）。`:hover``<b/>`

但是，我感觉您的 CSS/HTML 中发生了更多有趣的事情，但这是为了表明您可以做您正在寻找的事情（更改链接子元素的样式）。

如果您发布您的真实代码，我可以查看它并调整我的答案。

我希望这会有所帮助！

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:34:40.550

你尝试过这样的事情吗？：

```
.textThatIwantToHover:hover, .imageThatIwantToAffect:hover{
    //some css
} 
```**

# bash - 从 find 中剥离路径以在管道中使用

> ID：15619861
> 
> 赞同：2
> 
> 时间：2013-03-25T16:26:21.240
> 
> 标签：bash, pipe

我正在尝试使用“查找”对一堆 HTML 文件执行命令，然后将结果通过管道输出到不同的目录。但是，管道失败是因为“find”找到的文件名包含路径，并且路径不适合管道目标的目录结构。本质上，我需要从下面的 {} 的第二个实例中删除路径。

```
find subd/*.html -type f -exec "./mycmd {} opts > subd2/{}" \; 
```

这是命令的简化版本，但在现实世界中，在 mysubdirectory2 之前放置“../”将不起作用，前缀“cd subd &&”也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:21:55.137

类似于 Jonathan 的解决方案，但删除了不必要的额外脚本。

```
find subd -name '*.html' -type f -exec sh -c '
    for f; do
        ./mycmd "$f" opts > subd2/"${f##*/}"
    done
' _ {} '+' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:17:34.877

```
find subd/*.html -type f -exec "./mycmd {} opts > subd2/\`basename {}\`" \; 
```

更新：在 basename 周围的反引号之前添加了转义

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:12:29.033

像这样的东西应该可以工作：

```
while read fn
do
  ./mycmd "${fn}" opts > "subd2/${fn##*/}"
done < <(find subd -type f -name "*.html") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T16:49:02.033

`mycmd-invoker`是时候编写一个执行“正确工作”并从以下位置运行的脚本（调用它） `find`：

```
find subd/*.html -type f -exec mycmd-invoker {} + 
```

该脚本会获得带有路径的文件名列表，并且可以处理以下问题：

```
for file in "$@"
do
    base=$(basename "$file")
    ./mycmd "$file" opts > subd2/"$base" 
done 
```

完成任务后，您可以丢弃`mycmd-invoker`脚本，除非您认为可能需要再次执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T10:32:59.290

好的，我最终找到了解决方案，就是使用单引号而不是双引号，并对basename使用$（）评估表：

```
find subd/*.html -type f -exec './mycmd {} opts > subd2/$(basename {})' \; 
```

我不知道为什么单引号会有所不同，也不知道为什么安迪的解决方案在我的机器上不起作用。

# vaadin - Vaadin 身份验证和授权

> ID：15619864
> 
> 赞同：5
> 
> 时间：2013-03-25T16:26:31.183
> 
> 标签：vaadin, jaas

我是 Vaadin 的新手。在此之前，我制作了一个 JSF Web 应用程序。我有一个 ManagedBean 执行用户的登录。我使用了一个安全领域来委派凭据的实际验证。

我如何在 Vaadin 中执行此操作？有最佳实践吗？我正处于将一些东西放在一起的地步，但必须有某种标准程序，不是吗！？我找到了一些关于此的教程，但主要使用 Spring（我想使用 EJB）。此外，每个教程似乎都不必要地复杂。

对于如此常见的事情，必须有一些简单+结论性的教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-29T12:39:59.173

这是我能找到的唯一一篇关于如何[使用 JAAS 保护 Vaadin 应用程序的 Vaadin 官方文章。](https://vaadin.com/blog/-/blogs/using-vaadin-cdi-with-jaas-authentication)我的意思是本地或官方 Vaadin 安全化。如果您使用 Spring security、Shiro 搜索一下，您会发现更多信息，但纯 ESB 使用 JAAS。我同意这篇文章不足以学习如何设置应用程序。我在这里分享我的经验：

**1\. Vaadin CDI 扩展：**

```
<!-- Vaadin Official DI support. -->
<dependency>
  <groupId>com.vaadin</groupId>
  <artifactId>vaadin-cdi</artifactId>
  <version>1.0.0.alpha2</version>
</dependency> 
```

**2\. 了解JAAS**

我建议您通过阅读概述文章来了解 JAAS 在非 vaadin 应用程序中的工作原理，因为 JAAS 依赖于服务器应用程序提供者（TomEE、Jboss、Wildfly、Glasfish）都有不同的配置设置。在这里，您将找到使用 Tomee[的概念证明。](https://github.com/antoniomaria/jaas-basic-auth)

**3\. 开发您自己的登录模块。**

如果您决定创建一个自定义登录模块，例如：

```
public class MyLoginModule implements LoginModule {
private CallbackHandler handler;
private Subject subject;
private UserPrincipal userPrincipal;
private RolePrincipal rolePrincipal;
private String login;
private List<String> userGroups;
@Override
public void initialize(Subject subject, CallbackHandler callbackHandler, Map<String, ?> sharedState,
Map<String, ?> options) {
handler = callbackHandler;
this.subject = subject;
}
@Override
public boolean login() throws LoginException {
Callback[] callbacks = new Callback[2];
callbacks[0] = new NameCallback("login");
callbacks[1] = new PasswordCallback("password", true);
try {
handler.handle(callbacks);
String name = ((NameCallback) callbacks[0]).getName();
String password = String.valueOf(((PasswordCallback) callbacks[1]).getPassword());
// Here we validate the credentials against some
// authentication/authorization provider.
// It can be a Database, an external LDAP, a Web Service, etc.
// For this tutorial we are just checking if user is "user123" and
// password is "pass123"
if (name != null && name.equals("admin") && password != null && password.equals("admin")) {
login = name;
userGroups = new ArrayList<String>();
userGroups.add("admin");
return true;
}
// If credentials are NOT OK we throw a LoginException
throw new LoginException("Authentication failed");
} catch (IOException e) {
throw new LoginException(e.getMessage());
} catch (UnsupportedCallbackException e) {
throw new LoginException(e.getMessage());
}
}
@Override
public boolean commit() throws LoginException {
userPrincipal = new UserPrincipal(login);
subject.getPrincipals().add(userPrincipal);
if (userGroups != null && userGroups.size() > 0) {
for (String groupName : userGroups) {
rolePrincipal = new RolePrincipal(groupName);
subject.getPrincipals().add(rolePrincipal);
}
}
return true;
}
@Override
public boolean abort() throws LoginException {
return false;
}
@Override
public boolean logout() throws LoginException {
subject.getPrincipals().remove(userPrincipal);
subject.getPrincipals().remove(rolePrincipal);
return true;
}
} 
```

在应用程序的 META-INF/context.xml 中引用它。此设置适用于 TomEE，但对于 glashfish 或其他必须类似。

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
  <Realm className="org.apache.catalina.realm.JAASRealm" appName="myrealm" userClassNames="net.sf.jaas.auth.UserPrincipal"
    roleClassNames="net.sf.jaas.auth.RolePrincipal" />
</Context> 
```

**请注意，userClassNames 和 roleClassNames 只是简单的 Java Pojo，但必须实现 java.security.Principal；**

**3\. 在您的 Vaadin 登录视图中启用 JAAS**

使用 Vaadin TextField 和 Password 定义您最喜欢的登录表单，并在您的 doLoginEvent() 中定义对 JAAS 的引用。每当调用 JaasAccessControl.login 时，都会创建一个新的 LoginModule 实例。

```
 import com.vaadin.cdi.access.JaasAccessControl;
  try {
            JaasAccessControl.login(loginEvent.getUsername(), loginEvent.getPassword());
            logger.info("User {} authenticated", getPrincipalName());
            navigator.navigateTo(Main.NAME);
        } catch (Exception e) {
            Notification.show("Error logging in", Type.ERROR_MESSAGE);
            logger.error(e.getMessage(), e);
        } 
```

**4\. 使用您登录用户的信息。**

每当用户通过 JAAS 登录过滤器时。它将在他的请求上下文中提供一个标识他的类。此类称为 Principal（您之前在 LoginModule 类中设置的类）。

```
public boolean isUserInRole(String role) {
        return JaasAccessControl.getCurrentRequest().isUserInRole(role);
    }

    public String getPrincipalName() {
        Principal principal = JaasAccessControl.getCurrentRequest().getUserPrincipal();
        if (principal != null) {
            return principal.getName();
        }

        return null;
    }

    public boolean isUserSignedIn() {
        Principal principal = JaasAccessControl.getCurrentRequest().getUserPrincipal();
        return principal != null;
    } 
```

**5\. LoginModule 的替代方案**

创建自定义登录模块不是强制性的，通常 Java EE 提供者作为 Tomee 提供很少的实现。在某些数据库表中，基于属性文件的身份验证。查看[Tomee 文档 JAAS](http://tomee.apache.org/tomee-jaas.html)以查看一些示例：

**6\. 在 TomEE 中启用 JAAS** 你需要创建一个引用你 LoginModule 的 jaas.config 文件，例如：

```
filename: jaas.config 
myrealm{
    net.sf.jaas.MyLoginModule required;
}; 
```

然后使用此参数启动应用程序服务器：

```
-Djava.security.auth.login.config=E:/apache-tomee-jaxrs-1.6.0.2/conf/jaas.config 
```

如果你想看看这个概念的证明。[看看这个例子](https://github.com/antoniomaria/gazpachoquest/tree/master/questionnaires-ui)，它使用了 Tomee、Vaadin 7、JAAS、

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T07:55:22.923

几个月前我遇到了同样的问题。我当时无法弄清楚它是如何工作的，所以我查看了 spring 插件，现在我正在使用 Vaadin 登录表单和 spring security

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-11T12:29:08.340

[此处](https://github.com/mrts/vaadin-javaee-jaas-example)`LoginForm`提供了使用 JAAS、Vaadin 8、Vaadin CDI 插件和内置插件的完整示例，步骤如下：

1.  启用 Vaadin CDI 插件`pom.xml`
2.  在 Vaadin UI中使用注释启用[CDI并配置](https://github.com/mrts/vaadin-javaee-jaas-example/blob/master/src/main/java/com/jaasexample/JaasExampleUI.java)`@CDIUI``Navigator`
3.  通过添加注释（或任何其他注释）[在 CDI 视图中](https://github.com/mrts/vaadin-javaee-jaas-example/blob/master/src/main/java/com/jaasexample/SecureView.java)启用授权`@RolesAllowed``javax.annotation.security`
4.  实现一个派生自内置并用于验证用户[的登录视图。](https://github.com/mrts/vaadin-javaee-jaas-example/blob/master/src/main/java/com/jaasexample/LoginView.java)`LoginForm``JaasAccessControl`

一旦你弄清楚这些部分是如何组合在一起的，这实际上是一种相当不错、流畅的体验。

[Vaadin wiki](https://vaadin.com/wiki/-/wiki/Main/Using+Vaadin+CDI+with+JAAS+authentication)中有一篇较长的文章解释了如何将数据库支持的身份验证与 JAAS 一起使用。

# javascript - 使用javascript（不是php）变成 换行符

> ID：15619868
> 
> 赞同：2
> 
> 时间：2013-03-25T16:26:42.603
> 
> 标签：javascript, jquery, html, string, line-breaks

我需要从具有段落和跨度和其他内容的 div 中提取文本并将其放入 textarea 中。我只需要加载文本，而不是 HTML。

为此，我可以使用：

```
loadtext = $('#mydiv').text(); 
```

但是，我确实需要保留换行符。

为此，我正在做：

```
loadtext = $('#mydiv').text().replace(/<br>/gm, '\r\n'); 
```

但它似乎不起作用，因为当我将该文本加载到文本区域时，它都是平坦的，没有换行符。难道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:29:19.140

`$('#mydiv').text()`已经被剥离了所有的 HTML，包括`<br>`元素，所以这不起作用。您需要修改`#mydiv`元素的 HTML 并替换所有`<br/>`元素，*然后*检索文本。

```
$('#mydiv').find('br').each(function(){
    $(this).after("\n")
           .remove();
});
var loadtext = $("#mydiv").text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:40:22.560

另一种解决方案是使用从未添加到文档中的中间元素。

```
var html = $('#mydiv').html(); // e.g. '<p>line 1</p><br><br><p>line 2</p>'
var text = $('<div>').html(html.replace(/<br\/?>/g, '\n')).text();
/* text =
"line 1

line 2" 
*/
$('#mytextarea').text(text); 
```

这支持`<br>`(HTML) 和`<br/>`(XHTML)。

# escaping - 如何防止gson转义字符？

> ID：15619869
> 
> 赞同：2
> 
> 时间：2013-03-25T16:26:44.633
> 
> 标签：escaping, gson

我的 gson 有问题，whitch 正在逃避我的字符串。

```
Gson gson = new GsonBuilder().disableHtmlEscaping().create();
String test = "\r\n";
JsonElement result = gson.toJsonTree(test);            
String string = gson.toJson(result); 
```

在这个字符串之后是`"\\r\\n"`如何避免这种情况？

# javascript - 需要在网站上显示缓存的地图

> ID：15619873
> 
> 赞同：0
> 
> 时间：2013-03-25T16:26:54.620
> 
> 标签：javascript, html, embed, geocoding, offline-caching

我正在使用 javascript、http、css 和 php 为我正在处理的项目制作用户界面。作为界面的一部分，我需要根据经常在幕后更新的纬度和经度在地图（已知的小区域）上显示一个标记。需要注意的是，当我需要演示界面时，我将无法访问互联网，因此必须能够从以前下载的文件中显示地图。

[作为一个理想的例子，在网页上嵌入像gmapcatcher](https://code.google.com/p/gmapcatcher/)这样的东西会很好，但我希望能够使用 javascript 与它进行交互（而且我认为你无论如何都不能嵌入 gmapcatcher）。另一件要提的是，我不在乎正在使用什么公司的地图（我不需要 GoogleMaps 或任何特殊的东西），只要它可以工作。

先感谢您！

编辑：为了澄清，我将可以访问服务器和客户端，因为它们位于两个联网的虚拟机上，所以这个问题并不像前面看起来那样违反直觉。

# java - 创建一个只运行一次的java应用程序

> ID：15619875
> 
> 赞同：1
> 
> 时间：2013-03-25T16:26:59.780
> 
> 标签：java, jar, copy-protection, runonce

我必须创建一个`jar`具有以下功能的 java 应用程序：

*   jar 中包含 xml 数据，这些数据在应用程序第一次启动时被读取。随着应用程序的每次连续启动，数据都会从动态创建的二进制文件中加载。
*   客户不应该能够将应用程序重置为其主要状态（例如，如果二进制文件由于某种原因被删除，应用程序应该无法再次运行并给出错误消息）。
*   所有这一切都不应该取决于它运行的操作系统（这意味着例如在 Windows 中设置注册表项不会完成这项工作）

总结一下，我想防止重新启动一次启动的应用程序，以限制应用程序的非法重用。

现在谈谈我关于如何实现这一点的想法：

*   在第一次运行时从 jar 中删除 xml（到目前为止，我了解到不可能让应用程序编辑它自己的 jar。这是真的吗？）
*   在第一次运行时永久设置 jar 中的变量/属性/设置/任何内容（是否可能）

关于如何做到这一点的任何建议/想法？

更新：

我没有找到针对这个确切问题的解决方案，但我找到了一个简单的解决方法：连同我的软件一起，我发布了一个特定文件，该文件在程序第一次启动后会被更改。当然，如果有人保留原始文件的副本，他总是可以替换它并重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:29:50.157

任何能够删除二进制文件的用户，只要有足够的时间，也能够恢复在 jar 中所做的任何更改。当应用程序的唯一现有部分在用户手中时，您将无法阻止对其进行更改。

您可以轻松地存储原始 jar 的备份、制作副本、将其用于一次运行、删除、复制原始 jar 等。您将需要用户机器之外的某种机制，例如激活服务器。用户获得一个代码来激活帐户，并且不能再次使用该代码。

# ios - 如何更改 FBLoginView 宽度

> ID：15619876
> 
> 赞同：1
> 
> 时间：2013-03-25T16:27:03.357
> 
> 标签：ios, objective-c, xcode, facebook, ios6

我只需要增加 Facebook FBLoginView 的宽度。

因此，我尝试更改框架宽度，但似乎没有效果。

我可以看到 x,y 可以更改，但不能更改宽度，为什么？

```
(void)viewDidLoad {
    [super viewDidLoad];

      CGRect usableBounds =[[UIScreen mainScreen] bounds]; 
    // Create Login View so that the app will be granted "status_update" permission.
    FBLoginView *loginview = [[FBLoginView alloc] init];

    loginview.frame= CGRectOffset(loginview.frame,
                                      ([[UIScreen mainScreen] bounds].size.width-loginview.frame.size.width)/2,
                                      ([[UIScreen mainScreen] bounds].size.height-loginview.frame.size.height)/2 -50);

    loginview.delegate = self;

    [self.view addSubview:loginview];

    [loginview sizeToFit]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T16:01:40.923

您需要删除 [loginView sizeToFit]; 摆脱视图裁剪的方法。

# entity-framework - 保存更改时以一对一的关系重复记录

> ID：15619882
> 
> 赞同：1
> 
> 时间：2013-03-25T16:27:16.163
> 
> 标签：entity-framework

我在两个实体之间有一对一的关系，我想设置导航属性添加重复记录你我的表

[因为我的英语很差，所以我在这里](http://www.filefactory.com/file/5ucn4c5aohk9/n/Sample_rar)为你附上我的项目

tnx

我的代码在这里：

这是我的实体：

```
public partial class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Lastname { get; set; }
    public int UserType { get; set; }
}

  public partial class Storage : User
{

    public virtual Store Store { get; set; }
}

public partial class Store
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual Storage Storage { get; set; }
} 
```

这是我的添加商店按钮：

```
 User u = (User)(comboBox1.SelectedItem);
        Storage st = new Storage(u);
        Store s = new Store(textBoxStorename.Text);
        s.SetStorage(st);

        s.Save(st); 
```

这里是我的商店类：

```
 public partial class Store
{

    public Store()
    {

    }

    public Store(string name)
    {

        this.Name = name;

    }

    public void SetStorage(Storage s)
    {
        if (s != null)
        {

            this.Storage = s;
        }

    }

    public void Save(Storage s)
    {

        using (var storekeeper = new TestContainer())
        {
            bool flag = false;
            foreach (var item in storekeeper.Stores)
            {
                if (item.Equals(this))
                {
                    flag = true;
                }
            }
            if (flag)
            {
                MessageBox.Show("Duplicat Error", "", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            try
            {

                storekeeper.Users.Attach(s);
                storekeeper.Stores.Add(this);

                storekeeper.SaveChanges();

            }
            catch (Exception e )
            {

                MessageBox.Show(e.Message);
            }

        }

    }

    public override string ToString()
    {
        return this.Name;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:38:13.347

这里真正的问题是您的数据模型。

在任何情况下，您正在重新创建在实例化新 Storage 实例时已经存在的 User 实体。存储从用户继承，因此存储在概念上*是*用户的一个实例。然而，存储模型是不同的——存储是用户和存储之间的关系表。

通过实例化一个新的 Storage 实例，将现有 User 对象的属性复制到 Storage 实例的基本属性，然后简单地将 Storage 对象附加到 Users DbSet，实体框架正确地认为该对象是新的并且需要插入 - 包括用户实体对象。用户记录已经存在，因此您的重复密钥问题。

解决方案：更改您的数据模型。没有理由拥有 1..1 关系实体“存储”。只需在 User 实体中创建一个可为空的 Store 属性。如果您想强制 Store 的实例只能由单个用户引用，则 Store 实体应使用 User.Id 属性作为其主键（具有 FK 关系）或在 Store 中有一个 FK UserId 属性必须是唯一的。

# sql-server - 无法使用域凭据从 PowerShell 连接到 SQL Server

> ID：15619883
> 
> 赞同：4
> 
> 时间：2013-03-25T16:27:19.440
> 
> 标签：sql-server, powershell, windows-security

我有一个问题，我无法使用域凭据连接到 SQL Server。使用 SA 凭据，它可以工作并且查询按预期运行。但是当我使用域凭据时，我得到一个错误。

这是脚本：

```
$SQLServer = 'server.domain.com'
$SQLDBName = 'DBname'
$username  = "DOMAIN\user"
$password  = "password"

$SqlConnection = New-Object System.Data.SqlClient.SqlConnection

#--> With SA, it works, with DOMAIN creds, it does not

#$SqlConnection.ConnectionString = "Server=$SQLServer; Database=$SQLDBName; User ID=sa; Password=SApassword;"
$SqlConnection.ConnectionString = "Server=$SQLServer; Database=$SQLDBName; User ID=$username; Password=$password;"

$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = 'select count (*) from my.table'
$SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()
$DataSet.Tables[0] 
```

这是我在运行脚本时遇到的错误：

> 使用“1”参数调用“填充”的异常：“在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。未找到或无法访问服务器。验证实例名称是否正确并且 SQL Server 配置为允许远程连接。（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）
> 
> 在 C:\scripts\PowerShell\myscript.ps1:28 char:1
> + $SqlAdapter.Fill($DataSet)
> + ~~~~~~~~~~~~~~~~~~~~~~~~ ~~
> + CategoryInfo : NotSpecified: (:) [], MethodInvocationException
> + FullyQualifiedErrorId : SqlException

我应该指出我从不在域中的计算机连接到 SQL Server 的事实（因此我不能使用任何类型的身份验证传递）。

关于为什么我无法使用我的域凭据连接的任何想法？我关注了其他帖子，这些帖子提供了有关检查连接、防火墙等方面的建议。一切正常，脚本以 sa（本地）用户身份完美运行。只是不在域上..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-03T18:47:44.863

如果您有 SQL 凭据，请使用以下内容：

```
$ConnectionString = server=*serverName*;database=*databaseName*;user id=*userName*;password=*passWord*; 
```

如果您有域凭据，请使用以下内容：

```
$ConnectionString = "server=*serverName*;database=*databaseName*;user id=*domain\username*;password=*passWord*;trusted_connection=true;" 
```

这适用于我的环境。当然，在那之后你会这样做：

```
$Connection = New-Object System.Data.SQLClient.SQLConnection($ConnectionString) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T16:36:15.017

您无法以这种方式连接域凭据。

建立连接的过程中存在域凭据。进程中使用的帐户（或者如果使用 RUNAS 中的 NETWORK ONLY 选项）将用于使用集成安全性连接到 SQL Server。

当然，因为您的进程实际上不能作为该域上的用户运行，因为您的计算机与该域没有信任关系，所以我建议您考虑使用 RUNAS /NETONLY。

这将提示输入密码，因此您可能必须编写自己的替换它，它使用 CreateProcessWithLogonW API 代替。

[https://stackoverflow.com/a/758805/18255](https://stackoverflow.com/a/758805/18255)

这将允许您的进程使用来自其他域的域凭据，这些凭据仅用于网络连接并在当时进行验证，同时仍将本地帐户用于其他事情。这可能会导致访问可能依赖于您的本地（或其他域？）帐户的其他网络资源的问题，如果您从同一进程建立不同的网络连接，我还没有完全测试 RUNAS /NETONLY 的工作原理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-18T12:52:58.007

```
Function SQL_CONN1 ($Query) {
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection 
$SqlConnection.ConnectionString = "Server=myPC;Database=myDB;Integrated Security=True" 
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand 
$SqlCmd.Connection = $SqlConnection 
$SqlCmd.CommandText = $Query 
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter 
$SqlAdapter.SelectCommand = $SqlCmd 
$DataSet = New-Object System.Data.DataSet 
$a=$SqlAdapter.Fill($DataSet) 
$SqlConnection.Close() 
$DataSet.Tables[0]  }

SQL_CONN1 "Select * from [MyTable]" 
```

尝试 $SqlConnection.ConnectionString = "Server=myPC;Database=myDB;Integrated Security=True"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T18:37:52.480

如果您不担心安全性，您可以这样做（虽然不安全）：

```
#Set variables here

$connectionString="server=$s;database=$sqlDbName;user id=$userName;password=$passWord";

$sqlConnection=New-Object System.Data.SqlClient.SqlConnection($connectionString); 
```

它在 SQL Server 2012 中工作。但是，同样**不安全**。希望对某人有所帮助...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T16:39:28.057

您不能将用户名和密码作为字符串传递。

尝试这样的事情 -

```
#$cred = Get-Credential
# this will prompt for username and password, fill them in
# use this in your connection string
$secpwd = ConvertTo-SecureString $password -AsPlainText -Force

$SqlConnection.ConnectionString = 'Server=$SQLServer; Database=$SQLDBName; User ID=$username; Password=$secpwd;' 
```

# android - 进出接近警报

> ID：15619884
> 
> 赞同：0
> 
> 时间：2013-03-25T16:27:20.960
> 
> 标签：android

我正在开发一个使用接近警报检测进入和退出区域的应用程序。我只收到进入但没有退出的通知。我正在使用以下代码，

```
 pIntent2 = PendingIntent.getBroadcast(getApplicationContext(), 0, intent,
      PendingIntent.FLAG_CANCEL_CURRENT);

  locMgr.addProximityAlert(lat, lon, radius, 60000L, pIntent2);

  proxReceiver = new ProximityReceiver();

  IntentFilter iFilter = new IntentFilter(PROX_ALERT);
  iFilter.addDataScheme("geo");

  registerReceiver(proxReceiver, iFilter); 
```

//广播接收器

```
public class ProximityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent intent) {
        if (intent.getData() != null) {
            Log.v(TAG, intent.getData().toString());
        }

        Bundle extras = intent.getExtras();
        if (extras != null) {
            final String key = LocationManager.KEY_PROXIMITY_ENTERING;
            final Boolean entering = intent.getBooleanExtra(key, false);

            if (entering) {
                Toast.makeText(arg0, "entering",   Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(arg0, "exiting", Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

任何人请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:38:02.617

试试这个

```
private String PROX_ALERT_INTENT = "com.example.proximityalert";
private BroadcastReceiver locationReminderReceiver;
private LocationManager locationManager;
private PendingIntent proximityIntent;

locationReminderReceiver = new ProximityIntentReceiver();
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT);
registerReceiver(locationReminderReceiver, filter);

Intent intent = new Intent(PROX_ALERT_INTENT);

proximityIntent = PendingIntent.getBroadcast(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);
locationManager.addProximityAlert(lat, lon, radius, expiration, proximityIntent); 
```

# tfs - 在进行未更改的合并时列为挂起更改的文件？

> ID：15619885
> 
> 赞同：33
> 
> 时间：2013-03-25T16:27:25.947
> 
> 标签：tfs, merge

如果我们认为这不仅仅是侥幸的话，我们已经多次发生这种情况。当我们在完成分支后合并回来时，会有更多的变化。因此，大多数显示为挂起更改的文件从未更改（在大多数情况下，无论是在分支还是基础中）。当我比较它们（我使用超越比较）时，没有区别。我没有浏览所有未更改的文件，但在大多数情况下，它们似乎被标记为`[merge]`，而实际更改的文件被标记为`[merge,edit]`.

在一种情况下，我们可能更改了大约 100 个文件，待更改的文件显示超过 22,000 个更改。我们曾尝试在某一时刻检查它们，认为 tfs 足够聪明，可以知道哪些文件发生了变化，哪些文件没有发生变化。但它检查了所有文件。有谁知道发生了什么以及如何解决它？

我们正在运行 TFS 2012 w\ Update1
每个人都在使用 Visual Studio 2012 w\ Update 1。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-26T17:10:26.530

对于遇到相同问题的任何人，解决方法是撤消您的待处理更改。当您收到确认对话框时，请选择“全部拒绝”。应该只留下您的待定更改。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-25T17:51:32.247

关于您更改了 100 个文件并且 TFS 想要合并数千个文件的问题。这通常是由[重命名](https://stackoverflow.com/questions/5900503/rename-a-branch-and-then-reuse-the-name-for-a-new-branch)（或删除然后取消删除或移动）分支引起的。这已经咬了我几次，我感觉到你的痛苦。

我能给出的最好建议是，一旦你创建了一个分支，就不要管它。不要移动它，不要重命名它。如果分支的位置或名称错误，请继续使用它，直到删除分支并创建一个新分支。

由于 TFS 201x 在幕后工作的方式，更改分支的根文件夹有效地将其转换为不同的对象。当您尝试再次合并分支时，TFS 将执行无根据的合并，这实际上意味着分支中的所有文件似乎都已更改（即使它们没有更改）这是新行为，旧版本的 TFS (2005 / 2008 ) 不要遇到这个问题。

例如，您有一个看起来像这样的团队项目

`$/TeamProject/Main`

然后，您从“Main”创建一个名为“Dev”的分支

`$/TeamProject/Dev`

您可以随意合并，应该没有任何问题。然后你决定当你有几个开发分支时文件夹结构可能会有点混乱，所以你在团队项目的根目录下创建一个名为“Development”的文件夹并将开发分支移动到这个文件夹中

`$/TeamProject/Development/Dev`

好的，现在在幕后移动是重命名和删除，旧的 dev 分支仍然存在`$/TeamProject/Dev`（你可以通过转到“工具”、“选项”、“源代码控制”、“团队基础服务器”然后检查显示“在源代码管理中显示已删除项目”的设置

所谓的文件夹`$/TeamProject/Development/Dev`其实是一个全新的东西！因此它与“Main”没有合并关系。令人困惑的是，虽然 IDE 会显示一种关系，但实际上它并不存在。第一次从 TFS 合并时`$/TeamProject/Development/Dev`，`$/TeamProject/Main`将执行一个偷偷摸摸的无根据的合并来建立分支关系。

如果你重命名一个分支也会发生同样的事情（旧的分支将被删除，并在幕后创建一个新的分支）

[这个博客](http://blogs.msdn.com/b/chandrur/archive/2010/06/09/renaming-branches-in-tfs-2010.aspx)更详细

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-04T19:10:19.767

上面在撤消确认对话框中带有“全部拒绝”选项的评论可以正常工作，但正如 Mark Hosang 评论的那样，如果您有新文件，这将无法正常工作。Mladen Mihajlovic 是对的，您可以确保不选择那些新文件。然而，对于一个庞大的代码库，涉水通过这是非常乏味的。

所以我的方法是：在进入确认对话框之前，您会看到一个窗口来选择要撤消的文件。此窗口具有可排序的列。`Change`您可以按列排序并仅选择具有`merge`状态的文件（这些是未更改的文件；`merge, edit`是已编辑的文件并且`merge, branch`是新文件）。只需单击仅选中那些的撤消更改，然后享受整洁的合并变更集的美感。

[![例子](../Images/46acad8b8e9e8f34c830240c31852b29.png)](https://i.stack.imgur.com/8VJfc.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-09T16:05:58.687

Try this:

1.  select all pending files
2.  on context menu click 'Undo...'
3.  in the 'Undo Pending Changes' dialog sort files by 'Change' column
4.  deselect all files except 'merge' using shift+click
5.  click button 'Undo Changes'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-10T07:50:39.897

根据我的经验，当 TFS 在分支 A 中的文件 A 和分支 B 中的文件 B 之间没有关系时，就会发生这种情况。

当合并分支时，TFS 总是在不存在关系的文件之间创建关系。因此，它希望以“合并”的形式签入以记住这些关系。

当我不需要这些关系时（例如，为了重新父母），我倾向于撤消这些“合并”更改。

# php - PHP/MYSQL 将无符号整数转换为有符号整数

> ID：15619888
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:27:32.077
> 
> 标签：php, mysql, int, signed

在mysql中：

```
select CAST(17640478426339470149 as SIGNED INTEGER); #-806265647370081467 
```

在 php 中：

```
echo sprintf("%d", 17640478426339470149); #-806265647370082304 
```

我将如何获得相同的签名 int ？（以及为什么会出现这种差异？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:43:26.783

我找到了解决方案，我不确定它是否是最佳解决方案，但至少它有效。

```
echo gmp_strval(gmp_com(gmp_xor('17640478426339470149', '0xffffffffffffffff')));
#-806265647370081467 
```

# java - java-android项目中天数总和的计算

> ID：15619890
> 
> 赞同：-1
> 
> 时间：2013-03-25T16:27:34.780
> 
> 标签：java, calendar, dayofweek

我有一个非零整数值，它是一周中天数的总和，其中天数具有以下值：

```
Sunday = 1 

Monday = 2

Tuesday = 4

Wednesday= 8 

Thursday = 16 

Friday = 32 

Saturday = 64 
```

示例：整数值 127 - 一周中的所有日子，65 - 仅在星期日和星期六

我看过一些 关于此[的将整数转换为工作日列表的](https://stackoverflow.com/questions/606751/convert-integer-to-a-list-of-week-days?rq=1)帖子 ，但我在 Java 中找不到任何代码。

根据整数，我需要在特定日期（周日至周六）安排任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:47:07.160

您是否在问如何根据值 127 确定选择了哪些日期？如果是这样，您可以通过 AND 判断是否选择了给定日期：

```
int inputValue = 127;
if (Monday & inputValue) {
  // Monday was selected
} 
```

等等

在不知道您的问题的情况下很难更具体。

# c# - C#中的简单for循环

> ID：15619891
> 
> 赞同：1
> 
> 时间：2013-03-25T16:27:35.843
> 
> 标签：c#

我正在尝试使用 Visual C# Express解决[http://projecteuler.net/problem=1 。](http://projecteuler.net/problem=1)

我创建了一个控制台应用程序并编写了以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Euler_1
{
    class Program
    {
        static void Main(string[] args)
        {
            int num = 0;
            int sum = 0;
            for (int i = 0; i <= 10; i++)
            {
                if (num / 3 == 0)
                    sum = sum + num;
                num++;
                System.Console.WriteLine(num);
            }

        }
    }
} 
```

只是为了测试我是否可以获得任何输出。我不确定这是否是解决此问题的最佳方法。控制台窗口只打开一秒钟然后消失。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:28:39.133

您可以使用`Console.ReadKey()`. 通常，在发生这种情况的控制台应用程序中（尽管如果您能提供帮助，我绝不会推荐它......控制台往往从现有的命令行运行，并且预计在完成后立即退出，回到终端的上下文)，您会看到如下内容：

```
Console.WriteLine("press any key to exit...");
Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:34:58.697

你也可以试试`ReadLine method`

```
Console.ReadLine(); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.console.readline.aspx](http://msdn.microsoft.com/fr-fr/library/system.console.readline.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T16:29:46.120

尝试

```
Console.ReadKey(); 
```

循环之后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:47:22.747

Ctrl + F5 将为您留下 a`Press any key to continue...`这将阻止控制台自动关闭。

或者，您可以转到`Debug`工具栏中的 并单击`Start Without Debugging`。

此解决方案将阻止向您的项目添加代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:34:31.587

操作太多

```
if (i / 3 == 0)
   sum+=i; 
```

正如其他人所说，

```
 Console.ReadKey() 
```

会让你看到结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T16:33:50.727

您可以在最后一行放置断点以便调试器停止，添加像 ReadLine 这样的调用以便需要用户输入，添加延迟（睡眠）以便 Windows 保持显示几秒钟或从命令提示符运行它.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T16:37:36.007

问题是应用程序在循环完成后终止（控制台关闭）。要保持控制台打开，您可以执行以下操作之一：

1.  如果您通过按`ctrl`+`F5`而不是 just 来启动没有调试器的应用程序`F5`，您将`Press any key to continue . . .`在程序退出之前看到 a 。

2.  **对我来说，使用**调试器执行此操作的最佳方法是`F9`在方法的右括号中添加断点 () `main`。

添加额外的代码来帮助您调试程序对我来说是个坏习惯。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-25T16:56:38.113

这里是干净的代码以及其他人提到的所有更改。主要是取模（见 %）和 Console.ReadKey

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Euler
{
    class Program
    {
        static void Main(string[] args)
        {
            const int max = 10;
            int sum = 0;

            for (int i = 0; i < max; i++)
            {
                if (i % 3 == 0 || i % 5 == 0)
                    sum += i;
            }

            Console.WriteLine("The sum of all multiples of 3 and 5 from 0 to {0} is: {1}", max, sum);

            Console.WriteLine("Press any key to exit.");
            Console.ReadKey();
        }
    }
} 
```

# php - 将 mysqli 传递给子线程执行并返回

> ID：15619892
> 
> 赞同：0
> 
> 时间：2013-03-25T16:27:38.243
> 
> 标签：php, mysql

我有一个 CLI 脚本，它通过分叉子线程同时执行 mysql 查询。

我在父对象中创建了 4 个 mysqli 对象并将每个对象分配给子对象。这是我需要做的：

*   作为一个孩子，使用父母的`mysqli`对象来执行`$mysqli->autocommit(0)`。
*   作为一个孩子，执行一个`INSERT`语句。
*   作为父母，`$mysqli->commit()`为 4 个连接中的每一个执行。

是否可以在父子之间保持相同的连接以实现提交？

# jquery - 用于测试正则表达式的 jquery 中 .test() 的奇怪行为

> ID：15619893
> 
> 赞同：-5
> 
> 时间：2013-03-25T16:27:38.290
> 
> 标签：jquery, regex

我不知道为什么当我单独测试一个正则表达式时，例如在这里：http: [//jconsole.com/](http://jconsole.com/)，那个正则表达式工作得很好，而如果我把那个正则表达式放在我的 JQuery 代码中，它就会失败。

这是我的 JQuery 代码示例：

```
var $fullName = $("input[name='txtFullName']");
var $fullNameRegex = /^(?:([a-zA-Z]{2,4}\.){0,1} ?([a-zA-Z]{2,24})) ([a-zA-Z]{1,1}\. ){0,1}([a-zA-Z]{2,24} ){0,2}([A-Za-z']{2,24})((?:, ([a-zA-Z]{2,5}\.?)){0,4}?)$/img;

if($fullNameRegex.test($fullName) == false) 
{
    //display an error div and other things
    return false;
} 
```

我真的要疯了，因为我不明白为什么正确输入仍然失败。

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:33:36.413

您不能使用正则表达式测试 jQuery 集合 - 您需要比较它的`.val()`

# servicestack - 如何使用 JsonServiceClient 过滤对象

> ID：15619894
> 
> 赞同：4
> 
> 时间：2013-03-25T16:27:38.457
> 
> 标签：servicestack

```
//DTO
public class SampleDto : IReturn<SampleDto>
{
  public int Id { get; set; }
  public string Description { get; set; }
}
public class ListSampleDto : IReturn<List<SampleDto>>
{
}
//Service
public class SampleService : Service
{
  public object Get(ListSampleDto request)
  {
    List<SampleDto> res = new List<SampleDto>();
    res.Add(new SampleDto() { Id = 1, Description = "first" });
    res.Add(new SampleDto() { Id = 2, Description = "second" });
    res.Add(new SampleDto() { Id = 3, Description = "third" });
    return res;
  }
}
//Client
string ListeningOn = ServiceStack.Configuration.ConfigUtils.GetAppSetting("ListeningOn");
JsonServiceClient jsc = new JsonServiceClient(ListeningOn);
// How to tell the service only to deliver the objects where Description inludes the letter "i"
List<SampleDto> ks = jsc.Get(new ListSampleDto()); 
```

我不知道如何从 JsonServiceClient 向服务发送过滤条件（例如，仅获取 Description 包含字母“i”的对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:39:55.213

在这种情况下，您通常使用您在服务器端评估的属性扩展您的输入 Dto（在本例中为`ListSampleDto`）以提供正确的响应：

```
// Request Dto:
public class ListSampleDto
{
  public string Filter { get; set; }
}
...
// Service implementation:
public object Get(ListSampleDto request)
{
  List<SampleDto> res = new List<SampleDto>();
  res.Add(new SampleDto() { Id = 1, Description = "first" });
  res.Add(new SampleDto() { Id = 2, Description = "second" });
  res.Add(new SampleDto() { Id = 3, Description = "third" });
  if (!string.IsNullOrEmpty(request.Filter)) {
    res = res.Where(r => r.Description.StartsWith(request.Filter)).ToList()
  }
  return res;
}
...
// Client call:
List<SampleDto> ks = jsc.Get(new ListSampleDto { Filter = "i" }); 
```

# java - Java 编程验证 (GUI)

> ID：15619895
> 
> 赞同：2
> 
> 时间：2013-03-25T16:27:39.930
> 
> 标签：java, class, user-interface, panel

我正在做一个项目，其中我现在有 3 个课程（灯、时钟和电视），

我正在制作一个 GUI 应用程序，它允许用户将灯、电视和时钟添加到 3.3 网格面板，

在验证方面，Clock 类的构造函数之一允许用户启动一个带有小时分钟和秒参数的时钟，以及各种设置器

最好在这些类中进行验证（即确保用户不能制作读取 24:01:01 等的时钟）还是建议在 GUI 级别进行验证，即如果要求输入时间来启动时钟，如果错误，只需再次显示面板，直到应用有效输入。

根据经验，这是最好的建议方法？

（我是学习Java的第一年计算机科学家，在回复时请记住这一点，因为我不熟悉深层技术方法）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:29:16.713

您需要在两个级别上进行验证。

您希望在模型端（`Clock`类）进行验证，以避免模型中出现无效数据。

但是，为了提供良好的用户体验，您还需要在 UI 中进行验证，以便用户立即看到他/她的输入是无效的，而不必等到他/她的输入到达模型。

将其与 Web 应用程序进行比较：您希望在前端进行验证以向您的用户提供快速反馈。您还希望服务器端验证避免有人绕过您的 UI 并在您的模型中插入无效数据。

# c# - 在 Window Application 中制作 exe 文件后 xml 文件被拒绝写入

> ID：15619907
> 
> 赞同：0
> 
> 时间：2013-03-25T16:28:31.517
> 
> 标签：c#, windows

我已经完成了一个 Windows 应用程序，这里我将一些数据存储在 xml 文件中。

而且我还想更新那个 xml 文件来更新细节。

当我制作 exe 文件时，项目中的一切都很好。安装在系统中，无法写入该文件。我找不到那个原因，在项目中我授予了对该文件的完全访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:43:25.583

根据 XML 文件所在的位置，您需要为其授予管理员权限。您可以通过将清单文件添加到项目并将`RequestExecutionLevel`标签修改为`RequireAdministrator`.

# php - 通过特定用户的标签获取 Youtube 视频

> ID：15619916
> 
> 赞同：0
> 
> 时间：2013-03-25T16:28:52.403
> 
> 标签：php, zend-framework, youtube-api, feed

我正在尝试使用 $tags 从 $username 获取 youtube 视频：

```
$tags='detskij-sad-198';
require_once('Zend/Loader.php');
Zend_Loader::loadClass('Zend_Gdata_YouTube');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
$authenticationURL = 'https://www.google.com/accounts/ClientLogin';
$httpClient = Zend_Gdata_ClientLogin::getHttpClient(
                          $username     = 'Schoolkharkovua',
                          $password     = '*****',
                          $service      = 'youtube',
                          $client       = null,
                          $source       = '*****',
                          $loginToken   = null,
                          $loginCaptcha     = null,
                          $authenticationURL);

$devkey = '*****';
$yt = new Zend_Gdata_YouTube($httpClient, '', '', $devkey);
$yt->setMajorProtocolVersion(2);
$query = $yt->newVideoQuery();
$query->setMaxResults(4);
$query->setVideoQuery($tags); // also i tried $query->category = $tags;
$query->setAuthor($username);
$videoFeed = $yt->getVideoFeed($query->getQueryUrl(2)); 
```

$videoFeed 没有返回任何条目，尽管我知道 $username 有一个带有 $tags 的视频，并且此代码可以工作到 3 月中旬

如果我只通过 $username 或 $tags 进行查询 - 我会得到结果。我究竟做错了什么？

PS。如果我同时尝试通过“关键字”和“作者姓名”进行查询，[http://gdata.youtube.com/demo/index.html也会返回空视频提要](http://gdata.youtube.com/demo/index.html)

Hhhhhmmmmm ......似乎“google”不再在标签中获得符号“-”

但

```
echo 'Tags: ' . implode(", ", $videoEntry->getVideoTags()); 
```

仍然是空的，youtube api 不返回视频标签！

请大家帮我从我的视频频道获取视频标签！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:58:11.640

您需要验证您的连接，YT 现在返回一个空的 media$keywords 对象（截至去年 8 月）。

[https://developers.google.com/youtube/2.0/developers_guide_php#Authentication](https://developers.google.com/youtube/2.0/developers_guide_php#Authentication)

这是他们关于它的博客文章......

[http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

# android - Fragment从回栈返回布局时，如何复用之前创建的视图？

> ID：15619918
> 
> 赞同：3
> 
> 时间：2013-03-25T16:29:01.077
> 
> 标签：android, view, transactions, fragment

众所周知，Fragment 实例在添加到后台堆栈时不会被销毁（请参阅：[创建 Fragment](http://developer.android.com/guide/components/fragments.html#Creating "创建一个片段")）。

我的片段有一个复杂的视图。我的目的是防止在片段从后台堆栈返回到布局时重新创建视图，以便更快地渲染。

我的片段扩展类中的代码类似于以下内容：

```
View firstView;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    if (firstView == null) {
        firstView = inflater.inflate(R.layout.first_view, container, false);
        Button btn_read = (Button)firstView.findViewById(R.id.btn_read);
        btn_read.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                  // do something
            }
        });
    }

    return firstView;
} 
```

我的 Fragment 被添加到后堆栈中。

但是，当我通过按“返回”弹出返回堆栈时，出现以下异常。显然，之前在 onCreateView 中创建的视图仍然附加到某个地方，它不能被新的父级重用。

我知道不遵循使用片段的“一般模式”是不明智的。我只是好奇如何防止重新创建 BIG 视图以提高 Fragment 的性能。

- - - - - - - 例外 - - - - - - - -

```
03-25 23:55:38.354: W/dalvikvm(314): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
03-25 23:55:38.354: E/AndroidRuntime(314): Uncaught handler: thread main exiting due to uncaught exception
03-25 23:55:38.445: E/AndroidRuntime(314): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewGroup.addViewInner(ViewGroup.java:1861)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewGroup.addView(ViewGroup.java:1756)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewGroup.addView(ViewGroup.java:1713)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewGroup.addView(ViewGroup.java:1693)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.NoSaveStateFrameLayout.wrap(NoSaveStateFrameLayout.java:40)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:874)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.BackStackRecord.popFromBackStack(BackStackRecord.java:697)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.FragmentManagerImpl.popBackStackState(FragmentManager.java:1465)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.FragmentManagerImpl.popBackStackImmediate(FragmentManager.java:447)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.support.v4.app.FragmentActivity.onBackPressed(FragmentActivity.java:164)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.app.Activity.onKeyUp(Activity.java:1863)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.app.Activity.dispatchKeyEvent(Activity.java:2043)
03-25 23:55:38.445: E/AndroidRuntime(314):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1631)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2368)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2338)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1641)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.os.Looper.loop(Looper.java:123)
03-25 23:55:38.445: E/AndroidRuntime(314):  at android.app.ActivityThread.main(ActivityThread.java:4363)
03-25 23:55:38.445: E/AndroidRuntime(314):  at java.lang.reflect.Method.invokeNative(Native Method)
03-25 23:55:38.445: E/AndroidRuntime(314):  at java.lang.reflect.Method.invoke(Method.java:521)
03-25 23:55:38.445: E/AndroidRuntime(314):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-25 23:55:38.445: E/AndroidRuntime(314):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-25 23:55:38.445: E/AndroidRuntime(314):  at dalvik.system.NativeStart.main(Native Method)
03-25 23:55:38.445: I/Process(52): Sending signal. PID: 314 SIG: 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T11:21:21.700

你可以试试

```
if (view != null) { 
   ((ViewGroup) view.getParent()).removeView(view);
} else {
   // Create your view
   ...
}

return view 
```

# sql-server - 试图以访问权限禁止的方式访问套接字

> ID：15619921
> 
> 赞同：42
> 
> 时间：2013-03-25T16:29:11.570
> 
> 标签：sql-server, sql-server-2008, sockets, tcp

我在 HostGator 上有一个网站，我自己有一个运行 SQL Server 2008R2 的专用服务器。我使用的连接字符串是 XXXX,1433，它指向我的专用服务器的 IP 地址。我已经在我的服务器上进行了防火墙设置，以便我可以使用 SSMS 并从我的家用 PC 登录到 SQL Server。

完成之后，我的印象是从我的 hostGator 托管站点连接到 SQL 就可以了。我收到以下错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP 提供者，错误：0 - 试图以访问权限禁止的方式访问套接字。）

我查找了这个错误并找到了很多解释，但没有一个与我的情况有关。我的服务器正在运行带有 IIS 7.5 的 Windows 2008。HostGator 技术支持向我保证，他们不会有任何问题。]]

我的防火墙允许 SQL Server Browser 服务使用 TCP 端口 1433 和 UDP 端口 1434。

由于我有一台专用服务器，我没有人可以向我的托管公司提出这个问题。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2019-12-03T21:14:26.147

我在 Docker for Windows 和 Hyper-V 中遇到了类似的问题，它们保留了自己使用的端口——在我的情况下，它是`3001`无法访问的端口。

*   该端口没有被另一个进程使用`netstat -ano | findstr 3001`——在管理员 Powershell 提示符下运行什么也没显示。
*   但是，`netsh interface ipv4 show excludedportrange protocol=tcp`表明该端口处于排除范围之一。

我能够遵循 Docker for Windows 问题 #3171 中描述的解决方案（[无法绑定端口：Docker-for-Windows & Hyper-V 不包括但不使用重要的端口范围](https://github.com/docker/for-win/issues/3171)）：

1.  禁用 Hyper-V：

    ```
    dism.exe /Online /Disable-Feature:Microsoft-Hyper-V 
    ```

2.  在所需的重新启动后，保留您想要的端口，以便 Hyper-V 不会将其保留回来：

    ```
    netsh int ipv4 add excludedportrange protocol=tcp startport=3001 numberofports=1 
    ```

3.  重新启用 Hyper-V：

    ```
    dism.exe /Online /Enable-Feature:Microsoft-Hyper-V /All 
    ```

在此之后，我能够启动我的 docker 容器。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-26T02:04:46.600

根据此[链接](http://social.technet.microsoft.com/Forums/en-US/w7itpronetworking/thread/e0cc1b3e-2c63-451a-abc8-8e1e66a23287/)：

如果复制服务尝试使用被其他人或故障 NIC 占用的端口，则可能会出现此症状。请尝试以下步骤：

1.  重启windows防火墙服务
2.  重启有问题的机器
3.  重新启动“TCP/IP 堆栈”。以管理员身份运行 CMD，键入“netsh int ip reset resetlog.txt”以重置 TCP/IP。
4.  尝试暂时禁用防病毒软件。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-11-16T03:29:04.587

只是`Restart-Service hns`可以改变Hyper-V占用的端口。它可能会释放您需要的端口。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-07-27T15:48:56.353

毫不奇怪，当另一个进程正在侦听所需端口时，可能会出现此错误。今天发生了这种情况，当时我启动了一个 Apache Web 服务器实例，在其默认端口 (80) 上进行侦听，忘记了我已经运行 IIS 7，并在该端口上进行了侦听。这在[SYSTEM (PID 4) 正在使用端口 80 中得到了很好的解释，那是什么？](http://Port%2080%20is%20being%20used%20by%20SYSTEM%20(PID%204),%20what%20is%20that?)更好的是，那篇文章指出[Stop http.sys from listener on port 80 in Windows ，这解释了一种非常简单的解决方法，只需从提升的命令提示符和我的](https://www.mikeplate.com/2011/11/06/stop-http-sys-from-listening-on-port-80-in-windows/)**主机**文件的单行编辑中获得一点帮助.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-29T12:35:52.350

我的 Windows 防火墙阻止了端口 8080，所以我将其更改为 5000 并且它工作！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-12T03:37:00.453

根据[https://stackoverflow.com/a/33859341/446250](https://stackoverflow.com/a/33859341/446250)，为我的以太网适配器启用 Internet 连接共享最终导致了这个问题。禁用共享解决了问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-14T21:35:21.087

我的情况和解决方案：我创建并启用了 HyperV 以太网适配器。出于某种原因，我的主 Windows 机器使用的是“虚拟”以太网适配器而不是“硬件”适配器。

我禁用了虚拟以太网，并显示了我的网络设置以更改网络公共/隐私设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-03T09:06:36.463

没有什么对我有用。Grep 找不到罪魁祸首。重置 TCP / IP 或防火墙也没有做任何事情。以下命令解决了它：

```
net stop http 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-01T17:59:36.230

对于收到此错误但原因略有不同的其他人，您可以执行以下操作进行故障排除。通过右键单击并选择以管理员身份运行来打开文本编辑器。打开 C:\Program Files\pgAdmin 4\v4\web\pgAdmin4.py 并添加一行代码，没有其他任何内容。输出将截然不同且很有帮助。您可以在系统托盘 > pgAdmin > 查看日志中找到错误。

```
import traceback # <--- add this line too.
try:
    app.run(
        host=config.DEFAULT_SERVER,
        port=config.EFFECTIVE_SERVER_PORT,
        use_reloader=(
            (not app.PGADMIN_RUNTIME) and app.debug and
            os.environ.get("WERKZEUG_RUN_MAIN") is not None
        ),
        threaded=config.THREADED_MODE
    )

except IOError:
    #app.logger.error("Error starting the app server: %s", sys.exc_info())
    app.logger.error("Error starting the app server: %s", traceback.format_exc()) # <--- add this line! 
```

而不是这个：

```
ERROR flask.app: Error starting the app server: (<class 'OSError'>, OSError(10013, 'An attempt was made to access a socket in a way forbidden by its access permissions', None, 10013, None), 
```

你会得到这个：

```
2021-03-01 11:38:33,817: ERROR  flask.app:  Error starting the app server: (<class 'OSError'>, OSError(10013, 'An attempt was made to access a socket in a way forbidden by its access permissions', None, 10013, None), <traceback object at 0x00000279EF74A3C0>)
Traceback (most recent call last):
  File "C:/Program Files/pgAdmin 4/v4/web/pgAdmin4.py", line 210, in main
    app.run(
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib/site-packages\flask\app.py", line 943, in run
    run_simple(host, port, self, **options)
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib/site-packages\werkzeug\serving.py", line 1052, in run_simple
    inner()
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib/site-packages\werkzeug\serving.py", line 996, in inner
    srv = make_server(
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib/site-packages\werkzeug\serving.py", line 847, in make_server
    return ThreadedWSGIServer(
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib/site-packages\werkzeug\serving.py", line 740, in __init__
    HTTPServer.__init__(self, server_address, handler)
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib\socketserver.py", line 452, in __init__
    self.server_bind()
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib\http\server.py", line 138, in server_bind
    socketserver.TCPServer.server_bind(self)
  File "C:/Program Files/pgAdmin 4/v4/venv/Lib\socketserver.py", line 466, in server_bind
    self.socket.bind(self.server_address)
OSError: [WinError 10013] An attempt was made to access a socket in a way forbidden by its access permissions 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-02T22:14:22.820

通过关闭防火墙中的环回地址过滤，我能够解决本地 Analysis Services 实例上的相同错误消息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-25T10:43:55.870

如果您需要使用 SSMS 远程访问 hostgator 上的 SQL 服务器，则需要在 hostgator 中将您的 IP 列入白名单。通常需要 1 小时才能打开白名单 IP 的端口

# java - 使用digest.getClassloader时getclassloader何时返回null

> ID：15619922
> 
> 赞同：0
> 
> 时间：2013-03-25T16:29:16.553
> 
> 标签：java

我在使用公共消化器时遇到了这个问题。

我在我的 ecrise 中设置了类路径中的 jar。

这是代码片段。

```
Digester digester = new Digester();
System.out.println(digester.getClassLoader()); 
```

上面的路径在我的机器中返回 null，而在另一台机器中具有相似构建路径的相同项目返回 classoader 对象。

# wpf - WPF if 语句基于单选按钮是否选中

> ID：15619926
> 
> 赞同：1
> 
> 时间：2013-03-25T16:29:20.507
> 
> 标签：wpf, checked, jradiobutton

我在一些看起来应该很简单的事情上遇到了困难。我来自 Windows 窗体并开始使用 WPF。我想我有一个简单的语法问题，但我似乎找不到这个单选按钮问题的具体示例。

我的 GUI 上有一个单选按钮，用于通过地图选择或列表运行查询。单击加载时，如果选择地图，则应执行一项操作，而列表则应执行不同的操作。代码与此类似：

```
private void Load_Click(object sender, RoutedEventArgs e)
{
  if (rdBtnList.Checked == true)
  {
    //do this
  }

  // if rdBtnList not checked (ie if rdBtnMap is checked)
  // do this
} 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T16:33:56.303

改变：

```
if (rdBtnList.Checked == true) 
```

至

```
if (rdBtnList.IsChecked == true) 
```

**笔记：**

`I'm coming from Windows Forms and starting up with WPF`

*   你必须忘记你曾经在 winforms 中学到的一切，并拥抱 MVVM。您应该创建一个 ViewModel 并将您的`rdBtnList.IsChecked`属性绑定到 ViewModel 中的某个布尔值，然后在其中执行您的逻辑。视图背后的代码不是应用程序逻辑的正确位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:34:55.383

调用 WPF 中的属性，`IsChecked`因此您只需要更新`if`语句

```
if (rdBtnList.IsChecked == true) { 
  ...
} 
```

该`IsChecked`属性是`bool?`WPF 中的（可为空的值），因此您可以通过执行以下操作来选择更明确

```
if (rdBtnList.IsChecked.HasValue && rdBtnList.IsChecked.Value) { 
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:34:02.560

您是否缺少退货声明？照原样，发布的代码将始终执行 if not checked 路径：

```
private void Load_Click(object sender, RoutedEventArgs e)
{
  if (rdBtnList.IsChecked == true)
  {
    //do this
    return; // return, or the if not checked path below will always win.
  }

  // if rdBtnList not checked (ie if rdBtnMap is checked)
  // do this
} 
```

在 WPF 中，您需要使用 IsChecked 属性。有关详细信息，请参阅[RadioButton 类。](http://msdn.microsoft.com/en-us/library/system.windows.controls.radiobutton.aspx)

# jquery - 按元素 ID 或按类组在 intro.js 中不起作用

> ID：15619928
> 
> 赞同：2
> 
> 时间：2013-03-25T16:29:28.000
> 
> 标签：jquery, intro.js

我在 intro.js 示例中做了一个简单的测试......在 Chrome DevTools 中更改按钮操作

```
<a class="btn btn-large btn-success" href="javascript:void(0);" onclick="javascript:introJs('.test').start();">Show me how</a> 
```

和一个步骤信息，添加一个类：

```
<div class="span6 test" data-step="2" data-intro="Ok, wasn't that fun?">
  <h4>Easy to Use</h4>
  ... 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:19:42.860

所以有点错误，如果你阅读自述文件，你可以看到`introJs`参数是针对步骤/元素的农场的。所以你的代码应该是这样的：

```
<div class='test'>
    <div class="span6 test" data-step="2" data-intro="Ok, wasn't that fun?">
      <h4>Easy to Use</h4>
      ...
</div> 
```

现在`introJs('.test').start();`应该可以正常工作了。

# nhibernate - NHibernate DateTimeOffsetType 代理源？

> ID：15619931
> 
> 赞同：3
> 
> 时间：2013-03-25T16:29:34.387
> 
> 标签：nhibernate, datetime, json.net, offset

我有一个现有的应用程序，它使用 NHibernate 从已经运行了一段时间的数据库（SQL Server 2008 R2）加载一些相当复杂的对象。

今天，我在尝试使用 JSON.Net 序列化我的对象时遇到以下错误：

```
Error getting value from 'DefaultValue' on 'NHibernate.Type.DateTimeOffsetType'. 
```

我的 NHibernate 映射中的所有属性都没有使用 DateTimeOffsetType，所以我怀疑 NHibernate 正在以某种方式代理我的对象的属性。

我的对象上有几个 Nullable DateTime 值，但对我当前的版本没有什么新意。

我应该在哪里寻找 NHibernate 尝试将该类型用于哪些属性？

我还可能缺少什么？当我尝试使用此代码进行序列化时出现错误：

```
 var converter = new IsoDateTimeConverter();
 x.Json = JsonConvert.SerializeObject(myObject, converter); 
```

同样，该代码已经存在很长时间了，这只是新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T17:51:12.270

也许不是您一直在寻找的解决方案，但仍然是一个解决方案 - 我遇到了类似的事情。就我而言，我忘记了从 Web api 调用返回我的 DTO，而默认的 json 序列化程序开始执行此操作。

现在，我将我的数据对象映射到具有数据协定属性的 DTO 对象，并对其进行序列化。由于我的 DTO 很简单并且没有获得 NHibernate Proxified，因此这个错误似乎不再发生。

否则-我已经为其他可空日期执行此操作-我希望对序列化进行更多控制。为它定义一个自定义转换器并按照你的意愿做，但是对于这个 Nhibernate 类型。我宁愿根本不序列化（或尝试）这些代理类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T09:49:35.667

了解哪些属性具有 datetimeoffset 作为类型

```
var propertiesWithDateTimeOffset = nhConfiguration.ClassMappings
    .SelectMany(c => c.PropertyClosureIterator)
    .Where(p => p.Type is DateTimeOffsetType)
    .Select(p => p.PersistentClass.ClassName + "." + p.Name); 
```

注意：代码尚未处理组件，但很容易添加

# asp.net-mvc-3 - 使用实体框架创建主详细信息

> ID：15619933
> 
> 赞同：0
> 
> 时间：2013-03-25T16:29:40.977
> 
> 标签：asp.net-mvc-3, entity-framework

我有一个 blogPost 应该采用类别名称，为此我在 get action 中这样做了：

```
public ActionResult Add()
        {
            ViewBag.CategoryList = new SelectList(_categoryRepository.GetAllCategory(), "Id", "Name");
            return View(new BlogPost());

        } 
```

在视图中我有：

```
@model Blog.Domain.Model.BlogPost
@{
    ViewBag.Title = "AddPost";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<fieldset>
    @using (Html.BeginForm("Add", "Blog", FormMethod.Post))
    {
        @Html.ValidationSummary()
        <div>
            @Html.LabelFor(b => b.Title)
            @Html.TextBoxFor(b => b.Title)
            @Html.ValidationMessageFor(b => b.Title)
        </div>

        <div>
            @Html.LabelFor(b => b.Body)
            @Html.EditorFor(b => b.Body)
            @Html.ValidationMessageFor(b => b.Body)
        </div>

        <div>
            @Html.LabelFor(b => b.Summary)
            @Html.TextBoxFor(b => b.Summary)
            @Html.ValidationMessageFor(b => b.Summary)
        </div>

        <div>
            @Html.LabelFor(b => b.Category)
            @Html.DropDownListFor(model => model.Category.Id, ViewBag.CategoryList as SelectList, "--- Select Category ---", new { @class = "some_class" })
        </div>
        <div>
            <input type="submit" value="Add Post" />
        </div>
    }
</fieldset> 
```

在 Post 操作中，我编写了以下代码：

```
[HttpPost]
        public ActionResult Add(BlogPost blogPost)
        {
            if (ModelState.IsValid)
            {
                blogPost.PublishDate = DateTime.Now;
                _blogPostRepository.AddPost(blogPost);
                _blogPostRepository.Save();
                return View();
            }
            return View();
        } 
```

我不确定我写的这段代码是否完全正确，但我有这个麻烦很长时间了！掌握细节插入实体框架实际上在这种情况下选择一个类别并将其成功发送到数据库，如果你之前写过这样的东西，请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:06:00.037

看起来您正在设置两个下拉列表并将一个的值分配给模型的 ID 字段，我假设它是博客文章实体的 ID..？

1.  删除 @Html.DropDownList(...) 语句
2.  将@Html.DropDownListFor(...) 的第一个参数修改为选择模型/实体的CategoryId 属性的lambda 表达式（无论Category 的FK 字段名称是什么，大概是model => model.CategoryId）

    @Html.LabelFor(b => b.Category) @Html.DropDownListFor(model => model.CategoryId, ViewBag.CategoryList as SelectList, "--- Select Category ---", new { @class = "some_class" } )

# ruby-on-rails - rake undefined method `fields' for nil:NilClass on database seed

> ID：15619937
> 
> 赞同：5
> 
> 时间：2013-03-25T16:29:48.197
> 
> 标签：ruby-on-rails, postgresql, rake, ruby-on-rails-4, seeding

当我尝试做

```
rake db:reset 
```

或者

```
rake db:drop
rake db:create
rake db:schema:load
rake db:seed 
```

`NoMethodError: undefined method 'fields' for nil:NilClass`当种子出现时，我随机得到一个。这是一个：

```
[1m[35m (186.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130318105449')
[1m[36m (187.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130319154146')[0m
[1m[35m (189.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130322132730')
[1m[36m (104.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130322142814')[0m
NoMethodError: undefined method `fields' for nil:NilClass:               SELECT COUNT(*)
          FROM pg_class c
          LEFT JOIN pg_namespace n ON n.oid = c.relnamespace
          WHERE c.relkind in ('v','r')
          AND c.relname = 'schema_migrations'
          AND n.nspname = ANY (current_schemas(false)) 
```

这是另一个：

```
[1m[35m (39.0ms)[0m  BEGIN
[1m[36mCategory Exists (107.0ms)[0m  [1mSELECT 1 AS one FROM "categories" WHERE "categories"."hash" = 'cat1' LIMIT 1[0m
[1m[35mSQL (124.0ms)[0m  INSERT INTO "categories" ("category_id", "created_at", "label", "hash", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["category_id", 58], ["created_at", Mon, 25 Mar 2013 15:07:53 CET +01:00], ["label", "Cat1"], ["hash", "cat1"], ["updated_at", Mon, 25 Mar 2013 15:07:53 CET +01:00]]
[1m[36m (117.0ms)[0m  [1mCOMMIT[0m
[1m[35m (162.0ms)[0m  BEGIN
[1m[36mCategory Exists (136.0ms)[0m  [1mSELECT 1 AS one FROM "categories" WHERE "categories"."hash" = 'cat2' LIMIT 1[0m
[1m[35mSQL (104.0ms)[0m  INSERT INTO "categories" ("created_at", "label", "hash", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Mon, 25 Mar 2013 15:07:53 CET +01:00], ["label", "Cat2"], ["hash", "cat2"], ["updated_at", Mon, 25 Mar 2013 15:07:53 CET +01:00]]
[1m[36m (99.0ms)[0m  [1mCOMMIT[0m
[1m[35m (108.0ms)[0m  BEGIN
[1m[36mCategory Exists (173.0ms)[0m  [1mSELECT 1 AS one FROM "categories" WHERE "categories"."hash" = 'cat3' LIMIT 1[0m
NoMethodError: undefined method `fields' for nil:NilClass: SELECT  1 AS one FROM "categories"  WHERE "categories"."hash" = 'cat3' LIMIT 1 
```

我真的不明白这可能来自哪里。有时我什至没有错误，一切都完美插入。在做了一些测试之后，它似乎取决于插入的速度。如果我从我的开发服务器执行此操作，它几乎总是成功。如果我从我的计算机远程执行此操作，它几乎总是失败。

我在本地使用 ruby​​ 1.9.3，在我的开发服务器上使用 ruby​​ 2。在两者上我都使用 rails4 (edge) 并且我的驱动程序是 postgresql (pg, 没有指定版本)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T21:29:09.633

我在 rails4（edge）和 postgres 上也遇到了这个问题。我在 solr:reindex 上遇到了它，所以我认为它与插入无关。当我弄清楚出了什么问题时，我会更新这个。

编辑：尝试更新到 rails 修订版 1a838ccda4a31bb023985f6c977e6bc3e238cda9，它解决了我的问题。

这是关于它的 github 问题：[https ://github.com/rails/rails/issues/9710](https://github.com/rails/rails/issues/9710)

我在快速 git bisect 之后找到了它。它现在肯定在 git 中修复了。

# swt - Java SWT Spinner 里面有文本？

> ID：15619942
> 
> 赞同：0
> 
> 时间：2013-03-25T16:30:00.977
> 
> 标签：swt, spinner, rcp, jface, equinox

我有 JAVA SWT/RCP 应用程序（Equinox OSGi），我只是在创建向导，它应该看起来像一张图片：

![在此处输入图像描述](../Images/59b5f6a77694b33192bed8d75dd3a418.png)

我刚刚发现标准 SWT 类 Spinner 的问题没有提供这种在 Spinner 中包含一些文本的选项。我正在做一些谷歌搜索，但我找不到任何合理的解决方案。

我的图片上描述的微调器（带文本）可以使用 Swing，但我不能使用 Swing => SWT RCP（Equinox OSGi 平台）。

我什至查看了 SWT Spinner 类的源代码，但不是很清楚。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:59:30.020

我建议您实现自定义小部件。如果你看`Spinner`，它也是一个`Composite`。您可以使用`Text`小部件以及向上箭头`Button`和向下箭头来做同样的事情`Button`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:54:01.530

您可以使用[SWT Combo](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Combo.html)小部件来模拟 Swing Spinner。

这是一些示例代码。

```
private String[] items = { "5 min", "3 min", "1 min" };

Combo readOnlyCombo = new Combo(shell, SWT.DROP_DOWN | SWT.READ_ONLY);
readOnlyCombo.setItems(items); 
```

# capistrano - Capistrano 如何访问代码中的 serverDefinition 选项

> ID：15619945
> 
> 赞同：1
> 
> 时间：2013-03-25T16:30:07.523
> 
> 标签：capistrano

我正在定义我的服务器设置，如下所示：

```
task :test do
  role(:frontend) {[server1,server2,server3, {:user=> "frontend-user", :options => {:log_location=>"HOW DO I READ THIS??"}}]}
  role(:backend) {...}
  role(:db) {...}
  role(:mq) {...}
end

task :staging do
  role(:frontend) {[server1,server2,server3, {:user=> "frontend-user", :options => {:log_location=>"HOW DO I READ THIS??"}}]}
  role(:backend) {...}
  role(:db) {...}
  role(:mq) {...}
end

task :prod do
  role(:frontend) {[server1,server2,server3, {:user=> "frontend-user", :options => {:log_location=>"HOW DO I READ THIS??"}}]}
  role(:backend) {...}
  role(:db) {...}
  role(:mq) {...}
end 
```

这是为了包含传统企业系统的所有复杂性。

现在，从一项任务中，我想阅读`log_location`.

任务示例：

```
namespace :log do
  desc "list all log files"
  task :list do
    run %(ls -1 #{log_location}/*/*.log)
  end
end 
```

问题是变量`log_location`未定义。

> /.rvm/gems/ruby-2.0.0-p0/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:193:in `method_missing': undefined local variable or method`log_location' for # (NameError)

1.  如何访问该变量？
2.  是否有更智能/更简单的方法来设置此自定义变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:13:14.303

我很抱歉说你看不懂。传递给的块`task()`不在服务器上下文中执行，因此该块实际上不知道它在哪个服务器上运行。

多年来，经典的解决方法是上传一个看起来像这样的配置文件：

```
---
  hostname1:
    log_file_location: "/var/log/hostname1/foo/bar"
  hostname2:
    log_file_location: "/var/log/hostname2/foo/bar" 
```

（或类似的）并在加载配置时使用机器主机名。

我知道这不是一个很好的解决方法，因此在即将推出的 Capistrano 版本（参见 Github 的 v3 分支）中，有一个看起来像这样的功能：

```
host1 = SSHKit::Host.new 'user@example.com'
host2 = SSHKit::Host.new 'user@example.org'

host1.properties = {log_file_location: "/foo/bar"}
host2.properties.log_file_location = "/bar/baz"

on hosts do |host|
  target = "/var/www/sites/"
  if host.hostname =~ /org/
    target += "dotorg"
  else
    target += "dotcom"
  end
  execute! :head, '-n 20', host.properties.log_file_location
  execute! :git, :clone, "git@git.#{host.hostname}", target
end 
```

( [SSHKit 示例](https://github.com/leehambley/sshkit/blob/master/EXAMPLES.md#do-something-different-on-one-host-or-another-depending-on-a-host-property)) -`SSHKit`是 Capistrano 的新后端驱动程序。

v3 分支可能还没有准备好迎接黄金时间，我们在内部取得了很大的成功，但是文档非常*糟糕*，根本不存在。然而，该代码实际上是一个数量级不那么强大的命令，我认为您会发现它的可读性很强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:00:17.670

实际上，我能够提取`log_location`变量，但最终得到的解决方案有一个限制：

我仅将日志位置用于一种环境。这在我当前的项目中没有问题，因为我一次针对一个角色运行 capistrano 任务。

为了测试这个设置，我做了这个任务：

```
namespace :support do 
  desc "Test if the log location variable is correctly fetched from configuration"
  task :test_log_location do
    find_servers_for_task(current_task).each do |server|
      # puts server.host
      # puts server.port
      # puts server.user
      # puts server.options
      result = "LOG LOCATION: #{server.options[:log_location]}"
      #puts result
      logger.info result 
    end
  end
end 
```

然后，对于 :log 命名空间中的任务，我定义了变量`set :log_location`并定义了`:current_role`变量：

```
namespace :log do
  def set_log_location 
    #set_log_location
    #puts fetch(:log_location)
    log_location = nil
    options      = nil
    find_servers_for_task(current_task).each do |server|
      # puts server.host
      # puts server.port
      # puts server.user
      # puts server.options
      options = server.options
      log_location = server.options[:log_location]
      #log_location = server.options[:current_role]
    end
    msg1="FATAL: you need to specify 'ROLES=frontend,backend,mq' (or one of them) from command line"
    msg2="FATAL: Could not get log_location from environment/server options. I can only see these options: #{options}"

    raise msg1 if ENV['ROLES'].nil? 
    raise msg2 if log_location.nil?

    set :log_location, log_location
    set :current_role, ENV['ROLES'].split(',').first
    logger.info %(CURRENT_ROLE #{fetch(:current_role)})
    logger.info %(THE LOG LOCATION IS: #{fetch(:log_location)})
  end
end 
```

最后，我使用了一个单独的方法来完全限定日志路径（我的设置需要 - 也在`:log`命名空间中）：

```
 def log_location
    log_names = {
      :frontend => "*/play.log",
      :backend => "*Weblogic*/*.{log,out}"
    }
    loc = "#{fetch(:log_location)}/#{log_names[fetch(:current_role).to_sym]}"
    logger.info "using the log location of '#{loc}'"
    loc
  end 
```

现在，每个任务都可以像这样使用特定的日志位置：

```
 desc "list all log files"
  task :list do
    set_log_location
    run %(ls -l #{log_location})
  end 
```

我相信这可以做得更优雅，但它对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:45:06.757

你需要这个：[https ://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)

这意味着您可以将特定于阶段的代码隔离在以阶段命名的单独文件中。如果您想测试共享 deploy.rb 中的阶段名称，您也可以这样做，如下所示：

把它放在你的 deploy.rb

```
task :show_stage do
   puts(stage)
end 
```

从命令行测试

```
$ cap staging show_stage
staging 
```

# cakephp - CakePHP 初学者 - MVC 关系

> ID：15619946
> 
> 赞同：-4
> 
> 时间：2013-03-25T16:30:12.330
> 
> 标签：cakephp

我是 Cake 的初学者，并且经历了 MVC 关系。我已经得到了下面的代码来分解，我似乎没有掌握它的窍门。

```
 <?php echo $html->link($view['User']['nickname'], array('controller' => 'users', 'action' => 'profile', $view['User']['nickname'])); ?> 
```

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:49:21.197

`<a href=....>`给出的代码是使用 HtmlHelper 在视图中生成链接。

在这种情况下，将生成指向“用户”控制器的“配置文件”操作的链接，并将用户的“昵称”作为参数传递。生成的链接将（使用标准路由配置）如下所示；

```
<a href='/users/profile/someNickName'>someNickName</a> 
```

但是，此代码适用于 CakePHP 的旧版本（1.3 和更早版本），对于较新版本，这是符号；

```
echo $this-Html->link($view['User']['nickname'], array('controller' => 'users', 'action' => 'profile', $view['User']['nickname'])); 
```

关于 HtmlHelper 的文档（针对 CakePHP 1.3）可以在这里找到：

[CakePHP HtmlHelper 文档](http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/HTML.html#link)

但是，如果您正在为这类问题苦苦挣扎，我真的强烈建议您从头开始阅读 CakePHP 'CookBook'，并且最好开始使用 CakePHP 2.x：

[CakePHP 食谱 - 欢迎](http://book.cakephp.org/2.0/en/index.html)

# sql - 在多变量参数中使用数学运算符

> ID：15619950
> 
> 赞同：0
> 
> 时间：2013-03-25T16:30:17.033
> 
> 标签：sql, sql-server, dynamic-sql, mathematical-optimization

我想知道是否可以在多变量参数中包含数学运算符和情况。

在我的示例中，我希望能够以@SLA_Days 的形式自由输入“逾期”、“不到一天”或“超过一天”。

目前，我可以输入这些变量中的任何一个，它会返回一个结果。

```
if @sla_days = 'Overdue'
    BEGIN 
        SELECT @sql = @sql + 'and sla_days < 0' 
    END
ELSE

if @sla_days = 'Less than one day'
    BEGIN
        SELECT @sql = @sql + 'and sla_days <1 and sla_days >0'
    END
ELSE

if @sla_days = 'More than one day'
    BEGIN
        SELECT @sql = @sql + 'and sla_days > 1'
    END

EXEC sp_exectuesql @SQL 
```

我确实有一个我创建的函数，它看起来是一个逗号分隔的字符串并提取变量。我不需要帮助来创建这个

我需要帮助的是，是否可以输入@SLA_days = '逾期，不到一天，超过一天'并且仍然可以识别这些规则？

因此，如果我选择过期且少于 1 天，它将返回 sla_days < 0 和 sla days < 1 的两个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:39:37.853

您不需要函数来提取变量。这将表现得更好。

您的特定问题的技巧是使用`OR`而不是`AND`，因为列中的值永远不会是，例如，`> 0`AND `< 0`。我还在变量的每一侧添加逗号，以便可以按任何顺序识别条件。但是请注意，如果逗号之间也有空格，它将找不到值 - 您必须对此进行调整。

```
SET @SLA_days = ',' + @SLA_days + ',';

SET @sql = @sql + ' (1=2 '
  + CASE WHEN @SLA_days LIKE '%,Overdue,%'
    THEN ' OR (sla_days < 0)' ELSE '' END
  + CASE WHEN @SLA_days LIKE '%,Less than one day,%'
    THEN ' OR (sla_days < 1 AND sla_days > 0)' ELSE '' END
  + CASE WHEN @SLA_days LIKE '%,More than one day,%'
    THEN ' OR (sla_days > 1)' ELSE '' END + ')'; 
```

最后，你*真的*需要把这些又大又丑的字符串传给数据库吗？据推测，用户正在从多选或复选框中进行选择，在这种情况下，您可以使用更整洁的系数来表示每种情况。

# ruby-on-rails - 从 Rails 中的注册表单创建设计用户时如何创建另一个对象？

> ID：15619951
> 
> 赞同：4
> 
> 时间：2013-03-25T16:30:17.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, ruby-on-rails-4

我的系统中有不同类型的用户。一种是，比方说，一个设计师：

```
class Designer < ActiveRecord::Base
  attr_accessible :user_id, :portfolio_id, :some_designer_specific_field
  belongs_to :user
  belongs_to :portfolio
end 
```

这是在用户注册时立即创建的。因此，当用户填写 sign_up 表单时，将`User`创建一个 Devise 以及该`Designer`对象，并将其`user_id`设置为`User`创建的新对象。如果我可以访问控制器的代码，这很容易。但是使用 Devise，我无法访问此注册控制器。

创建`User`和`Designer`注册时的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T16:38:04.713

在最近的一个项目中，我使用[**表单对象**模式](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)一步创建了 Devise 用户和公司。这涉及绕过 Devise 的 RegistrationsController 并创建您自己的 SignupsController。

```
# config/routes.rb
# Signups
get 'signup' => 'signups#new',     as: :new_signup
post 'signup' => 'signups#create', as: :signups  

# app/controllers/signups_controller.rb
class SignupsController < ApplicationController
  def new
    @signup = Signup.new
  end

  def create
    @signup = Signup.new(params[:signup])

    if @signup.save
      sign_in @signup.user
      redirect_to projects_path, notice: 'You signed up successfully.'
    else
      render action: :new
    end
  end
end 
```

引用的注册模型被定义为一个表单对象。

```
# app/models/signup.rb

# The signup class is a form object class that helps with
# creating a user, account and project all in one step and form
class Signup
  # Available in Rails 4
  include ActiveModel::Model

  attr_reader :user
  attr_reader :account
  attr_reader :membership

  attr_accessor :name
  attr_accessor :company_name
  attr_accessor :email
  attr_accessor :password

  validates :name, :company_name, :email, :password, presence: true

  def save
    # Validate signup object
    return false unless valid?

    delegate_attributes_for_user
    delegate_attributes_for_account

    delegate_errors_for_user unless @user.valid?
    delegate_errors_for_account unless @account.valid?

    # Have any errors been added by validating user and account?
    if !errors.any?
      persist!
      true
    else
      false
    end
  end

  private

  def delegate_attributes_for_user
    @user = User.new do |user|
      user.name = name
      user.email = email
      user.password = password
      user.password_confirmation = password
    end
  end

  def delegate_attributes_for_account
    @account = Account.new do |account|
      account.name = company_name
    end
  end

  def delegate_errors_for_user
    errors.add(:name, @user.errors[:name].first) if @user.errors[:name].present?
    errors.add(:email, @user.errors[:email].first) if @user.errors[:email].present?
    errors.add(:password, @user.errors[:password].first) if @user.errors[:password].present?
  end

  def delegate_errors_for_account
    errors.add(:company_name, @account.errors[:name].first) if @account.errors[:name].present?
  end

  def persist!
    @user.save!
    @account.save!
    create_admin_membership
  end

  def create_admin_membership
    @membership = Membership.create! do |membership|
      membership.user = @user
      membership.account = @account
      membership.admin = true
    end
  end
end 
```

关于表单对象（以及我的工作的源代码）的优秀读物是[关于重构的 CodeClimate 博客文章](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)。

总而言之，我更喜欢这种方法而不是使用`accepts_nested_attributes_for`，尽管可能有更好的方法。如果你找到一个，请告诉我！

===

*编辑：添加了参考模型及其关联以便更好地理解。*

```
class User < ActiveRecord::Base
  # Memberships and accounts
  has_many :memberships
  has_many :accounts, through: :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :account
end

class Account < ActiveRecord::Base
  # Memberships and members
  has_many :memberships, dependent: :destroy
  has_many :users, through: :memberships
  has_many :admins, through: :memberships,
                    source: :user,
                    conditions: { 'memberships.admin' => true }
  has_many :non_admins, through: :memberships,
                        source: :user,
                        conditions: { 'memberships.admin' => false }
end 
```

模型中的这种结构与[thinkbot](https://rubygems.org/gems/saucy)的宝石 saucy 一起建模。源不在 Github AFAIK 上，但可以从 gem 中提取。我通过改造它学到了很多东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T04:41:21.223

如果您不想更改注册控制器，一种方法是使用 ActiveRecord 回调

```
class User < ActiveRecord::Base
  after_create :create_designer

  private

  def create_designer
      Designer.create(user_id: self.id) 
  end
end 
```

# django - 皇帝模式下的Django + uwsgi：如何重新加载项目的wsgi.py

> ID：15619953
> 
> 赞同：0
> 
> 时间：2013-03-25T16:30:20.067
> 
> 标签：django, uwsgi

我在我的服务器上部署了一个新项目，但遗憾的是在 Django 项目文件夹的 wsgi.py 中，我有另一个项目的设置（复制粘贴，我忘记更改它）。我的 wsgi.py 看起来像这样：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "loserti.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

应该有“cwu.settings”而不是“loserti.settings”。当然，我的项目没有工作，抱怨找不到loserti.settings。我已经解决了这个问题并重新加载了适当的 uwsgi vassal ( `uwsgi --reload`)，当我更改一些 python 代码时我会这样做，但在这种情况下没有帮助。所以我试图重新加载皇帝。那也没有帮助。最后我需要停止并启动皇帝，这似乎绝对是一个矫枉过正。请问，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T19:05:04.280

只需“触摸”您的附庸的配置文件。这将触发整个封臣的重新加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T22:15:48.993

所以答案是这个

`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "loserti.settings")`

`DJANGO_SETTINGS_MODULE`仅当尚未为附庸设置环境变量时才重置环境变量。问题是您需要实际杀死封臣（使用 SIGKILL），以便皇帝重新生成它。之后，最终应用该更改。

# svn - cygwin 的颠覆提交钩子失败

> ID：15619964
> 
> 赞同：4
> 
> 时间：2013-03-25T16:31:02.570
> 
> 标签：svn, cygwin

我们有一些自定义的 subversion pre 和 post 提交钩子可以在我们的生产服务器上正常工作。

对于开发人员测试，我使用的是 cywgin。直到最近，提交挂钩也运行良好。

但是，在运行 cygwin 更新后，钩子现在失败了（为清楚起见，添加了换行符）：

```
 0 [main] svn 14820 child_info_fork::abort: 
  C:\cygwin\bin\cygcrypto-1.0.0.dll: Loaded to different address: 
  parent(0x440000) != child(0x590000) 
```

有没有人见过类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T21:13:57.900

这里的问题是 fork 失败：Subversion 正在尝试 fork 一个新进程，而 Windows 正在加载具有意外内存布局的新进程。这是 Cygwin 试图解决的基本问题之一：Linux 程序期望在生成新进程时，新进程将具有与旧进程相同的内存布局；每当启动新进程时，Windows 都会主动更改内存布局。

[记录在案的解决方案在 Cygwin FAQ](http://cygwin.com/faq-nochunks.html#faq.using.fixing-fork-failures)中。

简短的版本是您需要执行以下操作：

*   退出所有 Cygwin 进程。这意味着关闭所有 MinTTY 窗口，退出正在运行的任何 X 服务器等。检查任务管理器。
*   转到开始 > 运行（或点击`Win`+ `R`），然后运行`C:\cygwin\bin\dash`​​.
*   在出现的窗口中，键入`/bin/rebaseall`并点击`Return`。
*   去给自己泡杯咖啡。

如您所述，重新安装也可以；那是因为重新安装将在后台运行有限的 Cygwin rebase。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:54:40.537

重新安装颠覆解决了这个问题。

# iphone - 在 ViewDidLoad 之前执行 InitWithName 可能吗？

> ID：15619968
> 
> 赞同：2
> 
> 时间：2013-03-25T16:31:12.437
> 
> 标签：iphone, objective-c, viewcontroller, viewdidload

我试图在两个视图控制器之间移动一个 NSString 并且在搜索了所有复杂的方式之后，我想习惯的最简单和最直接的方式是在接收 VC 中编写一个 initWithName 函数并在发送中调用它风险投资。它确实成功地移动了它，但我希望它在 ViewDidLoad 加载 textViewer 之前执行，以便在按下选项卡按钮后立即显示。这是来自发送 VC 的代码：

```
- (void)textViewDidEndEditing:(UITextView *)textView
{   
    if ([textView.text isEqualToString: @""]) {
        textView.text = @"*Paste the machine code in question here*";
    }
    SecondViewController *theVCMover = [[SecondViewController alloc] initWithName: textView.text];
    [self.navigationController pushViewController:theVCMover animated:YES]; //Is this really necessary if I'm not going to segue it directly, I'm just waiting for the user to press the next tab
    gotItLabel.text = @"Got it! Ready for action...";
} 
```

这是接收VC的代码：

```
 - (id)initWithName:(NSString *)theVCMovee {
    self = [super initWithNibName:@"SecondViewController" bundle:nil];
    if (self) {
        rawUserInput = theVCMovee;
        CleanerText.text = rawUserInput;
    }
    return self;
} 
- (void)viewDidLoad {
        [super viewDidLoad];
    CleanerText.text = rawUserInput;
        NSLog(@"Got the other tab's text and it's %@ ", rawUserInput);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:43:03.897

您的代码大部分都很好，但是您会发现，由于您拥有更复杂的视图控制器，因此您不一定要编写自定义初始化程序来完成所有属性设置。请注意，如果是您从 nib 加载的 UI 元素，则在您的 init 方法`CleanerText`中设置它没有帮助 -在调用之前它不会加载。`CleanerText.text``-viewDidLoad`

`rawUserInput`但是，如果您为要设置的变量或其他变量声明属性，则不必在 init 中执行所有操作。然后你可以去：

```
SecondViewController *theVCMover = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
theVCMover.rawUserInput = textView.text;
theVCMover.otherProperty = otherValue;
.... 
```

其余代码的工作方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:36:02.387

在完成执行之前，您不能（可靠地）调用实例上的方法`init`，因此这种模式是“安全的”并且它应该如何工作。

# jquery - jQuery图像调整大小

> ID：15619972
> 
> 赞同：0
> 
> 时间：2013-03-25T16:31:20.373
> 
> 标签：jquery

我需要做一些事情，比如当跨度悬停时，图像会变大（所以从 75% 到 100% 大小）。我尝试了类似的东西

```
$("img#myselector").css("width", "75%");
$("img#myselector").css("max-width", "75%");
$("img#myselector").css("height", auto");
//mouse enters the span
$("img#myselector").css("width", "100%");
$("img#myselector").css("max-width", "100%");
//mouse leaves the span
$("img#myselector").css("width", "75%");
$("img#myselector").css("max-width", "75%"); 
```

但这会将图像炸到其正常尺寸的 200%，而不是缩小/增加尺寸。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:52:43.007

正如@HasanAyan 所说，您正在根据图像容器调整图像大小。如果图像在`body`站点中，您将尝试使用页面的所有宽度`width:100%`。

您应该指定像素。

对于它，你可以利用 jQuery 的`height()`和`width()`函数，获取原始大小以便以后使用它：

```
var originalWidth = $('#myselector').width(); 
```

这里有一个工作示例：http: [//jsfiddle.net/bX3GU/](http://jsfiddle.net/bX3GU/)

# java - 如何在 MigLayout 中显示 JLabel 省略号？

> ID：15619973
> 
> 赞同：5
> 
> 时间：2013-03-25T16:31:20.280
> 
> 标签：java, swing, layout, miglayout

使用默认布局管理器，JLabel 在调整框架大小时显示其省略号。

如图所示：

```
public static void main(String[] args) {
    final JFrame jFrame = new JFrame("JLabel, show me your ellipsis!");

    jFrame.getContentPane().add(new JLabel("Sure darling! Shrink me and I'll show you"));

    jFrame.pack();
    jFrame.setVisible(true);
} 
```

但是，MigLayout 不会显示这种行为！

```
public static void main(String[] args) {
    final JFrame jFrame = new JFrame("JLabel, show me your ellipsis!");

    jFrame.getContentPane().setLayout(new MigLayout());
    jFrame.getContentPane().add(new JLabel("Nope! I just do not know you well enough!"));

    jFrame.pack();
    jFrame.setVisible(true);
} 
```

我尝试了所有我能想到的布局/组件约束。有谁知道这种事情在 Mig 中是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T17:00:18.780

JLabel 的最小尺寸与其首选尺寸大致相同（或确切地说，不记得了）。MigLayout 仅将组件缩小到其最小值。因此，您必须添加一个允许尺寸小于其 minSize 的组件约束：

```
content.add(label, "wmin 10lp"); 
```

# javascript - 将值从活动传递到 Javascript 方法的 Android webview

> ID：15619976
> 
> 赞同：5
> 
> 时间：2013-03-25T16:31:32.313
> 
> 标签：javascript, json, android-webview, parameter-passing

我正在尝试将我的活动中的数组传递给位于 Assets 目录中的 html 文件中的 javascript 方法。

我正在使用 JavascriptInterface 传递我的 int 数组，如 JSONArray：

```
public class JavaScriptInterface {

        Context mContext;       
        JavaScriptInterface(Context c) {

            mContext = c;

        }

        @JavascriptInterface
        public JSONArray getValues() {

            String values = "[100,133,'',120,122,132,133]";

            JSONArray jsonarr = null;

            try {

                jsonarr = new JSONArray(values);

            }

            catch(JSONException e) {

                e.printStackTrace();
            }

            return jsonarr;
        }

    } 
```

在 javascript 方法中，我采用以下值：

```
 var data = JSON.parse(js.getValues()); 
```

现在，我正在不同的设备和 AVD 上测试我的项目：

该代码在三星 Note 2 (JB 4.2.1) 和带有目标 Google API (API 级别 8) 的 AVD 上运行良好，而在 Asus Nexus 7 (JB 4.2.2) 和其他带有 JB 4.2 的 AVD 上代码停止工作返回一个 Web控制台错误：

> 03-25 16:35:12.809：E/Web 控制台（11352）：未捕获的语法错误：文件中的意外令牌 o：///android_asset/data/test.html:1

我需要这些值来表示使用 Javascript 库的图表。

另外，我修改了文件 proguard-project.txt 拒绝 javascript 代码混淆：

```
keepclassmembers class fqcn.of.javascript.interface.for.webview {
   public *;
}
-keep public class com.XXX.XXX.DataReportActivity$JavaScriptInterface
-keep public class * implements com.XXX.XXX.DataReportActivity$JavaScriptInterface
-keep classmembers class com.XXX.XXX.DataReportActivity$JavaScriptInterface {
    <fields>;
    <methods>;
}
-keepattributes JavascriptInterface 
```

有人对解决它有任何想法吗？

拜托，欢迎任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T12:59:45.003

更改您的 Javascript 接口以返回一个字符串。JSON.parse 需要一个字符串，而不是 JSON 对象。

```
@JavascriptInterface
    public String getValues() {
        String values = "[100,133,'',120,122,132,133]";
        return values;
    } 
```

值字符串可能需要放在引号中，以便 javascript 函数也能够解析它。换句话说：

```
return "'" + values + "'"; 
```

# java - Java Swing JPanel 大小

> ID：15619978
> 
> 赞同：0
> 
> 时间：2013-03-25T16:31:32.703
> 
> 标签：java, swing, jpanel, paint

我希望能够在我的 JFrame 中有一个固定大小为 400x400 的 JPanel。

我还希望它周围有一个 20 像素宽的边框。

主要问题是下面的代码没有坚持它的大小。` JScrollPane runningAni = new JScrollPane(new views.cRunningAnimation(model));

```
 runningAni.setMaximumSize(new Dimension(400,400));

    this.setSize(new Dimension(600,600));
    this.add(runningAni,BorderLayout.CENTER);` 
```

执行此操作时，runningAni 面板会横跨整个框架。

```
 public void paint(Graphics g) {

    this.setBackground(new Color(0,255,0));
    } 
```

我知道这一点是因为我的全帧将自己绘制为绿色而不仅仅是 JPanel（上面的绘制代码是针对我的面板而不是框架）

我将如何创建面板，使其始终保持相同的大小，因此它周围总是有一个 20 像素的彩色边框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:37:44.810

`BorderLayout`忽略大小。您需要设置一个`LayoutManager`允许您将大小设置为固定大小或关心大小设置的一个。有不同的布局管理器允许这样做（例如`GrindBagLayout` ~~，或者根本没有布局管理器~~）。有些不是那么容易使用（例如`GridBagLayout`）。使用什么取决于布局的其余部分。

您可能会使用包含自定义面板的布局面板。布局面板需要一个合适的布局管理器，并且可以放在`BorderLayout`. 这意味着几乎不需要修改现有的布局代码。

的重点`BorderLayout`是用中心组件填充中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-03T07:27:21.870

只需将您的布局设置为空，即您添加 JPanel 的任何类。然后使用 setBounds() 方法设置您的位置和大小！

例如：

```
public class Main extends JFrame{

      YourPanelClass panel = new YourPanelClass();

      public Main(){

           // I didn't want to put all the, everyday JFrame methods...

           setLayout(null);

           /*
               First two coordinates indicate the location of JPanel inside JFrame.
               The seconds set of coordinates set the size of your JPanel.
               (The first two coordinates, 0 and 0, tell the JPanel to start at the
                   top left of your JFrame.)
           */
           panel.setBounds(0, 0, 100, 100);

           add(panel);
      }
} 
```

我**强烈**推荐使用paintComponent() 方法。

例如：（显然你把它放在你的 JPanel 的类中。）

```
public void paintComponent(Graphics g){
     super.paintComponent(g); // don't forget this if you are going to use this method.

     //Basically this makes your JPanel's background green(I did it this way because I like doing it this way better.)
     g.setColor(new Color(0, 255, 0));
     g.fillRect(0, 0, getWidth(), getHeight());
} 
```

**如果有帮助请不要忘记点赞！**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T17:04:14.197

不要覆盖paint() 方法来设置面板的颜色。利用：

```
panel.setBackground(...); 
```

创建面板时。

> 我怎么能在我的 Jpanel 周围设置边框

请参阅[如何使用边框](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T16:36:57.847

```
setPreferredSize()
setMinimumSize()
setMaximumSize() 
```

应该做的伎俩

# javascript - 如何使用 before() 回调停止或延迟 flexslider 动画？

> ID：15619979
> 
> 赞同：2
> 
> 时间：2013-03-25T16:31:39.447
> 
> 标签：javascript, jquery, flexslider

在 flexslider 动画到下一张幻灯片之前，我在幻灯片的所有元素上添加了一个类`.animate-out`，问题是应用的 css 动画不会显示，因为 flexslider 立即移动到下一张幻灯片。

我正在使用 flexslider 的`before()`回调函数添加类，该函数在为滑块设置动画的函数内部[调用](https://github.com/woothemes/FlexSlider/blob/master/jquery.flexslider.js#L457)，因此使用`slider.pause()`暂停滑块为时已晚（使用它将暂停下一张幻灯片）。

我已经在暂停 javascript 执行`alert()`的回调函数内部测试了动画，我可以看到添加的 css 动画。`before()``.animate-out`

有没有办法阻止滑块动画（我`slide.flexAnimate()`稍后将使用手动动画）？如果没有，有没有办法延迟幻灯片？[这是 Github 上的代码](https://github.com/woothemes/FlexSlider/blob/master/jquery.flexslider.js#L457)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:45:45.110

目前，延迟动画以显示 css 动画的唯一方法是[`.delay()`](http://api.jquery.com/delay/)在当前幻灯片和我们正在制作动画的幻灯片上使用：

```
before: function(slider) {
        // TODO: check if the browser supports css animations before delaying the slides

        // delay slide fadeOut to show the css animations
        slider.slides.eq(slider.currentSlide).delay(1000);

        // delay slide fadeIn until the animations on the prev slide are over
        slider.slides.eq(slider.animatingTo).delay(1000);

} 
```

要知道我为什么使用此代码，您可以检查[渐变动画](https://github.com/woothemes/FlexSlider/blob/master/jquery.flexslider.js#L518-L535)的滑块代码，即：

```
if (!touch) {
       slider.slides.eq(slider.currentSlide).fadeOut(vars.animationSpeed, vars.easing);
       slider.slides.eq(target).fadeIn(vars.animationSpeed, vars.easing, slider.wrapup);
} 
```

我用作我的滑块选项：

```
animation: 'fade',
animationSpeed: 0; 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-02T17:42:53.937

还有另一种无需暂停滑块即可获得所需效果的方法。这也适用于设置为“幻灯片”的动画。

对于此示例，我们假设每个转换的持续时间为 500 毫秒。相应地使参数适应您的过渡速度。

首先，我们在幻灯片容器上设置一个过渡延迟（flexslider 也通过 CSS3 对其进行动画处理）：

```
.flexslider .slides {
    transition-delay: 0.5s;
    -webkit-transition-delay: 0.5s
} 
```

诀窍不是使用 flexslider 提供的 '.flex-active-slide' 类来构建过渡，而是使用我们自己的过渡类，只需通过 flexslider 的回调将该类应用于幻灯片元素：

```
start: function(slider) {
    slider.slides.eq(slider.currentSlide).addClass('flex-active-transition');
},
before: function(slider) {
    slider.slides.eq(slider.currentSlide).removeClass('flex-active-transition');
},
after: function(slider) {
    setTimeout(function() {
        slider.slides.eq(slider.currentSlide).addClass('flex-active-transition');
    }, 700);
} 
```

这将在滑动发生和淡出过渡动画后添加过渡类“.flex-active-transition”，并在每张幻灯片开始之前删除该类。我们现在可以将这个类用于我们所有的 CSS3 过渡。

由于我们的 CSS 声明已经延迟了滑动本身，因此滑出过渡现在将在滑块滑动之前执行。我们可以在“after”回调中将超时时间设置为我们的淡出持续时间+我们的滑动速度，自定义转换类触发的淡入转换将在滑动完成后执行。

要获得更流畅的动画，请尝试缩短 setTimeout 延迟。这将混合滑动和幻灯片过渡动画，这可能会产生一些不错的幻灯片效果。

# iphone - 如何使应用程序兼容 iphone 4S 和 5？

> ID：15619980
> 
> 赞同：0
> 
> 时间：2013-03-25T16:31:40.150
> 
> 标签：iphone, user-interface, compatibility, iphone-5, iphone-4

我是 UI 设计的新手，但是客户想要一个适用于 iPhone 4s 和 5 的应用程序。

我知道如果图像不够长，iPhone 5 会创建两个条。许多人说在@2x 上编码可以解决问题。但我不确定这到底是什么意思。

我需要设计两个版本吗？如果我只为 iPhone 5 设计会发生什么？iPhone 4S 用户会看到压扁的屏幕吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:42:19.497

首先，几个月后你必须*支持*iPhone 5 的屏幕尺寸。Apple 已经宣布将很快成为一项要求。

添加正确大小的 Default.png 足以*使*应用程序支持新的屏幕大小，但可能还不够。您还需要确保所有视图都调整大小以填满屏幕。有旧的“弹簧和支柱”方法和较新的“约束”。您可以搜索一些教程——Stackoverflow 不是这类事情的好地方。您还需要更新任何图像。

简而言之，在模拟器中尝试一下，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:42:46.877

使用@2x 是指图像资产是否显示在“视网膜”屏幕上。例如，如果您有一个 50x50 像素的图像，则“视网膜”(@2x) 版本将为 100x100。这是因为在视网膜屏幕上 1pt（点）等于 2px（像素）。

有多种方法可以确定它是 iPhone5 还是 iPhone4。

在 中`viewDidLoad`，您可以检查`self.view.frame.size.height`以根据屏幕高度确定要加载的背景图像。这将要求您拥有两个不同版本的资产（不包括@2x 版本），即bg_iphone5.png 和bg_iphone4.png。

还有其他方法可以做到这一点，人们比我在这里解释得更好——搜索 StackOverflow，你一定会找到你要找的东西。

> 如果我只为 iPhone 5 设计会发生什么？iPhone 4S 用户会看到压扁的屏幕吗？

不要这样做。为两者设计。

# jquery - Fullcalendar 未发布有效的 JSON

> ID：15619981
> 
> 赞同：0
> 
> 时间：2013-03-25T16:31:48.027
> 
> 标签：jquery, json, fullcalendar

我只是不知道这段代码有什么问题，我已经加载了所有依赖项 jquery 1.9.1 jquery UI 1.10.2，fullcalendar.min.js 并且正在按照所示的示例进行操作。

这是我的ajax调用：

```
$(document).ready(function() {

        $('#calendar').fullCalendar({
            events: {
                type: 'POST',
                url: 'mypage.cfc',              
                data: JSON.stringify({ param_one: "test", param_two: "testing"}),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                error: function() {
                    //alert('there was an error while fetching events!');
                },
                color: 'yellow',   // a non-ajax option
                textColor: 'black' // a non-ajax option
            }
        });

    }); 
```

在 Coldfusion 后端页面上，即期待 JSON，我不断收到 JSON 解析失败，所以我检查了 firebug 以查看 POST 中发送的内容，它没有发送有效的 JSON 数据。这是萤火虫在 POST 中显示的内容：

```
0=%7B&1=%22&2=p&3=a&4=r&5=a&6=m&7=_&8=o&9=n&10=e&11=%22&12=%3A&13=%22&14=t&15=e&16=s&17=t&18=%22&19=%2C&20=%22&21=p&22=a&23=r&24=a&25=m&26=_&27=t&28=w&29=o&30=%22&31=%3A&32=%22&33=t&34=e&35=s&36=t&37=i&38=n&39=g&40=%22&41=%7D&start=1361685600&end=1365310800 
```

我也尝试过完全修剪代码，看看是否可以缩小问题范围，所以我很累：

```
$(document).ready(function() {

        $('#calendar').fullCalendar({
            events: 'mypage.cfc'
        });

    }); 
```

在这种情况下，根本没有发布任何内容。我在参数选项卡中看到：

```
_   1364228830548
end 1365310800
format  json
start   1361685600 
```

我在这里想念什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:13:14.190

**解决方案：**

好的，我希望这可以帮助其他为此苦苦挣扎的人。感谢 ganeshk 为我指明了正确的方向。fullcalendar 的文档很少，我认为 jquery 代码应该发送 JSON 数据，但事实并非如此。它只是发送一个字符串。

在冷融合方面，如果你想捕获字符串，你可以使用这样的东西：

```
 <!--- query string --->
        <cfset URLstring = getHTTPRequestData().content >

        <!--- local structure --->
        <cfset cfData = StructNew()>
        <!--- loop our query string values and set them in our structure --->
        <cfloop list="#URLstring#" index="key" delimiters="&">
            <cfset cfData["#listFirst(key,'=')#"] = urlDecode(listLast(key,"="))>
        </cfloop> 
```

然后在 SQL WHERE 语句的代码中，您可以使用 #cfData["start"]# 或您传递的任何其他参数。

查询完成后，您可以填充一个数组并将其发回，它将填充日历。

# jquery - 为什么文本被附加了好几次

> ID：15619987
> 
> 赞同：1
> 
> 时间：2013-03-25T16:32:08.857
> 
> 标签：jquery, html

我尝试添加功能以允许用户通过添加/删除/修改表及其数据来编辑表的值。

我已经设法让它做我想做的事，但是我想附加的文本被附加了 4 次，我还不够聪明，无法理解为什么。

我在这里设置了演示[http://jsfiddle.net/a973/CWQh9/1](http://jsfiddle.net/a973/CWQh9/1)

这是触发的代码

```
$('#saveBtn').live("click", function(){
    var txt = $("#compName").val();
    var txt2 = $("#orgnr").val();

    $(".itms").fadeOut("normal", function() {
            $(this).remove();

            $('#comp').append(txt);
            $('#orgn').append(txt2);
            $('#nextLast').append('<a href="#">change</a>')
            $('#lastTd').append("<a href='#'>erase</a>");

    }); 
```

谁能帮我摆脱 3 个额外的文本实例？

最终结果将仅用于演示/原型目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:34:50.620

我猜`$('.itms')`选择器匹配页面上的四个元素。因此回调函数被调用了四次。这意味着追加调用发生了四次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:35:17.577

那是因为处理程序会为您的每个`".itms"`. 所以每次`append()`调用该函数。

我在下面的评论中添加了您所要求的内容。

**新解决方案：[小提琴](http://jsfiddle.net/CWQh9/11/)**

这样做：

```
$('#saveBtn').live("click", function () {
    var txt = $("#compName").val();
    var txt2 = $("#orgnr").val();
    //$('#compName, #orgnr, #saveBtn, #cncl').remove();

    setTimeout( function() {
        $('#comp').append(txt);
    $('#orgn').append(txt2);
    $('#nextLast').append('<a href="#">change</a>')
    $('#lastTd').append("<a href='#'>erase</a>");
    }, 500);

    $(".itms").fadeOut("normal", function () {
        $(this).remove();
    });
    $('#raden').effect("highlight", {}, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T16:36:44.787

将这四行移到 fadeOut 调用之外：

```
$('#comp').append(txt);
$('#orgn').append(txt2);
$('#nextLast').append('<a href="#">change</a>')
$('#lastTd').append("<a href='#'>erase</a>"); 
```

所以你得到这个：

```
$('#saveBtn').live("click", function () {
    var txt = $("#compName").val();
    var txt2 = $("#orgnr").val();
    $('#comp').append(txt);
    $('#orgn').append(txt2);
    $('#nextLast').append('<a href="#">change</a>')
    $('#lastTd').append("<a href='#'>erase</a>");
    $(".itms").fadeOut("normal", function () {
        $(this).remove();
    });
}) 
```

否则，您的附加会被多次调用，每次调用一次`.itms`。

**[jsFiddle 示例](http://jsfiddle.net/j08691/CWQh9/8/)**（请注意，由于 live 已被弃用`.live()`为`.on()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:35:30.703

最可能的原因是 css 类 .itms 有四个元素，因此回调被触发了四次。正如我看到的代码，表中有四个 td ，因此被触发了四次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T16:36:24.343

因为有多个元素与您的选择器匹配，所以该函数会被多次调用。尝试在单击的元素上执行此操作。

```
 $(".itms").click().fadeOut("normal", function() {

            $(this).remove();

            $('#comp').append(txt);
            $('#orgn').append(txt2);
            $('#nextLast').append('<a href="#">change</a>')
            $('#lastTd').append("<a href='#'>erase</a>");

    }); 
```

# android - 将 android:installLocation 从 preferExternal 更改为 internalOnly

> ID：15619990
> 
> 赞同：11
> 
> 时间：2013-03-25T16:32:20.433
> 
> 标签：android, android-widget, installation, android-sdcard

我在 Google Play 市场上有一个应用程序，我添加`android:installLocation="preferExternal"`到 manifest.xml 文件并在很久以前发布。现在我想添加 Android 主屏幕小部件，所以我需要将其更改为`android:installLocation="internalOnly"`. 如果我这样做，当用户升级时会发生什么？因为用户已经在 SD 卡上安装了旧应用程序。这种情况的最佳解决方案是什么？

如果有人有这种经验，请告诉我。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:54:33.057

当您将安装位置设置为 preferExternal 时，应用程序特定文件存储在外部 sdcard 的 .android_secure 目录中。

当用户将 SD 卡安装为 USB 大容量存储时，这些类型的应用程序不可用（从 Android Jelly Bean 中删除的功能）。

谈到这个问题，我相信在您的情况下，应用程序将安装到内部存储器中，并将 .android_secure 中的文件移动到内部位置。

您可以通过以下方式确认：

1.  从 play store 安装应用程序，将安装位置设置为 preferExternal。
2.  确认您的应用程序已安装在外部 SD 卡中，您可以使用 Settings->App 进行检查。
3.  现在创建新的签名应用程序包。
4.  安装使用`adb install -r myapp.apk`
5.  再次转到设置-> 应用程序并确认位置。
6.  运行功能测试，看看是否没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T10:55:14.810

老问题，但根据我的测试，如果应用程序安装在 SD 卡上，然后您将 Manifest 更改为 android:installLocation="internalOnly" （或省略 android:installLocation 属性，相同），当应用程序是升级包管理器将自动将应用程序从 SD 卡移动到内部存储。不知道如果这是不可能的会发生什么（例如，内部存储没有足够的根）。

# javascript - 在 ajax 回调中设置模型的属性

> ID：15619994
> 
> 赞同：0
> 
> 时间：2013-03-25T16:32:42.420
> 
> 标签：javascript, ajax

我正在尝试在我以后可以使用的 ajax 回调中设置模型的属性，但我不确定我是否可以这样做。

```
var self = this;

$.ajax {
   self.views.someProperty = // something i get back from the server

} 
```

然后稍后用`this.views.someProperty`. 目前我得到 this.views.someProperty 未定义。我想知道我是否正确地处理了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:53:46.090

首先，您的代码片段并没有真正的意义。 `$.ajax()`当它完成检索到的结果并且您的代码片段没有显示正确的形式时调用回调函数。

假设您正确指定了回调函数，这里还有一些其他可能的问题：

1.  计时 - 在调用完成回调之后，ajax 调用的结果才可用。`$.ajax()`这是在调用之后的一段时间。结果将在 . 之后立即执行的代码中不可用`$.ajax()`。

2.  是否`self.views`已经存在？如果不是，那么设置`self.views.someProperty`将导致错误并且不起作用。

3.  当您`this.views.someProperty`稍后访问时，您显然需要确保这`this`是正确的值。

`console.log("ajax call finished")`您可以在尝试访问该值之前通过在您的 ajax 完成回调中放入 a 和 a 来检查第一项，`console.log("accessing someProperty")`然后在尝试访问它之前验证是否调用了 ajax 完成。

您可以通过检查调试器中的数据来检查项目 2 和 3，以确保一切都是您想要的。

# jsp - 如何使用 JSTL 从 JSP 页面中获取值

> ID：15619997
> 
> 赞同：0
> 
> 时间：2013-03-25T16:32:53.123
> 
> 标签：jsp, jstl

```
<%
    com.BeanPaket.kontrolBean kontrol = new kontrolBean();
    String epostavalue = kontrol.getEposta();
%>

<sql:query var="kutuphane" dataSource="${dataSource}">
    SELECT * FROM kutuphane.odunc_kitaplar WHERE eposta = ?

</sql:query> 
```

如何将我在 <% %> 标记中识别的值放入 sql 查询中以从数据库中获取列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:21:37.857

尝试这个：

```
<sql:query var="kutuphane" dataSource="${dataSource}">
SELECT * FROM kutuphane.odunc_kitaplar WHERE eposta = ?
   <sql:param value="${epostavalue}" />
</sql:query> 
```