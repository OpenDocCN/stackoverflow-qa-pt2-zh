# StackOverflow 问答 14656000-14656999

# javascript - Javascript连接数字，不加起来

> ID：14656003
> 
> 赞同：3
> 
> 时间：2013-02-01T22:19:42.960
> 
> 标签：javascript, titanium, titanium-mobile

它不断将我的数字连接成 2111 而不是 5。这是为什么呢？我试过使用 parseInt 没有运气。res3 btw 代表对我正在执行的数据库的查询。

```
var dt_total_hours = 0;

            dt_total_hours += res3.fieldByName(dt_cost_per_hour);
            dt_total_hours += res3.fieldByName(dt_prod_dt_hours);
            dt_total_hours += res3.fieldByName(dt_prod_rate);
            dt_total_hours += res3.fieldByName(dt_cost_per_unit);
            dt_total_hours += res3.fieldByName(dt_scrap_startup_cost);
            dt_total_hours += res3.fieldByName(dt_labor_expense);
            dt_total_hours += res3.fieldByName(dt_since_issues_first_noticed);
            dt_total_hours += res3.fieldByName(dt_wo_for_maint);
            dt_total_hours += res3.fieldByName(dt_investigation);
            dt_total_hours += res3.fieldByName(dt_maint_made_bandaid);
            dt_total_hours += res3.fieldByName(dt_parts_outsourcing);
            dt_total_hours += res3.fieldByName(dt_get_equip_out_prod);
            dt_total_hours += res3.fieldByName(dt_perm_repair);
            dt_total_hours += res3.fieldByName(dt_equip_back_to_prod);
            dt_total_hours += res3.fieldByName(dt_to_full_prod_speed);
            dt_total_hours += res3.fieldByName(dt_other); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:21:30.080

如果值是字符串，那么它们将被连接，而不是数字相加。

尝试[从字符串值构造一个数字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)：

```
dt_total_hours += Number(res3.fieldByName(dt_cost_per_hour));
//                ^------ Force a number here instead of a string. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:22:30.060

是的，它将它们作为字符串读取。我发现将它们解释为数字的肮脏、可怕的技巧是将其`x += y`更改为`x += y / 1.0`（或`/ 1`整数）。通常会做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T13:13:08.357

您可以根据所需类型解析数据，如下所示

```
dt_total_hours += parseInt(res3.fieldByName(dt_cost_per_hour)); 
```

您也可以使用 parseFloat 方法

# javascript - 替换警报/提示/确认对话框

> ID：14656005
> 
> 赞同：1
> 
> 时间：2013-02-01T22:20:01.337
> 
> 标签：javascript, jquery, html, jquery-plugins

我想用我自己的替换默认的警报/提示/确认并且**不想使用插件**。我做了样式，但能够弄清楚单击按钮时的操作（确定/取消/等..）。到目前为止，这是我的代码。

```
function jPromt(title,content,type,callback){
    var alert = $('.resources').find('.alert').clone(); //basic barebone
        alert.find('h3').html(title);
        alert.find('.content').prepend(content);

    var options = {
        "_prompt" : {"OK" :""},
        "_confirm": {"No" :"recomended", "Yes":""},
        "_input"  : {"Cancel":"recomended", "OK" :""}
    }

    for (var prop in obj) { // Create buttons
        if (obj.hasOwnProperty(prop)) { 
            var btn = "<button class='button_"+prop+" "+obj[prop]+"'>"+prop+"</button>";
            alert.find('.buttons').append(btn);

        }
    }

    $('.resource_loader').append(alert)
    $('body').append(alert).center().fadeIn('fast');

    // This is here I'm not realy sure what to do whit callbaks for each button.

    //if (callback && typeof(callback) === "function") {  
    //  callback();  
    //} 
} 
```

我想要它，以便您可以调用 jPromt() 并且每个按钮的回调将像这样执行：或类似于它：

```
 ....

'ok', function(){
    //do stuff if ok was clicked
},
'cancel', function(){
    // canel was clicked, do stuff
} 
```

JSFiddle：http: [//jsfiddle.net/CezarisLT/u6AYe/5/](http://jsfiddle.net/CezarisLT/u6AYe/5/)

先感谢您。我一定会选择你的答案是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:03:29.660

您只需进行一些修改即可使其工作：

1.  传递一个对象作为`callback`参数（我将其重命名为`callbacks`），其中的键代表按钮，使用您为选项（等）定义的相同`"Yes"`格式`"No"`。你的电话应该是这样的：

    ```
    jPromt("test THE title","testing the contents","_confirm", {
        'No' : function(){
            alert("testing NO");
        },
        'Yes' : function(){
            alert("testing YES");
        }
    }); 
    ```

2.  在你`btn`的循环中创建一个 jQuery 对象`obj`，这样你就可以附加一个处理程序

3.  检查`callbacks`参数是否有当前的处理程序`prop`；如果是，请附加到`btn`.

演示：http: [//jsfiddle.net/u6AYe/7/](http://jsfiddle.net/u6AYe/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:07:24.627

你能做的是...

1.  为您的按钮提供调用回调的实际点击处理程序
2.  在您的回调中，您检查实际单击了哪个按钮

就像是...

```
function jPromt(title,content,type,callback){
    var myAlert = $('.resources').find('.alert').clone(); //basic barebone
        myAlert.find('h3').html(title);
        myAlert.find('.content').prepend(content);

    var options = {
        "_prompt" : {"OK" :""},
        "_confirm": {"No" :"recomended", "Yes":""},
        "_input"  : {"Cancel":"recomended", "OK" :""}
    };

    if( options.hasOwnProperty(type) ){
        obj = options[type];
    }

    for (var prop in obj) { // Create buttons
        var $btn = $("<button class='button_"+prop+" "+obj[prop]+"'>"+prop+"</button>");
        $btn.attr('btn-type',prop.toUpperCase());
        myAlert.find('.buttons').append($btn);
        $btn.click(callback);
    }

    $('body').append(myAlert.show());
}

jPromt("test THE title","testing the contents","_confirm",
    function(){
        answer = $(this).attr('btn-type');
        if(answer == 'YES'){
            alert("Yes!");
        }else{
            alert("No!");
        }
    }
); 
```

见[http://jsfiddle.net/u6AYe/8/](http://jsfiddle.net/u6AYe/8/) ...

# sql - 行值不一致

> ID：14656007
> 
> 赞同：0
> 
> 时间：2013-02-01T22:20:16.460
> 
> 标签：sql, oracle

场景 - 我们有包装物品，它被定义为一个或多个物品的组合。一个复杂的包是一个包含多个组件项目的包。复杂包装项目的每个组件项目都应链接到相同数量的位置。

**例如**： 包`P1`有组件`C1`、`C2`和`C3`。每个项目`C1`,`C2`和`C3`范围为 10 个位置 1,2....10，这样`C1-1`, `C1-2`,..., `C1-10`, `C2-1`, `C2-2`,..., `C2-10`, 和`C3-1`, `C3-2`,...,`C3-10`存在。在这种情况下，包装物品`P1`也与位置 1 到 10 相关联，如`P1-1`、`P1-2`、...、`P1-10`。

该表`PACK_BREAKOUT`包含 Pack 组件映射，并且该表`ITEM_LOCATION`包含与位置关联的项目。Pack 和 Component 都被视为“项目”，并将存在于`ITEM_LOCATION`.

理想情况下，对于像上面这样的场景，下面的记录集是有效的

```
PACK_NO    ITEM    NO_OF_LOC
--------   ------  -------------
P1         C1      10
P1         C2      10
P1         C3      10 
```

我有下面的查询，它返回所有此类包装项目的上述结果。

```
select c.pack_no,c.item,count(a.loc )
  from item_location a, pack_breakout c
 where c.item=a.item
   group by c.pack_no,c.item
   order by 1,2; 
```

但是，有一些不一致的结果，例如包装号。P2、P4 和 P5 下面的组件不与相同数量的位置相关联。

```
PACK_NO    ITEM    NO_OF_LOC
--------   ------  -------------
P1         C1      10
P1         C2      10
P1         C3      10
P2         C1      11
P2         C2      5
P2         C3      9
P2         C4      11
P3         C1      21
P3         C2      21
P3         C3      21   
P3         C4      21
P3         C5      21
P4         C1      10
P4         C2      15
P5         C1      10
P5         C2      9
P5         C3      10
P5         C4      10 
```

请注意，一个包可以有 n 个组件（如您所见`P1, P2, P3, P4, and P5`具有不同数量的组件）。

我只想获取组件位置不一致的包。因此，所需的结果集将是-

```
PACK_NO    ITEM    NO_OF_LOC
--------   ------  -------------
P2         C1      11
P2         C2      5
P2         C3      9
P2         C4      11
P4         C1      10
P4         C2      15 
P5         C1      10
P5         C2      9
P5         C3      10
P5         C4      10 
```

请注意，即使一个组件不匹配 no。作为包中的其他组件的位置，必须将整个包视为不一致（如`P5`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:24:08.187

您想将另一个`group by`与`having`子句一起使用：

```
select pack_no
from (select c.pack_no, c.item, count(a.loc ) as numlocs
      from item_location a join
           pack_breakout c
           on c.item=a.item
      group by c.pack_no, c.item
     ) p
group by pack_no
having MIN(numlocs) <> MAX(numlocs) 
```

这将返回包。

如果您想要数字的详细信息，请使用分析函数进行计算：

```
select pi.*
from (select pi.*, min(numlocs) over (partition by pack_no) as minnumlocs,
             max(numlocs) over (partition by packno) as maxnumlocs
      from (select c.pack_no, c.item, count(a.loc ) as numlocs
            from item_location a join
                 pack_breakout c
                 on c.item=a.item
            group by c.pack_no, c.item
           ) pi
     ) pi
where minnumlocs <> maxnumlocs 
```

# forms - 为什么编码 url 参数如果包含 # 符号

> ID：14656008
> 
> 赞同：0
> 
> 时间：2013-02-01T22:20:16.820
> 
> 标签：forms, spring, google-app-engine, get

我通过获取请求将 URL 参数传递给表单。当参数包含 '#' 时，我需要对参数进行 URL 编码。否则请求失败。为什么这是必需的？为什么我需要对“#”参数而不是其他文本进行 URL 编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:22:19.530

> ```
> '#' is used in URLs to indicate where a fragment identifier 
> (bookmarks/anchors in HTML) begins. 
> ```

`#`服务器永远不会看到后面的部分。它通常用于客户端的导航。以下**[字符](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#whatwhy)**需要进行编码才能按字面意思使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:22:23.353

使用 GET 时，`#`服务器将看不到任何后面的内容（以及 # 本身）。

# sql - 从 CSV 读取稀疏列

> ID：14656009
> 
> 赞同：0
> 
> 时间：2013-02-01T22:20:28.810
> 
> 标签：sql, csv, ssis

我得到了一个我需要读入 SQL 表的 CSV。现在它是通过 Web 应用程序手动上传的，但我想将它移动到 SQL 服务器中。我不想将我的导入脚本直接移植到 SSIS 中的脚本中，而是想检查一下是否有更好的方法来做到这一点。

这个特定 CSV 的问题是前几列是已知的，并且具有适当的标题。但是，在该组之后，其余列的填充很少，甚至可能没有标题。

例子：

```
Col1,Col2,Col3,,,,,,
value1,value2,value3,,value4
value1,value2,value3,value4,value5
value1,value2,value3,,value4,value5
value1,value2,value3,,,value4 
```

使这种情况可以容忍的是 Col3 之后的所有内容都可以连接在一起。该脚本检查每一行的这些尾随列，并将它们放在一起进入“杂项”列。它必须以一种盲目的方法来执行此操作，因为无法提前知道其中有多少列。

有没有办法使用 SSIS 工具来做到这一点，或者我应该将现有的导入脚本移植到 SSIS 脚本任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:10:06.343

SSIS 之外的另一个选择是将 BulkInsert 与格式文件一起使用。

格式文件允许您描述传入数据的格式。

例如..

```
9.0
4
1       SQLCHAR       0       100     ","      1     Header1      SQL_Latin1_General_CP1_CI_AS
2       SQLCHAR       0       100     ","      2     Header2      SQL_Latin1_General_CP1_CI_AS
3       SQLCHAR       0       100     ","      3     Header3      SQL_Latin1_General_CP1_CI_AS
4       SQLCHAR       0       100     "\r\n"   4     Misc         SQL_Latin1_General_CP1_CI_AS 
```

批量插入>> [http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

格式化文件 >> [http://msdn.microsoft.com/en-us/library/ms178129.aspx](http://msdn.microsoft.com/en-us/library/ms178129.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:52:42.903

步骤 0\. 我的测试文件加上一行

```
Col1,Col2,Col3,,,,,,
value1,value2,value3,,value4
value1,value2,value3,value4,value5
value1,value2,value3,,value4,value5
value1,value2,value3,,,value4
ends,with,comma,,,value4, 
```

1.  在控制流表面上拖动 DFT
2.  在 DFT 内部，在数据流表面上，拖动平面文件源
3.  让我们从地图本身开始。检查第一个数据行中的列名。
4.  您将看到 Col1、Col2、Col3，它们是您已知的字段。
5.  您还将看到第 3 列到第 8 列。这些列需要合并到一个 Misc 列中。

6.  转到平面文件管理器编辑器的高级部分。

7.  将第 3 列重命名为 Misc。将字段大小设置为 4000。

    注意：更长的时间，您需要使用文本数据类型。这会带来一些挑战，所以准备好好玩吧 ;-)

8.  删除第 4 到 8 列。现在添加一个脚本组件。输入列 - 仅选择杂项字段。使用类型：读写代码：

公共覆盖 void Input0_ProcessInputRow(Input0Buffer Row)

```
 {
        string sMisc = Row.Misc;

        string sManipulated = string.Empty;
        string temp = string.Empty;

        string[] values = sMisc.Split(',');

        foreach (string value in values)
        {
            temp = value;

            if (temp.Trim().Equals(string.Empty))
            {
                temp = "NA";
            }

            sManipulated = string.Format("{0},{1}", sManipulated, temp);
        }

        Row.Misc = sManipulated.Substring(1); 
    } 
```

- 目的地。和平时没什么不同。

希望我已经了解您的问题并且解决方案对您有用。

# c++ - 使用 OpenCV 检测停车位

> ID：14656010
> 
> 赞同：9
> 
> 时间：2013-02-01T22:20:29.720
> 
> 标签：c++, image-processing, opencv, vision

我正在尝试使用 opencv 自动查找并定位空停车场中的所有停车位。

目前，我有一个对图像进行阈值处理的代码，应用精明的边缘检测，然后使用概率霍夫线来找到标记每个停车位的线。

然后程序绘制线条和构成线条的点

这是代码：

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

#include <iostream>

using namespace cv;
using namespace std;

int threshold_value = 150;
int threshold_type = 0;;
int const max_value = 255;
int const max_type = 4;
int const max_BINARY_value = 255;

int houghthresh = 50;

char* trackbar_value = "Value";

char* window_name = "Find Lines";

int main(int argc, char** argv)
{
 const char* filename = argc >= 2 ? argv[1] : "pic1.jpg";
 VideoCapture cap(0);
 Mat src, dst, cdst, tdst, bgrdst;
 namedWindow( window_name, CV_WINDOW_AUTOSIZE );

 createTrackbar( trackbar_value,
          window_name, &threshold_value,
          max_value);

while(1)
{
 cap >> src;
 cvtColor(src, dst, CV_RGB2GRAY);
 threshold( dst, tdst, threshold_value, max_BINARY_value,threshold_type );
 Canny(tdst, cdst, 50, 200, 3);
 cvtColor(tdst, bgrdst, CV_GRAY2BGR);

  vector<Vec4i> lines;
  HoughLinesP(cdst, lines, 1, CV_PI/180, houghthresh, 50, 10 );
  for( size_t i = 0; i < lines.size(); i++ )
  {
    Vec4i l = lines[i];
    line( bgrdst, Point(l[0], l[1]), Point(l[2], l[3]), Scalar(0,255,0), 2, CV_AA);
    circle( bgrdst,
         Point(l[0], l[1]),
         5,
         Scalar( 0, 0, 255 ),
         -1,
         8 );
    circle( bgrdst,
         Point(l[2], l[3]),
         5,
         Scalar( 0, 0, 255 ),
         -1,
         8 );
  }

 imshow("source", src);
 imshow(window_name, bgrdst);

 waitKey(1);
}
 return 0;
} 
```

目前，我的主要问题是弄清楚如何推断线数据以找到每个停车位的位置。我的目标是让 opencv 找到停车位，并在每个停车位上画出矩形，并用数字标记停车位。

我认为我目前使用的方法存在一些主要问题，因为如输出图像所示，opencv 正在检测线上除了 2 个端点之外的多个点。这可能会使使用 opencv 连接 2 个相邻端点变得非常困难。

我读过一些关于使用凸包的内容，但我不确定它的作用以及它是如何工作的。

任何帮助将不胜感激。这是我的程序的输出图像：http: [//imageshack.us/photo/my-images/22/test1hl.png/](http://imageshack.us/photo/my-images/22/test1hl.png/)

[http://imageshack.us/photo/my-images/822/test2lw.png/](http://imageshack.us/photo/my-images/822/test2lw.png/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:43:56.270

考虑细化二值图像，然后检测端点和分支点。这是基于提供的图像的一个这样的结果；端点为红色，分支点为蓝色。

![在此处输入图像描述](../Images/9055a084aa11f2733a6ebcbeb807121a.png)

现在您可以找到停车位的位置。一对蓝点总是由一条边连接。每个蓝点连接到两个或三个红点。那么有几种方法可以找到由两个蓝点和两个红点组成的停车位，最简单的就是顺势而为：找到最近的一对红点，其中一个点连接某个蓝点，另一个红点连接到另一个蓝点。也可以通过检查所考虑的边缘与平行线的接近程度来补充此步骤。

# android - android spinner onselectitemclick 监听器没有触发

> ID：14656015
> 
> 赞同：1
> 
> 时间：2013-02-01T22:20:57.520
> 
> 标签：android, android-spinner

这就是我定义微调器的方式

```
s_province = (Spinner) findViewById(R.id.s_province);
        ArrayAdapter<String> provinceAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, Data.provinces);
        provinceAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s_province.setAdapter(provinceAdapter);
        s_province.setOnItemSelectedListener(this); 
```

我的类是从实现的`OnItemSelectedListener`，我覆盖了这个方法

```
@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
        switch (arg1.getId()) {
        case R.id.s_province:
            Log.d("here", "there");
            break;

        default:
            break;
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    } 
```

但是`onItemSelect`没有触发，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:24:39.807

Two things:

1.  If you actually want to check if your method is working put a `Log` statement outside the `switch` or in the `default` case so that you can be *sure* the method is being called.

2.  You should be using `arg2` since [that represents position](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html). Make your switch work with positions instead of whatever View is passed. Also rename your variables from the default names Eclipse assigns. `arg0,1,2, etc` are not helpful for you nor for anyone else looking at your code.

Eg

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id){
  Toast.makeText(view.getContext(),"onItemSelected called", Toast.LENGTH_LONG).show();
  int spinnerId = parent.getId();
  if (spinnerId == R.id.s_province)
  {
    switch (position)
    {
      case 0: 
        //do something if first position was clicked
      break:
      case 1:
        //do something else
        break;
      default: 
        //if for any reason no position matches.
        break;
    }
  }
  else if (spinnerId == R.other_id_in_xml)
  {
    switch (position)
    {
      case 0: 
        //do something if first position was clicked
      break:
      case 1:
        //do something else
        break;
      default: 
        //if for any reason no position matches.
        break;
    }
  }
  //etc
} 
```

# php - 如何在字符串中使用 $_GET？

> ID：14656018
> 
> 赞同：1
> 
> 时间：2013-02-01T22:21:25.003
> 
> 标签：php

我有一个简单的 PHP 文件，其中包含以下内容：

```
<?php
echo 'catid=$_GET["catid"]';
<?> 
```

当我运行页面时，输出是：

```
catid=$_GET["catid"] 
```

我以 www.abc.com/temp.php?catid=3 的身份访问该页面。我希望 $_GET 执行，所以我看到：

```
catid=3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:22:56.607

You have to cancat the two:

```
echo 'catid=' . $_GET["catid"]; 
```

or you could use `"` (double quotes):

```
echo "catId=$someVar"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:23:04.687

`$_Get` is a variable, and to echo a variable you do not need parenthesis around it.

```
<?php
echo 'catid='.$_GET["catid"];
?> 
```

please see this : [source](http://www.w3schools.com/php/func_string_echo.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:24:57.423

You can use non-array variables for that:

```
$getCatID = $_GET["catid"];
echo "catid=$getCatID"; 
```

Or you can use (recommended):

```
echo 'catid=' . $_GET["catid"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T22:27:56.930

您必须使用双引号字符串来通知 PHP 它可能包含内部变量。$_GET 是数组，因此您需要将变量语句放在 {} 中。

```
<?php
    echo "catid={$_GET['catid']}";
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T22:29:53.103

有几个选项可以将变量与字符串组合。

```
<?php

    $var = "something";

    // prints some something
    echo 'some ' . $var; // I prefer to go for this one

    // prints some something
    echo "some $var";

    // prints some $var
    echo 'some $var';

    // prints some something
    echo "some {$var}";

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T22:25:24.000

你可以试试：

```
echo "catid= {$_GET['catid']}"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T22:26:18.137

在字符串中使用变量的最佳方法是：

```
echo "catid={$_GET['catid']}"; 
```

# ssl - gwan服务器上的ssl

> ID：14656020
> 
> 赞同：2
> 
> 时间：2013-02-01T22:21:29.837
> 
> 标签：ssl, certificate, g-wan

有没有人使用 SSL 与 gwan 服务器合作过？

我在 /cert 子目录中生成了（自签名）证书。

使用 https 时服务器挂起：

g-wan 上的 SSL 是否还有其他要求

error.log 读取

```
 "READ:Tmo 144 bytes:
  0: 16 03 01                                         | ...
 "READ:Tmo 87 bytes:
  0: 80 55 01 03                                      | .U..
 " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T09:37:30.180

首先，让我们谈谈当今人们如何使 SSL 工作：他们使用 SSL 代理（通常使用硬件 SSL 加速器），或者`SSLtunnel`作为前端。

其次，SSL 是很久以前在 G-WAN 中原生实现的（当原生 AES 加密可用时），但由于找不到任何合规性检查工具，我们推迟了实验发布，因为 SSL 是一个非常危险的协议（完全和毫无意义的复杂，根据版本与自身不兼容，充满角落，为无限的安全漏洞流腾出空间）。

在你不同意这种观点之前，先看看 OpenSSL 的安全背景（或者它的源代码，这更可怕）。

这就是为什么将 SSL 保留在 G-WAN 核心*之外*是有意义的。

第三，当人们经常问我们关于通过 G-WAN 支持 SSL（和其他协议）的 hos 时，我们创建了`Protocol handlers`.

`Connection handlers`用于改变 G-WAN 的行为。除非正确使用（以避免您遇到超时），否则它们将终止任何不符合 HTTP 的流量。但是它们使人们的生活更容易完成琐碎的任务。

`Content-Type handlers`用于更改特定类型文件（GIF、HTML、FLV 等）的交付。

`Protocol handlers`是最后一个添加，它使 G-WAN 能够依赖 TCP/IP 做任何事情（UDP 可能会在以后使用）。

一旦完成其他更紧急的任务，我们将尝试记录它们。

我们发现，使用`servlets`这 3 种不同类型`handlers`而不是单一类型`modules`（Apache 或 Nginx 等其他服务器的通用术语），使用户开发更容易、更安全和更快。

# java - Delay when deleting directory recursively

> ID：14656021
> 
> 赞同：1
> 
> 时间：2013-02-01T22:21:32.097
> 
> 标签：java, windows, groovy, directory

I have the following Groovy test script:

```
def dir = new File("test")
dir.mkdirs()

char[] data = new char[100]
Arrays.fill(data, (char)'q')

for(i in 0..1760){
    def file = new File(dir, "file$i")
    file.createNewFile()

    file.withOutputStream { os ->
        os << data  
    }
}

def delete (File f){
    if(f.isDirectory()){
        for(File afile : f.listFiles()){
            delete(afile);
        }
        f.delete();
    }else{
        f.delete();
    }
}

delete(dir)

dir.mkdirs()

new File(dir, "file").createNewFile() //<-- java.io.IOException: Access is denied 
```

Which fails with:

```
Caught: java.io.IOException: Access is denied
java.io.IOException: Access is denied
    at java_io_File$createNewFile.call(Unknown Source)
    at test.run(test.groovy:29) 
```

However, if I amend the test script to look like this:

```
def dir = new File("test")
dir.mkdirs()

char[] data = new char[100]
Arrays.fill(data, (char)'q')

for(i in 0..1760){
    def file = new File(dir, "file$i")
    file.createNewFile()

    file.withOutputStream { os ->
        os << data  
    }
}

def delete (File f){
    if(f.isDirectory()){
        for(File afile : f.listFiles()){
            delete(afile);
        }
        f.delete();
    }else{
        f.delete();
    }
}

delete(dir)

Thread.sleep(1000) // <---- added a 1 second pause after deleting

dir.mkdirs()

new File(dir, "file").createNewFile() // <-- No Exception 
```

It will no longer fail. I am running Java 6 on Windows 7 64-bit. Anyone have any idea where the delay comes from or how to account for it?

**Edit:**

Same error happens in Java 6 which is why I tagged it Java (Groovy is just easier to write an example in). Here is the equivalent test which also fails in Java:

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Arrays;

public class Test {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        new Test().execute();
    }

    public void execute() throws IOException{
        File dir = new File("test");
        dir.mkdirs();

        char[] data = new char[100];
        Arrays.fill(data, (char)'q');

        for(int x = 0; x < 1760; x++){
            File file = new File(dir, "file" + x);
            file.createNewFile();

            FileWriter fw = null;
            try{
                fw = new FileWriter(file);
                fw.write(data);
            }finally{
                if(fw != null){
                    fw.close();
                }
            }
        }

        delete(dir);

        dir.mkdirs();

        new File(dir, "file").createNewFile(); //<-- java.io.IOException: Access is denied
    }

    private void delete (File f){
        if(f.isDirectory()){
            for(File afile : f.listFiles()){
                delete(afile);
            }
            f.delete();
        }else{
            f.delete();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:28:10.467

这似乎已经成功了：

```
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Arrays;

public class Test {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        new Test().execute();
    }

    public void execute() throws IOException{
        File dir = new File("test");
        dir.mkdirs();

        char[] data = new char[100];
        Arrays.fill(data, (char)'q');

        for(int x = 0; x < 1760; x++){
            File file = new File(dir, "file" + x);
            file.createNewFile();

            FileWriter fw = null;
            try{
                fw = new FileWriter(file);
                fw.write(data);
            }finally{
                if(fw != null){
                    fw.close();
                }
            }
        }

        delete(dir);

        //dir.mkdirs(); <-- commented out
        while(!dir.mkdirs()); //<-- dir.mkdirs() will return false until the directory has been successfully re-created

        new File(dir, "file").createNewFile();
    }

    private void delete (File f){
        if(f.isDirectory()){
            for(File afile : f.listFiles()){
                delete(afile);
            }
            f.delete();
        }else{
            f.delete();
        }
    }

} 
```

仍然不确定删除文件夹时的延迟究竟来自哪里，但我假设这只是文件系统的一个怪癖。

# c - C file IO extra characters when writing and reading from file

> ID：14656023
> 
> 赞同：0
> 
> 时间：2013-02-01T22:21:39.217
> 
> 标签：c

Ok so i am writing a C program. The program is simple enough, when i run the program i give it a few parameter Ex ./proj1 cat hat bat, so then it asks me to input a list of words the program gives counts of how many times "cat", "hat", and "bat" occurs in that list. I have the program working great.

```
Example 
./pro1 cat hat bat
cat
. 
```

(the program recognized a "." as the end of input)

```
Result:
cat:1
hat:0
bat:0 
```

ok so my program runs perfectly in every test case i can think of, but I have to pass a series of tests that my professor has mas made. here is the code of that test.

```
char *args[] = {"./main", "cat", "hat","bat",NULL};
char *result[] = {"Looking for 3 words\n",
  "Result:\n",
  "cat:1\n",
  "hat:0\n",
  "bat:0\n"};
FILE *out;
FILE *test;
test=fopen("test","w");
int i;
char *buffer=malloc(100*sizeof(char));

out = fopen("smp0.in", "w");
fprintf(out, "cat\n");
fprintf(out, ".\n");
fclose(out);

freopen("smp0.in", "r", stdin);

freopen("smp0.out", "w", stdout);

quit_if(main(4, args) != EXIT_SUCCESS);

fclose(stdin);
fclose(stdout);

out = fopen("smp0.out", "r");

for (i = 0; i < 5; i++) {
    quit_if(fgets(buffer, 100, out) == NULL);
    quit_if(strcmp(buffer, result[i]));
}

fclose(out);
return EXIT_SUCCESS;
 } 
```

ok so sending the quit_if() is the method that makes it fail. specifically

```
 quit_if(strcmp(buffer, result[i])); 
```

My output when i run the program is exactly as described. But between `freopen()` diverting stdout to a file and then reading it back it has changed somehow.

```
 Result:
  cat:1
  hat:0
  batÿ:0 
```

is what the output becomes, but it is not like that before the file write and read, and for some reason it is always that weird y character.

any advice would be greatly appreciated. Sorry for not posting more code but it's because it is a school project. I am confident that it is the test that is wrong in some way and not my code, fixing the test is part of the project as well.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:30:24.143

请参阅上一个问题的答案：

[https://stackoverflow.com/a/4906442/2009431](https://stackoverflow.com/a/4906442/2009431)

似乎当从您的标准输入文件中读回点时，它附加了一个 EOF 令牌（有意义），通常不会成为用户输入的一部分。然后，不知何故（不确定，因为我们看不到您的代码）您的 main() 函数以那个奇怪的 y 字符的形式将该 EOF 字符附加到“bat”上（有关原因的详细信息，请参见链接答案）。

如果我是对的，也许这可以被认为是测试中的错误？

# c - Using fwrite to store an ar_hdr struct to a file

> ID：14656026
> 
> 赞同：1
> 
> 时间：2013-02-01T22:21:51.417
> 
> 标签：c, fwrite, unix-ar

I'm working on a problem to create my own C version of unix ar. Right now I'm trying to create the header and write it to the file.

Initially, I used a stat struct and printed the contents using an fprintf. However, when I try to use the ar command on a file printed with such a method, it does not work. I was told that the better solution would be to use an fwrite to write the struct directly to the file. So I'm now trying to implement that.

I've tried to populate then fwrite my ar_hdr struct with the stat info, however when I write to the file, I get garbage.

**Update 2**: using just an fprintf based upon @fvu's recommendations. Last item on fprintf is the constant ARFMAG from ar.h which I believe is the same as printing the two characters.

```
void header(char *archive, char *read_file){
    struct stat sb;
    FILE *fp;

    if (stat(read_file, &sb) == -1)
        fail('s');

    fp = fopen(archive, "a");
    if (!fp)
        fail('f');

    fprintf(fp, "%-16s%-12ld%-6ld%-6ld%-8d%-10lld%s", read_file, (long)sb.st_mtimespec.tv_sec,
            (long)sb.st_uid, (long)sb.st_gid, sb.st_mode, (long long)sb.st_size, ARFMAG);

    fclose(fp);
} 
```

The test output of my program is now something like this:

```
!<arch>
b.txt           1359332639  502   20    33188   28        `
Appending B. shortb long b

d.txt           1359332655  502   20    33188   28        `
Appending D. shortb long b

c.txt           1359332646  502   20    33188   17        `
COpy this. 
```

When I try the unix command: ar -tv myfile.a

result is: Inappropriate file type or format

If I use nano to look at test.a this is the result

```
!<arch>
^@b.txt           1359332639  502   20    100644  28        `
Appending B. shortb long b

d.txt           1359332655  502   20    100644  28        `
Appending D. shortb long b

c.txt           1359332646  502   20    100644  17        `
COpy this shit. 
```

There's a weird shift@ symbol before the first header. Here's my code to write the overall file header, any hints would be appreciated.

```
char title[] = ARMAG; //constant defined in ar.h

    //open or create the output file
    sf = open(argv[2], O_WRONLY | O_CREAT | O_APPEND, perms);
    if (sf == -1)
        fail('o');  //open fail

    title_num = write(sf, title, sizeof(title)); 
```

Adding results from od -x file | head -n 2:

```
0000000      3c21    7261    6863    0a3e    2e62    7874    2074    2020
0000020      2020    2020    2020    2020    3331    3935    3333    3632 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:35:46.307

不是你的错误的原因（见下文），但非常奇怪

```
struct ar_hdr d;
struct ar_hdr* bob = &d;
...
bob = malloc(sizeof(struct ar_hdr));
...
fwrite(bob, sizeof(d),1, fp); 
```

非常复杂，我只是将所有内容都放入 d 中，仅此而已。

现在，您的 ar_hdr 看起来像这样：

```
 struct  ar_hdr                  /* file member header */
 {
     char    ar_name[16];        /* '/' terminated file member name */
     char    ar_date[12];        /* file member date */
     char    ar_uid[6]           /* file member user identification */
     char    ar_gid[6]           /* file member group identification */
     char    ar_mode[8]          /* file member mode (octal) */
     char    ar_size[10];        /* file member size */
     char    ar_fmag[2];         /* header trailer string */
 }; 
```

[维基百科文章](http://en.wikipedia.org/wiki/Ar_%28Unix%29#File_format_details)提到文本标题是最常用的格式：

```
Offset  Length  Name                            Format
0           16  File name                       ASCII
16          12  File modification timestamp     Decimal
28           6  Owner ID                        Decimal
34           6  Group ID                        Decimal
40           8  File mode                       Octal
48          10  File size in bytes              Decimal
58           2  File magic                      0x60 0x0A 
```

这意味着将结构直接写入文件**不是**您需要做的：由各个 sprintf 生成的 C 字符串以空值结尾，而空值后面的内容（直到数组的长度）是垃圾。文件格式需要空格字符而不是那些垃圾，也没有空字符....

实际上，我认为您最初的 fprintf 非常接近：

```
fprintf(fp, "%-16s%-12ld%-6ld%-6ld%-8o%-10lld%c%c", 
    fname, (long)sb.st_mtimespec.tv_sec,
    (long)sb.st_uid, (long)sb.st_gid, sb.st_mode, (long long)sb.st_size,0x60,0xa); 
```

*   将 ar_name 字段填充为 16
*   ar_mode 到八进制
*   添加了文件魔术

由于我无法在这里快速测试，可能仍然存在一些小问题，但应该非常接近。

附录：对于这种工作，一个工具来查看每个字节的文件内容字节（如所有 linux 发行版附带的 od）和一个按字节比较两个文件的工具（如[dhex](http://www.dettus.net/dhex/)）确实是必须的，因为只是测试什么 ar愿意打开就是太难了，太费时间了。

# r - Get element names in rapply

> ID：14656030
> 
> 赞同：9
> 
> 时间：2013-02-01T22:22:16.550
> 
> 标签：r

The little-used `rapply` function should be a perfect solution to many problems (such as [this one](https://stackoverflow.com/questions/14655735/find-the-indices-of-an-element-in-a-nested-list/14655813#14655735) ). However, it leaves the user-written function `f` with no ability to know where it is in the tree.

Is there any way to pass the name of the element in the nested list to `f` in an `rapply` call? Unfortunately, `rapply` calls `.Internal` pretty quickly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:34:13.830

我最近与任意深度的嵌套列表作斗争。最终，在我的情况下，我做出了或多或少可以接受的决定。这不是您问题的直接答案（没有`rapply`用法），但它似乎正在解决同类问题。我希望它可以有所帮助。

我没有尝试访问内部列表元素`rapply`的名称，而是生成了名称向量并在其中查询元素。

```
# Sample list with depth of 3
mylist <- list(a=-1, b=list(A=1,B=2), c=list(C=3,D=4, E=list(F=5,G=6))) 
```

在我的情况下，生成名称向量是一个棘手的问题。具体来说，列表元素的名称应该是安全的，即没有`.`符号。

```
list.names <- strsplit(names(unlist(mylist)), split=".", fixed=TRUE)
node.names <- sapply(list.names, function(x) paste(x, collapse="$"))
node.names <- paste("mylist", node.names, sep="$")
node.names

[1] "mylist$a"     "mylist$b$A"   "mylist$b$B"   "mylist$c$C"   "mylist$c$D"   "mylist$c$E$F"
[7] "mylist$c$E$G" 
```

下一步是按字符串名称访问列表元素。我发现没有什么比使用临时文件更好的了。

```
f <- function(x){
  fname <- tempfile()
  cat(x, file=fname)
  source(fname)$value
} 
```

这里`f`只返回 的值`x`，其中`x`是具有列表元素全名的字符串。

*最后，我们可以以伪递归的*方式查询列表。

```
sapply(node.names, f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:06:03.670

参考问题[在嵌套列表中查找元素的索引？](https://stackoverflow.com/questions/14655735/find-the-indices-of-an-element-in-a-nested-list/14655813)， 你可以写：

```
rappply <- function(x, f) {
  setNames(lapply(seq_along(x), function(i) {
    if (!is.list(x[[i]])) f(x[[i]], .name = names(x)[i])
    else rappply(x[[i]], f)
  }), names(x)) 
} 
```

然后，

```
> mylist <- list(a = 1, b = list(A = 1, B = 2), c = list(C = 1, D = 3))
> 
> rappply(mylist, function(x, ..., .name) {
+   switch(.name, "a" = 1, "C" = 5, x)
+ })
$a
[1] 1

$b
$b$A
[1] 1

$b$B
[1] 2

$c
$c$C
[1] 5

$c$D
[1] 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-13T08:00:20.243

**2020 年 6 月更新**：`rrapply`-package `rrapply`（ base 的扩展版本）中的 -function 允许通过在函数中`rapply`定义参数来做到这一点。在内部，变量将评估为嵌套列表中元素的名称：`.xname``f``f``.xname`

```
library(rrapply)

L <- list(a = 1, b = list(A = 1, B = 2), c = list(C = 1, D = 3))

rrapply(L, f = function(x, .xname) paste(.xname, x, sep = " = "))
#> $a
#> [1] "a = 1"
#> 
#> $b
#> $b$A
#> [1] "A = 1"
#> 
#> $b$B
#> [1] "B = 2"
#> 
#> 
#> $c
#> $c$C
#> [1] "C = 1"
#> 
#> $c$D
#> [1] "D = 3" 
```

# c# - jquery submit model containing multiple objects

> ID：14656038
> 
> 赞同：0
> 
> 时间：2013-02-01T22:22:37.610
> 
> 标签：c#, jquery, asp.net-mvc

--I've deleted the original text to try to clean the post up a bit--

--------EDIT-------------------------------------------------------------------------

Here is some more info not sure if it helps anyone that's ran into this issue before. Here is what my final object looks like in the JS script:

```
var DealerModel = {
    Dealer: {
        AccountId: 5678,
        Name: "Austin",
        City: "Who knows",
        State: "TN"
    },
    Test: 111,
    DealerCategories: [{Name: "Test1", Value:"Value1"},{Name:"Test2", Value:"Value2"}]
} 
```

When I pass this into my controller via jquery it has the 111 value for Test, it shows that DealerCategories has 2 objects, but for both those objects as well as Dealer it shows NULL.

I've changed up the model/controller a few times and it seems no matter what if I pass in an object that has a sub json object it doesn't like that. I have a feeling this is something simple i'm missing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:26:42.820

模型绑定器知道如何从 JSON 绑定数组，所以你只需要给他这样的东西：

```
var DealerModel = 
{
  Dealer : 'my_dealer_value_here',
  DealerContact = [] <- a list of Contrats here
} 
```

我认为应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:34:54.803

如果您的问题是从通过 jQuery.post 发布简单的值（如字符串和数字）实现飞跃，您还可以提供 json 对象，如上面 Alex 列出的对象。

```
$.ajax({
  type: "POST",
  url: 'MYURL',
  data: {
     Dealer : {id:-1, accountId: '', name:'TheDealer'},
     DealerContact: [{FirstName:'ContactName',...},{...},...]
  }
}); 
```

那一点数据应该反序列化为您的对象。

# ios - 无法使用带有两个 UITableViewController 的 ARC 使用 UINavigationController 设置自定义协议委托

> ID：14656039
> 
> 赞同：0
> 
> 时间：2013-02-01T22:22:41.397
> 
> 标签：ios, objective-c

我正在尝试为我的自定义协议设置委托，该协议具有一个必需的方法，允许我将一组对象传递***回***两个`UITableViewControllers`. 我的代表继续返回`nil`。因此，我需要的方法永远不会被调用。

我想知道我的数据源和委托实现`UITableViewControllers`是否导致冲突。此外，在声明代表时，也许 ARC 会妨碍您？

应该注意的是，两者`UITableViewControllers`都是使用 Storyboard 构建的，并使用 a 中的 segues 进行导航`UINavigationController`（不确定这是否会导致问题）。

导航是 --> `AlarmViewController`--> `AlarmDetailsViewController`。`Alarm`我在我的对象中创建了一个`AlarmDetailsViewController`包含警报的所有详细信息的对象，将其放入一个数组中，我想将该数组传**回**我的对象`AlarmViewController`​​，以显示在表中的自定义单元格中。

**注意：**我想在这里使用委托模式。我对调用`NSNotifications`或使用我的`AppDelegate`类的解决方案不感兴趣。

**AlarmDetailsViewController.h**

```
#import "Alarm.h"

@protocol PassAlarmArray <NSObject>
   @required
   -(void) passAlarmsArray:(NSMutableArray *)theAlarmsArray;
@end

@interface AlarmDetailsViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> 
{
   //.....   
   id <PassAlarmArray> passAlarmsArrayDelegate;   
}

@property (nonatomic, retain) id <PassAlarmArray> passAlarmsArrayDelegate;

@end 
```

**AlarmDetailsViewController.m**

```
#import "AlarmDetailsViewController.h"

@interface AlarmDetailsViewController ()

@end

@implementation AlarmDetailsViewController

@synthesize passAlarmsArrayDelegate;

-(void) viewWillDisappear:(BOOL)animated
{
   NSLog(@"delegate = %@", self.passAlarmsArrayDelegate);  // This prints nil
   [[self passAlarmsArrayDelegate] passAlarmsArray:alarmsArray]; 
}
//....
@end 
```

**报警视图控制器.h**

```
@interface AlarmViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate, PassAlarmArray>
{
//...
AlarmDetailsViewController  *alarmDetailsViewController;
}

@property (nonatomic, retain) AlarmDetailsViewController *alarmDetailsViewController;

@end 
```

**报警视图控制器.m**

```
#import "AlarmViewController.h"
#import "AlarmDetailsViewController.h"
#import "AlarmTableViewCell.h"
#import "Alarm.h"

@interface AlarmViewController ()

@end

@implementation AlarmViewController

@synthesize alarmDetailsViewController;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // This is where I'm attempting to set the delegate
    alarmDetailsViewController = [[AlarmDetailsViewController alloc]init];
    [alarmDetailsViewController setPassAlarmsArrayDelegate:self];
}

//....

//My @required protocol method which never gets called since my delegate is nil
-(void) passAlarmsArray:(NSMutableArray *)theAlarmsArray 
{
    alarmsTableArray = theAlarmsArray;
    NSLog(@"alarmsTableArray contains:  %@", alarmsTableArray); // Never gets called due to delegate being nil
    NSLog(@"theAlarmsArray contains:  %@", theAlarmsArray); // Never gets called due to delegate being nil
}

@end 
```

我试图将委托设置为在 AlarmViewController 中按下按钮时触发的方法（与 viewDidLoad 方法相反），但这也不起作用。

我假设我在这里的某个地方出现了逻辑流错误。. . 但近 2 天的狩猎和重建并没有发现它。啊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:09:24.657

您将代理设置在错误的位置，并且在控制器的另一个实例上，而不是您在执行 segue 时将获得的实例。如果要从 AlarmViewController 推送 AlarmDetailsViewController，则应在 prepareForSegue 方法中设置委托

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    AlarmDetailsViewController *alarm = segue.destinationViewController;
    alarm.passAlarmsArrayDelegate = self;
} 
```

您确实需要了解视图控制器的生命周期、实例化方式和时间，以及它们何时消失。这是 iOS 编程的核心，Apple 有大量关于它的文档。阅读 segues 也将非常有用。一个 segue（除了一个 unwind segue）总是实例化一个新的目标控制器实例。因此，当您执行 segue 时，无论是直接从按钮还是在代码中，都会实例化一个新的（与您直接分配初始化的不同）详细信息控制器。在执行该 segue 之前，调用 prepareForSegue: ，此时您可以访问将要创建的那个。这是设置委托或将任何信息传递给目标视图控制器的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:26:20.163

自从您使用 ARC 以来，您是否尝试将 (nonatomic, retain) 替换为 (nonatomic, strong)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:26:36.210

像您的alarmDetailsViewController 属性这样的自动合成属性具有带有下划线前缀的支持变量，例如_alarmDetailsViewController。您的 alarmDetailsViewController ivar（在 AlarmViewController.h 中的 @interface ... {} 块内声明的 alarmDetailsViewController）与您的 alarmDetailsViewController 属性的支持 ivar 不同。

只需删除您的alarmDetailsViewController ivar 并使用@property，最好通过self.alarmDetailsViewController。

# c - 如何遍历二维字符数组

> ID：14656041
> 
> 赞同：1
> 
> 时间：2013-02-01T22:22:52.147
> 
> 标签：c

我有 2 个二维数组。在某些时候，我需要选择两者之一并循环它。我需要什么样的指针指向二维数组才能循环它？

```
const char *a[] = {
            "example1",
            "example2",
            NULL
        };

const char *b[] = {
            "example1",
            "example2",
            "example3",
            "example4",
            "example5",
            NULL
        };

const char *pointer = a;

int count = 0;
while(pointer != NULL)
{
    puts(pointer[count]);

    count++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:25:07.447

你只需要一个`*`：

```
const char **pointer = a; 
```

你的循环条件也是错误的 - 我想你想要：

```
while (pointer[count] != NULL) 
```

# git - 如何在不使用子模块的情况下在我的存储库中添加/升级 /降级远程 Git 项目？

> ID：14656047
> 
> 赞同：7
> 
> 时间：2013-02-01T22:23:07.190
> 
> 标签：git, github, git-svn, git-merge, git-pull

我需要在项目的 Git 存储库中保留 WordPress 的副本。

我想使用 Git 从 GitHub 拉下 WordPress 更新，然后通过`git push`和/或推送这些更新`git svn dcommit`。

我目前有一个使用 Git 子模块的解决方案，它可以工作；但是现在我需要将我的最新项目部署到仅支持 SVN 的服务器上，并且我无法直接访问该服务器。因此，子模块被淘汰了。

我对[Git 的子树合并策略](http://git-scm.com/book/en/Git-Tools-Subtree-Merging)进行了大量阅读，我认为这是正确的解决方案；但我读过的所有内容都希望我想要关注一个远程分支，并且总是拉下它最新的代码。

相反，[GitHub 上的 WordPress](https://github.com/WordPress/WordPress)使用它的`master`分支——实际上是它的所有分支——进行开发；发布被标记，但就是这样。正式来说，所有分支都处于永久的 alpha 状态。

我想我需要弄清楚的是如何子树合并*标签*。

现在，我这样做是为了将 WordPress 3.5 读入`webroot/wordpress`（以及命名空间 WordPress 标签），它可以工作：

```
$ git remote add -t master --no-tags wordpress git://github.com/WordPress/WordPress.git
$ git config --add remote.wordpress.fetch +refs/tags/*:refs/tags/wordpress/*
$ git fetch wordpress
warning: no common commits
remote: Counting objects: 138547, done.
remote: Compressing objects: 100% (28297/28297), done.
remote: Total 138547 (delta 110613), reused 137367 (delta 109624)
Receiving objects: 100% (138547/138547), 46.05 MiB | 2.26 MiB/s, done.
Resolving deltas: 100% (110613/110613), done.
From git://github.com/WordPress/WordPress
 * [new branch]      master     -> wordpress/master
 * [new tag]         1.5        -> wordpress/1.5
...
 * [new tag]         3.5        -> wordpress/3.5
 * [new tag]         3.5.1      -> wordpress/3.5.1
$ git read-tree --prefix=webroot/wordpress/ -u wordpress/3.5
$ git commit -m "Added WordPress 3.5 at webroot/wordpress"
[master c483104] Added WordPress 3.5 at webroot/wordpress
 1061 files changed, 269102 insertions(+)
 create mode 100644 webroot/wordpress/index.php
 create mode 100644 webroot/wordpress/license.txt
 create mode 100644 webroot/wordpress/readme.html
... 
```

但是，无论我尝试什么，我都不知道如何使用子树合并来使用 WordPress 3.5.1 更新它。

尝试`merge`and `read-tree`，根据[this](http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)，不起作用：

```
$ git merge -s ours --squash --no-commit wordpress/3.5.1
Squash commit -- not updating HEAD
Automatic merge went well; stopped before committing as requested
$ git read-tree --prefix=webroot/wordpress/ -u wordpress/3.5.1
error: Entry 'webroot/wordpress/index.php' overlaps with 'webroot/wordpress/index.php'.  Cannot bind. 
```

尝试子树合并失败：

```
$ git merge -s subtree --squash --no-commit wordpress/3.5.1
warning: Cannot merge binary files: webroot/wordpress/wp-includes/js/tinymce/wp-tinymce.js.gz (HEAD vs. wordpress/3.5.1)
...
Squash commit -- not updating HEAD
Automatic merge failed; fix conflicts and then commit the result. 
```

（`git pull -s subtree --squash --no-commit wordpress 3.5.1`以同样的方式失败。）

我试过添加`-Xtheirs`到`git merge`，我试过递归`merge`，`-Xsubtree`我试过临时分支和子树合并的每一种组合，我能弄清楚——但我似乎无法破解这个。

有任何想法吗？还是我应该放弃并以老式方式下载（并重新下载和重新下载）WordPress？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T22:19:00.133

如果您想要做的只是经常将远程文件拉入您的项目，并且您不关心将其历史连接到您的历史，则不需要任何合并。

最终，解决方案非常简单：

*   从 Git 索引中删除旧版本的 WordPress；
*   使用 ; 将新版本的 WordPress 拉入 Git 索引`read-tree`。
*   犯罪。

`read-tree`是您在这里需要的唯一工具，并且由于`read-tree`（巧妙地）拒绝覆盖文件，您只需从索引中删除旧树，然后再将新树读入其位置。

```
$ git rm -r webroot/wordpress
rm 'webroot/wordpress/index.php'
rm 'webroot/wordpress/license.txt'
rm 'webroot/wordpress/readme.html'
...
$ git read-tree --prefix=webroot/wordpress/ -u wordpress/3.5.1
$ git commit -m "Updated to WordPress 3.5.1"
[master 9665ad7] Updated to WordPress 3.5.1
 44 files changed, 406 insertions(+), 176 deletions(-)
 rewrite webroot/wordpress/wp-admin/js/post.min.js (81%)
 rewrite webroot/wordpress/wp-includes/js/media-editor.min.js (99%)
 rewrite webroot/wordpress/wp-includes/js/media-views.min.js (89%)
... 
```

# c# - 在 GridViews 中正确使用 FindControl()

> ID：14656050
> 
> 赞同：1
> 
> 时间：2013-02-01T22:23:13.837
> 
> 标签：c#, asp.net, gridview

我继承了一些代码，到处都是 GridView，我注意到该`OnItemDataBound`方法中有以下几种引用：

```
Label lblSomething = (Label)e.Row.Cells[3].FindControl("lblSomething");
Label lblSomethingElse = (Label)e.Row.Cells[3].FindControl("lblSomethingElse"); 
```

“问题”是`lblSomething`并且`lblSomethingElse`实际上不在同一个单元格中，但它们似乎都在正常工作。简化一点：

```
<Columns>
    <asp:TemplateField runat="server" HeaderText="Online materials available to assign">
        <ItemTemplate>
            <asp:Label ID="lblThis" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Assign" HeaderStyle-Width="75px">
        <ItemTemplate>
            <asp:Label ID="lblThat" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Assign" HeaderStyle-Width="75px">
        <ItemTemplate>
            <asp:Label ID="lblSomething" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Assign" HeaderStyle-Width="75px">
        <ItemTemplate>
            <asp:Label ID="lblSomethingElse" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>                        

</Columns> 
```

这种行为是预期的吗？如果我使用的单元格无关紧要，我`FindControl()`可以安全/可靠地简化它吗？

```
Label lblSomething = (Label)e.Row.FindControl("lblSomething");
Label lblSomethingElse = (Label)e.Row.FindControl("lblSomethingElse"); 
```

如果没有，仅使用它是否可靠`Cells[0].FindControl()`？

我是否应该担心单元格不匹配仅因意外而起作用，并且我需要尽快修复这些单元格索引，以免一切都破裂？

或者，我是否低估了它的力量`FindControl()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:51:49.253

经过一些实验，我发现以下工作非常好。

```
Label lblSomething = (Label)e.Row.FindControl("lblSomething");
Label lblSomethingElse = (Label)e.Row.FindControl("lblSomethingElse"); 
```

这是否是“最佳实践”超出了我的范围。

此外，我已经`runat="server"`从标记中的第一个`TemplateField`中删除以匹配其他标记。显然，这是不必要的。（谁知道？）

```
<Columns>
    <asp:TemplateField HeaderText="Online materials available to assign">
        <ItemTemplate>
            <asp:Label ID="lblThis" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Assign" HeaderStyle-Width="75px">
        <ItemTemplate>
            <asp:Label ID="lblThat" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Assign" HeaderStyle-Width="75px">
        <ItemTemplate>
            <asp:Label ID="lblSomething" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField HeaderText="Assign" HeaderStyle-Width="75px">
        <ItemTemplate>
            <asp:Label ID="lblSomethingElse" runat="server"></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>                        

</Columns> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:49:43.840

```
Label myLabel = e.row.FindControl("myControl") as Label;
if(myLabel !=null)
{
     // Do some work
 } 
```

我更喜欢使用 as 进行铸造。

# angularjs - 作为非 MVC 项目的项目可以采用 AngularJS 作为其模板引擎吗？

> ID：14656054
> 
> 赞同：0
> 
> 时间：2013-02-01T22:23:22.930
> 
> 标签：angularjs, javascript-framework

我使用[Pure](http://beebole.com/pure/)作为我当前项目的模板引擎。然而，就它提供的内容而言，它是相当少的。我需要一个允许“条件语句”的模板引擎。AngularJS 是我感兴趣的候选人。我最近阅读了很多关于 MVC 框架的内容，看起来很有趣。如果我以后有空余的资源，我肯定想尝试在我的项目中应用 AngularJS。现在，我只想使用 AngularJS 的模板引擎，而不需要将我的项目转换为 MVC。这可行吗？如果是这样，请为我推荐任何好的资源来学习它的模板语言。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:45:34.363

您可以选择仅在角度中使用模板位，是的。检查 Angular 网站以获取教程。这很简单。

# mysql - Exclusion of all rows possible via outer join?

> ID：14656060
> 
> 赞同：1
> 
> 时间：2013-02-01T22:23:33.353
> 
> 标签：mysql

I'll start off with the schema:

```
CREATE TABLE CustomersActions (
   `caID` int(10) unsigned NOT NULL AUTO_INCREMENT primary key,
   `cusID` int(11) unsigned NOT NULL,
   `caTimestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
)
CREATE TABLE `Assignments` (
    `asgID` int(10) unsigned NOT NULL AUTO_INCREMENT primary key,
    `cusID` int(11) unsigned NOT NULL,
    `asgAssigned` date DEFAULT NULL,
    `astID` int(10) unsigned NOT NULL
)
CREATE TABLE `AssignmentStatuses` (
   `astID` int(10) unsigned NOT NULL AUTO_INCREMENT primary key,
   `astStatus` varchar(255) DEFAULT ''
) 
```

My original query is:

```
 SELECT DISTINCT
     ca.cusID
  FROM
     CustomersActions ca
  WHERE      
     NOT EXISTS (
        SELECT
           TRUE
        FROM
           Assignments asg
           NATURAL JOIN AssignmentStatuses
        WHERE
           asg.cusID = ca.cusID
           AND (
              DATE_ADD(asgAssigned, INTERVAL 6 DAY) > NOW()
              OR astStatus IN('Not contacted', 'Follow-up')
           )
     ) 
```

What this does is select all `cusID` entries from CustomersActions if said Customer does not have a row in `Assignments` that is in "Not contacted" or "Follow-up" (for any date range) OR has an assignment of *any* status from less than six days ago.

I tried writing the same query using `LEFT JOIN` to exclude from `Assignments` like so:

```
SELECT DISTINCT
    ca.cusID
FROM
    CustomersActions ca
    LEFT JOIN (
       Assignments asg
       NATURAL JOIN AssignmentStatuses
    ) ON (ca.cusID = asg.cusID)
WHERE
    asgID IS NULL
    OR DATE_ADD(asgAssigned, INTERVAL 6 DAY) < NOW()
    OR astStatus IN('Not contacted', 'Follow-up') 
```

The problem is that it's possible for a customer to have multiple entries in `Assignments` so a `cusID` can be selected even if they have an existing row that should force them to be excluded. This makes sense to me, and the `NOT EXISTS` solves this problem.

What I'm wondering is if there is a way to perform a single query that has the same effect as the query when using `NOT EXISTS`. That is, a customer should be excluded if they have any rows that satisfy the exclusion condition, not only if *all* of their rows satisfy the exclusion condition (or if they have none).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T00:29:40.720

您是否尝试过使用`NOT IN`子句，例如：

```
SELECT DISTINCT
  ca.cusID
FROM
 CustomersActions ca
WHERE cusID    
 NOT IN (
    SELECT
       cusID
    FROM
       Assignments asg
       INNER JOIN AssignmentStatuses ast
       ON asg.astID = ast.astID
       WHERE
          DATE_ADD(asgAssigned, INTERVAL 6 DAY) > NOW()
          OR astStatus IN('Not contacted', 'Follow-up')
 ) 
```

# c++ - 输入验证不起作用

> ID：14656064
> 
> 赞同：0
> 
> 时间：2013-02-01T22:24:03.367
> 
> 标签：c++, validation

我正在尝试解析来自文件的输入以表示标准的一副纸牌（即 2C 代表两个俱乐部）。但是，我的解决方案没有按预期工作，并且声明所有输入都无效。我在我的代码中看不到任何逻辑错误，所以我想获得第二意见。代码如下：

```
/*
 * Determines if the input string is valid.
 * 
 * A string is considered valid if it begins with either a number (2-10) 
 * or a letter (J/j, Q/q, K/k) to deetermine rank, followed by a letter to
 * determine suit (C/c, D/d, H/h, S/s).
 */
bool inputValidator(string cardData)
{
    if (cardData.length() == 2) //Input string is two characters long
    {
        if (cardData[0] < '2' || cardData[0] > '9'
            || cardData[0] != 'J' || cardData[0] != 'j'
            || cardData[0] != 'Q' || cardData[0] != 'q'
            || cardData[0] != 'K' || cardData[0] != 'k'
            || cardData[0] != 'A' || cardData[0] != 'a')
        {
            cout << "Card with data " << cardData << " has an invalid rank." << endl;
            return false;
        }
        if (cardData[1] != 'C' || cardData[1] != 'c' //Parse suit
            || cardData[1] != 'D' || cardData[1] != 'd'
            || cardData[1] != 'H' || cardData[1] != 'h'
            || cardData[1] != 'S' || cardData[1] != 's')
        {
            cout << "Card with data " << cardData << " has an invalid suit." << endl;
            return false;
        }
        return true;
    }
    else if (cardData.length() == 3) //Input string is three characters long
        //This occurs only if the number is 10.
    {
        if (cardData[0] != '1' || cardData[1] != '0') //Parse rank
        {
            cout << "Card with data " << cardData << " has an invalid rank." << endl;
            return false;
        }
        if (cardData[2] != 'C' || cardData[2] != 'c' //Parse suit
            || cardData[2] != 'D' || cardData[2] != 'd'
            || cardData[2] != 'H' || cardData[2] != 'h'
            || cardData[2] != 'S' || cardData[2] != 's')
        {
            cout << "Card with data " << cardData << " has an invalid suit." << endl;
            return false;
        }
        return true;
    }
    return false;
} 
```

如果有任何逻辑缺陷（或天生更好的方法），我会很感激被告知。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:28:43.527

您正在编写这样的子句：

```
cardData[2] != 'D' || cardData[2] != 'd' 
```

这始终是正确的，因为被测试的变量不能同时是两个值。您可能打算使用`&&`而不是`||`.

您当然可以简化逻辑，例如在比较之前将输入转换为小写或大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:33:16.543

问题似乎在于您结合条件的方式。如果我正确理解您的期望，那么您想要的第一个条件是：

```
 if (!(cardData[0] > '2' && cardData[0] < '9')
        && cardData[0] != 'J' && cardData[0] != 'j'
        && cardData[0] != 'Q' && cardData[0] != 'q'
        && cardData[0] != 'K' && cardData[0] != 'k'
        && cardData[0] != 'A' && cardData[0] != 'a') 
```

而你想要的第二个条件是这样的：

```
 if (cardData[1] != 'C' && cardData[1] != 'c' //Parse suit
        && cardData[1] != 'D' && cardData[1] != 'd'
        && cardData[1] != 'H' && cardData[1] != 'h'
        && cardData[1] != 'S' && cardData[1] != 's') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:33:30.757

您可以稍微简化条件：并且必须更改您的条件以执行您想要的操作。

```
bool inputValidator(string cardData)
{
    if (cardData.length() == 2) //Input string is two characters long

   {
        if (!((cardData[0] >= '2' && cardData[0] <= '9')
            || (cardData[0]|32) == 'j'
            || (cardData[0]|32) == 'q'
            || (cardData[0]|32) == 'k'
            || (cardData[0]|32) == 'a'))
        {
           cout << "Card with data " << cardData << " has an invalid rank." << endl;
           return false;
         }

        if (!((cardData[1]|32) == 'c' //Parse suit
            || (cardData[1]|32) == 'd'
            || (cardData[1]|32) == 'h'
            || (cardData[1]|32) == 's'))
        {
            cout << "Card with data " << cardData << " has an invalid suit." << endl;
            return false;
        }
        return true;
    }
    else if (cardData.length() == 3) //Input string is three characters long
        //This occurs only if the number is 10.
    {
        if (!(cardData[0] == '1' || cardData[1] == '0')) //Parse rank
        {
            cout << "Card with data " << cardData << " has an invalid rank." << endl;
            return false;
        }
        if (!((cardData[2]|32) == 'C' //Parse suit
            || (cardData[2]|32)  == 'd'
            || (cardData[2]|32)  == 'h'
            || (cardData[2]|32)  == 's'))
        {
            cout << "Card with data " << cardData << " has an invalid suit." << endl;
            return false;
        }
        return true;
    }
    return false;
} 
```

第二个/第三个字符的代码重复也应该重构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T22:38:47.720

您的逻辑表达式不正确，而且您正在复制代码，请尝试将它们简单地转换为函数。

```
bool inputValidator(string cardData)
{
    if (cardData.length() == 2 && IsValidCard(cardData[0])) //Input string is two characters long
    {
        return IsValidSuite(cardData[1]);
    }
    else if(cardData.length() == 3) 
    {
        if (isValidRank(cardData[0]))
        {
            return IsValidSuite(cardData[2]);
        }
    }
    return false;
}

bool isValidRank(char c)
{
    if (c =='0' || c=='1')[
    {
        return true;
    }
    return false;
}

bool IsValidCard(char c)
{
  if (c > '2' && c < '9')
  {
    return true;
  }

  switch(c)
  {
    case 'J':
    case 'j':
    case 'Q':
    case 'q':
    case 'K':
    case 'k':
    case 'A':
    case 'a':
      return true;
  }

  return false;
}    

bool IsValidSuite(char c)
{
  switch(c)
  {
    case 'C':
    case 'c':
    case 'D':
    case 'd':
    case 'H':
    case 'h':
    case 'S':
    case 's':
      return true;
  }
  return false;
} 
```

# jquery - MVC Jquery 对话框未出现在 POST 上

> ID：14656066
> 
> 赞同：1
> 
> 时间：2013-02-01T22:24:11.713
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui-dialog

我正在使用带有 Jquery 对话框的 MVC C#。当我做一个 POST 时，我被重定向到一个普通页面而不是对话框。

这是我的代码的样子：

内部视图：

```
 <div id="dialog" title="" style="overflow: hidden;">
    </div> 
```

在我的点击事件中，我有以下内容：

```
 $('#dialog').dialog({
                   autoOpen: false,
                   width: 500,
                   resizable: true,
                   title: 'PVT Report',
                   modal: true,           
                   buttons: {
                       "Close": function () {
                       $(this).dialog("close");
                        }
                      }
                  });

       $('#dialog').dialog('open');

                 $.ajax({
                           url: url,
                           type: 'GET',
                           success: function(result) {

                           if (result.success) 
                           {
                             $('#dialog').dialog('close');
                          } 
                           else 
                           {
                              $('#dialog').html(result);
                           }
                         }  
                  });
                 } 
```

它会很好地转到 url 并显示对话框。当我进行 POST 时，它并没有返回对话框，而是转到常规页面：

以下是我的 GET 和 POST：

```
 public ActionResult FileUpload(int id)
     {
        var model = new FileUpload { PlNum = id}           
        return PartialView(model);
     }

    [HttpPost]
    public ActionResult FileUpload(HttpPostedFileBase file, FileUpload model)
    {
        // Verify that the user selected a file
        if (file != null && file.ContentLength > 0)
        {
            // extract only the fielname
            var fileName = Path.GetFileName(file.FileName);
            string extension = Path.GetExtension(file.FileName);

            if (extension != ".pdf")
            {
                TempData["ErrMessage"] = "Error, wrong file type. File must be a PDF file.";
                return RedirectToAction("FileUpload", new { id = model.PlNum });
            } 
```

......

这是我的观点：

```
@using (Html.BeginForm("FileUpload", "Plt", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
       @Html.HiddenFor(a => a.PlNum)     
       <p>File upload for Pl# @Model.PlNum</p>
       <input type="file" name="file" />
       <input type="submit" value="OK" />
} 
```

我认为使用 $.ajax 会很好。我认为我的问题之一是当我执行重定向操作时，对话框不再打开..

请注意，无论哪种方式，如果成功或不成功，我都喜欢返回对话框。如果成功，将显示“成功”的消息。如果不成功，将出现错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:01:39.530

为了确保我正确理解了您的问题，请允许我在回答之前先重申您的目标。如果我错了，请纠正我。

1.  您想在 jQuery UI 对话框中显示包含表单的部分视图
2.  此表单包含一个文件上传输入，允许用户从他的计算机选择文件并将其上传到服务器
3.  您希望此上传使用 AJAX 异步进行
4.  如果上传成功，您要感谢用户上传文件并关闭 jQuery 对话框
5.  如果在请求期间出现错误，您希望向用户显示错误消息。例如，如果他没有选择任何文件，即使此字段是必需的

如果我不理解您的某些目标，您可以停止阅读我的答案并更新您的问题，以提供有关您到底想要实现什么的更多信息。

这里的挑战在于上传带有 AJAX 请求的文件。如您所知，这对于标准技术是不可能的。虽然有很多解决方法。您可以使用一个插件，例如[`Uploadify`](http://www.uploadify.com/)or[`FineUploader`](http://fineuploader.com/)或使用新的插件，[`HTML5 File API`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)它允许您实现这一点并且所有现代浏览器都支持它（不，IE9 不是现代浏览器，抱歉）。我将介绍 lats 选项，因为我们在 2013 年，我们都使用现代浏览器，没有人给出...关于 IE。

因此，在每个 ASP.NET MVC 应用程序中，我们可以从设计一个视图模型开始，该模型将满足我们的视图要求和我们希望在上传表单中包含的信息：

```
public class MyViewModel
{
    public int Id { get; set; }

    [Required]
    public HttpPostedFileBase File { get; set; }
} 
```

然后我们可以有一个控制器来处理这个过程：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Upload(int id)
    {
        var model = new MyViewModel
        {
            Id = id
        };
        return PartialView(model);
    }

    [HttpPost]
    public ActionResult Upload(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // There was a validation error, probably the user didn't select any file
            // we set the status code to 400 (BadRequest) and return the 
            // same partial which will contain the validation error
            Response.StatusCode = (int)System.Net.HttpStatusCode.BadRequest;
            return PartialView(model);
        }

        // at this stage we know that the model is valid => 
        // we could process the uploaded file. In this particular example
        // I am saving the uploaded file to the App_Data folder on the server
        // and ignoring the Id parameter of the view model. Obviously
        // in a more real world application here you might want to store the
        // physical location of this file in your data store as well as it's MIME type
        // so that you could display it later
        var file = Path.Combine(
            Server.MapPath("~/App_Data"), 
            Path.GetFileName(model.File.FileName)
        );
        model.File.SaveAs(file);

        // we have finished => let's set the response status code to 
        // 204 (NoContent) so that the client side javascript that I will show
        // later in my answer could distinguish this case from the error scenario
        Response.StatusCode = (int)System.Net.HttpStatusCode.NoContent;

        // we will return an EmptyResult because in this particular example
        // I don't really care about returning some information to the client
        // from the server. If you care you could of course set the status code 
        // to 200 (Success) and return, say, a JsonResult here
        return new EmptyResult();
    }
} 
```

这个控制器不用多说。很标准的东西。提供一些虚拟视图的`Index`操作，其中包含启动上传过程的链接。提供部分上传表单的`Upload`(GET) 操作，当然还有`Upload`处理实际文件上传的 (POST) 操作（在这个过于简单的示例中，我将文件存储在服务器上）。

然后我们可以有相应的`~/Views/Home/Index.cshtml`虚拟视图：

```
@model MyViewModel
@Html.ActionLink(
    "click here to upload a file", 
    "Upload", 
    new { id = 154 }, 
    new { id = "uploadLink" }
)
<div id="dialog"></div> 
```

简单：一个包含锚点的强类型视图，该锚点随后（见我的回答后面）将被 AJAX 化，以便在 jQuery 对话框中显示上传部分和对话框的 div 占位符。

接下来我们可以编写包含表单 ( `~/Views/Home/Upload.cshtml`) 的上传部分：

```
@model MyViewModel

@using (Html.BeginForm(null, null, new { id = Model.Id }, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        @Html.LabelFor(x => x.File)
        @Html.TextBoxFor(x => x.File, new { type = "file" })
        @Html.ValidationMessageFor(x => x.File)
    </div>
    <button type="submit">Upload</button>
} 
```

再一次，这里很标准的东西 => 一个包含文件输入的 HTML 表单，允许用户选择要上传的文件。

最后一步当然是让这一切变得生动的javascript。您可以将此 javascript 放在您从 _Layout 覆盖的索引视图内的脚本部分中。理想情况下，脚本应该放在文档的末尾，在结束`</body>`标记之前（这就是我不将`.click()`处理程序订阅包装在 a 中的原因`document.ready`）：

```
$('#uploadLink').click(function () {
    $.ajax({
        url: this.href,
        type: 'GET',
        cache: false,
        success: function (result) {
            $('#dialog').html(result).dialog({
                autoOpen: true,
                width: 500,
                resizable: true,
                title: 'PVT Report',
                modal: true,
                buttons: {
                    'Close': function () {
                        $(this).dialog("close");
                    }
                }
            });
        }
    });
    return false;
});

$('#dialog').on('submit', 'form', function () {
    var xhr = new XMLHttpRequest();
    xhr.open(this.method, this.action);
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            if (xhr.status == 204) {
                // upload was successful => thank the user and close
                // the dialog
                alert('Thank you for uploading the file');
                $('#dialog').dialog('close');
            } else if (xhr.status == 400) {
                // validation error occurred on the server => redisplay the form
                $('#dialog').html(xhr.responseText);
            }
        }
    };
    xhr.send(new FormData(this));
    return false;
}); 
```

此 javascript 处理 2 个事件：在显示 jQuery 对话框的主视图中单击锚点，以及将使用 AJAX 请求和 HTML 5 File API 上传文件的表单提交。

# javascript - 关闭 Backbone.Marionette.ItemView 的 div 换行

> ID：14656068
> 
> 赞同：30
> 
> 时间：2013-02-01T22:24:26.123
> 
> 标签：javascript, backbone.js, marionette

我在这里查看 Angry Cats Backbone/Marionette 教程帖子

[http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/](http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/)

[http://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-tutorial-part-2/](http://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-tutorial-part-2/)

我遇到了同样的问题/需要在这里发布：

[Backbone.js 在渲染中关闭 div 换行](https://stackoverflow.com/questions/7894253/backbone-js-turning-off-wrap-by-div-in-render)

但我只能让它为 Backbone.Views 工作，而不是 Backbone.Marionette.ItemViews。

例如，从上面简单的骨干木偶教程链接中，以 AngryCatView 为例：

```
AngryCatView = Backbone.Marionette.ItemView.extend({
  template: "#angry_cat-template",
  tagName: 'tr',
  className: 'angry_cat',
  ...
}); 
```

模板`#angry_cat-template`看起来像这样：

```
<script type="text/template" id="angry_cat-template">
  <td><%= rank %></td>
  <td><%= votes %></td>
  <td><%= name %></td>
  ...
</script> 
```

我不喜欢的是 AngryCatView 需要有

```
 tagName: 'tr',
  className: 'angry_cat', 
```

- 如果我`tagName`取出，然后`angry_cat-template`被包裹起来`<div>`。

我想要的是在一个地方（angry_cat-template）指定HTML，并且在angered_cat-template中没有大多数HTML（所有`<td>`标签），在AngryCatView中没有一点HTML（`<tr>`标签）。我想在angerous_cat-template中写这个：

```
<script type="text/template" id="angry_cat-template">
  <tr class="angry_cat">
    <td><%= rank %></td>
    <td><%= votes %></td>
    <td><%= name %></td>
    ...
  </tr>
</script> 
```

这对我来说只是感觉更干净，但我一直在用 Derik Bailey 在“Backbone.js 关闭渲染中的 div 包裹”中的回答胡闹，并且无法让它为 Backbone.Marionette 工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-04T03:24:01.947

2014 年 2 月 18 日 — 更新以适应 @vaughan 和 @Thom-Nichols 在评论中指出的改进

* * *

在我的许多 itemView/布局中，我这样做：

```
var Layout = Backbone.Marionette.Layout.extend({

    ...

    onRender: function () {
        // Get rid of that pesky wrapping-div.
        // Assumes 1 child element present in template.
        this.$el = this.$el.children();
        // Unwrap the element to prevent infinitely 
        // nesting elements during re-render.
        this.$el.unwrap();
        this.setElement(this.$el);
    }

    ...

}); 
```

上面的代码仅在包装器 div 包含单个元素时才有效，这就是我设计模板的方式。

在你的情况下`.children()`会返回`<tr class="angry_cat">`，所以这应该很完美。

我同意，它确实使模板更清洁。

需要注意的一件事：

这种技术不会只强制 1 个子元素。它盲目地抓取`.children()`，所以如果您错误地构建了模板以返回多个元素，例如第一个具有 3 个`<td>`元素的模板示例，它将无法正常工作。

它要求您的模板返回单个元素，就像您在带有根`<tr>`元素的第二个模板中所做的那样。

当然，如果需要，可以编写它来测试这一点。

* * *

[这是好奇的工作示例：http://codepen.io/somethingkindawierd/pen/txnpE](http://codepen.io/somethingkindawierd/pen/txnpE)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-03T20:27:26.443

虽然我确信有一种方法可以破解内部结构`render`以使其按照您想要的方式运行，但采用这种方法意味着您将在整个开发过程中与 Backbone 和 Marionette 的约定作斗争。`ItemView`需要有一个关联的`$el`，并且按照惯例，它是 a `div`，除非您指定 a `tagName`。

我感同身受——尤其是在布局和区域的情况下，似乎不可能阻止 Backbone 生成额外的元素。我建议您在学习框架的其余部分时接受约定，然后才决定是否值得黑客`render`以不同的行为（或只是选择不同的框架）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-10T13:03:15.713

此解决方案适用于重新渲染。您需要覆盖`render`.

`onRender`技巧不适用于重新渲染。它们会在每次重新渲染时导致嵌套。

```
BM.ItemView::render = ->
  @isClosed = false
  @triggerMethod "before:render", this
  @triggerMethod "item:before:render", this
  data = @serializeData()
  data = @mixinTemplateHelpers(data)
  template = @getTemplate()
  html = Marionette.Renderer.render(template, data)

  #@$el.html html
  $newEl = $ html
  @$el.replaceWith $newEl
  @setElement $newEl

  @bindUIElements()
  @triggerMethod "render", this
  @triggerMethod "item:rendered", this
  this 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-13T05:27:10.990

使用 vanilla JS 而不是 jQuery 来完成这个不是更干净吗？

```
var Layout = Backbone.Marionette.LayoutView.extend({

  ...

  onRender: function () {
    this.setElement(this.el.innerHTML);
  }

  ...

}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-22T21:36:50.917

对于 IE9+，您可以只使用[firstElementChild](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/firstElementChild)和[childElementCount](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/childElementCount)：

```
var Layout = Backbone.Marionette.LayoutView.extend({

  ...

  onRender: function () {
      if (this.el.childElementCount == 1) {
          this.setElement(this.el.firstElementChild);
      }
  }

  ...

}); 
```

Marionette 自动插入包装器 DIV 是有充分理由的。只有当您的模板仅包含一个元素时，您才能删除它。因此测试子元素的数量。

另一种选择是使用每个 Marionette 视图中的[attachElContent](http://marionettejs.com/annotated-src/backbone.marionette.html#section-204)方法。它的默认实现意味着视图的重新渲染将覆盖根元素的内部 HTML。这最终导致了 bejonbee 的答案中提到的无限嵌套。

如果您不想覆盖 onRender 和/或需要纯 JS 解决方案，那么以下代码可能正是您想要的：

```
var Layout = Backbone.Marionette.LayoutView.extend({

  ...

  attachElContent: function (html) {
      var parentEl = this.el.parentElement;
      var oldEl;

      //View already attached to the DOM => re-render case => prevents
      //recursive nesting by considering template's top element as the
      //view's when re-rendering
      if (parentEl) {
          oldEl = this.el;
          this.setElement(html);                   //gets new element from parsed html
          parentEl.replaceChild(this.el, oldEl);   //updates the dom with the new element 
          return this;

      //View hasn't been attached to the DOM yet => first render 
      // => gets rid of wrapper DIV if only one child
      } else {
          Marionette.ItemView.prototype.attachElContent.call(this, html);
          if (this.el.childElementCount == 1) {
              this.setElement(this.el.firstElementChild);
          }
          return this;
      }
  }

  ...

}); 
```

请注意，为了使重新渲染正常工作，代码假定模板具有包含所有标记的单个子级。

# iphone - ios 6 orientation methods

> ID：14656070
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:24:30.633
> 
> 标签：iphone, ios6

the orientation methods have changed in iOS 6. my whole app in portrait mode got to many view controllers (not tab bar view controllers) i just want to rotate one of my view controller to landscape mode (it actually displays a webView) when i rotate the device.the below method was working in xcode 4.4 but, it's not in Xcode.4.5

```
- (BOOL)shouldAutorotateToInterfaceOrientation:
  (UIInterfaceOrientation)interfaceOrientation {
  return (interfaceOrientation == UIInterfaceOrientationPortrait ||
 interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
interfaceOrientation == UIInterfaceOrientationLandscapeRight ); 
```

the above method won't work in xcode 4.5 for this reason i have changed the below method but even though its not working....plz any suggestions thanks.

```
 - (BOOL) shouldAutorotate{
 [[UIApplication sharedApplication] setStatusBarOrientation:           UIInterfaceOrientationPortrait];
  return self.modalViewController.shouldAutorotate;
}
 -(NSUInteger)supportedInterfaceOrientations
{
  return UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:32:50.803

你使用标签栏视图控制器吗？如果你使用它，那么所有选项卡中的所有视图控制器都应该能够旋转，即使你只想旋转一个。

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

这在 iOS6 中应该可以正常工作。

* * *

如果你使用 UINavigationViewController，那么它的方法就会被调用。还有另一种解决方案。

```
// App delegate.m
- (NSUInteger)application:(UIApplication *)application    supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    NSUInteger orientations = UIInterfaceOrientationMaskAllButUpsideDown;

    if(self.window.rootViewController){
        UIViewController *presentedViewController = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
        orientations = [presentedViewController supportedInterfaceOrientations];
    }

    return orientations;
} 
```

然后在视图控制器中

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait;
} 
```

# sql - 在sql server中访问多个结果集

> ID：14656072
> 
> 赞同：1
> 
> 时间：2013-02-01T22:24:31.510
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我正在使用 sql server 2005 并使用由其他人编写的旧存储过程。我只想调用该存储过程来获取数据而不是修改它。

问题是存储过程返回多个具有完全相同字段的结果集。只是数据有点不同。因此，当在前端调用该存储过程时，它被用于填充两个不同的数据表，这很好。

但现在我需要在 excel 中处理组合结果，因此没有多个数据表的优势。

基本上我想创建一个新的存储过程，它通过调用现有的存储过程返回两个结果的联合。我不想创建存储过程的另一个副本，因为每次更改其他存储过程时我都必须保持标签，我将不得不更改我的。

有没有办法访问 sql server 本身中的第二个结果集。

谢谢，

——阿比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T01:19:42.633

创建一个代理过程，将两个集合都放入一个临时表中，然后从中进行选择。

这是一个测试示例...

```
/*Create first proc that returns two data sets*/
IF OBJECT_ID('ReturningTwoDataSets') IS NOT NULL
BEGIN
    DROP PROCEDURE ReturningTwoDataSets
END
GO

CREATE PROCEDURE dbo.ReturningTwoDataSets
AS
BEGIN
    SET NOCOUNT ON

    SELECT  '1' AS [col1]
            ,'2' AS [col2]
            ,'3' AS [col3]

    SELECT '4' AS [col1]
            ,'5' AS [col2]
            ,'6'  AS [col3]

END
GO

/*  
    Create new proc that combines both data sets 
    into a temp table and returns a single dataset
*/
IF OBJECT_ID('ReturningOneDataSet') IS NOT NULL
BEGIN
    DROP PROCEDURE ReturningOneDataSet
END
GO

CREATE PROCEDURE dbo.ReturningOneDataSet
AS
BEGIN
SET NOCOUNT ON

    IF OBJECT_ID('TempDB..#OneDataSet') IS NOT NULL
    BEGIN
        DROP TABLE #OneDataSet
    END

    CREATE TABLE #OneDataSet
    (
        [col1]  VARCHAR(100)
        ,[col2] VARCHAR(100)
        ,[col3] VARCHAR(100)
    )

    INSERT INTO #OneDataSet
    (
        col1
        ,col2
        ,col3
    )
    EXEC ReturningTwoDataSets

    SELECT * FROM #OneDataSet

END
GO

/*Execute the old proc*/
EXEC ReturningTwoDataSets 
/*Execute the new proc*/
EXEC ReturningOneDataSet 
```

# mysql - MySQL - Select highest values from one column, then re-order based on a second column?

> ID：14656077
> 
> 赞同：0
> 
> 时间：2013-02-01T22:24:57.987
> 
> 标签：mysql, sql

I think what I need to do can be done using one query, but I'm really not sure - and I'd like to avoid performing a query and then sorting the resultant array if possible.

Basically, I have one table, which includes the following columns:

> product_name, price, sold

From these columns, I'd like to do the following:

*   Select the highest 20 values from the `'sold' column DESC`;
*   Order the 20 results by `price ASC`.

Sounds so simple, but can't figure out how to accomplish this to save my life, and SQL is not my strong point. If anyone could help out, it would be appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:27:34.217

您可以为此使用子查询：

```
select t.*
from (select t.*
      from t
      order by sold desc
      limit 20
     ) t
order by price asc 
```

你有一个查询可以做很多事情。我会打电话给这个。这是你要做的：

```
select t.*
from (select t.*
      from (<subquery
           ) t
      order by sold desc
      limit 20
     ) t
order by price asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-14T06:34:15.960

我认为这将满足您的需求：

```
select * from table
order by sold desc, price asc 
```

# linux - 检查参数是文件还是目录

> ID：14656080
> 
> 赞同：8
> 
> 时间：2013-02-01T22:25:04.983
> 
> 标签：linux, bash, shell, unix, ubuntu-12.04

我正在尝试检查参数是目录还是文件。我想在每个目录名之后放一个 / ，在每个可执行文件之后放一个 * 。我知道 ls 使用 -F 来获取此信息，但我无法在我的脚本中弄清楚这一点。

这是我的代码：

```
 echo -n "Please enter Directory name you wish to search: "
read dir

for filename in "/home/me/Desktop/$dir"/*

do

    if (-F $filename)
    then 
    echo $filename

    fi
done 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T22:28:04.823

`[ -f "$filename" ]`适用于文件，`[ -d "$dirname" ]`适用于目录。

# ruby-on-rails-3 - Aliasing a referenced relationship field in Mongoid

> ID：14656081
> 
> 赞同：11
> 
> 时间：2013-02-01T22:25:06.077
> 
> 标签：ruby-on-rails-3, mongoid

In the Mongoid model below, how do I alias the `belongs_to` relationship field?

```
class Contact
  field :nm, :as => :name, :type => String # field aliasing
  embeds_one :address, :store_as => :ad  # embedded document aliasing
  belongs_to :account # referenced relation doesn't support store_as
end 
```

I want to store the account id in a field called `ac` instead of `account_id`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-13T08:45:08.270

您可以使用 :foreign_key 来指定 mongodb 字段名称。

```
belongs_to :account, foreign_key: :ac 
```

但是，如果要使用 account_id，则需要声明其别名：

```
alias :account_id :ac 
```

或在 belongs_to 之前定义 account_id：

```
field :account_id, as: :ac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:52:58.737

Mongoid 允许通过使用 'inverse_of' 为关系使用任意名称

> 如果不需要逆向，例如belongs_to 或has_and_belongs_to_many，请确保在关系上设置:inverse_of => nil。如果需要逆，很可能无法从关系的名称中找出逆，您需要在关系上明确告诉 Mongoid 逆是什么。

因此，要使用 'ac' 作为别名，必须添加`inverse_of`：

```
class Contact
  field :nm, :as => :name, :type => String # field aliasing
  embeds_one :address, :store_as => :ad  # embedded document aliasing
  belongs_to :ac, class_name: 'Account', inverse_of: :contact
end

class Account
  has_one :contact, class_name: 'Contact', inverse_of: :ac
end 
```

# javascript - Plotting json on .JS

> ID：14656083
> 
> 赞同：0
> 
> 时间：2013-02-01T22:25:08.997
> 
> 标签：javascript, node.js

I am trying to plot some json data but for some reason code is not workingLet me show my code.

My json looks like this:

```
{"d1":[[1356912000000, 1],[1356825600000, 1],[1356739200000, 1],[1356652800000, 1],[1356566400000, 38],[1356480000000, 47],[1356393600000, 1],[1356307200000, 4],[1356220800000, 1],[1356134400000, 2],[1356048000000, 50],[1355961600000, 51],[1327017600000, 38],[1326931200000, 52],[1326844800000, 45],[1326758400000, 49],[1326672000000, 46],[1326585600000, 1],[1326499200000, 5],[1326412800000, 44],[1326326400000, 48],[1326240000000, 43],[1326153600000, 46],[1326067200000, 41],[1325980800000, 1],[1325894400000, 4],[1325808000000, 45],[1325721600000, 43],[1325635200000, 42],[1325548800000, 42],[1325462400000, 43]]} 
```

I am trying to plot with following code:

```
$(document).ready(function () {dashboard_A_chart.chartVisit ();});
dashboard_A_chart = {
    chartVisit: function () {
            var elem = $('#dashChartVisitors');
            var options = {
                    colors: ["#edc240", "#5EB95E"],
                    legend: {
                            show: true,
                            noColumns: 2, 
                            labelFormatter: null,
                            labelBoxBorderColor: false,
                            container: null,
                            margin: 8,
                            backgroundColor: false
                    },
                    xaxis: {
                            mode: "time",
                            font: {
                                    weight: "bold"
                            },
                            color: "#D6D8DB",
                            tickColor: "rgba(237,194,64,0.25)",
                            min: "1325462400000",
                            max: "1356912000000",
                            tickLength: 5
                    },
                    selection: {
                            mode: "x"
                    },
            };
    var d1 = []
        function onDataReceived(series) {d1 = [ series ];$.plot(elem, d1, options);}
        $.ajax({
            url: "../giga/data/dados1.json",
            method: 'GET',
            dataType: 'json',
            success: onDataReceived
        });             
   }, 
```

};

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:01:29.213

您正在尝试调用dashboard_A_chart.chartVisit()，它是一个需要在之前定义的对象文字的函数。

您正在chartVisit-函数内部创建elem 和options var，但尝试在不存在的onDataReceived-Function 中使用它。

看起来你只是将一些东西复制并粘贴在一起。看看这段代码，它应该可以工作：

```
$(document).ready(function () {

  var elem = $('#dashChartVisitors');
  var options = {
          colors: ["#edc240", "#5EB95E"],
          legend: {
                  show: true,
                  noColumns: 2, 
                  labelFormatter: null,
                  labelBoxBorderColor: false,
                  container: null,
                  margin: 8,
                  backgroundColor: false
          },
          xaxis: {
                  mode: "time",
                  font: {
                          weight: "bold"
                  },
                  color: "#D6D8DB",
                  tickColor: "rgba(237,194,64,0.25)",
                  min: "1325462400000",
                  max: "1356912000000",
                  tickLength: 5
          },
          selection: {
                  mode: "x"
          }
  };

  $.ajax({
      url: "../giga/data/dados1.json",
      method: 'GET',
      dataType: 'json',
      success: function (data) {
        $.plot(elem, data, options);
      }
  });

}); 
```

# php - 最后一个 xml 标记未在 xmlparser 中结束

> ID：14656087
> 
> 赞同：0
> 
> 时间：2013-02-01T22:25:29.050
> 
> 标签：php, xml-parsing

你好，我遇到了一个非常奇怪的问题：一组限制为 http 请求的结果，例如： [http://www.miafoto.it/iPhone/inarrivo/php/percorsoWithOption.php? partenza=Via%20Ugolino%20Vivaldi&arrivo=Via %20Della%20Corazzata&language=it&userLatitude=41.719070&userLongitude=12.311775](http://www.miafoto.it/iPhone/inarrivo/php/percorsoWithOption.php?partenza=Via%20Ugolino%20Vivaldi&arrivo=Via%20Della%20Corazzata&language=it&userLatitude=41.719070&userLongitude=12.311775) 生成您可以轻松阅读的 xml 代码，永远不会在其解析器中仅针对最后一个路径标记到达 didEndElement 回调。其他网址的结果，例如： [http ://www.miafoto.it/iPhone/inarrivo/php/percorsoWithOption.php?partenza=Via%20Ugolino%20Vivaldi&arrivo=Via%20Conca%20D](http://www.miafoto.it/iPhone/inarrivo/php/percorsoWithOption.php?partenza=Via%20Ugolino%20Vivaldi&arrivo=Via%20Conca%20D)'oro&language=it&userLatitude=41.719074&userLongitude=12.311768 像许多其他人一样，用最后一个路径标记正确终止，因此返回一个与非关闭解析不同的可用数组。真正奇怪的是，由同一个 php 脚本生成的 xml 输出的结构非常相似。有什么不同以及如何让 php 脚本或 xmlparser 产生可靠的行为？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:53:22.767

实际上问题出在 php 脚本中，原因尚不清楚，因为在一种情况下，标签在另一个标签内，而在另一种情况下则相反。

# java - 在有限的资源环境中测试 Java

> ID：14656088
> 
> 赞同：0
> 
> 时间：2013-02-01T22:25:33.840
> 
> 标签：java, memory, memory-management, limit

我正在编写将在内存很少的环境中运行的 java。我的机器有大量内存，所以我需要限制堆大小（这是我可以应用的唯一限制吗？）。我一直在 Eclipse 中使用“-Xmx100m”作为 VM 参数，但是当我运行应用程序时，我可以在任务管理器中看到使用的内存远高于 100MB。我用错了吗？

此外，我的大部分内存都分配在局部变量中。这些将被放在线程的堆栈上，它驻留在堆空间中，对吗？只是好奇，如果我的程序完全由静态方法组成，这些局部变量会分配到哪里呢？

谢谢！

编辑：我想我应该让我的问题更简单：我怎样才能为 jvm 可视化一个资源较少的环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:30:29.883

堆栈始终存在，并且可以在其上分配变量 - 无论它是否是静态方法。

我还多次观察到 jre 实际上使用的内存比 -Xmx 设置指定的要多。这在[这个问题中有详细讨论。](https://stackoverflow.com/questions/6527131/java-using-more-memory-than-the-allocated-memory)

# c# - 为什么我在尝试从 Microsoft.Web.Administration 连接 ServerManager 时收到 COMException？

> ID：14656095
> 
> 赞同：0
> 
> 时间：2013-02-01T22:26:19.183
> 
> 标签：c#, .net, iis

我想从远程 IIS 中检索站点列表：

```
using Microsoft.Web.Administration;

ServerManager serverManager = ServerManager.OpenRemote("myserver"); 
```

我收到 COMException

```
Retrieving the COM class factory for remote component with CLSID {2B72133B-3F5B-4602-8952-803546CE3344} from machine {ip} failed due to the following error: 80040154. 
```

有小费吗？

请，我不想要其他方法如何在不使用 Microsoft.Web.Administration 的情况下获取信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:34:51.367

我很怀疑，然后我发现了这个[链接](http://forums.iis.net/t/1162202.aspx/1)，这意味着我不能使用 IIS 6 就是这种情况......我想使用 Microsoft.Web.Administration 使用的内容仅适用于 IIS 7

# html - Bootstrap 3 Column Site {height: 100%;} 不工作

> ID：14656097
> 
> 赞同：0
> 
> 时间：2013-02-01T22:26:25.453
> 
> 标签：html, css, twitter-bootstrap, height

我知道这是一个常见的问题，我无法弄清楚我真的很愚蠢，但是我在 HTML 中有一个 3 列布局，我真的无法在我的生活中解决这个问题。

这是我网站的基本布局：

固定标题，每侧 1 个侧边栏，中间区域有内容。

这是我正在谈论的网站的模型：http: [//eitanrosenberg.com/tests/pop/bootstrap/](http://eitanrosenberg.com/tests/pop/bootstrap/)

一开始看起来还不错，但是当浏览器调整大小时，侧边栏变得非常小，并且有大量的空白。为什么是这样？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:17:34.293

这样看。

容器 div（和列 div）的 height:100% 从 body-element （其中的 100%）获取它们的高度，并且 body 元素的高度计算为 html 元素高度的 100%

然后（实际上）从浏览器窗口的当前高度（100%）计算 html 元素的高度。

所以你的盒子的高度都将被设置为与浏览器窗口的高度相匹配......

这正是您缩小浏览器窗口高度时所看到的！

因为：

一旦您的内容不再适合其容器的高度（即，当您缩小浏览器窗口时，您也会缩小所有容器的计算高度，最终净空将太小） - 溢出发生。“最高”框的内容将首先溢出，然后其部分内容将从其中溢出以在框下方可见（因为您不使用溢出：隐藏）。

然后浏览器将允许您滚动到框的底部（可以这么说），以便您能够看到“溢出框”的内容，但它不会调整容器的高度 - 框滚动时仍将保持与浏览器窗口相同的高度...

因此，在此示例中，背景图案将始终是浏览器窗口的 100% 的高度（当高度缩小到低于该高度时，与最高内容的高度不匹配）...

解决此问题的一种方法 - 是使用 Javascript 调整框的高度（计算最高列的高度并将其设置为容器和框高度的绝对值 - 每次页面调整大小时）

...或者您可以在容器和列上分别使用“display：table”和“display：table-cell”作为此特定布局宽度/媒体查询的解决方法（覆盖 Bootstrap 网格 CSS）...

希望这可以帮助！祝你好运！

# ruby-on-rails - 尝试使用 pik 在 ruby 1.9.2 上安装 rails gem 时收到：“错误：无法构建 gem 原生扩展”

> ID：14656098
> 
> 赞同：3
> 
> 时间：2013-02-01T22:26:28.280
> 
> 标签：ruby-on-rails, ruby, windows, pik

我试图将我的本地数据库推送到 Heroku 并收到此错误：

`...Taps Server Error: PGError: ERROR: time zone displacement out of range:...`

一些谷歌搜索后来我发现这个错误不会发生`ruby 1.9.2`并且（因为在 Windows 上）我必须安装`pik`1.9.2 和 1.9.3 一起运行。所以我安装了 pik 和 ruby​​ 1.9.2。

但是，当我尝试安装时，`rails`出现`1.9.2`此错误：

`...ERROR: Failed to build gem native extension...`

经过大量的谷歌搜索后，我遇到了以下问题：

*   不要费心使用 windows 进行 ruby​​/rails 开发:(
*   与devkit有关吗？
*   或者安装二进制工具包版本的rails？
*   自己编译

任何帮助深表感谢！

编辑：

完整的错误堆栈跟踪：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
        ERROR: Failed to build gem native extension.

C:/Ruby192/bin/ruby.exe extconf.rb
creating Makefile

make
gcc -I. -IC:/Ruby192/include/ruby-1.9.1/i386-mingw32 -I/C/Ruby192/include/ruby-1.9.1/ruby/backward -
I/C/Ruby192/include/ruby-1.9.1 -I. -DJSON_GENERATOR    -O3 -g -Wextra -Wno-unused-parameter -Wno-par
entheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long -O3 -Wall -O
0 -ggdb  -o generator.o -c generator.c
make: gcc: Command not found
make: *** [generator.o] Error 127

Gem files will remain installed in C:/Ruby192/lib/ruby/gems/1.9.1/gems/json-1.7.6 for inspection.
Results logged to C:/Ruby192/lib/ruby/gems/1.9.1/gems/json-1.7.6/ext/json/ext/generator/gem_make.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:06:58.740

错误消息的相关部分是`gcc: Command not found`；所以编译器无法在本地编译代码。

如果您已经`gcc`在您的机器上安装了某个地方，请确保它包含在`PATH`.

检查[如何在 Windows 7 机器上安装 gcc？](https://stackoverflow.com/questions/6394755/how-to-install-gcc-on-windows-7-machine)有关如何在 Windows 上安装 gcc 的指导。

# php - fopen 与 cron 作业

> ID：14656099
> 
> 赞同：4
> 
> 时间：2013-02-01T22:26:31.520
> 
> 标签：php, cron

有人可以告诉我我做错了什么吗？我有一个 php 脚本，它应该使用 cron 作业执行，从数据库中提取数据并将其放入 csv 文件中。当我从浏览器运行它时，它工作得很好，所以我确定我的查询是正确的。但是，当我使用 cron 作业时，它返回“未**指定输入文件。** ”并且不写入文件。

这是我的代码：

克朗：

> /home/ACCOUNT_NAME/public_html/directory/report.sh

*报告.sh*

```
php -q /home/ACCOUNT_NAME/public_html/directory/report.php
php -q /home/ACCOUNT_NAME/public_html/directory/report_mail.php 
```

*报告.php*

```
<?php

    $con = mysql_connect("localhost", "my_un", "my_pw") ;

    if(!$con){
        die('Could not connect: ' . mysql_error()) ;
        }
    mysql_select_db("my_db", $con) ;

if (!function_exists('fputcsv')){
        function fputcsv($objFile,$arrData,$strDelimiter=',',$strEnclose='"') {
            $strNewLine="\n";
            $strToWrite = '';
            foreach ($arrData as $strCell){
                //Test if numeric
                if (!is_numeric($strCell)){
                    //Escape the enclose
                    $strCell = str_replace($strEnclose,$strEnclose.$strEnclose,$strCell);
                    //Not numeric enclose
                    $strCell = $strEnclose . $strCell . $strEnclose;
                }
                if ($strToWrite==''){
                    $strToWrite = $strCell;
                } else {
                    $strToWrite.=  $strDelimiter . $strCell;
                }
            }
            $strToWrite.=$strNewLine;
            fwrite($objFile,$strToWrite);
        }
}

// CUT - MY QUERY HERE

$fp = fopen("/reports/report.csv" , "w+");

foreach ($list as $line) {
    fputcsv($fp, split(',', $line));
}
?> 
```

csv 文件应存储在

> /home/ACCOUNT_NAME/public_html/directory/reports/report.csv

我在这里想念什么？TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:30:27.967

您没有保存到正确的目录。而是做

```
$fp = fopen(__DIR__ . "/reports/report.csv" , "w+"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T22:34:38.253

问题是，当您以 开始`fopen()`参数时`/`，您将转到服务器根目录，而不是 Web 根目录。因此，您要么需要提供`fopen()`文件的完整路径，要么像这样动态检索当前目录：

```
$this_directory = dirname( __FILE__ );
$fp = fopen($this_directory . "/reports/report.csv" , "w+"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:31:01.723

```
$fp = fopen("/reports/report.csv" , "w+"); 
```

这不会写入您期望文件去的地方。它将尝试`reports`在文件系统根目录下创建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T23:19:10.493

这个答案可能离题，但 MySQL 能够使用“INTO OUTFILE”直接将查询结果输出到 CSV 文件。

*注意*MySQL 应该与所需的输出文件位置在同一台服务器上运行

请参见此处的示例： [MySQL 导出到 outfile : CSV escaping chars](https://stackoverflow.com/questions/1119312/mysql-export-into-outfile-csv-escaping-chars)

# c# - 从 Visual Studio 中的第二个项目引用通用处理程序

> ID：14656103
> 
> 赞同：0
> 
> 时间：2013-02-01T22:26:53.863
> 
> 标签：c#, javascript, jquery, asp.net, .net

我有两个项目的解决方案。首先是Web，其次是其他东西（SecondProject）。在第一个项目（网络）中，我有带有 AJAX 函数的 aspx 页面和 jquery 脚本，这些函数需要第二个项目中的引用处理程序。怎么做？代码示例：

```
 $.ajax({
                    type: "POST",
                    url: '<%= ResolveUrl("HandlerInSecondProject/GetDataBySample.ashx?q=' + request.term + '") %>',
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (data) {
                        var obj = data;
                        response($.map(obj, function (item) {
                            return {
                                label: item.Term,
                                id: item.ID
                            }
                        }));
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:52:26.517

第二个项目也应该是一个 Web 项目，否则处理程序将无法由 ASP.NET 正确托管。一旦第二个项目是 Web 项目，URL

```
url: '<%= ResolveUrl("HandlerInSecondProject/GetDataBySample.ashx?q=' + request.term + '") %>', 
```

应该只引用第二个 Web 项目上处理程序的位置。

然后，您只需要告诉您的处理程序返回 json，`ProcessRequest`方法：

```
context.Response.Write(
    jsonSerializer.Serialize(
        new
        {
            Term = "My Term",
            ID = 22
        }
    )
); 
```

当你从你的 jQuery 中调用它时，你应该将结果返回为 json 并且能够随心所欲地使用它。

# sql - 在 SQL Server 2008 R2 中计算平均值的窗口函数

> ID：14656104
> 
> 赞同：0
> 
> 时间：2013-02-01T22:27:09.443
> 
> 标签：sql, sql-server, sql-server-2008-r2, average, partitioning

我对窗口函数没有太多经验，我必须使用一个来进行平均计算，这是我的代码：

```
 AVG(b.TotalSilkHrs) OVER(partition BY b.TECHNICIANCODE
    ORDER BY b.rankID 
    ROWS BETWEEN CURRENT ROW and 3 FOLLOWING) AS MovingAvg 
```

我计算在子查询中计算的总和的平均值。它给了我错误：

> 消息 102，级别 15，状态 1，第 24 行“ROWS”附近的语法不正确。

为什么我会出错？我使用了从您的网站获得的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:43:51.780

您的原始语法仅适用于 SQL Server 2012，适用于旧版本试试这个

```
;WITH AVGCTE AS
(
     SELECT *, 
     ROW_NUMBER() OVER(partition BY TECHNICIANCODE ORDER BY rankID) Rn 
     FROM TableA
)

SELECT A.*, B.AVG_COL
FROM AVGCTE A
CROSS APPLY 
(
   SELECT x.AVG(TotalSilkHrs) AVG_COL 
   FROM AVGCTE x WHERE x.Rn BETWEEN A.rn and a.rn + 2  
   AND  A.TECHNICIANCODE  = x.TECHNICIANCODE        
) B 
```

# sql - 数据比较查询

> ID：14656105
> 
> 赞同：0
> 
> 时间：2013-02-01T22:27:15.257
> 
> 标签：sql, ms-access

我正在为我们的会计部门开展一个项目，但我遇到了以下查询。我们在 MSAccess 数据库中有两个表，其中包含税收数据。该过程是我们每月收到一份包含新税务信息的文件。数据更改的唯一时间是税务更新，但政府实体。因此，在任何给定月份，我们都可以进行 5 次更改或 5000 次更改。

以下查询的目标是将新数据与上个月的数据（在两个单独的表中）进行比较。但是，系统提示我输入条件，但我不知道为什么。理想情况下，查询将运行并返回两个表之间的任何差异。

```
SELECT newtax.[zipcode],
       newtax.city,
       newtax.county,
       newtax.state,
       newtax!combinedsalestax - oldtax!combinedsalestax AS Change,
       newtax.combinedsalestax,
       oldtax.combinedsalestax
FROM   oldtax
       INNER JOIN newtax
               ON ( oldtax.[zipcode] = newtax.[zipcode] )
                  AND ( oldtax.city = newtax.city )
                  AND ( oldtax.county = newtax.county )
WHERE  (( ( [newtax]![combinedsalestax] - [oldtax]![combinedsalestax] ) <> 0)); 
```

我也愿意就如何完全修改此查询提出建议，因为我假设有更好的方法。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:44:05.103

您应该去掉感叹号，它们用于控件，而不是字段。检查 null (Nz) 可能是个好主意。

```
SELECT newtax.[zipcode],
       newtax.city,
       newtax.county,
       newtax.state,
       newtax.combinedsalestax - oldtax.combinedsalestax AS Change,
       newtax.combinedsalestax,
       oldtax.combinedsalestax
FROM   oldtax
       INNER JOIN newtax
               ON ( oldtax.[zipcode] = newtax.[zipcode] )
                  AND ( oldtax.city = newtax.city )
                  AND ( oldtax.county = newtax.county )
WHERE  Nz(newtax.combinedsalestax,0) <> Nz(oldtax.combinedsalestax,0) 
```

如果仍然提示您输入参数，则很可能您的字段名称拼写错误。

# json - AngularJS：将 JSON 对象传递给模态

> ID：14656106
> 
> 赞同：0
> 
> 时间：2013-02-01T22:27:23.337
> 
> 标签：json, angularjs, modal-dialog

我有一个模式来显示一些用户信息，很像个人资料：

```
<!-- Modal -->
 <div id="modalBoy-z" class="modal hide fade in" style="display: none; ">  
   <div class="modal-header">  
     <a class="close" data-dismiss="modal">×</a>  
     <h3>User Profile</h3>  
 </div>
    <div ng-controller="">  
      <h3>Name: </h3>  
      <h3>Email: </h3>
      <h3>Join Date: </h3>
      <h3>Role: </h3>
      <h3>Status: </h3>
    </div>  
    <div class="modal-footer">  
     <a href="#" class="btn" data-dismiss="modal">Close</a>  
    </div> 
```

这是用户信息的 JSON 对象：

```
{
    "id": "8311...",
    "meta": {
      "created": 1355860257840,
      "updated": 1355860257840
    },
    "profile": {
      "id": "https://project.dev:0000/profiles/admin",
      "type": "Profile",
      "vocSlug": "admin",
      "email": "admin@getsomething.com",
      "label": "System Administrator",
      "vocRole": [
        "role_administrator",
        "system_administrator",
        "profile_administrator"
      ],
      "Status": "active"
    }
  }, 
```

如何将 JSON 对象显示到模态 div 中？我的 ng-controller 会进入 div 吗？在过去的 3 周里，我一直在使用 AngularJS，并且仍然习惯了它的 MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:55:22.217

It is really easy to have two way data binding in AngularJS. However, generally speaking, only scope data is available for the data binding. I would highly recommend you to go through the AngularJS tutorial series.

[http://docs.angularjs.org/tutorial/](http://docs.angularjs.org/tutorial/)

Just go through all first few pages of the documentation and you will find the basic information to get started. Your enthusiasm to get things done is understandable but reading documentation is equally important.

Currently for your problem here is the simple solution. [http://plnkr.co/edit/JG1bDjZgp9gsSiKSEmJB](http://plnkr.co/edit/JG1bDjZgp9gsSiKSEmJB)

# php - 从数据库中获取数据以选择下拉框的默认值？

> ID：14656107
> 
> 赞同：0
> 
> 时间：2013-02-01T22:27:28.630
> 
> 标签：php, sql

所以我有一个表单的选择选项......它是 php 回声的一部分，这就是使用单引号的原因。

```
<select>
          <option value='1'>1</option>
          <option value='2'>2</option>
          <option value='3'>3</option>
          <option value='4'>4</option>
          <option value='5'>5</option>
          <option value='6'>6</option>
          <option value='7'>7</option>
          <option value='8'>8</option>
          <option value='9'>9</option>
</select> 
```

这很好，我可以选择东西....但是我想从数据库中获取数据以设置默认值，具体取决于它在数据库中的记录（我不想从数据库中填充整个下拉列表!)，但是保留下拉列表，以便如果数据库中的选项不同，用户仍然可以选择其他选项。

我可以使用此代码从数据库中获取数据，该代码有效...但不知道如何让它做我想让它做的事情...

```
<option value=". $row['1'] .">". $row['1'].    "</option> 
```

有任何想法吗？

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:32:18.257

```
$selected = 3;
$i = 0;
while( $i < 10 ){
 $i++;

echo "<option value='". $row[ $i ] ."' 
 ".($row[ $i]==$selected?'selected="selected"':"").">". $row[ $i ]."</option>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:54:31.877

首先，您使用查询从数据库中提取默认值（我假设它是用户对电影或文章或其他内容的评分），然后循环遍历 10 个不同的可能值。当该值与默认值匹配时，它会将 selected='selected' 添加到字符串中。

```
echo "<select>";
$result = mysqli_query($db, "SELECT rating FROM movies WHERE user='$user'");
$row = mysqli_fetch_object($result);
for($i = 1;$i => 10;$i++){
    if($i == $row->rating){
        echo "<option selected='selected' value='$i'>$i</option>";
    }else{
        echo "<option value='$i'>$i</option>";
    }
}
echo "</select>"; 
```

它与另一个答案中的功能相同，但这应该更容易阅读和理解。（无论你像我一样使用 for 循环，还是像 John 那样使用 while 循环，都没有关系，它们做同样的事情）

更新：删除你正在写的回声并放入我的代码，记得修改 MySQL 查询。

# jquery - 从 onmouseover 激活命令

> ID：14656108
> 
> 赞同：0
> 
> 时间：2013-02-01T22:27:30.927
> 
> 标签：jquery

我写了以下链接：

```
<li><a href="#" onmouseover="$("#Layover_1").hide().fadeIn("slow");"
    onmouseout="document.getElementById('#Layover_1').hide()">Layover </a></li> 
```

此 div 上的显示设置为无。我使用了 jsfiddle 并且淡入淡出在那里加载，但我无法让它在我的网站上同样工作。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:32:21.643

确实有问题的嵌套引号。您应该在`onmouseover`属性值中使用单引号，以免过早关闭`onmouseover`代码：

```
<li><a href="#" onmouseover="$('#Layover_1').hide().fadeIn('slow');"
onmouseout="$('#Layover_1').hide()">Layover </a></li> 
```

另外，如前所述，`document.getElementById`它不是 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:35:39.790

我建议使用 jQuery 的[hover()](http://api.jquery.com/hover/)：

```
$('a#the_link').hover(
    function() { $("#Layover_1").stop(true,true).fadeIn("slow"); },
    function() { $("#Layover_1").stop(true,true).hide(); }
);

<li><a href="#" id="the_link">Layover</a></li> 
```

[在这里摆弄它](http://jsfiddle.net/jmEmB/)

# vbscript - 在 QTP 中连续运行 VBScript

> ID：14656111
> 
> 赞同：1
> 
> 时间：2013-02-01T22:27:52.097
> 
> 标签：vbscript, qtp

我有一个包含许多子例程和函数的 qtp 脚本。我正在自动化应用程序的测试。该应用程序需要针对不同的数据集进行多次测试。现在脚本读取第一组数据并继续运行，直到脚本用完。一旦脚本到达结尾，我想不出任何让脚本回到脚本顶部的东西。如果一切都在一个主要方法下，那将很容易。没有 main 方法，只有多个子程序和函数从脚本的顶部到底部运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:39:32.683

听起来好像您正在尝试以数据驱动您的测试。如果数据表中有多行，您可以指示 QTP 为数据表中的每一行运行一个操作（或整个测试）。

要为测试执行此操作，请右键单击测试流程中的测试，选择设置并选择在所有行上运行单选按钮。

![设置测试迭代](../Images/0acb8da19e972474815d6637ccc72fa1.png) 对于等效的操作，请右键单击 -> 操作调用属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:40:36.550

我通常使用如下脚本：

```
Option Explicit : main

Sub main()
    Do
        ' This initializes a test for me. The test resides in an
        ' homebrew AutomatedTest object     
        Set automatedTest = [new AutomatedTest]
        automatedTest.Project = "XYZ"
        automatedTest.PickupFolder = "C:\TestScenarios\"
        automatedTest.Initialize

        ' This line starts my test
        automatedTest.Start

        Set automatedTest = Nothing

    Loop Until (CreateObject("WScript.Shell").Popup("Next file will be executed in 10 seconds." & vbNewLine & _
            "Press OK to execute immediately or Cancel to stop Autorun.", 10, "Autorun", 1 or 32 or 4096) = 2)  '2 = cancel
End sub 
```

您想如何实现它，您可以自己看到，`Do`/`Loop`操作提供了一个 continue 循环，而`WshShell.Popup`提供了一种在测试之间取消并在一定时间后没有采取任何操作的情况下继续的方法。如果您想在无人看管的情况下运行测试，这会派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T22:46:38.060

尝试 1\. 在 Test->Settings->Run 中运行所有行选项或 2\. 在您的测试中，

添加以下代码 totalrows=Datatable.getrowcount

for row=1 to totalrows //整个测试代码

# ruby-on-rails - 用户签名？

> ID：14656115
> 
> 赞同：0
> 
> 时间：2013-02-01T22:28:32.253
> 
> 标签：ruby-on-rails, ruby

我对 Ruby on Rails 还是很陌生。我只对设计和 rails/ruby 方法有点熟悉。

我有一个登录页面。我有一个检查用户是否登录的页面；如果是，则显示一个部分，如果不是，则显示另一个部分；

```
<%= render(user_signed_in? ? '/layouts/signed_in_header' : '/layouts/signed_out_header') %> 
```

现在，只有一个 html.erb 例外，我怎样才能拥有上述内容？有没有类似 Is_not 方法的东西？

如果用户已登录并且他所在的页面是 not_here_please，我不希望显示 signed_in_header。如果用户已登录，它应该显示在每隔一个页面上。

有没有类似的东西：

```
<%= render(user_signed_in? ? and page_is_not 'not_here_please'
'/layouts/signed_in_header' : '/layouts/signed_out_header') %> 
```

谢谢你的帮助，

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:49:11.937

正如马克西莫夫所说：

```
<%= render((user_signed_in? && controller.action_name != 'not_here_please') ? '/layouts/signed_in_header' : '/layouts/signed_out_header') %> 
```

随意使用与`controller.action_name`您的情况不同的任何东西。我只是认为这是代表您所要求的最合适的方式。

# python - 将子流程合并到现有脚本中

> ID：14656116
> 
> 赞同：0
> 
> 时间：2013-02-01T22:28:33.627
> 
> 标签：python, subprocess

我有一个现有的 python 脚本，我现在想修改它以运行更多的线程（子进程）。出于本示例的目的，假设修改为同时运行 3 个线程。

顺便说一句，该脚本只不过是向 Web 服务器生成客户端请求并测量响应时间。

```
#!/usr/bin/python26

from library.rpc.client import EllisClient

ec = EllisClient(ellis_user='fred', ellis_pass='flintstone')
params={'domain_name':'alestel.com','mig_name':'terramexico2'}

def test_response():
    L = []
    L = ec.get_full_domain(params)

if __name__ == '__main__':
    from timeit import Timer

    t = Timer("test_response()", "from __main__ import test_response")
    print t.timeit(number=10) 
```

作为一个相对的菜鸟，文档对我来说不是很清楚。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:58:20.757

如果您想显式控制正在运行的进程，您需要[`multiprocessing.Process`](http://docs.python.org/2/library/multiprocessing.html#the-process-class)：

```
def test_3_parallel_responses():
    procs = [multiprocess.Process(target=test_response) for _ in range(3)]
    for proc in procs:
        proc.start()
    for proc in procs:
        proc.join() 
```

这里的所有都是它的。

线程和进程之间存在各种差异，但最大的区别是您不会在进程之间隐式共享值；您必须传递它们（通过启动`args`和返回值，或通过 a`Queue`或某些外部方式，如套接字或管道）或显式共享它们（通过 a `Value`or`Array`或某些外部方式，如文件）。

对于更实际的用例，您通常不希望直接控制进程在做什么；您想创建一个进程池，然后将作业排队等待下一个空闲的进程完成。为此，您需要[`multiprocessing.Pool`](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)或[`concurrent.futures.ProcessPoolExecutor`](http://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor)。后者稍微简单一些，但需要 Python 3.2 或第三方库，所以我将展示前者：

```
def test_3_pooled_responses():
    pool = multiprocessing.Pool(3)
    for i in range(3):
        pool.apply(test_response)
    pool.close()
    pool.join() 
```

更常见的是，您希望将参数实际传递给函数。在最简单的情况下，这实际上使事情变得更简单——如果您可以将顺序版本编写为列表推导或`map`调用，则可以将并行版本编写为`pool.map`调用。假设您有一个`test_response(host)`返回一些值的调用，并且您想在`host1`、`host2`和上运行它`host3`：

```
def test_3_pooled_responses():
    pool = multiprocessing.Pool(3)
    responses = pool.map(test_response, ['host1', 'host2', 'host3'])
    pool.close()
    pool.join() 
```

# c# - 拖放 kinect

> ID：14656121
> 
> 赞同：0
> 
> 时间：2013-02-01T22:29:10.657
> 
> 标签：c#, kinect, kinect-sdk

我正在使用 SDK 1.5 开发 C# 应用程序。

我有两个目标：

1.  我想拖动形状，比如抓住然后放开。
2.  如果可能的话，我需要一个手势来抓取，比如“关闭手指”来拖动并打开五个手指来放手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T18:00:34.857

您的窗口中需要一个 kinect 区域，然后您可以处理 HandPointers。这些是可以检测您的手是否被握住（拳头）的变量。就像邪恶壁橱猴子建议的那样，我会查看 kinect SDK 中的示例项目。我一直在从事一个处理识别手势的项目，并使用了这些演示中的大量代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:57:09.713

> 我想拖动形状，比如抓住然后放开。

[你试过什么？](http://whathaveyoutried.com)

[Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)示例中有一些示例，包括“形状游戏”，它向您展示了如何使用骨架数据与屏幕上的对象进行交互。这将是您了解如何从骨架中提取数据并将其应用于应用程序的坐标系的一个很好的起点，在该坐标系中可以与其他对象进行交互。

“基本交互”示例也是一个很好的地方，尽管要复杂得多。

> 如果可能的话，我需要一个手势来抓取，比如“关闭手指”来拖动并打开五个手指来放手。

在捕捉全身骨骼时，Kinect 不够精确，无法知道手指的状态。它知道您的手在哪里，仅此而已——不知道您的拳头是张开、闭合还是介于两者之间的任何状态。

你没有描述抓取形状的原因，所以我不能建议一个手势来“捕捉”和“释放”它们。使用另一只手是一种选择——例如，举起另一只手来“捕捉”，放下来“释放”。还有其他几种方法可以实现这一点。

# regex - 正则表达式 - 搜索任何文本

> ID：14656127
> 
> 赞同：0
> 
> 时间：2013-02-01T22:29:39.570
> 
> 标签：regex, full-text-search, flv

如果我有这个正则表达式：`(\&file=[A-Z]{4}\d{4}\/)`

但我有这个搜索文本：`&file=PSYC4534/SecretSuccess_512k.flv`.flv 的文件名可以是任何内容。

如何完成上述表达式以包含 ANY filename.flv？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:40:27.660

你可以使用

```
(\&file=[A-Z]{4}\d{4}\/).*?\.flv(\s|$) 
```

`.*?\.flv(\s|$)`将匹配任何字符（换行符除外）零次或多次，尽可能少，直到`.flv`出现后跟空格字符或字符串结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:32:29.793

类似的东西`[a-zA-Z_0-9]+\.flv`将匹配方括号和扩展名内的一个或多个字符序列。我输入了字母和数字以及下划线。您可能需要更多，但不要添加点/句号。

将此添加到表达式的末尾，`(\&file=[A-Z]{4}\d{4}\/)`但在括号内。

# jquery - if 语句运行失败

> ID：14656129
> 
> 赞同：1
> 
> 时间：2013-02-01T22:29:52.920
> 
> 标签：jquery, if-statement

我有一个似乎不太有效的 if 语句，我不完全确定为什么，想知道是否有人看到了我没有看到的东西

```
$(".nav_btn, .bow_nav_btn").click(function () {
    var jthis = this;

    if ($(jthis).hasClass("bow_nav_btn")) {
        $('.bow_nav_btn').removeClass('bow_nav_selected');
        $('.bow_nav_btn').addClass('bow_nav_unselected');
        $(this).removeClass('bow_nav_unselected');
        $(this).addClass('bow_nav_selected');
    } else if ($(jthis).hasClass("bow_unselect")) {
        $("bow_nav").slideUp();
    } else($(jthis).hasClass("bow_select")) {
        $("bow_nav").slideDown();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:33:01.570

您的最后一个`else`应该是 an`else if` *或者*您应该删除条件并将其写为：

```
else {
   //snip
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:35:39.690

您似乎最后也有无效的选择器，以及已经提到的`else if`问题。

整个代码应该类似于：

```
$(".nav_btn, .bow_nav_btn").click(function () {
    var jthis = this;

    if ($(jthis).hasClass("bow_nav_btn")) {
        $('.bow_nav_btn').removeClass('bow_nav_selected');
        $('.bow_nav_btn').addClass('bow_nav_unselected');
        $(this).removeClass('bow_nav_unselected');
        $(this).addClass('bow_nav_selected');
    } else if ($(jthis).hasClass("bow_unselect")) {
        $(".bow_nav").slideUp(); // <-- .bow_nav instead of just bow_nav
    } else if($(jthis).hasClass("bow_select")) { //<-- aded if to else
        $(".bow_nav").slideDown(); // <-- .bow_nav instead of just bow_nav
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:33:27.730

您似乎在最后一个子句中缺少`if`关键字。`else`

```
} else($(jthis).hasClass("bow_select")) { 
```

应该：

```
} else if ($(jthis).hasClass("bow_select")) { 
```

# .net - String.format() 必须声明文化不变性吗？

> ID：14656130
> 
> 赞同：1
> 
> 时间：2013-02-01T22:29:57.437
> 
> 标签：.net, casting, cultureinfo

最近的新工作，并从客户那里收到有关软件错误的问题。错误是“从字符串 '0.5' 到类型 'double' 的转换无效。”

我相信我已经找到了违规的路线。因为客户在法国并且他的计算机设置都是法语（编号系统，语言，......），所以“0.5”不能转换为“0,5”的法语数字版本法语系统没有小数他们人数的任何地方。因此，如果 string.format 看到“0.5”，它将不知道该怎么做，因为没有 '.' 在法国文化环境中被塑造成双倍的角色。我在这里吗？

```
context.Append(String.Format("{0} {1} exceeds fine {2} limit of {3:N0}", _
       context.OccupancyState, context.Size, _
       Reg.Alert.ToLower, context.Limit)) 
```

其中 context.Size 保存“0.5”字符串。

format.string 是否考虑了文化设置，还是我在这里遗漏了什么？

编辑：

刚刚在法语 Windows VM 上尝试过，并且（不幸的是）它能够成功地将其解析为“0,5”......所以也许这不是问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:35:49.817

```
CultureInfo culture = new CultureInfo("en-US");
context.Append(String.Format(culture, "{0} {1} exceeds fine {2} limit of {3:N0}", _
       context.OccupancyState, context.Size, _
       Reg.Alert.ToLower, context.Limit)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:37:05.197

字符串格式化和解析确实考虑了计算机的文化/语言环境，因此，如果您知道所有数字都将以小数点输出并以相同格式输入，那么您将必须将不变的文化传递给格式化和解析方法。

虽然你说`context.Size`持有**字符串**“0.5”。这没有意义，因为它是第二个参数，因此将替换`{1}`string.Format 中的。

可能出错的是代码试图以`context.Limit`小数形式输出`{3:N0}`格式。如果*此*字符串为“0.5”，那么这将导致法语机器（或任何带有十进制逗号的 PC）上的错误，因为这不是具有该格式的有效数字。

因此，要么将您的数字存储为数字，要么不要尝试将您已经格式化的字符串格式化为数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:34:50.467

您需要先将字符串转换为双精度，否则`String.Format`只会连接字符串而不进行任何格式化。

```
double d = double.Parse(context.Size, CultureInfo.InvariantCulture);
string formatted = String.Format("{0} {1} exceeds fine {2} limit of {3:N0}"
                                 , context.OccupancyState, context.Size
                                 , Reg.Alert.ToLower, context.Limit); 
```

现在`string.Format`将`System.Globalization.CultureInfo.CurrentCulture`在它再次将双精度格式设置为字符串时使用。

# css - 如何从单个图像中使用 css 精神显示向导

> ID：14656135
> 
> 赞同：3
> 
> 时间：2013-02-01T22:30:25.850
> 
> 标签：css

![**在此处输入图片描述**](../Images/181a1ab35beea3b270bc48a7b887f700.png)

我现在有上面的图片，使用 css 如何显示如下图片。

![在此处输入图像描述](../Images/cf983a1b7a3f4369df2a39929c98d6af.png)

我对此完全陌生。我试过这个：

```
.step{
    background-image: url(images/myimage.png);
    background-repeat: no-repeat;
    background-position: 40px -40px;
} 
```

从上面我可以看到灰色图像如何将橙色图像覆盖在灰色上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:28:35.093

我认为您不能像问题中那样使用单个类和单个元素来做到这一点，而不是使用*该*图像（因为圆圈有边框，因为里面的数字等）。

您实际上*可以*做的是使用[`CSS3 multiple background images`](http://www.w3.org/TR/css3-background/#backgrounds)功能（看看[一篇关于它的好文章](http://www.css3.info/preview/multiple-backgrounds/)），在您的情况下，将两次*相同*的图像放置在两个不同的地方，一个在另一个；

这是你可以走多远：http: [//jsfiddle.net/APNZL/](http://jsfiddle.net/APNZL/)

如您所见，有几个缺点：数字应该以另一种方式添加，中间的圆圈正在切割灰线，最后一个圆圈需要被div宽度限制以覆盖下一条灰线......

* * *

但是您可以使用两个不同的 div 来做到这一点，一个带有空背景图像，另一个带有“完整”的一个，使用绝对位置将一个放在另一个上，限制第一个图像的宽度，并使用 z-index.. .

> **工作演示**：http: [//jsfiddle.net/APNZL/1/](http://jsfiddle.net/APNZL/1/)

代码（您将只使用一个容器并将类更改为第一个 div，这只是一个向您展示所有可能性的*测试用例）：*

```
<div class="container">
    <div class="nosteps"></div><div></div>    
</div>

<div class="container">
    <div class="onestep"></div><div></div>    
</div>

<div class="container">
    <div class="twosteps"></div><div></div>    
</div>

<div class="container">
    <div class="threesteps"></div><div></div>    
</div>

.container{        
    margin: 20px;
    width: 230px;
    position: relative;
    height: 40px;    
}
.container div{    
    width: 230px;
    height: 40px;
    background-image: url(http://i.stack.imgur.com/6jKtl.png);
    background-repeat: no-repeat;
    background-position: 0px 0px;
    position:absolute;
    left:0;
    top: 0;
    z-index: 2;
}
.container div + div{
    z-index: 1;
    background-position: 0px -40px;
}

div.nosteps {
    width: 0px;    
}
div.onestep {
    width: 70px;    
}
div.twosteps {
    width: 140px;    
}
div.threesteps {
    width: 230px;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:42:15.793

您可能的目标是制作那些可点击的链接。

您想要的第一件事是创建一个适合您的设计的 html 结构器。在你的情况下：

```
<div class="spirit">
    <div class="button1"></div>
    <div class="button2"></div>
    <div class="button3"></div>
</div> 
```

然后您可以使用以下设置每个按钮的样式

```
.spirit .button1 {display:inline-block;background:url('http://i.stack.imgur.com/6jKtl.png'); width:70px; height:40px; background-position:0px 0px;overflow:hidden;} 
```

当有人单击链接或将鼠标悬停在链接上时..您需要执行以下操作：

```
.spirit .button1:hover, .spirit .button1:active {display:inline-block;background:url('http://i.stack.imgur.com/6jKtl.png'); width:70px; height:40px; background-position:0px 0px;overflow:hidden;} 
```

您可以使用背景位置控制图像位置

更多信息可以在这里找到：[来源](http://www.w3schools.com/cssref/pr_background-position.asp)

# jquery - 如何使用 jQuery 检查是否存在 Rails.cache 键

> ID：14656138
> 
> 赞同：2
> 
> 时间：2013-02-01T22:30:31.550
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, caching

我正在尝试复制以下 Rails 方法，但使用 JQuery：

```
Rails.cache.exist?("ped_basic") 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T00:07:32.203

我仍在尝试使用最佳方法来执行此操作，但我最终使用[“Gon”gem](https://github.com/gazay/gon)在我的控制器方法 (before_filter) 中创建了一个变量，该变量可以被 Rails 和 jQuery 引用。

在我的控制器方法中，我将缓存键设置为 gon.variable 值，然后可以通过相同的 gon.variable 名称访问 jQuery 中的变量。

换句话说：

```
#Controller method
before_filter :set_gon_vars

def set_gon_vars
  gon.variable1 = Rails.cache.exist?("cache1")
  gon.variable2 = Rails.cache.exist?("cache2")
  gon.variable3 = Rails.cache.exist?("cache3")
end 
```

通过简单地引用相同的 gon.variable 名称，可以在我的咖啡脚本代码中访问这些变量。

# asp.net - 在 asp.net 中更改电子邮件发件人

> ID：14656140
> 
> 赞同：0
> 
> 时间：2013-02-01T22:30:35.610
> 
> 标签：asp.net, email

我从我的网站发送电子邮件，我想在邮箱中为其设置特殊标题，如下图所示。当我发送电子邮件时，它会显示它的地址作为标题。如何在从 asp.net 发送的电子邮件中显示特殊术语作为标题。例如我想展示这个：

Avestia Publishing 而不是 no-reply@avestia.com

![在此处输入图像描述](../Images/6a218b34134f4f56154e07d34da2a194.png) 我使用此代码发送电子邮件：

```
bodyMsg.Append("<p>Dear admin,</p>" + RadioButtonList_Prefix.SelectedItem.Text + " " + name.Text + " " + lastname.Text + " has registered in submissin system as an author.<p></br></br></br>Best regards,</p><p>Avestia Publishing</p>");

            msg.IsBodyHtml = true;
            msg.Body = bodyMsg.ToString();

            msg.BodyEncoding = System.Text.Encoding.GetEncoding("utf-8");
            msg.Priority = MailPriority.High;

            //  msg.ReplyTo = new MailAddress(TextBox2.Text);
            msg.From = new MailAddress("no-reply@avestia.com");
            msg.To.Add(new MailAddress(*****));
            SmtpClient mailsender = new SmtpClient();

            mailsender.Host = "SmtpClient.gerbera.arvixe.com";

            mailsender.Port = 587;
            mailsender.EnableSsl = true;
            mailsender.Credentials = new System.Net.NetworkCredential("no-reply@avestia.com", "classaspnet");

            SmtpClient smtp = new SmtpClient();
            //Literal1.Text = "<script>alert(' ')</script>";
            smtp.Send(msg); 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:32:55.670

改变这个：

```
msg.From = new MailAddress("no-reply@avestia.com"); 
```

对此：

```
msg.From = new MailAddress("no-reply@avestia.com", "Avestia Publishing"); 
```

# java - 我不能使用 Axis2 返回 json 对象

> ID：14656147
> 
> 赞同：0
> 
> 时间：2013-02-01T22:31:00.133
> 
> 标签：java, xml, json, web-services, axis2

我无法使用 Axis2 之类的 Web 服务返回 json 对象。我在 web2.xml 中为支持 json 添加了 builder 和 messageFormatter 行，但总是访问我的 Web 服务以测试 xml 中的返回。

我使用 url 来测试我的操作：[http](http://server.com:8080/webservice/services/classe/action?response=application/json) ://server.com:8080/webservice/services/classe/action?response=application/json但没有成功。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T03:15:24.173

解决您将 wso2dynamic 响应（wso2dynamic-response-1.5.jar 和 wso2dynamic-response.mar）导出到模块文件夹（WEB/INF/modules）的问题。

# c++ - 从命令行获取运算符并将它们用作代码中的运算符

> ID：14656153
> 
> 赞同：1
> 
> 时间：2013-02-01T22:31:29.290
> 
> 标签：c++, math

我将从一个例子开始

```
me@blabla ./example + 3 5 
```

应该返回 8。

我接受了论点，但我如何将“+”从

```
char* opp = argv[1]; 
```

到一个

```
+ 
```

在我的代码中使用？

因为我想使用很多运算符，有没有办法在不使用大 if 语句的情况下做到这一点？

我希望这很清楚，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:41:04.097

您必须有某种从`char`到 运算符的映射。假设您已经在一些整数变量中得到`3`and ，简单的解决方案是使用语句：`5``x``y``switch`

```
switch (opp[0]) {
  case '+': result = x + y; break;
  case '-': result = x - y; break;
  // and so on...
} 
```

或者，你可以有一个`std::map`from `char`s to `std::function<int(const int&,const int&)>`：

```
typedef std::function<int(const int&,const int&)> ArithmeticOperator;
std::map<char, ArithmeticOperator> ops =
  {{'+', std::plus<int>()},
   {'-', std::minus<int>()},
   // and so on...
  };

int result = ops[opp[0]](x,y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:34:26.513

怎么样：

```
char op = argv[1][0];

if (op == '+')
    add(argv[2], argv[3]); 
```

或者可能：

```
switch (op)
{
case '+':
    add(argv[2], argv[3]);
    break;
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:33:18.053

您可以根据您将接受的运算符列表测试给定的运算符。

```
#include <iostream>
#include <string>
#include <boost/lexical_cast.hpp>

int main(int argc, char* argv[])
{
  if (argc <= 3)
  {
    std::cout << "<op> <num1> <num2>\n";
    return 1;
  }

  const std::string op = argv[1];
  const int arg1 = boost::lexical_cast<int>(argv[2]);
  const int arg2 = boost::lexical_cast<int>(argv[3]);

  cout << arg1 << op << arg2 << " = ";

  if (op == string("+"))    // <== Here is where you turn "+" into +
  {
    cout << arg1 + arg2 << "\n";
  }
  else if (op == string("*"))  // <== or "*" into *
  {
    cout << arg1 * arg2 << "\n";
  }
  else
  {
    cout << "I don't know how to do that yet.\n";
    return 2;
  }

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T23:01:22.663

这个问题最通用的解决方案是构建一个解析树，以便您可以将其扩展到更大的输入。

解析树基本上是二叉树，它提供了操作数和运算符之间关系的表示，每个节点到叶子都是一个运算符，叶子本身就是操作数，因此当您想要分析或解释表达式时，您可以从底部开始的树，并在你上树时解决表达式。

最简单的方法是创建一个递归下降解析器，创建两个堆栈，一个用于运算符，一个用于操作数，当您找到运算符时，将它们与各自的操作数一起推入堆栈，当您到达运算符时使用较低的优先级，您可以根据需要从堆栈中弹出一个运算符和操作数，然后创建一个节点。

如果您不想经历创建自己的解析器的麻烦，我发现 boost 有一些实用程序可以为您做到这一点。但我没有亲自使用过它们，因此您必须查看文档以查看它们是否有用。[http://www.boost.org/doc/libs/1_34_1/libs/spirit/doc/trees.html](http://www.boost.org/doc/libs/1_34_1/libs/spirit/doc/trees.html)

# facebook - Facebook SDK 登录有时会提供电子邮件，但并非总是如此

> ID：14656154
> 
> 赞同：0
> 
> 时间：2013-02-01T22:31:37.877
> 
> 标签：facebook, facebook-graph-api, ios6

使用新的 iOS SDK 登录 FB 时，我看到一些奇怪的行为。这是针对 iOS 6 运行的，没有存储 FB 凭据。

当我成功登录 FB 时，我正在将用户字典 (FBGraphUser) 写入控制台。

我的初始请求是使用“我”图形路径，type=user，fields=id,name,username,email,location,gender。

对于某些帐户，我会返回电子邮件地址，这似乎是我刚刚登录 FB 时使用的电子邮件地址。但是，对于许多其他帐户，我在没有电子邮件的情况下获得了请求的数据。

我没有看到 FB 设置或帐户有任何差异，并且所有情况下的代码路径都是相同的。

为什么 FB 会为某些用户返回电子邮件而不为其他用户返回电子邮件？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:22:54.853

Ok... duh. Somehow, at some point, the two accounts that were giving up their email address had granted permission in their FB App settings for my app to access email.

Hazard of using old code and old test accounts...

Thank you for listening, SO!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T07:52:06.990

就我而言，未确认其电子邮件（在 FB 上）的 Facebook 帐户没有返回电子邮件。

# regex - 相同标记之间的正则表达式文本

> ID：14656157
> 
> 赞同：0
> 
> 时间：2013-02-01T22:32:15.217
> 
> 标签：regex

我有一份表格文件：

```
*##:##* text
*##:##* more text
and here is some more
*##:##* even more text 
```

其中 # 是任意数字

我正在尝试编写一个正则表达式来查找

```
*##:##* text 
```

和

```
*##:##* more text
and here is some more 
```

和

```
*##:##* even more text 
```

我当前的正则表达式看起来像：

```
'\*([0-9][0-9]:[0-9][0-9])\*(.+?)(?=(\*([0-9][0-9]:[0-9][0-9])\*|\Z))' 
```

但是，它仅会生成数字格式和某些文本的虚假结果。正确的正则表达式是什么样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:43:10.777

关键是，如果您希望正则表达式能够匹配通过多行发送的内容，则必须显式添加换行符。

```
\*\d\d:\d\d\*((.|\n)(?!(\*\d\d:\d\d\*)))* 
```

# ruby-on-rails - 如何正确返回一两个合并的 content_tags？

> ID：14656164
> 
> 赞同：0
> 
> 时间：2013-02-01T22:32:31.160
> 
> 标签：ruby-on-rails, ruby, methods, refactoring

如何摆脱这种重复`if conditional`？

```
def set_caption(result)
  if result.respond_to?(:app_name)
    content_tag(:div, result.type_name, class: 'type-name') + 
      content_tag(:div, result.app_name, class: 'app-name')
  else
    content_tag(:div, result.type_name, class: 'type-name')
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:36:32.510

这对你有用吗？

```
def set_caption(result)
  rv = content_tag(:div, result.type_name, class: 'type-name')
  if result.respond_to?(:app_name)
    rv += content_tag(:div, result.app_name, class: 'app-name')
  end
  rv
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T22:48:07.683

```
def set_caption(result)
  [:type_name, *(:app_name if result.respond_to?(:app_name))]
  .map{|name| content_tag(:div, result.send(name), class: name.hyphenize)}
  .inject(:+)
end 
```

或者，假设这`result.respond_to?(:type_name)`总是正确的：

```
def set_caption(result)
  [:type_name, :app_name]
  .map{|name| if result.respond_to?(name)
    content_tag(:div, result.send(name), class: name.hyphenize)
  end}.compact.inject(:+)
end 
```

# android - 内核 3.0 与 3.7/3.8 的唤醒锁核心代码和接口的区别？

> ID：14656165
> 
> 赞同：0
> 
> 时间：2013-02-01T22:32:33.483
> 
> 标签：android, linux, linux-kernel, power-management, wakelock

有人告诉我内核 3.7/3.8 中的唤醒锁与 3.0 不同。发生了什么变化，是否有任何文件或讨论在某处谈论这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:30:17.790

我从两个内核版本中区分了wakelock.c，它们有很多变化。我只是在寻找一个简短而快速的信息，什么已经更新。谢谢

# css - Clearfix 类有问题

> ID：14656166
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:32:41.023
> 
> 标签：css, clearfix

你能看看我的网页（联系页面），让我知道为什么我仍然在 clearfix 类中遇到这个问题吗？我什至在所有元素上都使用了 clear ，但这种情况仍在发生！和 tghe #bizleft 和 #bizright 没有对齐！

[http://ghazalphoto.com/contact/](http://ghazalphoto.com/contact/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:37:37.800

通常你想发布一些代码而不是让人们挖掘......但是。[**jsFiddle**](http://jsfiddle.net/hDnjg/1/)

删除明确：#bizleft 和 #bizright

```
#bizleft{
    float:left;  
    width:49%; 
}
#bizright{
    width:49%;  
    float:right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:37:33.180

您可以将以下代码添加到您的`#bizright`课程中

```
position: absolute;
right: 10px; 
```

# terminal - Solarized Theme Terminal Mac OS X 的 Nano 问题

> ID：14656167
> 
> 赞同：1
> 
> 时间：2013-02-01T22:32:44.000
> 
> 标签：terminal, nano

在使用太阳能终端主题时打开 nano 时，屏幕刷新似乎不起作用。它有时也会在前一行的末尾开始一行的第一个字符。这总是发生在文件的第一行。我已经对此进行了测试，并且知道它是日晒主题，因为我已经更改了主题并且它不会发生在那个主题上。

此外，当我向下滚动时打开一个包含很多行的文件时，它有时不会将页面刷新为空白，因此当它重绘下一页时，它会显示该页面的信息，而不是前一页的信息。

我也在使用zsh。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:32:36.883

我刚刚遇到了同样的问题。我通过转到*Advanced选项卡并将**Declare terminal*更改为from`ansi`来解决它`xterm-256color`。

# java - 如何验证给定的字符串将作为有效的 sql 类型工作

> ID：14656168
> 
> 赞同：0
> 
> 时间：2013-02-01T22:32:45.537
> 
> 标签：java, sql, regex

我正在构建一个应用程序，其中包括用户将数据输入数据库的能力。如果用户输入一些文本，例如他们尝试输入日期，我希望能够验证他们输入的字符串是否可以在 SQL 查询中执行而不会出现问题。

我正在用 java 编码，所以我想知道是否有任何小型库可以做到这一点，或者我是否应该使用不同的 reg-exes 来进行验证。

我不想依赖数据库进行验证，因为（a）如果它很远，它可能会很慢，并且（b）我可能想要实现一些其他自定义验证规则（或让用户去做）和想把我所有的验证都放在一个盒子里。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:51:53.687

通常，您不应依赖数据库对日期的定义。相反，您应该声明一个有效的应用程序格式（例如，MM/DD/YY）并使用正则表达式、库或您自己的代码来验证用户输入，然后执行从指定格式到数据库格式的转换（例如，月/日/年 -> 年/月/日）。

如果您使用的是 ORM，它将基于底层数据库为您对特定类型（如 Java 的数据类）执行此转换。否则，您必须自己执行此操作，但最好将输入验证与特定于数据库的转换分开。

# java - 如何从 Web 应用程序打开客户端上的共享文件？

> ID：14656176
> 
> 赞同：0
> 
> 时间：2013-02-01T22:33:16.243
> 
> 标签：java, javascript, asp.net, html, iis

我正在开发一个 Web 应用程序，它需要通过单击网页上的按钮在客户端打开一个日志文件。

请注意，此应用程序是通过公司 Intranet 访问的，日志文件托管在网络驱动器上并与所有用户共享。这意味着每个用户都可以使用文件资源管理器浏览到日志文件。如果不是因为浏览器安全，我可以说：

```
window.open('file://192..1/Logs/My.log'); // and the file would have opened in the default app on the client 
```

但是，这仅在本地有效，并且在托管页面时会被阻止。

我无法使用 HTML5，因为所有用户都在 IE6/7 上，并且无法升级。为了让事情变得更加困难，客户端不应该从服务器下载日志文件，所以恐怕这不是一个解决方案。（这是我不用写一整页就能解释这一切的最短方法，请接受条件。）

如果有人能提出解决这个问题的方法，我将不胜感激。

# bash - 使用 getopts 读取一个可选参数并移动正确数量的参数

> ID：14656181
> 
> 赞同：6
> 
> 时间：2013-02-01T22:33:32.787
> 
> 标签：bash

我正在编写一个简单的 bash 脚本，它采用一个可选参数 (-t )，后跟一些附加参数。

我在想 getopts 将是实现这一目标的合理方法，但我很难获得所需的行为。我所拥有的是以下内容：

```
foo() {
    baz=10
    while getopts ":t:" option; do
        case "$option" in
        t) baz=$OPTARG ;;
        esac
    done
    shift $((OPTIND - 1))
    bar -t $baz $1 $2 $3
} 
```

问题是它`$OPTIND`似乎并没有根据参数是否存在而有所不同，所以我没有得到预期的正确行为与可选参数（即，无论论点是否存在）。

我希望以下两项都能正确执行：

```
foo a b c
foo -t 5 a b c 
```

实现这一目标的最简单方法是什么？我更喜欢不是 hack 的解决方案，因为我可能想使用其他可选参数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T23:00:30.640

问题是您从不重置`$OPTIND`，因此每次调用`foo`它时，都会从最后处理的选项索引之后开始检查其参数。例如：

```
# $OPTIND is now 1
foo -t opt arg1 arg2 arg3
# the above recognizes -t opt as an option, and sets $OPTIND to 3

# $OPTIND is now 3
foo arg4 arg5 arg6
# the above recognizes that arg6 is not an option, so it leaves $OPTIND at 3 
```

`$OPTIND`解决方案是在内进行本地化`foo`，将其显式设置为`1`：

```
foo() {
    baz=10
    local OPTIND=1
    while getopts ":t:" option; do
        case "$option" in
        t) baz=$OPTARG ;;
        esac
    done
    shift $((OPTIND - 1))
    bar -t $baz $1 $2 $3
} 
```

（您可能也想本地化`$baz`，而您正在这样做。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T22:59:27.697

看来您正在尝试编写 bash 函数，而不是 bash 脚本。OPTIND 在调用 shell/脚本时设置为 1，但在调用函数时不设置，因此具有不同参数的后续函数调用将在同一点继续解析​​。

如果你想保留它作为一个函数，你可以手动重置它：

```
foo() {
    OPTIND=1
    baz=10
    while getopts ":t:" option; do
        case "$option" in
        t) baz=$OPTARG ;;
        esac
    done
    echo $OPTIND
    shift $((OPTIND - 1))
    echo bar -t $baz $1 $2 $3
} 
```

# php - 除非选择上传文件，否则 Sql 更新不起作用

> ID：14656183
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:33:47.137
> 
> 标签：php, mysql, forms, sql-update

在这个编辑文件中，我必须选择相同的图片文件或另一个图片文件才能更新行。但我希望能够在不触及其他行的情况下更改我想要的任何内容。有什么想法吗？

```
<?php

include ("../header.php");
include ("../header2.php");

?>
<?php
include('../config.php');
include ('../ac.thumbs.php');

 if ($_GET['sil']) {
    $sil = htmlspecialchars(stripslashes($_GET['sil']));

    mysql_query("DELETE FROM CloseOut WHERE itemNO = $sil limit 1");
    echo "<h1>$sil item nolu kayit silinmistir</h1><br>";
}

    $edit = htmlspecialchars(stripslashes($_GET['edit']));
    //Resimlerin yuklenecegin yer
 $target = "../../upload/";  
 //////////////////////////////////////////////////////////////////////
 ///////////////////////////////Resim1/////////////////////////////////
 //////////////////////////////////////////////////////////////////////
 $target1 = $target . basename( $_FILES['resim1']['name']) ; 
 //Formdan gelen bilgileri almasi icin
 $resim=($_FILES['resim1']['name']); 
 $isim=$_POST['isim1']; 
 $alan1=$_POST['alan11']; 
 $alan2=$_POST['alan21']; 
 $alan3=$_POST['alan31']; 
 $alan4=$_POST['alan41']; 

/////////////Formdaki bos alanlara bos bilgi kayit etmemesi icin////////////////////////

$updates = array();
if (!empty($resim))
  $updates[] = 'resim="'.mysql_real_escape_string($resim).'"';
if (!empty($isim))
  $updates[] = 'isim="'.mysql_real_escape_string($isim).'"';
if (!empty($alan1))
  $updates[] = 'alan1="'.mysql_real_escape_string($alan1).'"';
if (!empty($alan2))
  $updates[] = 'alan2="'.mysql_real_escape_string($alan2).'"';
if (!empty($alan3))
  $updates[] = 'alan3="'.mysql_real_escape_string($alan3).'"';
if (!empty($alan4))
  $updates[] = 'alan4="'.mysql_real_escape_string($alan4).'"';
$updates = implode(', ', $updates);

/////////////////////////////////////////////////////////////////////////////////////////
 //update etmesi icin
if(move_uploaded_file($_FILES['resim1']['tmp_name'], $target1)) 
{   
mysql_query("UPDATE CloseOut SET $updates WHERE itemNO='$edit' ");
echo "Tebrikler, ". basename( $_FILES['resim1']['name']). " isimli dosya yuklendi ve database'e basariyla islendi!<br>"; 
 } 

 $data = mysql_query("SELECT * FROM CloseOut WHERE itemNO=$edit") or die(mysql_error()); 

 //Puts it into an array 
 while($info = mysql_fetch_array( $data )) 
 { echo "
<center>
<a href=\"edit.php?sil=$info[itemNO]\"onclick=\"return confirm('Do you really want to erase this entry?')\">[ Delete ]</a><br>
<a href=../../large.php?f=upload/".$info['resim'], $thumblarge .">
<img src=../../small.php?f=upload/".$info['resim'], $thumbsmall .">
</a>";
$editresim = $info[resim];
$editisim = $info[isim];
$editalan1 = $info[alan1];
$editalan2 = $info[alan2];
$editalan3 = $info[alan3];
$editalan4 = $info[alan4];
} 

?>

<br>
<center> 
<table width="900" border="5" style="background-color:white; "bordercolor="#000000">
    <tr>
        <td width="120" height="50" bgcolor= "545454"><b>RESIM</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>NAME</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>CATAGORY</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>QUANTITY</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>LOCATION</b></td>
        <td width="120" height="50" bgcolor= "545454"><b>PRICE</b></td>
    </tr>
    <tr>
<form enctype="multipart/form-data" method="post" action="">
<td><input type="file" name="resim1" value="<?php echo $editresim;?>"> </td>
<td><input type="text" name="isim1" value="<?php echo $editisim;?>"> </td>
<td><input type="text" name="alan11" value="<?php echo $editalan1;?>"> </td>
<td><input type="text" name="alan21" value="<?php echo $editalan2;?>">  </td>
<td><input type="text" name="alan31" value="<?php echo $editalan3;?>"></td>
<td><input type="text" name="alan41" value="<?php echo $editalan4;?>"></td>
</tr>

<td colspan="6"><center><input type="submit"></center></td>

</form>
</table>
</center> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:37:17.117

看看这段代码：

```
if(move_uploaded_file($_FILES['resim1']['tmp_name'], $target1)) 
{   
    mysql_query("UPDATE CloseOut SET $updates WHERE itemNO='$edit' ");
    echo "Tebrikler, ". basename( $_FILES['resim1']['name']). " isimli dosya yuklendi ve database'e basariyla islendi!<br>"; 
} 
```

如果您不上传任何内容，那么`move_uploaded_file`将返回 false 并且您的更新将永远不会发生。

# python - opencv python绑定覆盖率

> ID：14656185
> 
> 赞同：0
> 
> 时间：2013-02-01T22:33:59.737
> 
> 标签：python, opencv, binding

我知道一些没有 python 绑定的 opencv C++ API 函数和类。

每次我需要它们时，我都没有一一找到它们——这很烦人——是否有任何文档、站点、方法可以知道 opencv C++ API 的哪些部分有或没有 python 绑定？

我的意思是覆盖范围的摘要。我知道在在线文档中，您可以查看函数或类是否具有 python 接口——但即使如此，有时我也想知道文档是否已更新，并且某处可能存在绑定。除非绝对必要，否则我不想自己绑定。

# database - 如何使用迁移在数据库中记录一堆记录？

> ID：14656186
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:34:07.370
> 
> 标签：database, ruby-on-rails-3

rails迁移运行时如何将数据保存到数据库中。我有城市记录，我想在创建表时将数据保存到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:47:23.897

创建另一个迁移并将 ActiveRecord 语句添加到迁移中。应该可以正常工作。你遇到什么问题了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:48:57.573

该`db/seeds.rb`文件在那里，因此您可以将种子数据添加到数据库中。您可以使用 ActiveRecord 在其中创建记录（它只是一个 ruby​​ 文件）：

```
City.create! :name => "New York", ... 
```

您可以通过运行`rake db:seed`. 您还可以将迁移/种子命令链接在一起：

```
rake db:migrate db:seed 
```

# c - 结构中的结构在 C 中意味着什么？

> ID：14656187
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:34:14.873
> 
> 标签：c, pointers, struct, linked-list

以下代码应该在 C 中创建一个单链表。我想了解 insert_node 对指针头的作用。每次调用 insert_node 时，“head”指向什么？

```
struct node{
    int data;
    struct node* next; 
};
typedef struct node node;

    node* head = NULL; 

void insert_node(int data) {
    node *new_node = (node*) malloc(sizeof(node)); 
    new_node->data = data;
    new_node->next = head;
    head = new_node;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:35:33.940

`head`将指向链表的开头（链表中的第一个条目）。要获取后续元素，您只需`next`按照`node`.

每次添加新节点时，`next`将新元素的 设置为当前元素`head`并设置`head`为新元素，以便将元素链接在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:37:56.320

问：结构中的结构在 C 中意味着什么？

A：在这种情况下，“struct node *”只是用作指针，指向“struct node”类型的列表项。

这是一个类型声明：

```
struct node{
    int data;
    struct node* next; 
}; 
```

这是一个变量定义：`node* head = NULL;` 相当于说`struct node * head = NULL;`

这是一个变量赋值：`node *new_node = (node*) malloc(sizeof(node));`

变量“head”只是指向列表开头的指针。每当您想使用列表时，它都是您的“起点”：包括添加内容或在列表中查找内容。

“下一个”始终指向“列表中的下一项”。在初始化列表之前，“Head”为空。每个“下一个”在列表中的最后一项时始终为空。

“头”只更改一次 - 当您初始化列表时。“下一个”更改了两次：1）第一次添加节点时将其设置为 null，2）添加后续节点时将其重置为指向下一个节点。

'希望有帮助..

# xml - 克服XSLT中href中的xml参数实体“&”

> ID：14656191
> 
> 赞同：0
> 
> 时间：2013-02-01T22:34:26.650
> 
> 标签：xml

在过去的几天里，我刚刚开始使用 xml，并且正在使用 XSLT。

我有一个带有 xml 参数实体“&”的 html 链接，显然这会阻止文件解析，是否有一个简单的解决方法可以恢复到其他语言？

链接的构造是这种格式：

[http://www.abc.com/first.php?p=111111111&a=000000&m=1234](http://www.abc.com/first.php?p=111111111&a=000000&m=1234)

我目前正在使用基本的：

```
 <xsl:element name="a">
                        <xsl:attribute name="href">
                        <xsl:value-of select="This Is The Link"/>
                        </xsl:attribute>
                        <xsl:value-of select="This is The Text Shown"/>
                    </xsl:element> 
```

显示href。

在我正在使用的示例中，我假设我没有创建原始 xml 文件。

为这个问题道歉，我已经搜索了一个简单的答案，但许多相关的 xml 文本要么没有触及这个问题，因为它的形式不好，要么引发了争论。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:55:48.937

我不太确定我是否遵循了这个问题。但是，如果问题是如何在结果树中获得 & 符号，那么答案就是转义它。将“&”替换为`"&amp;`“。这对 URL 也有效。如果您找到一个带有“&”的 URL 并将其更改为“ `&amp;`”，则该 URL 会以相同的方式处理（即“&”和“ `&amp;`”是等价的）。

如果我误解了您的问题，请澄清，我会尽力提供帮助！

值得一提的是，这些是需要转义的字符：

```
"   &quot;
'   &apos;
<   &lt;
>   &gt;
&   &amp; 
```

# c# - System.IdentityModel 是否允许在单个端点上使用多种客户端凭据类型？

> ID：14656193
> 
> 赞同：1
> 
> 时间：2013-02-01T22:34:34.110
> 
> 标签：c#, wif, identity

在 .NET 4.5 中，命名空间`Microsoft.IdentityModel`中的 Windows Identity Foundation 类现在是框架的一部分，位于`System.IdentityModel`. 在此过渡和升级中，是否添加了在单个端点上支持多种类型的客户端凭据（即用户名/密码或客户端证书）的能力？我在几个地方读到过这个功能在某些时候被列入桌面，但我还没有找到任何方法来启用这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:31:15.457

嗯 - 这是官方的描述：

“添加了多种身份验证支持支持，以在使用 HTTP 传输和传输安全性时在单个 WCF 端点上支持 IIS 支持的多种身份验证模式。IIS 允许您在虚拟目录上启用多种身份验证模式，此功能允许单个 WCF 端点以支持为托管 WCF 服务的虚拟目录启用的多种身份验证模式。”

[http://msdn.microsoft.com/en-us/library/dd456789.aspx](http://msdn.microsoft.com/en-us/library/dd456789.aspx)

请注意，它说“HTTP 传输和传输安全” - 所以我想您需要在 IIS 级别配置身份验证方法，并在 WCF 配置中的绑定上选择“InheritFromHost”。

# ios - 通话时 AVCaptureSession 的“空白”音频

> ID：14656195
> 
> 赞同：1
> 
> 时间：2013-02-01T22:34:39.413
> 
> 标签：ios, objective-c, avfoundation

我有一个`AVCaptureSession`使用 2`AVCaptureDeviceInput`的。第一个是`AVCaptureDevicePositionFront`，第二个是`[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio]`。

这通常工作得很好，但是当我在通话时，麦克风正在使用（显然）。**有什么方法可以将“空白”音轨应用于`AVCaptureSession`**？如果需要，我可以使用其他一些解决方法，但是与它集成`AVCaptureSession`会很好，因为这样我当前的所有代码都可以保持不变。

我尝试了子类化`AVCaptureDevice`并总是返回`YES`for `supportsAVCaptureSessionPreset:`，但这是可以预见的失败。

视频实时（通过 RTMP）流式传输到服务器，因此之后添加音频并不是一个真正的选择。在 nginx RTMP 服务器中添加音频似乎不太现实，所以我希望在设备上解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:00:36.273

我最终找到了一个服务器端解决方案。

服务器必须与初始视频包一起发送初始音频包。

对于它的价值，我正在使用[`nginx-rtmp-module`](https://github.com/arut/nginx-rtmp-module). [此提交](https://github.com/arut/nginx-rtmp-module/commit/36002359c21a546518286e284acb80f9e8276198)是解决我的问题的特定提交。

# c - 如何执行 shell 脚本或可执行文件？

> ID：14656199
> 
> 赞同：4
> 
> 时间：2013-02-01T22:34:45.300
> 
> 标签：c, exec

这是我正在做的一个学校项目。

我正在写一个网络服务器。如果请求的资源具有扩展名“cgi”，我需要分叉并执行程序。如果 cgi 是已编译的可执行文件，则此方法有效：

```
execl(path, (char*) 0); 
```

但是如果 cgi 程序是一个需要解释的脚本，我需要做这样的事情：

```
execl("/bin/sh", path, path, (char*) 0); 
```

我如何编写代码以便处理任何一种情况？我的外壳如何做到这一点？我应该使用该`file`程序来确定它是可执行文件还是文本，如果是文本，则假设它需要被解释？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:47:12.727

`"/bin/sh"`如果是脚本，为什么需要显式调用？

只要脚本在顶部具有执行权限和适当的[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)，您就应该能够像执行可执行文件一样执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:40:14.030

`-c`您可以使用该选项要求 shell 为您运行命令。

如果命令是内置的 shell 或 shell 脚本，shell 将运行它；如果是外部命令，shell 将执行二进制文件。

试试这个，看看它是否适合你：

```
execl("/bin/sh", "/bin/sh", "-c", path, (char*) 0); 
```

编辑：更正了上述调用。现在应该可以了；我用

```
execl("/bin/sh", "/bin/sh", "-c", "set", NULL); 
```

我的测试程序回显了默认的 shell 变量。然后我用

```
execl("/bin/sh", "/bin/sh", "-c", "/usr/bin/clear", NULL); 
```

我的测试程序清除了终端模拟器的屏幕。

注意：这个答案的好处是它可以运行任何你可以从 shell 运行的东西。因此，它将运行内置的 shell 命令，并且将运行没有正确`#!/path/to/interpreter`第一行的 shell 脚本。如果你想要运行的所有 shell 脚本都有正确的`#!`第一行，你就不需要这个。这提供了一个稍微更健壮的解决方案，代价是执行一个可能不需要的 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:26:41.200

您应该检查文件是否具有 exec 权限，如果没有警告您的用户。您可以使用 GlibC 的 lstat 函数来执行此操作。然后使用 GlibC 中的 execve 为其提供路径和参数列表（您也可以从 main 获取 env var，我建议您将环境提供给您的程序，而不是提供 (char *)0 这是一个 NULL 指针）

# java - 独特元素的数组？

> ID：14656208
> 
> 赞同：15
> 
> 时间：2013-02-01T22:34:59.820
> 
> 标签：java, arrays, unique

给定一个像下面这样的数组，我想知道是否有一种简单的方法可以将此数组转换为仅具有唯一值的数组？

这是给定的：

```
 numbers={5,5,4,3,1,4,5,4,5} 
```

把它变成这样的结果数组，保留原来的顺序：

```
 {5,1,2,3,4} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-01T22:36:15.277

在 Java 8 中，用于`IntStream`获取数组的唯一元素

```
int[] noDuplicates = IntStream.of(array).distinct().toArray(); 
```

* * *

最简单的方法是从数组创建集合。

```
Integer[] array = ...
Set<Integer> set = new LinkedHashSet<Integer>(Arrays.asList(array )); 
```

然后您可以使用以下方法检索数组：

```
set.toArray() 
```

如果要保持顺序，请使用**LinkedHashSet ；如果要对其进行排序，请使用****TreeSet**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T22:37:57.873

两种选择

1.  保留计数和元素的映射，最后只使用计数为 1 的元素。（需要额外的存储空间，但速度更快）

2.  对数组进行排序，当您在数组中移动时，仅使用不重复的数组。

不需要额外的空间，但将是 O(n lg(n))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:41:46.963

假设一个对象数组：

```
Object[] arr;

{...omissis...}

List<Object> list = new ArrayList<Object>();
for(Object val: arr) {
  if(!list.contains(val)) {
    list.add(val);
  }
}
list.toArray(new Object[0]); 
```

如果需要，替换`Object`为您的数组类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T22:43:47.390

这里有2个想法：

1.  将所有项目添加到 Set，或使用具有数组作为参数的构造函数创建一个（`HashSet`或`TreeSet`，取决于您想要的时间复杂度）。然后，对于集合中的每个元素，将其删除，将其添加到新数组的下一个打开位置，该位置是集合的大小。

2.  对数组进行排序。将索引 0 处的对象添加到`ArrayList`. 从索引 1 开始并转到 index `length - 1`。如果当前元素*不*等于前一个索引处的元素，则将其添加到`ArrayList`. 如有必要，将其更改`ArrayList`为数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-02T12:33:42.447

> 如果你想合并两个不重复的列表，那么试试这个，它对我有用。

```
 List<Name> list1 = Arrays.asList(new Name("abc", 1), new Name("def", 2), new Name("ghi", 3));
    List<Name> list2 = Arrays.asList(new Name("def", 4), new Name("jkl", 5), new Name("mno", 6));

    List<Name> newNameList= new ArrayList<>(Stream.of(list1, list2).flatMap(List::stream)
            .collect(Collectors.toMap(Name::getName, d -> d, (Name x, Name y) -> x == null ? y : x)).values());
    newNameList.forEach(System.out::println);

class Name {
String name;
int id;

public Name(String name, int id) {
    this.name = name;
    this.id = id;
}

public String getName() {
    return name;
}

@Override
public String toString() {
    return "Name{" + "name='" + name + '\'' + ", id=" + id + '}';
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-27T18:12:12.927

（转贴：[https](https://stackoverflow.com/a/39731584/1520422) ://stackoverflow.com/a/39731584/1520422 ）

使用 Java 8 的 Stream API，这是一个具有通用 Array 类型的解决方案：

```
public static <T> T[] makeUnique(T... values)
{
    return Arrays.stream(values).distinct().toArray(new IntFunction<T[]>()
    {

        @Override
        public T[] apply(int length)
        {
            return (T[]) Array.newInstance(values.getClass().getComponentType(), length);
        }

    });
} 
```

它适用于任何 Object 类型的数组，但不适用于原始数组。

对于原始数组，它看起来像这样：

```
public static int[] makeUnique(int... values)
{
    return Arrays.stream(values).distinct().toArray();
} 
```

最后是一个小单元测试：

```
@Test
public void testMakeUnique()
{
    assertArrayEquals(new String[] { "a", "b", "c" }, makeUnique("a", "b", "c", "b", "a"));
    assertArrayEquals(new Object[] { "a", "b", "c" }, makeUnique(new Object[] { "a", "b", "c", "b", "a" }));
    assertArrayEquals(new Integer[] { 1, 2, 3, 4, 5 }, makeUnique(new Integer[] { 1, 2, 2, 3, 3, 3, 1, 4, 5, 5, 5, 1 }));
    assertArrayEquals(new int[] { 1, 2, 3, 4, 5 }, makeUnique(new int[] { 1, 2, 2, 3, 3, 3, 1, 4, 5, 5, 5, 1 }));
} 
```

# python - BeautifulSoup 未按预期解析

> ID：14656210
> 
> 赞同：1
> 
> 时间：2013-02-01T22:35:03.767
> 
> 标签：python, html, html-parsing, beautifulsoup, lxml

我正在使用 BeautifulSoup 4 来抓取一个网站并生成一个像魅力一样工作的脚本。但是当我更换电脑并在另一台上尝试脚本时，它突然开始发出错误。错误的原因是我使用了css搜索，这是BS的新功能，对最新版本有效。具体搜索是这样的：

```
soup.findAll(class_="class-name") 
```

“类名”存在于网页中，我确信它正在工作。问题是，新计算机在解析网页时有些失败，并且无法检测到任何名为“class-name”的类。如您所料，上面的搜索返回一个空列表。

我安装了`html5lib`and `lxml`，同时单独安装：没有任何改变。我确保 BS在两种不同`lxml`的`html5lib`情况下使用以下几行进行解析：

```
page = urllib2.urlopen("url")

soup = BeautifulSoup(page.read(),"html5lib") 
```

或者

```
soup = BeautifulSoup(page.read(),"lxml") 
```

什么都没有再次改变。搜索返回一个空列表。请帮助我。顺便说一句，我正在寻找一个中肯的答案，只是帮助我让 BS 创建一个正确的解析。请尽量不要提供需要我在脚本中进行大量更改的建议。正如我之前所说，它正在工作。

提前致谢。

* * *

根据评论，我包括一个简短的失败示例。顺便说一句，除了 python 之外，两台计算机中所有内容的版本都是相同的。运行脚本的计算机有 pyhton 2.6，另一台有 2.7。但我不认为这是原因。

```
from bs4 import BeautifulSoup
import urllib2

page = urllib2.urlopen("www.website.com/some extensions...")
soup = BeautifulSoup(page.read())

#Now I need information that is included in a class called any_class. The info's
#html tag is 'i' and I want to extract the text in that tag, for the first appearance
#of any_class on the page

text = soup.findAll(class_="any_class")[0].i.text 
```

现在我导航到命令行并运行脚本。

```
$ ./crawler.py

#Index Error! List out of Index! 
```

我希望现在一切都清楚了。如您所见，soup.findAll 为“any_class”的类搜索返回一个空列表。BS显然找不到页面上几乎找不到的“any_class”。我坚信这个问题是一个解析器问题。我猜python坚持使用它的默认“html.parser”而不是我安装的lxml和html5lib。您还可以在您的答案中包含一个简短指南，说明我应该如何向 python 声明我想用 lxml 或 html5lib 为 BS 解析。

# php - joomla用户注册加密

> ID：14656219
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:35:53.263
> 
> 标签：php, md5, joomla2.5, core, user-registration

如何更改joomal中新用户的密码加密。我试图修改

```
getSalt($encryption = 'md5-hex', $seed = '', $plaintext = '') 
```

和

```
getCryptedPassword($plaintext, $salt = '', $encryption = 'md5-hex', $show_encrypt = false) 
```

library.joomla.user.helper 但是通过修改这两个功能老用户无法登录！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:14:43.780

我只是查看了 Joomla 的源代码，虽然 Joomla 在*技术上*确实已经具备以下功能：

1.  从各种更好的 [但不是很多] 哈希算法中选择密码存储。
2.  在算法更改的情况下，将算法名称与哈希一起存储。

这些东西都没有在代码中实际使用过。

这意味着什么：

1.  您只能*在安装之前*通过修改`$encryption = 'md5-hex'`这两个函数定义中的 来更改它。
2.  在任何其他时间更改它都会使您的所有密码失效，包括管理员密码。

证据：

```
 $ grep -r getCryptedPassword ./*
./components/com_users/models/reset.php:                $crypted        = JUserHelper::getCryptedPassword($data['password1'], $salt);
./components/com_users/models/reset.php:                $testcrypt = JUserHelper::getCryptedPassword($data['token'], $salt);
./installation/models/configuration.php:                $crypt = JUserHelper::getCryptedPassword($options->admin_password, $salt);
./libraries/joomla/user/user.php:                       $crypt = JUserHelper::getCryptedPassword($array['password'], $salt);
./libraries/joomla/user/user.php:                               $crypt = JUserHelper::getCryptedPassword($array['password'], $salt);
./libraries/joomla/user/helper.php:     public static function getCryptedPassword($plaintext, $salt = '', $encryption = 'md5-hex', $show_encrypt = false)
./plugins/authentication/joomla/joomla.php:                     $testcrypt = JUserHelper::getCryptedPassword($credentials['password'], $salt); 
```

您可以清楚地看到，没有一个调用`getCryptedPassword()`指定“加密”类型，因此始终使用函数定义中的默认值。

因此，在全新安装中，在解压缩文件和实际运行安装脚本之间，您可以将函数定义更改为：

```
getSalt($encryption = 'crypt-blowfish', $seed = '', $plaintext = '')
getCryptedPassword($plaintext, $salt = '', $encryption = 'crypt-blowfish', $show_encrypt = true) 
```

这会将散列算法更改为最佳选择 [IMO]，并将散列类型与密码一起存储，以便您以后可以更改算法而不会使所有旧密码失效。

想一想，如果您首先运行如下查询以指定当前算法，您可能现在就可以更改算法。

```
UPDATE TABLE users
SET password = CONCAT('{MD5}', password)
WHERE password NOT LIKE '{%' 
```

但当然，您必须使用正确的表名和字段名。

# php - 检查数组是否包含多个元素

> ID：14656225
> 
> 赞同：0
> 
> 时间：2013-02-01T22:36:29.133
> 
> 标签：php, arrays

数组中有 4-5 封不同的电子邮件多次出现。我想知道 4 封电子邮件出现了多少次。

```
$member_sql = $this->EE->db->query("SELECT email FROM exp_members");

$member_result = $member_sql->result_array();
if(isset($member_result[0]))
{
$member_result = $member_result[0]; 
```

我的错误在下面的 if 语句中。我的 if 语句没有显示任何内容。可能是因为写错了。你们能帮我写这个声明吗，在这里写什么。

```
if(count(array_keys($member_result, $member_result['email']))> 1)
{
echo "Do something";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:49:01.043

你为什么不去**mysql_num_rows**？

# c - C中简单程序的奇怪输出

> ID：14656229
> 
> 赞同：0
> 
> 时间：2013-02-01T22:36:35.837
> 
> 标签：c

> **可能重复：**
> [在 C 中调试代码](https://stackoverflow.com/questions/14655427/debugging-code-in-c)

有人可以告诉我我的代码有什么问题以及为什么它会产生这个输出。一旦我输入“是”，输出就会变得奇怪......我希望我的代码在 Y/y 和 N/n 上正常工作......但是在我的代码中输入的任何其他内容我希望它说“无效输入。请尝试再次。” 有人可以编辑我的代码吗？

代码：

```
int main(){
  unsigned num;
  char response;

  do{
     printf("Please enter a positive integer greater than 1 and less than 2000: ");
     scanf("%d", &num);
     if (num > 1 && num < 2000){
        printf("All the prime factors of %d are given below: \n", num);
        printPrimeFactors(num);
        printf("\n\nThe distinct prime factors of %d are given below: \n", num);
        printDistinctPrimeFactors(num);
     }
     else{
        printf("\nSorry that number does not fall between 1 and 2000.\n");
     }
     printf("\n\nDo you want to try another number? Say Y(es) or N(o): ");
     getchar();
     response = getchar();
  }
 while(response == 'Y' || response == 'y'); // if response is Y or y then program runs again
 printf("Thank you for using my program. Good Bye!\n\n"); //if not Y or y, program terminates
 return 0;
} 
```

输出：

```
Please enter a positive integer greater than 1 and less than 2000: 1600
All the prime factors of 1600 are given below:
2 2 2 2 2 2 5 5

The distinct prime factors of 1600 are given below:
2 5

Do you want to try another number? Say Y(es) or N(o): yes
Please enter a positive integer greater than 1 and less than 2000: All the prime factors of 1600 are given below:
2 2 2 2 2 2 5 5

The distinct prime factors of 1600 are given below:
2 5

Do you want to try another number? Say Y(es) or N(o): Thank you for using my program. Good  Bye! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:39:56.830

您输入了字符串`"yes"`，但随后您只从该字符串中读取了一个字符，并留`"es"`在了输入中。然后尝试通过`scanf`调用读取它，因为它不是一个数字，所以它会失败，将字母留在输入缓冲区中。

# php - MySQL 损坏的日期插入 NOW()

> ID：14656230
> 
> 赞同：0
> 
> 时间：2013-02-01T22:36:52.420
> 
> 标签：php, mysql, datetime

我在数据库中有一个类型为`datetime`. 每次用户更改某些内容时，都会更新以说明用户在此日期/时间更改了网站上的某些内容。

我使用的查询是：

```
INSERT INTO Test(bunch columns, ChangedAt)  VALUES (bunch values, NOW()) 
```

几天后，我检查了表格，其中一行具有该`ChangedAt`列的值：

```
2020-11-14 00:00:00 
```

知道它是怎么来的`2020`吗？以及为什么有`time` **00:00:00**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:51:37.823

只有2个可能的原因。
计算机日期是错误的......这将是一个巧合得到 00:00:00

或者该行是这样更新/插入的。

> MySQL 以下列格式识别 DATETIME 和 TIMESTAMP 值：
> 
> 作为 'YYYY-MM-DD HH:MM:SS' 或 'YY-MM-DD HH:MM:SS' 格式的字符串。这里也允许使用“宽松”的语法：任何标点符号都可以用作日期部分或时间部分之间的分隔符。例如，“2012-12-31 11:30:45”、“2012^12^31 11+30+45”、“2012/12/31 11*30*45”和“2012@12@31 11” ^30^45' 是等价的。
> 
> 作为没有分隔符的字符串，格式为“YYYYMMDDHHMMSS”或“YYMMDDHHMMSS”，前提是该字符串作为日期有意义。例如，“20070523091528”和“070523091528”被解释为“2007-05-23 09:15:28”，但“071122129015”是非法的（它有一个无意义的分钟部分）并变成“0000-00-00 00”： 00:00'。
> 
> 作为 YYYYMMDDHHMMSS 或 YYMMDDHHMMSS 格式的数字，前提是该数字作为日期有意义。例如，19830905132800 和 830905132800 被解释为 '1983-09-05 13:28:00'

如您所见..很难错误地插入不同的值并将其插入... 20201114000000 在您的情况下...

# c# - 用 HtmlAgilityPack 替换 HTML 标记文本的内容

> ID：14656233
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:37:12.790
> 
> 标签：c#, html, html-agility-pack, markup

例如，如果我有这个标记：

```
<p>
    <br />
    TEXT TEXT TEXT KEYWORD
    <span>TEXT TEXT TEXT</span>
</p> 
```

如何用一些锚元素替换 KEYWORD 文本，使其变为：

```
<p>
    <br />
    TEXT TEXT TEXT <a href="www.url.com">KEYWORD</a>
    <span>TEXT TEXT TEXT</span>
</p> 
```

我尝试使用 HtmlNodeNavigator Value 属性，它似乎只有当前导航元素及其兄弟和子元素的文本字符（不是所有包含子元素的 InnerText）。

但是当我尝试使用 SetValue（因为 Value 只是一个 getter）时，它会抛出一个错误，提示“不支持指定的方法。”。
我真的不知道为什么会这样。
我没有找到任何其他方法来更改文本。

这是我正在运行的代码，用于在 HTML 标记中查找关键字文本并将其设置为链接。
我知道它还没有完成，但我坚持替换和获取新文本而不是旧文本的部分。注意它是一个递归方法。

```
private  static void FindKeyword(string keyword, string url, HtmlAgilityPack.HtmlNodeNavigator nav)
    {
        while (!nav.IsEmptyElement && nav.InnerXml.Contains(keyword))
        {
            if (nav.Value.Contains(keyword) && nav.Name != "a")
            {
                string newStr = nav.Value.Replace(keyword, "<a href=\"" + url + "\">" + keyword + "</a>");

                nav.SetValue(newStr);//exception "Specified method is not supported"
            }

            if (nav.HasChildren)
            {
                nav.MoveToFirstChild();
                FindKeyword(keyword, url, nav); 
            }

            nav.MoveToNext();
        }
    } 
```

有人可以帮我解决这个问题吗？
谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T01:03:21.717

为什么不直接使用[Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)？

```
string input = "<p><br />TEXT TEXT TEXT KEYWORD<span>TEXT TEXT TEXT</span></p>";
input = input.Replace("KEYWORD", "<a href=\"www.url.com">KEYWORD</a>") 
```

如果您有多个关键字，那么

```
string input = "<p><br />TEXT TEXT TEXT KEYWORD<span>TEXT TEXT TEXT</span></p>";
string[] keywords = { "KEYWORD1", "KEYWORD2" };
for(int i=0; i<keywords.Length; i++)
    input.replace(keyword[i],"<a href=\"www.url.com\">" + keyword[i] + "</a"); 
```

如果你想添加不同的链接

```
string input = "<p><br />TEXT TEXT TEXT KEYWORD<span>TEXT TEXT TEXT</span></p>";
string[,] keyurls = { {"KEYWORD1","URL1"}, {"KEYWORD2","URL2"} };
for(int i=0; i<keyurls.GetLength(0); i++)
    input.replace(keyurls[i,0],"<a href=\"" + keyurls[i,1] + "\">" + keyurls[i,0] + "</a"); 
```

# matplotlib - 如何“用完”一个情节，以便在我显示（）时它不存在？

> ID：14656240
> 
> 赞同：1
> 
> 时间：2013-02-01T22:37:38.927
> 
> 标签：matplotlib

我想创建一个情节，也许放弃它，然后创建另一个情节。

```
import matplotlib.pyplot as plt

plt.plot(xxx,yyy, ...)
if certain_conditions:
    return or otherwise get out of here
plt.show()

...sometime later, someplace far away...
# looking for incantation to make gone of the existing unshown plot
plt.plot(abc,def, ...)
plt.show() 
```

这些代码片段实际上相距甚远，在不同的对象或模块中，无论如何。当第一个情节被放弃时，第二段代码中的 show() 将向我展示超出预期的内容；我只想看看 abc 与 def 的对比。我确定这很简单，但我没有找到它 - 在开始第二个情节之前我想要什么魔法咒语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:45:37.423

有很多方法可以做到这一点，“最好的”是使用 OO 接口而不是状态机接口。

如果你不想保留任何数字，你可以做

```
plt.close('all') 
```

这将关闭所有现有的数字。如果你只想关闭当前的图，你可以这样做

```
plt.close(plt.gca().number) 
```

如果你这样做

```
fig = plt.figure() 
```

您可以创建其他图形并关闭它们

```
plt.close(fig.number) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:49:13.757

您还可以显示单个数字：

如果我这样做，在 matplotlib 1.2.0 上

```
fig1 = plt.figure(1)
fig2 = plt.figure(2)
fig2.show() 
```

只显示第二个图

# kendo-ui - 我在哪里可以下载 GPL 下的最新 kendo ui 版本？

> ID：14656243
> 
> 赞同：0
> 
> 时间：2013-02-01T22:37:55.053
> 
> 标签：kendo-ui, release, gpl

我正在尝试下载最新版本的 kendo ui，它似乎是 2012.3.1315。但是，当我单击下一页上的右上角下载按钮时：

[http://www.kendoui.c​​om/web/whats-new/release-notes/q3-2012-sp1-version-2012-3-1315.aspx](http://www.kendoui.com/web/whats-new/release-notes/q3-2012-sp1-version-2012-3-1315.aspx)

我转到另一个页面，单击开源 (GPL) 下载。单击它后，我将获得版本 2012.3.1114。我在哪里可以下载 GPL 下的 2012.3.1315？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:58:59.957

混淆是因为最新版本 (v2012.3.1315)**不是**GPL。

Dimitri Smeets 证明的链接是针对 30 天的评估，而不是仍然是 v2012.3.1114 的 GPL 开源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:40:38.130

嗯似乎很适合我，将我重定向到[http:](http://www.kendoui.com/download/download-kendo.aspx?pid=1035&lict=1) //www.kendoui.c​​om/download/download-kendo.aspx?pid=1035&lict= 1 并且下载的版本是 1315 aswel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T09:32:42.693

您需要先在网站上注册

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T17:27:28.443

Kendo UI 现在是免费和开源的 - 只是包含大多数控件的核心 UI [https://github.com/telerik/kendo-ui-core](https://github.com/telerik/kendo-ui-core)

# android - 比较 onCreateContextMenu 中的视图

> ID：14656246
> 
> 赞同：0
> 
> 时间：2013-02-01T22:38:05.700
> 
> 标签：android, view, contextmenu

我有一个带有`EditText`盒子和`ListView`. 我也`Override` `onCreateContextMenu`喜欢这个：

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        android.view.MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.comments_context, menu);
        menu.setHeaderTitle("Available Actions");

        Log.d("v: ", String.valueOf(v));

        MenuItem Edit = menu.findItem(R.id.editComment);
        MenuItem Delete = menu.findItem(R.id.deleteComment);

        AdapterContextMenuInfo info = (AdapterContextMenuInfo) menuInfo;

        int position = info.position;
        ListView lv = (ListView) v;
        int firstVisible = lv.getFirstVisiblePosition();
        View rowView = lv.getChildAt(position - firstVisible);

        ReviewUser = ((TextView) rowView.findViewById(R.id.labelReviewCommentUser)).getText()
                .toString();

        ReviewComment = ((TextView) rowView                 .findViewById(R.id.labelReviewComment)).getText().toString(); 
```

这是问题。 当我长按剪切/复制/粘贴/等框`onCreateContext`时，系统可以调用它。`EditText`长按我的也可以调用`ListView`。当系统从`EditText`.

这是解决方案：我需要在`onCreateConextMenu`创建时比较视图。但是，我不知道该怎么做，也无法在任何地方找到解决方案。我有 Logg'ed View v，以及我活动中的所有其他视图，它总是指向我的`ListView`...

我怎样才能创建这样的代码：

```
 if (view passed in is from ListView) {

            MenuItem Edit = menu.findItem(R.id.editComment);
            MenuItem Delete = menu.findItem(R.id.deleteComment);

                // do other things

          } 
```

谁能指导我？我一直在寻找一个星期...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:28:31.623

不是最终的解决方案，因为发生的事情实际上可能是一个错误，但只需将标题`EditText`移出`ListView`但移到主 XML 文件，我就可以绕过这个问题。

# c - printf 的神秘行为

> ID：14656247
> 
> 赞同：0
> 
> 时间：2013-02-01T22:38:05.693
> 
> 标签：c

我对 C 编码非常陌生。刚开始学习一个月左右。一切进展顺利，但突然间，DEV C++ 开始出现奇怪的行为。问题是现在它不显示变量值。这意味着我编写了一个 C 代码，编译它，运行程序后我发现我在代码中输入的内容没有正确显示。几天前还好，但现在我不知道它是如何或什么原因完全搞砸了。

这是问题的一个例子。一个非常简单的基本 C 代码。但最终的结果是一团糟。

```
#include <stdio.h>

main()
{
    char a = 'J';
    int x = 15;
    float y = 9.75;

    printf("%c\n%d\n%f", &a,&x,&y);

    getch();
}

Output: shows something like a triangle
    2293528
    0.000000 
```

谁能告诉我问题是什么以及如何解决？生无可恋。Dev C++ 是我能理解的唯一 IDE。我已经下载了其他几个，但无法弄清楚。

程序：Orwell Dev-C++ 版本：5.3.0.4

编译器：MinGW GCC 4.7.0 32bit（包含在 Dev-C++ 中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T22:39:27.563

您正在将这些变量的地址提供给`printf()`已被告知期望这些值的 a。这是未定义的行为。

做就是了：

```
printf("%c\n%d\n%f", a,x,y); 
```

# java - Junit 测试具有数据库访问权限的多线程应用程序

> ID：14656249
> 
> 赞同：1
> 
> 时间：2013-02-01T22:38:22.463
> 
> 标签：java, database, multithreading, junit

这是一个有趣的。

我有一个在 Tomcat 下运行并具有 servlet 访问权限的应用程序。底层实现使用**ThreadPoolExecutor**来细分任务，此时只是一个电子邮件分发器。我一直在添加 JUnit 测试，慢慢地将 cobertura 报告的代码覆盖率提高到几乎可以接受的水平。JUnit 测试的一些背景知识：

1.  在**@BeforeClass 中**，我正在为在测试环境中有效的数据库连接查找设置上下文。
2.  在 Servlet 测试中，我使用**HttpUnit**来获取**InvocationContext**，然后是 servlet 的实例。
3.  然后，我调用 servlet 中完成所有工作的主要方法，并最终调用线程管理器以获取适当的分发方法，并使用前面定义的 ThreadPool。
4.  问题发生在生成的线程中。**使用@BeforeClass**中创建的上下文设置，来自 servlet 的 DB 访问工作得很好。线程无权访问该上下文，并且无法获取数据库连接信息，从而导致线程代码失败。

所以，最重要的是，任何人都知道如何测试需要数据库访问的线程代码？甚至是一种全新的单元测试方法，可以与需要数据库访问的多线程应用程序一起使用。

任何额外的细节都可以提供给一个点。我希望我已经提供了足够的信息，不需要提供实际代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:12:41.617

我建议扩展发送到线程池的任务并将数据库上下文添加到扩展任务中，而不是在您编写的新测试中获取上下文并将其用于访问数据库。我希望它能回答你的问题，如果没有，请添加一些代码示例，以便我能够对其进行测试。

# asp.net - 运行时错误：Type X 存在于 VersionOne.dll 和 VersionTwo.dll 中

> ID：14656253
> 
> 赞同：3
> 
> 时间：2013-02-01T22:38:45.887
> 
> 标签：asp.net, telerik

我们使用 Telerik RadGrid 2.0.2.0 的 ASP.NET Web 应用程序需要更新以兼容 Windows 7。问题是导出 Excel 文件的现有功能无法生成与 Office 2007 兼容的 Excel 文件，Office 2007 是我们新的 Windows 7 通用应用程序集的一部分。

问题在于这些代码行：

```
ExportXLS.Telerik.WebControls.RadGrid RadGrid1 = new
       ExportXLS.Telerik.WebControls.RadGrid();
RadGrid1.MasterTableView.ExportToExcel(TableName, true, false); 
```

我们发现还有另一个 dll，RadGrid.Net2 版本 4.5.0.0，其中包含 2.0 版本的 dll 中不可用的“ExportToExcel2007”方法。此方法确实会生成可以使用 Excel 2007 打开的有效 Excel 文件。

```
Telerik.WebControls.RadGrid RadGrid1 = new Telerik.WebControls.RadGrid();
RadGrid1.MasterTableView.ExportToExcel2007(TableName, true, false); 
```

问题是这两个 dll 之间似乎存在巨大差异，并且切换到使用新的 dll 看起来并不容易。我们预期的解决方案是在应用程序中引用这两个 dll，但仅在创建 2007 兼容 Excel 文件时出现问题的屏幕中使用较新的 dll。

使用以下文章作为指南，

[http://blogs.msdn.com/b/ansonh/archive/2006/09/28/extern-alias-walkthrough.aspx](http://blogs.msdn.com/b/ansonh/archive/2006/09/28/extern-alias-walkthrough.aspx)

我们做了以下小改动：

1.  在 web 项目中添加了对“RadGrid.Net2.dll”的引用，并将该引用的别名属性调整为“ **ExportXLS** ”

2.  将此添加到 ExportExcel.aspx.cs 代码隐藏页面的顶部：

    外部别名**ExportXLS** ;

3.  然后，通过引用 radgrid.net2.dll 的限定引用，使用新的 dll 实例化一个 radgrid：

    **ExportXLS** .Telerik.WebControls.RadGrid RadGrid1 = new **ExportXLS** .Telerik.WebControls.RadGrid();

4.  修改 ExportToExcel 方法以使用 2007 对应方法：

    RadGrid1.MasterTableView。**ExportToExcel2007**（表名，真，假）；

这解决了 ExportExcel.aspx 页面的问题，并且屏幕现在生成了与 Excel 2007 兼容的 Excel 电子表格，但是，我们惊讶地发现此更改破坏了使用 RadGrid 的应用程序中的其他页面。这是错误：

```
 c:\WINNT\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\7ff38b9a\2680aee3\App_Web_systemmapsearch.ascx.a97e7c59.tlmhafnf.0.cs(251): error CS0433: 

The type 'Telerik.WebControls.GridRowIndicatorColumn' 
exists in both 
    'c:\WINNT\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET 
    Files\root\7ff38b9a\2680aee3\assembly\dl3\cd8ec314\002177c0_d2e8cb01\RadGrid.DLL' 
and 
    'c:\WINNT\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\7ff38b9a\2680aee3\assembly\dl3\428a2b2d\002177c0_d2e8cb01\RadGrid.Net2.DLL' 
```

我的期望是其他网页将继续使用不合格的旧 2.0.2.0 版本的 RadGrid.dll 并继续工作，但事实并非如此。

以下是用户控件 SystemMapSearch.ascx 后面的代码中的一些代码，该代码无法加载：

```
<%@ Register TagPrefix="radG" Namespace="Telerik.WebControls" Assembly="RadGrid" %>
<radg:radgrid id="RadGrid1" cssclass="RadGrid" runat="server" allowpaging="True" allowsorting="True" gridlines="none"
        pagesize="20" width="100%" borderwidth="0" AutoGenerateColumns="False"> 
```

我试图更改 NameSpace 指令以包含全局命名空间，但这会导致引用无效：

```
<%@ Register TagPrefix="radG" Namespace="global::Telerik.WebControls" Assembly="RadGrid" %> 
```

为什么更改 ExportExcel.aspx 页面会破坏其他页面，我该怎么做才能解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T07:40:46.840

嗨，也许这些东西可以帮助您解决问题。

*   出于某种原因，您的应用程序加载了两个不同版本的 Telerik.Web.UI 程序集。这可能是因为您在 GAC 中有两个 Telerik.Web.UI 程序集。

    要**解决此问题**，您可以检查您的项目并确保无论您在何处引用 Telerik.Web.UI 程序集（在 web.config 或 ASPX 页面中），您使用的是完全限定的程序集名称。例如：

    “Telerik.Web.UI，版本=2009.2.701.20，文化=中性，PublicKeyToken=121fae78165ba3d4”

    而不仅仅是“Telerik.Web.UI”。完全限定名称包括版本号，因此 ASP.NET 不会混淆为同时加载两个程序集。**参考：[编译错误消息：“Telerik.Web.UI.RadFileExplorer”类型存在于两者中。](http://www.telerik.com/community/forums/aspnet-ajax/general-discussions/compile-error-message-the-type-telerik-web-ui-radfileexplorer-exists-in-both.aspx)**

*   将现有的 Telerik RadControls 应用程序（包括 RadChart）升级到 RadControls for ASP.NET AJAX 时，您可能会收到以下错误：

    错误 1 ​​类型为“Telerik.Charting. 存在于 'c:\WINDOWS\assembly\GAC_MSIL\Telerik.Charting...\Telerik.Charting.dll' 和 'c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files.. .\RadChart.Net2.DLL'

    这个错误的原因是因为 RadChart（3.x 和更高版本）和 RadControls for ASP.NET AJAX Chart 使用共享代码。他共享代码是 Telerik.Charting.dll 程序集的形式出于向后兼容性的原因，已在 RadChart.Net2.dll 中进行了 ILM 合并，并为 RadControls for ASP.NET AJAX 单独提供。每当您尝试同时引用 RadChart.Net2.dll 和 Telerik.Charting.dll 时，该错误就会显现出来。

    **有两种方法可以解决该问题：**

    1.  如果您正在迁移项目以使用 RadControls for ASP.NET AJAX，您最初可能希望从 Web.config 文件中删除对 Telerik.Charting.dll 的引用。在这种情况下，您将使用旧的 ASP.NET 图表，并且不需要套件附带的 Telerik.Charting.dll。Telerik.Charting.dll 不是 Chart 以外的 ASP.NET AJAX 控件的操作所必需的。

    2.  如果您已经在使用 RadChart for ASP.NET AJAX，那么您需要删除对 RadChart.Net2.dll 的引用并继续使用 Telerik.Charting.dll

    请记住，用于 ASP.NET AJAX 的 RadChart 和 RadChart 4.x 具有 99% 的相同功能。取决于您的个人喜好来决定您想使用哪一个。最显着的区别是程序集名称以及 RadChart for ASP.NET AJAX 使用 HttpHandler 来显示图像，而 RadChart 4.x 出于向后兼容性的原因仍然使用 RadControls\Image.aspx。**参考：[Telerik.Charting。Telerik.Charting.dll 和 RadChart.Net2.dll](http://www.telerik.com/help/aspnet-ajax/chart-troubleshoot-reference-assemblies.html)**

*   这是一个通用错误，通常意味着您引用的程序集与实际使用的程序集不匹配。很可能您有并行报告安装和不匹配的参考。请使用升级向导升级包含 Telerik 报告的项目并重建它们。如果您添加了手动引用，即 Copy Local = True，则从 \bin 文件夹中删除所有程序集，在项目中重新添加正确的引用，然后重建项目。如果问题仍然存在，请确保您已在每个引用中指定了完整的程序集限定名称。例如：

    <%@ Register assembly="Telerik.ReportViewer.WebForms, **Version=5.0.11.328, Culture=neutral, PublicKeyToken=a9d7983dfcc261be**" namespace="Telerik.ReportViewer.WebForms" tagprefix="telerik" %>

    而不是：

    <%@ Register TagPrefix="telerik" Assembly="Telerik.ReportViewer.WebForms" Namespace="Telerik.ReportViewer.WebForms" %>
    **参考：[Telerik.Reporting.Report 存在于两者中......](http://www.telerik.com/community/forums/reporting/telerik-reporting/telerik-reporting-report-exists-in-both.aspx)**

*   将 batch="false" 属性添加到 web.config 文件的“编译”元素。

    出现此问题的原因是 ASP.NET 2.0 使用应用程序引用和应用程序的文件夹结构来编译应用程序的方式。如果应用程序的 web.config 文件中元素的批处理属性设置为 true，则 ASP.NET 2.0 会将应用程序中的每个文件夹编译成一个单独的程序集。
    **参考：[ASP.Net 错误：“类型 'foo' 存在于“temp1.dll”和“temp2.​​dll](https://stackoverflow.com/questions/371426/asp-net-error-the-type-foo-exists-in-both-temp1-dll-and-temp2-dll) ”中**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T23:01:32.727

我在我从事的一个旧项目中遇到了类似的问题。

我知道删除临时文件可以解决问题，因为我们能够编译和部署 Web 应用程序（每个功能都按预期工作）。

我没有深入研究为什么会出现这种错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T20:43:46.907

我实际上从未这样做过，但我相信您可以为新的 Telerik dll 编写一个包装器 dll，只公开所需的功能，然后在您的项目中引用该包装器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T16:18:08.157

我更改了所有出现的程序集“Radgrid”

```
<%@ Register TagPrefix="radG" Namespace="global::Telerik.WebControls" Assembly="RadGrid" %> 
```

到

```
<%@ Register TagPrefix="radG" Namespace="global::Telerik.WebControls" Assembly="RadGrid.Net2" %> 
```

我认为，在我进行此更改之前，即使我不再引用旧的 radgrid.dll，它仍然会在 bin 文件夹中拾取旧的 radgrid.dll。

无论如何，当我小心地改变了所有出现的 Assembly 属性，甚至从 bin 文件夹中删除了旧的未使用的 dll 时，它就起作用了。

# mapreduce - Couchbase 延迟和视图

> ID：14656255
> 
> 赞同：2
> 
> 时间：2013-02-01T22:38:50.280
> 
> 标签：mapreduce, couchbase

我认为 Couchbase 可能能够解决我当前项目中的很多问题，但我首先需要确定一些基本的事情：

1）假设我有一个有 10 个节点的集群，我向节点 A 添加一个文档。然后我向节点 B 询问该文档，我一定会得到该文档吗？我问节点 B 是否存在风险，它认为该文档不存在？

2）现在说我写了一个视图，以便我可以看到某个作者的所有文档。我将一个文档添加到节点 A。我知道该文档在被索引时出现在视图中存在一定的滞后时间。我想知道的是延迟时间会不会非常小，因为我只索引 1 个文档？

基本上，我有一个网站，可以管理大约 1 亿份文档。任何时候都有成千上万的用户，因此大约有 10 到 20 台服务器在运行。在当前架构下，如果我将文档插入节点 A，当我查找该文档时，我很可能会访问节点 B 来获取它。所以我的总体问题是：

用户将文档插入节点 A，然后我向他们展示所有文档的屏幕。如果我使用的是 Couchbase，则此屏幕将是查询以 Author 为键的视图的结果。用户看不到他们刚刚发布的文档的可能性有多大？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T20:11:27.873

1.  You will always be able to get the document back no matter what node you ask. If you use one of the Couchbase SDK's then they will always make sure they ask the node that has the document. If you use moxi then it will do the same so you shouldn't need to worry about this.

2.  This depends on how heavy your write workload is. In the current architecture (2.0) a document must hit disk before it is indexed. If you have a heavy write workload then the lag will increase since there will be a longer line of items that need to be written to disk. I suggest doing benchmarking with your specific application requirements in mind for this use case and posting any problems or issues you have on the Couchbase forums.

Also, you will want to take a look at the commands that have durability requirements and doing queries with the stale query parameter set to false. The durability commands will allow you to have you application block until an item hits disk and doing a query with stale set to false will make sure your view is up to date with the latest items put into Couchbase. This process will ensure your users always see the latest results of you

EDIT: Couchbase 3.0 no longer requires items to be persisted to disk before they can be queried.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T21:01:34.057

视图更新是一个可调参数。默认情况下，线程每 5 秒唤醒一次，检查更改并在找到时更新索引。调整这些参数或使用 view 参数`stale=false`进行查询。

从“自动索引更新”下的文档中：

除了可配置的更新间隔，您还可以在后台自动更新所有索引。您可以通过两个参数配置自动更新，更新时间间隔（以秒为单位）和视图引擎更新索引之前发生的文档更改次数。这两个参数是 updateInterval 和 updateMinChanges：

*   updateInterval：时间间隔，以毫秒为单位，默认为 5000 毫秒。在每个 updateInterval 时，视图引擎都会检查磁盘上文档突变的数量是否大于 updateMinChanges。如果为真，则触发视图更新。存储在磁盘上的文档可能会滞后于内存中的文档数十秒。
*   updateMinChanges：重新索引之前发生的文档更改次数，默认为 5000 次更改。

[http://docs.couchbase.com/admin/admin/Views/views-operation.html](http://docs.couchbase.com/admin/admin/Views/views-operation.html)

# java - 按时区转换日期

> ID：14656260
> 
> 赞同：1
> 
> 时间：2013-02-01T22:39:24.370
> 
> 标签：java, date, calendar, timezone

在上面的代码中，我想将服务器的时区 (GMT-02:00) 的日期转换为我的设备 (GMT-03:00) 的时区。但我总是有相同的服务器日期。我做错了什么？

时区 timeZoneServer = TimeZone.getTimeZone(timeZoneServerString); 长时间 = new Long(Long.valueOf(timeInMilis));

```
 Calendar calendarDateServer =   Calendar.getInstance(timeZoneServer);
        calendarDateServer.setTimeInMillis(time);
        long miliServer = calendarDateServer.getTimeInMillis();

        TimeZone timeZoneMeu = TimeZone.getDefault();
        Calendar meuCalendario =  new GregorianCalendar();
        meuCalendario.setTimeZone(timeZoneMeu);

        meuCalendario.setTimeInMillis(miliServer);  
        Date transformedDate = meuCalendario.getTime();

        return transformedDate; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:45:57.767

> 我做错了什么？

您假设 a`Date`有一个时区开始。它没有。A`Calendar`确实如此，但 a`Date`距离Unix 纪元*仅几毫秒。*它不知道日历系统或时区。这只是一个时间点。

目前尚不清楚您想对结果做什么 - 但如果是格式化它以进行显示，只需使用*并*`SimpleDateFormat`设置时区即可。

 *我还强烈建议您使用[Joda Time](http://joda-time.sf.net)而不是内置类型……这是一个*更*明智的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T22:11:35.653

# java.time

Java 8 及更高版本内置了[java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)框架。受 Joda-Time 启发，由 JSR 310 定义，并由 ThreeTen-Extra 项目扩展。这些新的 java.time 类取代了与 Java 的最早版本捆绑在一起的臭名昭著的麻烦的旧日期时间类，`java.util.Date`/ `.Calendar`。

java.time 的基础知识... An是[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)`Instant`时间线上的一个时刻。应用时区 ( ) 以获得.`ZoneId``ZonedDateTime`

您的示例代码仅使用[offset-from-UTC](https://en.wikipedia.org/wiki/UTC_offset)。时区是一个偏移量*加上*一组关于调整异常情况的规则，例如夏令时 (DST)。因此，尽可能使用[适当的时区名称。](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)但如果不可能，[`ZoneOffset`](http://docs.oracle.com/javase/8/docs/api/java/time/ZoneOffset.html)请使用[`OffsetDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html).

顺便说一句，一般的最佳做法是将您的服务器保持在[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)中。但这是另一个讨论。

首先从您的服务器获取当前日期时间。

```
Instant now = Instant.now();  // UTC.
ZoneOffset offsetServer = ZoneOffset.of ( "-02:00" ); // Or ZoneOffset.systemDefault ()
OffsetDateTime odtServer = OffsetDateTime.ofInstant( instant , offsetServer ); 
```

或者我们可以将其缩短为：

```
ZoneOffset offsetServer = ZoneOffset.of ( "-02:00" ); // Or ZoneOffset.systemDefault ()
OffsetDateTime odtServer = OffsetDateTime.now ( offsetServer ); 
```

定义所需的偏移量。将该偏移量应用于服务器的当前日期时间以进行调整。

```
ZoneOffset offsetDesired = ZoneOffset.of ( "-03:00" );
OffsetDateTime odtDesired = odtServer.withOffsetSameInstant ( offsetDesired ); 
```

转储到控制台。

```
System.out.println ( "instant: " + instant + " | odtServer: " + odtServer + " | odtDesired: " + odtDesired ); 
```

> 瞬间：2016-01-22T22:16:14.386Z | odt服务器：2016-01-22T20:16:14.386-02:00 | odtDesired: 2016-01-22T19:16:14.386-03:00

默认情况下，这些日期时间值的文本表示在`toString`使用[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)标准的方法中格式化。您可以根据需要定义其他格式；在 StackOverflow 上搜索许多示例。*

# jquery - 带有子菜单的jQuery三重嵌套菜单

> ID：14656265
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:39:33.657
> 
> 标签：jquery, wordpress, menu, nested

我没有前进，所以我需要你的帮助。

这是 wordpress 的三重嵌套菜单。它看起来像这样：

```
<ul class="sub-menu">
    <li><a href="#">Link</a></li>
    <li><a href="#" class="has_children">Link with children</a>
        <ul class="sub-menu">
            <li><a href="#">Link</a></li>
            <li><a href="#" class="has_children">Link with children</a>
                 <ul class="sub-menu">
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                </ul> 
            </li>
         </ul>
    </li>
</ul> 
```

我想为`has_children`每个具有`ul.sub-menu`.

我现在的代码是：

```
jQuery.each(jQuery('ul.sub-menu li').has('ul.sub-menu'), function() {
    jQuery('a', this).addClass('has_children');
}) 
```

这适用于第一个 ul.sub-menu li，但所有其他子链接现在都有该类`has_children`，即使它们没有子菜单。

编辑[解决方案]：

```
jQuery.each(jQuery('ul.sub-menu li').has('ul.sub-menu'), function () {
jQuery('>a', this).addClass('has_children'); 
```

})

那成功了！：） 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:04:08.480

您需要将选择器更改为仅匹配`a`当前中的直接，`li`否则它将匹配`a`所有级别中的所有内容。仅用于`>a`匹配直接`a`，类似于：

```
jQuery.each(jQuery('ul.sub-menu li').has('ul.sub-menu'), function () {
    jQuery('>a', this).addClass('has_children');
}) 
```

* * *

[**DEMO**](http://jsfiddle.net/tNNmN/) - 只匹配`a`当前的直接`li`

* * *

在演示中，我删除`has_children`了初始 HTML 中的所有类，以表明它们确实是按脚本预期添加的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:09:13.847

[jsFiddle](http://jsfiddle.net/Lj8xX/5/)

HTML：

```
<ul class="sub-menu">
    <li><a href="#">Link</a>
    </li>
    <li><a href="#">Link with children</a>
        <ul class="sub-menu">
            <li><a href="#">Link</a>
            </li>
            <li><a href="#">Link with children</a> 
                <ul class="sub-menu">
                    <li><a href="#">Link</a>

                    </li>
                    <li><a href="#">Link</a>

                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

jQuery：

```
$('ul.sub-menu li').each(function () {
    if ($(this).find('ul').hasClass('sub-menu'))  $(this).find('a:first').addClass('has_children');
}); 
```

# mysql - 使用PHP检查sql查询列是否有某些数据

> ID：14656272
> 
> 赞同：0
> 
> 时间：2013-02-01T22:40:05.410
> 
> 标签：mysql, database, wordpress, if-statement

我正在使用 Wordpress 中的外部数据库，并在列具有特定值时尝试使用 IF 语句。因此，“期间”列将具有“周”、“月”或“年”的值。我希望能够基于此更改数据。我是否朝着正确的方向前进？任何帮助表示赞赏。

```
$recurring_events = $events_db->get_results(
    "
    SELECT gc_event_id, period
    FROM gc_event_recurring
    WHERE gc_event_id = '$masterID'
    "
);

foreach ($recurring_events as $recurring_event) :
if ($recurring_events['period'] === 'month') { <-- NEED HELP HERE

// Do Something

} else if ($recurring_events['period'] === 'year') {

// Do Something

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:54:42.910

By default, `get_results` returns objects instead of arrays. It also looks like you're referencing `$recurring_events` where you should be referencing `$recurring_event`.

Try using this line instead within the foreach, where you said you need help:

```
if ($recurring_event->period === 'month') { 
```

# excel - Excel 帮助：使用一个单元格中的文本来引用另一个工作表中的值

> ID：14656273
> 
> 赞同：0
> 
> 时间：2013-02-01T22:40:02.197
> 
> 标签：excel

我有一个工作表，在一个列中列出了我所在州的所有代表，在另一列中列出了他们所代表的县。其中一些代表一个县，而另一些代表多个县（一些单元格表示“A 和 B”，而其他单元格表示“A、B 和 C”）。

在另一张工作表上，我在一栏列出了所有县，第二栏是被诊断患有某种疾病的人数，第三栏是该县患有该疾病的总人数。

基本上，我希望能够将这些合并在一起，这样我就会有这样的东西：

第 1 列：约翰·史密斯

第 2 列：X 县、Y 县和 Z 县

第 3 列：389（在第二张工作表中找到的所有 3 个县值的总和）

第 4 列：4392（将第二张工作表上的所有 3 个县值加起来）

有没有办法利用第一个工作表上的第二列（每个代表所代表的县）自动参考第二个工作表的值并将它们加在一起，从而为每个代表提供其下的病例总数？

当然，我可以手动完成。但是，我希望它能够在明年轻松更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T04:29:38.300

我的直觉是使用 VBA 获取第 2 列，展开列表，在工作表 2 中搜索从第 2 列获取的值，然后在第 3 列中构建一个公式以引用在第 2 列中找到的值。第 4 列也是如此。喜欢：

```
Sub Stuff()
    Dim numberOfReps As Integer
    Dim numberOfCounties As Integer
    numberOfReps = 20
    numberOfCounties = 25

    Dim i As Integer
    Dim counties As String
    Dim diagnosedEquation As String
    Dim livingEquation As String
    Dim rawVal As String

    For i = 1 To numberOfReps
        rawCounties = Sheets("Sheet1").cells(i, 2).Value
        countiesArray = Split(rawCounties, ", ")

        For j = 1 To numberOfCounties
            rawVal = Sheets("Sheet2").cells(j, 1).Value
            If (ListContains(rawVal, countiesArray)) Then
                If (livingEquation = "") Then
                    livingEquation = "=SUM(Sheet2!C" & j
                Else
                    livingEquation = livingEquation & "+Sheet2!C" & j
                End If
                If (diagnosedEquation = "") Then
                    diagnosedEquation = "=SUM(Sheet2!B" & j
                Else
                    diagnosedEquation = diagnosedEquation & "+Sheet2!B" & j
                End If
            End If
        Next j

        If (Not diagnosedEquation = "") Then diagnosedEquation = diagnosedEquation & ")"
        If (Not livingEquation = "") Then livingEquation = livingEquation & ")"

        Sheets("Sheet1").cells(i, 3).Value = diagnosedEquation
        Sheets("Sheet1").cells(i, 4).Value = livingEquation
        diagnosedEquation = ""
        livingEquation = ""
    Next i
End Sub

Private Function ListContains(needle As String, haystack As Variant)
    For Each straw In haystack
        If (needle = straw) Then ListContains = True
    Next straw
End Function 
```

我已经对此进行了测试，它会总结一下。您可能需要针对您的设置对其进行一些调整，例如工作表名称（或索引）。

# iphone - NSNotification 未发送

> ID：14656274
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:40:05.407
> 
> 标签：iphone, ios, objective-c, nsarray, nsnotificationcenter

我正在使用**NSNoficationCenter**将数组的值从一个**ViewConroller 传递**到另一个。

**ViewControllerB**是**ViewController A的子视图**

在**ViewController A**中，我有一个将数组作为参数的方法，一旦该方法接收到数组，我将使用以下代码来存储数组的值

```
-(void)gettingValueOfArray:(NSArray*)newArray{

 NSDictionary *storeArray = [NSDictionary dictionaryWithObjectsAndKeys:newArray,@"newArray", nil];
[[NSNotificationCenter defaultCenter] postNotificationName:@"loadArray" object:self userInfo:storeArray];

} 
```

在**ViewController B我使用以下内容在****viewDidLoad** 中接收通知

 **```
-(void)viewDidLoad{
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadArray:) name:@"loadArray" object:nil];

} 
```

然后用这个方法保存数组的值

```
-(void)saveArray:(NSNotification *)notfication{

NSArray *saveValueOfArray = [notification userinfo]objectForKey:@"newArray"];

NSLog(@"The Value of the Notification Array is : %u", saveValueOfArray.count)

} 
```

现在我对这段代码有两个问题。

1）仅在ViewController B中的viewDidLoad被调用一次后才发送通知，第一次不起作用。

2）一旦开始工作，每次调用发送的通知都会增加1

这是第 4 次调用通知时的控制台输出，它一直在调用它所调用的所有内容。

```
The Value of the Array is : 10
The Value of the Array is : 10
The Value of the Array is : 10
The Value of the Array is : 10 
```

谁能指出问题可能是什么？

有没有更简单的方法在两个控制器之间传递数组的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:36:48.477

将 UIViewController 放在另一个 UIViewController 上似乎并不正确，而且您的代码有点“小”奇怪，但好吧……因为它是星期五，我心情很好，我将为您提供一个发布通知的小例子。

在发布 ViewController ...

```
-(void)gettingValueOfArray:(NSArray*)newArray{

NSDictionary *storeArray = 
[NSDictionary dictionaryWithObjectsAndKeys:newArray,@"newArray", nil];

[self postNotification:@"loadArray" withObject:storeArray];//calls postNotification

    }

-(void)sendNotification:(NSNotification *)notification{

        [[NSNotificationCenter defaultCenter] postNotification:notification];
        [notification release];

}

-(void)postNotification:(NSString *)notification withObject:(id)obj{

NSNotification *n = [NSNotification notificationWithName:notification object:obj];
[n retain];
[self performSelectorOnMainThread:@selector(sendNotification:) withObject:n waitUntilDone:NO];//calls sendNotification on the main thread        

} 
```

在接收器视图控制器上...

```
-(void)viewWillAppear:(BOOL)animated{

[super viewWillAppear:animated];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performDataLoad:)name:@"loadArray" object:nil];

}

//NOTE: if you want to receive only one notification at your ViewController B then remove the observer here

-(void)saveArray:(NSNotification *)n{

NSArray *saveValueOfArray = [[n object]objectForKey:@"newArray"];

NSLog(@"The Value of the Notification Array is : %u", saveValueOfArray.count)

[[NSNotificationCenter defaultCenter] removeObserver:self name:@"loadArray" object:nil];

}

//Another NOTE: If you want multiples notifications then remove the observer once you are done with the class (i suppose that you in some point remove the subview) 

-(void)viewDidDisappear:(BOOL)animated{

[super viewDidDisappear:animated];

[[NSNotificationCenter defaultCenter] removeObserver:self name:@"loadArray" object:nil];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:18:23.033

> 1）只有在ViewController B中的viewDidLoad被调用一次后才发送通知，第一次不起作用

那是因为那是在通知中添加观察者的地方。如果您想更早地观察，请考虑将此代码移动到 init 方法中。

> 2）一旦开始工作，每次调用发送的通知都会增加1

每个添加的观察者都没有被删除。因此，这些实例将继续被观察和处理。考虑在任务结束时移除观察者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:54:05.413

this is a classic case of why you should not nest UIViewControllers. Its explained here in a much better way [http://blog.carbonfive.com/2011/03/09/abusing-uiviewcontrollers/](http://blog.carbonfive.com/2011/03/09/abusing-uiviewcontrollers/)

(Assuming you are not using the addChildViewController method to nest your uiviewcontroller B.)

Instead of having a nested viewcontroller B, just use a UIView B, and add it as a subview to view controller A's view.

You have to figure out a better way to implement viewControllerB's viewDidLoad/Appear's functionality though.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T02:08:23.913

由于每次在视图上推送或添加视图时都会调用 viewdidLoad 函数。所以每次你的对象将被添加到通知中心并增加你在 SecondViewController 上的通知调用的计数所以放置你的添加观察者的最佳位置是 initWithnib 函数所以放置你的代码

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadArray:) name:@"loadArray" object:nil]; 
```

在`initWithNibName`功能上。它会按预期工作**

# java - 如何使用 javac 工具解析器从 java 文件中读取内联注释？

> ID：14656275
> 
> 赞同：6
> 
> 时间：2013-02-01T22:40:08.077
> 
> 标签：java, parsing, javac

我正在使用来自 tools.jar（即`JavaCompiler`）的 javac 来解析 java 文件。我使用`TreePathScanner`. 到目前为止，一切似乎都很好，因为我可以解析导入、包名、类名、方法名、指令......

但是我确实*对内联*注释有问题——我不能简单地让它们出现在创建的 AST 树中，或者访问它们。但是，我可以阅读类、方法等的**javadoc 注释，但不能阅读内联注释。**

如何以最佳方式阅读内联评论？我正在查看 netbeans 源代码（因为它也使用 javac 进行解析），但我找不到任何关于它的内容。

我绝望的解决方案是使用源文件的语句位置，然后手动解析两个语句之间的所有内容以进行注释。或类似的东西，但在两个树节点之间。

有谁知道更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T00:12:16.510

你不能。编译器将它们丢弃。编译器总是这样做。Java 编译器不会丢弃 Javadoc 注释，只是因为 Javadoc 使用编译器来查找它们，并且 Javadoc 人员与编译器人员聚在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:26:13.257

“编译器解析器”和“再工程解析器”之间的关键区别在于捕获的有关布局、注释和文本格式的信息。正如其他人所观察到的，大多数编译器都会丢弃所有这些信息，因为它与编译为低级代码无关。

类似地，经典的解析器生成器（如 JavaCC、ANTLR 等）几乎没有提供对捕获/重新生成此信息的支持。

相反，重新设计解析器用于分析代码*和*注释，有时甚至在不丢失（或适当地修改注释）的情况下修改代码。对于带有注释的代码分析，您不能丢弃注释 :-} 对于代码修改，如果您根据原始代码重新生成更改的代码，如果更改的代码保留代码布局、注释和文字“格式”（例如，将十六进制文字重新生成为十进制值是合法且等效的，但会使原作者非常不高兴）。为此，重新设计解析器需要特殊的词法分析器来捕获所有这些数据，并解析不会丢弃这些数据的机器。

我们的 DMS 软件再造工具包包括一个作为通用机器的再造解析器；基于 DMS 的解析器适用于多种语言（包括 OP 对 Java 的兴趣）。DMS 捕获所有注释/布局/格式信息。分析工具可以访问这一切。

TXL 和Stratego 也为此提供了一些支持。

# javascript - jQuery上奇怪的过滤失败

> ID：14656285
> 
> 赞同：0
> 
> 时间：2013-02-01T22:40:51.100
> 
> 标签：javascript, jquery, html-table

最近，我想开发一个简单的表格过滤网络应用程序，因为我发现大学的课程选择页面没有功能并且难以浏览一些符合特定条件的课程。因此，我为所需的功能编写了一些代码:)

我是 javascript 新手，这个过滤网页是我的第一个包含 javascript 代码的小项目。当然，我在这个过程中使用了 JQuery，版本 1.8.3。

我的页面布局如下：

4个过滤器的功能

1.  课程代码 - 选择时，使用 AJAX 将原始源中的表格提取到过滤器 div 的下方（只是一个巨大的`<table>`元素）。
2.  课程日——选中后，不包含该日的行将被隐藏。
3.  课程时间 - 就像 2。
4.  主要限制 - 这是有问题的过滤器。首先让我们看一下表结构。

![桌子的外观](../Images/962f777e7803c6eb3a950b5accbd674e.png)

此屏幕截图来自原始来源。现在您看到了主要限制列是如何填充的，让我们来谈谈过滤器。

这是我的页面截图： ![过滤器概述](../Images/ea36efe775357c1d5d0d37dd8e6c398e.png)

前 3 个选项完美运行。这是给你一个想法的js代码。以下是日过滤器。

```
$('#gunler').change(function () {
    if ($(this).val() != "Seçiniz/Select") { //if an option for gunler (days) is selected
        $(".dersprg tr").show(); //show all rows first
        applyFilter(); //apply previously selected filters (hours, major restriction)
        $(".dersprg tr td:nth-child(6):missing('" + $(this).val() + "')").parent().hide(); //hide row that dont 
        $(".dersprg td:contains('CRN')").parent().show(); //show the header of the table  //contain selected
    } //option
    else { //if the option is "defaulted"
        $(".dersprg td").parent().show(); //show all rows
        applyFilter(); //apply previously selected filters
        $(".dersprg td:contains('CRN')").parent().show(); //show header of the table
    }
}); 
```

好吧，主要限制过滤器具有相同的结构，但它会产生一些奇怪的输出。例如，当从下拉列表中选择 BLGE 时，过滤器工作正常。However when MAT is chosen, even though there is one course that is opened just for MAT students, the filter hides that row as well. 一些 BLG 课程也是如此。有 3-4 门课程的主要限制为“BLG”，当我从下拉列表中选择 BLG 时，会显示包含 BLG 以及其他专业的其他课程，但是隐藏了一些仅将 BLG 作为主要限制的行。我仔细检查了一切，我似乎以某种方式错过了故障点。

奇怪的是，当我从[jsfiddle](http://jsfiddle.net/WbppU/1/)工作相同的代码时，**它工作得很好！** 这是jsfiddle代码：

```
$.expr[':'].missing = function (elem, index, match) {
    return (elem.textContent || elem.innerText || Sizzle.getText([elem]) || "").indexOf(match[3]) == -1;
}
$(".dersprg tr").show();
$(".dersprg tr td:nth-child(12):missing('MAT')").parent().hide();
$(".dersprg td:contains('CRN')").parent().show(); 
```

html 代码是我之前向您展示的原始源代码，结果是正确过滤的单行！

![jsfiddle](../Images/e2c628d69a5f328a6eca741fbf22d790.png)

但是，在 localhost 或网页上，代码无法按预期工作。我正在使用 Google Chrome 版本 24.0.1312.56 m。我也检查了 Mozilla Firefox 的过滤器，但结果是一样的。

你能告诉我哪里出了问题，我该如何纠正它？

**一些我认为有用的附加信息：**

我使用了一个名为 的函数`applyFilter()`，这是它的主体：

```
function applyFilter() {
    if ($('#saatler').val() != "Seçiniz/Select") {
        $(".dersprg tr:missing('" + $('#saatler').val() + "')").hide();
    }
    if ($('#bolumler').val() != "Seçiniz/Select") {
        $(".dersprg tr:missing('" + $('#bolumler').val() + "')").hide();
    }
    if ($('#gunler').val() != "Seçiniz/Select") {
        $(".dersprg tr:missing('" + $('#gunler').val() + "')").hide();
    }
} 
```

以下是为主要限制过滤器创建选项的方式：

```
<option selected value="Seçiniz/Select">Seçiniz/Select</option>
    <?php
    $bolumler = str_getcsv(file_get_contents('bolumler.csv'));
    foreach ($bolumler as $bolum)
        echo '<option value="' . $bolum . '">' . $bolum . '</option>';
    ?>
</select> 
```

和“bolumler.csv”的内容

> BIO，BIOE，BLG，BLGE，CEV，CEVE，CHZ，CHZE，DEN，DENE，DUIK，EHB，EHBE，ELE，ELH，ELK，ELKE，END，ENDE，EUT，EUTE，FIZ，FIZE，GEM，GEME， GEMK，GEO，GEOE，GID，GIDE，GMIK，ICM，IML，IMLE，INS，INSE，ISL，ISLE，JDF，JEF，JEFE，JEO，JEOE，KIM，KIME，KMM，KMME，KON，通力，MAD， MADE、MAK、MAKE、MAT、MATE、MET、METE、MIM、MIME、MTO、MTOE、PEM、PEME、PET、PETE、SBP、SBPE、TEK、TEKE、TEL、THO、UCK、UCKE、UZB、UZBE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:48:39.837

原因是在小提琴中而不是在您的页面上有效，因为`Sizzle`它没有在您的页面上定义（但它在小提琴中定义）。您可以`Sizzle.js`单独包含，或者使用`$.find`jQuery 通过 公开 Sizzle 选择器引擎`$.find`，或者您可以使用更简单的方法来获取文本以比较您的`:missing`选择器（`$(elem).text()`如下所示）。

```
$.extend($.expr[':'], {
    "missing": function (elem, index, match) {
        var text = $(elem).text(),
            test = new RegExp('\\b' + match[3] + '\\b'); // test on word boundaries
        return !text.match(test);
    }
}); 
```

我冒昧地将比较更改为使用单词边界，因为它将区分包含子字符串的单元格。

例如，如果我试图查找缺少的单元格，`FIZ`您当前的`:missing`选择器将无法区分包含`FIZ`和`FIZE`（作为`FIZE`contains `FIZ`）的单元格。通过更改选择器来查找单词边界之间的标记，这不再是问题。

在重构您的代码并切换到 jQuery AJAX 而不是您的自定义 AJAX 例程（因为它看起来更简单）时，我还采取了一点自由。

使用控制台，我能够让以下代码在 Chrome（版本 24.0.1312.57 m）中按预期工作：

```
//Gun Saat ve Bolum Filtreleri
$(document).ready(function () {
    'use strict';
    var fetchPage = function fetchPage(fb) {
        var t = $('#table');
        if (!fb) {
            t.empty();
        } else {
            $.ajax({
                "url": "http://ilbeyli.fast-page.org/ITUDersProg/fetch.php",
                "data": {
                    "url": "http://www.sis.itu.edu.tr/tr/ders_programlari/LSprogramlar/prg.php?fb=" + fb
                },
                "success": function (data, textStatus, jqXHR) {
                    t.html(data);
                }
            });
        }
        $('#saatler, #gunler, #bolumler').val('Seçiniz/Select');
    }, changeHandler = function changeHandler(e) {
        var self = $(this),
            dersprg = $('.dersprg'),
            gun = $('#gunler').val() !== 'Seçiniz/Select' ? $('#gunler').val().trim() : '',
            saat = $('#saatler').val() !== 'Seçiniz/Select' ? $('#saatler').val().trim() : '',
            bolum = $('#bolumler').val() !== 'Seçiniz/Select' ? $('#bolumler').val().trim() : '',
            gunRows = $(".dersprg tbody tr td:nth-child(6)").filter(":missing('" + gun + "')").parents('tr'),
            saatRows = $(".dersprg tbody tr td:nth-child(7)").filter(":missing('" + saat + "')").parents('tr'),
            bolumRows = $(".dersprg tbody tr td:nth-child(12)").filter(":missing('" + bolum + "')").parents('tr');
        dersprg.find('tbody tr').show();    // show all rows
        if (gun) {
            gunRows.hide();     // hide rows that do not contain `gun`
        }
        if (saat) {
            saatRows.hide();    // hide rows that do not contain `saat`
        }
        if (bolum) {
            bolumRows.hide();   // hide rows that do not contain `bolum`
        }
        // show the header rows
        dersprg.find('td:contains("CRN")').parents('tr').show();
    };
    $('#derskodu').change(function (e) {
        var val = $(this).val();
        fetchPage(val);
    });
    $.extend($.expr[':'], {
        "missing": function (elem, index, match) {
            var text = $(elem).text(),
                test = new RegExp('\\b' + match[3] + '\\b'); // test on word boundaries
            return !text.match(test);
        }
    });
    $('#gunler, #saatler, #bolumler').change(changeHandler);
}); 
```

# arrays - 多行 Fortran 95 数据列表

> ID：14656286
> 
> 赞同：1
> 
> 时间：2013-02-01T22:40:52.227
> 
> 标签：arrays, list, fortran, fortran77, fortran95

```
 integer M

   character (len = 20) dict(50)

   data dict/'gum','sin','for','cry','lug','bye','fly','ugly', 
 M           'each','from','work','talk','with','self',
 M           'pizza','thing','feign','fiend','elbow','fault',
 M           'dirty','budget','spirit','quaint','maiden',
 M           'escort','pickax','example','tension','quinine',
 M           'kidney','replica','sleeper','triangle',
 M           'kangaroo','mahogany','sergeant','sequence',
 M           'moustache','dangerous','scientist','different',
 M           'quiescent','magistrate','erroneously',
 M           'loudspeaker','phytotoxic','matrimonial',
 M           'parasympathomimetic','thigmotropism'/ 
```

我在 Fortran 77 中获得了一些代码，我必须将其转换为 95。我知道关于 data 关键字的非常基本的东西，比如

```
character (len = 5) arr (5)
data arr /'aaa','bbb','ccc','ddd','eee'/ 
```

我不知道如何在单独的行上执行上述操作。我猜它与上述有关，但我无法弄清楚在这种情况下 M 的用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:10:30.043

在 Fortran 77 中，第 6 列中的任何字符都表示续行。在这种情况下为“M”。在 Fortran 95 中，您改为在要继续的行尾使用 & 符号。

# ruby - Ruby 浮动问题

> ID：14656289
> 
> 赞同：0
> 
> 时间：2013-02-01T22:41:05.560
> 
> 标签：ruby, floating-point

我有一个运行大量计算的系统，由于某种原因，每次 0.07 出现时，它都会显示为 0.07000000000000001

我很清楚浮点数是近似值，但是我正在编写这样的代码：

```
number = '%.2f' % ( num1 - num2 )
number.to_f 
```

尽管如此，0.07000000000000001 仍然出现在我的代码中，并最终导致数组排序失败：

```
sort! { |a,b| b <=> a }      <-- b equals 0.07000000000000001 and a equals 0.08 
```

它会引发一个错误，说它无法比较这两个数字。关于如何解决这个问题的任何想法？

**更新**

所以看起来好像原始值是 0.07351923338974675，此时我调用 .round(2)。然后我将它暂时存储在 Redis 中，然后将其拉回。当它运行计算时，它最终显示为 0.07000000000000001。听起来整数比较在这里可能是最好的，除非有替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:18:04.203

所有数字都是有序的，但 String 不能对数字进行有序比较，只能进行相等比较以查看它们是否是同一个对象。（很明显，这种比较总是会返回 false。）

我想这是您看到的错误类型，例如：*ArgumentError: comparison of String with Float failed*。

Float 对象中的低位问题可能会干扰您的排序，尽管引发实际异常似乎极不可能。像大多数十进制字符串分数一样，`0.07`在底层浮点格式中没有精确的表示。可以想象，不同的获取方式`0.07`（字面常量与计算结果）可能会导致一个非常不同的值。

但也请注意，如果您尝试打印出比实际数量更多的小数位数，您将看到最后一位的各种余数。这些数字可以是非零的，但它们不会告诉您有关您的号码的任何有用信息。

最安全的做法是缩放到整数值，调用`#to_i,`并比较整数。

# video - 从快速电影中提取海报图像？有没有更简单的格式来做到这一点？

> ID：14656290
> 
> 赞同：1
> 
> 时间：2013-02-01T22:41:15.280
> 
> 标签：video, image-processing, webserver, frame, quicktime

上传文件后，我一直在网上搜索从后端的快速电影中提取设置海报图像的方法。有没有有效的方法来做到这一点？或者有没有办法将特定帧作为视觉对象？我想一个脚本可以为特定的属性值对和图像内容梳理文件，不是吗？对此主题的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:13:25.153

如果海报帧始终是`.mov`视频的一部分，您可以从提取 exif 标签开始`PosterTime`。此标签的值指示张贴帧在视频中的位置，默认情况下它在时间 0（即第一帧）。然后你可以通过一些理解这种视频格式的程序来提取帧，这`ffmpeg`是一个很好的程序。

例如，我们可以使用`exiftool`来提取 tag 的值`PosterTime`。我手动更改了一些视频的海报框架，然后使用`exiftool`as

```
exiftool -PosterTime -b somevideo.mov 
```

我得到：

```
0.013333333333333 
```

这意味着可以在第二个~0.013 处找到张贴框（即，如果不清楚，则在第二个 0 和第二个 1 之间）。现在我们可以使用以下方法提取当时的单帧`ffmpeg`：

```
ffmpeg -ss 00:00:00.013 -i somevideo.mov -frames 1 posterframe.jpg 
```

现在，请注意在[http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/QuickTime.html](http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/QuickTime.html)您会看到还有一个名为`PreviewPICT`. 这似乎表明可能有其他东西可以代表海报框架，但我不确定这个标签是否真的用于此目的。

# actionscript-3 - 从 AS3 迁移到 AIR，flvPlayback VideoEvent 错误

> ID：14656295
> 
> 赞同：2
> 
> 时间：2013-02-01T22:41:31.047
> 
> 标签：actionscript-3, air

这是我第一次在这里发帖，这是我的问题：（对不起我的英语）
我有一个用 Flash AS3 编程的桌面应用程序，（不是 AIR）并且想迁移到 AIR，因为我看到你可以控制文件和我需要的其他东西。问题是所有都在 TimeLine 上编程（我从来没有用类编程过，真的让我有点害怕），所以我在主脚本中有大约 2200 行代码都在一帧中。
当我将项目传递给 AIR 并尝试运行它时，我得到了很多错误。我在互联网上搜索，但没有找到答案。我不知道我做错了什么......为什么如果我使用 SWF 文件运行我的应用程序它可以工作，但是当我为 AIR 编译时出现这些错误。
在这里，代码：

```
var myVideo:FLVPlayback;
function CreateFLVPlayback():void {
    myVideo = new FLVPlayback(); //FLVPlayback.
    //Configuration and Listeners:
    myVideo.addEventListener(VideoEvent.COMPLETE, RepeatFLVPlayback); //1st ERROR
    myVideo.addEventListener(VideoEvent.READY, ReadyFLVPlayback); //2nd ERROR
    myVideo.addEventListener(VideoEvent.STATE_CHANGE, StateChangeFLVPlayback ); //3rd
}
// [ ... more code ...]
function StateChangeFLVPlayback(e:VideoEvent ):void {
    var videoPlayer:FLVPlayback = e.target as FLVPlayback;
    if (e.state == VideoState.CONNECTION_ERROR) {   ///Line of the 4th ERROR
        trace("No se encontró el video: "+myVideo.source );
    }
} 
```

*   Escena 1, Capa 'Acciones', Fotograma 3, Línea 838 1119: Acceso a una propiedad COMPLETE posiblemente no definida mediante una referencia con tipo estático Class。
*   Escena 1, Capa 'Acciones', Fotograma 3, Línea 839 1119: Acceso a una propiedad READY posiblemente no definida mediante una referencia con tipo estático 类。
*   Escena 1, Capa 'Acciones', Fotograma 3, Línea 840 1119: Acceso a una propiedad STATE_CHANGE posiblemente no definida mediante una referencia con tipo estático Class。
*   Escena 1, Capa 'Acciones', Fotograma 3, Línea 870 - 1119: Acceso a una propiedad state posiblemente no definida mediante una referencia con tipo estático flash.events:VideoEvent。

这里有同样的英文错误（使用谷歌翻译）：

*   场景 1，图层“操作”，第 3 帧，第 838 行 1119：通过静态类型 Class 的引用访问可能未定义的属性 COMPLETE。
*   场景 1，图层“动作”，第 3 帧，第 839 行 1119：可能通过静态类型 Class 的引用访问未定义的属性 READY。
*   场景 1，图层“动作”，第 3 帧，第 840 行 1119：可能通过静态类型 Class 的引用访问未定义的属性 state_change。
*   场景 1，“动作”层，第 3 帧，第 870-1119 行：通过静态类型 flash.events: VideoEvent 的引用访问可能未定义的状态属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:51:31.423

对于完整的事件，请尝试以下，

```
 myVideo.addEventListener(Event.COMPLETE, RepeatFLVPlayback);

 function RepeatFLVPlayback(e:Event):void
 {
      //Your code
 } 
```

READY，STATE_CHANGE 在 AIR 2.0 中为我工作，

导入 fl.video.VideoEvent；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:24:53.023

我有同样的问题，但只有 AIR for Android。我为这个问题挖掘了好几个小时，最后这对我有所帮助：

```
display.addEventListener(Event.COMPLETE, koniec);
function koniec(e:Event):void
{
    display.stop();
    MovieClip(root).gotoAndPlay(3);
} 
```

所以没有 VideoEvent 而只是 Event 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:41:04.077

这样就可以了！不知道为什么！

```
myVideo.addEventListener("complete", RepeatFLVPlayback);
myVideo.addEventListener("ready", ReadyFLVPlayback); 
```

# c - 有效地制作一个 1 全为 1 但为 0 的 int 保持 0

> ID：14656299
> 
> 赞同：5
> 
> 时间：2013-02-01T22:41:48.387
> 
> 标签：c, bitwise-operators

我有一个作业要求仅使用这些运算符执行许多功能：

！~ & ^ | + << >>

在某些问题中，如果某个整数 x 包含任何 1，则使其全为 1，但如果它为 0，则保持 0。我这样做的原因是我可以像这样返回 y 或 z：

```
// One of the two conditional values is now 0
int conditionalA = mask&y;
int conditionalB = ~mask&z;

// One of the values is combined with 0 using |
int out = conditionalA|conditionalB;

return out; 
```

我在哪里制作这样的面具：

```
// Make any x other than 0 all 1s
int mask = x;
mask |= mask>>1;
mask |= mask>>2;
mask |= mask>>4;
mask |= mask>>8;
mask |= mask>>16;

mask |= mask<<1;
mask |= mask<<2;
mask |= mask<<4;
mask |= mask<<8;
mask |= mask<<16; 
```

必须有更好的方法来制作全 1 或 0 的掩码，但我想不出更有效的解决方案。同样重要的是，如果 x 为 0，则 0 仍然为 0。

**编辑**：如果语句不是一个选项

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T22:44:54.667

假设 2 的补码：

```
int mask = !x + ~0; 
```

将`!`任何非零值映射到和`0`，然后我们将( ) 分别添加到 get和。`0``1``~0``-1``-1``0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T22:44:31.437

怎么样：

```
x = (x | -x) >> 31; // Note this is implementation specific. 
```

好的，我使用`-`的是不允许的，所以这里不是正确的答案。我会把它留在这里作为一个新奇事物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T22:50:15.617

我认为这是一个可行的方法（假设二进制补码算术）：

```
x = ~!!x + 1; 
```

我是怎么到那里的？

首先，`!!x`将任何非零值变为 1，并且 0 保持 0。然后，使用 2 的补码等效 negation `-x = ~x + 1`，presto！

# excel - 匹配 A 列和 B 列中的名称，然后计算 C 中的出现次数

> ID：14656302
> 
> 赞同：1
> 
> 时间：2013-02-01T22:41:53.937
> 
> 标签：excel, excel-formula

我们有一个计分电子表格，可以跟踪所进行的比赛和每场比赛的获胜者。我们有以下列

*   A 列（名称 1）
*   B 列（对比）
*   C列（名称2）
*   D列（获胜者姓名）

我用过

```
=SUMPRODUCT((A:A="name1")*(C:C="name2")+(A:A="name2")*(C:C="name1")) 
```

计算这对特定配对玩了多少场比赛，仅仅是因为比赛是由不同的人输入的，所以每一列都有名字。

现在我需要找到一种方法来计算这两场比赛的获胜次数，显然上面的公式对此是多余的。

因此，实际上，从 A 列和 C 列进行匹配，`name1`并`name2`计算`name1`D 列中存在的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:11:03.897

计算 Name1 在 D 列中与 Name2 在 A 或 C 中存在多少次就足够了，因此请尝试

`=COUNTIFS(D:D,"Name1",A:A,"Name2")+COUNTIFS(D:D,"Name1",C:C,"Name2")`

或者你可以像这样使用 SUMPRODUCT

`=SUMPRODUCT((D:D="Name1")*((A:A="Name2")+(C:C="Name2")))`

第一个更长但更有效

# tortoisegit - TortoiseGit 我必须先下载 MsysGit 还是 Git？

> ID：14656303
> 
> 赞同：4
> 
> 时间：2013-02-01T22:41:56.477
> 
> 标签：tortoisegit

我发现手册在这个问题上有点混乱，搜索以前的答案让我更加困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:20:38.230

Git（如 Git 的[完整安装程序](http://code.google.com/p/msysgit/downloads/list?can=2&q=%22Full%20installer%20for%20official%20Git%20for%20Windows%22)）就足够了，来自[先决条件页面](http://code.google.com/p/tortoisegit/wiki/SetupHowTo)。
它只需要“Git for Windows”。

![在此处输入图像描述](../Images/21534e52a4d09d7f26d29f9f53876734.png)

**有关 MSysGit 和“Windows 版 Git”的更多信息，请参阅“ [msysgit 和 Cygwin + git 之间的区别？](https://stackoverflow.com/questions/3144082/difference-between-msysgit-and-cygwin-git/3144417#3144417) ”。**
然而，诀窍在于，打包的“Git for Windows”经常被用户称为“msysgit”，尽管 msysgit 实际上是完整的开发环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-03T23:06:10.890

[如常见问题解答](https://tortoisegit.org/support/faq/)中提到的TortoiseGit 需要命令行 git.exe。有几种可用的[替代方案](https://stackoverflow.com/a/32427897/3906760)，但是，建议使用[适用于 Windows](https://git-for-windows.github.io)的 Git，它应该可以开箱即用。

推荐的顺序是先安装 TortoiseGit。然后，TortoiseGit 将（希望自动）通过检查 Windows 安装的 Git、查看`%PATH%`或手动配置（[TortoiseGit 设置](https://tortoisegit.org/docs/tortoisegit/tgit-dug-settings.html)）来检测已安装的 git.exe。

# ruby-on-rails - 为什么 CarrierWave 和 Rackspace Cloudfiles 的上传速度如此缓慢？

> ID：14656304
> 
> 赞同：3
> 
> 时间：2013-02-01T22:41:58.993
> 
> 标签：ruby-on-rails, carrierwave, fog, rackspace, cloudfiles

我正在使用 CarrierWave 进行图像上传，使用 Rackspace Cloudfiles 作为存储，上传需要 3-5 秒（在生产中）。起初，我将其归因于我的图像处理器速度慢或笨拙，或其他原因；所以，我从 RMagick 切换到 Vips ......速度没有明显变化。

需要更多信息，我决定编写一些 New Relic 工具：

[http://github.com/tehprofessor/newrelic-carrierwave](http://github.com/tehprofessor/newrelic-carrierwave)

使用该工具后，New Relic 报告每个请求的大部分（平均 85%）都花费在：

```
::CarrierWave::Storage::Fog::File#store 
```

#store 方法被多次调用，有时第一个很慢，有时是最后一个，有时每个都调用。平均而言，对#store 的最快调用在大约 234 毫秒内完成。

我目前正在制作 5 个版本；每个都在不到 10 毫秒内完成（用于图像处理）。源文件在 100k 到 500k 之间。

所以简而言之，这绝对是发布到 Rackspace 的东西。与图像库无关。

我的 CarrierWave 配置

```
CarrierWave.configure do |config|
    config.fog_credentials = {
        :provider           => 'Rackspace',
        :rackspace_username => 'SECRET_SAUCE',
        :rackspace_api_key  => 'CHEESEBURGER',
        :rackspace_servicenet => true
    }
    config.storage = :fog
end 
```

我已经联系了 Rackspace，他们的支持建议使用 Curl。“试图”帮助我的支持代表发现使用 Curl 的云文件一直很快。我发现这特别没有帮助，并且与我的 New Relic 仪器所建议的形成鲜明对比。

此外，我使用的容器是公共的，并且与我们的云服务器 (VPS) 位于同一个数据中心。

在这一点上，我几乎不知道为什么这该死的慢；特别是因为我设置了服务网络，并且容器和服务器位于同一个数据中心。如果有人有任何建议或想法，我很想听听他们...

也许我刚刚做了一些非常愚蠢的事情或错过了配置选项？任何帮助深表感谢！

**更新**：一年后这仍然是一个问题；虽然没有那么糟糕——也许 Rackspace 改变了一些东西？

谢谢你，西弗

# asp.net - 在电子邮件正文中发送 html 内容

> ID：14656307
> 
> 赞同：-2
> 
> 时间：2013-02-01T22:42:50.017
> 
> 标签：asp.net, html, email

我几乎花了一天的时间，但无法修复它，

我在电子邮件正文（asp.net 3.5）中发送 HTML，但问题是它既不需要正文中的 div，也不需要任何内联样式，

```
message.Body = "<html>"+
                               "<body>"+
                                 "<div style=\"background-color:yellow;\">" +
                                  "<h3>"+
                                   " Congrats" + " " + userName + " " + " You have been shortlisted for interview. Please appear on " + " " + date +", "+time+" "+ "for interview"+
                                  "</h3>"+
                                 "</div>"+
                                "</body>"+
                               "</html>"; 
```

粗体的标签效果很好， / ，但它在正文中不需要任何样式甚至 div 标签，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:56:48.093

在 MailMessage 上将 IsHTML 标志设置为 true。

# sql-server - 按用户统计记录

> ID：14656310
> 
> 赞同：0
> 
> 时间：2013-02-01T22:42:55.943
> 
> 标签：sql-server

我是 SQL (AIX) 的新手，我找不到我正在寻找的确切内容。我想知道每个用户输入了多少订单：

```
so-order-no   user-id
1234          John
2345          John
4567          Bill
7890          Bill
3455          Bill
2144          Fred 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:46:24.777

一个简单的 COUNT 和 GROUP BY

```
SELECT user-id, count(so-order-no) AS TotalOrders
FROM ordertable
GROUP BY user-id 
```

请注意，我不知道表名，所以我一般调用了`ordertable`。替换为您的真实表名

[按计数](http://www.w3schools.com/sql/sql_func_count.asp)[分组](http://www.w3schools.com/sql/sql_groupby.asp)

# selenium - 哈德森 - java.io.IOException：无法 mkdirs：

> ID：14656311
> 
> 赞同：1
> 
> 时间：2013-02-01T22:43:03.993
> 
> 标签：selenium, hudson

我找不到很多关于 Hudson 和这个问题的信息。我正在尝试使用 Hudson 构建/运行我的 selenium 测试用例。这是我采取的步骤

1.  创建了一个新工作
2.  将自定义工作区设置为 /home/selenium/qa/automation
3.  添加了构建步骤“调用 Ant”
4.  将目标“运行”添加到目标
5.  将 build.xml 添加到构建文件字段。
6.  试图执行作业，但它退出并出现以下错误：

由匿名用户发起

```
java.io.IOException: Failed to mkdirs: /home/selenium/qa/automation
...
... 
```

我认为这是一些权限问题，但我无法弄清楚。在 /etc/sysconfig/hudson 中，用户以“hudson”身份运行，这个用户应该是 selenium 用户吗？

另外，我添加了自定义工作区，因为最初 Hudson 找不到 build.xml 文件。我会得到一个“无法找到构建脚本”，我不确定是否也与权限相关。

这些是目录权限：

```
drwxrwxr-x 10 selenium selenium 4096 Jan 29 17:18 automation 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:46:18.297

您让 Hudson 作为“hudson”运行，但您的工作区归用户“selenium”所有。这是一个问题，因为“其他”没有对该目录的写入权限。

您可以`chown <directory> hudson:hudson`更改所有者，或者您可以添加写入权限`chmod 777`，因为现在它看起来是 775（“其他”没有写入权限）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T00:13:23.437

最终，我最终将 HUDSON_USER 更改为我的 selenium 用户，并将 /var/lib/hudson 和 /var/log/hudson 的权限授予 selenium 用户。

# javascript - 使用 Javascript 设计链接按钮

> ID：14656316
> 
> 赞同：1
> 
> 时间：2013-02-01T22:43:19.387
> 
> 标签：javascript, asp.net

> **可能重复：**
> [使用 Javascript 管理 LinkBut​​ton？](https://stackoverflow.com/questions/14655275/managing-linkbutton-with-javascript)

我想通过操纵名为“退出聊天”的 LinkBut​​ton.LinkBut​​ton 的功能将 LinkBut​​ton 放在 Webform 上的 MultiView 控件上，当我单击此按钮时，我需要看到 OK-Cancel 对话框，当我选择 OK 按钮时，MultiView 上的一切都应该消失.

我该怎么做？（通过在 Webform 控件上使用 HTML 和 Javascript）

我试着写 javascript:confirm("*"); 当我编写这段代码时，我无法控制 OK-Cancel 对话框屏幕:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:48:17.433

您可以在客户端向 LinkBut​​ton 添加确认：

```
 <asp:LinkButton  OnClientClick="return confirm('are you sure ?...');" .../> 
```

您还可以将 javascript 函数调用为：

```
<script>
function ConfirmWithAction()
    {
        if(confirm('are you sure ?...'))
        {
            return true;
        }
        else
        {
            // do some more work....
            // redirect to an empty page as you ask
            window.location = "empty.html"
            return false;
        }
    }
</script>

<asp:LinkButton  OnClientClick="return ConfirmWithAction();" runat="server" ID="MyId" Text="click me" /> 
```

# elasticsearch - Elasticsearch 没有启动

> ID：14656317
> 
> 赞同：1
> 
> 时间：2013-02-01T22:43:19.107
> 
> 标签：elasticsearch

我从 elasticsearch 0.17.6 更新到 0.19.2，一切似乎都很好，但我无法在本地连接到端口 9200。

当我查看 es 日志时，我发现它在所有节点名称中疯狂地循环，而没有实际连接到其中任何一个。

日志看起来像这样 -

```
[2013-02-01 22:39:41,950][INFO][org.elasticsearch.node][Hardcore] {0.19.2}[3212]：初始化 ...
[2013-02-01 22:39:41,959][INFO][org.elasticsearch.plugins][Hardcore] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:42,559][INFO][org.elasticsearch.node][Royal Roy]{0.19.2}[3228]：初始化 ...
[2013-02-01 22:39:42,567][INFO][org.elasticsearch.plugins] [Royal Roy] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:43,182][INFO][org.elasticsearch.node][Mercury] {0.19.2}[3244]：初始化 ...
[2013-02-01 22:39:43,190][INFO][org.elasticsearch.plugins] [Mercury] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:43,788][INFO][org.elasticsearch.node][Raye, Frankie] {0.19.2}[3260]：初始化 ...
[2013-02-01 22:39:43,796][INFO][org.elasticsearch.plugins] [Raye，Frankie] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:44,362][INFO][org.elasticsearch.node][狼蛛]{0.19.2}[3276]：初始化...
[2013-02-01 22:39:44,371][INFO][org.elasticsearch.plugins] [狼蛛] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:44,967][INFO][org.elasticsearch.node][Atleza] {0.19.2}[3292]：初始化 ...
[2013-02-01 22:39:44,975][INFO][org.elasticsearch.plugins] [Atleza] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:45,529][INFO][org.elasticsearch.node][St。Croix, Claudette] {0.19.2}[3308]：正在初始化 ...
[2013-02-01 22:39:45,538][信息][org.elasticsearch.plugins] [圣。Croix, Claudette] 加载 [], 站点 [cloud-aws]
[2013-02-01 22:39:46,096][INFO][org.elasticsearch.node][无名一]{0.19.2}[3324]：初始化...
[2013-02-01 22:39:46,105][INFO][org.elasticsearch.plugins] [Nameless One] 已加载 []，网站 [cloud-aws]
[2013-02-01 22:39:46,680][INFO][org.elasticsearch.node][Donald Pierce] {0.19.2}[3340]：初始化 ...
[2013-02-01 22:39:46,688][INFO][org.elasticsearch.plugins][Donald Pierce] 加载 []，网站 [cloud-aws]
[2013-02-01 22:39:47,264][INFO][org.elasticsearch.node][Lexington, Alexander] {0.19.2}[3356]：初始化 ...
[2013-02-01 22:39:47,272][INFO][org.elasticsearch.plugins] [Lexington, Alexander] 加载 []，站点 [cloud-aws]
[2013-02-01 22:39:47,881][INFO][org.elasticsearch.node][Nightside]{0.19.2}[3372]：初始化 ...
[2013-02-01 22:39:47,890][INFO][org.elasticsearch.plugins][Nightside] 加载 []，站点 [cloud-aws]

```

等等等等。

我无法弄清楚问题是什么。

# api - Google 应用程序 GUI 构建器未将回调元素传递给脚本

> ID：14656318
> 
> 赞同：0
> 
> 时间：2013-02-01T22:43:24.457
> 
> 标签：api, user-interface, callback, google-apps-script

好的，所以我正在使用谷歌应用程序 GUI 构建器，并且我定义了一个简单的文本框小部件，ID 和名称属性都设置为“TextB1”。

我还定义了一个按钮。

我已经为按钮鼠标单击事件添加了一个处理程序，以及设置为“TextB1”的回调元素。

在我的处理程序函数中，我有代码：

Browser.msgBox(e.parameter.TextB1);

当我运行所有内容时，单击按钮并调用处理程序，它会点击这一行并显示“未定义”。...

我尝试了不同类型的小部件的多种可能性，使用复制和粘贴来确保没有错别字等，但绝对没有任何效果。最后，我将所有内容简化为这个简单的示例，将 id 和 name 设置为相同的值，以避免我在错误的地方使用错误的引用。

但即使有这个简单的例子，我也不知道我做错了什么。我不是一个真正的 javascript 程序员，虽然我有超过几十年的 windows/c/c#/unix 等，所以我真的认为这将是非常微不足道的，但我完全陷入了困境（或者我的代码可能完全有缺陷；） ！) ...无论哪种方式，如果有人想指出我的方式的错误，并发现错误，我将非常感激，因为它让我发疯。

有趣的是，其他人也遇到过这个问题，但除了指出需要设置小部件的 Name 属性和 Id 之外，还有一些人说问题就消失了……是间歇性错误还是我在做什么蠢事？

欢迎任何帮助或对其他明显错误的建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:44:41.080

我遇到了同样的问题，但是感谢您关于设置“名称”属性的提示，我让它工作了。

我也在使用 GUI 构建器。我复制了这个示例代码：

[https://developers.google.com/apps-script/class_textbox](https://developers.google.com/apps-script/class_textbox)

到 GUI builder 中的等价物，但改变了：

app.getElementById("label").setText(eventInfo...

至：

app.getElementById("label").setText(Utilities.jsonStringify(eventInfo));

这可以更深入地了解实际传递给回调的内容。而且我无法使用 msgBox，因为我的是 webapp。有人说您需要使用基本按钮（就像我和本例中一样）而不是提交按钮。确保标签足够宽以显示结果。希望这可以帮助。

# mysql - ClassNotFoundException 与 Elastic Beanstalk 和 Tomcat 7

> ID：14656320
> 
> 赞同：2
> 
> 时间：2013-02-01T22:43:31.290
> 
> 标签：mysql, jdbc, tomcat7, amazon-elastic-beanstalk

我正在尝试将一个 Maven 构建的 Java Web 应用程序部署到 Elastic Beanstalk，它在 Amazon Linux Tomcat 7 版本下运行环境。该应用程序在 localhost 上运行良好，即使使用外部 mysql 数据库 (XEROUND)。

我原来的 context.xml 有一个资源如下：

```
<Resource auth="Container"        
    driverClassName="com.mysql.jdbc.Driver" 
    logAbandoned="true" 
    maxActive="100" 
    maxIdle="30" 
    maxWait="10000" 
    name="jdbc/xxxx-01292013" 
    password="xxxx" 
    removeAbandoned="true" 
    removeAbandonedTimeout="60" 
    type="javax.sql.DataSource" 
    url="jdbc:mysql://instancexxxx.db.xeround.com:xxxx/xxxx-01292013?   autoReconnect=true"
    username="xxxx-general"/> 
```

但是，当我运行此应用程序时，我收到以下错误：

```
java.lang.ClassNotFoundException: org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory 
```

我尝试将以下行添加到我的 context.xml 资源中：

```
factory="org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory" 
```

但这也没有用。然后我尝试添加这一行：

```
factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" 
```

但这给了我新的例外：

```
javax.naming.NamingException: com.mysql.jdbc.Driver 
```

我在这里用头撞墙，有谁知道我可以做些什么来让这个东西启动并运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T21:50:40.047

好的，所以经过更多的实验和配置，我通过将以下内容放入我的 context.xml 资源标签中来让我的应用程序正常工作：

```
 factory="org.apache.commons.dbcp.BasicDataSourceFactory" 
```

以及我的 pom.xml 文件中的以下内容：

```
 <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>1.6</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency> 
```

[这个答案是在AWS 论坛](https://forums.aws.amazon.com/message.jspa?messageID=421245#421245)上给我的。

但是，我将尝试使用的更好的解决方案是在我的应用程序中放置一个 .ebextensions 文件，为其编写一个 .config 文件，然后让它以这种方式工作。我认为这种方法更适合长期使用，因为它可以让我解决我的开发环境和弹性 beantalk 的 Tomcat 7 之间的任何进一步的配置不匹配问题。这个解决方案也在 AWS 论坛上列出[，](https://forums.aws.amazon.com/thread.jspa?messageID=421387&#421387)和[在这里](https://forums.aws.amazon.com/message.jspa?messageID=421245#421245)。

# regex - 编写一个函数，当找到 4 个字符中的 2 个字符组中的至少 2 个字符时返回 true

> ID：14656325
> 
> 赞同：0
> 
> 时间：2013-02-01T22:43:57.657
> 
> 标签：regex, string, language-agnostic

我正在编写一个函数，如果作为字符串的参数包含来自至少 2 个类别的至少 2 个字符，则该函数返回 true：

*   小写字母
*   大写字母
*   数字语法
*   性格/其他

例子：

```
abAB => true
aB => false
ab12 => true
1ab2 => true
asdfasdf1 => false 
```

我正在研究执行此操作的正则表达式，但遇到了麻烦。我还考虑将正则表达式分解为多个 if 语句，并单独检查每个组中是否至少有 2 个字符包含在字符串中。

例如：

```
comprised = 0
if(string contains *[0-9]*[0-9])
    comprised = comprised+1
if(string contains *[a-b]*[a-b])
    comprised = comprised+1
if(string contains *[A-Z]*[A-Z])
    comprised = comprised+1
if(string contains *[^0-9a-zA-Z]*[^0-9a-zA-Z])
    comprised = comprised+1

if comprised >= 2
    return true
else return false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:15:57.063

在这种情况下，真的不需要正则表达式。下面的 java 代码显示了解决它的另一种方法。

```
public static boolean validate(String s) {
    int[] group = new int[4];
    for (char c : s.toCharArray()){
        group[getGroupForChar(c)]++;
    }
    int large = 0;
    for (int g : group){
        if (g >= 2)large++;
    }
    return large>=2;
}
private static int getGroupForChar(char c) {
    if (Character.isLowerCase(c))return 0;
    else if (Character.isUpperCase(c))return 1;
    else if (Character.isDigit(c))return 2;
    return 3;
}
public static void main(String[] args) {
    String[] tests = new String[]{
        "abAB",
        "aB",
        "ab12",
        "1ab2",
        "asdfasdf1"
    };

    for (String s : tests) {
        System.out.println(s+": "+validate(s));
    }
} 
```

输出：

```
abAB: true
aB: false
ab12: true
1ab2: true
asdfasdf1: false 
```

可以测试代码的站点：[fiddle](http://rextester.com/PNVXM66645)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:48:31.973

这`.*[a-z].*[a-z].*`将匹配其中包含两个小写字符的任何字符串。

这`[a-z]`将匹配单个小写字符。

像第一个一样组成 3 个正则表达式，然后应用它们来看看有什么。如果它在那里，请计算该类别。

将其应用于测试后，使用第二个删除该类型的所有字符或将其替换为空字符串等。

重复上、下和数字。然后看有没有剩下的字符，算第4类。

如果计数为 2 或更多，则很好。

*警告*假定字符串中没有结束符。

# ios - iPhone 开发：使用 Google Analytics 手动跟踪活动屏幕中的时间

> ID：14656326
> 
> 赞同：1
> 
> 时间：2013-02-01T22:43:58.520
> 
> 标签：ios, objective-c, google-analytics

我目前无法使用`GAITrackedViewController`，因为我正在处理的应用程序不使用`UIViewControllers`，仅`UIViews`在 UIWindow 中使用。

我`[tracker sendView:@"Home Screen"];`用来发送活动屏幕，但它不跟踪时间。

是否有手动方式在`UIView`使用 Google Analytics 时手动发送活动时间？

任何帮助都感激不尽。

# c# - 如何获取从 ListVIew 中选择的项目

> ID：14656333
> 
> 赞同：0
> 
> 时间：2013-02-01T22:44:33.307
> 
> 标签：c#, xaml, windows-8, windows-store-apps, windows-store

好吧，希望你能理解我...

我有一个列表视图。ListView 填充了数据的集合（列表列表），但是 ListView 中的每个项目都有相同的模板（边框、网格、边框、文本块），所以，当我选择一个文本块时，如何获取文本块的文本属性物品 ？？

```
xmlns:vmSegments="using:EC_UsuarioWin8.ViewModels"

<Page.Resources>
   <DataTemplate x:Key="ItemTemplateStyleSegment">
        <Border  Margin="-10,0,0,0" Background="White" >
            <Grid Height="120" Width="200">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Border Grid.Row="0">
                    <Image Source="{Binding SegmentImage}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10"/>
                </Border>
                <Border Grid.Row="1" >
                    <TextBlock Text="{Binding SegmentName}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#FFE0241B" FontSize="20" />
                </Border>
            </Grid>
        </Border>
    </DataTemplate>
</Page.Resources>

<Grid>
   <Grid.Resources>
                <vmSegments:ViewModelSegments x:Key="SegmentCollectionVM" x:Name="SegmentCollectionVM"/>
   </Grid.Resources>

<ListView x:Name="ListVIewSegments" ItemsSource="{Binding Source={StaticResource SegmentCollectionVM}, Path= SegmentList}" Grid.Row="1" Margin="20" ItemContainerStyle="{StaticResource ListViewSItemtyleECFood}" ItemTemplate="{StaticResource ItemTemplateStyleSegment}" SelectionChanged="ListViewSegments_SelectionChanged">
</ListView>

</Grid> 
```

我的班级 ViewModelSegments：

```
public class ViewModelSegments : BindableBase
{

    private SegmentsCollection _segmentList = new SegmentsCollection();
    public SegmentsCollection SegmentList
    {
        get { return _segmentList; }
        set { SetProperty(ref _segmentList, value); }
    }
} 
```

我的班级 SegmentsCollection：

```
public class SegmentsCollection: ObservableCollection<Segment>
{

} 
```

我的课段：

```
public class Segment : BindableBase
{
    //Propiedad SegmentName
    private string Name;
    public string SegmentName
    {
        get { return Name; }
        set { SetProperty(ref Name, value); }
    }

    //Propiedad SegmentPicture
    private Uri image;
    public Uri SegmentImage
    {
        get { return image; }
        set { SetProperty(ref image, value); }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T06:04:38.300

使用[**`ItemClick`**](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.listviewbase.itemclick.aspx)事件`ListView`

```
//Here sender is your list view
public delegate void ItemClickEventHandler(object sender, ItemClickEventArgs e)
{
   ListView lv = sender as ListView;
   Segment seg = e.ClickedItem as Segment;

   if (lv != null)
   {
      //Use your lv if you want to
   }

   if (seg != null)
   {
      string name = seg. SegmentName;
   }
} 
```

* * *

**更新**

```
private void ListView_SelectionChanged(object sender,SelectionChangedEventArgs e)
{
    lv.SelectedItem; // If you have set SelectionMode="Single" then it will do
    //the trick but if you set SelectionMode="Multiple" then it's the first
    //selected item

    lv.SelectedItems; // It will give you the selected list of item view models

    e.AddedItems; //This will give you the added items. As it is a list so can
    //be multiple but when it can be multiple I don't know that case.

    e.RemovedItems; //Similarly removed items
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:22:27.973

在您的视图模型中创建如下属性：

```
 public class ViewModelSegments : BindableBase, INotifyPropertyChanged
    {

      private SegmentsCollection _segmentList = new SegmentsCollection();
      public SegmentsCollection SegmentList
      {
        get { return _segmentList; }
        set { SetProperty(ref _segmentList, value); }
      }

      //Bind this property to your ListView SelectedItem property in the xaml

      Segment _selectedSegment;
      public Segment SelectedSegment   
      {
        get
        {
           return _selectedSegment;
        }
        set
        {
           _selectedSegment=value;
           NotifyPropertyChanged("SelectedSegment");
        }
      }

      public event PropertyChangedEventHandler PropertyChanged;

      public void NotifyPropertyChanged(String propertyName)
      {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
      }

   } 
```

在您的 xaml 中，将您的 ListView 更改为：

```
<ListView x:Name="ListVIewSegments" ItemsSource="{Binding Source={StaticResource SegmentCollectionVM}, Path= SegmentList}" Grid.Row="1" Margin="20" ItemContainerStyle="{StaticResource ListViewSItemtyleECFood}" ItemTemplate="{StaticResource ItemTemplateStyleSegment}" SelectedItem="{Binding SelectedSegment}" SelectionChanged="ListViewSegments_SelectionChanged">
</ListView> 
```

现在，每当您的 ListView 选择更改时，SelectedSegment 也会随之更改，然后您就可以访问`SelectedSegment.SegmentName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:05:05.467

像这样的东西？

```
 string items = "";
        foreach(ListViewItem item in listView1.SelectedItems){
            items += "Item: " + item.Text + "\n";
            foreach (ListViewItem.ListViewSubItem subitem in item.SubItems)
            {
                items += "SubItem: " + subitem.Text + "\n";
            }
        }
        MessageBox.Show(items); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:55:24.453

感谢 Inder Kumar Rathore 和 DJ Burb 指导我找到答案。所以，这里是

```
Segment seg= ListView.SelectedItem as Segment;
if (seg!= null)
{
    tbckChoiceSelected.Text = compa.CompanyName;//TextBlock called bckChoiceSelected
} 
```

这很容易。再次，谢谢。

# cqrs - 在 Event Store / CQRS 架构中，为什么存储事件而不是命令？

> ID：14656338
> 
> 赞同：7
> 
> 时间：2013-02-01T22:44:45.360
> 
> 标签：cqrs, event-sourcing

假设我们可以通过应用相同的命令集来恢复状态，那么为什么不简单地存储命令而不是事件呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T23:10:04.980

事件，传达“这发生在我们的系统中”。当命令被接受和处理时发生事件。没有人可以拒绝或改变它发生的事实。它是系统变化的唯一权威来源

命令只是系统的一部分（如 UI）告诉负责对系统进行更改的组件（“命令处理程序”）它想要做什么的一种方式。但是，命令处理程序可以出于各种原因选择不处理该命令。UI 可能有陈旧的信息，处理命令没有商业意义，或者用户可能没有执行该操作的权限。无论哪种方式，命令实际上只是一个请求，与系统状态无关

.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-18T05:51:21.920

“命令流”可以由您的应用程序处理以产生“事件流”，它可以产生“当前数据”。

当然可以存储命令，但问题是你为什么要这样做？

一些可能的答案包括，命令本身就是有用的数据。您可能想知道用户尝试将商品添加到购物车的次数（命令），即使购物车已满后不再添加商品（事件）。当然，这可以通过另一个事件来解决，可能名为“尽管购物车已满，但已添加物品”

从这个角度来看，命令就是事件。您使用业务逻辑对其进行处理以产生另一个事件流，我们将它们称为状态事件。您可以创建另一个流，或投影到关系数据结构上，或其他任何东西。添加命令可能会增加复杂性，这有利于更多数据。就像事件溯源本身比传统的“当前状态”数据存储高出一步一样。

编辑：上面清除了术语和目的。

结论：命令 = CommandGivenEvents，“事件” = BusinessLogicProcessedAndStoredEvents。不同的目的。就像如果您更改事件处理程序一样，投影数据会有所不同。如果您更改业务逻辑，命令将产生不同的事件流。高了一级。

# email - 将图表嵌入 Lotus Notes 电子邮件正文

> ID：14656339
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:44:47.980
> 
> 标签：email, excel, graph, lotus-notes, vba

感谢 Stack Overflow 的另一位用户，他帮助我将此图表添加到电子邮件的附件中。非常感谢。我的下一步是尝试将其作为图像或副本放入电子邮件的实际正文中。虽然附件有效，但在正文中进行演示会更好，除了电子邮件之外没有其他东西可以打开。有人有什么建议吗？我还没有听到很多关于尝试用 Lotus 做这件事的好消息。

```
Sub SendEmail()
  ' setting up various objects
    Dim Maildb As Object
    Dim UserName As String
    Dim MailDbName As String
    Dim MailDoc As Object
    Dim Session As Object
    Dim recipient As String
    Dim ccRecipient As String
    Dim bccRecipient As String
    Dim subject As String
    Dim bodytext As String
    Dim User As String
    Dim Fname As String

    User = Application.UserName

     ' setting up all sending recipients
    recipient = "Someonelse@somewhereelse"
     'ccRecipient =Someoneelse@Somewhereelse.com
     'bccRecipient = ""
    subject = "Week-To-Date GM%"
    bodytext = "" & vbLf & _
               "" & vbLf & _
               "Here is a breakdown of your total GM% for this week.  The graph gives you the GM% by day, with the WTD% displayed as " & vbLf & _
               "individual points on the graph.  We will continue to develop this report for you to provide you with better information."

     ' creating a notes session
    Set Session = CreateObject("Notes.NotesSession")
    UserName = Session.UserName
    MailDbName = Left$(UserName, 1) & Right$(UserName, (Len(UserName) - InStr(1, UserName, " "))) & ".nsf"
    Set Maildb = Session.GETDATABASE("", MailDbName)

    If Maildb.IsOpen <> True Then
        On Error Resume Next
        Maildb.OPENMAIL
    End If

    Set MailDoc = Maildb.CreateDocument
    MailDoc.Form = "Memo"

    Fname = Environ$("temp") & "\GM1%.jpeg"

    Sheets("Chart").Shapes("Chart 2").Chart.Export Filename:=Fname, FilterName:="JPEG"

     ' loading the lotus notes e-mail with the inputed data
    With MailDoc
        .SendTo = recipient
         '.copyto = ccRecipient
         '.blindcopyto = bccRecipient
        .subject = subject
        .Attachment.Add Fname
        .Body = bodytext
    End With

     ' saving message (Change to True if you want to save it)
    MailDoc.SaveMessageOnSend = False

       Attachment1 = Worksheets("Chart").Shapes("Chart 2").ChartArea

     ' send e-mail
    MailDoc.PostedDate = Now()
     ' if error in attachment or name of recipients

        Dim rtitem As Object
        Dim object As Object

        Set rtitem = MailDoc.CreateRichTextItem("Attachment1")
        Set object = rtitem.EmbedObject(1454, "", Fname)

    MailDoc.Send 0, recipient

    Kill (Fname)

    Set Maildb = Nothing
    Set MailDoc = Nothing
    Set attachMe = Nothing
    Set Session = Nothing
    Set EmbedObj1 = Nothing

     'Unload Me
    Exit Sub
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:24:10.653

我相信您只需将 1454 更改为 1453 即可嵌入对象而不是附件。

但是，要将其放入正文中，请将创建富文本项的行更改为：

```
Set rtitem = MailDoc.CreateRichTextItem("Body") 
```

如果您需要在电子邮件正文中添加文本，您可以使用

```
rtitem.AppendText("text") 
```

# jquery - sortable() 问题以及如何使用 JQuery 限制可排序项目的数量

> ID：14656345
> 
> 赞同：0
> 
> 时间：2013-02-01T22:45:19.023
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-sortable

我有两件事要问。这是我的参考代码：http: [//jsbin.com/axegem/19/](http://jsbin.com/axegem/19/)

**问题：**当我在一个父级中拖放 div 时，一切都很好。如果我将元素放到另一个父级上，我会看到我的 Dropped() 事件被调用了两次。更清楚地说，如果我在**DIV 6**之后删除**DIV 3**（相对于我的示例代码），我会看到警报出现两次。为什么会这样？这应该来一次。

 ****问题：**一旦解决了上述问题，我需要将孩子的数量限制为 4。假设我的第二个父母有**DIV 4、DIV 5、DIV 6**。如果我尝试在**DIV 6**之后删除**DIV 3**，则**DIV 3**必须回到原来的位置。如何使用 JQuery 实现这一点？

 ****谢谢..******

# emacs - 导出为 HTML 时，组织模式无法正确解析破折号

> ID：14656346
> 
> 赞同：2
> 
> 时间：2013-02-01T22:45:29.593
> 
> 标签：emacs, export, org-mode

将 an 导出`org-mode`到 HTML 时，形成的孤立双破折号`fill-paragraph`无法正确导出为 HTML 中的单个较长破折号（就像所有其他破折号一样）。有没有办法解决这个问题？

例如，

```
Lorem -- ipsum doler sit amet --
consectetur adipiscing elit 
```

将导出为

> Lorem – ipsum doler sit amet – consectetur adipiscing elit。

代替

> Lorem – ipsum doler sit amet – consectetur adipiscing elit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:45:29.593

在摸索了（超过）一段时间后，我找到了一个可行的解决方案。 `org-mode`（或它内部使用的任何东西）似乎只将序列`--`（由空格夹在中间，而不是`--`没有尾随空格的地方）解析为`&ndash;`. 只需将其添加到您的`.emacs`：

```
(add-hook 'org-export-preprocess-final-hook
          (lambda () (replace-string " --\n" " -- \n"))) 
```

# r - 如何唯一地识别变量组中的观察值？

> ID：14656349
> 
> 赞同：2
> 
> 时间：2013-02-01T22:45:34.330
> 
> 标签：r, grouping

我有一个示例数据框“ `z`”，如下所示：

```
deaths  sex race    smokes  pyears
10  Female  White   0   1410
14  Male    White   1   1974
14  Female  Black   0   1974
16  Male    Black   1   2256
17  Male    Black   0   2397
18  Female  NA  1   2538
19  NA  Black   0   2679
20  Female  White   1   2820
20  Female  Black   0   2820
21  Male    Black   1   2961 
```

我喜欢创建`group`结合变量种族和性别的新变量“”。这个新变量唯一地标识了 daaframe "z" 中的观察组。预期的输出是

```
 group
    1
    2
    3
    4
    4
    6
    5
    1
    3
    4 
```

我想知道我们如何在 R 中编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:58:01.287

This is the sort of thing I was thinking:

```
dat <- read.table(text = "deaths  sex race    smokes  pyears
10  Female  White   0   1410
14  Male    White   1   1974
14  Female  Black   0   1974
16  Male    Black   1   2256
17  Male    Black   0   2397
18  Female  NA  1   2538
19  NA  Black   0   2679
20  Female  White   1   2820
20  Female  Black   0   2820
21  Male    Black   1   2961",header = TRUE,sep = "")

dat$sex <- factor(dat$sex,exclude = NULL)
dat$race <- factor(dat$race,exclude = NULL)

with(dat,interaction(sex,race))

 [1] Female.White Male.White   Female.Black Male.Black   Male.Black   Female.NA    NA.Black     Female.White Female.Black
[10] Male.Black  
Levels: Female.Black Male.Black NA.Black Female.White Male.White NA.White Female.NA Male.NA NA.NA 
```

It looks like you wanted to include the NAs, rather than drop them, hence the explicit `factor` calls. Obviously, the resulting factor can be converted to integers using `as.integer`, although the actual numbers won't likely be in the order you specified, since R will order things alphabetically, rather than how they appear in your data frame.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:08:11.533

你可以使用：

```
dat <- read.table(text="deaths  sex race    smokes  pyears
10  Female  White   0   1410
14  Male    White   1   1974
14  Female  Black   0   1974
16  Male    Black   1   2256
17  Male    Black   0   2397
18  Female  NA  1   2538
19  NA  Black   0   2679
20  Female  White   1   2820
20  Female  Black   0   2820
21  Male    Black   1   2961", header=TRUE)

library(qdap)
factor(paste2(dat[, 2:3], ,FALSE))

#for numeric:
as.numeric(factor(paste2(dat[, 2:3], ,FALSE))) 
```

但正如 Joran 指出的那样，您的数字期望与 R 将如何实现它们不同。您必须根据需要使用`levels`inside`factor`来订购级别。

# c++ - 期望一个类或命名空间

> ID：14656360
> 
> 赞同：3
> 
> 时间：2013-02-01T22:46:48.557
> 
> 标签：c++

我在 C++ 中得到一个枚举的编译时间，错误说 Expected a class or namespace

```
 mf.setStatus(MediaFile::SyncStatus::Synced); 
```

枚举是这样定义的

```
 class MediaFile
 {
    public:
    enum SyncStatus 
    {
        New = 0,
        Remove = 5,
        Synced = 10,
        Unknown = 15
    };

    //...
 }; 
```

我在 xcode 中编译，但我想它与 C++ 语法有关，以前它在 Visual Studio 上编译得很好。Visual Studio 可能对此给出了一些警告，但是构建有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T22:47:52.273

试试`MediaFile::Synced`吧。`SyncStatus`是类型名称（如`SyncStatus theStatus`），而不是命名空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T22:48:43.850

`enum`C++ 中的 s 没有定义命名空间，因此枚举数的值进入周围的上下文。你需要这样做`MediaFile::Synced`。

# ios - Xcode 签名失败，因为安装了 InstaSign

> ID：14656362
> 
> 赞同：0
> 
> 时间：2013-02-01T22:46:50.183
> 
> 标签：ios, xcode, code-signing

我的 Xcode 现在无法签名，因为我前段时间尝试过 InstaSign。

它显示“无效的参数被传递给 codesign。参数是：--sign ...”

这个问题也在这两个问题中描述：

[在管理器中分发应用程序时代码签名失败](https://stackoverflow.com/questions/13813802/code-signing-failed-when-distribute-app-in-organizer#comment20481203_13813802)

[尝试验证时出现 Xcode 错误](https://stackoverflow.com/questions/14137861/xcode-error-when-trying-to-validate)

我知道根本原因是 InstaSign 替换了 /usr/bin/codesign 文件。

我的问题是我在哪里可以获得原始代码设计？（我知道这有点超出 StackOverflow 主题，但它与软件开发有关）。

我看到人们将 codesign 放在 Dropbox 中，但我**真的**不喜欢从未知来源下载二进制文件的想法。所以，我正在寻找一个可以得到它的官方地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:52:04.697

我不知道它是否相关，但我在 lion 上安装了 xcode 3（不成功），并且在正确的配置文件中出现了验证错误。我必须下载 Lion 发行版，然后从包内容/共享支持安装 InstallESD.dmg 并重新安装 BSD.dmg

# youtube-api - YouTube API v3 videoCategory vs guideCategory

> ID：14656369
> 
> 赞同：0
> 
> 时间：2013-02-01T22:47:26.753
> 
> 标签：youtube-api, youtube-channels

YouTube API v3 可以返回视频的 videoCategory。例如，如果您提出以下请求：

www.googleapis.com/youtube/v3/videos?id=ZCJgvabihQ8&key=apiKey&part=snippet,recordingDetails

您会发现 id ZCJgvabihQ8 的视频属于类别 24。但是如何获取 guideCategory id 而不是 videoCategory id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:54:11.490

从文档

[https://developers.google.com/youtube/v3/docs/guideCategories](https://developers.google.com/youtube/v3/docs/guideCategories)

*guideCategory 资源标识 YouTube 根据频道内容或其他指标（例如频道的受欢迎程度）通过算法分配的类别。该列表类似于视频类别，不同之处在于视频的上传者可以分配视频类别，但只有 YouTube 可以分配频道类别。*

guideCategory 分配给一个频道，而不是一个视频，我相信只能用来列出频道

# ember.js - 您如何将 AMD 与 Ember.js 一起使用？

> ID：14656370
> 
> 赞同：3
> 
> 时间：2013-02-01T22:47:32.170
> 
> 标签：ember.js, amd

当将 Ember.js 与 AMD/Require.js 一起使用时，我注意到我无法`Ember.Application`从模板访问我的实例，除非我将它放在全局范围内（这应该是你使用 AMD 避免的事情）。

`Ember.Application`是否可以在不使其全局化的情况下定义一个？

我的模块：

```
define(['Ember'], function (Ember) {
    window.App = Ember.Application.create();
    App.MyView = Ember.View.extend({});
}); 
```

我的模板：

```
{{#view App.MyView }}{{/view}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:42:54.827

这里有一个仓库：[https](https://bitbucket.org/cprecourt/ember-requirejs-example/src) ://bitbucket.org/cprecourt/ember-requirejs-example/src 。这是一个广泛的应用程序，可让您了解如何处理代码分离。Em.Application 始终是全局的，除非您决定将其嵌套在 Ember 对象中（您可以随意这样做，示例 repo 这样做是为了允许模板访问应用程序）。

在您的应用程序加载之前，Ember 已经将大量对象转储到全局中，所以我不明白为什么在全局中更多的单个对象会产生影响（与污染 Em/Ember 全局相反）。

# c - 打印空指针的位

> ID：14656375
> 
> 赞同：2
> 
> 时间：2013-02-01T22:48:15.597
> 
> 标签：c, void-pointers, bits

如果我创建一个 void 指针，并将一段内存分配给该 void 指针，我如何打印出我刚刚分配的各个位？

例如：

```
void * p;
p = malloc(24);
printf("0x%x\n", (int *)p); 
```

我希望上面打印我刚刚分配的 24 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:51:25.893

```
size_t size = 24;
void *p = malloc(size);

for (int i = 0; i < size; i++) {
  printf("%02x", ((unsigned char *) p) [i]);
} 
```

当然它会调用未定义的行为（分配的对象的值`malloc`具有不确定的值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:52:56.973

***你不能***- 在初始化它们的内容之前读取这些字节会导致未定义的行为。但是，如果您真的坚持这样做，请尝试以下操作：

```
void *buf = malloc(24);
unsigned char *ptr = buf;
for (int i = 0; i < 24; i++) {
    printf("%02x ", (int)ptr[i]);
}

free(buf);
printf("\n"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T22:53:14.860

```
void print_memory(void *ptr, int size)
{ // Print 'size' bytes starting from 'ptr'
    unsigned char *c = (unsigned char *)ptr;
    int i = 0;

    while(i != size)
        printf("%02x ", c[i++]);           
} 
```

正如 H2CO3 所提到的，使用未初始化的数据会导致未定义的行为，但上面的片段应该可以做任何想做的事情。称呼：

```
print_memory(p, 24); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T22:55:59.413

`void* p = malloc(24);`分配 24 个字节并将第一个字节的地址存储在`p`. 如果您尝试打印 的值`p`，您实际上将打印地址。要打印指针指向的值，您需要使用`*`. 如果可能，还要尽量避免`void`使用指针：

```
unsigned char *p = malloc(24);
// store something to the memory where p points to...
for(int i = 0; i < 24; ++i)
    printf("%02X", *(p + i)); 
```

并且不要忘记`free`已分配的内存`malloc`:)

这个问题也可以帮助你：[“取消引用”指针是什么意思？](https://stackoverflow.com/questions/4955198/what-does-dereferencing-a-pointer-mean)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T22:51:02.423

`malloc`以字节而不是位分配。不管它是什么，你`printf`都试图在内存中打印一个地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T22:52:27.173

malloc 分配字节。

```
 for (i = 0; i < 24; ++i) printf("%02xh ", p[i]); 
```

将打印 24 个字节。但如果转换为 int，则需要调整循环：

```
 for (i = 0; i < 24; i += sizeof(int)) printf("%xh", *(int *)&p[i]); 
```

但是，如果你知道你想要一个 int，为什么不把它声明为一个 int 呢？

# javascript - 动态创建的 DOM 操作按钮未触发事件

> ID：14656376
> 
> 赞同：3
> 
> 时间：2013-02-01T22:48:17.043
> 
> 标签：javascript, jquery, html

我有一个添加和删除字段的功能，但删除功能无法以某种方式工作。

HTML：

```
<div id="parts">
    Part
    <input type="text" id="auto_part" name="auto_part" />
                <br />
    Description
    <input type="text" id="auto_description" name="auto_description" />
                <br />
</div>
    <a href="#" id="addField">Add another part</a> 
```

jQuery：

```
$(function() {
var scntDiv = $('#parts');
var i = $('#parts input').size();

$('#addField').on('click', function() {
    $('<br /><div id="parts"><span>Part</span> <input type="text" id="auto_part'+i+'" name="auto_part'+i+'" /><br />').appendTo(scntDiv);
    $('<span>Description</span> <input type="text" id="auto_description'+i+'" name="auto_description'+i+'" /> <br />').appendTo(scntDiv);
    $('<input type="hidden" id="row_count" name="row_count" value="" />').appendTo(scntDiv);
    $('<a href="#" id="removefield">Remove</a></div>').appendTo(scntDiv);
    i++;
    return false;
});

$('#removefield').on('click', function() { 
    if( i > 2 ) {
            $(this).parents('div').remove();
            i--;
    }
    return false;
});
}); 
```

问题一定与这一行有关：

```
$('#removefield').on('click', function() { 
```

它没有通过那个条件。当我单击“删除”时，它根本不做任何事情，它只是滚动到顶部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:52:12.640

您正在将`click`处理程序绑定到 DOM 中存在的元素。但是，您的`#removefield`元素正在动态添加。因此，事件处理程序没有附加到它。

您可以`.on()`使用事件委托并处理未来的元素。此外，您可能希望使用类名而不是和`id`属性。`id`属性必须是唯一的，但您可以将类名设置为任意数量的元素。

```
<a href="#" class="removefield">Remove</a> 
```

```
$("#parts").on("click", ".removefield", function() { 
  /* ... */
}); 
```

* * *

`"Remove"`您的链接不起作用的原因是因为您正在`<div>`按部分添加动态元素，因此使其标记无效。你应该一次把它们加在一起。例如，

```
$('#addField').on('click', function () {
    var part = '<div id="parts' + i + '"><span>Part</span> <input type="text" id="auto_part' + i + '" name="auto_part' + i + '" /><br/>' +
        '<span>Description</span> <input type="text" id="auto_description' + i + '" name="auto_description' + i + '" /> <br />' +
        '<input type="hidden" id="row_count' + i + '" name="row_count' + i + '" value="" />' +
        '<a href="#" class="removefield' + i + '">Remove</a></div>';
    scntDiv.after(part);
    i++;
    return false;
}); 
```

```
$(document).on("click", ".removefield", function() {
    if( i > 2 ) {
        $(this).parent('div').remove();
        i--;
    }
    return false;
}); 
```

[你可以在这里看到它。](http://jsfiddle.net/YFwrM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:52:39.527

尝试

```
$('#removefield').live("click", function() { 
```

# database - Google App Engine 是否需要 Hibernate？

> ID：14656378
> 
> 赞同：1
> 
> 时间：2013-02-01T22:48:17.687
> 
> 标签：database, hibernate, google-app-engine

我是java新手。我以为hibernate是用来处理数据库的。谷歌应用引擎已经有数据库 api。那么这是否意味着我们不需要谷歌应用引擎的休眠？或者如果仍然需要，那为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:18:27.090

Hibernate 是几个[对象理性映射](http://en.wikipedia.org/wiki/Object-relational_mapping)(ORM) 框架之一。它是 Java Persistence API (JPA) 的实现。Google App Engine 使用另一个 ORM 框架 DataNucleus，您可以在 Java 数据对象 (JDO) 和 JPA 之间进行选择。有关这些框架的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/530215/hibernate-vs-jpa-vs-jdo-pros-and-cons-of-each)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:15:20.390

如果您正在使用关系数据库，那么 JDO 可能适合您，因为 JDO 既是对象关系映射标准又是透明对象持久性标准。所以，不，这里不需要 Hibernate

[https://developers.google.com/eclipse/docs/appengine_orm](https://developers.google.com/eclipse/docs/appengine_orm) [https://developers.google.com/appengine/docs/java/datastore/jdo/overview](https://developers.google.com/appengine/docs/java/datastore/jdo/overview)

但是，如果您的情况可能，请考虑对于云平台，使用非关系 (NoSQL) 数据库

# linux - 搜索并仅在发现某些内容时发送电子邮件

> ID：14656380
> 
> 赞同：4
> 
> 时间：2013-02-01T22:48:30.473
> 
> 标签：linux, bash, cron, grep

```
#!/bin/bash
( /usr/src/chkrootkit-$VERSION/chkrootkit ) | # Binary
grep 'INFECTED|Vulnerable' | # Only get found issues
/bin/mail -s 'CHROOTKIT Weekly Run ($SERVERNAME)' $EMAIL # Send EMail 
```

即使什么也没找到，它仍然会发送电子邮件。

什么是只有在某些东西被 grepped 时才发送的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T22:59:12.357

### 这或许...

只需`-E`在邮件命令中使用 switch：

```
man -Pcol\ -b mail | grep empty
     -E      Don't send messages with an empty body.

#!/bin/bash
( /usr/src/chkrootkit-$VERSION/chkrootkit ) | # Binary
grep 'INFECTED|Vulnerable' | # Only get found issues
/bin/mail -E -s 'CHROOTKIT Weekly Run ($SERVERNAME)' $EMAIL # Send EMail 
```

或将您的支票放入`crontab`自动处理中，例如每天一次：

```
@daily  ( /usr/src/chkrootkit-$VERSION/chkrootkit ) | grep 'INFECTED|Vulnerable' 
```

如果命令输出某些内容，Cron 将发送邮件。

### 但是，在重新阅读后

如果不需要*转发*警报中邮件的任何部分，则无需使用*pipe* `|`。

所以你可以这样使用*条件*：

```
#!/bin/bash
( /usr/src/chkrootkit-$VERSION/chkrootkit ) | # Binary
    grep -q 'INFECTED|Vulnerable' &&
    /bin/mail -s 'CHROOTKIT Weekly Run ($SERVERNAME)' $EMAIL 
```

`-q`开关，以确保`grep`保持安静。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-27T19:42:41.600

对于 GNU Mailutils，您可以使用**-E'set nonullbody' 执行**以下操作：

```
grep whatever wherever | mailx -E'set nonullbody' -s EMAIL_SUBJECT your_email_address@example.com 
```

请参阅[http://mailutils.org/manual/html_section/mail.html：nullbody](http://mailutils.org/manual/html_section/mail.html)

> 类型：布尔
> 默认值：True
> 
> 控制邮件是否接受正文为空的邮件。默认值 true 表示已发送此类消息，并显示警告（传统上说“空消息正文；希望没关系”）。可以使用 nullbodymsg 变量设置警告的文本​​（见下文）。
> 
> 如果 nullbody 未设置，邮件将默默地忽略此类消息。这在“crontab”文件中很有用，以避免在没有重要事件发生时发送邮件。例如，仅当实用程序 some-prog 在其标准输出上输出某些内容或错误时，下面的“crontab”条目才会发送邮件：

只需将上面的内容放在 cron 中以获取一些时间表：

```
*/5 * * * * some-prog 2>&1 | /bin/mail -E'set nonullbody' -s 'Periodic synchronization' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:51:58.800

```
#!/bin/bash
( /usr/src/chkrootkit-$VERSION/chkrootkit ) | # Binary
grep 'INFECTED|Vulnerable' # Only get found issues
if [ $? -eq 0 ]
    /bin/mail -s 'CHROOTKIT Weekly Run ($SERVERNAME)' $EMAIL # Send EMail
fi 
```

如果找到匹配项，则 grep 返回非零退出代码，否则返回 0。我们只需要检查最后一个返回值（即 grep 的返回值），并根据它有条件地发送邮件。

# c++ - std::time_get - 世纪？

> ID：14656383
> 
> 赞同：3
> 
> 时间：2013-02-01T22:48:38.453
> 
> 标签：c++, date, stl

有什么办法可以知道`std::time_get get_date`现在是什么世纪？我们处理 1900 年之前的日期。是否有更好的 C++ 日期时间库允许这样做？我们有一个内部解决方案，可以处理几种文化，但`get_date`似乎可以处理所有文化，所以作为最后的手段，它是一个很好的解决方案……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:51:13.117

您可以尝试查看[Boost.Gregorian](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/gregorian.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:38:50.607

如果您有 C++11 环境（至少在 std::lib 实现中），您可以使用新的`std::get_time`操纵器：

```
template <class charT>
unspecified
get_time(struct tm* tmb, const charT* fmt); 
```

例如：

```
#include <iomanip>
#include <sstream>
#include <iostream>
#include <ctime>

int
main()
{
    std::istringstream infile("1799-03-03");
    std::tm tm = {0};
    infile >> std::get_time(&tm, "%Y-%m-%d");
    std::cout << tm.tm_year + 1900 << '\n';
} 
```

这应该输出：

```
1799 
```

`%Y`转换说明符被指定为“作为十进制数的年份（例如，1997）” 。当存储在 a 中`std::tm`时，它将是 1900 年之后的年数，但该值由 a 持有`int`，接受负数。

全套转换说明符由 C++11 指定为对 ISO/IEC 9945 函数有效的集合`strptime`。

如果您正在寻找功能齐全的日期库，`boost::datetime`那么 Rapptz 提到的那个是一个很好的建议。

也欢迎您使用我的个人日期库，它是向 C++ 委员会提出并被拒绝的单一标题和单一来源。我提到，由于源仍在命名空间 std::chrono 中（出于建议目的），但如果你使用它，你应该更改命名空间。 [这是](http://home.roadrunner.com/~hinnant/bloomington/date.html)记录库的提案，以及指向单个标头和源实现的链接。

翻译上面的例子看起来像：

```
#include "date"
#include <iostream>
#include <sstream>

int
main()
{
    std::istringstream infile("1799-03-03");
    std::chrono::date date;
    infile >> date;
    std::cout << date.year() << '\n';
} 
```

再次输出：

```
1799 
```

As implemented this library also depends on the C++11 `std::get_time` manipulator for input, and includes options for varying the I/O conversion specifier (specified in the linked proposal).

# java - 在不执行 SPRING AOP 的建议之前

> ID：14656386
> 
> 赞同：1
> 
> 时间：2013-02-01T22:48:49.933
> 
> 标签：java, spring, maven, aop, spring-aop

我在准备考试时尝试了一个 Maven Spring AOP 示例，并遇到了以下问题。

我有一个简单的之前建议，我需要解雇....

我的代码如下

我的 pom 定义为

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org  /2001/XMLSchema-instance"   
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org /xsd/maven-4.0.0.xsd">
 <modelVersion>4.0.0</modelVersion>

  <groupId>my.chrispie</groupId>
  <artifactId>MyMavenSpringProject</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>MyMavenSpringProject</name>
  <url>http://maven.apache.org</url>

 <properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
<spring.version>3.0.0.RELEASE</spring.version>
 </properties>
<dependencies>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
</dependency>

<!-- Spring AOP + AspectJ -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.11</version>
</dependency>

<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.11</version>
    </dependency>
    </dependencies>
    <build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal> <!-- use this goal to weave all your main classes -->
                        <goal>test-compile</goal> <!-- use this goal to weave all your test classes -->
                    </goals>
                </execution>
           </executions>
       </plugin>

   </plugins> 
```

我有一个观众课

```
package my.chrispie.example.objects;

import org.aspectj.lang.ProceedingJoinPoint;

public class Audience {

public void takeSeats() {
    System.out.println("The audience is taking their seats");
}

public void turnOffCellPhones() {
    System.out.println("Turn off phones");
}

public void applaud() {
    System.out.println("CLAP CLAP CLAP");
}

public void demandRefund() {
    System.out.println("BOO BOO BOO");
}

public void perform() {
    System.out.println(".............PERFORMING");
}

public void watchPerformance(ProceedingJoinPoint jointpoint) {
    try {
        System.out.println("Audience is taking there seats");
        long start = System.currentTimeMillis();

        jointpoint.proceed();

        long end = System.currentTimeMillis();

        System.out.println("Perfomance took " + (end - start));
    } catch (Throwable t) {
        System.out.println("Boo we want our money back");
    }
} 
```

}

配置 xml 定义为

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/aop    
http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">  

<bean id="audienceExampleTest1" class="my.chrispie.example.objects.Audience">       </bean>
<bean id="audienceExampleTest2" class="my.chrispie.example.objects.Audience"></bean>

<aop:config>
    <aop:aspect ref="audienceExampleTest1">

        <aop:before pointcut="execution(* my.chrispie.example.objects.Audience.perform(..))"
        method="takeSeats"/>    

        <aop:after method="takeSeats" pointcut="execution(* my.chrispie.example.objects.Audience.perform(..)) "/>
    </aop:aspect>

</aop:config>

<aop:config>
    <aop:aspect ref="audienceExampleTest2">
        <aop:pointcut expression="execution(* my.chrispie.example.objects.Audience.perform(..))" 
        id="myPcId"/>

        <aop:before method="takeSeats" pointcut-ref="myPcId"/>          
        <aop:around method="takeSeats" pointcut-ref="myPcId"/>

    </aop:aspect>

</aop:config>               

</beans> 
```

和一个主要类

```
package my.chrispie.MyMavenSpringProject;

import my.chrispie.example.objects.Audience;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;

public class App 
{

private car myCar1;
private car myCar2;

@Autowired
public car myCar3;
public car myCar4;

public static void main( String[] args )
{
    System.out.println("Starting");

    App app = new App();
    app.testAOPExample1();
    System.out.println("Ending");

}

public void testAOPExample1() {
    ApplicationContext context = getAppContext();
    Audience a =  (Audience)context.getBean("audienceExampleTest1");
    a.perform();
    a.perform();
}

public ApplicationContext getAppContext() {
    ApplicationContext context = new FileSystemXmlApplicationContext("src/main/resources/applicationContext.xml");
    return context;
}

} 
```

但是当我运行它时，它会给出以下输出，而不会显示调用之前的建议的任何效果。

```
Starting
Feb 02, 2013 12:44:37 AM org.springframework.context.support.AbstractApplicationContext     prepareRefresh
INFO: Refreshing     org.springframework.context.support.FileSystemXmlApplicationContext@2b3954b1: startup date     [Sat Feb 02 00:44:37 CAT 2013]; root of context hierarchy
Feb 02, 2013 12:44:37 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader     loadBeanDefinitions
INFO: Loading XML bean definitions from file [F:\DEV\EclipseWorkSpaces    \STS1\MyMavenSpringProject\src\main\resources\applicationContext.xml]
Feb 02, 2013 12:44:37 AM     org.springframework.beans.factory.support.DefaultListableBeanFactory     preInstantiateSingletons
INFO: Pre-instantiating singletons in     org.springframework.beans.factory.support.DefaultListableBeanFactory@3d92d11: defining     beans     [audienceExampleTest1,audienceExampleTest2,org.springframework.aop.config.internalAutoProxy    Creator,org.springframework.aop.aspectj.AspectJPointcutAdvisor#0,org.springframework.aop.aspectj.AspectJPointcutAdvisor#1,org.springframework.aop.aspectj.AspectJPointcutAdvisor#2,org.springframework.aop.aspectj.AspectJPointcutAdvisor#3,myPcId]; root of factory hierarchy
.............PERFORMING
.............PERFORMING
Ending 
```

有谁知道为什么之前的建议没有运行以及为什么它没有给我一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T04:19:05.890

这是因为您没有在配置文件中的任何位置指定 Aspect Bean。添加以下内容

```
 <!-- <aop:aspectj-autoproxy proxy-target-class="true"/>  -->
    <bean id="audienceExampleTest1" class="my.chrispie.example.objects.Audience">       </bean>
    <bean id="audienceExampleTest2" class="my.chrispie.example.objects.Audience"></bean>

    <!-- Aspect -->
    <bean id="Aop" class="my.chrispie.example.objects.Audience" />

    <aop:config>

    <aop:aspect id="aspect" ref="Aop" >

    <aop:pointcut id="beforethis" 
          expression="execution(* my.chrispie.example.objects.Audience.perform(..))"/>

               <aop:before pointcut-ref="beforethis" method="takeSeats" />    

            <aop:after pointcut-ref="beforethis" method="turnOffCellPhones" />
        </aop:aspect>

    </aop:config> 
```

另请参阅此[Aspect Oriented Programming with Spring](http://static.springsource.org/spring/docs/2.0.8/reference/aop.html)希望对您有所帮助！

# gradle - gradle 在子任务中定义的父任务中使用变量

> ID：14656389
> 
> 赞同：10
> 
> 时间：2013-02-01T22:48:58.400
> 
> 标签：gradle

我有一个多项目 gradle 构建，我在父构建中声明了一个任务，该任务使用在子项目中声明的变量（值可以根据子项目而改变）。但是，我在配置阶段收到一个错误，即变量不存在。我的设置看起来像

build.gradle（顶级）

```
subprojects {
   myTask {
     prop = valueDefinedInChild
   }

} 
```

进而

build.gradle（子项目）

```
valueDefinedInChild = 'someValue' 
```

有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T00:45:49.507

有一种方法可以做到这一点（`project.evaluationDependsOnChildren()`），但我建议仅将其用作最后的手段。相反，我会在顶层配置共性，在子项目级别配置差异：

build.gradle（顶级）：

```
subprojects {
    task myTask { // add task to all subprojects
        // common configuration goes here
    }
} 
```

build.gradle（子项目）：

```
myTask {
    prop = 'someValue'
} 
```

避免重复的另一种方法是将通用代码分解为单独的脚本，并让子项目将其包含在`apply from:`. 当逻辑仅适用于选定的子项目时，或者希望避免父项目和子项目之间的耦合（例如，使用 Gradle 的新[按需配置](http://www.gradle.org/docs/current/release-notes#improved-scalability-via-configuration-on-demand)功能时），这是一个不错的选择。

# jquery - 使用 Jquery 移动弹出窗口

> ID：14656390
> 
> 赞同：0
> 
> 时间：2013-02-01T22:48:59.103
> 
> 标签：jquery, jquery-mobile

我正在尝试为我的网站使用 jquery 移动弹出窗口。当我包含移动 js 文件时，整个页面都搞砸了。我假设样式已应用于我的文档。实际上，我不想将移动样式应用于我的页面。我只想对某些部分使用弹出功能而忽略其余部分。

是否有可能以及如何？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:03:09.247

是的，您可以在我的另一篇文章中找到更多相关信息：[https](https://stackoverflow.com/a/14550417/1848600) ://stackoverflow.com/a/14550417/1848600 ，搜索：**标记增强预防方法**。

简而言之：

它可以通过添加这个属性来做到这一点：

```
data-enhance="false" 
```

到**header**，**content**，**footer**容器。

这也需要在应用加载阶段开启：

```
$(document).one("mobileinit", function () {
    $.mobile.ignoreContentEnabled=true;
}); 
```

在初始化 jquery-mobile.js 之前初始化它（看下面的例子）。

更多相关信息可以在这里找到：

[http://jquerymobile.com/test/docs/pages/page-scripting.html](http://jquerymobile.com/test/docs/pages/page-scripting.html)

您还需要在内容上使用**data-role="none"**因为如果您使用**data-enhance="false"**弹出窗口将失去其样式。

忠告，找到弹出窗口的另一种实现。基本上，您正在使用核武器来杀死一只苍蝇。

示例：http: [//jsfiddle.net/Gajotres/PGL5t/](http://jsfiddle.net/Gajotres/PGL5t/)

# ruby-on-rails - Rails 3嵌套模型中的未知属性错误

> ID：14656396
> 
> 赞同：0
> 
> 时间：2013-02-01T22:49:24.267
> 
> 标签：ruby-on-rails

我有一个模型`submission`和一个嵌套模型`attachment`

在`submission.rb`：

```
has_many :assets, :dependent => :destroy
accepts_nested_attributes_for :assets, :allow_destroy => true 
```

在`assets.rb`：

```
 attr_accessible :file_id, :attachment
  belongs_to :submission
  has_attached_file :attachment 
```

在我的`submission`控制器中：

```
def new
    @submission = Submission.new
    @asset = 2.times{ @submission.assets.build }

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @submission }
    end
  end

  def edit
    @submission = Submission.find(params[:id])
    @asset = 2.times{ @submission.assets.build }
  end 
```

我遇到了一个`unknown attribute: submission_id`错误。

这里可能有什么问题。

我在这里关注截屏视频： [http ://www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads](http://www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:07:03.340

似乎 submit_id 不存在于您的资产表中。

您必须生成资产模型，例如：

```
rails generate model Asset submission_id:integer #rails 3 
```

然后运行：

```
bundle exec rake db:migrate #rails 3 
```

# r - 在R中制作方轴

> ID：14656398
> 
> 赞同：32
> 
> 时间：2013-02-01T22:49:30.237
> 
> 标签：r, graphics, plot

如何使用 R 使轴在散点图中始终为正方形？例如在：

```
> plot(iris) 
```

或者

```
> plot(iris$Petal.Width, iris$Petal.Length) 
```

我希望轴是方形的，即 x 和 y 轴的长度和刻度标签相同。

当前建议的答案不起作用：电话，

```
plot(iris$Petal.Width, iris$Petal.Length, xlim=c(0,10), ylim=c(0,10), asp=1) 
```

生成：

![在此处输入图像描述](../Images/9d80fd9f5fcb2360ec3e104d4fce303a.png)

它不是方形的，并且没有相同的轴刻度和刻度标签。x 刻度标签之间的空间必须相同，并且绘图应该是正方形，而不是矩形。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-02T00:57:07.520

您还需要`pty="s"`在图形参数中设置以使绘图区域为正方形（与设备大小和限制无关）：

```
par(pty="s")
plot(iris$Petal.Width, iris$Petal.Length, asp=1)
lines(2+c(0,1,1,0,0),3+c(0,0,1,1,0)) # confirm square visually 
```

![高的](../Images/9d18599a723e2c2a907a9e4759d7d1db.png)![长](../Images/a282184e8c67c7d7e5bcb40b6cf72464.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T23:09:00.803

首先，对我来说，情节已经[是方形](https://i.imgur.com/y7aMh04.png)的（大图）。显然对你来说情况并非如此，无论如何你可能需要使绘图大于屏幕。

因此，绘图的大小由输出区域的大小控制，即绘图窗口、图像文件或其他任何内容。使用[Rstudio](http://www.rstudio.com/)，您可以使用内置 GUI 指定绘图大小。如果您坚持使用基本 R 控制台，则需要手动进行导出。首先打开文件：

```
png("image.png", width=600, height=600) 
```

这将在工作目录中打开一个等比例的图像文件。现在绘制：

```
x = iris$Petal.Width
y = iris$Petal.Length
all = c(x,y)
range = c(min(all), max(all))
plot(x, y, xlim=range, ylim=range) 
```

并关闭文件：

```
dev.off() 
```

结果：

![在此处输入图像描述](../Images/957755886df9db273f8c97ea4bf47e9a.png)

# c++ - 以向量作为类成员的对象数组

> ID：14656406
> 
> 赞同：1
> 
> 时间：2013-02-01T22:50:04.520
> 
> 标签：c++

我有一个对象数组，其中有一个向量作为类成员（实际上它是一个结构）。结构是：

```
struct Cell {
  vector<int> borderNodes;
  vector<int> helperNodes;

  int minNodePointer;
  int maxNodePointer;

  Cell() {
    minNodePointer = -1;
    maxNodePointer = -1;
  }

  Cell(int _minNodePointer, int _maxNodePointer) {
    minNodePointer = _minNodePointer;
    maxNodePointer = _maxNodePointer;
  }

  vector<int>& getHelperNodes() {
    return helperNodes;
  }

  vector<int>& getBorderNodes()  {
    return borderNodes;
  }

  void setHelperNodesArray() {
    sort(helperNodes.begin(), helperNodes.end());
  }

  void setBorderNodesArray() {
    sort(borderNodes.begin(), borderNodes.end());
  }
}; 
```

我已经将这些对象的数组构建为全局变量：

```
Cell* cells = new Cell[maxNumberOfCells]; 
```

我想在对象内的向量中添加一些整数。

我试过这个（在函数内）：

```
cells[cellId].borderNodes.push_back(node_id); 
```

或者

```
cells[cellId].getBorderNodes().push_back(node_id); 
```

他们编译得很好，但没有任何东西添加到向量中。正确的方法是如何做到这一点？这是从数据库读取并添加整数的函数。从 db 查询和读取是正确的，所以没有错误。

```
void loadBorderNodesPerCellBnOnly(bool shouldRearrangeNodes, int subtractor, int maxNumberOfCells, int** cellBorderNodes) {
    cellBorderNodes = new int*[maxNumberOfCells];
    try {
        work W(Conn);
        for (int rownum = 0; rownum < r.size(); ++rownum) {
            const result::tuple row = r[rownum];

            vector<string> s = split(row[1].as<string > (), ' ');
            const int mySize = s.size();
            int cellId = row[0].as<int> ();
            cellBorderNodes[cellId] = new int[mySize];
            for (int k = 0; k < mySize; k++) {
                int node_id = atoi(s[k].c_str());
                cellBorderNodes[cellId][k] = node_id;
                (cells[cellId].getBorderNodes()).push_back(node_id);
                try {
                    nodes[node_id - subtractor].cellId = cellId;
                } catch (const std::exception &e) {
                    std::cerr << e.what() << std::endl;
                }
                nodes[node_id - subtractor].isBorderNode = true;
            }
            s.clear();
        }
    } catch (const std::exception &e) {
        std::cerr << e.what() << std::endl;
    }

    for (int k = 0; k < maxNumberOfCells; k++) {
        cout << k << ": " << cells[k].borderNodes.size() << endl;
        cells[k].setBorderNodesArray();
        if (maxBorderNodesPerCell < cells[k].borderNodes.size()) {
            maxBorderNodesPerCell = cells[k].borderNodes.size();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:09:10.363

```
void loadBorderNodesPerCellBnOnly([...], int** cellBorderNodes) {
    cellBorderNodes = new int*[maxNumberOfCells]; 
```

上面的函数接受一个`int**`值。副本`cellBorderNodes`在函数内部调用。在下一行中，您更改**副本**的值并继续更新它。这些更改都不会在函数之外可见。（并且您将泄漏获得的内存）

如果要`int**`在函数内部传递并修改它，请考虑通过引用传递它，如`int**&`. 但是您可能最好使用更高级别的构造（传递 a `vector<vector<int>>&`，创建一个表示数据的类型并按值传递它......）

# android - Android：在 ActionMode 中禁用 ActionBar 项目的上下文菜单？

> ID：14656409
> 
> 赞同：1
> 
> 时间：2013-02-01T22:50:28.227
> 
> 标签：android, android-actionbar, listener

我在我的 ListFragment 中创建了一个多选操作模式。它在 ActionBar 上添加了一些新的 MenuItem，效果很好。**但我不知道，我的菜单项上的任何长按如何以及为什么会触发一个完全空的上下文菜单？**

我尝试对其进行 setEnable(false) 和 setVisibility(false) ，但这根​​本没有帮助 - 我只想在长按时禁用上下文菜单。

# ruby-on-rails-3 - Rails 3.2.9 正在生成模板缺失错误

> ID：14656410
> 
> 赞同：1
> 
> 时间：2013-02-01T22:50:28.903
> 
> 标签：ruby-on-rails-3

我在 Rails 3.2.9 中收到以下错误：

`Template is missing`

`Missing template projects/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "c:/Documents and Settings/.../app/views"`

我昨天开始收到这个错误，回去重建我的控制器，但仍然收到错误。`rails generate scaffold`然后，我在命令行上使用重建了所有内容。当我进入保存一个新的对象实例时，我仍然遇到同样的错误。

我的假设是脚手架生成器会在准系统的基础上生成正确的代码，然后让我一块一块地重建功能。

我在下面包含模型和控制器的代码：

```
class Project < ActiveRecord::Base
  attr_accessible   :title, ...

end 
```

++++++++++

```
class ProjectsController < ApplicationController

  # GET /projects
  def index
    @projects = Project.all

  end

  # GET /projects/1
  def show
    @project = Project.find(params[:id])

  end

  # GET /projects/new
  def new
    @project = Project.new

  end

  # GET /projects/1/edit
  def edit
    @project = Project.find(params[:id])
  end

  # POST /projects
  def create
    @project = Project.new(params[:project])
    @project.save

  end

  # PUT /projects/1
  def update
    @project = Project.find(params[:id])

  end

  # DELETE /projects/1
  def destroy
    @project = Project.find(params[:id])
    @project.destroy

  end
end 
```

有人有想法么？Rails 是否在一夜之间开发了一个错误？我无法使用 Google-Fu 找到任何可能归因于此的东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:01:40.917

不确定 rails 中的默认 rails 脚手架，但一般来说，您应该在创建时使用成功的 flash 消息重定向：

```
@project = Project.new(params[:project])
if @project.save
  redirect_to @project, notice: "Success"
else
  render :new
end 
```

# javascript - 如何将这个简短的 PHP 函数转换为 JavaScript？

> ID：14656412
> 
> 赞同：-3
> 
> 时间：2013-02-01T22:50:30.880
> 
> 标签：javascript, php, dom-events

如何将此 PHP 代码复制到 JavaScript 中？它需要一个像 2-9999（序列号）这样的数字并将其转换为 NUMBER ... 2-999 在转换时将是一个不同的值。

```
function esn_to_num($esn)
{

    if (($tmp = explode('-', $esn))) {

        if (sizeof($tmp) == 2
            && my_isnum($tmp[0])
            && my_isnum($tmp[1])
        ) {
            $esn = (($tmp[0] << 23) | $tmp[1]);
        } else {
            $esn = -1;
        }
    } else {
        $esn = -1;
    }

    return $esn;
} 
```

我在下面添加了一个依赖函数：

```
// dependency function
    /*****************************************************************************
    * CHECKS IF A STRING REPRESENTS A NUMBER
    ******************************************************************************/
    function my_isnum($str, $negative=false, $decimal=false)
    {
        $has_decimal = false;
        $len = strlen($str);
        if ($len > 0) {
            $valid = true;
            for ($i=0; $valid && $i<$len; $i++) {
                if (!($str[$i] >= '0' && $str[$i] <= '9')) {
                    if ($str[$i] == '-') {
                        if (!$negative || $i != 0) {
                            $valid = false;
                        }
                    } else if ($str[$i] == '.') {
                        if (!$decimal || $has_decimal) {
                            $valid = false;
                        }
                    } else {
                        $valid = false;
                    }
                }
            }
        } else {
            $valid = false;
        }
        return $valid;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:59:30.860

php 语法与 JS 非常相似。

只需获取变量并删除, 并使用关键字 `$`声明它们。`var`

```
function esn_to_num(esn) {
    var tmp = [];
    if ((tmp = explode('-', $esn))) {
        if (sizeof(tmp) == 2
            && my_isnum(tmp[0])
            && my_isnum(tmp[1])
        ) {
            esn = ((tmp[0] << 23) | tmp[1]);
        } else {
            esn = -1;
        }
    } else {
        esn = -1;
    }
    return esn;
} 
```

然后你需要用等效的 JS 替换你所有的 php 函数。查找“ 的 javascript 等价物`explode`，`sizeof`.

按照相同的过程`my_isnum`用 javascript 重写（显然不是原生 php 函数）。

**编辑**：看到你的更新后，我意识到堆栈溢出（或其他地方）上可能已经有很多代码可以做什么`my_isnum`。搜索“js 函数以确定字符串是否为数字”或在此处单独提问。

您可以在 chromes javascript 控制台中完成所有这些操作，并不断迭代，直到您停止收到错误为止。如果您遇到特定问题并被卡住，那么最好在 Stack Overflow 上询问它。

# emacs - Emacs - 超时终止建议缓冲区

> ID：14656419
> 
> 赞同：1
> 
> 时间：2013-02-01T22:50:55.747
> 
> 标签：emacs, dot-emacs

我知道这个解决方案已发布，但我找不到它。我在我的 .emacs 代码中有在 n 秒后自动终止建议缓冲区（我的设置为 5）。这使我不必切换到该窗格并杀死它或打开 90 个自动完成或建议缓冲区。我再也找不到代码了。有人知道怎么做这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:31:10.703

试试[Midnight Mode](http://www.emacswiki.org/emacs/MidnightMode)，它包含在最新版本的 Emacs 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:27:24.107

```
(run-with-idle-timer SECS REPEAT 'x-function)

Perform an action the next time Emacs is idle for SECS seconds.
The action is to call FUNCTION with arguments ARGS.
SECS may be an integer, a floating point number, or the internal
time format returned by, e.g., `current-idle-time'.
If Emacs is currently idle, and has been idle for N seconds (N < SECS),
then it will call FUNCTION in SECS - N seconds from now.

If REPEAT is non-nil, do the action each time Emacs has been idle for
exactly SECS seconds (that is, only once for each time Emacs becomes idle). 
```

你定义一个函数 x-function 来杀死你想要的缓冲区。

# php - 统计查询结果，根据结果显示信息，点击按钮后使用ajax刷新页面显示信息

> ID：14656425
> 
> 赞同：0
> 
> 时间：2013-02-01T22:51:02.790
> 
> 标签：php, mysql, pdo, prepared-statement

[当有问题要回答问题](http://i347.photobucket.com/albums/p451/babyoth/questions.jpg)时，我试图证明这一点

当没有问题要回答时。[没有问题](http://i347.photobucket.com/albums/p451/babyoth/noquestions.jpg)

这是我尝试使用的代码，注释掉的行是我尝试过的 if 循环，但它总是返回 1

```
<?php
        $dbtype = "mysql";
        $dbhost = "localhost";
        $dbname = "starsqa";
        $dbuser = "root";
        try {
            $pdo_conn = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser);
        } catch (PDOException $ex) {
            echo $ex->getMessage();
        }

        $qry_string = "select * from questions inner join stars on stars.starID = questions.starID where stars.starID = ? && approved = 1 && answered = 1 && `check` = 0";
        $prep = $pdo_conn->prepare($qry_string);
        $starid = $_SESSION['starid'];
        $prep->execute(array($starid));
        //if (count($qry_string) > 0) {
            //echo count($qry_string);
            echo "<table style='border:0px; background-color:#8C7E6C;'><thead style='border:0px;'><tr style='border:0px solid white; background-color:#153E7E; color:white; padding: 5; margin: 5;'><th style='border:1px white; padding: 5; margin: 5;'>Question</th><th style='border:1px white; padding: 5; margin: 5;'>Response</th></tr></thead><tbody>";
            while ($row = $prep->fetch(PDO::FETCH_ASSOC)) {
                echo "<tr style='border:1px white; background-color:lightblue; padding: 5; margin: 5;'><td style='border:1px white; padding: 5; margin: 5;'>{$row['question']}</td>
                      <td style='border:1px white; padding: 5; margin: 5;'><textarea rows='4' cols='50' id='{$row['questionID']}' class='response'>{$row['response']}</textarea></td></tr>";
            }
            echo "</tbody></table>";     
            echo "<br><button type='button' class='save_btn'>Save All</button><br><br>";
        //}
//        if (count($qry_string) < 1) {  
//          echo count($qry_string); 
//          echo "no question to answer atm"; 
//        }
        ?> 
```

任何人都知道为什么这不起作用或其他方式来实现这一点？

它现在正在使用（感谢 showdev）：

```
$prep->execute(array($starid));
//if (count($qry_string) > 0) {
    //echo count($qry_string);
        // $count= count($prep->fetchAll());    
         $count = $prep->rowCount();
         //echo "$count";
         if ($count > 0){
    echo "<table style='border:0px; background-color:#8C7E6C;'><thead style='border:0px;'><tr style='border:0px solid white; background-color:#153E7E; color:white; padding: 5; margin: 5;'><th style='border:1px white; padding: 5; margin: 5;'>Question</th><th style='border:1px white; padding: 5; margin: 5;'>Response</th></tr></thead><tbody>";
    while ($row = $prep->fetch(PDO::FETCH_ASSOC)) {
        echo "<tr style='border:1px white; background-color:lightblue; padding: 5; margin: 5;'><td style='border:1px white; padding: 5; margin: 5;'>{$row['question']}</td>
              <td style='border:1px white; padding: 5; margin: 5;'><textarea rows='4' cols='50' id='{$row['questionID']}' class='response'>{$row['response']}</textarea></td></tr>";
    }
    echo "</tbody></table>";     
    echo "<br><button type='button' class='save_btn'>Save All</button><br><br>";  

}
if ($count < 1) {  
  echo "no question to answer atm"; 
} 
```

只是想到了其他需要的东西，一旦我按下全部保存以 ajax 刷新页面并显示新的/当前信息，我将使用什么功能来做到这一点？

我做到了:-) 使用这个：location.reload();

```
var html = '';
$(document).ready(function(){
    $(".save_btn").live('click', function() {

        $('.response').each(function(){
            //alert($(this).attr('id'));
            //alert($(this).val());
            if ($(this).val() == '') {
                html = $.ajax({
                    url: "response.php?questionID=" + $(this).attr('id') + "&response=" + $(this).val() + "&check=0",
                    async: false
                }).responseText;
            }   
            if ($(this).val() !== '') {
                html = $.ajax({
                    url: "response.php?questionID=" + $(this).attr('id') + "&response=" + $(this).val() + "&check=1",
                    async: false
                }).responseText;
            }   

        }); 
        alert(html);
        location.reload();
    });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:04:16.360

看起来您正在计算查询字符串而不是结果记录集。尝试`fetchAll`计算结果或尝试`rowCount`：

```
$count=count($prep->fetchAll(););
$count = $prep->rowCount(); 
```

从文档中：

> [rowCount] 不保证适用于所有数据库，不应依赖于可移植应用程序。

# lisp - 计划中的合并排序

> ID：14656435
> 
> 赞同：2
> 
> 时间：2013-02-01T22:52:07.890
> 
> 标签：lisp, scheme

我正在Scheme中编写合并排序，我很好奇为什么这不起作用......

这是我希望工作的实现，但没有：

```
(define (mergesort op l)
  (cond ((null? l) l)
      ((null? (cdr l)) l)
      (else (merge op (car l)
                      (mergesort op (cdr l))))
  )
) 
```

这是“正确”的实现。

```
(define (mergesort op l)
  (cond ((null? l) l)
      ((null? (cdr l)) l)
      (else (merge op (cons (car l) (list))
                      (mergesort op (cdr l))))
  )
) 
```

为什么我必须 (cons (car l) (list)) 在尝试将其与递归合并之前？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:56:06.220

请注意：

```
(cons (car l) (list)) 
```

... 相当于：

```
(list (car l)) 
```

换句话说，您必须传递一个包含单个元素的*列表*，而不仅仅是一个元素作为`merge`过程的第二个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T23:36:01.847

奥斯卡是完全正确的，但有一点被忽视了。

这不是归并排序。归并排序的定义是什么？它获取列表，将其分成两半，对每个排序列表进行排序，然后将它们合并在一起。

你没有分成两半；你分裂成一个和其余的。然后对其余的进行排序，并将单个元素合并到列表中。但是您可以将单个元素合并到列表中视为将元素插入到列表中。

啊哈，有线索！您已经编写[了插入排序](https://en.wikipedia.org/wiki/Insertion_sort)。哪个*很好*；有用。它的效率要低得多。

因此，归并排序和插入排序之间的区别在于选择了错误的位置来拆分列表。

# ruby-on-rails - rails s 没有启动我的项目

> ID：14656437
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:52:16.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我从网上尝试了很多不同的解决方案，但我无法解决这个问题。这是我在执行 rails 时遇到的错误

```
bash-3.2$ rails s
=> Booting WEBrick
=> Rails 3.2.11 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- openssl (LoadError)
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/session/cookie.rb:1:in `<top (required)>'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/actionpack-3.2.11/lib/action_dispatch/middleware/session/cookie_store.rb:4:in `<top (required)>'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application/configuration.rb:140:in `const_get'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application/configuration.rb:140:in `session_store'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application.rb:273:in `block in default_middleware_stack'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application.rb:237:in `tap'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application.rb:237:in `default_middleware_stack'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/engine.rb:469:in `app'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application/finisher.rb:31:in `block in <module:Finisher>'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/sr027976/test_app/phappinfra_starter_app/config/environment.rb:5:in `<top (required)>'
    from /Users/sr027976/test_app/phappinfra_starter_app/config.ru:3:in `require'
    from /Users/sr027976/test_app/phappinfra_starter_app/config.ru:3:in `block in <main>'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
    from /Users/sr027976/test_app/phappinfra_starter_app/config.ru:in `new'
    from /Users/sr027976/test_app/phappinfra_starter_app/config.ru:in `<main>'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/builder.rb:40:in `eval'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/builder.rb:40:in `parse_file'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/server.rb:200:in `app'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in `app'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/server.rb:304:in `wrapped_app'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/rack-1.4.4/lib/rack/server.rb:254:in `start'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in `start'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/commands.rb:50:in `tap'
    from /Users/sr027976/.rvm/gems/ruby-1.9.3-p374@phappinfra_starter_app/gems/railties-3.2.11/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:54:45.547

假设您已正确安装了 opensll - 您应该通过重新安装来检查，这听起来像是与 RVM 相关的问题。最糟糕的是我会尝试重新安装 RVM（这有点麻烦）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:51:58.843

使用 RVM 创建 gemset

```
rvm gemset create gemset_name 
```

然后运行

```
bundle install 
```

这实际上是 gem 依赖的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T18:12:13.120

这些是我执行的步骤，它对我有用。rvm 得到头

```
rvm requirements
rvm pkg remove
brew install libksba autoconf automake
rvm reinstall 1.9.2 --with-openssl-dir=/usr/local
rvm pkg install readline --verify-downloads 1
rvm use 1.9.3 --default 
```

# jdbc - 在 Jetty 中配置 JNDI 资源 SQL

> ID：14656442
> 
> 赞同：4
> 
> 时间：2013-02-01T22:52:32.583
> 
> 标签：jdbc, jetty, jndi

我在 Jetty 中配置 JNDI 资源时遇到了很多困难。我已经使用 context.xml 和 Resource 节点轻松地在 Tomcat 中工作。已尝试在 jetty-env.xml 及其 context.xml 文件的版本中指定 Jetty 中的资源，但我最终得到了相同的异常。这是资源定义的 context.xml 版本：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">

<Configure class="org.eclipse.jetty.webapp.WebAppContext">

    <New id="DSTest" class="org.eclipse.jetty.plus.jndi.Resource">
        <Arg></Arg>
        <Arg>jdbc/SQLDB</Arg>
        <Arg>
            <New class="com.microsoft.sqlserver.jdbc.SQLServerDriver">
                <Set name="serverName">SQLDB.domain.com</Set>
                <Set name="portNumber">1433</Set>
                <Set name="databaseName">DBName</Set>
                <Set name="userName">UName</Set>
                <Set name="password">PWord</Set>
            </New>
        </Arg>
    </New>
</Configure> 
```

当我尝试启动 JNDI 时出现的异常是：

```
java.lang.NoSuchMethodException: class com.microsoft.sqlserver.jdbc.SQLServerDriver.setServerName(class java.lang.String)
2013-02-01 16:57:39.061:WARN:oejd.DeploymentManager:Unable to reach node goal: started
java.lang.NoSuchMethodException: class com.microsoft.sqlserver.jdbc.SQLServerDriver.setServerName(class java.lang.String)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.set(XmlConfiguration.java:585)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:390)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.newObj(XmlConfiguration.java:819)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.itemValue(XmlConfiguration.java:1132)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.value(XmlConfiguration.java:1035)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.newObj(XmlConfiguration.java:783)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:398)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:349)
        at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.java:302)
        at org.eclipse.jetty.deploy.providers.ContextProvider.createContextHandler(ContextProvider.java:86)
        at org.eclipse.jetty.deploy.App.getContextHandler(App.java:100)
        at org.eclipse.jetty.deploy.bindings.StandardDeployer.processBinding(StandardDeployer.java:36)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:186)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:494)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:141)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:145)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:56)
        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:609)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:540)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:403)
        at org.eclipse.jetty.util.Scanner.doStart(Scanner.java:337)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:121)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:555)
        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:230)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.util.component.AggregateLifeCycle.doStart(AggregateLifeCycle.java:81)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:96)
        at org.eclipse.jetty.server.Server.doStart(Server.java:277)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1265)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1188)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:468)
        at org.eclipse.jetty.start.Main.start(Main.java:616)
        at org.eclipse.jetty.start.Main.main(Main.java:92) 
```

此异常似乎违反直觉，因为我可以在[Microsoft JDBC Driver 4.0 for SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms378988.aspx)中看到 serverName 被列为有效属性。

另外，我运行了以下命令来验证是否包含所有预期的 jar 文件。特别是那些用于 jndi 和 sqljdbc 的。

```
java -jar start.jar --list-options 
```

以下是我用来获取当前位置的教程和文档的链接。

```
http://wiki.eclipse.org/Jetty/Feature/JNDI

http://www.eclipse.org/jetty/documentation/current/jndi-datasource-examples.html

http://www.eclipse.org/jetty/documentation/current/jndi.html#configuring-env-entries 
```

社区的任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:32:06.973

[对于Jetty7](http://wiki.eclipse.org/Jetty/Howto/Configure_JNDI_Datasource) ，您必须遵循这些说明。对于较旧的[码头](http://docs.codehaus.org/display/JETTY/DataSource+Examples)。

我看到您正在尝试使用 Sql Server，因此，您需要使用**net.sourceforge.jtds.jdbcx.JtdsDataSource**，如示例所示：

```
<New id="DSTest" class="org.eclipse.jetty.plus.jndi.Resource">
     <Arg></Arg>
     <Arg>jdbc/DSTest</Arg>
     <Arg>
        <New class="net.sourceforge.jtds.jdbcx.JtdsDataSource">
           <Set name="User">user</Set>
           <Set name="Password">pass</Set>
           <Set name="DatabaseName">dbname</Set>
           <Set name="ServerName">localhost</Set>
           <Set name="PortNumber">1433</Set>
        </New>
     </Arg>
    </New> 
```

此外，添加到**[jetty_home]/lib/ext**所需的库[jTDS](http://jtds.sourceforge.net/)或使用 Maven：[Maven 依赖](http://mvnrepository.com/artifact/net.sourceforge.jtds/jtds/1.2)项：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:22:10.560

问题不在于`serverName`方法。方法不存在。都没有`portNumber`，等等。您不能直接使用驱动程序。

如果您查看 jetty [doc](http://wiki.eclipse.org/Jetty/Howto/Configure_JNDI_Datasource#SQL_Server_2000)，它建议了非池数据源的替代方案。但可能你想要一个游泳池。所以，这个[配置](http://wiki.eclipse.org/Jetty/Howto/Configure_JNDI_Datasource#dbcp)。

```
<New class="org.apache.commons.dbcp.BasicDataSource">
    <Set name="driverClassName">com.microsoft.sqlserver.jdbc.SQLServerDriver</Set>
    <Set name="url">jdbc:jtds:sqlserver://<host>:<port>/<database_name></Set>
    <Set name="username">jdbc.user</Set>
    <Set name="password">jdbc.pass</Set>
</New> 
```

**已编辑**

关于你的新问题。不知道发生了什么。看起来码头在创建[临时目录](http://docs.codehaus.org/display/JETTY/Temporary+Directories)时遇到了问题。根据[文档](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin)，对于 Maven 插件，临时目录是`${basedir}/target`. 检查您的 jetty maven 插件配置，检查临时主管是否正确以及 jetty 是否具有该目录的权限。

# c# - 如何在 C# 中将 {"key":"user_id"}, {"value":"123"} 转换为 {"user_id":"123"}

> ID：14656444
> 
> 赞同：0
> 
> 时间：2013-02-01T22:52:49.683
> 
> 标签：c#, dictionary

我正在使用 Dictionary 来构建键/值，并且需要为 HTTP Post 对其进行字符串化。他们的问题是，当我使用 Cordova 的 JsonHelper 对数据进行字符串化时，它会显示“键：”和“值：”，然后是实际的键和值。我想删除这些。

我正在为 Windows Phone 8 开发。

这：

```
Dictionary<string, string> data = new Dictionary<string, string>();
data.Add("user_id", user_id);
data.Add("order_id", order_id);
data.Add("package_id", package_id);
data.Add("order_status", "0"); //0 is success
data.Add("platform", "windows");
String postData = WPCordovaClassLib.Cordova.JSON.JsonHelper.Serialize(data); 
```

输出：

```
[{"Key":"user_id","Value":"33"},{"Key":"order_id","Value":"07dbda1d-f877-4be8-b2d9-dba1f4622054"},{"Key":"package_id","Value":"package4"},{"Key":"order_status","Value":"0"},{"Key":"platform","Value":"windows"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:55:42.130

您可以使用内置的 Json 序列化器 ( [JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx) )

```
string postData = new JavaScriptSerializer().Serialize(data); 
```

或[Json.Net](http://json.codeplex.com/)（支持*Supports .NET 2、.NET 3.5、.NET 4、Silverlight、Windows Phone 和 Windows 8*）

```
string postData = JsonConvert.SerializeObject(data); 
```

输出将是：

```
{
  "user_id": "1",
  "order_id": "100",
  "package_id": "200",
  "order_status": "0",
  "platform": "windows"
} 
```

# javascript - Spine.js 未知记录（可能的范围错误？）

> ID：14656447
> 
> 赞同：1
> 
> 时间：2013-02-01T22:52:57.980
> 
> 标签：javascript, spine.js

如果我有一个“专辑”列表，然后单击其中一个，我会导航到另一个视图 (/#/album/:id)，该视图由名为 SingleAlbum 的控制器控制。它正确地获取数据，但我无法让它呈现。我查看了 SO 和 Spine Google Group 上的其他“未知记录”问题，但没有骰子。这是我的代码：

```
var SingleAlbum = Spine.Controller.sub({
    apiObj: {
        url: '/api/album',
        processData: true,
        data: {
            id: ''
        }
    },
    model: Album,
    panel: $('.album_single'),
    tmpl: $('#albumTpl'),

    init: function() {
        this.apiObj.url = this.model.url;
        if(this.panel.children.length > 0) {
            this.panel.html('');
        }
    },
    render: function(id) {
        console.log('render');

        var template = singleAlbum.tmpl.html(),
            data = Album.find(id), //  <--  this doesn't want to work
            html = Mustache.to_html(template, data);
        singleAlbum.panel.html(html);
    },
    getData: function(id) {
        //var me = this;
        console.log('get data');
        this.apiObj.data.id = id;
        this.apiObj.url = this.model.url;

        this.model.bind('refresh change', function(id) {
            //me.render(id);
            singleAlbum.render(id);
            console.log('should be rendered');
        });

        this.model.fetch(this.apiObj);
        console.log('record: ',this.model.find(id));
        if(Object.keys(this.model.find(id)).length > 0) {
            //this.render(id);
        }
    }   

}); 
```

当我在事件处理程序上调用 .render() 时，就会出现问题。我可以手动看到 Album.all() 有记录，并且可以在应用程序的其他任何地方执行 Album.find(id)，但是当我这样做时它`var data = Album.find(id)`会失败。这是范围问题吗？我错过了一些明显的东西吗？

顺便说一句，请原谅我的代码的冗长。我实际上正在制作一个 SingleItem 控制器，其中 SingleArtist 和 SingleAlbum 将是子类。我认为这可能是一个问题，所以我撕掉了代码来自己测试它。

编辑：具体来说，我的路线如下所示：

```
'/album/:id': function(params) {
    console.log('navigated to /album/', params.id);
    singleAlbum.getData(params.id);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:15:09.320

啊哈！我传入`id`了我的事件处理程序，它覆盖了另一个 id 变量。它应该是这样的：

```
render: function(id) {
        var template = this.tmpl.html(),
            data = this.model.find(id),
            html = Mustache.to_html(template, data);
        this.panel.html(html);
},
getData: function(id) {
        var me = this;
        this.apiObj.data.id = id;
        this.apiObj.url = this.model.url;

        this.model.bind('refresh change', function() {  //  <--  don't need to pass anything
            me.render(id);
        });

        this.model.fetch(this.apiObj);
} 
```

# c++ - SDL with classes

> ID：14656452
> 
> 赞同：2
> 
> 时间：2013-02-01T22:53:25.767
> 
> 标签：c++, visual-studio, sdl

Hello am having a problem with my IDE Visual Studio 2012\. I have started to learn SDL so am quite new to it and I am trying apply good structure when using SDL. The problems lays when I start using SDL with classes. It works fine if I type everything in main. I don't know what am doing wrong can you help here are the errors

```
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: _exit already defined in LIBCMT.lib (crt0dat.obj)
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: ___iob_func already defined in LIBCMT.lib(_file.obj)
1>MSVCRT.lib(MSVCR110.dll) : error LNK2005: _fclose already defined in LIBCMT.lib(fclose.obj)
1>LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>C:\Users\User\documents\visual studio 2012\Projects\Nebula\Debug\Nebula.exe : fatal error LNK1169: one or more multiply defined symbols found
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

Here is my code if there is something wrong

Main

```
#include <SDL.h>
#include "System.h"

int main(int argc, char* argv[])
{
    System RedObject;
    RedObject.SetUp();

    SDL_Quit();
    return 0;
} 
```

Second file.

```
#include "System.h"

System::System()
{
}

System::~System()
{
}

void System::SetUp()
{
    SDL_Init(SDL_INIT_EVERYTHING); // The SDL Set up bit.
    SDL_Surface * screen;
    SDL_WM_SetCaption("Window Name", NULL);

    fullscreen = false;

    if(fullscreen == true)
    {
        screen = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE | SDL_FULLSCREEN);
    }
    else
    {
        screen = SDL_SetVideoMode(640, 480, 32, SDL_SWSURFACE);
    }

    bool running = true;

    while(running)
    {
        SDL_Event Event;

        while(SDL_PollEvent(&Event))
        {
            switch(Event.type)

                case SDL_QUIT:
                    running = false;
                break;
        }

        SDL_Flip(screen);
    }
} 
```

Second Files Header:

```
#ifndef SYSTEM_H
#define SYSTEM_H

#include <SDL.h>

class System
{
    private:
        int SHeight, SLenght;
        bool fullscreen;

    public:
        System();
        ~System();
        void SetUp();
};

#endif 
```

Also I have set up the IDE code generator to run on Multi-threaded DLL (/MD) I don't know if that is the problem. Sorry if this question has been already answered I could find an answer. Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:38:11.110

我认为问题在于 Visual Studio 的 .NET Framework`System`用作根级命名空间，因此您可能会遇到名称冲突。尝试将您的班级命名为 System.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T11:02:07.697

我想到了！当您使用 SDL 构建对象时会出现此问题，并且存在两个库的冲突，您需要忽略其中一个。您需要忽略 LIBCMT.lib。如果您不知道如何操作，请按以下步骤操作：

1.  打开项目的属性页。

2.  单击链接器文件夹。

3.  单击输入页面。

4.  选择忽略特定默认库并进入编辑并放入 LIBCMT.lib 按确定然后应用设置，你应该很高兴。

我希望这可以为您节省几天的痛苦:)

# asp.net - Stylesheet issues within ASPX page that has Jquery

> ID：14656456
> 
> 赞同：0
> 
> 时间：2013-02-01T22:53:43.470
> 
> 标签：asp.net, css, formatting, stylesheet, jquery-slider

There is an ASPX page with code-behind and it has stylesheet/Jquery used in it.

I do not know much about stylesheet or Jquery but I need to debug this page as the border is not shown fully when page is rendered.

Within stylesheet there is this code and it says 'left bottom no repeat'.

```
#variantslider .slides_container
{
    width: 350px;
    display: none;

    vertical-align: middle;
    background: url('bg_slider_box.png') left bottom no-repeat;

    padding-left: 15px;
    height: 55px;

     } 
```

I donot know what do I need to do to get full border. I do not how to debug this page to check if there is anything that is stopping in getting full border.

Currently the output is something below which has left bottom border. Please suggest.

![enter image description here](../Images/ccc1b0dc02b310daed059eca5b4425c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:00:40.530

`bg_slider_box.png`显然在这一行中找不到

```
background: url('bg_slider_box.png') left bottom no-repeat; 
```

查看磁盘上的位置，并提供正确的 url，例如

```
background: url('/images/bg_slider_box.png') left bottom no-repeat; 
```

# jquery - Jquery listener event for innerhtml

> ID：14656458
> 
> 赞同：0
> 
> 时间：2013-02-01T22:53:48.557
> 
> 标签：jquery, events, layout, listener, parent-child

I'm pretty new to jquery so am not too knowledgeable on it, I asked a question on using jquery to change the class of certain elements to specific classes if another certain element is present - [JQuery - Change certain element classes to specific classes if certain other element is present](https://stackoverflow.com/questions/14654387/jquery-change-certain-element-classes-to-specific-classes-if-certain-other-ele)

It seems that an event listener is needed for this, I have a basic understanding of event handlers but this is generally to do with actions such as click etc what I need however is one to Id if certain elements innerhtml has a text value (e.g. 'go') to run a function on near by elements (example below).

This is for a blog, which will use certain tags to change layout of posts, below there is some repeated html to illustrate how the targetting needs to work

classes are spans (using bootstrap)

html

```
<div class="container">

<div  class="span6">
</div>

<div class="span6">
<a class="taglink">text</a>
</div>

</div>

<div class="container">

<div class="span6">
</div>

<div class="span6">
<a class="taglink">text</a>
</div>

</div> 
```

What I'd like is for a & b's and *only* a & b's classes to change from span 6 to 12 when the text inside one of the a classes 'taglink' that is *within* the same container div is equal to 'go'.

This is so that only 'go' tag will affect only 'a' and 'b' divs classes and only that of a and b within its own 'container' div.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:00:24.690

现在的第一件事是：

ID 必须是唯一的，这是不可协商的。

因此，我将做出以下假设：

1.  `id=a`or `id=b`or `id=container`（倍数）的每个实例实际上分别读取`class=a`, `class=b`, 和`class=container`
2.  链接文本不会动态更改

```
 $(document).ready(function()
      $('div.container').each(function(){
          if ($(this).find('a.taglink').eq(0).text()=="go"){
              $(this).find('div.a').removeClass('span6').addClass('span12');
              $(this).find('div.b').removeClass('span6').addClass('span12');    
          }
      }
  }); 
```

# ruby-on-rails - Pass variable via link_to action

> ID：14656460
> 
> 赞同：1
> 
> 时间：2013-02-01T22:54:02.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

My view:

```
<div class = "btn btn-link">
  <%= link_to 'Generate Rating Set', {
    :controller => "co_view_rating", 
    :action => "generate_rating_set_co_view" } %>
</div> 
```

This links to a action in my controller which creates a new record. How can I pass a variable via this method in my view to the action in my controller. The variable would be user input via a text field.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:02:13.610

您应该使用该`POST`方法通过表单发送变量。

```
<%= form_tag('/co_view_rating/generate_rating_set_co_view') do %>
    <%= text_field_tag 'my_variable' %>
    <div class="btn btn-link">
        <%= submit_tag "Generate Rating Set" %>
    </div>
<% end %> 
```

在您的控制器操作中：

```
def generate_rating_set_co_view
    my_variable = params[:my_variable]
end 
```

您可以在此处找到有关 form_tags 和输入类型的更多文档：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T01:34:49.517

适应@Sparda 所说的内容，使用带有帖子的字段，并传递一个 hidden_​​field （如果你希望它被隐藏）或一个 input_tag 或 text_field

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:01:16.047

如果用户输入来自文本字段，您可能需要一个表单。

```
<%= form_tag {:controller => "co_view_rating", :action => "generate_rating_set_co_view"}, :method => :get do |f| %>
  <%= text_field_tag :awesome_text_field, "default value" %>
  <div class="btn btn-link">
    <%= submit_tag "Generate Rating Set" %>
  </div>
<% end %> 
```

然后，文本输入将在 params 哈希中作为`params[:awesome_text_field]`.

# .net - 路线中是否可以有多部分动作？

> ID：14656463
> 
> 赞同：0
> 
> 时间：2013-02-01T22:54:29.890
> 
> 标签：.net, asp.net-mvc-4, asp.net-web-api, asp.net-web-api-routing

好的，典型的路线可能如下所示：

```
{controller}/{action}/{id} 
```

问题是我们现有的端点看起来像这样

```
{controller}/Somesortofgrouping/{action} 
```

我们的支付控制器就是一个例子。我们可能有以下端点：

```
payment/credit/sale
payment/credit/refund
payment/cash/sale 
```

方法名称分别为：

```
CreditSale();
CreditRefund();
CashSale(); 
```

因此，不必将每个端点添加到 WebApiConfig 以保持我们的约定，有没有办法使用模板来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:06:48.850

**[您可以考虑使用出色的AttributeRouting](http://attributerouting.net/)**包并**使用属性在控制器/操作本身上配置路由，**而不是将每个端点添加到配置中。

与 MVC 相比，一些限制适用于 Web API（如文档中所列）。

在使用了这个库之后，很难想象回去维护一个单独的路由配置。

# jquery - Delay occurring during horizontal slide in Chrome only

> ID：14656464
> 
> 赞同：0
> 
> 时间：2013-02-01T22:54:31.840
> 
> 标签：jquery, html, css, image, google-chrome

I'm creating this website where the pages slide horizontally. One of the pages (media) contains 10-15 pictures that are 60px in height and 80 px in width. The problem is when I make the pages "travel" from home to contact us, there's a slight delay in sliding caused by Media page in Chrome. However I noticed this slight delay isn't in Firefox or IE, in fact it goes smoothly. So I'm wondering if there's a fix other than re-sizing since I already made all of the pictures in smaller sizes (60kb or so).

Thank you for any suggestions in advance

The format is basically like this:

```
<div class="pannel"><br/> <br/>
    <a href="images/a (74).jpg" class="mediaPhotos"><img src="images/a (74).jpg"/></a>
    <a href="images/a (75).jpg" class="mediaPhotos"><img src="images/a (75).jpg"/></a>
    <a href="images/a (76).jpg" class="mediaPhotos"><img src="images/a (76).jpg"/></a>
    <a href="images/a (77).jpg" class="mediaPhotos"><img src="images/a (77).jpg"/></a>
    <a href="images/a (78).jpg" class="mediaPhotos"><img src="images/a (78).jpg"/></a>
    <a href="images/a (79).jpg" class="mediaPhotos"><img src="images/a (79).jpg"/></a>
    <a href="images/a (80).jpg" class="mediaPhotos"><img src="images/a (80).jpg"/></a>
    <a href="images/a (81).jpg" class="mediaPhotos"><img src="images/a (81).jpg"/></a>
    <a href="images/a (82).jpg" class="mediaPhotos"><img src="images/a (82).jpg"/></a>
    <a href="images/a (83).jpg" class="mediaPhotos"><img src="images/a (83).jpg"/></a>
    <a href="images/a (84).jpg" class="mediaPhotos"><img src="images/a (84).jpg"/></a>
</div> 
```

* * *

```
.panel {    
    float               : left;
    height              : 800px;
    padding-right       : 1000px;
    width               : 850px;
}

.mediaPhotos img {
    border              : 3px solid #bfb886;
    border-radius       : 5px;
    height              : 60px;
    width               : 80px;
} 
```

* * *

```
$(document).ready(function() {
 $("#menuFloat a").bind("click",function(event){ event.preventDefault();
  var target = $(this).attr("href");
   $("html, body").stop().animate({ scrollLeft: $(target).offset().left, scrollTop: $(target).offset().top }, 1200);
 }); }); 
```

* * *

Basically `panel` is how big each page will be and float to the left of each page.

Link: [http://permika-montreal.tk/new.php](http://permika-montreal.tk/new.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:36:13.230

通过`chromes web-inspector`我删除了图像`links`，它滚动得很好。注意到您将`link`图像按比例缩小了`css`。我认为如此大量的数据导致您的延误。尝试仅为链接重新调整图像大小以限制面板的大小。这应该可以消除使用 chrome 滚动的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T21:10:07.723

只需输入图像的宽度和高度！

# visual-studio - Maintaining multiple branches of the same base project in VS

> ID：14656467
> 
> 赞同：3
> 
> 时间：2013-02-01T22:54:43.907
> 
> 标签：visual-studio, git, branch

I've looked around the site but I couldn't find an answer that covers mine entirely, so please excuse me in advance if I missed it.

I inherited a VB.NET project that didn't have source control (it started as a pet project of a long-gone dev and nobody ever bothered after that to put it in), and by a friend's suggestion I thought about using Git for source control.

The project is a niche product that is customized and sold according to the customer's specs, so that brings the problem that even if 95% of the code is the same for all the customers, sometimes up to 10% of the code is changed and tailored for each customer, by changing or adding lines to existing functions, sometimes adding whole blocks of code, but there's no commonality in the changes between different customers (a function changed in one might not be changed in another).

To complicate things further, due to maintenance contracts, updates made to the baseline app have to be replicated in the customer's branches should they want them, and sometimes changes we make for a specific customer are good enough that we want to put them in the baseline app and replicate them to the other customers, BUT keeping the customizations for each customer!

So with my little knowledge of Git, I thought it would be like:

```
 (customer 1)
         C1-----
(main)  /
A------B------D
        \
         \ (customer 2)
         C2-----
        \
         \ (customer 3)      
         C3----- 
```

...but I can't see how it's going to work after that:

*   Can I merge SOME changes from the customer's branches into the main trunk WITHOUT merging others that are only useful for that customer?
*   Can I merge SOME changes from the main trunk into each customer's branches WITHOUT losing the customizations in those branches?
*   Can I "mark" specific lines of code so they are not merged/committed?
*   Three or more devs will be working in this, each in his own machine but pushing changes to the company's repository for synchronization. What are the implications for this process?
*   Right now, ***every customer has a separate folder and separate project files with all their source code.*** How would be the import process to put those folders them into Git?
*   All of this must be done with Visual Studio, with Gitextensions and the Git Source provider for VS. Is it supported, or it has to be done with the console?

Thanks and sorry again if it overlaps with another answer.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:28:15.487

我对 git 比较陌生，通常在我的所有操作中使用 PoshGit，所以虽然我可能无法在所有事情上为您提供帮助，但我希望我能在一些事情上提供帮助：

> *   我可以将客户分支中的一些更改合并到主干中而不合并仅对该客户有用的其他更改吗？
> *   我可以将主干中的一些更改合并到每个客户的分支中，而不会丢失这些分支中的自定义项吗？

据我了解，这两个操作都可以通过使用**git cherry pick**来实现，它允许您从一个分支中选择一个特定的提交，并将其添加到另一个分支，而无需将分支合并在一起。

例如，假设您要将对 customer1 的存储库所做的更改添加到 customer2：

首先，您从客户 1 获取要插入到客户 2 的提交的哈希 ID

```
git checkout customer1Branch
git log 

commit 2e8c40025939e8cf41dec70f213da75aa462184b
Author: xxxxxxx
Date: xxxxxx

This made a change that you want... 
```

然后，您复制要**樱桃挑选**的哈希的前几个字符，更改为客户 2 的分支并将其**樱桃挑选**到分支中。

```
git checkout customer2Branch
git cherry-pick 2e8c40025939e8c 
```

现在，如果您执行 a `git log`，您将在顶部看到您的樱桃采摘。可以在此处找到类似的教程（[http://nathanhoad.net/how-to-cherry-pick-changes-with-git](http://nathanhoad.net/how-to-cherry-pick-changes-with-git)）

> *   我可以“标记”特定的代码行以便它们不被合并/提交吗？

您可能会从此处询问和回答的类似问题中找到帮助：

[在 Git 中只提交文件的一部分](https://stackoverflow.com/questions/1085162/how-can-i-commit-only-part-of-a-file-in-git)

> *   三个或更多开发人员将在此工作，每个人都在自己的机器上，但会将更改推送到公司的存储库以进行同步。对这个过程有什么影响？

由于 GIT 是一个完全分布式的 VCS，因此您团队中的每个开发人员都将有效地在他自己的机器上拥有中央存储库的完整克隆（包含该存储库的完整历史记录。）这意味着记录历史查询和其他请求（例如查找谁做了什么）不需要通过您的中央服务器，但可以由每个开发人员私下和离线完成。

同样，每个开发人员所做的更改都将可供所有人使用（例如，所有新分支都将可用），但如果您不太习惯 git，有时可能会感到沮丧。

与往常一样，尽早并经常提交是一个好主意，这将减少您在更改发生冲突时可能面临的紧张局势。您还应该在推送完成时设置一些结构，特别是如果您依赖彼此的工作来继续。

您可能想尝试的另一个想法是让一个人负责回购并让他合并更改和补丁以帮助协调您的工作。

> *   现在，每个客户都有一个单独的文件夹和带有所有源代码的单独项目文件。将这些文件夹放入 Git 的导入过程将如何？

**编辑**

感谢您澄清这个问题的意思。您可以扩展根据此处给出的答案改编的类似方法：[您如何创建远程 Git 分支？](https://stackoverflow.com/questions/1519006/git-how-to-create-remote-branch)

为您的 BASE 项目创建一个新的主线分支并将其推送到您的远程存储库。

```
cd baseProjectDirectory # navigate to your main project directory
git init # git initialize the dir
git add . # recursively add all files in directory to git repo
git remote add <remote-branch-name> <remote-url> # Add the url to your remote directory to your git repo
git commit -m "Initial commit of base project"
git push <remote-branch-name> <local-branch-name> 
```

这将在`remote-branch-name`名为`local-branch-name`.

然后，您可以导航到您的其他项目并重复这些步骤，通过使用新的本地分支名称，将您的存储库放在同一个远程的不同分支下，即`local-branch-name`在创建分支时不要使用，只需使用新的分支名称，例如`git checkout -b new-local-branch-name`

因此，例如，如果您的基础项目推送（最后一行代码）是：

```
git push clientproject base 
```

其中“clientproject”是您的远程名称，“base”是您本地分支的名称，您只需将行更改为：

```
git checkout -b client1 # Creates new branch named client1
git branch -d base # Deletes base branch
git push clientproject client1 
```

请注意，虽然在继续之前删除“base”分支并不是绝对必要的，但它确实使您的存储库更清洁，因此被认为是一种好的做法。不过不要担心丢失任何东西，您从 base 的整个 git 历史记录将在结帐时复制到 client1。

另请注意：由于您的情况需要您从不同的目录执行此操作，因此您可能会删除一个名为“master”而不是“base”的分支。

像这样推送将使 client1 保持在“clientproject”远程，但会将项目放在一个名为 client1 的新分支上，并带有自己的历史记录。

相同的步骤可用于其余项目。如果我一路走失了你，我建议阅读上面的链接（它比我简洁得多）。

> *   所有这些都必须使用 Visual Studio、Gitextensions 和 VS 的 Git 源提供程序来完成。是否支持，还是必须通过控制台完成？

我还没有将 VS 与 Git 一起使用，但我认为大多数（如果不是全部）这些操作都会受到支持，因为它们是本机 git 命令。

希望这可以帮助。

# python - Python初学者的循环（寻找素数）

> ID：14656473
> 
> 赞同：4
> 
> 时间：2013-02-01T22:55:23.440
> 
> 标签：python, primes

我真的是python的初学者，所以我为缺乏知识而道歉，但我问的原因是阅读Python手册和教程（[http://docs.python.org/2.7/tutorial](http://docs.python.org/2.7/tutorial)）我是不能完全掌握循环是如何工作的。我写了一些简单的程序，所以我想我已经掌握了基础知识，但是无论出于何种原因，这个旨在列出所有小于或等于 n 的素数的程序都不起作用：

```
n = int(raw_input("What number should I go up to? "))
p = 2
while p <= n:
        for i in range(2, p):
                if p%i == 0:
                        p=p+1 
        print "%s" % p,
        p=p+1
print "Done" 
```

例如，当我输入 100 时的输出是：

```
2 3 5 7 11 13 17 19 23 27 29 31 35 37 41 43 47 53 59 61 67 71 73 79 83 87 89 95 97 101 Done 
```

这看起来几乎是正确的，但由于某种原因包含 27、35、95，它们当然是复合的。我一直在尝试区分我的循环的工作方式，但我只是看不到它突然跳过检查可分性的地方。我想如果有人看过，他们可以向我解释导致这种情况的语法是什么。非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T23:23:12.107

我实际上会将程序重组为如下所示：

```
for p in range(2, n+1):
    for i in range(2, p):
        if p % i == 0:
            break
    else:
        print p,
print 'Done' 
```

This is perhaps a more idiomatic solution (using a `for` loop instead of a `while` loop), and works perfectly.

The outer `for` loop iterates through all the numbers from 2 to `n`.

The inner one iterates to all numbers from 2 to `p`. If it reaches a number that divides evenly into `p`, then it breaks out of the inner loop.

The `else` block executes every time the for loop isn't broken out of (printing the prime numbers).

Then the program prints `'Done'` after it finishes.

As a side note, you only need to iterate through 2 to the square root of `p`, since each factor has a pair. If you don't get a match there won't be any other factors after the square root, and the number will be prime.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T23:45:42.150

Your code has two loops, one inside another. It should help you figure out the code if you replace the inner loop with a function. Then make sure the function is correct and can stand on its own (separate from the outer loop).

Here is my rewrite of your original code. This rewrite works perfectly.

```
def is_prime(n):
    i = 2
    while i < n:
        if n%i == 0:
            return False
        i += 1
    return True

n = int(raw_input("What number should I go up to? "))

p = 2
while p <= n:
    if is_prime(p):
        print p,
    p=p+1

print "Done" 
```

Note that `is_prime()` doesn't touch the loop index of the outer loop. It is a stand-alone pure function. Incrementing `p` inside the inner loop was the problem, and this decomposed version doesn't have the problem.

Now we can easily rewrite using `for` loops and I think the code gets improved:

```
def is_prime(n):
    for i in range(2, n):
        if n%i == 0:
            return False
    return True

n = int(raw_input("What number should I go up to? "))

for p in range(2, n+1):
    if is_prime(p):
        print p,

print "Done" 
```

Note that in Python, `range()` never includes the upper bound that you pass in. So the inner loop, which checks for `< n`, we can simply call `range(2, n)` but for the outer loop, where we want `<= n`, we need to add one to `n` so that `n` will be included: `range(2, n+1)`

Python has some built-in stuff that is fun. You don't need to learn all these tricks right away, but here is another way you can write `is_prime()`:

```
def is_prime(n):
    return not any(n%i == 0 for i in range(2, n)) 
```

This works just like the `for` loop version of `is_prime()`. It sets `i` to values from `range(2, n)` and checks each one, and if a test ever fails it stops checking and returns. If it checks `n` against every number in the range and *not any* of them divide `n` evenly, then the number is prime.

Again, you don't need to learn all these tricks right away, but I think they are kind of fun when you do learn them.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-18T20:33:54.680

This should work and is bit more optimized

```
import math
for i in range(2, 99):
  is_prime = True
  for j in range(2, int(math.sqrt(i)+1)):
    if i % j == 0:
      is_prime = False
  if is_prime:
    print(i) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T23:00:52.377

`i`找到非素数后不要重新启动循环

```
p = i = 2
while p <= n:
    i = 2
    while i < p:
        if p%i == 0:
            p += 1 
            i = 1
        i += 1

    print p,
    p += 1

print "Done" 
```

循环执行`while`主体，然后检查顶部的条件是否为`True`，如果为真，则再次执行主体。`for`循环为迭代器中的每个项目执行一次主体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T23:17:19.920

请将您的代码段与下面粘贴的代码段进行比较，您会发现哪里错了。

```
n = int(raw_input("What number should I go up to? "))
p = 2
while p <= n:
    is_prime=True
    for i in range(2, p):
        if p%i == 0:
            is_prime=False
            break;
    if is_prime==True:
        print "%d is a Prime Number\n" % p
    p=p+1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-05T08:27:27.513

```
for i in range(2, p):
    if p%i == 0:
        p=p+1 
     print "%s" % p,
     p=p+1 
```

I am going to tell your error only,in line 3 you are incrimenting p but actually what you are missing is your i if your i in previous case is let say 13 then it will check your loop after 13 but it is leaving 2,3,5,7,11 so its an error .that is what happening in case of 27 your i before 27 is 13 and now it will check from 14.and I don't think u need an solution.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-18T07:29:02.890

```
def is_prime(n):
    if n>=2:
        for i in range(2, n):
            if n%i == 0:
                return False
        return True
    else:
        return False 
```

To find PRIME NUMBER

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-19T23:27:01.787

Let's do a couple more improvements.

1.  You know 2 is the only even prime number, so you add 2 in your list and start from 3 incrementing your number to be checked by 2.
2.  Once you are past the half-way point (see above `sqrt` and `*` examples), you don't need to test for a prime number.
3.  If you use a list to keep track of the prime numbers, all you need to do is to divide by those prime numbers.

I wrote my code and each of the above items would improve my code execution time by about 500%.

```
prime_list=[2]
def is_prime(a_num):
    for i in prime_list:
        div, rem = divmod(a_num, i)
        if rem == 0:
            return False    
        elif div < i:
            break;

    prime_list.append(a_num)        
    return True 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-24T12:18:11.577

This in my opinion is a more optimised way. This finds all the prime numbers up to 1,000,000 in less than 8 seconds on my setup.

It is also one of my very first attempts at python, so I stand to be corrected

```
class prime:
    def finder (self):
        import math
        n = long(raw_input("What number should I go up to? "))
        for i in range(2, n):
            is_prime = True
            if i % 2 == 0:
                is_prime = False
            for j in range(3, long(math.sqrt(i) + 1), 2):
                if i % j == 0:
                    is_prime = False
                    break
            if is_prime:
                print(i)

prime().finder() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-09T20:06:50.757

```
print('Enter a Number: ')
number=abs(int(input()))
my_List=[0,1]
def is_prime(n):
    if n in my_List:
        return True
    elif n>=2:
        for i in range(2, n):
            if n%i == 0:
                return False
        return True
    else:
        return False

if is_prime(number):
    print("%d is Prime!"%number)
else:
    print(number,'is not prime') 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-25T17:21:22.297

```
def findprime(num):
  count = 0
  for i in range(1,num+1):
    list1 = []
    for ch in range(1,i+1):
      if i%1==0 and i%ch==0:
        list1.append(ch)
    if len(list1)==2:
      count += 1
      print(i,end=", ")
  print()
  return count  
num2 = int(input("enter a number: "))
result=findprime(num2)
print("prime numbers between 1 and",num2,"are",result) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-27T22:54:30.440

Here's a more extensive example with optimization in mind for Python 3.

```
import sys

inner_loop_iterations: int = 0

def is_prime(n):
    a: int = 2
    global inner_loop_iterations

    if n == 1:
        return("Not prime")
    elif n == 2:
        return("Prime")

    while a * a <= n + 1:
        inner_loop_iterations += 1
        # This if statement reduces the number of inner loop iterations by roughy 50%
        # just weeding out the even numbers.
        if a % 2 == 0:
            a += 1
        else:
            a += 2

        if n % 2 == 0 or n % a == 0:
            return ("Not prime")
    else:
        return ("Prime")

while True:
    sys.stdout.write("Enter number to see if it's prime ('q' to quit): ")
    n = input()
    if not n:
        continue
    if n == 'q':
        break

    try:
        n = int(n)
    except ValueError:
        print("Please enter a valid number")

    if n < 1:
        print("Please enter a valid number")
        continue

    sys.stdout.write("{}\n".format(is_prime(n)))
    sys.stderr.write("Inner loops: {}\n\n".format(inner_loop_iterations))
    inner_loop_iterations=0 
```

This program has two main optimizations, first it only iterates from 2 to the square root of n and it only iterates through odd numbers. Using these optimizations I was able to find out that the number 1000000007 is prime in only 15811 loop iterations.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-21T06:19:24.980

**My fast implementation returning the first 25 primes:**

```
#!/usr/bin/env python3

from math import sqrt

def _is_prime(_num: int = None):
    if _num < 2:
        return False
    if _num > 3 and not (_num % 2 and _num % 3):
        return False
    return not any(_num % _ == 0 for _ in range(3, int(sqrt(_num) + 1), 2))

_cnt = 0
for _ in range(1, 1000):
        if _is_prime(_):
        _cnt += 1
        print(f"Prime N°: {_:,} | Count: {_cnt:,}") 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-02-01T23:35:58.433

Better use

```
for i in range(2, p//2 + 1): 
```

# javascript - Bootstrap accordion run function before opening

> ID：14656477
> 
> 赞同：0
> 
> 时间：2013-02-01T22:55:45.043
> 
> 标签：javascript, jquery, twitter-bootstrap, accordion

Is there any way to run some function before and accordion it's fully opened?

Here's the code:

```
 $.each($('.accordion-toggle'),function(){
                $(this).click(function() {
                    if($(this).hasClass("collapsed")){
                         //loading content via ajax
                    };
                }); 
```

I tried to use `.on('show')` functions and changing `data-toggle` with javascript opening and closing content, but it seems to be very complicated due to existing code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:00:05.070

尝试这个...

```
$.each($('.accordion-toggle'),function(){
      $(this).click(function() {
            if($(this).hasClass("collapsed")){
                \\loading content via ajax
            }
      });
}); 
```

你忘记了“;”......

# javascript - Javascript：如何防止用于解除警报的按键触发按键事件处理程序

> ID：14656478
> 
> 赞同：4
> 
> 时间：2013-02-01T22:55:47.930
> 
> 标签：javascript, jquery, event-handling, alert, keyevent

我正在使用 Javascript / JQuery 创建一个基于 Web 的实验，它要求用户通过按下某些键而不是其他键来给出响应。如果他们按错了键，他们应该会收到一个警报弹出窗口，告诉他们他们按错了键。在显示警报时，实验应该停止等待下一次按键，但一旦警报解除，就会返回等待。

我遇到的问题是，如果通过按 ENTER 键解除警报，它似乎是由键事件处理程序注册的，从而触发另一个警报（因为 ENTER 不是允许的键之一），即使我以为我的编写方式是在解除警报之前不应调用键事件处理程序。我的问题是，如何确保随后调用的事件处理程序不会收到用于解除警报的 ENTER 按键？

这是一些代码：

```
function waitForKeypress( permittedKeys, callbackFn ) {
    returnFn = function(e) {
        $(document).unbind('keyup',returnFn);
        if ( permittedKeys.indexOf( e.which )!=-1 ) {
            callbackFn( { "success": true, "value": e.which } );
        } else {
            callbackFn( { "success": false } );
        }
    }
    $(document).keyup( returnFn );
}

var callback = function(data) {
    if ( data.success ) {
        goDoOtherStuff();
    } else {
        alert( "error message" );
        waitForKeyPress( permittedKeys, callback );
    }
}

waitForKeyPress( permittedKeys, callback ); 
```

我应该解释一下，我认为用于解除警报的 ENTER 按键不会被 waitForKeyPress 中的事件处理程序接收的原因是因为（我认为）只要显示警报，Javascript 就应该停止执行，以便 waitForKeyPress 调用回调函数内部不应该关闭，直到警报被解除，也就是说，在 ENTER 键被释放之后。

（我的实际 waitForKeyPress 比上面更复杂 - 它等待按键对，只允许某些对，这就是为什么我首先需要将它作为一个单独的函数的原因。我不认为这些东西不过，我删除的内容与我的问题有关。）

编辑：有些人认为这可能与事件处理程序没有正确解除绑定有关。我确定这不是问题。这是一个更简洁的示例，其中事件处理程序甚至在警报之后才被绑定，但出现了同样的问题：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
alert( "Hello world" );
$(document).keyup( function() { alert( "Goodbye cruel world." ) } );
</script>
</html> 
```

按下 ENTER 键关闭 Hello World 将立即调用 Goodbye 残酷世界。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:39:20.047

在显示警报之前取消绑定 keyUp

**编辑#1**

我在 Safari 6 OS X 10.7 上尝试了您在编辑中的示例代码。

你是对的。

**发生这种情况是因为当发生 Return keydown**时，按下了具有等效键“Return”的标准按钮，例如警报对话框的 tke“Ok”（我的意思是按钮）。换句话说，当用户**按下**回车键并且不等待回车键被释放时，对话框将被关闭。

所以用户按下“Return”，对话框被关闭，keyup 被绑定，用户释放“Return”，事件被触发。

您可以通过不同的方式解决此问题。

更简单的（如果它符合您的需要）是绑定 keydown 而不是 keyup

```
alert( "Hello world" );
$(document).keydown( function() { alert( "Goodbye cruel world." ) } ); 
```

否则，您可以检查按下了什么键并忽略“返回”。

请记住，keydown 也可以通过按 CMD（例如，如果用户想使用 CMD-W 关闭窗口）、箭头键（如果内容大于视口，通常允许用户滚动窗口）等来触发。

因此，如果您使用 keyup 或切换到 keydown，则某种过滤将是合适的。

希望这可以帮助

# apache - mod_rewrite makes error logs fill up

> ID：14656479
> 
> 赞同：0
> 
> 时间：2013-02-01T22:55:48.560
> 
> 标签：apache, mod-rewrite

I am using apache's mod rewrite to make "pretty urls", here is an example of a rule:

```
RewriteRule ^articles/(.+?)\.([0-9]+)/page\=([0-9]+)?$ /index.php?module=articles_full&aid=$2&title=$1&page=$3 [N,NC,QSA] 
```

Problem is my error log fills up with stuff like this:

```
[Fri Feb 01 20:36:11 2013] [error] [client 94.246.88.189] File does not exist: /home/gamingon/public_html/articles
[Fri Feb 01 20:35:55 2013] [error] [client 66.249.73.195] File does not exist: /home/gamingon/public_html/articles
[Fri Feb 01 20:34:39 2013] [error] [client 66.249.73.195] File does not exist: /home/gamingon/public_html/articles 
```

What would be the best way to stop the errors? It seems to work okay though but still i don't think the error logs are supposed to fill with that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:17:22.930

添加一个 RewriteCond ，仅当文件不存在时才会启动 RewriteRule：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^articles/(.+?)\.([0-9]+)/page\=([0-9]+)?$ /index.php?module=articles_full&aid=$2&title=$1&page=$3 [N,NC,QSA] 
```

编辑：

再次查看您的重写规则，这是一个非常具体的正则表达式，仅当 uri 采用格式时才会匹配

*   文本“文章”
*   一个或多个任意字符
*   一个点
*   一位或多位数字
*   文本“/pages=”
*   一位或多位数字

因此，它将匹配如下 URL：

*   [http://example.com/articles/awesome-article.3/page=2](http://example.com/articles/awesome-article.3/page=2)

但不在 URL 上，例如：

*   [http://example.com/articles/awesome-article/page=2](http://example.com/articles/awesome-article/page=2)。

如果您看到 404，很可能人们正在尝试访问第二种形式的 URL。可能是您的网站有一些未正确创建的链接，请检查日志以查看是否可以找到任何引用者来帮助追踪问题。

我测试了你的规则，当我给它一个格式正确的 URL 时，它对我来说很好。

# php - PHP SOAP XML DOM

> ID：14656483
> 
> 赞同：0
> 
> 时间：2013-02-01T22:56:08.730
> 
> 标签：php, xml, dom, soap, xpath

I have a soap xml that contains a bunch of variables that I need to access. Here is the XML.

```
`<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <searchPersonsResponse xmlns="">
         <searchPersonsReturn>
            <attributes>
               <attributes>
                  <name>ercreatedate</name>
                  <values>
                     <values>201104070130Z</values>
                  </values>
               </attributes>
               <attributes>
                  <name>status</name>
                  <values>
                     <values>Stuff1</values>
                     <values>Stuff2</values>
                     <values>Stuff3</values>
                     <values>Stuff4</values>
                     <values>Stuff5</values>
                     <values>Stuff6</values>
                     <values>Stuff7</values>
                  </values>
               </attributes>
           </attributes>

            <itimDN>blah</itimDN>
            <name>Smith, Bob</name>
            <profileName>PER</profileName>
            <select>false</select>
         </searchPersonsReturn>
      </searchPersonsResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

I'm trying to access the inner attribute node and pull out the Name and values into a multidimentional array like this ....

```
$array["status"][0]="stuff1";
$array["status"][1]="stuff2";
$array["status"][2]="stuff3";
$array["status"][3]="stuff4"; 
```

so far I have been able to access the nodes but not really get them the way I want. here is the code I have been playing around with .....

```
$dom_document = new DOMDocument();

$dom_document->loadXML($thexml);

$tag_els_names = $dom_document->getElementsByTagname('name');
$tag_els_values = $dom_document->getElementsByTagname('values');

$data = array();
$data2 = array();
foreach($tag_els_names as $node){
    $data[] = array($node->nodeName => $node->nodeValue);
//grabs all the <name> node values
}
$i=0;$j=0;
foreach($tag_els_values as $node){
    $j=0;

    foreach($node->childNodes as $child) {

            $data2[$i][$j] = $child->nodeValue;
                     //grabs all the value node values    
        $j++;
    }
    $i++;

    $j=0;
} 
```

Does anyone know an easy way to do this? I think that I have been looking at this for way to long.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:41:18.770

怎么样：

```
$dom_document = new DOMDocument();

$dom_document->loadXML($thexml);

$xpath = new DOMXpath($dom_document);

$attr = $xpath->evaluate("//attribute/attributes");

$names = array();
$values = array();
$i = 0;
foreach($attr as $attr_node) {
    $values[i] = array();
    foreach($xpath->evaluate("name", $attr_node) as $name){
        $names[] = $name->nodeValue;
    }
    $foreach($xpath->evaluate("value", $attr_node) as $value){
        $values[i][] = $value->nodeValue;
    }
    i++;
} 
```

但是，这会错过组`<name>`外的元素`<attributes>`。你的意思是包括那个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:13:49.113

我想通了，并认为它可以帮助别人

```
 $doc = new DOMDocument();
    $values=array();

    if ($doc->loadXML($temp)) {
        $attributes = $doc->getElementsByTagName('attributes');

        foreach($attributes as $attribute) {
            if($attribute->childNodes->length) {
                $previous_nodeValue="";
                    foreach($attribute->childNodes as $i) {
                        if($i->nodeValue=="status"){
                            $previous_nodeValue=$i->nodeValue;
                        }
                        if($i->nodeName=="values" && $previous_nodeValue== "status"){

                            foreach($i->childNodes as $j){
                                $values[]=$j->nodeValue;

                            }
                        }
                    }
                $previous_nodeValue="";
            }
         }

     } 
```

# dynamics-crm-2011 - CRM 2011 中禁用用户的默认队列 - 是否可以放心删除？

> ID：14656484
> 
> 赞同：0
> 
> 时间：2013-02-01T22:56:09.750
> 
> 标签：dynamics-crm-2011, dynamics-crm

内部部署 CRM 2011 安装，有许多禁用用户。有没有人删除这些用户的默认队列？我可以预期哪些风险或不良行为？主要兴趣在于清理队列列表——停用队列并不能做到这一点。我自己的烟雾测试没有发现任何负面影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:42:18.923

我从未见过删除用户或团队的默认队列有任何不良或奇怪的副作用，但当然，如果您有一个实体勾选“重新分配记录时添加到默认队列”，那么这对于任何用户都将失败或没有一个的团队（我不确定这是否也意味着分配操作失败/回滚）。

为停用的用户删除它们当然不会有这个问题，因为他们不能有记录分配给他们。

您可能希望首先对队列项目进行高级查找，以检查非活动用户拥有的任何队列中仍然没有任何项目。

# .htaccess - 重定向到始终附加 WWW 的域会导致子域出错

> ID：14656485
> 
> 赞同：0
> 
> 时间：2013-02-01T22:56:11.617
> 
> 标签：.htaccess

我的网站`.htaccess`文件中有以下代码：

```
#redirect non www to http://wwww
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这很好用，但是当我决定将我网站上的论坛作为子域访问时，`.htaccess`一切都搞砸了。

所以通常论坛的网址是：

```
http://www.eetutorials.com/forum 
```

但由于我将该`forum`文件夹链接为子域，它不再起作用并重定向到：

```
http://www.forum.eetutorials.com/forum/ 
```

这显然是错误的！知道如何通过在`.htaccess`文件中添加一些条件来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:03:37.203

你可以改变一个条件：

`RewriteCond %{HTTP_HOST} !^www\.`

对此：

`RewriteCond %{HTTP_HOST} ^eetutorials.com$`

# visual-studio-2010 - Backtracking during debugging in Visual Studio

> ID：14656486
> 
> 赞同：-2
> 
> 时间：2013-02-01T22:56:20.787
> 
> 标签：visual-studio-2010, visual-studio, breakpoints

Let's say I have function A(//Code: To Catch Some Error) in a class and that function A() is being called in 100 different pages.

1.  I have put one breakpoint at that function A().
2.  When I run the solution in the visual studio, this breakpoint is being hit.

Q: Is there any way to find from which page did this function A() was called before hitting the breakpoint?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:03:50.723

您最好的选择是查看调用堆栈。默认情况下，当您遇到断点时，Visual Studio 将在主代码窗口下方显示的窗口中包含调用堆栈窗口。您将看到将您带到断点的嵌套函数调用列表。双击任何函数应该在调试器中打开它，假设你有它的源代码（其中一些将是系统函数）。

# mysql - Memcached with row data that change constantly

> ID：14656487
> 
> 赞同：1
> 
> 时间：2013-02-01T22:56:23.893
> 
> 标签：mysql, django, memcached, amazon-elasticache

I have a question that I didn't find an answer. Yet ;-)

I have a Django/MySQL application that runs memcached in the background. One of my tables change every access. I mean, when the user access the page I have a "*count*" field that is incremented, this same table contains all data that is going to be displayed.

Is recommended to use memcached in this scenario? Or should I create a new relation table that will contain only "*id*" and "*count*" field?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:59:18.013

当然，这是 memcached 的有效用途。基本规则是，无论何时`update`，或者`delete`在 mysql 的意义上，您都需要做一些事情来保持 memcache 记录的一致性。通常这是通过在此处调整值或删除它来完成的，以便下一次访问它来构建它并保存它。

在你的情况下，我只会`get`增加它的值，然后增加`set`它。根据准确性对您的重要性以及您获得的并发流量，您应该考虑本文中概述的事务的原子[性](https://stackoverflow.com/questions/10626904/php-atomic-memcache)。

# c# - Simulating hand position with Xtion pro live

> ID：14656488
> 
> 赞同：0
> 
> 时间：2013-02-01T22:56:33.777
> 
> 标签：c#

I am studying C# Programming and Kinect sensors programming (I am quite a newbie in both C# language and Kinect). I am trying to use Microsoft Visual C# 2010 Express to write applications using sensors of Xtion Pro Live to control robots. In my main form, there are 2 picturebox objects, 2 button object, 3 label and 3 textbox objects. One of the two picturebox objects (pictureBox1) is to display the RGB camera. The other one pictureBox2) is to simulate the hand positions in 2D (x and y coordinates) graphics. One of the two buttons (button1) is to initialize Xtion Pro Live and to show RGB camera on picturebox1, and to simulate hand positions on picturebox2\. The other one (button2) is to exit the program. The three labels, label1, label2, label3, and the three textboxes, textbox1, textbox2, textbox3 are used to show 3 coordinates of the hand.

This is my code in Form1.cs:

```
using OpenNI;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Drawing.Imaging;
using System.Linq;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace HandTracking
{
    public partial class Form1 : Form
    {
        public const string path = @"C:/Vu/Kinect/Data/SamplesConfig.xml";
        public bool run;
        public Thread thread;
        public Bitmap bitmap;
        public Context context;
        public ScriptNode node;
        public ImageGenerator image;
        public DepthGenerator depth;
        public GestureGenerator gesture;
        public HandsGenerator hand;
        public Queue<Point3D> handpoint = new Queue<Point3D>();
        public const int maxpoint = 30;
        enum GestureStatus
        {
            Unrecognized, Progress, Recognized
        }
        private GestureStatus gesstatus = GestureStatus.Unrecognized;
        enum HandsStatus
        {
            Untracked, Create, Update
        }
        private HandsStatus handstatus = HandsStatus.Untracked;
        public Pen pen = new Pen(Color.Red, 5);
        public Brush brush = new SolidBrush(Color.Magenta);
        public Font font = new Font("Times New Roman", 20);
        public PointF point = new PointF(0, 0);

        public Form1()
        {
            InitializeComponent();
            this.pictureBox1.BackColor = Color.Black;
            this.pictureBox2.BackColor = Color.White;
            this.button1.Enabled = true;
        }

        public void button1_Click(object sender, EventArgs e)
        {
            this.button1.Enabled = false;
            try
            {
                context = Context.CreateFromXmlFile(path, out node);
                image = context.FindExistingNode(NodeType.Image) as ImageGenerator;
                if (image == null)
                    throw new Exception(context.GlobalErrorState);
                depth = context.FindExistingNode(NodeType.Depth) as DepthGenerator;
                if (depth == null)
                    throw new Exception(context.GlobalErrorState);
                depth.AlternativeViewpointCapability.SetViewpoint(image);
                    gesture = context.FindExistingNode(NodeType.Gesture) as     GestureGenerator;
                if (gesture == null)
                   throw new Exception(context.GlobalErrorState);
                gesture.AddGesture("RaiseHand");
                gesture.GestureRecognized += new     EventHandler<GestureRecognizedEventArgs>(GestureRecognized);
                gesture.GestureProgress += new EventHandler<GestureProgressEventArgs>    (GestureProgress);
                hand = context.FindExistingNode(NodeType.Hands) as HandsGenerator;
                if (hand == null)
                    throw new Exception(context.GlobalErrorState);
                hand.HandCreate += new EventHandler<HandCreateEventArgs>(HandCreate);
                hand.HandUpdate += new EventHandler<HandUpdateEventArgs>(HandUpdate);
                context.StartGeneratingAll();
                MapOutputMode map = image.MapOutputMode;
                bitmap = new Bitmap((int)map.XRes, (int)map.YRes,     System.Drawing.Imaging.PixelFormat.Format24bppRgb);
                run = true;
                thread = new Thread(CallThread);
                thread.Start();
            }
            catch (Exception error)
            {
                MessageBox.Show(error.Message);
            }
        }

        public void GestureRecognized(object sender, GestureRecognizedEventArgs e)
        {
            gesstatus = GestureStatus.Recognized;
            hand.StartTracking(e.EndPosition);
        }

        public void GestureProgress(object sender, GestureProgressEventArgs e)
        {
            gesstatus = GestureStatus.Progress;
        }

        public void HandCreate(object sender, HandCreateEventArgs e)
        {
            handstatus = HandsStatus.Create;
        }

        public void HandUpdate(object sender, HandUpdateEventArgs e)
        {
            handstatus = HandsStatus.Update;
            handpoint.Enqueue(e.Position);
        }
        public void button2_Click(object sender, EventArgs e)
        {
            DialogResult result = MessageBox.Show("Do you want to quit?", "Confirm",     MessageBoxButtons.OKCancel, MessageBoxIcon.Question);
            if (result == DialogResult.OK)
            {
                try
                {
                    run = false;
                    if (thread != null)
                        thread.Join();
                    this.Close();
                }
                catch (Exception error)
                {
                    MessageBox.Show(error.Message);
                 }
            }
        }

        public void CallThread()
        {
            try
            {
                while (run)
                {
                    Data();
                    pictureBox1.Invalidate();
                    pictureBox2.Invalidate();

                }
            }
            catch (Exception error)
            {
                MessageBox.Show(error.Message);
            }
        }

        public unsafe void Data()
        {
            context.WaitAndUpdateAll();
            ImageMetaData imd = image.GetMetaData();
            lock (this)
            {
                Rectangle rect = new Rectangle(0, 0, bitmap.Width, bitmap.Height);
                BitmapData data = bitmap.LockBits(rect, ImageLockMode.WriteOnly,     System.Drawing.Imaging.PixelFormat.Format24bppRgb);
                byte* dstp = (byte*)data.Scan0.ToPointer();
                byte* imstp = (byte*)image.ImageMapPtr.ToPointer();
                for (int i = 0; i < imd.DataSize; i += 3, dstp += 3, imstp += 3)
                {
                    dstp[0] = imstp[2];
                    dstp[1] = imstp[1];
                    dstp[2] = imstp[0];
                }
                bitmap.UnlockBits(data);
                if (handpoint.Count != 0)
                {
                    Point3D start =     depth.ConvertRealWorldToProjective(handpoint.Peek());
                    foreach (Point3D hpoint in handpoint)
                    {
                        Point3D pt = depth.ConvertRealWorldToProjective(hpoint);
                        HandPosition(start);
                        start = pt;
                    }
                }
                string mess = "Gesture: RaiseHand" + " ,Status:" + gesstatus.ToString()     + "\n" + "Hand: " + handstatus.ToString();
                PicDraw(bitmap, mess);
            }
        }

        public void HandPosition(Point3D pt)
        {
            try
            {
                float a,b,c;
                string handx, handy, handz;
                a=pt.X;
                b=pt.Y;
                c=pt.Z;
                handx = a.ToString();
                handy = b.ToString();
                handz = c.ToString();
                Graphics g = pictureBox2.CreateGraphics();
                g.FillEllipse(brush, a - 5, b - 5, 20, 20);
                textBox1.Text = handx;
                textBox2.Text = handy;
                textBox3.Text = handz;
                g.Dispose();
            }
            catch (Exception error)
            {
                MessageBox.Show(error.Message);
            }
        }

        public void PicDraw(Bitmap bmap, string me)
        {
            try
            {
                Graphics g;
                pictureBox1.Image = bmap;
                g = Graphics.FromImage(pictureBox1.Image);
                g.DrawString(me, font, brush, point);
                g.Dispose();
            }
            catch (Exception error)
            {
                MessageBox.Show(error.Message);
            }
        }
    }
} 
```

And this is my code in Program.cs:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace HandTracking
{
    static class Program
    {
        ........
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Form1 f1 = new Form1();
            f1.Text = "Hand Tracking";
            f1.StartPosition = FormStartPosition.CenterScreen;
            Application.Run(f1);
        }
    }
} 
```

When I compile the program many times, each time different errors are thrown: InvalidOperationException not handled; Cross-thread operation not valid: Control 'textBox1' accessed from a thread other than the thread it was created on; Object is currently in use elsewhere. I don't know whether the way I pass parameters at: HandPosition(start) and PicDraw(bitmap, mess) were correct. Any problem will come out if I use HandPosition(start) to control a robot? Can anybody show me my mistakes and help me correct the progam?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:17:53.643

问题是您试图在 UI 线程以外的线程上访问 WinForms 控件。它是从您正在创建的线程中完成的`Thread.Start`。

对于 Windows 窗体，一种更好的技术是使用 BackgroundWorker 方法（如果您使用的是 .NET 4，Task Parallel Library 非常好）。使用 BackgroundWorker，您可以发送线程去做一些工作，它会更新 UI 线程，发送回您选择的任何对象。由于您是 C# 的新手，BackgroundWorker 是正确的选择，因为它易于使用，并且如果您遇到困难，它上面有大量的文档。

在 UI 线程上，您只需进行这些更新，然后从 UI 线程更新您的 WinForms 控件。问题已解决。

要了解有关 BackgroundWorker 的更多信息，请在 Google 上搜索，或者您可以从这里开始：

[http://www.codeproject.com/Articles/99143/BackgroundWorker-Class-Sample-for-Beginners](http://www.codeproject.com/Articles/99143/BackgroundWorker-Class-Sample-for-Beginners)

# c# - 为什么我的 ConditionOperator.In 带有字符串值导致 SQL 带有 int 值？

> ID：14656490
> 
> 赞同：1
> 
> 时间：2013-02-01T22:56:43.863
> 
> 标签：c#, dynamics-crm-2011

我正在使用 ConditionOperator.In 运算符编写带有过滤器的 QueryExpression，并将字符串作为值传递。但是，使用 CRM 服务器上的跟踪，我可以查看生成的 SQL，并且它正在用“1、2、3”替换我的字符串。

具体来说，这段代码：

```
var filter = new FilterExpression(LogicalOperator.And);
filter.AddCondition("primaryobjecttypecode", ConditionOperator.In, "account", "contact");

var query = new QueryExpression("sdkmessagefilter")
{
    ColumnSet = new ColumnSet("primaryobjecttypecode"),
    Criteria = filter,
    LinkEntities =
        {
            new LinkEntity()
            {
                 LinkFromEntityName = "sdkmessagefilter",
                 LinkFromAttributeName =  "sdkmessageid",
                 LinkToEntityName = "sdkmessage",
                 LinkToAttributeName = "sdkmessageid",
                 Columns = new ColumnSet("name"),                              
             },                                                       
         }
 };

 var response = orgProxy.RetrieveMultiple(query); 
```

此 SQL 的结果：

```
select top 5001 
    "sdkmessagefilter0".PrimaryObjectTypeCode as "primaryobjecttypecode",
    "sdkmessage1".Name as "sdkmessage1.name" 
from
    SdkMessageFilter as "sdkmessagefilter0" 
    join SdkMessage as "sdkmessage1" 
       on ("sdkmessagefilter0".SdkMessageId  =      "sdkmessage1".SdkMessageId) 
where
    ((("sdkmessagefilter0".PrimaryObjectTypeCode in (1, 2)))) 
order by "sdkmessagefilter0".SdkMessageFilterId asc 
```

最终，由于未能将“1”作为字符串大小写，这会导致 SqlException。

**为什么 {"account", "contact"} 字符串值会变成 {1, 2} int 值？**

我在服务器上运行 Dynamics CRM 2011 UR 10，我的应用程序正在使用 SDK 5.0.9689.2166

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T00:08:15.073

因为您在过滤器中使用的列是一种`int`数据类型。

`primaryobjecttypecode`持有一个代表给定实体类型的数字——实体类型代码。

1是账号，2是联系方式。

[实体类型代码](http://msdn.microsoft.com/en-us/library/bb887791.aspx)

> 低于 10,000 的类型代码保留给 Microsoft Dynamics CRM 系统实体。自定义实体的值大于或等于 10,000。请注意，自定义实体对象类型代码在导入期间可能会发生变化，并且不保证在系统之间相同。
> 
> 您可以使用 RetrieveAllEntities 消息检索所有实体的类型代码。

因此，如果您只打算使用系统实体，您可能会逃脱：

`filter.AddCondition("primaryobjecttypecode", ConditionOperator.In, 1, 2);`

或者，如果您要使用自定义实体，则必须查询 CRM 元数据或将值存储在配置中的某处。

# actionscript-3 - 在 actionscript 3 中动态创建对象？

> ID：14656496
> 
> 赞同：3
> 
> 时间：2013-02-01T22:57:06.543
> 
> 标签：actionscript-3, flash, actionscript

我对 AS3 还很陌生，我一直在尝试制作一个横向滚动射击游戏。我取得了一些进展，但我已经在子弹本身上碰壁了。我一直在使用的代码是：

```
var circle:Sprite = new Sprite();

function shoot() {
  circle.graphics.beginFill(0xFF794B);
  circle.graphics.drawCircle(0, 00, 7.5);
  circle.graphics.endFill();
  addChild(circle);
  circle.x = ship_mc.x;
  circle.y = ship_mc.y + 43; 
} 
```

这样做的问题是它一次只允许在屏幕上显示一个子弹。如何更改此设置以便创建项目符号以便我可以拥有无​​限数量的项目符号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:02:16.360

在方法内创建对象

```
function shoot() {
    var circle:Sprite = new Sprite();
    circle.graphics.beginFill(0xFF794B);
    circle.graphics.drawCircle(0, 00, 7.5);
    circle.graphics.endFill();
    addChild(circle);
    circle.x = ship_mc.x;
    circle.y = ship_mc.y + 43; 
} 
```

否则，您将只有一个`circle`变量。这一次，每次调用该方法时都会创建一个新圆圈。

但是，您可能希望以某种方式存储所有圈子，以便以后删除它们。

```
var allCircles: Vector.<Sprite> = new Vector.<Sprite>();
function shoot() {
    var circle:Sprite = new Sprite();
    circle.graphics.beginFill(0xFF794B);
    circle.graphics.drawCircle(0, 00, 7.5);
    circle.graphics.endFill();
    addChild(circle);
    circle.x = ship_mc.x;
    circle.y = ship_mc.y + 43; 
    allCircles.push(circle);
} 
```

然后，稍后，您可以遍历所有圈子：

```
for each (var circle: Sprite in allCircles) {
    // do something with this circle
} 
```

并清除所有圈子：

```
for each (var circle: Sprite in allCircles) {
    removeChild(circle);
}
allCircles.clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:03:26.697

您想存储一个`Sprite`s 数组，而不仅仅是其中一个。首先你声明你的`Array`：

```
var circles:Array = new Array(); 
```

然后你改变你的拍摄功能来制作一个新的，然后把它推到`Array`：

```
function shoot() {
    var circle:Sprite = new Sprite();

    circle.graphics.beginFill(0xFF794B);
    circle.graphics.drawCircle(0, 00, 7.5);
    circle.graphics.endFill();
    circle.x = ship_mc.x;
    circle.y = ship_mc.y + 43; 

    circles.push(circle);  
    addChild(circles[circles.length-1]);
} 
```

# jquery - 由于奇数字符，数据表在 IE8 中停止工作

ID：14656499

赞同：1

时间：2013-02-01T22:57:11.503

标签：jquery, jquery-datatables, ie8-compatibility-mode

# mysql - MySQL 约束插入失败，但在另一台服务器上的相同数据库中工作

> ID：14656507
> 
> 赞同：0
> 
> 时间：2013-02-01T22:58:41.637
> 
> 标签：mysql

快速感谢任何人看一看！

我有开发、舞台和产品服务器。

我在 dev 上创建了我的数据库，然后做了一个 mysqldump 并在 stage 和 prod 上安装了相同的数据库。

stage 和 prod 是相同的硬件，而 os 是最新的 LAMP 堆栈。

当我在 prod 上插入一个子行时，我收到一个错误，但它可以在我的开发和舞台机器上运行。这很奇怪。所以忽略这一点，这是我的简单数据（2个表）和我的错误：

```
 CREATE TABLE `Customer` (
  `Customer_Id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `AccessLevel_Id` int(11) unsigned NOT NULL,
  `UserId` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `FirstName` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `LastName` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `Phone` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
  `Email` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `Passwd` tinytext COLLATE utf8_unicode_ci NOT NULL,
  `HearAbout` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `Active` tinyint(1) NOT NULL DEFAULT '1',
  `Created` datetime NOT NULL,
  PRIMARY KEY (`Customer_Id`),
  UNIQUE KEY `UserId` (`UserId`),
  KEY `idxEmail` (`Email`),
  KEY `R8` (`AccessLevel_Id`),
  CONSTRAINT `R8` FOREIGN KEY (`AccessLevel_Id`) REFERENCES `accesslevel` (`AccessLevel_Id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci |

CREATE TABLE `Recipient` (
  `Recipient_Id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `Customer_Id` int(11) unsigned NOT NULL,
  `FirstName` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `LastName` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `NickName` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `LastUsed` datetime DEFAULT NULL,
  `Active` tinyint(1) NOT NULL DEFAULT '1',
  `Created` datetime NOT NULL,
  PRIMARY KEY (`Recipient_Id`),
  KEY `R14` (`Customer_Id`),
  CONSTRAINT `R14` FOREIGN KEY (`Customer_Id`) REFERENCES `customer` (`Customer_Id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci | 
```

这是适用的ID。

```
mysql> select * from Customer where Customer_Id=1;
+-------------+----------------+--------+-----------+----------+----------------+---------------------+------------------------------------+----------------+--------+---------------------+
| Customer_Id | AccessLevel_Id | UserId | FirstName | LastName | Phone          | Email               | Passwd                             | HearAbout      | Active | Created             |
+-------------+----------------+--------+-----------+----------+----------------+---------------------+------------------------------------+----------------+--------+---------------------+
|           1 |              3 | userid | Heywood   | Jablome    | (313) 248-1234 | heywood@jablome.com | $jxAB3sfe9CEixrNL3vKH6Jr7z. | Other |      1 | 2013-01-12 19:23:27 |
+-------------+----------------+--------+-----------+----------+----------------+---------------------+------------------------------------+----------------+--------+---------------------+
1 row in set (0.00 sec) 
```

这是约束错误：比我更聪明的人可以启发我吗？我真的很想知道这是什么原因！！

```
mysql> INSERT INTO `Recipient` (`Customer_Id`, `NickName`, `FirstName`, `LastName`, `Created`) VALUES ('1', 'Moe', 'Moe', 'Howard', '2013-02-01 15:25:19');
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`db1`.`Recipient`, CONSTRAINT `R14` FOREIGN KEY (`Customer_Id`) REFERENCES `customer` (`Customer_Id`) ON DELETE CASCADE ON UPDATE CASCADE) 
```

这是 show innodb status \G 的结果

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
130201 16:56:25 Transaction:
TRANSACTION 0 3429, ACTIVE 0 sec, process no 8699, OS thread id 3245587822336 inserting, thread declared inside InnoDB 500
mysql tables in use 1, locked 1
1 lock struct(s), heap size 368, 0 row lock(s), undo log entries 1
MySQL thread id 309, query id 97882 localhost root update
INSERT INTO `Recipient` (`Customer_Id`, `NickName`, `FirstName`, `LastName`, `Created`) VALUES ('1', 'Moe', 'Moe', 'Howard', '2013-02-01 15:25:19')
Foreign key constraint fails for table `db1`.`Recipient`:
,
  CONSTRAINT `R14` FOREIGN KEY (`Customer_Id`) REFERENCES `customer` (`Customer_Id`) ON DELETE CASCADE ON UPDATE CASCADE
Trying to add to index `R14` tuple:
DATA TUPLE: 2 fields;
 0: len 4; hex 00000001; asc     ;; 1: len 4; hex 0000000a; asc     ;;

But the parent table `db1`.`customer`
or its .ibd file does not currently exist! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:45:10.557

好的，其他人遇到了同样的问题，直到现在我才在这里找到它：[MySQL Foreign Key Error Even With Existent References](https://stackoverflow.com/questions/5874916/mysql-foreign-key-error-even-with-existent-references)，这让我怀疑我用 XAMPP 打包的 MySQL 的 Mac 版本。它是 5.1.44。有一个错误导致转储文件创建不正确，并导致此错误。

切换到更高版本的 mySQL 解决了这个问题。

# mysql - mysql标签系统，允许多个和重复的标签

> ID：14656512
> 
> 赞同：1
> 
> 时间：2013-02-01T22:59:25.963
> 
> 标签：mysql, sql, select

我正在构建一个 MySQL 标记数据库以允许用户标记产品。

我当前的设计使用这些表：

```
Account
id (PK)
username

Product
id (PK)
product_name

Product_Tag
id (PK)
product_id (FK to Product)
tag_id (FK to Tag)
account_id (FK to Account)
created_date

Tag
id (PK)
tag_name 
```

请注意，在我的设计中，我正在跟踪哪个用户在何时标记了产品，并允许使用同一个标签多次标记产品，这样我就知道哪些标签对于给定产品最受欢迎。

我试图找出一个标签搜索查询，该查询返回被搜索标签标记最多的产品。例如，如果我查询“红色连衣裙”，则带有“红色”和“连衣裙”标签的产品应该出现在结果集中的顶部。什么查询可以用我现有的设计完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:45:23.677

这个问题最像一个`Relational Division`

```
SELECT  a.ID, a.ProductName
FROM    Product a
        INNER JOIN Product_Tag b
            ON a.ID = b.Product_ID
        INNER JOIN Tag c
            ON b.Tag_ID = c.ID
WHERE   a.ProductName IN ('RED','ADDRESS')
GROUP   BY a.ID, a.ProductName
HAVING  COUNT(*) >= 2
ORDER   BY COUNT(*) DESC 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:04:24.777

```
select max(cnt) from(
    select count(*) cnt
    from product_tag
    where tag_id = <tag id of red dress>
    group by product_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:08:49.417

尝试这个：

```
SELECT
    P.id,
    P.product_name
FROM Product P
    LEFT JOIN Product_tag PT
        ON P.id = PT.product_id
    LEFT JOIN Tag T
        On PT.tag_id = T.id
WHERE T.tag_name = 'red'
     OR T.tag_name = 'dress'
GROUP BY P.id, P.product_name
ORDER BY COUNT(P.id) DESC 
```

您无法使用`LIMIT`to 获得第一个`n`标记最多的产品。

# drop-down-menu - 是否可以在不选择该选项的情况下单击下拉列表中的链接？

> ID：14656519
> 
> 赞同：1
> 
> 时间：2013-02-01T23:00:14.700
> 
> 标签：drop-down-menu

我有一个下拉列表。当用户将鼠标悬停在某个选项上时，将显示查看链接。您可以单击“查看”以查看该选项的更多详细信息。但是现在每次我单击它时都必须选择该选项。有没有办法做到这一点，当我单击“查看”时，我可以在弹出窗口中查看详细信息并且不会选择该选项？或者有没有办法绕过它？

![在此处输入图像描述](../Images/4b6230eaba84e041ff9c825be6ef61e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:07:02.193

我会通过使视图链接（`<a>`锚标记）的可点击区域成为一个容器框来做到这一点，它的 z-index 比下拉选项更高

然后视图链接将在顶部，单击它将链接而不选择底层下拉选项。

# jquery - 本地 jQuery 文件不起作用

> ID：14656520
> 
> 赞同：2
> 
> 时间：2013-02-01T23:00:21.590
> 
> 标签：jquery, jquery-mobile

如果我使用本地 jquery.js 文件，我的问题非常类似于[jQuery 代码不起作用，为什么？](https://stackoverflow.com/questions/5926701/jquery-codes-doesnt-work-if-im-using-a-local-jquery-js-file-why?rq=1).

但是，那里给出的解决方案对我不起作用。

我创建了一个带有`UTF-8`编码的文件，但它仍然无法正确呈现。

使用外部`jQuery`文件虽然有效。

这是我的 MWE：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.css" rel="stylesheet">
    <link href="http://code.jquery.com/mobile/1.2.0/css/jquery.mobile.structure-1.2.0.min.css" rel="stylesheet">
    <script charset="utf-8" src="js/cordova-2.2.0.js" type="text/javascript"></script>
    <script charset="utf-8" src="js/index.js" type="text/javascript"></script>
    <script charset="utf-8" src="js/jquery-1.9.0.min.js" type=
    "text/javascript"></script>
    <script charset="utf-8" src="js/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('div.ui-page').live("swipeleft", function() {
                var nextpage = $(this).next('div[data-role="page"]');
                if (nextpage.length > 0) {
                    $.mobile.changePage(nextpage, {
                        transition: "slide",
                        reverse: false
                    });
                }
             });
             $('div.ui-page').live("swiperight", function() {
                 var prevpage = $(this).prev('div[data-role="page"]');
                 if (prevpage.length > 0) {
                     $.mobile.changePage(prevpage, {
                         transition: "slide",
                         reverse: true
                     });
                 }
             });
         });       
    </script>
</head>

<body>
    <div data-role="page">
        <div data-role="header">
            <h2 class="ui-title"><strong>Page one</strong></h2>
        </div>

        <div data-role="content">
            <strong>You are in page one.</strong>
        </div>

        <div data-id="foo1" data-position="fixed" data-role="footer">
            <div data-role="navbar">
                <ul>
                    <li><strong><a data-icon="home" href=
                    "index.html">Home</a></strong></li>

                    <li><strong><a data-icon="info" href=
                    "b.html">Info</a></strong></li>

                    <li><strong><a data-icon="gear" href=
                    "#">Settings</a></strong></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->
    </div>

    <div data-role="page">
        <div data-role="header">
            <h2 class="ui-title"><strong>Page two</strong></h2>
        </div>

        <div data-role="content">
            <strong>You are in page two.</strong>
        </div>

        <div data-id="foo1" data-position="fixed" data-role="footer">
            <div data-role="navbar">
                <ul>
                    <li><strong><a data-icon="home" href=
                    "index.html">Home</a></strong></li>

                    <li><strong><a data-icon="info" href=
                    "b.html">Info</a></strong></li>

                    <li><strong><a data-icon="gear" href=
                    "#">Settings</a></strong></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer -->
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:02:26.917

**您必须先**链接到 jQuery 。高于所有其他脚本文件。因此，只需将两个 jQuery 文件移到您的`cordova`和`index`.js 文件上方即可。除非`cordova`并且`index`不包含 jQuery 技术。

**为什么？**在浏览器解释它之前，你不能使用 jQuery。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:03:03.737

[`.live`](http://api.jquery.com/live/)自 v1.7 起已在 jQuery 中弃用，并已在 v1.9 中删除。

您应该将其替换为[`.on()`](http://api.jquery.com/on/).

`.on`有 2 种用于绑定元素的语法，而`.live`只有 1 种。

如果元素在您绑定时存在，您可以这样做：

```
$('.element').on('click', function(){
  ...
}); 
```

您甚至可以使用速记：

```
$('.element').click(function(){
  ...
}); 
```

如果该元素当时不存在，或者将添加新元素（这是`.live`通常使用的），则需要使用“事件委托”：

```
$(document).on('click', '.element', function(){
  ...
}); 
```

注意：您希望绑定到最近的静态元素，而不是总是`document`.

# c++ - 奇怪的行为，cout 使程序工作

> ID：14656522
> 
> 赞同：1
> 
> 时间：2013-02-01T23:00:26.293
> 
> 标签：c++

我在 C++ 中有两个线程。一个称为警报线程的线程运行该函数`raiseAlarm()`，另一个称为打印线程的线程运行该函数`printMetrics`。以固定的时间间隔，`raiseAlarm`将原子变量设置为`true`。当变量为`true`时，`printMetrics`基于该原子变量的值旋转的线程打印一些数据。当我运行这个应用程序时，什么也没有发生。但如果我在`cout`任何地方放一个`raiseAlarm`，一切正常。为什么？

```
void Client::raiseAlarm()
{
    bool no = false;
    while(!stop.load(std::memory_order_acquire))
    {
        //cout << "about to sleep\n";
        this_thread::sleep_for(std::chrono::seconds(captureInterval));
        while(!alarm.compare_exchange_weak(no, true, std::memory_order_acq_rel))
        {
            no = false;
        }
    }
}

void Client::printMetrics()
{
    bool yes = true;
    while(!stop.load(std::memory_order_acquire))
    {
        while(!alarm.compare_exchange_weak(yes, false, std::memory_order_acq_rel) )
        {
            yes = true;
        }

        cout << "Msgs Rcvd: " << metrics.rcv_total.load(std::memory_order_acquire);
        cout << "Msgs Sent: " << metrics.snd_total.load(std::memory_order_acquire);
        cout << "Min latency: " << metrics.min_latency.load(std::memory_order_acquire);
        cout << "Max latency: " << metrics.max_latency.load(std::memory_order_acquire);
        metrics.reset();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T23:03:11.803

只是一个建议，因为我对 C++ 中的并发性不太了解，但请确保不要忘记刷新输出流。`cout << flush;`要么在你的所有行之后粘贴一个，要么在每个行上`cout`添加`<< endl`一个（这将自动刷新你的流）。

# java - Java中有Point类吗？

> ID：14656525
> 
> 赞同：2
> 
> 时间：2013-02-01T23:00:42.817
> 
> 标签：java, point

是否有与 Point 等效的类在构造函数中采用双精度并使用双精度？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T23:01:10.873

是的，看看[Point2D](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Point2D.Double.html)类。要使用 double 值构造它，您可以使用 Double 构造函数：

```
Point2D myPoint = new Point2D.Double(1.0, 1.0); 
```

请注意，标准 Point 类扩展了此类。

# svn - svn 从主干切换到分支

> ID：14656527
> 
> 赞同：75
> 
> 时间：2013-02-01T23:01:00.200
> 
> 标签：svn, branch, trunk

我在 SVN 托管项目的根文件夹中`trunk`，正在探索建立两个分支。

一个分支将是当前（稳定）版本的项目的“快照”，第二个分支将是我将应用一些新代码、测试然后将主干升级到新版本的分支。

我的目标是保留快照作为保险，并快速获得我们项目的较旧、稳定版本。第二个分支，一旦我们应用新代码并且测试通过，将被合并回主干，我们向公众提供。

为了设置快照，我将我们的快照复制`trunk`到了一个名为`v1p2p3`：

```
$ svn cp https://www.example.com/svn/trunk \ 
         https://www.example.com/svn/branches/v1p2p3 \
         -m "Branching from root trunk to v1p2p3 at r1114" 
```

到现在为止还挺好：

```
Committed revision 1115. 
```

我想做的是将我的本地存储库副本切换到此分支，以确保一切正常，但我收到一条错误消息：

```
$ svn switch --relocate https://www.example.com/svn/trunk \
                        https://www.example.com/svn/branches/v1p2p3 
```

错误信息是：

```
svn: E155024: Invalid relocation destination: 
              'https://www.example.com/svn/branches/v1p2p3' 
              (does not point to target) 
```

我究竟做错了什么？

（如果这不起作用，我怀疑我无法开始更雄心勃勃的第二个分支。我正在寻找一种不会破坏现有项目布局的方法。感谢您的建议，并且如果这是一个愚蠢的问题，请道歉。）

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-02-01T23:05:41.600

您不需要这样做，`--relocate`因为分支位于同一个存储库 URL 中。做就是了：

```
svn switch https://www.example.com/svn/branches/v1p2p3 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-02T00:34:26.550

*   （正确）tzaman 答案的简短版本将是（对于新鲜的 SVN）

    ```
    svn switch ^/branches/v1p2p3 
    ```

*   `--relocate`switch 无论如何都被弃用了，*当它需要时*你必须使用`svn relocate`命令

*   您可以使用标签（用于历史记录的传统 RO 标签），而不是创建快照分支（只读）

在 Windows 上，插入符号 ( `^`) 必须转义：

```
svn switch ^^/branches/v1p2p3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-18T09:06:50.833

就我而言，我想要`check out`一个`new branch`最近削减的，但它的大小很大，我想节省时间和互联网带宽，因为我在一个缓慢的计量网络中

所以`copped the previous branch`我已经签到了

我去了工作目录，从 svn info，我可以看到它在上一个分支上我做了以下命令（你可以从 找到这个命令`svn switch --help`）

```
svn switch ^/branches/newBranchName 
```

再次检查`svn info`，您可以看到它正在成为 newBranchName 继续前进`svn up`

这就是我如何通过互联网传输最少的数据轻松、快速地获得新分支

希望分享我的案例有助于并加快您的工作

# java - TypeNotPresentExceptionProxy

> ID：14656543
> 
> 赞同：52
> 
> 时间：2013-02-01T23:02:32.710
> 
> 标签：java, maven, exception, junit, surefire

从 Surefire 2.6 升级到 Surefire 2.13 时，我`TypeNotPresentExceptionProxy`在运行单元测试时得到一个。

```
java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
    at sun.reflect.annotation.AnnotationParser.parseClassArray(AnnotationParser.java:653)
    at sun.reflect.annotation.AnnotationParser.parseArray(AnnotationParser.java:460)
    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:286)
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:222)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)
    at java.lang.Class.initAnnotationsIfNecessary(Class.java:3070)
    at java.lang.Class.getAnnotation(Class.java:3029)
    at org.apache.maven.surefire.common.junit4.JUnit4TestChecker.isValidJUnit4Test(JUnit4TestChecker.java:64) 
```

在`JUnit4TestChecker`中，第 64 行如下所示：

```
Annotation runWithAnnotation = testClass.getAnnotation( runWith ); 
```

所以 Surefire 检查`@RunWith`注释以确保其类型有效。我们的测试使用 Spring，所以`@RunWith`在我们的测试类中看起来像这样：

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

似乎 Surefire 没有找到`SpringJUnit4ClassRunner`课程。我不确定为什么在 Surefire 2.6 下，测试运行良好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-07T21:36:00.360

运行 mvn 依赖：resolve

排除可能潜入的任何 3.x 版本的 JUnit。

确保没有 TestNG 依赖项，如果有它将加载 TestNG 注释而不是您需要的 JUnit 注释。

# c# - ashx 处理程序未按预期运行

> ID：14656546
> 
> 赞同：0
> 
> 时间：2013-02-01T23:02:52.970
> 
> 标签：c#, asp.net, ashx

我的 ashx 处理程序存在问题，这些处理程序是通过更新面板回发和 javascript 调用触发的。

长话短说，应用程序中有两个处理程序。不管我调用什么 URL，我总是在同一个处理程序（旧的）中结束，而不是在新的需要的处理程序中。

我不知道这是怎么发生的，因为 URL 似乎是正确的，因此我倾向于配置问题。

任何人都有任何想法-这开始让我发疯了吗？

干杯

下面的代码：

**C＃：**

```
string encryptedQuerystring = StringFunctions.EncryptQueryString(string.Format("productId={0}", CurrentProduct.Id));

        string js = "$(function () {ProductManager.ExportProductExcel('../../Handlers/ProductExportExcel.ashx" + encryptedQuerystring + "');});";
        ScriptManager.RegisterStartupScript(Page, Page.GetType(), "GenerateProductExport", js, true); 
```

**Javascript：**

```
ExportProductExcel: function (url) {
    window.location = url;
    alert(window.location); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:51:49.783

好吧，原来这是一个男生的错误......

我做了一个简单的复制粘贴来创建新的处理程序并编辑了功能背后的所有代码。然而，我忘记了还有一个与 .ashx 文件相关的标记页面，它也需要编辑。

```
<%@ WebHandler Language="C#" CodeBehind="ProductExportExcel.ashx.cs" Class="ITG.MediaCentre.Crew.WebApplication.Handlers.ExportExcel" %> 
```

What you will notice is that the Class portion is pointing to the incorrect class hence the wrong code is executed even though the URL is pointing to the correct location.

Hope this helps somebody out in the future.

Cheers

# android - 无法运行简单的 android 应用程序

> ID：14656551
> 
> 赞同：0
> 
> 时间：2013-02-01T23:03:19.107
> 
> 标签：android, android-emulator

我是安卓新手。我修改了这个链接中描述的activity_main.xml。[http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

当我尝试运行时，AVD 说，不幸的是你的应用程序已经停止工作。

我试图在清单文件中更改 minimumsdk 和 targetsdk 版本，但这没有帮助。

```
02-01 12:01:25.964: W/Trace(771): Unexpected value from nativeGetEnabledTags: 0
02-01 12:01:25.993: W/Trace(771): Unexpected value from nativeGetEnabledTags: 0
02-01 12:01:26.513: D/AndroidRuntime(771): Shutting down VM
02-01 12:01:26.513: W/dalvikvm(771): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
02-01 12:01:26.523: E/AndroidRuntime(771): FATAL EXCEPTION: main
02-01 12:01:26.523: E/AndroidRuntime(771): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.firstdevapp/com.example.firstdevapp.MainActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class editText
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.os.Looper.loop(Looper.java:137)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-01 12:01:26.523: E/AndroidRuntime(771):  at java.lang.reflect.Method.invokeNative(Native Method)
02-01 12:01:26.523: E/AndroidRuntime(771):  at java.lang.reflect.Method.invoke(Method.java:511)
02-01 12:01:26.523: E/AndroidRuntime(771):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-01 12:01:26.523: E/AndroidRuntime(771):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-01 12:01:26.523: E/AndroidRuntime(771):  at dalvik.system.NativeStart.main(Native Method)
02-01 12:01:26.523: E/AndroidRuntime(771): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class editText
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-01 12:01:26.523: E/AndroidRuntime(771):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.Activity.setContentView(Activity.java:1881)
02-01 12:01:26.523: E/AndroidRuntime(771):  at com.example.firstdevapp.MainActivity.onCreate(MainActivity.java:12)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.Activity.performCreate(Activity.java:5104)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-01 12:01:26.523: E/AndroidRuntime(771):  ... 11 more
02-01 12:01:26.523: E/AndroidRuntime(771): Caused by: java.lang.ClassNotFoundException: Didn't find class "android.view.editText" on path: /data/app/com.example.firstdevapp-2.apk
02-01 12:01:26.523: E/AndroidRuntime(771):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-01 12:01:26.523: E/AndroidRuntime(771):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-01 12:01:26.523: E/AndroidRuntime(771):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
02-01 12:01:26.523: E/AndroidRuntime(771):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
02-01 12:01:26.523: E/AndroidRuntime(771):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
02-01 12:01:26.523: E/AndroidRuntime(771):  ... 21 more
02-01 12:01:29.062: I/Process(771): Sending signal. PID: 771 SIG: 9 
```

谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:07:19.970

与根本原因相关的行是这一行：

```
02-01 12:01:26.523: E/AndroidRuntime(771): Caused by: java.lang.ClassNotFoundException: Didn't find class "android.view.editText" on path: /data/app/com.example.firstdevapp-2.apk 
```

我希望在您的布局中，您未能将“e”大写，`editText`而不是`EditText`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:06:08.070

没有你的代码很难说，但从这一行`error inflating class editText`我猜你忘了`<EditText`在你的 XML 布局中大写 E

# sass - 指南针：从另一个项目目录导入文件

> ID：14656555
> 
> 赞同：1
> 
> 时间：2013-02-01T23:03:36.010
> 
> 标签：sass, compass-sass

我有两个项目。一个用于我们网站的面向公众的一侧，另一个用于管理员一侧。我在两个页面上都有一个相同的页面。

我的目录结构是这样的：

```
/public
  config.rb
  /images
    /upgrade
      /sprites
  /sass
    /upgrade
        index.scss
  /stylesheets

/cms
  config.rb
  /sass
    /upgrade
        index.scss
  /stylesheets 
```

`public/sass/upgrade/index.scss`是所有风格都存在的地方。`cms/sass/upgrade/index.scss`导入这些样式，如下所示：

```
@import '../../../public/sass/upgrade' 
```

这些工作正常，因为我可以将 css 生成到`cms/stylesheets/upgrade/index.css`. 我遇到问题的是精灵生成。在内部`public/sass/upgrade/index.scss`，精灵 pngs 的导入看起来像这样

```
@import 'upgrade/sprites/*.png'; 
```

使用 LiveReload，我收到以下错误：

```
Cannot determine the opposite position of: to
Cannot determine the opposite position of: to
Cannot determine the opposite position of: to
No files were found in the load path matching "setup/packages/*.png". Your current load paths are: ./images 
```

这是有道理的，因为当我编译 my 时，它会在没有`cms/sass/upgrade/index.scss`图像的地方寻找图像。`cms/images/upgrade/sprites`

我很想知道是否有人遇到过这个问题并且有任何解决方案如何跨项目共享资产。我认为该设置`relative_assets = true`会有所帮助，但没有。也许我用错了。我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:36:37.303

我确信 cimmanon 创建符号链接的建议应该有效。你确定你做对了吗？为了安全起见，请使用绝对路径。

你的项目结构有点有趣，我没能完全理解它，所以我不能给你确切的符号链接位置和目标。如果您希望我们为您提供确切的路径，请更新您的问题：

1.  您放置符号链接的位置，它指向的位置，尝试编译时遇到的错误；
2.  更详细的项目结构（所涉及文件的全部内容会有所帮助）。

**UPD：**确保您的 Apache 配置启用了[FollowSymLinks](http://httpd.apache.org/docs/2.2/mod/core.html#Options)并且 PHP 配置在[include_path](http://php.net/manual/en/ini.core.php#ini.include-path)中包含所有项目目录。

如果你放弃它，你可以使用我刚刚发明的一个讨厌的 hack。:D

这个想法是创建一个自定义 SASS 函数，该函数根据调用它的项目返回不同的结果。`public/sass/upgrade/index.scss`这将允许根据您正在编译的项目导入不同的路径。

在`public/config.rb`中，添加：

```
# Assign a name to the project and pass it into SASS
$project_name = "public"
module Sass::Script::Functions
  def project_name
    Sass::Script::String.new($project_name)
  end
end 
```

的添加`cms/config.rb`非常相似。唯一的区别是 $project_name 的值：

```
# Assign a name to the project and pass it into SASS
$project_name = "cms"
module Sass::Script::Functions
  def project_name
    Sass::Script::String.new($project_name)
  end
end 
```

之后，修改导入行`public/sass/upgrade/index.scss`：

```
@if project-name() == public {
  @import 'upgrade/sprites/*.png';
} @else if project-name() == cms {
  @import '../../../public/upgrade/sprites/*.png';
} 
```

我的示例中的导入路径是弯曲的，请调整它们以匹配您的环境。

**UPD2：**`@import`指令不允许在控制指令中，如`@if`. 因此，您可以使用：

```
@if project-name() == public {
  $path: 'upgrade/sprites/*.png';
} @else if project-name() == cms {
  $path: '../../../public/upgrade/sprites/*.png';
}
@import #{$path}; 
```

# javascript - 从 Javascript 类代码中获取数字

> ID：14656561
> 
> 赞同：0
> 
> 时间：2013-02-01T23:04:04.067
> 
> 标签：javascript, jquery, html, button, numbers

我在互联网上搞乱了一个按钮，并且我的部分代码工作了，在 200 毫秒的时间间隔内只自动单击了 133 次按钮。

```
var count = 0; 
var thingy = setInterval(function () 
{ 
    $('#btnEntry').click(); 
    count++;  
    if (count > 133) 
        clearInterval(thingy);
}, 200); 
```

但是，我希望能够对其进行调整，以便它也停止点击某个数字。例如，该页面使用以下代码显示您的点击次数：

```
<div id="lblYourClickCountPanel" style="display: block;">
    <span id="lblYourClickCount" class="yourClickCount" style="display: inline-block; width: 185px; visibility: visible;">107,459
    </span>
</div> 
```

其中 107,459 是点击次数。如果我想阻止代码在数字 108,000 之后点击；我该怎么做？

我试过代码，

```
var count = 0; 
var thingy = setInterval(function () 
{ 
    $('#btnEntry').click(); 
    count++;  
    if (count > 133) || if($('yourClickCount').getClass() >= 108,000     
        clearInterval(thingy);
}, 200); 
```

但它给了我一个 if || 的语法错误 陈述。我也不确定我是否使用了正确的标识符来从中获取。我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:11:42.257

正确的代码：

```
var count = 0,
    limit = parseInt($('#yourClickCount').text().replace(/,/g, ''));
var thingy = setInterval(function () {
    $('#btnEntry').click();
    count++;
    if (count > limit)
        clearInterval(thingy);
}, 200); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T23:16:27.113

**写成...**

如果（计数> 133）|| if(parseInt($('yourClickCount').html()) >= 108000
clearInterval(thingy);

# grails - 如何在动态映射闭包中获取控制器名称

> ID：14656565
> 
> 赞同：2
> 
> 时间：2013-02-01T23:04:14.297
> 
> 标签：grails

我正在尝试在动态映射闭包中获取控制器名称，如下所示：

```
"/admin/$controller/$action?/$id?"{
    controller = {
        "${controllerName}Admin"
    }
} 
```

强制对“/admin/[controller name]”的所有请求映射到名为“[controller name]Admin”的控制器。“controllerName”变量在闭包外部起作用，但在内部不起作用。

我怎么做？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:48:16.270

一种可能的解决方案可能是：

```
 "/admin/$controller/$action?/$id?"{
        controller = {
            def controllerName = (request.requestURI - request.contextPath).split('/')[2]

            // or
            //def controllerName = request.servletPath.split('/')[2]

            "${controllerName}Admin"
        }
    } 
```

# javascript - 流星订阅计数

> ID：14656567
> 
> 赞同：12
> 
> 时间：2013-02-01T23:04:16.823
> 
> 标签：javascript, meteor

有什么方法可以订阅流星计数。

我想发布`Articles.find().count()`而不是发布 Articles.find()。理想情况下，这应该将计数分配给响应式会话，该会话会在计数更改时更改。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T07:39:21.997

我有以下代码来发布我的计数器

```
Meteor.publishCounter = (params) ->
  count = 0
  init = true
  id = Random.id()
  pub = params.handle
  collection = params.collection
  handle = collection.find(params.filter, params.options).observeChanges
    added: =>
      count++
      pub.changed(params.name, id, {count: count}) unless init
    removed: =>
      count--
      pub.changed(params.name, id, {count: count}) unless init
  init = false
  pub.added params.name, id, {count: count}
  pub.ready()
  pub.onStop -> handle.stop() 
```

我像这样使用它：

```
 Meteor.publish 'bikes-count', (params = {}) ->
    Meteor.publishCounter
      handle: this
      name: 'bikes-count'
      collection: Bikes
      filter: params 
```

最后在客户端：

```
Meteor.subscribe 'bikes-count'
BikesCount = new Meteor.collection 'bikes-count'

Template.counter.count = -> BikesCount.findOne().count 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-27T22:43:14.463

Meteor 文档实际上展示了如何使用更新后的观察 API 执行此操作的一个很好的示例。我在这里重新发布它，但原始文档在这里：[http](http://docs.meteor.com/#meteor_publish) ://docs.meteor.com/#meteor_publish 。

```
Meteor.publish("counts-by-room", function (roomId) {
  var self = this;
  var count = 0;
  var initializing = true;
  var handle = Messages.find({roomId: roomId}).observeChanges({
    added: function (id) {
      count++;
      if (!initializing)
        self.changed("counts", roomId, {count: count});
    },
    removed: function (id) {
      count--;
      self.changed("counts", roomId, {count: count});
    }
    // don't care about moved or changed
  });

  // Observe only returns after the initial added callbacks have
  // run.  Now return an initial value and mark the subscription
  // as ready.
  initializing = false;
  self.added("counts", roomId, {count: count});
  self.ready();

  // Stop observing the cursor when client unsubs.
  // Stopping a subscription automatically takes
  // care of sending the client any removed messages.
  self.onStop(function () {
    handle.stop();
  });
});

// client: declare collection to hold count object
Counts = new Meteor.Collection("counts");

// client: subscribe to the count for the current room
Meteor.autorun(function () {
  Meteor.subscribe("counts-by-room", Session.get("roomId"));
});

// client: use the new collection
console.log("Current room has " +
            Counts.findOne(Session.get("roomId")).count +
            " messages."); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-26T20:36:05.543

[tmeasday:publish-counts](https://atmospherejs.com/tmeasday/publish-counts)气氛包做的工作;）

# css - 放置在“div”元素中时，Img 不显示

> ID：14656572
> 
> 赞同：0
> 
> 时间：2013-02-01T23:04:54.093
> 
> 标签：css, html, hyperlink, image

我已将 img 与代码放在同一个文件夹中，并在代码“adHere.jpg”中正确拼写了它，所以我知道这不是问题，但它可能是我放入链接的格式。

因此，如果还没有到期，让我告诉你。

```
 <!--Side Bar Code -->
<div class="sidebar">
  <p><a href="">Home Page</a></p>
  <p><a href="">About Me</a></p>
  <p><a href="">Behind the scenes</a></p>
  <p><a href="">Etc.</a></p>
  <img href="adHere.jpg" width="750" height="450"> 
</div> 
```

这是我的代码在 CSS 中的样子：

```
.sidebar img {border:solid 1px;
      position:relative;
      opacity: 1;} 
```

以下是它的渲染方式：http: [//i.imgur.com/PECdT8M.png](http://i.imgur.com/PECdT8M.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:07:07.173

img 的源属性`src`不是`href`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:07:36.003

图像源的正确属性是`src`，不是`href`。它应该是：

```
<img src="adHere.jpg" width="750" height="450"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:20:38.690

试试这个代码：

```
 <!--Side Bar Code -->
<div class="sidebar">
  <p><a href="">Home Page</a></p>
  <p><a href="">About Me</a></p>
  <p><a href="">Behind the scenes</a></p>
  <p><a href="">Etc.</a></p>
  <img src="adHere.jpg" width="750" height="450"> 
</div> 
```

CSS 可以保持不变。

# mysql - 在 SQL 树结构中查找节点

> ID：14656573
> 
> 赞同：1
> 
> 时间：2013-02-01T23:04:58.510
> 
> 标签：mysql, sql, hierarchical-data

我有一个存储在 MYSQL 数据库中的树状数据模型。通过在每个“节点”对象上使用两个字段来遍历树：

*   ID
*   parent_id

根 id 的 parent_id 为“null”，树中的所有其他节点都引用父 id。

如果我想获得这棵树中所有节点 ID 的列表，我必须递归地遍历树并收集每个节点的一个或多个属性，使用本质上是一个带有许多查询的 for 循环。

我想知道是否有一种方法可以通过 SQL 中的查询更有效地做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:13:03.357

我写了一篇关于我称之为 Closure Table 的解决方案的高评价文章：[将平面表解析为树的最有效/优雅的方法是什么？](https://stackoverflow.com/questions/192220/what-is-the-most-efficient-elegant-way-to-parse-a-flat-table-into-a-tree/192462#192462)

我还在我的演示文稿[Models for Hierarchical Data with SQL and PHP](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)和我的书[SQL Antipatterns: Avoiding the Pitfalls of Database Programming 中](http://pragprog.com/book/bksqla/sql-antipatterns)介绍了这种设计。

我在 Stack Overflow 上多次回答了有关分层数据查询的问题： [https ://stackoverflow.com/search?q=user%3A20860+%5Bhierarchical-data%5D](https://stackoverflow.com/search?q=user%3A20860+%5Bhierarchical-data%5D)

[Quassnoi](https://stackoverflow.com/users/55159/quassnoi)撰写了有关在 MySQL 中查询树的史诗系列博客文章：http: [//explainextended.com/2009/07/22/hierarchial-queries-in-mysql-identifying-trees/](http://explainextended.com/2009/07/22/hierarchial-queries-in-mysql-identifying-trees/)

Quassnoi 还回答了 Stack Overflow 上有关分层数据的一些问题： [https ://stackoverflow.com/search?q=user%3A55159+%5Bhierarchical-data%5D](https://stackoverflow.com/search?q=user%3A55159+%5Bhierarchical-data%5D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:14:41.623

您正在使用一个困难的搜索模型，即邻接列表模型。如果您知道您将拥有的父子关系的潜在“级别”数量，那么是的，您可以构建一个查询来这样做。但是，如果它不是一个有限的数字，那么这将非常困难。

如果可能，请考虑使用嵌套集模型。这是一篇关于这个主题的好文章：

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

回到您的问题，您必须多次加入同一张桌子才能获得所需的结果，如下所示：

```
SELECT *
FROM YourTable t
    LEFT JOIN YourTable t2 ON t2.parentid = t1.id
    LEFT JOIN YourTable t3 ON t3.parentid = t2.id
    LEFT JOIN YourTable t4 ON t4.parentid = t3.id 
```

每个潜在的父子关系都有一个额外的 JOIN。

希望这会有所帮助，祝你好运。

# jquery - 如何在 Rails 中更改菜单项的类别

> ID：14656577
> 
> 赞同：3
> 
> 时间：2013-02-01T23:05:45.810
> 
> 标签：jquery, ruby, ruby-on-rails-3

我有一个带有菜单导航的布局。我正在使用我在网上找到的模板。每个菜单项都有一个 HTML 页面，并且每个相应页面的 li 项类称为“已选择”。它看起来像这样：

```
 <nav>
    <ul class="sf-menu" id="nav">
      <li class="selected"><%= link_to "home", root_path %></li>
      <li><%= link_to "about me", about_path %></li>
      <li><%= link_to "my portfolio" %>
        <ul style="z-index: 2;">
          <li style="z-index: 2;"><%= link_to "portfolio one", portfolio_one_path %></li>
          <li style="z-index: 2;"><%= link_to "portfolio two", portfolio_two_path %></li>
          <li style="z-index: 2;"><%= link_to "portfolio three", portfolio_three_path %></li>
        </ul>
      </li>
      <li><%= link_to "blog", blog_path %></li>
      <li><%= link_to "contact", contact_path %></li>
    </ul>
  </nav> 
```

所以这是在我的`application.html.erb`文件中。我的问题是如何根据用户单击的链接以编程方式将每个 li 项目的类更改为“已选择”？这可以用 Ruby 完成还是我需要使用 JavaScript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:22:35.063

我想你想要`current_page?`帮助方法 - [http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F)

```
<li class="<%= "selected" if current_page?(root_path) %>"><%= link_to "home", root_path %></li>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:23:24.167

我想你想做这样的事情：

```
<%= link_to "portfolio one", portfolio_one_path,  class: current_page?(products_path) ? "selected" : "not_selected" %> 
```

为您的链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:23:45.110

控制器和操作名称可用于参数哈希中的视图。因此，如果这些是不同的操作/控制器，您可以执行以下操作：

```
<li class=<%= "selected" if params[:controller] == 'portfolio' && params[:action] == 'action_name' %>><%= link_to "portfolio one", portfolio_one_path %></li> 
```

**我个人不是这种方法的忠实拥护者，并且直接将其保留在我的观点中。通常，我将逻辑推送到我的助手中并使用它们。**

# python - 如何连接到 TT X_TRADER API 以使用 python 创建自动交易系统？

> ID：14656579
> 
> 赞同：4
> 
> 时间：2013-02-01T23:05:48.867
> 
> 标签：python, trading, algorithmic-trading

我已经在内部开发论坛中多次看到这个问题，因此想提供一个快速示例，说明如何立即在 python 中实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:05:48.867

首先，请注意我们所做的只是连接到相关的 X_TRADER com 对象，因此以下所有内容仍然适用：

[https://www.tradingtechnologies.com/documents/user%20documents/xtapi_classreference_v7.7.8_dg.pdf](https://www.tradingtechnologies.com/documents/user%20documents/xtapi_classreference_v7.7.8_dg.pdf)

以下是完整的 Python 代码，可用于订阅原油 March13 期货：

```
import pythoncom
from time import sleep
from win32com.client import Dispatch, DispatchWithEvents, getevents
from win32com.client.gencache import EnsureDispatch, EnsureModule

GATE = None
NOTIFY = None

class InstrNotify(getevents('XTAPI.TTInstrNotify')):
    def __init__(self):
        pass

    def Subscribe(self, pInstr):
        self.AttachInstrument(pInstr)
        pInstr.Open(0)

    def OnNotifyFound(self, pNotify=None, pInstr=None):
        pInstr = Dispatch(pInstr)        
        print 'Found instrument:'
        print '--> Contract: %s' % pInstr.Get('Contract')
        print '--> Exchange: %s' % pInstr.Get('Exchange')

    def OnNotifyNotFound(self, pNotify=None, pInstr=None):
        pInstr = Dispatch(pInstr)        
        print 'Unable to find instrument'

    def OnNotifyUpdate(self, pNotify=None, pInstr=None):
        pInstr = Dispatch(pInstr)
        contract = pInstr.Get('Contract')

        bid = pInstr.Get('Bid')
        ask = pInstr.Get('Ask')
        last = pInstr.Get('Last')

        print '[UPDATE] %s: %s/%s' % (contract, bid, ask)

def Connect():
    global NOTIFY, GATE
    #the below is required in order to establish the com-object links
    #that way you don't need to run makepy first
    EnsureModule('{98B8AE14-466F-11D6-A27B-00B0D0F3CCA6}', 0, 1, 0)

    GATE = EnsureDispatch('XTAPI.TTGate')
    NOTIFY = DispatchWithEvents('XTAPI.TTInstrNotify', InstrNotify) 

def main():
    Connect()

    pInstr = EnsureDispatch('XTAPI.TTInstrObj')
    pInstr.Exchange = 'CME-A'
    pInstr.Product  = 'CL'
    pInstr.Contract = 'CL Mar13'
    pInstr.ProdType = 'FUTURE'

    NOTIFY.Subscribe(pInstr)

    for i in range(10):
        pythoncom.PumpWaitingMessages()
        sleep(1.0) 
```

如果您启动并运行 X_TRADER Pro，这将产生如下内容：

```
Found instrument:
--> Contract: CL Mar13
--> Exchange: CME-A
[UPDATE] CL Mar13: 9760/9764 
```

# php - 如何使用 jQuery 通过 ajax 提交表单？

> ID：14656581
> 
> 赞同：1
> 
> 时间：2013-02-01T23:05:55.030
> 
> 标签：php, jquery, mysql, ajax

我需要使用 jQuery 通过 .ajax 提交一个 html 表单。当我正常提交而不是通过 ajax 提交时，一切正常。我在切换到 ajax 时遇到了问题。

该表单具有不断变化的输入数量。（特定组中的每个用户一个，组可以有不同数量的用户）。所以我这样命名输入：

```
<input type="hidden" name="<?php echo 'sampleA['. $i .']'; ?>" value="sampleValue" /> 
```

其中 $i 是一个计数器，因此输入是 sampleA['1'] 和 sampleA['2'] 等等。

我为每个用户提供了另一个输入，以相同的方式完成，我们可以称之为 sample2['1'] 等等。

因此，使用 php，我只需获取这 2 个数组并使用类似的计数器运行它们，然后根据需要将它们插入到我的数据库中。这一切都很好。但我需要使它成为ajax。

如何通过 jQuery 的 .ajax 函数将这两个数组传递给 php 脚本，然后如何在 php 中处理它？

我已经尝试在我的表单上使用 .serialize ，但是它将所有用户的两个输入序列化到一个数组中，并且我无法在 php 方面正确地反序列化。

以下内容不起作用，但我会将其包含在此处以向您展示我一直在做的事情：

```
function updateOnCourt() {             
    var thearray = $('#sub-form').serialize();
    $.ajax({
      url: 'sub-update.php',
      method: 'POST',
      data: thearray,
      success: function() {
        alert('Success: '+thearray);
      }
    });
  } 
```

然后在我的 PHP 脚本中：

```
<?php 
$size = count($_POST['thearray']);
$finally = json_decode($_POST['thearray'], true);

// start a loop in order to update each record
$i = 1;

while ($i < ($size+1)) {

// define each variable
$pid = $finally[$i];
$playing = $finally[$i];

$query = "UPDATE players SET 
    on_court = '{$playing}'
WHERE id = {$pid}";

mysql_query($query, $connection);

$i = $i + 1;

} ?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:13:54.063

`thearray`只是javascript中的一个变量名，所以没有`$_POST['thearray']`，并且数据不是作为JSON发送的，所以不需要使用`json_decode`

您想要访问`name`表单控件中的属性：

试试看`$_POST['sampleA']`。

查看文档`serialize()`会发现它以相同的格式发送数据，就好像没有 AJAX 提交表单一样

API 参考：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# sql - 无法绑定多部分标识符 - 子查询

> ID：14656582
> 
> 赞同：17
> 
> 时间：2013-02-01T23:05:55.250
> 
> 标签：sql, sql-server-2008, join, subquery, inner-join

架构：

```
create table TableA (A1 int)
create table TableB (B1 int, B2 int)
create table TableC (C1 int) 
```

有问题的查询：

```
SELECT * 
FROM TableA a
INNER JOIN TableB b ON b.B1=a.A1
INNER JOIN (SELECT TOP 1 * 
            FROM TableC c
            WHERE c.C1=b.B1 ORDER BY c.C1) d ON d.C2=b.B2
INNER JOIN OtherTable ON OtherTable.Foo=d.C1 
```

构建此架构并在 SQL Server 2008 下的 SQLFiddle 中运行查询会导致：

```
The multi-part identifier "b.B1" could not be bound.: SELECT * FROM TableA a INNER JOIN TableB b ON b.B1=a.A1 INNER JOIN (SELECT TOP 1 * FROM TableC c WHERE c.C1=b.B1 ORDER BY c.C1) d ON d.C2=b.B2 
```

**对子查询使用 CROSS APPLY 而不是 INNER JOIN 可解决此问题**

有什么问题？

编辑：我添加了“TOP 1”，它是真实查询的一部分，它是问题的相关部分。

Edit2：有关该问题的更多信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T23:11:39.953

您不能从另一个连接子查询中的连接访问别名。您将需要使用以下连接两个列/表的子查询：

```
SELECT * 
FROM TableA a
INNER JOIN TableB b 
  ON b.B1=a.A1
INNER JOIN 
(
  SELECT * 
  FROM TableC c
) d 
  ON d.C2=b.B2
  AND d.C1 = b.B1 
```

或者这可以写成：

```
SELECT * 
FROM TableA a
INNER JOIN TableB b 
  ON b.B1=a.A1
INNER JOIN TableC c
  ON c.C2=b.B2
  AND c.C1 = b.B1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:11:48.273

您不能将 from`JOIN`子句引用到 JOIN 的另一部分。

改用这个。

```
SELECT * 
FROM TableA a
INNER JOIN TableB b
    ON b.B1=a.A1
INNER JOIN TableC c
    ON d.C2=b.B2
      AND c.C1=b.B1 
```

**已编辑**

```
SELECT * 
FROM TableA a
INNER JOIN TableB b ON b.B1=a.A1
WHERE b.B2 = (SELECT TOP 1 c.C2 
               FROM TableC c
               WHERE c.C1=b.B1 ORDER BY c.C1) 
```

为了在 JOIN-s 中进一步使用，`TableC`您可以使用它。

```
SELECT * 
FROM TableA a
    INNER JOIN TableB b
        ON b.B1=a.A1
    INNER JOIN
       (
           SELECT
               ROW_NUMBER() OVER (PARTITION BY C1 ORDER BY C2) RN,
               C2
               --, other columns fromTableC if needed
           FROM TableC
       ) CC
     ON b.B2 = CC.C2
       AND CC.RN = 1 
```

# php - Imagick PDF 第一个站点

> ID：14656584
> 
> 赞同：0
> 
> 时间：2013-02-01T23:06:01.083
> 
> 标签：php, imagick

如果我上传超过 1 页的 pdf 文件，它将显示最后一页。我应该在编码中进行哪些更改以仅显示第一页？这是我用来转换的代码。

```
$impdf = new imagick( DATA_SERVER_PATH."/uploads/".$this->uploadFileDirectory.$itemID."/".$_POST['main_file'] )';
$impdf->setImageFormat('jpeg');
$impdf->writeImage(DATA_SERVER_PATH."/uploads/".$this->uploadFileDirectory.$itemID."/preview.jpg"); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:34:59.473

```
$impdf = new imagick( DATA_SERVER_PATH."/uploads/".$this->uploadFileDirectory.$itemID."/".$_POST['main_file']."[0]" );
$impdf->setImageFormat('jpeg');
$impdf->writeImage(DATA_SERVER_PATH."/uploads/".$this->uploadFileDirectory.$itemID."/preview.jpg"); 
```

在文件名末尾添加 [0]，[0] 是页码，因此 [4] 将使用第 5 页。

更易读的例子：

```
$file = 'filename.pdf['.$pagenumber.']';
$image = new Imagick($file);
$image->setImageFormat( "jpg" );
$image->writeImage('imagefilename.jpg'); 
```

# actionscript-3 - AS3 UILoader 注册点，所有照片不在中心

> ID：14656586
> 
> 赞同：0
> 
> 时间：2013-02-01T23:06:08.647
> 
> 标签：actionscript-3, flash, web, dreamweaver, flash-cs5

**我有一些问题让我的照片在舞台上居中，我使用 Flash cs5 as3 UILoader，照片大小都是不同的，所以我尝试使用自由变换工具将 UILoader 注册点移动到顶部的中心，但是是根本不改变任何东西。我不想检查属性中的 ScaleContent，使这些照片质量很差。1000px x 700px 舞台高度，照片应为 400px 高。我该怎么办？*

```
 import flash.utils.Timer;
      import flash.events.TimerEvent;
      import flash.events.MouseEvent;
      import flash.events.Event;
      import fl.containers.UILoader;
      import flash.text.TextField;
      import flash.display.SimpleButton;
      import fl.transitions.Tween;
      import fl.transitions.TweenEvent;
      import fl.transitions.easing.*;
      stage.colorCorrection = ColorCorrection.ON;
      var myImage:String = "smallWildlife/00.jpg";
      var request:URLRequest = new URLRequest(myImage);
      uiLoader.addEventListener(Event.COMPLETE, completeHandler);
      uiLoader.addEventListener(ProgressEvent.PROGRESS, progressHandler);
      uiLoader.load(request);

      function progressHandler(event:ProgressEvent):void
      {

status_txt.text = "Percentage Loaded:" + Math.round(event.target.percentLoaded);
       }

       function completeHandler(event:Event):void
       {   
       uiLoader.x = stage.stageWidth/6 - uiLoader.content.width/6;
       uiLoader.y = stage.stageHeight/100 - uiLoader.content.height/700;
       new Tween(uiLoader,"rotationX",Elastic.easeOut,90,0,4,true);
       }

        next_btn.addEventListener(MouseEvent.CLICK, nextImage);

       //variable is a container that holds some value...;
       var imageNumber:Number = 0;

      function checkNumber():void
      {
next_btn.visible = true;
back_btn.visible = true;
//If the imageNumber is = 58, then do something...
if (imageNumber == 58)
{
    trace(imageNumber);
    next_btn.visible = false;
}
//if the imageNumber is = 1, then don't show the back button
if (imageNumber == 0)
 {
    trace(imageNumber);
        back_btn.visible = false;
  }
        }
       checkNumber();

       function nextImage(evtObj:MouseEvent):void
       {
//Adding to the current value +1
imageNumber++;
uiLoader.source = "smallWildlife/0" + imageNumber + ".jpg";
checkNumber();
      }

       back_btn.addEventListener(MouseEvent.CLICK, backImage);

      function backImage(evtObj:MouseEvent):void
      {
//Subtract 1 from the current value
imageNumber--;
uiLoader.source = "smallWildlife/0" + imageNumber + ".jpg";
checkNumber();
      }

      stop(); 
```

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:55:25.207

注册点是编辑影片剪辑时出现的小十字准线，而不是转换工具的锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:43:12.183

尝试改变这个

```
function completeHandler(event:Event):void
{   
    uiLoader.x = stage.stageWidth/6 - uiLoader.content.width/6;
    uiLoader.y = stage.stageHeight/100 - uiLoader.content.height/700;
    new Tween(uiLoader,"rotationX",Elastic.easeOut,90,0,4,true);
} 
```

对此

```
function completeHandler(event:Event):void
{   
    var spr = new Sprite();

    // Place spr anywhere on the stage
    spr.x = stage.stageWidth / 6 - uiLoader.content.width / 6;
    spr.y = stage.stageHeight / 100 - uiLoader.content.height / 700;
    spr.addChild( uiLoader );

    addChild( spr );

    // Center uiLoader in spr
    uiLoader.x = - uiLoader.width / 2;
    uiLoader.y = - uiLoader.height / 2;

    new Tween( spr, "rotationX", Elastic.easeOut, 90, 0, 4, true );
} 
```

# sharepoint - 如何向 Active Directory 组提供对文档库中文件夹的访问权限

> ID：14656588
> 
> 赞同：0
> 
> 时间：2013-02-01T23:06:13.373
> 
> 标签：sharepoint, sharepoint-2010

我们需要向文档库中的文件夹提供对 AD 组的贡献访问权限，而无需将 AD 添加到文档库级别。如果我们将 AD 组添加到文档库级别，那么我们需要破坏每个文件夹的安全性，因为我们只需要 AD 组在层次结构的第 3 级有一个文件夹。

是否可以直接向文件夹提供对 AD 组/用户的访问权限？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T18:24:07.587

是的，您可以轻松地将权限应用于文档库的文件夹。甚至您也可以对文档库应用权限。

首先，创建您的文档库并在此文档库下添加一个文件夹。然后单击文件夹/项目左侧的复选框。您现在可以在顶部功能区上看到“文档权限”按钮。单击“文档权限”按钮。您必须停止继承权限。您可以通过单击顶部功能区中的“停止继承权限”按钮来执行此操作。现在，您必须删除所有权限。然后，单击“授予权限”按钮并添加权限。

我想它会对你有所帮助。谢谢

# android-listview - listview 空视图从不显示

> ID：14656589
> 
> 赞同：0
> 
> 时间：2013-02-01T23:06:12.767
> 
> 标签：android-listview

我将 SherlockListActivity 与 ListView 一起使用。当列表中没有项目时，我想显示 no_data 字符串。我使用@android:id/empty 遵循了几个示例，但它们对我不起作用。“空”文本视图永远不可见。任何帮助表示赞赏。这是我的 layout.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<ListView android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
<TextView android:id="@android:id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/no_data"/>
</LinearLayout> 
```

这就是我的列表视图在 MainActivity Java 文件中的填充方式

```
private void fillData()
{     
    // Get cursor of name, bal, date for account list
    Cursor cursor = db.getCursor();
    startManagingCursor(cursor);

   // THE DESIRED COLUMNS TO BE BOUND
   String[] columns = new String[] { "accounts.name", "accounts.bal", "accounts.ot"};

   // THE XML DEFINED VIEWS WHICH THE DATA WILL BE BOUND TO
   int[] to = new int[] { R.id.tvName,R.id.tvBal, R.id.tvDate };

   // CREATE THE ADAPTER USING THE CURSOR POINTING TO THE DESIRED DATA AS WELL AS THE LAYOUT     INFORMATION
   SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, R.layout.main_list_item, cursor, columns, to);

  // SET THIS ADAPTER AS YOUR LISTACTIVITY'S ADAPTER
  this.setListAdapter(mAdapter);

} 
```

这就是我在单独的 Java 类中创建光标的方式

```
 // Getting All accounts
    public Cursor getCursor() {
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.query(TABLE_ACCOUNTS, new String[] {
                    KEY_AID,     // Account ID Integer
                    KEY_NAME,    // Name of account 
                    KEY_BAL,     // Balance
                    KEY_ADATE,   // Occurrence time 

                    }, 
                    KEY_TYPE + "=?",
                    new String[] {"2"}, null, null, null);

            // return account list
            return cursor; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:22:19.380

我需要在我的 ListActivity 的 OnCreate 方法中添加以下内容。

```
setContentView(R.layout.activity_main); 
```

我通过回到记事本示例并将其与我的项目进行密切比较发现了这一点。即使我忘记设置 layout.xml，listview 本身仍然有效。我相信这是因为默认的 ListActivity 布局是 id 为 android:id/list 的单个 listview。现在使用了正确的 layout.xml，带有 id @android:id/empty 的文本视图也可以正常工作。抱歉，因为我在发布问题时没有包含 MainActivity 的 OnCreate 方法，这就是问题所在。

# java - 使用 javax.xml.validation.Validator 执行 XML 验证时 HTTP Web 服务线程之间的阻塞

> ID：14656590
> 
> 赞同：0
> 
> 时间：2013-02-01T23:06:13.967
> 
> 标签：java, xml, schema, validation

我的简单 Web 服务接收 XML 文档的 Zip 文件，我尝试使用 XSD 模式文件验证 XML。下面是代码片段

```
 Schema schema = BlahSchemaFactory.newSchema("Blah.xsd");
        Validator validator = schema.newValidator();
        BlahErrorHandler eh = new BlahErrorHandler();
        validator.setErrorHandler(eh);

        ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(zipFileContentAsBytes));
        zis.getNextEntry(); 

        Source xmlSource = new StreamSource(zis);
        validator.validate(xmlSource); 
```

BlahSchemaFactory是一个单例，每个传递的 XSD 文件只帮助创建一次 Schema 对象**。**现在，当多个 HTTP 线程通过上面的代码传递时，就会出现问题。他们在 validate() 方法的代码中互相阻塞。

以下是从 HP 诊断工具获得的堆栈跟踪。

```
 "blah_thread_77" Id=472 in BLOCKED on lock=org.apache.xerces.impl.xpath.regex.RegularExpression@3c9d97f9
         owned by d1_thread_237 Id=21648
        at org.apache.xerces.impl.xpath.regex.RegularExpression.matches(Unknown Source)
        at org.apache.xerces.impl.xpath.regex.RegularExpression.matches(Unknown Source)
        at org.apache.xerces.impl.dv.xs.XSSimpleTypeDecl.getActualValue(Unknown Source)
        at org.apache.xerces.impl.dv.xs.XSSimpleTypeDecl.validate(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.processOneAttribute(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.processAttributes(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
        at org.apache.xerces.impl.xs.XMLSchemaValidator.emptyElement(Unknown Source)
        at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.jaxp.validation.StreamValidatorHelper.validate(Unknown Source)
        at org.apache.xerces.jaxp.validation.ValidatorImpl.validate(Unknown Source)
        at javax.xml.validation.Validator.validate(Validator.java:124)
        at BlahPackage.BlahClass.uploadSaveFileRecord(BlahRecord.java:77)
        at sun.reflect.GeneratedMethodAccessor210.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.jboss.ws.common.invocation.AbstractInvocationHandlerJSE.invoke(AbstractInvocationHandlerJSE.java:111)
        at org.jboss.wsf.stack.cxf.JBossWSInvoker._invokeInternal(JBossWSInvoker.java:181)
        at org.jboss.wsf.stack.cxf.JBossWSInvoker.invoke(JBossWSInvoker.java:127)
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) 
```

**问题：**有什么办法可以避免线程阻塞？请建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:58:50.423

下面是在尝试使用 XSD 模式验证 XML 时解决线程阻塞问题的代码片段。你需要 ：

1.  确保为每个线程创建一个新架构
2.  确保在 SchemaFactory 上调用 newSchema 时同步调用（如图所示）
3.  而不是调用 BlahObject.class.getClassLoader().getResource(schemaFileOnClassPath) 使用某种类型的 Singleton 只获取 XSD 的 URL 一次，否则您将在类加载器尝试查找资源时遇到线程阻塞（已确定使用 HP 诊断工具）

    ```
     SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        URL schemaURL = BlahSchemaSingleton.getSchemaURL("Blah.xsd");
        Schema schema = null; 

        synchronized(schemaFactory) {
            schema = schemaFactory.newSchema(schemaURL);
        }

        Validator validator = schema.newValidator();
        BlahErrorHandler eh = new BlahErrorHandler();
        validator.setErrorHandler(eh);

        ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(zipFileContentAsBytes));
        zis.getNextEntry(); 

        Source xmlSource = new StreamSource(zis);
        validator.validate(xmlSource); 
    ```

# d3.js - DateTime 解析时返回 null

> ID：14656591
> 
> 赞同：1
> 
> 时间：2013-02-01T23:06:15.357
> 
> 标签：d3.js

我试图在我的折线图的 x 轴上绘制日期/时间，但没有成功。

我已经尝试了 D3 文档中 time.format 的所有变体，但日期/时间仍然返回 null：

```
 dateTimeTaken: null
    reading: "14.5" 
```

正在显示 x 轴和 y 轴，但不是实际的图形。

[https://gist.github.com/5fc4cd5f41a6ddf2df23](https://gist.github.com/5fc4cd5f41a6ddf2df23)

我知道我解析日期的方式有问题，但我所做的一切似乎都不起作用 - 有人能帮忙吗？

**更新：** 这种格式有效 - d3.time.format("%Y-%m-%d %H:%M:%S").parse，但现在在图表上显示了一条附加线，如下图所示。

![在此处输入图像描述](../Images/46a70fa5778a7a918f2051dd9bc5622f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:07:36.900

将我的 PHP 代码中的 select 语句更改为按 dateTimeTaken 分组 - 不是额外的行 - 数据只是没有按任何顺序排列。

# sbt - 如何在 SBT 中定义另一个编译范围？

> ID：14656592
> 
> 赞同：5
> 
> 时间：2013-02-01T23:06:31.037
> 
> 标签：sbt

默认情况下，SBT分别在`src/main`和和`src/tests`下编译源代码。我想定义另一个名为*core*的组，我可以将其放入或将其编译到单独的类路径中。我该怎么做呢？`target/scala-[version]/classes``target/scala-[version]/test-classes`*`src/core/java``src/core/scala`*

 *我的动机：我想拥有单独的类文件组，因为我想在开发过程中重新编译和重新加载新的应用程序代码，而不需要为正在运行的应用程序重新启动 JVM 进程。因此核心类将在应用程序启动时加载，并且它们将使用自定义类加载器从 src/main 加载其他所有内容。后面的那些类将是可重新加载的。我需要这样做，因为我正在编写一个通过 JNI 加载软件乐器的音乐程序，这需要很长时间才能加载。在开发过程中重新启动应用程序会浪费太多时间。

我主要需要分离类文件。如果我要制作 jar，我会想要 myapp-core.jar 和 myapp-main.jar，但这并不重要，因为这比最终产品更适用于开发。

第一次尝试：

```
val Core = config("core")
...
classDirectory in Core <<= crossTarget(t => file(t.getAbsolutePath + "core-classes")) 
```

给出这个错误：

```
Reference to undefined setting: 
{.}/*:cross-target from {.}/core:class-directory
    Did you mean *:cross-target ? 
```

我现在去阅读有关范围的内容...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T17:30:49.253

sbt 文档中有一个[高级配置示例](http://www.scala-sbt.org/release/docs/Examples/Advanced-Configurations-Example.html)，显示了自定义编译配置的许多方面。

一个基本的例子是：

```
object MyBuild extends Build {

  lazy val root = Project(...,
    settings = Defaults.defaultSettings ++ coreSettings
  )

  // Declare the custom configuration.
  lazy val Core = config("core")

  lazy val coreSettings: Seq[Setting[_]] = 
     // Add the src/core/scala/ compilation configuration.
     // This configures sources, classpaths, output directories, REPL, scalac, ...
     inConfig(Core)(Defaults.configSettings) ++ Seq(
        // example dependency just for Core
        libraryDependencies += "org.example" % "demo" % "1.0" % Core,
        // register the custom core configuration
        ivyConfigurations += Core
     )
} 
```

`fullClasspath in Core`通过任务访问编译的核心类路径。*

# python - 如何在 Maya 2013 中更改 python 版本？

> ID：14656593
> 
> 赞同：3
> 
> 时间：2013-02-01T23:06:38.033
> 
> 标签：python, scripting, swig, maya

我的目标是在 Maya 2013 中编写一个 python 脚本，该脚本使用一个使用 Python 2.7 编译的 SWIG 包装的 pyd 库。我无法在 Python 2.6.4 中重建 pyd，这是 Maya 绑定的版本。玛雅当然会给出这个错误

```
Module use of python27.dll conflicts with this version of Python. # 
```

如何更改它以使 Maya 使用 Python 2.7？我已经尝试修改通常的（PYTHON_PATH、PYTHONHOME 等）环境变量，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:10:12.843

Maya 不使用您安装的 Python，而是使用它自己的 2.6 版本的 Python，该版本包含在软件中。

但是，可以通过设置 PYTHONHOME 环境变量来改变它。以下文章解释了如何执行此操作以及如何检查其设置是否正确：

[在 Maya 中选择 Python](http://acaciaecho.wordpress.com/2011/01/11/choose-python-inside-maya/)

基本上，这篇文章可以总结为3个步骤：

1.  创建一个环境变量 PYTHONHOME 并将其设置为指向您想要的 Python 版本（例如 C:\Python27）。
2.  从“MayaDirectory”\Python\Lib\site-packages 复制文件（例如 C:\Program Files (x86)\Autodesk\Maya2013\Python\Lib\site-packages）并将它们粘贴到“PYTHONHOME”\Lib\site -包（例如 C:\Python27\Lib\site-packages）。
3.  重新启动 Maya 并查看是否一切正常！您可以通过运行（从 Maya 的“脚本编辑器”）检查正在使用的 Python：

    ```
    import sys
    print sys.prefix 
    ```

特别注意第二步，文章强调了如何在更改环境变量后使 Maya 的库正常工作。请注意，如果您没有正确完成最后一步，打印语句可能会开始出现在您的“输出窗口”而不是“脚本编辑器”中。

我已经测试了链接文章的步骤，一切正常。版本更改适用于 Python 2.6 和 Python 2.7！但是，我还没有对所有内容进行广泛的测试，以了解 Python API 的所有方面是否适用于 2.7。

# java - 如何在 JCIFS 中使用多个扩展名作为通配符设置 DosFileFilter？

> ID：14656594
> 
> 赞同：0
> 
> 时间：2013-02-01T23:06:40.147
> 
> 标签：java, jcifs

为了使用网络共享文件夹中的一些文件，我将迁移到 JCIFS。到目前为止，我已经做了以下测试来列出我需要的文件（取自[这个例子](https://github.com/slide/jcifs/blob/master/examples/LargeListFiles.java)）

```
public class ListDirectoryContent extends DosFileFilter {

    int count = 0;

    public ListDirectoryContent() {
        super("*.txt", 0xFFFF);
    }
    public ListDirectoryContent(String wildcard, int attributes) {
        super(wildcard, attributes);
    }

    public boolean accept(SmbFile file) throws SmbException {
        System.out.print( " " + file.getName() );
        count++;

        return (file.getAttributes() & attributes) != 0;
    }

    public static void main( String[] argv ) throws Exception {

        NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("DOMAIN","myuser","A good password, yes sir!");
        SmbFile file = new SmbFile( "smb://networkResource/sharedFolder/Files/SubFolderOne/", auth);
        ListDirectoryContent llf = new ListDirectoryContent();

        long t1 = System.currentTimeMillis();
        SmbFile[] pepe = file.listFiles(llf);
        long t2 = System.currentTimeMillis() - t1;

        System.out.println();
        System.out.println( llf.count + " files in " + t2 + "ms" );

        System.out.println();
        System.out.println( pepe.length + " SmbFiles in " + t2 + "ms" );
    }
} 
```

到目前为止，它适用于**一个**扩展通配符。如何扩大 dosfilefilter 以检查一组扩展？（就像 commons.io.FileUtils 一样）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T12:13:05.863

我编写了这个基本的 SmbFilenameFilter 以在文件名中使用通配符。希望这可以帮助！

```
private static class WildcardFilenameFilter implements SmbFilenameFilter {
    private static final String DEFAULT_WIDLCARD = "*";

    private final String wildcard = DEFAULT_WIDLCARD;
    private final String regex;

    public WildcardFilenameFilter(String filename) {
        regex = createRegexPattern(filename);
    }

    @Override
    public boolean accept(SmbFile dir, String name) throws SmbException {
        return name.matches(regex);
    }

    private String createRegexPattern(String filename) {
        return filename.replace(".", "\\.").replace(wildcard, ".+");
    }
} 
```

# linq - 使用 PredicateBuilder 有没有办法从可变长度的字段名称列表中构建谓词？

> ID：14656600
> 
> 赞同：4
> 
> 时间：2013-02-01T23:06:55.730
> 
> 标签：linq, entity-framework, predicatebuilder

我有一个包含可变数量的字段名称的列表。我想通过这个列表循环并创建一个谓词来过滤所有在字段中具有值的记录。

```
foreach (var field in FieldNames)
            {
            myPredicate= myPredicate.And(m => m.*field*!=null );                    
} 
```

我不知道该怎么做。有什么建议么？

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T23:50:49.863

如果您在编译时知道属性是什么，则只能编写 lambda 表达式。由于您显然不知道要检查的字段是什么，因此您必须手动创建表达式。

你需要一个像这样的辅助函数来生成表达式：

```
public Expression<Func<T, bool>> GenerateFieldNotNullExpression<T>(string fieldName)
{
    var parameter = Expression.Parameter(typeof(T), "m");
    // m
    var fieldAccess = Expression.PropertyOrField(parameter, fieldName);
    // m.[fieldName]
    var nullValue = Expression.Constant(null);
    // null
    var body = Expression.NotEqual(fieldAccess, nullValue);
    // m.[fieldName] != null
    var expr = Expression.Lambda<Func<T, bool>>(body, parameter);
    // m => m.[fieldName] != null
    return expr;
} 
```

然后使用它来创建你的表达式并将它们插入：

```
var predicate = PredicateBuilder.True<MyType>();
foreach (var fieldName in fieldNames)
{
    var expr = GenerateFieldNotNullExpression<MyType>(fieldName);
    predicate = predicate.And(expr);
} 
```

# windows - `SetComplete` 反模式在 Windows 7 上停止工作

> ID：14656605
> 
> 赞同：1
> 
> 时间：2013-02-01T23:07:21.363
> 
> 标签：windows, windows-7, transactions, timeout, com+

以下代码库在 Windows Server、Windows XP 上工作了多年，但在 Windows 7 上变得不可靠。

两个 COM+ 组件，调用者和被调用者，共享相同的事务上下文并参与间接递归。调用者最初多次调用被调用者，而被调用者总是最终调用`SetComplete`或`SetAbort`在返回之前调用（不管这是调用者->被调用者调用，还是调用者->被调用者->调用者->被调用者）。

我看到的是被调用者的第二次调用中的第一个 SQL 查询出错了：

> 分布式事务完成。在新事务或 NULL 事务中登记此会话

在某些配置中，事务非常慢，并且很容易超过 60 秒的持续时间。

该错误看起来像是事务超时，或者可能`SetComplete`是在设置完成位的嫌疑人之后停用了组件。但是，它不是事务的根组件，并且[该文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681590%28v=vs.85%29.aspx)明确指出“*但是，除非调用 SetAbort 的对象是事务的根，否则即使没有任何东西可以将其从最终中止中拯救出来，事务也会继续运行。* ” [该文档](http://msdn.microsoft.com/en-us/library/yfktbhxc%28v=vs.80%29.aspx)说“*在事务的根对象停用之前，事务既不会提交也不会中止。* ”所以我不确定是否`SetComplete`会以某种方式导致错误。

在安装时，所有组件的组件级别的事务超时设置为 1800 秒，全局事务超时设置为 60 秒。组件主要使用 ADO（包括断开连接的结果集）或 .NET`SqlClient`进行数据库访问。

我不明白我所看到的几个方面。

1.  如果同一组件的多个实例在同一事务中同时处于活动状态，是否会`SetComplete`导致除一个调用之外的任何实例提前停用`SetComplete`，或影响事务超时的应用规则？
2.  Windows 7 停用组件的方式是否与其他几个操作系统不同（更快）？是否有任何配置可以控制此行为。
3.  Windows 7 是否有可能忽略组件级事务超时？[很久以前](http://support.microsoft.com/kb/307861)就有这样的缺陷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:09:06.137

我很乐意将赏金奖励给任何对所提出的问题提供任何好的见解的人。然而，我们最初的问题被追查到了这一点。

我们发现一个特定的非常长时间运行的事务几乎可以保证花费略多于 60 秒（由于不幸的同步和重试逻辑）。与代码库的其余部分不同，它的事务上下文是手动创建的，并且在 Windows 7 上继承了全局事务超时，即使在所有组件中执行时，所有这些都将声明性事务时间设置为 1800 秒。为什么这仍然适用于其他操作系统还不是很清楚，但我们当然要摆脱这种长期运行的事务场景作为一个整体。

这就是上面“手动创建”的意思。

```
_COM_SMARTPTR_TYPEDEF(ITransactionContextEx, __uuidof(ITransactionContextEx));
ITransactionContextExPtr pTransContext;
TESTHR(pTransContext.CreateInstance(CLSID_TransactionContextEx));

ISomeSvcsPtr pSomeSvcs;

pTransContext->CreateInstance(__uuidof(PSSomeSvcs), 
                              ISomeSvcsPtr::GetIID(), 
                              reinterpret_cast<void **>(&pSomeSvcs)); 
```

# android - 从第一个片段调用 viewpager 中的第三个片段

> ID：14656609
> 
> 赞同：-1
> 
> 时间：2013-02-01T23:07:35.947
> 
> 标签：android, fragment

我有七个通过 fragmentpageradapter 实现的片段。

我可以成功地从第一个片段调用第二个片段，但是当从第一个片段调用第三个或第四个片段时，我在使用该片段函数时得到 NullPointerExcpetion。

我只能连续片段，而不是其他片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:09:22.197

问题是**你不能**。Pager Adapter 一次只加载 3 个片段 - 其余的不会在内存中等待您。

因此，您必须存储更改并在以后更改当前片段时应用它们。

# c++ - Xlib XSendEvent 单击事件在 Ubuntu 12.04 上的某些窗口内不起作用

> ID：14656615
> 
> 赞同：1
> 
> 时间：2013-02-01T23:08:28.387
> 
> 标签：c++, qt, ubuntu-12.04, xlib, ubuntu-unity

我正在尝试在 ubuntu 12.04 中使用 xlib 发送鼠标单击事件，当我在桌面栏图标中单击时所有工作正常，当我在每个窗口的标题栏中单击时工作（关闭、最小化、最大化窗口）但是在某些窗口中单击内部不起作用，仅在我的 qt 创建器窗口中起作用，但是当我单击时，例如，主文件夹图标然后将鼠标移动到文件夹内，我无法在文件夹或菜单栏中进行任何单击, 仅适用于 windows 的标题栏。

也许是 Ubuntu Unity 桌面的错误？这是我在互联网上找到的代码：

```
#include <unistd.h>

#include <X11/Xlib.h>
#include <X11/Xutil.h>

void mouseClick(int button)
{
    Display *display = XOpenDisplay(NULL);

    XEvent event;

    if(display == NULL)
    {
        fprintf(stderr, "Errore nell'apertura del Display !!!\n");
        exit(EXIT_FAILURE);
    }

    memset(&event, 0x00, sizeof(event));

    event.type = ButtonPress;
    event.xbutton.button = button;
    event.xbutton.same_screen = True;

    XQueryPointer(display, RootWindow(display, DefaultScreen(display)), &event.xbutton.root, &event.xbutton.window, &event.xbutton.x_root, &event.xbutton.y_root, &event.xbutton.x, &event.xbutton.y, &event.xbutton.state);

    event.xbutton.subwindow = event.xbutton.window;

    while(event.xbutton.subwindow)
    {
        event.xbutton.window = event.xbutton.subwindow;

        XQueryPointer(display, event.xbutton.window, &event.xbutton.root, &event.xbutton.subwindow, &event.xbutton.x_root, &event.xbutton.y_root, &event.xbutton.x, &event.xbutton.y, &event.xbutton.state);
    }

    if(XSendEvent(display, PointerWindow, True, 0xfff, &event) == 0) fprintf(stderr, "Errore nell'invio dell'evento !!!\n");

    XFlush(display);

    usleep(100000);

    event.type = ButtonRelease;
    event.xbutton.state = 0x100;

    if(XSendEvent(display, PointerWindow, True, 0xfff, &event) == 0) fprintf(stderr, "Errore nell'invio dell'evento !!!\n");

    XFlush(display);

    XCloseDisplay(display);
} 
```

我的 ubuntu 在 vmware 播放器中，我使用 Xlib 的 XWarpPointer 移动光标，谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-18T09:51:46.513

我有同样的问题，我只是使用 Xext 和 Xtest 扩展解决了它。

```
#include <X11/extensions/XTest.h>

int main(int argc, char ** argv)
{
    XEvent event;
    Display *dpy = XOpenDisplay (NULL);

    /* Fake the mouse button Press and Release events */
    XTestFakeButtonEvent (dpy, 1, True,  CurrentTime);
    XTestFakeButtonEvent (dpy, 1, False, CurrentTime);
    XCloseDisplay (dpy);
    return 0;
} 
```

# java - 单击时让玩家移动到我的鼠标？

> ID：14656616
> 
> 赞同：1
> 
> 时间：2013-02-01T23:08:37.853
> 
> 标签：java, game-engine, lwjgl

我怎样才能让我的玩家在点击鼠标时移动到鼠标上（就像在魔兽争霸中一样）？

到目前为止，我已经尝试过：

```
if (Mouse.isButtonDown(0)) {

    if (X < Mouse.getX()) {
        X += Speed;
    }
    if (X > Mouse.getX()) {
        X -= Speed;
    }
    if (Y < Mouse.getY()) { 
        Y += Speed;
    }
    if (Y > Mouse.getY()) {
        Y -= Speed;
    }
} 
```

但这只有在我按住鼠标时才符合我的要求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:35:16.223

只需存储最后一次点击的位置，让玩家朝那个方向移动。

将这些字段添加到您的播放器类：

```
int targetX;
int targetY; 
```

在您的更新方法中存储新目标并应用移动：

```
// A new target is selected
if (Mouse.isButtonDown(0)) {

    targetX = Mouse.getX();
    targetY = Mouse.getY();
}

// Player is not standing on the target
if (targetX != X || targetY != Y) {

    // Get the vector between the player and the target
    int pathX = targetX - X;
    int pathY = targetY - Y;

    // Calculate the unit vector of the path
    double distance = Math.sqrt(pathX * pathX + pathY * pathY);
    double directionX = pathX / distance;
    double directionY = pathY / distance;

    // Calculate the actual walk amount
    double movementX = directionX * speed;
    double movementY = directionY * speed;

    // Move the player
    X = (int)movementX;
    Y = (int)movementY;
} 
```

# python - HTTPConnection 超时未按预期启动

> ID：14656617
> 
> 赞同：0
> 
> 时间：2013-02-01T23:08:39.567
> 
> 标签：python, http, timeout, httpconnection

我有一个 Python 脚本，它递归地将数据发送到中央服务器。路由器将进入睡眠状态，直到有新数据排队等待传输。唤醒过程大约需要 20 秒左右，因此我尝试如下建立连接：

```
TIMEOUT = 100
def connect():
    return HTTPConnection(HOST, timeout=TIMEOUT)

connection = connect() 
```

现在，我希望函数 HTTPConnection() 仅在超时过期后才返回，这不是它正在做的事情。我的函数在 3 秒左右后返回并给我一个连接错误。这是为什么？我需要编写自己的超时循环吗？

谢谢你，罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:14:17.260

好吧，我最终解决问题的方法是，为了唤醒路由器，我向 8.8.8.8 发送一个超时时间很长的 ping，这将唤醒路由器并得到回复

```
def wakeup():
    subprocess.Popen(["/bin/ping", "-c2", "-w"+str(WAKETIME), PINGHOST], stdout=subprocess.PIPE).stdout.read() 
```

而且我只是在执行任何其他 http 请求之前调用此函数，因此我根本不必为增加 HTTP 超时而烦恼。

# binding - 我如何解决变化 在 CFC 内？

> ID：14656619
> 
> 赞同：1
> 
> 时间：2013-02-01T23:08:48.717
> 
> 标签：binding, coldfusion, cfc, cflocation

这篇文章解决了我遇到的问题。

[Coldfusion 8 同时执行 CFIf 和 CFElse 语句](https://stackoverflow.com/questions/9610319/coldfusion-8-doing-both-cfif-and-the-cfelse-statement)？

My`cfselect`绑定到 CFC 以动态构建其数组。好的，现在我想添加一个数组项“--New Record--”，当它被选中时，跳转`cflocation`到允许用户在源表中添加新记录的表单。我可以在列表中看到“--New Record--”条目`cfselect`，但选择它似乎什么也没做。

但实际上，`cflocation`转到目标页面（我有 OnRequestEnd 日志证明）但目标页面的形式没有显示。

看起来这个话题在上面的讨论中没有得到解决。Ben Nadel 的博客强调了`<cflocation>`行为的变化，但我是新手，所以我不认为理解其中的含义或如何绕过功能变化。对于如何围绕这种（奇怪的）行为变化进行编码的任何帮助将不胜感激。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:46:05.333

In your cfc, change your query from something like this:

```
 SELECT  id_field, text_field
    FROM    sometables
    WHERE   ... 
```

to

```
 SELECT   -1 AS id_field, 'Add New Record' AS text_field
    FROM     some_small_table
    WHERE   ... 
    UNION
    SELECT   id_field, text_field
    FROM    sometables
    WHERE   ... 
    ORDER BY id_field 
```

That way your bind will still work and you will have your "Add New Record" selection.

Next, add an `onBlur` attribute to your `cfselect`. Have it call a javascript function that directs the user to the appropriate place if they select "Add New Record".

# javascript - JS regex exec 分隔符之间的内部字符串并检查分隔符是否损坏

> ID：14656621
> 
> 赞同：0
> 
> 时间：2013-02-01T23:09:04.230
> 
> 标签：javascript, regex

我在表单中有一个输入字段，我必须检查我们设置的某些标记。

分隔符是`{!`, `}`。

我想匹配分隔符内的所有内容。

```
content = /regex/g.exec('{!content}') 
```

此外，输入字符串中可以包含多个标记。

```
input = '{!content} {!other}';
['content','other'] = /regex/g.exec('{!content} {!other}') 
```

这是问题的第一部分，现在进入有趣的部分。

我也有某些标记分隔符没有正确结束的地方，我也必须检查那些。

在这种情况下，我想得到：

```
input = '{!content {!other} {!broken';
['{!content', 'other', '{!broken'] = /regex/g.exec(input); 
```

更新***发现 @MikeM 的原始解决方案没有捕获我想要的东西。如果起始分隔符是单独的，我需要将它们显示在结果数组中。如果起始分隔符位于字符串的末尾，则它不会捕获。

```
input = '{!content {!other} {!';
['{!content', 'other', '{!'] = /regex/g.exec(input); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:55:21.603

`{`如果内容中不允许并且`}`不允许，您可以使用以下内容

```
var m,    
    result = [],
    str = '{!content {!other} {!broken',
    reg = /\{!([^{}]+)\}|(\{![^{}]+)/g;

while ( m = reg.exec( str ) ) {
    result.push( m[1] || m[2] );
}

console.log( result );   // [ "{!content ", "other", "{!broken" ] 
```

但是，它会抓住未封闭内容之后的空间。

更新：

要在不包含任何前导或尾随空格的情况下捕获内容，您可以使用以下内容 - 为了清楚起见，以较长的形式编写。

```
var m,    
    result = [],
    str = '{!content {!other} {!broken  {!    broken {! content }',
    reg = /\{!\s*([^{}]+?)\s*\}|\{!\s*([^{}]+?)\s*(?=\{|$)/g;

m = reg.exec( str );

while ( m != null ) {   

    if ( m[1] != null ) {
        result.push( m[1] );
    } else {  // m[2] cannot be null
        result.push( '{!' + m[2] );
    }
    m = reg.exec( str );
}

console.log( result );   
// [ "{!content", "other", "{!broken", "content", "{!broken", "content" ] 
```

有关更多信息`exec`，请参阅[MDN 执行](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:11:44.050

返回匹配数组：

```
(str.match(/\{\!.*?.(?=[\{\}])|\{\!.+?$/g)||[]).map(function(m){return m.substring(2);}); 
```

*   `(_.match(...)||[])`是成语。如果没有找到匹配项，则Match 返回`null`，但通常更方便的是获取一个空数组。`||[]`解决这个问题。

*   正则表达式`{!`以非贪婪的方式查找和终止符之间的匹配。也就是说，它正在`}`寻找在`{!`. 我们还必须容忍遇到不匹配的左大括号`{`和行尾，并尽可能匹配地传递这些内容。

    ![在此处输入图像描述](../Images/d31eec8b330ece81690d33438b7fd429.png)

*   上面的匹配总是以`{!`但没有终止分隔符开始。剩下要做的就是将其剥离，这样我们就可以`map`将数组转换为`substring(2)`. 如果你想在前后去掉空格，你可以做这个`substring(2).trim()`.

# excel - 选中复选框时用未来日期填充 Excel 字段

> ID：14656622
> 
> 赞同：0
> 
> 时间：2013-02-01T23:09:09.720
> 
> 标签：excel, vba

在选中复选框后，我正在使用以下内容将今天的日期插入到 Excel 单元格中。我想更改它，以便插入即将到来的星期日的日期。我尝试使用 Weekday 函数，但语法不正确，或者这不是正确的方法。你能帮我吗？

```
Sub Process_CheckBox()

   Dim cBox As CheckBox
   Dim LRow As Integer
   Dim LRange As String

   LName = Application.Caller
   Set cBox = ActiveSheet.CheckBoxes(LName)

   'Find row that checkbox resides in
   LRow = cBox.TopLeftCell.Row
   LRange = "D" & CStr(LRow)

   'Change date in column D, if checkbox is checked
   If cBox.Value > 0 Then
      ActiveSheet.Range(LRange).Value = Date

   'Clear date in column D, if checkbox is unchecked
   Else
      ActiveSheet.Range(LRange).Value = Null
   End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:30:43.257

尝试`date + 7 - WEEKDAY(Date)+ 1`

要了解公式的含义，最好将其表示为`date-WEEKDAY(date)+1+7`。

从当前日期中减去代表该日期的星期几的 # ，它为您提供前一周最后一天的日期。然后添加 1 天以获得本周的第一天（本周日），然后再添加 7 天以获得下周日。

下周`date-WEEKDAY(date)+2+7`一，`date-WEEKDAY(date)+3`下周二，依此类推。

# regex - 什么是从文本文件中提取唯一事件的好工具（使用正则表达式）

> ID：14656625
> 
> 赞同：1
> 
> 时间：2013-02-01T23:09:17.470
> 
> 标签：regex, full-text-search

给定文件的以下内容：

```
if(Request.IN.NODE_ORG_EWO NEQ "" and not isValid("integer",Request.IN.NODE_ORG_EWO)){
    pageError.found = true;
    ArrayAppend(pageError.errorlist,"EWO must be numeric: #Request.IN.NODE_ORG_EWO#");
};
if(len(trim(Request.IN.ORIG_SET_DTE)) and not isdate(Request.IN.ORIG_SET_DTE)){
    pageError.found = true;
    ArrayAppend(pageError.errorlist,"set date must be a valid date: #Request.IN.ORIG_SET_DTE#");
}; 
```

...我可以使用什么工具来提取唯一的（ColdFusion）变量名称“request.in”。期望的结果是

```
Request.IN.ORIG_SET_DTE
Request.IN.NODE_ORG_EWO 
```

我可以打开文件并找到所有匹配项

> 请求.IN.\w+

但我想找到存在的*独特*组合并提取它们。

我在 Windows 上。命令行 + 管道，或通过 RegEx 搜索的应用程序（例如 NotePad++）都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:17:24.427

在基于 UNIX 的系统上，您可以使用

```
$ grep -o 'Request\.[A-Za-z0-9_.]*' file.txt |sort|uniq
Request.IN.NODE_ORG_EWO
Request.IN.ORIG_SET_DTE 
```

# javascript - 我的 JavaScript 代码中的索引越界错误

> ID：14656634
> 
> 赞同：1
> 
> 时间：2013-02-01T23:10:16.243
> 
> 标签：javascript, arrays, object, closures, settimeout

以下代码中存在错误：

```
generate: function() {
    var generated = [];
    for (var j = 0; j < objectDefinitions.length; j++) {
        var randomNumber;

        if (!objectDefinitions[j].restrictGeneration) {
            continue;
        }

        randomNumber = Math.random();

        if (randomNumber < objectDefinitions[j].probability) {
            generated.push(objectDefinitions[j].createObject());
            objectDefinitions[j].restrictGeneration = true;
            if (j > 5) {
            }
            setTimeout(function() {                 
                //console.log(j);
                objectDefinitions[j].restrictGeneration = false;
            }, objectDefinitions[j].cooldown);
        }
    }
    return generated;
} 
```

当 setTimeout “触发”变量 j 为 6 时，这会导致数组索引超出范围异常，因为数组中只有 6 个项目。我真的不明白发生了什么，我在 setTimeout 之外检查了 j 并且它永远不是 6，但它似乎在声明后发生了变化。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:14:45.857

它读取的变量`j`是您在循环中使用的变量，因此它没有被“复制”。

```
setTimeout(
    (function(k){
        return function() {            
            objectDefinitions[k].restrictGeneration = false;
        };
    }(j))
, objectDefinitions[j].cooldown); 
```

这样你`j`就被复制到一个`k`变量中。但是`k`每次循环迭代都有一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:15:06.733

你的空 if 语句执行（什么都不做），然后它进入设置超时，j 仍然大于 5。

基本上，你应该在那个时候退出，而不是在 if 语句之后继续执行更多代码，或者在那里创建一个 else 语句，这样如果 j > 5 就不会执行更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:56:12.413

这是由于*关闭*。

您会看到`6`因为`j++`最后一次运行触发 for 循环退出的值。因此，该*闭包*现在的 a`j`为 6。当`setTimeout`执行时（`for`循环完成后，它在该闭包的上下文中执行。

您需要将此代码移动到它自己的闭包中，这是通过将其移动到它自己的函数中来完成的。就像是：

```
generate: function() {
    var generated = [];
    for (var j = 0; j < objectDefinitions.length; j++)
    {
       handleIteration(generated, j); // Re-factor your code into a new function
    }

    return generated;
} 
```

# java - 背景图像不显示在 Swing Netbeans 构建器中

> ID：14656635
> 
> 赞同：3
> 
> 时间：2013-02-01T23:10:17.227
> 
> 标签：java, swing, user-interface, jframe, jpanel

我在 JFrame 类上使用 netbeans 构建器“设计”。我有传统的 JFrame，我在其中添加了一个 JPanel（与构建器一起）。

现在在代码中，我想为这个面板添加一个背景，如下所示：

```
public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
        addBackground();
    }

    private void addBackground()
    {
        Image bgImage;
        try {
            bgImage = ImageIO.read(new File("src/general/Mockup.png"));
            jPanel1.add(new NewJFrame.ImagePanel(bgImage));
            jPanel1.repaint();
        } catch (IOException ex) {
            Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String args[]) {

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
} 
```

我什么也没看到，只是一个空的 JFrame/JPanel。

顺便说一句，我将它用于 ImagePanel 代码

```
@SuppressWarnings("serial")
class ImagePanel extends JPanel {
    private Image image;

    ImagePanel(Image image) {
        this.image = image;
    };

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, getWidth(), getHeight(), this);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:27:34.843

*   你的班级[`ImagePanel extends JPanel {`必须覆盖`getPreferredSize()`](https://stackoverflow.com/a/7424211/714968)，

*   因为`public void paintComponent(Graphics g) {`( `painting in Swing`, `Graphics(2D)`) 不会将任何大小返回给容器，所以简单地返回`Dimmension(0, 0`)

*   [`JPanel`](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)已在 API 中实现[`FlowLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/flow.html)（仅接受`PreferredSize`来自其子级的），那么您`custom painting`将永远不会在屏幕上可见

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:14:32.733

jPanel1 是什么？它使用什么布局？渲染 GUI 后 ImagePanel 对象有多大？与其经历所有这些体操，为什么不简单地使用带有图像（或 ImagePanel 实例）的 JLabel 作为 JFrame 的 contentPane？请注意，这种类型的编码是我避免使用 NetBeans 生成的代码的原因之一。让我自己编写代码，我可以完全控制我的 GUI 所做和显示的一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T23:15:36.737

为什么不简单地添加一个 JLabel 并在构造函数中插入图像名称？喜欢：

JFrame 背景=新 JFrame("back.png");

然后，您可以将此标签直接添加到框架或 JPanel。

# image - ImageMagick - 通过颜色使图像透明

> ID：14656636
> 
> 赞同：0
> 
> 时间：2013-02-01T23:10:21.883
> 
> 标签：image, imagemagick

好吧，我有这张图片[http://i.stack.imgur.com/78yU0.png](http://i.stack.imgur.com/78yU0.png)我想让它透明。我的意思是我想要粉红色的背景消失......

但是，它很长，做像素棒需要一段时间。我可以使用 ImageMagick 并做点什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:05:49.723

仿佛变魔术：

```
convert 78yU0.png -fuzz "2%" -transparent #ff00ff transparent.png 
```

在 gimp 中查看您的图像以获得粉红色的颜色时出于兴趣，看起来您的图像没有正确放置在画布上。它似乎仍然有效，但以后可能会导致问题？

# symfony - Symfony 2：如何基于主机和 URI 进行路由？

> ID：14656639
> 
> 赞同：0
> 
> 时间：2013-02-01T23:10:45.220
> 
> 标签：symfony, routing

正如[雅虎指出的那样](http://developer.yahoo.com/performance/rules.html#cookie_free)，我希望能够做两件事：

*   使用 URI**和**主机解析前端控制器中的路由
*   创建/使用模板时，返回的不是“相对”路由（like `'/img/st.jpg'`）而是完整路由（like `'//s1.mysite.com/st.png'`）等等：增量计数器（=> 下一个静态链接应该像`'//s`**2**`.mysite.com/whatever.png'`）
*   更进一步，我想包括语言（如`'//s1.`**us**`.mysite.com/st.png'`和`'//s1.`**fr**`.mysite.com/st.png'`）

你会怎么做？我可以轻松地执行 Apache 规则，例如：

```
RewriteCond %{HTTP_HOST} ^([a-zA-Z0-9\-]+)\.((([a-zA-Z0-9\-]+)\.)+)([a-zA-Z0-9\-]+)\.(fr|com|net|org|eu)$
RewriteRule BLABLABLABLA 
```

我在这里没有更进一步，但我对 RewriteRules 没有任何问题。问题在于如何构建包含正确“优化”URL 的网页。你会怎么做？

如果我不够清楚，我很抱歉，所以我给你一个真实的例子：我想转换这段代码：

```
<img src="/p/s/pizza.png" alt="aaa" />
<div class="img-large">
    <img src="/l/l/pizza.png" alt="bbb" />
</div> 
```

至

```
<img src="http://fr.s2.partner.mysite.fr/p/s/pizza.png" alt="aaa" />
<div class="img-large">
    <img src="http://fr.s3.partner.mysite.fr/p/l/pizza.png" alt="bbb" />
</div> 
```

（我没有编写 Twig 模板代码以保持尽可能清晰）。你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:20:17.823

Symfony 2.2 支持主机路由：[http ://symfony.com/doc/master/components/routing/hostname_pattern.html](http://symfony.com/doc/master/components/routing/hostname_pattern.html)

如果您使用的是 Symfony 2.1 或更低版本，则不能使用子域本身进行路由，但您可以设置侦听器以根据子域在页面加载时执行某些操作。

监听器示例：

```
#config.yml
services:        
  myListener:
    class: myApp\MyBundle\Controller\MyListener
    arguments: 
        container: "@service_container"
    tags:
        - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 64 }

class MyListener extends controller
{

    public function __construct($container)
    {
        $this->container = $container;
    }    

    public function onKernelRequest(GetResponseEvent $event)
    {       
        $currentHost = $request->getHost();
        // do something, i.e set the language
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:23:17.780

扩展路由生成器。我想说添加一个名为 hostname 的附加参数让我们对 generateRoute 方法说。下面给出了如何覆盖路由生成器的简单示例：

[自定义 url 生成器类](https://stackoverflow.com/questions/8853020/custom-url-generator-class) 和 [http://symfony.com/doc/master/cookbook/bundles/inheritance.html](http://symfony.com/doc/master/cookbook/bundles/inheritance.html)

然后，您可以创建一个自定义 Twig 标记以专门用于静态资产，您可以在其中调用新的 generateRoute 方法，使用您想要的任何策略设置名为 hostname 的新自定义参数（随机，基于某种递增逻辑（可能使用会议））。那只是概念证明，需要一些谷歌搜索和阅读文档，但没有理由不应该工作......

# mysql - 使用 InnoDB 的 MySQL 高 CPU 使用率

> ID：14656640
> 
> 赞同：1
> 
> 时间：2013-02-01T23:10:45.920
> 
> 标签：mysql, performance, innodb, cpu

我的 VPS 服务器上的 MySQL CPU 使用率非常高（即使没有任何查询，CPU 使用率也一直保持在 80% 左右。）

如果我禁用 InnoDB，在 my.cnf 中使用以下行，

```
ignore-builtin-innodb
default-storage-engine = myisam 
```

我得到 0% 的 CPU 使用率，这让我认为 InnoDB 实现存在一些问题，导致 CPU 使用率很高。

有没有办法调试这个？（在 mysql 中显示进程列表根本没有给我任何相关信息。）

MySQL 版本：5.5.29

（我也在使用nginx）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:35:16.483

这个问题可能源于 InnoDB 的默认设置仍然是单线程的。现在您使用的是 MySQL 5.5，您可以配置 InnoDB 以访问多个 CPU/内核。

与其重新发明轮子，不如阅读我在 DBA StackExchange 上的帖子：

*   `Sep 20, 2011`:[多核和 MySQL 性能](https://dba.stackexchange.com/a/5968/877)
*   `Sep 12, 2011`:[可以让 MySQL 使用多于一个核心](https://dba.stackexchange.com/a/5670/877)
*   `May 26, 2011`:[关于单线程与多线程数据库的性能](https://dba.stackexchange.com/a/2948/877)

请通读一遍，希望对您有所帮助。

# html - 文档类型规则

> ID：14656641
> 
> 赞同：0
> 
> 时间：2013-02-01T23:10:48.263
> 
> 标签：html, css

在浏览了很多文章和[这篇文章之后](https://stackoverflow.com/questions/255470/what-are-the-different-doctypes-in-html-and-what-do-they-mean)，**我知道为什么要使用 doctypes**以及浏览器触发的不同模式，如标准、怪癖等。

我从这个网址下载了一个严格的文档类型 - [http://www.w3.org/TR/html4/strict.dtd](http://www.w3.org/TR/html4/strict.dtd)但无法理解里面写的东西。

我的问题是，如果我想用 html 和 css 编写一个页面，该页面将有一个将触发标准模式的 doctype，我在哪里可以获得一个**清晰易懂的**列表，列出我的 html 和 css 代码应该使用的**所有规则**坚持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:26:24.847

查看 W3C 规范。这应该告诉你很多。它还应该具有编写良好且记录良好的代码，这些代码符合 Web 语义。开发自己使用的模式，在体验之后它会变得更加坚持。

我建议的几件事是确保您的`meta`,`br`和`link`标签`/>`在它们的末尾没有。

```
<link rel="stylesheet" /> <!-- bad -->
<link rel="stylesheet"> <!-- good --> 
```

另外，不要把`div`s with `id`s 放在`div`s with `class`es 里面。

```
<div class="myClass"> <!-- bad -->
    <div id="myId">

    </div>
</div>

<div id="myId"> <!-- good -->
    <div id="myClass">

    </div>
</div> 
```

另外，请注意已弃用的元素。谷歌“不推荐使用的 html 元素”，你会发现很多参考资料。例如，不要使用*样式化*内容的 HTML 标签，只使用*格式化*内容的 HTML 标签，然后使用 CSS 来设置样式。（例如*i、b、s、u、字体*标签）。

“标准”，也是一个很宽泛的“保护伞”话题。您可以通过多种方式遵守或不遵守标准。此外，请尝试始终坚持 HTML5 和 CSS3 语义，请参阅[此页面](http://w3.org/html5)了解相关信息。

一些很好的参考：

[http://www.w3.org/html5](http://www.w3.org/html5)
[http://www.w3.org/html/wg/drafts/html/master/](http://www.w3.org/html/wg/drafts/html/master/)
[http://www.webkit.org/coding/coding-style.html](http://www.webkit.org/coding/coding-style.html)（仅限对于一些事情）
[http://www.w3.org/standards/](http://www.w3.org/standards/)

# 编辑

*回应您的困惑评论*

好吧，您实际上*不必*避免结束语句 ( `/>`)，这只是一种[好习惯](http://webdesignledger.com/tips/html5-essentials-and-good-practices)。因此，避免它并不重要，甚至没有资格受到批评，这只是为了形成良好的、结构性的和遵守标准的习惯。这些只是我指出的一些事情，甚至不是什么大问题。这些只是我重新设计网站时要纠正的事情。

就嵌套方案而言，它再次被认为是好的做法。想一想，`id`代表身份。它标识了文档的某些部分。`div`其中带有 a的A ，`class`为某些更指向的元素定义了某个类或目标。您将如何在旨在针对文档特定部分的元素中识别大部分文档？我喜欢把它想象成一种亲子关系，但这是有争议的。

总而言之，我想使用“好”和“坏”这两个词可能有点苛刻。将它们替换为“标准谨慎的人喜欢什么”和“标准谨慎的人不喜欢什么”。

回到您的问题，我的回答似乎没有提供**确切** 规则的列表，但我认为不存在。只需担心建立良好的习惯，并阅读大量博客和规范。做一些谷歌搜索，你会感到惊讶。

# 编辑 2

在第二个说明中，我看到您使用的是 HTML4“Strict”。这已经不是 2009 年了。尽管 HTML5 仍然只是一个候选推荐，但如果您担心遵守“最新和未来的标准”，请开始坚持下去。

# css - 带有 html5 标头标签的 960 网格

> ID：14656642
> 
> 赞同：1
> 
> 时间：2013-02-01T23:10:50.830
> 
> 标签：css, html, 960.gs

我是 960.gs 的新手，在使用它和 html5 时遇到了一些问题。

我正在尝试以下操作：图像应跨越**2 个网格单位**，并且在同一行中，div 应跨越**5 个单位**，然后（因为“行”已满）应遵循换行符并应显示标题。我尝试了以下方式：

```
<div class="container_12">
    <header class="grid_12">
        <img src="nothing" class="grid_2 alpha"><div class="grid_5 suffix_5">SOMETHING</div>
        <h1 class="grid_2 omega">title</h1>
    </header>
</div> 
```

在我对 960.gs 的理解中，这应该会产生预期的效果。它实际上没有：它在一行上显示图像，div 和标题在彼此下方，并在下一行显示一点缩进。这是因为使用了除 div 之外的其他元素吗？

提前感谢您的帮助！（我从[http://www.webdesignerdepot.com/2010/03/fight-div-itis-and-class-itis-with-the-960-grid-system/](http://www.webdesignerdepot.com/2010/03/fight-div-itis-and-class-itis-with-the-960-grid-system/)获得了大量信息）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:08:19.013

```
<div class="container_12">
<header>
    <div class="grid_9">
        <div class="grid_2 alpha">
            <img src="http://showbuzz.ru/wp-content/uploads/2009/09/dead_earners_9_wenn1642245.jpg" class="grid_2 alpha" />  
        </div>
         <div class="grid_7 omega">
           SOMETHING
         </div>
         <div class="grid_9 alpha omega">
             <h1>title</h1>  
         </div>
    </div>
  </header> 
```

[http://jsfiddle.net/TMAk7/](http://jsfiddle.net/TMAk7/)

它对你有用吗？

# php - PHP：当网站在线托管时无法发送 http 请求

> ID：14656644
> 
> 赞同：0
> 
> 时间：2013-02-01T23:10:54.263
> 
> 标签：php, httpwebrequest

我正在编写一个网络应用程序，并且我已将短信集成到我的代码中。我的应用程序在我的本地主机上完美运行，我可以通过 curl 或 php 中的 file_get_contents 发送 http 请求，获取响应并处理它。

但是，我刚刚托管了该站点，并且由于它是在线托管的，因此在发送 http 请求时遇到了问题。我用 curl 和 file_get_contents 尝试过，但没有成功。

然后我决定将站点托管在来自不同提供商的另一台服务器上，但我仍然无法发送请求。我也没有收到任何错误消息。我一直在我的本地主机上对其进行测试，以确保它不是来自脚本，并且我 100% 确定它不是来自我的代码。

我联系了客户支持，但他们没有任何帮助。

我真的被困住了，我需要帮助。谢谢你。请从我用来提出以下请求的代码中找到摘录：

假设变量已经定义...

```
<?php
.................................

// the url contains my password and username so i took it off
$url = "";
$response = file_get_contents($url);

/*
// this is the curl part and it works if I decide to use it instead
$ch = curl_init($url);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$response = curl_exec($ch);
curl_close($ch);
*/
$result = explode("|", $response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:14:05.333

`file_get_contents()`它经常被 IT 部门和托管服务提供商禁用，因为如果不小心使用它可能会导致地狱。那将是我要检查的第一件事。

# python - 允许我的类实例的 repr() 由 eval() 解析

> ID：14656645
> 
> 赞同：2
> 
> 时间：2013-02-01T23:11:01.073
> 
> 标签：python, serialization, eval

假设我自己定义了一个类，并`__repr__`为它定义了一个方法。我想将它转换回我的对象​​。我知道对象序列化可能是这样做的好方法（使用`json`模块）但是无论如何我可以使用内置`eval`函数来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:13:28.113

编写你的`__repr__()`，以便它创建一个有效的 Python 表达式来实例化你的对象。

```
class MyClass(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b
    def __repr__(self):
        return "%s(%r, %r)" % (type(self).__name__, self.a, self.b) 
```

显然，这取决于您使用的值有自己的合理值`repr()`。

你不必定义任何特殊`eval()`的东西——只要传入你从`repr()`.

# android - 权限问题？为什么华为u8650安装不了这个app？

> ID：14656647
> 
> 赞同：0
> 
> 时间：2013-02-01T23:11:06.213
> 
> 标签：android, permissions, google-play

我开发了一个需要这些权限和这些硬件的应用程序：

```
android.hardware.CAMERA
android.hardware.camera.AUTOFOCUS
android.hardware.LOCATION
android.hardware.location.GPS
android.hardware.location.NETWORK
android.hardware.TOUCHSCREEN

android.permission.ACCESS_COARSE_LOCATION
android.permission.ACCESS_FINE_LOCATION
android.permission.ACCESS_NETWORK_STATE
android.permission.CAMERA
android.permission.INTERNET 
```

该应用程序现已在 google play 中发布，但令人惊讶的是，我无法从 google play 将其安装到我的华为 u8650 手机中。手机有 GPS、摄像头、自动对焦等……另外，我可以从 eclipse 安装应用程序来调试它，该应用程序在这款手机上运行良好。

但是，令人惊讶的是，谷歌播放器显示该应用程序与该手机不兼容。

在 Google Developer Console 中，我可以列出与此应用兼容的手机（1843），并且列表中不包含华为 u8650。

我不明白问题出在哪里。我应该在应用程序或权限中进行哪些更改以使其兼容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:29:00.277

我在互联网上看到一些迹象表明该设备缺乏自动对焦。

如果您不需要自动对焦，请将以下内容添加到清单中：

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" /> 
```

[选择`CAMERA`权限](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)时默认需要自动对焦，这就是为什么您需要主动声明不需要它的原因。

# macos - 在 Mac OS X 中链接动态库 (libjvm.dylib)（rpath 问题）

> ID：14656657
> 
> 赞同：13
> 
> 时间：2013-02-01T23:12:03.627
> 
> 标签：macos, haskell, linker, java-native-interface, ghc

我确实有一个需要链接的应用程序`libjvm`（JDK 中的一个库需要进行 JNI 绑定）。当我告诉`libjvm.dylib`使用`-L`它的位置成功编译和链接。但是，当我运行二进制文件时，我得到：

```
dyld: Library not loaded: @rpath/libjvm.dylib
  Referenced from: <my home directory>/./mybinary
  Reason: image not found 
```

到目前为止，我发现我可以像这样运行指定 LD_LIBRARY_PATH 的二进制文件：

```
LD_LIBRARY_PATH=<path to libfolder installation> ./mybinary 
```

但我当然不希望那样。如果我每次启动应用程序都必须一次又一次地给出它，为什么我还要指定确切的位置？！

我还了解到，mac os x 上的动态库确实有一种标记，可以告诉那里的位置。但是我不知道是什么`rpath`（对我来说似乎是一个变量，但我如何在链接期间设置它？）。

该应用程序是使用 haskell 构建的，但我同样可以使用`ld`. 但是，我被困在 rpath 上——它对 JDK 库来说可能是特殊的吗？

这是我为了构建而做的事情：

```
ghc --make Main.hs mycbinding.o -ljvm -L<javahome>/jre/lib/server -o mybinary 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T01:19:49.840

从 Apple 的[dyld 手册页](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/dyld.1.html)：

> @rpath/
> 
> ```
>  Dyld maintains a current stack of paths called the run path list.
>   When @rpath is encountered it is substituted with each path in the
>   run path list until a loadable dylib if found. The run path stack
>   is built from the LC_RPATH load commands in the depencency chain
>   that lead to the current dylib load. You can add an LC_RPATH load
>   command to an image with the -rpath option to ld(1). You can even add
>   a LC_RPATH load command path that starts with @loader_path/, and it
>   will push a path on the run path stack that relative to the image
>   containing the LC_RPATH. The use of @rpath is most useful when you
>   have a complex directory structure of programs and dylibs which can be
>   installed anywhere, but keep their relative positions. This scenario
>   could be implemented using @loader_path, but every client of a dylib
>   could need a different load path because its relative position in the
>   file system is different. The use of @rpath introduces a level of
>   indirection that simplies things. You pick a location in your directory
>   structure as an anchor point. Each dylib then gets an install path that
>   starts with @rpath and is the path to the dylib relative to the anchor
>   point. Each main executable is linked with -rpath @loader_path/zzz,
>   where zzz is the path from the executable to the anchor point. At runtime
>   dyld sets it run path to be the anchor point, then each dylib is found
>   relative to the anchor point. 
> ```

在链接二进制文件时需要传递`-rpath path/containing/the/library`to以告诉它在共享库加载命令中`ld`扩展前缀时在哪里搜索。`@rpath/`使用 GHC，您可以使用`-optl-Wl`参数将标志传递给`ld`，因此您需要像这样调用 GHC：

```
ghc --make Main.hs mycbinding.o -ljvm -L<javahome>/jre/lib/server -optl-Wl,-rpath,<javahome>/jre/lib/server -o mybinary 
```

# c - 进程控制，通信 - 杀死下一个进程并恢复它

> ID：14656660
> 
> 赞同：0
> 
> 时间：2013-02-01T23:12:30.727
> 
> 标签：c, bash

我制作了一个 C 程序，它使用 .sh 调用 bash 脚本文件`system(" ");`，在这个程序中，进程父亲分叉了 3 个进程（1\. 2\. 3.）。我想添加到我的程序中的是：

*   当父亲分叉第三个进程（3.）时，它会“等待”（`wait (&status);`）
*   此时将执行第三个进程，但在执行它之前，我想使用一个脚本来获取下一个（进程 3.）进程的 PID 以杀死它。
*   之后，控制权返回父进程（因为它的子进程已被杀死），所以父进程必须使用另一个 script.sh 来恢复进程 3.（之前被杀死）！

而已。如何在 bash 和 C 或其中之一中执行这些步骤？

总而言之，我需要做的是做“进程并发”我必须创建不必等待其他进程完成的进程，但他们必须同时启动其他进程为他们提供部分输出以便使用那个输出。这样，我将使用“kill” bash 命令进行“相互通信”。

我希望它很清楚！我的步骤是否可以很好地使用 kill 命令实现该进程通信？

谢谢

# javascript - javascript 未定义的 JSON 字段

> ID：14656661
> 
> 赞同：0
> 
> 时间：2013-02-01T23:12:35.050
> 
> 标签：javascript, json, mapping, undefined

我正在使用 leaflet.js 制作地图并从 json 文件构建弹出气泡 html。`pic`除了我已添加到 json 数据中的一个新字段 外，气泡正在被有效填充。我不明白为什么它没有被加载——它只是被浏览器渲染为“未定义”。谁能建议为什么它可能没有被阅读？我认为这些是相关文件的重要部分。

data.json（摘录）

```
[
  {
    "name": "Billys",
    "address": "297 Mare Street, Hackney",
    "lat": "51.545829",
    "lng": "-0.055408",
    "pic": "billy.jpg",
    "year": 2013.0
  },
  {
    "name": "Folber",
    "address": "227 Mare Street",
    "lat": "51.544397",
    "lng": "-0.05524",
    "pic": "folber.jpg",
    "year": 2013.0
  }
] 
```

map.js（摘录）

```
function initialize() {
    var layer = new L.StamenTileLayer("holds");
    var map = new L.Map("map", {
        attributionControl: false,
        center: new L.LatLng(51.545094, -0.05609),
        zoom: 15
    });
    map.addControl(new L.Control.Attribution({
        prefix: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
    }));

    map.scrollWheelZoom.disable();
    map.addLayer(layer);

    $.getJSON('data.json', function (data) {
        places = data;
        for (var i in places) {
            place = places[i];
            markers[i] = L.marker([place['lat'], place['lng']]).addTo(map);
            markers[i].bindPopup('<div class="popup-words"><b>' + place['name'] + "</b><br/>" + place['address'] + "</div>" + "<img alt='" + place['name'] + "' src='img/logos/" + place['pic'] + "' width='60px' height='30px' class='popup-image'/>");
        }
        updateSlider(2013);
        play();
    });
} 
```

# c# - 如何进行异地/云端文件同步

> ID：14656662
> 
> 赞同：2
> 
> 时间：2013-02-01T23:12:53.937
> 
> 标签：c#, c++, synchronization, cloud

我很想知道云文件存储的文件访问同步的基本原理是什么——几乎是微软的 Skydrive 或 Dropbox 应用程序所做的？

比如说，当两个或多个客户端尝试连接（读/写）到服务器上的同一个文件时，他们如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T03:09:37.497

新的 DropBox Api（Datastore API）对真正的同步[支持](https://www.dropbox.com/developers/datastore)很有用。它具有离线访问和自动冲突解决功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-01T15:08:30.177

Dropbox 已弃用其同步 API：

您可能想查看一些云同步的开源示例：

[https://github.com/AtakamaLLC/cloudsync](https://github.com/AtakamaLLC/cloudsync)

[https://github.com/cjnaz/RCloneSync](https://github.com/cjnaz/RCloneSync)

特别是 cloudsync 可以用作命令行应用程序。

# java - 将多个项目绘制到 JPanel

> ID：14656669
> 
> 赞同：1
> 
> 时间：2013-02-01T23:13:22.270
> 
> 标签：java, swing, jpanel, jcomponent

我正在尝试用两个简单的按钮创建一个 JPanel。第一个按钮`RoachComponent`使面板中的组件数量增加一倍。第二个按钮将清除所有蟑螂。

现在，我的大部分程序都在工作，但有一个相当严重的问题。每次点击只添加一个蟑螂，即使它应该添加几千只蟑螂。我已经测试了我能想到的所有东西，但它仍然让我望而却步。即使我*手动*添加两只蟑螂，也只显示一只。这是我的主要功能中的代码。我有 99% 的把握在代码的所有其他部分中一切都是正确的，尽管我可以在需要时发布它。

```
final JFrame frame = new JFrame();
    final JPanel panel = new JPanel();
    // Button to create a new roach
    JButton button = new JButton("New Roach");

    final RoachPopulation roachPopulation = new RoachPopulation(2);

    // The label for displaying the results
    final JLabel label = new JLabel("Population: " + roachPopulation.getPopulation());

    // ActionListener class
    class doubleListener implements ActionListener {
        public void actionPerformed(ActionEvent event) {

            System.out.println("------------------");
            for (int i = 0; i < roachPopulation.getPopulation(); i++) {
                RoachComponent newRoach = new RoachComponent();
                panel.add(newRoach);
                newRoach.getCoords();
            }
            panel.repaint();
            frame.repaint();
            roachPopulation.doublePopulation();
            label.setText("Population: " + roachPopulation.getPopulation());
            // Showing that there *is* the correct number of roaches in the panel.
            System.out.println(panel.getComponentCount());
        }
    }
    RoachComponent r1 = new RoachComponent();
    RoachComponent r2 = new RoachComponent();
    panel.setLayout(new BorderLayout());
    panel.add(button, BorderLayout.SOUTH);
    panel.add(label, BorderLayout.NORTH);
    panel.add(r1);
    panel.add(r2);
    //panel.add(component, BorderLayout.CENTER);
    frame.add(panel);

    frame.repaint();

    ActionListener doubleListener = new doubleListener();
    button.addActionListener(doubleListener);

    frame.setSize(FRAME_WIDTH, FRAME_HEIGHT);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T23:19:46.483

*   删除所有代码`frame.repaint();`并在`panel.revalidate()`之前添加`jpanel.repaint();`

*   （最终外观）一切都取决于[`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)用于[`JPanel`](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

*   尽快发布和[SSCCE以获得更好的帮助](http://sscce.org/)

*   [这篇文章会帮助你](https://stackoverflow.com/a/6989230/714968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:19:28.780

一个问题是您需要`JPanel`在添加后重新验证`RoachComponent`：

```
panel.revalidate(); 
```

# r - Error when trying to run lmer() in R

> ID：14656675
> 
> 赞同：4
> 
> 时间：2013-02-01T23:13:56.887
> 
> 标签：r, syntax-error, lme4, lmer

So here's my problem. I have a data set in R that I need to run a mixed effects model on. Here's the code:

```
data <- read.csv("D:/blahblah.csv")
analysis.data <- lmer(intdiff ~ stress_limit * word_position * follows + (1|speaker), data)
summary(analysis.data) 
```

When I try to run the script, it returns the following error:

```
 Error in mer_finalize(ans) : Downdated X'X is not positive definite, 15. 
```

I have tracked the error down to the "follows" parameter because when I just use stress_limit and word_position, it runs fine. If it helps, the data in "follows" are only 3 strings: n or l, consonant, vowel. I've tried replacing the spaces with _ but with no success. Is there something about the internal workings of the lmer() function that is preventing the use of "follows" in this case? Any help would be great!

For more info: intdiff contains numeric values, stress_limit is strings (Stressed or Unstressed) and word position is also strings (Word Medial or Word Initial).

EDIT: Here is a data sample that reproduces the error:

```
structure(list(intdiff = c(11.45007951, 12.40144758, 13.47898367, 
6.279497762, 18.19461897, 16.15539707), word_position = structure(c(2L, 
2L, 2L, 1L, 1L, 1L), .Label = c("Word Initial", "Word Medial"
), class = "factor"), follows = structure(c(4L, 4L, 4L, 1L, 2L, 
4L), .Label = c("Consonant", "n or l", "Pause", "Vowel"), class = "factor"), 
stress_limit = structure(c(2L, 1L, 1L, 2L, 2L, 2L), .Label = c("Stressed", 
"Unstressed"), class = "factor"), speaker = structure(c(2L, 
2L, 2L, 2L, 2L, 2L), .Label = c("f11r", "f13r", "f15a", "f16a", 
"m09a", "m10a", "m12r", "m14r"), class = "factor")), .Names = c("intdiff", 
"word_position", "follows", "stress_limit", "speaker"), row.names = c(NA, 
6L), class = "data.frame") 
```

I tried the lme() function as well, but it returned this error:

```
Error in MEEM(object, conLin, control$niterEM) : 
Singularity in backsolve at level 0, block 1 
```

The code in my original post is the exact code I'm using, minus the library(lme4) call, so I'm not leaving any information out I can think of.

My R version is 2.15.2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T01:23:03.170

Hard to tell for sure without a reproducible example: [How to make a great R reproducible example?](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)

But, guessing: these sorts of problems are generally due to collinearity in the design matrix. Centering your continuous predictor (`intdiff`) may help. You can also explore the design matrix directly

```
X <- model.matrix( ~ stress_limit * word_position * follows, data) 
```

Collinearity between pairs: `cor(X)`. Unfortunately I don't have a suggestion for detecting *multi*-collinearity (i.e. not between pairs, but between combinations of >2 predictors) off the top of my head, although you can look into the tools for computing variance inflation factors (e.g. `library("sos"); findFn("VIF")`).

As a cross-check, `lme` should also be able to handle your model:

```
library(nlme)
lme(intdiff ~ stress_limit * word_position * follows, 
   random=~1|speaker, data=data) 
```

When I run your test data in the development version of lme4 ([available on github](https://github.com/lme4/lme4/)) I get `Error in lmer(intdiff ~ stress_limit * word_position * follows + (1 | : rank of X = 5 < ncol(X) = 12`. On the other hand, with this small an input data set (6 observations), there's no possible way you could fit 12 parameters. It's a little harder to tell exactly where your problem is. Do all 12 combinations of your 3 variables actually occur in your data? If some are missing, then you need to follow the advice given in the development version's help:

> Unlike some simpler modeling frameworks such as ‘lm’ and ‘glm’ which automatically detect perfectly collinear predictor variables, ‘[gn]lmer’ cannot handle design matrices of less than full rank. For example, in cases of models with interactions that have unobserved combinations of levels, it is up to the user to define a new variable (for example creating ‘ab’ within the data from the results of ‘droplevels(interaction(a,b))’).

In particular, you can fit this model as follows:

```
data <- transform(data,
       allcomb=interaction(stress_limit,word_position,follow,drop=TRUE))
lme(intdiff ~ allcomb, random=~1|speaker, data=data) 
```

This will give you a one-way ANOVA treating the unique combinations of levels that are actually present in the data as the categories. You'll have to figure out for yourself what they mean.

The alternative is to reduce the number of interactions in the model until you get to a set that don't have any missing combinations; if you're lucky `(stress_limit+word_position+follow)^2` (all two-way interactions) will work, but you might have to reduce the model still farther (e.g. `stress_limit + word_position*follow`).

Another way to test this is to use `lm()` on your proposed models and check that there are no `NA` values in the estimated coefficients.

The main thing you will be losing in these ways is convenience/ease of interpretation, because the parameters for the missing combinations couldn't have been estimated from the data anyway ...

# ruby-on-rails - 捆绑更新冻结

> ID：14656685
> 
> 赞同：2
> 
> 时间：2013-02-01T23:14:49.193
> 
> 标签：ruby-on-rails, ruby, bundler

我正在尝试“捆绑更新”并在获取 deps 的过程中冻结（我认为）。这是详细的转储 - 有什么想法吗？

```
Query Gemcutter Dependency Endpoint API: bones-rcov bones-rubyforge bones-rspec bones-zentest git markaby metaid mab chunky_png fssm term-ansicolor gherkin abstract ZenTest daemons fastthread gem_plugin cgi_multipart_eof_fix rubigen multimap escape_utils ruby-yadis flexmock mocha oniguruma plist eventmachine eventmachine-le http_parser.rb preforker
Fetching from: http://rubygems.org/api/v1/dependencies?gems=bones-rcov,bones-rubyforge,bones-rspec,bones-zentest,git,markaby,metaid,mab,chunky_png,fssm,term-ansicolor,gherkin,abstract,ZenTest,daemons,fastthread,gem_plugin,cgi_multipart_eof_fix,rubigen,multimap,escape_utils,ruby-yadis,flexmock,mocha,oniguruma,plist,eventmachine,eventmachine-le,http_parser.rb,preforker
HTTP Success
Query List: ["trollop", "metaclass", "thoughtbot-shoulda"]
Query Gemcutter Dependency Endpoint API: trollop metaclass thoughtbot-shoulda
Fetching from: http://rubygems.org/api/v1/dependencies?gems=trollop,metaclass,thoughtbot-shoulda
HTTP Success
Query List: []
Unmet Dependencies: ["spicycode-rcov", "tenderlove-frex", "mongodb-mongo"]
Fetching gem metadata from http://rubygems.org/
Query List: ["spicycode-rcov", "tenderlove-frex", "mongodb-mongo"]
Query Gemcutter Dependency Endpoint API: spicycode-rcov tenderlove-frex mongodb-mongo
Fetching from: http://rubygems.org/api/v1/dependencies?gems=spicycode-rcov,tenderlove-frex,mongodb-mongo
HTTP Success
Query List: []
^[[A^[[A^C
Quitting...
/Users/timpark/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb:114:in `as_list'
/Users/timpark/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb:176:in `to_s'
/Users/timpark/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb:180:in `<=>'
/Users/timpark/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:148:in `=='
/Users/timpark/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:148:in `=='
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dep_proxy.rb:15:in `=='
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:180:in `block in resolve'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:176:in `each'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:176:in `sort_by'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:176:in `resolve'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:222:in `resolve'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:346:in `block in resolve_requirement'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:344:in `catch'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:344:in `resolve_requirement'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:295:in `block in resolve'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:294:in `reverse_each'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/resolver.rb:294:in `resolve'
/Users/timpark/.rvm/gems/ruby-1.9.3-p362@gl 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:29:35.807

看起来您可能正在使用 rvm 并且某个 gem 的 ruby​​ 版本错误？让我知道这是否有帮助，很高兴能提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:46:31.163

我遇到了类似的问题，我只是将捆绑器更新到了预发布版本。

```
gem install bundler --pre 
```

再次运行bundle update，然后bam，应该可以了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:25:19.193

我最终剥离了我的 Gemfile 并一一升级并让它工作。捆绑器中的某种深层错误。

# javascript - 滚动垂直滚动条jquery

> ID：14656688
> 
> 赞同：-3
> 
> 时间：2013-02-01T23:15:15.327
> 
> 标签：javascript, jquery

我有里面有树视图的 div。Div 比树小，所以在右侧我有垂直滚动条。当用户按下 div 外的某个按钮时，我想滚动到 div 内的指定项目（我知道该项目的 ID）。

如何滚动垂直滚动条？如何专注于某个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:27:07.577

我认为您可以分两个阶段进行：

首先，使用 jQuery 函数获取元素在 div 中的位置`.scrollTop()`。然后，设置 div 的滚动位置：`$(yourdiv).scrollTop(yourElementPosition)`

这是函数[.scrollTop()的官方文档](http://api.jquery.com/scrollTop/)

# jquery - jQuery缩略图缩放

> ID：14656694
> 
> 赞同：0
> 
> 时间：2013-02-01T23:15:58.010
> 
> 标签：jquery, css, image-processing

我正在寻找与颜色相关的衣服样本，我将以此为基础

[http://jquery.malsup.com/cycle/pager7.html](http://jquery.malsup.com/cycle/pager7.html)

请注意上面页面上的缩略图，我需要做的是让缩略图实际上不被缩小到完整尺寸的图像，而只是显示图像中心的缩略图而不被缩小。这将确保样本（缩略图）更好地描绘服装的颜色。

关于我可以在这里做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:17:26.440

[您可以使用CSS 剪辑属性](http://tympanus.net/codrops/2013/01/16/understanding-the-css-clip-property/)来完成此操作。

# python - unicoded python string''不返回空

> ID：14656696
> 
> 赞同：0
> 
> 时间：2013-02-01T23:16:26.577
> 
> 标签：python, unicode-string, is-empty

不确定这是新手错误还是愚蠢的错误，但我面临着这个奇怪的问题。我声明了一个 unicoded 字符串`classifier = u"''"`，我正在检查它是否为空。以下代码块：

```
if classifier: 
   # do something
else:
   # else do something else 
```

因为有`''`嵌入，所以会碰到 else 块。我无法控制源生成分类器字符串。

只有当分类器可以以某种方式返回嵌入式`''`时，我才能检查 的空性`classifier`，但不确定如何。如果有任何帮助，则从object`classifier`收集。`HttpRequest``classifier = request.GET.get('c', '')`

编辑：

`classifier[1:-1]`返回`u''`现在可以检查是否为空。任何可以使用的内置方法？

我现在将继续使用这种方法。但是，如果有任何其他高级指针，请将帖子打开。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:39:25.097

你可以这样做：

```
if classifier.strip("'"): 
   # do something
else:
   # else do something else 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:39:51.807

```
if len(classifier) > 2:
    # do something
else:
    # do something else 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T00:16:43.683

在决定如何解析数据之前，您必须真正了解数据的含义。只是随机破解它直到它适用于一个例子是没有帮助的。

因此，您从 URL 中获取字符串，它看起来像这样：

> http:///a=maven&v=1.1.0&classifier=''&ttype=pom

通常，当给定一个 URL 时，正确的做法是调用然后[`urlparse.urlparse`](http://docs.python.org/2/library/urlparse.html#urlparse.urlparse)调用[`urlparse.parse_qs`](http://docs.python.org/2/library/urlparse.html#urlparse.parse_qs). `query`但这实际上并没有帮助，因为这实际上不是一个有效的 URL。

好吧，它*是*一个有效的 URL，但它是一个带有 path 的 URL，而`<someurl>/a=maven&v=1.1.0&classifier=''&ttype=pom`不是一个带有 path`<someurl>/`和 query的 URL `a=maven&v=1.1.0&classifier=''&ttype=pom`。您需要一个`?`来触发查询。

而且，最重要的是，查询显然没有正确生成。您不要在查询中引用空字符串。你不引用*任何东西*（你实体转义＆符号和百分比转义任何其他特殊字符）。因此，除非 URL 字面意思是分类器`''`而不是空字符串，否则它是错误的。

而且，如果它没有错，你就不会问这些问题。

如果您对这些 URL 的生成方式有任何控制权，那么显然您希望得到修复。如果您无法控制它，但至少知道它们是如何生成的，您可以编写代码来反转它以获得原始值。但如果你连这一点都不知道，你就不得不猜测。

理想情况下，您需要不止一个示例来猜测。它们是仅引用空字符串，还是也引用带有`"`字符或空格或与号的字符串？如果是后者，您可能只是`strip("'")`，但如果是前者，则在原始数据实际上有引号的任何情况下都是不正确的。

# c# - 如何从 ASP.NET 4.0 中的会话中获取值并将其存储到文本框/标签

> ID：14656699
> 
> 赞同：3
> 
> 时间：2013-02-01T23:17:03.657
> 
> 标签：c#, .net, session, textbox

我必须参加一个学校项目，我必须建立一个 asp.net (4) 站点，我需要从会话变量中获取一个值并将其存储在文本框或标签中。到目前为止，我一直在尝试使用文本框........我被卡住了。

我的会话变量在页面 Default.aspx 上声明：

```
Session["user"] = username; 
```

我在 Home.aspx 页面上的文本框代码：

```
<div class="content"><!--D2-->
<form id="form1" runat="server">
    <div class="logged"><!--D3-->
        <p class="i_am">You are logged in as:<asp:TextBox ID="txt_loggedas"      runat="server" ></asp:TextBox>
        </p>
        <asp:LinkButton ID="LinkButton1" runat="server" OnClick="LogOut">[Log Out]</asp:LinkButton> 
```

我尝试了来自此链接的答案：[如何在 ASP 文本框中显示会话值](https://stackoverflow.com/questions/6791030/how-to-display-a-session-value-in-an-asp-textbox)，但我没有成功 x-(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T23:52:15.287

在 Default.aspx.cs 文件中，您可以像这样获取会话的值：

```
txt_loggedas.Text = Session["user"].ToString(); 
```

# javascript - 试图将一个变量增加 1，但它似乎本身就加倍了

> ID：14656702
> 
> 赞同：2
> 
> 时间：2013-02-01T23:17:20.443
> 
> 标签：javascript, jquery

我已经开始做测验了。但是，我想在每个问题之后遍历数组。一旦我单击 question_holder div（现在占位符，最终将是正确答案），变量 x 似乎是 DOUBLING。

它变为 1、2、4、8。但是，当我提醒该值时 - 它实际上是递增 1。它只是没有提出正确的问题，它遍历所有问题，直到它达到两倍的价值，并将这个问题呈现给用户。

有人知道为什么会这样吗？

```
function question(q, a, b, c) {
    this.q = q;
    this.a = a;
    this.b = b;
    this.c = c;
}

//all questions//
var q0 = new question("question1", "answer a", "answer b", "answer c")
var q1 = new question("question2", "answer d", "answer e", "answer f")
var q2 = new question("question3", "answer g", "answer h", "answer i")
var q3 = new question("question4", "answer j", "answer k", "answer l")
var q4 = new question("question5", "answer m", "answer n", "answer o")
var q5 = new question("question6", "answer p", "answer q", "answer r")
var q6 = new question("question7", "answer s", "answer t", "answer u")
var q7 = new question("question8", "answer v", "answer w", "answer x")

//array to hold all of the questions
var all_questions = [q0, q1, q2, q3, q4, q5, q6, q7];

/*i want to increment this variable by 1 each
    time time i run the new_Question() function.
    */
var x = 0;

$(document).ready(function () {

    new_Question();

    function new_Question() {
        $("#question_holder").text(all_questions[x].q);

        var answer_holders = $("answer_holder");

        $(".answer_holder").eq(0).text(all_questions[x].a);
        $(".answer_holder").eq(1).text(all_questions[x].b);
        $(".answer_holder").eq(2).text(all_questions[x].c);

        $("#question_holder").click(new_Question);

        x++;
        alert(x);
    }
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:20:03.067

在您的事件处理程序（“new_Question”）中，您在每次点击时将其作为事件处理程序附加。您只需要这样做一次，因此将该行移到函数之外。

所以，移动这个：

```
 $("#question_holder").click(new_Question); 
```

在“new_Question”函数结束之后（但仍在“就绪”处理程序中）*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:24:23.677

@Pointy 是对的。

处理此问题的另一种方法是在再次绑定之前取消绑定单击。

```
function new_Question() {
    $("#question_holder").text(all_questions[x].q);

    var answer_holders = $("answer_holder");

    $(".answer_holder").eq(0).text(all_questions[x].a);
    $(".answer_holder").eq(1).text(all_questions[x].b);
    $(".answer_holder").eq(2).text(all_questions[x].c);
    $("#question_holder").unbind("click").click(new_Question);

    x++;
    alert(x);
} 
```

# mule - Mule ESB：XML 到映射转换失败

> ID：14656705
> 
> 赞同：0
> 
> 时间：2013-02-01T23:17:43.893
> 
> 标签：mule

我的 JMS 主题中有消息要读取并使用 Mule JDBC 数据库适配器存储在表中，我知道我必须将 JMS XML 消息转换为映射有效负载以便轻松将其放入 JDBC。这里是样本流程：

```
<flow name="DBLoggerFlow">
  <jms:inbound-endpoint topic="${topic.logTopic}"
         connector-ref="jmsConnector" doc:name="JMS">
    <jms:transaction action="NONE" timeout="${queue.transaction.timeout}" />
  </jms:inbound-endpoint>
  <jdbc:xml-to-maps-transformer name="XMLToMaps"/>
  <jdbc:outbound-endpoint queryKey="insertion"
           connector-ref="insertionConnector"/>
</flow> 
```

但是，当我运行代码时出现此错误：

```
错误 2013-02-01 13:00:26,427 [WrapperListener_start_runner] org.mule.module.launcher.application.DefaultMuleApplication: null
org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“jdbc:xml-to-maps-transformer”开头的无效内容。' 之一是预期的。
        在 org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException（未知来源）
        在 org.apache.xerces.util.ErrorHandlerWrapper.error（未知来源）
        在 org.apache.xerces.impl.XMLErrorReporter.reportError（未知来源）
        在 org.apache.xerces.impl.XMLErrorReporter.reportError（未知来源）
        在 org.apache.xerces.impl.XMLErrorReporter.reportError（未知来源）
        在 org.apache.xerces.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError（未知来源）
        在 org.apache.xerces.impl.xs.XMLSchemaValidator.reportSchemaError（未知来源）
        在 org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement（未知来源）

```

为什么 XML 到 Map 的转换在这里是个问题？有没有替代或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:32:02.933

> 为什么 XML 到 Map 的转换在这里是个问题？

仅在`xml-to-maps-transformer`Mule Entreprise Edition 中可用：您可能在 CE 上运行。

> 有没有替代或更好的方法来做到这一点？

在 JDBC 语句中使用 MEL`xpath()`表达式直接从 XML 有效负载中检索值并将它们传递给 DB。

阅读 MEL 备忘单以获取语法信息：http: [//blogs.mulesoft.org/wp-content/uploads/2012/12/refcard-mel.pdf](http://blogs.mulesoft.org/wp-content/uploads/2012/12/refcard-mel.pdf)

# javascript - 将字符串解码为整数列表

> ID：14656709
> 
> 赞同：1
> 
> 时间：2013-02-01T23:18:07.637
> 
> 标签：javascript

如何将长度为 4 的倍数的字符串解码为 javascript 中的 32 位整数列表？

在 python 中相当于 struct.unpack('>16I, 16characterstring) 的东西。我可以使用通用的外部库。我正在寻找一些干净的东西，希望能避免位移和操纵。

例子，

```
"deadbeef" -> (1684365668, 1650812262)

"dead" -> [1684365668]
"beef" -> [1650812262] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:29:20.683

[https://github.com/vjeux/jParser](https://github.com/vjeux/jParser)怎么样- 这个库看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T02:04:10.513

这是一种略有不同的方法 - 不需要字符类型。使用乘法作为位移技术。我写了它，所以当 str.length 不是 4 的倍数时它仍然可以工作 - 但事实上你确实在你的问题中声明它会......

注意 - 我没有尝试做“聪明的编码” - 所以我确保事情是明确分配的，一次一个语句，......你可能会想出一种更紧凑的方式来实现同样的事情。不过，这应该会给您一些启发。

```
function stringToIntArray(str) {
  var l = Math.ceil(str.length/4);  // not needed if you are sure it's a multiple of 4
  var opArray = new Array(l);       // known length - miniscule speed advantage?
  var ii=0, jj=0, charCounter=0;    // ii loops over 4-char word-of-interest
                                    // jj counts elements in the output array
                                    // charCounter points to the current character
  opArray[0]=0;
  while( charCounter < str.length ) {
    ii = charCounter % 4;     // count 0, 1, 2, 3, 0, 1, 2, 3...
    opArray[jj] *= 256;                 // left shift 8 bits
    opArray[jj] += str.charCodeAt(charCounter);  // add next code
    if(ii==3) {
      opArray[++jj]=0; 
      }
    charCounter++;
  }
  return opArray;
}

var myval = stringToIntArray("deadbeef");
alert("'dead' turns into " + myval[0] + "\n'beef' turns into " + myval[1]); 
```

输出：

```
'dead' turns into 1684365668
'beef' turns into 1650812262 
```

结果符合预期；不需要兼容 HTML5 的浏览器；并且是大端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:36:10.567

这使用 HTML5 类型的数组，因此它确实需要[现代浏览器](http://caniuse.com/#feat=typedarrays)

```
function strToU32(str) {
    var u8 = new Uint8Array(str.length);
    str.split("").forEach(function(char,i){ 
        var code = char.charCodeAt(0); 
        u8[i] = code;
    })

    var u32 = new Uint32Array(u8.buffer);
    return u32;
} 
```

用法：

```
var integers = strToU32("abcdefgh");
console.log(integers[0]); // returns 1684234849
console.log(integers[1]); // returns 1751606885 
```

# perl - 在 Perl 中使用 Stat() 获取文件的 DateModifed - 不适当的 I/O 控制操作

> ID：14656712
> 
> 赞同：0
> 
> 时间：2013-02-01T23:18:29.247
> 
> 标签：perl, stat

我正在尝试读取文件的 datemodified 值，但我一直无法这样做。我不断收到“不适当的 I/O 控制操作”错误。这是我正在尝试读取的 Windows 目录结构。我试图将完整的文件路径连同文件名 ($outputFilePath."/".$files) 传递给 stat() 函数（$! 在这种情况下什么也不返回，程序也直接死掉了）就像使用没有结果的文件句柄（如下）一样。任何帮助表示赞赏。

```
chdir($outputFilePath);
opendir(my $dirHandle, $outputFilePath) or die "Cannot opendir $outputFilePath: $!";
my $files;
my $modTime; 
#print getcwd();
while($files = readdir($dirHandle)){
  if($files ne '.' && $files ne '..'){
    open(my $fileHandle, $files) or die "Cannot open $files: $!";
    $modTime = (stat($fileHandle))[9] or die "Cannot stat file $files: $!";
    print $files."-".$modTime."\n";
    close($fileHandle);
   }
}
closedir($dirHandle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:47:23.753

`readdir`在它正在读取的目录中生成文件名列表，即没有任何路径信息。

所以你需要 open`"$outputFilePath/$files"`而不是`$files`.

请注意，它`stat`适用于文件名以及（甚至优于）文件句柄。因此，您只需调用`stat`文件名即可省去打开和关闭文件句柄的麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:10:07.957

以下使用[fileglob 运算符](http://books.google.com/books?id=qhV2XYSgTaMC&pg=PA92&lpg=PA92&dq=Perl%20glob%20angle-bracket%20operator&source=bl&ots=j_MkDNmS9n&sig=pMzrHnK2u2Prp-_HQatzbLyGLXA&hl=en&sa=X&ei=2roMUZyzK5DSigKPvYCgBQ&ved=0CC0Q6AEwADgK#v=onepage&q=Perl%20glob%20angle-bracket%20operator&f=false)获取目录中文件列表的内容可能会对您有所帮助：

```
use strict;
use warnings;
use File::stat;

my $outputFilePath = 'C:\Moodle\server\php';
chdir $outputFilePath;

print "$_-" . stat($_)->mtime . "\n" for <*>; 
```

部分输出：

```
cfg-1292006858
data-1324925198
DB-1324925198
debugclient-0.9.0.exe-1198234832
...
tmp-1292006858
www-1292006858
xdebug.txt-1198234860
zendOptimizer-1324925193 
```

最后一行：

```
print "$_-" . stat($_)->mtime . "\n" for <*>;
        ^       ^         ^              ^^
        |       |         |              ||
        |       |         |              |+ - All files ( use <*.txt> to get only text files )
        |       |         |              + - glob angle-bracket operator generates list of file names in dir
        |       |         + - Get modification time
        |       + - Stat on file
        + - File name 
```

希望这可以帮助！

# iphone - UIWebView 中的 iFrame 加载容器 UIWebView 内 iframe 的内容

> ID：14656713
> 
> 赞同：2
> 
> 时间：2013-02-01T23:18:30.227
> 
> 标签：iphone, uiwebview

在 UIWebView 中打开这样的页面会导致 WebView 加载应该在 iframe 中加载的 URL .... 这可以更改吗？即，WebView 可以“停留”在主页上，并在 iFrame 中加载其他页面吗？

MAIN.HTML：（为简单起见缩短）

```
<html>
   Hello, see the content of the iframe below
   <iframe scr=iframe.html />
</html> 
```

问题 - UIWebView 将加载 iframe.html，而不是 Main.Html，其中包含 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:23:43.493

Maybe you could download page and then feed UIWebView with string?

# c# - CefGlue：引发无法在 DLL“libcef”中找到名为“cef_build_revision”的入口点

> ID：14656714
> 
> 赞同：0
> 
> 时间：2013-02-01T23:18:42.177
> 
> 标签：c#

我为 .NET 3.5 编译了 CefGlue（因为提供的二进制文件适用于 4.0）。将新编译的库放到我的项目 bin 文件夹中，但是当我尝试运行我的项目（本质上是一个副本 ox CefGlue.Demo.WinForms）时，它会抛出

```
Unable to find an entry point named 'cef_build_revision' in DLL 'libcef'. 
```

尽管我检查了所有库是否都已到位。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-19T22:02:16.600

看来[http://xilium.bitbucket.org/cefglue/](http://xilium.bitbucket.org/cefglue/)是一个死链接。

但是，这是一种解决方法。

从这里下载二进制文件：http: [//opensource.spotify.com/cefbuilds/index.html](http://opensource.spotify.com/cefbuilds/index.html)

我正在使用：09/30/2017 - CEF 3.3163.1671.g700dc25 / Chromium 61.0.3163.91

从这里下载源代码： [https ://bitbucket.org/xilium/xilium.cefglue/downloads/](https://bitbucket.org/xilium/xilium.cefglue/downloads/)

编辑文件：xilium-xilium.cefglue-cc23b1​​4f414c\CefGlue\Interop\version.g.cs

我更改了哈希以匹配：

```
 //public const string CEF_API_HASH_PLATFORM_WIN = "320c07833219b7b5aca7fc04e186eb9c5b4bca31";
    public const string CEF_API_HASH_PLATFORM_WIN = "7073dfbda7859ff1a53ac4d30d6e9d4fc8e96b7e"; 
```

构建 Windows 窗体演示。

从以下位置复制文件：cef_binary_3.3163.1671.g700dc25_windows32\Release*

至：xilium-xilium.cefglue-cc23b1​​4f414c\CefGlue.Demo.WinForms\bin\x86\Debug

同时复制资源：cef_binary_3.3163.1671.g700dc25_windows32\Resources*

至：xilium-xilium.cefglue-cc23b1​​4f414c\CefGlue.Demo.WinForms\bin\x86\Debug

然后运行演示应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T02:17:12.870

看来我使用旧版本的 CEF 与那里引用的相比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:13:22.923

将 CEF 二进制文件放在与 exe 相同的文件夹中

您可以从这里下载[http://xilium.bitbucket.org/cefglue/](http://xilium.bitbucket.org/cefglue/)

# javascript - Jquery检查tr是否没有带有类的项目并删除重复项

> ID：14656715
> 
> 赞同：1
> 
> 时间：2013-02-01T23:18:48.727
> 
> 标签：javascript, jquery

我有这样的html表：

```
<div class="1233">hello</div>
<table cellpadding="0" cellspasing="0" class="sortable zebra tablesorter tablesorter-default"
id="articles-table">
    <thead>
        <tr class="tablesorter-headerRow">
            <th data-column="0" class="tablesorter-header">
                <div class="tablesorter-header-inner">Производитель<i class="tablesorter-icon"></i>
                </div>
            </th>
            <th data-column="1" class="tablesorter-header">
                <div class="tablesorter-header-inner">Артикул<i class="tablesorter-icon"></i>
                </div>
            </th>
            <th data-column="2" class="tablesorter-header">
                <div class="tablesorter-header-inner">Описание<i class="tablesorter-icon"></i>
                </div>
            </th>
            <th data-column="3" class="tablesorter-header">
                <div class="tablesorter-header-inner"><i class="tablesorter-icon"></i>
                </div>
            </th>
            <th class="prcol  tablesorter-header tablesorter-headerSortDown" data-column="4">
                <div class="tablesorter-header-inner">Цена<i class="tablesorter-icon"></i>
                </div>
            </th>
            <th data-column="5" class="tablesorter-header">
                <div class="tablesorter-header-inner">Наличие<i class="tablesorter-icon"></i>
                </div>
            </th>
            <th data-column="6" class="tablesorter-header">
                <div class="tablesorter-header-inner">Сроки поставки<i class="tablesorter-icon"></i>
                </div>
            </th>
            <th data-column="7" class="tablesorter-header">
                <div class="tablesorter-header-inner"><i class="tablesorter-icon"></i>
                </div>
            </th>
        </tr>
    </thead>
    <tbody class="analogs_art">
        <tr class="zebra-stripe zebra-grey zebra2 even">
            <td>
                 <h5>Knecht</h5>
            </td>
            <td>
                 <h4>OC90</h4>
            </td>
            <td style="max-width: 300px;">(07786171)Фильтр масл OPEL (07786171)Фильтр масл OPEL</td>
            <td></td>
            <td>6124</td>
            <td>20</td>
            <td>0-1</td>
            <td id="to_cart_and_qnt_td">
                <form accept-charset="UTF-8" action="/line_items" method="post">
                    <div style="margin:0;padding:0;display:inline">
                        <input name="utf8" type="hidden" value="✓">
                        <input name="authenticity_token" type="hidden" value="0jlRLSkDKi6eM5SSL+3uRB0w2G141KUcJKuy4Bg2YNo=">
                    </div>
                    <input id="ART" name="ART" type="hidden" value="y1M1ZtdXgnMe6pOjjuXWPqhYR41SmQRKzlDOQ1uPwuru+AamPGpcOwOFFylbRDu5M1XUawCnukqNDQCuIr0JPA==--vNGx6/lYKRrpD5NGTJALcQ==">
                    <input id="price" name="price" type="hidden" value="TodzvfOZCbK5T9+RLE1IQg==--qq8o30c5rTX91F8W42wdsQ==">
                    <input id="distributor_id" name="distributor_id" type="hidden" value="6">
                    <input id="waittime" name="waittime" type="hidden" value="1">
                    <input class="qnt_to_cart2" id="OC90" name="cart_quantity" pattern="0|[1-9]\d{0,2}"
                    required="required" type="text" value="1">
                    <input class="orange-button to-cart_no" id="OC90" name="commit" type="submit"
                    value="В корзину">
                </form>
            </td>
        </tr>
        <tr class="zebra-stripe zebra-grey zebra2 odd">
            <td>
                 <h5>KNECHT</h5>
            </td>
            <td>
                 <h4>OC 90</h4>
            </td>
            <td style="max-width: 300px;">Масляный фильтр</td>
            <td> <a href="/articles/1248525/details" class="details-link">подробнее</a>

                <a
                href="/articles/1248525" class="analogs-link">аналоги</a>
            </td>
            <td>6124</td>
            <td>20</td>
            <td>0-1</td>
            <td id="to_cart_and_qnt_td">
                <form accept-charset="UTF-8" action="/line_items" method="post">
                    <div style="margin:0;padding:0;display:inline">
                        <input name="utf8" type="hidden" value="✓">
                        <input name="authenticity_token" type="hidden" value="0jlRLSkDKi6eM5SSL+3uRB0w2G141KUcJKuy4Bg2YNo=">
                    </div>
                    <input id="ART" name="ART" type="hidden" value="9x6mdLbW2aMaHqFK32kZwHWnWA7n0GBp/jXS8KeECsTS+78ytG0SQzFpVODplws5iHm6B6SkZzi3ej2+zpW8iQ==--RNoUUgcZu7MLU8BHJ4ynSQ==">
                    <input id="price" name="price" type="hidden" value="VqatEYzkPEf3P9Y/jNY9Zg==--Iw5nQDqjK9vvZX/RecD1eA==">
                    <input id="distributor_id" name="distributor_id" type="hidden" value="6">
                    <input id="waittime" name="waittime" type="hidden" value="1">
                    <input class="qnt_to_cart" id="cart_quantity" name="cart_quantity" pattern="0|[1-9]\d{0,2}"
                    required="required" type="text" value="1">
                    <input class="orange-button to-cart" name="commit" type="submit" value="В корзину">
                </form>
            </td>
        </tr>
        <tr class="zebra-stripe zebra-grey zebra1 even">
            <td>
                 <h5>Knecht</h5>
            </td>
            <td>
                <h4>OC90</h4>
            </td>
            <td style="max-width: 300px;">Фильтр масляный OPEL/GM/DAEWOO Фильтр масляный OPEL/GM/DAEWOO</td>
            <td></td>
            <td>6142</td>
            <td>1000</td>
            <td>3</td>
            <td id="to_cart_and_qnt_td">
                <form accept-charset="UTF-8" action="/line_items" method="post">
                    <div style="margin:0;padding:0;display:inline">
                        <input name="utf8" type="hidden" value="✓">
                        <input name="authenticity_token" type="hidden" value="0jlRLSkDKi6eM5SSL+3uRB0w2G141KUcJKuy4Bg2YNo=">
                    </div>
                    <input id="ART" name="ART" type="hidden" value="NqgWSvcdv0FEQkjcJZp98gIYe20Fjol8Bn31tB/CjWnTFVsa3J3hmldO1RSqS/pNUcVZ5dh0wcP7YeZxPAkQc4DEPKy7EVuTpMw3oQw58T0=--/XCn0hP3w0mglJ1vTXSjHw==">
                    <input id="price" name="price" type="hidden" value="mFPLSHh7AdEMpQJiZHFKNg==--hfJQGWhjBoD6mNAetXZ3Xw==">
                    <input id="distributor_id" name="distributor_id" type="hidden" value="6">
                    <input id="waittime" name="waittime" type="hidden" value="3">
                    <input class="qnt_to_cart2" id="OC90" name="cart_quantity" pattern="0|[1-9]\d{0,2}"
                    required="required" type="text" value="1">
                    <input class="orange-button to-cart_no" id="OC90" name="commit" type="submit"
                    value="В корзину">
                </form>
            </td>
        </tr>
    </tbody>
</table> 
```

如何在我的 jscript 中：

```
if(tr.not('.details-link')){ 
```

我可以不理会没有 class = details-link 的此类 td 吗？现在我的代码不起作用....

只需跳过编辑我的代码，这样如果 tr 没有类，我会做一些事情.... 怎么做？

**upd** 我需要这样做：http: **[//jsfiddle.net/zvKSc/8/](http://jsfiddle.net/zvKSc/8/)**

删除重复项（通过小写和删除空格必须相等的 1,2,5 列...），但在页面上保留这样的 tr，其中一个 td 我有类详细信息链接...所以从三个 i必须先删除，留下第二个和第三个tr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:21:42.027

```
if(!$('tr').hasClass('details-link')) {

// code to execute if tr does not have class

} 
```

Check out hasClass method: [http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

# bash - 我非常基本的命令在 cron 上失败，但在其他情况下运行良好，在 bash

> ID：14656722
> 
> 赞同：0
> 
> 时间：2013-02-01T23:19:08.713
> 
> 标签：bash, cron, debian, command-line-interface, sh

我正在尝试这个非常基本的东西，输出一个随机数：

```
NUMBER=$[ ( $RANDOM % 500 )  + 1 ]; echo $NUMBER > /tmp/out 
```

它直接在 Debian 的 CLI 上运行良好，但是当我尝试 cron 时，可以按原样：

```
* * * * * NUMBER=$[ ( $RANDOM % 500 )  + 1 ]; echo $NUMBER > /tmp/out 
```

或者以各种方式在脚本的一部分中，它在我的电子邮件警报中始终失败，因为：

```
/bin/sh: Syntax error: "(" unexpected 
```

我非常缺乏实践，所以我希望这是显而易见的。我已经尝试了所有我能想到的包围类型组合，但没有运气。我错过了什么？

我收到的完整邮件提醒是：

```
From: Cron Daemon 
Sent: Friday, February 01, 2013 2:41 PM
Subject: Cron <root@host> NUMBER=$[ ( $RANDOM (failed)

/bin/sh: Syntax error: "(" unexpected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:23:51.350

`%`正如 F. Hauri 指出的那样，除了转义符号之外，还`cron`使用 ​​运行命令`/bin/sh`，这不一定支持 bash 所做的所有功能。

```
* * * * * bash -c 'NUMBER=$[ ( $RANDOM \% 500 )  + 1 ]; echo $NUMBER > /tmp/out' 
```

或者更好的是，将命令放入脚本中`#!/bin/bash`并从`crontab`.

# javascript - Asp net mvc Form 不会在提交时发布所有字段，因为它应该发布

> ID：14656726
> 
> 赞同：1
> 
> 时间：2013-02-01T23:19:31.477
> 
> 标签：javascript, jquery, html, forms

我在我的 asp net mvc 应用程序中有这个表单，在表单上方检查发布的字段。他们中有几个失踪了。无法理解为什么

```
<form id="FormRegistroUsuario" action="/Account/AdminSecurityUserAccountAdd">
   <fieldset>
        <legend><h2 style="color:black;">Cadastro novo Usuário</h2></legend>
        <table id="tblUsuario">
            <tr>
                <td class="smallField">Username:</td>
                <td>@Html.TextBoxFor(m => m.UserName,new { @class = "validate[required]" }) </td>
                <td class="smallField" style="padding-left:10px;">Email:</td>
                <td>@Html.TextBoxFor(m => m.Email, new { @class = "validate[required,custom[email]]" }) </td>
                <td style="padding-left:10px;">Ativo:</td>
                <td>@Html.CheckBoxFor(m => m.Active)</td>
            </tr>
            <tr>
                <td class="smallField">Senha:</td>
                <td>@Html.PasswordFor(m => m.Password, new { @class = "validate[required, minSize[7]]" }) </td>
                <td style="padding-left:10px;">Repetir Senha:</td>
                <td>@Html.PasswordFor(m => m.ConfirmPassword, new { @class = "validate[required,equals[Password]]" }) </td>
                <td style="font-size:10px; padding-left:10px;">Habilitar Login com Cert. Digital:</td>
                <td>@Html.CheckBoxFor(m => m.isCertifiedAdd)
                    <div id="certDigitalBlockAdd">
                        <table>
                            <tr>
                                <td class="smallField">Tipo do Certificado:</td>
                                <td>@Html.DropDownListFor(m => m.certTypeAdd, new SelectList(Model.certTypeComboBox, "id", "type"), "Escolha...", new { @class="smallField" })</td>
                                <td style="display:none;">@Html.Hidden("certTypeAddHidden")</td>
                            </tr>
                            <tr>
                                <td>Identificação:</td>
                                <td>@Html.TextBoxFor(m => m.identifierAdd, new { @class = "validate[required] smallField" })</td>
                                <td style="display:none;">@Html.Hidden("identifierAddHidden")</td>
                            </tr> 
                        </table>
                    </div>  
                </td>
            </tr>
            <tr>
                <td class="smallField">Pergunta Secreta:</td>
                <td>@Html.TextBoxFor(m => m.SecretQuestion, new { @class = "validate[required]" }) </td>
                <td style="padding-left:10px;">Resposta:</td>
                <td>@Html.TextBoxFor(m => m.SecretQuestionPassword, new { @class = "validate[required, minSize[6]]" }) </td>
                <td></td>
                <td></td>
            </tr>                                     
        </table>
        <br />
        <div class="scrollTable" style="margin-left:20px;">
            <span class="boxTitle"><table><tr><td>Grupos Disponíveis</td></tr></table></span>
            <!-- Tipos -->
            <div class="scroller">
                <table>
                    <!-- Indices Disponíveis (Exibidos) --> 
                    @{
                    counter = 1;
                    }
                    @foreach (var role in Model.roles)
                    {
                    <tr id="@counter" class="whiteRow setIndex"> 
                        <td class="adminTipoFormRowIndex">@role</td>
                    </tr>
                        counter++;
                    }
                </table>
            </div>
        </div>
        <div class="scrollTable" style="margin-left:60px;">
            <span class="boxTitle"><table><tr><td>Grupos Atribuidos</td></tr></table></span>
            <!-- Tipos -->
            <div class="scroller scrollerindex">
                <table>
                 @{
                 counter = 1;
                 }
                 @foreach (var role in Model.roles)
                 {
                    string count = counter + "_a";
                    string inputCount = counter + "_i"; 
                    <tr id="@count" class="whiteRow unsetIndex" style="display:none;"> 
                        <td class="adminTipoFormRowIndex">@role</td>
                        <input type="hidden" id="@inputCo**strong text**unt" name="rolesGroup" value="@role" disabled="disabled"/>
                    </tr>
                     counter++;
                 }
                </table>
            </div>
        </div>
       <input type="submit" value="Salvar" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only button-link submitAddTipo"/>         
    </fieldset>        
</form> 
```

JS：

```
$('#FormRegistroUsuario').submit(function (e) {
        e.preventDefault();
        var form = $(this);
        console.log(form.serialize());
    }); 
```

已发布的字段：

```
UserName=Guilherme
Email=grlongo.ireland%40gmail.com
Active=true
Active=false
Password=%23t1g2p3&
ConfirmPassword=%23t1g2p3&
isCertifiedAdd=true
isCertifiedAdd=false
SecretQuestion=Qual+a+senha%3F&
SecretQuestionPassword=secreta
rolesGroup=Administrador 
```

不管我使用@Ajax.beginForm 还是这种方法，结果都是一样的。

*   使用 Ajax.beginForm 发送
*   和ajax提交句柄
*   创建隐藏的附加隐藏字段以检查它们是否会被发布（并且不会）。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:26:13.100

当你在一个数组中循环时，你需要在 HTML 中使用相同的技术......

例如，在您的`Model.roles`收藏中，您需要这样做：

```
@for (int counter = 0; counter <= Model.roles.Count(); counter++)
{
    var role = Model.roles[counter];

    <input type="checkbox" 
           id="roles_@counter" 
           name="roles[@counter]" 
           value="@role" @(role.active ?? "checked='checked'" : "" />
} 
```

*为简化而删除的代码*

**请记住**，永远不会发布任何空白字段...

顺便说一句：您的表单中确实只有一个`Active`属性，但是通过提交它会写入其中两个...您生成的 HTML 是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:05:56.873

发现了问题。隐藏字段位于获取的 div 内，`display:none`因此不会发布值。刚刚移到我的表格顶部，它现在正在工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-31T10:31:14.540

我有一个类似的问题。我只使用了没有名称的 ID 属性。添加名称属性后，该字段已提交。

前：

```
<input type="text" id="txt" class="form-control" /> 
```

使固定：

```
<input type="text" id="txt" name=txt class="form-control" /> 
```

# php - 在 codeigniter 中搜索

> ID：14656727
> 
> 赞同：1
> 
> 时间：2013-02-01T23:19:38.063
> 
> 标签：php, codeigniter

我有一个存储旅行详细信息的旅行表。其中一个字段存储日期，类型为 DATETIME 。我正在按日期创建搜索查询。

```
$q can be
$q = 2012   when searching for years
$q = 1-12   when searching for months
$q = 1-31   when searching for days 
```

但是在搜索时，比如说表格中的**02**月，并且有很多行，其中一些是 `2002-02-13 04:44:48, 2013-02-13 04:44:48, 2013-02-13 02:44:48`etc，它们都会显示出来，因为它们都包含**02**。但我的意图是在本月获得**02的行。**我该怎么做以及合适的方法是什么。

```
 function search($q){

        $this->db->select('*');
        $this->db->from('trips');
        $this->db->like('date',$q);

        // Execute the query.
        $query = $this->db->get();

        // Return the results.
        return $query->result_array();
    } 
```

我可以通过在不同的字段中存储日、月、年来完成它，但是有没有按照我所说的方式来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T04:36:49.777

试试这个，而不是你的`like`条款：

```
$this->db->where(array('MONTH(`date`)'=>$q)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:30:39.323

尝试使用本机 sql 查询，您可以这样做

```
$month = 02;
$sql = "SELECT MONTH(date) FROM notification where MONTH(date) = ?;";
$query = $this->db->query($sql,array($month)); 
```

***MySQL 具有与日期时间字段一起使用的函数，如 、月、日和年。***

# ssis - 是否可以有多个 SSIS 环境，每个环境都指向它们自己的数据库，同时在同一台 PC 上运行？

> ID：14656728
> 
> 赞同：0
> 
> 时间：2013-02-01T23:19:42.523
> 
> 标签：ssis

我是 SSIS 的新手，但是我正在尝试做一些我认为应该是 SSIS 非常简单的用例的事情，但我似乎找不到解决方案。

长话短说，我试图让两个 SSIS 环境（例如，DEV1 和 DEV2）在同一台 PC 上*独立运行。*有时我必须*在同一时间框架内*进行持续的开发工作和紧急错误修复。

出于这个原因，使用系统环境变量来保存数据库连接字符串之类的东西是行不通的，因为 DEV1 和 DEV2 指向他们自己的数据库，每个数据库都有自己的连接字符串（我不想手动设置环境变量因为这很容易出错）。

此外，另一个要求是我需要在我的 DEV1 和 DEV2 环境之间自由复制包，而不必编辑包来重置包变量等（例如，一些变量包含指向相应环境的数据文件/文件夹的路径）。

我们在开发环境中使用 SQL Server/BIDS 2008 R2...

我尝试过但没有成功的事情：

(1) XML 配置文件 - XML 文件的路径是硬编码的，所以当我将使用 XML 配置文件的包从 DEV1 复制到 DEV2 时，DEV1 XML 文件在 DEV2 环境中使用 - 不好！

(2) SQL Server 配置 - SQL Server 配置表的连接字符串也被硬编码到包中，所以再一次，将使用 DB 配置的包复制到其他环境会导致使用错误的配置 - 再次，不好！

(3) 我尝试使用带有 /CONFIG 和 /COMMAND 标志的批处理文件来为包变量赋值，结果发现在 2008 R2 中，设计时变量会覆盖命令行参数 - 令人困惑！

(4) 我什至尝试使用我想要使用的环境值创建一个平面文本文件，并尝试使用基本 C# 代码读取该文件，但除非我指定绝对路径，否则即使这样也行不通，这会破坏能够在环境之间复制包而无需编辑包变量值的目的。排除绝对路径会导致异常“System.IO.FileNotFoundException：找不到文件'C：\ Documents and Settings\\DBConfiguration.txt'” - 所以基本上，仍然难倒！

在过去的几个小时里我一直在做这个，所以我很有可能已经长出了方形眼睛并且很明显地缺失了。

当然，肯定有人设法让*多个 SSIS 环境都指向自己的数据库，以便同时在同一台 PC 上运行*？

提前感谢，DJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:30:05.227

当我在同一实例上托管开发和测试的环境中工作时，我们是这样解决它的。

我们使用了 SQL Server 配置。我们所有的包都有一个名为 SYSDBConnection 的用户变量。该变量的值是我们配置数据库的连接字符串。我们的包总是有一个用于配置和日志记录的 OLE DB 连接管理器 SYSDB。`ConnectionString`SYSDB 上的属性是一个表达式，`@[User::SYSDBConnection]`其结果是我们所有配置数据的存储库都由该变量控制。

我们所有包的设计时值都指向开发实例。DEV 中的包通常从 BIDS 的上下文中运行，但只有在 SQL 代理中记录成功执行后才能迁移到 TEST。从 TEST 开始，包总是从 SQL 代理执行，我们将为变量提供运行时值`SYSDBConnection`。

我们有一个很好的安全实践，即不为我们所有的 SQL Server 实例使用相同的服务帐户，因此 TEST 只能与 TEST 盒子范围内的其他服务器进行通信。它有助于识别未能使用配置或具有也需要迁移的新配置的软件包。在此过程中遇到了一些小问题，并且有很多抱怨，但我们从来没有遇到过这样的问题，即更改被推送到 prod 并且有人错过了配置并且突然开发数据在 prod 中。我听到的那个恐怖故事比我应该听到的还要多。

对于您的具体情况，您不是在寻找仅执行中断修复代码分支的 SQL 代理。有些东西坏了，你需要看看有什么问题并解决它。这种方法仍然适用于您。在 SSIS 项目的属性窗口中，在调试选项卡中，有一个可用的 CmdLineArguments 属性。在那里分配一个与您的测试环境相对应的值。近似于此的东西就足够了。

```
/set \Package.Variables[User::SYSDBConnection].Properties[Value];\"localhost\test" 
```

![在此处输入图像描述](../Images/58ea48dacd2552f505df0dd002f481ce.png)

我认为效果很好。

HLGEM 采用的一种方法是使用[环境变量](https://stackoverflow.com/questions/11157180/dynamically-changing-server-names-in-ssis/11159398#11159398)。相同的变量名称，但与特定用户（qa、stage 等）相关联。虽然它比我关心的用户管理更多，但我认为这是一种聪明的方法，并且在适当的情况下，我会使用它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-02T13:49:05.560

我认为您的情况是这样的：您有一个正在生产和开发中的软件包。当您忙于增强 dev 版本时，需要调试和修复 prod 版本。为了重现错误，您需要将您的包指向产品数据库。

如果这是正确的，那么这是一个可以通过版本控制处理的分支和合并问题 - 通过 TFS（或其他一些版本控制工具）或手动处理。

不知道为什么您保留了硬编码并且没有更改使用表达式来创建连接字符串。

# java - 在文件中的点之间绘制一条线

> ID：14656734
> 
> 赞同：0
> 
> 时间：2013-02-01T23:20:19.727
> 
> 标签：java, file-io, drawing, adjacency-matrix

我需要从一个格式如下的文件在java中画线：

```
5 //Number of lines of points
10   10
23   56
15   34
32   67
76   45 
```

我想我将不得不设置两个数组，然后以某种方式添加这样的值，但我完全迷失了，真的需要一些指导。任何帮助，将不胜感激！下面的代码是画线需要修改的。现在它只是绘制点。

代码：

```
import javax.swing.*;
import java.awt.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;

public class Test {

    private static final String FILE = "Desktop/Assign2Test1.txt";
    private static Point[] points;

    public static void main(final String[] args){
        try{
            final BufferedReader br = new BufferedReader(new FileReader(new File(FILE)));
            points = new Point[Integer.parseInt(br.readLine())];
            int i = 0;
            int xMax = 0;
            int yMax = 0;
            while(br.ready()){
                final String[] split = br.readLine().split("\t");
                final int x = Integer.parseInt(split[0]);
                final int y = Integer.parseInt(split[1]);
                xMax = Math.max(x, xMax);
                yMax = Math.max(y, yMax);
                points[i++] = new Point(x, y);

            }
            final JFrame frame = new JFrame("Point Data Rendering");
            final Panel panel = new Panel();
            panel.setPreferredSize(new Dimension(xMax + 10, yMax + 10));
            frame.setContentPane(panel);
            frame.pack();
            frame.setVisible(true);
            frame.repaint();
        } catch (final Exception e){
            e.printStackTrace();
        }
    }

    public static class Panel extends JPanel {

        @Override
        public void paintComponent(final Graphics g){
            g.setColor(Color.RED);
            for(final Point p : points){
                g.fillRect((int) p.getX(), (int) p.getY(), 2, 2);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:38:48.107

这里的代码将帮助您如何读取文件以及如何从中提取值。在做任何其他事情之前，首先你必须正确地做到这一点。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class BufferedReaderExample {

    public static void main(String[] sm) {

        BufferedReader br = null;

        try {

            String sCurrentLine;

            br = new BufferedReader(new FileReader("You file path"));
            String[] xy;
            // get your points and convert very first line
            int points = Integer.parseInt(br.readLine()); 
            while ((sCurrentLine = br.readLine()) != null) {
                xy = sCurrentLine.split("\\s+"); // split by whitespace
                System.out.println(xy[0] +" : "+ xy[1]);
                // Do something
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)
                                        br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }
} 
```

**编辑：** ->如果你想在两点之间画线。你必须使用`drawline()`方法。它应该像下面这样。我也给你链接如何使线是java。

[1\. 图形drawLine() API](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#drawLine%28int,%20int,%20int,%20int%29)

[2.如何在Java中画线](https://stackoverflow.com/questions/5801734/how-to-draw-lines-in-java)

```
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    for (Line line : lines) {
        g.setColor(line.color);
        g.drawLine(line.x1, line.y1, line.x2, line.y2);

    }
} 
```

如果您有任何问题，请告诉我们。

# big-o - 两个异常循环的大 O 复杂度？

> ID：14656735
> 
> 赞同：1
> 
> 时间：2013-02-01T23:20:20.923
> 
> 标签：big-o, time-complexity, pascal

我有两段单独的代码，我需要计算它们的 Big O 复杂度。第一个是：

```
k:=1;
s := 4;
while k < N do
begin
    k := 2 * k;
    m:=1;
    while m < N do
    begin
       for i := m to 2*m-1 do s := s + 2;
       m := m + m;
    end;
end; 
```

正确答案是 N*log(N)。第二段代码是：

```
m:=1;
FOR i:=n downto 1 do
BEGIN
  m:=m*2;
  y:=i MOD 2;
  x:=m;
  WHILE x>y DO
  BEGIN
     x:=x DIV 2;
     y:=y*2
 END    
END 
```

第二个的正确答案是 n*n。我似乎无法正确计算我的数学。如果你能帮助任何一个，那将是很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T00:13:46.707

让我们看一下第一段代码：

```
k := 1;
s := 4;
while k < N do
begin
    k := 2 * k;
    m := 1;
    while m < N do
    begin
       for i := m to 2*m-1 do s := s + 2;
       m := m + m;
    end;
end; 
```

需要注意的一点是，内循环和外循环是完全相互独立的，所以我们可以分别进行分析。让我们从内部循环开始。

当这个循环运行时，取值`m`将是 1、2、4、8、16、32 等，因为在每次迭代中 m 都加倍。在循环内部，还有第三个较小的循环，总共运行了 m 次。这意味着如果外部循环运行 k 次，则循环的总运行时间将由下式给出

> 1 + 2 + 4 + 8 + ... + 2 ^k

需要注意的一件事是，一旦`m`≥ ，内部循环就会终止`N`。由于在迭代`k`中 的值为`m`2 ^k，因此一旦 2 ^k ≥ ，循环就会停止运行`N`。只要 k 至少为 log [2] N，就会发生这种情况。因此，循环最多运行 log [2] N 次，所以这里完成的总工作是

> 1 + 2 + 4 + 8 + ... + 2 ^(lg N) = 2 ^(lg N + 1) - 1 = 2N - 1

在这里，我使用几何级数之和的公式来简化总和。这意味着循环体的每次迭代都会做 Θ(N) 的工作。

现在剩下要做的就是弄清楚外循环要运行多少次。请注意，与内循环一样，外循环由一个在每次迭代时加倍的变量（即`k`）控制。使用类似的逻辑，我们得到这个循环将运行 Θ(log N) 次，因此总运行时间将为 Θ(N log N)。

一些要点：

> **有用的提示 #1：**由变量控制的循环在每次迭代时大小翻倍，并在变量达到某个限制时停止 N 将运行 O(log N) 次。
> 
> **有用的提示 #2：** 1 + 2 + 4 + ... + 2 ^k = 2 ^(k+1) - 1

现在，让我们看第二段代码：

```
m := 1;
FOR i := n downto 1 do
BEGIN
  m := m * 2;
  y := i MOD 2;
  x := m;
  WHILE x > y DO
  BEGIN
     x := x DIV 2;
     y := y*2
 END    
END 
```

和以前一样，请注意变量`m`在每次迭代时都会加倍。这可能会很有趣，因为 m 的值将是 1、2、4、8、16、32、64 等。更一般地说，在迭代`i`时，`m`其值为 2 ^i。

现在，让我们看看内部循环会做多少工作。请注意，它`x`从 的值开始`m`，即 2 ^i。在循环的每次迭代中，x 减少两倍。这意味着此循环的最大可能迭代次数为 log m = log 2 ^i = `i`。这当然很好，因为这意味着内部循环总是在大多数`i`时候运行！

一旦我们有了它，确定运行时就不是很难了。由于 i 从 N 倒数到 0，所以完成的总功最多为

> n + (n - 1) + (n - 2) + ... + 2 + 1 = O(n ² )

因此运行时间为 O(n ² )。

希望这可以帮助！

# r - 在第一个 data.frame 中提取在第二个 data.frame 中找不到某些值的行

> ID：14656737
> 
> 赞同：2
> 
> 时间：2013-02-01T23:20:30.927
> 
> 标签：r, dataframe

我试图从第一个数据帧中消除第二个数据帧中具有特定值的所有行。

使用 R 编程语言进行统计数据分析。

这是我在这里发布的第一个问题，请多多包涵；）

我使用机密数据，所以我用一个例子重新创建了这个问题。

```
Name=c("Bussieres", "Nelson")
Fname=c("Paul", "Robert")
Tel=c(123,234)
comp1=data.frame(Name, Fname, Tel)

Name=c("Bussieres","Bussieres","Nelson","Nelson")
Fname=c("Robert","Paul","Paul","Paula")
Tel=c(123,234,345,456)
comp2=data.frame(Name, Fname, Tel) 
```

comp1 返回：

```
 Name Fname Tel
1 Bussieres   Paul 123
2    Nelson Robert 234 
```

comp2 返回：

```
 Name Fname Tel
1 Bussieres Robert 123
2 Bussieres   Paul 234
3    Nelson   Paul 345
4    Nelson  Paula 456 
```

现在，我想要返回 comp1 中“Name”和“Fname”在 comp2 中不相同的行。

存储在新数据帧 comp3 中的预期回报将是（**此处进行了轻微编辑，发布了错误的预期结果**）：

```
 Name Fname Tel
1    Nelson Robert 234 
```

我的第一次尝试是使用 match 功能，但这并不奏效。

下面的 for 循环尝试也没有奏效。

```
for (i in comp1[,"Name"]){for (j in comp3[,"Name"]){if i!=j return comp3=x1["Name"==i,]}} 
```

我很惊讶我在 R 中找不到基本（原始）函数来执行此操作，因为从数据集中排除某些观察结果将是一个非常常规的过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T23:59:50.893

一个`data.table`解决方案：

```
require(data.table)
dt1 <- data.table(comp1, key=c("Name", "Fname"))
dt2 <- data.table(comp2, key=c("Name", "Fname"))
dt1[!dt2]

#      Name  Fname Tel
# 1: Nelson Robert 234 
```

# asp.net-mvc - DDD/MVC Pure POCO classes can be presented directly to the View?

> ID：14656747
> 
> 赞同：1
> 
> 时间：2013-02-01T23:21:29.693
> 
> 标签：asp.net-mvc, entity-framework, architecture, domain-driven-design, dto

DDD/MVC describes keeping the damain entities and the View layers seperated, in order to keep the Views persistance ignorant and vice versa. DTO's are a way of doing this. I have looked at AutoMapper as a way to facilitate his. However, since I have recently started with EF and pure POCO classes, is seems to me that a DTO, that directly maps a persistan ignorant POCO is really just a duplicate layer that servs no purpose at all other than to be able to say you are using DTO's. What would be wrong with just simply skipping the DTO layer if your POCO is pure and persistance ignorant?

Thanks

JAMES

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:43:22.437

您必须记住的一件事是关于模型活页夹。它将绑定您的模型具有同名属性的任何已发布字段。

为了澄清这个问题，假设您正在使用这样的用户模型：

```
public class User
{
    public int UserId { get; set; }
    public string login {get; set; }
    ...
    public bool admin { get; set; }
} 
```

如果您在注册页面上使用此模型，即使您尚未为 admin 创建字段并将脚手架设置为 false，恶意用户也可以创建名为 admin 的表单字段并将其设置为 true（如复选框）你的页面。发布此表单将导致您收到的模型将此属性设置为 true，从而使用户成为管理员。

这就是为什么您必须使用防伪令牌和视图模型来减轻工作量的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:07:20.860

拥有 DTO（或 ViewModels）的原因是域对象与视图不同。

对于每个视图，您应该有一个适合它的单独视图模型。我只能包含数据和元数据，例如验证属性。

域对象不应该公开数据，而是代表业务规则的行为。

如果您的视图模型只是复制域模型。如果您的域模型没有任何方法，而只有公共属性。如果你还没有定义无处不在的语言、聚合、不变量……那么你只是不是在做 DDD，而是在做 CRUD 应用程序。在那种情况下，确实，DTO 可能毫无意义。

# python - 使用 CDATA 将 html 插入到 xml 查询中

> ID：14656749
> 
> 赞同：0
> 
> 时间：2013-02-01T23:21:43.467
> 
> 标签：python, xml

我正在尝试将 html 文件的内容插入到 xml 请求中。

我以这种方式打开 html 文件：

```
page =  open(html).read() 
```

然后以这种方式在 xml 中插入内容：

```
"<Description><![CDATA["+page+"]]</Description>"+\ 
```

这样会出错：

> XML 解析错误。
> XML 错误文本：“；嵌套异常是：org.xml.sax.SAXParseException：XML 文档结构必须在同一个实体内开始和结束。”

我假设我必须做的不仅仅是将 html 文件的内容转储到 CDATA 标记中？或者也许以不同的方式来做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:25:48.170

两个潜在问题。

首先，结束`CDATA`块的正确方法是使用`]]>`，而不是`]]`

其次，您的 HTML 数据可能包含 CDATA 块，并且[不允许嵌套 CDATA 块](http://en.wikipedia.org/wiki/CDATA#Nesting)。您可能会考虑使用 Base64 对 HTML 数据进行*编码*，例如：

```
import base64
encPage = base64.b64encode(page) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T23:23:35.457

`>`您忘记了`CDATA`元素的关闭：

```
"<Description><![CDATA["+page+"]]></Description>"+\ 
```

# java - Java object added to ArrayList not showing

> ID：14656755
> 
> 赞同：0
> 
> 时间：2013-02-01T23:22:49.783
> 
> 标签：java, android

I have two Classes:

Class1 which contains an ArrayList of type Class2

When I try to add a new object as follow:

```
Class2 object = new Class2();
Class1Object.getArrayList().add(object); 
```

Then it appears that the object has been added when I iterate over getArrayList()

However I have another ArrayList of type class1 and when I iterate over this there object added does not appear?

I thought that since objects are by reference it should be added to the ArrayList of type class1\. Can any one explain this please?

```
public class Subject implements Serializable {

private static final long serialVersionUID = 1L;
private String subjectName;
private int hours;
private int mins;
private ArrayList<Task> tasks;
private SimpleDateFormat date;

public Subject(String subjectName){
    this.subjectName = subjectName;
    hours = 0;
    mins = 0;
    tasks = new ArrayList<Task>();
    date = null;
}

public ArrayList<Task> getTasks() {
    return tasks;
} 
```

}

```
public class Task implements Serializable {

    private static final long serialVersionUID = 2L;
    private String description;
    private boolean isCompleted;

    public Task(String description){
        this.description = description;
        isCompleted = false;
    }   

} 
```

So then I have:

```
ArrayList<Subject> subjectsList = new ArrayList<Subject>(); 
```

And then I want to add a new task to a given subject so I do:

```
Task task = new Task(description);
ArrayList<Task> taskList = subject.getTasks();
taskList.add(task); 
```

And when I iterate over `subject.getTasks();` its there but when I iterate over subjectsList the new task is not there anymore.

Here is the first loop which shows the new task:

```
for (Task task : subject.getTasks()){
   System.out.println( task.toString() );
} 
```

And the code for iterating over all objects from `subjectsList`

```
for (Subject s : subjectsList){
 for (Task t : s.getTasks()){
   System.out.println( t.toString() );
    }
}

Bundle bundle = getIntent().getExtras();
  if (bundle != null) {
    subject = (Subject) bundle.get("selected_subject");
    subjectsList = (ArrayList<Subject>) bundle.get("subjects_list");
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:28:45.107

所以你有两个列表，你将一个对象添加到这两个列表之一中，并期望在第二个列表中找到它。为什么它会在第二个列表中？它们是两个不同的列表。

Java 对象就像真实的对象。如果你把一条信息放在一个瓶子里，这条信息就不会出现在所有其他瓶子里。仅在您放置它的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:28:12.863

如果您创建 2 个变量指向同一个对象，则两个引用都将包含该值，例如：

```
Class2 object = new Class2();
Class1 class1 = new Class1();
Class1 class1second = class1;
class1.getArrayList().add(object); 
```

class1 和 class1second 都包含对象

如果是

```
Class2 object = new Class2();
Class1 class1 = new Class1();
Class1 class1second = new Class1();
class1.getArrayList().add(object); 
```

只有一个对象包含该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:28:29.187

我猜这是一个范围问题。尝试使用`This.Class1Object.getArrayList().add(object);` ，因为也许您将对象添加到数组的本地化版本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T23:28:42.123

我不明白这个问题。很难理解。

但是，如果您的意思是 Class1Object 的第二个实例具有相同的 ArrayList 或者不是某个您应该注意静态的实例。

如果 ArrayList 的变量是静态的，那么这些 Class 的所有实例都共享同一个 ArrayList 实例！

除非必要，否则避免使用静态。

如果这不能解决您的问题，请提供更多示例代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T23:28:46.073

似乎您是在说您有两个列表。并且您期望添加到其中一个列表的对象自动出现在另一个列表中。

这不会发生在`ArrayList`任何其他“正常”`List`实现中。

“发生”的唯一方法是如果两个列表是同一个对象。

（我喜欢 JB Nizet 的“瓶中信息”类比。）

# php - How can I redirect a user to homepage if they change the url manually?

> ID：14656758
> 
> 赞同：0
> 
> 时间：2013-02-01T23:23:03.150
> 
> 标签：php, redirect

Let's say the user is in the page --> mysite.com/product.php?id=5 and he manually removed the ?id=5 and r=the url became this way--> mysite.com/product.php

How can I redirect him to the homepage?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:25:07.950

Just check to see if the id is missing from the query string. If so, do the redirect.

```
if (!isset($_GET['id']) || empty($_GET['id'])) {
    //redirect
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:27:34.957

如果在设置了参数的情况下仍希望页面可访问，请使用此方法：

```
if(!isset($_GET)){
    header("Location: http://mysite.com/");
    exit;
} 
```

检查是否没有变量被传递到页面，然后进行相应的重定向。
`exit`在 Header 之后确保没有任何文本发送到浏览器会破坏标题。

如果这将成为死页，请使用 403：

```
header ('HTTP/1.1 301 Moved Permanently');
header ("Location: http://mysite.com/"); 
```

# c - Pass directory as command line argument and get a file list?

> ID：14656761
> 
> 赞同：3
> 
> 时间：2013-02-01T23:23:24.557
> 
> 标签：c, directory, command-line-arguments

I'm trying to pass an archive and directory name command line arguments and extract a list of files in the directory. In eclipse I'm using "-A [archive.a] [directory_name]", but eclipse keeps trying to compile the test directory files. Any suggestions? Code sample below is a condensed version of my program: [Edit: ok, I got it to compile by moving out of the working directory...buts it's crashing at the readdir command...any tips?] [Edit: ok just found out I can manually parse the files so I guess this question is academic now. Thx all.]

```
int main(int argc, char **argv)                 
{      
    char **fileList = (char **)(malloc(sizeof(char *) * argc));
    output = argv[2];        //archive name
    DIR *d;
    struct dirent *dir;
    d = opendir(argv[3]);        //directory name

    int i = 0;
    while((dir = readdir(d) != NULL))
    {
        fileList[i] = (char *)(malloc(sizeof(char) * strlen(dir->d_name)));
        fileList[i] = dir->d_name;        //extract file names into array of strings
        ++i;
    }
    int j;
    for(j = 0; j <= argc; ++j)
    printf("%s\n", fileList[j]);        //print out list of file names

    closedir(d);
} 
```

# haskell - 没有因使用“/”而产生的 (Fractional Int) 实例

> ID：14656762
> 
> 赞同：48
> 
> 时间：2013-02-01T23:23:30.517
> 
> 标签：haskell

我是 Haskell 的新手，我正在努力调试我的代码。修复错误会导致其他错误...

这是我的代码。

```
import Data.Maybe

data Op = Add | Sub | Mul | Div | And | Or | Not | Eq | Less | Great
    deriving (Eq, Show)

data Exp = Literal Value
     | Primitive Op [Exp]
     | Variable String
     | If Exp Exp Exp
     | Let [(String, Exp)] Exp
    deriving (Show, Eq)

data Value = Number Int
       | Bool Bool
       | String String
    deriving (Eq, Show)

type Env = [(String, Value)]

eval :: Env -> Exp -> Value
eval e (Literal v) = v
eval e (Variable x) = fromJust (lookup x e)   --22

prim :: Op -> [Value] -> Value
prim Add [Number a, Number b] = Number (a + b)
prim And [Bool a, Bool b] = Bool (a && b)
prim Sub [Number a, Nuamber b] = Number (a - b)   -- No instance for (Fractional Int) arising from a use of `/'
prim Mul [Number a, Number b] = Number (a * b)
prim Div [Number a, Number b] = Number (a / b)
prim Or [Bool a, Bool b] = Bool (a || b)
prim Not [Bool a] = Bool (not a)
prim Eq [Number a, Number b] = Bool (a == b)
prim Eq [String a, String b] = Bool (a == b) 
prim Less [Number a, Number b] = Bool (a < b)
prim Less [String a, String b] = Bool (a < b)
prim Great [Number a, Number b] = Bool (a > b)
prim Great [String a, String b] = Bool (a > b) --37

main = do
    eval [("y", (Number 40))] (Let [("x", (Literal (Number 2)))] (prim Add [(Variable "x"), (Variable "y")])) -- Couldn't match expected type `Exp' with actual type `Value' 
```

我现在收到两个我在评论中写的错误。如果您知道我的代码有什么问题，请分享您的想法并节省我的时间...

非常感谢你。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-01T23:42:25.103

```
-- No instance for (Fractional Int) arising from a use of `/' 
```

大概是来自这一行，而不是您的评论：

```
prim Div [Number a, Number b] = Number (a / b) 
```

`a`并且`b`是`Int`s。除法运算符是`(/) :: Fractional a => a -> a -> a`（您可以通过启动 ghci 并输入来找到它`:t (/)`，或者通过[在 Hoogle 上查找它](http://www.haskell.org/hoogle/?hoogle=/)）。

如果您还没有看过类似的类型`Fractional a => a -> a -> a`，您应该分两部分阅读：

1.  上下文`Fractional a`
2.  方式`a -> a -> a`

这就像一个常规`a -> a -> a`类型，所以它接受两个某种类型的参数并返回相同类型的结果。添加上下文的唯一区别`Fractional a`是用于的类型`a`必须是`Fractional`类型类的实例；它不能随意覆盖您喜欢的任何类型。

如果您还没有了解类型类，请不要担心。它们很容易掌握，但不是刚开始时应该深入研究的东西；你稍后会找到他们。

`Int`不是`Fractional`类型类的成员，因此`/`运算符不适用于`Int`s。

原因是常规的数学除法**不适**用于这种类型的整数。`3 / 2`要么 give `1.5`，在这种情况下它不适合 type `Int -> Int -> Int`，要么 give `1`or `2`，在这种情况下它不是正确的数学除法。有一个`div`实现[整数除法](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3adiv)的函数，可以像`a `div` b`中缀符号一样使用。

```
-- Couldn't match expected type `Exp' with actual type `Value' 
```

此消息是关于您自己的类型，在您编写的单个表达式中。并且实际的完整错误消息将为您提供有关表达式的哪个部分包含错误的更多上下文。只需自上而下地进行，自己检查事物的类型，错误很快就会出现在你身上。

在这种情况下，您可以到这里：

```
Let [("x", (Literal (Number 2)))] (prim Add [(Variable "x"), (Variable "y")]) 
```

`Let`需要两个参数， a`[(String, Exp)]`和 an `Exp`。列表很好，但第二个参数是`(prim Add [(Variable "x"), (Variable "y")])`. 甚至没有深入研究它的子结构以查看它是否正确，`prim`has type `Op -> [Value] -> Value`，所以它不可能给你一个`Exp`.

如何解决这个问题取决于您；看起来您需要对整个表达式/值的区别进行一些重构。`prim`给你一个`Value`，你可以简单地在 a 中应用 wrap`Literal`来解决你得到的类型错误，但是你遇到了`prim`应该采用 an`Op`和 a的问题`[Value]`，但你似乎已经给了它 an`Op`和 a `[Exp]`(包含变量）。我认为您需要考虑使用`prim`来计算原始应用程序的结果，使用`Primitive`构造函数`Exp`来*表示*原始应用程序和使用之间的区别`eval`将（在环境中）任意表达式（可能包含几个原始应用程序）评估为一个值。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-01T23:33:34.750

您遇到的问题是 Haskell 具有用于整数和“小数”除法的不同功能。整数除法会截断，小数除法不会。所以而不是

```
prim Div [Number a, Number b] = Number (a / b) 
```

你想做

```
prim Div [Number a, Number b] = Number (a `div` b) 
```

错误消息实际上意味着该函数`(/)`是`Fractional`类的一部分。这基本上是一个不同类型可以实现的接口。要获取有关它的信息，请启动 ghci 并执行

```
Prelude> :i (/)
class Num a => Fractional a where
(/) :: a -> a -> a
...
-- Defined in `GHC.Real'
infixl 7 /

Prelude> :i Int
data Int = GHC.Types.I# GHC.Prim.Int#   -- Defined in `GHC.Types'
instance Bounded Int -- Defined in `GHC.Enum'
instance Enum Int -- Defined in `GHC.Enum'
instance Eq Int -- Defined in `GHC.Classes'
instance Integral Int -- Defined in `GHC.Real'
instance Num Int -- Defined in `GHC.Num'
instance Ord Int -- Defined in `GHC.Classes'
instance Read Int -- Defined in `GHC.Read'
instance Real Int -- Defined in `GHC.Real'
instance Show Int -- Defined in `GHC.Show' 
```

第一个为您提供有关该函数的信息`(/)`：它告诉您它在类中`Fractional`。然后，当您`:i Int`显示`Int`. 请注意，这`Int`不是一个实例，`Fractional`因此您不能使用`(/)`with `Int`。

另一个提示：反引号 (`) 将函数转换为中缀运算符，因此

```
a `div` b 
```

是相同的

```
div a b 
```

# asp.net - Powerpoint Conversion to JPEG with ASP.NET?

> ID：14656767
> 
> 赞同：0
> 
> 时间：2013-02-01T23:23:45.277
> 
> 标签：asp.net, jpeg, powerpoint

I have a client in need of an application that uploads a powerpoint file to a web app that can display the slides as jpegs (or flash, silverlight, HTML, video.. any format really) using ASP.NET.

I built the application with MVC in VS 2010 using Office developer tools but the clients server does not have Powerpoint and it seems the Microsoft.Office.Interop.Powerpoint assembly won't function if it can't call Powerpoint on the host machine.

I've looked at every possible discussion dealing with this, the majority conclude its bad practice to even have Powerpoint deployed on a server, so my question is does anyone know of a utility that can convert PPT slide to JPG or Flash or anything to present the slides on a website?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:59:12.307

这是使用互操作对象..

```
 private void mConvertPPT_To_Images(string sPPTFilePath, string sImagesDirectoryPath)
    {
        try
        {
            Microsoft.Office.Interop.PowerPoint.Application appPpt = new Microsoft.Office.Interop.PowerPoint.Application();
            Microsoft.Office.Interop.PowerPoint.Presentation objActivePresentation
                = appPpt.Presentations.Open(sPPTFilePath,
                                            Microsoft.Office.Core.MsoTriState.msoCTrue,
                                            Microsoft.Office.Core.MsoTriState.msoTriStateMixed,
                                            Microsoft.Office.Core.MsoTriState.msoFalse);
            //objActivePresentation.SaveAs(sImagesDirectoryPath, PpSaveAsFileType.ppSaveAsJPG, MsoTriState.msoFalse);
            //objActivePresentation.Export(sImagesDirectoryPath + @"\Slide1.png", "png", 960, 720);
            //objActivePresentation.SaveAs(sImagesDirectoryPath + "slide", PpSaveAsFileType.ppSaveAsTIF, MsoTriState.msoFalse);
            int i = 0;
            foreach (Microsoft.Office.Interop.PowerPoint.Slide objSlide in objActivePresentation.Slides)
            {
                //Names are generated based on timestamp. 
                //objSlide.Export("Slide" + i, "PNG", 960, 720);
                objSlide.Export(sImagesDirectoryPath + @"\Slide" + i + ".GIF", "GIF", 960, 720);
                i++;
            }
            objActivePresentation.Close();
            appPpt.Quit();
        }
        catch (Exception ex)
        {
            throw;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T06:37:31.953

iSpring 有一个名为 iSpring Platform ( [http://www.ispringsolutions.com/ispring-platform](http://www.ispringsolutions.com/ispring-platform) ) 的解决方案。这是一个 SDK，它允许使用 .NET 的软件将 PPT 演示文稿转换为 HTML5 和 Flash。它支持所有效果、动画和其他 PowerPoint 内容。

PS 看了帖子资料，发现作者大概找到了解决办法。也许我的回答对其他人有用。

# spring - Setup Maven Project with 2 Modules - JSF, Spring, Hibernate

> ID：14656771
> 
> 赞同：2
> 
> 时间：2013-02-01T23:24:08.877
> 
> 标签：spring, hibernate, jsf, maven, module

I'm using Eclipse and want to setup a MAVEN project which contains two modules for frontend and backend with JSF, Spring and Hibernate.

What I know: - Create a Maven Project (packaging POM) without archetype - Create Modules and select the Parent Project (Frontend JAR, Backend WAR)

Which archetypes can I use to combine JSF, Spring, Hibernate? Do I have to use the same archetype for both modules?

Thanks for any help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:58:07.233

maven 原型只是准备项目文件夹结构、依赖项等的模板。请参阅 [Maven 原型](http://maven.apache.org/guides/introduction/introduction-to-archetypes.html)

因此，您可以像没有原型的简单模块一样创建两个模块，也可以创建自创建文件夹和依赖关系......如果您可以使用一些原型，您可以使用其中的[一些](http://docs.codehaus.org/display/MAVENUSER/Archetypes+List)

例如：对于主项目：appfuse-basic-jsf 和 Maven 创建项目，该项目使用 Spring、hibernate 和 JSF 或 softeu-archetype-jsf 用于 JFS 结节和 spring-osgi-bundle-archetype 用于 Spring

# loops - LESS Recursive Loop: No Matching Definitions Found

> ID：14656773
> 
> 赞同：0
> 
> 时间：2013-02-01T23:24:33.727
> 
> 标签：loops, recursion, less

I have a mixin I'm creating for generating grids in LESS:

```
/*Grid*/
@num-cols: 12;
@rowWidth: 100%;
@container-lateral-padding: 1em;
@col-margin-right: 3.8%;
@col-unit: (@rowWidth + @col-margin-right) / @num-cols;
@col-identifier: "col";
@col-identifier-nums: false;
@col-identifier-names: true;

@column-selector-number-at-end: false;
@column-selector-number-at-beginning: true;

.setGrid(@index) when (@index > 1), (@column-selector-number-at-end == false) {
    (~".@{index}-@{colNotation}") {
        width: @col-unit * @index - @col-margin-right;
    }
    .setGrid(@index - 1);
}
.setGrid(0) {}
.setGrid(@num-cols); 
```

But I will get the error:

> No matching definition was found for `.setGrid()`

What am I doing wrong here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:30:03.897

你的问题就在这里：`when (@index > 1)`. 您没有关于值何时为的情况`1`（因此出现“无匹配定义”错误）。所以你需要`when (@index >= 1)`.

# ios - Simple Facebook issue: How to get invited friends' IDs with facebook connect for iOS

> ID：14656776
> 
> 赞同：0
> 
> 时间：2013-02-01T23:24:55.630
> 
> 标签：ios, facebook-graph-api, facebook-app-requests

So my challenge is getting the facebook IDs of friends I invite to my app via the facebook SDK for iOS.

I guess this is done in the dialogCompleteWithURL:NSURL method - but how?

Any help is greatly appreciated as always.

All the best!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:34:15.157

当然，像往常一样，疲劳掩盖了这个问题的简单答案。只需遍历传递给 dialogCompleteWithURL 方法的 url 并以这种方式收集 ID。

# escaping - How to convert escape sequences to their appropriate characters in SML?

> ID：14656779
> 
> 赞同：0
> 
> 时间：2013-02-01T23:25:18.213
> 
> 标签：escaping, sml

I'm writing an SML program and I'm trying to convert a string that has escape sequences into a string that does not have escape sequences.

I've tried this, but it doesn't seem to work (prints just `"Hello "`)

```
fun test x  =
let val esc = "Hello \\  Bob \n Newman"
    val fixed = String.fromString esc
in
    print (valOf(fixed))
end 
```

I think I might have to use the `String.scan` function however, I don't exactly understand how it works.

The function signature is

```
scan       : (char, 'a) StringCvt.reader
                   -> (string, 'a) StringCvt.reader 
```

So I have a few questions:

1) Can you expalin what exactly this scan signature is saying...What arguments does the function take and what does it return

2) Is this the function that I should be using?

3) Can you give me any guidance on using this function. Thanks

EDIT: Ok, so the above example I simplified, but I may have simplified it too much...Here's exactly what I'm doing. I'm have a global string called `str` and and input stream of chars/strings...As I read the input stream, I concatenate `str` with the character that I just read. After I have read all of the characters, I want to return `str` but with all of the escape sequences converted.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:32:11.477

我刚刚解雇了 PolyML 并尝试了以下方法：

```
Poly/ML 5.5.0 Release
> val a = "Hello \\ Bob \n Newman";
val a = "Hello \\ Bob \n Newman": string
> print a;
Hello \ Bob 
 Newmanval it = (): unit
> print (String.toString a);
Hello \\ Bob \n Newmanval it = (): unit
> 
```

换句话说，默认情况下，转义序列已经被解释为它们所代表的字符，并且您必须使用`String.toString`“取消转义”特殊字符（获取包含原始转义序列的字符串）。或者，更好的是，您可以使用转义序列本身对转义序列进行编码，如 Andreas 所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T11:01:24.107

您似乎对示例中发生的转义量感到困惑。

当你写

```
val s1 = "Hello \n world!" 
```

那么转义已经被 SML 解析器解释了，`s1`它本身在运行时不会包含任何内容。您可以按原样打印字符串。

*在运行时*实际包含转义的字符串例如是

```
val s2 = "Hello \\n world!" 
```

因为这里 SML 解析器解释`\\`为（单个）斜杠。然后，您可以`s2`在运行时使用进行转换`String.fromString`，生成与 . 相同的字符串`s1`。

回到你的例子，`esc`表示运行时字符串

```
Hello \  Bob 
 Newman 
```

斜线后跟一个空格。这不是一个有效的转义序列，因此`String.fromString`只会将字符串转换为那个“解析”错误（这是`fromString`SML 中所有函数的语义——如果你直接使用底层`scan`函数，你也会得到其余的字符串）。

# git - How can I recover my commit after I did a git reset --hard head?

> ID：14656783
> 
> 赞同：5
> 
> 时间：2013-02-01T23:25:51.410
> 
> 标签：git, heroku

I've been working on a project for months now with regular commits. I use Heroku to store my app. I pushed to Heroku, and then I used the Git GUI to roll back my files to December 7th, and I then force pushed that to Heroku. I was trying to restore a specific folder but did not realize it would restore the whole directory.

I then realized I lost all my commits from December 7th and forward.

I've tried git lost-found and my directory has about 20 heads in the reflog. There is a specific commit I am looking for, I have the hash from Heroku. It is 8d4f84a, but when I do git checkout 8d4f84a it gives me error "Unknown revision or path not found in the working tree."

I did a heroku rollback, and that restored my files on Heroku to the previous push, but I cannot clone those files.

Have I lost all my work up this point?

**EDIT: Attached reflog, full of old commits dating to December 7th and back**

```
eb64161 HEAD@{0}: checkout: moving from 4d6a18311433a9bee737eda9bf6114f8bc35fa2c
4d6a183 HEAD@{1}: checkout: moving from master to HEAD@{3}
eb64161 HEAD@{2}: checkout: moving from eb64161f29fff57ab861880c4cd1cdf7641c39bf
eb64161 HEAD@{3}: checkout: moving from master to master@{2013-01-19}
eb64161 HEAD@{4}: pull: Fast-forward
4d6a183 HEAD@{5}: checkout: moving from 7e1ae4e7907f446d7d238741933509d4d64e0715
7e1ae4e HEAD@{6}: checkout: moving from 60299f452350c05d22e6bd703f1a7658112c171f
60299f4 HEAD@{7}: checkout: moving from 8e58a900f13132e0dcaa39ae980f7868184cbf65
8e58a90 HEAD@{8}: checkout: moving from 49f004a3d08ee52ee24334c07fc9d35c40480dbb
49f004a HEAD@{9}: checkout: moving from 4374fecebf215eb868beb881af8909922d45e764
4374fec HEAD@{10}: checkout: moving from 13a4a7e00c15986e07c48969f026afb2fe02f60
13a4a7e HEAD@{11}: checkout: moving from master to 13a4a7e00c15986e07c48969f026a
4d6a183 HEAD@{12}: reset: moving to HEAD@{20}
6eb9a8e HEAD@{13}: reset: moving to HEAD@{1}
0964917 HEAD@{14}: reset: moving to HEAD~1
6eb9a8e HEAD@{15}: reset: moving to HEAD~1
e6474e3 HEAD@{16}: reset: moving to HEAD~1
821fe87 HEAD@{17}: reset: moving to HEAD~1
04bd607 HEAD@{18}: reset: moving to HEAD~1
4173f0d HEAD@{19}: reset: moving to HEAD~1
6f15ad8 HEAD@{20}: reset: moving to HEAD~1
a847ccd HEAD@{21}: reset: moving to HEAD~1
498d2e7 HEAD@{22}: reset: moving to HEAD~1
fe2772d HEAD@{23}: reset: moving to HEAD~1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-14T12:36:46.610

是的，你可以这样做，打开 git 控制台并输入

```
git reflog 
```

之后你会得到你的提交列表

```
git reset --hard "hash of commit which you need" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T07:10:45.397

If you want your new HEAD to be 8d4f84a, then do

```
git reset --hard 8d4f84a 
```

Resetting also works that direction.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T11:38:58.200

`git reflog`显示曾经创建的所有提交对象的历史记录。我猜一个已删除的提交对象的生命周期是 60 天。因此，如果提交不旧，那么您可能可以执行类似`git cherry-pick your-commit-hash`. `git show`可用于在挑选代码之前检查代码。希望这可以帮助。

# ios - 如何在不使用 NSCalendar 的情况下创建 NSDates（一天的开始和结束）？

> ID：14656785
> 
> 赞同：-1
> 
> 时间：2013-02-01T23:26:22.127
> 
> 标签：ios, objective-c, nsdate

我有一个 iPad 应用程序，使用 XCode 4.5、iOS 6.0 和 Storyboards。我需要使用 NSDate 创建一个 NSCompoundPredicate，**这是由用户从 UIDatePicker 中选择的**。我看到的示例显示了 NSCalendar 和 NSCalendarComponents 的使用，它们都使用“默认”日历。

这是使用一个 NSPredicate 的代码，它可以工作但获取该日期的所有记录以及将来的所有日期，这是错误的。

```
NSMutableArray *apptDataArray = [NSMutableArray new];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(aStartTime = %@)", [dict objectForKey:@"selectedDate"]]; 
```

我需要使用 NSCompoundPredicate 因为我需要获取特定日期的所有记录（从午夜后 1 分钟到所选日期的午夜）。

有没有办法从给定的 NSDate 为 NSCompoundPredicate 创建两个 NSDate（一天的开始和结束），在这种情况下：[dict objectForKey:@"selectedDate"]（这是一个 NSDate）？（这个问题不是使用上面提到的 NSCalendar 代码的这个问题的重复。[）](https://stackoverflow.com/questions/9401466/nspredicate-and-coredata-decide-if-a-date-attribute-is-today-or-between-las)

**更新：以粗体显示更新的问题。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T04:44:52.903

当您说您不想使用 a`NSCalendar`时，您已经是：

> 从**[UIDatePicker 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html#//apple_ref/occ/instp/UIDatePicker/calendar)**：
> 
> **calendar**
> 用于日期选择器的日历。
> 
> `@property(nonatomic, copy) NSCalendar *calendar`
> 
> **讨论**
> 此属性的默认值对应于在设置中配置的用户当前日历。`NSCalendar`这相当于调用类方法 返回的值`currentCalendar`。将 calendar 设置为 nil 相当于将其设置为默认值。
> 
> 日历规定了用于计算时间的文化系统的细节；他们确定了一年的开始、长度和划分。

基本上，获得可用于查询的准确值的唯一方法是使用与创建 NSDate 相同的日历。所以，简短的版本是：继续使用日历。事实上，使用这个：

```
NSCalendar *cal = [NSCalendar currentCalendar]; 
```

*如果在某些时候*`NSDate`不引用日历，就无法真正创建有意义的对象。正如其他人指出的那样，an存储为自特定日期和时间以来的秒数。除非您想完全重写所有日历操作以考虑闰年、闰秒等，否则您应该使用 Apple 已经提供给我们的内容。*`NSDate`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:06:06.120

An表示自固定*epoch*`NSDate`以来的秒数。在内部，使用的纪元是 2001 年 1 月 1 日 12:00:00AM UTC+0。跨平台的大多数 API 使用另一个纪元，即 1970 年 1 月 1 日 12:00:00AM UTC+0，称为“UNIX 纪元”或“纪元”，因此也有 API 可以与该纪元进行转换。因此，日期只是一个数字，类型为(a of .)*`time_t``NSTimeInterval``typedef``double`*

 *要获得一天的最初和最后时刻，您需要定义“一天”。这是通过日历完成的。大多数日历都有 24 小时的一天，但我敢肯定有一个没有。

你说你不能使用`NSCalendar`，因为你需要在它不支持的日历中工作。您能告诉我们您需要使用哪个日历吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:42:50.570

在我看来这是不可能的（为什么你不想使用 NSCalendar？）**

# javascript - 从外部标签链接到传单地图中的标记

> ID：14656807
> 
> 赞同：0
> 
> 时间：2013-02-01T23:28:30.463
> 
> 标签：javascript, html, map, leaflet

 我托管一张传单地图，并希望从地图外的 a 元素链接到该地图上的某个标记。我希望标记在单击链接时表现得像被单击一样。

点击

```
<a href="#" onclick="WHATGOESHERE?">My Link</a> 
```

应该激活我的标记

```
L.marker([52.121935,11.627137], {icon: photomarker}).addTo(map)
.bindPopup("<b>This is a marker</b>")  ; 
```

我怎样才能做到这一点？我得到一个提示，它可以用

```
marker.fire('click') 
```

但我不明白。我应该把它放在哪里？我对javascript很陌生... 

你可以在这里看到整个地图：http: [//bit.ly/VtFXFN](http://bit.ly/VtFXFN)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T00:02:48.353

保存参考

```
var t = L.marker([52.121935,11.627137], {icon: photomarker}).addTo(map)
.bindPopup("<b>This is a marker</b>"); 
```

在一个

```
<a href="#" onclick="t.fire('click')">My Link</a> 
```

# mysql - 添加值时从多个表中选择 SQL 语句

> ID：14656809
> 
> 赞同：0
> 
> 时间：2013-02-01T23:28:35.067
> 
> 标签：mysql, sql, select

我很难找到一个好的陈述来写。当我查询特定的“公司”时，我能够实现我想要的，但我想获取数据库中所有公司的值。

基本上我有 3 个表：用户、公司、Plans_ExchangeMailbox。我需要做的是查询每家公司正在使用多少计划。计划在用户表中的用户级别分配。

这是我的表格布局：

**用户**

显示名称

CompanyCode（这是 Companies 表中 CompanyCode 的 ID）

MailboxPlan（这是 Plans_ExchangeMailbox 表中的 ID）

**公司**

公司名称

公司代码

**计划_ExchangeMailbox**

邮箱计划名称

邮箱计划ID

这是我要生成的格式：CompanyName、MailboxPlanName、Count（这是公司的 MailboxPlanID 数量）

我能够让这个工作，但问题是它一次只能做一家公司并且它没有获得公司名称：

```
SELECT
Plans_ExchangeMailbox.MailboxPlanName,
SUM(CASE WHEN Users.MailboxPlan = Plans_ExchangeMailbox.MailboxPlanId THEN 1 ELSE 0      END) AS PlanCount
FROM
Plans_ExchangeMailbox, Users
WHERE
Users.CompanyCode='CC0'
GROUP BY 
Plans_ExchangeMailbox.MailboxPlanName 
```

**最终格式应该如何：**

标题：CompanyName、PlanName、Count

价值观：

微软，青铜计划，5

微软，黄金计划，20

戴尔，青铜计划，3

戴尔，白银计划，80

ETC.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:43:26.180

尝试这个：

```
SELECT
     C.CompanyName,
     E.MailboxPlanName,
     COUNT(1) Cnt
FROM Companies C
    JOIN Users U
       ON C.CompanyCode = U.CompanyCode
    JOIN Plans_ExchangeMailbox E
       ON U.MailboxPlan = E.MailboxPlanID
GROUP BY 
     C.CompanyCode,
     C.CompanyName,
     E.MailboxPlanID,
     E.MailboxPlanName 
```

以 C.CompanyCode 和 E.MailboxPlanID 分组，以防有不同的公司或 MailboxPlan 同名。如果没有，您可以将它们从`GROUP BY clause`.

# ruby-on-rails - Rails 应用程序中的 AssociationTypeMismatch（预期对象，得到 HashWithIndifferentAccess）

> ID：14656812
> 
> 赞同：4
> 
> 时间：2013-02-01T23:28:42.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

我收到 AssociationTypeMismatch 错误，我不确定我在哪里犯了错误。我对 Rails 很陌生，所以我猜我犯了一些愚蠢的错误。我检查了我的语法并将其与[Ruby on Rails 应用程序上的 AssociationTypeMismatch 错误进行了比较](https://stackoverflow.com/questions/1169813/associationtypemismatch-error-on-ruby-on-rails-app)

...但我似乎仍然无法捕捉到错误。

这是我的模型

```
class User < ActiveRecord::Base
  attr_accessible :email, :full_name, :password, :password_confirmation, :preference
  has_secure_password

  validates_uniqueness_of :email
  validates_presence_of :full_name

  has_one :preference, :dependent => :destroy

  accepts_nested_attributes_for :preference
end

class Preference < ActiveRecord::Base
  attr_accessible :background_fill, :background_position, :layout

  belongs_to :user
end 
```

这是我的控制器：

```
def new
  @user = User.new
  @user.build_preference
end

def create
  @user = User.new(params[:user])
  if @user.save
    session[:user_id] = @user.id
    redirect_to root_url, notice: "Thanks for signing up!"
  else
    render "new"
  end
end 
```

这是我的看法：

```
<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
  <div class="error_messages">
    <h2>There's an error!</h2>
    <ul>
      <% @user.errors.full_message.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
  <% end %>
  <%= f.label :full_name %>
  <%= f.text_field :full_name, :class => "target", :placeholder => "Your full name", :maxlength => "55", :autofocus => "autofocus" %>
  <%= f.label :email %>
  <%= f.email_field :email, :class => "target", :placeholder => "example@gmail.com", :maxlength => "55" %>
  <%= f.label :password %>
  <%= f.password_field :password, :class => "target", :placeholder => "Enter a password", :maxlength => "55" %>
  <%= f.label :password_confirmation, "Confirmation" %>
  <%= f.password_field :password_confirmation, :class => "target", :placeholder => "Enter your password again", :maxlength => "55" %>
  <%= f.fields_for :preference do |builder| %>
    <%= builder.hidden_field :layout, value: params[:layout] %>
    <%= builder.hidden_field :background_fill, value: params[:background_fill] %>
    <%= builder.hidden_field :background_position, value: params[:background_position] %>
  <% end %>
  <%= f.submit "Create an Account", :class => "button cta" %>
<% end %> 
```

还有我的参数

```
{"utf8"=>"✓",
"authenticity_token"=>"[redacted]=",
"user"=>{"full_name"=>"test",
"email"=>"test@example.com",
"password"=>"[FILTERED]",
"password_confirmation"=>"[FILTERED]",
"preference"=>{"layout"=>"layout-3",
"background_fill"=>"restaurant-2",
"background_position"=>"position-center"}},
"commit"=>"Create an Account"} 
```

**编辑：** 我得到的错误是`Preference(#70124732528700) expected, got ActiveSupport::HashWithIndifferentAccess(#70124687315200)`. 我的理解是，它`@user.build_preference`只会`accepts_nested_attributes_for :preference`自己工作。

我需要创建一个`def preferences_attributes=`吗？ [http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

**更新** 好的，所以我想我离得更近了。在 Rails 控制台中四处寻找，我想我需要在 UserController 中创建 Preference.new ，然后才能传入哈希。由于我不确定 build_preference 到底做了什么，所以我还没有运气。

我已经尝试添加`@user.preference = Preference.new`上面的构建首选项并更改`f.field_for :preference`为，`f.field_for @user.preference`但我仍然遇到同样的错误。

**更新 2** 对于遇到此问题的其他任何人，答案是更改`f.field_for :preference`为`f.field_for :preference_attributes`. 请参阅下面的评论[zetetic](https://stackoverflow.com/users/17410/zetetic)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-28T14:02:22.753

它是：

```
attr_accessible :preference_attributes 
```

并以您的形式：

```
<%= f.fields_for :preference_attributes do |builder| %>
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:56:28.213

试一把。

在您的`User`模型中，尝试添加`:preference_attributes`到您的`attr_accessible`行中。

```
class User < ActiveRecord::Base
  attr_accessible :email, :full_name, :password, :password_confirmation, :preference_attributes
  .. # rest of your code goes here
end 
```

# javascript - 使用 UIAElementArray 中 Number 的 withName 获取元素

> ID：14656815
> 
> 赞同：1
> 
> 时间：2013-02-01T23:28:52.897
> 
> 标签：javascript, ios-ui-automation

我正在尝试获取 UIAElementArray 内部的一个元素（使用 javascript），该元素的数字名称类似于 1。

因此，当我尝试使用 array()["1"] 获取元素时

我仍然在索引 1 处获取元素，而不是名称/键值为 1 的元素。

在你们中的一些人把我骗到[苹果文档](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIAElementArrayClassReference/Introduction/Introduction.html)之前，我发现了这个并尝试使用 firstWithName 和 withName array().firstWithName("1") 但现在我收到一个奇怪的错误**“-[__NSCFNumber length]: unrecognized selector sent to instance 0x7c81ab0"**

我没有在任何地方明确使用长度，错误是什么意思，我该如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:53:47.900

我不知道确切的错误，但我知道如何获得所需的元素。试试这个：

```
var predicate = "name contains '1'";
var requiredObj = mainWindow().popover().staticTexts().firstWithPredicate(predicate); 
```

希望这会有所帮助。

# python - int() 参数必须是字符串或数字，而不是“类别”

> ID：14656816
> 
> 赞同：0
> 
> 时间：2013-02-01T23:28:53.807
> 
> 标签：python, django

尝试加载我的类别时出现以下错误。发布的值为'1'并且存在于数据库中，

```
TypeError at /events/add/

int() argument must be a string or a number, not 'Category'

Request Method:     POST
Request URL:    http://127.0.0.1:8000/events/new/
Django Version:     1.4
Exception Type:     TypeError
Exception Value:    

int() argument must be a string or a number, not 'Category'

Exception Location:     /Library/Python/2.7/site-packages/django/db/models/fields/__init__.py in get_prep_value, line 537
Python Executable:  /Users/user/Documents/workspace/RoseBud/django-env/bin/python 
```

视图.py

```
 category = Category.objects.get(pk=form.cleaned_data['category']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:32:29.150

听起来返回的对象`form.cleaned_data['category']`是类别对象，而不是数字。

如果是这种情况，那就做`category = form.cleaned_data['category']`

打印它以确保。

# excel - 在概览页面中显示最后更新的行 - Excel

> ID：14656817
> 
> 赞同：1
> 
> 时间：2013-02-01T23:28:54.403
> 
> 标签：excel, list, vba, rows, auto-update

我在 excel 中有一个共享工作簿，其中包含几张工作表和一个名为概述的主工作表。

例如概览 - Sheet1 - Sheet2 - Sheet 3

在工作表 1/2/3 中，我或其他人用一些数据更新行。

很难跟踪工作簿中的最后一个条目（因为我需要在所有工作表中搜索），所以我想在我的概览页面中创建一个“前 10 名”动态列表，该列表将自动更新最后一个工作簿中的 10 个更新行。

有人可以帮我吗？

这是一个例子：![在此处输入图像描述](../Images/db0750a042c20c3282147d3bd9569063.png)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T03:06:31.713

最干净的解决方案是：

在工作簿级别添加事件处理程序以捕获正在更改的单元格；在处理程序中，执行以下操作：

*   关闭事件处理（您将更改工作表并且不想进入无限循环）！
*   关闭屏幕更新
*   在前页的第 1 行中插入一行
*   在此处输入已更改行的副本
*   在附加列中添加更改它的用户和日期/时间（如果您愿意）
*   回到原来的选择
*   开启屏幕更新
*   开启事件处理

以下是分步说明（示例文件可从[http://www.floris.us/SO/download/XLexample.xlsm](http://www.floris.us/SO/download/XLexample.xlsm)下载） - 假设 PC 上使用 Excel 2010。其他版本的差异大多很小......

1.  确保您的文件保存为`.xlsm`格式 - 这告诉 Excel 有宏
2.  在添加所有这些东西之前创建文件的备份 - 以防你搞砸了！
3.  关闭所有其他文件（暂时） - 请参阅前面的评论
4.  确保你的文件有四个工作表：“summary”、“widgets”、“things”和“stuff”（或任何你认为有帮助的名称——我会用这些名称来引用它们，而不是“Sheet1”等）
5.  右键单击“小部件”选项卡，然后选择“查看代码”
6.  将以下代码粘贴到工作表的“代码”窗口中：

.

```
Private Sub Worksheet_Change(ByBal Target as Range)
  On Error GoTo procErr
  process_change Target
  Exit Sub

procErr:
  MsgBox "Got an error: " & Err.Description
  Err.Clear
  Application.EnableEvents = True
End Sub` 
```

1.  对每个“数据”工作表重复上述步骤：“事物”和“东西”（但不适用于“摘要”）
2.  当 Visual Basic 编辑器打开时（这是您进行所有粘贴的地方），使用 Insert->Module 在工作簿中插入一个新代码模块
3.  将以下代码粘贴到您创建的模块中：

.

```
Option Explicit

Sub process_change(ByVal Target As Range)
' when a cell is changed on one of the worksheets, this function is called
' it copies the most recently changed row
' and inserts it on the second line of the "summary" worksheet
' right below the headers
' if the headers include "changed by" and/or "last changed" (exactly)
' then that column will be updated with the (windows) user name and date, respectively
' similarly, if a column named "source" exists, it will contain the address of the row
' (sheet name / row number). In that case, if there was an earlier occurrence of the same row
' (multiple edits), the earlier occurence is removed
' you may use this code as is - but there is no warranty as to its useability

Dim s1 As Worksheet, s2 As Worksheet
Dim srcAddress As String
Dim oldSelection As Range

' don't update screen during processing - prevent "flickering"
Application.ScreenUpdating = False ' set to True when debugging

' don't accept events until we're done
Application.EnableEvents = False

' store old selection
Set oldSelection = Selection

Dim ri As Integer           ' index of changed row
Dim rowAddress As String
ri = Target.Row
rowAddress = ri & ":" & ri  ' address of changed row

if ri = 1 Then
  Application.EnableEvents = True
  Exit Sub                  ' don't record changes to the headers
End If

Range(rowAddress).Select
Selection.Copy              ' copy changed row

Set s1 = ActiveSheet        ' know where we will go back to
srcAddress = s1.Name & ":row" & ri ' full address to be used later

Set s2 = ActiveWorkbook.Sheets("summary")

s2.Range("2:2").Insert      ' add a row at the top of the list
s2.Select                   ' activate sheet where we want to paste
Range("A2").Select          ' leftmost cell of column
ActiveSheet.Paste           ' paste the entire changed row

' optionally, we can add "source", "last changed" and "changed by"
' we do this if appropriately named columns exist
' slightly clumsy code to catch errors...
Dim lcCol
If Not IsError(Application.Match("last changed", Range("1:1"), 0)) Then
  lcCol = Application.Match("last changed", Range("1:1"), 0)
  Range("A2").Offset(0, lcCol - 1).Value = Date
End If

Dim cbCol
If Not IsError(Application.Match("changed by", Range("1:1"), 0)) Then
  cbCol = Application.Match("changed by", Range("1:1"), 0)
  Range("A2").Offset(0, cbCol - 1).Value = UserName
End If

Dim srcCol
If Not IsError(Application.Match("source", Range("1:1"), 0)) Then
  srcCol = Application.Match("source", Range("1:1"), 0)
  ' find earlier entry regarding this row...
  Columns("A:A").Offset(0, srcCol - 1).Select
  Dim sf As Range
  Set sf = Selection.Find(What:=srcAddress, After:=ActiveCell, LookIn:= _
        xlFormulas, LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:= _
        xlNext, MatchCase:=False, SearchFormat:=False)
  If Not sf Is Nothing Then
  ri = sf.Row
  rowAddress = ri & ":" & ri  ' address of changed row
  Range(rowAddress).Select
  Selection.Delete
  End If
  Range("A2").Offset(0, srcCol - 1).Value = srcAddress
End If

s1.Activate                     ' go back to original worksheet
Application.CutCopyMode = False ' get rid of the "marching ants"
oldSelection.Select             ' select the previous selection "like nothing happened"

' and turn on screenupdating and events...
Application.EnableEvents = True
Application.ScreenUpdating = True

End Sub

Sub eventsOn()
Application.EnableEvents = True
End Sub

Public Function UserName()
' note - this function only works on PC
  UserName = Environ$("UserName")
End Function 
```

完成所有这些后，您现在可以在工作表中放置标题 - 在所有四张工作表中使用相同的列标题。在第一个（摘要）表中，您可以选择添加另外三个标题：这些标题不应与您使用的其他标题相同，并且被称为（完全正确 - 没有额外的空格，大写，...）：, `source`, .`last changed``changed by`

如果最后三个列标题不存在，则行为如下：

每次对三个工作表中的一个进行更改时，所做更改的行将被复制到摘要表的第一行，标题下方。其他所有内容都会向下移动一排。

如果添加“源”列，将发生两件事：源（工作表名称：行号）将添加到该列中，并且将删除同一源（同一行）的任何先前条目。因此，您只会看到给定行的“最新更改”。

如果添加“更改者”，您将获得最后更改的用户的名称；“上次更改”标题将包含上次更改的日期。

让我知道您是否可以从这里弄清楚 - 如果您遇到困难，请使用我上面链接的示例电子表格来指导您。

# jquery - 页面滚动时Jquery隐藏div

> ID：14656821
> 
> 赞同：-2
> 
> 时间：2013-02-01T23:29:06.093
> 
> 标签：jquery, css

我已经`div`用这个 CSS 固定在页面底部：

```
#bottomdiv {
    display:block;  
    position:fixed;
    bottom:0px;
    left:0px;
    width:100%;
    text-align:center;
    height:40px;
    z-index:999;
    background-color: transparent;
    padding: 0 0 0 1px;
} 
```

`div`我有页脚`class="footergroup"`。现在我需要 `<div id="bottomdiv">`在页面滚动到达页脚时使用 Jquery 效果隐藏并在滚动到首页时`<div class="footergroup">`显示`<div id="bottomdiv">`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:05:09.923

我猜你希望向上滚动时页脚的错觉会缩小并粘住。

要找到相对于屏幕底部的滚动位置，您需要从滚动位置中减去视口高度`$(window).scrollTop() - $(window).height()`：为了使过渡平滑，还要减去粘性页脚的高度。

然后你需要在页面上找到你的主要页脚的偏移量。这很容易使用`$("#footer").offset()`.

对于逻辑，您只需要检查您的滚动位置是否是`>=`您的页脚与顶部的偏移量并`hide()`相应地使用。

所有这些都需要至少在三个场合完成：

1.  `document.load`
2.  `window.resize`
3.  `window.scroll`

**标记：**

```
<html>
    <head><title>Sticky Footer</title></head>
    <body>
        <div id="footergroup"></div>
        <div id="bottomdiv"></div>
    </body>
</html> 
```

**CSS：**

```
#bottomdiv {
    position:fixed;
    bottom:0px;
    left:0px;
    width:100%;
    height:40px;
    background-color: red;
}
#footergroup {
    height: 200px;
    background: blue;
}
#padding {
    height: 1000px;
} 
```

**jQuery：**

```
$(document).on('load scroll', stickyFooter);
$(window).on('resize', stickyFooter);

function stickyFooter()
{
    var $footer = $("#footergroup");
    var $stickyFooter = $("#bottomdiv");
    var footerOffsetTop = $footer.offset().top;
    var viewportHeight = $(window).height();

    // Subtract your sticky footer's height for a more seamless transition.
    var scrollPosition = $(this).scrollTop() + viewportHeight - $stickyFooter.outerHeight();

    // This is the real magic.
    if(scrollPosition >= footerOffsetTop)
    {
        $stickyFooter.hide();
    }
    else
    {
        $stickyFooter.show();
    }
} 
```

**[请参阅此代码。](http://jsfiddle.net/bG3Zr/5/)**

# matlab - 在 MATLAB（极坐标）中绘制复杂函数？

> ID：14656822
> 
> 赞同：0
> 
> 时间：2013-02-01T23:29:08.897
> 
> 标签：matlab, plot

我试图绘制这个函数：

```
t=linspace(0,2*pi,100);
a=input('a= ');
b=input('b= ');
c=input('c= ');
k = a*(1-(sin(3*t)).^(2*b))+c;
polar(t,k)

% a=2.6
% b=0.4
% c=5 
```

每次，我都会收到以下消息：

> 警告：复杂 X 和/或 Y 参数的虚部被忽略。

我已经尝试过 pol2cart 方法：

```
t=linspace(0,2*pi,100);
a=input('a= ');
b=input('b= ');
c=input('c= ');
k = a*(1-(sin(3*t)).^(2*b))+c;
[x,y] = pol2cart(t,k);
plot(x,y) 
```

我又收到了同样的信息。我试图将它转换为球坐标，它没有工作。我也尝试了论坛答案中建议的 arrayfun 方法，但效果不佳。有人可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:39:04.290

你的问题出在你的功能上。`k`包含虚数，因为：

```
sin(3*t).^(0.8) 
```

如果要确保它不包含虚数，则需要增加`b`. 底线是，修正你的公式。我只能假设您的意思是这样的，但可能还有其他解决方案。本质上，我认为您的意思是取 1-sin 的指数，而不是 sin。

```
k=a*((1-sin(3*t)).^(2*b))+c; 
```

这给出了以下情节（来自八度，但应该是相同的）

![在此处输入图像描述](../Images/b1b0741923e96219b61eef3c1ec0ad6b.png)

我通过 `plot(k). 如果 k 包含虚数，它将绘制实部与虚部。如果它是纯真实的，它将绘制线与时间的关系。

# mongodb - MongoDB 连接字符串中设置的写入关注标签的格式是什么？

> ID：14656827
> 
> 赞同：0
> 
> 时间：2013-02-01T23:30:12.700
> 
> 标签：mongodb

我想使用标签集在 MongoDB 中设置写入问题，如文档中所述：

[http://docs.mongodb.org/manual/reference/connection-string/#uri.w](http://docs.mongodb.org/manual/reference/connection-string/#uri.w)

但是，我找不到标签在连接字符串中的外观格式。我试过了：

`mongodb://hostname/?w=use:production`

和几个变化，但我总是得到错误：

`exception: unrecognized getLastError mode: use:production`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:38:05.203

您需要在副本集配置中配置 getLastErrorModes。

例如....

```
conf.settings = { getLastErrorModes: { MultipleDC : { "dc.va": 1, "dc.gto": 1}}} 
```

然后你可以像这样使用uri..

```
mongodb://127.0.0.1:27017/test?w=MultipleDC 
```

见这里... [http://docs.mongodb.org/manual/reference/replica-configuration/#configure-tag-sets-for-custom-multi-data-center-write-concern-mode](http://docs.mongodb.org/manual/reference/replica-configuration/#configure-tag-sets-for-custom-multi-data-center-write-concern-mode)

# c++ - 如何转发声明自定义构造函数？

> ID：14656828
> 
> 赞同：1
> 
> 时间：2013-02-01T23:30:38.410
> 
> 标签：c++

注意：我发现我的 Xcode 如何编译下面的问题，它似乎与本文讨论的主题无关。当我有更多细节时，我会在这里提供。

我建议投票结束我的问题“过于本地化”，因为这是一个 Xcode 问题，与 c++ 代码本身无关。非常感谢您的帮助，就像我从答案中学到的一样。

下面的问题（现在已经回答并解决）是由于从 Xcode 目标中排除了一个令人困惑的文件，因此即使文件有问题也没有编译器错误。

* * *

我有一个纯虚拟接口，想定义它的工厂方法，它返回这个接口的一个子类。这工作正常：

```
struct MyVirt{
...all virtual stuff
};

class SubVirt; //forward declaration allows factory:
MyVirt*CreateClass(){
return new SubVirt;
} 
```

更新：一些评论说前向声明不足以实现上述目标，但这是不正确的。您可以在没有类的完整定义的情况下完成上述工作`SubVirt`。

现在，我想做的是有一个带有参数的自定义构造函数。像这样：

```
MyVirt*CreateClass(){
return new SubVirt(arg 1, etc);
} 
```

问题是`class`前向声明不再足够。它需要查看类定义或其标题。这意味着我可以将工厂方法移动到`SubVirt`定义的文件中，或者我必须将该文件包含在上面的文件中，这会创建一个循环依赖项。

有没有办法转发声明自定义构造函数？这将使一切变得简单得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:37:26.820

您的 CreateClass 函数看起来很奇怪，您错过`()`了函数定义。应该是这样的：

```
MyVirt* CreateClass()
{
    return new SubVirt(arg 1, etc);
} 
```

返回指针时，编译器需要知道具体的类型和构造函数，所以前向声明是不够的。

你可以做的是：

*   在头文件中：前向声明`SubVirt`和`CreateClass`函数
*   cpp 文件：包含`MyVirt.h`和定义`CreateClass`函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:38:07.657

像每个人一样，将声明与实现分开。

MyVirt.h：

```
struct MyVirt{
...all virtual stuff
}; 
```

MyVirt.cpp：

```
#include "MyVirt.h"
Implementation of MyVirt 
```

子虚拟机.h：

```
#include "MyVirt.h"
struct SubVirt : MyVirt {
...all SubVirt stuff
}; 
```

SubVirt.cpp：

```
#include "SubVirt.h"
Implementation of SubVirt 
```

工厂.h：

```
struct MyVirt;
MyVirt *CreateClass(); 
```

工厂.cpp：

```
#include "SubVirt.h"
MyVirt *CreateClass() { return new SubVirt() } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:53:36.927

这可以通过分离声明和实现来实现。

这里的关键是将定义/实现*放在包含之上*。假设您要分离类 A 和 B 创建两个文件，如下所示：

A.hpp

```
#ifndef A_HPP
#define A_HPP

struct B; // fwd. decl.

struct A {
    int v;
    A(int v) {
        this->v = v;
    }
    B* createB();
};

#include "B.hpp"

A* B::createA() {
    return new A(v);
}

#endif A_HPP 
```

B.hpp

```
#ifndef B_HPP
#define B_HPP

struct A; // fwd. decl.

struct B {
    int v;
    B(int v) {
        this->v = v;
    }
    A* createA();
};

#include "A.hpp"

B* A::createB() {
    return new B(v);
}

#endif // B_HPP 
```

主文件

```
#include <A.hpp>
#include <B.hpp>
#include <iostream>

int main(int argc, char *argv[]) {
    A a(42);
    std::cout << a.createB()->createA()->v << std::endl;
    return 0;
} 
```

您当然可以自由地将实现移动到`cpp`文件中。这只是基本的秘诀，它展示了如何解决循环依赖，即使是模板化的类和函数。

[http://codepad.org/IsBzQANX](http://codepad.org/IsBzQANX)

# google-app-engine - Go中的image/jpeg库能否支持JPEG渐进格式

> ID：14656839
> 
> 赞同：4
> 
> 时间：2013-02-01T23:31:40.927
> 
> 标签：google-app-engine, go

Go 运行时（谷歌 appengine 中的版本）包 image/jpeg 在尝试解码使用渐进格式的 JPEG 时返回“不支持的 JPEG 功能：渐进模式”。这是我的错误吗？还是这种类型的 JPEG 在 Go 中还不能解码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T00:33:14.003

它将包含在即将发布的 Go 1.1 版本中。

[修订：51f26e36ba98](http://code.google.com/p/go/source/detail?r=51f26e36ba987e7d03c8feb57850b065be324c5b)：图像/JPEG：解码渐进式 JPEG。

# backbone.js - 在同一视图中调用另一个方法

> ID：14656840
> 
> 赞同：0
> 
> 时间：2013-02-01T23:31:45.093
> 
> 标签：backbone.js

我制作了一个使用两分钟 JavaScript 计时器的简单游戏。我可以在不使用主干的情况下让 javascript 计时器工作。代码位于工作计时器的底部，这是它的一个小提琴[http://jsfiddle.net/mjmitche/hDRjR/19/](http://jsfiddle.net/mjmitche/hDRjR/19/)

但是，一旦我尝试将计时器代码转换为 Backbone 视图中的几个不同方法，我就会收到一个错误，具体取决于关键方法 displayTime 代码的定义方式

脚步：

1）我创建一个新的clockView并将其保存到一个变量clock_view

```
var clock_view    = new ClockView({ model: game}); 
```

在时钟视图的初始化程序中，我设置了计时器代码使用的这些变量

```
var totalWait = 120;
var secondsRemaining = totalWait;
var hasFocus = true;
var hasJustFailed = false; 
```

startClock 方法从其他地方触发

```
 this.model.bind("gameStartedEvent", this.startClock, this); 
```

startClock 使用 setInterval 每秒调用一次 displayTime 方法。根据 displayTime 的编码方式 [a) displayTime(), b) this.displayTime(), c) clock_view.displayTime() ]，displayTime 会触发不同的错误。

```
startClock: function(){
      console.log("start clock");

      setInterval(function(){
      this.secondsRemaining -= 1;
      console.log("working");
      displayTime();  //uncaught reference error: displayTime is not defined
      this.displayTime(); //Uncaught TypeError: Object [object Window] has no method 'displayTime' 
      clock_view.displayTime();// `display time gets called but triggers NAN`
      if(secondsRemaining == 0) $('#timer').fadeOut(1000);
      }, 1000);

    }, 
```

如果从 setInterval 调用 displayTime，因为`displayTime()`它说它没有定义。如果我执行 this.displayTime()，我会得到一个对象窗口没有方法。如果我把它称为clock_view.displayTime()，它会触发一个NAN错误，我认为这可能是因为在初始化程序displayTime中定义变量的方式是直接在startClock下面定义的

```
displayTime:  function () {
        var minutes = Math.floor(secondsRemaining / 60);
        var seconds = secondsRemaining - (minutes * 60);
        if (seconds < 10) seconds = "0" + seconds;
        var time = minutes + ":" + seconds;
        $('#timer').html(time);
    }, 
```

**更新**

这是 Backbone 格式的整个 ClockView 的小提琴，尽管它不起作用，因为它缺少程序的其他部分（例如触发事件的模型）。我包含它只是为了使问题更具可读性

[http://jsfiddle.net/mjmitche/RRXnK/85/](http://jsfiddle.net/mjmitche/RRXnK/85/)

原始工作时钟代码[http://jsfiddle.net/mjmitche/hDRjR/19/](http://jsfiddle.net/mjmitche/hDRjR/19/)

var displayTime = function () { var minutes = Math.floor(secondsRemaining / 60); var seconds = secondsRemaining - (分钟 * 60); 如果（秒<10）秒=“0”+秒；var time = 分钟 + ":" + 秒；$('#timer').html(时间); }; $('#timer').css('marginTop', 0);

```
setInterval(function(){
    secondsRemaining -= 1;
    displayTime();
    if(secondsRemaining == 0) $('#timer').fadeOut(1000);
}, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T01:17:38.537

这应该有效。要点是，如何在`View`.

**HTML：**

```
<div id="view">
    <div id="timer"> 
        <span class="time">2:00</span>
    </div>
    <div id="options">
        <input type="button" class="action_button" value="New Game" id="new_game">
    </div>
</div> 
```

**看法：**

```
var ClockView = Backbone.View.extend({
el: '#view',
initialize: function () {
    /** Define your variables in this View */
    this.totalWait = 120;
    this.secondsRemaining = this.totalWait;
    this.hasFocus = true;
    this.hasJustFailed = false;
},
events: {
    'click #new_game' : 'startClock' /** The button starts the clock */
},
startClock: function () {
    console.log("start clock");
    var self = this; /** Save 'this' to a local variable */
    setInterval(function () {
        self.secondsRemaining -= 1;

        self.displayTime();
        if (self.secondsRemaining == 0) self.$('#timer').fadeOut(1000);
    }, 1000);
},
displayTime: function () { 
        var minutes = Math.floor(this.secondsRemaining / 60);
        var seconds = this.secondsRemaining - (minutes * 60);
        if (seconds < 10) seconds = "0" + seconds;
        var time = minutes + ":" + seconds;
        this.$('#timer').html(time);
    },
});

var clock_view = new ClockView(); 
```

# django - GeventSocketIOWorker 没有属性“套接字”

> ID：14656841
> 
> 赞同：4
> 
> 时间：2013-02-01T23:31:54.017
> 
> 标签：django, socket.io, gunicorn, gevent-socketio

我需要使用 gunicorn 运行 Django 应用程序。我阅读了文档，并且我认为我应该设置所有内容，但是当我运行时

```
gunicorn --worker-class socketio.sgunicorn.GeventSocketIOWorker app.wsgi:application 
```

我收到以下错误消息

```
2013-02-01 18:25:17 [25394] [INFO] Booting worker with pid: 25394
2013-02-01 18:25:18 [25394] [ERROR] Exception in worker process:
Traceback (most recent call last):
  File ".../app-root/data/lib/python2.7/site-packages/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File ".../app-root/data/lib/python2.7/site-packages/gunicorn/workers/ggevent.py", line 131, in init_process
    super(GeventWorker, self).init_process()
  File ".../app-root/data/lib/python2.7/site-packages/gunicorn/workers/base.py", line 104, in init_process
    self.run()
  File ".../app-root/data/lib/python2.7/site-packages/socketio/sgunicorn.py", line 14, in run
    self.socket.setblocking(1)
AttributeError: 'GeventSocketIOWorker' object has no attribute 'socket'
Traceback (most recent call last):
  File ".../app-root/data/lib/python2.7/site-packages/gunicorn/arbiter.py", line 485, in spawn_worker
    worker.init_process()
  File ".../data/lib/python2.7/site-packages/gunicorn/workers/ggevent.py", line 131, in init_process
    super(GeventWorker, self).init_process()
  File ".../app-root/data/lib/python2.7/site-packages/gunicorn/workers/base.py", line 104, in init_process
    self.run()
  File ".../app-root/data/lib/python2.7/site-packages/socketio/sgunicorn.py", line 14, in run
    self.socket.setblocking(1)
AttributeError: 'GeventSocketIOWorker' object has no attribute 'socket'
2013-02-01 18:25:18 [25394] [INFO] Worker exiting (pid: 25394) 
```

如果我用 django_socketio 运行它，一切正常，我一定会错过一些非常重要的东西。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T10:08:25.727

似乎是 gunicorn>0.17 的问题，请参阅[问题 #122](https://github.com/abourget/gevent-socketio/pull/122)。对我来说，它正在使用版本 0.16.1 的 gunicorn。

```
pip install gunicorn==0.16.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T21:55:39.180

安装 gevent-socketio 0.3.6 可能会解决此问题，而无需在某些情况下恢复 gunicorn。我有 0.3.5-rc2 并且升级为我解决了这个问题（注意：这不在 django 中，但它有效。）

`pip install gevent-socketio==0.3.6`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T19:07:09.493

由gunicorn的这种变化引起的。 [https://github.com/benoitc/gunicorn/commit/9a83d719b23fe28667a9c76bac25ba66651f8ccf](https://github.com/benoitc/gunicorn/commit/9a83d719b23fe28667a9c76bac25ba66651f8ccf)

以前用于 gevent worker 的套接字来自 gunicorn 套接字，现在它们包装了 gevent 协作套接字。所以恢复到旧版本的 gunicorn 并不是一个好主意。可能是禁用将禁用此检查的 Flash Policy Server。

# jquery - 如何重置 stopImmediatePropagation

> ID：14656844
> 
> 赞同：1
> 
> 时间：2013-02-01T23:32:08.747
> 
> 标签：jquery, onchange, mousedown, kendo-grid

我被困在这里，无法继续前进。任何帮助/指针将不胜感激。

我有一个剑道网格，我正在网格上扩展一个函数，以便在触发更改事件之前，我绑定 mousedown 事件以获得用户的确认。只有在收到肯定的确认后，才应触发更改事件。在消极的确认中，我使用了'stopImmediatePropagation'来达到目的。

```
$("#KendoGrid").extendedFunction(); 
```

扩展函数定义如下：

```
$.fn.extendedFunction= function () {
    var $grid = $(this);
    var $kGrid = $grid.data("kendoGrid");

    if (!$kGrid) {
        return this;
    }
    else {
        $kGrid.tbody.on('mousedown', function (e) {
            showConfirmation(e);
        });
    }
};

function showConfirmation(e) {
    var dialogResult = confirm("confirm?");
        if (dialogResult) {
            return true;
        }
        else {
            e.stopImmediatePropagation();
            return false;
        }
    }
    return true;
} 
```

因此，问题是当 dialogResult 为 false 时，立即传播按预期停止，但当对话框结果为 true 时.. 底层 kendo 事件没有被触发。

我也尝试过使用 kgrid.trigger("change"); 但这也不起作用。那么，有没有办法解决这个问题，或者无论如何重置 stopImmediatePropagation 以便在 dialogResult 为真时触发 kendo 更改事件？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:02:11.700

*不是真正的答案，但评论太长了*

您确定它是`e.stopImmediatePropagation()`在事件中调用的`mousedown`，它会抑制潜在的剑道事件吗？我令我震惊的是，抑制可能是由其他原因引起的，可能是确认对话框本身的显示，无论其结果如何。

如果是这样，那么您可能需要考虑完全不同的策略。

将确认放在与其允许/抑制的代码相同的事件线程中更为正常，而不是在一个线程中获取语句来抑制另一个事件。我猜你是想避免破解 Kendo 代码，但这最终可能是更容易的选择。

## 编辑

代码应简化如下：

```
$.fn.extendedFunction= function () {
    var $grid = $(this);
    var $kGrid = $grid.data("kendoGrid");
    if ($kGrid) {
        $kGrid.tbody.on('mousedown', function (e) {
            if (!confirm("Confirm?")) {
                e.stopImmediatePropagation();
            }
        });
    }
    return this;
}; 
```

如果正如您在下面所说的那样，`e.stopImmediatePropagation()`确实是禁止声明，那么更简单的代码可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-25T21:09:27.383

这次我在一个恐怖的“框架”中工作，我不能使用任何不同的策略，就像这样（只是一个非常愚蠢的例子，但有效）：

```
let stop = true;
$('#something').on('click', function (ev) {
    ev.preventDefault();
    if (stop) {
        ev.stopImmediatePropagation();

        // Why you want this? Here you can do tests, or whatever...

        // if those are success:
        stop = false;
        $('#something').click();
    }

    // do your stuff ... 
```

可以帮助...

# database - 为高图表提供约 9k 数据点的数据库

> ID：14656845
> 
> 赞同：0
> 
> 时间：2013-02-01T23:32:10.040
> 
> 标签：database, database-design, database-schema

我正在从事一个自由项目，该项目捕获音频文件，运行一些傅立叶分析，并吐出三个图表（xy 图）。每个图表都有大约 3000 个数据点，我计划在浏览器中使用 High Charts 显示这些数据点。

您推荐哪些数据库技术来存储和访问这么多数据？我应该将点存储在数组中还是多行中？我也在考虑Mongo。计划是使用 Rails，所以我希望使用单个数据库来进行数据和身份验证。

我还没有处理过为单个页面访问这么多数据的查询，而且这很可能是一小部分数据。此外，这是一个向投资者展示的 MVP，因此将其扩展到巨大的水平并不是当务之急。

我最初的想法是，使用 Postgres 并拥有一个大的数据点表，每行存储，就可以了，而且相对于图像等而言，一堆双精度数不会太占用内存。

实际上，我可能只提取 100 个均匀分布的数据点来制作图表，但仍必须存储原始数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:41:33.993

我做了很多 Mongo 的工作，我可以告诉你如果我是你我会做什么。

关于您的数据的一个非常好的属性是 x,y 坐标通常具有固定大小。换句话说，您不是在存储来自用户的评论，这些评论的大小可能会有很大差异。

使用 Mongo，我首先会制作一个包含 3,000 个点的示例文档。只是一个简单的 x,y 点数组。我会看到该文档有多大以及我的前端如何处理它 - 换句话说，High Charts 可以处理它吗？

我也会尝试坚持最容易管理的概念模型，即每个图表一个文档，每个图表有 3k 个点。这是考虑数据的一种自然方式，我会从那里开始，看看是否有任何性能影响。Mongo 可以轻松地存储这些文档，所以我认为最大的痛苦在于渲染数据的 UI。

Mongo 会很好地处理身份验证。我认为这是 MVP 通用数据存储的不错选择。

# kendo-ui - 如何在剑道窗口中突出显示时让剑道 NumericTextBox 保持焦点？

> ID：14656847
> 
> 赞同：0
> 
> 时间：2013-02-01T23:32:16.923
> 
> 标签：kendo-ui, focus, z-index, kendonumerictextbox, kendo-window

我有一个包含剑道数字文本框的剑道窗口：

```
$('input').kendoNumericTextBox({
    decimals: 2,
    spinners: false
});

 $('#win').kendoWindow({
     modal: true,
     width: "969px",
     height: "646px",
     title: "NumericTextBoxTest"
 });

 $('#win').data('kendoWindow').center().open(); 
```

jsfiddle 在这里[http://jsfiddle.net/e6shF/40/](http://jsfiddle.net/e6shF/40/)。

在 Firefox 中，您无法突出显示数字文本框的值。在 Chrome 中，您可以突出显示该值，但不能在突出显示时输入该值。

由于不正确的 z 索引，这似乎是一个焦点问题。我正在使用剑道版本 2012.3.1114（最新的 GPL 版本）。此问题在剑道版本 2012.3.1315 中不再存在，但该版本似乎在 GPL 下不可用。如何使用 kendo 2012.3.1114 解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:06:43.303

将 .focus() 事件侦听器添加到输入中，并用 input.select() 包裹在 setTimeout 中，这似乎迫使它正常运行。

```
$('input').kendoNumericTextBox({
    decimals: 2,
    spinners: false
}).focus(function() {
   var input = $(this);
    setTimeout(function() {
        input.select();
    });
}); 
```

小提琴：http: [//jsfiddle.net/HwrzV/1/](http://jsfiddle.net/HwrzV/1/)

现在在 Firefox 和 Chrome 中为我工作。试图测试 IE8 但 JSFiddle 没有加载。：X

# scala - g8 提示不显示在 msysgit bash 中

> ID：14656848
> 
> 赞同：1
> 
> 时间：2013-02-01T23:32:22.613
> 
> 标签：scala, msysgit, giter8

我正在尝试使用g8生成scala probjects，但是在msysgit bash shell下，它没有显示通常的提示，例如组织等。以下是预期的输出：

```
>> g8 typesafehub/akka-scala-sbt

Akka 2.0 Project Using Scala and sbt

organization [org.example]: akka.tutorial
package [org.example]: akka.tutorial.first.scala
name [Akka Project In Scala]:
akka_version [2.0]:
version [0.1-SNAPSHOT]:

Applied typesafehub/akka-scala-sbt.g8 in akka-project-in-scala 
```

我这样做是为了得到这个 mac 并使用 Windows cmd.exe 控制台。但是在 msysgit 下，它会打印出`Akka 2.0 Project Using Scala and sbt`然后什么都没有，所以它看起来像挂起。但是，我输入预期值并点击返回，它按预期工作。提示只是没有打印到屏幕上。

关于如何让这个工作正常的任何建议，因为我真的不想求助于 cmd.exe

# python - 如何在 Rpy2 中使用 pandas 数据帧和 numpy 数组？

> ID：14656852
> 
> 赞同：13
> 
> 时间：2013-02-01T23:32:46.617
> 
> 标签：python, numpy, pandas, ipython, rpy2

我想将 pandas 与 numpy 一起用于我的所有分析，但使用 Rpy2 来绘制我的数据。我想使用熊猫数据框进行所有分析，然后通过 rpy2 使用 R 的完整绘图来绘制这些。py2，并且正在使用 ipython 进行绘图。这样做的正确方法是什么？

我尝试的几乎所有命令都失败了。例如：

*   我正在尝试在 pandas DataFrame 的两列之间绘制散点图`df`。我希望`df`在 x/y 轴上使用的标签就像在 R 数据帧中使用的那样。有没有办法做到这一点？当我尝试使用 时`r.plot`，我得到了这个乱码：

`In: r.plot(df.a, df.b) # df is pandas DataFrame`

产量：

`Out: rpy2.rinterface.NULL`

导致情节：

![在此处输入图像描述](../Images/95cf12ef53d51c3bd92f0b5032f3e9e7.png)

如您所见，轴标签被弄乱了，它没有像应有的那样从 DataFrame 中读取轴标签（X 轴是 column `a`of `df`，Y 轴是 column `b`）。

*   如果我尝试用 制作直方图`r.hist`，它根本不起作用，产生错误：

    ```
    In: r.hist(df.a)
    Out: 
    ...
    vectors.pyc in <genexpr>((x,))
        293         if l < 7:
        294             s = '[' + \
    --> 295                 ', '.join((p_str(x, max_width = math.floor(52 / l)) for x in self[ : 8])) +\
        296                 ']'
        297         else:

    vectors.pyc in p_str(x, max_width)
        287                     res = x
        288                 else:
    --> 289                     res = "%s..." % (str(x[ : (max_width - 3)]))
        290             return res
        291 

    TypeError: slice indices must be integers or None or have an __index__ method 
    ```

并导致了这个情节：

![在此处输入图像描述](../Images/55d245dcf65bd4290980474e7d4b0ea0.png)

知道错误是什么意思吗？再次在这里，轴都被弄乱了，到处都是乱七八糟的数据。

**编辑**：此错误仅在使用 ipython 时发生。当我从脚本运行命令时，它仍然会产生有问题的情节，但至少运行时没有错误。从 ipython 调用这些命令一定有问题。

*   我还尝试按照`df`下面海报的建议将 pandas DataFrame 转换为 R DataFrame，但这也因此错误而失败：

    ```
    com.convert_to_r_dataframe(mydf) # mydf is a pandas DataFrame
    ----> 1 com.convert_to_r_dataframe(mydf)
    in convert_to_r_dataframe(df, strings_as_factors)
        275     # FIXME: This doesn't handle MultiIndex
        276 
    --> 277     for column in df:
        278         value = df[column]
        279         value_type = value.dtype.type

    TypeError: iteration over non-sequence 
    ```

如何让这些基本绘图功能在 Pandas DataFrame 上工作（从 Pandas DataFrame 的标签中读取绘图标签），并让 Pandas DF 到 R DF 之间的转换工作？

**EDIT2**：这是一个完整的 csv 文件“test.txt”（[http://pastebin.ca/2311928](http://pastebin.ca/2311928)）示例和我回答@dale 评论的代码：

```
import rpy2
from rpy2.robjects import r
import rpy2.robjects.numpy2ri
import pandas.rpy.common as com
from rpy2.robjects.packages import importr
from rpy2.robjects.lib import grid
from rpy2.robjects.lib import ggplot2
rpy2.robjects.numpy2ri.activate()
from numpy import *
import scipy

# load up pandas df
import pandas
data = pandas.read_table("./test.txt")
# plotting a column fails
print "data.c2: ", data.c2
r.plot(data.c2)
# Conversion and then plotting also fails
r_df = com.convert_to_r_dataframe(data)
r.plot(r_df) 
```

绘制“data.c2”列的调用失败，即使 data.c2 是 pandas df 的列，因此出于所有意图和目的应该是一个 numpy 数组。我使用了这个`activate()`调用，所以我认为它会将此列作为一个 numpy 数组处理并绘制它。

`data`转换为 R 数据帧后绘制数据帧的第二次调用也失败。这是为什么？如果我`test.txt`从 R 作为数据框加载，我可以这样`plot()`做，并且由于我的数据框已从 pandas 转换为 R，它似乎也应该在这里工作。

当我`rmagic`在 ipython 中尝试时，由于某种原因它不会启动绘图窗口，尽管它不会出错。即如果我这样做：

```
In [12]: X = np.array([0,1,2,3,4])

In [13]: Y = np.array([3,5,4,6,7])
In [14]: import rpy2

In [15]: from rpy2.robjects import r

In [16]: import rpy2.robjects.numpy2ri

In [17]: import pandas.rpy.common as com

In [18]: from rpy2.robjects.packages import importr

In [19]: from rpy2.robjects.lib import grid

In [20]: from rpy2.robjects.lib import ggplot2

In [21]: rpy2.robjects.numpy2ri.activate()

In [22]: from numpy import *

In [23]: import scipy

In [24]: r.assign("x", X)
Out[24]: 
<Array - Python:0x592ad88 / R:0x6110850>
[       0,        1,        2,        3,        4]

In [25]: r.assign("y", Y)
<Array - Python:0x592f5f0 / R:0x61109b8>
[       3,        5,        4,        6,        7]

In [27]: %R plot(x,y) 
```

没有错误，但也没有绘图窗口。无论如何，我想坚持使用 rpy2 并且`rmagic`尽可能不依赖。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T15:17:40.383

[注意：您在“编辑 2”中的代码在这里工作（Python 2.7、rpy2-2.3.2、R-1.15.2）。]

正如@dale 提到的那样，只要 R 对象是匿名的（即对象不存在 R 符号），R`deparse(substitute())`最终将返回`structure()`R 对象的，一个可能的解决方法是指定“xlab”和“ylab”参数；对于某些情节，您还必须指定`main`（标题）。

解决这个问题的另一种方法是使用 R 的公式并提供数据框（在我们计算出转换部分之后更多内容如下）。

忘记里面有什么`pandas.rpy`。它既损坏又似乎忽略了 rpy2 中可用的功能。

[使用 ipython 进行转换](https://stackoverflow.com/questions/14356577/rmagic-ipython-and-summary-information/14359050#14359050)的早期快速修复可以很容易地转换为正确的转换。我正在考虑在 rpy2 代码库中添加一个（带有更多的花里胡哨），但与此同时，只需在代码示例中的所有导入之后添加以下代码片段。每当进行 R 调用时，它将透明地将 pandas 的`DataFrame`对象转换为 rpy2 的对象。`DataFrame`

```
from collections import OrderedDict
py2ri_orig = rpy2.robjects.conversion.py2ri
def conversion_pydataframe(obj):
    if isinstance(obj, pandas.core.frame.DataFrame):
        od = OrderedDict()
        for name, values in obj.iteritems():
            if values.dtype.kind == 'O':
                od[name] = rpy2.robjects.vectors.StrVector(values)
            else:
                od[name] = rpy2.robjects.conversion.py2ri(values)
        return rpy2.robjects.vectors.DataFrame(od)
    elif isinstance(obj, pandas.core.series.Series):
        # converted as a numpy array
        res = py2ri_orig(obj) 
        # "index" is equivalent to "names" in R
        if obj.ndim == 1:
            res.names = ListVector({'x': ro.conversion.py2ri(obj.index)})
        else:
            res.dimnames = ListVector(ro.conversion.py2ri(obj.index))
        return res
    else:
        return py2ri_orig(obj) 
rpy2.robjects.conversion.py2ri = conversion_pydataframe 
```

现在以下代码将“正常工作”：

```
r.plot(rpy2.robjects.Formula('c3~c2'), data)
# `data` was converted to an rpy2 data.frame on the fly
# and the a scatter plot c3 vs c2 (with "c2" and "c3" the labels on
# the "x" axis and "y" axis). 
```

我还注意到您正在导入`ggplot2`，而不使用它。目前，必须明确请求转换。例如：

```
p = ggplot2.ggplot(rpy2.robjects.conversion.py2ri(data)) +\
    ggplot2.geom_histogram(ggplot2.aes_string(x = 'c3'))
p.plot() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T22:55:16.463

调用 r.plot 函数时，您需要显式传入标签。

```
r.plot([1,2,3],[1,2,3], xlab="X", ylab="Y") 
```

当您在 R 中绘图时，它会抓取标签，通过`deparse(substitute(x))`该标签实际上从`plot(testX, testY)`. 当您通过 rpy2 传入 python 对象时，它是一个匿名 R 对象，类似于 R 中的以下内容：

```
> deparse(substitute(c(1,2,3)))
[1] "c(1, 2, 3)" 
```

这就是为什么你会得到疯狂的标签。

很多时候，使用 rpy2**只**来回推送数据更明智。

```
r.assign('testX', df.A)
r.assign('testY', df.B)
%R plot(testX, testY)

rdf = com.convert_to_r_dataframe(df)
r.assign('bob', rdf)
%R plot(bob$$A, bob$$B) 
```

[http://nbviewer.ipython.org/4734581/](http://nbviewer.ipython.org/4734581/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-02T01:23:46.413

使用 rpy。转换是熊猫的一部分，所以你不需要自己做 [http://pandas.pydata.org/pandas-docs/dev/r_interface.html](http://pandas.pydata.org/pandas-docs/dev/r_interface.html)

```
In [1217]: from pandas import DataFrame

In [1218]: df = DataFrame({'A': [1, 2, 3], 'B': [4, 5, 6], 'C':[7,8,9]},
   ......:                index=["one", "two", "three"])
   ......:

In [1219]: r_dataframe = com.convert_to_r_dataframe(df)

In [1220]: print type(r_dataframe)
<class 'rpy2.robjects.vectors.DataFrame'> 
```

# python - 两个列表中的数字都被删除了吗？

> ID：14656853
> 
> 赞同：0
> 
> 时间：2013-02-01T23:32:48.267
> 
> 标签：python, list, loops

我不明白为什么我的 3 from y 在以下代码中被删除。我认为这是一些混叠问题，但是有没有办法让 y 在 x 被删除时保留数字？

```
 x = []
  y = []

  for i in range (10):
      if i == 5:
          y.append(x)
          del x[3]
       x.append(i)

print (x)
print (y) 
```

输出：

```
x = [0, 1, 2, 4, 5, 6, 7, 8, 9]
y = [[0, 1, 2, 4, 5, 6, 7, 8, 9]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:34:48.343

您必须将副本附加`x`到 y：

```
y.append(x[:]) 
```

`y.append(x)`附加由 引用的列表`x`，因此`y`本质上是`[x]`。因为它`x`包含在 中，而不是任何其他列表中，所以当您更改时`y`，您正在更改 的值。`y``x`

此外，如果`x`是嵌套列表，您可能需要考虑像这样进行*深拷贝：*`x`

```
import copy
y.append(copy.deepcopy(x)) 
```

这样每个嵌套列表都是副本，而不是`x`.

# c++ - 获得 c++11 - 兼容的编译器

> ID：14656856
> 
> 赞同：12
> 
> 时间：2013-02-01T23:33:10.477
> 
> 标签：c++, macos, c++11, gnu, toolchain

这一切似乎都是一团糟。
我想要的只是一个实现 C++11 的编译器，所以我可以使用`<chrono>`. 但我从一开始就很困惑。

目前，我通过调用 G++ 来构建程序，但是当我通过 检查版本时`$ g++ -v`，我得到：

> gcc 版本 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）

这是怎么回事？我在使用 G++ 吗？海合会？LLVM？我什至不知道。它们是一样的吗？

所以现在我正在尝试通过[gnu.org](http://gcc.gnu.org/install/index.html)构建和下载 GCC 4.7 ，但我不知道任何指南都在谈论什么。我从来没有见过这么多我不知道的东西的首字母缩写词。

为什么这么复杂？所有这些版本是怎么回事，其中一些只实现了 C++11 的某些部分而不是其他版本？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-01T23:51:46.977

这是 OS X 上的情况。

默认安装了两个 C++ 编译器。

```
[5:49pm][wlynch@watermelon ~] g++ --version
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)

[5:49pm][wlynch@watermelon ~] clang++ --version
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn) 
```

g++ 正在运行 llvm-gcc，它是 gcc 前端，然后是 llvm 后端。

clang++ 正在运行 clang，它是 clang 前端，然后是 llvm 后端。

如果你想在 OS X 上使用 C++11 编译器而不安装其他包，你唯一的选择是使用 clang 编译器。

必要的标志是：

```
clang++ -stdlib=libc++ -std=gnu++11 
```

描述我传递的两个标志：

*   `-stdlib=libc++`使用 libc++ 标准库，而不是 gnu libstdc++。在 OS X 上，libc++ 版本支持 c++11。gnu libstdc++ 没有。
*   `-std=gnu++11`告诉编译器支持 c++11 代码特性，比如 lambdas 和 enum 类。你也可以通过`-std=c++11`，它是类似的，但不启用一些通常预期的 gnu 扩展。

**OS X 10.9 更新**：从 OS X Mavericks 开始，g++ 和 clang++ 实际上都在使用 clang。唯一的区别是 g++ 将暗示`-stdlib=libstdc++`而 clang++ 将暗示`-stdlib=libc++`. 所以，在 Mavericks 上，如果你想使用 C++11，你可以遵循上面的建议，或者只是这样做：

```
clang++ -std=gnu++11 
```

**OS X 10.10 更新**：从 OS X Yosemite 开始，g++ 仍然是伪装的。但是，默认情况下都不再使用 libstdc++。两者现在都在 libc++ 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:42:22.650

听起来您拥有 Xcode 4.6 和最新的命令行工具。这是来自发行说明：

```
Important: The LLVM GCC compiler does not include the latest Objective-C and 
C++11 features. Xcode 4.6 is the last major Xcode release which includes the 
LLVM GCC compiler and the GDB debugger. Please migrate your projects to use the 
LLVM compiler and LLDB debugger… 
```

我想你想`c++`改用：

```
$ c++ -v
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
Target: x86_64-apple-darwin12.2.0
Thread model: posix 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T16:41:38.513

@sharth：自 XCode 5.0 发布以来，Mac 上的情况发生了很大变化。clang/clang++ 是默认的 C/C++ 编译器。我相信它们对应于 LLVM 版本 3.3，并且这个版本的 clang++[完全符合 C++11 标准](http://blog.llvm.org/2013/04/clang-support-for-c11-and-beyond.html)。请注意，这`clang++ --version`将在 Mac 上返回类似“5.0.x”的版本号，但它指的是 XCode 版本。

几个月来，我一直在 C++11 项目中使用 Apple clang++，到目前为止我还没有看到任何问题。现在绝对没有理由在 Mac 上使用任何其他 C++ 编译器 :-)

GCC/G++ 的情况并不那么乐观。最新版本的 G++ (4.8.2) 确实实现了大部分 C++11 标准，但是*标准库不兼容*！例如，`std::regex`在 libstdc++ 中没有实现，但只有在运行代码并且正则表达式构造函数抛出`std::regex_error`-s 时才会发现这一点。（我在尝试将上述小项目移植到 Linux 时发现了这一点。）社区相信 G++ 4.9 版本将完全符合要求。在此之前，您也应该在 Linux 上使用 Clang 编译器。

我无法访问最新的英特尔 C++ 编译器套件，因此不知道其兼容性如何`icpc`。

# android - android onItemSelected 在活动开始时自行触发

> ID：14656861
> 
> 赞同：2
> 
> 时间：2013-02-01T23:33:25.797
> 
> 标签：android, android-spinner

我不知道为什么`onItemSelected`活动开始时会自行触发？那是因为我从一开始就有微调器上的缩写数据吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T23:35:21.747

每当更改其选择`onItemSelected()`时，都会调用您的方法。`Spinner`这*包括*它最初获得默认选择的时间。

如果您第一次需要跳过工作，请使用`boolean`标志来跟踪这是否是第一次`onItemSelected()`调用。

# signal-processing - 调频

> ID：14656865
> 
> 赞同：1
> 
> 时间：2013-02-01T23:33:39.183
> 
> 标签：signal-processing

我正在尝试进行频率调制。但是谁能解释一下，非正弦（也可能是非周期性）载波呢？我们是否可以假设一些 FM( A(t), B(t) ) 函数调制载波，由抽象函数 A(t) 给出，信号由抽象函数 B(t) 给出？有人可以写/解释一下吗？在最常见的情况下，公式会是什么样子？我想要某种递归公式，例如“A（t-1）”。或者一些解释，如果这是不可能的，为什么。

[频率调制 (FM)](https://stackoverflow.com/questions/8655121/frequency-modulation-fm?rq=1) 提出了某种“不同的播放速度”——但似乎它做错了什么。所以我重复问“如何？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:38:04.993

如果您使用查找表来生成波形，那么修改标准相位累加器合成方法以添加 FM 输入非常容易。参见例如[这个答案](https://stackoverflow.com/a/8655221/253056)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:05:06.977

好吧，对于非正弦但周期性的载波，您可以更轻松地使用 Paul R 的答案所建议的查找表，或者您可以将周期性载波分解为其傅里叶模式，为每种模式创建一个单独的振荡器，调制每个然后总结。

在非周期性信号的情况下，一般不定义相位或频率。想想噪音，应该如何调制？您需要定义任意信号的频率调制意味着什么。

# vb.net - WithEvents+Handles+Overrides

> ID：14656866
> 
> 赞同：0
> 
> 时间：2013-02-01T23:33:40.327
> 
> 标签：vb.net

假设我有一个对象（例如，Form1）的成员（例如，Button1），该对象（例如，Form1）是使用 withevents （例如，Form1.Button1_Click）定义的，并且该对象中有一个带有“Handles”的处理程序。

如果我覆盖它（例如，Form2.Button1_Click），处理程序将调用覆盖版本（如 me.Button1_Click）还是带有实际句柄的版本（如 MyClass.Button1_Click）？

这是我尝试过的：

```
Public Class Form1

    Public Overridable Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        MsgBox("Form1's Button")
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Dim f2 As New Form2
        f2.Show()
    End Sub
End Class

Public Class Form2
    Inherits Form1

    Public Overrides Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
        MsgBox("Form2's Button")
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:37:33.850

被覆盖的版本被调用。当我在 Form1 上单击 button1 时，我得到“Form1 的按钮”。当我使用 button2 启动第二个表单时，我单击 button1，然后得到“form2 的按钮”

就这样，任何人都试图用谷歌搜索它，却找不到像我一样的东西，我用了 10 分钟的时间来测试它，现在没有其他人需要这样做了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:05:18.583

指定`Overridable`修饰符表示该方法可以被覆盖。

覆盖就是*`reject or cancel (a decision, view, etc.)`.*

`Overrides`指定该方法将覆盖现有的事件处理程序实现。`Form1`除非您手动调用它，否则永远不会调用现有方法。您可以使用`MyBase`关键字手动调用它，这实际上允许您引用当前实例的基类。

```
Public Overrides Sub Button1_Click(sender As Object, e As EventArgs)
    MessageBox.Show("SecondForm's Button")
    MyBase.Button1_Click(sender, e)
End Sub 
```

# ruby-on-rails - 父对象的子窗体

> ID：14656872
> 
> 赞同：0
> 
> 时间：2013-02-01T23:34:32.377
> 
> 标签：ruby-on-rails, ruby

所以我一直推迟在这里提出问题，因为我不想用愚蠢的问题打扰社区，但无论如何我现在要寻求帮助。

我对 Ruby on Rails 很陌生，正如您可能从标题中看到的那样，我的子表单遇到了问题。更具体地说，将父对象分配给客户端对象。我正在为我的工作建立一个系统，员工可以在其中注册维修（手机）并跟踪它们。我正在使用 构建客户端对象`@repair = Repair.new`，效果很好，但是当我尝试设置`Client`with`@repair = Client.new`时，`:client_id`修复中的 仍然存在`null`。

这是我的repair.rb：（有些字段是荷兰语，请忽略）

```
class Repair < ActiveRecord::Base
  attr_accessible :imei, :klantnaam, :telefoon, :intake, :branch_id, :id, :client_id
  attr_accessible :merk, :type, :batterij, :lader, :headset, :batterijklep, :carkit, :schade_toestel, :schade_scherm, :bon, :datum_bon, :klacht, :prijsindicatie

  belongs_to :branch
  belongs_to :client

  accepts_nested_attributes_for :client
end 
```

客户端.rb：

```
class Client < ActiveRecord::Base
  attr_accessible :email, :firstname, :lastname, :number, :phone, :postalcode
  has_many :repairs
end 
```

repairs_controller.rb：（我已经把不相关的方法排除在外，我已经厌倦了 4 个空格：P）

```
class RepairsController < ApplicationController
  # GET /repairs/new
  # GET /repairs/new.json
  def new
    @repair = Repair.new
    @repair.client = Client.new

    if request.remote_ip == "xx.xx.xx.xx"
      @repair.branch = Branch.where(:name => "Xxxxxxx").first
    end

    @repair.intake = Time.now

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @repair }
    end
  end

  # POST /repairs
  # POST /repairs.json
  def create
    @repair = Repair.new(params[:repair])

    respond_to do |format|
      if @repair.save
        format.html { redirect_to @repair, notice: 'Repair was successfully created.' }
        format.json { render json: @repair, status: :created, location: @repair }
      else
        format.html { render action: "new" }
        format.json { render json: @repair.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

这是我从 /repair/new.json 得到的 JSON：

```
{"batterij":null,"batterijklep":null,"bon":null,"branch_id":null,"carkit":null,"client_id":null,"created_at":null,"datum_bon":null,"headset":null,"id":null,"imei":null,"intake":"2013-02-01T23:29:10Z","klacht":null,"klantnaam":null,"lader":null,"merk":null,"pickup":null,"prijsindicatie":null,"schade_scherm":null,"schade_toestel":null,"telefoon":null,"updated_at":null} 
```

顺便说一句，分支分配完美无缺......（现在它为空，因为我不在我在`new`方法中指定的IP上）

请帮帮我... :-(

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:06:54.223

解决了！！

最重要的代码完美无缺，问题是在我看来，`<%`而不是`<%=`，这使得我的子表单没有出现。呃。

# javascript - 提交时忽略文本输入字段中的逗号

> ID：14656874
> 
> 赞同：0
> 
> 时间：2013-02-01T23:34:57.033
> 
> 标签：javascript, jquery, python

所以我做了这个搜索，它做了它应该做的前端明智的事情。但是，在提交时，我希望查询忽略逗号。

现在我正在使用逗号进行逗号分隔搜索。整件事是，当我提交时；逗号包含在内，因此会弄乱我的搜索值。

有没有办法在提交时忽略逗号？

示例：搜索`[Example][Test]`实际上会返回`Example,Test`.

我在[这里做了一个小提琴](http://jsfiddle.net/YEr6m/27/)

非常感谢任何建议和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:42:09.840

```
var firster = true;
//capture form submit
$('form.nice').submit(function(e){
    if(firster){
         // if its the first submit prevent default
         e.preventDefault();
         // update input value to have no commas
         var val = $('input').val();
         val = val.replace(/,/g, ' ');
         $('input').val(val);
         // let submit go through and submit
         firster = false;
         $(this).submit();
    }
}); 
```

**[演示](http://jsfiddle.net/aDVnT/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:53:02.960

查看您的个人资料，我猜您正在使用 python 作为服务器端语言。您尝试解决的问题最好在服务器端处理：*永远不要*依赖前端代码来转义或格式化查询中使用的数据...[查看 Bobby Tables](http://bobby-tables.com/python.html)了解更多信息

无论如何，在python中，你可以试试这个：

```
ajaxString.replace(",","\", \"") 
```

Thiis 将用 Ih 替换所有逗号`" OR "`，因此字符串 like`some, keywords`被翻译成`some", "keywords`，只需添加`some_field IN ("`和关闭`")`即可形成有效查询。
或者，您可以拆分关键字，并分别处理它们（根据结果的相关程度对结果进行排序时，这可能会派上*用场*。

```
searchTerms = ajaxString.split(",")
>>>['some','keywords'] 
```

我希望这应该对你有所帮助。

Lastly, I'd suggest just not bothering with developing your own search function at all. Just add a google search to your site, they're the experts. There is just no way you, by yourself, can do better. Or even if you could, just imagine how long it'd take you!
Yes, sometimes a company will create their own search-engine, but only if they have a good reason to do so, and have the resources such an endevour requires. Programming is often all about being *"cleverly lazy"*: Don't reinvent the wheel.

# javascript - 用于转换从 PHP 转换的序列号的 Javascript 代码

> ID：14656887
> 
> 赞同：1
> 
> 时间：2013-02-01T23:36:01.943
> 
> 标签：javascript, php, javascript-framework

这两个 Javascript 函数应该将序列号 (2-9999) 例如转换为数字，但以下函数由于某种原因无法正常工作..它们最初是用 PHP 编写的......在 PHP 中工作但不适用于 Javascript。

```
<html>
<head>
<script type="text/javascript">

    function my_isnum(str, negative=false, decimal=false)
{
    var has_decimal = false;
    var len = strlen(str);
    if (len > 0) {
        var valid = true;
        for (var i=0; valid && i < len; i++) {
            if (!(str[i] >= "0" && str[i] <= "9")) {
                if (str[i] == "-") {
                    if (!negative || i != 0) {
                        valid = false;
                    }
                } else if (str[i] == ".") {
                    if (!decimal || has_decimal) {
                        valid = false;
                    }
                } else {
                    valid = false;
                }
            }
        }
    } else {
        valid = false;
    }
    return valid;
}

function esn_to_num(esn) {
    var tmp = [];
    if ((tmp = esn.split("-")) {
        if (tmp.length == 2
            && my_isnum(tmp[0])
            && my_isnum(tmp[1])
        ) {
            esn = ((tmp[0] << 23) | tmp[1]);
        } else {
            esn = -1;
        }
    } else {
        esn = -1;
    }
    return esn;
}

alert(2-9999);

</script> </head>
</html> 
```

原始 PHP 函数

```
<?php
function my_isnum($str, $negative=false, $decimal=false)
{
    $has_decimal = false;
    $len = strlen($str);
    if ($len > 0) {
        $valid = true;
        for ($i=0; $valid && $i<$len; $i++) {
            if (!($str[$i] >= '0' && $str[$i] <= '9')) {
                if ($str[$i] == '-') {
                    if (!$negative || $i != 0) {
                        $valid = false;
                    }
                } else if ($str[$i] == '.') {
                    if (!$decimal || $has_decimal) {
                        $valid = false;
                    }
                } else {
                    $valid = false;
                }
            }
        }
    } else {
        $valid = false;
    }
    return $valid;
}

function esn_to_num($esn)
{

    if (($tmp = explode('-', $esn))) {

        if (sizeof($tmp) == 2
            && my_isnum($tmp[0])
            && my_isnum($tmp[1])
        ) {
            $esn = (($tmp[0] << 23) | $tmp[1]);
        } else {
            $esn = -1;
        }
    } else {
        $esn = -1;
    }

    return $esn;
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:37:32.033

Javascript中没有这样的东西`strlen`。改为使用`str.length`。

此外，正如 Jason Sperske 在下面建议的那样，更改此：

```
function my_isnum(str, negative=false, decimal=false) 
```

对此：

```
function my_isnum(str, negative, decimal)
{
    if (typeof negative == "undefined") negative = false;
    if (typeof decimal == "undefined") decimal = false;
    ....
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:41:35.800

> 这两个 javascript 函数应该将序列号 (2-9999) 例如转换为数字。

为什么不直接去掉`-`并解析为十进制数呢？

```
function padToFourDigits(_, digits) {
  return "0000".substring(digits.length) + digits;
}

function serialToNum(serialNumStr) {
  return +(serialNumStr.replace(/-(\d{1,4})/g, padToFourDigits));
} 
```

然后

```
serialToNum('2-9999') === 29999

serialToNum('2-999')  === 20999 
```

# r - 访问 R deriv .grad

> ID：14656891
> 
> 赞同：0
> 
> 时间：2013-02-01T23:36:23.877
> 
> 标签：r, derivative

海吉

我正在尝试访问 .grad[, "x"] <- 2 * x from: （显然这是一个例子）

```
deriv(~ x^2,"x")
>expression({
>.value <- x^2
>.grad <- array(0, c(length(.value), 1L), list(NULL, c("x")))
>.grad[, "x"] <- 2 * x
>attr(.value, "gradient") <- .grad
>.value
>}) 
```

我该怎么做复制和粘贴很烦人，肯定不是故意的

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:44:35.477

我认为你会更好`D()`：

```
D(expression(x^2),"x")
## 2 * x 
```

`D()`记录在同一页面上`deriv()`（即`?D`，`?deriv`将您带到同一页面）

显然，该`~`快捷方式不适用于`D`，尽管您可以使用`quote()`而不是`expression()`保存一些击键。

```
eval(D(quote(x^2), "x"),list(x=5))
## 10 
```

从结果中提取梯度表达式`deriv`更糟糕，因为这不是作者认为你会尝试做的事情。 `.grad`不是最终结果的属性，它是函数内部使用的临时变量。在这种情况下，作者认为用户想要的是计算表达式时梯度的*数值：*

```
dd <- deriv(~ x^2,"x")
attr(eval(dd,list(x=5)),"gradient")
##       x
## [1,] 10 
```

您可以获得表达式，但只能通过在表达式主体中进行特定挖掘。`dd[[1]]`是表达式的主体。`dd[[1]][[4]]`是第四个子表达式：

```
dd[[1]][[4]]
## .grad[, "x"] <- 2 * x 
```

然后我们可以提取右侧（表达式在内部以前缀表示法存储为`{operator,LHS,RHS}`：

```
dd[[1]][[4]][[3]]
## 2 * x 
```

但这似乎确实是一条艰难的道路，而且如果 R 作者对`deriv()`;返回的表达式的内部结构稍作改变，就会崩溃。这种结构没有记录，因此不能保证保持不变......

# css - 范围为单个 svg 标记的 CSS 样式表

> ID：14656893
> 
> 赞同：6
> 
> 时间：2013-02-01T23:36:33.967
> 
> 标签：css, html, svg

我有一个带有两个或多个 SVG 标签的网页。每个 SVG 标记都包含一个样式标记块，其中包含给定 SVG 元素的 CSS 样式。不幸的是，这些样式表似乎融入了全局样式。例如，在第一个 SVG 元素上设置类“x1”的样式将导致第二个 SVG 上的类“x1”的样式也被设置。我希望能够为每个特定的 SVG 文档设置不同的样式。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T00:01:27.373

一旦浏览器支持它，您就需要[`<style scoped>`](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-style-scoped). 这意味着 Firefox 21 或更高版本，或者 Chrome 19 或更高版本（但您需要在 chrome://flags 中启用它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:06:21.240

您应该使用`id`s 来区分元素。然后配置**CSS**样式以影响某些元素。对于浏览器支持，将**CSS**样式放入单独的文件或`<style>`部分是一种常见做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-16T10:11:27.307

### 使用影子 DOM

如果您不需要支持 IE 和其他古老的浏览器，请创建一个自定义元素，它将所有子元素放入它的 Shadow Root 中。

```
class SVGContainer extends HTMLElement {
  constructor() {
    super();
    const shadowRoot = this.attachShadow({mode: 'closed'});
    shadowRoot.append(...this.childNodes);
  }
}

customElements.define('svg-container', SVGContainer);
```

```
<style>#svg-text { fill: red; }</style>
<label id="html-text">I am HTML</label>
<svg-container>
  <svg viewBox="0 0 100 30">
    <style>#html-text { color: red; }</style>
    <text id="svg-text" y="20">I am SVG</text>
  </svg>
</svg-container>
```

# iphone - sqlite 准备语句错误 - 没有这样的表

> ID：14656894
> 
> 赞同：2
> 
> 时间：2013-02-01T23:36:36.350
> 
> 标签：iphone, ios, objective-c, sqlite

我的 sqlite 准备语句遇到了一些困难。我收到一条错误消息，说我的表不存在，尽管我已经在多个地方检查过它，它确实存在，所以我很困惑。

*   该文件位于正确的 iPhone 模拟器应用程序文件夹中
*   该文件已添加到我的项目中，并可在项目导航器中查看
*   它也在我的构建阶段——复制捆绑资源区域。
*   我已经清理干净并再次开始跑步。
*   数据库存在并且运行我的 sql 语句让我得到我预期的结果。

    ```
    - (NSMutableArray *) getMyWorkout{
    NSMutableArray *workoutArray = [[NSMutableArray alloc] init];
    @try {
    NSFileManager *fileMgr = [NSFileManager defaultManager];

    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"IOSDB.sqlite"];
        NSLog(@"Db path is %@",dbPath);
    BOOL success = [fileMgr fileExistsAtPath:dbPath];

    if(!success) {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }

    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK)){
        sqlite3_close(db);
        NSLog(@"Failed to open database with message '%s'.", sqlite3_errmsg(db));
    }

    const char *sql = "SELECT Id, type, difficulty, duration, description FROM workoutTbl";
    sqlite3_stmt *sqlStatement;

    if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK){

    NSLog(@"%s Prepare failure '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(db), sqlite3_errcode(db));
    }        //... 
    ```

当我运行它时，我得到文件路径和以下错误

```
 2013-02-01 18:07:08.060 TriShake[9251:c07] -[MyWorkoutList getMyWorkout] Prepare failure 'no such table: workoutTbl' (1) 
```

我已经检查了这些其他问题，但无法找到解决方案

*   [Sqlite 准备失败：没有这样的表<表名>](https://stackoverflow.com/questions/12746484/sqlite-prepare-failed-no-such-tabletablename)
*   [Sqlite3 在 iPhone 上给出“没有这样的表”错误](https://stackoverflow.com/questions/672829/sqlite3-gives-no-such-table-error-on-iphone)

我知道如果数据库路径不存在，sqlite3_open() 会为您创建一个空数据库，但我知道它存在，所以随之而来的是挫败感。您能给我的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T02:40:11.640

就您当前的问题而言，这将是一件简单的事情。

1.  您说您已经“清理并再次构建”，但您是否真的从模拟器中删除了旧应用程序？手动删除应用程序，或者更简单，通过从“iOS 模拟器”菜单中选择“重置内容和设置”来完全重置模拟器。有时 Xcode 并不擅长知道要复制哪些文件（尤其是在这种情况下，您在设备上运行它可能会更改模拟器捆绑包中文件的时间戳！）

2.  再次运行应用程序。

3.  如果应用程序没有按预期运行，请从 Mac 上打开模拟器文件夹中的数据库并检查数据库以确保表在那里并且与您预期的一样。`sqlite3`所以导航到应用程序，打开捆绑包（您可能必须选择“显示包内容”选项），确认数据库的存在，但同样重要的是，在您最喜欢的 Mac工具中打开这个特定的数据库副本选择并确认那里的表的存在。

让我们知道你发现了什么。同样，它必须是一些简单的东西，例如：

*   也许重建应用程序的过程并不是重新安装所有东西；我偶尔会遇到 Xcode 在我的模拟器上安装期间选择不重新复制某些内容的问题；

*   也许您的项目中的数据库不小心放在了子目录中，更糟糕的是，您可能有两个副本位于不同的目录中；

*   也许您的 Xcode 项目中的数据库在表或文件的名称中丢失（或有错字或（尤其是在设备的情况下）文件名大写不正确）；

*   等等。

对于许多此类错误，在完全重置模拟器本身之前，您不会注意到问题。它可能是一百万件小事，但希望完全重置模拟器并重新开始将帮助您找到问题。当涉及到这类问题时，它总是*很简单。*

* * *

其他一些小观察：

1.  您可能不应该从捆绑包中打开数据库。以编程方式将其从捆绑包复制到`Documents`文件夹，然后从那里打开数据库。我知道这似乎没有必要，但出于多种原因，这很重要（如果 db 在应用程序运行期间发生更改，如果 db 意外在您身上创建，请不要让 Xcode 对更改的内容感到困惑（即使只是文件时间戳）在 Xcode 背后更改的捆绑包中，等等）

2.  如果您需要数据库在那里，您应该使用[`sqlite3_open_v2`](http://www.sqlite.org/c3ref/open.html)，使用 SQLITE_OPEN_READWRITE 或 SQLITE_OPEN_READONLY 作为标志（但*不*包括`SQLITE_OPEN_CREATE`）。让 sqlite 有机会为您创建空白数据库或以其他方式修改它会让人头疼，所以永远不要给它机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T01:55:35.783

我遇到了和你一样的问题。如果IOS找不到指定的数据库文件，默认会为你创建一个，而不是报错。因此，您必须打开 IOS 为您创建的数据库文件，该文件是空白的，因此它当然包含您期望的表。我处理它： 1 你必须将名为 *.sqlite3 的资源文件捆绑到你的项目中 2 然后你必须使用 [NSBundle mainBundle] pathFordirectory...... 函数来搜索你正确的数据库文件。然后你就可以打开你期望的数据库文件并且可以正常操作了

此致，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T16:54:53.217

没有足够的代表评论杰克的帖子，但这对我有帮助。

就我而言，我输入了错误的资源扩展路径：

```
// Wrong
NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"productList"
                                                         ofType:@"sqlite3"];

// Should have been (added db ext)
NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"productList"
                                                     ofType:@"db"]; 
```

我总是能通过：

```
if (sqlite3_open([sqLiteDb UTF8String], &_database) == SQLITE_OK)) 
```

因为它会自动为我创建一个 db 文件。

# c# - 如何使用 C# 和 Json.NET 解析 Google 的 JSON API 搜索结果？

> ID：14656895
> 
> 赞同：3
> 
> 时间：2013-02-01T23:36:42.487
> 
> 标签：c#, .net, json, json.net

我正在使用 C# 编写一个项目，在该项目中我想输入一个搜索词，点击搜索按钮，然后将部分响应从 Google 检索到一个数组，以便我可以遍历它们。

使用基于 JSON 的 API 搜索 Google 非常简单

```
var client = new HttpClient();
var address = new Uri("https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=" + term);

HttpResponseMessage response = await client.GetAsync(address);
String stream = await response.Content.ReadAsStringAsync(); 
```

这将返回一个如下所示的 JSON 字符串（“测试搜索”一词的结果）

```
{
    "responseData":{
        "results":[
            {
                "GsearchResultClass":"GwebSearch",
                "unescapedUrl":"http://en.wikipedia.org/wiki/Wikipedia:Search_engine_test",
                "url":"http://en.wikipedia.org/wiki/Wikipedia:Search_engine_test",
                "visibleUrl":"en.wikipedia.org",
                "cacheUrl":"http://www.google.com/search?q\u003dcache:g6KEStELS_MJ:en.wikipedia.org",
                "title":"Wikipedia:\u003cb\u003eSearch\u003c/b\u003eengine\u003cb\u003etest\u003c/b\u003e-Wikipedia,thefreeencyclopedia",
                "titleNoFormatting":"Wikipedia:Searchenginetest-Wikipedia,thefreeencyclopedia",
                "content":"A\u003cb\u003esearch\u003c/b\u003eengine\u003cb\u003etest\u003c/b\u003ecannothelpyouavoidtheworkofinterpretingyourresultsanddecidingwhattheyreallyshow.Appearanceinanindexaloneisnotusually\u003cb\u003e...\u003c/b\u003e"
             },
             {
                 "GsearchResultClass":"GwebSearch",
                 "unescapedUrl":"http://techcrunch.com/2008/07/16/google-continues-to-test-a-search-interface-that-looks-more-like-digg-every-day/",
                 "url":"http://techcrunch.com/2008/07/16/google-continues-to-test-a-search-interface-that-looks-more-like-digg-every-day/",
                 "visibleUrl":"techcrunch.com",
                 "cacheUrl":"http://www.google.com/search?q\u003dcache:r2laSUVQw8kJ:techcrunch.com",
                 "title":"GoogleContinuesTo\u003cb\u003eTest\u003c/b\u003eA\u003cb\u003eSearch\u003c/b\u003eInterfaceThatLooksMoreLike\u003cb\u003e...\u003c/b\u003e",
                 "titleNoFormatting":"GoogleContinuesToTestASearchInterfaceThatLooksMoreLike...",
                 "content":"Jul16,2008\u003cb\u003e...\u003c/b\u003eAcoupleofdaysagowepostedscreenshotsofanew\u003cb\u003esearch\u003c/b\u003einterfacebeingbucket\u003cb\u003etested\u003c/b\u003ebyGooglethatletsusersvoteupordownon\u003cb\u003e...\u003c/b\u003e"
             },
             {
                "GsearchResultClass":"GwebSearch",
                "unescapedUrl":"http://googleblog.blogspot.com/2006/04/this-is-test-this-is-only-test.html",
                "url":"http://googleblog.blogspot.com/2006/04/this-is-test-this-is-only-test.html",
                "visibleUrl":"googleblog.blogspot.com",
                "cacheUrl":"http://www.google.com/search?q\u003dcache:Ozl1cQzRT0IJ:googleblog.blogspot.com",
                "title":"Thisisa\u003cb\u003etest\u003c/b\u003e.Thisisonlya\u003cb\u003etest\u003c/b\u003e.|OfficialGoogleBlog",
                "titleNoFormatting":"Thisisatest.Thisisonlyatest.|OfficialGoogleBlog",
                "content":"Apr24,2006\u003cb\u003e...\u003c/b\u003eFromtimetotime,werunliveexperimentsonGoogle—\u003cb\u003etests\u003c/b\u003evisibletoarelativelyfewpeople--todiscoverbetterwaysto\u003cb\u003esearch\u003c/b\u003e.Wedothis\u003cb\u003e...\u003c/b\u003e"
             },
             {
                "GsearchResultClass":"GwebSearch",
                "unescapedUrl":"http://alistapart.com/article/testing-search-for-relevancy-and-precision",
                "url":"http://alistapart.com/article/testing-search-for-relevancy-and-precision",
                "visibleUrl":"alistapart.com",
                "cacheUrl":"http://www.google.com/search?q\u003dcache:02Sjrd5mb0YJ:alistapart.com",
                "title":"\u003cb\u003eTestingSearch\u003c/b\u003eforRelevancyandPrecision·AnAListApartArticle",
                "titleNoFormatting":"TestingSearchforRelevancyandPrecision·AnAListApartArticle",
                "content":"Sep22,2009\u003cb\u003e...\u003c/b\u003eDespitethefactthatsite\u003cb\u003esearch\u003c/b\u003eoftenreceivesthemosttraffic,it\u0026#39;salsotheplacewheretheuserexperiencedesignerbearstheleastinfluence."
             }
          ],
          "cursor":{
             "resultCount":"1,010,000,000",
             "pages":[
                {
                   "start":"0",
                   "label":1
                },
                {
                   "start":"4",
                   "label":2
                },
                {
                   "start":"8",
                   "label":3
                },
                {
                   "start":"12",
                   "label":4
                },
                {
                   "start":"16",
                   "label":5
                },
                {
                   "start":"20",
                   "label":6
                },
                {
                   "start":"24",
                   "label":7
                },
                {
                   "start":"28",
                   "label":8
                }
             ],
             "estimatedResultCount":"1010000000",
             "currentPageIndex":0,
             "moreResultsUrl":"http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8\u0026source\u003duds\u0026start\u003d0\u0026hl\u003den\u0026q\u003dTest+search",
             "searchResultTime":"0.23"
          }
       },
       "responseDetails":null,
       "responseStatus":200
    } 
```

如何将每个节点中的 url 值推入数组中，以便可以遍历它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:45:13.653

您可以`dynamic`在 Json.Net 中使用关键字

```
dynamic jObj = JsonConvert.DeserializeObject(json);
foreach (var res in jObj.responseData.results)
{
    Console.WriteLine("{0} => {1}\n",res.title,res.url);
} 
```

你也可以使用 Linq

```
var jObj = (JObject)JsonConvert.DeserializeObject(json);
string[] urls = jObj["responseData"]["results"]
                .Select(x => (string)x["url"])
                .ToArray(); 
```

# css - 停止跨越 2 行的导航菜单

> ID：14656896
> 
> 赞同：0
> 
> 时间：2013-02-01T23:37:17.680
> 
> 标签：css, internet-explorer, html-lists

我在这个网站上工作，在 IE 中，导航菜单跨越 2 行： http: [//www.sandiegolawfirm.com/](http://www.sandiegolawfirm.com/)

我想要么删除破产左侧的空间，要么在 IE 中将字体大小减少一两点。允许所有部门适应一个导航菜单行。

我正在积极尝试解决此问题，但希望能帮助我找出完成此任务的最佳方法。

谢谢 - 罗利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:51:11.707

一种方法修复特定于使用特定于 IE 的样式的更改。根据您尝试修复的版本，您可以使用不同的规则。

例如：

针对所有版本的 IE

```
<!--[if IE]>
#any rules you like
<![endif]--> 
```

定位除 IE 之外的所有内容

```
<!--[if !IE]><!-->
#any rules you like
<!--<![endif]--> 
```

仅针对 IE 7

```
<!--[if IE 7]>
#any rules you like
<![endif]--> 
```

仅针对 IE 6

```
<!--[if IE 6]>
#any rules you like
<![endif]--> 
```

这里有一个教程：http: [//css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:53:38.757

我想添加类似的东西

```
ul li:first-of-type a{
   margin-left:-20px;
} 
```

到 IE 样式可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T00:01:31.250

看起来您正在尝试使用自定义字体并在 IE 中获得不可预测的结果，因为“Gotham”不可用。您可以尝试使用 Google 网络字体或将网络字体上传到您的服务器，以至少获得相似的字体大小。

# java - 未经检查或不安全的操作作业

> ID：14656902
> 
> 赞同：2
> 
> 时间：2013-02-01T23:37:54.257
> 
> 标签：java, unsafe, operations, unchecked

在我最近的课堂作业中，我们一直在使用泛型，我收到了这个警告：

```
Note: Selector.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

据我了解，这是由于未指定集合中对象的类型所致。我目前正在使用 int 进行测试，但该程序应该允许对任何类型的对象进行排序。我不认为我想将我的集合指定为 int，因此我的集合目前是 T 类型。但是我的说明明确指出我的程序不应产生任何警告。这是我的一种方法：

我现在拥有的：

```
 else {
        T[] a = new T[c.size()];
        c.toArray(T[] a);
        T min = a[0];
        for (int i = 0; i < a.size(); i++) {
           if (comp.compare(min, a[i]) > 0) {
              min = a[i];
           }
        }
        return min; 
     } 
```

我得到了什么：

```
 Testing.java:48: error: generic array creation
            T[] a = c.toArray(new T[c.size()]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:44:25.187

要摆脱通知，您应该使用

```
Collection.toArray(T[] a) 
```

代替

```
Collection.toArray() 
```

Collection.toArray() 返回一个对象数组，所以你总是需要转换。

此外，调用 toArray 的成本很高，因为必须创建新数组，因此您应该考虑将其存储到变量中并重用。

不幸的是，不可能创建一个泛型类型的数组，因此我认为您应该删除 toArray 并在集合上使用迭代器，例如：

```
Iterator<T> iterator = c.iterator();
T min = iterator.next(); //you already checked that there has to be first element
while (iterator.hasNext()) {
    T element = iterator.next();
    if (comp.compare(min, element) > 0) {
        min = element;
    }
}
return min; 
```

# vba - 返回收件人的电子邮件地址

> ID：14656906
> 
> 赞同：1
> 
> 时间：2013-02-01T23:38:22.327
> 
> 标签：vba, outlook

我正在构建一个宏，当我进入电子邮件正文以检查收件人的电子邮件地址时，该宏将自动运行。

我无法将收件人的地址加载到变量中。

```
Sub BuildTable()
Dim myItem As Outlook.MailItem
Dim myRecipient As String
Set myItem = Application.CreateItem(olMailItem)
Set myRecipient = myItem.Recipient.Address
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:52:17.463

我不确定您使用的是什么版本的 Outlook，但根据 Microsoft（[http://msdn.microsoft.com/en-us/library/office/aa211006](http://msdn.microsoft.com/en-us/library/office/aa211006(v=office.11).aspx) (v=office.11​​).aspx ），您需要使用 .Recipients(Index) 获取收件人。从那里你也许可以得到地址。我还提到了附加到.Recipients 的某种ResolveAll 方法，尽管它引用了Outlook 2000 (eww)。

尝试做

```
Dim myItem As Outlook.MailItem
Dim myRecipient as String
Set myItem = Application.CreateItem(olMailItem)
Set myRecipient = myItem.Recipients.Item(0).Address 
```

这将为您提供第一个收件人的地址（请注意，我不记得 VBA 是从索引 0 开始还是从索引 1 开始，如果您获得 IndexOutOfRange，请更改为 1）。如果你需要其他人，你将需要做一个循环。像这样的东西：

```
For Each Recipient in myItem.Recipients
// do some stuff here
Next Recipient 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T01:23:38.370

您似乎在 MS Outlook 和 Active Inspector 中运行，所以也许：

```
Sub CheckAddresses()
Dim oEmail As Outlook.MailItem
Dim r As Recipient
Dim rList As Recipients

Set oEmail = Application.ActiveInspector.CurrentItem

Set rList = oEmail.Recipients
rList.ResolveAll
For Each r In rList
    Debug.Print r.Address
Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T22:23:09.487

这就是这段代码最终的样子：

```
Sub BuildTable1()

Dim oEmail As Outlook.MailItem

Set oEmail = Application.ActiveInspector.currentItem

Set xlApp = CreateObject("Excel.Application")
xlApp.Application.Visible = True
xlApp.workbooks.Open FileName:= file location

xlApp.WorkSheets("Contacts").Activate
xlApp.Range("A6").Value = oEmail.To

//filtering by value, copying, pasting, etc.
End Sub 
```

-ZL

# asp.net-mvc - 为现有数据库建模

> ID：14656915
> 
> 赞同：2
> 
> 时间：2013-02-01T23:39:29.177
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4

我想基于现有数据库生成模型——我认为它就像编写模型、添加 DbContext 类和配置连接字符串一样简单：

```
namespace MyProject.Models
{
    public class Account
    {
        public int Id { get; set; }
        public string Email { get; set; }
        public string Name { get; set; }
    }

    public class AccountDBContext : DbContext
    {
        public DbSet<Account> Accounts { get; set; }
    }
} 
```

使用简单的样板控制器

```
public ActionResult Index()
{
    return View(db.Accounts.ToList());
} 
```

样板视图，我不会在这里发布，它列出了我们返回的 db 对象的所有成员。

最后，一个连接字符串：

```
<add name="AccountDBContext" providerName="System.Data.SqlClient" connectionString="[server connection string]" /> 
```

唯一的问题是我没有看到任何条目正在显示。它肯定是在连接，但不是检索或显示特定数据库包含的数据。我错过了什么吗？

**编辑**

好的，所以第一件事是：它没有连接。我的连接字符串名称中有错字。它达到了默认值，随后什么也没有显示。

不过，我现在得到的是`The model backing the 'AccountDBContext' context has changed since the database was created.`

这是因为我的模型与数据库包含的内容不完全匹配吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:10:58.657

这是“现有数据库的代码优先”场景。你用的是什么版本的EF？

在 EF 4.3 中，当您让代码首先为您创建数据库时，它会将 Migration-History 表插入到新数据库中。它隐藏在系统表中。这相当于您使用 EF 4.1 和 4.2 获得的 EdmMetadata 表。但是当您**已经拥有**数据库时，您可以使用**代码优先迁移**。( [http://msdn.microsoft.com/en-US/data/jj591621](http://msdn.microsoft.com/en-US/data/jj591621) )

无论哪种方式，您都应该检查是否存在这样的表。如果是这样，您可以将其删除，然后您将全权负责将您的 pocos 与数据库正确匹配。

我发现的另一个快速解决方法是

```
 Database.SetInitializer<YourContext>(null); 
```

到 Global.asax 中的 Application_Start()

另请参阅这个类似的问题：[Entity Framework Code Only error: the model backing the context has changed since the database is created](https://stackoverflow.com/questions/3552000/entity-framework-code-only-error-the-model-backing-the-context-has-changed-sinc)

# c# - 通过 .NET 访问查询 MySql 数据库的最快方法？

> ID：14656917
> 
> 赞同：0
> 
> 时间：2013-02-01T23:39:50.907
> 
> 标签：c#, .net, mysql

我正在尝试在 .NET 应用程序中访问一个非常大的 MySQL 表（17.6M 行 x 60 列）并在应用程序中执行一些简单的分析。我使用 .NET MySqlAdapter 有以下代码，其中查询是一个简单的 SELECT ... FROM X 查询：

```
 using (MySqlConnection client = new MySqlConnection(connectionString))
        {
            client.Open();
            using(MySqlCommand command = new MySqlCommand(td, client))
            {
                using (MySqlDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        DoSomething(reader);
                    }
                }
            }
        } 
```

我正在数据库服务器本身上测试此应用程序，以尝试消除网络延迟。

分析这种方法，DoSomething() 调用的总和约为 20 毫秒，其中内部 while 循环花费的总时间约为 8 分钟。

是否有更快的方法将大量数据从 MySQL 传输到客户端应用程序？

# mysql - 你可以在不覆盖mysql的情况下联合吗？

> ID：14656919
> 
> 赞同：0
> 
> 时间：2013-02-01T23:40:54.490
> 
> 标签：mysql, sql

假设我有以下表格：

```
Name | Occupation
A
B
C
D
E
Workplace | Phone Number
A
B
C 
```

我想执行选择以将表合并到一个表中：

```
MyName | Type
A | Person
B | Person
C | Person
D | Person
E | Person
A | Workplace
B | Workplace
C | Workplace 
```

我该如何做到这一点？我试过了：

```
SET @a = 'Person'
SET @b = 'Name'
SELECT Name, @a FROM tablea
UNION
SELECT Workplace, @b FROM tableb 
```

并且第二列中的输出似乎都是“Person”，并且没有“Workplace”。我究竟做错了什么？

或者有没有办法我可以从单个 SELECT 语句中获取以下内容：

```
MyName
A_Person 
B_Person 
C_Person 
D_Person 
E_Person 
A_Workplace
B_Workplace
C_Workplace 
```

注意：我正在使用 MySQL Workbench

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:53:16.550

我无法让[sqlfiddle](http://sqlfiddle.com/)接受您的查询，但它确实接受了这个：

```
SELECT Name, 'Person' FROM tablea
UNION
SELECT Workplace, 'Workplace' FROM tableb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T00:05:43.630

使用`UNION ALL`代替`UNION`：

```
SELECT Name, @a FROM tablea
UNION ALL
SELECT Workplace, @b FROM tableb 
```

UNION 删除重复项（并且在大多数数据库中也对结果进行排序）。

UNION ALL 使所有行保持选定的顺序。

# php - JSON 下拉列表未正确填充

> ID：14656924
> 
> 赞同：2
> 
> 时间：2013-02-01T23:41:19.870
> 
> 标签：php, javascript, json, drop-down-menu

我很难使用 JSON 填充下拉列表，这是脚本

```
function ajax_get_json(){
    var results = document.getElementById("results");
    var hr = new XMLHttpRequest();
    hr.open("GET", "json.php", true);
    hr.setRequestHeader("Content-type", "application/json");
    hr.onreadystatechange = function() {
        if(hr.readyState == 4 && hr.status == 200) {
            var data = JSON.parse(hr.responseText);
            results.innerHTML = "";     
        for (var obj in data) {
           if (data.hasOwnProperty(obj)) {
                    results.innerHTML +="<option>"+ data.l_name +"</option>";
                }
            }
        }
    }
    hr.send(null);
    results.innerHTML = "requesting...";
} 
```

PHP 生成有效的 JSON：

```
{
    "l_id": [
        "24231",
        "24309",
        "24310",
        "24232"
    ],
    "l_group_id": [
        "001",
        "002",
        "003",
        "999"
    ],
    "l_name": [
        "001 - All Students",
        "002 - All Staff",
        "003 - All Residents",
        "999 - Test List"
    ]
} 
```

我只想显示 l_name 作为选项。

这里的问题是所有值都插入到同一个选项中。我知道循环是错误的，但我无法让另一个循环工作。主要目标是编写：

```
<option value="l_id"> l_name</option> 
```

我希望你们中的一个人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:02:46.973

如果这是你想要的

```
<option value="24231">001 - All Students</option>
<option value="24309">002 - All Staff</option>
<option value="24310">003 - All Residents</option>
<option value="24232">999 - Test List</option> 
```

你可能想这样做

```
var html='';
for (var i in data.l_id) {
    html +="<option value='" + data.l_id[i] + "'>"+ data.l_name[i] +"</option>";
}
results.innerHTML=html; // faster to re-write html once than per iteration 
```

# c# - 如何使用计时器在 for 循环中添加延迟

> ID：14656927
> 
> 赞同：0
> 
> 时间：2013-02-01T23:41:36.883
> 
> 标签：c#, timer, sleep, windows-applications

通过以下代码（timer2的间隔为1000）

```
private void timer1_Tick(object sender, EventArgs e) {
    timer7.Enabled=false;
    timer8.Enabled=false;
    lblTimer_Value_InBuildings.Text="0";
}

private void timer2_Tick(object sender, EventArgs e) {
    lblTimer_Value_InBuildings.Text=(int.Parse(lblTimer_Value_InBuildings.Text)+1).ToString();
} 
```

我们不能在 for 循环中创建延迟

```
for(int i=1; i<=Max_Step; i++) { 
    // my code... 

    // I want delay here: 
    timer1.Interval=60000; 
    timer1.Enabled=true; 
    timer2.Enabled=true; 

    // Thread.Sleep(60000); // makes no change even if uncommenting
} 
```

无论我是否取消注释该行`Thread.Sleep(60000);`，我们都看到 in 没有任何`lblTimer_Value_InBuildings`变化`timer2_Tick`。

你能给我一个解决方案（带或不带计时器）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T00:16:02.650

您的计时器是您的循环，您不需要 for 循环。您只需在函数调用之外跟踪循环变量。我建议将所有这些功能包装到一个类中，以使其与您的 GUI 代码分开。

```
private int loopVar = 0;
public void Form_Load()
{
    // Start 100ms after form load.
    timer1.Interval = 100;
    timer1.Enabled = true;
}

private void timer1_Tick(object sender, EventArgs e)
{
   timer1.Enabled = false;
   //  My Code Here
   loopVar++;

   if (loopVar < Max_Step)
   {
      // Come back to the _tick after 60 seconds.
      timer1.Interval = 60000;
      timer1.Enabled = true;

   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T23:54:35.397

当您执行 Thread.Sleep(60000) 时，您是在告诉 UI 线程休眠 60 秒。这也会阻止定时器的执行，因为 UI 线程挂起休眠而不是处理诸如定时器休眠之类的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T05:37:51.013

代码完全让我感到无聊

方法：

```
private void timer1_Tick(object sender, EventArgs e) {
    timer2.Enabled=false;
    timer1.Enabled=false;
    lblTimer_Value_InBuildings.Text="0";
}

private void timer2_Tick(object sender, EventArgs e) {
    lblTimer_Value_InBuildings.Text=(int.Parse(lblTimer_Value_InBuildings.Text)+1).ToString();
}

private void timer3_Tick(object sender, EventArgs e) {
    if(0!=(int)timer3.Tag) {
        // your code goes here and peformed per step
        timer1.Enabled=true;
        timer2.Enabled=true;
    }

    timer3.Tag=(1+(int)timer3.Tag)%Max_Step;
} 
```

缩写：

```
var delayedInterval=60000;

timer1.Interval=60000;
timer2.Interval=1000;
timer3.Interval=delayedInterval+timer1.Interval;

lblTimer_Value_InBuildings.Text="0";
timer3.Tag=1;
timer3.Enabled=true; 
```

您的原始代码永远不会生成`timer1`和`timer2`停止，所以我认为您应该更正`timer7`and`timer8`到`timer1`and `timer2`，否则它们在这里没有意义。

# algorithm - 挑战大 O

> ID：14656928
> 
> 赞同：0
> 
> 时间：2013-02-01T23:42:07.290
> 
> 标签：algorithm, big-o

我对大 O 有疑问：

```
for i:=1 to n do
for j:=1 to i*i do 
begin
  k:=1; m:=n;
  while m>=k do 
  begin
    k:=k*3;
    m:=m/2
  end
end 
```

老师给出了答案——n*n*n*log(n)。但是，我无法到达那里。那应该是基础2的日志。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:53:25.427

# php - CodeIgniter 和 Doctrine 教程中的控制器错误

> ID：14656932
> 
> 赞同：1
> 
> 时间：2013-02-01T23:42:22.397
> 
> 标签：php, codeigniter

我想连接到函数 world() 但出现错误。你知道我必须做什么吗？这是我使用 CodeIgniter 的第一步——我正在做[这个教程](http://www.phpandstuff.com/articles/codeigniter-doctrine-from-scratch-day-1-install-and-setup)。

我试过的网址：

*   本地主机/nauka/index.php/hello/world
*   本地主机/nauka/index.php/Hello/world

错误：

> 致命错误：第 5 行的 C:\wamp\www\nauka\application\controllers\hello.php 中找不到类“控制器”

截屏：

![在此处输入图像描述](../Images/4b1774a339af3fdd2a3c1e9c200a5701.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:56:15.800

你的控制器应该扩展 CI_Controller

```
class Hello extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
    } 
```

对于旧版本，这可能会有所不同，但您不应该使用不扩展 CI_Controller 的版本。

此外，您需要 parent::__construct 在那里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T23:59:12.143

`class Hello extends CI_Controller`

# php - CodeIgniter 表单验证，无法获取验证错误

> ID：14656936
> 
> 赞同：4
> 
> 时间：2013-02-01T23:42:38.380
> 
> 标签：php, forms, codeigniter, validation

我正在尝试使用 CodeIgniters 表单验证库，尽管我的验证规则似乎有效，但每当我调用 validation_errors() 时，我都会得到一个空字符串。

这是一个代码片段。

```
$base_rules = 'required|trim';

$this->_validation_rules = array(
        array(
            'field' => 'name',
            'label' => 'name',
            'rules' => $base_rules . '|alpha_numeric|min_length[5]|max_length[30]'
        ),
        array(
            'field' => 'price',
            'label' => 'Price',
            'rules' => $base_rules . '|decimal'
        ),
        array(
            'field' => 'duration',
            'label' => 'Duration',
            'rules' => $base_rules . '|integer'
        ),
        array(
            'field' => 'booking',
            'label' => 'Booking',
            'rules' => $base_rules . '|integer'
        )
    );
    $this->form_validation->set_rules($this->_validation_rules);

    if ($this->form_validation->run()) {
        // do stuff
    }else{
        // prints an empty string
         var_dump(validation_errors());
         exit;
    } 
```

有谁知道为什么会这样，我怎么能得到我的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:48:36.187

将 validation_errors() 放在表单顶部，并将代码更改为

```
 if ($this->form_validation->run()) {
        // do stuff
    }else{
       $this->load->view('myform'); //display your form again
    } 
```

validation_errors() 只会在视图中填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:56:11.463

将此代码放在视图文件的顶部

```
echo validation_errors('<div>', '</div>'); 
```

然后改成这个

```
else{
    $this->load->view('myform'); //display your form again
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-10T17:40:37.660

要完成 John 的回答，如果您做了一个表单帖子，您可以在您的输入下输入：

```
<?php echo form_error('input-name'); ?> 
```

但是，如果您正在发出 ajax 请求（现在不是您的情况，但将来如果您需要），您可以使用 validation_errors()。

这里有一个例子：

```
 //Important to turn that off if it's on
    $this->output->enable_profiler(false); 

    $this->output->set_status_header('500');
    $this->output->set_content_type('application/json');

    echo json_encode(array(
        'error_msg' => validation_errors(),
    )); 
```

然后在您的客户端，您可以使用这样的响应：

```
error:function(data) {
    $("your-error-input-selector").html('').append(data.responseJSON.msg);
} 
```

希望我能帮上忙，即使我迟到了 1 年。

PS对不起我的英语不好。

# php - 使用 PDO 时出现“致命错误：在非对象上调用成员函数 fetch_assoc()”

> ID：14656942
> 
> 赞同：-1
> 
> 时间：2013-02-01T23:43:27.177
> 
> 标签：php, pdo

如何解决以下错误？

> 致命错误：在第 27 行的 index.php 中的非对象上调用成员函数 fetch_assoc() 调用堆栈：0.0000 644064 1\. {main}() index.php:0

这是我到目前为止运行的代码：

```
$sql = 'SELECT * FROM pm_user WHERE name='.$_SESSION['pmname'].'';
$result = $pdo->query($sql);
$row = $result->fetch_assoc(); // line 27
echo $row['img']; 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:55:23.397

问题是：

*   您正在查询中插入一个值。这是**不好的和错误**的。您应该改用 PDO 的*预处理语句*功能。

*   在进行这种**错误**插值的过程中，您忘记添加*字符串引号*，使您的 SQL 查询无效。

*   您没有对;进行*任何错误检查* 失败`->query()`时，它会返回，因此您尝试在.`query()``FALSE``->fetch()``FALSE`

修复所有这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:49:54.267

当您在程序中出现错误时，**请检查您调用的所有函数的返回值**

```
// use quote or prepared statements to prevent from 
// SQL injection attacks!
$pmname = $pdo->quote($_SESSION['pmname']);
$sql = "SELECT * FROM pm_user WHERE name=$pmname";

$result = $pdo->query($sql);
if($result === FALSE) {
    echo 'oops! the query failed! ';
    print_r($pdo->errorInfo());
}

$row = $result->fetch_assoc();

if($row) {
    echo $row['img'];
} else {
    echo 'the query return no records :(';
} 
```

此外，您应该考虑`display_errors=1` *在开发期间*设置 php.ini 指令以查看 php 错误消息而不是“白屏”。您还可以使用以下代码行为每个脚本启用它：

```
ini_set('display_errors', 1); 
```

# mercurial - 是否有任何替代使用真正变更集的 Mercurial 队列？

> ID：14656947
> 
> 赞同：1
> 
> 时间：2013-02-01T23:44:32.390
> 
> 标签：mercurial, mercurial-extension

我喜欢[Mercurial Queues](http://mercurial.selenic.com/wiki/MqExtension)的灵活性和敏捷性。但是，对于我个人而言，我认为补丁不是真正的 Mercurial 变更集很尴尬。有没有计划让这个扩展使用真正的变更集？或者有没有其他方法可以这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:44:32.390

有一个非常有趣的 Mercurial 扩展可以解决其中的一些问题。Mercurial [Evolve](http://hg-lab.logilab.org/doc/mutable-history/html/)将 MQ 的灵活性与真正的 Mercurial 变更集相结合，为安全但仍然可变的历史提供了一种新方法。他们还有一个有趣的[“过时”](http://hg-lab.logilab.org/doc/mutable-history/html/obs-concept.html)变更集概念，可以增强开发人员之间的协作。

截至目前，它尚未用于生产，但正在迅速成为 Mercurial 的正式发布扩展。

还提供了对可用[路线图的更完整描述。](http://mercurial.selenic.com/wiki/ChangesetEvolution)

[用户指南](http://evolution.experimentalworks.net/doc/)提供了多个典型用途示例。

这个[MQ->evolve 参考指南](http://evolution.experimentalworks.net/doc/from-mq.html)提供了从 MQ 命令到 mercurial evolution 命令的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:22:56.287

只要你小心不要过早地分享历史，你可以做很多事情[`hg rebase`](http://mercurial.selenic.com/wiki/RebaseExtension)：你可以在一个分支中正常开发，重新排列和折叠变更集组，最后将它们移植到你的常规开发的尖端（分支名称消失，除非你要求 rebase 保留它）。您也可以简单地重新排列`default`，但在分支中玩耍更接近`mq`模型。我尝试过`mq`但转而使用 rebase，而且我从未回头。它做了我想做的一切。（*你*可能希望的是一个不同的问题，但你没有说）。

为了支持使用 rebase，您可以使用 mercurial[阶段](http://mercurial.selenic.com/wiki/Phases)来防止您的变更集过早泄漏。

# html - 我可以向 list-images-style 添加 CSS3 过渡吗？

> ID：14656950
> 
> 赞同：0
> 
> 时间：2013-02-01T23:44:52.673
> 
> 标签：html, firefox, css

我想要一个“列表样式图像”的 CSS3 线性过渡。它将用于 Firefox，因此它将具有“-moz-”。

```
-moz-transition: list-style-image 0.2s linear; 
```

上面的代码不起作用。甚至可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:07:18.913

不可以。转换通常只适用于可以以可预测的方式计算中间步骤的事物：颜色或数字（通常以 px、em 为单位）。图像或二进制样式类型（如显示无/块）要么是一个值，要么是另一个值，并且没有用于过渡的中间值。

# python - 2个函数的输入？

> ID：14656951
> 
> 赞同：5
> 
> 时间：2013-02-01T23:44:56.317
> 
> 标签：python, python-2.7

所以我一直在某种 python 类中给出以下代码。它确实是一门离散数学课，但他使用 python 来演示一切。这段代码应该演示一个多路复用器并用它构建一个异或门。

```
def mux41(i0,i1,i2,i3):
    return lambda s1,s0:{(0,0):i0,(0,1):i1,(1,0):i2,(1,1):i3}[(s1,s0)]

def xor2(a,b):
    return mux41(0,1,1,0)(a,b) 
```

在`xor2`函数中，我不明白 1 和 0 背后的语法`return mux41(0,1,1,0)(a,b)`是 mux 函数的输入，但是 (a,b) 在做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T23:46:10.453

这`(a, b)`实际上是`lambda`您在函数中返回的`mux41`函数的输入。

您的`mux41`函数返回一个`lambda`函数，该函数看起来像是根据`mux41`函数的输入返回字典中的值。您需要第二个输入来说明要返回的值。

直接等价于：

```
def xor2(a,b):
    f = mux41(0,1,1,0)
    return f(a,b) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T23:55:27.657

这是向 Python 初学者抛出的相当高级的代码，所以不要难过它对你来说并不明显。我也认为这比它需要的要复杂得多。

```
def mux41(i0,i1,i2,i3):
    return lambda s1,s0:{(0,0):i0,(0,1):i1,(1,0):i2,(1,1):i3}[(s1,s0)] 
```

这定义了一个基于两个输入返回值的函数对象。两个输入是`s1`和`s0`。该函数对象构建了一个字典，该字典预先填充了传递给 int 的四个值`mux41()`，并且它使用`s0`and`s1`来选择这四个值之一。

字典使用键来查找值。在这种情况下，键是 Python 元组：`(0, 0)`、`(0, 1)`、`(1, 0)`和`(1,1)`。该表达式`(s1,s0)`正在根据参数`s0`和构建一个元组`s1`。该元组用作从字典中查找值的键。

```
def xor2(a,b):
    return mux41(0,1,1,0)(a,b) 
```

所以，`mux41()`返回一个函数对象，它执行我刚才讨论的内容。 `xor2()`调用`mux41()` 并获取一个函数对象；然后它立即调用返回的函数对象，传入`a`和`b`作为参数。最后它返回答案。

创建的函数对象`mux41()`没有保存在任何地方。因此，每次调用时`xor2()`，您都在创建一个函数对象，然后对其进行垃圾回收。当函数对象运行时，它会构建一个字典对象，这也是每次使用后的垃圾收集。这可能是我见过的最复杂的 XOR 函数。

这是一个重写，可能会使这更清楚一点。而不是`lambda`用来创建一个未命名的函数对象，我将只`def`用来创建一个命名函数。

```
def mux41(i0,i1,i2,i3):
    def mux_fn(s1, s0):
        d = {
            (0,0):i0,
            (0,1):i1,
            (1,0):i2,
            (1,1):i3
        }
        tup = (s1, s0)
        return d[tup]
    return mux_fn

def xor2(a,b):
    mux_fn = mux41(0,1,1,0)
    return mux_fn(a,b) 
```

编辑：如果我想在 Python 中进行表查找 XOR，这就是我会写的。

```
_d_xor2 = {
    (0,0) : 0,
    (0,1) : 1,
    (1,0) : 1,
    (1,1) : 0
}

def xor2(a,b):
    tup = (a, b)
    return _d_xor2[tup] 
```

我们构建一次查找字典，然后直接从`xor2()`. 实际上没有必要在其中创建一个显式的临时变量，`xor2()`但它可能会更清晰一些。你可以这样做：

```
def xor2(a,b):
    return _d_xor2[(a, b)] 
```

你喜欢哪个？

当然，由于 Python 有一个内置的 XOR 运算符，你可以这样写：

```
def xor2(a,b):
    return a ^ b 
```

如果我是真的写这个，我可能会添加错误处理和/或让它对`bool`值进行操作。

```
def xor2(a,b):
    return bool(a) ^ bool(b) 
```

编辑：我又想到了一件事。在 Python 中，规则是“逗号组成元组”。元组周围的括号有时是可选的。我刚刚检查过，在字典查找中去掉括号就可以了。所以你可以这样做：

```
def xor2(a,b):
    return _d_xor2[a, b] 
```

它工作正常。这可能有点太棘手了？如果我在别人的代码中看到这一点，我会感到惊讶。

# version-control - 操作 ConnectSourceControl 的 TFSBranchToolVsExtension 执行失败

> ID：14656952
> 
> 赞同：1
> 
> 时间：2013-02-01T23:44:56.877
> 
> 标签：version-control, visual-studio-2012, branching-and-merging

我下载[了 TFSBranchTool VS Extension Project](http://vsarguidance.codeplex.com/releases/view/96222)。

重建并安装，但是当我尝试应用初始结构时，出现以下错误：

**执行错误：**

```
Exection of Action 'ConnectSourceControl' Failed. Details: Could not load file or assembly Microsoft.AlLMRangers.BranchTool.SourceControlWrapper...... 
```

知道可能导致问题的原因吗？我尝试了 2 个不同的服务器！，我得到了VS2012的最新更新。

我也安装了 VS2012 SDK 和 Vs2012 ObjectModel，不知道我错过了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:43:06.607

[我们已在http://vsarguidance.codeplex.com/releases/view/96222](http://vsarguidance.codeplex.com/releases/view/96222)上发布了示例代码的更新，以解决此错误。

问题是 VSIX 包中缺少 Microsoft.ALMRangers.BranchTool.SourceControlWrapper.dll。作为使用 MEF 加载动作的动作执行引擎，它没有直接引用动作实现程序集。

团队的 Vladimir 通过在 VS 扩展的清单文件中将程序集指定为 MEF 资产解决了这个问题。现在它在扩展包中重新分发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:31:13.810

您能否验证您`Microsoft.ALMRangers.BranchTool.SourceControlWrapper.dll` 在以下文件夹中是否有该文件：

> > %LOCALAPPDATA%\Microsoft\VisualStudio\11.0\Extensions\Microsoft。ALM Rangers\TfsBranchToolVSExtension\1.0

如果它不存在 - 尝试删除`TfsBranchToolVSExtension`并重新安装 VSIX。

# iphone - Iphone 5 和 Iphone 4 屏幕问题

> ID：14656956
> 
> 赞同：1
> 
> 时间：2013-02-01T23:45:23.467
> 
> 标签：iphone, xcode, ios5, ios6, screen-orientation

我正在使用 xcode 4.5 创建一个仅支持 3.5 英寸视网膜显示屏的应用程序。因此，在视图控制器的属性检查器中，我将尺寸设置为 3.5 英寸。但是，我正在 iphone 5 上测试我的应用程序，并且该应用程序会自动调整大小以适应整个屏幕。你知道为什么会这样吗？即使在 iphone 5 上查看时，如何使应用程序保持 3.5 英寸大小？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:52:32.127

如果您从项目中删除默认的 568h@2x 图标，应用程序将按照您想要的方式运行。在 iPhone 5 上，您会在顶部和底部看到黑条，以显示 iPhone 4 上的样子。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:55:10.887

答案是 - 你不能那样做 :) 但你可以下载 ios5 模拟器并将其`device`属性设置为 3.5 屏幕设备

# sql-server-2008 - SQL Server 2008 中缺少存储过程

> ID：14656963
> 
> 赞同：1
> 
> 时间：2013-02-01T23:45:50.813
> 
> 标签：sql-server-2008, stored-procedures

我创建了一个成功运行的存储过程，但我似乎无法在数据库中的通常位置找到该过程，我无法在 Excel 中执行该过程，但我可以删除该过程。

我很困惑。

我写了很多存储过程，从来没有遇到过这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:50:41.887

听起来像是我以前做过的事情：无意中将存储的过程添加到`master`数据库中，而不是我认为我正在使用的数据库中。

检查`master`下的数据库`System Databases`。

为了防止将来发生这种情况，您可能需要考虑`use dbname`在脚本中添加一条语句。

# android - 收件人无法从通知中看到 Facebook 请求

> ID：14656964
> 
> 赞同：0
> 
> 时间：2013-02-01T23:45:56.103
> 
> 标签：android, facebook

我有一个应用程序，允许用户从他们的 Facebook 朋友中选择并向他们发送消息。这是我正在使用的代码：

```
Bundle params = new Bundle();
params.putString("message", "Learn how to make your Android apps social");
WebDialog requestsDialog = (new WebDialog.RequestsDialogBuilder(this,
    Session.getActiveSession(), params)).setOnCompleteListener(
        new WebDialog.OnCompleteListener() {

            @Override
            public void onComplete(Bundle values, FacebookException error) {
            }

        }).build();
    requestsDialog.show(); 
```

用户从好友列表中选择，消息成功发送。问题是当朋友收到他们收到消息的通知时——他们尝试从下拉通知中访问消息，而不是显示消息，Facebook 应用程序只是无限期地显示一个加载符号（或者，充其量，如果我向同一用户发送消息，它会间歇性地显示）。如果用户去他们的通知中心，那里的消息是可见的，所以他们已经清楚地收到了。

什么可以解释这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:35:25.977

在 Facebook 应用程序设置中设置应用程序域和使用 Facebook 登录的网站似乎已经解决了这个问题。

# ios - 神秘的核心数据行为在第二次获取时检索空对象

> ID：14656965
> 
> 赞同：3
> 
> 时间：2013-02-01T23:46:01.573
> 
> 标签：ios, objective-c, core-data

我正在尝试将核心数据中的对象列表显示到 UITableViewController 中。这是这个 UITableViewController 的 viewWillAppear：

```
- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    self.landmarks = [[TSDataManager sharedInstance] fetchArrayFromDBWithEntity:@"Landmark" forKey:nil withPredicate:nil];
    [self.tableView reloadData];
} 
```

这是 fetchArrayFromDBWithEntity:forKey:withPredicate: 实现：

```
- (NSMutableArray*)fetchArrayFromDBWithEntity:(NSString*)entityName forKey:(NSString*)keyName withPredicate:(NSPredicate*)predicate {
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:self.managedObjectContext];
    [request setEntity:entity];

    if(keyName != nil){
        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:keyName ascending:NO];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
        [request setSortDescriptors:sortDescriptors];
    }

    if (predicate != nil){
        [request setPredicate:predicate];
    }

    NSError *error = nil;
    NSMutableArray *mutableFetchResults = [[self.managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
    if (mutableFetchResults == nil) {
        NSLog(@"%@", error);
    }
    return mutableFetchResults;
} 
```

当表格首次出现时，一切都正确显示，我有 4 个从数据库返回的对象，其标题正确显示在每个单元格中。

但是每当我转到另一个视图并返回时，该表有四个对象，但它们的“标题”属性的值为 nil！

这是我的地标类的代码：

```
@interface Landmark : NSManagedObject
@property (nonatomic, strong) NSString * title;
@end

@implementation Landmark
@dynamic title;
@end 
```

这是我的表格单元格的构造方式，以防它来自那里：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"LandmarkCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    Landmark *landmark = (Landmark *) self.landmarks[(NSUInteger) indexPath.row];
    cell.textLabel.text = landmark.title;

    return cell;
} 
```

显然我在这里做错了什么，但我真的不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:26:07.257

事实证明，问题出在我将 Core Data 实现为单例。我用 NLCoreData ( [https://github.com/jksk/NLCoreData](https://github.com/jksk/NLCoreData) ) 替换了它，现在一切正常。

# ios - 用什么替换 [reader dismissModalViewControllerAnimated :NO ？

> ID：14656968
> 
> 赞同：0
> 
> 时间：2013-02-01T23:46:10.373
> 
> 标签：ios, ios6, qr-code

我正在使用 XCode v.4.6，并且正在尝试制作一个使用 QR 码扫描仪的应用程序。我已按照此页面上的教程（[http://iphonenativeapp.blogspot.com/2011/07/qr-code-readerscanner-for-iphone-app-in.html](http://iphonenativeapp.blogspot.com/2011/07/qr-code-readerscanner-for-iphone-app-in.html)）复制并粘贴了此代码：

```
#import "QRscannerFirstViewController.h"

@interface QRscannerFirstViewController ()

@end

@implementation QRscannerFirstViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = NSLocalizedString(@"First", @"First");
    self.tabBarItem.image = [UIImage imageNamed:@"first"];
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#import "QRscannerFirstViewController.h"

@end
@implementation QRscannerViewController

@synthesize imgPicker,resultTextView;

-(IBAction)StartScan:(id) sender{
ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;

reader.readerView.torchMode = 0;

ZBarImageScanner *scanner = reader.scanner;
// TODO: (optional) additional reader configuration here

// EXAMPLE: disable rarely used I2/5 to improve performance
[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];

// present and release the controller
[self presentModalViewController: reader
                        animated: YES];

resultTextView.hidden=NO;
}

- (void) readerControllerDidFailToRead: (ZBarReaderController*) reader
                         withRetry: (BOOL) retry{
NSLog(@"the image picker failing to read");

}

- (void) imagePickerController: (UIImagePickerController*) reader           didFinishPickingMediaWithInfo: (NSDictionary*) info
{
NSLog(@"the image picker is calling successfully %@",info);
// ADD: get the decode results
id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
ZBarSymbol *symbol = nil;
NSString *hiddenData;
for(symbol in results)
    hiddenData=[NSString stringWithString:symbol.data];
NSLog(@"the symbols  is the following %@",symbol.data);
// EXAMPLE: just grab the first barcode
//  break;

// EXAMPLE: do something useful with the barcode data
//resultText.text = symbol.data;
resultTextView.text=symbol.data;

NSLog(@"BARCODE= %@",symbol.data);

NSUserDefaults *storeData=[NSUserDefaults standardUserDefaults];
[storeData setObject:hiddenData forKey:@"CONSUMERID"];
NSLog(@"SYMBOL : %@",hiddenData);
resultTextView.text=hiddenData;
[reader dismissModalViewControllerAnimated: NO];

}

@end 
```

进入我的 .m 文件。当我将此代码放入编辑器时，我收到一条警告，说明这是如何

```
[reader dismissModalViewControllerAnimated: NO]; 
```

和这个

```
[self presentModalViewController: reader
                        animated: YES]; 
```

已在 IOS 6.0 中去除。当我运行我的应用程序并按下启动 QR 扫描仪的按钮时，我的应用程序退出，它给了我

线程 1：信号 SIGABRT

错误和亮点

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([QRscannerAppDelegate class])); 
```

推荐什么来替换它，我应该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:50:43.483

干得好

```
[self presentViewController:reader animated:YES completion:Nil];

[reader dismissViewControllerAnimated:NO completion:Nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:49:07.953

使用`[self presentViewController:reader animated:YES completion:nil];`和`[reader dismissViewControllerAnimated:NO completion:nil];`

# linux - 是否可以从内核模块中向 USB 设备发送 SCSI 命令？

> ID：14656969
> 
> 赞同：5
> 
> 时间：2013-02-01T23:46:10.687
> 
> 标签：linux, linux-device-driver, kernel-module, scsi, usb-mass-storage

## 问题

鉴于 udev 传递给我的内核模块的信息（可能是块设备路径），我如何向块设备发送 SCSI 命令？（但让它正常运行，否则意味着分区已安装，没有数据丢失等）

## 我想做的事

我有一个 USB 大容量存储设备，它具有通过 SCSI 命令控制的 LED。我想编写一个 LED 驱动程序为其提供 /sys/class/leds/* 条目。

这里的目标是让设备正常运行（分区安装和运行等），但也允许 /sys/class/leds/* 交互，这些交互将发送 SCSI 命令来控制 LED。

使用 sg_raw 在用户空间发送我需要的 SCSI 命令很容易。但我需要一个 kmod 来提供 /sys/class/leds/...

基本上我需要的是ioctl()。但是，我知道从 kmod 中调用 open()、ioct() 等通常是一个坏主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:13:53.860

它可以通过一些在 USB 和 SCSI 之间模拟的伪驱动程序来实现。我认为当您通过[SCSI 访问 USB 设备时，您可能会遇到什么问题。](http://www.embeddedlinux.org.cn/EssentialLinuxDeviceDrivers/final/ch11lev1sec6.html)

* * *

定义了这些低级和中级 scsi 驱动程序[。](https://www.kernel.org/doc/Documentation/scsi/scsi_mid_low_api.txt)

# boilerplatejs - Boilerplate.js 以编程方式导航到组件

> ID：14656970
> 
> 赞同：2
> 
> 时间：2013-02-01T23:46:13.143
> 
> 标签：boilerplatejs

我在模块中声明了一个组件并添加为路由：

var controller = new Boiler.UrlController($(".appcontent")); 控制器.addRoutes（{'艺术家'：新艺术家组件（上下文），'俱乐部'：新俱乐部组件（上下文）}）；控制器.start();

我需要以编程方式导航到“俱乐部”之类的组件。请问具体的语法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:03:53.930

您可以在以下示例代码中看到如何从列表视图导航到详细信息视图：

[https://github.com/ectechno/boilerplatejs/blob/master/src/modules/sampleModule2/employeeList/viewmodel.js](https://github.com/ectechno/boilerplatejs/blob/master/src/modules/sampleModule2/employeeList/viewmodel.js)

以编程方式导航的方法调用是：

```
Boiler.UrlController.goTo("artists"); 
```

# ruby-on-rails - Rails中基于URL字符串值的自动填充表单

> ID：14656973
> 
> 赞同：0
> 
> 时间：2013-02-01T23:46:45.743
> 
> 标签：ruby-on-rails

我有一个网站，首页上有一个位置表格。我想使用基于 URL 字符串的值自动填充表单。我怎样才能在rails中做到这一点？

例如，当用户到达首页时，我希望表单根据以下内容显示值 New York： website.com?city="New York"

如何最好地在 Rails 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:51:57.100

首先，你可以获取当前请求的 url，一切都在这里：[如何在 Ruby on Rails 中获取当前的绝对 URL？](https://stackoverflow.com/questions/2165665/how-do-i-get-the-current-url-in-ruby-on-rails)

然后你只需要“解析”它：

```
<% city = request.fullpath.split('=').last %> 
```

将返回带有类似 url 的“New York” `website.com?city="New York"` （不确定这个，但也许你只能通过 params[:city] 获得它，我只是认为`params`在视图中不可用）

其余的取决于表单的结构......

# php - 优化PHP登录代码

> ID：14656974
> 
> 赞同：-1
> 
> 时间：2013-02-01T23:46:47.363
> 
> 标签：php, pdo

我已经为带有两个登录表单的网页编写了一个非常简单的 PHP 登录脚本，我只是想知道是否有任何方法可以优化它（即，将所有内容包装在一个函数中以处理两个登录）。将不胜感激任何想法！

```
session_start();
require_once("resources/php/connection.php");

// PM login
if(isset($_POST['pmsubmit']))
{
$pmname = $_POST['pmname']; 
$pmpass = $_POST['pmpass'];
// check if password matches the one in the table
$query = $pdo->prepare("SELECT * FROM db_pass WHERE pass = :pass");
$query->execute(array(":pass" => $pmpass));
    // if there is a match then we log in the user
    if ($query->rowCount() > 0)
    {
    // session stuff
    $_SESSION['pmname'] = $_POST['pmname'];
    // refresh page
    header( 'Location: pm/index.php' ) ;
    } 
    // if there is no match then we present the user with an error
    else
    {
    echo "error";
    exit;
    }
}

// TS login
if(isset($_POST['tssubmit']))
{
$dept = $_POST['dept']; 
$tspass = $_POST['tspass'];
// check if password matches the one in the table
$query = $pdo->prepare("SELECT * FROM db_pass WHERE pass = :pass");
$query->execute(array(":pass" => $tspass));
    if ($query->rowCount() > 0)
    {
    // session stuff
    $_SESSION['dept'] = $_POST['dept']; 
    // refresh page
    header( 'Location: ts/index.php' ) ;
    } 
    // if there is no match then we present the user with an error
    else
    {
    echo "error";
    exit;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:06:00.553

如果你愿意，你可以尝试这样的事情......

```
if(isset($_POST['pmsubmit']))
{
  LoginSubmit('pm', 'pmname', 'pmpass');
}

if(isset($_POST['tssubmit']))
{
  LoginSubmit('ts', 'dept', 'tspass');
}

function LoginSubmit($pm_or_ts, $the_name_input, $the_pass_input)
{
  $the_name = $the_name_input;
  $posted_name = $_POST[$the_name];
  $posted_pass = $_POST[$the_pass_input];

  // check if password matches the one in the table
  $query = $pdo->prepare("SELECT * FROM db_pass WHERE pass = :pass");
  $query->execute(array(":pass" => $posted_pass));
  // if there is a match then we log in the user
  if ($query->rowCount() > 0)
  {
    // session stuff
    $_SESSION[$the_name] = $posted_name;
    // refresh page
    header( 'Location: ' . $pm_or_ts . '/index.php' ) ;
  } 
  // if there is no match then we present the user with an error
  else
  {
    echo "error";
    exit;
  } 
```

# c - 如何修复 SIGSEGV？（在斐波那契数列中处理高达 1000000 的大值时出错）

> ID：14656975
> 
> 赞同：0
> 
> 时间：2013-02-01T23:47:09.043
> 
> 标签：c, fibonacci, segmentation-fault

试图开发一个快速找到斐波那契值的代码。但问题是当输入为 1000000 时，我得到 SIGSEGV 错误。另外，从这里的其他问题中，我知道这可能是因为堆栈内存在运行时超出限制。我想这就是这里的情况。

```
#include<stdio.h>
unsigned long long int a[1000001] = {0};
unsigned long long int fib(int n)
{
    unsigned long long int y;
    if(n==1 || n==0)
        return n;
    if (a[n] != 0)
        return a[n];
    else
    {
      y=fib(n-1)+fib(n-2);
      a[n] = y;
    }
    return y;
}
main()
{
    int N;
    unsigned long long int ans;
    a[0] = 1;
    a[1] = 1;
    scanf(" %d",&N);
    ans = fib(N+1);
    printf("%llu",ans);
} 
```

如何为输入值 1000000 修复此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:04:52.283

这是一种更好的方法（仍然可以显着改进），它将为您计算斐波那契数：

```
unsigned long long Fibonacci(int n)
{ 
    unsigned long long last[2] = { 0, 1 }; // the start of our sequence

    if(n == 0)
        return 0;

    for(int i = 2; i <= n; i++)
        last[i % 2] = last[0] + last[1];

    return last[n % 2];
} 
```

但是，您将无法用它计算第[100 万个斐波那契数](http://www.upl.cs.wisc.edu/~bethenco/fibo/)，因为这个数字比`unsigned long long`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:49:38.867

不要使用堆栈，而是使用您自己的变量来跟踪状态。本质上，使用您自己的代码进行函数调用和返回。

最好的方法实际上就是将算法完全切换到一种有效的算法。例如，要计算 fib(6)，您的代码会计算 fib(4) 两次，一次是在 fib(5) 询问时，一次是在 fib(6) 询问时。

# c# - 如何让监控程序显示为墙纸？

> ID：14656984
> 
> 赞同：6
> 
> 时间：2013-02-01T23:49:07.603
> 
> 标签：c#, wallpaper

我制作了一个简单的 C# 程序来显示我们拥有的一些机器的基本信息。该程序是全屏的，并且每秒刷新一次。我们在店里有一台专用的 PC 和屏幕来不断地显示它，但有些导演也希望它在他们的 PC 上，但显示为墙纸。

请告诉我是否有一种简单的方法可以将程序设置为动态壁纸，因为我什么也没找到。

我认为真正的解决方案是修改程序以使其最小化运行，并且偶尔（例如每 15 或 20 分钟）在最大化时生成外观图像，然后将该图片设置为桌面墙纸。

我的解决方案有意义吗？如何从隐藏的应用程序生成图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:00:16.173

你的解决方案很有意义。

您可以使用以下代码更改背景 f:om C#，但它仅适用于 .bmp 图像类型：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern Int32 SystemParametersInfo(UInt32 uiAction, UInt32 uiParam, String pvParam, UInt32 fWinIni);
private static UInt32 SPI_SETDESKWALLPAPER = 20;
private static UInt32 SPIF_UPDATEINIFILE = 0x1;
private String imageFileName = "c:\\sample.bmp";

public void SetImage( string filename )
{
    SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, filename, SPIF_UPDATEINIFILE);
} 
```

有关在运行时创建 .bmp 的信息，您可以阅读[此论坛帖子](http://www.xtremedotnettalk.com/showthread.php?t=72975)。

# html - 在 html 页面上居中 swf 对象

> ID：14656986
> 
> 赞同：1
> 
> 时间：2013-02-01T23:49:14.857
> 
> 标签：html, css, dreamweaver

我有一个嵌入在 html 页面上的 SWF 对象。我只是想在屏幕上居中的对象。我已经尝试了一百种不同的方法（将对象的对齐属性设置为居中，将对象包装在 div 中并将其居中……）但对象总是与屏幕左侧齐平。我确信它是一个非常简单的代码行，可以使这项工作，请告诉我那是什么......

```
This application was built using Adobe Flex, an open source framework
for building rich Internet applications that get delivered via the
Flash Player or to desktops via Adobe AIR. 

Learn more about Flex at http://flex.org 
// --><head>
    <title></title>
    <meta name="google" value="notranslate" />         
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <style type="text/css" media="screen"> 
        html, body  { height:100%; }
        body { margin:0; padding:0; overflow:auto; text-align:center; background-     position:center;
               background-color: #000000;}   
        object:focus { outline:none; }
             #flashContent { display:; }

 </style>

    <!-- Enable Browser History by replacing useBrowserHistory tokens with two hyphens -->
    <!-- BEGIN Browser History required section -->
    <link rel="stylesheet" type="text/css" href="history/history.css" />
    <script type="text/javascript" src="history/history.js"></script>
    <!-- END Browser History required section -->  

    <script type="text/javascript" src="swfobject.js"></script>
    <script type="text/javascript">
        // For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection. 
        var swfVersionStr = "10.2.0";
        // To use express install, set to playerProductInstall.swf, otherwise the empty string. 
        var xiSwfUrlStr = "playerProductInstall.swf";
        var flashvars = {};
        var params = {};
        params.quality = "high";
        params.bgcolor = "#000000";
        params.allowscriptaccess = "sameDomain";
        params.allowfullscreen = "true";
        var attributes = {};
        attributes.id = "Main";
        attributes.name = "Main";
        attributes.align = "middle";
        swfobject.embedSWF(
            "Main.swf", "flashContent", 
            "100%", "100%", 
            swfVersionStr, xiSwfUrlStr, 
            flashvars, params, attributes);
        // JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
        swfobject.createCSS("#flashContent", "display:block;text-align:center;");
    </script>
</head>
<body>

    <div id="flashContent" align="center">
        <p>
            To view this page ensure that Adobe Flash Player version 
            10.2.0 or greater is installed. 
        </p>
        <script type="text/javascript"> 
            var pageHost = ((document.location.protocol == "https:") ? "https://" : "http://"); 
            document.write("<a href='http://www.adobe.com/go/getflashplayer'><img src='" 
                            + pageHost + "www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>" ); 
        </script> 
    </div>

    <noscript>
    <div align="center">
      <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" align="middle" id="Main">
        <param name="movie" value="Main.swf" />
        <param name="quality" value="high" />
        <param name="bgcolor" value="#000000" />
        <param name="allowScriptAccess" value="sameDomain" />
        <param name="allowFullScreen" value="true" />
        <param name="wmode" value="opaque" />
        <!--[if !IE]>-->
        <object data="Main.swf" type="application/x-shockwave-flash" width="100%" height="100%" align="middle">
          <param name="quality" value="high" />
          <param name="bgcolor" value="#000000" />
          <param name="allowScriptAccess" value="sameDomain" />
          <param name="allowFullScreen" value="true" />
          <param name="wmode" value="opaque" />
          <!--<![endif]-->
          <!--[if gte IE 6]>-->
          <p> 
            Either scripts and active content are not permitted to run or Adobe Flash Player version
            10.2.0 or greater is not installed.
            </p>
          <!--<![endif]-->
          <a href="http://www.adobe.com/go/getflashplayer">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash Player" />
          </a>
          <!--[if !IE]>-->
          </object>
        <!--<![endif]-->
        </object>
    </div>
    </noscript>     
   </body>
</html> 
```

PS 这是我尝试编辑使用 SWF 生成的 html 文件时遇到的问题。当我尝试创建一个新的 HTML 文件并将 swf 嵌入其中时，我可以将文件居中，但我无法让它缩放以适应屏幕的垂直尺寸（页面底部的对象在下面的视图中，而在自动生成的 html 文件中，swf 自动缩放以适应屏幕，但我无法将其居中..) 将不胜感激这些问题的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:04:58.467

这是[jsFidle中的一个示例](http://jsfiddle.net/755Td/)

这很简单，您使用`absolute`position 并指定 50% from`top`然后`left`put`top`和`left`负边距一半的容器。

**这是CSS：**

```
.container{
    width: 400px;
    height: 400px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-left: -200px;
    margin-top: -200px;
    background-color: blue;
} 
```

**请记住，要使其正常工作，您需要固定大小或 javascript 更新窗口调整大小事件的边距！**

**这是一个 HTML 标记：**

```
<div class="container">
    <iframe width="400" height="400" src="http://www.youtube.com/embed/Awlp8B5os0k" frameborder="0" allowfullscreen></iframe>
</div> 
```

# java - LWJGL/OpenGL 的理想精灵表数量

> ID：14656987
> 
> 赞同：0
> 
> 时间：2013-02-01T23:49:16.740
> 
> 标签：java, opengl, lwjgl, sprite-sheet

我正在使用 LWJGL 制作游戏，到目前为止，我决定使用 5 或 6 个精灵表。它就像一个用于块，一个用于项目、对象等。通过这样做，我得到了具有密切相关的精灵的精灵表，并且通常具有相同的大小（在块和项目的情况下）。但这是更好的方法吗？或者我应该把所有的东西都放在一个单独的精灵表上，没有任何组织？

如果我以正确的方式做事，还有另一个问题。例如，当您在地图中时，我需要绘制块。但是在这些块上，可能有电线和其他东西——它们在一个单独的精灵表中。但是，此信息存储在同一个数组中。所以通常我只迭代一次，每次，绘制块，然后在它上面画线 - 每次迭代切换精灵表两次。但我认为切换这些可能需要一些时间，所以运行两次可能会更有趣，首先绘制所有块，然后再次迭代以绘制电线？为了改变纹理，我使用了 SlickUtil Texture 类，它有一个绑定方法——非常容易使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:25:48.833

没有“理想”；有一些因素对您的需求很重要。

请记住使用精灵表的原因：因为在处理 2D 渲染时切换纹理的成本太高而无法按对象进行。因此，只要您不为渲染的每个精灵切换纹理，您就已经在游戏性能方面领先。

您需要考虑的其他注意事项是：

*   最低用户硬件规格。`GL_MAX_TEXTURE_SIZE`具体来说，您希望代码工作的最小大小是多少？精灵表越大，对硬件的要求就越高，因为单个精灵表必须是纹理。

    此值取决于硬件，但有一些一般要求。OpenGL 3.3 至少需要 1024；几乎每一块 GL 3.3 硬件都提供 4096。OpenGL 4.3 需要大量的 16384，这已接近浮点纹理坐标容量的理论极限（假设您需要至少 8 位的亚像素纹理坐标精度）。

    GL 2.1 的最低要求为 64，但人们将拥有的任何*实际*2.1 硬件将提供 512 到 2048 之间。因此，根据此选择您的 sprite sheet 大小。

*   你在渲染什么。您希望能够从一张精灵表中尽可能多地进行渲染。您要避免的是*频繁*的纹理切换。如果您的世界被划分为多个层，如果您可以将每个层的精灵放在它们自己的工作表上，那么您做得很好。没有硬件会因 20 次纹理更改而窒息；这是数以万计的问题。

    最主要的是一次渲染所有使用工作表的所有内容。不一定在同一个渲染调用中；您可以切换网格和着色器制服/固定功能状态。但是，在您渲染完该工作表所需的所有内容之前，您不应在这些渲染之间切换工作表。

# sql - 如何在查询中正确调用函数

> ID：14656989
> 
> 赞同：1
> 
> 时间：2013-02-01T23:49:30.787
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures

我不熟悉在查询中调用存储函数和存储过程。有人可以帮助我了解如何比我在下面更好地调用存储的函数。似乎必须有一种更现实、更合乎逻辑的方式才能让代码流动起来。这似乎有点疯狂。

```
SELECT        SUM(TotalAmt) AS [Total Amount]
FROM            dbo.fDataamount('1', @startdate, @enddate, '1', '1', 'Total', 'Total', 'Total', 'Total', '1', '1', '1', '1', '1') AS fDataamount_1
WHERE        (DataID = 55) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:00:44.270

您的查询不起作用吗？或者您是否正在寻找一种更好的书写方式。

如果它不起作用，请检查以确保它是表值函数。

我还会查看该功能的使用频率。只有当我可以整合跨多个存储过程使用的代码以便于维护时，我才更喜欢使用函数。

如果该函数仅用于这一存储过程，请考虑在临时表或 CTE 中创建数据集并引用它。

我从您的查询中可以看出，您实际上是从函数返回的表中取出一列的总和。为什么要费心使用一个函数呢？您可以将该逻辑从函数中取出并将其直接放入查询中。

# javascript - JS window.close 不起作用

> ID：14656995
> 
> 赞同：0
> 
> 时间：2013-02-01T23:50:21.447
> 
> 标签：javascript, html, popup

制作弹出窗口的代码片段：

```
<script>
function about() {
window.open( "/aboutserver.html", "_blank", 
"location=no, titlebar=no, status = no, height = 650, width = 300, resizable = no, location=no, menubar=no, scrollbars=no, toolbar=no");
}
</script>
<a href="#" onClick="about()">Server Info</a> <br> 
```

这是实际弹出窗口的代码：

```
<div align="center"><html><body><h1>Info</h1></div>
<br>Provides:<br><br><br>
blah blah etc
<script>
function close(){
window.self.close();
}
</script>
<button onClick=close()>Close</button> 
```

我也试过 window.close(); 和 window.close('aboutserver.html')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:58:35.340

您正在覆盖全局`close`函数。您应该从试图调用自身的函数中得到堆栈溢出错误。

您可以删除您的自定义`close`函数并直接调用全局`close()`函数，或者将您的函数重命名为`closeWin`

# objective-c - 以编程方式设置 NSMatrix 选择在尝试稍后获取选定单元格时导致互斥锁

> ID：14656996
> 
> 赞同：2
> 
> 时间：2013-02-01T23:50:24.207
> 
> 标签：objective-c, macos, osx-lion, xcode4.2, nsmatrix

### 概述

我在 Mac OS X Cocoa 应用程序中看到一个奇怪的问题，我正在使用 Xcode 4.3.2 开发并在 Mac OS X 10.7.5（针对 Mac OS X 10.6）上进行测试：我有一个基本的 NSMatrix 无线电组主 NIB 在我的主控制器中具有一个出口和一个动作，但也用于其他两种方法（也在主控制器中）。该操作将选定的标签保存到 NSUserDefaults 并启用/禁用一个 NSTextField 基于它被选中，一种方法是首选项加载器，因此在加载时按标签选择一个单元格，另一种方法查找它为其他逻辑选择的标签（代码下面的示例）。

基本的东西，但在一种情况下（仅以编程方式选择 NSMatrix 中的单元格，而不是通过单击 GUI 中的单选按钮），应用程序 PWOD 处于互斥锁中。

### 代码和功能

我在下面重命名了变量和方法，但没有更改代码的任何其他结构。`passwordRadioGroup`是`NSMatrix*`IBOutlet。

```
- (void)applicationDidFinishLaunching:(NSNotification*)aNotification {
    // get logging up and running
    [self initLogging];

    // load various prefs
    // ...
    [self loadPasswordSettings];
}

- (void)loadPasswordSettings {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    // load password settings from our prefs
    NSNumber *passwordTypeTag = [defaults objectForKey:kPasswordTypeDefaultKey];
    if ( passwordTypeTag != nil ) {
        [passwordRadioGroup selectCellWithTag:[passwordTypeTag intValue]];
    } else {
        [passwordRadioGroup selectCellWithTag:kPasswordTypeRadioRandomTag];
    }
    [self selectPasswordType:passwordRadioGroup];

    // ...
}

- (IBAction)selectPasswordType:(NSMatrix *)sender {
    NSInteger tag = [[sender selectedCell] tag];
    switch ( tag ) {
        case kPasswordTypeRadioRandomTag:
            // disable the password text field
            [passwordField setEnabled:NO];
            break;
        case kPasswordTypeRadioManualTag:
            // enable the password text field
            [passwordField setEnabled:YES];
            break;
    }
    [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:tag] forKey:kPasswordTypeDefaultKey];
}

- (NSString *)generateUserPassword {
    NSString *password;

    // which type of password should we be generating (random or from a specifed one)?
    NSInteger tag = [[passwordRadioGroup selectedCell] tag];
    switch ( tag ) {
        // manual password
        case kPasswordTypeRadioManualTag:
            password = [passwordField stringValue];
            break;
        // random password
        case kPasswordTypeRadioRandomTag:
            // password = randomly generated password;
            break;
    }

    return password;
} 
```

当应用程序启动时，我的主控制器会收到一条`applicationDidFinishLaunching`消息，然后将 `loadPasswordSettings`消息发送给它自己。`loadPasswordSettings`然后发送`[[passwordRadioGroup selectedCell] tag]`和发送`[passwordRadioGroup selectCellWithTag:]`。这可以正常工作，并且在 GUI 中选择了正确的单选按钮。它最终调用`[self selectPasswordType:passwordRadioGroup`（它也成功调用`[[passwordRadioGroup selectedCell] tag]`）并适当地启用/禁用文本字段并将标签写回 NSUserDefaults（通常，但并不总是多余的）。

您可以选择任何单选按钮，它会向`selectPasswordType:`我的主控制器发送一条消息（将其传递给我的实例`passwordRadioGroup`；我已经在调试器中验证了内存地址并可以检查它的 ivars）。这成功调用`[[passwordRadioGroup selectedCell] tag]`并将标签保存到 NSUserDefaults。

您可以根据需要多次执行上述两项操作，而不会出现问题。退出和重新启动正确地将单选按钮恢复到您上次离开的状态，因此它绝对正确地获取选定的标签，将其存储在 NSUser 默认值中，从 NSUserDefaults 中检索它，并在 NSMatrix 上按标签设置选定的单元格。

## 这就是它变得古怪的地方：

还有另一个按钮，当单击它时，它会执行一系列其他工作，然后最终将`generateUserPassword`消息发送给自身以生成密码（同样，这一切都在主控制器中并在主线程中运行）。它做的第一件事是什么？来电`[[passwordRadioGroup selectedCell] tag]`。好吧，您可以安全地随心所欲地执行此操作，如上图所示，对吧？

如果您选择其中一个单选按钮，因此通过 GUI 更改所选单元格并将`selectPasswordType:`消息再次发送到我的主控制器，是的。你不会遇到任何问题（虽然，我承认它看起来有点慢，而且 PWODs 一秒钟）。

如果您在启动后*未*单击 NSMatrix（因此不会再次从 GUI 强制选择/操作），则该`[[passwordRadioGroup selectedCell] tag]`调用`generateUserPassword`将立即 PWOD。如果我在 Xcode 的调试器中点击暂停按钮来查看它的位置，它总是在主线程中`psych_mutexwait`（从 调用）。`class_lookupMethodAndLoadCache`如果`selectPasswordType:`没有以编程方式调用并且能够`[[passwordRadioGroup selectedCell] tag]`毫无问题地运行，我至少会剩下一些理智。

### 帮助！

重申一下，我已经在调试器中完成了这一点，并且可以验证内存地址和 ivars 确认`passwordRadioGroup`没有从我下面被更改，也没有被释放（我已经尝试了 & 没有启用“僵尸对象” ）。我的主控制器中唯一的引用`passwordRadioGroup`是上面看到的那些。谷歌搜索各种 NSMatrix/radio/ `selectCellWithTag`/ `selectedCell`/ `selectedTag`/ `class_lookupMethodAndLoadCache`/mutex 术语/组合并没有取得成果。

任何解决方案、故障排除建议或想法将不胜感激。如果应得的话，也欢迎为愚蠢打耳光。

# image - GrabCut 分割是否取决于图像的大小？

> ID：14656997
> 
> 赞同：3
> 
> 时间：2013-02-01T23:50:30.583
> 
> 标签：image, image-processing, computer-vision, image-segmentation

我一直在思考这个问题，但从未真正对此进行过详细的分析。[使用GrabCut](http://research.microsoft.com/pubs/67890/paper_siggraph04.pdf) [1] 算法进行前景分割是否取决于输入图像的大小？直觉上，在我看来，由于grabcut 基于颜色模型，颜色分布不应该随着图像大小的变化而改变，但较小图像中的[锯齿]伪影可能会起作用。

任何关于图像大小对使用抓取的图像分割的依赖性的想法或现有实验都将受到高度赞赏。

谢谢

[1] C. Rother、V. Kolmogorov 和 A. Blake，GrabCut：使用迭代图形切割的交互式前景提取，ACM Trans。图，卷。23，第 309-314 页，2004 年。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T07:54:23.513

大小事项。

GrabCut 的目标函数平衡了两个方面：

1.  测量每个像素适合前景/背景颜色模型的一元项。
2.  衡量分割边界的“复杂性”的平滑项（成对项）。

第一项（一元）与前景的**面积**成比例，而第二项（平滑度）与前景的周长成**比例**。
因此，如果将图像缩放 x2 因子，则面积会增加 x4，而周长仅大致缩放 x2 因子。

因此，如果您针对特定图像尺寸/比例调整（或学习）能量函数的参数，这些参数可能不适用于不同的图像尺寸。

PS
你知道Office 2010的“前景选择工具”是基于GrabCut算法的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T06:04:04.647

这是[GrabCut 论文](http://research.microsoft.com/pubs/67890/paper_siggraph04.pdf)的 PDF ，由 Microsoft Research 提供。

图像大小的两个主要影响将是运行时间和图像中细节的比例，这可能被认为是重要的。在这两者中，运行时间是 GrabCut 最会咬你的一个 - 图形切割方法已经相当慢，并且 GrabCut 反复使用它们。

首先将图像下采样到较小的分辨率是很常见的，通常与低通滤波器结合使用（即使用高斯核对源图像进行采样）。这显着降低了算法运行的*n*，同时减少了小细节和噪声对结果的影响。

您还可以使用遮罩将处理限制在图像的特定部分。作为初始“抓取”或选择阶段，您已经在 GrabCut 中获得了其中的一些内容，稍后在基于画笔的细化阶段再次获得。这个阶段还为您提供了一些关于比例的隐含信息，即感兴趣的特征可能填充了大部分选择区域。

推荐：

以任何方便的比例显示图像，并将所选区域下采样到每个示例的大致 n = 100k 到 200k 范围。如果您需要提高结果质量，请使用初始阶段的结果作为后续更高分辨率迭代的起点。