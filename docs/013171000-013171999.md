# StackOverflow 问答 13171000-13171999

# javascript - ActionScript 中等效的 JavaScript 代码

> ID：13171001
> 
> 赞同：1
> 
> 时间：2012-11-01T04:34:21.347
> 
> 标签：javascript, actionscript-3, apache-flex, flash-builder, mxml

大家好，我是两种语言的新手...我找到了 JavaScript 和 HTML 中的乱码示例 我想将该代码转换为 ActionScript 代码，这些语言对我来说看起来很相似，但是当我在 Flash Builder 中编译它时没有任何反应...我想了解如何在 ActionScript 和 MXML 代码中执行示例...

我不明白如何在 ActionScript 中执行的 JavaScript 代码部分：

```
function check(value)
{
    if ( value != Math.round(value) )
   alert("You must enter an integer in this input box.");
}
function generate( )
{
var minval = parseInt(**document.form.min.value**);
    if ( isNaN(minval) || minval != parseFloat(**document.form.min.value**)) 
```

* * *

并使用 HTML 中的 TextInput 实现此功能：

```
<INPUT TYPE="text" NAME="**min**" VALUE="" ONCHANGE="check(**this.value**)"> 
```

* * *

我不知道把它留在 AS3 和 MXML 中很热......我试过：

```
public function generate()
{
var minval = parseInt(**min**);
if ( isNaN(minval) || minval != parseFloat(**min**))
{ 
```

和 MXML：

```
<s:TextInput id="**min**" change="**check(this)**" /> 
```

如您所见，我非常迷茫...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:17:29.003

```
<fx:Script> 
```

`<![CDATA[`

```
import flash.events.Event;
import mx.controls.Alert;
public function check(event:Event):void
{               
        if (isNaN(parseInt(min.text)) || isNaN(parseFloat(min.text))) {
            /* Do something here*/
            Alert.show("Input a number", "Error");
        }               
}
]]>
</fx:Script>
<s:TextInput id="min" change="check(event)"/> 
```

这段代码按照你想要的方式工作，我猜。请记住，parseInt 函数会忽略有效整数之后的任何尾随非数字字符。例如，如果您先输入“a”，则代码有效，但如果您输入 1a，则代码失败。有关该功能的更多详细信息，请参见此处

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#parseInt](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/package.html#parseInt) ()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:25:47.893

只是一个评论：

输入元素的值总是作为字符串返回，因此要检查用户是否输入了整数，您应该只查看该值是否全为数字，例如：

```
 var isInt = /^\d+$/.test(s); // '123' -> true, '123a' -> false 
```

您可能希望先修剪前导空格和尾随空格，也可能不修剪。

# facebook - 如何从状态更新中获取 Facebook 位置

> ID：13171003
> 
> 赞同：1
> 
> 时间：2012-11-01T04:34:41.253
> 
> 标签：facebook, geolocation

我可以`(latitude,longitude)`从访问 facebook 位置`status update`吗？有任何API吗？请建议我，如果您知道有关它的任何资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:51:31.687

您不需要为此使用不同的 API。据我所知，没有单独的 API 可用于从状态更新中提取位置详细信息。

话虽如此，任何指定了位置的状态更新都将返回如下内容：

```
"place": {
        "id": "243114582418387", 
        "name": "Pune!!", 
        "location": {
          "latitude": 18.51759564, 
          "longitude": 73.83373153
        }
      } 
```

上面的示例来自我使用此 Graph API 查询获取的状态更新之一：`USER_ID/posts?with=location`. 但是，即使您说使用`USER_ID/home`or进行查询，您仍然会得到相同的结构`USER_ID/feed`。

您真正需要做的就是检查状态更新是否有**“地点”**标签，如果可用，解析结果。上面的结构在**“位置”**标签下有*纬度*和*经度。*

 **我主要在 Android 上工作，由于您没有在帖子中标记您的平台，因此我无法提供实际代码。但是逻辑，我确信可以在任何平台上使用。**

# ios - ios应用程序中的Facebook页面相册

> ID：13171007
> 
> 赞同：0
> 
> 时间：2012-11-01T04:35:14.237
> 
> 标签：ios, facebook, facebook-graph-api, ios6, fbconnect

我有一个 Facebook 页面，我想将 FB 页面的所有相册获取到当前正在开发的 ios 应用程序。我似乎一直坚持下去。

请有人建议我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:51:54.207

使用图形 API 从您的 Facebook 页面获取所有详细信息.....

[https://graph.facebook.com/ID/albums](https://graph.facebook.com/ID/albums)

从您的页面返回列表。

# jboss - 想要使用 JMS 将大量数据从一台机器传输到另一台机器

> ID：13171010
> 
> 赞同：0
> 
> 时间：2012-11-01T04:35:33.000
> 
> 标签：jboss, jms

我有一个 Web 应用程序在 Jboss 5 上运行，并且想在另一台机器上运行相同的应用程序，它每天将传输数千万条记录。我正在计划 JBoss JMS。请告诉我们，这是一个不错的选择还是有其他更好的选择。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:39:26.413

也许 XML 会有所帮助。根据我的经验，db to db 效率不高，因为由于网络延迟和没有多线程，这是一个缓慢的过程。我设法使用偏移量解决了文件和查询的问题。

# java - 如何使用java检查网页是否存在？

> ID：13171012
> 
> 赞同：1
> 
> 时间：2012-11-01T04:36:56.837
> 
> 标签：java, connection, webpage, forum

所以这是交易。我还没有，但是从星期五开始，我正在制作一个论坛。我想做的是检查用户是否在论坛上注册。

我不确定，但可以说用户存储在 URL/users/NAME.WHATEVER （jsp？）

我如何在 java 中建立 URL 连接，并检查 URL/users/Robert.WHATEVER == null 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T04:59:20.420

即使你可以用谷歌搜索你的答案：一种简单的方法是使用[Apache Http 组件](http://hc.apache.org)

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet("http://localhost/users/Robert.WHATEVER");
HttpResponse response = httpclient.execute(httpget);
if (response.getStatusLine().getStatusCode() == 404) {
   System.out.println("User Robert.WHATEVER not found");
} 
```

有一个很好的[教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/)，其中包含许多解释如何使用 HttpClient 的示例。

另一个高级框架是[ResteasyClientFramework](http://docs.jboss.org/resteasy/docs/1.0.1.GA/userguide/html/RESTEasy_Client_Framework.html)。

# .htaccess - htaccess 重定向循环

> ID：13171014
> 
> 赞同：0
> 
> 时间：2012-11-01T04:37:07.213
> 
> 标签：.htaccess, redirect, zend-route, dynamic-url

嘿伙计们，由于我使用的是引导程序并且需要弄清楚如何修复它，因此我遇到了一个非常讨厌的重定向循环。只是提醒一下，但是从 forwarder.dev/direct-mail/{2 digit var}?CampId={7 digit var} 我有一个 Zend 路由器将它转发到其他地方，这个临时页面不存在。不幸的是，不可能跳过 htaccess 跃点。

```
Options +FollowSymLinks
Options -Indexes

RewriteEngine On

# Move CampID's -> directmail
RewriteCond %{HTTP_HOST} ^(www\.)?forwarder\.dev [NC]
RewriteCond %{REQUEST_URI} !^/direct-mail/
RewriteCond %{QUERY_STRING} ^(?i:campid)=(\w{2})(\w{5})
RewriteRule ^(.*)$ http://www.forwarder.dev/direct-mail/%1?CampId=%1%2 [R=301,L]

# Bootstrap stuff for Zend
Redirect 301 /index.php/ /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !\.(js|ico|gif|jpg|png|css) /index.php [L] 
```

来自 LogLevel 15 的错误

```
[rid#b6ddb058/initial] (3) [perdir /var/www/forwarder.dev/] add path info postfix: /var/www/forwarder.dev/direct-mail -> /var/www/forwarder.dev/direct-mail/HA
[rid#b6ddb058/initial] (3) [perdir /var/www/forwarder.dev/] strip per-dir prefix: /var/www/forwarder.dev/direct-mail/HA -> direct-mail/HA
[rid#b6ddb058/initial] (3) [perdir /var/www/forwarder.dev/] applying pattern '^(.*)$' to uri 'direct-mail/HA'
[rid#b6ddb058/initial] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='www.forwarder.dev' pattern='^(www\.)?forwarder\.dev' [NC] => matched
[rid#b6ddb058/initial] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='/direct-mail/HA' pattern='!^/direct-mail/' => not-matched
[rid#b6ddb058/initial] (3) [perdir /var/www/forwarder.dev/] add path info postfix: /var/www/forwarder.dev/direct-mail -> /var/www/forwarder.dev/direct-mail/HA
[rid#b6ddb058/initial] (3) [perdir /var/www/forwarder.dev/] strip per-dir prefix: /var/www/forwarder.dev/direct-mail/HA -> direct-mail/HA
[rid#b6ddb058/initial] (3) [perdir /var/www/forwarder.dev/] applying pattern '\.(js|ico|gif|jpg|png|css)' to uri 'direct-mail/HA'
[rid#b6ddb058/initial] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='/var/www/forwarder.dev/direct-mail' pattern='!-f' => matched
[rid#b6ddb058/initial] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='/var/www/forwarder.dev/direct-mail' pattern='!-d' => matched
[rid#b6ddb058/initial] (2) [perdir /var/www/forwarder.dev/] rewrite 'direct-mail/HA' -> '/index.php'
[rid#b6ddb058/initial] (1) [perdir /var/www/forwarder.dev/] internal redirect with /index.php [INTERNAL REDIRECT]
[rid#b6dd2578/initial/redir#1] (3) [perdir /var/www/forwarder.dev/] strip per-dir prefix: /var/www/forwarder.dev/index.php -> index.php
[rid#b6dd2578/initial/redir#1] (3) [perdir /var/www/forwarder.dev/] applying pattern '^(.*)$' to uri 'index.php'
[rid#b6dd2578/initial/redir#1] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='www.forwarder.dev' pattern='^(www\.)?forwarder\.dev' [NC] => matched
[rid#b6dd2578/initial/redir#1] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='/index.php' pattern='!^/direct-mail/' => matched
[rid#b6dd2578/initial/redir#1] (4) [perdir /var/www/forwarder.dev/] RewriteCond: input='CampId=HA12345' pattern='^(?i:campid)=(\w{2})(\w{5})' => matched
[rid#b6dd2578/initial/redir#1] (2) [perdir /var/www/forwarder.dev/] rewrite 'index.php' -> 'http://www.forwarder.dev/direct-mail/HA?CampId=HA12345'
[rid#b6dd2578/initial/redir#1] (3) split uri=http://www.forwarder.dev/direct-mail/HA?CampId=HA12345 -> uri=http://www.forwarder.dev/direct-mail/HA, args=CampId=HA12345
[rid#b6dd2578/initial/redir#1] (2) [perdir /var/www/forwarder.dev/] explicitly forcing redirect with http://www.forwarder.dev/direct-mail/HA
[rid#b6dd2578/initial/redir#1] (1) [perdir /var/www/forwarder.dev/] escaping http://www.forwarder.dev/direct-mail/HA for redirect
[rid#b6dd2578/initial/redir#1] (1) [perdir /var/www/forwarder.dev/] redirect to http://www.forwarder.dev/direct-mail/HA?CampId=HA12345 [REDIRECT/301] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:46:20.500

明白了，我都在匹配。正确的方法是使用这个

```
RewriteRule ^$ http://www.forwarder.dev/direct-mail/%1?CampId=%1%2 [R=301,L] 
```

代替`^(.*)$`

# java - 静态引用错误

> ID：13171017
> 
> 赞同：-3
> 
> 时间：2012-11-01T04:38:24.233
> 
> 标签：java

> **可能重复：**
> [初学者 Java - 静态错误](https://stackoverflow.com/questions/4774376/beginner-java-static-error)

```
public class HelloWorld {
    public static void main(String [] args) {
        char[] b = {'a', 'b', 'a', 'c'};
        int p = 4;
        deleteRepeats(b, p);
    }

    public void deleteRepeats(char[] a, int size) {
        int currentElement;
        currentElement = 0;
        do {
            for (int i = currentElement; i < size-1; i++) {
                if (a[currentElement] == a[i+1]) a[i+1] = ' ';
            }
            currentElement++;
        } while (currentElement < size-1);
    }
} 
```

我得到错误：

> 非静态方法 deleteRepeats(char[],int) 不能从静态上下文中引用 deleteRepeats(b,p)；

有人能告诉我这是什么意思吗？

我尝试从主要方法中删除“静态”，但出现错误：

> 线程“main”中的异常 java.lang.NoSuchMethodError: main.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:57:08.143

您不能删除作为 java 标准方式的静态表单主方法。你可以删除它，那么它只是一种方法。您无法运行该程序。

与您交谈

```
 public void deleteRepeats(char[] a, int size) 
```

方法

1）您可以将其设为静态并在 main 方法中调用

```
 public static  void deleteRepeats(char[] a, int size) 
```

你现在的主要方法，

```
 public static void main(String [] args){
         char[] b = {'a', 'b', 'a', 'c'};
        int p=4;
        deleteRepeats(b,p);
    } 
```

2）否则您可以按原样使用deleteRepeats方法并通过创建一个对象来调用main方法，

这样

```
public static void main(String [] args){
   HelloWorld hello = new HelloWorld();
         char[] b = {'a', 'b', 'a', 'c'};
        int p=4;
        hello.deleteRepeats(b,p);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:39:39.027

你需要做`deleteRepeats`一个*类方法*：

```
//Note the "static"
public static void deleteRepeats(char[] a, int size) {
    //...
} 
```

可以调用类方法，而无需调用它们的对象。没有声明的方法`static`称为*实例方法*，它们必须在对象上调用：

```
public class HelloWorld{
    private int instanceField = 10;
    private static int classField = 30;
    //Main is initially invoked without creating an object
    public static void main(String [] args){
        //So it is only possible to call methods that do not require an object,
        classMethodExample();
        //until an object is created...
        HelloWorld helloWorldObject = new HelloWorld();
        //at which point it becomes possible to call
        //member functions on that object
        helloWorldObject.instanceMethodExample();
        //Modify "helloWorldObject", and call instanceMethodExample again.
        helloWorldObject.instanceField = 20;
        helloWorldObject.instanceMethodExample();
    }
    public static void classMethodExample() {
        //Not invoked on an object, so cannot access instanceField
        //Can access classField
        System.out.println(classField); //prints "30"
    }

    public void instanceMethodExample() {
        //Can access instanceField within helloWorldObject
        System.out.println(instanceField); //prints "10" on the first call,
                                           //"20" on the second call
        //Can also access classField
        System.out.println(classField); //prints "30"
    }

} 
```

# iphone - CCTimer 没有触发它应该触发的方法？也 selfSchedule 覆盖自身

> ID：13171020
> 
> 赞同：3
> 
> 时间：2012-11-01T04:38:41.580
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

2个问题我不能做一个`CCTimer`工作，我已经通过问题看了很多。但是，我确实使`NSTimer`工作正常，假设我使用了这个：

```
[NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(bombExplodes:) userInfo:0 repeats:1];

[CCTimer timerWithTarget:self selector@selector(bombExplodes:) interval:3] 
```

我知道`CCTimer`应该`bombExplodes`在 3 秒内启动方法.. 但是它只是没有这样做！同时，`NSTimer`作品也应有尽有！我不太确定我做错了什么..

此外，我之前尝试过使用 selfSchedule，尽管它工作正常，但我对此有一个小问题。说调用了 selfSched 调用，它应该在 5 秒内启动一个方法。如果在启动该方法之前再次调用相同的 selfSched 调用，我注意到它几乎取消了第一次调用（从而覆盖它）。这应该发生吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:17:31.627

这可能会帮助你

```
[self performSelector:@selector(bombExplodes:)withObject:nil afterDelay:3.0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:38:44.747

试试这个

```
 CCTimer *myTimer = [[CCTimer alloc] initWithTarget:self 
                         selector:@selector(methodName:) interval:delay]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T08:48:14.923

我认为如果您使用的是 cocos2d，则无需使用 NSTimer，因为调度程序始终是 cocos2d 中更好的选择。您只需使用即可实现您正在做的事情

```
[self schedule:@selector(bombExplodes:)]; 
```

对于自定义间隔，您可以使用

```
[self schedule:@selector(bombExplodes:) interval:3.0f]; 
```

# plot - Gtkmm-3.0 的任何绘图库？

> ID：13171021
> 
> 赞同：1
> 
> 时间：2012-11-01T04:38:43.113
> 
> 标签：plot, gtkmm

我正在使用 Gtkmm-3.0 开发 gui？现在我想绘制简单的`2D-graph`. 我做了谷歌并找到[了 plotmm](http://plotmm.sourceforge.net/index.html)。它看起来像我想要的。但在安装说明中，他们说需要 Gtkmm-2.0。我找不到任何用于`Gtkmm-3.0`. 有人可以推荐这样的图书馆吗？

# c# - C#创建streamwriter文件IF值大于还是小于值？

> ID：13171022
> 
> 赞同：1
> 
> 时间：2012-11-01T04:39:04.003
> 
> 标签：c#

我想知道在比较两个值时是否可以编写一个新的流写入输出文件。我的一个值在 a`LabelBox`中，另一个在 a`ListBox`中，并由输入文件填充。它的目的是假设这个新值只有在 LabelBox 值大于 Listbox 值时才应该改变。请参阅以下代码：

```
if (MaxRolls == 0)
{
    Random getMax = new Random();
    totalmoneyLabel.Text = "";
}
else if (RollCount >= MaxRolls)
{
    //
    if (runningTotal >= highscore)
    {
        StreamWriter outputFile;
        outputFile = File.CreateText("HighScore.txt");
        outputFile.WriteLine("New Highscore!!");
        outputFile.WriteLine(totalmoneyLabel.Text);
        outputFile.Close();
    }
    //

    MaxRolls = 25;
    RollCount = 0; 
    runningTotal = 0;
    totalmoneyLabel.Text = "$0.00";
    Show();
    MessageBox.Show("You lost!");

    return;
} 
```

# android - Android 应用程序 IF 语句未按预期运行

> ID：13171030
> 
> 赞同：1
> 
> 时间：2012-11-01T04:39:48.807
> 
> 标签：android, if-statement

所以我正在开发这个 Android 应用程序，出于某种原因，我花了几个小时试图修复并且可能是一些愚蠢的错误，但由于某种原因，当它到达 if 语句时代码不起作用。当我发送诸如“你好”之类的消息时，会弹出带有消息长度的吐司消息，并且发件人说 5 和 10，用于 10 位电话号码。但是，当它到达 if 语句时，它的行为就好像它是相等的。任何帮助将非常感激。这是我的代码

```
public class SmsReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    String msg_from = null;
    String msgBody = null;
      if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){
            Bundle bundle = intent.getExtras();           //---get the SMS message      passed in---
            SmsMessage[] msgs = null;

            if (bundle != null){
           //   Toast.makeText(context, "SMS Received", Toast.LENGTH_LONG).show();
                //---retrieve the SMS message received---
                try{
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    msgs = new SmsMessage[pdus.length];
                    for(int i=0; i<msgs.length; i++){
                        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                        msg_from = msgs[i].getOriginatingAddress();
                         msgBody = msgs[i].getMessageBody();
                         msgBody = msgBody.trim();
                         msg_from = msg_from.trim();

                    }
                }catch(Exception e){
                            Log.d("Exception caught",e.getMessage());
                }
            }
        }
      Toast.makeText(context, "MsgBody length: " + msgBody.length() + "msg_from          length: " + msg_from.length(), Toast.LENGTH_LONG).show();
      if (msgBody.length() == 5){
          Toast.makeText(context, "Working", Toast.LENGTH_LONG);
      }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:50:03.397

您不是在`show()`调用`if`. 这就是它不显示的原因。请注意，`Toast.show()`不阻止一个`Toast`将显示在另一个之上。

# c# - 代码未达到 SelectedIndexChanged 事件

> ID：13171035
> 
> 赞同：0
> 
> 时间：2012-11-01T04:40:39.043
> 
> 标签：c#, asp.net

我有一个用户控件继续在`MyPage.aspx`. 用户控件包含几个下拉列表；每个都有，`Autopostback = true`但是当我运行代码并更改下拉项时，会触发其他事件，但不会触发`SelectedIndexChanged`.

```
<asp:DropDownList ID="ddPages1" runat="server" EnableViewState="true" AutoPostBack="true"
    onselectedindexchanged="ddPages1_SelectedIndexChanged">
</asp:DropDownList> 
```

ascx 后面的代码：

```
protected void ddPages1_SelectedIndexChanged(object sender, EventArgs e)
{
    ...
} 
```

ascx 也有`ReportViewer`& 我正在将报告中的页数填充到下拉列表中。

```
protected override void Render(HtmlTextWriter writer)
{
    TotalPages = ReportViewer1.LocalReport.GetTotalPages();
    txtPageCount1.Text = Convert.ToString(TotalPages);
    if (TotalPages > 0)
    {
        for (int i = 1; i <= TotalPages; i++)
        {
            ListItem listItem = new ListItem();
            listItem.Value = i.ToString();
            listItem.Text = i.ToString(); 
            ddPages1.Items.Add(listItem);
        }  
    }
    base.Render(writer);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:02:28.317

试试这个：

在你有的地方`ddPages1.Items.Add(listItem);`，用

```
if(!this.IsPostBack)
{
    ddPages1.Items.Add(listItem);
} 
```

您在这里可能遇到的问题是，每次都填充列表，您将失去选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:45:43.667

请提供更多信息？如何绑定到 SelectedIndexChanged 事件？您是否以编程方式绑定它？或使用声明形式？

您是否启用了 ViewState？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:54:34.133

你已经`Autopostback = true`在你的下拉列表中设置了，但可能你把它`Autopostback = true`放在你的**用户控件上**

# macos - 将模板缓冲区可视化为纹理

> ID：13171036
> 
> 赞同：4
> 
> 时间：2012-11-01T04:40:39.333
> 
> 标签：macos, opengl, textures, stencil-buffer, deferred-rendering

我正在尝试将模板缓冲区放入纹理中，以便在延迟渲染器中使用。

我正在使用其他颜色和深度附件，`glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, textures[color1], 0);`结果是正确的。 ![没有模板缓冲区的正确渲染](../Images/748494265c8d64ed4bb7d3d670e91606.png)

但是，当我尝试将我的模板缓冲区附加到纹理时， `glFramebufferTexture2D(GL_FRAMEBUFFER, GL_STENCIL_ATTACHMENT ,GL_TEXTURE_2D, textures[stencil], 0);`我得到一个乱码的结果，就好像 FBO 没有清除它的缓冲区一样。

![不正确、乱码的渲染](../Images/cd941dd277289b8dea335adeaaa87881.png)

我不知道问题是什么。我怀疑这是设置模板纹理的问题......

```
//Stencil Texture Initialization

glBindTexture(GL_TEXTURE_2D, textures[stencil]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

glTexImage2D( GL_TEXTURE_2D, 0, GL_STENCIL_INDEX8, 512, 512, 0, GL_STENCIL_INDEX, GL_BYTE, 0); 
```

我的设置中没有任何错误代码，所以我不知道问题出在哪里。

编辑：也许我没有正确地做到这一点。如果有人知道如何将模板缓冲区写入纹理，我真的不在乎我是否编写不同的 cod。我只需要一个有效的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T05:16:20.253

```
GL_STENCIL_INDEX8 
```

永远不要使用这个。如果您需要模板位，请始终使用打包的深度/模板图像，例如`GL_DEPTH24_STENCIL8`. 你应该把它附加到这`GL_DEPTH_STENCIL_ATTACHMENT`一点上。

# perl - 如何使用 Perl 将此输出转换为这种表格格式？

> ID：13171037
> 
> 赞同：2
> 
> 时间：2012-11-01T04:40:39.787
> 
> 标签：perl, file-io

我有这个输出数据：

```
10dvex1_miRNA_ce.out.data|3331
10dvex1_misc_RNA_ce.out.data|0
10dvex1_rRNA_ce.out.data|60
10dvex1_snoRNA_ce.out.data|895
10dvex1_snRNA_ce.out.data|2127
11dvex1_miRNA_ce.out.data|3367
11dvex1_misc_RNA_ce.out.data|0
11dvex1_rRNA_ce.out.data|54
11dvex1_snoRNA_ce.out.data|839
11dvex1_snRNA_ce.out.data|1770
12dvex1_miRNA_ce.out.data|3321
12dvex1_misc_RNA_ce.out.data|0
12dvex1_rRNA_ce.out.data|50
12dvex1_snoRNA_ce.out.data|854
12dvex1_snRNA_ce.out.data|1821 
```

我想将此输出转换为这种格式，如表格：

```
`Fragment \t miRNA \t misc_RNA \t rRNA \t snRNA \t snoRNA`
 10 \t 3331 \t 0 \t 60 \t 2127 \ 895 \n
 11 \t 3367 \t 0 \t 54 \t 1770 \t 839 \n
 12 \t 3321 \t 0 \t 50 \t 1821 \t 854 \n 
```

我需要将此表用作 R 的输入。有什么想法吗？我尝试使用 perl 与此脚本，但结果并不好：

```
#!/usr/bin/perl

use warnings;
use strict;

open(MYINPUTFILE, $ARGV[0]); # open for input
my @lines = <MYINPUTFILE>; # read file into list
print "Frag"."\t"."miRNA"."\t"."misc_RNA"."\t"."rRNA"."\t"."snRNA"."\t"."snoRNA"."\n";
foreach my $lines (@lines){
    my $pattern = $lines;
    $pattern =~ s/(.*)dvex\d_(.*)_(.*)\|(.*)/$1 $2  $4/g;
    print $1."\t".$4;
}
close(MYINPUTFILE);
exit; 
```

结果：

```
Frag    miRNA   misc_RNA    rRNA    snRNA   snoRNA
10  333110  010 6010    89510   212711  336711  011 5411    83911   177012  332112  012 5012 
```

是不是这个主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:44:53.047

看起来您只是在打印语句中缺少回车符。例如，

```
print $1."\t".$4."\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:03:06.500

像这样的东西：

```
print $1."\t".$4;
print "\n" if ($2 eq "snRNA"); 
```

每当你得到模式“snRNA”时就断线；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T05:08:12.600

此代码有效。当片段编号更改时，它将换行。它假定数据的顺序始终与标题的顺序相对应。

```
open(MYINPUTFILE, $ARGV[0]); # open for input
my @lines = <MYINPUTFILE>; # read file into list
print "Frag"."\t"."miRNA"."\t"."misc_RNA"."\t"."rRNA"."\t"."snRNA"."\t"."snoRNA";
my $frag = '';
foreach my $line (@lines){
    if ( $line =~ /^(\d+)dvex.*\|(\d+)/ ) {
        my $fr = $1;
        if ( $fr ne $frag ) {
            print "\n$fr";
            $frag = $fr;
        }
        print "\t".$2;
    }
}
print "\n";
close(MYINPUTFILE);
exit; 
```

输出如下所示：

```
Frag    miRNA   misc_RNA        rRNA    snRNA   snoRNA
10      3331    0       60      895     2127
11      3367    0       54      839     1770
12      3321    0       50      854     1821 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T05:35:03.740

这个不关心文件的顺序，而是从数据中提取标题。策略是将数据累积成一个结构，然后在检查完所有数据后立即输出所有内容。如果你有真的（真的）大文件，你可能会吃掉内存。

```
open(MYINPUTFILE, $ARGV[0]); # open for input
my @lines = <MYINPUTFILE>; # read file into list
close(MYINPUTFILE);

## parse the data
my $types_found = {};
my $data = {};
foreach my $line (@lines){
    if ( $line =~ /^(\d+)dvex\d+_(.+)_ce\.out\.data\|(\d+)/ ) {
        $types_found->{$2} = '';
        $data->{$1}{$2} = $3;
    }
}

## print the header
my @types = sort keys %$types_found;
print "Frag";
foreach my $type ( @types ) {
    print "\t" . $type;
}
print "\n";

## print the rows
foreach my $frag ( sort keys %$data ) {
    print $frag;
    foreach my $type ( @types ) {
        print "\t" . $data->{$frag}{$type};
    }
    print "\n";
} 
```

输出：

```
Frag    miRNA   misc_RNA        rRNA    snRNA   snoRNA
10      3331    0       60      2127    895
11      3367    0       54      1770    839
12      3321    0       50      1821    854 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T06:12:27.227

这是另一个按 OP 要求对列进行排序的选项：

```
use strict;
use warnings;

my %hash;
my @header = qw (Frag miRNA misc_RNA rRNA snRNA snoRNA);

/(\d+).+?_(.+)_ce.+\|(.+)/ and $hash{$1}{$2} = $3 for <>;

print +( join "\t", @header ) . "\n";

for my $key ( sort { $a <=> $b } keys %hash ) {
    my @line;
    push @line, $hash{$key}{ $header[$_] } for 1 .. $#header;
    print +( join "\t", $key, @line ) . "\n";
} 
```

输出：

```
Frag    miRNA   misc_RNA    rRNA    snRNA   snoRNA
10  3331    0   60  2127    895
11  3367    0   54  1770    839
12  3321    0   50  1821    854 
```

# c++ - 如何使用 BFS 查找两个节点之间的距离？

> ID：13171038
> 
> 赞同：6
> 
> 时间：2012-11-01T04:40:45.153
> 
> 标签：c++, graph-theory, shortest-path, breadth-first-search

我使用维基百科的伪代码在 C++ 中编写了 BFS 的代码。该函数有两个参数 s,t。其中 s 是源节点，t 是目标，如果目标是 fount，则搜索返回目标本身，否则返回 -1。这是我的代码：

```
#include <iostream>
#include <deque>
#include <vector>

using namespace std;

struct vertex{
vector<int> edges;
bool visited;
};

int dist = 0;

int BFS(vertex Graph[],int v,int target){
deque<int> Q;
Q.push_front(v);
Graph[v].visited = true;
    while(!Q.empty()){
        int t = Q.back();
        Q.pop_back();
            if(t == target){
                return t;
            }
            for(unsigned int i = 0;i < Graph[t].edges.size();i++){
                int u = Graph[t].edges[i];
                if(!Graph[u].visited){
                    Graph[u].visited = true;
                    Q.push_front(u);
                }
            }
    }
    return -1;
} 

int main(){
int n;
cin >> n;
vertex Graph[n];
int k;
cin >> k;
for(int i = 0;i < k; i++){
    int a,b;
    cin >> a >> b;
    a--;
    b--;
    Graph[a].edges.push_back(b);
    Graph[b].edges.push_back(a);
}

for(int i = 0;i < n; i++){
    Graph[i].visited = false;
}

int s,t;
cin >> s >> t;

cout << BFS(Graph,s,t);

  } 
```

我在维基百科上读到这个：

> 广度优先搜索可用于解决图论中的许多问题，例如：
> 找到两个节点 u 和 v 之间的最短路径（路径长度由边数 > > 测量）

如何更改我的函数 BFS 以返回从 s 到 t 的最短路径，如果不存在路径则返回 -1？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T04:54:28.823

广度优先搜索，顾名思义，先访问距离`d`起点的所有节点，然后再访问距离为 的任何节点`d+1`。因此，当您以广度优先顺序遍历图形时，第一次遇到目标节点时，您已经通过最短路径到达那里。

内森·S。答案是正确的，尽管我希望这个答案能提供更多关于它为什么有效的直觉。Paul Dinh 的评论也是正确的；您可以修改内森的答案以跟踪距离而不是实际路径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T04:50:08.110

生成新节点时，请跟踪生成该节点的父节点的 id。然后，当你达到目标时，你只需向后追溯父母，直到达到起始状态。例如，您可以将开始标记为它自己的父项，这意味着它是开始状态。或者，只需使用预定义的值 (-1) 来表示没有父级。

因此，在您的代码中，不是将状态标记为已访问，而是有一个父 ID。父 ID 最初可以设置为 -1，然后在更改时更新。父 id 可以只是父图结构中的位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-07-05T16:30:57.753

要获得 BFS 算法的良好实现和解释，请[查看此 (CXXGraph)](https://github.com/ZigRazor/CXXGraph)库源代码。

# java - eclipse 无法识别 bin 文件夹中的资源（通过相对文件路径）

> ID：13171043
> 
> 赞同：0
> 
> 时间：2012-11-01T04:41:58.693
> 
> 标签：java, eclipse

这真让我抓狂。我已经花了几个小时在谷歌上搜索这个，但找不到其他有此问题的人的案例。我已将程序所需的所有图像放入 src 文件夹中，但是当我运行程序时，它不会绘制图像。我检查了 bin 文件夹，它们已被正确复制。即使 bin 文件夹中有所有资源，当我使用相对文件路径时，eclipse 也无法识别它们。如果我打开命令提示符并 cd 到 bin 文件夹并运行它，则会绘制所有图像，而不会更改代码。如何让 eclipse 通过相对文件路径使用图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:10:10.777

`Copy images`它应该适合你，默认情况下，只需指定其名称并将其视为相对路径，它将`root folder`在其中读取。eclipse中通常用来存放java编译后的所有文件的文件夹，这应该是避免的原因，您可以将文件的相对路径添加到源代码中，并带有单独的文件夹。`project``eclipse``file``project``Bin``class files`

如果我穿了，请纠正我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:10:32.907

当您尝试使用 访问文件`new File("some/relative/path")`时，路径始终相对于 Java 应用程序的启动位置。当您不确定这是哪个位置时，您可以通过打印来查找`new File(".").getAbsolutePath()`。对于 Eclipse，这将是 Project 文件夹。

如果您想访问应用程序源文件夹中的文件，您应该使用`class.getResource("path")`或`class.getResourceAsStream("path")`。在这里，路径可以是相对路径（相对于 的包`class`）或绝对路径（绝对是类路径）。

因此，如果您有一个包`foo`并且在此包中包含一个 java 文件`Bar.java`和一个图像`blub.gif`，您可以通过使用`Bar.class.getResource("blub.gif")`或`Bar.class.getResource("/foo/blub.gif")`- 注意前导来获取图像`/`。

除了 using 之外`new File(...)`，这也将起作用，然后将类和资源打包在 Jar 中。

# php - 如何使 SESSION cookie 可以保存一年？

> ID：13171045
> 
> 赞同：1
> 
> 时间：2012-11-01T04:41:58.793
> 
> 标签：php, session

您如何使 SESSION cookie 持续更长时间？

我在登录我的用户的文件中使用此代码：

```
<?
session_regenerate_id();
session_set_cookie_params(3600*24*365);
session_start();
$_SESSION['u']['id'] = xxxx;
?> 
```

在站点的其余部分上，我仅`session_start();`用于开始会话。

客户端上的 cookie PHPSESSID 设置为在 365 天后过期，但如果我一天不使用该站点并回来，我将被注销。我是否必须做些其他事情才能使饼干持续更长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T04:44:19.113

在普通 cookie 中，您可以在设置 cookie 时手动执行此操作：

```
setcookie($foo, $bar, time()+(3600*24*365)); 
```

但是，会话 cookie 会在您的浏览器关闭后自动删除（除非您使用的浏览器专门在运行期间保存您的会话）。老实说，如果您希望会话持续时间比会话更长，您应该使用某种数据持久性（如 MySQL）序列化所述会话。

# sql - 对于 FreePascal 和 Delphi，是否有一个用于清理 PostgreSQL 或 SQL 的查询参数的库？

> ID：13171048
> 
> 赞同：7
> 
> 时间：2012-11-01T04:42:39.667
> 
> 标签：sql, delphi, postgresql, sql-injection, freepascal

当我尝试使用包含撇号的值执行下面的 PostgreSQL 查询时，我遇到了第一个 sql 转义错误（早就应该）了。`O'Brien`, 使用 FreePascal 和 Lazarus

```
SQL.Add(format('select * from zones where upper(zn_name) >=  %s and upper(zn_name) < %s order by zn_name',[sQuote(zoneMin), sQuote(zoneMax)])); 
```

在上面的查询中，SQuote 是一个将字符串包裹在单引号中的函数。是否有一些标准库用于清理 Lazarus/FreePascal 或 Delphi 的 SQL 查询参数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T04:45:45.430

您的应用程序容易受到称为[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的严重安全问题的影响。请参阅[http://bobby-tables.com/](http://bobby-tables.com/)。

当然，`O'Brian`会导致错误，但是呢`');DROP SCHEMA public;--`？或者`');DELETE FROM users;--`？第一个不应该工作，因为您的应用程序不应该*以*超级用户或拥有表的用户身份运行，但很少有应用程序设计人员努力实际这样做并且经常在生产中运行特权用户。第二种适用于大多数应用程序；详情见文末。

最简单和最好的预防措施是在您的客户端库中使用*参数化语句*^(* 。)请参阅Delpi 的[此示例：](http://bobby-tables.com/delphi.html)

```
To use a prepared statement, do something like this:

query.SQL.Text := 'update people set name=:Name where id=:ID';
query.Prepare;
query.ParamByName( 'Name' ).AsString := name;
query.ParamByName( 'ID' ).AsInteger := id;
query.ExecSQL; 
```

（我从未使用过 Delphi，最后一次编写 Pascal 代码是在 1995 年；我只是引用给出的示例）。

您目前正在做的是参数的*字符串插值*。这是非常危险的。*只有当你有一个强大的引用 SQL 文字*的函数时，它才能安全地完成，这个函数不仅可以在每一端加上引号，还可以处理其他转义、引号加倍等。这是最后的方法；*强烈*建议使用参数化语句。

* * *

这是我上面给出的示例的扩展。假设您正在通过用户名执行一个非常普通的用户插入，其中“Fred”是客户端输入的示例用户名：

```
INSERT INTO users ( user_name ) VALUES ('Fred'); 
```

现在一些不愉快的人发送用户名`');DELETE FROM users;--`。突然你的应用程序正在运行：

```
INSERT INTO users ( user_name ) VALUES ('');DELETE FROM users;--'); 
```

展开时是：

```
INSERT INTO users ( user_name ) VALUES ('');
DELETE FROM users;
--'); 
```

或者换句话说，插入一个空字符串（尽管他们可以很容易地放入一个完全有效的用户名），然后是一个`DELETE FROM users;`语句 - 删除所有行`users`- 然后是一个什么都不做的评论。啪啪啪。你的数据就到这里了。

* * *

^*参数化语句有时被错误地称为预*准备语句*。这是不正确的，因为准备好的语句不一定是参数化的，而参数化的语句也不一定是准备好的。由于许多语言的数据库接口不提供使用参数化语句而不使用预准备语句的方法，因此出现了混淆。

# html - 有谁知道解析类似于 ASP.NET MVC Url.Action() 的 url 的前端方法

> ID：13171050
> 
> 赞同：1
> 
> 时间：2012-11-01T04:43:01.523
> 
> 标签：html, hyperlink, url-routing, relative-path, resolveurl

我正在寻找的是一个轻量级的前端框架，它可以获取部分内容，例如页脚导航，并从文件系统中的任何位置正确解析 url。

例如，我有一个主索引页面，其页脚链接导航到“foo/”，但在 foo/index 页面中，我希望类似的嵌套页脚链接解析为“../bar/”

我以前在 .NET ASP.NET 方面有过经验，使用“~/”定义链接以使所有内容正确路由非常方便。

我知道我可以通过提供完整的域限定链接来解决这个问题，但我想知道是否可以在我还不知道的实用程序、技术或框架的帮助下使用相对链接。

# iphone - UIView 旋转然后移动

> ID：13171051
> 
> 赞同：1
> 
> 时间：2012-11-01T04:43:06.460
> 
> 标签：iphone, objective-c, ios

我有旋转和移动图像（UIView）的问题。

如果我用它来旋转：

```
[UIView beginAnimations: @"rotate" contex: nil];
[UIView setAnimationDuration: 1];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationCurve: UIViewAnimationCurveLinear];
spaceShip.transform = CGAffineTransformMakeRotation (angle); // spaceShip is the UIView
[UIView commitAnimations]; 
```

这要移动：

```
[UIView beginAnimations: @"move" contex: nil];
[UIView setAnimationDuration: 1];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationCurve: UIViewAnimationCurveLinear];
spaceShip.center = destanation // destanation is a point where user tap
[UIView commitAnimations]; 
```

它一次一个地运作良好。但是这两个动画一起不起作用。Space Ship 正在旋转，但没有朝某个方向移动。

我的错在哪里？

**PS**早期我已经指定了锚点（0.5、0.5）。但是当我旋转图像时，它的坐标正在改变。

**升级版：**

使用基于块的方法。像这样

```
- (void) viewDidLoad
{
    [spaceShip.layer setAnchorPoint: CGPointMake(0.5, 0.5)];

}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *tap = [[event allTouches] anyObject];
    destanationPoint = [tap locationInView: tap.view];

    NSLog(@"%0.3f", angle*180/M_PI);//Just for monitoring

    [UIView animateWithDuration:1.0
                          delay: 0.0
                        options: UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         spaceShip.transform = CGAffineTransformMakeRotation(angle);
                     }
                     completion:^(BOOL finished){
                         // Wait one second and then fade in the view
                         [UIView animateWithDuration:1.0
                                               delay: 1.0
                                             options: UIViewAnimationOptionCurveEaseOut
                                          animations:^{
                                              spaceShip.center = destanationPoint;
                                          }
                                          completion:nil];
                     }];

} 
```

这种方法正在奏效。但是每个新的点击 UIImage 都会改变起始位置的坐标。好的，我尝试添加：

```
options: UIViewAnimationOptionCurveEaseOut |
         UIViewAnimationOptionBeginFromCurrentState 
```

但这无济于事。

**UPD2**

尝试这样做：

```
[UIView animateWithDuration:1.0

                          delay: 0.0
                        options: UIViewAnimationOptionCurveEaseOut |
                                UIViewAnimationOptionBeginFromCurrentState
                     animations:^{
                         spaceShip.transform = CGAffineTransformMakeRotation(angle);
                         spaceShip.center = destanationPoint;
                     }
                     completion:^(BOOL finished){
                         // Wait one second and then fade in the view
                         [UIView animateWithDuration:1.0
                                               delay: 1.0
                                             options: UIViewAnimationOptionCurveEaseOut |
                                                    UIViewAnimationOptionBeginFromCurrentState
                                          animations:^{
                                              spaceShip.center = destanationPoint;
                                          }
                                          completion:nil];
                     }]; 
```

现在我的船旋转并移动到水龙头点。在另一个点的第二次点击中，UIView 返回起始坐标，但是....带有动画））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:02:19.187

欢迎来到堆栈溢出 :)

如果您阅读[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：

> 可以对多个视图属性的更改进行动画处理——也就是说，更改属性会创建一个动画，在短时间内将更改传达给用户。UIView 类完成了执行实际动画的大部分工作，但您仍然必须指出要为哪些属性更改设置动画。有两种不同的方式来启动动画：

*   在 iOS 4 及更高版本中，使用基于块的动画方法。**（推荐的）**
*   使用开始/提交动画方法。

> 基于块的动画方法（例如 animateWithDuration:animations:）极大地简化了动画的创建。通过一个方法调用，您可以指定要执行的动画和动画的选项。但是，基于块的动画仅在 iOS 4 及更高版本中可用。如果您的应用程序在早期版本的 iOS 上运行，您必须使用 beginAnimations:context: 和 commitAnimations 类方法来标记动画的开始和结束。

所以我建议切换到块方法，因为它肯定更容易使用。

以下是一些涵盖该主题的好链接：

*   [苹果文档](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)
*   [雷·温德利希](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)
*   [霍瑞斯英国](http://ho.race.hk/blog/2010/07/animating-views-with-blocks-example/)

现在，专门针对您的问题，您是否尝试过将旋转和移动放入同一个动画块中？这可能是两者相互抵消，特别是因为你使用`[UIView setAnimationBeginsFromCurrentState: YES];`它我相信会中断当前正在发生的任何动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:59:07.550

试试这样

```
{
    [UIView beginAnimations: @"rotate" contex: nil];
    [UIView setAnimationDuration: 1];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationCurve: UIViewAnimationCurveLinear];
    spaceShip.transform = CGAffineTransformMakeRotation (angle); // spaceShip is the UIView
    [UIView setAnimationDidStopSelector: @selector(animationStopped)];
    [UIView commitAnimations];
} 
```

然后，

```
-(void)animationStopped {
[UIView beginAnimations: @"move" contex: nil];
[UIView setAnimationDuration: 1];
[UIView setAnimationBeginsFromCurrentState: YES];
[UIView setAnimationCurve: UIViewAnimationCurveLinear];
spaceShip.center = destanation // destanation is a point where user tap
[UIView commitAnimations];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:16:42.003

这是在 UIView 中设置动画的简单代码

```
// transform make rotation for the view
     view.transform = CGAffineTransformMakeRotation(M_PI_2*1);
         [UIView commitAnimations];  

    // it used to move view with animation
    [UIView animateWithDuration:2
                              delay:1.0
                            options: UIViewAnimationCurveEaseOut
                         animations:^{
                            //set your new frame for UIView
                         } 
                         completion:^(BOOL finished){
                             NSLog(@"Done!");
                         }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T19:43:54.007

尝试在 Storyboard 的 ViewController（身份和类型）中取消选中“使用自动布局”。

我有同样的问题，这解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T10:23:05.410

只需更换

```
spaceShip.center = destination 
```

和

`spaceShip.center = CGPointMake(destination.x, destination.y);`

**UPD**

并添加 NSLOG（在 CGPoint 目的地之后）

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *tap = [[event allTouches] anyObject];
    CGPoint destanation = [tap locationInView: tap.view];
    NSLog(@" x=%f and y=%f", destination.x, destination.y
          ); 
```

# c - 磁盘 I/O 期间幕后发生了什么？

> ID：13171052
> 
> 赞同：20
> 
> 时间：2012-11-01T04:43:10.893
> 
> 标签：c, file-io, buffer

当我在文件中寻找某个位置并写入少量数据（20 字节）时，幕后发生了什么？

**我的理解**

据我所知，可以从磁盘写入或读取的最小数据单位是一个扇区（传统上是 512 字节，但该标准现在正在改变）。这意味着要写入 20 个字节，我需要读取整个扇区，在内存中修改其中的一些并将其写回磁盘。

这就是我期望在无缓冲 I/O 中发生的事情。我也希望缓冲 I/O 做大致相同的事情，但要巧妙地处理它的缓存。所以我会认为，如果我通过随机搜索和写入来消除局部性，缓冲和非缓冲 I/O 应该具有相似的性能......也许非缓冲的表现会稍微好一些。

再说一次，我知道缓冲 I/O 只缓冲一个扇区是很疯狂的，所以我也可能期望它的性能非常好。

**我的应用程序**

我正在存储由 SCADA 设备驱动程序收集的值，该驱动程序接收超过十万点的远程遥测数据。文件中有额外的数据，因此每条记录是 40 字节，但在更新期间只需要写入其中的 20 字节。

**实施前基准**

为了检查我是否不需要想出一些精巧的过度设计的解决方案，我已经使用几百万条随机记录进行了测试，这些记录写入一个可能包含总共 200,000 条记录的文件。每个测试都为具有相同值的随机数生成器提供种子以保证公平。首先，我擦除文件并将其填充到总长度（大约 7.6 兆），然后循环几百万次，将随机文件偏移量和一些数据传递给两个测试函数之一：

```
void WriteOldSchool( void *context, long offset, Data *data )
{
    int fd = (int)context;
    lseek( fd, offset, SEEK_SET );
    write( fd, (void*)data, sizeof(Data) );
}

void WriteStandard( void *context, long offset, Data *data )
{
    FILE *fp = (FILE*)context;
    fseek( fp, offset, SEEK_SET );
    fwrite( (void*)data, sizeof(Data), 1, fp );
    fflush(fp);
} 
```

**也许没有惊喜？**

该`OldSchool`方法名列前茅 - 很多。它的速度提高了 6 倍以上（148 万对每秒 232000 条记录）。为了确保没有遇到硬件缓存，我将数据库大小扩大到 2000 万条记录（文件大小为 763 兆）并得到了相同的结果。

在您指出对 的明显调用之前`fflush`，让我说删除它没有任何效果。我想这是因为当我寻找足够远的地方时必须提交缓存，这是我大部分时间都在做的事情。

**发生什么了？**

在我看来，每当我尝试写入时，缓冲的 I/O 必须读取（并可能写入全部）文件的一大块。因为我几乎没有利用它的缓存，所以这是非常浪费的。

另外（而且我不知道磁盘上硬件缓存的细节），如果缓冲的 I/O 在我只更改一个扇区时试图写入一堆扇区，那会降低硬件缓存的有效性。

有没有磁盘专家可以比我的实验结果更好地评论和解释这一点？=)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T05:12:52.610

实际上，至少在我的带有 GNU libc 的系统上，看起来 stdio 在写回更改的部分之前正在读取 4kB 块。对我来说似乎是假的，但我想当时有人认为这是个好主意。

我通过编写一个简单的 C 程序来打开一个文件，写入少量数据，然后退出。然后在 strace 下运行它，查看它实际触发了哪些系统调用。在偏移 10000 处写入，我看到了这些系统调用：

```
lseek(3, 8192, SEEK_SET)                = 8192
read(3, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 1808) = 1808
write(3, "hello", 5)                    = 5 
```

看来你会想在这个项目中坚持使用低级 Unix 风格的 I/O，是吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T06:32:36.223

C 标准库函数执行额外的缓冲，通常针对流式读取进行优化，而不是随机 IO。在我的系统上，~~我没有观察到 Jamey Sharp 看到的虚假读取~~我只在偏移量未与页面大小对齐时看到虚假读取 - 可能是 C 库总是试图保持其 IO 缓冲区对齐到 4kb 或某物。

在您的情况下，如果您在一个相当小的数据集上进行大量随机读取和写入，您可能最好使用[`pread`/`pwrite`](http://linux.die.net/man/2/pread64)来避免必须进行搜索系统调用，或者只是`mmap`ing 数据集并将其写入内存（如果您的数据集适合内存，可能是最快的）。

# c++ - bool 在位域定义中是否安全？

> ID：13171054
> 
> 赞同：5
> 
> 时间：2012-11-01T04:43:29.520
> 
> 标签：c++, boolean, bit-fields

> **可能重复：**
> [带有布尔值的 C++ 位域打包](https://stackoverflow.com/questions/308364/c-bitfield-packing-with-bools)

`bool`在位域定义中使用 C++ 的关键字是否保证安全？

就像是：

```
struct flags {
    bool a : 1;
    bool b : 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T04:53:57.843

从 C++03 9.6 “位域”：

> 位域应具有整数或枚举类型（3.9.1）。普通（既不是显式签名也不是无符号）char、short、int 或 long 位字段是有符号还是无符号是实现定义的。bool 值可以成功地存储在任何非零大小的位域中。...
> 
> 如果值 true 或 false 存储到任何大小的 bool 类型的位域（包括一位位域），则原始 bool 值和位域的值应比较相等。...

3.9.1/7“基本类型”指定它`bool`是一个整数类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T04:53:11.403

是的。在实践中，您可以将`sizeof(bool) * CHAR_BIT`其用作了解可用位数的指南。

[来自 C++98](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)，第 9.6.3 节

> 位域应具有整数或枚举类型（3.9.1）。

来自 C++98，第 3.9.1.7 节

> bool、char、wchar_t 类型以及有符号和无符号整数类型统称为整数类型

# twitter-bootstrap - 推特引导轮播消失

> ID：13171055
> 
> 赞同：10
> 
> 时间：2012-11-01T04:43:31.447
> 
> 标签：twitter-bootstrap, carousel

我认为这可能是一个简单的问题。但我似乎无法弄清楚这一点。最好的解释方式是让你看到

链接：[http ://dynastyfireplaces.3dcartstores.com](http://dynastyfireplaces.3dcartstores.com)

如果您注意到主页上的滑块。它工作正常，直到它到达最后一张幻灯片，然后滑块消失几秒钟，然后重新出现。

我尝试更新引导框架，但仍然无法解决问题。

任何可能存在问题的想法。

源代码 ：

```
<div class="carousel slide" id="myCarousel">
    <div class="carousel-inner">
        <div class="item">
            <img alt="" src="...">
        </div>       
        <div class="item">
            <img alt="" src="...">
        </div>   
        <div class="item active">
            <img alt="" src="...">
        </div>
        <a data-slide="prev" href="#myCarousel" class="left carousel-control">‹&lt;/a>
        <a data-slide="next" href="#myCarousel" class="right carousel-control">›&lt;/a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-01T10:11:02.233

问题来自`.carousel-control`不应该在里面的 s `.carousel-inner`：轮播试图将控件显示为项目，导致消失。

尝试这个 ：

```
<div class="carousel slide" id="myCarousel">
    <div class="carousel-inner">
        <div class="item">
            <img alt="" src="...">
        </div>       
        <div class="item">
            <img alt="" src="...">
        </div>   
        <div class="item active">
            <img alt="" src="...">
        </div>
    </div>
    <a data-slide="prev" href="#myCarousel" class="left carousel-control">‹&lt;/a>
    <a data-slide="next" href="#myCarousel" class="right carousel-control">›&lt;/a>
</div> 
```

# java - 更改按钮状态 OnClick

> ID：13171056
> 
> 赞同：0
> 
> 时间：2012-11-01T04:43:31.080
> 
> 标签：java, android, button, onclick, imagebutton

在 Android 中，每当我单击一个按钮（即 ImageButton）时，我想通过更改按钮的颜色（可能是反转颜色或变暗等）来给用户反馈。此时，我不想更改为新按钮或任何东西，只想更改状态以反映点击。

我意识到我可以添加一个新的可绘制对象，因此每个按钮都有两种状态（单击时，我会更改为第二种状态）。

即（伪代码）：

> 点击{
> 
> ```
>  ImageButton.setDrawable(R.drawable.myclickedbutton) 
> ```
> 
> }

有没有更好的方法来做到这一点（我相信当你点击时iOS会为你使用ImageColors，这就是我在Android中想要的），还是我认为唯一的可能性？

我觉得我在这个概念上遗漏了一些重要的东西。

提前致谢。

**编辑**：如果有什么不同，我的应用程序在最低目标 2.2 上运行。

**编辑 2**：为澄清起见，我正在使用已经具有自定义可绘制资源的*图像按钮。*这就是我想要操纵 onClick 的内容。

**编辑3**：我认为我在这里不够清楚。我知道如何使用两个可绘制对象（无论是 onTouch、XML、onClick 等）更改状态。点击（我相信，就像 iOS 一样）。我不是在问如何在按钮到按钮的基础上做到这一点。这可以通过每个按钮 2 个可绘制对象来完成，我意识到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T04:47:04.800

**按钮.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
            <solid android:color="#f00"/>
            <padding android:left="10.0dip" android:top="10.0dip"
                android:right="10.0dip" android:bottom="10.0dip"/>
            <stroke android:width="1.0dip" android:color="#222"/>
        </shape>
    </item>
    <item android:state_pressed="false">
        <shape android:shape="rectangle">
            <corners android:radius="5dp"/>
            <solid android:color="#f1f1f1"/>
            <padding android:left="10.0dip" android:top="10.0dip"
                android:right="10.0dip" android:bottom="10.0dip"/>
            <stroke android:width="1.0dip" android:color="#222"/>
        </shape>
    </item>
</selector> 
```

将此按钮应用为背景

```
<Button
    android:background="@drawable/button"/> 
```

在你的类文件中这样做

```
public void onClick(View v) {

  pressedButton.setPressed(true);
} 
```

这样红色才会稳定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:17:22.163

您可以将 onTouchListener 用于按钮并根据按钮单击更改按钮的状态。

```
 button.setOnTouchListener(new OnTouchListener() {

                    @Override
                    public boolean onTouch(View v, MotionEvent event) {
                     if(event.getAction()==MotionEvent.ACTION_DOWN)
                     {
                   // here u can change the button color or image as clickable as 
                   button.setBackgroundImage(R.drawable.image_pressed);

                     }
                     if(event.getAction()==MotionEvent.ACTION_UP)
                     {
                  // here u can change the button color or image as released as 
                   button.setBackgroundImage(R.drawable.image_released); 
                     }
                        return false;
                    }
                }); 
```

我想它可能对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:02:56.607

您不必使用您提到的代码来切换可绘制对象。而是创建具有两种不同状态的可绘制对象。

正如您所说，您已经有自定义可绘制对象，您可以将它们用于不同的状态。

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item android:state_pressed="true"
   android:drawable="@drawable/drawable1" /> <!-- for clicked state-->        
 <item android:drawable="@drawable/drawable2" /> <!-- for normal state--> 
</selector> 
```

将此 xml 作为 drawable_1.xml 放置在可绘制文件夹中，并在您的代码中使用此可绘制对象，

```
yourButton.setDrawable(R.drawable.drawable_1) 
```

# flash - Red5 RC2 中的错误？

> ID：13171057
> 
> 赞同：1
> 
> 时间：2012-11-01T04:43:39.333
> 
> 标签：flash, red5

我已经安装了 Red5 RC2 的 Windows 版本并且正在运行服务器。不幸的是，我注意到分布存在一些有趣的问题：

1.  此候选版本的 Windows 安装版本没有演示应用程序。不包括整个演示文件夹。在 Red5 应用程序主页面上有一个指向它的链接，但该链接无处可去。实际上，我必须使用 Red5 的早期版本下载一个 zip 文件才能获得 demos 文件夹。如果 Red5 的某个人正在阅读本文，您能否纠正这个疏忽？

2.  运行服务器时会出现一些奇怪的端口处理行为。运行服务器时，我得到了几个 JVM_Bind 错误——直到我更改了 red5.properties 文件中的端口。我必须更改 http.port 条目和 jmx.rmi.port 条目。只有通过更改这些端口，我似乎才能让服务器正常运行。不过，真正奇怪的是，我在定期关闭的笔记本电脑上运行服务器。如果我启动笔记本电脑并再次运行 Red5，我会再次收到 JVM_Bind 错误！尽管我将它指向不同的端口。我发现我可以更改回旧的端口号，Red5 可以毫无问题地启动。所以现在在 jmx.rmi.port 上，我在端口 4444 和 9999 之间交替。在 http.port 上，我在端口 8080 和 8081 之间交替。无论如何，服务器中似乎有些东西以某种方式“认为”以前使用的端口仍在使用中。某种缓存？如果是这样，有什么方法可以清除它，这样我就不必一直更改端口？

3.  一旦我让服务器在适当的演示文件夹中运行，演示似乎运行良好——只要我在同一台机器上运行所有东西。然而，出于某种原因，服务器不响应来自其他机器的 http 请求。这显然是某种配置问题，但到目前为止我阅读的文档并没有说明如何让 Red5 处理来自本地主机以外的任何地方的请求。我想在同一台机器和其他机器上运行演示应用程序。有没有关于如何做到这一点的文档？有人能告诉我那个文件在哪里吗？

这些是到目前为止我在 Red5 上看到的东西。看起来它有很大的潜力，但看起来服务器中存在一些真正的错误。这是正确的还是有某种设置或配置可以使这些问题消失？

```
Someone please advise. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:33:03.423

关于问题 3：

Red5只有几个文件可以配置监听接口：conf/red5.properties

```
0.0.0.0 
```

表示它正在监听所有接口。

您还可以在以下位置配置每个 webapp：webapps/$NAME_OF_APP/WEB-INF/red5-web.properties

```
webapp.virtualHosts=* 
```

表示它正在监听所有接口。

基本上就是这样，如果您已经配置了这些端口，您可以使用以下命令控制监听端口：

```
netstat -an 
```

它将列出所有列出的端口。你可能会发现类似的东西：

```
tcp46      0      0  *.8088                 *.*                    LISTEN     
tcp46      0      0  *.5080                 *.*                    LISTEN     
tcp46      0      0  *.1935                 *.*                    LISTEN     
tcp46      0      0  *.9999                 *.*                    LISTEN 
```

（这些当然比这些要多得多，但这些是我在本地配置的 red5 监听端口）。

塞巴斯蒂安

# java - GSON 能否以不区分大小写的方式反序列化

> ID：13171058
> 
> 赞同：25
> 
> 时间：2012-11-01T04:43:46.990
> 
> 标签：java, json, gson

在.NET 桌面应用程序和 Java 服务器之间的原型通信中，使用带有 JSON 帖子的 REST，我遇到了区分大小写的问题。.NET 对象在 Pascal 大小写（这是 .NET 的常规格式）中具有属性，例如：（ `Symbol, EntryValue`等），而同一对象的 Java 表示使用驼峰式大小写，例如`symbol, entryValue`.

服务器接收到的 json 值如下：

```
{"EntrySize":100,"Symbol":"AMZN"} 
```

但是 Gson 不会以不区分大小写的方式反序列化。有没有办法让 Gson 做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-02T03:39:58.767

使用[`FieldNamingPolicy`](https://static.javadoc.io/com.google.code.gson/gson/2.6/com/google/gson/FieldNamingPolicy.html),[`GsonBuilder`](https://static.javadoc.io/com.google.code.gson/gson/2.6/com/google/gson/GsonBuilder.html)来获取你的`Gson`对象。你的似乎匹配[`UPPER_CAMEL_CASE`](https://static.javadoc.io/com.google.code.gson/gson/2.6/com/google/gson/FieldNamingPolicy.html#UPPER_CAMEL_CASE)。

```
Gson gson = new GsonBuilder()
        .setFieldNamingPolicy(FieldNamingPolicy.UPPER_CAMEL_CASE)
        .create(); 
```

对于任何例外，请使用注释来注释您的类字段[`@SerializedName`](https://static.javadoc.io/com.google.code.gson/gson/2.6/com/google/gson/annotations/SerializedName.html)。

# pivot - Excel：是否有引用数据透视表行的公式？

> ID：13171059
> 
> 赞同：2
> 
> 时间：2012-11-01T04:43:53.187
> 
> 标签：pivot, excel-2010, pivot-table, powerpivot

我使用 Excel 已经很多年了，但我从来没有想出解决这个问题的办法。我有一个数据透视表，它正在执行我所有的基本摘要。数据沿行字段分为“项目”和沿列的“周”，在“值”字段中是我的“数量”的总和。我想要的是能够引用该数据的一行并将其用于 sumproduct 公式。将其视为使用 GETPIVOTDATA 返回一行而不是一个值。它会这样使用它：

`=SUMPRODUCT('PivotRow','PivotRow' > 10)`

这个公式会做的是排除所有值低于 10 的数据透视字段。我不知道该怎么做是引用数据透视表的一行。是否有一些我不知道的超级特殊方法来使用 GETPIVOTDATA？我喜欢使用数据透视表来构建数据摘要，但我通常需要在该摘要之上构建分析，这可能会非常令人沮丧。任何帮助是极大的赞赏。

我正在使用 PowerPivot，因此我也可以使用该功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:43:54.163

解决此问题的一种潜在方法是使用多维数据集集或命名集从多维数据集源中提取特定值，而不是实际查询实际的数据透视表。

有关更多信息，请查看：[http](http://dennyglee.com/2010/02/04/pivots-cube-formulas-named-sets-oh-my/) ://dennyglee.com/2010/02/04/pivots-cube-formulas-named-sets-oh-my/ 。

# asp.net - 为什么会话开始事件随机触发

> ID：13171061
> 
> 赞同：0
> 
> 时间：2012-11-01T04:43:59.550
> 
> 标签：asp.net, asp.net-mvc-3, session

我有一个有很多会话使用的站点。会话超时为 20 分钟，会话管理为 InProcess。

站点运行良好我已经维护了站点的日志...但是在日志文件中我收到了以下通知

[10/31/2012 11:01:40 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:06:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:06:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:11:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:11:40 PM ]：Global.asax.Session_Start：会话开始
[10/31/2012 11:16:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:16:40 PM]：Global.asax。 Session_Start：会话开始
[10/31/2012 11:21:37 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:21:38 PM]：Global.asax.Session_Start：会话开始
[10 /31/2012 11:26:39 PM]：Global.asax.Session_Start ：会话开始
[10/31/2012 11:26:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:31:38 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:31:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:36:38 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:36:39 PM ]：Global.asax.Session_Start：会话开始
[10/31/2012 11:41:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:41:40 PM]：Global.asax。 Session_Start：会话开始
[10/31/2012 11:46:39 PM]：Global.asax.Session_Start：会话开始
[10/31/2012 11:46:39 PM]：Global.asax.Session_Start：会话开始
[10 /31/2012 11:51:39 PM]：Global.asax.Session_Start ：会话开始
[2012 年 10 月 31 日晚上 11:51:40]：Global.asax.Session_Start：会话开始
[2012 年 10 月 31 日晚上 11:56:39]：Global.asax.Session_Start：会话开始

我的应用程序的会话启动事件随机触发，即使没有人访问该站点，任何人都可以解释，有什么问题......？

感谢Adv....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:36:41.520

即使您确信没有人在访问您的应用程序，您也必须仔细检查。为此，请转到 IIS 日志并查看是否真的没有人在访问您的应用程序。您可以从以下位置获取 IIS 日志（这些是默认的 IIS 日志位置）。

IIS 7： **%SystemDrive%\inetpub\logs\LogFiles**

IIS 6： **%windir%\System32\LogFiles**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:52:21.140

`Session_Start()`– 在每个请求页面的新用户开始会话时触发。
只需查看以下链接了解更多详情：

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=126](http://www.dotnetcurry.com/ShowArticle.aspx?ID=126)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:53:35.503

你知道应用程序内存不足意味着应用程序池回收，如果它是 20 分钟的想法。
当有人请求您的应用程序时，应用程序再次启动。
每次用户第一次请求时都会调用会话开始。

# xcode - 表视图不重新加载数据

> ID：13171071
> 
> 赞同：1
> 
> 时间：2012-11-01T04:45:22.233
> 
> 标签：xcode, tableview

您好我正在尝试输入一个 NSMutable 数组并将其显示在表格视图中。最初数组是零。表视图是从另一个视图控制器调用的，数据是单例的。我正在使用第三类来输入额外的数组元素。Eerything 工作正常，除非我从三等舱点击后退按钮，而不是字符串值，单元格在表格视图中显示为黑色。单击特定单元格后，就会显示该值。如果我取消选择它，单元格将再次变为黑色。如果有人能帮助我我的餐桌课是

```
@implementation stocktable

#pragma mark -
#pragma mark View lifecycle

-(void)insertaobject{

    stockname *s1 = [[stockname alloc]init];
    [self.navigationController pushViewController:s1 animated:YES];
    [s1 release];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

 [self.navigationController setNavigationBarHidden:NO];

 UIBarButtonItem *addbutton = [[UIBarButtonItem alloc]
 initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertaobject)];
 self.navigationItem.rightBarButtonItem = addbutton;
 [addbutton release];
    [[NSNotificationCenter defaultCenter]addObserver:self selector: @selector(addthestocks:) name:@"someevent" object: nil];

}

-(void)addthestocks:(NSNotification*)notification{

    if ([[notification name]isEqualToString:@"someevent"]) {
        //[self.navigationController.visibleViewController reloadInputViews];
        [self.tableView reloadData];
    }

}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    int i = 1;
    return i;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [[[stockdata sharedarray] stocksymbols]count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        cell.textLabel.text = [[[stockdata sharedarray] stocksymbols] objectAtIndex:indexPath.row];
        //[self.thedatamodel.stocksymbols objectAtIndex:indexPath.row];
    }

    // Configure the cell...

    return cell;
} 
```

第三类是

```
@implementation stockname

@synthesize txt1;
@synthesize label2;
@synthesize button1;

-(IBAction)textfieldoneediting:(id)sender{
    [sender resignFirstResponder];
    label2.text = txt1.text;
    NSString* stkk = [[NSString alloc]initWithString:txt1.text];
    [[[stockdata sharedarray]stocksymbols] addObject:stkk];
    if ([[[stockdata sharedarray]stocksymbols]count]>0) {
        NSLog(@",,%@",[[[stockdata sharedarray]stocksymbols]objectAtIndex:0]);
    }

    [[NSNotificationCenter defaultCenter]postNotificationName:@"someevent" object: self];

}

-(IBAction)startediting:(id)sender{

    [sender becomeFirstResponder];

} 
```

# perl - 如何获取使用 Perl File::Rsync 传输的数据量

> ID：13171072
> 
> 赞同：1
> 
> 时间：2012-11-01T04:45:25.523
> 
> 标签：perl, rsync

我曾经对我的备份进行 tar ball 和 SFTP，但它们变得越来越大，而且我不必要地传输我已经拥有副本的数据，因此决定更新我的代码以通过[File::Rsync](http://search.cpan.org/~leakin/File-Rsync-0.42/Rsync.pm)和它的 delta 算法来利用 rsync。我可以按要求成功传输数据，但我似乎找不到记录传输数据量的方法。以前我可以统计生成的 tar 但由于我不太可能移动源目录中的所有文件，我怎么知道移动的数量？

目标父目录可能不存在，因此它是通过 Net::SSH::Perl 创建的（mkdir -p /path/to/create），重点是我可以在 rsync 之前或之后针对目标运行 cmds。

我将包含我的代码，我怀疑它实际上是否有用，但如果我不这样做，无论如何都会有人要求它。建议任何人？

```
use File::Rsync;

$obj = File::Rsync->new( { verbose => 1,
                           archive => 1,
                          compress => 1,
                         recursive => 1,
                               rsh => '/usr/bin/ssh -i /user/.ssh/id_rsa',
                            delete => 1,
                      'rsync-path' => '/usr/bin/rsync'

       } );

$obj->exec( { src => "$backupwhat",
             dest => "host.co.uk:/remote_backup/$backupto"
             } ) or warn "rsync failed\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:17:20.060

归根结底，File::Rsync 是命令之上的相当简单的包装器`rsync`（以我的拙见，几乎到了毫无意义的地步）。

你也可以绕过它`rsync`直接使用。在这种情况下，如果您添加 rsync 选项`--stats`，它将在传输过程结束时打印您正在寻找的信息。您所要做的就是使用正则表达式解析输出以获取数据，如下所示：

```
my $output = qx{rsync -av --delete --stats "$backupwhat" "host.co.uk:/remote_backup/$backupto"};
warn("rsync failed?") if ($? / 256);
my ($sent)     = ($output =~ /Total bytes sent: (\d+)/);
my ($received) = ($output =~ /Total bytes received: (\d+)/); 
```

# php - SQL/PHP 我有开始和结束位置，但想从表中找到连接腿

> ID：13171074
> 
> 赞同：4
> 
> 时间：2012-11-01T04:45:28.923
> 
> 标签：php, loops

我在遍历我`tableLegs`的公共汽车时间表时遇到问题，以查找乘客从 a 到 b 需要采取的一系列腿`legID`，例如乘客想要从`LocID`of开始`c`并前往`LocID`of `p`，我想要组成那次旅行`LegID`的一系列腿（`01`, `02`, `04`），希望这很容易理解。

**桌腿**

```
=============================================
LegID    startLocID   endLocID   departTime
 01          a           e        9:00
 02          e           i        10:00
 03          i           m        11:00
 04          i           q        11:00 
```

**表LegStops**

```
=========================================
LegID     stopNo    LocID     TripTime
  01         1         a       0 min
  01         2         b       20 min
  01         3         c       30 min
  01         4         d       40 min
  01         5         e       60 min
  02         1         e       0 min
  02         2         f       20 min
  02         3         g       30 min
  02         4         h       40 min
  02         5         i       60 min
  03         1         i       0 min
  03         2         j       20 min
  03         3         k       30 min
  03         4         l       40 min
  03         5         m       60 min
  04         1         i       0 min
  04         2         n       20 min
  04         3         o       30 min
  04         4         p       40 min
  04         5         q       60 min 
```

为了给你一个我在这里努力实现的基础，这是一个巴士网站，每次旅行都由不同的腿组成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:59:07.120

此任务称为在图中搜索最短路径。存在一个[Dijkstra 算法](http://www.artfulsoftware.com/infotree/queries.php#766)的实现，用于在 MySQL 存储过程方面解决这个问题。

但这可能需要您稍微更改表结构，因为该图仅使用两种类型的实体：节点和边。所以你应该把你的腿分解成边，然后在你得到边中最短的路径后推导出腿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:53:52.243

您可以为此使用 A* 搜索算法。参见[http://en.wikipedia.org/wiki/A_star](http://en.wikipedia.org/wiki/A_star)

# c++ - Google 测试中的 FRIEND_TEST - 可能的循环依赖？

> ID：13171077
> 
> 赞同：1
> 
> 时间：2012-11-01T04:45:52.873
> 
> 标签：c++, unit-testing, circular-dependency, googletest, private-members

我试图弄清楚 FRIEND_TEST 在 Google 测试中的工作原理。 [https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#testing-private-code](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#testing-private-code)

我正在查看以下项目，试图在我的代码中实现它：

```
// foo.h
#include "gtest/gtest_prod.h"

// Defines FRIEND_TEST.
class Foo {
  ...
 private:
  FRIEND_TEST(FooTest, BarReturnsZeroOnNull);
  int Bar(void* x);
};

// foo_test.cc
...
TEST(FooTest, BarReturnsZeroOnNull) {
  Foo foo;
  EXPECT_EQ(0, foo.Bar(NULL));
  // Uses Foo's private member Bar().
} 
```

在上面的代码中，我看不到的部分是 foo_test.cc 必须包含 foo.h，才能访问 Foo 和 Bar()。[也许它对谷歌的工作方式不同？在我的代码中，我必须包含它]

这将导致循环依赖...

我错过了什么吗？

**编辑：**代码示例：（修复后重新编辑 - 解决方案将测试文件从 *.h 更改为 *.cpp）：

项目 ppppp - 文件 myfile.h：

```
class INeedToBeTested
{
public:
  extern friend class blah_WantToTestThis_Test;
  INeedToBeTested();
  INeedToBeTested(INeedToBeTested* item);
  INeedToBeTested(OtherClass* thing, const char* filename);
  ~INeedToBeTested();
  bool Testable();
  std::string MoreTestable();

private:
  int WantToTestThis();
}; 
```

项目 ppppp_gtest，文件 myFile_gtest.cpp：

```
#pragma once
#include "gtest/gtest.h"
#include "myfile.h" //property sheet adds include locations
#include "otherclass.h"

  class blah: public ::testing::Test{
  // declarations, SetUp, TearDown to initialize otherclass thing, std::string filename
  }
  TEST_F(blah, WantToTestThis)
      {
        INeedToBeTested item(thing, filename.c_str());
        item.WantToTestThis();   // inaccessible when this content is in header file
      } 
```

在我努力让它工作的过程中，我还尝试创建一个包装类（这也只在 cpp 中有效，而不是在 header 中）；虽然它需要将**private**更改为**protected**，但它不需要在每个新测试的测试代码中添加额外的声明：

```
// option: create wrapper (change private to protected first) 
  class INeedToBeTestedWrapper:public INeedToBeTested 
      {
      public:
         INeedToBeTestedWrapper(OtherClass* thing, std::string filename):
            INeedToBeTested(OtherClass* thing, filename.c_str());
      public:
         using INeedToBeTested::WantToTestThis;
      };

      TEST_F(blah, WantToTestThis)
      {
        INeedToBeTestedWrapper item(thing, filename);
        item.WantToTestThis();   
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T13:27:57.117

这里应该没有问题。

`FRIEND_TEST`在这种情况下，只需定义

```
friend class FooTest_BarReturnsZeroOnNull_Test; 
```

这是使用`TEST`宏最终定义的类。无需*将*gtest 或您的任何测试代码链接到`foo`库/exe。你只需要`#include "gtest/gtest_prod.h"`像你所做的那样。

在 foo_test.cc 中，您需要这样做，因为它使用的是对象`#include "foo.h"`的实际实例。`Foo`您还需要将`foo`库链接到测试可执行文件，或者如果`foo`不是库，则需要在`foo`源代码中进行编译。

所以总而言之，`foo`除了微小的 gtest_prod.h 标头之外，不需要任何测试代码，但测试需要链接到`foo`代码。

# php - 在php中上传文件权限？

> ID：13171082
> 
> 赞同：1
> 
> 时间：2012-11-01T04:46:18.847
> 
> 标签：php, file-upload, permissions

我正在上传一个文件。

在上传时，我正在创建一个具有 0777 权限的文件夹并将所选文件上传到该特定文件夹中。

它得到正确上传。

但问题是，当我删除上传的文件时，它显示权限被拒绝。

该怎么办？？..

我的代码就像，

```
if(isset($_POST['submit']))
{
        mkdir("../games/$gname",0777);
        if($_FILES['fileupload']['name'])
        {
            move_uploaded_file($_FILES["fileupload"]["tmp_name"], "../games/".$gname."/".$_FILES["upload"]["name"]."");
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:14:09.477

首先使用 0775 而不是 0777 创建文件夹作为安全措施，因为 0777 是世界可写的，不建议这样做.. 然后尝试以下代码：

```
if(isset($_POST['submit']))
{
        mkdir("../games/$gname",0775);
        if($_FILES['fileupload']['name'])
        {
            move_uploaded_file($_FILES["fileupload"]["tmp_name"], "../games/".$gname."/".$_FILES["upload"]["name"]."");

@chmod("../games/".$gname."/".$_FILES["upload"]["name"], 0775);

        }
} 
```

此外，您可以分享删除上传文件的代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:18:16.980

我只是用它来更改权限，

```
if(isset($_POST['submit']))
{
    mkdir("../games/$gname",0777); 

    if($_FILES['fileupload']['name'])
    {
        move_uploaded_file($_FILES["fileupload"]["tmp_name"], "../games/".$gname."/".$_FILES["upload"]["name"]."");
        exec("chmod 777 ../games/".$gname."/.*");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:52:49.830

`chmod`上传文件后添加文件使用权限

```
if(isset($_POST['submit']))
{
    mkdir("../games/$gname",0777); 
    //or create directory with recursive permision 
    //mkdir("../games/$gname",0777, true); 
    if($_FILES['fileupload']['name'])
    {
        move_uploaded_file($_FILES["fileupload"]["tmp_name"], "../games/".$gname."/".$_FILES["upload"]["name"]."");
chmod ("../games/".$gname."/".$_FILES["upload"]["name"], 0777);
    }
} 
```

# c# - 页面在 WebBrowser 表单中完全加载时的 DocumentCompleted 事件（Windows 窗体 C#）

> ID：13171093
> 
> 赞同：2
> 
> 时间：2012-11-01T04:47:20.783
> 
> 标签：c#, .net, winforms

我使用 DocumentCompleted 但这会被多次触发。现在我已经看到了这个示例`if (e.Url.AbsolutePath != this.webBrowser.Url.AbsolutePath)`，它用于确认请求的文件已完成加载，但是在加载页面上的其他任何内容（如图像）之前就会触发它。因此，我仍然无法判断网页何时完全加载。

有没有办法确保网页已完全加载并且没有加载任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:58:45.927

`DocumentCompleted`为网页中的每个框架以及所有加载的子文档（例如 JS 和 CSS）触发事件。您可以查看`WebBrowserDocumentCompletedEventArgs`in`DocumentCompleted`并检查 Url 属性并将其与主页的 Url 进行比较。

简单的方法是检查完成加载的 URL：

```
void webBrowser1_DocumentCompleted(object sender,
        WebBrowserDocumentCompletedEventArgs e)
{
    if (e.Url.Equals(webBrowser1.Url)) {
        // Here the page is fully loaded        
    }
} 
```

# symfony - 如何在 Symfony 中添加 Doctrine 过滤器？

> ID：13171094
> 
> 赞同：9
> 
> 时间：2012-11-01T04:47:22.077
> 
> 标签：symfony, filter, doctrine-orm

我在 Symfony 2 项目中为 Doctrine 2添加了一个[过滤器。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html)根据[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/filters.html)，我创建了过滤器类并将其放在 MyVendor\MyProjectBundle\Filter\MyFilter.php 下。像文档中那样进行配置和禁用/启用位的更好方法是什么？我不知道如何在 Symfony 中访问 Doctrine 2 的配置对象。此外，如果要全局启用过滤器，有没有办法在不改变每个控制器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T06:19:26.600

[在Doctrine 捆绑配置参考](http://symfony.com/doc/current/reference/configuration/doctrine.html)中搜索`filter`该词。

文档中的示例如下所示：

> ```
> doctrine:
>     orm:
>         filters:
>             myFilter:
>                 class: MyVendor\MyBundle\Filters\MyFilter
>                 enabled: true
>                 parameters:
>                     myParameter: myValue
>                     mySecondParameter: mySecondValue 
> ```

# dotnetnuke-6 - 现场做 dotnetnuke(6.2) 项目时出现一些问题

> ID：13171097
> 
> 赞同：0
> 
> 时间：2012-11-01T04:47:32.340
> 
> 标签：dotnetnuke-6

我在 dnn 6.2 中开发了一个在本地服务器上运行良好的项目。但是，当我在现场直播时，它没有显示当前项目，而是显示 dnn 默认项目（dnn 项目的默认主题，随 dnn 免费提供）。所以任何人都知道在进行项目直播时我必须更改什么样的设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:02:48.137

**嗨，我已经做到了。1- 将具有本地 dnn 的文件系统复制到 Web 服务器 2- 将 dnn 数据库恢复到 Web 服务器可访问的数据库服务器 3- 使用 Web 服务器域名更新 PortalAlias 表 4- 将 web.confg 中的连接字符串更新到新的数据库位置。**

# backbone.js - 无法调用未定义的方法“扩展”我在第一行的代码中遇到错误

> ID：13171101
> 
> 赞同：1
> 
> 时间：2012-11-01T04:47:44.287
> 
> 标签：backbone.js

我在第一行的代码中遇到错误请帮助我 **无法调用未定义的方法“扩展”**

```
$(document).ready(function() {
  var Router = Backbone.Router.extend({
    routes: {
      "foo/:bar": "paramtest",
      "*action": "func"
    },
    func: function(action) {
      alert(action);
    },
    paramtest: function(p) {
      alert(p);
    }
});
new Router();
Backbone.history.start();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:42:46.767

In your HTML file make sure you declare your underscore js file before your backbone js file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T05:17:57.990

我猜您使用的是旧版本的 Backbone，0.5.0 之前的版本。`Backbone.Router`曾经被称为`Backbone.Controller`但[它被重命名为 0.5.0 的一部分](http://backbonejs.org/#changelog)：

> **0.5.0** - 2011 年*7 月 1 日*
> 
> [...]为清楚起见`Controller`已重命名`Router`为 。

Google 对“骨干教程”的第二次点击将我指向使用 0.3.3[的本教程。](http://arturadib.com/hello-backbonejs/)最近似乎有很多人在使用 0.3.3 询问有关 Backbone 的问题，所以 Google 的结果可能是问题所在。

您应该升级到 Backbone 的最新版本 (0.9.2)，您可以从[Backbone 网站](http://backbonejs.org/)获得它。您可能也应该使用最新版本的 Underscore (1.4.2)，您可以在[Underscore 网站上](http://underscorejs.org/)获得它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:49:10.723

由于某种原因，您的 Backbone 对象上没有该`Router`属性。你在某处覆盖它吗？

# ios - Objective C 代码的符号剥离仍然在二进制中留下方法名称等

> ID：13171103
> 
> 赞同：7
> 
> 时间：2012-11-01T04:47:48.767
> 
> 标签：ios, objective-c, debug-symbols

我正在尝试剥离我们的 iOS 应用程序二进制文件中的调试符号，以使黑客更难修改二进制文件。我已经尝试过 xcode 的符号剥离（启用带链接产品和部署后处理）和使用“strip -S -x”。两者都确实减少了符号的数量，但通过“字符串”运行二进制文件仍然会返回大量命中。

知道如何删除它们吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T04:52:49.500

Objective-C 是一种动态语言。方法调用在运行时基于选择器（实际上是方法名称作为字符串）解析。这与像 C++ 这样在编译/链接时绑定方法调用的语言不同。

从二进制文件中删除方法名称（选择器）会使应用程序无法使用。

就其内部而言，用 Objective-C 编写的应用程序几乎是一本开放的书。只需查看[`otool`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)、[`class-dump`](http://www.codethecode.com/projects/class-dump/)、[F-Script](http://www.fscript.org)或[DTrace](http://www.dtrace.org)之类的工具，即可了解在运行的 Objective-C 应用程序中有多少是可访问和可修改的。

但是，有一些链接器标志 ( `P_LNOATTACH`) 会阻止 DTrace 连接到正在运行的应用程序。你也可以`ptrace`用`PT_DENY_ATTACH`旗帜打电话。iTunes 是执行此操作的应用程序示例，因为 Apple 不希望您在其 DRM 中四处寻找。

之前似乎有一篇关于 Objective-C 代码混淆的文章。请参阅[iPhone/iPad 应用程序代码混淆 - 有可能吗？值得？](https://stackoverflow.com/questions/5556849/iphone-ipad-app-code-obfuscation-is-it-possible-worth-it)更多细节

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T04:51:47.507

Objective-c 运行时依赖于那些，不可能删除它们。（“SEL”类型是唯一的字符 *）

# php - PHP和Mysql通过追加动态输入字段——如何为mysql构造查询

> ID：13171107
> 
> 赞同：2
> 
> 时间：2012-11-01T04:48:39.470
> 
> 标签：php, mysql, forms, dynamic, field

我是 php 和 mysql 的菜鸟，所以我希望你们能帮助我。我有一个带有按钮的表单，用户可以在其中动态添加一组输入字段。我正在使用 append 生成字段。我正在阅读有关它的教程，所以我理解了那部分。这是我基于附加脚本的站点[，链接在这里。](http://www.web-design-talk.co.uk/58/adding-unlimited-form-fields-with-jquery-mysql/)我的问题是，如果我有一组字段，而不仅仅是一个像该网站那样的输入字段作为示例显示，我该如何构造 sql 查询的 foreach 循环？这是我的追加的样子（我只显示 4 个字段，但每组追加总共有 16 个字段。）我想将发布数据上传到 sql 数据库。我一直在搜索该站点，但我只看到单个输入字段的 foreach 循环示例，这与我拥有的集合不同。

非常感谢，我希望有人能给我一个关于如何继续进行的想法。

```
<script type="text/javascript">
    var count = 0;
    $(function(){
    $('p#add_field').click(function(){
    count += 1;
    $('#row-fluid').append(

        '<div class="span12" style="border-bottom:1px lightgray solid; padding:10px 0px;">'
            +'<div class="row-fluid"> '                         

                +'<div class="span1">'
                +'<label>&nbsp;</label>'
                +'<label class="radio"><input type="radio" id="process_where' + count + '" name="process_where[]' + '" value="Online" onClick="checkProcessType(this.value)" >Online</label>'   
                +'<label class="radio"><input type="radio" id="process_where' + count + '" name="process_where[]' + '" value="In-store" onClick="checkProcessType(this.value)" >In-store</label>'                       +'</div>'

                +'<div class="span1">'
                +'<label>&nbsp;</label>'
                +'<label class="radio"><input type="radio" id="status' + count + '" name="status[]' + '" value="Actual" onClick="checkStatus(this.value)" >Actual</label>   '
                +'<label class="radio"><input type="radio" id="status' + count + '" name="status[]' + '" value="Ghost" onClick="checkStatus(this.value)" >Ghost</label>'
                +'</div>'

                +'<div class="span1">'
                +'<label>Type</label>'
                +'<select id="upg' + count + '" name="upg[]' + '" onChange="checkExp(this.value)" class="input-small" >'
                +' <option value="" selected="&nbsp;" >&nbsp;</option>'
                +'<option value="Exp" >Exp</option>'
                +'<option value="Post" >Post</option>'
                +'<option value="Upgrade" >Upg</option>'
                +'<option value="Retail" >Retail</option>'
                +'</select>'
                +'</div>'

                +'<div id="upg' + count + '" class="span2">'
                +'<label>Full Date</label>'
                +'<input name="upg_date[]' + '" id="upg_date' + count + '" type="text" id="upg_date" placeholder="YYYY-MM-DD" class="input-small" />'
                +'<img id="jscalendar' + count + '" type="image" src="img/calendar.png" style="border-width:0px; width:16px; height:16px; background-color:#FFF; margin-bottom:-7px;" onclick="createPopCalendar3()">'
                +'</div>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:16:41.107

**并像这样更改您的 php 提交页面：**

```
if(is_array($_POST[counter]))
{
$count=count($_POST[counter]);

for($i=0;$i<=$count;$i++)
{

$process_where=$_POST["process_where".$i.""];
$status=$_POST["status".$i.""];
$upg=$_POST["upg".$i.""];
$upg_date=$_POST["upg_date".i.""];

if($process_where !="")
{
//Query Run Here
  $query="insert into tablename (process_where,status,upg,upg_date) values ('".$process_where."','".$status."','".$upg."','".$upg_date."')";
 mysql_query($query) or die(mysql_error());
}

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:36:14.633

**将您的 javascript 更改为：**

```
<script type="text/javascript">
    var count = 0;
    $(function(){
    $('p#add_field').click(function(){
    count += 1;
    $('#row-fluid').append(

        '<div class="span12" style="border-bottom:1px lightgray solid; padding:10px 0px;">'
            +'<div class="row-fluid"> '                         

                +'<div class="span1">'
                +'<label>&nbsp;</label>'
                +'<label class="radio"><input type="radio" id="process_where' + count + '" name="process_where' + count +'" value="Online" onClick="checkProcessType(this.value)" >Online</label>'   
                +'<label class="radio"><input type="radio" id="process_where' + count + '" name="process_where' + count +'" value="In-store" onClick="checkProcessType(this.value)" >In-store</label>'                       +'</div>'

                +'<div class="span1">'
                +'<label>&nbsp;</label>'
                +'<label class="radio"><input type="radio" id="status' + count + '" name="status' + count +'" value="Actual" onClick="checkStatus(this.value)" >Actual</label>   '
                +'<label class="radio"><input type="radio" id="status' + count + '" name="status' + count +'" value="Ghost" onClick="checkStatus(this.value)" >Ghost</label>'
                +'</div>'

                +'<div class="span1">'
                +'<label>Type</label>'
                +'<select id="upg' + count + '" name="upg' + count +'" onChange="checkExp(this.value)" class="input-small" >'
                +' <option value="" selected="&nbsp;" >&nbsp;</option>'
                +'<option value="Exp" >Exp</option>'
                +'<option value="Post" >Post</option>'
                +'<option value="Upgrade" >Upg</option>'
                +'<option value="Retail" >Retail</option>'
                +'</select>'
                +'</div>'

                +'<div id="upg' + count + '" class="span2">'
                +'<label>Full Date</label>'
                +'<input name="upg_date' + count +'" id="upg_date' + count + '" type="text" id="upg_date" placeholder="YYYY-MM-DD" class="input-small" />'
                +'<img id="jscalendar' + count + '" type="image" src="img/calendar.png" style="border-width:0px; width:16px; height:16px; background-color:#FFF; margin-bottom:-7px;" onclick="createPopCalendar3()">'
                +'<input type="hidden" name="counter[]" value="1"></div>' 
```

**并像这样更改您的 php 提交页面：**

```
if(is_array($_POST[counter]))
{

foreach($_POST[counter] as $key=>$val)
{

$process_where=$_POST["process_where".$key.""];
$status=$_POST["status".$key.""];
$upg=$_POST["upg".$key.""];
$upg_date=$_POST["upg_date".$key.""];

if($process_where !="")
{
//Query Run Here
  $query="insert into tablename (process_where,status,upg,upg_date) values ('".$process_where."','".$status."','".$upg."','".$upg_date."')";
 mysql_query($query) or die(mysql_error());
}

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:28:31.227

您可以这样做。在提交表单时检查此代码：

```
if(is_array($_POST[process_where]))
{

foreach($_POST[process_where] as $key=>$val)
{

$process_where=$_POST[process_where][$key];
$status=$_POST[status][$key];
$upg=$_POST[upg][$key];
$upg_date=$_POST[upg_date][$key];

//Query Run Here
  $query="insert into tablename (process_where,status,upg,upg_date) values ('".$process_where."','".$status."','".$upg."','".$upg_date."')";
 mysql_query($query) or die(mysql_error());

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:39:17.457

为了简化它，如果我这样做，什么都不会打印。

```
if(is_array($_POST[counter]))
{
$count=count($_POST[counter]);
echo $count;

    for($i=0;$i<=$count;$i++)
{   

    echo "The number is " . $i . "<br />";

} 
```

}

但如果我这样做， $count 打印得很好。

```
if(is_array($_POST[counter]))
{
$count=count($_POST[counter]);
echo $count; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T16:02:01.630

提交后请上传修改后的版本

```
if(is_array($_POST[counter]))
{
$count=count($_POST[counter]);

for($i=0;$i<=$count;$i++)
{

$process_where=$_POST["process_where".$i.""];
$status=$_POST["status".$i.""];
$upg=$_POST["upg".$i.""];
$upg_date=$_POST["upg_date".i.""];

if($process_where !="")
{
//Query Run Here
  $query="insert into tablename (process_where,status,upg,upg_date) values ('".$process_where."','".$status."','".$upg."','".$upg_date."')";
 mysql_query($query) or die(mysql_error());
}

}

} 
```

# cocoa - NSScrollView 边缘插图

> ID：13171108
> 
> 赞同：1
> 
> 时间：2012-11-01T04:48:41.580
> 
> 标签：cocoa, nsoutlineview, nsscrollview

我打算在 NSScrollView 中使用不适合顶部和底部边缘的 NSOutlineView，因为我需要在顶部和底部滚动边缘插入阴影（重叠渐变）。大纲视图应该可以在垂直的顶部阴影下方和底部阴影上方滚动。怎么可能实现？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:00:55.577

我不太确定如何为顶部阴影获取空间，但为底部阴影实现它的核心是子类化`NSOutlineView`和覆盖`setFrameSize:`：

```
- (void)setFrameSize:(NSSize)newSize {
    newSize.height += kBottomShadowHeight;
    [super setFrameSize:newSize];
} 
```

您可以使用类似的技巧`setFrameOrigin:`在顶部获得一些空间，但我不太确定这会奏效。

# php - 想要从 gmail 检索电子邮件

> ID：13171114
> 
> 赞同：0
> 
> 时间：2012-11-01T04:49:56.267
> 
> 标签：php, gmail, imap

我想从我的 gmail 帐户中获取电子邮件。我确实使用了该代码，但除了停止循环外，前面屏幕上没有显示任何内容。我不明白我错在哪里，因为我的端口是正确的。我还在我的`GMAIL account`. 我正在使用 Windows 7。请帮助我解决此问题。

```
$server = '{imap.gmail.com:993/ssl}';
$connection = imap_open($server, 'abc@gmail.com', 'abc');

$emails = imap_search($connection,'UNSEEN');
if($emails) {

    rsort($emails);

    foreach($emails as $email_number) {
      $overview = imap_fetch_overview($connection,$email_number,0);
      print_r($overview);
      echo $overview[0]->subject."\n";
      $message = imap_fetchbody($connection,$email_number,1);

      echo $message;
    }

} 

/* close the connection */
imap_close($connection); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:00:36.733

您的服务器应该如下所示：

```
$hostname = '{imap.gmail.com:993/imap/ssl}INBOX'; 
```

你可以在这里找到一个很好的演示：http: [//davidwalsh.name/gmail-php-imap](http://davidwalsh.name/gmail-php-imap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:39:27.513

试试看， `$server = '{imap.gmail.com:993/imap/ssl}INBOX';`它会起作用，一旦你取到邮件，邮件就会标记为已读。

# c++ - C++ std::reference_wrapper 如何隐式转换为引用？

> ID：13171115
> 
> 赞同：2
> 
> 时间：2012-11-01T04:49:57.020
> 
> 标签：c++, reference, c++11, implicit-conversion, reference-wrapper

我最近开始使用这个`std::reference_wrapper`类。在替换原始引用的某些用途时，我注意到我不必使用该`get()`函数将 reference_wrappers 作为参数传递给采用普通引用的函数。

```
void foo(const T& a);
//...
T obj;
std::reference_wrapper<const T> ref(obj);
foo(ref);  //works!
//foo(ref.get()); also works, but I expected that it would be required 
```

`std::reference_wrapper`传递给函数时如何隐式转换为原始引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T04:52:11.090

reference_wrapper 包括（§20.8.3）：

```
// access
operator T& () const noexcept; 
```

这是一个转换运算符，因为它没有被指定为，所以它允许从到 的`explicit`隐式转换。`reference_wrapper<T>``T&`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T04:51:35.393

它重载了这个转换运算符：

```
operator T& () const; 
```

[http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper/get](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper/get)

# r - 多个列表框和滚动条 tcl/tk 和 R

> ID：13171121
> 
> 赞同：0
> 
> 时间：2012-11-01T04:50:27.897
> 
> 标签：r, tk

我创建了 4 个列表框和 4 个它们绑定的滚动条。但是滚动条没有按预期工作：它们在滚动列表框时相互干扰，最后一个滚动不起作用。`tkyview`我在and中找不到任何其他选项`tkset`来解决此问题。你觉得这里有什么问题？

```
require(tcltk)
tt <- tktoplevel()

#Scrollbars
scr.d <- tkscrollbar(tt, repeatinterval=4,command=function(...) tkyview(t.d,...))
scr.m <- tkscrollbar(tt, repeatinterval=4,command=function(...) tkyview(t.d,...))
scr.s <- tkscrollbar(tt, repeatinterval=4,command=function(...) tkyview(t.d,...))
scr.a <- tkscrollbar(tt, repeatinterval=4,command=function(...) tkyview(t.d,...))

#Listboxes
t.d <- tklistbox(tt, selectmode="browse",yscrollcommand=function(...) tkset(scr.d,...), width=20,background="white", exportselection=0)
t.m <- tklistbox(tt, selectmode="Single",
                 yscrollcommand=function(...) tkset(scr.m,...), width=20, background="white", exportselection=0)
t.s <- tklistbox(tt,selectmode="Single",
                 yscrollcommand=function(...) tkset(scr.s,...), width=30, background="white", exportselection=0)
t.a <- tklistbox(tt,selectmode="Single",
                 yscrollcommand=function(...) tkset(scr.a,...), width=35, background="white", exportselection=0)

#Place them on the window
tkgrid(tklabel(tt,text="Select subject property:"))
tkgrid(tklabel(tt,text=""))
tkgrid(t.d, scr.d,t.m, scr.m, t.s, scr.s, t.a, scr.a)

tkgrid.configure(scr.d,rowspan=4,sticky="nsw")
tkgrid.configure(scr.m,rowspan=4,sticky="nsw")
tkgrid.configure(scr.s,rowspan=4,sticky="nsw")
tkgrid.configure(scr.a,rowspan=4,sticky="nsw")

#Filling up the listboxes
for (i in 1:100)
{
  tkinsert(t.d, "end", i)
}

for (i in letters)
{
  tkinsert(t.m, "end", i)
}

for (i in rnorm(100))
{
  tkinsert(t.s, "end", i)
}

for (i in letters)
{
  tkinsert(t.a, "end", i)
} 
```

这段代码是 James Wettenhall 在[这里](http://bioinf.wehi.edu.au/~wettenhall/RTclTkExamples/listboxes.html)编译的代码教程的扩展，我认为有点过时了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:59:52.007

当您创建上面的所有滚动条时，您将命令设置`tkyview`为`t.d`列表框，因此您已经告诉所有 4 个滚动条移动同一个框。如果您修正错字并让最后 3 个`tkyview`函数调用最后 3 个列表框对象，那么它就可以工作。

# linux - 如何使用 linux 从另一台计算机访问命令提示符

> ID：13171122
> 
> 赞同：0
> 
> 时间：2012-11-01T04:50:30.310
> 
> 标签：linux, ubuntu, ubuntu-server

我正在寻找虚拟化运行 ubuntu 服务器的家用计算机。我想通过笔记本电脑在家用计算机上运行 python 脚本。我不知道如何配置它。我想我需要在我的家庭桌面上配置一个 ubuntu 服务器，以便我可以从我的笔记本电脑访问它的命令提示符。我将如何安装和配置 ubuntu 服务器来做到这一点？如何从笔记本电脑访问服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:03:03.597

这并不是真正特定于 ubuntu，对于任何 linux/unix 平台都是一样的

您应该在服务器（您的家用计算机）上运行 ssh-server

然后

```
$ ssh <the-server> <path-to-python-script> 
```

将在服务器上运行脚本。

您也可以像这样在服务器上获得一个控制台

```
$ ssh <the-server> 
```

然后运行您喜欢的任何命令

# xaml - 允许指针事件从按钮单击中冒泡

> ID：13171124
> 
> 赞同：0
> 
> 时间：2012-11-01T04:51:14.633
> 
> 标签：xaml, windows-runtime

当单击容器内的按钮时，我需要采取哪些步骤才能使 PointerPressed 和 PointerMoved 等指针事件在 Container 元素上触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:35:32.247

我最终采用的方法是将事件处理程序添加到容器中，并将 boolhandedEventsToo 参数设置为 true。

```
mainPage.AddHandler(PointerPressedEvent, new PointerEventHandler(pointerPressedHandler), true);
mainPage.AddHandler(PointerMovedEvent, new PointerEventHandler(pointerMovedHandler), true); 
```

这意味着即使事件已经被处理，容器仍然有机会处理这些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:51:24.650

创建自定义按钮控件。获取常规按钮的模板并自己处理事件 - 然后您将能够路由它。

# php - Yii 模型：用户名规则允许 a-z_-

> ID：13171125
> 
> 赞同：6
> 
> 时间：2012-11-01T04:51:20.107
> 
> 标签：php, yii

如何在 Yii 框架中制定规则以在用户名字段中只允许字符 az、下划线和破折号？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T04:59:43.647

您应该能够使用[手册](http://www.yiiframework.com/wiki/56/#hh17)中概述的`match`/规则：`pattern`

```
public function rules() {
    return array(
        array('username', 'required'),
        array(
            'username',
            'match', 'not' => true, 'pattern' => '/[^a-zA-Z_-]/',
            'message' => 'Invalid characters in username.',
        ),
    );
} 
```

这个*未经测试的代码*将要求该`username`字段包含数据，然后验证它不包含不在接受字符列表中的字符（az、下划线和破折号）。

# android - 如何检查 ArrayList 用于在android中插入和删除

> ID：13171126
> 
> 赞同：0
> 
> 时间：2012-11-01T04:51:22.853
> 
> 标签：android, arraylist

我将 ArrayList 作为“deletedPositions”，并且我将值传递给该 arrayList，在此之前我想检查该数组中是否存在值，如果是，那么我想删除该值，如果不存在，则在该数组中添加值清单，如何做到这一点？

我尝试使用此代码，但无法得到答案，

```
 if(deletedPositions.isEmpty())
    {
        deletedPositions.add(PositionChecked);
        Toast.makeText(getApplicationContext(), "Is empty ="+this.deletedPositions.size(), 1).show();
    }
    else
    {
        for(int i=0;i<deletedPositions.size();i++)
        {
            if(deletedPositions.get(i) == PositionChecked)
            {
                deletedPositions.remove(i);
                Toast.makeText(getApplicationContext(), "After removeArray ="+this.deletedPositions, 1).show();
            }
            else
            {
                deletedPositions.add(PositionChecked);
                Toast.makeText(getApplicationContext(), "After Added Array ="+this.deletedPositions, 1).show();
            }
        }
    } 
```

任何人都可以帮助我克服这个..提前谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:01:45.790

您必须使用 arraylist.contains 方法来检查元素是否已经存在于 arraylist 中。您不需要 for 循环来运行整个数组列表。使用以下内容：

```
if(deletedPositions.contains(PositionChecked)) {
    int numIndex = deletedPositions.indexOf(PositionChecked)  
    deletedPositions.remove(numIndex);  
}
else {
    deletedPositions.add(PositionChecked);
} 
```

您也可以参考以下线程 [检查 ArrayList 中是否存在值](https://stackoverflow.com/questions/4404084/find-if-a-value-exists-in-arraylist)

# php - 如何在不使用缓存的情况下禁用“文档已过期”

> ID：13171127
> 
> 赞同：0
> 
> 时间：2012-11-01T04:51:27.517
> 
> 标签：php, caching, post, get

我正在做的很简单：
page1（POST）-> model2-> Page2-> Page3

通过从 Page3 中单击浏览器的“返回”按钮访问 Page2 时，
我得到“网页已过期”（IE）或“文档已过期”（FF），我不想向用户显示。

据我所知，一种解决方案是将“Cache-Control”设为私有或公共，
但我需要在 model2 中生成一些一次性密钥
，稍后将其发布到 Page3（在另一个站点中）。
当回到第2页时，一次性密钥也必须重新生成，
所以缓存似乎不是我的解决方案。

使用 GET 将参数从 Page1 传递到 Page2 工作正常，
一次性密钥每次都重新生成，
除了一个小问题外，浏览器没有警告：参数显示在 url 中。
试图通过在获取后立即使用重定向来解决该问题，
但这会导致缓存问题：我无法重新生成一次性密钥。

那么有什么方法不会在从 Page1 到 Page2 的 url 中显示参数，
并且在单击“返回”按钮时不会从 Page3 到 Page2 显示“文档已过期”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:30:12.053

在导航到下一页之前通过 ajax 发布它们

# android - 禁用方向更改

> ID：13171132
> 
> 赞同：0
> 
> 时间：2012-11-01T04:51:59.920
> 
> 标签：android

> **可能重复：**
> [如何在 Android 中禁用方向更改？](https://stackoverflow.com/questions/1512045/how-to-disable-orientation-change-in-android)

我想在以任何方向（纵向或横向）打开画布后禁用方向更改，但是在横向模式下打开画布并更改设备方向时遇到问题，方向未被禁用。

这是代码。

```
public void onConfigurationChanged(Configuration newConfig) {

  super.onConfigurationChanged(newConfig);
  this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T05:20:13.467

在你的代码中试试这个......

```
if(getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    }
    else
    {
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    } 
```

在 oncreate 中获取方向并为该活动设置该方向

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T04:56:32.713

使用此代码从清单中为您的活动添加固定方向：（将此代码放入活动标签中）

```
android:screenOrientation="portrait"
android:configChanges="orientation|keyboardHidden" 
```

这样，您的活动将仅以纵向模式显示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T04:56:48.763

采用：

```
<activity android:name="YourActivity" android:configChanges="orientation|keyboardHidden"> 
```

# mysql - 选择按另一列分组的最大日期

> ID：13171133
> 
> 赞同：6
> 
> 时间：2012-11-01T04:52:05.380
> 
> 标签：mysql, count, group-by

我有一张像这样的桌子：

**金_2012**

```
gold_city | gold_type | gold_cost | gold_selltime
--------------------------------------------------
city1     | type 1    | 41.23     | 2012-01-01   
city1     | type 1    | 42.23     | 2012-02-02   
city1     | type 1    | 40.23     | 2012-03-03   
city2     | type 2    | 43.23     | 2012-01-01   
city2     | type 2    | 45.23     | 2012-02-02   
city2     | type 2    | 47.23     | 2012-03-03   
city3     | type 3    | 48.23     | 2012-01-01   
city3     | type 3    | 49.23     | 2012-02-02   
city3     | type 3    | 44.23     | 2012-03-03 
```

如何通过`gold_selltime`desc 每组 by`gold_city`和获得 1 个最后结果顺序`gold_type`。

我用这个：

```
SELECT * , COUNT( * ) 
FROM  gold_2012
GROUP BY  gold_type ,  gold_city
ORDER BY gold_selltime DESC 
```

但它没有用。
我只有这样的结果：

```
gold_city | gold_type | gold_cost | gold_selltime
--------------------------------------------------
city1     | type 1    | 41.23     | 2012-01-01   
city2     | type 2    | 43.23     | 2012-01-01   
city3     | type 3    | 48.23     | 2012-01-01 
```

但我需要它：

```
gold_city | gold_type | gold_cost | gold_selltime
--------------------------------------------------
city1     | type 1    | 40.23     | 2012-03-03   
city2     | type 2    | 47.23     | 2012-03-03   
city3     | type 3    | 44.23     | 2012-03-03 
```

对不起！我忘记了……！请参阅上面我编辑的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T04:54:06.393

您可以[`MAX`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_max)为此使用函数：

```
SELECT gold_city, gold_type 
       , MAX(gold_selltime) AS gold_selltime, COUNT( * ) AS `COUNT`
FROM gold_2012 
GROUP BY gold_type , gold_city 
ORDER BY gold_selltime DESC 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!8/22fba/2)

注意：您可以使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)以下函数转换日期：

```
DATE_FORMAT(MAX(gold_selltime), '%Y-%m-%d') AS gold_selltime 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!8/22fba/4)

## 更新

^(由于 OP 改变了他/她的要求，请参阅这个更新的答案：)

您可以使用以下查询来实现：

```
SELECT *
FROM gold_2012
WHERE gold_selltime IN
(
    SELECT MAX(gold_selltime) AS gold_selltime
    FROM gold_2012  
) 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!8/22fba/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:15:28.733

试试这个

```
SELECT gold_city,gold_type , MAX(gold_selltime)
FROM gold
WHERE gold_city IN (select distinct gold_city from gold) 
GROUP BY gold_city ,gold_type 
```

# javascript - 闭包中直接函数调用和 call() apply() 有什么区别

> ID：13171139
> 
> 赞同：3
> 
> 时间：2012-11-01T04:52:35.210
> 
> 标签：javascript, function

我在权威指南中阅读了这个片段：

```
function not(f)
{
  return function()
  {
    var result=f.apply(this,arguments);
    return !result;
  }
} 
```

我无法理解的是，既然这个函数`f`在闭包中，它`this`已经是了`this`，为什么这个片段不直接使用`var result=f(arguments);`呢？

我什至读了一些`call`以 undefined/null 作为第一个参数的 s，我认为可以完全用直接调用代替：

```
...
while(i>len)
{
  if(i in a)
     accumulator=f.call(undefined,accumulator,a[i],i,a);
  i++;
}
... 
```

为什么作者使用 call() 而不是直接调用？`call()`直接函数调用和未定义作为它的第一个参数之间有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T05:00:59.293

```
var result=f(arguments); 
```

...将调用`f()`传递一个参数，即`arguments`对象。

```
var result=f.apply(this,arguments); 
```

...将调用单独`f()`传递`arguments`对象中的参数（可以这么说）。

所以让我们说`f()`被定义为：

```
function f(a,b,c) {
    // do something with a, b, c
    return c;
} 
```

然后给定三个参数`1,2,3`，直接调用`arguments`是这样的：

```
f([1,2,3]); 
```

（请注意，`arguments`它*类似于数组；*它不是实际的数组。）

而`.apply()`版本是这样的：

```
f(1,2,3); 
```

# javascript - 在淘汰赛中没有完全绑定

> ID：13171144
> 
> 赞同：1
> 
> 时间：2012-11-01T04:52:51.620
> 
> 标签：javascript, data-binding, knockout.js, knockout-2.0

淘汰赛没有按预期工作，我的界面。我想我的错误。但我无法理解。

我有一张包含流派的专辑，包括流派的曲目：

```
var initialData = [{
    title: 'Danny',
    genres: [
        {id: 21,
        title: 'Noise'},
        {id: 22,
        title: 'EBM'}],
    tracks: [
        {title: 'Pony',
        genres: [
            {id: 21,
            title: 'Noise'},
            {id: 22,
            title: 'EBM'}]},
        {title: 'Hungry',
        genres: [
            {id: 21,
            title: 'Noise'},
            {id: 22,
            title: 'EBM'}]}
    ]

}]; 
```

我想在专辑流派与曲目流派之间创建单向同步：

*   如果我将流派添加到专辑中，则该流派将添加到所有曲目中。
*   如果我从专辑中删除流派，则该流派将从所有曲目中删除。
*   如果我将流派添加到轨道，则该流派将仅添加到该轨道。
*   如果我从曲目中删除流派，则该流派将仅从该曲目中删除。

我的同步工作正常（除了一种情况）这个功能：

```
self.addGenre = function(album) {
    var id = rand(),
        item = {
            id: id,
            title: ' genre #' + id
        };
    album.genres.push(item);

    if (album.tracks()) {
        $.each(album.tracks(), function (index, track) {
            track.genres.push(item);
        });
    }
};

self.removeGenre = function(genre) {
    $.each(self.albums(), function() {
        this.genres.remove(genre);
        if (this.tracks()) {
            $.each(this.tracks(), function (index, track) {
                track.genres.remove(genre);
            });
        }
    });
}; 
```

**例外情况是，如果我想从专辑中删除默认（噪音、EBM，请参阅上面的 initialData）流派。它不起作用。**

**我创建了一个[jsFiddle](http://jsfiddle.net/matmuchrapna/f2E7e/2/)来展示这个案例，并在其中包含了很多`console.log()`要调试的内容**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:30:23.700

问题是当你使用 ko-mapping 时，它会将每个属性都变成一个 observable。您创建的新类型与初始对象不是同一类对象，因为它们只是标准的香草对象。因此，您尝试从曲目中删除的流派与您从专辑中删除的流派不同。

解决问题的一种简单方法是更改​​删除功能，如[this fiddle](http://jsfiddle.net/f2E7e/4/)。

```
$.each(this.tracks(), function(index, track) {
    var toRemove = ko.utils.arrayFirst(track.genres(), function(item) {
        return ko.utils.unwrapObservable(genre.id) == ko.utils.unwrapObservable(item.id);
    });
    track.genres.remove(toRemove);
}); 
```

更好的方法是更彻底地生成初始视图模型、新类型或两者兼而有之。这并不容易。

# iphone - 在Objective C中将UIButton从UIScrollView拖放到UIView

> ID：13171149
> 
> 赞同：1
> 
> 时间：2012-11-01T04:53:14.133
> 
> 标签：iphone, objective-c, uiscrollview, drag-and-drop, uibutton

我想在`UIButton`. 实际上，我已经在`UIScrollView`. 我添加以下目标`UIButton`

```
[mybutton addTarget:self action:@selector(wasDragged:withEvent:)forControlEvents:UIControlEventTouchDragInside]; 
```

这就是方法

```
- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
 {
// get the touch

UIButton *myButton=[[UIButton alloc]init];
myButton=button;
[self.scrollView addSubview:myButton];

UITouch *touch = [[event touchesForView:button] anyObject];

//get delta
CGPoint previousLocation = [touch previousLocationInView:myButton];
CGPoint location = [touch locationInView:myButton];
CGFloat delta_x = location.x - previousLocation.x;
CGFloat delta_y = location.y - previousLocation.y;

//move button
myButton.center = CGPointMake(myButton.center.x + delta_x,myButton.center.y + delta_y);

} 
```

此代码在滚动视图下运行良好，并且按钮在滚动视图内拖放。现在的问题是当我将按钮拖到滚动视图之外时，按钮消失了。我也想将按钮拖到滚动视图之外。我怎样才能做到这一点？如何将按钮从 Scrollview 拖到另一个 UIView？这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:04:24.393

视图控制器.h

```
@interface ViewController : UIViewController <UIScrollViewDelegate>{
}

@property (nonatomic, strong) IBOutlet UIView *dropTarget;
@property (nonatomic, strong) UIImageView *dragObject;
@property (nonatomic, retain) UITextView *txt_View;
@property (nonatomic, strong) UIImageView *prevdragObject;
@property (nonatomic, assign) CGPoint touchOffset;
@property (nonatomic, assign) CGPoint homePosition;
@end 
```

只是代替

```
 IBOutlet UIView *dropTarget 
```

只需使用

```
IBOutlet UIScrollView *dropTarget 
```

视图控制器.m

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
       if ([touches count] == 1) {
        // one finger
        CGPoint touchPoint = [[touches anyObject] locationInView:self.view];
        for (UIImageView *iView in self.view.subviews) {
            if ([iView isMemberOfClass:[UIImageView class]]) {
                if (touchPoint.x > iView.frame.origin.x &&
                    touchPoint.x < iView.frame.origin.x + iView.frame.size.width &&
                    touchPoint.y > iView.frame.origin.y &&
                    touchPoint.y < iView.frame.origin.y + iView.frame.size.height)
                {
                    self.dragObject = iView;
                    self.touchOffset = CGPointMake(touchPoint.x - iView.frame.origin.x,
                                                   touchPoint.y - iView.frame.origin.y);
                    self.homePosition = CGPointMake(iView.frame.origin.x,
                                                    iView.frame.origin.y);
                    [self.view bringSubviewToFront:self.dragObject];
                }
            }
        }
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
   CGPoint touchPoint = [[touches anyObject] locationInView:self.view];
   CGRect newDragObjectFrame = CGRectMake(touchPoint.x - touchOffset.x,
                                       touchPoint.y - touchOffset.y,
                                       self.dragObject.frame.size.width,
                                       self.dragObject.frame.size.height);
   self.dragObject.frame = newDragObjectFrame;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [[touches anyObject] locationInView:self.view];
    if (touchPoint.x > self.dropTarget.frame.origin.x &&
    touchPoint.x < self.dropTarget.frame.origin.x + self.dropTarget.frame.size.width &&
    touchPoint.y > self.dropTarget.frame.origin.y &&
    touchPoint.y < self.dropTarget.frame.origin.y + self.dropTarget.frame.size.height )
    {
        self.dropTarget.backgroundColor = [UIColor colorWithPatternImage:self.dragObject.image];
    }
    self.dragObject.frame = CGRectMake(self.homePosition.x, self.homePosition.y, self.dragObject.frame.size.width, self.dragObject.frame.size.height);
    self.prevdragObject.frame = self.dragObject.frame;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:57:01.840

我通过更改代码解决了这个问题

```
[self.scrollView addSubview:myButton]; 
```

到

```
[self.view addSubview:myButton]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:07:04.870

您需要将拖动逻辑向上移动到包含滚动视图和其他视图的视图。当用户在较高视图上开始拖动时，您可以确定哪个子视图在它下面。然后将该视图（按钮）重新分配为该更高视图的子视图，而不是其原始父视图（滚动视图）。根据拖动完成的位置，按钮被添加回滚动视图或另一个视图被拖动到。

# cuda - cusparse csrsvanalysis 有时有效，有时失败

> ID：13171152
> 
> 赞同：1
> 
> 时间：2012-11-01T04:53:38.063
> 
> 标签：cuda, cublas

我正在尝试使用预条件共轭梯度来解决 Ax=b。因此，我以 cuda-sdk 给出的示例为例。有时，当我调用该函数时`cusparseScsrsv_analysis`，它会返回错误 6，即“执行失败”。有时，它有效。

矩阵 A 是对称正定矩阵。

此外，共轭梯度在相同的数据上也能正常工作。

这是我的代码：

```
/* Get handle to the CUSPARSE context */
cusparseHandle_t cusparseHandle = 0;
cusparseStatus_t cusparseStatus;
cusparseStatus = cusparseCreate(&cusparseHandle);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseCreate returned error code %d !\n", cusparseStatus);

cusparseMatDescr_t descr = 0;
cusparseStatus = cusparseCreateMatDescr(&descr);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseCreateMatDescr returned error code %d !\n", cusparseStatus);

// create the analysis info object for the A matrix 
cusparseSolveAnalysisInfo_t infoA = 0;
cusparseStatus = cusparseCreateSolveAnalysisInfo(&infoA);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseCreateSolveAnalysisInfo returned error code %d !\n", cusparseStatus);

// Perform the analysis for the Non-Transpose case 
cusparseStatus = cusparseScsrsv_analysis(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, N, nnz, descr, dev_val, dev_row_ptr, dev_colInd, infoA);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseScsrsv_analysis 1 returned error code %d !\n", cusparseStatus); 
```

N 是列数和行数，nnz 是非零元素的数量。我的矩阵是 csr 格式。

编辑：我没有看到任何特殊要求。我不认为这是由于内存造成的，我有超过 2GB 的空间，而且我没有使用大矩阵（48MB）。

我尝试了使用 jacobi precondionner 的预处理共轭梯度，它也可以正常工作，但是如果我尝试使用 cusparse 进行分析，它会失败一半。

我想要的是使用 cusparse 和 cublas 使用Maxim Noumov 的算法（ [http://developer.download.nvidia.com/compute/DevZone/docs/html/CUDALibraries/doc/Precondition_Iterative_Methods_White_Paper.pdf ）。](http://developer.download.nvidia.com/compute/DevZone/docs/html/CUDALibraries/doc/Preconditioned_Iterative_Methods_White_Paper.pdf)

**编辑2**：

我需要一些关于 curspace 的解释。如果我在描述符中放入这一行：`cusparseSetMatType(descr,CUSPARSE_MATRIX_TYPE_SYMMETRIC);`分析有效，但奇怪的是我不仅存储了整个矩阵的上部或下部。如果我把`cusparseSetMatType(descr,CUSPARSE_MATRIX_TYPE_GENERAL);`，它不起作用。此外，我不明白为什么我必须存储在`dev_row_ptr`m+1 元素中，其中 m 是行数。我在最后一个元素中放了什么？

其他问题：该函数`cusparseScsric0`将整个矩阵作为输入的矩阵值（文档中的 csrValM）作为输入/输出，仅将不完整的 CHolesky 上三角或下三角作为输出。它是如何工作的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:34:27.667

关于 cusparse 的文档`cusparseScsric0`是错误的，它`CUSPARSE_MATRIX_TYPE_SYMMETRIC`作为输入。此功能使`cusparseScsrsv_analysis`崩溃。

这是一个正确的代码：

```
cusparseMatDescr_t descrR = 0;
cusparseStatus = cusparseCreateMatDescr(&descrR);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
fprintf(stderr, "cusparseCreateMatDescr returned error code %d !\n", cusparseStatus);

cusparseSetMatFillMode(descrR,CUSPARSE_FILL_MODE_UPPER); // It can also be lower side
cusparseSetMatType(descrR,CUSPARSE_MATRIX_TYPE_SYMMETRIC);
cusparseSetMatIndexBase(descrR,CUSPARSE_INDEX_BASE_ZERO);

cusparseSolveAnalysisInfo_t infoR = 0;
cusparseStatus = cusparseCreateSolveAnalysisInfo(&infoR);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseCreateSolveAnalysisInfo returned error code %d !\n", cusparseStatus);

cusparseStatus = cusparseScsrsv_analysis(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, 27, 153, descrR, dev_valR, dev_row_ptrR, dev_colIndR, infoR);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseScsrsv_analysis returned error code %d !\n", cusparseStatus);

// generate the Incomplete Cholesky factor H for the matrix R using cusparseScsric0 
cusparseStatus = cusparseScsric0(cusparseHandle, CUSPARSE_OPERATION_NON_TRANSPOSE, 27, descrR, dev_valR, dev_row_ptrR, dev_colIndR, infoR);
if(cusparseStatus!=CUSPARSE_STATUS_SUCCESS)
    fprintf(stderr, "cusparseScsric0 returned error code %d !\n", cusparseStatus); 
```

也是`dev_row_ptrR`行数+1。

# gwt - 如何使用 GWT 平台的 UiHandlers？

> ID：13171157
> 
> 赞同：0
> 
> 时间：2012-11-01T04:54:08.623
> 
> 标签：gwt, gwt-platform, gwt-mvp, gwtp

我一直在尝试写[联系人](https://developers.google.com/web-toolkit/articles/mvp-architecture-2)。使用 gwt-platform 的示例我已经使用手动显示成功获得了联系人视图以获取联系人列表，我正在尝试使用 UiHandlers 添加按钮，但它没有在我的 ContactsPresenter 的 onAddButtonClicked() 中调用该方法。

休闲是我的观点的代码片段

```
public class ContactsView extends ViewWithUiHandlers<ContactsViewUiHandlers> implements  ContactsPresenter.MyView {

private final Widget widget;

@UiField
Button addButton;

@UiHandler("addButton")
public void onAddButtonClick(ClickEvent e){
    System.out.println("add button clicked");
    getUiHandlers().onAddButtonClicked();
} 
```

}

闲置的是 UiHandlers 接口

```
public interface ContactsViewUiHandlers extends UiHandlers{
        void onAddButtonClicked();
} 
```

在我的演示者中，我正在使用 onAddButtonClicked() 中的事件总线触发一个事件。

但是控件没有提供给我的演示者，并且当我单击添加按钮时出现以下异常。

```
[ERROR] [contactsgwtp] - Uncaught exception escaped

10:17:10.527 [ERROR] [contactsgwtp] Uncaught exception escaped

com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException: null
    at com.saik.in.client.core.ContactsView.onAddButtonClick(ContactsView.java:51)
    at com.saik.in.client.core.ContactsView_BinderImpl$1.onClick(ContactsView_BinderImpl.java:50)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:54)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Thread.java:662) 
```

关于我所缺少的任何建议，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:45:58.367

显然`getUiHandlers()`是`null`......但你知道:-)

I would expect the cause of this could be that you have forgotten to *set* the UI handlers when injecting in the associated presenter (which would be the normal procedure in GWTP) - something like:

```
public class ContactsPresenter extends Presenter<ContactsPresenter.MyView, ContactsPresenter.MyProxy> 
                               implements ContactsViewUiHandlers 
{
    public interface MyView extends View, HasUiHandlers { /* nothing */ }

    private PlaceManager placeManager;

    @Inject
    ContactsPresenter( final EventBus eventBus , final MyView view , 
                       final MyProxy proxy , final PlaceManager placeManager )
    {
        super( eventBus , view , proxy );
        this.placeManager = placeManager;
        getView().setUiHandlers( this );
    }
    ...

    @Override
    public void onAddButtonClicked()
    {
        placeManager.revealPlace( new PlaceRequest( "somewhereovertheocean" ) );
    }
    ...
} 
```

(The operative part being **`getView().setUiHandlers( this );`** and **`implements ContactsViewUiHandlers`**).

Incidentally, it is good practice to always check `getUiHandlers()` for null-ness before invoking any methods on it...

Hope that helps.

Cheers,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:54:29.953

Looking at the exception you've provided I think you have missed one of the following points :

1.  `ContactsPresenter` should implement `ContactsViewUiHandlers` like this: `ContactsPresenter implemets ContactsViewUiHandlers`
2.  Set `ContactsPresenter`'s reference as `contactsView.UIHandlers` like this: `getView().setUiHandlers(this);`

After doing both the things you should not get the mentioned Exception. I hope this helps you.

# c# - 为什么这是错的？

> ID：13171158
> 
> 赞同：0
> 
> 时间：2012-11-01T04:54:18.067
> 
> 标签：c#, string, datetime

记录值。时间为“11/01/2012 11:38:01:296”

```
string[] capturetime = record.Time.Split(':');
string captime = capturetime[0] + ":" + 
                 capturetime[1] + ":" + 
                 capturetime[2] + "." + 
                 capturetime[3];
DateTime rightTime = Convert.ToDateTime(captime); 
```

在第二行运行后，captime 的值为“11/01/2012 11:38:01.296” 最后一行出现错误：“索引和长度必须引用字符串中的位置。参数名称：lengthmscorlib”

我不明白为什么。因为它之前运行良好:(任何人都可以解释这一点？tks这么多

解决了，谢谢大家:)

代码 ：

```
 string[] capturetime = newRecord.Time.Split(':');
                string captime = capturetime[0] + ":" + capturetime[1] + ":" + capturetime [2] + "." + capturetime[3];
                DateTime righttime;

                if(time[3].Length == 2)
                {
                    righttime = DateTime.ParseExact(captime, "MM/dd/yyyy hh:mm:ss.ff",
                                                     CultureInfo.InvariantCulture);
                } else
                {
                    righttime = DateTime.ParseExact(captime, "MM/dd/yyyy hh:mm:ss.fff",
                                                    CultureInfo.InvariantCulture);
                } 
```

那么优化这些代码的任何想法？？？？

更新 ：

是我还是我的 Visual Studio 疯了？？？上面的新代码和旧代码一样出现异常，当我改回旧代码时。它像过去一样工作正常..wth是这样的:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:11:05.857

You can use

```
string dateString =  "11/01/2012 11:38:01:296";    
DateTime date = DateTime.ParseExact(dateString , "MM/dd/yyyy hh:mm:ss:fff",
                                                CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:01:40.840

如果你仔细看，你给的时间，没有最后一个冒号。按照正常标准，这将是一个点。正确检查 RecordTime 值。

"11/01/2012 11:38:01:296" is wrong "11/01/2012 11:38:01.296" is correct

Hence making the indices of captureTime wrong. It would be, 0, 1 and 2\. 3 would be out of bounds.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:19:33.683

just use DateTime.ParseExact(val, "MM/dd/yyyy HH:mm:ss:fff", new DateTimeFormatInfo()) without doing all the string splitting.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T06:43:02.987

I believe the best way to solve this is by using the CultureInfo/DateTimeFormat strings.

However, if that's not applicable for you for some strange reason, here is a crude way of doing this.

```
 string val = @"11/01/2012 11:38:01:296";
        string[] parts = val.Split(' ');
        var dt = DateTime.ParseExact(parts[0], "dd/MM/yyyy", new DateTimeFormatInfo());
        double[] times = parts[1].Trim().Split(':').Select(s => double.Parse(s)).ToArray();
        dt = dt.AddHours(times[0]);
        dt = dt.AddMinutes(times[1]);
        dt = dt.AddSeconds(times[2]);
        dt = dt.AddMilliseconds(times[3]);

        // OR -- dt.AddMilliseconds(times[0] * 60 * 60 * 1000 + times[1] * 60 * 1000 + times[2] * 1000 + times[3]); 
```

# cocos2d-iphone - Cocos2d根据移动方向的bounding

> ID：13171162
> 
> 赞同：1
> 
> 时间：2012-11-01T04:55:01.973
> 
> 标签：cocos2d-iphone

这是我第一次在这里发帖。:)。

即使在这个stackoverflow中，我也多次搜索过这个问题，但仍然没有运气。

我有一个关于 Cocos2d 中两个对象之间边界的问题。为了清楚起见，让我举个例子。有两个对象，Line 和 Square Box。Square Box 大小约为 32 x 32。线是可移动的对象，而 Square Box 是静态的。线移动的方式是水平线的 45 度。当线条碰到方框时，它必须向下反射 90 度，依此类推。

我的问题是我想让线条像光线照到镜子一样反射。所以当线条碰到方框时，线条必须根据它碰到的位置进行反射。例如，在直线向上移动 45 的过程中，如果直线碰到左边的方框，它会反射 270 度。如果线碰到底面的方框，它会反射 90 度，以此类推……移动的方向也必须相应地改变。

对不起我的英语...：D。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:30:37.380

您可以尝试分别分析框的所有边缘，以确定您的线首先穿过哪些边缘。

如果您有任何对象并且希望它反映与其他对象的碰撞，您可以使用 box2d。它会为你计算一切。你只需要设置它并将你的精灵的位置与物理世界中的身体同步。

# ios - 在 iOS 中设置动态 UI

> ID：13171164
> 
> 赞同：1
> 
> 时间：2012-11-01T04:55:28.157
> 
> 标签：ios

我刚刚开始在 iOS 上开发应用程序，我想知道是否可以为来自 API/web 的应用程序设置动态 TextVIew 和 TextField。如果可能，请通过合适的示例告诉我，如果 iOS 不允许此功能，这是完成此任务的好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:01:10.807

有一个 WWDC 2010 会议视频正是关于这种方法的。被称为数据驱动的应用程序设计。

您有一个服务器发送一个应用程序 XML、JSON 或压缩 plist（推荐），其中包含所有 UI 对象坐标、颜色、可见性、文本、图像等，然后解析数据，并从该数据实例化应用程序 UI . 将 UI 数据保存在本地数据库中以供离线使用。等等

您不允许将脚本下载到 App Store 应用程序，但您可以包含许多内置脚本选项，您可以在运行时从中选择所需的行为。

# php - PHP - 从 Foreach 循环中的数组列表中选择数组

> ID：13171172
> 
> 赞同：1
> 
> 时间：2012-11-01T04:56:41.153
> 
> 标签：php, arrays, foreach

我有一个数组数组。每个数组都包含一个用户的信息（姓名、电子邮件、用户名等）。当用户登录时，页面需要在表格中显示数组。（这工作正常）

```
<table>

    <?php
        if(isset($_SESSION['logged_in_user'])) {
            echo '<tr>';
            for ($i = 0; $i < count($item_names); $i++) {
                if ($i == 8) continue;
                echo "<th scope=\"col\">$item_names[$i]</th>";
            }
            echo '</tr>';
            $altrow = false;
            foreach ($contacts as $contact) {
                echo ($altrow) ? '<tr class="alt">' : '<tr>';
                $altrow = !$altrow;
                for ($i = 0; $i < count($contact); $i++) {
                    if ($i == 8) continue;
                    echo "<td>$contact[$i]</td>";
                }
                echo '</tr>'; 
            }
        }
    ?> 
</table> 
```

但我还希望表格突出显示特定登录用户的数组（行）。

我尝试过（但失败了）：

```
<table>
    <?php
        if(isset($_SESSION['logged_in_user'])) {
            echo '<tr>';
            for ($i = 0; $i < count($item_names); $i++) {
                if ($i == 8) continue;
                echo "<th scope=\"col\">$item_names[$i]</th>";
            }
            echo '</tr>'
            $altrow = false;
            foreach ($contacts as $contact) {
                if ($contact[1] == $_SESSION['logged_in_user']) {
                    echo '<tr class="highlight">' : '<tr>'; 
                } else {
                    echo ($altrow) ? '<tr class="alt">' : '<tr>';
                    $altrow = !$altrow;
                    for ($i = 0; $i < count($contact); $i++) {
                        if ($i == 8) continue;
                            echo "<td>$contact[$i]</td>";
                        }
                    }
                    echo '</tr>'; 
                }
            }
    ?> 
</table> 
```

我什至不接近吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:11:08.180

请尝试下面给出的代码

```
<table>
   <?php
    if(isset($_SESSION['logged_in_user'])) {
        echo '<tr>';
        for ($i = 0; $i < count($item_names); $i++) {
            if ($i == 8) continue;
                echo "<th scope=\"col\">$item_names[$i]</th>";
         }
        echo '</tr>';

      $altrow = false;

      foreach ($contacts as $contact) {
        if ($contact[1] == $_SESSION['logged_in_user']) {
            echo '<tr class="highlight">'; 
        } else {
            echo ($altrow) ? '<tr class="alt">' : '<tr>';
         }   
           $altrow = !$altrow;
            for ($i = 0; $i < count($contact); $i++) {
                if ($i == 8) continue;
                     echo "<td>$contact[$i]</td>";
             }

            echo '</tr>'; 
         }
      }
   ?> 
</table> 
```

您的代码中有一些括号错误，例如`} else {}`.

我希望它对你有用。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:02:21.153

嗨 yaar 只需检查游览循环 foreach ($contacts as $contact=>$value) { //在此处操作 $value ，或者您可以通过在此处打印 $value 来检查

}

# dll - 如何获取 user32.dll 中所有入口点的名称？

> ID：13171175
> 
> 赞同：4
> 
> 时间：2012-11-01T04:56:57.440
> 
> 标签：dll, entry-point, rundll32

我正在试验*rundll32.exe*和*user32.dll*。例如，要锁定我的工作站，我键入：

```
rundll32.exe user32.dll, LockWorkStation 
```

我想在*user32.dll*中尝试其他命令（入口点），但我不知道它们是什么。是否有某种方法可以确定*user32.dll*中的所有入口点，或者更一般地确定任何 dll 中的所有入口点？还有什么是 dll 函数调用的有效参数？

请注意，我最终要做的是使用 rundll32.exe 打开开始菜单。如果有人知道哪个 dll/入口点会导致开始菜单弹出，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-19T16:38:07.340

请参阅 [http://msdn.microsoft.com/en-us/library/31d242h4(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/31d242h4(v=vs.110).aspx) ，该问题得到了优雅的回答，并且其相关性得到承认。打开 Visual Studio 命令窗口会将 dumpbin 放在路径上，而 user32.dll 位于 \Windows\system32 中。然后，您可以在 web 上的 msdn 中查找 args。

# jquery - 未从 simpletube jquery 插件生成的修改后的播放列表输出加载颜色框内容

> ID：13171177
> 
> 赞同：0
> 
> 时间：2012-11-01T04:57:05.367
> 
> 标签：jquery, youtube, thumbnails, colorbox, playlist

我通过替换将动态生成的链接附加到由[simpletube jquery 插件](http://hereswhatidid.com/simpletube/)生成的缩略图：

```
for (var i=0; i<intResultsLength; i++) {
if (options['displaytype'] === 'user') {
_objThumbsHolder.append('<div><img src="' + entries[i].thumbnail.sqDefault + '" class="' + entries[i].id + '" /><br /><span class="thumbdescription">'+entries[i].title+'</span></div>');
if (options['defaultvideo'] === entries[i].id) {
intDefault = i;
} 
```

和：

```
for (var i=0; i<intResultsLength; i++) {
if (options['displaytype'] === 'user') {
_objThumbsHolder.append('<div id="my_id_name"><a class="youtube" href="http://www.youtube.com/embed/' + entries[i].id + '?rel=0&autohide=1&showinfo=0&autoplay=0&iv_load_policy=3&wmode=transparent"><img src="' + entries[i].thumbnail.hqDefault + '" class="' + entries[i].id + '" /></a><br /><span class="thumbdescription">'+entries[i].title+'</span></div>');
if (options['defaultvideo'] === entries[i].id) {
intDefault = i;
} 
```

在 jquery.simpletube.js 的第 64 行。我通过获取`+ entries[i].id +`用于将类应用于缩略图的变量（并且是视频 ID）并再次将其用于链接来实现这一点。

我还做了以下调整

*   命名包裹缩略图的 div（用于样式）
*   在缩略图周围包裹了一个 href 链接（所以它变成了一个链接）
*   向 href 链接添加了一些代码，使其具有与网站上在颜色框中弹出的其他链接相同的属性。（以便它在弹出窗口中打开）
*   删除了实际的视频播放器实例（因为视频正在弹出颜色框中播放，所以不需要这样做）。

所以一切正常，除了我在单击链接时在颜色框中收到此错误：

“此内容加载失败。”

我检查了萤火虫中的元素，链接代码之间的唯一区别是缩略图链接有一个“youtube”类，而其他链接自动将“cboxElement”附加到它们的类，使它们的类“youtube” cbox元素'。当我手动将缩略图链接类更改为“youtube cboxElement”时，这是颜色框弹出但随后显示“加载失败”消息的时候。

我已经三重检查了我的链接是否准确，并且缩略图链接和其他站点链接的链接代码是否相同。

所以我唯一的想法是......实际上我没有任何想法 - 我想也许 simpletube 正在删除链接的默认操作，但事实并非如此，因为颜色框正在弹出，它只是未能加载内容。

firebug 错误控制台不显示任何错误或警告。

谢谢你。

ps我正在使用的彩盒调用是：

```
$(".youtube").colorbox({iframe:true, width:"800px"}); 
```

**更新**

仍在研究此问题，我想知道它是否与 colorbox 未绑定到已动态生成的元素有关。

在这方面，我遇到了：

[将 jQuery colorbox 插件添加到动态创建的元素](https://stackoverflow.com/questions/2443490/add-jquery-colorbox-plugin-to-a-dynamically-created-element)

并在我的文档的结束正文标记之前添加了这个（它在头部区域不起作用）：

```
<script>
$(document).ready(function(){
$( '.new_youtube' ).live('click',function(e){
e.preventDefault();
$.colorbox({open:true});
});
});
</script> 
```

所以链接现在在萤火虫中看起来像这样：

```
<a class="new_youtube" href="http://www.youtube.com/embed/xx-xxxxxxxx?rel=0&autohide=1&showinfo=0&autoplay=0&iv_load_policy=3&wmode=transparent"> 
```

colorbox 启动，但随后卡在加载动画 gif 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:31:30.163

我将此添加到头部现有颜色框代码块的底部：

```
$( '.new_youtube' ).live('click',function(e){
e.preventDefault();
$(this).colorbox({open:true, iframe:true, width:"800px", height: "493px", onClosed:function(){
$(".new_youtube").removeClass('cboxElement');
}
});
}); 
```

注意：我必须取消绑定事件，否则再次单击缩略图时，视频播放器的两个实例在弹出的颜色框中。（感谢[这个线程](https://groups.google.com/d/msg/colorbox/-73QlB2Wnbc/XU6vgTLBNUUJ)如何做到这一点）。

并且 simpletube 链接构造器最终成为：

```
<div id="my_id_name"><a class="new_youtube" href="http://www.youtube.com/embed/' + entries[i].id + '?rel=0&autohide=1&showinfo=0&autoplay=0&iv_load_policy=3&wmode=transparent"><img src="' + entries[i].thumbnail.hqDefault + '" class="' + entries[i].id + '" /></a><br /><span class="thumbdescription">'+entries[i].title+'</span></div> 
```

# python - 如何在django python中加入两个表的结果

> ID：13171182
> 
> 赞同：0
> 
> 时间：2012-11-01T04:57:30.810
> 
> 标签：python, django

我有两个模型

```
class Weather(model.model):

        region = models.ForeignKey(Region)
        district = models.ForeignKey(District)
        temp_max = models.IntegerField(blank=True, null=True, verbose_name='Max temperature (C)')
        temp_min = models.IntegerField(blank=True, null=True, verbose_name='Min temperature (C)') 
```

和

```
class Plan(model.model):
    name = tinymce_models.HTMLField(blank=True, null=True)
    region = models.ForeignKey(Region)
    district = models.ForeignKey(District) 
```

为每个地区和地区提供独特的行。我想组合结果，以便我可以获得两个表的所有列

这两个模型彼此不相关。' 我需要让连接像

`join weather w on w.region = A.region and w.distric = A.district`

因此结果包含每个对象中的所有列，例如

obj.temp_max 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:02:42.653

```
w = Weather.objects.get(pk=1)
w.region.plan.name
w.district.plan.name
w.temp_max
w.temp_min 
```

`w.region`是链接区域行，因此可以通过它访问区域模型中的任何属性。因此，如果您的区域模型有`name`，您会这样做`w.region.name`，并且与 . 相同`w.district`。

`w.region.plan`是计划表中的行，该行具有指向区域行的外键，该区域行链接到主键为 1 的天气对象；`w.district.plan`以同样的方式工作。

* * *

> 此外，我必须显示的数据是用于计划的。所以我想从计划到天气。不是从天气来计划的。我不认为我可以去 plan.region.weather.temp_max 因为一个地区会有很多行，我想过滤地区和地区的组合

```
p = Plan.objects.get(pk=1) # get a Plan
p.region.weather_set.all() # all "weathers" for the region for this plan
p.district.weather_set.all() # all "weathers" for the district for this plan 
```

过滤：

```
plans = Plan.objects.filter(region__name='Region 1') # all plans for that region
for plan in plans:
   region_weather = plan.region.weather_set.all()
   district_weather = plan.district.weather_set.all() 
```

* * *

> 如果我有不止一行，有什么方法可以汇总例如温度。即我有两个针对同一地区和地区的天气输入，我想要平均值

是的，请阅读有关[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)的文档。

# c++ - 声明和定义

> ID：13171183
> 
> 赞同：-1
> 
> 时间：2012-11-01T04:57:38.643
> 
> 标签：c++, c

> **可能重复：**
> [定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

我对变量的这两个术语感到非常困惑。在某些书中，它似乎是相同的，但在某些书中，它却完全不同。谁能告诉我，变量或函数的声明是什么意思，变量或函数的定义是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:59:33.970

声明就像告诉机器你想要说的，例如，变量“x”存在，你也可以将它设置为某个东西。

定义一个变量就是将它设置为某种东西。

（可能是错的，我是这么想的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:09:26.940

声明告诉编译器存在某些东西，但不一定提供其代码或值。例如，如果您声明一个函数：

```
void foo(); 
```

你告诉编译器函数的名称，它的参数（在这种情况下没有）和返回类型，以便它可以正确编译对函数的*调用*- 即使尚未提供函数的实际代码。在您的程序的其他地方，可能在不同的源文件中，您提供了一个定义：

```
void foo() {
  std::cout << "Hello, world!" << std::endl;
} 
```

如果您正在定义的事物尚未声明，则定义也可以作为声明。

通常，您将定义放在源文件中，将声明放在头文件中，以便它们可以被包含定义的源文件之外的其他源文件“看到”。但是，在 C++ 中，当您编写一个类时：

```
class Blah {
public:
  void blah();

private:
  int x;
}; 
```

这是类的*定义*，其中包含其成员的*声明*。类定义通常放在头文件中，但成员函数的定义通常不放在头文件中（除了模板和内联函数）。

您可能会发现阅读[此关于编译和链接工作原理的答案](https://stackoverflow.com/a/6264256/226975)会很有帮助。

# javascript - 在 div 中滚动时如何在 jQuery 中使用 scrollTop？

> ID：13171191
> 
> 赞同：5
> 
> 时间：2012-11-01T04:58:42.880
> 
> 标签：javascript, jquery, html, scroll, scrolltop

![在此处输入图像描述](../Images/a83b8138d848e037deaa4ecc2efc61de.png) 左边是我要滚动的内容……它滚动一点然后停止。似乎每次也滚动相同的数量。

当我尝试滚动到的内容位于 div 中时，我正在尝试使用 jQuery 获取 scrollTop 以处理页面加载。当前的实现没有做任何事情

# javascript

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>

<script>
    $(document).ready(function (){
            //$(this).animate(function(){
                $('html, body').animate({
                    scrollTop: $("#test4").offset().top
                     }, 2000);
            //});
    });
</script> 
```

# html

```
<div class="row">
    <div class = "span12">

        <div class = "row">

            <div class = "span2">

                <div style="height:480px;font:12px Georgia, Garamond, Serif;overflow:auto;">

                    <div id = "test1">Test1</div>
                    <div id = "test2">Test2</div>
                    <div id = "test3">Test3</div>
                    <div id = "test4">Test4</div>

                </div>
            </div>

            <div class = "row">
                <div class = "span8">
                    Other content on the page
                </div>
            </div>

        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T08:16:51.103

我已经稍微更改了您的代码，您可以[在此处找到小提琴](http://jsfiddle.net/Ezge8/1/)。

这是我使用的js代码：

```
$('.sss').animate({
    scrollTop: $(".test5").offset().top
}, 2000);​ 
```

这里

```
$('.sss') 
```

是持有侧链的持有人

# c++ - 遍历向量时出现 C++ 分段错误

> ID：13171199
> 
> 赞同：1
> 
> 时间：2012-11-01T04:59:26.873
> 
> 标签：c++, vector, segmentation-fault, fault

我有一个维护整数向量的程序。我有三个函数可以添加一个整数，删除一个整数并检查一个整数是否已经在向量中。问题出在最后一个。

```
vector<int> children;
void CtpTestingApplication::addChild(int child)
{
    for (int i=0; i<children.size(); i++)
    {
    //already a child
    if (children[i]==child)
        return;
    }
    //child not yet recorded
   children.push_back(child);
   cout<<"added child "<<child;
}

void CtpTestingApplication::removeChild(int child)
{
   for (int i=0; i<children.size(); i++)
   {
    //already a child, remove it
    if (children[i]==child)
    {
        children.erase(children.begin()+i);
        cout<<"removed child "<<child;
    }
   } 
   //not recorded, no need to remove
}

bool CtpTestingApplication::isChild(int child)
{
   vector<int>::iterator ic;
   bool result = false;
   for (ic= children.begin(); ic < children.end(); ic++)
   {
     cout<<*ic<<" vs "<<child;
  //     if (child==*ic)
         result = true;
   }
   return result;
} 
```

当我取消注释“if (child==*ic)”时，我总是遇到分段错误，即使打印输出显示向量不为空并且包含预期的整数。

例如，如果注释了 if 语句，我可以看到 1 vs 4、2 vs 4、4 vs 4、12 vs 4

我还尝试使用 children[i] 等进行循环，但无济于事。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:11:06.013

您的循环应该从此改变：

```
 for (ic= children.begin(); ic < children.end(); ic++) 
```

对此：

```
 for (ic= children.begin(); ic != children.end(); ic++) 
```

这不会解决问题，因为使用的容器是一个向量，并且为该容器类定义了向量迭代器之间的差异。但是，首选仍然是一个好习惯，

```
ic != container.end() 
```

因为这适用于缺少该定义的容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:11:57.633

正如 John3136 所指出的，我看到的唯一潜在问题是`removeChild`函数。尝试像这样重写它：

```
void CtpTestingApplication::removeChild(int child)
{
   int i=0; 
   while (i<children.size())
   {         
      if (children[i]==child) {
         children.erase(children.begin()+i);             
         continue;
      }
      i++;
   }        
} 
```

为什么你得到段错误是任何人的猜测。一种可能性是`removeChild()`可以在其他线程中调用，从而使您的迭代器无效`isChild()`。这只有在你使用没有适当互斥的线程时才有可能（在这种情况下你有一个更大的问题:)

# codeigniter - Codeigniter 型号

> ID：13171201
> 
> 赞同：1
> 
> 时间：2012-11-01T04:59:39.840
> 
> 标签：codeigniter

如何在控制器中使用模型的索引功能？

根据 codeigniter 用户指南，我们知道我们可以使用

```
$this->name_of_model->function_of_model(); 
```

在控制器中。在重定向中，我们可以使用

```
redirect('controller_name/function_name'); 
```

如果我们在控制器中使用索引函数，那么我们可以在重定向中使用

```
redirect('controller_name'); 
```

重定向到该控制器。这样我该如何使用

```
$this->name_of_model->function_of_model(); 
```

这种语法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:29:59.810

假设您在控制器索引中调用模型索引

```
Class test_controller extends CI_Controller
{
   function index(){

       $this->load->model('model_name');      
       $this->model_name->model_index();      

   }
} 
```

现在，当您重定向到控制器索引时，模型索引将被自动调用。

编辑：但是，您可以像这样使用它

```
Class test_controller extends CI_Controller
{
   function index(){

       $query = $this->db->get('my_table');
       $data['query_result'] = $query->result();  

   }
} 
```

型号索引是这个

```
function index()
{
  $query = $this->db->get('my_table');
  return $query->result();
} 
```

您应该注意这里没有调用模型索引，因为没有它我们正在做的工作是没有用的模型。所以分离数据库交互是有用的，将它与控制器结合打破了 MVC 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-03T05:48:38.370

```
class User_model extends CI_Model
{
    function __construct()
    {

        parent::__construct();
        $this->load->database();
    }

    function insertrow($data,$table){

        $this->db->insert($table,$data);
    }

    function updaterow($data,$table,$id){
        $this->db->where($id);
        $this->db->update($table,$data);
    }

    function fetchrow($table){

        $query = $this->db->get($table);
        return $query->result();

     }

     function fetchrowedit($tbl_name,$id){

    $query = $this->db->get_where($tbl_name, $id); 

    return $query->result();
    }

    function fetchrowlogin($info,$table){

        $this->db->select('*');
        $this->db->where($info);
        $this->db->from($table);
        $query = $this->db->get();
        if($query->num_rows() > 0){
        $row = $query->row_array();
            return $row;
        }
    }

        function alreadyexits($table,$var){
        $query = $this->db
        ->select('*')
        ->where($var)
        ->get($table)
        ->num_rows();
        return $query;
        }

        function isVarExists($table,$var){
        $query = $this->db
        ->select('*')
        ->where($var)
        ->get($table)
        ->num_rows();
        return $query;
            }

    function messages_list($ids){

        $this->db->where('reciver_id', $ids);
        $this->db->limit(10);
        $this->db->order_by("time", "asc");
        $this->db->from('message_table');
        $query = $this->db->get(); 
        return $query->result();
    }
} 
```

# android - 最后拨出电话持续时间android

> ID：13171204
> 
> 赞同：2
> 
> 时间：2012-11-01T05:00:22.217
> 
> 标签：android, call, calllog

我有一个广播侦听器，它查找任何拨出电话，然后在拨出电话完成后启动服务。事情在服务内，我需要尝试获取最后一次通话时间。我尝试使用查询查询 CallLog.Calls.CONTENT_URI，

```
Cursor s = r.query(android.provider.CallLog.Calls.CONTENT_URI, null, null, null,CallLog.Calls.DATE + " DESC"); 
```

我正在寻找的只是最后一次通话的持续时间。我都试过了，`s.moveToFirst();`还有`s.moveToLast();`。但不知何故，我无法获得与最后一次拨出电话的持续时间相对应的正确值。我尝试获得持续时间，

```
int duration=s.getColumnIndex(android.provider.CallLog.Calls.DURATION);
String Duration=s.getString(duration); 
```

我错过了什么吗？我怎样才能单独获得最后通话时间？因为该服务仅在拨出电话后才启动，所以我不必在此处检查呼叫类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:05:40.727

将字段添加`CallLog.Calls.DURATION`到数组中。

[礼貌](https://stackoverflow.com/questions/3959128/its-possible-to-get-outgoing-call-duration-during-call)

看看这个[教程](http://www.dcpagesapps.com/developer-resources/android/25-android-tutorial-call-logs)

# salesforce - 如何根据销售人员中的条件显示标志

> ID：13171208
> 
> 赞同：0
> 
> 时间：2012-11-01T05:00:53.870
> 
> 标签：salesforce

如何在材料可用性标记为成功时显示绿旗，但在未成功时显示红旗？

```
IMAGE( 
CASE(  Material_availability__c , 
"Success", "/img/samples/flag_green.gif",
  NOT("Success"), "/img/samples/flag_red.gif", 
"/s.gif"), 
"priority flag") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:19:06.460

假设您有一个没有命名空间的帐户，并且您在静态资源中有一个名为 StatusImages 的 zip 文件，其中包含两个文件，passed.png 和 failed.png，您可以在公式字段中像这样使用它们来显示图像而不是文本.

```
CASE( Material_availability__c ,
"Success",IMAGE( '/resource/StatusImages/passed.png' , "OK"),  
IMAGE( '/resource/StatusImages/failed.png' , "ERROR"))        //Default image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:35:45.597

我假设 Material_availability__c 是一个选择列表？

IF( ISPICKVAL(Material_availability__c, 'Success') , IMAGE(/img/samples/flag_green.gif, 'Success') , IMAGE(/img/samples/flag_red.gif, 'Failure'))

# git - 没有 X11 的 gitk

> ID：13171210
> 
> 赞同：5
> 
> 时间：2012-11-01T05:01:02.623
> 
> 标签：git, tcl, gitk

已经 [注意到](https://stackoverflow.com/a/9418800) Tcl/Tk 和 gitk 现在在 Cygwin 下需要 X11。

在此更改之前和之后运行它似乎过于矫枉过正。我非常轻松地使用 gitk，主要坚持简单的命令行 git。我怎么能在没有 X11 的情况下使用 gitk，也许手动安装旧版本的 Tcl/Tk？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T06:29:36.223

您可以`gitk`从[git 的非 Cygwin 安装中](http://msysgit.github.com/)使用，它不依赖于 Cygwin 也不依赖于 X11。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T05:03:49.683

试试`tig`。你会以文本形式得到同样的东西。我经常使用表格`tig --all`。

我也靠`git log --all --oneline --graph --decorate`。我有一个默认`--decorate`为隐含的配置设置，因此在调用该命令时我不需要它。输入“all”通常会让我从历史中得到它`CTRL-R`，所以我不必输入所有这些。

或者如果你想依赖一个窗口系统，`gitk`从`MSysGit`. 您仍然可以使用键盘进行导航，但可能需要使用鼠标，因为有时在 gitk 中很难看到焦点。

# objective-c - 相对于表 1 填充表 2 时索引 1 超出范围

> ID：13171217
> 
> 赞同：1
> 
> 时间：2012-11-01T05:01:52.410
> 
> 标签：objective-c, xcode, uitableview

我希望为 ios 创建一个基本程序，该程序在一个视图中使用数据数组和 2 个 UITableView。我希望第二个 UITableView 由一个数组填充，该数组基于第一个表中所做的选择。我有第二个表的数组数组。当我单击 table1 的第一个单元格时，所需的数据将显示在 table2 中。但是当我点击 table1 的第二个单元格时，我得到了错误。“索引 1 越界”

.m 文件

```
-(void)viewWillAppear:(BOOL)animated{
[super viewWillAppear:animated];
NSString *jsonString = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http:/url.com/technology"] encoding:NSStringEncodingConversionAllowLossy error:nil];
NSString *jsonString1 = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://url.com/experience1"] encoding:NSStringEncodingConversionAllowLossy error:nil];
NSString *jsonString2 = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http:url.com/experirnce2"] encoding:NSStringEncodingConversionAllowLossy error:nil];

SBJSON *parser = [[SBJSON alloc]init];
SBJSON *parser1 = [[SBJSON alloc]init];
SBJSON *parser2 = [[SBJSON alloc]init];

NSDictionary *results = [parser objectWithString:jsonString error:nil];
[parser release], parser = nil;
    NSDictionary *results1 = [parser1 objectWithString:jsonString1 error:nil];
    NSDictionary *results2 = [parser2 objectWithString:jsonString2 error:nil];
    [parser release], parser = nil;
    [parser1 release], parser1 = nil;
    [parser2 release], parser2 = nil;

self.technologyArray = [results objectForKey:@"response"];
self.technologyData = [technologyArray valueForKey:@"technologyname"];
self.experienceArray1 = [results1 objectForKey:@"response"];
self.experienceData1 = [experienceArray1 valueForKey:@"experiencename"];
self.experienceArray2 = [results2 objectForKey:@"response"];
self.experienceData2 = [experienceArray2 valueForKey:@"experiencename"];
experience = [[NSMutableArray alloc]initWithObjects:experienceData1, experienceData2, nil];

}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if (tableView == technologyTable)
return [technologyData count];

else {
return [experience count];
}

}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
// Change UITableViewCellStyle
cell = [[[UITableViewCell alloc] 
         initWithStyle:UITableViewCellStyleSubtitle 
         reuseIdentifier:CellIdentifier] autorelease];
}

    if (tableView == technologyTable)
{

   cell.textLabel.text=[technologyData objectAtIndex:indexPath.row];

} 

if (tableView == experienceTable)
{
cell.textLabel.text = [[experience objectAtIndex:indexPath.row]objectAtIndex:indexPath.row];
[experienceTable reloadData];

}
return cell ;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (tableView == technologyTable)
{

experienceTable = [[experience objectAtIndex:indexPath.row] objectAtIndex:indexPath.row];

selectTechnology.text = [technologyData objectAtIndex:indexPath.row];

self.technologyList.hidden = YES;

}
if(tableView == experienceTable)
{
self.experienceList.hidden = YES;
selectExperience.text = [[experience objectAtIndex:1] objectAtIndex:indexPath.row];
}
[experience release ];

} 
```

.h 文件

```
 {
NSMutableArray *technologyArray;
NSMutableArray *technologyData;
NSMutableArray *experienceArray1;
NSMutableArray *experienceArray2;
NSMutableArray *experienceData1;
NSMutableArray *experienceData2;

NSMutableArray *experience;
}
@property (nonatomic, retain) NSMutableArray *technologyArray;
@property (nonatomic, retain) NSMutableArray *technologyData;
@property (nonatomic, retain) NSMutableArray *experienceArray1;
@property (nonatomic, retain) NSMutableArray *experienceArray2;
@property (nonatomic, retain) NSMutableArray *experienceData1;
@property (nonatomic, retain) NSMutableArray *experienceData2;
@property (nonatomic, retain) NSMutableArray *experience; 
```

# gmail - 无法使用多帐户登录 Google Apps cPanel

> ID：13171218
> 
> 赞同：1
> 
> 时间：2012-11-01T05:01:59.393
> 
> 标签：gmail, google-apps

我为我的 Google Apps 电子邮件和正常的 gmail 地址启用了多帐户登录。当我访问[https://www.google.com/a/cpanel/domain.com](https://www.google.com/a/cpanel/domain.com)时，我可以选择要使用的帐户。我点击我的 Google Apps 电子邮件，然后转到 Google 帐户概览页面...

如何登录 cPanel？我尝试了各种方式，但总是被重定向到 Google 帐户概览页面......我必须使用另一个浏览器才能访问 cPanel，这很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-08T12:54:35.023

我知道这是一个相当古老的查询，但 CPanel 不支持多登录。

但是现在确实如此，因此访问 Admin.google.com 应该允许您使用多个帐户。

# mono - Gtk# 销毁事件

> ID：13171222
> 
> 赞同：3
> 
> 时间：2012-11-01T05:02:07.980
> 
> 标签：mono, gtk, gtk#

在 Gtk# 中，我可以为“destroy”事件连接一个处理程序，但它永远不会被调用。此应用程序从不打印任何内容。Gtk 文档说“destroy”事件只有在设置了某个标志时才会发送，并且还说这个标志是由 Gdk 自动设置的。

这是令人沮丧的，因为它基本上与正常工作的普通 Gtk+ 代码相同。`Application.Quit()`除了听“destroy”事件外，我怎么知道什么时候打电话？

```
using System;
using Gtk;

public class MainWindow {
    public static void Main(string[] args)
    {
        Application.Init();
        Window win = new Window("Test");
        win.Resize(200, 200);
        win.DestroyEvent += new DestroyEventHandler(OnDestroy);
        win.ShowAll();
        Application.Run();
    }

    private static void OnDestroy(object o, DestroyEventArgs args)
    {
        Console.WriteLine("OnDestroy");
    }
} 
```

PS我对“删除”事件不感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T16:32:43.143

gtk-sharp 包装器安装它自己的销毁事件处理程序，该处理程序首先被调用并断开您的处理程序。然而反过来，它提供了一个`Destroyed`事件。您可以使用它，如下所示：

```
using System;
using Gtk;

public class MainWindow {
    public static void Main(string[] args)
    {
        Application.Init();
        Window win = new Window("Test");
        win.Resize(200, 200);
        win.Destroyed += new EventHandler(OnDestroy);
        win.ShowAll();
        Application.Run();
    }

    private static void OnDestroy(object o, EventArgs args)
    {
        Console.WriteLine("OnDestroy");
        Application.Quit();
    }
} 
```

# javascript - JavaScript 无法加载数据时如何显示信息？

> ID：13171228
> 
> 赞同：0
> 
> 时间：2012-11-01T05:02:40.697
> 
> 标签：javascript, error-handling

我一直在制作一个很大的 JavaScript 文件，并且经常遇到错误。为了使错误查找更容易，我已经做到了，如果某个区域已成功加载，则页面会在页面上写入。但是，代码正在更改，因此直到最后我都无法再写入页面。有什么方法可以提供信息，以便我找出错误发生的位置？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:05:26.343

使用[firebug](http://getfirebug.com)查看 javascript 控制台并调试错误。您还可以使用`console.log`变量上的函数将它们的值打印到控制台，如下所示：

```
 console.log(var); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:48:24.043

再次，我同意@Tom。使用： `console.log("something goes here");` 和 firebug 或[Chrome 的开发工具](https://developers.google.com/chrome-developer-tools/)（检查器）可能是最好的方法。

否则，一个不太优雅的方法是使用警报： `alert("something...");`

# android - 通过共享首选项更改字符串数组android中的值

> ID：13171241
> 
> 赞同：0
> 
> 时间：2012-11-01T05:03:41.447
> 
> 标签：android, sharedpreferences, android-preferences, android-spinner, user-preferences

我想更改共享首选项中数组中的值。我们可以在共享首选项中创建一个字符串数组并在我们的代码中使用它吗？当我输入不同的值并希望用户根据用户需要更改值时，这怎么可能。我想在微调器中使用这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:22:50.480

是的，你可以这么做。请参阅此处链接中的 Egor 评论[Put and get String array from shared preferences](https://stackoverflow.com/questions/7965290/put-and-get-string-array-from-shared-preferences)

这几乎就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:18:42.080

您不能在 sharedPrefence 中添加数组。您只能使用[此](http://developer.android.com/reference/android/content/SharedPreferences.html)文档中定义的数据类型。如果您将大量数据放入 sharedPrefence 中，则所需的内存永远不会空闲。所以你可以使用应用程序类..当应用程序被强制停止时，应用程序类的内存将是空闲的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:43:52.347

插入你的价值观，比如

```
registrationPreferencesEditor.putInt("arraylength", a.length);
            for(int i=0;i<a.length;i++)
            {
                registrationPreferencesEditor.putInt("a"+(i+1), a[i]);
            }
            registrationPreferencesEditor.commit(); 
```

检索你的价值观

```
int lengthOfArray = registrationPreferences.getInt("arraylength", 0);
            int b[] = new int[lengthOfArray];
            for(int i=0;i<lengthOfArray;i++)
            {
                b[i] = registrationPreferences.getInt("a"+(i+1), 0);
                Log.e("b"+(i+1),""+b[i]);
            } 
```

在此之前确保你有

```
SharedPreferences registrationPreferences;
SharedPreferences.Editor registrationPreferencesEditor;
int a[]={1,2,3,4,5};
registrationPreferences  = getSharedPreferences("registrationPreferences",
            MODE_WORLD_READABLE);
      registrationPreferencesEditor= registrationPreferences
            .edit(); 
```

# java - 有效地从数组中获取落在某个范围内的元素

> ID：13171245
> 
> 赞同：1
> 
> 时间：2012-11-01T05:04:10.320
> 
> 标签：java, arrays, algorithm

在Java中，如果我想从数组中获取特定范围内的元素，那么最有效的方法是什么？

例如

大批

```
A = [25,32,54,23,76,34]; 
```

我想得到

```
element between 45 and 55. 
```

那就是元素：

```
54 
```

那么获得它的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:35:10.620

如果您要重复搜索数组，那么您最好的选择是对数组进行排序并使用二进制搜索来查找下限和上限。当分摊到足够多的搜索时，这将为您提供 O(log n) 性能。

如果它是一次性搜索，那么除了扫描数组并将每个元素与其他人建议的下限/上限进行比较之外，您最好的方法就是 - 这是 O(n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:10:04.187

你可以试试这样的

```
int dLimit=45, uLimit =55, result[] = new int[A.length],j=0;
for(int i : A){
    if(i>dLimit && i<uLimit)
        result[j++] = i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:18:44.280

我不确定这是否是最有效的，但我会做这样的事情。

```
 int[] rangeTracker = new int[100];
int rangeTrackIndex = 0;
For (int j = 0; j < A.getLength(); j++) {

     if ((A[j] >= 45) && (A[j] <= 55)) {
          rangeTracker[rangeTrackIndex] = A[j];
          rangeTrackIndex++;
}
}
For (int j=0; j < rangeTracker.getLength(); j++) {
     System.out.println(rangeTracker[j]);
} 
```

我的一些语法可能是错误的，这可能是错误的方法，但我只使用 Java 大约 2 个月。此外，我只从事编程工作大约 4 个月。我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T05:22:19.700

它需要最小的 O(n) 复杂度，因为为了知道给定游侠之间有多少元素，我们必须至少遍历所有元素一次，因为有 n 个元素，我们计算 n 次比较，所以复杂度是 O(n)

来到解决方案 AFAIK 。

n<-array.length;

```
for(int i=0;i<n;i++)
{
  if((a[i]<upperLimit) && (a[i]>lowerLimit))
   {
      SOP(a[i]);//or store in temp array based on your requirement
   } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T05:35:43.927

您必须知道数组中有哪些元素才能回答您的查询（a 和 b 之间的元素）。

如果您要回答 n 个这样的查询，那么您可能可以对数组进行排序 (n log n)，然后找到大于或等于 a 的最近元素（a 小于 a 和 b）和小于或的最近元素通过使用二进制搜索 (n log n + n log n) 等于 b，然后检索它们之间的元素。

如果 a 和 b 之间的元素数量很小，您可能会在 n 个查询上实现 O(n log n) 复杂度，使每个查询的平均价值约为 O(log n) 但如果 a 和 b 之间的元素数量为n 的顺序，每个查询将值得 O(n) 复杂度。

# javascript - IE9 等效于 querySelectorAll

> ID：13171247
> 
> 赞同：5
> 
> 时间：2012-11-01T05:04:12.223
> 
> 标签：javascript, internet-explorer, internet-explorer-9, selectors-api

我在 FF 或 Chrome 中没有遇到任何问题，但是 IE9 在这种方法上会出错。我认为我可以使用它，因为它已被证明在这里得到支持：

[http://www.quirksmode.org/dom/w3c_core.html](http://www.quirksmode.org/dom/w3c_core.html)

然而，在实践中似乎并非如此。话虽如此，我可以用什么代替它？

编辑：这是它失败的确切行：

```
var maximize_buttons = document.querySelectorAll(".maximize"); 
```

那是我第一次尝试使用 querySelectorAll()。浏览器版本号为 9.0.8112.16421

编辑（再次）：我已经在两台不同的计算机上验证了这个错误。然而，他们有一个共同点——他们都在 VMware 上运行 Windows 7。这有关系吗？

浏览器模式是 IE9，但文档模式默认设置为 quirks。将其更改为 Internet Explorer 9 标准解决了该问题，但如果怪癖是默认设置，我仍然需要让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T22:49:33.940

您需要使用 IE9 的 html5 文档类型才能使用 querySelectorAll() javascript 方法。doctype 看起来像这样，应该放在网站所有页面的第一行。

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-11T12:37:21.357

正如其他答案所暗示的，这与怪癖与标准模式无关。

它与所谓的“兼容模式”有关。IE9 到 IE11 默认对内网站点使用“兼容模式”，其他站点根据您的设置使用。

要告诉 IE 您的网站实际上使用了 Web 标准，并且它不应该自己蹒跚而行，要么：

1.  更新您的服务器配置以发送`X-UA-Compatible`带有值的标头`IE=Edge`，或者

2.  将其作为标签添加到元素标记`meta`的顶部：`head`

    ```
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
    ```

当然，您也应该有一个 doctype *，*但只是一个 doctype 不会处理（in）Compatibility Mode 问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T23:33:54.363

运行 quirksmode 就像运行非标准的 IE6。

您必须，必须，必须（！）在每个 HTML 页面顶部都有一个 doctype：`<!doctype html>`
每个相关（和许多不相关）浏览器都支持它。
没有它... ...好吧... quirksmode ...

您永远都不想在 quirksmode 中运行任何东西，因为您永远不知道哪种 JS/CSS/html5 支持会突然消失或行为怪异……

所以不要这样做。

# android - 释放（）媒体播放器后没有声音

> ID：13171249
> 
> 赞同：0
> 
> 时间：2012-11-01T05:04:35.110
> 
> 标签：android

我在 Android 应用程序类中创建了一个 SoungMagager 类，因此我可以使用它来管理整个应用程序中的声音。在 SoundManager 中，我有一个 SoundPool 和一个 MediaPlayer 来分别播放一些短的和长的声音。

为了“清理”我，我将 release() SoundPool 和 MediaPlayer 的方法放在 onDestroy() 方法中，并调用 finish() 退出应用程序。

我的问题是，如果我这样做完成（）并立即返回应用程序，我就没有声音了。没有声音池或媒体播放器。

如果我只是按“主页”硬件按钮退出，然后再次回到应用程序，就会有声音。

如果我finish（），然后进入系统应用管理并强制关闭应用程序，然后再次运行应用程序，有声音。

如果我使用 System.exit(0) 而不是 finish()，一切都很好，但我被告知不要那样做。

我怀疑这是因为 Application 类的事情，但我不确定。我应该如何解决这个问题？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:33:18.450

我认为您将对象放入您将要完成的活动`soundpool`中`mediaplayer`所以它不会被破坏。我想你明白了我的意思。

```
public class SoundManager {

    public static SoundPool mSoundPool;
    public static MediaPlayer mMediaPlayer;
      .....
      ....
} 
```

现在在您使用 soundpool 对象的活动中执行以下操作：-

```
 class <your activity> extend Activity{
       @Override
   public void onCreate(Bundle savedInstanceState) {
             SoundManager.mSoundPool = <assign your audio>;
             SoundManager.mMediaPlayer = <assign>;
       }
} 
```

# php - php：如何为给定的id进行追加和追加不起作用？

> ID：13171251
> 
> 赞同：0
> 
> 时间：2012-11-01T05:04:34.877
> 
> 标签：php, javascript, jquery

在我的代码中，我使用 append 函数通过 ajax 调用获取值：

```
type: 'POST',
        url: 'include/LocationService.php?run=getDistrictBoundries',
        data: {
            level : $('#level').val(),
            state : $('#stateId').val()
        },
        dataType: "json",
        success: function (response) {
            $('#distvalue').html('');
            var districts = response.d;
            $.each(districts, function (index, district) {
                $('#distvalue').append('<option value="'+ district.geo_id+'">'+district.dist_name+'</option>');
                console.log("districtname"+districts);
            });
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            $("#error_msg").val(textStatus);
        } 
```

但在上面的代码中：

```
$('#distvalue').append('<option value="'+ district.geo_id+'">'+district.dist_name+'</option>'); 
```

不管用。

所以我需要得到这个ajax调用值。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:51:15.757

在成功功能中试试这个

```
var districts = response.d;
$('#distvalue').empty();

$.each(districts, function (key, data) {
  $('#distvalue').append($("<option></option>").attr("value",key).text(data));
}); 
```

通过检查 json 验证器站点确保您的数据格式正确，如果有效应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:25:27.133

尝试这样的事情

```
 $('#distvalue').append($('<option value="'+ district.geo_id+'">'+district.dist_name+'</option>')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:32:45.860

您没有放入 html 进行选择。没有它，选项值将不会显示。

像这样更改您的成功功能：

```
 success: function (response) {
        $('#distvalue').html('');
        $('#distvalue').append('<select>');

        var districts = response.d;
        $.each(districts, function (index, district) {
            $('#distvalue select').append('<option value="'+ district.geo_id+'">'+district.dist_name+'</option>');
            console.log("districtname"+districts);
        });
    }, 
```

# jquery - Jquery播放/暂停切换与翻转

> ID：13171252
> 
> 赞同：1
> 
> 时间：2012-11-01T05:04:36.763
> 
> 标签：jquery, toggle, rollover

我有一个用于幻灯片播放/暂停按钮的 jQuery 脚本，可在单击时在两个图像之间切换。有没有办法为正在切换的单独图像添加翻转状态？

这是脚本：

```
$(".play").toggle(
function () {
$(this).find("img").attr({src:"images/btn-play.png"});
},
function () {
$(this).find("img").attr({src:"images/btn-pause.png"}); 
}
); 
```

这是网站：[http](http://www.beta.erickdoxey.com) ://www.beta.erickdoxey.com （正在进行中）。上一个和下一个按钮具有我想用暂停/播放按钮实现的翻转状态。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:47:44.310

我的建议是向播放按钮添加一个类，然后在悬停时检测该类。我的意思是：

```
$(".play").toggle(function () {
    $(this).find("img").attr({src:"images/btn-play.png"}).addClass('paused');
}, function () {
    $(this).find("img").attr({src:"images/btn-pause.png"}).removeClass('paused'); 
}); 
```

然后你可以像这样在悬停时检测到它：

```
 if (this).hasClass('paused') {
    $(this).find("img").attr({src:"images/btn-play-hover.png"})
 } else {
    $(this).find("img").attr({src:"images/btn-pause-hover.png"})
 } 
```

您以后也可以进一步将该类用于其他事情。

# coq - 使用 Coq 证明相对数之间的差异

> ID：13171253
> 
> 赞同：1
> 
> 时间：2012-11-01T05:04:50.563
> 
> 标签：coq

你如何证明：`forall m n : Z, m < n -> m -n < O`在 Coq 中？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:44:31.437

如果您只关心证明它，而不关心证明，只需使用 omega：

```
Require Import Omega.

Goal forall m n : Z, (m < n)%Z -> (m - n < 0%Z)%Z.
intros. omega.
Qed. 
```

* * *

如果你必须在练习或家庭作业中证明这一点，如果你依赖一些现有的证明，这并不难。

例如，您可以组合这些家伙：

```
Zminus_diag_reverse
     : forall n : Z, 0%Z = (n - n)%Z

Zplus_lt_le_compat
     : forall n m p q : Z, (n < m)%Z -> (p <= q)%Z -> (n + p < m + q)%Z 
```

肯定有不止一种方法可以做到，如果你使用一些现有的引理，这不是一个很难的目标。

# php - PHP echo 语句中的 JavaScript 函数

> ID：13171262
> 
> 赞同：2
> 
> 时间：2012-11-01T05:06:03.277
> 
> 标签：php, javascript, onclick, echo

我正在尝试在 php echo 语句中使用 javascript 函数。正在使用 showme 和 onclick 函数，并且必须在 showme 函数中传递值。

下面的代码不起作用。

```
 echo"
  <ul>
  <li><a href='javascript:void(0);' onclick='showme('Test','','10.70725','-61.55391','','Tester');' >$id</a></li>
</ul>
  "; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T05:07:49.617

```
echo"
  <ul>
  <li><a href='javascript:void(0);' onclick=\"showme('Test','','10.70725','-61.55391','','Tester');\" >$id</a></li>
</ul>
  "; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T05:08:41.583

所以不要使用 PHP 来回声，只需让它像这样，并`"`在你的周围添加引号`showme()`

```
<ul>
  <li>
    <a href="javascript:void(0);" onclick="showme('Test','','10.70725','-61.55391','','Tester');"><?php echo $id; ?></a>
  </li>
</ul> 
```

编辑：正如你所说，你在一个while循环中运行它，你可以这样做

我假设您正在从数据库中提取数据

```
<?php
  while($blah = mysqli_fetch_array($fetch_blah)) {
?>
<!--HTML Part Goes Here-->
<ul>
  <li>
    <a href="javascript:void(0);" onclick="showme('Test','','10.70725','-61.55391','','Tester');"><?php echo $blah['id']; ?></a>
  </li>
</ul>
<?php
}
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T05:12:33.513

这会做，添加`\" \"`你的 echo ：

```
echo"
  <ul>
  <li><a href='javascript:void(0);' onclick=\"showme('Test','','10.70725','-61.55391','','Tester');\" >$id</a>          </li>
 </ul>
  "; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T05:13:14.313

请避开你的双引号。

```
 echo "
  <ul>
  <li><a href=\"javascript:void(0);\" onclick=\"showme('Test','','10.70725','-61.55391','','Tester');\" >$id</a></li>
</ul>
  "; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T05:09:34.623

为了使事情更易于阅读，请尝试退出 PHP 以显示您的 HTML（而不是使用`echo`来显示它）：

```
?>

<ul>
    <li>
        <a href="javascript:void(0);" onclick="showme('Test','','10.70725','-61.55391','','Tester');" ><?=$id;?></a>
    </li>
</ul>

<?php 
```

这将修复原始代码中的引号转义问题，并使其更易于阅读。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T05:14:28.287

检查转义字符/转义序列 [参考： http: [//php.net/manual/en/regexp.reference.escape.php](http://php.net/manual/en/regexp.reference.escape.php) ]

```
<li><a href='javascript:void(0);' onclick=\"showme('Test','','10.70725','-61.55391','','Tester');\">$id</a></li> 
```

要使用双引号，请使用转义字符 \" 这会导致 -> "

正如其他答案中所建议的那样，简单地回显 $id 而不是整个 html 片段

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T05:15:21.733

```
echo " ...
onclick="showme('Test','','10.70725','-61.55391','','Tester');"><?php echo $id; ?></a>
..."; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-01T05:16:29.770

尝试在 html 中使用引号而不是撇号：

```
$result =<<<TSTSTR
<ul>
<li>
<a href="javascript:void(0);' onclick='showme('Test','','10.70725','-61.55391','','Tester');'">$id</a>
</li>
</ul>
TSTSTR;

echo $result; 
```

# c++ - := vs = 错误：未定义对 qMain(int, char**) 的引用

> ID：13171263
> 
> 赞同：2
> 
> 时间：2012-11-01T05:06:13.550
> 
> 标签：c++, windows, qt, makefile

**Qt 4.6.1**

在以下 .pro 文件中，当我使用该语句时

```
sources = ef.cpp 
```

我收到以下错误：

```
RInside.h: No such file or directory 
```

![在此处输入图像描述](../Images/844dbd1a9f8ac9beae76882eaf2809ff.png)

然后，当我将 = 替换为 := 时，例如：

```
sources := ef.cpp 
```

上面的错误消失了，我得到一个新的错误：

```
error: undefined reference to qMain(int, char**) 
```

![在此处输入图像描述](../Images/df306723f24df7457cf4a9baa51df355.png)

从这里：[https ://stackoverflow.com/a/448939/462608](https://stackoverflow.com/a/448939/462608)

> VARIABLE = value 变量的正常设置 - 在使用变量时递归扩展其中的值，而不是在声明变量时
> 
> VARIABLE := value 通过简单扩展内部值来设置变量-其中的值在声明时扩展。

**我想了解这里发生了什么，以及解决方案是什么。**

**.cpp**

```
#include <RInside.h>
int main(int argc, char *argv[]) 
{
    RInside R(argc, argv);

    R["txt"] = "Hello, world!\n";

    R.parseEvalQ ("cat(txt)");

    exit(0);
} 
```

**.pro**

```
TEMPLATE    = app
TARGET      = 
DEPENDPATH  += .
INCLUDEPATH += .

R_HOME  := 'c:/R-2.15.1'

# Input
sources  = ef.cpp
programs := $(sources:.cpp=)

## include headers and libraries for R
RCPPFLAGS :=        $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config --cppflags)
RLDFLAGS  :=        $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config --ldflags)
RBLAS     :=        $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config BLAS_LIBS)
RLAPACK   :=        $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config LAPACK_LIBS)

## include headers and libraries for Rcpp interface classes
RCPPINCL  :=        $(shell echo 'Rcpp:::CxxFlags()' | $(R_HOME)/bin/R $(R_ARCH) --vanilla 

--slave)
RCPPLIBS  :=        $(shell echo 'Rcpp:::LdFlags()'  | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)

## include headers and libraries for RInside embedding classes
RINSIDEINCL :=      $(shell echo 'RInside:::CxxFlags()' | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)
RINSIDELIBS :=      $(shell echo 'RInside:::LdFlags()'  | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)

## compiler etc settings used in default make rules
CXX        := $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CXX)
CPPFLAGS   := -Wall $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CPPFLAGS)
#CXXFLAGS  := $(RCPPFLAGS) $(RCPPINCL) $(RINSIDEINCL) $(shell $(R_HOME)/bin/R $(R_ARCH) 

CMD config CXXFLAGS)
QMAKE_CXXFLAGS := $(RCPPFLAGS) $(RCPPINCL) $(RINSIDEINCL) $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CXXFLAGS)
LDFLAGS    = -s
QMAKE_LIBS := $(RLDFLAGS) $(RBLAS) $(RLAPACK) $(RINSIDELIBS) $(RCPPLIBS)
CC         := $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CXX) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:28:00.743

这看起来不像 Qt 项目，因此您可能应该禁用与 Qt 库的链接。设置`QT`和`CONFIG`为空：

```
QT =
CONFIG = 
```

另一方面，如果这*是*一个应该链接到 Qt 库的 Qt 项目，那么问题是你正在覆盖重要的变量，比如`QMAKE_LIBS`和`QMAKE_CXXFLAGS`. 使用`+=`，不使用`:=`。另外，使用`LIBS`，而不是`QMAKE_LIBS`。

# rest - 如何在 Heroku 上使用 JAX-RS 找出传入的 RESTful 请求的 IP？

> ID：13171265
> 
> 赞同：30
> 
> 时间：2012-11-01T05:06:45.320
> 
> 标签：rest, heroku, jersey, jax-rs, grizzly

我正在编写基于示例托管在 Heroku 上的 Java RESTful 服务 -> [https://api.heroku.com/myapps/template-java-jaxrs/clone](https://api.heroku.com/myapps/template-java-jaxrs/clone)

我的示例服务是：

```
package com.example.services;

import com.example.models.Time;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/time")
@Produces(MediaType.APPLICATION_JSON)
public class TimeService {

    @GET
    public Time get() {
        return new Time();
    }

} 
```

我的主要是：

```
public class Main {

    public static final String BASE_URI = getBaseURI();

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception{
        final Map<String, String> initParams = new HashMap<String, String>();
        initParams.put("com.sun.jersey.config.property.packages","services.contracts"); 

        System.out.println("Starting grizzly...");
        SelectorThread threadSelector = GrizzlyWebContainerFactory.create(BASE_URI, initParams);
        System.out.println(String.format("Jersey started with WADL available at %sapplication.wadl.",BASE_URI, BASE_URI));
    }

    private static String getBaseURI() 
    {
        return "http://localhost:"+(System.getenv("PORT")!=null?System.getenv("PORT"):"9998")+"/";      
    }

} 
```

我的问题是如何在我的服务中找到请求来自的 IP 地址和端口组合？我在@Context 上阅读了注入 javax.ws.rs.core.HttpHeaders、javax.ws.rs.core.Request 等的内容。但是，不存在传入的 IP 或端口信息。

我知道如果您实现 com.sun.grizzly.tcp.Adapter，您可以执行以下操作：

```
public static void main(String[] args) {
    SelectorThread st = new SelectorThread();
    st.setPort(8282);
    st.setAdapter(new EmbeddedServer());
    try {
        st.initEndpoint();
        st.startEndpoint();
    } catch (Exception e) {
        System.out.println("Exception in SelectorThread: " + e);
    } finally {
        if (st.isRunning()) {
            st.stopEndpoint();
        }
    }
}

public void service(Request request, Response response)
        throws Exception {
    String requestURI = request.requestURI().toString();

    System.out.println("New incoming request with URI: " + requestURI);
    System.out.println("Request Method is: " + request.method());

    if (request.method().toString().equalsIgnoreCase("GET")) {
        response.setStatus(HttpURLConnection.HTTP_OK);
        byte[] bytes = "Here is my response text".getBytes();

        ByteChunk chunk = new ByteChunk();
        response.setContentLength(bytes.length);
        response.setContentType("text/plain");
        chunk.append(bytes, 0, bytes.length);
        OutputBuffer buffer = response.getOutputBuffer();
        buffer.doWrite(chunk, response);
        response.finish();
    }
}

public void afterService(Request request, Response response)
        throws Exception {
    request.recycle();
    response.recycle();
} 
```

和访问

```
 request.remoteAddr() 
```

但我真的很想以一种更结构化的方式分离我的 RESTful API，就像在我的第一个实现中一样。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-01T13:30:17.210

您可以注入[`HttpServletRequest`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)：

```
@GET
@Produces(MediaType.TEXT_PLAIN)
public Response getIp(@Context HttpServletRequest req) {
    String remoteHost = req.getRemoteHost();
    String remoteAddr = req.getRemoteAddr();
    int remotePort = req.getRemotePort();
    String msg = remoteHost + " (" + remoteAddr + ":" + remotePort + ")";
    return Response.ok(msg).build();
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-29T23:01:17.427

正如 Luke 所说，使用 Heroku 时，远程主机是 AWS 应用程序层，因此是 EC2 ip 地址。

“X-Forwarded-For”标题是答案：

```
String ip = "0.0.0.0";
try {
    ip = req.getHeader("X-Forwarded-For").split(",")[0];
} catch (Exception ignored){} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-12T12:14:36.107

基于@user647772 和@Ethan 融合。感谢他们；）

注入 HttpServletRequest：

```
@GET
@Produces(MediaType.TEXT_PLAIN)
public Response getFromp(@Context HttpServletRequest req) {
    String from = _getUserFrom(req);
    return Response.ok(from).build();
}

private String _getUserFrom(HttpServletRequest req) {
    String xForwardedFor = req.getHeader("X-Forwarded-For");
    xForwardedFor = xForwardedFor != null && xForwardedFor.contains(",") ? xForwardedFor.split(",")[0]:xForwardedFor;
    String remoteHost = req.getRemoteHost();
    String remoteAddr = req.getRemoteAddr();
    int remotePort = req.getRemotePort();
    StringBuffer sb = new StringBuffer();
    if (remoteHost != null 
    && !"".equals(remoteHost)
    && !remoteHost.equals(remoteAddr)) {
        sb.append(remoteHost).append(" ");
    }
    if (xForwardedFor != null 
    && !"".equals(xForwardedFor)) {
        sb.append(xForwardedFor).append("(fwd)=>");
    }
    if (remoteAddr != null || !"".equals(remoteAddr)) {
        sb.append(remoteAddr).append(":").append(remotePort);
    }
    return sb.toString();
} 
```

# php - Wordpress 中的 Ajax 请求，无法执行我的自定义函数

> ID：13171266
> 
> 赞同：1
> 
> 时间：2012-11-01T05:06:48.147
> 
> 标签：php, javascript, jquery, ajax, wordpress

我在 wordpress 中`admin-ajax.php`使用 jQuery 向文件发出 ajax 请求：

```
function ajaxSubmit() {
    var FormData = jQuery(this).serialize();    
    jQuery.ajax({
        type: "POST",
        url: "/wp-admin/admin-ajax.php",
        data: FormData, 
        success: function(data) {
            console.log(data);
        }
    });
    return false;
}
$('#form').submit(ajaxSubmit); 
```

这是`functions.php`文件中的代码：

```
function activitysubmitTeamMeetingPt(){
    die(var_dump($_POST, $_GET));
}
add_action( 'wp_ajax_activitysubmitTeamMeetingPt', 'activitysubmitTeamMeetingPt' );
add_action( 'wp_ajax_nopriv_activitysubmitTeamMeetingPt', 'activitysubmitTeamMeetingPt' ); 
```

此外，在表格中，我确实有一个隐藏的属性`action`

```
<input type="hidden" name="action" value="submitTeamMeetingPt" /> 
```

根据代码，所有表单数据都将打印在屏幕上，但这不会发生。而且我已经从萤火虫验证了该`Xhr`请求`admin-ajax.php`正在被触发，但由于某种原因`activitysubmitTeamMeetingPt()`没有被调用/执行，并且 ajax 请求只返回 0 和 http 状态码 200。

现在，我想知道为什么`activitysubmitTeamMeetingPt()`没有被执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:12:39.707

更新，我想通了。隐藏属性`action`应该是：

```
<input type="hidden" name="action" value="activitysubmitTeamMeetingPt" /> 
```

现在它工作得很好。谢谢大家看

# ios - 曲线动画旋转方向？

> ID：13171269
> 
> 赞同：1
> 
> 时间：2012-11-01T05:07:23.440
> 
> 标签：ios, animation, calayer, cakeyframeanimation

在我的应用程序中，我使用以下动画使我的 UIElement 沿着顺时针方向的圆形路径

```
CGMutablePathRef path = CGPathCreateMutable(); 
CGPathAddArc(path, NULL,viewFormsUI.center.x,viewFormsUI.center.y, 
                     88,radianOf(243),radianOf(0), YES); //viewFormsUI is an UIView 
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position"]; 
[animation setPath:path]; 
[animation setDuration:1];
animation.removedOnCompletion = YES;
animation.fillMode = kCAFillModeForwards; 
[animation setAutoreverses:NO];
CFRelease(path); 
[btnRefreshUI.layer addAnimation:animation forKey:@"curveAnimation"];
                             //btnRefreshUI is an UIButton 
```

`radianOf`是将角度转换为弧度的函数（只返回 M_PI*(angle/180) 的值）

但问题是 UIElement 正在逆时针方向旋转。我在我的代码中找不到错误，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T12:14:05.973

CGPathAddArc（路径，NULL，viewFormsUI.center.x，viewFormsUI.center.y，88，弧度（243），弧度（0），**是**）；

尝试将**YES**更改为**NO**

CGPathAddArc（路径，NULL，viewFormsUI.center.x，viewFormsUI.center.y，88，弧度（243），弧度（0），**否**）；

这是 - 顺时针布尔

# html - 使用 Twitter Bootstrap 使网站具有响应性

> ID：13171273
> 
> 赞同：0
> 
> 时间：2012-11-01T05:08:03.687
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我已经在一个网站上工作了一段时间，并且大部分网站都建立在 twitter 引导程序上。该站点对于大于 900 像素但小于 900 像素的浏览器看起来很棒，但列开始重叠并且看起来很糟糕。我想知道是否有任何建议可以防止这种重叠，例如 CSS 选项和一些 HTML 工作。它发生在很多领域，但这里是一个例子。我知道这个有一些麻烦，因为我将宽度设置为比列宽，但这是它看起来最好的方式。

```
<div class="row">
        <span class="span8">
            <h2>Some Title!</h2>
            <ul>
                <li>stuff here</li> 
                <li>I have some stuff here</li>
            </ul>
            <div class="alert alert-warning center-it">
                You can share if you <a href="/login">login or register</a>
            </div>  
            <br>
        </span>

        <form method="get">
            <span class="span4">
                <input type="search" placeholder="Search for the location" style="width:300px; height: 30px;" class="pull-right" name="location" size="55" /><br><br><br>
                <span class="pull-right">
                    <h4>Within: 
                        <select name="radius">
                            <option value="25">25 miles</option>
                            <option value="50">50 miles</option>
                            <option value="100" selected>100 miles</option>
                            <option value="200">200 miles</option>
                            <option value="400">400 miles</option>
                        </select>
                    </h4>
                    </span>
                    <br><br><br>
                    <input class="btn pull-right" type="submit">
            </span>
        </form>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:01:24.407

下载*bootstrap.css*和*bootstrap-responsive.css*，将它们放在*bootstrap*目录下并尝试以下代码：

```
<!DOCTYPE html>
    <html lang="en"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link href="bootstrap/bootstrap.css" rel="stylesheet">
     <link href="bootstrap/bootstrap-responsive.css" rel="stylesheet">
     </head>

      <body>
       <div class="row">
            <span class="span8">
                <h2>Some Title!</h2>
                <ul>
                    <li>stuff here</li> 
                    <li>I have some stuff here</li>
                </ul>
                <div class="alert alert-warning center-it">
                    You can share if you <a href="/login">login or register</a>
                </div>  
                <br>
            </span>

            <form method="get">
                <span class="span4">
                    <input type="search" placeholder="Search for the location" style="width:300px; height: 30px;" class="pull-right" name="location" size="55" /><br><br><br>
                    <span class="pull-right">
                        <h4>Within: 
                            <select name="radius">
                                <option value="25">25 miles</option>
                                <option value="50">50 miles</option>
                                <option value="100" selected>100 miles</option>
                                <option value="200">200 miles</option>
                                <option value="400">400 miles</option>
                            </select>
                        </h4>
                        </span>
                        <br><br><br>
                        <input class="btn pull-right" type="submit">
                </span>
            </form>
        </div>

    </body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:14:06.200

我遇到了同样的问题。正如您在对[Bootstrap 的实时网格示例](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)的评论中看到的那样：“*在 767px 视口以下，列变得流畅并垂直堆叠*”。恐怕您（我们）对此无能为力。

第一次，我也印象很深。如果我正在构建一个带有左侧（和/或）右侧边栏的网格系统，我希望左右侧边栏是左右的，而不是堆叠到主列的顶部和底部。但是，在重新考虑这个想法之后，我同意妥协，这就是网格/流体网格系统在 Bootstrap 中的工作方式。Bootstrap 是最好的，或者是响应式设计的最佳框架之一，所以我认为，我们必须接受它的工作原理，而不是试图让轮子更像样方，对吧？

我为您看到的唯一选择是退出基于列的布局。或者接受使用它时，您的列将重叠并垂直堆叠在小视口上。

如果您正在设计一个移动应用程序，那么有某种解决方案，您可以强制您的应用程序仅在横向模式下工作，并在那里有您设计它们的侧边栏。但是，当您处理移动网站时，我看不到您可以做的更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T18:15:50.653

如果理解正确，您的输入元素和其他 div 是重叠的。如果这是您遇到的问题，请在输入元素和 div 上设置 span* 类值。此外，span 元素不应用作其他 HTML 的容器。

这个快速通过对我来说看起来更好：

```
<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <link href="resources/css/bootstrap.css" rel="stylesheet"/>
 </head>

  <body>
   <div class="row">
        <div class="span8">
            <h2>Some Title!</h2>
            <ul>
                <li>stuff here</li> 
                <li>I have some stuff here</li>
            </ul>
            <div class="alert alert-warning center-it span6">
                You can share if you <a href="/login">login or register</a>
            </div>  
            <br/>
        </div>

        <form method="get">
            <div class="span4">
                <input type="search" placeholder="Search for the location" class="pull-right span4" name="location" size="55" />
                <br/><br/><br/>
                <div class="pull-right">
                    <h4>Within: 
                        <select name="radius">
                            <option value="25">25 miles</option>
                            <option value="50">50 miles</option>
                            <option value="100" selected="selected">100 miles</option>
                            <option value="200">200 miles</option>
                            <option value="400">400 miles</option>
                        </select>
                    </h4>
                </div>
                <br/><br/><br/>
                <input class="btn pull-right" type="submit"/>
            </div>
        </form>
    </div>

</body></html> 
```

# java - Eclipse-如何从 lib/jars 文件夹中包含 lib？

> ID：13171279
> 
> 赞同：0
> 
> 时间：2012-11-01T05:08:39.090
> 
> 标签：java, eclipse, import, jar

所以我的 Ivy 解析器设置为将内容分解为 type/name.jar 但这意味着当我去导入某些东西时，它似乎看不到它，因为它显然是在 /lib 而不是 /lib/jars 中查找导入

如何更改类路径以默认查看 /lib/jars 而不是其他内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:22:36.003

选择

`Project -> Properties -> Java Build Path`

从您的菜单中并从您的 lib/jars 文件夹中添加库

![构建路径](../Images/969523fafad6f70b95c63e681c4b5d1b.png)

# cakephp - 为什么 PHP 中 foreach 中的变量引用工作方式不同？

> ID：13171282
> 
> 赞同：0
> 
> 时间：2012-11-01T05:08:54.947
> 
> 标签：cakephp, foreach, pass-by-reference

在“foreach”循环中引用变量时遇到一些问题。

这是我的 CakePHP 代码片段： http: [//pastebin.com/s7qtYahA](http://pastebin.com/s7qtYahA)

第一个代码为相同数量的内部“foreach”循环迭代分配双重分配。

但是第二个代码一切正常。谁能澄清一下扭曲..？提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:17:19.817

因为 $values 已使用 array() 重置/清除

```
<?php
foreach($fields as &$field){
        $fieldValues = $this->controller->DomainFormFieldValue->find('all', array('conditions' => array('domain_form_field_id' => $field['DomainFormField']['id'])));
        foreach($fieldValues as $fieldValue){
                $field['DomainFormFieldValue'][] = $fieldValue['DomainFormFieldValue'];
        }
}
unset($field);
?>

2nd code:
<?php
foreach($fields as &$field){
        $fieldValues = $this->controller->DomainFormFieldValue->find('all', array('conditions' => array('domain_form_field_id' => $field['DomainFormField']['id'])));

        $values = array(); /* Array has been resetted */ 

        foreach($fieldValues as $fieldValue){
                $values[] = $fieldValue['DomainFormFieldValue'];
        }
        $field['DomainFormFieldValue'] = $values;
}
unset($field);
?> 
```

# php - 根据变量值将数据发送到不同的表

> ID：13171283
> 
> 赞同：2
> 
> 时间：2012-11-01T05:08:56.063
> 
> 标签：php, mysql

我的mysql数据库上有一个名为“wifi”的表和另一个名为“bluetooth”的表我有一个来自表单的$string如果字符串包含“wifi”我想将$tbl_name=设置为“wifi”，否则设置它到“蓝牙”然后将数据发送到适当的表我还没有找到任何例子，我做对了吗？是的，我是新人:)

我正在这样做：

```
$xplatform=$_POST['platform'];
echo "made_variables ok";
// Insert data into mysql
//ifstatement decides which table to insert into
if(preg_match('/wifi/',$xplatform))
{
$tbl_name='wifi';
}
else 
{
$tbl_name='bluetooth';
};
$sql="INSERT INTO $tbl_name`(`field1`,`field2`,`f3`)
VALUES('$_POST[numberlat]','$_POST[numberlng]','$_POST[name]','$_POST[website]','$_POST
[message]','$_POST[radius]','$_POST[email]','$_POST[platform]')";
$result=mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:11:31.610

用这个：

```
if($_POST['string'] == 'wifi') {
  $tbl_name = 'wifi';
} else {
  $tbl_name = 'bluetooth';
} 
```

使用它而不是`preg_match()`因为`preg`PHP 中的函数非常昂贵。

# javascript - 在 Titanium SDK 上向动态生成的滑块添加事件

> ID：13171286
> 
> 赞同：0
> 
> 时间：2012-11-01T05:09:07.413
> 
> 标签：javascript, dom-events, titanium, titanium-mobile

我正面临这个问题，我正在从一组项目（字符串）动态生成滑块，我使用一个对象动态创建变量，然后将一个事件侦听器添加到我刚刚创建的变量中，但它不会工作。

`itemsObject[labelValue]`当检测到更改事件时，它没有更改其文本值的变量 。

```
var items = ['Love',
        'Angry',
        'Jealous',
        'Happiness',
        'Understanding'];

//all the controls on this view                 
var itemsObject = {};

var scrollView = Titanium.UI.createScrollView({
    contentWidth:'auto', 
    contentHeight:'auto', 
    top:0, 
    showVerticalScrollIndicator:true, 
    showHorizontalScrollIndicator:false,
    touchEnabled: true 
}); 

var viewInsideScrollView = Ti.UI.createView({ 
    width:'310dp', 
    height:'auto', 
    top:0,
    touchEnabled:false 
}); 

scrollView.add(viewInsideScrollView);

var fromTopItem  =30,
    fromTopSlider=50,
    fromTopLabelValue =25;

for(i in items){

    var label = items[i] + 'Label';
    //item name
    itemsObject[label] = new Ti.UI.createLabel({
        text: items[i],
        color: '#ffffff',
        top:fromTopItem,
        height:'auto',
        width:'auto'
    });

    fromTopItem+=70;

    var slider = items[i] + 'Slider';

    //slider control
    itemsObject[slider] = Titanium.UI.createSlider({
        top:fromTopSlider,
        min: 0,
        max: 5,
        minRange: 0,
        maxRange:5,
        width: '95%',
        value: parseInt(Math.random() * (5 - 0) + 0) //values from 0 to 5
    });

    fromTopSlider+=70;

    var labelValue = items[i] + 'LabelValue';

   //value selected
   itemsObject[labelValue] =  new Ti.UI.createLabel({
        text: itemsObject[slider].value,
        color: '#ffffff',
        top:fromTopLabelValue,
        left:285,
        height:'auto',
        width:'auto',
        font:{
            fontSize:24,
            fontWeight: 'bold'
        }
    });

    fromTopLabelValue+= 70;

    //listener
    itemsObject[slider].addEventListener('change', function(e){
        itemsObject[labelValue].text = parseInt(e.value);
    });

//adding to the view
    viewInsideScrollView.add(itemsObject[label]); 
    viewInsideScrollView.add(itemsObject[labelValue] );
    viewInsideScrollView.add(itemsObject[slider] );

}

self.add(scrollView); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:50:20.617

我解决了它，这是一个范围问题，所以我将控件创建放在一个函数中，然后用循环调用该函数。

# git - 从终端 git clone，然后将内容移动到非空文件夹

> ID：13171288
> 
> 赞同：2
> 
> 时间：2012-11-01T05:09:18.633
> 
> 标签：git, bash, git-clone

我正在尝试创建一个工作流，在其中创建本地项目，根据项目名称自动创建远程 bitbucket 存储库，然后将该存储库克隆到我正在使用的本地文件夹中。问题是，您无法克隆到包含文件的文件夹中。到目前为止的解决方法是克隆到一个文件夹中，然后将内容移动到我的工作目录中。

这是我到目前为止不起作用的：

```
git clone https://U:P@bitbucket.org/user-account/{project_name}.git &  mv {project_path}/{project_name}/.git {project_path}/../../ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:30:43.507

几个问题：

*   多个相互依赖的命令应该用 分隔`&&`，而不是`&`
*   您正在克隆到当前目录，但从下面移动`{project_path}/`
*   您正在移动到`{project_path}/../../`，这是从 where 向上的两个目录`{project_path}`。它是否正确？

这应该可以实现您的意图：（`.git`将链接到 bitbucket 的内容放入您的本地文件夹中。）

```
git clone https://U:P@bitbucket.org/user-account/{project_name}.git --no-checkout tmp
mv tmp/.git {path_to_your_local_folder}/
rmdir tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:44:44.260

您如何“自动制作 bitbucket 存储库”？

正常的工作流程是通过他们的站点创建一个 bitbucket 存储库。现在您无需克隆即可完成其余步骤。

```
git init
cat > .gitignore # add the patterns you don't want tracked
git add -A
git commit -m "initial commit"
git remote add origin <the url to your bitbucket repo>
git push origin master 
```

# iphone - 为 CALayer 字体设置点

> ID：13171294
> 
> 赞同：2
> 
> 时间：2012-11-01T05:09:43.457
> 
> 标签：iphone, objective-c, xcode, ipad, calayer

我将核心文本用于`CALayer`. 改变每一层的颜色很容易，但我想要这种类型的层：

![在此处输入图像描述](../Images/a93886b3468370edd10a52d4e51dc66e.png)

如何在中的文本下设置点`CALayer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:37:51.680

编辑::我部分错了。CATextLayer 可以以 CTAttributedString 的形式绘制富文本。这是 NSAttributedString，其中所有属性都由它们的 CoreText kCTAttribute 常量标识。

* * *

错误（我的意思是.. 可行但不需要）:: 我会使用自定义 calayer。catextlayer 无论如何都无法绘制富文本。在那里覆盖 dawInContext 并自己绘制属性字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:13:00.497

我得到了解决方案，我的设计师创建了一个新的自定义字体来解决这个问题，我们将点替换为星，但是字符和星不是不同的颜色，两者在我的项目中的自定义字体中都是相同的颜色 ![在此处输入图像描述](../Images/9691dc5503c6e5c2668708ff4a8bbf9f.png)

# c# - 无法在中继器内的文本框中捕获下拉选择的值

> ID：13171298
> 
> 赞同：0
> 
> 时间：2012-11-01T05:10:31.710
> 
> 标签：c#, asp.net

我有一个`DropDownList`内部中继器，每当更改所选文本时，我都必须在其中显示它，`TextBox`但`Object reference not set to an instance of an object`出现错误

```
protected void Ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList ddl   = (DropDownList)  sender;
    RepeaterItem item  = (RepeaterItem)  ddl .NamingContainer;
    TextBox txt        = (TextBox) item.FindControl("TextBox4");
    txt.Text           = ddl.SelectedItem.Text;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:13:58.057

只需启用 Ddl 下拉列表 autopost back 属性为 true 并添加以下代码行：

```
protected virtual void RepeaterItemCreated(object sender, RepeaterItemEventArgs e)
{
    DropDownList MyList = (DropDownList)e.Item.FindControl("ddl");
    MyList.SelectedIndexChanged += ddl_SelectedIndexChanged;
}

protected void Ddl_SelectedIndexChanged(object sender, EventArgs e)
 {
     RepeaterItem item  = (RepeaterItem)  Page.FindControl("repeatorid");
     TextBox txt        = (TextBox) item.FindControl("TextBox4");
     txt.Text           = ddl.SelectedItem.Text;     
 } 
```

# security - 移动Web应用程序开发的标准是什么？

> ID：13171300
> 
> 赞同：1
> 
> 时间：2012-11-01T05:10:47.820
> 
> 标签：security, jquery-mobile, mobile, web

我作为移动团队的开发人员工作。到目前为止，我们已经在windows mobile和android平台上开发了许多navite移动应用程序。我们的分支机构在过去 2 年里已经发展壮大，我们没有多少员工可以合作。所以我们找到了一个涵盖无平台应用程序开发的解决方案。因此，我们将通过基于 Web 的移动应用程序来实现。WCF HTTP 服务、日志记录端、数据库、ssl 证书等已为此做好准备。我的问题：

1.  移动 Web 应用程序的安全**基础**是什么。
2.  是否可以在任何 ABC 代手机上支持运行**HTML5的移动浏览器？**
3.  用于移动设备的 jquery 库（jquery mobile 等）对此是否足够安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:45:33.680

您或您的团队成员是否看过 OWASP（开放 Web 应用程序安全项目）wiki？他们是一个专门研究 Web 应用程序安全以及一般信息安全（策略、编程、网络身份验证）的 IT 安全利益集团

*   [https://www.owasp.org/index.php/Cheat_Sheets](https://www.owasp.org/index.php/Cheat_Sheets)

他们为**fuzzing**提供了各种 FOSS 资源，另外还提供了各种密集、简洁的备忘单，我发现它们对我自己的追求很有帮助。祝你好运。

尤其是：

*   [https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet](https://www.owasp.org/index.php/HTML5_Security_Cheat_Sheet)
*   [https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)
*   [https://www.owasp.org/index.php/Session_Management_Cheat_Sheet](https://www.owasp.org/index.php/Session_Management_Cheat_Sheet)

如果您使用的是 SQL 后端，请务必清理您的输入并使用准备好的语句（朋友不要让朋友忘记 SQLi）

*   [https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

# java - 循环遍历 java BigInteger 中的各个位

> ID：13171301
> 
> 赞同：0
> 
> 时间：2012-11-01T05:10:53.627
> 
> 标签：java, cryptography, bit-manipulation, biginteger

我正在尝试为加密分配实现一些蒙哥马利数学代码；除了需要将 BigInteger 中的每个单独的位与 One 进行比较的步骤之外，我的大部分工作都在工作。

我从第 4 步开始使用的数学算法是

```
for i = k - 1 down to 0 do
xBar = MonPro(xBar, xBar)
if e[i] = 1 then xBar = MonPro(MBar, xBar) 
```

i 只是一个索引，k 是 BIgInteger 中的位数，b 是指数。我的尝试是：

```
for(int i = n.bitLength() - 1; i > 0 ; i--) {
    xBar = monPro(xBar, xBar, r, nPrime, n);
    if (n.testBit(i) == true)
         xBar = monPro(mBar, xBar, r, nPrime, n);
}
return monPro(xBar, BigINteger.ONE, r, nPrime, n); 
```

monPro 是一个绝对有效的辅助函数。同样，在该代码片段之前省略的步骤肯定有效。所以主要问题是，我如何按位迭代 BigInteger？除非我对 e[i] 有误，请参见下文。

在过去的一段时间里，我已经对此进行了大量的阅读，而关于实际实现的资源很少。一些关于这个主题的数学论文纯粹是神秘的。

我也不确定是上面的 e[i] 。在书中，它是e，它的下面有一个小i，同样的方式Log2通常将2写成它下面的一个小数字。谁能澄清一下？

我已经尝试将 BigInteger 转换为以 2 为基数的字符串，并从中制作一个 char 数组并与 1 进行比较。我还尝试了 BigInteger.toString(2) 来制作一个以 2 为基数的字符串，并使用 charAt[i] == 1 循环遍历该字符串。

我确信 e[i] 上面的所有步骤都是正确的，因为我已经用很多不同的值检查了它们。

如果我在 E[i] 方面偏离了轨道，那么有人可以解释它的实际含义吗？如果没有，有人能指出任何错误或轻微的方向吗？

这是一项家庭作业，因此请不要列出除片段之外的任何代码。

任何方向或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:48:36.480

```
for(int i = n.bitLength() - 1; i > 0 ; i--) { ... } 
```

这将错过第 0 位（因为当`i==0`循环终止时。）
尝试使用`>=`而不是`>`：

```
for(int i = n.bitLength() - 1; i >= 0 ; i--) { ... } 
```

或者，如果您使用的是 Java 7*并且*您知道这`n`是肯定的，那么您可以将其转换为 a`BitSet`并遍历其 '1' 位：

```
static void showBitsOf(BigInteger n) {
    if (n.compareTo(BigInteger.ZERO) < 0) {
        throw new IllegalArgumentException("n must not be negative");
    }
    BitSet bs = BitSet.valueOf(n.toByteArray());
    for (int i = bs.nextSetBit(0); i >= 0; i = bs.nextSetBit(i+1)) {
        System.out.println(i);
    }
} 
```

# java - 使用 java swing 的桌面应用程序的兼容性问题

> ID：13171320
> 
> 赞同：1
> 
> 时间：2012-11-01T05:12:52.313
> 
> 标签：java, swing, desktop

我创建了一个 java 桌面应用程序，其中 UI 是使用 swing 中的布局管理器设计的。UI 在我的显示器（18.5 英寸）中显示良好。但是，如果我尝试在较小的屏幕（14 英寸）中查看 UI，布局保持不变，但标签/文本等内容不会调整大小。文本被破坏（后跟...）并且不可读。有没有办法根据屏幕大小调整内容的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:20:52.823

您需要定义或获取面板并添加所有组件，如标签、文本字段等都设置在面板中，并且此面板添加到框架中，然后所有组件设置在其特定位置和文本不会损坏。
或者还设置固定面板大小，以便帮助您在不同屏幕上设置相同大小的应用程序。

# windows - 将多线程网络服务器从 unix 移植到 windows

> ID：13171324
> 
> 赞同：1
> 
> 时间：2012-11-01T05:13:33.047
> 
> 标签：windows, multithreading, sockets, winsock2

我正在努力将一些相对简单的网络代码从 unix 移植到 Windows。

简而言之，有一个管理所有网络流量的网络线程。这个单线程`poll()`大部分时间都位于内部（我已经将其转换为`select()`, 在 Windows 上），网络线程仅在有传入网络数据时才唤醒。当客户端命令到达时，网络线程将命令触发到工作线程以实际在后端执行工作，然后返回侦听更多传入命令。命令是异步的——多个命令可以在一个套接字上输入，一个接一个接一个。在任何时候，单个连接上都可能有数十个未完成的命令，所有命令都在不同的工作线程中处理。

问题在于，当工作线程想要发送响应数据时，网络线程可能`poll()`在工作线程试图发送其结果时在内部处于休眠状态。网络线程必须等待`poll()`超时（或接收到另一个数据包）才能注意到有新的出站数据排队等待发送。

在 unix 下，我通过在被监视的描述符中包含一个管道来处理这个问题`poll()`，当工作线程有出站数据要发送时，它还会将一个字节的数据写入管道以唤醒网络线程。但是 WinSock 似乎只支持等待套接字，所以这种方法在 Windows 中对我不起作用。有什么方法可以让我使用 WinSock 在 Windows 上挽救这个体系结构（这样我就可以在不同平台之间共享大部分代码），或者除了编写用于 Windows 的自定义网络服务器实现之外别无选择？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:27:55.207

只有两种可能性，并且都不需要您提出的解决方案：

1) 您已经尝试在此连接上发送数据并且操作系统的发送队列已满。在这种情况下，不需要中止`select`or `poll`。无论如何，你现在不能在连接上写，你会尽快退出`select`或`poll`自动退出。

2) 您当前没有尝试在此连接上发送数据。在这种情况下，也不需要中止`select`or `poll`。现在只需在工作线程中写入数据。（socket是非阻塞的吧`select`称呼）。

你真的不应该`select`在 Windows 上使用。这是一个可憎的行为，仅作为兼容性的粗略黑客提供。如果您计划“真正”支持 Windows，则不应将其设为二等舱。网络 I/O 确实必须是特定于平台的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T05:04:29.320

如果您使用 IO 完成端口和发布的读取缓冲区，而不是`select`在 Windows 上使用，您将获得明显更好的结果。在 IOCP 模型下，可以使用`PostQueuedCompletionStatus`API 与为 IOCP 提供服务的线程进行通信。

# c# - 具有公共无参数构造函数的 Object 类有什么好处？

> ID：13171326
> 
> 赞同：3
> 
> 时间：2012-11-01T05:13:50.237
> 
> 标签：c#, object, abstract-class, default-constructor

一段时间以来，我一直在尝试确定为什么`Object`该类有一个公共的、无参数的构造函数，或者实际上，为什么它没有被标记`abstract`。

我看不到有必要（明确）调用的公共构造函数的合理情况`Object`；我们只对派生类型的构造函数感兴趣。

我理解需要在 中提供一个默认构造函数`Object`，以便为每个其他人提供`Type`一个可以隐式或显式调用的默认构造函数。当然，这个默认构造函数只需要标记为`protected`，不是吗？

我见过人们在线程同步中构造“空对象”；但是在这种情况下锁定“真实对象”不是更正确吗？

同样，由于`Object`类公开的功能仅对派生类型有用（或静态调用），为什么它不是抽象类？这似乎是一个更好的设计，而不是让程序员觉得它可以自己有意义地实例化的类。

我怀疑答案可能与 CLR 的内部工作有关，但我想知道为什么有必要`Object`拥有一个公共构造函数，以及是否有任何原因不能标记它`abstract`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:27:59.730

这确实可能与线程同步有关。请参阅[http://msdn.microsoft.com/en-us/library/ms173179.aspx](http://msdn.microsoft.com/en-us/library/ms173179.aspx)

微软使用的事实

```
private System.Object lockThis = new System.Object(); 
```

在他们自己的例子中告诉我，在他们看来，仅仅为了同步目的而制作一个新对象是完全正确的。

此外，Java 在他们的同步示例中允许完全相同的东西，因此微软的开发人员可能只是“效仿”了看起来像是让语言表现的标准方式。

当然，CLR 中也可能存在一些秘密的技术原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:30:58.403

我能想到为什么 Object 不应该被抽象化，以及它的默认构造函数用于 CLR 内部功能的原因之一是发生装箱和拆箱时。

检查[http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)

此外，线程同步不必使用“真实”对象，因为使用对象的目的是获取锁（一旦线程获取锁，其他所有人都必须等待它释放），而不是锁定对象本身。

为了论证，如果线程对真实对象不感兴趣（可能是它在做一些整数操作），那么它应该使用一个用默认构造函数创建的空对象。

# matlab - 无 FFT 的 DCT 2D

> ID：13171329
> 
> 赞同：2
> 
> 时间：2012-11-01T05:13:58.320
> 
> 标签：matlab, fft, dct

我正在尝试在 Matlab 中实现 DCT（离散余弦变换），但不使用快速傅里叶变换，只需使用下一个公式： ![在此处输入图像描述](../Images/0961db4dcd3eff5d251c8f35107ab831.png)

我知道这可能效率低下，但这样我就会知道它是如何工作的。

首先，我将灰度图像划分为 8x8 块，然后将公式应用于每个块。

```
for i=1:8:h
    for j=1:8:w
        dctMatrix(i:(i-1)+block,j:(j-1)+block) = dctII(img(i:(i-1)+block,j:(j-1)+block), block);
    end
end 
```

我的**dctII**函数如下所示：

```
 function [newB] = dctII(segmento, b)
    [h w] = size(segmento);
    segmento = double(segmento);
    newB = zeros(b,b);
    for u=0:h-1
        for v=0:w-1
            if u == 0
                Cu = 1/sqrt(2);
            else
                Cu = 1;
            end
            if v == 0
                Cv = 1/sqrt(2);
            else
                Cv = 1;
            end
            sumRes = summation(segmento,u,v,b);
            dct = (1/4)*Cu*Cv*sumRes;
            segmento(u+1,v+1) = dct;
        end
    end
    newB = segmento;
end 
```

我还创建了一个求和函数以使事情更具可读性（至少对我而言）。

```
function [sum] = summation(segmento,u,v,b)
    [h w] = size(segmento);
    sum = 0;
    for x=0:h-1
        for y=0:w-1
            sum = sum + (double(segmento(x+1,y+1))*cos((((2*x)+1)*u*pi)/(2*b))*cos((((2*y)+1)*v*pi)/(2*b)));
        end
    end
end 
```

问题是我的算法的结果与 Matlab 预建函数**dct2**的结果不同。也许我根本没有得到 DCT 算法。你知道我做错了什么吗？我知道所有这些嵌套循环都会严重影响性能，但我无法想象如何在不使用 FFT 的情况下解决这个问题。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:46:03.340

已经解决了！

我的结果与 Matlab 预建函数 dct2 不同，因为该函数不像我那样考虑 8x8 块划分，因此矩阵不相等。

我还对我的代码做了一些修改，我读到在处理像素值之前，您需要对每个值减去 128 才能在 [-128, 127] 范围内工作。这是我的代码：

```
function [newB] = dctII(segmento, b)
    [h w] = size(segmento);
    segmento = double(segmento) - 128;
    newB = zeros(b,b);
    for u=0:h-1
        for v=0:w-1
            if u == 0
                Cu = 1/sqrt(2);
            else
                Cu = 1;
            end
            if v == 0
                Cv = 1/sqrt(2);
            else
                Cv = 1;
            end
            sumRes = summation(segmento,u,v,b);
            dct = (1/4)*Cu*Cv*sumRes;
            newB(u+1,v+1) = dct;
        end
    end
end

function [sum] = summation(segmento,u,v,b)
    [h w] = size(segmento);
    sum = 0;
    for x=0:h-1
        for y=0:w-1
            sum = sum + (double(segmento(x+1,y+1))*cos(((2*x)+1)*u*pi/(2*b))*cos(((2*y)+1)*v*pi/(2*b)));
        end
    end
end 
```

效率不是很高，但它是公式的实现。希望有帮助

# javascript - 如何隐藏 div 并禁用里面的链接？

> ID：13171330
> 
> 赞同：0
> 
> 时间：2012-11-01T05:14:03.060
> 
> 标签：javascript, jquery, css, hide, hyperlink

我有一个`<div>`带有链接的链接，另一个`<div>`位于第一个下方。

我希望第一个消失，这样：

*   第二个`<div>`不动。所以jQuery函数`.hide()`不是我想要的。
*   链接在第一个 div 中变为非活动状态。

是否可以使用 javascript 或 jQuery 来做到这一点？

PS：如果不可能，我对其他选项感兴趣：

*   第一个`<div>`隐藏。
*   第二个`<div>`逐渐移动。

谢谢，

可乐

编辑 2：

您可以查看此文件[http://jsfiddle.net/XKMEp/5/](http://jsfiddle.net/XKMEp/5/)以了解我尝试执行的操作。

编辑：这是我的尝试

```
$("#div1").click(function() {       
    /*actus.fadeOut('slow');*/
    actus.fadeTo(1000,0).delay(1001).style.visibility = 'hidden';
    $('input,textarea,select,a', '#div1').attr("disabled", true);
}); 
```

即使这样也行不通：

```
$("#div1").click(function() {       
    /*actus.fadeOut('slow');*/
    actus.fadeTo(1000,0).delay(1001).style.visibility = 'hidden';
    $('input,textarea,select,a', '#div1').attr("disabled", true);
}); 
```

假设我的 html 代码是：

```
<div class="container">
    <div id="div1"></div>
</div>
    <div class="container">
<div id="div2"></div>
</div>

.container{width:300px;height:300px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:29:23.867

您可能希望使 div 具有相同的大小，但如果您想使用 JavaScript 解决方案，您始终可以使用`removeAttr('href')`来禁用链接并将不透明度更改为 0。这将给出`div`已删除但仍然存在的外观在不改变 CSS 的情况下保持相同的高度。

```
$('#first').on('click', function() {
    $(this).css('opacity', '0');
    $(this).children('a').removeAttr('href');        
}​​​​​​​​);​ 
```

这是[jsFiddle 解决方案](http://jsfiddle.net/4aZwk/)。如果您将链接存储在数据属性或 id 或类似的东西中，您还可以重新启用所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:24:52.410

```
$('#second').css({"visibility":"hidden"});
  $('#firstdiv a').click(function(event){
    event.preventDefault();
      }             
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:26:18.890

在这里查看我的演示，使用 style.visibility 作为您的目标，如果您想移动第二个 div 的位置，请使用 style.display；（不过，这不是渐进的）

```
<html>
<head>

<title>div test</title>

<script type="text/javascript">
function show(){
document.getElementById("div1").style.visibility = "visible";
document.getElementById("div1").style.display = "block";

}
function change1(){
document.getElementById("div1").style.visibility = "hidden";
}
function change2(){
document.getElementById("div1").style.display = "none";
}

</script>

</head>

<body>

<div id="div1" style="background:red; height:50px">
    first div: <a href="http://www.hetaoblog.com" target="_blank">a link to http://www.hetaoblog.com</a>
</div>

<div>
    2nd div    allaala   <br />
    <button onclick="show()">show</button>   <br />
    <button onclick="change1()">change1</button>   <br />
    <button onclick="change2()">change2</button>   <br />

</div>

</body>

</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T05:27:28.703

也许您可以添加代码以更好地理解您的问题。

通常

```
style="display:none;" //will hide the div
style="display:block;" //will display the div 
```

或者

```
style="visibility:hidden" //will hide the div
style="visibility:visible" //will display the div 
```

为了触发这些你可以使用javascript（但首先div应该有ID）

```
<script>
ns4 = (document.layers) ? true:false
ie4 = (document.all) ? true:false 
ng5 = (document.getElementById) ? true:false

// Works for all browsers irrespective of its release date :p

function hidediv() {
if (ng5) document.getElementById('div1').style.visibility = "hidden"
else if (ns4) document.div1.visibility = "hide"
else if (ie4) div1.style.visibility ="hidden"
}

function showdiv(n){
if (ng5) document.getElementById('div1').style.visibility = "visible";
else if (ns4) document.div1.visibility = "show";
else if (ie4) div1.style.visibility = "visible";
</script> 
```

调用函数来隐藏/显示 div

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-01T05:19:55.350

固定...没有放弃。是的，它需要是不透明度（对于跨浏览器来说，淡入不透明度）才能保持位置，但是一行 jquery 就可以了。[http://jsfiddle.net/calder12/XKMEp/24/](http://jsfiddle.net/calder12/XKMEp/24/)

您所要做的就是将 fermer 更改为标签而不是 div 并重新设置它们的样式以将它们放在您拥有它们的位置。

```
 $(".fermer").click(function() {
    $(this).closest('div').fadeTo('slow',0);
    });
​

     <a href="#" class="fermer">
         fermer
     </a> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-01T05:20:35.460

使用这种类型结构

```
<div id="main">
 <div id="first">
   <a href="javascript:void(0);" id="link">Hide</a>
</div>
<div id="second">
 content
</div>
</div><!-- Main div --> 
```

jQuery

```
 $("#link").click(function() {
  $("#first").hide();
}); 
```

# jquery - jquery文件上传失败

> ID：13171331
> 
> 赞同：0
> 
> 时间：2012-11-01T05:14:26.400
> 
> 标签：jquery, file-upload

我找到了一些代码来进行 jquery 上传。它几乎可以工作，除了我在处理上传的 php 文件的 $_FILES 变量中没有任何值。这是片段

```
<script type="text/javascript">
$(document).ready(function () {

    $("#formsubmit").click(function () {

        var iframe = $('<iframe name="postiframe" id="postiframe" style="display: none" />');

        $("body").append(iframe);

        var form = $('#theuploadform');
        form.attr("action", "/upload.aspx");
        form.attr("method", "post");
        form.attr("enctype", "multipart/form-data");
        form.attr("encoding", "multipart/form-data");
        form.attr("target", "postiframe");
        form.attr("file", $('#userfile').val());
        form.submit();

        $("#postiframe").load(function () {
            iframeContents = $("#postiframe")[0].contentWindow.document.body.innerHTML;
            $("#textarea").html(iframeContents);
        });

        return false;

    });

});

</script>

<form id="theuploadform">
    <input id="userfile" name="userfile" size="50" type="file" />
    <input id="formsubmit" type="submit" value="Send File" />
</form>

<div id="textarea">
</div> 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:20:48.427

这是一个标头发送问题！要将文件上传到服务器，您应该使用 javascript/jQuery 中的 FormData 类！我建议使用这个 jquery 插件让它变得简单：

[jQuery ajax 表单](http://www.malsup.com/jquery/form/)

# windows - 在 Windows 上安装 Psycopg

> ID：13171334
> 
> 赞同：10
> 
> 时间：2012-11-01T05:14:55.043
> 
> 标签：windows, postgresql, python-2.7

我正在尝试在 Windows（Windows 7、64 位）下安装 psycopg2。我正在使用 Python [(x,y)](http://code.google.com/p/pythonxy/wiki/Downloads)和 PostgreSQL 9.2.1 中的 Python 2.7.2 。

我的第一次尝试是使用可从[http://www.stickpeople.com/projects/python/win-psycopg/](http://www.stickpeople.com/projects/python/win-psycopg/)下载的 Windows 端口（psycopg2-2.4.5.win-amd64-py2.7-pg9.1.3-release 。可执行程序）。然后我收到一条消息

```
Python 2.7 required but was not found in the registry 
```

在接下来的对话中，它不允许我选择任何 python 安装。所有其他程序和安装都愉快地找到了我的 python。

这失败了，我尝试直接从[http://pypi.python.org/pypi/psycopg2](http://pypi.python.org/pypi/psycopg2)使用源包，但尝试后：

```
python setup.py install 
```

我现在遇到错误消息：

```
error: Unable to find vcvarsall.bat 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T08:22:55.087

您使用的 Python 发行版与 psycopg2 安装程序期望的发行版不同，因此它找不到 Python 安装位置。

[您可以按照 psycopg2 下载页面](http://www.stickpeople.com/projects/python/win-psycopg/)上有关 Zope 安装问题的说明，从您下载的二进制文件中手动安装 psycopg2 ，内容如下：

> 已经注意到psycopg2的安装程序不会找到python的zope安装，停止安装，不安装psycopg2。一种解决方法是通过将扩展名从 *.exe 重命名为 *.zip 并使用 zip 提取器（例如 WinZip/PkZip/7z）提取 psycopg2 文件夹并将其放置在 \lib\python 中来提取文件。我不使用 Zope，因此我无法提供有关如何使用它的支持或说明。不过，如果它不起作用，请告诉我。

这同样适用于`Python(x,y)`您正在使用的发行版。`.exe`使用[7-zip](http://www.7-zip.org/)解压缩 psycopg2 安装程序，然后将`psycopg2`文件夹和“psycopg2-2.5.2-py2.7.egg-info”文件（因此“psycopg2”将出现在“pip freeze”中）复制到您的 Python`lib\site-packages`目录中。请参阅[安装 Python 模块](http://docs.python.org/2/install/index.html)。

然后你应该能够`import psycopg2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-30T13:38:27.360

1.  从此页面选择适当的版本：

    > [http://www.stickpeople.com/projects/python/win-psycopg/](http://www.stickpeople.com/projects/python/win-psycopg/)

2.  右键单击并选择`copy link address`

3.  回到家，用`easy_install <<Paste URL Here>>`

4.  冻结您的新要求：`pip freeze > requirements.txt`

# sql-server - 当前日期时间的计算列？

> ID：13171335
> 
> 赞同：4
> 
> 时间：2012-11-01T05:15:12.280
> 
> 标签：sql-server, sql-server-2008-r2

我正在尝试为我插入的每一行创建一个自动计算当前日期时间的 SQL Server 2008R2 表列。

我将此列的计算列规范值设置为 GetDate()。我的表中有一些旧数据。添加 GetDate() 函数后，该列将更新为当前日期时间。但我的问题是，当我在此表中插入新行时，我的 datetime 列永远不会用当前日期时间更新，并且该列的每一行都有相同的值。

插入新记录时，我应该使用哪个函数来插入列的当前日期时间值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T05:20:26.723

尝试设置为列`GETDATE()`的`DEFAULT`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:00:35.503

您可以使用 () 设置列的默认值`GETDATE`，这样您将在每个新行插入时获得当前日期时间。

# java - 在 JBoss 7.1.1 的这个模块中已经定义了一个名为“XXX”的组件

> ID：13171339
> 
> 赞同：29
> 
> 时间：2012-11-01T05:15:26.800
> 
> 标签：java, spring, jboss, jboss7.x, spring-3

我没有`TimerServiceDispatcher`在我的应用程序中创建 spring bean 名称。但是，这个模块中已经定义了`JBoss`throw 异常。`TimerServiceDispatcher`我不知道是什么问题。我错过了什么？我需要做什么？

我的应用程序使用 Seam 2.3、Spring 3.0 和 JPA 2.0。我不使用`EJB`.

```
11:29:01,531 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) JBAS015876: Starting deployment of "MRBS.war"
11:29:04,217 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed to start service jboss.deployment.unit."MRBS.war".PARSE: org.jboss.msc.service.StartExcept
ion in service jboss.deployment.unit."MRBS.war".PARSE: Failed to process phase PARSE of deployment "MRBS.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_23]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_23]
Caused by: java.lang.IllegalArgumentException: JBAS011046: A component named 'TimerServiceDispatcher' is already defined in this module
    at org.jboss.as.ee.component.EEModuleDescription.addComponent(EEModuleDescription.java:137)
    at org.jboss.as.ejb3.deployment.processors.EJBComponentDescriptionFactory.addComponent(EJBComponentDescriptionFactory.java:60)
    at org.jboss.as.ejb3.deployment.processors.SessionBeanComponentDescriptionFactory.processSessionBeans(SessionBeanComponentDescriptionFactory.java:157)
    at org.jboss.as.ejb3.deployment.processors.SessionBeanComponentDescriptionFactory.processAnnotations(SessionBeanComponentDescriptionFactory.java:86)
    at org.jboss.as.ejb3.deployment.processors.AnnotatedEJBComponentDescriptionDeploymentUnitProcessor.processAnnotations(AnnotatedEJBComponentDescriptionDeploymentUnitProcessor.java:
58)
    at org.jboss.as.ejb3.deployment.processors.AbstractDeploymentUnitProcessor.deploy(AbstractDeploymentUnitProcessor.java:81)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more

11:29:04,230 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "MRBS.war" was rolled back with failure message {"JBAS014671: Failed servi
ces" => {"jboss.deployment.unit.\"MRBS.war\".PARSE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"MRBS.war\".PARSE: Failed to process phase PARSE of d
eployment \"MRBS.war\""}}
11:29:04,292 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) JBAS015877: Stopped deployment MRBS.war in 61ms
11:29:04,294 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.deployment.unit."MRBS.war".PARSE: org.jboss.msc.service.StartException in service jboss.deployment.unit."MRBS.war".
PARSE: Failed to process phase PARSE of deployment "MRBS.war" 
```

jboss-部署-结构.xml

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
      <dependencies>
          <module name="org.hibernate" export="true"/>
          <module name="javax.faces.api" export="true" />
          <module name="com.sun.jsf-impl" export="true"/>
          <module name="org.dom4j" export="true"/>
          <module name="org.hibernate.validator" export="true"/>
        </dependencies>
        <exclusions>
            <module name="org.apache.log4j" />
        </exclusions>       
  </deployment>  
</jboss-deployment-structure> 
```

部署结构

```
MRBS.war
    -index.html
    +web-page-pakage
    +META-INF
    +WEB-INF
        +classes
        +lib
           aopalliance.jar
            commons-beanutils.jar
            commons-codec.jar
            commons-lang-2.5.jar
            drools-compiler.jar
            drools-core.jar
            drools-decisiontables.jar
            drools-templates.jar
            eclipselink.jar
            el-api.jar
            guava.jar
            guice.jar
            hibernate-ehcache.jar
            httpclient.jar
            httpcore.jar
            javax.persistence_2.0.1.v201006031150.jar
            jboss-el.jar
            jboss-seam-debug.jar
            jboss-seam-excel.jar
            jboss-seam-ioc.jar
            jboss-seam-mail.jar
            jboss-seam-pdf.jar
            jboss-seam-ui.jar
            jboss-seam.jar
            junit-4.8.1.jar
            log4j-1.2.14.jar
            mysql-connector-java-5.1.6-bin.jar
            primefaces-3.3.1.jar
            sac.jar
            spring-aop.jar
            spring-asm.jar
            spring-beans.jar
            spring-context.jar
            spring-core.jar
            spring-expression.jar
            spring-jdbc.jar
            spring-orm.jar
            spring-tx.jar
            spring-web.jar
            urlrewritefilter.jar
            xercesImpl.jar
            xml-apis.jar
        -components.xml     
        -faces-config.xml
        -jboss-deployment-structure.xml
        -pages.xml
        -web.xml 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-12T22:25:41.690

我有一个用@Singleton 和@Stateless 注释的bean，触发了这个错误。我的代码当然是错误的，但是像这样的消息和帖子让我在一段时间内走错了路。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-24T21:27:11.083

我知道这个问题的答案。由于我的固执，我在 JBoss Support 上花了数周时间。他们计划在 EAP 6.2.x 版本中提供修复或至少更好的消息传递。

问题出现在 EJB Annotation 预处理器上——它将你的战争和编译到其中的库并扫描它们以查找 EJB 注释。一些 Jar 文件可以在 Manifest 中有一个“Classpath: ”条目。（或除“。”作为条目之一之外的其他内容）。这会导致注释预处理器再次愚蠢地处理 web-inf lib 中的所有 jar 文件。最后，它会找到一个它已经看到的带有 EJB 注释的 jar 文件，因为它已经在前面处理过——这会导致它抱怨“已经定义了一个名为 xxx 的组件”。

所以这里最令人沮丧的部分是它可能是一些你甚至不关心的旧 jar 文件，其中包含这个不必要的 Classpath 清单条目 - 并导致 JBoss 自身递归。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-01-25T13:55:47.673

我遇到了同样的问题，但对我来说，建议的解决方案都没有帮助。我注意到`EJB JAR`存在`twice`( `newest version and older version`) 在`WEB.WAR.`

这是因为`maven`eclipse中父项目的clean操作没有级联到子项目。我通过`"mvn clean"`在`child project`.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-02-13T12:19:40.257

我在 IntelliJ 中遇到了同样的问题。原因是 IntelliJ 在 WEB-INF/classes 和作为单独的 Jar 文件在 WEB-INF/lib 中使用我的类创建了一个 WAR 文件。

我花了一些时间才弄清楚 IntelliJ 这样做的原因。原因在于对话文件 -> 项目结构 -> 工件： [![IntelliJ 项目结构对话](../Images/a53a6b47f012fc9577bd3e5d3351268b.png)](https://i.stack.imgur.com/DplBq.png)

删除“vertrag-ui-war”编译输出后，错误不再发生。PS 我不知道 IntelliJ 为什么要进行此设置 - 我绝对没有设置此设置。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-12-10T09:36:49.397

运行 Maven 目标：

1.  `wildfly:undeploy`
2.  `clean`
3.  `wildfly:deploy`

在我们的案例中有所帮助：

> [错误] 原因：java.lang.IllegalArgumentException：WFLYEE0040：此模块中已定义名为“xxx”的组件“}}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-11T17:54:09.087

删除 @Singleton 为我修复了这个错误。不知道为什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T05:43:52.613

问题不在于您创建`TimeServiceDispatcher` 它是seam framework 的一个类部分`org.jboss.seam.async.TimerServiceDispatcher`，它是一个seam fw 类。

现在关于错误。

当应用程序和服务器提供的库中存在冲突时，会发生此类错误。它在 JBoss 7.1 中非常普遍，也非常令人沮丧。

你得知道

1.  您的应用程序中包含哪些所有库和版本？
2.  以上所有库和版本均由 JBoss 7.1 提供

现在对于双方的库检查版本

如果应用程序和 JBoss 的版本相同，则从应用程序中删除该 jar（建议）（否则您可以在 deployment-structure.xml 中配置使用哪一个）

如果应用程序 jar 和 jboss 的版本不同，在这种情况下，您需要在部署描述符中配置选择哪一个。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-01T18:00:57.047

这可能是由于部署了先前版本的 jar 而不是正确的 jar。当我删除目标文件夹的所有内容时，它就解决了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-25T09:34:23.693

答案帮助我找到了问题的根本原因。我正在使用 Arquillian，我正在通过

```
JavaArchive ja = ShrinkWrap.create(JavaArchive.class, "myejb.jar")
            .addPackages(true, "a.package.name") 
```

并作为一个 Maven 依赖项

```
 File[] files = Maven.resolver()
            .addDependencies(
                MavenDependencies.createDependency("G:A:V", ScopeType.COMPILE, false), 
```

因此出现了前面描述的错误。我只留下了maven依赖，错误消失了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-07T09:52:02.330

在复制粘贴和创建新组件时，我忘记更新`@Stateless(value)`注释在新组件中接受的值。这意味着我有两个同名的组件，我得到了这个错误。希望它可以帮助某人。

# .net - 这种 hack 是 T4 的定义行为吗

> ID：13171344
> 
> 赞同：2
> 
> 时间：2012-11-01T05:16:07.723
> 
> 标签：.net, visual-studio, t4, undefined-behavior, forward-compatibility

我最近开始对一个相当复杂的 T4 类进行单元测试。我已经取得了重大突破，但恐怕观察到的行为可能只是巧合（即，可能会在未来版本的 Visual Studio 中中断）

我基本上有这样的东西：

主模板.tt：

```
<#@ include file="generator.tt.cs" #> 
```

然后在 generator.tt.cs 我有

```
//<#+
class code
{
....
}
//#> 
```

观察到的行为是，我既可以使用 T4 模板中声明的类等，也可以正常编译代码文件。`<#+`但是，是否在所有定义的行为中都在and`#>`标记之前添加了注释？我将来会冒这种破坏的风险吗？

此外，我已经在 MonoDevelop 和 Visual Studio 2012 上对此进行了测试。它似乎对两者都有效。不过，Visual Studio 2008 的兼容性对我来说并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T07:04:25.863

我不能说我们将来不会“永远”破坏事物，但我发现很难想象我们会做些什么来破坏它。功能块内的评论将始终受到尊重，并且需要尊重之前的评论以允许生成评论。我认为你是安全的。

我认为您必须在 generator.tt.cs 文件中使用完全限定的名称，因为没有地方可以放置 using 语句或命名空间。

这与您通过一些空的存根模板为您的测试预编译帮助程序库然后测试预编译版本相比如何？

# c++ - 创建独立于构造函数参数的对象指针

> ID：13171345
> 
> 赞同：0
> 
> 时间：2012-11-01T05:16:17.803
> 
> 标签：c++, pointers, constructor, placement-new

我正在尝试创建一个类似于容器 Vector 的向量。

然后声明：

```
Vector< A> Avector. 
```

在分配内存时，它会给出 A 没有默认构造函数的编译错误。我编写了以下代码来分配内存。

```
char *pBuffer = (char*) malloc(size*sizeof(T));
  T *array;
   for(int i = 0; i < size; i++)
  {
    (array+i) = new(pBuffer + i) T;
  }
  return array; 
```

T 是一个模板变量。

该错误是由于在放置 new 时我使用了 T 的默认构造函数，而我没有为 A 编写默认构造函数。

我想知道，有没有办法让内存分配不依赖于构造函数签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:34:03.863

在 C++ 中，调用`new`做了两件事：

1.  为正在创建的对象分配足够的内存 &
2.  提供通过调用其构造函数正确初始化对象的机会。

这是 C++ 作为一门语言的基本设计特征，明显添加了 pt 2 以克服`malloc`仅分配内存的行为。

简而言之，您无法更改此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:53:14.227

这不是取决于构造函数签名的内存分配。这是*初始化*。

即使在您的示例中，分配也是在`malloc`不调用任何构造函数的情况下执行的。它是需要使用构造函数的初始化（由placement-new 执行）。

如果不调用其构造函数，就无法初始化用户定义的对象。

但是，至少在 C++11 中，您可以做的是将代码放入一个函数中，该函数将构造函数所需的参数作为右值引用，并将它们传递给placement-new 中的构造函数调用. 这样，由函数的调用者来传递正确的参数。如果未传递任何参数，则将调用默认构造函数。

这实际上是new的[`emplace`-style 函数](http://en.cppreference.com/w/cpp/container/vector/emplace_back)`std::vector`使用的技术：

```
template< class... Args >
void emplace_back( Args&&... args ); 
```

它是一个可变参数模板，因此可以有任意数量的参数（零个或多个）。右值引用用于获取它们，并且在实现中您必须调用构造函数 using`std::forward`以确保按原样传递参数：

```
(array+i) = new (pBuffer + i) T(std::forward<Params>(args)...); 
```

所以这仍然需要使用构造函数，但它让调用者选择构造函数（通过选择参数）。如果没有可用的默认构造函数，调用者只需提供调用非默认构造函数所需的参数。

# c# - 水晶报表中的文字旋转180度

> ID：13171348
> 
> 赞同：0
> 
> 时间：2012-11-01T05:16:38.160
> 
> 标签：c#, crystal-reports, visual-studio-2005

如何在水晶报表中将文本旋转 180 度？
我正在使用带有 c# 的 Visual Studio 2005。
水晶报表中有文字旋转角度属性，但没有180度。
我不想使用图像。
我想显示一些数据是旋转 0 度，有些是 180 度，有些是 270 度。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:31:43.647

网上有免费的颠倒字体，但它们不适合我。
所以我用[Type light](http://www.cr8software.net/typelight.html)免费字体创建器创建了我自己的字体，用于颠倒字体。这是一个不错的软件。

# c# - 为什么我不能在 Storyboard 中使用 Click

> ID：13171354
> 
> 赞同：1
> 
> 时间：2012-11-01T05:17:33.530
> 
> 标签：c#, windows-8

当 Snapped_detail 发生时，我试图实现 Click 事件的更改，但我似乎不能这样做..？我该如何修改后退按钮的点击事件？这是我的代码：

```
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Click">
                <DiscreteObjectKeyFrame KeyTime="0" Value="snapped_back_click"/>
            </ObjectAnimationUsingKeyFrames> 
```

这就是剩下的部分。

```
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="primaryColumn" Storyboard.TargetProperty="Width">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="Visibility">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="(Grid.Row)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="(Grid.RowSpan)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="titlePanel" Storyboard.TargetProperty="(Grid.Column)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="1"/>
                </ObjectAnimationUsingKeyFrames>
                <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailTitlePanel" Storyboard.TargetProperty="(Grid.Row)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailTitlePanel" Storyboard.TargetProperty="(Grid.Column)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="0"/>
                </ObjectAnimationUsingKeyFrames>-->
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetail" Storyboard.TargetProperty="Padding">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="20,0,20,0"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemDetailGrid" Storyboard.TargetProperty="Margin">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,0,60"/>
                </ObjectAnimationUsingKeyFrames>

            </Storyboard>
        </VisualState> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:15:12.500

您可以`Window.Current.SizeChanged`改为注册活动

```
Window.Current.SizeChanged += WindowSizeChanged; 
```

而不是在您的`WindowSizeChanged`功能中将不同的功能分配给按钮

```
 private void WindowSizeChanged(object sender, WindowSizeChangedEventArgs e)
    {
         if(ApplicationView.Value == ApplicationViewState.Snapped)
          {
               backButton.Click += snapped_back_click;
          }
          else
          {
               //something else
          }
    } 
```

# ruby - 在 OS X 10.8 上使用 RVM 安装 JRuby 时出错

> ID：13171355
> 
> 赞同：1
> 
> 时间：2012-11-01T05:17:37.883
> 
> 标签：ruby, rvm, jruby

我在 RVM for OS X 10.8 中安装 JRuby 时遇到错误，尝试安装时终端输出如下：

```
$ rvm install jruby --debug
jruby - install
jruby-1.7.0 - #downloading jruby-bin-1.7.0, this may take a while depending on your connection...
[2012-11-01 00:09:16] /usr/local/rvm/scripts/fetch http://jruby.org.s3.amazonaws.com/downloads/1.7.0/jruby-bin-1.7.0.tar.gz
current path: /usr/local/rvm/src
command(2): /usr/local/rvm/scripts/fetch http://jruby.org.s3.amazonaws.com/downloads/1.7.0/jruby-bin-1.7.0.tar.gz
jruby-1.7.0 - #extracting jruby-bin-1.7.0 to /usr/local/rvm/src/jruby-1.7.0
[2012-11-01 00:09:17] tar xzf /usr/local/rvm/archives/jruby-bin-1.7.0.tar.gz -C /usr/local/rvm/tmp/rvm_src_80980
current path: /usr/local/rvm/src
command(5): tar xzf /usr/local/rvm/archives/jruby-bin-1.7.0.tar.gz -C /usr/local/rvm/tmp/rvm_src_80980
jruby-1.7.0 - #extracted to /usr/local/rvm/src/jruby-1.7.0
jruby-1.7.0 - #nailgun
[2012-11-01 00:09:18] jruby_install_build_nailgun
jruby_install_build_nailgun () 
{ 
    typeset _result;
    set -x;
    chpwd_functions="" builtin cd "${rvm_src_path}/$rvm_ruby_string/tool/nailgun" && case "$rvm_ruby_version" in 
        1.2* | 1.3*)
            true
        ;;
        *)
            env "${rvm_configure_env[@]}" ./configure --prefix=$rvm_ruby_home
        ;;
    esac && make "${rvm_make_flags[@]}";
    _result=$?;
    set +x;
    return $_result
}
current path: /usr/local/rvm/src/jruby-1.7.0
command(1): jruby_install_build_nailgun
Error running 'jruby_install_build_nailgun', please read /usr/local/rvm/log/jruby-1.7.0/nailgun.log 
```

nailgun.log 如下所示：

```
[2012-11-01 00:09:18] jruby_install_build_nailgun
jruby_install_build_nailgun () 
{ 
    typeset _result;
    set -x;
    chpwd_functions="" builtin cd "${rvm_src_path}/$rvm_ruby_string/tool/nailgun" && case "$rvm_ruby_version" in 
        1.2* | 1.3*)
            true
        ;;
        *)
            env "${rvm_configure_env[@]}" ./configure --prefix=$rvm_ruby_home
        ;;
    esac && make "${rvm_make_flags[@]}";
    _result=$?;
    set +x;
    return $_result
}
current path: /usr/local/rvm/src/jruby-1.7.0
command(1): jruby_install_build_nailgun
++ chpwd_functions=
++ builtin cd /usr/local/rvm/src/jruby-1.7.0/tool/nailgun
++ case "$rvm_ruby_version" in
++ env 'LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include' ./configure --prefix=/usr/local/rvm/rubies/jruby-1.7.0
checking for gcc... gcc
checking for C compiler default output file name... 
configure: error: C compiler cannot create executables
See `config.log' for more details.
++ _result=77
++ set +x 
```

所以看起来调用configure有问题，config.log如下：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by ng configure 0.7.1, which was
generated by GNU Autoconf 2.61\.  Invocation command line was

  $ ./configure --prefix=/usr/local/rvm/rubies/jruby-1.7.0

## --------- ##
## Platform. ##
## --------- ##

hostname = #####.local
uname -m = x86_64
uname -r = 12.2.0
uname -s = Darwin
uname -v = Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
     Darwin Kernel Version 12.2.0: Sat Aug 25 00:48:52 PDT 2012; root:xnu-2050.18.24~1/RELEASE_X86_64
Kernel configured for up to 2 processors.
2 processors are physically available.
2 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1
Primary memory available: 8.00 gigabytes
Default processor set: 146 tasks, 748 threads, 2 processors
Load average: 6.21, Mach factor: 0.29
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /usr/local/rvm/gems/ruby-1.9.3-p194/bin
PATH: /usr/local/rvm/gems/ruby-1.9.3-p194@global/bin
PATH: /usr/local/rvm/rubies/ruby-1.9.3-p194/bin
PATH: /usr/local/rvm/bin
PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /usr/local/bin
PATH: /opt/sm/bin
PATH: /opt/sm/pkg/active/bin
PATH: /opt/sm/pkg/active/sbin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:1734: checking for gcc
configure:1750: found /usr/bin/gcc
configure:1761: result: gcc
configure:1999: checking for C compiler version
configure:2006: gcc --version >&5
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2009: $? = 0
configure:2016: gcc -v >&5
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
configure:2019: $? = 0
configure:2026: gcc -V >&5
llvm-gcc-4.2: argument to `-V' is missing
configure:2029: $? = 1
configure:2052: checking for C compiler default output file name
configure:2079: gcc   -L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include conftest.c  >&5
i686-apple-darwin11-llvm-gcc-4.2: CFLAGS=-I/opt/sm/pkg/active/include: No such file or directory
i686-apple-darwin11-llvm-gcc-4.2: CPATH=/opt/sm/pkg/active/include: No such file or directory
configure:2082: $? = 1
configure:2120: result: 
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME "ng"
| #define PACKAGE_TARNAME "ng"
| #define PACKAGE_VERSION "0.7.1"
| #define PACKAGE_STRING "ng 0.7.1"
| #define PACKAGE_BUGREPORT ""
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2127: error: C compiler cannot create executables
See `config.log' for more details.

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include'
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_prog_ac_ct_CC=gcc

## ----------------- ##
## Output variables. ##
## ----------------- ##

CC='gcc'
CFLAGS=''
CPP=''
CPPFLAGS=''
DEFS=''
ECHO_C='ECHO_N=''
ECHO_T=''
EGREP=''
EXEEXT=''
GREP=''
LDFLAGS='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include'
LIBOBJS=''
LIBS=''
LTLIBOBJS=''
OBJEXT=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME='ng'
PACKAGE_STRING='ng 0.7.1'
PACKAGE_TARNAME='ng'
PACKAGE_VERSION='0.7.1'
PATH_SEPARATOR=':'
SHELL='/bin/sh'
ac_ct_CC='gcc'
bindir='${exec_prefix}/bin'
build_alias=''
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host_alias=''
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='/usr/local/rvm/rubies/jruby-1.7.0'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

#define PACKAGE_NAME "ng"
#define PACKAGE_TARNAME "ng"
#define PACKAGE_VERSION "0.7.1"
#define PACKAGE_STRING "ng 0.7.1"
#define PACKAGE_BUGREPORT ""

configure: exit 77 
```

有人知道发生了什么吗？尝试了几个小时环顾不同的论坛，但没有运气。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:04:52.230

it is not required to build nailgun in jruby 1.7.0, you can use rvm head where this step was already removed:

```
rvm get head
rvm reinstall jruby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:25:49.770

我已经成功地用 mac osx 10.8 安装了 jruby，没有任何问题。

```
$ rvm install jruby
jruby-1.7.0 - #downloading jruby-bin-1.7.0, this may take a while
depending on your connection... jruby-1.7.0 - #extracting
jruby-bin-1.7.0 to /Users/guy/.rvm/src/jruby-1.7.0 jruby-1.7.0 -
extracted to /Users/guy/.rvm/src/jruby-1.7.0 jruby-1.7.0 - #nailgun jruby-1.7.0 -    #installing to /Users/guy/.rvm/rubies/jruby-1.7.0
jruby-1.7.0 - #importing default gemsets (/Users/guy/.rvm/gemsets/) 
```

似乎配置失败，这可能是您的 gcc 已过时或由于某种原因无法正常工作。您是否安装了 Xcode 并添加了命令行工具？这应该可以解决您的 gcc 问题。如果您不想安装 Xcode，您可以使用 homebrew 或类似软件安装 gcc。

# objective-c - 如何在 Interface Builder 中使用 Storyboard 连接 Page View Controller 的 dataSource 出口

> ID：13171360
> 
> 赞同：15
> 
> 时间：2012-11-01T05:18:56.900
> 
> 标签：objective-c, interface-builder, uistoryboard, uipageviewcontroller

根据[此处](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html)的 Apple 文档，我们应该能够将 Page View Controller 添加到情节提要中，然后通过连接插座来选择性地设置数据源。

> ## 使用 Storyboard 创建页面视图控制器界面
> 
> 基于页面的应用程序 Xcode 模板创建一个新项目，其中页面视图控制器作为初始场景。
> 
> 要将页面视图控制器添加到现有故事板，请执行以下操作：
> 
> 1.  将页面视图控制器拖出库。将页面视图控制器场景添加到情节提要。
> 2.  在属性检查器中，设置适当的选项。
> 3.  或者，通过连接相应的出口来设置委托、数据源或两者。
> 4.  通过在属性检查器中选择 Is Initial View Controller 选项将其显示为第一个视图控制器（或以其他方式在用户界面中显示视图控制器。）

然后我像这样定义了一个 UIPageViewController 子类

```
@interface DetailsPageViewController : UIPageViewController <UIPageViewControllerDataSource> 
```

但是当我尝试连接数据源插座时，它不会突出显示控制器或允许连接它。我也尝试在其他控制器上实现 UIPageViewControllerDataSource 但我遇到了无法连接插座的相同问题。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T13:08:33.217

我没能在 IB 中找到一种方法。必须改用以下内容：

```
self.delegate=self;
self.dataSource=self; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-14T19:43:07.500

请注意，Apple 文档指出 UIPageViewController 通常不是子类。你`UIPageViewControllerDataSource`不需要是视图控制器的子类。你可以让它成为 NSObject 的子类。

通常只有出现在情节提要上的东西，即 UI 元素，才会列在情节提要左侧出现的文档大纲中（前提是它没有被隐藏）。如果您的委托/数据源尚不存在，您可以通过将“对象”（黄色立方体）拖到适当场景中的文档大纲中来将其放在那里。

然后单击您刚刚添加的对象，并使用 Identity Inspector 窗格将其具体类更改为您的数据源类。然后，通过将连接检查器中的一条线拖到其上，即可以正常方式将其用作连接的目标。

# jquery - 每次更改选择框时使用 ajax 发送 http 请求

> ID：13171361
> 
> 赞同：0
> 
> 时间：2012-11-01T05:19:00.830
> 
> 标签：jquery, select, onchange

嗨，我正在使用 jquery 从 mysql 获取数据。它工作得很好，但是当另一个选择框被更改时，我需要它来更新一个选择框。这是我为 jquery 所拥有的：

```
$("#airports").live('change',function() 
  {
      var selectVal = $('#airports :selected').val();
      alert(selectVal);

    Send a http request with AJAX 

    $.ajax({                                      
      url: 'tras-hotels.php',                         
      data: "n="+selectVal,                                                     
      dataType: 'json',                
      success: function(data)         
      {
         $.each(data, function(key,value){
                   $('#output').append("<option value='"+value.id+"'>"+value.hotel+"</option>");
                });

      } 
    });

  }); 
```

所以我在这里所做的是每次更改#airports 选择时更新选择框#output。它仅在第一次更改时有效，然后不再执行。但是当我改变时，我确实得到了正确值的警报。这是我的选择框：

```
<select name="airport" style="width: 220px;" id="airports">
            <option selected="selected">[Escoge Aeropuerto]</option>
            <?php 
            while($tra = mysql_fetch_array($getAirports)){
                echo '<option value="'.$tra['taeropuerto_fklocacion'].'">'.$tra['taeropuerto_nombre'].'</option>';
                } 
            ?>
            </select>
            <label>Hotel</label>
            <select name="hotel" id="output" style="width: 220px;">

            </select> 
```

有谁知道为什么这不起作用？有解决办法吗？预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:25:17.550

我不确定您为什么使用`live`- 原始选择有时也会通过 AJAX 替换吗？但是，您可能只需要先清除原始值，因为您只是附加新值。

```
$("#airports").live('change',function() 
{
    var selectVal = $('#airports :selected').val();
    alert(selectVal);

    var $output = $('#output').html('');

    $.ajax({                                      
      url: 'tras-hotels.php',                         
      data: "n="+selectVal,                                                     
      dataType: 'json',                
      success: function(data)         
      {
         $.each(data, function(key,value) {
              $output.append("<option value='"+value.id+"'>"+value.hotel+"</option>");
         });
      } 
    });

}); 
```

# arrays - 在数组循环的前面添加一个字符串？

> ID：13171370
> 
> 赞同：0
> 
> 时间：2012-11-01T05:19:45.477
> 
> 标签：arrays, string, bash, loops, append

```
#!/bin/bash
#OLDIFS=$IFS
IFS=$'\r'
    fortune_lines=($(fortune | fold -w 90))

    #Screen_Session=$"{mainscreen}"
        Screen_Session=`screen -ls|grep "\."|grep "("|awk '{print $1}'`
    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff "`printf "${fortune_lines[@]}\r"`")
#IFS=$OLDIFS;
    for var in "${Screen_OneLiner[@]}"
      do
         echo    "${var}"
    done 
```

好的，这个脚本有效（排序）。我需要将字符串“say”放在整个数组索引的前面。目前我只能让它打印出“说”到第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T13:27:23.653

我们不需要像数组这样的玩意儿使事情复杂化——我们可以让老好人来`sed`完成这项工作。

```
#!/bin/bash
fortune_lines=$(fortune | fold -w 90 | sed 's/^/say /')
Screen_Session=`screen -ls|grep "\."|grep "("|awk '{print $1}'`
screen -p 0 -S $Screen_Session -X stuff "$fortune_lines" 
```

# windows - 使用 Apache ANT 在 Windows 中自动安装

> ID：13171371
> 
> 赞同：0
> 
> 时间：2012-11-01T05:19:47.787
> 
> 标签：windows, apache, ant, automation, qtp

我正在执行 POC 以找到刷新测试服务器的方法。提神涉及

1.  删除多个文件
2.  从 Windows 添加/删除程序卸载某些程序
3.  安装程序的新副本（它使用涉及用户交互的 installshield）
4.  将一些依赖项放在特定文件夹中。

虽然在 ANT 中可以很容易地完成删除和复制工作，但这不是问题。但我找不到自动化安装/卸载任务的方法。

这可以使用 ANT 完成吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:11:26.813

ANT 是一种构建工具，虽然许多人已成功使用它来自动化部署，但您将遇到 ANT 从未设计用于解决的问题（例如运行诸如 installshield 之类的第 3 方图形工具）。

配置目标服务器的最佳方法是新兴技术，例如：

*   [木偶](http://puppetlabs.com/)
*   [厨师](http://www.opscode.com/chef/)

它们的真正优势在于，您可以捕获应用程序的环境依赖关系，并在部署之前将它们应用到目标机器上。如果您想使用虚拟化环境进行测试，这将非常有用。

最后，我已经很多年没有使用 installshield 了，但我似乎记得它有一套全面的自动化选项。也许您可以使用这些（来自 ANT）而不是被迫模拟用户单击 GUI

# memory-management - 这是一个好主意 - 使 viewdiddisappear 中的视图为零？

> ID：13171379
> 
> 赞同：0
> 
> 时间：2012-11-01T05:20:52.313
> 
> 标签：memory-management, ios6, ipad-3

我在 iOS6 中的一个 iPad 应用程序中面临内存管理问题，其中我的应用程序由于大量脏大小而终止。我有 5 个视图控制器，每次点击它们时都会创建它们。那么在 viewDidDisappear 中卸载视图是个好主意吗？

# excel - Excel 从任何行搜索值，如果在另一行找到，则将该行替换为第一行中的值

> ID：13171382
> 
> 赞同：0
> 
> 时间：2012-11-01T05:20:55.103
> 
> 标签：excel, merge

我想做的是让我说我​​有一个excel表

行

# 产品编号 | 产品 | 货号 | 价格 | 图片 | 拇指

25 | 衬衫蓝色 | 4251 | 10 美元 | 衬衫.jpg | 衬衫拇指.jpg

2 | 衬衫绿 | 4581 | 17 美元 | 绿色.jpg | 绿拇指.jpg

8 | 衬衫黑色 | 4561 | 15 美元 | 黑色.jpg | blackthumb.jpg

只是在不同的行或另一个excel表上

# 产品编号 | 产品 | 货号 | 价格 | 图片 | 拇指

25 | 衬衫蓝色 | 4251 | 52 美元 | |
2 | 衬衫绿 | 4581 | 42 美元 | |
8 | 衬衫黑色 | 4561 | 65 美元 | |

如果第二个表或工作表列的数据在指定列上不同并且单元格为空忘记它们忽略它们并将第二个表中的值替换到第一个表中，我如何更改第一个表以更新

最终将是

# 产品编号 | 产品 | 货号 | 价格 | 图片 | 拇指

25 | 衬衫蓝色 | 4251 | 52 美元 | 衬衫.jpg | 衬衫拇指.jpg

2 | 衬衫绿 | 4581 | 42 美元 | 绿色.jpg | 绿拇指.jpg

8 | 衬衫黑色 | 4561 | 65 美元 | 黑色.jpg | blackthumb.jpg

我尝试了几个 excel 函数，但它们不起作用，因为我有很多产品要添加单元格

我尝试在 Vl 中做，但感到困惑和宏我什至不知道它是什么

只要我能执行任务，我就可以接受任何视觉、功能

如果有人知道居屋，请告诉我

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:21:47.907

我建议您在指定的列中使用永久公式，而不是使用固定值。

现在要做到这一点，我会使用一个`VLOOKUP()`函数。我假设您的 ProductNo 是永远不会改变的元素，因此所有其他列都将获得一个`VLOOKUP()`功能。

现在，如果我理解正确，您可能会在第 2 个表中更新第 1 个表，但应忽略第 2 个表中的任何空单元格。

我还假设您希望查看元素何时会因更新而更改，因此我提出以下建议：

在第一个表中添加可能需要更新的列元素块：2 个列块，第一个带有组合结果（*COMB-block*），第二个带有来自第二个表的查找（*LOOKUP-block*） . 为了便于解释，我将这两个表放在名为*table1*和*table2的工作表上的同一个工作簿中*

**产品编号 | 产品 | 货号 | 价格 | 图片 | 拇指 | 产品_梳子 | Sku_comb | Price_comb | Image_comb | 拇指梳 | 产品查询 | Sku_lookup | 价格查询 | 图片查找 | Thumb_lookup**

现在从*LOOKUP-block*中的公式开始，使用`VLOOKUP()`，例如 *Product_vlookup* 列 `=IFERROR(VLOOKUP($A2,table2!$A:B,COLUMNS(table2!$A:B),FALSE),"")` 的公式：IFERROR 是针对 table1 中的产品在 table2 中找不到的情况

对于*COMB 块*中的公式，以下将首选表 2 结果而不是表 1 结果。由于`VLOOKUP`与空元素匹配的 ProductNo（例如对于图像）将导致返回 0（零），所有零也被视为错误的查找结果。这是 *Product_comb* 列的脚本： `=IF(OR(ISBLANK(L2),L2=0),B2,L2)`

作为识别已更改产品的最后一步，您可以添加一个将原始值与 _comb 值进行比较的列：（ `=AND(B2=G2,C2=H2,D2=I2,E2=J2,F2=K2)`对于未更改的列返回 true，对于任何更改的列返回 false）或单独对每个元素使用条件格式或如`AND()`公式所示的组合。

作为更新过程的最后一步，您可以复制*COMB 块*中的所有记录并将其粘贴到原始元素上。

如果您有任何进一步的问题，请询问。

# ubuntu-12.04 - Ubuntu 12.04 chroot 中的 org.gnome.SessionManager

> ID：13171384
> 
> 赞同：1
> 
> 时间：2012-11-01T05:21:26.833
> 
> 标签：ubuntu-12.04, dbus, chroot, gnome-3, totem

我正在尝试在最小的 chroot 中测试图腾（主机和 chroot 都是 ubuntu 12.04 amd64）。当我加载视频时，我得到了错误

```
** (totem:25660): WARNING **: Problem inhibiting the screensaver: GDBus.Error:
org.freedesktop.DBus.Error.NameHasNoOwner: Name "org.gnome.SessionManager" does not exist 
```

实际上，在观看视频时屏幕会关闭（会话空闲）。为了确认，我用 python 进行了测试：

```
>>> import dbus
>>> bus = dbus.SessionBus()
>>> bus.get_object('org.gnome.SessionManager','/org/gnome/SessionManager') 
```

并得到错误

```
dbus.exceptions.DBusException: org.freedesktop.DBus.Error.ServiceUnknown: The name
org.gnome.SessionManager was not provided by any .service files 
```

有谁知道哪些包会在 chroot 中提供 dbus 接口 org.gnome.SessionManager ？对此进行搜索后，我尝试了 gnome-session、gnome-session-common 和 gnome-session-bin 均无济于事。

通过在[packages.ubuntu.com](http://packages.ubuntu.com)和完整的 12.04 系统上搜索它们都可以正常工作，似乎没有任何包提供名为 org.gnome.SessionManager.service 的文件，所以它在寻找什么 .service 文件?.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:56:08.067

在该服务正在运行的系统上，您可以通过像这样查询总线来查找：

```
$ qdbus org.freedesktop.DBus / org.freedesktop.DBus.GetNameOwner org.kde.klipper
:1.82
$ qdbus org.freedesktop.DBus / org.freedesktop.DBus.GetConnectionUnixProcessID :1.82
1441
$ readlink /proc/1441/exe
/usr/bin/kdeinit4
$ rpm -qf /usr/bin/kdeinit4           # in your case dpkg -S /path/to/program
kdelibs4-4.7.2-5.5.1.x86_64 
```

# javascript - 检查是否在struts2中检查了单选按钮

> ID：13171386
> 
> 赞同：0
> 
> 时间：2012-11-01T05:21:32.793
> 
> 标签：javascript, jsp, struts2

我在struts2 中有一个图像标签。我想检查一个单选按钮是否被选中，因为它的 onclick() 事件..请帮助我。

图片标签：

```
<input type="image" src="../image/edit.jpg" alt="img" width="25" height="25"  value="Edit" name="moduleMenu"/> 
```

单选按钮：

```
<s:iterator status="stat" value="modNameList">
                  <s:radio list="moduleName" name="modNameCheck" id="modNameCheckId"/>
                  <br>
                </s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:43:48.753

```
<s:iterator status="stat" value="modNameList">
                  <s:radio list="moduleName" name="modNameCheck" id="modNameCheckId" onclick = "validate(this.value)" />
                  <br>
                </s:iterator>

<script>
function validate(value){
alert(value); 

}

</script>
//or u can pass this.id 

<s:iterator status="stat" value="modNameList">
                  <s:radio list="moduleName" name="modNameCheck" id="modNameCheckId" onclick = "validate(this.id)" />
                  <br>
                </s:iterator>

<script>
function validate(id){
alert(id);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:38:42.177

这个例子可以帮助你：

```
var moduleNameRadio=document.getElementsByName("modNameCheck");

for(var i=0;i<moduleNameRadio.length;i++)
{
       if(moduleNameRadio[i].checked){
          alert('Radio button selected');
          //Add your code here....
      }
} 
```

[您可以在此处](https://stackoverflow.com/questions/1423777/how-can-i-check-if-a-radio-button-is-selected-in-javascript)找到更多相关信息！

# javascript - 通过javascript检测正在使用的@font-face

> ID：13171387
> 
> 赞同：2
> 
> 时间：2012-11-01T05:21:36.117
> 
> 标签：javascript, jquery, css

我需要嗅探 a 的格式，`<p>`以便将信息传递给 a`<iframe>`并匹配格式。

我可以使用 jQuery 获取字体

```
var font = $("p").css('font-family');
var fsiz = $("p").css('font-size'); 
```

但是，如果字体系列是网络字体 - 例如“Open Sans”，我还需要找到`@font-face`加载它的规则的源代码。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T05:47:49.327

查找所有 css 定义的字体，[**在此处**](http://jsfiddle.net/vCmtk/1/)演示（控制台）。

```
function getFonts (obj) {
    var o = obj || {},
        sheet = document.styleSheets,
        rule = null,
        i = sheet.length, j;
    while( 0 <= --i ){
        rule = sheet[i].rules || sheet[i].cssRules || [];
        j = rule.length;
        while( 0 <= --j ){
            if( rule[j].constructor.name === 'CSSFontFaceRule' ){ // rule[j].slice(0, 10).toLowerCase() === '@font-face'
                o[ rule[j].style.fontFamily ] = rule[j].style.src;
            };
        }
    }
    return o;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-09T10:51:52.753

我调整了选择的解决方案，使其在 IE 和 FF 以及 iO 上的 Safari 中也能正常工作。选择的解决方案仅适用于 Chrome。（唉，我不能 - 还 - 为该解决方案添加评论，这就是我将它放在单独的解决方案中的原因。）

```
function getFonts (obj) {
    var o = obj || {},
        sheets = document.styleSheets,
        rules = null,
        i = sheets.length, j;
    while( 0 <= --i ){
        rules =  sheets[i].cssRules || sheets[i].rules || []; // I swapped those two, IE would go wrong
        j = rules.length;
        while( 0 <= --j ){
            if( rules[j].toString() == "[object CSSFontFaceRule]" ){  // This works in IE and FF too
                o[ rules[j].style.fontFamily ] = rules[j].style.src;
            };
        }
    }
    return o;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-17T13:43:51.603

作为对[Paul S](https://stackoverflow.com/a/13171633/148824)答案的一个小改进，我包含了具有字体粗细和样式的嵌套对象作为键，以检索字体的所有版本。

```
function getFonts (obj) {
    var o = obj || {},
        sheet = document.styleSheets,
        rule = null,
        i = sheet.length, j;
    while( 0 <= --i ){
        rule = sheet[i].rules || sheet[i].cssRules || [];
        j = rule.length;
        while( 0 <= --j ){
            if( rule[j].constructor.name === 'CSSFontFaceRule' ){
                if (!(rule[j].style.fontFamily in o)) o[ rule[j].style.fontFamily ] = Object.create(null);
                o[ rule[j].style.fontFamily ][ rule[j].style.fontWeight + '-' + rule[j].style.fontStyle ] = rule[j].style.src;
            };
        }
    }
    return o;
} 
```

# java - Cling UPnP：为搜索设备发出阻塞调用

> ID：13171388
> 
> 赞同：0
> 
> 时间：2012-11-01T05:21:43.620
> 
> 标签：java, upnp

我正在使用[Cling](http://4thline.org/projects/cling/) Java 库来实现 UPnP 控制点。

原生 controlpoint.search() 函数是非阻塞的，通过回调机制报告设备。

有没有办法对搜索进行阻塞调用，当找到设备时返回？或者我可以等到找到设备的状态标志？

（我自己实现这个很简单，但我想尽可能使用原生 API）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:54:51.943

即使 API 允许（它不允许），这也是非常不明智的做法。UPnP 中的设备发现（又称搜索）本质上是异步的。搜索从广播开始，作为控制点的您无法知道设备何时会响应、会有多少响应以及是否有响应。在 UPnP 发现中没有这样的事件，例如“现在我找到了所有设备，并且不会再有” - 这正是您需要拥有的才能进行可靠的阻塞等待。最好的折衷方案可能是带有超时的阻塞等待 - 但是您将设置什么超时？太短意味着某些设备可能无法及时响应（您的私人决定的时间），太长意味着即使没有更多设备响应您仍然会等待 - 但是由于 UPnP ad-hoc 网络的设计，您简直不能

您可能需要解释为什么阻止搜索对您如此重要。

# php - 如何查找此 sql 查询的行数？

> ID：13171389
> 
> 赞同：2
> 
> 时间：2012-11-01T05:21:55.787
> 
> 标签：php, mysql

```
$common_query_string = "Select a.INC_KEY,a.STATE, a.FDID, a.INC_DATE, a.INC_NO, a.EXP_NO, concat(a.NUM_MILE,' ', a.STREET_PRE,' ', a.STREETNAME,' ', a.STREETTYPE,' ',
          a.STREETSUF, ' ',a.APT_NO,' ', a.CITY,' ', a.STATE_ID,' ', a.ZIP5,' ', a.ZIP4) as address, a.latitude, a.longitude, 
          ( 3959 * acos( cos( radians($lat) ) * cos( radians( a.latitude ) )
          * cos( radians( a.longitude ) - radians($lon) ) 
          + sin( radians($lat) ) * sin( radians( a.latitude ) ) ) ) AS distance,
          a.INC_TYPE, a.FF_DEATH, a.OTH_DEATH, a.PROP_LOSS , a.CONT_LOSS,(b.CODE_DESCR) as INC_CODE_DESC, (d.CODE_DESCR) as CAUSE_CODE_DESC";

    $query = sprintf("$common_query_string ,'nfirs' as SOURCE
      From
        (Select * From incident
        Where latitude > '%s' And latitude < '%s' 
        And longitude > '%s' And longitude < '%s' %s) 
        As a , codelookup b,codelookup d
  Where a.INC_TYPE = b.code_value AND b.fieldid = 'INC_TYPE' 
  And  a.CAUSE_IGN  = d.code_value AND  d.fieldid = 'CAUSE_IGN'
      having distance < '%s'
       ", mysql_real_escape_string($minLat), mysql_real_escape_string($maxLat), mysql_real_escape_string($minLon), mysql_real_escape_string($maxLon), mysql_real_escape_string($query_condition), mysql_real_escape_string($radius)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:26:10.870

当您使用较旧的`mysql_`方法时，您可以[`mysql_num_rows()`](http://php.net/mysql_num_rows)在执行查询后使用：

```
$result = mysql_query($query);
$count = mysql_num_rows($result); 
```

*旁注*（`mysql_`方法已被弃用）
我建议重构您的代码以使用推荐的[`mysqli_`](http://us1.php.net/manual/en/book.mysqli.php)或[`PDO`](http://us1.php.net/manual/en/book.pdo.php)方法。您可以在两者中执行相同类型的查询，但更新将使您能够使用面向对象样式的代码、有助于提高可读性的准备好的语句，并进一步保护您的代码免受 SQL 注入。

这是与 相同的计数语法[`mysqli_num_rows()`](http://php.net/mysqli_num_rows)：

```
$result = mysqli_query($dbLink, $query);
$count = mysqli_num_rows($result); 
```

**UPDATE**（直接在查询中计算）
要直接在查询中获取总行数，可以使用 MySQL 的[`COUNT()`](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)：

```
SELECT
    COUNT(*) AS `count`
FROM
    (Select * From incident Where latitude > '%s' And latitude < '%s' And longitude > '%s' And longitude < '%s' %s) As a, codelookup b,codelookup d
WHERE
    a.INC_TYPE = b.code_value AND b.fieldid = 'INC_TYPE' AND  a.CAUSE_IGN  = d.code_value AND  d.fieldid = 'CAUSE_IGN'
HAVING
    distance < '%s' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:27:29.063

```
mysql_num_rows($result); 
```

为您提供查询结果的选定行数。

```
SELECT COUNT(*) FROM yourtable your join yourcondition; 
```

使用 LIMIT 时获取总行数...

如果您使用了 LIMIT 子句但想知道没有它会得到多少行，请在查询中使用 SQL_CALC_FOUND_ROWS，然后是 SELECT FOUND_ROWS();

```
SELECT SQL_CALC_FOUND_ROWS FROM yourtable your join yourcondition 
   LIMIT 10;

SELECT FOUND_ROWS(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:08:17.313

```
mysql_num_rows($result); 

SELECT COUNT(*) FROM yourtable your join yourcondition;

you have to use this :

 *$final_Query='select count(*)as count from ('.$query.')*

and palce this below
Where a.INC_TYPE = b.code_value AND b.fieldid = 'INC_TYPE' 
And  a.CAUSE_IGN  = d.code_value AND  d.fieldid = 'CAUSE_IGN'
having distance < '%s, mysql_real_escape_string($minLat), mysql_real_escape_string($maxLat), mysql_real_escape_string($minLon), mysql_real_escape_string($maxLon), mysql_real_escape_string($query_condition), mysql_real_escape_string($radius)); 
```

# linq - Linq：选择属性集合

> ID：13171394
> 
> 赞同：2
> 
> 时间：2012-11-01T05:22:28.437
> 
> 标签：linq, fluent-nhibernate, linq-to-nhibernate

我有两节课：

```
public class Person
{
   public int Id{get;set;}
   public string Name{get;set;}
   public List<Order> Orders{get;set;}
}
public class Order
{
   public int Id{get;set;}
   public string Data{get;set;}
   public decimal Sum{get;set;}
} 
```

我使用休眠 Linq。如果我想获得 Persan.Name 过滤的订单总数，我这样做：

```
var result = (from person in personRepository.Query
             from order in person.Orders
             where person.Name.Contains("off")
             select order).Sum(order => order.Sum); 
```

如何使用流利的语法做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:23:17.337

试试这个：

```
var result = personRepository.Query
    .Where(person => person.Name.Contains("off"))
    .SelectMany(person => person.Orders)
    .Sum(order => order.Sum); 
```

如果此解决方案在没有选择订单时抛出错误，`ArgumentNullException`请尝试以下两步解决方案：

```
var orders = personRepository.Query
    .Where(person => person.Name.Contains("off"))
    .SelectMany(person => person.Orders);
var result = orders.Any()
    : orders.Sum(order => order.Sum)
    ? 0; 
```

# boost - 提升 multi_index hashed_unique 与 unordered_map 查找性能

> ID：13171398
> 
> 赞同：0
> 
> 时间：2012-11-01T05:22:40.437
> 
> 标签：boost, boost-multi-index, boost-unordered

`boost::unordered_map`'s 和 `boost::multi_index`容器（具有散列唯一索引）的查找性能是否相同。我想在`boost::multi_index`容器中您必须进行两次查找：首先，在表示散列索引的表中（并包含指向与该键关联的实际值的指针）和第二次查找，因为您需要遵循该指针才能达到您的价值。似乎该`boost::unordered_map`实现可能会避免第二次查找（因此会更快）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:57:28.647

查找性能应该完全相同——Boost.Multiindex 内部结构不涉及您似乎假设的额外间接。无论如何，当有疑问时，请自行查看。

# php - laravel中未定义的常量php错误消息

> ID：13171402
> 
> 赞同：-1
> 
> 时间：2012-11-01T05:23:04.027
> 
> 标签：php, html, laravel

我是 MVC 框架的新手。我在 Laravel 框架中创建了一个应用程序，它运行良好。现在经过一些修改，当我想查看索引页面时，会向我显示以下错误-

信息：

> 使用未定义的常量 php - 假定为 'php'
> 
> 地点：
> 
> C:\wamp\www\alpha.team.com\laravel\view.php(354) : eval()'d 代码在第 32 行

这是我的 index.blade.php 的视图代码

```
@layout('/layouts/layout')
         <link href='http://fonts.googleapis.com/css?family=Neucha' rel='stylesheet' type='text/css'> 
         <div id="top">
        @section('navigation')
        <!-- <li class="active"><a href="/home/view/<?php //echo Auth::user()->username; ?>"><i class="icon-user"></i>&nbsp;My Profile</a></li> -->
        <li><a href = "/dashboard"><i class="icon-book"></i>&nbsp;Dashboard</a></li>
        @parent
        @endsection
          </div>
         @section('content')
         <!-- For showing error message if any error occours-->
          <?php if(Session::get('error')): ?>
          <div class="alert alert-error">
           <button type="button" class="close" data-dismiss="alert">×</button>
           <strong>Warning!</strong> <?php echo Session::get('error'); ?>
         </div>
         <?php endif; ?>

         <!-- For showing success message.-->
             <?php if(Session::get('success')): ?>
             <div class="alert alert-success">
                <button type="button" class="close" data-dismiss="alert">×</button>
                <strong>Well done!</strong> <?php echo Session::get('success'); ?>
             </div>
             <?php endif; ?>

         <div class="field-section">
          <div class="hero-unit">
            <!-- <a id="logo" href="#"><img alt="TechIndyeah" src="/uploads/logo.png" style="vertical-align: top;"></a> -->
            <h1 style="display:inline;">Team TechIndyeah</h1>
              <ul class="teams" style="text-align:center;">  
                             @foreach($departments as $dept)
                             <?php// print_r($dept); ?>
                               <li>
                                 <a href="#<?php echo implode('_',explode(' ',$dept->name));?>"><?php echo $dept->name; ?></a>
                               </li> 
                               @endforeach
                           </ul>
          </div>
         </div> <!-- field-section div ends here-->
         <!-- <div class="container"> -->
          <div class="wrapper">

         <div class="hero-unit" id="bg-pattern"> 

          <h1 class="home-tag"> Tech-ing India<span><p>The team of enthusiastic tech fanatics</p></span></h1>
            <p class="home-ptag">We are a team of enthusiastic tech fanatics and yes we are Apple fanboys too. We have sailed out together on a small boat and we do live in what Seth Godin says, “Small is the next big”. We love technology and we love you. Our team is free, creative and always brimming with ideas.</p>
              <div class="row" style="background:none;">
                <div class="span8">
                  <h1 class="home-tag" >About Us</h1>
                  <p class="home-ptag">TechIndyeah has a team which is highly process oriented and has a sharp client-centric approach. Our mission is to help you to build your footprints in business. We are a team inspired by a vision and driven by technology. We are driven by an offbeat approach when it comes to client servicing and support. We have been serving our clients for a long time and have won accolades galore. We are a team and we believe in making our time resourceful so that our clients get the most out of us. We are a band of developers, designers and marketers who can take your business online and also combat the stiff competition from similar players in your domain.  </p>
                </div>
                <div class="span3">
                  <object type="image/svg+xml" data="/img/logo.svg">
                  <img alt="TechIndyeah" src="/img/logo.png" style="vertical-align:top;">
                </object>
                </div>
              </div>

          <div class="row">
            <div class="span4">
          <!-- <a id="logo" href="#"><img alt="TechIndyeah" src="/uploads/logo.png"></a> -->
        </div>

        <!-- <div class="span6" id="caption">
          <h3>Here We Are</h3>
        </div> -->
        </div>
              <div class="row">
                     <?php $something = $errors->all(); 
                     if(!empty($something)): ?>
                    <div class = "alert alert-error">    
                    <button type="button" class="close" data-dismiss="alert">×</button>                    
                                              @foreach ($errors->all('<p>:message</p>') as $input_error)
                                              {{ $input_error }}
                                              @endforeach 
                              </div>              
                     <?php endif; ?>                
              </div>
              <!-- For showing all employee name in the front page.. Showcasing them..-->
                   <div id="hero-unit">     
                           <script type="text/javascript">

                              //The departments are randomly comming in the page when it is first loaded..
                             (function($) {
                                     // Get the list items and hide them
                                     var items = $(".teams > li").css({opacity:0});
                                     // Shuffle them
                                     shuffle(items);
                                     // Start the fade-in queue
                                     nextItemFade(items);

                                     // Animation callback to start next fade-in
                                     function nextItemFade(items) {
                                             // Fade in the first element in the collection
                                             items.eq(0).animate({opacity:1}, 400, function() {
                                                     // Recurse, but without the first element
                                                     nextItemFade(items.slice(1));
                                             });
                                     }

                                     // Shuffles an array
                                     // Based on http://jsfromhell.com/array/shuffle
                                     function shuffle(a) {
                                             var j,              // Random position
                                                 x,              // Last item
                                                 i = a.length;   // Iterator
                                             // Loop through the array
                                             while(i) {
                                                     // Select a random position
                                                     j = (Math.random() * i) | 0;
                                                     // Get the last item in the array
                                                     x = a[--i];
                                                     // Swap the last item with the item at the selected position
                                                     a[i] = a[j];
                                                     a[j] = x;
                                             }
                                             return a;
                                     }

                                     /* Minified version
                                     function shuffle(a) {
                                             for(var j, x, i = a.length; i; j = (Math.random() * i) | 0, x = a[--i], a[i] = a[j], a[j] = x);
                                             return a;
                                     } */
                             })(jQuery);

                             $(".nav1 li").each(
                             function(intIndex) {

                             var l = Math.floor(Math.random() * $(".nav1").width());
                             var t = Math.floor(Math.random() * $(".nav1").height());

                             $(this).css("left", l);
                             $(this).css("top", t);

                             $(this).on(
                                 "click",
                                     function() {
                                         alert("l=" + l + " t=" + t);
                                     }
                                 );

                             }

                             );

                             $(".nav1 li").each(
                             function(intIndex) {

                             var l = Math.floor(Math.random() * 940);
                             var t = Math.floor(Math.random() * 500);

                             $(this).css("left", l);
                             $(this).css("top", t);

                             $(this).on(
                                 "click",
                                     function() {
                                         alert("l=" + l + " t=" + t);
                                     }
                                 );

                             }

                             );

                           </script>
                            <style type="text/css">
                            .nav1
                            {
                              position:relative;
                            }

                               .nav1 li
                               {
                                   padding: 10px;
                                   position:absolute;
                               }
                           </style>

                        </div> <!-- #hero-unit ends here--> 
                        <!-- </div>  mucarousel div ends here  -->
                 <div class="member-list">
                    <!-- <object type="image/svg+xml" data="/img/vector-tree2.svg"> -->
                    <!-- <img alt="TechIndyeah" src="/img/vector-tree2.png" style="vertical-align:top;"> -->
                  <!-- </object> -->
                 @foreach($departments as $dept)
                 <div id="<?php echo implode('_',explode(' ',$dept->name));?>" class="demo">
                  <ul class="member">
                    <?php $users = User::where('department_id','=',$dept->id)->get();
                       // $users = User::where('department_code','=',$dept->code)->get();
                     ?>
                     @foreach($users as $user)
                     <li class="new-element" style="display:inline-block;" rel="tooltip" data-placement="right" data-original-title="<?php echo $user->first_name." ".$user->last_name;?>">
                       <a href="/home/view/<?php echo $user->username;?>" rel="tooltip" data-placement="right" href="#" data-original-title="<?php echo $user->first_name." ".$user->last_name."</br> ".$user->designation;?>">
                         <img class="hover-img" src="http://graph.facebook.com/<?php echo $user->facebook_id;?>/picture?type=large">
                       </a>
                     </li>
                     @endforeach
                  </ul>
                  <a href="#top" class="scrollup">Back To Top</a>

                 </div>
                @endforeach
                   <script type="text/javascript">
                  $(window).scroll(function(){
                          if ($(this).scrollTop() > 50) {
                              $('.scrollup').fadeIn();
                          } else {
                              $('.scrollup').fadeOut();
                          }
                      });     
                   </script>
                 <script type="text/javascript">
                //all links which start with a # will have an animated scroll to the target.
                    $('a[href^="#"]').on('click.smoothscroll',function (e) {
                        e.preventDefault();
                        var target = this.hash,
                            $target = $(target);
                            // console.log($target);
                        $('html, body').stop().animate({
                            'scrollTop': $target.offset().top - 10
                        }, 900, 'swing', function () {
                            window.location.hash = target;
                        });
                    });

                   $('.new-element').children('a').tooltip();
                   </script>
                </div>
                <h1 style="text-align:center;font-family: 'Lato light', sans-serif;text-shadow: 2px 1px #848686;">TechIndyeah Software Pvt. Ltd.</h1>
              </div>
         </div>     
         @endsection
         </div> 
```

我无法理解。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:28:21.863

我对 Laravel 不熟悉，但似乎一个`eval()`名为的文件中的一个`view.php`正在渲染一个模板。所以我的猜测是你的模板中的某个地方（无论正在渲染什么模板）你有`php`你真正的意思`'php'`。

例如：

```
echo $data[php];   //you have this
echo $data['php']; //but it should be this
//or
if(php == $var){}   //you have this
if('php' == $var){} //but it should be this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:28:12.790

您能分享一下您的 view.php 文件中的一些代码吗？

你在那个文件的第 32 行做错了，所以如果我们能看到代码实际上是什么，那将非常有帮助:)

# web-services - Web服务中的客户端生成（jax）

> ID：13171404
> 
> 赞同：0
> 
> 时间：2012-11-01T05:24:00.680
> 
> 标签：web-services, jax-ws

我创建了一个 Web 服务端点并公开了一个方法，现在我想为我的方法添加更多参数，
所以每次我更改我的方法时，我都必须重新生成我的客户端。有什么办法让我
不必一次又一次地生成我的客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:16:36.603

不，没有办法。如果您更改方法，则`WSDL`文件也会更改。Web 服务通过`SOAP`客户端和服务器之间进行通信。`WSDL`当您部署 Web 服务应用程序并且它已更改时，如果类是从旧文件生成的，那么客户端应该如何知道是否添加了新方法或新参数。`SOAP`客户端将按照旧的发送请求，如果与接收到的消息相关的部分发生任何更改`WSDL`，服务器将无法理解从客户端接收到的消息。`SOAP``WSDL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:52:59.363

您可以设计一个更好的 web 服务/端点，它接受独立的 xml 文档作为参数，以便操作签名保持不变，即使您添加更多参数。

更一般地说，Web 服务将其操作公开为文字方法签名是一种不好的形式。

# jquery - 在我的 jquery MVC4 应用程序中没有触发 Ajax 发布功能？

> ID：13171405
> 
> 赞同：0
> 
> 时间：2012-11-01T05:24:05.607
> 
> 标签：jquery, asp.net-mvc-4

大家好，我有一个 ajax，它必须将数据发布到我的控制器操作方法，但发布功能没有触发它没有击中我的操作方法，谁能告诉我我做错了什么，我在 onclick 上调用的功能保存菜单我的按钮的功能，一切都很好，功能保存菜单和分析树正在运行，但我的 ajax 方法没有触发：

```
 function savemenu() {
        var columns = $("#columnholder > div").length;
        $("#columnholder > div").each(function (data) {
            var divid = $(this).attr("id");
            parseTree(divid);
        });
    }
    function parseTree(ul) {
        var brand = "";
        var parent;
        alert(ul);
        $("#" + ul).find("ol").each(function (event, ui) {                
            $("#" + ul).find("li").each(function () {
                parent = $(this).attr("parent");
                if ($(this).children("span").length) {
                    brand = brand + $(this).children("span").html() + '~' + $(this).children("span").attr('id') + "=>" + parent + '|';                       
                    alert(brand);
                }                    
            });
            return false;
        });           
        var postdata = JSON.stringify(brand);            
        var MenuBuilderURL = '@Url.Action("MenuDrag","MenuBuilder")';
        alert(MenuBuilderURL);
        $.ajax({
            type: "POST",
            url: "/MenuBuilder/MenuDrag/",
            dataType: "json",
            data: JSON.stringify(brand),
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                alert(data.Result);
            },                
            traditional: true
        });
    } 
```

这是我的控制器操作方法

```
 public ActionResult MenuDrag()
    {
        return View();
    }
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult MenuDrag(List<String> data)
    {
        return View();
    } 
```

有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:12:59.793

正如您所说，ajax 调用正在命中您的方法，现在如果您想将字符串发布到操作中

代替

```
 var postdata = JSON.stringify(brand); 
```

和

```
 var postdata = {};
        postdata.menustring = brand; 
```

并在您的 ajax post 方法中

```
 $.ajax({
            url: 'yoururl',
            type: "POST",
            dataType: "json",
            data: JSON.stringify(postdata),
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                alert(data.Result);
            },
            traditional: true
        }); 
```

希望它会帮助你

# c# - 如何在 C# 中将字符串值转换为 XML 文件？

> ID：13171406
> 
> 赞同：1
> 
> 时间：2012-11-01T05:24:10.880
> 
> 标签：c#, web-services

我想将字符串转换为 XML 文件。
我将 XML 数据发送到另一台服务器并获得响应。

所以，我写了这段代码。

```
rsp = req.GetResponse();           
using (HttpWebResponse response = req.GetResponse() as HttpWebResponse)
{
    StreamReader reader = new StreamReader(response.GetResponseStream());
    string Response = reader.ReadToEnd();
    // This is respons andI want to read it
} 
```

怎么读`string Response`？它是 XML 格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:02:48.860

如果`Response`字符串对应Xml。您可以使用这段代码将其*转换*/*保存*到`Xml`使用`XDocument`类的文件中。

```
XDocument doc = XDocument.Load(Response);
doc.Save("File Path"); 
```

# lisp - 像在 lisp 中找到的东西

> ID：13171408
> 
> 赞同：1
> 
> 时间：2012-11-01T05:24:17.213
> 
> 标签：lisp, flatten

lisp 中是否有类似 find 的函数返回 true 而不是我们要查找的元素？

例子：

我想让它做

`(find 'x '(a c x)) = t`

不是

`(find 'x '(a c x)) = x`

另外，我问的原因是因为我试图到达列表中最深的元素。我的计划是每次递归调用它时都将列表展平。

然后我会停止递归调用

`(mapcar 'atom list)`

会告诉我里面的每一个原子都是真的。

你认为这是解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:26:21.823

没有这样的功能，但写一个再简单不过了：

```
(defun find-t (&rest args)
  (when (apply #'find args)
    t)) 
```

也可以代替`(mapcar 'atom list)`您使用`(every #`(eql t %) list)`，即检查中的每个项目`list`是否准确`t`。（这`#`()`是我使用的 one-argument 的语法糖`lambda`。）

但总体而言，尚不清楚您要通过所有这些实现什么。你能详细说明你想做什么吗？

# android - 更新 Android 应用程序

> ID：13171412
> 
> 赞同：-5
> 
> 时间：2012-11-01T05:24:30.437
> 
> 标签：android

当我尝试在平板电脑上安装我的 android 应用程序时出现以下错误

```
ERROR:
Re-installation failed due to different application signatures.
You must perform a full uninstall of the application. WARNING: This will remove the application data!
Please execute 'adb uninstall com.spundhan.expensetracker' in a shell.
 Launch canceled! 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:28:33.253

这意味着您已经在平板电脑上安装了此应用程序。例如，当您从 Eclipse 安装它然后尝试从 Play 商店更新它时，就会发生这种情况。您将需要卸载该应用程序，然后重新安装。eclipse 和 play store 有不同的签名，这就是为什么你不能用不同的签名更新应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:38:06.293

这显然意味着您没有正确安装应用程序，因此只需尝试通过转到`Setting=>manage application=>you application i.e expensetracker`或将您的设备连接到计算机并打开命令提示符并转到您的 android sdk来进行卸载，例如 -

**D:\android\android-sdk-windows\platform-tools>adb 卸载 com.spundhan.expensetracker**

因此它会正确卸载您的应用程序，并希望当您再次尝试安装它时不会发现任何错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T05:36:59.137

是的，当您已经在您的设备或模拟器上安装了您的 apk，然后您再次尝试从市场或任何其他媒体安装相同的应用程序时，会发生很多次。

所以这将尝试替换您的应用程序。这样就会显示警报消息，

“您已经安装了 Example.apk 进行安装，您必须先卸载。”

因此，一旦您卸载应用程序，它将删除与您的应用程序相关的所有数据。所以，现在希望你下次关心这个。

# vba - 用于将“&&”、“&&-”、“&-”等符号和数字提取到不同列中的 VBA 代码

> ID：13171418
> 
> 赞同：3
> 
> 时间：2012-11-01T05:25:11.380
> 
> 标签：vba

我有一张表，其中包含 A 列中的“5670&&2”、“1281&&-3&-5&&7”等值范围。

请帮助我以下列方式提取 VBA 中的输出：

例如 5670&&2 我要求 A1 单元格包含 5670，B1 单元格包含 &&，C1 单元格包含 2。

对于例如 1281&&-3&-5&&7，我要求 A1 单元格包含 1281，B1 单元格包含 &&-，C1 单元格包含 3，D1 单元格包含 &-，E1 单元格包含 5，F1 单元格包含 &&，G1 单元格包含 7。

请帮忙。

谢谢。，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:56:40.103

在这里，我尝试编写代码来将数字与非数字分开。数字和非数字被复制到不同的列，例如 Excel 文本到列。代码有点疯狂，如果你需要我会提供评论。使用 ActiveSheet.UsedRange.Columns(1).Cells 作为输入。

```
Option Explicit

Sub SeparateNumbers()
  Dim targetRange As Range
  Dim cellRange As Range
  Dim charIndex As Integer
  Dim oneChar As String
  Dim nextChar As String
  Dim start As Integer
  Dim copiedCharsCount As Integer
  Dim cellValue As String
  Dim columnIndex As Integer

  Set targetRange = ActiveSheet.UsedRange.Columns(1).Cells

  For Each cellRange In targetRange
    columnIndex = cellRange.Column
    start = 1
    copiedCharsCount = 0
    cellValue = cellRange.Value
    If (VBA.Strings.Len(cellValue) <= 1) Then GoTo nextCell

    For charIndex = 2 To Len(cellValue)
      oneChar = VBA.Strings.Mid(cellValue, charIndex - 1, 1)
      nextChar = VBA.Strings.Mid(cellValue, charIndex, 1)
      If VBA.IsNumeric(oneChar) And VBA.IsNumeric(nextChar) Then GoTo nextCharLabel
      If Not VBA.IsNumeric(oneChar) And Not VBA.IsNumeric(nextChar) Then GoTo nextCharLabel

      cellRange.Offset(0, columnIndex).Value = VBA.Strings.Mid(cellValue, start, charIndex - start)
      columnIndex = columnIndex + 1
      copiedCharsCount = copiedCharsCount + (charIndex - start)
      start = charIndex

nextCharLabel:
      If charIndex = Len(cellValue) Then
        cellRange.Offset(0, columnIndex).Value = VBA.Strings.Right(cellValue, charIndex - copiedCharsCount)
      End If
    Next charIndex

nextCell:
  Next cellRange
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:17:23.173

Here is one more code. As a side product, function TextSplitToNumbersAndOther can be used independently as a formula to achieve the same effect.

To prevent accidental firing of the macro in a wrong sheet or a wrong column and overwriting neighbouring columns with scrap, named range "Start_point" should be defined by a user. Below this range in the same column, all data will be processed till the first blank row.

Spreadsheet example: [http://www.bumpclub.ee/~jyri_r/Excel/Extracting_symbols_into_columns.xls](http://www.bumpclub.ee/~jyri_r/Excel/Extracting_symbols_into_columns.xls)

Option Explicit

```
Sub ExtractSymbolsIntoColumns()

Dim rng As Range
Dim row_processed As Integer
Dim string_to_split As String
Dim columns_needed As Long
Dim counter As Long

row_processed = 1
 counter = 0
  Set rng = Range("Start_point")
    While rng.Offset(row_processed, 0).Value <> ""
      string_to_split = rng.Offset(row_processed, 0).Value
         columns_needed = TextSplitToNumbersAndOther(string_to_split)
          For counter = 1 To columns_needed
            rng.Offset(row_processed, counter).Value = _
              TextSplitToNumbersAndOther(string_to_split, counter)
          Next
         row_processed = row_processed + 1
      Wend
End Sub

Function TextSplitToNumbersAndOther(InputText As String, _
    Optional SplitPieceNumber As Long) As Variant

Dim piece_from_split(100)  As Variant
Dim char_from_input As String
Dim word_count As Long
Dim counter As Long
Dim char_type(100) As Variant

 InputText = Trim(InputText)

   If Not IsNull(InputText) Then
     word_count = 1
      piece_from_split(word_count) = ""
       For counter = 1 To Len(InputText)
         char_from_input = CharFromTextPosition(InputText, counter)
          char_type(counter) = CharTypeAsNumber(char_from_input)
            If counter = 1 Then
              piece_from_split(word_count) = char_from_input
            Else
              If (char_type(counter - 1) = char_type(counter)) Then
                 piece_from_split(word_count) = piece_from_split(word_count) & char_from_input
                   'Merge for the same type
              Else
                 word_count = word_count + 1
                   piece_from_split(word_count) = char_from_input

              End If
            End If
       Next
   End If

  If SplitPieceNumber = 0 Then
    TextSplitToNumbersAndOther = word_count
  Else
      If SplitPieceNumber > word_count Then
         TextSplitToNumbersAndOther = ""
      Else
        TextSplitToNumbersAndOther = piece_from_split(SplitPieceNumber)
      End If
  End If

End Function

Function CharTypeAsNumber(InputChar As String, Optional PositionInString As Long) As Long

   If PositionInString = 0 Then PositionInString = 1

     If Not IsNull(InputChar) Then
       InputChar = Mid(InputChar, PositionInString, 1)
        Select Case InputChar
          Case 0 To 9
            CharTypeAsNumber = 1
          Case "a" To "z"
            CharTypeAsNumber = 2
          Case "A" To "Z"
            CharTypeAsNumber = 3
          Case Else
            CharTypeAsNumber = 4
         End Select
     Else
           CharTypeAsNumber = 0

     End If

End Function
Function CharFromTextPosition(InputString As String, TextPosition As Long) As String

   CharFromTextPosition = Mid(InputString, TextPosition, 1)

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:17:26.200

您可以编写一个 UDF（用户定义函数）来实现目标。您的两个示例按顺序（升序）过滤到 Excel 中的相邻列（A、B、C、D ...）

那么从逻辑上假设，您永远不会遇到必须将字符串分成不相邻列的情况是否正确？例如，1234 到 A，&& 到 C，3 到 D……导致 A、C、D。

假设 2：您的拆分字符串不需要超过 Excel 所能提供的列。

您可以尝试的步骤： 1\. 检查您的字符串是否为空 2\. 将其拆分为数字以外的字符 3\. 在每个非数字字符的开头和结尾处，您可以继续到下一个相邻列。

搜索帮助：在 Excel 中将字符串拆分为多列 - VBA

# ruby - 来自 ruby 脚本的 OmniAuth/OAuth 身份验证

> ID：13171420
> 
> 赞同：3
> 
> 时间：2012-11-01T05:25:36.160
> 
> 标签：ruby, oauth, omniauth

有没有办法可以从独立的 ruby​​ 脚本中测试 OmniAuth 身份验证？我可以在网上找到的每个资源都只在 Rails 项目中列出了它的使用情况。这个链接也是：[http ://www.omniauth.org/](http://www.omniauth.org/)

换句话说，我找不到任何像[FitGem](https://github.com/whazzmaster/fitgem/wiki/The-OAuth-Process)这样的客户。fitbit [API](https://wiki.fitbit.com/display/API/OAuth+Authentication+in+the+Fitbit+API)使用 Oauth 身份验证。FitGem 是一个客户端接口，用于测试使用 OAuth 令牌对 FitBit 的身份验证/授权。关于 FitGem 的更多详细信息：[http ://www.fitbitclient.com/guide/getting-started](http://www.fitbitclient.com/guide/getting-started)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T16:36:41.700

我意识到这是旧的，但我在谷歌搜索时遇到了它，所以其他人也可能。也许这会帮助下一个路人......

要回答这个问题 - 不，不可能在简单的独立脚本中使用 OmniAuth。froderik 说的是正确的，OmniAuth 旨在用于基于机架的框架（Rails、Sinatra、Pakyow 等）上的应用程序中。

不过，为了稍微扩展一下，OmniAuth 依赖于拦截和发送 HTTP 请求到您的应用程序的能力。默认情况下，OmniAuth 拦截请求以`/auth/:provider`启动授权过程，然后根据身份验证尝试的结果向其中一个`/auth/:provider/callback`或发送回调。`/auth/failure`

显然，该功能超出了独立脚本的范围。但是，如果我要推荐使用 OmniAuth 编写快速测试的解决方案，我会推荐[Sinatra](http://www.sinatrarb.com/)。它当然不是唯一的解决方案（任何基于机架的框架都可以），但它以最小的开销提供了所需的功能。

# php - 通过php中的几个页面传递变量/数组

> ID：13171430
> 
> 赞同：0
> 
> 时间：2012-11-01T05:26:27.893
> 
> 标签：php, arrays, variables, foreach, parameter-passing

我的代码以多个 php 数组开头，其中 XML 数据以下列方式通过多个复选框传递（$i 循环通过 XML doc 中的项目，值传递选定行 i 中的特定数据）：

```
$MoneyLine = $event->periods->period[0]->moneyline; //background info
$AwayMoneyLine[] = $MoneyLine->moneyline_visiting;  //background info
<input type='checkbox' name='AwayMoneyLine'   value='$Date[$i];$AwayRotNum[$i];$AwayParticipantName[$i];$ATotalPoints[$i]'/> 
```

在我的下一页上，我以以下方式传递变量，但它们不会在下一页上产生：

```
if(isset($_POST['AwayMoneyLine'])){  
foreach($_POST['AwayMoneyLine'] as $value) {   
$d = explode(';',$value);    
echo '<input type="hidden" name="hidden[]" value="$d[0];$d[1];$d[2];$d[3];$d[4]">'; 
```

这是我试图在下一页上获取数据的方式。关于如何将变量传递到此页面的任何建议？在表单上（也在 $d 的 var_dump 上），我得到 $d[0]、$d[1] 等。非常感谢任何帮助！：

```
foreach($_POST['hidden'] as $value) {  
$f = explode(';',$value);  
echo 'Here is your following bet:';  
echo '<table cellpadding="0" cellspacing="0" border="1" bordercolor="#585858" width=100%>';  
     echo "<tr><td>$e[0]</td><td>$f[0]</td><td>$f[1]</td><td>$f[2]</td><td>$f[3]</td><td>$f[4]</td></tr>";  
}  
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:02:09.000

将代码更改为：

```
echo "<input type=\"hidden\" name=\"hidden[]\" value=\"$d[0];$d[1];$d[2];$d[3];$d[4]\">"; 
```

$d[0];$d[1];$d[2];$d[3];$d[4] 将不会在您放入单引号时打印。您应该使用双引号和转义属性，例如 type=\"hidden\"、name=\"hidden[]\" 等，

例如：

```
<?php

$name = 'foo';
echo "$name";
echo '<br />';
echo '$name';
?> 
```

输出：

```
foo
$name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:05:20.370

```
use $serial=serialize($array);
echo "<input type=\"hidden\" name=\"hiddenfield\" value=\"<?php echo$serial; ?>">"; 
```

# cocoa - 为什么我使用 UIImageJPEGRepresentation 方法时图像的字节数会发生变化？

> ID：13171431
> 
> 赞同：2
> 
> 时间：2012-11-01T05:26:33.017
> 
> 标签：cocoa

我正在尝试使用套接字将图像文件从客户端（Mac）发送到服务器（UNIX）。我正在使用大小为 10.2 KB 且磁盘上大小为 16 KB 的图像文件。当我使用 UIImageJPEGRepresentation(image, 1.0) 方法将此图像转换为 NSData 并按顺序转换为字节时，传输到服务器的字节数约为 55 KB。同时，如果我使用 0.95 作为compressionQuality，则大小降至 22 KB。最有趣的部分是，对于大约 3400 字节（磁盘上 4 KB）的较小图像，只有当我将 compressionQuality 设置为 1.0（发送 9300 字节）时才传输图像，而在给出 0.75 时不会传输图像，这完全相反以 0.75 而不是 1.0 传输的较大文件的情况

任何帮助表示赞赏，并在此先感谢

我一直在使用 UIImageJPEGRepresentation 将图像转换为 NSData 并实习生从该图像中获取字节并通过套接字发送它。这不是发送图像文件的正确方法吗？如果没有，请引导我走正确的道路。

# android - 代码在果冻豆中不起作用

> ID：13171435
> 
> 赞同：1
> 
> 时间：2012-11-01T05:27:10.390
> 
> 标签：android, json

我有这段代码`Json`从 url 返回对象。它工作正常，`froyo`但相同的代码在`Jelly Beans`.

我的代码有问题吗？

请帮助我，这是我的代码

```
 public static JSONObject getJSONfromURL(String url) {

    // initialize
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jArray = new JSONObject(result);
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    return jArray;
} 
```

这是我的日志错误

`11-01 11:01:48.437: E/log_tag(1044): Error in http connection android.os.NetworkOnMainThreadException 11-01 11:01:48.437: E/log_tag(1044): Error converting result java.lang.NullPointerException 11-01 11:01:48.437: E/log_tag(1044): Error parsing data org.json.JSONException: End of input at character 0 of`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:39:45.767

您正在尝试在主线程上建立网络连接。而是使用`AsyncTask`. 因为网络任务是长任务。在 froyo 中，您可以在主线程上建立网络，但在更高版本的 android 中，您必须使用`Async Task`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:42:30.067

在后台线程中调用服务器。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    new AsyncTask<Void,Void,Void>() {

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            JSONObject jObject = getJSONfromURL("http://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20location%3D%2248907%22&format=json");
            return null;
        }
    }.execute();
}
public JSONObject getJSONfromURL(String url) {

    // initialize
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jArray = new JSONObject(result);
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    return jArray;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T05:42:54.187

从 Android API v15 开始，它不需要在主线程上工作的繁重进程。所以你应该将你的逻辑移动到另一个线程，比如下面的源代码：

```
new Thread(new Runnable() {
   public void run() {
        // your logic
   }                        
}).start(); 
```

更多信息请参考 [http://developer.android.com/guide/practices/responsiveness.html](http://developer.android.com/guide/practices/responsiveness.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T05:43:21.847

是的，它关于`android.os.NetworkOnMainThreadException` 使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)执行网络相关任务的错误。

以另一种方式，您可以通过在您的`onCreate()`

```
if (android.os.Build.VERSION.SDK_INT > 9) {
StrictMode.ThreadPolicy policy = 
        new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);
} 
```

但是看到禁用`StrictMode`策略不是一个好主意，所以你最好去`AsyncTask`

# datagrid - jEasyUI 中字段的 onclick 操作

> ID：13171440
> 
> 赞同：1
> 
> 时间：2012-11-01T05:27:52.043
> 
> 标签：datagrid, jquery-easyui

使用 jEasyUI，我想从表中执行 Master/Detail 查找。

**掌握**

```
10
12 
```

**细节**

```
A       B
----    -----
10 10,  Cat,20
10 10,  Cow,2
10 10,  Chicken,11
12 12,  Pig,2 
```

`10`当我在上面的**Master 表** 中单击时`dg1`，我希望**Detail 表** `dg2`更新以显示 B 属于 A。

有人可以帮助设置将执行此操作的 onclick 事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:43:46.870

试试这个，（dg1的onclickrow事件）

```
onClickRow:function(row){

    var row = $("#dg1").datagrid('getSelected'); 
    $('#dg2').datagrid({  

     url: 'getdetaildata.action?masterid='+row.id})  

 } 
```

# iphone - 以编程方式重新创建视图

> ID：13171445
> 
> 赞同：0
> 
> 时间：2012-11-01T05:28:18.140
> 
> 标签：iphone, ios, view, recreate

我正在调用以下代码片段来交换视图。（在屏幕顶部，有一个`UISegmentedControl`切换视图）

```
SomeViewController* vc = [[SomeViewController alloc] init];
self.view = vc.view; 
```

当用户可以通过单击 上的第一个按钮切换回原始视图时`UISegmentedControl`。

我应该如何重新创建视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:40:19.003

仅作为示例和一个想法，如果您使用以下逻辑，那么很容易满足您的要求..

添加为您的`self.view`in`viewDidLoad:`方法的子视图并将其隐藏...

```
- (IBAction)segmentedControlChangedValue:(id)sender{
    if (segmentedControl.selectedIndex == 0) {
        vc.hidden = YES;
    }
    else if (segmentedControl.selectedIndex == 1) {
        vc.hidden = NO;
        [self.view bringSubviewToFront:vc];
    }
} 
```

# c++ - 在类之间传递信息

> ID：13171447
> 
> 赞同：-1
> 
> 时间：2012-11-01T05:28:21.277
> 
> 标签：c++, class

我将尝试正确地表达这一点。如果需要，请要求澄清。

我有一个类（我们称之为a 类），它有一个方法可以用ifstream 打开一个文件并从文件中读取数据。我还有另一堂课（我们称它为 b 类）。我需要从a类中获取该信息并将其传递给b类。执行此操作的方法是从类 b 调用的。我以为我可以

1.  声明从 a->b 继承
2.  声明友元函数或
3.  只需在 b 类中声明一个 var，类型为 a 类，然后使用 a.function 运行函数。

但无论如何，结果总是输出一个？如果我自己运行 a 类，它工作正常（读取数据并输出数据）。

您不能在类之间使用 infile.get 运行函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:42:09.680

通常，您应该在 2 个类之间定义一个 API。在这种情况下，您的 API 可以是 B 类中的一个方法，该方法期望从 A 类中调用您需要传输的数据。像这样的东西：

```
//B header file
struct dataType;
class B
{
    //...
public:
    statusType passData(dataType &x);
};

//A header file
struct dataType   //shared data type between the 2 classes
{
    //internal structure of your data
};

class A
{
    B *objB;   //link to B instance (the receiver)
    statusType acquireData();
};

//cpp file
#include "A.h"
#include "B.h"
statusType B::passData(dataType &x)
{
    //do whatever you need with the data
}

statusType A::acquireData()
{
    //do your reading from file here into x
    objB.passData(x);
} 
```

这个例子演示了在 A 类和 B 类之间创建简单的接口。任何其他更紧密的关系，例如继承或组合，也是可能的，但这实际上取决于您的要求，并且意味着比您所说的更强的关系。否则它将是（即使有效）设计缺陷。

# jquery - 从magento社区安装magento的jquery扩展

> ID：13171449
> 
> 赞同：2
> 
> 时间：2012-11-01T05:28:25.537
> 
> 标签：jquery, magento

我正在尝试在我关注的 magento 主页中包含 nivo 滑块，

```
http://shakyaabiral.wordpress.com/2011/04/24/nivo-slider-in-magento-front-page/ 
```

我有以下错误

```
 Uncaught ReferenceError: jQuery is not defined 
```

因为我还没有为 magento 安装 jquery。我不知道如何从 magento 社区将 jquery 安装到 magento。我试图点击这个链接，

[http://www.magentocommerce.com/magento-connect/mygento-jquery-library-and-powerful-plugins.html](http://www.magentocommerce.com/magento-connect/mygento-jquery-library-and-powerful-plugins.html)

我不明白他们提供的扩展密钥的用途或位置。

我也试过包括 jquery

```
<action method="addJs">
<script>nivo-slider/jquery.min.js</script>
</action> 
```

但它不工作..

我正在使用 Magento 1.7

谁能帮我这个？

感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T07:36:18.350

```
<action method="addJs"><script>nivo-slider/jquery.min.js</script></action> 
```

它是正确的。您的 jquery.min.js 文件是否位于`/js/nivo-slider/jquery.min.js`？请检查路径。

从管理员刷新缓存并刷新您的当前页面。

如果不起作用，请通过右键单击浏览器查看源代码并检查是否添加了 jquery.min.js 文件并单击它以了解文件是否被获取。如果没有，您提供的 jquery 文件路径不正确。请验证 jquery.min.js 的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T07:51:47.100

在下面试试这个。

```
<action method="addItem"><type>skin_js</type><name>js/jquery-1.6.2-no-conflict.js</name><params/></action>
<action method="addItem"><type>skin_js</type><name>js/jquery.nivo.slider.pack.js</name><params/></action> 
```

# javascript - 如何让js“for”循环更高效？

> ID：13171452
> 
> 赞同：1
> 
> 时间：2012-11-01T05:28:55.177
> 
> 标签：javascript, jquery

我想知道如何使下面的循环更有效。在我的页面上，它的迭代次数超过了 100，这就是为什么，你可以想象它很麻烦。

```
 for (var i = 0; i < 1000; i += 1) {
        var el = document.createElement('div');
        el.appendChild(document.createTextNode('Node ' + (i + 1)));
        document.getElementById('nodeHolder').appendChild(el);
    } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:34:15.630

我真正能建议的是获取`nodeHolder`对 for 之外的元素的引用：

```
var nodeHolder = document.getElementById('nodeHolder');

 for (var i = 0; i < 1000; i += 1) {
    var el = document.createElement('div'); 
el.appendChild(document.createTextNode('Node ' + (i + 1)));
    nodeHolder.appendChild(el);
 } 
```

或者也许使用文档片段来保存临时更改/附加，然后在循环后将其添加到 nodeHolder：

```
var fragment = document.createDocumentFragment();

for (var i = 0; i < 1000; i += 1) {
    var el = document.createElement('div'); 
    el.appendChild(document.createTextNode('Node ' + (i + 1)));
    fragment.appendChild(el);
}

document.getElementById('nodeHolder').appendChild(fragment.cloneNode(true)); 
```

[JS Fiddle 显示了这两种方法](http://jsfiddle.net/davidThomas/wWNVL/)（如果控制台可用，则显示时间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T05:33:47.860

jQuery的方式...

```
var d = '';
for(var i=0;i<1000;i++) d += '<div>Node ' + (i + 1) + '</div>';
$('#nodeHolder').append(d); 
```

或者html里面的javascript...

```
<div id="nodeHolder">
<script>(function() { for(var i=0;i<1000;i++) document.write('<div>Node ' + (i + 1) + '</div>'); })();</script>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T05:33:42.787

也许：您可以在 for 循环中生成一个 HTML 字符串，例如：

```
<div>Node 1</div><div>Node 2</div> 
```

然后在整个循环完成后将nodeHolder的.innerHTML属性设置为这个字符串。

（...让 DOM 渲染器弄清楚如何最好地优化动作）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T05:53:58.347

总之：

1.  缓存你的 DOM 选择器。
2.  放弃 for 循环，然后进行反向 while 循环。
3.  只将元素附加到 DOM 一次。DOM 几乎总是瓶颈。

在此模式中，您可以利用反向循环：

```
//Cache the DOM element
var node = document.getElementById('nodeHolder'),
    markup = [];

//Run the loop backwards for additional speed
var i = 10000;
while(i--){
  markup.push('<div>Node ' + (i + 1) + '</div>');
}

//Reverse the array, join it, then set the innerHTML
node.innerHTML = markup.reverse().join('');​ 
```

工作示例：http: [//jsfiddle.net/ZAkMZ/3/](http://jsfiddle.net/ZAkMZ/3/)

反向while循环速度参考：[https ://blogs.oracle.com/greimer/entry/best_way_to_code_a](https://blogs.oracle.com/greimer/entry/best_way_to_code_a)

jQuery版本：

```
//Cache the DOM element
var node = $('#nodeHolder'),
    markup = [];

//Run the loop backwards for additional speed
var i = 10000;
while(i--){
  markup.push('<div>Node ' + (i + 1) + '</div>');
}

//Reverse the array, join it, then set the innerHTML
node.append(markup.reverse().join(''));​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T06:43:26.463

您肯定需要按照@David Thomas 的建议使用 DocumentFragment。我看到的最有效的版本是 this...`cloneNode`总是比根据需要`createElement`在浅拷贝或深拷贝之间切换（*仍然比 createEl 快*）要好。

并不是说它会带来显着的收益，但您应该尽可能回避作业。仅在需要时将数据存储在变量中。当然，在可读性方面，它是另一回事。

```
var fragment = document.createDocumentFragment();
var tplEl = document.createElement('div');
var contentTpl = document.createTextNode('Node ');

for (var i = 1; i <= 1000; i++) {
    var curNode = contentTpl.cloneNode(false);
    curNode.nodeValue = curNode.nodeValue + i;
    tplEl.cloneNode(false).appendChild(curNode);
    fragment.appendChild(tplEl);
}

document.getElementById('nodeHolder').appendChild(fragment); 
```

请注意，添加`fragment`到`nodeHolder`添加所有子级`fragment`作为子级`nodeHolder`仅触发 1 个流，而不是之前代码中的 1000 个流。

参考：[加速 JavaScript](https://developers.google.com/speed/articles/javascript-dom)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T06:01:41.430

可能是这样的：

```
for (var i = 0; i < 100; i+=1) {
  $("<div/>").appendTo("body").attr({"class":'txtHolder'});
  $(".txtHolder").append(i+1); 
```

}​</p>

# python - 单字符输出不返回任何内容

> ID：13171455
> 
> 赞同：0
> 
> 时间：2012-11-01T05:29:10.043
> 
> 标签：python

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:41:42.690

Your code isn't working in those cases because your `while` loop never ends. Once that `for` loop exits, the `while` loop just keeps going forever.

To fix your code, just set `flag = False` once the `for` loop ends:

```
def vowels_or_not (st, ch):
    vowels = ('a','e','i','o','u','A','E','I','O','U')
    flag = True
    a = 0
    aux = ''
    while flag is True:
        for i in range(len(st)):        
            if (st[i] == ch):
                flag = False
                break
            else:
                if (st[i] in vowels):
                    aux = aux + st[i]
                    a = a + 1
                if (st[i] not in vowels):
                    aux = aux + '$'
                    a = a + 1

        flag = False   # <-- Right here
    return aux 
```

And an example:

```
>>> vowels_or_not('a', 'x')
'a'
>>> vowels_or_not('x', 'a')
'$' 
```

To make your code a little better, don't use indices. Python lets you iterate over strings intuitively:

```
def vowels_or_not(word, character):
    vowels = 'aeiou'
    output = ''

    before, middle, after = word.partition(character)

    for letter in before:
        if letter.lower() in vowels:
            output += letter
        else:
            output += '$'

    return output + middle + after 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:45:14.227

Your problem is your while loop never ends if the last character in `st` isn't the same as `ch`.

But you don't really need that while loop as it is redundant, you only need the for-loop:

```
def vowels_or_not(st, ch):
    vowels = ('a','e','i','o','u','A','E','I','O','U')
    a = 0
    aux = ''
    for i in range(len(st)):
        if (st[i] == ch):
            break
        else:
            if (st[i] in vowels):
                aux = aux + st[i]
                a = a + 1
            if (st[i] not in vowels):
                aux = aux + '$'
                a = a + 1
    return aux 
```

* * *

```
>>> vowels_or_not('a', 'X')
'a'
>>> vowels_or_not('aaaAX', 'X')
'aaaA'
>>> vowels_or_not('aaabX', 'X')
'aaa$' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:58:19.897

```
import functools # for python3 reduce (working under python2 too)

vowels = 'aeiouAEIOU'

def vowels_or_not (st, ch):
    return functools.reduce(lambda a,b:a+(b in vowels and b or '$'), st.partition(ch)[0],'') 
```

or longer version

```
vowels = 'aeiouAEIOU'

def vowels_or_not_longer_version (st, ch):
    ret=''
    for i in st.partition(ch)[0]:
        ret+= i in vowels and i or '$'
    return ret 
```

# php - drupal如何更改登录块按钮值

> ID：13171456
> 
> 赞同：0
> 
> 时间：2012-11-01T05:29:14.330
> 
> 标签：php, drupal, login, drupal-blocks

我想更改我的 drupal 站点上当前显示“登录”的文本。

它建立在drupal 7 上的omega 子主题上。我按照此处找到的一些说明对登录块进行了挂钩：http: [//drupal.org/node/1167712](http://drupal.org/node/1167712)，它基本上将一些代码添加到主题 template.php 中，然后在模板文件夹中创建一个 tpl.php在主题中。

我可以通过这种方法让它将更多的东西放入登录块，所以我知道它正确地连接到它，只是不知道如何更改“登录”按钮的“值”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:30:57.703

在你的 template.php 中，添加一个[hook_form_alter()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)。

```
function yourthemenamehere_form_alter(&$form, $form_state, $form_id) {
  //print_r($form) // This will display form elements.
  if($form_id == "user_login") {
      $form['actions']['submit']['#value']= "YOUR TEXT HERE";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:16:05.273

虽然不完全是你问的。您可能会发现以下链接很有帮助 - [将动态登录登录链接添加到主菜单](http://www.zyxware.com/articles/2044/drupal-tips-how-to-add-dynamic-login-logout-link-to-your-primary-menu)。它应该给你一个起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:44:01.437

试试[String Overrides](http://drupal.org/project/stringoverrides)模块。适合在这里和那里进行一些更改。

# java - 将 Object arrayList 对象转换为 Integer

> ID：13171459
> 
> 赞同：1
> 
> 时间：2012-11-01T05:29:31.353
> 
> 标签：java, object, arraylist

我创建了一个对象的 ArrayList，它包含整数和字符串。

```
List<Object> arrayList = new ArrayList<>(); 
```

使用以下条件，我检查了它是否为整数

```
if(arrayList.get(indexValue) instanceof Integer){
 // Here how convert the object into integer
} 
```

但问题是，如何将对象转换为整数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:30:33.973

您可以将其显式转换为 Integer，但不需要 Java 为您完成。

```
if(arrayList.get(indexValue) instanceof Integer){
  Integer i = arrayList.get(indexValue);
} 
```

# javascript - jQuery 如何使用命名空间来避免与其他 3rd JavaScript 库发生冲突？

> ID：13171461
> 
> 赞同：0
> 
> 时间：2012-11-01T05:29:49.323
> 
> 标签：javascript, jquery

我已经浏览了 jQuery 源代码，但我找不到 jQuery 如何实现命名空间功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:34:07.830

命名空间在 JavaScript 中通过使用函数范围和对象来处理。

jQuery 默认公开两个全局变量：`jQuery`和`$`.

你可以做类似的...

```
(function(global) { 
    global.someGlobalIdentifier = {
        // Whatever you want...
    };
})(this); 
```

# python - 得到了解决方案，但仍然得到一个 indexError

> ID：13171475
> 
> 赞同：1
> 
> 时间：2012-11-01T05:31:34.207
> 
> 标签：python

我已经编写了这个 python 代码。当我运行它时，最后会出现索引错误；我不知道为什么。我想知道是否有人可以帮助我。

问题是找到能被 1 到 20 的所有数字整除的最小正数。我的分析是正确的，但只是最后的代码让我很难过。

```
def leastCommonDenominator(num1, num2):
    '''
        Returns the least common denominator of two numbers
    '''
    num2List = range(1,num2+1)
    if num1 < num2:
        for i in num2List:
            if (num1*num2List[i]) % num2 == 0:
                return num1*num2List[i]
    num1List = range(1, num1+1)
    if num2 < num1:
        for i in num1List:
            if (num2*num1List[i]) % num1 == 0:
                return num2*num1List[i]
    else:
        return num1

def leastNum():
    '''
        Prints the least number divisible
    '''
    myList = range(1,4)
    print myList
    num = 1
    for i in myList:
        num = leastCommonDenominator(num, myList[i])
        print num    

def main():
    leastNum() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:20:03.727

利用

```
for i in myList:
    num = leastCommonDenominator(num,i)
    print num 
```

代替

```
for i in myList:
    num = leastCommonDenominator(num,myList[i])
    print num 
```

这里 i 是列表元素的迭代器。它不是元素的索引。所以你不能使用 myList[i]。另一方面，你可以写

```
for i in range(0,len(myList)):
    num=leastCommonDenominator(num,myList[i]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T05:37:26.747

当您定义 时`myList`，它的值是（如您所知）：

```
myList = [1, 2, 3] 
```

当您迭代时，您正在循环遍历每个元素（1、2、3），但是当您调用 时`leastCommonDenominator`，您使用的是列表的*索引*，而不是元素本身（即在第一次通过时，您不是调用 的第一个元素`myList`，您正在调用`myList[1]`，这是*第二个*元素。这会导致`IndexError`最后一次传递，因为`myList[3]`它引用列表中的第四个元素，正如我们所见，它不存在（因为`range`不包括其值的上限）。为了修复，您应该能够这样做：

```
num = leastCommonDenominator(num, i) 
```

当您`for`像以前一样使用循环时，您可以简单地使用值本身。如果你想引用元素的位置，你可以使用`enumerate`，它返回一个值的索引/位置和值本身（这更仅供参考 - 你不需要它我不相信 :) ）。例如：

```
for index, i in enumerate(myList):
    num = leastCommonDenominator(num, myList[index]) 
```

你会得到同样的结果。

# playframework - Eager fetch 似乎没有加入

> ID：13171476
> 
> 赞同：3
> 
> 时间：2012-11-01T05:31:41.353
> 
> 标签：playframework, jpa-2.0

我正在使用带有 Java 的 play 2.0.4。我正在尝试从 play 提供的内存数据库中保存和检索一个值（Ebean 是底层 JPA 实现）。这是一些示例代码：

```
@NoobDisclaimer ("I'm fairly new to Play and JPA")
@Entity
public class User extends Model {

@Id
public Long id;

public String name;

// Does not fetch eagerly.
@ManyToOne(fetch=FetchType.EAGER)
private Role role; // Role extends Model { has id and name}

public static Finder<Long, User> find = new Finder<Long, User>(Long.class, User.class);

public static List<User> all() {
    List<User> allUsers = find.all();
    for (User u : allUsers) {
        System.out.println("User:" + u.id + "|" + u.name); // SOP1
        // System.out.println("Assoc Role:" + u.role.name); //SOP2
    }
    return allUsers;
}

public static void create(User user) {
    user.save();
} 
```

}

在 index.scala.html 中，@(users: List[User], userForm: Form[User])

```
<h2>@users.size() user(s) found!</h2>
        <ul>
            @for(usr <- users) {
                <li>Name: @usr.name</li> <!-- Displayed -->
                <li>Role: @usr.role.name</li> <!-- Displays blank value -->
            }
        </ul> 
```

问题是当我在控制器中执行 User.all() 并将其发送到视图时，未加载 user.role，即 @usr.role.name 为空白。也不例外。我已经设置了 SQL 调试，并且我已经验证了 Role 表的外键保存在 User 表中。当我在 User.all() 方法（参见 SOP2）中打印角色名称时，会触发一个查询并打印角色名称。它也显示在视图上。

我知道，默认情况下，角色将被延迟加载，并且模板中无法使用 PersistenceContext 来加载与用户关联的角色。但是，不应该急切地获取对象的所有相关实体吗？我对 Play 和 JPA 还很陌生，当我加载某些东西时，我不知道如何在不通过每个关联实体的情况下让它工作。有什么我想念的吗？

在相关的说明中，如果我必须使用延迟获取，我如何确保在获取用户时 user.role 对视图可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T08:42:27.083

> *Ebean 是底层的 JPA 实现*

Ebean 不是 JPA 实现。Ebean 与 JPA 标准有一点共同点。它看起来有点相似，因为它的注解看起来与 JPA 的相似。

**问题的原因：Ebean 不支持 @ManyToMany 注释上的 fetch=... 属性。**

2个解决方案：

1.  `play.db.ebean.Model.Finder<I,T>`从注释中删除 fetch=... ，而是在对象（实现`com.avaje.ebean.Query<T>`）或 com.avaje.ebean.Ebean 对象上使用 fetch() 方法。

    问题是这里有两个独立的持久库（play.db.ebean 和 com.avaje.ebean），它们之间的集成是一个挑战和问题。
    例如 play.db.ebean.Model.Finder.fetch() 方法返回`com.avaje.ebean.Query<T>` 而不是 play.db.ebean.Model.Finder - 我发现它没有帮助，因为它让你远离 play API 模型助手。显然在调用 fetch() 之后，您不能再使用 Model.Finder 方法 - 那时没有太多的“帮助”类。
    老实说，我不认为 fetch 功能是 Play API 中的一流功能 - 最好遵循 Avaje API。

    在 Avaje API 中使用 fetch() 的两个示例：

    ```
    // single SQL query with a fetch join
    List<Order> l0 = Ebean.find(Order.class)
    .fetch("customer")
    .findList(); 
    ```

    和

    ```
    // two separate SQL queries
    List<Order> l0 = Ebean.find(Order.class)
    .fetch("customer", new FetchConfig().query())
    .findList(); 
    ```

    **注意：Ebean 的最后一次发布/更新（其他错误修复）是 2010 年 11 月 6 日 - 整整 2 年前。Ebean的吸收率非常低。**

2.  切换到在 Play 中使用 JPA 2.0 实现。JPA 2.0 版本确实非常强大，易于使用，并且得到了非常广泛的支持。这可能意味着 Ebean 的死亡。请注意，Play 在 2.0 中添加了以下配置功能（在 1.1 中不存在）——这表明 Play 正在朝着任何提供商对 JPA 的更全面支持迈进。 [http://www.playframework.org/documentation/2.0/JavaJPA](http://www.playframework.org/documentation/2.0/JavaJPA)

    一旦你这样做了，停止使用 play.db 类和 com.avaje 类——我建议你使用 100% javax.persistence 类。

# android - 群发短信安卓

> ID：13171478
> 
> 赞同：2
> 
> 时间：2012-11-01T05:31:53.000
> 
> 标签：android

我需要创建一个像群消息这样的应用程序。为此，我正在使用 SmsManager 类。

我的代码看起来像

```
 static List<String> phone_num = new ArrayList<String>();
static List<String> SMS = new ArrayList<String>();

   @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
            readExcelFile(this, "/sdcard/Excel.xls");
    View readExcelButton = findViewById(R.id.buttonSend);
            readExcelButton.setOnClickListener(this);

}

      public void onClick(View v) {
        switch (v.getId()) {
        case R.id.buttonSend:
          for(int i=0;i<phone_num.size();i++)
            {
               SmsManager smsManager = SmsManager.getDefault();
               smsManager.sendTextMessage(phone_num.get(i),SMS.get(i), null, null);        
                }

  Toast.makeText(getBaseContext(), "Sendingfinished",Toast.LENGTH_SHORT).show();  

                break;
       default: break;
        }
    } 
```

我的问题是，它是发送群短信的正确方法吗？或者我应该使用广播接收器创建pendingIntent 来监控发送过程并在for 循环内等待，直到每条消息发送完成再发送下一个。

提前致谢....

# installation - health_graph gem 安装错误：health_graph 需要 health_graph (>= 0)

> ID：13171479
> 
> 赞同：1
> 
> 时间：2012-11-01T05:32:14.830
> 
> 标签：installation, gem

**Ruby：1.9.3dev（2011-09-23 修订版 33323）[i686-linux]**

当我尝试在我的开发环境中安装[health_graph gem 时。](https://rubygems.org/gems/health_graph)我面临以下错误：

```
$gem install health_graph

ERROR:  Error installing health_graph:
health_graph requires health_graph (>= 0) 
```

关于如何摆脱这个的任何提示？

**注意：我没有尝试使用 rails 应用程序中的 gem。**

参考：

1.  [http://developer.runkeeper.com/healthgraph/third-party-libraries#ruby](http://developer.runkeeper.com/healthgraph/third-party-libraries#ruby)
2.  [https://github.com/kennyma/health_graph](https://github.com/kennyma/health_graph)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:55:50.507

我相信 gem 需要 ruby​​ 1.8.7。但我实际上并没有写gem，所以我无法确认。

# javascript - 在这里我试图实现无限滚动但是当我滚动太快时会发生什么它会触发多个 ajax 请求

> ID：13171481
> 
> 赞同：2
> 
> 时间：2012-11-01T05:32:22.443
> 
> 标签：javascript, ajax, jquery

在这里，我试图实现无限滚动，但是当我滚动得太快时会发生什么，它会触发具有相同参数的多个 ajax 请求，这会再次导致相同的数据。我对 scrollpagination.js 的滚动功能有疑问，我在这里给你全部内容，所以如果有任何机构可以帮助我，请。

```
 index.php
  `<?php $actual_row_count = 400; ?>
   <!doctype html>
   <html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
        <link type="text/css" href="css/style.css" rel="Stylesheet" />  
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/scrollpagination.js"></script>
        <script type="text/javascript">
            $(function(){

                var actual_count = "<?php echo $actual_row_count; ?>";
                $('#quepanel').scrollPagination({
                    'contentPage': 'loadmore.php', // the url you are fetching the results
                    'contentData': {},// { AlbumName: "Dirty Deeds", Entered: "5/1/2012" },// these are the variables you can pass to the request, for example: children().size() to know which page you are
                    'scrollTarget': $(window), // who gonna scroll? in this example, the full window
                    'heightOffset': 10, // it gonna request when scroll is 10 pixels before the page ends
                    'beforeLoad': function(){ // before load function, you can display a preloader div
                        $('#loadMore').fadeIn();                                            
                    },
                    'afterLoad': function(elementsLoaded){ // after loading content, you can use this function to animate your new elements
                         $('#loadMore').fadeOut();

                         //var i = 0;
                         //$(elementsLoaded).fadeIn(1000);
                        if ($('#quepanel').children().size() > actual_count ){ // if more than 100 results already loaded, then stop pagination (only for testing)
                            $('#loadMoreComments').fadeIn();
                            $('#quepanel').stopScrollPagination();
                         }
                    }
                });

                // code for fade in element by element
                $.fn.fadeInWithDelay = function(){
                    var delay = 0;
                    return this.each(function(){
                        $(this).delay(delay).animate({opacity:1}, 200);
                        delay += 100;
                    });
                };

            });
        </script>
    </head>

    <body>
        <div class = "maindiv">
            <div id = "quepanel" class = "middle">

                <?php
                    $qno = 0;
                    $limit = 30;                    
                    for($i=0 ; $i< $limit ; $i++)
                    { ?><div><span class = "srno"><?php echo ++$qno ;?></span><span><?php echo 'hello'.microtime() ;?></span></div> 
                <?php }?>
            </div>
        <div id = "loadMore"  class = "loadmorediv">
            <center><img src = "https://www.google.com/images/loading.gif" /></center>
        </div>
        <div id = "loadMoreComments"  class = "loadmorediv">
            <center><span>No More Records</span></center>
        </div>
    </div>
</body>
</html>

`
loadmore.php
`<?php

$requested_page = $_GET['iteration'];
$limit = 20;
$from = (($requested_page - 1) * $limit);
$qno = $from ;

            for($i=0 ; $i< $limit ; $i++)
            { ?>
                <div><span class = "srno"><?php echo ++$qno ;?></span><span><?php echo 'hello'.microtime() ;?></span></div> 
        <?php }?>
`
scrollpagination.js

 (function( $ ){
     $.fn.scrollPagination = function(options) {

        var opts = $.extend($.fn.scrollPagination.defaults, options);  
        var target = opts.scrollTarget;
        if (target == null){
            target = obj; 
        }
        opts.scrollTarget = target;

        return this.each(function() {
          $.fn.scrollPagination.init($(this), opts);
        });

  };

  $.fn.stopScrollPagination = function(){
      return this.each(function() {
        $(this).attr('scrollPagination', 'disabled');
      });

  };

  var itr = 2;
  $.fn.scrollPagination.loadContent = function(obj, opts){
     var target = opts.scrollTarget;
     var mayLoadContent = $(target).scrollTop()+opts.heightOffset >= $(document).height() - $(target).height();
     if (mayLoadContent){
         if (opts.beforeLoad != null){
            opts.beforeLoad(); 
         }

         $(obj).children().attr('rel', 'loaded');
         $.ajax({
              type: 'POST',
              url: opts.contentPage+"?iteration="+itr,
              data: opts.contentData,
              success: function(data){
                itr++;
                $(obj).append(data); 
                var objectsRendered = $(obj).children('[rel!=loaded]');

                if (opts.afterLoad != null){
                    opts.afterLoad(objectsRendered);    
                }
              }
         });
     }

  };

  $.fn.scrollPagination.init = function(obj, opts){
     var target = opts.scrollTarget;
     $(obj).attr('scrollPagination', 'enabled');

     $(target).scroll(function(event){
        if ($(obj).attr('scrollPagination') == 'enabled'){
                $.fn.scrollPagination.loadContent(obj, opts);
                //alert(event.isPropagationStopped());
        }           
            //event.stopPropagation();
            //console.log(event.isPropagationStopped());
            event.preventDefault();
     });

     //$.fn.scrollPagination.loadContent(obj, opts);

 };

 $.fn.scrollPagination.defaults = {
         'contentPage' : null,
         'contentData' : {},
         'beforeLoad': null,
         'afterLoad': null  ,
         'scrollTarget': null,
         'heightOffset': 0        
 }; 
})( jQuery );`
style.css
`@CHARSET "ISO-8859-1";

    body{

            font-family:Segoe UI Light,Segoe UI,Tahoma,Arial,Verdana,sans-serif;
            font-style: normal;
            color: #C76A6A;
            color: #0099D2;
            color : black ;
        }

    #loadMoreComments{

        background-color : white;
        font-weight: bold;
        color : black;
        border : solid 1px gray;
        padding : 5px;
        -webkit-border-radius: 1px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
        border-radius: 1px; /* Opera 10.5, IE9, Saf5, Chrome, FF4+, iOS 4, Android 2.1+ */
        width : 500px;
        margin : 10px auto;
        display : none;     
    }
    #loadMore{

        margin-left: auto;
        margin-right: auto;
        display:none;
        z-index:2;
    }

    #quepanel{

        padding-top : 10px;
        margin-left : auto;
        margin-right : auto ;
        width: 600px;
    }

    .maindiv{

        width: 960px;
        height: auto;
        border : red 2px;
        margin-left: auto;
        margin-right: auto;
        background-color: #F8F8F8;
        padding : 1px 10px 10px 10px ;
    }

    .middle{

        margin-right : auto;
        margin-left : auto;
    }

    .srno{

        width  : 30px;
        display : inline-block;
        text-align: center;
        -webkit-border-radius: 45px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
        border-radius: 45px; /* Opera 10.5, IE9, Saf5, Chrome, FF4+, iOS 4, Android 2.1+ */
        background-color: rgb(180, 180, 180);
        color: #15CFA3;
        vertical-align: top;
        padding : 5px 0 ;
        color : white;
        border :  1px gray;
        margin-top: 5px;

    }   
    ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:03:22.683

在你的 ajax 调用中使用 async: false 怎么样。你的 loadcontent 中的 AJAX 调用将是——

```
$.ajax({
              type: 'POST',
              url: opts.contentPage+"?iteration="+itr,
              data: opts.contentData,
              async: false,
              success: function(data){
                itr++;
                $(obj).append(data); 
                var objectsRendered = $(obj).children('[rel!=loaded]');

                if (opts.afterLoad != null){
                    opts.afterLoad(objectsRendered);    
                }
              }
         }); 
```

# javascript - 尝试使用 Selenium IDE 生成任何随机电子邮件生成器时出现 Xpath 错误

> ID：13171482
> 
> 赞同：0
> 
> 时间：2012-11-01T05:32:23.157
> 
> 标签：javascript, selenium, selenium-ide, xpath

我正在尝试运行脚本，但出现未找到元素的错误。Selenium 未检测到 Xpath。我正在尝试随机生成电子邮件地址。

每次出现 [error] Element .// *[@id='GmailAddress'] not found 的错误。其中 ".//* [@id='GmailAddress'" 是所需文本字段的 Xpath。JavaScript 在这里用于指定的分数：

`Selenium.prototype.doGenerateRandomEmail= function(locator) { Selenium.doType(locator,"gunjanrana123@gmail.com"); }`

当我运行 Selenium IDE 时，我只需要在文本字段中出现“gunjanrana123@gmail.com”地址。

请告诉 JavaScript 或 Selenium 命令中的问题出在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:49:08.113

尝试改变

`//[@id='GmailAddress']`至：`//*[@id='GmailAddress']`。您的代码中缺少一个`*`。

# android - 客户经理缓存 Android

> ID：13171483
> 
> 赞同：2
> 
> 时间：2012-11-01T05:32:32.037
> 
> 标签：android, caching, accountmanager

大家好，我必须在 Android 中创建一个自定义帐户，该帐户将与 Account and Sync 框架集成。默认情况下，Account Manager 缓存 Auth 令牌并为所有请求返回相同的令牌。有没有办法改变这个默认行为，我不希望客户经理缓存令牌。任何信息都会有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:18:36.057

每次要使给定的缓存身份验证令牌无效时，都需要调用[AccountManager.invalidateToken 。](http://developer.android.com/reference/android/accounts/AccountManager.html#invalidateAuthToken%28java.lang.String,%20java.lang.String%29)

# cocos2d-iphone - 如何区分一张图像中的精灵部分

> ID：13171487
> 
> 赞同：0
> 
> 时间：2012-11-01T05:32:45.067
> 
> 标签：cocos2d-iphone

我有一张房子的图片，房子里有几个可用的部分，但只有一张图片。我想画所有的部分，比如墙壁的红色和屋顶的黑色。但是我只有一张图像，所以如何在一张图像中为不同部分着色？

我可以使用 cocos2d 或其他任何东西来做这些有趣的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:39:21.270

您可以通过在要填充的图像上制作不同的 CGRect 精灵来在图像的不同部分填充不同的颜色，但我相信这不会解决您的问题，因为房屋图像必须具有不同的形状才能填充，如圆形、三角形或矩形。并且使用 CGrect 只会给你填充矩形大小。最好的解决方案是使用不同的图像作为房屋的一部分。可能还有其他方法，但它们会很复杂且有问题，因此请尝试使用多个图像，因为您可以轻松填充每个图像。

# c++ - 如何通过 Messagebox ButtonClick 显示 dialogboxparam 对话框？

> ID：13171488
> 
> 赞同：0
> 
> 时间：2012-11-01T05:32:49.587
> 
> 标签：c++, windows, winapi, dialog

我有使用 C++ win32 API。

我已经在 bb 类中使用 dailogboxparam 函数在对话框中创建了一个对话框...

```
INT_PTR bb::DialogProc(UINT msg, WPARAM wp, LPARAM lp)
 {
//some case and...

case IDC_OK:
DialogBoxParam(hInst,MAKEINTRESOURCE(IDD_DIALOG),_hwnd,myfunctionDlgProc,lp);
break;
}

int CALLBACK bb::myfunctionDlgProc(HWND hDlg,UINT msg,WPARAM  wp, LPARAM lParam)
{

//some code...
} 
```

当我在对话框中按下 OK 按钮时...它显示 myfunctionDlgProc 对话框...

现在，我想在我的其他 aa 课上做同样的事情，现在我正在使用消息框..它有 2 个按钮确定和取消......

如果当我按下消息框确定按钮时，我想显示 myfunctionDlgProc 对话框...

```
 int retun;

        retun = MessageBox(hDlg,(LPCWSTR)"",TEXT("Logon Message"), MB_OKCANCEL| MB_ICONWARNING);

        if(retun=1)
       {
DialogBoxParam(hInst,MAKEINTRESOURCE(IDD_DIALOG),_hwnd,myfunctionDlgProc ,lp);
        } 
```

我试试看...但是如何`lp`在此代码中传递值...

`DialogBoxParam(hInst,MAKEINTRESOURCE(IDD_DIALOG),_hwnd,myfunctionDlgProc,lp);`

你得到我的问题了吗？

我怎样才能做到这一点？

# php - 在 url + Zend 框架中以小写形式显示控制器名称

> ID：13171491
> 
> 赞同：0
> 
> 时间：2012-11-01T05:33:04.643
> 
> 标签：php, zend-framework

如何在 Zend Framework 中的 url 中以小写形式显示控制器名称

前任 ：

```
AlbumController.php 
```

我正在使用以下网址：

```
<a href='/Album/'>album</a> 
```

它在 url 中显示专辑名称为“ `Album`”，而我想在 url 中显示为“ `album`”。我也想保留“ `Album`”，因为它在 href 标记中。

我该怎么做。

请帮助我....在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:40:13.443

您是否尝试过将 URL 设为小写？我相当确定使用 Zend Framework 的默认路由，控制器名称不区分大小写。~~但是，动作名称不是。~~如果您使用驼峰式操作名称，它[会更改预期的视图脚本](http://framework.zend.com/manual/1.12/en/zend.controller.action.html#zend.controller.action.viewintegration.render)。

**更新**：也许你的意思是 url 是标题大小写，而链接本身不是。如果是这种情况，只需将 url 设为小写：

```
<a href='/album/'>album</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T15:29:41.153

在控制器内部时，您可以从 Request 对象中获取控制器名称

```
$this->getRequest()->getControllerName(); 
```

或全局访问

```
Zend_Controller_Front::getInstance()->getRequest()->getControllerName(); 
```

但是，最好的方法是在任何视图中使用“url”视图助手。

```
$this->url(array("module" => "default", "controller" => "album", "action" => "index"), "default"); 
```

“模块”参数是可选的。第二个参数“default”是用来建立反向链接的路由，也是可选的。使用自定义路由时，请确保定义路由的“反向”属性，例如：

```
resources.router.routes.recipe_view.reverse = "recipes/%d-%s" 
```

有关路由配置的更多信息，请参见[此处](http://www.iostream.eu/zend-framework-application-ini-cheat-sheet/) 有关更多视图助手，请参见[此处](http://www.iostream.eu/zend-framework-cheat-sheet/)

# java - 在 Jackson/Jerkson (Scala) 中解析子类时找不到合适的构造函数？

> ID：13171495
> 
> 赞同：2
> 
> 时间：2012-11-01T05:33:23.300
> 
> 标签：java, scala, jackson

我正在尝试解析一个类，出于某种原因，Jackson（实际上是 Scala 中的 Jerkson 接口）正在转储。我猜这可能与`BoardOpen`成为一个类的子`MessageEvent`类有关：

```
class BoardOpen(

  override val channel: String

) extends MessageEvent(channel) 
```

和

```
class MessageEvent( val channel: String = "/" ) 
```

完整的错误：

```
The error com.codahale.jerkson.ParsingException: No suitable constructor found
for type [simple type, class engine.event.BoardOpen]: can not instantiate from J
SON object (need to add/enable type information?)
 at [Source: java.io.StringReader@4004c5b3; line: 1, column: 2]
        at com.codahale.jerkson.ParsingException$.apply(ParsingException.scala:17)
        at com.codahale.jerkson.Parser$class.parse(Parser.scala:86)
        at com.codahale.jerkson.Json$.parse(Json.scala:6)
        at com.codahale.jerkson.Parser$class.parse(Parser.scala:14)
        at com.codahale.jerkson.Json$.parse(Json.scala:6)
        at controllers.socket.MessageParser$.matchMsg(MessageParser.scala:59)
        at controllers.socket.MessageParser$.parseRawMessage(MessageParser.scala:90)
        at controllers.socket.MessageParser$.readStringMsg(MessageParser.scala:42) 
```

这就是我去解析数据时发生的事情：

```
msgCase match {
       case "BoardOpen"            => parse[BoardOpen](msgData) 
```

JSON看起来像：

```
{"channel":"/board"} 
```

任何想法为什么它失败了？谢谢。

**更新：**

因为只有`channel`属性需要担心，所以我想我会看看如果我将解析更改为会发生什么`parse[MessageEvent](msgData)`，奇怪的是它会吐出同样的错误：

```
The error com.codahale.jerkson.ParsingException: No suitable constructor found
for type [simple type, class com.alloyengine.powder.MessageEvent]: can not insta
ntiate from JSON object (need to add/enable type information?)
 at [Source: java.io.StringReader@34fd2520; line: 1, column: 2] 
```

# algorithm - 一个用户的下载、播放、浏览的音乐页面排名算法如何？

> ID：13171501
> 
> 赞同：0
> 
> 时间：2012-11-01T05:33:49.650
> 
> 标签：algorithm

我有一个音乐页面网站，用户可以下载、播放和查看这些页面，我想为此制作一个排名页面。

此排名取决于这些音乐的下载、播放和观看时间。3个属性加在一起叫一个新名字就是HOT pt。

我希望这个排名页面以 100 分的限制对所有音乐页面进行排名。

例如：我有 3000 页。前 3 页的 HOT pt 为 300,500,700。我希望这些 3 pt 在 100 内运行。如下所示：

前 1：test1 99.34 前 2：test2 94.21 前 3：test3 89.64

那么，我怎样才能得到这样的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:57:07.787

如果您已经制定了排名系统来获得这些分数，那么您只需将其标准化为 0-100。

例如：

```
page id   points      
1         500
2         300
3         700
4         200 
```

然后您需要具有最大点数的页面（在本例中为 700），将所有点除以它并乘以 100。

```
page id   points            points[0-100]   
1         500 / 700 * 100    71.43
2         300 / 700 * 100    42.86
3         700 / 700 * 100   100.00
4         200 / 700 * 100    28.57 
```

# javascript - 无法比较javascript中文本文件的值

> ID：13171502
> 
> 赞同：0
> 
> 时间：2012-11-01T05:33:51.773
> 
> 标签：javascript, html, filereader

我在使用 === 比较字符串时遇到问题 我从文本文件中获取整个数据并使用 ('\n') 逐行拆分值，例如 java 中的 readLine() 并想查找字符串“SECTION”但找不到.

当我把

```
if(contents[i] === "SECTION") {
    alert("This is section");
} 
```

没有警报！我确定文本文件有单词“SECTION”

但

```
if (contents[i].match("SECTION)) 
```

是工作。

有什么建议吗？谢谢

* * *

javascript

```
function readFile (evt) {
var files = evt.target.files;
    if (files) {
        for (var i=0, f; f=files[i]; i++) {
            var file = files[i];           
            var reader = new FileReader();
            reader.onload = function() { 
                var contents = [];
                contents = this.result.split("\n");
                    for (var i = 0; i < contents.length; i++) {
                        if(contents[i] === "SECTION") {
                            alert("This is section");
                        }
                        document.getElementById('textArea').innerHTML +=contents[i];
                    }
            }
            reader.readAsText(file);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:26:00.270

您的代码中有一些奇怪之处，但是：

```
var contents = [];
contents = this.result.split("\n"); 
```

这两行都不需要，第二个赋值会覆盖第一个，所以：

```
var contents = this.result.split("\n"); 
```

.

```
for (var i = 0; i < contents.length; i++) {
    if(contents[i] === "SECTION") { 
```

这里没有必要`===`，虽然我想它不会受到伤害。比较文本周围可能有空格，因此您可以考虑删除空格或使用正则表达式，例如：

```
var re = /^\s*SECTION\s*$/; 
```

将单词“SECTION”与前后任意数量的空格相匹配。如果您只想要包含字符序列 SECTION 的行，那么：

```
var re = /\s*SECTION\s*/; 
```

并忽略大小写：

```
var re = /\s*SECTION\s*/i; 
```

任何。然后使用如下[`test`](http://ecma-international.org/ecma-262/5.1/#sec-15.10.6.3)方法：

```
for  ( ... ) {
    if (re.test(contents[i])) {
       /* found a section */ 
```

# joomla2.5 - 如何在 joomla2.5 的视图文件中获取和显示值

> ID：13171503
> 
> 赞同：0
> 
> 时间：2012-11-01T05:33:54.880
> 
> 标签：joomla2.5

我正在自定义 youtube 库组件以在单独的视图文件中搜索和显示值。我创建了一个表单来获取单词以在同一视图文件中进行搜索和显示。在这里，我可以获取 view.html.php 中的值，但无法在 default.php 中显示它。我做错了什么，任何人都可以帮助我，因为我是 joomla 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:26:41.310

您可以在 views->yourview->tmpl 文件夹中创建一个模板文件，并将其命名为 default_templatename 和用于显示结果的代码。

_templatename 是关键字，你可以把它命名为 default_template1, default_result

创建模板文件后。您可以使用以下命令将其加载到 default.php 文件中：-

```
echo $this->loadTemplate('yourtemplatename'); 
```

像

```
echo $this->loadTemplate('default_template1'); 
```

# android - createBitmap --- java.lang.IllegalArgumentException: x must be < bitmap.width()

> ID：13171509
> 
> 赞同：11
> 
> 时间：2012-11-01T05:34:29.610
> 
> 标签：android, android-layout

截屏并创建带有裁剪图片的位图时出现错误

下面是我的代码

```
 View v1 = mKittyBGLayer.getRootView();
    v1.setDrawingCacheEnabled(true);
    Bitmap source = v1.getDrawingCache();
    int width = source.getWidth();
    int height = source.getHeight();
    System.out.println("vListView : -"+vListView.getWidth());
    System.out.println("hListView : -"+hListView.getHeight());
    System.out.println("Width : -"+width);
    System.out.println("Height : -"+height);
    bitmap = Bitmap.createBitmap(source, vListView.getWidth(), 0, width, height - hListView.getHeight()); 
```

我的日志猫是

```
 11-01 11:00:31.419: I/System.out(1658): vListView :- 60
        11-01 11:00:31.429: I/System.out(1658): hListView :- 60
        11-01 11:00:31.429: I/System.out(1658): Width :- 480
        11-01 11:00:31.429: I/System.out(1658): Height :- 320
        11-01 11:00:31.429: D/AndroidRuntime(1658): Shutting down VM
        11-01 11:00:31.429: W/dalvikvm(1658): threadid=1: thread exiting with uncaught exception  (group=0x40018560)
        11-01 11:00:31.429: E/AndroidRuntime(1658): FATAL EXCEPTION: main
        11-01 11:00:31.429: E/AndroidRuntime(1658): java.lang.IllegalArgumentException: x + width  must be <= bitmap.width()
        11-01 11:00:31.429: E/AndroidRuntime(1658):     at android.graphics.Bitmap.createBitmap(Bitmap.java:410)
        11-01 11:00:31.429: E/AndroidRuntime(1658):     at android.graphics.Bitmap.createBitmap(Bitmap.java:383)
        11-01 11:00:31.429: E/AndroidRuntime(1658):     at com.appsehs.android.CUTECRAZYKITTENDRESSUPGAME.PhotoSortrActivity.takeScreenShot(PhotoSortrActivity.java:247)
        11-01 11:00:31.429: E/AndroidRuntime(1658):     at com.appsehs.android.CUTECRAZYKITTENDRESSUPGAME.PhotoSortrActivity.onOptionsItemSelected(PhotoSortrActivity.java:274)
        11-01 11:00:31.429: E/AndroidRuntime(1658):     at android.app.Activity.onMenuItemSelected(Activity.java:2205) 
```

在这里你可以看到 x < bitmap.getWidth 的意思是 60 < 480

虽然我收到错误

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T05:40:19.680

不，不是`x must be < bitmap.width()`。它说`x + width must be <= bitmap.width()`。

您正在创建一个`Bitmap`这样的：

```
Bitmap.createBitmap(source, 60, 0, 480, 260); // 320 - 60 = 260 
```

基本上，你是`x = 60, y = 0`在`x = 480 + 60, y = 260`一个`Bitmap`只有 480x320 的地方画图。显然，这是不可能的，因为您的`x`坐标不在`Bitmap`.

在不知道您的确切用例的情况下，很难告诉您如何解决此问题。基本上，您的`source`图像必须适合`{ x1: x, x2: x + width, y1: y, y2: y + height }`.

如果你只想从第 60 个像素开始绘制，那么你需要这样做：

```
Bitmap.createBitmap(source, vListView.getWidth(), 0, width - vListView.getWidth(), height - hListView.getHeight()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T09:29:28.147

```
Bitmap resultBitmap = Bitmap.createBitmap(sourceBitmap, 0, 0,
        sourceBitmap.getWidth() - 1, sourceBitmap.getHeight() - 1); 
```

就像在列表中一样，它从 0 开始，所以宽度必须是位图宽度 - 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-07T07:29:19.037

如果您从 drawable 获取图像，则将其添加到 drawable-nodpi 文件夹中。

我有同样的问题。现在，完美地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-16T09:13:05.033

如果你得到 java.lang.IllegalArgumentException: x must be < bitmap.width()

这是三星 6.0.1 版本的系统崩溃。此刻我找不到原因。

# wikitude - QCAR 无法解决

> ID：13171510
> 
> 赞同：1
> 
> 时间：2012-11-01T05:34:39.810
> 
> 标签：wikitude

我下载了 wikiitude sdk 并尝试了 SimpleIRExample 项目，但在这段代码中

私有类 VuforiaServiceImplementation 实现 VuforiaInterface{

```
 @Override
    public void deInit() {
        QCAR.deinit();
    }

    @Override
    public int init() {
        return QCAR.init();
    }

    @Override
    public void onPause() {
        QCAR.onPause();
    }

    @Override
    public void onResume() {
        QCAR.onResume();
    }

    @Override
    public void onSurfaceChanged(int width, int height) {
        QCAR.onSurfaceChanged(width, height);
    }

    @Override
    public void onSurfaceCreated() {
        QCAR.onSurfaceCreated();
    }

    @Override
    public void setInitParameters(Activity activity, int nFlags) {
        QCAR.setInitParameters(activity, nFlags);
    }

} 
```

QCAR 有一条红线，错误是 QCAR 无法解决。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:31:57.277

您基本上缺少 QCAR 库。看看[http://forum.wikitude.com/home/-/message_boards/message/153377](http://forum.wikitude.com/home/-/message_boards/message/153377)

# json - json的jquery-ui自动完成在我输入输入时显示所有数据

> ID：13171514
> 
> 赞同：1
> 
> 时间：2012-11-01T05:34:43.817
> 
> 标签：json, jquery-ui, autocomplete, jquery-ui-autocomplete

我在为 json 使用 jquery-ui 自动完成时遇到问题。比如说，我的 json 查询从 myurl/users/listid 返回，这是返回的数据：

```
[{"label":"test@gmail.com"},{"label":"omg@hotmail.com"},{"label":"bad@yahoo.com"}] 
```

这是我用于自动完成的 jquery 脚本。

```
$("#search-query").autocomplete({
    source: '/users/listid'
}); 
```

当我在我的#search-query 输入框中输入内容时，无论我输入什么，这三个电子邮件 ID 都会显示。它应该将其缩小到与我尝试输入的字符匹配的范围内。但事实并非如此。

好的。这很奇怪。当我更改以下脚本之类的内容时，一切正常。

```
var data = [{"label":"test@gmail.com"},{"label":"omg@hotmail.com"},{"label":"bad@yahoo.com"}];

$("#search-query").autocomplete({
    source: data
}); 
```

我完全不知道出了什么问题。请指导我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:37:00.507

如果源是`url`，则`autocomplete`期望您自己的业务逻辑在其中`url`过滤掉选项。参数`term`将与输入值一起发送到 url。

# android - 在 Android 应用程序中难以从 URL 读取文本

> ID：13171517
> 
> 赞同：0
> 
> 时间：2012-11-01T05:34:57.503
> 
> 标签：android, download

我正在开发一个小型应用程序，我试图从网站读取一些文本，将文本存储在变量中，然后在另一个活动中显示该文本。在我的主要活动中，我有一个名为“许可协议”的可单击标签，单击该标签时，应用程序应从站点读取一些文本，转到另一个活动，然后为用户显示该文本。但是，每次我点击我的标签时，我的应用程序强制关闭。有什么建议么？

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void activity_license(View view) throws IOException{

        String stringBuffer;
        String text ="";

        URL url = new URL("http://something.something.com/LICENSE");

        BufferedReader bufferReader = new BufferedReader(new InputStreamReader(url.openStream()));

        while((stringBuffer = bufferReader.readLine()) != null){
            text += stringBuffer;
        }

        bufferReader.close();

        Intent licenseIntent = new Intent(this, LicenseActivity.class);
        licenseIntent.putExtra("LICENSE_AGREEMENT", text);
        startActivity(licenseIntent);
    }
} 
```

这是我的第二个活动代码，我想在其中显示文本......

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TextView;

public class LicenseActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_license);

        Intent intent = getIntent();

        String licenseText = intent.getStringExtra("LICENSE_AGREEMENT");

        TextView lblText = (TextView)findViewById(R.id.lblLicense);
        lblText.setText(licenseText);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_license, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:56:02.287

尝试这个

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(URL);

HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();

InputStream is = httpEntity.getContent();
StringBuilder text = new StringBuilder();
BufferedReader br = new BufferedReader(new InputStreamReader(is));
String line;
while ((line = br.readLine()) != null) {
    text.append(line + "\n");
}

try 
    intent.putExtra("licence",text.toString); 
```

如果这不起作用，请尝试**HttpGet**代替**HttpPost** ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:41:58.843

```
// RETRIVE YOUR RESPONSE 
    try 
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    }
    catch (Exception e) 
    {   
        Log.e("Loading Runnable Error converting result :", e.toString());
    } 
```

现在将此结果打印为字符串。

# c++ - C++：关于指针和引用，何时使用它们？

> ID：13171518
> 
> 赞同：0
> 
> 时间：2012-11-01T05:35:01.527
> 
> 标签：c++, oop, pointers, reference

> **可能重复：**
> [C++ 对象：我什么时候应该使用指针或引用](https://stackoverflow.com/questions/4288030/c-objects-when-should-i-use-pointer-or-reference)

我刚从 Java 出来，是 C++ 的新手。在一个月的时间里，我设法自学了 C++。我在这里和那里编写了一些基本的东西，并理解了一些概念（多态性、虚函数等）。虽然我知道指针是如何工作的，但我仍然不知道何时使用它们。

我知道当你想使用 new 在堆上创建一些东西时，你必须使用指针，但我无法识别应该使用指针和引用的其他情况。关于何时使用我应该知道的指针是否有某种经验法则？比如函数参数什么时候应该有 & 或 * 等等。抱歉这个菜鸟问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:40:21.167

其他问题的答案相同（http://stackoverflow.com/questions/7058339/c-when-to-use-references-vs-pointers）：

尽可能使用参考，必须使用指针。

避免指针，直到你不能。

原因是与任何其他构造相比，指针使事情更难理解/阅读，更不安全且更危险的操作。

所以经验法则是只有在没有其他选择的情况下才使用指针。

例如，当函数在某些情况下可以返回 nullptr 并且假定它会返回时，返回指向对象的指针是一个有效的选项。也就是说，更好的选择是使用类似于 boost::optional 的东西。

另一个例子是使用指向原始内存的指针进行特定的内存操作。这应该隐藏在非常狭窄的代码部分中，以帮助限制整个代码库的危险部分。

在您的示例中，使用指针作为参数没有意义，因为：

如果您提供 nullptr 作为参数，您将进入 undefined-behaviour-land；参考属性版本不允许（没有容易发现的技巧）1的问题。参考属性版本对用户来说更容易理解：您必须提供一个有效的对象，而不是可以为空的东西。如果函数的行为必须在有或没有给定对象的情况下工作，那么使用指针作为属性建议您可以将 nullptr 作为参数传递，这对于函数来说很好。这是用户和实现代码之间的一种契约。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:39:04.737

*   使用引用作为函数参数（简单、高效、（大部分）安全）。

*   使用指针作为对象的非拥有成员（使用指针重新分配往往比使用引用更有意义）。

*   使用智能指针来拥有堆分配的对象（并避免大多数对象的堆分配）。

指针也可以用于指针`nullptr`的理想可能值以及想要使用指针算术的情况。

# email - 电子邮件地址格式的正式定义是什么？

> ID：13171523
> 
> 赞同：0
> 
> 时间：2012-11-01T05:35:10.943
> 
> 标签：email, formal-languages

我想知道构建电子邮件地址的正式定义。

我不只是想要答案，而是如何得到它，因为我想自己学习如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:52:49.267

正式定义？请参阅[RFC821](https://www.rfc-editor.org/rfc/rfc821#page-30)。

```
<path> ::= "<" [ <a-d-l> ":" ] <mailbox> ">"
<a-d-l> ::= <at-domain> | <at-domain> "," <a-d-l> 
<at-domain> ::= "@" <domain>
<domain> ::=  <element> | <element> "." <domain>
<element> ::= <name> | "#" <number> | "[" <dotnum> "]"
<mailbox> ::= <local-part> "@" <domain>
<local-part> ::= <dot-string> | <quoted-string>
<name> ::= <a> <ldh-str> <let-dig>
<ldh-str> ::= <let-dig-hyp> | <let-dig-hyp> <ldh-str>
<let-dig> ::= <a> | <d>
<let-dig-hyp> ::= <a> | <d> | "-"
<dot-string> ::= <string> | <string> "." <dot-string>
<string> ::= <char> | <char> <string>
<quoted-string> ::=  """ <qtext> """
<qtext> ::=  "\" <x> | "\" <x> <qtext> | <q> | <q> <qtext>
<char> ::= <c> | "\" <x>
<dotnum> ::= <snum> "." <snum> "." <snum> "." <snum>
<number> ::= <d> | <d> <number>
<CRLF> ::= <CR> <LF> 
```

# c# - 将 XML 转换为动态 C# 对象

> ID：13171525
> 
> 赞同：75
> 
> 时间：2012-11-01T05:35:26.093
> 
> 标签：c#, xml, json

我使用以下 C# 代码使用 JSON.Net 框架将 JSON 数据字符串转换为动态对象：

```
// Creates a dynamic .Net object representing the JSON data
var ProductDB = JsonConvert.DeserializeObject<dynamic>(JsonData); 
```

转换后，我可以使用如下代码直接访问元素：

```
// Variables to be used
string ProductID;
string ProductType;
int ProductQty;

// Loop through each of the products
foreach (dynamic product in ProductDB.products)
{
    ProductID = product.id;
    ProductType = product.type;
    ProductQty = product.qty;
} 
```

处理 XML 数据时有什么类似的东西吗？我可以使用 JSON.net 将我的 XML 转换为 JSON，然后重新使用上面的代码，但这感觉像是在作弊。

谢谢。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2016-10-06T17:35:25.233

```
XDocument doc = XDocument.Parse(xmlData); //or XDocument.Load(path)
string jsonText = JsonConvert.SerializeXNode(doc);
dynamic dyn = JsonConvert.DeserializeObject<ExpandoObject>(jsonText); 
```

我认为“作弊”是答案 - xml 解决方案很长 :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-07T13:08:55.007

未来访问者的另一种选择，来自 ITDevSpace 的一个不包括带有子元素的属性。

```
public class XmlWrapper
{
    public static dynamic Convert(XElement parent)
    {
        dynamic output = new ExpandoObject();

        output.Name = parent.Name.LocalName;
        output.Value = parent.Value;

        output.HasAttributes = parent.HasAttributes;
        if (parent.HasAttributes)
        {
            output.Attributes = new List<KeyValuePair<string, string>>();
            foreach (XAttribute attr in parent.Attributes())
            {
                KeyValuePair<string, string> temp = new KeyValuePair<string, string>(attr.Name.LocalName, attr.Value);
                output.Attributes.Add(temp);
            }
        }

        output.HasElements = parent.HasElements;
        if (parent.HasElements)
        {
            output.Elements = new List<dynamic>();
            foreach (XElement element in parent.Elements())
            {
                dynamic temp = Convert(element);
                output.Elements.Add(temp);
            }
        }

        return output;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-01T15:58:03.477

[Cinchoo ETL](https://www.nuget.org/packages/ChoETL/) - 一个可用于将 xml 解析为动态对象的开源库

```
using (var p = ChoXmlReader.LoadText(xml).WithXPath("/"))
{
    foreach (dynamic rec in p)
        Console.WriteLine(rec.Dump());
} 
```

查看 CodeProject 文章以获得更多帮助。

免责声明：我是这个库的作者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-18T17:45:24.270

从@FSX 的回答中，我成功使用了“ [Parse XML to dynamic object in C#](http://www.itdevspace.com/2012/07/parse-xml-to-dynamic-object-in-c.html) ”中的解决方案：

```
public class XmlToDynamic
{
    public static void Parse(dynamic parent, XElement node)
    {
        if (node.HasElements)
        {
            if (node.Elements(node.Elements().First().Name.LocalName).Count() > 1)
            {
                //list
                var item = new ExpandoObject();
                var list = new List<dynamic>();
                foreach (var element in node.Elements())
                {                        
                    Parse(list, element);                        
                }

                AddProperty(item, node.Elements().First().Name.LocalName, list);
                AddProperty(parent, node.Name.ToString(), item);
            }
            else
            {
                var item = new ExpandoObject();

                foreach (var attribute in node.Attributes())
                {
                    AddProperty(item, attribute.Name.ToString(), attribute.Value.Trim());
                }

                //element
                foreach (var element in node.Elements())
                {
                    Parse(item, element);
                }

                AddProperty(parent, node.Name.ToString(), item);
            }
        }
        else
        {
            AddProperty(parent, node.Name.ToString(), node.Value.Trim());
        }
    }

    private static void AddProperty(dynamic parent, string name, object value)
    {
        if (parent is List<dynamic>)
        {
            (parent as List<dynamic>).Add(value);
        }
        else
        {
            (parent as IDictionary<String, object>)[name] = value;
        }
    }
} 
```

# python - Python从多个列表追加到标签

> ID：13171529
> 
> 赞同：-2
> 
> 时间：2012-11-01T05:35:43.487
> 
> 标签：python

所以我有几个列表是数据文件中变量的标题。设置如下所示：

> ```
> headerGroup1 = ["1", "2", "3, "4", "5"]
> headerGroup2 = ["6", "7", "8, "9", "10"]
> headerGroup3 = ["1", "2", "3", "4", "5"] 
> ```

我有一个如下所示的主文件：

> ```
> masterVars = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"] 
> ```

我想做三件事：

*   创建一个列表，其中按顺序包含 masterVars 中的所有项目。而且我不知道值是否是唯一的。
*   如果 headerGroupX 中包含的列表项位于 masterVars 中，则将该标题组添加到列表项中。
*   将包含所有 64k 项的列表转储到我可以在 SPSS 中管理的内容中（有点开玩笑）

如果只有 2 个列表，我认为这会很简单。我认为我遇到的最大问题是在将数据添加到列表项之后会发生什么。但我不完全确定我在搞砸什么。

编辑：

这是我想要输出的示例：

> ```
> newMasterFile = ["headerGroup1, headerGroup3, 1", "headerGroup1, headerGroup3, 2", etc.] 
> ```

这会让事情变得更清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:18:19.947

```
import functools # python3 compatibility (for reduce function)

# unsorted - see 3,4 are swaped!
masterVars = ["1", "2", "4", "3", "5", "6", "7", "8", "9", "10"]

input_dict=dict(headerGroup1 = ["1", "2", "3", "4", "5"],headerGroup2 = ["6", "7", "8", "9", "10"],headerGroup3 = ["1", "2", "3", "4", "5"])

# used builtins sorted function for sorting 
new_master_file=[' '.join(j[0])+' '+j[1] for j in [functools.reduce(lambda a,b:(i in input_dict[b] and a[0]+[b] or a[0],i),input_dict,[[],i]) for i in sorted(masterVars,key=int)]]

for i in new_master_file:
    print (i) 
```

还是您喜欢更具可读性的版本？;)

PS。什么是SPSS？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:44:50.500

> 创建一个列表，其中按顺序包含 masterVars 中的所有项目。而且我不知道值是否是唯一的。

它已经“排序”（用引号引起来，因为你从不解释你想要什么顺序），但假设它不是：

```
>>> shuffle(masterVars)
>>> masterVars ['2', '9', '5', '7', '4', '1', '10', '6', '8', '3']
>>> sort(masterVars, key=lambda x: int(x))
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'] 
```

如果您不知道这些值是否唯一，并且希望它们是唯一的，请将其转换为`set`.

> 如果 headerGroupX 中包含的列表项位于 masterVars 中，则将该标题组添加到列表项中。

```
new_list = []
for i in headerGroupX:
   if i in masterVars:
      new_list.append(','.join(headerGroupX)+','+i)
   else:
      new_list.append(i) 
```

# angularjs - 在指令中使用 $http 和 $templateCache 不会返回结果

> ID：13171535
> 
> 赞同：9
> 
> 时间：2012-11-01T05:36:22.693
> 
> 标签：angularjs

我正在尝试创建一个可以加载模板的指令。然后模板将被缓存，因此当您第二次单击该元素时，它不会尝试加载它，而是从 $templateCache 获取最近加载的值。

我注意到在缓存命中的情况下，我没有从 $http.get() 方法得到任何响应。

```
<html ng-app="website">
<body ng-controller="MyController">
    <a href='#' ng-click="load()">Click Event</a>
    <a href='#' click-load>Click Directive</a>

</body>
</html>​

angular.module('website', []).directive('clickLoad', function($q, $http, $templateCache) {
    return function(scope, element, attrs) {
        function loadData() {
            $http.get('http://fiddle.jshell.net', {
                cache: $templateCache
            }).then(function(result) {
                alert('loaded ' + result.data.length + " bytes");
            });

        }
        element.bind('click', loadData);
    };
});

function MyController($scope, $http, $templateCache) {
    $scope.load = function() {
        $http.get('http://fiddle.jshell.net', {
            cache: $templateCache
        }).then(function(result) {
            alert('loaded ' + result.data.length + " bytes");
        });
    }
} 
```

我创建了一个模拟我的场景的小提琴：

[http://jsfiddle.net/3ea64/](http://jsfiddle.net/3ea64/)

请注意，您可以根据需要多次单击“单击事件”链接，但是“单击指令”链接仅在您先单击时才有效，如果您先单击“单击事件”链接，则根本无效。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T07:51:01.597

我已经玩了一点，并使用了 AngularJS 的缓存（在这里描述：http: [//docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$http）

这是一个现场演示：http: [//jsfiddle.net/4SsgA/](http://jsfiddle.net/4SsgA/)

我基本上调整了 $http 语法并使用 ng-click 指令而不是在指令内注册事件侦听器（只是因为我更喜欢它:)）

HTML：

```
<html ng-app="website">
<body ng-controller="MyController">
    <a href='#' ng-click="load()">Click Event</a>
    <a href='#' click-load ng-click="loadData()">Click Directive</a>
</body>
</html>​ 
```

JS：

```
angular.module('website', []).directive('clickLoad', function($q, $http, $templateCache) {
    return function(scope, element, attrs) {
        scope.loadData = function() {
            $http({method: 'GET', url: 'http://fiddle.jshell.net', cache: true}).then(function(result) {
                alert('loaded ' + result.data.length + " bytes");
            });
        }
    };
});

function MyController($scope, $http, $templateCache) {
    $scope.load = function() {
        $http({method: 'GET', url: 'http://fiddle.jshell.net', cache: true}).then(function(result) {
            alert('loaded ' + result.data.length + " bytes");
        });
    }
}​ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-20T20:57:52.247

我建议创建一个单独的服务来完成这项工作：

```
YourModule.factory('Utils', ['$q', '$http', '$templateCache', function ($q, $http, $templateCache) {
    var Service = function() {

    };

    Service.prototype.TemplatePromise = function (keyOrUrl) {
        var data = $templateCache.get(keyOrUrl);

        if (data) {
            return $.when(data);
        } else {
            var deferred = $.defer();

            $http.get(keyOrUrl, { cache: true }).success(function (html) {
                $templateCache.put(keyOrUrl, html);

                deferred.resolve(html);
            });

            return deferred.promise;
        }
    };

    return new Service();
}]); 
```

使用这种方法将为您获取模板的方式增加灵活性和隔离性，很可能您希望它以自己独立的方式完成......

# c# - C#中“0”和“new int()”的区别

> ID：13171537
> 
> 赞同：2
> 
> 时间：2012-11-01T05:36:33.817
> 
> 标签：c#

> **可能重复：**
> [在哪里以及为什么使用 int a=new int？](https://stackoverflow.com/questions/5746873/where-and-why-use-int-a-new-int)

下面这两个有什么区别？

```
int i =0; 
int i = new int(); 
```

内存分配有什么区别吗？还有其他区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T05:45:21.563

它们都编译成相同的东西。

假设你有：

```
static void Main(string[] args)
{
    int i = 0;
    int j = new int();

    Console.Write("{0}{1}", i, j);
} 
```

如果您在发布模式下构建并在[ILSpy](http://ilspy.net/)中看到可执行文件，它会编译为：

```
private static void Main(string[] args)
{
      int i = 0;
      int j = 0;
      Console.Write("{0}{1}", i, j);
} 
```

`new int()`和`default(int)`

这是IL

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       27 (0x1b)
  .maxstack  3
  .locals init ([0] int32 i,
           [1] int32 j)
  IL_0000:  ldc.i4.0
  IL_0001:  stloc.0
  IL_0002:  ldc.i4.0
  IL_0003:  stloc.1
  IL_0004:  ldstr      "{0}{1}"
  IL_0009:  ldloc.0
  IL_000a:  box        [mscorlib]System.Int32
  IL_000f:  ldloc.1
  IL_0010:  box        [mscorlib]System.Int32
  IL_0015:  call       void [mscorlib]System.Console::Write(string,
                                                            object,
                                                            object)
  IL_001a:  ret
} // end of method Program::Main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T05:42:06.993

第一个

```
int i = 0; 
```

初始化一个新的整数 name `i`。然后，将其值设置为`0`

而第二个

```
int i = new int(); 
```

将 name 的新整数初始化为`i`默认值（即`0`）。这也类似于

```
int i = default(int); 
```

谢谢，
我希望你觉得这有帮助:)

# javascript - 从 {Body} / Tumblr 帖子中提取第一张图片

> ID：13171538
> 
> 赞同：0
> 
> 时间：2012-11-01T05:36:38.340
> 
> 标签：javascript, jquery, json, themes, tumblr

有没有办法从任何帖子 aka {Body} （类似于 wordpress 的特色图片）中提取第一张图片以用作某处的缩略图？

我的计划是仅在索引页面上仅显示每个帖子的第一张带有帖子标题的图片。

可能使用 json 或 jquery 或 sth

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:46:00.787

像这样的东西可以帮助你

```
$("img:first") 
```

检查这个[jquery 选择](http://api.jquery.com/first-selector/)器

# java - 将 JSONArray 转换为 List 的最简单和最有效的方法

> ID：13171540
> 
> 赞同：7
> 
> 时间：2012-11-01T05:36:56.310
> 
> 标签：java, json, gson

将 org.json.JSONArray 转换为 List 的最简单和最有效的方法是什么？

# c - typedef 结构错误。在“*”标记之前

> ID：13171544
> 
> 赞同：0
> 
> 时间：2012-11-01T05:37:05.767
> 
> 标签：c, struct, typedef

编译器是 gcc，我使用的是旧版本的 linux

```
typedef struct strlist strlist;

struct strlist
{
    char *data;
    time_t *timestamp;
    struct strlist *next;
}

strlist * list_directory(char *dirname)
{
//do something
} 
```

错误信息是：

```
error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token 
```

它上线了：

```
strlist * list_directory(char *dirname) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:40:18.720

您需要以分号结束结构声明。当我开始用 C 编程时，这让我多次绊倒......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:40:56.823

```
struct strlist
{
    char *data;
    time_t *timestamp;
    struct strlist *next;
};
^^^
 | 
```

您缺少`;`结构声明末尾的 。

# java-ee-6 - 为什么每次在 web 和 ejb 容器之间调用 LoginModule？

> ID：13171547
> 
> 赞同：3
> 
> 时间：2012-11-01T05:37:33.053
> 
> 标签：java-ee-6, jboss7.x

在数据库中更新应用程序用户的密码后，我立即注意到 JBoss 抛出 javax.ejb.EJBAccessException: JBAS013323: Invalid User。这导致发现每次在 web 和 ejb 容器之间调用 LoginModule。我怎样才能停下来？

[我正在运行 AS 7.2.0.Alpha1-SNAPSHOT 并在阅读jira](https://issues.jboss.org/browse/AS7-3498)中的问题后将 cache-type="default" 添加到我的配置中：AS7-3498 （感谢@Quincy 的指针）。然而这并没有解决问题。我的安全域配置如下：

```
 <subsystem xmlns="urn:jboss:domain:security:1.2">
        <security-domains>
            <security-domain name="PatracSecurityDomain" cache-type="default">
                <authentication>
                    <login-module code="DatabaseUsers" flag="required">
                        <module-option name="dsJndiName" value="java:/postgresdb"/>
                        <module-option name="principalsQuery" value="SELECT userpassword FROM applicationuser WHERE email=?"/>
                        <module-option name="rolesQuery" value="SELECT r.name, 'Roles' FROM USER_ROLE ur JOIN APPLICATIONUSER u ON ur.userid=u.id JOIN ROLE r ON ur.roleid=r.id where u.email=?"/>
                    </login-module>
                </authentication>
            </security-domain>
            <security-domain name="jboss-web-policy" cache-type="default">
                <authorization>
                    <policy-module code="Delegating" flag="required"/>
                </authorization>
            </security-domain>
            <security-domain name="jboss-ejb-policy" cache-type="default">
                <authorization>
                    <policy-module code="Delegating" flag="required"/>
                </authorization>
            </security-domain>
        </security-domains>
    </subsystem> 
```

更改密码并通过 SFSB 保持更改不会出错，但是一旦应用程序尝试进​​行一些会话管理，这涉及使用另一个 SFSB，就会引发 FailedLoginException。

这是堆栈跟踪：

```
00:25:35,521 ERROR [org.jboss.security] (http-/127.0.0.1:8443-2) PBOX000206: Login failure: javax.security.auth.login.FailedLoginException: PBOX000070: Password invalid/Password required
    at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:283) [picketbox-4.0.13.Final.jar:4.0.13.Final]
    at sun.reflect.GeneratedMethodAccessor590.invoke(Unknown Source) [:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:698) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:696) [rt.jar:1.7.0_07]
    at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:695) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.login(LoginContext.java:594) [rt.jar:1.7.0_07]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:408) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:345) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:333) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:146) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.as.security.service.SimpleSecurityManager.authenticate(SimpleSecurityManager.java:354) [jboss-as-security-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.security.service.SimpleSecurityManager.push(SimpleSecurityManager.java:292) [jboss-as-security-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.ejb3.security.SecurityContextInterceptor$1.run(SecurityContextInterceptor.java:49) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.ejb3.security.SecurityContextInterceptor$1.run(SecurityContextInterceptor.java:45) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_07]
    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:74) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:42) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:182) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at com.patrac.service.LoginHistoryService$$$view94.create(Unknown Source) [Patrac-ejb.jar:]
    at com.patrac.controller.SessionManager.createLoginHistoryRecord(SessionManager.java:163) [classes:]
    at com.patrac.controller.SessionManager.endOfSessionHouseKeeping(SessionManager.java:130) [classes:]
    at com.patrac.controller.SessionManager.logout(SessionManager.java:87) [classes:]
    at com.patrac.controller.SessionManager.changePassword(SessionManager.java:236) [classes:]
    at com.patrac.controller.SessionManager$Proxy$_$$_WeldClientProxy.changePassword(SessionManager$Proxy$_$$_WeldClientProxy.java) [classes:]
    at com.patrac.controller.backingbean.ChangePasswordBean.updateUserPasswordInSession(ChangePasswordBean.java:44) [classes:]
    at com.patrac.controller.statemachine.effect.ChangePasswordEffect.performAction(ChangePasswordEffect.java:21) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.effect.ChangePasswordEffect.performAction(ChangePasswordEffect.java:10) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.transition.Transition.fire(Transition.java:60) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.transition.GoToWorkflowTransition.fire(GoToWorkflowTransition.java:49) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.workflow.ChangePasswordWorkflow$1.evaluate(ChangePasswordWorkflow.java:62) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.workflow.ChangePasswordWorkflow$1.evaluate(ChangePasswordWorkflow.java:56) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.event.Event.trigger(Event.java:85) [Patrac-ejb.jar:]
    at com.patrac.controller.backingbean.BackingBean.dispatch(BackingBean.java:68) [classes:]
    at com.patrac.controller.backingbean.ChangePasswordBean$Proxy$_$$_WeldClientProxy.dispatch(ChangePasswordBean$Proxy$_$$_WeldClientProxy.java) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264) [jbossweb-7.0.17.Final.jar:]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.17.Final.jar:]
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.17.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.17.Final.jar:]
    at com.patrac.filter.NoCacheFilter.doFilter(NoCacheFilter.java:46) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.17.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:165) [jboss-as-web-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:372) [jbossweb-7.0.17.Final.jar:]
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:897) [jbossweb-7.0.17.Final.jar:]
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:634) [jbossweb-7.0.17.Final.jar:]
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:2039) [jbossweb-7.0.17.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]

00:25:35,566 ERROR [org.jboss.security] (http-/127.0.0.1:8443-2) PBOX000206: Login failure: javax.security.auth.login.FailedLoginException: PBOX000070: Password invalid/Password required
    at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:283) [picketbox-4.0.13.Final.jar:4.0.13.Final]
    at sun.reflect.GeneratedMethodAccessor590.invoke(Unknown Source) [:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:698) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext$4.run(LoginContext.java:696) [rt.jar:1.7.0_07]
    at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:695) [rt.jar:1.7.0_07]
    at javax.security.auth.login.LoginContext.login(LoginContext.java:594) [rt.jar:1.7.0_07]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:408) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:345) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:333) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:146) [picketbox-infinispan-4.0.13.Final.jar:4.0.13.Final]
    at org.jboss.as.security.service.SimpleSecurityManager.authenticate(SimpleSecurityManager.java:354) [jboss-as-security-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.security.service.SimpleSecurityManager.push(SimpleSecurityManager.java:292) [jboss-as-security-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.ejb3.security.SecurityContextInterceptor$1.run(SecurityContextInterceptor.java:49) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.ejb3.security.SecurityContextInterceptor$1.run(SecurityContextInterceptor.java:45) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.7.0_07]
    at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:74) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:42) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:182) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ejb3.component.stateful.StatefulComponentIdInterceptor.processInvocation(StatefulComponentIdInterceptor.java:52) [jboss-as-ejb3-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
    at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72) [jboss-as-ee-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at com.patrac.controller.statemachine.screen.ChangePasswordScreen$$$view77.findLeafStateAndExitUpward(Unknown Source) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.transition.Transition.exitSource(Transition.java:90) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.transition.Transition.fire(Transition.java:62) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.transition.GoToWorkflowTransition.fire(GoToWorkflowTransition.java:49) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.workflow.ChangePasswordWorkflow$1.evaluate(ChangePasswordWorkflow.java:62) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.workflow.ChangePasswordWorkflow$1.evaluate(ChangePasswordWorkflow.java:56) [Patrac-ejb.jar:]
    at com.patrac.controller.statemachine.event.Event.trigger(Event.java:85) [Patrac-ejb.jar:]
    at com.patrac.controller.backingbean.BackingBean.dispatch(BackingBean.java:68) [classes:]
    at com.patrac.controller.backingbean.ChangePasswordBean$Proxy$_$$_WeldClientProxy.dispatch(ChangePasswordBean$Proxy$_$$_WeldClientProxy.java) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_07]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264) [jbossweb-7.0.17.Final.jar:]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.17.Final.jar:]
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.13-jbossorg-1.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.6.Final.jar:2.0.6.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.17.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.9.Final.jar:2012-08-06 19:12]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.17.Final.jar:]
    at com.patrac.filter.NoCacheFilter.doFilter(NoCacheFilter.java:46) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.17.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:165) [jboss-as-web-7.2.0.Alpha1-SNAPSHOT.jar:7.2.0.Alpha1-SNAPSHOT]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.17.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:372) [jbossweb-7.0.17.Final.jar:]
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:897) [jbossweb-7.0.17.Final.jar:]
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:634) [jbossweb-7.0.17.Final.jar:]
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:2039) [jbossweb-7.0.17.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T05:51:31.903

这应该与问题有关。 [https://issues.jboss.org/browse/AS7-3498](https://issues.jboss.org/browse/AS7-3498)

添加`cache-type="default"`到登录模块应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:59:26.280

问题是`SessionManager#logout`（以编程方式注销用户，例如`HttpServletRequest#logout`））在调用之前被调用`LoginHistoryService#create`。“无效用户”错误是在 SLSB 上调用 create 之前注销删除主体的结果。在解决问题 `LoginHistoryService#create`之前调用。`HttpServletRequest#logout`

我应该抓住那个！在凌晨 4 点通过模糊的眼睛看代码是我的错。

# macos - 在 OSX 上对 curl 的 SFTP 支持

> ID：13171550
> 
> 赞同：11
> 
> 时间：2012-11-01T05:38:01.317
> 
> 标签：macos, curl, ssh, sftp, homebrew

我正在尝试在 OSX 中获得对 curl 的 SFTP 支持。我通过安装 curl

```
$ brew install curl --with-ssh 
```

我还通过将自制版本符号链接到 /usr/bin

```
$ sudo ln -s /usr/local/bin/curl /usr/bin/curl 
```

但我仍然得到一个

```
curl: (1) Protocol sftp not supported or disabled in libcurl 
```

使用时

```
$ curl sftp://some.host.com/path/to/file 
```

我的努力与真棒 git-ftp [https://github.com/resmo/git-ftp/issues/146的问题有关](https://github.com/resmo/git-ftp/issues/146)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T12:42:16.443

运行“curl -V”并查看 SFTP 是否被列为支持的协议。

如果不是，则需要使用 libssh2 重建 curl 以获得内置支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-20T15:36:52.183

由于该`--with-libssh2`选项[已从 brew](https://github.com/Homebrew/homebrew-core/issues/37255)中删除，因此可以采用以下方法：

```
brew install curl-openssl 
```

意识到：

```
curl is keg-only, which means it was not symlinked into /usr/local,
because macOS already provides this software and installing another version in
parallel can cause all kinds of trouble.

If you need to have curl first in your PATH, run:
  echo 'export PATH="/usr/local/opt/curl/bin:$PATH"' >> ~/.zshrc 
```

或使用以下方法直接调用它：

```
/usr/local/opt/curl/bin/curl ... 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-11-27T01:50:20.237

如果您使用的是 Mac，则必须先运行它才能启用：

```
brew install curl --with-libssh2 
```

# java - Java Web 服务的性能

> ID：13171560
> 
> 赞同：0
> 
> 时间：2012-11-01T05:39:04.293
> 
> 标签：java, web-services, webservices-client

我已经在 Eclipse 中为 Java Web 服务项目创建了客户端和服务器。我试图做的是 -

第 1 步 - 进行 1000 次服务器调用并测量每次调用的平均时间。

第 2 步 - 进行 100000 次服务器调用并测量每次调用的平均时间。

我看到的是，第 2 步中每个呼叫的平均时间少于第 1 步中的平均时间。有人可以指导我为什么会这样吗？

谢谢，普拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:50:45.260

从进行数百次负载测试的经验来看，我认为这可能是因为预热时间。你有考虑过这个吗？通常系统需要更多时间来处理前 N 个调用。这可能是因为...

```
 - thread pools need to be initialized
 - database connection pools must be populated
 - classes may need to be populated into permgen for the first time
 - | insert another init action here | 
```

经过几次迭代后，预热时间趋于均匀，因此数字越大，平均值越好。经过数千次迭代，“预热时间”不再重要。您可以通过在前 X 秒内进行几次调用并给服务器时间预热来解决小迭代问题。预热后增加用户/线程数。例如，Jmeter 有办法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:56:11.203

我猜JIT是原因。

几乎所有的JVM都会在你运行程序的时候做JIT，但是它有自己的条件来启动JIT。鉴于您使用的 JDK 是 Oracle JDK。你可以选择两种模式来运行你的JVM，客户端和服务器，两种模式下启动JIT的条件是不同的。我猜你选择的模式是服务器。

依赖于两个计数器，Invocation Counter 和 Back Edge Counter，JIT 会将你的 java 字节码编译为本机代码，这可以提高你的应用程序性能。

**Invocation Counter**会统计方法的调用次数。当它大于某个值时，JIT 开始将“热”方法编译为本机代码并替换旧代码。下次调用该方法时，程序将运行本机代码。

**后沿计数器**将计算循环中的时间。当它大于某个值时，JIT 会将该循环中的代码编译为本机代码并替换旧代码。因为替换在调用堆栈上，所以也称为**OSR(On Stack Replacement)**。

您可以通过 JVM 参数 -XX:CompileThreshold=10000 来控制 Invocation Counter 的“某个值”。即调用 10000 次后，该方法将被编译，而 10000 是服务器模式下的默认值。

您可以通过 JVM 参数 -XX: OnStackReplacePercentage=140 来控制 Back Edge Counter 的“某个值”。这里有一个公式。“某个值”=(CompileThreshold * (OnStackReplacePercentage - InterpreterProfilePercentage))/100。默认情况下，服务器模式下 InterpreterProfilePercentage=33 和 OnStackReplacePercentage=140。Thar 是，如果循环中的运行时间超过 10700，JIT 将启动。

总的来说，我认为第2步的调用时间会触发JIT，所以第2步的性能更高。

# tcl - TCL：从字符串中第一次出现的字符中查找并删除字符串中的所有字符

> ID：13171561
> 
> 赞同：1
> 
> 时间：2012-11-01T05:39:04.923
> 
> 标签：tcl

我是 TCL 的新手，需要一个 TCL 方法/实用程序/代码，它可以从字符串中的第一次出现中查找和删除字符串中的所有字符（包括其自身）。

我有一个如下字符串：

```
Func::set()->method(); 
```

在上面的字符串中，我需要找到第一次出现的 '(' 并将其全部删除，然后才能得到结果字符串：

```
Func::set 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:42:47.337

您可以使用正则表达式来做到这一点：

```
set the_string [regsub {\(.*} $the_string ""] 
```

或者如果您不熟悉正则表达式，那么您可以使用更传统的方式：

```
set the_string [
    string range $the_string 0 [
        expr {[string first "(" $the_string]-1}
    ]
] 
```

[有关更多信息，请阅读 [ string](http://www.tcl.tk/man/tcl8.6/TclCmd/string.htm) ]、[ [regsub](http://www.tcl.tk/man/tcl8.6/TclCmd/regsub.htm) ] 和 [ [re_syntax](http://www.tcl.tk/man/tcl8.6/TclCmd/re_syntax.htm) ]的手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:05:26.670

另一种技术是使用`split`and `lindex`：

```
set the_string [lindex [split $the_string "("] 0] 
```

这是简短而简单的，但如果你的字符串很长，可能会做很多额外的工作。

# scripting - strContents 在脚本执行时被视为垃圾值 'ÿ_[

> ID：13171562
> 
> 赞同：0
> 
> 时间：2012-11-01T05:39:08.123
> 
> 标签：scripting, vbscript

我有以下来自 heyscriptingguy 的简单脚本。

问题是 strContents 被认为是垃圾值 'ÿ_[

[http://blogs.technet.com/b/heyscriptingguy/archive/2005/10/21/how-can-i-read-a-text-file-on-a-remote-computer.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/10/21/how-can-i-read-a-text-file-on-a-remote-computer.aspx)

垃圾值：'ÿ_[

从脚本编辑工具。我可以看到这个值 ![在此处输入图像描述](../Images/3bfcd1fbecf1e2e2b80a65c8912faf82.png)

完整脚本是：

```
Const ForReading = 1

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objTextFile = objFSO.OpenTextFile _
    ("\\USCOLB1\d$\LOG\log.txt", ForReading)
strContents = objTextFile.ReadAll
objTextFile.Close

Wscript.Echo strContents 
```

这里有什么问题？相同的脚本在 LAB 中完美运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:15:20.857

'yunk' 可能是 UTF-16 ByteOrderMark ( [BOM](http://en.wikipedia.org/wiki/Byte_order_mark#Representations_of_byte_order_marks_by_encoding) )，并且应该使用 .OpenTextFile 方法的第四个（格式/编码）参数设置为 1/TriStateTrue/Unicode ( [Docs](http://msdn.microsoft.com/en-us/library/314cz14s%28v=vs.84%29.aspx) )打开文件

# ios - iOs ExtAudioFileCreateWithURL - 创建文件时出错（'fmt？'）

> ID：13171563
> 
> 赞同：4
> 
> 时间：2012-11-01T05:39:42.347
> 
> 标签：ios, core-audio

嗨，我一直在尝试从下面的代码创建一个 wav 音频文件，但不断收到错误 Creating file ('fmt?')。有谁可以帮我离开这里吗 ？谢谢。

我的日志： *2012-11-01 13:33:14.183 Novocaine iOS Example[7456:c07] URL: file://localhost/Users/pier/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/01EBF2C0- 2C3A-490D-835E-9C39A3E88E0B/Documents/testrecording.wav

错误：创建文件 ('fmt?')*

```
- (id)initWithAudioFileURL:(NSURL *)urlToAudioFile samplingRate:(float)thisSamplingRate numChannels:(UInt32)thisNumChannels
{
self = [super init];
if (self)
{

    // Zero-out our timer, so we know we're not using our callback yet
    self.callbackTimer = nil;

    // Open a reference to the audio file
    self.audioFileURL = urlToAudioFile;
    CFURLRef audioFileRef = (CFURLRef)self.audioFileURL;

    AudioStreamBasicDescription outputFileDesc; 

    // Set a few defaults and presets
    self.samplingRate = thisSamplingRate;
    self.numChannels = thisNumChannels;
    self.currentTime = 0.0;
    self.latency = .011609977; // 512 samples / ( 44100 samples / sec ) default

    outputFileDesc.mSampleRate = self.samplingRate;
    outputFileDesc.mFormatID = kAudioFormatLinearPCM;
    outputFileDesc.mFormatFlags = kAudioFormatFlagIsFloat;
    outputFileDesc.mBytesPerPacket = 4*self.numChannels;
    outputFileDesc.mFramesPerPacket = 1;
    outputFileDesc.mBytesPerFrame = 4*self.numChannels;
    outputFileDesc.mChannelsPerFrame = self.numChannels;
    outputFileDesc.mBitsPerChannel = 32;

    CheckError(ExtAudioFileCreateWithURL(audioFileRef, kAudioFileWAVEType, &outputFileDesc, NULL, kAudioFileFlags_EraseFile, &_outputFile), "Creating file"); 
```

. . .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:51:47.263

我不知道为什么，但我做了以下更改并且它起作用了。有人会认为 wav 文件的类型为 kAudioFileWAVType，不是吗？
有没有人愿意对此有所启发？

```
outputFileDesc.mFormatFlags = kAudioFormatFlagIsBigEndian | kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked; //changed

CheckError(ExtAudioFileCreateWithURL(audioFileRef, kAudioFileCAFType, &outputFileDesc, NULL, kAudioFileFlags_EraseFile, &_outputFile), "Creating file"); //changed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-29T23:32:18.937

不同寻常的是，它`ExtAudioFileCreateWithURL`的 WAV 文件实现似乎**需要**显式设置该`kAudioFormatFlagIsPacked`标志。

这是不寻常的，因为`kAudioFormatFlagIsPacked`文档声称该标志隐含在 OP 的案例中：

> 即使这个标志是明确的，如果`AudioStreamBasicDescription`被填写，则暗示这个标志被设置，使得字段具有以下关系： `((mBitsPerSample / 8) * mChannelsPerFrame) == mBytesPerFrame`

这也很不寻常，因为其他格式，如 CAF，根本不在乎。

**TL;DR**像这样设置格式标志将修复`kAudioFileUnsupportedDataFormatError = 'fmt?'`错误：

```
outputFileDesc.mFormatFlags = kAudioFormatFlagIsFloat | kAudioFormatFlagIsPacked; 
```

# asp.net-mvc - 如何在 url 中隐藏 id (MVC3)

> ID：13171573
> 
> 赞同：0
> 
> 时间：2012-11-01T05:40:38.280
> 
> 标签：asp.net-mvc, parameters, asp.net-mvc-routing

**问题**

在我的项目中，我决定使用 db 存储实体“Section”来实现自定义菜单提供程序。因此该部分映射到以下模型：

```
public class TopMenuItemModel : BaseTrivitalModel
{
    public TopMenuItemModel()
    {
        ChildItems = new List<TopMenuItemModel>();
    }

    public int ItemId { get; set; }
    public string RouteUrl { get; set; }
    public string Title { get; set; }
    public string SeName { get; set; }

    public IList<TopMenuItemModel> ChildItems { get; set; }
} 
```

以及模型的视图：

```
@model TopMenuModel
<nav id="main-nav">
    <a href="@Url.RouteUrl("HomePage")">@T("HomePage")</a>
    @foreach (var parentItem in Model.MenuItems)
    { 
        <a href="@Url.RouteUrl("Section", new { seName = parentItem.SeName, sectionId = parentItem.ItemId })">@parentItem.Title</a>
    }
</nav> 
```

我的默认路线是：

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                new[] { "Trivital.Web.Controllers" }
            ); 
```

菜单控制器：

```
public class CommonController : BaseTrivitalController
    {

...     

public ActionResult TopMenu()
        {
            var sections = _sectionService.GetCollectionByParentId(0, true);
            var model = new TopMenuModel();

            model.MenuItems = sections.Select(x =>
                {
                    var item = new TopMenuItemModel()
                    { 
                        ItemId = x.Id,
                        Title = x.GetLocalized(s => s.Title, _workContext.WorkingLanguage.Id, true, true),
                        SeName = x.GetSeName(),
                        RouteUrl = "",
                    };

                    return item;
                })
                .ToList();

            return PartialView(model);
        }
    }
} 
```

现在我有一个 SectionController ，其中有一个 ActionResult 方法：

```
//section main page
        public ActionResult Section(string seName)
        {
            var section = _sectionService.Get(1);
            if (section == null || section.Deleted || !section.Published)
                return RedirectToAction("Index", "Home");

            //prepare the model
            var model = PrepareSectionPageModel(section);

            return View(model);
        } 
```

我当前的部分路线（给我主机/sectionSeName-id）：

```
routes.MapLocalizedRoute(
                            "section", // Route name
                            "{SeName}"+ "-" + "{sectionId}", // URL with parameters
                            new { controller = "Sections", action = "Section" },
                            new { sectionId = @"\d+" }
                            ); 
```

现在我需要让我的 Url 看起来像这样（没有 id，只有部分名称）：

主机/部分SeName

无论如何要在 url 中隐藏 ID 以使 url 看起来对 SEO 友好，但可用于控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:42:22.160

您可以尝试在 web.config 中使用 urlMappings。指定如下内容：

```
<urlMappings enabled="true">
  <add url="~/somedirectory/" mappedUrl="~/somedirectory/1/"/>
</urlMappings> 
```

不过，除非每个部分都有自己唯一的名称，否则我认为任何事情都不会奏效。否则你会有一些冲突的 URL。

您可能还想考虑使用 IIS 的重写模块进行一些自定义工作：

[http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)

我工作的公司就是用这个做知识库文章系统的，和你的情况差不多，效果还不错。（文件夹/ID）

# python - get_do_sorting_url 上的 django-admin-sortable NoReverseMatch 错误

> ID：13171579
> 
> 赞同：3
> 
> 时间：2012-11-01T05:42:00.323
> 
> 标签：python, django, django-admin, jquery-ui-sortable

我正在尝试使用**django-admin-sortable**但是一旦我保存一个对象并尝试在管理界面中加载它，我会**在 adminsortable/edit_inline/tabular.html**模板的第 43 行得到一个 NoReverseMatch。

我真的不知道我做错了什么。

我正在使用`Python 2.7`和`Django 1.4`。我从 pip 安装了 django-admin-sortable。

下面是堆栈跟踪输出。

> 环境：
> 
> ```
> Request Method: GET
> Request URL: http://127.0.0.1:8000/admin/reports/reportsuser/7/
> 
> Django Version: 1.4.2
> Python Version: 2.7.3
> Installed Applications:
> ('django.contrib.auth',
>  'django.contrib.contenttypes',
>  'django.contrib.sessions',
>  'django.contrib.sites',
>  'django.contrib.messages',
>  'django.contrib.staticfiles',
>  'django.contrib.admin',
>  'django.contrib.admindocs',
>  'functional_tests',
>  'reports',
>  'adminsortable')
> Installed Middleware:
> ('django.middleware.common.CommonMiddleware',
>  'django.contrib.sessions.middleware.SessionMiddleware',
>  'django.middleware.csrf.CsrfViewMiddleware',
>  'django.contrib.auth.middleware.AuthenticationMiddleware',
>  'django.contrib.messages.middleware.MessageMiddleware')
> 
> Template error:
> In template /home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/adminsortable/templates/adminsortable/edit_inline/tabular.html, error at line 43 Reverse for 'reports_do_sorting' with arguments '()' and keyword arguments '{'model_type_id': 44L}' not found.
>    33 :           {% spaceless %}
> 
>    34 :           {% for fieldset in inline_admin_form %}
> 
>    35 :             {% for line in fieldset %}
> 
>    36 :               {% for field in line %}
> 
>    37 :                 {% if field.is_hidden %} {{ field.field }} {% endif %}
> 
>    38 :               {% endfor %}
> 
>    39 :             {% endfor %}
> 
>    40 :           {% endfor %}
> 
>    41 :           {% endspaceless %}
> 
>    42 :           {% if inline_admin_form.original %}
> 
>    43 :           <input type="hidden" name="admin_sorting_url" value=" {% get_do_sorting_url inline_admin_form.original %} " />
> 
>    44 :           {% endif %}
> 
>    45 :         </td>
> 
>    46 :         {% for fieldset in inline_admin_form %}
> 
>    47 :           {% for line in fieldset %}
> 
>    48 :             {% for field in line %}
> 
>    49 :               <td class="{{ field.field.name }}">
> 
>    50 :               {% if field.is_readonly %}
> 
>    51 :                   <p>{{ field.contents }}</p>
> 
>    52 :               {% else %}
> 
>    53 :                   {{ field.field.errors.as_ul }}
> 
> Traceback:
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
>   136\.                     response = response.render()
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/response.py" in render
>   104\.             self._set_content(self.rendered_content)
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/response.py" in rendered_content
>   81\.         content = template.render(context)
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py" in render
>   140\.             return self._render(context)
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py" in _render
>   134\.         return self.nodelist.render(context)
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py" in render
>   823\.                 bit = self.render_node(node, context)
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py" in render_node
>   74\.             return node.render(context)
> File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py" 
> ```
> 
> _meta.app_label, kwargs={'model_type_id': obj.model_type_id() }) 文件“/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/urlresolvers.py”反向 476\. return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs)) File "/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core /urlresolvers.py”在 _reverse_with_prefix 396 中。“未找到参数 '%s'。” % (lookup_view_s, args, kwargs)) **kwargs)) _reverse_with_prefix 396 中的文件“/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/urlresolvers.py”。“找不到参数'%s'。 " % (lookup_view_s, args, kwargs)) **kwargs)) _reverse_with_prefix 396 中的文件“/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/urlresolvers.py”。“找不到参数'%s'。 " % (lookup_view_s, args, kwargs))
> 
> ```
> Exception Type: NoReverseMatch at /admin/reports/reportsuser/7/
> Exception Value: Reverse for 'reports_do_sorting' with arguments '()' and keyword arguments '{'model_type_id': 44L}' not found. 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:03:16.157

新版本的[django-admin-sortable](http://pypi.python.org/pypi/django-admin-sortable/) - 1.3.6 包含对传递给 get_do_sorting_url 模板标记的值中的错误的修复。

[编辑]

因此，在使用原始海报之后，事实证明这是 django-admin-sortable 中的一个[已知问题](https://github.com/btaylordesign/django-admin-sortable/issues/9)：内联当前无法在不继承自 sortable 的模型中进行排序。

# c++ - 重构怪物类的 C++ 帮助

> ID：13171585
> 
> 赞同：7
> 
> 时间：2012-11-01T05:42:24.437
> 
> 标签：c++, refactoring, anti-patterns, oop

我有 C 背景，是 C++ 的新手。我有一个基本的设计问题。我有一门课（我称它为“厨师”b/c，我遇到的问题似乎与此非常相似，无论是在复杂性还是问题上）基本上是这样工作的

```
 class chef
    {
    public:
          void prep();
          void cook();
          void plate();

    private: 
          char name;
          char dish_responsible_for;
          int shift_working;
          etc...
    } 
```

在伪代码中，这将按照以下方式实现：

```
 int main{
    chef my_chef;
    kitchen_class kitchen;
    for (day=0; day < 365; day++)
         {
         kitchen.opens();
         ....

         my_chef.prep();
         my_chef.cook();
         my_chef.plate();

         ....

         kitchen.closes();
         }
   } 
```

这里的厨师职业，似乎是怪物职业，有成为怪物职业的潜力。chef 似乎也违反了单一责任原则，所以我们应该有类似的东西：

```
 class employee
  {
  protected: 
        char name;
        int shift_working;
  }

  class kitchen_worker : employee
  {
  protected: 
        dish_responsible_for;
  }

  class cook_food : kitchen_worker
  {
  public:
        void cook();
        etc...
  }
  class prep_food : kitchen_worker
  {
  public:
        void prep();
        etc...
  } 
```

和

```
 class plater : kitchen_worker
     {
     public:
         void plate();
     } 
```

ETC...

诚然，我仍然在为如何在运行时实现它而苦苦挣扎，例如，如果盘子（或“以盘子身份的厨师”）决定在晚餐服务中途回家，那么厨师必须进行新的轮班.

这似乎与我有一个更广泛的问题有关，如果在这个例子中总是由同一个人进行准备、烹饪和摆盘，那么让这种层次结构来模拟单个厨师所做的真正实际优势是什么？我想这会遇到“害怕添加课程”的事情，但与此同时，现在或在可预见的将来，我不认为维护整个 chef 课程非常麻烦。我还认为，对于一个天真的代码读者来说，在真正意义上更容易看到 chef 对象中的三种不同方法并继续前进。

我知道当/如果我们添加诸如“cut_onions()”、“cut_carrots()”等方法时，它可能会变得笨拙，也许每个方法都有自己的数据，但似乎这些可以通过制作来处理prep() 函数，比如说，更加模块化。此外，似乎 SRP 得出其合乎逻辑的结论将创建一个类“onion_cutters”“carrot_cutters”等......我仍然很难看到它的价值，因为程序必须以某种方式确保同一员工切洋葱和胡萝卜，这有助于在不同方法中保持状态变量相同（例如，如果员工用手指切洋葱，他不再有资格切胡萝卜），而在怪物对象厨师类中，似乎所有这一切都得到了照顾。

当然，我理解这对于有意义的“面向对象设计”来说变得不那么重要了，但在我看来，如果我们必须为每个厨师的任务有单独的对象（这似乎不自然，因为同一个人是完成所有三个功能）然后似乎将软件设计优先于概念模型。我觉得面向对象的设计在这里很有帮助，如果我们想拥有可能是不同的人的“meat_chef”“sous_chef”“three_star_chef”。此外，与运行时问题相关的是，在严格应用单一职责原则的情况下，似乎存在复杂性开销，必须确保构成基类员工的底层数据发生变化，并且这种变化是反映在随后的时间步长中。

因此，我很想或多或少地保持原样。如果有人能澄清为什么这是一个坏主意（如果你有关于如何最好地进行的建议），我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T07:07:59.000

为了避免现在和将来滥用类层次结构，你应该只在存在**is**关系时才使用它。作为你自己，“cook_food 是一个厨房工人”。这显然在现实生活中没有意义，在代码中也没有。“cook_food” 是一个动作，因此创建一个动作类并对其进行子类化可能是有意义的。

拥有一个新类只是为了添加新方法`cook()`，并且`prep()`无论如何都不是对原始问题的改进——因为你所做的只是将方法包装在一个类中。你真正想要的是做一个抽象来做这些动作——所以回到动作类。

```
class action {
    public:
        virtual void perform_action()=0;
}

class cook_food : public action {
    public:
        virtual void perform_action() {
            //do cooking;
        }
} 
```

然后可以为厨师提供按照您指定的顺序执行的操作列表。比如说，一个队列。

```
class chef {
    ...
        perform_actions(queue<action>& actions) {
            for (action &a : actions) {
                a.perform_action();
            }
        }
    ...
} 
```

这通常被称为[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。它通过允许您在不修改现有类的情况下添加新操作来促进开放/封闭原则。

* * *

您可以使用的另一种方法是[模板方法](http://en.wikipedia.org/wiki/Template_method)，您可以在其中指定一系列抽象步骤，并使用子类来实现每个步骤的特定行为。

```
class dish_maker {
    protected:
        virtual void prep() = 0;
        virtual void cook() = 0;
        virtual void plate() = 0;

    public:
        void make_dish() {
            prep();
            cook();
            plate();
        }
}

class onion_soup_dish_maker : public dish_maker {
    protected:
        virtual void prep() { ... }
        virtual void cook() { ... }
        virtual void plate() { ... }
} 
```

另一个可能适用于此的密切相关的模式是[建造者模式](http://en.wikipedia.org/wiki/Builder_pattern)

这些模式也可以减少[顺序耦合](http://en.wikipedia.org/wiki/Sequential_coupling)反模式，因为很容易忘记调用某些方法，或者以正确的顺序调用它们，特别是如果你多次这样做。您还可以考虑将您的 kitchen.opens() 和 closes() 放入一个类似的模板方法中，而不需要担心 closes() 被调用。

* * *

在为 onion_cutter 和 carrot_cutter 创建单独的类时，这并不是 SRP 的逻辑结论，但实际上违反了它 - 因为您正在创建负责切割的类，并保存一些关于它们是什么的信息切割。切割洋葱和胡萝卜都可以抽象为一个切割动作 - 如果您需要每个对象的特定代码，您可以指定要切割的对象，并为每个单独的类添加重定向。

一个步骤是创建一个抽象来表示某些东西是可切割的。子类化的**is**关系是候选的，因为胡萝卜*是*可切割的。

```
class cuttable {
    public:
        virtual void cut()=0;
}

class carrot : public cuttable {
    public:
      virtual void cut() {
          //specific code for cutting a carrot;
      }
} 
```

切割动作可以对一个可切割对象执行任何适用于所有可切割对象的常见切割动作，也可以应用每个对象的特定切割行为。

```
class cutting_action : public action {
    private:
        cuttable* object;
    public:
        cutting_action(cuttable* obj) : object(obj) { }
        virtual void perform_action() {
            //common cutting code
            object->cut(); //specific cutting code
        }
} 
```

* * *

# mysql - SQL 查询引发错误 150

> ID：13171594
> 
> 赞同：0
> 
> 时间：2012-11-01T05:43:29.990
> 
> 标签：mysql, sql, foreign-keys

```
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

CREATE SCHEMA IF NOT EXISTS `rsmad` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `rsmad` ;

-- -----------------------------------------------------
-- Table `rsmad`.`app_flashobjects`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`app_flashobjects` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `app_id` INT UNSIGNED NOT NULL ,
  `flashobject_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `rsmad`.`app_html`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`app_html` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `app_id` INT UNSIGNED NOT NULL ,
  `html_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `rsmad`.`app_iframes`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`app_iframes` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `app_id` INT UNSIGNED NOT NULL ,
  `iframe_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `rsmad`.`app_images`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`app_images` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `app_id` INT UNSIGNED NOT NULL ,
  `image_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `rsmad`.`app_links`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`app_links` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `app_id` INT UNSIGNED NOT NULL ,
  `link_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `rsmad`.`app_text`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`app_text` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `app_id` INT UNSIGNED NOT NULL ,
  `text_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`id`) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `rsmad`.`apps`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `rsmad`.`apps` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `webpage_id` INT UNSIGNED NOT NULL ,
  `timestamp` DATETIME NULL ,
  `status` ENUM('ok','malicious','good') NOT NULL DEFAULT 'ok' ,
  PRIMARY KEY (`id`) ,
  CONSTRAINT `fk_apps_app_flashobjects1`
    FOREIGN KEY (`id` )
    REFERENCES `rsmad`.`app_flashobjects` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_apps_app_html1`
    FOREIGN KEY (`id` )
    REFERENCES `rsmad`.`app_html` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_apps_app_iframes1`
    FOREIGN KEY (`id` )
    REFERENCES `rsmad`.`app_iframes` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_apps_app_images1`
    FOREIGN KEY (`id` )
    REFERENCES `rsmad`.`app_images` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_apps_app_links1`
    FOREIGN KEY (`id` )
    REFERENCES `rsmad`.`app_links` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_apps_app_text1`
    FOREIGN KEY (`id` )
    REFERENCES `rsmad`.`app_text` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB; 
```

谁能解释这些查询的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:22:45.403

您正在使用[多态关联](https://stackoverflow.com/questions/441001/possible-to-do-a-mysql-foreign-key-to-one-of-two-possible-tables)，遗憾的是无法通过约束来完成，因为外键不能共享引用列。要使其正常工作，请在以下位置为每个外部表引用它们自己的列`apps`：

```
CREATE  TABLE IF NOT EXISTS `rsmad`.`apps` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `webpage_id` INT UNSIGNED NOT NULL ,
  `timestamp` DATETIME NULL ,
  `status` ENUM('ok','malicious','good') NOT NULL DEFAULT 'ok' ,
  `flashobjects_id` INT UNSIGNED NOT NULL,
  `html_id` INT UNSIGNED NOT NULL,
  -- etc
  PRIMARY KEY (`id`) ,
  CONSTRAINT `fk_apps_app_flashobjects1`
    FOREIGN KEY (`flashobjects_id` )
    REFERENCES `rsmad`.`app_flashobjects` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_apps_app_html1`
    FOREIGN KEY (`html_id` )
    REFERENCES `rsmad`.`app_html` (`app_id` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  -- etc 
```

**编辑：**实际上，我认为您应该反过来定义外键关系。外键是在子表中定义的，`apps`对我来说看起来很像父表。现在，如果您删除任何表中的一行，则与它们相关`app_%`的条目将被级联删除。`apps`

# java - 在激活菜单项时显示选项卡

> ID：13171602
> 
> 赞同：1
> 
> 时间：2012-11-01T05:43:57.203
> 
> 标签：java, swing, actionlistener, jtabbedpane, jmenuitem

我们如何`JTabbedPane`通过单击菜单栏中的菜单项来显示？

![在此处输入图像描述](../Images/bd9acc501e495fe1db49a3e8e63048e5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:52:20.923

查看`setSelectedIndex()`并查看`setSelectedComponent()`javadocs。您通常可以在文档中找到与这些类似的方法。

[`JTabbedPane#setSelectedComponent`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setSelectedComponent%28java.awt.Component%29)

# java - 如何使用 Java Swing 从 TextField 在屏幕上打印用户输入

> ID：13171604
> 
> 赞同：1
> 
> 时间：2012-11-01T05:44:10.910
> 
> 标签：java, swing, user-interface, user-input

我是 Java 中的 GUI 新手。但是，我尝试了下面的程序，但它不起作用。这是一个独立的应用程序。我在网上搜索但找不到相关答案。请帮忙。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class usernamepass extends JFrame implements ActionListener{
    JTextField a;

    public usernamepass(){
       JFrame jp=new JFrame();
       add(jp);
       a=new JTextField(12);
       jp.add(a);
       a.addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae){
        this.repaint();
    }

     public static void main(String [] args){
         usernamepass obj=new usernamepass();
         obj.setSize(300,300);
         obj.setVisible(true);
         obj.setResizable(true);
         obj.setTitle("HI") ;
     }

     public void paint(Graphics g){
         g.drawString("Name "+a.getText(),10,70);
     }
} 
```

编辑：对不起，我搞砸了代码（系统崩溃）。好吧，代码正在运行更改但是，我看到打印消息只是覆盖了旧消息并且没有重新绘制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T05:52:38.440

不要在您的方法中创建一个新`usernamepass`对象，而是`actionPerformed`使用`this`关键字来绘制当前屏幕。

在你的代码中试试这个，它应该可以工作。

```
public void actionPerformed(ActionEvent ae){
      this.repaint();
} 
```

# javascript - Javascript中的C解析器

> ID：13171616
> 
> 赞同：10
> 
> 时间：2012-11-01T05:45:50.720
> 
> 标签：javascript, c, node.js, node-ffi

我想用 Javascript 解析 C 头文件。有没有这样的图书馆？否则，有什么提示可以帮助我入门吗？

**更新：**我的最终目标是为[node-ffi](https://github.com/rbranson/node-ffi)自动构建接口。解析器不一定必须使用 Javascript，只要它可以吐出 Javascript 可以理解的格式即可。如果自己开发非常困难，我可能不得不使用现成的解决方案......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T15:54:58.260

你应该看看[clang](http://clang.llvm.org)。

对于一个简单的命令行调用，你可以试试这个：

```
clang -cc1 -ast-dump-xml myfile.h 
```

`clang`或者，您可以使用文档合理的[解析器库](http://clang.llvm.org/docs/InternalsManual.html#libparse)构建您自己的工具，该库将为您构建一个 AST，并让您按照您认为合适的方式进行操作（也许用于 JSON 输出）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T06:07:29.837

您可以从查看 peg.js 开始，它生成 javascript 代码来解析作为输入给出的语法。可在此处获取详细信息[https://pegjs.org/](https://pegjs.org/)

然后，您需要为要解析的头文件编写或查找语法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T07:55:41.720

好吧，我会回答我自己的问题，因为我发现了一些有趣的东西：

[http://www.swig.org/Doc2.0/SWIGDocumentation.html#SWIG_nn2](http://www.swig.org/Doc2.0/SWIGDocumentation.html#SWIG_nn2)

Swig 可以输出 C 头文件的 XML 表示，然后我可以从 Javascript 加载。

例如：

```
swig -module yaml -xmlout yaml.xml yaml.h 
```

生成以下文件（下面的`yaml_token_delete`函数片段）：

```
...

<cdecl id="16015" addr="0x10835d500" >
    <attributelist id="16016" addr="0x10835d500" >
        <attribute name="name" value="yaml_token_delete" id="16017" addr="0x1082b2d00" />
        <attribute name="sym_symtab" value="0x1081007e0" id="16018" addr="0x1081007e0" />
        <attribute name="view" value="globalfunctionHandler" id="16019" addr="0x1082b2d00" />
        <attribute name="kind" value="function" id="16020" addr="0x1082b2d00" />
        <attribute name="sym_name" value="yaml_token_delete" id="16021" addr="0x1082b2d00" />
        <attribute name="wrap_parms" value="0x10835d460" id="16022" addr="0x10835d460" />
        <attribute name="decl" value="f(p.yaml_token_t)." id="16023" addr="0x1082b2d00" />
        <attribute name="tmap_out" value="" id="16024" addr="0x1082b2d00" />
        <parmlist id="16025" addr="0x10835d460" >
            <parm id="16026">
                <attributelist id="16027" addr="0x10835d460" >
                    <attribute name="tmap_typecheck" value="void *vptr = 0;&#10;  int res = SWIG_ConvertPtr($input, &amp;vptr, SWIGTYPE_p_yaml_token_s, 0);&#10;  arg1 = SWIG_CheckState(res);" id="16028" addr="0x1082b2d00" />
                    <attribute name="tmap_typecheck_match_type" value="p.SWIGTYPE" id="16029" addr="0x1082b2d00" />
                    <attribute name="tmap_in_match_type" value="p.SWIGTYPE" id="16030" addr="0x1082b2d00" />
                    <attribute name="tmap_freearg_match_type" value="p.SWIGTYPE" id="16031" addr="0x1082b2d00" />
                    <attribute name="compactdefargs" value="1" id="16032" addr="0x1082b2d00" />
                    <attribute name="name" value="token" id="16033" addr="0x1082b2d00" />
                    <attribute name="emit_input" value="objv[1]" id="16034" addr="0x1082b2d00" />
                    <attribute name="tmap_typecheck_precedence" value="0" id="16035" addr="0x1082b2d00" />
                    <attribute name="tmap_in_numinputs" value="1" id="16036" addr="0x1082b2d00" />
                    <attribute name="tmap_in" value="res1 = SWIG_ConvertPtr(objv[1], &amp;argp1,SWIGTYPE_p_yaml_token_s, 0 |  0 );&#10;  if (!SWIG_IsOK(res1)) { &#10;    SWIG_exception_fail(SWIG_ArgError(res1), &quot;in method '&quot; &quot;$symname&quot; &quot;', argument &quot; &quot;1&quot;&quot; of type '&quot; &quot;yaml_token_t *&quot;&quot;'&quot;); &#10;  }&#10;  arg1 = (yaml_token_t *)(argp1);" id="16037" addr="0x1082b2d00" />

... 
```

# android - 如何在 Android 中设置启动动画？

> ID：13171618
> 
> 赞同：2
> 
> 时间：2012-11-01T05:46:16.073
> 
> 标签：android, xamarin.android

我想为启动屏幕设置动画，与淡入淡出或滑动一些图片一样，我该如何为 android 项目执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:30:37.680

这是一个很好的示例，其中包含特定启动页面的源代码：http: [//www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

自定义启动画面： [自定义启动画面 - Android](https://stackoverflow.com/questions/7573568/custom-splash-screen-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T05:51:29.690

查看下面的链接
[http://docs.xamarin.com/android/recipes/Other_UX/Animation/Frame_Animation](http://docs.xamarin.com/android/recipes/Other_UX/Animation/Frame_Animation)

你必须在android中使用动画。使用 java 或 mono 没有区别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T06:07:45.183

在 res 中创建 anim 文件夹，在其中创建一个 xml 文件示例：fade_in_anim.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android" >

<alpha
    android:duration="5000"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" /> 
```

在java中声明动画

```
Animation _startAnimation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.fade_in_anim); 
```

声明想要动画的视图

```
view.startAnimation(_startAnimation); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-19T07:39:41.260

您可以在 Webview 中加载图像。

首先将您的 .gif 图像放在项目的 Assets 文件夹中并更改其 **Build Action=>AndroidAssest**。

现在将您的 html 代码分配给字符串对象。

```
string myhtmldata = "<html xmlns=\"http://www.w3.org/1999/xhtml\">
<body bgcolor='#000000'><img src='image_name.gif' width=100%></body></html>"; 
```

在 Webview 中使用 Base URL 传递此字符串对象。

```
webview.LoadDataWithBaseURL("file:///android_asset/", myhtmldata, "text/html", "UTF-8", null); 
```

它将在启动画面中显示 GIF 图像。！！

# proxy - 如何在httpclient中为代理服务器指定kerberos身份验证

> ID：13171619
> 
> 赞同：3
> 
> 时间：2012-11-01T05:46:32.683
> 
> 标签：proxy, httpclient, kerberos

我需要使用 HttpClient 4.1 通过 Squid 代理服务器与 Web 服务器通信。Squid 代理服务器具有与 Active Directory 集成的 kerberos 身份验证。

我无法正确配置我的 Java 程序以使用 Squid 代理服务器进行 kerberos 身份验证。我收到以下错误：

KrbException：在 Kerberos 数据库中找不到服务器 (7)

我附上了我在 KerberosHttpClient.java 和我正在使用的 krb5.conf 文件中进行一些修改后创建的程序。

请帮助解决问题。

以下是示例 java 程序

```
package org.apache.http.examples.client;

import java.io.IOException;
import java.security.KeyManagementException;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.Principal;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.Map;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScheme;
import org.apache.http.auth.AuthSchemeRegistry;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.AuthenticationException;
import org.apache.http.auth.Credentials;
import org.apache.http.auth.MalformedChallengeException;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.conn.params.ConnRoutePNames;
import org.apache.http.impl.auth.NegotiateSchemeFactory;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.client.DefaultProxyAuthenticationHandler;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.apache.log4j.BasicConfigurator;

public class TestKerberosHttpClient {
    private static final Log LOG = LogFactory.getLog(TestKerberosHttpClient.class);
    private static String kerbHttpHost = "http://www.google.com";

    public static void main(String[] args) throws KeyStoreException, NoSuchAlgorithmException, CertificateException, IOException, KeyManagementException, UnrecoverableKeyException {
        BasicConfigurator.configure();
        System.setProperty("java.security.auth.login.config", "login.conf");
        System.setProperty("java.security.krb5.conf", "krb5.conf");
        System.setProperty("sun.security.krb5.debug", "true");
        System.setProperty("javax.security.auth.useSubjectCredsOnly","false");

        if( args.length > 0 )
            kerbHttpHost = args[0];

        /*      Below is helpful on windows.

         Solution 2: You need to update the Windows registry to disable this new feature. The registry key allowtgtsessionkey should be added--and set correctly--to allow session keys to be sent in the Kerberos Ticket-Granting Ticket.

         On the Windows Server 2003 and Windows 2000 SP4, here is the required registry setting:

             HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Lsa\Kerberos\Parameters
             Value Name: allowtgtsessionkey
             Value Type: REG_DWORD
             Value: 0x01 

         Here is the location of the registry setting on Windows XP SP2:

             HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Lsa\Kerberos\
             Value Name: allowtgtsessionkey
             Value Type: REG_DWORD
             Value: 0x01
         */

        DefaultHttpClient httpclient = new DefaultHttpClient();
        DefaultProxyAuthenticationHandler dpah = new DefaultProxyAuthenticationHandler();
        httpclient.setProxyAuthenticationHandler(dpah);

        HttpHost host = new HttpHost("xxx.xx.xxx.xx", 3128);

        httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, host);

        httpclient.getCredentialsProvider().setCredentials(new AuthScope("xxx.xx.xxx.xx", 3128), new UsernamePasswordCredentials("qa\\Administrator", "solidcore@123"));

        AuthSchemeRegistry authSchemeRegistry = httpclient.getAuthSchemes();
        authSchemeRegistry.unregister("basic");
        authSchemeRegistry.unregister("digest");
        authSchemeRegistry.unregister("NTLM");
        authSchemeRegistry.register("Negotiate", new NegotiateSchemeFactory());
        //      authSchemeRegistry.register("NTLM", new NTLMSchemeFactory());
        //      authSchemeRegistry.register("Basic", new BasicSchemeFactory());
        httpclient.setAuthSchemes(authSchemeRegistry);

        Credentials use_jaas_creds = new Credentials() {
            @Override
            public String getPassword() {
                return null;
            }
            @Override
            public Principal getUserPrincipal() {
                return null;
            }
        };

        httpclient.getCredentialsProvider().setCredentials(
                new AuthScope(null, -1, null),
                use_jaas_creds);

        HttpUriRequest request = new HttpGet(kerbHttpHost);
        HttpResponse response = null;
        HttpEntity entity = null;

        /* note the we use the 2 parameter execute call. */
        try{
            response = httpclient.execute(request, createHttpContext(httpclient));
            String s = new BasicResponseHandler().handleResponse(response);
            System.out.println(s);
            //entity = response.getEntity();
        } catch ( Exception ex){
            LOG.debug(ex.getMessage(), ex);
        }

        System.out.println("----------------------------------------");
//      if (entity != null) {
//          System.out.println("Response content length: " + entity.getContentLength());
//          entity.writeTo(System.out);
//      }
//      if (entity != null) {
//          entity.consumeContent();
//      }
    }

    private static class MyProxyAuthHandler extends DefaultProxyAuthenticationHandler {
        @Override
        protected List<String> getAuthPreferences() {

            return super.getAuthPreferences();
        }

        @Override
        public Map<String, Header> getChallenges(HttpResponse response,
                HttpContext context) throws MalformedChallengeException {

            return super.getChallenges(response, context);
        }

        @Override
        public AuthScheme selectScheme(Map<String, Header> arg0,
                HttpResponse arg1, HttpContext arg2)
                throws AuthenticationException {
            return super.selectScheme(arg0, arg1, arg2);
        }

    }

    /**
     * createHttpContext - This is a copy of DefaultHttpClient method
     * createHttpContext with "negotiate" added to AUTH_SCHEME_PREF to allow for 
     * Kerberos authentication. Could also extend DefaultHttpClient overriding the
     * default createHttpContext.
     * 
     * @param httpclient - our Httpclient
     * @return HttpContext
     */
    static HttpContext createHttpContext(DefaultHttpClient httpclient){
        HttpContext context = new BasicHttpContext();
        context.setAttribute(
                ClientContext.AUTHSCHEME_REGISTRY, 
                httpclient.getAuthSchemes());
        context.setAttribute(
                ClientContext.AUTH_SCHEME_PREF, 
                Collections.unmodifiableList( Arrays.asList(new String[] {
                        "negotiate",
                        "ntlm",
                        "digest",
                        "basic" 
                }))
        );
        context.setAttribute(
                ClientContext.COOKIESPEC_REGISTRY, 
                httpclient.getCookieSpecs());
        context.setAttribute(
                ClientContext.COOKIE_STORE, 
                httpclient.getCookieStore());
        context.setAttribute(
                ClientContext.CREDS_PROVIDER, 
                httpclient.getCredentialsProvider());
        return context;
    }
} 
```

以下是 krb5.conf 文件

```
[libdefaults]
    default_realm = QA.SCCM.LOCAL
    dns_lookup_kdc = true
    dns_lookup_realm = true
    ticket_lifetime = 24h
    default_keytab_name = /etc/squid3/proxy.keytab

# The following krb5.conf variables are only for MIT Kerberos.
    krb4_config = /etc/krb.conf
    krb4_realms = /etc/krb.realms
    kdc_timesync = 1
    ccache_type = 4
    #forwardable = true
    #proxiable = true

# The following encryption type specification will be used by MIT Kerberos
# if uncommented.  In general, the defaults in the MIT Kerberos code are
# correct and overriding these specifications only serves to disable new
# encryption types as they are added, creating interoperability problems.
#
# Thie only time when you might need to uncomment these lines and change
# the enctypes is if you have local software that will break on ticket
# caches containing ticket encryption types it doesn't know about (such as
# old versions of Sun Java).

#   default_tgs_enctypes = des3-hmac-sha1
#   default_tkt_enctypes = des3-hmac-sha1
#   permitted_enctypes = des3-hmac-sha1

# The following libdefaults parameters are only for Heimdal Kerberos.
    v4_instance_resolve = false
    v4_name_convert = {
        host = {
            rcmd = host
            ftp = ftp
        }
        plain = {
            something = something-else
        }
    }
    fcc-mit-ticketflags = true

[realms]
    TESTDOMAIN1.CRM = {
        kdc = win2k3-ad1.testdomain1.crm
        admin_server = win2k3-ad1.testdomain1.crm
        default_domain = testdomain1.crm
    }
    QA.SCCM.LOCAL = {
        kdc = win-xtqhaqj5814.qa.sccm.local
        admin_server = win-xtqhaqj5814.qa.sccm.local
        default_domain = qa.sccm.local
    }
    ATHENA.MIT.EDU = {
        kdc = kerberos.mit.edu:88
        kdc = kerberos-1.mit.edu:88
        kdc = kerberos-2.mit.edu:88
        admin_server = kerberos.mit.edu
        default_domain = mit.edu
    }
    MEDIA-LAB.MIT.EDU = {
        kdc = kerberos.media.mit.edu
        admin_server = kerberos.media.mit.edu
    }
    ZONE.MIT.EDU = {
        kdc = casio.mit.edu
        kdc = seiko.mit.edu
        admin_server = casio.mit.edu
    }
    MOOF.MIT.EDU = {
        kdc = three-headed-dogcow.mit.edu:88
        kdc = three-headed-dogcow-1.mit.edu:88
        admin_server = three-headed-dogcow.mit.edu
    }
    CSAIL.MIT.EDU = {
        kdc = kerberos-1.csail.mit.edu
        kdc = kerberos-2.csail.mit.edu
        admin_server = kerberos.csail.mit.edu
        default_domain = csail.mit.edu
        krb524_server = krb524.csail.mit.edu
    }
    IHTFP.ORG = {
        kdc = kerberos.ihtfp.org
        admin_server = kerberos.ihtfp.org
    }
    GNU.ORG = {
        kdc = kerberos.gnu.org
        kdc = kerberos-2.gnu.org
        kdc = kerberos-3.gnu.org
        admin_server = kerberos.gnu.org
    }
    1TS.ORG = {
        kdc = kerberos.1ts.org
        admin_server = kerberos.1ts.org
    }
    GRATUITOUS.ORG = {
        kdc = kerberos.gratuitous.org
        admin_server = kerberos.gratuitous.org
    }
    DOOMCOM.ORG = {
        kdc = kerberos.doomcom.org
        admin_server = kerberos.doomcom.org
    }
    ANDREW.CMU.EDU = {
        kdc = vice28.fs.andrew.cmu.edu
        kdc = vice2.fs.andrew.cmu.edu
        kdc = vice11.fs.andrew.cmu.edu
        kdc = vice12.fs.andrew.cmu.edu
        admin_server = vice28.fs.andrew.cmu.edu
        default_domain = andrew.cmu.edu
    }
    CS.CMU.EDU = {
        kdc = kerberos.cs.cmu.edu
        kdc = kerberos-2.srv.cs.cmu.edu
        admin_server = kerberos.cs.cmu.edu
    }
    DEMENTIA.ORG = {
        kdc = kerberos.dementia.org
        kdc = kerberos2.dementia.org
        admin_server = kerberos.dementia.org
    }
    stanford.edu = {
        kdc = krb5auth1.stanford.edu
        kdc = krb5auth2.stanford.edu
        kdc = krb5auth3.stanford.edu
        master_kdc = krb5auth1.stanford.edu
        admin_server = krb5-admin.stanford.edu
        default_domain = stanford.edu
    }

[domain_realm]
    .testdomain1.crm = TESTDOMAIN1.CRM
    testdomain1.crm = TESTDOMAIN1.CRM
    .qa.sccm.local = QA.SCCM.LOCAL
    qa.sccm.local = QA.SCCM.LOCAL
    .mit.edu = ATHENA.MIT.EDU
    mit.edu = ATHENA.MIT.EDU
    .media.mit.edu = MEDIA-LAB.MIT.EDU
    media.mit.edu = MEDIA-LAB.MIT.EDU
    .csail.mit.edu = CSAIL.MIT.EDU
    csail.mit.edu = CSAIL.MIT.EDU
    .whoi.edu = ATHENA.MIT.EDU
    whoi.edu = ATHENA.MIT.EDU
    .stanford.edu = stanford.edu
    .slac.stanford.edu = SLAC.STANFORD.EDU

[login]
    krb4_convert = true
    krb4_get_tickets = false 
```

# android - 如何在 Android 中以编程方式打开 3G 移动数据？

> ID：13171623
> 
> 赞同：4
> 
> 时间：2012-11-01T05:46:47.007
> 
> 标签：android, 3g-network

```
package com.testing.connection;

import android.app.Activity;
import android.net.ConnectivityManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class ConnectionActivity extends Activity implements OnClickListener{

    Button press;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        press = (Button)findViewById(R.id.button1);
        press.setOnClickListener(this);
    }

    public void onClick(View view){
        ConnectivityManager mgr = (ConnectivityManager)getSystemService(CONNECTIVITY_SERVICE);

        boolean is3G = mgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE).isConnectedOrConnecting();
        boolean isWifi = mgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnectedOrConnecting();

        if(isWifi){
            Toast.makeText(this, "WiFi connected...", Toast.LENGTH_LONG).show();
            sendMail();
        }
        else{
            //**Turn on Mobile Data
            //**Then sendMail()
            //**Turn off Mobile Data
        }
    }

    public void sendMail() throws MessagingException{

        String host = "smtp.gmail.com";
        String password = "abc123";
        String from = "testing@gmail.com";
        String toAddress = enterEmail.getText().toString();

        Properties properties = System.getProperties();
        properties.put("mail.smtp.host", host);
        properties.put("mail.smtps.auth", true);
        properties.put("mail.smtp.starttls.enable", true);
        Session session = Session.getInstance(properties, null);

        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(from));
        message.setRecipients(Message.RecipientType.TO, toAddress);
        message.setSubject("Anti-Theft Attachment");

        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText("Your email address is saved as backup email in Anti-Theft Application");

        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);
        message.setContent(multipart);

        try{
            Transport transport = session.getTransport("smtps");
            transport.connect(host, from, password);
            transport.sendMessage(message, message.getAllRecipients());
            System.out.println("Mail Sent Successfully");
            transport.close();
        } catch (SendFailedException sfe){
            System.out.println(sfe);
        }
    }
 } 
```

嗨，我正在开发一个Android应用程序，我想有一个检测到Wifi未连接到手机时自动打开移动数据的功能，因为我想确保无论何时都能发送电子邮件wifi是否连接...所以一旦检测到wifi未连接，则打开3G数据并发送电子邮件并关闭数据网络...

请问如何开启3G网络和关闭3G网络？？？互联网上的来源稀疏，我希望任何人都可以帮助我解决它...谢谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-02T05:27:11.087

希望此代码对您有所帮助，就我而言，它有效。

```
ConnectivityManager dataManager;
dataManager  = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
Method dataMtd = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);
dataMtd.setAccessible(true);
dataMtd.invoke(dataManager, true);        //True - to enable data connectivity . 
```

在清单中

```
 <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T08:29:57.890

出于安全考虑，您不能以编程方式打开移动网络。

您唯一能做的就是通过显示设置来提示用户打开移动网络。

```
Intent intent=new Intent(Settings.ACTION_DATA_ROAMING_SETTINGS);
ComponentName cn = new ComponentName("com.android.phone","com.android.phone.Settings");
intent.setComponent(cn);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-02T06:18:00.157

适用于 Android 2.3 及更高版本

```
private void setMobileDataEnabled(Context context, boolean enabled) {
    final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    final Class conmanClass = Class.forName(conman.getClass().getName());
    final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
    iConnectivityManagerField.setAccessible(true);
    final Object iConnectivityManager = iConnectivityManagerField.get(conman);
    final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
    final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
    setMobileDataEnabledMethod.setAccessible(true);

    setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
} 
```

这也需要以下许可。

```
 <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

请参考这个 [链接](https://stackoverflow.com/questions/12535101/how-can-i-turn-off-3g-data-programmatically-on-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T09:41:06.850

1.  “android.permission.ACCESS_NETWORK_STATE”
2.  “android.permission.ACCESS_WIFI_STATE”
3.  “android.permission.CHANGE_WIFI_STATE”
4.  “android.permission.CHANGE_NETWORK_STATE”
5.  这里 whatToDo 是一个布尔值，“true”表示开启 gprs，“false”表示关闭 gprs。

    ```
    public class TurnDataOn {

    public static boolean isWifiOn(Context context) {

        WifiManager wifiManager = (WifiManager) context.getSystemService(context.WIFI_SERVICE);
        boolean wifiEnabled = wifiManager.isWifiEnabled();

        Log.e("isWifiOn", String.valueOf(wifiEnabled));

        return wifiEnabled;
    }

    public static boolean isWifiConnected(Context context) {
        ConnectivityManager connectivityManager =
                (ConnectivityManager) context.getSystemService(context.CONNECTIVITY_SERVICE);
        NetworkInfo wifiInfo =
                connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        boolean wifiConnected = wifiInfo.getState() == NetworkInfo.State.CONNECTED;

        Log.e("isWIFIConnected", String.valueOf(wifiConnected));

        return wifiConnected;
    }

    public static boolean isGprsConnected(Context context) {

        ConnectivityManager connectivityManager =
                (ConnectivityManager) context.getSystemService(context.CONNECTIVITY_SERVICE);
        NetworkInfo mobileInfo =
                connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        boolean mobileConnected = mobileInfo.getState() == NetworkInfo.State.CONNECTED;

        Log.e("ISGPRSConnected", String.valueOf(mobileConnected));

        return mobileConnected;
    }

    public static void toggleGprs(Context context, boolean whatToDo) {

        ConnectivityManager conman = (ConnectivityManager) context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);

        @SuppressWarnings("rawtypes") Class conmanClass = null;
        try {
            conmanClass = Class.forName(conman.getClass().getName());
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

        Field iConnectivityManagerField = null;
        try {
            iConnectivityManagerField = conmanClass.getDeclaredField("mService");
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        }

        iConnectivityManagerField.setAccessible(true);

        Object iConnectivityManager = null;
        try {
            iConnectivityManager = iConnectivityManagerField.get(conman);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        @SuppressWarnings("rawtypes") Class iConnectivityManagerClass = null;
        try {
            iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        @SuppressWarnings("unchecked") Method setMobileDataEnabledMethod = null;
        try {
            setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        }
        setMobileDataEnabledMethod.setAccessible(true);
        try {
            setMobileDataEnabledMethod.invoke(iConnectivityManager, whatToDo);
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
    }
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T10:18:32.157

## 对于禁用

```
final ConnectivityManager conman = (ConnectivityManager)this.getSystemService(Context.CONNECTIVITY_SERVICE);

Method dataMtd = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);

dataMtd.setAccessible(false);

dataMtd.invoke(conman, false); 
```

## 对于启用

```
final ConnectivityManager conman = (ConnectivityManager)this.getSystemService(Context.CONNECTIVITY_SERVICE);

Method dataMtd = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);

dataMtd.setAccessible(true);

dataMtd.invoke(conman, true); 
```

# iphone - 通过 ASIFormDataRequest 将 Mp4 视频发送到 PHP 服务器

> ID：13171625
> 
> 赞同：2
> 
> 时间：2012-11-01T05:46:53.903
> 
> 标签：iphone, objective-c, ios, ftp, asiformdatarequest

在这里，我发送带有一些参数的文件路径或文件。但是服务器没有收到视频。那么该代码有什么问题吗？或者任何你想添加的东西。那么请告诉我。您想告诉我我在哪里得到错误或响应设置的任何委托方法。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"hangover" ofType:@"mp4"];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://156.75.28.172:52/aircas/RestServices/fileUpload"]];

[request setPostValue:filename forKey:@"name"]; 

[request setPostValue:@"GUnit" forKey:@"title"];
[request setPostValue:@"133" forKey:@"user_id"]; 
[request setPostValue:@"8953d0e1c97ef83c9f0aff47" forKey:@"token"]; 
[request setPostValue:@"video song" forKey:@"desc"]; 
[request setPostValue:@"34" forKey:@"video_id"]; 
[request setPostValue:@"0" forKey:@"is_private"]; 

[request setFile:path forKey:@"video"];

[request setTimeOutSeconds:500]; 
[request setRequestMethod:@"POST"];

[request startSynchronous]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T05:55:13.447

在您的代码中添加以下代码，然后您可以编写 2 个委托方法并可以处理响应。

```
[request setDelegate:self];
[request setDidFailSelector:@selector(uploadFailed:)];
[request setDidFinishSelector:@selector(uploadFinished:)];

- (void) uploadFailed:(ASIHTTPRequest *)request 
{
    //Upload succeeded;
}

- (void) uploadFinished:(ASIHTTPRequest *)request 
{
    //Upload failed;
    NSError *error = [request error];
    NSLog(@"Error Description-->%@",[error localizedDescription]);
} 
```

要深入了解 ASIHttpRequest，[请参阅文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。它有很好的记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T06:03:11.033

试试这个...

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"hangover" ofType:@"mp4"];
    NSURL *fileURL = [NSURL fileURLWithPath:path];
        NSData *movieData = [NSData dataWithContentsOfURL:fileURL];

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://156.75.28.172:52/aircas/RestServices/fileUpload"]];

     [request setPostValue:filename forKey:@"name"]; 

    [request setPostValue:@"GUnit" forKey:@"title"];
     [request setPostValue:@"133" forKey:@"user_id"]; 
     [request setPostValue:@"8953d0e1c97ef83c9f0aff47" forKey:@"token"]; 
     [request setPostValue:@"video song" forKey:@"desc"]; 
    [request setPostValue:@"34" forKey:@"video_id"]; 
    [request setPostValue:@"0" forKey:@"is_private"]; 

    [self.request setData:movieData withFileName:@"hangover.mp4" andContentType:@"multipart/form-data" forKey:@"video"];

    [request setTimeOutSeconds:500]; 
    [request setRequestMethod:@"POST"];

    [request startSynchronous]; 
```

希望能帮助到你。

# android - android设备启动时如何自动启动adobe air应用程序？

> ID：13171631
> 
> 赞同：0
> 
> 时间：2012-11-01T05:47:40.437
> 
> 标签：android, air

我使用 Adob​​e Air 3.4 SDK 编写了一个应用程序。我已将它部署到我的 android v4.0.4 设备上。它工作正常（按预期在全屏模式下）。

现在，在设备向用户显示原生 android 屏幕之前，应用程序有望自动以全屏模式运行。

我怎样才能做到这一点？建议任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:14:41.013

在 AIR 本机类中，有一个名为 startAtLogin 的东西，您可以将其设置为 true 或 false ：

```
NativeApplication.nativeApplication.startAtLogin = true; 
```

但我怀疑它可以用来覆盖原生的android屏幕并在它之前显示。我想已经进行了一些内置检查，以确保在屏幕准备好并显示之前没有启动任何内容。

不过，您可以尝试一下:-)

# php - 寻找代码定制

> ID：13171634
> 
> 赞同：-1
> 
> 时间：2012-11-01T05:47:49.663
> 
> 标签：php, jquery, html, css, jquery-ui

我使用以下 php for 循环在数据库中插入数组值。我需要更正我的代码。我想在 for 循环之外查询。请帮助我更正我的代码。

```
<?php
             /*********************/
             $data = $_REQUEST['columns_one'];
             $store_data = explode(",",$data);
            foreach($store_data as $key =>$value)
            {
            //echo $value;
            $query = "insert into fb_savedforms(form_id,form_structure) values ('','".$value."')";
            $result = mysql_query($query);
            } 
            /**************************************/
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:53:42.713

使用批量插入在循环中构建您的查询，但只执行一次。

从[如何在 MySQL 中进行批量插入](https://stackoverflow.com/questions/5526917/how-to-do-a-batch-insert-in-mysql)

> 使用 VALUES 语法的 INSERT 语句可以插入多行。为此，请包含多个列值列表，每个列表都包含在括号中并用逗号分隔。

例子：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T05:53:49.640

尝试这样的事情：

```
$data = $_REQUEST['columns_one'];
$store_data = explode(",",$data);
//setup the insert query
$query = "INSERT INTO fb_savedforms(form_id,form_structure) VALUES ";
$values = array(); //store all the new rows
foreach($store_data as $key =>$value){
  $values[] = "('','".$value."')";
}
$query .=  implode(',', $values) . ';';
$result = mysql_query($query); 
```

**大免责声明**：此代码未经测试，但应该说明您可以有多个值集。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-01T05:52:40.690

```
$data = $_REQUEST['columns_one'];
             $store_data = explode(",",$data);
            $query = '';
            foreach($store_data as $key =>$value)
            {
            //echo $value;
            $query .= "insert into fb_savedforms(form_id,form_structure) values ('','".$value."'); ";

            } 
$result = mysql_query($query); 
```

# android - 获取两个日期之间的数据

> ID：13171641
> 
> 赞同：0
> 
> 时间：2012-11-01T05:48:52.030
> 
> 标签：android, sqlite, android-sqlite

我想在 sqlite db 中检索两个日期之间的数据。我尝试过使用 BETWEEN 子句，如果日期是同一个月，例如“28-10-2012”和“29-10-2012”，它工作正常

但是，如果日期不同，例如“30-10-2012”和“1-11-2012”月份，则不会显示数据

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:06:04.863

它会在同一个月工作，因为 sql 在两个日期之间获取数据的默认概念仅适用于日期格式类似于 YY/MM/DD ..... 在您的情况下，您也需要使用其他属性而不是仅使用日期输入...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:16:15.687

我建议以毫秒为单位在 SQLite 中写入日期。

首先，您阅读 ArrayList 日期中写入的所有日期

```
Calendar cal=Calendar.getIntance();
cal.set(yyyy,mm,dd);
dates.add(cal.getTimeInMillis()); 
```

其次，您可以比较两个日期

```
long start_time;
long end_time;
Calendar cal=Calendar.getIntance();
start_time=cal.set(2012,9,30);
end_time=cal.set(2012,10,1);
for(int i=0,i<dates.size();i++)
{
    if(dates.get(i)>start_time&&dates.get(i)<end_time)
     {......`enter code here`}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T05:59:42.090

试试这个查询。

```
return db.query(TABLE_NAME, new String[]{"temp_sp_date","temp_sp_amount"},
                        "(temp_sp_date >= ? and temp_sp_date <= ? )" , new String[] {startDate,endDate}, " strftime(" + "\"%d" + "-" + "%m" + "-" + "%Y\""  + ",temp_sp_date) ",null , null); 
```

这里**temp_sp_date**是我表中的列，**startDate**和**endDate**是日期参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T07:03:43.707

```
cursor = sdb.query(TABLE_INFORMATION, Info_Date_Time_Array, DATE+" BETWEEN ? AND ?", new String[]{mindate,maxdate}, null,
                    null, null); 
```

# c++ - 在 bool 函数中返回 true 或其他内容

> ID：13171644
> 
> 赞同：1
> 
> 时间：2012-11-01T05:49:34.917
> 
> 标签：c++, function, boolean, return

例如，我想知道我是否有这个功能：

```
bool f(...) {
  //something here
  return true or f(...);
} 
```

我知道它确实返回了`true`，但它是在不评估语句的其他部分的情况下返回它还是再次评估函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T05:57:22.340

这不会评估函数，因为我们已经知道操作数之一是 or'd 为真。同样的事情发生在：

```
bool f(...) {
    return false and f(...)
} 
```

这称为[短路评估。](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T05:58:03.943

否 它不会评估 func() 调用。

***LOGICAL OR 计算“从左到右”并在表达式返回 true 时停止***

你可以检查一下。你测试了吗？

用下面的程序测试它：

```
#include <iostream>
using namespace std;
bool func();
bool func2();
int main()
{
func();
}

bool func2()
{
cout <<"called me"<<endl;
return true;
}
bool func()
{
return (true ||func2());
} 
```

它只会执行不会向控制台打印任何内容。

如果你指的是return语句上面同一个函数中的其他部分代码，是的，即使底部的return语句为true，它也会被执行。如果你的意思是递归部分，那么它不会被执行，因为在该语句中的调用之前有 true。如果是`return false||func()`，那么只有这里才会有递归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T05:53:10.420

在这种情况下，它不会再次调用 f，因为它已经知道结果。查找“惰性评估”或“短路评估”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T05:53:46.863

它在不评估函数的情况下返回 true。由于 or 语句中的第一次真正遇到保证 rest 是正确的，所以进一步评估是没有用的。

# ruby-on-rails-3 - 更改 config.assets.version 号有什么作用？

> ID：13171647
> 
> 赞同：10
> 
> 时间：2012-11-01T05:50:00.843
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline

更改 config.assets.version 号有什么作用？

我知道资产过期（如评论中所述），但它在后台做了什么？

它会删除所有已编译的资产吗？还是采用该版本号并在其他地方使用它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T15:50:47.413

它将使用另一个指纹（代码附加到文件名）预编译资产，使所有客户端的浏览器再次下载文件。

换句话说，正如您所说，它会使客户端浏览器中的缓存过期。

# google-chrome - 在 Chrome 扩展中使用 Google Fusion Table 层

> ID：13171648
> 
> 赞同：0
> 
> 时间：2012-11-01T05:50:14.897
> 
> 标签：google-chrome, google-chrome-extension, google-fusion-tables

我正在尝试复制此演示代码： [https](https://developers.google.com/fusiontables/docs/samples/circle_example?hl=en) ://developers.google.com/fusiontables/docs/samples/circle_example?hl= en，它使用 FusionTablesLayer 来查询融合表中的数据。主要是

```
var layer = new google.maps.FusionTablesLayer({
   query: {
      select: 'lat',
      from: tableid,
      where: 'ST_INTERSECTS(lat, CIRCLE(LATLNG(44.988265,-93.259191), 5000))'
   },
   key: myKey
});
layer.setMap(map); 
```

根据 Chrome 扩展指南，我将它作为一个独立页面工作，所有 JS 都移动到另一个文件中。我已修改清单文件以允许内容安全策略设置中的所有引用服务器。

```
{
  "name": "GDG Twin Cities - Fusion Tables and Chrome extensions",
  "version": "1.0",
  "manifest_version": 2,
  "content_security_policy": "script-src 'self' https://maps.google.com https://maps.gstatic.com; object-src 'self'",
  "description": "Moving Fusion Tables demo into the chrome extension",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "https://maps.google.com/"
  ]
} 
```

**但是，我现在在“未捕获的错误：此上下文中不允许从字符串生成代码”**的控制台中出现 错误

 **我将如何使用 FusionTablesLayer 将我正在寻找的内容放入我的 chrome 扩展中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:24:19.450

必须有一些`eval()`或`new Function()`用于融合表的代码。[默认情况下，CSP 不允许](http://developer.chrome.com/extensions/contentSecurityPolicy.html#JSEval)这样做。尝试以下建议之一：

*   AngularJS（来自谷歌的一个 JS 框架）有一种叫做“ [CSP 模式](https://stackoverflow.com/questions/11336969/using-angularjs-in-a-google-chrome-extension)”的东西，它不使用 eval。也许融合表有类似的东西？
*   [按照文档中](http://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing-eval)的说明添加`unsafe-eval`到您的 CSP 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:12:40.653

我最终将功能性浏览器操作页面移到了网络上，并在 popup.html 中放置了一个 iFrame。**

# xpath - 是否有任何方法可以在 Xpath 2.0 中获取特定节点的任何类型的兄弟节点

> ID：13171652
> 
> 赞同：-2
> 
> 时间：2012-11-01T05:50:40.297
> 
> 标签：xpath, xpath-2.0

是否有任何方法可以在 Xpath 2.0 中获取特定节点的任何类型的兄弟节点

轴“following-sibling”仅支持相同类型的兄弟。

前任：

```
<node>
<b name="bold">abc</b>
<div>gef</div>
</node> 
```

我想选择`<b name="bold">`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:35:58.533

```
Is there any method to get any type of sibling of a particular node in Xpath 2.0

The axes following-sibling only supports for the same type of siblings. 
```

**使用**：

```
following-sibling::node() 
```

这将选择任何类型的所有兄弟节点——元素、文本节点、处理指令节点和注释节点。

**这是一个完整的基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:for-each select="/*/b[@name='bold']/following-sibling::node()">
      "<xsl:copy-of select="."/>"
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<node>
    <b name="bold">abc</b>
    <div>gef</div>
</node> 
```

**应用 XPath 表达式（关闭想要的元素）并将所有选定的三个节点复制到输出**：

```
 "
    "

      "<div>gef</div>"

      "
" 
```

正如我们所看到的，*所有*同级节点都被选中——一个纯空格文本节点、一个`div`元素和另一个纯空格文本节点。

**请注意**：这是一个 XPath 1.0 表达式，我认为 XPath 2.0 不会比 XPath 1.0 中已经添加的选择*兄弟姐妹的任何新功能。*

如果“兄弟”的含义与 XPath 中“兄弟”的含义不同，那么您必须准确定义您的意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:07:54.957

不确定我是否理解这个问题，但是如何：

```
//*[preceding-sibling::b] 
```

这将获得该`<b name="bold">abc</b>`元素的所有先前兄弟姐妹。选择任何类型的`*`元素。

如果你想要*所有*兄弟姐妹：

```
//*[preceding-sibling::b or following-sibling::b] 
```

如果您想更具体地选择`b`元素：

```
//*[preceding-sibling::b[@name="bold"]] 
```

# c# - StreamReader 文件如何仅在列表框中达到高分时更新？

> ID：13171656
> 
> 赞同：2
> 
> 时间：2012-11-01T05:51:27.257
> 
> 标签：c#, streamreader, streamwriter

我如何编写我的`StreamReader`文件，如果它超过当前的高分，它只会覆盖游戏高分？目前所有分数都被更新到列表框中，而不仅仅是超过当前分数/txt 文件的分数。

提前致谢

```
public partial class Form1 : Form
{
    int Dice;
    int RunningTotal;
    int MaxRolls;
    int RollCount;
    Random rand = new Random();

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        RollDiebutton.Enabled = true;
        StartOverbutton.Enabled = true;
        ClickBeginGametoStartlabel.Visible = false;
        int beginTotal = 0;
        TotalMoneyEarnedlabel.Text = beginTotal.ToString("c");

        MaxRolls = rand.Next(3) + 2;
    }

    private void button4_Click(object sender, EventArgs e)         
    {
        try
        {
            string highScore;
            StreamReader inputFile; 

            inputFile = File.OpenText("Highscore.txt"); 
            HighscoreBox.Items.Clear();

            while (!inputFile.EndOfStream)
            {
                highScore = inputFile.ReadLine();   
                HighscoreBox.Items.Add(highScore);
            }

            inputFile.Close();
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        RollDiebutton.Enabled = false;
        BeginGamebutton.Enabled = true;
        StartOverbutton.Enabled = false;
        TotalMoneyEarnedlabel.Text = "";

        BeginpictureBox.Image = P2Kbembow.Properties.Resources.Begin;
        Pressyourluckandrollagainlabel.Visible = false;
        ClickBeginGametoStartlabel.Visible = true;
    }

    private void button2_Click(object sender, EventArgs e)
    {
        //Close Form
        this.Close();
    }

    private void RollDiebutton_Click(object sender, EventArgs e)
    {
        Random rand = new Random();
        Dice = rand.Next(6) + 1;

        RunningTotal += 0;
        int DollarAmount = 100;
        int Sum = (Dice * DollarAmount);

        BeginGamebutton.Enabled = false;
        Pressyourluckandrollagainlabel.Visible = true;

        RunningTotal += Sum;
        TotalMoneyEarnedlabel.Text = RunningTotal.ToString("c");
        RollCount += 1;

        if (MaxRolls == 0)
        {
            Random getMax = new Random();
            TotalMoneyEarnedlabel.Text = ""; 
        }
        else
            if (RollCount >= MaxRolls)
            {
                MaxRolls = 6;
                RollCount = 0;
                RunningTotal = 0;

                TotalMoneyEarnedlabel.Text = "$0.0";
                Show(); MessageBox.Show("Sorry! You lose!");

                RollDiebutton.Enabled = false;
                BeginGamebutton.Enabled = true;

                TotalMoneyEarnedlabel.Text = "";

                BeginpictureBox.Image = P2Kbembow.Properties.Resources.Begin;
                Pressyourluckandrollagainlabel.Visible = false;
                ClickBeginGametoStartlabel.Visible = true;
                StartOverbutton.Enabled = false;

                return;
            }

        StreamWriter outputFile;
        outputFile = File.CreateText("HighScore.txt");

        outputFile.WriteLine(TotalMoneyEarnedlabel.Text);
        outputFile.Close();

        if (Dice == 1)
        {
            //shows Image of dice 1
            BeginpictureBox.Image = P2Kbembow.Properties.Resources._1Die;
        }

        if (Dice == 2)
        {
            //shows Image of dice 2
            BeginpictureBox.Image = P2Kbembow.Properties.Resources._2Die;
        }

        if (Dice == 3)
        {
            //shows Image of dice 3
            BeginpictureBox.Image = P2Kbembow.Properties.Resources._3Die;
        }
        if (Dice == 4)
        {
            //shows Image of dice 4
            BeginpictureBox.Image = P2Kbembow.Properties.Resources._4Die;
        }

        if (Dice == 5)
        {
            //shows Image of dice 5
            BeginpictureBox.Image = P2Kbembow.Properties.Resources._5Die;
        }

        if (Dice == 6)
        {
            //shows Image of dice 6
            BeginpictureBox.Image = P2Kbembow.Properties.Resources._6Die;
        }

        //Display Message Box of dice rolled 
        Show(); MessageBox.Show(" You rolled a  " + Dice + "!");
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        try
        {
            string highScore;
            StreamReader inputFile;

            inputFile = File.OpenText("Highscore.txt");
            HighscoreBox.Items.Clear();

            while (!inputFile.EndOfStream)
            {
                highScore = inputFile.ReadLine();
                HighscoreBox.Items.Add(highScore);

            }

            inputFile.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:33:22.713

您的代码有问题的部分非常琐碎。要仅将文件中的最高分数添加到列表框中，您可以使用：

```
var highScore = File.ReadAllLines("Highscore.txt").Max(score => decimal.Parse(score));
HighscoreBox.Items.Clear();
HighscoreBox.Items.Add(highScore); 
```

但是，您还需要注意许多其他事项：

1.  您必须确保有有效的高分表可用。因此，请检查表单加载（*并且您可能不需要每次滚动模具时都创建和覆盖现有文件*）。

2.  [干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)您的代码以将高分从文件加载到列表框。

    ```
    string _fileName = "Highscore.txt";

    private void Form1_Load(object sender, EventArgs e)
    {
        if (!File.Exists(_fileName))
        {
            File.Create(_fileName);
            return; 
        }

        LoadHighestScore();
    }

    private void LoadHighestScore()
    {
        HighscoreBox.Items.Clear();

        var highestScore = GetHighestScore();
        HighscoreBox.Items.Add(highestScore);
    }

    private decimal GetHighestScore()
    {
        var scores = File.ReadAllLines(_fileName);
        if (scores.Length == 0)
            return 0;

        return scores.Max(score => decimal.Parse(score));
    } 
    ```

3.  您可以在每次滚动骰子时将分数写入文件，如下所示：

    ```
    private void RollDiebutton_Click(object sender, EventArgs e)
    {
        //-------------------------
        //-------------------------

        WriteScore(score);

        //-------------------------
        //-------------------------
    }

    private void WriteScore(string score)
    {
        File.AppendAllLines(sd, new string[]{ score });
    } 
    ```

请注意，`appends`每次都将分数添加到您的文件中。如果您只需要在分数超过现有最高分时才写（从您的问题中不是很清楚），您可以这样做：

```
 private void WriteScore(string score)
    {
        if (int.Parse(score) > GetHighestScore())
            File.AppendAllLines(sd, new string[]{ score });
    } 
```

1.  请将您的大部分代码分解为不同的方法，以便有助于代码重用。如果您可以将逻辑移动到不同的类，那就更好了。

2.  要做到这一点，最好使用像 SQLite 这样的小型轻量级客户端数据库。将来如果您需要更复杂的操作，例如“每个用户的最高分”怎么办？要获得最高分数，您可以这样做：

    ```
    SELECT MAX(score) FROM highscores; 
    ```

就如此容易。

最后，请发布代码中有问题的部分，而不是一大堆不相关的行。

# android - 在 listactivity 中使用 contextmenu 删除子字符串

> ID：13171658
> 
> 赞同：0
> 
> 时间：2012-11-01T05:51:30.047
> 
> 标签：android, substring, listactivity, android-contextmenu

我有一个上下文菜单来删除 listactivity 上的数据，但是当我在我的应用程序上尝试它时，数据并没有被删除。以前我在我的 AlmagHelper 类上使用子字符串查询输入数据。如果我创建的编码有问题？请帮忙 ..

我创建的这个活动课..

```
public class Pendapatan extends ListActivity {
    Cursor model=null;
    AlmagAdapter adapter=null;
    AlmagtHelper helper=null;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview_nasabah);

        helper=new AlmagtHelper(this);

        model=helper.getAllPendapatan();
        startManagingCursor(model);
        adapter=new AlmagAdapter(model);
        setListAdapter(adapter);

        registerForContextMenu(getListView());
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        getMenuInflater().inflate(R.menu.action_pendapatan, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item){
        AdapterView.AdapterContextMenuInfo info=
            (AdapterContextMenuInfo)item.getMenuInfo();

        switch (item.getItemId()) {
        case R.id.hapus_pendapatan:
            delete(info.id);
            return(true);
        }
        return false;
    }

    private void delete(final long rowId) {
        if (rowId>0) {
            new AlertDialog.Builder(this)
            .setTitle("Hapus")
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    prosesDelete(rowId);
                }
            }) .setNegativeButton("Batal", new DialogInterface.OnClickListener(){
                public void onClick(DialogInterface dialog, int whichButton) {
                }
            }).show();
                }
    }

    private void prosesDelete(long rowId) {
        String[] args={String.valueOf(rowId)};

        //is there something wrong with this code?

        helper.getWritableDatabase().delete("pendapatan", "_id =?", args);
        model.requery();
    } 
```

这是输入包含在类 AlmagHelper 中的数据的代码..

```
public Cursor getAllPendapatan() {
    return(getReadableDatabase()
                    .rawQuery("SELECT substr(_id, 1, 10) as _id, sum(value) as total FROM pendapatan GROUP BY _id ",
                                        null));
} 
```

我试过使用这段代码，但它不起作用

```
private void prosesDelete(long rowId) {
        String[] args={String.valueOf(rowId)};

        helper.getWritableDatabase().delete("pendapatan", "(substr(_id, 1, 10)) = _id =?", args);
        model.requery();
    } 
```

我有什么解决办法吗？任何解决方案对我来说都非常有用。谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:54:37.237

删除后只需执行 setListAdapter(adapter);

# perl - 在子进程中重定向 STDOUT

> ID：13171663
> 
> 赞同：6
> 
> 时间：2012-11-01T05:52:00.313
> 
> 标签：perl

有一个通过 fork 产生多个子进程的父进程。我希望父进程和子进程的日志文件是分开的。问题是子进程 STDOUT 被重定向到父日志文件以及子日志文件。不确定我需要更改什么以避免子进程日志消息进入父日志文件。我也不明白在下面的 setEnvironment 函数中创建 OUT 和 ERR 文件句柄的目的。这是一个现有的代码，所以我保持原样。在父进程和子进程中，我将变量 $g_LOGFILE 设置为包含不同的文件名，以便创建单独的日志文件。我也在父进程和子进程中调用 setEnvironment 函数。我尝试在子进程中关闭 STDOUT、STDERR、STDIN 并调用 setenvironment，但它无法正常工作。

```
sub setEnvironment()
{   

  unless ( open(OUT, ">&STDOUT") )
   {
          print "Cannot redirect STDOUT";
          return 2;
    }
    unless ( open(ERR, ">&STDERR") )
    {
          print "Cannot redirect STDERR";
          return 2;
    }

  unless ( open(STDOUT, "|tee -ai $g_LOGPATH/$g_LOGFILE") )
  {
          print "Cannot open log file $g_LOGPATH/$g_LOGFILE");
          return 2;
   }
   unless ( open(STDERR, ">&STDOUT") )
   {
                print  "Cannot redirect STDERR");
                return 2 ;
    }
    STDOUT->autoflush(1);

} 

####################### Main Program ######################################

    $g_LOGFILE="parent.log";

  while ($file = readdir(DIR))
 {  
     my $pid = fork;
     if ( $pid ) {

        setEnvironment();
        #parent process code goes here
        printf "%s\n", "parent";
        next;
     }
     $g_LOGFILE="child.log";
     setEnvironment();
     #child code goes here
     printf "%s\n", "child";
     exit;
 }

wait for @pids 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:37:55.490

好的，我测试了这段代码。这是我的[示例代码](https://gist.github.com/9cfe9946190242637f09)。在我的代码中存在类似（不确切）的问题：所有消息都双重写入子日志文件。

所以我对你的问题的回答：

> 问题是子进程 STDOUT 被重定向到父日志文件以及子日志文件。

这是因为当您使用管道 ( `open(STDOUT, "|tee ...`) 打开文件作为底层结果时，您的进程`fork()`将创建子进程，然后`exec`进入您运行的程序 (tee)。Forking(for tee) 采用主进程的 STDOUT，因此`tee`将写入父进程的日志文件。所以我认为你必须撤销对主进程使用 STDOUT 句柄。或者，第二种方法 - 删除使用`tee`- 它最简单的方法。

> 我也不明白在下面的 setEnvironment 函数中创建 OUT 和 ERR 文件句柄的目的。

似乎这是某人对上述问题的解决方法。您可以`grep -rE ' \bERR\b' .`在代码中搜索是否使用过。可能有人想保存真正的 STDOUT 和 STDERR 以供进一步使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:42:01.703

看起来**原始代码的意图如下：**

1.  当脚本从终端启动时，然后向终端**提供聚合的父子输出**
2.  此外，在 中提供**父输出`parent.log`的副本，在 中提供子输出的副本`child.log`**

请注意，就 2\. 而言， **@Unk 的答案**是正确的，并且移动部件比使用 的任何代码都少`tee`，但**未能达到 1.**

**如果实现上述 1\. 和 2.*都很***重要，那么请使用您的原始代码并在方法顶部**添加以下内容**`setEnvironment`：

```
sub setEnvironment()
{
    if ( fileno OUT )
    {
        unless ( open(STDOUT, ">&OUT") )
        {
            print "Cannot restore STDOUT";
            return 2;
        }
        unless ( open(STDERR, ">&ERR") )
        {
            print "Cannot restore STDERR";
            return 2;
        }
    }
    else
    {
        unless ( open(OUT, ">&STDOUT") )
        {
            print "Cannot redirect STDOUT";
            return 2;
        }
        unless ( open(ERR, ">&STDERR") )
        {
            print "Cannot redirect STDERR";
            return 2;
        }
    }
    unless ( open(STDOUT, "|tee -ai $g_LOGPATH/$g_LOGFILE") )
    ... 
```

顺便说一句，如果您的实际代码还没有这样做`$pid`，请不要忘记添加：`@pids`

```
 ...
  my $pid = fork;
  if ( $pid ) {
      push @pids, $pid;
      ... 
```

为什么以及如何工作？我们只是想在重新连接**到 之前立即****暂时恢复原始文件，以便继承它作为*其*标准输出`STDOUT``tee``tee`***并实际直接写入原始文件`STDOUT`（例如您的终端），而不是通过父母的 ( 在分叉子项的情况下) 写入`tee`(这是孩子`STDOUT`在此更改之前通常指向的位置，由于继承自 paremnt 进程，这就是将这些`child`行注入到`parent.log`.)*

 *因此，在回答您的一个问题时，无论谁编写了要设置的代码，`OUT`并且`ERR`必须牢记上述内容。（我不禁想知道您原始代码中缩进的差异是否表明有人在过去*删除*了与您现在必须添加回来的代码类似的代码。）

这是您现在在一天结束时得到的：

```
$ rm -f parent.log child.log
$ perl test.pl
child
parent
child
parent
parent
child
parent
child
parent
$ cat parent.log
parent
parent
parent
parent
parent
$ cat child.log
child
child
child
child
child 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T23:12:55.380

您始终可以通过[先关闭然后重新打开](http://perldoc.perl.org/functions/open.html)将 STDOUT 重定向到日志文件：

```
close STDOUT;
open STDOUT, ">", $logfile; 
```

这样做的一个小缺点是，一旦 STDOUT 被重定向，在脚本执行期间您将不会在终端上看到任何输出。

如果您希望父进程和子进程具有不同的日志文件，只需在之后执行此重定向到不同的日志文件`fork()`，如下所示：

```
print "Starting, about to fork...\n";
if (fork()) {
    print "In master process\n";
    close STDOUT;
    open STDOUT, ">", "master.log";
    print "Master to log\n";
} else {
    print "In slave process\n";
    close STDOUT;
    open STDOUT, ">", "slave.log";
    print "Slave to log\n";
} 
```

我已经测试过它可以在 Linux 和 Windows 上按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T12:27:29.410

```
#!/usr/bin/perl 

use strict;
use warnings;
use utf8;
use Capture::Tiny qw/capture_stdout/;

my $child_log = 'clild.log';
my $parent_log = 'parent.log';

my  $stdout = capture_stdout {
        if(fork()){
            my  $stdout = capture_stdout {
                print "clild\n";
            };
            open my $fh, '>', $child_log;
            print $fh $stdout;
            close $fh;
            exit;
        }
        print "parent\n";
   };
            open my $fh, '>', $parent_log;
            print $fh $stdout;
            close $fh; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T13:54:44.153

所有其他答案都是正确的（尤其是 PSIalt）——我只是希望我能用与问题中的代码非常接近的更正代码来回答。需要注意的关键事项：

### “|tee-ai……”

tee 命令将其标准打印到其标准输出，同时也打印到给定文件。正如 PSIalt 所说，删除它是确保每个进程的输出仅发送到正确文件的最简单方法。

### 父级循环内的 setEnvironment()

原始代码不断将 STDOUT 重定向回`tee`ed 文件。因此重新捕获 STDOUT。鉴于我在下面的代码，如果您移到`setEnvironment`上面，`#parent process code goes here`您会看到除了一个“Real STDOUT”和“Real STDERR”之外的所有内容实际上都出现在 parent.log 中。

### 选项

理想的做法是消除对重定向 STDOUT / STDERR 进行日志记录的任何依赖。我将拥有一个专用`log($level, $msg)`功能并开始将所有代码移至使用它。最初，如果它只是现有行为的外观是可以的 - 当您达到适当的代码覆盖阈值时，您可以简单地将其切换出来。

如果它是一个基本脚本并且不会产生愚蠢的大日志，为什么不将所有内容打印到 STDOUT 并带有一些您可以使用 grep 的前缀（例如，'PARENT:' / 'CHILD:'）？

这有点超出了问题的范围，但考虑使用更结构化的日志记录方法。我会考虑使用 CPAN 日志记录模块，例如[Log::Log4perl](https://metacpan.org/module/Log::Log4perl)。这样，父母和孩子可以简单地请求正确的日志类别，而不是乱搞文件句柄。其他优势：

*   标准化输出
*   允许即时重新配置 - 在运行但行为不端的系统上将日志记录级别从 ERROR 更改为 DEBUG
*   轻松重定向输出 - 无需更改代码即可重新排列日志文件、旋转文件、重定向到套接字/数据库等...

```
use strict;
use warnings;

our $g_LOGPATH = '.';
our $g_LOGFILE = "parent.log";

our @pids;

setEnvironment();

for ( 1 .. 5 ) {
    my $pid = fork;
    if ($pid) {
        #parent process code goes here
        printf "%s\n", "parent";

        print OUT "Real STDOUT\n";
        print ERR "Real STDERR\n";

        push @pids, $pid;
        next;
    }
    $g_LOGFILE = "child.log";
    setEnvironment();

    #child code goes here
    printf "%s\n", "child";
    exit;
}

wait for @pids;

sub setEnvironment {
    unless ( open( OUT, ">&STDOUT" ) ) {
        print "Cannot redirect STDOUT";
        return 2;
    }

    unless ( open( ERR, ">&STDERR" ) ) {
        print "Cannot redirect STDERR";
        return 2;
    }

    unless ( open( STDOUT, '>>', "$g_LOGPATH/$g_LOGFILE" ) ) {
        print "Cannot open log file $g_LOGPATH/$g_LOGFILE";
        return 2;
    }

    unless ( open( STDERR, ">&STDOUT" ) ) {
        print "Cannot redirect STDERR";
        return 2;
    }
    STDOUT->autoflush(1);
} 
```

子日志：

```
child
child
child
child
child 
```

父日志：

```
parent
parent
parent
parent
parent 
```

从终端获取的 STDOUT：

```
Real STDOUT (x5 lines) 
```

从终端获取的 STDERR：

```
Real STDERR (x5 lines) 
```*

# actionscript-3 - 使用 Flash as3 使用 TLSSocket 连接到客户端服务器

> ID：13171665
> 
> 赞同：0
> 
> 时间：2012-11-01T05:52:15.163
> 
> 标签：actionscript-3

我需要使用`TLS`Socket 连接连接到客户端服务器。当我直接访问它时，这工作正常，即通过 IDE，但如果我尝试通过浏览器访问它会出错。

错误：

```
SecurityError: Error #2010: Local-with-filesystem SWF files are not permitted to use sockets. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:12:35.663

添加编译器选项`use-network=true`。您可以加载本地文件或使用网络，所以选择你的一方。

# iphone - 有什么框架/工具可以在不使用应用程序源代码的情况下自动化 iPhone 原生应用程序吗？

> ID：13171673
> 
> 赞同：1
> 
> 时间：2012-11-01T05:53:12.620
> 
> 标签：iphone, ios-ui-automation

Frank 很好，但是，它需要应用程序的源代码。其他人也是如此。例如 square/KIF、Telerik、UIAutomation 等。

我不考虑 Fonemonkey。我正在寻找类似于“Robotium for Android”的东西，它允许您通过重新签署 .apk 文件在 Eclipse 中编写脚本，并且可以在没有应用程序源代码的情况下工作。

我认为这非常重要，因为在工作环境中，开发人员不一定会共享应用程序的源代码，除非它是开源应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:49:32.267

您可以使用不需要应用程序源代码的工具工具（内置于 xcode 中）。

# c# - EF，如何提高查询性能

> ID：13171678
> 
> 赞同：2
> 
> 时间：2012-11-01T05:53:46.427
> 
> 标签：c#, mysql, entity-framework

我有关于`1 million`我的数据库中的数据（`MySQL`）

并且有一个高级搜索功能`very slow`（超过30秒），因为生成的SQL EntityFramework不是很好，SQL：

```
SELECT
`Project1`.*
FROM 
(
SELECT
`Extent1`.*
FROM `tnews` AS `Extent1`
 WHERE `Extent1`.`Region` = 'Americas(2)'
 ) AS `Project1`
 ORDER BY 
`Project1`.`PnetDT` DESC LIMIT 0,20 
```

C#函数：

```
 private List<CNNews> AdvancedSearchAndPage(int pagenum, int pagesize,
        AdvSearchArgs advArgs)
    {
        IQueryable<CNNews> result = _dbRawDataContext.CNNews.
            OrderByDescending(n => n.PnetDT);

        if (!string.IsNullOrWhiteSpace(advArgs.Feed))
        {
            result = result.Where(news => news.Feed == advArgs.Feed);
        }

        if (!string.IsNullOrWhiteSpace(advArgs.PNET))
        {
            result = result.Where(news=>news.PNET == advArgs.PNET);
        }

        if (!string.IsNullOrWhiteSpace(advArgs.ProdCode))
        {
            result = (from news in result
                      where news.ProdCode == advArgs.ProdCode
                      select news);
        }

        if (!string.IsNullOrWhiteSpace(advArgs.Code))
        {
            result = (from news in result
                      where news.Code == advArgs.Code
                      select news);
        }

        if (!string.IsNullOrWhiteSpace(advArgs.BegineDate))
        {
            var begin = Convertion.ToDate(advArgs.BegineDate);
            var end = Convertion.ToDate(advArgs.EndDate);

            result = (from news in result
                      where news.PnetDT >= begin && news.PnetDT < end
                      select news);
        }

        if (!string.IsNullOrWhiteSpace(advArgs.Region))
        {
            result = result.Where(x => x.Region == advArgs.RegionName);
        }

        var pagedList = result.
            Skip(pagenum * pagesize).
            Take(pagesize);
        return pagedList.ToList();
    } 
```

如果 SQL 格式是这样的，它将`very fast`：

```
 SELECT
*
FROM `tnews` AS `Extent1`
 WHERE `Extent1`.`Region` = 'Americas(2)'
 ORDER BY 
 `PnetDT` DESC LIMIT 0,20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:04:35.460

您可以直接从 DbSet 执行自己的 SQL 并获得 EF 的所有好处，请参阅

[http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.sqlquery(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.sqlquery(v=vs.103).aspx)

还有其他方式，请参阅这些答案以获取更多详细信息

[是否可以使用实体框架运行本机 sql？](https://stackoverflow.com/questions/915329/is-it-possible-to-run-native-sql-with-entity-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:16:58.683

生成查询的 LINQ 如下所示：

```
IQueryable<CNNews> result = _dbRawDataContext.CNNews
    .OrderByDescending(n => n.PnetDT)
    .Where(x => x.Region == advArgs.RegionName)
    .Skip(pagenum * pagesize)
    .Take(pagesize); 
```

您告诉 LINQ 选择所有项目并订购它们。然后你告诉它采取其中的一个子集。我会说，SQL 看起来与您指定的完全一样。

如果您重新排列代码以使`Where()`调用在调用之前，`OrderByDescending()`我认为您可能会得到更好的 SQL：

```
IQueryable<CNNews> result = _dbRawDataContext.CNNews
    .Where(x => x.Region == advArgs.RegionName)
    .OrderByDescending(n => n.PnetDT)
    .Skip(pagenum * pagesize)
    .Take(pagesize); 
```

另外，我不知道改变`OrderByDescending()`and `Skip()`/的顺序`Take()`是否会产生不同的结果。

（免责声明：我没有测试过）

# jquery - 从其他html文件一一加载div中的内容

> ID：13171680
> 
> 赞同：0
> 
> 时间：2012-11-01T05:53:48.347
> 
> 标签：jquery, ajax

我想把我的页面分成两部分。说`div 1`和`div 2`。`div`单击页面链接时，我想先加载。当内容`div 1`完全加载时，我想开始加载`div 2`.

在所有主要浏览器中都能正常工作的任何可能的解决方案。

我还希望这些内容`divs`来自同一目录中的其他 html。下面是我试图做的事情的代码。

```
$(document).ready(function(){ 
    $('#div1').load('home/index.html', function() {
        $("#div2").load('home/index2.html');
    });
}); 
```

我希望当“home/index.html”中的内容完全加载到 div1 中时，“home/index2.html”中的内容开始在 div2 中加载。

下面的代码在两者中都显示了内容，`div`但我想`div`在我的第一个`div`完全加载后开始加载。

```
$(document).ready(function(){ 
    $('#div1').load('home/index.html');
    $("#div2").load('home/index2.html');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:47:05.363

你可以使用这个javascript：

```
$(document).ready(function(){ 

    $('#div1').load('home/index.html',function(responseTxt,statusTxt) {
        if(statusTxt == 'success')
        {
            $('#div1').html(responseTxt);
            $('#div2').load('home/index2.html');
        }    

    });
    }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T06:54:34.543

的回调函数`.load()`是表示**加载已执行**未***加载完成***

参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

> 如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

# c# - CA 1822 网络 API

> ID：13171684
> 
> 赞同：2
> 
> 时间：2012-11-01T05:54:28.920
> 
> 标签：c#, .net, asp.net-web-api

我正在使用 .NET WebAPI 来创建 RESTful 服务。但是，我在运行代码分析时收到以下警告：

> > CA1822：Microsoft.Performance：从未使用过“LoginController.Post(Credential)”的“this”参数（或 Visual Basic 中的“Me”）。将成员标记为静态（或在 Visual Basic 中为 Shared）或在方法主体或至少一个属性访问器中使用“this”/“Me”（如果适用）。C:\Workspace\Services\SriLankan.Mobility.Services\Controllers\LoginController.cs

有没有办法避免这种情况？我不能只使 POST 方法静态，因为这样框架就无法映射请求。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:34:35.053

你有两个选择

1.  更正代码 - 确保它不需要引用“this”（警告试图帮助您避免不必要的空检查）。可能不适用于您的情况。[参见 CA1822：将成员标记为静态 http://msdn.microsoft.com/en-us/library/ms245046.aspx]

2.  抑制警告 [参见源抑制概述 http://msdn.microsoft.com/en-us/library/ms244717.aspx]

高温高压

# mysql - 传递选择值并从 mysql 检索数据

> ID：13171688
> 
> 赞同：0
> 
> 时间：2012-11-01T05:55:03.230
> 
> 标签：mysql, drop-down-menu, where

我正在处理动态页面。情节是这样的。

*   第 1 页包含一个供我选择的下拉菜单。
*   选定的菜单值将传递到下一页 URL。
*   然后页面会检索到这个值来比较和过滤MYSQL Table字段名称。
*   该表由 4 个主要类别组成，这是用户在第 1 页中选择的选项。
*   每个类别将存储 30 个单词。
*   当用户搜索某个词时，它应该通过显示下拉菜单并检查该值是否与表的字段 id 的值相同来询问选项，并且该词现在用于缩小范围在此字段中搜索，而不是所有 4 个类别。

这个怎么做？我为此工作了几个星期，但我无法解决它。

```
$ret1 = "SELECT * FROM $db_tb_name WHERE MATCH
 ('categoryid'='.$selectvalueid.') AND AGAINST ('%$str%' IN BOOLEAN MODE)"; 
```

我有这段代码，它的语法错误。

请有人帮我举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:38:37.647

所以让我直截了当地说：在您发出请求时，您既有类别 id `$selectvalueid`（由下拉菜单产生）和一个搜索词`$str`（由自由文本条目产生？）。`categoryid`并且您希望表的列与脚本中的字符串*完全匹配*的那些行`$selectvalueid`，而其他一些列（具有什么名称？）*包含*该`$str`值。到目前为止是正确的吗？

如果是，您的查询可能如下所示：

```
SELECT * FROM $db_tb_name
WHERE categoryid = '$selectvalueid'
  AND wordcolumn LIKE '%$str%' 
```

请注意，简单地将用户输入变量粘贴到 SQL 查询中很可能会使您的站点容易受到 SQL 注入攻击。因此，更好的方法是使用带有占位符的查询，并在执行查询时使用准备好的语句以安全的方式填充这些占位符。如何做到这一点取决于应用程序语言。

# java - 尝试连接 gmail 并从 JAVA 的服务器获取收件箱？

> ID：13171689
> 
> 赞同：0
> 
> 时间：2012-11-01T05:55:04.603
> 
> 标签：java, sockets, ssl, imap, jsse

我正在尝试连接 gmail 并从服务器获取收件箱。我可以连接到 gmail 并登录我的帐户。当我将它们发送到套接字时

```
output.println( "A01 lOGIN " + userName + " " + password );
output.flush(); 
```

我可以从套接字得到响应。但是当我发送新东西时：

```
output.println( "A02 SELECT INBOX");
JOptionPane.showMessageDialog( null,"Before Flush");
output.flush();
JOptionPane.showMessageDialog( null,"After Flush"); 
```

并尝试像这样从套接字获得响应：

```
JOptionPane.showMessageDialog( null,in.nextLine());
JOptionPane.showMessageDialog( null,"After nextLine()"); 
```

它不显示任何消息对话框并等待近 5 分钟。5 分钟后，它显示空消息对话框（不显示最后一条消息）。我找不到任何解决方案。有谁知道问题是什么？

```
public static void main(String[] args) {

 // open SSLSocket connection to server and send login
    try { 

       // obtain SSLSocketFactory for creating SSLSockets
       SSLSocketFactory socketFactory = 
          ( SSLSocketFactory ) SSLSocketFactory.getDefault();

       // create SSLSocket from factory
       SSLSocket socket = 
          ( SSLSocket ) socketFactory.createSocket( 
             "imap.gmail.com", 993 ); 

       // create PrintWriter for sending login to server
       PrintWriter output = new PrintWriter( 
          new OutputStreamWriter( socket.getOutputStream() ) );

       Scanner in = null;
       in = new Scanner(socket.getInputStream());

       // display response to user
       JOptionPane.showMessageDialog( null, in.nextLine());

       // prompt user for user name
       String userName = JOptionPane.showInputDialog( null,
          "Enter User Name:" );

       // prompt user for password
       String password = JOptionPane.showInputDialog( null,
          "Enter Password:" );

       output.println( "A01 lOGIN " + userName + " " + password );
       output.flush();

       // display response to user
       JOptionPane.showMessageDialog( null, in.nextLine());
       JOptionPane.showMessageDialog( null, in.nextLine());

       output.println( "A02 SELECT INBOX");
       JOptionPane.showMessageDialog( null,"Before Flush");
       output.flush();
       JOptionPane.showMessageDialog( null,"After Flush");

       /*
        * It waits in nextLine() and it does not show anything
        * Because of waiting, It does not show After nextLine() message Dialog
        * But after 5 minutes, It shows a message dialog with null string
        */
       JOptionPane.showMessageDialog( null,in.nextLine());
       JOptionPane.showMessageDialog( null,"After nextLine()");

       // clean up streams and SSLSocket
       output.close();
       in.close();
       socket.close();

    } // end try

    // handle exception communicating with server
    catch ( IOException ioException ) { 
       ioException.printStackTrace(); 
    } 

    // exit application
    finally {
       System.exit( 0 );
    }
} 
```

# java - 如何在 Java 中识别标签的 ID

> ID：13171692
> 
> 赞同：2
> 
> 时间：2012-11-01T05:55:41.103
> 
> 标签：java, swing, jlabel

我已经按数组创建了 9 个 JLabels。并且它具有使用 mouseClicked(MouseEvent src){...} 方法的通用事件侦听器，在这里我发现问题是，如何识别单击了哪个 JLabel？

说，如果点击标签[0]，那么我想显示“点击标签0”，如果点击标签[1]，那么我想显示“点击标签1”

我可以执行此操作吗？如果是，那么如何？

注意：-我找到了一些答案，说明添加自定义“id”属性，但首先，如果存在任何默认方法，我更喜欢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:16:16.917

**添加标签**

```
 JPanel pnl = new JPanel(new FlowLayout());
 dd.add(pnl);
 addlistener();
 for (int i = 0; i < 10; i++) {
        pnl.add(lbl[i] = new JLabel("" + i));
        lbl[i].addMouseListener(listern);

 } 
```

**听众**

```
public void mouseEnter(MouseEvent me) {
                System.err.println("Hi");
                me.getComponent();
                if(me.getSource() instanceof JLabel){
                    System.out.println("lable"+ ((JLabel)me.getSource()).getText());
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T06:01:39.403

您可以循环数组，将事件源与数组中的每个元素进行比较...

```
for (int index = 0; index < myLabelArray.length; index++) {
    if (myLabelArray[index].equals(src.getSource())) {
        System.out.println("Label-" + index + " was clicked");
        break;
    }
} 
```

或者你可以“命名”每个标签......

```
JLabel[] myLabelArray = new JLabel[9];
for (int index = 0; index < 9; index++) {
    JLabel label = new JLabel("...");
    label.setName(Integer.toString(index));
    label.addMouseListener(commonMouseListener);
    myLabelArray[index] = label;
} 
```

然后在你的鼠标监听器中......

```
public void mouseClicked(MouseEvent evt) {
    System.out.println("Label-" + ((JLabel)evt.getSource()).getName() + " was clicked");
} 
```

或者您可以使用 a`Map`而不是数组或`List`...

# objective-c - SUPDefaultCallbackhandler 的重复接口定义

> ID：13171693
> 
> 赞同：0
> 
> 时间：2012-11-01T05:55:45.083
> 
> 标签：objective-c, ios, xcode, macos

[单击此处查看错误快照](http://i.stack.imgur.com/fX9iG.png) 这是我们尝试使用目标 c 在 xcode 中开发应用程序时遇到的错误。由于我们是该技术的新手，因此我们无法理解重复定义发生在哪里。请帮助我们.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:07:16.483

如果您使用#include 而不是导入，则使用此技术来最大程度地减少重复项：在界面的开头（实际上就在它之前）检查定义，如果未定义，则定义它并继续定义您的界面。这是一个例子：

```
 #ifndef __NetworkOptionsViewController__H // check if this has every been imported before
 #define __NetworkOptionsViewController__H

#import "blahblah.h"

 @interface NetworkOptionsViewController : UITableViewController

 {

NSMutableArray* somevariable1;
int somevariable2;

 }
 @end

 #endif 
```

- 关于我之前遇到的具体问题，我收到此错误是因为我的班级的文件路径错误。我检查了文件检查器，但在 IDE 中尚未在 Classes 文件夹中定义我的类文件路径。我删除了它们并再次复制它们。

# haskell - 如何避免功能重复（IO 和非 IO 版本）

> ID：13171694
> 
> 赞同：4
> 
> 时间：2012-11-01T05:55:55.273
> 
> 标签：haskell

我有两个功能：

```
trans_table :: [Char] -> [Char] -> Map.Map Char Char
trans_table s1 s2 = Map.fromList (zip s1 s2)

random_trans_table :: IO (Map.Map Char Char)
random_trans_table = do
    rawKey <- shuffle ascii
    let zipped = zip ascii rawKey 
    let map = Map.fromList zipped
    return map 
```

首先他们从两个字符串创建 Map；第二个生成随机地图。第一个返回 Map.Map Char Char；第二个返回 IO (Map.Map Char Char)

现在我需要从这个 Map 中查找值，并且我创建了两个函数 - 一个用于 IO Map，另一个用于 Map：

```
translate_char :: Map.Map Char Char -> Char -> Maybe Char
translate_char table c = Map.lookup c table

translate_char_io :: IO (Map.Map Char Char) -> Char -> IO (Maybe Char)
translate_char_io table c = do
    raw_table <- table
    let result = Map.lookup c raw_table
    return result 
```

我不喜欢它，因为它会导致代码重复。我已经复制了一个函数，如果我用这种方式编码，我将需要复制我的所有函数。

有没有一种方法可以创建与 Map 和 IO (Map) 一起使用的函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T06:03:00.837

`do`-notation 或`>>=`它脱糖的“绑定”运算符会为您处理这个问题。

任何你想调用的地方`translate_char_io`，你都可以通过让 monad 语法为你解开你的表来调用纯函数。例如，如果你想创建一个随机表并在其中查找两个不同的字符，你可以这样做：

```
test c1 c2 = do
    table <- random_trans_table
    return (translate_char table c1, translate_char table c2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T06:13:44.467

您可以使用[liftM](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#g:7) ( `import Control.Monad`) 编写转换器：

```
translate_char_io table c = liftM (\table' -> translate_char table' c) table 
```

请注意为什么您只希望`table`参数是`IO`，但它是一个选项。翻转参数也可以让您摆脱内部函数`liftM (translate_char c) table`。如果您希望两个参数都作为`IO`操作，您还可以使用`liftM2`：

```
translate_get_char = liftM2 translate_char random_trans_table getChar 
```

或者你可以使用 do-notation 在你的 IO 代码中使用你的纯函数，在这种情况下这可能是最简单的：

```
translateAndPrint = do
    table <- random_trans_table
    char <- getChar
    putChar (translate_char table char) 
```

# arrays - 如何从静态“TPoint 数组”中删除/删除特定成员或元素？

> ID：13171696
> 
> 赞同：1
> 
> 时间：2012-11-01T05:55:59.753
> 
> 标签：arrays, delphi, element, point

我想从静态“TPoint 数组”中删除/删除特定成员或元素。这个怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T06:21:38.240

如果“静态”是指“非动态”（即固定大小的数组），那么您不能。您可以做的最好的事情是将它移动到数组的末尾，然后以某种方式标记最后一个 TPoint，这样您就可以在随后的遍历中忽略它。

如果您正在谈论动态（即可变大小的数组，即。`VAR A : ARRAY OF TPoint;`），那么您可以使用以下例程：

```
TYPE
  TPointArray = ARRAY OF TPoint;

PROCEDURE RemoveIndex(VAR ARR : TPointArray ; Index: INTEGER);
  VAR
    I : INTEGER;

  BEGIN
    IF (Index<LOW(Arr)) OR (Index>HIGH(Arr)) THEN EXIT;
    FOR I:=Index TO PRED(HIGH(ARR)) DO ARR[I]:=ARR[SUCC(I)];
    SetLength(ARR,PRED(LENGTH(ARR)))
  END; 
```

# android - 如何在 Android 中检测图像并对其执行操作

> ID：13171703
> 
> 赞同：0
> 
> 时间：2012-11-01T05:56:45.367
> 
> 标签：android

![在此处输入图像描述](../Images/07a9ce578516fd019d1d81bcc43705ca.png)

请看上图。我的要求是我应该能够检测我是否点击了哪个号码。这是单个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T10:44:18.900

使用透明的文本视图并将它们放在数字上方并实现它们的 actionlistenerr。但是您必须处理多个屏幕分辨率。

# jquery - 列表项和数据传输

> ID：13171706
> 
> 赞同：0
> 
> 时间：2012-11-01T05:57:11.443
> 
> 标签：jquery, listview, jquery-mobile, listitem

我正在使用 jQuery mobile 创建一个网页。我是这项技术的新手。我想通过列表项单击导航到另一个页面。在转到第二页时，我想从列表项和列表项 id 中传递文本值以显示它。谁能指导我？

我的 HTML 代码是：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />

    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

    <title>Demo Page</title>

    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>

    <script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css"/>

    function onDeviceReady() {}
    document.addEventListener("deviceready", onDeviceReady, false);

    function Button_onclick() {

    for(i=0; i < 3; i++){
            $("#numbers").append('<li id="'+i+'" ><a href="#page2#">' +i+'</a></li>' );
        $('#numbers').listview('refresh');
    }
}
</script>

</head>

<body>

    <div >
        <input id="Click_Button" type="button" value="Submit" onclick="Button_onclick()" />
    </div>

    <div id="divList" data-role="content">
        <ul id="numbers" data-role="listview" data-inset="true"> </ul>
    </div>

    </div>
    <div data-role="page" id="page2">

    <div data-role="header">
    <h1>Page Two</h1>
        </div>

        <div data-role="content">
    <p>Welcome to page 2.</p>
    </div>

    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:16:20.337

这必须有效。我希望它会有用。

索引.html：

```
<body>
<div id="page1" data-role="page" data-theme="a" data-rockncoder-jspage="page1">
    <header data-role="header">
        <h1>Page 1</h1>
    </header>
    <section data-role="content" id="pages_list"></section>
    <div>
        <button id="send_btn">SEND</button>
    </div>
</div>

<div id="page2" data-role="page" data-theme="b" data-rockncoder-jspage="page2">
    <header data-role="header">
        <h1>Page 2</h1>
    </header>
    <div id="p2_id_selected"></div>
    <div id="p2_text_selected"></div>
</div>

<div id="page3" data-role="page" data-theme="b" data-rockncoder-jspage="page3">
    <header data-role="header">
        <h1>Page 3</h1>
    </header>
    <div id="p3_id_selected"></div>
    <div id="p3_text_selected"></div>
</div>

<script src="scripts/hideAddressBar.js" type="text/javascript"></script>
<script src="scripts/app.js" type="text/javascript"></script> 
```

主.js：

```
num_pages = 3;
page_selected = 0;
text_selected = "";

$(document).delegate('.ui-page', 'pageshow', function () {
    loadList();
});

function loadList()
{   
    $("#pages_list").append("<ul><fieldset data-role='controlgroup' id='radios'></fieldset></ul>");
    $("#radios").empty();
    for (var i = 0; i < num_pages; i++)
    {
        var id = "page_id"+(i+1);
        $("#radios").append("<input type='radio' name='choice' data-theme='c' id='" + id + "' />");
        $("#radios").append("<label for='" + id + "'>"+"Page "+(i+1)+"</label>");
        $("#" + id).checkboxradio();
    }
    $("#radios").controlgroup("refresh"); 
};

$(function(){
    $( "#send_btn" ).click(function(e)
    {
        if( $('#page_id2').is(':checked') )
        {
            page_selected = 2;
            text_selected = $('input[name=choice]:checked + label').text();
            $.mobile.changePage( "#page2", {
                transition: "slide",
                role: "page",
                reverse: false,
            });
        }else if( $('#page_id3').is(':checked') )
        {
            page_selected = 3;
            text_selected = $('input[name=choice]:checked + label').text();
            $.mobile.changePage( "#page3", {
                transition: "slide",
                role: "page",
                reverse: false,
            });
        }
    });
});

$("#page2").live('pageshow', function() {
   $("#p2_id_selected").text(page_selected);
   $("#p2_text_selected").text(text_selected);
});

$("#page3").live('pageshow', function() {
   $("#p3_id_selected").text(page_selected);
   $("#p3_text_selected").text(text_selected);
}); 
```

# php - 为什么我在使用 CI 发送电子邮件时无法将电子邮件 ID 传递给 TO 归档？

> ID：13171711
> 
> 赞同：0
> 
> 时间：2012-11-01T05:57:35.803
> 
> 标签：php, codeigniter

嗨，这是我的控制器功能。在我看来，我将一个来自数据库的电子邮件变量设置为会话数据。我在控制器中验证了它是否正确。我得到它完美。但是，当我尝试将该电子邮件 ID 作为 TO 字段变量发送时，它不起作用。

```
function do_upload()
{ 
    $config['upload_path'] = 'C:\xampp\htdocs\upload\application';
    $config['allowed_types'] = 'doc|docx|pdf';
    $config['max_size'] = '10240';
    $email = $this->session->userdata("employer_email");// If i echo $email; I will get my passed session variable

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {   
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('upload_form', $error);
    }
    else
    { 
        $data = array('upload_data' => $this->upload->data()); 

        echo "Resume Successfully uploaded to database.............";
        $file = $data['upload_data']['full_path'];

    $config = Array(
      'protocol' => 'smtp',
      'smtp_host' => 'ssl://smtp.googlemail.com',
      'smtp_port' => 465,
      'smtp_user' => 'xxx@gmail.com', // change it to yours
      'smtp_pass' => 'xxxx', // change it to yours
      'mailtype' => 'html',
      'charset' => 'iso-8859-1',
      'wordwrap' => TRUE
    );

      $this->load->library('email', $config);
      $this->email->set_newline("\r\n");
      $this->email->from('xxx@gmail.com'); // change it to yours
      $this->email->to($email); // But here it's not working
      $this->email->subject('Email using Gmail.');
      $this->email->message('Working fine ! !');
      $this->email->attach($file);
      if($this->email->send())
     {
      echo 'Email sent.';
     }
     else
    {
     show_error($this->email->print_debugger());
    }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:57:31.950

您的 $email 正在传递给没有引号的函数。想想它是如何从会话中产生的。如果会话中的电子邮件是 xxx@gmail.com，那么您将传递以下内容：

```
$this->email->to(xxx@gmail.com); 
```

您希望该行显示为：

```
$this->email->to('xxx@gmail.com'); 
```

试试这个：

```
$email = '"'.$this->session->userdata("employer_email").'"'; 
```

# heroku - Amazon S3 上文件的 Ghostscript 处理（使用 Ubuntu）

> ID：13171713
> 
> 赞同：1
> 
> 时间：2012-11-01T05:57:42.703
> 
> 标签：heroku, amazon-s3, ubuntu-10.04

我正在试验 Ghostscript 并处理必须保留在 Amazon S3 上的文件（我的应用程序在 Heroku 上运行）。我计划在我的 Heroku 帐户中使用 ghostscript 二进制文件来合并存储在 S3 上的 PDF 文档，如下所示：

> gs -sDEVICE=pdfwrite -dNOPAUSE -dBATCH -dSAFER -sOutputFile=3.pdf 1.pdf2.pdf

...其中 1.pdf、2.pdf 和 3.pdf 都在 S3 上。

这可能吗？

可以这样工作：

> gs -sDEVICE=pdfwrite -dNOPAUSE -dBATCH -dSAFER -sOutputFile=s3://mybucket/3.pdf s3://mybucket/1.pdf s3://mybucket/2.pdf

...凭证以某种方式被传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:57:05.040

似乎我想要做的事情在 Heroku 上是不切实际的或者是不可能的。通过进一步的研究，我发现可以使用 Heroku Rails 应用程序上的 #{$Rails.root}/tmp 文件夹作为便笺簿来创建合并的 PDF 文档，然后将其移动到 S3。

以下内容已经过测试并且可以正常工作（假设文件 1.pdf、2.pdf 和 3.pdf 已经在 Rails tmp 文件夹中）：

```
system("gs -sDEVICE=pdfwrite -dNOPAUSE -dBATCH -dSAFER -sOutputFile=#{Rails.root}/tmp/merged.pdf #{Rails.root}/tmp/1.pdf #{Rails.root}/tmp/2.pdf #{Rails.root}/tmp/3.pdf")
system("ls -al #{Rails.root}/tmp/")
file = File.open("#{Rails.root}/tmp/merged.pdf", "r")
data = file.read
AWS::S3::Base.establish_connection!(:access_key_id     => ENV['S3_ACCESS_KEY_ID'], :secret_access_key => ENV['S3_SECRET_ACCESS_KEY'])   
AWS::S3::S3Object.store("merged.pdf",data,ENV['S3_BUCKET_NAME'], :access => :private) 
```

# java - 调度一个java程序

> ID：13171715
> 
> 赞同：0
> 
> 时间：2012-11-01T05:58:00.890
> 
> 标签：java, windows, service, scheduling

我有一个工作的 java 程序，它在用户输入并处理它们的文件夹中获取一组文件。

现在用户不需要他们的干预。他们希望程序每 30 分钟运行一次，并从预先确定的路径处理文件。

当我用谷歌搜索它时，我知道我应该使用调度程序。那么我们应该使用特定于操作系统的调度程序还是 Java 调度程序？以及如何使用推荐的那个？

同样在系统重新启动时，该过程应自动启动。

提前致谢。哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:05:10.940

简单的方法是使用`TimerTask`. 在我的示例中，您的操作将每 30 分钟运行一次。

```
public class Schedular extends TimerTask {
    @Override
    public void run() {
        // your operation
    }

    public void start() {
        Timer timer = new Timer();
        timer.scheduleAtFixedRate(this, 5 *  1000 , 60 * 30 * 1000);
    }

    public static void main(String[] args) {
        Schedular schedular = new Schedular();
        schedular.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:06:29.707

处理这个问题的最简单方法可能是创建一个 cron 作业。好处是它的简单性和“标准化”，即。人们知道在哪里寻找经常性工作。缺点是您为程序正常运行创建了另一个依赖项。如果您确实创建了一个 cron 条目，请记住您的 java 程序应该以无状态方式设计。 [http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:08:10.663

如果系统或多或少总是启动，请使用 Java 调度程序（谷歌如何使用 Executor/TimerTask）。如果您需要在系统重新启动时自动启动该进程，则需要走操作系统特定的路线。

对于 Windows，安排一个服务每 30 分钟运行一次您的 java 程序（参见[http://windows.microsoft.com/en-US/windows7/schedule-a-task](http://windows.microsoft.com/en-US/windows7/schedule-a-task)示例）。您基本上需要运行“java -cp {some classpath} {your program}”

对于基于 Unix 的系统，设置一个每 30 分钟调用一次 java 程序的 cron 作业。

# c++ - 由分配器参数化的函数模板，用于构造不同类型的容器

> ID：13171717
> 
> 赞同：3
> 
> 时间：2012-11-01T05:58:10.360
> 
> 标签：c++, allocator

我想要一个`foo`沿着这些方向的函数

```
template <class T, class Alloc>
void foo(T param, Alloc a) {
    vector<int, Alloc<int> > vect_of_ints;
    list<float, Alloc<float> > list_of_floats;
    do_something()
}

std::allocator a
foo(42, a); 
```

我认为这失败了，因为`std::allocator`它不是一个定义明确的类型，直到它被专门用于特定类型。是否可以做我想做的事，但以其他方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:47:28.230

您不能拥有分配器 (a) 的一个实例并期望它适用于 2 种不同类型。但是，您可以使用分配器泛型类型（模板模板参数），并以两种不同的方式在您的 foo() 中对其进行专门化。无论如何，您都没有在 foo() 上使用“a”。

```
template <template<class> class Alloc, class T>
void foo(T t1, T t2) {
    vector<int, Alloc<int> > vect_of_ints;
    list<float, Alloc<float> > list_of_floats;
    do_something()
}

// UPDATE: You can use a function wrapper, and then the compiler will be
// able to figure out the other types.
template<class T>
void foo_std_allocator(T t1, T t2)
{
    foo<std::allocator, T>(t1, t2);
}

int main()
{
    //std::allocator a;
    //foo<std::allocator>();
    foo<std::allocator, int>(1, 2);

    // in the call below, the compiler easily identifies T as int.
    // the wrapper takes care of indicating the allocator
    foo_std_allocator(1, 2);

    return 0;
} 
```

# java - Java中System类的位置在哪里？

> ID：13171719
> 
> 赞同：-2
> 
> 时间：2012-11-01T05:58:29.000
> 
> 标签：java

实际上，我们是`System`通过使用该`System.getProperty("keyValue")`方法从类中获取值。此值是否因一个应用程序而异于另一个应用程序。我的意思是，这个`System`类是从一个应用程序到另一个应用程序的变化吗？

`System`上课地点在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:01:06.163

System 类位于`java.lang`. 全部`java.lang`自动导入。

您可以通过查看此处自己验证这一点：http: [//docs.oracle.com/javase/7/docs/api/java/lang/System.html](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)

基本上，你隐含

```
import java.lang.*; 
```

每一堂课都名列前茅。

就 System 类如何变化而言，它基于几个因素而变化：

1.  Java 版本：使用不同的 Java 版本，您可能启用了不同的属性。
2.  运行时环境：例如，如果您在不同的操作系统上运行，您将有不同的文件分隔符、默认路径等。这将使其发生变化。即使在操作系统版本或不同架构之间，这也会发生变化。

如果您决定更改 System 类中的变量，则这些变量是*临时*更改。这些存储在内存中，如果应用程序关闭并且其他 Java 环境无法访问，它们将被转储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:02:12.210

它在`java.lang`包装中。完全限定名称`java.lang.System`。我认为这不会改变，因为它是 Core Java SE 类的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:02:14.393

System Class位于java的默认包下`java.lang.Sytem`

不惜一切代价改变a，它是java中的默认API

[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html)

我们不需要导入`java.lang.*`它会自动导入的包

# iphone - 如何制作不规则形状的uiview并将uiimageview放入instacollage iphone app等形状中

> ID：13171723
> 
> 赞同：6
> 
> 时间：2012-11-01T05:59:06.783
> 
> 标签：iphone, uiview, shape, frames

我正在开发一个照片拼贴iphone应用程序，我必须在每个形状内制作不规则形状的相框，会有一个带有手势的uiimageview，在点击形状时我需要为该形状选择一张照片，这些框架与框架非常相似instacollage iphone 应用程序。链接：[https ://itunes.apple.com/in/app/instacollage-pro-pic-frame/id530957474?mt=8](https://itunes.apple.com/in/app/instacollage-pro-pic-frame/id530957474?mt=8)

为我提供一些如何完成这项任务的方向。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T06:41:01.833

您可以使用图层的 Mask 属性来实现此目的。

```
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = self.imageView.bounds ;
UIBezierPath *roundedPath = [UIBezierPath bezierPathWithOvalInRect:maskLayer.frame];
maskLayer.fillColor = [[UIColor whiteColor] CGColor];
maskLayer.backgroundColor = [[UIColor clearColor] CGColor];
maskLayer.path = [roundedPath CGPath];

// Add mask
self.imageView.layer.mask = maskLayer; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-17T12:29:48.940

谢谢萨哈娜。Swift 中的等效代码是：

```
let maskLayer = CAShapeLayer()
maskLayer.frame = self.imageView.bounds
let roundedPath = UIBezierPath(ovalInRect: maskLayer.frame)
maskLayer.fillColor = UIColor.whiteColor().CGColor
maskLayer.backgroundColor = UIColor.clearColor().CGColor
maskLayer.path = roundedPath.CGPath
self.imageView.layer.mask = maskLayer 
```

# ruby-on-rails - 如何测试 ActiveRecord 创建块内的行为？

> ID：13171726
> 
> 赞同：4
> 
> 时间：2012-11-01T05:59:30.487
> 
> 标签：ruby-on-rails, ruby, activerecord, rspec

如何使用 rspec 测试这样的代码？

```
Foo.create! do |foo|
  foo.description = "thing"
end 
```

我不想测试对象是否已创建——我想测试是否使用正确的对象调用了正确的方法。相当于测试这个：

```
Foo.create!(description: "thing") 
```

有了这个：

```
Foo.should_receive(:create!).with(description: "thing") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:28:42.190

这就是你所追求的吗？

```
it "sets the description" do
  f = double
  Foo.should_receive(:create!).and_yield(f)
  f.should_receive(:description=).with("thing")

  Something.method_to_test
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:03:10.843

```
Foo.count.should == 1
Foo.first.description.should == 'thing' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:17:38.167

这是一种组合方法，它融合了@antiqe 和@Fitzsimmons 的最佳答案。不过，它要冗长得多。

这个想法是以更像 AR::Base.create 的方式模拟 Foo.create。首先，我们定义一个辅助类：

```
class Creator
  def initialize(stub)
    @stub = stub
  end

  def create(attributes={}, &blk)
    attributes.each do |attr, value|
      @stub.public_send("#{attr}=", value)
    end

    blk.call @stub if blk

    @stub
  end
end 
```

然后我们可以在我们的规范中使用它：

```
it "sets the description" do
  f = stub_model(Foo)
  stub_const("Foo", Creator.new(f))

  Something.method_to_test

  f.description.should == "thing"
end 
```

您也可以使用`FactoryGirl.build_stubbed`代替`stub_model`. 但是，您不能使用`mock_model`,`mock`或者`double`因为您会再次遇到相同的问题。

现在，您的规范将通过以下任何代码片段：

```
Foo.create(description: "thing")

Foo.create do |foo|
  foo.descrption = "thing"
end

foo = Foo.create
foo.descrption = "thing" 
```

反馈表示赞赏！

# verilog - 达到迭代限制 10000

> ID：13171727
> 
> 赞同：0
> 
> 时间：2012-11-01T05:59:40.190
> 
> 标签：verilog

我正在使用以下代码。

```
 `timescale 1ns / 1ps
module program_counter
    (
    input        clock,
    input       reset,
    input [31:0]     in,
    output reg [31:0] out
    );
        initial 
            begin
                out <= 32'b00000000000000000000000000000001;
            end
    always @(negedge clock)
        begin
            if(reset)
                begin
                    out <= 32'b00000000000000000000000000000001;
                end
            else
                begin
                    out <= in;
                end
        end
endmodule 
```

如图所示显示错误

> “错误：在 0 ps：达到迭代限制 10000。检测到可能的零延迟振荡，因为信号无法在文件“C:/dewesh/latest_bkup/Program_counter.v”第 12 行中解析到稳定值，因此模拟无法及时推进. 请更正此代码以提前超过当前模拟时间。”

我无法找到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:22:10.520

问题是初始的第一行是*零*延迟。这应该在时间 0 驱动。尝试在初始 (#1) 上放置一个延迟。

您还希望在一个模块中混合可合成和不可合成的代码。这可能不是你想要的。

从*该*模块中删除初始块，并使用具有时间尺度的测试台实例化该模块，该测试台驱动该模块的输入，具有适当的延迟。

# c - 将 c 应用程序从 Unix 移植到 Linux 时的编译指示行为

> ID：13171729
> 
> 赞同：1
> 
> 时间：2012-11-01T05:59:45.850
> 
> 标签：c, linux, unix

当我将“C”文件从 unix（AIX/HPUX/Solaris）移动到 Linux 环境时，任何人都可以帮助我解释 PRAGMAS 的影响。我们是否需要进行任何更改才能使其正常工作，否则它们将在没有任何更改的情况下正常工作。？

如果可能的话，请告诉我从一个环境（unix）移植到另一个环境（linux）时我们可能需要考虑的影响。

非常感谢提前..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:09:38.307

这主要取决于您的编译器。#pragmas 会被不理解它们的编译器忽略。如果您当前使用的编译器将其中一些用于程序的逻辑，那么该程序是不可移植的，您需要对其进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:10:21.630

`Pragma`是 C 标准的一部分。

*`#pragma' 指令是 C 标准指定的方法，用于向编译器提供超出语言本身传达的信息的附加信息。该指令的三种形式（通常称为 pragma）由 1999 C 标准指定。AC 编译器可以自由地将它喜欢的任何含义附加到其他 pragma 中。*

**我们是否需要进行任何更改才能使其正常工作，否则它们将在没有任何更改的情况下正常工作。？**
您正在使用不同的编译器。所以会有一些**变化需要**。例如 GCC 提供了它自己的编译指示，

```
#pragma GCC dependency
#pragma GCC poison
#pragma GCC system_header
#pragma GCC warning
#pragma GCC error 
```

在移植到使用不同编译器的其他平台时，应该考虑这些事情。我建议你研究编译器文档。

参考这些讨论

[C 语言中#pragma 的使用](https://stackoverflow.com/questions/232785/use-of-pragma-in-c)
[你用#pragma 编写了哪些代码你觉得有用？](https://stackoverflow.com/questions/2703528/what-code-have-you-written-with-pragma-you-found-useful?lq=1)
[谁能告诉我pragma语句的使用](https://stackoverflow.com/questions/2665264/can-anyone-please-tell-me-the-use-of-pragma-statements?lq=1)

# c++ - 确定数组索引

> ID：13171731
> 
> 赞同：2
> 
> 时间：2012-11-01T05:59:54.697
> 
> 标签：c++, llvm-ir

我在 C 代码中有以下循环：

```
int f[10],b[10],k=0;
for(int i = 0; i < 10; i++)
{
    k = b[i+3]*f[i+2]; //please ignore the out of bound problem
} 
```

我想在上面的代码中确定数组 b 的步幅为 3 并且 f 的增量因子为 2。

生成的 LLVM 程序集是（对于包含循环的块）：

```
;<label>:12
%13 = load i32* %i, align 4
%14 = icmp slt i32 %13, 10
br i1 %14, label %15, label %30

;<label>:15                         ;preds=%12
%16 = load i32* %i, align 4
%17 = add nsw i32 %16,**3** // this is the increment value
%18 = sext i32 %17 to i64
**%19 = getelementptr inbounds [10 x i32]* %b, i32 0, i64 % 18**
%20 = load i32* % 19, align 4
%21 = load i32* %i, align 4
%22 = add nsw i32 %21,**2** // this is the increment value
%23 = sext i32 %22 to i64
**%24 = getelementptr invounds[10xi32]* %f, i32 0, i64 %23**
%25 = load i32* %24, align 4
%26 = mul nsw i32 %20, %25
store i32 %26, i32* %k, align 4
br label %27

;<label>:27
%28 = load i32* %l, align 4
%29 = add nsw i32 %28,1
store i32 %29, i32* %i, align 4
br label %12 
```

现在在我的 LoopPass 中，我使用以下代码：

```
Value *f = gep->getOperand(3);
if(dyn_cast<llvm::ConstantInt>(f))
{
    errs()<<(dyn_cast<llvm::ConstantInt>(f))->getValue();
   // the output should be 3 and 2 respectively

} 
```

但我没有得到任何输出。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:09:58.527

首先，从`ConstantInt`实例中获取整数的正确方法是 via `getSExtValue()`，而不是`getValue()`; 如果您还确保可以处理返回值，那么最好是：

```
assert (CI->getBitWidth() <= 32);
int x = CI->getSExtValue(); 
```

其次，只是将值作为第三个操作数传递给 GEP 不会得到 a `ConstantInt`，它会得到一个指向`sext`指令的指针！如果要找到实际的常数，则必须一直遍历图形，直到找到`add`指令，然后将常数标识为其操作数之一。

最后，您似乎在寻找偏移量，而不是步骤；但如果您*正在*寻找步骤，请考虑使用 Scalar Evolution，它具有您可能会觉得有用的机制，例如：

```
/// getStepRecurrence - This method constructs and returns the recurrence
/// indicating how much this expression steps by.  If this is a polynomial
/// of degree N, it returns a chrec of degree N-1.
/// We cannot determine whether the step recurrence has self-wraparound.
const SCEV *getStepRecurrence(ScalarEvolution &SE) const 
```

# javascript - 如何通过单击 Firefox 中的按钮来执行 VBScript 文件？

> ID：13171732
> 
> 赞同：3
> 
> 时间：2012-11-01T05:59:57.723
> 
> 标签：javascript, firefox, vbscript, firefox-addon, xul

我用谷歌搜索了我在 XUL/Javascript 中搜索命令的最后几个重要时间，通过该命令我可以通过单击浏览器内的按钮/图像来运行 VBScript 文件。有什么方法可以完成这项任务（仅适用于 Firefox）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:27:05.720

VBScript 只能在 IE 浏览器中运行。虽然维基百科文章不是我的第一选择，你可以在这里阅读：[http ://en.wikipedia.org/wiki/VBScript](http://en.wikipedia.org/wiki/VBScript)

# windows-services - 使用批处理文件启用/禁用 Windows 服务

> ID：13171733
> 
> 赞同：12
> 
> 时间：2012-11-01T05:59:58.347
> 
> 标签：windows-services

有没有办法使用批处理文件启用和禁用 Windows 服务。我说的是更改服务的启动类型，即启用和禁用，而不是使用 Net Start 和 Net Stop 命令启动和停止。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-01T06:12:43.293

```
sc config <service_name> start= disabled 
```

此命令有许多功能，但其中一个是在系统启动时确定服务的状态。可以将服务设置为自动运行、手动运行或根本不运行。命令是

```
sc config ServiceName start= flag 
```

这里 ServiceName 是服务的名称，flag 的值是 auto、demand 之一。或禁用。例如，要将服务设置为手动运行，命令是

```
sc config ServiceName start= demand 
```

请注意，等号后面必须有一个空格。参数 ServiceName 的正确值可能并不总是显而易见的，可以使用下一条命令为所有服务找到它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T06:06:59.807

```
sc config <service_name> start= disabled 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-01T18:49:36.200

我有一个答案和一个问题。我已将这一行放在一起以禁用正在运行的服务

```
sc query "wsearch"| find "RUNNING" >nul 2>&1 && net stop "wsearch" && sc config "wsearch" start= disabled 
```

这将在尝试禁用和停止之前检查服务。有些我喜欢改成手动的。

有人可以帮我把这个片段放到一个循环中吗

```
for loop sc query "wsearch"| find "RUNNING" >nul 2>&1 && net stop "wsearch" && sc config "wsearch" start= disabled 
```

servicename1 servicename2 servicename3 endif.....

这样，我可以创建一个片段并在一个文件中输入我想要更改状态的所有服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T15:18:40.907

```
sc \\servername config <service_name> Start= auto >> c:\temp\sc.txt 
```

更改服务的启动类型并将输出记录在`c:\temp\sc.txt`.

```
sc \\servername start <service_name>  >> c:\temp\sc1.txt 
```

启动服务并将输出记录在`c:\temp\sc.txt`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-27T18:12:25.743

我认为这有点晚了，但是对于将来可能遇到此问题的任何人，这是我用数据库后端编写的一个小应用程序片段，构建数组，循环遍历它并发送

```
 For SrvLoop As Integer = 0 To UBound(SrverName) - 1
        services = ServiceController.GetServices(SrverName(SrvLoop))
        For Each ChkLV In myobj.Items
            Srv = ChkLV.SubItems(3).Text
            i = ChkLV.SubItems(0).Text
            If ChkLV.Selected = True And Srv = SrverName(SrvLoop) Then
                Select Case Command
                    Case 1
                        If services(i).Status <> ServiceControllerStatus.Running Then
                            services(i).Start()
                        Else
                            MsgBox("Cannot Start a Service that is already Running", MsgBoxStyle.Information)
                        End If
                    Case 2
                        'If services(i).CanStop Then
                        If services(i).Status <> ServiceControllerStatus.Stopped Then
                            services(i).Stop()
                            'Else
                            '    If services(i).Status <> ServiceControllerStatus.Stopped Then
                            '        MsgBox("Service not able to be stopped currently" & vbCrLf & "Please try again in a few seconds", MsgBoxStyle.Information)
                            '    End If
                        End If
                End Select
                Progress.PB_Progress_Bar.Value += 1
            End If
        Next
    Next
    Progress.Dispose() 
```

# c# - 将 Linq 表达式从业务类型转换为领域类型？

> ID：13171737
> 
> 赞同：1
> 
> 时间：2012-11-01T06:00:29.813
> 
> 标签：c#, linq, lambda

我试图弄清楚如何在两种类型之间转换 Linq 表达式：一种在我的业务存储库中，一种在域存储库中。两种类型都具有将在查询中使用的相同数据属性。在我的业务层中，我有以下方法将基于业务实体执行查询：

业务存储库：域实体转换为业务实体

```
public IQueryable<CustomerVendorProduct> Query(Expression<Func<CustomerVendorProduct,bool>> filterInBusinessRepo) 
```

因此，消费者可以执行以下操作：

```
var list = BusinessRepository.Query(c => c.CustomerId == 77); 
```

他们将获得 CustomerId == 77 的 CustomerVendorProduct 业务对象列表。

在 Business Repository 的 Query() 方法中，我需要在 Domain Repository 中调用以下方法。它将从数据库中检索原始的加密域实体。请注意，它的查询需要域存储库中使用的实体类型。它与我们的业务实体有关，但仅涉及 CRUD 操作。

域存储库：来自数据库的原始加密实体

```
public IQueryable<CustomerVendorProductEntity> Query(Expression<Func<CustomerVendorProductEntity, bool>> filter) 
```

因此，Business Repository 中的 Query() 方法将执行以下操作：

```
var domainList = DomainRepository.Query(filterInBusinessRepo); 
```

结果将是 CustomerVendorProductEntity 对象的列表。然后，业务存储库将它们转换为 CustomerVendorBusiness 实体并将它们返回给调用者。

所以，我的问题是如何将 Linq 表达式从业务存储库实体类型：CustomerVendorProduct 转换为域存储库实体类型：CustomerVendorProductEntity？我认为我必须创建一种转换方法...类似于以下内容...但是，我不知道如何实现转换。我将衷心感谢您的帮助：

```
 // Convert the Linq Expression from our Business Layer to our Domain Layer.
    private Expression<Func<CustomerVendorProductEntity, bool>> CVPToCVPE(Expression<Func<CustomerVendorProduct, bool>> filter)
    {
        var parms = System.Linq.Expressions.Expression.Parameter(typeof(CustomerVendorProductEntity), "destination");

        var result = System.Linq.Expressions.Expression.Lambda<Func<CustomerVendorProductEntity, bool>>(filter, parms);

        return result;
    } 
```

感谢您的时间和建议！麦克风

2012 年 11 月 2 日：哇，没有回复？我原以为很多其他开发人员都遇到过这个问题，尤其是在 MVC 应用程序中......仍然希望得到帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:52:51.933

我不久前开发的一个 MVC 应用程序我做了类似的事情，但只有一组实体对象（即业务层使用与 ORM 相同的实体）。它工作得很好（业务线应用程序只有基本的 CRUD 功能），尽管它与传递的所有表达式有点混淆。

在您的情况下，我认为您将无法遍历业务存储库表达式树并使用域存储库对象重新创建它，正如您在转换代码中所暗示的那样。除了实施或完全验证可能不会简单之外，我无法对此提出任何建议。

从我在“真正的”MVC 应用程序中看到的大部分时间来看，表达式不会在层之间传递，而是使用标准 API 来传递最终将构建到数据层中的查询中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:57:27.867

[使用复杂映射将表达式树从一种类型转换为另一种类型](https://stackoverflow.com/questions/10570942/translating-expression-tree-from-a-type-to-another-type-with-complex-mappings/10643755#10643755)

这是我帮助一个人的一个非常相似的问题的答案。检查一下，如果这不能满足您的需求，请告诉我。

# java - 在 HighChart Bar Series Data 中传递数组

> ID：13171741
> 
> 赞同：0
> 
> 时间：2012-11-01T06:00:35.067
> 
> 标签：java, javascript, jquery, html

我正在使用 HighCharts 进行数据可视化，作为其中一个问题的条形图。但是，我在将系列数据/类别作为数组传递时遇到了问题。请在这件事上给予我帮助

```
$.getJSON('TotalUsers.json', function(data) {
var valuesTotal = [];
var daysTotal = [];
$.each(data.day, function(key, obj) {
    valuesTotal.push('<li id="value-' + key + '">' + obj["@value"] + '</li>');
    daysTotal.push('<li id="day-' + key + '">' + obj["@date"] + '</li>');
});
});​ 
```

最后，我得到的数组是 valuesTotal = [53819,57558,61141];

我想像这样在 HighGraphs 中堆积条形图的类别和系列数据中传递这个数组

var 图表；$(文档).ready(函数() {

```
 chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar'
        },
        title: {
            text: 'Stacked Bar Chart Representation'
        },
        xAxis: {
            categories: [valuesActive];
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Active User Ratio'
            }
        },
        legend: {
            backgroundColor: '#FFFFFF',
            reversed: true
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name +': '+ this.y +'';
            }
        },
        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },
            series: [{
            name: 'Total Days',
            data: daysTotal    // m getting an error here
        }, {
            name: 'Total Users',
            data: valuesTotal   // m getting an error here
        }]
    }); 
```

请帮帮我。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:48:04.310

您也可以像这样在 javascript 中声明一个数组：

```
var daysTotal = new Array(); 
```

还尝试将值插入到数组中，例如：

```
daysTotal[key] = value; 
```

然后将此数组传递给highchart。

# android - 从我的应用程序中卸载 Android 应用程序

> ID：13171745
> 
> 赞同：0
> 
> 时间：2012-11-01T06:00:55.867
> 
> 标签：android, uninstallation

有什么方法可以从我的应用程序中卸载应用程序吗？我已经尝试过如下方法，但应用程序因异常而崩溃。

```
Uri packageUri = Uri.parse(items.get(
Integer.parseInt(v.getTag().toString())).getPname());
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageUri);
startActivity(uninstallIntent); 
```

日志猫：-

```
11-01 11:14:35.781: E/AndroidRuntime(3834): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.DELETE dat=com.android.gesture.builder } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:03:44.343

要删除应用程序，您必须知道应用程序的包名称。

```
Uri packageURI = Uri.parse("package:com.android.myapp");
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(uninstallIntent); 
```

**编辑 ：**

```
Uri packageUri = Uri.parse("package:"+items.get(
Integer.parseInt(v.getTag().toString())).getPname()); 
```

# objective-c - 在使用 NIB 启动 parentView 后更改 UILabel 文本值不会显示更改

> ID：13171746
> 
> 赞同：0
> 
> 时间：2012-11-01T06:00:55.490
> 
> 标签：objective-c, ios, cocoa-touch

我的代码是这样的：

```
if (messageBox == nil) {
    messageBox = [[MessageBoxController alloc] initWithNibName:@"MessageBoxView" bundle:nil];
}
[messageBox.MessageLabel setText: someString];
[self presentModalViewController:messageBox animated:YES]; 
```

但是，第一次运行上述逻辑时（并且 messageBox 实际上是 nil 并被启动），那么新的标签文本 (someString) 将不会显示。但是，在我运行此方法的以下时间，文本将正确显示（是的，它显示了最新的“someString”。不是我上次调用该方法的实例）。

我在设置标签文本后立即尝试了 [messageBox.view setNeedsDisplay] 但这也无济于事。在 messageBox viewDidLoad 方法中，我还设置了 [self.MessageLabel setText: self.MessageLabel.text] 以防万一有一些异步初始化或你有什么。

为什么第一次调用这个方法时新的标签文字不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:09:59.913

原因`UILabel`将`not`在您`loaded`的设置文本之前。

```
if (messageBox == nil) {
    messageBox = [[MessageBoxController alloc] initWithNibName:@"MessageBoxView" bundle:nil];
}
[self presentModalViewController:messageBox animated:YES];
//make changes to UI after providing viewcontroller
[messageBox.MessageLabel setText: someString]; 
```

# ios - 报亭：废弃资产下载仍在下载

> ID：13171747
> 
> 赞同：0
> 
> 时间：2012-11-01T06:00:58.097
> 
> 标签：ios, objective-c, download, assets, newsstand-kit

我正在制作一个报亭应用程序，每期我有许多下载资源可供下载。“问题”是从服务器请求的 NSArray*。我开始下载，并在 MyDownloader 类中遍历所有这样的资产：

```
for (int i=0; i< issues.count; i++)
    MyIssue *currentIssue = [issues objectAtIndex:i];
    NSString *filename = [currentIssue.remotePath lastPathComponent];
    NSString *localFilepath = [cache.cachePath stringByAppendingString:filename];

    //skip downloaded file
    if ([[NSFileManager defaultManager] fileExistsAtPath:localFilepath]) {
        continue;
    }

    NSURL *downloadURL = [NSURL URLWithString:currentIssue.remotePath];

    // let's create a request and the NKAssetDownload object
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:downloadURL];

    NKAssetDownload *assetDownload = [nkIssue addAssetWithRequest:req];
    [assetDownload setUserInfo:[NSDictionary dictionaryWithObjectsAndKeys:
                                localFilepath, @"Filepath",
                                nil]];
    // let's start download
    [assetDownload downloadWithDelegate:self];
} 
```

我正在存储 localFilepath 以供以后在 connection:didFinishDownloading:destinationURL 方法中使用。

一切都很好，除了一件事。这是我在应用程序中输入的代码：didFinishLaunchingWithOptions: 方法

```
NKLibrary *nkLib = [NKLibrary sharedLibrary];
for(NKAssetDownload *asset in [nkLib downloadingAssets]) {
    NSLog(@"Asset to download: %@",asset);
    MyDownloader *downloader = [MyDownloader sharedDownloader];
    [asset downloadWithDelegate:downloader];
} 
```

这也很好用。但是当我需要取消所有排队的下载时，我会从 application:didFinishLaunchingWithOptions: 中注释掉之前的代码，我会收到如下日志消息：

```
NewsstandKit: cleaning up abandoned asset downloads: (
"<NKAssetDownload: 0xa17ffe0> -> {identifier: '98E98868-0DD2-45FF-90B8-7CF80E02A952/B11F6C43-86CC-4434-ABC1-F4450FF163CF'  request: <NSMutableURLRequest http://servername/serverpath/file.zip>  downloading: NO}" 
```

我希望所有的下载都被取消。但是，当我查看应用程序的 Library/Cache 目录时，我看到很多文件以“bgdl-2896-”开头的文件名下载等等。所以它们不会被取消，它们是由 NewsstandKit 下载的。connection:didFinishDownloading:destinationURL 方法也没有被调用。这就是问题所在——资产消耗了设备上的互联网流量和存储空间。

如何强制取消我不再需要的资产下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T08:17:16.847

与其为每个问题下载这么多资产，不如将资产归档到一个 zip 文件夹中，然后下载与您的问题相对应的 zip 文件。

这样，每个要下载的问题只有一个文件，其中包含该问题所需的所有资产。然后您可以解压缩并访问您的资产。这样就可以轻松组织您的问题及其资产。

希望这对您有所帮助。

# sql-server - 如何在 SQL 的 Where 子句中使用 If 语句？

> ID：13171748
> 
> 赞同：14
> 
> 时间：2012-11-01T06:00:59.937
> 
> 标签：sql-server, stored-procedures, if-statement, where-clause

我需要在 sql 的 where 子句中使用 if 语句。

```
Select * from Customer
WHERE  (I.IsClose=@ISClose OR @ISClose is NULL)  
AND    
(C.FirstName like '%'+@ClientName+'%' or @ClientName is NULL )    
AND 
 if (@Value=2)
  begin
  (I.RecurringCharge=@Total  or @Total is NULL )    
  end
 else if(@Value=3)
begin
(I.RecurringCharge like '%'+cast(@Total as varchar(50))+'%' or @Total is NULL )  
end 
```

注意：这不是完整的代码。一切都在 SP 中定义。我只是编写了理解问题所需的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T06:02:57.117

```
SELECT *
  FROM Customer
 WHERE (I.IsClose=@ISClose OR @ISClose is NULL)  
   AND (C.FirstName like '%'+@ClientName+'%' or @ClientName is NULL )    
   AND (isnull(@Value,1) <> 2
        OR I.RecurringCharge = @Total
        OR @Total is NULL )    
   AND (isnull(@Value,2) <> 3
        OR I.RecurringCharge like '%'+cast(@Total as varchar(50))+'%'
        OR @Total is NULL ) 
```

基本上，你的情况是

```
if (@Value=2)
   TEST FOR => (I.RecurringCharge=@Total  or @Total is NULL ) 
```

翻来覆去，

```
AND (isnull(@Value,1) <> 2                -- A
        OR I.RecurringCharge = @Total    -- B
        OR @Total is NULL )              -- C 
```

当**(A)**为真时，即@Value**不**为2，无论 B 和 C 结果如何，[A or B or C] 都将变为 TRUE。B 和 C 实际上只在 时检查`@Value = 2`，这是本意。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T06:04:12.693

您必须使用[CASE 语句/表达式](http://blog.sqlauthority.com/2007/04/14/sql-server-case-statementexpression-examples-and-explanation/)

```
Select * from Customer
WHERE  (I.IsClose=@ISClose OR @ISClose is NULL)  
AND    
    (C.FirstName like '%'+@ClientName+'%' or @ClientName is NULL )    
AND 
     CASE @Value
         WHEN 2 THEN (CASE I.RecurringCharge WHEN @Total or @Total is NULL) 
         WHEN 3 THEN (CASE WHEN I.RecurringCharge like 
                               '%'+cast(@Total as varchar(50))+'%' 
                     or @Total is NULL )
     END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T06:02:31.303

Nto确定您使用的是哪个RDBMS，但如果它是SQL Server，您可以查看而不是使用[CASE语句](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

> 评估条件列表并返回多个可能的结果表达式之一。
> 
> CASE 表达式有两种格式：
> 
> 简单 CASE 表达式将一个表达式与一组简单表达式进行比较以确定结果。
> 
> 搜索到的 CASE 表达式计算一组布尔表达式以确定结果。
> 
> 两种格式都支持可选的 ELSE 参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T11:57:26.200

```
select * from xyz where (1=(CASE WHEN @AnnualFeeType = 'All' THEN 1 ELSE 0 END) OR AnnualFeeType = @AnnualFeeType) 
```

# java - UI线程冻结

> ID：13171749
> 
> 赞同：0
> 
> 时间：2012-11-01T06:01:05.087
> 
> 标签：java, android, multithreading

我正在使用以下函数创建一个新线程。

```
public void toCallAsynchronous() {
    mThread = new Thread() {
        public void run() {
            while (true) {
                try {
                    // do something here
                    if(mLoggedIn)
                    {
                        boolean syncresult = mDownload.syncData();
                    }
                    Log.d(TAG, "local Thread sleeping");
                    Thread.sleep(10000);
                    //mHandler.postDelayed(this, 1000);
                } catch (InterruptedException e) {
                    Log.e(TAG, "local Thread error", e);
                }
            }
        }
    };
    mThread.start();
} 
```

我在 onResume 中调用它，因为我希望这个线程仅在用户登录他的帐户时启动。synData 函数访问服务器以获取新文件，下载它们并将条目更新到数据库中。您能否确定我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:12:03.770

`while(true)`很奇怪，因为您可能不希望该线程永远运行。至少应该是`while(!isFinishing())`

此外，您需要确保`mDownload.syncData`不要尝试访问任何 UI，如果确实如此，则会出现异常。

# php - 使用加盐密码登录用户的小查询

> ID：13171753
> 
> 赞同：1
> 
> 时间：2012-11-01T06:01:35.103
> 
> 标签：php, codeigniter

我有这样的codeigniter模型

```
<?php

class Model_Login extends CI_Model{
    function __construct(){
        parent::__construct();
    }

    public function login_submit($arrayData){
        extract($arrayData);
        $username=clean($txtusername);
        $password=clean($txtpassword);

        //first get salt for the respective user.
        $getsalt=$this->db->query("SELECT PASSWORD_SALT FROM USER_INFOS WHERE USER_NNAME=?",array($username))->row();
        $salt=$getsalt->PASSWORD_SALT;
        $password=sha1($salt.$password);

        $query=$this->db->query("SELECT * FROM USER_INFOS WHERE STATUS='Y' AND USER_NNAME=? AND USER_PASSWORD=?",array($username,$password));

        if($query->num_rows>0){
            $row=$query->row();
            // login successfull create session
            $this->session->set_userdata('USER_ID', $row->USER_ID);
            $this->session->set_userdata('USER_FULL_NAME', $row->USER_ENAME);

            return "success";
        }else{
            return "Invalid username and/or password.";
        }

    }
}

?> 
```

其中，PASSWORD_SALT 是一个数据库字段，包含使用`hash`函数散列的 128 个字符长的随机（对于每个用户）盐。

`USERNAME`如果代码是唯一的，则代码可以完美运行。但我试图想到可能会要求用户名不应该是唯一的客户。如果用户名不是唯一的，则始终选择第一行，并且除了具有相同用户名的用户之外的所有用户都无法登录，即使他们提供了有效的用户名和密码。

在这种情况下有什么更好的解决方法？

**编辑**

我知道`USERNAME`不唯一是一个坏主意。但是在我们国家有几个网站的用户名不是唯一的（或者在某些情况下用户名甚至是可预测的）。例如，我在某个银行分行有一个帐户，其分行代码是`032`，我的名字是 John Smith，那么访问他们的电子银行的用户名将是`032JOHNS`，该分行中可能有多个 John Smith 最终具有相同的用户名。要登录他们的电子银行系统，我只需要提供这个用户名和我的密码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:05:44.190

如果你真的必须有非唯一的用户名，你可以用用户名遍历所有用户并检查每个用户的密码，即如果 3 ppl 有用户名 foobar，并且第一个密码检查失败，检查第二个等等。

（注意：我**强烈建议不要这样做**。如果用户名不能唯一，请使用电子邮件地址作为唯一标识符 / 用于登录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:06:16.150

如果用户名不是唯一的，那么**唯一标识用户的**是什么？

它必须是用户在登录时提供的东西，并且不能是用户名和密码的组合，因为不能保证两个用户不会选择相同的密码。

因此，如果用户名不是唯一的，那么其他东西必须是唯一的（或与用户名组合是唯一的）。例如，如果他们通过自定义域进行某种多租户，那么它将是域。

但是您**不能拥有非唯一的用户名并期望密码来确定正确的用户**。

（旁注，你*可以*，但你*不应该*——我碰巧能够使用**相同的电子邮件地址登录****两个**不同的亚马逊账户，但密码不同。我想知道如果我更改一个密码以匹配另一个密码会发生什么，但我太看重我的帐户，无法尝试。）

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T06:09:51.253

而不是这个：

```
$getsalt=$this->db->query("SELECT PASSWORD_SALT FROM USER_INFOS WHERE USER_NNAME=?",array($username))->row();
        $salt=$getsalt->PASSWORD_SALT;
        $password=sha1($salt.$password);

        $query=$this->db->query("SELECT * FROM USER_INFOS WHERE STATUS='Y' AND USER_NNAME=? AND USER_PASSWORD=?",array($username,$password)); 
```

使用这样的东西：

```
$query=$this->db->query("SELECT * FROM USER_INFOS WHERE STATUS='Y' AND USER_NNAME=? AND USER_PASSWORD=SHA1(CONCAT(PASSWORD_SALT,?))",array($username,$password)); 
```**

# java - 哈希表的内存参考

> ID：13171754
> 
> 赞同：2
> 
> 时间：2012-11-01T06:01:36.533
> 
> 标签：java

我有一个关于哈希表的小问题。假设我有一个字符串作为键，一个复杂对象作为存储在哈希表中的值。

现在我使用“get”从同一个哈希表中获取对象。现在，如果我存储从哈希表中获取的对象的引用的变量设置为 null，这不会影响哈希表中对象的内存。如何销毁哈希表中的对象？

一种方法可能是将 null 作为我给定键的值？还有其他更优雅的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:12:30.900

类实例 (=objects) 保留在内存中，对实例的引用存储在变量和 HashMap 值中。当没有对实例的引用时，Java VM 垃圾收集器可能会在某个时候释放内存，如果感觉如此的话。

当它所在的变量获得新值（另一个实例或 null）或超出范围时，引用就会消失。因此，如果您想删除 Map 值中的实例，您可以从 map 中删除其键，或者保留键但将值设置为 null。通常您删除，在 Map 中保留空值通常不是您想要做的事情，除非您必须这样做。如果没有其他引用，则实例有资格进行垃圾收集。

注意与 C++ 的区别：在 Java 中没有用于清理的析构函数（不保证永远调用 finalize 方法）。如果 Java 类有文件或网络连接之类的资源需要在完成时关闭，那么该类需要一个 close 方法，程序员负责显式调用它（通常在 try...finally 中阻塞，即使没有捕获)，当他完成对象时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:03:06.863

首先，使用`Map`代替`Hashtable`. 其次，您可以使用该[`Map#remove`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#remove(java.lang.Object))方法从内存中*释放*密钥的引用。请注意，您将从中删除键/值对，`Map`但对象将一直存在，直到 GC 决定收集它。

关于`Map`vs的解释`Hashtable`：

*   [HashMap 和 Hashtable 的区别？](https://stackoverflow.com/q/40471/1065197)

请注意，两者`HashMap`都是`Hashtable`接口的实现`Map`。

# ios - 从弹出控制器ios获取按钮控制

> ID：13171761
> 
> 赞同：0
> 
> 时间：2012-11-01T06:02:00.873
> 
> 标签：ios, uiview, properties, uibutton, uipopovercontroller

我的 iOS 应用在单个视图控制器上有 13 个按钮。单击它们中的每一个都会打开一个popovercontroller。不是一下子。苹果规则，我知道。您单击您选择的一个，然后将其关闭并为其他按钮执行此操作并继续。现在我有一个代表告诉我我在弹出窗口上选择了什么选项。像 Button1 popovervalues-( 1,2,3) Button2 popovervalues- (a,b,c)。现在委托中的方法告诉我选择了 1 或选择了 a。但它没有告诉我 Button1 被点击或 button2。我想知道如何获取按钮控件名称/或现在仅获取按钮就足够了。是否有任何属性可以告诉我单击了哪个按钮？我看到了 popovercontroller 的 contentviewcontroller、inputview、navigationcontroller 等。但都没有帮助我找到被点击的按钮。我想知道，因为如果在 Button1 的弹出窗口中选择了选项 1，那么我必须禁用 Button10。因此，知道选择了哪个按钮的哪个选项将简化用户选择（实际上是一个要求）。如果需要更多信息，请告诉我。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:52:00.413

您是否通过界面生成器连接按钮？如果是这样，那么它应该通过 IBAction 方法连接。

```
- (IBAction)someAction:(id)sender {
   UIButton *buttonPressed = (UIButton *)sender;
   //Now you have the button you have pressed
} 
```

如果您以编程方式制作按钮并将目标添加到其中请注意选择器位中 someAction 之后的冒号

```
[myButton addTarget:self action:@selector(someAction:) forControlEvents:UIControlEventTouchDragInside]; 
```

您可以使用与之前的 IBAction 相同的方法，或者您可以制作自己的 void 方法，无论哪种方式，发送者都是按钮，只需转换它然后使用它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:55:13.770

使用按钮的标签值。设置一个数字并在 action 方法中检查它：

```
- (IBAction)buttonAction:(id)sender {
   UIButton *buttonPressed = (UIButton *)sender;
   if(buttonPressed.tag == 1) {
        //Do this
   }
} 
```

# tablesorter - jquery tablesorter textExtraction

> ID：13171765
> 
> 赞同：0
> 
> 时间：2012-11-01T06:02:13.363
> 
> 标签：tablesorter

我正在使用 jquery tablesorter 插件

网页在这里： [http ://redbluffbullsale.com/bulls-listings](http://redbluffbullsale.com/bulls-listings)

我有一个复杂的 textExtraction 函数定义如下：

```
var jgExtraction = function(node) {
  if (node.childNodes[0].length > 0) {
    return node.childNodes[0].innerHTML;
  } else {
    return node.innerHTML;
  }
}

jQuery('#bullsTable').tablesorter({
  textExtraction: 'jgExtraction',
  headers: {
    0 : {sorter: false},
    13: {sorter: 'digit'},
    14: {sorter: 'digit'}
  }
}); 
```

在一些列（13 和 14）中，数据可以采用以下格式：

数字（例如：0.9、2.3、4、-2、-2.5 等）文本（字母 I）加数字（I+2.3、I-0.9、I+1.4 等）加号加数字（+2.4、+ 3.1、+0.9 等）

在服务器上，我正在控制列数据，以便如果它是数字或负数，则将其转储到 <td> 中，但如果列数据具有 I+、I- 或 +，则该列具有I+、I- 或 + 用 <span> 标签与数字分开，例如：

```
<td>-1.4</td>
<td>I+<span>1.6</span></td>
<td>I-<span>3.4</span></td>
<td>+<span>2.2</span></td> 
```

如果没有 span 子节点，我的 jgExtraction 应该返回 innerHTML，如果存在则返回 childNode[0] (span) 的内容。排序不适用于具有 I+ 或 I- 的列。您可以通过查看上面的 URL 来了解问题所在。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:47:18.723

上面的代码有几个问题。

*   文本提取函数的名称不应添加为字符串

    ```
    textExtraction: 'jgExtraction', // wrong
    textExtraction: jgExtraction,   // correct 
    ```

*   在`jgExtraction`函数内，检查子节点的长度，而不是第一项的长度

    ```
    if (node.childNodes[0].length > 0) { // wrong 
    if (node.childNodes.length > 1) {    // correct 
    ```

*   `undefined`检查其 innerHTML 时将返回一个文本节点。无论如何，它应该以跨度为目标：

    ```
    return node.childNodes[0].innerHTML // wrong
    return node.childNodes[1].innerHTML; // target the span 
    ```

这是修改后的代码和[演示](http://jsfiddle.net/Mottie/eY8uH/278/)：

```
var jgExtraction = function(node) {
    if (node.childNodes.length > 1) {
        return node.childNodes[1].innerHTML;
    } else {
        return node.innerHTML;
    }
} 
```

如果您有兴趣，我有一个[tablesorter 的分支，](http://mottie.github.com/tablesorter/docs/index.html)它允许您将空表格单元格排序到顶部、底部或将它们视为具有零值（默认行为） - 请参阅[此演示](http://mottie.github.com/tablesorter/docs/example-option-sort-empty.html)

# c# - Debug.Writeline 的输出窗口中偶尔缺少回车符

> ID：13171771
> 
> 赞同：2
> 
> 时间：2012-11-01T06:02:47.953
> 
> 标签：c#, visual-studio-2010

使用 debug.writeline，*有时*我会在调试输出屏幕中将四五行串在一起。就像它决定不输出 \r\n 几行。然后，它又开始做对了。

每次确实发生时，它都会在程序中的同一位置生成，并且始终是 Debug.Writeline 语句（不是 Debug.Write）。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T20:15:27.097

我找到了答案。底线：您希望 Debug.WriteLine 显示整行并在末尾附加 CR 的字符串中不要有空值。

# sql - 在 Big Query 中查询多个表

> ID：13171776
> 
> 赞同：18
> 
> 时间：2012-11-01T06:02:57.030
> 
> 标签：sql, google-bigquery

由于无法在 BigQuery 中更新表中的数据，并且仅支持追加机制，因此我决定每月创建新表。因此，假设 2012 年的表格将是 ( `tbl_012012`, `tbl_022012`, `tbl_032012`,... `tbl_122012`)。每条记录将与日期一起存储`timestamp`为字符串。

现在，如果我的应用程序想要获取从 2012 年 1 月 ( `tbl_012012`) 到 2012 年 3 月 ( `tbl_032012`) 的记录，BigQuery API 将通过单个 SQL 范围查询自动遍历所需的表，还是我必须使用额外的应用程序代码编写多个 SQL 查询来检索每个查询结果然后将它们聚合在一起？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-02-19T06:10:22.410

您还可以使用表通配符函数。这是StandardSQL[文档](https://cloud.google.com/bigquery/docs/reference/standard-sql/wildcard-table-reference)中的一个示例：

```
SELECT 
  name
FROM 
  mydata.people
WHERE 
  age >= 35
  AND
  (_TABLE_SUFFIX BETWEEN '20140325' AND '20140327') 
```

这是 LegacySQL ( [docs](https://cloud.google.com/bigquery/query-reference#tablewildcardfunctions) ) 的一个类似示例。

```
SELECT 
  name
FROM 
  (TABLE_DATE_RANGE([mydata.people], 
                TIMESTAMP('2014-03-25'), 
                TIMESTAMP('2014-03-27'))) 
WHERE 
  age >= 35 
```

这将查询表：

*   mydata.people20140325
*   mydata.people20140326
*   mydata.people20140327

[docs](https://cloud.google.com/bigquery/docs/reference/standard-sql/wildcard-table-reference)上还有其他一些选项。我建议检查一下。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-01T06:15:29.213

一个 SQL 查询可以引用多个表。只需在 FROM 子句中用逗号分隔每个表，即可查询所有提到的表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-28T18:03:31.187

这是一个演示多表选择示例的片段：

```
SELECT trafficSource.medium AS Traffic_Source, COUNT(trafficSource.medium) AS Counts_Source
FROM [608XXXXX.ga_sessions_20131008],
[608XXXXX.ga_sessions_20131009],
[608XXXXX.ga_sessions_20131010],
[608XXXXX.ga_sessions_20131011],
[608XXXXX.ga_sessions_20131012],
[608XXXXX.ga_sessions_20131013],
[608XXXXX.ga_sessions_20131014],
[608XXXXX.ga_sessions_20131015],
GROUP BY Traffic_Source
ORDER BY Counts_Source DESC 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-07T22:09:44.707

2017年更新：

使用 BigQuery #standardSQL - 您可以使用标准`UNION ALL`来遍历多个表，也可以使用 a`*`来匹配共享相同前缀的所有表。使用`*`匹配器时，您还可以访问元列`_TABLE_SUFFIX`- 以了解行来自哪个表。

```
SELECT * FROM Roster
UNION ALL
SELECT * FROM TeamMascot 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-28T20:27:30.133

# 标准 SQL。

使用通配符。

```
SELECT trafficSource.medium AS Traffic_Source, COUNT(trafficSource.medium) AS Counts_Source
FROM `608XXXXX.ga_sessions_201310*`
GROUP BY Traffic_Source
ORDER BY Counts_Source DESC 
```

# regex - R字符串采购

> ID：13171778
> 
> 赞同：2
> 
> 时间：2012-11-01T06:03:01.273
> 
> 标签：regex, r

希望这不应该太复杂......但我有以下字符串`x`，并希望它以编程方式作为一个函数获取，以便我可以输入

```
HW.R() 
```

生成 100 个随机法线....即我需要执行哪些操作`x`才能发生这种情况？

下面是生成的代码`x`

```
require(RCurl)
x <- base64Decode("SFcuUiA8LSBmdW5jdGlvbigpewogIHJub3JtKDEwMCkKfQ==\n")
x
[1] "HW.R <- function(){\n  rnorm(100)\n}" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T06:08:32.093

正如您所怀疑的，它一点也不复杂。这应该可以完成工作：

```
x <- "HW.R <- function(){\n  rnorm(100)\n}"
eval(parse(text = x))

HW.R
# function(){
#   rnorm(100)
# } 
```

或者，您可以使用`source()`，只要您首先“包装”`x`在 a 中`textConnection`：

```
source(file = textConnection(x))
length(HW.R())
# [1] 100 
```

# asp.net-mvc - 将字典列表传递给 asp.net mvc 控制器

> ID：13171783
> 
> 赞同：0
> 
> 时间：2012-11-01T06:03:20.693
> 
> 标签：asp.net-mvc, parameter-passing

所以我有一个包含字典属性列表的 ViewModel

```
public class ViewModel
{
    public List<Dictionary<int, bool>> Columns { get; set; }
} 
```

我试图从视图中取回这个模型，并且它一直返回带有空项目的列表。

```
@Html.Hidden(String.Format("Columns[{0}][{1}].Key", i, firstItem.Id), firstItem.Id)
@Html.CheckBox(String.Format("Columns[{0}][{1}].Value", i, firstItem.Id), Model.Columns[i][firstItem.Id]) 
```

这不起作用。

```
@Html.CheckBoxFor(m => m.Columns[i][firstItem.Id]) 
```

这也行不通。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:19:49.163

您的 ViewModel 非常复杂，因为它包含嵌套集合，我认为无法使用默认模型绑定器将输入值绑定到模型。您应该创建自定义模型绑定器，我尝试实现自定义模型绑定器，这是我的实现 ListDictionary 模型绑定器：

**自定义模型绑定器**

```
 public class ListDictionaryModelBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var resultList = new List<Dictionary<int, bool>>();
            var forms = controllerContext.HttpContext.Request.Form;
            var regex = new Regex(@"(true,)?false");
            var result =
                forms.AllKeys.Select(x => new {key = x, value = forms[x]}).Where(x => x.key.Contains("Columns")).ToList();
            result.ForEach(x =>
                               {
                                   var matches = regex.Matches(x.value);
                                   var dictionary = new Dictionary<int, bool>();
                                   for (var i = 0; i < matches.Count; i++)
                                   {
                                       var value = matches[i].ToString() == "true,false" ? true : false;
                                       dictionary.Add(i, value);
                                   }
                                   resultList.Add(dictionary);
                               });
            return resultList;
        }
    } 
```

**使用示例**

控制器：

```
 public ActionResult Index()
        {
            //example data
            var viewModel = new ViewModel
                                      {
                                          Columns = new List<Dictionary<int, bool>>
                                                        {
                                                            new Dictionary<int, bool> {{1, false}, {2, false}},
                                                            new Dictionary<int, bool> {{1, false}, {2, false}}
                                                        }
                                      };

            return View(viewModel);
        }

        [HttpPost]
        public ActionResult Index(ViewModel viewModel)
        {
            //viewModel - contains values of user input
            return View();
        } 
```

索引视图：

```
@model RepositoryTestProject.ViewModels.ViewModel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>ViewModel</legend>

@Html.EditorFor(x => Model.Columns,"_ColumnEdit")

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

部分视图：（您应该在“/Views/Shared”中创建“EditorTemplates”文件夹并将部分模板放入文件夹）

_ColumnEdit局部视图：

```
@model List<Dictionary<int,bool>>

@for(int i =0; i < Model.Count();i++)
{
    @Html.EditorFor(x=>Model[i],"_DictEdit")
} 
```

_DictEdit 局部视图：

```
@model Dictionary<int, bool>

@for(int i =0; i < Model.Count();i++)
{
    @Html.CheckBoxFor(x=>Model.ElementAt(i).Value)
} 
```

需要在 global.asax 中注册您的模型绑定器

```
ModelBinders.Binders.Add(typeof(List<Dictionary<int,bool>>), new ListDictionaryModelBinder()); 
```

最后，您可以像这样在控制器中获取您的值：

![在此处输入图像描述](../Images/370f2dfef81d253b030e009dfa790da4.png)

# mongodb - 最小的 mongodb 数据文件大小是多少

> ID：13171787
> 
> 赞同：3
> 
> 时间：2012-11-01T06:03:46.620
> 
> 标签：mongodb

使用

```
mongod --bind_ip 127.0.0.1 -port 5432 --smallfiles --dbpath . --oplogSize 16 
```

结果每个数据库使用 64Megs。添加

```
--nojournal 
```

将大小减小到 32Megs，但文档说这“在某些情况下会缩短启动时间，但会在正常操作期间导致显着的性能损失。”

这些真的是 mongoDB 的最小起始数据库大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:36:46.870

MongoDB 通常会预先分配大约 2/3GB：[http](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-DatafilePreallocation) ://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-DatafilePreallocation ，除非你使用类似`smallfiles`或`nojournal`。

基本上`smallfiles`切断了`0`通常存在于分配新数据文件中的字节填充文件的开销，这对性能非常有用，但对空间的破坏性很大。

这对于小型数据库确实是最好的，您可能会在使用这种方法的高写入数据库中发现性能问题。

## 编辑

意识到我实际上并没有回答这个问题：P，是的`--smallfiles`，`--nojournal`我相信这是它可以得到的最小的。

# php - print_thumbnail 在 wordpress 中表现不佳

> ID：13171788
> 
> 赞同：0
> 
> 时间：2012-11-01T06:03:57.343
> 
> 标签：php, html, css, wordpress

```
print_thumbnail(
 $arr[$i]["thumb_small"], $arr[$i]["use_timthumb"], 
 $arr[$i]["fulltitle"] ,$width_small,$height_small
); 
```

它在图像标签中返回

```
src="/domains/web2760/web//wp-content/uploads/2012/01/Gates-124086_132x58.jpg" 
```

代替

```
src="/wp-content/uploads/2012/01/Gates-124086_132x58.jpg" 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:21:20.840

不要使用 print_thumbnail，这是一个内部 WP 功能，你必须使用 get_the_post_thumbnail：

[http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail](http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail)

或者如果你在循环中，你可以使用 the_post_thumbnail：

[http://codex.wordpress.org/Function_Reference/the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

# java - 给定纬度和经度坐标，如何打印两个城市之间的距离？

> ID：13171791
> 
> 赞同：1
> 
> 时间：2012-11-01T06:04:09.833
> 
> 标签：java, eclipse, distance, latitude-longitude

我已经像这样开始了我的代码：

```
 public static void main(String[] args) {

//Intro 
    System.out.print("This program calculates the distance between two cities,     given their respective latitude and longitude points.");
    System.out.println();

//Get values for Latitude and Longitude
Scanner console = new Scanner(System.in);
    double lat1 = getCoordinates(" latitude 1: ", console); // Input lat1
    double long1 = getCoordinates(" longitude 1: ", console); // Input long1
    double lat2 = getCoordinates(" latitude 2: ", console); // Input lat2
    double long2 = getCoordinates(" longitude 2: ", console); // Input long2

public static double getCoordinates(String message, Scanner scan)
    {   
    System.out.print("Please enter" + message);
    int degrees = scan.nextInt();
    int minutes = scan.nextInt();
    return Math.toRadians(degrees + (minutes / 60.0));
    }

//Calculate Distance
public static double finalAnswer(double lat1, double long1, double lat2, double long2) {
double radiusOfEarth = 6372.795; //radius of Earth in km
double distance = Math.acos(Math.sin(lat1)*Math.sin(lat2) + 
                  Math.cos(lat1)*Math.cos(lat2) *
                  Math.cos(long2-long1)) * radiusOfEarth;

return distance;
System.out.print("The distance between the two cities is approximately " + distance + "km");

}
} 
```

我需要能够输入每个纬度和经度点的度数和分钟数（度数、分钟数）。但是，当我尝试在代码的最后一行打印“距离”时出现编译错误。此外，Eclipse 告诉我没有使用 lat1、long1、lat2 和 long2（“获取纬度和经度的值”部分）？有人可以帮我打印距离吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:18:10.690

在您的代码中：

```
..
return distance;
System.out.print("The distance between the two cities is approximately " 
    + distance + "km");
.. 
```

将其更改为：

```
..
System.out.print("The distance between the two cities is approximately " 
    + distance + "km");
return distance;
.. 
```

这是用Javascript 实现的用于计算距离的[Haversine 公式。](http://www.movable-type.co.uk/scripts/latlong.html)（应该很容易翻译成 Java。）

[计算“大圆”距离的公式](http://williams.best.vwh.net/avform.htm#Dist)：

> 坐标为 {lat1,lon1} 和 {lat2,lon2} 的两点之间的大圆距离 d 由下式给出：
> 
> d=acos(sin(lat1)*sin(lat2)+cos(lat1)*cos(lat2)*cos(lon1-lon2))
> 
> 一个数学上等价的公式是：
> 
> d=2*asin(sqrt((sin((lat1-lat2)/2))^2 + cos(lat1) *cos(lat2)* (sin((lon1-lon2)/2))^2))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:27:02.640

你能请这些链接找出两个纬度和经度之间的距离吗

[http://www.codeproject.com/Articles/12269/Distance-between-locations-using-latitude-and-long](http://www.codeproject.com/Articles/12269/Distance-between-locations-using-latitude-and-long)

否则还有另一个想法，您可以尝试使用谷歌地图API通过使用纬度和经度找出两个城市的距离

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-19T14:06:48.963

以下代码可以计算给定经度和纬度的地方之间的距离。它使用haversine公式

```
import java.util.Scanner;
class haversine {
        double long1;
        double lat1;
        double long2;
        double lat2;
        haversine (Double long1, Double lat1, Double long2, Double lat2) {
                this.long1 = long1;
                this.lat1 = lat1;
                this.long2 = long2;
                this.lat2 = lat2;
        }
        double execute() {
                return Math.pow(Math.sin((lat2 - lat1)/2) ,2) + Math.cos(long1) * Math.cos(long2) * Math.pow(Math.sin((long2 - long1)/2) ,2);
        }
        double disCalc (Double exe) {
                Double radius_of_earth = 6378.1;
                return 2 * radius_of_earth * Math.asin(Math.pow(exe, 2));
        }

}
class test28 {
        public static void main(String[] args) {
                Scanner scan = new Scanner(System.in);
                System.out.println("longitude and latitude of home : ");
                double long1 = scan.nextDouble();
                double lat1 = scan.nextDouble();
                System.out.println("longitude and latitude of travel destination : ");
                double long2 = scan.nextDouble();
                double lat2 = scan.nextDouble();
                haversine obj = new haversine(long1, lat1, long2, lat2);
                double exe = obj.execute();
                double distance = obj.disCalc(exe);
                System.out.println("The Distance is : " + distance);
                scan.close();

        }
} 
```

# javascript - 浏览器的默认脚本最大运行时间

> ID：13171793
> 
> 赞同：0
> 
> 时间：2012-11-01T06:04:24.170
> 
> 标签：javascript, jquery, browser

IE,Chrome,firefox的默认脚本运行时间是多少？通过javascript代码增加脚本运行时间的任何方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:56:15.840

Firefox 有一个禁用“太长脚本”的设置

IE不是时间问题，而是指令数量的问题。（至少 IE 6 和 7）

铬我不知道。

Opera 不会阻止脚本——它会自动运行。

`window.setTimeout`解决方案是分解你的脚本，以便看起来在每次迭代左右以某种方法运行。

如果您发布阻塞时间过长的方法，我们也许可以提供帮助。

# java - 将java中的文件从本地xml文件解析为新文本文件时出现ArrayOutOfBoundException

> ID：13171795
> 
> 赞同：1
> 
> 时间：2012-11-01T06:04:57.373
> 
> 标签：java, xml, parsing, exception, indexoutofboundsexception

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
    at com.demo.parsing.MainActivity.main(MainActivity.java:47) 
```

> Writer out = new FileWriter(new File(args[0])); （第 47 行）

我是 JAVA 的新手。我一直在尝试这段代码，但找不到这个`arrayoutofboundexception`。在这段代码中，我试图从本地 XML 文件中解析一些数据并将其写入一个新文件中。文件已创建但没有文本并出现上述异常

```
package com.demo.parsing;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.Writer;
import java.util.LinkedList;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.jsoup.Jsoup;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;
public class MainActivity {

//private static OutputStreamWriter out;

public static void main(String[] args) throws FileNotFoundException {
    FileInputStream f0 = new FileInputStream("/home/kailash/workspace/paarsing/pustaka-feed.xml");

    try {
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

        Document feed = builder.parse(f0);

        NodeList items = feed.getElementsByTagName("item");

        List<String> urls = new LinkedList<String>();

        for (int i = 0; i < items.getLength(); i++) {
            Element item = (Element) items.item(i);
            Element description = (Element) item.getElementsByTagName(
                    "description").item(0);
            urls.addAll(getImages(builder,    description.getTextContent()));
        }

 Writer out = new FileWriter(new File(args[0]));

        for (String url : urls) {
            out.write(url + "\n");
        }

        out.close();

    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

private static List<String> getImages(DocumentBuilder builder, String content) throws SAXException, IOException {
    List<String> urls = new LinkedList<String>();

    for (org.jsoup.nodes.Element img :   Jsoup.parse(content).getElementsByTag("img")) {
        urls.add(img.attributes().get("src"));
    }

    return urls;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:22:12.283

正如您所说，您是新手并且不知道 ArrayIndexOutOfBoundsException 是什么，最好阅读有关[ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)的信息，因为这是您将来将面临的最常见的异常之一。

现在关于您的问题，它在第 47 行抛出 ArrayIndexOutOfBoundsException

正如你所指出的，`Line 47`是

```
 Writer out = new FileWriter(new File(args[0])); 
```

仔细查看异常跟踪

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
    at com.demo.parsing.MainActivity.main(MainActivity.java:47) 
```

痕迹告诉你

1.  异常：ArrayIndexOutOfBoundsException
2.  发生此异常的索引：0
3.  抛出异常的行：MainActivity.java：47（这就是为什么我问第 47 行是什么）

^告诉你上面的信息，因为你是一个新手，这个描述可能在不久的将来对你有帮助。

所以现在回到你的陈述

```
Writer out = new FileWriter(new File(args[0])); 
```

`args[0]`，它代表命令行参数（见主方法定义）

当您尝试运行应用程序时，您是否传递了任何命令行参数？

传递命令行参数

通过 DOS：`java nameofclassfile arg1 arg2 ......`

通过 Eclipse ：`right click java file -> run as-run configurations, in the dialog navigate to Arguments tab and enter your command line argument under the Program Arguments text Box and hit run`

# php - 在 PHP 中删除 HTML 标签

> ID：13171796
> 
> 赞同：-3
> 
> 时间：2012-11-01T06:05:00.610
> 
> 标签：php

> **可能重复：**
> [去除所有 HTML 标签，允许的除外](https://stackoverflow.com/questions/6247035/strip-all-html-tags-except-allowed)

我是 PHP 新手

这是我的代码

```
<p>The filetype you are attempting to upload is not allowed.</p> 
```

预期输出：

```
The filetype you are attempting to upload is not allowed. 
```

如何删除标签`<p>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:06:14.053

用于`strip_tags()`删除 HTML 标签

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

```
echo strip_tags("<p>The filetype you are attempting to upload is not allowed.</p>"); 
```

会给你`The filetype you are attempting to upload is not allowed.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:06:02.603

用于`strip_tags()`从字符串中去除 html 标签

例子

```
$strip = '<p>The filetype you are attempting to upload is not allowed.</p>';
echo strip_tags($strip); 
```

[参考](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T06:07:03.347

```
$string= '<p>The filetype you are attempting to upload is not allowed.</p>';
$new_string = strip_tags($string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T06:28:54.307

```
$str= '<p>The filetype you are attempting to upload is not allowed.</p>';
$new_string = strip_tags($str); 
```

# iphone - NSNotification 中未更新文本字段

> ID：13171805
> 
> 赞同：1
> 
> 时间：2012-11-01T06:05:57.750
> 
> 标签：iphone, ios, nsnotificationcenter, nsnotification

我正在做一个简单的教程，`NSNotification`并在正确执行它时遇到一些问题。当我单击第一个视图上的按钮时，第二个视图中的文本字段没有得到更新。当我通过在 中放置 a`NSLog`进行调试时`receiveNotification`，没有响应。不知道为什么`receiveNotification`没有被调用。

代码如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{

}
-(IBAction)one:(id)sender;
-(IBAction)two:(id)sender;
-(IBAction)secondview:(id)sender;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "SecondViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)one:(id)sender{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"Test1" object:self];
    NSLog(@"Hello");
}
-(IBAction)two:(id)sender{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"Test2" object:self];
     NSLog(@"Hello");
}
-(IBAction)secondview:(id)sender{
    SecondViewController *secondview = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [self presentViewController:secondview animated:YES completion:nil];
}

@end 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController{
    IBOutlet UITextField *counterOneText;
    IBOutlet UITextField *counterTwoText;
    int counterOne;
    int counterTwo;
}

-(IBAction)back:(id)sender;
@end

SecondViewController.m

#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        counterOne = 0;
        counterTwo = 0;

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveNotification) name:@"Test1" object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveNotification) name:@"Test2" object:nil];
    }
    return self;
}

-(void)receiveNotification:(NSNotification *)notification{
    if([[notification name] isEqualToString:@"Test1"])  {
        counterOne++;
        counterOneText.text = [NSString stringWithFormat:@"%d",counterOne];
        NSLog(@"%@",counterOneText.text);
        NSLog(@"Hello");
    }else
    {
        counterTwo++;
        counterTwoText.text = [NSString stringWithFormat:@"%d",counterTwo];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)back:(id)sender{
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:58:17.540

`receiveNotification`没有被调用，因为你`SecondViewController`从未实例化过。对象不存在时无法调用。如果您按下`secondView`, `back`，然后单击`one`或`two`，则会触发 receiveNotification。

**编辑：** 我复制并粘贴了你的代码来测试它，我得到了你想要它做的大部分事情。您仍然必须先按`secondview`，然后再按`back`。

在 ViewController.m 中

```
@interface ViewController (){
    SecondViewController *secondview;
}

@end

@implementation ViewController

-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
    self = [super initWithNibName: nibNameOrNil bundle:nibBundleOrNil];
    if(self){
        secondview = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)one:(id)sender{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"Test1" object:self];
}
-(IBAction)two:(id)sender{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"Test2" object:self];
}
-(IBAction)secondview:(id)sender{
    [self presentViewController:secondview animated:YES completion:nil];
} 
```

在 SecondViewController.h

```
@interface SecondViewController : UIViewController{
    int counterOne;
    int counterTwo;
}

@property (nonatomic,retain)UITextField *counterOneText;

@property (nonatomic,retain)UITextField *counterTwoText;

-(IBAction)back:(id)sender;

@end 
```

在 SecondViewController.m 中

@interface SecondViewController ()

@结尾

```
@implementation SecondViewController
@synthesize counterOneText, counterTwoText;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        counterOne = 0;
        counterTwo = 0;

        self.counterOneText = [[UITextField alloc]initWithFrame:CGRectMake(100, 50, 150, 30)];
        self.counterOneText.borderStyle = UITextBorderStyleRoundedRect;
        self.counterOneText.text = [NSString stringWithFormat:@"%@", [NSNumber numberWithInt:counterOne]];

        self.counterTwoText = [[UITextField alloc]initWithFrame:CGRectMake(100, 100, 150, 30)];
        self.counterTwoText.borderStyle = UITextBorderStyleRoundedRect;
        self.counterTwoText.text = [NSString stringWithFormat:@"%@", [NSNumber numberWithInt:counterTwo]];

        //self.counterOneText.text = [NSString stringWithFormat:@"%d",counterOne];
        //self.counterTwoText.text = [NSString stringWithFormat:@"%d",counterTwo];

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveNotification:) name:@"Test1" object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveNotification:) name:@"Test2" object:nil];
    }
    return self;
}

-(void)receiveNotification:(NSNotification *)notification{
    if([[notification name] isEqualToString:@"Test1"])  {
        counterOne++;
        NSLog(@"counterOne: %d", counterOne);
        counterOneText.text = [NSString stringWithFormat:@"%@", [NSNumber numberWithInt:counterOne]];

        NSLog(@"counterOneText.text: %@",counterOneText.text);
        NSLog(@"Test1");
    }else
    {
        counterTwo++;
        NSLog(@"counterTwo: %d", counterTwo);
        counterTwoText.text = [NSString stringWithFormat:@"%@",[NSNumber numberWithInt:counterTwo]];

        NSLog(@"counterTwoText.text: %@",counterTwoText.text);
        NSLog(@"Test2");

    }

}

- (void)viewDidLoad
{
    [self.view addSubview:self.counterOneText];
    [self.view addSubview:self.counterTwoText];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)back:(id)sender{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:23:53.873

不是`@selector(receiveNotification)`，应该是`@selector(receiveNotification:)`

# android - Android蓝牙程序崩溃

> ID：13171817
> 
> 赞同：1
> 
> 时间：2012-11-01T06:07:07.403
> 
> 标签：android, crash, bluetooth

我在[这里](http://project-greengiant.googlecode.com/svn/trunk/Blog/Android%20Arduino%20Bluetooth/Android/AndroidArduinoBluetooth/src/Android/Arduino/Bluetooth/BluetoothTest.java "这里")使用另一个网站的代码。

我的问题是......当我使用我的 Android 设备上的任何按钮时，应用程序崩溃并说：“不幸的是，蓝牙已停止。” 当我编译时没有错误。任何有关如何诊断此问题的信息将不胜感激。蓝牙应用程序更难诊断，因为您无法在模拟器上进行模拟！

谢谢你的帮助！

```
package Android.Arduino.Bluetooth;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.TextView;
import android.widget.EditText;  
import android.widget.Button;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;

public class BluetoothTest extends Activity
{
    TextView myLabel;
    EditText myTextbox;
    BluetoothAdapter mBluetoothAdapter;
    BluetoothSocket mmSocket;
    BluetoothDevice mmDevice;
    OutputStream mmOutputStream;
    InputStream mmInputStream;
    Thread workerThread;
    byte[] readBuffer;
    int readBufferPosition;
    int counter;
    volatile boolean stopWorker;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button openButton = (Button)findViewById(R.id.open);
        Button sendButton = (Button)findViewById(R.id.send);
        Button closeButton = (Button)findViewById(R.id.close);
        myLabel = (TextView)findViewById(R.id.label);
        myTextbox = (EditText)findViewById(R.id.entry);

        //Open Button
        openButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                try 
                {
                    findBT();
                    openBT();
                }
                catch (IOException ex) { }
            }
        });

        //Send Button
        sendButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                try 
                {
                    sendData();
                }
                catch (IOException ex) { }
            }
        });

        //Close button
        closeButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                try 
                {
                    closeBT();
                }
                catch (IOException ex) { }
            }
        });
    }

    void findBT()
    {
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if(mBluetoothAdapter == null)
        {
            myLabel.setText("No bluetooth adapter available");
        }

        if(!mBluetoothAdapter.isEnabled())
        {
            Intent enableBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBluetooth, 0);
        }

        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
        if(pairedDevices.size() > 0)
        {
            for(BluetoothDevice device : pairedDevices)
            {
                if(device.getName().equals("MattsBlueTooth")) 
                {
                    mmDevice = device;
                    break;
                }
            }
        }
        myLabel.setText("Bluetooth Device Found");
    }

    void openBT() throws IOException
    {
        UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb"); //Standard SerialPortService ID
        mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);        
        mmSocket.connect();
        mmOutputStream = mmSocket.getOutputStream();
        mmInputStream = mmSocket.getInputStream();

        beginListenForData();

        myLabel.setText("Bluetooth Opened");
    }

    void beginListenForData()
    {
        final Handler handler = new Handler(); 
        final byte delimiter = 10; //This is the ASCII code for a newline character

        stopWorker = false;
        readBufferPosition = 0;
        readBuffer = new byte[1024];
        workerThread = new Thread(new Runnable()
        {
            public void run()
            {                
               while(!Thread.currentThread().isInterrupted() && !stopWorker)
               {
                    try 
                    {
                        int bytesAvailable = mmInputStream.available();                        
                        if(bytesAvailable > 0)
                        {
                            byte[] packetBytes = new byte[bytesAvailable];
                            mmInputStream.read(packetBytes);
                            for(int i=0;i<bytesAvailable;i++)
                            {
                                byte b = packetBytes[i];
                                if(b == delimiter)
                                {
                                    byte[] encodedBytes = new byte[readBufferPosition];
                                    System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);
                                    final String data = new String(encodedBytes, "US-ASCII");
                                    readBufferPosition = 0;

                                    handler.post(new Runnable()
                                    {
                                        public void run()
                                        {
                                            myLabel.setText(data);
                                        }
                                    });
                                }
                                else
                                {
                                    readBuffer[readBufferPosition++] = b;
                                }
                            }
                        }
                    } 
                    catch (IOException ex) 
                    {
                        stopWorker = true;
                    }
               }
            }
        });

        workerThread.start();
    }

    void sendData() throws IOException
    {
        String msg = myTextbox.getText().toString();
        msg += "\n";
        mmOutputStream.write(msg.getBytes());
        myLabel.setText("Data Sent");
    }

    void closeBT() throws IOException
    {
        stopWorker = true;
        mmOutputStream.close();
        mmInputStream.close();
        mmSocket.close();
        myLabel.setText("Bluetooth Closed");
    }
} 
```

# android - AndEngine - 滚动视差背景

> ID：13171818
> 
> 赞同：1
> 
> 时间：2012-11-01T06:07:19.777
> 
> 标签：android, andengine

我正在`Android`使用`AndEngine`. 我在 menuScene 中有一个 ParallaxBackground，您可以在其中滚动菜单项，直到找到您想要的并单击它。我希望 ParallaxBackground 中的某些视差实体在滚动菜单项时以不同的速度滚动（以获得很酷的效果；））；但不知道该怎么做。

ParallaxBackground 没有任何公共位置更改方法，ParallaxEntities 本身也没有。

我已经尝试寻找解决方案，但我发现最好的是一些其他人抱怨的用户制作的插件类不完整。

是否有使用常规`AndEngine`GLES2 执行此操作的实施方式（或“技巧”）？

谢谢

# android - 同一个ListView中有多个样式时ListView项样式会随机变化

> ID：13171820
> 
> 赞同：1
> 
> 时间：2012-11-01T06:07:28.813
> 
> 标签：android, android-layout, android-listview

我制作了一个聊天应用程序，其中聊天视图由许多行组成，`ListView`其中用户发送的消息以白色显示，朋友收到的消息以蓝色显示。

这种行为很好，但是当我在变得非常大（例如 30 行）后滚动列表时，颜色会变得混乱。我为每一行使用不同的布局，白行布局和蓝行布局。

当我在列表中上下滚动多次时，颜色会随机切换（即我的一些消息是蓝色的，而另一些是白色的，而另一端的一些消息（和我聊天的朋友）变成白色，而其他消息变成蓝色一种随机的方式。

我会给你一个关于所用代码的预览：

这是`getView`我的自定义适配器中扩展的方法`BaseAdapter`：

```
public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        final int pos = position;                           
        String from = messages.get(pos).getFrom();
        if (convertView == null) {
            holder = new ViewHolder();    
                     // If message is sent by me (the user)
            if(from.toString().toLowerCase().equals("me")){
               convertView = mInflater.inflate(R.layout.chat_msg_row2, null);
            }
                    // if message is sent by his friend (the other end user)
            else{
                convertView = mInflater.inflate(R.layout.chat_msg_row, null);           
            }

            holder.userName = (TextView) convertView.findViewById(R.id.msgusername);
            holder.userImage = (ImageView) convertView.findViewById(R.id.ppic);
                holder.date = (TextView) convertView.findViewById(R.id.msgdate);
            holder.text = (TextView) convertView.findViewById(R.id.msg);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }           
        holder.userName.setText( messages.get(pos).getFrom() );
        holder.text.setText( messages.get(pos).getText() );
        holder.date.setText( messages.get(pos).getDate() );         
        String img = messages.get(pos).getImage();          
        if(img.substring(0,4).equalsIgnoreCase("http") ){

            try{
                  ImageLoader imloader = new ImageLoader( ChatActivity.this );      
                          holder.userImage.setTag(img);
              imloader.DisplayImage( img, ChatActivity.this , holder.userImage );
                }
            catch(Exception e){
              e.printStackTrace();                      
            }
        }

        return convertView;
    }

    public long getItemId(int position){
         return 1;
    }

    public class ViewHolder{
        TextView userName;
        ImageView userImage;
        TextView text;
        TextView date;
    } 
```

`chat_msg_row2`除了使用的 Drawable 之外，这两个布局`chat_msg_row`是相同的，其中一个使用白色图像，另一个使用蓝色图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T11:32:25.900

我最近遇到了类似的问题。我所做的是删除

```
if (convertView == null) 
```

并返回视图本身。上面的代码所做的是：它检查当前列表中是否存在先前的缓存。如果存在，它会重新使用以前存在的列表。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:10:16.607

由于您没有使用适配器的`getItemViewType`和方法，因此将假定您只有一种类型的行（尽管您实际上使用了两种类型），并且会在行出现在列表中时对其进行回收。所以，如果不是，你会得到一个回收的行，它可能是这两种类型中的一种，具体取决于它的位置。`getViewTypeCount``ListView``convertView``null`

但是只有当你的行真的不同（额外的小部件、放置规则等）时，才应该实施上述方法。如果您的两行**仅在背景图像**上有所不同，那么您只需要一行，您将根据应用程序的逻辑设置背景，如下所示：

```
//...
if (convertView == null) {
    holder = new ViewHolder();    
    // just inflate one of the rows if they are identical
    convertView = mInflater.inflate(R.layout.chat_msg_row, parent, false);           
    holder.userName = (TextView) convertView.findViewById(R.id.msgusername);
    holder.userImage = (ImageView) convertView.findViewById(R.id.ppic);
    holder.date = (TextView) convertView.findViewById(R.id.msgdate);
    holder.text = (TextView) convertView.findViewById(R.id.msg);
    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
}           
// set the background image as desired   
if(from.toString().toLowerCase().equals("me")){
    // I assumed you set the background on the root of the View row, convertView
    // otherwise search for the desired view in convertView and set the background
    convertView.setBackgroundResource(R.drawable.the_me_background_drawable);
} else {
    convertView.setBackgroundResource(R.drawable.the_other_user_background_drawable);
}
// ... 
```

# javascript - 快速滚动时多次触发ajax请求

> ID：13171821
> 
> 赞同：0
> 
> 时间：2012-11-01T06:07:30.387
> 
> 标签：javascript, jquery, jquery-plugins

在这里，我试图实现无限滚动，但是当我滚动得太快时会发生什么，它会触发具有相同参数的多个 ajax 请求，这会再次导致相同的数据。如何从这个问题中克服请帮助。

```
(function( $ ){

 $.fn.scrollPagination = function(options) {

        var opts = $.extend($.fn.scrollPagination.defaults, options);  
        var target = opts.scrollTarget;
        if (target == null){
            target = obj; 
        }
        opts.scrollTarget = target;

        return this.each(function() {
          $.fn.scrollPagination.init($(this), opts);
        });

  };

  $.fn.stopScrollPagination = function(){
      return this.each(function() {
        $(this).attr('scrollPagination', 'disabled');
      });

  };

  var itr = 2;
  $.fn.scrollPagination.loadContent = function(obj, opts){
     var target = opts.scrollTarget;
     var mayLoadContent = $(target).scrollTop()+opts.heightOffset >= $(document).height() - $(target).height();
     if (mayLoadContent){
         if (opts.beforeLoad != null){
            opts.beforeLoad(); 
         }

         $(obj).children().attr('rel', 'loaded');
         $.ajax({
              type: 'POST',
              url: opts.contentPage+"?iteration="+itr,
              data: opts.contentData,
              success: function(data){
                itr++;
                $(obj).append(data); 
                var objectsRendered = $(obj).children('[rel!=loaded]');

                if (opts.afterLoad != null){
                    opts.afterLoad(objectsRendered);    
                }
              }
         });
     }

  };

  $.fn.scrollPagination.init = function(obj, opts){
     var target = opts.scrollTarget;
     $(obj).attr('scrollPagination', 'enabled');

     $(target).scroll(function(event){
        if ($(obj).attr('scrollPagination') == 'enabled'){
                $.fn.scrollPagination.loadContent(obj, opts);
                //alert(event.isPropagationStopped());
        }           
            //event.stopPropagation();
            //console.log(event.isPropagationStopped());
            event.preventDefault();
     });

     //$.fn.scrollPagination.loadContent(obj, opts);

 };

 $.fn.scrollPagination.defaults = {
         'contentPage' : null,
         'contentData' : {},
         'beforeLoad': null,
         'afterLoad': null  ,
         'scrollTarget': null,
         'heightOffset': 0        
 }; 
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:33:18.937

当滚动到达页面底部时，我曾经调用我的 ajax 函数。

```
function nearBottomOfPage() {
return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
}

$(window).scroll(function(){      
    if (loading) {
      return;
    }

    if(nearBottomOfPage()) {
      loading=true;
      page++;
      $("#place_of_loading_image").show(); 
      $.ajax({
        url:'your source',
        type: 'get',
        dataType: 'script',
        success: function() {
            $("#place_of_loading_image").remove(); 
            loading=false;
        }
      });
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:13:33.813

每触发 10 次滚动事件触发一次 ajax 怎么样？

```
$.fn.scrollPagination.init = function(obj, opts) {
    var target = opts.scrollTarget;
    $(obj).attr('scrollPagination', 'enabled');
    target.scrollCount = 0;
    $(target).scroll(function(event) {
        this.scrollCount++;
        if (this.scrollCount % 10 == 0) {
            if ($(obj).attr('scrollPagination') == 'enabled') {
                $.fn.scrollPagination.loadContent(obj, opts);
                //alert(event.isPropagationStopped());
            }
            //event.stopPropagation();
            //console.log(event.isPropagationStopped());
            event.preventDefault();
        }
    });
} 
```

# javascript - Phonegap - 文件名中不包含 .htm/.html 的 HTML 文件

> ID：13171828
> 
> 赞同：1
> 
> 时间：2012-11-01T06:08:05.510
> 
> 标签：javascript, android, iphone, html, cordova

使用 Phonegap，使用以下代码以编程方式从一页切换到另一页是微不足道的：

```
window.location.href = "someDestination.html"; 
```

但是，我注意到由于某种原因，如果目标文件上的扩展名不是“.html”，这将不起作用。例如，下面的代码：

```
window.location.href = "someOtherDestination"; 
```

...将导致 PhoneGap 失败并显示以下错误消息：

> 无法加载网页并出现错误：帧加载中断

我原以为 PhoneGap 会足够智能，可以检查目标文件的内容以确定它是否是有效的网页（例如，通过查找`<html>`标签），而不是试图依赖像文件扩展名这样的多余信息。但情况似乎并非如此。

所以我的问题是，为什么 PhoneGap 关心文件名是否以`.htm`/结尾`.html`，我如何让它不再关心这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:35:53.783

哈哈：

```
function getHTMLFile(str) {
    return str + '.html';
}

function getHTMFile(str) {
    return str + '.htm';
} 
```

;-)

不，但说真的，这是 window.location.href 规范的一部分。这不是 PhoneGap 特定的问题。您将无法简单地使用 javascript 来覆盖它（请参阅[this](https://stackoverflow.com/questions/2042810/override-document-location-href-is-it-possible-in-javascript)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T17:46:27.293

我也遇到了这个 Cordova/Phonegap 3.0

在我的页面顶部附近，我有一个重定向。我知道，这不是“响应式设计”，而是显示适合 iPhone 的 UI 的一个很好的临时修复。

```
<script>
  if (navigator.userAgent.match(/(iPhone|iPod).*AppleWebKit/i)) {
    window.location = "iphone/";
  }
</script> 
```

因同样的错误而失败。将其更改为

```
window.location = "iphone/index.html"; 
```

修复了错误

# xslt - 在页面 XSLT 之间导航时，Umbraco 页面结果过滤器恢复为默认值

> ID：13171829
> 
> 赞同：0
> 
> 时间：2012-11-01T06:08:08.880
> 
> 标签：xslt, filter, pagination, umbraco

我创建了一个图片库，并使用以下过滤器对页面上显示的结果进行排序：

![在此处输入图像描述](../Images/4239a7daee3b101f66d9aa21fdd87d3f.png)

效果很好并且按预期过滤，直到我导航到分页中的另一个页面（.aspx?page=2）并且过滤器恢复为默认选项。我需要它来保存选定的选项并相应地显示过滤结果。

这是我正在使用的 XSLT 的一个片段，如果需要，我可以发布整个 XSLT：

```
 <xsl:variable name="FF_sortType" select="umbraco.library:RequestForm('sortType')" />
<xsl:variable name="FF_resultsPerPage" select="umbraco.library:RequestForm('resultsPerPage')" />        
<xsl:variable name="FF_details" select="umbraco.library:RequestForm('details')" />    
<xsl:variable name="FF_zoom" select="umbraco.library:RequestForm('zoom')" /> 

<!-- Filter the page results, Images per page, Most Recent/Alphabetical, Details On/Off, Zoom On/Off -->
<form action="#">
  <div class="imageGalleryAlbumFilter">
    <fieldset>
      <label>Images per page:</label>
      <select name="resultsPerPage" id="resultsPerPage" onchange="document.getElementById('BoostMasterForm').submit()" >
        <option value="8">
        <xsl:if test="$FF_resultsPerPage= '8'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        8 </option>
        <option value="20">
        <xsl:if test="$FF_resultsPerPage= '20'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        20 </option>
        <option value="40">
        <xsl:if test="$FF_resultsPerPage= '40'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        40 </option>
        <option value="60">
        <xsl:if test="$FF_resultsPerPage= '60'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        60 </option>
        <option value="80">
        <xsl:if test="$FF_resultsPerPage= '80'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        80 </option>
        <option value="100">
        <xsl:if test="$FF_resultsPerPage= '100'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        100 </option>
      </select>
    </fieldset>
    <fieldset>
      <label>Sort by:</label>
      <select name="sortType" id="sortType" onchange="document.getElementById('BoostMasterForm').submit()" >
        <option value="MostRecent">
        <xsl:if test="$FF_sortType= 'MostRecent'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        Most recent </option>
        <option value="Alphabetical">
        <xsl:if test="$FF_sortType= 'Alphabetical'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        Alphabetical </option>
      </select>
    </fieldset>
    <fieldset>
      <label>Details:</label>
      <select name="details" id="details" onchange="document.getElementById('BoostMasterForm').submit()" >
        <option value="On">
        <xsl:if test="$FF_details= 'On'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        On </option>
        <option value="Off">
        <xsl:if test="$FF_details= 'Off'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        Off </option>
      </select>
    </fieldset>
    <fieldset>
      <label>Zoom:</label>
      <select name="zoom" id="zoom" onchange="document.getElementById('BoostMasterForm').submit()" >
        <option value="On">
        <xsl:if test="$FF_zoom= 'On'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        On </option>
        <option value="Off">
        <xsl:if test="$FF_zoom= 'Off'">
          <xsl:attribute name="selected">selected</xsl:attribute>
        </xsl:if>
        Off </option>
      </select>
    </fieldset>
  </div>
</form>

<script type='text/javascript'>
$(document).ready(function() {
    $("#resultsPerPage").change(function() {
        $("#BoostMasterForm").attr("action", $(this).val());
        $("#BoostMasterForm").submit();
    });
    $("#sortType").change(function() {
        $("#BoostMasterForm").attr("action", $(this).val());
        $("#BoostMasterForm").submit();
    });
    $("#details").change(function() {
        $("#BoostMasterForm").attr("action", $(this).val());
        $("#BoostMasterForm").submit();
    });
    $("#zoom").change(function() {
        $("#BoostMasterForm").attr("action", $(this).val());
        $("#BoostMasterForm").submit();
    });
});​
</script> 
```

如果有人可以提供帮助，将不胜感激。

干杯，合资企业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:16:19.370

umbraco.library 静态类有一堆用于管理会话和其他变量的助手。当您使用查询字符串进行导航时，不会提交表单，并且您在 XSLT 中的控件没有视图状态 - 在页面提交之间保留其值的能力。

有两种方法可以解决这个问题：

1.  将您的画廊（或您的过滤器部分）重新编码为 ASP.NET 用户控件，并在控件上启用视图状态；
2.  更改表单值时，在 Javascript 中手动构建一个字符串，其中包含每个控件的名称和值（或者，使用 Javascript 将值保存到 cookie 中）。然后，在分页时，要么在查询字符串的末尾添加 Javascript 字符串并`umbraco.library:RequestQueryString("myparam")`在 XSLT 中使用检索值，要么从 cookie 中检索值，`umbraco.library.RequestCookies("myparam")`然后确定在呈现选项时需要将哪些表单选项设置为“已选择” `<select>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T08:22:04.377

有几种方法可以做到这一点，尽管使用用户控件会很慢并且难以维护。因此，我强烈建议不要为此使用用户控件。

您不需要视图状态，也不需要调用 umbraco 库。

您可以简单地使用宏属性并使用宏属性语法来捕获查询值。Umbraco 有几种方法可以解决这个问题，尽管没有多少人知道。

请注意，此解决方案还解决了基于请求变量的 umbraco 宏缓存可能遇到的任何问题。

在您的 XSLT 中，您使用参数来捕获宏值

```
<xslt:param name="numberofitems" select="/macro/numberofitems"/> 
```

添加的宏属性应具有“numberofitems”/num​​ber 类型的别名。

然后在模板上调用你的宏中，添加以下行：

```
<umbraco:macro alias="mypagedmacro" numberofitems="[@numberofitems],[%numberofitems],10" /> 
```

现在使用请求变量 ?numberofitems=20 调用您的页面

这里会发生什么？

第一个值将来自请求变量“numberofitems”（在本例中为 20）。

如果这不可用，umbraco 将查看 cookie 以获取“numberofitems”，以防您将其保存在 cookie 中以供以后使用。

如果不可用，则默认值为 10。

将所有变量添加到宏中，您可以缓存此分页列表的所有不同情况。

有关宏语法的更多信息[http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax)

# arrays - 使用数字索引将数据从控制器传递到视图

> ID：13171832
> 
> 赞同：2
> 
> 时间：2012-11-01T06:08:10.370
> 
> 标签：arrays, codeigniter

我有一个简单的问题。让我解释一下
我们使用它来将数据从控制器传递到视图

```
function index(){

    $data['title'] = 'This is title';
    $data['message'] = 'This is message';
    $this->load->view('test',$data);
} 
```

这里我们使用关联数组来传递数据
现在这个函数再次使用索引数组而不是关联数组

```
function index(){

    $data[] = 'This is title';
    $data[] = 'This is message';
    $this->load->view('test',$data);
} 
```

现在在视图中这不起作用。

```
echo $data[0];
echo '<br>';
echo $data[1]; 
```

我只想知道为什么这不起作用。在用户指南中，我从未读过关联数组是必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:15:56.557

视图数据在解析时转换为变量。`extract()`PHP 的功能给出了类似的结果。例如：

```
$data['title'] = 'This is the title'; 
```

将可以直接访问，而`$title` **不是** `$data['title']`。实际上，如果您查看源代码，您会发现它确实使用`extract()`并且类似的转换发生在您的案例中，但是由于变量`$0`和`$1`无效，因此它们不可用。

坚持字符串索引。如果这不是一个选项，那么您可能希望在文本之前添加一些前缀，例如：

```
$data['d0'] = 'This is the title'; 
```

请阅读[此处](http://codeigniter.com/user_guide/general/views.html)引用的手册。但是，您可以传递一个数组而不是字符串，并给出您想要的确切结果。

```
$data['data'] = array('This is the title', 'This is the description'); 
```

现在，您将可以使用`$data[0]`and访问它`$data[1]`。

# android - 如何显示来自处理程序的消息？

> ID：13171837
> 
> 赞同：1
> 
> 时间：2012-11-01T06:08:25.980
> 
> 标签：android, handler

这是我的代码：

```
public void handleMessage(Message msg) {
    if (msg != null){
        Log.i("Working1", msg.toString());

    }
} 
```

**Log.i("Working1", msg.toString());** 这会记录消息中的对象

如何显示对象或消息的所有内容..?? 给我任何解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:13:35.520

基本上，您会将您的对象存储在`obj`您的消息字段中。

```
Message m = new Message();
m.obj = yourObject;
handler.sendMessage(m); 
```

在`handleMessage(Message msg)`函数内部，您可以将 Message 类型转换为您想要的对象；

```
public void handleMessage(Message msg) {
        if (msg != null){

         YourClass object = (YourClass)msg.obj;
         //Process object;
        }
    } 
```

# emacs - 怎么能去掉 在组织议程视图中快速？

> ID：13171838
> 
> 赞同：12
> 
> 时间：2012-11-01T06:08:27.850
> 
> 标签：emacs, org-mode

在 emacs org 议程视图（今天）中，我使用`<scheduled date>`. 但是现在我想一起删除`<scheduled date>`单个任务或多个任务。（不想将它们安排到前一天）。

现在我要`<TAB>`每个任务，并删除该`<scheduled date>`行。

有什么快捷键（速度键？）可以做到吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-01T17:29:12.537

**tl;dr**：在议程中，`m`关于所有这些任务，然后`C-u B s`。

* * *

这需要相当多的搜索，但 org-mode**很**强大。

根据[手册](http://orgmode.org/manual/Inserting-deadline_002fschedule.html)，

> **Cc Cs** (org-schedule)
> 当使用前缀参数调用时，从条目中删除调度日期。

[并且，在议程中](http://orgmode.org/manual/Agenda-commands.html#Agenda-commands)：

> **B** (org-agenda-bulk-action)
> 批量操作：对议程中所有标记的条目进行操作。
> 
> > **s** 将所有项目安排到一个新的日期。

所以你需要做的是：

*   在议程中，**标记**您要从中删除预定日期的所有项目（使用`m`，如在 dired 中）
*   `C-u`作为前缀参数来**删除**调度。
*   `B s``org-schedule`作为**批量操作**运行。

你就完成了！享受 ：·）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-25T15:07:31.620

### 删除单个项目的预定日期

在议程视图中，按`C-u``C-c``C-s`任务。

### 删除多个项目的计划日期

[Nikana](https://stackoverflow.com/users/1449460/nikana-reklawyks)的[回答](https://stackoverflow.com/a/13182398/3451554)效果很好。

`m`在议程视图中，使用then标记任务`C-u``B-s`。

# extjs - $previous、$owner 和 $name 是什么？

> ID：13171839
> 
> 赞同：0
> 
> 时间：2012-11-01T06:08:30.400
> 
> 标签：extjs

这是 ExtJS 中的 callParent 方法。$previous、$owner 和 $name 是什么？为什么有一个前导的“$”符号？callParent: function(args) { var 方法;

```
 // This code is intentionally inlined for the least number of debugger stepping
            return (method = this.callParent.caller) && (method.$previous ||
                  ((method = method.$owner ? method : method.caller) &&
                        method.$owner.superclass.$class[method.$name])).apply(this, args || noArgs);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:41:01.587

它是类系统设置的内部细节，因此它可以跟踪方法。$ 在那里，所以它不太可能与你自己在类上的属性名称发生冲突。

# php - phpexcel - 将它与 excel 模板一起使用（图表丢失） php

> ID：13171841
> 
> 赞同：5
> 
> 时间：2012-11-01T06:08:34.533
> 
> 标签：php, phpexcel

我曾尝试将**phpexcel**与我自己的模板文件一起使用。phpexcel 加载文件并将数据写入某些单元格 A2、A3、A4，例如 .. 并使用新数据打开一个输出文件。

我的模板文件有图表内置.. 我想要 phpexcel 做的就是在单元格中填充值并且不要触摸图表。并且，打开新文件。**（请注意，我不想在代码中制作图表。我希望图表以与我最初创建的相同格式预先存在于我的模板中）。只有数据应该更新。**

但是，当我尝试这样做时......图表本身从结果文件中丢失了。在尝试了各种方法之后..仍然失败。

[而且，我从http://phpexcel.codeplex.com/discussions/397263](http://phpexcel.codeplex.com/discussions/397263)找到了以下代码

```
require_once 'Classes/PHPExcel.php'; 
/** PHPExcel_IOFactory */
include 'Classes/PHPExcel/IOFactory.php';

$target ='Results/';
$fileType = 'Excel2007';   
$InputFileName = $target.'Result.xlsx';   
$OutputFileName =  $target . '_Result.xlsx';

 //Read the file (including chart template) 
$objReader = PHPExcel_IOFactory::createReader($fileType); 
$objReader->setIncludeCharts(TRUE);
$objPHPExcel = $objReader->load($InputFileName); 

 //Change the file 

$objPHPExcel->setActiveSheetIndex(0)
// Add data
            ->setCellValue('C3','10' )
            ->setCellValue('C4','20' )
            ->setCellValue('C5','30')
            ->setCellValue('C5','40' );

 //Write the file (including chart)

PHPExcel_Settings::setZipClass(PHPExcel_Settings::PCLZIP);
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, $fileType); 
$objWriter->setIncludeCharts(TRUE);
$objWriter->save($OutputFileName); 
```

上面的代码在 excel 2010 中工作，现在让我的图表保持完好......但是当我尝试使用文件类型“Excel5”时它仍然不起作用。

它抛出以下错误：

```
 Fatal error: Call to undefined method PHPExcel_Reader_Excel5::setIncludeCharts()
 in D:\IT\bfstools\PHPExcel\MyExamples\test1.php on line 16 
```

**请提供一个简单的解决方案，我希望我的模板文件可以与 .xls 和 .xlsx 一起使用，并且模板文件中的所有原始图表都应该保持不变**。我不希望图表从结果文件中删除它。我也不打算使用 phpexcel 代码创建图表。（当excel可以为您完成所有工作时，为什么还要编写不必要的代码）。

我想要最简单的方法，即使用模板中的所有内容并用新数据填充单元格。而且，我在模板中现有的图表会自动上线。我不想编写不必要的代码，而我可以安全地依赖 Excel 模板和图表功能。

请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T07:40:07.200

这有一个很好的理由：

图表仅在核心中实现，此时对于 Excel2007 阅读器和编写器，所有其他阅读器或编写器将忽略图表，将它们视为根本不存在。目的是在来年向其他读者/作者推出图表。

**编辑**

我从您的评论中看到您根本不了解 PHPExcel 的工作原理，所以我有很多解释要做。

PHPExcel**不是**用于“编辑”工作簿文件的库：您不是在使用 PHPExcel 来更改文件，而是在更改***可以***从文件加载并随后***可以***写入文件的 PHPExcel 对象。

PHPExcel Core 是电子表格的内存表示，不同的组成对象，如工作表、单元格、图像、样式等，都表示为 PHP 对象。

PHPExcel 阅读器解析一个电子表格文件并从一个他们已编程识别的文件中加载所有组件，并从这些文件组件创建适当的 PHPExcel 核心对象。如果没有等效的 PHPExcel Core 对象（例如数据透视表），则无法“加载”该文件组件；如果加载器没有被编程来识别文件组件，那么它就不能被加载。在这些情况下，文件中的那些元素会被简单地忽略。一旦阅读器完成它的工作，一个 PHPExcel 对象就存在了，并且电子表格文件被关闭并被遗忘。

当内存中存在 PHPExcel Core 对象时，您有一组方法允许您操作和更改它，添加、修改或删除 Core 元素；但这些工作纯粹在组成 PHPExcel 核心的工作表、单元格、样式对象的“内存中”集合上工作。核心的存在并不知道已从文件加载或已使用 PHP“new PHPExcel()”语句创建；它不会以任何方式更改文件。

写作时，反之亦然。每个 Writer 获取 PHPExcel 核心对象，并将它们以适当的格式（Excel BIFF、OfficeOpenXML、HTML 等）写入文件。与读者一样，每个作者只能编写那些已编程编写的 PHPExcel Core 对象。如果它没有被编程来编写（例如，图表），那么 PHPExcel Core 中定义的任何图表都将被忽略，因为那个作者根本不知道如何编写它们。同样，PHPExcel Core 中存在的不受正在写入的文件格式支持的功能（例如 CSV 编写器的单元格样式）将被忽略。

因此，为了支持图表等电子表格功能，PHPExcel Core 对象集合必须经过修改以提供这些元素的“内存中”表示，**并且**不同的 Reader 必须经过编程以识别这些元素中的元素。文件，它们正在加载并将它们转换为适当的 PHPExcel 核心对象，**并且**已经对不同的编写器进行了编程，以将 PHPExcel 核心表示形式转换为适当的文件表示形式。

每个 Reader 和每个 Writer 都需要单独编程。图表是一个相对较新的功能，仅在 1.7.7 版本中添加到 PHPExcel Core 中，此时只有 Excel2007 格式的 Reader 和 Writer 被编程以识别图表元素。虽然开发人员的意图是扩展它以涵盖其他格式，但不会自动创建必要的代码。对每个单独的 Reader 和 Writer 进行编程需要时间和精力。虽然 Excel2007 读写器的图表代码现在已经稳定到不再被认为是“实验性”的地步，并且开发重点转向编写在 Excel5 读写器中处理图表的必要代码，但它是工作尚未完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T07:16:27.160

如果您可以使用 Golang，请尝试[Excelize](https://github.com/xuri/excelize)。支持保存文件而不丢失XLSX原始图表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-21T07:45:57.717

尝试设置`setIncludeCharts`

```
$objReader = PHPExcel_IOFactory::createReader('Excel2007');
//  Tell the reader to include charts when it loads a file
$objReader->setIncludeCharts(TRUE);
//  Load the file
$objPHPExcel = $objReader->load($filePath); 
```

# vb.net - VB 播放随机声音 wav 文件

> ID：13171844
> 
> 赞同：0
> 
> 时间：2012-11-01T06:09:08.917
> 
> 标签：vb.net, background, audio

如何在 vb 中播放随机声音，我有 3 个波形文件，我想在使用我的应用程序时在后台随机播放？

这就是我如何只播放一首歌曲。

```
My.Computer.Audio.Play(My.Resources.music1, AudioPlayMode.Background) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:56:29.423

你可以这样做：

```
Public Sub PlayRandomTrack()

    Dim trackNum As Integer = CInt(Rnd() * 3 + 0.5)

    Select Case trackNum

        Case 1
            My.Computer.Audio.Play(My.Resources.music1, AudioPlayMode.Background)

        Case 2
            My.Computer.Audio.Play(My.Resources.music2, AudioPlayMode.Background)

        Case Else
            My.Computer.Audio.Play(My.Resources.music3, AudioPlayMode.Background)

    End Select

End Sub 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:14:51.017

我认为这是正确的方法：

```
Public Function GetRandom(ByVal Min As Integer, ByVal Max As Integer) As Integer
    Dim Generator As System.Random = New System.Random()
    Return Generator.Next(Min, Max)
End Function

Public Function Play(Byval Num as integer)
if num = 1 then
My.Computer.Audio.Play(My.Resources.music1, AudioPlayMode.Background)
      Threading.Thread.Sleep(5000)
return true
elseif num = 2 then
My.Computer.Audio.Play(My.Resources.music2, AudioPlayMode.Background)
      Threading.Thread.Sleep(5000)
return true
end if
return false
End Function 
```

以这种方式使用它：

```
play(GetRandom(1,2)) 
```

# c - C程序测量指令的执行时间

> ID：13171846
> 
> 赞同：3
> 
> 时间：2012-11-01T06:09:21.070
> 
> 标签：c

我需要找出执行一条指令或几条指令所花费的时间，并以毫秒为单位打印出来。有人可以为此分享小代码片段吗？

谢谢..我需要用这个衡量在我的项目中执行一些指令所花费的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:39:18.090

```
#include<time.h> 
main()
{
clock_t t1=clock();
printf("Dummy Statement\n");
clock_t t2=clock();
printf("The time taken is.. %g ", (t2-t1)); 
```

也请看下面的点赞。 [使用 printf 打印clock_t的正确方法是什么？](https://stackoverflow.com/questions/1083142/whats-the-correct-way-to-use-printf-to-print-a-clock-t)

[http://www.velocityreviews.com/forums/t454464-c-get-time-in-milliseconds.html](http://www.velocityreviews.com/forums/t454464-c-get-time-in-milliseconds.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T06:12:35.530

一条指令的执行时间会短于 1 毫秒。如果你试图测量不止一条指令，它会变得复杂（多次调用指令的循环呢）。

此外，您可以使用的大多数计时功能就是：*functions*。这意味着他们也将执行指令。如果您想为一条指令计时，那么最好的办法是查看您正在使用的处理器的规格，看看它需要多少个周期。

以编程方式执行此操作是不可能的。

编辑：

由于您已将问题更新为现在参考*一些*说明。*您可以在某些*处理器上测量亚毫秒级的时间。很高兴知道环境。这将适用于 x86 和 linux，其他环境会有所不同。

[时钟获取时间](http://www.kernel.org/doc/man-pages/online/pages/man2/clock_gettime.2.html)允许亚纳秒精度。或者您可以自己调用 rdstc 指令（在多处理器或 smp 系统上祝您好运 - 您可能正在测量错误的东西，例如通过让指令在不同的处理器上运行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:24:42.683

*实际*完成一条指令的时间取决于时钟周期时间，以及指令穿过处理器的流水线深度。正如戴夫所说，您无法通过编写程序真正找到这一点。您可以使用操作系统提供给您的某种计时功能来测量完成一些小指令所需的 CPU 时间。如果这样做，请尽量不要使用任何依赖内存或分支的指令。理想情况下，您可能会执行某种逻辑或算术运算（因此可能在 C 中使用一些内联汇编）。

# php - 如何从 zendframework 2 的控制器插件中获取控制器？

> ID：13171849
> 
> 赞同：3
> 
> 时间：2012-11-01T06:09:40.850
> 
> 标签：php, zend-framework2

我正在 zf2 中编写一个控制器插件。我使用以下方法从插件中获取控制器，但它返回 null。

```
$controller = $this->getController() 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:31:55.033

*请注意，此答案基于我对 ZF1 的体验，以及对 ZF2 代码的快速浏览。看看[这个答案](https://stackoverflow.com/a/13175394/45531)。*

我还没有玩过 ZF2，但是如果调度过程和插件与 ZF1 相似，则插件无法访问控制器（至少不是以普通的方式），因为某些控制器甚至没有被实例化插件挂钩。

**更新**：快速浏览了一些库存的 ZF2 控制器插件（因为我似乎无法找到有关*创建*自定义插件的官方文档），并查看[如下](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/Plugin/Redirect.php#L44)检查：

```
$controller = $this->getController();
if (!$controller || !method_exists($controller, 'plugin')) {
//... 
```

因此，在某些情况下似乎可能未设置控制器。由于插件还支持（我理解为）事件侦听器，我的猜测是它们仍然可以在响应过程中的不同时间使用，这可能是在分配控制器之前。

希望[用过ZF2的人能过来给我指正](https://stackoverflow.com/a/13175394/45531)；但也许我至少给你指出了一个合理的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:44:48.160

有两个选项您没有在插件中设置控制器。

1.  您在调度之前从插件管理器调用插件，因此尚未设置控制器
2.  您在插件内部调用控制器`__construct()`

对于第一个，一个典型的例子是`onBootstrap()`模块类中的一个方法，显然你没有控制器：

```
public function onBootstrap($e)
{
  $app = $e->getApplication();
  $sm  = $app->getServiceManager();

  $plugins = $sm->get('ControllerPluginManager');
  $plugin  = $plugins->get('my-plugin');

  // $plugin->getController() === null
} 
```

这似乎是一个明显的例子，但在其他情况下，您会错误地假设控制器已经存在（例如，在应用程序运行期间，在路由阶段；调度仍然必须到来）。

第二个例子是因为控制器注入了setter注入。setter 在构造之后被调用。在伪代码中，会发生这种情况：

```
$plugin = new $class;
$plugin->setController($controller); 
```

如果你有这样的插件：

```
use Zend\Mvc\Controller\Plugin\AbstractPlugin;

class MyPlugin extends AbstractPlugin
{
  public function __construct()
  {
    // $this->getController() === null
  }
} 
```

您注意到在该阶段没有设置控制器。

# c# - 如果字符串以特定单词结尾，则修剪字符串

> ID：13171850
> 
> 赞同：3
> 
> 时间：2012-11-01T06:09:48.667
> 
> 标签：c#, .net

`where`如果字符串末尾有一个单词，我需要修剪字符串。为此，C# 中的快速执行方法是什么？

注意：修剪这个词可以是任何东西..`WHERE`只是一个例子

```
string text1 = "My hosue where sun shines";  //RESULT: "My hosue where sun shines"
string text2 = "My where"; //RESULT: "My"
string text3 = "My where I WHERE"; //RESULT:"My where I" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:18:51.763

这是通过扩展方法实现的 LINQ 变体：

```
public static string TrimEnd(this string s, string trimmer)
{
    //reverse the original string we are trimmimng
    string reversed = string.Concat(s.Reverse());
    //1\. reverse the trimmer (string we are searching for)
    //2\. in the Where clause choose only characters which are not equal in two strings on the i position
    //3\. if any such character found, we decide that the original string doesn't contain the trimmer in the end
    if (trimmer.Reverse().Where((c, i) => reversed[i] != c).Any())
        return s; //so, we return the original string
    else //otherwise we return the substring
        return s.Substring(0, s.Length - trimmer.Length);
} 
```

并使用它：

```
string text1 = "My hosue where sun shines";  
string text2 = "My where"; 
string text3 = "My where I WHERE"; 
Console.WriteLine(text1.TrimEnd("where"));
Console.WriteLine(text2.TrimEnd("where"));
Console.WriteLine(text3.TrimEnd("WHERE"));
Console.ReadLine(); 
```

它区分大小写。为了使其不区分大小写，您需要在扩展方法中将两者都设置为小写或大写`s`。`trimmer`

此外，即使您正在搜索一些短语，而不仅仅是一个单词，它也会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T06:38:09.687

你可以使用`string.EndsWith`方法和`string.Substring`

```
public static string Trim(this string s, string trimmer)
{

    if (String.IsNullOrEmpty(s)|| String.IsNullOrEmpty(trimmer) ||!s.EndsWith(trimmer,StringComparison.OrdinalIgnoreCase))
        return s;
    else
        return s.Substring(0, s.Length - trimmer.Length);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T06:29:54.397

您可以使用正则表达式来做到这一点：

```
Regex.Replace(s, @"(\A|\s+)where\s*\Z", "", RegexOptions.IgnoreCase).Trim(); 
```

用法：

```
"My hosue where sun shines".TrimWhere() // "My hosue where sun shines"
"My where".TrimWhere()                  // "My"
"My where I WHERE".TrimWhere()          // "My where I"
"".TrimWhere()                          // ""
"My blahWHERE".TrimWhere()              // "My blahWHERE"
"Where".TrimWhere()                     // "" 
```

对于这个示例，我创建了扩展方法（添加`System.Text.RegularExpressions`命名空间）

```
public static class StringExtensions
{
   public static string TrimWhere(this string s)
   {
      if (String.IsNullOrEmpty(s))
          return s;

      return Regex.Replace(s, @"(\A|\s+)where\s*\Z", "", RegexOptions.IgnoreCase)
                  .Trim();
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T06:43:08.950

使用不区分大小写的`EndsWith`方法调用来确定您的字符串是否以要修剪的字符结尾，如果它确实从字符串末尾删除修剪字符串中的字符数。

在一个方法中，它可能看起来像这样：

```
private string MyTrimEnd(string s, string trimString) {
    if (s.EndsWith(trimString, StringComparison.OrdinalIgnoreCase)) {
        // A case-insenstive check shows the string ends with the trimString so remove from the
        // end of the string the number of characters in the trimString.  
        // Trim the result to leave no trailing space characters, if required.
        return s.Remove(s.Length - trimString.Length).Trim();
    } else {
        // The check showed the passed string does not end with the trimString so just return the
        // passed string.
        return s;
    }
} 
```

测试和结果：

```
Console.WriteLine("'{0}'", MyTrimEnd(text1, "where"));      // 'My hosue where sun shines'
Console.WriteLine("'{0}'", MyTrimEnd(text2, "where"));      // 'My'
Console.WriteLine("'{0}'", MyTrimEnd(text3, "where"));      // 'My where I'
Console.WriteLine("'{0}'", MyTrimEnd("WHERE", "where"));    // ''
Console.WriteLine("'{0}'", MyTrimEnd("WHE", "where"));      // 'WHE'
Console.WriteLine("'{0}'", MyTrimEnd("blablaWHERE", "where"));  //'blabla'
Console.WriteLine("'{0}'", MyTrimEnd(string.Empty, "where"));  //''
Console.WriteLine("'{0}'", MyTrimEnd("WHEREwherE", "where"));  //'WHERE' 
```

或作为扩展方法：

```
public static string MyTrimEnd(this string s, string trimString) {
    if (s.EndsWith(trimString, StringComparison.OrdinalIgnoreCase)) {
        return s.Remove(s.Length - trimString.Length).Trim();
    } else {
        return s;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T06:27:15.070

首先，您将字符串拆分为一个数组并检查最后一个数组元素，然后将字符串替换为数组元素本身。

```
string[] words1 = text1.Split(' ');
string replaced_string = "";
if words1[words1.length-1]=='where'
for (int i = 0; i < length-2; i++)  
{
         replaced_string + words1[i] + " ";
}
replaced_string.TrimEnd();
text1 = replaced_string; 
```

您也可以对其他文本字符串执行相同操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T06:43:10.523

@Konstantin Vasilcov 答案的另一个版本是

```
 public static string MyTrim1(string commandText, string trimmer)
    {

        if (String.IsNullOrEmpty(commandText) || String.IsNullOrEmpty(trimmer))
        {
            return commandText;
        }

        string reversedCommand = (string.Concat(commandText.Reverse())).ToUpper();
        trimmer = trimmer.ToUpper();

        if (trimmer.Reverse().Where((currentChar, i) => reversedCommand[i] != currentChar).Any())
        {
            return commandText;
        }

        else
        {
            return commandText.Substring(0, commandText.Length - trimmer.Length);
        }

    } 
```

# python - django 如何在全局变量上处理并发请求？

> ID：13171860
> 
> 赞同：6
> 
> 时间：2012-11-01T06:11:07.123
> 
> 标签：python, django, apache, concurrency, mod-wsgi

我有一个通过 apache/mod_wsgi 托管的 django 实例。我使用`pre_save`和`post_save`信号来存储保存前后的值以供以后比较。为此，我使用全局变量来存储`pre_save`可以在`post_save`信号处理程序中访问的值。

我的问题是，如果两个请求 A 和 B 同时请求同一个 Web 服务，它会并发吗？B 不应该读取 A 写入的全局变量，反之亦然。

PS：我不对`Lock`变量使用任何线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:25:02.373

这部分取决于您的`mod_wsgi`配置。如果将其配置为每个进程只使用一个线程，那么全局变量是安全的——尽管出于各种原因我不建议使用它们。在多线程配置中，如果您使用全局变量，则无法保证请求不会混淆。

您应该能够在`pre_save`和之间找到更多本地存储所需数据的地方`post_save`。我建议在您的设计中多考虑一些。

# android - 如何在 Android 中使用 Facebook SDK 从 Facebook 获取网络名称

> ID：13171862
> 
> 赞同：0
> 
> 时间：2012-11-01T06:11:25.143
> 
> 标签：android, facebook, facebook-graph-api

我想从 Android 中的 Facebook 获取网络列表及其关联的电子邮件地址。我正在使用适用于 Android 的 Facebook SDK。但在来自 Facebook 的 JSON 响应中，我没有得到网络名称和相关的电子邮件地址。目前已给予以下许可。

```
Utility.mFacebook.authorize(LoginActivity.this,
                        new String[] { "publish_stream","read_stream", "offline_access","user_education_history", "email" },
                        Facebook.FORCE_DIALOG_AUTH,
                        facebookListener.new LoginDialogListener()) 
```

**更新：从 Facebook 开发者网站，我们可以在**[这里](http://developers.facebook.com/docs/reference/rest/users.getStandardinfo/)获得附属的网络名称

**affiliations - 网络从属关系列表，作为从属关系元素，每个都包含年份、类型、状态、名称和 nid 子元素。如果未返回从属关系，则此元素将为空白。将首先列出用户的主网络（键：nid）。**

以 JSON 格式获得以下响应，但响应中没有隶属关系标签，

```
{
    "work": [
        {
            "employer": {
                "id": "xxxxxxxxxxxx",
                "name": "xyz"
            },
            "start_date": "0000-00",
            "end_date": "0000-00"
        }
    ],

    "locale": "en_US",
    "link": "http://www.facebook.com/abc.xyz.12",
    "education": [
        {
            "type": "College",
            "school": {
                "id": "112520115426955",
                "name": "University of Pennsylvania"
            }
        }
    ],
    "updated_time": "2012-11-01T06:31:14+0000",
    "id": "0000000000000000",
    "first_name": "XYZ",
    "timezone": 5.5,
    "username": "abc.xyz.12",
    "email": "abc@xyz.com",
    "verified": true,
    "name": "XYZ ABC",
    "last_name": "ABC",
    "gender": "male"
} 
```

请让我知道，是否需要任何许可。或任何其他方式来获得这个。

提前致谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:12:39.290

这是获取用户从属关系的 FQL 查询：

> 从 uid=YOUR_UID_HERE 的用户中选择隶属关系

使用下面的 FQL 查询指向图形 api 浏览器的示例链接。

[https://developers.facebook.com/tools/explorer/?fql=select%20affiliations%20from%20user%20where%20uid%3D1060290170%0A%0A](https://developers.facebook.com/tools/explorer/?fql=select%20affiliations%20from%20user%20where%20uid%3D1060290170%0A%0A)

# mysql - MySQL 查询 GROUPing 从一个表，不包括在另一个子查询中找到的结果

> ID：13171867
> 
> 赞同：2
> 
> 时间：2012-11-01T06:11:50.753
> 
> 标签：mysql, group-by, subquery, not-exists

假设我有两个表 - ADDONS 和 DOWNLOADS。

ADDONS 规定哪些应用程序免费提供哪些插件。
DOWNLOADS 记录所有应用程序的插件下载，包括免费和非免费。

```
ADDONS  
appname  | varchar  
appaddon | varchar

DOWNLOADS  
id       | int  
appaddon | varchar  
appname  | varchar  
source   | varchar  
date     | datetime 
```

我正在尝试编写一个查询，显示 DOWNLOADS 中每个 appaddon 的计数，其中它未免费包含在 ADDONS 中。

我得到了： `"SELECT appaddon, count(id) FROM downloads GROUP BY appaddon ORDER BY count(id) DESC"`- 但这包括免费包含它的应用程序和不包含它的应用程序。

谁能指出我正确的方向？

* * *

更新：

示例：假设我有两个假日主题应用程序 - 一个用于圣诞节，一个用于万圣节，每个应用程序都允许您下载应用程序中包含的服装（例如，万圣节允许您下载女巫、骷髅或南瓜灯笼，以及圣诞节让您下载圣诞老人或精灵）。但是如果有人从应用程序内升级，他们可以下载任何可用的服装（所以圣诞节升级可以下载骷髅，或者万圣节升级可以下载精灵）。

我正在尝试计算未升级的不包括在内的下载量。所以我想排除万圣节下载的女巫和圣诞节下载的圣诞老人，但要计算其他应用程序下载的女巫、骷髅、精灵等。

以下是一些示例数据：

```
ADDONS  
appname     | appaddon  
========================  
halloween   | jackolantern  
halloween   | skeleton  
halloween   | witch  
christmas   | santa  
christmas   | elf  
christmas   | reindeer  
easter      | bunny  
allholidays | bunny

DOWNLOADS  
id | appaddon  | appname   | date  
=======================================
1  | skeleton  | halloween | 2012-10-15  
2  | skeleton  | halloween | 2012-10-15  
3  | witch     | halloween | 2012-10-16  
4  | santa     | christmas | 2012-10-16  
5  | elf       | christmas | 2012-10-16  
6  | witch     | christmas | 2012-10-16  
7  | bunny     | christmas | 2012-10-16  
8  | bunny     | halloween | 2012-10-17  
9  | bunny     | easter    | 2012-10-18 
```

基于以上，我期望结果：

```
appaddon  | count
=================
bunny     | 2
witch     | 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:17:55.840

```
 SELECT appaddon, count(id) FROM downloads 
    left join addons on addons.appname=downloads.appname
    where addons.appname is null
    GROUP BY downloads.appaddon ORDER BY count(id) DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:05:54.943

这可能对您有用：

```
SELECT DOWNLOADS.appaddon, COUNT(*) FROM DOWNLOADS
    INNER JOIN ADDONS ON (DOWNLOADS.appaddon = ADDONS.appaddon)
    WHERE DOWNLOADS.appname != ADDONS.appname
    GROUP BY DOWNLOADS.appaddon; 
```

这是它的 SQL Fiddle：[链接](http://sqlfiddle.com/#!2/57e84/6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T05:24:38.057

我*想*我明白了！要求我使用 WHERE NOT EXISTS。

```
SELECT appaddon, count(id) FROM DOWNLOADS
WHERE NOT EXISTS (
  SELECT appaddon FROM ADDONS
  WHERE DOWNLOADS.appname = ADDONS.appname
  AND DOWNLOADS.appaddon = ADDONS.appaddon)
GROUP BY appaddon 
```

提琴手在[这里](http://sqlfiddle.com/#!2/95988/4/0)

# java - 处理 apache poi 中的空列

> ID：13171870
> 
> 赞同：0
> 
> 时间：2012-11-01T06:12:11.643
> 
> 标签：java, excel, apache-poi

我有一个从 java 程序中读取 excel 表的程序。

我正在迭代单元格，如下所示：

```
Iterator cells = row.cellIterator();
String temp;
StringBuilder sb;
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd");

while (cells.hasNext()) {
Cell cell = (Cell) cells.next();
temp = null;

    switch (cell.getCellType()) {
         case Cell.CELL_TYPE_STRING:
         temp = cell.getRichStringCellValue().getString();
         break;

    case Cell.CELL_TYPE_NUMERIC:

    if (DateUtil.isCellDateFormatted(cell)) {
        temp = sdf.format(cell.getDateCellValue());
       } else {
             temp = df.format(new BigDecimal(cell.getNumericCellValue()));
       }
          break;
          default:
     }
    if (temp == null || temp.equalsIgnoreCase("null")) {
        sb.append("").append(";");
    } else {
        sb.append(temp).append(";");
    }
 } 
```

如所见，我正在尝试创建一个字符串构建器，其中包含以分号分隔的 excel 行中的值。

问题是，如果列值为空，我希望它在字符串生成器中作为一个空值，并带有两个连续的分号。

然而，调用

> 单元格 = (Cell) cells.next();

只是忽略空单元格并跳转到下一个非空单元格。

所以这条线

> if (temp == null || temp.equalsIgnoreCase("null"))

从来没有遇到过。

如何在迭代器中处理空列值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:10:09.180

这实际上是[这个问题](https://stackoverflow.com/questions/13048981/read-excel-file-2010-apache-poi-ignoring-empty-cells)的重复，所以[我对这个问题的回答](https://stackoverflow.com/questions/13048981/read-excel-file-2010-apache-poi-ignoring-empty-cells/13051187#13051187)基本上也完全适用于你。

单元迭代器仅迭代文件中定义的单元。如果该单元格从未在 Excel 中使用过，它可能不会出现在文件中（Excel 并不总是一致的......），所以 POI 不会看到它

如果要确保点击每个单元格，则应改为按索引查找，并检查空单元格（表明该单元格从未在文件中存在），或设置 a`MissingCellPolicy`以控制您希望空单元格和空白单元格的方式处理过的

所以，如果你真的想得到每个单元格，请执行以下操作：

```
Row r = sheet.getRow(myRowNum);
int lastColumn = Math.max(r.getLastCellNum(), MY_MINIMUM_COLUMN_COUNT);

for (int cn=0; cn<lastColumn; cn++) {
   Cell c = r.getCell(cn, Row.RETURN_BLANK_AS_NULL);
   if (c == null) {
      // The spreadsheet is empty in this cell
   } else {
      // Do something useful with the cell's contents
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:21:50.257

你可以这样做

```
int previous=0;
while(cell.hasNext())
{
    Cell cell = (Cell) cells.next();
    int current=cell.getColumnIndex();
    int numberofsemicolons=previous-current;
    for(numberofsemicolons)
    {
    sb.append("").append(";");
    }
    previous=current;
} 
```

或者你可以做

```
int numberofcells=row.getFirstCellNum()-row.getLastCellNum();
for(i=0;i<=numberofcells;i++)
{
     Cell cell = (Cell) cells.next();
     int current=cell.getColumnIndex();
     while(i<current)
     {
        sb.append("").append(";");
        i++
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-03T18:17:30.410

@Gagravarr 发布的答案对我来说非常有效，但 MissingCellPolicy 现在是一个枚举，所以在获取单元格值而不是使用

```
Cell c = r.getCell(cn, Row.RETURN_BLANK_AS_NULL); 
```

我用过

```
Cell c =r.getCell(cn,Row.MissingCellPolicy.RETURN_BLANK_AS_NULL); 
```

# iphone - iOS：在 Backdate 上运行配置文件

> ID：13171873
> 
> 赞同：0
> 
> 时间：2012-11-01T06:12:27.227
> 
> 标签：iphone, ios, ad-hoc-distribution

很抱歉，这个问题与编程没有直接关系。

我的分发资料将于 11 月 5 日到期。由于某些信用卡原因，我暂时无法续订。问题是，我可以在回溯日期运行我的系统以保持我的配置文件处于活动状态，以便我可以制作 AdHoc 配置文件的分发版本以在客户的设备上进行测试？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:53:36.627

是的，您可以这样做，当且仅当您在到期日期之前构建了应用程序。

# c# - 关闭winform时自动注销

> ID：13171879
> 
> 赞同：0
> 
> 时间：2012-11-01T06:13:02.627
> 
> 标签：c#

我想在没有计时器访问的情况下关闭 winform 时自动注销。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:13:11.587

我不太明白您的意思是什么，但是您可以在使用事件`without timer access`关闭表单时运行进程或命令。`FormClosing`

如果您想在表单即将关闭时注销用户，您可以尝试使用可执行文件`shutdown.exe`作为进程及其参数`/l`

**例子**

```
public Form1()
{
    InitializeComponent();
    this.FormClosing += new FormClosingEventHandler(Form1_FormClosing); //Link FormClosing event to Form1_FormClosing
}
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    Process logoff = new Process(); //Initialize a new process
    ProcessStartInfo ProcessInfo = new ProcessStartInfo(); //Initialize a new ProcessStartInfo
    ProcessInfo.FileName = "shutdown.exe"; //Set the FileName of ProcessInfo
    ProcessInfo.Arguments = "/l"; //Log off, see 'shutdown.exe /?' for more information
    //ProcessInfo.WindowStyle = ProcessWindowStyle.Hidden; //Hide the process window (not required)
    logoff.StartInfo = ProcessInfo; //Associate ProcessInfo with logoff.StartInfo
    logoff.Start(); //Start the process
} 
```

这将启动可执行文件`shutdown.exe`作为一个带有参数的新进程，`/l`这意味着注销当前用户

**请注意：** `FormClosing`在表单即将关闭时触发。`e.Cancel`您可以通过设置来阻止表单关闭`true`

^(**例子**)

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true; //Don't close the form
} 
```

谢谢，
我希望你觉得这有帮助:)

# asp.net - 一个 DropDownList 不会触发 SelectedIndexChanged 但其他会触发

> ID：13171881
> 
> 赞同：0
> 
> 时间：2012-11-01T06:13:08.943
> 
> 标签：asp.net, drop-down-menu

我有一个问题，我只能弄清楚为什么会发生

情况是我有两个下拉列表，两者的设置方式相同

```
<asp:DropDownList ID="DocumentLink" runat="server" AutoPostBack="true" OnSelectedIndexChanged="DocumentLink_Changed">
                </asp:DropDownList>
                <asp:DropDownList ID="PageLink" runat="server" AutoPostBack="true" OnSelectedIndexChanged="PageLink_Changed">
                </asp:DropDownList> 
```

他们的事件看起来像这样

```
protected void DocumentLink_Changed(object sender, EventArgs e)
    {
        DropDownList DocumentLink = sender as DropDownList;
        LinkParam = DocumentLink.SelectedValue.ToString();
        DescriptionParam = DocumentLink.SelectedItem.Text;
    }
    protected void PageLink_Changed(object sender, EventArgs e)
    {
        DropDownList PageLink = sender as DropDownList;
        LinkParam = PageLink.SelectedValue.ToString();
        DescriptionParam = PageLink.SelectedItem.Text;
    } 
```

对于名为“PageLink”的 DropDown，事件处理程序会触发。但是对于“DocumentLink”，事件处理程序没有。在调试中，我看到页面加载被触发，但事件在页面加载后消失并且永远不会进入 DocumentLink_Changed

作为一个兴趣点，如果我使用 Telik radComboBox 代替 DropDownList 使用相同的设置它确实有效。

```
<telerik:RadComboBox ID="DocumentLink" runat="server" AutoPostBack="true" OnSelectedIndexChanged="DocumentLink_Changed">
                </telerik:RadComboBox> 
```

像这样的事件处理程序

```
protected void DocumentLink_Changed(object sender, RadComboBoxSelectedIndexChangedEventArgs e) 
```

不幸的是，我需要为我的项目使用下拉列表。

这可能是什么原因造成的？

更新

我采用了有效的下拉列表并将 LINQ 绑定用于无效的下拉列表。结果是 PageLink 下拉列表开始表现得就像“DocumentLink”下拉列表一样。这让我相信问题可能出在绑定方法上，但它们两者非常相似，我确实在下拉列表中看到了结果

这是我的绑定

```
if (selectedValue == 3)
            {
                DropDownList select = lvLinks.InsertItem.FindControl("PageLink") as DropDownList;
                List<IPW_Links_get_document_listResult> getList = (from i in lqContext.IPW_Links_get_document_list(0, "my stuff") select i).ToList();
                select.DataSource = getList;
                select.DataTextField = "DocumentName";
                select.DataValueField = "FolderPath";
                select.DataBind();

            }
            if (selectedValue == 2)
            {
                DropDownList select = lvLinks.InsertItem.FindControl("PageLink") as DropDownList;
                List<IPW_Links_get_available_pagesResult> getList = (from i in lqContext.IPW_Links_get_available_pages(PortalId) select i).ToList();
                select.DataSource = getList;
                select.DataTextField = "TabName";
                select.DataValueField = "TabPath";
                select.DataBind();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:30:16.507

请检查您在 PageLoad 事件中是否有任何更改下拉列表的语句。如果页面加载事件中有数据绑定语句或选择重置语句，请确保它位于*if not ispostback*条件片段下。

# gwt - GWT uibinder，自动建议花费了太多时间

> ID：13171883
> 
> 赞同：2
> 
> 时间：2012-11-01T06:13:27.590
> 
> 标签：gwt, gxt, uibinder

我们在项目中使用 GXT 和 GWT(2.4)。我们正在使用 UIBinder 进行页面设计。目前我们面临太多的问题，无法在 xml 页面中编写代码。自动建议花费了太多时间（当我们按 ctl+Space 进行自动建议时变得无响应）。不明白是什么问题。

需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:45:34.910

这可能是由于 Internet 连接或远程服务器速度较慢导致检索 XSD 文件变慢所致。您可以将 XSD 添加到目录中，引用本地文件而不是远程 URL：

```
Location:        http://dl.google.com/gwt/dtd/com.google.gwt.user.client.ui.xsd
URI:           http://dl.google.com/gwt/dtd/com.google.gwt.user.client.ui.xsd
Key Type:        Namespace Name
Key:                urn:import:com.google.gwt.user.client.ui

Location:        http://dl.google.com/gwt/dtd/uibinder.xsd
URI:           http://dl.google.com/gwt/dtd/uibinder.xsd
Key Type:        Namespace Name
Key:                urn:ui:com.google.gwt.uibinder 
```

在 Eclipse >> 首选项 >> XML >> 目录

在用户部分，您可以添加自定义目录，下载提到的 XSD 文件，并指向 XSD 文件的本地版本。

# regex - 如何使用正则表达式验证 1 到 99 之间的数字？

> ID：13171887
> 
> 赞同：4
> 
> 时间：2012-11-01T06:14:02.957
> 
> 标签：regex

什么是正则表达式，以便用户可以输入 1-99 之间的任何整数或浮点数。

对于只输入整数，我知道正则表达式是：

```
^(0?[1-9]|[1-9][0-9])$ 
```

请告诉我 RE 用于输入 1-99 之间的整数和浮点数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T06:17:07.933

一个简单的版本是`^[1-9][0-9]?$`用于整数和`^([1-8][0-9]?|9[0-8]?)\.\d+$`浮点数。如果你想要一个用于两者：`^(([1-8][0-9]?|9[0-8]?)\.\d+|[1-9][0-9]?)$`

[在这里](http://rubular.com/r/Zt8p8b7zyE)测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:33:47.143

试试 [1-9][0-9]?(.[0-9]*)?

编辑：以上也包括 99.something。这不应该：

```
[1-9](([0-8](\.[0-9]*)?)|[0-9])? 
```

[在这里](http://regexpal.com/)测试它，它可以工作。;)

# vba - Access / Word 2010 VBA 邮件合并尝试打开 [文件夹名].mdb 而不是 ACCDB 源

> ID：13171891
> 
> 赞同：2
> 
> 时间：2012-11-01T06:15:09.357
> 
> 标签：vba, ms-access, odbc, mailmerge

我们正在尝试从 Access 中自动执行邮件合并过程 - 单击按钮后，VBA 将运行指定当前数据库（accdb）作为数据源并运行 SQL，按照以下代码：

```
'Set up Word
Dim objWord As Object
Set objWord = CreateObject("Word.Application")

'Make visible, open specified doc to merge
With objWord
    .Visible = True
    .Documents.Open strDocName
End With

'Set the data source path
Dim docPath As String
docPath = CurrentProject.Path & "\" & CurrentProject.Name

'Open the merge data source - simplified
objWord.activedocument.mailmerge.opendatasource _
    Name:=docPath, _
    SQLStatement:=strSQL 
```

strDocName 和 strSQL 被传入并包含有效的功能性内容。

它成功打开单词，使其可见并打开要合并的模板。但是，此时它会要求确认数据源，并显示可能的数据源列表。单击“全部显示”复选框后，我可以通过 ODBC（.mdb、.accdb）向下滚动到 MS Access 数据库并从列表中选择它。

然后它显示一个标题为“ODBC Microsoft Access 驱动程序登录失败”的框，显示“找不到文件：“[数据库文件夹的路径]/[包含文件夹的名称].mdb”

因此，如果我的数据库位于 C:\Temp 中，则错误路径将显示为“C:\Temp.mdb”。将 access 数据库移动到另一个文件夹会导致错误路径更新，以根据包含的文件夹查找相应命名的 mdb 文件。

我不知道它是否相关，但它似乎也在以编辑模板本身的模式打开模板，而不是从该模板生成新文档。

我在这里遗漏了什么还是有人有任何想法？

干杯

* * *

在下面 Remou 的帮助下，我们放弃了直接链接到 Access 并使用 Remou 建议的链接中的代码输出到一个临时文本文件，然后从那里合并。

我们修改了代码以删除 CurrentBackendPath() 并更改了对该函数的唯一引用，如下所示：

```
Private Function GetStartDirectory() As String
    'GetStartDirectory = CurrentBackendPath() & "mm\"
    GetStartDirectory = CurrentProject.Path & "\mm\"
End Function 
```

我们使用的唯一其他修改是将代码更改为特定于我们的目的。再次感谢大家的回复。如果我有足够的声誉，我会支持 Remou 的回应！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:01:32.587

我强烈建议您**不要**链接到 MS Access 文件。将所需的数据输出到文本文件并链接到该文件。链接到 Access 对于手动控制的邮件合并来说非常好，但是当您希望自动化时，它变得非常乏味。您不妨阅读[http://www.tek-tips.com/faqs.cfm?fid=5088](http://www.tek-tips.com/faqs.cfm?fid=5088)

话虽如此，录制宏，我得到以下信息：

```
ActiveDocument.MailMerge.OpenDataSource Name:="Z:\Docs\Test.accdb", _
    ConfirmConversions:=False, ReadOnly:=False, LinkToSource:=True, _
    AddToRecentFiles:=False, PasswordDocument:="", PasswordTemplate:="", _
    WritePasswordDocument:="", WritePasswordTemplate:="", Revert:=False, _
    Format:=wdOpenFormatAuto, Connection:= _
    "Provider=Microsoft.ACE.OLEDB.12.0;User ID=Admin;Data Source=Z:\Docs\Test.accdb;Mode=Read;Extended Properties="""";Jet OLEDB:System database="""";Jet OLEDB:Registry Path="""";Jet OLEDB:Engine Type=6;Jet OLEDB:Database Locking Mode=0;Jet OLEDB:Global Partial Bulk" _
    , SQLStatement:="SELECT * FROM `Table1`", SQLStatement1:="", SubType:= _
    wdMergeSubTypeAccess 
```

以上大部分内容是不必要的，但您会看到它包含一个连接字符串。在早期版本中并非如此。你可以通过：

```
With objWord.ActiveDocument.MailMerge
    .OpenDataSource Name:="Z:\Docs\Test.accdb", _
        ConfirmConversions:=False, LinkToSource:=True, _
        Connection:= _
        "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Z:\Docs\Test.accdb;" _
        , SQLStatement:="SELECT * FROM `Table1`"
End With 
```

# php - PHP:创建PDF文件

> ID：13171898
> 
> 赞同：2
> 
> 时间：2012-11-01T06:15:37.573
> 
> 标签：php, pdf

我想知道这是否可能？假设我有 div 包含 10 个问题、选项和答案。现在，如果用户想要复制该 div 的内容，他必须使用鼠标手动选择并复制内容并粘贴到他的编辑器（Word 女士或其他一些编辑器）上。

但我想要的是当用户单击下载按钮时，内容会被复制到 pdf（或其他文件）文件中并且可以下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:19:17.760

您需要为此`fpdf`使用

[这是](http://www.phpjabbers.com/create-pdf-file-with-php-php36.html)一个关于如何使用 PHP 创建 pdf 文件的好教程

[参考](http://www.fpdf.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:19:45.277

我想，你需要`fpdf`lib。

从页面内容创建 txto 其他类似文件：

*   打开/创建文件
*   read_page = 读取页面内容
*   file_put_content(read_page)
*   文件已准备好下载

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T06:28:41.373

`FPDF`可能是在 PHP 中创建 PDF 的最佳库

在此处查看 fpdf 网站： [http ://www.fpdf.org/](http://www.fpdf.org/)

最适合多层文本/图像水印条形码更多

请查看网站中的脚本部分

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T06:39:44.097

用于创建 PFD 的出色 PDF 库是 mpdf 只是尝试示例，您会惊讶于它是多么容易：[http ://www.mpdf1.com/](http://www.mpdf1.com/)

# ios - 应用程序不显示在 iPad 中

> ID：13171903
> 
> 赞同：0
> 
> 时间：2012-11-01T06:16:03.623
> 
> 标签：ios, ipad, ios5, ios6

**大家好，我已经创建了一个 iPhone 应用程序并将其上传到 Appstore。但是当我在 iPad 中搜索应用程序时，它会显示在搜索结果中，但不会在屏幕中打开应用程序相关信息。它不显示在 iPad 中安装应用程序的屏幕。它在 iPhone 上运行良好。但不是在 iPad 中。请帮我....！！！！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:08:54.517

查看这篇文章：[如何将我的应用程序限制为仅适用于 iPhone，不包括 iPod touch？](https://stackoverflow.com/questions/10014664/how-can-i-restrict-my-app-for-iphones-only-excluding-ipod-touch)

这可能是由于您在项目中设置的一些限制而发生的，例如“电话”设备功能将限制应用程序在 iPad 上运行，并且该应用程序甚至不会在 iPad 应用程序商店中列出。

# ios - 枚举 NSString 的最佳方法

> ID：13171907
> 
> 赞同：21
> 
> 时间：2012-11-01T06:16:22.770
> 
> 标签：ios, xcode, enums

我正在寻找枚举 objc 对象（例如 NSString）的方法，我记得 Xcode4+ 版本中有一个新功能，它提供了一种新的枚举方式，但不清楚。有人知道吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-01T15:43:52.540

好的，我自己回答。猜我犯了一个错误。

这是我上面提到的新功能：

```
typedef enum Language : NSUInteger{
     ObjectiveC,
     Java, 
     Ruby, 
     Python, 
    Erlang 
}Language; 
```

这只是 Xcode 4.4 中枚举的一种新语法，但我很愚蠢地认为我们可以将“NSUInteger”交换为“NSString”。

所以这是我发现可行的方法：

[http://longweekendmobile.com/2010/12/01/not-so-nasty-enums-in-objective-c/](http://longweekendmobile.com/2010/12/01/not-so-nasty-enums-in-objective-c/)

```
// Place this in your .h file, outside the @interface block
typedef enum {
    JPG,
    PNG,
    GIF,
    PVR
} kImageType;
#define kImageTypeArray @"JPEG", @"PNG", @"GIF", @"PowerVR", nil

...

// Place this in the .m file, inside the @implementation block
// A method to convert an enum to string
-(NSString*) imageTypeEnumToString:(kImageType)enumVal
{
    NSArray *imageTypeArray = [[NSArray alloc] initWithObjects:kImageTypeArray];
    return [imageTypeArray objectAtIndex:enumVal];
}

// A method to retrieve the int value from the NSArray of NSStrings
-(kImageType) imageTypeStringToEnum:(NSString*)strVal
{
    NSArray *imageTypeArray = [[NSArray alloc] initWithObjects:kImageTypeArray];
    NSUInteger n = [imageTypeArray indexOfObject:strVal];
    if(n < 1) n = JPG;
    return (kImageType) n;
} 
```

供参考。第二个示例代码的原作者为枚举处理创建了一个类别。只是添加到您自己的 NSArray 类定义中的东西。

```
@interface NSArray (EnumExtensions)

- (NSString*) stringWithEnum: (NSUInteger) enumVal;
- (NSUInteger) enumFromString: (NSString*) strVal default: (NSUInteger) def;
- (NSUInteger) enumFromString: (NSString*) strVal;

@end

@implementation NSArray (EnumExtensions)

- (NSString*) stringWithEnum: (NSUInteger) enumVal
{
    return [self objectAtIndex:enumVal];
}

- (NSUInteger) enumFromString: (NSString*) strVal default: (NSUInteger) def
{
    NSUInteger n = [self indexOfObject:strVal];
    if(n == NSNotFound) n = def;
    return n;
}

- (NSUInteger) enumFromString: (NSString*) strVal
{
    return [self enumFromString:strVal default:0];
}

@end 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-01-06T09:45:49.257

使用结构的另一种方法：

```
extern const struct AMPlayerStateReadable
{
    __unsafe_unretained NSString *ready;
    __unsafe_unretained NSString *completed;
    __unsafe_unretained NSString *playing;
    __unsafe_unretained NSString *paused;
    __unsafe_unretained NSString *broken;
} AMPlayerState;

const struct AMPlayerStateReadable AMPlayerState =
{
    .ready = @"READY",
    .completed = @"COMPLETE",
    .playing = @"PLAYING",
    .paused = @"PAUSED",
    .broken = @"BROKEN"
}; 
```

然后你可以像这样使用：

```
NSString *status = AMPlayerState.ready; 
```

易于使用，可读性强。如果有人用这种方法的优点/缺点更新/编辑答案会很好。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-10-21T13:37:47.723

苹果文档的推荐方式：

> 您可以使用 NS_TYPED_ENUM 对具有您指定的原始值类型的常量进行分组。将 NS_TYPED_ENUM 用于在逻辑上无法在 Swift 扩展中添加值的常量集，并将 NS_TYPED_EXTENSIBLE_ENUM 用于可以在扩展中扩展的常量集。 [苹果文档](https://developer.apple.com/documentation/swift/objective-c_and_c_code_customization/grouping_related_objective-c_constants)

```
typedef NSString *MyEnum NS_TYPED_ENUM;
extern MyEnum const MyEnumFirstValue;
extern MyEnum const MyEnumSecondValue;
extern MyEnum const MyEnumThirdValue; 
```

在 .h 文件中。在 .m 文件中定义您的字符串

```
MyEnum const MyEnumFirstValue = @"MyEnumFirstValue"
MyEnum const MyEnumSecondValue = @"MyEnumSecondValue";
MyEnum const MyEnumThirdValue = @"MyEnumThirdValue"; 
```

在 Objective-C 中都按预期工作

```
- (void)methodWithMyEnum:(MyEnum)myEnum { } 
```

和斯威夫特

```
func method(_ myEnum: MyEnum) { } 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-02-21T15:10:05.130

这将由编译器验证，因此您不会意外混淆索引。

```
NSDictionary *stateStrings =
 @{
   @(MCSessionStateNotConnected) : @"MCSessionStateNotConnected",
   @(MCSessionStateConnecting) : @"MCSessionStateConnecting",
   @(MCSessionStateConnected) : @"MCSessionStateConnected",
  };
NSString *stateString = [stateStrings objectForKey:@(state)]; 
```

<nbsp;>

```
var stateStrings: [MCSessionState: String] = [
    MCSessionState.NotConnected : "MCSessionState.NotConnected",
    MCSessionState.Connecting : "MCSessionState.Connecting",
    MCSessionState.Connected : "MCSessionState.Connected"
]
var stateString = stateStrings[MCSessionState.Connected] 
```

* * *

更新：一种更快捷的方法是扩展`CustomStringConvertible`符合性的枚举。此外，通过这种方式，编译器将确保实现对底层枚举的每个新添加（而使用数组则不会），因为`switch`语句必须是详尽的。

```
extension MCSessionState: CustomStringConvertible {

    public var description: String {
        switch self {
        case .notConnected:
            return "MCSessionState.notConnected"
        case .connecting:
            return "MCSessionState.connecting"
        case .connected:
            return "MCSessionState.connected"
        @unknown default:
            return "Unknown"
        }
    }
} 
```

* * *

```
// You can use it like this.
var stateString = MCSessionState.connected.description

// Or this.
var stateString = "\(MCSessionState.connected)" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-06-19T02:27:26.427

## 2017年更新

最近的反对票引起了我的注意，我想补充一点，`enum`现在真的很容易使用`String`：

```
enum HTTPMethod: String {
    case GET, POST, PUT
}

HTTPMethod.GET.rawValue == "GET" // it's true 
```

## 原始答案

不幸的是，我最终使用了：

```
 #define HLCSRestMethodGet       @"GET"
#define HLCSRestMethodPost      @"POST"
#define HLCSRestMethodPut       @"PUT"
#define HLCSRestMethodDelete    @"DELETE"
typedef NSString*               HLCSRestMethod; 
```

我知道这不是 OP 所要求的，但编写实际代码来实现 enum 对我来说似乎是一种矫枉过正。我会将 enum 视为一种语言特性（来自 C），如果我必须编写代码，我会提出一些比 enum 做得更多的更好的类。

## 更新

Swift 版本似乎更漂亮，虽然性能永远不会那么好。

```
struct LRest {
    enum HTTPMethod: String {
        case Get = "GET"
        case Put = "PUT"
        case Post = "POST"
        case Delete = "DELETE"
    }
    struct method {
        static let get = HTTPMethod.Get
        static let put = HTTPMethod.Put
        static let post = HTTPMethod.Post
        static let delete = HTTPMethod.Delete
    } 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T06:26:41.337

我认为您正在寻找内联数组函数。例如

```
@[@"stringone",@"stringtwo",@"stringthree"]; 
```

如果没有，我不确定你是否可以枚举对象。

但是，您可以拥有一个静态字符串数组，并在索引处拥有枚举引用对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-05T22:41:44.943

我就是这样做的，虽然它并不完美。我觉得开关机制可以改进......对哈希碰撞阻力也不是积极的，不知道苹果在引擎盖下使用了什么。

```
#define ElementProperty NSString *
#define __ElementPropertiesList @[@"backgroundColor", @"scale", @"alpha"]

#define epBackgroundColor __ElementPropertiesList[0]
#define epScale __ElementPropertiesList[1]
#define epAlpha __ElementPropertiesList[2]

#define switchElementProperty(__ep) switch(__ep.hash)
#define caseElementProperty(__ep) case(__ep.hash) 
```

```
-(void)setValue:(id)value forElementProperty:(ElementProperty)ep; 
```

```
[self setValue:@(1.5) forElementProperty:epScale]; 
```

```
//Compiler unfortunately won't warn you if you are missing a case
switchElementProperty(myProperty) {
    caseElementProperty(epBackgroundColor):
        NSLog(@"bg");
        break;
    caseElementProperty(epScale):
        NSLog(@"s");
        break;
    caseElementProperty(epAlpha):
        NSLog(@"a");
        break;
} 
```

# java - “用 Java 编写的 AWT 小部件委托给用 C 编写的对等类”是什么意思？

> ID：13171908
> 
> 赞同：1
> 
> 时间：2012-11-01T06:16:39.287
> 
> 标签：java, c, swing, java-native-interface, native

我不明白的意思

> 最初的 Java AWT 是通过使用 Java 编写的小部件来实现的，这些小部件委托给用 C 编写的对等类

“*用 C 编写的对等类”*部分：

这意味着Java类包含本机代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:28:05.500

Hotspot Java 的大部分运行时系统都是用 C/C++ 编写的。在某一时刻，这包括 AWT 对等类。（它仍然可以做......）

本机代码不在 Java 中。相反，Java 通常具有`native`方法声明，这些方法声明通常在加载相应的本机库时绑定到本机实现。

（但是不要把这当作绿灯在你的代码中做同样的事情。与本机代码的接口是棘手的，如果你弄错了，你很可能会触发硬 JVM 崩溃......和一个痛苦的世界...... .)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:28:22.590

我现在明白了。AWT 工具包通过在对等类中使用 C 代码来使用本机组件，这在 Swing 中得到了解决。谢谢你@安德鲁

# android - Android 示例 - Accelerometer 和 APIDemos 不构建

> ID：13171909
> 
> 赞同：0
> 
> 时间：2012-11-01T06:16:44.407
> 
> 标签：android

我是 Android 开发的新手。我已经使用 Android Developer Tool 插件成功安装了 eclipse，并且许多示例都可以正常工作。

但 Android 样本 - `Accelerometer and APIDemos do not build`. 我看到许多构建错误通知修复代码中的错误。我不认为 Google 发布了带有构建错误的 APIDemo 示例。

提前致谢，请告知如何修复这些错误，或者是否需要任何配置/设置。

我已将 Java 编译器合规级别设置为 1.6。

错误信息（加速度计样本）：

该项目在应用程序中包含错误。请在运行前修复它们

```
Error details:

    The method onAccuracyChanged(Sensor, int) of type AccelerometerPlayActivity.SimulationView must override a superclass method    
    AccelerometerPlayActivity.java  /AccelerometerPlay/src/com/example/android/accelerometerplay    line 456    
    Java Problem
    Call requires API level 8 (current min is 5): 
    android.view.Display#getRotation    AccelerometerPlayActivity.java  /AccelerometerPlay/src/com/example/android/accelerometerplay    
    line 389    Android Lint Problem 
```

问候，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:52:54.770

`androidminSdkVersion ="5"`在 android.manifest 文件中查找该行

并改变它的`5 to 8`价值`8`

![在此处输入图像描述](../Images/59ea79dbcbde98ba50ba91416b3c670c.png)

`project` `properties`另一种方法是通过*右键单击*您的项目转到，然后`Android`在属性中查找。您必须在`build target`此处选择`equivalent to the api`为其构建示例项目的地方

参考图片![在此处输入图像描述](../Images/73f3ef82ee73b5267f966a7deacfab95.png)

假设您使用的是文件夹中的示例，那么您必须在属性`android-12`中检查相同的选项（即）`API Level 12`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:43:49.970

我自己找到了解决办法！

早些时候我尝试过使用 Andriod 4.0 版。现在我刚刚尝试了 Android 版本 4.1.2 的 ApiDemos 示例。它工作得很好。我还在我的手机中部署了apk。它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:30:47.643

可能的原因是 PC 速度较慢，无法及时构建。然后由于缺少 R.java 而发生错误

在这种情况下（错误类似于`R.id.stuff`），构建项目并等待。

# python - python - 如何在带有python 2.6.4的xml.etree.elementree中使用XPaths时获取父标签

> ID：13171915
> 
> 赞同：3
> 
> 时间：2012-11-01T06:17:08.633
> 
> 标签：python, xml.etree

我是这个论坛的新手。

我正在尝试从 xml.etree.cElementTree 检索数据。

我有以下代码

**代码片段**

```
import xml.etree.cElementTree as ET

xmldata ="""
<pipeline>
    <ep_150>
        <stage name="lay" longname="layout" department="layout" process="production">
            <review name="R1" reviewer="sridhar reddy" role="supervisor" id="p1234">
            </review>
        </stage>
        <stage name="lip" longname="lipsync" department="lipsync" process="production">
            <review name="R2" reviewer="someone" role="supervisor" id="p2345">
            </review>
        </stage>
        <stage name="blk" longname="blocking" department="animation" process="production">
            <review name="R3" reviewer="sudeepth" role="supervisor" id="p4645" dependson='R1'>
            </review>
            <review name="R4" reviewer="chandu" role="director" id="p5678">
            </review>
        </stage>
        <stage name="pri" longname="primary" department="animation" process="production">
            <review name="R5" reviewer="sudeepth" role="supervisor" id="p4645" style="dep" >
            </review>
            <review name="R6" reviewer="sudeepth" role="bld_supervisor" id="p2556" style="dep">
            </review>
        </stage>
        <stage name="sec" longname="secondary" department="animation" process="production">
            <review name="R7" reviewer="sha" role="supervisor" id="p1234" style="dep">
            </review>
            <review name="R8" reviewer="chandu" role="director" id="p5678">
            </review>
        </stage>
    </ep_150>
</pipeline>
"""
root = ET.fromstring(xmldata)

stages = root.findall("./ep_150/stage")

print 'Stages in animation department....\n'

for stage in stages:

    if stage.attrib['department']=='animation':
        print stage.attrib['name']

review = root.findall("./ep_150/stage/review")        

print '\n\nreviews for id=p4645\n'

for rev in review:

    if rev.attrib['id']=='p4645':
        print (rev.attrib['name']) 
```

使用上面的代码，我得到的结果如下

动画部门的舞台......

大块

优先

秒

对 id=p4645 的评论

R3

R5

**但我需要下半场的输出**

对 id=p4645 的评论

大牌 - R3

普里 - R5

即，我需要元素的父标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:24:33.167

孩子们不了解他们的父母，但父母了解他们的孩子，因此您必须相应地构建您的代码：-

```
stages = root.findall("./ep_150/stage")        

print '\n\nreviews for id=p4645\n'

for stage in stages:
    for rev in stage.findall('review'):
        if rev.attrib['id']=='p4645':
            print stage.attrib['name'], rev.attrib['name'] 
```

见[http://effbot.org/zone/element.htm#accessing-parents](http://effbot.org/zone/element.htm#accessing-parents)

与答案无关。如果您愿意，可以将这些 if 移动到 findall 参数中：-

```
root = ET.fromstring(xmldata)

stages = root.findall("./ep_150/stage[@department='animation']")

print 'Stages in animation department....\n'

for stage in stages:
    print stage.attrib['name']

stages = root.findall("./ep_150/stage")        

print '\n\nreviews for id=p4645\n'

for stage in stages:
    for rev in stage.findall("review[@id='p4645']"):
        print stage.attrib['name'], rev.attrib['name'] 
```

# jquery - 背景图像要根据屏幕大小自动拉伸

> ID：13171916
> 
> 赞同：0
> 
> 时间：2012-11-01T06:17:13.017
> 
> 标签：jquery, css, jquery-mobile

并且图像必须根据屏幕尺寸自动拉伸

```
body{
    background-image:url("BG URL");
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:21:58.513

试试这个`background-size:cover`

```
body{
    background:url("myBgUrl");
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}​ 
```

***[更多信息](http://css-tricks.com/perfect-full-page-background-image/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:17:56.150

试试这个：

```
.classname
{
background: url(../images/background.jpg) no-repeat; 
background-position:center center; 
background-attachment:scroll; 
background-size:100% 100%;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T06:28:32.717

请使用这个，它将支持所有浏览器

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="jquery.backstretch.min.js"></script> 
```

通话图片

```
jQuery(document).ready(function() 
    {
     $.backstretch("path/to/image.jpg");

    }); 
```

你可以从这里下载 js 文件 [https://github.com/srobbin/jquery-backstretch](https://github.com/srobbin/jquery-backstretch)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:07:32.880

```
body
{
background:url(/image/bg.jpg) repeat-x;
} 
```

如果不工作！！！！

```
body
{
background:url(/image/bg.jpg) repeat;
} 
```

希望这对您有所帮助。

# android - Andengine 文本示例 - 字体类型已折旧

> ID：13171920
> 
> 赞同：-1
> 
> 时间：2012-11-01T06:17:22.627
> 
> 标签：android, text, andengine

我正在尝试创建一个简单的游戏。我只需要在我的屏幕上显示文字。我正在使用 AndEngine（最新的）。

这些示例都没有运行，因为它说字体已折旧。

这是示例

```
 private Camera mCamera;
    private BitmapTextureAtlas mFontTexture;
    private Font mFont;

    @Override
    public void onLoadResources() {
            this.mFontTexture = new BitmapTextureAtlas(256, 256, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

            this.mFont = new Font(this.mFontTexture, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32, true, Color.BLACK);

            this.mEngine.getTextureManager().loadTexture(this.mFontTexture);
            this.getFontManager().loadFont(this.mFont); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:40:55.727

确保您正在为字体导入正确的文件 - 它应该是

```
import org.andengine.opengl.font.Font; 
```

# iphone - 从 URL 文件夹中获取文件名

> ID：13171922
> 
> 赞同：-2
> 
> 时间：2012-11-01T06:17:26.650
> 
> 标签：iphone, ios, xcode, url

如何从文件夹 url 中获取所有文件名？下面的代码返回 null。

```
path = @"http://localhost/urlFolder/images/";

NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:NULL]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:53:16.647

你试过另一种方法`NSFileManager`

```
- (NSArray *)contentsOfDirectoryAtURL:(NSURL *)url includingPropertiesForKeys:(NSArray *)keys options:(NSDirectoryEnumerationOptions)mask error:(NSError **)error 
```

您可以使用`contentsOfDirectoryAtURL:includingPropertiesForKeys:options:error:`而不是`contentsOfDirectoryAtPath:error:`

试试看。快乐编码。:)

# android - 如何计算字符串的宽度

> ID：13171927
> 
> 赞同：2
> 
> 时间：2012-11-01T06:17:41.907
> 
> 标签：android

> **可能重复：**
> [如何在 Android 上获取字符串宽度？](https://stackoverflow.com/questions/3630086/how-to-get-string-width-on-android)

我使用以下代码计算字符串的宽度，但宽度的结果与 TextView 中显示的宽度有很大不同。我怎样才能正确地做到这一点？谢谢指教。

```
Paint paint= new Paint(); 
        paint.setTextSize(size);

        int iRet = 0;  
        if (str != null && str.length() > 0) {  
                int len = str.length();  
                float[] widths = new float[len];  
                paint.getTextWidths(str, widths);  
                for (int j = 0; j < len; j++) {  
                    iRet += (int) Math.ceil(widths[j]);  
                }  
        }  
        return iRet; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T06:22:19.533

我想试试这个代码的字符串宽度

```
float width = paint.measureText(string); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T06:20:45.250

试试这段代码，希望对你有帮助..

```
Paint paint= new Paint(); 
paint.setTextSize(size);
int txtWidth = (int)(paint.measureText("Hello how are you?")); 
```

# list - 在 lisp 中展平列表

> ID：13171928
> 
> 赞同：0
> 
> 时间：2012-11-01T06:17:48.650
> 
> 标签：list, lisp, flatten

所以我一直在研究在 lisp 中展平列表。

但是，我想做的是逐级展平列表。

所以而不是拥有

`(flatten '(a (b (d (g f))) e)) = (a b d g f e)`

我想要

`(flatten '(a (b (d (g f))) e)) = (a b (d (g f )) e )`

关于如何做到这一点的任何想法？

非常感谢 =)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:24:31.290

你可以做这样的事情，例如：

```
(defun fletten-level (tree)
  (loop for e in tree
        nconc
        (if (consp e)
            (copy-list e)
          (list e))))

(fletten-level '(a (b (d (g f))) e))
;; (A B (D (G F)) E) 
```

这会遍历原始树的顶级分支并创建一个新列表，其中包含该分支是否为叶子，该叶子，如果该分支有两个其他分支，则包含第一个叶子和其余分支。

编辑：对不起，实际上第一次并不好，现在应该修复它。

EDIT2：只是因为我自己几乎都糊涂了。`(cons (car e) (cdr e))`看起来有点奇怪，因为它基本上与说 just 相同`e`。然而，我意识到这`nconc`会破坏性地修改 conses，所以它必须是这种方式（即创建一个新的 cons 单元以连接而不是重用旧单元）。

EDIT3：哇...实际上，它必须是`copy-list`，因为它会以这种方式修改原始列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T19:25:55.980

这是我对非破坏性版本的快速而肮脏的看法：

```
(defun flatten-level (tree)
  (cond ((null tree) ())
        ((consp (car tree)) (concatenate 'list (car tree) 
                                         (flatten-level (cdr tree))))
        (t (cons (car tree) (flatten-level (cdr tree)))))) 
```

这是一个遍历树的递归函数，对于每个元素，如果它是一个 cons'ed 元素，它将把它连接到树的其余部分，展平。

# sql - 家谱sql查询

> ID：13171931
> 
> 赞同：1
> 
> 时间：2012-11-01T06:18:04.717
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 sql server 2008 在 asp.net 中开发家谱应用程序。

我的主表是这样的：-

```
ID int PK
Name Varchar(50)
MotherID int
FatherID int

ID  MotherID FatherID   Name

1   NULL    NULL    My Grand Father

2   NULL    NULL    My Grand Mother

3   someid  someid  My Mother

4   2   1   My Father

5   3   4   Me

6   someid  someid  My wife

7   3   4   My Brother

8   6   5   My son. 
```

我正在寻找这样的输出

```
ID  MotherID    FatherID    Name        Level

1   someid  someid  grandfather 0

2   someid  someid  Father      1

3   someid  someid  Me      2

4   someid  someid  Brother     2

5   someid  someid  My Son      3 
```

提前致谢。克什米尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T06:55:46.680

尝试这个：

```
;WITH FamilyCTE
AS
(
    SELECT 
      *, 
      CAST(NULL AS VARCHAR(50)) AS FatherName,  
      CAST(NULL AS VARCHAR(50)) AS MotherName, 0 AS Level
    FROM @FamilyTree
    WHERE FatherID IS NULL 
      AND MotherID IS NULL
    UNION ALL
    SELECT 
      f.ID, 
      f.Name AS ParentName, 
      f.MotherID, 
      f.FatherID, 
      c.Name AS FatherName, 
      c2.Name AS MotherName, 
      Level + 1
    FROM @FamilyTree AS F
    INNER JOIN FamilyCTE c ON F.FatherID = c.ID
    INNER JOIN @FamilyTree c2 ON f.MotherID = c2.ID
)

SELECT * FROM FamilyCTE 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/84004/family-tree-sql-query)

如果想获得与您在问题中发布的内容一样的确切输出，只需忽略`FatherName`and`MotherName`并将选择限制为`SELECT * FROM FamilyCTE`您要选择的列`WHERE ID = 1`，例如使用锚查询中的起始祖父。如以下演示所示：

## [演示](https://data.stackexchange.com/stackoverflow/query/84006/family-tree-sql-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:25:15.417

```
select t1.ID, t1.MotherID, 
t1.FatherID,
t1.name, 
t2.Name,
Level
from table1 t1
left outer join table2 t2 on t1.FatherID =t2.FatherID 
```

# log4j - weblogic log4j 滚动追加器

> ID：13171933
> 
> 赞同：3
> 
> 时间：2012-11-01T06:18:07.290
> 
> 标签：log4j

```
log4j:ERROR Could not create an Appender. Reported error follows.
java.lang.ClassNotFoundException: org.apache.log4j.rolling.RollingFileAppender
    at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:297)
    at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:270)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.findClass(ChangeAwareClassLoader.java:64)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:179)
    at weblogic.utils.classloaders.ChangeAwareClassLoader.loadClass(ChangeAwareClassLoader.java:52)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.apache.log4j.helpers.Loader.loadClass(Loader.java:198)
    at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:247)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:176)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:191)
    at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:284)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:176)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:191)
    at org.apache.log4j.xml.DOMConfigurator.parseChildrenOfLoggerElement(DOMConfigurator.java:523)
    at org.apache.log4j.xml.DOMConfigurator.parseCategory(DOMConfigurator.java:436)
    at org.apache.log4j.xml.DOMConfigurator.parse(DOMConfigurator.java:999)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:867)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:773)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:483)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:127) 
```

请帮我解决这个问题。我已经在 weblogic 服务器域中复制了 log4j.xml，但是当我启动服务器时，我在控制台上得到了这个异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T04:52:16.157

看起来你`apache-log4j-extras-1.1.jar`在你的类路径中丢失了；为了使用`RollingFileAppender`.

[http://www.apache.org/dyn/closer.cgi/logging/log4j/extras/1.2.17/apache-log4j-extras-1.2.17-bin.tar.gz](http://www.apache.org/dyn/closer.cgi/logging/log4j/extras/1.2.17/apache-log4j-extras-1.2.17-bin.tar.gz)

# iphone - 从 iphone 发送多部分实体数据

> ID：13171934
> 
> 赞同：2
> 
> 时间：2012-11-01T06:18:07.930
> 
> 标签：iphone, ios, multipartentity

我使用以下代码将多部分实体数据发送到服务器，服务器每次都给我 403 响应。

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:@"http://www.britecase.com/administrator/components/com_ivmstore/ivmwebservices/vmphotos.php"]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = [NSString stringWithFormat:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition:form-data; name=\"files[]\"; filename=\"ipodfile.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Type:application/octet-stream \r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:UIImageJPEGRepresentation(image.image, 90)]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:body];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",returnString); 
```

我每次都得到以下回应。

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /administrator/components/com_ivmstore/ivmwebservices/vmphotos.php
on this server.</p>
<hr>
<address>Apache Server at www.britecase.com Port 80</address>
</body></html> 
```

我们的 android 应用程序成功响应。在这里，我知道他们正在使用以下代码用于多部分实体`browser compatible`。

```
MultipartEntity entity = new MultipartEntity(
                        HttpMultipartMode.BROWSER_COMPATIBLE);
                                          ^^^^^^^^^^^^^^^^^^ 
```

# android - Listview 正好显示两个列表单元格

> ID：13171936
> 
> 赞同：1
> 
> 时间：2012-11-01T06:18:22.033
> 
> 标签：android, listview, scrollview, listactivity, listadapter

我想创建一个列表视图来膨胀自定义单元格。单元格大小可能会根据其中的文本大小而有所不同。可以有 n 个单元格。一次，我只想在列表视图中准确显示两个单元格。即使当我滚动时，列表视图也应该恰好包含两个单元格，即使单元格的大小不同。任何人都可以建议一种方法来实现这一点吗？

# teamcity - TeamCity 功能可在测试/构建失败时发送自定义电子邮件

> ID：13171940
> 
> 赞同：1
> 
> 时间：2012-11-01T06:18:49.583
> 
> 标签：teamcity, teamcity-7.1

我正在使用 TestNG 来运行我的 Java/JavaScript 测试用例。为了测试 JavaScript 模块，我使用 FuncUnit。用例如下：

1.  TeamCity 运行 Gradle 文件来构建和测试项目中的所有模块。
2.  Gradle 调用 TestNG 来运行测试用例。
3.  TestNG 运行 Java 单元测试用例。在这个测试用例中，我使用 Selenium 在浏览器中打开 FuncUnit 测试用例 HTML 页面。FuncUnit 测试用例运行完成后，我使用 Selenium 编译测试结果并将其存储在 Java 实例变量中。如果检测到任何 JavaScript 测试失败，我会使用assetTrue() 使 Java 单元测试用例失败。
4.  测试失败会导致构建失败，TeamCity 会向用户发送电子邮件。

我们不想发送的电子邮件中有不需要的堆栈跟踪。我们只对存储在 Java 变量中的细节感兴趣（在第 3 步中），我们可以执行 System.out.println() 并且此变量数据将通过邮件发送。如果有任何其他优雅的解决方案——我们可以在不依赖 Stdout 语句的情况下将自定义数据推送到电子邮件，我们也对此持开放态度。

另外，我希望这个功能是特定于项目的。我们对一个项目的更改不应影响其他项目的电子邮件模板。我附上了一封由 TeamCity 发送的示例电子邮件，供您参考。

我正在使用 TeamCity 7.1

# asp.net - 模拟文件上传影响

> ID：13171942
> 
> 赞同：0
> 
> 时间：2012-11-01T06:18:57.637
> 
> 标签：asp.net

我有一个管理系统，目前允许登录用户上传文件，但我发现它无法覆盖具有相同文件名的文件，它返回访问被拒绝错误

我想知道如果我在 web.config 中设置 impersonation = true，会有什么影响？（我知道还有另一种方法可以解决我的上传覆盖问题，但只是想问一下模拟的影响）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:14:29.260

这显然是与权限相关的问题，因此您需要检查用户应用程序池、网络服务和 aspnet 文件夹的权限

检查拒绝访问的文件的只读属性。很多时候，用户从 CD 上传图像。

保存文件时，请尝试删除只读标志并保存文件，以便在覆盖时不会引发错误。

# android - 如何在android中并行运行具有不同参数的函数？

> ID：13171948
> 
> 赞同：0
> 
> 时间：2012-11-01T06:19:25.717
> 
> 标签：android, android-asynctask

我有一个名为 computeStrokes 的函数，我需要使用不同的参数调用它两次。Asynctask 中有一个名为**executeOnExecutor**的方法，它允许 asynctask 并行运行两个线程。我无法理解如何在AsyncTask 的**doInBackground**方法。有人可以帮我处理本节的代码吗，即**doInBackground**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:34:39.047

如果您确实需要从 AsyncTask 并行运行 2 个任务，那么您可以在 doInBackground 中启动 2 个任务并在那里等待两者完成。这可以在[Executors](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html) and a [Future的帮助下实现](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)

# iphone - 录制语音和音频文件混合问题

> ID：13171950
> 
> 赞同：0
> 
> 时间：2012-11-01T06:19:27.403
> 
> 标签：iphone, objective-c, ios6, avaudioplayer, avaudiorecorder

在这里，我使用以下[单击此处](https://stackoverflow.com/questions/1667603/mixing-audio-on-the-iphone)附加的代码来混合音频文件。但是当我使用它来混合录制的语音和音频文件时，它对我不起作用。那么我该如何解决这个问题。您可以通过此链接查看我的代码[Code Link](http://pastebin.com/nU8DK495)

# android - 通过 3g 连接的 android mediaplayer 无法正常工作，但可以在 wifi 上工作

> ID：13171951
> 
> 赞同：0
> 
> 时间：2012-11-01T06:19:42.567
> 
> 标签：android, connection, media-player, wifi, 3g

我正在开发一个使用 videoView 从 url 显示 .mp4 视频的项目。我的代码在模拟器中运行良好，但在物理设备（Samsung siii）上只能在 WiFi 上运行，而不能在 3G 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:55:42.070

youtube 视频在 3g 上运行良好，我用其他播放器 vplayer 测试相同的视频，并且 itz 运行良好。

这是我的代码

包 com.video;

公共类 StreamingVideoPlayer 扩展 Activity 实现 OnCompletionListener、OnErrorListener、OnInfoListener、OnBufferingUpdateListener、OnPreparedListener、OnSeekCompleteListener、OnVideoSizeChangedListener、SurfaceHolder.Callback、MediaController.MediaPlayerControl {

```
MediaController controller;
Display currentDisplay;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
MediaPlayer mediaPlayer;

View mainView;
TextView statusView;

int videoWidth = 0;
int videoHeight = 0;

boolean readyToPlay = false;
public final static String LOGTAG = "STREAMING_VIDEO_PLAYER";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    mainView = this.findViewById(R.id.MainView);

    statusView = (TextView) this.findViewById(R.id.StatusTextView);

    surfaceView = (SurfaceView) this.findViewById(R.id.SurfaceView);
    surfaceHolder = surfaceView.getHolder();

    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    mediaPlayer = new MediaPlayer();

    statusView.setText("MediaPlayer Created");

    mediaPlayer.setOnCompletionListener(this);
    mediaPlayer.setOnErrorListener(this);
    mediaPlayer.setOnInfoListener(this);
    mediaPlayer.setOnPreparedListener(this);
    mediaPlayer.setOnSeekCompleteListener(this);
    mediaPlayer.setOnVideoSizeChangedListener(this);
    mediaPlayer.setOnBufferingUpdateListener(this);

    //String filePath = "http://sffsapps.s3.amazonaws.com/02-benefits-100dc.mp4";

//  String filePath="http://100dcapps.s3.amazonaws.com/droidtest/index.droid.mp4"; 

String filePath="https://100dcapps.s3.amazonaws.com/droidtest/index.mp4";

    try {
        mediaPlayer.setDataSource(filePath);
    } catch (IllegalArgumentException e) {
        Log.v(LOGTAG, e.getMessage());
        finish();
    } catch (IllegalStateException e) {
        Log.v(LOGTAG, e.getMessage());
        finish();
    } catch (IOException e) {
        Log.v(LOGTAG, e.getMessage());
        finish();
    }

    statusView.setText("MediaPlayer DataSource Set");
    currentDisplay = getWindowManager().getDefaultDisplay();
    controller = new MediaController(this);
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.v(LOGTAG, "surfaceCreated Called");

    mediaPlayer.setDisplay(holder);
    statusView.setText("MediaPlayer Display Surface Set");

    try {
        mediaPlayer.prepareAsync();
    } catch (IllegalStateException e) {
        Log.v(LOGTAG, "IllegalStateException " + e.getMessage());
        finish();
    }

    statusView.setText("MediaPlayer Preparing");
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    Log.v(LOGTAG, "surfaceChanged Called");
}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.v(LOGTAG, "surfaceDestroyed Called");
}

public void onCompletion(MediaPlayer mp) {
    Log.v(LOGTAG, "onCompletion Called");
    statusView.setText("MediaPlayer Playback Completed");
}

public boolean onError(MediaPlayer mp, int whatError, int extra) {
    Log.v(LOGTAG, "onError Called");
    statusView.setText("MediaPlayer Error");
    if (whatError == MediaPlayer.MEDIA_ERROR_SERVER_DIED) {
        Log.v(LOGTAG, "Media Error, Server Died " + extra);
    } else if (whatError == MediaPlayer.MEDIA_ERROR_UNKNOWN) {
        Log.v(LOGTAG, "Media Error, Error Unknown " + extra);
    }
    return false;
}

public boolean onInfo(MediaPlayer mp, int whatInfo, int extra) {
    statusView.setText("MediaPlayer onInfo Called");
    if (whatInfo == MediaPlayer.MEDIA_INFO_BAD_INTERLEAVING) {
        Log.v(LOGTAG, "Media Info, Media Info Bad Interleaving " + extra);
    } else if (whatInfo == MediaPlayer.MEDIA_INFO_NOT_SEEKABLE) {
        Log.v(LOGTAG, "Media Info, Media Info Not Seekable " + extra);
    } else if (whatInfo == MediaPlayer.MEDIA_INFO_UNKNOWN) {
        Log.v(LOGTAG, "Media Info, Media Info Unknown " + extra);
    } else if (whatInfo == MediaPlayer.MEDIA_INFO_VIDEO_TRACK_LAGGING) {
        Log.v(LOGTAG, "MediaInfo, Media Info Video Track Lagging " + extra);
    } /*
     * Android version 2.0 or higher else if (whatInfo ==
     * MediaPlayer.MEDIA_INFO_METADATA_UPDATE) { Log.v(LOGTAG,
     * "MediaInfo, Media Info Metadata Update " + extra); }
     */
    return false;
}

public void onPrepared(MediaPlayer mp) {
    Log.v(LOGTAG, "onPrepared Called");
    statusView.setText("MediaPlayer Prepared");

    videoWidth = mp.getVideoWidth();
    videoHeight = mp.getVideoHeight();

    Log.v(LOGTAG, "Width: " + videoWidth);
    Log.v(LOGTAG, "Height: " + videoHeight);

    if (videoWidth > currentDisplay.getWidth()
            || videoHeight > currentDisplay.getHeight()) {
        float heightRatio = (float) videoHeight
                / (float) currentDisplay.getHeight();
        float widthRatio = (float) videoWidth
                / (float) currentDisplay.getWidth();

        if (heightRatio > 1 || widthRatio > 1) {
            if (heightRatio > widthRatio) {
                videoHeight = (int) Math.ceil((float) videoHeight
                        / (float) heightRatio);
                videoWidth = (int) Math.ceil((float) videoWidth
                        / (float) heightRatio);
            } else {
                videoHeight = (int) Math.ceil((float) videoHeight
                        / (float) widthRatio);
                videoWidth = (int) Math.ceil((float) videoWidth
                        / (float) widthRatio);
            }
        }
    }

    surfaceView.setLayoutParams(new LinearLayout.LayoutParams(videoWidth,
            videoHeight));
    controller.setMediaPlayer(this);
    controller.setAnchorView(this.findViewById(R.id.MainView));
    controller.setEnabled(true);
    controller.show();

    mp.start();
    statusView.setText("MediaPlayer Started");
}

public void onSeekComplete(MediaPlayer mp) {
    Log.v(LOGTAG, "onSeekComplete Called");
}

public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
    Log.v(LOGTAG, "onVideoSizeChanged Called");

    videoWidth = mp.getVideoWidth();
    videoHeight = mp.getVideoHeight();

    Log.v(LOGTAG, "Width: " + videoWidth);
    Log.v(LOGTAG, "Height: " + videoHeight);

    if (videoWidth > currentDisplay.getWidth()
            || videoHeight > currentDisplay.getHeight()) {
        float heightRatio = (float) videoHeight
                / (float) currentDisplay.getHeight();
        float widthRatio = (float) videoWidth
                / (float) currentDisplay.getWidth();

        if (heightRatio > 1 || widthRatio > 1) {
            if (heightRatio > widthRatio) {
                videoHeight = (int) Math.ceil((float) videoHeight
                        / (float) heightRatio);
                videoWidth = (int) Math.ceil((float) videoWidth
                        / (float) heightRatio);
            } else {
                videoHeight = (int) Math.ceil((float) videoHeight
                        / (float) widthRatio);
                videoWidth = (int) Math.ceil((float) videoWidth
                        / (float) widthRatio);
            }
        }
    }

    surfaceView.setLayoutParams(new LinearLayout.LayoutParams(videoWidth,
            videoHeight));
}

public void onBufferingUpdate(MediaPlayer mp, int bufferedPercent) {
    statusView.setText("MediaPlayer Buffering: " + bufferedPercent + "%");
    Log.v(LOGTAG, "MediaPlayer Buffering: " + bufferedPercent + "%");
}

public boolean canPause() {
    return true;
}

public boolean canSeekBackward() {
    return true;
}

public boolean canSeekForward() {
    return true;
}

public int getBufferPercentage() {
    return 0;
}

public int getCurrentPosition() {
    return mediaPlayer.getCurrentPosition();
}

public int getDuration() {
    return mediaPlayer.getDuration();
}

public boolean isPlaying() {
    return mediaPlayer.isPlaying();
}

public void pause() {
    if (mediaPlayer.isPlaying()) {
        mediaPlayer.pause();
    }
}

public void seekTo(int pos) {
    mediaPlayer.seekTo(pos);
}

public void start() {
    mediaPlayer.start();
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    /*if (controller.isShowing()) {
        controller.hide();
    } else {*/
        controller.show();
    //}
    return false;
} 
```

}

# netbeans - Netbeans 创建 JAR 类路径

> ID：13171954
> 
> 赞同：0
> 
> 时间：2012-11-01T06:19:50.113
> 
> 标签：netbeans, jar, classpath

我已经在 Netbeans 中设置了一个类路径，该类路径指向我的项目文件夹中的目录（属性），如下图所示。该文件夹包含项目正在使用的属性文件。

![在 Netbeans 中设置类路径](../Images/bd65cf58af74ea07cf845106299c5b72.png)

现在的问题是，当我使用 Netbeans Clean and Build 功能时，它会生成 dist 文件夹。没有创建属性文件夹...我手动将项目文件夹中的属性文件夹复制到这个 dist 文件夹。

但是，该程序无法检测到属性文件。任何人都知道为什么它可以在 Netbeans 中工作（F6 功能键）并且在命令行中无法工作。

（我只是在命令行输入：java -jar MyApp.jar）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:26:21.027

我通过使用这里解释的这种方法解决了它：http: [//creechy.wordpress.com/2012/08/31/adding-custom-class-path-entries-to-a-netbeans-java-application-project/](http://creechy.wordpress.com/2012/08/31/adding-custom-class-path-entries-to-a-netbeans-java-application-project/)

# c++ - C++链表实现

> ID：13171955
> 
> 赞同：0
> 
> 时间：2012-11-01T06:19:50.503
> 
> 标签：c++, oop, linked-list

我正在做一个任务，我被要求在 C++ 中实现一个链表。到目前为止，除了我创建一个新列表时，一切都很好。在我的方法`create_list()`中。在我为我分配内容和 ID 号`Field`并尝试调用后，`GetNext()`我收到一条错误消息：`Request for member 'GetNext()' in 'Node' which is a non-class type '*Field'.`我对 C++ 语法和面向对象编程仍然很陌生。我究竟做错了什么？我认为通过使用`Field *Node = new Field(SIZE, EMPTY);`我的变量`Node`将是类类型的行`Field`......？

```
#include <iostream>
#include <ctype.h>

using namespace std;

typedef enum { EMPTY, OCCUPIED } FIELDTYPE;

// Gameboard Size
int SIZE;  

class Field {

private:
int _SquareNum; 
FIELDTYPE _Content; 
Field* _Next;

public: 
// Constructor
Field() { }

// Overload Constructor
Field(int SquareNum, FIELDTYPE Entry) { _SquareNum = SquareNum; _Content = Entry; }

// Get the next node in the linked list
Field* GetNext() { return _Next; }

// Set the next node in the linked list
void SetNext(Field *Next) { _Next = Next; }

// Get the content within the linked list
FIELDTYPE GetContent() { return _Content; }

// Set the content in the linked list
void SetContent(FIELDTYPE Content) { _Content = Content; }

// Get square / location 
int GetLocation() { return _SquareNum; }

// Print the content
void Print() { 

    switch (_Content) {

        case OCCUPIED: 
            cout << "Field " << _SquareNum << ":\tOccupied\n"; 
            break;
        default:
            cout << "Field " << _SquareNum << ":\tEmpty\n";
            break;
    }

} 

}*Gameboard; 
```

这是我的 create_list() 方法：

```
void create_list()
{
int Element; 

cout << "Enter the size of the board: ";
cin >> SIZE; 
for(Element = SIZE; Element > 0; Element--){
    Field *Node = new Field(SIZE, EMPTY);
    Node.GetNext() = Gameboard; // line where the error is 
    Gameboard = Node;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:23:21.640

`.`用于寻址对象中的成员和对对象的引用。`Node`但是，它是*指向*对象的指针。所以你需要先把它变成一个参考，然后才能和`.`. 这意味着做`(*Node).GetNext()`. 或者你可以使用简写：`Node->GetNext()`- 这两个是完全等价的。

一个很好的助记符是你使用带指针的尖运算符:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:23:17.333

您正在调用`Node.GetNext()`，但`Node`它是一个指针。您需要使用`->`运算符而不是`.`运算符，如`Node->GetNext()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T06:24:45.963

声明中没有

```
Field *Node = new Field(SIZE, EMPTY); 
```

节点是指向字段的类型*指针。*

如果您有一个指向类的指针并且您想访问该类的成员，则修复很简单`->`。

```
Node->GetNext() = Gameboard; 
```

我认为您的代码还有其他错误，而且我认为即使有了这个“修复”它也不会起作用。可能你真正想要的是

```
Node->SetNext(Gameboard); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T06:52:59.123

如果要设置为左值，该函数必须返回一个参考值。您的代码需要一些更改：

```
// Get the next node in the linked list
Field& GetNext() { return *_Next; } 
```

那么您可以将该函数用作左值

```
Node->GetNext() = *Gameboard; 
```

# iphone - iPhone中的UIScrollView？

> ID：13171957
> 
> 赞同：0
> 
> 时间：2012-11-01T06:20:26.580
> 
> 标签：iphone, ios, objective-c, image, scrollview

我在 iPhone 应用程序中工作，使用 UIScrollView 设置为水平，在 UIScrollView 中添加 5 个图像，并且工作正常。（我想在打开时间显示第二张图像）然后我尝试，当屏幕显示时，在显示第二张图像时。但是我尽力了，但我没有这样做，请任何人帮助我

提前致谢

我试过这个：

```
 UIScrollView *scroll1 = [[UIScrollView alloc] initWithFrame:CGRectMake(10, 45, 300, 360)];
    scroll1.contentSize=CGSizeMake(2700, 360);
    [scroll1 setShowsHorizontalScrollIndicator:NO];
    scroll1.pagingEnabled=YES;
    [self.view addSubview:scroll1];

    UIImageView *SlideImage = [[UIImageView alloc]initWithFrame:CGRectMake(0,0, 300, 360)];
    SlideImage.image=[UIImage imageNamed:@"img1.png"];
    SlideImage.backgroundColor=[UIColor clearColor];
    [scroll1 addSubview:SlideImage];

    UIImageView *SlideImage1 = [[UIImageView alloc]initWithFrame:CGRectMake(300,0, 300, 360)];
    SlideImage1.image=[UIImage imageNamed:@"img2.png"];
    SlideImage1.backgroundColor=[UIColor clearColor];
    [scroll1 addSubview:SlideImage1];

    UIImageView *SlideImage2 = [[UIImageView alloc]initWithFrame:CGRectMake(600,0, 300, 360)];
    SlideImage2.image=[UIImage imageNamed:@"img3.png"];
    SlideImage2.backgroundColor=[UIColor clearColor];
    [scroll1 addSubview:SlideImage2];

    UIImageView *SlideImage3 = [[UIImageView alloc]initWithFrame:CGRectMake(900,0, 300, 360)];
    SlideImage3.image=[UIImage imageNamed:@"img4.png"];
    SlideImage3.backgroundColor=[UIColor clearColor];
    [scroll1 addSubview:SlideImage3];

    UIImageView *SlideImage4 = [[UIImageView alloc]initWithFrame:CGRectMake(1200,0, 300, 360)];
    SlideImage4.image=[UIImage imageNamed:@"img5.png"];
    SlideImage4.backgroundColor=[UIColor clearColor];
    [scroll1 addSubview:SlideImage4];

    UIImageView *SlideImage5 = [[UIImageView alloc]initWithFrame:CGRectMake(1500,0, 300, 360)];
    SlideImage5.image=[UIImage imageNamed:@"img6.png"];
    SlideImage5.backgroundColor=[UIColor clearColor];
    [scroll1 addSubview:SlideImage5]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T06:24:15.150

试试这个

```
[scroll1 setContentOffset:CGPointMake(300, 0) animated:FALSE]; 
```

# jquery - 将 html5 画布保存为服务器中的图像

> ID：13171964
> 
> 赞同：5
> 
> 时间：2012-11-01T06:21:05.873
> 
> 标签：jquery, html, html5-canvas

我有一个带有图像的 html5 画布。人们可以使用 javascript 编辑/调整图像。毕竟，他们必须可以选择在他们的 Facebook 墙上发布该图像。据我所知，我们可以满足这样的要求

```
Save Canvas data as image in to my server      -->     Post to Facebook with its image URL   -->    Delete the image on call back. 
```

首先是这个假设是正确的，其次是

如何在单击按钮时使用 javascript 将 HTML 5 Canvas 保存为 png 图像？是否可以 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T06:24:30.050

您可以使用 JavaScript 将画布保存为特定的图像格式

```
var mycanvas = document.getElementById("whatever"); //get your canvas
var image    = mycanvas.toDataURL("image/png"); //Convert the canvas to image, currently converting to .png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-06T05:00:13.500

首先，您必须使用 Javascript 将图像转换为 base64 格式：

```
var canvas = document.getElementById("canvas");
var data = canvas.toDataURL("image/jpeg"); 
```

现在通过PHP转换为图像并将其保存到服务器

```
file_put_contents("myimage.jpg", base64_decode(explode(",", $_GET['data'])[1])); 
```

就这样

# php - PHP访问外部服务器中的API

> ID：13171967
> 
> 赞同：1
> 
> 时间：2012-11-01T06:21:11.930
> 
> 标签：php, api, curl

我正在运行一个运行主要网站的服务器，例如[http://www.mywebsite.com](http://www.mywebsite.com)和另一个拥有所有 API 的服务器可以说。[http://api.mywebsite.com](http://api.mywebsite.com)。这两者都是使用不同的技术构建的。

我目前所做的是进行 cURL 调用以从 www.mywebsite.com 上的 api.mywebsite.com 访问来自 API 的数据，但它在 www.mywebsite.com 上的页面响应时间非常繁重。

所以我正在计划一个替代图书馆或其他可以帮助进行类似调用但资源消耗更少的东西。

PS：我向服务器发出 GET/POST/PUT/DELETE 请求，所以不能使用只提供 GET 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:34:48.923

为什么不直接从数据库访问数据？
您是否尝试过使用 MemCache 或 Redis 进行缓存？

# css - 放大镜（缩放） 光标在图像上

> ID：13171968
> 
> 赞同：31
> 
> 时间：2012-11-01T06:21:14.830
> 
> 标签：css, fancybox, mouse-cursor

我正在寻找一种解决方案，将光标悬停在 Fancybox 图像上时将光标更改为放大镜。

就像在 Pinterest 上一样，当您将图像悬停时（使用 chrome）。

到目前为止，我有这个没有跨浏览器支持。

```
.picture img {
    cursor:url(/img/layout/backgrounds/moz-zoom.gif), -moz-zoom-in;
} 
```

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-11-07T19:01:47.320

您可以使用：

```
.picture img{
    cursor: -moz-zoom-in; 
    cursor: -webkit-zoom-in; 
    cursor: zoom-in;
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-01T06:25:35.103

为此，您需要使用光标文件`.cur`而不是~~`.gif`~~文件，所以它就像

```
.picture img {
    cursor:url(/img/layout/backgrounds/zoom.cur), -moz-zoom-in;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-28T20:52:44.970

根据[caniuse.com](http://caniuse.com/#feat=css3-cursors-newer)的说法，现在相关浏览器`cursor: zoom-in;`当然除了 IE 都支持。w3schools 上的 IE 使用率下降到 6.1%...时钟的 IE 正在滴答作响！

```
.picture img{
   cursor: zoom-in;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T00:42:42.040

我已经找到了一种让光标在图像上工作的方法，但它从来没有作为光标工作

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* {box-sizing: border-box;}

.img-magnifier-container {
  position:relative;
}

.img-magnifier-glass {
  position: absolute;
  border: 3px solid #000;
  border-radius: 50%;
  cursor: none;
  /*Set the size of the magnifier glass:*/
  width: 100px;
  height: 100px;
}
</style>
<script>
function magnify(imgID, zoom) {
  var img, glass, w, h, bw;
  img = document.getElementById(imgID);
  /*create magnifier glass:*/
  glass = document.createElement("DIV");
  glass.setAttribute("class", "img-magnifier-glass");
  /*insert magnifier glass:*/
  img.parentElement.insertBefore(glass, img);
  /*set background properties for the magnifier glass:*/
  glass.style.backgroundImage = "url('" + img.src + "')";
  glass.style.backgroundRepeat = "no-repeat";
  glass.style.backgroundSize = (img.width * zoom) + "px " + (img.height * zoom) + "px";
  bw = 3;
  w = glass.offsetWidth / 2;
  h = glass.offsetHeight / 2;
  /*execute a function when someone moves the magnifier glass over the image:*/
  glass.addEventListener("mousemove", moveMagnifier);
  img.addEventListener("mousemove", moveMagnifier);
  /*and also for touch screens:*/
  glass.addEventListener("touchmove", moveMagnifier);
  img.addEventListener("touchmove", moveMagnifier);
  function moveMagnifier(e) {
    var pos, x, y;
    /*prevent any other actions that may occur when moving over the image*/
    e.preventDefault();
    /*get the cursor's x and y positions:*/
    pos = getCursorPos(e);
    x = pos.x;
    y = pos.y;
    /*prevent the magnifier glass from being positioned outside the image:*/
    if (x > img.width - (w / zoom)) {x = img.width - (w / zoom);}
    if (x < w / zoom) {x = w / zoom;}
    if (y > img.height - (h / zoom)) {y = img.height - (h / zoom);}
    if (y < h / zoom) {y = h / zoom;}
    /*set the position of the magnifier glass:*/
    glass.style.left = (x - w) + "px";
    glass.style.top = (y - h) + "px";
    /*display what the magnifier glass "sees":*/
    glass.style.backgroundPosition = "-" + ((x * zoom) - w + bw) + "px -" + ((y * zoom) - h + bw) + "px";
  }
  function getCursorPos(e) {
    var a, x = 0, y = 0;
    e = e || window.event;
    /*get the x and y positions of the image:*/
    a = img.getBoundingClientRect();
    /*calculate the cursor's x and y coordinates, relative to the image:*/
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    /*consider any page scrolling:*/
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return {x : x, y : y};
  }
}
</script>
</head>
<body>

<p>Mouse over the image:</p>

<div class="img-magnifier-container">
  <img id="myimage" src="https://lh3.googleusercontent.com/C07Jx1HcnAiXyAZNsp0E7wXHGiA9E9Tr5oEPQT3VkU3WSCOIOOBBEL3Sk8sEk-MjFJx0fw=s163" width="600" height="400">
</div>
<script>
/* Initiate Magnify Function
with the id of the image, and the strength of the magnifier glass:*/
magnify("myimage", 3);
</script>

</body>
</html>
```

# charts - RCP Netbean 中的 jzy3d 显示问题

> ID：13171969
> 
> 赞同：0
> 
> 时间：2012-11-01T06:21:22.437
> 
> 标签：charts, netbeans-7, jogl, jzy3d

我已在我的 Netbean 应用程序中将 jzyv8 升级到 v9。但是我无法使用 Jzy3d v9 和 Jogl 2 调整/最大化 Jpanel/frame 的大小，在调整面板大小后出现空白屏幕，如果我深入研究代码视图对象在 Render3d 对象中为空。

GJPanel 处理渲染器。

```
public void reshape(GLAutoDrawable canvas, int x, int y, int width, int height){
    //System.err.println("reshape with " + width + " " + height);
    this.width  = width;
    this.height = height;

    if(view != null){
        view.dimensionDirty = true;

        if(canvas!=null){
            //GL gl1 = canvas.getGL();
            GL2 gl = canvas.getGL().getGL2();
            view.clear(gl);
            view.render(gl, glu);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:51:21.430

使用 NEWT 工具包而不是 AWT 为我解决了这个问题：

```
Chart chart = new Chart(Quality.Advanced, "newt"); 
```

# android - 我如何在 Android 中获取默认应用程序包的规范名称

> ID：13171970
> 
> 赞同：0
> 
> 时间：2012-11-01T06:21:24.823
> 
> 标签：android, packages, canonical-name

我需要知道一些默认 Android 应用程序的规范名称，例如电子邮件、联系人和其他应用程序。我希望能够使用它们的规范名称来启动它们。

像

```
Intent i = new Intent("com.pacakge.canonicalname"); 
```

那么有什么想法可以让我获得默认 Android 应用程序的规范包名称列表吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:49:27.167

PackageManager 类中有一个名为 currentToCanonicalPackageNames(String[] names) 的方法，我怀疑它可用于执行您的要求。所以像：

```
String[] names = {"Email","Contacts"};
try{
  String[] canonicalNames = context.getPackageManager().currentToCanonicalPackageNames(names);

  //do whatever you want with canonicalNames, e.g. launch the email app,
  Intent email = context.getPackageManager().getLaunchIntentForPackage(canonicalNames[0]);
  context.startActivity(email);

}catch(NameNotFoundException e){
  Log.d("MY ACTIVITY NAME", "Package name(s) not found.");
} 
```

我正在考虑自己做这种事情，但还没有尝试过这段代码，所以请谨慎使用。

编辑：所以今晚试了一下，解决方案可能不是你想要的。假设您只从这些应用程序的显示名称开始（技术上称为应用程序标签），您可能必须实际检查设备上安装的所有应用程序以查找该应用程序标签。我刚刚在我的博客上发布了我的解决方案，所以[看看](http://teschrock.wordpress.com/2012/11/29/getting-a-package-name-from-an-application-label-display-name/)。

# javascript - 如何分别将可拖动元素附加到多个可放置 div

> ID：13171986
> 
> 赞同：0
> 
> 时间：2012-11-01T06:22:22.717
> 
> 标签：javascript, jquery, css

我的可拖动元素有一点问题，担心它附加到多个可放置的 div 上。我想编写代码，以便我可以附加到任何可放置的 div 而不影响任何其他可放置的 div。我想我所要做的就是包括我想成为可放置 div 的盒子的 id，这样就可以了。

```
$('#sortcard, #dropbox, #dropbox1').droppable({accept:'.sorting', hoverClass:'border', tolerance: 'touch',
    drop: function (e, ui){
    $('#sortcard, #dropbox,#dropbox1').append(ui.draggable.html() + '<br/>');
    $("#add_friend").show().fadeOut(12000);
    }
    }); 
```

但正如[这里](https://jsfiddle.net/Kxtvg/82/)看到的问题是，当只有一个盒子被触摸时，所有的 div 都会受到影响。我很乐意并且很感激知道如何解决这个问题以及不再犯这个错误的知识以及任何其他提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:25:56.447

你的问题是这里的这一行：

```
$('#sortcard, #dropbox,#dropbox1').append(ui.draggable.html() + '<br/>'); 
```

这意味着将其附加到所有这些元素。也许您应该使用`$(this)`or`$(e.target)`来代替选择器。这意味着它只会附加到被拖放的元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T06:35:55.630

使用这个....这是小提琴

[http://jsfiddle.net/Kxtvg/83/](http://jsfiddle.net/Kxtvg/83/)

改变了

```
$('#sortcard, #dropbox,#dropbox1').append(ui.draggable.html() + '<br/>'); 
```

到

```
$(this).append(ui.draggable.html() + '<br/>'); 
```

您将 html 附加到所有提到的元素`$('#sortcard, #dropbox,#dropbox1')`。使用`$(this)`只会将内容拖放到选定的元素

# spring - 通过 AOP 独立应用程序的 Spring Hibernate 连接

> ID：13171987
> 
> 赞同：0
> 
> 时间：2012-11-01T06:22:44.640
> 
> 标签：spring, hibernate, aop

我正在尝试开发基于注释的 Spring Hibernate 独立应用程序以连接到 DB。我浏览了一些博客，想知道我们不应该使用 hibernateTemplate 因为将您的应用程序紧密耦合到 spring 框架。出于这个原因，Spring 建议不再使用 HibernateTemplate。此外，我的要求更改为 Spring Hibernate with AOP 使用声明性事务管理。我是 AOP 概念的新手。任何人都可以通过AOP举一个关于Spring Hibernate Connection的例子。那对我会有很大的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:35:25.583

如果您正在寻找项目结构的示例，您可能想要使用 maven 原型，它为您提供已经工作的 Spring + Hibernate 或 Spring + JPA 配置。他们可能还为您提供一个网络层（或不提供），但您可以根据需要将其删除。

要尝试这样做，请安装 Maven 并键入：

```
mvn archetype:generate 
```

顺便说一句，我不认为使用 HibernateTemplate 有什么大不了的。许多人仍在使用它。但是你最好注入`Hibernate`会话工厂并使用上下文会话`getCurrentSession()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:47:54.443

我会使用 JPA 而不是普通的 Hibernate。您当然可以使用 Hibernate 作为提供程序。我想您知道如何在独立应用程序中运行 Spring 容器。只需按照[此处](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-jpa)文档中的步骤操作即可。使用`LocalContainerEntityManagerFactoryBean`. 然后[阅读事务管理](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-jpa-tx)。

有一个新功能可以让您在没有`persistence.xml`文件的情况下启动 JPA。[在这里阅读](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-jpa-without-xml)。

如果您仍想使用普通的 Hibernate ，请[遵循文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/orm.html#orm-hibernate)。

# windows - 通过重新排列名称来批量重命名文件

> ID：13171989
> 
> 赞同：0
> 
> 时间：2012-11-01T06:22:50.930
> 
> 标签：windows, scripting, file-rename

已经有很多关于批量重命名的问题，但我认为我的问题有点不同。我需要通过切换文件名的组成部分来重命名很多文件。

例子：

**原始文件名**：BGP-2012-LOG-KTH-01.doc

**新文件名**：2012-BGP-KTH-LOG-01.doc

文件名的不同部分由破折号分隔。自从我不得不编写任何脚本以来已经很久了，反正我从来都不擅长它。希望有人可以提供帮助。我在 Windows 7 上，所以 powershell 或 vbscript 可能是最简单的（但我不是专家）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:54:22.087

```
ls | %{ rename-item $_.name ($_.name -replace '^(\w+)-(\w+)-(\w+)-(\w+)', '$2-$1-$4-$3')} 
```

# c# - 为什么我不能调用 Math.Round(double,int) 重载

> ID：13171994
> 
> 赞同：0
> 
> 时间：2012-11-01T06:23:32.000
> 
> 标签：c#, .net, floating-point, double

在 .NET 库中有类似的功能
`System.Math.Round(double, int)`

但是为什么我需要将 double 值转换为 float 才能使其工作..??
查看以下屏幕截图：

![在此处输入图像描述](../Images/85fb455083fae266dd56f6efaaa06612.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T06:29:38.830

以下函数

```
Math.Round(double value, int digits) 
```

![Math.Round(double value, int digits) 返回一个 double](../Images/30f3533e78b58db6e28b7a586c697b06.png)

返回一个`double`. 我看到您已尝试为输出定义一个`float`名称，其中是一个双精度值，并使用以下代码表示一个整数`d``Math.Round(n,2)``n``1.12345``2`

```
double n = 1.12345;
float d = Math.Round(n,2); 
```

你实际上会得到一个错误，因为上述函数的输出是`double`而不是`float`.

```
Cannot implictly convert type 'double' to 'float'. An explicit conversion exists (are you missing a cast?) 
```

您可以通过更改`float d = Math.Round(n,2);`为来解决此问题`double d = Math.Round(n,2);`

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:31:13.587

从 double 转换为 float，您将失去精度，并且不能隐式完成。如果将浮点值分配给更准确的双精度变量，编译器不会抱怨。

# oracle - 表上的多个小触发器与单个大触发器

> ID：13171999
> 
> 赞同：1
> 
> 时间：2012-11-01T06:23:51.537
> 
> 标签：oracle, triggers

> **可能重复：**
> [合并多个 Oracle 触发器。任何性能影响？](https://stackoverflow.com/questions/8579240/consolidate-several-oracle-triggers-any-performance-impact)

**问题：** 哪一个是最好的（性能）？有**多个触发器**（大约 7-10 个）一个用于每种情况/目的，或者**一个触发器**可以处理所有情况（通过使用 if 等）。

**详情：** 我们正在开发基于**Oracle 数据库**的企业应用程序。我们有一个大约 3M 行的表，这是我们应用程序的基表。有几种情况我们只需要使用触发器来处理。恕我直言，为了维护，最好有多个触发器。但是性能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:29:18.147

在我的情况下，一个触发器比多个小触发器快得多。为什么我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:10:32.933

我看不出多个触发器的执行速度会显着提高。唯一的权衡是它们不会执行条件逻辑，从而节省了非常小的几分之一秒。

这确实是一个设计/维护问题...假设您想要检测代码以提供时序信息：如果您有一个触发器，那么您只需要进入一个程序，而对于多个触发器，您需要去多个地方检测代码。

另外，考虑使用 CASE 语句而不是 IF （它更清洁/更容易阅读/维护）。