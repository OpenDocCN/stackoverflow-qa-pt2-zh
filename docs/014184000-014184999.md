# StackOverflow 问答 14184000-14184999

# r - 用逗号连接R中的字符串

> ID：14184000
> 
> 赞同：1
> 
> 时间：2013-01-06T16:12:01.970
> 
> 标签：r, paste, string-concatenation

我在一个 .txt 文件中有一些信息，如下所示：

```
cars.txt

    Ford               1000
    Mercedes           2000
    Lada               3000
    Chevrolet          5000 
```

我想读取这个 .txt 文件的一些元素并将它们转换为用逗号分隔的一行。我将把它保存在另一个文件中，所以我需要类似的东西（添加了 NAME 字符串）：

```
NAME,Mercedes,Lada 
```

我尝试了以下代码：

```
conn=file("cars.txt",open="r")
control<-readLines(conn)
data<-strsplit(control,"\t")
c<-1
cars<-c()
for (j in 1:4)
{
    cars[[c]]<-data[[j]][1]
    cd<-cd+1
}
carsd<-paste(cars,sep=",")
print(carsd) 
```

但根本没有结果，有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T16:16:54.937

试试这个：

```
data <- read.table("cars.txt", sep = "\t")
paste(c("NAME", data[,1]), collapse = ",") 
```

如果`read.table`与您的数据不兼容（例如非表格数据），我将如何调整您的代码：

```
control <- readLines("cars.txt")
data    <- strsplit(control, "\t")
brands  <- sapply(data, `[`, 1)
paste(c("NAME", brands), collapse = ",") 
```

# java - 如何将画布作为参数发送给处理程序？

> ID：14184006
> 
> 赞同：0
> 
> 时间：2013-01-06T16:12:36.537
> 
> 标签：java, android, android-layout

我需要在画布上循环绘制一个圆圈，每次迭代之间都有延迟。所以，我意识到它是一个线程来使用`Thread.sleep`延迟方法。

这是我的`onDraw`方法：

```
protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);

        if (touching) {
            paint.setStrokeWidth(STROKE_WIDTH);
            paint.setColor(_color);
            paint.setStyle(Paint.Style.FILL);
            Thread background = new Thread(new Runnable() {

                public void run() {
                    // TODO Auto-generated method stub
                    try {

                        while (f<=75){
                            Thread.sleep(100);
                            drawHandler.sendMessage(drawHandler.obtainMessage());
                        }

                    }
                    catch (InterruptedException e) {
                        // TODO: handle exception
                        Log.e("ERROR", "Thread Interrupted");
                    }
                }
            });

            background.start();

        } 
```

这是我的处理程序：

```
private Handler drawHandler = new Handler() {
    public void handleMessage (Message msg) {
        canvas.drawCircle(x, y, f, paint);
    }
}; 
```

无法编译此代码，因为无法在处理程序中解析画布。如何在处理程序中发送画布对象？通常，如何在处理程序中发送参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:16:47.050

您可以简单地使用 message.object 来传递您的画布。但这不是绘画的工作方式。

您的处理程序应将您的视图置于给定状态并调用 invalidate，然后在 onDraw 中检查该状态并相应地绘制您的圆圈。这将更适合 android 绘图周期。

# javascript - JS中的类继承和私有变量

> ID：14184007
> 
> 赞同：4
> 
> 时间：2013-01-06T16:12:42.867
> 
> 标签：javascript, oop, prototypal-inheritance

说我有这个代码：

```
function ParentClass()
{
    var anArray = [ ];

    this.addToArray = function(what)
    {
        anArray.push(what);

        console.log(anArray);
    };
}

FirstSubClass.prototype = new ParentClass();
FirstSubClass.prototype.constructor = FirstSubClass;

function FirstSubClass()
{
    this.addToArray('FirstSubClass');
}

SecondSubClass.prototype = new ParentClass();
SecondSubClass.prototype.constructor = SecondSubClass;

function SecondSubClass()
{
    this.addToArray('SecondSubClass');
} 
```

当我运行时，`new FirstSubClass()`我在控制台中看到一个单值数组。当我`new SecondSubClass()`再次运行时，我看到了一个单值数组。

但是，为什么当我再次运行它们时（即`new FirstSubClass(); new SecondSubClass();`）然后我看到添加了数组而不是创建了新数组？

这里的理由是我正在创建一个类的*新*实例，因此为什么它们共享相同的私有财产？

我怎样才能避免这种情况，例如，当我这样做时，`new FirstSubClass()`无论我创建类的新实例多少次，我都会看到一个值数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:15:20.380

请记住，您只为每个子类调用了`new ParentClass()` **一次。**这意味着私有数组变量是这些子类的原型对象的一部分。只有一个原型对象，所以只有一个数组（每个子类）。

每次调用都会`new FirstSubClass()`生成一个共享相同原型对象的新实例。因此，调用`addToArray()`将一个元素添加到创建原型对象时创建的同一数组中。

*编辑*——如果你想要每个实例的数组，你必须做这样的事情：

```
function ParentClass() {
  this.addToArray = function(value) { this.instanceArray.push(value); };
};

function FirstSubClass() {
  this.instanceArray = [];

  this.addToArray("First");
}

FirstSubClass.prototype = new ParentClass();
FirstSubClass.prototype.constructor = FirstSubClass; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:55:41.337

首先，JS 中的子类化通常是一个坏主意，因为人们认为他们正在获得扩展，每个实例都有自己的属性和方法副本......

...真的，他们可以`public static`访问父母的东西。

更好的是，这些`public static`东西无法访问封装的变量，因此实际上没有对私有数据的操作，除非您使用私有函数（具有公共接口）将数据传递给公共静态数据并从中收集返回值。

```
var Parent = function () {
    this.static_prop = 0;
    this.static_method = function (num) { this.static_prop += 1; return num + this.static_prop; };
};

var Child = function (num) {
    this.public_func = function () { num = this.static_method(num); };
};

Child.prototype = new Parent();

var child = new Child(13);
child.public_func(); 
```

只是调用`this.static_method`无济于事，因为它对 0 的访问权限为 0 `num`，这意味着您正在包装您继承的东西以授予他们使用私有数据作为输入的访问权限，这意味着您正在做大部分的写作工作不管继承如何，我都会这样做，因为你的期望`.prototype`是倒退的。

我可以建议依赖注入吗？
基于组件的程序？

```
var Iterator = function () {
    var count = 0,
        min = 0,
        max = 0,

        reset = function () { count = min; },
        next = function () { count = count >= max ? min : count; return count += 1; },
        set_min = function (val) { min = val; },
        set_max = function (val) { max = val; },
        public_interface = { reset : reset, count : count, set_min : set_min, set_max : set_max };

    return public_interface;
},

Thing = function (iter) {
    var arr = [],

        currentObj = null,
        nextObj = function () {
            currentObj = arr[iter.next()];
        },
        add = function (obj) {
            arr.push(obj); iter.set_max(arr.length);
        },
        public_interface = { next : nextObj, add : add };

    return public_interface;
};

var thing = Thing(Iterator());
thing.add({});
thing.next(); 
```

这是一个令人费解的例子，但现在每个实例都将被准确地提供完成其工作所需的内容（因为构造函数需要它——或者您可以稍后通过公共方法或作为公共属性添加依赖项） .

每个模块的接口现在也可以变得尽可能简单和干净，因为您不必包装意外的静态助手来获取私有数据......

现在您知道什么是私有的，您知道您要向公众扩展什么，并且无论您想将它们放在哪里，您都可以清楚地了解它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T15:54:40.973

您只需为每个子类构建一次 ParentClass 的新实例，并将其应用于您的原型。如果您希望每个实例都有自己的私有数组副本和自己的函数“addToArray”副本，则需要在其他对象构造函数中调用 ParentClass 构造函数：

```
function ParentClass(){
    var anArray = [ ];

    this.addToArray = function(what){
        anArray.push(what);
        console.log(anArray);
    };
}

FirstSubClass.prototype = new ParentClass();
FirstSubClass.prototype.constructor = FirstSubClass;

function FirstSubClass(){
    //call the parents constructor where "this" points to your FirstSubClass instance
    ParentClass.call( this );
    this.addToArray('FirstSubClass');
}

SecondSubClass.prototype = new ParentClass();
SecondSubClass.prototype.constructor = SecondSubClass;

function SecondSubClass(){
    ParentClass.call( this );
    this.addToArray('SecondSubClass');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T16:29:21.883

试试这个：

[http://jsfiddle.net/3z5AX/2/](http://jsfiddle.net/3z5AX/2/)

```
function ParentClass()
{
    var anArray = [ ];

    this.addToArray = function(what)
    {
        anArray.push(what);

       document.getElementById("i").value = anArray;
    };
}

//FirstSubClass.prototype = new ParentClass();
FirstSubClass.prototype.constructor = FirstSubClass;

function FirstSubClass()
{  
  this.parent = new ParentClass()
  this.parent.addToArray('FirstSubClass');
}

var q = new FirstSubClass();
var r = new FirstSubClass(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T16:32:37.113

所有子类共享相同的父类，因此相同的私有 anArray

解决方案是使用 Mixin 模式。

```
// I have the habbit of starting a mixin with $
var $AddToArray = function(obj) {
    var array = [];

    obj.addToArray = function(what) {
        array.push(what);
        console.log(array);
    };
}

var FirstClass = function() {
    $AddToArray(this);
}

var SecondClass = function() {
    $AddToArray(this);
} 
```

# c - 在嵌入式 ARM 系统 (STM32 F4) 上使用 protobuf-c 0.15

> ID：14184008
> 
> 赞同：2
> 
> 时间：2013-01-06T16:12:49.907
> 
> 标签：c, arm, protocol-buffers, stm32

是否可以在嵌入式 ARM 系统（STM32 F4）上开发使用 protobuf-c 0.15 并与使用 protobuf 的 java 服务器通信的系统？

protobuf-c 0.15 使用动态内存分配。并编译抛出错误：

```
/opt/arm/sourcery-arm-none-eabi-2011.09/bin/../lib/gcc/arm-none-eabi/4.6.1/../../../../arm-none-eabi/lib/thumb2/libc.a(lib_a-abort.o): In function `abort':
abort.c:(.text+0xa): undefined reference to `_exit'
/opt/arm/sourcery-arm-none-eabi-2011.09/bin/../lib/gcc/arm-none-eabi/4.6.1/../../../../arm-none-eabi/lib/thumb2/libc.a(lib_a-sbrkr.o): In function `_sbrk_r':
sbrkr.c:(.text+0x12): undefined reference to `_sbrk'
... 
```

我知道 nanopb 和 protobuf-embedded-c。但是他们对protobuf的支持有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T06:26:49.820

未定义的引用`_sbrk`来自 newlib，即 CodeSourcery 附带的 libc。您将需要提供系统调用函数以将其正确连接到您的系统。参见例如： [https ://sites.google.com/site/stm32discovery/open-source-development-with-the-stm32-discovery/getting-newlib-to-work-with-stm32-and-code-sourcery-精简版](https://sites.google.com/site/stm32discovery/open-source-development-with-the-stm32-discovery/getting-newlib-to-work-with-stm32-and-code-sourcery-lite-eabi)

（关于 nanopb 对 protobuf 的有限支持，我想更多地了解您需要哪些功能。我是 nanopb 的作者。）

# c# - ASP.NET：以编程方式更新 sql 表行

> ID：14184020
> 
> 赞同：0
> 
> 时间：2013-01-06T16:13:28.083
> 
> 标签：c#, asp.net

我有一个数据管道类，我想在其中创建一个更新方法，该方法采用参数名称列表、它们的值和存储过程名称。在执行时，我想更新 sql db 中的特定行。

到目前为止，数据管道类中的代码是：

```
public class clsDataConduit
{
    SqlConnection Conn= new SqlConnection();
    SqlDataReader rdr= null;
    SqlDataAdapter dataChannel = new SqlDataAdapter();
    SqlCommandBuilder commandBuilder = new SqlCommandBuilder();
    SqlCommand cmd = null;
    List<SqlParameter> SQLParams = new List<SqlParameter>();
    DataTable queryResults = new DataTable();
    DataRow newRecord;

        public void NewRecord(string SProcName)
        {
           //works fine
        }

        public void UpdateRecord(string SProcName)
        {

        Conn= new SqlConnection(connectionString);
        //open the database
        Conn.Open();
        //initialise the command builder for this connection
        SqlCommand dataCommand = new SqlCommand(SProcName, Conn);
        //add the parameters to the command builder
        //loop through each parameter
        for (int Counter = 0; Counter < SQLParams.Count; Counter += 1)
        {
            //add it to the command builder
            dataCommand.Parameters.Add(SQLParams[Counter]);
        }
        dataCommand.CommandType = CommandType.StoredProcedure;
        dataChannel = new SqlDataAdapter(SProcName, Conn);

        dataChannel.UpdateCommand = dataCommand;
        commandBuilder = new SqlCommandBuilder(dataChannel);

        dataChannel.Update(queryResults);

        ///////////////////////////////////////////////////////////
        // Method runs fine till above code, BUT I am not too sure 
        // how to write the rest of the code so that It updates a 
        // a particular row in sql
        ///////////////////////////////////////////////////////////
        //get the structure of a single record
        //newRecord = queryResults.NewRow();   //from previous method - new data

        Conn.Close();
        }
} 
```

我不太确定如何从这一点继续下去。如果有人可以帮助我，请。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:18:31.143

如果我正确理解了您的代码，则您已经使用适当的参数（已设置值）填充了命令，因此您只需调用

```
dataCommand.ExecuteNonQuery(); 
```

这就是您所需要的，（当然 SQLParams 列表应该已经填充了参数及其值）。此外，为了更通用，您可以将用于存储过程的 SqlParameter 列表传递给 UpdateRecord

```
public void UpdateRecord(string SProcName, List<SqlParameters> prms)
{
    using(Conn= new SqlConnection(connectionString))
    {
        //open the database
        Conn.Open();
        //initialise the command builder for this connection
        SqlCommand dataCommand = new SqlCommand(SProcName, Conn);
        //add the parameters to the SqlCommand
        dataCommand.Parameters.AddRange(prms.ToArray());
        dataCommand.CommandType = CommandType.StoredProcedure;
        dataCommand.ExecuteNonQuery();
    }
} 
```

# asp.net-mvc-4 - EF5 条目未更新

> ID：14184026
> 
> 赞同：0
> 
> 时间：2013-01-06T16:14:21.077
> 
> 标签：asp.net-mvc-4, entity-framework-5, updates, updatemodel

我正在尝试使用以下操作结果使用 EF5 更新条目：

```
[HttpPost]
    public ActionResult Edit(int id, IEnumerable<HttpPostedFileBase> files)
    {
        if (ModelState.IsValid)
        {
            Reference reference = db.References.Single(x => x.Id == id);
            db.Entry(reference).State = EntityState.Modified;
            db.SaveChanges();
            //Other stuff regarding files/images

            return RedirectToAction("Index");
        }
        return View();
     } 
```

没发生什么事。当我调试它时，它会通过代码，因为一切都很好。但是数据库中没有任何更新。

如果需要，这是模型：

```
public class Reference
    {
        public int Id { get; set; }
        public string Headline { get; set; }
        public string Text { get; set; }
        public DateTime Date { get; set; }
        public IEnumerable<HttpPostedFileBase> ImageUploadMain { get; set; } 
        public String MainFileName { get; set; }
        public IEnumerable<HttpPostedFileBase> ImageUpload { get; set; }
        public virtual ICollection<Image> Files { get; set; }
        public virtual ICollection<RefProperties> Properties { get; set; }
        public int CategoryId { get; set; }
        public virtual Category Category { get; set; }
}

public class Image
{
    public int Id { get; set; }
    public string FileName { get; set; }
    public virtual Reference Reference { get; set; }
}

public class RefProperties
{
    public int Id { get; set; }
    public string Key { get; set; }
    public string Value { get; set; }
}
public class Category
{
    public int CategoryId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Reference> References { get; set; }
} 
```

不仅相关条目没有更新，像“标题”这样的主要属性也不能更新。我究竟做错了什么？顺便说一句，创建/删除工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:36:08.040

正如 Gert Arnold 所说，您实际上并没有修改任何`Reference`值，因此不会更新任何内容。通过调用`db.Entry(reference).State = EntityState.Modified`，您只是将检索到的实体的状态设置为在`ChangeTracker`. 当您调用`SaveChanges`() 时，它只会使用您获取的相同值更新数据库中的参考记录。

您需要更新一些 Reference 实例属性才能看到更改。

```
[HttpPost]
    public ActionResult Edit(int id, IEnumerable<HttpPostedFileBase> files)
    {
        if (ModelState.IsValid)
        {

            Reference reference = db.References.Single(x => x.Id == id);
            reference.HeaderText = "Changed";
            /* No need to interact with the change tracker as the entity is already tracked and you've made a change */
            // db.Entry(reference).State = EntityState.Modified;

            /* Create/Modify/Update/Delete other entities */

            db.SaveChanges();
            //Other stuff regarding files/images

            return RedirectToAction("Index");
        }
        return View();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:19:04.980

继承人我一直在寻找：

```
TryUpdateModel(reference, ""); 
```

它有大量的重载。这虽然有效

# http - 如何通过http服务器强制刷新页面？

> ID：14184030
> 
> 赞同：2
> 
> 时间：2013-01-06T16:15:01.927
> 
> 标签：http, dynamic, nanohttpd

我有一个 Java 中的小型 HTTP 服务器（基于 NanoHTTPD），它能够从我的应用程序接收数据（当前正在播放曲目、播放状态等）。它会生成一个漂亮的网页，其中包含在通知中收到的信息，但是有没有办法让服务器在新通知到达时以某种方式要求远程 Web 浏览器重新加载页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:18:00.910

这对你有帮助吗？[http://en.wikipedia.org/wiki/Server-sent_events](http://en.wikipedia.org/wiki/Server-sent_events)。看起来很有趣！（它很快就会成为 HTML 5 的一部分）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:21:43.510

我要么使用定期刷新页面的元刷新标签

```
<meta http-equiv="refresh" content="5; URL=http://www.yourdomain.xx/yourpage.php"> 
```

或添加一些使用 ajax 轮询新信息的 javascript 代码，然后将它们显示在页面上或执行页面刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-15T11:38:51.163

使用 EventSource 接口。它...

> 是服务器发送事件的 Web 内容接口。EventSource 实例打开与 HTTP 服务器的持久连接，该服务器以文本/事件流格式发送事件。连接保持打开状态，直到通过调用 EventSource.close() 关闭。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/EventSource](https://developer.mozilla.org/en-US/docs/Web/API/EventSource)

这样，您将不会有无用的无聊刷新页面。

您在这里有一个工作示例：[https ://stackoverflow.com/a/42076867/195812](https://stackoverflow.com/a/42076867/195812)

# c - _LARGEFILE_SOURCE 和 _FILE_OFFSET_BITS=64 有什么区别？

> ID：14184031
> 
> 赞同：17
> 
> 时间：2013-01-06T16:15:11.800
> 
> 标签：c, linux, linux-from-scratch

我知道这`-D_FILE_OFFSET_BITS=64`会导致`off_t`64 位。那么`-D_LARGEFILE_SOURCE`，尚未完成的工作是`-D_FILE_OFFSET_BITS=64`什么？这些定义究竟做了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T16:25:37.510

GLIBC[功能测试宏](http://www.gnu.org/software/libc/manual/html_node/Feature-Test-Macros.html#Feature-Test-Macros)文档指出：

> `_LARGEFILE_SOURCE`
> 如果定义了此宏，则可以使用一些额外的功能来纠正所有先前标准中的一些缺点。具体来说，函数 fseeko 和 ftello 可用。如果没有这些函数，ISO C 接口（fseek、ftell）和低级 POSIX 接口（lseek）之间的差异将导致问题。
> 
> 此宏是作为大文件支持扩展 (LFS) 的一部分引入的。

因此，该宏专门制作`fseeko`并`ftello`可用。`_FILE_OFFSET_BITS`单独的设置不能使这些功能可用。

（请注意，如果您使用的是 C 的 GNU 方言（GCC 的默认方言），您可能不需要显式定义`_LARGEFILE_SOURCE`。`-std=c99`例如，如果您使用的话，您可以这样做。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-04T14:20:42.793

另一个答案是错误的，因为文档`_LARGEFILE_SOURCE`具有误导性。`_FILE_OFFSET_BITS=64`足以公开`fseeko`and`ftello`函数，`_POSIX_C_SOURCE`定义为 >= 的宏也是如此`200112L`。

来自 glibc 文档`_FILE_OFFSET_BITS`

> 如果宏定义为值 64，则大文件接口替换旧接口。即，这些函数不能以不同的名称提供（因为它们是`_LARGEFILE64_SOURCE`）。相反，旧函数名称现在引用新函数，例如，调用`fseeko`now 确实调用`fseeko64`。

始终定义`_FILE_OFFSET_BITS=64`为在 32 位基于 glibc 的系统上切换到 64 位类型。glibc 真的应该让它成为默认值......

# c - 如何制作一个简单的谓词引擎

> ID：14184044
> 
> 赞同：1
> 
> 时间：2013-01-06T16:16:12.223
> 
> 标签：c, predicate, scripting-language

我有一个任务，用户可以： 1\. 形成任意数量的点任意坐标；2\. 根据标准删除点。

我意识到： 1\. 简单标准的情况（>、<、=、>= 等）。2.复合标准的情况，它由两个标准组成，它们之间有或（x>5 OR y<3，x<=2 OR y=0）。我只是将一个查询选择的内容添加到另一个查询选择的内容中。然后我删除重复项。这当然是不正确的，因为程序应该一次只选择必要的。嗯，但这或多或少让我满意。

我用 C 编程，所以据我所知并尽我所能，不可能使用自我修改代码。

我决定将自己限制在两个标准之间，它们之间有 OR 或 AND。我可以看到：>、<、>=、<=、=、！=。也就是6个案例。然后是 x 和 y，点 ID，与原点的距离。4例。然后，如果我使用组合，那对我来说已经太多了。

但我无法想象任何事情，只能简单地为每个独特的案例提供一个特殊的条件。当然，我可以根据每个查询选择所有内容。然后像我们在离散数学中所做的那样，对 AND 使用交集或对 OR 使用加法。但我想以最快的方式做到这一点：计算机应该只选择必要的。

因此，对于每种情况，我都提供 if (x > value & y < value) if (x < value & y = value) if (x = value & y =< value)

等等。

但这似乎是绝对疯狂的。你能给我推荐点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:26:44.803

这是关于解释自定义脚本代码。

它在实践中的工作原理很容易通过使用对象来解释，但如果没有它们就更困难了。如果没有对象，您将需要一个能够存储谓词的自定义结构，我将给您一个简单的示例，只是为了稍微清楚一点：

```
union Expression {
  char type;
  int number;
};

int expressionValue(const Point &curPt, const Expression &exp) {
  if (type == TYPE_NUMBER) return exp.number;
  else if (type == TYPE_X) return curPt.x;
  else if (type == TYPE_Y) return curPT.y;
}; 
```

这样，您就有了一个联合，它能够为您的表达式存储任意类型的值，可能是原始数字或当前点的坐标。

```
struct Comparison {
  Expression exp1;
  Expression exp2;
  char type;
};

bool evaluateComparison(const Point &curPt, const Comparison &comp) {
  int v1 = expressionValue(pt, exp1);
  int v2 = expressionValue(pt, exp2);

  if (type == '=') return v1 == v2;
  else if (type == '<') return v1 < v2;
  // so on
} 
```

现在您有了一个能够存储单个比较的数据类型，您需要一种存储谓词的方法：

```
struct Predicate {
  char type;
  Comparison comp1;
  Comparison comp2;
};

bool evaluatePredicate(const  Point &curPt, const Predicate &pred) {
  if (pred.type == TYPE_OR) return evaluateComparison(curPt, comp1) || evaluateComparison(curPt, comp2);
  // oothers
}; 
```

当然，您可以计划所需的任何类型的表达式或谓词（可能是 n 元 AND 或 OR）。

您需要的最后一件事是一个简单的词法分析器和解析器，将您的输入转换为谓词，然后您评估您的观点，您就完成了。

# mysql - 是否可以确保相同的 ID 在 2 个表中不会出现两次（数据库）

> ID：14184045
> 
> 赞同：0
> 
> 时间：2013-01-06T16:16:17.717
> 
> 标签：mysql, database

是否可以确保相同的 ID 在 2 个表中不会出现两次？例如，我有这个列：`call id` 并且我想确保它会在两个表中计算它：`calls_to_x`并且`calls_to_y` 我想输入两个表数据并确保列`call id`将从两个表中增加，例如：

`calls_to_x`：

呼叫 ID：1 参数：....时间：01:00:00

呼叫ID：3个参数：....时间：01:30:00

`calls_to_y`：

呼叫ID：2个参数：....时间：01:10:00

呼叫ID：4个参数：....时间：01:34:00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:23:25.850

答案取决于您使用的 RDBMS。

**对于 MySQL：**

如果您只需要唯一值（而不是顺序值），则可以使用[UUID](http://dev.mysql.com/doc/refman/5.0/en//miscellaneous-functions.html#function_uuid)之类的东西来唯一标识每一行。

如果您确实需要这些值是连续的，则可以通过使用指示内容类型的字段将表合并到一个表中，或者使用第三个表来跟踪使用的 id，其中包含 id 字段和该列的 auto_increment。如果需要，第二列可以跟踪哪个表使用了 id。您可以在 SQL 函数中插入该表并返回 LAST_INSERT_ID() 的值以获取其他表的下一个 id。

**对于大多数其他 RDBMS**

使用[序列 (CREATE SEQUENCE)](http://www.postgresql.org/docs/9.2/static/sql-createsequence.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:30:35.580

另一种选择是拥有一个 AllCalls 表，它有一个 callid，然后在接收者处将此 id 作为外键包含在两个表中的任何一个中。只有不同的字段可以在calls_to_x 和calls_to_y 表中，一般适用于任何呼叫的东西都可以在AllCalls 表中。

# python - QT4 GUI 中的初始化完成事件

> ID：14184048
> 
> 赞同：0
> 
> 时间：2013-01-06T16:16:24.297
> 
> 标签：python, qt4

我有一个基于 QT4 和 python 2.4 的 GUI。用户通过打开文件开始使用它。除了显式浏览之外，我还希望允许用户指定要打开的文件作为命令行参数。我正在 QMainWindow（或任何地方）中寻找一些事件，它可以让我检测应用程序何时完成初始化并准备好进行用户交互，此时我可以自动打开文件并填充小部件。到目前为止，我找不到比覆盖 showEvent 更好的东西了，这不完全是因为此时主窗口仍然不可见。这可能没问题，但我正在寻找一种适当的方法来做到这一点。在我过去使用的其他一些 UI 工具包中，类似于“主表单布局完成”事件，表明 UI 可以安全处理。QT4中有类似的东西吗？如果这很重要，我会在 Linux 上运行它。

非常感谢您的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:32:11.017

您不需要在这里举办活动。保证所有内容都在之后加载`__init__()`并`show()`运行，因此您可以在之后放置文件打开的代码。

```
import sys
from PyQt4 import QtGui

class Example(QtGui.QWidget):
    def __init__(self):
        super(Example, self).__init__()
        self.setupUI()
        self.show()
        # normal __init__ done

        if len(sys.argv) > 1:
            with open(sys.argv[1]) as f:
                # do stuff with file

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_()) 
```

# android - 如何从每个被点击的字符串项目中设置一个意图的类

> ID：14184050
> 
> 赞同：0
> 
> 时间：2013-01-06T16:16:30.553
> 
> 标签：android, android-intent

我正在尝试从单击的每个项目开始另一个意图，还请告诉我我应该将您的解决方案代码放在哪里
这里是代码

```
import java.util.ArrayList;
import java.util.HashMap;
import android.app.ListActivity;
import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.ArrayAdapter;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.EditText;
import android.widget.ListView;
import android.view.View.OnClickListener;
public class MainActivity extends Activity {

// List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Listview Data
    String products[] = {"Dell", "HTC ","iPhone ", "Samsung Galaxy"};

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name,products);
    lv.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */
    inputSearch.addTextChangedListener(new TextWatcher() {

         @Override
     public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
         // When user changed the Text
         Identifikasi1.this.adapter.getFilter().filter(cs);
     }

     @Override
     public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
             int arg3) {
         // TODO Auto-generated method stub

     }

     @Override
     public void afterTextChanged(Editable arg0) {
         // TODO Auto-generated method stub
     }

 });
 } 
```

我还是初学者，不知道解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:34:37.313

您应该`onItemClickListener`在侦听器方法中实现和设置意图`onItemClick()` 例如：

```
public void MainActivity extends Activity implements onItemClickListener{
   //your code
  //...`@Override
 public void onItemClick(AdapterView parent, View view, int position,long id) {
     Intent intent = new Intent();
 }
}` 
```

# java - Spring ApplicationContext - 资源泄漏：“上下文”永远不会关闭

> ID：14184059
> 
> 赞同：98
> 
> 时间：2013-01-06T16:17:19.807
> 
> 标签：java, eclipse, spring, spring-mvc

在 Spring MVC 应用程序中，我使用以下方法在服务类之一中初始化变量：

```
ApplicationContext context = 
         new ClassPathXmlApplicationContext("META-INF/userLibrary.xml");
service = context.getBean(UserLibrary.class); 
```

UserLibrary 是我在我的应用程序中使用的第 3 方实用程序。上面的代码为 'context' 变量生成警告。警告如下所示：

```
Resource leak: 'context' is never closed 
```

我不明白这个警告。由于该应用程序是 Spring MVC 应用程序，因此在应用程序运行时引用服务时，我无法真正关闭/销毁上下文。警告到底想告诉我什么？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-06T22:21:53.117

由于应用程序上下文是一个[`ResourceLoader`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html)（即 I/O 操作），它消耗需要在某个时候释放的资源。它也是`AbstractApplicationContext`which implements的扩展`Closable`。因此，它有一个`close()`方法，可以在[try-with-resources 语句中使用](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

```
try (ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("META-INF/userLibrary.xml")) {
  service = context.getBean(UserLibrary.class);
} 
```

你是否真的需要创建这个上下文是一个不同的问题（你链接到它），我不会对此发表评论。

确实，当应用程序停止时，上下文会隐式关闭，但这还不够好。Eclipse是对的，其他情况需要采取措施手动关闭，避免classloader泄漏。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-12T10:16:00.153

`close()`接口中没有定义`ApplicationContext`。

安全摆脱警告的唯一方法是以下

```
ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(...);
try {
    [...]
} finally {
    ctx.close();
} 
```

或者，在 Java 7 中

```
try(ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(...)) {
    [...]
} 
```

基本区别在于，由于您显式实例化上下文（即通过使用`new`），您知道要实例化的类，因此您可以相应地定义变量。

如果您没有实例化 AppContext（即使用 Spring 提供的那个），那么您将无法关闭它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-03-19T17:48:54.213

一个简单的演员表解决了这个问题：

```
((ClassPathXmlApplicationContext) fac).close(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-09T13:40:20.673

由于 Application 上下文有一个 ClassPathXmlApplicationContext 的实例，并且同样有一个 close() 方法。我只需 CAST appContext 对象并调用 close() 方法，如下所示。

```
ApplicationContext appContext = new ClassPathXmlApplicationContext("spring.xml");
//do some logic
((ClassPathXmlApplicationContext) appContext).close(); 
```

这将修复资源泄漏警告。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-04T06:07:01.227

试试这个。您需要应用强制转换来关闭应用程序上下文。

```
 ClassPathXmlApplicationContext ctx = null;
      try {
         ctx = new ClassPathXmlApplicationContext(...);
            [...]
             } finally {
              if (ctx != null)
                  ((AbstractApplicationContext) ctx).close();       
      } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-13T05:34:35.997

即使我有完全相同的警告，我所做的只是`ApplicationContext`在主函数之外声明为`private static`和 ta-da，问题已修复。

```
public class MainApp {
    private static ApplicationContext context;

    public static void main(String[] args) {
        context = new ClassPathXmlApplicationContext("Beans.xml");

        HelloWorld objA = (HelloWorld) context.getBean("helloWorld");

        objA.setMessage("I'm object A");
        objA.getMessage();

        HelloWorld objB = (HelloWorld) context.getBean("helloWorld");
        objB.getMessage();
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-22T18:59:33.227

强制转换是解决此问题的正确方法。我使用下面的行遇到了同样的问题。 `ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);`

要解决警告，只需`ctx`像下面一样向下转换对象，然后关闭它。 `((AnnotationConfigApplicationContext) ctx).close();`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-07T09:26:37.960

将上下文向下转换为 ConfigurableApplicationContext。

```
((ConfigurableApplicationContext)context).close(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-20T11:19:05.653

```
Object obj = context.getBean("bean");
if(bean instanceof Bean) {
    Bean bean = (Bean) obj;
} 
```

就我而言，泄漏消失了

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-04-23T16:14:38.583

这对我来说效果最好。

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Test {

     private static ApplicationContext con;

     public static void main(String[] args) {

         con = new ClassPathXmlApplicationContext("config.xml");

         Employee ob = (Employee) con.getBean("obj");
         System.out.println("Emp Id " + ob.getEmpno());
         System.out.println("Emp name " + ob.getEmpname());
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-09T21:05:37.917

如果您使用的是**ClassPathXmlApplicationContext**那么您可以使用

```
((ClassPathXmlApplicationContext) context).close(); 
```

关闭资源泄漏问题。

如果您使用的是**AbstractApplicationContext**，那么您可以使用 close 方法进行转换。

```
((AbstractApplicationContext) context).close(); 
```

这取决于应用程序中使用的上下文类型。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-10-02T09:59:27.743

```
import org.springframework.context.ConfigurableApplicationContext;

((ConfigurableApplicationContext)ctx).close(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-30T18:45:05.960

您将上下文设置为静态变量，这意味着该上下文可用于类中的所有静态方法，并且不再局限于 main 方法的范围。因此该工具不能再假定它应该在方法结束时关闭，因此它不再发出警告。

```
public class MainApp {
    private static ApplicationContext context;
    public static void main(String[] args) {
          context = 
                 new ClassPathXmlApplicationContext("Beans.xml");

          HelloWorld obj = (HelloWorld) context.getBean("helloWorld");

          obj.getMessage();

       }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-30T08:20:57.047

是的，接口`ApplicationContext`没有`close()`方法，所以我喜欢使用类`AbstractApplicationContext`来显式使用该`close`方法，并且在这里您可以使用注释而不是`XML`类型来使用 Spring Application 配置类。

```
AbstractApplicationContext context = new AnnotationConfigApplicationContext(SpringAppConfig.class);
Foo foo = context.getBean(Foo.class);

//do some work with foo

context.close(); 
```

你的`Resource leak: 'context' is never closed`警告现在消失了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-25T10:50:58.223

它有一个简单的解决方案，只需将核心 jar 输入到库中，在此链接中给出 [下载 spring 的核心 jar 文件][1] [1]：https://static.javatpoint.com/src/sp/spcorejars。压缩

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-11-15T18:30:07.070

对于 ApplicationContext 你不能使用 close() 方法，因为这个方法没有定义它，而是你可以使用：`(ClassPathXmlApplicationContext(context)).close()`

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-04-22T18:50:52.273

方法 close 已添加到 ConfigurableApplicationContext 接口中，因此您可以做的最好的访问是：

```
ConfigurableApplicationContext context = new ClassPathXmlApplicationContext(
                "/app-context.xml");

// Use the context...

context.close(); 
```

# java - Java 中的流 I/O 与 C 以及 JNI 的兼容性

> ID：14184064
> 
> 赞同：0
> 
> 时间：2013-01-06T16:18:14.647
> 
> 标签：java, c, linux, stream, java-native-interface

1.  在 C 和 Java 中（在 Linux 的上下文中）创建和处理输出流的方式是否存在根本差异。

2.  是否可以从 C 函数创建的输入流中打开读取作为本机 Java 输出流（即使用 JNI）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:58:35.077

我知道在 c 中字节以小端顺序排列，但在 java 中它们以大端顺序排列，这是一个主要区别。为了从 c 中的文件和 java 中的文件中读取/写入，您可能需要考虑位移

# php - 为什么使用 TIMESTAMP 而不是 INT 值？

> ID：14184065
> 
> 赞同：3
> 
> 时间：2013-01-06T16:18:19.573
> 
> 标签：php, sql, datetime

> **可能重复：**
> [MySQL 中各种日期/时间字段类型的优缺点是什么？](https://stackoverflow.com/questions/469846/what-are-the-pros-and-cons-of-the-various-date-time-field-types-in-mysql)

在很多数据库中，我看到他们使用`TIMESTAMP`类型来存储时间值，我的问题是为什么不使用`INT`类型来存储`$date->getTimestamp()`值，然后我们可以更容易地获取时间值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T16:22:32.820

因为当您将日期视为日期而不是数字时，您可以做一些简洁的事情，例如添加持续时间 (DATE+1MONTH-1HOUR)。`TIMESTAMP`等`DATETIME`也针对日期进行了优化，并将为您进行本机验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:25:17.037

可能有很多原因，我想说最明显（也是直截了当的一个）是数据库*知道*该值是 a `TIMESTAMP`（因此与日期/时间相关），而`INT`.

这有几个后果，例如 Mysql 知道时区并自动`TIMESTAMP`与 UTC 协调。这意味着数据更加具体，因为数据的含义很清楚。对于`INT`您需要自己处理的类型，它不再与数据库相关。

下一个重大区别是自动初始化和更新。这意味着，如果插入或更改行，`TIMESTAMP`列将被“标记”为当前时间。

这些类型之间还有其他一些差异，其中大部分与数据/时间函数有关。我建议你深入研究：

*   [11.3.1\. `DATE`、`DATETIME`和`TIMESTAMP`类型_](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:23:37.983

当使用时间戳而不是普通数字时，您可以在数据库中做更多的事情。按星期查询、按月分组、确定间隔等...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T16:24:14.033

一个 int 只有 4 个字节，而 datetime 是 8 个字节，所以你可能有更少的值。特别是对于 php，您将获得最小日期为 1901-12-13 和最大日期为 2038-01-19 的 Unix 时间戳。这本质上是回溯并做出导致 Y2K 问题的相同决定。假设您可以忍受，您应该没问题，但是非基于 Unix 的主机呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T16:24:46.257

因为不必公开数据的实际表示。为什么？

*   灵活性（数据的内部表示可能随时更改，用户不会依赖它）。

*   可靠性（如果数据库知道数据是什么，它可能会检查数据的一致性）

*   可读性（没有理由将时间戳视为整数，它显示了记录的含义）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-06T16:25:31.180

之所以有不同的数字类型（例如时间戳），是为了提供数据完整性。

数据完整性确保我们不会意外放入早餐的华夫饼数量 :)

如果我们尝试输入无效的时间戳，MySQL 将抛出错误并阻止我们输入错误数据。

# map - 谷歌地图，如 javascript 库

> ID：14184076
> 
> 赞同：2
> 
> 时间：2013-01-06T16:19:41.937
> 
> 标签：map

我想用谷歌地图时尚在 2D 上显示一些自定义数据（但不是世界地图）。每个数据点在 2D 平面上都有一个坐标。每个数据点都有一些与之关联的属性，用户可以单击一个点来显示相关信息。用户可以根据属性选择数据。一个例子是下面的网页，但它是由 Flash 制成的。有人对使用什么 js 库有建议吗？有没有使用 javascript 的示例网页？

app.nihmaps.org

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:24:33.400

OpenLayers：网络免费地图 - [http://openlayers.org/](http://openlayers.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:07:47.483

当我在回答另一个[关于谷歌地图行为使用 css3 转换的问题时](https://stackoverflow.com/questions/11504703/css3-zooming-on-mouse-cursor/15296290#15296290)，我偶然发现了一个非常漂亮的 jQuery 插件，叫做[**Smooth Zoom Pan**](http://codecanyon.net/item/smooth-zoom-pan-jquery-image-viewer/511142)，它可以在谷歌地图时尚中进行平移和缩放......你可以有任何类型的背景图像+所需缩放级别的信息层...但是，如果您想使用该插件，它将花费您几美元（...但似乎工作得很好，值得）

但是您也可以偷看他们在演示页面上使用的 js 代码，并了解如何以您自己的方式实现类似的东西 =)

# javascript - 将 JSON 数组作为字符串传递，而不是调用 d3.json

> ID：14184078
> 
> 赞同：1
> 
> 时间：2013-01-06T16:20:13.840
> 
> 标签：javascript, json, d3.js

我正在尝试使用[奇妙的分层边缘捆绑](http://mbostock.github.com/d3/talk/20111116/bundle.html)。

我从 PHP 脚本中获取 JSON 数组的数据，然后由 JavaScript 修改。当我将输出 JSON 字符串保存为文件时，捆绑工作完美，但是，如果我尝试将 JSON 字符串直接插入到函数中，它似乎不起作用。由于我需要动态更改 JSON 数组，因此最好插入字符串。我究竟做错了什么？

这是代码

```
// some code generates phpstring, this is a string in the form of a json array.

<script src="http://d3js.org/d3.v3.min.js"></script>    

function edgebundling(phpstring) {

//document.write(phpstring);    <-- saving the output from this as the file "flares.json" and accessing with d3.json("flares.json") allows the script to work

//some initial code here

// d3.json("flares.json", function(json) {     <- using this line works but will not allow for dynamic alterations in the json

    json = JSON.parse( phpstring ); //  <-tried using this while outcommenting the line above and below and it does not work

  var nodes = cluster.nodes(packages.root(json)),
      links = packages.imports(nodes),
      splines = bundle(links);

  var path = svg.selectAll("path.link")
      .data(links)
    .enter().append("svg:path")
      .attr("class", function(d) { return "link source-" + d.source.key + " target-" + d.target.key; })
      .attr("d", function(d, i) { return line(splines[i]); });

  svg.selectAll("g.node")
      .data(nodes.filter(function(n) { return !n.children; }))
    .enter().append("svg:g")
      .attr("class", "node")
      .attr("id", function(d) { return "node-" + d.key; })
      .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })
    .append("svg:text")
      .attr("dx", function(d) { return d.x < 180 ? 8 : -8; })
      .attr("dy", ".31em")
      .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
      .attr("transform", function(d) { return d.x < 180 ? null : "rotate(180)"; })
      .text(function(d) { return d.key; })
      .on("mouseover", mouseover)
      .on("mouseout", mouseout);

  d3.select("input[type=range]").on("change", function() {
    line.tension(this.value / 100);
    path.attr("d", function(d, i) { return line(splines[i]); });
  });
// });   <-- this is outcommented with the JSON.parse approach

  //some more code  

//in the html body
<div style="width:1300;height:900;" id="bun">
<div style="position:relative;bottom:0;font-size:18px;">Tension: <input style="position:relative;top:3px;" type="range" min="0" max="100" value="85"></div></div> 
```

编辑：一个注意事项是 phpstring 非常大，大约 130kb。我已将问题缩小到代码的这一部分：

```
document.write ("check1<br>"); // <- this is executed
json = JSON.parse(phpstring);
document.write ("check2<br>"); // <- this is executed
var nodes = cluster.nodes(packages.root(json)),
links = packages.imports(nodes),
splines = bundle(links);
document.write ("check3<br>"); // <- this is NOT executed 
```

包在脚本中进一步引用了这一点：

```
var packages = {

  // Lazily construct the package hierarchy from class names.
  root: function(classes) {
    var map = {};

    function find(name, data) {
      var node = map[name], i;
      if (!node) {
        node = map[name] = data || {name: name, children: []};
        if (name.length) {
          node.parent = find(name.substring(0, i = name.lastIndexOf(".")));
          node.parent.children.push(node);
          node.key = name.substring(i + 1);
        }
      }
      //document.write(node[i]+'<br>');
      return node;
    }

    classes.forEach(function(d) {
    //document.write(d+'<br>');
    //document.write(d.name+'<br><br>');
      find(d.name, d);
    });

    return map[""];
  },

  // Return a list of imports for the given array of nodes.
  imports: function(nodes) {
    var map = {},
        imports = [];

    // Compute a map from name to node.
    nodes.forEach(function(d) {
      map[d.name] = d;
    });

    // For each import, construct a link from the source to target node.
    nodes.forEach(function(d) {
      if (d.imports) d.imports.forEach(function(i) {
        imports.push({source: map[d.name], target: map[i]});
      });
    });
    //alert(JSON.stringify(imports));
    //document.write(imports.toString());
    return imports;
  }
}; 
```

# java - 签署 Eclipse 插件始终有效

> ID：14184081
> 
> 赞同：0
> 
> 时间：2013-01-06T16:20:32.263
> 
> 标签：java, eclipse, eclipse-plugin

我想使用 keytool 为我的插件 jar 签名以生成密钥。

我知道有 -validity 选项，但如何设置它以使插件始终有效且永不过期。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:32:11.233

查看 keytool 文档：

> **有效期**：每个证书仅在有限的时间内有效。这段时间由开始日期和时间以及结束日期和时间来描述，可以短至几秒，也可以几乎长至一个世纪。选择的有效期取决于许多因素，例如用于签署证书的私钥的强度或愿意为证书支付的金额。如果相关的私钥没有被泄露，这是实体可以依赖公共价值的预期时期。

由此可见，您不能拥有永不过期的证书。

# database - 哪个 NoSQL 数据库最适合以下用途？

> ID：14184082
> 
> 赞同：-3
> 
> 时间：2013-01-06T16:20:43.790
> 
> 标签：database

我现在正在努力为以下目的寻找最佳数据库： 1\. 每 0.1 秒存储一次在线数据！2\. 方便访问数据库中的数据 3\. 兼容windows系统 4\. 无需开源 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:25:51.807

那么有很多 nosql 数据库系统，对我来说最简单的是[redis](http://redis.io/)和[mongodb](http://mongodb.org/)。我将 redis 用于高负载应用程序，将 mongodb 用于更轻松地访问数据（如果您来自 sql 世界）。两者都有 Windows 版本，都是开源的。

# android - 根据位置从图库中设置壁纸

> ID：14184087
> 
> 赞同：0
> 
> 时间：2013-01-06T16:21:22.730
> 
> 标签：android, android-imageview, android-gallery, wallpaper

我有一个 Gallery 和一个 imageView，如下图所示：http: [//i50.tinypic.com/2e6h2so.png](http://i50.tinypic.com/2e6h2so.png) 我需要 button1 将当前图像设置为墙纸我在 setResource 中遇到问题

```
 myWallpaperManager.setResource(mImageIds[position]); 
```

这是我的代码：

```
 public class batman extends Activity implements OnClickListener{
  Button set;
  private int[] mImageIds = {
    R.drawable.b,
    R.drawable.b1,
    R.drawable.b2,
    R.drawable.b3,
    R.drawable.b4,
    R.drawable.b5,
    R.drawable.b6,
    R.drawable.b7,
    R.drawable.b8,
    R.drawable.b9,
    R.drawable.b10,
    R.drawable.b11,
    R.drawable.b12,
    R.drawable.b13,
    R.drawable.b14,
    R.drawable.b15,
    R.drawable.b16,
    R.drawable.b17,
    R.drawable.b18,
    R.drawable.b19,
    R.drawable.b20,
    R.drawable.b21,
    R.drawable.b22,
    R.drawable.b23,
    R.drawable.b24,  

  };

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                         WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.batman);

    set=(Button)findViewById(R.id.button1);
    set.setOnClickListener(this);
    Gallery g = (Gallery) findViewById(R.id.gallery);
    g.setAdapter(new ImageAdapter(this));

    g.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick
        (AdapterView<?> parent, View v, int position, long id) {

        ImageView imageView =(ImageView)findViewById(R.id.imageView1);
        imageView.setImageResource(mImageIds[position]);
      }
    });
  }

  public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;

    public ImageAdapter(Context c) {
      mContext = c;
      TypedArray a = c.obtainStyledAttributes(R.styleable.GalleryA);
      mGalleryItemBackground = a.getResourceId(
                                               R.styleable.GalleryA_android_galleryItemBackground, 0);
      a.recycle();
    }

    public int getCount() {
      return mImageIds.length;
    }

    public Object getItem(int position) {
      return position;
    }

    public long getItemId(int position) {
      return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
      ImageView i = new ImageView(mContext);

      i.setImageResource(mImageIds[position]);
      i.setLayoutParams(new Gallery.LayoutParams(150, 100));
      i.setScaleType(ImageView.ScaleType.FIT_XY);
      i.setBackgroundResource(mGalleryItemBackground);

      return i;
    }
  }

  public void onClick(View arg0) {
    // TODO Auto-generated method stub
    int id=arg0.getId();
    if(id==R.id.button1)
    {
      WallpaperManager myWallpaperManager
        = WallpaperManager.getInstance(getApplicationContext());
      try {
        myWallpaperManager.setResource(mImageIds[position]);
      } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:27:16.133

首先，您需要在清单中获得此权限：

```
 “android.permission.SET_WALLPAPER”

ImageAdapter i = (ImageAdapter)parent.getAdapter();
Bitmap mBitmap = BitmapFactory.decodeResource(getResources(),(int)i.getItemId(position));
WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
try {
myWallpaperManager.setBitmap(mBitmap);
Toast.makeText(MainActivity.this, "Wallpaper set", Toast.LENGTH_SHORT).show();
}
catch (IOException e)
{
Toast.makeText(MainActivity.this, "Error setting wallpaper", Toast.LENGTH_SHORT).show();
}
}
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:41:06.877

首先，您必须将`SET_WALLPAPER`权限添加到您的`AndroidManifest.xml`

```
<manifest xlmns:android...>
 ...
 <uses-permission android:name="android.permission.SET_WALLPAPER" />
</manifest> 
```

然后改变你`Button ClickListener`的如下：

> ```
>  ImageAdapter image = (ImageAdapter)parent.getAdapter();
>   Bitmap mBitmap = BitmapFactory.decodeResource(getResources(),mImageIds[pos]); <----Try by changing this line.
>   WallpaperManager m_manager = WallpaperManager.getInstance(getApplicationContext());
>   try {
>         m_manager.setBitmap(mBitmap);
>        }
>     catch (IOException e)
>        {}
>     }
>   });
>  } 
> ```

# android - 在 Galaxy S3 上进入后台时应用程序关闭

> ID：14184089
> 
> 赞同：0
> 
> 时间：2013-01-06T16:22:10.263
> 
> 标签：android, android-intent, android-contacts, background-process, galaxy

我正在开发一个相当正常的资源使用应用程序（在 Galaxy S3 上大约 19-22 MB，所以它绝对可以处理它），它的一个“功能”是显示联系人的信息，通过使用下一个代码：

```
public static Intent createIntentForContact(final String contactKey) {
    final Intent intent = new Intent(Intent.ACTION_VIEW);
    final Uri uri = Uri.withAppendedPath(Contacts.CONTENT_LOOKUP_URI, contactKey);
    intent.setData(uri);
    return intent;
}

    ...
    startActivity(createIntentForContact(...)) ; 
```

只要我留在应用程序上，一切都很好。

但是，如果我在应用程序显示设备联系人信息时按主页，然后返回应用程序，然后按返回，应用程序将自行重启。

我已经在一个全新的项目上测试了这段代码，但它在那里工作得很好。我还在 Galaxy S2 上对其进行了测试，它在那里也运行良好。我已经检查了设置中的开发人员类别，并没有勾选任何特别之处。

怎么会发生这样的事情？该应用程序不占用太多内存，为什么它被关闭了，为什么它没有与联系信息屏幕一起关闭（因为我没有为它添加任何标志）？

* * *

编辑：我在日志中注意到，有一些与 roboguice 相关的日志，这可能是导致此问题的原因。以下是日志：

01-07 11:40:00.610: W

```
/nalizableReferenceQueue(6856): Could not load Finalizer in its own class loader. Loading Finalizer in the current class loader instead. As a result, you will not be able to garbage collect this class loader. To support reclaiming this class loader, either resolve the underlying issue, or move Google Collections to your system class path.
01-07 11:40:00.610: W/nalizableReferenceQueue(6856): java.io.FileNotFoundException: com/google/inject/internal/util/$Finalizer.class
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$FinalizableReferenceQueue$DecoupledLoader.getBaseUrl(FinalizableReferenceQueue.java:269)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$FinalizableReferenceQueue$DecoupledLoader.loadFinalizer(FinalizableReferenceQueue.java:253)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$FinalizableReferenceQueue.loadFinalizer(FinalizableReferenceQueue.java:175)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$FinalizableReferenceQueue.<clinit>(FinalizableReferenceQueue.java:100)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$MapMaker$QueueHolder.<clinit>(MapMaker.java:787)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$MapMaker$WeakEntry.<init>(MapMaker.java:946)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$MapMaker$Strength$1.newEntry(MapMaker.java:312)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$MapMaker$StrategyImpl.newEntry(MapMaker.java:498)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$MapMaker$StrategyImpl.newEntry(MapMaker.java:419)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.util.$CustomConcurrentHashMap$ComputingImpl.get(CustomConcurrentHashMap.java:2029)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.Annotations$AnnotationChecker.hasAnnotations(Annotations.java:116)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.Annotations.isBindingAnnotation(Annotations.java:180)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.Key.ensureIsBindingAnnotation(Key.java:366)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.Key.strategyFor(Key.java:338)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.Key.get(Key.java:272)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.AbstractBindingBuilder.annotatedWithInternal(AbstractBindingBuilder.java:82)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.internal.ConstantBindingBuilderImpl.annotatedWith(ConstantBindingBuilderImpl.java:49)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at roboguice.config.DefaultRoboModule.configure(DefaultRoboModule.java:117)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.spi.Elements.getElements(Elements.java:101)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.google.inject.spi.Elements.getElements(Elements.java:78)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at roboguice.RoboGuice.setBaseApplicationInjector(RoboGuice.java:83)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at roboguice.RoboGuice.setBaseApplicationInjector(RoboGuice.java:139)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.syncme.modules.SyncMEApplication.onCreate(SyncMEApplication.java:41)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:1003)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4228)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.app.ActivityThread.access$1300(ActivityThread.java:140)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1287)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.os.Looper.loop(Looper.java:137)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at android.app.ActivityThread.main(ActivityThread.java:4898)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at java.lang.reflect.Method.invokeNative(Native Method)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at java.lang.reflect.Method.invoke(Method.java:511)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-07 11:40:00.610: W/nalizableReferenceQueue(6856):    at dalvik.system.NativeStart.main(Native Method) 
```

# ios - 颠倒的OpenGL ES IOS纹理2D绘制

> ID：14184091
> 
> 赞同：3
> 
> 时间：2013-01-06T16:22:15.350
> 
> 标签：ios, opengl-es, texture2d

我正在使用 Opengl 在 IOS 中编写一个小游戏（它是 2d）作为熟悉 opengl 的一种方式。我正在使用 CrashLanding 演示中的 Texture2D 类。我正在使用它来为乐谱生成文本。绘制文本时，它是颠倒的。在代码中有关于颠倒加载纹理的注释，但我找不到正确渲染它的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:53:47.877

OpenGL 和您的图像加载代码不同意原点的位置。OpenGL 从左下角开始，而您的图片从右上角开始。您可以像 CrashLanding 演示那样对应用中的图片应用变换。或者更简单的在 Photoshop 等编辑程序中预翻转图像。如果您的图像仅在此应用程序中用作 OpenGL 纹理，这将起作用。如果您需要在其他地方显示相同的图片，则需要保留非翻转版本，或者弄清楚如何应用转换。

# facebook - facebook JS SDK：异步加载不起作用

> ID：14184095
> 
> 赞同：0
> 
> 时间：2013-01-06T16:23:00.810
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

这是我正在抛出的代码`Uncaught ReferenceError: FB is not defined`。`window.fbAsyncInit`如果我删除方法并添加它，它可以同步`<script src="//connect.facebook.net/en_US/all.js"></script>`工作`<head>`

```
<!doctype html>
<html>
<head>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>

     <script type="text/javascript">

        function login()
        {
            FB.login
            (
                function( response )
                {
                    if ( response.authResponse )
                    {
                        FB.api
                        (
                            "/me",
                            function( response )
                            {
                                document.getElementById( "profile_name" ).innerHTML = response.name;
                                document.getElementById( "list" ).innerHTML = "http://graph.facebook.com/" + response.id + "/friends";
                            }
                        )
                    }
                }
            );
        }

        function getFriends() {
            alert('1');
            FB.api('/me/friends', function(response) {
                //alert('2:'+response.data);
                if(response.data) {
                    $.each(response.data,function(index,friend) {
                        //alert(friend.name + ' has id:' + friend.id);
                        $( "list" ).append = response.name;
                    });
                } else {
                    alert("Error!");
                }
            });
        }

     </script>
</head>
<body>
    <div id="fb-root"></div>

    <script>

        window.fbAsyncInit = function()
        {
            FB.init
            (
                {
                    appId   : "109036532604620",
                    channelUrl:"http://localhost/testsaav/channel.html",
                    status  : true,
                    cookie  : true,
                    oauth   : true
                }
            );

        };

        FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
            alert('connected');
          } else if (response.status === 'not_authorized') {
            // not_authorized
          } else {
            // not_logged_in
          }
         });

        (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, /*debug*/ true));
    </script>    
    <a href="javascript:getFriends();">Login</a>
    <img id="profile_pic"/>
    <pre id="list"></pre>
    <div id="profile_name"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:29:47.133

尝试移动

```
 FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        alert('connected');
      } else if (response.status === 'not_authorized') {
        // not_authorized
      } else {
        // not_logged_in
      }
     }); 
```

此代码在 FB.init 函数之后但在 window.fbAsyncInit 函数内，例如

```
 window.fbAsyncInit = function()
    {
        FB.init
        (
            {
                appId   : "109036532604620",
                channelUrl:"http://localhost/testsaav/channel.html",
                status  : true,
                cookie  : true,
                oauth   : true
            }
        );

      FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        alert('connected');
      } else if (response.status === 'not_authorized') {
        // not_authorized
      } else {
        // not_logged_in
      }
     });

    }; 
```

您会从[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)的示例中注意到，您的初始化代码应该在 asyncinit 方法中的 init 方法之后才能正常运行。这可确保在加载 SDK 后以正确的顺序调用事物

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

# html - 具有计算字段的剔除网格

> ID：14184097
> 
> 赞同：0
> 
> 时间：2013-01-06T16:23:09.577
> 
> 标签：html, knockout.js

我已经设法在网上找到单个计算项的示例，但是有没有人有一个简单的剔除网格的示例，其中一个字段是根据其他字段的值计算的？

编辑：这是我编写的一些代码，但我很确定到目前为止我的做法是错误的：

```
 <script type="text/javascript" src="@Url.Content("~/Scripts/knockout-2.1.0.js")"></script>
<script type="text/javascript">

    function QBRatingsViewModel() {
            var self = this;
            var baseUri = '@ViewBag.ApiUrl';
            self.qbratings = ko.observableArray();
            this.Interception = ko.observable();
            this.Gain = ko.observable();

            this.CalculatedRating = ko.computed(function() {        
                return this.Interception() * this.Gain();
            }, this);

            $.getJSON("/api/qbrating", self.qbratings);
    }

    $(document).ready(function () {
        ko.applyBindings(new QBRatingsViewModel());
    }); 

  </script>

<div style="padding-left: 10px;">
    <div id="divQBRatings" style="padding-left: 3px; width: 750px;">
        <table class="grid" cellspacing="0" cellpadding="0" id="QBRatingsGrid">
            <tr class="gridheader"><td style="width: 30px;">Id</td><td width="10" /><td style="width: 40px;">Season</td><td width="10" /><td style="width: 70px;">Team </td><td width="10" /><td style="width: 130px;">Completion </td><td width="10" /><td style="width: 190px;">Gain </td><td width="10" /><td style="width: 30px;">Touchdown </td><td width="10" /><td style="width: 30px;">Interception </td><td width="10" /><td style="width: 30px;">Rating</td><td width="10" /><td></td></tr>
            <tbody data-bind="foreach: qbratings" class="grid">
                <tr>
                    <td><span style="width: 30px;" data-bind="text: $data.Id"></span></td>
                    <td width="10" />
                    <td><span style="width: 40px;" data-bind="text: $data.Season"></span></td>
                    <td width="10" />
                    <td><span style="width: 130px;"data-bind="text: $data.TeamName"></span></td>
                    <td width="10" />
                    <td><span style="width: 190px;" data-bind="text: $data.Completion"></span></td>
                    <td width="10" />
                    <td><span style="width: 190px;" data-bind="text: $data.Gain"></span></td>
                    <td width="10" />
                    <td><span style="width: 190px;" data-bind="text: $data.Touchdown"></span></td>
                    <td width="10" />
                    <td><span style="width: 190px;" data-bind="text: $data.Interception"></span></td>
                    <td width="10" />
                    <td><span style="width: 190px;" data-bind="text: $data.CalculatedRating"></span></td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:49:31.407

我不知道您计算的属性是否与项目或整个视图模型有关。如果它与项目有关，您应该执行以下操作：

```
$.getJSON("/api/qbrating", function (result) {
    ko.utils.arrayForEach(result, function (item) {
        item.CalculatedRating = item.Interception * item.Gain;
    });
    self.qbratings(result);
}); 
```

如果它与整个模型有关，您应该使用 $parent 而不是 $data：

```
<td><span style="width: 190px;" data-bind="text: $parent.CalculatedRating"></span></td> 
```

# mongodb - 在 mongodb 中删除重复文档的最快方法

> ID：14184099
> 
> 赞同：55
> 
> 时间：2013-01-06T16:23:20.403
> 
> 标签：mongodb, performance, optimization, duplicates

我在 mongodb 中有大约 170 万个文档（将来会超过 1000 万个）。其中一些代表我不想要的重复条目。文档的结构是这样的：

```
{
    _id: 14124412,
    nodes: [
        12345,
        54321
        ],
    name: "Some beauty"
} 
```

**如果文档至少有一个节点与**另一个具有**相同名称**的文档相同，则该文档是重复的。删除重复项最快的方法是什么？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2015-10-27T09:38:04.427

`dropDups: true`选项在 3.0 中不可用。

我有聚合框架的解决方案，用于收集重复项，然后一次性删除。

它可能比系统级别的“索引”更改要慢一些。但最好考虑一下您要删除重复文档的方式。

一种。一次性删除所有文件

```
var duplicates = [];

db.collectionName.aggregate([
  { $match: { 
    name: { "$ne": '' }  // discard selection criteria
  }},
  { $group: { 
    _id: { name: "$name"}, // can be grouped on multiple properties 
    dups: { "$addToSet": "$_id" }, 
    count: { "$sum": 1 } 
  }},
  { $match: { 
    count: { "$gt": 1 }    // Duplicates considered as count greater than one
  }}
],
{allowDiskUse: true}       // For faster processing if set is larger
)               // You can display result until this and check duplicates 
.forEach(function(doc) {
    doc.dups.shift();      // First element skipped for deleting
    doc.dups.forEach( function(dupId){ 
        duplicates.push(dupId);   // Getting all duplicate ids
        }
    )
})

// If you want to Check all "_id" which you are deleting else print statement not needed
printjson(duplicates);     

// Remove all duplicates in one go    
db.collectionName.remove({_id:{$in:duplicates}}) 
```

湾。您可以一个一个地删除文档。

```
db.collectionName.aggregate([
  // discard selection criteria, You can remove "$match" section if you want
  { $match: { 
    source_references.key: { "$ne": '' }  
  }},
  { $group: { 
    _id: { source_references.key: "$source_references.key"}, // can be grouped on multiple properties 
    dups: { "$addToSet": "$_id" }, 
    count: { "$sum": 1 } 
  }}, 
  { $match: { 
    count: { "$gt": 1 }    // Duplicates considered as count greater than one
  }}
],
{allowDiskUse: true}       // For faster processing if set is larger
)               // You can display result until this and check duplicates 
.forEach(function(doc) {
    doc.dups.shift();      // First element skipped for deleting
    db.collectionName.remove({_id : {$in: doc.dups }});  // Delete remaining duplicates
}) 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-01-06T17:00:44.497

假设您要从集合中永久删除包含重复`name`+`nodes`条目的文档，您可以使用以下选项添加`unique`索引：[`dropDups: true`](http://docs.mongodb.org/manual/core/indexes/#drop-duplicates)

```
db.test.ensureIndex({name: 1, nodes: 1}, {unique: true, dropDups: true}) 
```

正如文档所说，对此要格外小心，因为它会从您的数据库中删除数据。首先备份您的数据库，以防它不完全符合您的预期。

**更新**

此解决方案仅在 MongoDB 2.x 中有效，因为该选项在 3.0 ( [docs](http://docs.mongodb.org/manual/reference/method/db.collection.createIndex/#options-for-all-index-types) )`dropDups`中不再可用。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2016-07-01T06:42:53.363

使用 mongodump 创建集合转储

清除收藏

添加唯一索引

使用 mongorestore 恢复集合

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-06-13T13:13:33.690

我发现这个解决方案适用于 MongoDB 3.4：我假设有重复的字段称为 fieldX

```
db.collection.aggregate([
{
    // only match documents that have this field
    // you can omit this stage if you don't have missing fieldX
    $match: {"fieldX": {$nin:[null]}}  
},
{
    $group: { "_id": "$fieldX", "doc" : {"$first": "$$ROOT"}}
},
{
    $replaceRoot: { "newRoot": "$doc"}
}
],
{allowDiskUse:true}) 
```

作为 mongoDB 的新手，我花了很多时间并使用其他冗长的解决方案来查找和删除重复项。但是，我认为这个解决方案简洁易懂。

它首先匹配包含 fieldX 的文档（我有一些没有此字段的文档，但我得到了一个额外的空结果）。

下一阶段按 fieldX 对文档进行分组，并且仅使用[$$ROOT](https://docs.mongodb.com/manual/reference/aggregation-variables/#variable.ROOT)在每个组中插入[$first](https://docs.mongodb.com/manual/reference/operator/aggregation/first/)文档。最后，它将整个聚合组替换为使用 $first 和 $$ROOT 找到的文档。

我不得不添加 allowDiskUse 因为我的收藏很大。

您可以在任意数量的管道之后添加它，尽管 $first 的文档提到了使用**$first**之前的排序阶段，但没有它它对我有用。" 不能在这里发布链接，我的声誉不到 10 :( "

您可以通过添加 $out 阶段将结果保存到新集合中...

**或者**，如果一个人只对几个字段感兴趣，例如 field1、field2，而不是整个文档，在没有 replaceRoot 的小组阶段：

```
db.collection.aggregate([
{
    // only match documents that have this field
    $match: {"fieldX": {$nin:[null]}}  
},
{
    $group: { "_id": "$fieldX", "field1": {"$first": "$$ROOT.field1"}, "field2": { "$first": "$field2" }}
}
],
{allowDiskUse:true}) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-09-22T17:13:03.537

我的数据库有数百万条重复记录。@somnath 的答案并没有奏效，因此为希望删除数百万条重复记录的人们编写了对我有用的解决方案。

```
/** Create a array to store all duplicate records ids*/
var duplicates = [];

/** Start Aggregation pipeline*/
db.collection.aggregate([
  {
    $match: { /** Add any filter here. Add index for filter keys*/
      filterKey: {
        $exists: false
      }
    }
  },
  {
    $sort: { /** Sort it in such a way that you want to retain first element*/
      createdAt: -1
    }
  },
  {
    $group: {
      _id: {
        key1: "$key1", key2:"$key2" /** These are the keys which define the duplicate. Here document with same value for key1 and key2 will be considered duplicate*/
      },
      dups: {
        $push: {
          _id: "$_id"
        }
      },
      count: {
        $sum: 1
      }
    }
  },
  {
    $match: {
      count: {
        "$gt": 1
      }
    }
  }
],
{
  allowDiskUse: true
}).forEach(function(doc){
  doc.dups.shift();
  doc.dups.forEach(function(dupId){
    duplicates.push(dupId._id);
  })
})

/** Delete the duplicates*/
var i,j,temparray,chunk = 100000;
for (i=0,j=duplicates.length; i<j; i+=chunk) {
    temparray = duplicates.slice(i,i+chunk);
    db.collection.bulkWrite([{deleteMany:{"filter":{"_id":{"$in":temparray}}}}])
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-23T12:42:28.083

这是一种稍微“手动”的方式：

本质上，首先，获取您感兴趣的所有唯一键的列表。

然后使用这些键中的每一个执行搜索，如果该搜索返回大于一，则删除。

```
 db.collection.distinct("key").forEach((num)=>{
    var i = 0;
    db.collection.find({key: num}).forEach((doc)=>{
      if (i)   db.collection.remove({key: num}, { justOne: true })
      i++
    })
  }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-07-09T10:26:22.353

当您的文档只有一小部分重复时，加快速度的提示：

1.  您需要该字段上的索引来检测重复项。
2.  $group 不使用索引，但它可以利用 $sort 和 $sort 使用索引。所以你应该在开头放一个 $sort 步骤
3.  做 inplace delete_many() 而不是 $out 到新集合，这将节省大量的 IO 时间和磁盘空间。

如果你使用 pymongo 你可以这样做：

```
index_uuid = IndexModel(
    [
        ('uuid', pymongo.ASCENDING)
    ],
)
col.create_indexes([index_uuid])
pipeline = [
    {"$sort": {"uuid":1}},
    {
        "$group": {
            "_id": "$uuid",
            "dups": {"$addToSet": "$_id"},
            "count": {"$sum": 1}
        }
    },
    {
        "$match": {"count": {"$gt": 1}}
    },
]
it_cursor = col.aggregate(
    pipeline, allowDiskUse=True
)
# skip 1st dup of each dups group
dups = list(itertools.chain.from_iterable(map(lambda x: x["dups"][1:], it_cursor)))
col.delete_many({"_id":{"$in": dups}}) 
```

### 表现

我在一个包含 30M 文档和 1TB 大的数据库上对其进行了测试。

*   如果没有索引/排序，获取光标需要一个多小时（我什至没有病人等待它）。
*   使用索引/排序，但使用 $out 输出到新集合。如果您的文件系统不支持快照，这会更安全。但是它需要大量的磁盘空间并且需要超过 40 分钟才能完成，尽管我们使用的是 SSD。如果您在 HDD RAID 上，它会慢得多。
*   使用 index/sort 和 inplace delete_many，总共需要大约 5 分钟。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-21T05:59:57.297

以下方法合并具有相同名称的文档，同时仅保留唯一节点而不复制它们。

我发现使用`$out`运算符是一种简单的方法。我展开数组，然后通过添加到集合对其进行分组。`$out`运算符允许聚合结果持久化[ [docs]](https://docs.mongodb.com/manual/reference/operator/aggregation/out/)。如果您输入集合本身的名称，它将用新数据替换集合。如果名称不存在，它将创建一个新集合。

希望这可以帮助。

`allowDiskUse`可能必须添加到管道中。

```
db.collectionName.aggregate([
  {
    $unwind:{path:"$nodes"},
  },
  {
    $group:{
      _id:"$name",
      nodes:{
        $addToSet:"$nodes"
      }
  },
  {
    $project:{
      _id:0,
      name:"$_id.name",
      nodes:1
    }
  },
  {
    $out:"collectionNameWithoutDuplicates"
  }
]) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-04T13:47:25.997

使用*pymongo*这应该可以。

在 unique_field 中添加集合需要唯一的字段

```
unique_field = {"field1":"$field1","field2":"$field2"}

cursor = DB.COL.aggregate([{"$group":{"_id":unique_field, "dups":{"$push":"$uuid"}, "count": {"$sum": 1}}},{"$match":{"count": {"$gt": 1}}},{"$group":"_id":None,"dups":{"$addToSet":{"$arrayElemAt":["$dups",1]}}}}],allowDiskUse=True) 
```

根据重复数对 dups 数组进行切片（这里我只有一个额外的重复）

```
items = list(cursor)
removeIds = items[0]['dups']
hold.remove({"uuid":{"$in":removeIds}}) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-01-15T03:24:15.670

首先，您可以找到所有重复项并在数据库中删除这些重复项。在这里，我们使用 id 列来检查和删除重复项。

```
db.collection.aggregate([
    { "$group": { "_id": "$id", "count": { "$sum": 1 } } },
    { "$match": { "_id": { "$ne": null }, "count": { "$gt": 1 } } },
    { "$sort": { "count": -1 } },
    { "$project": { "name": "$_id", "_id": 0 } }
]).then(data => {
    var dr = data.map(d => d.name);
    console.log("duplicate Recods:: ", dr);
    db.collection.remove({ id: { $in: dr } }).then(removedD => {
        console.log("Removed duplicate Data:: ", removedD);
    })
}) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-08-30T01:31:30.053

以下 Mongo 聚合管道执行重复数据删除并将其输出回相同或不同的集合。

```
collection.aggregate([
  { $group: {
    _id: '$field_to_dedup',
    doc: { $first: '$$ROOT' }
  } },
  { $replaceRoot: {
    newRoot: '$doc'
  } },
  { $out: 'collection' }
], { allowDiskUse: true })
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-30T01:49:25.627

1.  一般的想法是使用 findOne [https://docs.mongodb.com/manual/reference/method/db.collection.findOne/](https://docs.mongodb.com/manual/reference/method/db.collection.findOne/) 从集合中的重复记录中检索一个随机 id。

2.  删除集合中除我们从 findOne 选项检索到的随机 ID 之外的所有记录。

如果您尝试在 pymongo 中执行此操作，则可以执行此类操作。

```
def _run_query():

        try:

            for record in (aggregate_based_on_field(collection)):
                if not record:
                    continue
                _logger.info("Working on Record %s", record)

                try:
                    retain = db.collection.find_one(find_one({'fie1d1': 'x',  'field2':'y'}, {'_id': 1}))
                    _logger.info("_id to retain from duplicates %s", retain['_id'])

                    db.collection.remove({'fie1d1': 'x',  'field2':'y', '_id': {'$ne': retain['_id']}})

                except Exception as ex:
                    _logger.error(" Error when retaining the record :%s Exception: %s", x, str(ex))

        except Exception as e:
            _logger.error("Mongo error when deleting duplicates %s", str(e))

def aggregate_based_on_field(collection):
    return collection.aggregate([{'$group' : {'_id': "$fieldX"}}]) 
```

从外壳：

1.  将 find_one 替换为 findOne
2.  相同的删除命令应该可以工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-07-03T12:01:16.117

我不知道它是否会回答主要问题，但对其他人来说它会很有用。1.使用 findOne() 方法查询重复行并将其存储为对象。

```
const User = db.User.findOne({_id:"duplicateid"}); 
```

2.执行deleteMany()方法删除所有id为“duplicateid”的行

```
db.User.deleteMany({_id:"duplicateid"}); 
```

3.插入存储在用户对象中的值。

```
db.User.insertOne(User); 
```

简单快捷！！！！

# php - 使用 jQuery Ajax 传递数据？

> ID：14184102
> 
> 赞同：0
> 
> 时间：2013-01-06T16:23:43.037
> 
> 标签：php, jquery, ajax

我有下面的html页面：

```
<!DOCTYPE html>
<html lang="en">
    <head>

        <title>HTML</title>

        <script src="http://code.jquery.com/jquery-latest.min.js"></script>

        <script>
            $(document).ready(function() {
                $("#b1").click(function(event) {
                    $.ajax({
                        type : "POST",
                        url : "index.php",
                        data : "valx=2",
                        contentType : "application/x-www-form-urlencoded",
                        dataType : "text",
                        complete : function() {
                            alert('post completed');
                        },
                        error : function() {
                            alert('error condition');
                        },
                        success : function(data) {
                            $('.result').html(data);
                            alert('data is returned');
                        },

                        statusCode : {
                            200 : function() {
                                alert("page was found");
                            }
                        }

                    });
                    event.preventDefault();
                });
            });
        </script>
    </head>

    <body>
        <div>
            <button id="b1">
                Click Me!
            </button>
        </div>
        <div class="result"></div>

    </body>
</html> 
```

然后我有以下php页面：

```
<?php
     $my_string =  $_REQUEST["valx"]; 
     $my_string = $my_string +9;
     echo $my_string;
?> 
```

一切都按原样完美运行，但我试图弄清楚如何将发布数据更改为表单：

```
 data: '{ valx:"2"}' 
```

这就是它崩溃的地方。我尝试了多种形式的数据：'{ valx:"2"}' 仍然没有运气。似乎 php 脚本没有正确获取数据。另请注意，使用这种格式似乎也`contentType : "application/x-www-form-urlencoded",`需要更改。

所以问题是如何传递表单的数据`data: '{ valx:"2"}'`并返回 11 的响应？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:26:17.117

data 参数接受`var=value&var1=value1`表单*或*带有键/值的 JavaScript 对象。你给了它这个，这是一个字符串......

```
data: '{ valx:"2"}` 
```

...当你应该给它这个时，它是一个真正的 JS 对象：

```
data: { valx:"2"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:27:31.530

使用对象而不是字符串。jQuery 会将对象解析为表单编码格式。还要完全删除您的`contentType`选项，因为这不是正在发送的数据类型，而是用于接收的数据，您将收到 text/html

```
 data : { valx:"2"}, 
```

# ios - 自定义 UIView 无法为子视图赋值

> ID：14184104
> 
> 赞同：1
> 
> 时间：2013-01-06T16:24:00.123
> 
> 标签：ios, uiview, textfield, instance-variables

我有一个`UIView`子类，它与一个`xib`. 我不是在`layoutSubviews`方法中创建视图，而只是在`xib`. 何时使用`self.ivar`和令人困惑`_ivar`。我试图为我的子类`textField`的 a设置文本。谁能帮我？？我试图从我的. 但我不能成功。这是一个代码。`subview``UIView``textfield``viewController`

这是我的`UIView`自定义类`DateRangeView.m`

```
#import "DateRangeView.h"

@implementation DateRangeView
@synthesize tfStartDate = _tfStartDate;
@synthesize tfEndDate = _tfEndDate;
@synthesize startDate = _startDate;
@synthesize endDate = _endDate;
@synthesize dateFormatter = _dateFormatter;
@synthesize datePicker = _datePicker;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"DateRangeView" owner:self options:nil];
        [self addSubview:[topLevelObjects objectAtIndex:0]];
        [self baseInit];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
        [self baseInit];
    }
    return self;

}

- (void)baseInit {
    NSDateFormatter *df = [[NSDateFormatter alloc]init];
    [df setDateStyle:NSDateFormatterMediumStyle];
    _dateFormatter = df;

    _startDate = [NSDate date];
    _endDate = [NSDate date];
}

- (void)awakeFromNib {
    [super awakeFromNib];

    _datePicker = [[UIDatePicker alloc]initWithFrame:CGRectMake(0, 200, 320, 216)];
    [_datePicker setDatePickerMode:UIDatePickerModeDate];
    [_datePicker setDate:[NSDate date]];
    _tfStartDate.inputView = _datePicker;
    _tfEndDate.inputView = _datePicker;

    UIToolbar *keyboardToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,self.frame.size.width, 44)]; 

    UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelButtonPressed:)];

    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];

    [keyboardToolbar setItems:[[NSArray alloc] initWithObjects:cancelBtn, flexibleSpace, doneButton, nil]];

    [keyboardToolbar setTranslucent:YES];
    [keyboardToolbar setTintColor:[UIColor blackColor]];

    [_tfStartDate setInputAccessoryView:keyboardToolbar];
    [_tfEndDate setInputAccessoryView:keyboardToolbar];

    _tfStartDate.text = [_dateFormatter stringFromDate:_startDate];
    _tfEndDate.text = [_dateFormatter stringFromDate:_endDate];

}

- (void)doneButtonPressed:(id)sender {
    if ([_tfStartDate isFirstResponder]) {

        self.startDate = _datePicker.date;
        [_tfStartDate resignFirstResponder];

    }else if ([_tfEndDate isFirstResponder]) {

        self.endDate = _datePicker.date;
        [_tfEndDate resignFirstResponder];
    }
}

- (void)cancelButtonPressed:(id)sender {
    [_tfStartDate resignFirstResponder];
    [_tfEndDate resignFirstResponder];
}

- (void)setStartDate:(NSDate *)startDate {
    _startDate = startDate;
    _tfStartDate.text = [_dateFormatter stringFromDate:_startDate];
}

- (void)setEndDate:(NSDate *)endDate {
    _endDate = endDate;
    _tfEndDate.text = [_dateFormatter stringFromDate:_endDate];
} 
```

这是我将视图添加到视图控制器并将文本分配给文本字段并尝试获取文本的代码？但我在设置和获取文本方面都没有成功。

```
rangeView = [[DateRangeView alloc]initWithFrame:CGRectMake(0, 0, 320, 150)];
[self.view addSubview:rangeView];
rangeView.startDate = [NSDate date];

NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *startDateComponents = [calendar components:NSDayCalendarUnit fromDate:[NSDate date]];
[startDateComponents setDay:5];

NSDate *beginDate = [calendar dateByAddingComponents:startDateComponents toDate:[NSDate date] options:0];
rangeView.endDate = beginDate;

NSLog(@"start %@", rangeView.tfStartDate.text);
NSLog(@"end %@", rangeView.tfEndDate.text); 
```

日志显示为空。任何帮助将不胜感激。我附上了我`UIView`唯一的完整代码，以了解我在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:53:57.317

在您的代码中，我看不到`self.tfStartDate`and的初始化`self.tfEndDate`。

所以，有两种可能：

1.  它们应该是 IBOutlets：然后，检查您的 nib 文件，它们是否也连接到相关视图；

2.  它们没有在您的 xib 中定义：在这种情况下，只需将它们初始化为`viewDidLoad`.

至于`self.ivar`vs.的使用`_ivar`，唯一的区别是前者会为你处理引用计数；对于后者，你必须自己做。因此，在这种情况下，您使用的是哪一个并不重要。问题在于它们的初始化，以便它们正确引用您的子视图。

# python - 当我输入 '\t' 字符时，输出结果为换行符

> ID：14184105
> 
> 赞同：0
> 
> 时间：2013-01-06T16:24:03.603
> 
> 标签：python, tabs, python-3.x, newline

*我是Python新手，今天我正在基于列表在Python3.3上编写一个简单的测试程序。所以，我注意到当我输入制表符空格字符`\t`时，输出闪烁，以至于我输入了**换行符**！下面给出一个示例：*

```
 def printlist(list_name,tabs=0):
         for items in list_name:
           if isinstance(items,list):
             printlist(items,tabs)
           else:
             print(items)
             for num in range(tabs):
                 print('\t') #tab-stops provide

    list3 = [
             'list no. 3',
             ['tree','stems','root'],
             ['human','hand','leg'],
             ['robot','microprocessor','motor']
            ]

   printlist(list3,1) 
```

*输出是：*

```
 >>> ================================ RESTART ================================
>>> 
list no. 3

tree

stems

root

human

hand

leg

robot

microprocessor

motor

>>> 
```

*但我想要的输出**格式是：***

```
 list no. 3
    tree
    stems
    root
    human
    hand
    leg
    robot
    microprocessor
    motor 
```

[***我想要标签而不是新行***]

**那么怎么可能呢？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:28:08.887

默认情况下，`print()`将以换行符结尾。如果要抑制此行为，请指定`end`.

```
print("\t", end="") 
```

文档在这里。 [http://docs.python.org/3.3/library/functions.html#print](http://docs.python.org/3.3/library/functions.html#print)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:33:55.523

print 的默认行为是附加一个换行符：参见例如[http://docs.python.org/3/whatsnew/3.0.html](http://docs.python.org/3/whatsnew/3.0.html)

# php - PHP合并数组问题

> ID：14184113
> 
> 赞同：1
> 
> 时间：2013-01-06T16:24:50.330
> 
> 标签：php, arrays, merge

我有一个这样的数组

```
Array
(
[1] => Array
    (
        [0] => PrettyName1
        [1] => PrettyName2
        [2] => PrettyName3
    )

[2] => Array
    (
        [0] => UglyURL1
        [1] => UglyURL2
        [2] => UglyURL3
    )

) 
```

我希望能够将这些放入一个代码点火器模板的数组中，当我推送和合并数组时，我最终会搞砸整个事情。有人可以告诉我合并这些数组的正确方法吗？我需要类似的东西

```
Array
(
    PrettyName1 => UglyURL1
    PrettyName2 => UglyURL2
    PrettyName3 => UglyURL3
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:29:07.283

也许是这样的`array_combine($ar[1], $ar[2])`？

# python - Pandas DataFrame.apply() 和 mibian

> ID：14184115
> 
> 赞同：0
> 
> 时间：2013-01-06T16:25:19.123
> 
> 标签：python, pandas, dataframe, mibian

我正在尝试使用包含不同选项数据的 pandas 数据框来计算隐含波动率。对于隐含波动率，我使用[mibian](http://code.mibian.net/)。这是代码：

```
optionsData.to_dict():

    {'callclose': {0: Decimal('4'),
      1: Decimal('2.62'),
      2: Decimal('2.64'),
      3: Decimal('1.7'),
      4: Decimal('1.35')},
     'daystoexpiration': {0: 43L, 1: 43L, 2: 43L, 3: 43L, 4: 43L},
     'expiration': {0: datetime.date(2013, 2, 16),
      1: datetime.date(2013, 2, 16),
      2: datetime.date(2013, 2, 16),
      3: datetime.date(2013, 2, 16),
      4: datetime.date(2013, 2, 16)},
     'impvol': {0: nan, 1: nan, 2: nan, 3: nan, 4: nan},
     'putclose': {0: Decimal('0.54'),
      1: Decimal('0.65'),
      2: Decimal('0.76'),
      3: Decimal('1.08'),
      4: Decimal('1.56')},
     'strike': {0: Decimal('39'),
      1: Decimal('40'),
      2: Decimal('41'),
      3: Decimal('42'),
      4: Decimal('43')},
     'symbol': {0: 'A', 1: 'A', 2: 'A', 3: 'A', 4: 'A'},
     'underlyingclose': {0: Decimal('42.86'),
      1: Decimal('42.86'),
      2: Decimal('42.86'),
      3: Decimal('42.86'),
      4: Decimal('42.86')}}

optionsData = optionsData.T

def calcvol(info):
    print info.name
    print 'Starting procedure.'
    tempmb = mb.BS([info['underlyingclose'], 
            info['strike'], 
            .25, 
            info['daystoexpiration']],
           callPrice=float(info['callclose']), 
           putPrice=info['putclose'])
    print 'mb created'
    impvol = tempmb.impliedVolatility
    print 'implied vol calculated'
    info['impvol'] = impvol
    print 'impvol set'
    del impvol, tempmb
    print 'vars deleted'
    return info

a = optionsData.apply(calcvol) 
```

当我运行所有这些时，它在 optionsData 中的第一个元素上设置 impvol，但似乎随后给了我这个错误：

```
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
<ipython-input-9-116f3c010b9c> in <module>()
----> 1 a = optionsData.apply(calcvol)

C:\Python27\lib\site-packages\pandas-0.10.0-py2.7-win32.egg\pandas\core\frame.pyc in apply(self, func, axis, broadcast, raw, args, **kwds)
   4079                     return self._apply_raw(f, axis)
   4080                 else:
-> 4081                     return self._apply_standard(f, axis)
   4082             else:
   4083                 return self._apply_broadcast(f, axis)

C:\Python27\lib\site-packages\pandas-0.10.0-py2.7-win32.egg\pandas\core\frame.pyc in _apply_standard(self, func, axis, ignore_failures)
   4154                     # no k defined yet
   4155                     pass
-> 4156                 raise e
   4157 
   4158         if len(results) > 0 and _is_sequence(results[0]):

ZeroDivisionError: ('float division by zero', u'occurred at index 1')

0
Starting procedure.
mb created
implied vol calculated
impvol set
vars deleted
0
Starting procedure.
mb created
implied vol calculated
impvol set
vars deleted
1
Starting procedure. 
```

我必须错过一些简单的东西。当我将它们传递给 mibian 时，我尝试将每个值包装在 float() 中，但仍然遇到同样的问题。我非常感谢任何指导。

此外，如果您知道使用数据框计算隐含波动率的更有效方法，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:50:49.333

正如海登评论的那样，我确实单独尝试了该功能，但样本量不够大。

显然，对于这些变量的某些值，它将接近于零。我更改了我的`calcvol`函数以尝试使用 mibian 来获取波动性，如果 a`ZeroDivisionError`被捕获则设置`impvol`为`NaN`. 这将帮助我弄清楚是哪些人引起了这种骚动。

# mongodb - 对于以下情况，正确的 noSQL 集合结构是什么？

> ID：14184120
> 
> 赞同：1
> 
> 时间：2013-01-06T16:25:35.373
> 
> 标签：mongodb, database-design, couchdb, database-schema, nosql

作为一个习惯于用关系术语思考的人，我正试图掌握以“noSQL 方式”思考的问题。

假设以下场景：

> 我们有一个博客（例如 9gag.com），里面有很多帖子和注册用户。每个用户都可以喜欢每个帖子。我们想建立一个推荐引擎，所以我们需要跟踪：
> 
> *   用户查看的所有帖子
> *   用户喜欢的所有帖子
> 
> 帖子有：标题、正文、类别。用户拥有：用户名、密码、电子邮件、其他数据。

在关系数据库中，我们会有类似的东西：`posts`, `users`, `posts_users_views (post_id, users_id, view_date)`, `posts_users_likes (post_id, user_id, like_date)`.

**问题**

在面向文档/列的 noSQL 数据库中，“正确”的结构是什么？

澄清：*我们是否应该在用户中保存所有查看/喜欢的帖子 ID 的数组（或帖子中的用户 ID）？如果是这样，我们不会遇到行大小变大的问题吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:22:15.860

在 CouchDB 中，您可以为用户、帖子、视图等拥有单独的文档。显示用户的视图/喜欢可以通过“视图”（物化映射/减少查询）来安排，映射函数发出数组键`[user_id, post_id]`。结果，您将获得已排序的字典（按字典顺序按键排序），因此每个视图的所有视图`user='ID'`都是键从`[ID]`to开始的查询`[ID,{}]`。您可以对其进行优化，但基本解决方案非常简单。

在 CouchDB [wiki](http://wiki.apache.org/couchdb/)中有一条关于使用[关系建模设计](http://wiki.apache.org/couchdb/EntityRelationship)和[视图整理](http://wiki.apache.org/couchdb/View_collation)机制的评论（可以替代一些简单的连接）。为了获得一些直觉，我更建议研究帖子和评论的问题，这也很简单，但没有视图和喜欢那么琐碎:)

可能没有 NoSQL 方式，但我认为大多数 map/reduce 系统都有类似的思维方式。CouchDB 是一个很好的入门工具，因为它非常有限 :) 在分布式环境中很难做任何低效的查询，它的 map 和 reduce 查询功能不会有副作用（它们正在生成物化视图，当文档set 已更改，结果不应取决于文档更新的顺序）。

# magento - 自定义类别页面

> ID：14184124
> 
> 赞同：0
> 
> 时间：2013-01-06T16:25:54.560
> 
> 标签：magento, magento-1.5

我在 magento (tintinportintin.com.br) 有一家商店，我想自定义类别页面，为每个类别页面添加特定颜色。例如，我希望相同的主页菜单和所有页面在类别 x 中为蓝色，在类别 y 中为红色。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:34:59.670

我商店中的 style.css 指的是#nav

```
 /* Classes specifying background and other settings for navigation bar */
.navbar {
    background-position:top left;
    background-repeat:repeat-x;
    float:left;
    width:944px; /* 944 = 960 - 2*8 */
    height:41px;
    padding-top:10px;
}
.navbar-left {
    background-position:0 -51px;
    width:8px;
    height:51px;
    float:left;
}
.navbar-right {
    background-position:100% -51px;
    width:8px;
    height:51px;
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:47:54.423

我的 style.css 指的是导航背景：

```
.categorypath-colares-html #nav{
   background-color: #b7ea2c;
background:url(../images/img/navbar-lightgreen.png) no-repeat; 
}

.categorypath-colares-html #nav a{
   color:#b7ea2c;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:36:16.317

html body 标记包含每个类别的类名，因此一种非编程方式可以做到这一点，就是使用 css。

> `<body class=" catalog-category-view categorypath-pulseiras-casual-html category-casual">`
> 
> `<body class=" catalog-category-view categorypath-colares-html category-colares">`

所以在你的 style.css 中（你可以添加到最后）

```
.categorypath-colares-html #nav{
   background-color: black;
}

.categorypath-colares-html #nav a{
   color:red;
}

.categorypath-pulseiras-casual-html #nav a{
   color:blue;
}

.categorypath-pulseiras-casual-html #nav{
   background-color: black;
} 
```

（唯一的限制是如果您更改类别名称，那么您将需要更新 css）

# wpf - 如何在 WPF 中为 MouseUp 添加触发器？

> ID：14184125
> 
> 赞同：1
> 
> 时间：2013-01-06T16:25:56.330
> 
> 标签：wpf, silverlight, triggers, wpf-controls, controltemplate

我想让我的按钮（我`ControlTemplate`为 a定义 a `Button`）在鼠标向上（单击按钮并离开鼠标按钮）时触发我的动画。那是因为`Button`没有`VisualState`喜欢`MouseUp`，但只有`Pressed`在点击时。

我希望在不按住按钮的情况下执行动画，我只想单击并释放。

这是我的代码（你可以看到我放了但它没有产生任何影响：

```
<Window.Resources>
    <Style x:Key="ButtonStyle1" TargetType="Button">
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="VerticalAlignment" Value="Stretch" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="BorderOfTemplate" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" RenderTransformOrigin=".5,.5">
                        <Border.Triggers>
                            <EventTrigger RoutedEvent="Click">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AnimatedScaleTransform" Storyboard.TargetProperty="ScaleX" Duration="0:0:3" RepeatBehavior="1x">
                                            <LinearDoubleKeyFrame KeyTime="0:0:3" Value=".1" />
                                            <SplineDoubleKeyFrame  Value="1" KeyTime="0:0:3" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AnimatedScaleTransform" Storyboard.TargetProperty="ScaleY" Duration="0:0:3" RepeatBehavior="1x">
                                            <LinearDoubleKeyFrame KeyTime="0:0:3" Value=".1" />
                                            <SplineDoubleKeyFrame  Value="1" KeyTime="0:0:3" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="AnimatedTranslateTransform" Storyboard.TargetProperty="Y" Duration="0:0:3" RepeatBehavior="1x">
                                            <LinearDoubleKeyFrame Value="-170" KeyTime="0:0:2" />
                                            <SplineDoubleKeyFrame  Value="1" KeyTime="0:0:3" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Border.Triggers>

                        <Border.RenderTransform>
                            <TransformGroup>
                                <RotateTransform x:Name="AnimatedRotateTransform" />
                                <ScaleTransform x:Name="AnimatedScaleTransform" />
                                <TranslateTransform x:Name="AnimatedTranslateTransform" />
                            </TransformGroup>
                        </Border.RenderTransform>

                     <here some VisualStateManager>
                     </here some VisualStateManager>
enter code here
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:24:38.237

根据[这篇文章](http://msdn.microsoft.com/en-us/library/bb979699.aspx)，Silverlight 的普通版`EventTrigger`只支持`Loaded`事件。

但是，使用`EventTrigger`from `System.Windows.Interactivity`，您似乎可以使用其他事件，例如**Click**或**MouseLeftButtonUp**。有关示例，请参见本文：[codeproject.com](http://www.codeproject.com/Articles/125188/Using-EventTrigger-in-XAML-for-MVVM-No-Code-Behind)

# c++ - 如何确定进程是 32 位还是 64 位？

> ID：14184137
> 
> 赞同：14
> 
> 时间：2013-01-06T16:27:29.950
> 
> 标签：c++, windows, winapi, 32bit-64bit

给定一个 Windows 进程句柄，我如何使用 C++ 代码确定该进程是 32 位还是 64 位？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-06T20:58:25.040

如果您有进程句柄，请使用[`IsWow64Process()`](http://msdn.microsoft.com/en-us/library/ms684139.aspx).

如果`IsWow64Process()`报告为真，则该进程是在 64 位操作系统上运行的 32 位进程。

如果`IsWow64Process()`报告错误（或不存在`kernel32.dll`），则该进程要么是在 32 位操作系统上运行的 32 位，要么是在 64 位操作系统上运行的 64 位。要知道操作系统本身是 32 位还是 64 位，请使用[`GetNativeSystemInfo()`](http://msdn.microsoft.com/en-us/library/ms724340.aspx)（或者[`GetSystemInfo()`](http://msdn.microsoft.com/en-us/library/ms724381.aspx)如果`GetNativeSystemInfo()`在 中不可用`kernel32.dll`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-06T12:02:51.920

```
BOOL IsWow64(HANDLE process)
{
    BOOL bIsWow64 = FALSE;

    typedef BOOL(WINAPI *LPFN_ISWOW64PROCESS) (HANDLE, PBOOL);
    LPFN_ISWOW64PROCESS fnIsWow64Process;
    fnIsWow64Process = (LPFN_ISWOW64PROCESS)GetProcAddress(GetModuleHandle(TEXT("kernel32")), "IsWow64Process");

    if (NULL != fnIsWow64Process)
    {
        if (!fnIsWow64Process(process, &bIsWow64))
        {
            //handle error
        }
    }
    return bIsWow64;
}

bool IsX86Process(HANDLE process)
{
    SYSTEM_INFO systemInfo = { 0 };
    GetNativeSystemInfo(&systemInfo);

    // x86 environment
    if (systemInfo.wProcessorArchitecture == PROCESSOR_ARCHITECTURE_INTEL)
        return true;

    // Check if the process is an x86 process that is running on x64 environment.
    // IsWow64 returns true if the process is an x86 process
    return IsWow64(process);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:43:07.250

如果你有模块的句柄，那么你可以这样做：

```
IMAGE_NT_HEADERS * headers = ImageNtHeader(handle);

if ( headers->FileHeader.Machine == IMAGE_FILE_MACHINE_I386 )
{
    //module is x86
}
else if  ( headers->FileHeader.Machine == IMAGE_FILE_MACHINE_AMD64 )
{
    //module is x64
} 
```

我从[自己的回答](https://stackoverflow.com/questions/4308996/finding-the-address-range-of-the-data-segment)中得到了帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T14:19:51.393

尝试

```
#include <Windows.h>
enum class process_architecture
{
    nun,
    x32,
    x64
};
enum class windows_architecture
{
    x32,
    x64
};
windows_architecture process::get_windows_architecture()
{
#ifdef _WIN64
    return windows_architecture::x64;
#else
    return windows_architecture::x32;
#endif
}

process_architecture get_process_architecture(DWORD id)
{
    BOOL is_wow_64 = FALSE;
    HANDLE h_process = OpenProcess(PROCESS_QUERY_LIMITED_INFORMATION, false, id);
    if (!h_process) return process_architecture::nun;
    bool result = IsWow64Process(h_process, &is_wow_64);
    CloseHandle(h_process);
    if (!result) return process_architecture::nun;
    if (is_wow_64) return process_architecture::x32;
    else if (get_windows_architecture() == windows_architecture::x32) return process_architecture::x32;
    else return process_architecture::x64;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-31T13:39:46.957

如果您不想使用 Windows API，请尝试：

```
int main()
{
    const int* pInt = nullptr;
    if (sizeof(pInt) == 8)
    {
        std::cout << "64 bit process";
    }
    else if(sizeof(pInt) == 4)
    {
        std::cout << "32 bit process";
    }
return 0;
} 
```

# jquery - 弹性滑块和小旋转木马之间的冲突

> ID：14184139
> 
> 赞同：0
> 
> 时间：2013-01-06T16:27:36.223
> 
> 标签：jquery, html, css, slider

我正在更新我的网站，当我用 HTML 进行编码时，我把一切都做好了 100% 工作。现在我将它转换为带有页眉和页脚的 .php，但在我的主页上，2 个滑块相互冲突。有时滑块工作，有时轮播工作..有没有人知道这可能是什么并解决这个问题。就像我说的，它一开始就正常工作。为了给你这个想法，这是网站：www.vazcreations.nl 两个代码都在这里：

```
<div class="flexslider">
                <ul class="slides">
                    <li>
                    <img src="images/slider/slider_img_chemi.png" alt="" class="slider-img">
                    <h1>SEO</h1>
                     Search Engine<br>
                     Optimalisation <a href="#">

                    </a></li>
                    <li>
                    <img src="images/slider/slider_img_artist.png" alt="" class="slider-img"/>
                    <h1>Webdesign</h1>
                     Zie onze portfolio<br>
                     en laat u overtuigen <a href="portfolio">
                    <div class="slider-btn-bg">
                         » Zie ons portfolio
                    </div>
                    </a></li>
                    <li>
                    <img src="images/slider/slider_img_browser.png" alt="" class="slider-img"/>
                    <h1>100%</h1>
                     Cross-browser<br>
                     Compatible <a href="#">

                    </a></li>
                    <li>
                    <img src="images/slider/slider_img_dice.png" alt="" class="slider-img"/>
                    <h1>Alles kan</h1>
                     CMS, Logo's, Designs <a href="mogelijkheden">
                    <div class="slider-btn-bg">
                         » Bekijk de mogelijkheden
                    </div>
                    </a></li>
                </ul>
            </div>

<div id="slider2">
                <a class="buttons prev" href="#"><img src="images/under_container/recent_creations_prev.png" alt="" class="next-prev"/></a>
                <div class="viewport">
                    <ul class="overview">
                        <li><img src="images/creations/recent_haags.png" alt="" class="work"/></li>
                        <li><img src="images/creations/recent_mega.png" alt="" class="work"/></li>
                        <li><img src="images/creations/recent_vaz.png" alt="" class="work"/></li>
                        <li><img src="images/creations/recent_haags.png" alt="" class="work"/></li>
                        <li><img src="images/creations/recent_mega.png" alt="" class="work"/></li>
                        <li><img src="images/creations/recent_vaz.png" alt="" class="work"/></li>
                    </ul>
                </div>
                <a class="buttons next" href="#"><img src="images/under_container/recent_crations_next.png" alt="" class="next-prev"/></a>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:34:46.570

您正在加载 jQuery.js 两次。第二个版本清除了第一个和注册到第一个的所有插件。

您只需要一个版本，它必须在任何插件或依赖代码之前加载。

还可以使用浏览器控制台查看错误。页面抛出 syntaxhighlighter 错误，因为您正在调用使用它但不包括页面中的脚本

# design-patterns - 确定新观察是独特的还是重复以前的观察的最有效方法是什么？

> ID：14184141
> 
> 赞同：2
> 
> 时间：2013-01-06T16:27:46.670
> 
> 标签：design-patterns

我正在构建一个知识库站点，对于知识库中的每个页面，我希望能够显示以下统计信息：***Y 不同的人查看了 X 次***

**计算视图数量很简单**

为了计算总浏览量，我可以在每次加载页面时简单地增加一个页面浏览计数器（用户已登录，因此没有垃圾邮件问题等）。

**唯一页面视图的简单方法 - 存储所有查看者 ID**

为了决定是否将新访问计为新的唯一访问者或以前的访问者之一只是再次返回，我需要记录谁已经看过该页面。

这意味着为每个页面保留以前的访问者 ID 的存储。每次访客到达时，我都会检查他们的 ID 是否存在于商店中。如果有，我什么也不做，如果没有，我会追加它。同时，我记录了唯一 ID 的总数。

**存储和查找所有 ID 以计算单个总数感觉很麻烦**

这在编程上非常简单，但感觉很难看。存储许多 ID，然后查找每个新 ID 以计算单个整数的想法感觉就像比我更聪明的头脑找到了一个紧凑的解决方案。

**这是标准问题模式吗？**

确定新观察是独特的还是预先存在的最有效的方法是什么？

我对这是否是一些涉及散列或类似的紧凑解决方案的标准问题感兴趣？

***注意我的兴趣是是否有一些智能数学或算法可以做到这一点。我可以解决它我只是怀疑有一个更聪明的方法......***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:32:20.027

只是在这里大声思考，但让我们看看这在算法上是否有意义：

对于每一页，存储三个字段：

*   一个视图计数器，就像您已经拥有的一样

*   一个“唯一查看器”计数器

*   一个“bloom filter”（基本上是一个很大的字段，但谷歌搜索了实现细节）

当用户点击页面时，为该用户生成哈希。如果该散列已经在布隆过滤器中，只需碰撞视图计数器

如果它不在布隆过滤器中，则碰撞两个计数器并将该哈希添加到过滤器中。但是，根据您的哈希值，布隆过滤器成员资格检查中可能会出现误报（但绝不会出现误报），因此请注意如何选择哈希算法。

三个领域。还不错。:)

参考：[维基百科上的布隆过滤器](https://en.wikipedia.org/wiki/Bloom_filter)

编辑：我已经让这段代码漂浮了一段时间 - 不确定核心最初来自哪里，但多年来我已经对其进行了调整 - 为 LINQPad 做好了准备：

```
void Main()
{
    var estimatedCount = 100000;
    var falsePositiveProbability = 0.001;
    var falsePositiveCount = 0;
    var memberCount = 0;
    var bloom = BloomFilter<char>.Create(
        estimatedCount, 
        falsePositiveProbability,
        c => c.GetHashCode(),
        c => (int)c);
    var allChars = Enumerable.Range(0, 0xffff).Select(i => (char)i).ToList();
    foreach(var c in allChars)
    {
        var alreadyIn = bloom.Test(c);
        if(alreadyIn)
        {
            falsePositiveCount++;
        }
        bloom.Add(c);
        memberCount++;
    }
    Console.WriteLine("Predicted count: {0} Predicted false positive: {1:p} ", estimatedCount, falsePositiveProbability);
    Console.WriteLine("Actual false positive count: {0} Actual member count: {1} ", falsePositiveCount, memberCount);
    Console.WriteLine("False positive rate: {0:p}", ((double)falsePositiveCount / memberCount));
}

// Define other methods and classes here
public class BloomFilter<TValue>
{
    private BitArray hashbits;
    private int numKeys;

    private Func<TValue,int> _hashFunc1;
    private Func<TValue,int> _hashFunc2;

    public static BloomFilter<TValue> Create(int estimateCount, double falsePositiveRate, Func<TValue,int> hash1, Func<TValue,int> hash2)
    {
        // formulae courtesy of http://hur.st/bloomfilter
        var tableSize = Math.Ceiling((estimateCount * Math.Log(falsePositiveRate)) / Math.Log(1.0 / (Math.Pow(2.0, Math.Log(2.0)))));
        var keyCount = Math.Round(Math.Log(2.0) * tableSize / estimateCount);
        return new BloomFilter<TValue>((int)tableSize, (int)keyCount)
        {
            _hashFunc1 = hash1,
            _hashFunc2 = hash2
        };
    }

    private BloomFilter(int tableSize, int nKeys)
    {
        numKeys = nKeys;
        hashbits = new BitArray(tableSize);
    }

    public bool Test(TValue val)
    {
        var hashKeys = GenerateHashes(val);
        foreach (int hash in hashKeys)
        {
            if (!hashbits[hash])
                return false;
        }
        return true;
    }

    public bool Add(TValue val)
    {
        bool rslt = true;
        var hashKeys = GenerateHashes(val);
        foreach (int hash in hashKeys)
        {
            if (!hashbits[hash])
            {
                rslt = false;
                hashbits[hash] = true;
            }
        }
        return rslt;
    }

    private int[] GenerateHashes(TValue val)
    {
        int hash1 = _hashFunc1(val);
        int hash2 = _hashFunc2(val);

        var hashKeys = new int[numKeys];

        hashKeys[0] = Math.Abs(hash1 % hashbits.Count);
        if (numKeys > 1)
        {
            for (int i = 1; i < numKeys; i++)
            {
                hashKeys[i] = Math.Abs((hash1 + (i * hash2)) %
                    hashbits.Count);
            }
        }
        return hashKeys;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:53:04.940

在这种情况下，关系数据库可能不是解决这个问题的最有效或最具可扩展性的方法。我建议查看键值存储，例如 Redis - [http://redis.io](http://redis.io)，其中键可以是页面标识符，值可以是由哈希表支持的集合 - 请参见[http:// redis.io/commands#set](http://redis.io/commands#set)

# c++ - Qt中的拖放问题：将参数传递给接收dropEvent

> ID：14184144
> 
> 赞同：0
> 
> 时间：2013-01-06T16:28:06.157
> 
> 标签：c++, qt, drag-and-drop

A`healthPackButton`落在 a 上`mysquare`。现在我想为这个按钮添加一个值（因为我有许多 healthPackButtons 并且我希望能够区分它们）。我尝试更改 makeDrag 函数以使其接受额外的参数，但我的 SIGNAL 不再匹配。

**问题**：如何将附加信息（=> int 值）传递给另一个类中的 dropEvent 处理程序。

`Dialog`班级

```
 for (int i=0; i<healthPks.size(); i++){
        int value = healthPks.at(i);
        QPushButton *healthPackButton = new QPushButton(title,this);
        connect(healthPackButton,SIGNAL(pressed()),this,SLOT(makeDrag()));
    }

    void Dialog::makeDrag(){
        QDrag *drag = new QDrag(this);
        QMimeData *mime = new QMimeData;
        mime->setText("This is a test");
        drag->setMimeData(mime);
        drag->start();
    } 
```

`mysquare`班级

```
void MySquare::dropEvent(QGraphicsSceneDragDropEvent *event){
    isHealthPack=true;
    int xCoord = curX/width;
    int yCoord = curY/height;
    int value = 0; //what's the value??
    const QMimeData *mimeData = event->mimeData();
    emit healthMapChanged(xCoord,yCoord,value);
    update();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:38:16.580

要将附加参数添加到您的插槽中，您可以使用 a [`QSignalMapper`](http://doc.qt.digia.com/qt/qsignalmapper.html)- 文档中有一个添加`QString const&`参数的示例，但您可以使用`int`完全相同的方式将值传递给 a `makeDrag(int)`。

You could then use `QMimeType`'s [`setData`](http://doc.qt.digia.com/qt/qmimedata.html#setData) (converting your `int` to a `QByteArray` using [`QByteArray::number`](http://doc.qt.digia.com/qt/qbytearray.html#number) for example) to get that value to the drop target.

# opencv - 检测对象中的线条 Opencv

> ID：14184147
> 
> 赞同：14
> 
> 时间：2013-01-06T16:28:30.577
> 
> 标签：opencv

我有下面的图片。我想检测将这个对象分成两部分的线。哪个是最好的方法？我已经尝试过霍夫变换，但有时对象不够大，无法检测到。有什么想法吗？

谢谢！

![在此处输入图像描述](../Images/b30afa0e0eea4306e3831e6ac585ba9b.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-07T08:58:41.313

通常，霍夫变换用于线检测。

但如果它不适合你，**拟合线**也是一个不错的选择。

检查 OpenCV **[fitline](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=cv2.fitline#cv2.fitLine)**函数以获取更多详细信息和参数。

由于您已经尝试过霍夫线，我将在这里使用 OpenCV-Python 演示拟合线：

```
# Load image, convert to grayscale, threshold and find contours
img = cv2.imread('lail.png')
gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
ret, thresh = cv2.threshold(gray,127,255,cv2.THRESH_BINARY)
contours,hier = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)
cnt = contours[0]

# then apply fitline() function
[vx,vy,x,y] = cv2.fitLine(cnt,cv2.cv.CV_DIST_L2,0,0.01,0.01)

# Now find two extreme points on the line to draw line
lefty = int((-x*vy/vx) + y)
righty = int(((gray.shape[1]-x)*vy/vx)+y)

#Finally draw the line
cv2.line(img,(gray.shape[1]-1,righty),(0,lefty),255,2)
cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

下面是我得到的结果：

![在此处输入图像描述](../Images/50a9cff0f829ea6e23f89ba8c296b396.png)

![在此处输入图像描述](../Images/2b74f758f6c25822e79bb67a0e0dd999.png)

**编辑 ：**

如果你想找到将物体分成两部分的线，首先找到拟合线，然后找到垂直于它的线。

为此，在 cv2.fitLine() 函数下添加以下代码：

```
nx,ny = 1,-vx/vy
mag = np.sqrt((1+ny**2))
vx,vy = nx/mag,ny/mag 
```

以下是我得到的结果：

![在此处输入图像描述](../Images/2020960ddc14665857ec6948869e80f6.png)

![在此处输入图像描述](../Images/7c293421f029e34108cb6c8770356b3d.png)

希望能帮助到你 ！！！

**更新 ：**

以下是您要求的第一种情况的 Python 代码的 C++ 代码。该代码对我来说很好。输出与上面给出的相同：

```
#include <iostream>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/core/core.hpp>
#include <opencv/cv.h>

using namespace std;
using namespace cv;

int main()
{
    cv::Mat img, gray,thresh;
    vector<vector<Point>> contours;
    Vec4f lines;

    img = cv::imread("line.png");
    cv::cvtColor(img,gray,cv::COLOR_BGR2GRAY);
    cv::threshold(gray,thresh,127,255,cv::THRESH_BINARY);
    cv::findContours(thresh,contours,cv::RETR_LIST,cv::CHAIN_APPROX_SIMPLE);
    cv::fitLine(Mat(contours[0]),lines,2,0,0.01,0.01);

    //lefty = int((-x*vy/vx) + y)
    //righty = int(((gray.shape[1]-x)*vy/vx)+y)
    int lefty = (-lines[2]*lines[1]/lines[0])+lines[3];
    int righty = ((gray.cols-lines[2])*lines[1]/lines[0])+lines[3];

    cv::line(img,Point(gray.cols-1,righty),Point(0,lefty),Scalar(255,0,0),2);

    cv::imshow("img",img);
    cv::waitKey(0);
    cv::destroyAllWindows();
} 
```

# jsf - 如何在 JSF 托管 bean 中创建、访问和销毁会话？

> ID：14184149
> 
> 赞同：3
> 
> 时间：2013-01-06T16:28:35.973
> 
> 标签：jsf, session, scope, invalidation

目前，我正在为在线购物车创建一个 Web 应用程序，我需要在每个 jsf 页面上维护会话。

我的问题是：

1.  如何在托管 bean 中创建和销毁会话

2.  如何访问存储在会话变量中的值？像这样？

    ```
    FacesContext.getCurrentInstance().getExternalContext().getSessionMap.put("key",object); 
    ```

3.  如何在 jsf 中销毁会话

我还需要使用销毁会话，`session.invalidate()`但我失败了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T01:08:50.597

> *如何在托管 bean 中创建和销毁会话*

您不需要自己创建它。servletcontainer 会根据需要自动为您完成。换句话说，每当您（或 JSF）需要在会话范围内设置对象时，servletcontainer 将自动创建会话。在 JSF Web 应用程序中，当您

*   第一次引用一个`@SessionScoped`或`@ViewScoped`托管的 bean。
*   通过 获取会话`ExternalContext#getSession()`，`true`第一次通过。
*   第一次将对象存储在会话映射`ExternalContext#getSessionMap()`中。
*   `<h:form>`状态保存方式设置为“server”时，第一次返回带有a的页面。

您可以通过`ExternalContext#invalidateSession()`. 例如

```
public String logout() {
    FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
    return "login?faces-redirect=true";
} 
```

记得在之后发送重定向，因为会话对象在当前请求的响应中仍然可用，但在下一个请求中不再可用。

* * *

> *如何访问存储在会话变量中的值？*

只需将其设为`@SessionScoped`托管 bean 的属性即可。或者，您也可以手动操作`ExternalContext#getSessionMap()`，是的。

* * *

> *如何在 jsf 中销毁会话*

这已经在第一个问题中得到了回答。

### 也可以看看：

*   [servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)
*   [在 jsf 中启动会话的基本步骤](https://stackoverflow.com/questions/6020994/basic-steps-for-starting-session-in-jsf)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# javascript - “原型”抛出 TypeError：信息未定义

> ID：14184150
> 
> 赞同：0
> 
> 时间：2013-01-06T16:28:55.143
> 
> 标签：javascript, jquery, prototype

我试图通过原型继承一​​个函数，似乎一切都是正确的（根据我），但我得到了错误......任何人帮助我理解这个问题？

功能：

```
(function($){
    var Man = function(info){
        this.name = info.name;
        this.age = info.age;
        this.work = info.work;
    }

    Man.prototype.tell = function(){
        return 'I am Mr.' + this.name;
    }

    var Dog = function(info){
        Man.call(this,info);
    }

    Dog.prototype = new Man();

    var dog1 = new Dog({name:'Dobber',age:3,work:'roming'});
    console.log(dog1.tell());

})($); 
```

我得到的错误：

```
TypeError: info is undefined 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:30:12.400

当您调用`new Man()`设置`Dog`原型时，您没有传递参数。该函数需要一个（这`info`就是应该的）。

我不确定如何纠正它，因为该代码中的设置没有多大意义。

*编辑*——也许只是让`Man`构造函数检查参数：

```
function Man(info) {
  if (info !== undefined) {
    this.name = info.name;
    this.age = info.age;
    this.work = info.work;
  }
} 
```

# ios - 对于 iOS 开发者来说，XCode 4.2 (iOS5) 和 XCode 4.5 (iOS6) 有很多不同吗？

> ID：14184153
> 
> 赞同：1
> 
> 时间：2013-01-06T16:29:27.087
> 
> 标签：ios, xcode

我开始使用 iTunes U 上的这个很棒的课程来学习 iOS 开发：http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)

但是，本课程是在 2011 年秋季完成的，使用的是 XCode 4.2 和 iOS5。我现在看到 XCode 4.5 (iOS6) 已经发布了。

我只是想知道学习这门课程是否是一件好事，因为它已经一岁了？或者，如果 XCode 4.2 (iOS5) 和 XCode 4.5 (iOS6) 非常相似，我只需要稍微调整一下？

我曾经使用 XCode 3.2.5 (iOS 4.2) 参加 2010 年秋季课程，然后我停下来开始 2011 年秋季课程......而且差异如此之多，几乎就像重新开始一样。

我只是想确保通过将时间投入到 2011 年秋季的课程中，我不是在学习必须在 iOS6 中再次学习的东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:56:39.777

Besides all of the other good info in the other answers, please be aware that Xcode 4.5 comes with an updated LLVM compiler that provides you with much improved Objective-C features. Working with properties is much easier. You no longer need to explicitly declare instance variables for properties nor do you need the @synthesize statement. The new compiler makes working with arrays and dictionaries easier plus it is easier to box basic types.

The good news is that any code you write with the older compiler of Xcode 4.2 will continue to work under the newer compiler (but not the other way around).

Also keep in mind that Xcode 4.6 will be out soon so using 4.2 will just put you further behind.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:38:09.870

您将要学习的斯坦福课程很棒，它包含许多基础和高级科目。我想不出任何不值得从课程中学习的东西，即使它已经过时了——你只需要了解 iOS6.0 中的新功能，在你熟悉了本书中更重要的基础和基础知识之后。课程。

玩得开心学习 iOS

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T17:21:00.190

关于各个版本之间的差异，我建议您查看[Objective-C 功能可用性索引](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html)和[Xcode 发行说明](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/_index.html)。Xcode 4.5 的主要变化是对 iOS 6 的支持，您可以[在 iOS 中的新增功能：iOS 6中查看这些功能的列表](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iOS6.html)

我认为即使您运行的是 Xcode 4.5.2（或其他），您也可以学习斯坦福课程。有一些细微的差异，但其中大部分只是您可能尚未使用的新功能。坦率地说，我们中的许多人（大多数？）今天仍在部署 iOS 5（或更早版本）应用程序，以确保与在其设备上使用旧版本 iOS 的用户向后兼容，所以如果您在学习基础知识的同时专注于 iOS 5 ，我认为这很好。因此，继续学习该课程并掌握 iOS 5，完成后，您可以[观看 WWDC 2012 视频](https://developer.apple.com/videos/wwdc/2012/)以熟悉一些 iOS 6 功能和新的 Xcode 功能。

The only major stumbling block that leaps out at me (if you focus on iOS 5 targets) might be [autolayout](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853) which is an iOS 6 feature which defaults to being turned on. To avoid confusion here, whenever creating a new storyboard or NIB, you may want to turn off "autolayout". If so, go to Interface Builder, click somewhere on the background, select the "file inspector" in the right panel, and make sure the "Use Autolayout" flag is unchecked.

![enter image description here](../Images/3509521f6ea835e173e5f25f4b5eb939.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T16:35:23.607

For the record, they just updated the [CS193P Web Site](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)

They will make the Winter 2012-2013 course available via iTunesU:

> Winter (2012-13) quarter's lectures are currently scheduled to be made available via iTunesU. Don't expect them to appear the day after the first lecture, however! There is some work involved to prepare and publish them. Please be patient.

That sounds cool!

# php - Magento 将产品信息添加到更多信息选项卡

> ID：14184156
> 
> 赞同：1
> 
> 时间：2013-01-06T16:29:36.050
> 
> 标签：php, magento, tabs, product

我正在尝试在选项卡中显示 Magento 产品库存信息和 Magento 产品价格信息`Description`。

我复制了以下代码： `app/design/frontend/default/theme/template/catalog/product/view.phtml`

```
<?php echo $this->getChildHtml('product_type_data') ?> 
```

进入： `app/design/frontend/default/theme/template/catalog/product/view/description.phtml`

这会在 view.phtml 中显示股票和价格信息，但在 .phtml 中没有显示任何内容`description.phtml`。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:42:04.317

问题是`product_type_data`块是`product.info`（从您实际复制它的位置）的子级，而不是`description`块。

所以你需要做的就是将以下代码添加到`local.xml`你的主题文件中：

```
<PRODUCT_TYPE_simple>
    <reference name="product.description">
        <block type="catalog/product_view_type_simple" name="product.info.simple" as="product_type_data" template="catalog/product/view/type/default.phtml">
            <block type="core/text_list" name="product.info.simple.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
</PRODUCT_TYPE_simple>
<PRODUCT_TYPE_configurable>
    <reference name="product.description">
        <block type="catalog/product_view_type_configurable" name="product.info.configurable" as="product_type_data" template="catalog/product/view/type/default.phtml">
            <block type="core/text_list" name="product.info.configurable.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
</PRODUCT_TYPE_configurable>
<PRODUCT_TYPE_grouped>
    <reference name="product.description">
        <block type="catalog/product_view_type_grouped" name="product.info.grouped" as="product_type_data" template="catalog/product/view/type/grouped.phtml">
            <block type="core/text_list" name="product.info.grouped.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
</PRODUCT_TYPE_grouped>
<PRODUCT_TYPE_virtual>
    <reference name="product.description">
        <block type="catalog/product_view_type_virtual" name="product.info.virtual" as="product_type_data" template="catalog/product/view/type/default.phtml">
            <block type="core/text_list" name="product.info.virtual.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
</PRODUCT_TYPE_virtual> 
```

# c - 如何在 C 中将 char* 添加到 char** 中

> ID：14184157
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:29:42.570
> 
> 标签：c, arrays, pointers

我在 C（不是 C++）中有一个 char 数组。类型是 char**。我知道它的长度，但元素的长度是未知的。我还有另一个 char* 数组。需要将此 char* 作为最后一个元素附加到我的 char** 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:30:56.407

怎么样：

```
char **pointers;
char *p;
/* ... */
pointers[last] = p; 
```

您需要正确处理的一件事是 的值，`last`并且您可以在将元素添加到`pointers`.

### 编辑

一个简单的跟踪方法`last`是总是说：

```
pointers[last++] = p; 
```

另一种方法是保留一份副本并推进它：

```
char **pts = pointers;
/* .. */
pts = p;
pts++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:39:58.947

> 字符* arr1[]; //已知长度和一些已经填充的元素

上述数组的每个元素都是指向字符数组的指针。

> char *new = "lastElem" // 这是你必须附加的字符串

让我们说，arr1 有 n 个元素（每个元素都是一个字符串）。然后，

> arr1[++n] = 新的；// 应该这样做，前提是 arr1 中存在空间并且您已经拥有 // 字符数组 'new'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:31:41.137

很容易`realloc`：

```
char **array = ...;
array = realloc(array, sizeof(char*)*(LENGTH+1));
array[LENGTH] = last; 
```

（我假设您需要增加 的大小`array`，否则`array[LENGTH-1] = last`就足够了）

# c# - 如何使用另一个列表执行列表的 Linq 查询

> ID：14184163
> 
> 赞同：0
> 
> 时间：2013-01-06T16:30:33.967
> 
> 标签：c#, linq

我有一个成员类列表，成员。Member 类具有以下属性：

MemberId：字符串 MemberName：字符串 DateOfBirth：DateTime

```
List<Member> members = FindMembers(); 
```

我有一个单独的 MemberId 列表，如下所示。

```
List<string> memberIds = GetTeenAgeMemberIds(); 
```

现在我必须使用 memberIds 列表中的值查询成员列表。请让我知道如何使用 Linq 做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:33:41.613

您可以使用以下 LINQ 查询：

```
var result = members.Where(m => memberIds.Contains(m.MemberId)).
    ToArray(); 
```

或者：

```
var result = (from m in members
              join id in memberIds on m.MemberId equals id
              select m).ToArray(); 
```

或者，如果您更喜欢方法链：

```
var result = members.Join(memberIds, m => m.MemberId, id => id, (m, id) => m).
    ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:34:10.963

使目标列表成为一个数组或明显管理的东西，在其上使用 Contains 将您拥有的 MemberId 与您拥有的列表进行比较。

# c# - 在异步代码的 Task 或 void 方法之间进行选择

> ID：14184165
> 
> 赞同：2
> 
> 时间：2013-01-06T16:30:42.930
> 
> 标签：c#, windows-8, .net-4.5, async-await

我使用 LoadState 方法作为示例，但这通常可以看作是异步编程的场景。

`LoadState`and`SaveState`方法实现通常具有以下签名：

```
public override void LoadState(..)
public async override void LoadState(..) 
```

您可以选择添加 async 关键字，具体取决于您是否要等待加载某些数据。`LoadState`但是由于is的返回类型`void`，LoadState 方法本身不能被等待，而是被触发为“一劳永逸”。这通常很好，因为它允许响应式 UI，同时能够在数据加载逻辑中使用 async/await。

在某些情况下，我想等待异步 LoadState 方法。但是，如果我将签名更改`Task`为 void 而不是 void，我所有不使用异步逻辑的实现都必须返回 null（这似乎不是最好的解决方案）。是否有另一种可能的解决方案，其中可以等待一些方法调用并且大多数保持触发并忘记（默认情况下）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T01:38:19.157

方法有几个问题`async void`：

*   它不是可组合的；您无法`await`完成（如您所述）。
*   它不容易测试（出于同样的原因）。
*   错误处理完全不同；我听说过`async void`“一劳永逸”，但我自己也使用过“火灾和崩溃”这个词。

此外，您永远不应该`null`从`Async`方法返回。这会让其他习惯于[TAP](http://msdn.microsoft.com/en-us/library/hh873175.aspx)的程序员感到惊讶。

您可以提供两种方法`void LoadState`和`Task LoadStateAsync`，但如果您这样做，我建议您始终提供两种实现。[将异步方法包装在同步方法中](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)或将同步方法包装在异步方法中并*没有*一种简单的好[方法](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)，因此您实际上最终会得到两个几乎相同的实现。

出于维护原因，我不是特别喜欢这个。就个人而言，我更喜欢可能的`async`方法总是有一个`await`- 兼容的签名：

```
interface IWhatever
{
  Task LoadStateAsync();
} 
```

如果实现是同步的，则实现应该是异步的或快速的。同步实现可以利用`Task.FromResult`：

```
class Whatever : IWhatever
{
  public Task LoadStateAsync()
  {
    ... // fast-running synchronous code
    return Task.FromResult<object>(null);
  }
} 
```

消费代码将始终是`async`：

```
Whatever whatever = ...;
await whatever.LoadStateAsync(); 
```

请注意，如果实现是同步的，则消费代码将不会屈服于其调用者；它将继续通过`await`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:38:04.910

我认为有一个 Loaded 事件，加载完成后会触发该事件。也许您可以在 Loaded 事件的事件处理程序中做任何您想继续的事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:38:28.590

您可以将逻辑实现为`Task`-returning 方法并`LoadState`丢弃返回值。

```
public override void LoadState() { LoadStateInner(); }
Task LoadStateInner() { await ...; } 
```

现在，您可以在同时履行继承合同的同时调用这两个变体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T17:12:50.847

我看到的一种可能的解决方案是在基类中定义 2 个方法（以及额外的第 3 个方法用于额外的逻辑）：

```
virtual void LoadState(){}
virtual async Task LoadStateAsync{ }

virtual void SomeOtherLogic(){} 
```

在调用 LoadState 的地方，现在有 2 个方法调用：

```
LoadState();
await LoadStateAsync();

SomeOtherLogic(); 
```

在此解决方案中，如果 SomeOtherLogic 为空或不需要来自 LoadState 方法的数据，您可以覆盖 LoadState 方法。如果确实需要数据，则在执行 SomeOtherLogic 之前等待 LoadStateAsync 方法。

缺点是您（和其他开发人员）始终必须注意/应该使用哪种方法。

# java - 更新二维 Java 数组中的对象

> ID：14184167
> 
> 赞同：0
> 
> 时间：2013-01-06T16:30:56.650
> 
> 标签：java, arrays, compiler-errors, type-mismatch

我目前有以下代码，我想用 X 更新 2D 数组中的特定位置，然后重新打印板。我目前被困在需要将数组中的对象更新为 X 的地方，但我不断收到：

```
Type mismatch: cannot convert from String to Ship 
```

我究竟做错了什么？我已经把所有的物体都放在了板上。

```
public void updateBoard(int row, int column, Ocean ocean){
    //get ship array
    Ship[][] sea = ocean.getShipArray();
    //mark the x/y co-ordinate with X 
    sea[row][column] = "X"; // PROBLEM  
    // print the board
} 
```

我已经包括了船级

```
public abstract class Ship {
// TODO add appropriate comments
@Getter
private int size;
private String type;
private String shortForm;

// TODO add appropriate comments
@Getter
@Setter(AccessLevel.PACKAGE)
private int bowRow;
@Getter
@Setter(AccessLevel.PACKAGE)
private int bowColumn;
@Getter
@Setter(AccessLevel.PACKAGE)
private boolean horizontal;

/**
 * An array of boolean which indicates whether that part of the ship has
 * been hit. This is initialised by the appropriate sub-class. Battleships
 * use all 4 locations; cruisers use the first 3; destroyers 2; submarines
 * 1; and "empty sea" 1.
 */
protected boolean[] hit;

/**
 * clears the hit array indicating whether that part of the "Ship" has been
 * hit
 */
protected Ship(int size, String type, String shortForm) {
    this.size = size;
    this.setType(type);
    this.shortForm = shortForm;
    hit = new boolean[size];
    for (int i = 0; i < hit.length; i++)
        hit[i] = false;
}

/**
 * Checks that ship of this size will not overlap another ship, or touch
 * another ship (vertically, horizontally, or diagonally) and that ship will
 * not "stick out" beyond the array.
 * 
 * @param row
 *            that will contain the bow
 * @param column
 *            that will contain the bow
 * @param horizontal = true if horizontal
 * @param ocean
 * @return true if it is okay to put a ship of this size with its bow in
 *         this location, with the given orientation.
 */
public boolean okToPlaceShipAt(int row, int column, boolean horizontal,
        Ocean ocean) {
    // Try to catch exception error if ship goes past board
    try{
        Ship ships[][] = ocean.getShipArray();

        for (int i = 0; i < getSize(); i++){
        if (!(ships[row][column] instanceof EmptySea)){ 
        //  System.out.println("Cant Print here + " + row + column + getSize());
                return false;
        }else{
            if (horizontal) {
                column++; 
            } else {
                row++;  
            }
        //  System.out.print(ships[row][column]);

            }
    //  System.out.println(" ");

        }
        return true;
    }
    catch(Exception err){
    //  System.out.println("OMG an error");
        return false;
    } 

}

/**
 * "places" the ship in the ocean, assigning values to the bowRow,
 * bowColumn, and horizontal. Places a reference to the ship in the ships
 * array in the Ocean object.
 * 
 * @param row
 *            to contain the bow
 * @param column
 *            to contain the bow
 * @param horizontal
 * @param ocean
 */
public void placeShipAt(int row, int column, boolean horizontal, Ocean ocean) {

    this.setBowRow(row);
    this.setBowColumn(column);
    this.setHorizontal(horizontal);

    Ship ships[][] = ocean.getShipArray();

    for (int i = 0; i < getSize(); i++) {
        // set position in array to contain the ship
        ships[row][column] = this;
        if (horizontal) {
            column++;
        } else {
            row++;
        }
    }
}

private int getSize() {
    // TODO Auto-generated method stub
    return size;
}

private void setHorizontal(boolean horizontal2) {
    // TODO Auto-generated method stub
    horizontal = horizontal2;
}

private void setBowColumn(int column) {
    // TODO Auto-generated method stub
    bowColumn = column;
}

private void setBowRow(int row) {
    // TODO Auto-generated method stub
    bowRow = row;
}

/**
 * If this ship has been hit, marks that part of the ship as "hit"
 * 
 * @param row
 *            User's supplied row shot
 * @param column
 *            User's supplied column shot
 * @return true if ship is hit, false otherwise
 */
public boolean shootAt(int row, int column) {
    if ((isHorizontal() && (row != getBowRow()))
            || (!isHorizontal() && (column != getBowColumn())))
        return false; // it's not a hit

    // it's a hit. Work out offset & set that position in hit array to true
    hit[(row - getBowRow() + column - getBowColumn())] = true;

            return true;
}

private int getBowRow() {
    // TODO Auto-generated method stub
    return bowRow;
}

private int getBowColumn() {
    // TODO Auto-generated method stub
    return bowColumn;
}

private boolean isHorizontal() {
    // TODO Auto-generated method stub
    return false;
}

/**
 * checks whether this ship is sunk - using the hit array
 * 
 * @return true if every part of the ship has been hit, false otherwise.
 */
public boolean isSunk() {

    for (boolean b : hit)
        if (!b)
            return false;

    return true;
}

/**
 * @return a single character String to use in Ocean's print method
 */
@Override
public String toString() {
    return shortForm;
}

public String getType() {
    return type;
}

public void setType(String type) {
    this.type = type;
}
public String setHit(String hit){
    return hit;
} 
```

}

它有点长。下面是一个示例，如果是扩展 Ship 的船，即 Submarine 类。除了尺寸之外，所有其他的都完全相同。

```
/*
 * A Battleship class which extends ship
 * Four Submarines in the game Length 1
 */
package Battleships;
public class Submarine extends Ship {
    private final static int SIZE = 1;
    /**
     * sets the length & clears the hit array
     */
    public Submarine() {
        super(SIZE, "Submarine", "S");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:33:22.040

`sea`是一个`Ship[][]`，`"X"`是一个`String`。您不能将 a`String`放在包含 的变量中`Ship`。

编辑：

由于您试图在一艘船上射击，而不是放置一艘新船，我怀疑您真正需要的是使用船上的以下功能......

`public boolean shootAt(int row, int column)`.

从 Ship 的代码中，我猜你真正需要做的是......

`sea[row][column].shootAt(row,column);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:38:59.577

只需创建一艘特殊船，让它代表一个“X”。根据您更新的问题，您可以按如下方式创建新船：

```
sea[row][column] = new Ship(1,"Cthulu","X"); 
```

现在，无论何时打印 Ship，您都会看到一个“X”，因为 Ship 类的 toString() 方法返回了 shortForm 字符串值。

您还可以使用自己的 toString() 方法扩展 Ship 类，以便拥有一种真正*不同*的船来表示 X。

# php - 如何提交表单并使用表单创建的新查询字符串加载页面？

> ID：14184168
> 
> 赞同：0
> 
> 时间：2013-01-06T16:30:58.467
> 
> 标签：php, wordpress

我想提供一个可以创建帖子并在表单提交后立即为新创建的帖子加载编辑页面的表单。要加载编辑页面，我需要正确的`post_id`.

提交表单时，帖子由表单处理程序在编辑页面的脚本中创建：

```
if(isset($_POST['create']){
  $post_id = create_new_post($args);
}else{
  $post_id = isset($_Request['post_id'])? $_Request['post_id'] :null;
}
if($post_id)
 load_editor($post_id); 
```

上面的代码可以在表单提交时加载编辑器。但是新创建的帖子（）的编辑器页面 URL`editor.php?action=edit)`与现有帖子的编辑器页面不同（`editor.php?post_id=123&action=edit`）。如何获取 post_id 并将其添加到查询字符串中？

# c# - GraphicsDevice.SetVertexBuffers 内存不足

> ID：14184169
> 
> 赞同：0
> 
> 时间：2013-01-06T16:31:02.460
> 
> 标签：c#, 3d, xna, out-of-memory

这应该是 XNA 的错误。

我有两个 3d 模型，currentModel 和 nextModel，我想在这两个模型上应用特殊效果，比如相互变形。

代码：

```
void DrawModelMorphing(Model currentModel, Model nextModel)
{    
    int targetIndex = 0;
    foreach(var mesh in currentModel.Meshes.Count)
    {
        foreach(var mp in mesh.MeshParts)
        {
            GraphicsDevice.Indices = mp.IndexBuffer;

            VertexBufferBinding[] vertexBufferBindings = new VertexBufferBinding[2];
            vertexBufferBindings[0] = new VertexBufferBinding(mp.VertexBuffer, mp.VertexOffset);
            vertexBufferBindings[1] = new VertexBufferBinding(nextModel.Meshes[targetIndex].MeshParts[0].VertexBuffer, nextModel.Meshes[targetIndex].MeshParts[0].VertexOffset);

            GraphicsDevice.SetVertexBuffers(vertexBufferBindings);

            mEffect.CurrentTechnique.Passes[0].Apply();

            GraphicsDevice.DrawIndexedPrimitives(
            PrimitiveType.TriangleList,
            0,
            0,
            mesh.MeshParts[0].NumVertices,
            mesh.MeshParts[0].StartIndex,
            mesh.MeshParts[0].PrimitiveCount);

            //vertexBufferBindings[0].VertexBuffer.Dispose(); //exception 
            //vertexBufferBindings[1].VertexBuffer.Dispose(); //exception 

        }
    }

    targetIndex++;
    }

} 
```

`GraphicsDevice.SetVertexBuffers`会造成严重的内存泄漏，30分钟300MB，然后“Out of Memory”

这是不同函数调用的一个类似问题： [绘制多维数据集时出现OutOfMemory Exception](https://stackoverflow.com/questions/3364481/outofmemory-exception-when-drawing-cube)

我测试过的东西：

1）如果我`vertexBufferBindings[]`全局定义事件，问题仍然存在。

2）如果我处理顶点缓冲区，就会出现异常。“Microsoft.Xna.Framework.dll 中发生了‘System.ObjectDisposedException’类型的第一次机会异常”

3) GC 和诸如 freeMem 之类的一些 3rd 方工具也将不起作用。

有人可以帮忙吗？

我几乎想放弃在我的项目中使用 XNA。

谢谢。

编辑：

解决方案是缓存我需要的所有内容，例如：VertexBuffer 和 Textural

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:30:51.723

你曾经对你分配的那些元素调用 DISPOSE 吗？如果不是 - 不，抱歉，设备内存是非托管的，相应的类必须实现 IDisposable 并且您必须清理。

如果您认为 GC 有帮助，那么确实会发生这种情况。

# asp.net - asp.net row_created 获取第一行插入单元格的文本

> ID：14184170
> 
> 赞同：0
> 
> 时间：2013-01-06T16:31:06.193
> 
> 标签：asp.net

您好，我正在开发一个 asp.net 项目。

我正在使用数据库和gridview。我想在创建每个 gridviewrow 时获取它的第一个单元格的名称。为什么这不起作用？

```
protected void CustomersGridView_RowCreated(Object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                Response.Write(e.Row.Cells[0].Text);
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:56:53.203

如果要获取 gridview 每一行第一列的文本，请使用以下代码：-

受保护的无效GridView1_RowDataBound（对象发送者，GridViewRowEventArgs e）{

```
 Response.Write(e.Row.Cells[0].Text);
} 
```

# php - 电子邮件地址为给出奇怪的 javascript 代码

> ID：14184172
> 
> 赞同：0
> 
> 时间：2013-01-06T16:31:36.033
> 
> 标签：php, javascript, html, forms

我正在尝试使用以下代码创建一个包含电子邮件地址的预填充 HTML 表单：

```
<form action="<?=$_SERVER['PHP_SELF']?>" method="post">
Email: <input type="text" name="email" size="20" maxlength="255" value="<?php     echo($row['email']) ?>"/> <br>
<input type="submit" name="submit" value="SUBMIT" /></p>
</form> 
```

在文本框外回`$row['email']`显时，我得到一个超链接的 mailto:[the-email-adress] 很好，但是当我尝试使用电子邮件广告预填充器时，我得到了这个：

```
<script type='text/javascript'> <!-- var prefix = 'ma' + 'il' + 'to'; var path = 'hr' + 'ef' + '='; var addy63669 = 'MYGOOGLENAME' + '@'; addy63669 = addy63669 + 'gmail' + '.' + 'com'; document.write('<a ' + path + '\'' + prefix + ':' + addy63669 + '\'>'); document.write(addy63669); document.write('<\/a>'); //-->\n </script><script type='text/javascript'> <!-- document.write('<span style=\'display: none;\'>'); //--> </script>This email address is being protected from spambots. You need JavaScript enabled to view it. <script type='text/javascript'> <!-- document.write('</'); document.write('span>'); //--> </script> 
```

有没有办法绕过这个？

# java - 将独立的 Spring 应用程序转换或集成到 Spring MVC 应用程序

> ID：14184177
> 
> 赞同：0
> 
> 时间：2013-01-06T16:31:44.770
> 
> 标签：java, spring, servlets, spring-mvc

将独立的 Spring 应用程序转换或集成到 Spring MVC 应用程序。

我有一个具有以下结构的 Spring MVC 应用程序

```
myApp
 |- META-INF
 |- WEB-INF
        |-classes
            |-com
                |-controllers
                |-service
        |-lib
           |-UserLibrary.jar
                |-META-INF
                    |-applicationContext.xml
                    |-dbre.xml
                    |-ehcache.xml
                    |-DataSource.xml
                    |-Jpa.xml
                    |-SpringDataJpa.xml
        |-applicationContext.xml
        |-myApp-servlet.xml 
```

Spring MVC 按照通常的过程加载。即控制器用 注释`@Controllers`，服务用`@Service`等注释。

曾经是一个独立的`userLibrary.jar`Spring 应用程序，具有自己的 Spring/JPA 配置。它进行了转换，以便可以集成到 MVC 应用程序中。它有自己的配置文件（总共大约 7 个）、自己的 Hibernate/JPA 实体管理器等。

为了在 Spring MVC 应用程序上使用它，我对服务类进行了轻微修改，以便在 WebApplicationContext 完成初始化时加载 UserLibrary 应用程序的应用程序上下文。

```
public class MyAppService implements
        ApplicationListener<ContextRefreshedEvent> {

    protected UserLibraryService service;

        --
        -- several service methods etc
        --

    System.getProperty("username", "userA");
    System.getProperty("password", "userB");    

    @Override
    public void onApplicationEvent(ContextRefreshedEvent arg0) {        
        ApplicationContext context = 
         new ClassPathXmlApplicationContext("META-INF/userLibrary.xml");
        service = context.getBean(UserLibrary.class);
    }
} 
```

上述方法产生两个容器，即`WebApplicationContext`用于 MVC 应用程序的容器和`ApplicationContext`用于 UserLibrary 应用程序的容器。我怀疑上述方法不是正确/最好的方法，所以我正在寻求关于什么是最好方法的建议。例如，我可以使用一个容器而不是两个容器吗？

## 更新：

这是我尝试过的。我从MVC 应用程序中导入了`UserLibrary`应用程序的配置文件。`applicationContext.xml`

```
<import resource="classpath:META-INF/applicationContext.xml" /> 
```

然后我`UserLibraryBean`在 MVC 应用程序的`applicationContext.xml`文件中添加了（包含导入语句的同一文件。

```
<bean class="com.service.UserLibraryService"/> 
```

几个问题：

*   更新后的方法是只使用一个容器还是仍然使用两个容器？
*   UserLibraryService 在其初始化期间读取以下属性

    System.getProperty("用户名"); System.getProperty("密码");

`onApplicationEvent`在我的原始示例中，我在方法中设置了上述值，并且`UserLibray`可以读取它们。

这些似乎不再设置，所以我从`UserLibrary`应用程序中收到一个错误，即属性尚未设置。我还尝试在 Service 类的构造函数中设置它们，但仍未设置它们。

有没有办法将系统属性设置为 xml 文件中 bean 定义的一部分？我在哪里可以设置属性以便服务对象可以使用它们？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:00:40.867

您可以在 web 应用程序的 web.xml 中的 context-param / contextConfigLocation 参数中指定多个配置 xml 文件

您可以使用`classpath:`文件名上的前缀从类路径加载它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:28:01.817

您可以读取多个配置文件，例如 -

```
ApplicationContext context = 
         new ClassPathXmlApplicationContext(new String[] {"META-INF/userLibrary.xml",
              "META-INF/transaction.xml"}); 
```

你也可以使用 -

```
<import resource="META-INF/userLibrary.xml"/> 
```

# c# - 使用 MVC 上传文件并将其路径保存到 DB

> ID：14184178
> 
> 赞同：0
> 
> 时间：2013-01-06T16:31:53.180
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我有一个 MVC 应用程序，这就是我打算做的。我有一个字段应该存储我上传到服务器的文件的路径。这是模型：

```
 int ID
 string Title
string Path 
```

这是我的控制器：

```
 public ActionResult Create(Book book)
        {
            if (ModelState.IsValid)
            {
               db.Books.Add(book);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

        ViewBag.CreatedBy = new SelectList(db.Users, "ID", "UserName", book.CreatedBy);
        return View(book);
    } 
```

我找不到在 MVC 3 中上传文件的控件。我不知道是否有解决方法，因为所有可用的解决方案都将文件单独视为一个单独的实体。

任何示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:02:20.573

可以发布上传的文件以及其他表单变量。首先，声明你的控制器：

```
public ActionResult Create(Book book, HttpPostedFileBase file)
{
    if (ModelState.IsValid)
    {
        db.Books.Add(book);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    ViewBag.CreatedBy = new SelectList(db.Users, "ID", "UserName", book.CreatedBy);
    return View(book);
} 
```

然后以您的形式：

```
@using (Html.BeginForm("Create", "Book", FormMethod.Post, new {enctype = "multipart/form-data"}))
{
    @Html.TextBoxFor(m => m.Title)
    <input type="file" id="file" name="file" />
    <input type="submit" value="Upload" />
} 
```

这将发布文件和“标题”。然后你可以对文件做你想做的事，在 file.FileName 中访问它的文件名，或者将它保存在某个地方。关键是将表单 enctype 设置为“multipart/form-data”。有关其他示例，请参阅[本教程](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

# android - 我们可以在android中打开一个swf文件吗？

> ID：14184179
> 
> 赞同：0
> 
> 时间：2013-01-06T16:31:54.390
> 
> 标签：android

在我的项目中有一些带有 .swf 扩展名的文档。单击按钮后，我需要在我的 android 应用程序中显示它们。是否可以在android中打开这些文件？如何在我的安卓应用中打开？我将所有这些 swf 文件保存在 assets 文件夹中。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:33:24.303

SWF 文件是 Flash 动画。Flash Player 不再适用于 Android。

# c - 如果未发送所有字节，C 中的 send() 函数如何处理？

> ID：14184181
> 
> 赞同：9
> 
> 时间：2013-01-06T16:32:06.707
> 
> 标签：c, sockets

我需要将数据发送到套接字，基本上是传输文件，

根据 send() 函数文档，它说，

```
If no error occurs, send returns the total number of bytes sent, which can be less than the number requested to be sent in the len parameter. Otherwise, a value of SOCKET_ERROR is returned, 
```

我担心的是，返回值可能小于请求值。因为我正在读取文件并写入套接字，因为它可能不会发送所有字节，所以我想如果没有发送完整的缓冲区，我将不得不重试？在这种情况下，我想我必须以某种方式将同一缓冲区上的指针通过读取的字节提前并再次发送？

我只想知道是不是这样？还是有一个非常聪明的方法，以便发送所有请求的数据，而我不必担心什么时候没有发送所有数据？

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T16:36:29.050

是的，您必须推进缓冲区指针并重复`send`调用，直到整个缓冲区被消耗或出现硬错误。标准的成语看起来像这样：

```
int
send_all(int socket, const void *buffer, size_t length, int flags)
{
    ssize_t n;
    const char *p = buffer;
    while (length > 0)
    {
        n = send(socket, p, length, flags);
        if (n <= 0)
            return -1;
        p += n;
        length -= n;
    }
    return 0;
} 
```

请注意，如果您正在发送边界很重要的数据报（例如 UDP），*则不能使用此技术*；您必须将短发送视为失败。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T16:36:44.227

您可以尝试以下方法：

```
int ret, bytes = 0;
while (bytes < buflen) {
    ret = send(sock_fd, buf+bytes, buflen-bytes, flags);
    //check for errors
    if (ret == -1) {
        // handle error
    }
    bytes+=ret;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T16:34:17.443

是的，您确实必须担心`send`（或`write`等等）返回的值。没有非常聪明的解决方法，但是优秀的 Richard Stevens 编写了一些函数，即`readn`和`writen`。

[informit 上的这篇文章](http://www.informit.com/articles/article.aspx?p=169505&seqNum=9)似乎有这些功能的一个版本。

# android - 为什么屏幕旋转时片段不保留状态？

> ID：14184182
> 
> 赞同：29
> 
> 时间：2013-01-06T16:32:13.613
> 
> 标签：android, android-fragments, android-preferences, preferenceactivity, dialog-preference

我在 PreferenceFragment 中获取一些自定义 DialogPreference 子类以在屏幕旋转时保持可见时遇到了一些麻烦。我在使用 PreferenceActivity 时没有遇到这个问题，所以我不知道这是 Android 错误还是我的代码有问题，但我希望有人确认他们是否有相同的体验。

为了测试这一点，首先创建一个包含至少一个 DialogPreference 的首选项屏幕（哪个子类都没有关系）。然后在 PreferenceActivity 中显示它。当您运行您的应用程序时，按下 DialogPreference 以显示它的对话框。然后旋转屏幕以改变方向。对话框是否仍然可见？

然后尝试相同的方法，但使用 PreferenceFragment 来显示您的偏好，而不是 PreferenceActivity。同样，当您旋转屏幕时对话框是否仍然可见？

到目前为止，我发现如果使用 PreferenceActivity，对话框将保持可见，但如果使用 PreferenceFragment，则不会。查看 DialogPreference的[源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/preference/DialogPreference.java)，似乎正确的行为是让对话框保持可见，因为在屏幕重新定向上调用`isDialogShowing`时会保存状态信息。`onSaveInstanceState()`因此，我认为一个错误可能会阻止 PreferenceFragment（以及其中的所有内容）恢复该状态信息。

如果是 Android 的 bug，那么它的影响是深远的，因为任何使用 PreferenceFragment 的人都无法保存和恢复状态信息。

有人可以确认吗？如果它不是一个错误，那么发生了什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-13T13:36:54.507

终于想出了解决这个问题的办法。事实证明这不是错误，而是 Android 开发人员文档中的问题/疏忽。

[你看，我在这里](http://developer.android.com/guide/topics/ui/settings.html#Fragment)关注 PreferenceFragment 教程。那篇文章告诉您执行以下操作以在 Activity 中实例化您的 PreferenceFragment：

```
public class SettingsActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit();
    }
} 
```

这样做的问题是，当您更改屏幕方向（或任何其他破坏并重新创建 Activity 的操作）时，您的 PreferenceFragment 将被创建**两次**，这就是导致它失去其状态的原因。

第**一次**创建将通过 Activity 的调用发生`super.onCreate()`（如上所示），它将调用`onActivityCreated()`PreferenceFragment () 的`onRestoreInstanceState()`方法及其包含的每个 Preference 的方法。这些将成功恢复一切的状态。

但是一旦该调用`super.onCreate()`返回，您可以看到该`onCreate()`方法将继续**第二**次创建 PreferenceFragment。因为它再次被毫无意义地创建（这一次，没有状态信息！），所有刚刚成功恢复的状态都将被完全丢弃/丢失。这解释了为什么在 Activity 被销毁时可能显示的 DialogPreference 在重新创建 Activity 后将不再可见。

那么解决方案是什么？好吧，只需添加一个小检查以确定 PreferenceFragment 是否已创建，如下所示：

```
public class SettingsActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Fragment existingFragment = getFragmentManager().findFragmentById(android.R.id.content);
        if (existingFragment == null || !existingFragment.getClass().equals(SettingsFragment.class))
        {
            // Display the fragment as the main content.
            getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit();
        }
    }
} 
```

或者另一种方法是简单地检查是否`onCreate()`意味着恢复状态，如下所示：

```
public class SettingsActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (savedInstanceState == null)
        {
            // Display the fragment as the main content.
            getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit();
        }
    }
} 
```

所以我想这里学到的教训是它`onCreate()`有双重作用——它可以第一次设置一个活动，或者它可以从早期的状态恢复。

[这里](https://stackoverflow.com/a/14295474/963396)的答案让我意识到了这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T05:37:54.440

我自己确实有这个问题。有一个错误，`DialogFragment`因为它是空的，所以它不会恢复状态，或者至少它发生在我身上。

使用多个来源，我最终得到了一个可行的解决方案。让你的对话框扩展这个`BaseDialogFragment`：

```
import android.app.Dialog;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.support.v4.app.DialogFragment;

import com.actionbarsherlock.app.SherlockDialogFragment;

public class BaseDialogFragment extends DialogFragment {

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        if (savedInstanceState == null || savedInstanceState.isEmpty())
            savedInstanceState = WorkaroundSavedState.savedInstanceState;

        setRetainInstance(true);
        Log.d("TAG", "saved instance state oncreate: "
                + WorkaroundSavedState.savedInstanceState);
        super.onCreate(savedInstanceState);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        if (savedInstanceState == null || savedInstanceState.isEmpty())
            savedInstanceState = WorkaroundSavedState.savedInstanceState;
        Log.d("TAG", "saved instance state oncretaedialog: "
                + WorkaroundSavedState.savedInstanceState);

        return super.onCreateDialog(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (savedInstanceState == null || savedInstanceState.isEmpty())
            savedInstanceState = WorkaroundSavedState.savedInstanceState;

        Log.d("TAG", "saved instance state oncretaeview: "
                + WorkaroundSavedState.savedInstanceState);

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onDestroyView() // necessary for restoring the dialog
    {
        if (getDialog() != null && getRetainInstance())
            getDialog().setOnDismissListener(null);

        super.onDestroyView();
    }

    @Override
    public void onSaveInstanceState(Bundle outState)
    {
        // ...

        super.onSaveInstanceState(outState);
        WorkaroundSavedState.savedInstanceState = outState;
        Log.d("TAG", "saved instance state onsaveins: "
                + WorkaroundSavedState.savedInstanceState);

    }

    @Override
    public void onDestroy()
    {
        WorkaroundSavedState.savedInstanceState = null;
        super.onDestroy();
    }

    /**
     * Static class that stores the state of the task across orientation
     * changes. There is a bug in the compatibility library, at least as of the
     * 4th revision, that causes the save state to be null in the dialog's
     * onRestoreInstanceState.
     */
    public static final class WorkaroundSavedState {
        public static Bundle savedInstanceState;
    }
} 
```

请注意，在其方法具有`savedInstanceState`参数的任何子类中，您可能必须使用 super 调用`WorkaroundSavedState.savedInstanceState`。当您恢复状态时（即在 中`onCreate()`，只需忽略`savedInstanceState`并使用`WorkaroundSavedState.savedInstanceState`。静态支架不是最干净的解决方案，但它可以工作。只需确保在您的`onDestroy()`.

无论如何，`DialogFragment`当我旋转屏幕时 my 不会消失（而且没有任何`configChanges`）。让我知道这段代码是否解决了您的问题，如果没有，我会看看发生了什么。另请注意，我没有在其中测试过这个，`PreferenceFragment`而是`Fragment`在兼容性类或来自`ActionBarSherlock`.

# c# - 在附加条件下寻找最快路径

> ID：14184191
> 
> 赞同：15
> 
> 时间：2013-01-06T16:33:14.360
> 
> 标签：c#, algorithm, dijkstra

我想知道，当无向图中有多个直接连接时，Dijkstra 的算法是否能正常工作。

例如：

![在此处输入图像描述](../Images/41980f743188ba407d41fa5bda107782.png)

我想使用 Dijkstra 来找到最快的路径，但是还有一个附加条件。边缘上所有附加数据的总和不能> = x。所以，如果它出现了带有 weight: 3 的边缘，使用错误，我的程序将尝试使用第二个边缘。

`additional_data`编辑：我的任务是在边缘的总和不能高于 x的附加条件下找到最快的路径。你能告诉我如何处理这个问题吗？

**编辑2：（设置赏金）**

[**在找到此链接**](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=dynProg)之前，我一直在研究互联网。有一个关于如何做我要求的事情的解释。（**中**上头）

我现在正在尝试以某种方式使用它 2 天，但我担心我不能正确理解这个算法。我想请你们中的一些人帮助我解决这个问题，通过更多的例子来解释我（几个第一步）。这是示例：

![在此处输入图像描述](../Images/453dd5ae5f92c89d9c9ef86f1ce7fcb8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T18:02:26.383

我认为您可以修改 Dijkstra 的算法来处理这个问题。Dijkstra 的算法基本上是通过逐步构建一个表来列出到每个节点的最短路径来工作的。相反，您将构建一个表格，列出*在给定成本下*到每个节点的最短路径。或者更确切地说，在给定的成本或更少，即在给定的预算。

更正式地说，您可以将原始图转换为另一个图，然后将 Dijkstra 应用于该图。假设 additional_data 成本始终是整数，则转换为：

1.  取每个原始节点 n 并为从 0 到预算值的每个整数值 c 创建一组节点 (n, c)（您可以容忍的最大附加数据总和）
2.  取每个原始连接 n1 -> n2，权重为 w，additional_data a，并创建一组从每个节点 (n1, c) 到节点 (n2, c+a) 的连接，每个连接的权重为 w

原始图模型中的节点在空间中的位置。转换后的图模型中的节点位于状态空间中，其中状态变量是位置，以及到目前为止花费的预算金额。

如果您想以 x 的预算从 A 到 Z，那么您只需使用 Dijkstra 算法找到从 (A, 0) 到其中一个节点 (Z, c <= x) 的路线。

**编辑**：我已经实现了修改后的 Dijkstra 算法：[https](https://bitbucket.org/twic/roadsproblem) ://bitbucket.org/twic/roadsproblem 。它的症结在于[`src/solver.py`](https://bitbucket.org/twic/roadsproblem/src/default/src/solver.py)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T13:30:27.167

这是您找到的算法如何处理示例问题的说明。

问题是在沿途累积成本不应超过 的额外条件下，找到两者`node one`之间的最短路径。`node four``7`

我们想要找到的解决方案是首先从`node one`到节点`node two`，距离为`190`，成本为`4`。然后从`node two`使用`node four`距离`195`和成本的路径出发`3`。总而言之，路径的距离为`385`，成本为`7`。

**步骤1**

那么算法是如何找到这个的呢？第一步是`minArray(i,j)`像您所做的那样设置矩阵。数组的元素`(i,j)`包含您必须经过的距离才能到达节点`j`，并且正好有`i`剩余的钱。

![原始数组。](../Images/f9814179b908ce9f0b448e5ea555460a.png)

一开始没有访问过的元素，因为我们从“monies”开始`node one`，`7`所以左上角的元素设置为零。上表中的空格对应`infinity`于数组中设置的值。

**第2步**

接下来，我们找到数组的最小值，这是 position 处的零`(remaining money, node) = (7,1)`。该元素设置为（使用与 相同大小`visited`的矩阵跟踪元素的状态），这意味着我们选择了。现在，所有连接到的节点都通过遍历相应的边来更新值。`visitedArray``minArray``node one``node one`

![阵列一。](../Images/bdcff9199379ae1fe3d845de5cf89855.png)

这`minArray(6,3) = 191`意味着我们已经走了一段距离`191`才能到达，`node three`而我们剩下的钱是`6`因为我们已经支付了`1`到达那里的费用。以同样的方式`minArray(3,2)`设置为`190`。红色方块标记该元素`(7,1)`已被访问。

**第 3 步**

现在我们再次找到最低的未访问元素（即`minArray(3,2) = 190`），将其设置为`visited`并更新所有连接到它的元素。这意味着距离累加，剩余的钱是通过从当前值中减去成本来计算的。

![数组二。](../Images/615f76a3ffe2a6b0ff3337cea3d439de.png)

请注意，返回`node one`from太昂贵了`node two`。

**第4步**

下一步，选择`minArray(6,3) = 191`看起来像这样。

![阵列三。](../Images/4ac17039288d5aaf8dca84d22ca265f9.png)

**第 5 步**

三步后，数组看起来像这样。这里选择了两个相等的元素`382`和一个相等的元素`383`。请注意，元素的值仅在改进（即低于）当前值时才更新。

![阵列四。](../Images/76820a5bcd841b6e9dccb23c02f43986.png)

**第 6 步**

数组继续填充，直到所有元素都被访问或仍然具有无限值。

![阵列 5。](../Images/cae5952b775a647fec66a9f06995a255.png)

**最后一步**

最后一步是通过找到第四列的最小值来找到总距离。我们可以看到，最小值`minArray(0,4) = 385`对应于正确的解决方案。

注意：如果第四列的所有值都是无限的，则意味着没有有效的解决方案。该算法还指定如果在第四列中有多个相等且最小距离的值，则选择最便宜的一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:45:58.497

您可以制作节点之间的成本为 0 的副本，以添加第二条可能的路径。

像这样（伪代码）

```
Node 1____
|         |
|path1    |
|cost=3   |path2 cost=5
|         |
Node 2____/ 
```

变成这样：

```
Node 1____cost=0____Node 1a
|         path 1a     |
|path1                |path2
|cost=3               |cost=5
|                     |
Node 2________________/ 
```

不确定这是否可行，但这是一个想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T21:30:14.600

我不认为 Dijkstra 的算法是解决这个问题的好方法，因为所需的距离不仅是源节点和目的地。这是一个基于 A* 搜索算法的解决方案。\

首先，执行基于`weight`然后基于的FolydWarshall`additional_data`以获得图中每个节点对的最小值和最小值。`weight``additional_data`

```
 FloydWarshall(Weights);
  FloydWarshall(Additional_datas); 
```

其次，我们基于优先级队列执行 A* 搜索，其元素如下结构（以 c 代码为例。）优先级队列将自动获取所有候选中的 weights_sum 最少。weights_expected 是通过当前节点到目标节点的路径的最佳猜测，而 weights_now 是当前权重

```
 struct NODE
    {
        int node;
        int weights_expected;
            int weights_now;
        int additional_datas_now;
            bool visited;
    };
    bool operator < (const NODE &A,const NODE &B)
    {
        return A.weights_expected>B.weights_expected || (A.weights_expected==B.weights_expected && 
   A.additional_datas_now>B.additional_datas_now);
    } 
```

在 A* 搜索算法中，

```
1) we first put the source node into priority queue. 
  2) while Priority Queue is not empty:
        Set **A** equal to the head of priority queue and pop out the head of priority queue. 
        A.visited=True;
        if A is the destination node **Dest**, **return** A.weights_expected. 
        For each neighbors **B** of node **A**, 
          if A.visited==False **and** A.additional_datas_sum+|AB|.additional_data+Additional_datas[B][Dest]<=x, 
               1) B.additional_datas_now=A.additional_datas_now+|AB|.additional_data;    
               2) B.weights_now=A.weights_now+|AB|.weight;
               3) B.weights_expected=B.weights_now+Weights[B][Dest];
               3) push node B into priority Queue. 
   3) Print "Do not find a proper path" //if code came to here, that means the if in 2) do not return a value. 
```

A* 搜索仍然是 NP 难的，因为在最坏的情况下它必须搜索每条可能的路径。然而，它比简单的 DFS 搜索要快得多，并执行大量搜索路径切割。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T16:36:22.737

这个问题是NP完全的。没有一种算法比多人解释的算法更有效（Tom Anderson，user1884905）。

证明：通过减少非负数的子集和。

以子集和（N 个数字）的实例 A 为例。构建一个图，其中有 N+1 个节点。对于节点 i 和 i+1 ，制作 2 条路径，一条权重=0，additional_data=A[i]，另一条权重=A[i]，additional_data=0。选择 x（additional_data 总和的限制）。

观察到算法必须最小化权重之和，因此它也会最大化附加数据之和。因此，选择的第一类路径将是与子集和问题结果中的数字相关联的路径。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-16T08:53:42.540

附加条件将破坏 Dijkstra。可以这样想：如果你在图中有一条路径 A->B 和一条边 B->C 在图中，那么涉及 B 的最短路径 A->C 肯定是 A->B 的最小路径->C。在您的情况下，此条件不成立，因为虽然 A->B 和 B->C 可能有效，但 A->B->C 可能无效。

好的，这就是你抓起一张纸试试这个的地方。

如果您查看您的图表，并假设您想要从 (1) 到 (4)，请注意如何通过引入以下边来消除 (3)：

*   (1)->(4), [390, 2]
*   (1)->(2), [383, 3]
*   (2)->(4), [391, 3]

一旦你消除了除直线之外的所有边，问题就变得更容易了：对于每个节点，你可以跟踪达到目标需要多少[距离，额外]。您不必存储额外的 > max 或 'remaining additional' < 0，因为这不是一个可行的解决方案。此外，如果您有多个相等的附加距离，则应仅保留最小距离。

现在最好的解决方案是在最后一个节点（或第一个，取决于您如何订购它）中距离最小的那个。如果在路上，你保留了你是如何到达那里的指针（例如，如果你更新矩阵中的值也存储使它改变的元素），你也可以回溯路径。

在这里您应该注意，当问题出现在您建议的矩阵的非消除形式时，您可以执行相同的操作：x 轴作为节点，y 轴作为“每个节点的列表”。

那应该这样做。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-06T17:55:52.943

您的附加条件使问题变得更加困难。看着它，我认为你唯一能做的就是找出源和目标之间所有可能的路径，按总边权重对它们进行排序，然后一一检查你的附加条件是否成立。

然而，寻找两个顶点之间所有可能路径的问题是[NP-Hard](http://en.wikipedia.org/wiki/NP-Hard)。稍加修改的 DFS 版本可能可以解决问题，但可能并非在所有情况下都如此。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-17T14:04:29.933

您可以使用 bellman-ford 算法，假设您的**附加数据**是bellman-ford 算法中**的边数参数**。

# c# - 接收远程服务器返回错误：（403）禁止消息

> ID：14184199
> 
> 赞同：5
> 
> 时间：2013-01-06T16:33:48.103
> 
> 标签：c#, asp.net, iis-7.5

我在下面的代码块上收到“远程服务器返回错误：（403）禁止”错误消息。具体来说，这一行失败了：**var response = (HttpWebResponse)(request.GetResponse());**

该代码在我的开发机器上完美运行，但不适用于生产。我在两种环境中都使用 IIS 7.5。两台机器都打满补丁（安装了所有 Windows 更新）。使用 4.0 .Net 框架。不知道为什么它适用于一台机器而不是其他机器。

代码：

```
var uri = new Uri(url);
var request = (HttpWebRequest)WebRequest.Create(uri);

request.KeepAlive = false;
request.ProtocolVersion = HttpVersion.Version10;
request.Timeout = System.Threading.Timeout.Infinite;
request.Method = @"POST";
request.ContentType = @"application/x-www-form-urlencoded";
request.ContentLength = postData.Length;
request.UserAgent = @"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; .NET CLR 1.1.4322)";                    
request.Accept = "*/*";                    

//setup the stream variables and do the send/retrieve of data
Stream writeStream = request.GetRequestStream();
var bytes = System.Text.Encoding.ASCII.GetBytes(postData);
writeStream.Write(bytes, 0, bytes.Length);
writeStream.Close();                    

var response = (HttpWebResponse)(request.GetResponse());                    
var responseStream = response.GetResponseStream();                    
var readStream = new StreamReader(responseStream, Encoding.UTF8);                    
pageResponse = readStream.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:58:33.907

您可能需要指定凭据

```
request.Credentials = CredentialCache.DefaultCredentials; 
```

或者你如果你需要通过特定的凭据传递：

```
request.Credentials = new NetworkCredentials("user", "password"); 
```

有关[NetworkdCredential 类的更多信息](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T21:22:15.913

尝试检查生产和开发 iis 应用程序的身份验证方法（iis 管理器 -> 单击网站 -> 功能视图 -> 身份验证）。

听起来在开发 iis 上您启用了匿名身份验证，而在生产 iis 上则没有。如果您没有在生产中启用匿名身份验证，您可能需要设置 request.Credentials 如上所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:22:12.697

您是否尝试过在请求上设置 Credentials 对象，并为您尝试访问的服务器提供适当的授权？请参阅 System.Net.NetworkCredential。

# user-interface - 我可以使用 Spec 在 Seaside 中构建用户界面吗？

> ID：14184202
> 
> 赞同：3
> 
> 时间：2013-01-06T16:34:12.013
> 
> 标签：user-interface, smalltalk, specifications, seaside

我已经在示例包“Spec-Examples-PolyWidgets”中指出，可以使用 Polymorph 构建用户界面。可以对 Seaside Web 框架做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:51:02.627

使用多框架实际上是 Spec 的目标之一，Seaside 就在其中。

此外，这是下一个改进步骤:)

所以答案不是现在，但可能很快:)

如果有了解Seaside的人想加入努力，他/她是受欢迎的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:26:23.680

我也不知道当前 Spec 与 Seaside 的绑定。许多开发人员使用[Magritte](http://code.google.com/p/magritte-metamodel/)。有一些工作将[Glamour](http://www.squeaksource.com/Glamour.html)浏览器渲染到 Seaside。这很好，因为它允许在非常高的抽象级别进行编程。对于不同的方法，您可以查看[Deltawerken](http://ss3.gemstone.com/ss/Deltawerken.html)及其[公告](http://forum.world.st/Ann-Deltawerken-amp-Storyboard-td4646138.html)和[入门](http://forum.world.st/How-to-approach-building-a-Deltawerken-application-Part-1-tt4647416.html)

# c++ - C++ 标准工作草案之间的变化？

> ID：14184203
> 
> 赞同：9
> 
> 时间：2013-01-06T16:34:14.053
> 
> 标签：c++, c++11

N3337 是 C++ 标准的工作草案，于 2012-01-16 发布：

> [**N3337 (pdf)**](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)

与官方 C++11 标准相比，它只有[很小的编辑更改。](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3338.html)

N3337 于 2012-02-28 修订为 N3376：

> [**N3376 (pdf)**](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)

N3376 于 2012-11-02 修订为 N3485：

> [**N3485 (pdf)**](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)

我很想知道 N3337 和 N3485 之间的区别？（或等同于 N3337 和 N3376 之间的差异以及 N3376 和 N3485 之间的差异）

一种方法是尝试分析以下 git 日志：

> [https://github.com/cplusplus/draft](https://github.com/cplusplus/draft)

另一种方法是将 PDF 转储为文本并`diff`在其上运行。

有没有更好的方法来跟踪这些变化？是否有保存在某处的精选更改列表？也许在标准位置或标准格式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T16:37:01.667

阅读[C++ 编辑报告](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3486.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T16:57:27.090

每个工作草案`N<i>.pdf`似乎都有一个与之关联的*C++ 编辑报告*，命名为`N<i+1>.html`列出更改。

因此，N3376 的编辑报告称为 N3377，位于：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3377.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3377.html)

N3485 的编辑报告称为 N3486，位于：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3377.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3486.html)

所有这些文件的索引位于：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-06T17:13:22.520

标准草案的每次修订都反映了最近一次标准委员会会议上批准的变更。因此，正式的变更清单是会议批准的动议清单。如果您无权访问这些内容，则编辑的报告是对更改内容的非官方摘要。

# syntax - App.TaskVisible 属性是否适用于标准 EXE？

> ID：14184206
> 
> 赞同：0
> 
> 时间：2013-01-06T16:34:31.533
> 
> 标签：syntax, vb6

好吧，我的问题不是“如何隐藏”我的应用程序表单任务管理器应用程序选项卡，而是只有我可以使用*App.TaskVisible*属性和标准 EXE 来做到这一点？

根据[MSDN](http://msdn.microsoft.com/en-us/library/fc353bw2%28v=vs.80%29.aspx)：

> 该属性通常用于防止用户关闭设计为作为后台任务运行的应用程序。在大多数情况下，TaskVisible 属性用于不显示用户界面的应用程序。

这正是我的情况，但令我遗憾的是，这个财产对我没有任何作用。也许它只适用于 ActiveX EXE？还是我错过了什么？

[编辑] 好的，我觉得这个属性已经死了，因为我无法在仅包含带有 Sub Main 的标准 bas 模块的简单项目中实现它。此外，关于此属性的最后（最新鲜）在线评论大约有 10 年历史。

很快，为了隔离这个问题......

1.  创建新的标准EXE项目；
2.  添加标准模块（.bas）；
3.  删除 Form1；
4.  将以下代码添加到您的 Module1；
5.  从它的位置编译并运行您的 Project1.exe；

```
    Private Declare Sub Sleep Lib "kernel32.dll" (ByVal dwMilliseconds As Long)

    私人子主（）
        App.TaskVisible = False
        睡眠 4500
    结束子

```

在 Win8、Win7 和 WinXP x64 SP2 上进行了测试，进程在所有这些设备中都是可见的。

[**编辑**]我以不同的形式重新提出这个问题，我已经得到了答案，所以这是[我的问题的答案](https://stackoverflow.com/a/14299826/1856504)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:03:22.760

这可能有助于回答您的问题（即您应该转到源代码，即 VB6 文档，而不是某些 .Net 对现实的看法）：

[TaskVisible 属性](http://msdn.microsoft.com/en-us/library/aa445725%28v=vs.60%29.aspx)

> TaskVisible 属性只能在不显示界面的应用程序中设置为 False，例如不包含或不显示 Form 对象的 ActiveX 组件。当应用程序显示一个界面时，TaskVisible 属性会自动设置为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:35:15.887

我认为您只能在设计时设置它，而不是在它运行时设置。

尝试在设计时设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:32:10.857

I have used App.TaskVisible=False very successfully in a standard VB6 EXE - I set it in the start-up module (Sub Main), after I've done some preliminary checks. The EXE - which, incidentally, does indeed have a user interface/main form - does not display in the applications column in Task Manager but is still listed under processes. This is fine, as I just want to make it that bit more difficult for users to terminate the application. There's nothing sinister in this requirement, it is simply a messaging application - if it's stopped, the messages stop.

# portable-executable - VS_VERSION_INFO 是 ResourceDirectory/ResourceEntry 吗？它有名称还是 ID？

> ID：14184207
> 
> 赞同：0
> 
> 时间：2013-01-06T16:34:36.290
> 
> 标签：portable-executable

我正在尝试[解决 ilrepack](https://github.com/gluck/il-repack/issues/25)克隆[ilmerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)的问题。但是，我无法理解 PE 文件格式的基本概念以“正确”修复它。

我要合并的所有二进制文件都有一个没有 ID 或名称的条目：

![没有 ID 或名称的 ResourceEntry](../Images/ec0a85c7e0525117a6e97ee66bd5f0e4.png)

它们每个中的数据似乎都是 VS_VERSION_INFO 结构。

```
 "ϐ4\0VS_VERSION_INFO\0\0ҽﻯ\0\t\0䴶ኒ\t\0䴶ኒ?\0\0\0\0\0\0\0\0\0\0\0D\0VarFileInfo\0\0$\0Translation\0\0\0Ұ̰\0StringFileInfo\0̌\0000004b0\0LCompanyName\0\0Just A Programmer LLC\0\\FileDescription\0\0AppDomainPowerShellRunner\0@FileVersion\0\00.9.4754.19766\0\0TInternalName\0JustAProgrammer.ADPR.dll\0\0|,LegalCopyright\0Copyright © Just A Programmer LLC 2011-2012\0\\OriginalFilename\0JustAProgrammer.ADPR.dll\0\0TProductName\0\0AppDomainPowershellRunner\0DProductVersion\00.9.4754.19766\0\0HAssembly Version\00.9.4754.19766\0\0"   string 
```

从我在**IMAGE_RESOURCE_DIRECTORY**上阅读的所有内容来看，资源条目似乎有名称或 ID。

```
struct IMAGE_RESOURCE_DIRECTORY
{
    long Characteristics;
    long TimeDateStamp;
    short MajorVersion;
    short MinorVersion;
    short NumberOfNamedEntries;
    short NumberOfIdEntries;
} 
```

所以我的问题是：

*   VS_VERSION_INFO 是资源条目还是资源目录？如果不是，它属于 PE 的哪个部分？
*   它有ID吗？
*   它有名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:56:48.390

事实上，您的陈述“从我在 IMAGE_RESOURCE_DIRECTORY 上阅读的所有内容来看，资源条目似乎有一个名称或一个 ID。” 是正确的！资源目录中的项目总是有 ID 或名称（按此顺序！）。

是的，VS_VERSION_INFO 是资源目录的成员，它的 ID 是 16。不，它没有名称（因为它是内置资源类型）。

下面是 Truecrypt 图像的快照主机，显示其版本信息资源项（使用 CFF Explorer）

![在此处输入图像描述](../Images/f90aa25e9a88a1847c7ccee69bcaf6e1.png)

# sublimetext2 - 如何更改css自动完成样式

> ID：14184209
> 
> 赞同：0
> 
> 时间：2013-01-06T16:34:38.677
> 
> 标签：sublimetext2, sublimetext

当我输入“he”时，SublimeText2 为我提供了“height”。好的。

但是，当我确认我想要

`height:|;`而不是`height: |`（| 表示光标）。

在哪里改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:08:34.887

转到您的[Packages 文件夹](http://docs.sublimetext.info/en/latest/basic_concepts.html#the-data-directory)。然后到`CSS`文件夹。打开`css_completions.py`.

几乎在底部，在`on_query_completions`方法内部，有一条线

```
l.append((p, p + ": ")) 
```

改成：

```
l.append((p, p + ":")) 
```

删除冒号后面的空格。

## 编辑

输入值后按`tab`得到分号。

此外，[Emmet](http://docs.emmet.io/)值得一试，以获取出色的完成/片段等。但是，编辑这些是另一个问题。

## 编辑2

这是一个类似的问题：[如何使用 Sublime Text 2 在 CSS 中删除冒号后的多余空格？](https://stackoverflow.com/questions/14149024/how-to-remove-extra-space-after-a-colon-in-css-with-sublime-text-2)

# oauth-2.0 - OAuth2 中 AuthSub 的 hd param 身份验证等效于什么

> ID：14184213
> 
> 赞同：2
> 
> 时间：2013-01-06T16:34:53.200
> 
> 标签：oauth-2.0, google-drive-api, google-docs-api, authsub

在 AuthSub 中，对于 Google Apps 托管域，我可以使用 hd 参数将用户重定向到该域，让他们登录到该域并接收令牌。

OAuth2 中的等效功能是什么？

我遇到了这个网址：[https ://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

这是唯一的方法吗？据我了解，服务帐户可以直接访问所有用户吗？工作流程将不同于以往的 AuthSub，用户必须登录到他们的个人域帐户？这种理解正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:17:58.590

我想我找到了解决方案，但不确定它是否正确。

为了进行测试，我刚刚将 &hd=mydomain.com 添加到 auth url，并且我被正确地重定向到域登录页面。登录后，我确实收到了 403，管理员已禁用第三方应用程序。所以我登录到谷歌应用程序管理员并启用了复选框。它工作得很好。

如果这是一个正确的解决方案或目前仅因为 AuthSub/OAuth1 尚未被禁用，我只需要 Google 驱动器开发人员的确认？

更新： hd=default 不起作用。您可以将其设置为空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:17:53.077

这不是一个很好的解决方案，但是您可以将`user_id`参数传递给 OAuth2.0 的授权 URI 以传递域用户的电子邮件地址。也就是说，如果您知道电子邮件地址。

如果没有，您应该相信用户在多次登录时会选择正确的帐户。

正如我所说：对不起，这里不是一个很好的解决方案。

# php - 在 CakePHP 博客中自动建立帖子和标签关系

> ID：14184214
> 
> 赞同：1
> 
> 时间：2013-01-06T16:34:56.463
> 
> 标签：php, cakephp, has-and-belongs-to-many

我正在使用 CakePHP 编写一个非常简单的博客应用程序来帮助我学习框架。博客文章可以有许多标签，标签可以属于许多博客文章（如 StackOverflow 上的）。这是我的带有外键的数据库模式来反映这一点：

![在此处输入图像描述](../Images/8c94c517dd2e62a11927c94d4322331e.png)

我已经用 CakePHP 在我的模型和模型之间建立了`hasAndBelongsToMany`关系（我认为这是正确的方法吗？），如下所示：`Post``Tag`

```
class Post extends AppModel {
    public $name = 'Post';

    public $hasAndBelongsToMany = array(
        'Tag' =>
            array(
                'className'              => 'Tag',
                'foreignKey'             => 'post_id',
                'associationForeignKey'  => 'tag_id',
                'unique'                 => true
            )
    );
}

class Tag extends AppModel {
    public $name = 'Tag';

    public $hasAndBelongsToMany = array(
        'Post' => array(
            'className'              => 'Post',
            'foreignKey'             => 'tag_id',
            'associationForeignKey'  => 'post_id',
            'unique'                 => true
        )
    );
} 
```

我还为添加帖子设置了一个非常简单的页面，其视图如下所示：

```
<h1>Add blog post</h1>

<?php echo $this->Form->create('Post'); ?>
<?php echo $this->Form->input('title'); ?>
<?php echo $this->Form->input('body'); ?>
<?php echo $this->Form->input('slug'); ?>
<?php echo $this->Form->end('Publish'); ?> 
```

我的问题是，是否可以在我的添加页面上有一个输入字段，我可以在其中输入标签名称（用空格分隔），然后让 Cake 自动在我的数据库中建立关系？很像 StackOverflow 的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T15:16:37.470

我建议将表名“posts_tags”更改为“post_tags”并添加字段

```
"joinTable" => "post_tags"; 
```

在 HABTM 功能中以及如何添加标签？从相同的观点或其他观点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:54:46.213

检查我们的插件[https://github.com/cakedc/tags](https://github.com/cakedc/tags)

它正是这样做的，您只需几行就可以集成它。

# fork - 将互斥体从父进程复制到子进程

> ID：14184215
> 
> 赞同：4
> 
> 时间：2013-01-06T16:35:10.413
> 
> 标签：fork, parent-child, mutex

当我们创建子进程时，它是父进程的克隆

在父进程下已经使用了互斥锁...

可以将互斥锁复制到子进程吗？

如果是，这样做的缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:24:00.493

如果它是在进程内存中定义的，则当前值将被设置，但它不会被父进程更新，因为进程之间的内存不是共享的。

您可以在进程之间共享互斥锁，只要它在共享内存中分配并且两个进程都可以访问。 [pthread_mutexattr_setpshared](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutexattr_getpshared.html)

您还可以使用命名进程信号量甚至是未命名进程[信号量](http://linuxdevcenter.com/pub/a/linux/2007/05/24/semaphores-in-linux.html?page=5)，以防您分叉，这将使您免于在进程之间分配共享内存，因为信号量是系统范围的并且以文件的形式保留在文件系统上。

# java - for循环的多个条件

> ID：14184219
> 
> 赞同：1
> 
> 时间：2013-01-06T16:35:29.920
> 
> 标签：java

我正在编写一个for循环，如下所示：

```
for(int i = row, int j = col; i < rows, j < cols; i++, j++) 
```

但是，Java 似乎不喜欢它……有什么办法可以实现类似的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:36:05.143

利用 ＆＆。而且，`int`只有一次。

`for(int i = row, j = col; i < rows && j < cols; i++, j++)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:37:02.277

第二个表达式需要是一个布尔表达式，所以

```
i < rows, j < cols 
```

不是布尔值。你可以试试

```
i < rows && j < cols 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:37:24.770

`for(int i = row,j = col; i < rows&& j < cols; i++, j++)`你不能有多个声明`for loop`，应该有一个`boolean`表达式

# android - sendBroadscast VS startActivity。有什么区别？

> ID：14184220
> 
> 赞同：3
> 
> 时间：2013-01-06T16:35:34.553
> 
> 标签：android

sendBroadcast (intent) 和 startActivity(intent) 有什么区别。

为什么这不起作用：

```
Intent smsIntent = new Intent(Intent.ACTION_SENDTO);
smsIntent.setData( Uri.parse( "sms:0533"));
smsIntent.putExtra("sms_body", "The SMS text");
sendBroadcast(smsIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:39:26.437

[`sendBroadCast()`](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29)发送一个全局广播，任何`BroadcastReceivers`设置为接收该广播的人都会接收该广播。

[`startActivity()`](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29)尝试根据您指定的类名**或**Intent Action（它是一个字符串）启动一个 Activity。

在你的情况下[`Intent.ACTION_SENDTO`](http://developer.android.com/reference/android/content/Intent.html#ACTION_SENDTO)是一个意图动作，所以，需要`startActivity()`

从文档：

> 标准活动动作
> 
> 这些是 Intent 为启动活动定义的当前标准操作（通常通过**startActivity(Intent)**。最重要，也是迄今为止最常用的是 ACTION_MAIN 和 ACTION_EDIT。

# php - 对 up 目录使用 require_once 不起作用

> ID：14184223
> 
> 赞同：38
> 
> 时间：2013-01-06T16:35:50.277
> 
> 标签：php, directory, require-once

我正在像这样使用require_once

```
require_once('../mycode.php') 
```

我正在开发一个 wordpress 插件。我的插件文件夹是 yves-slider，其中有一个名为 yves-slider.php 的文件和一个名为 admin 的文件夹。在 admin 文件夹中，我有一个名为 admin.php 的文件。我想在位于一级目录的 admin.php 中要求文件 yves-slider.php。当我尝试使用

```
require_once('../yves-slider.php') 
```

它给了我以下错误

> 警告：require_once(../yves-slider.php)：打开流失败：C:\xampp\htdocs\wordpress\wp-content\plugins\yves-slider\yves-slider-admin\ 中没有这样的文件或目录yves-slider-admin.php 在第 4 行
> 
> 致命错误：require_once()：在 C:\xampp\htdocs\wordpress\wp-content\ 中打开所需的 '../yves-slider.php' (include_path='.;C:\xampp\php\PEAR') 失败plugins\yves-slider\yves-slider-admin\yves-slider-admin.php 在第 4 行

我做错了吗？我正在使用 XAMPP 3.1，我想这是最好的方法。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-06T16:38:39.417

你想让它相对于文件所在的当前路径：

```
require_once __DIR__ . '/../yves-slider.php'; 
```

可能发生的事情是 PHP 查找的当前路径*不是*您认为的路径。如果您对它是什么（当前路径）感到好奇，您可以这样做[`echo getcwd();`](http://php.net/manual/en/function.getcwd.php)。

# android - android seekbar progressdrawable：背景位图不拉伸（高度）

> ID：14184227
> 
> 赞同：5
> 
> 时间：2013-01-06T16:36:20.207
> 
> 标签：android, seekbar

我的布局xml如下：

```
 <SeekBar
        android:id="@+id/progress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="10dp"
        android:gravity="center"
        android:progressDrawable="@drawable/progressbar_drawable"
        android:progress="50"
        android:thumb="@drawable/progressbar_handle_selector"
        android:layout_toLeftOf="@+id/showChat"
        android:layout_toRightOf="@+id/play" /> 
```

Seekbar的进度drawable如下：

@drawable/progressbar_drawable

```
 <?xml version="1.0" encoding="utf-8"?>
  <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

  <item android:id="@android:id/background" android:drawable="@drawable/bg_progressbar_9patch"/>
  <item android:id="@android:id/progress">
    <clip>
        <shape>
            <gradient
                android:angle="90"
                android:endColor="#d9b546"
                android:startColor="#cc520f" />
        </shape>
    </clip>
  </item>

  </layer-list> 
```

结果，背景位图（白色）与进度可绘制（橙色）相比，不会在高度上拉伸并且仍然太低，这是一个示例： ![在此处输入图像描述](../Images/25cbdf3bd83d4116050e1ea29e43e474.png)

更重要的是，它在不同的屏幕上看起来不同：背景位图与进度可绘制相比具有不同的高度。例如（另一个屏幕）：

![在此处输入图像描述](../Images/f3215c0b183c0b2a4e4e082d94ed0b09.png)

**我的问题是：为什么进度和背景可绘制对象（橙色和白色条纹）总是具有相同的高度以及如何使它们具有相同的高度？**

* * *

更新

素材资源：

![在此处输入图像描述](../Images/bb03eac88906f9b31ad30bb8428e5207.png) ![在此处输入图像描述](../Images/d1dfa91bdc1e1410550d6c5b08b27f93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:42:02.760

我从您的图像创建了 9-patch 并将其放在 drawable-hdpi 文件夹中，一切看起来都很好......我在 eclipse ui 预览器中有一些工件，但在设备上一切正常...... ![在此处输入图像描述](../Images/71161334070b96efeca52dcfb287cfa6.png)

[https://dl.dropbox.com/u/13106986/bg_progressbar_patch.9.png](https://dl.dropbox.com/u/13106986/bg_progressbar_patch.9.png)

# mysql - 如何按日期和型号年份过滤此 MySQL 查询？

> ID：14184232
> 
> 赞同：2
> 
> 时间：2013-01-06T16:36:56.160
> 
> 标签：mysql

我有一张桌子，它看起来像这样：

```
id  year    effective   price
1   2000    2012-01-01  1000
2   2001    2012-01-01  1100
3   2002    2012-01-01  1200
4   2003    2012-01-01  1300
5   2000    2012-03-01  1500
6   2001    2012-03-01  1600
7   2002    2012-03-01  1700
8   2003    2012-03-01  1800
9   2000    2011-12-01  900
10  2001    2011-12-01  1000
11  2002    2011-12-01  1100
12  2003    2011-12-01  1200 
```

此表中有一组数据，其中包含许多项目的价格历史记录。它们没有任何规律的顺序，似乎人们随机进入数据库并进行了更改。我没有设置这个数据库，也没有开发插入和更新数据的应用程序。我唯一的目标是以客户想要的方式呈现指定的数据。

话虽如此，我很难获得所需的信息。在上面的示例数据中，我需要能够对价格进行排序并获得每个特定年份的不同数字。这必须按最终用户输入的最近生效日期进行过滤。

例如，如果用户想要最新的数据（截至今天），则响应应该是这样的：

```
5   2000    2012-03-01  1500
6   2001    2012-03-01  1600
7   2002    2012-03-01  1700
8   2003    2012-03-01  1800 
```

另一方面，如果用户想要 2012-02-01 的最新数据，那么它应该返回：

```
1   2000    2012-01-01  1000
2   2001    2012-01-01  1100
3   2002    2012-01-01  1200
4   2003    2012-01-01  1300 
```

我的问题在于不知道如何构建此查询。甚至可以将其构建为单个查询，还是我必须执行多个查询才能获取数据？我希望占用空间尽可能小，因为我必须从共享年份但有其他不同数据的四个不同表中获取数据。

我试过这个查询没有效果：

```
select id, year, effective, price
from mytable
group by year
having effective < '2012-02-01' 
```

这给出了这个结果：

```
1   2000    2012-01-01  1000
2   2001    2012-01-01  1100
3   2002    2012-01-01  1200
4   2003    2012-01-01  1300 
```

我原以为这会给我正确的信息，因为这似乎是合乎逻辑的。

我试过这个查询，也没有效果：

```
select distinct year, id, effective, price
from mytable
group by effective
having effective < '2012-02-01' 
```

返回此结果：

```
1   2000    2012-01-01  1000
5   2000    2012-03-01  1500
9   2000    2011-12-01  900 
```

这个查询似乎完全错误。

关于如何让它正确执行查询的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:42:37.787

如果您在子查询中过滤日期，则使用相关子查询来获取主表的`MAX(effective)`per`year`和 join 将起作用。这个想法是子查询将返回一组模型年份和生效日期，它们是小于您在`WHERE`子句中指定的日期的最大日期。这些返回的列可以连接回主表以拉入其余列。

```
SELECT 
  mytable.*
FROM
  mytable
  JOIN (
     /* Join on a subquery which returns the greatest date per year */
     SELECT MAX(effective) as effective, year
     FROM mytable 
     /* Filtering on some date in the subquery WHERE clause... */
     WHERE effective < '2012-01-01'
     GROUP BY year
  /* Since the subquery returns effective,year, join on both those cols against the main table */
  ) maxd ON mytable.effective = maxd.effective AND mytable.year = maxd.year 
```

2012 年 1 月 1 日生效的示例： http://sqlfiddle.com/#! [2/05546/4](http://sqlfiddle.com/#!2/05546/4)

2013 年 1 月 1 日生效的示例：http://sqlfiddle.com/#! [2/05546/5](http://sqlfiddle.com/#!2/05546/5)

# asp.net - .net 中的日期转换

> ID：14184236
> 
> 赞同：1
> 
> 时间：2013-01-06T16:37:05.847
> 
> 标签：asp.net, datetime, datepicker

我的 web 表单中有一个 jquery，它以 mm/dd/yyyy 格式返回日期。如何将其转换为系统日期时间格式，或者是否可以在 jquery 中进行更改以返回系统日期时间格式的日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T16:42:02.880

尝试：

```
DateTime dateTime = DateTime.ParseExact(jquery_date_string, "MM/dd/yyyy", null); 
```

# ruby-on-rails - Rails：更新嵌套资源

> ID：14184237
> 
> 赞同：0
> 
> 时间：2013-01-06T16:37:12.230
> 
> 标签：ruby-on-rails, forms

我有两个模型，提案和提案回复。在我的路线中，我在提案中嵌套了提案回复。我有这个表格：

```
<%= form_for proposal_proposal_reply_path(@proposal, @proposal_reply), :remote => true do |f| %>
  <%= f.text_area :body %>
  <%= f.submit 'Submit' %>
<% end %> 
```

单击提交时，出现路由错误：

```
No route matches [POST] "/proposals/1/proposal_replies/4/edit" 
```

为什么它试图 POST 进行编辑，而不仅仅是 PUTing？我可以通过插入一些 url 选项来破解它，如下所示：

```
<%= form_for proposal_proposal_reply_path(@proposal, @proposal_reply), :remote => true, :method => :put, :url => {:action => :update} do |f| %> 
```

不过，这不像 Rails 的方式。我还能做错什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:13:11.773

我猜你根本不需要使用路径助手。如果您有正确的路线定义：

```
resources :proposals do
  resources :proposal_replies
end 
```

你应该能够传递`[@proposal, @proposal_reply]`给`form_for`：

```
<%= form_for [@proposal, @proposal_reply], :remote => true do |f| %> 
```

# hta - 标题栏和任务栏中的 HTA 更改图标

> ID：14184242
> 
> 赞同：1
> 
> 时间：2013-01-06T16:37:54.957
> 
> 标签：hta

我想知道是否有一种简单的方法来更改我的 HTA 应用程序的图标我找到了答案，但它总是使用另一个程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:08:55.733

要为 HTA 使用自定义图标，您需要一个`.ico`文件。然后你可以像这样为文件分配一个图标`<HTA>`：

```
<HTA:application
    icon = "path_to_icofile"
> 
```

根据我的经验，Windows7 并不完全支持`HTA`对象的所有功能。不幸`icon`的是，这些部分不受支持的功能之一。带有自定义图标的文件偶尔会丢失其图标并使用一些随机图标。

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/ms536471%28v=vs.85%29.aspx)上阅读有关 HTA 的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T04:38:38.053

自 IE10 推出以来，Microsoft 已删除此功能。

[http://social.msdn.microsoft.com/Forums/ie/en-US/fa1a9128-c933-409b-9d6e-11770e631e52/htaapplication-tag-does-not-work-in-ie10?forum=iewebdevelopment](http://social.msdn.microsoft.com/Forums/ie/en-US/fa1a9128-c933-409b-9d6e-11770e631e52/htaapplication-tag-does-not-work-in-ie10?forum=iewebdevelopment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T17:29:37.873

在 Windows 10 中，稍微更改语法

```
<HTA:application
    icon = 'path_to_icofile'
> 
```

# java - java.lang.reflect.Proxy 实例是否为终结而特别处理？

> ID：14184248
> 
> 赞同：3
> 
> 时间：2013-01-06T16:38:21.370
> 
> 标签：java, reflection, proxy

当我使用对该对象的`java.lang.reflect.Proxy.newInstance(...)`调用创建接口实例时，不会将其传递给 invocationHandler。`finalize`谁能指出我在哪里记录了这种行为？

```
private Method lastInvokedMethod = null;

@Test
public void finalize_methods_seem_to_disappear_on_proxies() throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
    final Method lengthMethod = CharSequence.class.getDeclaredMethod("length");
    final Method finalizeMethod = Object.class.getDeclaredMethod("finalize");
    final Method equalsMethod = Object.class.getDeclaredMethod("equals", new Class[] {Object.class});

    InvocationHandler handler = new InvocationHandler() {
        @Override
        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
            lastInvokedMethod = method;
            if (method.equals(lengthMethod))
                return 42;
            else if (method.equals(equalsMethod))
                return true;
            else
                return null;
        }
    };
    CharSequence proxy = (CharSequence) Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class<?>[]{CharSequence.class}, handler);

    // check that invocationHandler is working via reflection
    lastInvokedMethod = null;
    assertEquals(42, invokeMethod(proxy, lengthMethod));
    assertEquals(lengthMethod, lastInvokedMethod);

    // check that other methods defined on Object are delegated
    lastInvokedMethod = null;
    assertEquals(true, invokeMethod(proxy, equalsMethod, "banana"));
    assertEquals(equalsMethod, lastInvokedMethod);

    // check that we can invoke finalize through reflection
    Object finalizableObject = new Object() {
        protected void finalize() throws Throwable {
            lastInvokedMethod = finalizeMethod;
            super.finalize();
        }
    };
    lastInvokedMethod = null;
    invokeMethod(finalizableObject, finalizeMethod);
    assertEquals(finalizeMethod, lastInvokedMethod);

    // Finally - a call to finalize is not delegated
    lastInvokedMethod = null;
    invokeMethod(proxy, finalizeMethod);
    assertNull(lastInvokedMethod);
}

private Object invokeMethod(Object object, Method method, Object... args) throws IllegalAccessException, InvocationTargetException {
    method.setAccessible(true);
    return method.invoke(object, args);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T16:45:20.077

[java.lang.reflect.Proxy API](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)

• 对代理实例上 java.lang.Object 中声明的 hashCode、equals 或 toString 方法的调用将被编码并以与接口方法调用被编码和分派相同的方式分派到调用处理程序的调用方法，如上所述. 传递给调用的 Method 对象的声明类将是 java.lang.Object。**从 java.lang.Object 继承的代理实例的其他公共方法不会被代理类覆盖，因此这些方法的调用行为与它们对 java.lang.Object 实例的行为类似**。

# c# - Microsoft SQL Server Express 2008 R2 的 VS C# 字符串

> ID：14184251
> 
> 赞同：1
> 
> 时间：2013-01-06T16:38:47.390
> 
> 标签：c#, database-connection, sql-server-2008r2-express

我正在制作一个在 Windows 7 64 位上使用 SQL Server 2008 R2 Express 的 C# 应用程序。我面临的问题是我无法连接到我的数据库，因为我的连接字符串错误。我正在使用 .udl 文件来制作连接字符串，这就是它给我的：

```
Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Restorant;
DataSource=.\SQLEXPRESS 
```

此连接字符串正在创建一个错误，指出存在无法识别的转义值。我尝试将我的数据源更改为（本地），因为我的朋友说它适用于他们的项目，但由于未知实例名称错误，我无法连接。

我还有其他方法可以连接到我的数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:41:39.007

在 C# 中，该字符`\`被视为[转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)中的第一个字符。
因为`\S`您的 of`Data Source=.\SQLEXPRESS`未被识别为有效的转义序列，所以您会收到错误消息。

因此，您需要构建连接字符串，并在其前面加上字符`@`或将转义字符加倍，`\\` 请参阅[使用字符串](http://msdn.microsoft.com/en-us/library/ms228362%28v=vs.80%29.aspx)以了解 @ 字符的解释

```
string conString = @"Integrated Security=SSPI;Persist Security Info=False;" + 
                   @"Initial Catalog=Restorant;Data Source=.\SQLEXPRESS"; 
```

如果必须，请记住使用此方法逐字制作多个字符串。

另请注意连接字符串的数据源部分中的小错误。它需要数据和源之间的空间。请参阅[connectionstrings.com](http://www.connectionstrings.com/sql-server-2012)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:46:15.583

现在，您的连接字符串正试图逃逸，`S`例如`.\S`. 改成这个

```
//double the backslash to escape the slash
string connectionString = "Integrated Security=SSPI;Persist Security Info=False;
          Initial Catalog=Restorant; Data Source=.\\SQLEXPRESS"; 
```

或者

```
//precede the string with @
string connectionString = @"Integrated Security=SSPI;Persist Security Info=False;
          Initial Catalog=Restorant; Data Source=.\SQLEXPRESS"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T16:45:56.610

尝试将数据源名称更改为数据源`Data Source=localhost\SQLExpress`

# c# - int32 和十进制转换

> ID：14184254
> 
> 赞同：-2
> 
> 时间：2013-01-06T16:38:59.017
> 
> 标签：c#, class

我有个问题。在我的课堂上，我将 product_ID 定义为 int32，将 product__price 定义为小数。当我必须使用文本框将数据保存在数据库中时，我不能这样做，它不能转换它或其他东西。如果可以，请你帮助我。谢谢你。

```
public Int32 Product_ID { get; set; }
public String Product_name { get; set; }
public String Product_category { get; set; }
public Decimal Product_price { get; set; }
public string image_location { get; set; } 
```

* * *

```
Product product = new Product();

product.Product_ID = int.Parse(textBox1.Text);
product.Product_name = textBox2.Text;
product.Product_category = textBox3.Text;

product.Product_price = int.Parse(textBox4.Text);
product.image_location = textBox5.Text;

Product.Save(product); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:42:15.053

更正这一行：

```
product.Product_price = int.Parse(textBox4.Text); 
```

至

```
product.Product_price = decimal.Parse(textBox4.Text); 
```

最佳情况下，您应该首先检查文本框的内容（如果您还没有），以便您拥有正确的逗号、仅数字、try-catch 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:49:09.543

您必须将其转换为小数而不是 int sinse`product.Product_price`是小数类型。类型必须始终匹配。

```
product.Product_price = Convert.ToDecimal(textBox4.Text); 
```

或者

```
product.Product_price = decimal.Parse(textBox4.Text); 
```

**更新** 这只是一个疯狂的猜测，但试试这个：

```
if(IsPostback)
{

    Product product = new Product();

    product.Product_ID = int.Parse(textBox1.Text);
    product.Product_name = textBox2.Text;
    product.Product_category = textBox3.Text;

    product.Product_price = Convert.ToDecimal(textBox4.Text);
    product.image_location = textBox5.Text;

    Product.Save(product);

} 
```

# android - 手动编辑后刷新共享首选项？

> ID：14184256
> 
> 赞同：0
> 
> 时间：2013-01-06T16:39:02.990
> 
> 标签：android, sharedpreferences

在可能的应用程序中，我试图允许用户直接使用文本编辑器编辑我的 sharedpreferences 文件。由于该文件只能在有根手机上访问，我找到了一种将文件复制到 SD 卡的方法，允许用户编辑该文件，然后将其复制回来。这很好用。

但是，该应用程序仍使用更改之前文件中的旧值。我可以让它加载新值的唯一方法是强制停止应用程序并重新启动它。我假设 Android 将这些值存储在某处的缓冲区中。有没有办法让它用新值更新那个缓冲区？

我尝试过 editor.commit()、getSharedPreferences，尝试过以编程方式清除缓存和数据。不知道从这里去哪里......帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:25:06.570

你为什么把事情搞得这么复杂？

使用 SharedPreferences 文件中的所有属性创建一个 Activity 并放入这些首选项的当前值。

然后用户可以编辑这些值，然后您以这种方式将其保存回来，无需植根电话

# c - CUDA 错误 - 未指定的启动失败

> ID：14184257
> 
> 赞同：2
> 
> 时间：2013-01-06T16:39:05.440
> 
> 标签：c, cuda

为了练习使用 CUDA 编码，我做了一个小测试场景，其中包含三个文件：

*   `memory.c`持有纯`C`代码
*   `memory_kernels.h`CUDA 内核的声明和启动内核的函数
*   `memory_kernels.cu`内核的定义

程序应该做的是在主机上创建一个整数数组，将其复制到设备并查询元素。内核将打印出一些细节。

但是，我收到错误：

`Error in memory_kernels.cu at line 43 with error code "unspecified launch failure"`

三个文件的源代码如下：

```
/** 
 * memory.c
 *
 * Test copying large arrays to device
 * and printing from kernel
 */

/* Include standard libraries */
#include <stdlib.h>
#include <stdio.h>

/* Include local header files */
#include "memory_kernels.h"

int main() {

  /* Size of array */
  int i, N = 1024;

  /* Array */
  int *intArr = (int *) malloc( N * sizeof(int) );

  /* Fill array */
  for( i = 0; i < N; i++ ) {
    intArr[i] = i;
  }

  /* Run CUDA code */
  cuda_mem( &intArr );

  /* Clean up device */
  cudaDeviceReset();

  /* Everything done */
  exit(EXIT_SUCCESS);
} 
```

```
/** 
 * memory_kernels.h
 *
 * Declarations for CUDA kernels
 */

/* Determine compiler */
#ifdef __cplusplus
#define EXTCFUNC extern "C"
#else
#define EXTCFUNC extern
#endif

#ifndef KERNELS_H
#define KERNELS_H

/* Standard libraries (only needed for debugging) */
#include <stdio.h>

/* Include CUDA header files */
#include <cuda.h>
#include <cuda_runtime.h>

#define CUDA_CALL(x) do { if((x) != cudaSuccess) {                                                         \
  printf("Error in %s at line %d with error code \"%s\"\n",__FILE__,__LINE__,cudaGetErrorString(x));       \
  exit(x);}} while(0)

/* Device globals */
__device__ int *d_intArr;

/* Device kernels */
__global__ void mem();

/* Host access functions */
EXTCFUNC void cuda_mem( int **intArr );

#endif 
```

```
/** 
 * memory_kernels.cu
 *
 * CUDA kernel implementations
 */

/* Include header file */
#include "memory_kernels.h"

__global__ void mem() {
  int i = threadIdx.x;
  int a = d_intArr[i];

  printf("i = %d    a = %d\n",i,a);
}

/* Determine compiler */
#ifdef __cplusplus
#define EXTCFUNC extern "C"
#else
#define EXTCFUNC extern
#endif

/** 
 * cuda_mem()
 *
 * Test copying large array to device 
 * and printing from kernel
 */
EXTCFUNC void cuda_mem( int **intArr ) {
  /* Local variables */
  int N = 1024;

  /* Initialise device variables */
  CUDA_CALL( cudaMalloc( (void **) &d_intArr, sizeof(int) * N ) );

  /* Copy to device initial values */
  CUDA_CALL( cudaMemcpy( d_intArr, *intArr, sizeof(int) * N, cudaMemcpyHostToDevice ) );

  /* Run kernel */
  mem <<< 1,N >>> ();
  CUDA_CALL( cudaPeekAtLastError() );
  CUDA_CALL( cudaDeviceSynchronize() );

  /* Free local scoped dynamically allocated memory */
  CUDA_CALL( cudaFree( d_intArr ) );
} 
```

使用以下命令完成编译：

```
nvcc -c -o memory.o memory.c -arch=sm_20
nvcc -c -o memory_kernels.o memory_kernels.cu -arch=sm_20
nvcc -o memory memory.o memory_kernels.o -arch=sm_20 
```

并在带有 CUDA 4.0 的 NVIDIA Tesla M2050 上运行。计算能力 2.0 需要`printf()`在内核中使用。

在四处寻找解决方案后，错误代码表明我在从全局内存读取时内核中存在分段错误。但是，我启动的线程数与数组的大小相同。

经过试验，我感觉错误是在复制`intArr`到设备时引起的。也许我把我的指针都搞混了？

我了解文件结构是否有点奇怪，但它都是更大程序的一部分，但我已将错误减少到这个较小的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:33:37.097

由于内核无法直接读取/写入全局数组而引发的错误。正确的做法是将全局数组的指针作为参数传递给内核。

声明并定义内核为：

```
__global__ void mem(int *dArr);

__global__ void mem(int *dArr) 
{
  int i = threadIdx.x;
  int a = dArr[i];

  printf("i = %d    a = %d\n",i,a);
} 
```

将内核称为：

```
mem <<< 1,N >>> (d_intArr); 
```

上述方法为我解决了这个问题，并且程序运行良好。

# 额外考虑：

您不能`__device__`直接在宿主代码中使用使用修饰符声明的变量。当我使用 CUDA 5 编译您的代码时，我收到警告

> 警告：无法在主机函数中直接读取**设备变量“d_intArr”**

以下函数调用会生成警告：

```
CUDA_CALL( cudaMemcpy( d_intArr, *intArr, sizeof(int) * N, cudaMemcpyHostToDevice ) ); 
```

为了保持**全局**效果，您可以将指针作为参数传递给您的函数，而不是声明全局数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T21:58:20.170

我想扩展@sgar91 提供的答案，以提供一些额外的观点（我自己的）。正如我所看到的，至少有两种方法可以在全局内存中实例化可以从主机和设备访问的数组。

一种。使用在主机端创建的动态定位/分配的数组。代码顺序大致如下：

```
int main(){
  int *arr, *d_arr;
  arr = (int *)malloc(N*sizeof(int));
  cudaMalloc((void **) &d_arr, N*sizeof(int));
  cudaMemcpy(d_arr, arr, N*sizeof(int), cudaMemcpyHostToDevice);
  ...
  } 
```

湾。使用静态定位（也可能是分配的）数组。代码顺序大致如下：

```
__device__ int d_arr[N];
...
int main(){
  int *arr;
  arr = (int *)malloc(N*sizeof(int));
  cudaMemcpyToSymbol(d_arr, arr, N*sizeof(int));
  ...
  } 
```

对于第一种方法，我*必须*将地址`d_arr`作为参数传递给内核。使用第二种方法我不需要这样做，因为数组是静态定位的，因此编译器和运行时能够找到它并在加载时正确修复代码。使用第二种方法，我可以直接`d_arr`从内核访问，即使我没有将它作为参数传递给内核。

请注意，使用第二种方法可以有一个动态大小（但静态定位）的数组，但为了简洁起见，我没有在这里说明。

sgar91 提供的答案并不完全符合这两种方法中的任何一种，因此例如关于在主机代码中使用设备地址的警告仍然存在（即使它似乎有效）。

# r - 使用 R 代码将多个图放在 A4 纸上

> ID：14184258
> 
> 赞同：5
> 
> 时间：2013-01-06T16:39:07.980
> 
> 标签：r, plot

我在 R 中有 6 个图，我想将它们绘制在一个视图中。换句话说，我想把它们放在 A4 大小的单页中。

我正在使用的情节代码是：

```
 plot(temp$ambtemp,type="o", pch=22, lty=2, col="brown",xlab = "Hour  2007/09/30" , ylab= "Tempreture" )

 title(main="Hourly Mean, node 25", col.main="brown", font.main=1) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T17:35:43.370

这是一个可重复的示例，说明您如何执行此操作：

```
pdf('eg.pdf', width = 8.3, height = 11.7)  ## Device with dimensions of A4 paper
par(omi = rep(.5, 4))                      ## 1/2 inch outer margins
par(mfrow = c(3,2))                        ## 2x3 grid of plotting areas
replicate(plot(rnorm(99)), n = 6)          ## 6 example plots
dev.off() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T16:45:00.497

该`layout`功能允许您将单个设备（例如 A4 纸）划分为可用于绘图的多个区域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T16:51:38.330

如果您使用标准图形，最简单的方法是使用 `par(mfrow=c(3,2))`. 不需要其他任何东西。但是，如果您想制作非常漂亮的多面板图，我强烈建议您查看`lattice`或`ggplot2`图形（这也是您最后一个问题的答案）。

# php - mysql 2个表，从2个表中获取结果

> ID：14184261
> 
> 赞同：0
> 
> 时间：2013-01-06T16:39:23.783
> 
> 标签：php, mysql

我有 2 张桌子

1 个表 = 文件

```
 code                     | title 
```

luLidwhSl8hmN0T6RsLaDmxAB09UZcX |这是Rar标题

4Xwvm1C3yTQJK7CnmxorUDI7sNSvcBK |这是JPG标题

...

2 表 = 命中

```
 page_name                                | hits 
```

下载.php?code=luLidwhSl8hmN0T6RsLaDmxAB09UZcX |102

下载.php?code=4Xwvm1C3yTQJK7CnmxorUDI7sNSvcBK |87

...

我的查询是：

```
 include('db.inc.php');
            $query = mysql_query("SELECT t1.code, t1.title, RIGHT(t2.page_name, 31) as t2.page_name, t2.hits FROM files t1 INNER JOIN hits t2 ON t1.code= RIGHT(t2.page_name, 31) as t2.page_name ORDER by t2.hits DESC LIMIT 1, 7");

            while ($result = mysql_fetch_assoc($query)) {
                echo ' <div id="linkstyle"><strong><a href="http://localhost/edu/filesupload/download.php?code='. $result['t1.code'] . ' ">' , $result['t1.title'] , '</a></strong><br></div>';
                } 
```

我收到这个错误

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in C:\xampp\htdocs\Edu\filesupload\index.php on line 104 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:40:37.037

改变这个：

`$query = mysql_query("SELECT t1.code, t1.title, RIGHT(t2.page_name, 31) as t2.page_name, t2.hits FROM files t1 INNER JOIN hits t2 ON t1.code= RIGHT(t2.page_name, 31) as t2.page_name ORDER by t2.hits DESC LIMIT 1, 7");`

对此：

`$query = mysql_query("SELECT t1.code, t1.title, RIGHT(t2.page_name, 31) as t2.page_name, t2.hits FROM files t1 INNER JOIN hits t2 ON t1.code= RIGHT(t2.page_name, 31) as t2.page_name ORDER by t2.hits DESC LIMIT 1, 7") or die(mysql_error());`

那么这应该告诉你错误是什么，因为如果它很好，它就不会返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:07:10.163

试试这个查询：

```
SELECT t1.code, t1.title, RIGHT(t2.page_name, 31) as page_name, t2.hits FROM files t1 INNER JOIN hits t2 ON t1.code= RIGHT(t2.page_name, 31) ORDER by t2.hits DESC LIMIT 1, 7 
```

# jquery - 消除滚动条并将嵌入的 pdf 放入我的 jquery 对话框中

> ID：14184264
> 
> 赞同：1
> 
> 时间：2013-01-06T16:39:43.743
> 
> 标签：jquery, css, jquery-ui, pdf

**我在做什么 ：**

我正在我的网站和主页上开发一个 pdf 阅读器，我有许多电子书封面照片呈现，当用户点击特定电子书时，会出现一个 jquery ui 对话框，我使用[pdfobject 库](http://pdfobject.com/)呈现 pdf .

**我取得了什么：**

点击 e-book 的图标，可以在对话框中渲染 pdf 对象。

**问题 ：**

显示看起来很糟糕。在 pdf 嵌入对象中有滚动条，并且 jquery 对话框有滚动条（垂直和水平）。

**我想要的是 ：**

我的 jquery 对话框的宽度 = 600 和高度 = 500 ，当我第一次打开对话框时，应该只有 1 个垂直滚动条，pdf 的第一页应该完全适合我的对话框默认尺寸（600 X 500），无论是多少它的原始尺寸。如果 pdf 只有 1 页，则不应有滚动条（除非用户单击放大）

**Javascript代码：**

```
$(function() {
    $( "#pdfPrompt" ).dialog({
        autoOpen: false,
        show: "blind",
        hide: "explode",
        width:600,
        height:500,
        resizable : false
    });

    $( "#opener" ).click(function() {
        $( "#pdfPrompt" ).dialog( "open" );
            var myPDF = new PDFObject({ url: "sample.pdf" }).embed('renderer');

        return false;
    });
}); 
```

opener 只是我给 icon 的 id，而 pdfprompt 是一个简单的`<div>`

例子 ：

![这就是正在发生的事情](../Images/135bde588c55b0f18d3d4f8f8aab4547.png)

在尝试了 charlietfl 的解决方案（jsFiddle）之后：![在此处输入图像描述](../Images/4f6446a13799e3daceceaaaf9d717f48.png)

你能帮我实现这个吗，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:20:55.777

一个潜在的问题是隐藏元素没有维度。这会导致问题，例如在隐藏的 div 中处理谷歌地图。pdf 查看器脚本可能需要获取容器的尺寸。

`show`出于这个原因删除动画。

您可能需要等到对话框打开才能将 pdf 放入对话框中。

```
$( "#pdfPrompt" ).dialog({
    autoOpen: false,
   open:function(){
        /* code here to render pdf*/
    },
    hide: "explode",     
    width:600,
    height:500,
    resizable : false
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T16:52:32.993

您可以尝试使用 google docs 查看器，它会自动调整查看的 pdf 的大小（[演示](http://jsfiddle.net/Mottie/DhCCX/)）

```
<iframe src="http://docs.google.com/gview?url=http://samplepdf.com/sample.pdf&embedded=true" style="width:100%; height:100%;" frameborder="0"></iframe> 
```

# android - 在哪里可以看到 android.R.layout 布局示例？

> ID：14184267
> 
> 赞同：5
> 
> 时间：2013-01-06T16:39:46.813
> 
> 标签：android, android-layout

我正在开始 Android 开发，并在网上遵循了一些在 android.R.layout 中使用布局的示例。但是，我想知道是否有办法查看这些标准布局中的每一个是什么样的，以及我是否可以在不开发自己的新布局的情况下使用它们。

我如何查看这些标准布局中的每一个提供的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:45:37.923

这取决于您正在查看的站点以及他们是否甚至提供其布局组成的 XML。这是重用布局的参考，甚至可能是您自己的一些：

[http://developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

为了预览 XML，我猜您将使用 Eclipse 中的 UI 设计器。

# sql - 嵌套选择还是连接？

> ID：14184268
> 
> 赞同：6
> 
> 时间：2013-01-06T16:39:52.740
> 
> 标签：sql, sql-server

这是我存储的 Proc 的一个片段

```
SELECT  NULL AS StoryID
      , AlbumID
      , CAST(NULL as varchar) AS StoryTitle
      , AlbumName
      , (SELECT URL FROM AlbumPictures AS AlbumPictures_3 WHERE (AlbumID = Albums.AlbumID) AND (AlbumCover = 'True')) AS AlbumCover
      , Votes
      , CAST(NULL as Int) AS PictureId
      , 'albums' AS tableName
      , (SELECT NestedAlbums.AlbumID FROM NestedAlbums WHERE (AlbumID = Albums.AlbumID)) AS Flag
INTO #Results2
FROM Albums WHERE AlbumID IN (SELECT StringVal FROM funcListToTableInt(@whereAlbumID)) 
```

我在上面的查询中使用了嵌套选择。我很想知道是否`Nested Selects`比`LEFT/Right JOINS`我应该使用更好`JOINS`？

表相册：

![在此处输入图像描述](../Images/8c166531f11725bf28a0413be7ee5e00.png)

表嵌套专辑：

![在此处输入图像描述](../Images/fbda4605c654decd7c071cbae77c9c4c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T16:46:23.083

一般来说，写一个明确的`OUTER JOIN`会更好。

SQL Server 可能需要将 Assert 添加到带有子查询版本的计划中，以验证子查询最多只返回一行（除非这是由唯一索引保证的）。这会限制可用的可能转换。有关此的更多信息，请参阅[标量子查询](http://blogs.msdn.com/b/craigfr/archive/2006/09/27/774107.aspx)。

此外（尽管与您的问题中的示例无关，因为两个子查询都不同）作为显式编写`JOIN`允许您使用连接表中的多个列进行一次查找，而使用单独的类似子查询则不会（SQL Server 没有检测逻辑常见的子表达式）。

**编辑：**

在评论中进行讨论，例如

```
SELECT NULL                      AS StoryID,
       A.AlbumID,
       CAST(NULL AS VARCHAR(30)) AS StoryTitle,
       A.AlbumName,
       AP.URL                    AS AlbumCover,
       A.Votes,
       CAST(NULL AS INT)         AS PictureId,
       'albums'                  AS tableName,
       CASE
         WHEN EXISTS (SELECT *
                      FROM   NestedAlbums NA
                      WHERE  NA.AlbumID = A.AlbumID
                             AND ( AccountId = @AccountId )) THEN 1
         ELSE 0
       END                       AS Flag
INTO   #Results2
FROM   Albums A
       LEFT OUTER JOIN AlbumPictures AP
         ON ( AP.AlbumID = A.AlbumID )
            AND ( AP.AlbumCover = 'True' )
WHERE  A.AlbumID IN (SELECT StringVal
                     FROM   funcListToTableInt(@whereAlbumID)) 
```

您可能会注意到列表中仍然有一个子查询，`SELECT`但`CASE ... EXISTS` [将作为半联接有效地实现](http://blogs.msdn.com/b/craigfr/archive/2006/08/23/715306.aspx)。

目前，您的查询假设每张专辑最多返回一个匹配行`AlbumPictures`，如果此假设不成立，则会出错。这改变了语义，因为不会返回错误，并且您将获得带有各种`URL`s 的多行。如果您不希望这种情况发生，您需要定义`URL`使用哪个并添加一个`GROUP BY`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T18:20:39.937

第一个区别是，**该`FROM`子句控制结果的初始基数**。

在您的情况下，结果将在相册中每行一行。子句中的标量子查询`SELECT`不能改变这一点。如果子查询恰好返回多行，SQL Server 将抛出异常。它永远不会增加结果。

当您将此逻辑连接移至`FROM`子句时，您**重新定义了初始基数**。它不再是专辑中的每行一行，而是专辑中的每行一行`Album LEFT OUTER JOIN AblumPictures ON...`。如果这样在专辑中每行产生多行，SQL Server 将*不会*像对子选择那样抛出异常。相反，它将向结果中添加行。

因此，在这方面，子查询在表达意图方面做得更好，并且更好地主动保护您免受违反该意图的数据的影响：“给我每张专辑一行，对于每张专辑，包括此处的 URL，嵌套 ID从那里开始”等。

**然而**，从功能上讲，有一个巨大的缺点：标量子查询不能返回整个元组。您已经完成了编写子查询的所有工作，SQL Server 已经完成了执行它的所有工作，现在您仅限于这个单一的标量返回值！有时这很好，但有时你需要更多。当您需要更多时，您需要该`FROM`子句。

`FROM`与标量子查询等效的最接近的子句不是`OUTER JOIN`，而是奇妙的**`OUTER APPLY`**。`OUTER APPLY` *不是*标量表达式：它返回整个元组和任意数量的行。

第一近似：

```
SELECT Albums.*, AlbumPictures.URL, NestedAlbums.AlbumID
FROM Albums
OUTER APPLY (
  SELECT TOP (1) * FROM AlbumPictures
  WHERE (AlbumID = Albums.AlbumID) AND (AlbumCover = 'True')
  ) AlbumPictures
OUTER APPLY (
  SELECT TOP (1) * FROM NestedAlbums 
  WHERE (AlbumID = Albums.AlbumID)
  ) NestedAlbums 
WHERE Albums.AlbumID IN (SELECT StringVal FROM funcListToTableInt(@whereAlbumID)) 
```

因此，凭借`TOP (1)`，专辑仍然控制结果的初始基数。但是，我们现在可以访问相关表中的*所有*列，这太棒了。

然后，**如果**我们确信`TOP (1)`没有必要*——凭借键和索引，子查询只能返回一行*——那么我们可以使用更简单的形式重写：

```
SELECT Albums.*, AlbumPictures.URL, NestedAlbums.AlbumID
FROM Albums
OUTER APPLY (
  SELECT * FROM AlbumPictures
  WHERE (AlbumID = Albums.AlbumID) AND (AlbumCover = 'True')
  ) AlbumPictures
OUTER APPLY (
  SELECT * FROM NestedAlbums 
  WHERE (AlbumID = Albums.AlbumID)
  ) NestedAlbums 
WHERE Albums.AlbumID IN (SELECT StringVal FROM funcListToTableInt(@whereAlbumID)) 
```

现在在逻辑上等同于`OUTER JOIN`：

```
SELECT Albums.*, AlbumPictures.URL, NestedAlbums.AlbumID
FROM Albums
LEFT OUTER JOIN AlbumPictures 
  ON AlbumPictures.AlbumID = Albums.AlbumID 
 AND AlbumPictures.AlbumCover = 'True'
LEFT OUTER JOIN NestedAlbums 
  ON NestedAlbums.AlbumID = Albums.AlbumID
WHERE Albums.AlbumID IN (SELECT StringVal FROM funcListToTableInt(@whereAlbumID)) 
```

你有它。哪个更好？好吧，无论你做什么，请保持简单。

**性能**方面，一般来说，表格之间并没有太大的区别。您可以并排比较特定表和索引的执行计划。了解 SQL Server 如何重写逻辑等效查询是一次很好的学习体验。我希望看到`OUTER APPLY`(w/o `TOP (1)`) 和`LEFT OUTER JOIN`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T17:12:22.500

这是基于 Martin 建议使用 OUTER JOIN 的猜测查询。我相信当他说“显式”连接时，他指的是仅选择该技术而不是技术类型的连接。下面的查询假定您在搜索单个专辑 ID 时只会从 NestedAlbums 和 AlbumCover 表中取回一行 - 如果不是这样，您将获得“重复行”并且必须向其中添加更多条件的连接子句以删除它们。此查询还假定 AlbumCover 在 Albums 表中。如果没有，您将不得不将文本更改`a.AlbumCover`为`ac.AlbumCover`

```
SELECT  NULL AS StoryID
      , a.AlbumID
      , CAST(NULL as varchar) AS StoryTitle
      , a.AlbumName
      , ac.URL AS AlbumCover
      , a.Votes
      , CAST(NULL as Int) AS PictureId
      , 'albums' AS tableName
      , na.AlbumID AS Flag
INTO #Results2
FROM Albums a
LEFT OUTER JOIN NestedAlbums na ON a.AlbumID = na.AlbumID
LEFT OUTER JOIN AlbumCover ac ON a.AlbumID = ac.AlbumID AND a.AlbumCover = 'True'
WHERE a.AlbumID IN (SELECT StringVal FROM funcListToTableInt(@whereAlbumID)) 
```

此查询从 Albums 获取结果，并包括 NestedAlbums 中具有匹配 AlbumID 的所有行，以及 AlbumCover 表中具有匹配 AlbumID 的任何行（但前提是 Albums 中的 AlbumCover 字段对于该行为“True”） . 因为我们选择了 LEFT OUTER JOIN 作为我们的运算符，如果 NestedAlbums 或 AlbumCover 没有匹配的行，SQL Server 将为这些字段返回 NULL，但无论如何查询都会返回这些行。如果连接是 INNER JOIN，那么如果连接表中没有匹配的行，则主表中的行也将被过滤掉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T17:11:40.927

对我来说，使用连接而不是嵌套选择编写的查询“更好”，因为它们更易于人们阅读和理解（考虑维护、支持、未来修改等）。所有的表连接逻辑都在一个地方（`from`子句)，并且所有返回的列都在另一个位置（`select`子句），它只是让您更容易弄清楚发生了什么。

其他人指出，执行查询可能会或可能不会有性能命中（像往常一样，向@Martin Smith +1 以指出晦涩但非常相关的细节），而这些答案就是您正在寻找的在这里......但是花一两分钟时间考虑一下未来可怜的开发人员，他们必须弄清楚转储在他们身上的代码实际上是在做什么。毕竟，可能是你...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T16:51:36.073

如果您考虑性能，在您的情况下，这两种方法几乎相同。（考虑到您的数据库中有良好的索引表）

如果需要太多的 JOIN，JOIN 更容易使用和高效。JOIN 可能会在加入时创建重复数据，但嵌套查询不会。

但最终性能将取决于您拥有的数据的数量和组织。您可以使用 SQL 性能监控工具根据您的数据进行验证。

# php - 如何生成多个页面，以便所有获取的查询进入 n 个页面？

> ID：14184271
> 
> 赞同：-2
> 
> 时间：2013-01-06T16:40:00.507
> 
> 标签：php, mysql

使用 PDO 获取查询，如何输出所有结果，以便输出分布在 N 个页面中以及在每页上 X 个结果之后......仅需要借助下一个按钮而不是分页（编号）。我想打破`echo $r['rollno'];`页面中的以下数组？

```
$conn=new PDO("mysql:host=$host;dbname=$db",$user,$pass);

$sql="SELECT rollno FROM student";
$q=$conn->query($sql) or die("failed!");
while($r = $q->fetch(PDO::FETCH_ASSOC)){
  echo $r['rollno']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:06:04.557

在查询中使用 mysql LIMIT：

```
$x = 10; // results on each page
$n = isset($_GET['page']) ? (int)$_GET['page'] : 0; // pagenumber

$sql = "SELECT rollno FROM student LIMIT ".($x * $n).", $x"; 
```

并像这样链接到下一页：

```
echo('<a href="?page='.($n+1).'">Next</a>'); 
```

# c - C中的信号处理

> ID：14184272
> 
> 赞同：1
> 
> 时间：2013-01-06T16:40:12.207
> 
> 标签：c, unix, signals, interrupt-handling

我制作了以下程序来学习`SIG_SETMASK`.

以下程序应该阻止`SIGINT`中断信号，直到`func()`函数调用

```
 sigprocmask(SIG_SETMASK,&fOnemask,NULL); 
```

其中 fOnemask 是空的，因为在它之前没有信号存储在 sigset 中。但正如我所说

```
 sigprocmask(SIG_SETMASK,&fTwoCmask,NULL); 
```

返回之前在函数内部`func2()`，其中 fTwomask 包含函数之前的信号列表`func()`，程序开始接收信号，当传递 SIGINT 时程序中断。

为什么会这样？

```
void func();
void func2();

int main()
{
    int childpid,child;
    childpid=fork();

    if(childpid==0)
    {
        func();
    }

    while(wait(NULL)>0);
    return 0;
}

void func()
{
    sigset_t sigmask,fOnemask;
    sigemptyset(&sigmask);
    sigaddset(&sigmask,SIGINT);
    sigprocmask(SIG_SETMASK,&sigmask,&fOnemask);

    func2();

    int i;
    for(i=0;i<10;i++)
    {
        sleep(1);
        printf("%d\n",i);
    }

    sigprocmask(SIG_SETMASK,&omask,NULL);
    printf("returning from func\n");

}

void func2()
{
    sigset_t sigmask,fTwomask;
    sigemptyset(&sigmask);
    sigfillset(&sigmask);
    sigprocmask(SIG_SETMASK,&sigmask,&fTwomask);

    int i;
    for(i=0;i<10;i++)
    {
        sleep(1);
        printf("%d\n",i);
    }

    sigprocmask(SIG_SETMASK,&fTwomask,NULL);
    printf("func2 ending\n");
} 
```

![在此处输入图像描述](../Images/3d01e9d7d2a817f59e7722a763530835.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:11:10.320

父进程被 SIGINT 中断，因为您从未在父进程中为 SIGINT 设置任何信号处理，因此将其设置为 SIG_DFL（可能，除非您在 shell 中关闭了中断处理，这不太可能），所以进程终止。

你是对的; 发送中断时，shell 不会死。这是因为 shell 非常注意确保它们不会被中断杀死。

* * *

对主要问题的评论之一是：

> 如果我`sigset_t`在函数中的对象中添加一个信号`main`，然后`foo()`从`main`. 然后我在另一个`sigset_t`本地对象中添加一个信号到`foo()`like `sigprocmask(SIG_SETMASK, &foomask, &oldmask)`。当我打电话`sigprocmask(SIG_SETMASK, &oldset, NULL)`时，会`sigprocmask(SIG_SETMASK, &oldset, NULL)`做什么？

您的评论（问题）充其量是令人困惑的；评论不是编辑问题的最佳方式。

据我了解，您要问的是：

```
static void foo(void);

int main(void)
{
    sigset_t mainmask;
    sigemptyset(&mainmask);
    sigaddset(&mainmask, SIGINT);

    // No call to sigprocmask() here...

    foo();
    return(0);
}

static void foo(void)
{
    sigset_t foomask;
    sigset_t oldmask;
    sigset_t oldset;     // Uninitialized
    sigemptyset(&foomask);
    sigaddset(&foomask, SIGQUIT);  // Different signal
    if (sigprocmask(SIG_SETMASK, &foomask, &oldmask) != 0)
        ...process error...
    if (sigprocmask(SIG_SETMASK, &oldset, NULL) != 0)
        ...process error...
    ...other code, presumably...
} 
```

这是评论中写的，我猜到的差不多。并且因为`oldset`未初始化，你会遭受 GIGO（garbage in，garbage out）；没有人能说会发生什么，因为行为是未定义的。

如果您的意思`oldmask`不是`oldset`问题，那么`foo()`可能看起来像：

```
static void foo(void)
{
    sigset_t foomask;
    sigset_t oldmask;
    sigemptyset(&foomask);
    sigaddset(&foomask, SIGQUIT);  // Different signal
    if (sigprocmask(SIG_SETMASK, &foomask, &oldmask) != 0)
        ...process error...
    if (sigprocmask(SIG_SETMASK, &oldmask, NULL) != 0)
        ...process error...
    ...other code, presumably...
} 
```

然后第二个`sigprocmask()`撤消第一次调用所做的更改`sigprocmask()`。请记住，SIG_SETMASK 选项的意思是“将进程信号掩码设置为第二个参数中的掩码”（除非第二个参数为空，在这种情况下，第三个参数不应为空，并且第一个参数中的内容无关紧要参数，因为它变成了在不更改任何内容的情况下找出当前掩码的调用）。

# linux - Shell 脚本：长度空间分隔

> ID：14184276
> 
> 赞同：2
> 
> 时间：2013-01-06T16:40:31.650
> 
> 标签：linux, shell

如何使下面的代码返回以空格分隔的单词数？

```
example='aaa bbb ccc ddd eee'
echo ${#example} 
```

该命令`echo ${#example}`返回字母总数 (19)。返回总字数（5）的最佳命令是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T16:44:38.203

```
$ foo=($example)

$ echo ${#foo[*]}
5 
```

如果您想在没有变量的情况下执行此操作

```
$ set $example

$ echo $#
5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T16:44:39.937

尝试使用`wc`代表的命令`word count`

```
wc -w <<< "$example"

wc -w <<< "asdf asdf asdf" 
```

# jquery - Bootstrap 通用按钮来切换手风琴

> ID：14184278
> 
> 赞同：1
> 
> 时间：2013-01-06T16:40:33.800
> 
> 标签：jquery, twitter-bootstrap, accordion

我是 jQuery 新手，并尝试为 twitter bootstrap 手风琴插件设置一个通用的展开/折叠按钮。在我的代码中，我有一个要展开/折叠的数组 div 的 id，而我使用的循环可以很好地做到这一点。

但是，如果我通过单击手风琴标题链接手动展开/折叠手风琴，则即使添加了“in”类，相关的 div 也不会再展开或折叠。

这是我的循环：

```
for(i=0;i<selectedRows.length;i++){
    if($("#"+a).find("div#collapse_"+selectedRows[i]+'.in').length==1)
        $("#"+a).find("div#collapse_"+selectedRows[i]).removeClass("in");
    else
        $("#"+a).find("div#collapse_"+selectedRows[i]).addClass("in");
} 
```

你能看出有什么问题吗？

非常感谢。

编辑：在这里完成的是手风琴的代码

```
<div id="accordion_4" class="accordion">
<div class="accordion-group">
    <divclass="accordion-heading">
        <a href="#collapse_4" data-parent="#accordion_4" data-toggle="collapse" class="accordion-toggle">
    Details</a>
    </div>
    <div class="accordion-body collapse in" id="collapse_4">
        <div class="accordion-inner">
            Collapsible group
        </div>
    </div>
</div> 
```

这是全局按钮的代码：

```
<i onclick="toggleExpand('batchForm');" class="btn">Collaps/expand details</i> 
```

对于 toggleExpand 函数，我发送我用来查看哪些行被选中（复选框）的表单的 ID，以便能够通过单击展开或折叠它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T09:48:25.517

这是一个更简单的答案 - 只需添加...

```
 $(document).on('click.collapse.data-api', 'button[data-toggle=collapse]', expand); 
```

在 COLLAPSE DATA-API 部分下的第 636 行附近的 bootstrap.js 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:58:42.827

最后我使用了这个功能，它可以解决问题，在 34 个复选框上有点慢，但可以工作。但是，如果有人更快地发现了一些东西，我很感兴趣。

```
 function toggleExpand(a){
        $("#"+a).find("input:checkbox:checked").each(function( index ) {
            $("#"+a+" .accordion .accordion-toggle").eq(index).click();
        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:11:18.977

你最好不要修改手风琴的任何类，并通过触发`click`适当的标题与之交互：

例子 ：

```
var $accordLinks=$('.accordion .accordion-toggle');

$('.btn').click(function(){
   $accordLinks.eq( $(this).index()).click()
}) 
```

演示：http: [//jsfiddle.net/RB7cT/](http://jsfiddle.net/RB7cT/)

# android - 动态注册的广播接收器不起作用

> ID：14184281
> 
> 赞同：0
> 
> 时间：2013-01-06T16:40:48.900
> 
> 标签：android, android-intent, runtime, broadcastreceiver

几个小时以来，我一直试图找出这里出了什么问题。为什么这个广播接收器没有收到意图？

```
static class BReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, final Intent intent) {
        Toast.makeText(context, "Got the intent", Toast.LENGTH_LONG).show();
    }

}

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mLayout = new FrameLayout(this);
    setContentView(mLayout);
    final IntentFilter intentFilter = new IntentFilter("com.example.testui.action");
    getApplicationContext().registerReceiver(new BReceiver(), intentFilter);
    final Intent intent = new Intent(getApplicationContext(), BReceiver.class);
    intent.setAction("com.example.testui.action");
    getApplicationContext().sendBroadcast(intent);
} 
```

PS。我没有在清单文件中定义这个接收器，因为严格地说，它不是强制性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T16:46:50.127

尝试以这种方式发送广播：

```
getApplicationContext().sendBroadcast(new Intent("com.example.testui.action")); 
```

# php - 从网址获取图片

> ID：14184282
> 
> 赞同：0
> 
> 时间：2013-01-06T16:40:47.963
> 
> 标签：php, steam

我想从玩家 Steam 个人资料中获取图像，并在我的网站上使用它们，所以当他们更改图像/照片时，它会在我身上发生变化。

这只是一次加载的一个，加载时会获取最新的 url。您可以使用此 url 进行测试，我需要的是使用此类在 div 中获取图像 url：并仅复制图像 url。

测试 steamprofile 的链接：[http ://steamcommunity.com/profiles/76561197991341238](http://steamcommunity.com/profiles/76561197991341238)

我试过的代码：

```
foreach($html->find('div[class=avatarFull]') as $div) 
{     
    foreach($div->find('img') as $img)
    {
        echo "<img src='" . $img->src . "'/>";          
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:49:37.193

使用 steam web api ([文档](https://developer.valvesoftware.com/wiki/Steam_Web_API#GetPlayerSummaries_.28v0002.29))，**GetPlayerSummaries**方法它可以在没有 html 报废的情况下工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:23:03.453

使用 koraktor 的[蒸汽冷凝器](https://github.com/koraktor/steam-condenser-php)，您可以轻松提取这些信息并使用它。

```
require_once('steam/db.php');
$_STEAMAPI = "YOURAPIKEYHERE";   // You get this from http://steamcommunity.com/dev/apikey
$playersStr = "";                // This is a comma separated list of profile IDs
                                 // if you don't have those, Steam Condenser has functions to acquire it
$players = array();              // For this example, I'm building an array of players assuming you'll have multiple players returned. 
                                 // You are free to skip this if you are only pulling one back
$url = "http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=$_STEAMAPI&steamids=$playersStr";
$json_object= file_get_contents($url);
$json_decoded = json_decode($json_object);

foreach ($json_decoded->response->players as $player)
{
    $players[$player->steamid]['personaname'] = $player->personaname;     // In game name
    $players[$player->steamid]['profileurl'] = $player->profileurl;       // URL to their Steam Community Page
    $players[$player->steamid]['avatar'] = $player->avatar;               // Small Avatar Icon URL
    $players[$player->steamid]['avatarmedium'] = $player->avatarmedium;   // Thumbnail avatar URL
    $players[$player->steamid]['avatarfull'] = $player->avatarfull;       // Full sized Avatar URL
} 
```

如果您没有玩家的个人资料 ID，但有 Steam ID，您可以像这样获取个人资料 ID：

```
$profile_id = SteamId::convertSteamIdToCommunityId($steam_id); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-06T16:58:26.317

我认为**RegEx** ( `preg_match`) 是更简单的方法

```
$html = file_get_contents("http://steamcommunity.com/profiles/76561197991341238");
preg_match('/<div class="avatarFull"><img src="(.*)" \/><\/div>/i', $html, $profile_picture); // $profile_picture[1]; is the url itself 
```

如果你想从同一个 url 中获取多张图片，然后替换`preg_match`为`preg_match_all`并运行一个循环`$profile_picture[1]`

# active-directory - 活动目录登录控制

> ID：14184283
> 
> 赞同：-2
> 
> 时间：2013-01-06T16:40:51.487
> 
> 标签：active-directory

我们可以在活动目录中自动找到谁在线或离线。活动目录有状态字段 例如，如果有人连接网络，状态字段在活动目录中设置为在线。可以吗 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-13T15:09:59.533

不幸的是，没有直接的方法可以在您想要的 Active Directory 上执行此操作，但您可以通过使用第三方应用程序或检查 Windows 事件日志以不同的方式执行此操作。

[使用 PsLoggedon https://docs.microsoft.com/en-us/sysinternals/downloads/psloggedon](https://docs.microsoft.com/en-us/sysinternals/downloads/psloggedon)通过命令行获取用户登录信息

psloggedon 的用法：

**psloggedon [- ] [-l] [-x] [\计算机名 | 用户名]**

**[- ]**：显示支持的选项和用于输出值的测量单位。

**[-l]**：仅显示本地登录，而不是本地和网络资源登录。

**[-x]**：不显示登录时间。

**[\\computername]**：指定要列出其登录信息的计算机的名称。

**[用户名]**：如果您指定用户名，PsLoggedOn 会在网络中搜索该用户登录的计算机。如果您要确保在您即将更改其用户配置文件配置时特定用户未登录，这将非常有用。

[PsLoggedOn 屏幕截图](https://i.stack.imgur.com/CzAVa.png)

使用 ManageEngine adaudit、Netwrix Auditor、Lepide Auditor 等审计应用程序的不同方式将回答您的问题。

ps：对于ManageEngine adaudit**服务器审核-> 本地登录-注销-> 登录活动**选项卡，如下图所示

[AdAudit 截图](https://i.stack.imgur.com/udCdP.png)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:15:19.417

Active Directory 中没有这样的字段。您只能在事件监视器中检查登录。

# imagemagick - 当图像缩小时，mogrify 使图像的文件大小大约大 3 倍

> ID：14184284
> 
> 赞同：1
> 
> 时间：2013-01-06T16:40:54.333
> 
> 标签：imagemagick, mogrify

我有一些png图像：

```
0.png   -  665.3 kB  -   1589 x 2175
1.png   -  989.9 kB  -   1589 x 2175
2.png   -  138.7 kB  -   1589 x 2175
3.png   -  351.9 kB  -   1589 x 2175 
```

我想让图像的高度为 2000（更小），所以我给出了这个命令：

```
mogrify -resize x2000 * 
```

新的图像大小是完美的，但文件大小增加了 3 倍以上

```
0.png   -    1.8 MB  -   1461 x 2000
1.png   -    1.4 MB  -   1461 x 2000
2.png   -  666.3 kB  -   1461 x 2000
3.png   -  971.9 kB  -   1461 x 2000 
```

我该怎么做才能保持合理的尺寸？

PS：尝试使用 Gimp 调整图像大小，0.png 达到 3.4 MB！！！怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-28T01:09:31.277

您的输出 PNG 中的每个样本可能有 16 位。使用“-depth 8”选项来防止：

```
mogrify -resize x2000 -depth 8 *.png 
```

# jquery - 使用 jquery 加载内容时循环浏览按钮的各个阶段

> ID：14184288
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:41:10.817
> 
> 标签：jquery, html, forms

我有一个表单，上面有三个选项和一个提交按钮。提交时，内容将在后台加载。

我想要发生的是让提交按钮具有三种状态。

1.  提交表单的标题为“加载数据”的普通按钮（可点击）
2.  内容加载时淡出并禁用，标题为“正在加载”
3.  改回正常按钮（可点击），带您进入新页面，标题为“开始”

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:43:36.193

像这样的东西。首先你的按钮说加载数据，然后：

```
$('#button').click(function(){

    $(this).addClass("Loading");

    $.ajax({
      url: "test.html",
      context: document.body
    }).done(function() {
      $("#button").removeClass("Loading");
      $("#button").addClass("DoneStart");
      $("#button").click(function(){window.location.href = "whatever.html"});
    });

 }); 
```

# java - setText 不适用

> ID：14184294
> 
> 赞同：1
> 
> 时间：2013-01-06T16:41:52.547
> 
> 标签：java, android, settext

我是Java的初学者。这个问题可能很愚蠢，但请帮忙！我创建了 TextView 类型的 tvlat 和 tvlong 作为全局对象。

```
public TextView tvlat;
public TextView tvlong; 
```

当我在以下代码中使用它们时：

```
public class MyLocationListener implements LocationListener
{   

    public void onLocationChanged(Location loc)
    {
        loc.getLatitude();
        loc.getLongitude();
        String Text = "Current location : " +
        "Lattitude = " + loc.getLatitude() +
        "Longitude = " + loc.getLongitude();
        Toast.makeText( getApplicationContext(), Text,  Toast.LENGTH_SHORT).show();

        tvlat.setText(“”+loc.getLatitude());
        tvlong.setText(“”+loc.getLongitude()); 
```

它说 TextView 类型中的 setText(char sequence) 不适用于代码的 arguments(double)：

```
tvlat.setText(“”+loc.getLatitude());
tvlong.setText(“”+loc.getLongitude()); 
```

显然，这是因为 tvlat 和 loc 是两种不同的类型。任何人都可以建议我提出上述陈述或解决上述问题的正确方法吗？谢谢你的耐心！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:45:13.487

报价格式很奇怪，它不同于`"`. 你可以试试：

```
tvlat.setText(String.valueOf (loc.getLatitude()));
tvlong.setText(String.valueOf(loc.getLongitude())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:44:36.640

采用

```
tvlat.setText(Double.toString(loc.getLatitude()));
tvlong.setText(Double.toString(loc.getLongitude())); 
```

获取 Double 的字符串表示形式

# ios - 将文件添加到 Xcode 和 git

> ID：14184298
> 
> 赞同：0
> 
> 时间：2013-01-06T16:42:13.797
> 
> 标签：ios, xcode, git, github

我正在尝试将新的两个文件添加到我的项目中。这两个新文件是图像。当我将它们添加到我的项目下的图像文件夹时，文件旁边的 git 符号是？。我见过符号 A 和 M，但我不确定是什么？符号指。这让我很担心。我想将这两个文件添加到我的 github 帐户中。所有，我需要做的是 git add 文件。我对吗？需要一些指导。

对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:00:37.373

这 '？' 符号表示图像不受版本控制 - 这是因为它们可能位于不是版本的文件夹中。尝试将文件夹递归地添加到您的 git 中，您会看到“？” 成为你熟悉的“A”。我不确定您使用什么工具来管理 git，但请尝试在终端中输入“git add”以及文件夹名称。

# android - distanceBetween 结果的结果是什么

> ID：14184300
> 
> 赞同：2
> 
> 时间：2013-01-06T16:42:20.907
> 
> 标签：android, wgs84

我在 Android Location 类中使用该函数：http: [//developer.android.com/reference/android/location/Location.html#distanceBetween(double, double, double, double, float[])](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)

获取两个地理点之间的距离，但我不知道结果 [0] 单位的结果如何，是米、英里还是什么？

> 距离和方位角是使用 WGS84 椭球定义的。

但我不知道“WGS84 椭球”是什么意思以及如何将其转换为米或英里！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:47:20.510

从您提供的链接

> 计算两个位置之间的近似距离（以米为单位）

和

> 计算出的距离存储在 results[0] 中

# javascript - 如何在 Angular 等 javascript MVC 框架上隐藏数据库凭据

> ID：14184304
> 
> 赞同：2
> 
> 时间：2013-01-06T16:42:45.817
> 
> 标签：javascript, model-view-controller, angularjs

在像 angularjs 这样的 mvc 框架中，到目前为止，我发现的示例将数据库凭据存储在 app.js 文件中的 app.constant 属性中，用户可以轻松阅读

在我的情况下，我通过从 mongolab.js 文件加载的服务连接到 mongolab。我的 apikey 在那里定义，当然我无法访问 mongolab 后端让它接收哈希

解决这个问题的最佳做法是什么？最好有一些我可以学习的材料的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:47:02.093

为什么不连接到 mongolab 服务器端？即使您使用加密，客户端也将始终处于危险之中。

在 Angular 中，您将有一个服务（使用`app.factory()`），它通过您的[服务层](http://en.wikipedia.org/wiki/Service_oriented_architecture)（使用 jsonp 或其他格式）连接，它将检查他的“连接器表”以调用正确的（外部）服务。这是一个非常简单的方案：

```
Client (js) --> Server (java, php, ...) --> Service 1
                                        --> Service 2 
```

# regex - 删除特定字符后的单词

> ID：14184305
> 
> 赞同：8
> 
> 时间：2013-01-06T16:42:52.227
> 
> 标签：regex

我正在使用软件使用正则表达式编辑歌曲。这就是我所拥有的：

> 吉米吃世界 - 中间 (.mp3)

我想做的是删除“-”之前的空格和之后的所有内容，所以我只剩下“Jimmy Eat World”

我想要执行的另一个操作是删除“-”之前的所有内容以及后面的空格，这样我就只剩下“中间”了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T16:46:24.853

这很容易。

**第一个动作**- 删除破折号后的任何内容：

*   替换`/ -.*/`为空字符串。（请注意，破折号之前有一个实际空格。）
*   如果破折号之前可能有多个空格，则可以使用此变体：（`/ +-.*/`再次在 之前使用实际空格`+`）。

**第二个动作**- 删除任何东西到破折号：

*   替换`/.* - /`为空字符串。（请注意，破折号后有一个实际空格。）

笔记

*   上面的斜线`/`不是正则表达式的一部分，您不必输入它们。它们在这里用作视觉分隔符。
*   `.`意思是“*任何字符”*（换行符除外，文件名中无论如何都不会有）
*   `*`意思是“*上一项，零到任意次数”*
*   `+`意思是“*前一项，至少一次，可能是任意次数”*
*   正则表达式中的大多数其他字符表示它们所说的意思，因此正则表达式中的空格将匹配字符串中的空格。值得注意的例外是`^`, `$`, `.`, `+`, `*`, `?`, `{`, `}`, `(`, `)`, `[`, `]`, `|`and `\`，它们有自己的特殊含义，但在您的情况下没有更深的关注。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:09:13.257

您的程序是否能够提取正则表达式中括号包围的组？如果是这样，您可以在这里创建一个像这样的表达式（示例是用 Python 编写的）：

```
In [1]: import re    

In [2]: match_obj = re.match(r'(.+?)\s*-\s*(.+?)\.mp3', 'Jimmy Eat World - The Middle.mp3')

In [3]: match_obj.group(1)
Out[3]: 'Jimmy Eat World'

In [4]: match_obj.group(2)
Out[4]: 'The Middle' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T16:47:39.893

这将匹配被空格包围的第一个连字符、空格以及它之后的所有内容（替换为空字符串）：

```
\s\-\s.* 
```

这将匹配被空格包围的第一个连字符、空格和它之前的所有内容：

```
.*\s\-\s 
```

这将匹配它`(.mp3)`之前的文字和一个可选的空格（任意数量）：

```
\s*\(\.mp3\) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T16:48:27.350

要检索歌曲名称，请尝试替换`.*-\s*`为空。然后什么都不换`\s*\(\.mp3\)`。

如果您有各种文件类型，例如 MP3 和 WMA，您可以将其他文件类型添加到第二个正则表达式，如下所示`\s*\(\.(mp3|wma|avi|mpg|mpeg)\)`：

# django - django 调试工具栏未显示某些视图

> ID：14184309
> 
> 赞同：4
> 
> 时间：2013-01-06T16:43:33.310
> 
> 标签：django, django-debug-toolbar

对于返回 HttpResponse() 而不是 render_to_response() 的视图，调试工具栏不会显示。

带有`return HttpResponse()`（为了测试）的视图不会显示调试工具栏..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-06T17:00:12.127

问题不在于您正在使用`HttpResponse`，而在于您这样做时返回的内容。

从django 调试工具栏的 github 页面上的[自述文件：](https://github.com/django-debug-toolbar/django-debug-toolbar)

> `text/html`注意：调试工具栏只有在响应的 mimetype 是or`application/xhtml+xml`并且包含结束`</body>`标记时才会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T14:37:33.940

虽然这个问题被标记为已回答，但我想补充一点..

页面中 javascript/jQuery 的问题/错误，可能会导致调试工具栏对于该特定页面/视图不可见

# c++ - 异常显示错误

> ID：14184310
> 
> 赞同：0
> 
> 时间：2013-01-06T16:43:34.290
> 
> 标签：c++

晚上好。抱歉标题我不能更准确地说明这个问题。

**以下代码不显示任何内容，除非：**

**1\. 我把开头的三个未使用的注释行删掉了，它们没有任何冲突。**

**2\. 除非我在 main() 中将“Hello”更改为“Hello world”。**

我正在使用代码块 10.05。

**完整代码：**

```
#include <iostream>
using namespace std;

class stringclass
{
   protected :

      inline bool success()   { failbit = false;  return true; } //line to ignore
      inline bool fail()      { failbit = true; return false; } //line to ignore

   public :

      bool failbit; //line to ignore

      char * mystring;
      long memsize;
      long length;

      void reset();
      void alloc(long newsize);

      void copy(const stringclass & other);

      stringclass(const char str[]);
      stringclass()                          {reset(); }
      stringclass(const stringclass & other) {copy(other); }
      ~stringclass()                         {delete [] mystring;}

      friend ostream& operator << (ostream& out, stringclass & obj)   {out << obj.mystring; return out;}

};

void stringclass::reset()
{
   delete [] mystring;
   mystring = NULL;
   length = 0;
   memsize = 0;
}

void stringclass::alloc(long newsize)
{
   delete [] mystring;

   mystring = new char[newsize];

   memsize = newsize;
   mystring[0] = 0;
   length = 0;
}

void stringclass::copy(const stringclass & other)
{
   if(other.mystring == NULL) reset();
   else
   {
      alloc(other.memsize);
      strcpy(mystring, other.mystring);
      length = strlen(mystring);
   }
}

stringclass::stringclass(const char str[])
   : mystring(NULL), memsize(0), length(0)
{
   if(str == NULL) reset();
   else
   {
      alloc(strlen(str) + 1);
      strcpy(mystring, str);
      length = strlen(mystring);
   }
}

int main()
{
      stringclass str = "Hello";
      stringclass str2 = str;

      cout << "str = " << str << endl;
      cout << "str2 = " << str2 << endl;
      cout << endl;

      system("PAUSE");
      return 0;
} 
```

**代码显示：**

```
str =
str2 =

Press any key to continue... 
```

**代码更改后 1\. ：**

```
str = Hello
str2 = Hello

Press any key to continue... 
```

**代码更改后 2\. ：**

```
str = Hello world
str2 = Hello world

Press any key to continue... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:29:32.480

我刚刚尝试运行它，但遇到了段错误。

阅读您的代码 - 您不确定您的字符串是否为空终止。strcpy() 和 strlen() 期望字符串为空终止。这肯定会导致随机行为。我运行了您的代码，出现了段错误-并且在打印长度时是垃圾值。这很可能是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:38:48.253

您的 stringclass 的复制构造函数没有初始化类成员。

当实现这样的复制构造函数时，它应该可以工作。

```
stringclass::stringclass(const stringclass & other)
: mystring(0), memsize(0), length(0)
{
    copy(other);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:09:26.223

有一个明显的错误：`stringclass::reset()`and `stringclass::alloc()` `delete[]`s`stringclass::mystring`即使它是 NULL 或未初始化。更好的：

```
stringclass::stringclass()
: mystring(0), memsize(0), length(0) {}

void stringclass::reset()
{
   if(mystring) delete[] mystring;
   mystring = 0;
   memsize = 0;
   length = 0;
}

void stringclass::alloc(long newsize)
{
  if(memsize < newsize) {
    if(mystring) delete[] mystring;
    memsize = newsize;
    mystring = new char[memsize];
  }
  length = 0;
} 
```

等等......但**更好：使用`std::string`**.

# ruby-on-rails - Rails has_many :throught breaks

> ID：14184317
> 
> 赞同：0
> 
> 时间：2013-01-06T16:44:09.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model

Ok this is the error that I have

```
Mysql2::Error: Unknown column 'events.user_id' in 'where clause': SELECT `users`.* 
FROM `users` INNER JOIN `events` ON `users`.`id` = `events`.`author_id`  
WHERE `events`.`user_id` = 1 
```

The line that generates this conflict is in the `user` model

```
has_many :events_created, :through => :events, :source => :author 
```

All in all I know that the above error happens because in the `event` model there is the following line (which searches for a `events.user_id` in my db instead of the `events.author_id`

`belongs_to :author, :class_name => "User"`

Is there any way to make it search for the `events.author_id` in this collection?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:48:07.227

```
belongs_to :author, :class_name => "User", :foreign_key => "author_id" 
```

# c++ - 将 Unicode 字符（如“%F6”）解码为 C++ 中的字符串（Mac OS X）

> ID：14184322
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:44:39.967
> 
> 标签：c++, macos, unicode

我在 Mac OS X 中从服务器到客户端 (C++) 接收文件名时遇到问题。我发送了一个序列化对象，它有一个带有文件名的字符指针，有时是一个字符串对象。当我在客户端收到它时，它似乎有字符 %F6 或 %E9。这个问题在 Windows 操作系统中不会出现，即使它是相同的代码。有没有办法将这些 '%' 字符解码回它们在 Mac OS 和 Linux 中的原始形式？

我遇到了一些问题：

ǡ ȅ ȉ

更改服务器中的代码会很困难，因此如果有办法将字符解码回其原始形式，那就更容易了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T21:57:12.327

看起来这些字符正在使用 ISO 8859-1 或一些类似的单字节代码集的假设进行 URL 编码。简单的答案是您需要转换`"%F6"`为`'\xF6'`; 也就是说，您需要将百分比加上两个十六进制数字转换为相应的单字节。

这会给你在 Mac OS X 上留下一个问题，因为文件名通常存储在 UTF-8 中，而不是 ISO 8859-1 等中。例如（我的提示是'Osiris JL:'）：

```
Osiris JL: mkdir x
Osiris JL: cd x
Osiris JL: cp /dev/null é
Osiris JL: cp /dev/null è
Osiris JL: ls | odx
0x0000: 65 CC 80 0A 65 CC 81 0A                           e...e...
0x0008:
Osiris JL: ls
è  é
Osiris JL: ls | cat
è
é
Osiris JL: ls | utf8-unicode
(standard input):
0x65 = U+0065
0xCC 0x80 = U+0300
0x0A = U+000A
0x65 = U+0065
0xCC 0x81 = U+0301
0x0A = U+000A
Osiris JL: 
```

Unicode 字符是 U+0065 LATIN SMALL LETTER E 加上 U+0300 COMBINING GRAVE ACCENT 或 U+0301 COMBINING ACUTE ACCENT。

这不是字母 é 和 è 的通常格式；它们通常被视为带有 ACUTE 的 U+00E9 拉丁小写字母 E 和带有 GRAVE 的 U+00E8 拉丁小写字母 E。

请注意，这`\xF6`在 UTF-8 文本中根本不是有效字节，但在 ISO 8859-1、ISO 8859-15（和 Windows CP1252）中，0xF6 是 ö，U+00F6 带有分音符号的拉丁小写字母 O。

### Mac OS X 上的示例文件创建

这是一个创建一些文件的程序——源文件`x.c`，在 Mac OS X 10.7.5 上运行，使用 GCC 4.7.1 编译：

```
#include <dirent.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

static void create_file(const char *name)
{
    int fd = open(name, O_CREAT|O_TRUNC|O_RDWR, 0644);
    if (fd >= 0)
    {
        close(fd);
        printf("Created file %s OK\n", name);
    }
    else
    {
        printf("Failed to create file %s\n", name);
    }
}

static void print_name(const char *name)
{
    size_t len = strlen(name);
    printf("%-10s = ", name);
    for (size_t i = 0; i < len; i++)
        printf(" %.2X", (unsigned char)name[i]);
    putchar('\n');
}

int main(void)
{
    const char *names[] =
    {
        "a-e\xCC\x80",  /* a-e\u0300 */
        "a-e\xCC\x81",  /* a-e\u0301 */
        "b-\xC3\xA8",   /* b-\u00E8  */
        "b-\xC3\xA9",   /* b-\u00E9  */
        "c-\xF6",
        "c-\xE9",
    };
    enum { NUM_NAMES = sizeof(names) / sizeof(names[0]) };

    for (int i = 0; i < NUM_NAMES; i++)
        create_file(names[i]);

    DIR *dp = opendir(".");
    if (dp != 0)
    {
        struct dirent *entry;
        while ((entry = readdir(dp)) != 0)
            print_name(entry->d_name);
        closedir(dp);
    }
    else
        fprintf(stderr, "error: failed to open current directory\n");

    return(0);
} 
```

这将两种编码用于带有尖音或重音的拉丁小写字母“e”。

它运行干净，但您可以看到文件名被规范化以使用组合重音符号，即使在文件名字符串中使用 U+00E8 或 U+00E9 指定：

```
Osiris JL: ls
è       é       makefile x        x.c
Osiris JL: ./x
Created file a-è OK
Created file a-é OK
Created file b-è OK
Created file b-é OK
Created file c-? OK
Created file c-? OK
.          =  2E
..         =  2E 2E
a-è      =  61 2D 65 CC 80
a-é      =  61 2D 65 CC 81
b-è      =  62 2D 65 CC 80
b-é      =  62 2D 65 CC 81
c-%E9      =  63 2D 25 45 39
c-%F6      =  63 2D 25 46 36
è        =  65 CC 80
é        =  65 CC 81
makefile   =  6D 61 6B 65 66 69 6C 65
x          =  78
x.c        =  78 2E 63
Osiris JL: ls
a-è     a-é     b-è     b-é     c-%E9    c-%F6    è       é       makefile x        x.c
Osiris JL: ls | utf8-unicode
(standard input):
0x61 = U+0061
0x2D = U+002D
0x65 = U+0065
0xCC 0x80 = U+0300
0x0A = U+000A
0x61 = U+0061
0x2D = U+002D
0x65 = U+0065
0xCC 0x81 = U+0301
0x0A = U+000A
0x62 = U+0062
0x2D = U+002D
0x65 = U+0065
0xCC 0x80 = U+0300
0x0A = U+000A
0x62 = U+0062
0x2D = U+002D
0x65 = U+0065
0xCC 0x81 = U+0301
0x0A = U+000A
0x63 = U+0063
0x2D = U+002D
0x25 = U+0025
0x45 = U+0045
0x39 = U+0039
0x0A = U+000A
0x63 = U+0063
0x2D = U+002D
0x25 = U+0025
0x46 = U+0046
0x36 = U+0036
0x0A = U+000A
0x65 = U+0065
0xCC 0x80 = U+0300
0x0A = U+000A
0x65 = U+0065
0xCC 0x81 = U+0301
0x0A = U+000A
0x6D = U+006D
0x61 = U+0061
0x6B = U+006B
0x65 = U+0065
0x66 = U+0066
0x69 = U+0069
0x6C = U+006C
0x65 = U+0065
0x0A = U+000A
0x78 = U+0078
0x0A = U+000A
0x78 = U+0078
0x2E = U+002E
0x63 = U+0063
0x0A = U+000A
Osiris JL: 
```

这意味着在创建包含拉丁小写字母 E WITH GRAVE 的文件的程序中，字符 è 有两种可能的拼写。

关于程序的输出有很多有趣的观察，例如`=`符号的错位。但是一个关键点是，如果你创建的文件名中包含一个无效的 UTF-8 字符序列，每个无效字节都会被 URL 编码为无效字节对应的十六进制值（在磁盘上占用 3 个字节，而`%xx`不是`xx`1，AFAICT）。

### 概括

你必须决定你的源字符集是什么，这样你才能在 Mac OS X 上准确地将字节从 0x80..0xFF 转换为适当的 Unicode 字符，或者你将不得不容忍 Mac OS X 为你创建文件名`%F6`代替`ö`等。文件系统将为您规范化文件名，但您必须为其提供有效的 UTF-8 名称。

# asp.net - 在运行时强制转换

> ID：14184323
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:44:50.607
> 
> 标签：asp.net, razor

我已经阅读了几篇与我的问题相关的帖子，但没有一篇能解决我的特定问题。

下面的类包含一些信息，这些信息将传递给 Razor 引擎进行解析。

```
public class ActionResult
{
    public object ViewModel { get; set; }
    public string View { get; set; }
} 
```

ActionResult.ViewModel 属性将保存一个视图模型类的实例，该实例可以是我的视图所需的任何自定义类型，因为我的视图是强类型的。

我将更新剃须刀引擎。

```
var razorEngine = new RazorEngine(razorScriptFile, _moduleResult.ModuleContext, ""); 
```

然后调用一个渲染方法，它的签名是......

```
public void Render<T>(TextWriter writer, T model){} 
```

我面临的挑战是我不确定如何使用运行时可用的 actionResult 实例中的信息来调用此渲染方法。

如果我对方法进行硬编码，则调用它可以正常工作...

```
razorEngine.Render<MyViewModelType>(writer, actionResult.ViewModel); 
```

但我想我应该做的是将 actionResult.ViewModel 作为 MyViewModelType 或者只是将其转换为 MyViewModelType。但我不确定如何调用 razorEngine.Render() 方法，同时在运行时提供它的类型。

使用.Net 4.5

编辑...

我想我认为我能做的是..

```
Type type = actionResult.ViewModel.GetType();
var model = actionResult.ViewModel as type; 
```

但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:56:09.243

您可以使用反射来实现您所需要的：

```
var viewModel = actionResult.ViewModel;
var method = typeof (RazorEngine).GetMethod("Render").
    MakeGenericMethod(viewModel.GetType());
method.Invoke(razorEngine, new[] {writer, viewModel}); 
```

但正如评论正确地指出的那样，为什么你不能`viewModel`转换为你想要的类型？

编辑：由于唯一的其他重载`Render`是非泛型`Render(TextWriter)`，您可以使用以下代码：

```
var method = typeof (RazorEngine).GetMethods().
    Single(m => m.Name == "Render" && m.ContainsGenericParameters).
    MakeGenericMethod(viewModel.GetType()); 
```

但是，我建议您通过添加额外的检查来使您的代码更安全。如果在新版本中`Render`使用泛型参数获得新的重载，上述代码将抛出异常。您可以使用`First`代替，`Single`但如果如上所述，库获得更新，则可能会在您的代码中产生错误。

# android - 在 Android 中从 ListView 启动选项菜单

> ID：14184336
> 
> 赞同：0
> 
> 时间：2013-01-06T16:45:50.637
> 
> 标签：android, android-listview

首先，我是 Android 编程和 StackOverflow 的新手！！

我动态地创建了一个 ListView，我的意思是，我用文件中的行加载列表。

现在，我想做的是在单击项目时启动菜单，例如选项菜单。

我进行了搜索，最简单的方法是使用 inflate 方法，但是它使用菜单作为参数。但是，我已经使用 OnItemClick 设置了一个侦听器，它使用 AdapterView、View arg1、int arg2 和 long arg3 作为参数，但我需要一个指向 inflate 方法的菜单...：S

这是mainactivity的代码：

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.menu);

   ListView list = (ListView) findViewById(R.id.listView1);

   func = getTurmas();
   list.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, func));

   list.setOnItemClickListener(new AdapterView.OnItemClickListener()  {  

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                //System.out.println("teste");
                MenuInflater inflater = getMenuInflater();
                inflater.inflate(R.menu.menu_showup, null);
               //my problem is here,instead of NULL I should put a menu, but how?

            }  
          });        
} 
```

注意：在菜单文件夹中，我创建了包含 3 个项目的菜单

提前感谢您的帮助

此致，

卡洛兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:13:42.003

**创建`ContextMenu`将让您以最佳方式设置菜单以`listView`**

***这应该可以解决问题。不要忘记： registerForContextMenu(lvUsers);***

```
ListView list = (ListView)findViewById(R.id.listView1);
func=getTurmas();
list.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1,func));
registerForContextMenu(list);

public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)
{
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
}

public boolean onContextItemSelected(MenuItem item) 
{
AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
switch (item.getItemId())
 {
 case R.id.edit:
 editNote(info.id);
 return true;
 case R.id.delete:
 deleteNote(info.id);
 return true;
 default:
 return true;     
 }
 return super.onContextItemSelected(item);
} 
```

* * *

**res/menu/context_menu.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/edit"
      android:title="@string/edit" />
<item android:id="@+id/delete"
      android:title="@string/delete" />
</menu> 
```

# internet-explorer - 如何编写 vba 代码以在新会话中打开 Internet Explorer？

> ID：14184340
> 
> 赞同：3
> 
> 时间：2013-01-06T16:46:03.307
> 
> 标签：internet-explorer, vba, excel, webautomation

几个月以来我一直在努力完成这项工作，如何编写 VBA 代码以在新会话中打开 Internet Explorer 我有一个包含许多登录名的应用程序我需要使用自动化同时打开它们，我用过

```
 set ie=new InternetExplorer 
```

但它会在旧会话中打开 ie，我想为每个登录打开新会话，请帮助我，我搜索了很多，但最终没有任何解决方案。这是我的代码

```
 Function GetIE() As InternetExplorer

  Dim WScript
Dim objShellWindows

 Set objShell = CreateObject("Shell.Application")
 Set objShellWindows = objShell.Windows
 Set WScript = CreateObject("WScript.Shell")

 Dim ieStarted
 ieStarted = False

  Dim ieError
  ieError = False

    Dim seconds
      seconds = 0

  While (Not ieStarted) And (Not ieError) And (seconds < 30)

If (Not objShellWindows Is Nothing) Then
    Dim objIE As InternetExplorer
    Dim IE

    For Each objIE In objShellWindows

        If (Not objIE Is Nothing) Then

            If IsObject(objIE.Document) Then
                Set IE = objIE.Document

                If VarType(IE) = 8 Then

                    If IE.Title = EmptyTitle Then
                        If Err.Number = 0 Then
                            IE.Write LoadingMessage

                            objIE.navigate Sheet1.Login.Text
                        ieStarted = True
                        Set GetIE = objIE

                      Else

                       MsgBox ErrorMessage
                            Err.Clear
                            ieError = True

                            Exit For
                        End If
                    End If
                End If
            End If
        End If

        Set IE = Nothing
        Set objIE = Nothing
    Next
End If

Application.Wait Now + TimeValue("00:00:1")
seconds = seconds + 1
Wend

 Set objShellWindows = Nothing
 Set objShell = Nothing

   End Function 
```

使用此代码，我可以打开浏览器，但遗憾的是，我的网页正在打开的 Outlook 中打开，请帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T17:01:47.937

显然，该`-nomerge`论点将阻止会话合并。

```
Shell("iexplore.exe -nomerge http://www.yoursite.com") 
```

**更新**

根据您的评论，您需要获取 IE 对象。您可能可以使用以下方法：

```
Dim wshShell
Set wshShell = WScript.CreateObject("WScript.Shell")

wshShell.Run "iexplore -nomerge http://www.google.com"

Dim objShell
Set objShell = CreateObject("Shell.Application")

Dim objShellWindows
Set objShellWindows = objShell.Windows

Dim i
Dim ieObject
For i = 0 To objShellWindows.Count - 1
    If InStr(objShellWindows.Item(i).FullName, "iexplore.exe") <> 0 Then
        Set ieObject = objShellWindows.Item(i)
        If VarType(ieObject.Document) = 8 Then
            MsgBox "Loaded " & ieObject.Document.Title
            Exit For
        End If
    End If
Next

Set ieObject = Nothing
Set objShellWindows = Nothing
Set objShell = Nothing
Set wshShell = Nothing 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-01T13:27:28.023

使用 Excel 2010 - 这是我使用的命令按钮。将 google.com 替换为您要在其他浏览器中打开的网站。

```
Private Sub commandname_Click()

'Opens an Explorer with a web site 

Dim IE As InternetExplorer

  Set IE = CreateObject("InternetExplorer.Application")

  IE.navigate ("http://WWW.GOOGLE.COM")

  IE.Visible = True

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-15T19:40:15.493

更改后，[此答案对我有用：](https://stackoverflow.com/a/22787353/7077298)

```
Dim IE As InternetExplorer 
```

到

```
Dim IE As Object 
```

# c++ - C++ 构造函数/析构函数继承

> ID：14184341
> 
> 赞同：71
> 
> 时间：2013-01-06T16:46:06.440
> 
> 标签：c++, inheritance, constructor, destructor

**编辑：答案摘要**

下面，B 是 A 的子类。

这是一个术语问题；ctors 和 dtors**不是**继承的，因为 B 的 ctor/dtor*不会*从 A 的接口借用。一个类至少有一个构造函数，并且只有一个析构函数。

*   **构造函数**：
    *   B 不从 A 继承构造函数；
    *   除非 B 的 ctor 显式调用A 的 ctor*之一，否则来自 A 的默认 ctor 将在 B 的 ctor 主体**之前*自动调用（想法是 A 需要在 B 被创建之前被初始化）。
*   **析构函数**：
    *   B不继承A的dtor；
    *   *退出后*，B的析构函数会自动调用A的析构函数。

*致谢：* 我要特别感谢 Oli Charlesworth 和 Kos 的回答，我将 Kos 的回答设置为解决方案，因为它是我最了解的一个。

* * *

**原帖**

当您在 Google 上搜索“C++ 析构函数继承站点：stackoverflow.com”时，您当前会找到以下帖子：

1.  [构造函数和析构函数继承](https://stackoverflow.com/questions/8103805/constructor-and-destructor-inheritance)：两个信誉超过 30k 的用户说它是继承的，而不是继承的
2.  [虚拟析构函数是继承的吗？](https://stackoverflow.com/questions/2198379/are-virtual-destructors-inherited)：这里没有提到任何指向析构函数没有被继承的内容
3.  [C ++中的析构函数和继承？](https://stackoverflow.com/questions/6856488/destructors-and-inheritance-in-c)：评论似乎表明析构函数是继承的

**Q1：**我从实践中也知道，如果没有明确定义派生类的构造函数，就不能使用与父构造函数相同的原型来初始化派生对象，对吗？

* * *

尽管从帖子中可以清楚地看出析构函数似乎是继承的，但我仍然对拥有 32k 声誉的用户会说它不是这一事实感到困惑。我写了一个小例子，应该可以澄清大家的想法：

```
#include <cstdio>

/******************************/

// Base class
struct A
{
    A() { printf( "\tInstance counter = %d (ctor)\n", ++instance_counter ); }
    ~A() { printf( "\tInstance counter = %d (dtor)\n", --instance_counter ); }

    static int instance_counter;
};

// Inherited class with default ctor/dtor
class B : public A {};

// Inherited class with defined ctor/dtor
struct C : public A
{
    C() { printf("\tC says hi!\n"); }
    ~C() { printf("\tC says bye!\n"); }
};

/******************************/

// Initialize counter
int A::instance_counter = 0;

/******************************/

// A few tests
int main()
{
    printf("Create A\n"); A a;
    printf("Delete A\n"); a.~A();

    printf("Create B\n"); B b;
    printf("Delete B\n"); b.~B();

    printf("Create new B stored as A*\n"); A *a_ptr = new B();
    printf("Delete previous pointer\n"); delete a_ptr;

    printf("Create C\n"); C c;
    printf("Delete C\n"); c.~C();

} 
```

这是输出（使用 g++ 4.4.3 编译）：

```
Create A
    Instance counter = 1 (ctor)
Delete A
    Instance counter = 0 (dtor)
Create B
    Instance counter = 1 (ctor)
Delete B
    Instance counter = 0 (dtor)
Create new B stored as A*
    Instance counter = 1 (ctor)
Delete previous pointer
    Instance counter = 0 (dtor)
Create C
    Instance counter = 1 (ctor)
    C says hi!
Delete C
    C says bye!
    Instance counter = 0 (dtor)  // We exit main() now
    C says bye! 
    Instance counter = -1 (dtor)
    Instance counter = -2 (dtor)
    Instance counter = -3 (dtor) 
```

**Q2：**有人认为它不是遗传的，请解释一下吗？

**Q3：**那么当你调用带有输入的子类的构造函数时会发生什么？是否也调用了超类的“空构造函数”？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-06T17:07:42.813

术语，术语...

好的，我们所说的“Foo 是继承的”是什么意思？我们的意思是，如果类的对象`A`在`Foo`其接口中有，那么作为`B`其子类的类的对象`A`也有`Foo`在其接口中。

*   **构造函数**不是对象接口的一部分。它们直接属于类。类`A`，并且`B`可能提供完全不同的构造函数集。这里没有“被继承”。

    （*实现细节：每个 B 的构造函数调用一些 A 的构造函数。*）

*   **析构**函数确实是每个对象接口的一部分，因为对象的用户负责调用它们（即直接使用`delete`或间接让对象超出范围）。**每个对象只有一个析构函数**：它自己的析构函数，它可能是一个虚拟的。它始终是它自己的，而不是继承的。

    *（实现细节：B 的析构函数调用 A 的析构函数。）*

所以：基础构造函数和派生构造函数和析构函数之间存在联系，但这不像“它们是继承的”。

我希望这能回答你的想法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T16:53:02.200

> **Q1：**我从实践中也知道，如果不为派生类显式定义构造函数，就不能使用与父构造函数相同的原型来初始化派生对象，对吗？

除了您在超类中定义默认构造函数的微不足道的情况外，是的，您是正确的。

* * *

> **Q2：**有人认为它不是遗传的，请解释一下吗？

这可能是术语定义的问题。虽然很明显虚拟析构函数存在并且“按预期”工作，但我们在 C++ 标准（[class.virtual]）中看到：

> **即使不继承**析构函数，派生类中的析构函数也会覆盖声明为虚拟的基类析构函数

（强调我的）

* * *

> **Q3：**那么当你调用带有输入的子类的构造函数时会发生什么？是否也调用了超类的“空构造函数”？

如果您没有显式调用特定的超类构造函数，则将调用默认的超类构造函数（假设它是可见的）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T21:21:15.620

从技术上讲，析构函数是继承的。但一般情况下，继承的析构函数不直接用于派生类；调用它们是因为派生类自己的析构函数调用它们是为了销毁它自己的“基类子对象”作为销毁更大对象的一个​​步骤。并且在您直接在派生对象上使用基类析构函数的特殊情况下，很难避免未定义的行为。

此示例直接来自 C++ 标准 (12.4p12)。

```
struct B {
  virtual ~B() { }
};
struct D : B {
  ~D() { }
};

D D_object;
typedef B B_alias;
B* B_ptr = &D_object;

void f() {
  D_object.B::~B();              // calls B's destructor
  B_ptr->~B();                   // calls D's destructor
  B_ptr->~B_alias();             // calls D's destructor
  B_ptr->B_alias::~B();          // calls B's destructor
  B_ptr->B_alias::~B_alias();    // calls B's destructor
} 
```

如果`~B`不是 的继承成员`D`，则 in 中的第一条语句`f`格式错误。事实上，它是合法的 C++，尽管极其危险。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-06T17:18:35.577

**继承是什么：**重用和扩展现有类而不修改它们的机制，从而在它们之间产生层次关系。

**继承**几乎就像将一个对象嵌入到一个类中。

**当类继承基类时，首先调用**基类的构造函数，然后调用派生类的，析构函数的**调用**顺序相反。

**那么为什么调用基类构造函数（调用不继承可能带有参数/默认值）：**以保证在执行派生类的构造函数时正确构造基类。

**现在调用析构函数（调用不继承）：**当基础对象超出范围时，析构函数被自己调用。所以存在析构函数继承的 np 问题。

**现在你的问题：**

**ans 1 -**是的，你对第一个问题是正确的。
**ans 2** - 因此在对象范围消失后调用析构函数而不是继承。
& **ans 3 -** 如果在派生类中您使用参数进行调用，则只会调用该构造函数，而不会调用其他构造函数。
在创建对象时调用同一对象的 2 个构造函数是没有意义的，因为在创建对象时调用构造函数。它准备新对象以供使用。因此没有使用不同构造函数两次准备对象的逻辑。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-06T17:11:03.533

析构函数**不是**继承的。如果一个类没有定义一个，编译器会**生成**一个。对于析构函数只是调用基类的析构函数的琐碎情况，通常这意味着它的析构函数没有显式代码（模仿继承）。但是，如果一个类的成员带有析构函数，则生成的析构函数会在调用基类的析构函数之前为这些成员调用析构函数。这是继承函数不会做的事情。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-28T18:04:28.733

在您的示例中，您明确调用了析构函数。这是合法的（显然，因为它已编译并运行）但几乎总是不正确的。

对于使用 创建的动态分配的对象`new`，当使用 删除对象时将运行析构函数`delete`。

对于静态分配的对象，它们是通过在函数范围内声明对象而简单地创建的，当对象的范围消失时，析构函数就会运行。也就是说，当`main()`退出时，对象的析构函数将被运行。但是您已经通过手动调用它们来运行这些对象的析构函数！这就是为什么您的示例输出显示计数减少到 -3...您已经为`a`、`b`和运行了析构函数`c`两次。

这是相同的代码，注释显示何时自动运行析构函数：

```
int main()
{
    printf("Create A\n"); A a;
    printf("Delete A\n"); a.~A();

    printf("Create B\n"); B b;
    printf("Delete B\n"); b.~B();

    printf("Create new B stored as A*\n"); A *a_ptr = new B();
    printf("Delete previous pointer\n");
    delete a_ptr;   // Implicitly calls destructor for a_ptr.  a_ptr is class B,
       // so it would call a_ptr->~B() if it existed. Because B is an A, after
       // its destructor is called, it calls the superclass's destructor,
       // a_ptr->~A().

    printf("Create C\n"); C c;
    printf("Delete C\n"); c.~C();
}
// Function exits here at the close brace, so anything declared in its scope is
// deallocated from the stack and their destructors run.
// First `c` is destroyed, which calls c.~C(), then because C is a subclass of A
// calls c.~B() (which doesn't exist, so a blank implementation is used), then
// because B is a subclass of A calls c.~A().  This decrements the counter, but
// the count is wrong because you already manually called c.~C(), which you
// ordinarily shouldn't have done.
// Then `b` is destroyed, in a similar manner.  Now the count is off by 2,
// because you had already called b.~B().
// Lastly `a` is destroyed, just as above.  And again, because you had already
// called a.~A(), the count is now off by 3. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-21T20:41:59.907

```
I would want to express my thoughts. Creating any object is done in two stages: 
```

1\. 为对象分配内存区域。

2.  初始化这个内存区域。

    对象的构造函数是类（对于这个对象）的函数（方法），它初始化分配的内存区域并自动调用。继承是将一个类的对象嵌入到另一个类的对象中。有指尖“这个”“在盖子下”的戏剧。“this”隐式传递给类的方法。

    代码“B b”完成后会发生什么。首先为对象 b 分配内存区域。类 B 有自己的默认构造函数 B()，它会自动调用来初始化这个内存。B() 是函数，因此堆栈帧是为工作而创建的。此构造函数的地址为 b（隐式）。但是 A 的对象必须嵌入到对象 b 中。A 的对象没有名称。B 的构造函数知道 A 的无名嵌入对象也必须创建（因此编译器 C++ 工作）。因此，在 B 的构造函数中调用了用于初始化 A 类的无名嵌入对象的 A 类的构造函数。调用了新的堆栈帧并正在初始化无名对象。之后，堆栈帧被关闭，我们的 B 类对象 b 已经完成。

    析构函数也是类的方法。当我们调用 ~B() 时， b 不会被破坏。析构函数是对象被销毁时自动调用的函数。但这并不意味着当我们调用析构函数时，对象必须被销毁。如果调用 B 的析构函数，则为 1 创建堆栈帧。B 的默认析构函数知道类 A 的无名嵌入对象（因此编译器 C++ 工作）。因此析构函数调用 A 的析构函数。

# vbscript - 将数据从 Excel 推送到 Access 数据库

> ID：14184346
> 
> 赞同：0
> 
> 时间：2013-01-06T16:46:41.717
> 
> 标签：vbscript, excel-2010, ms-access-2010

我正在寻找一种将数据从 Excel 推送到 Access 数据库的方法。我找到了下面的代码，但我不知道如何改进它。

```
Dim wsQS As Worksheet
Dim sConnect As String
Dim sCommand As String
Dim adoCn As ADODB.Connection

Set wsQS = Worksheets("QueryStrings")
Set adoCn = New ADODB.Connection
sConnect = wsQS.Range("rngConnect").Value
sCommand = wsQS.Range("rngCommand").Value

' Get ADO connection to the workbook
adoCn.Open sConnect
' Append data from Excel worksheet
adoCn.Execute sCommand

' Close the connection to the workbook
adoCn.Close
Set adoCn = Nothing
Worksheets("CopyToDB").Range("DataToExport").Offset(1, 0).ClearContents
Worksheets("Proj DB").Activate

Set wsQS = Nothing 
```

***建筑学***

```
 ------------------
                |       web        |
                |       page       |
                 ------------------
                          |
                          |
                          |
            Python and BS4(Data Extraction)
                          |
                          |
                          |
                 ------------------                               
                |       Excel      |
                |       data       |
                 ------------------
                          |
                          |
                          |
             Python to Push Data(Oracle/Access)
                          |
                          |
                          |
                 ------------------
                |       Any        |
                |       DB         |
                 ------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:08:45.200

可以从几乎任何地方（VBScript、VBA）运行并在 Excel 中的 Access 中创建表格的东西怎么样？您几乎可以运行任何有效的 SQL。

```
Set cn=CreateObject("ADODB.Connection")

cn.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=z:\docs\test.accdb"

sSQL = "SELECT * INTO FromExcel " _
     & "FROM [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xls].[Sheet1$]"

cn.Execute sSQL, recs

MsgBox "Records: " & recs 
```

**喷射 SQL**

[`Fundamental Microsoft Jet SQL for Access 2000`](http://msdn.microsoft.com/en-us/library/aa140011%28office.10%29.aspx)
[`Intermediate Microsoft Jet SQL for Access 2000`](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)
[`Advanced Microsoft Jet SQL for Access 2000`](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T13:12:11.827

我已经尝试过@Remou 的建议，但从未设法让它与我的配置（Office 2010）一起使用。这是我从[Microsoft Dev Forums](http://social.msdn.microsoft.com/Forums/office/en-US/8cc6b42a-be07-4a3b-ab96-5eb873228114/push-excel-data-to-access?forum=exceldev)*窃取*的内容，它非常适合我使用每种类型的 SQL 查询（选择/插入/删除等）

```
Public Sub updateAccess()

Dim con As New ADODB.Connection
Dim connectionString As String

Dim sql, newTable As String
Filename = "C:\test.accdb"
connectionString = "Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" & Filename

con.Open connectionString

' Save current table ("BEFORE") to another table ("BEFORE_yyyymmdd_hh_mmss")
newTable = "BEFORE_" & Format(Date, "yyyymmdd") & "_" & Format(Now, "hhmmss")
sql = "SELECT CODE, STORE INTO " & newTable & " FROM BEFORE"
con.Execute sql

' Delete rows of current table ("BEFORE")
sql = "DELETE FROM BEFORE"
con.Execute sql

' Insert new rows into current table ("BEFORE") from my Excel Sheet
sql = "INSERT INTO BEFORE ([CODE], [STORE]) " & _
      "SELECT * FROM [Excel 8.0;HDR=YES;DATABASE=" & ThisWorkbook.FullName & "].[" & ThisWorkbook.Sheets("CODE_BY_STORE").Name & "$]"
con.Execute sql

con.Close
Set con = Nothing

End Sub 
```

这就像一个魅力！希望这可以帮助...

# php - 使用分页为博客文章创建“后退”/“上一个”链接的好方法

> ID：14184352
> 
> 赞同：0
> 
> 时间：2013-01-06T16:47:17.203
> 
> 标签：php

**这篇文章已关闭，但我想我可以通过一些简单的分页来分享我解决这个问题的方法。**

我将在此处显示的内容将完整发布，以便其他人更容易使用它，如果他们卡在与我相同的部分。

我在这里使用的是数据库中的 id 来获取我的帖子，你可以使用 title 之类的，我也对其进行排序以首先显示第一个帖子。如果您想显示最后一个，只需将底部的 ASC 更改为 DESC。

```
<?PHP
//Connect to the database
//Add your file here

//Get a record count of our database for pagination
$record_count = $db->query("SELECT * FROM posts");
//Number of posts displayed
$per_page = 2;
//Number of pages
$pages = ceil($record_count->num_rows/$per_page);
//Get page number
if(isset($_GET['p']) && is_numeric($_GET['p'])) {
$page = $_GET['p'];
}else{
$page = 1;
}
if($page<=0)
$start = 0;
else
//Make the controls to switch pages
$start = $page * $per_page - $per_page;
$prev = $page - 1;
$next = $page + 1;
//Display the blog posts on the page
$query = $db->prepare("SELECT post_id, title, LEFT(message, 100) AS message, posted FROM posts ORDER BY post_id ASC LIMIT $start, $per_page");
$query->execute();
$query->bind_result($post_id, $title, $message, $posted);
?> 
```

然后无论你喜欢什么 html 代码，divs，p 和什么不是，最后我只是将它们呼应出来，这里缺少一些代码，但这只是我自己的代码，用于显示我自己的博客文章及其变量。要在底部获取下一个和上一个链接，请使用：

```
 <?PHP
            if($prev > 0) {
                echo "<a href='index.php?p=$prev'>Prev</a>";
            }
            if($page < $pages) {
                echo "<a href='index.php?p=$next'>Next</a>";
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:06:40.983

假设您的`id`字段是您的主数字键，而不是执行`id++`或`id--`获取下一个/上一个项目，只需使用当前 id 作为参考。这将阻止您访问`id`实际上不存在的 's。

**当前**项目的 SQL -

```
SELECT * FROM blogposts WHERE id = '$id' 
```

**下**一项的 SQL -

```
SELECT * FROM blogposts WHERE id > '$id' ORDER BY id ASC LIMIT 1 
```

**上**一项的 SQL -

```
SELECT * FROM blogposts WHERE id < '$id' ORDER BY id ASC LIMIT 1 
```

如果您在最后一项/第一项，并且您请求上一个/下一项，这些查询将返回空结果，因为没有`id`小于`1`或大于最大的项`id`。

请注意，我使用`LIMIT`关键字来确保我只得到一件物品作为回报；具有更大或更小`id`价值的项目。查询已经按`id`字段排序，因此我们将从表中获取顺序项。

# c++ - 相交数据结构

> ID：14184367
> 
> 赞同：2
> 
> 时间：2013-01-06T16:49:38.020
> 
> 标签：c++, memory

我有以下结构定义：

```
struct vec { // 2-dim vector
    long d[2];
};
struct lineSegment { // a 2D-LineSegment with start/end points A, B
    vec A, B;
};
struct polygon { // a 2D-Polygon
    vec *points;
    polygon(unsigned int points) {
        vec = new vec[points];
    }
    polygon() {}
    ~polygon() { delete[] vec; }
}; 
```

我的任务是编写一个方法 isPointInside(const vec &A, const polygon &P) 来确定给定点 A 是否在给定多边形 P 内。

**我的实现**
首先，我的方法创建了一条线段 L，从 A 开始，到 B 点结束，这绝对是在多边形之外。其次，它计算与线段 L 相交的多边形的所有边界。如果多边形 P 的计算边界是奇数，则给定点 A 恰好在给定多边形 P 内。

我用来找出两条线段是否相交的方法具有以下函数声明：

```
bool intersect(const line&, const line&); 
```

多边形是定义多边形的所有角点的数组。具有 n 个角点的多边形 P

```
P = (P1, P2, ..., PN) 
```

具有以下边界：

```
(P1, P2), (P2, P3), ..., (P(N-1), PN), (PN, P1) 
```

要遍历所有边界，我想使用“const lineSegment”指针 polyBorder，它指向 polyBorder.points 数组（即 vec 类型）内部，每次迭代后都会增加 sizeof(vec)。

在每次迭代中（第 n 次迭代除外）我想调用

```
intersect(L, *polyBorder); 
```

**问题**
此迭代是否适用于任何 c/c++ 编译器，或者某些编译器是否为 vec 和 lineSegment 存储了额外的数据，因此这种方法不适用于这些？

意思是，这种指针的使用是在 c/c++ 标准中明确定义的，还是这个实现特定的？

// 编辑
一些示例代码（未经测试，可能无法正常工作！）：

```
polygon test(4);
// initialise the points in test.points

const lineSegment *polyBorder = reinterpret_cast<lineSegment*>((const void*)test.points); // first line
// do something

polyBorder = reinterpret_cast<const lineSegment*>(((const void*)polyBorder)+sizeof(vec)); // second line
// do something

polyBorder = reinterpret_cast<const lineSegment*>(((const void*)polyBorder)+sizeof(vec)); // third line
// do something 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:59:49.220

不确定我是否理解这个问题。您是在问是否`sizeof(vec)`包含编译器包含的附加数据？是的，它确实。`sizeof(vec)`但是，如果您的指针是 type ，您只会增加`char*`。当指针的类型为 时`type*`，对指针的算术运算将其视为指向元素数组`type`，并对整个元素进行操作。所以你不需要使用`sizeof`.

更新：

现在我已经看到您的问题编辑，我想我更好地理解它。基本问题是：

给定一个数组：

```
T* array[N] 
```

和一个结构类型：

```
struct S {
  T A, B;
}; 
```

您可以使用`S*`指针访问数组中的一对连续元素吗？

我认为这应该有效。但是，您不应该使用该`sizeof`技术来生成指针，您应该使用普通的指针算法，直接在类型之间进行强制转换：

```
const lineSegment *polyBorder = (lineSegment*)test.points; // first line
polyBorder = (lineSegment*)(((vec*)polyBorder))+1); // second line
polyBorder = (lineSegment*)(((vec*)polyBorder))+1); // third line 
```

这使得类型双关语清晰，并利用 C/C++ 进行指针运算的方式，自动乘以幕后元素的大小。

# c++ - 为什么 DrawThemeText 不能正常工作？

> ID：14184372
> 
> 赞同：3
> 
> 时间：2013-01-06T16:50:02.857
> 
> 标签：c++, winapi, visual-styles

我正在尝试在窗口上绘制主题文本。然而，我总是得到像粗体 MS Sans Serif 没有抗锯齿的东西，而不是主题字体。为什么会这样？

* * *

**编辑：**

应用上述更改后，代码如下所示：

```
INITCOMMONCONTROLSEX ctrl;
ctrl.dwSize = sizeof(ctrl);
ctrl.dwICC = ICC_TREEVIEW_CLASSES;
InitCommonControlsEx(&ctrl); 
```

(...)

```
SetWindowTheme(mainWinHWND, L"explorer", nullptr); 
```

(...)

```
case WM_PAINT:
    {
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &ps); 

        HTHEME theme = OpenThemeData(hwnd, L"TREEVIEW");
        RECT rect;
        rect.left = 100;
        rect.top = 100;
        rect.right = 200;
        rect.bottom = 200;
        DrawThemeText(theme,
            hdc,
            TVP_TREEITEM,
            TREIS_NORMAL,
            L"Ala ma kota",
            11,
            DT_VCENTER | DT_LEFT,
            0,
            &rect);
        CloseThemeData(theme);

        EndPaint(hwnd, &ps); 
        return 0L; 
    } 
```

效果还是一样的。

![](../Images/6248c42ebacfdf434aef8e8f327322d7.png)

* * *

整个代码（~100 行）： http: [//pastebin.com/ZheZyrWy](http://pastebin.com/ZheZyrWy) 注意，它只是一个概念验证程序，这就是为什么我没有包括任何错误检查。但 DrawThemeText 返回 0（成功）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:25:53.070

好吧，您快到了，您将获得 Explorer 主题样式。只是一个错误的假设，树视图的主题*没有*规定字体。例如，在 .NET TreeView 类中非常明显，您可以任意分配其 Font 属性，您将获得请求的字体。从逻辑上讲，您没有在任何地方指定字体大小，因此主题 api 没有合理的方法来猜测适当大小的字体。现在，您只是获得在设备上下文中选择的默认字体。

您*必须*选择要使用的字体。

# php - 如何存储在客户端机器上并重用 php/mysql 查询？

> ID：14184373
> 
> 赞同：1
> 
> 时间：2013-01-06T16:50:19.030
> 
> 标签：php, javascript, html

对不起，这可能是一个非常基本的问题，但我是从网上自学的，不知道还能问谁。

我想知道是否有办法对远程服务器执行 php/mysql 查询，然后将结果返回给客户端机器。我计划使用用户访问的查询结果（2D）和要执行的另一个查询。它必须通过 ajax 调用或以更好的方式由 javascript 脚本访问

我想这样做，因为我想“加速”网站，并限制用户在执行查询时丢失的时间。

示例：用户想要查看公司 X 的所有员工的一些数据。Php 选择公司 X 的所有员工并将结果“发回”到机器，并存储在其中。之后，用户可以只过滤男性员工，或者有车，或者男性有车

编辑：据我所知，这会将整个查询显示为页面上的表格，并且它们将根据用户输入进行过滤。

我使用类似的解决方案，显示我需要显示的表格列，并将其他列添加为显示数据的 div 内的自定义 div 值。

```
<div class="card selected" id="26912" name="Afflicted Deserter" cost="3R" dualface="Werewolf Ransacker" exp="DKA" type="Creature - Human Werewolf">Afflicted Deserter || Werewolf Ransacker</div> 
```

我使用 onclick 事件来选择 div 并将 div 值存储为变量。

```
 SelectCard = function  (card) {
    $('body').data({"currentID":$(card).attr('id'), "currentNAME":$(card).attr('name'), "currentCOST":$(card).attr('cost'), "currentTYPE":$(card).attr('type'), "currentEXP":$(card).attr('exp')})
    $('#cardIMG').attr('src',"mtg-img/" + $(card).attr('exp') + "/" + $(card).attr('name') + ".full.jpg");
  } 
```

我将隐藏应用于我不想使用的所有条目。我还在向上/向下箭头上使用代码选择下一个/上一个 div。

```
MoveArrows = function  () {

$(document).keydown(function(e){

      if (e.keyCode == 40) { 
        if(chosen === "") {
            chosen = 0;
        } else if((chosen+1) < $('div.card').length) {
          // testvalue = $('div.card').next(".hidden").index();
          // console.log("testvalue:", testvalue)
            chosen++; 
        }
        $('div.card').removeClass('selected');
        while ($('#' + parentDiv).find('div.card').eq(chosen).hasClass('hidden')){
          chosen++;
        }
        $('#' + parentDiv).find('div.card').eq(chosen).addClass('selected');
        SelectCard( $('#' + parentDiv).find('div.card').eq(chosen))
        return false;
    }
    if (e.keyCode == 38) { 
        if(chosen === "") {
            chosen = 0;
        } else if(chosen > 0) {
            chosen--;            
        }
        $('div.card').removeClass('selected');
        while ($('#' + parentDiv).find('div.card').eq(chosen).hasClass('hidden')){
          chosen--;
        }
        $('#' + parentDiv).find('div.card').eq(chosen).addClass('selected');
        SelectCard( $('#' + parentDiv).find('div.card').eq(chosen))
        return false;
    }
})
} 
```

执行循环以查找下一个非隐藏 div。

我的问题是，当条目太多时，向上/向下单击需要一段时间才能选择下一个 div。

数据表如何处理过滤结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:52:37.457

在 javascript 中进行客户端处理的一个选项是优秀的数据表[jQuery](http://www.datatables.net)插件。这将实现您删除额外的服务器调用以对原始查询进行排序或过滤的目标。

如果您希望数据在会话之间保持不变，您可能需要考虑[HTML5 Web Storage](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T16:56:13.723

好吧，您可以获取所有数据并将其呈现在某个表中，然后该表具有排序、搜索等功能。为此，我使用[http://www.datatables.net/](http://www.datatables.net/)。

# meteor - Meteor：资源解释为图像，但使用 MIME 类型 text/html 传输

> ID：14184379
> 
> 赞同：4
> 
> 时间：2013-01-06T16:50:57.463
> 
> 标签：meteor, handlebars.js

我正在使用 Meteor 0.5.2 并在 Chrome 中为每个由模板助手生成其 src 的图像收到以下警告：

```
Resource interpreted as Image but transferred with MIME type text/html:
"http://localhost:3000/images/". domutils.js:126 
```

在我的模板中，我定义了这样的图像：

```
<img src="images/{{userOwnerAvatar}}" alt="" width="32" height="32" /> 
```

我正在使用模板辅助函数从 Mongo 中提取准确的图像名称（例如“avatar.jpg”）。所有图像在浏览器中都可见并正确加载。

当我直接在模板中输入图像名称（硬编码图像名称）时，警告就会消失。

例如

```
<img src="images/avatar.jpg" alt="" width="32" height="32" /> 
```

为什么我不断收到此警告，我该怎么办？

谢谢，弗拉基米尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T13:07:33.440

相关，虽然没有具体回答上述问题，但我收到了类似的警告/错误消息。我的 CSS 是这样的：

```
.myClass a{
    background: url(my-image.png) top left no-repeat;
} 
```

通过将其更改为（注意引号和正斜杠）来修复它：

```
.myClass a{
    background: url('/my-image.png.png') top left no-repeat;
} 
```

我不知道为什么引号和斜线对 Meteor（或 Handlebars）很重要......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:14:07.087

{{userOwnerAvatar}} 的值没有正确解析，这就是为什么您的浏览器说“http://localhost:3000/images/”被解释为 text/html（请注意其中缺少实际的图像文件名网址）。修复您的模板助手:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T06:18:00.053

这是 Chrome 生成的不安全内容警告，表示服务器`Content-type`在 HTTP 标头中发送错误或丢失。有时在加载自定义 Javascript 或 CSS 等时也会发生这种情况。

我也遇到过同样的问题。在这里，浏览器期望`Content-type: image/jpeg`，但它被解释为`text/html`。因为你没有`content-type`在你的助手中指定。

这些只是对运行应用程序没有影响的类型警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-11T09:27:03.483

我有一个类似的问题，因为能够通过将我的 img 文件夹移动到 Meteor 项目的公用文件夹中来解决它，以便直接提供它。我的源网址仍然是`src="img/pic.png"`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-05T07:22:22.257

尽管图像根本没有显示，但我在使用 Iron 路由器包时遇到了类似的问题。我的图像在 public/ 目录中。如果我使用 url `http://localhost:3000/tracker`，它们会正确显示，但我的路径页面`http://localhost:3000/tracker/item`无法正确加载图像并给我上述错误。

我正在使用以下html：

```
<img src="{{this.itemImage}}" alt="{{this.itemName}}"> 
```

当我`{{this.itemImage}}`像这样添加'/'之前：

```
<img src="/{{this.itemImage}}" alt="{{this.itemName}}"> 
```

图像将正确加载，并且不会出现错误。

# actionscript-3 - Actionscript 测验：围绕所选选项画圈

> ID：14184383
> 
> 赞同：1
> 
> 时间：2013-01-06T16:51:23.210
> 
> 标签：actionscript-3, flash

使用此功能，显示多项选择题和答案。但是，当用户单击 A、B、C、D、E 的“答案选项”时，我想要像这样[http://www.cambridge.org/other_files/Flash_apps/inuse/EVUElementaryTest/EVUElementaryIndex.htm](http://www.cambridge.org/other_files/Flash_apps/inuse/EVUElementaryTest/EVUElementaryIndex.htm)围绕选项的字母画一个圆圈。 这可能吗？

```
 function showQuestions(index,limit ):void{

                var mainContainer:Sprite = new Sprite();
                mainContainer.name="qContainer";
                //mainContainer.graphics.beginFill(0xffffff);
                mainContainer.graphics.drawRect(0,0,700, 500);
                mainContainer.x=(stage.stageWidth - 700) /2;
                mainContainer.y=(stage.stageHeight - 500) /2;
                addChild(mainContainer);

                for (i=index; i < (index+limit); i++) {

                    var questionTextField = new TextField();
                    mainContainer.addChild(questionTextField);

                    questionTextField.text=i + "  " +  qnodes[i].QUESTION.text();
                    questionTextField.name=i;
                    questionTextField.width=400;
                    questionTextField.x= 0;
                    questionTextField.y=i%limit * 100;

                    var numberOfAnswers= (qnodes[i].OPT.length())
                    var j:Number;

                    for (j=0; j < numberOfAnswers; j++) {

                        var answerTextField = new TextField();
                        mainContainer.addChild(answerTextField);

                        var optionLetterMc = new MovieClip();

                        optionLetterMc.name="Answer"+i;
                        optionLetterMc.x=((j%3) * 250)   ;
                        optionLetterMc.y= (i%limit * 100) + 20 + (int(j / 3) * 20) ;
                        optionLetterMc.addEventListener(MouseEvent.CLICK, OnAnswerSelected);
                        optionLetterMc.addEventListener(MouseEvent.CLICK, saveStudentAnswer);
                        mainContainer.addChild(optionLetterMc);

                        var optLetterTextField = new TextField();
                        optionLetterMc.addChild(optLetterTextField);
                        optLetterTextField.text=optionLetters[j];
                        optLetterTextField.name=i;

                        answerTextField.autoSize = TextFieldAutoSize.LEFT;
                        answerTextField.x=((j%3) * 250) + 20 ;
                        answerTextField.y=  (i%limit * 100) + 20 + (int(j / 3) * 20) ;
                        answerTextField.text=qnodes[i].OPT[j].text();

                    }
                }

                    var btn:Button = new Button();
                    btn.label = "Next";
                    btn.x=(stage.stageWidth - 300) /2;
                    btn.y=500;
                    mainContainer.addChild(btn);
                    btn.addEventListener(MouseEvent.CLICK, nextQuestions);

            } 
```

更新：我所做的更改：我创建了**optionLetterMc**，然后在里面添加了 optionTextField。它们被命名为**optionLetterMc.name="Answer"+i;**

这是你的部分（改变了一点）。

```
 var mSelectedAnswer:MovieClip;

 Mouse.hide();
 Pencil.mouseEnabled = false;

 stage.addEventListener(MouseEvent.MOUSE_MOVE, OnMouseMove);
 //Answer1.addEventListener(MouseEvent.CLICK, OnAnswerSelected);

 function OnMouseMove(e:MouseEvent):void
  {
 Pencil.x = stage.mouseX;
 Pencil.y = stage.mouseY;
  }

  function OnAnswerSelected(e:MouseEvent):void
  {

mSelectedAnswer = e.currentTarget as MovieClip;
DeselectAll();
stage.removeEventListener(MouseEvent.MOUSE_MOVE, OnMouseMove);
Pencil.addEventListener(Event.ENTER_FRAME, OnAnswerEnterFrame);
Pencil.gotoAndPlay("Draw_Circle");
//trace(mSelectedAnswer.name);
}

function OnAnswerEnterFrame(e:Event):void
{
if(e.target.currentFrame == e.target.totalFrames)
{

    trace(mSelectedAnswer.name);
    mSelectedAnswer.gotoAndStop("Selected");
    Pencil.removeEventListener(Event.ENTER_FRAME, OnAnswerEnterFrame);
    stage.addEventListener(MouseEvent.MOUSE_MOVE, OnMouseMove);
}
}

function DeselectAll():void
{
mSelectedAnswer.gotoAndStop("Normal");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T23:54:29.107

最简单的方法是制作铅笔运动的动画，并在铅笔中相应地标记动画`MovieClip`并在第一帧停止。然后你只需将它的坐标更改为需要的坐标并执行以下操作：

```
Pencil_MovieClip.addEventListener(Event.ENTER_FRAME, onPencilEnterFrame);
Pencil_MovieClip.gotoAndPlay("DrawCircle");

function onPencilEnterFrame(e:Event):void 
{
    if(Pencil_MovieClip.currentFrame == Pencil_MovieClip.totalFrames) 
    {
        DeselectAllAnswers();
        ClickedAnswer_MovieClip.gotoAndStop("selected");
        Pencil_MovieClip.removeEventListener(Event.ENTER_FRAME, onPencilEnterFrame);
    }
} 
```

您需要一个输入帧事件侦听器来对铅笔动画完成做出反应。当动画结束时，您将可选择的答案移动`MovieClip`到另一个标有“已选择”的框架，该框架具有该圆形图形。

`DeselectAllAnswers`函数只会对所有可选择的答案说去默认框架，那里没有选择圈。

我认为 ClickedAnswer_MovieClip 是`MovieClip`被点击的可选择答案。

编辑：顺便说一句，我编写的所有这些代码都是可选择的答案`MovieClip`点击处理程序。

编辑2：如果我的描述还不够，这是我放在一起的一个例子：[LINK](http://db.tt/83QwMsN8)

# c++ - 替换 && 和 || 在 C++ 中使用 AND 和 OR

> ID：14184389
> 
> 赞同：1
> 
> 时间：2013-01-06T16:52:27.173
> 
> 标签：c++, logical-operators

> **可能重复：**
> [C++ and,or,not,xor 关键字](https://stackoverflow.com/questions/2393673/c-and-or-not-xor-keywords)

我认为标题说明了这一点，但要扩展一点：

有没有办法替换 && 和 || 代码中的运算符带有“AND”和“OR”。它使它更具可读性，并且由于我是该项目的唯一工作人员，我很好奇这是否可以完成。这种方式而不是写

`if(is_close_enough(enemy) && attackReady(attack))`

我可以用

`if(is_close_enough(enemy) AND attackReady(attack))`

我使用 VS2010 作为我的 IDE 和 C++ 作为我的语言。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T16:55:51.197

该语言已经定义`and`和`or`关键字，以及许多其他用于此目的的关键字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T16:54:25.313

您可以使用预处理器，但请不要。它使您的代码可读性*降低，而不是更多。*

```
#define AND &&
#define OR  || 
```

如果您想使用具有不同关键字的语言，只需使用具有不同关键字的语言即可。这种黑客行为只会以眼泪收场。

# objective-c - 将单元附件保存到 NSUserDefaults

> ID：14184397
> 
> 赞同：0
> 
> 时间：2013-01-06T16:52:56.297
> 
> 标签：objective-c, cocoa-touch, nsuserdefaults

我之前问过一个关于保存电池配件状态的问题，在[这里得到了回答。](https://stackoverflow.com/questions/14073819/saving-state-of-uitableview-cell-accessory)我现在正在玩 NSUserDefaults。我已经在我的应用程序中成功保存了许多选项，但似乎无法将单元配件的状态保存到 NSUserDefaults。

经过多次尝试，我得出的结论是我不知道要保存什么或在哪里保存以及在哪里调用保存的选项。

谁能指出我正确的方向？

谢谢，

编辑：虽然我知道变量可能需要转换，但我很难理解需要转换的内容和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:23:22.813

在您引用代码片段的问题中，使用名为`_accessoryStyle`. 变量的类型为`NSMutableArray`。假设您仍然有这个变量，您可以简单地将其内容保存到用户默认值，如下所示：

```
NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setObject:self._accessoryStyle forKey:@"aKeyName"]; 
```

如果您以后想检索数据，可以这样做：

```
NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
NSArray* immutableData = [userDefaults arrayForKey:@"aKeyName"]];
[self._accessoryStyle setArray:immutableData]; 
```

检索稍微复杂一些，因为`arrayForKey:`返回的是不可变的`NSArray`，而不是`NSMutableArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:07:25.947

对于不是 NSData、NSDate、NSString、NSArray、NSDictionary、NSNumber 的对象（因为它们不能保存在 plist 文件中），您可以使用这些宏：

```
#define SetDefaultObjectForKey(object, key) [ [NSUserDefaults standardUserDefaults] setObject: [NSKeyedArchiver archivedDataWithRootObject: object] forKey: key]

#define GetDefaultObjectForkey(key) [NSKeyedUnarchiver unarchivedObjectWithData: [ [NSUserDefaults standardUserDefaults] objectForKey: key] ] 
```

因此，您在保存时将它们转换为 NSData，并在读取时将它们从 NSData 解码为其原始类型，前提是该对象实现了 NSCoding 协议。如果不是这样，您应该提供一个实现。

# android - 更改列表视图项目中线条的颜色

> ID：14184400
> 
> 赞同：0
> 
> 时间：2013-01-06T16:53:40.577
> 
> 标签：android

在普通列表视图中，分隔线被认为是，但是当我切换到全屏模式时，它变得太暗了。如何控制线条的颜色？

为了便于理解，请在此处查看图片：[https ://dl.dropbox.com/u/15065300/layout.png](https://dl.dropbox.com/u/15065300/layout.png)

活动代码 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="vertical"
    tools:context=".ProductList" >

<TextView
        android:id="@+id/textView0"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#123456"
        android:drawableLeft="@drawable/ic_launcher"
        android:drawablePadding="6sp"
        android:text="@string/app_name"
        android:gravity="center_vertical"
        android:padding="8sp"
        android:textSize="22sp"
        android:textStyle="bold"
        android:textColor="#ffffff"/> 

        <!-- List View -->
    <ListView
        android:id="@+id/list_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#ffffff"/>

</LinearLayout> 
```

List_Item 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <!-- Product Name -->

     <com.examdple.customproduct.CustomTextView

            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#111111"
            android:paddingTop="10sp"
            android:id="@+id/product_list"
            android:paddingLeft="20sp"
            android:paddingBottom="5sp"
            android:textSize="16sp" />

</LinearLayout> 
```

整个项目在这里[http://www.mediafire.com/?umt91j6acq8b6gm](http://www.mediafire.com/?umt91j6acq8b6gm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:58:56.643

你应该使用`android:divider`属性：

```
<ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff"
    android:divider="#FFFF0000"
    android:dividerHeight="1dip"/> 
```

# android - Android/Windows 混合应用程序

> ID：14184403
> 
> 赞同：1
> 
> 时间：2013-01-06T16:53:46.687
> 
> 标签：android, windows, language-agnostic, cross-platform

我想看看我是否可以为 Windows 和 android 做一个“混合”应用程序，作为一个黑客（在好的意义上）项目。我想知道我是否可以做一个程序，以便我可以将它从 Windows 复制粘贴到 android。这可能吗？我试图用 .jar 文件来制作它，因为它们在两个系统中都使用，但我没有成功。

我在这里的第一个线索是，如果我可以将 Windows 代码和 Android 代码分开在不同的部分，并使用一个混合代码启动器来决定应该运行哪个代码，那将是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T16:59:28.350

您可以重用您正在编写的大量代码。如果您使用的是 MVC（模型、视图、控件），您可以重用模型中的所有代码作为控制部分，并且在大多数情况下仅交换视图方面（不包括系统相关代码）。

也就是说，您当然必须创建两个不同的项目，然后在调用编译器时决定您将生成哪个 .jar 文件。适用于 Windows 或 Android。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:00:33.560

虽然两者都可能支持 .jar 文件，但它们是非常不同的平台。主要区别之一是 Android 使用 Dalvik VM，而 Windows 使用 Java VM。因此，Android 无法运行原始 jar 文件。它们必须首先转换为 dex 字节码版本。

此外，两个平台都在不同程度上支持核心 Java 类，并且许多 Windows 上可用的 Java 类在 Android 上不可用。

除此之外，可以将逻辑代码（或任何不使用平台特定类的代码）移动到库项目中，然后可以将其作为 jar 库包含在 Android 和 Windows 项目中。

# python - Windows 上的进程之间是否有异步通信方式？

> ID：14184406
> 
> 赞同：0
> 
> 时间：2013-01-06T16:54:13.833
> 
> 标签：python, windows, signals, subprocess

一开始我必须再次指出我正在寻找的解决方案必须在 Windows 上工作，对此感到抱歉。我想要实现的是进程之间的异步通信。好吧，我的问题要复杂得多，但我会解释它的本质。我有两个 python 文件：

```
test.py
import subprocess
import signal
import time

sent_signal = signal.SIGTERM

if __name__ == "__main__": 

    process = subprocess.Popen( "python sub_test.py" )
    time.sleep( 2 )
    process.send_signal( sent_signal ) 
```

和

```
sub_test.py
import signal

received_signal = signal.SIGTERM
event = False

def signal_handler( signum, frame ):
    event = True

if __name__ == "__main__":

    signal.signal( signal.SIGTERM, signal_handler )

    while True:
        if event:
            print "Event"
            event = False
        else:
            print "Working..." 
```

正如 python 文档所说，sent_signal**只能**是：，`SIGTERM`或`CTRL_C_EVENT`，当`CTRL_BREAK_EVENT`received_signal **（**我可以为其定义处理程序的信号）可以是：，，，，，，或。因此，乍一看，这是我可以在进程之间进行通信的信号，但是在 Windows 上发送不是发送信号，而是调用函数。因此，正如我所见，没有办法使用信号进行通信。在这一点上，我没有想法，我该如何解决我的问题。使用的同步方式不是一个选项，因为我需要实时打印输出。`SIGABRT``SIGFPE``SIGILL``SIGINT``SIGSEGV``SIGTERM``SIGTERM``SIGTERM``terminate()``Popen.communicate()`

所以我的问题是：Windows 上的进程之间是否有异步通信方式？

# javascript - Socket.IO，导航选项卡有问题

> ID：14184409
> 
> 赞同：1
> 
> 时间：2013-01-06T16:54:39.840
> 
> 标签：javascript, node.js, session, tabs, socket.io

我正在使用 Socket.IO，但我发现了一个大问题。我正在尝试进行实时聊天：一个用户登录，选择另一个连接的用户并交谈，所以（...）

```
var http = require('http'),
    fs   = require('fs'),
    path = require('path'),
    io,
    server;

var PORT = 3000,
    HOST = '127.0.0.1';

server = http.createServer( function ( request, response ) {

    var filePath = '.' + request.url,
        extName,
        contentType;

    if (filePath == './') {
        filePath = './index.html';
    }

    extName = path.extname(filePath);
    contentType = 'text/html';

    switch ( extName ) {
        case '.js':
            contentType = 'text/javascript';
        break;
        case '.css':
            contentType = 'text/css';
        break;
    }

    fs.exists( filePath, function ( exists ) {

        if ( exists ) {
            fs.readFile( filePath, function ( error, content ) {
                if ( error ) {
                    response.writeHead( 500 );
                    response.end();
                }
                else {
                    response.writeHead( 200, { 'Content-Type': contentType });
                    response.end( content, 'utf-8' );
                }
            });
        }
        else {
            response.writeHead( 404 );
            response.end();
        }
    });

}).listen( PORT, HOST );

io = require('socket.io').listen( server );
var Users = [ ]; // List of users

io.sockets.on('connection', function ( socket ) {
    var user = { }; // The user

socket.on('newUser', function ( data ) {
    user.userName = data.name, // Selected name
            user.userId   = socket.id; // The socket id

            Users.push( user );

            socket.emit('me', user); // Emit the user object
            socket.emit('userList', { users : Users }); // Emit the user list

});

socket.on('disconnect', function () {
    Users.remove( user ); // Delete from the user list
            socket.emit('userList', { users : Users }); // emit again the user list for refresh
});

socket.on('clientMessage', function ( data ) {
    io.sockets.socket(data.to).emit('newMessage', { 
       // data.to is the socket ID that a message is sent
       "from" : data.from, 
       "message" : data.message, 
       "date" : new Date() 

        });
    });
}); 
```

这就是问题所在；一些用户连接，服务器分配一个 id，（socket.id），但如果同一个用户在同一个导航器中打开更多选项卡，socket.id 将更改，因此用户将不会在其他选项卡中收到该消息。

我想为某些登录用户打开的所有选项卡存储相同的 socket.id；因此，如果该用户收到任何消息，将显示在所有选项卡中。

¿ 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:34:31.567

你可以做到这一点的唯一方法是制作每个用户的所有socketID的数组，并在有特定消息给该用户时发送给所有用户......我遇到了类似的问题，这就是我的解决方案用过的

```
socket.on('newUser', function ( data ) {
    user.userName = data.name, // Selected name
    if ( !user.userId ) user.userId = {};
    user.userId.push(socket.id);

    Users.push( user );

    socket.emit('me', user); // Emit the user object
    socket.emit('userList', { users : Users }); // Emit the user list
});

socket.on('disconnect', function () {
    Users.userId.remove( socket.id );
    if ( Users.userId.length === 0 ) Users.remove(user);
    socket.emit('userList', { users : Users }); // emit again the user list for refresh
});

socket.on('clientMessage', function ( data ) {
    io.sockets.socket(data.to).emit('newMessage', { 
       // data.to is the socket ID that a message is sent
       "from" : data.from, 
       "message" : data.message, 
       "date" : new Date() 

        });
    });
}); 
```

我没有运行代码。它实际上是一个想法如何处理多个套接字连接。你总是可以用更优雅的方式写出来！

# android - 在android中查找正在运行的服务

> ID：14184412
> 
> 赞同：0
> 
> 时间：2013-01-06T16:54:49.887
> 
> 标签：android

这是我搜索服务的方法

```
public static boolean isServiceRunning(String serviceClassName, Context context) {
        ActivityManager activityManager = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
        if (activityManager == null) {
            return false;
        }

        List<RunningServiceInfo> services = activityManager.getRunningServices(Integer.MAX_VALUE);
        if (services.isEmpty()) {
            return false;
        }

        for (RunningServiceInfo runningServiceInfo : services) {
            if (runningServiceInfo.service.getClassName().equals(serviceClassName)) {
                return true;
            }
        }

        return false;
    } 
```

但有时我会收到此错误：

```
java.lang.RuntimeException: Unable to instantiate receiver com.xx.xx.receiver.BluetoothReceiver: java.lang.ClassNotFoundException: com.xx.xx.receiver.BluetoothReceiver
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2111)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.app.ActivityThread.access$1500(ActivityThread.java:127)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.os.Looper.loop(Looper.java:137)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.app.ActivityThread.main(ActivityThread.java:4511)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at dalvik.system.NativeStart.main(Native Method)
01-06 17:39:38.990: E/AndroidRuntime(7259): Caused by: java.lang.ClassNotFoundException: com.xx.x.receiver.BluetoothReceiver
01-06 17:39:38.990: E/AndroidRuntime(7259):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-06 17:39:38.990: E/AndroidRuntime(7259):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2106) 
```

使用这种方法是否聪明。我想查找服务是否正在运行。如果没有，我手动运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:00:37.113

> 但有时我会收到此错误：

该错误似乎与您显示的代码无关。

> 我想查找服务是否正在运行。如果没有，我手动运行它。

只需启动服务。如果它已经在运行，什么都不会发生，只是会`onStartCommand()`再次调用它。如果它尚未运行，将创建一个服务实例，用 调用`onCreate()`，然后用 调用`onStartCommand()`。

# google-app-engine - 免费托管几个网络应用程序的最佳方式是什么？

> ID：14184413
> 
> 赞同：-1
> 
> 时间：2013-01-06T16:55:07.653
> 
> 标签：google-app-engine, amazon-web-services, openshift

我想出了几个选择：

1.  在亚马逊上；这为我们提供了 1 年免费的微型实例（600 MB RAM）和 2 个月的 RDS。
2.  谷歌应用引擎。但这限制了我可以在代码中使用的所有内容。因此，我的代码非常依赖托管服务提供商。
3.  RedHat OpenShift 终身免费提供 3 个微型实例。看起来是最好的选择。唯一的问题是这是最新进入者。

任何其他可用选项或对上述 3 个选项的任何反馈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:03:29.430

有很多选择。我喜欢使用[appfog](http://appfog.com/)，因为它支持多种语言并允许多达十个免费的微应用。Appfog 还允许您通过 A 或 cname 使用自己的域，这是其他一些不免费提供的功能。大多数 PaaS（平台即服务）提供商都提供免费计划，例如[dotCloud](https://www.dotcloud.com/)、[heroku](http://www.heroku.com/)和[pagodabox](https://pagodabox.com/)（仅限 php）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:18:47.200

我听说过关于[dotCloud](https://www.dotcloud.com/)和[heroku](https://www.heroku.com/)的好消息。我对 AppEngine 最熟悉，到目前为止我对它非常满意，尽管正如您提到的那样，从那里迁移应用程序会更加困难。

我认为确保主机很好地支持您选择的语言很重要。

我建议您超越服务的免费部分。除非您有一组非常独特的需求，否则您将很快需要超越各种服务的免费部分所提供的内容。

# java - 如何在 JFrame 中放置两个都占据全屏的椭圆

> ID：14184414
> 
> 赞同：2
> 
> 时间：2013-01-06T16:55:08.420
> 
> 标签：java, swing, layout, jframe, jpanel

我需要在 JFrame 中放置两个椭圆。每个椭圆都属于不同的内部类。问题是使用 BorderLayout 时，当使用 CENTER 时，它允许您跨越整个框架。但是我不能添加第二个椭圆，因为它被第一个覆盖了。

我可以使用什么布局管理器将这两个椭圆都绘制在整个屏幕上？这些将被动画化，因此最终可能会相互叠加，因此我需要将它们都绘制在整个屏幕上。

- - 编辑 - -

Oval 是一个 JPanel，所以我有两个 JPanel，两个不同的椭圆从不同的位置开始。

我尝试像这样使用 BoxLayout：

```
 mainPanel = new JPanel();
 mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.PAGE_AXIS));

 mainPanel.add(drawPanel1);
 mainPanel.add(drawPanel2);

 frame.getContentPane().add(BorderLayout.CENTER, mainPanel); 
```

然而，一旦椭圆穿过中心，它就会消失，因为一个面板占据屏幕的上半部分，而另一个面板占据屏幕的下半部分。除此之外，它工作正常。我唯一需要的是修复布局，因为它们都占据了所有屏幕

我还尝试了 1 行 1 列的 GridLayout，但这仍然没有填满整个框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T18:33:22.693

+1 mKorbel 和 HFOE 答案。

使用 HFOE 建议：

这是我做的一个例子：

它使用一个`MyOval`类（一个类被建模以保存足够的数据来绘制一个特定颜色的椭圆），它还使用一个`JPanel`包含`DrawPanel`for`ArrayList`类`MyOval`和添加到`ArrayList`.

`JPanel`添加到 JFrame 的框架设置为可见，然后将 2 个椭圆添加到类`DrawPanel`中`addOval(...)`，然后使用该类添加一个新的椭圆并添加到 arraylist 并调用 repaint，然后调用`paintComponent`.`JPanel`

![在此处输入图像描述](../Images/a45df677f276ec80432996e0d0ee8ca1.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.util.ArrayList;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DrawPanel dp = new DrawPanel(500, 400);

        frame.add(dp);

        frame.pack();
        frame.setVisible(true);

        dp.addOval(0, 0, dp.getWidth(), dp.getHeight(), Color.GREEN);
        dp.addOval(0, 0, dp.getWidth(), dp.getHeight(), Color.BLUE);
        //dp.addOval(5, 5, dp.getWidth(), dp.getHeight(),Color.RED);//uncomment here to see 2nd circle better
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
}

class DrawPanel extends JPanel {

    private ArrayList<MyOval> ovals = new ArrayList<>();
    private int width, height;

    public DrawPanel(int w, int h) {
        width = w;
        height = h;
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);

        Graphics2D g2d = (Graphics2D) grphcs;
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));

        for (MyOval oval : ovals) {
            g2d.setColor(oval.getColor());
            g2d.drawOval(oval.getX(), oval.getY(), oval.getWith(), oval.getHeight());
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(width, height);
    }

    void addOval(int x, int y, int w, int h, Color color) {
        ovals.add(new MyOval(x, y, w, h, color));
        repaint();
    }
}

class MyOval {

    int x, y, with, height;
    Color color;

    public MyOval(int x, int y, int with, int height, Color color) {
        this.x = x;
        this.y = y;
        this.with = with;
        this.height = height;
        this.color = color;
    }

    public Color getColor() {
        return color;
    }

    public int getHeight() {
        return height;
    }

    public int getWith() {
        return with;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }
} 
```

注意，是的，我们看不到两个椭圆，但那是因为它们位于相同的坐标处：

```
dp.addOval(0, 0, dp.getWidth(), dp.getHeight(), Color.GREEN);
//dp.addOval(0, 0, dp.getWidth(), dp.getHeight(), Color.BLUE);
dp.addOval(5, 5, dp.getWidth(), dp.getHeight(), Color.RED);//uncomment here to see 2nd circle better 
```

像这样看到另一个：

![在此处输入图像描述](../Images/85081f800f2507521ec516f55cc89f7d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T16:59:49.640

与其绘制两个 GUI 组件并将它们添加到 JFrame，不如考虑在同一 JPanel 的`paintComponent(...)`方法中绘制椭圆并将该 JPanel 添加到 JFrame 的 contentPane BorderLayout.CENTER。如需更详细的答案，请在您的问题中提供更多信息。

如果您希望椭圆彼此分开，并且它们*必须*位于扩展 JComponent 或其子之一的类中，请查看 mKorbel 的答案（1+）。或者，如果它们需要相互叠加，则可能使用 JLayeredPane，并使用不透明的 JPanel。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T17:00:47.407

> 我可以使用什么布局管理器将这两个椭圆都绘制在整个屏幕上？

请参阅[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)或[BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T18:10:48.653

我必须回答我自己的问题，因为我设法用 GridLayout 和 BoxLayout 都没有解决它。尽管可能有一种方法可以通过这种布局实现这一点，但我发现完全没有布局更容易做到这一点。

以下是代码：

```
 frame.setLayout(null);
    frame.getContentPane().add(drawPanel1);
    frame.getContentPane().add(drawPanel2);
    drawPanel1.setBounds(0, 0, frame.getWidth(), frame.getHeight());
    drawPanel2.setBounds(0, 0, frame.getWidth(), frame.getHeight()); 
```

此代码使两个面板都可以接管整个框架大小，最终解决了这个问题。

# ruby-on-rails - 以嵌套形式上传和渲染图像 RoR

> ID：14184421
> 
> 赞同：1
> 
> 时间：2013-01-06T16:56:11.527
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, paperclip, carrierwave

我有两个模型 1）帖子，2）照片，它们的关联如下 帖子有很多照片，照片属于帖子。我正在使用 ryanbates 嵌套表单 gem 来生成表单。表格是这样设置的

```
<%= nested_form_for @post, :html => {:multipart => true} do |f| %>
    <%= f.fields_for :photos do |p| %>
        <%= p.file_field :image %>
    <% end %>
<% end %> 
```

我想要做的是在这个表单的一个页面上，并有用于上传照片的字段并内联显示图像。我看过 ryans 截屏视频“jquery upload”，但我不希望用户在屏幕之间切换。我知道这很复杂，因为照片取决于帖子，我应该合并这两个表，还是您知道任何支持此功能的 gem？我也在使用carrierwave，但如果我必须切换，我会的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:00:02.237

如果你想上传图像并内联显示而不在屏幕之间切换，我认为你必须通过 ajax 来完成。根据您的要求，我认为使用单个表单而不是嵌套表单会更好。

嵌套表单用于同时提交帖子和照片。如果您想单独提交照片并内联显示，您可以使用单独的表单为照片，帖子并使用 ajax 提交。我认为，Carrierwave 足以满足您的要求。

希望能帮助到你！！

# c# - 过滤连续数据，如何摆脱瞬态？

> ID：14184422
> 
> 赞同：2
> 
> 时间：2013-01-06T16:56:12.503
> 
> 标签：c#, filtering, signal-processing

我正在编写一个 C# 应用程序，它以 ~100Hz 的速率从 Wii 遥控器连续获取加速度计数据。此数据在到达时存储在一个列表中（每个轴一个列表）。我有一个计时器，它每隔一秒触发一次，（所以当它触发时列表包含~100 个元素），然后它对列表应用一个低通滤波器（使用信号处理 Math.NET Neodym 库），并写入将数据保存到文件中，并清除下一批数据的所有列表。

现在的问题是，输出的过滤器数据在开始时波动很大，每次应用过滤器时都会发生这种情况，所以每隔一秒，我的数据中就会出现一些错误值，这使得它完全没用。

我该如何解决这个问题，以便过滤器仍然每秒钟应用一次，但可以避免瞬变。我怀疑这可以使用重叠窗口来完成，但不太确定如何？

这是我的过滤器的代码，此代码每秒执行一次：

```
 listXLow = MathNet.SignalProcessing.Filter.OnlineFilter.CreateLowpass(MathNet.SignalProcessing.Filter.ImpulseResponse.Finite, 100, 1, 30).ProcessSamples(listX.ToArray()).ToList(); 
```

在参数中，在 ImpulseResponse.Finite 之后，100 是采样率，1 是截止频率，30 是滤波器阶数。

这是显示我的 I/O 外观的屏幕截图。输入数据是第一个图，第二个显示过滤器输出： ![显示输入和输出数据的图表](../Images/4ddaca58dadbe7de8f3301524bd851a3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:05:21.813

FIR 滤波器具有瞬态阶的长度。对于 30 的瞬态长度，您可以保存前 100 个样本中的最后 30 个样本，并将它们预先添加到当前数据中，然后在过滤后丢弃该瞬态（130 个过滤样本中的前 30 个）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T10:34:45.647

好的，问题解决了，把这个留给其他面临类似问题的人，正如 hotpaw2 所提到的，这可以通过重叠窗口来完成，但我发现我根本没有以正确的方式使用 Math.NET Neodym 库中的过滤器。

问题是每次触发计时器时都会创建一个新过滤器，我通过创建一个全局过滤器对象来解决这个问题，并在每次 Timer 滴答事件中调用它的 ProcessSamples 方法。

所以现在，在程序开始时创建了一个过滤器对象：

```
 MathNet.SignalProcessing.Filter.OnlineFilter XlowFilter = MathNet.SignalProcessing.Filter.FIR.OnlineFirFilter.CreateLowpass(MathNet.SignalProcessing.Filter.ImpulseResponse.Finite, 100, 1.5, 30); 
```

并且在 Timer Tick 事件中只调用了过滤器的一个方法：

```
 listXLow = XlowFilter.ProcessSamples(listX.ToArray()).ToList(); 
```

# java - BufferedReader 的 readLine() 不能通过 konsole (Kubuntu 12.10) 工作

> ID：14184424
> 
> 赞同：0
> 
> 时间：2013-01-06T16:56:18.717
> 
> 标签：java

```
public static void main(String[] args) throws IOException{

  String msg;
  BufferedReader userIn = new BufferedReader(new InputStreamReader(System.in));
  System.out.println("please type something now:");
  msg = userIn.readLine();
  System.out.println(msg);  

  userIn.close();
} 
```

在 Eclipse 中完美运行，但是当我通过 konsole 运行时，没有打印出来。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T16:57:43.373

它依赖于操作系统。在您的情况下`System.out.println`，使用缓冲输出。您的程序在`System.out.println`将消息刷新到标准输出之前结束，因此您什么也看不到。

试着打电话`System.out.flush()`强迫它。

相关问题：

*   [何时/为什么在 Java 中调用 System.out.flush()](https://stackoverflow.com/questions/7166328/when-why-to-call-system-out-flush-in-java)
*   [System.out.println 不起作用](https://stackoverflow.com/questions/3302060/system-out-println-not-functioning)
*   [Java： System.out.println() 这么慢的原因是什么？](https://stackoverflow.com/questions/950026/java-whats-the-reason-behind-system-out-println-being-that-slow)
*   [Java：System.out.println 和 System.err.println 乱序](https://stackoverflow.com/questions/1883321/java-system-out-println-and-system-err-println-out-of-order)

# mysql - 无法创建链接服务器 - sql server 和 mysql

> ID：14184429
> 
> 赞同：2
> 
> 时间：2013-01-06T16:56:51.277
> 
> 标签：mysql, sql-server-2008, linked-server

我想在 SQL Server 和 MySQL 实例之间创建一个链接服务器。我按照[本教程](http://www.ideaexcursion.com/2009/02/25/howto-setup-sql-server-linked-server-to-mysql)中概述的步骤进行操作，但它不起作用。我已经录制了用于创建服务器的过程的视频：

```
http://www.youtube.com/watch?v=-8psvDjysHk&feature=youtu.be 
```

SQL 服务器返回此错误：

> *已创建链接服务器，但连接测试失败。您要保留链接服务器吗？*
> 
> *执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)*
> 
> *链接服务器“MYSQLAPP”的 OLE DB 提供程序“SQLNCLI10”报告错误。身份验证失败。
> 无法为链接服务器“MYSQLAPP”初始化 OLE DB 提供程序“SQLNCLI10”的数据源对象。
> 链接服务器“MYSQLAPP”的 OLE DB 提供程序“SQLNCLI10”返回消息“无效的授权规范”。（Microsoft SQL Server，错误：7399）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:44:48.960

您需要在 SQL Server 机器上创建一个 SYSTEM DSN，但在您的视频中创建一个 USER DSN。在创建 DSN 之前，选择 ODBC 小程序中的系统选项卡。

# asp.net-mvc-3 - 将子项添加到 mvc 模型而不需要遍历列表？

> ID：14184431
> 
> 赞同：1
> 
> 时间：2013-01-06T16:56:55.403
> 
> 标签：asp.net-mvc-3, list, stored-procedures, entity-framework-4

将 mvc 3 与 EF 4.1 一起使用（带有存储过程）。我有一个问题列表，我需要包含一个对每个问题的评论列表。不确定如何在一个过程和一个模型中完成此操作，而无需遍历每个问题模型并添加注释。这是我到目前为止所拥有的：（总之需要一个更好的方法）

我的程序“SP_GetQuestionIssues”：

```
CREATE PROC [dbo].[SP_GetQuestionIssues]
(@ReviewID int)
AS
Select r.ReviewID, q.QuestionId, s.Title Step, q.QuestionText Question, r.AnswerValue Answer, IsIssue 
From dbo.Questions q
 Join dbo.Steps s
            on q.StepId = s.StepId
 Join dbo.QuestionFlagged qf
            on q.questionId = qf.questionId 
 Join dbo.Responses r
            on q.questionId = r.QuestionID
 Where IsIssue=1 
 AND r.ReviewID = @ReviewID
 AND qf.ReviewID = @ReviewID
 Order by s.StepID, s.stepOrder, q.DisplayOrder 
```

我的模型“问题”：

```
public class QuestionIssue
    {
        public int ReviewID { get; set; }
        public int QuestionId { get; set; }
        public string Step { get; set; }
        public string Question { get; set; }
        public string Answer { get; set; }
        public bool IsIssue { get; set; }
        public virtual IEnumerable<Comment> Comments { get; set; }
    } 
```

我的模型“评论”：

```
public class Comment
    {      
            public int CommentId { get; set; }
            public int ReviewId { get; set; }
            public Nullable<int> QuestionId { get; set; }
            public string Reviewer { get; set; } 
            public string CommentText { get; set; } 
            public bool IsMemo { get; set; } 
    } 
```

我的行动：

```
SqlParameter param = new SqlParameter("@ReviewID", Id);
                var issues = db.Database.SqlQuery<QuestionIssue>("SP_GetQuestionIssues @ReviewID", param).ToList(); 
```

需要比这更好的方法（伪代码）：

```
 foreach(var issue in issues)
 {
     var comments = somefunction.getcomments(issue.reviewId, issue.questionId)
     issue.Comments.add(comment)
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T16:09:24.970

*3年后我偶然发现了这个问题，但它的价值：*

您可能已经查看了返回多个记录集（批处理 t-sql）的存储过程，并使用`SqlDataReader.NextResult`类似于您的伪代码来处理它们。

# c# - WPF线程的实践

> ID：14184432
> 
> 赞同：-3
> 
> 时间：2013-01-06T16:57:03.757
> 
> 标签：c#, wpf, multithreading

我正在学习 WPF 并想在 WPF 中使用线程。

在 WPF 中使用线程有哪些不同的方法？

有没有关于 WPF 线程的教程？

谢谢。JS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:19:35.830

在 WinForms 和 WPF UI 上运行 UI `Thread`。如果您要使用另一个线程（`BackgroundWorker`或`Task`），则需要通过`Dispatcher`. 这是一篇文章，它将让您对 WPF 中的线程和`Dispatcher`对象[使用 Dispatcher 构建更具响应性的应用程序有一些想法](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

# ios6 - UIScrollView 错误 -EXC_BREAKPOINT (code=EXC_i386_BPT, subcode=0x0) 错误

> ID：14184435
> 
> 赞同：0
> 
> 时间：2013-01-06T16:57:33.837
> 
> 标签：ios6

我正在 iOS 上实现一些代码，突然遇到如上所述的错误。我无法弄清楚问题的根源是什么。但根据我的分析，这是由于 UIScrollView。我正在使用 ios 6 进行开发。附上错误的屏幕截图。![在此处输入图像描述](../Images/354645c45a7b5b1c32c441ee481bbb21.png)

这是我用于开发的代码。

```
@interface TutorialDetailViewController ()

@end

@implementation TutorialDetailViewController

@synthesize managedObjectContext;
@synthesize scrollView;
@synthesize imageView;
@synthesize textView;
@synthesize imageTapGestureRecognizer;
@synthesize imagePath;
@synthesize separator;

-(void) dealloc
{
    [managedObjectContext release];
    [scrollView release];
    [imageView release];
    [textView release];
    [imageTapGestureRecognizer release];
    [imagePath release];
    [separator release];
    [super dealloc];
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"View Did Load - Tutorial Detail View Controller");

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    PocketScholarAppDelegate *delegateObject = (PocketScholarAppDelegate *)[[UIApplication sharedApplication] delegate];

    if(self.managedObjectContext == nil)
    {
        self.managedObjectContext = [delegateObject managedObjectContext];
    }

    //UI Customization

    UIView *backButtonView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 42, 42)] autorelease];

    UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 42, 42)];
    UIImageView *separtorView = [[UIImageView alloc] initWithFrame:CGRectMake(41, 0, 1, 42)];
    separtorView.image = [UIImage imageNamed:@"NavButtonSeperator.png"];

    [backButton setBackgroundImage:[UIImage imageNamed:@"NavBackIcon.png"]
                          forState:UIControlStateNormal];
    [backButton addTarget:self
                   action:@selector(backAction)
         forControlEvents:UIControlEventTouchUpInside];

    [backButtonView addSubview:backButton];
    [backButtonView addSubview:separtorView];

    [separtorView release];
    [backButton release];

    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView: backButtonView];

    //fetch value of the selected tutorial from the user defaults
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSInteger tutorialId = [defaults integerForKey:SELECTED_TUTORIAL];

    NSPredicate *tutorialPredicate = [NSPredicate predicateWithFormat:@"tut_id==%d",tutorialId];
    NSMutableArray *tutorialArray = [NSObject getDataFromLocalDB:TUTORIAL_ENTITY withPredicate:tutorialPredicate forObjectContext:managedObjectContext];

    Tutorials *tObj = [tutorialArray objectAtIndex:0];

    self.title = tObj.tut_name;

    NSArray *documentDirectoryArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [documentDirectoryArray lastObject];

     self.imagePath = [documentDirectory stringByAppendingPathComponent:tObj.tut_image];

    CGRect screenRect = [[UIScreen mainScreen] bounds];

    //Set the content size of the scroll view container
    self.scrollView.contentSize = CGSizeMake(screenRect.size.width, screenRect.size.height);

    self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(screenRect.size.width/2-70, 20, screenRect.size.width/2-20, screenRect.size.height/2-20)];
    self.imageView.backgroundColor = [UIColor clearColor];
    self.imageView.userInteractionEnabled = YES;

    self.imageTapGestureRecognizer = [[UITapGestureRecognizer alloc]
                                                         initWithTarget:self
                                                         action:@selector(imageTapped)];
    self.imageTapGestureRecognizer.numberOfTapsRequired = 1;
    [self.imageView addGestureRecognizer:self.imageTapGestureRecognizer];

    self.imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:imagePath]];

    if(![tObj.tut_description isEqualToString:@""])
    {
        self.textView = [[UITextView alloc] init];
        [self.textView sizeToFit];
        self.textView.backgroundColor = [UIColor clearColor];
        self.textView.font = [UIFont fontWithName:FONT_NAME size:14.0];
        self.textView.userInteractionEnabled = NO;
        self.textView.textColor = [UIColor colorWithRed:109.0/255.0 green:109.0/255.0 blue:109.0/255.0 alpha:1.0];
        self.textView.text = tObj.tut_description;
        self.textView.frame = CGRectMake(20,
                                         self.imageView.frame.size.height+60,
                                         screenRect.size.width-40,
                                         screenRect.size.height);
    }

    self.scrollView.showsHorizontalScrollIndicator = NO;

    self.separator = [[UIImageView alloc] initWithFrame:CGRectMake(0,
                                                                   self.imageView.frame.size.height+40,
                                                                   screenRect.size.width,
                                                                   3)];
    self.separator.image = [UIImage imageNamed:@"NavShadow.png"];

    [self.scrollView addSubview:self.imageView];
    [self.scrollView addSubview:separator];
    if(![tObj.tut_description isEqualToString:@""])
    {
        [self.scrollView addSubview:textView];

        CGRect textViewFrame = [textView frame];
        textViewFrame.size.height = self.textView.contentSize.height+40;
        self.textView.frame = textViewFrame;
    }

    CGFloat scrollContentHeight = screenRect.size.height + 80;
    self.scrollView.contentSize = CGSizeMake(screenRect.size.width, scrollContentHeight);

    self.view = self.scrollView;

//    [separator release];
}

- (void)didReceiveMemoryWarning
{
    NSLog(@"Did Receive Memory Warning");
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Custom Methods
-(void) backAction
{
    [self.navigationController popViewControllerAnimated:YES];
}

-(void) imageTapped
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:imagePath forKey:SELECTED_IMAGE];
    [defaults synchronize];

    TutorialImageViewController *imageController = [[TutorialImageViewController alloc] initWithNibName:@"TutorialImageViewController" bundle:nil];
    [self.navigationController pushViewController:imageController animated:YES];
    [imageController release];

}

@end 
```

# javascript - Rails jQuery 被调用两次

> ID：14184437
> 
> 赞同：2
> 
> 时间：2013-01-06T16:57:47.030
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在开发 Rails 3.2 应用程序，但不知何故我的 javascript 代码被执行了两次，我不知道为什么。

我已经搜索了 application.js 文件，它只包含在我的资产文件夹中，而不是在我的公用文件夹中。我也只有每个 js 文件的一份副本，所以它可能不是由于资产管道。

这是我的 application.js 文件。

```
//= require jquery
//= require jquery_ujs
//= require jquery_nested_form
//= require jquery.ui.all
//= require myownjs
//= require_tree . 
```

实际上，我已经完成了一个几乎类似的项目，但没有 jquery 嵌套表单，并且问题不存在，所以我的直觉告诉我，这可能是由于我使用的 gem 反复调用我的代码或由于我的 javascript 的顺序，包括但我是网络编程新手，我不确定这是否真的有意义。但是，我确实尝试删除嵌套表单的 require 行，但这并没有什么不同。

有人可以通过建议错误可能是什么来帮助我吗？

这是另一个项目的 application.js。

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.all
//= require myowncodes

//= require_tree . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:04:12.023

`//= require_tree .`已经包含`.`目录中的所有内容 - 这将是您的`application.js`文件所在的任何目录（通常是 /app/assets/javascripts/）。我的猜测是您列出的许多其他文件已经在该目录中，并且可以从`application.js`文件中删除这些条目。

或者，如果您想专门将应加载的文件列入白名单，`//= require_tree .`请从您的 application.js 文件中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:16:07.170

```
//= require_tree . 
```

此行将加载 application.js 文件文件夹中的所有文件。要完全控制正在加载的文件，您可以删除上面的行并加载单个所需的文件，或者您可以创建子文件夹并使用

```
//= require_directory <sub_directory_name> 
```

这将加载该文件夹中的所有文件。此方法将仅加载您指定的文件。我建议不要使用 require_tree，以便更好地控制应用程序加载的文件。

在您的情况下，删除 require_tree 行应该可以解决您的问题。我希望它有帮助！

# python - Python 错误绕过

> ID：14184440
> 
> 赞同：2
> 
> 时间：2013-01-06T16:57:59.003
> 
> 标签：python, error-handling

很抱歉有多个帖子，我确实环顾四周，除了 try 方法之外找不到任何东西，这在某些情况下似乎很有用，只是不是我的。

我正在寻找的是一种跳过错误的方法，因此控制台中没有显示并且没有停止脚本，只是一种绕过它们的方法。

IE;

```
1\. call a list
2\. If list does not exist
3\.     create the list 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T16:58:41.047

在 Python 中，这是通过[`try...except`](http://docs.python.org/2/tutorial/errors.html#handling-exceptions). 在您的情况下，您可能想抓住`NameError`.

```
try:
    L[0]
except NameError:
    L = ["Example",2]
    L[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:47:16.840

`try`..`except`当然是一种方法。如果您尝试在函数中测试参数，那么使用默认值定义该参数`None`并像这样进行测试通常很有用：

```
def myfunc(..., mylist=None):
    if mylist is None:
        mylist = [] 
```

（另见[不是 Python 中的无测试](https://stackoverflow.com/questions/3965104/not-none-test-in-python)）

如果你想知道列表是否为空，只需输入

```
if mylist:
    print mylist
else:
    print "empty list" 
```

这些类型的测试和`try`..`except`概念之间的主要区别在于，在我的代码示例中，您必须确保定义了变量（例如作为函数参数）。否则会产生异常。这正是`try`..`except`构造优雅地处理的内容。

最后它可能是哲学的（我只能希望我不会因此而违反 python 的禅宗）：如果你知道哪些变量可能是未定义的，那么它可以提高你的代码的可读性和弹性，如果你编写明确的错误处理。有人可能会说“让它发生”并仅在必要时进行修复更为pythonic。如果您正在编写“快速破解”，解决方案 2 通常很好，如果它是其他用户应该使用的应用程序，我通常倾向于显式错误处理。

# c - 未找到 C 结构的 clang_complete 模式

> ID：14184444
> 
> 赞同：5
> 
> 时间：2013-01-06T16:58:44.650
> 
> 标签：c, vim, clang, clang-complete

所以我有一个非常基本的 C 程序来尝试和测试`clang_complete`：

```
#include <stdio.h>
#include <stdlib.h>

struct xampl {
  int x;
};

int main()
{
  struct xampl structure;
  struct xampl *ptr1;
} 
```

但是，每次我尝试做结构。或者`ptr1->`，程序给了我错误：

> 未找到用户定义的完成 ( `^U^N^P`) 模式。

我尝试将此添加到我的`vimrc`：

```
let g:clang_user_options='|| exit 0' -- 
```

（来自[这个线程](https://stackoverflow.com/questions/10901129/clang-complete-doesnt-work)）但是，完成仍然不起作用。

这里有什么我遗漏或不理解的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:44:42.177

当你说`ptr->`你的意思是`ptr1->`对的？我的 .vimrc 中只有两个字符串

```
let g:clang_complete_copen=1
let g:clang_hl_errors=1 
```

and your example works fine for me. Make sure you have **.clang_complete** file with valid include paths (see `:help clang_complete` for example file). Try to debug clang completer by set up variable `let g:clang_debug=1`. And read [this thread](https://stackoverflow.com/questions/10259485/clang-complete-in-vim) maybe it help you.

# firefox - 在 Firefox 中显示当前窗口尺寸的方式？

> ID：14184447
> 
> 赞同：45
> 
> 时间：2013-01-06T16:59:03.247
> 
> 标签：firefox

Firefox 有什么方法可以显示当前视口的尺寸吗？理想情况下，在状态栏中并在调整窗口大小时更新“实时”，因为这对于响应式布局测试非常有用！

我使用了“MeasureIt”，但这需要你用尺子来绘制，这很乏味，而且很可能不准确，具体取决于用户的能力和鼠标分辨率。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2017-05-20T01:20:47.767

我知道这是一个 4 岁的答案，但我没有看到有人提到你只需要选择切换标尺选项。转到开发人员工具中的设置菜单选项并检查它。这将显示标尺图标，然后单击它，您就有了标尺。 [![在此处输入图像描述](../Images/c1351a97e2cef6ccb773ce6257a815e4.png)](https://i.stack.imgur.com/IyhMo.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-24T02:07:27.670

流行的[Web 开发人员扩展](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)具有“在标题中显示窗口大小”功能（在“调整大小”菜单下），该功能在调整大小时会更新。这将以以下格式显示窗口大小和视口大小：1024x768 [1008x529]（窗口大小，视口大小）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-06T17:20:53.137

我已经将这段 javascript（需要 jQuery）拼凑在一起，它很容易包含在内，但是将它作为一个插件输出到 FF 状态栏会很好。

从好的方面来说，我想这现在可以在不同的浏览器中使用！

```
$(document).ready(function(){
    var MEASUREMENTS_ID = 'measurements'; // abstracted-out for convenience in renaming
    $("body").append('<div id="'+MEASUREMENTS_ID+'"></div>');
    $("#"+MEASUREMENTS_ID).css({
        'position': 'fixed',
        'bottom': '0',
        'right': '0',
        'background-color': 'black',
        'color': 'white',
        'padding': '5px',
        'font-size': '10px',
        'opacity': '0.4'
    });
    getDimensions = function(){
        return $(window).width() + ' (' + $(document).width() + ') x ' + $(window).height() + ' (' + $(document).height() + ')';
    }
    $("#"+MEASUREMENTS_ID).text(getDimensions());
    $(window).on("resize", function(){
        $("#"+MEASUREMENTS_ID).text(getDimensions());
    });
}); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-22T20:54:39.710

**在 Firefox 中，使用shift + f2**打开开发人员工具栏

 **然后在命令中输入**>> 标尺。**

它将在视图边缘显示标尺。您必须为每个选项卡/屏幕以及每次刷新后都执行此操作，但访问该功能的速度非常快。

他们应该添加一个选项以使其永久化。

自 Firefox 40 起可用：[https ://developer.mozilla.org/en-US/docs/Tools/Rulers](https://developer.mozilla.org/en-US/docs/Tools/Rulers)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-01-27T20:38:09.357

Firefox ctrl+shift+m​​ 中响应式设计视图的快捷方式就像我发现的这个目的的魅力。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-11T14:58:15.273

我建议使用 2 个插件：

1.  **[插件栏](https://addons.mozilla.org/it/firefox/addon/the-addon-bar/?src=userprofile)**- 它基本上带回了 Firefox 窗口底部的旧插件栏。
2.  **[FireBreak](https://addons.mozilla.org/en-US/firefox/addon/firebreak/?src=collection&collection_id=6ccda3e7-46a6-4960-8907-f9562f1120a4)**：它在一个小框中显示窗口视口宽度，您可以将其放置在插件栏中。

我已将 FireBreak 文本框放在左下角的插件栏中，因此当您调整窗口大小时，您仍然可以看到它。相反，如果你把它放在默认的右上角，地址栏之后，一旦你将窗口调整到一定大小以下，它就会被隐藏。

要在处理响应式网站时从 Firefox 中获得更多信息，您甚至可以使用**[Tile Tabs](https://addons.mozilla.org/en-US/firefox/addon/tile-tabs/?src=collection&collection_id=6ccda3e7-46a6-4960-8907-f9562f1120a4)** 一个有用的用例是在处理代码时以不同大小打开 3-4 个图块，这样您就可以看到您的布局是如何进行的，并且，如果您使用 livereload，它将实时显示所有更改。

这是我的意思的屏幕截图：相同的网页以不同的磁贴打开，设置为不同的大小。要获得“Web Deleoper Tools”插件所需的每个图块的大小。

![在此处输入图像描述](../Images/d44287b7a2f4403d1f2621e7e8d25be3.png)**

# iis - IIS Joomla！网址重写

> ID：14184449
> 
> 赞同：0
> 
> 时间：2013-01-06T16:59:18.783
> 
> 标签：iis, joomla, url-rewriting, web-config

我在我的 IIS 服务器中配置了 Joomla。

我想为我的应用程序添加一个自定义的 SEO 友好 URL，我使用 apache 更正了这个并且工作正常。但我是 ISS 的新手，我对重写 URL 有疑问。

我在 Joomla 中启用了 url 重写选项！并创建了一个像这样的干净网址

```
http://www.sitename.com/shop?shop=3 
```

我的要求是

当前网址：[http](http://www.sitename.com/shop?shop=3) ://www.sitename.com/shop?shop= 3（使用店铺的PK 3获取数据）

我想将其重写为

```
http://www.sitename.com/shop/3/shop-seo-name 
```

当用户单击此链接时，我需要转到 shop-component/shop-view 然后使用 PK 3 获取数据

我有代码要在这里重写

```
<rule name="MyRule">
  <match url="^shop?shop=[0-9A-Z]" />
  <action type="Rewrite" url="index.php" />
</rule> 
```

但这不起作用任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:20:56.590

您将需要对查询字符串使用条件，如下所示：

```
<rule name="MyRule">
    <match url="^shop" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="^shop=([0-9A-Z]+)$" />
    </conditions>
    <action type="Rewrite" url="index.php" />
</rule> 
```

# ios - ios 6.0+上的itms用户代理是什么？

> ID：14184451
> 
> 赞同：0
> 
> 时间：2013-01-06T16:59:24.040
> 
> 标签：ios, ios6, app-store, user-agent

我已经为我的公司设置了一个 itms-services 企业分发服务器，并且我一直在检查服务器日志以确保只有公司发布的设备正在安装我们公司的应用程序。我们只向我们的员工发放 iPhone 4s 和 iPad 2nd gen（仍然在 ios 5.1.1 上）。我想设置一个脚本，在 ios 6.0 之后检查用户代理的服务器日志。由于从服务器“抓取” ipa 文件的服务是 itms，我需要知道 iOS 6.0 和 6.0.1 上 itms 的用户代理才能编写脚本。

我知道还有其他方法可以做到这一点，例如使用 OS X Server，但我们是一家初创公司，希望保持低成本，还有其他限制使我们需要脚本而不是其他类型的解决方案.

无论如何，回到最初的问题：

ios 6.0 及以上版本的 itms 用户代理是什么？如果不知道，有什么办法可以查到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T11:01:05.157

它们在此处列出[http://www.enterpriseios.com/wiki/Complete_List_of_iOS_User_Agent_Strings](http://www.enterpriseios.com/wiki/Complete_List_of_iOS_User_Agent_Strings) 但您也可以在服务器上运行[http://www.wireshark.org/](http://www.wireshark.org/)并在代理通过时对其进行嗅探。

# vmware - VMware 网络连接

> ID：14184456
> 
> 赞同：0
> 
> 时间：2013-01-06T16:59:52.027
> 
> 标签：vmware, vmware-workstation

我在计算机上的 VMware Workstation 9 上安装了 Windows 7。是否可以从第二个计算使用连接到这个虚拟 Windows？如果是这样，那么我是否也需要在第二台计算机上安装 Windows 才能通过 RDC 或其他方式使用虚拟计算机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:07:54.303

我不认为这应该是一个问题。您可以将虚拟机的网络适配器桥接到您的主机。这样，VM 将在您的网络上获得 IP。

只要操作系统支持远程桌面客户端，您就可以从任何计算机使用该 IP 地址连接到此 VM，就像从普通计算机一样。据我所知，Linux、Mac OS 等所有主要操作系统都支持 RDP。所以操作系统也不应该是一个问题。

如果您想从外部网络连接，您可以设置一个从路由器转发到您的虚拟机的 RDP 端口的端口。

# javascript - 为什么 Closure Compiler 会破坏这个 AngularJS 脚本？

> ID：14184457
> 
> 赞同：4
> 
> 时间：2013-01-06T17:00:00.390
> 
> 标签：javascript, playframework-2.0, angularjs, google-closure-compiler

我正在使用 Play Framework 2.0 (Scala) 测试 AngularJs。Play 使用 Closure 来最小化 Javascript 文件。

我的文件如下：

```
// Define a Module 'todoList' for Angular that will load the views. In this example the views are very simple, it's just to show
// the concept
angular.module('todoList', ['taskDoneFilter', 'todoServices']).
    config(['$routeProvider', function($routeProvider) {
        $routeProvider.
            when('/all', {templateUrl: 'assets/angular/all.html',   controller: TodoCtrl}).
            when('/task/:id', {templateUrl: 'assets/angular/task.html', controller: TaskDetailCtrl}).
            otherwise({redirectTo: '/all'});
    }]);

// This filter allows us to convert strings. In this case, it adds an extra tick besides a task indicating if it's done or no
angular.module('taskDoneFilter', []).filter('checkmark', function() {
    return function(input) {
        return input ? '\u2713' : '\u2718';
    };
});

// When running tests with Jasmine the jsRoutes object is not defined, which means we need to use a default route for the http call below
// This kind of defeats the purpose of retrieving the routes via Play instead of hardcoding them, as we need a fallback for the tests
// but I decided to leave the code just to see that we have the possibility, in case I find a way to improve this.
var tasksUrl = '/tasks/all';
if(!(typeof jsRoutes === "undefined")) {
  tasksUrl = jsRoutes.controllers.Application.tasks().url ;
}

// Definition of a Service, that stores all the REST requests independently from the controllers, facilitating change
angular.module('todoServices', ['ngResource']).
    factory('All', function ($resource) {
        return $resource(tasksUrl, {}, {
            //The data model is loaded via a GET request to the app
            query: {method: 'GET', params: {}, isArray: true}
        });
    })
    .factory('Task', function ($resource) {
        return $resource('tasks', {}, {
            add: {method: 'POST'}
        });
    });

/**
 * This is the controller behind the view, as declared by ng-controller
 * All references to methods and data model in the view map to this controller
 * @param $scope model data injected into the controller
 * @constructor
 */
var TodoCtrl = ['$scope', 'All', 'Task', function($scope, All, Task) {
    // We use the service to query for the data
    $scope.todos = All.query();

    //when submitting the form, this is called. Model in the form is referenced (todoText) and we add the task to
    //the data model
    $scope.addTodo = function() {
        var txt = $scope.todoText;
        $scope.todos.push({text: txt, done: false});
        Task.save({msg: txt});
        $scope.todoText = '';  //clear the input!
    };

    // calculates the remaining todos, automatically called when the model changes to update the view
    // notice the use of 'angular' component for functional approach
    $scope.remaining = function() {
        var count = 0;
        angular.forEach($scope.todos, function(todo) {
            count += todo.done ? 0 : 1;
        });
        return count;
    };

    //another acton triggered by click (in this case on an anchor), which archives completed tasks
    $scope.archive = function() {
        var oldTodos = $scope.todos;
        $scope.todos = [];
        angular.forEach(oldTodos, function(todo) {
            if (!todo.done) $scope.todos.push(todo);
        });
    };
}];

// Task details controller, used in the routes to provide a second view for the application
var TaskDetailCtrl = ['$scope', '$routeParams', function($scope, $routeParams) {
    $scope.id = $routeParams.id;
}]; 
```

但是当最小化时，它变成：

```
var module$todo={};angular.module("todoList",["taskDoneFilter","todoServices"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/all",{templateUrl:"assets/angular/all.html",controller:TodoCtrl$$module$todo}).when("/task/:id",{templateUrl:"assets/angular/task.html",controller:TaskDetailCtrl$$module$todo}).otherwise({redirectTo:"/all"})}]);angular.module("taskDoneFilter",[]).filter("checkmark",function(){return function(input){return input?"\u2713":"\u2718"}});
var tasksUrl$$module$todo="/tasks/all";if(!(typeof jsRoutes==="undefined"))tasksUrl$$module$todo=jsRoutes.controllers.Application.tasks().url;angular.module("todoServices",["ngResource"]).factory("All",function($resource){return $resource(tasksUrl$$module$todo,{},{query:{method:"GET",params:{},isArray:true}})}).factory("Task",function($resource){return $resource("tasks",{},{add:{method:"POST"}})});
var TodoCtrl$$module$todo=["$scope","All","Task",function($scope,All,Task){$scope.todos=All.query();$scope.addTodo=function(){var txt=$scope.todoText;$scope.todos.push({text:txt,done:false});Task.save({msg:txt});$scope.todoText=""};$scope.remaining=function(){var count=0;angular.forEach($scope.todos,function(todo){count+=todo.done?0:1});return count};$scope.archive=function(){var oldTodos=$scope.todos;$scope.todos=[];angular.forEach(oldTodos,function(todo){if(!todo.done)$scope.todos.push(todo)})}}];
var TaskDetailCtrl$$module$todo=["$scope","$routeParams",function($scope,$routeParams){$scope.id=$routeParams.id}]; 
```

然后它停止工作。注意：

```
var module$todo={}; 
```

和

```
var TodoCtrl$$module$todo= 
```

这打破了应用程序。

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T20:56:08.433

您的`All`&`Task`服务不是“最小化安全”。您必须使用[数组表示法](http://docs.angularjs.org/guide/di)。

```
angular.module('todoServices', ['ngResource']).
    factory('All', ['$resource', function ($resource) {
        return $resource(tasksUrl, {}, {
            //The data model is loaded via a GET request to the app
            query: {method: 'GET', params: {}, isArray: true}
        });
    }])
    .factory('Task', ['$resource', function ($resource) {
        return $resource('tasks', {}, {
            add: {method: 'POST'}
        });
    }]); 
```

另外，定义你的控制器`angular.module(...).controller()`：

```
angular.module(...).controller('TodoCtrl', ['$scope', 'All', 'Task', function($scope, All, Task) {
}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T18:22:22.510

...如果您有一个更大的应用程序，您可以通过打开 strictDi（引导调用或带有 ng-app 属性的标签中的 ng-strict-di 属性的选项）找到不使用命名引用的地方。

# python - 如何在布尔值数组中连续检测 5 个“真”值？

> ID：14184458
> 
> 赞同：-3
> 
> 时间：2013-01-06T17:00:10.230
> 
> 标签：python, arrays, boolean

也就是说，我正在寻找`true_row`这样的功能：

```
true_row([False, True, True, True, True, False, False]) 
```

返回`False`但

```
true_row([True, True, True, True, True, False, False]) 
```

返回`True`。

编辑：如果有帮助，我已将完整代码附在下面：

```
position_open = False

def initialize(context):
    context.stock = sid(26578)
    context.open_hours = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
    context.is_bullish = [False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False]
    context.first_check_minute = 1
    context.second_check_minute = 57

def handle_data(context, data):

    event_hour = data[context.stock].datetime.hour
    event_minute = data[context.stock].datetime.minute
    hour_open_price = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    hour_close_price = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

    global position_open

    # Hour 1 market direction checks

    if event_hour == context.open_hours[0] and event_minute == context.first_check_minute:
        hour_open_price[0] = data[context.stock].close_price

    if event_hour == context.open_hours[0] and event_minute == context.second_check_minute:
        hour_close_price[0] = data[context.stock].close_price

    if hour_open_price[0] < hour_close_price[0]:
        context.is_bullish[0] = True

    if hour_open_price[0] > hour_close_price[0]:
        context.is_bullish[0] = False

    # Hour 2 market direction checks

    if event_hour == context.open_hours[1] and event_minute == context.first_check_minute:
        hour_open_price[1] = data[context.stock].close_price

    if event_hour == context.open_hours[1] and event_minute == context.second_check_minute:
        hour_close_price[1] = data[context.stock].close_price

    if hour_open_price[1] < hour_close_price[1]:
        context.is_bullish[1] = True

    if hour_open_price[1] > hour_close_price[1]:
        context.is_bullish[1] = False

    # Same block repeated with different numbers x24 (edited out to reduce size)

    # Make Trades? - I want to edit this to detect if context.is_bullish has 5 trues in a row without needing to manually make more if statements like the one already below

    if event_hour in context.open_hours and context.is_bullish[0] == True and context.is_bullish[1] == True and context.is_bullish[2] == True and context.is_bullish[3] == True and context.is_bullish[4] == True and position_open == False:
        order(context.stock,+1000)
        log.info('Buy Order Placed')
        position_open = True

    if event_hour in context.open_hours and context.is_bullish[0] == False and position_open == True:
        order(context.stock,-1000)
        log.info('Buy Position Closed')
        position_open = False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:08:01.207

使用`itertools.groupby`，将一组相同的元素组合成一行：

```
import itertools
any(len(list(g)) >= 5 and k == True for k, g in itertools.groupby(lst)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:07:43.733

如果你有一个列表`l`，你可以使用

```
('True' * 5) in ''.join(map(str, l)) 
```

换句话说，您的功能将是

```
def true_row(row):
    return ('True' * 5) in ''.join(map(str, row)) 
```

* * *

```
>>> def true_row(row):
...     return ('True' * 5) in ''.join(map(str, row))
... 
>>> true_row([False, True, True, True, True, False, False])
False
>>> true_row([True, True, True, True, True, False, False])
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:41:59.383

~~如果我正确阅读了您的问题，那么您只对布尔计数感兴趣，而不是对连续的 True 值感兴趣。此外，您正在研究 a`List`而不是任何可迭代的。如果是这种情况，您可以简单地使用计数。我建议您将序列转换为 List 以确保您的结果在任何可迭代对象中都是一致的~~

 ~~```
def true_row(row):
    return list(row).count(True) >= 5 
```~~  ~~正如 OP 所解释的，他需要 5 个连续的布尔确认，在这种情况下，我会建议一种普通的循环和计数技术，它具有短路机制，可以在遇到连续 5 个 True 时退出搜索。在我测试的 1000 个数据的随机样本上，它的速度提高了 10 倍。我怀疑您可能需要在相当长的时间内遍历数千个股票数据，因此这将很有用。

```
def true_row(row, length = 5):
    count = - length
    for e in row:
        if e:
            count += 1
        else:
            count = -length
        if not count:
            return True
    return False 
```

## 现在速度测试

```
>>> seq = (choice([True, False]) for _ in xrange(1000))
>>> def David(seq):
    return any(len(list(g)) >= 5 and k == True for k, g in itertools.groupby(lst))

>>> def ARS(seq):
    return ('True' * 5) in ''.join(map(str, row))

>>> t_ab = timeit.Timer(stmt = "true_row(seq)", setup = "from __main__ import true_row, seq")
>>> t_david = timeit.Timer(stmt = "David(seq)", setup = "from __main__ import David, seq, itertools")
>>> t_ars = timeit.Timer(stmt = "ARS(seq)", setup = "from __main__ import ARS, seq")
>>> t_ab.timeit(number=1000000)
0.3180467774861455
>>> t_david.timeit(number=1000000)
10.293826538349393
>>> t_ars.timeit(number=1000000)
4.2967059784193395 
```

即使对于必须遍历整个序列的较小序列，这也更快

```
>>> seq = (choice([True, False]) for _ in xrange(10))
>>> true_row(seq)
False
>>> t_ab = timeit.Timer(stmt = "true_row(seq)", setup = "from __main__ import true_row, seq")
>>> t_david = timeit.Timer(stmt = "David(seq)", setup = "from __main__ import David, seq, itertools")
>>> t_ars = timeit.Timer(stmt = "ARS(seq)", setup = "from __main__ import ARS, seq")
>>> t_ab.timeit(number=1000000)
0.32354575678039055
>>> t_david.timeit(number=1000000)
10.270037445319304
>>> t_ars.timeit(number=1000000)
3.7353719451734833 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T17:46:37.237

这是一个为简单而设计的答案

```
def five_true(L):
    for i in range(len(L) - 5):
        if L[i:i + 5] == [True] * 5:
            return True
    return False 
```~~

# emacs - 全局设置键，但排除特定模式

> ID：14184460
> 
> 赞同：4
> 
> 时间：2013-01-06T17:00:12.470
> 
> 标签：emacs, elisp, emacs23

我正在尝试创建一个新的键绑定，它将在所有模式下都可以正常工作，除了一个模式，它与另一个模式冲突。例如：

```
(global-set-key (kbd "<C-S-down>") 'move-line-down) 
```

有没有一种简单的方法（不为特定的本地模式设置它）使其全局排除特定模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:24:17.817

你可以添加一个函数来`after-change-major-mode-hook`设置当前*本地*键盘映射中的键，除了你想避免的特定模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:48:39.153

如果要排除一种特定模式，可以执行以下操作：

```
(global-set-key (kbd "<C-S-down>") 'move-line-down) 
```

使其在全球范围内可用，并且

```
(define-key KEYMAP (kbd "<C-S-down>") nil) 
```

排除一种模式，其中 KEYMAP 是模式的名称，后跟“mode-map”（例如 ess-mode-map）。您还可以将原始事物绑定到键而不是`nil`.

# android - 检查哪个应用程序运行第二

> ID：14184461
> 
> 赞同：0
> 
> 时间：2013-01-06T17:00:22.083
> 
> 标签：android

我有个问题。我有一个大应用程序和一些小应用程序。大型应用程序需要 id 从 web 服务下载一些数据。那个id是从小aps得到的。我启动小应用程序并使用 intent.putExtra 从大应用程序向 MainActivity 发送 id。Schema 是这样的：运行小应用程序 -> 小应用程序发送 id 到大应用程序并运行它 -> MainActivity 获取 id 并从 web 服务获取一些数据 -> MainActivity 运行带有数据的 secondActivity。现在我遇到了一个问题，因为当我第一次启动应用程序时，我得到了正确的数据等。当我关闭应用程序并再次运行其他小应用程序时，我得到了正确的数据。但问题是当我运行第一个应用程序并且下载数据时我没有关闭应用程序，而是使用主页按钮并使用其他 ID 启动其他小应用程序。在这种情况下，大型应用程序不会从 MainActivity 开始。该应用程序从 secondActivity 的 onResume 开始，在 secondActivity 中我有旧的 id，所以我得到了错误的数据。我如何发送到 onResume 正确的 ID？当我单击主页按钮时，我正在考虑杀死大型应用程序，但这是一个糟糕的解决方案，因为我可以从菜单按钮启动其他应用程序。如何在 secondActivity 中检查 onResume 哪个应用程序启动大应用程序或发送到 onResume 好 id 并再次启动 MainActivity？也许你知道我该如何解决我的问题？如何在 secondActivity 中检查 onResume 哪个应用程序启动大应用程序或发送到 onResume 好 id 并再次启动 MainActivity？也许你知道我该如何解决我的问题？如何在 secondActivity 中检查 onResume 哪个应用程序启动大应用程序或发送到 onResume 好 id 并再次启动 MainActivity？也许你知道我该如何解决我的问题？

# asp.net-mvc - 在 Asp.net MVC 中缓存 id 或整个列表

> ID：14184464
> 
> 赞同：1
> 
> 时间：2013-01-06T17:00:35.787
> 
> 标签：asp.net-mvc, caching

我正在编写一个 Asp.Net MVC 应用程序，用户可以在其中导航到用户个人资料页面、评论页面等。这些页面具有列表形式的数据，即`List<Person>`等`List<profiledata>`。

我目前正在页面导航之间以用户 ID 作为键缓存整个列表。它是否被认为是一种更好的方法，还是我只需要缓存列表的内部 id 并从数据库中重新水合列表？

一次我可以有 1000 多个用户在线，这意味着我将在缓存中存储 1000 个列表！我正在使用实体框架、SqlServer 和 Asp.net MVC 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:49:12.530

mvc 背后的范例之一是无状态的想法。因此，在必要之前（可能出于性能原因），应避免将内容存储在缓存中。这是一篇关于 aps.net mvc 缓存的非常详尽的文章，可能会有所帮助：[http ://ofps.oreilly.com/titles/9781449320317/ch_Caching.html](http://ofps.oreilly.com/titles/9781449320317/ch_Caching.html)

# jquery - 动画高度内容不会消失

> ID：14184471
> 
> 赞同：0
> 
> 时间：2013-01-06T17:00:49.437
> 
> 标签：jquery, jquery-animate

当我使用这段代码时

```
$(function(){
  $('#myList').animate({
    height: '0px'
  }, 800);
}

<div id="myList">
  <h1 id="text"> Text Here </h1>
</div> 
```

div`#myList`将像预期的那样为高度设置动画，但`h1#text`在动画完成后仍然可见。

我如何使它工作，以便当高度`div#myList`变得如此之小以至于内容不适合并且会“消失”时？

注意：我刚刚注意到 h1 会“消失”，因为高度会像它应该的那样被动画化，但是它会闪烁并在函数完成时返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:11:33.010

div`#myList`需要`overflow:hidden;`在css中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:15:09.507

试试这个

```
$(function(){
  $('#myList').animate({
    height: '0px',
    overflow : 'hidden'
  }, 800);
} 
```

# javascript - Javascript 不会执行

> ID：14184472
> 
> 赞同：1
> 
> 时间：2013-01-06T17:00:50.880
> 
> 标签：javascript, html

我正在开发一个新网站。我以前编写过很多代码，但没有这个高级。我有一个 html 文件，它是主页。现在，我正在通过 ajax 更改页面的内容。一切正常。因此，当我单击“主页”菜单时，它会调用该函数，并获取另一个包含内容的 HTML 文件。

在我的主要 html 中，我有这个：

```
<html>
    <head>
    <title>
        Estancia
    </title>
    <link rel="stylesheet" href="css/stylesheet.css"/>
    <link rel="stylesheet" href="webfont/webFontStylesheet.css" type="text/css" charset="utf-8"/>
    <script type="text/javascript" src="js/ajax.js"></script>
</head>
<body onLoad = "javascript:home()">
    <div id = "bodyLeft">
        <!-- This is just a sideskirt -->
    </div>
    <div id = "bodyRight">
        <!-- This is just a sideskirt -->
    </div>

    <div id = "header">
        <h1>
            Estancia
        </h1>

    </div>
    <div id = "footer">
        <h5>
            Copyright&copy; 2013
        </h5>
    </div>
    <div id = "background">
        <!-- This is just the background color -->
    </div>
    <div id = "scrollCover">
        <!-- Used to cover the scrolled content -->
    </div>
    <div id = "body">

    </div>
    <div id = "content">
        If you see this then the page did not load correctly. Try reloading the page. If problem persists, try reinstalling the Mozilla Firefox Browser. <br/><br/> Error: Javascript may not be working. <br/> Fix: Enable Javascript in your browser.
    </div>
    <div id = "menu">
        <div id = "home" onClick="javascript:home()">
            <a href = "#"> Home </a>
        </div>
        <div id = "information">
            <a href = "#"> Information </a>
            <span id = "aboutDrop">
                <a class = "about" href="#" onClick = "javascript:about()"> About </a>
                <br/>
                <a class = "map" href="#" onClick = "javascript:map()"> Map </a>
            </span>
        </div>
        <div id = "history" onClick = "javascript:history()">
            <a href = "#"> History </a>
        </div>
        <div id = "pictureGallary">
            <a href = "#"> Picture Gallary </a>
            <span id = "pictureGalleryDrop">
                <a class = "ef" href = "#" onClick = "javascript:estanciaFarm()"> Estancia Farm </a>
                <br/>
                <a class = "ca" href = "#" onClick = "javascript:cattle()"> Cattle </a>
                <br/>
                <a class = "ga"href = "#" onClick = "javascript:game()"> Game </a>
                <br/>
                <a class = "go" href = "#" onClick = "javascript:goats()"> Goats </a>
                <br/>
                <a class = "sh" href = "#" onClick = "javascript:sheep()"> Sheep </a>
            </span>
        </div>
    </div>
</body> 
```

这里没有问题......当我点击它时，它会正确加载。因此，当单击 Home 时，它​​会通过 ajax 更改内容，如下所示：

```
var xmlhttp = new XMLHttpRequest();
    var path;
    var div;

function home()
{
    path = "html/home.html";
    div = "content";
    AJAX(path, div);
}

    function AJAX(path, div)
{
    xmlhttp.open("GET", path, false);
    xmlhttp.send();
    if (xmlhttp.readyState == 4)
    {
        document.getElementById(div).innerHTML = xmlhttp.responseText;
    }
} 
```

如您所见，它将另一个 html 文件加载到内容中。因此，这是该 html 文件的代码：

```
<html>
<head>
    <link rel="stylesheet" href="css/homeMenu.css"/>
    <script type="text/javascript" src="js/javascript.js"></script>
</head>
<body>
    <div id = "slideshow">
        <div id = "first">
            <img id = "a1" src = "images/home/img1_e.jpg"/>
            <img id = "a2" src = "images/home/img2_e.jpg"/>
            <img id = "a3" src = "images/home/img3_e.jpg"/>
            <img id = "a4" src = "images/home/img4_e.jpg"/>
        </div>
        <div id = "second">
            <img id = "b4" src = "images/home/img4_e.jpg"/>
            <img id = "b1" src = "images/home/img1_e.jpg"/>
            <img id = "b2" src = "images/home/img2_e.jpg"/>
            <img id = "b3" src = "images/home/img3_e.jpg"/>
        </div>
        <div id = "third">
            <img id = "c3" src = "images/home/img3_e.jpg"/>
            <img id = "c4" src = "images/home/img4_e.jpg"/>
            <img id = "c1" src = "images/home/img1_e.jpg"/>
            <img id = "c2" src = "images/home/img2_e.jpg"/>

        </div>
        <div id = "fourth">
            <img id = "d2" src = "images/home/img2_e.jpg"/>
            <img id = "d3" src = "images/home/img3_e.jpg"/>
            <img id = "d4" src = "images/home/img4_e.jpg"/>
            <img id = "d1" src = "images/home/img1_e.jpg"/>
        </div>
    </div>
    </body> 
```

当我自己加载这个 html 文件时，它工作正常。我需要更改的只是在每个图像路径的开头添加“../”。我相信你会知道为什么。快速的描述是如果它自己，它如果在另一个文件中，所以它需要返回一次。当它通过 ajax 加载到另一个 html 中时，它是主要的，它在每个文件之外并且只是进入它。好的，这很清楚。

问题......我面临的唯一问题是，当我自己加载 home.html 文件时，它执行它的 javascript 就像小菜一碟。

但是，当它加载到主 html 中时，它不起作用。它没有办法执行。我已经尝试过内部 javascript，但它仍然无法正常工作。

这是javascript：

```
var useBSNns;

        if (useBSNns)
        {
            if (typeof(bsn) == "undefined")
                bsn = {}
            var _bsn = bsn;
        }
        else
        {
            var _bsn = this;
        }

        _bsn.Crossfader = function (divs, fadetime, delay )
        {   
            this.nAct = -1;
            this.aDivs = divs;

            for (var i=0;i<divs.length;i++)
            {
                document.getElementById(divs[i]).style.opacity = 0;
                document.getElementById(divs[i]).style.position = "absolute";
                document.getElementById(divs[i]).style.filter = "alpha(opacity=0)";
                document.getElementById(divs[i]).style.visibility = "hidden";
            }

            this.nDur = fadetime;
            this.nDelay = delay;

            this._newfade();
        }

        _bsn.Crossfader.prototype._newfade = function()
        {
            if (this.nID1)
                clearInterval(this.nID1);

            this.nOldAct = this.nAct;
            this.nAct++;
            if (!this.aDivs[this.nAct]) this.nAct = 0;

            if (this.nAct == this.nOldAct)
                return false;

            document.getElementById( this.aDivs[this.nAct] ).style.visibility = "visible";

            this.nInt = 50;
            this.nTime = 0;

            var p=this;
            this.nID2 = setInterval(function() { p._fade() }, this.nInt);
        }

        _bsn.Crossfader.prototype._fade = function()
        {
            this.nTime += this.nInt;

            var ieop = Math.round( this._easeInOut(this.nTime, 0, 1, this.nDur) * 100 );
            var op = ieop / 100;
            document.getElementById( this.aDivs[this.nAct] ).style.opacity = op;
            document.getElementById( this.aDivs[this.nAct] ).style.filter = "alpha(opacity="+ieop+")";

            if (this.nOldAct > -1)
            {
                document.getElementById( this.aDivs[this.nOldAct] ).style.opacity = 1 - op;
                document.getElementById( this.aDivs[this.nOldAct] ).style.filter = "alpha(opacity="+(100 - ieop)+")";
            }

            if (this.nTime == this.nDur)
            {
                clearInterval( this.nID2 );

                if (this.nOldAct > -1)
                    document.getElementById( this.aDivs[this.nOldAct] ).style.visibility = "hidden";    

                var p=this;
                this.nID1 = setInterval(function() { p._newfade() }, this.nDelay);
            }
        }

        _bsn.Crossfader.prototype._easeInOut = function(t,b,c,d)
        {
            return c/2 * (1 - Math.cos(Math.PI*t/d)) + b;
        } 
```

拜托，当 home.html 被加载到主 html 中时它不想执行，但是当 home.html 自己执行时它可以工作，这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:24:38.033

我知道你已经为你所拥有的东西做了很多工作，但是查看一个 jQuery 插件可能会有所帮助，比如 Cycle。[http://malsup.com/jquery/cycle](http://malsup.com/jquery/cycle)

* * *

另一方面，您需要`<script type="text/javascript" src="js/javascript.js"></script>`从您正在检索的页面中删除，并将其放在您要从中加载辅助页面`Home.html`的文件的头部。`main.html`它将被称为不通过 AJAX 加载内联执行，这是您遇到的问题。所以我们把它移到了`main.html`，我们会在`home.html`页面加载时手动调用它。

当 AJAX 成功时，我已更改您的`AJAX`方法以采用回调方法或函数。您将看到`AJAX`方法的第三个参数是完成后要调用的函数，在我们的例子中，`startBSN`您将看到我`js/javascript`用这个方法将您的函数进一步包裹在哪里。

```
var xmlhttp = new XMLHttpRequest();
var path;
var div;

function home()
{
   path = "html/home.html";
   div = "content";
   AJAX(path, div, 'startBSN');
}

function AJAX(path, div, callback)
{
    xmlhttp.open("GET", path, false);
    xmlhttp.send();
    if (xmlhttp.readyState == 4)
    {
       document.getElementById(div).innerHTML = xmlhttp.responseText;
       window[callback]();
    }
} 
```

我已删除您的`js/javascript.js`并将其包含在 的头部中`main.html`，您应该将其从您的`home.html`

我还将您的`js/javascript.js`代码包装到一个可调用函数中，`startBSN`否则它将在页面加载时作为匿名函数运行。

这是您的`js.javascript`带有周围功能的文件`startBSN`

```
function startBSN(){
    var useBSNns;

    if (useBSNns)
    {
        if (typeof(bsn) == "undefined")
            bsn = {}
        var _bsn = bsn;
    }
    else
    {
        var _bsn = this;
    }

    _bsn.Crossfader = function (divs, fadetime, delay )
    {   
        this.nAct = -1;
        this.aDivs = divs;

        for (var i=0;i<divs.length;i++)
        {
            document.getElementById(divs[i]).style.opacity = 0;
            document.getElementById(divs[i]).style.position = "absolute";
            document.getElementById(divs[i]).style.filter = "alpha(opacity=0)";
            document.getElementById(divs[i]).style.visibility = "hidden";
        }

        this.nDur = fadetime;
        this.nDelay = delay;

        this._newfade();
    }

    _bsn.Crossfader.prototype._newfade = function()
    {
        if (this.nID1)
            clearInterval(this.nID1);

        this.nOldAct = this.nAct;
        this.nAct++;
        if (!this.aDivs[this.nAct]) this.nAct = 0;

        if (this.nAct == this.nOldAct)
            return false;

        document.getElementById( this.aDivs[this.nAct] ).style.visibility = "visible";

        this.nInt = 50;
        this.nTime = 0;

        var p=this;
        this.nID2 = setInterval(function() { p._fade() }, this.nInt);
    }

    _bsn.Crossfader.prototype._fade = function()
    {
        this.nTime += this.nInt;

        var ieop = Math.round( this._easeInOut(this.nTime, 0, 1, this.nDur) * 100 );
        var op = ieop / 100;
        document.getElementById( this.aDivs[this.nAct] ).style.opacity = op;
        document.getElementById( this.aDivs[this.nAct] ).style.filter = "alpha(opacity="+ieop+")";

        if (this.nOldAct > -1)
        {
            document.getElementById( this.aDivs[this.nOldAct] ).style.opacity = 1 - op;
            document.getElementById( this.aDivs[this.nOldAct] ).style.filter = "alpha(opacity="+(100 - ieop)+")";
        }

        if (this.nTime == this.nDur)
        {
            clearInterval( this.nID2 );

            if (this.nOldAct > -1)
                document.getElementById( this.aDivs[this.nOldAct] ).style.visibility = "hidden";    

            var p=this;
            this.nID1 = setInterval(function() { p._newfade() }, this.nDelay);
        }
    }

    _bsn.Crossfader.prototype._easeInOut = function(t,b,c,d)
    {
        return c/2 * (1 - Math.cos(Math.PI*t/d)) + b;
    }
} 
```

# sql - sql-mvn-plugin 按照 pom.xml 中列出的确切顺序执行文件

> ID：14184473
> 
> 赞同：6
> 
> 时间：2013-01-06T17:01:05.157
> 
> 标签：sql, maven, execution

我想就[sql-mvn-plugin](http://mojo.codehaus.org/sql-maven-plugin)寻求一些帮助。根据[文档](http://mojo.codehaus.org/sql-maven-plugin/execute-mojo.html#orderFile)，如果 pom.xml 文件没有关于文件顺序的任何内容 - *orderFile*标记 - 则文件将按照列出的确切顺序执行。但事实并非如此！如果我删除*orderFile*标记，则默认情况下将按升序执行文件。

老实说，我想在安装过程中使用这个插件来创建数据库和导入数据。由于我正在处理 20 多个表 - 脚本、表和序列以及约束被分成单独的文件 - 我无法处理没有有意义名称的文件。它本身就是地狱，使用这个插件将毫无价值。另一方面，我不想在 maven 之外进行这一步，因为在我的脑海中，maven 是构建、测试和部署我的应用程序的工具，也是避免脚本地狱的工具。

正如您在下面的示例中看到的，执行顺序没有定义，尽管在执行过程中执行的第一个文件是 *procedures/test_activate_all_partners.sql*，它是文件顺序中的倒数第二个！在我的理解中，第一个执行的文件应该是 *tables/datapoint_component_types/table.sql*。

我的 pom.xml：

```
 <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>sql-maven-plugin</artifactId>
                <version>1.5</version>
                <dependencies>
                    <dependency>
                        <groupId>postgresql</groupId>
                        <artifactId>postgresql</artifactId>
                        <version>9.1-901.jdbc4</version>
                    </dependency>            
                </dependencies>
                <configuration>
                    <driver>org.postgresql.Driver</driver>
                    <url>jdbc:postgresql://localhost:5432/database</url>
                    <username>postgres</username>
                    <password>postgres</password>
                </configuration>
                <executions>
                    <execution>
                        <id>default-cli</id>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                        <configuration>
                            <delimiter>/</delimiter>
                            <delimiterType>normal</delimiterType>
                            <autocommit>true</autocommit>
                            <fileset>
                                <!-- at home -->
                                <basedir>d:/PRIVAT/Projects/java/bigProject/</basedir>
                                <includes>
                                    <!-- tables -->
                                    <include>tables/datapoint_component_types/table.sql</include>
                                    <include>tables/datapoint_datapoint_components/table.sql</include>
                                    <include>tables/datapoint_java_result_types/table.sql</include>
                                    <include>tables/datapoint_postgres_result_types/table.sql</include>
                                    <include>tables/datapoint_result_types/table.sql</include>
                                    <include>tables/datapoints/table.sql</include>
                                    <include>tables/datatype_descs/table.sql</include>
                                    <include>tables/datatypes/table.sql</include>
                                    <include>tables/disabled_period/table.sql</include>
                                    <include>tables/file_extensions/table.sql</include>
                                    <include>tables/logs/table.sql</include>
                                    <include>tables/partner_datatypes/table.sql</include>
                                    <include>tables/partner_processes/table.sql</include>
                                    <include>tables/partner_protocols/table.sql</include>
                                    <include>tables/partner_protocols_attributes_details/table.sql</include>
                                    <include>tables/partners/table.sql</include>
                                    <include>tables/process_step/table.sql</include>
                                    <include>tables/process_step_actions/table.sql</include>
                                    <include>tables/process_steps_param/table.sql</include>
                                    <include>tables/process_steps_partner_processes/table.sql</include>
                                    <include>tables/processes/table.sql</include>
                                    <include>tables/protocol_attributes/table.sql</include>
                                    <include>tables/protocols/table.sql</include>
                                    <include>tables/result_tables/table.sql</include>
                                    <include>tables/valid_period/table.sql</include>
                                    <!-- constrains -->
                                    <include>tables/datapoint_component_types/sequences.sql</include>
                                    <include>tables/datapoint_datapoint_components/sequences.sql</include>
                                    <include>tables/datapoint_java_result_types/sequences.sql</include>
                                    <include>tables/datapoint_postgres_result_types/sequences.sql</include>
                                    <include>tables/datapoint_result_types/sequences.sql</include>
                                    <include>tables/datapoints/sequences.sql</include>
                                    <include>tables/datatype_descs/sequences.sql</include>
                                    <include>tables/datatypes/sequences.sql</include>
                                    <include>tables/disabled_period/sequences.sql</include>
                                    <include>tables/file_extensions/sequences.sql</include>
                                    <include>tables/logs/sequences.sql</include>
                                    <include>tables/partner_datatypes/sequences.sql</include>
                                    <include>tables/partner_processes/sequences.sql</include>
                                    <include>tables/partner_protocols/sequences.sql</include>
                                    <include>tables/partner_protocols_attributes_details/sequences.sql</include>
                                    <include>tables/partners/sequences.sql</include>
                                    <include>tables/process_step/sequences.sql</include>
                                    <include>tables/process_step_actions/sequences.sql</include>
                                    <include>tables/process_steps_param/sequences.sql</include>
                                    <include>tables/process_steps_partner_processes/sequences.sql</include>
                                    <include>tables/processes/sequences.sql</include>
                                    <include>tables/protocol_attributes/sequences.sql</include>
                                    <include>tables/protocols/sequences.sql</include>
                                    <include>tables/result_tables/sequences.sql</include>
                                    <include>tables/valid_period/sequences.sql</include>
                                    <!-- sequences -->
                                    <include>tables/datapoint_component_types/constraints.sql</include>
                                    <include>tables/datapoint_datapoint_components/constraints.sql</include>
                                    <include>tables/datapoint_java_result_types/constraints.sql</include>
                                    <include>tables/datapoint_postgres_result_types/constraints.sql</include>
                                    <include>tables/datapoint_result_types/constraints.sql</include>
                                    <include>tables/datapoints/constraints.sql</include>
                                    <include>tables/datatype_descs/constraints.sql</include>
                                    <include>tables/datatypes/constraints.sql</include>
                                    <include>tables/disabled_period/constraints.sql</include>
                                    <include>tables/file_extensions/constraints.sql</include>
                                    <include>tables/logs/constraints.sql</include>
                                    <include>tables/partner_datatypes/constraints.sql</include>
                                    <include>tables/partner_processes/constraints.sql</include>
                                    <include>tables/partner_protocols/constraints.sql</include>
                                    <include>tables/partner_protocols_attributes_details/constraints.sql</include>
                                    <include>tables/partners/constraints.sql</include>
                                    <include>tables/process_step/constraints.sql</include>
                                    <include>tables/process_step_actions/constraints.sql</include>
                                    <include>tables/process_steps_param/constraints.sql</include>
                                    <include>tables/process_steps_partner_processes/constraints.sql</include>
                                    <include>tables/processes/constraints.sql</include>
                                    <include>tables/protocol_attributes/constraints.sql</include>
                                    <include>tables/protocols/constraints.sql</include>
                                    <include>tables/result_tables/constraints.sql</include>
                                    <include>tables/valid_period/constraints.sql</include>
                                    <!-- procedures -->
                                    <include>procedures/test_activate_all_partners.sql</include>
                                    <!-- testdata -->
                                    <include>testdata/data.sql</include>
                                </includes>
                            </fileset>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

输出：

```
d:/PRIVAT/Projects/java/bigProject>mvn sql:execute
[INFO] Scanning for projects...
...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building EJB 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- sql-maven-plugin:1.5:execute (default-cli) @ DiLibCoreEJB ---
[INFO] Executing file: sql\procedures\test_activate_all_partners.sql
[INFO] Executing file: sql\tables\datapoints\constraints.sql
[ERROR] Failed to execute:
 ALTER TABLE
 datapoints
 ADD
 CONSTRAINT datapoints_pkey PRIMARY KEY (datapoint_id );

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.503s
[INFO] Finished at: Sun Jan 06 17:49:40 CET 2013
[INFO] Final Memory: 4M/77M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:sql-maven-plugin:1.5:execute (default-cli) on project DiLibCoreEJB: ERROR: relation "datapoints" does not exist -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
d:/PRIVAT/Projects/java/bigProject> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T08:33:01.363

也许我误解了一些事情，但[文档的摘录](http://www.mojohaus.org/sql-maven-plugin/execute-mojo.html#Optional_Parameters)说：

> 包含要加载的 SQL 语句的文件。如果您想使用类似 ant 的文件模式，请仅使用 Fileset，否则使用`srcFiles`. 该顺序基于扫描目录时的匹配事件（不是包含的顺序！）

这意味着您应该使用`srcFiles`而不是`includes`. 意思是这样的：

```
<configuration>
  <srcFiles>
    <srcFile>first.sql</srcFile>
    <srcFile>second.sql</srcFile>
    <srcFile>a.sql</srcFile>
    ..
  </srcFiles>
  .
</configuration> 
```

顺便说一句：配置中的绝对路径：

```
d:/PRIVAT/Projects/java/bigProject/ 
```

应该避免。

# android - Android 通过单独线程上的处理程序更新 TextView

> ID：14184474
> 
> 赞同：3
> 
> 时间：2013-01-06T17:01:13.060
> 
> 标签：android, multithreading, textview, android-edittext, handler

我目前正在为 Uni 开发我的第一个 Android 应用程序。我正在慢慢到达那里，但我被困在某个部分。

该课程作业需要一个独立于 UIthread 的线程。我的想法是用户可以在 Name_edit.java 中设置他们的名字，然后当他们去 board.java （不同的活动）时，两个文本视图现在显示输入的内容

在 Name_edit.xml 我有两个编辑文本。

在 board.java 我有两个文本视图（当前分别设置为 P1 和 P2）。在 OnCreate() 中，我目前正在处理一个处理程序，以从 (name_edit) 两个编辑文本中获取两个值并将其设置为文本视图。我相信这将需要两个处理程序（每个值一个）。在 board.java 中，我完成了标准的 findViewById。

有关处理程序和线程的任何帮助都会有所帮助。

我会发布我的处理程序代码，但它正在不断变化。我正在做的是

```
handler = new Handler() {
    public void handleMessage (Message msg) {
        TextViewP1.setText(msg)
    }
}; 
```

注意 msg 当前未设置为 name_edit 中的编辑文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:57:45.350

你试过`runOnUiThread()`吗？UI 元素只能从 UI 线程更改，并且您的处理程序在其自己的线程上运行。

```
handler = new Handler() {
    public void handleMessage (Message msg) {
        ((Activity)context).runOnUiThread(new Runnable() {
            public void run() {
               TextViewP1.setText(msg);
            }
        });
    }
} 
```

如果您的处理程序在您的 Activity 类中，`context`则可以替换为where 。`[class name].this`

文档： http: [//developer.android.com/reference/android/app/Activity.html#runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable) (java.lang.Runnable )

# c# - 获取左上角坐标

> ID：14184475
> 
> 赞同：0
> 
> 时间：2013-01-06T17:01:15.300
> 
> 标签：c#, silverlight, windows-phone-7

我想阻止点击事件在 XNA / Silverlight 游戏中传播

在这里 [https://gamedev.stackexchange.com/questions/27029/how-to-stop-a-tap-event-from-propagating-in-a-xna-silverlight-game](https://gamedev.stackexchange.com/questions/27029/how-to-stop-a-tap-event-from-propagating-in-a-xna-silverlight-game) 我找到了解决方案我应该怎么做。

得到`width`和`height`我使用`ActualHeight`和`ActualWidth`财产。

但是我怎样才能得到左上角坐标呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:07:44.217

您可以使用[Left](http://msdn.microsoft.com/en-us/library/system.windows.window.left(v=vs.95).aspx)和[Top](http://msdn.microsoft.com/en-us/library/system.windows.window.top(v=vs.95).aspx)属性来获取控件的位置。

# oop - OOP - 嵌套对象依赖的长链是反模式吗？

> ID：14184479
> 
> 赞同：4
> 
> 时间：2013-01-06T17:01:51.347
> 
> 标签：oop, dependency-injection

我正在尝试编写使用依赖注入的代码，以允许模拟并具有更清晰、更明确的设计。

我经常发现自己遇到了一个我认为很常见的特定问题，但我还没有在网上找到任何可以帮助我克服它的东西。

问题是对象 A 依赖于 B，B 依赖于 C，C 依赖于 D，等等，在一个可能有许多链接的链中。

似乎要在这里练习依赖注入，A 必须在其构造函数中请求 B、C、D 等（或 BFactory、CFactory 等创建它们所依赖的实例的对象）。为了论证，我假设依赖项不是可选的或仅限于特定的方法，这使得 setter 注入或方法参数注入不合适。

这向我表明，依赖对象的长链是一种反模式。在抽象意义上，它与箭头反模式有一些共同点。依赖对象的长链形成一个箭头形的序列图。

那么，也许我应该避免这种做法，并遵循“Python 之禅”中“平面优于嵌套”的建议。这表明主程序创建两个或三个对象，它们协作并产生返回给主程序的结果，然后创建另外两个或三个对象来完成下一阶段的工作，依此类推。

我觉得这种代码很容易理解和调试，也很容易进行依赖注入。但这似乎违背了Tell Don't Ask原则，并且使主程序过于肥大。我喜欢 main 如此小且如此明显以至于不需要单元测试的想法。Tell Don't Ask 对我说，如果一切都以 A 开头并以 A 结尾，那么这是 A 的责任。假设 A 是一位被计费的客户，该客户拥有开始计费流程所需的数据以及发票需要在最后发送到的电子邮件地址。然后似乎 A 应该自己完成工作（main 可以调用 Customer.billYourself()），而不是通过向 main 提供一堆发票和一个电子邮件地址将责任交还给 main。

那么，我应该避免依赖链，使 DI 更容易，还是因为 Tell Don't Ask 而拥抱它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T00:26:36.037

类有很多依赖。这只是生活中的事实。但正是**这些类如何相互依赖**才能使整个事情变得好或坏。

您应该阅读有关[稳定依赖原则](https://docs.google.com/file/d/0BwhCYaYDn8EgZjI3OTU4ZTAtYmM4Mi00MWMyLTgxN2YtMzk5YTY1NTViNTBh/edit?hl=en)的信息。如果您遵循此规则，则依赖项的数量应该不是问题：

> 设计中包之间的依赖关系应该以包的稳定性为导向。一个包应该只依赖于比它更稳定的包。

有好的依赖，也有不好的依赖：

> 因此，我们可以说“良好的依赖”是对波动性较低的事物的依赖。依赖目标的波动性越小，依赖就越“好”。同样，“不良依赖”是对易变事物的依赖。依赖的目标越不稳定，依赖就越“坏”。

构建您的应用程序以具有良好的依赖关系。

# asp.net - 测试缓存状态的工具或实用程序

> ID：14184482
> 
> 赞同：0
> 
> 时间：2013-01-06T17:02:05.067
> 
> 标签：asp.net, testing, browser-cache

根据要求，我们必须从每个 ASP.NET 网页中删除代理缓存。测试代理缓存是否从页面中删除的最佳工具是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:57:07.907

如果“删除”过程是从 aspx 文件中删除一个属性，那么只需在文件中使用 Visual Studio 编辑/查找和替换/查找，将搜索字符串设置为应该已删除的缓存属性并将搜索限制为*.aspx。任何结果都表明页面未被修改。

# session - 如何在管理上使使用“记住我”选项的会话无效？

> ID：14184484
> 
> 赞同：4
> 
> 时间：2013-01-06T17:02:22.283
> 
> 标签：session, symfony-2.1, remember-me

我正在使用 Symfony 2.1.6 和 PdoSessionStorage。我正在尝试将 Facebook 具有的相同功能添加到我的应用程序中，您可以在其中向用户显示他们与网站的所有活动会话（显示基于 IP 的设备类型和位置）并允许他们结束任何会话（如果看起来）可疑的。

从 PdoSessionStorage 表中删除记录不起作用，因为一旦我在该会话中再次执行活动，Symfony 就会再次自动重新创建记录（而不是 Symfony 检测到该会话已被删除并因此强制用户重新-认证）。

是否有任何选项可以强制使用“记住我”的会话重新向系统进行身份验证？

谢谢你的帮助。

# java - 数组上的 if 语句

> ID：14184485
> 
> 赞同：1
> 
> 时间：2013-01-06T17:02:32.610
> 
> 标签：java, primitive-types, comparison-operators

我有以下java位

```
if(board[i][col].equals(true))
    return false 
```

但是，当我编译它时，我收到以下错误 - “int cannot be dereferenced” - 谁能解释一下这是什么意思？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T17:04:03.533

它可能是一组原始类型（`int`？）。

用`==`，就好了。但如果是`int`，请确保您没有将其与`true`：Java 是强类型的。

`equals`当您想测试两个不同对象的相等性时使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T17:10:14.033

```
 // Assuming
    int[][] board = new int[ROWS][COLS];

    // In other languages, such as C and C++, an integer != 0 evaluates to true
    // if(board[i][col]) //this wont work, because Java is strongly typed.

    // You'd need to do an explicit comparison, which evaluates to a boolean
    // for the same behavior.
    // Primitives don't have methods and need none for direct comparison:
    if (board[i][col] != 0)
        return false;

    // If you expect the value of true to be 1:
    if (board[i][col] == 1)
        return false;

    // Assuming
    boolean[][] board = new boolean[ROWS][COLS];

    if (board[i][col] == true)
        return false;

    // short:
    if (board[i][col])
        return false;

    // in contrast
    if (board[i][col] == false)
        return false;

    // should be done using the logical complement operator (NOT)
    if (!board[i][col])
        return false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T17:16:59.070

使用以下声明：

```
boolean[][] board = initiate.getChessboard(); 
```

您需要使用以下条件：

```
if(board[i][col] == true)
    return false; 
```

也可以这样写：

```
if(board[i][col])
    return false; 
```

这是因为`equals`仅适用于对象，而 boolean 不是对象，它是原始类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T18:15:37.610

如果`board`是基元数组`boolean`，请使用

```
if(board[i][col] == true)
  return false; 
```

或者

```
if (board[i][col]) return false; 
```

或者

```
return !board[i][col]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T17:11:30.773

```
if(board[i][col])
    return false 
```

如果作为比较的数组`boolean[][]`是用`==`. 并且比较`== true`也可以省略。

# objective-c - CoreData 获取请求 - 复杂谓词

> ID：14184486
> 
> 赞同：1
> 
> 时间：2013-01-06T17:02:34.747
> 
> 标签：objective-c, ios, core-data, nspredicate, key-value-coding

我将如何使用（理想情况下）带有键值编码集合运算符的单个谓词来简化这一点？（最后感兴趣的数组是`filteredGames`。）

```
NSManagedObjectContext *context;
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Game" inManagedObjectContext:context];
NSArray *games = [context executeFetchRequest:request error:nil];

NSMutableArray *filteredGames = [[NSMutableArray alloc] init];
for (Game *game in games) {
    NSInteger maxRoundNumber = [game.rounds valueForKeyPath:@"@max.number"];
    Round *maxRound = [[game.rounds filteredSetUsingPredicate:[NSPredicate predicateWithFormat:@"number = %d", maxRoundNumber]] anyObject];
    if (maxRound.someBoolProperty)
        [filteredGames addObject:game];
} 
```

游戏有 的`NSSet`属性`rounds`，`Rounds`并且`Round`有 的`NSInteger`属性`number`，我正在寻找那些`Games`最高数`Round`有一些`BOOL`属性的人`someBoolProperty`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:46:50.070

这似乎做你想做的事：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Game"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY SUBQUERY(rounds, $r, $r.someBoolProperty = YES).number = @max.rounds.number"]; 
```

# asp.net - VS2012中Web应用程序和Web表单应用程序的区别

> ID：14184490
> 
> 赞同：6
> 
> 时间：2013-01-06T17:03:06.173
> 
> 标签：asp.net, visual-studio-2012

Visual Studio 2012 中的**Web 应用程序**和**Web 窗体应用程序**有什么区别？

![](../Images/d30934d207b8121e973a9f8e9e77681f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T17:58:20.520

线索就在“空”这个词中。

第一个（在您的图像中突出显示）选项是一个空白项目。

后续选项设置具有适当目录结构和一组默认页面和支持代码的 Web 窗体、MVC3 或 MVC4 项目。

# php - Jquery Autocomplete“几乎”工作，但列表没有完全填充

> ID：14184492
> 
> 赞同：0
> 
> 时间：2013-01-06T17:03:11.837
> 
> 标签：php, json, jquery-ui, autocomplete, jquery-autocomplete

我正在尝试在 jquery 中使用自动完成功能，它适用于演示数据，但我无法使其适用于我自己的数据源。我正在尝试编写一个邮件程序，用户只需输入几个字母的人名，联系人数据库有助于自动完成，以便相应的电子邮件显示在“收件人”字段中。

我已包含以下文件：

```
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

我在 document.load 中的 jQuery 代码如下：

```
 $(function() {
    function log( message ) {
        $('#to').append(message);
        console.log(message);
    }

   $( "#search" ).autocomplete({
        source: "search.php",
        minLength: 2,
        select: function( event, ui ) {
     log( ui.item? ui.item.email : "NO" );
        }
    }); 
}); 
```

我的 HTML 是：

```
<div class='ui-widget'><input type='text' class='medium' id='search' /></div> <br />
To:<br />
<div class='ui-widget'> <textarea type='text' style='width:80%; height:24px;' id='to' class='ui-widget-content'></textarea></div> 
```

就 json 而言，search.php 的结果很好，这是按下字母“Ahmed”时的输出示例：

```
[{"email":"saddi@yahoo.com","name":"Ahmed Qasim"},{"email":"aaaab@alangari.com.sa","name":"Ahmed Abbas"},{"email":"mokhlef@yahoo.com","name":"Ahmed Sahdi"}] 
```

我知道我从 search.php 得到了这个响应，因为我检查了 Firebug 并看到了它，但它没有显示在搜索输入字段下方......相反，显示的只是一个列表的树桩.. . 如下图所示。

![在此处输入图像描述](../Images/4e7b6a2a4fff649b5df4cb304a82f12e.png)

但是当我在这里使用演示代码时，这完全一样的事情按预期工作：[演示](http://jqueryui.com/autocomplete/#remote)为什么列表没有正确显示？可以显示多少数据有限制吗？我只粘贴了我得到的 JSON 输出中的 3 个条目，但有几十个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:29:49.707

我认为keune有正确的诊断。如果您不想更改 search.php 的输出，可以执行以下操作：

```
 $( "#search" ).autocomplete({
                source: function (request, response) {

                    $.ajax({
                        url: "search.php",
                        type: "POST",
                        dataType: "json",
                        data: { searchText: myQuery, maxResults: 10 },
                        success: function(data) {
                            var mappedData = $.map(data,
                                function(item) {
                                    return {
                                        label: item.name,
                                        value: item.email,
                                        id: item.email
                                    };
                                });

                            response(mappedData);
                            }
                        });
                }, .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:14:16.623

您从服务器返回的内容包含`email`和`name`字段，jquery ui 需要一个`value`和`label`字段。

```
[{"label":"Ahmed Abbas", value: "Ahmed Abbas"}] 
```

`label`是您在自动完成列表中看到的内容，`value`也是您选择项目时获得的值。

# c++ - 使用 SendInput API 的最佳实践

> ID：14184493
> 
> 赞同：2
> 
> 时间：2013-01-06T17:03:15.350
> 
> 标签：c++, winapi, sendinput

我正在开发一个自动化测试库，并希望使用[SendInput Win32 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)模拟鼠标和键盘输入。此 API 允许在一次 API 调用中推送多个输入项。整个 Web 上还有许多其他示例和类似的库使用 SendInput。他们中的许多人为每次调用 API 传递一个输入操作。批量输入或每次调用 SendInput 使用单个输入是否有任何优势？该文档似乎没有提供指导，或者我误读了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:03:25.560

与我所知道的另一种技术相比，一种技术没有真正的好处。在任何一种情况下，SendInput 的常见潜在问题是输入焦点可能会在您发送输入和目标应用程序接收输入之间发生变化。典型的例子是一个模态对话框异步出现以提醒用户一些问题，并最终窃取焦点，并吸收应该去其他地方的剩余输入。在这种情况下，执行一系列连续的 SendInput 与单个 SendInput 没有区别。

（我很确定在内部，SendInput 只是循环传递给它的输入......）

# css - 使用 CSS3 分割圆

> ID：14184494
> 
> 赞同：32
> 
> 时间：2013-01-06T17:03:20.630
> 
> 标签：css, css-shapes

我知道您可以使用边框半径 hack 在 CSS3 中制作一个圆圈。但是有什么办法可以让它们有像这张图这样的片段吗？有没有办法通过 HTML 和 CSS 而不是 JS 做到这一点？

![在此处输入图像描述](../Images/2ed18302156cf3516cc4aa3f4ce94cc1.png)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-06T19:25:33.427

是的，您可以使用以下两种方法之一获得这样的自定义角度切片：

1.  如果你不需要切片本身就是元素，你可以简单地用一个元素和线性渐变来做——看看我上个月做的这个[**彩虹轮。**](http://codepen.io/thebabydino/pen/hkxGp)
2.  如果您需要将切片本身作为元素，那么您可以通过链接旋转和倾斜变换来实现 - 请参阅我不久前做的这个[**圆形菜单。**](http://dabblet.com/gist/3912488)

对于＃2，另请参阅我现在所做的这个非常简化的[**示例。**](http://dabblet.com/gist/4469797)

```
.pie {
  overflow:hidden;
  position: relative;
  margin: 1em auto;
  border: dashed 1px;
  padding: 0;
  width: 32em; height: 32em;
  border-radius: 50%;
  list-style: none;
}
.slice {
  overflow: hidden;
  position: absolute;
  top: 0; right: 0;
  width: 50%; height: 50%;
  transform-origin: 0% 100%; 
}
.slice:first-child {
  transform: rotate(15deg) skewY(-22.5deg);
}
.slice-contents {
  position: absolute;
  left: -100%;
  width: 200%; height: 200%;
  border-radius: 50%;
  background: lightblue;
}
.slice:first-child .slice-contents {
  transform: skewY(22.5deg); /* unskew slice contents */
}
.slice:hover .slice-contents { background: violet; } /* highlight on hover */
```

```
<ul class='pie'>
  <li class='slice'>
    <div class='slice-contents'></div>
  </li>
  <!-- you can add more slices here -->
</ul>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-06T17:35:16.100

是的，你可以： http: [//jsfiddle.net/elias94xx/3rx7w/，http](http://jsfiddle.net/elias94xx/3rx7w/) : [//jsfiddle.net/elias94xx/3rx7w/2/](http://jsfiddle.net/elias94xx/3rx7w/2/)

```
#chart {
  width: 0;
  height: 0;
  border-right: 60px solid purple;
  border-top: 60px solid transparent;
  border-left: 60px solid transparent;
  border-bottom: 60px solid transparent;
  border-radius: 60px;
  -moz-border-radius: 60px;
  -webkit-border-radius: 60px;
}
```

```
<div id="chart"></div>
```

```
.chart {
  position: absolute;
  width: 0;
  height: 0;
  border-radius: 60px;
  -moz-border-radius: 60px;
  -webkit-border-radius: 60px;
}

#chart1 {
  border-right: 60px solid red;
  border-top: 60px solid transparent;
  border-left: 60px solid transparent;
  border-bottom: 60px solid transparent;
}

#chart2 {
  border-right: 60px solid transparent;
  border-top: 60px solid green;
  border-left: 60px solid transparent;
  border-bottom: 60px solid transparent;
}

#chart3 {
  border-right: 60px solid transparent;
  border-top: 60px solid transparent;
  border-left: 60px solid blue;
  border-bottom: 60px solid transparent;
}

#chart4 {
  border-right: 60px solid transparent;
  border-top: 60px solid transparent;
  border-left: 60px solid transparent;
  border-bottom: 60px solid yellow;
}
```

```
<div id="chart1" class="chart"></div>
<div id="chart2" class="chart"></div>
<div id="chart3" class="chart"></div>
<div id="chart4" class="chart"></div>
```

资料来源： http: [//www.paulund.co.uk/how-to-create-different-shapes-in-css](http://www.paulund.co.uk/how-to-create-different-shapes-in-css)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-20T02:07:13.330

您可以使用 html`li`元素和一些 css`transform`来表示圆的每个切片。

棘手的部分是`transform`. 在这种情况下，我将圆圈分成 5 片。计算如下。 `360/5=72 -> rotate` `72+90=162 -> skewY`

```
.sliceWrapper {
  position: relative;
  border: 1px solid black;
  padding: 0;
  width: 200px;
  height: 200px;
  border-radius: 50%;
  list-style: none;
  overflow: hidden;
}

.slice {
  position: absolute;
  left: -100%;
  width: 200%;
  height: 200%;
}

li {
  overflow: hidden;
  position: absolute;
  top: -50%;
  right: -50%;
  width: 100%;
  height: 100%;
  transform-origin: 0% 100%;
}

li:first-child {
  transform: rotate(0deg) skewY(162deg);
}

li:nth-child(2) {
  transform: rotate(72deg) skewY(162deg);
}

li:nth-child(3) {
  transform: rotate(144deg) skewY(162deg);
}

li:nth-child(4) {
  transform: rotate(216deg) skewY(162deg);
}

li:nth-child(5) {
  transform: rotate(288deg) skewY(162deg);
}

li:first-child .slice {
  background: green;
}

li:nth-child(2) .slice {
  background: tomato;
}

li:nth-child(3) .slice {
  background: aqua;
}

li:nth-child(4) .slice {
  background: yellow;
}

li:nth-child(5) .slice {
  background: blue;
}
```

```
<ul class="sliceWrapper">
  <li>
    <div class="slice"></div>
  </li>
  <li>
    <div class="slice"></div>
  </li>
  <li>
    <div class="slice"></div>
  </li>
  <li>
    <div class="slice"></div>
  </li>
  <li>
    <div class="slice"></div>
  </li>
</ul>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-29T13:18:03.773

您可以使用圆锥渐变

圆锥渐变基本上围绕形状，如圆形，从 0° 到 360°。

这是一个基本的圆锥渐变，带有一个圆圈：

```
div {
    width: 500px;
    height: 500px;
    border-radius: 9999px;
    background: red; /* fallback */
    background: conic-gradient(red, orange, yellow, green, blue, purple);
}
```

```
<div></div>
```

使用色标，我们可以神奇地把它变成段：

```
div {
    width: 500px;
    height: 500px;
    border-radius: 9999px;
    background: red; /* fallback */
    background: conic-gradient(red 10%, orange 10%, orange 30%, yellow 30%, yellow 50%, green 50%, green 60%, blue 60%, blue 70%, purple 70%);
}
```

```
<div></div>
```

可选地，如果我们只想要一个切片，我们现在可以改变它，所以我们只有一种颜色，现在我们很高兴:)

```
div {
    width: 500px;
    height: 500px;
    border-radius: 9999px;
    background: red; /* fallback */
    background: conic-gradient(#0000 40%, red 40%, red 70%, #0000 70%);
}
```

```
<div></div>
```

# c# - 试图找出这个正则表达式模式

> ID：14184499
> 
> 赞同：0
> 
> 时间：2013-01-06T17:03:35.800
> 
> 标签：c#, regex, expression

所以我有一个字符串，我试图从中删除一些值。我一直在使用这个正则表达式测试器来试图解决这个问题：http: [//derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

这是我要解析的字符串：

```
9   2.27.8.18:2304        63   9dd0e5e7344adac5cf49b7882329df25(OK) Any number of characters follow here 
```

基本格式如下：

```
INT IP:PORT INT MD5-HASH(OK) STRING 
```

这是我到目前为止所获得的：

```
(?<line_id>[0-9]{1,3})(?<ip>.+):(?<port>[0-9]{1,5})(?<guid>.+)\(OK\)(?<name>.+) 
```

这些是我迄今为止能够剥离的价值观：

```
9 (line_id)
2.27.8.18 (ip)
2304 (port)
63   9dd0e5e7344adac5cf49b7882329df25(guid)
Any number of characters follow here (name) 
```

如果您尝试我在上面发布的示例文本和模式，您可以看到除了端口号和 md5 哈希 (guid) 之间的整数之外的所有内容。我可能犯了一些业余错误，因为我对正则表达式模式不太熟悉，所以任何输入都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:09:20.940

`.+`通常是一个坏主意，因为它会贪婪地匹配字符串中的任何字符。

```
(?<line_id>[0-9]{1,3})[\s]+(?<ip>[0-9\.]+):(?<port>[0-9]{1,5})[\s]+(?<int>[0-9]{1,5})[\s]+(?<guid>[a-z0-9]+)\(OK\)(?<name>.+) 
```

这产生：

```
9 (line_id)
2.27.8.18 (ip)
2304 (port)
63 (int)
9dd0e5e7344adac5cf49b7882329df25 (guid)
 Any number of characters follow here (name) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:10:06.717

整数的捕获丢失。
我在这里添加了一个名为`int`.

尝试这个：

```
(?<line_id>[0-9]{1,3})(?<ip>.+):(?<port>[0-9]{1,5})\s+(?<int>[0-9]+)\s+(?<guid>.+)\(OK\)(?<name>.+) 
```

现在您有以下 6 个捕获组：

```
line_id group 1: (?[0-9]{1,3})
ip group 2: (?.+)
port group 3: (?[0-9]{1,5})
int group 4: (?[0-9]{1,5})
guid group 5: (?.+)
name group 6: (?.+) 
```

恕我直言，最新的两组太贪心了。`.+`我建议不要使用，而是更好地识别您需要捕捉的字符范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T17:10:29.703

试试这个

```
(?<line_id>[0-9]{1,3})\s+(?<ip>.+):(?<port>[0-9]{1,5})\s+(?<number>[0-9]+)\s+(?<guid>.+)\(OK\)(?<name>.+) 
```

在您提供的测试页面中得到了这个结果

```
has 6 groups:

9 (line_id)
2.27.8.18 (ip)
2304 (port)
63 (number)
9dd0e5e7344adac5cf49b7882329df25 (guid)
Any number of characters follow here (name) 
```

*请注意，用于标识**63的空格**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T17:10:25.047

您没有为该号码（在您的情况下为 63）设置捕获组，该号码与 guid 一起被捕获。我已经稍微编辑了你的模式：

```
(?<line_id>\d{1,3})\s*(?<ip>.+):(?<port>\d{1,5})\s*(?<number>\d+?)\s*(?<guid>[\da-f]+)\(OK\)(?<name>.+) 
```

请注意，我已将 [0-9] 集更改为 \d 并将 guid 设置为： [\da-f] （以防它仅使用十六进制小写字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T17:12:09.423

检查分隔符可能更容易：

```
(?<line_id>[0-9]{1,3})(?<ip>.+):(?<port>[0-9]{1,5})\s+(?<nr>.*)\s+(?<guid>.+)\(OK\)(?<name>.+) 
```

这是一个例子：[http ://rubular.com/r/qhS7TdTFmn](http://rubular.com/r/qhS7TdTFmn)

# vtk - vtkImageTracerWidget > 5.0 lineWidth？

> ID：14184512
> 
> 赞同：1
> 
> 时间：2013-01-06T17:05:13.467
> 
> 标签：vtk

很简单的问题。我正在尝试使用 vtkImageTracerWidget 来表示我的分割算法中的用户输入。我选择这个小部件的灵感来自 David Doria 的[代码](https://github.com/daviddoria/ScribbleInteractorStyle)。

换句话说，用户在图像上绘图，它基本上充当画笔，为算法播种。

我目前正在使用以下代码：

```
tracer->GetLineProperty()->SetLineWidth(20.0); 
```

如果我尝试将线宽设为 1.0，它会完美运行。或者，如果我尝试以相同的方式使用 SetColor() 更改线条颜色。但是，我就是无法让它比 5.0 更宽。我希望用户使用大笔刷进行大而粗的输入。5.0 vtkImageTracerWidget 的行是不够的。

如何增加用户输入的大小？我应该使用另一个小部件吗？我检查了最大线宽，大约是 10^36，所以这显然不是问题。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T19:07:31.110

Goodwin Lawlor 在这里的回答[http://vtk.1045678.n5.nabble.com/Problem-with-vtkPolyLine-width-greater-than-20-td5667414.html#a5672819](http://vtk.1045678.n5.nabble.com/Problem-with-vtkPolyLine-width-greater-than-20-td5667414.html#a5672819)解释说这是 OpenGL 限制。您可以通过检查来验证最大 GL 线宽是否与线宽相对应（在有 GL 上下文之后，这意味着在您调用 之后的某个时间 `renderWindowInteractor->Start()`）。对于测试，您可以在交互器样式事件或类似事件中执行此操作）：

```
// Initialize so we get these values back instead of garbage if the call doesn't work
GLfloat lineWidthRange[2];
lineWidthRange[0] = 123;
lineWidthRange[1] = 123;

glGetFloatv(GL_LINE_WIDTH_RANGE, lineWidthRange);

std::cout << "GL_LINE_WIDTH_RANGE: " << lineWidthRange[0] << " " << lineWidthRange[1] << std::endl; 
```

在我的硬件上，这个打印

```
GL_LINE_WIDTH_RANGE: 0.5 10 
```

这表明 10（正如我在实验中看到的）是 OpenGL 将绘制的最大线。

# php - 如何在 PHP 中查看时间

> ID：14184513
> 
> 赞同：0
> 
> 时间：2013-01-06T17:05:21.233
> 
> 标签：php, mysql, time

我正在制作每支球队参加的运动（羽毛球）的搜索页面：早上，下午，晚上。一个星期可以有三个游戏时间。所以表格是这样的：

```
start_time = "08:00:00"
start_time2 = "12:00:00"
start_time 3 = "18:00:00" 
```

或者如果球队一周只打一场比赛，表格是这样的：

```
start_time = "08:00:00"
start_time2 = "00:00:00"
start_time3 = "00:00:00" 
```

现在我的查询是这样的：

```
if (isset($_REQUEST['time'])){
foreach ($time as $value){ //make day stay checked 2012/12/31
    if ($value == "早上") $morning = "checked";
    if ($value == "下午") $afternoon = "checked";
    if ($value == "晚上") $evening = "checked";   
}
if ($morning == "checked" and $afternoon != "checked" and $evening != "checked"){ //only morning
    $criteria .= "and (start_time < '12:00:00' or start_time2 < '12:00:00' or start_time3 < '12:00:00')";
}elseif ($morning == "checked" and $afternoon == "checked" and $evening != "checked"){ //morning + afternoon
    $criteria .= "and (start_time < '18:00:00' or start_time2 < '18:00:00' or start_time3 < '18:00:00')";
}elseif ($morning == "checked" and $afternoon != "checked" and $evening == "checked"){ //morning + evening
    $criteria .= "and ((start_time < '12:00:00' and start_time >= '18:00:00') or (start_tim2e < '12:00:00' and start_time2 >= '18:00:00') or (start_time3 < '12:00:00' and start_time3 >= '18:00:00'))";
}elseif ($morning != "checked" and $afternoon == "checked" and $evening != "checked"){ //afternoon
    $criteria .= "and ((start_time >= '12:00:00' and start_time < '18:00:00') or (start_time2 >= '12:00:00' and start_time2 < '18:00:00') or (start_time3 >= '12:00:00' and start_time3 < '18:00:00'))";
}elseif ($morning != "checked" and $afternoon == "checked" and $evening == "checked"){ //afternoon + evening
    $criteria .= "and (start_time >= '12:00:00' or start_time2 >= '12:00:00' or start_time3 >= '12:00:00')"; 
}elseif ($morning != "checked" and $afternoon != "checked" and $evening == "checked"){ //only evening
    $criteria .= "and (start_time >= '18:00:00' or start_time2 >= '18:00:00' or start_time3 >= '18:00:00')";
} 
```

有两个问题：

1.  有没有更好的方法来编写更少的代码以使其运行得更快？
2.  如何避免检查 start_time 是否为 00:00:00？因为如果我不跳过检查，如果我只想早上搜索，则条件为真。因为早晨的时间小于 12:00:00，而 00:00:00 小于 12:00:00。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:21:49.347

你为什么要经过`if ($value == "早上") $morning = "checked";`？只需使用 value 来更改查询。

```
 if ($value == "早上"){
        $criteria .= "and (start_time < '12:00:00' or start_time2 < '12:00:00' or start_time3 < '12:00:00')";
    }
  elseif ($value == "下午"){
       $criteria .= "and (start_time < '18:00:00' or start_time2 < '18:00:00' or start_time3 < '18:00:00')";  
    }
    elseif ($value == "value3"){
       $criteria .= "query3";  
    } 
```

如果您愿意，您可以将 'if' 替换为 'switch' 大小写

```
switch ($value) {
    case 0:
        $criteria .= "query1" 
        break;
    case 1:
         $criteria .= "query2" 
        break;
    case 2:
         $criteria .= "query3" 
        break;
} 
```

# android - Android - 在 AsyncTask 中显示警报对话框

> ID：14184514
> 
> 赞同：1
> 
> 时间：2013-01-06T17:06:00.533
> 
> 标签：android, login, android-asynctask, show, android-alertdialog

当用户无法输入有效的电子邮件和密码登录时，我试图显示一个警报对话框。由于登录过程必须处理 HTTP 请求和 JSON，我将其全部放在 AsyncTask 中，我不确定是否这就是为什么我的警报对话框无法显示的问题（我希望不会）。所以这是在类`checkUser`中调用的方法：`onPostExecute``AsyncTask`

```
 public void checkUser(JSONObject json){
                AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                if (tag == login_tag){
                    // check for login response
                    try {
                        if (json.getString(KEY_SUCCESS) != null) {
                            String res = json.getString(KEY_SUCCESS);
                            if(Integer.parseInt(res) == 1){
                                // user successfully logged in
                                // Store user details in SQLite Database
                                // code omitted
                            } else{
                                // Error in login
                                    mProgressDialog.dismiss();
                                builder.setMessage("Incorrect username/password")
                                       .setTitle("Error")
                                       .setNeutralButton("OK", new OnClickListener() {
                                           public void onClick(final DialogInterface dialog,final int which) {
                                                dialog.cancel();                                                    
                                           }
                                        }).create().show();

                            }
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                } 
```

不知何故，我的警报对话框永远无法显示，我不知道为什么。如果您知道这个问题的原因是什么，请帮助我。非常感谢！

编辑：原来我只`Progress Dialog`在执行此方法后关闭它，所以我决定在显示警报对话框之前将其关闭。但它仍然没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:59:37.097

所以我自己解决了这个问题：不知何故，警报对话框只能在方法之外工作`checkUser`。因此，我将错误 if 子句中的位移到`dismiss()`了 Progress 对话框下方`onPostExecute()`：

```
protected void onPostExecute(JSONObject json) {
            checkUser(json);
            mProgressDialog.dismiss();
            try {
                if (json.get(ERROR_MSG) != null){
                    String errorMsg = json.getString(ERROR_MSG);
                    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
                    builder.setMessage(errorMsg)
                   .setTitle("Error")
                   .setNeutralButton("OK", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();                                                    
                       }
                    }).create().show();
                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

瞧，它有效！Ps：我仍然不知道为什么对话框在放入时无法显示`checkUser`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:09:36.430

失踪`builder.create()`

```
// Error in login
builder.setMessage("Incorrect username/password")
     .setTitle("Error")
     .setNeutralButton("OK", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog,int which) {
                                    dialog.cancel();                                                    
     }
 }).create().show(); 
```

# c# - 动作委托使用在 foreach 循环外声明的变量的最后值

> ID：14184515
> 
> 赞同：3
> 
> 时间：2013-01-06T17:06:03.720
> 
> 标签：c#, action

我有这段代码：

```
int i = 0;
foreach(var tile in lib.dic.Values)
{
    var ii = i;
    var t = tile;
    Button b = new Button( () = > { MainStatic.tile = t; } );
    Checkbox c = new Checkbox( () = > { lib.arr[ii].b = !lib.arr[ii].b; } );
    i++;
} 
```

虽然上面的代码可以正常工作，但下面的这段代码：

```
int i = 0;
foreach(var tile in lib.dic.Values)
{
    Button b = new Button( () = > { MainStatic.tile = tile; } );
    Checkbox c = new Checkbox( () = > { lib.arr[i].b = !lib.arr[i].b; } );
    i++;
} 
```

`i`…将始终使用和`tile`变量的最后值执行委托。为什么会发生这种情况，为什么我必须制作这些变量的本地副本，尤其是非引用类型`int i`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:09:54.127

已知的“问题”，请查看 Eric 的博客[Closures，捕获变量。](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

Microsoft 决定进行重大更改，并在 C# 5 中修复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T17:11:36.777

这是意料之中的：当你创建一个 lambda 时，编译器会创建一个*闭包*。它将在那里捕获临时变量的值，但不会捕获循环变量和其他在创建 lambda 后发生变化的变量的值。

问题的核心是委托的创建和执行时间不同。委托对象是*在循环运行时创建*的，但在循环完成后*调用它。*在调用委托时，循环变量具有在循环完成时达到的值，从而产生您所看到的效果（值没有改变，并且您看到循环中的最后一个值）。

忘记创建用于闭包的临时变量是一个非常常见的错误，以至于流行的代码分析器（例如 ReSharper）会警告您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T17:11:46.147

您不能像这样使用循环变量，因为在执行委托时，循环变量可能处于其最终（循环结束）状态，因为它使用的是执行删除时变量的值，而不是创建时。

您需要制作变量的本地副本才能使其正常工作：

```
int i = 0;
foreach(var tile in lib.dic.Values)
{
    var tileForClosure = tile;
    var iForClosure = i;
    Button b = new Button( () = > { MainStatic.tile = tileForClosure ; } );
    Checkbox c = new Checkbox( () = > { lib.arr[iForClosure].b = !lib.arr[iForClosure].b; } );
    i++;
} 
```

通过在每个循环上创建一个本地副本，值不会改变，因此您的委托将使用您期望的值。

# android - PopupWindow 中 web 视图上方的按钮在 2 次后响应 onClick

> ID：14184519
> 
> 赞同：1
> 
> 时间：2013-01-06T17:06:13.720
> 
> 标签：android, android-layout, android-webview

我在它的右上角有一个 WebView 和一个 Button 我的问题是，当我第一次点击按钮时它不起作用，第二次点击（点击）工作正常。

它的xml如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
        android:layout_marginTop="10dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="4dp"
        android:layout_marginLeft="4dp"
        android:background="@drawable/popup3"    
        >
    <WebView
        xmlns:ptr="http://schemas.android.com/apk/res-auto"
        android:id="@+id/webviewActionView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:minHeight="200dp"
        android:minWidth="200dp"
        android:scrollbars="none" >
    </WebView>
    </LinearLayout>
    <Button
        android:id="@+id/popup_closer"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="0dip"
        android:layout_marginLeft="0dip"
        android:background="@drawable/close_popup"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:text=" " />     
</RelativeLayout> 
```

如下所示：[单击此处](http://i.stack.imgur.com/z0KQk.png)

**现在，当我在代码中将 ButtonView 放在 LinearLayout 之前时，它从第一次单击（点击）开始工作**

但它看起来像这样：[点击这里](http://i.stack.imgur.com/IDUvj.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:53:41.637

尝试

```
 android:focusable="true"
            android:focusableInTouchMode="true" 
```

删除或设置为 false。

# python - 无法解码奇怪的 Xml 文件

> ID：14184521
> 
> 赞同：0
> 
> 时间：2013-01-06T17:06:49.620
> 
> 标签：python, character-encoding, python-3.x, xml-parsing

我必须解析一些 xml 输出（从请求到网站），如下所示。它们部分用英语，部分用法语。我无法解码和打印（在屏幕上，在文件上）法语口音，如“é”或“à”

当我使用时`decode('utf-8')`，我有一个错误的结果，比如' `Ã¨`'。我正在使用 python 3.3。

```
b'Extr\xc3\x83\xc2\xaamement fort et incroyablement pr\xc3\x83\xc2\xa8s</title><originaltitle>Extremely Loud And Incredibly Close</originaltitle><year>2011</year><runtime>0</runtime><directors><director>Stephen Daldry</director></directors><plot>Oskar Schell, 11 ans, est un jeune New-Yorkais \xc3\x83\xc2\xa0 l\'imagination d\xc3\x83\xc2\xa9bordante. Un an apr\xc3\x83\xc2\xa8s la...</plot></movie></results>\n' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T17:10:46.653

您粘贴的字节字符串是双重编码的，

```
byteStrInYourQuestion.decode('utf-8').encode("ISO-8859-1").decode("utf-8") 
```

应该管用。

# android - 导入android现有项目

> ID：14184522
> 
> 赞同：0
> 
> 时间：2013-01-06T17:07:00.390
> 
> 标签：android

我正在尝试导入 android 现有项目，但它给出警告“找不到要导入的项目”。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:08:19.647

创建新项目并选择：“Android Project From Existing Source”

然后选择该项目的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:04:25.223

你改变了你的工作空间吗？如果是这样，请将项目的文件夹复制到新的工作区文件夹，然后导入..

# asp.net - 使用 PetaPoco 的 Exists 和 GetById 方法的复合主键

> ID：14184523
> 
> 赞同：0
> 
> 时间：2013-01-06T17:07:06.547
> 
> 标签：asp.net, sql-server, exists, composite-primary-key, petapoco

我发现了这个很好的 PetaPoco 分支，由 schootime 处理，它处理复合主键。

现在我没有发现他是如何处理他的 PetaPoco 方法版本的，这些方法需要一个主键，例如 db.Exists 和 db.GetById 方法。

使用单个主键，您只需传递值，但是如何使用多个键来威胁这些方法？我应该传递一个字符串/对象字典而不是主列名和值吗？

如果您正在使用此分支，任何提示将不胜感激。

还有一种方法可以使用 Page 方法来查询 PetaPoco 的所有结果吗？意味着每页不传递任何页面/项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:50:33.937

这些方法接受一个对象，该对象可以是匿名对象。例如。

```
db.SingleById<User>(new{ Name="John", Email="John@smith.com"}); 
```

# php - 如何将逗号分隔列转换为行并添加计数器

> ID：14184529
> 
> 赞同：1
> 
> 时间：2013-01-06T17:07:28.330
> 
> 标签：php, mysql, pyrocms

我有一张包含这些值的表格

表：文件

```
id  |       document
----|-------------
1   |   doc.txt , doc1.txt , doc2.rtf , doc3.docx , doc4.doc
2   |   doc.txt 
3   |   doc.txt , doc1.txt 
4   |   doc.txt , doc1.txt , doc2.rtf 
5   |   doc.txt , doc1.txt , doc2.rtf , doc3.docx , doc4.doc
6   |   doc.txt , doc1.txt , doc2.rtf , doc3.docx 
7   |   doc.txt , doc1.txt , doc2.rtf , doc3.docx , doc4.doc
8   |   doc.txt , doc1.txt , doc2.rtf 
9   |   doc.txt , doc1.txt , doc2.rtf , doc3.docx , doc4.doc
10  |   doc.txt , doc1.txt 
```

### [SQL 小提琴模式](http://sqlfiddle.com/#!2/00a91/1)

我需要这样的结果。其中 id = 5

```
Counter |   docs
    ----|-----------
    1   |   doc.txt
    2   |   doc1.txt
    3   |   doc2.rtf
    4   |   doc3.docx
    5   |   doc4.doc 
```

其中 id = 4

```
Counter |   docs
    ----|-----------
    1   |   doc.txt
    2   |   doc1.txt
    3   |   doc2.rtf 
```

你看我需要分解逗号分隔的列并计算有多少值。我不喜欢这种架构，但我正在处理现有项目并且无法更改它。我需要计数器显示在用户界面中。所以计数器也是必要的。我怎样才能做到这一点？我也不能在 php 端这样做，因为我正在使用 pyrocms，我需要使用 pyrocms tage 显示它，这不允许我在视图中使用 php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:30:11.263

看看这个[SQL FIDDLE](http://sqlfiddle.com/#!2/ab5b0/8)，也许就是你想要的。您必须使用辅助表`sequence`

```
SELECT * FROM
(SELECT S.Id Counter,
REPLACE(SUBSTRING(SUBSTRING_INDEX(document, ' , ', S.Id),
       LENGTH(SUBSTRING_INDEX(document, ' , ', S.Id - 1)) + 1),
       ' , ', '') docs
FROM documents D, sequence S
WHERE D.id = 3) A
WHERE A.docs <> '' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:31:18.047

使用存储过程可以解决您的问题。[这](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/)是您已经**解决**的问题的完全相同的**副本**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:14:42.077

恐怕没有简单的方法来创建 SQL 查询，也没有可用的拆分功能。

您可以做的是创建自己的函数，如此[处所述](http://www.montrealseocompany.com/2012/04/17/mysql-split-string-into-rows-function/)

您也可以直接在 php 代码中处理结果。**

# javascript - 尾声滑块按 id 直接转到特定幻灯片

> ID：14184532
> 
> 赞同：1
> 
> 时间：2013-01-06T17:07:35.383
> 
> 标签：javascript, slider, coda

我刚刚使用[coda slider](http://kevinbatdorf.github.com/codaslider/)编辑了内容滑块。

所以我有一个照片库，当我点击任何照片时，它会打开一个带有 coda 滑块的页面。单击哪个图像，该图像是第一个滑块。单击下一张，滑块切换到下一张照片，但单击上一张照片，滑块回到开头而不是上一张照片。

在画廊中，它看起来像这样：

```
<div class="one_fourth">                        
     <div class="imgNikon">
            <a href="../photos/bw_slider.html#2"><img src="../photos/2.jpg" width="150" height="100" />
            <span class="imgFrameNikon"></span></a>
   </div>
   <a href="../photos/bw_slider.html#2"><h6 style="margin-bottom:20px;"align="center">2<br /><br /></h6></a>
</div>  

<div class="one_fourth">                        
        <div class="imgNikon">
            <a href="../photos/bw_slider.html#1"><img src="../photos/1.jpg" width="150" height="100"/>
            <span class="imgFrameNikon"></span></a>
    </div>
    <a href="../photos/bw_slider.html#1"><h6 style="margin-bottom:20px;"align="center">1<br /><br /></h6></a>
</div> 
```

因此，bw_slider.html 是包含结尾滑块的页面。链接 #1 的延续，在另一种情况下 #2 是指向包含该 ID 的特定幻灯片的直接链接。

在 coda 滑块中，它看起来像这样，还有更多的幻灯片：

```
<div id="1">
<h2>1</h2>
  <img src="1.jpg"  width="600" height="400" />
    <div class="photo_gallery"> 
              <p >Some text...</p>
    </div>
</div>
<div id="2">
<h2>2</h2>
  <img src="2.jpg"  width="600" height="400" />
    <div class="photo_gallery"> 
              <p >Some text...</p>
    </div>
</div> 
```

coda滑块的js在上面的链接上。

有谁知道从滑块内容的中间开始滑块时如何避免回到开头。

# qt - Qt Creator : QtGui 包含错误

> ID：14184542
> 
> 赞同：22
> 
> 时间：2013-01-06T17:08:21.050
> 
> 标签：qt

我想学习 Qt，所以下载了 Qt library(5.0) 和 Qt creator for windows。在那里，我无法访问 QNetworkAccessManager ..当我包含 QNetworkAccessManager 时它给出了一个错误我无法找出错误的原因并且我正在使用 Ubuntu 进行双重引导。所以我下载了 Qt for Ubuntu 并开始使用它，但是，这一次当我包含 QtGui 时它给出了一个错误。错误是：

```
/home/shaarad/Qt5.0.0/5.0.0/gcc_64/include/QtGui/qopenglcontext.h:60:
  In file included from ../../../Qt5.0.0/5.0.0/gcc_64/include/QtGui/qopenglcontext.h:60:0,
/home/shaarad/Qt5.0.0/5.0.0/gcc_64/include/QtGui/QtGui:33:
  from ../../../Qt5.0.0/5.0.0/gcc_64/include/QtGui/QtGui:33,
/home/shaarad/Documents/JIGS/JIGS-FILE-SHARING-master/MainFrame.cpp:5:
  from ../JIGS-FILE-SHARING-master/MainFrame.cpp:5:
/home/shaarad/Qt5.0.0/5.0.0/gcc_64/include/QtGui/qopengl.h:98: 
  error: GL/gl.h: No such file or directory 
```

任何解决方法都会有所帮助，非常感谢！:)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-05-12T14:06:00.180

```
sudo apt-get install mesa-common-dev
sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev 
```

这两个人提供了解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:19:47.277

您缺少 OpenGL 包含文件。安装`mesa-common-dev`包：

```
# apt-get install mesa-common-dev 
```

这包括`/usr/include/GL`目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T04:59:58.513

还安装：

```
sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-02T02:26:49.183

我通过安装修复它`qt5-default`：

```
sudo apt install qt5-default 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-11T09:22:45.027

对于 Fedora，您需要：

```
sudo dnf install mesa-libGL-devel 
```

# c# - 在浏览器中打开大的 aspx 文件时编译错误 CS1647

> ID：14184543
> 
> 赞同：7
> 
> 时间：2013-01-06T17:08:32.517
> 
> 标签：c#, asp.net, xml, xslt, webforms

我正在使用 XML/XSLT 创建一个可以变得非常大的 aspx 页面。即使文件创建成功，当文件大小接近 300K 时，在浏览器中打开文件（IE 和 Chrome 都试过）时会出现错误：“CS1647: An expression is too long or complex to compile”。失败的 .NET 错误页面上没有显示其他有用信息。

我的开发环境是 Win7 x64 笔记本电脑上的 VS 2012 Express for Web。

由于在程序执行期间不会出现此问题，因此我不知道如何解决此问题。任何人都可以提出一个策略或解决这个问题吗？

**编辑**

用于创建 aspx 页面的 C# 代码是

```
// load the xml file
XmlDocument reportDetails = new XmlDocument();
reportDetails.Load(ReportDetailsPath);
//setup the xslt transform
XslCompiledTransform xslt = new XslCompiledTransform();
xslt.Load(XlsRptPath);
StringWriter sw = new StringWriter();
xslt.Transform(ReportDetails, null, sw);
//create the aspx file
using (StreamWriter outfile = new StreamWriter(aspxPath))
{
    outfile.Write(sw.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T13:12:58.953

老问题，并在评论中得到了很大的回答。但为了完整起见，让我们回答一下；）。您的问题不在于 XSLT 本身，而在于生成的文件[在 C# 中达到最大表达式大小的 300k 边界](https://connect.microsoft.com/VisualStudio/feedback/details/785173/got-error-cs1647-an-expression-is-too-long-or-complex-to-compile-in-vs2012)。您可以做几件事：

*   使生成的代码低于 300k（但在您的情况下这可能是不可能的）
*   在生成的代码中获取任何字符串常量并将它们放在资源文件中。此类资源文件的格式是 XML，您可以自动生成它，只需确保资源中的 ID 与您在生成的 ASPX 中使用的 ID 匹配
*   将部分生成的代码放在代码隐藏文件中。ASPX 被解析为一个表达式，但代码隐藏不是。这是构建生成代码的问题。
*   如果您的设计允许，将 ASPX 拆分为多个页面。您可以将它们与 iframe 重新组合。
*   在多个 ASCX 控件中拆分 ASPX 文件。这也许是最自然的事情。每个 ASCX 控件都可以引用/添加到 ASPX 文件中。每个 ASCX 控件不应超过 300k 限制。
*   如果有大量生成的 CSS 会导致尺寸变大，请将其放在单独的 CSS 文件中。
*   如果图像引用等中有很多长的绝对路径，您可以折叠它们并使引用相对，即使用[`<base>`](http://www.w3schools.com/tags/tag_base.asp)，这样可以节省一些空间。
*   如果错误是由实际的大（常量）表达式引起的，请考虑 [本文答案中的提示以](https://stackoverflow.com/questions/960305/work-around-for-c-sharp-codedom-causing-stack-overflow-cs1647-in-csc-exe)寻求解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T18:42:50.460

我很抱歉没有早点发布我的解决方案，但当时我压力太大而无法这样做。我猜迟到总比没有好。

我没有尝试为每个关联的 xml 文件创建一个完整的 aspx 网页，而是创建了一个存根并在运行时从关联的 Site.Master 中应用 xslt 转换。存根的**MasterPageFile**属性设置为此 Site.Master。这种方法确实牺牲了一些性能，但它适用于任何大小的网页。这是输出[网页](http://top-60.bunkerhill.com/Top-60-austin-beauty-salons)的示例。

**示例 aspx 存根文件：**

```
<%@ Page Title="Top Austin Beauty Salons List" MetaDescription="List of best Google-ranked Austin beauty salon" Language="C#" MasterPageFile="~/Site1.Master" %>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
</asp:Content> 
```

**Site.Master Page_Load：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string vp =  Page.AppRelativeVirtualPath;
        if (vp.ToLower().EndsWith("default.aspx") || vp.ToLower().EndsWith("webform2.aspx")) return; // ignore some aspx files used for ohter reasons
        string xmlPath = Page.MapPath(vp.Substring(0, vp.LastIndexOf(".")) + @".xml");
        string xslPath = Page.MapPath("mainpage.xslt");
        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(xmlPath);
        XsltArgumentList argsList = new XsltArgumentList();
        argsList.AddParam("xmlPath", "", xmlPath);

        XslCompiledTransform xslt = new XslCompiledTransform();
        xslt.Load(xslPath);
        // Execute the transform and output the results to a string writer.
        StringWriter sw = new StringWriter();
        xslt.Transform(xmlDoc, argsList, sw);
        content.InnerHtml = sw.ToString(); // add the generated html to the associated stub aspx content section
    } 
```

# .htaccess - .htaccess - 一个文件夹中的密码，所有子文件夹除外

> ID：14184544
> 
> 赞同：0
> 
> 时间：2013-01-06T17:08:40.153
> 
> 标签：.htaccess, password-protection

我有一个名为“adminhide”的文件夹，它位于“forum”文件夹内，应该受密码保护。在“adminhide”文件夹中，我有 50 多个子文件夹，所有这些子文件夹都不应受密码保护。

.htaccess 文件应放在文件夹“adminhide”或文件夹“forum”中。

例子：

```
forum/adminhide: protected
forum/adminhide/js: unprotected
forum/adminhide/js/something: unprotected
forum/adminhide/images: unprotected
forum/adminhide/something: unprotected 
```

这是我现在拥有的：

```
AuthType Basic
AuthName "admin"
AuthUserFile "/home/xgclanco/.htpasswds/public_html/xg-clan.pt/forum/adminhide/passwd"
require valid-user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:12:37.873

您可以通过将 .htaccess 文件放在要使用“全部允许”指令排除的子目录中来做到这一点。

.htaccess 从当前目录开始工作，因此如果您将 .htaccess 包含在包含以下内容的子目录中：

```
Allow from all 
```

你会得到想要的结果。

您还可以通过在 htaccess 文件中执行此操作，仅指定要在 adminhide 文件夹中保护的单个文件来实现此目的：

```
AuthUserFile "/home/xgclanco/.htpasswds/public_html/xg-clan.pt/forum/adminhide/passwd"

AuthName "admin"

AuthType Basic

<Files "index.php">

  require valid-user

</Files> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:11:16.130

您放入 .htaccess 文件的子文件夹下的所有子文件夹都会自动受到保护。我认为没有办法改变这一点。

因此，您要么必须更改文件夹结构，要么将要保护的内容放在其他地方。

# windows-8 - 如何在 Web 视图中拦截 didStartLoad（地铁应用程序）

> ID：14184554
> 
> 赞同：2
> 
> 时间：2013-01-06T17:09:20.647
> 
> 标签：windows-8, webview, microsoft-metro

多年来，我一直在开发 iOS 和 Mac OSX 应用程序。因此，我很惊讶地发现 Windows 8 Metro WebView 在开始加载新页面时没有拦截方法，但只有在加载完成时才拦截。

真的有任何解决方法吗？我在文档和网络上都找不到任何东西......

非常感谢！

法比奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:25:38.093

您可以使用该`Window.External.Notify()`方法在 C# 或诸如此类的东西中触发事件。您还可以使用`Webview.InvokeScript()`来从控件外部激活脚本。您可以将脚本编写为 WebView 外部的字符串，并使用`WebView.InvokeScript()`带有“eval”的第一个参数在控件内运行该脚本。

[脚本通知](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.webview.scriptnotify.aspx)

[这显示了如何同时使用 ScriptNotify 和 InvokeScript](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)

# android - 让 OnTouchListener 一直更新

> ID：14184555
> 
> 赞同：0
> 
> 时间：2013-01-06T17:09:28.963
> 
> 标签：android, ontouchlistener

我有一个 Android 应用程序，我希望它在周围画圈

我使用了 OnTouchListener。

问题是，当用户将圆圈“固定”到位时，它不会更新操作。

我如何知道用户的手指是否打开，当他不移动它时，使用 OnTouchListener

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:20:20.660

你可以知道，通过使用

```
MotionEvents: 
```

里德更多：[MotionEvents](http://developer.android.com/reference/android/view/MotionEvent.html)

```
ACTION_DOWN is for the first finger that touches the screen. This starts the gesture. The pointer data for this finger is always at index 0 in the MotionEvent.
ACTION_POINTER_DOWN is for extra fingers that enter the screen beyond the first. The pointer data for this finger is at the index returned by getActionIndex().
ACTION_POINTER_UP is sent when a finger leaves the screen but at least one finger is still touching it. The last data sample about the finger that went up is at the index returned by getActionIndex().
ACTION_UP is sent when the last finger leaves the screen. The last data sample about the finger that went up is at index 0\. This ends the gesture.
ACTION_CANCEL means the entire gesture was aborted for some reason. This ends the gesture. 
```

这是阅读[StackOverFlow的好答案](https://stackoverflow.com/a/4269592/1932105)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:23:45.623

您必须检查是否触发了 onTouchEvent 类型的事件。

```
 @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            //Do Nothing
            return true;
        case MotionEvent.ACTION_MOVE:
            //Do Something
            path.lineTo(eventX, eventY);
            break;
        case MotionEvent.ACTION_UP:
            //Do Nothing
            break;
        default:
            return false;
        }

        // Schedules a repaint.
        invalidate();
        return true;
    } 
```

可以在[此处](http://developer.android.com/reference/android/view/MotionEvent.html)找到有关 MotionEvents 的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:32:46.267

按触摸类型过滤触摸：

```
boolean onScreen = false;

@Override
public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX(); //X coord of the touch
    float eventY = event.getY(); //Y coord of the touch

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        // User has touched the screen
        onScreen = true;
        return true;
    case MotionEvent.ACTION_MOVE:
        // Finger is being dragged on the screen
        onScreen = true; //Not required, just for clarity purposes.
        break;
    case MotionEvent.ACTION_UP:
        // User has lifter finger
        onScreen = false;
        break;
    default:
        return false;
    }

    if(onScreen) {
        //Finger is on the screen
    }
    return true;
} 
```

# wordpress - 如何在 Wordpress 中翻译这部分内容？

> ID：14184558
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:09:42.587
> 
> 标签：wordpress

我想翻译部分 Wordpress 评论，但在我使用的主题中没有可编辑的地方。因此，当有人评论时，会出现这样的文字：

```
USERNAME said 2 days ago (Reply) 
```

如何编辑/翻译这部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:35:19.903

首先，在我看来，您安装了英文版的 wordpress，并以不同的语言运行（可能是自定义的）主题。如果这是正确的，此修复可能会有所帮助：

您无法翻译，因为您可能没有在主题的 functions.php 中显示评论的**功能**。要解决此问题，您必须`wp_list_comments()`使用“回调”参数的自定义值进行调用，例如：

```
<ul class="commentlist">
  <?php wp_list_comments('type=comment&callback=mytheme_commentdisplay'); ?>
</ul> 
```

要完成这项工作，您还需要在 functions.php 中添加一个名为“mytheme_commentdisplay”的**函数**：

```
function mytheme_commentdisplay ($comment, $args, $depth) {
  // ...
} 
```

有关完整示例，请参阅[Codex 中的此页面](http://codex.wordpress.org/Function_Reference/wp_list_comments#Comments_Only_With_A_Custom_Comment_Display)。您可以复制该功能，并根据需要对其进行修改。

如果您使用 .po- 或 .mo-files 进行翻译，请将所有调用更改为和 ，`_e(...)`使其看起来像这个示例。`__(...)``_n(...)``_e('Text to be translated', 'translationslug')`

否则，您可以将所有出现的英文文本更改/硬编码到您的语言环境。

### 那应该行得通。所有必要的步骤都已完成。

*（可选*）为了将来的兼容性，还请注意以下几点：

您需要`comments.php`在主题目录中调用一个文件。在撰写本文时，如果您没有特殊的评论模板或`comments.php`文件，则 WordPress 的评论模板包含在文件`wp-includes/theme-compat/comments.php`中。WordPress 团队将在未来版本中删除该功能（请参阅此代码以供参考：[源代码浏览器](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/comment-template.php#L911)）。

您可以从[wp-includes/theme-compat/comments.php](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/theme-compat/comments.php)获取代码，在您的模板目录中创建一个 comments.php 文件并将代码粘贴到您的**comments.php**文件中。`_deprecated_file(...)`可以删除顶部的函数调用。

# javascript - 当一个是布尔值时，为什么 JavaScript 在 == 运算符比较中将原始值转换为数字的理由？

> ID：14184560
> 
> 赞同：7
> 
> 时间：2013-01-06T17:09:55.783
> 
> 标签：javascript

我知道规则：

> 如果两个操作数的类型不同，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是数字或布尔值，则尽可能将操作数转换为数字；否则，如果任一操作数是字符串，则尽可能将另一个操作数转换为字符串。

所以，`if("true")`通过但`if("true" == true)`失败，因为它是句柄 `if(NaN == 1)`。

我想知道当一个值是布尔值时，这背后的理性是什么。在其他弱类型语言（如 php）中，这是以不同方式处理的——如果一个值是布尔值，则另一个值被转换为布尔值以进行比较（而不是像 javascript 中那样将两者都转换为数字）。

我假设这个选择是`==`经过仔细考虑后为运营商做出的。任何人都可以解释为什么这是选择的功能吗？是否有一个常见的用例被选择来解决？我敢打赌这不仅仅是一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T23:10:24.560

来自 es-discuss@mozilla.org 邮件列表的 Brendan Eich 的快速回复：

考虑 Perl：

```
$ perl -e 'print 0 == "true";'
1 
```

好的，理由很糟糕——但我在 1995 年 5 月在 AWK、Perl 4、Python 1.2 (IIRC)、TCL 的阴影下创建了 JS。

考虑到我应该比 Perl 更关注 AWK

```
$ awk 'END {print(0 == "0")}'
1D
$ awk 'END {print(0 == "")}'
0D 
```

在某些方面，JS 的运算符通过转换为 NaN来`==`拆分 Perl（非数字字符串，例如`"true"`转换为`0`）和 AWK（仅`"0"`转换为）之间的差异。`0`这样，至少，我们有

```
js> 0 == ""
true
js> 0 == "true"
false 
```

但完整的事实并不是我在仔细模仿其他语言。相反，一些致力于在类似 PHP 的服务器 (LiveWire) 中嵌入 JS（然后是“Mocha”）的 Netscaper 希望进行草率的转换，因此程序员可以匹配 HTTP 标头字符串（服务器端）或 HTML 表单字段（客户端），例如， 404等，没有程序员的明确强制。

但那是 90 年代，我急得要命，这些前 Borland Netscapers 坚持不懈。所以，正如我[去年在 Strange Loop](http://www.infoq.com/presentations/State-JavaScript)所说的，“我是个白痴！我给了他们想要的东西！”

隐式转换是我对 JS 仓促设计的最大遗憾，没有之一。甚至包括“与”！

> 有谁知道选择不将任何值与 == 运算符中的布尔值相比转换为布尔值的确切原因？

一般的想法是较窄的类型应该加宽。因此，`true == 1`接下来将 boolean 投影`{false, true}`到 上`{0, 1}`，就像在 C++ 中一样。

但是为什么不扩大`true`到字符串，因为您示例中的另一个操作数是`"true"`？好问题。如果操作数是数字或布尔值，则将字符串作为数字进行比较的偏见源于 HTTP 标头和数字字符串 HTML 表单字段用例。再次，不是很好的理由，但这就是JS“工作”的方式：-|。

您可以在 ECMA-262 Edition 5.1 规范中看到这一点，11.9.3 The Abstract Equality Comparison Algorithm，第 6 步和第 7 步（根据第 4 步和第 5 步阅读）：

4.如果Type(x)是Number，Type(y)是String，返回比较结果x == ToNumber(y)。
5.如果Type(x)是String，Type(y)是Number，返回比较结果ToNumber(x) == y。
6\. 如果 Type(x) 是 Boolean，返回比较结果 ToNumber(x) == y。
7\. 如果 Type(y) 为 Boolean，则返回比较结果 x == ToNumber(y)。

这一切都在一个大的“else 子句中，其中`Type(x)`和`Type(y)`for`x == y`不一样。

抱歉，这里没有智慧的珍珠（原文如此）。除了隐式转换，`==`不要`!=`将操作数直接加宽（没有中间转换）到可以容纳其他操作数而不会丢失数据的最窄宽度。这种将字符串缩小为数字的做法只是一个烂摊子。

如果我们修复了这个问题，我们仍然有：

```
0 == "0"
1 == "1"
true != "1"
false != "0" 
```

但我们也会有你的例子想要的：

```
true == "true"
false != "" 
```

根据我将数字优先于字符串转换的偏好称为拙劣，我们不会有`true == "1"`or `false == "0"`，因为它会从字符串缩小到数字。确实，缩小不会丢失任何位，并且可以扩大`0`到`"0"`和`1`回到`"1"`，但我的意思是说明从 == 的隐式转换规范中删除所有数字上的字符串偏差会做什么。

这样的更改会破坏网络上的大量代码吗？我敢打赌它会。

有些人认为，除了任何隐式转换之外，还有一个使用`===`and的原因`!==`（因为他们从不转换），并且完全避开`==`and `!=`。其他人不同意（尤其是在测试时`x == null`，一种单操作员方式`test x === null || x === undefined`）。

由于网络在很大程度上是兼容的，直到非常旧的形式消亡，我们被 and 困住了`==`，`!=`所以我说学习草率的相等运算符做什么是值得的。这样做后，在我看来，他们可能会在获胜的地方使用它们：当您知道操作数是相同类型时，例如

`typeof x == "function"`， ETC。
`x == null`

否则，使用`===`and `!==`。

如果操作数是数字或布尔值，则将字符串作为数字进行比较的偏见源于 HTTP 标头和数字字符串 HTML 表单字段用例。再次，不是很好的理由，但这就是JS“工作”的方式：-|。

还有一点需要注意：如果任何非数字、非空的字符串到数字的隐式转换尝试抛出一个例外。

这是 JS 设计位中另一个依赖于路径的偏差：在 JS1 或任何 ECMA-262 标准中直到 ES3 都没有 try/catch。

缺少异常处理也意味着`undefined`缺少`obj.foo`属性 get`obj`没有此类属性。这仍然在咬人，可能与隐式转换咬人一样多或更多`==`。它也是 web JS 获胜的“对象检测”模式的基础，它完全击败了我见过的所有其他版本控制方案，尤其是基于显式编号和选择加入的先验方案。

要是我花时间为对象检测添加一个存在运算符就好了，这样就可以写了

```
function emulateRequestAnimationFrame(...) {...}
if (!window.requestAnimationFrame?)
  window.requestAnimationFrame = emulateRequestAnimationFrame; 
```

IOW，如果我`window.noSuchProperty`投掷但`window.noSuchProperty?`评估为真或`false`（细节仍然待定，请参阅“快速失败的对象解构”线程复兴，Nil 想法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T17:20:23.303

我认为有必要进行一些澄清。根据 ECMA 规范，if 语句的*整个*表达式（括号内的部分）被转换为布尔值。

所以想象它是这样的：

```
if (ToBoolean("true" == true)) {  //false 
```

对比

```
if (ToBoolean("true")) { //true 
```

我想为什么 ToBoolean 强制被添加到 if 表达式的原因是为了确保表达式总是安全和正确地计算。

ToBoolean 将单个值强制为布尔值。比较不会将每个值强制为布尔值，因为您会得到一些非常奇怪的结果，所以这没有意义。它检查是否相等，这是一种不同的操作。至于为什么一个值不转换为布尔值时另一个值我不确定，但请尝试 Mozilla ECMA 邮件列表：[https ://mail.mozilla.org/listinfo/es-discuss](https://mail.mozilla.org/listinfo/es-discuss)

看：

[http://www.ecma-international.org/ecma-262/5.1/#sec-9.2](http://www.ecma-international.org/ecma-262/5.1/#sec-9.2)

[http://www.ecma-international.org/ecma-262/5.1/#sec-12.5](http://www.ecma-international.org/ecma-262/5.1/#sec-12.5)

[http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.1)

[http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3)

[http://www.ecma-international.org/ecma-262/5.1/#sec-8.7.1](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7.1)

# python - Python - 如何在 for 循环中检查布尔值？

> ID：14184563
> 
> 赞同：2
> 
> 时间：2013-01-06T17:10:06.047
> 
> 标签：python, for-loop

我不知道如何做到这一点。我有一个清单：

```
list_something = [5, 6, 8] 
```

我有一个方法 is_valid()

```
def is_valid(number):
    return type(number) is int 
```

如何立即检查这 3 个数字是否都是 for 循环中的整数？

```
for item in list_something: 
```

在 for 循环结束时，我需要一个名为“all_list_something”的变量，其值为 True 或 False。如果列表中的所有数字都是整数，则值为 True。如果只有一个不是 Integer，则该值为 false。

关于实现这一目标的最佳方法的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T17:13:20.553

对于某些人来说，生成器理解可以提高地图的可读性。

```
all_list_something = all(is_valid(x) for x in list_something) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-06T17:11:30.703

您可以使用`all`和`map`：

```
all_list_something = all(map(is_valid, list_something)) 
```

使用`itertools.imap`将允许它短路（这意味着如果第一个元素无效，它永远不会检查其余元素）：

```
import itertools
all_list_something = all(itertools.imap(is_valid, list_something)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T17:15:01.607

由于问题询问如何在 for 循环中执行此操作，我想我会包括这样的答案：

```
all_list_something = True
for item in list_something:
    if not is_valid(item):
       all_list_something = False
       break 
```

但实际上，大卫或 cmh 的答案是要走的路。

# android - 数字选择器导致应用程序崩溃

> ID：14184571
> 
> 赞同：1
> 
> 时间：2013-01-06T17:10:44.113
> 
> 标签：android, nullpointerexception, numberpicker

我有一个显示餐厅菜肴列表的活动。列表的每个视图都有一个与之关联的数字选择器。该应用程序运行良好，但是当我启动活动以显示列表时它崩溃了......

这是我的类文件。

```
NumberPicker np;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_starters);
    createTestData();

    adapter = new MenuItemArrayAdapter(this, starters);
    this.setListAdapter(adapter);

    np = (NumberPicker)findViewById(R.id.numpick);
    np.setMinValue(0);
    np.setMaxValue(99);
} 
```

这是我的 StartersActivity 类的 xml 布局文件。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ListView
    android:id="@+id/android:list"
    android:layout_width="match_parent"
    android:layout_height="670dp">
</ListView>

<TextView
    android:id="@android:id/empty"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/empty" />

 <include
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    layout="@layout/pricebar" /> 
```

这是列表中行的我的 xml 布局文件。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<NumberPicker
    android:id="@+id/numpick"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" />

<ImageView
    android:id="@+id/dishpic"
    android:layout_width="140dp"
    android:layout_height="150dp"
    android:layout_alignBottom="@+id/numpick"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/item_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/reviewBtn"
    android:layout_alignParentTop="true"
    android:layout_alignRight="@+id/item_price"
    android:text="ITEM NAME"
    android:textSize="20sp" />

<TextView
    android:id="@+id/item_price"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/reviewBtn"
    android:layout_below="@+id/item_name"
    android:layout_marginTop="17dp"
    android:layout_toRightOf="@+id/dishpic"
    android:text="ITEM PRICE"
    android:textSize="20sp" />

<Button
    android:id="@+id/reviewBtn"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/dishpic"
    android:layout_toLeftOf="@+id/numpick"
    android:layout_toRightOf="@+id/dishpic"
    android:text="@string/reviewBtn" /> 
```

这似乎是导致问题的数字选择器，因为当我取出以下代码时它可以工作。

```
np = (NumberPicker)findViewById(R.id.numpick);
    np.setMinValue(0);
    np.setMaxValue(99); 
```

关于可能是什么问题的任何想法？错误是空指针异常：

**java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.waitron5/com.example.waitron5.StartersActivity}：java.lang.NullPointerException**

我有一种感觉，这与在加载列表之前尝试访问数字选择器有关，但它没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:22:09.543

要`NumberPicker`在`onCreate`方法中获取它，它必须在主布局中定义。既然不是你得到NPE。

这取决于您如何处理`NumberPicker`最佳位置来获取它。它必须特定于相关的列表项视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:16:52.340

`Each view of the list has a number picker associated with it`

上面的陈述让我相信 NumberPickers 控件应该`MenuItemArrayAdapter`在`getView()`方法中被引用和初始化，而不是`onCreate()`现在：

```
np = (NumberPicker)findViewById(R.id.numpick);
np.setMinValue(0);
np.setMaxValue(99); 
```

# android - Android 全球搜索

> ID：14184573
> 
> 赞同：3
> 
> 时间：2013-01-06T17:10:51.850
> 
> 标签：android, xml, search, global, searchable

我正在尝试将我的应用添加到 Android 的全局搜索中，以便用户可以从他们的主屏幕搜索我的应用。我已经按照[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)上的教程进行操作，但它似乎不起作用。当我测试应用程序并转到设置部分时，您会看到所有可搜索的应用程序，我的应用程序没有显示。这是我的一些代码：

主祭：

```
 <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>

    <meta-data
        android:name="android.app.searchable"
        android:resource="@xml/searchable" /> 
```

这当然是在标签内。

可搜索的.xml (res/xml/searchable.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:includeInGlobalSearch="true"
    android:voiceSearchMode="showVoiceSearchButton"
    android:label="Holo Wikipedia Search"
    android:hint="Search Wikipedia" >
</searchable> 
```

如果还有想看的请留言：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T01:22:30.827

您是否尝试将字符串资源用于标签和提示？

而不是硬编码的字符串，尝试这样的事情：

```
android:label="@string/label_string"
android:hint="@string/hint_string" 
```

# slideshow - 垂直/水平居中的流体幻灯片

> ID：14184576
> 
> 赞同：0
> 
> 时间：2013-01-06T17:11:05.110
> 
> 标签：slideshow, center, vertical-alignment, fluid-layout, alignment

我尝试制作垂直/水平居中的流体幻灯片，但看起来如此，幻灯片在 Internet Explorer 7 中不是垂直居中的，并且 Internet Explorer 9 和 10 存在一些问题。也许有人可以帮助我改进我的代码。垂直中心的顶部和底部边距也存在一些像素差异。

谢谢

工作示例：http: [//goo.gl/DesJo](http://goo.gl/DesJo)

使用：[响应式幻灯片](http://responsive-slides.viljamis.com)

PS：有没有办法预加载所有图像？

HTML：

```
<div id="content">
  <article class="layer">
    <div class="wrap">
      <ul class="rslides">
        <li><img src="01.jpg" alt=""></li>
        <li><img src="02.jpg" alt=""></li>
        <li><img src="03.jpg" alt=""></li>
        <li><img src="04.jpg" alt=""></li>
        <li><img src="05.jpg" alt=""></li>
        <li><img src="06.jpg" alt=""></li>
        <li><img src="07.jpg" alt=""></li>
        <li><img src="08.jpg" alt=""></li>
        <li><img src="09.jpg" alt=""></li>
      </ul>
    </div>
  </article>
  <article class="layer"></article>
</div> 
```

JavaScript：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="js/resize.js"></script>
<script src="js/responsiveslides.min.js"></script>
<script>
  $(function() {
    $(".rslides").responsiveSlides({
        fx: 'fade',
        speed: 0,
        timeout: 3000,
        random: true
      });
  });
</script> 
```

调整大小.js

```
/*window.onresize = function(){
  $('article.layer img').css({
    maxHeight: $('article.layer').height() * 0.8,
    maxWidth: $('article.layer').width() * 0.8
  });
};*/

$(window).resize(function(){
  $('article.layer img').css({
    maxHeight: $('article.layer').height() * 0.8,
    maxWidth: $('article.layer').width() * 0.8
  });
}); 
```

CSS（没有 CSSreset 和菜单）

```
body {
    font-family: 'theantiquab_w5_plainregular';
    color: #000;
}
a {
    text-decoration: none;
    color: #000;
}
a:hover {
    color: #e84a36;
}
@font-face {
    font-family: 'theantiquab_w5_plainregular';
    src: url('theantiqua-webfont.eot');
    src: url('theantiqua-webfont.eot?#iefix') format('embedded-opentype'),  url('theantiqua-webfont.woff') format('woff'),  url('theantiqua-webfont.ttf') format('truetype'),  url('theantiqua-webfont.svg#theantiquab_w5_plainregular') format('svg');
    font-weight: normal;
    font-style: normal;
}
article, aside, figure, footer, header, hgroup, menu, nav, section {
    display: block;
}
html, body, #content {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
}
article.layer {
    position: relative;
    display: table;
    height: 100%;
    width: 100%;
}
div.wrap {
    display: table-cell;
    vertical-align: middle;
    text-align: center;
}
article.layer img {
    max-width: 80%;
    max-height: 80%;
}
/* http://responsive-slides.viljamis.com */

.rslides {
    display: inline-block;
    position: relative;
    list-style: none;
    overflow: hidden;
    width: 100%;
    padding: 0;
    margin: 0;
}
.rslides li {
    position: absolute;
    display: none;
    width: 100%;
    left: 0;
    top: 0;
}
.rslides li:first-child {
    position: relative;
    float: left;
}
.rslides img {
    height: auto;
    border: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:45:07.503

这里的问题是 IE 7 不支持 css display:table-cell 所以你应该添加一个表格以使内容居中。

```
<!--[if gt IE 7]><!--><div id="content">
  <article class="layer">
    <div class="wrap"><!--<![endif]-->
      <!--[if lte IE 7]><table class="layer" style="margin:0 auto;height:100%;"><tr><td class="wrap" style="vertical-align:middle;"><![endif]-->
      <ul class="rslides">
        <li><img src="01.jpg" alt=""></li>
        <li><img src="02.jpg" alt=""></li>
        <li><img src="03.jpg" alt=""></li>
        <li><img src="04.jpg" alt=""></li>
        <li><img src="05.jpg" alt=""></li>
        <li><img src="06.jpg" alt=""></li>
        <li><img src="07.jpg" alt=""></li>
        <li><img src="08.jpg" alt=""></li>
        <li><img src="09.jpg" alt=""></li>
      </ul>
    <!--[if gt IE 7]><!-->
    </div>
  </article>
  <!--<![endif]-->
 <!--[if lte IE 7]></td></tr></table><![endif]--> 
```

要预加载所有图像，您应该在这里使用 javascript，有一个答案：[Preloading images with jQuery](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

# eclipse - 如何一劳永逸地为eclipse设置wxpython的解释器

> ID：14184589
> 
> 赞同：0
> 
> 时间：2013-01-06T17:11:49.143
> 
> 标签：eclipse, macos, python-2.7, wxpython

我有 Eclipse、python 2.7、wxpython 2.8 和 OSx 10.5.8 我希望 wxpython 正确地包含在我的 eclipse 环境中，而不是将所有 wxpython 命令下划线作为错误。

我已经通过首选项在 PYTHONPATH 中导入了 wx 库的正确路径。一旦我在 Eclipse 中手动导入它们，保存设置，然后它就可以工作了。

但是，如果我关闭 Eclipse，然后再次打开它，即使解释器有自己的 wxpython 路径，它似乎也无法识别，而且我没有自动完成功能，也没有文档。我需要删除并再次添加相同的路径以使一切正常。几个月后它仍然会发生。我想这可能是macosx eclipse的问题。

你知道为什么吗？你同意？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:13:13.150

我总是去 Preferences / PyDev / Interpreter - Python。然后添加一个新的解释器，然后单击添加并应用。等到所有内容都解析完毕，这需要一段时间。然后单击确定。

将解释器从“默认”更改为新设置的解释器。

检查是否为您的项目设置了正确的解释器。右键单击项目/属性/PyDev - 解释器/语法。新项目应该默认得到这个。

# android - Google Maps Android API v2 - Hollow Polygon not correctly drawn

> ID：14184590
> 
> 赞同：0
> 
> 时间：2013-01-06T17:11:53.833
> 
> 标签：android, google-maps, google-maps-android-api-2

The code below doesn't work with Google Maps API v2\. The polygons (outer and inner polygons) are drawn with the right border, but the fill color of the outer one is not drawn.

```
PolygonOptions polygonOptions = new PolygonOptions();
polygonOptions.add(outerCoordinates);
polygonOptions.addHole(Arrays.asList(innerCoordinates));
polygonOptions.fillColor(Color.BLUE);
polygonOptions.strokeWidth(1.0f); 
```

Does anybody face the same problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:20:12.873

Check whether there is a requirement that polygon coordinates have to be clockwise (or counterclockwise) ordered. Try to change the order.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:51:59.417

> The vertices must be added in counterclockwise order. [Reference](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/PolygonOptions?hl=es#addAll%28java.lang.Iterable%3Ccom.google.android.gms.maps.model.LatLng%3E%29)

I wrote a function to determinate if a `List<LatLng>` is clockwise. The code is an implementation of [this answer](https://stackoverflow.com/a/1165943/842697):

```
public boolean isClockwise(List<LatLng> region) {
    final int size = region.size();
    LatLng a = region.get(size - 1);
    double aux = 0;
    for (int i = 0; i < size; i++) {
        LatLng b = region.get(i);
        aux += (b.latitude - a.latitude) * (b.longitude + a.longitude);
        a = b;
    }
    return aux <= 0;
} 
```

Before adding the `polygon` points put these three lines:

```
if (isClockwise(polygon)) {
    Collections.reverse(polygon);
} 
```

# multithreading - 使用 Timer 和其他线程之间的关键部分的多线程 Delphi 同步

> ID：14184592
> 
> 赞同：5
> 
> 时间：2013-01-06T17:12:10.900
> 
> 标签：multithreading, delphi, asynchronous, synchronization, delphi-xe2

这是同步的问题。我对我的问题进行了简化，所以我有一个 VCL Timer 和几个线程。线程试图在两个位图中写入内容，计时器试图将位图绘制到图像（TImage）中。这是我的代码的修改，更容易理解（这个粘贴代码很模糊）。

```
//------------------------------------------------------------------------------
Procedure TMyForm.Add(iX,iY,iNr:integer);
begin
   EnterCriticalSection(csCriticalSection);
   bmRed.Canvas.Lock;
   bmBlue.Canvas.Lock;

   //.... drawing etc...
   bmRed.Canvas.TextOut(iX,iY,IntToStr(iNr));
   bmBlue.Canvas.TextOut(iX,iY,IntToSTr(iNr));

   bmRed.Canvas.Unlock;
   bmBlue.Canvas.Unlock;

   LeaveCriticalSection(csCriticalSection);
end;
//------------------------------------------------------------------------------
procedure TMyForm.tmTimer(...);
begin
   EnterCriticalSection(csCriticalSection);

   bmRed.Canvas.Lock;
   bmBlue.Canvas.Lock;

   //Drawing on bmRed and bmBlue
   imBlue.Canvas.Draw(bmBlue);
   imRed.Canvas.Draw(bmBlue);

   bmRed.Canvas.Unlock;
   bmBlue.Canvas.Unlock;

   LeaveCriticalSection(csCriticalSection);
end;
//------------------------------------------------------------------------------
Procedure TMyThread.Execute();
begin
   Randomize;
   while not terminated do
   begin
      MyFormInstance.Add(Random(100),Random(100),Random(100));

      Sleep(20);
   end;
end;

initialization
   InitializeCriticalSection(csCriticalSection);
finalization
   DeleteCriticalSection(csCriticalSection); 
```

通常线程在进入关键部分时会给我错误，或者几秒钟后计时器将不再吸引我任何东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T20:51:09.587

尝试在您的代码中添加异常处理，并且不要同时锁定两个位图：

```
var
  csCriticalSection: TRTLCriticalSection;

procedure TMyForm.Add(iX,iY,iNr:integer);
begin
  EnterCriticalSection(csCriticalSection);
  try
    bmRed.Canvas.Lock;
    try
      bmRed.Canvas.TextOut(iX,iY,IntToStr(iNr));
    finally
      bmRed.Canvas.Unlock;
    end;

    bmBlue.Canvas.Lock;
    try
      bmBlue.Canvas.TextOut(iX,iY,IntToSTr(iNr));
    finally
      bmBlue.Canvas.Unlock;
    end;
  finally
     LeaveCriticalSection(csCriticalSection);
  end;
end;

procedure TMyForm.tmTimer(Sender: TObject);
begin
  EnterCriticalSection(csCriticalSection);
  try
    bmRed.Canvas.Lock;
    try
      imRed.Canvas.Draw(bmBlue);
    finally
      bmRed.Canvas.Unlock;
    end;

    bmBlue.Canvas.Lock;
    try
      imBlue.Canvas.Draw(bmBlue);
    finally
      bmBlue.Canvas.Unlock;
    end;
  finally
    LeaveCriticalSection(csCriticalSection);
  end;
end;

procedure TMyThread.Execute;
begin
  Randomize;
  while not Terminated do
  begin
    MyFormInstance.Add(Random(100),Random(100),Random(100));
    Sleep(20);
  end;
end;

initialization
  InitializeCriticalSection(csCriticalSection);
finalization
  DeleteCriticalSection(csCriticalSection); 
```

如果那仍然是崩溃/错误，那么您的代码中有一个未显示的不同错误。特别是考虑到您永远不应该在进入/离开临界区时出错，除非临界区本身已损坏。

# c - 尝试为字符串制作二叉树

> ID：14184597
> 
> 赞同：-5
> 
> 时间：2013-01-06T17:12:39.753
> 
> 标签：c, data-structures, binary-search-tree

```
insert(char * key, struct node *leaf, int x)
{
    if (x==1) //Customer
    {
        if( strcmp(leaf->customer.IDNo,root->customer.IDNo)==0 )
        {
            *leaf = (struct node) malloc(101);
            *leaf->customer.IDNo = key;
            /* initialize the children to null */
            (*leaf)->left = 0;
            (*leaf)->right = 0;
        }

        else if(strcmp(key,(*leaf)->customer.IDNo)<0)
        {
            insert( key, &(*leaf)->left );
        }

        else if(strcmp(key,(*leaf)->customer.IDNo)>0)
        {
            insert( key, &(*leaf)->right );
        }
    }

    else //Product
    {
        if( strcmp(leaf->product.ProdName,root->product.ProdName)==0 )
        {
            *leaf = (struct node) malloc(101);
            (*leaf)->product.ProdName = key;
            /* initialize the children to null */
            (*leaf)->left = 0;
            (*leaf)->right = 0;
        }

        else if(strcmp(key,(*leaf)->product.ProdName)<0)
        {
            insert( key, &(*leaf)->left );
        }

        else if(strcmp(key,(*leaf)->product.ProdName)>0)
        {
            insert( key, &(*leaf)->right );
        }
    }
} 
```

45,64 转换为非标量类型请求 46 赋值从没有强制转换的指针生成整数 48,49,51,53,55,57,65,67,68,70,72,74,76 无效类型参数 - >（有结构节点）53、57、72、76 函数“插入”的参数太少

```
Node *search(char * key, struct node *leaf,int x)
{
    struct node * y;

    if (x==1)
    {
        if( leaf != 0 )
        {
            if(strcmp(key,leaf->customer.IDNo)==0)
            {
                y= leaf;
            }

            else if(strcmp(key,leaf->customer.IDNo)<0)
            {
                y= search(key, leaf->left);
            }

            else
            {
                y= search(key, leaf->right);
            }
        }
    }

    else if (x==2)
    {

        if( leaf != 0 )
        {
            if(strcmp(key,leaf->product.ProdName)==0)
            {
                y= leaf;
            }

            else if(strcmp(key,leaf->product.ProdName)<0)
            {
                y= search(key, leaf->left);
            }

            else
            {
                y= search(key, leaf->right);
            }
        }
    }

    else y= 0;
    return y;
} 
```

94,98,112 函数“搜索”的参数太少

多行发生的错误是相似的，所以我需要的只是有关如何修复其中一个错误的说明，其余的我可以完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:33:28.170

您在混淆指针和它们指向的内容时遇到了许多问题。

例如，在这段代码中：

```
*leaf = (struct node) malloc(101); 
```

你有几个严重的问题：

1.  malloc 返回一个指向内存的指针，而不是一个具体的结构。因此，尝试将其返回的指针转换为结构节点将不起作用。您应该将其转换为 struct node*（指向节点的指针）而不是具体节点。
2.  叶是指向节点的指针。如果您尝试取消引用并将其设置为等于另一侧的节点，您将尝试写入节点指向的内存，而不是更改指针指向的位置。您可能想做其他事情（如下所述）。
3.  将 101 之类的任意数字传入 malloc 是极其不安全和浪费的。相反，您应该要求 malloc 通过传入 sizeof(struct node) 为您提供适量的空间。

不过，更重要的是，您试图更改插入函数内部的叶指针，但按值传递叶指针的问题。为了更改叶指针指向的节点，您应该传入一个指向叶指针的指针，而不是叶指针本身。尝试将签名更改为使用 a `struct node** leaf`，然后更新您的代码，以便在代码中重新分配叶子指向的指针。

这里还有许多其他指针错误，但最终我认为它们都源于混淆指针及其指向的内容。在修复代码时，请尽量记住是否要更改指针指向的对象，或者首先指向哪个对象。

希望这可以帮助！

# c# - 地图控件 SetView 仅适用于页面的首次加载

> ID：14184599
> 
> 赞同：1
> 
> 时间：2013-01-06T17:12:49.520
> 
> 标签：c#, silverlight, windows-phone-7

我在 WP7 应用程序中使用的 Bing 地图控件存在问题。

当我导航到带有地图控件的页面时，它会启动`GeoCoordinateWatcher`. 当`GeoCoordinateWatcher`我有一些位置数据时，它会调用一种`SetView()`方法将地图居中在当前位置。还有一个按钮`ApplicationBar`也可以启动`GeoCoordinateWatcher`.

现在，问题是，当我第一次导航到此页面时，一切正常：`GeoCoordinateWatcher`开始，一段时间后给我位置数据，`SetView()`在我需要时调用和地图中心。按钮也一样。

但是，如果我按返回按钮返回主页，然后尝试再次导航到地图页面，则`SetView()`停止工作。在调试中，我看到围绕它的代码按预期工作并且传递给的数据`SetView()`是正确的，但是控件没有任何反应，并且更改视图的事件也不会触发。

我假设地图初始化（或处理导航）可能有问题，但我不知道在哪里挖掘。

**编辑：** 我尝试过`Map.Center`直接更改，但它的工作方式与`SetView()`不一样：它在第一次导航到页面时工作正常，在其他时间不起作用。

**编辑2：** 好的，它变得更奇怪了。在调试中，我看到我的地图中心实际上设置为正确的值。但是一个实际的控件显示了完全不同的位置，而我，四处移动地图，并没有改变我从代码中看到的值。

**编辑 3：** 我添加了一个按钮来`ApplicationBar`调用`SetView()`它，它工作正常。显然，当我`SetView()`因`GeoCoordinateWatcher.PositionChanged`事件引发而调用时，就会出现问题。我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:44:35.377

尝试使用`map.Center = loc.CoOrdinates;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:29:22.047

我找到了解决方案。

在我的原始代码中，我订阅`GeoCoordinateWatcher.Position`了页面构造函数中的属性更改事件：`App.PropertyChanged += AtmInfoPageOnAppPropertyChanged`

我所要做的就是将它移动到`OnNavigatedTo`事件处理程序并添加`App.PropertyChanged -= AtmInfoPageOnAppPropertyChanged`到`OnNavigatedFrom`事件处理程序。

我认为，问题在于保持旧页面订阅事件不允许它被释放，同时不允许新页面订阅同一事件，从而导致代码被调用与屏幕上显示的不同的页面和不同的地图控件。

# php - 如何计算5天的价格（酒店预订系统）

> ID：14184601
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:13:01.573
> 
> 标签：php, mysql, sql, phpmyadmin

我有一个酒店预订系统，当用户选择入住酒店的开始日期和结束日期时，我想给出总价：

例如：当用户选择开始日期：2013-08-01，到：2013-08-11（两个季节默认，和旺季）时，天的价格也是不同的。

* * *

这是我的桌子：

![在此处输入图像描述](../Images/a275421690aef815786326a7f5cc885e.png)

如何编写 SQL 命令（MySQL）或者我需要使用 PHP 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:28:02.690

我不是 SQL 专家，但我要做的是编写存储过程

1.  查找范围内的所有日期。[请参阅http://www.richnetapps.com/using-mysql-generate-daily-sales-reports-filled-gaps/](http://www.richnetapps.com/using-mysql-generate-daily-sales-reports-filled-gaps/)上的 fill_calendar

2.  对于范围内的每一天，检查 DAYOFWEEK (http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:01:15.973

您的数据结构没有设置为非常有效地执行此操作。但是，它仍然是可能的。

我会先分开每个逗留日期。将此加入费率表。然后使用基于星期几的大案例陈述来获得费率。如果费率表中没有匹配项，则使用默认费率：

```
select sum(case when dayname(thedate) = 'Monday' then coalesce(r.MonPrice, def.MonPrice)
                when dayname(thedate) = 'Tuesday' then coalesce(r.TuePrice, def.TuePrice)
                . . .
                when dayname(thedate) = 'Sunday' then coalesce(r.SunPrice, def.SunPrice) as TotalPrice
from (select strtodate('2013-08-01', '%Y-%m-%d') as thedate union all
      select strtodate('2013-08-02', '%Y-%m-%d') union all
      . . . 
      select strtodate('2013-08-11', '%Y-%m-%d')
     ) dates left outer join
     Rates r
     on dates.thedate between r.date_to and r.date_from cross join
     Rates def
     on def.season_price = 'default' 
```

在此示例中，我将每个日期都放入一个子查询中。还有其他方法可以做到这一点，但由于您是在 php 中构建查询，这可能是最简单的解决方案。

“...”表示添加类似的 SQL 代码，因为“...”不被识别为 SQL 的一部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T17:17:46.503

```
SELECT 
   Val1,
   Val2,
   Val3,
   (Val1 + Val2 + Val3) as 'Total'
FROM Emp 
```

或者如果你只想要一行：

```
SELECT 
   SUM(Val1) as 'Val1',
   SUM(Val2) as 'Val2',
   SUM(Val3) as 'Val3',
   (SUM(Val1) + SUM(Val2) + SUM(Val3)) as 'Total'
FROM Emp 
```

# ios - 签署 PhoneGap 构建应用程序以进行分发。无法下载

> ID：14184606
> 
> 赞同：0
> 
> 时间：2013-01-06T17:13:26.020
> 
> 标签：ios, cordova

在签署我的 PhoneGap Build 应用程序以分发到 AppStore 时遇到真正的麻烦。我能够使用开发证书成功签名并在我指定的 iPhone 设备上构建，但是在使用分发证书和配置文件安装 ipk 时，我得到了

“无法下载”

采取的步骤：

1) 在配置门户中创建分发证书签名请求并下载 2) 使用密钥链访问将证书和密钥导出为 .p12 3) 为应用程序创建分发配置文件。4) 将 .p12 和配置文件上传到 PhoneGap 构建并解锁密钥 5) 使用 QR 码在 iPhone 4s 和 iPod Touch 上安装，但在安装过程中出现无法下载错误消息。

我在 config.xml 中指定的包名称是：com.myapp.mobile 应用程序 ID（在供应门户的 AppIds 页面中是：4DWP3FV5J6.com.myapp.mobile 供应配置文件状态为活动，证书到期日期为 2014 年 1 月。

我还尝试使用新的 PhoneGap 构建帐户重新创建所有证书。

谁能建议可能导致此错误的原因或我如何调试以获取更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:27:04.723

您如何尝试下载文件？例如，来自移动设备上的 build.phonegap.com 或通过 ipa（我假设你的意思是什么而不是 ipk）？你会想做前者。

问候，凯文

# android - SQLite 数组列表 安卓

> ID：14184607
> 
> 赞同：0
> 
> 时间：2013-01-06T17:13:35.893
> 
> 标签：android, sqlite, bitmap, android-sqlite

我有一个关于 SQLite 的问题。我正在尝试在手机的数据库中保存一个自定义对象（比如说 ObjectA）。ObjectA 包含一个 ArrayList。我可能不得不将图像保存为 BLOB，但我应该如何设计我的数据库。我应该用我的所有图片 (BLOB byte[], INTEGER objectA_row_id) 创建一个新表吗？还是有其他方法可以建立这种关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:14:45.727

可以创建带有图片路径的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T14:15:22.983

您不应该将文件路径直接存储在数据库中，因为如果您删除文件，那么您将无法获得图像，因此您有 2 个选项：1）将图像存储到您的缓存/内部，然后保存其文件路径。2）使用包含BLOB类型的数据库表。

# android - 如何为 Actionbar Sherlock 设置填充？

> ID：14184610
> 
> 赞同：0
> 
> 时间：2013-01-06T17:13:53.487
> 
> 标签：android, actionbarsherlock

我想将自定义背景可绘制设置为我的 ActionbarSherlock 控件。我的背景有一个小的底部阴影。所以，我想将操作栏的底部填充设置为 15dip，但我不知道如何。请帮我一些代码。

这是我的带有阴影背景的活动的屏幕截图：

![在此处输入图像描述](../Images/814f568a13e10dd917d1215c0dfd2ca4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:02:23.990

我认为您应该自定义`actionBarSize`，它是固定的：

这是主题引用的dimens文件：

```
<resources>
    <!-- Default height of an action bar. -->
    <dimen name="abs__action_bar_default_height">40dip</dimen>
    <!-- Vertical padding around action bar icons. -->
    <dimen name="abs__action_bar_icon_vertical_padding">4dip</dimen>
    <!-- Text size for action bar titles -->
    <dimen name="abs__action_bar_title_text_size">16dp</dimen>
    <!-- Text size for action bar subtitles -->
    <dimen name="abs__action_bar_subtitle_text_size">12dp</dimen>
    <!-- Top margin for action bar subtitles -->
    <dimen name="abs__action_bar_subtitle_top_margin">-2dp</dimen>
    <!-- Bottom margin for action bar subtitles -->
    <dimen name="abs__action_bar_subtitle_bottom_margin">4dip</dimen>
</resources> 
```

主题：

```
<item name="actionBarSize">@dimen/abs__action_bar_default_height</item> 
```

没有底部填充配置。

# java - Android 部署设备中的 WebView 错误

> ID：14184616
> 
> 赞同：0
> 
> 时间：2013-01-06T17:14:45.897
> 
> 标签：java, android, html, webview, intellij-idea

我有一个 html 文件，可以在模拟器中完美运行，但在部署的 Android 设备中不起作用。

这是我在具有 WebView 的布局的 XML 中的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" android:background="@drawable/white_paper_complete">

<WebView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/wv_basicinfo" android:layout_gravity="left|center_vertical"/>
<TextView
        android:layout_width="209dp"
        android:layout_height="86dp"
        android:text="       BASIC INFORMATION"
        android:id="@+id/textView" android:textColor="@android:color/black" android:textSize="30dp"
        android:layout_gravity="center"/>
<ImageView
        android:layout_width="42dp"
        android:layout_height="45dp"
        android:id="@+id/imageView" android:layout_gravity="center" android:background="@drawable/loader"/>
</LinearLayout> 
```

这是我在其类中的代码：

```
package com.example.ITax;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

public class OpenBasicInfo extends MyActivity
{
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.basic_info);

    WebView wv_basic_info = (WebView) findViewById(R.id.wv_basicinfo);
    wv_basic_info.loadData(readTextFromResource(R.raw.basicinfo), "html", "utf-8");
}

private String readTextFromResource(int resourceID)
{
    InputStream raw = getResources().openRawResource(resourceID);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    int i;

    try
    {
         i = raw.read();
        while(i != -1)
        {
            stream.write(i);
            i = raw.read() ;
        }
    }

    catch (IOException e)
    {
        e.printStackTrace();
    }

    return stream.toString();
}
} 
```

我的 html 文件位于 res > raw > basicinfo.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:22:22.310

是否启用了 GPU 渲染？启用 GPU 渲染时不支持 WebView（这可能仅适用于模拟器） [http://developer.android.com/tools/devices/emulator.html#acceleration](http://developer.android.com/tools/devices/emulator.html#acceleration)

> **注意**：并非所有应用程序都与图形硬件加速兼容。特别是浏览器应用程序和使用 WebView 组件的应用程序不兼容图形加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:44:35.043

```
wv_basic_info.loadData(readTextFromResource(R.raw.basicinfo), "text/html; charset=UTF-8", null); 
```

这可以完美运行，尤其是在 Android 4.0 上，它显然忽略了 HTML 中的字符编码。

在 2.3 和 4.0.3 上测试。

# php - 如何将条件应用于 laravel 3 中的与关系？

> ID：14184617
> 
> 赞同：1
> 
> 时间：2013-01-06T17:14:46.687
> 
> 标签：php, orm, where, laravel, laravel-3

我在 laravel、页面和内容中有一对对象。

我已经设置了一个关系函数，并包含，其中包括基于 page_id 的内容。

我想应用其他条件，例如删除位置 - 0，以及日期在特定范围内的位置，我知道如何应用 where 条件并设置这些字段。

我无法理解的是如何应用额外条件以及匹配关系字段。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:35:58.933

在模型中定义关系是您需要对模型本身做的所有事情。但是，您可以向模型添加静态函数，以获取包含所需信息的数据。

页面模型方法示例：

```
class Page extends Eloquent {

    public function contents()    
    {
        return $this->has_many('Content');
    }

    // Return all content that has not been marked as
    // deleted in the database
    public static function with_contents($id)
    {
        return Page::find($id)->contents()
                              ->where_null('deleted')
                              ->get();
    }
} 
```

此示例假定内容表中的已删除字段为空，除非它被删除，在这种情况下它将具有任何值。

要使用，您只需使用

```
$page = Page::with_contents('1'); 
```

您可以根据需要创建任意数量的这些静态辅助方法，或者向一个方法添加任意数量的条件，然后使用新的静态方法来检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:09:00.940

我想这可能是你正在寻找的

[http://doginthehat.com.au/2012/06/adding-conditions-to-relationships-in-laravel/](http://doginthehat.com.au/2012/06/adding-conditions-to-relationships-in-laravel/)

```
class User extends Eloquent {

    public function meta()
     {
          return $this->has_many('Meta','target_id')
                      ->where('target_type','=',$this->table());
     }

} 
```

# ascii - 带有奇偶校验位的 ASCII 码是否允许我们纠正一位错误并恢复原始数据？

> ID：14184618
> 
> 赞同：0
> 
> 时间：2013-01-06T17:14:56.203
> 
> 标签：ascii, parity

带有奇偶校验位的 ASCII 码是否允许我们纠正一位错误，并且 ASCII 码是否可以恢复原始数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:15:33.720

> 带有奇偶校验位的 ASCII 码是否允许我们纠正一位错误

不能。它只能**检测**1 位错误。

# iphone - 如何使用 Objective C 在 iOS 上设置放大/缩小动画？

> ID：14184619
> 
> 赞同：3
> 
> 时间：2013-01-06T17:14:58.940
> 
> 标签：iphone, ios, objective-c, animation

我正在寻找复制在 iOS 应用程序中很常见的放大/缩小动画（例如[#1](http://www.cocoacontrols.com/platforms/ios/controls/cooluiviewanimations)，[#2](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=animation)）。我正在专门寻找一个可以为理想类型的动画提供一些具有预先指定值的通用库的源。就像放大一样，它应该带有预配置的变换值，这些值很容易被人眼识别。诸如流行动画之类的东西。

我认为这些必须在 iOS 中得到很好的支持，无论是通过库还是直接 API 支持......但我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-17T10:08:16.277

使用以下代码放大和缩小动画。

对于放大：

```
- (void)popUpZoomIn{
popUpView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
[UIView animateWithDuration:0.5
                 animations:^{
                     popUpView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.0, 1.0);
                 } completion:^(BOOL finished) {

                 }];
} 
```

对于缩小：

```
- (void)popZoomOut{
[UIView animateWithDuration:0.5
                 animations:^{
                     popUpView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
                 } completion:^(BOOL finished) {
                     popUpView.hidden = TRUE;
                 }];
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-06T17:28:51.593

这样的动画可以在不需要 3rd 方库的情况下完成。

例子：

```
 self.frame = CGRectMake(0.0f, 0.0f, 200.0f, 150.0f);
[UIView beginAnimations:@"Zoom" context:NULL];
[UIView setAnimationDuration:0.5];
self.frame = CGRectMake(0.0f, 0.0f, 1024.0f, 768.0f);
[UIView commitAnimations]; 
```

也使用比例的示例

```
 UIButton *results = [[UIButton alloc] initWithFrame:CGRectMake(5, 5, 100, 100)];
[results addTarget:self action:@selector(validateUserInputs) forControlEvents:UIControlEventTouchDragInside];
[self.view addSubview:results];

results.alpha = 0.0f;
results.backgroundColor = [UIColor blueColor];
results.transform = CGAffineTransformMakeScale(0.1,0.1);
[UIView beginAnimations:@"fadeInNewView" context:NULL];
[UIView setAnimationDuration:1.0];
results.transform = CGAffineTransformMakeScale(1,1);
results.alpha = 1.0f;
[UIView commitAnimations]; 
```

来源： http: [//madebymany.com/blog/simple-animations-on-ios](http://madebymany.com/blog/simple-animations-on-ios)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-16T09:58:35.977

适用于 xCode 7 和 iOS 9

```
 //for zoom in
    [UIView animateWithDuration:0.5f animations:^{

        self.sendButton.transform = CGAffineTransformMakeScale(1.5, 1.5);
    } completion:^(BOOL finished){

    }];
  // for zoom out
        [UIView animateWithDuration:0.5f animations:^{

            self.sendButton.transform = CGAffineTransformMakeScale(1, 1);
        }completion:^(BOOL finished){}]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-01T05:53:33.207

考虑到我给出的示例，我一直在寻找的是一个抽象层，它将为我提供最常用的动画类型。

此类类型将使开发人员不仅可以包含放大/缩小等常见动画，还可以包含最佳动画值（To、From、Timing 等），因此开发人员不必担心这些。

我在[这里找到了一个这样的库](https://github.com/WilliamZang/FastAnimationWithPOP)，我相信还有更多。

# python - 如何在 IPython.parallel 中使用交互式定义的类？

> ID：14184621
> 
> 赞同：8
> 
> 时间：2013-01-06T17:15:03.137
> 
> 标签：python, parallel-processing, ipython, ipython-notebook

## 语境

在连接到集群的笔记本上的交互式原型开发中，我想定义一个在客户端`__main__`会话中可用并在集群引擎节点上交互式更新的类，以便能够通过传递此类实例来移动该类的实例LoadBalanced 视图的参数。下面演示了典型的用户会话：

首先设置并行集群环境：

```
>>> from IPython.parallel import Client
>>> rc = Client()
>>> lview = rc.load_balanced_view()
>>> rc[:]
<DirectView [0, 1, 2]> 
```

在笔记本单元格中，让我们定义我们正在交互编辑的组件的代码片段：

```
>>> class MyClass(object):
...     def __init__(self, parameter):
...         self.parameter = parameter
...
...     def update_something(self, some_data):
...         # do something smart here with some_data & internal state
...
...     def compute_something(self, other_data):
...         # do something smart here with other data & internal state
...         return something
... 
```

在下一个单元格中，让我们创建一个构建此类实例的脚本，然后使用集群环境的负载平衡视图在各种输入参数上评估我们的组件：

```
>>> def process(obj, some_data, other_data):
...     obj.update_something(some_data)
...     return obj.compute_something(other_data)
...
>>> tasks = []
>>> some_instances = [MyClass(i) for i in range(10)]
>>> for obj in some_instances:
...    for some_data in data_source_1:
...         for other_data in data_source_2:
...             ar = lview.apply_async(process, obj, some_data, other_data)
...             tasks.append(ar)
...
>>> # wait for computation to end
>>> results = [ar.get() for ar in tasks] 
```

## 问题

这显然不起作用，因为负载平衡视图的引擎将无法解开作为第一个参数传递给`process`函数的实例。进程函数定义本身已成功传递，因为我假设`apply_async`执行字节码自省来腌制它（通过访问`.code`函数的属性），然后只对剩余的参数进行简单的腌制。

## 可能的解决方案（对我不起作用）

*   一种替代解决方案是在`%%px`保存类定义的单元格上使用单元格魔法`MyClass`。但是，这将阻止我在客户端脚本中构建也执行调度的类实例。我需要在没有魔法的情况下将单元格内容复制并粘贴到另一个单元格中`%%px`（或者使用魔法执行单元格两次，然后再次使用魔法执行单元格）但是当我仍在迭代中编辑类的方法时，这很乏味开发和评估设置。

*   另一种解决方案是将类定义嵌入`process`函数中，但我发现这不切实际，因为我想稍后在我的笔记本中的其他函数中重用该类定义。

*   或者，我可以停止使用一个类，而只使用可以通过将 then 作为第一个参数传递给引擎的函数`apply_async`。但是我也不喜欢这样，因为我想以面向对象的方式对我的代码进行原型设计，以便以后从笔记本中提取并将生成的类包含在面向对象的库中。笔记本会话用作协作原型工具，用于使用[http://nbviewer.ipython.org](http://nbviewer.ipython.org)发布者在开发人员之间交换想法。

*   最后的替代方法是在文件系统上的文件上的 python 模块中编写我的类，然后使用 NFS 将该文件发送到引擎 PYTHONPATH。这有效，但阻止我只在笔记本环境中工作，这违背了笔记本中交互式原型设计的全部目的。

所以基本上，有没有办法以交互方式定义一个类，然后将它的定义发送到引擎？

应该可以`inspect.getsource`在客户端中使用 pickle 类定义，然后将源发送到引擎并使用`eval`内置但不幸的是源检查不适用于`DummyMod`内置模块中定义的类：

`TypeError: <IPython.core.interactiveshell.DummyMod object at 0x10c2c4e50> is a built-in class`

有没有办法检查类定义的字节码？

或者是否可以使用`%%px`魔法在客户端和每个引擎上本地执行单元格的内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T20:52:25.557

感谢您提出详细的问题（并在 Twitter 上联系我）。

首先，也许它应该被认为是你不能只推送类的错误，因为简单的解决方案应该是

```
rc[:]['MyClass'] = MyClass 
```

但是酸洗交互式定义的类只会产生一个引用（`'\x80\x02c__main__\nMyClass\nq\x01.'`），给你的 DummyMod AttributeError。这可能可以在 IPython 的序列化内部修复。

不过，到一个实际的工作解决方案。

添加本地执行`%%px`非常简单，只需：

```
def pxlocal(line, cell):
    ip = get_ipython()
    ip.run_cell_magic("px", line, cell)
    ip.run_cell(cell)
get_ipython().register_magic_function(pxlocal, "cell") 
```

现在，除了在本地运行单元之外，您还拥有一个`%%pxlocal`运行的魔法。`%%px`

那么你所要做的就是：

```
%%pxlocal

class MyClass(object):
    # etc 
```

到处定义你的班级。我将在 中添加一个`--local`标志`%%px`，因此不需要这个额外的步骤。

一个完整的工作[示例笔记本](http://nbviewer.ipython.org/4470122)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T23:41:10.063

我认为您可以使用“dill”来腌制交互式定义的类，而不必担心 %%pxlocal 魔术、使用 DummyMod 和伪造命名空间。

要交互式地腌制一个类，只需执行“import dill”，然后像第一次那样构建你的类。然后，您应该能够通过任何健全的映射或 apply_async 函数发送它。

# python - 格式化传递给函数的字典的首选方法？

> ID：14184623
> 
> 赞同：1
> 
> 时间：2013-01-06T17:15:13.057
> 
> 标签：python, formatting, format

我将如何格式化：

```
self.bot = servo.Robot({
        'waist': servo.Servo(3, 90, .02, 0),
        'shoulder': servo.Servo(4, 130, .03, 15),
        'elbow': servo.Servo(5, 110, .02, 19),
        'wrist': servo.Servo(6, 20, .01, 9),
        'claw': servo.Servo(7, 40, .01, 0)
    }, [5, 15, 25]) 
```

如果太多了，创建一个名为 self.bot 的变量，使其等于 self.Robot(servo_dict, num_list) 的返回值，它接受一个字典和一个列表作为参数。

我已经查看了[PEP8](http://www.python.org/dev/peps/pep-0008/)和[其他](https://stackoverflow.com/questions/6388187/what-is-the-proper-way-to-format-a-multi-line-dict-in-python)Stack Overflow 问题。我会鼓励答案链接到样式指南...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:20:29.780

使用`dict`构造函数，您至少可以消除输入一堆引号：

```
self.bot = servo.Robot(dict(
        waist = servo.Servo(3, 90, .02, 0),
        shoulder = servo.Servo(4, 130, .03, 15),
        elbow = servo.Servo(5, 110, .02, 19),
        wrist = servo.Servo(6, 20, .01, 9),
        claw = servo.Servo(7, 40, .01, 0)
    ), [5, 15, 25]) 
```

当然，你也可以像这样写一个辅助函数：

```
def servos(**kwargs):
    for k, v in kwargs.iteritems():
        kwargs[k] = servo.Servo(*v)
    return kwargs 
```

进而：

```
self.bot = servo.Robot(servos(
        waist = (3, 90, .02, 0),
        shoulder = (4, 130, .03, 15),
        elbow = (5, 110, .02, 19),
        wrist = (6, 20, .01, 9),
        claw = (7, 40, .01, 0)
    ), [5, 15, 25]) 
```

如果您将使用不同类型的实例执行大量 dicts-of-instances，则可以使 helper 通用：

```
def instance_dict(typ, **kwargs):
    for k, v in kwargs.iteritems():
        kwargs[k] = typ(*v)
    return kwargs

# later...
self.bot = servo.Robot(
               instance_dict(servo.Servo,
                   waist = (3, 90, .02, 0),
                   shoulder = (4, 130, .03, 15),
                   elbow = (5, 110, .02, 19),
                   wrist = (6, 20, .01, 9),
                   claw = (7, 40, .01, 0) ),
               [5, 15, 25]) 
```

# java - Apache Derby - 数据库已创建但未找到

> ID：14184625
> 
> 赞同：1
> 
> 时间：2013-01-06T17:15:14.500
> 
> 标签：java, web-applications, derby

这是我上一个[问题的延续](https://i.stack.imgur.com/rRSrE.png)

我正在尝试在我的 Web 应用程序中嵌入一个 derby 数据库。我能够嵌入它，虽然我面临着小故障。这是我的项目结构的快照。

![项目结构](../Images/e46954cdf864727ccb7594bb5377aa1f.png)

我想知道为什么`class.forName("org.apache.derby.jdbc.EmbededDriver")`会抛出异常？

```
java.lang.ClassNotFoundException: org.apache.derby.jdbc.EmbededDriver 
```

为了克服这个问题，我使用了

```
DriverManager.registerDriver(new org.apache.derby.jdbc.EmbeddedDriver()); 
```

哪个效果很好。为什么会这样？此外，如果这样编码，它将在哪里创建数据库。我无法发现数据库。

```
connection = DriverManager.getConnection("jdbc:derby:MyDbTest;create=true"); 
```

我检查了 tomcat webapps 和 eclipse 工作区，我没有找到数据库。

如果以这种方式给出，我可以发现它。

```
connection = DriverManager.getConnection("jdbc:derby:E:/MyDbTest;create=true"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:12:08.863

```
class.forName("org.apache.derby.jdbc.EmbededDriver") 
```

抛出异常，因为嵌入中缺少“d”。

有关指定文件系统上数据库位置的信息，请参见此处。

[连接到基于文件的 derby 数据库](https://stackoverflow.com/questions/10666313/connecting-to-a-file-based-derby-database/10666543#10666543)

# organization - 组织脚本时文件结构的最佳实践是什么？

> ID：14184627
> 
> 赞同：2
> 
> 时间：2013-01-06T17:15:15.230
> 
> 标签：organization, code-organization

在过去的几年里，我开始涉足使用 Python、R 和 Matlab 编写脚本。我的背景不是计算机科学，而是经过培训的生态学家。自从我开始涉足计算机生态学家以来，我已经从每个编程环境中编写并收集了数十个脚本。更复杂的是，我在个人计算机上运行的工作服务器上有脚本副本。事情真的已经失控了，我希望重组我的组织计划。迄今为止，我在文件夹中按项目松散地组织了脚本——这导致在数十个隐藏文件夹中包含数十个脚本。我在以前版本的脚本的文件夹中也有文件夹。最后，我对有经验的程序员的问题：组织多年的旧脚本并重新开始有哪些最佳实践？例如，我应该专注于创建中央存储库还是基于项目的方法更合适？我应该如何合并处理不同的旧版本脚本？任何有关如何进行的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:35:20.797

例如，我按语言保留我的

```
/opt/python
/opt/r
/opt/matlab 
```

* * *

> 我在以前版本的脚本的文件夹中也有文件夹。

你我的朋友应该发现[**git的伟大之处**](http://wikipedia.org/wiki/Git_%28software%29)

# razor - 如何将 DbContext 从模型绑定到视图

> ID：14184628
> 
> 赞同：2
> 
> 时间：2013-01-06T17:15:24.077
> 
> 标签：razor, binding, view, model, asp.net-mvc-4

我是 MVC 新手，遇到了这个简单的问题（我认为）。我有一个 DbContext

```
public class UsersContext : DbContext
{
    public UsersContext() : base("Share_DB") {}
    public DbSet<ItemDB> Items { get; set; }
} 
```

其中包含带有 id 和 Title 的项目列表：

```
[Table("Items")]
public class ItemDB
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public string Title { get; set; }
} 
```

我想将包含数据库表中所有项目的列表绑定到模型。但是我不知道该怎么做。

在视图（cshtml 文件）中，我想我已经定义了我必须使用的模型（`@model XXX.Models.ItemModel`），然后显示它，如下所示：

```
<ul>
@foreach (XXX.Models.ItemModel.ItemDB item in @Items)
{
    <li>@item.Title</li>
}
</ul> 
```

但是它找不到该`@Items`属性未找到。我怎么写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:22:35.913

MVC 的工作方式是当您在控制器中返回视图时，传递给 View() 的任何内容最终都会作为 Model 属性。换句话说：

```
public ActionResult Index()
{
    return View("Hello World");
} 
```

将字符串“Hello World”传递给您的视图。然后在您的 Index.cshtml 文件的顶部，您需要声明模型类型：

```
@model string 
```

用法变为：

```
<div>@Model</div> 
```

在您的情况下，您只需将 Items 列表传递给视图，并告诉它期望正确的模型类型：

```
public ActionResult Index()
{
    using (var db = new UsersContext()) 
    {
        var items = db.Items.ToList();

        return View(items);
    }
} 
```

然后在你看来：

```
@model IEnumerable<ItemDB> 
```

您可以将其用作：

```
@foreach (var item in Model)
{
    <div>@item.Title</item>
} 
```

# php - 如何在删除内置验证时使用 if 语句验证电子邮件地址？

> ID：14184629
> 
> 赞同：0
> 
> 时间：2013-01-06T17:15:25.667
> 
> 标签：php

在我的表单中，我有一个输入类型为“电子邮件”的列表项。
问题是每当我没有在输入框中输入有效的电子邮件地址时，就会出现一个弹出窗口，说“请输入电子邮件地址”。所以我的问题是如何删除这个弹出窗口并应用我自己的验证？我尝试将 novalidate = "novalidate" 放入表单中，并删除了弹出窗口，但我认为这会影响我的“if 语句”，因为它无法验证电子邮件地址。除了我在下面的代码中编写的那个之外，我所有的其他“if 语句”都在工作。这是我的代码的简单布局：

```
<form action ="" novalidate="novalidate" method="post">
    <ul>
        <li>
            <input type="email" name="email">
        </li>
    </ul>
</form>

<?php
    if (empty($errors) === true) {
        if (filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) {
            $errors[] = 'A valid email address is required.';
        }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:20:08.973

该语句仅在输入**有效**的电子邮件`if()`时才会执行。您需要反转语句中的逻辑，同时还要将参数保留在：**`novalidate``<form>`**

 **```
<form action="" novalidate="novalidate" method="post">
    <ul>
        <li>
            <input type="email" name="email">
        </li>
    </ul>
</form> 
```

你的 PHP 应该是这样的：

```
<?php
if(empty($errors) === true) 
{
    if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) 
    {
        $errors[] = 'A valid email address is required.';
    }
}
?> 
```**

# windows - 你好世界链接问题（ASM）

> ID：14184642
> 
> 赞同：0
> 
> 时间：2013-01-06T17:17:11.697
> 
> 标签：windows, assembly, linker, nasm

好的，今天我正在尝试学习一些asm。

我正在使用 nasm 并转到链接。这个你好世界似乎工作正常：

```
bits 32
extern _MessageBoxA@16
extern _ExitProcess@4

section .data
    title db 'Somme message',0 
    message db 'Hello World!',0 

section .text
global _start
_start:
    push dword 0            ; Type = MB_OK
    push dword title            ; Caption
    push dword message             ; Message
    push dword 0            ; Handle = NULL
    call _MessageBoxA@16

    push dword 0            ; Exit Code = EXIT_SUCCESS
    call _ExitProcess@4 
```

我可以使用以下命令构建它：nasm -fwin32 test.asm golink /entry _start /mix test.obj user32.dll, kernel32.dll

现在我的问题是：我可以使用 alink 而不是 golink 来构建它吗？如果是，我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:47:03.103

嗯，是的...但是您可能需要稍微更改您的源...并且您可能需要一个库来链接。Alink 现在有点“过时”了，尽管它仍然有效。我正在运行 Linux，并且很长时间没有使用 Windows。这些天在做 Windows 的人似乎更喜欢 GoLink。除非你有理由更喜欢 Alink，否则我会坚持使用 GoLink。（一个优点是我们有 Alink 的源代码——我什至可以在 Linux 上运行它！当然不能运行生成的可执行文件......）。如果您真的需要它，我也许可以挖掘出一些曾经可以工作的过时代码……但我会坚持使用 GoLink。（Pelle 的 PoLink 也应该可以工作，可能 MS 的 Link 也可以）。

# environment-variables - 使用 Meteor.js 检测环境？

> ID：14184643
> 
> 赞同：8
> 
> 时间：2013-01-06T17:17:23.103
> 
> 标签：environment-variables, meteor

有人想出使用 Meteor.js 检测托管环境的语法或模式吗？我已经让 Heroku buildpacks 工作了，并且有一个开发/生产环境，但是对于如何让我的应用程序检测它在哪个环境中运行，我有点空白。

有没有办法让 node.js 检测它在哪个端口上运行？我希望可能有一些像 app.address().port 这样的低级别的东西，但这似乎不起作用......

编辑：这是对我有用的解决方案。请注意，以下需要在服务器上运行，因此需要将其包含在 server\server.js 或类似文件中。

```
if (Meteor.is_server) {
    Meteor.startup(function () {
        // we want to be able to inspect the root_url, so we know which environment we're in
        console.log(JSON.stringify(process.env.ROOT_URL));

        // in case we want to inspect other process environment variables
        //console.log(JSON.stringify(process.env));
    });
} 
```

还创建了以下内容：

```
Meteor.methods({
  getEnvironment: function(){
    if(process.env.ROOT_URL == "http://localhost:3000"){
        return "development";
    }else{
        return "staging";
    }
  }
 }); 
```

这允许在客户端进行以下操作：

```
 Meteor.call("getEnvironment", function (result) {
      console.log("Your application is running in the " + result + "environment.");
 }); 
```

谢谢拉胡尔！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T18:48:19.357

您可以检查`process.env`服务器上的变量以查找有关当前环境的信息，包括端口：

```
{ TERM_PROGRAM: 'Apple_Terminal',
  TERM: 'xterm-256color',
  SHELL: '/bin/bash',
  TMPDIR: '/var/folders/y_/212wz0cx5vs20yd7y2psnh7m0000gp/T/',
  Apple_PubSub_Socket_Render: '/tmp/launch-hch25f/Render',
  TERM_PROGRAM_VERSION: '309',
  OLDPWD: '/usr/local/meteor/bin',
  TERM_SESSION_ID: '3FE307A0-B8FC-41AD-B1EB-FCFA0B8B25D1',
  USER: 'Rahul',
  COMMAND_MODE: 'unix2003',
  SSH_AUTH_SOCK: '/tmp/launch-gFCBXS/Listeners',
  __CF_USER_TEXT_ENCODING: '0x1F6:0:0',
  Apple_Ubiquity_Message: '/tmp/launch-QAWKHL/Apple_Ubiquity_Message',
  PATH: '/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin',
  PWD: '/Users/Rahul/Documents/Sites/test',
  NODE_PATH: '/usr/local/meteor/lib/node_modules',
  SHLVL: '1',
  HOME: '/Users/Rahul',
  LOGNAME: 'Rahul',
  LC_CTYPE: 'UTF-8',
  SECURITYSESSIONID: '186a4',
  PORT: '3001',
  MONGO_URL: 'mongodb://127.0.0.1:3002/meteor',
  ROOT_URL: 'http://localhost:3000' } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-04T10:22:41.207

有一个直接的 Meteor 函数：

```
Meteor.isDevelopment 
```

见：[https ://docs.meteor.com/api/core.html#Meteor-isDevelopment](https://docs.meteor.com/api/core.html#Meteor-isDevelopment)

和生产：

```
Meteor.isProduction 
```

都返回一个布尔值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-09T06:00:24.000

我使用了上述`NODE_ENV`变量的变体。请参阅此处了解更多信息：

[http://meteorpedia.com/read/Environment_Variables#Checking%20the%20value%20of%20an%20Environment%20Variable](http://meteorpedia.com/read/Environment_Variables#Checking%20the%20value%20of%20an%20Environment%20Variable)

```
if Meteor.isServer
  Meteor.methods
    'getEnvironment': -> process.env.NODE_ENV

Meteor.call 'getEnvironment', (err, result) ->
  if result == 'development'
    console.log('In dev env') 
```

# objective-c - 在某些情况下，将 NSString 转换为 NSDate 会增加一年

> ID：14184648
> 
> 赞同：0
> 
> 时间：2013-01-06T17:17:44.627
> 
> 标签：objective-c, ios, cocoa-touch, nsdate

自今年年底以来，我在将 NSString 转换为 NSDate 时遇到了一些问题。该代码以前一直运行良好，但它突然开始表现得很奇怪......

例如，当转换为 NSDate 时，2013-01-05 变为 2014-01-05。

因为它是一整年，所以感觉不像是时区吓人。

从 2012 年开始，它并没有这样做。

有人知道可能出了什么问题吗？

代码：NSString *dateString = postInfo.no​​teDate; NSString *newDateString = [dateString substringToIndex:10];

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init]; 
    [dateFormat setDateFormat:@"YYYY-MM-dd"]; 
    NSDate *date = [[NSDate alloc] init];
    date = [dateFormat dateFromString:newDateString]; 
```

newDateString 返回 2013-01-05

日期返回2014-01-05

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T17:24:09.330

从[文档](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)：

> Y 1..n 1997 年（在基于“一年中的一周”的日历中）。通常长度指定填充，但对于两个字母，它还指定最大长度。此年份名称用于 ISO 8601 定义的 ISO 年-周日历，但可用于需要处理周日期的非公历日历系统中。可能并不总是与日历年相同。
> 
> y 1..n 1996 年。通常长度指定填充，但对于两个字母，它还指定最大长度。

所以你想要'yyyy'

[精彩的WWDC 2011 视频“Session 117 - Performing Calendar Calculations”](https://developer.apple.com/videos/wwdc/2011/?id=117)中也讨论了这个“错误” ，这是任何 iOS/Cocoa 开发人员必看的内容。

维基百科关于[ISO 8601的文章](http://en.wikipedia.org/wiki/ISO_8601)

* * *

```
NSDate *date = [[NSDate alloc] init];
date = [dateFormat dateFromString:newDateString]; 
```

您创建一个 NSDate，然后创建另一个并覆盖第一个。做就是了

```
NSDate *date = [dateFormat dateFromString:newDateString]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T17:19:48.890

使用 yyyy 表示年份而不是 YYYY，它给出了周年。参见 ISO 标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T17:20:46.847

用小写字母yyyy，YYYY是另外一回事：

> 年（在基于“一年中的一周”的日历中）。此年份名称用于 ISO 8601 定义的 ISO 年-周日历，但可用于需要处理周日期的非公历日历系统中。可能并不总是与日历年相同。

见[http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns](http://www.unicode.org/reports/tr35/tr35-19.html#Date_Format_Patterns)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T17:36:01.920

我希望这会帮助你。尝试这个

```
 - (NSDate*) dateFromString:(NSString*)aStr
    {

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]];

        [dateFormatter setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
        [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

        NSLog(@"%@", aStr);
        NSDate   *aDate = [dateFormatter dateFromString:aStr];
        [dateFormatter release];
        return aDate;
    } 
```

# php - 使用线程内的base64将图像从android上传到php服务器

> ID：14184650
> 
> 赞同：0
> 
> 时间：2013-01-06T17:18:23.183
> 
> 标签：php, android, multithreading, base64

我有一个线程，带有一个 for 循环，它通过文件路径对象到画廊中的图像。线程内部的代码是：

```
 for(int i=0;i<tellerList;i++){
        Log.e("Picture", x.get(i));

        TAG_PICTURE = x.get(i);

        Bitmap bitmap = BitmapFactory.decodeFile(TAG_PICTURE);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();

        double hoyde1 = bitmap.getHeight();
        double bredde1 = bitmap.getWidth();
        int hoyde = (int) (hoyde1 / 1.5);
        int bredde = (int) (bredde1 / 1.5);
        Bitmap bitmapfinal = Bitmap.createScaledBitmap(bitmap, bredde,hoyde, false);
        bitmapfinal.compress(Bitmap.CompressFormat.JPEG, 80, stream);
        byte[] byte_arr = stream.toByteArray();
        try {
            stream.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        String image_str = Base64.encodeToString(byte_arr,
                Base64.DEFAULT);

        // HTTP POST

        ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("tag", login_tag));
        param.add(new BasicNameValuePair("unique_id", in
                .getStringExtra(TAG_UID)));
        param.add(new BasicNameValuePair("picture_data", image_str));

        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(param));

            Log.e("Ferdig med å laste opp", "Ferdig");
        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }

    } 
```

代码执行。第一张图片已成功上传，但当线程再次尝试运行时，它崩溃了。LogCat 输出为：

```
01-06 18:14:47.113: E/dalvikvm(5010): Out of memory: Heap Size=58531KB, Allocated=50243KB, Limit=65536KB
01-06 18:14:47.113: E/dalvikvm(5010): Extra info: Footprint=56483KB, Allowed Footprint=58531KB, Trimmed=3712KB
01-06 18:14:47.113: D/skia(5010): --- decoder->decode returned false
01-06 18:14:47.113: W/dalvikvm(5010): threadid=47: thread exiting with uncaught exception (group=0x40d782d0)
01-06 18:14:47.113: E/AndroidRuntime(5010): FATAL EXCEPTION: Thread-543
01-06 18:14:47.113: E/AndroidRuntime(5010): java.lang.OutOfMemoryError: (Heap Size=58531KB, Allocated=50244KB)
01-06 18:14:47.113: E/AndroidRuntime(5010):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
01-06 18:14:47.113: E/AndroidRuntime(5010):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:658)
01-06 18:14:47.113: E/AndroidRuntime(5010):     at 
android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:347)
01-06 18:14:47.113: E/AndroidRuntime(5010):     at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:430)
01-06 18:14:47.113: E/AndroidRuntime(5010):     at com.example.socializerfragments.PhotoUploadSelecter.run(PhotoUploadSelecter.java:96)
01-06 18:14:47.113: E/AndroidRuntime(5010):     at java.lang.Thread.run(Thread.java:864) 
```

所以一张图片很有效，不止一张，不是很多......有谁知道问题的解决方案可能是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:50:09.290

问题`BitmapFactory.decodeFile(BitmapFactory.java:347)`如 logcat 中所述。有几个解决方案。首先是捕获内存不足，请参阅此[帖子](https://stackoverflow.com/questions/6681988/bitmap-image-out-of-memory)了解更多信息。您还可以减小位图的大小。可以在[文档中找到一个很好的示例](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T16:43:21.057

您可以使用 ByteArrayInputStream(stringVariable.getBytes(charset)) InputStream is = new ByteArrayInputStream(stringVariable.getBytes(StandardCharsets.UTF_8)); 将其转换为 InputStream

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-16T04:38:36.680

```
Bitmap FixBitmap;
String ImagePath = "image_path" ;
String ConvertImage ;
byte[] byteArray ;
ByteArrayOutputStream byteArrayOutputStream ; 
```

然后你必须检查

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == PICK_FROM_FILE && resultCode == RESULT_OK && null != data)
    {

        Uri uri = data.getData();

        String[] prjection ={MediaStore.Images.Media.DATA};

        Cursor cursor = getContentResolver().query(uri,prjection,null,null,null);

        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(prjection[0]);

        ImagePath = cursor.getString(columnIndex);

        cursor.close();

        FixBitmap = BitmapFactory.decodeFile(ImagePath);

        ShowSelectedImage = (ImageView)findViewById(R.id.imageView);

        ShowSelectedImage.setImageBitmap(BitmapFactory.decodeFile(ImagePath));

    }
} 
```

这也是，请

```
@Override
        protected String doInBackground(Void... params) {

            FixBitmap = BitmapFactory.decodeFile(ImagePath);
            //FixBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.gv); // this code will upload the pic to server that in drawable place 

            byteArrayOutputStream = new ByteArrayOutputStream();
           FixBitmap.compress(Bitmap.CompressFormat.JPEG, 60, byteArrayOutputStream); //compress to 50% of original image quality
           byteArray = byteArrayOutputStream.toByteArray();

           ConvertImage = Base64.encodeToString(byteArray, Base64.DEFAULT); 
```

** 不要添加此代码

```
httpURLConnection.setRequestProperty("Content-Type", "image/jpeg"); 
```

# algorithm - set position for drawing binary tree

> ID：14184655
> 
> 赞同：2
> 
> 时间：2013-01-06T17:18:44.487
> 
> 标签：algorithm, tree, drawing, binary-tree, drawing2d

I want to drawing a binary tree with an graphical framework(Qt) like this:

```
 9
       /  \
      1    10
    /  \     \
   0    5     11
  /    /  \
 -1   2    6 
```

but I have a problem to set X and Y for every node, do you any idea to setting and fixation position ? (I have only height of every node and left-Child and right-Child)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T23:32:14.410

Given the width `canvasWidth` and the height `canvasHeight` of the canvas you can calculate position of each node.

First, let's assign two numbers to each node: the *depth* of the node and a serial *index* of the node in fully filled row. In your example, for each node we assign `(depth, index)` as

```
          (0, 1)
         /      \
     (1, 1)      (1, 2)
     /   \            \
 (2, 1)  (2, 2)      (2, 4)
 /       /     \
(3, 1)  (3, 3) (3, 4)

```

As @j_random_hacker pointed, we can find the index of a node recursively using this equation:

```
leftChildIndex = parentIndex * 2 - 1
rightChildIndex = parentIndex * 2 
```

This can be done using BFS (cost: O(n)). During this traversal let's save also information about the depth of the whole tree `treeDepth`. In our case `treeDepth=3`

Then given `canvasWidth`, `canvasHeight` and `treeDepth` as global constants, each node's position can be found like this:

```
def position(depth, index):
    x = index * canvasWidth / (2^depth + 1)
    y = depth * canvasHeight / treeDepth
    return y, x 
```

So in your case positions will be `(canvasHeight/treeDepth*y, canvasWidth*x)` where `(y,x)` for every node

```
           (0, 1/2)
         /          \
     (1, 1/3)       (1, 2/3)
     /      \            \
 (2, 1/5)   (2, 2/5)      (2, 4/5)
 /           /     \
(3, 1/9) (3, 3/9)  (3, 4/9)

```

Cost: O(n)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:43:27.783

Improve the Pavel Zaichenkov's solution,

Let the root's `index` be 1, and for the other node:

```
leftNodeIndex = parentNodeIndex * 2 - 1
rightNodeIndex = parentNodeIndex * 2 + 1 
```

And the Y would be (consider the depth start from 1):

```
Y = nodeIndex / (2 ^ depth) 
```

This algorithm makes that if a node has two childs, then the distance between the node and left-child and the distance between the node and right-child woudl be equal:

```
Y - leftChlidY = rightChlidY - Y 
```

```
           (1, 1/2)
         /          \
     (2, 1/4)       (2, 3/4)
     /      \            \
 (3, 1/8)   (3, 3/8)     (3, 7/8)
 /           /      \
(4, 1/16) (4, 5/16)  (4, 7/16)

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-05T22:00:44.987

I've written an article about this very subject. It can be found here: [http://adhavoc.com/BinaryTree.html](http://adhavoc.com/BinaryTree.html)

Essentially, you need to move every child node as left as it can possibly be placed, with the caveat that the child nodes must be left and right of the parent respectively. Then move left branches as far right as possible, with the same caveat.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T11:17:38.223

I write it in c++ using openframework([http://www.openframeworks.cc/](http://www.openframeworks.cc/)) as a graphical interface.

```
////////////////////////
void BSTree:: paint()
{
ppx=ofGetWidth()/(2+numNode());
ppy=ofGetHeight()/(2+findHeight());
draw(root,1,1);
}
 ////////////////////////
 int BSTree:: draw(TreeNode *n,int x,int y)
 {
int xr=x;  
if(n==NULL) return xr 
int lx=draw(n->l,x,y+1); 
xr+=numNode2(n->l); 
int rx=draw(n->r,xr+1,y+1);
n->draw(xr*ppx,y*ppy);
if(n->l!=NULL) ofLine(xr*ppx,y*ppy,lx*ppx,(y+1)*ppy);
if(n->r!=NULL) ofLine(xr*ppx,y*ppy,rx*ppx,(y+1)*ppy);

return xr;

 }

 ///////////////////////
 void TreeNode::draw(int x,int y)
 {
ofSetColor(255,130,200);
float radius = 25 ;
ofFill();       // draw "filled shapes"
ofCircle(x,y,radius);

ofSetHexColor(0x000000);
char xx[100] ;
sprintf(xx,"%d",data);
ofDrawBitmapString(xx, x-5,y);

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T01:45:48.560

I was looking for a way to draw binary trees in Qt and I couldn't find an example, so I made a lib to draw binary trees, here it is [https://github.com/rom1504/GenericBinaryTree](https://github.com/rom1504/GenericBinaryTree)

Your method seems right at first (that's what I did first) but If the last layer isn't full the width of the displayed tree will be too large.

# javascript - AngularJS - 创建控制器和服务的不同方式，为什么？

> ID：14184656
> 
> 赞同：19
> 
> 时间：2013-01-06T17:18:57.997
> 
> 标签：javascript, angularjs

我不断看到在 AngularJS 中创建控制器和服务的不同示例，我很困惑，谁能向我解释这两种方法之间的区别？

```
app.service('reverseService', function() {
    this.reverse = function(name) {
        return name.split("").reverse().join("");
    };
});

app.factory('reverseService', function() {
    return {
        reverse : function(name) {
            return name.split("").reverse().join("");
        }
    }
}); 
```

还有一个控制器示例：

```
function ExampleCtrl($scope) {
    $scope.data = "some data";
}

app.controller("ExampleCtrl", function($scope) {
    $scope.data = "some data";
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-06T17:24:04.667

第一个会污染[全局命名空间](https://stackoverflow.com/questions/8862665/what-does-it-mean-global-namespace-would-be-polluted)，从长远来看这不是你想要的。

```
function ExampleCtrl($scope){
    $scope.data = "some data";
} 
```

第二个将控制器范围限定为该模块实例。它使它也[可注射](http://docs.angularjs.org/guide/di)。更好的是使用数组表示法（如下所示），因为这将在缩小后继续存在。

```
app.controller("ExampleCtrl", ['$scope', function($scope){
    $scope.data = "some data";
}]); 
```

（角度）服务和工厂之间的差异似乎很小。服务包装了一个工厂，它使用[$injector.instantiate](http://docs.angularjs.org/api/AUTO.$injector#instantiate)来初始化服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T13:33:16.983

我创建控制器和指令的首选方式如下：

```
/**
* SomeCoolModule.controller.js
*/

(function(){
'use strict';

    angular.module('app.modals.SomeCoolModule').controller('SomeCoolModuleController', SomeCoolModuleController);

    AddFlowCurveModalController.$inject =
        [
            '$scope',
            '$filter',
            '$log',
        ];

    function SomeCoolModuleController($scope, $filter, $log) {
        /* controller body goes here */
    }
})(); 
```

PS：由于 IIFE，上面没有发生全局命名空间污染。

# javascript - 最好将数组存储在本地存储或许多变量中？

> ID：14184657
> 
> 赞同：7
> 
> 时间：2013-01-06T17:19:01.537
> 
> 标签：javascript, html, local-storage

举个例子，我有成千上万的学生。

所以我会有一个对象数组。

```
students = [

{ "name":"mickey", "id","1" },
{ "name":"donald", "id","2" }
{ "name":"goofy", "id","3" }
...

]; 
```

我目前将其保存到本地存储中的方式是：

```
localStorage.setItem('students', JSON.stringify(students)); 
```

我从本地存储中检索它的方式是：

```
var data = localStorage.getItem('students');
students = JSON.parse(data); 
```

现在，每当我对单个学生进行更改时，我必须将所有学生保存到 localStorage。

```
students[0].name = "newname";
localStorage.setItem('students', JSON.stringify(students)); 
```

我想知道它是否会更好，而不是保留一个数组，也许有数千个变量

```
localStorage.setItem('student1', JSON.stringify(students[0]));
localStorage.setItem('student2', JSON.stringify(students[1]));
localStorage.setItem('student3', JSON.stringify(students[2]));
... 
```

这样一个学生可以单独得救而不用保存其余部分？

我可能会有很多“学生”……成千上万。那么哪种方式更好，数组还是localstorage中的许多变量？

注意：我知道我可能应该使用 IndexedDB，但我现在需要使用 LocalStorage。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:34:16.100

对于您的特定情况，将学生存储在一个 localStorage 键中并使用 JSON 解析来重构您的对象，添加到它，然后再次对其进行字符串化，这可能比每个学生将其拆分为不同的键更容易。

如果您没有太多的数据层，以至于您**确实**需要像 IndexedDB 这样的真正本地数据库，那么单个键和 JSON 字符串值可能适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:22:04.337

本地存储的大小有限制，旧版浏览器不支持。

出于以下几个原因，最好存储在数组中：

*   可以使用循环来处理它们
*   不需要 JSON
*   总是可以增长的

# linux - 查看linux中已经运行的进程的输出

> ID：14184662
> 
> 赞同：10
> 
> 时间：2013-01-06T17:20:07.260
> 
> 标签：linux, process, ps

我有一个在后台运行的进程（sh 脚本），我想知道是否可以查看该进程的输出而不必中断它。

该过程由某些应用程序运行，否则我会将其附加到屏幕以供以后查看。可能需要一个小时才能完成，我想确保它正常运行且没有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:59:52.717

已经有一个程序在 linux 中使用 ptrace(2) 来执行此操作，**retty**：

[http://pasky.or.cz/dev/retty/](http://pasky.or.cz/dev/retty/)

如果您正在运行的程序已经附加到 tty，它可以工作，我不知道如果您在后台运行程序是否可以工作。

至少它可能会给出一些好的提示。:)

您可能可以使用 检索程序中的退出代码`ptrace(2)`，否则只需使用 附加到进程`gdb -p <pid>`，它会在程序终止时打印。

您还可以使用 gdb 操作文件描述符：

```
(gdb) p close(1)
$1 = 0
(gdb) p creat("/tmp/stdout", 0600)
$2 = 1 
```

[http://etbe.coker.com.au/2008/02/27/redirecting-output-from-a-running-process/](http://etbe.coker.com.au/2008/02/27/redirecting-output-from-a-running-process/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:56:09.387

您可以尝试加入`/proc/[pid]/fd/[012]`三重奏，但这可能行不通。

我想到的下一个想法是`strace -p [pid]`，但你会得到“prittified”输出。可能的解决方案是通过编写一个小程序`ptrace(2)`来连接自己`write(2)`并在某处写入数据。它**会起作用**，但不会在几秒钟内完成，特别是如果您不习惯 C 编程。

不幸的是，我想不出一个程序可以精确地完成你想要的，这就是为什么我给你一个关于如何自己编写它的提示。祝你好运！

# c++ - 函数的多态签名作为模板参数（使用 lambdas）

> ID：14184663
> 
> 赞同：4
> 
> 时间：2013-01-06T17:20:07.060
> 
> 标签：c++, templates, c++11, lambda, polymorphism

我努力了几个小时，但没能成功。

我有一个模板类自旋锁：

```
template<typename T> class spinlock {
  // ...
  volatile T *shared_memory;
}; 
```

我正在尝试创建这样的东西：

```
 // inside spinlock class
  template<typename F, typename... Ars>
  std::result_of(F(Args...))
  exec(F fun, Args&&... args) {
    // locks the memory and then executes fun(args...)
  }; 
```

但我正在尝试使用多态函数，以便我可以做到这一点：

```
spinlock<int> spin;

int a = spin.exec([]() {
  return 10;
});

int b = spin.exec([](int x) {
  return x;
}, 10); // argument here, passed as x

// If the signature matches the given arguments to exec() plus
// the shared variable, call it
int c = spin.exec([](volatile int &shared) {
  return shared;
}); // no extra arguments, shared becomes the
    // variable inside the spinlock class, I need to make
    // a function call that matches this as well

// Same thing, matching the signature
int d = spin.exec([](volatile int &shared, int x) {
  return shared + x;
}, 10); // extra argument, passed as x... should match too

// Here, there would be an error
int d = spin.exec([](volatile int &shared, int x) {
  return shared + x;
}); // since no extra argument was given 
```

基本上，我正在尝试创建一个`exec`接受`F(Args...)`或`F(volatile T &, Args...)`作为参数的函数。

但我无法自动检测类型。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:37:45.263

首先，这个签名不会编译：

```
// inside spinlock class
template<typename F, typename... Ars>
std::result_of(F(Args...))
exec(F fun, Args&&... args) {
  // locks the memory and then executes fun(args...)
}; 
```

返回类型必须是

```
typename std::result_of<F(Args...)>::type 
```

如果您的编译器实现[了 N3436](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3436.html)，那么当不是有效表达式时，此函数将不参与重载解析`fun(args...)`，但这在 C++11 中不是必需的，并且许多编译器尚未实现。您将需要实施自己的 SFINAE 检查以防止在无效`result_of`时给出错误，或者在没有的情况下重写它`fun(args...)``result_of`

```
template<typename F, typename... Args>
auto
exec(F fun, Args&&... args) -> decltype(fun(std::forward<Args>(args)...))
{
  // locks the memory and then executes fun(args...)
} 
```

然后你可以为需要传入额外参数的函数重载它：

```
template<typename F, typename... Args>
auto
exec(F fun, Args&&... args) -> decltype(fun(*this->shared_memory, std::forward<Args>(args)...))
{
  // locks the memory and then executes fun(*shared_memory, args...)
} 
```

当`fun(std::forward<Args>(args)...)`无效时，第一个重载将不参与重载决议。当`fun(*this->shared_memory, std::forward<Args>(args)...)`无效时，第二个重载将不参与重载决议。如果两者都无效，则调用将是格式错误的，如果两者都有效，则调用将是模棱两可的。

# c++ - 如何使用协议缓冲区创建动态消息？

> ID：14184677
> 
> 赞同：2
> 
> 时间：2013-01-06T17:21:24.947
> 
> 标签：c++, protocol-buffers

假设我们想创建我们的消息而不使用任何预先存在的 .proto 文件并从它们编译出 cpp/cxx/h 文件。我们希望将 protobuf 严格用作库。例如，我们得到了（以某些只有我们知道的格式）消息描述：一条名为`MyMessage`has to have`MyIntFiels`和 optional的消息`MyStringFiels`。如何创建这样的消息？例如用简单的数据填充它保存到`.bin`该二进制文件并从中读取其内容？

我查看了[dynamic_message.h 帮助描述](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.dynamic_message)和 DescriptorPool 等等，但没有看到如何在消息中添加/删除字段，也没有办法将描述的动态消息添加到 DescriptorPool。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:45:22.023

简短的回答：不能那样使用。

Protobuf的[概述页面说：](https://developers.google.com/protocol-buffers/docs/overview)

> XML 在某种程度上也是自描述的。仅当您具有消息定义（.proto 文件）时，协议缓冲区才有意义。

这意味着 Protobuf 的全部意义在于抛弃自我描述性以提高解析速度 ==> 创建自我描述消息并不是它的目的。

考虑使用 XML 或 JSON 或任何其他序列化格式。如果需要保护，您可以使用对称加密和/或 lzip 压缩。

# php - 如何在php中按字母顺序对关联数组进行排序？

> ID：14184678
> 
> 赞同：0
> 
> 时间：2013-01-06T17:21:25.553
> 
> 标签：php, sql, sorting, associative-array, alphabetical

我正在从数据库中获取我的数组值。它只是用户的名字。我在检索它们时打印它们，我想按它们名称的字母顺序打印它们（升序）。我怎样才能做到这一点 ？

```
foreach($common_follows as $row) // $common_follows contains the IDs of users
            {

        $names=$obj2->get_user_name($row); //this function gets the name from user ID

                    while   ($rows = mysql_fetch_assoc($names)) // For getting the name of the person being followed
                    {
                sort($rows['name']); //Not seems to sort
                        echo '<img src="https://graph.facebook.com/'.$rows['user_id'].'/picture?type=normal" width="65" height="20" id="fbthumb">';
                        echo $rows['name']."<br>";
                      $count_common++;
                    }
            } 
```

该排序函数似乎不起作用，因为在每次循环迭代中都会返回一个名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:28:22.470

您可以使用键对 PHP 数组进行排序`ksort`。如果要按值排序，请使用`asort`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:28:27.257

如果您想将排序移动到您的 MySQL，您可以这样做：

```
SELECT *
FROM users
ORDER BY name ASC 
```

这只是您需要匹配表/列名称的示例。

使用您的示例代码，您可以制作`$common_follows`一个逗号分隔的字符串，即`1,2,3...`并将其传递到查询中，而不是循环并进行多个 MySQL 查询。这将如下所示：

```
SELECT *
FROM users
WHERE id IN (1,2,3) // <-- comma separated string
ORDER BY name ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:34:36.373

```
<?php

 $fruits = array("lemon", "orange", "banana", "apple");
  sort($fruits);
 foreach ($fruits as $key => $val) {
echo "fruits[" . $key . "] = " . $val . "\n";
}

  ?> 
```

# data-access-layer - Web2py：创建了新数据库，但未创建表：我错过了什么？

> ID：14184680
> 
> 赞同：0
> 
> 时间：2013-01-06T17:21:35.707
> 
> 标签：data-access-layer, web2py, postgresql-9.1

我最近切换到 Postgres，一切正常。
我不得不进行一些重大更改，因此删除了旧数据库并创建了一个全新的数据库。

我访问了一个在表中插入新记录的函数->“ **newsMaster** ”
但是在日志中我看到了这个：

```
[error] Trying to insert title : xxxxxxxxxxxxx                                                
[error] oops: relation "newsmaster" does not exist                                            
[error] LINE 1: INSERT INTO NewsMaster(name,favorite...                                       
[error]                     ^                                                                 
[error]                                                                                       
[error] Trying to insert title : 'xxxxxxxxxxxxxxxx                                            
[error] oops: current transaction is aborted, commands ignored until end of transaction block 
```

我确定可以访问，因为我可以看到数据库上的连接。

当我从 sqllite 切换到 Postgres 时，我不必做任何不同的事情，因为 DAL 只是从头开始创建表。
我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:38:14.543

删除（或移动）“数据库”目录中的所有文件。刷新您的页面。

如果这不起作用，您可能需要更仔细地查看您的模型并在此处描述它们。Postgres 非常注重关系等，而 SQLite 则根本不在乎。

# python - 每分钟重新加载一次python文件

> ID：14184682
> 
> 赞同：0
> 
> 时间：2013-01-06T17:21:47.740
> 
> 标签：python

我有一个 IRC 机器人，我正在解析数据，但要让它刷新，我必须重新加载插件。我注意到，一旦我更改文件上的某些内容，或者只是打开并再次保存它，一旦重新加载它就可以工作正确的信息。那是重新加载插件的文件：

**重载.py**

```
import collections
import glob
import os
import re
import sys
import traceback

if 'mtimes' not in globals():
    mtimes = {}

if 'lastfiles' not in globals():
    lastfiles = set()

def make_signature(f):
    return f.func_code.co_filename, f.func_name, f.func_code.co_firstlineno

def format_plug(plug, kind='', lpad=0, width=40):
    out = ' ' * lpad + '%s:%s:%s' % make_signature(plug[0])
    if kind == 'command':
        out += ' ' * (50 - len(out)) + plug[1]['name']

    if kind == 'event':
        out += ' ' * (50 - len(out)) + ', '.join(plug[1]['events'])

    if kind == 'regex':
        out += ' ' * (50 - len(out)) + plug[1]['regex']

    return out

def reload(init=False):
    changed = False

    if init:
        bot.plugs = collections.defaultdict(list)
        bot.threads = {}

    core_fileset = set(glob.glob(os.path.join("core", "*.py")))

    for filename in core_fileset:
        mtime = os.stat(filename).st_mtime
        if mtime != mtimes.get(filename):
            mtimes[filename] = mtime

            changed = True

            try:
                eval(compile(open(filename, 'U').read(), filename, 'exec'),
                        globals())
            except Exception:
                traceback.print_exc()
                if init:        # stop if there's an error (syntax?) in a core
                    sys.exit()  # script on startup
                continue

            if filename == os.path.join('core', 'reload.py'):
                reload(init=init)
                return

    fileset = set(glob.glob(os.path.join('plugins', '*.py')))

    # remove deleted/moved plugins
    for name, data in bot.plugs.iteritems():
        bot.plugs[name] = [x for x in data if x[0]._filename in fileset]

    for filename in list(mtimes):
        if filename not in fileset and filename not in core_fileset:
            mtimes.pop(filename)

    for func, handler in list(bot.threads.iteritems()):
        if func._filename not in fileset:
            handler.stop()
            del bot.threads[func]

    # compile new plugins
    for filename in fileset:
        mtime = os.stat(filename).st_mtime
        if mtime != mtimes.get(filename):
            mtimes[filename] = mtime

            changed = True

            try:
                code = compile(open(filename, 'U').read(), filename, 'exec')
                namespace = {}
                eval(code, namespace)
            except Exception:
                traceback.print_exc()
                continue

            # remove plugins already loaded from this filename
            for name, data in bot.plugs.iteritems():
                bot.plugs[name] = [x for x in data
                                   if x[0]._filename != filename]

            for func, handler in list(bot.threads.iteritems()):
                if func._filename == filename:
                    handler.stop()
                    del bot.threads[func]

            for obj in namespace.itervalues():
                if hasattr(obj, '_hook'):  # check for magic
                    if obj._thread:
                        bot.threads[obj] = Handler(obj)

                    for type, data in obj._hook:
                        bot.plugs[type] += [data]

                        if not init:
                            print '### new plugin (type: %s) loaded:' % \
                                    type, format_plug(data)

    if changed:
        bot.commands = {}
        for plug in bot.plugs['command']:
            name = plug[1]['name'].lower()
            if not re.match(r'^\w+$', name):
                print '### ERROR: invalid command name "%s" (%s)' % (name,
                  format_plug(plug))
                continue
            if name in bot.commands:
                print "### ERROR: command '%s' already registered (%s, %s)" % \
                    (name, format_plug(bot.commands[name]),
                     format_plug(plug))
                continue
            bot.commands[name] = plug

        bot.events = collections.defaultdict(list)
        for func, args in bot.plugs['event']:
            for event in args['events']:
                bot.events[event].append((func, args))

    if init:
        print '  plugin listing:'

        if bot.commands:
            # hack to make commands with multiple aliases
            # print nicely

            print '    command:'
            commands = collections.defaultdict(list)

            for name, (func, args) in bot.commands.iteritems():
                commands[make_signature(func)].append(name)

            for sig, names in sorted(commands.iteritems()):
                names.sort(key=lambda x: (-len(x), x))  # long names first
                out = ' ' * 6 + '%s:%s:%s' % sig
                out += ' ' * (50 - len(out)) + ', '.join(names)
                print out

        for kind, plugs in sorted(bot.plugs.iteritems()):
            if kind == 'command':
                continue
            print '    %s:' % kind
            for plug in plugs:
                print format_plug(plug, kind=kind, lpad=6)
        print 
```

假设我想每分钟重新加载一次的插件名为**flightinfo.py**。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:29:23.813

重要的代码看起来像在这里：

```
mtime = os.stat(filename).st_mtime
if mtime != mtimes.get(filename):
    mtimes[filename] = mtime

    changed = True

    try:
        code = compile(open(filename, 'U').read(), filename, 'exec')
        namespace = {}
        eval(code, namespace)
    except Exception:
        traceback.print_exc()
        continue 
```

如果文件的修改时间发生了变化（例如，当您打开并保存它时），则调用编译/执行功能。

有几种方法可以解决此问题，具体取决于您的情况：

1.  定期更新文件的 mtime。例如，在 linux 上，您可能每分钟运行一次 cron 作业以`touch /path/to/flightsinfo.py`.
2.  在**reload.py 中**重构功能以重新加载到一个函数并从你的 python 中调用它。

    ```
    def reload(filename):
         try:
             code = compile(open(filename, 'U').read(), filename, 'exec')
             namespace = {}
             eval(code, namespace)
          ... 
    ```

# c# - 如何处理中继器中的空值？

> ID：14184684
> 
> 赞同：0
> 
> 时间：2013-01-06T17:21:56.787
> 
> 标签：c#, asp.net, repeater, dbnull

我的页面有问题，因为一行中的某些列值是 NULL，如果它不是 NULL，我怎样才能只显示该值？

```
 <ItemTemplate>
                <tr>
                    <td><%# Eval("some_db_column") %></td>
                </tr>
 </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:27:35.777

尝试这个：

```
<%#Eval("some_db_column") ?? "" %> 
```

[?? 运算符（C# 参考）](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

如果这不起作用，您还可以在代码隐藏中调用一个方法：

```
protected string GetValue(object obj)
{
    if (obj == null || DBNull.Value.Equals(obj))
    {
       return String.Empty;
    }

    return obj.ToString();
} 
```

aspx：

```
<%# GetValue(Eval("some_db_column")) %> 
```

# state-machine - 在 Alloy 中编写有限状态机规范

> ID：14184685
> 
> 赞同：2
> 
> 时间：2013-01-06T17:21:58.900
> 
> 标签：state-machine, alloy

我是合金新手。我正在尝试制定允许的模拟电话线规格。这是我的 FSM 图。 ![FSM visio 图](../Images/aace5ca728cda70b5f000a6654a82391.png)

我编写了一个示例代码来说明状态转换。我的转换表是事实，但是输出乘数是合金语法中的一个问题。我无法运行此代码。

你会说我有什么问题吗。有什么建议吗？

```
module state
sig Input{}
abstract sig State {
transition:  Input-> State-> Output}
one sig  NULL extends State {}
one sig CALL_RECEIVED extends State {}
fact xTable {
NULL->one setup_ind :Input->CALL_RECEIVED->one alerting_req:Output in transition
CALL_RECEIVED->one disconnect_ind:Input->NULL->one clear: Output in transition
}
pred show {}
run show 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T22:49:09.787

问题是您在事实中使用了虚构的语法`xTable`。我建议您查看[http://alloy.mit.edu/alloy/documentation.html](http://alloy.mit.edu/alloy/documentation.html)并首先学习 Alloy 基础知识。

# c# - c# api命名PostMessage

> ID：14184686
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:22:03.650
> 
> 标签：c#, input, postmessage, keystrokes

我正在尝试编写一个应用程序来处理并向他发送击键 ctrl-a 然后 ctrl-c 我将在剪贴板中包含文本内容。

我读到正确的 api 是`PostMessage``Sendmeesage`。使用 api 我成功写入程序（例如记事本）。但我没有成功发送击键。

这是我的代码

```
 public const uint WM_KEYDOWN = 0x0100;
    public const uint WM_KEYUP = 0x0101;
    const int CTRL = 0x11;
    const int A_Key = 0x41;
    const int C_Key = 0x43;

    static void Main(string[] args)
    {
        IntPtr hWnd = FindWindow(null, "Microsoft Word ");
        hWnd = FindWindowEx(hWnd, null, "Edit", null);
        //PostMessage(hWnd, WM_GETTEXT, 0x11, 0);
        Process[] processes = Process.GetProcessesByName("winword");
        foreach (Process p in processes)
        {

            PostMessage((IntPtr)hWnd, WM_KEYDOWN, (IntPtr)CTRL, 1);
            PostMessage((IntPtr)hWnd, WM_KEYDOWN, (IntPtr)A_Key, 1);
            PostMessage((IntPtr)hWnd, WM_KEYUP, (IntPtr)A_Key, 1);
            PostMessage((IntPtr)hWnd, WM_KEYUP, (IntPtr)CTRL, 1);

                }
            } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:49:37.200

也许，您使用了错误的 API 来满足正确的需求。您可能会观察到消息的顺序与您编写的一样，但是按该顺序发布消息可能不会像您想象的那样。如果您决心以这种方式解决，请阅读<< [this post](https://stackoverflow.com/questions/11384669/sending-right-altc-with-postmessage) >>并查看短暂的延迟是否有帮助。但是，我建议采用更好的方法来使用旨在服务于类似场景的 SendInput() 函数。查看<<[此链接](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)>>和<<[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)>>了解更多信息。

# asp.net-web-api - ASP.NET Web API 中的回调方法

> ID：14184690
> 
> 赞同：9
> 
> 时间：2013-01-06T17:22:14.487
> 
> 标签：asp.net-web-api

我有一个 ASP.NET Web API 服务器，它必须与不同平台上的不同应用程序进行通信。现在我想创建一个类似于回调的方法：客户端应用程序订阅它并等待服务器触发消息。

**示例：** 许多用户都在等待新产品上架——他们订阅了这个“事件”。当产品到达商店时 - 每个客户都会收到一条消息，在某些情况下必须对其进行处理。

1.  用户发送请求“订阅”
2.  服务器收到请求“产品可用！”
3.  服务器向每个用户发送一条包含产品详细信息的消息。
4.  用户的应用程序处理消息

我试图在 ASP.NET Web API 中找到一些关于回调或双工的信息，但有一个建议——最好使用 WCF 来实现这种方法。

### 解决方案

*   在每个客户端应用程序中创建类似计时器的东西，每 N 秒发送一个请求“产品可用吗？” 直到得到“假”。当响应为真时 - 发送消息“获取产品详细信息”。这会导致大量流量，如果有很多客户使用这些计时器 - 这将是一件坏事，不是吗？
*   创建一个小型回调服务器（可能是 WCF）。但在这种情况下，该服务器与不同平台上的应用程序之间的通信会出现很多问题。
*   也许在 ASP.NET Web API 中有一些我错过的解决方案。

如果您对我如何解决这个问题有一些想法，请给我一个建议。

感谢帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T17:37:57.200

看起来您想要来自服务器的推送通知 - 在这种情况下，可以通过将 SignalR 与 Web API 结合来实现。

布拉德威尔逊有一个很好的例子：

1.  代码在这里 - [https://github.com/bradwilson/WebstackOfLove](https://github.com/bradwilson/WebstackOfLove)

2.  NDC 奥斯陆谈话解释了这一切 - [http://vimeo.com/43603472](http://vimeo.com/43603472)

简而言之，每当您向 Web API 添加新项目时，您都可以通知所有已连接（订阅）的客户端：

```
public void PostNewItem(ToDoItem item)
        {
            lock (db)
            {
                // Add item to the database
                db.Add(item);

                // Notify the connected clients
                Hub.Clients.processItem(item);
            }
        } 
```

SignalR 将调用`processItem`客户端上的函数。

或者，您可能想研究 JavaScript SSE 和 Web API `PushStreamContent`，但它们的级别要低得多，而且 SignalR 为您抽象了很多此类东西，因此处理起来可能更复杂。

我在这里写了关于这种方法的博客[http://www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js/](http://www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js/)

# objective-c - 自动合成的属性 'delegate' 将使用合成的实例变量 '_delegate'，而不是现有的实例变量 'delegate'

> ID：14184691
> 
> 赞同：18
> 
> 时间：2013-01-06T17:22:18.300
> 
> 标签：objective-c

我正在按照[此处](http://www.hardcodedstudios.com/home/ryan-newsome/simpledelegatetutorialforiosdevelopment)的指南创建自定义委托。它运行良好，但我在 xcode 中收到以下警告

> DetailViewController.m:23:1：自动合成的属性“delegate”将使用合成的实例变量“_delegate”，而不是现有的实例变量“delegate”

谁能建议如何摆脱警告

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-06T17:28:53.323

处理这种情况最惯用的方法就是删除您的`delegate`ivar 声明。如果您使用的是`delegate`ivar，则应使用隐式 ivar `_delegate`。

**为什么这行得通？**

从[Xcode 4.4 (LLVM Compiler 4.0)开始，](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/)*如果`@synthesize`指令没有显式用于该属性*，则实例变量和访问器方法会自动为该属性合成。正如[Apple 关于封装的文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)所述

> 默认情况下，编译器会自动为您合成 [...] 访问器方法，因此您无需执行任何操作，只需在类接口中使用 @property 声明属性。

用于属性的 ivar（由自动合成的属性访问器方法获取和设置）被命名`_<propertyName>`（即 ivar 的名称是带有下划线前缀的属性名称）。

在这种情况下，属性名称是`delegate`，所以使用的 ivar 是`_delegate`。这已经在您的代码中发生了。当您调用`-delegate`and时，将获取并设置 `-setDelegate:`此 ivar 。`_delegate`

但是，您还声明了自己的 ivar `delegate`。当然，`delegate`实例方法不会获取和设置您显式声明的 ivar ( ) `-delegate`，因为正在获取和设置`-setDelegate:`自动合成的 ivar ( )。`_delegate`但是，（几乎总是——如果不是，您的代码是模棱两可的）您的意图是让您的 ivar`delegate`成为您的属性的访问者将获取和设置的东西。幸运的是，编译器足够聪明，可以注意到您所做的事情，这就是它发出此警告的原因：

> 警告：自动合成的属性“ `delegate`”将使用合成的实例变量“ `_delegate`”，而不是现有的实例变量“ `delegate`”[ `-Wobjc-autosynthesis-property-ivar-name-match`]

它告诉您，您的属性`delegate`将使用自动合成`_delegate`的 ivar，而不是您明确声明的 ivar `delegate`，.

因此，如果您只是删除您的`delegate`ivar，编译器将停止发出此警告。如果您`delegate`直接使用 ivar（而不是通过属性），请开始使用`_delegate`。

* * *

此选项的一个细微变化是显式声明与属性`_delegate`的自动综合`delegate`正在创建的相同 ivar ( )。您可以通过更换来做到这一点

```
@interface TheClass : TheSuperclass
{
    //...
    id<TheDelegateProtocol> delegate
    //...
}
@end 
```

和

```
@interface TheClass : TheSuperclass
{
    //...
    id<TheDelegateProtocol> _delegate
    //...
}
@end 
```

这是有效的，因为属性的自动合成将始终使用一个 ivar，其名称是带有下划线前缀的属性名称。如果不存在这样的 ivar，则将生成 ivar。如果它确实存在，它将被使用。

* * *

相反，如果您希望设置属性的访问器并获取您的 ivar `delegate`，则可以向您的类添加`@synthesize`指令`@implementation`以告诉编译器这样做：

```
@implementation TheClass
//...
@synthesize delegate = delegate;
//...
@end 
```

该行`@synthesize delegate = delegate;`告诉编译器`delegate`在属性`delegate`（赋值的左侧）的访问器中使用 ivar（赋值的右侧）。

您也可以省略作业的右侧`@synthesize`，只写

```
@implementation TheClass
//...
@synthesize delegate;
//...
@end 
```

这是有效的，因为具有手册的属性`@synthesize`未明确指定要由其访问器（例如`@synthesize delegate;`）获取和设置的 ivar 将使用与属性同名的 ivar，而不是以下划线前缀。这与向后兼容性有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:51:10.827

还有另一种方法，这个方法对我有用：

```
@property (nonatomic, unsafe_unretained) id <MyDelegate> delegate; 
```

然后，您可以将其添加到实现中而不会出错：

```
@synthesize delegate; 
```

另外：这是符合 ARC 的。

# c# - 如何在 C# 控制台应用程序的字符串中插入制表符？

> ID：14184693
> 
> 赞同：21
> 
> 时间：2013-01-06T17:22:28.000
> 
> 标签：c#, .net, tabs, console, export-to-excel

此控制台应用程序会将 .txt 文件写入光盘。

用户希望将这些 .txt 文件导入 Excel 以使其格式正确，因此我计划使用制表符。

我一直在胡说八道“ *Some string* **/t** *some other string* **/t/t** *some other string* ”。没有 Environment.Tab 就像有 Environment.NewLine。

如何获得制表符而不是 /t 进入我的字符串？

我敢肯定有办法，而且它可能很明显，以至于我不得不整天称自己昏倒了。

（我也对其他解决方案持开放态度。我可能不得不使用 | 或其他一些分隔符/字符。）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-06T17:25:23.303

字符串中的制表符通常是写入`\t`的，而不是`/t`. 你是否正确地转义了你的字符串？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T17:26:54.437

如果目的是创建最终将导入 int excel 的文本文件，为什么不使用逗号分隔值。更多信息 [http://en.wikipedia.org/wiki/Comma-separated_values](http://en.wikipedia.org/wiki/Comma-separated_values)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T17:33:38.793

从技术上讲，.NET 中有制表符常量。它位于 Microsoft.VisualBasic.dll 中。

```
var tab = Microsoft.VisualBasic.Constants.vbTab; 
```

但是没有理由使用 vbTab，你可以使用 \t 来获得相同的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-06T17:34:21.460

如果你真的对这个问题感到厌恶`\t`，为什么不写一个简单的实用程序类

```
public static class MyUtility
{
    public static string Tab
    {
        get{return "\t";}
    }
} 
```

现在您可以在代码中使用来构建制表符分隔的字符串......

```
string test = "MyFirstString" + MyUtility.Tab + "MySecondString" + MyUtility.Tab ....... 
```

但是，再次，**为什么？**，没有理由不使用预定义的[标准转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

# parsing - 秒差距和用户定义的状态

> ID：14184694
> 
> 赞同：2
> 
> 时间：2013-01-06T17:22:32.027
> 
> 标签：parsing, haskell, parsec

我正在尝试在haskell中实现js解析器。但我坚持使用自动分号插入。我创建了[测试项目](https://github.com/zaretskysa/Jazzist/blob/semicolon/lab/ParserUserState/ParserUserState.hs)来解决问题，但我不知道如何解决问题。

在我的测试项目程序中是一个表达式列表（一元或二元）：

```
data Program = Program [Expression]

data Expression
    = UnaryExpression Number
    | PlusExpression Number Number 
```

输入流是令牌列表：

```
data Token
    = SemicolonToken
    | NumberToken Number
    | PlusToken 
```

我想解析这样的输入：
`1;`- 一元表达式
`1 + 2;`- 二进制表达式
`1; 2 + 3;`- 两个表达式（一元和二进制）
`1 2 + 3;`- 与之前的输入相同，但缺少第一个分号。因此解析器使用标记 1，但任何语法生成都不允许标记 2（下一个预期标记是分号或加号）。自动分号插入规则表示，在这种情况下，分号会自动插入到标记 2 之前。

那么，实现这种解析器行为的最优雅的方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:41:23.623

你有

```
expression = try unaryExpression <|> plusExpression 
```

但这不起作用，因为 a`UnaryExpression`是 a 的前缀`PlusExpression`。因此对于

```
input2 = [NumberToken Number1, PlusToken, NumberToken Number1, SemicolonToken] 
```

解析器愉快地解析第一个`NumberToken`并自动添加分号，因为下一个标记是 a`PlusToken`而不是 a `SemicolonToken`。然后它尝试解析下一个`Expression`，但下一个是 a `PlusToken`，`Expression`不能从那个开始。

更改尝试解析器的顺序，

```
expression = try plusExpression <|> unaryExpression 
```

并且它会首先尝试解析 a `PlusExpression`，并且只有在失败时才使用较短的解析 a `UnaryExpression`。

# c# - 如何在c#中将图像旋转x度？

> ID：14184700
> 
> 赞同：14
> 
> 时间：2013-01-06T17:23:10.407
> 
> 标签：c#, image, graphics, drawing

我已经进行了一些搜索，但找不到任何功能可以做我想做的事情。

我有一个带有文本的扫描文档的图像文件，但该文档旋转了一些度数，所以我想旋转它，以便文本彼此内联。

在一个完美的世界中，它应该是一个自动执行此操作的功能，但我找不到任何东西，我知道要让它自动工作，它需要对图像进行一些分析，我认为这是一件大事。

但是后来我做了一个工具来手动旋转网站上的图像，但现在我需要一个函数来将旋转保存到图像文件中。

这似乎是一些不同的方法，但我没有测试过我想做的事情。

我发现几乎像我想要的那样工作的功能是：

```
public static Bitmap RotateImg(Bitmap bmp, float angle, Color bkColor) {
int w = bmp.Width;
int h = bmp.Height;
PixelFormat pf = default(PixelFormat);
if (bkColor == Color.Transparent)
{
    pf = PixelFormat.Format32bppArgb;
}
else
{
    pf = bmp.PixelFormat;
}

Bitmap tempImg = new Bitmap(w, h, pf);
Graphics g = Graphics.FromImage(tempImg);
g.Clear(bkColor);
g.DrawImageUnscaled(bmp, 1, 1);
g.Dispose();

GraphicsPath path = new GraphicsPath();
path.AddRectangle(new RectangleF(0f, 0f, w, h));
Matrix mtrx = new Matrix();
//Using System.Drawing.Drawing2D.Matrix class 
mtrx.Rotate(angle);
RectangleF rct = path.GetBounds(mtrx);
Bitmap newImg = new Bitmap(Convert.ToInt32(rct.Width), Convert.ToInt32(rct.Height), pf);
g = Graphics.FromImage(newImg);
g.Clear(bkColor);
g.TranslateTransform(-rct.X, -rct.Y);
g.RotateTransform(angle);
g.InterpolationMode = InterpolationMode.HighQualityBilinear;
g.DrawImageUnscaled(tempImg, 0, 0);
g.Dispose();
tempImg.Dispose();
return newImg; } 
```

但这不会改变图像文件的高度和宽度，因此图像文件的大小相同，但图像“对象”已被缩放和旋转。

知道我该怎么做吗？

**答案** 我在这里找到了适用于我的图像的解决方案，该解决方案的分辨率为[300](https://stackoverflow.com/questions/4320531/rotating-an-image-modifies-the-resolution-and-clarity/4320581#4320581)。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-06T17:50:15.523

如果我正确理解了您的问题，那么您基本上想计算出图像旋转后的新尺寸，以及如何将旋转后的图像定位在其新位图中。

![在此处输入图像描述](../Images/636811fc63e7977006fb2944f8f1acb2.png)

该图希望有助于明确解决方案。下面是一段伪代码：

```
sinVal = abs(sin(angle))
cosVal = abs(cos(angle))
newImgWidth = sinVal * oldImgHeight + cosVal * oldImgWidth
newImgHeight = sinVal * oldImgWidth + cosVal * oldImgHeight
originX = 0
originY = sinVal * oldImgWidth 
```

您想从 newImgWidth 和 newImgHeight 制作新图像，然后围绕原点（originX，originY）执行旋转，然后将图像渲染到该点。如果角度（以度为单位）不在 -90 和 0 度之间（如图所示），这将翻倒。如果它在 0 到 90 度之间，那么您只需更改原点：

```
originX = sinVal * oldImgHeight
originY = 0 
```

如果它在 90 度到 270 度（-90 度）的范围内，那么它有点小技巧（参见下面的示例代码）。

您的代码重新编写（经过简短测试） - 它有点狡猾但似乎有效：

```
public static Bitmap RotateImg(Bitmap bmp, float angle, Color bkColor)
{
    angle = angle % 360;
    if (angle > 180)
        angle -= 360;

    System.Drawing.Imaging.PixelFormat pf = default(System.Drawing.Imaging.PixelFormat);
    if (bkColor == Color.Transparent)
    {
        pf = System.Drawing.Imaging.PixelFormat.Format32bppArgb;
    }
    else
    {
        pf = bmp.PixelFormat;
    }

    float sin = (float)Math.Abs(Math.Sin(angle * Math.PI / 180.0)); // this function takes radians
    float cos = (float)Math.Abs(Math.Cos(angle * Math.PI / 180.0)); // this one too
    float newImgWidth = sin * bmp.Height + cos * bmp.Width;
    float newImgHeight = sin * bmp.Width + cos * bmp.Height;
    float originX = 0f;
    float originY = 0f;

    if (angle > 0)
    {
        if (angle <= 90)
            originX = sin * bmp.Height;
        else
        {
            originX = newImgWidth;
            originY = newImgHeight - sin * bmp.Width;
        }
    }
    else
    {
        if (angle >= -90)
        originY = sin * bmp.Width;
        else
        {
            originX = newImgWidth - sin * bmp.Height;
            originY = newImgHeight;
        }
    }

    Bitmap newImg = new Bitmap((int)newImgWidth, (int)newImgHeight, pf);
    Graphics g = Graphics.FromImage(newImg);
    g.Clear(bkColor);
    g.TranslateTransform(originX, originY); // offset the origin to our calculated values
    g.RotateTransform(angle); // set up rotate
    g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBilinear;
    g.DrawImageUnscaled(bmp, 0, 0); // draw the image at 0, 0
    g.Dispose();

    return newImg;
} 
```

注意三角函数的度数到弧度的转换（180 度 == Pi 弧度）

编辑：大问题是负罪值，我在计算原点 x/y 时对宽度/高度感到困惑 - 现在应该可以正常工作（经过测试）

编辑：修改代码以处理任何角度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-18T00:58:43.307

这严格来说是对上面 VisualMelon 的好答案的评论，但我不允许添加评论......

代码中有两个小错误

a) 模数后的第一次检查应该一分为二，或者改为例如

```
if (180<Math.Abs(angle)) angle -= 360*Math.Sign(angle); 
```

否则 -360 和 -180 之间的角度将失败，因为只处理 +180 到 +360

b) 就在 newImg 分配之后，缺少分辨率分配，例如

```
newImg.SetResolution(bmp.HorizontalResolution, bmp.VerticalResolution); 
```

如果省略，如果源不是 96 dpi，图像将被缩放。

....和劈棍，尺寸和偏移量的中间计算应该保持在double，并且只减少到最后一个float

# java - Hibernate 4.1.9（最新的最终版本）报告“不支持嵌套事务”

> ID：14184703
> 
> 赞同：3
> 
> 时间：2013-01-06T17:23:37.263
> 
> 标签：java, multithreading, hibernate, asynchronous

我得到一个

```
org.hibernate.TransactionException: nested transactions not supported
at    org.hibernate.engine.transaction.spi.AbstractTransactionImpl.begin(AbstractTransactionImpl.java:152)
at org.hibernate.internal.SessionImpl.beginTransaction(SessionImpl.java:1395)
at com.mcruiseon.server.hibernate.ReadOnlyOperations.flush(ReadOnlyOperations.java:118) 
```

引发该异常的代码。我从一个无限运行的线程调用刷新，直到有数据要刷新。

```
public void flush(Object dataStore) throws DidNotSaveRequestSomeRandomError {
    Transaction txD;
    Session session;
    session = currentSession();
    // Below Line 118 
    txD = session.beginTransaction();
    txD.begin() ;
    session.saveOrUpdate(dataStore);
    try {
        txD.commit();
        while(!txD.wasCommitted()) ;
    } catch (ConstraintViolationException e) {
        txD.rollback() ;
        throw new DidNotSaveRequestSomeRandomError(dataStore, feedbackManager);
    } catch (TransactionException e) {
        txD.rollback() ;
    }  finally {
        // session.flush();
        txD = null;
        session.close();
    }
    // mySession.clear();
} 
```

编辑：我在独立线程中调用刷新，因为数据存储列表包含数据。从我所看到的情况来看，它是对刷新的同步操作调用，因此理想情况下，刷新不应该在事务完成之前返回。我希望这样是我最不希望的。由于它是一个独立的线程来完成它的工作，我只关心它刷新是一个同步操作。现在我的问题是， txD.commit 是异步操作吗？它是否在该事务有机会完成之前返回。如果是，有没有办法在事务完成之前提交“等待”？

```
 public void run() {
        Object dataStore = null;
        while (true) {
            try {
                synchronized (flushQ) {
                    if (flushQ.isEmpty())
                        flushQ.wait();
                    if (flushQ.isEmpty()) {
                        continue;
                    }
                    dataStore = flushQ.removeFirst();
                    if (dataStore == null) {
                        continue;
                    }
                }
                try {
                    flush(dataStore);
                } catch (DidNotSaveRequestSomeRandomError e) {
                    e.printStackTrace();
                    log.fatal(e);
                }
            } catch (HibernateException e) {
                e.printStackTrace();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    } 
```

编辑 2：添加`while(!txD.wasCommitted()) ;`（在上面的代码中），我仍然觉得这该死`nested transactions not supported`。事实上，由于这个异常，表也没有写入记录。与表的类型有关吗？我所有的表都有 INNODB 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T06:32:58.577

终于修复了`nested transaction not supported`错误。对代码所做的更改是

```
 if (session.getTransaction() != null
            && session.getTransaction().isActive()) {
        txD = session.getTransaction();
    } else {
        txD = session.beginTransaction();
    }

    //txD = session.beginTransaction();
    // txD.begin() ;
    session.saveOrUpdate(dataStore);
    try {
        txD.commit();
        while (!txD.wasCommitted())
            ;
    } 
```

上述代码也[归功于 Venkat](http://www.linkedin.com/groups/Migrating-Hibernate-4-facing-issue-50472.S.108439692?view=&gid=50472&type=member&item=108439692&report.success=GoCn8JKoFzjQfuTXXeQFACcQ6TbmDhSmX_Y3GuL6ruZZDxwPXBvoOtn_ssxxjxRNQUrDGjryjkiP_rU3OjcM3sasTtiYj_ZcnwROGHPwM6qUi7iSWrqofjxjjkiYDeeHWwiofsqVkuvHDxDAQB_o9Jq7kkYUMYRN5wDQ9HiK86a0rYZ1XDQWbJr976oJrYSq50S3DcQS)。我没有找到 HbTransaction，所以只使用了 getTransaction 和 beginTransaction。有效。

[由于这里](https://stackoverflow.com/questions/8105618/entitymanager-does-not-write-to-database)的建议，我还对休眠属性进行了更改。我将这些行添加到了 hibernate.properties。仅此一项并不能解决问题。但我把它留在那里。

```
hsqldb.write_delay_millis=0
shutdown=true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T17:29:09.333

在调用此方法之前，您可能已经开始了事务。

要么这应该是封闭事务的一部分，因此你不应该开始另一个；或者它不应该是封闭事务的一部分，因此您应该打开一个新会话和一个新事务，而不是使用当前会话。

# c++ - 这段代码使用 wstring 和 MultiByteToWideChar 是否安全？

> ID：14184709
> 
> 赞同：3
> 
> 时间：2013-01-06T17:24:24.317
> 
> 标签：c++, winapi

使用`std::wstring`我的方式`MultiByteToWideChar`？

```
std::wstring widen(const std::string &in)
{
    int len = MultiByteToWideChar(CP_UTF8, 0, &in[0], -1, NULL, 0);
    std::wstring out(len, 0);
    MultiByteToWideChar(CP_UTF8, 0, &in[0], -1, &out[0], len);
    return out;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T17:33:36.740

您第一次调用 有一个问题`MultiByteToWideChar`：不能保证字符序列以零结尾（尽管实际上通常是这样）。将该行更改为

```
int len = MultiByteToWideChar(CP_UTF8, 0, in.c_str(), -1, NULL, 0); 
```

你应该是安全的。即使`MultiByteToWideChar`失败并返回 0，这也是通过`len`在第二次调用中作为最终参数传递来解释的`MultiByteToWideChar`。

话虽如此，它是安全的，因为它不会崩溃或损坏内存。然而，还有一个问题：除非输入字符串导致`MultiByteToWideChar`失败，否则返回的字符串将声称它`size()`比它应该的大一个字符。我建议按如下方式更改代码：

```
std::wstring widen(std::string const &in)
{
    std::wstring out{};

    if (in.length() > 0)
    {
        // Calculate target buffer size (not including the zero terminator).
        int len = MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS,
                                      in.c_str(), in.size(), NULL, 0);
        if ( len == 0 )
        {
            throw std::runtime_error("Invalid character sequence.");
        }

        out.resize(len);
        // No error checking. We already know, that the conversion will succeed.
        MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS,
                            in.c_str(), in.size(), &out[0], out.size());
                            // Use out.data() in place of &out[0] for C++17
    }

    return out;
} 
```

此实现解决了以下问题：

*   如果输入序列不是有效的 UTF-8，它会通过传递`MB_ERR_INVALID_CHARS`标志来报告错误。
*   通过抛出异常来报告错误。这使得区分转换错误和成功调用（返回零大小的字符串）成为可能。（*注意：`std::wstring`c'tor 已经在失败的情况下抛出异常。对于其他错误**不***抛出异常会感觉不自然。 ）
*   该实现正确处理包含嵌入`NUL`字符的输入。这很少使用，但是当它使用时（例如，在组成[OPENFILENAME](https://docs.microsoft.com/en-us/windows/win32/api/commdlg/ns-commdlg-openfilenamew)的*lpstrFilter*成员时），它不会因此（默默地）失败。
*   它不会过度分配返回值的容器存储。如果*cbMultiByte*参数`-1`在对 的调用中设置为`MultiByteToWideChar`，则返回的长度**确实包含**零终止符的空间。但是，此字符由`std::string`实现拥有，而不是要转换的字符序列的一部分。
*   与上一个要点相关，此实现不转换零终止符。原始代码确实如此，`NUL`当`c_str()`调用成员时，返回的字符串在字符串末尾产生 2 个字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T17:40:20.317

如果你问它会工作，可能。这是正确的吗？

1.  你应该使用`in.c_str()`而不是`&in[0]`
2.  `MultiByteToWideChar`您应该至少第一次检查返回值。
3.  `MultiByteToWideChar`以 (-1) 长度调用，如果成功，将*包括*一个零终止符（即，成功时它总是返回 >= 1）。的长度构造函数`std::wstring`不需要这个。`std::wstring(5,0)`将为六个宽字符分配空间；5+零项。所以从技术上讲，你分配了一个太多的宽字符。

从[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)docs on`cbMultiByte`和 -1 开始：

> 如果此参数为 -1，则该函数处理整个输入字符串，包括终止空字符。因此，生成的 Unicode 字符串有一个终止空字符，并且函数返回的长度包括该字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:37:02.890

不，因为`std::wstring`不能保证 a 将其数据存储在连续的内存块中（尽管它很可能在您的实现中这样做）。改用 a `std::vector<wchar_t>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T12:19:45.013

其他答案很好，但我想根据我自己对同一问题的研究为未来的访问者添加一些额外的信息。

1.  Microsoft 开发人员 Larry Osterman 有[一篇很好的博客文章](https://blogs.msdn.microsoft.com/larryosterman/2015/11/24/converting-win32-api-results-to-stdwstring-or-stdstring/)描述了这样一个函数，其中包含关于返回代码检查和 NRVO（命名返回值优化）的非常好的观点。如果它仍然可用，您应该阅读该帖子以进行讨论。我包括他的最终代码，以防万一帖子丢失。

    ```
     std::wstring UnicodeStringFromAnsiString(_In_ const std::string &ansiString)
    {
        std::wstring returnValue;
        auto wideCharSize = MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, ansiString.c_str(), -1, nullptr, 0);
        if (wideCharSize == 0)
        {
            return returnValue;
        }
        returnValue.resize(wideCharSize);
        wideCharSize = MultiByteToWideChar(CP_ACP, MB_PRECOMPOSED, ansiString.c_str(), -1, &returnValue[0], wideCharSize);
        if (wideCharSize == 0)
        {
            returnValue.resize(0);
            return returnValue;
        }
        returnValue.resize(wideCharSize-1);
        return returnValue;
    } 
    ```

在我自己的使用中，我能够添加博客评论中提到的优化，并且 ANSI 字符串长度不需要 -1。

2.  C++17（第 21.3.1.7.1 节）记录了一个新添加的非常量`data()`方法，应该使用它来代替`&in[0]`获取可变指针。

    ```
    charT* data() noexcept;
    ```

3.  STL 拥有结果中的尾随`\0`，`c_str()`因此请小心处理字符串大小。

# eclipse - scala 在编译时如何处理新行？

> ID：14184710
> 
> 赞同：2
> 
> 时间：2013-01-06T17:24:28.260
> 
> 标签：eclipse, scala

我这里有这段代码，一切都很好：

```
var capital = Map("US" -> "Washington", "France" -> "Paris")

println(capital("France")) 
```

**现在让我们在Map**之后添加一些新行，因为这样看起来好多了：

```
 var capital = Map
    (
        "US" -> "Washington", 
        "France" -> "Paris"
    )

    println(capital("France")) //error 
```

Eclipse 给我一个错误消息：`type mismatch; found:java.lang.String("France") required: (?, ?) Start.scala /ScalaProject/src line 11 Scala Problem`

咦为什么会这样？只是因为我在新行之后添加了这些东西？实际上我可以做到这一点而不会出现任何错误消息：

```
var capital = Map("US" -> "Washington", "France" -> "Paris")

println(

    capital

    (

    "France")) //no error 
```

那么**Map**有什么问题呢？scala 如何处理新行？我只是困惑。

编辑：我正在使用

```
scala -version
Scala code runner version 2.9.2 -- Copyright 2002-2011, LAMP/EPFL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T17:32:29.560

在 REPL 中输入行（不确定 Eclipse）时，会尝试任何可能本身有效的行。

```
var capital = Map 
```

是有效的，所以其余的被解释为一个单独的语句（它实际上创建了一个带有映射的 Tuple2，然后丢弃它们，因为它们没有分配给任何东西）。在 shell（或`:paste`模式下的 REPL）中，它暂时尝试加入行，然后一切正常。

为了在 REPL 中解决这个问题——并符合惯用的 Scala 风格——你应该在前一行留下左大括号和圆括号：

```
var capital = Map(
  "US" -> "Washingtion",
  "France" -> "Paris"
) 
```

如果你有某种打开的块，编译器会去任意远的地方寻找关闭；如果 REPL（不在`:paste`模式下）连续找到两个空行但会跳过一个，它将退出。

```
val works = Map(

  1 -> "one"
)

val fails = Map(

  2 -> "two"
) 
```

但请注意，只有当行*完全为空*`fails`时才会失败；如果行上什至有空格（例如通过缩进放在那里），REPL 将继续读取更多行，希望您将键入更多代码来完成该块。

# c# - Windows RT 8 - 查看应用程序存储中的文件

> ID：14184711
> 
> 赞同：0
> 
> 时间：2013-01-06T17:24:34.333
> 
> 标签：c#, xml, windows, windows-8

所以我正在将一个 xml 文件写入本地 Storagefolder

```
using Windows.Storage;
StorageFolder localFolder = ApplicationData.Current.LocalFolder; 
```

我想在 Windows 资源管理器中查看此文件以进行调试。

有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:34:28.167

它位于

`C:\Users\*Username*\AppData\Local\Packages\*application specific letters and numbers*\LocalState`

`Path`您可以通过探索对象的属性轻松确定路径`localFolder`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:09:36.457

您的所有应用程序数据都在 \Users\\Appdata\Local\Packages 中。选择您的应用程序，然后进入 LocalState 文件夹。

# ruby-on-rails-3 - 自行加入 ruby on rails

> ID：14184717
> 
> 赞同：0
> 
> 时间：2013-01-06T17:26:11.273
> 
> 标签：ruby-on-rails-3, self-join

我在使用 Ruby on Rails 中的自连接语句时遇到问题。嗯，这有点复杂和烦人，但我想得到的是：表中
的 5 个工作`JobCompact`具有相同的外键`build_compact_id`，并且要么`language "ruby" or "rubinius"`

我的查询如下所示：

```
JobCompact.all(   
:joins => "JOIN job_compacts AS jobs2 ON job_compacts.build_compact_id = jobs2.build_compact_id",   
:conditions => ["job_compacts.language = ? AND jobs2.language=?", 'ruby', 'rubinius'],  
:limit => 5) 
```

一般来说，这似乎有效，但只会将对象从第一个表中返回。第二个表 (jobs2) 未显示在结果集中。我想获得一个包含所有符合给定条件的 job_compacts 的集合。

我希望我能解释我的问题，否则请毫不犹豫地问我。提前致谢！

# php - 从函数回显特定结果

> ID：14184718
> 
> 赞同：1
> 
> 时间：2013-01-06T17:26:12.253
> 
> 标签：php, mysql, function, joomla, foreach

我有以下函数，目前位于 default.php 文件中，稍后我将移至 helper.php

```
function getauthor($shouts, $i){
    $db = JFactory::getDBO();
    $query = $db->getQuery(true);
    $query->select('*')
    ->from('#__users')
    ->where('name = '. $shouts[$i]->name);
    $db->setQuery($query);
    $rows = $db->loadObjectList();
    $i=0;
    foreach ($rows as $row){
        $author[$i]->id = $row->id;
        $author[$i]->name = $row->name;
        $i++;
    }
    return $author;
} 
```

基本上我想做的是 print `$author[$i]->name`，但每次我尝试使用以下代码执行此操作时：

```
print stripslashes($author[$i]->name); 
```

我收到以下错误：

```
Undefined variable: author in C:\wamp\www\Joomla25\modules\mod_xxx\tmpl\default.php on line 98

Trying to get property of non-object in C:\wamp\www\Joomla25\modules\mod_xxx\tmpl\default.php on line 98

Cannot redeclare getauthor() (previously declared in C:\wamp\www\Joomla25\modules\mod_xxx\tmpl\default.php:60) in C:\wamp\www\Joomla25\modules\mod_xxx\tmpl\default.php on line 60 
```

谁能告诉我哪里出错以及如何打印`$author[$i]->name`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:36:47.133

您需要`author`在调用的地方定义变量：

```
print stripslashes($author[$i]->name); 
```

在最小的可能示例中：

```
$author = getauthor(....)
...
print stripslashes($author[$i]->name); 
```

# javascript - JS 关联数组上的 toString()

> ID：14184720
> 
> 赞同：1
> 
> 时间：2013-01-06T17:26:37.137
> 
> 标签：javascript, arrays, associative

是否可以在 Javascript 中的关联数组上调用“.toString()”。

```
var theString = jsonData['item'].toLowerCase();
var theString = jsonData.item.toLowerCase(); 
```

这些都不适合我将数组项的值转换为小写。

在 PHP 中，我可以通过以下方式做到这一点：

```
strtolower($array['item']); 
```

提前致谢 ：）

编辑：这是我的确切代码：

```
var correctAnswer = jsonData[setname][qname]['answers'][answerval];
if(lockcase == false){
orrectAnswer = correctAnswer.toString().toLowerCase();  
} 
```

这是来自 Chrome 调试菜单的消息：

未捕获的类型错误：无法调用未定义的方法“toString”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:28:29.557

尝试：

```
JSON.stringify(jsonData['item']) 
```

这将返回您 a `String`，因此`toString()`不需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:32:58.980

**更新**：将返回的值与空字符串文字连接起来：

```
var theString = ("" + jsonData['item']).toLowerCase();
var theString = ("" + jsonData.item   ).toLowerCase(); 
```

# windows-phone-7 - WP8 应用内购买测试

> ID：14184724
> 
> 赞同：2
> 
> 时间：2013-01-06T17:27:01.320
> 
> 标签：windows-phone-7, in-app-purchase, windows-phone, windows-phone-8

我在这里按照本指南[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx#IAP_MockService](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689%28v=vs.105%29.aspx#IAP_MockService)为应用内购买测试设置 IIS 服务，但是当我尝试打开`http://localhost/v8/help`时，我收到以下消息

HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容。

详细错误信息：Module DirectoryListingModule Notification ExecuteRequestHandler Handler StaticFile Error Code 0x00000000 Requested URL

```
http://localhost:80/v8/help/ 
```

物理路径 C:\IapcatalogMockService\CatalogServiceMock\v8\help\ 登录方法匿名登录用户匿名

有人知道出了什么问题吗？

我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T05:01:07.727

我有一些问题。然后通过使用源代码重建网站并重新部署来解决。有时，重新部署后显示配置部分错误，您可以删除 web.config 文件中的配置部分。这个对我有用。

# vb.net - “System.Data.SqlClient.SqlConnection”类型的值无法转换为“一维数组”

> ID：14184727
> 
> 赞同：1
> 
> 时间：2013-01-06T17:27:03.610
> 
> 标签：vb.net, ado.net

我正在尝试使用 vb.net 连接到 sql server，但出现此错误：

> *“System.Data.SqlClient.SqlConnection”类型的值无法转换为“System.Data.SqlClient.SqlConnection”的一维数组。*

这是鳕鱼源：

```
Imports System.Data.SqlClient

Public Class Form1

    Dim connection As SqlConnection()
    Dim reader As SqlDataReader

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Try
            connection = New SqlConnection("data source=.; initial catalog=tp2_ado; integrated security = sspi")
        Catch ex As Exception
            MessageBox.Show(ex.Message())
        End Try

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:29:33.060

```
Imports System.Data.SqlClient

Public Class Form1

    Dim connection As SqlConnection ' this should not be an array !
    Dim reader As SqlDataReader

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Try
            connection = New SqlConnection("data source=.; initial catalog=tp2_ado; integrated security = sspi")
        Catch ex As Exception
            MessageBox.Show(ex.Message())
        End Try

    End Sub
End Class 
```

# javascript - 使用 javascript .replace 正则表达式将递增数字添加到字符串

> ID：14184730
> 
> 赞同：1
> 
> 时间：2013-01-06T17:27:19.220
> 
> 标签：javascript, regex, string, auto-increment

我有这个字符串，我试图通过添加一个 _# 来增加每个单词/属性，其中 # 是`{`.

```
 str = 'View{Image{BackgroundImage: Image.png;Position: 0, 0;Width: 320;Height: 480;}Button{BackgroundImage: ButtonTop.png;Position: 61, 83;Width: 217;Height: 58;}Button_2{BackgroundImage: ButtonBottom.png;Position: 21, 303;Width: 217;Height: 58;}}' 
```

过去我使用过这个正则表达式，但它不起作用，我不知道为什么。

```
var i = {};
str = str.replace(/(\S+):{/g, function (m, p1) {
            i[p1] = (i[p1] || 0) + 1;
            return p1 + "_" + i[p1].toString() + ":{";
        }); 
```

期望的输出是：

```
str = 'View_1{Image_1{BackgroundImage: Image.png;Position: 0, 0;Width: 320;Height: 480;}Button_1{BackgroundImage: ButtonTop.png;Position: 61, 83;Width: 217;Height: 58;}Button_2{BackgroundImage: ButtonBottom.png;Position: 21, 303;Width: 217;Height: 58;}}' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:03:03.693

根据您的正则表达式，它正在寻找`:`左花括号前面的冒号`{`，这在您的字符串中不存在。尝试将字符串的开头更改为：

```
str = 'View:{Image...'; 
```

* * *

更新：我不确定`i`变量中包含什么 - 它总是一个空对象吗？但是，如果您继续增加数字，此替换功能可能对您更有效（[演示](http://jsfiddle.net/Mottie/dggtx/)）：

```
str = str.replace(/([a-zA-Z]+_?)(\d+)?:{/g, function (m, n, d) {
  d = (parseInt(d,10) || 0) + 1; // add one
  if (!/_$/.test(n)) { n += '_'; } // add _ if name doesn't have it
  return n + d + ":{";
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:23:12.467

一些小的但关键的变化应该让它发挥作用。

首先，我认为您的`str`. 例如，您已经`Button_2`接近尾声，`str`但我假设您只是希望它成为`Button`并且您的`replace`函数负责递增。否则，结果将是`Button_2_1`......所以我假设你想要`str`这样：

```
str = 'View{Image{BackgroundImage: Image.png;Position: 0, 0;Width: 320;Height: 480;}Button{BackgroundImage: ButtonTop.png;Position: 61, 83;Width: 217;Height: 58;}Button{BackgroundImage: ButtonBottom.png;Position: 21, 303;Width: 217;Height: 58;}}' 
```

如果是这样，那么这里是更正的代码（我希望它对你有用），后面有解释：

```
var i = {};

str = str.replace(/(\w+){/g, function (m, p1) {
    i[p1] = (i[p1] || 0) + 1;
    return p1 + "_" + i[p1].toString() + ":{";
}); 
```

在括号中的原始代码`\S`中，但这太笼统了，因为它甚至会捕获开始的花括号`{`。在正则表达式中，大写`\S`字母表示任何*不是*空格的字符。小写字母`\w`会找到字母数字字符，因此这可能是您想要捕获单词`View`, 和`Image`等的内容。因此，现在字符串的任何字母数字部分直接后跟（无空格）后跟大括号将被替换为下划线和数字，随着该项目的每个实例而递增。

我不确定你是否真的希望冒号`:`出现在每个数字之后，所以我把它留在了但如果你真的不想要它，只需将 return 语句替换为`return p1 + "_" + i[p1].toString() + "{";`

否则，如果您对上面的内容（包括冒号）感到满意，这就是结果字符串：

```
View_1:{Image_1:{BackgroundImage: Image.png;Position: 0, 0;Width: 320;Height: 480;}Button_1:{BackgroundImage: ButtonTop.png;Position: 61, 83;Width: 217;Height: 58;}Button_2:{BackgroundImage: ButtonBottom.png;Position: 21, 303;Width: 217;Height: 58;}} 
```

我认为这就是你想要的。我已经设置了一个小提琴，这样你就可以看到正确的代码[并](http://jsfiddle.net/b9FCg/1/)玩一玩。

希望这可以帮助。

# iphone - GPUImageMovieWriter 帧演示时间

> ID：14184731
> 
> 赞同：5
> 
> 时间：2013-01-06T17:27:28.947
> 
> 标签：iphone, objective-c, ios, opengl-es, gpuimage

我有一个`GPUImageColorDodgeBlend`连接了两个输入的过滤器：

1.  A`GPUImageVideoCamera`从 iPhone 摄像机获取帧。
2.  A`GPUImageMovie`这是一个 (MP4) 视频文件，我想放在实时摄像机源上。

然后将`GPUImageColorDodgeBlend`其连接到两个输出：

1.  A`GPUImageImageView`提供混合操作的实时预览。
2.  A`GPUImageMovieWriter`按下录制按钮后将电影写入存储。

现在，在视频开始录制之前，100% 的时间一切正常。可以很好地`GPUImageVideo`混合在实时摄像机视频上，并且不会报告任何问题或警告。

但是，当`GPUImageMovieWriter`开始录制时，事情开始随机出错。大约 80-90% 的时间，`GPUImageMovieWriter`工作完美，没有错误或警告，输出视频正确写入。

然而，大约 10-20% 的时间（据我所知，这是相当随机的），在录制过程中似乎出现问题（尽管屏幕预览继续正常工作）。

具体来说，我开始收到数百个`Program appending pixel buffer at time:`错误。

此错误源自 中的`- (void)newFrameReadyAtTime:(CMTime)frameTime atIndex:(NSInteger)textureIndex`方法`GPUImageWriter`。

此问题是由`frameTime`报告给此方法的值的问题触发的。

据我所知，问题是由于作者有时会收到由摄像机编号的帧（它们往往具有极高的时间值，例如**64616612394291**，时间刻度为**1000000000**）。但是，有时作者会得到编号`GPUImageMovie`为低得多的帧（例如**200200**的时间刻度为**30000**）。

`GPUImageWriter`只要帧值增加，这似乎很高兴，但是一旦帧值减少，它就会停止写入并发出`Program appending pixel buffer at time:`错误。

**我似乎在做一些相当普遍的事情，而且这在任何地方都没有被报告为错误，所以我的问题是（对任何或所有这些问题的答案都值得赞赏——它们不一定都需要按顺序单独回答问题）：**

*   值从何而来——为什么根据来源或来源编号`frameTime`似乎如此随意？为什么它在每个之间交替 - 帧编号方案不应该在所有帧之间保持一致？`frameTime``GPUImageVideoCamera``GPUImageMovie`

*   我认为这个问题是由不增加`frameTime`的 s 引起的是否正确？

*   ...如果是这样，为什么100% 的时间在屏幕上`GPUImageView`接受和显示`frameTime`s 就好了，但`GPUImageMovieWriter`需要订购它们？

*   ...如果是这样，我如何确保`frameTime`进来的 s 是有效的？我尝试添加`if (frameTime.value < previousFrameTime.value) return;`以跳过任何有效的编号较小的帧 - 大多数情况下。不幸的是，当我设置`playsAtActualSpeed`它时，`GPUImageMovie`这往往变得不那么有效，因为*所有*帧最终都会在某个点之后被跳过。

...**或者**这可能是一个错误，在这种情况下，我需要在 GitHub 上报告它——但我很想知道在`frameTime`s 的工作方式中是否有一些我在这里忽略的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T21:11:55.477

我已经找到了一个解决这个问题的潜在解决方案，我现在已经将它作为一个 hack 来实现，但可以想象它可以扩展到一个适当的解决方案。

我已经追溯了时序的来源，`GPUImageTwoInputFilter`它基本上将两个输入源多路复用为单个帧输出。

在该方法`- (void)newFrameReadyAtTime:(CMTime)frameTime atIndex:(NSInteger)textureIndex`中，过滤器一直等待，直到它从第一个源 ( `textureInput == 0`) 和第二个源收集到一个帧，然后将这些帧转发到它的目标。

问题（我看到它的方式）是该方法只是使用`frameTime`第二个出现的帧（不包括`CMTIME_IS_INDEFINTE(frameTime) == YES`我现在不考虑的静止图像的情况，因为我不使用静止图像）可能并不总是相同的框架（无论出于何种原因）。

检查两个帧并将它们发送以进行处理的相关代码如下：

```
 if ((hasReceivedFirstFrame && hasReceivedSecondFrame) || updatedMovieFrameOppositeStillImage)
    {
        [super newFrameReadyAtTime:frameTime atIndex:0]; // this line has the problem
        hasReceivedFirstFrame = NO;
        hasReceivedSecondFrame = NO;
    } 
```

我所做的是调整上面的代码`[super newFrameReadyAtTime:firstFrameTime atIndex:0]`，使其**始终**使用`frameTime`来自第*一个*输入的，并完全忽略`frameTime`来自第二个输入的。到目前为止，一切正常。（仍然会有兴趣让我知道为什么要这样写，因为这`GPUImageMovieWriter`似乎坚持增加`frameTime`s，而方法原样不能保证。）

警告：如果您只使用静止图像，这几乎肯定会完全中断，在这种情况下，您将有`CMTIME_IS_INDEFINITE(frameTime) == YES`第一次输入的`frameTime`.

# android - 如何在 Android 中读取 HTML 标签？

> ID：14184735
> 
> 赞同：0
> 
> 时间：2013-01-06T17:27:37.650
> 
> 标签：android, html-parsing

在我的应用程序中，我必须通过从一个静态 url 获取数据来生成 url，我必须从该页面读取值（意味着来自 HTML 标记 ie ）并构建新的 url 并将其显示在 webview 中。

我遇到了问题，如何获取给定 url 的页面源并获取特定的标签值，例如

```
<HTML>
   <Head>
      <Title>ABCDE</Title>
   </Head>
  <div>
   <input type="hidden" name="_MYNAME" id="_MYNAME" value="" />
   <input type="hidden" name="_EVENT" id="__EVENT" value="" />
   <input type="hidden" name="__MYSTATE" id="__MYSTATE" value="">
  </div> 
```

我需要读取 tab 的值，我尝试使用 htmlcleaner 但我没有成功。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:50:14.707

您可以使用 YQL（雅虎查询语言）编写查询以获取 HTML 数据。YQL 返回 JSON 或 XML 结果，您可以使用 AsyncTask 中的 HttpGet 读取这些结果。这是开发者指南：http: [//developer.yahoo.com/yql/guide/](http://developer.yahoo.com/yql/guide/)

这是在 android 中读取 JSON 响应的指南： [http ://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:46:36.233

只需为您的 webview 覆盖 WebViewClient 中的 onpagefinished 方法。您只需要编写一些 javascript 即可使用名称或 id 从 html 页面获取值，就像我们在简单 html 页面中所做的那样简单，形成 url 并使用 js 本身加载它

```
 String javascript;

 @Override
 public void onPageFinished(WebView view, String url) {
 super.onPageFinished(view, url);

    javascript="javascript:var yourValue=document.getElementById('tad_id').value;
    window.location = "form your url using yourValue here";"
    wv.loadUrl(javaScript);

 } 
```

我正在使用它从我的首选项文件中填写表格并且对我来说工作正常。

# java - getPassword() 方法每次返回不同的加密字符数组

> ID：14184736
> 
> 赞同：0
> 
> 时间：2013-01-06T17:27:43.580
> 
> 标签：java, swing

我想创建一个登录框架。我将密码保存在数据库中。该`getPassword()`方法每次返回一个新的加密字符数组。

```
String pass = txtPass.getPassword().toString(); 
```

然后如何比较存储在数据库中的密码和用户提供的密码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T17:30:37.550

`JPasswordField.getPassword()`返回一个字符数组。要从 char 数组创建字符串，您必须使用`new String(charArray)`. `toString()`，在任何数组上，返回数组的类型，后跟其哈希码（类似于`[C@39ea2de1`），因此它不是功能上有趣的信息。

# sql-server - 防止重复sql server

> ID：14184738
> 
> 赞同：0
> 
> 时间：2013-01-06T17:27:48.370
> 
> 标签：sql-server, join, duplicates

好的，在这个查询中，我从 5 个表中提取信息，表 Company、Programmer、Tester、Manager 和表 Contract。我将提取程序员、测试人员和经理的姓名和电话号码，以及他们工作的公司，这家公司负责管理这个程序，因为 x 人的请求无关紧要。

问题在于下面的代码，某个信息会出现与其他信息一样多的信息，例如程序员的姓名和电话号码将与公司的经理和测试人员一样多地出现。

我尝试了左外连接，它会给我更多的结果，那么我该如何解决这个问题，以便下次结果不会重复但说 NULL？

```
SELECT DISTINCT pg.name,
                pg.Tel_Nr,
                Mgr.name,
                Mgr.Tel_Nr,
                Ts.Name,
                Ts.Tel_Nr,
                Pg.Name,
                con.program_name
FROM Company AS Cm
INNER JOIN Programmer AS Pg ON Pg.company = Cm.name
INNER JOIN Manager AS Mg ON Mg.company = Cm.name
INNER JOIN Tester AS Ts ON Ts.company = Cm.name
INNER JOIN Contract AS Con ON Con.program_name = 'My Program'
AND Cm.name = Con.Company 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:45:54.050

当然，生成一份联系方式列表以及可能的职位描述会更有意义。像这样的东西：

```
WITH Cte as (select Cm.name from 
      Contract as Con join Company as Cm on  Cm.name = Con.Company
     where Con.program_name = 'My Program')
SELECT pg.name,  pg.Tel_Nr, 'Programmer' as JobTitle
FROM  Cte   INNER JOIN
    Programmer as Pg  on Pg.company = Cte.name 
UNION ALL
SELECT Mgr.name,  Mgr.Tel_Nr,'Manager' as JobTitle
FROM  Cte   INNER JOIN
     Manager as Mg on Mg.company= Cte.name 
UNION ALL
SELECT Ts.Name,  Ts.Tel_Nr, 'Tester' as JobTitle
FROM  Cte   INNER JOIN
    Tester as Ts on Ts.company = Cte.name 
```

该解决方案部署了一个公用表表达式（标记为`Cte`）以避免多次 查询 thr`Company`和表。[了解更多](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)。`Contract`

# php - PHP正则表达式匹配除某些src之外的所有img标签

> ID：14184743
> 
> 赞同：-2
> 
> 时间：2013-01-06T17:28:03.200
> 
> 标签：php, regex, xpath, html-parsing, domdocument

我对 PHP 非常陌生，并对用 PHP 编写的 CMS 中的某个文件进行了轻微修改。我修改了一个在页面源中获取第一个标签的函数，`<img>`以从该源中获取一个随机标签。

用于匹配源的正则表达式是：

```
$regex = '/<' . $tag . '\\b[^>]*>/i'; 
```

其中`$tag`只包含一个字符串`img`。

但是我注意到在源代码中有`src`属性包含“1px.gif”的图像，我不想匹配这些。

目前我一直从匹配数组中重新选择一个随机元素，直到它不是 1px.gif，但这当然是一个糟糕的解决方案。

我对正则表达式不够好，无法自己执行此操作，但我理解上面的正则表达式搜索`<img`和一个不是`>`. 我需要添加“并且不包含'1px.gif'”。

或者，我可以检查匹配数组并删除每个 1px.gif 条目，但我仍然更喜欢正则表达式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T17:49:40.443

而不是一些损坏的解决方案（正则表达式无法解析 HTML），您应该使用 DOMDocument 来获取您需要的数据。这方面的一个例子是：

```
<?php
$html = '<p>something</p><img src="something"><img src="yay"><img src="1px.gif">';

$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html);

$xpath = new DOMXPath($doc);
$nodes = $xpath->query('//img[not(contains(@src, "1px.gif"))]');

foreach ($nodes as $node) {
    echo $node->getAttribute('src');
} 
```

这将获得所有没有`src`of 的图像`1px.gif`。从那里开始，很容易获得一个随机节点。

演示：[http ://codepad.viper-7.com/UdEiM4](http://codepad.viper-7.com/UdEiM4)

# javascript - Javascript 中的错误

> ID：14184744
> 
> 赞同：1
> 
> 时间：2013-01-06T17:28:10.690
> 
> 标签：javascript, hta

我正在编写一个 hta 应用程序并且正在使用 javascript。它说`there should be a ";" at line one char 10`。这是代码：

```
Function SetSize()
{
 window.resizeTo(400,400);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:29:47.590

Javascript 是一种区分大小写的语言；更新如下：

```
function SetSize()
{
 window.resizeTo(400, 400);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:29:51.323

函数必须小写

```
function SetSize()
{
  window.resizeTo(400,400);
} 
```

[Douglas Crockford](http://javascript.crockford.com/code.html)也有一些约定，声明函数名也应该小写，大括号应该放在函数头的同一行。

```
function setSize() {
  window.resizeTo(400,400);
} 
```

这不是运行无错误代码所必需的，但它是几乎每个 javascript 程序员都使用的约定，并有助于为每个人编写可读的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T17:29:57.653

没有`Function`关键字，使用小写`function`。

# c++ - C++ 静态库链接器错误

> ID：14184745
> 
> 赞同：2
> 
> 时间：2013-01-06T17:28:14.513
> 
> 标签：c++, g++, static-libraries, linker-errors

我正在使用静态库创建一个简单的拼写检查程序，因为我希望其他人能够使用拼写检查功能。两个问题区域在库源代码和库头中。当我编译库时，这是我得到的错误：

```
 ar -cvq libspellcheck.a checker.o
    a - checker.o
    g++ -o spell-check main.o meta.o libspellcheck.a
    libspellcheck.a(checker.o): In function `check_spelling(char*, char*)':
    checker.cpp:(.text+0x0): multiple definition of `check_spelling(char*, char*)'
    libspellcheck.a(checker.o):checker.cpp:(.text+0x0): first defined here
    collect2: ld returned 1 exit status
    make: *** [spellcheck] Error 1 
```

checker.cpp 代码位于[此处](http://pastebin.com/rzuXhAye)。头文件 (spellcheck.h) 位于[此处](http://pastebin.com/ri8hA4GF)。

我想知道是什么导致了上述错误，因为我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:32:58.313

问题似乎是链接 checker.cpp 两次 - 你可以添加你的 makefile（还要确保 check_spelling 没有在 checker.cpp 中定义两次，并在构建之前尝试清理中间文件）？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T18:25:06.393

看起来好像您已将`checker.cpp`两次添加到存档中。

尝试改用此命令：

```
ar -cvr libspellcheck.a checker.o 
```

使用`r`代替`q`将替换任何具有相同名称的现有文件，而不是添加它的另一个副本。

或者，只需确保在向其中添加任何文件之前删除存档，因此它始终为空。

# plone - 导入使用 LinguaPlone 的 zexp 站点时出错

> ID：14184746
> 
> 赞同：0
> 
> 时间：2013-01-06T17:28:15.203
> 
> 标签：plone, linguaplone

我正在使用导入导出工具将站点从一个 zope 实例迁移到另一个实例。该站点正在使用 LinguaPlone (Products.LinguaPlone = 4.1.2)。两个 zope 实例是相同的，因为我使用了 buildout 并且我已经挑选了所有鸡蛋。但是在迁移时它会显示错误：

```
Error Type: AttributeError
Error Value: 'NoneType' object has no attribute 'getTranslations' 
```

我想它与[http://plone.org/products/linguaplone/issues/241](http://plone.org/products/linguaplone/issues/241)中记录的错误相同。在迁移到其他 zope 实例之前如何修复该站点？

完整的追溯：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module OFS.ObjectManager, line 620, in manage_importObject
  Module OFS.ObjectManager, line 642, in _importObjectFromFile
  Module OFS.ObjectManager, line 358, in _setObject
  Module zope.event, line 31, in notify
  Module zope.component.event, line 24, in dispatch
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module zope.component.event, line 32, in objectEventNotify
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 113, in dispatchObjectMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 113, in dispatchObjectMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 113, in dispatchObjectMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 113, in dispatchObjectMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module Products.CMFCore.CMFCatalogAware, line 262, in handleContentishEvent
  Module Products.CMFCore.CMFCatalogAware, line 188, in notifyWorkflowCreated
  Module Products.CMFCore.WorkflowTool, line 289, in notifyCreated
  Module Products.CMFCore.WorkflowTool, line 635, in _reindexWorkflowVariables
  Module Products.Archetypes.CatalogMultiplex, line 104, in reindexObject
  Module Products.Archetypes.ExtensibleMetadata, line 504, in notifyModified
  Module Products.LinguaPlone.utils, line 133, in generatedMutator
  Module Products.LinguaPlone.I18NBaseObject, line 221, in getTranslations
AttributeError: 'NoneType' object has no attribute 'getTranslations' 
```

# xml - Blogger 模板“XML 错误信息”]

> ID：14184753
> 
> 赞同：0
> 
> 时间：2013-01-06T17:28:55.950
> 
> 标签：xml, templates, blogger

需要有关博客模板 HTML 的帮助 - 它说“您的模板格式不正确，无法解析。请确保正确关闭所有 XML 元素。XML 错误消息：prolog 中不允许内容”

我更改了他们要求我解决的一些问题，例如“第 231 行第 2 列需要结束 html 标记”或类似的内容，但现在我不知道他们在问什么，我没有得到那个很多html背景知识。丁：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Love in winter.</title>

<script type="text/javascript">
function changeNavigation(id)
{document.getElementById('main').innerHTML=document.getElementById(id).innerHTML}
</script>

<style type="text/css">
body{
background: url(http://i413.photobucket.com/albums/pp217/cottonlovescandy/bgbg-1.gif);
font-size: 11px;
color: #777777;
line-height: 150%;
font-family: arial;
font-weight: normal;
cursor:url("http://lovelycore.com/hand.ani");}

body, td, th{
color: #777777;
font-size: 11px;
line-height: 15px;
font-family: arial;}

strong {color: #ED8F99;}
i {color: #ffafaf;}
s {color: #ffafaf;}
b {font-family: "arial", sans-serif; color: #ffafaf;}
u {color: #6C6461; border-bottom: 1px solid #B3DE69; text-decoration: none;}

A:link
{text-decoration: none; color: #777777; cursor: url("http://digilander.libero.it/loredanatemplate/cursori/145.ani");}
A:visited
{text-decoration: none; color: #777777; cursor: url("http://digilander.libero.it/loredanatemplate/cursori/145.ani");}
A:active
{text-decoration: none; color: #777777; cursor: url("http://digilander.libero.it/loredanatemplate/cursori/145.ani");}
A:hover
{text-decoration: none; color: #ffafaf; cursor: url("http://digilander.libero.it/loredanatemplate/cursori/145.ani");}

select, input, textarea{
padding: 4px;
font-size: 11px;
color: #C0B09A;
font-family: verdana;
border: 1px solid #FFDBFF;
background-color: #FFF7FF;}

blockquote{
padding: 5px;
color: #666666;
font: 11px arial;
letter-spacing: 1px;
border: 1px solid #ffafaf;
}

.box{
text-align: justify;
background-color: #1E1E1E;}

.heading{
color: #FFAFAF;
font-size: 20px;
line-height: 19px;
letter-spacing: -1pt;
font-family: century gothic;}

.head4{
padding: 6px;
color: #996633;
font-size: 20px;
line-height: 19px;
text-align: center;
font-weight: none;
letter-spacing: 1px;
font-family: century gothic;}

.blogger-labels{
color: #70C3B0;
font: 8pt georgia;
text-transform: lowercase;}

.image{
padding: 5px;
background: #F4F7EC;
border: 1px solid #E8E6DA;}

.date{
font: 7pt arial;
color: #808080;
text-align: right;
line-height: 11pt;
margin-right: 10px;
letter-spacing: 2px;
text-transform: uppercase;
background-color: #FBFBFB;
border-top: 1px solid #DCDCDC;
border-bottom: 1px solid #DCDCDC;}

.title{
padding: 5px;
font-size: 18pt;
color: #ffafaf;
text-align: right;
font-family: calibri;
font-weight: none;
letter-spacing: -2px;
text-transform: lowercase;
}

#entry {text-align: justify;}
#footer{text-align: center; border-top: 1px solid #ffffff;}

::-moz-selection {color: #999999; background: #EEEEEE;}

.h1{
font-size: 9pt;
color: #FFFFFF;
font-weight: bold;
font-family: "Georgia", serif;
border-bottom: 1px solid #FDE8D7;
-moz-border-radius: 5px 0px 10px 0px;
background-color: #FFADAD;
text-align: center;
margin: 0 0 5px;
line-height: 190%;}

.h2{
font-size: 15pt;
text-align: right;
color: #A5A5A5;
line-height: 100%;
font-weight: none;
border-bottom: 1px solid #E2E2E2;}

.border{
border-right : 1px solid #DCDCDC;
padding : 0px 5px 20px 0px; }

#navigation {
  height:2.7em;
  line-height:2.7em;
background-color:#FFADAD;
}

#navigation ul {
  margin:0;
  padding:0;
}

#navigation li {
border-color:white;
  float:left;
  margin:0;
  padding:0;
  list-style-type:none;
  border-top:none;
  white-space:nowrap;
}

#navigation li a {
color:white;
  display:block;
  padding:0 18px;
  font-size:0.8em;
  text-transform:uppercase;
  letter-spacing:1px;
}

#navigation a:hover
  {background-color:#ffbbbb}

* html #navigation a {width:1%;} 

#navigation form {
  border-color:white;
  background:#FEC42D url(http://img295.imageshack.us/img295/7783/blogyblixcornerbottomriwa5.gif) bottom right no-repeat;
  float:right;
  height:100%;
  width:189px;
  padding:0 15px;
  border-left:1px solid;
  line-height:0;
}

#navigation form fieldset {
  margin-top:7px;
  border:0 solid; 
}
* html #navigation form fieldset {margin-top:7px;}

#navigation #s {
border-color:#FFF9EA;
  height:1.5em;
  width:140px;
  margin:0 5px 0 0;
  padding:0;
  border:1px solid;
  font-size:0.8em;
  vertical-align:middle;
}

#navigation #searchbutton {
  color:white;
  background-color:#ffffff;
  height:2em;
  width:auto;
  padding:0 1px;
  border:1px solid;
  font-size:9px;
  letter-spacing:1px;
  text-align:center;
  vertical-align:middle;
}

</style>

<link rel="me" href="http://www.blogger.com/profile/03121445148229752476" />
<link rel="openid.server" href="http://www.blogger.com/openid-server.g" />
<!-- --><style type="text/css">@import url(http://www.blogger.com/static/v1/v-css/navbar/697174003-classic.css);
div.b-mobile {display:none;}
</style>
</head>

<noembed>
<body><script type="text/javascript">function setAttributeOnload(object, attribute, val) {if(window.addEventListener) {window.addEventListener("load",function(){ object[attribute] = val; }, false);} else 
</script></body></noembed> </html>

<div style="position: absolute;  left: 135px; top: 12px;">
<table width="450" border="0" cellpadding="8" cellspacing="0" bgcolor="#FFFFFF">
<tr><td colspan="2"><img src="http://i413.photobucket.com/albums/pp217/cottonlovescandy/emolovee.gif">
<div id='navigation'>
  <ul>
 <center><li class='selected'><a href='#'>Home</a></li>
 <li><a href='http://oreocheezecake.blogspot.com'>designer</a></li>
 <li><a href='msnim:add?contact=yourmailhere@hotmail.com'>MSN</a></li>
 <li><a href='http://blogskins.com/me/_oreos_'>Blogskins</a></li>
 <li><a href='http://www.facebook.com/'>Facebook</a></li>
 </center>
  </ul></div></td></tr>

<tr valign="top">
<td width="230">
<div class="border">
<div class="h1">Music</div>
<center>
Your playlist here.
</center><br>

<div class="h1">Disclaimer</div>
<center>여기에서 환영 ! <br>Welcome to <font color=#ffafaf>yoururlhere.blogspot.com</font>!<br>
This site is best viewed in <font color=#ffafaf>Internet Explorer</font>. And please forebear from <font color=#ffafaf>copying</font> or <font color=#ffafaf>ripping</font> anything from here that does not belong to you. 
Thank you for coming by.<br><br>
<center><img src="http://i495.photobucket.com/albums/rr312/angelicreations/graphics/sitestats/screenstats2_pink.gif" border="0" ><br> </center>
</center>
<br>

<div class="h1">Tagboard</div>
Your tagboard.
<br>

<div class="h1">Webmistress</div>
Your profile.<br><br>

<br></center>

<div class="h1">Affilates</div>
<center>
Your Link here.
<br>

<div class="h1">Blog Archives</div>
  <div align="left"><BloggerPreviousItems> <br>
♥&lt;a class="link" href="<$BlogItemPermalinkURL$>"> <$BlogPreviousItemTitle$></a>
</BloggerPreviousItems></div><br>

<center><form name="htmlp1" ACTION=URI>
    <select name="menu" onchange="jump(this.form)"
    style="font-family:Tahoma; font-align:center;"
    style="color:#ffafaf;"
    style="font-size:8pt;"
    style="background: url(http://dl4.glitter-graphics.net/pub/678/678644gz6asg8ibk.png); ">
    <option value="#">Click ♥&lt;/option><BloggerArchives>
    <option value="<$BlogArchiveURL$>"> ♥ <$MTArchiveTitle$></option></BloggerArchives>
    </select>
    </form></center>
<br>
<div class="h1">Thank You</div>
<center>Please do not remove credits. </center>
<center><a href="http://piggybacked.blogspot.com/" target="_blank"><img src="http://i413.photobucket.com/albums/pp217/cottonlovescandy/2button.gif" border="0"></a><br>
This blogskin is proudly designed by <b><a href="http://piggybacked.blogspot.com">Fan</a><a href="http://www.blogskins.com/me/_oreos_">ny.</a>♥&lt;/b><br>
</center><img src="http://i26.tinypic.com/2vb0y0y.gif"> <a href="http://www.blogskins.com/me/piinkifiedd">Basecodes 1</a> l Piinklifiedd<br>
<img src="http://i26.tinypic.com/2vb0y0y.gif"> <a href="http://www.blogskins.com/me/indreamsmaybe">Basecodes 2</a> l InDreamsMaybe<br>
<img src="http://i26.tinypic.com/2vb0y0y.gif"> <a href="http://www.blogskins.com/me/mssockpuppet">codes 1</a> l Ms.SockPuppet<br>
<img src="http://i26.tinypic.com/2vb0y0y.gif"> <a href="http://www.little-miss-wendy.com/">codes 2</a> l Little-Miss-Wendy<br>
<img src="http://i26.tinypic.com/2vb0y0y.gif"> <a href="http://cyworld.com/">Materials 1</a> l cyworld<br>
<img src="http://i26.tinypic.com/2vb0y0y.gif"> <a href="http://angelicreations.co.nr/">Materials 2</a> l Angelicreations<br>

<p></p></td>
</div>
<td width="600" id="main">
<MTEntries lastn="7">
<div class="title"><font style="font-family: trebuchet ms; color: #A2C5D6; font-size: 20pt;"></font> <$BlogItemTitle$></div>
<div class="date"><MTDateHeader><$MTEntryDate format="%B %e, %Y"$></MTDateHeader> | <$MTEntryDate format="%I:%M:%S %p"$> </div><br>
<div align="left"><$MTEntryBody$></div><br>
</MTEntries><br>

</div><br /></div></td></td></tr><tr><td colspan="2"></td></tr></table></div></body>

 <script language=JavaScript>
                <!--

                //Disable right click script III- By Renigade (renigade@mediaone.net)
                //For full source code, visit http://www.dynamicdrive.com

                var message="";
                ///////////////////////////////////
                function clickIE() {if (document.all) {(message);return false;}}
                function clickNS(e) {if 
                (document.layers||(document.getElementById&&!document.all)) {
                if (e.which==2||e.which==3) {(message);return false;}}}
                if (document.layers) 
                {document.captureEvents(Event.MOUSEDOWN);document.onmousedown=clickNS;}
                else{document.onmouseup=clickNS;document.oncontextmenu=clickIE;}

                document.oncontextmenu=new Function("return false")
                // --> 
                </script></html> 
```

请帮忙D：谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T23:48:43.390

这个验证错误有点棘手。“prolog 中不允许内容”通常意味着文件开头有非法字节。这有时是由于在编辑器中编辑文件并且没有将其正确保存为没有字节顺序标记的 UTF-8 造成的。看看这个：[prolog 中不允许有内容](https://stackoverflow.com/questions/3395560/content-is-not-allowed-in-prolog)

我使用 XML 验证器检查了您的博客模板，但文件中仍然存在大量错误。我会先使用[http://validator.w3.org/](http://validator.w3.org/)检查文件，然后确保 xml 是有效的 utf-8。我怀疑不是因为那里有 ♥ 字符看起来不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T03:04:00.017

您将正文和 HTML 标记放置在错误的位置..

从第 228 行到第 231 行：

```
<noembed>
<body><script type="text/javascript">function setAttributeOnload(object, attribute, val) {if(window.addEventListener) {window.addEventListener("load",function(){ object[attribute] = val; }, false);} else 
</script></body></noembed> </html> 
```

应该：

```
<body><noembed><script type="text/javascript">function setAttributeOnload(object, attribute, val) {if(window.addEventListener) {window.addEventListener("load",function(){ object[attribute] = val; }, false);} else 
</script></noembed> 
```

第 316 行：

```
</div><br /></div></td></td></tr><tr><td colspan="2"></td></tr></table></div></body> 
```

消除`</body>`

第 337 行：

```
 </script></html> 
```

用。。。来代替：

```
 </script></body></html> 
```

请哦，请确保您的标签放置正确！通过简单地将其放入 IDE 中，您可以看到 HTML 标记未正确关闭或结构化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-08T10:16:13.513

org.xml.sax.SAXParseException；行号：8；列号：43；对实体“l”的引用必须以“;”结尾 分隔符。

# jquery-mobile - jquery mobile change页脚中的分页符

> ID：14184756
> 
> 赞同：0
> 
> 时间：2013-01-06T17:29:16.260
> 
> 标签：jquery-mobile

我有一个带有两个页面的 JQuery Mobile 应用程序：`page1`和`page2`

上`page1`，我`page2`通过以下代码将用户重定向到：

```
$.mobile.changePage("/home/page2/", { transition: "slide" }); 
```

`Page2`其中包含三个`data-role="page"`元素。这些页面中的每一个在页脚中都有以下内容：

```
<div data-role="footer" data-position="fixed"> 
    <div data-role="navbar">
        <ul>
          <li><a href="#screen1">Screen 1</a></li>
          <li><a href="#screen2">Screen 2</a></li>
          <li><a href="#" class="ui-btn-active">Screen 3</a></li>
        </ul>
    </div>
</div> 
```

如果我直接导​​航到`/home/page2`选项卡工作正常。但是，当我通过 将用户重定向到 page2 时`changePage()`，选项卡不起作用。什么会导致这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:57:49.853

来自[jQuery Mobile 文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)：

> **在多页文档中链接**
> 
> 请务必注意，如果您从通过 Ajax 加载的移动页面链接到包含多个内部页面的页面，则需要在链接中添加 rel="external" 或 data-ajax="false"。这告诉框架重新加载整个页面以清除 URL 中的 Ajax 哈希。这一点很关键，因为 Ajax 页面使用哈希 (#) 来跟踪 Ajax 历史，而多个内部页面使用哈希来指示内部页面，因此这两种模式之间的哈希会发生冲突。

`changePage()`固有地使用 Ajax 来加载页面，这就是您的问题的原因，因为只会`#screen1`被加载。

如果您的应用程序 UI 和逻辑允许您使用链接进行`Page1`重定向`Page2`：

```
<a href="page2.html" rel="external" data-transition="slide">Go to Page 2</a> 
```

如果您必须以编程方式重定向，请考虑将多页拆分`Page2`为单独的 JQM 页面（例如 page21.html、page22.html、page23.html）并适当地链接它们或在用户单击导航栏选项卡时动态生成您的内容。

# macos - 检索两个文本的部分共同内容

> ID：14184767
> 
> 赞同：2
> 
> 时间：2013-01-06T17:30:14.023
> 
> 标签：macos, unix, sed, grep, diff

我真的不知道如何从以下着手。假设我有两个文件，`file1`并且`file2`. 这些文件由一长串两个条目组成，每个条目具有相同的结构

```
A : some text0
B : some text1

A : some text2
B : some text3

... 
```

和的`A`条目通常相同但有时不同，条目完全不同。如何检索出现 A 条目的所有“AB”条目？`file1``file2``B``file2``file1`

具体例子：

*   样本`file1`

    ```
    msgid "data0"
    msgstr ""

    msgid "data1"
    msgstr ""

    msgid "data2"
    msgstr "" 
    ```

*   样本`file2`

    ```
    msgid "data0"
    msgstr "data0_t"

    msgid "data1"
    msgstr "data1_t"

    msgid "nodata2"
    msgstr "nodata2_t" 
    ```

所以我希望输出是`file3`

```
msgid "data0"
msgstr "data0_t"

msgid "data1"
msgstr "data1_t" 
```

顺便说一句，我知道一些与文件相交的命令，如下所示：

```
for i in `cat file1 | awk {'print $1'}`
do
grep ${i} file2
done 
```

但我需要的是更复杂的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:13:11.547

只需使用`grep`：

```
$ grep "^msgid" file1 | grep -A2 -f - file2
msgid "data0"
msgstr "data0_t"

msgid "data1"
msgstr "data1_t" 
```

`Grep`所有的`msgid`行从`file1`和管道这些到`grep`匹配的行`file2`使用`-A1`上下文选项来显示匹配之后的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:03:43.460

Perl 解决方案：

```
#!/usr/bin/perl
use warnings;
use strict;

my %seen;

$/ = ''; # Paragraph mode
open my $IN1, '<', 'file1' or die $!;
undef $seen{ (split /\n/)[0] } while <$IN1>;

open my $IN2, '<', 'file2' or die $!;
exists $seen{ (split /\n/)[0] } and print while <$IN2>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:06:11.453

如果 awk 被您接受，请尝试以下单行：

```
awk  -F'\\n' -vRS="" 'NR==FNR{a[$1];next;} $1 in a{print $1"\n"$2"\n"}' f1 f2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T17:59:24.483

以下命令适用于您的示例：

```
grep '^msgid' file1 | while read id; do grep -A2 -e "$id" file2; done > file3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T08:07:34.197

对于`po`文件，该[`msgcomm`](http://www.nco.ncep.noaa.gov/pmb/codes/nwprod/gempak/nawips2/os/aix5/share/doc/gettext/gettext_toc.html#TOC111)命令执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T07:13:25.650

这可能对您有用（GNU sed）：

```
sed -n 's|^msgid.*|/^&/{N;N;p}|p' file1 | sed -nf - file2 > file3 
```

# jquery - 在 Richfaces JQuery 的选择器中使用变量值

> ID：14184769
> 
> 赞同：0
> 
> 时间：2013-01-06T17:30:43.583
> 
> 标签：jquery, jsf, richfaces

当表单内的输入字段出错时，我想在 RichFaces 4 项目中实现光标位置。

我已经在同一个表单中使用了一个 JQuery 函数，以便在显示表单时关注第一个输入字段；这很好用，每次我显示表单时，焦点都在第一个输入字段上。

```
<rich:jQuery query="focus().select()" selector="#ESUserEditPanelGrid :input:visible:enabled:first" name="focusFirst"/>
<rich:popupPanel id="ESUserEditPanel" autosized="false" keepVisualState="false" domElementAttachment="parent"
                     width="800" height="400" headerClass="panel-header-class" resizeable="true" onshow="focusFirst();" > 
```

为了实现我的目标，我尝试使用 bean 方法更改选择器关键字，但它不起作用。

```
<rich:jQuery query="focus().select()" selector="#{eSUser.focus}" name="focusFirst"/> 
```

显示表单时似乎没有调用 getFocus() 方法。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T07:13:12.427

也许你可以这样尝试：

```
<rich:jQuery query="focus().select()" name="focusFirst"/>
<rich:popupPanel id="ESUserEditPanel" autosized="false" keepVisualState="false"   
    domElementAttachment="parent" width="800" height="400" 
    headerClass="panel-header-class" resizeable="true" 
    onshow="focusFirst(#{rich:jQuery(eSUser.focus)},{})" > 
```

这应该可以正常工作。该`#{rich:jQuery(eSUser.focus)}`命令将从 bean 中获取您的组件 ID 并评估正确的 jQuery 对象。这将传递给`<rich:jQuery query="focus().select()" name="focusFirst"/>`将执行焦点查询的命名 jQuery 函数。

我知道我有点晚了，但也许将来有人也会有同样的问题:)

亲切的问候， exor298

# jsf - 从操作事件呈现请求目标 Portlet

> ID：14184774
> 
> 赞同：0
> 
> 时间：2013-01-06T17:31:45.670
> 
> 标签：jsf, weblogic, portlet

我有 PortletA 和 PortletB。两者都是 java portlet，在我单击 PortletA 中的按钮后，我需要渲染 PortletB（在我需要将其作为请求目标的意义上渲染 PortletB，即 isRequestTargetted 必须为 true）。请让我知道，如何通过示例从 processAction 方法做到这一点。

```
processAction(ActionRequest req, ActionResponse res) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:41:13.607

听起来您需要通过事件或公共渲染参数进行一些基本的 portlet 通信。我只使用 WebSphere Portal 来完成这些工作，因此我没有信心引导您完成 WebLogic 示例，但是通过快速的 Google 搜索给了我这个文档，您可以阅读它。我想它应该为您提供所需的东西。

[http://docs.oracle.com/cd/E13218_01/wlp/docs81/ipcguide/index.html](http://docs.oracle.com/cd/E13218_01/wlp/docs81/ipcguide/index.html)

# regex - 正则表达式删除带有特殊字符的行

> ID：14184785
> 
> 赞同：-4
> 
> 时间：2013-01-06T17:33:23.080
> 
> 标签：regex

```
 <a class='jdr' href='javascript:void(0);' onClick="return openDiv('jrtp');"></a>            
        <span class="jcn">
            <a href="http://example.com/Ahmedabad/Aptech-N-Power-Hardware-Networking-&lt;near&gt;-Toll-Naka-Opp-Kakadia-Hospital-Below-Sankalp-Reataurant-Bapu-Nagar/079PXX79-XX79-110420173655-D4K6_QWhtZWRhYmFkIENDTkEgVHJhaW5pbmcgSW5zdGl0dXRlcw==_BZDET" title='Aptech N Power Hardware & Networking' >Aptech N Power Hardware & Networkin...</a>
        </span>         

            <section class="jrat">
                <a rel="nofollow" href="http://example.com/Ahmedabad/Aptech-N-Power-Hardware-Networking-&lt;near&gt;-Toll-Naka-Opp-Kakadia-Hospital-Below-Sankalp-Reataurant-Bapu-Nagar/079PXX79-XX79-110420173655-D4K6_QWhtZWRhYmFkIENDTkEgVHJhaW5pbmcgSW5zdGl0dXRlcw==_BZDET#rvw"><span class='s10'></span><span class='s10'></span><span class='s10'></span><span class='s10'></span><span class='s0'></span></a> 
                                        <a class="jrt" href="http://example.com/Ahmedabad/Aptech-N-Power-Hardware-Networking-&lt;near&gt;-Toll-Naka-Opp-Kakadia-Hospital-Below-Sankalp-Reataurant-Bapu-Nagar/079PXX79-XX79-110420173655-D4K6_QWhtZWRhYmFkIENDTkEgVHJhaW5pbmcgSW5zdGl0dXRlcw==_BZDET#rvw">2 ratings</a>
                    <span class="jrt"> |</span>
                                    <a class="rate_this" onclick="_ct('ratethis','lspg');"  href="http://example.com/Ahmedabad/Aptech-N-Power-Hardware-Networking-&lt;near&gt;-Toll-Naka-Opp-Kakadia-Hospital-Below-Sankalp-Reataurant-Bapu-Nagar/079PXX79-XX79-110420173655-D4K6_QWhtZWRhYmFkIENDTkEgVHJhaW5pbmcgSW5zdGl0dXRlcw==_BZDET/writereview">Rate this</a>
            </section>                      
        <section class="jcar">
            <section class="jbc">
                                        <a href="http://example.com/Ahmedabad/Aptech-N-Power-Hardware-Networking-&lt;near&gt;-Toll-Naka-Opp-Kakadia-Hospital-Below-Sankalp-Reataurant-Bapu-Nagar/079PXX79-XX79-110420173655-D4K6_QWhtZWRhYmFkIENDTkEgVHJhaW5pbmcgSW5zdGl0dXRlcw==_BZDET">
                        <img width="83" height="56" border="0" src="http://images.jdmagicbox.com/upload_test/ahmedabad/b4/079pxx79.xx79.110420172948.d4b4/logo/faf3f2409ed7993aaa70f848ab0bb6fb_t.jpg" class="Clogo" />
                    </a>
                                        <!-- <span class="noLogo"></span> -->
                                                        <section class="jrcl">
                    <p>
                        **A/35, Lakhani Chamber, Toll Naka, Opp Kakadia Hospital, Below Sankalp Reataurant, Bapu Nagar, Ahmedabad - 380024**                                                                |<a href="http://example.com/Ahmedabad/Aptech-N-Power-Hardware-Networking-&lt;near&gt;-Toll-Naka-Opp-Kakadia-Hospital-Below-Sankalp-Reataurant-Bapu-Nagar/079PXX79-XX79-110420173655-D4K6_QWhtZWRhYmFkIENDTkEgVHJhaW5pbmcgSW5zdGl0dXRlcw==_BZDET/map"> View Map</a><br>
                                                    </p> 
```

从上面的 XML 数据中，我想提取以下内容 --- A/35、Lakhani Chamber、Toll Naka、Opp Kakadia 医院、Below Sankalp Reataurant、Bapu Nagar、艾哈迈达巴德 - 380024

**我需要帮助来创建正则表达式来查找和删除所有包含特殊字符的行。我正在使用以下正则表达式 ---- /(\<.+?>)/g 请帮助。谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:38:17.307

我想你想删除 HTML 标签的行，所以试试这个：

```
/^<.*>\n/g 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:42:59.620

试试这个

```
/(?<=\*{2})([^<>]*?)(?=\*{2})/g 
```

它匹配`**`.

# eclipse - 在 Eclipse 中调试时如何查看类路径

> ID：14184789
> 
> 赞同：0
> 
> 时间：2013-01-06T17:33:42.803
> 
> 标签：eclipse, debugging, gwt, classpath, classloader

我正在尝试对我在 Eclipse 中编写的基于 GWT 的应用程序进行故障排除。它目前在后端使用 Spring Framework 3.1.1 和 Hibernate 4.1.6。我目前遇到了可怕的“javax.validation.ValidationException：无法找到默认提供程序”的问题，这似乎困扰了很多人，但由不同的问题引起。我已经尝试了使用不同版本的 JSR 303 实现的各种解决方案（例如 Hibernate Validator 的不同版本），但似乎没有什么不同。

调试后，我看到了原因。一旦执行到 javax.validation.Validation.getValidationProviders():317（在 validation-api-1.0.0.GA 中），应用程序（在 Eclipse 内部 Jetty 服务器上运行）尝试读取 META-INF/services/javax .validation.spi.ValidationProvider 资源来自类路径并返回为空。我绝对确定我放置的不同验证器实现（例如 hibernate-validator-4.3.0.Final.jar）具有该资源并且它确实包含一个值（例如 org.hibernate.validator.HibernateValidator），但不是出现在有问题的类加载器中。我在类路径中包含 JAR 的方式是将其添加到项目的构建路径中，这似乎在我执行应用程序时将其添加到 Jetty 运行时。

我的问题是：有没有办法在某个类加载器可见的 Eclipse 调试模式下查看类路径？其次，有谁知道为什么 Hibernate Validator 的资源不是首先在 Validation 使用的类加载器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:37:49.050

webapp 类路径由目录 WEB-INF/classes 和 WEB-INF/lib 中的所有 jar 组成。如果您希望 jar 在运行时可用，则不能将其添加到构建路径，而是添加到 WEB-INF/lib。

在 Eclipse 的 WebContent/WEB-INF/lib 中放置一个 jar 将使其自动成为 webapp 的 buid 路径的一部分，并在运行时可用。

# ios - 在 iPad 4th gen 上测试时 Apple Match O-Linker 错误

> ID：14184792
> 
> 赞同：2
> 
> 时间：2013-01-06T17:34:15.110
> 
> 标签：ios, ipad, build, ios6, ios-simulator

我正在使用 Facebook iOS SDK 的最新版本，添加`AdSupport`和`Accounts`框架`Social`到我的项目以及`FacebookSDK`框架。我的项目针对 iOS 5.1，在模拟器中运行良好，但是当我尝试在我的 iPad 4th gen 上进行测试时，你会得到这个：

```
ld: warning: directory not found for option '-L/Users/8vius/Projects/Work/Fonyk/Fonyk-iPhone/Fonyk/facebook-ios-sdk'

ld: warning: directory not found for option '-F/Users/8vius/Projects/Work/Fonyk/Fonyk-iPhone/../../Desktop/facebook-facebook-ios-sdk-6825350/build'

ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/8vius/Projects/Work/Fonyk/Fonyk-iPhone/Fonyk/libGoogleAnalytics.a for architecture armv7s 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T21:34:00.013

好的，问题是因为 Facebook SDK 没有更新，并且与我当前的测试架构不匹配。要解决此问题，请转到 Project -> Build Settings 并将有效架构更改为 armv7 for `Release`, `Ad-Hoc`and `Debug`（或仅用于您现在需要的架构）。并设置`Build Active Architecture Only`为否

# ios - 为什么 kAUVoiceIOProperty_VoiceProcessingQuality 在 iOS SDK 6 中被标记为“已弃用”？

> ID：14184796
> 
> 赞同：1
> 
> 时间：2013-01-06T17:34:27.623
> 
> 标签：ios, core-audio, audiounit, echo-cancellation

来自`AudioUnitProperties.h`：

```
 @constant      kAUVoiceIOProperty_VoiceProcessingQuality
 @discussion        Scope: Global
                    Value Type: UInt32
                    Access: read/write
                DEPRECATED. Sets the quality of the voice processing unit. Quality values
                are comprised between 0 (lowest) and 127 (highest). 
```

任何想法弃用它的原因是什么以及是否有任何新的东西可以替代它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T05:28:34.500

如果您阅读有关此设置的技术说明 ( [https://developer.apple.com/library/ios/qa/qa1683/_index.html](https://developer.apple.com/library/ios/qa/qa1683/_index.html) )，它会谈到为低功率设备使用较低的值设置。

我认为这已被弃用，因为此时，iOS 支持的所有设备都足够强大，可以处理高质量设置，无需降低值。

# html - HTML 标题 - 标签中没有数字 - 不好的做法？

> ID：14184802
> 
> 赞同：0
> 
> 时间：2013-01-06T17:34:41.787
> 
> 标签：html

我遇到了一个 HTML5 示例，它的标题标签中没有数字，这与普通`<h1>`的 to`<h6>`标签不同。

这是对 HTML 的不正确使用吗？我相信标题标签的这种使用是不正确的，但我确实想验证一下。

```
 <article>
    <h>Subheading</h>
    This is some content
 </article> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T17:36:13.310

HTML中没有`<h>`元素。有一个针对 XHTML 2 的提议，但从未成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T13:26:07.093

他可以在 HTML 中“创建”新标签，然后将其作为选择器放入 CSS 中。但这不是标题。

# javascript - 读取完成后在 FileSystem API 中删除文件？

> ID：14184803
> 
> 赞同：0
> 
> 时间：2013-01-06T17:34:46.740
> 
> 标签：javascript, html, google-chrome, html5-filesystem

所以我一直试图弄清楚这一点。

```
fileEntry.file(function(file){
  var reader = new FileReader();
  reader.onloadend = function (e) {
    var anchor = document.createElement("a");
    anchor.setAttribute('href', "data:text/tsv;charset=UTF-8," + encodeURIComponent(this.result));
    anchor.setAttribute("download", "log.tsv");
    anchor.innerHTML = "Download Log Now";
    document.body.appendChild(anchor);

    alert("Download by clicking the damn link at the bottom.");

    //delete the file?
  }

  reader.readAsText(file);
}); 
```

所以我的问题是如何在文件被读取后删除它？我试过`fileEntry.remove(function(){console.log("File Removed.")});`在评论的地方做，但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-24T20:03:16.317

你可以看看基于[Promise 的 bro-fs](https://github.com/vitalets/bro-fs)，它更干净：

```
fs.init()
  .then(() => fs.readFile('file.txt'))
  .then(content => console.log(content))
  .then(() => fs.unlink('file.txt')) 
```

# python - Python - 在 2.7 上工作，但在 2.6 上出错

> ID：14184804
> 
> 赞同：0
> 
> 时间：2013-01-06T17:34:47.190
> 
> 标签：python, django

我正在 Django 上开发一个 webapp，但在 Python 2.6.6 版本上出现错误，但它在 2.7 上运行良好

```
def check(attribute):
   global rates
   if (attribute.temperature_value < rates[0] or 
       attribute.temperature_value > rates[1] or 
       attribute.heartbeat_value<rates[2] or 
       attribute.heartbeat_value>rates[3]):
      return True
   else:
      return False 
```

Django 调试器显示存在语法错误。

另外，如果我尝试删除该功能，我会在另一行显示另一个错误

```
EOL while scanning string literal (views.py, line 109) 
```

在第 109 行：

```
data = \
  DataPool(
    series=
    [{'options': {
     'source': values},
       'terms': [
        'current_time',
        'temperature_value',
        'heartbeat_value']}
    ]) 
```

谢谢你的帮助。

追溯：

```
File "/home/innovo/.local/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/home/innovo/.local/lib/python2.6/site-packages/django/core/urlresolvers.py" in resolve
  300\.                     sub_match = pattern.resolve(new_path)
File "/home/innovo/.local/lib/python2.6/site-packages/django/core/urlresolvers.py" in resolve
  209\.             return ResolverMatch(self.callback, args, kwargs, self.name)
File "/home/innovo/.local/lib/python2.6/site-packages/django/core/urlresolvers.py" in callback
  216\.         self._callback = get_callable(self._callback_str)
File "/home/innovo/.local/lib/python2.6/site-packages/django/utils/functional.py" in wrapper
  27\.         result = func(*args)
File "/home/innovo/.local/lib/python2.6/site-packages/django/core/urlresolvers.py" in get_callable
  92\.                 lookup_view = getattr(import_module(mod_name), func_name)
File "/home/innovo/.local/lib/python2.6/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: SyntaxError at /
Exception Value: EOL while scanning string literal (views.py, line 114) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:59:16.137

我会这样写：

```
def check(attr):
    temp, pulse = attr.temperature_value, attr.heartbeat_value
    def check_range(value, low, high):
        return value < low or value > high
    return check_range(temp, rates[0], rates[1]) or \
        check_range(pulse, rates[2], rates[3]) 
```

不过，只需要尾随反斜杠来解决您的问题。

不知道你的其他问题是什么。这工作正常：

```
class DataPool(object):
    def __init__(self, series):
        self.series = series

values = list(range(5))

data = \
  DataPool(
    series=
    [{'options': {
     'source': values},
       'terms': [
        'current_time',
        'temperature_value',
        'heartbeat_value']}
    ]) 
```

顺便说一句，这段代码：

```
def check_range(value, low, high):
    return value < low or value > high 
```

也可以是：

```
def check_range(value, low, high):
    return not (low <= value <= high) 
```

# email - 请帮助我通过 WindowsXP Telnet 发送电子邮件

> ID：14184809
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:35:48.767
> 
> 标签：email, telnet

我想使用 Windows XP telnet 向任何电子邮件地址发送电子邮件。我打开命令提示符并在启用 telnet 后键入 telnet。它成功地将我连接到 Gmail、Yahoo 和 Live 的 SMTP 服务器。但是每当我开始发出发送电子邮件的命令时，它都会给我一些错误。

1 - 在命令提示符下写入 telnet 后，命令提示符显示此..

```
Welcome to Microsoft Telnet Client

Escape Character is 'CTRL+]'

Microsoft Telnet> 
```

2 - 然后我输入 open smtp.gmail.com 587

```
Welcome to Microsoft Telnet Client

Escape Character is 'CTRL+]'

Microsoft Telnet> smtp.gmail.com 587 
```

3 - 按回车键向我显示此消息..

```
220 mx.google.com ESMTP e6sm9347529wiz.1 
```

4 - 然后我输入 HELO 并回复此消息...

```
220 mx.google.com ESMTP e6sm9347529wiz.1
HELO
250 mx.google.com at your service 
```

5 - 当我输入 MAIL FROM: myname@gmail.com 时，它会给出错误消息。

```
220 mx.google.com ESMTP e6sm9347529wiz.1
HELO
250 mx.google.com at your service 
MAIL FROM: myname@gmail.com
502 5.5.1 Unrecognized command. e6sm9347529wiz.1 
```

6 - 当我给它我的电子邮件地址而不是上面的地址时，它会给出这个错误消息

```
220 mx.google.com ESMTP e6sm9347529wiz.1
HELO
250 mx.google.com at your service 
MAIL FROM: myname@gmail.com
502 5.5.1 Unrecognized command. e6sm9347529wiz.1
MAIL FROM: shy.girl96@yahoo.com
530 5.7.0 Must issue a STARTTLS command first. e6sm9347529wiz.1 
```

7 - 键入 StartSTL Port 587，它给出了这个消息

```
555 5.5.2 Syntax error. e6sm9347529wiz.1 
```

我被困在这里。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:39:27.403

你不能。通过 GMail 的 587 端口 (SUBMISSION) 发送邮件所需的协议需要 SSL 协商，而手动无法做到这一点。

# database - 使用单独的数据库设置 Git 登台和生产环境的最佳方法是什么？

> ID：14184814
> 
> 赞同：4
> 
> 时间：2013-01-06T17:36:11.767
> 
> 标签：database, git, environment, production, staging

我在 Git 中有 2 个分支 - 暂存和生产。它们部署到同一个 VPS，其中有一个生产数据库和一个单独的临时数据库。这使我们能够在不影响生产环境的情况下暂存新功能。然后，当我们准备好时，我们将数据库更改从登台复制到生产。

设置它的最佳方法是什么，以便暂存分支具有单独的数据库凭据来生产？目前，数据库凭据存储在单个文件中。我一直在考虑使用 gitignore 在两个分支中忽略这个文件并手动编辑它，以便它在每个分支上保持不同。这是最好的做法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:47:16.153

我们使用级联方法：

1.  默认设置在一个通用的“ `config`”文件中。
2.  对于每个开发阶段，它都有自己的配置文件，例如我们有一个`config_prod`和一个`config_dev`.
3.  每个阶段都以不同的（系统）用户身份运行，我们为该用户设置一个环境变量`PROJ_SETTINGS`并将其指向我们需要加载的文件。

然后代码读取默认值，然后用环境变量指向的资源（如果存在）中可用的任何内容覆盖它们。

这个变量的设置由我们的普通 devops/automation 脚本负责。我们有几个优势：

1.  将所有配置置于版本控制之下。
2.  无需修改源即可轻松切换设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:41:29.427

是的 gitignoring database.yml 文件是我在一些组织中使用过的一种方法。

我们通常在源代码管理中保留一个 database.yml.sample 以便更容易。用户只需将其复制到 database.yml 并根据需要进行修改。

# ios - 滚动时 Uitableview 单元格更改值

> ID：14184816
> 
> 赞同：1
> 
> 时间：2013-01-06T17:36:14.820
> 
> 标签：ios, uitableview

下面的代码正在创建对许多字符串的搜索。最初有 5 行，当您到达第 5 行时，它会添加另一行。我不只是直接编辑行，而是加载一个过滤器控制器（另一个视图控制器，当您键入它时，它会为您完成单词）。当用户找到一个单词时，他点击它并返回到这个视图控制器。现在我想用过滤器中的文本填充最初点击的单元格。

我试着早点问，并没有得到任何具体的答案。

我遇到了一个问题，当我滚动时（添加新行后），它开始用表格中已有的信息填充这些行，（而不是保持空白）

请帮助我哪里出错了

```
//global indexpath to remember which cell tapped
NSIndexPath *globalPath;
@interface SearchViewController ()

@end

@implementation SearchViewController

//Load implementation once per launch
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self linkInputTableToDelegate];
    _temporaryResultsArray =[[NSMutableArray alloc]init];
    _flurryArray=[[NSMutableArray alloc]init];
    _numberOfSections=6;
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:NO];
    [InputTable reloadData];

    textFromUserDefaults=[[[HelperMethods alloc]init]getObjectUserDefault:@"textFiltered"];
    [self addTextToFlurryArrayForFlurryAndSavedLists:_textFromUserDefaults];
}

-(void)viewDidDisappear:(BOOL)animated{

}

- (IBAction)searchButtonPressed:(UIButton *)sender {
     self.tabBarController.selectedIndex = 1;
}

//Makes the input table respond to delegate table view methods
-(void)linkInputTableToDelegate{
    _inputTable.dataSource=self;
    _inputTable.delegate=self;
}

-(void)performSearch:(NSString*)text{
    //do search
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    int numberOfRows=_numberOfSections;

    //Rows for iPhone 4
    if ([[UIScreen mainScreen]bounds].size.height==480) {
        numberOfRows=numberOfRows;
        //Rows for iPhone 5
    }else if ([[UIScreen mainScreen]bounds].size.height==568){
        numberOfRows=numberOfRows+1;
    }
    return numberOfRows;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //In reality groups are created with 1 row inside, this is to allow spacing between the rows
    return 1;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCellID = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];

    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
    }

    //Is the cell the same as the one clicked when going to ingredient filter
    BOOL cellIndexPathSameAsSelected=[self isCellIndexSameAsPreviousClicked:indexPath];

    cell.textLabel.textColor=[UIColor blackColor];
    if (cellIndexPathSameAsSelected && _textFromUserDefaults!=nil) {

        if (![cell.textLabel.text isEqualToString:_textFromUserDefaults]) {

            cell.textLabel.text=_textFromUserDefaults;
            [self performTextSearch:_textFromUserDefaults];
        }

    }
    return cell;
}

//Compares the previous clicked cell with the cell now selected
-(BOOL)isCellIndexSameAsPreviousClicked: (NSIndexPath*)cellPath{

    if (cellPath.row == globalPath.row && globalPath.section==cellPath.section) {
        return YES;
    }
    else{
        return NO;
    }
}

- (void)updateTableViewWithExtraRow :(NSIndexPath*)rowSelected{
    NSLog(@"number of sections =%i",_numberOfSections);
    if (rowSelected.section == _numberOfSections) {
        _numberOfSections ++;
    }
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellText = [tableView cellForRowAtIndexPath:indexPath].textLabel.text;
    [[[HelperMethods alloc]init]saveObjectToUserDefaults:cellText :@"textFiltered"];
    globalPath = indexPath;
    [self updateTableViewWithExtraRow:indexPath];
}

-(void)addTextToFlurryArrayForFlurryAndSavedLists:(NSString*)text{
    if ([_flurryArray count]==0 &&[text length]>0) {
        [_flurryArray addObject:text];
    }
    for (int i=0;i<[_flurryArray count];i++) {
        NSString *textInArray=[_flurryArray objectAtIndex:i];
        if (![textInArray isEqualToString:text]) {
            [_flurryArray addObject:text];
        }

    }
    NSLog(@"Total number of saved items = %i",[_flurryArray count]);
}

// Dispose of any resources that can be recreated.
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:42:43.973

我对代码有几个反应：

1.  关于正确使用这些`UITableViewDataSource`方法的一些观察，特别`numberOfRowsInSection`是 、`numberOfSectionsInTableView`和`cellForRowAtIndexPath`：

    *   这些确实应该由一些模型数据结构（例如 a `NSMutableArray`）驱动，仅此而已；

    *   这些方法应该是无状态的。他们不应该依赖某些`NSString`实例变量的值，例如`_textFromUserDefaults`)，而是始终`NSMutableArray`根据参数的值在模型结构中查找值`indexPath`。您根本无法对何时`cellForRowAtIndexPath`被调用做出任何假设。这很可能解释了您的重复值。

    *   `UITableView`除了回应询问之外，这些都不应该做任何事情。例如，您`cellForRowAtIndexPath`正在调用`performTextSearch`. 除了返回单元格之外，它真的不应该做任何事情。

    *   您`cellForRowAtIndexPath`当前具有条件逻辑，并且仅在某些条件成立时才更新单元格。因为单元格被重用，所以您真的要确保无论如何都初始化单元格。你不能保证当你得到它时单元格是空白的，也不能保证以前的内容就是那个`indexPath`. 因为单元格被重复使用，它可能用于完全不同的行。这也可能导致您的重复条目。

2.  关于主视图控制器和细节视图控制器的交互，有比通过`NSUserDefaults`. 例如，当您启动详细信息视图控制器时，您可以将所需的信息传递给它。完成后，它应该调用主视图控制器中的方法来更新主视图中的数据。为此，主视图控制器应符合您自己创建的某些协议。如果您看到我通过聊天分享的示例，您可以看到它的样子。无论如何，通过在主视图控制器中有一些委托方法，详细视图控制器在完成时调用它，这消除了`viewDidAppear`用于控制主表视图更新的相当脆弱的技术。

3.  您可能需要考虑使用“编辑”（它允许您删除，也可能编辑特定行）和“添加”按钮，例如 Xcode 提供的标准“主-详细信息”模板。这里有许多标准约定可能比拥有一组空白单元格然后您可以点击更好。显然，您的用户体验完全取决于您，但您始终可以考虑是否存在您可能采用的现有、熟悉的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:50:27.510

Rob 的反馈很好。从更广泛的意义上讲，您不能依赖 a 中的单元格`UITableView`来保存它们的数据。为了提高效率，它将随意创建、使用和破坏细胞，并使用`cellForRowAtIndexPath`它来弄清楚它们应该是什么样子。您需要拥有自己的一组数据来描述每个单元格的值，而不是测试单元格中的内容，并且只需根据`indexPath`. 我建议将所有单元格信息存储在`NSMutableArray`包含`NSString`s 或必要时更复杂的内容中。将单元格添加到数组时，很容易设置默认值。然后`cellForRowAtIndexPath`可以只访问数组，而不是尝试基于当前单元格的自己的逻辑。

# javascript - 在不影响用户体验的情况下加载大量图片

> ID：14184822
> 
> 赞同：0
> 
> 时间：2013-01-06T17:37:09.940
> 
> 标签：javascript, jquery, html

这基本上是一个设计问题。

**前言**

我有一个显示缩略图列表的网页。图像的数量可以是任何数量，可能是数百个。

我需要做的是这个吗？

*   获取总缩略图的数量。
*   获取每张图片的网址。
*   将每个缩略图加载到一个框 (div) 中，并将每个框动态添加到可滚动容器 div。
*   用户应该能够尽快与盒子进行交互。

我在页面中发生了其他 AJAX 调用。

默认方法，将 设置`src`为每个框并将其添加到容器中。加载停止时，图像显示。问题是，所有这些图像加载都会占用网络，我的其他 AJAX 调用可能会超时，这是我不能允许的。此外，用户应该看到页面加载完成（加载栏不应该显示活动）。

**我的解决方案**

我提出的解决方案是这样的：

*   使用本地图像作为空间持有者。
*   将所有框的src设置为本地图像。
*   将第一张图片的 src 更改为 web url。
*   当`onload`图像触发时，更改下一张图像的 src，依此类推。

优点：

*   一次只能加载一张图片。
*   用户将能够与盒子进行交互。

缺点：

*   一次只有一张图像可能会浪费带宽（一次 5 张图像呢？）
*   如果用户滚动到最后会发生什么，在所有其他图像加载之前，图像不会显示。

**你的意见**

我需要有关如何改进此解决方案的专家意见。

要求：

1.  一些带宽应该可用于其他 AJAX 调用
2.  用户应该能够与页面交互。

问题：

这个解决方案还有其他问题吗？

这是跨浏览器吗？

我是否正确地说这不会影响其他 AJAX 调用？

# ruby-on-rails - force_ssl 适用于 http://www.domain.com 但不适用于 http://domain.com

> ID：14184832
> 
> 赞同：1
> 
> 时间：2013-01-06T17:38:13.140
> 
> 标签：ruby-on-rails, nginx, unicorn

[http://www.domain.com](http://www.domain.com)转发到[https://www.domain.com](https://www.domain.com) 但[http://domain.com](http://domain.com)不转发到[https://domain.com](https://domain.com)

我正在使用 nginx 和 unicorn，有没有办法在 Rails 中解决这个问题？还是需要更改 nginx/unicorn 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:17:31.960

您可以使用[https://github.com/stjhimy/rack-www](https://github.com/stjhimy/rack-www)将所有请求重定向到 www 域。

```
config.middleware.use Rack::WWW, :www => true 
```

# javascript - 未知键名时无法访问 JSON 中的元素

> ID：14184833
> 
> 赞同：1
> 
> 时间：2013-01-06T17:38:14.293
> 
> 标签：javascript, json

我正在尝试从 Github 的 API 获得的数据中检索 Github 上 gists 的文件名。我正在使用 javascript 来访问数据。

可以在此处找到示例结果：[https](https://api.github.com/users/blaercom/gists) ://api.github.com/users/blaercom/gists 。我还复制了以下数据的缩短版本。

```
{
  ...
  id: "4468273",
  files: {
    firstpost.md: {
      type: "text/plain",
      filename: "firstpost.md",
      size: 16,
      language: "Markdown"
    }
  }
  ...
} 
```

我一直在尝试很多事情，但似乎无法访问文件名。这是因为“文件”对象不是一个列表，而是一个键值对，其中键标识符与文件名本身匹配。

我尝试过的事情包括

```
filename = files[0]['filename']
filename = files[0].filename
filename = files['filename'] 
```

坦率地说，唯一有效的方法是变体，`filename = files['firstpost.md']['filename']`但这是无效的，因为我事先无法知道文件名。

我确信可以访问文件名，但已经花了很长时间测试不同的方法。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:43:43.923

您可以使用`for (var key in object) {}`，这是一个使用您的[api 调用](https://api.github.com/users/blaercom/gists)中的数据的示例：

```
var filenames = [];

for (var filename in data[0].files) {
   filenames.push(filename);
}

console.log(filenames); // ["firstpost.md"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:56:57.200

`json`这是一个使用您的回复的真实示例

```
var obj='your json data';
var fileNames=[];
for(var i in obj[0]['files'])
{
    var fileName=obj[0]['files'][i]['filename'];
    fileNames.push(fileName);
}
document.write(fileNames[0]); // firstpost.md 
```

[**例子**](http://jsfiddle.net/xwXUv/1/)。

**更新：**

[**另一个**](http://jsfiddle.net/xwXUv/2/)使用`jsonp/script`.

```
<script src="https://api.github.com/users/blaercom/gists?callback=myCallback"></script> 
```

回调函数

```
function myCallback(o)
{
    var obj=o.data;
    var fileNames=[];
    for(var i in obj[0]['files'])
    {
        var fileName=obj[0]['files'][i]['filename'];
        fileNames.push(fileName);
    }
    document.write(fileNames[0]);  // firstpost.md
} 
```

# php - 有没有办法让 PHP 变量在另一个范围内

> ID：14184839
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:38:56.867
> 
> 标签：php

我正在尝试使用我`<?php ?>`在另一个中的变量`<?php ?>`

例如，

```
 <?php 
      $helloWorld = "Hello World";
    ?>

    ... some HTML

        <?php 
       function echoHello(){
           echo $helloWorld;
       }
    ?> 
```

变量在第二部分不是变量。如何使变量可见，以便稍后我想执行一些 PHP 脚本时访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:42:53.293

它应该是可见的，假设您仍在同一个页面加载，其中一个或另一个不在函数内，以及许多其他因素只能通过查看完整代码来评估。

但只是快速猜测一下，您是否尝试过查看源代码？如果浏览器在源代码中显示您的原始 PHP 代码，那么服务器根本不会解析 PHP，它只是默默地隐藏为无效的 HTML 标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:37:50.547

如果您在页面部分中回显变量，它将不会显示。
你需要调用函数来运行它，所以在下面放**echoHello();**
如果两者都在同一页面上，它应该可以正常工作

# cron - Cron 日志记录问题

> ID：14184840
> 
> 赞同：0
> 
> 时间：2013-01-06T17:39:04.040
> 
> 标签：cron

由于某种原因，我找不到有关如何设置 Cron 命令的文档。这是我当前使用 GoDaddy 的 cron 作业管理器工具的 Cron 命令。它每小时运行两次。

/web/cgi-bin/php5 "$HOME/~path-to-file~/my-function.php" > "$HOME/~path-to-file~/my-function.log"

我想要做的是获得每次 Cron 运行的完整日志 - 输出、时间戳等。我正在尝试调试这个脚本，但我在没有某种错误日志记录的情况下被卡住了。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:00:49.633

您将标准输出定向到指定的文件 by `>`，但标准错误被发送到遗忘。添加`2>&1`到命令的末尾以将任何错误附加到同一文件。

```
/web/cgi-bin/php5 /path/to/php > /path/to/logfile.log 2>&1 
```

# javascript - 表单文本字段变量在 Javascript 中显示未定义

> ID：14184841
> 
> 赞同：1
> 
> 时间：2013-01-06T17:39:06.420
> 
> 标签：javascript, arrays, forms, variables, undefined

这是我的第一篇文章，无论如何我会直奔主题。

我有一个表单，当用户输入他们的名字时，Javascript 会将值保存到全局变量“ch_name”中。当我在站点上的任何位置通过警报访问此变量时，它始终显示我输入的正确值。但是，它仅适用于警报，当我尝试使用始终显示为未定义的变量来引用用户时。

我已经尝试重新排序代码，以防它没有正确加载并且这也没有产生任何结果。我开始怀疑我是否完全引用了它，因为我对 JavaScript 还是很陌生。

您可能会发现我的代码一团糟，但这就是我所拥有的。

```
var ch_name; //my global variable

var data = new Array(); //I've taken a snippet out of an array of 8.
data[0] = '<p>Question 1</p>' + ch_name + "\n" + //ch_name is referenced on this line.
'<button onclick="results1()">Click Me</button>' + "\n" + 
'<button onclick="results2()">Click Me</button>' + "\n" +
'<button onclick="results3()">Click Me</button>';

function charName(form) { //This is the code that changes the global variable ch_name.
ch_name = document.nameform.user.value;
ranData = Math.floor(Math.random() * data.length);
document.getElementById("placeholder").innerHTML = data[ranData];
} 
```

html片段：

```
<form NAME="nameform" method="GET">
<p>Enter your character name:</p> <input type="text" name="user" value="" />
    <input type="button" value="Start" onClick="charName(this.form)"/>
</form>
<div id="placeholder"></div> 
```

通过任何地方的警报引用 ch_name 会给我正确的结果，页面加载时为空白，输入字符串后它会给出正确的名称。但是每当我通过数组变量引用它时，它都会显示一个未定义的。这不是完整的代码，但我确定变量名等没有冲突。我已经扫描了好几次，我确定这只是我是个白痴。

有解决办法吗？我已经准备好将整个代码完全放在 ch_name 后面，以专注于页面的其他区域。

感谢您的阅读和任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:50:44.017

我认为您的问题是，当您的`data`数组生成时，`ch_name`没有值，所以它显示为空白。即使您更改`ch_name`，`data`也不会使用正确的值重新生成该值。

对此的解决方案可能是使用一个函数，该函数可以在您更改全局字符名称时`regenerate_data`重新生成数据数组。`data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:13:37.370

数据不会改变你的思维方式。

我认为对你来说最好的选择是`data`用函数替换 Array。

现在，`ch_name`每次运行函数时都会动态创建参数。即每次按下按钮时，都会更新数据。

如何更改页面中的数据？

```
var ch_name; //my global variable
function charName(form) { //This is the code that changes the global variable ch_name.
    ch_name = document.nameform.user.value;
    ranData = Math.floor(Math.random() * data.length);
    document.getElementById("placeholder").innerHTML = getranData(ranData);
 }

function getranData(num){
   if(num==0)
          return '<p>Question 1</p>' + ch_name + "\n" + //ch_name is referenced on this line.
          '<button onclick="results1()">Click Me</button>' + "\n" + 
          '<button onclick="results2()">Click Me</button>' + "\n" +
          '<button onclick="results3()">Click Me</button>';
  else if (num==1) ; ///...and so on
} 
```

# iphone - 离线转发地理编码

> ID：14184842
> 
> 赞同：2
> 
> 时间：2013-01-06T17:39:16.337
> 
> 标签：iphone, ios, map, core-location

在我基于位置的 iPhone 应用程序中，我喜欢让它在没有网络可用性的情况下也能工作。我有一个普通的谷歌地图。该应用程序适用于前向地理编码，因此当输入城市或国家/地区时，我需要经度和纬度。这可以离线工作吗？如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:10:46.727

你可以在这里找到一个数据库：

[http://dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)

转到 CSV/Zip GeoLite City 数据库。它有一个可追溯到 2009 年的数据存档。确保在底部下载最新的（GeoLiteCity_20130101.zip）。您也可以选择 gzip 或二进制数据版本，但我不知道二进制数据的确切格式。它在网站上的某个地方进行了解释。

CSV 存档有两个 CSV 文件。GeoLiteCity-Location.csv 有一个相当大的城市数据库（您可能希望将其转换为能够比数组更快地搜索的格式，并希望占用更少的空间）。它包含全球近 400,000 个城市的国家、地区（例如州）、城市、纬度和经度。如果您还需要，另一个文件包含这些城市的 IP 范围。

# php - Wordpress：重力形式：根据输入变化添加更多电子邮件通知

> ID：14184845
> 
> 赞同：2
> 
> 时间：2013-01-06T17:39:48.120
> 
> 标签：php, forms, wordpress, email, plugins

我在重力表单中的表单中添加了一个隐藏状态字段，这样我就可以在客户填写我的表单后跟踪他们的订单在哪里。

我需要的是：当我将仪表板中的该字段更改为新状态时，我希望重力表单/wordpress 根据我能够制作的新模板向该人发送新电子邮件。

前流量：

1.  用户填写表格（他们已经收到 1 封电子邮件通知，附带重力表格）

2.  我通过编辑条目更改仪表板中的状态（下一个是新的）

3.  Wordpress/Gravity 自动向该用户发送一封新电子邮件（基于我能够编辑的模板，就像第一封电子邮件通知一样）

等等更多的状态变化......

感谢您提供任何可能的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T22:13:17.733

我现在通过向电子邮件通知添加条件简码并更改模板中电子邮件的主要内容来完成此操作。

文档在这里找到：http: [//www.gravityhelp.com/documentation/page/Shortcodes#Conditional_Shortcode](http://www.gravityhelp.com/documentation/page/Shortcodes#Conditional_Shortcode)

# css - 样式化浏览器原生视频控件

> ID：14184846
> 
> 赞同：24
> 
> 时间：2013-01-06T17:39:51.953
> 
> 标签：css, cross-browser, custom-controls, html5-video

是否可以跨浏览器样式化浏览器原生视频的控件，例如来自 HTML5 视频标签的视频？

[我不明白这是否可能，除了这篇文章](http://dev.opera.com/articles/view/custom-html5-video-player-with-css3-and-jquery/)，我找不到任何东西，但它似乎使用了 Javascript。

我想让控制栏适合视频宽度；正如您从所附图像中看到的那样，控制栏超出了视频宽度。

![默认播放器控件](../Images/4ce15f701149a7f6bc3beb0df96fcedf.png)

上图的 HTML

```
 <div class="video centered-content">
    <a class="circle-canvas close-video" href="javascript:void(0)" id="video-close" rel="tooltipTOP" data-original-title="close">X</a>
        <video width="63%" height="60%" id="video" class="video" controls>
            <source src="<?php echo base_static_url();?>media/video.mp4">
            <source src="<?php echo base_static_url();?>media/video.ogv">
            <source src="<?php echo base_static_url();?>media/video.webm">
        </video>
    </a>
</div> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-06T17:47:46.720

您无法设置浏览器的默认控件集的样式，但您可以使用 (JavaScript) Media API 来构建您自己的控件集，当然您可以以任何您喜欢的方式设置样式。

查看[使用 HTML5 多媒体组件 - 第 3 部分：自定义控件](http://www.adobe.com/devnet/html5/articles/html5-multimedia-pt3.html)，它向您展示了如何做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-02T07:35:42.210

这是一个很好的例子来设置原生播放器控件的样式（刚刚在 Chrome 中测试过）：[https ://codepen.io/BainjaminLafalize/pen/GiJwn](https://codepen.io/BainjaminLafalize/pen/GiJwn)

要更改播放器控制栏的宽度：

```
video::-webkit-media-controls-panel {
  width: 40px;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-23T23:29:17.340

您可以使用 shadow DOM 在某些浏览器中设置原生控件的样式。在调试检查器设置中启用 shadow dom：

[http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)

[HTML5 视频控件 - 变大？](https://stackoverflow.com/questions/19281487/html5-video-controls-make-larger)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-27T12:40:27.543

您可以设置 shadow DOM 的样式，但您需要单独查看每个浏览器，并且浏览器更新可能会破坏您的样式。

我建议看一下[MediaElement.js](https://www.mediaelementjs.com/)，它为您提供了可以使用 CSS 设置样式并且已经针对可访问性进行优化的跨浏览器控件。

或者，如果您只需要一些控件，请自行构建：[https ://developer.mozilla.org/en-US/docs/Web/Guide/Audio_and_video_delivery/Video_player_styling_basics](https://developer.mozilla.org/en-US/docs/Web/Guide/Audio_and_video_delivery/Video_player_styling_basics)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-16T19:05:47.767

由于您无法在每个浏览器（即 Firefox）中设置控件样式，因此使用自定义控件是可行的方法。

自己编写是可能的，但需要一些时间并且不具备其他一些控件所具有的功能。

我推荐[Flowplayer](https://flowplayer.com/)，它非常易于使用和风格。它还具有其他有用的功能，例如允许您控制视频的加载方式（这对我们非常有用，因为 AWS S3 对文件的每次观看收费）。

# c - Mingw32 将 Linux 交叉编译到 Windows - 配置：错误：缺乏适当的 OpenGL 支持

> ID：14184849
> 
> 赞同：0
> 
> 时间：2013-01-06T17:40:18.743
> 
> 标签：c, linux, windows, opengl, cross-compiling

> **可能重复：**
> [Mingw32 将 Linux 交叉编译到 Windows - 配置：错误：缺乏适当的 OpenGL 支持](https://stackoverflow.com/questions/14185789/mingw32-cross-compiling-linux-to-windows-configure-error-lacking-proper-open)

我正在尝试使用 Mingw32 将 3D Linux 游戏的源代码交叉编译到 Windows 中，其中包括 OpenGL。我的开发盒装有 Fedora 12 和我能想象到的所有工具都需要交叉编译。该项目将在Linux for Linux 下配置make 和install 没有问题。但是当我尝试 mingw32-configure 时，我得到一个与 OpenGL 相关的错误。

这是命令行输出的片段：

```
checking GL/gl.h usability... yes
checking GL/gl.h presence... yes
checking for GL/gl.h... yes
checking for glEnable in -lGL... no
configure: error: lacking proper OpenGL support 
```

我在其他线程或网络上没有发现任何有用的东西，因为没有人直接解决这个问题。有没有人遇到过这个？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:07:54.763

您在使用 automake 时遇到了一个有趣的问题。有两个问题。

一方面，配置脚本假定 OpenGL 库仅命名为“GL”，就像 Linux 上的情况一样。在 Windows 上，名称是“opengl32”（也适用于 64 位版本）。

另一个问题是，configure 脚本试图对 OpenGL 进行运行时检查，实际上是通过构建测试程序来在系统上执行的，每个测试程序都链接到正在测试的一个函数，然后执行它们。这当然会失败，因为在 Linux 系统上没有 Windows OpenGL 实现（除非在 WINE 中运行它）。

您需要重写您的配置脚本以使用“open32”作为库名称，并且对于测试程序，获取仅带有软件光栅器的 Windows 的 Mesa 构建是有意义的，以便测试可执行文件实际上通过测试。

* * *

在旁注中，我想指出我讨厌 GNU 自动工具

# javascript - 隐藏特定网址的页面操作

> ID：14184851
> 
> 赞同：0
> 
> 时间：2013-01-06T17:40:23.853
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在为 reddit.com 构建一个 chrome 扩展，我正在使用`page action`它。现在我只想`page_action icon`对特定的 url 格式可见，即

```
http://www.reddit.com   [allowed]
http://www.reddit.com/r/*   [allowed]
http://www.reddit.com/r/books/comments/*   [not allowed] 
```

所以，正如我上面提到的，我不希望我的扩展页面操作图标对`3rd case`涉及的`comments url of redddit`.

目前我正在使用下面的代码`background.js`来实现这一点：

```
function check(tab_id, data, tab){
    if(tab.url.indexOf("reddit.com") > -1 && tab.url.indexOf("/comments/") == -1){
        chrome.pageAction.show(tab_id);
    }
};
chrome.tabs.onUpdated.addListener(check); 
```

我还在我的中添加了以下行`manifest.json`以禁用评论页面上的扩展

```
 "exclude_matches": ["http://www.reddit.com/r/*/comments/*"], 
```

所以，我的问题是这是禁用和隐藏特定页面/网址的扩展的正确/理想方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:23:07.477

为什么不是 Zoidb——我的意思是，正则表达式？

```
var displayPageAction = function (tabId, changeInfo, tab) {
    var regex = new RegExp(/.../); //Your regex goes here
    var match = regex.exec(tab.url); 
    // We only display the Page Action if we are inside a tab that matches
    if(match && changeInfo.status == 'complete') {
      chrome.pageAction.show(tabId);
    }
};

chrome.tabs.onUpdated.addListener(displayPageAction); 
```

关于方法，我认为使用`onUpdated.addListener`是正确的方法。作为一种好的做法，尝试仅在加载选项卡时显示您的页面操作，除非您的应用程序要求另有说明。

您可以使用[这个工具](http://www.gskinner.com/RegExr/)来生成您的正则表达式，如果您需要帮助，请随时再次询问，我们将帮助您组装您需要的正则表达式。

# python - 如何在不知道它是否存在的情况下访问上游（命名空间）模块实例详细信息？

> ID：14184854
> 
> 赞同：0
> 
> 时间：2013-01-06T17:40:58.330
> 
> 标签：python, logging, namespaces, python-2.7, global-variables

对 Leenert Regebro 的回答：显然我的直觉是正确的，这是不可能的。而且很明显，因为两个小时内只有一个答案。也感谢所有的评论。

我的 Google-foo 让我失望了。

我正在编写一个自定义异常库作为模块，用于单个发布者下的多个项目。我可能在其他项目中没有发言权，或者我可能有发言权。所以它可以被我和其他人使用。“和其他人”是这里的问题。在我的异常模块中，将有特定的功能用于使用该`logging`模块将回溯等输出到日志文件。这对我来说很好，因为我使用该`logging`模块。

但是如果其他人（不使用`logging`）使用异常库，我需要跳过日志记录部分。try...except 解决了这个问题，但是如果他们正在使用`logging`呢？在这种情况下，我需要能够确定他们的日志记录方案（控制台/文件/流、文件名等）。这样我就可以创建一个子记录器，它将写入他们的文件（或控制台或你有什么） ):

```
<snip>
their_logger = THE_FUNCTION_I_CANNOT_FIGURE_OUT_HOW_TO_WRITE()
temp_var = their_logger.name + ".ExceptionLogger"
myLogger = logging.getLogger(temp_var)
</snip> 
```

显然，我可以创建一个单独的类或函数来实例化我的模块并让它接收 type 的参数`logging.logger`，但如果可能的话，我更愿意白痴证明这一点。

我什至无法检查 a`global`或`globals()`dict 是否有我知道的值，因为其他程序员可能不会使用它。

有没有办法做到这一点？（假设我的库已被导入，并且可能不是由顶级应用程序导入......）我个人从未尝试从命名空间中的上游获取数据以在没有显式传递的情况下在较低命名空间中可用，我怀疑它甚至可能，但是那里有很多程序员，有人做到了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:48:30.183

默认情况下包含可选配置是个坏主意。不要默认添加日志记录细节，然后通过 try/except 进行某种疯狂的猜测以排除它，而是将这部分代码放入一个函数中，并从你的代码中显式调用它。

你不能傻傻的事情。事实上，你拥有的魔法和隐藏的逻辑越多，它就越不防白痴，很快它就会变得防智力，变得很难理解魔法。

因此，请按照您的想法制作一个函数并传入记录器。

# matlab - 如何在不使用“for”或“while”或“repeat”函数的情况下重复？

> ID：14184856
> 
> 赞同：0
> 
> 时间：2013-01-06T17:41:12.987
> 
> 标签：matlab

有没有可以重复一段代码给定次数的函数？

例如：

```
t= 0; 
while (t< 10) 
  if x==2 
    x=1 
  else 
    x=3; 
  end 
end 
```

我如何使用另一个函数重写这个函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T17:46:40.600

递归函数可以为您执行此操作（假设您不能使用：for,while,repeat）。

[http://www.matrixlab-examples.com/recursion.html](http://www.matrixlab-examples.com/recursion.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:32:20.023

或者，如果在一次迭代中执行的代码**独立**于其他迭代的结果，您可以使用[`arrayfun`](http://www.mathworks.it/it/help/matlab/ref/arrayfun.html)or [`cellfun`](http://www.mathworks.it/it/help/matlab/ref/cellfun.html)。

例如

```
 fun = @(x) disp(['hello ' , num2str(x)]);
 arrayfun(fun,1:5); 
```

返回

```
 hello 1
 hello 2
 hello 3
 hello 4
 hello 5 
```

* * *

*就我个人而言*，我确实喜欢这些结构，因为我发现它们就像在 C++ 中一样*富有表现力。*`std::for_each`

尽管如此，事实证明它们比被 Matlab *JIT*淘汰的 naive-loop 对应物要慢（在 SO 上有几个关于这个问题的 Q/A）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T10:11:06.373

如果您将代码以矢量格式放置，Matlab 会自动为您“重复”代码：

```
x_vector = round(2*rand(10,1)) %Your x input
idx = (x_vector==2)
x_vector(idx) = 1;
x_vector(~idx) = 3; 
```

# android - 检查 splitBarWhenNarrow 是否为真 - 以编程方式 - ActionBarSherlock

> ID：14184857
> 
> 赞同：2
> 
> 时间：2013-01-06T17:41:25.060
> 
> 标签：android, actionbarsherlock

我需要检查是否`Activity`有底部`ActionBar`（Split ActionBar）。如何以编程方式检查它？

我有`android:uiOptions="splitActionBarWhenNarrow"`一个`Activity`，如果`Menu`更大或在. 我必须根据图标在s（顶部/底部）上的位置对图标执行一些颜色更改。`ActionBar``Device Screen``Landscape mode``Menu``ActionBar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:46:04.857

简单的。您使用 ActionBarSherlocks`abs_split_action_bar_is_narrow`布尔值。

现在您可以执行以下操作：

```
boolean isActionBarSplitted = getResources().getBoolean(R.bool.split_action_bar);
if(isActionBarSplitted){
      // it's a phone -> split ActionBar
}
else{
     // it's a tablet -> no split ActionBar
} 
```

# android - Android：在 SQLite 中使用 UUID 作为主键

> ID：14184861
> 
> 赞同：35
> 
> 时间：2013-01-06T17:41:58.137
> 
> 标签：android, performance, sqlite, primary-key, uuid

我的应用需要与其他应用用户同步（在自己的设备上）。我还想支持离线编辑，当用户连接到互联网时，它会同步到其他协作用户。

因此，用户 A 更改（当他离线时）一些数据（换句话说，他会更新数据库条目）或将新记录添加到数据库中。当用户 A 连接到 Internet 时，所有更改和新记录都会传递给其他协作用户。因此，用户 B 将获得更改/更新，并可以将它们插入/更新到用户 B 的本地设备数据库中。

但我需要确保数据库条目的 id 在整个系统中是唯一的。因此我需要使用 UUID 之类的东西。

我的问题：在 android sqlite 数据库表中使用 UUID (String / Varchar) 作为主键而不是自动递增的整数是不是一个坏主意？

我猜使用字符串（UUID 有 36 个字符）作为主键会出现性能问题。

我猜索引 uuids 而不是整数需要更长的时间（比较字符串与比较整数）。我还猜想，当我使用 UUID 时，每次插入新的数据库记录/条目时，数据库都需要重新索引主键列，因为它们的主键索引不再按排序顺序（这将是我使用整数自增主键，因为以后的每条记录都加在最后，因为新的自增主键始终是目前为止最大的数，所以索引会自动排序）。我还需要做的是加入 2-3 张桌子。我还猜想在 JOINS 上比较字符串而不是整数会减慢数据库查询的速度。

但是我看不到实现这种协作同步系统的任何其他可能性，所以我必须使用 UUID，对吗？

另一种可能性是使用整数自增主键并使用第二列 uuid。因此，要在用户本地设备上工作，我会将此主键（整数）用于 JOINS 等，而我会使用 uuid 列与其他用户同步。

你们如何看待这种方法，或者您认为它是否需要做很多工作，因为您不会期望直接使用 UUID 作为主键会出现重大的性能问题？

还有其他建议吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-06T17:50:56.657

> 在 android sqlite 数据库表中使用 UUID (String / Varchar) 作为主键而不是自动递增的整数是不是一个坏主意？

我能想到的唯一确定的问题是您将无法使用`CursorAdapter`它及其子类来显示该表上的查询结果。`CursorAdapter`在 中需要一个唯一的整数`_id`列`Cursor`，并且大概您不会拥有其中之一。您必须创建自己的适配器，也许是扩展`BaseAdapter`的，来处理它。

> 我猜使用字符串（UUID 有 36 个字符）作为主键会出现性能问题。

可能，但如果它变成设备大小的数据库的重大问题，我会有些惊讶。

> 但是我看不到实现这种协作同步系统的任何其他可能性，所以我必须使用 UUID，对吗？

您的网络协议需要某种 UUID。据推测，您的数据库中将需要该 UUID。该 UUID 是否需要成为表的主键，我不能说，因为我不知道您的架构。

> 另一种可能性是使用整数自增主键并使用第二列 uuid。因此，要在用户本地设备上工作，我会将此主键（整数）用于 JOINS 等，而我会使用 uuid 列与其他用户同步。

正确的。您将拥有一个 UUID->local 整数 ID 映射表，在网络协议中使用 UUID，并主要使用本地整数 ID 保留本地数据库。这是否会显着提高性能（特别是考虑到数据库模式复杂性的增加），我不能说。

> 你们如何看待这种方法，或者您认为它是否需要做很多工作，因为您不会期望直接使用 UUID 作为主键会出现重大的性能问题？

恕我直言，要么运行一些性能测试，以便获得一些具体的可比数据，要么只在您的数据库 I/O 看起来缓慢时才担心它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-08T01:21:25.207

UUID 作为二进制和文本的一组性能结果可以在一些相关的 UUID/SQLite 问题中找到：[https ://stackoverflow.com/a/11337522/3103448](https://stackoverflow.com/a/11337522/3103448)

根据结果​​，二进制和字符串 UUID 在 SQLite 中都可以在索引时高效地创建和查询。一个单独的权衡是人类可读的字符串是否比二进制文件大小的较小数据大小更受欢迎。

# android - NullPointerException 有时

> ID：14184865
> 
> 赞同：1
> 
> 时间：2013-01-06T17:42:22.050
> 
> 标签：android, nullpointerexception, try-catch

我的应用程序中有一个功能，当用户单击按钮时，它将显示最近的办公室。功能在瑞典部分地区有效，但在瑞典北部无效。我使用 try-catch 语句，我将捕获空指针异常。当我关闭网络和位置时，我收到错误消息，但在瑞典北部，没有消息，应用程序崩溃了。我的代码在下面。onFindOfficeClick() 是一个独立的函数。我怎么解决这个问题？我尝试调试但未能命中错误...不知道该怎么办。我从 xml 文件中获取所有坐标。有人有什么建议吗？

```
private void onFindOfficeClick() {
    try {
        LocationManager lm = (LocationManager)getSystemService(Service.LOCATION_SERVICE);
        List<String> providersName = lm.getProviders(false);
        if(providersName.size()>0){
            Location location = lm.getLastKnownLocation(providersName.get(0));
            float results [] = new float [1];
            final double longitude = location.getLongitude();
            final double latitude = location.getLatitude();
            final int officeCount = mOfficesInfo.length;
            double minDistance = 0;
            int officeNum = 0;
            for(int i=0; i<officeCount; i++){
                Location.distanceBetween(latitude, longitude,
                        mOfficesInfo[i].getLatitude(), mOfficesInfo[i].getLongitude(), results);
                if(i==0){
                    minDistance = results[0];
                } else if(results[0]<minDistance){
                    minDistance=results[0];
                    officeNum = i;
                }
            }
            int countryPosition = mCountries.indexOf(mOfficesInfo[officeNum].getCountry());
            mCountrySpiner.setSelection(countryPosition);
            mFindedOfficeName = mOfficesInfo[officeNum].getOfficeName();
            mOfficesSpiner.setSelection(officeNum);
        }
    }
    catch (NullPointerException e)
    {
        Toast.makeText(getApplicationContext(),"check your network and GP:s connections",Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:11:53.847

在调用之前进行空检查

```
LocationManager lm = (LocationManager)getSystemService(Service.LOCATION_SERVICE);

if(lm!=null){
   lm.getProviders(false);.
 } 
```

也可能是

```
 Location location = lm.getLastKnownLocation(providersName.get(0)); 
```

在 location 变量中为您提供 null ，因此只需修改您的代码并在从位置获取纬度和纬度之前进行 null 检查。

```
 if(location!=null){

      final double longitude = location.getLongitude();
      final double latitude = location.getLatitude();
 } 
```

因为在代码中捕获 NullPointerException 不是一个好习惯。

# c# - 声明为 .Where() 中使用的变量的 Func 使我的应用程序崩溃

> ID：14184866
> 
> 赞同：2
> 
> 时间：2013-01-06T17:42:31.597
> 
> 标签：c#, linq, lambda, extension-methods, func

我有这样的事情：

```
Func<Thread, bool> tmpFunc = thread => true;
threads = Threads.Where(tmpFunc).(...) 
```

现在，当我做`Threads.Where(thread => true).(...)`的一切都很好，但是在我的应用程序中使用变量时会`.Where()`崩溃。为什么？难道我做错了什么？

好的，这是重现错误的代码：

```
var threads = context.Categories
    .Where(c => c.Name == variable)
   .Select(c => new
   {
       threads = c.Threads
           .Where(tmpFunc)
           .OrderByDescending(t => t.DateCreated)
           .Skip(threadsToSkip)
           .Take(threadsPerPage)
           .Select(t => new
           {
               t,
               CategoryName = t.Category.Name,
               AuthorName = t.Author.UserName, 
               t.Posts.Count,
               LastPost = t.Posts
                   .OrderByDescending(post => post.DateCreated)
                   .Select(p => new{p.Author.UserName, p.DateCreated})
                   .FirstOrDefault()
            }),
            c.Threads.Count
    }).Single(); 
```

它给我的错误是**内部 .net 框架数据提供程序错误 1025**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:58:18.820

我的假设是没有自定义函数到 sql 的翻译，并且函数在投影中使用。虽然我希望“不存在...的 sql 翻译”异常。

要解决此问题，您可以尝试将您的 func 声明为

```
Expression<Func<Thread, bool>> tmpFunc = thread => true;
threads = Threads.Where(tmpFunc).(...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T17:59:04.087

尝试使用 an`Expression`而不是`Func`直接：

```
Expression<Func<Thread, bool>> tmpFuncExpr = thread => true; 
```

虽然`Linq2Objects`会对 感到满意，但`Func`不会`Linq2Sql`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T18:09:34.093

当您使用实体框架时，任何传递给 EF 的 IQueryable 的谓词都必须是`Expression<Func<>>.`

检查这个答案[stackoverflow.com/questions/11990158 ...](https://stackoverflow.com/questions/11990158/internal-net-framework-data-provider-error-1025)

# ruby - Ruby csv 读取 csv 文件中的第一行

> ID：14184872
> 
> 赞同：1
> 
> 时间：2013-01-06T17:43:20.817
> 
> 标签：ruby, csv, fastercsv

> **可能重复：**
> [Ruby 查看 csv 数据](https://stackoverflow.com/questions/14114129/ruby-view-csv-data)

在我的应用程序中，我正在读取 csv 文件，但为什么在视图中我只有第二条、...、n 条记录，而没有第一行？这是代码：

```
def common_uploader
    require 'csv' 
    @csv = CSV.read("/#{Rails.public_path}/uploads_prices/"+params[:file], {:encoding => "CP1251:UTF-8", :col_sep => ";", :row_sep => :auto, :headers => :false})
  end 
```

:headers => :false 我写...但是为什么我没有从 csv 文件中得到第一行？（红宝石 1.9.3）

那么，如何获得第一行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:44:42.340

应该是`false`，不是`:false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:40:37.047

您也可以`[0,20]`在 csv 上使用 -method：

```
require 'csv' 
csv = CSV.parse(DATA.read, {
  :col_sep => ",", 
  :headers => false
  }
)
csv[0,10].each{|line|
  p line #-> first 10 lines
}
__END__
00,a,b,c
01,a,b,c
02,a,b,c
03,a,b,c
04,a,b,c
05,a,b,c
06,a,b,c
07,a,b,c
08,a,b,c
09,a,b,c
10,a,b,c
11,a,b,c
12,a,b,c
13,a,b,c
14,a,b,c
15,a,b,c
16,a,b,c 
17,a,b,c
18,a,b,c
19,a,b,c
20,a,b,c 
```

但这会读取所有行`csv`- 它只是一个受限制的输出。

# asp.net - 当用户选择一条记录时，将 GridView 的单元格数据发送到页面

> ID：14184875
> 
> 赞同：1
> 
> 时间：2013-01-06T17:43:41.547
> 
> 标签：asp.net

想象一下，当用户在 GridView 中选择行时，我使用下面的代码打开页面（单击）

```
<asp:TemplateField>
        <ItemTemplate>
            <a href="Page1.aspx">Show</a>
        </ItemTemplate>
    </asp:TemplateField> 
```

是否可以将 GridView1.Rows[...][...].Text 与`QueryString`Page1.aspx一起发送

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:14:57.653

是的，它是可能的。您需要绑定您的数据

Page1.aspx?myData=<%#Eval('your coulmn or property name')%>

# php - JQuery Remove Click 函数仅删除最近的调用

> ID：14184880
> 
> 赞同：0
> 
> 时间：2013-01-06T17:44:14.147
> 
> 标签：php, jquery

我一直在尝试编写一个阅读列表，您可以在其中添加您喜欢的文章，然后单击顶部的小 x 将它们从列表中删除。我使用 JQuery .click 从数据库中删除故事，将其从列表中删除。但是，当我尝试一次删除多个故事时，它只会删除最后一个点击的故事。我不知道它可能是什么。我认为这可能与全局变量和局部变量有关，但我不知道从哪里开始。

这是一些 HTML，一个类似于我删除的 div：

```
<li id="arrayorder_146">
<div class="reading_list drop-shadow lifted">
<div class="reading_list_container">
<a class="deletefromrl" data-storyid="146" data-parent="arrayorder_146">x</a>
<p class="reading_list_story">
<a class="rlstory" href="" data-storyid="146">iSteal: Apple Products Cause NYC Crime Wave
</a></p></div></div></li> 
```

这是 JQuery 函数：

```
 $(document).ready(function(){ $(function() {
        $('a.deletefromrl').click(function(){
            $(this).closest('li').fadeOut('slow');
            var order = $('#list ul').sortable("serialize") + '&update=update' + '&id=' + $(this).attr('data-storyid'); 
            $.post("deletefromReadingList.php", order, function(theResponse){
                    $("#response").html(theResponse);
                }); 
```

这是 php deletefromReadingList：

```
 <?php 
 require_once('compress.php');
  require_once('startsession.php');
 require_once('admin_start_session.php');
 require_once('db_connect_variables.php');
 require_once('input_variables.php');

 $array = $_POST['arrayorder'];
 $id = $_POST['id'];

if ($_POST['update'] == "update")
 {
$user_id = $_SESSION['user_id'];
$admin_id = $_SESSION['admin_id'];

$listorder = '';
$i=0;

foreach ($array as $idval) 
{
    if(($idval == $id) && ($i == 0))
    {
        $i++;
        continue;
    }
    $listorder = $listorder . $idval . ',';
}

$listorder = substr_replace($listorder ,"",-1);

if(!empty($user_id) && empty($admin_id))
{
    $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
        $query = "UPDATE reading_list SET listorder = " . $listorder . " WHERE user_id = " . $user_id;
        mysql_query($query) or die('Error, insert query failed');
        echo 'Saved until 9AM Tomorrow';
}
else if(empty($user_id) && !empty($admin_id))
{
    $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
        $query = "UPDATE reading_list SET listorder = '" . $listorder . "' WHERE admin_id = " . $admin_id;
        mysqli_query($dbc, $query) or die('Error, insert query failed');
        echo 'Saved until 9AM Tomorrow';
}
else
{
    $_SESSION['readinglist'] = $listorder;
    setcookie('readinglist', $listorder, mktime(6, 59, 59, date('m'), (date('d')+1), date('y')));    // expires at midnight
    echo 'Saved until 9AM Tomorrow';
}
  }

  ?> 
```

# android - 在 android 中缺少 myProject.R 文件

> ID：14184886
> 
> 赞同：0
> 
> 时间：2013-01-06T17:44:41.747
> 
> 标签：android, eclipse

似乎我错过了 R 文件，这是一个常见错误，通常我已经通过清理项目、使用 android 工具修复项目属性并重新启动 Eclipse 来解决。现在我已经安装了新的 android 开发者工具 eclipse，在导入项目后，我在 eclipse 中出现了这个错误：

```
Errors occurred during the build.
Errors running builder 'Android Pre Compiler' on project 'MyProject'.
java.lang.NullPointerException 
```

并且没有生成 R 文件，因此它丢失了。该项目是一个图书馆项目。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:53:00.283

有时，如果您在 XML 文件中有错误，它会阻止项目正确构建，并且资源 (project.R) 文件将无法正确创建。您还需要确保您正在导入资源文件，而不是来自 android.R 的资源文件

如果您更改了项目构建目标或 minSdkVersion，您的布局文件之一中可能包含您正在使用的 SDK 不支持的 XML 节点，这将阻止其构建。这也值得检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:00:48.707

清理项目，因为该项目可能无法找到资源的名称，这真的很糟糕，我在添加新图像时经常遇到这个问题..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:50:16.310

转到项目并点击清洁。这应该重新生成您的 R.java 文件。还要摆脱任何 import android.R.* 语句，然后按照所述进行清理。

否则，布局下的 XML 资源可能没有正确的命名约定，或者可能有一些大写字母。

尝试将它们更改为小写并确保您的 layout.xml 文件不包含错误。

# tidesdk - 从一个平台构建 Win、Mac 和 Linux 软件包

> ID：14184887
> 
> 赞同：0
> 
> 时间：2013-01-06T17:44:53.737
> 
> 标签：tidesdk

是否有可能/计划在一个平台内构建 Win/Mac/Linux 软件包？一个名为 RunRev LiveCode 的 IDE 允许部署到多个平台，但它只支持 HyperCard 语言，afaik 在 Qt 中也是可能的

[Zotero Standalone Builder](https://github.com/zotero/zotero-standalone-build)可用于将[Webapp XUL Wrapper](https://github.com/neam/webapp-xul-wrapper)捆绑到 Mac、Windows 和 Linux 的可分发包中

可以将它与 TideSDK 一起使用吗？

一个 Kickstarter 项目为 AppJS 启动，维护者想要启动一个云服务来为云中的所有平台部署应用程序，然后只需下载 exe、dmg 或 linux 包

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:46:18.740

无法使用 TideSDK 在同一平台上构建应用程序。一个服务平台即将到来，它将解决这个问题，让每个人都更容易开发。我们将在此发布公告。

# vhdl - Pipeline和Multiplexer 2:1的平行体育场

> ID：14184891
> 
> 赞同：0
> 
> 时间：2013-01-06T17:45:33.863
> 
> 标签：vhdl, pipeline, cpu-architecture, fpga

我有一个 Spartan-E3 FPGA，我正在实现一个具有 4 个阶段的（并行）管道，如下所示：http: [//i.imgur.com/6CQNk.png](http://i.imgur.com/6CQNk.png)

两个阶段“T3”是相同的。T1、T2 和 T4 以 50MHz “运行”，而 T3 以 25MHz 运行（如图所示，偏移 180°）。

在行为模拟中它工作正常，结果是正确的。当我尝试在我的 FPGA 上合成这个项目时，就会出现问题。特别是我收到这些警告（当然产生的结果是错误的）：

```
WARNING:LIT:175 - Clock buffer is designated to drive clock loads. BUFGMUX
symbol "physical_group_clk_2/Clock_DCM/CLKFX_BUFG_INST" (output signal=clk_2)
has a mix of clock and non-clock loads. Some of the non-clock loads are
(maximum of 5 listed):
Pin I0 of pipeline/mux3/o<65>1
Pin I0 of pipeline/mux3/o<64>1
Pin I0 of pipeline/mux3/o<17>
Pin I0 of pipeline/mux3/o<18>
Pin I0 of pipeline/mux3/o<20>
WARNING:Route:455 - CLK Net:clk_2 may have excessive skew because 
0 CLK pins and 66 NON_CLK pins failed to route using a CLK template. 
```

其中“clk_2”是时钟 25MHz。这是“我的多路复用器”：stage_4_in <= stage_3_1_out when clk_2='1' else stage_3_2_out;

基本上我不能用时钟信号驱动多路复用器选择。那么，我该怎么做呢？我必须这样做：如果 CLOCK 25MHz 高，则多路复用器输出必须是最高的；否则它必须是第二个（底部）。我不知道该怎么做。

顺便说一下，这是 DCM 配置：

```
CLK_FEEDBACK => "1X",
CLKDV_DIVIDE => 2.0,
CLKFX_DIVIDE => 4,
CLKFX_MULTIPLY => 2,
CLKIN_DIVIDE_BY_2 => FALSE,
CLKIN_PERIOD => 20.000,
CLKOUT_PHASE_SHIFT => "NONE",
DESKEW_ADJUST => "SYSTEM_SYNCHRONOUS",
DFS_FREQUENCY_MODE => "LOW",
DLL_FREQUENCY_MODE => "LOW",
DUTY_CYCLE_CORRECTION => TRUE,
FACTORY_JF => x"C080",
PHASE_SHIFT => 0,
STARTUP_WAIT => TRUE 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:45:30.740

消除 25MHz 时钟 - 从 50MHz 时钟运行整个批次，在偶数和奇数 50MHz 周期期间启用时钟，以用于您希望以 25MHz 运行的阶段。（当前的 25MHz 时钟可能会用作时钟使能信号）

# c - 为什么 qsort 中的比较器必须以这种方式？

> ID：14184892
> 
> 赞同：2
> 
> 时间：2013-01-06T17:45:39.377
> 
> 标签：c, void-pointers, qsort

根据 C 参考，标准库中提供的 qsort 函数具有以下形式

```
void 
qsort ( void * base, size_t num, size_t size, int ( * compar ) ( const void *, const void * ) ); 
```

我的问题是为什么比较函数必须在表单中有参数，`const void *`这是什么意思`const void *`

另一个问题是，如果一个函数接受形式为 的参数`const void *`，它可以改变这个指针指向的值吗？

例子：

```
static int double_a_number(const void * val){
    *(int *)val = *(int *)val * 2;
    return 0;
} 
```

这真的会使变量 val 加倍吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:47:14.233

> 为什么比较函数必须有形式的参数`const void *`

因为这是 C 中最通用的类​​型。请记住，它`qsort`可用于对**任何**类型的数组进行排序。

> 另一个问题是，如果一个函数接受形式为 的参数`const void *`，它可以改变这个指针指向的值吗？

并非没有抛弃`const`. 这通常是一个坏主意（这肯定是出乎意料的，而且还可能导致未定义的行为或崩溃）。在比较器功能中肯定没有任何意义！

# php - 使用 HTML 和 PHP 上传文件

> ID：14184894
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:45:54.143
> 
> 标签：php, html

我正在使用 HTML5 多文件属性来允许用户一次上传多个图像。它工作得很好，除了大图像。我知道如何在我的 html 中更改 MAX_FILE_SIZE 值。我将其更改为“5000000”。现在，我 iPhone 上的照片很大，从 2.0 MB 到 5.0 MB 不等。当我尝试制作多个这些大图像时，它不起作用。现在，使用多个较小尺寸的图像，它可以正常工作。我知道这不是与我的表单关联的 MAX_FILE_SIZE，因为这些大图像将单独上传。所以，我的问题是，一次上传的文件的总大小是否有限制？如果是这样，我该如何改变它？是 PHP 还是 HTML？

另外，我可以在上传时重新调整这些照片的大小，这样它们就不会那么大了吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:33:09.153

在服务器端搜索 php.ini 并查找 **upload_max_filesize**和**post_max_size**并将它们的值增加到获取图像所需的任何值，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T17:50:24.130

尝试更改`upload_max_filesize`和`post_max_size`ini 设置，它也可能是您的 Web 服务器中的限制设置。关于调整大小 - 另一个问题看[imagick thumbnailimage 方法](http://php.net/manual/ru/imagick.thumbnailimage.php)

# android - 付款后应用内购买崩溃

> ID：14184899
> 
> 赞同：0
> 
> 时间：2013-01-06T17:46:09.167
> 
> 标签：android

我写了一个应用内购买测试应用程序来学习如何在我制作的应用程序中实现它。我改编了谷歌提供的 TrivialDrive 示例中的代码。但它不起作用，在我朋友付款后应用程序崩溃了。代码看起来像这样

```
public class MainActivity extends Activity {

    String TAG = "AppPurchaseTest";
    IabHelper mHelper;
    boolean mIsPremium = false;
    static final String SKU_PREMIUM = "premium";
    static final int RC_REQUEST = 10001;

 // User clicked the "Upgrade to Premium" button.
    public void onUpgradeAppButtonClicked(View arg0) {
        Log.d(TAG, "Upgrade button clicked; launching purchase flow for upgrade.");
   //     setWaitScreen(true);
        mHelper.launchPurchaseFlow(this, SKU_PREMIUM, RC_REQUEST, mPurchaseFinishedListener);
    }

    //this is not working

 // Callback for when a purchase is finished
    IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
            Log.d(TAG, "Purchase finished: " + result + ", purchase: " + purchase);

            int duration = Toast.LENGTH_SHORT;
            if (result.isFailure()) {
                // Oh noes!
             //   complain("Error purchasing: " + result);
             //   setWaitScreen(false);
                Toast.makeText(getBaseContext(), "Fail :(", duration).show();
                return;
            }

            Log.d(TAG, "Purchase successful.");

            if (purchase.getSku().equals(SKU_PREMIUM)) {
                // bought the premium upgrade!
                Log.d(TAG, "Purchase is premium upgrade. Congratulating user.");
              //  alert("Thank you for upgrading to premium!");
                mIsPremium = true;

                Toast.makeText(getBaseContext(), "Successo: adesso sei premium", duration).show();
                Button test = (Button) findViewById(R.id.test);
                test.setVisibility(View.INVISIBLE);
              //  updateUi();
             //   setWaitScreen(false);
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        String base64EncodedPublicKey = null;

        // compute your public key and store it in base64EncodedPublicKey
        mHelper = new IabHelper(this, base64EncodedPublicKey);

        mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
            public void onIabSetupFinished(IabResult result) {
               if (!result.isSuccess()) {
                  // Oh noes, there was a problem.
                  Log.d(TAG, "Problem setting up In-app Billing: " + result);
               }            
                  // Hooray, IAB is fully set up!  
            }
         });
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();

        if (mHelper != null) {
            Log.d(TAG, "mHelper doesn't = null ");
        mHelper.dispose();
        mHelper = null;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);

        // Pass on the activity result to the helper for handling
        if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
            // not handled, so handle it ourselves (here's where you'd
            // perform any handling of activity results not related to in-app
            // billing...
            super.onActivityResult(requestCode, resultCode, data);
        }
        else {
            Log.d(TAG, "onActivityResult handled by IABUtil.");
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

你能看出哪里不对吗？我忘记了什么？

本教程[https://developer.android.com/google/play/billing/billing_integrate.html](https://developer.android.com/google/play/billing/billing_integrate.html) 看起来更简单，但我不明白如何实现它，是否有示例或其他东西可以让我看到它是如何实现的实施的？我只需要简单升级到高级购买

很难让它工作，因为我不能亲自测试它，每次我测试它我都会赔钱:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T08:18:45.927

花了很长时间才弄清楚我的项目，但您必须了解您的 mPurchaseFinishedListener 是在非渲染线程上调用的，并且在您的应用程序 onResume() 被调用之前（只需检查 IabHelper 代码。

因此，如果您尝试在那里进行任何渲染，它可能会崩溃，因为渲染上下文尚未恢复。

在您的情况下，很可能是：

```
Toast.makeText(getBaseContext(), "Successo: adesso sei premium", duration).show(); 
```

会崩溃，同样适用

```
Button test = (Button) findViewById(R.id.test); 
```

如果您检查琐事示例，则 textButton 可见性设置为 true，但按钮本身是在 onCreate() 方法中分配的类属性。

让我知道这是否有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T03:46:46.313

Per TrivialDrive 您还需要（这将解决它）：

```
 // We're being destroyed. It's important to dispose of the helper here!
    @Override
    public void onDestroy() {
        super.onDestroy();

        // very important:
        if (mBroadcastReceiver != null) {
            unregisterReceiver(mBroadcastReceiver);
        }

        // very important:
        Log.d(TAG, "Destroying helper.");
        if (mHelper != null) {
            mHelper.disposeWhenFinished();
            mHelper = null;
        }
    } 
```

# hibernate - hibernate无法在sql server中创建表

> ID：14184901
> 
> 赞同：0
> 
> 时间：2013-01-06T17:46:14.163
> 
> 标签：hibernate, hibernate-mapping

我正在尝试通过休眠进行连接，但是如果我通过手动在 sql server 中创建表然后选择、插入和删除查询工作正常，则无法创建表，我在 hibernate.cfg.xml 中使用以下设置

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
        <property name="hibernate.connection.url">jdbc:sqlserver://shokumar-idc\JDESSELOCAL;databaseName=scart</property>
        <property name="hibernate.connection.username">JDE</property>
        <property name="connection.password">JDE</property>
        <property name="connection.pool_size">1</property>
        <property name="hibernate.dialect">org.hibernate.dialect.HSQLDialect</property>
        <property name="show_sql">true</property>
        <property name="hibernate.hbm2ddl.auto">create</property>

        <mapping class="dao.tables.User" />
        <mapping class="dao.tables.Product" />
        <mapping class="dao.tables.Orderitems" />
        <mapping class="dao.tables.Order" />
        <mapping class="dao.tables.Category" />
        <mapping class="dao.tables.Config" />
        <mapping class="dao.tables.Adminuser" />
        <mapping class="dao.tables.Cities" />
    </session-factory>
</hibernate-configuration> 
```

# html - 改变 CSS -transition 属性的行为

> ID：14184914
> 
> 赞同：0
> 
> 时间：2013-01-06T17:47:19.643
> 
> 标签：html, css, animation

我正在使用 CSS 过渡属性来为网页设置动画。到目前为止，基本上我得到的是：当我在主页（`class="content"`仅）并单击“关于我”链接（`class="secondary"`）时，关于我的页面以良好的方式关闭，但如果我转到另一个链接`class="secondary"`， “关于我”页面将首先上升，然后另一个页面将下降。而且我不想要这种行为。我想要另一个页面，在前一个页面`class="secondary"`前面只有 false 。

[我试图在http://jsfiddle.net/FMRBf/2](http://jsfiddle.net/FMRBf/2/)上尽力而为

# HTML

```
 <li><a href="#home" id="nav-home">Home</a></li>
 <li><a href="#another-page" id="nav-portfolio">Portfolio</a></li>
 <li><a href="#about" id="nav-about">About Me</a></li>
</br>
<div id="home" class="content">
   <h2>Home</h2>
</div>

<div id="about" class="secondary">
   <div class="content">
    <h2>About Me</h2>
   </div>
</div>

<div id="another-page" class="secondary">
   <div class="content">
    <h2>Another Secondary Page</h2>
   </div>
</div> 
```

# CSS

```
.content {
  background-color: rgba(255,233,0,0.8);
  height: 100%;
  margin-top: 5%;
}

.secondary {
    min-width: 100%;
    height: 98%;
    background: #000;
    position: absolute;
    z-index: 2;
    overflow-y: auto; 
    overflow-x: hidden; 
    margin-top: -100%;

  -webkit-transition: all .8s ease-in;
    -moz-transition: all .8s ease-in;
    -o-transition: all .8s ease-in;
    transition: all .8s ease-in;
}
.secondary:target {
    margin-top: 0px;
    background-color: rgba(255,233,0,1);
} 
```

# jquery - 添加到内联 html 样式属性的函数在 IE 中不起作用

> ID：14184917
> 
> 赞同：0
> 
> 时间：2013-01-06T17:47:52.830
> 
> 标签：jquery, css, replace

我目前正在使用此功能添加到 posternew imgframe div 的样式属性：

```
$(function () { $('.posternew .imgframe').each(function () { 
    $(this).attr("style", $(this).attr("style").replace("background:", ""));
    $(this).attr('style', 'background:url(images/new.png),' + $(this).attr('style')); 
    });  
}); 
```

这在 Chrome 和 Firefox 中完美运行，但在 IE 9 或 10 下不起作用。我尝试对其进行稍微不同的格式化，但无济于事。关于为什么这在 IE 中不起作用的任何想法？

这会在 Chrome 和 Firefox 中创建这个 html：

```
<div class="imgframe" style="background:url(images/new.png), url(images/boxart/blah.jpg);"></div> 
```

但在 IE 中显示：

```
<div class="imgframe"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:50:19.257

那个怎么样？

```
$(".posternew .imgframe").css("background-image", "url('images/new.png')"); 
```

无需解析`style`属性，只需使用[`.css()`](http://api.jquery.com/css/).

# python - 找不到要安装的 openpyxl 的任何可下载文件

> ID：14184919
> 
> 赞同：0
> 
> 时间：2013-01-06T17:48:08.560
> 
> 标签：python, openpyxl

我有一个要求，我必须处理 excel 来存储网页数据，但找不到任何可下载的包来使用 Python 2.7。

[打开pyxl](http://packages.python.org/openpyxl/index.html)

在这方面有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:08:52.613

尝试通过 mercurial 存储库获取源代码：

```
hg clone https://bitbucket.org/ericgazoni/openpyxl 
```

进而

```
cd openpyxl/
python2.7 setup.py install 
```

对你有用吗？

# ruby - 路由错误 Rails，不要理解

> ID：14184924
> 
> 赞同：0
> 
> 时间：2013-01-06T17:49:10.190
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

都是正确的，但错误仍然存​​在，我把所有的代码都给你看到了

```
Routing Error

No route matches {:controller=>"posts", :user_id=>#<Post id: 1, title: "sa", content: "sasa", created_at: "2013-01-06 00:25:03", updated_at: "2013-01-06 00:25:03", image_file_name: nil, image_content_type: nil, image_file_size: nil, image_updated_at: nil, user_id: 1>, :action=>"edit"}
Try running rake routes for more information on available routes. 
```

我的路线是：

```
 get "painel/index"

 resources :posts

  resources :user  do
    resources :posts,:comments

      end 
```

我的模型是：

```
user.rb

  attr_accessible :email, :password, :password_confirmation,:username
  has_many :posts
  has_many :comments

post.rb

  attr_accessible :content, :title  ,:image
  has_many :comments
  belongs_to :user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:12:17.290

1）检查'rake routes'
2）使用您在路由列表中获得的url或路径。这将解决你的错误

如果这不能解决您的错误，
请粘贴您的路线文件和返回错误的 link_to 调用。

# objective-c - 在不相交的集合数据结构中实现路径压缩？

> ID：14184925
> 
> 赞同：2
> 
> 时间：2013-01-06T17:49:18.870
> 
> 标签：objective-c, algorithm, data-structures, disjoint-sets, union-find

这是我对不相交集的 Objective-C 实现。- 正数指向父母。- 负数表示根数和子数。（所以它们每个都从 -1 开始脱节。） - 索引充当我正在分组的数据。似乎工作正常......只是有几个问题。

1.  find：如何压缩路径？因为我不是递归地做，我是否必须存储路径并在找到根目录后再次循环设置？

2.  加入：我是基于儿童数量而不是深度加入！？我想这是不对的。如果深度相等，我是否需要在加入期间做一些特别的事情？

谢谢。

不相交集.h

```
@interface DisjointSet : NSObject
{
    NSMutableArray *_array;
}

- (id)initWithSize:(NSInteger)size;
- (NSInteger)find:(NSInteger)item;
- (void)join:(NSInteger)root1 root2:(NSInteger)root2;

@end 
```

不相交集.m

```
#import "DisjointSet.h"

@implementation DisjointSet

- (id)initWithSize:(NSInteger)size
{
    self = [super init];
    if (self)
    {
        _array = [NSMutableArray arrayWithCapacity:size];
        for (NSInteger i = 0; i < size; i++)
        {
            [_array addObject:[NSNumber numberWithInteger:-1]];
        }
    }
    return self;
}

- (NSInteger)find:(NSInteger)item
{
    while ([[_array objectAtIndex:item] integerValue] >= 0)
    {
        item = [[_array objectAtIndex:item] integerValue];
    }
    return item;
}

- (void)join:(NSInteger)root1 root2:(NSInteger)root2
{
    if (root1 == root2) return;

    NSInteger data1 = [[_array objectAtIndex:root1] integerValue];
    NSInteger data2 = [[_array objectAtIndex:root2] integerValue];
    if (data2 < data1)
    {
        [_array setObject:[NSNumber numberWithInteger:data2 + data1] atIndexedSubscript:root2];
        [_array setObject:[NSNumber numberWithInteger:root2] atIndexedSubscript:root1];
    }
    else
    {
        [_array setObject:[NSNumber numberWithInteger:data1 + data2] atIndexedSubscript:root1];
        [_array setObject:[NSNumber numberWithInteger:root1] atIndexedSubscript:root2];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:16:38.097

对于查找操作，无需存储路径（与您的 分开`_array`）或使用递归。这些方法中的任何一种都需要 O(P) 存储（P = 路径长度）。相反，您可以只遍历路径两次。第一次，你找到了根。第二次，您将所有子项设置为指向根。这需要 O(P) 时间和 O(1) 存储。

```
- (NSInteger)findItem:(NSInteger)item {
    NSInteger root;
    NSNumber *rootObject = nil;
    for (NSInteger i = item; !rootObject; ) {
        NSInteger parent = [_array[i] integerValue];
        if (parent < 0) {
            root = i;
            rootObject = @(i);
        }
        i = parent;
    }

    for (NSInteger i = item; i != root; ) {
        NSInteger parent = [_array[i] integerValue];
        _array[i] = rootObject;
        i = parent;
    }

    return root;
} 
```

对于合并操作，您希望存储每个根的等级（这是其深度的上限），而不是每个根的后代计数。存储每个根的等级允许您将较短的树合并到较高的树中，这保证了查找操作的 O(log N) 时间。仅当要合并的树具有相同的等级时，等级才会增加。

```
- (void)joinItem:(NSInteger)a item:(NSInteger)b {
    NSInteger aRank = -[_array[a] integerValue];
    NSInteger bRank = -[_array[b] integerValue];
    if (aRank < bRank) {
        NSInteger t = a;
        a = b;
        b = t;
    } else if (aRank == bRank) {
        _array[a] = @(-aRank - 1);
    }

    _array[b] = @(a);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:02:42.480

您绝对应该使用递归来实现路径压缩。我什至不会考虑尝试以非递归方式进行。

实现 disjoin-set 数据结构应该非常容易，并且可以用几行代码完成。将其从伪代码转换为任何编程语言非常非常容易。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Disjoint-set_data_structure#Disjoint-set_forests)上找到伪代码。（不幸的是，我无法阅读 Objective-C，所以我无法真正判断您的代码是否正确）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:18:15.883

是的。要在没有递归的情况下实现最高祖先压缩，您需要维护自己的列表。让一个通过链来获取指向需要更改其父指针的集合的指针，并学习根。然后进行第二次传递以更新必要的父指针。

递归方法也在做同样的事情。第一遍是递归的“结束”，它将需要父指针更新的集合存储在程序堆栈上。随着递归展开，第二遍是相反的。

我与那些说递归方法总是最好的人不同。在合理数量的系统（尤其是嵌入式系统）中，程序堆栈的大小是有限的。在某些情况下，在查找之前连续执行了许多联合。在这种情况下，对于 n 个元素，父链的大小可以是 O(n)。这里通过递归折叠可能会炸毁堆栈。由于您在 Objective C 中工作，因此这可能是 iOS。我不知道那里的默认堆栈大小，但是如果您使用递归，则值得一看。它可能比你想象的要小。 [本文](https://stackoverflow.com/questions/4286287/stack-size-of-secondary-threads-significant-differences-between-debug-and-relea)暗示辅助线程为 512K，主线程为 1Mb。

**迭代的、恒定的空间替代方案**

实际上，我写这篇文章的主要原因是指出，对于 n 次摊销操作，您仍然会得到 O(log^* n) - 只是比折叠效率低，而且仍然有效 O(1) - 如果你只这样做因子二压缩：在查找操作中，更改父指针，使它们指向祖父母而不是根。这可以通过在常量存储中迭代来完成。 [普林斯顿大学的这个讲座](http://www.cs.princeton.edu/~rs/AlgsDS07/01UnionFind.pdf)讨论了这个算法，并用 5 行 C 循环实现了它。见幻灯片 29。

# vba - 不明白为什么 WinHTTP 不对某些 HTTPS 资源进行身份验证

> ID：14184926
> 
> 赞同：2
> 
> 时间：2013-01-06T17:49:26.250
> 
> 标签：vba, authentication, https, winhttp

我将非常感谢任何可能帮助我解决问题的帮助。

从 Excel VBA 代码中，我需要从 HTTPS 站点[https://redmine.itransition.com/](https://redmine.itransition.com/)下载和解析 CSV 文件。我尝试使用 WinHTTP 来获取文件。但是，我不明白为什么身份验证不起作用。这是一段相关代码：

```
TargetURL = "https://redmine.itransition.com/projects/pmct/time_entries.csv"
Set HTTPReq = CreateObject("WinHttp.WinHttpRequest.5.1")
HTTPReq.Option(4) = 13056 ' WinHttpRequestOption_SslErrorIgnoreFlags 13056: ignore all err, 0: accept no err
HTTPReq.Open "GET", TargetURL, False
HTTPReq.SetCredentials "UN", "PW", 0
HTTPReq.send 
```

返回以下响应（仅列出某些字符串）：

```
Content-Type: text/html; charset=utf-8
Status: 406
X-Runtime: 5 
```

但是，如果我在成功使用手动身份验证后从 Firefox cookie 发送“Cookie”字符串

```
HTTPReq.setRequestHeader "Cookie", SetCookieString
HTTPReq.send 
```

我很容易得到预期的文件。当然我对这样的解决方案不满意，并希望执行真正的 WinHTTP 身份验证。但是，我无法理解代码中有什么问题或遗漏了什么。很可能我必须使用`.SetClientCertificate`方法，但这对我来说不清楚 - 需要哪个证书？

或者，更笼统地说：我应该使用哪些 WinHTTP 方法或函数进行调试，以找出哪个步骤阻塞/不正确并阻止我进行正确的身份验证？我花了 2 周时间通过 MSDN 和各种资源寻找，但仍然没有解决方案。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T19:28:15.160

上面的@Alex K. 回复正是我一直在寻找的！在 Firebug 和 MSDN 的帮助下，我完成了 3 个请求：

*   使用 RegEx 从登录页面收集authentity_token 数据的 GET 请求
*   POST 请求以进行身份​​验证并从响应中收集所需的 Cookie 字符串
*   GET 请求最终获得我心爱的 CSV

以下代码按预期工作：

```
Set RegX_AuthToken = CreateObject("VBScript.RegExp")
' Below Pattern w/o double-quotes encoded: (?:input name="authenticity_token" type="hidden" value=")(.*)(?:")
RegX_AuthToken.Pattern = "(?:input name=" & Chr(34) & "authenticity_token" & Chr(34) & " type=" & Chr(34) & "hidden" & Chr(34) & " value=" & Chr(34) & ")(.*)(?:" & Chr(34) & ")"
RegX_AuthToken.IgnoreCase = True
RegX_AuthToken.Global = True

TargetURL = "https://redmine.itransition.com/login"

Set HTTPReq = CreateObject("WinHttp.WinHttpRequest.5.1")
HTTPReq.Open "GET", TargetURL, False
HTTPReq.Send

Set Token_Match = RegX_AuthToken.Execute(HTTPReq.ResponseText)
AuthToken = Token_Match.Item(0).SubMatches.Item(0)

PostData = "authenticity_token=" & AuthToken & "&back_url=https://redmine.itransition.com/" & "&username=" & UN & "&password=" & PW & "&login=Login »"

HTTPReq.Open "POST", TargetURL, False
HTTPReq.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
HTTPReq.Send (PostData)

SetCookieString = HTTPReq.GetResponseHeader("Set-Cookie")

TargetURL = "https://redmine.itransition.com/projects/pmct/time_entries.csv"
HTTPReq.Open "GET", TargetURL, False
HTTPReq.setRequestHeader "Cookie", SetCookieString
HTTPReq.Send 
```

以下 URL 有助于构建 POST 请求：[http ://tkang.blogspot.com/2010/09/sending-http-post-request-with-vba.html](http://tkang.blogspot.com/2010/09/sending-http-post-request-with-vba.html)

> 您需要在没有凭据的情况下加载该页面，从生成的表单中获取看起来像 volatile 字段authentity_token 的内容，并将其连同用户名和密码一起发布到/login。

Alex K. - 再次感谢您的精彩建议！（：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:36:29.570

[https://redmine.itransition.com/](https://redmine.itransition.com/)上的登录只是一个 HTML 表单，它将用户名和密码发布到`/login`.

`SetCredentials`这与为基于服务器的身份验证方案（如基本/摘要/ntlm）设计的不兼容。

您需要在没有凭据的情况下加载该页面，从生成的表单中获取看起来像 volatile 字段的内容`authenticity_token`，并将其连同用户名和密码一起发布到`/login`.

如果它是一个基于会话的系统，它将使用您需要在后续请求中使用的 set-cookie 标头 + 数据进行响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:11:53.133

还有一件事（除了上述解决方案）在使用类似于上述代码的 POST 请求的情况下应该注意：由于某种模糊的原因，我仍然在 4-5 次（甚至更多）中得到一次讨厌的 406来自网站的响应，这意味着在我的情况下**auth is NOT complete**。经过几个小时的逐步调试，我很高兴地找到了原因：auth token 值可能有`+`符号，并且通过分析数十个 auth token / 响应代码的箭头，我发现包含 -`+`的令牌与 406 代码完全匹配。

解决方案变得非常明显：`+`为`PostData`. [在http://www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)的帮助下，我终于得出以下结论：

```
PostData = "authenticity_token=" & Replace(AuthToken, "+", "%2B", vbTextCompare) & _
    "&back_url=https://redmine.itransition.com/projects/" & Trim(RedmineProject) & _
    "/time_entries" & "&username=" & UN & "&password=" & PW & "&login=Login »" 
```

`+`es 被`%2B`s 取代，这就是 - 不再是 406s！）

在我的情况下，其他特殊字符无关紧要，但吸取了教训。希望这将为其他人节省几个小时的生命！

# cocoa - NSDate 比较上的指针类型不兼容

> ID：14184930
> 
> 赞同：4
> 
> 时间：2013-01-06T17:49:56.543
> 
> 标签：cocoa, compare, nsdate

以下代码：

```
NSDate* date1 = [NSDate date];
NSDate* date2 = [NSDate date];
[date1 compare:date2];
[(NSDate*)[NSDate date] compare:date2];
[[NSDate date] compare:date2]; 
```

给我“不兼容的指针类型将'NSDate *'发送到'NSNumber *'类型的参数”用于最后一个日期比较，但不是前两个！

到底是怎么回事？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T17:53:28.343

您需要转换为 NSDate，因为`+ (id)date`返回的是 id，而不是 NSDate。

# json - 在 MongoDB 的数组中使用 addToSet

> ID：14184938
> 
> 赞同：1
> 
> 时间：2013-01-06T17:50:25.357
> 
> 标签：json, mongodb

我正在尝试跟踪个人的每日统计数据。

我很难在“历史”中添加新的一天，并且还可以在新数据进入时使用指针来更新“walkingSteps”。

我的架构看起来像：

```
{
"_id": {
    "$oid": "50db246ce4b0fe4923f08e48"
},
"history": [
    {
        "_id": {
            "$oid": "50db2316e4b0fe4923f08e12"
        },
        "date": {
            "$date": "2012-12-24T15:26:15.321Z"
        },
        "walkingSteps": 10,
        "goalStatus": 1
    },
    {
        "_id": {
            "$oid": "50db2316e4b0fe4923f08e13"
        },
        "date": {
            "$date": "2012-12-25T15:26:15.321Z"
        },
        "walkingSteps": 5,
        "goalStatus": 0
    },
    {
        "_id": {
            "$oid": "50db2316e4b0fe4923f08e14"
        },
        "date": {
            "$date": "2012-12-26T15:26:15.321Z"
        },
        "walkingSteps": 8,
        "goalStatus": 0
    }
] 
```

}

db.history.update(?)

我一直在浏览（并尝试）mongodb 文档，但他们并没有完全将其分解为像我这样的傻瓜......我无法将他们的示例完全转换为我的设置。

谢谢你的帮助。

E = 尝试学习编程的菜鸟

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T18:57:23.587

添加一天：

```
user = {_id: ObjectId("50db246ce4b0fe4923f08e48")}
day = {_id: ObjectId(), date: ISODate("2013-01-07"), walkingSteps:0, goalStatus: 0}
db.users.update(user, {$addToSet: {history:day}}) 
```

更新walkingSteps：

```
user = ObjectId("50db246ce4b0fe4923f08e48")
day = ObjectId("50db2316e4b0fe4923f08e13") // second day in your example
query = {_id: user, 'history._id': day}

db.users.update(query, {$set: {"history.$.walkingSteps": 6}}) 
```

这使用[$ 位置运算符](http://docs.mongodb.org/manual/reference/operators/#_S_ "$ 位置运算符")。

不过，拥有一个单独的历史集合可能更容易。

* * *

[编辑] 在单独的集合上：

*   添加天数会增加文档的大小，并且可能需要在磁盘上重新定位。这可能会导致性能问题和碎片化。
*   删除天数不会缩小磁盘上的文档大小。
*   它使查询更容易/直接（例如搜索一段时间）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:36:15.520

尽管@Justin Case 给出了正确的答案，但他并没有很好地解释其中的一些事情。

您首先会注意到他摆脱了日期的分辨率并将它们的格式移动到仅日期而不是日期和时间，如下所示：

```
day = {_id: ObjectId(), date: ISODate("2013-01-07"), walkingSteps:0, goalStatus: 0} 
```

这意味着您的所有日期都将具有`00:00:00`他们的时间，而不是您使用 atm 的确切时间。这增加了每天查询的便利性，因此您可以执行以下操作：

```
db.col.update(
    {"_id": ObjectId("50db246ce4b0fe4923f08e48"), 
    "history.date": ISODate("2013-01-07")}, 
    {$inc: {"history.$.walkingSteps":0}}
) 
```

和其他类似的查询。

这也使得 $addToSet 实际上执行了它的规则，但是由于这个子文档中的数据可能会改变，即`walkingSteps`增量`$addToSet`在这里无论如何都不会很好地工作。

这是我会从勾选的答案中改变的东西。我可能会使用`$push`或其他东西，因为`$addToSet`它更重并且不会在这里真正做任何有用的事情。

在我看来，单独的历史收集的原因是你之前所说的：

> 是的，当天的历史项目数量。

所以这个数组包含一组天，这很好，但听起来你希望从中获得的数字`walkingSteps`，一组历史项目，应该在另一个集合中，你`walkingSteps`根据其中项目数量的计数进行设置今天的其他收藏：

```
db.history_items.find({date: ISODate("2013-01-07")}).count(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:04:07.330

参考[MongoDB 手册](http://docs.mongodb.org/manual/reference/operator/positional/)，`$`是位置运算符，它标识要更新的数组字段中的元素，而无需显式指定元素在数组中的位置。位置 $ 运算符，与 update() 方法一起使用时，充当更新查询选择器的第一个匹配项的占位符。

因此，如果您发出命令来更新您的收藏，如下所示：

```
db.history.update(
   {someCriterion: someValue },
   { $push: { "history": 
               {"_id": {
                   "$oid": "50db2316e4b0fe4923f08e12"
               },
              "date": {
                   "$date": "2012-12-24T15:26:15.321Z"
               },
           "walkingSteps": 10,
           "goalStatus": 1
           } 
   } 
) 
```

Mongodb 可能会尝试将`$oid`和`$date`作为一些位置参数。`$`也是原子运算符的一部分，例如`$set`and `$push`。所以，最好避免在 Mongodb 中使用这个特殊字符。

# javascript - 返回值异步方法

> ID：14184940
> 
> 赞同：1
> 
> 时间：2013-01-06T17:50:34.197
> 
> 标签：javascript, asynchronous, return

我有一个方法，它通过一个异步方法对每个对象调用一个对象数组：

```
function method(objs){
  for(obj in objs){
    obj.asyncMethod()
  }
} 
```

我的想法是每个函数都应该返回一个值，但在这种情况下，该值应该基于 async 方法的结果，所以这是不可能的。

**不返回值（尤其是在库中）是一种不好的做法吗？**

如果是，有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:53:18.727

不为异步操作返回值是不错的做法，这是意料之中的。接受回调函数作为参数。node.js 中有相当多的内置和外部库具有接受回调作为参数的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:12:17.723

一个函数只有在需要返回一个值时才应该返回一个值。编写一个不返回任何内容的函数绝对没有错。

要回答您的另一个问题：不，没有解决方案，因为该`method`函数本质上将在异步方法执行之前返回。

你甚至会返回什么？代码将在该`for`循环中进行 n 次迭代，那么您怎么知道要返回哪一个呢？

# c++ - 我使用输入/输出流库对吗？

> ID：14184941
> 
> 赞同：0
> 
> 时间：2013-01-06T17:50:38.270
> 
> 标签：c++, iostream

如果您在 C++ 编程中更喜欢这种方式，我是新手或菜鸟，我正在尝试使用它，因为有人告诉我这是一个好习惯，而不是因为它污染全局命名空间`std::`而投入使用。`using namespace std;`我不确定为什么`std::cin >> name;`从下面的代码中产生错误`no operator '>>' matches these operands`下面是完整的源代码。

```
#include "stdafx.h"
#include <ios>
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    int x, y;
    std::string name;

    std::cin >> name;
    std::cin >> x;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T17:52:47.967

你忘了这个：

```
#include<string> 
```

您正在使用`std::string`上面标题中定义的。你需要包括它。

如果您使用标准库中的任何内容，无论是容器还是算法，请确保您已包含定义它们的适当标头。标准库有很多头文件，尤其是容器。作为一般规则，每个容器都在其自己的头文件中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T17:53:19.170

你忘了

```
#include <string> 
```

还

```
#include <ios> 
```

没有必要。

# actionscript-3 - 如何围绕中心点设置rotateX？

> ID：14184947
> 
> 赞同：0
> 
> 时间：2013-01-06T17:51:00.317
> 
> 标签：actionscript-3, flash

我想设置影片剪辑的 rotateX 属性（因此它在 3d 中向后倾斜），但是每当我尝试使用它时

```
myMC.rotationX = -90; 
```

它以一个奇怪的角度向后倾斜。如何旋转影片剪辑以使其完全笔直地向后倾斜？如何设置此变换的中心点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:50:07.147

屏幕截图将有助于解释“......一个奇怪的角度”，但听起来你的“消失点”在错误的地方。看看[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/PerspectiveProjection.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/PerspectiveProjection.html)

您在父级上设置消失点（只需执行一次，除非您希望移动它或调整舞台大小），例如：

```
//set vanishing point to center of current DisplayObject
this.projectionCenter = new Point(this.width/2, this.height/2); 
```

然后旋转：

```
myMC.rotationX = -90; 
```

# python - 多行文字在 python2 中有效，但在 python3 中无效

> ID：14184948
> 
> 赞同：0
> 
> 时间：2013-01-06T17:51:17.830
> 
> 标签：python, python-3.x, python-2.7, multiline

> **可能重复：**
> [使用 Python 3 打印时出现语法错误](https://stackoverflow.com/questions/826948/syntax-error-on-print-with-python-3)

我有以下代码：

```
print '''
Hello World
'''' 
```

它适用于 Python 2，但不适用于 Python 3：

```
Python 3.2.3 (default, Dec 10 2012, 06:30:54) 
[GCC 4.5.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> print '''
... hello world
... '''
  File "<stdin>", line 3
    '''
      ^
SyntaxError: invalid syntax
>>> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:54:37.097

这不是多行的问题，而是`print`.

`print`在 python 3 中被替换为函数`print()`，因此您必须将其作为函数调用。

*   在 Python 3 中不起作用：`print 'hello'`
*   一个可以代替： `print('hello')`

对于您的情况，请尝试

```
print('''
Hello, 
World
''') 
```

# opengl - 应用了基于顶点着色器的几何变形的 3D 场景的通用拾取解决方案

> ID：14184953
> 
> 赞同：5
> 
> 时间：2013-01-06T17:51:51.633
> 
> 标签：opengl, vertex-shader, openscenegraph, picking

我正在尝试实现 3D 场景的导航技术（在带有 OpenGL 的 OpenSceneGraph 中）。除其他外，用户应该能够点击屏幕上的场景对象以向其移动。

导航技术应该集成到另一个项目中，该项目使用顶点着色器将全局变形应用于场景几何体。这就是问题所在：由于使用顶点着色器对几何体进行了变形，因此将鼠标光标位置取消投影到用户实际选择的点的世界坐标并不是直接的。但我需要这些坐标来在我的导航技术中执行正确的相机移动。

执行此非投影的一种方法是修改顶点着色器（用于变形），使其还将顶点的原始位置和法线存储在单独的纹理中。之后可以在鼠标位置读取这些纹理以获得所需的值。

现在，正如我所说，顶点着色器属于我实际上不想接触的另一个项目。我的导航技术的一个目标是尽可能通用，以便轻松集成到其他项目中。

所以这里有一个问题：OpenSceneGraph 或 OpenGL 中是否有我迄今为止没有考虑过的任何功能？任何可以让我独立于顶点着色器编码器获取片段的世界坐标的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:46:56.723

好吧，您总是可以进行 OpenGL 选择操作： [http ://www.glprogramming.com/red/chapter13.html](http://www.glprogramming.com/red/chapter13.html)

或者，您可以光栅化到用户单击的非常小的 (1px*1px) 帧缓冲区，读回 z 缓冲区并将您获得的 Z 值取消投影到世界空间中。

# javascript - Async Google Maps API v3 undefined 不是函数

> ID：14184956
> 
> 赞同：30
> 
> 时间：2013-01-06T17:52:30.333
> 
> 标签：javascript, google-maps-api-3, asynchronous

我正在编写一个使用手工构建的框架异步加载谷歌地图的应用程序。
当我加载地图时，由于某种原因它不会加载所有地图，我最终会得到一个`Uncaught TypeError: undefined is not a function`. 我检查了 chrome 检查器，发现这`google.maps`是一个有效的对象，但它没有自己的属性。我在文档加载后手动调用“初始化函数”。我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-01-06T19:23:44.073

您无法使用众所周知的 URL ( [http://maps.googleapis.com/maps/api/js?v=3&sensor=false](http://maps.googleapis.com/maps/api/js?v=3&sensor=false) )异步加载 maps-API

当您查看脚本文件时，您会发现，这不是被加载的 API，而是加载 API 的加载程序。加载器使用 ,`document.write()`加载文档后调用时会导致意外结果。

此外，文档的 onload-event 不会等待异步加载的对象，它可能来得太快。

您也不能使用脚本的加载事件来调用初始化函数，因为当它触发时，加载程序被加载，而不是地图 API。

**做什么：**
将回调参数附加到脚本 URL（以初始化函数的名称作为值）

`[http://maps.googleapis.com/maps/api/js?v=3&sensor=false&**callback=initialize**](http://maps.googleapis.com/maps/api/js?v=3&sensor=false&callback=initialize)`

现在你得到了一个不同的加载器：

1.  不使用`document.write()`
2.  在加载地图 API 时调用回调函数（初始化）

演示：http: [**//jsfiddle.net/doktormolle/7cu2F/**](http://jsfiddle.net/doktormolle/7cu2F/)

* * *

**与评论相关**：*似乎回调必须是直接附加到窗口的函数。不酷的谷歌:)*

还有另一种选择，即支持使用函数引用（而不是函数名）[的 google-API-loader 。](https://developers.google.com/loader/)

示例，它异步加载 maps-API，但仅当文档中存在具有该 ID 的元素时`map-canvas`，然后创建地图：

```
 window.addEventListener('load',function(){
      if(document.getElementById('map-canvas')){
        google.load("maps", "3",{
          callback:function(){
             new google.maps.Map(document.getElementById('map-canvas'), {
                center: new google.maps.LatLng(0,0),
                zoom: 3
              });
          }
        });     
      }
    },false);
```

```
 body,html,#map-canvas{
        height:100%;
        margin:0;
        padding:0;
        width:100%;
      }
```

```
<script src="https://www.google.com/jsapi?.js"></script>
<div id="map-canvas"></div>
```

# redirect - 多语言域 SEO 站点地图和重定向

> ID：14184959
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:52:46.163
> 
> 标签：redirect, seo, multilingual

我有一个带有 .it 和 .com 域的站点。目前该网站只有意大利语版，但在不久的将来会变成英文版。

处理 .com 域的最佳方法是什么？我应该在意大利语中使用 .com 作为主体并在 .com 上重定向 .it 还是反之亦然？我应该使用 .com 构建站点地图吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:27:15.843

# php - 无法使用 PHP/PDO 从表中获取数据

> ID：14184966
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:53:41.010
> 
> 标签：php, mysql, pdo

我试图从我的表中检索数据只是出于某种原因我收到一个语法错误......

任何人都可以看到我可能会出错的地方吗？

```
 $cid = $_GET['id']; 

    $username = 'liam';
    $password ='';  

try {
$conn = new PDO('mysql:host=localhost;dbname=', $username, $password);
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$data = $conn->query('SELECT * FROM directory WHERE ID = :cid');
$data->bindValue(":cid", $cid);

foreach($data as $row) {

    print_r($row). '<br />';
} 
```

* * *

**错误**

```
 ERROR: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ':cid' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T17:58:33.190

```
$data = $conn->query('SELECT * FROM directory WHERE ID = :cid');
$data->bindValue(":cid", $cid); 
```

您必须在查询数据库之前绑定变量...

看看手册上的例子[http://php.net/manual/en/pdostatement.bindparam.php](http://php.net/manual/en/pdostatement.bindparam.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:59:12.217

您正在运行查询而不是准备它。

改变

```
$conn->query 
```

到

```
$conn->prepare 
```

`query()`只需按原样运行给定的查询。`prepare()`将准备好的语句发送到您的数据库，之后可以使用绑定参数运行它。

我还看到您正在使用带有 PDO 的 MySQL 驱动程序。使用 MySQL 时，您必须禁用模拟的预处理语句：

```
$conn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

有关更多信息，请参阅：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T17:59:28.583

尝试使用这个：

```
$data = $conn->prepare('SELECT * FROM directory WHERE ID = :cid');
$data->bindValue(":cid", $cid); 
```

注意使用`prepare()`而不是`query()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T18:04:49.943

```
define('DB_SERVER', 'localhost');
define('DB_USERNAME', 'root');
define('DB_PASSWORD', '');
define('DB_CHARSET', 'UTF-8');
define('DB_DATABASE', 'database');
define('PDO_DSN', 'mysql:host=' . DB_SERVER . ';dbname=' . DB_DATABASE . ';charset=' .
DB_CHARSET);

try {

$db = new PDO(PDO_DSN, DB_USERNAME, DB_PASSWORD,array(PDO::MYSQL_ATTR_INIT_COMMAND 
=> "SET NAMES UTF8"));
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

/*** echo a message saying we have connected ***/

}
catch(PDOException $e)
{
echo $e->getMessage();
} 
```

确保 ID 是表中的大写字母！！

```
$data = $db->prepare('SELECT * FROM directory WHERE ID = :cid'); 
```

也许在这里我会使用 bindParam 而不是 bindValue()

```
$data->bindValue(':cid', $cid);
$data->execute();
$result = $data->fetchAll();

foreach($result as $row) {

print_r($row). '<br />';
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T18:00:57.490

我没有在您的连接行中看到数据库名称，也没有`use`在您的脚本中看到子句。

# javascript - hta 中的持续错误

> ID：14184968
> 
> 赞同：-1
> 
> 时间：2013-01-06T17:53:53.480
> 
> 标签：javascript, hta

感谢所有教我函数区分大小写的人，但现在我没有收到任何错误，这里什么也没发生是我的代码

HTA：

```
<HTML>
<HEAD>
  <TITLE>James Tech Calculator</TITLE>

  <HTA:APPLICATION ID="James Tech" APPLICATIONNAME="APP" SCROLL="no" SINGLEINSTANCE="yes">

  </HEAD>

  <BODY>
    <SCRIPT TYPE="text/javascript" SRC=Calc.JS>
      SetSize();
    </SCRIPT>
  </BODY>

  </HTML> 
```

和 JavaScript：

```
function SetSize()
{
 window.resizeTo(400,400);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:46:59.267

torazaburo 是对的，解决问题的最快方法是拥有两个`SCRIPT`标签。

```
<SCRIPT TYPE="text/javascript" SRC=Calc.JS>
</SCRIPT>
<SCRIPT TYPE="text/javascript" >
  SetSize();
</SCRIPT> 
```

但是，我不会在正文中内联脚本。我会把它放在一个事件中，例如`onload`，例如：

```
<HTML>
<HEAD>
<TITLE>James Tech Calculator</TITLE>
<HTA:APPLICATION ID="James Tech" APPLICATIONNAME="APP" SCROLL="no" SINGLEINSTANCE="yes">
</HEAD>
<BODY onload="window.resizeTo(400,400)">
</BODY>
</HTML> 
```

# inheritance - YAML 中更复杂的继承？

> ID：14184971
> 
> 赞同：63
> 
> 时间：2013-01-06T17:54:22.887
> 
> 标签：inheritance, yaml

YAML 具有继承性。我见过的最清晰的例子在这里：[http ://blog.101ideas.cz/posts/dry-your-yaml-files.html](https://web.archive.org/web/20130213112648/http://blog.101ideas.cz/posts/dry-your-yaml-files.html)

我需要更复杂的东西：我需要覆盖对象的对象属性。这是一个例子：

```
database: &default
  server:
    ip: 192.168.1.5
    port: 2000
  db_name: test
  user: 
    name: root
    password: root

# database foo differs from default by only its port and user password
foo_database:
  <<: *default
  server:
    port: 2001
  db_name: foo
  user:
    password: foo_root 
```

我想得到这个结果：

```
foo_database.server.ip -> 192.168.1.5
foo_database.server.port -> 2001
foo_database.db_name -> foo
foo_database.user.name -> root
foo_database.user.password -> foo_root 
```

但是如果你这样声明，你会得到这些属性不正确（根据预期值）：

```
foo_database.server.ip -> will be None
foo_database.user.name -> will be None 
```

因为新的“服务器”对象只有“端口”属性，它会覆盖整个旧的“服务器”对象。

如何获得我想要实现的那种继承？

# 编辑

[这是我在](https://gist.github.com/ceremcem/4ca8d774e660c579682839620d8c2da8)[LiveScript](http://livescript.net/)中使用工作代码的确切意图：

```
config = 
  default: 
    ip: \192.168.1.5
    port: 2000
    name: \root 
    password: \root 
    db:
      name: \default
      location: \LA

  foo-database:~ -> @default `merge` do 
    ip: \11.11.11.11
    db:
      name: \my-foo 

  bar-database:~ -> @foo-database `merge` do 
    password: \1234 
    db:
      location: \SF

config.default 
# => {"ip":"192.168.1.5","port":2000,"name":"root","password":"root","db":{"name":"default","location":"LA"}}
config.foo-database  
# => {"ip":"11.11.11.11","port":2000,"name":"root","password":"root","db":{"name":"my-foo","location":"LA"}}
config.bar-database  
# => {"ip":"11.11.11.11","port":2000,"name":"root","password":"1234","db":{"name":"my-foo","location":"SF"}} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-06T23:36:25.143

不幸的是，你无法获得你想要实现的那种“继承”，因为 YAML 的“继承”更像是一种“合并哈希”的形式。

`*default`在您使用别名时扩展您的配置，您将拥有：

```
foo_database:
  server:
    ip: 192.168.1.5
    port: 2000
  db_name: test
  user: 
    name: root
    password: root 
```

如果您之后使用具有相同键的散列，它们将*完全覆盖*之前声明的散列，留给您（请原谅格式）：

```
foo_database: 
```

 ~~~~```
 server:
    ip: 192.168.1.5
    port: 2000
  db_name: test
  user: 
   name: root
   password: root 
```~~  ~~```
 server:
    port: 2001
  db_name: foo
  user:
    password: foo_root 
```

因此，在您的情况下，似乎由于配置不*完全相同*，使用锚点和别名干燥您的配置可能不是正确的方法。

以下关于此问题的更多参考资料：

*   [Rake、YAML 和继承的构建配置](http://therightstuff.de/2010/01/30/Rake-YAML-And-Inherited-Build-Configuration.aspx)
*   [在 yaml conf 文件中合并哈希](http://atechie.net/2009/07/merging-hashes-in-yaml-conf-files/)

### 编辑

如果你真的想，我认为你可以重新配置你的 YAML 如下以获得你想要的，但在你的情况下，我会说额外的混淆是不值得的：

```
server_defaults: &server_defaults
  ip: 192.168.1.5
  port: 2000

user_defaults: &user_defaults
  name: root
  password: root

database: &default
  server:
    <<: *server_defaults
  db_name: test
  user: 
    <<: *user_defaults

foo_database:
  <<: *default
  server:
    <<: *server_defaults
    port: 2001
  db_name: foo
  user:
    <<: *user_defaults
    password: foo_root 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-25T19:47:23.770

这个怎么样？使用多个锚点。

```
database: &default
  server: &server
    ip: 192.168.1.5
    port: 2000
  db_name: test
  user: &user
    name: root
    password: root

foo_database:
  <<: *default
  server:
    << : *server
    port: 2001
  db_name: foo
  user:
    << : *user
    password: foo_root 
```

这只是一些额外的工作，并且比如果你想要的内容按照你的建议内置到 YAML 中稍微难读（我认为它也可以这样工作）。但总体还不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-16T23:57:20.923

对于这类问题，我创建了一个工具：[jq-fr​​ont](https://github.com/dakusui/jq-front)。通过使用[yq](https://mikefarah.github.io/yq/) + jq-fr​​ont，您可以通过稍微修改您的输入来实现它。

**在.yaml：**

```
$local: 
  database_default:
    server:
      ip: 192.168.1.5
      port: 2000
    db_name: test
    user: 
      name: root
      password: root

# database foo differs from default by only its port and user password
foo_database:
  $extends: [ database_default ]
  server:
    port: 2001
  db_name: foo
  user:
    password: foo_root 
```

您可以通过以下命令行处理此文件。

```
$ yq . -j in.yaml | jq-front  | yq . -y 
```

您将获得您想要的以下输出。

```
foo_database:
  server:
    ip: 192.168.1.5
    port: 2001
  db_name: foo
  user:
    name: root
    password: foo_root 
```

注意： jq-fr​​ont 非常慢。在我的机器上，该命令花费了 2.5 秒，这对我来说并不重要，因为系统配置可以读取一次，并且我的程序的其余部分只使用转换后的文件。

注意：如果您使用 docker + bash，则通过 docker 安装 jq-fr​​ont 会容易得多。您只需要将以下功能添加到您的`.bashrc`或由它提供的文件中。

```
function jq-front() {
  docker run --rm -i \
    -v /:/var/lib/jf \
    -e JF_PATH_BASE="/var/lib/jf" \
    -e JF_PATH="${JF_PATH}" \
    -e JF_DEBUG=${JF_DEBUG:-disabled} \
    -e JF_CWD="$(pwd)" \
    dakusui/jq-front:"${JF_DOCKER_TAG:-latest}" "${@}"
} 
```~~~~

# asp.net - 如何在asp.net的客户端机器上调用函数？

> ID：14184972
> 
> 赞同：0
> 
> 时间：2013-01-06T17:54:24.447
> 
> 标签：asp.net, function, dll, client

我在 asp.net 中有一个网站，只允许注册用户访问它。每个注册用户都会得到一个库来放入他的机器中。当该用户单击网站上的按钮时，它将调用该库中的函数。但我不知道如何调用这个函数。你能给我一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:03:15.110

在大多数情况下，我在代码隐藏中定义了一个单击处理函数，然后将处理函数的名称传递给我要处理的控件的 OnClick 属性。

# r - fill.contour - 描绘 z 值水平的变化

> ID：14184973
> 
> 赞同：3
> 
> 时间：2013-01-06T17:54:35.567
> 
> 标签：r, graphics

我必须生成`filled.contour`在 z 值中具有某种对称性的图，如下面的代码所示

```
x <- 1:5
y <- 1:5
z <- matrix(outer(x,y,"+"),nrow=5)
filled.contour(x,y,z)
filled.contour(x,y,z,color.palette=rainbow)
z2 <- z
z2[5,5] <- Inf
filled.contour(x,y,z2,col=rainbow(200),nlevels=200) 
```

我希望能够描绘 z 值的级别，例如某些级别或增量（2、4、6、8、10）增量，以便获得以下图

![在此处输入图像描述](../Images/9554c89375cab16efd62ef1461f7810a.png)

我想保留水平`col=rainbow(200)`以绘制平滑的颜色和颜色过渡，但我想描绘某些值/增量。

这可能吗？我希望有一个基本的 R 解决方案，但如果这不可能，任何解决方案都会很好（ggplot，lattice）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:38:40.117

您可以使用 countourLines() 添加行和 text() 添加文本：

```
txtlab <- c("2", "4", "6", "8", "Inf")
txtpos <- c(1.25, 2, 3, 4, 4.75)
ctlns <- contourLines(x, y, z2, levels=c(3, 5, 7, 9))
filled.contour(x,y,z2,col=rainbow(200),nlevels=200, 
     plot.axes={axis(1); axis(2); text(txtpos, txtpos, txtlab, cex=1.5);
     sapply(1:4, function(x) lines(ctlns[[x]][[2]], ctlns[[x]][[3]], lwd=2))
}) 
```

![填充轮廓](../Images/8ed54fd8acb54a9cbb8d744d281bde4a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:20:46.723

对于每个整数，这里都是黑色的（使用 is.integer 中的示例），可以`black`很容易地将其修改为仅返回偶数：

```
getcolor <- function(z, n) {
  is.wholenumber <-
    function(x, tol = .Machine$double.eps^0.5)  abs(x - round(x)) < tol
  pp <- pretty(range(z, finite=TRUE), n)
  ifelse(is.wholenumber(pp), 'black', rainbow(n))
}

filled.contour(x,y,z2,col=getcolor(z2, 200),nlevels=200) 
```

![在此处输入图像描述](../Images/09ca2712aad514e328fe688769671393.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T14:03:56.117

我最近做了类似的事情，我使用了这种类型的代码：

```
x <- 1:5
y <- 1:5
z <- matrix(outer(x,y,"+"),nrow=5)
z2 <- z
z2[5,5] <- Inf
filled.contour(x,y,z2,col=rainbow(200),nlevels=200
plot.axis = {axis(1);axis(2);contour(x,y,z2,add=TRUE)}) #that's when you add the contours 
```

[结果（点击链接查看）](https://i.stack.imgur.com/xkWEd.png)

# ruby-on-rails - 数据库“updated_at”总是更改为“git push heroku”的时间

> ID：14184977
> 
> 赞同：2
> 
> 时间：2013-01-06T17:55:08.020
> 
> 标签：ruby-on-rails, heroku

我在 Heroku 上有一个 Rails 3.2.9 应用程序。

由于某些奇怪的原因，每当我将新代码版本推送到 Heroku 时，数据库行都会同时更新，我从使用 Adminium 查看 Postgres 数据库的“updated_at”列中知道这一点。

这可能是什么原因造成的？

Rails 应用程序的哪个部分可以执行此操作？我应该在哪里调试这个？

# java - 创建仅包含某些字符的 String[]

> ID：14184978
> 
> 赞同：0
> 
> 时间：2013-01-06T17:55:11.823
> 
> 标签：java, regex

我正在尝试创建一个`String[]`仅包含由某些字符组成的单词。例如，我有一本包含许多单词的字典，如下所示：

臂 军队 艺术 攻击 尝试 注意力 吸引力 权威 自动 唤醒 婴儿 背 坏 袋子 平衡

我想缩小列表范围，使其仅包含带有字符的单词`a`,`b`和`g`。因此，此示例中的列表应仅包含单词“bag”。目前我正在尝试使用正则表达式来做到这一点，但在我似乎无法让它工作之前从未使用过它们。这是我的代码：

```
public class LetterJugglingMain {
public static void main(String[] args) {
    String dictFile = "/Users/simonrhillary/Desktop/Dictionary(3).txt";
    fileReader fr = new fileReader();
    fr.openFile(dictFile);
    String[] dictionary = fr.fileToArray();
    String regx = "able";
    String[] newDict = createListOfValidWords(dictionary, regx);
    printArray(newDict);
}

public static String[] createListOfValidWords(String[] d, String regex){
    List<String> narrowed = new ArrayList<String>();
    for(int i = 0; i<d.length; i++){
        if(d[i].matches(regex)){
            narrowed.add(d[i]);
            System.out.println("added " + d[i]);
        }
    }
    String[] narrowArray = narrowed.toArray(new String[0]);
    return narrowArray;
} 
```

但是返回的数组总是空的，除非字符串正则表达式是确切的单词！有任何想法吗？如果需要，我可以发布更多代码......我想我必须尝试错误地初始化正则表达式。缩小的列表必须仅包含正则表达式中的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T17:58:10.287

正则表达式`able`将仅匹配字符串`"able"`。但是，如果您希望正则表达式匹配、或的任一字符`a`，则您要查找的正则表达式是（在括号中）。如果您想要包含多个此类字符的单词，请添加一个用于重复该模式的单词：.`b``l``e``[able]``+``[able]+`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:13:28.277

坦率地说，我不是正则表达式方面的专家，但我认为这不是做你想做的最好的工具。我会使用如下方法：

```
public boolean containsAll(String s, Set<Character> chars) {
    Set<Character> copy = new HashSet<Character>();
    for (int i = 0; i < s.length() && copy.size() < chars.size(); i++) {
        char c = s.charAt(i);
        if (chars.contains(c)) {
            copy.add(c);
        }
    }
    return copy.size() == chars.size();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T17:58:11.973

> OP 想要包含每个字符的单词。不只是其中之一。其他字符都不是问题。

如果是这种情况，我认为最简单的方法是逐个字符地遍历整个字符串，并检查它是否包含您想要的所有字符。保留标志以检查是否已找到每个字符。

如果不是这种情况....：

尝试使用正则表达式：

```
^[able]+$ 
```

这是它的作用：

`^`匹配字符串的开头并`$`匹配字符串的结尾。这可以确保您没有得到部分匹配。

`[able]`匹配您希望字符串包含的字符，在本例`a`中为`b`、`l`、 和`e`. `+`确保字符串中有 1 个或多个这些字符。

注意：此正则表达式将匹配包含这 4 个字母的字符串。例如，它将匹配：

能, albe, aeble, aaaabbblllleeee

并且不会匹配

qable，可治疗的和有能力的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T18:08:35.460

一个示例正则表达式，用于过滤出包含至少一次出现在一组中的所有字符的单词。这将匹配包含所有字符 a、b、g 至少出现一次的任何英文单词（不区分大小写）：

```
(?i)(?=.*a)(?=.*b)(?=.*g)[a-z]+ 
```

匹配的字符串示例为`bag`, `baggy`, `grab`。

不匹配的字符串示例为`big`, `argument`, `nothing`.

该`(?i)`方法打开不区分大小写的标志。

您需要`(?=.*<character>)`为每个字符附加与集合中的字符数一样多的字符。

我假设一个单词只包含英文字母，所以我指定`[a-z]`. 如果需要空格、连字符等，请指定更多。

我在课堂上假设`matches(String regex)`方法`String`，所以我省略了`^`and `$`。

性能*可能很差*，因为在最坏的情况下（字符位于单词的末尾），我*认为*正则表达式引擎可能会遍历字符串大约 n 次，其中 n 是集合中的字符数。这可能根本不是一个真正的问题，因为单词很短，但如果事实证明这是一个瓶颈，你可以考虑做简单的循环。

# c# - 在 Parallel.ForEach 时更新 WPF GUI

> ID：14184979
> 
> 赞同：0
> 
> 时间：2013-01-06T17:55:13.633
> 
> 标签：c#, .net, wpf, multithreading, parallel-processing

我有一个 WPF 多线程应用程序，每个线程都会更新一些绑定到 xaml gui 的对象变量。

如果我使用普通线程或线程池，它工作正常。当对象变量被踏板改变时，每个对象都在 GUI 中实时更新。

我想使用`Parallel.ForEach`，因为它停止执行，所有线程都已完成。这对我来说很重要，因为它阻止了界面（因为使用应该等待），并且可以显示完成的消息。不好的是，Parallel.Foreach 不会实时更新，只有在所有线程都完成时才更新。

这种方式有效，但它只在最后更新 Gui。

```
Parallel.ForEach(Computers, new ParallelOptions { MaxDegreeOfParallelism = 1}, computer => { PingTemp(computer); }); 
```

这种方式有效，但它不会等到 ThreadPool 结束。

```
Task.Factory.StartNew(() => Parallel.ForEach<Computer>(Computers, new ParallelOptions { MaxDegreeOfParallelism = 1 }, computer => PingTemp(computer))); 
```

当 GUI 实时更新并在继续之前等待线程池的执行时，您推荐什么方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:10:52.780

不要在同一个线程中这样做。如果您需要用户等待，请使用一种机制，您可以在逻辑上停止 UI 上的交互（如果为 ff，则在窗口顶部放置一个带有工作动画的透明标签）并在循环之外执行操作。只要您的线程阻塞，整个 UI 交互就会被阻塞。

当 UI 线程阻塞时，您不会在 UI 中获得任何更新。所以，这已经扼杀了你想要的。但更重要的是——你真的会做坏事。始终保持 UI 自由。

我的旧规则是 0.1/1。超过 0.1 秒的所有内容都必须进入非 UI 线程，任何超过 1 秒的内容都必须禁用 UI 并显示工作动画，如果任何 mreans 可行，最好显示进度。

I use a GUI framework that handles that automatically via bound method signatures (telling the UI this method call is async, then the routine is automatically called in a separate thread).

# c++ - 在加载和保存期间，DirectX 中的 PNG 纹理缺少一些颜色？

> ID：14184980
> 
> 赞同：8
> 
> 时间：2013-01-06T17:55:34.477
> 
> 标签：c++, colors, directx, png, directx-11

我使用标准 DirectX 函数（如`CreateTexture2D`和）来加载 PNG 图像，在新创建的纹理上渲染它，`D3DX11SaveTextureToFile`然后`D3DX11CreateShaderResourceViewFromFile`保存到文件中。所有的纹理都是两种尺寸的力量。

但在此过程中，我注意到 PNG 中的一些颜色有点损坏（与源纹理中的颜色相似但不同）。透明度也是如此（它适用于 0 和 100% 透明度部分，但不适用于例如 34%）。

是否有一些大的颜色近似值或者我做错了什么？如果是这样，我该如何解决？

这是这两张图片（左边是来源：底部有一点不同的颜色和一些渐变透明度；右边是加载第一张图片并在新纹理上渲染后的图片，然后保存到文件中）：

![源图像](../Images/7e5733140f1decd37c7b556251a3cb74.png) ![新图片](../Images/9b0b78cdfeff7f4428d89c85bd00fd84.png)

我不知道是什么导致了这种行为，也许是新纹理的描述：

```
textureDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM; 
```

我曾尝试将其更改为`DXGI_FORMAT_R32G32B32A32_FLOAT`，但效果更奇怪：

![与 DXGI_FORMAT_R32G32B32A32_FLOAT](../Images/c7a8e4bee47e2beacbc82c6e861ff696.png)

这是在新纹理上渲染源纹理的代码：

```
context->OMSetRenderTargets(1, &renderTargetView, depthStencilView); //to render on new texture instead of the screen
float clearColor[4] = {0.0f, 0.0f, 0.0f, 0.0f}; //red, green, blue, alpha
context->ClearRenderTargetView(renderTargetView, clearColor);
//clear the depth buffer to 1.0 (max depth)
context->ClearDepthStencilView(depthStencilView, D3D11_CLEAR_DEPTH, 1.0f, 0);
//rendering
turnZBufferOff();
shader->set(context);
object->render(shader, camera, textureManager, context, 0);
swapChain->Present(0, 0); 
```

并在`object->render()`：

```
UINT stride;
stride = sizeof(Vertex);
UINT offset = 0;
context->IASetVertexBuffers( 0, 1, &buffers->vertexBuffer, &stride, &offset ); //set vertex buffer
context->IASetIndexBuffer( buffers->indexBuffer, DXGI_FORMAT_R16_UINT, 0 ); //set index buffer
context->IASetPrimitiveTopology( D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST ); //set primitive topology

if(textureID){
    context->PSSetShaderResources( 0, 1, &textureManager->get(textureID)->texture);
}

ConstantBuffer2DStructure cbPerObj;
cbPerObj.positionAndScale = XMFLOAT4(center.getX(), center.getY(), halfSize.getX(), halfSize.getY());
cbPerObj.textureCoordinates =  XMFLOAT4(textureRectToUse[0].getX(), textureRectToUse[0].getY(), textureRectToUse[1].getX(), textureRectToUse[1].getY());
context->UpdateSubresource(constantBuffer, 0, NULL, &cbPerObj, 0, 0);
context->VSSetConstantBuffers(0, 1, &constantBuffer);
context->PSSetConstantBuffers(0, 1, &constantBuffer);

context->DrawIndexed(6, 0, 0); 
```

着色器非常简单：

```
VS_OUTPUT VS(float4 inPos : POSITION, float2 inTexCoord : TEXCOORD)
{

    VS_OUTPUT output;
    output.Pos.zw = float2(0.0f, 1.0f);

    //inPos(x,y) = {-1,1}
    output.Pos.xy = (inPos.xy * positionAndScale.zw) + positionAndScale.xy;
    output.TexCoord.xy = inTexCoord.xy * (textureCoordinates.zw - textureCoordinates.xy) + textureCoordinates.xy;

    return output;
}

float4 PS(VS_OUTPUT input) : SV_TARGET
{
return ObjTexture.Sample(ObjSamplerState, input.TexCoord);
} 
```

为了进行一些优化，我将精灵的大小解析为着色器的参数（它工作正常，纹理的大小、边框等都是正确的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:10:41.423

您是否设置了混合状态？默认情况下，Alpha 不起作用，因为默认混合根本没有混合。

这是一个标准的 alpha 混合状态：

```
 D3D11_BLEND_DESC desc;
desc.AlphaToCoverageEnable=false;
desc.IndependentBlendEnable = false;

for (int i =0; i < 8 ; i++)
{
    desc.RenderTarget[i].BlendEnable = true;
    desc.RenderTarget[i].BlendOp = D3D11_BLEND_OP::D3D11_BLEND_OP_ADD;
    desc.RenderTarget[i].BlendOpAlpha = D3D11_BLEND_OP::D3D11_BLEND_OP_ADD;
    desc.RenderTarget[i].DestBlend = D3D11_BLEND::D3D11_BLEND_INV_SRC_ALPHA;
    desc.RenderTarget[i].DestBlendAlpha = D3D11_BLEND::D3D11_BLEND_ONE;
    desc.RenderTarget[i].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE::D3D11_COLOR_WRITE_ENABLE_ALL;
    desc.RenderTarget[i].SrcBlend = D3D11_BLEND::D3D11_BLEND_SRC_ALPHA;
    desc.RenderTarget[i].SrcBlendAlpha = D3D11_BLEND::D3D11_BLEND_ONE;
}

ID3D11BlendState* state;
device->CreateBlendState(&desc,&state);
return state; 
```

我也将使用 Clear 并将 alpha 组件设置为 1 而不是 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:24:10.623

我建议您的问题源于导入分层的 Fireworks PNG 文件。Fireworks 分层 PNG 在导入到 Flash 和 Freehand 等其他软件时会保留其图层。但是，为了在 Photoshop 中精确复制分层的 Fireworks PNG，有必要将该分层的 PNG 导出为平面 PNG。因此，在 Photoshop 中打开它并展平它不是解决方案；解决方案在于在 Fireworks 中将其打开并展平。（注意：PNG 可以是 8 位、24 位或 32 位……也许这需要在您的分析中加以考虑。）

# objective-c - 配置文件、证书等

> ID：14184981
> 
> 赞同：2
> 
> 时间：2013-01-06T17:55:39.203
> 
> 标签：objective-c, ios, code-signing, provisioning, iphone-developer-program

我试图了解整个配置过程，但我就是不明白..

我试图阅读，但它对我来说太奇怪和难以理解，尤其是当英语既不是我的主要语言也不是我的第二语言时..

我已经开发了一段时间，我记得第一次设置我的 iphone 进行开发时压力很大。当我打开`Settings->General`手机时，我有 17 个配置文件，但至少我最终让它工作了。

现在，我正在将我的应用程序移植到 iPad，并尝试将我的 iPad 添加到桌面上。这就是我所做的：我去了 developer.apple.com，在设备中添加了我的 udid，然后我去`provisioning`了同一个网页，看到了三个配置文件，一个不可编辑（由 xcode 控制），一个连接到我的应用程序的 AppID，还有一个作为 AppID 连接到我自己。

确保我将我的新 iPad 设备添加到所有三个设备中，然后再次下载它们。我将 .mobileprovisions 拖到 iTunes 和 Xcode，然后我进入管理器并单击`Refresh`以更新它们。我点击`Use for development`我的 iPad，它说它包含这些配置文件。它们也在`Settings->General`我的 iPad 上。

在我的 XCode 项目中，我进入`Targets->Build Settings->Code Signing`，并将我的一个新配置文件设置为`Debug`，将另一个配置文件设置为其中一个`Any iOS Sdk`。我尝试了多种组合。我也去了`Project->Build Settings->Code Signing`并做了同样的事情。

当我在我的设备上运行我的应用程序时，它会弹出两条相同的错误消息说`A valid provisioning profile for this executable was not found.`

当我现在连接一直运行良好的 iPhone 时，会发生完全相同的事情。两个相同的错误信息。

**问题：**

哪些配置文件在哪里？包含我自己作为 AppID 的配置文件和包含我的实际应用程序 ID 作为 AppID 的配置文件有什么区别？`Target->Build Settings`和`Project->Build Settings`有什么区别`Code Signing`？

此外，我们花了很多时间进行推送工作，并且应用程序现在在 AppStore 上，所以我不想开始删除配置文件和 ID，因为我认为我在某个地方读到了可能使通知停止工作的地方。

哦，我在某个时候也下载了一个新证书，其中包含新的配置文件，它最终与其他 1000 个名称一起出现在钥匙串中。

帮助 ：（ ？

对不起，很长而且非常无聊/无聊的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:11:22.613

我认为由于证书问题而无法构建您的代码-就像您在问题末尾所说的那样-您“在某个时候下载了包含配置文件的新证书...”您需要了解证书不会“包含”配置文件，但配置文件是使用特定证书创建和签名的。检查您是否拥有此证书的**私钥**- 如果签名请求不是由您发出的，则需要其他人从他自己的钥匙串中为您导出此证书。请记住，仅下载您的开发者帐户中可用的证书是不够的。

至于其他一切：

**Which profiles goes where?** Make sure you're creating relevant profiles with correct bundle IDs for your apps. Distribution profiles should include AdHoc and AppStore profiles, while Development profiles are, well, for development :)

**What is the difference between the profile containing myself as an AppID and the one containing my actual app's ID as AppID?** Not sure what you mean here. Myself as an AppID? Each profile is linked to a specific App ID that has a bundle ID - it can be used to compile any app that has this bundle or any sub-domain of it in the info.plist of the project.

**在代码签名方面，Target->Build Settings 和 Project->Build Settings 有什么区别？** 您可以将 Project->Build Settings 视为全局设置，将 Target->Build Settings 视为特定于目标的设置。如果 XCode 无法从目标设置中找出要使用的配置文件，它会从项目设置中获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T22:55:51.990

问题是在我们将应用发布到 AppStore 后，我们忘记将“Edit Scheme->Run”从 Release 放回 Debug。这对我的 iPhone 没有影响，因为我已将它添加到发布-配置-测试中。

# jquery - jQuery序列化数据产生奇怪的输出

> ID：14184982
> 
> 赞同：2
> 
> 时间：2013-01-06T17:55:46.423
> 
> 标签：jquery, serialization

我有一个奇怪的问题，我无法解决问题。现在这只是最终将实现的测试代码，但现在，为了我已经写出的大量代码，我将粘贴一个小片段，它是问题子项。

```
//-----
$(document).ready(function()
{
    $('#postdatabutton').click(function()
    {
        $.post('post_data.php',$('#postform').serialize(), function(data)
        {
            $('#new_submitted_data').prepend(data).fadeIn(333);
        });
    });
});
//---- 
```

非常简单的代码，使用“serialize()”我将数据发送到 .php 页面，然后使用 MySQL 从表单中插入提交的 $_POST[''] 数据，但是当数据被插入时，数据（只是一个小例如字符串）得到这样的输出：

```
H

E

L

L

o

.

I

a

m

a

s

t

r

i

n

g

. 
```

# objective-c - 将触摸事件重新发送到 iOS 中的另一个视图

> ID：14184983
> 
> 赞同：1
> 
> 时间：2013-01-06T17:55:51.167
> 
> 标签：objective-c, ios, xcode

我有一个`UIImageView`在（而不是一个元素） a 之上`UIScrollView`。好吧，我已经`UIImageView`将检查触摸事件的子类化并覆盖了该`touchesBegan:withEvent:`方法。在该方法中，我基本上将子类发送到元素`UIImageView`后面。`UIScrollView`（我`[self.super bringSubviewToFront: scrollView]`用来实现这一点）。

我想要的是能够将当前的触摸事件发送`UIImageView`到`UIScrollView`元素，这样用户就不必抬起手指并再次触摸来滚动。我已经尝试调用`touchesBegan:withEvent:`该`UIScrollView`元素，但它什么也没做。

有谁知道应该做什么，以便我可以模拟对`UIImageView`元素`UIScrollView`的触摸？

这是子类中的重写方法`UIImageView`：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
     [super touchesBegan: touches withEvent: event];

     ViewController* controller = [Singleton getSingleton].controller;
     [super bringSubviewToFront: controller.scrollView]; //Now scroll view is in the front

     [controller.scrollView touchesBegan: touches withEvent: event]; //Does nothing
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:33:59.107

我需要`hitTest:withEvent:`在`UIImageView`子类中覆盖。

```
(UIView*) hitTest: (CGPoint)point withEvent: (UIEvent*)event
{
    if([self pointInside:point withEvent:event]){
         ViewController* controller = [Singleton getSingleton].controller;
         [controller.view bringSubviewToFront: controller.scrollView];
         return controller.scrollView;
    }else{
         return [super hitTest:point withEvent: event];
    }
} 
```

这样，当对`UIImageView`发出触摸时，它会首先调用此方法，该方法会将`UIScrollView`置于最前面，然后将`UIScrollView`作为应处理事件的对象返回。

# php - preg_replace 只在第一次执行

> ID：14184986
> 
> 赞同：1
> 
> 时间：2013-01-06T17:56:06.333
> 
> 标签：php, file-io, preg-replace

我正在尝试使用 html 表单编辑配置文件。编辑 (settings.php) 文件如下所示：

```
$config['foo'] = FALSE;
$config['maintenance'] = FALSE;  //this line is that what it matters
$config['bar'] = FALSE; 
```

这里的想法是更改 of `$config['maintenance']`，因此一旦提交表单（有一个名为复选框以`maintenance`根据其状态将状态设置为 true 或 false），我得到的复选框值为：

```
$status = ($_POST['maintenance'] === 'on')? "TRUE" : "FALSE"; 
```

我已经调试了`$status`var 值，这里一切正常。现在，我正在使用下面的正则表达式在文件中找到正确的行：

```
\$config\[(\s+)?(\'|")maintenance(\'|")(\s+)?\](\s+)?=(\s+)?(false|FALSE|true|TRUE);/ 
```

最初“工作”很好，因为我不确定，但让我完成解释......根据上面的代码，现在我继续进行替换：

```
//read the content and replace it
$content = preg_replace(
    '/\$config\[(\s+)?(\'|")maintenance(\'|")(\s+)?\](\s+)?=(\s+)?(false|FALSE|true|TRUE);/',
    '$config["maintenance"] = ' . $status . ';', 
    file_get_contents($file)
);

//set the new content
file_put_contents($file, $content); 
```

当我第一次运行它并选中复选框时，它可以工作，结果如下：

```
$config['foo'] = FALSE;
$config["maintenance"] = TRUE;
$config['bar'] = FALSE; 
```

但是，无论我在复选框中选择什么，该文件都不会显示任何更改。你能引导我找到正确的方向来找到错误吗？谢谢

编辑。这是html标记

```
<label>
    <input type="checkbox" name="maintenance" /> in maintenance mode
</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:33:13.980

试试这个：

```
$status = (isset($_POST['maintenance'])) ? 'TRUE' : 'FALSE'; 
```

和：

```
$content = preg_replace(
    '/\$config\[\s*[\'"]maintenance[\'"]\s*\]\s*=\s*(false|true);/i',
    '$config["maintenance"] = ' . $status . ';', 
    file_get_contents($file)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T00:01:05.950

但是你发布的代码对我来说很好，你应该做更多的调试，比如：

```
error_reporting(-1); 
```

或在替换前后检查 $content。检查您的错误日志（如果您将 display_errors 设置为 on，则搜索错误消息）。可能有什么问题。（例如文件权限）。

还要考虑：

*   完全重写配置文件，而不是仅仅替换一行——它可能容易出错。
*   在写入/读取文件时获取锁

# c# - 无法在 IIS 托管的 REST WCF 服务中加载第三方 dll

> ID：14184990
> 
> 赞同：3
> 
> 时间：2013-01-06T17:56:47.813
> 
> 标签：c#, wcf, dll, dllimport

我已经主持了一个`Rest WCF`到我的`IIS 7`. 我测试了一切，除了导入`dll`. 我的实例类代码如下：

```
[OperationContract, WebInvoke(Method = "GET", UriTemplate = "/getname?name={name}&age={age}", ResponseFormat = WebMessageFormat.Json)]
    bool getname(string name, string age);

[OperationContract, WebInvoke(Method = "GET", UriTemplate = "/getcallfromdll?name={name}&age={age}", ResponseFormat = WebMessageFormat.Json)]
    bool getcallfromdll(string name, string age); 
```

而上述方法的定义是：

```
public string getname(string name, int len)
    {
        return "It's working";
    }
public string getcallfromdll(string name, int len)
    {
        return UnsafeNativeMethods.getvalue(name, len); //Unsafe.. is a internal structure
    }

internal static class UnsafeNativeMethods
    {
        const string _dllLocation = "school.dll";

        [DllImport(_dllLocation, CallingConvention = CallingConvention.Cdecl)]
        public static extern bool getvalue(string name, String len);
     } 
```

尝试运行时`localhost:8085/service.svc/getname?name=kajn&len=21`：它返回`"It's working"`，这是正确的，但每当我尝试调用时`localhost:8085/service.svc/getcallfromdll?name=kajn&len=21`：它返回`The server encountered an error processing the request. See server logs for more details.`

我搜索了它，不知何故我知道这一切都是由于服务而发生的，无法找到`DLL`. 为了解决这个问题，我尝试将我的 dll 放在以下位置，但它没有帮助我:(：

*   系统32/inetsrv
*   SysWOW64/inetsrv
*   在 bin 文件夹中
*   我还将项目所在的文件夹放在同一个文件夹中。

但没有什么对我有用。请建议我一个解决方案。

注意：dll 没有问题，因为我从自托管的 WCF 应用程序调用 dll 方法并且它运行良好。当时我把我的dll放入`bin/debug`文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:18:06.270

我猜想这可能与 IIS 可能将二进制文件复制到影子位置这一事实有关，而当它这样做时，它可能没有意识到可能需要非托管 dll。您的“school.dll”是您的 WCF 解决方案的一部分吗？它是作为参考添加的吗？它还依赖于任何其他非托管 dll 吗？下次遇到该错误时，您可以尝试搜索系统以查找 WCF dll 的所有实例，然后如果您在影子位置找到一个，请查看您的“school.dll”是否也在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T03:12:06.367

好吧，您应该在服务器上打开 WCF 跟踪并查看实际的错误/异常是什么。但我会怀疑某种与权限相关的错误...即可以找到 DLL，但 IIS 工作进程没有正确的权限来读取它或执行其中的方法。仅出于调试目的，请尝试设置 DLL 的权限，以便“每个人”都可以读取/执行它。

# c# - MessageQueue 在上一条消息发送太快后丢弃消息

> ID：14184992
> 
> 赞同：5
> 
> 时间：2013-01-06T17:57:09.390
> 
> 标签：c#, .net, msmq, message-queue

我有一个通过私有 MessageQueue 进行通信的 Windows 服务和 Office 加载项，我使用[这个 MSDN 库示例](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.receivecompleted.aspx)在每一侧实现 EventHandlers。

我在加载项中添加了一个按钮来发送消息。它成功发送了一次，但是如果您在某些线程退出之前再次单击该按钮太快，则不会发送该消息。

这可能是由事件处理程序或接收方发生的任何处理引起的吗？我`BeginReceive`在处理消息之前尝试过打电话，但似乎没有什么不同。

如果有任何其他 IPC 方法需要较少的资源但不需要太多实施，我绝对愿意接受建议！

# c# - c++和c#应用程序通过网络进行通信

> ID：14184993
> 
> 赞同：6
> 
> 时间：2013-01-06T17:57:13.027
> 
> 标签：c#, c++, sockets, tcp, ip

我有一个用 c# 编写的简单服务器，监听某个端口。我有一个 C++ 应用程序，我需要应用程序向服务器发送一些信息。此信息是一个包含 5 个整数的结构。我在想我也可以将它作为字符串发送：例如：“ID = 3，anotherInt = 5 ...”。这是个好主意吗？如果没有，我该怎么做？

如何让它发挥作用？你有什么建议？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:04:34.363

我认为你的代码有错误。

```
char *ln = "String to send";
connect(client_socket, (struct sockaddr *)&clientService, sizeof(clientService));  
send(client_socket,(const char*)&ln, sizeof(ln), 0); 
```

发送函数的原型是：

```
ssize_t send(int socket, const void *message, size_t length, int flags); 
```

ln 已经是指向您的 char 缓冲区的指针。您正在传递 &ln，这是指针的地址。不应该只是“ln”吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T18:12:54.047

您应该修复客户端代码中的 send() 方法。sizeof() 是查找字符串长度的错误方法，应用于“ln”的强制转换并不完全满足您的需要。查看<<[此链接](https://stackoverflow.com/questions/3454007/c-sockets-can-i-only-send-characters)>>以获取示例，看看它如何为您工作。顺便说一句，如果服务器中的 C# 代码要以可预测的方式工作，则需要进行一些认真的重写。您正在使用 4096 字节的缓冲区，并且不能保证调用 Read() 可以一次性获取整个传输。您将需要一个仅用于 Read 的循环，以确保您正在阅读所需的所有内容 - 当然，这需要明确定义通信语义。快乐的网络！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T18:05:54.910

首先，`(const char*)&ln`是不正确的。`ln`是 a `char *`，因此当您使用它获取地址时，`&`您会得到 a `char **`，然后将其转换为 a `char *`。这是未定义的行为。你会想要摆脱`&`运营商。此外，您可能还想了解指针是什么以及如何使用它们。

根据经验，不要随意强制编译器让编译器闭嘴。这些错误试图告诉你一些事情。但是，`sockaddr`and`sockaddr_in`是正确的；api就是这样设计的。如果你打开`-Wall`你的编译器选项，它应该在正确的地方给你一个警告。

还：你想要`strlen(ln)`而不是`sizeof`.

### 指针上的快速 n 肮脏破败

当类型包含`*`在变量名之前时，该变量包含一个指向该类型值的指针。指针很像 C# 中的引用，它是一个保存某些数据*位置的**值。*当一个函数想要查看调用者拥有的一段数据时，这些通常被传递到函数中，有时是因为它想要修改它。字符串表示为 a ，它是指向字符串中第一个字符的指针。与指针相关的两个运算符是和。接受一个左值并返回一个指向该值的指针。接受一个指针并返回它指向的值。在这种情况下，您有一个字符串，作为 a ，并且您正在调用的函数需要 a*`char *``&``*``&``*``char *``char *`，因此您可以直接将其传入，而无需强制转换或使用`*`or `&`。但是，对于您拥有 a`struct sockaddr_in`并且它想要 a的另一个功能`struct sockaddr *`，因此您（正确地）使用`&`来获取 a `struct sockaddr_in *`，然后将其强制转换为 a `struct sockaddr *`。这称为“类型双关语”，是 API 的一个令人不快的现实。谷歌会给你一个比我更好的类型双关语的描述。*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T18:11:45.947

```
connect(client_socket, (struct sockaddr *)&clientService, sizeof(clientService)); 
```

没关系，但是这一行应该是：

```
send(client_socket,(const char*)ln, strlen(ln), 0); 
```

其中转换`(const char*)`可以省略。在您的代码中（正确地）发送了指针 ln 的值，但您很可能希望发送它所指向的字符串的整个长度。

关于要发送的消息：将整数转换为 ascii 并不是一个坏主意。您还可以查看 JSON 或[Google 的 protobuf](http://code.google.com/p/protobuf/)格式。格式化程序或解析器可以很容易地从头开始编写。*

# java - swing - 触发树单元格编辑事件

> ID：14184995
> 
> 赞同：5
> 
> 时间：2013-01-06T17:57:38.713
> 
> 标签：java, swing, editor, rename, jtree

我有一个带有可编辑节点的 JTree。

如何以编程方式触发树单元格编辑事件，即调出节点重命名文本框来代替突出显示的节点，就像用户手动突出显示它并按下 F2 一样？

基本上我想添加一个“重命名”菜单项或工具栏按钮，以提示用户了解树的特定功能，并且我希望它在用户突出显示节点时与 F2 按键功能相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:35:26.017

1）选择某个节点（通过`Mouse`/`KeyBoard`事件）并通过监听 `TreeSelectionListener`，然后选择的路径具有唯一的ID

2）添加`Swing Action`到`JMenuItem`（在`JPopup`???中，从您的问题中不清楚，如何从/到获取节点???）

3）创建类，虚空，任何东西并开火

```
SwingUtilities.invokeLater(new Runnable() {  
    public void run() {  
        tree.startEditingAtPath(path);  
    }  
}); 
```

4）基于对[`@Michael Dunn`](https://stackoverflow.com/users/1938650/michael-dunn)我 [在另一个论坛上的问题的回答](http://www.coderanch.com/t/584508/GUI/java/change-DefaultCellEditor-setClickCountToStart-int-DefaultTreeCellEditor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:13:19.113

看这个[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#dynamic)

> 为了使树节点中的文本可编辑，我们在树上调用 setEditable(true)。当用户完成对节点的编辑时，模型会生成一个树模型事件，告诉任何侦听器（包括 JTree）树节点已更改。请注意，尽管 DefaultMutableTreeNode 具有更改节点内容的方法，但更改应通过 DefaultTreeModel 覆盖方法。否则，不会生成树模型事件，并且诸如树之类的侦听器将不知道更新。

编辑：

要为节点添加上下文菜单，请参阅以下问题：[Java JTree 的右键单击上下文菜单？](https://stackoverflow.com/questions/517704/right-click-context-menu-for-java-jtree).

# wpf - 无法让视图的可见性接受来自其绑定的值

> ID：14184998
> 
> 赞同：1
> 
> 时间：2013-01-06T17:57:55.943
> 
> 标签：wpf, c#-4.0, mvvm

在开始之前，我已经在 GIST 中添加了与我的问题相关的文件：[https ://gist.github.com/4468651](https://gist.github.com/4468651)

正如标题所说，我有一个 WPF 应用程序（实现 MVVM - 或者尽可能地成为初学者），并且*MainView*的 Visibility 属性绑定似乎没有从它的*ViewModel*中提取相关值。

在启动时，会抛出一个绑定错误，表明它在实例化时没有找到*ViewModel*（即使它已传递给构造函数）。错误如下：

```
System.Windows.Data Error: 23 : Cannot convert '<null>' from type '<null>' to 
type 'System.Windows.Visibility' for 'en-US' culture with default conversions; 
consider using Converter property of Binding. 

NotSupportedException:'System.NotSupportedException: EnumConverter cannot 
convert from (null).
at System.ComponentModel.TypeConverter.GetConvertFromException(Object value)
at System.ComponentModel.EnumConverter.ConvertFrom(ITypeDescriptorContext context, 
CultureInfo culture, Object value)
at MS.Internal.Data.DefaultValueConverter.ConvertHelper(Object o, Type destinationType, 
DependencyObject targetElement, CultureInfo culture, Boolean isForward)' 
```

我尝试将*TargetNullValue*和*NullConverter*添加到绑定中，但这并没有减轻警告或问题。我还尝试直接更改为提供*System.Windows.Visibility*值的属性，以使用数据触发器检查布尔属性并相应地设置可见性，这也没有改变问题或警告消息。

*加载完所有内容后，如果我在托盘图标*上调出上下文菜单并单击“*隐藏窗口”或“*显示窗口*” （它应该通知*MainView*它需要隐藏或显示）什么都不会发生。这就是我m 期望在代码中发生（仅引用与问题相关的文件）：

App.xaml.cs 文件 -

```
namespace ordoFile
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {

        protected override void OnStartup(StartupEventArgs e)
        {
            base.OnStartup(e);

            this.Properties["bgStartup"] = false;

            if (e != null && e.Args.Count() > 0)
            {
                if(e.Args[0] == "-bg")
                {
                    this.Properties["bgStartup"] = true;
                }
            }

            Configs configs = new Configs();
            PresetFilters presets = new PresetFilters();
            OrganisationSyncer organisationSyncer = new OrganisationSyncer();
            TrayApp trayApp = new TrayApp(organisationSyncer, configs);
            Logger logger = new Logger();
            BackgroundOrganiser backgroundOrganiser = new BackgroundOrganiser(new DirectoryModel());
            ForegroundOrganiser foregroundOrganiser = new ForegroundOrganiser(new DirectoryModel());

            DependencyFactory.Container.RegisterInstance<Configs>("configs", configs);
            DependencyFactory.Container.RegisterInstance<PresetFilters>("presets", presets);
            DependencyFactory.Container.RegisterInstance<OrganisationSyncer>("organisationSyncer", organisationSyncer);
            DependencyFactory.Container.RegisterInstance<BackgroundOrganiser>("backgroundOrganiser", backgroundOrganiser);
            DependencyFactory.Container.RegisterInstance<ForegroundOrganiser>("foregroundOrganiser", foregroundOrganiser);
            DependencyFactory.Container.RegisterInstance<TrayApp>("trayApp", trayApp);
            DependencyFactory.Container.RegisterInstance<Logger>("logger", logger);

            MainViewModel mainViewModel = new MainViewModel(trayApp, organisationSyncer);
            MainView mainView = new MainView(configs, trayApp, mainViewModel);

            mainView.Show();
        }
    }
} 
```

mainViewModel变量通过*this.DataContext = mainViewModel在**MainView*实例的构造*函数中设置*

 **MainView.xaml

```
<Window x:Class="ordoFile.Views.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:ordoFile.ViewModels"
        xmlns:vw="clr-namespace:ordoFile.Views"
        Title="ordoFile" 
        Name="MainWindow"
        Height="500" 
        Width="815">

    <Window.Style>
        <Style TargetType="Window">
            <Setter Property="Visibility" Value="{Binding WindowVisibility}"  />
        </Style>
    </Window.Style>

    <Grid Name="ContentGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>

        <vw:ForegroundOrganiserView Grid.RowSpan="2"/>

        <vw:BackgroundOrganiserView Grid.Row="2"/>
    </Grid>
</Window> 
```

MainViewModel.cs

```
namespace ordoFile.ViewModels
{
    public class MainViewModel : ViewModelBase
    {
        TrayApp _trayApp;

        OrganisationSyncer _organisationSyncer;

        Visibility _windowVisibility;

        public MainViewModel(TrayApp trayApp, OrganisationSyncer organisationSyncer)
        {
            _trayApp = trayApp;
            _organisationSyncer = organisationSyncer;
            OnInitialise();
        }

        /// <summary>
                    /// Return visibilty staus of MainView
                    /// </summary>
        public Visibility WindowVisibility
        {
            get { return _windowVisibility; }
            set
            {
                _windowVisibility = value;
                OnPropertyChanged("WindowVisibility");
            }
        }

        void OnInitialise()
        {
            WindowVisibility = _organisationSyncer.WindowVisibilty;

            // Add method to event handler in OrganisationSyncer
            // that will be called when UI visibility is to be updated.
            _organisationSyncer.UpdateWindowVisibility += CheckVisibilityStatus;
        }

        /// <summary>
        /// Set property to visibility value held in OrganisationSyncer
        /// instance.
        /// </summary>
        void CheckVisibilityStatus(object sender, EventArgs e)
        {
            WindowVisibility = _organisationSyncer.WindowVisibilty;
        }
    }
} 
```

所有这些似乎工作正常，调用了 setter，并且 UI 甚至尝试读取它（我通过在更新发生后抛出的 getter 中抛出异常来检查这一点）。

我很茫然，希望有任何意见！

ps [https://www.dropbox.com/s/03z361qyws4jhuo/ordoFile.zip](https://www.dropbox.com/s/03z361qyws4jhuo/ordoFile.zip)是项目文件的链接，如果有人想修改实际项目，因为我确信我没有特别清楚地解释这个问题。

Uodate（感谢 Backlash）：我之前提到的错误似乎与我的*MainView*可见性未正确更新的问题无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T21:18:23.393

从逐步开始，错误是这一行：

```
<Setter Property="Visibility" Value="{Binding WaitImageVisibility}" /> 
```

您的 WaitImageVisibility 是一个字符串值。您需要将其更改为 Visibility 类型（顺便说一下，您通常不会将 Visibility 用作视图模型上的数据类型，但这没什么大不了的），或者您需要一个从字符串转换的转换器到能见度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:58:08.053

似乎没有将绑定*模式*设置为*TwoWay*导致了我的问题。**