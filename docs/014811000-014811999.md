# StackOverflow 问答 14811000-14811999

# javascript - 网站首页在 IE8 joomla 2.5 上加载非常缓慢

> ID：14811000
> 
> 赞同：0
> 
> 时间：2013-02-11T11:07:07.603
> 
> 标签：javascript, jquery, internet-explorer-8, joomla2.5, mootools-more

美好的一天。
当我在 IE8 上查看我的网站 Frontpage 时，它​​的加载速度非常慢，而在 Chrome 和 Firefox 等其他浏览器上加载速度更快。我不知道是什么原因导致网站加载如此缓慢。
我已经尝试了所有替代方案并按照所有说明使其加载更快。

**1**我确实为 Gzip 压缩检查了“是”。**2**我尝试禁用 mootools-more.js 文件。 **3**我的托管服务器速度很快。 **4**我确实打开了缓存设置。 **5**我没有大图，我只有博客上的缩略图。 **6**我删除了所有未使用的插件、组件和模块。

顺便说一句，我正在使用 kunena 博客组件。该网站是[https://www.mhuncut.co.za/](https://www.mhuncut.co.za/) 希望有人会帮助

亲切的问候贝塞蒂

这些是js文件：

```
 <script src="/media/system/js/mootools-core.js" type="text/javascript"></script>
  <script src="/media/system/js/core.js" type="text/javascript"></script>
  <script src="/media/system/js/mootools-more.js" type="text/javascript"></script>
  <script src="/media/kunena/js/mediaboxAdv-min.js" type="text/javascript"></script>
  <script src="/media/kunena/js/default-min.js" type="text/javascript"></script>
  <script src="/templates/beez_20/javascript/md_stylechanger.js" type="text/javascript" defer="defer"></script>
  <script type="text/javascript">
function noError(){return true;}
window.onerror = noError;

// <![CDATA[
var kunena_toggler_close = "Collapse";
var kunena_toggler_open = "Expand";
// ]]>
// <![CDATA[
var kunena_anonymous_name = "Anonymous";
// ]]>
  </script> 
```

# jakarta-ee - web.xml 列出由特定请求匹配的 Servlet 和过滤器

> ID：14811004
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:07:15.260
> 
> 标签：jakarta-ee, servlets, intellij-idea

我希望能够确定哪些 Servlet 和 Servlet-Filters 匹配特定请求以及它们被调用的顺序。在简单的 Web 应用程序中，这是微不足道的，但在复杂的应用程序中，仅通过查看 web.xml 文件就很难准确地看到匹配的内容。可以通过设置断点并查看堆栈来完成，但我希望能够做到这一点而不必启动应用程序。我使用 IntelliJ 并希望它具有这样的功能，但我一直无法找到它。我想可以编写一个脚本来解析 web.xml 文件，但如果已经存在某些东西，我不想重新发明轮子。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:23:25.893

**MyEclipse** web.xml 编辑器可以满足您的一些要求[http://www.myeclipseide.com/documentation/quickstarts/webxmleditor/#ME](http://www.myeclipseide.com/documentation/quickstarts/webxmleditor/#ME)

编辑：后来注意到你正在寻找 IntelliJ

# cakephp - Uploadify 做动作运行两次

> ID：14811008
> 
> 赞同：1
> 
> 时间：2013-02-11T11:07:44.687
> 
> 标签：cakephp, uploadify, cakephp-2.1

我在 CakePHP 中使用 jquery uploadify，我遇到了 $_SESSION 的问题，因为下面的操作通过 $ this-> request-> params ['named'] ['uid' 接收用户 ID ] 的问题是，使用 uploadify 启用的操作执行了两次，但第二个数据 $ this-> request-> params ['named'] ['uid'] 丢失了。

以下是简化的代码，以便更好地理解。

FilesController.php / index **运行两次

```
public function index() {
        $id = $this->request->params['named']['uid'];
        $us = $this->User->findById($id)['User'];
        $dir = UPLOAD_DIR . $us['id'] . '/';
        CakeSession::write('Files.atual', $dir);
        $this->set('u', $us);
        //$this->autoRender = false;
} 
```

Views/Elements/up.ctp //启用 Uploadify

```
<?php $timestamp = time(); ?>
    $(function() {
        $('#file_upload').uploadify({
            'formData'     : {
                'timestamp' : '<?php echo $timestamp; ?>',
                'token'     : '<?php echo md5('unique_salt' . $timestamp); ?>'
            },
            'swf'      : '<?= $this->request->webroot; ?>uploadify.swf',
            'preventCaching' : false,
            'uploader' : '<?= $this->request->webroot; ?>uploadify.php?session_id=<?php echo(session_id()); ?>',
            'buttonClass' : 'button icon-paperclip',
            'buttonText' : 'Enviar Arquivos',
            'onUploadSuccess' : function(file, data, response) {
                $('.files-icons').load('<?= $this->request->webroot; ?>files/reload/<?= $u['id'] ?>');
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:19:58.907

对您的上传操作的双重请求是由 uploadify 的 button_background_url 属性中的错误引起的。您可以设置自己的背景图像，通过在 .uploadify 配置中进行设置来停止对您的操作发出的附加请求：

```
'button_image_url': '/img/cake.icon.png', 
```

举个例子。您可能希望将其设置为 null 或其他一些背景图像。

# c# - 有条件地设置装配级属性

> ID：14811012
> 
> 赞同：1
> 
> 时间：2013-02-11T11:07:59.833
> 
> 标签：c#, .net, attributes, assemblies

我想根据从我的配置文件中读取的值有条件地设置程序集级别属性。是否可以？

我读到属性是静态元数据，因此虽然数据本身可以在运行时更改，但在应用程序启动后更改不适用。

我还有什么其他选择？

**更新**

*我的目标：我想要做什么*

我正在使用 TraceAttribute 来跟踪所有方法的入口和出口点。我想根据配置文件中的值在程序集级别打开或关闭此属性。我想在大多数时候关闭它，但只在紧急情况下打开它以从特定环境收集问题的证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:08:08.310

我认为这里的答案不止于此： [Can attributes are be added dynamic in C#?](https://stackoverflow.com/questions/129285/can-attributes-be-added-dynamically-in-c)

我仍然不确定为什么需要绑定程序集级属性和配置键，但是您可以将配置键传递给属性的构造函数/属性并在属性逻辑中解析其值。它看起来像：

```
[AttributeUsage(AttributeTargets.Assembly)]
public class TraceAttribute : Attribute
{
    public TraceAttribute(string traceConfigKey)
    {
        var keyValue = ConfigurationManager.AppSettings[traceConfigKey];

        DoTracing = !string.IsNullOrEmpty(keyValue) && bool.Parse(keyValue);
    }

    /// <summary>
    /// Use this property for your tracing conditional logic.
    /// </summary>
    public bool DoTracing { get; private set; }
} 
```

然后在您的 AssemblyInfo 中：

```
[assembly: Trace("DoTracing")] 
```

和配置文件：

```
<appSettings>
  <add key="DoTracing" value="true"/>
</appSettings> 
```

作为另一种解决方案，如果您使用现有属性，并且无法自定义它，您还可以在项目属性中添加条件编译符号，然后编写：

```
#if TRACE
[assembly: Trace()]
#endif 
```

但它当然需要重新编译项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:53:24.223

尝试使用

```
#ifdef TRACE
[TraceAttribute()]
#endif
MethodBeingTraced()
{
} 
```

在项目配置级别定义 TRACE 变量

# java - 为随机数生成器编写 JUnit 测试

> ID：14811014
> 
> 赞同：8
> 
> 时间：2013-02-11T11:08:12.843
> 
> 标签：java, random, junit

我有一个返回 0 到 10 之间的随机数的方法。

```
public int roll(){
    int pinsKnockedDown = (int) (Math.random() * 10);
    return pinsKnockedDown;
} 
```

我将如何为此编写 JUnit 测试？到目前为止，我已将调用置于循环中，因此它运行 1000 次并且如果 - 数字小于 0 - 数字大于 10，则测试失败

我如何测试所有数字不一样，即

![呆伯特](../Images/56cf66ad64c46482b20990d75d845efa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:12:26.127

[随机性测试](http://en.wikipedia.org/wiki/Randomness_tests)可能很复杂。例如，在上面你只是想确保你得到 1 到 10 之间的数字吗？您想确保均匀分布等吗？在某个阶段，我建议您要信任`Math.random()`并简单地确保您没有搞砸限制/范围，这本质上就是您正在做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:28:42.073

我的答案已经有缺陷了，我需要返回一个 0-10 的数字，但我原来的帖子只返回了 0-9 的范围！这是我发现的方法...

循环 100k 次并确保范围正确，它应该是 0-10（尽管我已将 10 设置为变量，以便可以重用代码）。

我还存储了循环期间发现的最高和最低值，它们*应该*位于刻度的最末端。

如果最高值和最低值相同，则表明有人伪造了随机数返回。

我看到的唯一问题是该测试*可能*会出现假阴性，但这不太可能。

```
@Test
public void checkPinsKnockedDownIsWithinRange() {
    int pins;
    int lowestPin = 10000;
    int highestPin = -10000;

    for (int i = 0; i < 100000; i++) {
        pins = tester.roll();
        if (pins > tester.NUMBER_OF_PINS) {
            fail("More than 10 pins were knocked down");
        }
        if (pins < 0) {
            fail("Incorrect value of pins");
        }

        if (highestPin < pins) {
            highestPin = pins;
        }

        if (lowestPin > pins) {
            lowestPin = pins;
        }
    }

    if (lowestPin == highestPin) {
        fail("The highest pin count is the same as the lowest pin count. Check the method is returning a random number, and re-run the test.");
    }

    if (lowestPin != 0) {
        fail("The lowest pin is " + lowestPin + " and it should be zero.");
    }

    if (highestPin != tester.NUMBER_OF_PINS) {
        fail("The highest pin is " + highestPin + " and it should be " + tester.NUMBER_OF_PINS + ".");
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T12:21:15.303

您想测试*您的*代码，而不是 Java 提供的 Math.random() 的质量。假设 Java 方法是好的。所有测试都是正确性的必要条件，但不是充分条件。因此，选择一些测试来发现使用 Java 提供的方法时可能出现的编程错误。

您可能会测试以下内容：最终，在连续调用之后，该函数将每个数字至少返回一次，而不会返回任何超出所需范围的数字。

# c# - 记住我不使用 chrome 和 IE

> ID：14811015
> 
> 赞同：0
> 
> 时间：2013-02-11T11:08:14.423
> 
> 标签：c#, asp.net, remember-me

我在 asp.net 和 c# 中工作。在我的应用程序中，我有登录页面，我有记住我的功能。我的代码在 Firefox 中运行良好，但在 chrome 和 IE 中无法运行。请让我知道我哪里出错了..

**代码**：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Request.Cookies["Usermail"].Value != null &&      Request.Cookies["userpass"].Value != null)
        {
            txtemail.Text = Request.Cookies["Usermail"].Value;
           txtpassword.Attributes["value"] = DecryptString(Request.Cookies["userpass"].Value);
        }
    }

}

protected void btnlogin_Click1(object sender, EventArgs e)
{
 if (chkremember.Checked)
        {
            ck.Expires = tkt.Expiration;
            Response.Cookies["userpass"].Value = EnryptString(txtpassword.Text);
            Response.Cookies["Usermail"].Value = txtemail.Text;
            Response.Cookies["Usermail"].Expires = DateTime.Now.AddDays(30);
            Response.Cookies["userpass"].Expires = DateTime.Now.AddDays(30);
        }

} 
```

**注意**：这里是 EnryptString(); 和解密字符串（）；是加密和解密密码的方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:46:32.173

您可以使用如下代码：

```
 if (!IsPostBack)
   {
     if (Request.Cookies["userinfo"] != null)
        {
            HttpCookie objCookie = Request.Cookies["userinfo"];
            txtUserName.Text = objCookie.Values["username"];
            txtPassword.Attributes.Add("value", objCookie.Values["password"]);
            chkRemember.Checked = true;
        }
   }

   protected void btnlogin_Click1(object sender, EventArgs e)
   {
      if (chkremember.Checked)
       {

            if (Request.Cookies["userinfo"] != null)
            {
                HttpCookie objCookie = Request.Cookies["userinfo"];
                objCookie.Values.Remove("username");
                objCookie.Values.Remove("password");
                objCookie.Values["username"] = txtUserName.Text.Trim();
                objCookie.Values["password"] = txtPassword.Text.Trim();
                objCookie.Expires = DateTime.Now.AddDays(30);
                Response.Cookies.Add(objCookie);
            }
            else
            {
                HttpCookie objCookie = new HttpCookie("userinfo");
                objCookie.Values["username"] = txtUserName.Text.Trim();
                objCookie.Values["password"] = txtPassword.Text.Trim();
                objCookie.Expires = DateTime.Now.AddDays(30);
                Response.Cookies.Add(objCookie);
            }
       }

   } 
```

# regex - 要匹配但从选择中排除的正则表达式

> ID：14811016
> 
> 赞同：0
> 
> 时间：2013-02-11T11:08:15.327
> 
> 标签：regex

我正在尝试获取消息文本中的标记，以便可以将它们替换为实际值的字符串。我的文字是

```
Hello &worls nice &to & Here &ok. 
```

表达式 (&\w+?)\W 给了我

```
worls<whitespace>
to<whitespace>
ok. 
```

但是我需要排除最后一个字母，即空格或句点

测试链接[http://regexr.com?33nrg](http://regexr.com?33nrg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:15:47.747

测试单词边界（`\b`）而不是寻找非单词字符`\W`。

此外，最好学习如何在您的工具或选择的语言中使用正则表达式*匹配组*，这样您就可以检索和使用匹配任何子表达式的子字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:16:55.697

这应该有效。

```
&\S+[^\.\s] 
```

或者，正如安东建议的那样。

```
&\S+\b 
```

# c# - 如何使用正则表达式验证器在电子邮件 ID 错误时停止登录按钮功能

> ID：14811026
> 
> 赞同：0
> 
> 时间：2013-02-11T11:09:00.220
> 
> 标签：c#, asp.net, login, membership

我`login control`在 asp.net 中使用。
我正在使用电子邮件 ID 而不是用户名登录。
那工作正常。
我正在通过使用`<asp:RegularExpressionValidator />`控件验证电子邮件 ID 文本框来检查电子邮件 ID。
我将`ControlToValidate`属性作为 emailid 文本框的 id。
当我单击登录按钮时，它正在验证并显示错误消息`Email should be in correct format`。
但这并没有停止在这里登录。
它正在尝试使用错误的电子邮件 ID 文本框值和密码登录，并说明`You are not register user`当用户仅以正确格式输入电子邮件 ID 时应该发生的情况。
简单来说，登录控制进行

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e) 
```

事件，即使正则表达式验证器说电子邮件格式不正确。

如何停止登录控件的这种登录行为？

**这是我的正则表达式：**

```
<asp:RegularExpressionValidator ID="emaildValidate" runat="server" 
     ErrorMessage="Email should be in correct format" 
     SetFocusOnError="True" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
     ControlToValidate="UserName" ValidationGroup="Login1">
</asp:RegularExpressionValidator> 
```

**按钮 HTML**

```
<asp:Button ID="LoginButton" CssClass="loginbutton" runat="server" CommandName="Login"
                                        Text="Sign In" ValidationGroup="Login1" OnClick="LoginButton_Click" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:52:25.940

这是我的登录控制，它对我来说很好，检查你的

```
<asp:Login ID="LoginUser" runat="server" EnableViewState="false" RenderOuterTable="false">
        <LayoutTemplate>
            <span class="failureNotification">
                <asp:Literal ID="FailureText" runat="server"></asp:Literal>
            </span>
            <asp:ValidationSummary ID="LoginUserValidationSummary" runat="server" CssClass="failureNotification" 
                 ValidationGroup="LoginUserValidationGroup"/>
            <div class="accountInfo">
                <fieldset class="login">
                    <legend>Account Information</legend>
                    <p>
                        <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Email:</asp:Label>
                        <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                             CssClass="failureNotification" ErrorMessage="User Name is required." ToolTip="User Name is required." 
                             ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                             <asp:RegularExpressionValidator ID="emaildValidate" runat="server" 
     ErrorMessage="Email should be in correct format" 
     SetFocusOnError="True" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"
     ControlToValidate="UserName" ValidationGroup="LoginUserValidationGroup">
</asp:RegularExpressionValidator>
                    </p>
                    <p>
                        <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                        <asp:TextBox ID="Password" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password" 
                             CssClass="failureNotification" ErrorMessage="Password is required." ToolTip="Password is required." 
                             ValidationGroup="LoginUserValidationGroup">*</asp:RequiredFieldValidator>
                    </p>
                    <p>
                        <asp:CheckBox ID="RememberMe" runat="server"/>
                        <asp:Label ID="RememberMeLabel" runat="server" AssociatedControlID="RememberMe" CssClass="inline">Keep me logged in</asp:Label>
                    </p>
                </fieldset>
                <p class="submitButton">
                    <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" ValidationGroup="LoginUserValidationGroup"/>
                </p>
            </div>
        </LayoutTemplate>
    </asp:Login> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:09:31.250

您提到您正在验证您`emailid`不是`username`但在您的必填字段验证器中

```
 ControlToValidate="UserName". 
```

如果您的电子邮件文本框名称是用户名，那么可以验证正确的文本框。

# delphi - 如何在 C++ Builder 中使用 Delphi Inc() 和 Dec() 过程

> ID：14811028
> 
> 赞同：2
> 
> 时间：2013-02-11T11:09:12.547
> 
> 标签：delphi, c++builder, c++builder-xe

我是一个新手程序员。我需要像这样在 C++ Builder XE 中使用 Delphi`Inc()`和程序：`Dec()`

```
Inc(Filler);

Dec(GridClientWidth); 
```

任何人都可以帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T11:12:17.770

您正在寻找`++`and`--` [运算符](http://en.cppreference.com/w/cpp/language/operator_incdec)：

```
Filler++;
GridClientWidth--; 
```

在 C++ 中，这些运算符被嵌入到语言中。在 Delphi 中，`Inc`并`Dec`作为[内部例程](http://docwiki.embarcadero.com/RADStudio/XE3/en/Delphi_Intrinsic_Routines)实现。

# jquery - 如何让我推迟上班

> ID：14811029
> 
> 赞同：0
> 
> 时间：2013-02-11T11:09:19.690
> 
> 标签：jquery

我的延迟需要一些帮助，尝试使用 .then 和 .done。但它不起作用。它在我的 servercall 完成之前写入我的 console.log。

```
$.when(PersonAtlLawUpdate(personRef)).then(console.log('test'));

function PersonAtlLawUpdate(personRef, cbFunc) {
    var selectionPanel = $('div#SelectionPanel'),
        fromdate = selectionPanel.find('input#FromDateTextBox')[0].defaultValue,
        timeSpan = selectionPanel.find('select#TimeSpanDropdownList').data('timespanvalue'),
        url = "MonthOverview.aspx/OnePersonAtlLawUpdate";
    $.ajax({
        url: url,
        data: JSON.stringify({ personRef: personRef, fromdate: fromdate, timespan: timeSpan }),
        type: "POST",
        contentType: "application/json",
        dataType: "JSON",
        context: document.body,
        success: function (atlError) {
            changePersonAtlStatusIcon(atlError, personRef);
            if (cbFunc != null) {
                cbFunc();
            }
            return atlError;
        },
        error: function (xhr, status, errorThrown) {
            //alert(errorThrown + '\n' + status + '\n' + xhr.statusText);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:12:59.900

`PersonAtlLawUpdate()`应该返回一个 Deferred 对象以便与`$.when()`.

由于您感兴趣的 deferred 由 返回`$.ajax()`，因此您应该编写：

```
function PersonAtlLawUpdate(personRef, cbFunc) {
    // [...]
    return $.ajax({
        // ...
    });
}; 
```

# cortex-m3 - lpc 1769 上下文切换

> ID：14811030
> 
> 赞同：2
> 
> 时间：2013-02-11T11:09:21.253
> 
> 标签：cortex-m3, lpc

1.  我正在尝试在 lpc 1769 (cortex m3) 上进行上下文切换。我正在尝试编写一个计算数字指数的例程，在用户模式下将其作为子例程运行，但使用 SVC 调用和中断处理程序来要求 SVC 进程代表它与终端交互。要打印的值应作为寄存器参数传递给 SVC。

2.  如果我从用户模式切换到主模式，如何将存储在用户模式堆栈中的值切换到主模式？

3.  任何人都可以为上述查询编写一个小程序吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:40:41.367

1.  您最多可以轻松传递四个参数。只需编写一个 C 函数并使用内联汇编程序调用主管：

    ```
    #define svc(code) asm volatile ("svc %[immediate]"::[immediate] "I" (code))
    #define SVC_WRITE_DATA 1

    void sv_call_write_data(char *string, int length)
    {
        svc(SVC_WRITE_DATA);
    } 
    ```

请参阅第 3 点，如何在主管调用处理程序中提取这些参数。

1.  您可以直接从用户模式堆栈中获取值。使用内联汇编器确定调用者使用的堆栈：

    ```
     asm volatile(
            "tst lr, #4\t\n" /* Check EXC_RETURN[2] */
            "ite eq\t\n"
            "mrseq r0, msp\t\n"
            "mrsne r0, psp\t\n"
            "b %[sv_call_handler_main]\t\n"
            : /* no output */
            : [sv_call_handler_main] "i" (sv_call_handler_main) /* input */
            : "r0" /* clobber */
        ); 
    ```

2.  由于我目前也在为此烦恼，所以我写了一篇关于它的博客文章。您的 IDE 使用 GCC，因此这也适用于您：http: [//falstaff.agner.ch/2013/02/18/cortex-m3-supervisor-call-svc-using-gcc/](http://falstaff.agner.ch/2013/02/18/cortex-m3-supervisor-call-svc-using-gcc/)

# android - ScrollView 根本不滚动

> ID：14811032
> 
> 赞同：33
> 
> 时间：2013-02-11T11:09:30.007
> 
> 标签：android, scroll, android-linearlayout, android-scrollview

我无法使 ScrollView 正确滚动。它总是切断底部的内容，就好像它是一个普通的LinearLayout一样。

我的代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout android:id="@+id/scroll_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:isScrollContainer="true"
        android:orientation="vertical" > 
```

当然，我已经尝试添加/删除“fillViewport”和“isScrollContainer”属性，它根本没有改变任何东西。

# 这适用于 ScrollView（仅限垂直）

**Horizo​​ntalScrollView**必须用于水平滚动。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-11T13:06:50.000

答：当用作 XML 布局的根元素时，ScrollView 不起作用。它必须被包裹在一个 LinearLayout 中。

然后解决方案：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView android:id="@+id/scroll_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true" >

        <LinearLayout android:id="@+id/scroll_layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2021-01-04T01:47:27.410

❌尝试了上述所有答案，但我的问题仍未解决。经过一些调试和更改后，我的问题得到了解决，即 ScrollView 正在滚动。

*   我们不需要向 ScrollView 添加任何父元素以使其滚动（如此处的其他一些答案中所述）。

**✔️修复是针对我的问题✔️**

*   将 ScrollView 的高度更改为 0dp

    安卓：layout_height="0dp"

*   将顶部和底部约束到父/相应视图/元素

    应用：layout_constraintTop_toBottomOf="@+id/imageView4" 应用：layout_constraintBottom_toBottomOf="父"

***最终的 xml 看起来像这样***

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="0dp"
    app:layout_constraintTop_toBottomOf="@+id/imageView4"
    app:layout_constraintBottom_toBottomOf="parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

           <!-- Loong content -->

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-31T08:02:55.130

Scroll View as Parent 没有问题。当我们将填充/边距添加到滚动视图的直接子级时，我遇到了这样的问题。保持滚动视图的子视图只有高度和宽度属性，它会正常工作。

```
 <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:animateLayoutChanges="true"
        android:fillViewport="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:animateLayoutChanges="true"
            android:orientation="vertical">
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-24T21:44:53.627

所选答案不正确！

您可以使用 ScrollView 作为根视图，它对您不起作用，因为您缺少填充。

添加类似：

```
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:paddingBottom="@dimen/activity_vertical_margin" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-11T11:23:51.140

删除`android:isScrollContainer`in `LinearLayout`。根据文档`android:isScrollContainer`用于设置可滚动的视图。我希望它对你有帮助。有关定义，请参阅此[链接](http://developer.android.com/reference/android/view/View.html#attr_android%3aisScrollContainer)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-10T18:26:46.770

Android Studio 将 NestedScrollView 添加到其某些模板（例如 Master-Detail）的活动文件中。在片段文件中有一个 ScrollView 并且在该片段的活动文件中有另一个会阻止滚动视图工作。在我的片段文件中删除 ScrollView 并将其留在活动文件中为我解决了这个问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-09T07:09:04.657

试试这个解决方案，只需使用延迟后的方法来延迟滚动。

片段测试.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rootRelativeLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:fresco="http://schemas.android.com/apk/res-auto">

    <ScrollView
        android:id="@+id/scrollView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="40dp"
        android:fillViewport="true"
        android:scrollbars="none">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
            ...
        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

测试片段.java

```
...
private ScrollView mScrollView;
...
mScrollView = (ScrollView) mView.findViewById(R.id.scrollView);
mScrollView.setSmoothScrollingEnabled(true);
...
new Handler().postDelayed(new Runnable() {
    @Override
     public void run() {
         if(isAdded()) {
             // Scroll 1000px down
             mScrollView.smoothScrollTo(0, 1000);
         }
     }
}, 150); 
```

这对我有用，希望这会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-27T04:30:02.390

试试这个，

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:fillViewport="true" >

<LinearLayout android:id="@+id/scroll_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" > 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-24T13:00:28.300

我终于发现我花了 5 个小时逐步构建所有内容并一次测试每一步，呃....

无论如何，如果您对此有疑问，我发现 setOntouch 侦听器正在弄乱您的代码-至少在我的情况下是...

我必须想办法解决它，但尝试删除你的 ontouch 监听器并测试你的代码 - 它必须工作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-14T08:01:27.360

这解决了我的问题：我添加`android:isScrollContainer="true"`到 LinearLayout 并删除了 ScrollView **代码之前：**

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">
<ScrollView
    android:id="@+id/scrollViewRecords"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true">

    <LinearLayout
        android:id="@+id/sheepList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    </LinearLayout>
</ScrollView>
</LinearLayout> 
```

**代码之后**

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:isScrollContainer="true">

    <LinearLayout
        android:id="@+id/sheepList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-26T18:42:45.887

有没有办法结束这个问题？它很旧，目前标记为有效的答案没有意义。现在关于 ScrollView 唯一有效的是：

> 允许滚动放置在其中的视图层次结构的视图组。**滚动视图中可能只有一个直接子级**。要在滚动视图中添加多个视图，请让您添加视图组的直接子级，例如 LinearLayout，并在该 LinearLayout 中放置其他视图。永远不要将 RecyclerView 或 ListView 添加到滚动视图。这样做会导致糟糕的用户界面性能和糟糕的用户体验。

取自官方文档：[https ://developer.android.com/reference/android/widget/ScrollView.html](https://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-28T19:30:44.660

```
 <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fillViewport="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">
......
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-24T17:15:35.787

看起来您没有使用某些属性和规则。

```
android:layout_height="0dp"
android:scrollbars="none"
android:fillViewport="true" 
```

此外，在此之后尝试将所有滚动内容包装在*Constraint Layout*中。

```
<tech.loung.views.SlidingScrollView
android:id="@+id/scrollview_settings"
android:layout_width="match_parent"
android:layout_height="0dp"
android:scrollbars="none"
android:fillViewport="true"
app:layout_constraintBottom_toBottomOf="parent"
app:layout_constraintTop_toBottomOf="@+id/top_layout"> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-15T09:54:17.613

在我的场景中，当我使用 Padding=10dp 更新滚动视图内的线性布局时，它起作用了。就是这样滚动视图滚动成功

```
<ScrollView
    android:id="@+id/mainScrollview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="?attr/actionBarSize">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/top_layout"
        android:orientation="vertical"
        android:layout_margin="10dp"
        android:padding="10dp"> 
```

# oracle - 使用 Struts2 和 Hibernate 框架将 java.lang.String 转换为 java.sql.Blob

> ID：14811033
> 
> 赞同：1
> 
> 时间：2013-02-11T11:09:30.970
> 
> 标签：oracle, hibernate, jakarta-ee, struts2, blob

有没有办法将 java.lang.String 转换为 java.sql.Blob ？

请帮助我，这是我的项目要求之一需要将用户密码作为 Blob 格式存储到数据库中（oracle10g）

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:14:06.280

I find this example. I see you use oracle db so this may help

```
package mypackage1;
import java.text.*;
import java.sql.*;
import java.util.*;

public class BlobTest 
{
    public BlobTest()
    { }

    public static void main(String[] args)throws SQLException 
    {
       try {
           DriverManager.registerDriver (new oracle.jdbc.driver.OracleDriver());
           Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:rashmidb", "scott", "tiger");
           PreparedStatement ps = conn.prepareStatement("INSERT INTO BLOBTABLE VALUES (?)");
           oracle.sql.BLOB myBlob = oracle.sql.BLOB.createTemporary(conn, false, oracle.sql.BLOB.DURATION_SESSION);
           String myStr = "To test if the string gets inserted into the blob column";
           byte[] buff = myStr.getBytes();
           myBlob.putBytes(1,buff);
           ps.setBlob(1, myBlob);
           int count = ps.executeUpdate();
           ps.close();
           conn.close(); 
    }
     catch (Exception e) {
                      e.printStackTrace();
     }
   }

} 
```

[full article](https://forums.oracle.com/forums/thread.jspa?threadID=280677)

if you use hibernate look at [this](http://studyjava.org/client-side-scripts/convert-string-to-blob-and-blob-to-string)

# php - 使用从服务器隐藏我的屁股

> ID：14811036
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:09:43.587
> 
> 标签：php, proxy

所以我正在尝试使用隐藏我的屁股[http://www.hidemyass.com/](http://www.hidemyass.com/)从网站获取数据。我希望能够将链接发送到搜索中，然后将我的屁股 URL 隐藏到该页面。因此，例如，我从服务器插入一个指向网页的链接，比如说谷歌：http: [//google.com](http://google.com)，作为回报，我得到类似的东西

[http://7.hidemyass.com/ip-1/encoded/Oi8vd3d3Lmdvb2dsZS5jb20v](http://7.hidemyass.com/ip-1/encoded/Oi8vd3d3Lmdvb2dsZS5jb20v)

有可能吗，如果是这样的话，怎么可能。谢谢大家！

附言。如果有什么不清楚，我可以解释。

pss 我注意到相同的 url 总是被编码成相同的 url 字符串，所以我可以像他们一样对 URL 进行编码就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:16:52.787

我不了解 PHP，但这里有一些指南可以帮助您弄清楚。使用 HideMyAss 查看任何页面的来源。这是 URL 栏的表单

```
<form action="/includes/process.php?action=update&amp;idx=1" method="post"id="hmaform">
  <input type="hidden" name="obfuscation" value="1">
  <input id="hmainput" type="text" name="u" value="your url here">
  <input id="hmasubmit" type="image" src="/images/proxified/submit-button.png" value="">
</form> 
```

如您所见，您只需要 https POST 到给定的 URL。它可能会响应您可以解析以提取 URL 的 http 重定向。

# linux - 从文件的多行中删除带有重复字符串的行

> ID：14811037
> 
> 赞同：0
> 
> 时间：2013-02-11T11:09:54.837
> 
> 标签：linux

我有一个包含许多此类行的文件，其中包含一些文件的路径。

```
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x160.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x134.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x178.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_20x68.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_280x128.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_8x160.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_8x134.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_64x7.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_24x128.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_8x178.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_20x68.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_280x128.v
../../ds3_src/wrapper/memory/beh/mem_1w1r_1x160.v
../../ds3_src/wrapper/memory/beh/mem_1w1r_1x128.v
../../us_src/wrapper/memory/beh/mem_1w1r_128x8.v
../../us_src/wrapper/memory/beh/mem_1w1r_8x160.v
../../us_src/wrapper/memory/beh/mem_1w1r_8x178.v
../../us_src/wrapper/memory/beh/mem_1w1r_20x68.v
../../us_src/wrapper/memory/beh/mem_1w1r_280x128.v
../../src/sw/mem_1w1r_8x31.v
../../src/sw/mem_1w1r_8x35.v 
```

其中一些是重复文件。

我希望对它进行排序和统一，以便删除重复的文件行。

```
% grep -r "mem_1w" rtl_list | awk '{split($$0,a,"/"); print a[7]}' | sort -u 
```

我可以做类似上面的事情来统一文件名 - 但这会导致行的第一部分`../../ds1_src/....`等被砍掉。此外，在 a[5] 和`../../src/sw/mem_1w1r_8x31.v`.

```
mem_1w1r_128x8.v
mem_1w1r_145x133.v
mem_1w1r_1x128.v
mem_1w1r_1x160.v
mem_1w1r_20x68.v
mem_1w1r_24x128.v
mem_1w1r_280x128.v
mem_1w1r_64x7.v
mem_1w1r_73x133.v
mem_1w1r_8x134.v
mem_1w1r_8x160.v
mem_1w1r_8x178.v 
```

我怎样才能解决这个问题 - 得到类似的东西 -

```
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x160.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x134.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_64x7.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_1x160.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_1x128.v 
```

这将删除存在于不同位置的任何重复文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:36:02.067

这是一种使用方法`awk`：

```
awk -F "/" '/mem_1w/ && !a[$NF]++' file 
```

结果：

```
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x160.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x134.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_8x178.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_20x68.v
../../ds1_src/wrapper/memory/beh/mem_1w1r_280x128.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_64x7.v
../../ds2_src/wrapper/memory/beh/mem_1w1r_24x128.v
../../ds3_src/wrapper/memory/beh/mem_1w1r_1x160.v
../../ds3_src/wrapper/memory/beh/mem_1w1r_1x128.v
../../us_src/wrapper/memory/beh/mem_1w1r_128x8.v
../../src/sw/mem_1w1r_8x31.v
../../src/sw/mem_1w1r_8x35.v 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:22:21.167

```
回声>输出.txt；
读F；做
    N=$(基本名称 ${F});
    grep $N output.txt 1>/dev/null || 回声 $F >> output.txt ;
完毕
```

当然，您可以在一条线上完成。

我认为从我得到的输入文件中你的输出也不正确（输入中没有所有文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:17:05.387

也许您可以使用 python 来保持文件名和现有文件路径之间的映射，例如 (key, [path1, path2 ...])。然后您可以对可能的文件路径进行排序并仅使用第一个。

```
import os.path
import fileinput

# dictonary to hold (key, [path1, path2 ...]) 
file_paths = {}

for line in fileinput.input("input.txt"):
    value = line.strip('\n')
    base = os.path.basename(line)

    if base in file_paths:
      # add another value to existing key
      keys = file_paths[base]
      keys.append(value)
      file_paths[base] = keys
    else:
      # init another bucket
      file_paths[base] = [value]

# print only firt value
for key in file_paths.keys():
    sl = sorted(file_paths[key])
    print sl[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:39:24.550

您可以使用以下内容使列表按文件名唯一：

```
awk -F/ '!F[$NF] && F[$NF]=$0' 
```

这将仅包括具有每个唯一名称的第一个文件的路径。然后，您可以通过管道传输结果`sort`，但不需要该`-u`选项。

这通过在 awk 中构建一个数组来工作。每个索引都是没有路径的文件名（使用`-F/`选项，文件名是简单的`$NF`）。每个元素都是具有该文件名的第一个文件的完整路径（完整路径为`$0`）。新的数组条目只有在文件名以前没有出现过时才会被添加和打印。

# c++ - 再次关于在 QT 中将窗口大小调整为其子项的大小

> ID：14811038
> 
> 赞同：3
> 
> 时间：2013-02-11T11:10:04.523
> 
> 标签：c++, qt, user-interface, layout

类似的问题已经问过了，但没有给出明确的答案，所以我再问一次。假设我们有一个 QMainWindow 和一个 QScrollArea 里面。我在程序中调整 QScrollArea 的大小，我希望窗口相应地调整大小。以下代码几乎可以正常工作：当新图像大于旧图像时，窗口的大小会增加。但是，当新图像变小时，窗口并没有变小，而是只有 QScrollArea 变小，QScrollArea 和其他元素（标签、按钮）之间出现大空间

```
class PictureDialog : public QMainWindow {
Q_OBJECT

public:
    PictureDialog() : QMainWindow() {
        QWidget* canvas = new QWidget(this);
        setCentralWidget(canvas);
        QVBoxLayout* layout = new QVBoxLayout(canvas);
        imageLabel = new QLabel(" ");
        imageLabel->setStyleSheet("QLabel { background-color : white; color : black; }");
        scrollArea = new QScrollArea(this);
        scrollArea->resize(300, 300);
        scrollArea->setBackgroundRole(QPalette::Dark);
        scrollArea->setWidget(imageLabel);
        layout->addWidget(scrollArea);
        imgnamelabel = new QLabel(tr("Picture: "), this);
        layout->addWidget(imgnamelabel);
        QHBoxLayout *hlayout = new QHBoxLayout();
        layout->addLayout(hlayout);
        yesButton = new QPushButton(QPixmap(":pics/yes.png"), QString::null, this);
        yesButton->setShortcut(Qt::Key_Plus);
        yesButton->setSizePolicy(QSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed));
        hlayout->addWidget(yesButton);
        noButton = new QPushButton(QPixmap(":pics/no.png"), QString::null, this);
        noButton->setShortcut(Qt::Key_Minus);
        noButton->setSizePolicy(QSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed));
        hlayout->addWidget(noButton);
        hlayout->addStretch();
        connect(yesButton, SIGNAL(clicked()), SLOT(hide()));
        connect(noButton, SIGNAL(clicked()), SLOT(hide()));
    }

    void setPicture(QString imagePath, bool showNo) {
        imgnamelabel->setText(tr("Picture: ") + imagePath);
        if (!QFile::exists(imagePath)) {
            imageLabel->setText(tr("Picture file not found: ") + imagePath);
            imageLabel->resize(imageLabel->fontMetrics().boundingRect(imageLabel->text()).width(),
                               imageLabel->fontMetrics().boundingRect(imageLabel->text()).height());
        } else {
            QImage image(imagePath);
            if (image.isNull()) {
                imageLabel->setText(tr("Failed to open picture file: ") + imagePath);
                imageLabel->resize(imageLabel->fontMetrics().boundingRect(imageLabel->text()).width(),
                                imageLabel->fontMetrics().boundingRect(imageLabel->text()).height());
            } else {
                imageLabel->setPixmap(QPixmap::fromImage(image));
                imageLabel->resize(image.width(), image.height());
            }
        }

        scrollArea->setFixedSize(mini(imageLabel->width() + 20, QApplication::desktop()->screenGeometry().width() * 8 / 10),
                                 mini(imageLabel->height() + 20, QApplication::desktop()->screenGeometry().height() * 8 / 10));
        adjustSize();
        updateGeometry();
        if (showNo)
            noButton->setEnabled(true);
        else
            noButton->setEnabled(false);
    }

    QPushButton *yesButton, *noButton;

private:
    QLabel *imageLabel;
    QLabel *imgnamelabel;
    QScrollArea* scrollArea;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-28T07:47:31.690

几个月前我遇到了类似的问题（使用 Qt SQL 表视图）。

**简而言之**：尝试添加一个 CentralWidget->adjustSize(); 调整 MainWindow 的大小***之前***的行。

例子：

```
...
scrollArea->setFixedSize(...);
canvas->adjustSize();
adjustSize();
updateGeometry();
... 
```

**说明**：就我而言，关键因素是我一直在使用 MainWindow + CentralWidget 组合来呈现 UI。

当您尝试将*“CentralWidgeted”* MainWindow 的大小调整为其内容的大小时，它将以 CentralWidget 的大小作为内容大小。在这种情况下，MainWindow 的 adjustSize() 方法尝试将窗口大小调整为 CentralWidget，但 CentralWidget 仍然具有原始的 - 较大的 - 大小 [1]，因此 MainWindow 保持其原始大小。

[1]：一些小部件可能能够自动调整自己的大小（我不记得有什么特别的，但我敢肯定有一些），但在你的代码中你使用一个简单的 QWidget 作为 CentralWidget 并且 QWidgets 缺乏这种能力（就像 QMainWindows 一样）。如果使用这种“自动调整大小”小部件，可以省略调整 CentralWidget 的大小。

# google-chrome - 在 Chrome 中替换服务器 JSON 响应

> ID：14811039
> 
> 赞同：7
> 
> 时间：2013-02-11T11:10:06.290
> 
> 标签：google-chrome, google-chrome-extension

我在使用一些基于 Web 的工具时遇到问题，该工具以 AJAX 方式向服务器查询 JSON 数据。它不能正常工作 - 返回的结果通常不是我想要的，我需要**等待很多时间**让服务器处理请求。

事实是我总是希望返回相同的数据（准确地说是几个人），所以我想到了伪造服务器响应。我试图通过几种方式实现这一目标，但没有成功。

我尝试使用 Chrome 的 WebRequest 功能 - 我准备了一个扩展并将请求重定向到我的 JSON 编码的数据 URL。它有效，但只有当我在 Chrome 的地址字段中手动输入地址时。当 Web 应用程序尝试访问该地址时，重定向静默失败。我立即想到了 Access Origin 限制，并迅速设置了一个发送 Access-Control-Allow-Origin 标头的 Web 服务器。

不幸的是，这也不起作用。当我手动输入地址时，正在查询服务器并返回正确的 JSON，但在应用程序中请求......默默地失败了。看起来 Chrome 完全忽略了可能的 Access-Control-Allow-Origin 标头，因为它甚至没有查询服务器。Chrome 很可能只分析 URL，因为当我将有问题的请求重定向到应用程序域中的随机 URL 时，它起作用了。

我还尝试使用相同的方法伪造应用程序的整个 JavaScript 文件 - 该文件静态链接到文档（例如，它通过标准脚本标签包含）。我惨败了——重定向只是默默地失败了，就像我第一次尝试失败一样。

我的问题的一个常见解决方案是使用某种更改服务器输出的代理，但我不能这样做 - 我不想等待几分钟让服务器处理请求。顺便说一句，该应用程序只能通过 HTTPS 访问。

有没有其他方法可以使用我的硬编码 JSON 来提供应用程序？或者，也许我错过了什么？

**编辑** 插件代码，基于“catblock”示例：

```
chrome.webRequest.onBeforeRequest.addListener(
function(info) {
  console.log("AJAX call intercepted: " + info.url)
  return {redirectUrl: 'data:application/json,"test"'};
},
// filters
{
  urls: [
  "*://address.to.the.js.file.requested"
]
}, ['blocking']); 
```

清单文件，我只将域添加到权限部分：

```
{
"name": "CatBlock",
"version": "1.0",
"description": "I can't has cheezburger!",
"permissions": ["webRequest", "webRequestBlocking", 
              "*://some.domain.com/*"],
"background": {
  "scripts": ["background.js"]
},

"manifest_version": 2
} 
```

**编辑 2：** 以下是 Chrome 开发者控制台网络面板的屏幕截图，显示请求被静默取消： ![控制台截图](../Images/a7ea42623d6e2b7fb426de3ea70e9d6b.png) ![控制台截图](../Images/49fea60fbf752ba7e9a8f3c6b28ecdaf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:17:59.127

有几种方法可以做到这一点。

最简单的方法是使用[Fiddler](http://www.fiddler2.com/fiddler2/) 如果你懂俄语，或者你的浏览器有不错的翻译功能，你可以阅读这篇[文章](http://habrahabr.ru/post/140147/)——据我所知，在你的情况下你需要第二部分——关于 Autoresponder。或者下面有几个英文手册的链接。

这个截图就是答案![在此处输入图像描述](../Images/d0e437f9228fbc35214cafef43d291e5.png)

关于 chrome 中的 Access-Control-Allow-Origin - 我的[扩展](https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi)也非常简单（只需添加到响应标题“Access-Control-Allow-Origin：*”）并允许您在开发某些功能时避免此错误。您也可以用 Fiddler 做同样的事情在 chrome 中，您可以使用开发人员密钥“chrome --disable-web-security”运行 Chrome，它也可以删除“Access-Control-Allow-Origin”的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:00:30.400

如果我理解正确，*您*可以控制生成 JSON 响应的服务器。*如果是这种情况，那么在没有*任何 Chrome 扩展的情况下，必须有可能使用正确的 CORS 标头来获取 AJAX (XMLHTTPRequest) 请求和响应。

根据我的经验，失败的跨域 XHR 请求*似乎*只是在 Chrome 中“静默”失败，但如果您仔细查看控制台，您会看到*类似于*以下内容的错误消息：

> XMLHttpRequest 无法加载[http://example.com/yourJSONfile.json](http://example.com/yourJSONfile.json)。Access-Control-Allow-Origin 不允许来源[http://your-app-domain.com:80 。](http://your-app-domain.com:80)

此消息有时可能会产生误导，因为如果与 CORS 相关的*任何内容*出错（即使 Access-Control-Allow-Origin 设置正确），它也会显示出来。此外，在网络选项卡上，您将看到 XHR 请求和响应标头。

现在让我们谈谈 CORS 标头。我必须查看您请求的 AJAX 选项或 HTTP 请求标头才能准确说明您需要哪些 CORS 标头，但据我现在所知，“Access-Control-Allow-Origin: *”可能不足以满足您的要求成功：根据您的请求标头（我目前不知道，因此以下只是示例），您可能需要额外的 CORS 标头，例如：

> “访问控制允许方法”：“选项、获取、发布”
> 
> “Access-Control-Allow-Headers”：“内容类型，接受，来源”

此外，出于调试目的，启用：

> “访问控制公开标头”：“访问控制允许来源”

这样您就可以在网络选项卡上看到与 CORS 相关的响应标头。

# mysql - 在 Windows 上使用 Sonar 和 MySQL 5.6 的架构设置失败

> ID：14811040
> 
> 赞同：3
> 
> 时间：2013-02-11T11:10:06.443
> 
> 标签：mysql, sonarqube

我在 Windows 机器上安装了 Sonar 3.4.1 和 Mysql 5.6.10。

我创建了一个 mysql 模式“声纳”并将其所有权限授予用户“声纳”。我已将声纳配置为使用此用户。我按照[codehaus 声纳页面](http://docs.codehaus.org/display/SONAR/Installing+Sonar#InstallingSonar-InstallingSonarServer)上的说明进行了此操作。

启动声纳时，它开始在模式中创建表。有时会发生错误，指出“指定的密钥太长；最大密钥长度为 767 字节”（最后有完整的错误消息）。

根据[这个问题](https://stackoverflow.com/questions/1814532/1071-specified-key-was-too-long-max-key-length-is-767-bytes)，mysql中的索引长度是有限的。因为这是记录在案的，所以我希望 Sonar 创建的索引不会超过限制。显然它试图这样做。

是我遗漏了一些重要的配置，还是 sonar 和 mysql 的两个版本不兼容？我该怎么做才能让它与这些版本一起使用？

完整的错误信息：

```
信息 | 虚拟机 1 | 2013/02/11 11:28:25 |
信息 | 虚拟机 1 | 2013/02/11 11:28:25 | == CreateProperties：迁移 ============================================= ==
信息 | 虚拟机 1 | 2013/02/11 11:28:25 | -- create_table("属性")
信息 | 虚拟机 1 | 2013/02/11 11:28:25 | -> 0.0320s
信息 | 虚拟机 1 | 2013/02/11 11:28:25 | -> 0 行
信息 | 虚拟机 1 | 2013/02/11 11:28:25 | -- add_index(:properties, :prop_key, {:name=>"properties_key"})
2013.02.11 11:28:25 错误 jruby.rack 无法创建共享应用程序实例
org.jruby.rack.RackInitializationException：发生错误，所有后续迁移都取消：

ActiveRecord::JDBCError: 指定的键太长；最大密钥长度为 767 字节： CREATE INDEX `properties_key` ON `properties` (`prop_key`)
    来自 D:/Programs/sonar-3.4.1/war/sonar-server/WEB-INF/gems/gems/activerecord-jdbc-adapter-1.1.3/lib/arjdbc/jdbc/adapter.rb:183:in `执行'
[省略堆栈跟踪]
org.jruby.exceptions.RaiseException: (StandardError) 发生错误，所有后来的迁移都取消了：

ActiveRecord::JDBCError: 指定的键太长；最大密钥长度为 767 字节： CREATE INDEX `properties_key` ON `properties` (`prop_key`)
2013.02.11 11:28:25 ERROR jruby.rack 错误：应用程序初始化失败
org.jruby.rack.RackInitializationException：发生错误，所有后续迁移都取消：

ActiveRecord::JDBCError: 指定的键太长；最大密钥长度为 767 字节： CREATE INDEX `properties_key` ON `properties` (`prop_key`)
    来自 D:/Programs/sonar-3.4.1/war/sonar-server/WEB-INF/gems/gems/activerecord-jdbc-adapter-1.1.3/lib/arjdbc/jdbc/adapter.rb:183:in `执行'
[省略堆栈跟踪]
org.jruby.exceptions.RaiseException: (StandardError) 发生错误，所有后来的迁移都取消了：

ActiveRecord::JDBCError: 指定的键太长；最大密钥长度为 767 字节： CREATE INDEX `properties_key` ON `properties` (`prop_key`)
信息 | 虚拟机 1 | 2013/02/11 11:28:25 | 2013-02-11 11:28:25.421:INFO::Started SelectChannelConnector@0.0.0.0:9000

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:42:41.253

没错，某些索引的创建长度大于最大限制。问题是 MySQL 5.6 不再默默地截断索引。这种行为似乎不是预期的（参见[http://dev.mysql.com/doc/refman/5.6/en/innodb-restrictions.html](http://dev.mysql.com/doc/refman/5.6/en/innodb-restrictions.html)和错误[http://bugs.mysql.com/bug.php? id=68453](http://bugs.mysql.com/bug.php?id=68453)）。

也就是说，Sonar 3.5 通过创建具有正确长度的索引来解决这个问题（参见[http://jira.codehaus.org/browse/SONAR-4137](http://jira.codehaus.org/browse/SONAR-4137)）。

# jqgrid - 在过滤器工具栏旁边添加按钮

> ID：14811045
> 
> 赞同：1
> 
> 时间：2013-02-11T11:10:31.250
> 
> 标签：jqgrid

在过滤器工具栏结束后，该按钮应该与过滤器工具栏文本框在同一行，即我想要一个与过滤器工具栏文本框在同一行的按钮。我试过了，但它不工作

```
$('#gridTable').after("div.ui-jqgrid-view").find("div.ui-jqgrid-hdiv table.ui-jqgrid-htable tr.ui-search-toolbar").each(function () {
        $('<button>').css({ float: "right", height: "16px", width: "16px" }).appendTo(this).button({
            icons: { primary: "ui-icon-refresh" },
            text: false,
            title: "Clear Filters"
        }).click(function (e) {
            alert("hi");
                   });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:15:42.673

jqGrid 目前不支持`stype: "custom"`搜索工具栏（仅在搜索对话框中）。因此，要在搜索工具栏中添加自定义元素，如按钮，您必须执行以下操作。首先，需要在自定义元素的搜索工具栏中占有一席之地。如果您想在搜索工具栏的末尾有按钮，您可以在网格中添加虚拟最后一列（在 中`colModel`）：

```
{ name: 'sbutton', width: 20, fixed: true, search: false, sortable: false } 
```

该定义将在列上方的搜索工具栏内放置空 div。要将按钮放置在 div 中，可以使用例如以下代码

```
var $th = $($grid[0].grid.hDiv).find(".ui-jqgrid-htable>thead>.ui-search-toolbar>th:nth-child(" +
        $grid[0].grid.headers.length + ")");
$th.find(">div").append($("<button id='mySearch' style='margin-top:1px;height:20px;width:20px'></button>").button({
    text: false, icons: {primary: "ui-icon-search"}
})); 
```

定义`$grid`为`var $grid = $("#gridId");`.

[该演示](http://www.ok-soft-gmbh.com/jqGrid/ButtonInSearchingToobar.htm)演示了该方法：

![在此处输入图像描述](../Images/23613ca308bef441a4f505f283406699.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:13:11.247

尝试这个：

```
$(".ui-search-toolbar th:last").find("div:first").html("<button id='button' style='width:20px;height:20px' title=''>Button<\/button>"); 
```

# javascript - 尴尬的线环绕图像

> ID：14811049
> 
> 赞同：3
> 
> 时间：2013-02-11T11:10:48.460
> 
> 标签：javascript, css, css-float, responsive-design

可能最容易用图像解释我所追求的：

![在此处输入图像描述](../Images/9b1c327a4bd0d249c155d3b2ee28cbc2.png)

当我浮动图像时，文本会围绕它运行，这很棒。但是，根据文本的数量和图像的大小，我经常会留下这些尴尬的部分。在这种情况下，笨拙的文本在图像旁边的列中看起来会更好。

我*可以*为图像添加更多的底部边距，具体取决于有多少尴尬的文本，但在响应式设计中，图像会缩小并且文本保持相同的大小，因此无法在每个断点处对每个图像执行此操作。

我*可以*在所有段落上使用“overflow:auto”，以便它创建一个新的布局上下文并阻止文本完全换行。但是我希望文本在有足够文本时浮动，并且我无法控制最终输出。

我有一种感觉，除非有一些过于复杂的 JS 可以在上面运行（并且可以处理响应式站点上的屏幕尺寸变化），否则没有解决方案。所以我的问题是人们如何处理这个问题？忽略它？使用 JS？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:30:36.430

我不认为你可以在 CSS 中做到这一点。但是，我也不认为 JavaScript 会过于复杂。我建议使用[`element.getClientRects()`](https://developer.mozilla.org/en-US/docs/DOM/element.getClientRects)，它返回一个 TextRectangle 对象列表。对于内联元素，每个 TextRectangle 对象代表一行文本。

如果您检查最后一个 TextRectangle 的左偏移量与倒数第二个 TextRectangle 的左偏移量是否不同，您就知道最后一行是“落后者”，并且可以将图像的底部边距调整一个 TextRectangle ( `bottom - top`) 的高度。

`getClientRects`在 CSSOM 中已标准化，但在某些浏览器中[可能有错误的实现。](http://www.quirksmode.org/dom/w3c_cssom.html#t22)

从更个人的角度来看，我会说我认为它看起来很好，如果我是你，我可能不会担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:15:17.457

最简单的解决方法是在您的文本周围添加另一个 DIV 并将其浮动。

所以你的html最终会像：

```
<div>
    <img src="">
    <div>
        My text...
    </div>
</div> 
```

# c# - LINQ 查询返回第一个结果的多个副本

> ID：14811050
> 
> 赞同：5
> 
> 时间：2013-02-11T11:10:51.470
> 
> 标签：c#, sql, sql-server, linq, linq-to-entities

我在数据库中定义了一个视图（archiveContentPreviews），它将几个表连接在一起，在 Linq 中它有一个实体键（ArchiveID），我想用这个简单的查询来查询这个视图：

```
 var x = from fields in entities2.archiveContentPreviews
                where fields.ArchiveID == archiveID
                select fields;
        return x.ToList<archiveContentPreview>(); 
```

它返回确切数量的结果但第一个结果的多个副本的问题，当我在 SQL 管理工作室中执行该查询时，它返回正确的结果，有什么帮助吗？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T16:28:27.000

这通常发生在指定为主键的列（或列）在视图中没有唯一值时。在您的情况下，`ArchiveID`可能在大量视图行中重复（您的`where`子句也表明了这一点）。您必须找到（或添加到视图中）唯一标识视图行的列组合，并将其标记为 EF 模型中的主键。

请注意，生成的 SQL 查询返回的数据可能包含具有不同值（但相同`ArchiveID`）的行，但 EF 只是将实体对象具体化为每个`ArchiveID`具有它可以为该 id 找到的第一个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-19T20:12:41.823

请注意一种解决方法（如果您不能指定其他键 - 例如对于您不管理但只是只读访问或其他任何内容的数据表）是选择查询中的各个列。

```
var x = from fields in entities2.archiveContentPreviews
                where fields.ArchiveID == archiveID
                select new {fields.col1, fields.col2};
        return x.ToList<archiveContentPreview>(); 
```

# c# - 通过右键单击它们来获取驱动器号

> ID：14811052
> 
> 赞同：1
> 
> 时间：2013-02-11T11:10:53.587
> 
> 标签：c#

我需要通过右键单击它们并选择我的应用程序名称出现在右键单击菜单项中来获取消息框中的驱动器号（如“C：”，“E：”）。

# angularjs - 如何绑定父范围属性？

> ID：14811053
> 
> 赞同：0
> 
> 时间：2013-02-11T11:10:55.053
> 
> 标签：angularjs

我需要从父级获取子元素内的'c'属性（参见[jsfiddle](http://jsfiddle.net/ykmfs)）可能吗？

```
<div ng-app="myApp">
    <box c="yellow">
       <item>item</item>
    </box>
</div>    

angular.module('myApp', [])
.directive('box', function() {
    return {
        restrict: 'E',
        replace: true,
        transclude: true,
        template: '<div ng-transclude></div>'
    };
})
.directive('item', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: {c:'='},
        template: '<div>c:{{c}}</div>'
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:38:00.283

由于您的 item 指令定义了一个隔离范围，因此您需要为所需的每个范围属性在 item 上定义一个属性。所以至少你需要：

```
<item c="c">item</item> 
```

现在，`c`右边的`=`需要是 box 指令的范围属性，所以创建一个链接函数来实现它：

```
link: function(scope, element, attrs) {
    scope.c = attrs.c;
} 
```

[小提琴](http://jsfiddle.net/mrajcok/nbpWz/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:27:43.357

当你使用 translcude 时，父 dom 对象实际上并不是 scopes-tree 中的父对象。很好的范围继承描述在这里：

[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

可以直接获取，但不是很漂亮的方式：

```
var app = angular.module('plunker', []);

app.directive('box', function(){
     return {
        restrict: 'E',
        replace: true,
        transclude: true,
        scope: { c: '@' },
        template: '<div ng-transclude></div>'
    };
});

app.directive('item', function(){
  return {
      restrict: 'E',
      replace: true,
      template: '<div>c:{{$parent.$$prevSibling.c}}</div>'
  };
}); 
```

示例：[http ://plnkr.co/edit/YuYry9?p=preview](http://plnkr.co/edit/YuYry9?p=preview)

我相信有更多类似 ng 的方法可以做到这一点......

# ios - 在文档目录中看不到拾取的图像

> ID：14811062
> 
> 赞同：0
> 
> 时间：2013-02-11T11:11:35.400
> 
> 标签：ios, objective-c, uiimagepickercontroller

我已经使用以下代码将拾取的图像存储到文档目录中。

```
- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingImage:(UIImage *)image
                  editingInfo:(NSDictionary *)editingInfo
{

    UIImage *img = [editingInfo objectForKey:UIImagePickerControllerOriginalImage];

    NSData *imageData = UIImagePNGRepresentation(img);
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateFormat:@"yyyy-MM-dd,HH:mm:ss"];
    NSString *imageName = [NSString stringWithFormat:@"photo-%@.png",
                           [dateFormatter stringFromDate:[NSDate date]]];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];
    [imageData writeToFile:fullPathToFile atomically:YES];
       imageView.image=image;
        NSLog(@"path %@",fullPathToFile);// shows the complete image path
    [self dismissModalViewControllerAnimated:YES];
} 
```

但不幸的是，我在文档目录中看不到选择的图像，我使用“fullPathToFile”变量内容作为浏览器 url 来检查它是否可用..但这不是..寻求您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:20:43.407

试试这个 ：-

```
- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingImage:(UIImage *)image
                  editingInfo:(NSDictionary *)editingInfo
{
    [self dismissModalViewControllerAnimated:YES];
    UIImage *img = [editingInfo objectForKey:UIImagePickerControllerOriginalImage];

    NSData *imageData = UIImagePNGRepresentation(image);
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateFormat:@"yyyy-MM-dd,HH:mm:ss"];
    NSString *imageName = [NSString stringWithFormat:@"photo-%@.png",
                           [dateFormatter stringFromDate:[NSDate date]]];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];
    [imageData writeToFile:fullPathToFile atomically:YES];
       imageView.image=image;
        NSLog(@"path %@",fullPathToFile);// shows the complete image path

} 
```

希望对你有帮助。。

# iphone - 将其放置在 iPhone 5s 或 iPhone 4s 的导航栏中需要什么大小和分辨率的图像？

> ID：14811065
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:11:44.990
> 
> 标签：iphone, image, uiimageview

我在导航栏中使用 (320 * 44) 像素图像大小，但在 iPhone 5s 或 iPhone 4s 中似乎模糊？

使用代码是：

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"nav_Img.png"] forBarMetrics:UIBarMetricsDefault]; 
```

任何人请建议我，iPhone 5s 或 iPhone 4s 导航栏中容易放入的图像尺寸和分辨率是多少？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:55:36.387

这是 iOS 开发人员的[设计备忘单](http://ivomynttinen.com/blog/the-ios-design-cheat-sheet-volume-2)。

如果它很模糊，则意味着您需要通过将大小加倍来提供视网膜分辨率图像并将@2x 放在文件名的末尾。查看Apple 提供的[此文档](https://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreens/SupportingHiResScreens.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:13:22.960

标准导航栏是 320 X 44 但放置了双维图像，它不会变得模糊，即通过附加它“@2x”。这意味着将 640 X 88 的图像命名为“nav_Img@2x.png”；

# sql - Subtracting Time_In from Time_Out in SQL

> ID：14811071
> 
> 赞同：0
> 
> 时间：2013-02-11T11:12:10.517
> 
> 标签：sql, oracle, datetime, oracle-apex, date-arithmetic

I am working in Oracle APEX, i want to Subtract `Att_In` from `Att_Out` to acquire the value in `MINUTES` format.I tried different Queries but giving me the wrong answer or some times give the value in Decimal. Here is the Query.

```
select (to_char(att_In,'HH24:MM:SS')) as time_In,(to_char(att_out,'HH24:MM:SS')) as time_out from attendance; 
```

![enter image description here](../Images/5155c641696d20780797d7ff7fdf7ef2.png)

```
select to_char(att_In,'DD-MM-YYYY HH24:MM:SSAM'),to_char(att_out,'DD-MM-YYYY HH24:MM:SSAM'),(att_out-att_in) from attendance; 
```

![enter image description here](../Images/678aeb72fb2195fce2ca3b3c5d4af8a1.png)

I need the value in `Time Format`

# r - summary() function gives strange results with Knitr/RStudio

> ID：14811077
> 
> 赞同：3
> 
> 时间：2013-02-11T11:12:28.600
> 
> 标签：r, knitr, rstudio

I am currently experiencing some strange problems when processing a simple Markdown script under RStudio. Summary() function gives an incorrect result, and I cannot figure what's happening, because RStudio is not giving any error at all.

If I execute the following RMarkdown script (I have put the file with the data [here](https://dl.dropbox.com/u/16600702/mydata.rda))

```
```{r}
load('mydata.rda')
summary(mydata$b)
head(sort(mydata$b))
```
```{r}
sessionInfo()
``` 
```

I get the following result

```
load("mydata.rda")
summary(mydata$b)
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##       0    6000   10000   12000   16000   35000

head(sort(mydata$b))
## [1] -0.01 -0.01  0.00  0.00  0.00  0.00

sessionInfo()
## R version 2.15.1 (2012-06-22)
## Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
## 
## locale:
## [1] es_ES.UTF-8/es_ES.UTF-8/es_ES.UTF-8/C/es_ES.UTF-8/es_ES.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] knitr_1.0.5
## 
## loaded via a namespace (and not attached):
## [1] digest_0.5.2   evaluate_0.4.3 formatR_0.6    plyr_1.7.1    
## [5] stringr_0.6.1  tools_2.15.1 
```

As you can see, the result is wrong, because the actual minimum value of the 'b' variable is negative, something the summary() execution seems to ignore. I have tried the same with a Knitr Rnw pdf script and it does exactly the same. However, when I run it through Sweave, the result is ok.

What is the summary function returning when it is called under knitr/RStudio? Is this a side effect of something I am missing or a bug?

Regards, Gus

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:19:32.767

尝试将以下内容添加到文档顶部：

```
```{r, echo=FALSE}
options(digits = 7)
``` 
```

要查看 R 会话和 markdown -> HTML knitr 会话之间的区别，请在 R 控制台中键入以下内容并将其包含在您的 markddown 文档中并比较每个的输出：

```
options() 
```

`options("digits")`在默认的 R 会话中是 7，但在从 Markdown 文件（至少在我的系统上）编织 HTML 文档的环境中，它是 4。但不确定在哪里设置；）

# c++ - optional ofstream parameter in C++

> ID：14811082
> 
> 赞同：2
> 
> 时间：2013-02-11T11:12:38.420
> 
> 标签：c++, ofstream, optional-arguments

How can I make an ofstream argument optional?

```
bool LookingFor(std::string &mi_name, ofstream &my_file = std::cout)
{
    my_file << xxx;
.......

} 
```

the compiling error with the above method signature is:

'std::ofstream& my_file' has type 'std::ostream {aka std::basic_ostream}'

I'm using mingw32.

I want this function to write to console when there is no a second parameter. I tried myriad things, but nothing works. I do not mind if I have to check the code to see if it is open, for instance:

```
if(my_file.isopen())
    my_file << xxx;
else
    cout << xxx; 
```

any good idea?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:16:14.003

只需使用`ostream`：

```
bool LookingFor(std::string &mi_name, std::ostream &out = std::cout) {
    out << xxx;
} 
```

这不仅适用于任何流类型，`fstream`而且适用于`cout`. 以及其他流类型，例如`ostringstream`.

# asp.net - 如何在 Gridview 中获取逗号分隔值的相应记录？

> ID：14811083
> 
> 赞同：0
> 
> 时间：2013-02-11T11:12:39.947
> 
> 标签：asp.net, gridview

我有一个带逗号的字符串，`Label`现在我想`Gridview`在 asp.net 的同一页面上的新行中获取用逗号分隔的所有值。

例子：

**输入：**

```
delhi,haryana,punjab,u.p 
```

**输出：**

```
Delhi

Haryana

Punjab

u.p 
```

有什么建议么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:23:29.753

首先，您需要使用字符串函数分隔标签文本，然后使用类似 -

```
 DataSet ds = new DataSet();
        DataTable dt = ds.Tables[0];
        DataRow dr = dt.NewRow();
        dr[0] = first value;
        dr[1] = second value;
        dr[2] = third value;

        dt.Rows.Add(dr); 
```

尝试一下。

不要忘记编写这两行最重要的代码-

```
 Gridview.DataSource = dt;
 Gridview.DataBind(); 
```

# javascript - Angular run loop

> ID：14811084
> 
> 赞同：0
> 
> 时间：2013-02-11T11:12:43.990
> 
> 标签：javascript, angularjs, ember.js

I was reading this blog:

[http://eviltrout.com/2013/02/10/why-discourse-uses-emberjs.html](http://eviltrout.com/2013/02/10/why-discourse-uses-emberjs.html)

> The Run Loop
> 
> One of the more complicated pieces of EmberJS is the run loop. Usually you aren’t aware of it, but behind the scenes Ember batches up updates to the DOM and bindings for performance. In some other frameworks if you have a list of 100 items, and iterate through them changing them all, you will end up with 100 separate DOM updates. Ember will batch them and update all at once, providing a better user experience.

And it mentions this angular problem. Is this true? Are there any ways to mitigate this? From the sounds of it if this is the case then angular can be quite behind performance wise?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:34:10.283

AngularJS 也有类似 runloop 的东西。他们处理绑定的方式是通过dirtychecking。一种也用于（要求苛刻的）3d 视频游戏的技术。想法是，使用这种方法，AngularJS 将能够为包含多达 2000 个元素的 gui 提供流畅的体验和快速响应（<50 毫秒）（更多意味着你的 gui 在 Angular 看来包含太多信息）。也就是说，Angular 很快就会在较新的浏览器中开始使用 Object.observe() 功能。

你可以在这里阅读：http: [//blog.angularjs.org/2012/07/angularjs-10-12-roadmap.html](http://blog.angularjs.org/2012/07/angularjs-10-12-roadmap.html)

```
Object.observe() prototype (replace our dirty checking with O.o() ) 
```

这意味着 Angular 将用我认为对于这个问题的最佳性能来代替它的脏检查。优点是您可以使用不太复杂的设置（在 EmberJS 中，您必须使用 Ember.set() 和 .get() 方法。这将不再是必需的。

您的选择将归结为想要支持较旧的浏览器（EmberJS 支持），以获得在 gui 中支持大量元素的功能。

# java - Java recursive method for counting words

> ID：14811085
> 
> 赞同：0
> 
> 时间：2013-02-11T11:12:44.913
> 
> 标签：java, recursion, count, words

I should first of all say this is an assignment that is confusing me, I've already corrected one of the questions by the lecturer :/

Anyway, I've made a method which counts the words using booleans, a while loop and a counter.

However I need to some how shape this into a recursive method that counts the amount of words in a string, a word is delimited by one or many spaces.

`countWords(" hello this is an example", 0); // returns 5`

As you can see the only parameters are countWords(String s, int i) making it more difficult.

Also, within the method I'm restricted to only using these three methods s.charAt(0), s.substring(1) and s.equals("") again making it more of a head hurter :)

This is the none recursive method I wrote using a while loop:

```
public static int countWords(String s) {
    int words = 0;
    boolean spaceBefore = true;
    boolean spaceCurrently = false;
    while(true) {
        if (s.equals(""))
            return words;

        if (s.charAt(0) == ' ')
            spaceCurrently = true;
        else
            spaceCurrently = false;

        if (spaceBefore && !spaceCurrently)
            words++;        

        spaceBefore = spaceCurrently;
        s = s.substring(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:42:47.470

好吧，因为这是一个家庭作业，我不会给你代码。但我会向你解释解决方案。看看你是否可以从中重建代码。

在该方法中，首先删除行首和行尾的空格，因为我们想忽略它。使用该`trim()`方法。接下来检查字符串是否为空字符串 ( `""`)，就像您在代码中所做的那样。如果是，则返回零，因为空字符串不包含单词，否则在无限循环 ( `while (true)`) 中检查以下条件：

*   创建一个变量来保存当前索引，该索引不是循环本地的，而是方法本地的。对于无限循环的每次迭代，检查当前字符（使用`charAt()`方法）是否不是空格以及索引是否小于字符串的长度。如果此条件为真，则递增索引变量。
*   如果不是，请检查索引变量是否等于字符串的长度。如果是，则返回 1，因为这意味着我们已经到达字符串的最后一个单词。
*   如果不是，则返回 1 的总和和计算单词的方法，从 index 的当前值递归调用子字符串。

这应该为您带来价值。如果您仍然无法做到这一点，请告诉我，我会给您来源。

**编辑**好吧，如果您不能使用 String 的 trim 方法，您可以像这样为自己编写一个。我相信它不会违反您的任何要求：

```
private String trim(String str) {
    int beginIndex = 0;
    int endIndex = str.length() - 1;

    while (true) {
        if (str.charAt(beginIndex) == ' ') {
            beginIndex++;
        } else if (str.charAt(endIndex) == ' ') {
            endIndex--;
        } else {
            break;
        }
    }

    return str.substring(beginIndex, endIndex);
} 
```

**编辑 2**如果你不能使用`length()`任何一个，那么修改上面的代码行`int endIndex = str.length() - 1;' to`int endIndex = getLength(str) - 1;` 并使用下面的代码来计算长度。

```
private int getLength(String str) {
    int length = 0;

    while (true) {
        try {
            str.charAt(length++);
        } catch (StringIndexOutOfBoundsException e) {
            break;
        }
    }
    return --length;
} 
```

**编辑 3**由于问题是这样一个 PITA，因此很难用语言解释。所以这里是代码：

```
private int countWords(String searchString) {
    int index = 0;
    boolean beginning = true;       // to check if it's the beginning of the line

    if (searchString.equals("")) {
        return 0;
    } else {
        while (true) {
            try {
                if (searchString.charAt(index) != ' ') {
                    beginning = false;
                    index++;
                } else {
                    if (!beginning) {
                        return 1 + countWords(searchString.substring(++index));
                    } else {
                        return countWords(searchString.substring(++index));
                    }
                }
            } catch (StringIndexOutOfBoundsException e) {
                if (!beginning) {
                    return 1;
                } else {
                    return 0;
                }
            }
        }
    }
} 
```

这将帮助您仅使用您被允许使用的方法来实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:20:30.990

我不会直接发布代码，因为这是您的任务，但这里有一些指导。

字符串中的单词数是当前单词+字符串其余部分中的单词数。由于您当时只能处理一个字符，因此您可以这样想：

*   有一个参数告诉你是否在一个词中
*   如果 s.charAt(0) 是一个空格并且您在一个单词中，那么您将增加计数器并将 inWord 设置为 false
*   如果 s.charAt(0) 是一个字母并且您不在一个单词中，那么您将 inWord 设置为 true
*   使用更新的计数器和 s.subString(1) 进行递归并更新 inWord

然后你用 0, s, false 开始一切

想象一下将循环转换为递归，将变量从循环外部移动到方法参数中。

我希望这不会太混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:20:42.987

鉴于这是作业，我不会直接给你答案。

如果方法调用自身的机制，则递归。显然，如果一个方法不确定地执行此操作，您最终会得到一个 stackoverflow 异常，因此您需要某种退出条件，该方法停止调用自身。

这是一个示例 - 假设您想编写一个乘法方法，它接受两个数字并将它们相乘，但您只能使用加法和减法。

```
public int multiply(int value1, int value2) 
{
  if (value1 > 1) 
  {
    int remaining = value1 - 1;
    return value2 + multiply(remaining, value2);
  }
  else 
  {
    return value2;
  }
} 
```

在这里，该方法调用自身，直到它添加`value2`到自身`value1`时间，此时它返回堆栈。

您可以做一些与您的字数统计类似的事情 - 继续调用该方法，传递从第一个空格到字符串末尾的子字符串，直到字符串中没有更多空格，此时返回堆栈。

# iphone - How i can create grid on iphone which have multiple coloumns?

> ID：14811089
> 
> 赞同：3
> 
> 时间：2013-02-11T11:13:00.207
> 
> 标签：iphone, xcode, gridview

![enter image description here](../Images/9f3ff91bec74de51e91d752b7ceb09b0.png)

How i can create grid which can have multiple coloums in iphone as shown in given image, please suggest me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:21:47.227

Apple[`UICollectionView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html)在 iOS 6 中引入了可用于此目的的功能。

或者，您可以使用`UITableView`带有显示多列的自定义单元格的标准。所以你必须做一个`UITableViewCell`包含显示单行表格所需的所有 UI 的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:39:59.683

由于现在 Apple 在 iOS 6 中引入了控件，您可以使用该“UICollectionView”控件。

但我的建议是，

您可以使用自定义“UITableViewCell”。

在那里，您可以根据需要创建表格视图单元格，制作对象的 IBOutlet 和 IBAction，并在“CellForRowAtIndexPath”内，使用所有控件和绑定方法。

您可以根据需要轻松实现网格。可能您需要水平设计屏幕（横向）。

快乐编码！

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T10:53:52.653

使用[UITableView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableView)和 'UITableViewCell'

编辑：

1.  在特定视图中创建 UITableView
2.  委托和数据源到uitableview
3.  取客户 uitableviewcell
4.  编写以下委托和数据源方法

    *   (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    *   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
    *   (CGFloat)tableView:(UITableView *)aTableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
    *   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

# c# - System.Magic.GetAssociatedLayer3Or4Headers(theSocket)?

> ID：14811091
> 
> 赞同：1
> 
> 时间：2013-02-11T11:13:07.177
> 
> 标签：c#, sockets, networking, tcp, header

Is there some method to extract the IP, TCP or UDP header associated with a received packet/telegram.

(an example use-case is finding the TCP sequence number associated with the received byte[])

Note that the socket is just a normal one (not a raw socket) but we want to extract some lower-layer information regarding the received packet. Is it possible?

# c++ - Getting an "error LNK2019: unresolved external symbol"

> ID：14811098
> 
> 赞同：0
> 
> 时间：2013-02-11T11:13:24.270
> 
> 标签：c++

This is my code. It's to practice using templates.

Header

```
#ifndef H_rectangleType
#define H_rectangleType

#include <iostream>

using namespace std;

namespace Rectangle{
template <class myType>
class rectangleType
{
      //Overload the stream insertion and extraction operators
    friend ostream& operator << (ostream&, const rectangleType &);
    friend istream& operator >> (istream&, rectangleType &);

public:
    void setDimension(myType l, myType w);
    myType getLength() const;
    myType getWidth() const;
    myType area() const;
    myType perimeter() const;
    void print() const;

    rectangleType<myType> operator+(const rectangleType<myType>&) const;
      //Overload the operator +
    rectangleType<myType> operator*(const rectangleType<myType>&) const;
      //Overload the operator *

        bool operator==(const myType&) const;
      //Overload the operator ==
    bool operator!=(const myType&) const;
      //Overload the operator !=

    rectangleType();
    rectangleType(myType l, myType w);

private:
    myType length;
    myType width;
};
}

#endif 
```

Member Definitions

```
#include <iostream> 
#include "rectangleType.h"

using namespace std;

namespace Rectangle{
template <class myType>
void rectangleType<myType>::setDimension(myType l, myType w)
{
    if (l >= 0) 
        length = l;
    else
        length = 0;

    if (w >= 0)
        width = w;
    else
        width = 0;
}

template <class myType>
myType rectangleType<myType>::getLength() const
{
    return length;
}

template <class myType>
myType rectangleType<myType>::getWidth()const
{
    return width;
}

template <class myType>
myType rectangleType<myType>::area() const
{
    return length * width;
}

template <class myType>
myType rectangleType<myType>::perimeter() const
{
    return 2 * (length + width);
}

template <class myType>
void rectangleType<myType>::print() const
{
    cout << "Length = "  << length
         << "; Width = " << width;
}

template <class myType>
rectangleType<myType>::rectangleType(myType l, myType w)
{
    setDimension(l, w);
}    

template <class myType>
rectangleType<myType>::rectangleType()
{
    length = 0;
    width = 0;
}

template <class myType>
rectangleType<myType> rectangleType<myType>::operator+ 
                          (const rectangleType<myType>& rectangle) const
{
    rectangleType<myType> tempRect;

    tempRect.length = length + rectangle.length;
    tempRect.width = width + rectangle.width;

    return tempRect;
}

template <class myType>
rectangleType<myType> rectangleType<myType>::operator* 
                       (const rectangleType<myType>& rectangle) const
{
    rectangleType<myType> tempRect;

    tempRect.length = length * rectangle.length;
    tempRect.width = width * rectangle.width;

    return tempRect;
}

template <class myType>
bool rectangleType<myType>::operator== 
                      (const myType& rectangle) const
{
    return (length == rectangle.length &&
            width == rectangle.width);
}

template <class myType>
bool rectangleType<myType>::operator!= 
                       (const myType& rectangle) const
{
    return (length != rectangle.length ||
            width != rectangle.width);
}

template <class myType2>
ostream& operator << (ostream& osObject, 
                      const rectangleType<myType2>& rectangle)
{
    osObject << "Length = "  << rectangle.length 
             << "; Width = " << rectangle.width;

return osObject;
}

template <class myType2>
istream& operator >> (istream& isObject, 
                      rectangleType<myType2>& rectangle)
{
    isObject >> rectangle.length >> rectangle.width;

    return isObject;
}
} 
```

Main

```
#include <iostream>                                   //Line 1

#include "rectangleType.h"                            //Line 2

using namespace std;                                  //Line 3
using namespace Rectangle;

int main()                                            //Line 4
{                                                     //Line 5
    cout << "Enter the type of your Rectangle.\n1\. int\n2\. double\n3\. float";
        rectangleType<double> myRectangle(23, 45);                //Line 6
    int int1 = 1;
    int double1 = 2;
    int float1 = 3;
    int temp= 0;
    cin >> temp;                                                      //Line 7

    if(temp == int1)
    {   
    rectangleType<int> myRectangle(23, 45);   
    rectangleType<int> yourRectangle;
        cout << "Line 8: myRectangle: " << myRectangle 
     << endl;                                     

        cout << "Line 9: Enter the length and width "
             <<"of a rectangle: ";                        
        cin >> yourRectangle;                            
        cout << endl;                                    

        cout << "Line 12: yourRectangle: "
             << yourRectangle << endl;                    

        cout << "Line 13: myRectangle + yourRectangle: " 
                     << myRectangle + yourRectangle << endl;     
        cout << "Line 14: myRectangle * yourRectangle: " 
                 << myRectangle * yourRectangle << endl;
    } 

    if(temp == double1)
    {   
        rectangleType<double> myRectangle(23, 45);   
    rectangleType<double> yourRectangle;
    cout << "Line 8: myRectangle: " << myRectangle 
     << endl;                                     

    cout << "Line 9: Enter the length and width "
         <<"of a rectangle: ";                        
    cin >> yourRectangle;                            
    cout << endl;                                    

    cout << "Line 12: yourRectangle: "
         << yourRectangle << endl;                    

    cout << "Line 13: myRectangle + yourRectangle: " 
         << myRectangle + yourRectangle << endl;     
    cout << "Line 14: myRectangle * yourRectangle: " 
         << myRectangle * yourRectangle << endl;
} 

if(temp == float1)
{   
    rectangleType<float> myRectangle(23, 45);   
    rectangleType<float> yourRectangle;
    cout << "Line 8: myRectangle: " << myRectangle 
     << endl;                                     

    cout << "Line 9: Enter the length and width "
         <<"of a rectangle: ";                        
    cin >> yourRectangle;                            
    cout << endl;                                    

    cout << "Line 12: yourRectangle: "
         << yourRectangle << endl;                    

    cout << "Line 13: myRectangle + yourRectangle: " 
         << myRectangle + yourRectangle << endl;     
    cout << "Line 14: myRectangle * yourRectangle: " 
         << myRectangle * yourRectangle << endl;
} 
return 0; 
```

}

Here,I'm getting these errors

```
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: class                                   Rectangle::rectangleType<float> __thiscall Rectangle::rectangleType<float>::operator*(class Rectangle::rectangleType<float> const &)const " (??D?$rectangleType@M@Rectangle@@QBE?AV01@ABV01@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: class Rectangle::rectangleType<float> __thiscall Rectangle::rectangleType<float>::operator+(class Rectangle::rectangleType<float> const &)const " (??H?$rectangleType@M@Rectangle@@QBE?AV01@ABV01@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "class std::basic_istream<char,struct std::char_traits<char> > & __cdecl Rectangle::operator>>(class std::basic_istream<char,struct std::char_traits<char> > &,class Rectangle::rectangleType<float> &)" (??5Rectangle@@YAAAV?$basic_istream@DU?$char_traits@D@std@@@std@@AAV12@AAV?$rectangleType@M@0@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl Rectangle::operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class Rectangle::rectangleType<float> const &)" (??6Rectangle@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV12@ABV?$rectangleType@M@0@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: __thiscall Rectangle::rectangleType<float>::rectangleType<float>(void)" (??0?$rectangleType@M@Rectangle@@QAE@XZ) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: __thiscall Rectangle::rectangleType<float>::rectangleType<float>(float,float)" (??0?$rectangleType@M@Rectangle@@QAE@MM@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: class Rectangle::rectangleType<double> __thiscall Rectangle::rectangleType<double>::operator*(class Rectangle::rectangleType<double> const &)const " (??D?$rectangleType@N@Rectangle@@QBE?AV01@ABV01@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: class Rectangle::rectangleType<double> __thiscall Rectangle::rectangleType<double>::operator+(class Rectangle::rectangleType<double> const &)const " (??H?$rectangleType@N@Rectangle@@QBE?AV01@ABV01@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "class std::basic_istream<char,struct std::char_traits<char> > & __cdecl Rectangle::operator>>(class std::basic_istream<char,struct std::char_traits<char> > &,class Rectangle::rectangleType<double> &)" (??5Rectangle@@YAAAV?$basic_istream@DU?$char_traits@D@std@@@std@@AAV12@AAV?$rectangleType@N@0@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl Rectangle::operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class Rectangle::rectangleType<double> const &)" (??6Rectangle@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV12@ABV?$rectangleType@N@0@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: __thiscall Rectangle::rectangleType<double>::rectangleType<double>(void)" (??0?$rectangleType@N@Rectangle@@QAE@XZ) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: class Rectangle::rectangleType<int> __thiscall Rectangle::rectangleType<int>::operator*(class Rectangle::rectangleType<int> const &)const " (??D?$rectangleType@H@Rectangle@@QBE?AV01@ABV01@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: class Rectangle::rectangleType<int> __thiscall Rectangle::rectangleType<int>::operator+(class Rectangle::rectangleType<int> const &)const " (??H?$rectangleType@H@Rectangle@@QBE?AV01@ABV01@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "class std::basic_istream<char,struct std::char_traits<char> > & __cdecl Rectangle::operator>>(class std::basic_istream<char,struct std::char_traits<char> > &,class Rectangle::rectangleType<int> &)" (??5Rectangle@@YAAAV?$basic_istream@DU?$char_traits@D@std@@@std@@AAV12@AAV?$rectangleType@H@0@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl Rectangle::operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class Rectangle::rectangleType<int> const &)" (??6Rectangle@@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV12@ABV?$rectangleType@H@0@@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: __thiscall Rectangle::rectangleType<int>::rectangleType<int>(void)" (??0?$rectangleType@H@Rectangle@@QAE@XZ) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: __thiscall Rectangle::rectangleType<int>::rectangleType<int>(int,int)" (??0?$rectangleType@H@Rectangle@@QAE@HH@Z) referenced in function _main
1>testOpOverLoadClass.obj : error LNK2019: unresolved external symbol "public: __thiscall Rectangle::rectangleType<double>::rectangleType<double>(double,double)" (??0?$rectangleType@N@Rectangle@@QAE@NN@Z) referenced in function _main
1>C:\Users\jr\Documents\Visual Studio 2010\Projects\CMPE 126\Lab 2\Debug\Lab 2.exe : fatal error LNK1120: 18 unresolved externals 
```

I cant seem to make what these errors mean. Thanks inadvance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:16:20.300

您不能分离模板类的定义和实现。您还必须将函数放在头文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:17:34.980

调用代码应该可以看到您的模板函数**定义。**

内联它们。

# java - Google AppEngine Latency problems since Friday (com.google.apphosting.api.DeadlineExceededException)

> ID：14811103
> 
> 赞同：1
> 
> 时间：2013-02-11T11:13:54.547
> 
> 标签：java, google-app-engine

A number of us have been having massive problems with our sites where the latency is averaging about 20 seconds for responses and the warmups and server startups seem to be all over the place.... can someone from google please help us out, according to your own status screen ([http://code.google.com/status/appengine](http://code.google.com/status/appengine)) everything appears normal, but its definitely NOT normal for us

```
/diarybooker/admin
119  1393    21590 ms
/diarybooker/appointment
21   1232    40398 ms
/diarybooker/contact
15   7168    10424 ms
/_ah/warmup
12   2212    40981 ms 
```

There is more of a discusson on this at:

```
https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/vRqnH34D_1I 
```

Other apps that I know are having trouble are:

```
http://vectortracking.appspot.com 
http://mybikeshopmanager.appspot.com/
http://commanderepas.appspot.com 
```

# java - replace values between two dollar symbol

> ID：14811109
> 
> 赞同：1
> 
> 时间：2013-02-11T11:14:25.740
> 
> 标签：java

I need to replace a value between two dollar($) symbol.

below is the way i tried but i dont think it is an elegant way to do.

```
String queryNoAdditionalFilter= SELECT PRODUCTNAME,PRODUCTSKEY FROM PRODUCTS WHERE PRODUCTID=$productid$

    int start= queryNoAdditionalFilter.indexOf("$");
     int end= queryNoAdditionalFilter.lastIndexOf("$");
     String valueSubstitutedToFilter1 = queryNoAdditionalFilter.substring(start+1, end);
      String keyToReplace = "\\$"+valueSubstitutedToFilter1+"\\$";
     String valueSubstitutedToFilter2=queryNoAdditionalFilter.replaceAll(keyToReplace, "401250");

final outcome is :SELECT PRODUCTNAME,PRODUCTSKEY FROM PRODUCTS WHERE PRODUCTID=401250 
```

which is the best way to implement this logic through java code?

Need your advise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:17:27.680

我认为你真的应该使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

> 尽管 PreparedStatement 对象可用于不带参数的 SQL 语句，但您可能最常将它们用于带参数的 SQL 语句。使用带参数的 SQL 语句的优点是您可以使用相同的语句并在每次执行时为其提供不同的值。

这是如何使用它（来自链接的文档）

```
String updateString =
    "update " + dbName + ".COFFEES " +
    "set SALES = ? where COF_NAME = ?";
updateSales = con.prepareStatement(updateString);
updateSales.setInt(1, e.getValue().intValue());
updateSales.setString(2, e.getKey()); 
```

# google-apps-script - 超过最大执行时间的大型数据集

> ID：14811110
> 
> 赞同：4
> 
> 时间：2013-02-11T11:14:27.147
> 
> 标签：google-apps-script, google-sheets

我有一个脚本将电子表格的内容加载到 scriptDB 中，但电子表格有大约 15,000 行、9 列，并且不断给我一个“超过最大执行时间”错误。

我正在使用 Google 文档中给出的函数来加载数据：

```
function loadDatabaseFromSheet() {
  var spreadsheet = SpreadsheetApp.openById(SPREADSHEET_KEY);
  var sheet = spreadsheet.getActiveSheet();
  var columns = spreadsheet.getLastColumn();
  var data = sheet.getDataRange().getValues();
  var keys = data[0];
  var db = ScriptDb.getMyDb();
  for (var row = 1; row < data.length; row++) {
    var rowData = data[row];
    var item = {};
    for (var column = 0; column < keys.length; column++) {
      item[keys[column]] = rowData[column];
    }
    db.save(item);
  }
} 
```

有什么办法可以加快速度，还是我只需要把它分成几千块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:01:01.337

调用`db.save(item)`15000 次是导致缓慢的原因。相反，如果您要保存那么多数据 ，请使用[批量操作。](https://developers.google.com/apps-script/scriptdb#bulk_operations)

```
 var db = ScriptDb.getMyDb();
  var items = [];
  for (var row = 1; row < data.length; row++) {
    var rowData = data[row];
    var item = {};
    for (var column = 0; column < keys.length; column++) {
      item[keys[column]] = rowData[column];
    }
    items.push(item);
  }
  db.saveBatch(items,false); 
```

最后调用一次保存操作可以为您节省所有往返时间，因此这应该会大大加快您的代码并在超过最大执行时间之前完成。

# c# - 我如何从数据集中选择最小值和最大值

> ID：14811121
> 
> 赞同：1
> 
> 时间：2013-02-11T11:15:09.773
> 
> 标签：c#

我想从数据集中检索最小值和最大值，这些值在 for 循环中用于在面板中显示标题

```
 String sql = "select  title, song_id from up_song where Song_type='Mp3 Tracks' ";
    SqlDataAdapter adpt = new SqlDataAdapter(sql, cn);
    DataSet ds = new DataSet();
    adpt.Fill(ds, "title"); 
```

所以在这里我想找到歌曲ID的最小值和最大值......这里m是最大值和k最小值我不知道......我如何选择k和m......？

```
 for (i = m; i >= k; --i)
        {
            try
            {
                hp[i] = new HyperLink();
                hp[i].ID = "hp" + i;
                hp[i].Text = ds.Tables["title"].Rows[i].ItemArray[0].ToString();
                hp[i].NavigateUrl = "Downloadpage.aspx";
                hp[i].ForeColor = System.Drawing.Color.White;
                Panel1.Controls.Add(hp[i]);
                Panel1.Controls.Add(new LiteralControl("<br>"));
                HttpCookie coo = new HttpCookie("song");
                coo["sogtit"] = ds.Tables["title"].Rows[i].ItemArray[0].ToString();
                Response.Cookies.Add(coo);
            }
            catch (Exception ex)
            {
                Response.Write(ex.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:20:26.603

使用`Linq`扩展方法：

```
int minSongId = ds.Tables["title"].AsEnumerable()
                  .Min(r => r.Field<int>("song_id"));
int maxSongId = ds.Tables["title"].AsEnumerable()
                  .Max(r => r.Field<int>("song_id")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:20:34.403

使用 LINQ：

```
 var m = ds.Tables["title"].AsEnumerable().Max(x => x.Field<int>("song_id"));
 var k = ds.Tables["title"].AsEnumerable().Min(x => x.Field<int>("song_id")); 
```

请记住，您必须添加`System.Data.DataSetExtensions`才能具有`DataSet.AsEnumerable()`扩展名:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:19:58.337

用这个怎么样？

```
foreach(DataRow row in ds.Tables["title"].AsEnumerable())
{
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T04:25:41.327

## 从数据集中获取 MAX 和 MIN 值

```
 var maxTwn = mydataset.Tables[0].AsEnumerable().Max(r =>r["TWN"]);
   var minTwn = mydataset.Tables[0].AsEnumerable().Min(r =>r["TWN"]); 
```

# html - 使用多个 css 类，只有一个类

> ID：14811122
> 
> 赞同：1
> 
> 时间：2013-02-11T11:15:10.463
> 
> 标签：html, css

也许答案很简单，但我想不通......对不起这个愚蠢的问题。

我有几个使用相同 css 类的 html 元素：

```
<a class="class1 class2 class3"></a> 
```

如何为我的所有元素只指定一个公共类？

```
<a href="commonclass"></a> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:19:46.547

从 etc. 中获取样式`class1`并将它们放入单独的类中。

```
.class1 {
  color: green;
}
.class2 {
  border: 1px solid black;
} 
```

然后会变成：

```
.combined {
  color: green;
  border: 1px solid black;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:20:00.217

1.  对所有元素应用 css，然后使用`*` [通用选择器](http://reference.sitepoint.com/css/universalselector)

    ```
    * { padding: 0; margin: 0; } 
    ```

2.  `a`对文档中的所有元素应用 css ，然后使用标签选择器

    ```
    a { color: red; } 
    ```

[30 个 CSS 选择器](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:09:57.843

我想您正在寻找类似宏的工具，例如在 LESS 等一些 CSS 框架中找到的，您可以在其中将 class1 和 class2 的属性定义为一种宏或准类，然后根据它们定义您所谓的 commonclass .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T08:56:28.437

我不确定您是否要对“几个 html 元素”或“我的所有元素”使用相同的 css 规则。如果要对多个元素使用相同的 css 规则，请在元素之间使用逗号，如下所示：

```
a, li, p { color:red; } 
```

# ios - 擦除与 UILabel 中的文本重叠的图像的一部分

> ID：14811126
> 
> 赞同：2
> 
> 时间：2013-02-11T11:15:27.340
> 
> 标签：ios, xcode, uiimageview, masking

我有它，用户可以在屏幕上移动图像和 uilabel。假设它是黑色图像和黑色文本。我希望与图像重叠的文本部分变得透明，以便背景显示出来，即使它们最初是相同的颜色，您仍然可以阅读文本。希望这是有道理的。

我找到了一些关于触摸擦除的链接。我不确定如何使用重叠的文本部分自动执行此操作。

也许像这样“用图像掩盖图像”？ [https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_images/dq_images.html)

![重叠文本示例](../Images/f81fc29a59b818495c42b39267f142d3.png)

这是我移动图像（以及文本）的方式

```
-(void)graphicMoved:(UIPanGestureRecognizer *)recognizer
{
CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

} 
```

* * *

**添加的代码** 在将文本和图像部分重叠放置后，我在单击按钮时调用 creatAlphaClippedImage。图像是 imageMerge，标签是 labelTest。

我所做的只是在开始时分配它们，然后在最后，获取输出图像并将其分配给 imageMerge.image，该图像被添加到我的视图中，界面生成器在角落里只是为了测试。我不知道 nslog 应该显示什么，但它不是空的。

```
-(void)createAlphaClippedImage {
UIImageView *imageView = nil;//this will b your imageView, property that u are holding to
UILabel *label = nil;//this will be your label, property that u are holding to

imageView=imageMerge;
label=labelTest;

if (CGRectIntersectsRect(imageView.frame, label.frame)) {
    UIImage *bottomImage = imageView.image;

    UIImage *image = nil;
    UIGraphicsBeginImageContextWithOptions(bottomImage.size, NO, 0.0);
    CGRect imageRect = CGRectMake(0.0f, 0.0f, bottomImage.size.width, bottomImage.size.height);
    [bottomImage drawInRect:imageRect];
    //the color that u want the text to have
    [[UIColor clearColor] set];
    //change this textRect to change the position of text on image
    CGRect textRect = CGRectMake(CGRectGetMinX(label.frame) - CGRectGetMinX(imageView.frame), CGRectGetMinY(label.frame) - CGRectGetMinY(imageView.frame), CGRectGetWidth(label.frame), CGRectGetHeight(label.frame));
    [label.text drawInRect:textRect withFont:label.font];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    imageView.image = image;

    imageMerge.image=image;

    NSLog(@"ImageMerge %@\n",imageMerge.image);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:24:06.020

假设您已经完成了在屏幕上移动 imageView 的操作。让我继续做什么。

1.  当你触摸 imageView。使用我将提供的代码更改其中的图像。
2.  完成图像视图的移动后，将新图像替换为旧图像

> 新图片=一张黑色图片+黑色文字；旧图=一张黑图+透明文字；

```
-(UIImage *)customImage:(NSString *)cellImageName withText:(NSString *)badgeText textColor:(UIColor*)color {
    UIImage *bottomImage = [UIImage imageNamed:cellImageName];
    //Change the font size to change text size
    CGSize stringSize = [badgeText sizeWithFont:[UIFont systemFontOfSize:[UIFont systemFontSize]]];

    UIImage *image = nil;
    UIGraphicsBeginImageContextWithOptions(bottomImage.size, NO, 0.0);
    CGRect imageRect = CGRectMake(0.0f, 0.0f, bottomImage.size.width, bottomImage.size.height);
    [bottomImage drawInRect:imageRect];
    //the color that u want the text to have
    [color set];
    //change this textRect to change the position of text on image
    CGRect textRect = CGRectMake((bottomImage.size.width - stringSize.width)/2.0f, bottomImage.size.height - stringSize.height, stringSize.width, stringSize.height);
    [badgeText drawInRect:textRect withFont:[UIFont systemFontOfSize:[UIFont systemFontSize]]];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

现在在你开始之前，扔掉标签，为了方便起见（如果你愿意，你可以用 CALayer 替换 UIImageView），而不是

> **imageView.image = image**你可以写**layer.contents = (id)image.CGImage**

现在，当您设置您的 ImageView 或图层时，首先将图像获取为

> UIImage *image = [self customImage:@"Image Name" withText:@"Text" textColor:[UIColor blackColor]];

并将此图像放入 imageView 或图层

现在，当您开始移动图像视图或图层时。在`touchesBegan`或任何一种方法是您的第一响应者触摸。再次将图像替换为

> UIImage *image = [self customImage:@"Image Name" withText:@"Text" textColor:[UIColor clearColor]];

并`touchesEnded`用第一次调用黑色文本再次替换图像。

这应该让你继续前进。如有问题请告诉我。

上述方法提供在图像顶部写入文本，并创建一个包含文本的新图像。因此，您可以丢弃标签。

干杯，玩得开心。

**编辑**

试试这个，我自己没试过，但应该可以

```
-(void)createAlphaClippedImage {
    UIImageView *imageView = nil;//this will b your imageView, property that u are holding to
    UILabel *label = nil;//this will be your label, property that u are holding to

    if (CGRectIntersectsRect(imageView.frame, label.frame)) {
        UIImage *bottomImage = imageView.image;

        UIImage *image = nil;
        UIGraphicsBeginImageContextWithOptions(bottomImage.size, NO, 0.0);
        CGRect imageRect = CGRectMake(0.0f, 0.0f, bottomImage.size.width, bottomImage.size.height);
        [bottomImage drawInRect:imageRect];
        //the color that u want the text to have
        [[UIColor clearColor] set];
        //change this textRect to change the position of text on image
        CGRect textRect = CGRectMake(CGRectGetMinX(label.frame) - CGRectGetMinX(imageView.frame), CGRectGetMinY(label.frame) - CGRectGetMinY(imageView.frame), CGRectGetWidth(label.frame), CGRectGetHeight(label.frame));
        [label.text drawInRect:textRect withFont:label.font];
        image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        imageView.image = image;
    }
} 
```

在 touchesBegan 和 touchesMoved 中调用此方法。如果动画卡顿（这不会发生），请尝试在动画块内调用它。

试试这个，让我知道。

**编辑：链接到示例应用程序**

> 我创建了一个示例应用程序，展示了如何清除重叠区域。核实。[https://www.dropbox.com/sh/5z45gkwgmstfyvu/lwzbUyh6IR](https://www.dropbox.com/sh/5z45gkwgmstfyvu/lwzbUyh6IR)

# hibernate - 我在休眠命名查询中遇到问题

> ID：14811128
> 
> 赞同：0
> 
> 时间：2013-02-11T11:15:27.627
> 
> 标签：hibernate, named-query

我在hibernate中使用注释进行命名查询。我有两个类，一个POJO类和一个主类。POJO类如下

```
@NamedQuery(
    name="findEmployeeName",
    query="select * from employee " 
)

@Entity
@Table(name="employee")
public class Employeenam {
    public String tostring(){return id+" " +name+ " " +salary+ " " +job;}

    @Id
    @GeneratedValue
    @Column(name="id")
    int id;

    @Column(name="name")
    String name;

    @Column(name="salary")
    int salary;

    @Column(name="job")
    String job;

    public int setempId(){
        return id;
    }

    public void getempId(int Id){
        this.id=Id;
    }

    public String setempName(){
        return name;
    }

    public void getempName(String Name){
        this.name=Name;
    }

    public int getempSalary(){
        return salary;
    }

    public void setempSalary(int Salary){
        this.salary=Salary;
    }

    public String setempJob(){
        return job;
    }

    public void getempJob(String Job){
        this.job=Job;
    }
}

and the main class as follows

    public class FetchData{
    public static void main(String[] args){

        Configuration configuration=new Configuration();
        configuration.configure("hibernate.cfg.xml");
        SessionFactory sfactory=configuration.buildSessionFactory();
        Session session=sfactory.openSession();
        Query query=session.getNamedQuery("findEmployeeName");
        query.setString("name", "dfdsf");
        query.setInteger("id", 34);
        query.setInteger("salary", 3543);
        query.setString("job", "dfgere");       
        session.close();
    }
    } 
```

当我尝试运行此 iam 时出现以下错误

```
Exception in thread "main" org.hibernate.HibernateException: 
Errors in named queries: findEmployeeName 
```

谁能告诉我哪里出错了？？我对休眠有点陌生..所以请原谅我任何明显的错误....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:09:33.593

你在你的命名查询中错了试试下面

```
@NamedQueries({

    @NamedQuery(name="findEmployee",query="from Employeenam e" )
}) 
```

代替

```
@NamedQuery(name="findEmployeeName",query="select * from employee " ) 
```

在你的**FetchData.java**下面一个

```
 Configuration configuration=new Configuration();
    configuration.configure("hibernate.cfg.xml");
    SessionFactory sfactory=configuration.buildSessionFactory();
    Session session=sfactory.openSession();
    Query query=session.getNamedQuery("findEmployee");

   // here you will get the list of employees
    List<employee> empList = query.list();

    session.close(); 
```

**更新**：

如果您需要参数化命名查询，那么试试这个

```
 @NamedQueries({

        @NamedQuery(name="findEmployeeByName",query="from Employeenam e where e.name =:name" )
    }) 
```

在 main 方法内部将查询行替换为这种方式

```
Query query=session.getNamedQuery("findEmployeeByName");

query.setString(¨name¨,¨subodh¨);    

       // here you will get the list of employees
        List<employee> empList = query.list();

        session.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:12:06.773

With HQL, you should reference entities instead of tables. So, it should be `Employeenam` instead of `employee`. If you're setting parameters to the query, you should also be using them in the query, making reference to the property names, according to the getters/setters (for instance, `empSalary`).

Try to write your query like this:

```
from Employeenam 
where empname = :name 
    and empid = :id 
    and empsalary = :salary 
    and empjob = :empjob 
```

Also, you might consider changing your property names to match the getters/setters. If the property is called `id`, the corresponding getter/setter should be `getId()`/`setId(id)`.

# ruby-on-rails - 邮件 gem SSL_read:: 尝试连接到 Exchange 2003 IMAP 时版本号错误

> ID：14811131
> 
> 赞同：2
> 
> 时间：2013-02-11T11:15:32.757
> 
> 标签：ruby-on-rails, ruby, email, imap

很晚了，我很累，但稍后会提供更多细节。

问题：针对 GMail、Yahoo 和 Exchange 2003 测试 ruby​​ Mail gem 做 IMAP 的东西。GMail 很好。雅虎不错。Exchange 2003 导致 '''SSL_read:: 错误版本号''' 对 '''openssl s_client -crlf -connect myimapserver:imaps''' 的响应是；

```
---
No client certificate CA names sent
---
SSL handshake has read 2914 bytes and written 509 bytes
---
New, TLSv1/SSLv3, Cipher is DES-CBC3-SHA
Server public key is 1024 bit
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1
    Cipher    : DES-CBC3-SHA
    Session-ID: A8180000B48B14E0FB6FEBC0666C72BCB03A96489A5A6865C76ABCB3E55585FE
    Session-ID-ctx: 
    Master-Key:      3C6B487D9BB2AD63928A78EAD57B305864D23A8C196D1D1D5414979E78B5D0B1E939B5F257EEFAA6D27E14FAC6AD23CE
    Key-Arg   : None
    PSK identity: None
    PSK identity hint: None
    SRP username: None
    Start Time: 1360581090
    Timeout   : 300 (sec)
    Verify return code: 20 (unable to get local issuer certificate)
    ---
    * OK Microsoft Exchange Server 2003 IMAP4rev1 server version 6.5.7638.1  (WDCPOST.waitomo-int.govt.nz) ready. 
```

不安全的 IMAP 有效，但 SSL 不为端口 993 和 SSL = true 配置邮件 gem。

有任何想法吗？我一直在寻找几个小时没有找到参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T22:52:09.020

:openssl_verify_mode => 'none' 可能并不理想，但可能对你有用。在这里查看： [Rails 3 ActionMailer 错误 - 主机名与服务器证书不匹配](https://stackoverflow.com/questions/5021416/rails-3-actionmailer-error-hostname-was-not-match-with-the-server-certificate)

# air - StageWebView 无法在 iPad/ios6.1 上显示键盘

> ID：14811134
> 
> 赞同：1
> 
> 时间：2013-02-11T11:15:51.943
> 
> 标签：air, adobe, air-native-extension, stagewebview

我们在 iPad 上使用 StageWebView 向用户显示特殊的共享页面。一切正常（页面加载正常），除了我们将测试 iPad 升级到 6.1 后，当用户点击输入字段时，stagewebview 停止弹出键盘。有光标但没有键盘。assignFocus 也无济于事。所以它不适用于需要键盘交互的页面。现在我们正在考虑用来自 darkredz.com 的 UIWebView ANE 替换 stagewebview

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:46:44.193

我刚刚找到了一个理由！我花了 3 天时间调试到根目录。为了找到我在其中使用浏览器实现模态视图的原因，但即使在这个模态显示的浏览器（在 UINavigationCotroller 内部）中，键盘也被遗漏了！

所有这些疯狂都是因为单个 ANE，特别是 pl.mateuszmackowiak.nativeANE [http://mateuszmackowiak.wordpress.com/2012/01/18/as3-native-alert-android-ios-window/](http://mateuszmackowiak.wordpress.com/2012/01/18/as3-native-alert-android-ios-window/) 我使用了 progress.NativeProgress 组件来自它。使用该组件后，整个应用程序的rootViewController 失效了！

我发现简而言之：

```
UIWindow* keyWindow = [[UIApplication sharedApplication]keyWindow];
* keyWindowController = [keyWindow rootViewController];

1) keyWindowController != nil before using NativeProgress
2) keyWindowController == nil after using NativeProgress 
```

这真是邪恶的行为，因为没有根视图控制器键盘无法以正常方式显示。对 ANE 开发人员感到羞耻 :(

# c# - 如何从 php 调用我的 asp.net web 服务？

> ID：14811135
> 
> 赞同：2
> 
> 时间：2013-02-11T11:16:02.280
> 
> 标签：c#, php, asp.net, .net, web-services

我在 asp.net 中创建了一个 Web 服务，并在 iis 5.1 中发布。现在我想从 php 环境中调用这个 Web 服务。实际上，我的 Web 服务获取一个字符串作为参数并返回相同的字符串。但始终返回的字符串为空或 null。我无法将字符串值从 php 发送到 asp.net Web 服务...

这是我在 asp.net 中创建的网络服务

```
namespace PRS_WS
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class prs_point : System.Web.Services.WebService
    {
        [WebMethod]
        public string testAssignment(string inputData)
        {
            return inputData;           
        }
    }
} 
```

而且，这是我调用上述 asp.net 网络服务的 php 代码...

```
<?php
       require_once('nusoap/lib/nusoap.php');
       $wsdl="http://localhost/prs_point/prs_point.asmx?WSDL";
       $str1="";
       $str1="Hello from php";

        $client = new soapclient($wsdl,'wsdl');
        $result=$client->call('testAssignment',$str1);

         foreach($result as $key => $value)
        {
              echo "<br/>Response ::::: $value";
         }
?> 
```

我不知道是 php 端还是 asp.net 端需要更改？...请指导我摆脱这个问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T03:40:26.223

这段代码对我来说很好......

```
<?php

require 'nusoap/lib/nusoap.php';
$client = new nusoap_client('http://localhost/prs_point/prs_point.asmx?WSDL', 'WSDL');

$error = $client->getError();
if ($error) {
    die("client construction error: {$error}\n");
}

$param = array('inputData' => 'sample data');
$answer = $client->call('testAssignment', array('parameters' => $param), '', '', false, true);

$error = $client->getError();
if ($error) {
    print_r($client->response);
    print_r($client->getDebug());
    die();
 }

 print_r($answer);

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:11:01.620

试试这个。

```
$client = new SoapClient("http://localhost/prs_point/prs_point.asmx?WSDL");
$params->inputData= 'Hello';

$result = $client->testAssignment($params)->testAssignmentResult;

echo $result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:14:27.847

您最好在 WCF 中定义您的服务，这使您可以更好地控制生成的 SOAP，虽然我不确定 PHP，但我在过去让 ASMX Web 服务与 Adob​​e Flex 一起工作时遇到过问题，所以集成是尽管它仍然使用 SOAP 协议，但它并不总是看起来很完美。除此之外，您的服务看起来不错，但我认为您**不需要**这些行：

```
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)] 
```

从 PHP 方面来看，您应该可以调用`$result = $client -> testAssignment( $str1 );`，但是（我忘记了）您可能需要访问结果值`$result = $client -> testAssignment( $str1 ) -> testAssignmentResult;`，您还必须将参数传递给绑定在数组中的方法，而不是使用多个参数调用，请参阅[本文](http://geekswithblogs.net/THines01/archive/2010/03/07/callws.aspx)以获取完整的例子。

高温高压

# php - 在页面加载时显示进度条

> ID：14811142
> 
> 赞同：0
> 
> 时间：2013-02-11T11:16:21.673
> 
> 标签：php, javascript, jquery, progress-bar

我已经创建了在 php 中下载 facebook 相册的脚本。当我点击下载按钮时，脚本会在后台获取该相册中的所有照片并将它们压缩到一个文件夹中。我想在用户单击下载按钮后立即启动“进度条”，因为下载过程可能需要一些时间。

以下是`index.php`

```
if ($album['count'] != "0 photos") 
{
   echo "<a href=\"download.php?id={$album['id']}\" title='Download this Album'  class='downloadbtn'><img src=\"common/images/download_button (1).png\"></a>";
} 
```

在这里，我将专辑 ID 传递给`download.php`

以下是`download.php`我将图像下载到下载文件夹中的代码，创建所有图像的 zip 文件并下载该 zip 文件。

```
<?php
require 'facebook/facebook.php';

$facebook = new Facebook(array(
            'appId' => 'xxxxxxxxxxxxx',
            'secret' => 'xxxxxxxxxxxxxxxxxxxxx',
            'cookie' => true,
        ));

//GETTING THE ID HERE FROM INDEX.PHP FILE

$albumid = $_GET['id'];
$photos = $facebook->api("/{$albumid}/photos?limit=50");

$file_name = rand(1, 99999) . "_image.zip";
$albumArr = array();
foreach ($photos['data'] as $photo) {
    $albumArr[] = $photo['source'];
}

create_zip($albumArr, $file_name);

function create_zip($files, $file_name, $overwrite = false) {
    $i = 0;
    $imgFiles = array();
    foreach ($files as $imglink) {
        $img = @file_get_contents($imglink);
        $destination_path = 'downloads/' . time() . "Image_" . $i . '.jpg';
        @file_put_contents($destination_path, $img);
        $imgFiles[] = $destination_path;
        $i++;
    }

    if (file_exists($file_name) && !$overwrite) {
        return false;
    }
    $valid_files = array();
    if (is_array($imgFiles)) {
        foreach ($imgFiles as $file) {
            $valid_files[] = $file;
        }
    }

    if (count($valid_files)) {

        $zip = new ZipArchive();
        if ($zip->open($file_name, $overwrite ? ZIPARCHIVE::OVERWRITE : ZIPARCHIVE::CREATE) !== true) {
            echo "Sorry ZIP creation failed at this time";
        }
        $size1 = 0;
        foreach ($valid_files as $file) {
            $size1+= filesize($file);
            $zip->addFile($file, pathinfo($file, PATHINFO_BASENAME));
        }

        $zip->close();

        $allimages = glob('downloads/*.jpg');

        foreach ($allimages as $img) { // iterate images
            if (is_file($img)) {
                unlink($img); // delete images
            }
        }

        $count = $zip->numFiles;
        $resultArr = array();
        $resultArr['count'] = $count;
        $resultArr['destination'] = $file_name;

        $filename = $file_name;
        $filepath = $_SERVER['HTTP_HOST'] . '/';
        $path = $filepath . $filename;

        if (file_exists($filename)) {
            // push to download the zip
            header('Content-type: application/zip');
            header('Content-Disposition: attachment; filename="' . $filename . '"');
            readfile($filename);
            unlink($filename);
        }
    } else {
        return false;
    }
}
?> 
```

我想在用户单击下载按钮后立即启动“进度条”，因为下载过程可能需要一些时间。

我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:17:11.977

像这样的东西？如果我不明白你的问题，请告诉我

HTML：

```
 <img id="loadingImage" src="pathToImage" alt="" style="display:none" />
 //pathToImage is the path to where your image is located 
```

jQuery：

```
$('#YourButtonID').click(function(){
    $('#loadingImage').css('display','block');
    //call your download page
    return false;
}); 
```

下载和重定向完成后，调用此方法隐藏进度条

```
 $('#loadingImage').css('display','none'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:04:03.087

您可以通过使用 ajax 来做到这一点。

```
$(document).ready(function()
{
  $("#download_button").click(function() {
     document.getElementById('progressbar').style.display='';
     //call your download page.
  });
}); 
```

# css - HighCharts-去除条形图的填充

> ID：14811145
> 
> 赞同：6
> 
> 时间：2013-02-11T11:16:29.180
> 
> 标签：css, highcharts

我正在使用条形图（带有百分比堆叠）构建进度条，并希望删除容器中的空格/填充，并仅保留条形图容器中没有任何填充/边距空间。

有没有办法做到这一点？

[小提琴](http://jsfiddle.net/gRYGn/1/)

代码：

```
$(function () {
    var chart;
    $(document).ready(function () {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'bar'
            },
            legend: {
                enabled: false,
            },
            title: {
                text: ''
            },
            xAxis: {

                lineWidth: 0,

                labels: {
                    enabled: false
                },
                minorTickLength: 0,
                tickLength: 0
            },
            yAxis: {
                min: 0,
                title: {
                    text: ''
                },
                lineWidth: 0,
                gridLineWidth:0,
                lineColor: 'transparent',
                labels: {
                    enabled: false
                },
                minorTickLength: 0,
                tickLength: 0
            },
            tooltip: {
                enabled: false
            },
            plotOptions: {
                bar: {
                    stacking: 'percent'

                },
                 series: {
            pointPadding: 0,
            groupPadding: 0,       
        }
            },

            series: [{
                name: 'max',
                data: [40],
                color: 'white'
            }, {
                name: 'current',
                data: [60],
                color: 'green'
            }]
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T13:55:14.490

您可以简单地删除边距：

```
chart: {
    renderTo: 'container',
    ....
    margin: 0
} 
```

见：http: [//jsfiddle.net/gRYGn/4/](http://jsfiddle.net/gRYGn/4/)

# php - 点击提交按钮 php mysql 后重定向到下一页

> ID：14811148
> 
> 赞同：0
> 
> 时间：2013-02-11T11:16:35.840
> 
> 标签：php, mysql, redirect

单击提交页面后，我想重定向到下一页，但出现以下错误：

> 警告：无法修改标头信息 - 标头已由第 70 行 C:\xampp\htdocs\P_details.php 中的（输出开始于 C:\xampp\htdocs\forms\P_details.php:80）发送

以下是 P_details.php 上的 php 代码

```
//connect to connect to the database and initialize all functions
include 'scripts/functions/init.php';
include 'html/head.php';
include 'html/page_title.php';
include 'html/top_menu.php';
include 'titles/P_details.php';

//Generate a random Personid
$Personid = rand(1,9999999);
$_SESSION['Personid'] = $Personid;
//Carry over the Jobid to this page
$Jobid = $_SESSION['SESS_MEMBER_JOB'];

if(empty($_POST)=== false)
    {
        $R_fields = array('Title','Surname','Forename','IdentityNumber','Gender','Race','Nationality');
        foreach($_POST as $key=>$value)
        {
            if (empty($value) && in_array($key,$R_fields)=== true)
                {
                    $errors[] = 'fields marked with (*) are required';
                    break 1;
                }
        }

        if(empty($errors)=== true)
            {

                if($_POST['title'] == '-Select-')
                    {
                        $errors[] ='Please select Title';
                    }
                if($_POST['Gender'] == '-Select-')
                    {
                        $errors[] ='Please select Gender';
                    }
                if($_POST['Race'] == '-Select-')
                    {
                        $errors[] ='Please select Race';
                    }
                if($_POST['Nationality'] == '-Select-')
                    {
                        $errors[] ='Please select Nationality';
                    }

            }

    }

    include 'forms/P_details.php';

    if(empty($_POST) === false && empty($errors)=== true)
        {
            //submit personal details
            $personal_details = array(
            'Personid'=>$Personid,
            'Title' => $_POST['title'],
            'Surname'=>$_POST['Surname'],
            'Forename' => $_POST['Forename'],
            'IdentityNumber'=>$_POST['IdentityNumber'],                                             
            'Gender'=>$_POST['Gender'],
            'Race'=>$_POST['Race'],
            'Nationality'=>$_POST['Nationality'],
            'WorkPermitNumber'=>$_POST['WorkPermitNumber'],
            'JobID'=>$Jobid);                       
            personal_details($personal_details);                        
            //redirect
            header('Location:Address_insert.php');
            exit();                                                                                                                             
        }
    else if(empty($errors) === false)
        {
            //output errors if the errors array is not empty
            echo output($errors);
        } 
```

?>

请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:22:01.737

要么`ob_start()`在页面顶部和`ob_end_flush()`底部调用，要么在你之前的页面上不回显任何内容`header()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:19:14.360

当您在前往另一个页面之前将任何输出回显到浏览器时，就会出现该错误。

检查你的包含，并确保你没有在任何地方做回声。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:21:29.653

我将行 include 'forms/P_details.php' 移到标题语句下方

```
<?php

//connect to connect to the database and initialize all functions
include 'scripts/functions/init.php';
include 'html/head.php';
include 'html/page_title.php';
include 'html/top_menu.php';
include 'titles/P_details.php';

//Generate a random Personid
$Personid = rand(1,9999999);
$_SESSION['Personid'] = $Personid;
//Carry over the Jobid to this page
$Jobid = $_SESSION['SESS_MEMBER_JOB'];

if(empty($_POST)=== false)
    {
        $R_fields = array('Title','Surname','Forename','IdentityNumber','Gender','Race','Nationality');
        foreach($_POST as $key=>$value)
        {
            if (empty($value) && in_array($key,$R_fields)=== true)
                {
                    $errors[] = 'fields marked with (*) are required';
                    break 1;
                }
        }

        if(empty($errors)=== true)
            {

                if($_POST['title'] == '-Select-')
                    {
                        $errors[] ='Please select Title';
                    }
                if($_POST['Gender'] == '-Select-')
                    {
                        $errors[] ='Please select Gender';
                    }
                if($_POST['Race'] == '-Select-')
                    {
                        $errors[] ='Please select Race';
                    }
                if($_POST['Nationality'] == '-Select-')
                    {
                        $errors[] ='Please select Nationality';
                    }

            }

    }

    if(empty($_POST) === false && empty($errors)=== true)
        {
            //submit personal details
            $personal_details = array(
            'Personid'=>$Personid,
            'Title' => $_POST['title'],
            'Surname'=>$_POST['Surname'],
            'Forename' => $_POST['Forename'],
            'IdentityNumber'=>$_POST['IdentityNumber'],                                             
            'Gender'=>$_POST['Gender'],
            'Race'=>$_POST['Race'],
            'Nationality'=>$_POST['Nationality'],
            'WorkPermitNumber'=>$_POST['WorkPermitNumber'],
            'JobID'=>$Jobid);                       
            personal_details($personal_details);                        
            //redirect
            header('Location: Address_insert.php');
            exit();                                                                                                                             
        }
    else if(empty($errors) === false)
        {
            //output errors if the errors array is not empty
            echo output($errors);
        }

        include 'forms/P_details.php'; 
```

?>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:42:04.550

`header('Location:Address_insert.php');` 在任何输出之前。

可能您包含的文件包含任何输出？

```
include 'html/head.php';
include 'html/page_title.php';
include 'html/top_menu.php';
include 'titles/P_details.php'; 
```

或者

```
include 'forms/P_details.php'; 
```

任何输出只能在之后插入`header('Location:Address_insert.php');`

# javascript - 我需要什么才能真正开始使用 emberjs？

> ID：14811155
> 
> 赞同：4
> 
> 时间：2013-02-11T11:17:01.150
> 
> 标签：javascript, ember.js

所以我正在检查[Emberjs](http://emberjs.com/)。

在主页上向下滚动一点到“开始使用 EMBER.JS 很容易”。

太好了，这看起来很简单，我会试一试。

创建一个新的样板 HTML5 文件。

将他们的模板代码粘贴到我的：

```
<body></body> 
```

包括 emberjs：

```
<script src="ember.js" type="text/javascript"></script> 
```

将他们提供的 JS 代码包含到：

```
<script type="text/javascript"></script> 
```

在我的头标签内。太好了，让我们看看会发生什么。

加载页面，控制台告诉我它需要 jquery。所以没问题我包括jQuery。再试一次，另一个错误，我需要包括车把。没问题，我包括车把。再试一次，应用程序没有定义......对......所以我包括

```
window.App = Ember.Application.create(); 
```

在他们提供的片段上方。再试一次，DS 没有定义。在这一点上，我不知道下一步该去哪里。我看了一下[emberjs 指南部分](http://emberjs.com/guides/models/)，因为我假设我必须在某处或其他地方定义一个 DS 模型。但是指南没有用。

我是否遗漏了一些明显的东西，或者这实际上并不像他们所说的那样“容易”？我必须做些什么才能使这个基本示例工作（以及为什么他们提供了无法作为示例运行的“基本”代码）？

编辑：

到目前为止我的完整代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js" type="text/javascript"></script>
<script src="handlebars.js" type="text/javascript"></script>
<script src="ember.js" type="text/javascript"></script>
<script type="text/javascript">
window.App = Ember.Application.create();
App.Person = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),

  fullName: function() {
    return this.get('firstName') +
           " " + this.get('lastName');
  }.property('firstName', 'lastName')
});

App.peopleController = Em.ArrayController.create({
  content: App.Person.findAll()
});
</script>
</head>
<body>
<h1>People</h1>

<ul>
{{#each peopleController}}
  <li>Hello, <b>{{fullName}}</b>!</li>
{{/each}}
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:05:58.247

问题不是你，而是文档忽略了列出所需的依赖项、Handlebars 的命名约定，并且突然开始谈论 Post 控制器而不提供代码。还有一些地方正在进行一些认知前向引用，所以如果你了解 EmberJs，那么该指南是有意义的，但如果你想重新学习它，你必须四处走动，做出假设，并进行一些测试。

虽然这不是 EmberJS 应用程序所需的最少代码，但它应该足以让您开始插入大约 80% 的入门指南。希望这可以帮助。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Demo</title>
<script src="jquery-1.9.1.js"></script>
<script src="handlebars.js"></script>
<script src="ember-1.0.0-rc.1.js"></script>
</head>
<body>

<script language="javascript" type="text/javascript">

  // Make a global variable -- http://emberjs.com/guides/application/
  App = Ember.Application.create({
    VERSION: '1.0.0',
    // store: Ember.Store.create().from(Ember.fixtures)
  });

  // http://emberjs.com/api/classes/Ember.Application.html
  App.ready = function() {
    // alert("App initialized!");
  };

  // Application Controller, extended with custom properties
  App.ApplicationController = Ember.Controller.extend({
    appName: 'My First Example',

    firstName: "Charlie",
    lastName: "Brown",

    // initial value
    isExpanded: false,

    expand: function() {
      this.set('isExpanded', true);
    },

    contract: function() {
      this.set('isExpanded', false);
    }
  });

  // A router
  App.ApplicationRoute = Ember.Route.extend({
    setupController: function(controller) {
      // `controller` is the instance of ApplicationController
      controller.set('title', "Hello world!");
    }
  });

</script>

<script type="text/x-handlebars" data-template-name="application">
  <header>
    <h1>A Header - {{appName}}</h1>
  </header>

  <div>
  Hello, {{firstName}} {{lastName}}.
  <p/>

  {{#if isExpanded}}
    <div class='body'>{{body}}</div>
    <button {{action "contract"}}>Contract</button>
  {{else}}
    <button {{action "expand"}}>Show More...</button>
  {{/if}}

  <hr/>
  {{outlet}}
  <hr/>

  </div>

  <footer>
    <H1>A Footer</H1>
  </footer>
</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:57:06.920

除非您已包含 Ember Data，否则您无需定义 DS 存储。[我在jsfiddle](http://jsfiddle.net/Deif/nv7y5/8/)上有最基本的 Ember 起始模板。您可以查看渲染帧的源代码，以了解您只需要 3 个 JS 文件（您已经包含这些文件）即可使应用程序正常工作。

从那里开始取决于您，但是是的，我承认缺少从头开始的文档。

从您的编辑中，您引用了一个`DS`对象，但尚未引用[Ember Data](https://github.com/emberjs/data)脚本。它目前是默认 EmberJS 脚本的附加组件，因为它没有 API 锁定，而主流是锁定的。

# c++ - 游戏关闭时有时会崩溃或进程留在内存中

> ID：14811158
> 
> 赞同：2
> 
> 时间：2013-02-11T11:17:11.023
> 
> 标签：c++, winapi

我的问题是，有时在关闭游戏时，可能会出现以下两种情况之一：

1.  进程留在内存中，必须手动终止
2.  游戏崩溃

我不确定这两个是相关的还是完全独立的问题。这两种情况都很少发生，但我必须消除这些情况。

至于崩溃，我做了一个转储，它说崩溃发生在 PeekMessage() 函数中。代码如下所示：

```
bool running = true;

/// Reset timer
Timer.Reset();

MSG msg;
ZeroMemory(&msg, sizeof(msg));

/// message pump
while(running)
{
    int msg_count = 10;
    while (PeekMessage(&msg, NULL, 0, 0, PM_REMOVE) && msg_count-->0)
    {
        ::TranslateMessage(&msg);
        ::DispatchMessage(&msg);

        if (msg.message == WM_QUIT)
        {
            running = false;
            break;
        }
    }

    if (ApplicationActive)
    {
        PrepareFrame();
        RenderFrame();
    }
    else
        Sleep(1);

    Sleep(1);
} 
```

据我所知，消息处理例程每次循环迭代最多处理 10 条消息。崩溃是否可能是消息队列溢出的结果？留在内存中的进程是“未到达”退出消息的结果，因为它在队列中太远了？如果有帮助，这里是转储的调用堆栈：

```
ntdll.dll!_KiFastSystemCallRet@0()  
ntdll.dll!_ZwWaitForSingleObject@12()  + 0xc bytes  
ntdll.dll!_RtlpWaitOnCriticalSection@8()  + 0xc8 bytes  
ntdll.dll!_RtlEnterCriticalSection@4()  - 0x4b84 bytes  
ntdll.dll!_LdrLockLoaderLock@12()  + 0x6b bytes 
ntdll.dll!_LdrLoadDll@16()  + 0xd8 bytes    
kernel32.dll!_LoadLibraryExW@12()  + 0xf7 bytes 
user32.dll!___ClientLoadLibrary@4()  + 0x60 bytes   
ntdll.dll!_KiUserCallbackDispatcher@12()  + 0x2e bytes  
user32.dll!_NtUserPeekMessage@20()  + 0xc bytes 
user32.dll!__PeekMessage@24()  + 0x2d bytes 
user32.dll!_PeekMessageA@20()  + 0x572 bytes 
```

> SchoolBus.exe!VCasualApp::Run() 第 229 行 + 0x12 字节 C++ SchoolBus.exe!wWinMain(HINSTANCE__ * form **=0x00400000, HINSTANCE** ***** form =0x00400000, HINSTANCE * form **=0x00400000, HINSTANCE** * **form=0x00400000) 第 61 行 C++ SchoolBus .exe!__tmainCRTStartup() 第 578 行 + 0x1c 字节 C kernel32.dll!@BaseThreadInitThunk@12() + 0x12 字节
> ntdll.dll！***RtlUserThreadStart@8() + 0x27 字节
> ntdll.dll！*_RtlUserThreadStart@8() + 0x1b 字节

# php - Kohana 3.2 ORM 检查集合中是否存在记录

> ID：14811160
> 
> 赞同：1
> 
> 时间：2013-02-11T11:17:14.477
> 
> 标签：php, orm, kohana

我正在尝试打印包含记录的总列表，对于此列表，有些可能已连接到用户。活动项目来自同一类的另一个集合（活动集合）。我将遍历整个列表，并且需要检查每条记录是否存在于活动集合中。有那个功能吗？

目前，我将活动项目放在一个数组中，其中记录 id 作为数组键进行检查，这很有效，但我想知道是否有更好的方法来做到这一点？

```
$totalcollection = ORM::Factory('table')->find_all();
// user has an relation named 'activerecords', which will find the records connected
// to a user through a link table
$activecollection = $user->activerecords->find_all();

foreach( $totalcollection as $record ) {

   $active = false;

   // I'm looking for a function like this one. Does it exist?
   $active = $activecollection->contains($record);

   if($active) {
       echo "<li class=\"active\">".$record->name."</li>";
   } else {
       echo "<li>".$record->name."</li>";
   }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:00:41.280

由于您使用的是单个表，您只需要检查`type`元素的属性是否`$totalcollection`为 equal `active`，如下所示：

```
$totalcollection = ORM::Factory('table')->find_all();

foreach( $totalcollection as $record ) {

   if($record->type == 'active') {
       echo "<li class=\"active\">".$record->name."</li>";
   } else {
       echo "<li>".$record->name."</li>";
   }
} 
```

将它们视为两个单独的集合是没有意义的，而且是不必要的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:54:49.277

你可以在你的`Model_Table`

```
public function belongs_to_user(Model_User $user)
{
    return ($user->activerecords->where('id', '=', $this->id)->count_all() > 0);
} 
```

然后在你的循环中

```
foreach( $totalcollection as $record ) {

   if($record->belongs_to_user($user)) {
       echo "<li class=\"active\">".$record->name."</li>";
   } else {
       echo "<li>".$record->name."</li>";
   }
} 
```

另一种选择，如果你认为这会产生太多的 SQL 查询，那就是获取 activerecord ids 并检查`in_array()`，我认为这就是你目前正在做的方式。也可以，IMO。

顺便说一句：请考虑将您的布局与您的逻辑分开，例如使用[KOstache](https://github.com/zombor/KOstache/)。

# java - 如何使用 iText 逐列而不是逐行填充 PdfPTable

> ID：14811161
> 
> 赞同：5
> 
> 时间：2013-02-11T11:17:16.580
> 
> 标签：java, itext, pdfptable

我正在使用 Java 和 iText 来生成一些 PDF。我需要将文本放在列中，所以我正在尝试使用 PdfPTable。我创建它：

```
myTable = new PdfPTable(n); 
```

`n`是列数。问题是 PdfPTable 是逐行填充表格的，也就是说，你先给第 1 行第 1 列的单元格，然后是第 1 行第 2 列，依此类推，但我需要逐列进行，因为是如何将数据提供给我的。

我会使用[http://stderr.org/doc/libitext-java-doc/www/tutorial/ch05.html](http://stderr.org/doc/libitext-java-doc/www/tutorial/ch05.html)`Table`中的（让您指定位置），但我得到“无法解析为类型” ，而我的 Eclipse 找不到正确的导入。

*编辑*：如果我之前的解释令人困惑，我想要按以下顺序填写表格：

```
1  3  5
2  4  6 
```

而不是这个：

```
1  2  3
4  5  6 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-23T17:27:17.853

这是一种方法：在您的情况 3 中，使用所需的列数创建一个 PdfPTable。对于您的数据的每次迭代，创建一个具有 1 列的 PdfPTable。创建 2 个 PdfPCell 对象，一个包含您当前所在的数据元素，另一个包含数据中的下一个值。所以现在你有一个 1 列和 2 行的 PdfPTable。将此 PdfPTable 添加到具有 3 列的 PdfPTable。继续此操作，直到打印完所有数据。用代码更好地解释：

```
public class Clazz {

    public static final String RESULT = "result.pdf";
    private String [] data = {"1", "2", "3", "4", "5", "6"};

    private void go() throws Exception {

        Document doc = new Document();
        PdfWriter.getInstance(doc, new FileOutputStream(RESULT));
        doc.open();

        PdfPTable mainTable = new PdfPTable(3);
        PdfPCell cell;

        for (int i = 0; i < data.length; i+=2) {
            cell = new PdfPCell(new Phrase(data[i]));
            PdfPTable table = new PdfPTable(1);
            table.addCell(cell);
            if (i+1 <= data.length -1) {
               cell = new PdfPCell(new Phrase(data[i + 1]));
               table.addCell(cell);
            } else {
                cell = new PdfPCell(new Phrase(""));
                table.addCell(cell);
            }
            mainTable.addCell(table);
        }

        doc.add(mainTable);
        doc.close();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T08:29:03.860

一种方法是为每个主列创建列 no = 1 的内部表，并将其添加到主表中。

```
private static PdfPTable writeColumnWise(String[] data, int noOfColumns, int noOfRows) {

    PdfPTable table = new PdfPTable(noOfColumns);
    PdfPTable columnTable = new PdfPTable(1);
    columnTable.getDefaultCell().setBorderWidth(0.0f);
    columnTable.getDefaultCell().setPadding(0.0f);

    for(int i=0; i<data.length; i++){
        if( i != 0 && i % noOfRows == 0 ){
            // add columnTable into main table
            table.addCell(columnTable);

            //re initialize columnTable for next column
            columnTable = new PdfPTable(1);
            columnTable.getDefaultCell().setBorderWidth(0.0f);
            columnTable.getDefaultCell().setPadding(0.0f);
        }

        PdfPCell cell = new PdfPCell(new Paragraph(data[i]));
        columnTable.addCell(cell);
    }

    // add columnTable for last column into main table
    table.addCell(columnTable);

    return table;
} 
```

# vb.net - 更改字体样式

> ID：14811163
> 
> 赞同：0
> 
> 时间：2013-02-11T11:17:20.577
> 
> 标签：vb.net, datagridview

当我将`ColumnHeadersDefaultCellStyle`属性的字体更改为粗体时，它会完美地改变，但是当我构建我的解决方案时，我的设置会自动更改为常规字体，我不知道为什么在构建解决方案时我的字体会发生变化。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:45:58.790

尝试`Clean Solution`和`Re-Build Solution`你的项目。

# javascript - 检查提交时输入是否为空

> ID：14811165
> 
> 赞同：0
> 
> 时间：2013-02-11T11:17:26.210
> 
> 标签：javascript, jquery, passwords, undefined

我正在尝试检查表单上的密码字段是否已在提交表单时填写，但它始终返回为“未定义”，因此我在提交表单时尝试运行的代码永远不会运行。

用户名字段似乎工作正常。

这是我的代码...

```
$("#form1").find("input[type=submit]").click( function() {
    if($(".username").val() != "" && $(".password").val() != "") {
        console.log("Success")
    } else {
        console.log("fail");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:50:40.743

您的 html 一定有问题，因为它似乎有效：

```
<form id="form1" method="post">
    <input type="text" class="username">
    <input type="text" class="password">
    <input type="submit" value="Submit">
</form> 
```

[在此处查看实时示例。](http://jsfiddle.net/rN2RJ/)

我有一种感觉，您可能会混淆使用“。”选择的类。使用“#”选择的 id，但如果我没有看到您的 html，我只是在猜测。

# facebook - 是否可以深入了解 OpenGraph 对象？

> ID：14811168
> 
> 赞同：0
> 
> 时间：2013-02-11T11:17:31.070
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-opengraph, facebook-insights

我想了解特定 OpenGraph 对象（例如总展示次数、点击次数等）。

我正在使用 FQL 获取 url 的对象 ID`SELECT id FROM object_url WHERE url=......`

一旦我有了对象 ID，是否有可能获得洞察力？

我尝试使用[https://graph.facebook.com/objectid/insights](https://graph.facebook.com/objectid/insights)没有太大的成功..

根据 Facebook 的文档，FQL 可用于获取特定故事的见解，但我没有任何故事 ID。

是否有可能获得这些见解，或者我是否必须为每个生成的动作存储动作 ID 并获得那些记录的动作 ID 的见解？（顺便说一句 - 是一个动作 id == 故事 id 吗？）

顺便说一句 - 我正在使用应用程序访问令牌做所有事情。

# c++ - 使用空类类型对象的内存

> ID：14811171
> 
> 赞同：3
> 
> 时间：2013-02-11T11:17:47.423
> 
> 标签：c++, standards, memory-model

由于在 C++`sizeof`中一个空类是 1 个字节，下面的代码是否有效？

```
class A
{
};

int main()
{
    A a;
    char* p = reinterpret_cast<char*>(&a);
    *p = 'a';
} 
```

我知道它几乎没用，但只是想看看我是否可以做到这一点。它在 MSVC2010 上编译并运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:26:07.493

**C++03 标准 1.8 C++ 对象模型：**

> **§1**的相关部分：一个*对象*是一个存储区域......有些对象是*多态*的......对于其他对象，**其中找到的值的解释取决于用于访问它们的表达式的类型。**"

在您的示例中，`a`是一个具有自动存储持续时间的对象，该对象在执行离开范围时被释放。基本上，你可以使用它所在的内存，你可以在那里存储任何你想要的东西：

```
int i;
char* myStr = reinterpret_cast<char*>(&i);
myStr[0] = 'H';
myStr[1] = 'i';
myStr[2] = '!';
myStr[3] = '\0';
std::cout << myStr; 
```

（完整的例子在[这里](http://ideone.com/tnCCW5)）

您在这里应该考虑的是您以这种方式“滥用”的对象的生命周期，即如果即使在对象已被释放后仍保留指向该内存的指针，则访问该内存将导致**未定义的行为**。

请注意，仅仅因为语言允许您做某事，并不意味着您应该这样做。以应有的方式使用该语言的功能。毕竟，您编写代码并不是为了“它有效”。

* * *

对于您关于空班规模的问题，标准的同一部分还说：

> **§4** : 如果一个完整的对象、一个数据成员 (9.2) 或一个数组元素是类类型，则其类型被认为是**最派生类**，以区别于任何基类子对象的类类型；最派生类类型的对象称为**最派生对象**。
> 
> **§5**：除非它是位域 (9.6)，否则最派生的对象**应具有非零大小，并应占用一个或多个字节的存储空间**。基类子对象的大小可能为零。POD 类型 (3.9) 的对象应占用连续的存储字节。

因此，标准保证像您这样的空类的对象将占用**至少 1 个字节**。

# javascript - Slidetoggle jquery打开所有而不隐藏其他li

> ID：14811172
> 
> 赞同：1
> 
> 时间：2013-02-11T11:17:49.187
> 
> 标签：javascript, jquery, html

我用它来显示一个子列表：

```
 function slidecontent() {
        $('ul.joinus_subtext').slideToggle();
    } 
```

我有这个标记：

```
 <ul class="joinus">
        <li onclick="slidecontent();">Benefactor
            <ul class="joinus_subtext">
                 <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse lacinia mi a turpis tempor blandit. Vestibulum ante ipsum primis in faucibus orci 
                                luctus et ultrices posuere cubilia Curae; Nullam sit amet ante sed tellus rutrum porta ut non ipsum.</li>
            </ul>
        </li>
        <li onclick="slidecontent();">Protector
            <ul class="joinus_subtext">
                <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse lacinia mi a turpis tempor blandit. Vestibulum ante ipsum primis in faucibus orci 
                                luctus et ultrices posuere cubilia Curae; Nullam sit amet ante sed tellus rutrum porta ut non ipsum.</li>
            </ul>
        </li>
    </ul> 
```

我遇到的问题是，当我单击一个**LI 时，它会切换所有，而不仅仅是这个**，

我想要实现的是，如果**我点击一个，它会显示它的内容，如果我点击另一个，它会隐藏打开的那个并打开我点击的那个。**任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:20:03.210

使用一个类`<li>`

```
<li class="liclass"> 
```

给它添加一个监听器：

```
$('.liclass').on('click',function(){
    $(this).slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:21:03.500

您使用的选择器`$('ul.joinus_subtext')`将为您提供所有`ul`with 类`joinus_subtext`，函数`slideToggle`将应用于所有这些，将要滑动的元素的父对象传递给 javascript 函数并将其`selector`作为`context`.

**[现场演示](http://jsfiddle.net/rajaadil/VM4Ht/)**

*html*

```
<li onclick="slidecontent(this);">Benefactor 
```

*Javascript*

```
function slidecontent(sourceObj) {
    $('ul.joinus_subtext', sourceObj).slideToggle();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:22:22.413

```
<ul class="joinus">
    <li>Benefactor
        <ul class="joinus_subtext">
             <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse lacinia mi a turpis tempor blandit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nullam sit amet ante sed tellus rutrum porta ut non ipsum.</li>
        </ul>
    </li>
    <li>Protector
        <ul class="joinus_subtext">
            <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse lacinia mi a turpis tempor blandit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nullam sit amet ante sed tellus rutrum porta ut non ipsum.</li>
        </ul>
    </li>
</ul> 
```

从你的onclick中删除`li element`，然后添加followign jQuery

```
$( document ).ready( function () {
    $( '.joinus_subtext' ).click( function () {
        $( this ).slideToggle()
    });
}); 
```

# linux-kernel - NUMA 和 SMP 上的 Linux 调度程序

> ID：14811175
> 
> 赞同：1
> 
> 时间：2013-02-11T11:17:58.673
> 
> 标签：linux-kernel, load-balancing, scheduler, numa, smp

我想知道 schedule() 函数的副本是在每个处理器上运行，还是只是为每个处理器运行一个 schedule()。

如果在每个处理器/核心上运行 schedule() 的副本，进程如何分派到特定的 CPU/cpu 运行队列。它是负载均衡器的工作吗？是否只有一个负载均衡器为所有 CPU 运行，还是使用标志/通信方法以分布式方式完成？

ps-我知道调度类等的工作，但我很难弄清楚各种运行队列之间的进程分布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:13:22.243

> 进程如何分派到特定的 CPU/cpu 运行队列。它是负载均衡器的工作吗？

是的。在多处理器系统中，负载均衡器会定期检查 CPU 负载是否不均衡；如果是，则处理器执行跨 CPU 的任务平衡。

> 是否只有一个负载均衡器为所有 CPU 运行，还是使用标志/通信方法以分布式方式完成？

是的。在 SMP 调度中，只有一个 schedule() 和一个负载平衡来管理多个内核之间的多任务。

参考：[Linux 调度程序内部](http://www.ibm.com/developerworks/linux/library/l-scheduler/index.html)。

# drupal-7 - 在 hook_preprocess_page 中使用 theme_hook_suggestions 会停止使用 html.tpl.php

> ID：14811177
> 
> 赞同：0
> 
> 时间：2013-02-11T11:18:01.520
> 
> 标签：drupal-7

我已将此行添加到 template.php 中的 hook_preprocess_page：

```
if (isset($vars['node']) && $vars['node']->type=='landing_page') {
  $vars['theme_hook_suggestions'][] = 'page__'. $vars['node']->type;
} 
```

这在我的测试服务器上运行良好，但是现在我已将其置于暂存状态并导致：

A) 仅输出页面模板 - 它没有被 html.tpl.php 包围。

B）我在 template.php 中的 preprocess_html 函数根本没有被调用。

如果我注释掉该行，则再次使用 html.tpl.php。

[该线程](https://stackoverflow.com/questions/247991/displaying-a-drupal-view-without-a-page-template-around-it/8396968#8396968)正在讨论类似但相反的问题。

我真的很难过这一点 - 任何点都会非常有用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:04:21.357

这是由在我的页面模板中调用未定义的函数引起的。

在我开始搜索错误日志之前，这并不明显。

希望这可以节省别人一些时间......

# android - Android的ExpandableListView：删除项目时保持组展开/未展开

> ID：14811178
> 
> 赞同：4
> 
> 时间：2013-02-11T11:18:03.963
> 
> 标签：android, refresh, expandablelistview

我有一个带有 ExpandableListView 的活动。我使用扩展 BaseExpandableListAdapter 的自定义适配器填充列表（我的适配器称为 StopsExpandableAdapter）。我实现了所有需要的方法。

在我的活动中，我可以使用上下文菜单从该列表中删除条目。当用户这样做时，我想刷新列表以便删除该项目。如果我创建一个新适配器，列表视图将重置为默认值，并且所有组都将折叠。我想保持列表视图的状态，所以在刷新列表后扩展的组仍然被扩展。

我想我可以在我的自定义适配器（StopsExpandableAdapter）中添加一个 removeGroup 方法，并在删除组后在我的活动中使用它，但是如果我使用：

```
 mExpandableList.getAdapter(); 
```

我得到一个 ExpandableListConnector，而不是我的自定义适配器，所以我不能使用我的函数。如何刷新列表并保持其状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T08:22:37.097

为了能够访问我的适配器，我将其保存为全局变量：

```
private StopsExpandableAdapter adapter; 
```

通过这种方式，我可以访问我的函数以从我的数据列表（在适配器内部）中删除一个孩子并通知数据已更改。

为了能够保持状态，我使用布尔值来了解组是否已扩展。每次我添加或删除一个项目时，我都会检查哪些组已展开，以便在添加/删除完成后能够再次展开它们。

```
private ArrayList<Boolean> expandGroups; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:30:49.227

使用以下命令。

> StopsExpandableAdapter.notify();

或者

> StopsExpandableAdapter.notifydatasetchanged();

# c# - C# 在图表顶部显示图表值

> ID：14811186
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:18:26.880
> 
> 标签：c#, asp.net, excel, excel-interop

我使用 C# 互操作创建了图表。我想在条形图的尖端显示确切的值。我该怎么做？我的代码在这里。

```
 Range chartRange;

    Object misValue = System.Reflection.Missing.Value;

    ChartObjects xlCharts = (ChartObjects)sheet0.ChartObjects(Type.Missing);

    ChartObject myChart = (ChartObject)xlCharts.Add(10, 70, 250, 250);

    Chart chartPage = myChart.Chart;

    chartRange = sheet0.get_Range("$G$2:$G$12,$AB$2:$AB$12,$AT$2:$AT$12", misValue);

    SeriesCollection scl = myChart.Chart.SeriesCollection();

    Series xlSeries = scl.NewSeries();

    chartPage.SetSourceData(chartRange, misValue);

    xlSeries.XValues = sheet0.get_Range("A3:A12");

    chartPage.ChartType = XlChartType.xlColumnClustered;

    chartPage.Location(XlChartLocation.xlLocationAsNewSheet, "Islamic Summary Chart"); 
```

请帮助我获取图表尖端的值。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:53:47.693

我认为您不能轻易地将它们放在聚集柱形图的顶部。

```
DataLabels.Position 
```

财产是要看的，但即使是

```
XlDataLabelPosition.xlLabelPositionAbove; 
```

不适用于您的图表类型。

您的一个解决方案是添加另一个系列作为 XY 散点图类型，隐藏点并在该系列上显示数据标签，因为您可以将其显示在点上方。这些值可以与您现在拥有的值完全相同。

# kernel - 我可以控制我的 GPU 中的特定集群吗？

> ID：14811187
> 
> 赞同：0
> 
> 时间：2013-02-11T11:18:40.693
> 
> 标签：kernel, opencl, gpu

我是 OpenCL 的新手。例如假设我的 GPU 架构是这样的：

> 多处理器数量：14
> 
> 经纱尺寸：32

现在我想做任务并行。我有 14 个流式多处理器

1) 我可以同时运行 14 个不同的任务吗？

2）如果是这样，怎么办？

3）如何提及全局ID，组ID，本地ID和所有..

用例子清楚地解释（有一些线程数）

提前致谢..：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:43:21.170

GPU 与 CPU 不同。虽然 CPU 可以在“任务并行”模式下运行，这意味着它们可以在每个内核上运行不同的代码。然而，GPU 是“数据并行”并且是 SIMT（单指令多线程）。

这一切都意味着您一次只能运行一个内核，但该内核将在所有内核上执行，并且每个内核将同时对一片数据进行操作。

[这个问题](https://stackoverflow.com/questions/8603471/parallelism-in-gpu-cuda-opencl)及其接受的答案有更多描述 SIMT 的信息，并且有很多有用的信息，我不会在这里重复。

在 GPU 上获得任务并行性的唯一方法是实际拥有多个 GPU/设备。

[从技术上讲，当您使用clCreateCommandQueue](https://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateCommandQueue.html)`CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE`创建命令队列时，OpenCL API 支持一次执行多个内核。不能保证内核是同时执行的，但是，在这种模式下，我猜所有的 GPU OpenCL 实现只会一个接一个地执行每个内核。如果您使用基于 CPU 的 OpenCL 实现，情况可能并非如此，您可能会同时执行内核（我自己没有尝试过）。

# android - 检查运行活动时如何检查特定类

> ID：14811190
> 
> 赞同：1
> 
> 时间：2013-02-11T11:18:47.507
> 
> 标签：android, android-activity

我目前正在使用此代码：

```
ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);

if(taskInfo.get(0).topActivity.getPackageName().equalsIgnoreCase("com.android.settings")){
    ////Do Action       
} 
```

我可以查看当前活动是否为 com.android.settings（Android 设置页面）。我正在尝试将其替换为包 com.android.setting 中的特定类文件，例如

```
 if(taskInfo.get(0).topActivity.getPackageName().equalsIgnoreCase("com.android.settings.LocationSettings") || taskInfo.get(0).topActivity.getPackageName().equalsIgnoreCase("com.android.settings/.LocationSettings")){
         ////Do Action

     } 
```

我的问题是这段代码没有检测到“LocationSettings”。

我指的是 Android 源代码，[这里](https://github.com/CyanogenMod/android_packages_apps_Settings/tree/cm-10.1/src/com/android/settings)是 Cyanogen 源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:27:59.423

您正在检查的类 (com.android.settings.LocationSettings) 不是 Activity 的子类，因此它不会显示在 Activity 列表中。

另外，getPackageName() 只返回包。因此，您需要分别对照 getClassName() 检查类名。

# html - 将保存的图像数据重绘到 HTML 5 画布

> ID：14811191
> 
> 赞同：0
> 
> 时间：2013-02-11T11:18:51.063
> 
> 标签：html, html5-canvas, html5-appcache

我正在学习 HTML5。我想在画布中创建/绘制一些形状并将其保存在 MySQL 数据库中并在画布本身中恢复它。

我跟着[这个教程](http://cool-php-tutorials.blogspot.in/2011/05/simple-html5-drawing-app-with-saving.html)

并将数据保存在数据库中。我在我的数据库列中得到了这个

```
data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAZAAAADICAYAAADGFbfiAAAEAUlEQVR4nO3dv48VVRgG4DcRtjEWJBQbOhortYQ%2FASOtyWpCBQkWFtQm1jTGnlBQEV2NCTWVfwCVNiRsZSwwuFRsRAJ7sbjBrLkz98cyO9%2Bc%2BDzJtJv3NPvmzHfO3AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOL7tJLMkr3ue2ZHneZL7NTEBmJLt9BfHps%2BbkjlM8jTJlRHXAcCIhiyPTUtmluQgyb0TXyUAg%2Bp7ZTXreMYumTc5bp7Y6gE4lr5S2N7gb9zPfB4yRtE8Pu5CARhW1z%2F7TcpjXVcyn4UcZpiSmSU5cwI5AdjA0Z3DSZTHJu5lPg8ZcjczS7I35iIAmIYzGfa12KskO6OuAIByjzP8gH6W5GWSJ0lujbcUACrcTPcpsZM6OTZL8mCUlQEwKTuZD%2FCH2rk8S3Ju1BUAMAl7GXZ3cmPc%2BABM0a3M5yEvs%2FlrsKMzlf3M78hcGDc%2BAFNzI8OeBpvFN8IA%2FnfOZT4HUSQAvJUHGeZ2vSIB4F8XMp%2BF7Ge9uYoiAWCpq1EkALyFdYrkWlk6ACZvVZG8TrJblg6AyVunSH4rSwfA5H2Z1UXyd5KzVQEBmLazSV5k9RHgO1UBAZi%2B37P6PslhkttVAQGYtt2sdzlRmQDQ6VrWvwE%2FS%2FJ%2BTUwApux21vvNk2dVAQGYvnXK5GFZOgCacCfLX3PdrYsGQAu%2ByPIdydW6aAC04G6WD9o%2FqosGQAsepr9IHhXmAqARy35Z8XphLgAa8EH6B%2B0HhbkAaMSP6d%2BNfF%2BYC4BGHKR%2FyP5eYS4AGnA9%2FbuRrcJcADTiUbp3IkoEgJU%2BjBIB4Ji20n1S693KUAC0oa9EzleGAqANW%2BkerF%2BuDAVAG%2FpK5KvKUAC0Yz%2BLJfJDaSIAmvFrFkvkl9JEADTjpyyWyJ%2BliQBoxtfpvityqjIUAG24nO7h%2BqXKUAC04Xy6S%2BS7ylAAtOF0kldZLJEXSd4pzAVAI3azWCKHSS5WhgKgDZfS%2FfmTbypDAdCGU0meZ7FEnsQXfQFYw7fpnot8XBkKgDZcTPeAfS%2FJ54W5AGjA6SR%2FpPu476eFuQBoxCdJ%2Fsp%2FC2SnNBEAzdjK%2FLjvz0k%2BK84CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADABv4B7KWsU334yWgAAAAASUVORK5CYII%3D 
```

在我的一个页面中，我只需要在画布中呈现保存的图像...有人请建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:44:38.197

图像的 src 属性可以是[data-url](http://en.wikipedia.org/wiki/Data_URI_scheme) - base64 编码的二进制图像数据。该函数`canvas.toDataURL();`将画布的内容转换为这样的数据 URL。您发布的教程中的代码然后通过 encodeURIComponent 函数运行它，以将其转换为对 ajax 友好的格式。

当您稍后从数据库中检索该字符串时，您需要通过 decodeURIComponent 运行它（这将替换为`%3A`,`:`等以将其转换回语法正确的 data-url），然后将生成的字符串分配给一个新的 Image （） 元素。然后，您应该能够将此图像绘制到画布上。`%2F``/`

# java - dtype 列太短，无法容纳类名

> ID：14811192
> 
> 赞同：6
> 
> 时间：2013-02-11T11:18:51.480
> 
> 标签：java, hibernate, jpa

我有一些长名称类，我使用 Hibernate 将它们存储在数据库中。
我注意到休眠将 dtype 列（用于继承支持）创建为字符变化（31）。
由于类名超过 31 个字符，因此插入失败。
解决它的最佳方法是什么？
因为我有很多类，所以我更喜欢一些全局设置而不是为每个类添加注释。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T13:43:41.557

JB Nizets 答案的替代方法是指定

```
@DiscriminatorColumn(length=100) 
```

将提供足够长的列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T12:39:32.713

用于`@DiscriminatorValue("some_short_name")`所有子类。我认为没有其他解决方案。

# ember.js - Ember View 渲染过早

> ID：14811196
> 
> 赞同：0
> 
> 时间：2013-02-11T11:19:14.553
> 
> 标签：ember.js

我有一条用于创建新文档、复制现有文档的路线。

```
App.DocumentsNewRoute = Ember.Route.extend({
  model: function (params) {
    this.modelParams = params; // save params for reference
    return App.Document.createRecord();
  },
  setupController: function (controller, model) {
    // use the params to get our reference document
    var documentModel = App.Document.find(this.modelParams.document_id);

    documentModel.one('didLoad', function () {
      // once loaded, make a serialized copy
      var documentObj = documentModel.serialize();

      // and set the properties to our empty record
      model.setProperties(documentObj);

      console.log('didLoad');
    });
  }
}); 
```

我在我的视图中添加了一些日志。

```
App.DocumentView = Ember.View.extend({
  init: function () {
    this._super();
    // fires before the didLoad in the router
    console.log('init view');
  },
  willInsertElement: function () {
    // fires before the didLoad in the router
    console.log('insert elem');
  }
}); 
```

这是我的模板

```
{{#if model.isLoaded }}
  {{ view App.DocumentView templateNameBinding="model.slug" class="document portrait" }}
{{ else }}
  Loading...
{{/if}} 
```

问题似乎是我的模型`isLoaded`，但在渲染我的模板时没有填充，所以此时 templateNameBinding 不存在，并且在填充数据时似乎没有更新。

我应该在我的模板中使用 model.isLoaded 以外的东西，还是应该强制重新渲染我的模板，如果是，如何以及在哪里？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:03:40.013

~~看来你把事情复杂化了。它应该是：~~

## 编辑

我在第一次阅读时误解了你的问题，所以

```
App.DocumentsNewRoute = Ember.Route.extend({
    model: function (params) {
        var originalDoc = App.Document.find(params.document_id),
        newDoc = App.Document.createRecord();
        originalDoc.one('didLoad', function () {
             newDoc.setProperties(this.serialize());
        });
        return newDoc;
    },
    setupController: function (controller, model) {
        controller.set('content', model);
    }
}); 
```

如果一切正常，ember 会自动重新渲染。

# jsf - JSF：成功创建后调用 javascript

> ID：14811207
> 
> 赞同：0
> 
> 时间：2013-02-11T11:20:02.283
> 
> 标签：jsf

我当前的代码。

```
<h:form>
   <h:panelGroup id="messagePanel" layout="block">
       <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
   </h:panelGroup>
    <h:panelGrid columns="2">

        // some form input stuff here..

    </h:panelGrid>         

   <h:commandButton class="register-btn" action="#{accountController.create}" value="#{bundle.Register}">
        <f:ajax event="action" execute="@form" render="messagePanel"/>
   </h:commandButton>                       
</h:form> 
```

messagePanel 是显示验证错误的地方。

创建（）方法

```
public String create() {
        try {

            getFacadeUser().create(currentUser);

            FacesContext.getCurrentInstance().getExternalContext().redirect("/index.xhtml");
            return null;
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    } 
```

成功创建后是否可以调用javascript？目前我的创建表单是一个弹出模式，我想要的是在成功创建后隐藏模式而不是重定向到页面。

我正在使用 JSF 2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:48:49.063

您可以在托管 bean 中为您的对话框创建一个组件绑定，并使用该绑定从您的函数中隐藏对话框。我认为代表您的组件绑定的对象类型是特定于框架的（尽管它们可能都扩展了 UIComponent），因此您需要指定要使用的 JSF 实现来实现完整的解决方案。例如，我在 ADF 中实现了这个用例。

这是 ADF 的一个例子：
`<af:popup id="sample" binding="#{viewScope.myBean.myPopup}">`

在托管 bean 中：
`RichPopup myPopup;
...
public void onSave() {
//save user
myPopup.hide();
}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:29:50.963

使用标准 JSF（阅读：没有组件库或实用程序库，如 PrimeFaces 或 OmniFaces 可以使这更容易），最好的选择是有条件地渲染`<script>`元素。

```
<h:panelGroup id="script">
    <h:outputScript rendered="#{not empty accountController.currentUser.id}">
        alert('User successfully created!');
    </h:outputScript>
</h:panelGroup> 
```

中引用它`<f:ajax ... render="script">`。

# ios - UIView removeFromSuperview 导致应用程序崩溃

> ID：14811210
> 
> 赞同：0
> 
> 时间：2013-02-11T11:20:12.977
> 
> 标签：ios, objective-c, uiview, memory-leaks

让我解释一下我的问题。我有 3 个`UIView`：一个**LoginView**、一个**LibraryView**和一个**StoreView**。我有这段代码可以从一个 UIView 切换到另一个：

```
- (void)showView:(NSInteger)viewTag
{
  if (viewTag == 1)
  {
      if (self.loginView)
      {
        self.loginView = nil;
        self.loginView.delegate = nil;
      }

      LoginView *loginPage = [[LoginView alloc]initWithFrame:self.view.bounds];
      [loginPage setDelegate:self];

      self.loginView = loginPage;

      [loginPage release];

      [self.view addSubview:self.loginView];
}
else if(viewTag == 2)
{
    if (self.libraryView)
    {
        self.libraryView = nil;
        self.libraryView.delegate = nil;
    }

    LibraryView *libraryPage = [[LibraryView alloc]initWithFrame:self.view.bounds];
    [libraryPage setDelegate:self];

    self.libraryView = libraryPage;

    [libraryPage release];

    [self.view addSubview:self.libraryView];
}
else
{
    if (self.bookStoreView)
    {
        self.bookStoreView = nil;
        self.bookStoreView.delegate = nil;
    }

    BookStoreView *bookStore = [[BookStoreView alloc]initWithFrame:self.view.bounds];
    [bookStore setDelegate:self];

    self.bookStoreView = bookStore;

    [bookStore release];

    [self.view addSubview:self.bookStoreView];
} 
```

}

基本上，这就是我初始化 UIViews 的方式。以下是用于在它们之间切换的按钮：

```
- (void)loginViewToLibraryView
  {
     [self.loginView removeFromSuperview];
     [self showView:2];
  }

- (void)libraryViewToStoreView
  {
     [self.libraryView removeFromSuperview];
     [self showView:3];
  }

  //so on... 
```

当我调用函数`libraryViewToLoginView`和`storeViewToLoginView`. 每当我调用这些函数时，应用程序就会崩溃，这很奇怪，因为这两个函数之前都可以正常工作。我检查了 Profile，它给了我这个堆栈跟踪：

```
#   Address     Category Event RefCt  Timestamp    Size Responsible Library   Responsible Caller
0   0xc4dcac0   CALayer Malloc  1   00:02.233.004   48  UIKit                 -[UIView _createLayerWithFrame:]
1   0xc4dcac0   CALayer Retain  3   00:02.238.317   0   QuartzCore             CA::Layer::insert_sublayer(CA::Transaction*, CALayer*, unsigned long)
2   0xc4dcac0   CALayer Release 2   00:02.238.324   0   UIKit                 -[UIView(Internal) _addSubview:positioned:relativeTo:]
3   0xc4dcac0   CALayer Retain  3   00:02.238.518   0   QuartzCore            -[CALayerArray copyWithZone:]
4   0xc4dcac0   CALayer Release 2   00:02.238.602   0   UIKit                 -[UIView(Hierarchy) _makeSubtreePerformSelector:withObject:withObject:copySublayers:]
5   0xc4dcac0   CALayer Retain  3   00:02.238.665   0   QuartzCore            -[CALayerArray copyWithZone:]
6   0xc4dcac0   CALayer Release 2   00:02.238.796   0   UIKit                 -[UIView(Internal) _didMoveFromWindow:toWindow:]
7   0xc4dcac0   CALayer Retain  3   00:05.107.397   0   QuartzCore            -[CALayerArray copyWithZone:]
8   0xc4dcac0   CALayer Release 2   00:05.107.539   0   UIKit                 -[UIView(Hierarchy) _makeSubtreePerformSelector:withObject:withObject:copySublayers:]
9   0xc4dcac0   CALayer Retain  3   00:05.107.613   0   QuartzCore            -[CALayerArray copyWithZone:]
10  0xc4dcac0   CALayer Release 2   00:05.107.700   0   UIKit                 -[UIView(Internal) _didMoveFromWindow:toWindow:]
11  0xc4dcac0   CALayer Retain  2   00:06.105.958   0   QuartzCore            -[CALayerArray copyWithZone:]
12  0xc4dcac0   CALayer Release 2   00:06.108.134   0   UIKit                 -[UIView dealloc]
13  0xc4dcac0   CALayer Release 1   00:06.108.492   0   UIKit                 -[UIView dealloc]
14  0xc4dcac0   CALayer Zombie  -1  00:06.115.332   0   QuartzCore            CA::release_objects(X::List<void const*>*) 
```

如您所见，这是我不太了解的 CALayer 上的一堆调用。我想了解为什么会这样。谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:09:10.453

坦率地说，我还没有理解你想在这里实现的一切。但是你应该考虑事件的顺序。看我的评论：

```
 if (self.loginView)
  {
    self.loginView = nil;
    //self.loginView is nil now. What so you think doese happen on the next line? 
    self.loginView.delegate = nil;
    // change the sequence of this lines and it will be ok. 
  }

  LoginView *loginPage = [[LoginView alloc]initWithFrame:self.view.bounds];
  [loginPage setDelegate:self];

  self.loginView = loginPage;

  [loginPage release]; //here you release the object. it is gone now. However, there are still references to it. 

  [self.view addSubview:self.loginView]; // here you add the released object. What do you expect to happen? 
  // Switch those two statmetns and you should be fine. 
```

好吧，它甚至可以工作，因为这些 statmens 彼此相邻。当你从它的超级视图中删除它时，它会再次被释放。你的应用程序可能会崩溃。

顺便说一句，如果不保留它，您根本不应该释放它。还是我在这里错了？但是， addSubview 应该保留它，而 removeFromSuperview 将释放它，因此不需要额外的释放。一次删除它应该消失了。（如果没有保留在其他地方）

# css - 如何在 CSS 中设置来自父级的子级之间的边框？

> ID：14811215
> 
> 赞同：1
> 
> 时间：2013-02-11T11:20:37.800
> 
> 标签：css, css-selectors

为了设置元素**之间**的边界线，我在每个孩子的一侧使用边框，*除了最后一个*。例如[_](http://jsfiddle.net/zhhkh/)

```
<div class="parent">
   <div>First</div>
   <div>Second</div>
   <div>Third</div>
   <div>Fourth</div>
</div> 
```

与 CSS

```
.parent div{
    display:block;
    padding:5px;
    border-bottom:dashed 1px #000}
.parent div:last-child{
    border-bottom:dashed 0 #000
} 
```

有没有办法从父级的 CSS 样式中设置子级之间的边框？不使用`last-child`. 换句话说，在来自父规则的单个语句中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T11:58:02.887

不，边框是子元素的属性，因此只能在它们上指定。您可以为此使用单个规则，但它需要高级 CSS3 选择器支持：

```
.parent > div:not(:last-child){
    border-bottom: dashed 1px #000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:59:21.720

我只知道一个解决方法：使用 jQuery 并遍历那些子元素（每个：[http](http://api.jquery.com/each/) ://api.jquery.com/each/ ）并设置你的 css 类 if next(next: [http://api.jquery.com/ ?s=next](http://api.jquery.com/?s=next) ) 元素也是子元素...

我认为另一种方式，仅使用 css 不存在，但我不确定，如果您找到仅使用 css 的解决方案，请发布；）

问候

# c# - WPF 从代码隐藏更改属性

> ID：14811217
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:20:51.090
> 
> 标签：c#, wpf

我有一个属性设置如下：

```
<ListBox Grid.Row="1" Name="lstDrop" Background="Transparent" GUICommon:ListBoxSelector.Enabled="True" 
```

有人可以告诉我是否可以`GUICommon:ListBoxSelector.Enabled="True"`在代码隐藏中将属性更改为 false？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:53:55.003

`ListBoxSelector.Enabled`似乎是[附属物](http://msdn.microsoft.com/en-us/library/ms749011.aspx)。

您应该可以通过调用来设置它

```
ListBoxSelector.SetEnabled(lstDrop, true); 
```

# html - HTML CSS 表格行高控制

> ID：14811223
> 
> 赞同：11
> 
> 时间：2013-02-11T11:21:11.883
> 
> 标签：html, css, html-table

我有一张有两行的表，我想将上面的一行（以蓝色突出显示）缩小到其子 div ( `.black`) 的高度，但我无法控制高度。

我试过修改

*   div 的边距
*   行的边距、内边距和高度
*   表格的`table-layout`样式属性

但这些都没有让我更进一步。

![你好](../Images/5b8b343f4dfc1110e35c420a6e53002d.png)

带有完整源代码的[Codepen 。](https://codepen.io/anon/pen/yEjzxx)

桌子：

```
<table>
  <tr>
    <td rowspan="2" style="padding-left: 10px;">
      <div class="col1"></div>
    </td>
    <td style="height: 1px;">
      <div class="black"></div>
    </td>
  </tr>
  <tr>
    <td>
      <div class="out"></div>
    </td>
  </tr>
</table> 
```

div的风格：

```
div.black {
  display: inline-block;
  width: 128px;
  height: 10px;
  background-color: black;
  vertical-align: top;
  margin: 0px;
  margin-left: 10px;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-11T11:54:34.020

而不是这个 `<td style="height: 1px;">`把`<td style="font-size: 10px;">`，你可能还要加上`line-height: 0px`。

# c++ - 船长在 boost::spirit 中不起作用

> ID：14811227
> 
> 赞同：0
> 
> 时间：2013-02-11T11:21:28.790
> 
> 标签：c++, parsing, boost, boost-spirit, qi

我使用增强精神来解析颜色。效果很好，但是在我更改了迭代器类型之后，船长停止了工作。

```
"rgb(1.0,1.0,0.5)"  // this works
" rgb(0.2,0.2,0.2)" // this fails 
```

这是标题：

```
struct ColorGrammar : public qi::grammar<StringIterator, Color(), chs::space_type>
{
//! Iterator type for this grammar
typedef StringIterator ItType;
//! Skipper type used in this grammar
typedef chs::space_type Skipper;

//! Rule to parse a number with up to 3 digits
qi::uint_parser<uint8, 10, 1, 3> number;
//! Rule to parse a hex digit
qi::uint_parser<uint8, 16, 1, 1> hexdigit;

ColorGrammar();

//! Rule for rgb(...)
qi::rule<ItType, Color(), qi::locals<float, float>, Skipper> rule_rgb;
//! Rule for rgba(...)
qi::rule<ItType, Color(), qi::locals<float, float, float>, Skipper> rule_rgba;
//! Mainrule
qi::rule<ItType, Color(), Skipper> rule_color;
}; 
```

这是cpp

```
ColorGrammar::ColorGrammar()
: ColorGrammar::base_type(rule_color, "color-grammar")
{
using namespace qi::labels;
using boost::phoenix::construct;
auto& _1 = qi::_1;

rule_rgb = '(' >> qi::float_[_a = _1] >> ',' >> qi::float_[_b = _1] >> ',' >> qi::float_[_val = phx::construct<Color>(_a, _b, _1)] >> ')';
rule_rgba = '(' >> qi::float_[_a = _1] >> ',' >> qi::float_[_b = _1] >> ',' >> qi::float_[_c = _1] >> ',' >> qi::float_[_val = phx::construct<Color>(_a, _b, _c, _1)] >> ')';
rule_color = (qi::lit("rgb") >> rule_rgb)
    | (qi::lit("rgba") >> rule_rgba);
} 
```

和电话：

```
Color out;
StringIterator begin = str.cbegin();
StringIterator end = str.cend();

bool result = qi::phrase_parse(begin, end, color_, chs::space, out); 
```

我敢肯定，这只是一个小错误，但我看不到它。也许我在源头上看了太久……你能看出一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:09:11.713

我看不出有什么问题：我已努力重建您的 SSCCE。

*   [http://liveworkspace.org/code/1pDtmn$1](http://liveworkspace.org/code/1pDtmn%241)

在此过程中，似乎我必须解决问题。我建议你这样做。

## 哦，这就是我写这个的方式：

*   没有凤凰了
*   没有更多的构造函数
*   不再有 qi::locals
*   不再有不必​​要的复制
*   使用期望点

简而言之：不用大惊小怪。

```
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted/struct.hpp>
#include <cstdint>

namespace qi  = boost::spirit::qi;
namespace chs = boost::spirit::ascii; //qi;

typedef std::string::const_iterator StringIterator;

struct Color
{
    float r,g,b,a; 
};

BOOST_FUSION_ADAPT_STRUCT(Color, (float, r)(float, g)(float, b)(float, a))

template <typename ItType, typename Skipper>
struct ColorGrammar : public qi::grammar<StringIterator, Color(), Skipper>
{
    ColorGrammar()
        : ColorGrammar::base_type(rule_color, "color-grammar")
    {
        using namespace qi;
        rule_rgb   = lit("rgb")  >> '(' > float_ > ',' > float_ > ',' > float_ >       attr(1.0f) > ')';
        rule_rgba  = lit("rgba") >> '(' > float_ > ',' > float_ > ',' > float_ > ',' > float_     > ')';
        rule_color = rule_rgb | rule_rgba;
    }

  private:
    qi::uint_parser<uint8_t, 10, 1, 3> number;   // unused
    qi::uint_parser<uint8_t, 16, 1, 1> hexdigit; // unused

    qi::rule<ItType, Color(), Skipper> rule_rgb, rule_rgba, rule_color;
};

int main()
{
    Color out;
    std::string str = " rgb ( 0.3 , .4 , 0.5 )";
    StringIterator begin = str.cbegin();
    StringIterator end   = str.cend();

    ColorGrammar<StringIterator, chs::space_type> color_;

    bool result = qi::phrase_parse(begin, end, color_, chs::space, out);
    std::cout << std::boolalpha << result << '\n';
    std::cout << "remains: '" << std::string(begin, end) << "'\n";
} 
```

住在[http://liveworkspace.org/code/35htD$3](http://liveworkspace.org/code/35htD%243)

# php - 添加此 Twitter 分享按钮

> ID：14811232
> 
> 赞同：-2
> 
> 时间：2013-02-11T11:22:02.207
> 
> 标签：php, share, addthis

我正在做 php 网站。我想添加 twitter、facebook 分享按钮。[https://www.addthis.com/get/sharing#.URjSLWduKdk](https://www.addthis.com/get/sharing#.URjSLWduKdk)我想像这个链接一样使用。但是有一些问题。我将该链接的代码添加到我的网站。但我的网站上似乎没有任何内容。例如; 当用户点击 twitter 分享按钮我们的文本，我们的链接，通过标签将直接创建。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:23:59.367

HTML 只会显示链接，Javascript 会做所有的 API 工作，比如将数据发送到 twitter 服务。

你也添加了javascript代码吗？

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-51221ce07ff0d8f1"></script>
<!-- AddThis Button END --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:13:20.977

如果您在一项服务上遇到这么多问题，您可以尝试其他服务，例如 sharethis、loginradius 等……市场上到处都是这样的服务

# c# - 为类中的所有成员设置访问修饰符一

> ID：14811234
> 
> 赞同：2
> 
> 时间：2013-02-11T11:22:08.833
> 
> 标签：c#, access-modifiers

已经定义了这样的类：

```
class Data
{
    internal string f_source;
    internal string f_output;
    internal string password;
} 
```

如您所见，我明确地为其中的每个成员定义了访问修饰符。

是否存在某种方式来一次为类中的所有成员定义默认访问修饰符？

也许，有什么属性让这样的梦想成真……不知道……

我尝试在类声明之前使用访问修饰符：

```
internal class Data
{
    string f_source;
    string f_output;
    string password;
} 
```

但是，没有成功！

是否有任何建议：“如何解决这样的问题？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:11:29.330

您的第二个定义类型使您的类只能在该类的同一程序集中访问。没有办法让所有班级成员都成为所有成员的内部成员。

看看这个：[msdn内部定义&示例](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.71%29.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:19:09.200

通过设计，您所要求的在 C# 中是不可能的。

如果没有给出，C# 的规范指定使用哪个访问修饰符。默认值是合法的最受限制的访问修饰符。这是直接在命名空间中的类型（即不是嵌套类型）是内部的，而任何成员都是私有的，除非另有说明。

我敢肯定，这是一个设计决策，部分基于对 C++ 中访问修饰符如何工作的经验。一系列错误可能来自文件的特定部分声明`private`等。必须声明`public`它更具表现力（或者知道如果没有指定它会尽可能受到限制）。将受限保留为默认设置非常适合保留尽可能多的内部 (*) 实现细节，并且只公开您真正需要公开的内容

(*) 不是修饰符

# java - 接收图像并使用 tcp 套接字显示它？（安卓）

> ID：14811236
> 
> 赞同：0
> 
> 时间：2013-02-11T11:22:24.120
> 
> 标签：java, android, sockets, mobile, tcp

我如何接收图像并使用带有 android 设备的 tcp 套接字显示它？我尝试了一些东西，但没有用。我正在寻找一些示例以从 pc 发送图像或文件并将其保存在手机上（android、java）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:08:18.933

我使用类似的东西从 url 下载图像：
import java.io.IOException; 导入 java.io.InputStream；导入 java.net.HttpURLConnection；导入 java.net.URL；导入 java.net.URLConnection；

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ImageView;

public class AsyncDownloadImage extends AsyncTask<ImageView, Void, Bitmap> {

    private static final String TAG = "AsyncDownloadImage";
    ImageView imageView = null;

    @Override
    protected Bitmap doInBackground(ImageView... imageViews) {
        this.imageView = imageViews[0];
        return DownloadImage((String) imageView.getTag());
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        if (result != null)
            imageView.setImageBitmap(result);
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

    private Bitmap DownloadImage(String URL) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            if (in != null)
                in.close();
        } catch (IOException e1) {
            Log.e(TAG, "Error in downloading image");
            e1.printStackTrace();
        }
        return bitmap;
    }
} 
```

我使用它的方式是在imageview的标签中设置我要下载的图像的url并作为参数传递给ImageView。例如。

```
ImageView iv.setTag("http://www.example.com/image.png");
new AsyncDownloadImage().execute(iv); 
```

如果您想使用套接字下载它，您可以打开一个套接字连接，例如：

```
Socket socket = new Socket(ip, port);
InputStream inputStream = socket.getInputStream(); 
```

# javascript - 自动使用页面上所有大图像的 Javascript 库

> ID：14811237
> 
> 赞同：8
> 
> 时间：2013-02-11T11:23:31.140
> 
> 标签：javascript, jquery, image-gallery

我有一个网站，一个大页面上有很多图片。

最简单的是我可以包含的脚本，它自动搜索同一页面并使用所有大于 100 像素的图像从它们创建幻灯片库。

有谁知道这么简单的脚本，不需要任何编程技能？

我一开始就发现了这个：

> [jQuery获取大于特定尺寸的元素内的所有图像](https://stackoverflow.com/questions/8933183/jquery-get-all-images-within-an-element-larger-than-a-specific-size)

要使所有图像大于某个尺寸，您可以使用以下内容：

```
var allImages = $('img', yourDivElement)

var largeImages = allImages.filter(function(){
  return ($(this).width() > 70) || ($(this).height() > 70)
}) 
```

* * *

更新：

经过更多研究，我发现这是最合适的：[Fancybox Gallery](http://fancyapps.com/fancybox/#examples)

它应该在这个页面上实现：

> [http://www.kathrinhoffmann.com/](http://www.kathrinhoffmann.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T07:34:34.147

这真的取决于你最喜欢的灯箱（“画廊开瓶器”）是什么。假设你喜欢[ShadowBox](http://www.shadowbox-js.com/)。它要求`rel="shadowbox[gallery-name]"`其中画廊名称是可选的。shadowbox 的有趣之处在于它`lightbox`也`shadowbox`可以正常工作。

然后您需要做的是在具有此 rel 属性的图像周围添加一个链接标签。

```
var img = $("img"),
    a = "<a href='",
    b = "' rel='lightbox[",
    galName = "chooseName",
    c = "]'>";

img.each(function() {
    var $this = $(this);
    if ($this.width() > 100 || $this.height() > 100) {
        $this.wrap(a + $this.attr("src") + b + galName + c);
    }
}); 
```

[小提琴](http://jsfiddle.net/BramVanroy/8vDBN/1)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-24T07:22:39.713

您是否尝试过这样做来获取图像的原始宽度和高度：

```
// loop through img elements
$('.img-class').each(function(){

    // create new image object
    image = new Image();

    // assign img src attribute value to object src property
    image.src = $(this).attr('src');

    // function that adds class to image if width and height is greater that 100px
    image.onload = function(){

        // assign width and height values
        var width = this.width,
            height = this.height;

        // if an image is greater than 100px width and height assign the 
        // string fancybox to image object className property
        image.className = (width > 100 && height > 100) ? 'fancybox' : '';
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-19T07:44:06.790

@Bram Vanroy 几乎是对的，但是您需要注意实际尺寸（不受 CSS 左右的影响）和未加载的图像（这就是为什么我的过滤器需要回调来返回过滤后的图像的原因）：

[http://jsfiddle.net/coma/wh44u/3/](http://jsfiddle.net/coma/wh44u/3/)

```
$(function() {

    $('img').filterBiggerThan(100, function(big) {

        console.log(big);

    });

});

$.fn.filterBiggerThan = function (limit, callback) {

    var imgs = [];
    var last = this.length - 1;

    this.each(function(i) {

        var original = $(this);
        var img = $('<img/>')
        .appendTo('body')
        .css({maxWidth: 'none'})
        .load(function(event) {

            if(img.width() > limit || img.height() > limit) {

                imgs.push(original);

            }

            img.remove();

            if(i >= last) {

                callback(imgs);

            }

        });

        img.attr('src', this.src);

    });

}; 
```

这里还有另一个例子：

[http://jsfiddle.net/coma/NefFM/22/](http://jsfiddle.net/coma/NefFM/22/)

**正如 Bram 建议的那样，在这里你有一个 Fancybox 画廊：**

[http://jsfiddle.net/coma/NefFM/32/](http://jsfiddle.net/coma/NefFM/32/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-19T13:02:42.450

没有什么能阻止您使用所需的标记包装您的图像（您已经找到）并将 em 传递给`fancybox`：

```
largeImages.each(function(){
  $(this).wrap('<a></a>').parent().attr({'rel':'gallery', href: this.src});
});

$('a[rel=gallery]').fancybox(); 
```

[您可以在这个 fiddle](http://jsfiddle.net/juicyscripter/eB9jp/)中看到工作演示（请注意，我用作`body`在演示中查找图像的根元素，您最好向包含您要使用的所有图像的元素添加一些类/属性并改用它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-26T00:23:23.680

谢谢，

我是这样解决的：

[我下载了 fancybox 并从我位于kathrinhoffmann.com](http://kathrinhoffmann.com)的页面底部的[fancybox 说明](http://fancyapps.com/fancybox/#instructions)中添加了此代码：

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox -->
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.4" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script>

<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="s$
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>

<link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="sc$
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script type="text/javascript">
        $(document).ready(function() {
                $(".fancybox").fancybox();
        });
</script> 
```

然后我包含了我自己的脚本：

```
<script type="text/javascript" src="/add_fancybox.js"></script> 
```

看起来像这样：

```
var img = $("img"),
    a = "<a href='",
    b = "' rel='group' class='fancybox'>";

img.each(function() {
    var $this = $(this);
    if ($this.width() > 50 && $this.height() > 50) {
        $this.wrap(a + $this.attr("src") + b);
    }
}); 
```

# jquery - 在回调/事件中调用类方法 - jQuery

> ID：14811240
> 
> 赞同：0
> 
> 时间：2013-02-11T11:25:21.670
> 
> 标签：jquery, callback

我使用类似于下面的代码定义了一个 Javascript 的“弹出窗口”类：

```
function Popup(strPopContID)
{
    this.strPopupContaineriD=strPopContID;

    /* code creates popup with ID equal to value of strPopContID with 'close button' in
       the top bar of popup with class 'CloseButton'*/

    classThisPopup=this;
    $('#'+this.strPopupContaineriD+' .CloseButton').click(function(){
       classThisPopup.ClosePopup();
    })

    this.ClosePopup=function(){
       $('#'+this.strPopupContaineriD).remove();
     }
} 
```

现在，如果我创建我的类的两个实例：

```
Popup1 = new Popup('FirstContainer');
Popup2 = new Popup('SecondContainer'); 
```

我可以使用 Popup1.ClosePopup() 和 Popup2.ClosePopup() 很好地关闭它们，但单击关闭按钮只会关闭一个框。我似乎明白，从 JQuery 将 ClosePopup 调用为“click”选项会弄乱变量范围，这就是为什么我的“ClosePopup”函数只对创建的最新弹出窗口做出反应，但有什么方法可以解决这个问题而无需传递任何'ClosePopup' 的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:31:41.680

您缺少`var`该`classThisPopup`变量，因此它在全局对象（窗口）上声明。

一旦你改变 `classThisPopup=this;`它`var classThisPopup=this;`应该工作。

# database - ZF2 - 记录不存在

> ID：14811244
> 
> 赞同：1
> 
> 时间：2013-02-11T11:27:17.253
> 
> 标签：database, zend-framework2, record, validation

我尝试使用 zf2 db 验证器来检查记录是否不存在。

我在我的控制器中设置了以下代码：

```
$validator = new NoRecordExists(
                array(
                    'table'   => 'topics',
                    'field'   => 'topic',
                )
            ); 
```

在此配置之后，我尝试验证，但出现“发生错误”，找不到任何其他错误输出，谁能告诉我有关此错误的更多信息。

```
var_dump($validator->isValid('test')); 
```

如果有人可以给我一些提示，那就太好了:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:45:13.690

您是否设置了数据库适配器？

您可以在构造函数中传递它或调用 setAdapter();

```
validator->setAdapter(
    $this->getServiceLocator()->get('Zend\Db\Adapter\Adapter')
); 
```

您可以在服务配置中进行设置，以自动为您注入适配器。

# ruby-on-rails - 无法生成网址

> ID：14811246
> 
> 赞同：0
> 
> 时间：2013-02-11T11:28:55.523
> 
> 标签：ruby-on-rails

这是我的模型

```
class Tourisme < ActiveRecord::Base
  has_friendly_id :title, :approximate_ascii => true

   .
   .

end 
```

当标题包含 `"?"`or`"/"`并且我想生成一个 url 时：

```
 admin_tourisme_path(tourisme) 
```

我有一个错误

```
admin_tourisme_url failed to generate from {:action=>"show", :id=>#<Tourisme id: 14, title: "title with  ?", description:............. 
```

我怎样才能解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:02:10.487

因此，为friendly_id阅读文档（[http://rubydoc.info/github/norman/friendly_id/master/file/WhatsNew.md](http://rubydoc.info/github/norman/friendly_id/master/file/WhatsNew.md)）我找到了2个解决方案：

1 -`#normalize_friendly_id`在模型中使用：来自文档：

再见巴博萨

Babosa 是 FriendlyId 3 的 slugging 库。

FriendlyId 4 默认不使用它，因为其中最重要的部分已经被 Active Support 3 接受。

但是，Babosa 仍然很有用，例如，用于将西里尔文（或其他语言）字符串惯用地音译为 ASCII。它很容易包含 - 只需在模型中覆盖 #normalize_friendly_id ：

```
class MyModel < ActiveRecord::Base
  ...

  def normalize_friendly_id(text)
    text.to_slug.normalize! :transliterations => :russian
  end
end 
```

2 - 使用 slugged 模型：[http ://rubydoc.info/github/norman/friendly_id/master/FriendlyId/Slugged](http://rubydoc.info/github/norman/friendly_id/master/FriendlyId/Slugged)

# c# - System.Core.dll 中的 Stackoverflow 异常

> ID：14811248
> 
> 赞同：-2
> 
> 时间：2013-02-11T11:31:01.830
> 
> 标签：c#, asp.net-mvc

有人可以帮我调试这个问题：

我正在开发一个 MVC webapp。我有一个动态路由系统，将数据库中的路由存储为`friendlyUrls`. 我所有友好的 url 逻辑几个月来一直运行良好，所以它可能与错误无关。

今天早上，当我导航到特定的 url 时，我突然开始`Stackoverflow`在库中收到异常。此 mvc 路由指向控制器操作 ( )。动作由自定义动作过滤器赋予属性，但动作过滤器和动作代码都不会被命中。`System.Core.dll``~/Login``AccountController.Login()`

我可以停止使用断点的最后一个代码是`global.asax`'`FormsAuthentication_OnAuthenticate`方法。此方法运行良好并设置用户的角色（此时没有角色，因为他还没有登录）。然后它退出此方法并立即抛出`Stackoverflow`异常。

我找不到任何其他受影响的页面，但无法正确测试它，因为我无法登录管理页面（也可能存在问题）。

谁能告诉我如何获得有关导致此问题的原因的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:42:09.910

找到了！我使用依赖注入来注入一个服务，该服务本身正在调用原始服务，因此它进入了解决相同两个依赖项的无限循环！如果 Unity 能够识别出这样的问题并提供更多细节，那就太好了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-25T23:50:31.190

就我而言，我在选项>调试中选中了仅启用我的代码并且它有效

# mysql - 涉及多列的子查询

> ID：14811249
> 
> 赞同：0
> 
> 时间：2013-02-11T11:31:55.530
> 
> 标签：mysql

我想要一个查询返回另一个表中不存在的值。我目前运行两个查询并在代码中进行交集。我被多列的语法和语句的存在所困扰`where`

第一个查询：

```
SELECT sid, cid 
FROM  Table2
where used = 0
group by sid, cid 
```

主要查询：

```
SELECT    sid, cid, count(1) as cnt 
FROM      Table1
WHERE     ##not any pair of (sid, cid) returned from first query##
GROUP BY  sid, cid 
HAVING    cnt < 20 
LIMIT     50 
```

什么是完整的主查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:57:08.500

尝试：

```
SELECT    t1.sid, t1.cid, count(1) as cnt 
FROM      Table1 t1
LEFT JOIN Table2 t2
ON        t1.sid = t2.sid AND t1.cid = t2.cid AND t2.used = 0
WHERE     t2.sid IS NULL AND t2.cid IS NULL
GROUP BY  sid, cid 
HAVING    cnt < 20 
LIMIT     50 
```

# iwebbrowser2 - 加载本地 HTML 页面时不会触发 DocumentComplete 事件

> ID：14811251
> 
> 赞同：1
> 
> 时间：2013-02-11T11:36:04.010
> 
> 标签：iwebbrowser2

我正在将本地 HTML 文件加载到 IE 中，并希望收到 DocumentComplete 事件。它从未被解雇过。我也尝试过 NavigateComplete 和 ProgressChange 但它们也没有被解雇。这是代码：

```
public void OnDocumentCompleted(object pdisp, ref object url)
{
    Console.WriteLine("DocumentCompleted fired on url {0}!", url);
}

var IE = new InternetExplorer();        
object Empty = 0;

IE.NavigateComplete2 += new DWebBrowserEvents2_NavigateComplete2EventHandler(e.OnNavigateComplete2);
IE.DocumentComplete += new DWebBrowserEvents2_DocumentCompleteEventHandler(e.OnDocumentCompleted);
IE.ProgressChange += new DWebBrowserEvents2_ProgressChangeEventHandler(e.OnProgressChange);

var uri = new Uri("file://c:/iframeExample.html");
IE.Navigate(uri.AbsolutePath);

IE.Quit(); 
```

如果我正在浏览网页上的网页，我会收到所有事件。那么，为什么他们没有因为本地页面而被解雇呢？

# javascript - 缩小 JavaScript 是保护源代码的唯一方法吗？

> ID：14811252
> 
> 赞同：0
> 
> 时间：2013-02-11T11:38:02.853
> 
> 标签：javascript

我正在做一些研发来定义开发以 html5 作为浏览器前端的多层应用程序所涉及的所有技术。

现在我计划用html5 css js编写所有客户端，有一个中间层，我的“真实”代码无论如何都安全地在服务器端，无论如何出于不同的原因，可能有理由在我的网页中隐藏javascript。

缩小它是一种降低可读性的方法，但是有没有一种简单的方法来“隐藏源”？

js 文件通常位于 webfarm 上，但在相同的情况下会有企业安装，这就是为什么我正在研究一种“隐藏代码”的方法。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T11:51:51.240

不，你不能隐藏 JS 源代码。如果有人想看看你的 JS 源代码，他们将能够做到。

缩小+混淆是您可以做的事情。请注意，这些技术不会保护您的源代码，它们只会使您难以阅读您的源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T11:52:38.360

缩小 JavaScript 不会以任何方式隐藏它，任何开发人员都可以在几秒钟内重新格式化它。

根据定义，没有办法隐藏您的 JavaScript。任何可供浏览器执行的代码都可供用户阅读。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T11:58:08.257

你不能隐藏你的 JS。只要它是从您的服务器下载的，它将始终可见。

你可以使用一些技巧来让别人更难阅读你的代码。这些包括：

1.  缩小和混淆（就像你指出的那样）。在 googleClosure 中使用同意模式会使代码很难阅读。
2.  用服务器端插入客户端代码。
3.  使用 AJAX 获取部分客户端代码

这只会使“逆向工程”变得更加困难，而不是不可能，特别是如果有人有足够的耐心来遵循面包屑。

* * *

更新：有另一种方法可以“隐藏”您的代码。在支持扩展的浏览器中，您可以开发具有大多数应用程序核心功能的扩展，并使用 JS 与代码进行交互。大多数浏览器都支持带有外部 dll 的扩展。但是，这将“强制”您的用户下载您的扩展程序以使用您的 web 应用程序，这可能不是一个好主意。

# android - 将 ListView EditText 值存储或维护到 ArrayList 中

> ID：14811257
> 
> 赞同：0
> 
> 时间：2013-02-11T11:51:19.730
> 
> 标签：android, listview, android-arrayadapter, android-edittext

我的问题是：-**我想将 ListView 的所有 EditText 值存储到 ArrayList**中。
在我的应用程序中，我`Custom ListView`使用 row as `EditText`。只需考虑`listview`有 20 行。
当我做这个任务时，我**首先**遇到了滚动问题`ListView`（这意味着值`EditText`被弄乱了。（其他地方）），但幸运的是解决了它。
现在我想将所有值存储到`ArrayList<String>`.
是的，我还在我的适配器中编写了代码。但是在将该列表设置为外部使用时出现**异常 NullPointer 。**
此外，我从不想在 getView 中设置 ArrayList（导致视图回收时出现问题）
我知道 Exception 因为`TextWatcher Listener`. 那么应该有什么替代方法。此外，我从来没有任何用于保存数据的按钮。只想存储值，因为值会一一出现在 ListView 的 EditText 中。
这是我的适配器类：-

```
public class MyAdapter extends ArrayAdapter<String> 
{
    private LayoutInflater mInflater;       
     public ArrayList<String> _values;
     ArrayList<String> data;
     Model model;
    public MyAdapter(Context context,int res,ArrayList<String> obj) {
        super(context,res,obj);
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);             
        _values=new ArrayList<String>();
        model=new Model();
        this.data=obj;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.listview, null);
            holder = new ViewHolder();               
            holder.caption = (EditText) convertView.findViewById(R.id.editText1);              
           holder.tv=(TextView)convertView.findViewById(R.id.textView1);
           holder.tv.setText(data.get(position));
        } else {
            holder = (ViewHolder) convertView.getTag();
            holder.tv.setText(data.get(position));
        }

        holder.caption.addTextChangedListener(new TextWatcher()
        {
            public void afterTextChanged(Editable edt) 
            {
                _values.add(edt.toString());
            }

            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}

            public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) { }
        });

        convertView.setTag(holder);
        holder.ref=position;
        holder.caption.setText(_values.get(position));
        model.setData(_values);//here getting exception
        return convertView;
    }
}

class ViewHolder {
    EditText caption;   
    TextView tv;
    int ref;
} 
```

这是我为外部目的使用的关于该字符串的模型类

```
 public class Model 
 {
   ArrayList<String> data;

   public ArrayList<String> getData() {
       return data;
   }
   public void setData(ArrayList<String> data) {
    this.data = data;
    for(String str : data)
        Log.v("data=", str);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:29:14.287

我不确定，但这对你有帮助吗

```
Arrays.sort(data); 
```

然后

```
MyAdapter ma = new MyAdapter(<args>) 
ma.notifydatasetchanged();
<ListViewInstance>.setAdapter(ma); 
```

# sql - SQL 不需要的笛卡尔积

> ID：14811259
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:51:26.580
> 
> 标签：sql

我以前在 SQL 中做过很多连接，但这个不想工作 - 我得到一个笛卡尔积，我不知道为什么。我有两张桌子（在这种情况下） - 一张用于约会，另一张用于客户。CustomerId 是客户表的主键，是约会表的外键。

我想要实现的是运行一个查询，显示所有约会以及客户的姓名（存储在客户表中）。

这是我的查询：

```
 SELECT a.AppointmentId
    ,a.Subject
    ,a.StartDateTime
    ,c.CustomerId
    ,c.FirstName
    ,c.lastname
FROM shared.Appointment a
INNER JOIN shared.Customer c ON a.CustomerId = c.customerid
WHERE a.BusinessCode = 'bp'
    AND StartDateTime > '2013-02-11'
    AND a.CustomerId > 0
GROUP BY c.customerid
    ,a.AppointmentId
    ,a.Subject
    ,a.CustomerId
    ,a.StartDateTime
    ,c.FirstName
    ,c.lastname
ORDER BY a.AppointmentId; 
```

结果是一个可怕的笛卡尔积，只有在我开始将名字/姓氏添加到选择部分时才会出现。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:37:29.647

我刚刚尝试对数据库上的其他表进行类似但更简单的查询，并且仍然得到笛卡尔积。我相信数据库有问题，而不是查询。我不确定堆栈溢出的任何人都可能在不查看数据库的情况下解决此问题。

无论如何，谢谢你们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:55:36.963

意外的笛卡尔积通常是由于一个简单的错字：

而不是这个：

```
from shared.Appointment a 
    join shared.Customer c on a.CustomerId=c.customerid 
```

也许你输入了这个：

```
from shared.Appointment a 
    join shared.Customer c on a.CustomerId=a.customerid 
```

一个角色就可以做到。

# arrays - PHP - 从数组中生成一个随机的 5 位数字，但有一个例外

> ID：14811260
> 
> 赞同：1
> 
> 时间：2013-02-11T11:51:29.303
> 
> 标签：arrays, exception, random, numbers, generator

我想为文件名生成一个随机的 5 位数字，但有例外。
如果 PHP 将生成例如数字 65，我想设置为 00065（只有 5 位）。
我有一个包含生成器异常的数组：
`$uploaded_files= array(00178, 49856, 32183, 02004, 01585);`
在数组中是已经存在的文件名，并且数字生成器省略它们非常重要，以避免可能的错误。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:00:31.360

试试这个：

```
//create a rand_value initially
while(in_array($rand_value, $uploaded_files) {
    $rand_value = rand(0, 99999);
    $rand_value = sprintf("%05s", $rand_value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:40:23.983

考虑不要[重新发明轮子](http://en.wikipedia.org/wiki/Globally_unique_identifier)，尤其是当轮子以某种方式以您的[语言](http://www.php.net/manual/en/function.com-create-guid.php#99425)[提供](http://php.net/manual/en/function.com-create-guid.php)时。话虽如此：

```
/**
 * Get random number outside an exception list
 *
 * @param array $exception Exception list
 */
function getRandom($exception=array('00001', '00002', '00003', '00004', '00005')) {
    $rand=str_pad(mt_rand(0,10),5,0,STR_PAD_LEFT);
    if(in_array($rand,$exception))return getRandom($exception);
    return $rand;
}

var_dump(
    getRandom(),
    getRandom(),
    getRandom(),
    getRandom(),
    getRandom(),
    getRandom()
); 
```

请注意，这种实现在碰撞非常快时可能非常昂贵，尤其是在异常列表增长的情况下。

# visual-c++ - 在 C++ 中动态创建二维字符数组

> ID：14811261
> 
> 赞同：0
> 
> 时间：2013-02-11T11:51:34.210
> 
> 标签：visual-c++

我想通过指针动态创建一个二维字符数组。然后在其中输入10个字符串，然后从用户那里获取一个字符串目标并在数组中找到它。如果存在，则返回其索引。我已经为它编写了代码，但它有错误。请帮我纠正它。提前致谢。

```
#include<iostream>
#include<string>
using namespace std;
int strsearch(char [][50],char *);
int main()
{
    char str[10][50];
    char *target=new char [50];
    int index;
    for(int i=0; i<10; i++)
    {
        str = new char* [50];
        str++;
    }

    for(int i=0; i<10; i++)
    {
        cout<<"Enter a sting";
        cin>>str[i][50];
        str++;
    }
    cout<<"Enter a string to find:";
    cin>>target;
    index=strsearch(str,target);
    if(index<0)
    {
        cout<<"String not found";
    }
    else
    {
        cout<<"String exist at location "<<index<<endl;
    }
    return 0;
}

int strsearch(char string[10][50],char *fstr)
{
    int slen;
    for(int i=0;i<10;i++)
    {
        slen=strlen(**string);
        if (strnicmp(*string[50],fstr,slen)== 0)
        {
            return i;
        }
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:01:44.133

我认为无论如何这是一个错误：

```
for(int i=0;i<10;i++)
{
    slen=strlen(**string);
    if (strnicmp(*string[50],fstr,slen)== 0)
    {
       return i;
    }
 } 
```

必须是这样的：

```
for(int i=0;i<10;i++)
{
    slen=strlen(string[i]);
    if (strnicmp(string[i],fstr,slen)== 0)
    {
       return i;
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:15:50.613

我做了一些更正，我认为它可以帮助你，但我没有编译来检查错误。

```
#include<iostream>
#include<string>
#define DIM_1 10 // Avoid to use "magic numbers" in your code
#define DIM_2 50

using namespace std;
int strsearch(char **string,char *fstr);
int main()
{
    char **str = new char*[DIM_1]; //char str[10][50]; dynamically allocated array.
    char *target=new char [DIM_2];
    int index;
    for(int i=0; i<DIM_1; i++)
    {
        str[i] = new char[DIM_2]; //Do not lost the original pointer
        //str++;
    }

    for(int i=0; i<DIM_1; i++)
    {
        cout<<"Enter a sting";
        cin>>str[i][DIM_2];
        //str++; Do not lost the original pointer
    }
    cout<<"Enter a string to find:";
    cin>>target;
    index=strsearch(str,target);
    if(index<0)
    {
        cout<<"String not found";
    }
    else
    {
        cout<<"String exist at location "<<index<<endl;
    }
    // Free memory!!
    for (int i=0; i<DIM_1;i++) delete[] str[i];
    delete[] str;
    delete[] target;

    return 0;
}

int strsearch(char **string,char *fstr) //its dinamicly allocated array
{
    int slen;
    int result=-1; //Only one return-> structured programming
    for(int i=0;i<DIM_1;i++)
    {
        slen=strlen(**string);
        //strlen and strnicmp is C, not C++, check string class.
        if (strnicmp(string[i],fstr,DIM_2)== 0) //Find in the string[i]
        {
            result= i;
        }
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:58:59.300

只需使用：

```
std::vector<std::string> obj; 
```

它将为您节省所有的头痛和心脏疼痛，并防止您出现容易出错的手动内存管理问题。你要做的是用C方式解决问题。使用 C++ 的正确方法是使用字符串向量。

# sql-server - 通过实体框架使用用户提供的 XPath 查询 SQL Server xml 列

> ID：14811263
> 
> 赞同：5
> 
> 时间：2013-02-11T11:51:44.647
> 
> 标签：sql-server, entity-framework, xpath

我很难弄清楚如何在 SQL Server 中使用 xml 数据列，特别是与实体框架一起使用。

基本上，我们的一个表以 XML 的形式存储用户提供的“自定义元数据”，因此将其存储在表的 Xml 列中似乎是明智的。

然而，我们的应用程序的要求之一是支持元数据的搜索。用户可以提供一个 XPath 查询字符串，以及一个用于比较 XPath 值的值，以搜索包含与其查询匹配的元数据的元素。

我认为 SQL Server xml 函数对此非常理想（例如， [xmlcol].exist('/path1/path2[0][text()=''valuetest'''] ），但 Entity 不支持它们框架，令人恼火（或者具体来说，不支持 xml 列）。作为替代方案，我尝试创建一个 UDF，将用户提供的 XPath 传递给 xml 函数，但后来发现 xml 函数只允许字符串文字，所以我不能提供变量...

在这一点上，我已经没有选择了。

我创建了一小段代码，对 IQueryable.ToString() 的结果执行正则表达式替换，以注入我的 XPath 过滤器，然后手动将此字符串发送到数据库，但这也存在问题，例如例如，结果似乎并没有延迟加载导航属性。

我一直在寻找，偶然发现了 SQLCLR 类型的想法，并开始创建一个执行 XPath 比较的 SQLCLR 函数。我以为我在这一点上是赢家，直到一位同事指出 Azure 中的 SQL Server 不支持 SQLCLR - 哦！

我还有什么其他选择？我似乎跑得非常接近空...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:48:47.987

您可以在动态构建查询的存储过程中执行此操作。

[SQL小提琴](http://sqlfiddle.com/#!3/4e6f9/2)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  ID int identity primary key,
  Name varchar(10) not null,
  XMLCol xml
);

go

insert into YourTable values
('Row 1', '<x>1</x>'),
('Row 2', '<x>2</x>'),
('Row 3', '<x>3</x>');

go

create procedure GetIt
  @XPath nvarchar(100)
as
begin
  declare @SQL nvarchar(max);

  set @SQL = N'
  select ID, Name
  from YourTable
  where XMLCol.exist('+quotename(@XPath, '''')+N') = 1';

  exec (@SQL);
end 
```

**查询 1**：

```
exec GetIt N'*[text() = "2"]' 
```

**[结果](http://sqlfiddle.com/#!3/4e6f9/2/0)**：

```
| ID |  NAME |
--------------
|  2 | Row 2 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:24:06.627

为了保持“可定制”，可以使用[DbSet 上的 SqlQuery 方法：](http://msdn.microsoft.com/en-us/data/jj592907.aspx)

```
var query = @"SET ARITHABORT ON; 
              select * from [YourTable] where 
              [xmlcol].exist('/path1/path2[0][text()=''{0}''']";
var numOfResults = 5;
var offsetPage = 1;

var results = Context.YourTable.SqlQuery(String.Format(query,"valuetest"))
                              .OrderBy(x => x.col)
                              .Skip(offsetPage * numOfResults)
                              .Take(numOfResults).ToList(); 
```

请注意，由于其动态特性，此方法也很可能会暴露一定程度的 sql 注入安全漏洞。

# node.js - 如何让弹性搜索与 MongoDb 和 node.js 一起玩？

> ID：14811265
> 
> 赞同：12
> 
> 时间：2013-02-11T11:51:49.790
> 
> 标签：node.js, mongodb, elasticsearch

我对 mongodb 和 node.js 都很陌生，但最近一切都很好，直到我需要向我的网站添加全文搜索。根据我的研究，我发现 Elasticsearch 非常适合，但我不知道如何让它与 node.js 和 mongodb 一起工作。我目前正在使用 Heroku 和 MongoLab 来托管我的应用程序。这是我的问题。

1.  如何托管 Elasticsearch？

2.  如何使我的所有 mongo 数据可用于 elasticsearch 我是使用河流还是手动插入和删除所有数据？

    我在这[条河上](https://github.com/richardwilly98/elasticsearch-river-mongodb)找到了一些东西，但我不太确定如何自动实现这一点以及在哪里托管它。

3.  如何从 node.js 查询 Elasticsearch？是否有允许这样做的软件包？

编辑：

问题2确实是我正在努力解决的问题。我还包括了问题 1 和 3，以帮助刚接触该主题并来自谷歌的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T12:05:03.897

1）在您自己的服务器/VM/whatever.. 或使用托管服务，例如[https://searchbox.io/](https://searchbox.io/)

2）您可以创建一个脚本来索引现有数据，然后在创建新数据后对其进行索引，或者使用河流来索引您当前的数据库。

3) ElasticSearch 是一个简单的 HTTP API，您可以使用“http”模块发出自己的请求，也可以使用[https://github.com/mikeal/request之类的东西来简化它](https://github.com/mikeal/request)

您还可以使用第 3 方库，例如[https://github.com/phillro/node-elasticsearch-client](https://github.com/phillro/node-elasticsearch-client)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T11:47:27.850

Searchly.com（又名 SearchBox.io）引入了一个新的爬虫功能，包括 MongoDB 爬虫。它从给定的集合中获取数据并定期同步到 ElasticSearch。检查[http://www.searchly.com/documentation/crawler-beta/](http://www.searchly.com/documentation/crawler-beta/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T14:27:03.610

1.  您可以在自己的服务器上托管或使用 aws elasticsearch 服务或使用 elasticsearch 提供的弹性云。
2.  尝试以下三种解决方案中的任何一种：- i) 尝试使用 mongoosastic。NPM 包 ii) 使用 mongo-connector。iii) 用于将数据索引到 elasticsearch 的 python 脚本
3.  弹性搜索-js。JavaScript 客户端库

# node.js - Marionette 在从 node.js 登录时获取用户

> ID：14811270
> 
> 赞同：0
> 
> 时间：2013-02-11T11:52:20.730
> 
> 标签：node.js, backbone.js, marionette

我有一个棘手的问题，我有一个基于 node.js 后端的 Marionette 应用程序，它使用 express-resource 访问数据库。

我使用中间件来确保登录用户，如果没有，用户将被重定向到由节点直接提供的登录页面。登录后，用户获得了一个会话 cookie，并被转发到 Marionette 应用程序。

应用程序不知道用户。为了获得用户，我将不得不通过 ajax 调用获得它。问题是，我不知道用户 ID，因为会话令牌不包含此信息。

我的解决办法是：api里面有两种资源，一种是获取一般账户，一种是只获取当前用户。这是我想避免的一种资源重复。

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:00:06.337

您可以简单地将用户 ID 添加到会话 cookie..

顺便说一句 - 确保您的后端仅访问经过身份验证的用户的资源（根据会话），并且您不必向 AJAX 调用提供用户 ID。也许您实际上可以避免知道用户ID？

# java - 为什么这个程序不起作用

> ID：14811273
> 
> 赞同：0
> 
> 时间：2013-02-11T11:52:43.297
> 
> 标签：java

我被要求根据某些特定指令编写程序（类）。我觉得我几乎把它记下来了，但我正在做一些愚蠢的事情。我无法弄清楚如何将连字符添加到符号常量中，以便当我键入 INSERT_HYPHEN 时，它会在访问器方法中插入一个“-”。它说不兼容的类型>:( 另外，当我尝试将局部变量“fullDate”插入到“getFullDate”访问器方法中，然后输入“fullDate = year + month + day”时，它表示“不兼容的类型！也许是因为访问方法是一个字符串，我正在尝试在其中添加“整数”。我找不到解决方法。这是我的代码。

```
public class Date
{
public static final int INSERT_ZERO = 0;
public static final char INSET_HYPHEN = -;   //ERROR incompatible types

// instance variables - replace the example below with your own
private int year;
private int month;
private int day;

/**
 * Default constructor
 */
public Date()
{
    setYear (2013);
    setMonth (01);
    setDay (01);
}

/**
 * 
 */
public Date (int whatIsYear, int whatIsMonth, int whatIsDay)
{
    setYear (whatIsYear);
    setMonth (whatIsMonth);
    setDay (whatIsDay);
}

/**
 *@return year
 */
public int getYear()
{
    return year;
}

/**
 *@return month
 */
public int getMonth()
{
    return month;
}

/**
 *@return day
 */
public int getDay()
{
    return day;
}

/**
 *@return 
 */
public String getFullDate()
{
    String fullDate;
    if (whatIsMonth < 10);    // the year, month, and day all give me incompatible types :(
    {
        fullDate = year + INSERT_HYPHEN + INSERT_ZERO + month + INSERT_HYPHEN +  day; 
    }
    if (whatIsDay < 10);
    {
        fullDate = year + INSERT_HYPHEN +  month + INSERT_HYPHEN +  INSERT_ZERO + day;
    }
    else
    {
        fullDate = year + INSERT_HYPHEN + month + INSERT_HYPHEN + day;
    }
    return year + month + day;
}

/**
 * 
 */
public void setYear (int whatIsYear)
{
    if ((whatIsYear >= 1990) && (whatIsYear <= 2013))
    {
        year = whatIsYear;
    }
    else
    {
        year = 2013;
    }
}

/**
 * 
 */
public void setMonth (int whatIsMonth)
{
    if ((whatIsMonth >=  1) && (whatIsMonth <= 12))
    {
        month = whatIsMonth;
    }
    else
    {
        month = 01;
    }
}

/**
 * 
 */
public void setDay (int whatIsDay)
{
    if ((whatIsDay >= 1) && (whatIsDay <= 31))
    {
        day = whatIsDay;
    }
    else
    {
        day = 01;
    }
} 
```

}

只是为了更多的背景。我正在构建的这个类有三个字段，分别保存年、月和日。年份可以介于 1900 年和当前年份之间（含）。月份可以介于 1 和 12 之间。天数可以介于 1 到 31 之间。我必须在代码中使用符号常量而不是“魔术”数字，例如 public static final int FIRST_MONTH = 1;

默认构造函数将 year 设置为当前年份，将 month 设置为第一个月，将 day 设置为第一天。非默认构造函数测试每个参数。如果年份参数超出可接受范围，则将字段设置为当前年份。如果月份参数超出可接受的范围，它会将字段设置为第一个月。如果 day 参数超出可接受的范围，则将字段设置为第一天。

每个字段都有一个访问器方法和一个修改器方法。所有三个 mutator 方法都检查其参数的有效性，如果无效，则以与非默认构造函数相同的方式设置相应的字段。

这是我遇到麻烦的部分。我必须包含一个名为“public String getFullDate()”的方法，它返回一个带有以下格式的日期的字符串：YYYY-MM-DD，例如 2012-01-01。单个数字的月份和日期用前导零填充。 "

任何帮助都将不胜感激，即使只是一个想法:) 谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T11:54:41.870

您应该使用单引号：

```
public static final char INSET_HYPHEN = '-'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:58:22.937

```
 fullDate = String.format("%d-%02d-%02d", year, month, day); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:59:06.727

除了**错误声明字符的语法错误**之外，您还试图访问在构造函数中声明的局部变量`getFullDate() method`

公共日期（int whatIsYear，int whatIsMonth，int whatIsDay）

```
public String getFullDate()
{
    String fullDate;
    if (whatIsMonth < 10);    // the year, month, and day all give me incompatible  
    //rest of the code 
} 
```

**whatIsMonth** , **whatIsDay**是在你的构造函数中定义的局部变量，你不能在构造函数之外使用这些变量。

您的 getFullDate() 方法应该使用您的实例变量`year`和`month`“day”。请注意，这`int whatIsYear, int whatIsMonth, int whatIsDay`只是构造函数参数，并且仅限于您的构造函数。您无法在构造函数之外访问它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:59:12.070

你不能添加一个字符串文字，如果你想使用上面的东西：然后试试这个

```
public static final CHARACTER INSET_HYPHEN = new CHARACTER('-'); 
```

或者

```
public static final char INSET_HYPHEN = '-'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T12:53:41.687

1.  使用`public static final char INSET_HYPHEN = '-';`而不是`public static final char INSET_HYPHEN = -;`- 应始终在撇号之间定义字符。
2.  命名常量“INSERT_HYPHEN”是没有意义的。常量的想法是让以后更容易在代码中找到它的任何位置更改它的值，因此常量的名称应该代表它的值的“滚动”，例如：“SEPARATOR”或“DATE_FORMAT_SEPERATOR”。
3.  无论如何，如果任何值应该是常量，它是年、月和日的默认值。
4.  您的默认构造函数几乎复制了需要年、月和日的构造函数的代码，在这种情况下，通常最好使用 this（默认参数）从默认值中调用第二个。
5.  的逻辑是错误的，无论如何让你为你做脏活`getFullDate()`要好得多。`String.format`此外，`getFullDate()`返回`year + month + day`是一个整数，而不是返回`fullDate`。
6.  您可能会感到困惑，但最好将 setter 和构造函数的参数命名为与目标字段相同的方式，而不是组成一个新名称。为了避免两者之间的歧义，使用 this.[FIELD_NAME] 来引用实例的字段。

此代码应该可以工作：

```
public class Date {
    private static final int DEFAULT_YEAR = 2013;
    private static final int DEFAULT_MONTH = 1;
    private static final int DEFAULT_DAY = 1;
    private static final char SEPARATOR = '-';

    private int year;
    private int month;
    private int day;

    /**
     * Default constructor
     */
    public Date() {
        this(DEFAULT_YEAR, DEFAULT_MONTH, DEFAULT_DAY);
    }

    /**
     * 
     */
    public Date (int year, int month, int day) {
        setYear(year);
        setMonth(month);
        setDay(day);
    }

    /**
     *@return year
     */
    public int getYear() {
        return year;
    }

    /**
     *@return month
     */
    public int getMonth() {
        return month;
    }

    /**
     *@return day
     */
    public int getDay() {
        return day;
    }

    /**
     *@return 
     */
    public String getFullDate() {
        return String.format("%d%c%02d%c%02d", year, SEPARATOR, month, SEPARATOR, day);
    }

    /**
     * 
     */
    public void setYear (int year)
    {
        this.year = ((year >= 1990) && (year <= DEFAULT_YEAR)) ? year : DEFAULT_YEAR;
    }

    /**
     * 
     */
    public void setMonth (int month)
    {
        this.month = ((month >=  1) && (month <= 12)) ? month : DEFAULT_MONTH;
    }

    /**
     * 
     */
     public void setDay (int day)
     {
         this.day = ((day >=  1) && (day <= 31)) ? day : DEFAULT_DAY;
     }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T11:58:38.950

`char`type 只保存用单引号括起来的数据。如果你想使用双引号，那么你的数据类型应该是`string`

# android - 单击编辑时编辑列表项并保存在Android的上下文菜单中

> ID：14811274
> 
> 赞同：0
> 
> 时间：2013-02-11T11:52:56.953
> 
> 标签：android, listview, android-edittext, contextmenu

我正在使用安卓 v4。我创建了一个显示联系人的列表视图

```
 public class MainActivity extends Activity {

  public ListView mainListView ;
  public ArrayAdapter<String> listAdapter ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Find the ListView resource. 
    mainListView = (ListView) findViewById( R.id.mainListView );
    String[] contacts = new String[] { "Adam", "James", "Alex", "Tom",
                                      "Horton", "Jim","Einstein","Thomson","Dick","Mascow"};  
    ArrayList<String> contactsList = new ArrayList<String>();
    contactsList.addAll( Arrays.asList(contacts) );

    listAdapter = new ArrayAdapter<String>(this, R.layout.rowview, contactsList);
    listAdapter.add( "Cameroon" );

    // Set the ArrayAdapter as the ListView's adapter.
    mainListView.setAdapter( listAdapter ); 
    registerForContextMenu(mainListView);  
} 
```

在长按列表项时显示 ContextMenu。而Context_menu.xml如下，

```
 <?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item 
   android:id="@+id/Edit"
   android:title="@string/Edit">
 </item> 

 <item
   android:id="@+id/Delete"
   android:title="@string/Delete">     
 </item> 

</menu> 
```

当单击上下文菜单中的“删除”时，我正在获取 ListItem 值，从 List 中删除 ListItem。我的上下文菜单代码如下，

```
 public boolean onContextItemSelected(MenuItem item){
    AdapterContextMenuInfo info=(AdapterContextMenuInfo)item.getMenuInfo();
    switch(item.getItemId())
    {
    case R.id.Edit: 
        // Edit List Item and Save
        return true;
    case R.id.Delete:
        listAdapter.remove(listAdapter.getItem(info.position));
        Toast.makeText(this, "Deleted", Toast.LENGTH_SHORT).show();
    }

    return true;        
} 
```

现在，我的疑问是如何在单击“编辑”按钮并保存已编辑的联系人时编辑特定的列表项。

我是 Android 新手，对处理事件一无所知。请任何人帮助！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:18:19.743

你可以这样做

```
View view = yourListView.getChildAt(index - 
   yourListView.getFirstVisiblePosition());
TextView someText = ((TextView) view findViewById(R.id.textview01));
someText.setText("updated"); 
```

# ios - 从情节提要中打开 XIB

> ID：14811275
> 
> 赞同：0
> 
> 时间：2013-02-11T11:53:14.027
> 
> 标签：ios, xcode, cocoa, storyboard, xib

在遇到其他一些问题后，我在我的应用程序中实现了一个故事板来解决它们。
但是，当您单击情节提要视图上的按钮时，我现在需要一些帮助来打开不属于情节提要的现有 Xib

有人可以给我一些代码示例，您可以在按钮上使用它们来打开 xib。

我曾尝试使用 IBAction，但这似乎不起作用。

一个更好的主意是将 XIB 放在情节提要中，但我不知道你是否可以这样做

谢谢 ：）

编辑 ：-

```
- (IBAction)changeratings:(id)sender
{
RSSTableViewController *rss2 = [[RSSTableViewController alloc]initWithNibName:@"RSSTableViewController" bundle:nil];
[self presentViewController:rss2 animated:YES completion:nil];
} 
```

# c# - 如何为 ASP.NET 中的所有页面动态设置事件

> ID：14811278
> 
> 赞同：-2
> 
> 时间：2013-02-11T11:53:20.263
> 
> 标签：c#, asp.net, vb.net

我正在尝试为所有 ASP.NET 页面触发一个事件。我不想在所有页面中复制它。那么有没有办法对所有页面都这样做？它可能在 web.config 中可用？

我的目标是在发送给客户之前翻译所有页面。所以请记住，我不能在渲染之前使用事件，因为控件文本是未知的。我们也不能在 Unload 之后使用事件，因为在此之后我们无权写入流。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:01:53.057

为什么要在渲染控件后触发控件的硬编码翻译？我认为您应该检查[在 ASP.NET 中使用资源进行本地化](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.90%29.aspx)。如果您更喜欢允许更改翻译，请考虑使用[此问题](https://stackoverflow.com/questions/14686239/is-there-any-net-standard-for-dealing-with-localization-yet-allowing-the-users)中建议的解决方案。

**编辑：**

如果您确实需要为每个页面触发方法，请尝试绑定到 MasterPage 处理的事件之一。这是内容页和母版页触发的事件[的有序列表。](http://msdn.microsoft.com/en-us/library/dct97kc3%28v=vs.100%29.aspx)

如果您无法使用 Master 页面实现您想要做的事情，您可以尝试创建继承自的新页面，`System.Web.UI.Page`定义该页面中的行为，然后让所有其他页面继承自该页面而不是`System.Web.UI.Page`直接继承自.

# visual-studio-lightswitch - 支持屏幕Lightswitch

> ID：14811281
> 
> 赞同：0
> 
> 时间：2013-02-11T11:53:46.110
> 
> 标签：visual-studio-lightswitch

我想知道如何将支持屏幕添加到我的 Lightswitch 应用程序中？像这样的东西：[Excel帮助和操作方法](http://img145.imageshack.us/img145/6076/supportq.png)

当然，我希望它是可编辑的，这样我就可以一直向我的客户提供帮助屏幕，并用新信息更新它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:31:49.847

看看[Andy Kung 关于创建类似屏幕的教程。](http://blogs.msdn.com/b/lightswitch/archive/2012/08/27/course-manager-vs-2012-sample-part-6-home-screen-andy-kung.aspx)

生成的屏幕将如下所示：

![在此处输入图像描述](../Images/588ec88c9acb2454b9513edc2c592899.png)

# haskell - 为 N 乘 N 元素矩阵和 N 元素列向量的乘法声明类型类

> ID：14811282
> 
> 赞同：2
> 
> 时间：2013-02-11T11:53:48.230
> 
> 标签：haskell, typeclass, functional-dependencies

在 Haskell 中，如果您有一个“族”类型（例如，N 乘 N 元素矩阵，对于 N 的某些值），以及一个并行的“相关”类型族（例如，N 元素向量，对于N 的相同值），以及需要每个族中的一种特定类型的操作（例如，将 N 乘 N 元素矩阵和 N 元素列向量相乘），是否可以为该类型声明类型类手术？

对于这个具体的例子，我想它看起来像这样：

```
class MatrixNxN m where

  --| Multiplication of two N-by-N-element matrices
  mmul :: Num a => m a -> m a -> m a

  --| Multiplication of an N-by-N-element matrix and an N-element column vector
  vmul :: Num a => m a -> v a -> v a 
```

但是，我不知道如何限制 type `v`。有可能做这样的事情吗？

请注意，我欢迎对声明多个相关类型的类型类的一般问题的回答，以及对为矩阵向量乘法声明类型类的具体问题的回答。在我的具体情况下，只有一小部分已知的 N 值（2、3 和 4），但我通常有兴趣了解在 Haskell 的类型系统中可以编码的内容。

**编辑：**我使用[`MultiParamTypeClasses`](http://www.haskell.org/haskellwiki/Multi-parameter_type_class)并[`FunctionalDependencies`](http://www.haskell.org/haskellwiki/Functional_dependencies)按照下面的 Gabriel Gonzalez 和 MFlamer 的建议实现了这一点。这就是我实现的相关部分最终的样子：

```
class MatrixVectorMultiplication m v | m -> v, v -> m where
  vmul :: Num a => m a -> v a -> v a

data Matrix3x3 a = ...
data Vector3 a = ...

instance MatrixVectorMultiplication Matrix3x3 Vector3 where
  vmul = ... 
```

这是 的类型签名`vmul`，其本身和部分应用：

```
vmul :: (Num a, MatrixVectorMultiplication m v) => m a -> v a -> v a
(`vmul` v) :: Matrix3x3 Integer -> Vector3 Integer
(m `vmul`) :: Vector3 Integer -> Vector3 Integer 
```

我觉得这一切都非常优雅。感谢您的回答！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T08:41:08.980

请注意，矩阵/向量维度可以使用类型级数字进行编码，这允许更通用的定义`class MatrixNum (n :: Nat)`而不是手动编码等`Matrix3x3`，`Matrix4x4`同时还可以防止在编译类型乘法时再次出现不兼容的对象。在 GHC 7.4.* 中，它可以通过以下方式定义。

```
{-# LANGUAGE TypeFamilies, DataKinds, FlexibleInstances #-}

data Nat = Zero | Succ Nat

class MatrixNum (n :: Nat) where
    type Matrix n :: * -> *
    type Vector n :: * -> *
    mmul :: Num a => Matrix n a -> Matrix n a -> Matrix n a
    vmul :: Num a => Matrix n a -> Vector n a -> Vector n a

newtype ListMatrix (n :: Nat) a = ListMatrix [[a]] deriving Show
newtype ListVector (n :: Nat) a = ListVector [a] deriving Show

instance MatrixNum n where
    type Matrix n = ListMatrix n
    type Vector n = ListVector n
    mmul (ListMatrix xss) (ListMatrix yss) = ListMatrix $ error "Not implemented"
    vmul (ListMatrix xss) (ListVector ys) = ListVector $ error "Not implemented" 
```

在 GHC 7.6.* 中甚至更好，它现在支持[类型级提升文字](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/promotion.html#promoted-literals)，因此您可以删除上述`Nat`定义并在类型中使用`Nat`和`GHC.TypeLits`使用数字文字来指定对象的维度：

```
m1 :: ListMatrix 3 Int
m1 = ListMatrix [[1,2,3],[4,5,6],[7,8,9]]

v1 :: ListVector 3 Int
v1 = ListVector [1,2,3]

v2 = m1 `vmul` v1 -- has type ListVector 3 Int 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:17:22.450

这是对答案的一个非常小的变化`MFlamer`，这也使得`m`依赖于`v`：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}

class MatrixNxN m v | m -> v, v -> m where
    mmul :: Num a => m a -> m a -> m a
    vmul :: Num a => m a -> v a -> v a 
```

这样，如果你这样做：

```
(`vmul` someVector) 
```

...然后编译器可以仅根据`someVector`' 类型选择正确的实例。

类型族解决方案不会因为同样的原因而起作用，主要是因为如果你将类型构造函数声明为`v`类型构造函数的`m`类型函数，那么该类型函数不一定是一对一的，所以编译器不会是能够从`m`推断`v`。这就是为什么人们说函数依赖比类型族更强大的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T21:56:46.390

这就是我使用 MultiParamTypeClasses 完成此操作的方式，正如上面的回复中所建议的那样。您还需要使用 FunctionalDependencies 扩展，因为这两种类型都没有在每个类函数中使用。其他人可能会提供更完整的答案，但我最近一直在使用这种模式，所以我认为它可能会有所帮助。

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}

module Test where

class MatrixNxN m v | m -> v where 
  mmul :: Num a => m a -> m a -> m a
  vmul :: Num a => m a -> v a -> v a 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T08:07:24.927

我想也可以使用类型类来实现它。为了避免循环函数依赖，我们声明向量和矩阵的类型取决于标量类型。虽然它需要`newtype`对标量以及它们对应的向量和矩阵都有一个，但它也有一些优点。特别是，我们不需要在and`Num a`的声明中保留约束。我们可以让实例实现对它们的标量值施加什么约束。`mmul``vmul`

```
{-# LANGUAGE TypeFamilies #-}

class MatrixNxN a where
    data Matrix a :: *
    data Vector a :: *

    -- | Multiplication of two N-by-N-element matrices
    mmul :: Matrix a -> Matrix a -> Matrix a

    -- | Multiplication of an N-by-N-element matrix
    -- and an N-element column vector
    vmul :: Matrix a -> Vector a -> Vector a

-- List matrices on any kind of numbers:
newtype ListScalar a = ListScalar a
instance Num a => MatrixNxN (ListScalar a) where
    newtype Matrix (ListScalar a) = ListMatrix [[a]]
    newtype Vector (ListScalar a) = ListVector [a]

    vmul (ListMatrix mss)  (ListVector vs)   = ...
    mmul (ListMatrix m1ss) (ListMatrix m2ss) = ...

-- We can have matrices that have no `Num` instance for
-- their scalars, like Z2 implemented as `Bool`:
newtype ListBool = ListBool Bool
instance MatrixNxN ListBool where
    newtype Matrix ListBool = ListBoolMatrix [[Bool]]
    newtype Vector ListBool = ListBoolVector [Bool]

    vmul (ListBoolMatrix mss)  (ListBoolVector vs)   = ...
    mmul (ListBoolMatrix m1ss) (ListBoolMatrix m2ss) = ... 
```

# javascript - 删除无法删除 JSON 对象

> ID：14811287
> 
> 赞同：0
> 
> 时间：2013-02-11T11:54:41.070
> 
> 标签：javascript, jquery, dom

我确实将 html 表的内容存储在数据库中，我使用 jQuery 从中提取数据，并通过从这些表中创建 JSON 对象将其放置在另一个表中。

我得到存储的表并将其附加到 DOM，如下所示：

```
$('#divfortable).append(storedtable); 
```

下一步是创建我的对象：

```
var tableObject = $('# divfortable tbody tr').map(function(i) { 
    var row = {}; 
    $(this).find('td').each(function(i) { 
        var rowName = columns[i]; 
        row[rowName] = $(this).text().trim(); 
    }); 
    return row; 
}).get(); 
```

我有一个具有相关列名的现有数组。

下一步是将这些详细信息上传到服务器：

```
data = { id: id, tableObject: tableObject };  
$.ajax({                    
dataType: 'json', 
url:'my_url', 
data: $.param(data),
    error: function(jqXHR, textStatus, errorThrown) { },    
    success: function(data) { }
}); 
```

它工作正常，我对结果非常满意，但我的问题是在另一张桌子上重复这个过程时。我想获得一个新表并以类似的方式提取其内容，但我无法摆脱以前的结果。结果包含新加载的表加上前一个表，如果我再重复一次，它包含所有 3 个表的结果！

很明显，我必须清空之前提取的所有对象和 DOM 元素，但我尝试了不同的方法，但无济于事。我通过搜索互联网和这个论坛收集到，您可以使用 delete 或 empty 来销毁 tableObject 以便您可以创建一个全新的，但它不起作用。

我尝试了以下方法：

```
delete tableObject; 
```

和

```
$('#divfortable).remove(storedtable); 
```

在成功函数中，一起和分开

我也用过

```
$('#divfortable).remove(storedtable); 
```

在我创建了我的数据对象之后

```
data = { id: id, tableObject: tableObject }; 
```

但在这种情况下，脚本不会进行 ajax 调用，而是通过显示`$('#divfortable)`它来显示两个表！

我怎样才能摆脱以前的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:58:34.723

您应该能够`#divfortable`在第二次操作之前简单地清除电流：

```
$('#divfortable').empty(); 
```

# css - 具有多个级别的响应式 CSS 菜单

> ID：14811290
> 
> 赞同：0
> 
> 时间：2013-02-11T11:54:59.367
> 
> 标签：css, drop-down-menu, responsive-design

在响应式 css 菜单上获得多个级别时遇到问题，这是我[在 tuts.com 上遵循本教程的菜单基础](http://webdesign.tutsplus.com/tutorials/site-elements/big-menus-small-screens-responsive-multi-level-navigation/)

我的网站在此菜单上需要 2 个以上的子级别，但是当我将额外的添加到 html 时，额外的级别无法正常工作，我确信可以在原始菜单中添加额外的级别，但我无法弄清楚我需要什么额外的 css，我曾尝试为 li li li li 添加额外的 css 代码，但这对我不起作用。

额外的级别与第 2 个子级别一起显示，它只应显示为第 2 个子菜单的悬停。

我在这里创建了一个 jsfiddle（我的第一个）：http: [//jsfiddle.net/DizzyHigh/Bpubu/4/](http://jsfiddle.net/DizzyHigh/Bpubu/4/)

html:

```
<div id="left_container"></div>
<div class="container">
<a class="toggleMenu" href="#">Menu</a>

    <ul class="nav">
        <li class="test">   <a href="#">HOME</a>

        </li>
        <li>    <a href="#">LOCATIONS</a>

            <ul class="nav">
                <li>    <a href="#">Boroughs</a>

                    <ul class="nav">
                        <li>    <a href="#">Enfield</a>

                            <ul>
                                <li><a href="#">E-Locations</a>
                                </li>
                                <li><a href="#">E-Unit Bases</a>
                                </li>
                                <li><a href="#">E-Parking</a>
                                </li>
                            </ul>
                        </li>
                        <li> <a href="#">Barnet</a>

                            <ul>
                                <li><a href="#">B-Locations</a>
                                </li>
                                <li><a href="#">B-Unit Bases</a>
                                </li>
                                <li><a href="#">B-Parking</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>    <a href="#">Maps</a>

                    <ul class="nav">
                        <li>    <a href="#">Enfield map</a>

                            <ul>
                                <li><a href="#">ME-Locations</a>
                                </li>
                                <li><a href="#">ME-Unit Bases</a>
                                </li>
                                <li><a href="#">ME-Parking</a>
                                </li>
                            </ul>
                        </li>
                        <li>    <a href="#">Barnet Map</a>

                            <ul>
                                <li><a href="#">MB-Locations</a>
                                </li>
                                <li><a href="#">MB-Unit Bases</a>
                                </li>
                                <li><a href="#">MB-Parking</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>    <a href="#">CONTACT</a>

        </li>
        <li>    <a href="#">LINKS</a>

        </li>
    </ul>
</div>
<div id="right_container">&nbsp;</div> 
```

CSS：

```
body, nav, ul, li, a  {margin: 0; padding: 0;}
body {font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
a {text-decoration: none;}
.container {
    width: 90%;
    max-width: 900px;
    margin: 10px auto;
}
.toggleMenu {
    display:  none;
    background: #666;
    padding: 10px 15px;
    color: #fff;
}
.nav {
    list-style: none;
     *zoom: 1;
     background:#175e4c;
}
.nav:before,
.nav:after {
    content: " "; 
    display: table; 
}
.nav:after {
    clear: both;
}
.nav ul {
    list-style: none;
    width: 9em;
}
.nav a {
    padding: 10px 15px;
    color:#fff;
}
.nav li {
    position: relative;
}
.nav > li {
    float: left;
    border-top: 1px solid #104336;
}
.nav > li > .parent {
    background-image: url("images/downArrow.png");
    background-repeat: no-repeat;
    background-position: right;
}
.nav > li > a {
    display: block;
}
.nav li  ul {
    position: absolute;
    left: -9999px;
}
.nav > li.hover > ul {
    left: 0;
}
.nav li li.hover ul {
    left: 100%;
    top: 0;
}
.nav li li a {
    display: block;
    background: #1d7a62;
    position: relative;
    z-index:100;
    border-top: 1px solid #175e4c;
}
.nav li li li a {
    background:#249578;
    z-index:200;
    border-top: 1px solid #1d7a62;
}

@media screen and (max-width: 768px) {
    .active {
        display: block;
    }
    .nav > li {
        float: none;
    }
    .nav > li > .parent {
        background-position: 95% 50%;
    }
    .nav li li .parent {
        background-image: url("images/downArrow.png");
        background-repeat: no-repeat;
        background-position: 95% 50%;
    }
    .nav ul {
        display: block;
        width: 100%;
    }
   .nav > li.hover > ul , .nav li li.hover ul {
        position: static;
    }

} 
```

JS：

```
 $(document).ready(function() {
    var ww = document.body.clientWidth;

        $(".nav li a").each(function() {
            if ($(this).next().length > 0) {
                $(this).addClass("parent");
            };
        })

        $(".toggleMenu").click(function(e) {
            e.preventDefault();
            $(this).toggleClass("active");
            $(".nav").toggle();
        });

    adjustMenu();
    var adjustMenu = function() {
        if (ww < 768) {
            $(".toggleMenu").css("display", "inline-block");
            if (!$(".toggleMenu").hasClass("active")) {
                $(".nav").hide();
            } else {
                $(".nav").show();
            }
            $(".nav li").unbind('mouseenter mouseleave');
            $(".nav li a.parent").unbind('click').bind('click', function(e) {
                // must be attached to anchor element to prevent bubbling
                e.preventDefault();
                $(this).parent("li").toggleClass("hover");
            });
        } 
        else if (ww >= 768) {
            $(".toggleMenu").css("display", "none");
            $(".nav").show();
            $(".nav li").removeClass("hover");
            $(".nav li a").unbind('click');
            $(".nav li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
                // must be attached to li so that mouseleave is not triggered when hover over submenu
                $(this).toggleClass('hover');
            });
        }
    }
$(window).bind('resize orientationchange', function() {
        ww = document.body.clientWidth;
        adjustMenu();
    });
}) 
```

任何css大师都可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:46:16.863

布林尝试以下代码：

我对普通菜单上的 css 悬停事件使用“NormalMenu”类

**Java 脚本**

```
var adjustMenu = function() {
 if (ww < 768) {                
    $(".toggleMenu").css("display", "inline-block");
    if (!$(".toggleMenu").hasClass("active")) {
        $(".nav").hide();
    } else {
        $(".nav").show();
    }
    $('.nav').removeClass('NormalMenu').find('ul').hide();              
    $(".nav li a").unbind('click').bind('click', function(e) {
            // must be attached to anchor element to prevent bubbling
        e.preventDefault();
        var _sub = $(this).siblings('ul')
        if($(_sub).is(':visible')){
            $(_sub).hide(); 
            $(_sub).find('ul').hide();
        }else{
            $(_sub).show(); 
        }
    });
 } 
 else if (ww >= 768) {        
    $(".toggleMenu").css("display", "none");        
    $(".nav li a").unbind('click');
            $(".nav").show().addClass('NormalMenu').find('ul').removeAttr('style');     
 }
} 
```

**CSS**

```
body, nav, ul, li, a  {margin: 0; padding: 0;}
body {font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; }
a {text-decoration: none;}
    .container {
    width: 90%;
    max-width: 900px;
    margin: 10px auto;
}
.toggleMenu {
    display:  none;
    background: #666;
    padding: 10px 15px;
    color: #fff;
}
.nav {
    list-style: none;
     *zoom: 1;
     background:#175e4c;
}
.nav:before,
.nav:after {
    content: " "; 
    display: table; 
}
.nav:after {
    clear: both;
}
.nav ul {
    list-style: none;
    width: 9em;
}
.nav a {
    padding: 10px 15px;
    color:#fff;
}
.nav li {
    position: relative;
}
.nav > li {
    float: left;
    border-top: 1px solid #104336;
}
.nav > li > .parent {
   /* background-image: url("images/downArrow.png");*/
    background-repeat: no-repeat;
    background-position: right;
}
 ul.NormalMenu ul{       
    width: 100%;
    display:none;
    position: absolute;
 }
ul.NormalMenu li{        
    line-height:40px;
}

ul.NormalMenu  li:hover > ul{       
    width: 100%;
    display:block;
    left:0; 
}
ul.nav ul li{
    background: #1d7a62;        
 }
ul.NormalMenu  li li:hover> ul{       
    width: 100%;
    display:block;
    top:0;
    left:100%;        
    }
ul.nav ul li li{
    background: #1d7a00;
 }

@media screen and (max-width: 768px) {
.active {
    display: block;
}
.nav > li {
    float: none;
}
.nav > li > .parent {
    background-position: 95% 50%;
}
.nav li li .parent {
    /*background-image: url("images/downArrow.png");*/
    background-repeat: no-repeat;
    background-position: 95% 50%;
}

 ul.nav ul{
    margin-left:5%;   
     width: 95%;
   } 
ul.nav li{
    line-height:30px;

} 
```

}

见演示：http: [//jsfiddle.net/ducwidget/Bpubu/21/](http://jsfiddle.net/ducwidget/Bpubu/21/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-22T13:01:00.357

你可以看看这个......我用普通的 html5 和 css [https://github.com/Saransh27/Dashboard](https://github.com/Saransh27/Dashboard)制作了这个菜单。您可以随时将其扩展到您的需要，如果您有任何问题，请告诉我。

# python - 无法在 Django 中访问数据库 API

> ID：14811291
> 
> 赞同：-3
> 
> 时间：2013-02-11T11:55:01.493
> 
> 标签：python, django

我正在编写关于 Django 的以下教程（[https://docs.djangoproject.com/en/1.4/intro/tutorial01/](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)）。

当我使用命令 python manage.py shell 调用交互式 shell 来访问数据库 API 时，我在 [1] 中收到以下提示：

请有人告诉我这意味着什么以及如何访问数据库 API。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:17:40.050

那是正常的 shell 提示，我不认为这是一个错误，也许你想检查 manage.py 提供的命令，因为我认为你想做其他事情。

# iphone - iPhone上的时钟精度

> ID：14811292
> 
> 赞同：1
> 
> 时间：2013-02-11T11:55:02.110
> 
> 标签：iphone, time

在处理 Android 设备时，我观察到很多不准确的——有时甚至是完全错误的——系统时间。

我无法使用很多 iPhone，但我见过的那些都有准确的时间。

iPhone 上的 GMT 时间总是准确的吗？（例如，推测您可以使用网络时间或内置 ntp 或使用 GPS 修复中的时间来调整漂移；所有这些都可能发生在平台中，因此应用程序不会尝试自行确定时间）

如果 iPhone 时间函数不能代表合理的真实世界时间，你将如何确定真实世界时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:11:23.703

许多手机都能够从网络提供商那里获得当地时间——尽管我已经看到这里和那里有几秒钟的时间。

如果您确实需要准确 - 您可以从[NTP 服务器](http://support.ntp.org/bin/view/Main/WebHome)获取您的时间，并使用手机的区域设置更正当地时间。

# php - PHP在Android浏览器上强制下载不成功-通过Joomla框架

> ID：14811293
> 
> 赞同：2
> 
> 时间：2013-02-11T11:55:01.813
> 
> 标签：php, android, joomla, download

我有一个下载脚本如下，在 Joomla 框架中运行：

```
if(headers_sent()) die('Headers Sent');

if (function_exists('finfo_file')) {
    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    $type = finfo_file($finfo, $dir.$filename);
    finfo_close($finfo);
} else {
    $type = mime_content_type($dir.$filename);
}
// required for IE
if(ini_get('zlib.output_compression')) { ini_set('zlib.output_compression', 'Off');  }

jimport( 'joomla.filesystem.file' );
$ext = strtoupper(JFile::getExt($filename));
$no_ext = JFile::stripExt($filename);

header('Content-Transfer-Encoding: Binary'); //need this to recognise in firefox that it is a PDF and not html doc
header('Content-length: '.filesize($dir.$filename));
header('Content-Type: application/octet-stream'); //works on browsers, but still fails on android (rather than unsuccessful) with 'redirect error'
header('Content-Disposition: attachment; filename="' . $no_ext.'.'.$ext.'"'); 
readfile($dir.$filename);
exit; //need to exit otherwise ff thinks this is a html document. 
```

该脚本在所有桌面浏览器和 Apple 产品上都可以正常工作，但在 Android 上几乎立即尝试失败。给出的错误是带有“.bin”文件的“重定向错误”，但使用稍微不同的代码我得到“无效的 URL”。

但是，如果我将它从我的资产存储库模型复制到 .php 页面（导入 Joomla 框架），并通过 Android 访问它，它会完美运行。通过模型下载时的 URL 是 www.domain.com/resources/download/40-alias-of-file 和静态 PHP 页面：www.domain.com/download.php?id=40

通过模型下载时，Android 上显示的文件名显示为 40-alias-of-file，但 Android 浏览器会接收 PHP 页面上给出的实际文件名。它是完全相同的代码，唯一的区别是 URL 和通过控制器/模型的路由。我尝试将 .pdf 附加到 URL 但没有运气：www.domain.com/resources/download/40-alias-of-file.pdf - 它为文件提供了一个 PDF 图标，但仍然不成功。

有人有想法么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:28:41.697

该文件以前/最近是否被修改过？您是否尝试过使用 fpassthru()？

```
if(headers_sent()) die('Headers Sent');

if (function_exists('finfo_file')) {
    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    $type = finfo_file($finfo, $dir.$filename);
    finfo_close($finfo);
} else {
    $type = mime_content_type($dir.$filename);
}
// required for IE
if(ini_get('zlib.output_compression')) { ini_set('zlib.output_compression', 'Off');  }

jimport( 'joomla.filesystem.file' );
$ext = strtoupper(JFile::getExt($filename));
$no_ext = JFile::stripExt($filename);
$fd = fopen($dir.$filename, "rb");

header('Pragma:  '); //I am surprised it worked with IE without this
header('Content-Transfer-Encoding: Binary'); //Try also without this header
header('Content-Length: '.filesize($dir.$filename));
header('Content-Type: '.$type); 
header('Content-Disposition: attachment; filename="' . $no_ext.'.'.$ext.'"'); 

if ($fd) {     
   fpassthru($fd);         
   fclose($fd);              
   exit();         
} 
```

# c++ - 为什么易失性静态成员初始化会产生重定义编译错误？

> ID：14811295
> 
> 赞同：0
> 
> 时间：2013-02-11T11:55:12.360
> 
> 标签：c++, static, initialization, volatile, redefinition

我的问题如下：

我有一堂带静态计数器的课。我将此计数器设置为 volatile，因为我在多线程环境中使用此变量。

类.h

```
class myClass
{
 public:
 volatile static int mCounter;
 (...)
}; 
```

类.cpp

```
int myclass::mCounter = 0; 
```

在 CPP 文件中，我初始化它，我得到以下编译错误：

```
'mCounter' : redefinition; different type modifiers 
```

为什么 ？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T11:56:03.203

您还需要在该行上重复“易失性”。

# geolocation - 无法在 liferay 端口上获取远程 IP 和位置

> ID：14811296
> 
> 赞同：5
> 
> 时间：2013-02-11T11:55:29.560
> 
> 标签：geolocation, ip, liferay, portlet

我正在使用 ubuntu 12.04，liferay 版本 6.0.1，在我的系统上打开 jdk 6。我试图在java中获取远程IP和位置。为此，我找到了[Host Ip](http://www.hostip.info/use.html)服务，通过该服务我们可以使用 apache http get 方法获取位置。我已在本地系统上成功执行此操作。但是在实际服务器上，liferay portlet 没有运行，并且由于多个实例同时运行，因此很难找到错误。服务器是基于窗口的。我在 MVC Portlet 的 doView() 中使用此方法来获取 ip

```
com.liferay.portal.util.PortalUtil.getHttpServletRequest(renderRequest).getRemoteAddr() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:43:02.337

当我不想访问 http 标头信息时，我使用：

```
HttpServletRequest httpServletRequest = PortalUtil.getHttpServletRequest(portletRequest);
HttpServletRequest originalServletRequest = PortalUtil.getOriginalServletRequest(httpServletRequest);
originalServletRequest.getRemoteAddr(); 
```

通常您在*httpServletRequest*中找不到真正的标头信息，但它们在*originalServletRequest中可用*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T20:00:18.847

这是部分答案。我不知道答案的位置部分。希望这可以帮助

[查看Liferay Marketplace 上](http://www.liferay.com/marketplace/-/mp/application/23652330)的MyIP Portlet - 它确实有一个实用功能，该功能仅从 RenderRequest 或 PortletRequest 对象获取 IP 地址的一部分。

您可能有兴趣查看相同的[github 源](https://github.com/fromdev/my-ip-portlet)：[IPAddressUtil.java](https://github.com/fromdev/my-ip-portlet/blob/master/src/main/java/com/fromdev/portlets/util/IPAddressUtil.java)

# sql-server - 插入前检查重复项时需要事务吗？

> ID：14811299
> 
> 赞同：0
> 
> 时间：2013-02-11T11:55:35.957
> 
> 标签：sql-server, stored-procedures, transactions

之前我创建了这个存储过程：

```
 Create Procedure CreateEmployee
            (
            @Role_ID Int,
            @FirstName Varchar(50),
            @LastName Varchar(50),
            @DateOfBirth Varchar(50),
            @Active Bit
            )
            As
            Begin

            If Not Exists (Select FirstName, LastName, DateOfBirth 
                From Employee Where FirstName = @FirstName
                AND LastName = @LastName
                AND DateOfBirth = @DateOfBirth)

                Begin
                Insert Into Employee (Role_ID, FirstName, LastName, DateOfBirth, Active)
                Values (@Role_ID, @FirstName, @LastName, @DateOfBirth, @Active)
                End

            Else
                Begin
                Select 'User already exists!'
                End

            End 
```

此过程将在执行插入之前检查员工表中是否已存在员工。

它似乎足够防弹，因为它是在发生任何类型的表更改之前完成的单一条件检查。然而，在对交易进行了一些阅读之后，我想知道我是否应该让我的所有程序交易以提供额外的保护。

tl博士；有没有不应该使用交易的时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:02:10.127

> 我想知道我是否应该只进行所有程序事务以提供额外的保护。

绝对不！如果这样做，您的数据库将更容易[死锁](http://en.wikipedia.org/wiki/Deadlock)，并带来相关的性能问题。

> 有没有不应该使用交易的时候？

单独查看每个过程，仅在绝对必要的情况下添加事务，确保事务块尽可能小。此外，确保每个事务中的表访问顺序相同。这些技巧将有助于解决死锁和性能问题。

在有问题的情况下，如果您担心有重复的客户，请添加一个唯一约束 - 您不需要在这里进行交易。

顺便说一句，FirstName、LastName 和 DateOfBirth 不适合确定真实客户数据库中的唯一性。例如，很可能有两个 John Smith 的出生日期相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:14:49.173

与多线程程序一样，数据库允许同时访问以读取和修改数据。

在这种情况下，您；

1.  *检查*特定行是否不存在
2.  *插入*行

尽管每个语句都是原子的，但任何其他语句/事务都可以在 1 和 2 之间发生，包括同一行的另一个插入。

因此，为防止这种情况，您必须围绕这两个语句使用事务以使其成为一个原子操作。

如果含义是逻辑损坏，则执行检查/修改序列的任何地方都需要事务包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:01:23.523

首先，`UNIQUE`向您的表添加一个约束（如果您还没有）。然后你就可以`TRY`了`INSERT`，如果它是重复的，你会得到一个错误，你可以`CATCH`。这通常比预先检查重复项要简单得多，而且您不必担心事务或死锁。

# c++ - 多线程 GEMM 比单线程慢？

> ID：14811301
> 
> 赞同：4
> 
> 时间：2013-02-11T11:55:44.333
> 
> 标签：c++, multithreading

我写了一些 Naiive GEMM 代码，我想知道为什么它比等效的单线程 GEMM 代码慢得多。

使用 200x200 矩阵，单线程：7 毫秒，多线程：108 毫秒，CPU：3930k，线程池中有 12 个线程。

```
 template <unsigned M, unsigned N, unsigned P, typename T>
    static Matrix<M, P, T> multiply( const Matrix<M, N, T> &lhs, const Matrix<N, P, T> &rhs, ThreadPool & pool )
    {
        Matrix<M, P, T> result = {0};

        Task<void> task(pool);
        for (auto i=0u; i<M; ++i)
            for (auto j=0u; j<P; j++)
                task.async([&result, &lhs, &rhs, i, j](){
                    T sum = 0;
                    for (auto k=0u; k < N; ++k)
                        sum += lhs[i * N + k] * rhs[k * P + j];
                    result[i * M + j] = sum;
            });

        task.wait();

        return std::move(result);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:56:02.863

我没有使用 GEMM 的经验，但您的问题似乎与各种多线程场景中出现的问题有关。

使用多线程时，您会引入一些潜在的开销，其中最常见的通常是

1.  开始/结束线程的创建/清理
2.  当（线程数）>（CPU 内核数）时上下文切换
3.  锁定资源，等待获取锁
4.  缓存同步问题

项目 2\. 和 3\. 在您的示例中可能不起作用：您在 12 个（超线程）内核上使用 12 个线程，并且您的算法不涉及锁。

但是，1\. 可能与您的情况相关：您正在创建总共 40000 个线程，每个线程相乘和相加 200 个值。我建议尝试不那么细粒度的线程，也许只在第一个循环后拆分。最好不要将问题分解成比必要的更小的部分。

4.也很可能对您的情况很重要。虽然在将结果写入数组时不会遇到竞争条件（因为每个线程都在写入自己的索引位置），但您很可能会引发大量缓存同步开销。

“为什么？” 您可能会想，因为您正在写入内存中的不同位置。这是因为典型的 CPU 缓存是按缓存线组织的，在当前的 Intel 和 AMD CPU 型号上，缓存线的长度为 64 字节。这是更改某些内容时可用于从缓存传输到缓存的最小大小。现在所有 CPU 内核都在读取和写入相邻的内存字，这会导致在所有内核之间同步 64 字节，只要您只写入 4 个字节（或 8 个，取决于您使用的数据类型的大小）。

如果内存不是问题，您可以简单地用“虚拟”数据“填充”每个输出数组元素，以便每个高速缓存行只有一个输出元素。如果您使用 4 字节数据类型，这意味着每 1 个实际数据元素跳过 15 个数组元素。当您减少线程的细粒度时，缓存问题也会得到改善，因为每个线程实际上都会访问其自己的内存中连续区域，而不会干扰其他线程的内存。

编辑：Herb Sutter（C++ 大师之一）更详细的描述可以在这里找到：[http ://www.drdobbs.com/parallel/maximize-locality-minimize-contention/208200273](http://www.drdobbs.com/parallel/maximize-locality-minimize-contention/208200273)

Edit2：顺便说一句，建议`std::move`在 return 语句中避免，因为这可能会妨碍返回值优化和复制省略规则，而标准现在要求这些规则自动发生。请参阅[在多个返回语句的情况下使用 `std::move` 返回是否合理？](https://stackoverflow.com/questions/9532608/is-returning-with-stdmove-sensible-in-the-case-of-multiple-return-statements)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:17:46.367

多线程意味着始终同步、上下文切换、函数调用。这一切都加起来并消耗 CPU 周期，您可以将其花费在主要任务本身上。

如果您只有第三个嵌套循环，您可以保存所有这些步骤并且可以内联而不是子例程进行计算，您必须在其中设置堆栈，调用，切换到不同的线程，返回结果并切换回主程序线。

仅当这些成本与主要任务相比较小时，多线程才有用。我想，当矩阵大于 200x200 时，您会看到多线程的更好结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:23:37.300

一般来说，多线程非常适用于需要大量时间的任务，最有利的是因为复杂性而不是设备访问。您向我们展示的循环需要很短的执行时间才能有效地并行化。

您必须记住，线程创建有很多开销。同步也有一些（但明显更少）的开销。

# python - 如何使用 python 将 utf-8 字符正确插入 MySQL 表

> ID：14811303
> 
> 赞同：14
> 
> 时间：2013-02-11T11:55:53.953
> 
> 标签：python, mysql, utf-8

我对如何在其中存储带有不寻常字符（对于习惯于处理英国英语字符集的人）的字符串感到非常困惑和困惑。

这是我的例子。

我有这个名字：`Bientôt l'été`

这就是我创建表的方式：

```
CREATE TABLE MyTable(
    'my_id' INT(10) unsigned NOT NULL,
    'my_name' TEXT CHARACTER SET utf8 NOT NULL,
    PRIMARY KEY(`my_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

使用这个简化的 python 脚本，我试图将字符串插入到 MySQL 数据库和表中：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import MySQLdb

mystring = "Bientôt l'été"

myinsert = [ { "name" : mystring.encode("utf-8").strip()[:65535], "id" : 1 } ]

con = None
con = MySQLdb.connect('localhost', 'abc', 'def', 'ghi');
cur = con.cursor()
sql = "INSERT INTO 'MyTable' ( 'my_id', 'my_name' ) VALUES ( %(id)s, %(name)s ) ; "
cur.executemany( sql, myinsert )
con.commit()
if con: con.close() 
```

如果我然后尝试读取数据库中的名称，它将存储为：`BientÃ´t l'Ã©tÃ©`

我希望它阅读：`Bientôt l'été`

如何让 python 脚本/MySQL 数据库执行此操作？我认为这与字符集及其设置方式有关，但我找不到一个简单的网页来解释这一点而无需任何技术术语。我已经为此苦苦挣扎了好几个小时！

我看过这个，我看到`character_set_server`设置为，`latin1`但我不知道这是否是问题或如何改变它：

```
mysql> show variables like 'char%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T14:26:32.083

你试过了吗，这个查询`set names utf8;`

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import MySQLdb

mystring = "Bientôt l'été"

myinsert = [{ "name": mystring.encode("utf-8").strip()[:65535], "id": 1 }]

con = MySQLdb.connect('localhost', 'abc', 'def', 'ghi');
cur = con.cursor()

cur.execute("set names utf8;")     # <--- add this line,

sql = "INSERT INTO 'MyTable' ( 'my_id', 'my_name' ) VALUES ( %(id)s, %(name)s ) ; "
cur.executemany( sql, myinsert )
con.commit()
if con: con.close() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-25T18:12:59.113

设置默认客户端字符集：

```
<?php
$con=mysqli_connect("localhost","my_user","my_password","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

// Change character set to utf8
mysqli_set_charset($con,"utf8");
mysqli_close($con);
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T12:26:20.850

您的问题在于从数据库中读取数据时如何*显示数据。*您正在查看被错误解释为拉丁语 1 的 UTF-8 数据。

```
>>> "Bient\xf4t l'\xe9t\xe9"
"Bientôt l'été"
>>> "Bient\xf4t l'\xe9t\xe9".encode('utf8').decode('latin1')
"BientÃ´t l'Ã©tÃ©" 
```

上面将`unicode`字符串编码为 UTF-8，然后将其误解为拉丁语 1（ISO 8859-1），并且`ô`每个`é`编码为两个 UTF-8 字节的代码点被重新解释为两个 latin-1 代码点每个。

由于您正在运行 Python 2，因此您不需要`.encode()`已经对数据进行编码。如果您插入`unicode`对象会更好；所以你想*解码*：

```
myinsert = [ { "name" : mystring.decode("utf-8").strip()[:65535], "id" : 1 } ] 
```

通过调用`.encode()`编码数据，您要求 Python 首先*解码*数据（使用默认编码），以便它可以为您编码。如果您的 python 上的默认值已更改为`latin1`您将看到相同的效果；UTF-8 数据在被重新编码为 Latin-1 之前被解释为拉丁语 1。

你可能想阅读 Python 和 Unicode：

*   Python [Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)

*   Ned Batchelder 的[实用 Unicode](http://nedbatchelder.com/text/unipain.html)

*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集（没有借口！）的绝对最低要求 作者](http://joelonsoftware.com/articles/Unicode.html)：Joel Spolsky

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-31T17:57:44.297

```
<?php
//Set Beginning of php code:
header("Content-Type: text/html; charset=UTF-8");
mysql_query("SET NAMES 'utf8'"); 
mysql_query('SET CHARACTER SET utf8');

//then create the connection 
$CNN=mysql_connect("localhost","usr_urdu","123") or die('Unable to Connect');
$DB=mysql_select_db('db_urdu',$CNN)or die('Unable to select DB'); 
```

# wpf - 带有分隔路径的 WPF 数据绑定，不更新目标

> ID：14811308
> 
> 赞同：2
> 
> 时间：2013-02-11T11:56:22.563
> 
> 标签：wpf, data-binding, dependency-properties

我有一个自定义 WPF 用户控件，它具有依赖属性（下面的代码段）。哪个没有正确触发它的 PropertyChangedCallback。

自定义控件：

```
public static readonly DependencyProperty ValueProperty =
    DependencyProperty.Register(
        "Value", typeof(float?), typeof(CustomControl),
        new UIPropertyMetadata(new PropertyChangedCallback(OnDependencyPropertyChanged)));

public float? Value
{
    get { return (float?)GetValue(ValueProperty); }
    set { SetValue(ValueProperty, value); }
}

private static void OnDependencyPropertyChanged(object sender, DependencyPropertyChangedEventArgs e)
{
   // Do something
} 
```

当我使用简单的路径绑定到属性时，一切都很好。但是，当我使用分隔路径语法时，依赖属性不会在应该更新的时候更新。

工作绑定：

```
<namespace:CustomControl Value={Binding ViewModelProperty}/> 
```

不工作绑定：

```
<namespace:CustomControl Value={Binding ViewModelProperty.ObjectProperty}/> 
```

使用工作语法，调用 OnDependencyPropertyChanged 事件处理程序以响应视图模型触发的 ViewModelProperty 的 PropertyChanged 事件。但是，使用第二种语法时，OnDependencyPropertyChanged 事件处理程序仅对 ObjectProperty 的更改调用，而不是对 ViewModelProperty 的更改调用。我是否需要进行任何其他设置才能使分隔 (.) 路径语法正常工作？（与 TextBox.Text 等属性默认具有相同的行为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T04:17:36.533

您是否尝试过使用 Path 属性进行绑定？

```
<nmspc:CustomControl Value="{Binding Path=ViewModelProperty.ObjectProperty}" /> 
```

我记得在以编程方式构建双向绑定时，需要 Path 属性。

# matlab - 在 Scilab 上使用 MATLAB 代码

> ID：14811309
> 
> 赞同：9
> 
> 时间：2013-02-11T11:56:24.530
> 
> 标签：matlab, scilab

是否可以在 Scilab 上使用 MATLAB 代码？这就是说 Scilab 是 MATLAB 的“克隆”时的意思吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-05T08:20:22.737

有一个工具可以自动将 Matlab 源转换为 Scilab 源，它被称为[M2SCI](http://help.scilab.org/docs/5.3.3/en_US/About_M2SCI_tools.html)。一个脚本解析 Matlab 源代码并用 Scilab 替换 Matlab 特定的函数。请参阅[mfile2sci 函数的文档](http://help.scilab.org/docs/5.3.3/en_US/mfile2sci.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T18:08:25.460

是的，您可以在 scilab 上使用 MATLAB 代码。有关更多信息，请参阅这些链接：

1.  [http://help.scilab.org/docs/5.4.0/fr_FR/section_36184e52ee88ad558380be4e92d3de21.html](http://help.scilab.org/docs/5.4.0/fr_FR/section_36184e52ee88ad558380be4e92d3de21.html)

2.  [http://help.scilab.org/docs/5.4.0/en_US/index.html](http://help.scilab.org/docs/5.4.0/en_US/index.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T09:53:15.620

我不会打赌。但是，如果您的代码足够简单，那么机会就很大。

问题是：

*   Matlab 中有加密[的 p-code](http://www.mathworks.de/de/help/matlab/ref/pcode.html)，Scilab 将无法打开。

*   Matlab 通常带有许多您可能无法使用的工具箱（我认为尤其是 Simulink）

*   最后但并非最不重要的一点（我不了解 scilab）通常在函数的实现方式上存在细微差别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-11T13:19:54.470

有许多项目试图复制/替换 MATLAB：

1.  Julia 语言：它的语法与 MATLAB 比较相似，并且提供了出色的性能，但仍然缺少很多工具箱/库，也没有像 MATLAB 这样的 GUI。我认为这是所有 MATLAB 替代方案中最光明的未来。
2.  Python 语言及其库 NumPy 和 matplotlib：这是最常用的替代方案。我认为目前社区比 MATLAB 还要大几个数量级。Python 是目前机器学习和数据科学的事实标准。但是，语法和内存概念仍然与人们在 MATLAB 生态系统中所习惯的相距甚远。尽管 Spyder 和 Jupyter 项目在开发环境方面取得了长足的进步，但也没有与 SIMULINK 相当的产品。
3.  Octave：基本上是 MATLAB 的克隆，以至于他们认为任何不兼容都是错误。如果您不想接触很长的 MATLAB 代码，这是最安全的选择。但是 SIMULINK 也别无选择。
4.  SciLab 及其分支 ScicoLab 是 GUI 方面的最佳选择，具有 SIMULINK 副本 xcos / scicos 和图形用户界面开发功能。但是社区没有 Octave 大，语法也不完全兼容。可悲的是，Scilab 开发团队经历了一场毁灭性的[家庭危机](https://www.reddit.com/r/math/comments/b6gn9r/nsp_is_a_gpl_scientific_software_package/)，导致软件落后。
5.  荣誉提及 Modelica 语言实现 OpenModelica 和 jModelica，因为它们是 SIMULINK-SimScape 的卓越替代品。您应该知道您也可以在 xcos 和 scicos 中加载 Modelica 脚本。如果您想了解更多关于 JModelica 的信息，您可以查看[这篇文章](https://www.reddit.com/r/Python/comments/dcj6fy/jmodelica_combining_the_power_of_python_and/?utm_source=share&utm_medium=web2x)。

您可以查看[MATLAB 的 Alternativeto 页面](https://alternativeto.net/software/matlab/?license=opensource)以查看更多免费和开源替代方案。

# android - Android Manifest 文件使用 sdk 使用权限疑问

> ID：14811310
> 
> 赞同：0
> 
> 时间：2013-02-11T11:56:28.230
> 
> 标签：android

我想将我的 android 应用程序提交给 google-play。

**我的主要文件是：**

```
 <uses-sdk android:minSdkVersion="8"  android:targetSdkVersion="17"/>
    <supports-screens 
        android:smallScreens="true" 
        android:normalScreens="true" 
        android:largeScreens="true" 
        android:xlargeScreens="true" 
        android:anyDensity="true"/> 
```

我对所有屏幕使用相同的布局文件夹。我没有为像 layout-xlarge 和 layout-large 这样的大屏幕和 xlarge 屏幕保留任何单独的文件夹。我如何编写 android mainfest 文件来支持多个屏幕。因为我的 xlarge 屏幕无法使用这个 mainfest 文件正确渲染。

这是我的第一个 android 应用程序，所以请告诉我编写 mainfest 文件以支持所有**屏幕尺寸**和所有**android 操作系统版本**的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:13:27.320

试试这个

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.exampl.eee"
    android:versionCode="1"
    android:versionName="1.0" >
    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:07:48.527

试试这个：

```
<supports-screens android:resizeable="true"
              android:smallScreens="true" 
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true"
              android:anyDensity="true" /> 
```

# android - 折叠可扩展列表组时，Arrayindex 超出范围

> ID：14811311
> 
> 赞同：0
> 
> 时间：2013-02-11T11:56:37.013
> 
> 标签：android, expandablelistview

我正在使用可扩展列表视图并使用 expand.collapse 折叠它，但它会抛出异常 - Arrayindexoutofbound。

```
ExpandableListView  mExpandableList.setOnGroupClickListener(new OnGroupClickListener() {

                @Override
                public boolean onGroupClick(ExpandableListView parent, View v,
                        int groupPosition, long id) {
                    // TODO Auto-generated method stub

                    if(pause!=1234){

                        mExpandableList.collapseGroup(pause);
                    System.out.println(pause+" CLICKED");
                }
                    pause=groupPosition;
                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:30:37.750

嗨，你可以这样使用吗

```
@Override
            public boolean onGroupClick(ExpandableListView parent, View v,
                    int groupPosition, long id) {
                // TODO Auto-generated method stub

                if(pause!=1234){

                    mExpandableList.collapseGroup(groupPosition);
                System.out.println(pause+" CLICKED");
            }
                pause=groupPosition;
                return false;
            } 
```

或者如果它适合您的情况，请使用此方法。

```
mExpandableList.setOnGroupExpandListener(new OnGroupExpandListener() {
        public void onGroupExpand(int groupPosition) {

        }
    }); 
```

# .net - ReaderWriterLockSlim：可升级锁后获取读锁不会抛出 LockRecursionException

> ID：14811313
> 
> 赞同：4
> 
> 时间：2013-02-11T11:56:38.057
> 
> 标签：.net, multithreading, concurrency, synchronization

关于`ReaderWriterLockSlim`：

随后在**同一个**线程中获取两个锁实际上应该抛出一个`LockRecursionException`（递归策略设置为`NoRecursion`）。

我的观察结果：

*   *读卡器*，然后*读卡器*-->`LockRecursionException`
*   *读卡器*，然后是*可升级读卡器*-->`LockRecursionException`
*   *读*锁，然后*写*锁 -->`LockRecursionException`
*   *可升级读卡器*锁，然后是*读卡器*锁 -->**没有例外**
*   *可升级读卡器*锁，然后*可升级读卡器*锁 -->`LockRecursionException`
*   *可升级阅读器*锁，然后是编写*器*锁->**没有例外**
*   *写*锁，然后*读*锁 -->`LockRecursionException`
*   *writer* lock，然后是*可升级的 reader* lock -->`LockRecursionException`
*   *写*锁，然后*写*锁 -->`LockRecursionException`

这种行为正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:18:33.113

[从文档](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)：

> 可升级模式的线程可以通过先调用`EnterReadLock`方法再调用`ExitUpgradeableReadLock`方法降级到读取模式。所有锁递归策略都允许这种降级模式，甚至`NoRecursion`.

我的理解是，对于*写入*情况，进入写入锁是从可升级模式转移到写入模式的正常方式，因此即使在以下政策下也必须得到支持`NoRecursion`（似乎对不可升级的可升级模式没什么意义锁 ：）

# mysql - SQL 选择查询

> ID：14811314
> 
> 赞同：0
> 
> 时间：2013-02-11T11:56:39.787
> 
> 标签：mysql, sql, select, sqlyog

我有 3 张桌子：

```
users:

uid int(11) - userid(primary key, auto_increment)
name varchar(255)
pass varchar(64)
created int(11)

projects:

pid int(11) .....
name varchar(150)
description varchar(255)
created int(11)

users_projects:

uid int(11) - user id
pid int(11) - product id 
```

查询是什么：为具有特定名称的用户显示按名称排序的项目（名称和描述）？

这是我到目前为止所得到的：

```
SEECT name,description FROM projects ORDER BY name ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:00:49.977

看起来你只需要加入表格。这`@Name`是一个包含您想要项目详细信息的用户名的参数：

```
SELECT projects.Name,
       projects.Description
FROM   projects
       INNER JOIN users_projects
         ON projects.pid = users_projects.pid
       INNER JOIN Users
         ON users_projects.UId = Users.UId
WHERE  Users.Name = @Name
ORDER  BY projects.Name ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T11:58:33.473

```
SELECT  a.*, b.*
FROM    users a
        INNER JOIN users_projects b
            ON a.uid = b.uid
        INNER JOIN projects c
            ON b.pid = c.pid
ORDER   BY a.Name ASC 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# asp.net-mvc - 波斯语变成了??? 在果园

> ID：14811315
> 
> 赞同：1
> 
> 时间：2013-02-11T11:56:42.960
> 
> 标签：asp.net-mvc, orchardcms

我在本地机器上建立了一个果园站点。这个网站是三种语言的，在我的本地电脑上每一个都很好。但是在我在远程服务器上发布了我的网站之后；例如，当我想在**波斯语**中添加一个新页面时，将单词保存到数据库后，每个单词都更改为 ????。网站地址是[http://modernsaraylar.com/](http://modernsaraylar.com/)我不知道如何解决它。顺便说一句，我已将所有表格排序规则放入 utf8-persian-ci 但它不起作用:(

提前 TNX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T10:39:02.040

在连接字符串的末尾添加“CharSet = utf8”，它解决了这个问题。如果你使用 MySQL，你会遇到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:42:48.223

在 SQL 中，您必须将列类型更改为 nvarchar 而不是 varchar

# sql - 单独的逗号分隔值并存储在 sql server 的表中

> ID：14811316
> 
> 赞同：8
> 
> 时间：2013-02-11T11:56:45.623
> 
> 标签：sql, sql-server, sql-server-2005

我有一个存储过程，它将逗号分隔值作为输入。我需要将它分开并且需要将它作为单独的行存储在表中。

让 SP 的输入为：

```
Rule_ID  ListType_ID  Values
1        2            319,400,521,8465,2013 
```

我需要将它存储在一个名为`DistributionRule_x_ListType`以下格式的表中：

```
Rule_ID  ListType_ID  Value
1        2            319
1        2            400
1        2            521
1        2            8465
1        2            2013 
```

我的 SP 如下所示：

```
ALTER PROCEDURE [dbo].[spInsertDistributionRuleListType]
(@Rule_ID int,
@ListType_ID int,
@Values VARCHAR(MAX)=NULL
)
AS
BEGIN

    INSERT INTO DistributionRule_x_ListType (Rule_ID,ListType_ID,Value)
    VALUES (@Rule_ID,@ListType_ID,@Values)

END 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T12:25:59.753

您将需要创建一个与此类似的拆分函数：

```
create FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

然后在您的存储过程中，您将调用该函数来拆分您的字符串：

```
ALTER PROCEDURE [dbo].[spInsertDistributionRuleListType]
(
  @Rule_ID int,
  @ListType_ID int,
  @Values VARCHAR(MAX)=NULL
)
AS
BEGIN

    INSERT INTO DistributionRule_x_ListType (Rule_ID, ListType_ID, Value)
    SELECT @Rule_ID, @ListType_ID, items
    FROM [dbo].[Split] (@Values, ',')  -- call the split function 

END 
```

当您执行存储过程时，它将拆分值并将多行插入到您的表中：

```
exec spInsertDistributionRuleListType 1, 2, '319,400,521,8465,2013'; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/61b11/5)。这将插入以下结果：

```
| RULE_ID | LISTTYPE_ID | VALUE |
---------------------------------
|       1 |           1 |    10 |
|       1 |           2 |   319 |
|       1 |           2 |   400 |
|       1 |           2 |   521 |
|       1 |           2 |  8465 |
|       1 |           2 |  2013 | 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T12:10:11.907

你可以用 charindex 来做

```
DECLARE @id VARCHAR(MAX)

SET @id = @Values          --'319,400,521,8465,2013,'

WHILE CHARINDEX(',', @id) > 0 
BEGIN

    DECLARE @tmpstr VARCHAR(50)
     SET @tmpstr = SUBSTRING(@id, 1, ( CHARINDEX(',', @id) - 1 ))

    INSERT  INTO DistributionRule_x_ListType
            ( Rule_ID ,
              ListType_ID ,
              Value
            )
    VALUES  ( @Rule_ID ,
              @ListType_ID ,
              @tmpstr)
            )
    SET @id = SUBSTRING(@id, CHARINDEX(',', @id) + 1, LEN(@id))
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-07T12:17:27.317

您可以在没有`dbo.Split`功能的情况下执行此操作。

这是您的示例数据

```
SELECT * INTO #TEMP
FROM
(
     SELECT 1  Rule_ID, 2 ListType_ID, '319,400,521,8465,2013' [Values]
     UNION ALL
     SELECT 1  , 3 , '100,200' 
)TAB 
```

现在执行以下查询，将为每个`Rule_ID`和 选择所有逗号分隔值`ListType_ID`。

```
SELECT [Rule_ID],ListType_ID,
PARSENAME(REPLACE(Split.a.value('.', 'VARCHAR(100)'),'-','.'),1) 'Values' 
FROM  
(
     SELECT [Rule_ID],ListType_ID,
     CAST ('<M>' + REPLACE([Values], ',', '</M><M>') + '</M>' AS XML) AS Data 
     FROM #TEMP     
) AS A 
CROSS APPLY Data.nodes ('/M') AS Split(a) 
```

*   **[SQL 小提琴](http://www.sqlfiddle.com/#!3/22ea16/1)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-21T06:21:19.257

```
select Rule_ID ,ListType_ID,Values as value
FROM table  
    CROSS APPLY STRING_SPLIT(Values, ','); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T12:11:18.693

您可以创建一个返回表 var 的 udf 来拆分字符串。我们在 MSSQL2005 上成功使用了以下内容。

```
CREATE FUNCTION [dbo].[fn_explode] (
    @str_separator NVARCHAR(255),
    @str_string VARCHAR(4000)
)
RETURNS @ret_string_parts TABLE (str_value varchar(4000))
AS
BEGIN
    DECLARE @intPos INT
    DECLARE @intLengthString INT
    DECLARE @intTempPatIndex INT
    DECLARE @intLengthSeparator INT

    SET @str_string = @str_string + @str_separator

    SET @intPos = 0
    SET @intLengthString = LEN(@str_string)
    SET @intLengthSeparator = LEN(@str_separator)

    IF PATINDEX ( '%' + @str_separator + '%' , @str_string ) <= 0 BEGIN
        INSERT INTO @ret_string_parts
        SELECT @str_string
        RETURN
    END

    IF @str_separator =  @str_string BEGIN
        INSERT INTO @ret_string_parts
        SELECT @str_string
        RETURN
    END

    WHILE @intPos <= @intLengthString
    BEGIN
        SET @intTempPatIndex = PATINDEX('%' + @str_separator + '%', SUBSTRING(@str_string, @intPos,@intLengthString))
        IF @intTempPatIndex = 0 BEGIN
            INSERT INTO @ret_string_parts
            SELECT SUBSTRING(@str_string, @intPos, @intLengthString)
            BREAK
        END
        ELSE BEGIN
            IF @intPos = 0 BEGIN
                INSERT INTO @ret_string_parts
                SELECT SUBSTRING(@str_string, @intPos, @intTempPatIndex)
                SET @intPos = @intPos + @intTempPatIndex + @intLengthSeparator
            END
            ELSE BEGIN
                INSERT INTO @ret_string_parts
                SELECT SUBSTRING(@str_string, @intPos, @intTempPatIndex-1)
                SET @intPos = @intPos + @intTempPatIndex + (@intLengthSeparator-1)
            END

        END
    END

    RETURN
END 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-23T19:03:49.723

完成@bluefeet 回答后，您还可以使用 CSV 字符串将多个值存储在多个列中：

```
 --input sql text 
declare @text_IN varchar(max) ='text1, text1.2, text1.3, 1, 2010-01-01\r\n text2, text2.2, text2.3, 2, 2016-01-01' 
```

将 csv 文件拆分为行：

```
declare @temptable table (csvRow varchar(max))    
declare @DelimiterInit varchar(4) = '\r\n'
declare @Delimiter varchar(1) = '|'
declare @idx int       
declare @slice varchar(max)    

set @text_IN = REPLACE(@text_IN,@DelimiterInit,@Delimiter)

select @idx = 1       
    if len(@text_IN)<1 or @text_IN is null  return       

while @idx!= 0       
begin       
    set @idx = charindex(@Delimiter,@text_IN)       
    if @idx!=0       
        set @slice = left(@text_IN,@idx - 1)       
    else       
        set @slice = @text_IN 

    if(len(@slice)>0)  
        insert into @temptable(csvRow) values(@slice)       

    set @text_IN = right(@text_IN,len(@text_IN) - @idx)       
    if len(@text_IN) = 0 break       
end 
```

将行拆分为列：

```
;WITH XMLTable (xmlTag)
AS
(
    SELECT CONVERT(XML,'<CSV><champ>' + REPLACE(csvRow,',', '</champ><champ>') + '</champ></CSV>') AS xmlTag
    FROM @temptable
)

 SELECT RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[1]','varchar(max)'))) AS Column1,    
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[2]','varchar(max)'))) AS Column2,
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[3]','varchar(max)'))) AS Column3,    
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[4]','int'))) AS Column4,
        RTRIM(LTRIM(xmlTag.value('/CSV[1]/champ[5]','datetime'))) AS Column5
 FROM XMLTable 
```

# java - java中缀计算器

> ID：14811318
> 
> 赞同：0
> 
> 时间：2013-02-11T11:56:53.557
> 
> 标签：java, stack, calculator, infix-notation

我似乎无法在 try 块的内部进行堆栈，我的意思是通过在 try 块中使用堆栈来获得一个位数的计算器。try 块的内部给了我 emptystackexception

```
import java.util.EmptyStackException;
import java.util.*;

public class Infix
{
    public static void main(String[] args){

        System.out.println(evaluateInfix("1*2*3"));

    }
public static double evaluateInfix(String infix)
    {
        try
        {
            Stack<Character> valueStack = new Stack<Character> ();
            Stack<Character>  operatorStack = new Stack<Character> ();
            double result;
            for(char ch: infix.toCharArray()){
                if(ch >= 0 && ch <= 9){
                    valueStack.push(ch);
                } else if(ch == '('){
                    operatorStack.push(ch);
                } else if(ch == '+' || ch == '-' || ch == '*' || ch == '/' || ch == '%' || ch == '^' || ch == '='){
                    if(operatorStack.isEmpty()){
                        operatorStack.push(ch);
                    } else if(precedence(ch) > precedence(operatorStack.peek())){
                        operatorStack.push(ch);
                    } else {
                        while(!operatorStack.isEmpty() && precedence(ch) <= precedence(operatorStack.peek())){
                            result = compute(valueOf(valueStack.pop()), valueOf(valueStack.pop()), operatorStack.pop());
                            valueStack.push((char)result);
                        }
                        operatorStack.push(ch);
                    }
                } else if(ch == ')'){
                    while(operatorStack.peek() != '('){
                        result = compute(valueOf(valueStack.pop()), valueOf(valueStack.pop()), operatorStack.pop());
                        valueStack.push((char)result);
                    }
                    operatorStack.pop();
                }
            }

            while(!operatorStack.isEmpty()){
                result = compute(valueOf(valueStack.pop()), valueOf(valueStack.pop()), operatorStack.pop());
                valueStack.push((char)result);
            }
            result = valueStack.peek();

            System.out.println(result);

            /* **********
            Task 3
            complete this section to calculate the infix expression
            */        

        } //end try
        catch (EmptyStackException e)
        {
            /* **********
            Task 3
            complete this to return Double.NaN
            */            
        }
        catch (ArithmeticException e)
        {
            /* **********
            Task 3
            complete this to return Double.NEGATIVE_INFINITY
            */            
        }
        return 3.0;

    } // end evaluateInfix

    private static int precedence(char operator)
    {
        switch(operator){
            case '(': case ')': return 0;
            case '+': case '-': return 1;
            case '*': case '/': case '%': return 2;
            case '^': return 3;
            case '=': return 4;
        }
        return -1;
    }

    private static double valueOf(char variable)
    {
        switch (variable)
        {
            case '1': return 1.0;
            case '2': return 2.0;
            case '3': return 3.0;
            case '4': return 4.0;
            case '5': return 5.0;
            case '6': return 6.0;
            case '7': return 7.0;
            case '8': return 8.0;
            case '9': return 9.0;
            case '0': return 0.0;
        } // end switch

        return 0;
    } // end valueOf

    private static Double compute(Double operandOne, Double operandTwo, char operator)
    {
        if(operator == '+'){
            return operandOne + operandTwo;
        } else if(operator == '-'){
            return operandOne - operandTwo;
        } else if(operator == '*'){
            return operandOne * operandTwo;
        } else if(operator == '/'){
            return operandOne / operandTwo;        
        } else if(operator == '%'){
            return operandOne % operandTwo;
        } else if(operator == '^'){
            return Math.pow(operandOne, operandTwo);
        } else {
            return null;
        }
    } // end compute
} // end Infix 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-23T14:46:36.757

第一个 if 不应该在数字周围包含 '' 吗？

```
if(ch >= '0' && ch <= '9'){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:01:25.570

你有一对冗余的“}”和“{”，它们将你的大部分代码变成了一个初始化块——本质上是一个中缀类的构造函数。

（根据您的评论） - 缺少方法声明。

尝试更改前几行：

```
public class Infix {
  public static void main(String[] args){
    System.out.println(evaluateInfix("1*2*3"));
  }

  {
    try {
      ... 
```

至：

```
public class Infix {
  public static void main(String[] args){
    System.out.println(evaluateInfix("1*2*3"));
  }

  public static double evaluateInfix(String infix) {
    try {
      ... 
```

# xslt - 理解 xslt 中的递归

> ID：14811319
> 
> 赞同：0
> 
> 时间：2013-02-11T11:56:59.540
> 
> 标签：xslt, recursion, xslt-1.0

我试图理解 xslt 中的 recorsion。任何人都可以解释这段代码中发生了什么。

```
<xsl:template name="factorial">
  <xsl:param name="number" select="1"/>
  <xsl:choose>
    <xsl:when test="$number <= 1">
      <xsl:value-of select="1"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:variable name="recursive_result">
        <xsl:call-template name="factorial">
          <xsl:with-param name="number" select="$number - 1"/>
        </xsl:call-template>
      </xsl:variable>
      <xsl:value-of select="$number * $recursive_result"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

我不明白为什么我们用`<xsl:variable name="recursive_result">`.

如果有更清晰的示例可用，请指导我。我缺乏递归知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:57:17.683

元素与元素一起`call-template`包装，`variable`以便将调用它的结果分配给变量`recursive_result`。

这样做是为了`number`在下一行乘以它，以产生最终结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T08:42:52.067

您不能在 XSLT 中声明可从脚本的其他部分更改的全局变量。如果您需要模板调用的结果或递归是在变量中“打印”生成结果的唯一方法。

“打印输出”是用`<xsl:value-of ...`语句完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T09:26:50.097

在 XSLT 中，我们使用递归而不是循环。递归只不过是一种特殊类型的函数，它会在需要找到最终解决方案时多次调用自身。所以，

1.  输入数字变量为'1'
2.  给定值，如果它小于 1，那么它只是打印的值`$number`
3.  否则，在 with-param 的帮助下，将调用模板作为变量号的输入
4.  在这里，它再次调用相同的模板并将值传递给名为的相同变量`number`
5.  然后将结果值赋给变量`recursive_result`

希望会被理解。

# javascript - 单击时更改按钮的显示图像

> ID：14811323
> 
> 赞同：0
> 
> 时间：2013-02-11T11:57:13.410
> 
> 标签：javascript, jquery, html

我有几个按钮：

```
<button class="image1-button" data-image="bg_images/1.jpg"><img src="images/button.png"></button>
<button class="image1-button" data-image="bg_images/2.jpg"><img src="images/button.png"></button>
<button class="image1-button" data-image="bg_images/3.jpg"><img src="images/button.png"></button>
<button class="image1-button" data-image="bg_images/4.jpg"><img src="images/button.png"></button> 
```

如果其中一个被按下，我想像选择和未选择的按钮一样更改 img。

```
<button class="image1-button" data-image="bg_images/4.jpg"><img src="images/button_selected.png"></button> 
```

我的想法是做一个点击功能，但我在页面上有很多按钮（超过 25 个），我不认为 25 个用于附加不同图像的点击功能是正确的方法。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T11:59:58.387

您不需要 25 个点击事件：

```
$(".image1-button").click(function(){
   $(".image1-button img").attr("src", "images/button.png")
   $(this).find("img").attr("src", "images/button_selected.png");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:59:31.203

您可以使用切换功能在两个图像之间切换，例如[在此处输入链接描述](http://api.jquery.com/toggle/)，

```
$('.image1-button').click(function(){

   $(this).find('img').toggle('src', $(this).data('image'));

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:00:02.803

```
$(.image1-button).click(function(){
$(this).children('img').attr("src","images/button_selected.png");

}) 
```

# c - 强制使用 ANSI 编辑控件而不是 comctl32 编辑控件

> ID：14811325
> 
> 赞同：0
> 
> 时间：2013-02-11T11:57:13.680
> 
> 标签：c, winapi, window, controls, comctl32

我构建了一个模块，该模块创建一个带有来自 windows 的 EDIT 窗口类的编辑框的窗口。它被设计为仅使用 ansi 字符集而不使用任何 unicode。

我使用[EM_GETHANDLE](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761576%28v=vs.85%29.aspx)来接收编辑控件的缓冲区。

现在这是我的问题：（引自上面的链接）

`Note For Comctl32.dll version 6, the buffer always contains an array of WCHARs, regardless of whether an ANSI or Unicode function created the edit control. For more information on DLL versions, see Common Control Versions.`

因此，当我的模块被已初始化 comctl32 的应用程序加载时，我的整个代码都会中断。

我的问题：有没有办法阻止 CreateWindowA 使用 comclt32 或者有没有人有解决这个问题的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:27:51.590

如果应用`COMCTL32.DLL`程序清单中指定了应用程序，则应用程序将使用它，如下所述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx)

如果您的模块是 DLL，那么您可以尝试使用一些隔离技术，使其不依赖于`COMCTL32.DLL`决定使用的 .exe 版本，但这可能会带来许多其他缺点。

我建议使用`WM_GETTEXTA`or`GetWindowTextA()`代替，它将转换的字符串复制到您的缓冲区中。设计一个需要旧版本 DLL 才能正常工作的模块简直是个坏主意。

# java - 将 JSON 转换为 java 解析

> ID：14811327
> 
> 赞同：-1
> 
> 时间：2013-02-11T11:57:25.220
> 
> 标签：java, json

我正在我的服务器上执行查询，它以 JSON 格式返回树信息。以下

```
[{"leaf": 0, "context": {}, "text": "ABC-1-6-1", "expandable": 1, "id": "1.1.2.202.ABC-1-6-1", "allowChildren": 1}] 
```

我正在玩 json-simple 库，如果能以字符串格式获取上述信息，则可以使用 JSONParser 解析它，即

```
String jsonString = "{\"leaf\": 0, \"context\": {}, \"text\": \"1.1.2.202.ABC-1-6-1\", \"expandable\": 1, \"id\": \"1.1.2.202.ABC-1-6-1\", \"allowChildren\": 1}"; 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:08:21.280

如果要将 JSON 转换为 java，请使用 gson。这很简单。

```
 Person fromJson = new Gson().fromJson(json, Person.class);// this will convert json to java object
        fromJson.setAge(15);
        fromJson.setName("json");
        fromJson.setEmail("email@gmail.com");
        fromJson.setMob("4657576876");

        json = new Gson().toJson(fromJson);// this will convert java to json string like this {"name":"json","age":15,"email":"email@gmail.com","mob":"4657576876"} 
```

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

json数组转换参考以下链接

[序列化和反序列化 json 数组](https://stackoverflow.com/questions/3458930/deserializing-json-array-using-gson)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:13:21.447

您有许多[用于 Java 的 JSON 解析器](http://www.json.org/java/)

# c# - 从后面的代码调整 Web 服务方法 SQL

> ID：14811336
> 
> 赞同：0
> 
> 时间：2013-02-11T11:57:48.917
> 
> 标签：c#, asp.net, gridview

我在 asp 中有一个 gridView，目前使用以下数据源 -

```
<asp:SqlDataSource ID="SqlDataSourceTEST" runat="server" 
    ConnectionString="connection string" 
    SelectCommand="SELECT * FROM table">
</asp:SqlDataSource> 
```

我可以通过以下方式调整`SelectCommand`后面的代码 -

```
SqlDataSourceTEST.SelectCommand = "SELECT * FROM table WHERE ID =" + iD; 
```

但是我现在正在调整代码以通过 Web 服务方法填充 gridView -

```
[WebMethod]

    public DataSet sMethod()
    {
        using (SqlConnection cnn = new SqlConnection(DBcon))
        {

            string sql = "SELECT * FROM table";
            SqlDataAdapter da = new SqlDataAdapter(sql, cnn);
            DataSet ds = new DataSet();
            da.Fill(ds, "table");

            return ds;

        }
    } 
```

然后在页面加载填充 gridView -

```
WebService1 ws = new WebService1();
gridView1.DataSource = ws.sMethod();
gridView1.DataBind(); 
```

有没有办法可以`string sql`在后面的代码中调整 web 方法的一部分来添加变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:03:02.590

使您的`WebMethod`接受参数：

```
public DataSet sMethod(string sql)
{
   if (string.IsNullOrEmpty(sql))
   {
       sql = "SELECT * FROM table";
   } 
   SqlDataAdapter da = new SqlDataAdapter(sql, cnn);

   ...
} 
```

并从网站上调用它：

```
string sql = "SELECT * FROM table WHERE ID =" + iD;
WebService1 ws = new WebService1();
gridView1.DataSource = ws.sMethod(sql);
gridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:47:04.243

[网络方法]

```
public DataSet sMethod()
{
    using (SqlConnection cnn = new SqlConnection(DBcon))
    {

        string sql = "SELECT * FROM table";
        SqlDataAdapter da = new SqlDataAdapter(sql, cnn);
        DataSet ds = new DataSet();
        da.Fill(ds, "table");

        return ds;

    }
} 
```

# ios - 将 iOS TabBar 项目标题调整到它的中心

> ID：14811337
> 
> 赞同：4
> 
> 时间：2013-02-11T11:57:57.560
> 
> 标签：ios

```
//TabBarController code:

self.delegate=self;
self.tabBarController.tabBar.delegate=self;

CGRect viewFrame=self.tabBar.frame;
viewFrame.origin.y -=0;![enter image description here][1]
viewFrame.origin.x -=0;
viewFrame.size.height=30;
self.tabBar.frame=viewFrame;

firstViewController = [[FirstViewController alloc] initWithNibName:nil bundle:NULL];
secondViewController = [[SecondViewController alloc] initWithNibName:nil bundle:NULL];

NSArray *twoViewControllers = [[NSArray alloc] initWithObjects:
                                       self.firstViewController, self.secondViewController, nil];

self.viewControllers=twoViewControllers;

//    ====================================================
//    
//    FirstViewController code in initWithNibName: 
//    
//    To set the title of the first tabbar item:

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = @"Article view";
        NSLog(@"count = %d",[self.tabBarController.tabBar.items count]);

    }
    return self;
} 
```

//如何在不向 tabbaritem 添加任何//图像的情况下将第一个标签栏项目标题“文章视图”设置为中心？

// 类似于下面的标签栏项目截图。

```
 [1]: http://i.stack.imgur.com/xBpVH.png

Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T12:36:56.560

替换`initWithNibName`方法

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = @"Article view";
        self.tabBarItem.imageInsets = UIEdgeInsetsMake(5, 0, -5, 0);
        NSLog(@"count = %d",[self.tabBarController.tabBar.items count]);
    }
    return self;
} 
```

`self.tabBarItem.imageInsets = UIEdgeInsetsMake(5, 0, -5, 0);`此处的这一行以以下方式调整 tabBarItem 的图像位置：

> 从默认位置沿 x 方向“+5”和 y 方向“-5”移动图像。

玩，`UIEdgeInsetsMake`玩得开心。干杯。

# php - 从 5 张图像中为一项选择一张图像

> ID：14811342
> 
> 赞同：0
> 
> 时间：2013-02-11T11:58:13.303
> 
> 标签：php, mysql

我试图创建一个脚本，该脚本循环遍历与 1 个项目匹配的 5 个项目，然后显示与 5 个项目中的每一个相关联的一个图像。
这是我创建的一个小提琴来说明我的问题。 [http://sqlfiddle.com/#!2/17d66/1/0](http://sqlfiddle.com/#!2/17d66/1/0)

我想从每个匹配的项目中选择一张图片。这是我想出的代码，但到目前为止它不起作用。我使用了两个比较点，标签和家庭。与产品类型和系列相关联的标签是它所属的类别。例如，iPhone 4 将智能手机作为标签，将 iPhone 4 作为家庭。任何帮助将不胜感激，我的代码如下。

```
<?php
    // main product
$images = "SELECT img_id FROM product_images WHERE img_tag = '$p_type' && img_family = '$p_family' LIMIT 5";
$img_list = mysql_query($images);
while($rows = mysql_fetch_array($img_list))  {
    $img_name = $rows['img_name'];
    $img_tag = $rows['img_tag'];
    $img_family = $rows['img_family'];
    $img_id = $rows['img_id'];
    //echo $img_name;

            <div>
              <img src="view.php?h=400&w=400&imgid=<?php echo $img_id; ?>" />
            </div>

}

         </div>      
  </div> 
```

```
<div id="left_other">
    <div class="titleHeaders">Other matching items:</div>
    <?php 
    $match_items = "SELECT id,product_name,product_type FROM product_list WHERE name_family = '$p_family' AND id <> '$id' LIMIT 5";
    $match_q = mysql_query($match_items);   
    $count = mysql_num_rows($match_q);

    if($count > 0) {
        //get matching products
        while($items = mysql_fetch_array($match_q)) {
        $id = ($items['id']);
        echo "<p>$id</p>";
        $p_name = ($items['product_name']);
        echo "<p>$p_name</p>";
        $type = ($items['product_type']);
        echo "<p>$type</p>";
        $full = "$p_name $type";
        echo "<p>$full</p>";

        //get photos

            $other_photos = "SELECT * FROM product_images WHERE img_family = '$p_family' AND img_tag <> '$p_type' LIMIT 1"; 
            echo $other_photos;
            $other_q = mysql_query($other_photos);  
            while($pictures = mysql_fetch_array($other_q)) {
                echo "<p>----------------------</p>";
                $theid = ($pictures['img_id']);
                echo "<p>$theid</p>";
                $photo = ($pictures['img_name']);
                echo "<p>$photo</p>";
                $thetype = ($pictures['img_tag']);
                echo "<p>$thetype</p>";
                echo "<p>----------------------</p>";

            if($photo != $newname && $theid != $newid){
                if ($photo == '') {
                    $poly = 'images/pph.jpg';
                    //echo $poly;
                }else{
                    $poly = 'product_images/regular_images/'.$photo;
                    //echo $poly;
                } // end if
                $newname = $photo;
                $newid = $theid;
            }else{
                echo "<p>The photo name is the same!</p>";
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:46:59.500

您可以使用单个查询来获取结果。这是你如何做到的。

```
SELECT
  pl.id,
  pl.product_name,
  pl.product_type ,
  pi.product_images
FROM   product_list AS pl
LEFT  JOIN (SELECT product_list_id , product_images FROM product_images LIMIT 1) AS `pi` ON pi.product_list_id = pl.id
WHERE pl.img_tag = '$p_type' AND pl.img_family = '$p_family'
LIMIT 5 
```

但如果有一些表结构、样本数据和所需的输出，那就太棒了。

编辑

试试这个查询，你可以在最后放一个 where

```
SELECT 
  * 
FROM
  `products` AS p 
  LEFT JOIN (SELECT MAX(img_id), img_name, img_tag, img_family FROM  `images`) AS i ON i.img_family = p.`p_family` AND i.img_tag = p.`p_tag` ; 
```

编辑

```
SELECT *
FROM `products` AS p
  LEFT JOIN images as i
    ON i.img_family = p.`p_family`
group by p.p_name; 
```

# vba - Excel VBA中是否可以在另一个模块中更改模块的源代码

> ID：14811343
> 
> 赞同：4
> 
> 时间：2013-02-11T11:58:15.930
> 
> 标签：vba, excel

我有一个 Excel .xlam 文件，它在功能区中添加了一个按钮来执行以下操作：

1.  扫描 ActiveSheet 以获取一些预设参数
2.  获取我的源文本（一个字符串值，直接在 VBA 模块中硬编码）并用从步骤 1 中检索到的参数替换指定区域
3.  生成包含计算文本的文件

我以这种方式保存源文本，因为它可以受密码保护，并且我不需要在 .xlam 文件所在的任何地方拖动另一个文件。源文本保存在一个名为“Source”的单独模块中，看起来像这样（感谢 VBA 没有 Heredocs）：

```
'Source Module
Public Function GetSource() As String
    Dim s As String
    s = ""

    s = s & "This is the first line of my source text" & vbCrLf
    s = s & "This is a parameter {par1}" & vbCrLf
    s = s & "This is another line" & vbCrLf

    GetSource = s
End Function 
```

该功能工作正常。我的问题是，如果我想更新源文本，我现在必须在 .xlam 文件中手动执行此操作。我想做的是`Sub ImportSource()`在另一个模块中构建类似的东西，它将解析一些文件，以编程方式重建“源”模块，然后用我计算的源代码替换那个模块。我不知道是否/如何用字符串变量中的某个值替换模块的源代码。

这就像最糟糕的元编程，从哲学上讲，我反对这样做，直到我的核心。但是，实际上，我想知道是否以及如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:49:58.407

As @brettdj already pointed out with his link to [cpearson.com/excel/vbe.aspx](http://www.cpearson.com/excel/vbe.aspx) , you can programmatically change to code of a VBA module using the *VBA Extensibility library*! To use it, select the library in the VBA editor *Tools*->*References*. Note that you need to also change the options in your Trust center and select: *Excel Options*->*Trust Center*->*Trust Center Settings*->*Macro Settings*->*Trust access to the VBA project object model*

Then something like the following code should do the job:

```
Private mCodeMod As VBIDE.CodeModule

Sub UpdateModule()
    Const cStrModuleName As String = "Source"

    Dim VBProj As VBIDE.VBProject
    Dim VBComp As VBIDE.VBComponent

    Set VBProj = Workbooks("___YourWorkbook__").VBProject

    'Delete the module
    VBProj.VBComponents.Remove VBProj.VBComponents(cStrModuleName)

    'Add module
    Set VBComp = VBProj.VBComponents.Add(vbext_ct_StdModule)
    VBComp.Name = cStrModuleName
    Set mCodeMod = VBComp.CodeModule

    'Add procedure header and start
    InsertLine "Public Function GetSource() As String"
    InsertLine "Dim s As String", 1
    InsertLine ""

    'Add text
    InsertText ThisWorkbook.Worksheets("Sourcetext") _
        .Range("___YourRange___")

    'Finalize procedure
    InsertLine "GetSource = s", 1
    InsertLine "End Function"

End Sub

Private Sub InsertLine(strLine As String, _
    Optional IndentationLevel As Integer = 0)
    mCodeMod.InsertLines _
        mCodeMod.CountOfLines + 1, _
        Space(IndentationLevel * 4) & strLine
End Sub

Private Sub InsertText(rngSource As Range)
    Dim rng As Range
    Dim strCell As String, strText As String
    Dim i As Integer

    Const cLineLength = 60
    For Each rng In rngSource.Cells
        strCell = rng.Value
        For i = 0 To Len(strCell) \ cLineLength
            strText = Mid(strCell, i * cLineLength, cLineLength)
            strText = Replace(strText, """", """""")
            InsertLine "s = s & """ & strText & """", 1
        Next i
    Next rng
End Sub

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T15:07:17.970

我现在意识到你真正想做的是以你的 VBA 可以访问的方式在你的文档中存储一些值，但是电子表格的用户是不可读的。遵循查尔斯威廉姆斯的建议，将值存储在工作表的命名范围中，并解决您不希望用户访问这些值的担忧，您必须加密字符串......

[本文](http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/84d49593-2d8e-4e7c-af3a-61882af9557d)描述了执行此操作的“正确方法” - 但这是一项相当多的工作。

[在这里](http://www.devx.com/tips/Tip/5676)可以找到一个更短的例程。它只是使用带有硬编码密钥的简单 XOR 加密 - 但对于“大多数用途”来说应该足够了。密钥将“隐藏”在您的宏中，因此窥探者无法访问（嗯，不容易）。

现在您可以使用这个函数，我们称之为它`encrypt(string)`，将您的字符串转换为电子表格中的值：

```
range("mySecretCell").value = encrypt("The lazy dog jumped over the fox") 
```

当你需要使用它时，你使用

```
Public Function GetSource()
    GetSource = decrypt(Range("mySecretCell").value)
End Function 
```

如果您使用该`XOR`版本（第二个链接），`encrypt`并且`decrypt`将具有相同的功能...

是否更好地满足您的需求？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:37:41.523

您可以以编程方式“导出”和“导入”.bas 文件。要按照您的要求进行操作，就必须采用这种方法。我不相信可以修改内存中的代码。看[这篇文章](http://communities.bentley.com/products/microstation/w/microstation__wiki/using-vba-to-programmatically-import-a-vba-projects-components-and-references-cs.aspx)

# objective-c - tableView 中的向下滚动图像有点慢

> ID：14811353
> 
> 赞同：0
> 
> 时间：2013-02-11T11:59:05.083
> 
> 标签：objective-c, uitableview

我有一个带有 customCell 的 tableView，它在每行中显示三个图像。当我向下或向上滚动时，即使我调整了图像大小，也需要一点时间来向上或向下移动。我已经从文件夹中加载了图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:33:15.220

因为您在滚动时正在获取所有图像，并且滚动速度变慢。

您应该使用**SDWebImage 类**，这里的[链接](https://github.com/rs/SDWebImage)使用缓存方案来加载那些行在 UITableView 上显示的图像

# silverlight - 异常使用动态添加控件到silverlight子窗口？

> ID：14811357
> 
> 赞同：0
> 
> 时间：2013-02-11T11:59:10.117
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

我的应用程序中有一个参数化的构造函数。我想将控件动态添加到我的 silverlight 子控件页面。但它给了`NullReferenceException`. 我不知道为什么它返回 null。有什么可以帮助我解决这种情况吗？

```
public PDFExport(FrameworkElement graphTile1, FrameworkElement graphTile2,FrameworkElement graphTile3)
{

  Button btnGraph1 = new Button();
  string Name = graphTile1.Name;
  btnGraph1.Content = Name;
  btnGraph1.Width = Name.Length;
  btnGraph1.Height = 25;
  btnGraph1.Click += new RoutedEventHandler(btnGraph1_Click);
  objStack.Children.Add(btnGraph1);
  LayoutRoot.Children.Add(objStack); // Here am getting null Reference Exception

  _graphTile1 = graphTile1;
  _graphTile2 = graphTile2;
  _graphTile3 = graphTile3;
 } 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:57:13.997

我猜 objStack 是在您的 XAML 中声明的堆栈面板？请注意，您的 xaml 的 UI 组件是通过调用 InitializeComponent 构建的。

因此，除非您在构造函数中调用 InitializeCOmponent()，否则 objStack 将不存在。

此外，您应该知道对 InitializeComponent 的调用是异步的，因此您的代码应该如下所示：

```
private readonly FrameworkElement _graphTile1;
private readonly FrameworkElement _graphTile2;
private readonly FrameworkElement _graphTile3;

public PDFExport(FrameworkElement graphTile1, FrameworkElement graphTile2, FrameworkElement graphTile3)
{
    _graphTile1 = graphTile1;
    _graphTile2 = graphTile2;
    _graphTile3 = graphTile3;
}

private void PDFExport_OnLoaded(object sender, RoutedEventArgs e)
{
    Button btnGraph1 = new Button();
    string Name = _graphTile1.Name;
    btnGraph1.Content = Name;
    btnGraph1.Width = Name.Length;
    btnGraph1.Height = 25;
    btnGraph1.Click += new RoutedEventHandler(btnGraph1_Click);
    objStack.Children.Add(btnGraph1);
    LayoutRoot.Children.Add(objStack); 
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:58:29.723

根据我的研究，我知道为什么会引发异常：因为没有

我的构造函数中的 InitializeComponent() 并且没有调用父构造函数。

这就是它引发异常的原因。

只需将 InitializeComponent() 添加到代码中，简单

# ios - How to find C or C++ code leaks using Instruments (Leaks) - Xcode?

> ID：14811359
> 
> 赞同：2
> 
> 时间：2013-02-11T11:59:11.983
> 
> 标签：ios, objective-c, xcode, memory-leaks, instruments

```
int* foo = new int[10];
foo = NULL;
sleep(60); 
```

Instrument is not finding any leak in above code, how do I use Instrument tool to find C or C++ code leaks. I have stack overflowed most of the explanation is based on objective C codes...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:26:36.883

The issue is that compiler will optimize out the call to `new` in the following code fragment:

```
int* foo = new int[10];
foo = NULL;
sleep(60); 
```

as it's smart enough to know that it's not being used. If you add code to use `foo` then compiler won't do this and you should see the leak you are expecting:

```
int* foo = new int[10];

foo[3] = 23;
foo[8] = 45;

printf("%d %d\n", foo[3], foo[8]);

foo = NULL;
sleep(60); 
```

# mysql - 如何在 MySQL 中使用带有 INNER JOIN 的 SQL 函数？

> ID：14811363
> 
> 赞同：1
> 
> 时间：2013-02-11T11:59:22.943
> 
> 标签：mysql, sql, function, join, inner-join

我有一个函数“fnc_FindIssueId”，它接受一个对象 ID 并返回其分配的问题 ID。

当我使用纯选择语句调用该函数时，它工作正常：

```
select fnc_FindIssueId(150083); // returns 1 as issueId for objectId of 150083
select fnc_FindIssueId(150072); // returns 2 as issueId for objectId of 150072 
```

但是当我在 Inner Join 中使用它时，它会进入一个永无止境的循环：

```
select so.id, si.id
from smart_objects as so 
       LEFT OUTER join smart_issues as si 
        on si.id = fnc_FindIssueId(so.id)
where so.id in (150083, 150072); 
```

是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:03:12.970

它不执行*永无止境的*循环。

原因是服务器执行`FULL TABLE SCAN`速度非常慢。`si.id = fnc_FindIssueId(so.id)`即使您在`si.id`and上定义了一个索引，此条件也不使用索引`so.id`。

你可以做的最好的方法是：

*   改变表格`smart_objects`
*   另一列`assigned issue Id`
*   在新列上定义索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:03:52.543

解决方法是创建一个包含 ObjectId 和 IssueId 列的新视图，然后从该视图中调用该函数！但现在变得很慢。

```
CREATE ALGORITHM=UNDEFINED DEFINER=`mysql`@`%` SQL SECURITY DEFINER VIEW `vw_smart_objectissue` AS select `so`.`id` AS `objectid`,`fnc_FindIssueId`(`so`.`id`) AS `issueid` from `smart_objects` `so` order by `so`.`id`$$ 
```

# java - 强制 Java 虚拟机运行垃圾收集器

> ID：14811364
> 
> 赞同：4
> 
> 时间：2013-02-11T11:59:25.643
> 
> 标签：java, garbage-collection

我有一个在大型数据集上运行的复杂 Java 应用程序。该应用程序执行得相当快，但随着时间的推移，它似乎会消耗大量内存并减慢速度。有没有办法在不重新启动应用程序的情况下运行 JVM 垃圾收集器？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T12:01:18.917

**不**，你不能*强制*垃圾收集。
即使使用

```
System.gc(); 
```

您可以只*请求*垃圾收集，但这取决于 JVM 是否这样做。

此外，垃圾收集器足够聪明，可以在需要时收集未使用的内存，因此您应该检查是否以错误的方式处理对象，而不是强制垃圾收集。
如果您以错误的方式处理对象（例如保持对不必要对象的引用），那么 JVM 几乎无法做任何事情来释放内存。

来自[**文档**](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29)

> 调用 gc 方法**表明**Java 虚拟机花费精力回收未使用的对象，以便使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，**Java 虚拟机已尽最大努力** 从所有丢弃的对象中回收空间。

打开有关文档 的[**错误**](http://bugs.sun.com/view_bug.do?bug_id=6668279)`System.gc()`

> System.gc() 的文档具有极大的误导性，并且没有提及*从不*调用 System.gc() 的推荐做法。
> 
> 语言的选择使我们不清楚调用 System.gc() 时的行为是什么，以及哪些外部因素会影响行为。

当您认为应该强制 JVM 释放一些内存时，很少有有用的链接可供访问
1.[垃圾收集如何工作](http://chaoticjava.com/posts/how-does-garbage-collection-work/)
2\. [System.gc() 什么时候做任何事情](https://stackoverflow.com/questions/66540/system-gc-in-java)
3.[为什么调用 System.gc() 是不好的做法？](https://stackoverflow.com/questions/2414105/why-is-it-a-bad-practice-to-call-system-gc)

都说
1\. 你无法控制 Java 中的 GC，甚至`System.gc()`不保证它。
2\. 强迫它的不良做法也可能对性能产生不利影响。
3\. 重新审视你的设计，让 JVM 做他的工作 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:03:33.810

你不应该继续`System.gc()`- 如果你觉得你需要强制 GC 运行它通常意味着你的代码/设计有问题。如果您准备好创建未使用的对象，GC 将运行并清除它们 - 请验证您的设计并更多地考虑内存管理，以及查看对象引用中的循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:04:38.190

这

```
System.gc() 
```

在java中调用，建议vm运行垃圾收集。虽然它不能保证它会真正做到这一点。尽管如此，您拥有的最佳解决方案。正如其他回复中提到的，jvisualvm 实用程序（自 JDK 6 更新 7 起出现在 JDK 中）也提供了垃圾功能。

编辑：

你的问题让我对这个话题产生了兴趣，我发现了这个资源：

[oracle gc 资源](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:34:28.077

> 该应用程序执行得相当快，但随着时间的推移，它似乎会消耗大量内存并减慢速度。

这些是 Java 内存的典型症状。很可能在您的应用程序的某个地方有一个不断增长的数据结构。随着堆接近满，JVM 花费越来越多的时间来运行 GC（徒劳）试图收回一些空间。

强制 GC 不会解决这个问题，因为 GC*无法*收集数据结构。事实上，强制 GC 运行只会让应用程序变慢。

解决问题的方法是找出导致内存泄漏的原因，并修复它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-18T15:03:09.377

性能增益/下降取决于您需要垃圾收集的频率、您的 jvm 有多少内存以及您的程序需要多少。

当您调用 System.gc() 时，垃圾收集没有确定性（它只是对解释器的提示），但至少有概率。通过足够数量的调用，您可以仅为您的系统设置实现一些统计上派生的性能乘数。

下图显示了一个示例程序的执行消耗，jvm 分别只为每个试验提供了 1GB(no gc)、1GB(gc)、3GB(gc)、3GB(no gc) 堆。

起初，当 jvm 只分配 1GB 内存而程序需要 3.75GB 时，生产者线程池需要 50 多秒才能完成工作，因为垃圾管理较少导致对象创建率低下。

第二个示例大约快 %40，因为在每次生成 150MB 对象数据之间调用 System.gc()。

在第三个示例中，jvm 在保持 System.gc() 开启的同时获得 3GB 内存空间。正如预期的那样，更多的内存提供了更多的性能。

但是当我在相同的 3GB 环境中关闭 System.gc() 时，它更快！

即使我们不能强制它，如果我们尝试足够长的时间，我们可以在尝试 System.g() 时获得一定百分比的性能提升或消耗。至少在我的带有最新 jvm 的 windows-7 64 位操作系统上。

![在此处输入图像描述](../Images/3790f6d199089882e95433193acaea7e.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T12:06:58.787

垃圾收集器自动运行。您不能强制垃圾收集器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T12:27:48.107

我不建议您这样做，但要强制垃圾收集器从您的 java 代码中运行，您可以使用所有可用内存，这是因为垃圾收集器将在 JVM 抛出 OutOfMemoryError 之前运行...

```
 try {
        List<Object> tempList = new ArrayList<Object>();
        while (true) {
            tempList.add(new byte[Integer.MAX_VALUE]);
        }
    } catch (OutOfMemoryError OME) {
       // OK, Garbage Collector will have run now...
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-21T05:42:19.637

我的回答会与其他人不同，但会导致同一点。说明：是的，可以同时使用两种方法强制垃圾收集器以相同的顺序使用：

System.gc();

System.runFinalization();

这两个方法调用将强制垃圾收集器执行任何无法访问的对象的 finalise() 方法并释放内存。但是软件的性能会显着下降，这是因为垃圾在他自己的线程中运行，并且无法控制，并且取决于垃圾收集器使用的算法可能会导致不必要的过度处理，最好是检查您的代码，因为它必须被破坏，您需要使用垃圾收集器以良好的方式工作。

注意：请记住，这仅在 finalize 方法中不是对象的重新分配时才有效，如果发生这种情况，对象将保持活动状态并且它将具有技术上可能的复活。

# html - 重定向非 IE 用户

> ID：14811367
> 
> 赞同：1
> 
> 时间：2013-02-11T11:59:40.593
> 
> 标签：html, internet-explorer

在我的标题中，我有：

```
<!--[if lte IE 8]>
<meta http-equiv="refresh" content="0; url=/ie-sucks" />
<script type="text/javascript">
    /* <![CDATA[ */
    window.top.location = '/ie-sucks';
    /* ]]> */
</script> 
```

上面的代码很容易将使用 < IE 8 的用户重定向到另一个地方`ie-sucks`

所以这工作正常，但我只是在检查用户，在他们重定向到 /ie-sucks 后，他们打开 Mozilla Firefox 并再次将 mysite.com/ie-sucks 复制粘贴到地址栏中，所以他们会再次遇到到那个页面...

我知道这很愚蠢，但是如果它们不低于 IE8 或使用其他浏览器，我需要将它们从该页面重定向到主站点...

我用这个修复了 IE 用户：

```
<!--[if !lte IE 8]> 
```

但此代码不适用于 Fiefox 用户...

我如何检测非 IE 用户并重定向他们？

预先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:06:45.743

你只是要把自己绑在结上做你想做的事。

如果用户使用的是 IE8 或更少（如您原来的条件语句），那么在您的页面顶部显示一条消息怎么样？

您的消息只会建议升级他们的浏览器或下载 Chrome、Firefox 或其他任何东西，并且还可以关闭/隐藏消息。

```
<!--[if lte IE 8]>
    .my-message {
        display: block;
    }
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:06:54.977

`<!--[if ... ]>`只会由 IE 处理，这就是诀窍。

对于重定向 Firefox 或其他浏览器，您最好通过用户代理分开（但请记住，更改用户代理非常简单！）。这可以使用 PHP 来完成，例如：

```
<?php

$useragent = $_SERVER['HTTP_USER_AGENT']; //get the user agent

if(!strpos($useragent, "MSIE")) {
  // user agents from IE should always look like this and include 'MSIE':
  // Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64)
  header("Location: http://example.com/");
}

?> 
```

通过像这样处理用户代理可能还有一种 JavaScript 方式：

```
if(navigator.userAgent.indexOf('MSIE') == -1) { ... 
```

但同样：请记住，也可能存在用户代理，其字符串中可能包含“MSIE”，或者使用 Internet Explorer 的用户，会将其更改为“Firefox”或其他。所以这不是一个故障安全的解决方案，但我想，这可能是你问题的答案。

PS：为什么有人要从 IE 条件条件下将 URL 复制到其浏览器并查看“此处不需要 IE”消息？任何这样做的人都应该知道，他并没有真正使用 IE，所以这不应该令人困惑。你有很多想法。您无法弄清楚其他人会做的所有行为；）

# image - Webmatrix 图片上传器（将质量更改为 72dpi）

> ID：14811368
> 
> 赞同：2
> 
> 时间：2013-02-11T11:59:44.663
> 
> 标签：image, image-processing, webmatrix, webmatrix-2

我目前正在 WebMatrix 中构建一个新网站，并已成功添加了使用图像助手上传和调整图像大小的功能。我的问题是，这个工具是否也有改变分辨率的功能？我担心人们会上传用高分辨率相机拍摄的照片，即使我调整了图像大小，它们的文件大小仍然很大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:46:43.023

WebImage 助手（如果您正在使用的话）不包含高级图像处理功能。保存图像后，您可以编写自己的代码来更改图像的分辨率 - 或者借用其他人已经编写的一些代码，例如[对同一主题的这个 SO 问题](https://stackoverflow.com/questions/4427059/how-to-change-resolution-dpi-of-an-image)的最高投票答案。

# javascript - 使用 windows.setTimeout 时参数丢失

> ID：14811373
> 
> 赞同：0
> 
> 时间：2013-02-11T12:00:00.697
> 
> 标签：javascript, parameters, reference, parameter-passing, settimeout

我想用 JavaScript 显示一个正在进行的数字。

为此，我开发了以下示例：

```
for(var i=0; i<100; i++) {
  window.setTimeout(function() {
    alert(i);
  },1000*i);
} 
```

不幸的是，每次都显示数字 100。我想是因为`i`是参考？

在参数传递中如何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:03:39.470

问题是 JS 不会等待并在超时到期之前继续完成循环。到那时，`i`已经是100了。

要解决此问题，您的超时应具有`i`. 这样，它不会引用到`i`那时已经 100 的 ，而是`i`在循环的那个时候引用。

```
for(var i=0; i<100; i++) {
  (function(i){
    //shadowing the loop-i with the function-i
    window.setTimeout(function() {
      //thus, this callback is referencing the i from the function
      //and not the loop's i
      alert(i);
    },1000*i);
  }(i));
} 
```

# powershell - 企业 Wiki 站点的类别 Web 部件灰显。Powershell 解决方案

> ID：14811376
> 
> 赞同：1
> 
> 时间：2013-02-11T12:00:08.267
> 
> 标签：powershell, sharepoint-2010

我对名为“Wiki Categories”的 Web 部件有疑问。在编辑模式下它是灰色的。我已阅读[此](http://blogs.msdn.com/b/sharepoint_2010/archive/2011/05/13/enterprise-wiki-site-has-categories-webpart-greyed-out.aspx)主题以解决问题，并且是正确的。但我需要通过 powershell 命令解决这个问题。我试着做和我在上面的主题中读到的一样的事情。因此，我将以下内容设置为 Wiki Categories 站点列：

```
$column.SspId = $SspId
$column.TermSetId = $TermSetId 
```

之后，如果我导航到站点设置 > 站点列 > Wiki 类别，我会看到现在使用该术语。但是 webpart 仍然是灰色的。我不知道为什么...

感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:14:29.853

我找到了为什么 webpart 仍然是灰色的。我只需要使用`SPField.Update`带有参数的方法`$true`。

以下是希望使用 sharepoint powershell 解决此问题的代码示例：

```
$web= Get-SPWeb your.sharepoint.site
$WikiCategory = "YourCategory" 
$ColumnName = "Wiki Categories"

$session = New-Object Microsoft.SharePoint.Taxonomy.TaxonomySession($site) 
$termStores = $session.TermStores

$SspId = $termStores[0].Id

function GetTermSetId($termStores) 
{ 
foreach ($termstore in $termStores[0].Groups) 
{ 
$TermSetId = $termstore.TermSets[$WikiCategory].Id 
return $TermSetId 
} 
}

$TermSetId = GetTermSetId($termStores)

$contentType = $web.ContentTypes["Enterprise Wiki Page"] 
$column = $web.Fields[$ColumnName] 
$fieldLink = New-Object Microsoft.SharePoint.SPFieldLink($column) $contentType.FieldLinks.Add($fieldLink) 
$contentType.Update()

$column.SspId = $SspId 
$column.TermSetId = $TermSetId 
$column.Required = $false 
$column.EnforceUniqueValues = $false 
$column.Group = "Custom Columns" 
$column.Update($true) 
$web.Update()
$web.Dispose() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T08:13:49.710

这可能是与彩信服务相关的错误。看看这里（网址[http://blogs.msdn.com/b/sharepoint_2010/archive/2011/05/13/enterprise-wiki-site-has-categories-webpart-greyed-out.aspx](http://blogs.msdn.com/b/sharepoint_2010/archive/2011/05/13/enterprise-wiki-site-has-categories-webpart-greyed-out.aspx)）看看它是否有帮助。

# regex - 正则表达式不匹配点字符

> ID：14811378
> 
> 赞同：0
> 
> 时间：2013-02-11T12:00:11.873
> 
> 标签：regex

如何使用正则表达式查找？

1) abc.def

2) abc.fg​​h.ijk

3) abc.m.nop.pqrs

我只想要第一个，它只包含一个点并以“abc”开头

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:01:55.447

使用与以 开头的字符串匹配的表达式，`abc.`然后是任何不是 a 的字符`.`：

```
^abc\.[^.]+$ 
```

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)是开始学习正则表达式的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:44:19.730

```
^abc\.\w+$ 
```

如果字符串以“abc”开头，则匹配。然后是直到字符串末尾的任何单词字符，不包括点。

# c# - 在 Crystal Reports 中设置 DataDefModel.PropertyBag 的连接属性以连接到 SQL Express 2005/2008

> ID：14811382
> 
> 赞同：1
> 
> 时间：2013-02-11T12:00:19.237
> 
> 标签：c#, .net, sql, crystal-reports, sql-server-express

我应该如何修改下面的代码，以便我可以使用这些连接属性连接到 Microsoft sql express 2005 或 2008 数据库

```
 CrystalDecisions.ReportAppServer.DataDefModel.PropertyBag connectionAttributes = new CrystalDecisions.ReportAppServer.DataDefModel.PropertyBag();
        connectionAttributes.EnsureCapacity(11);
        connectionAttributes.Add("Connect Timeout", "15");
        connectionAttributes.Add("Data Source", serverName);
        connectionAttributes.Add("General Timeout", "0");
        connectionAttributes.Add("Initial Catalog", databaseName);
        connectionAttributes.Add("Integrated Security", false);
        connectionAttributes.Add("Locale Identifier", "1033");
        connectionAttributes.Add("OLE DB Services", "-5");
        connectionAttributes.Add("Provider", "SQLOLEDB");
        connectionAttributes.Add("Tag with column collation when possible", "0");
        connectionAttributes.Add("Use DSN Default Properties", false);
        connectionAttributes.Add("Use Encryption for Data", "0");

        DbConnectionAttributes attributes = new DbConnectionAttributes();
        attributes.Collection.Add(new NameValuePair2("Database DLL", "crdb_ado.dll"));
        attributes.Collection.Add(new NameValuePair2("QE_DatabaseName", databaseName));
        attributes.Collection.Add(new NameValuePair2("QE_DatabaseType", "OLE DB (ADO)"));
        attributes.Collection.Add(new NameValuePair2("QE_LogonProperties", connectionAttributes));
        attributes.Collection.Add(new NameValuePair2("QE_ServerDescription", serverName));
        attributes.Collection.Add(new NameValuePair2("SSO Enabled", false));

        ConnectionInfo connectionInfo =GetConnectionInfo(serverName, databaseName, userID, password);
        connectionInfo.Attributes = attributes;
        connectionInfo.Type = ConnectionInfoType.SQL; 
```

# android - Android Facebook SDK 3.0 - 如何以其他用户身份登录？

> ID：14811383
> 
> 赞同：2
> 
> 时间：2013-02-11T12:00:18.683
> 
> 标签：android, facebook, logout, facebook-android-sdk

我在我的应用程序中使用适用于 Android 的官方 Facebook SDK 3.0。我希望能够在我的应用程序中以不同用户的身份断开连接并重新连接。对于注销，我使用以下代码：

```
mSession.closeAndClearTokenInformation(); 
```

这是登录代码：

```
Session.openActiveSession(this, true, statusCallback); 
```

当我尝试重新连接时，我看不到 facebook 登录活动，但我在用户注销时登录。我怎样才能真正能够注销并随后以另一个用户身份登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:51:54.137

尝试关闭活动会话 onDestroy 方法或尝试类似这样的方法

```
public void onDestroy() {
        this.closeSession();
        super.onDestroy();
    } 
```

# c# - 在使用 json.net 生成 JSON 模式时向属性添加描述

> ID：14811386
> 
> 赞同：4
> 
> 时间：2013-02-11T12:00:22.757
> 
> 标签：c#, json.net

是否可以向属性添加描述属性？

我正在使用 json.net 生成架构：

```
var shema = new Newtonsoft.Json.Schema.JsonSchemaGenerator();
var sh = shema.Generate(typeof(APIDocumentation.AlertDTO), false).ToString(); 
```

我想为用户添加一些简单的文档以了解每个字段的含义。现在我可以使用 [JsonObject(Description = "my description")] 向类添加描述属性，但它不能与类内的属性一起使用。有没有可能做类似的事情：

```
[JsonObject(Description = "My description")]
public class AlertDTO
{
    [SomeAttribute(Description="Property description")]
    public string Type { get; set; }

} 
```

或者也许有一种方法可以获取 VS 风格的注释并将它们添加到 JSON 模式中作为描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-18T03:55:35.070

您可以使用 System.ComponentModel 命名空间中的 Description 属性。

我花了一段时间才找到，但文档中有一个示例：[https ://www.newtonsoft.com/jsonschema/help/html/GenerateWithDescriptions.htm](https://www.newtonsoft.com/jsonschema/help/html/GenerateWithDescriptions.htm)

# html - HTML5 拖动内容

> ID：14811389
> 
> 赞同：1
> 
> 时间：2013-02-11T12:00:34.690
> 
> 标签：html, drag-and-drop, draggable

我想使用 HTML5 原生拖动。我想拖动一个项目及其内容。

例如：

```
<div draggable="true">
    <div>
      1
    </div>
    <div>
      2
    </div>
    <div>
      3
    </div>
</div> 
```

这只会将包含的 div 拖空。

如何告诉它拖动 div 及其所有内容？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T12:56:17.227

您可以使用 j 查询 ui 可拖动而不是 HTML5 可拖动。它易于使用，您可以在这些库中找到许多选项。

在这里找到示例 [http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)

# substring - 如何获得具有多个条件的字符串

> ID：14811392
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:00:58.630
> 
> 标签：substring

```
 192.168.152.152 - - [22/Jan/2013:10:01:03 +0700] "GET / HTTP/1.1" 200 485 "-" "
 Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" 
```

这是来自服务器的访问日志示例

你能帮我吗 ？我如何从上面的字符串中获取信息？我想获得IP，时间等谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:04:21.567

Ip Whois 可能有您正在寻找的信息

[http://www.whatismyip.com/ip-tools/ip-whois-lookup/](http://www.whatismyip.com/ip-tools/ip-whois-lookup/)

# android - PhoneGap Android 一些图像显示在浏览器上，但不在模拟器中

> ID：14811394
> 
> 赞同：2
> 
> 时间：2013-02-11T12:01:07.170
> 
> 标签：android, image, cordova

我正在开发 android phonegap 应用程序。它有大约 65 张图片（每张大约 10kb 大小）。我的应用程序在 Ripple chrome 插件以及 Chrome 和 FF 浏览器上按预期工作。但是当我在模拟器上加载它时，一些图像无法加载。

我附上了截图供参考。 ![一些图像丢失。](../Images/6a0ecfc08603b34ddd52c588d611e28c.png) ![为 chrome 开发波纹插件](../Images/21bc237b7f0cfcd10c1c3fdfc78d6b38.png) ![在浏览器上工作](../Images/87b3ed6558c3748d577e03c7e6eafb1a.png)

我尝试使用[jQuery 预加载插件](http://www.jquery4u.com/plugins/preload-image-plugins/)，但没有运气。

谁能帮帮我！谢谢

**编辑：** 我在 iPhone 和 WindowsPhone7 上尝试了相同的代码，没有任何更改，图像在两个平台上都显示得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:20:57.530

尝试创建一个相同的图像副本（例如**../image_copy1** .png），然后换掉该代码以代替不起作用的图像位置。

有时，由于数据的本地缓存或模拟器程序本身的实际逻辑错误，模拟器程序会因文件路径而崩溃。Dreamweaver 也有类似的问题，许多其他开发/测试套件也有类似的问题 - 图像的本地缓存并不是一个不常见的问题。有时，您可以通过上传所需文件的副本（但不在程序本身内复制它）来规避此问题 - 导致新的、非缓存的上传。*这绝不是一个“正确”的解决方案*，但对于有缺陷的 emu/dev 程序来说，它是一种快速而肮脏的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T13:10:11.497

如果您从外部来源加载图像，您可能需要将来源“列入白名单”。您是否将域名添加到 Cordova 配置文件中？它位于 res/xml/config.xml 下

```
<access origin="www.example.com" /> 
```

我知道跨域 AJAX 请求是必需的，但不确定图像，您可以尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:29:02.447

帮不上什么忙。

模拟器有时会胡思乱想。

我多次面临这个问题。

充其量，您可以尝试创建另一个 avd-image ......但至少我不能保证它会起作用。

# haskell - type和newtype的编译时间和运行时间的区别

> ID：14811396
> 
> 赞同：6
> 
> 时间：2013-02-11T12:01:10.780
> 
> 标签：haskell, types

`type`在读取-编译-运行管道的各个阶段，声明和声明之间有什么区别`newtype`？

我的假设是它们编译成相同的机器指令，唯一的区别是程序被类型检查时，例如

```
type    Name  =   String
newtype Name_ = N String 
```

您可以在需要 a 的`Name`任何地方使用 a `String`，但如果您在预期 a 的`Name_`地方使用 a，类型检查器会告诉您`String`，即使它们编码相同的信息。

我问这个问题是因为，如果是这种情况，我看不出以下声明无效的任何理由：

```
type    List a  =    Either () (a, List a)
newtype List_ a = L (Either () (a, List_ a)) 
```

但是，类型检查器接受第二个但拒绝第一个。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:46:25.667

Luqui的评论应该是一个答案。Haskell 中的类型同义词首先近似于宏。也就是说，它们被类型检查器扩展为完全评估的类型。类型检查器无法处理无限类型，因此 Haskell 没有等递归类型。

`newtypes`为您提供等递归类型，在 GHC 中，这些类型基本上可以编译为核心语言中的等递归类型。Haskell 不是 GHC 核心，因此您无权访问此类类型。对于类型检查器和人类来说，等递归类型更难使用，而等递归类型具有同等的能力。

# javascript - 延迟动画直到其他动画完成（滑动内容（

> ID：14811397
> 
> 赞同：0
> 
> 时间：2013-02-11T12:01:13.113
> 
> 标签：javascript, jquery, slidetoggle

我有这段代码，它在 div 之间滑出动画。如果一个项目被点击，它的相关内容就会滑出。如果单击另一个项目，则当前内容滑入并滑出新内容。

然而，

```
var lastClicked = null;
var animateClasses = ['ale', 'bramling', 'bullet', 'miami-weisse'];
   for (var i=0; i<animateClasses.length; i++) {
      (function(animCls) { 
      $('.each-brew.'+animCls).toggle(function() {
    if (lastClicked && lastClicked != this) {
        // animate it back
        $(lastClicked).trigger('click');
    }
    lastClicked = this;
    $('.each-brew-content.'+animCls).show().animate({ left: '0' }, 1000).css('position','inherit');
      }, function() {
           $('.each-brew-content.'+animCls)
                  .animate({ left: '-33.3333%' }, 1000, function() { $(this).hide()})  // hide the element in the animation on-complete callback
                  .css('position','relative'); 
      });
      })(animateClasses[i]);  //  self calling anonymous function
   } 
```

但是，一旦已经打开的内容滑回，内容滑出的速度太快了——它需要等到内容完全滑回后才能滑出。这可能吗？

这是我目前正在研究的一个链接（[http://goo.gl/s8Tl6](http://goo.gl/s8Tl6)）。

提前干杯，R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T04:09:55.310

这是我将其作为没有标记更改的直接替代品的看法。您希望在单击菜单项时发生以下三种情况之一：

1.  如果单击的项目当前正在显示，请将其隐藏
2.  如果正在显示其他内容，请将其隐藏，然后显示当前项目的内容
3.  如果没有显示，则显示当前项目的内容

* * *

```
var lastClicked = null;
// here lastClicked points to the currently visible content
var animateClasses = ['ale', 'bramling', 'bullet', 'miami-weisse'];
   for (var i=0; i<animateClasses.length; i++) {
      (function(animCls) {
          $('.each-brew.'+animCls).click(function(event){
              if(lastClicked && lastClicked == animCls){
                  // if the lastClicked is `this` then just hide the content
                  $('.each-brew-content.'+animCls).animate(
                                          { left: '-33.3333%' }, 1000,
                                          function() {
                                              $(this).hide();
                                          }).css('position','relative');
                  lastClicked = null;
              }else{
                  if(lastClicked){
                      // if something else is lastClicked, hide it,
                      //then trigger a click on the new target
                      $('.each-brew-content.'+lastClicked).animate(
                                          { left: '-33.3333%' }, 1000,
                                          function() {
                                              $(this).hide();
                                              $(event.target).trigger('click');
                                          }).css('position','relative');
                      lastClicked = null;
                  }else{
                      // if there is no currently visible div,
                      // show our content
                      $('.each-brew-content.'+animCls).show()
                                        .animate({ left: '0' }, 1000)
                                        .css('position','relative');
                    lastClicked = animCls;
                  }
              }
          });
      })(animateClasses[i]);  //  self calling anonymous function
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:40:43.607

好吧，我很确定还有其他更简单的可能性，我没有太多时间，但这里有一个工作 jsfiddle：http: [//jsfiddle.net/uaNKz/](http://jsfiddle.net/uaNKz/)

基本上，您使用该`callback`功能等待动画完成。在这种特殊情况下，它是`complete: function(){...}`

```
$("document").ready(function(){
    $('#ale').click(function(){
        if ($('div').hasClass('toggled')){
          $('.toggled').animate({ width: "toggle" }, { duration:250, complete: function(){
            $('#alecont').animate({ width: "toggle" }, { duration:250 }).addClass('toggled');}
          }).removeClass('toggled');
        }else{
          $('#alecont').animate({ width: "toggle" }, { duration:250 }).addClass('toggled');
        }
    });
  $('#bramling').click(function(){
    if ($('div').hasClass('toggled')){
      $('.toggled').animate({ width: "toggle" }, { duration:250, complete: function(){
        $('#bramcont').animate({ width: "toggle" }, { duration:250 }).addClass('toggled');}
      }).removeClass('toggled');
    }else{
      $('#bramcont').animate({ width: "toggle" }, { duration:250 }).addClass('toggled');
    }
  });
}); 
```

`toggled`如果 div 展开，我会上课。由于您页面上的动画似乎已损坏，我认为这将是一种更好的方法。但请记住：我的代码不是很好。很快，它可以被重构。它正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T01:55:49.610

不要使用切换，而是将“点击”处理程序绑定到您的“.each-brew”div。在处理程序中，首先隐藏内容 div，然后在该动画完成时显示适当的内容。您可以通过承诺或回调来做到这一点。像这样的东西...

```
 $(".each-brew").on("click", function (event) {
      $(".each-brew-content").show().animate({ left: "0" }, 1000, function() {
          // Get the brew name from the class list. 
          // This assumes that the brew is the second class in the list, as in your markup.
          var brew = event.currentTarget.className.split(/\s+/)[1];
          $(".each-brew-content." + brew).animate({ left: "-33.3333%" }, 1000, function() { $(this).hide(); });
      });
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T04:33:56.690

我认为事件和观察者会为您解决问题。

在动画完成时设置回调函数以触发事件。

侦听器将首先侦听任何动画事件，然后在触发该事件后侦听完成事件。当完成事件被触发时，执行初始动画 event.run 方法（或任何你想调用的方法）

在 newanimationeventtriger(new_anim) 上的侦听器中等待 x 秒（以消除无限循环 poss），而如果这个 lastevent 触发 done == true{ new_anim.run(); }

# ajax - 使用 Ajax 在 asp razor 中提交表单

> ID：14811400
> 
> 赞同：1
> 
> 时间：2013-02-11T12:01:16.967
> 
> 标签：ajax, asp.net-mvc-3, razor

我在 asp razor 中提交表单时遇到问题。我正在使用 Ajax。我有收藏，我正在为其中的每个元素制作一个表格。我想再次传递一个已提交元素的 ID。这是我的代码：

```
@for(int i=0; i < Model.Models.Length; i++)
{

string s = "metriceDiv" + Model.Models[i].Id;
using (Ajax.BeginForm("Bookmark", "Metrice", new AjaxOptions
{
    HttpMethod = "Get",
    UpdateTargetId = "metriceDiv" + Model.Models[i].Id,
    InsertionMode = InsertionMode.Replace
}))
{ 
    <div id="@s">
    <br />
    <table>
<tr>
    <th>
            @Html.HiddenFor(model => model.Models[i].Id)
            <input type="submit" value="Bookmark"  />
    </th>
    </tr>
</table>
</div> 
```

它仅在我提交第一个元素时才有效。每个其他元素都给我模型中的 null 。我该怎么做才能获得任何元素的 ID？我可以将此值放入模型中的附加字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-25T14:18:30.057

尝试为所有元素设置一个 id 并再次检查是否为 null。你的 hiddenFor 用它编辑：

```
@Html.HiddenFor(model => model.Models[0].Id) 
```

# c++ - 对 RTTI raw_name() 的好奇

> ID：14811401
> 
> 赞同：1
> 
> 时间：2013-02-11T12:01:17.467
> 
> 标签：c++, visual-studio, rtti, typeinfo

查看 C++ RTTI 和 type_info 类时，我有时会发现一个被调用的方法的描述，该方法`raw_name()`用于返回类的解组名称。我在 g++ 中找不到任何实现，只有方法`name()`。您知道这是否是仅针对 Visual Studio/MS 的实现，以及是否是 C++ 标准的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:05:18.103

一个快速的谷歌将向您展示`raw_name()`仅由 Microsoft 记录的内容。它不是 C++ 的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:05:34.147

它是**特定于实现**的，`type_info`在标准中定义：

**C++03 标准：18.7.1 类 type_info：**

```
namespace std {
class type_info {
public:
virtual ~type_info();
bool operator==(const type_info& rhs) const noexcept;
bool operator!=(const type_info& rhs) const noexcept;
bool before(const type_info& rhs) const noexcept;
size_t hash_code() const noexcept;
const char* name() const noexcept;
type_info(const type_info& rhs) = delete; // cannot be copied
type_info& operator=(const type_info& rhs) = delete; // cannot be copied
};
} 
```

如您所见`raw_data`，它**不是**标准定义的类成员。

# c# - 如何将 dll 文件添加到 C# 项目并正确使用它们？

> ID：14811405
> 
> 赞同：2
> 
> 时间：2013-02-11T12:01:27.483
> 
> 标签：c#, dll, xna, xna-4.0

我需要将 dll 文件（XNA 框架）添加到 C# 项目中，然后才能正确使用它们。这样我就可以将我的解决方案发送给另一个没有安装 XNA 并且仍然可以编译和运行项目的人。

我正在尝试将其作为测试的一部分，我需要编写一个游戏，然后将代码发送给一个标记它的人。我被允许使用公共库，但该项目必须在没有标记部分的任何额外步骤的情况下编译。

如有任何额外信息，请随时询问。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:07:09.407

最佳做法是创建一个名为“lib”的文件夹解决方案，并将项目中使用的所有库添加到该文件夹​​中。是的，如果您重新分配您的解决方案路径将匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:14:36.463

你也可以使用 NuGet（如果你有 VS 2010+）。您将需要修改“包”文件夹的存储位置。

为此，请查看此链接：[是否可以更改 NuGet 包的位置？](https://stackoverflow.com/questions/4092759/is-it-possible-to-change-the-location-of-packages-for-nuget)

这样做的好处是，当软件包有可用更新时，您会被告知。

# mysql - 虚构的 MySQL 字段

> ID：14811415
> 
> 赞同：2
> 
> 时间：2013-02-11T12:01:56.787
> 
> 标签：mysql, sql

我可以在我的 MySQL 查询中组成虚构的字段吗？

```
Select permission, value
from permissions 
```

没有`permission`字段，但我想分配`true`给它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:04:36.140

```
SELECT 'true' permission, value
FROM   permissions 
```

将返回一个字符串值，或者，

```
SELECT 1 permission, value
FROM   permissions 
```

或者

```
SELECT true permission, value  -- which is equivalent to 1
FROM   permissions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:04:49.163

你必须给你的假想场一个名字，然后你可以给它赋值。例如名称是`permission`，值是`true`：

```
Select true as permission, ...
from permissions 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:04:56.663

尝试：

```
SELECT "true" AS permission, value from permissions 
```

# xml - 是否有任何 .NET / JS 框架用于基于 XML 模式生成 Web 前端？

> ID：14811416
> 
> 赞同：1
> 
> 时间：2013-02-11T12:02:00.547
> 
> 标签：xml, web, webforms, schema, dynamically-generated

我正在用 ASP.NET 和 JS 构建一个站点，它允许用户基于 . XML 模式将是动态的，因此需要基于此生成表单并包括与模式限制匹配的客户端验证。有没有可用的框架可以帮助我解决这个问题？

非常感谢您的帮助

# outlook-2007 - 展望 2007 位数

> ID：14811420
> 
> 赞同：0
> 
> 时间：2013-02-11T12:02:15.757
> 
> 标签：outlook-2007, email-headers

我需要获取 Outlook 的位数，在 2010 年它存储在路径下名为 Bitness 的 ReqistryKey

64 位 Windows：
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\14.0\Outlook\Bitness
32 位 Windows：
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Outlook\Bitness

在 2007 年，这些键不存在，因此我检索了一个空引用异常。
我的问题是，如何在 Outlook 2007 中获得位数？我需要设置标题，所以我必须使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:44:22.703

Outlook 2007 没有 64 位版本。如果它正在使用，那么它是 32 位版本。

# javascript - 如何使用 javascript 读取和删除 Cookie？

> ID：14811421
> 
> 赞同：1
> 
> 时间：2013-02-11T12:02:20.643
> 
> 标签：javascript, cookies

allCookies 包含我的浏览器 Cookie 列表。我想用这个函数 delCookie() 删除 Cookie，但它只是删除第一个 Cookie，而不是其他 Cookie。我该怎么做才能更新 cookie ？？？

```
<input type="button" value="DElete" onclick="delCookie()">
    <input type="button" value="Update" onclick="modCookie()">

<select multiple id="allCookies" size="5">
        <!-- Cookies content-->
    </select><br>

 function delCookie() {
    if (confirm('Are u sure?')) {
        var e = document.getElementById("allCookies");
        var strUser = e.options[e.selectedIndex].value;
        document.cookie = encodeURIComponent(strUser) + "=deleted; expires=" + new Date(0).toUTCString();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:54:30.123

> 它只是删除第一个 Cookie，而不是其他 cookie。

元素的`selectedIndex`属性仅返回**第一个**选定选项的索引。要在一个选择中检查所有这些，您需要迭代选项集合：`<select>`**`multiple`**

 **```
var os = document.getElementById("allCookies").options;
for (var i=0; i<os.length; i++) {
    if (os[i].selected) {
        var strUser = os[i].value;
        …
    }
} 
```

> 我该怎么做才能更新 cookie ？？？

只需覆盖 cookie，即使用与创建它们时相同的方法。**

# matlab - 如何根据某些标准删除 Matlab 中的矩阵行？

> ID：14811423
> 
> 赞同：3
> 
> 时间：2013-02-11T12:02:26.137
> 
> 标签：matlab, matrix

在 Matlab 中，如何从我需要的矩阵中删除特定行？例如，如果我想从包含特定值（如 0 或 NaN）的矩阵中删除所有行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:07:53.823

假设你有`A`

```
A = [1 2 3;4 5 0; 7 8 9; 10 NaN 12]

A =

     1     2     3
     4     5     0
     7     8     9
    10   NaN    12 
```

然后，您可以按如下方式选择行：

```
any(isnan(A'))

ans =

     0     0     0     1 
```

要删除那些`NaN`包含行，您可以执行以下操作：

```
A(any(isnan(A')),:) = []

A =

     1     2     3
     4     5     0
     7     8     9 
```

您可以通过 选择`0`- 包含的行`any(A' == 0)`。如果您希望所有元素都是`0`s 或`NaN`s，那么您可以使用`all`代替`any`.

# objective-c - 使用 SMLoginItemSetEnabled，应用程序不显示在“登录项”下

> ID：14811425
> 
> 赞同：5
> 
> 时间：2013-02-11T12:02:43.480
> 
> 标签：objective-c, xcode, macos

我正在使用[`SMLoginItemSetEnabled`](https://stackoverflow.com/questions/7436318/how-to-create-a-helper-application-for-mac-app-to-start-it-on-user-login/8144632#8144632)登录时启动应用程序。一切正常，除了应用程序没有显示在“用户首选项”窗口的“登录项目”下。我已经在 OS X Lion 中尝试过这个。

1.  这是预期的行为吗？
2.  有没有办法手动阻止应用程序在登录时启动？`/Library/LaunchDaemons`我在or中找不到任何东西`/Library/LaunchAgents`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T04:53:34.270

这是预期的行为。 [Apple 守护进程和服务编程指南](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html#//apple_ref/doc/uid/10000172i-SW5-BAJJBJEG)说：

> 使用服务管理框架安装的登录项在系统偏好设置中不可见，只能由安装它们的应用程序删除。

* * *

是的，只需在 launchd 的 overrides.plist 中将您的包标识符的 Disabled 更改为 true。我给你写了一个命令来做到这一点：

```
/usr/libexec/PlistBuddy -c 'Set :com.yourcompany.helper-CFBundleIdentifier-here:Disabled true' /var/db/launchd.db/com.apple.launchd.peruser.$UID/overrides.plist 
```

*   注意：将 com.yourcompany.helper-CFBundleIdentifier-here 替换为您的 BundleIdentifier。

# ruby-on-rails - Ruby on rails3 上可用于大型应用程序的不同日志记录机制

> ID：14811428
> 
> 赞同：-4
> 
> 时间：2013-02-11T12:02:53.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

对于可能需要 log4j 之类的庞大应用程序，我需要一个关于可用的最佳日志记录机制的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:08:01.210

Rails 已经带有一个记录器。当然，您可以将它替换为另一个记录器，Log4r（与 log4j 有很多相似之处）可能是一个不错的选择。但是，如果您能在提出单行问题之前再详细说明一下，那就太好了。无论如何，这是一个很好的起点：

[http://guides.rubyonrails.org/debugging_rails_applications.html](http://guides.rubyonrails.org/debugging_rails_applications.html)

第 2 章介绍（内置 Ruby）记录器。

# php - PEAR 无法在 Ubuntu 12.x 上安装

> ID：14811429
> 
> 赞同：1
> 
> 时间：2013-02-11T12:02:54.127
> 
> 标签：php, ubuntu, wrapper, pear, channel

我有一个我认为可以用 Ubuntu 12.10 解决的问题，但没有运气......当我尝试用 PEAR 安装某些东西时，我在 12.04 中遇到了同样的问题：

```
Warning: file_exists(): Unable to find the wrapper "channel" - did you forget to enable it when you configured PHP? in Package.php on line 1518
PHP Warning:  file_exists(): Unable to find the wrapper "channel" - did you forget to enable it when you configured PHP? in /usr/share/php/PEAR/Downloader/Package.php on line 1518
PHP Stack trace:
PHP   1\. {main}() /usr/share/php/pearcmd.php:0
PHP   2\. PEAR_Command_Common->run() /usr/share/php/pearcmd.php:305
PHP   3\. PEAR_Command_Install->doInstall() /usr/share/php/PEAR/Command/Common.php:271
PHP   4\. PEAR_Downloader->download() /usr/share/php/PEAR/Command/Install.php:661
PHP   5\. PEAR_Downloader_Package->initialize() /usr/share/php/PEAR/Downloader.php:279
PHP   6\. PEAR_Downloader_Package->_fromFile() /usr/share/php/PEAR/Downloader/Package.php:160
PHP   7\. file_exists() /usr/share/php/PEAR/Downloader/Package.php:1518 
```

对于此示例，我尝试安装 PHPUnit，但它与任何包的消息相同。

我对此进行了很多搜索并尝试了许多解决方案：

*   使用 apt-get remove 卸载它
*   用 apt-get purge 清除它
*   手动删除剩余文件
*   安装然后升级它

有人知道如何解决这个问题吗？

谢谢！

> ***编辑 ：***
> 
> 总是一样的，当你发布你的问题时，答案就会弹出！
> 
> 这是做到这一点的技巧的链接：[https://stackoverflow.com/a/6596669/2061163](https://stackoverflow.com/a/6596669/2061163)
> 
> 出现这个问题是因为我的系统上安装了两个版本的 PEAR，不知道为什么...

# maven - 如何让我的父 pom 输出 tar.gz 文件

> ID：14811430
> 
> 赞同：0
> 
> 时间：2013-02-11T12:02:54.727
> 
> 标签：maven, tar

我有一个父 pom 和子 pon，当我在父 pom 上运行 mvn clean 包时，我得到了 .jar 文件，有没有办法将其更改为 tar.gz 文件？对于我创建了 assembly.xml 文件以指定 tar.gz 文件的子文件，我需要对父 pom 执行相同的操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:49:07.357

指定 POM 包装：

```
<packaging>pom</packaging> 
```

我有点惊讶您的父 POM 在没有该设置的情况下工作。在创建新的父 POM 并忘记将包装从 jar（默认）更改为 POM 之前，我收到了来自 Maven 的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:52:30.137

父母并不是真的要生产除 pom 以外的工件。

您可以尝试将程序集插件附加到诸如`process-resources`或其他的阶段，并尝试将其打包您想到的任何资源，但是...通常，将资源保留在父级中并不是一个好主意。

如果扩展此父项的项目未定义`<packaging/>`，则它们的包装将默认为`pom`.

# php - PHP in_array 比较在不同机器上的工作方式不同

> ID：14811433
> 
> 赞同：11
> 
> 时间：2013-02-11T12:03:05.827
> 
> 标签：php, arrays

请查看以下代码，它在不同的机器上给出不同的结果：

```
$data = array(
    "28000000000000003" => 'ABC',
    "28000000000000001" => 'PQR'
);

echo "1.".in_array("28000000000000003",array_keys($data),true);

echo "2.".in_array("28000000000000003",array_keys($data));

echo "3.".in_array("28000000000000003",array("28000000000000003","28000000000000001"),true);

echo "4.".in_array("28000000000000003",array("28000000000000003","28000000000000001")); 
```

正如预期的那样，我们本地服务器上所有 4 个案例的结果都是正确的，而在第一个案例的生产服务器上，它给出了错误的结果，而在其余三个案例中它给出了正确的结果

谁能帮我理解到底发生了什么？从配置的角度来看，我错过了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T14:16:27.090

它很简单....让我猜你的开发系统是windows，你的生产服务器是linux？

您遇到整数溢出问题，因为您的 Windows 版本的 PHP 很可能是 32 位，而 linux 是 64 位

[请参阅数组键转换的条件](http://www.php.net/manual/en/language.types.array.php)

*   包含有效整数的字符串将被转换为整数类型。例如，键“8”实际上将存储在 8 下。另一方面，“08”不会被强制转换，因为它不是有效的十进制整数。
*   浮点数也被转换为整数，这意味着小数部分将被截断。例如，密钥 8.7 实际上将存储在 8 之下。
*   布尔值也被转换为整数，即键 true 将实际存储在 1 下，而键 false 将存储在 0 下。
*   Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。数组和对象不能用作键。这样做会导致警告：非法偏移类型。

那么会发生什么：

所以密钥在系统上`28000000000000003`是有效`integer`的，`64bit`但`String`在`32bits`系统上是有效的

[我能够复制您的问题](http://codepad.viper-7.com/P1AYGn)

```
echo "<pre>";
$data = array("28000000000000003" => 'ABC',"28000000000000001" => 'PQR');
$keys = array("28000000000000003","28000000000000001");
$keysDerived = array_keys($data);

var_dump(in_array("28000000000000003", $keysDerived, true));
var_dump(in_array("28000000000000003", $keysDerived));
var_dump(in_array("28000000000000003", $keys, true));
var_dump(in_array("28000000000000003", $keys)); 
```

[输出](http://codepad.viper-7.com/P1AYGn)

```
bool(false)    <----------------------- false instead of true 
bool(true)
bool(true)
bool(true) 
```

这个问题与示例无关，`in_array`而是`array_keys`示例

[**示例代码**](http://codepad.viper-7.com/mDrGjb)

```
echo "<pre>"; 
$data = array("28000000000000003" => 'ABC',"28000000000000001" => 'PQR');
$keys = array("28000000000000003","28000000000000001");
$keysDerived = array_keys($data);
var_dump($keys,$keysDerived); 
```

[**输出**](http://codepad.viper-7.com/mDrGjb)

```
array(2) {
  [0]=>
  string(17) "28000000000000003"    <------- Keys are String
  [1]=>
  string(17) "28000000000000001"
}
array(2) {
  [0]=>
  int(28000000000000003)           <------- They are converted to int on 64bits
  [1]=>
  int(28000000000000001)
} 
```

[见在线演示](http://codepad.viper-7.com/mDrGjb)

这意味着它们不是同一类型...

> [in_array](http://php.net/manual/en/function.in-array.php) bool in_array ( 混合 $needle , array $haystack [, bool $strict = FALSE ] )
> 
> 如果第三个参数**strict**设置为**TRUE**，那么 in_array() 函数还将检查**haystack 中的 needle 类型**。

**[如果您运行此代码](http://codepad.viper-7.com/Qtq53x)**

```
foreach ( $keys as $key ) {
    echo gettype($key) . "\n";
}

foreach ( $keysDerived as $key ) {
    echo gettype($key) . "\n";
} 
```

[输出](http://codepad.viper-7.com/Qtq53x)64Bits

```
string
string
integer
integer 
```

输出 32Bits

```
string
string
string
string 
```

[**简单的解决方法**](http://codepad.viper-7.com/AwJlzn)

```
echo "<pre>";
$data = array("28000000000000003" => 'ABC',"28000000000000001" => 'PQR');
$keys = array("28000000000000003","28000000000000001");
$keysDerived = array_keys_string($data);
var_dump($keys,$keysDerived);

var_dump(in_array("28000000000000003", $keysDerived, true));
var_dump(in_array("28000000000000003", $keysDerived));
var_dump(in_array("28000000000000003", $keys, true));
var_dump(in_array("28000000000000003", $keys)); 
```

[输出](http://codepad.viper-7.com/AwJlzn)

```
array(2) {
  [0]=>
  string(17) "28000000000000003"
  [1]=>
  string(17) "28000000000000001"
}
array(2) {
  [0]=>
  string(17) "28000000000000003"
  [1]=>
  string(17) "28000000000000001"
}
bool(true)
bool(true)
bool(true)
bool(true) 
```

[查看原始代码](http://codepad.viper-7.com/jMErED) [查看修改后的代码](http://codepad.viper-7.com/AwJlzn)

使用的功能

```
function array_keys_string(array $input) {
    $list = array();
    foreach ( $input as $k => $v ) {
        $list[] = (string)$k;
    }
    return $list;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T13:37:37.750

您的本地服务器是 32 位的，而生产服务器是 64 位的。

[PHP 文档](http://www.php.net/manual/en/language.types.array.php)说，在定义数组字面量时，键将被强制转换：

> 包含有效整数的字符串将被转换为整数类型。例如，密钥“8”实际上将存储在 8 之下。

因此，如果您尝试以下代码：

```
var_export(array("5" => "test")); 
```

您将看到结果是一个带有数字键的数组`5`，而不是字符串键`"5"`。

在您的情况下，您有大数字字符串作为键。在 32 位机器上，数字`28000000000000003`超过了可能的最大整数值 ( `PHP_INT_MAX`)，因此数组键将保持为字符串，这就是在本地服务器上发生的情况。另一方面，在 64 位机器上，最大整数要大得多，并且`"28000000000000003"`被强制转换为`integer`，这就是您的生产服务器上发生的情况。

因此，在 64 位生产服务器上运行时，`array_keys($data)`返回整数数组。当您在第一个测试用例中尝试使用严格比较在其中找到一个字符串时，您会得到`FALSE`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T12:14:31.227

您可以尝试使用`array_key_exists()`. 关联数组键的长度有一些限制。查看链接获取详细帮助[PHP 关联数组的键（索引）限制？](https://stackoverflow.com/questions/9496612/php-associative-arrays-keys-indexes-limitations)

您可以增加密钥内存限制。利用`ini_set('memory_limit', '1024M');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T12:16:28.563

**问题**：如果您有长整数键，例如“329462291595”，它们将在 64 位系统上被视为**此类**，但在 32 位系统上将是**字符串类型。**

因此该函数`array_keys($data)`将在 64 位系统中返回 int，在 32 位系统中返回字符串

**解决方案**：将所有转换`array_keys($data)`为字符串。然后`in_array("28000000000000003",array_keys($data),true);`使用第三个参数`true`（用于严格检查）

```
function array_keys_string($arr){
    $arr_keys      = array_keys($arr);
    $res_arry      = array();
    foreach($arr_keys as $val){
       $res_arry[] = (string)$val;
    }
    return $res_arry;
}

echo "1.".in_array("28000000000000003",array_keys_string($data),true); 
```

这将在两台服务器上为您提供相同的结果。

**请参阅以下链接**：

参考：[http ://www.php.net/manual/en/function.array-keys.php#105578](http://www.php.net/manual/en/function.array-keys.php#105578)

[来自](http://www.php.net/manual/en/function.in-array.php)php.net：http://www.php.net/manual/en/function.in-array.php

```
<?php
$a = array('1.10', 12.4, 1.13);

if (in_array('12.4', $a, true)) {
    echo "'12.4' found with strict check\n";
}

if (in_array(1.13, $a, true)) {
    echo "1.13 found with strict check\n";
}
?> 
```

上面的例子会输出： 1.13 found with strict check

# django - Django request.breadcrumb 不会显示路径是否为“#”

> ID：14811436
> 
> 赞同：0
> 
> 时间：2013-02-11T12:03:15.803
> 
> 标签：django

```
request.breadcrumbs((
    ('Home', '#'),
    ('BedRoom', request.path_info),
    ('desk', '#')
    )) 
```

上面的代码显示了 um 计划使用的面包屑层次结构如果我省略 request.pathinfo 它不会在第一个 leven 之后显示 Ex : - Home > BedRoom > 我想我错过了一些东西。

# vim - 写不出来 . 使用 eclim 时

> ID：14811442
> 
> 赞同：1
> 
> 时间：2013-02-11T12:03:31.563
> 
> 标签：vim, eclim

当我尝试写作`import org.junit.Test`时，就在我完成写作时`import.jun`，它会将其转换（自动完成）为`import org.jun=acp#onPopupPost()`.

是一些行为不端的 eclim 自动完成功能还是其他什么？当我在通过 eclim 打开的项目中时，我只会遇到这个问题。其他方面没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:12:50.490

看起来您的[AutoComplPop 插件](http://www.vim.org/scripts/script.php?script_id=1879)有问题；其映射的一部分是按字面意思插入的。我自己正在使用该插件，但还没有看到这个问题。可能是干扰了其他插件；您最近对其他插件进行了任何更新吗？！如果您可以使用干净的 .vimrc 并且没有加载其他插件来重现问题，请向作者提交问题。

要暂时禁用插件（不卸载），请将以下内容放入您的`~/.vimrc`：

```
let g:loaded_acp = 1 
```

# php - 如何进行 URL 屏蔽？

> ID：14811444
> 
> 赞同：0
> 
> 时间：2013-02-11T12:03:35.373
> 
> 标签：php, .htaccess

我如何制作：

[http://ecorustic.com/model.php?category=Destinations&name=destindere&id=138](http://ecorustic.com/model.php?category=Destinations&name=destindere&id=138)

显示为：

[http://ecorustic.com/Destinations/destindere](http://ecorustic.com/Destinations/destindere)

给用户，但页面仍然指向：

[http://ecorustic.com/model.php?category=Destinations&name=destindere&id=138](http://ecorustic.com/model.php?category=Destinations&name=destindere&id=138)

? 我尝试了以下代码，但链接保持不变：

```
RewriteEngine On
RewriteRule ^[A-Za-z-]+/[A-Za-z-]+/[A-Za-z-]+/([A-Za-z0-9-]+)/?$  model.php?category=$1&name=$2&id=$3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:22:18.337

试试看

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/(.*)/(.*)/(.*)$  
RewriteRule ^ model.php?category=%1&name=%2&id=%3 [L] 
```

样本

[http://ecorustic.com/Destinations/destindere/138](http://ecorustic.com/Destinations/destindere/138)

重写为

[http://ecorustic.com/model.php?category=Destinations&name=destindere&id=138](http://ecorustic.com/model.php?category=Destinations&name=destindere&id=138)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:19:28.293

您应该查看 Apache 上[的 HTTP URL 重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)。你说：

> 我做到了，但它给出了我想要的确切相反，它将第二个链接转换为第一个:(，在我找到的所有示例中

这是真的，这正是你想要的：让花哨的 url 出现在用户面前，而在后台它被转换为错误的 url 以供服务器读取。

有成千上万的教程和指南可以满足任何需要。这里有一些：

*   [指南 1](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)
*   [指南 2](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

# c# - 来自 RepositoryPattern 类的 Cant 实例

> ID：14811447
> 
> 赞同：1
> 
> 时间：2013-02-11T12:03:44.543
> 
> 标签：c#, entity-framework, entity-framework-4

我使用以下存储库模式。当我从类中实例获取此异常时：

```
 public interface IRepository<TEntity> : IDisposable where TEntity : class
{
    IQueryable<TEntity> GetQuery();
    IEnumerable<TEntity> GetAll();
    IEnumerable<TEntity> Find(Expression<Func<TEntity, bool>> predicate);
    TEntity Single(Expression<Func<TEntity, bool>> predicate);
    TEntity First(Expression<Func<TEntity, bool>> predicate);
    void Add(TEntity entity);
    void Delete(TEntity entity);
    void Attach(TEntity entity);
    void SaveChanges();
    void SaveChanges(SaveOptions options);
}

public class GenericRepository<TEntity> : IRepository<TEntity> where TEntity : class
{
    private ObjectContext _context;
    private IObjectSet<TEntity> _objectSet;

    public GenericRepository(ObjectContext context)
    {
        _context = context;
        _objectSet = _context.CreateObjectSet<TEntity>();
    }

    public IQueryable<TEntity> GetQuery()
    {
        return _objectSet;
    }

    public IEnumerable<TEntity> GetAll()
    {
        return GetQuery().AsEnumerable();
    }

    public IEnumerable<TEntity> Find(Expression<Func<TEntity, bool>> predicate)
    {
        return _objectSet.Where<TEntity>(predicate);
    }

    public TEntity Single(Expression<Func<TEntity, bool>> predicate)
    {
        return _objectSet.Single<TEntity>(predicate);
    }

    public TEntity First(Expression<Func<TEntity, bool>> predicate)
    {
        return _objectSet.First<TEntity>(predicate);
    }

    public void Delete(TEntity entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        _objectSet.DeleteObject(entity);
    }

    public void Add(TEntity entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        _objectSet.AddObject(entity);
    }

    public void Attach(TEntity entity)
    {
        _objectSet.Attach(entity);
    }

    public void SaveChanges()
    {
        _context.SaveChanges();
    }

    public void SaveChanges(SaveOptions options)
    {
        _context.SaveChanges(options);
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing && _context != null)
        {
            _context.Dispose();
            _context = null;
        }
    }
} 
```

使用：

```
 var db = new AdventureWorks2012Entities();  
 IRepository<Person> person = new GenericRepository<Person>(); 
```

例外： ![在此处输入图像描述](../Images/5ac33f5eb6750284d2fbca40141ac771.png)

![在此处输入图像描述](../Images/785477e583ab357a6b8e7c0ed28a8164.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:19:05.260

问题是您使用的是 Entity Framework 4.1 或更高版本，它`DbContext`有`ObjectContext`. 但是您的存储库仍然使用`ObjectContext`. 添加另一个构造函数，它接受`DbContext`：

```
public GenericRepository(DbContext context)
{
    _context = (context as IObjectContextAdapter).ObjectContext;
    _objectSet = _context.CreateObjectSet<TEntity>();
} 
```

您可以通过转换为接口来检索包装`ObjectContext`的实例。另一种选择是更新您的存储库类以使用 latest ，但这将需要更多的编码，而不是简单地添加一个构造函数：`DbContext``IObjectContextAdapter``DbContext`

```
public class GenericRepository<TEntity> : IRepository<TEntity> 
   where TEntity : class
{
    private DbContext _context; // instead of ObjectContext
    private DbSet<TEntity> _set; // instead of IObjectSet<TEntity>

    public GenericRepository(DbContext context)
    {
        _context = context;
        _set = _context.Set<TEntity>();
    }

    public IQueryable<TEntity> GetQuery()
    {
        return _set;
    }

    public IEnumerable<TEntity> GetAll()
    {
        return GetQuery().AsEnumerable();
    }

    public IEnumerable<TEntity> Find(Expression<Func<TEntity, bool>> predicate)
    {
        return _set.Where<TEntity>(predicate);
    }    

    // etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:24:01.720

您可以将 DbSet 传递给您的存储库，因此：

```
var db = new AdventureWorks2012Entities();
IRepository<Person> person = new GenericRepository<Person>(db.Person); 
```

其中 db.Person 在 AdventureWorks2012Entities DbContext 类中声明。

我正在开发一个 UnitOfWork/Repository 抽象层，以便轻松地从 NHibernate/EntityFramework/Raven 等切换并更好地允许测试。

[这里](http://hyperionsdk.codeplex.com)是源代码，[这里](http://nuget.org/packages/EyeSoft.Data.EntityFramework)是 Nuget 包。我必须更改代码库以更好地支持[DDD](http://en.wikipedia.org/wiki/Domain-driven_design)方法，特别是：

1.  删除工作单元类，不需要，因为每次使用一个聚合
2.  将 Commit 方法添加到存储库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:21:11.870

这全部都在错误消息中，第一个很简单 - 您的存储库需要一个`ObjectContext`参数（您没有提供）。

第二个基本上是说您的`db`实例不是类型`ObjectContext`或至少不能向下转换为该特定类型。如果你*确定* `AdventureWorks2012Entities`从那时`ObjectContext`你可以做一个直接的演员，例如

```
IRepository<Person> repo = new GenericRepository<Person>((ObjectContext)db); 
```

# jquery - 反弹 Telerik MVC Grid 并访问 Jquery 中的新表行

> ID：14811450
> 
> 赞同：0
> 
> 时间：2013-02-11T12:03:46.350
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, telerik-grid, telerik-mvc

我已经通过 Jquery 编辑了数据并反弹了 Telerik MVC Grid。事情是我需要访问“新”行，或者改写重新绑定过程后生成的行。出于某种原因，我的 Jquery 函数从网格中读取旧数据，即重新绑定过程之前的数据。

```
<script type="text/javascript">
    var categoryID;
    var subCategoryID;
    var categoryForSubCategoryId;

    function onChangeSubCategories(e) {
    var url = '/SubCategory/FindSubCategoryIdByName/';
    $.ajax({
        type: 'GET',
        data: { name: e.value },
        dataType: 'html',
        url: url,
        success: function(data) {
            var ids = data.split('###');
            subCategoryID = ids[0];
            categoryID = ids[1];

            var subCategoryGrid = $('#SubCategoryGrid').data('tGrid');
            subCategoryGrid.rebind();
            var productGrid = $('#ProductGrid').data('tGrid');
            productGrid.rebind();

            $('#CategoryGrid tr').each(function () {
                var tr = this;
                if (tr.cells[0].innerHTML == categoryID) {
                    $(this).toggleClass('t-state-selected');
                }
                else if ($(this).hasClass('t-state-selected')) {
                    $(this).toggleClass('t-state-selected');
                }
            });

            $('#SubCategoryGrid tr').each(function () {
                //TODO: every row here is the old data
                var tr = this;
                if (tr.cells[0].innerHTML == subCategoryID) {
                    $(this).toggleClass('t-state-selected');
                }
                else if ($(this).hasClass('t-state-selected')) {
                    $(this).toggleClass('t-state-selected');
                }
            });
        }
    });
}
</script> 
```

任何人都可以告诉我如何在重新绑定后从网格中访问行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:25:23.247

**rebind**方法重新绑定 Grid 并且 Grid 的状态丢失。如果要将 Grid 绑定到新的对象集，则应使用[dataBind](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#dataBind)方法。

# java - Bean 名称“modelObject”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：14811451
> 
> 赞同：0
> 
> 时间：2013-02-11T12:03:46.677
> 
> 标签：java, spring

这是我的控制器

```
@Controller
public class MyController {

    @Autowired
private LoginService  loginService;

@RequestMapping("/login.do")
public String login() {     
    return "login";
}
@RequestMapping("/validate.do")
public String validate(HttpServletRequest request,ModelMap model) {
    String name=request.getParameter("uname1");
    String pwd=request.getParameter("pwd1");
    boolean b=loginService.validate(name,pwd);
    if (b){
        model.addAttribute("name", name);
        return "welcome";
    }
    else
        return "login";
}
@RequestMapping("/register.do")
public String register() {
    return "register";
}

@RequestMapping("/registration.do")
public String registration(HttpServletRequest request, @ModelAttribute("modelObject") Login entity, BindingResult result) {
    String uname=entity.getUserName();
    String pwd=entity.getPassword();
    String sex=entity.getSex();
    String dob=entity.getDob();
    String nation=entity.getNation();
    Login log=new Login();
    log.setUserName(uname);
    log.setPassword(pwd);
    log.setSex(sex);
    log.setDob(dob);
    log.setNation(nation);  
    loginService.register(log);
    return "login";
}

} 
```

这是jsp页面

```
<form:form commandName="modelObject" action="registration.do" method="post" >
    <table>
        <tr>
        <td><form:label path="userName">User Name</form:label></td>
        <td><form:input path="userName"></form:input></td>
        </tr>
        <tr>
        <td><form:label path="password">Password</form:label></td>
        <td><form:input path="password"></form:input></td>
        </tr>
        <tr>
        <td><form:label path="sex">Sex</form:label></td>
        <td><form:radiobutton path="sex" value="M" label="M"></form:radiobutton>
        <form:radiobutton path="sex" value="F" label="F"></form:radiobutton></td>
        </tr>
        <tr>
        <td><form:label path="dob">Date of Birth</form:label></td>
        <td><form:input path="dob"></form:input></td>
        </tr>       
        <tr>
        <td><form:label path="nation">Nationality</form:label></td>
        <td><form:select path="nation">
        <form:option value="0" label="Please Select"></form:option>
        <form:options items="${countryList}" itemValue="id" itemLabel="name" />
        </form:select></td>
        </tr>
        <tr>
        <td align="right"><input type="submit" value="Submit Form"></input></td>
        <td align="center"><input type="reset" value="Clear Form"></input></td>
        </tr>
    </table>    
</form:form> 
```

与他们一起，我收到以下错误

```
Feb 11, 2013 5:08:51 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [mode] in context with path [/SpringHb] threw exception [An exception occurred processing JSP page /WEB-INF/jsp/register.jsp at line 16

13: <form:form commandName="modelObject" action="registration.do" method="post" >
14:     <table>
15:         <tr>
16:         <td><form:label path="userName">User Name</form:label></td>
17:         <td><form:input path="userName"></form:input></td>
18:         </tr>
19:         <tr>

Stacktrace:] with root cause
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'modelObject' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194)
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129)
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119)
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.register_jsp._jspx_meth_form_005flabel_005f0(register_jsp.java:282)
    at org.apache.jsp.WEB_002dINF.jsp.register_jsp._jspService(register_jsp.java:114)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我无法理解问题所在

上面使用 spring 表单标签编写的代码显示了上述错误，但是如果我使用 html 编写相同的代码，它工作正常 下面是用 jsp 编写的 html 代码

```
<c:url value="/registration.do" var="reg" />
<form:form action="${reg}" >
User Name <input type="text" name="userName"/><br>
Password<input type="password" name="password"/><br>
Sex<input type="radio" name="sex" value="M"/>M<input type="radio" name="sex" value="F"/>F<br>
DOB<input type="text" name="dob"/><br>
Nationality<select name="nation">
  <option value="India">India</option>
  <option value="USA">USA</option>
</select><br>
<input type="submit" name="submit" value="Submit" />
<input type="reset" name="reset" value="Reset" />
</form:form>    

<c:url value="/login.do" var="log" />
<form:form action="${log}" >
<input type="submit" name="Go Back" value="Go Back" />
</form:form> 
```

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:30:40.670

您需要在控制器方法中绑定空`Login`对象，从该方法返回指定的 jsp 页面 Somehting 像这样。

```
model.addAttribute("modelObject", yourEmptyModelObject); 
```

而且只有那些您希望用户输入的字段才需要另一件事路径。因此无需为`<form:label>`其他不可渲染字段指定路径。

# vim - 用于 emacs 的 Vim torte 配色方案

> ID：14811454
> 
> 赞同：3
> 
> 时间：2013-02-11T12:03:51.543
> 
> 标签：vim, emacs

我想在 emacs 24 中使用`torte`vim 配色方案（请参阅[此处](http://vimcolorschemetest.googlecode.com/svn/html/index-c.html)并搜索`"torte"`）。是否有可以轻松安装此配色方案的 emacs 端口？

谷歌搜索`+Emacs` `+torte`基本上没有结果。也许移植的配色方案有不同的名称？还是根本没有移植？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-30T00:35:11.290

使用[emacs-theme-creator.appspot.com](http://emacs-theme-creator.appspot.com/)我为您创建了一个粗略的端口，这样您就可以使用您的恶魔 IDE 并假装您正在使用一个真正的编辑器。

```
;;; torte-theme.el --- Emacs theme with a dark background.

;; Copyright (C) 2014 , connermcd

;; Author: connermcd
;; 
;; Version: 0.1
;; Package-Requires: ((emacs "24"))
;; Created with emacs-theme-generator, https://github.com/mswift42/theme-creator.

;; This program is free software: you can redistribute it and/or modify
;; it under the terms of the GNU General Public License as published by
;; the Free Software Foundation, either version 3 of the License, or
;; (at your option) any later version.

;; This program is distributed in the hope that it will be useful,
;; but WITHOUT ANY WARRANTY; without even the implied warranty of
;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
;; GNU General Public License for more details.

;; You should have received a copy of the GNU General Public License
;; along with this program. If not, see <http://www.gnu.org/licenses/>.

;; This file is not part of Emacs.

;;; Commentary:

;;; Code:

 (deftheme torte)
 (let ((class '((class color) (min-colors 89)))
       (fg1 "#a89797")
       (fg2 "#998a8a")
       (fg3 "#8b7d7d")
       (fg4 "#7d7171")
       (bg1 "#2D2D2D")
       (bg2 "#3b3b3b")
       (bg3 "#4a4a4a")
       (bg4 "#5a5a5a")
       (key2 "#529cc9")
       (key3 "#2e7fab")
       (builtin "#E6AB0F")
       (keyword "#3090c2")
       (const   "#74DB97")
       (comment "#5b87d4")
       (func    "#9EC9CF")
       (str     "#D747CB")
       (type    "#74DB97")
       (var     "#9EC9CF")
       (warning "#ff0000"))
   (custom-theme-set-faces
   'torte
        `(default ((,class (:background ,bg1 :foreground ,fg1))))
        `(font-lock-builtin-face ((,class (:foreground ,builtin))))
        `(font-lock-comment-face ((,class (:foreground ,comment))))
    `(font-lock-negation-char-face ((,class (:foreground ,const))))
    `(font-lock-reference-face ((,class (:foreground ,const))))
    `(font-lock-constant-face ((,class (:foreground ,const))))
        `(font-lock-doc-face ((,class (:foreground ,comment))))
        `(font-lock-function-name-face ((,class (:foreground ,func :bold t))))
        `(font-lock-keyword-face ((,class (:bold ,class :foreground ,keyword))))
        `(font-lock-string-face ((,class (:foreground ,str))))
        `(font-lock-type-face ((,class (:foreground ,type ))))
        `(font-lock-variable-name-face ((,class (:foreground ,var))))
        `(font-lock-warning-face ((,class (:foreground ,warning :background ,bg2))))
        `(region ((,class (:background ,fg1 :foreground ,bg1))))
        `(highlight ((,class (:foreground ,fg3 :background ,bg3))))
    `(hl-line ((,class (:background  ,bg2))))
    `(fringe ((,class (:background ,bg2 :foreground ,fg4))))
    `(cursor ((,class (:background ,bg3))))
        `(show-paren-match-face ((,class (:background ,warning))))
        `(isearch ((,class (:bold t :foreground ,warning :background ,bg3))))
        `(mode-line ((,class (:box (:line-width 1 :color nil) :bold t :foreground ,fg4 :background ,bg2))))
        `(mode-line-inactive ((,class (:box (:line-width 1 :color nil :style pressed-button) :foreground ,key3 :background ,bg1 :weight normal))))
        `(mode-line-buffer-id ((,class (:bold t :foreground ,func :background nil))))
    `(mode-line-highlight ((,class (:foreground ,keyword :box nil :weight bold))))
        `(mode-line-emphasis ((,class (:foreground ,fg1))))
    `(vertical-border ((,class (:foreground ,fg3))))
        `(minibuffer-prompt ((,class (:bold t :foreground ,keyword))))
        `(default-italic ((,class (:italic t))))
    `(link ((,class (:foreground ,const :underline t))))
    `(org-code ((,class (:foreground ,fg2))))
    `(org-hide ((,class (:foreground ,fg4))))
        `(org-level-1 ((,class (:bold t :foreground ,fg2 :height 1.1))))
        `(org-level-2 ((,class (:bold nil :foreground ,fg3))))
        `(org-level-3 ((,class (:bold t :foreground ,fg4))))
        `(org-level-4 ((,class (:bold nil :foreground ,bg4))))
        `(org-date ((,class (:underline t :foreground ,var) )))
        `(org-footnote  ((,class (:underline t :foreground ,fg4))))
        `(org-link ((,class (:underline t :foreground ,type ))))
        `(org-special-keyword ((,class (:foreground ,func))))
        `(org-block ((,class (:foreground ,fg3))))
        `(org-quote ((,class (:inherit org-block :slant italic))))
        `(org-verse ((,class (:inherit org-block :slant italic))))
        `(org-todo ((,class (:box (:line-width 1 :color ,fg3) :foreground ,keyword :bold t))))
        `(org-done ((,class (:box (:line-width 1 :color ,bg3) :bold t :foreground ,bg4))))
        `(org-warning ((,class (:underline t :foreground ,warning))))
        `(org-agenda-structure ((,class (:weight bold :foreground ,fg3 :box (:color ,fg4) :background ,bg3))))
        `(org-agenda-date ((,class (:foreground ,var :height 1.1 ))))
        `(org-agenda-date-weekend ((,class (:weight normal :foreground ,fg4))))
        `(org-agenda-date-today ((,class (:weight bold :foreground ,keyword :height 1.4))))
        `(org-agenda-done ((,class (:foreground ,bg4))))
    `(org-scheduled ((,class (:foreground ,type))))
        `(org-scheduled-today ((,class (:foreground ,func :weight bold :height 1.2))))
    `(org-ellipsis ((,class (:foreground ,builtin))))
    `(org-verbatim ((,class (:foreground ,fg4))))
        `(org-document-info-keyword ((,class (:foreground ,func))))
    `(font-latex-bold-face ((,class (:foreground ,type))))
    `(font-latex-italic-face ((,class (:foreground ,key3 :italic t))))
    `(font-latex-string-face ((,class (:foreground ,str))))
    `(font-latex-match-reference-keywords ((,class (:foreground ,const))))
    `(font-latex-match-variable-keywords ((,class (:foreground ,var))))
    `(ido-only-match ((,class (:foreground ,warning))))
    `(org-sexp-date ((,class (:foreground ,fg4))))
    `(ido-first-match ((,class (:foreground ,keyword :bold t))))
    `(gnus-header-content ((,class (:foreground ,keyword))))
    `(gnus-header-from ((,class (:foreground ,var))))
    `(gnus-header-name ((,class (:foreground ,type))))
    `(gnus-header-subject ((,class (:foreground ,func :bold t))))
    `(mu4e-view-url-number-face ((,class (:foreground ,type))))
    `(mu4e-cited-1-face ((,class (:foreground ,fg2))))
    `(mu4e-cited-7-face ((,class (:foreground ,fg3))))
    `(mu4e-header-marks-face ((,class (:foreground ,type))))
    `(ffap ((,class (:foreground ,fg4))))
    `(js2-private-function-call ((,class (:foreground ,const))))
    `(js2-jsdoc-html-tag-delimiter ((,class (:foreground ,str))))
    `(js2-jsdoc-html-tag-name ((,class (:foreground ,key2))))
    `(js2-external-variable ((,class (:foreground ,type  ))))
        `(js2-function-param ((,class (:foreground ,const))))
        `(js2-jsdoc-value ((,class (:foreground ,str))))
        `(js2-private-member ((,class (:foreground ,fg3))))
        `(js3-warning-face ((,class (:underline ,keyword))))
        `(js3-error-face ((,class (:underline ,warning))))
        `(js3-external-variable-face ((,class (:foreground ,var))))
        `(js3-function-param-face ((,class (:foreground ,key3))))
        `(js3-jsdoc-tag-face ((,class (:foreground ,keyword))))
        `(js3-instance-member-face ((,class (:foreground ,const))))
    `(warning ((,class (:foreground ,warning)))) 
    `(ac-completion-face ((,class (:underline t :foreground ,keyword))))
    `(info-quoted-name ((,class (:foreground ,builtin))))
    `(info-string ((,class (:foreground ,str))))
    `(icompletep-determined ((,class :foreground ,builtin)))
        `(undo-tree-visualizer-current-face ((,class :foreground ,builtin)))
        `(undo-tree-visualizer-default-face ((,class :foreground ,fg2)))
        `(undo-tree-visualizer-unmodified-face ((,class :foreground ,var)))
        `(undo-tree-visualizer-register-face ((,class :foreground ,type)))
    `(slime-repl-inputed-output-face ((,class (:foreground ,type))))
        `(trailing-whitespace ((,class :foreground nil :background ,warning)))
        `(rainbow-delimiters-depth-1-face ((,class :foreground ,fg1)))
        `(rainbow-delimiters-depth-2-face ((,class :foreground ,type)))
        `(rainbow-delimiters-depth-3-face ((,class :foreground ,var)))
        `(rainbow-delimiters-depth-4-face ((,class :foreground ,const)))
        `(rainbow-delimiters-depth-5-face ((,class :foreground ,keyword)))
        `(rainbow-delimiters-depth-6-face ((,class :foreground ,fg1)))
        `(rainbow-delimiters-depth-7-face ((,class :foreground ,type)))
        `(rainbow-delimiters-depth-8-face ((,class :foreground ,var)))
        `(magit-item-highlight ((,class :background ,bg3)))
        `(magit-section-heading        ((,class (:foreground ,keyword :weight bold))))
        `(magit-hunk-heading           ((,class (:background ,bg3))))
        `(magit-section-highlight      ((,class (:background ,bg2))))
        `(magit-hunk-heading-highlight ((,class (:background ,bg3))))
        `(magit-diff-context-highlight ((,class (:background ,bg3 :foreground ,fg3))))
        `(magit-diffstat-added   ((,class (:foreground ,type))))
        `(magit-diffstat-removed ((,class (:foreground ,var))))
        `(magit-process-ok ((,class (:foreground ,func :weight bold))))
        `(magit-process-ng ((,class (:foreground ,warning :weight bold))))
        `(magit-branch ((,class (:foreground ,const :weight bold))))
        `(magit-log-author ((,class (:foreground ,fg3))))
        `(magit-hash ((,class (:foreground ,fg2))))
        `(magit-diff-file-header ((,class (:foreground ,fg2 :background ,bg3))))
        `(lazy-highlight ((,class (:foreground ,fg2 :background ,bg3))))
        `(term ((,class (:foreground ,fg1 :background ,bg1))))
        `(term-color-black ((,class (:foreground ,bg3 :background ,bg3))))
        `(term-color-blue ((,class (:foreground ,func :background ,func))))
        `(term-color-red ((,class (:foreground ,keyword :background ,bg3))))
        `(term-color-green ((,class (:foreground ,type :background ,bg3))))
        `(term-color-yellow ((,class (:foreground ,var :background ,var))))
        `(term-color-magenta ((,class (:foreground ,builtin :background ,builtin))))
        `(term-color-cyan ((,class (:foreground ,str :background ,str))))
        `(term-color-white ((,class (:foreground ,fg2 :background ,fg2))))
        `(rainbow-delimiters-unmatched-face ((,class :foreground ,warning)))
        `(helm-header ((,class (:foreground ,fg2 :background ,bg1 :underline nil :box nil))))
        `(helm-source-header ((,class (:foreground ,keyword :background ,bg1 :underline nil :weight bold))))
        `(helm-selection ((,class (:background ,bg2 :underline nil))))
        `(helm-selection-line ((,class (:background ,bg2))))
        `(helm-visible-mark ((,class (:foreground ,bg1 :background ,bg3))))
        `(helm-candidate-number ((,class (:foreground ,bg1 :background ,fg1))))
        `(helm-separator ((,class (:foreground ,type :background ,bg1))))
        `(helm-time-zone-current ((,class (:foreground ,builtin :background ,bg1))))
        `(helm-time-zone-home ((,class (:foreground ,type :background ,bg1))))
        `(helm-buffer-not-saved ((,class (:foreground ,type :background ,bg1))))
        `(helm-buffer-process ((,class (:foreground ,builtin :background ,bg1))))
        `(helm-buffer-saved-out ((,class (:foreground ,fg1 :background ,bg1))))
        `(helm-buffer-size ((,class (:foreground ,fg1 :background ,bg1))))
        `(helm-ff-directory ((,class (:foreground ,func :background ,bg1 :weight bold))))
        `(helm-ff-file ((,class (:foreground ,fg1 :background ,bg1 :weight normal))))
        `(helm-ff-executable ((,class (:foreground ,key2 :background ,bg1 :weight normal))))
        `(helm-ff-invalid-symlink ((,class (:foreground ,key3 :background ,bg1 :weight bold))))
        `(helm-ff-symlink ((,class (:foreground ,keyword :background ,bg1 :weight bold))))
        `(helm-ff-prefix ((,class (:foreground ,bg1 :background ,keyword :weight normal))))
        `(helm-grep-cmd-line ((,class (:foreground ,fg1 :background ,bg1))))
        `(helm-grep-file ((,class (:foreground ,fg1 :background ,bg1))))
        `(helm-grep-finish ((,class (:foreground ,fg2 :background ,bg1))))
        `(helm-grep-lineno ((,class (:foreground ,fg1 :background ,bg1))))
        `(helm-grep-match ((,class (:foreground nil :background nil :inherit helm-match))))
        `(helm-grep-running ((,class (:foreground ,func :background ,bg1))))
        `(helm-moccur-buffer ((,class (:foreground ,func :background ,bg1))))
        `(helm-source-go-package-godoc-description ((,class (:foreground ,str))))
        `(helm-bookmark-w3m ((,class (:foreground ,type))))
        `(company-echo-common ((,class (:foreground ,bg1 :background ,fg1))))
        `(company-preview ((,class (:background ,bg1 :foreground ,key2))))
        `(company-preview-common ((,class (:foreground ,bg2 :foreground ,fg3))))
        `(company-preview-search ((,class (:foreground ,type :background ,bg1))))
        `(company-scrollbar-bg ((,class (:background ,bg3))))
        `(company-scrollbar-fg ((,class (:foreground ,keyword))))
        `(company-tooltip ((,class (:foreground ,fg2 :background ,bg1 :bold t))))
        `(company-tooltop-annotation ((,class (:foreground ,const))))
        `(company-tooltip-common ((,class ( :foreground ,fg3))))
        `(company-tooltip-common-selection ((,class (:foreground ,str))))
        `(company-tooltip-mouse ((,class (:inherit highlight))))
        `(company-tooltip-selection ((,class (:background ,bg3 :foreground ,fg3))))
        `(company-template-field ((,class (:inherit region))))
        `(web-mode-builtin-face ((,class (:inherit ,font-lock-builtin-face))))
        `(web-mode-comment-face ((,class (:inherit ,font-lock-comment-face))))
        `(web-mode-constant-face ((,class (:inherit ,font-lock-constant-face))))
        `(web-mode-keyword-face ((,class (:foreground ,keyword))))
        `(web-mode-doctype-face ((,class (:inherit ,font-lock-comment-face))))
        `(web-mode-function-name-face ((,class (:inherit ,font-lock-function-name-face))))
        `(web-mode-string-face ((,class (:foreground ,str))))
        `(web-mode-type-face ((,class (:inherit ,font-lock-type-face))))
        `(web-mode-html-attr-name-face ((,class (:foreground ,func))))
        `(web-mode-html-attr-value-face ((,class (:foreground ,keyword))))
        `(web-mode-warning-face ((,class (:inherit ,font-lock-warning-face))))
        `(web-mode-html-tag-face ((,class (:foreground ,builtin))))
        `(jde-java-font-lock-package-face ((t (:foreground ,var))))
        `(jde-java-font-lock-public-face ((t (:foreground ,keyword))))
        `(jde-java-font-lock-private-face ((t (:foreground ,keyword))))
        `(jde-java-font-lock-constant-face ((t (:foreground ,const))))
        `(jde-java-font-lock-modifier-face ((t (:foreground ,key3))))
        `(jde-jave-font-lock-protected-face ((t (:foreground ,keyword))))
        `(jde-java-font-lock-number-face ((t (:foreground ,var))))))

;;;###autoload
(when load-file-name
  (add-to-list 'custom-theme-load-path
               (file-name-as-directory (file-name-directory load-file-name))))

(provide-theme 'torte)

;; Local Variables:
;; no-byte-compile: t
;; End:

;;; torte-theme.el ends here 
```

# php - php：变量中的concat常量

> ID：14811455
> 
> 赞同：0
> 
> 时间：2013-02-11T12:03:52.627
> 
> 标签：php

```
class MyClass
{
    const EVENT_NAME='Name of the event';

    const EVENT_DATE='xx/xx/xxxx';

    public $eventName = self::EVENT_NAME.' '.self::EVENT_DATE;
} 
```

不工作！我想在一个变量中连接 2 个常量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:06:55.957

```
class MyClass
{
    const EVENT_NAME='Name of the event';

    const EVENT_DATE='xx/xx/xxxx';

    public function __construct() {
        $this->eventName = self::EVENT_NAME.' '.self::EVENT_DATE;
    }

    public $eventName;
} 
```

# vb6 - 如何在 VB6 主机中使用 jScript 9 功能

> ID：14811458
> 
> 赞同：2
> 
> 时间：2013-02-11T12:04:04.657
> 
> 标签：vb6, jscript, chakra

我想在 VB6 主机上使用 IE9（本机 json，...）中的新 JScript 功能。从我读到的（见[http://blogs.msdn.com/b/jscript/archive/2009/04/17/versioning-language-features-in-jscript.aspx](http://blogs.msdn.com/b/jscript/archive/2009/04/17/versioning-language-features-in-jscript.aspx)），我必须调用IActiveScriptProperty： :SetProperty 并将 SCRIPTPROP_INVOKEVERSIONING 设置为 2 (SCRIPTLANGUAGEVERSION_5_8)。因此，我已将接口添加到我的 odl 文件中：

```
...
[
   odl,
   uuid(4954E0D0-FBC7-11D1-8410-006008C3FBFC),
]
interface IActiveScriptProperty : stdole.IUnknown
{
   HRESULT GetProperty(
      [in]  LONG    dwProperty,
      [in]  VARIANT *pvarIndex,
      [out] VARIANT *pvarValue
   );

   HRESULT SetProperty(
      [in] LONG    dwProperty,
      [in] VARIANT *pvarIndex,
      [in] VARIANT *pvarValue
   );
}
... 
```

在 VB6 主机中，我使用以下命令创建引擎：

```
Dim hRes as Long
Dim IUnk as IUnknown
Dim clsidJS as UUID
Dim uuidActScr as UUID
Dim IProperty as IActiveScriptProperty
Dim IScript As IActiveScript
Dim IParse As IActiveScriptParse

' Create the engine
CLSIDFromString "{16d51579-a30b-4c8b-a276-0ff4dc41e755}", clsidJS    ' JScript9 (Chakra)
CLSIDFromString IID_IActiveScript, uuidActScr
hRes = CoCreateInstance(clsidJS, Nothing, CLSCTX_INPROC_SERVER, uuidActScr, IUnk)

' Set version
Const SCRIPTPROP_INVOKEVERSIONING As Long = &H4000
Dim Version as Variant
Version = 2
Set IProperty = iUnk
IProperty.SetProperty SCRIPTPROP_INVOKEVERSIONING, 0, Version '<--- Here I get error 5 "Invalid procedure call or argument" 
```

在上一篇文章的最后一条评论中，Byron 说： **“带有 SCRIPTPTOP_INVOKEVERSIONING 的 SetProperty 的未记录‘特征’是该值必须是 VT_I4 或 VT_I2 - 任何其他整数类型都将被视为无效而被拒绝。”**

所以我将上面的代码修改为（**VariantType**属性来自[http://www.xbeat.net/vbspeed/i_OpenODL.htm#VBVM6Lib](http://www.xbeat.net/vbspeed/i_OpenODL.htm#VBVM6Lib)）：

```
...
Version = 2
VariantType(Version) = VT_I4 ' Force VT_I4 variant type
Set IProperty = iUnk
IProperty.SetProperty SCRIPTPROP_INVOKEVERSIONING, 0, Version '<--- Here I get the same error 5 "Invalid procedure call or argument" 
```

**注意：**如果我不尝试设置 SCRIPTPROP_INVOKEVERSIONING 属性，引擎工作正常，如果我运行：ScriptEngineMajorVersion() + "." + ScriptEngineMinorVersion() + "." + ScriptEngineBuildVersion() 我得到“9.0.16457”，但我无法以原生 json 的形式访问新功能。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:06:57.597

您必须将声明更改`SetProperty`为

```
HRESULT SetProperty(
      [in] LONG    dwProperty,
      [in] void    *pvarIndex,
      [in] VARIANT *pvarValue
   ); 
```

能够设置无索引属性。只需像在示例代码中那样传递 0 (NULL)。当前声明被视为`SCRIPTPROP_INVOKEVERSIONING`一个数组，并且您将第一个索引设置为某个值。

请注意 VT_I2 = VB6 中的整数和 VT_I4 = Long，因此无需破解这些。只需使用 2 或 2& 或`Private Const SCRIPTLANGUAGEVERSION_5_8 As Long = 2`const 就会被正确输入。

另请注意，在这一行`hRes = CoCreateInstance(clsidJS, Nothing, CLSCTX_INPROC_SERVER, uuidActScr, IUnk)`中，您已经获得了`IActiveScript`界面。以后不用再施法了`Set IProperty = iUnk`。

这一切都取决于您如何声明`CoCreateInstance`- 使用`void *`for last 参数将允许您直接传递`IProperty`变量并`IActiveScript`使用`clsidJS`.

# python - 添加自定义 Django 管理操作

> ID：14811464
> 
> 赞同：12
> 
> 时间：2013-02-11T12:04:33.023
> 
> 标签：python, django, django-admin

我正在寻找将自定义操作添加到 Django 管理员更改页面的方法。我**不是**在寻找可以添加到概览下拉框中的操作。

我的 Django 应用程序中的一个模型包含有关文档的信息，这些信息会在前端自动编译为 PDF 文件。我想让管理员可以直接从更改页面快速呈现 PDF，以便能够快速检查结果。

我已经玩过覆盖change_form.html/submit_line.html，添加按钮绝对没有问题。但我想知道如何以一种干净的方式扩展管理模块，以便它包含我的自定义操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:27:28.047

由于自定义管理视图基本上只是普通视图，因此没有太多特色。为了更清洁的集成，您应该考虑以下几点：

*   [通过.get_urls()](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#adding-views-to-admin-sites)`AdminSite`添加url 模式。
*   为或在呈现子类管理模板的模板时提供`current_app`参数。`RequestContext``Context`

**编辑**：

在这里找到一个例子：http: [//shrenikp.webs.com/apps/blog/show/5211522-add-custom-view-method-for-django-admin-model-](http://shrenikp.webs.com/apps/blog/show/5211522-add-custom-view-method-for-django-admin-model-)

请注意，该示例没有使用`current_app`我提到的论点。我想您生成 PDF 的视图只返回`HttpResponse`具有适当内容类型的 a 而不是使用 a 呈现响应`Context`，因此不需要它。总而言之，`current_app`只有当您将自定义视图使用的管理模板子类化时才有意义，该模板实际上在`current_app`某处使用。

该示例将 url 和视图封装在`ModelAdmin`. 也可以通过`AdminSite`子类来做到这一点，但至少在您的用例中，这可能是矫枉过正。

顺便说一句，覆盖`change_form.html`您的应用程序的模板以将按钮添加到标准更改视图就可以了。管理员中没有专门的 api（不幸的是）。

# jquery - 在其他脚本之前异步加载 jquery

> ID：14811471
> 
> 赞同：39
> 
> 时间：2013-02-11T12:04:48.837
> 
> 标签：jquery, asynchronous

我已将属性添加`async`到我的 javascript 包含 HTML 中。
所以现在我有：

```
<script async src="jquery.myscript.js"></script> 
```

这适用于我加载的所有 JS，除了 jquery。

如果我添加`async`到 jQuery`<script>`标记中，所有其他依赖于 jquery 的脚本都不起作用。

在那个 jsfiddle 你可以看到问题：
[JsFiddle](http://jsfiddle.net/uFbdV/)

在示例中，我使用`<script> Mycode </script>`了而不是包含外部 file.js，但这并没有改变这种情况。

我想使用 async attrib 运行 jQuery，并仅在加载 jquery 后异步运行其他几个外部脚本。

有可能的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-11T12:11:44.367

> 我想使用 async attrib 运行 jQuery，并仅在加载 jquery 后异步运行其他几个外部脚本。

这意味着什么？听起来很像您想先加载 jQuery，然后在完成后加载其他内容。所以你想**同步**加载它。如果你仍然想使用这种[`async`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-async)方式，你可以定义一个`onload`函数来在 jQuery 准备好后继续加载其他东西。或者你可以使用[`defer`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-defer). 这两个都在这里解释：[https ://davidwalsh.name/html5-async](https://davidwalsh.name/html5-async)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-11-10T19:22:50.880

这是一个很好的用例`defer`：

```
<script defer src="jquery.js"></script>
<script defer src="custom.js"></script> 
```

这些标签都不会阻止渲染。浏览器可以`jquery.js`并行下载`custom.js`。它将`jquery.js`在下载并加载 DOM 后立即执行，然后`custom.js`再执行。

可悲的是，有几个问题：

*   您不能将该`defer`属性用于内联脚本。
*   已记录 IE < 10 会导致脚本意外`defer`地[交错执行](https://github.com/h5bp/lazyweb-requests/issues/42)。
*   我找不到任何规范说具有`defer`顺序的脚本应该按顺序执行，只是它们应该在 DOM 加载后执行。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-26T02:38:08.687

这可能是您正在寻找的：
[http](http://www.yterium.net/jQl-an-asynchronous-jQuery-Loader) ://www.yterium.net/jQl-an-asynchronous-jQuery-Loader - jQl 一个异步 jQuery 加载器。

它异步加载 jQuery 而不会阻塞其他组件：

```
jQl.loadjQ('http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js'); 
```

jQl 自动捕获所有`jQuery().ready()`调用，因此您可以编写：

```
<script type="text/javascript">
  jQl.loadjQ('http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js');
  jQuery('document').ready(function(){
    alert('Hello world');
  });
</script> 
```

jQl 将对这些函数调用进行排队，并在加载 jQuery 并且 DOM 准备好后立即执行它们，因为它们将以通常的方式执行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-14T19:04:58.733

# 使用递归函数

我写了一个函数来很好地完成这项工作。

```
// scripts.js

function loadScripts(urls, length, success){
    if(length > 0){
        script = document.createElement("script");
        script.src = urls[length-1];
        console.log();
        script.onload = function() {
            console.log('%c Script: ' + urls[length-1] + ' loaded!', 'color: #4CAF50');
            loadScripts(urls, length-1, success);               
        };
        document.getElementsByTagName("head")[0].appendChild(script);
    }
    else{
        if(success){
            success();
        }
    }
}

/* Write links sorted from last one to first to load */
/* Here, jquery will be loaded first, then materialize and then wow libray. */
urls = [ '/js/wow.js', '/js/materialize.js',  '/js/jquery.js'];

loadScripts(urls, urls.length, function(){
    /* Codes inside of here will be executed after js files load */

}); 
```

您可以将这些代码放在一个文件中，并使用属性`scripts.js`加载它。`async`

```
<script async src="js/scripts.js"></script> 
```

对于 css 异步加载，请参阅此答案的编辑版本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-16T02:05:34.093

```
<script>var JSdep = [
        ["//ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.4.min.js", "window.jQuery", "/bundle/jquery"],
        ["//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js", "self.framework === 'bootstrap'", "/bundle/bootstrap"],
        ["//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js", "window.jQuery && window.jQuery.ui && window.jQuery.ui.version === '1.12.1'", "/bundle/jqueryui"],
        ["//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.2/js/bootstrap-select.min.js", "window.jQuery && window.jQuery.fn.selectpicker", "/bundle/bootstrap-select"],
    ]
</script>
<script type="text/javascript">
    var downloadJSAtOnload = function (e) {
        var src = e.srcElement.src.toString();
        //console.log("[jquery] loaded", src);
        for (var i = 0; i < JSdep.length; i++) {
            if (src.indexOf(JSdep[i][0]) !== -1) {
                if ((!JSdep[i][1]) || (eval(JSdep[i][1]))) {
                    console.log("[jquery] loaded ok", src);
                    break;
                } else {
                    console.log("[jquery] fail", src);
                    return;
                }
            }
        }
        if (i === JSdep.length) {
            console.log("[jquery] fallback loaded ok", src);
        }
        if (jqloaded) {
            return;
        }
        jqloaded = true;
        for (var i = 1; i < JSdep.length; i++) {
            //console.log("[jquery] loading", JSdep[i][0], JSdep[i][1], JSdep[i][2]);
            var raf2 = requestAnimationFrame || mozRequestAnimationFrame ||
                webkitRequestAnimationFrame || msRequestAnimationFrame;
            if (raf2) { window.setTimeout(dljquery([JSdep[i][0], JSdep[i][1], JSdep[i][2]]), 0); }
            else window.addEventListener('load', dljquery([JSdep[i][0], JSdep[i][1], JSdep[i][2]]));
        }
    }
    var downloadJSAtOnerror = function (e) {
        var src = e.srcElement.src.toString();
        console.log("[jquery] error", src);
        for (var i = 0; i < JSdep.length; i++) {
            if (src.indexOf(JSdep[i][0]) !== -1) {
                console.log("[jquery] failed try fallback", src);
                dljquery([JSdep[i][2], JSdep[i][1]]);
                return;
            }
        }
        console.log("[jquery] failed on fallback", src);
        return;
    }
    // Add a script element as a child of the body
    var dljquery = function (src) {
        //console.log("[jquery] start", src);
        var element = document.createElement("script");
        element.src = src[0];
        element.async = "async";
        try {
            document.body.appendChild(element);
        } catch (err) {
            console.log("[jquery] err", err);
        }
        if (element.addEventListener) {
            element.addEventListener("load", downloadJSAtOnload, false);
            element.addEventListener("error", downloadJSAtOnerror, false);
        } else if (element.attachEvent) {
            element.attachEvent("onload", downloadJSAtOnload);
            element.attachEvent("onerror", downloadJSAtOnerror);
        } else {
            element.onload = downloadJSAtOnload;
            element.onerror = downloadJSAtOnerror;
        }
    }
    //        var fb = "/bundle/jquery";

    var raf = requestAnimationFrame || mozRequestAnimationFrame ||
        webkitRequestAnimationFrame || msRequestAnimationFrame;
    if (raf) raf(function () { window.setTimeout(dljquery([JSdep[0][0], JSdep[0][1], JSdep[0][2]]), 0); });
    else window.addEventListener('load', dljquery([JSdep[0][0], JSdep[0][1], JSdep[0][2]]));

    var jqloaded = false;

    function doOnload() {
        console.log("[jquery] onload");
    }
    // Check for browser support of event handling capability
    if (window.addEventListener)
        window.addEventListener("load", doOnload, false);
    else if (window.attachEvent)
        window.attachEvent("onload", doOnload);
    else window.onload = doOnload;
</script> 
```

> 发现它我在 jquery 之前有时会遇到引导加载问题 np 希望它可以帮助其他人一个事件告诉我下载何时结束，有时在 jquery 之前加载引导程序，反之亦然，因为引导程序依赖于 jquery 我必须加载 jquery 然后开始下载引导程序现在我将添加回退

修复

> 现在它检查 jq 是否已加载
> 
> 然后才加载其他
> 
> 好的，现在它的复制粘贴

# python - 在 forms.py 中导入视图函数的问题

> ID：14811472
> 
> 赞同：0
> 
> 时间：2013-02-11T12:04:52.327
> 
> 标签：python, django, django-forms, django-views

我在views.py 中创建了一个函数，我想在另一个应用程序的forms.py 中使用这个函数。我在本地服务器上成功地做到了这一点，当我尝试在实时服务器上实现相同的功能时，我得到了内部服务器错误，但是如果我在其他文件中导入相同的功能，比如 views.py 它可以工作。如果我在该 forms.py 中导入同一应用程序的视图功能，我会得到同样的错误。

所以我很困惑它是如何在本地而不是在现场工作的。

我本地系统中的 python 版本是 2.6 并且在 live 是 2.7 ，这是否可能会出现错误。

谢谢。

编辑：

**视图.py**

```
def pass_update(login_info):
   some code 
```

现在在我的 forms.py 中，我想使用这个函数，以便我可以将所需的数据发送到这里。但是当我**从invites.views import pass_update 中**使用它时， 我得到了内部服务器错误。但在我本地相同的代码有效

# java - 当我在 eclipse src 文件夹中粘贴一个 java 文件时，它不显示

> ID：14811473
> 
> 赞同：2
> 
> 时间：2013-02-11T12:04:52.417
> 
> 标签：java, eclipse

我有两个java 项目，一个叫MyServer，一个MyClient 我想合并两个，即只有一个叫MyServer 的项目。

我从硬盘上的 MyClient 文件夹中复制了 .class 文件和 .java 文件，并粘贴到了 MyServer 项目文件夹中。

但它没有出现在 Eclipse 中，我尝试刷新，然后重新启动 Eclipse，但没有显示任何 java 文件。我仍然可以看到 MyServer 自己的源文件，但看不到我刚刚粘贴的 MyClients 文件。

我确定我在做一些非常简单的错误。即使在项目资源管理器中我也看不到源文件

:(

* * *

谢谢大家的回答。我用了 Syam Kumars 的回答。我从 eclipse 中删除了项目，没有删除磁盘选项上的内容，然后导入了一个新项目并将其指向项目文件夹。现在所有文件都可见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:27:10.120

尝试使用 eclipse 文件菜单添加它：

**项目**->**属性**-> **Java 构建路径**->**库**->**添加外部类文件夹**

# javascript - 如何为另一个函数声明变量而不将其作为其他函数的参数传递？

> ID：14811477
> 
> 赞同：0
> 
> 时间：2013-02-11T12:04:57.277
> 
> 标签：javascript

我想知道我该怎么做？

例如

```
function get() {
   alert(s);
}
function declare() {
   var s = "Blah";
   get();
} 
```

但我明白了`s is not defined`。

我知道我们可以通过将它作为参数传递并将其设置为全局变量来做到这一点，但是没有它们怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:06:26.150

您可以使用闭包：

```
function declare() {
   var s = "Blah";
   function get() {
      alert(s);
   }
   get();
} 
```

# java - getViewer().setSelection() 不适用于 FocusCellOwnerDrawHighlighter

> ID：14811486
> 
> 赞同：0
> 
> 时间：2013-02-11T12:05:18.163
> 
> 标签：java, swt, eclipse-rcp, jface, tableviewer

我想将焦点设置在`TableViewer`.

焦点和输入处理定义如下：

```
ColumnViewerToolTipSupport.enableFor(viewer, ToolTip.NO_RECREATE);

FocusCellOwnerDrawHighlighter fch = new FocusCellOwnerDrawHighlighter(viewer);
TableViewerFocusCellManager focusCellManager = new TableViewerFocusCellManager(viewer, fch);

ColumnViewerEditorActivationStrategy actSupport = new ColumnViewerEditorActivationStrategy(viewer) {
            protected boolean isEditorActivationEvent(final 
                   ColumnViewerEditorActivationEvent event) {
                return event.eventType == ColumnViewerEditorActivationEvent.TRAVERSAL
                        || event.eventType == ColumnViewerEditorActivationEvent.MOUSE_CLICK_SELECTION
                        || (event.eventType == ColumnViewerEditorActivationEvent.KEY_PRESSED && event.keyCode == SWT.F2)
                        || event.eventType == ColumnViewerEditorActivationEvent.PROGRAMMATIC;
            }
};

TableViewerEditor.create(viewer, actSupport, ColumnViewerEditor.TABBING_HORIZONTAL
                | ColumnViewerEditor.TABBING_MOVE_TO_ROW_NEIGHBOR |
                 ColumnViewerEditor.TABBING_VERTICAL
                | ColumnViewerEditor.KEYBOARD_ACTIVATION); 
```

选择一行的代码是：

```
getViewer().setSelection(new StructuredSelection(parameterTable.getViewer().getElementAt(selection)), false); 
```

问题是，一旦我使用`FocusCellOwnerDrawHighlighter`,`setSelection`就不再起作用，这意味着没有选择任何行。

任何想法我做错了什么？

问候罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:53:23.090

这不是解决方案。只是详细说明可能是什么问题。我看到一个问题

```
FocusCellOwnerDrawHighlighter:110 line

                    ViewerCell cell = row.getCell(event.index);

                    if (focusCell == null || !cell.equals(focusCell)) {
                        removeSelectionInformation(event, cell);
                    } else {
                        markFocusedCell(event, cell);
                    } 
```

初始焦点单元格将是`Table`. 焦点单元格和选择单元格将不相等，因此它正在删除所选单元格上的选择背景。

# android - 来自 SqlLite 的 Android 日期取决于 GMT

> ID：14811488
> 
> 赞同：0
> 
> 时间：2013-02-11T12:05:24.707
> 
> 标签：android

在 android 中，我正在使用类似`SqlLite`的`MyDate`行`DATETIME DEFAULT CURRENT_TIMESTAMP`。但是当我阅读日期时，我会在一小时前得到日期，因为我`GMT + 1`在我的 android 环境中使用。

```
MyDate: 12:03 
Android date: 13:03 
```

阅读时`SqlLite`如何将其转换为`GMT + X`，取决于 android 环境？

编辑：

代码：

```
 Cursor cursor = logsDao.getAll(LogsDao.KEY_ID + " DESC", "100");
            String[] columns = new String[] { LogsDao.KEY_CONTENT, LogsDao.KEY_COMMENT, LogsDao.KEY_CREATED };
            int[] to = new int[] { R.id.logContext, R.id.logComment, R.id.logCreated };
            SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, 
            R.layout.log_entry, cursor, columns, to);
            setListAdapter(mAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:15:25.517

我想首先您应该将检索到的数据存储在带有 UCT 时区的时间戳中，然后根据手机更新当前时区。

```
String s = "2013-02-11 12:03:00";
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
df.setTimeZone(TimeZone.getTimeZone("UCT"));
Date timestamp = null;
try {
    timestamp = df.parse(s);
    df.setTimeZone(TimeZone.getDefault());
} catch (ParseException e) {
    e.printStackTrace();
} 
```

您需要[实现自定义 cursorAdapter](http://thinkandroid.wordpress.com/2010/01/11/custom-cursoradapters/)并在方法 bindView 中操作您的日期

```
@Override
    public void bindView(View v, Context context, Cursor c) {
        String date;
        date= c.getString(c.getColumnIndex(LogsDao.KEY_CREATED));

        //implement change of timezone

        TextView date_text = (TextView) v.findViewById(R.id.date);
        if (date_text != null) {
            date_text.setText(date);
        }
    } 
```

# php - MySql 查询挑战 - 返回带有空格的结果？

> ID：14811492
> 
> 赞同：2
> 
> 时间：2013-02-11T12:05:38.167
> 
> 标签：php, mysql, database, select

我有一个 MySql 数据库，其中一些行如下：

```
ID    DESC
 1    This is my bike
 2    Motorbikes are great
 3    All bikers should wear helmets
 4    A bike is great for exercise
 5    A. Top. Bike. 
```

我想要做的是返回搜索词周围有空格的行，或者该词位于描述的末尾或开头。

例如，

```
"SELECT * FROM `mytable` WHERE `desc` LIKE '%bike%'" 
```

将返回所有行。但，

```
"SELECT * FROM `mytable` WHERE `desc` LIKE '% bike %' 
```

只会返回第 4 行。

我真正想要的是一种可靠的方式来返回第 1、4 和 5 行，即搜索词被任何东西包围，但字符 Az、0-9。有任何想法吗？这甚至可以用 MySql 实现吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:11:08.663

您可以在 SQL 中使用正则表达式

```
SELECT * FROM `table` WHERE desc REGEXP '\bbike\b' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:15:01.650

您应该开始阅读有关[**MySql RegEx**](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)的内容。

示例代码。

`SELECT * FROM `table` WHERE field_name REGEXP PATTERN;`

**更详细**

**详细信息表**

```
身份证名称
1 迪佩什
2 浸
3 浸
4 滴滴
5迪

```

```
SELECT * FROM details WHERE NAME REGEXP '^Di$';
```

**结果**

名称 -> 迪

```
SELECT * FROM details WHERE NAME REGEXP 'Di$';
```

**结果**

名称 -> 滴滴，滴滴

```
SELECT * FROM details WHERE NAME REGEXP '^Di';
```

**结果**

名称 -> Dip、DiDi、Di

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:10:31.893

您需要在查询中指定附加条件：

```
SELECT  *
FROM    `mytable`
WHERE
    `desc` LIKE '% bike %' OR
    `desc` LIKE '% bike' OR
    `desc` LIKE 'bike %'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:14:03.277

试试这个，希望对你有帮助

```
"SELECT * FROM `mytable` WHERE `desc` LIKE '% bike' 
```

# php - 不工作的RSS和PHP

> ID：14811493
> 
> 赞同：1
> 
> 时间：2013-02-11T12:05:42.467
> 
> 标签：php, rss

我正在为我制作的网站制作 RSS 提要。它从我在网站上自制的新闻功能中获取输入，该功能存储在 MySQL 数据库中。

现在我可以很好地获得文本，但是当我尝试使用`<enclosure>`放入图像时，什么也没有出现。

我用来插入代码的代码如下：

```
if($rows['image'] != 0) {
    $image = mysql_fetch_array(mysql_query("SELECT * FROM dafl_news_imagedb WHERE id = '".$rows['image']."' LIMIT 1"));
    $imageUrl = "http://dafl.dk/content/news/pics/".$image['filename'];
    $imageType = substr($imageUrl, strlen($imageUrl) - 3, 3);
    $enclosedImage = '
    <enclosure url="'.$imageUrl.'" length="0" type="image/'.$imageType.'" />
    ';
    echo $enclosedImage;
} 
```

并在 rss 的源代码中：

```
<enclosure url="http://dafl.dk/content/news/pics/13.png" length="0" type="image/png" /> 
```

rss 的链接是： [http ://dafl.dk/rss/?language=en](http://dafl.dk/rss/?language=en)

（仅当新闻帖子的图像出现时才包含图片。这是一个问题 - 并非所有项目都有附件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:10:05.397

试试这个链接，看看附件标签在目标浏览器中是否有效。

[http://www.w3schools.com/rss/tryrss.asp?filename=rss_ex_enclosure](http://www.w3schools.com/rss/tryrss.asp?filename=rss_ex_enclosure)

参考资料： [http ://www.w3schools.com/rss/rss_tag_enclosure.asp](http://www.w3schools.com/rss/rss_tag_enclosure.asp)

# qt - 在linux中使用蓝牙和qt

> ID：14811495
> 
> 赞同：0
> 
> 时间：2013-02-11T12:05:48.990
> 
> 标签：qt, bluetooth

我用 C 语言编写了一个程序，通过蓝牙将电脑与设备连接起来。程序从终端运行，接收到的数据也显示在终端中。到现在为止还挺好。

现在我在 qt 中创建了一个 gui，其主要目的是呈现之前在终端中显示的信息，现在在 qwtplots 中。

好吧，到目前为止，我可以通过 gui 将设备与 pc 连接，但是当我从设备请求信息时，它显示在终端中，但 gui 开始无响应。

这是从设备请求信息的插槽：

```
// Main Bluetooth
void gui::main_b()
{
    // BLUETOOTH STUFF
    int status, bytes_read;
    int conta = 0;
    FILE *data = NULL;

    fd_set readmask;
    struct timeval tv;
    char buf[101];
    int v, v1, v2;

    tv.tv_sec = 0;
    tv.tv_usec = 100000;

    // Standard messages
    char *startstr = "@START,0060,FF,12;";

    write (sock, startstr, strlen (startstr));

    data = fopen ("data.txt", "w");
    while (conta < 100)
    {
        int i;
        memset (buf, 0, 100);
        FD_ZERO (&readmask);
        FD_SET (sock, &readmask);
        if (select (255, &readmask, NULL, NULL, &tv) > 0)
        {
            if (FD_ISSET (sock, &readmask))
            {
                int numb;
                numb = read (sock, buf, 100);

                // 12 bits
                if (ui->comboBox->currentIndex() == 1)
                {
                    if (numb == 14)
                    {
                        conta++;
                        //printf ("received %d bytes:\n", numb);
                        // print of counter
                        //printf ("%d,", buf[0]);
                        fprintf (data, "%d,", buf[0]);
                        for (i = 1; i < numb-1; i += 3)
                        {
                            v1 = buf[i] | ((buf[i + 1] & 0x0F) << 8);
                            v2 = buf[i + 2];
                            v2 = (v2 << 4) | ((buf[i + 1] & 0xf0) >> 4);
                            printf ("%d,%d,", v1, v2);
                            //fprintf (data, "%d,%d,", v1, v2);
                        }

                        printf ("\n");
                        //fprintf (data, "\n");
                    }
                }
            }
        }
    }
    fclose (data);
} 
```

所以，当我点击调用这个插槽的按钮时，它永远不会让我再次使用 gui。

这适用于终端。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:10:59.770

而不是您自己的`select`，您应该使用[QSocketNotifier](http://qt-project.org/doc/qt-4.8/qsocketnotifier.html)类并为 Qt 事件循环提供您自己的文件句柄。

您还可以使用[此 QFile::open 重载](http://qt-project.org/doc/qt-4.8/qfile.html#open-7)将您的套接字转换为 QIODevice 实例。

第三种选择是将自己的`select`循环放入不同的线程中，这样就不会阻塞 Qt 主事件循环。但这会带来很多额外的复杂性，所以我只会作为最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T17:32:44.157

您正在`while`与 GUI 相同的线程中运行循环，因此事件队列被阻塞。你有两个选择：

*   在循环期间，调用`QCoreApplication::processEvents()`. 这会强制处理事件队列。
*   将 while 循环逻辑分离到它自己的线程中。

第一个*更*简单，但通常被认为效率低下，因为几乎所有计算机都有多个内核。

# c# - JPEG 压缩比原始 JPEG 大得多的 TIFF

> ID：14811496
> 
> 赞同：2
> 
> 时间：2013-02-11T12:05:54.947
> 
> 标签：c#, image-processing, jpeg, tiff, freeimage

我正在尝试使用*FreeImage.Net*和 C#将**JPEG 转换为具有 JPEG 压缩的 TIFF 。**这很好用，但是，对于低质量的 JPGES，TIFF 文件比原始文件大很多。我假设 TIFF 大小不依赖于原始 JPEG 质量，因为输出图像的大小始终大致相同。

 *例如（转换屏幕截图）：

```
2065kb JPEG (quality: 100%) --> 1282kb TIFF
 379kb JPEG (quality:  50%) --> 1200kb TIFF 
```

这种规模的增加对我们公司来说是不可接受的，因为我们的客户和我们正在处理大量的文件。

有趣的是，当我使用 GIMP 转换图像时，我得到了大致相同的结果。现在我想知道：**这是根据 TIFF 标准还是 FreeImage/GIMP 的特殊标准？**（我认为两者都使用*libtiff.dll*）。

我想还有另一种方法，因为我们公司有一台扫描仪，它可以生成尺寸更小的 JPEG 压缩 TIFF 图像。**有谁知道**可以更有效地处理此转换或在 FreeImage 中实现此转换的另一个库（无论是否免费）？

***更新：***

我查看了[TIFF 6.0 规范](http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf)，分析了我们的扫描仪生成的文件，并能够编写一个函数，将 JPEG 包装到一个非常简单的 TIFF 容器中（也适用于合并到多页 TIFF 的多个 JPEG）。

对于那些对 TIFF 有一点了解的人：我制作了一个新的 TIFF 文件（根据图像/页面的数量，包含一个或多个 IFD）并将现有 JPEG 图像的原始数据写入单个条带（每个 IFD），使用以下字段/条目：

```
NewSubfileType = 0
ImageWidth = //(width of the original JPEG)
ImageLength = //(height of the original JPEG)
BitsPerSample = {8, 8, 8} //(count: 3)
Compression = 7 //(JPEG)
PhotometricInterpretation = 6 //(YCbCr)
StripOffsets = //(offset of raw JPEG data, count: 1)
SamplesPerPixel = 3
RowsPerStrip = //(height of the original JPEG)
StripByteCounts = //(length of raw JPEG data, count: 1)
XResolution = //(horizontal resolution of original JPEG data)
YResolution = //(vertical resolution of original JPEG data)
PlanarConfiguration = 1 (chunky)
ResolutionUnit = 2 //(Inch) 
```

（为了获取原始图像的信息，我使用了 FreeImage，但任何其他图像库应该也可以。）

我知道可能有一些我还不知道的陷阱。它可能不适用于任何 JPEG 文件。另外，我不确定为什么我必须使用`PhotometricInterpretation = 6`和`PlanarConfiguration = 1`/或其他一些字段的值。但是，它有效。

我想我对其他库的问题是，它们生成了一个质量始终相同的全新 JPEG（因为您只能将 TIFF 压缩设置为 JPEG，但不能指定任何其他选项）并将其包装到 TIFF 容器中。

我现在也知道，TIFF 中的 JPEG 压缩并不是最好的选择（它是有损的、不常见的并且很少支持，除了 JPEG 压缩的 TIFF 并不比普通的 JPEG 文件好）。但是，我们的客户要求这样做。让我们看看上面是否会成为一个合适的解决方案，或者我是否设法找到其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:51:26.280

不太支持JPEG压缩。如果库确实包含这种压缩类型，则设置（如 JPEG 质量）通常是固定的，并且原始图像很可能会被重新压缩。但是，我找到了一种方法，将原始 JPEG 包装在一个简单的 TIFF 容器中（*--> 请参阅我原始问题中的更新*）。

**请记住：这可能不适用于任何 JPEG 文件！**例如，FreeImage 无法读取打包的*渐进式*JPEG。

这是我使用的 C# 代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using FreeImageAPI;

namespace Tiff
{
    static class TiffConverter
    {
        /// <summary>
        /// <para>Wraps a list of JPEG images into a simple multi-page TIFF container.</para>
        /// <para>(Might not work with all JPEG formats.)</para>
        /// </summary>
        /// <param name="jpegs">The JPEG-image to convert</param>
        /// <returns></returns>
        public static byte[] WrapJpegs(List<byte[]> jpegs)
        {
            if (jpegs == null || jpegs.Count == 0 || jpegs.FindIndex(b => b.Length == 0) > -1)
                throw new ArgumentNullException("Image data must not be null or empty");

            MemoryStream tiffData = new MemoryStream();
            BinaryWriter writer = new BinaryWriter(tiffData);
            uint offset = 8; // size of header, offset to IFD
            ushort entryCount = 14; // entries per IFD

            #region IFH - Image file header

            // magic number
            if (BitConverter.IsLittleEndian)
                writer.Write(0x002A4949);
            else
                writer.Write(0x4D4D002A);

            // offset to (first) IFD
            writer.Write(offset);

            #endregion IFH

            #region IFD Image file directory

            // write image file directories for each jpeg
            for (int i = 0; offset > 0; i++)
            {
                // get data from jpeg with FreeImage
                FreeImageBitmap jpegImage;
                try
                {
                    jpegImage = new FreeImageBitmap(new MemoryStream(jpegs[i]));
                }
                catch (Exception ex)
                {
                    throw new Exception("Could not load image data at index " + i, ex);
                }
                if (jpegImage.ImageFormat != FREE_IMAGE_FORMAT.FIF_JPEG)
                    throw new ArgumentException("Image data at index " + i + " is not in JPEG format");

                // dta to write in tags
                uint width = (uint)jpegImage.Width;
                uint length = (uint)jpegImage.Height;
                uint xres = (uint)jpegImage.HorizontalResolution;
                uint yres = (uint)jpegImage.VerticalResolution;

                // count of entries:
                writer.Write(entryCount);

                offset += 6 + 12 * (uint)entryCount; // add lengths of entries, entry-count and next-ifd-offset

                // TIFF-fields / IFD-entrys:
                // {TAG, TYPE (3 = short, 4 = long, 5 = rational), COUNT, VALUE/OFFSET}
                uint[,] fields = new uint[,] { 
                    {254, 4, 1, 0}, // NewSubfileType
                    {256, 4, 1, width}, // ImageWidth
                    {257, 4, 1, length}, // ImageLength
                    {258, 3, 3, offset}, // BitsPerSample
                    {259, 3, 1, 7}, // Compression (new JPEG)
                    {262, 3, 1, 6}, //PhotometricInterpretation (YCbCr)
                    {273, 4, 1, offset + 22}, // StripOffsets (offset IFH + entries + values of BitsPerSample & YResolution & XResolution)
                    {277, 3, 1, 3}, // SamplesPerPixel
                    {278, 4, 1, length}, // RowsPerStrip
                    {279, 4, 1, (uint)jpegs[i].LongLength}, // StripByteCounts
                    {282, 5, 1, offset + 6}, // XResolution (offset IFH + entries + values of BitsPerSample)
                    {283, 5, 1, offset + 14}, // YResolution (offset IFH + entries + values of BitsPerSample & YResolution)
                    {284, 3, 1, 1}, // PlanarConfiguration (chunky)
                    {296, 3, 1, 2} // ResolutionUnit
                };

                // write fields
                for (int f = 0; f < fields.GetLength(0); f++)
                {
                    writer.Write((ushort)fields[f, 0]);
                    writer.Write((ushort)fields[f, 1]);
                    writer.Write(fields[f, 2]);
                    writer.Write(fields[f, 3]);
                }

                // offset of next IFD
                if (i == jpegs.Count - 1)
                    offset = 0;
                else
                    offset += 22 + (uint)jpegs[i].LongLength; // add values (of fields) length and jpeg length
                writer.Write(offset);

                #region values of fields

                // BitsPerSample
                writer.Write((ushort)8);
                writer.Write((ushort)8);
                writer.Write((ushort)8);

                // XResolution
                writer.Write(xres);
                writer.Write(1);

                // YResolution
                writer.Write(yres);
                writer.Write(1);

                #endregion values of fields

                // actual image data
                writer.Write(jpegs[i]);
            }
            #endregion IFD

            writer.Close();
            return tiffData.ToArray();
        }
    }
} 
```*

# c++ - 神秘的 HRESULT 错误

> ID：14811497
> 
> 赞同：0
> 
> 时间：2013-02-11T12:05:57.070
> 
> 标签：c++, windows, directx, hresult

以下 EndDraw() 函数返回 HRESULT 错误代码：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd371924%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371924%28v=vs.85%29.aspx)

该文档指定：

> 如果方法成功，则返回 S_OK。否则，它会返回 HRESULT 错误代码并将 tag1 和 tag2 设置为发生错误时处于活动状态的标签。
> 
> ...然后返回一个 HRESULT 指示操作成功...

我得到的返回值`-2003238911 (0x88990001)`没有出现在 Microsoft 的“通用 HRESULT 值”页面上：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa378137%28v=vs.85%29 .aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378137%28v=vs.85%29.aspx)

我也搜索了错误代码，`WinError.h`但在那里也找不到。如果它返回此代码，则必须有一种方法可以找出它的含义。

如何解释此错误代码以找出问题所在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:09:36.367

您使用谷歌，该十六进制代码的最高结果是：

```
D2DERR_WRONG_STATE
0x88990001
The object was not in the correct state to process the method. 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd370979(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370979(v=vs.85).aspx)

我不知道关于图形编程或 Windows 编程的第一件事，但我认为这回答了你的问题，结合文档说明标签值将返回给你，指的是发生错误的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T19:00:57.087

最后但并非最不重要的..

我得到了同样的错误，直到我意识到我没有首先调用 ID2D1HwndRenderTarget::BeginDraw() 以便为绘制调用准备渲染目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T17:22:09.713

（我刚刚创建了一个帐户来投票赞成 Loul G 的答案。但我还没有投票的权限......）

我也有同样的问题...

当 BeginDraw() 和 EndDraw() 被乱序调用时，你可以得到 HRESULT: 0X88990001

回溯以查看调用它们的顺序。

此外，为了帮助防止这种情况，您可以围绕 BeginDraw()、EndDraw() 调用，例如：

```
bool beginCalled;
int beginCount;//for debugging
int endCount;//for debugging
//initialize variables somewhere...

void begin(){
   rendTarget>BeginDraw();
   beginCalled = true;
   beginCount++;
}

void end(){
   if(beginCalled){
      rendTarget->EndDraw();
      beginCalled = false;
   }
   endCount++;

} 

//print counts as necessary for debugging 
```

# spring - 弹簧数据自动装配不起作用

> ID：14811498
> 
> 赞同：0
> 
> 时间：2013-02-11T12:05:57.063
> 
> 标签：spring, autowired

我有以下测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:ApplicationContext.xml")
public class CompoundServiceImplTest {

    @Autowired
    @Qualifier("testCompoundService")
    private TestCompoundService testCompoundService;

    //...
} 
```

和 ApplicationContext 包含：

```
<bean id="testCompoundService"  autowire="byType"
      class="myPackage.TestCompoundService">
</bean> 
```

如果还尝试了 autowire byName 或离开 @Qualifier （我补充说，因为它不起作用，但这也无济于事）。

我得到以下异常：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: 
    No matching bean of type [myPackage.TestCompoundService] found for dependency: 
        expected at least 1 bean which qualifies as autowire candidate for this dependency. 
        Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true),
        @org.springframework.beans.factory.annotation.Qualifier(value=testCompoundService)} 
```

bean 显然是配置但 spring 声称它不是？

我该如何解决这个问题？

编辑：

当我将 @Autowired 更改为 @Resource 时，出现以下错误：

```
Injection of resource dependencies failed; 
    nested exception is org.springframework.beans.factory.BeanNotOfRequiredTypeException: 
    Bean named 'testCompoundService' must be of type [myPackage.TestCompoundService], 
    but was actually of type [$Proxy68] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:49:12.060

解决方案：

[http://blog.nigelsim.org/2011/05/31/spring-autowired-use-interfaces/](http://blog.nigelsim.org/2011/05/31/spring-autowired-use-interfaces/)

TestCompoundService 是一个具体的类。解决方案是创建一个接口并在代码中使用该接口，并在spring配置中使用具体类TestCompoundServiceImpl。

# html - Twitter Bootstrap 导航下拉菜单

> ID：14811503
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:06:31.260
> 
> 标签：html, css, twitter-bootstrap

我一直在尝试向我的网站添加三层导航系统。你可以在这里查看测试：http: [//see-gigs.com/](http://see-gigs.com/)

我得到的问题是第二层效果很好，您将鼠标悬停在该项目上并出现下拉菜单。但是当第二层包含第三层时，项目在任何悬停之前立即可见。关于为什么这不能正常工作的任何想法/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:54:39.643

您用于匹配下拉菜单的选择器也与您的二级下拉菜单匹配，因此当您悬停菜单项时，两个下拉菜单都会打开。要解决此问题，只需使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)仅匹配第一级下拉列表，如下所示：

改变

```
ul#main-nav li.dropdown:hover ul.dropdown-menu {
    display: block;
} 
```

至

```
ul#main-nav li.dropdown:hover > ul.dropdown-menu {
    display: block;
} 
```

# naming-conventions - 为什么在JS中可以使用作用域变量实现封装时使用_前缀？

> ID：14811504
> 
> 赞同：0
> 
> 时间：2013-02-11T12:06:42.017
> 
> 标签：naming-conventions, encapsulation

我刚刚开始了一份具有严格内部代码标准的新工作。其中之一，我以前在 Javascript 中见过很多次，它`_`用作不应从该对象外部访问的对象属性的前缀。

我事实上的个人编码标准倾向于使用很多函数和原语，当我用方法公开对象时，这些通常是语法糖，重复使用的通用插件的别名：我倾向于将所有内容保持在非常严格的范围内，例如每个函数都有不同的目的，并且只给出它需要的数据。结果，在任何给定的范围内，只暴露了最少的部分，并且默认情况下所有内容都是私有的。

下划线前缀属性约定与这里的另外两个大约定密切相关（如我所见），一个是匈牙利符号，另一个是使用必须添加*所有内容*的整体上帝对象。所以我可以看到，从文化`_`上讲，自从

1.  一切都必须在全局对象中作为属性（属性等）公开
2.  由于任何一段代码都可以看到任何其他代码，因此使用元编码系统来尝试帮助程序员不会错误地践踏彼此的代码

编码标准被固定在一个基座上，但它们是被接收的，因此这里没有人可以充分解释它们的用途或原因。我的愤世嫉俗的观点是，在最早的情况下，开发人员要么认为不适合实现通用的、解耦的代码，要么不知道如何在 JS 中封装，后来开发了匈牙利符号以允许一些一致性，同时有效地拥有以补偿人类对固有危险代码架构的认知努力。

任何人都可以给我一个不那么愤世嫉俗的解释暴露但`_`前缀属性的价值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:16:42.927

使用 _ 前缀（有时也是 m_）的一个原因是为了区分一方面的实例变量和另一方面的局部变量和参数，因此它们不能混淆，特别是如果它们具有相同的名称。另一个原因是区分非公共实例变量和公共可见属性，它们由实例变量支持，因此应该具有相同的名称。在像 VB.NET 这样的语言中，这种区别不能通过大小写来区分，所以要添加前缀。

# c# - 尽管文本框包含值，但分配给它们的变量却没有，为什么？

> ID：14811506
> 
> 赞同：0
> 
> 时间：2013-02-11T12:06:50.630
> 
> 标签：c#, textbox

我有一个 Windows 窗体，其中有几个文本框来介绍将使用多种方法的值。

我的意图是定义全局变量，这样它们就可以在整个程序中使用，但是虽然我没有编译错误，但当我检查时变量是空的（所有变量都写了数字）。这里有一些变量，也许我分配了错误的值：

```
//This is in the mainform, where all the textboxes are stored

namespace WindowsFormsApplication1{

public partial class Rotor_Calc:Form

{

        public  Rotor_Calc()
        {
            InitializeComponent();
        }

        public string T_HotIn
        {
            get { return Temphotin.Text; }
            set { Temphotin.Text = value; }
        }

        public string F_Cold
        {
            get { return flowCold.Text; }
            set { flowCold.Text = value; }
        }

// this is in a class named Globals

public class Globals

{
    public static string THotIn;
    public static string FlowCold;

     public Globals(Rotor_Calc Rotor)

     {
         THotIn = Rotor.T_HotIn;

         FlowCold = Rotor.F_Cold;
}

     public static double Thin = Convert.ToDouble(Globals.THotIn);

     public static double speedCold = Convert.ToDouble(Globals.FlowCold);
} 
```

然后，在下面的方法中，我编写了 Globals.Thin，所以它可以从文本框中获取值，但是当我编译时它仍然是空的。

我还想获取另一个变量的计算值并将其写入结果文本框中。为此，我向后遵循相同的过程：

//在主窗体中定义文本框

```
 public string Eff_Hot
        {
            get { return effecthot.Text; }
            set { effecthot.Text = value; }
        }

        public string Eff_Cold
        {
            get { return effectcold.Text; }
            set { effectcold.Text = value; }
        }

//in the globals method, take the value from the calculation method:

public class Globals{

    public static string eff_cold;

    public static string eff_hot;

public Globals(Rotor_Calc Rotor){

         eff_cold = Rotor.Eff_Cold;
         eff_hot = Rotor.Eff_Hot;
}

     public static double effcold=Convert.ToDouble(eff_cold);

     public static double effhot = Convert.ToDouble(eff_hot);
} 
```

当然最后一个不起作用，因为中间的计算给出了无限的值。

我到底在做什么错？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:35:19.500

我认为您的问题在于以下声明：

```
public static double effcold=Convert.ToDouble(eff_cold); 
```

首次访问 Globals 类时立即执行。

这意味着它总是会在你的构造函数被执行之前`Globals(Rotor_Calc Rotor)`被执行，也就是说它会在你的构造函数被执行之前被执行`eff_cold`并且`eff_hot`被赋值。

也许您应该移动`effcold=Convert.ToDouble(eff_cold);`并`effhot = Convert.ToDouble(eff_hot);`进入构造函数，但我不确定，因为我不太清楚您要做什么。

如果您尝试使用 Globals 从应用程序的每个点访问您的 TextBoxes 的值，您应该在 Globals 中保留一个指向您的表单的指针，而不是值。构造函数中的语句只执行一次。这意味着您当时将 TextBox 的值存储在 eff_cold 和 eff_hot 中，除非您再次执行构造函数，否则这些值不会更改。

此外，我不喜欢为仅包含静态内容的类创建构造函数的想法。

您的代码的一个可能的工作版本（如果我做对了）可能是这个：

```
public class Globals    
{
    public static Rotor_Calc Rotor;

     public static double EffHot
     {
         get { return Convert.ToDouble(Rotor.EffHot); }
         set { Rotor.EffHot = value.ToString(); }
     }

     public static double EffCold
     {
         get { return Convert.ToDouble(Rotor.EffCold); }
         set { Rotor.EffCold = value.ToString(); }
     }
} 
```

只要您设置 Globals.Rotor = yourInstanceOfRotor_Calc; 这应该可以工作 （可能 `Globals.Rotor = this;`在Rotor_Calc 的InitializeComponent() 之后加上）。

无论如何，我不喜欢在 Globals 中保留对 Forms 的引用，我更喜欢某种 DataBinding。

根据您的最后评论进行编辑：

你可以为Rotor编写一个setter，在那里分配值并在InitializeComponent()之后调用setter：

```
public class Globals    
{
    public static double EffHot;
    public static double EffCold;
    public static Rotor_Calc Rotor
    {
        set 
        {
            EffHot = Convert.ToDouble(Rotor.EffHot);
            EffCold = Convert.ToDouble(Rotor.EffCold);
        }
     }

} 
```

# python - Python：如何更改颜色栏中的字体？

> ID：14811507
> 
> 赞同：0
> 
> 时间：2013-02-11T12:06:52.077
> 
> 标签：python, matplotlib, colorbar

假设我希望颜色栏中的刻度标签字体与绘图的其余部分不同。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:35:53.500

假设您正在谈论 matplotlib，遍历所有刻度标签并设置字体系列：

```
import numpy as np
import matplotlib.pyplot as plt

plt.imshow(np.random.random((10,10)))
cb = plt.colorbar()

for l in cb.ax.yaxis.get_ticklabels():
    l.set_family("Comic Sans MS")

plt.show() 
```

# android - 随机的？！解析错误

> ID：14811512
> 
> 赞同：-3
> 
> 时间：2013-02-11T12:06:57.477
> 
> 标签：android, xml, saxparser

我在 android 中使用 SAX Parser。我不得不像这样更改 EventHandler：

```
else if(xGrowerNotes){
              profile.setGrowerNotes(profile.getGrowerNotes()+chars);
              //random bug
          } 
```

我有 4 种语言的 XML 文件版本，UTF-8 编码。我用

```
is.setEncoding("UTF-8"); 
```

3 种语言工作正常，但是，西班牙的一种让我很困扰。它开始就像没有 apretar las plantas。Regul ...并且该事件被调用了2次。没有改变的意思是，它会削减第一部分并仅将“ar las plantas. Regul ...”设置为文本。如果我在字符串前面添加“test 1 2 3”，则剪切移动，这意味着前 13 个字符被剪切了。它仅在西班牙语版本中，所有文档均采用相同编码。在文本末尾添加“test 1 2 3”会扩展第二个字符串。

有人可以澄清一下吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:17:15.477

从[文档](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)中：

> Parser 将调用此方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块；但是，任何单个事件中的所有角色都必须来自同一个外部实体，以便定位器提供有用的信息。

这意味着您不能假设在一次调用中获取所有字符数据。必须附加可能在多个调用中报告的所有块以获取完整数据。

# c# - 如何从我的 aspx 网页调用客户端计算机上的 win 应用程序？

> ID：14811517
> 
> 赞同：0
> 
> 时间：2013-02-11T12:07:10.170
> 
> 标签：c#, javascript, asp.net, winforms

我想从我的 aspx 页面调用我的客户端计算机上的 Windows 应用程序，如果可能的话，我想向应用程序发送一些参数。任何指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:11:55.137

您可以做到这一点的唯一方法是自定义开发一个[ActiveX 控件](http://en.wikipedia.org/wiki/ActiveX)并将该控件托管在您的页面中。然后用户必须在他的浏览器中允许 ActiveX 控件。通常，浏览器是一个沙盒，因此您无法从中访问 Windows……但使用 ActiveX，这是可能的。

这是在 C# 中开发 ActiveX 控件的教程：http: [//haseebakhtar.wordpress.com/2011/05/31/creating-an-activex-control-in-net-using-c/](http://haseebakhtar.wordpress.com/2011/05/31/creating-an-activex-control-in-net-using-c/)

当然你仍然可以使用旧的方式，即 VB6 或 C++...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:12:55.877

您可以在 javascript 中使用 Shell API 来调用您的 Windows 应用程序。这仅适用于 Internet Explorer 浏览器。您需要确保您的浏览器安全设置（在客户端）也更改为“***运行 activex 控件***”

[这](http://www.itjungle.com/mpo/mpo052302-story01.html)是一个示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:14:38.737

我不知道具体细节，但这可能会为您指明正确的方向。

例如，某些 IRC 应用程序会在您单击目标为的链接时做出反应`irc://some.host.com`

mac 的 textmate 应用程序也是如此：

```
txmt://open?«arguments» 
```

但是，这只有在目标应用程序在用户机器上注册了自定义 URL 模式时才有可能。此外，用户必须允许访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:18:02.050

您可以编写一个可以从网页启动的[ClickOnce应用程序。](http://en.wikipedia.org/wiki/ClickOnce)

如果将其设为完全信任的应用程序，则可以使用它来启动本地 Windows 应用程序。您可以将参数传递给 ClickOnce 应用程序，该应用程序可以解析它们并将它们传递给本地 Windows 应用程序。

或者，如果您是本地 Windows 应用程序的作者（并且如果它是 C#/.Net），那么您可以使 Windows 应用程序本身成为 ClickOnce 应用程序。

# oracle - 将值从一个表单复制到另一个表单

> ID：14811518
> 
> 赞同：0
> 
> 时间：2013-02-11T12:07:10.323
> 
> 标签：oracle, plsql, oracleforms

我有两种形式，FORM1 和 FORM2。通过流程时，我必须在 form2 中显示 form1 的一些字段（选择值）。

你能帮我写一个 plsql 程序来执行上述操作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:13:51.500

使用全局变量

即使这两种形式不相关，也会使用全局变量。要定义全局变量，请使用：

```
copy(my_value, 'global.my_variable_name'); 
```

在第二种形式中检索值使用：

```
default_value('', 'global.variable_name');
v_variable_value := name_in('global.variable_name'); 
```

注意：default_value 用于在之前未设置的情况下将 global.variable_name 设置为默认值。否则 name_in 将引发异常！
注意 2：所有全局变量都是 varchars。

全局变量可以被同一表单会话中的任何表单读取和写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:32:02.003

如果您想使用 PL/SQL 过程来传递值，首先您应该将值保存在数据库中。如果 Form1 调用 Form2，则可以在表单之间传递 PARAMETER。

# javascript - 将名称动态分配给对象数组

> ID：14811519
> 
> 赞同：1
> 
> 时间：2013-02-11T12:07:19.347
> 
> 标签：javascript

我有一个 JavaScript 问题。
如果我有一个对象数组 objAr，则该对象由 id、name 组成。

如果我要访问`objAr[0].id`它，则返回第一个对象的 id 值。如果对象是动态的会发生什么，因此我不知道它由什么组成，有没有办法动态调用 Object 属性？

目前我正在创建另一个数组

```
var theArr = new Array("id", "name"); 
```

并致电：

```
objAr[0].theArr[0] instead of objAr[0].id. 
```

有没有办法使用Javascript更好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:08:30.570

使用 Javascript，您可以在不知道键的情况下调用对象中的所有属性。
见下文：

```
for(key in objAr[0]) {
   console.log(objAr[0][key]);
} 
```

如果您只想要第一个属性，您可以运行：

```
for(key in objAr[0]) {
   var attFirst = objAr[0][key];
   break;
} 
```

此外，对于 JS 数组，您可以使用方括号。

```
var theArr = ["id", "name"]; 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:12:45.583

在 javascript 中，您始终可以使用“数组表示法”代替“点表示法”

所以这两行是一样的

```
objAr[0].id
objAr[0]["id"] 
```

# recursion - 使用批处理文件将文件从内部目录递归复制到外部

> ID：14811523
> 
> 赞同：0
> 
> 时间：2013-02-11T12:07:31.867
> 
> 标签：recursion, batch-file, xcopy

有这个目录结构：

```
Dir1
--Dir2
    --File1
    --File2
--Dir3
    --File3
--File4
--File5 
```

现在我想使用批处理文件将子目录（Dir2，Dir3）中的所有文件复制到父目录 Dir1。我想出了下面的代码，但它不能完美地工作。我得到以下输出 -

```
Directory2             --It has 4 files all together
Invalid number of parameters
Invalid number of parameters
Does E:\Directory1\Copy\File1.dat specify a file name   -- And only this file gets copied
or directory name on the target
(F = file, D = directory)? 
```

代码 -

```
@echo off
call :treeProcess
Pause
goto :eof

:treeProcess
rem Do whatever you want here over the files of this subdir, for example:
for /D %%d in (*) do (
    echo %%d
    cd %%d
    for %%f in (*) do xcopy %%f E:\Movies\Copy\%%f
    call :treeProcess
    cd ..
)
exit /b 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T12:17:52.740

不需要批处理文件。从 Dir1 文件夹执行以下命令：

```
for /r /d %F in (*) do @copy /y "%F\*" 
```

作为批处理文件

```
@echo off
for /r /d %%F in (*) do copy /y "%%F\*" 
```

但是 - 请注意，您可能在多个子文件夹中具有相同的文件名。只有一个会在您的 Dir1 中存活。

**编辑**

以上假设您正在运行 Dir1 文件夹中的命令（或脚本）。如果脚本被扩充为包含 Dir1 的路径，它可以从任何地方运行。

```
for /r "pathToDir1" /d %F in (*) do @copy /y "pathToDir1\%F\*" 
```

或作为批处理文件

```
@echo off
set "root=pathToDir1"
for /r "%root%" /d %%F in (*) do copy /y "%root%\%%F\*" 
```

您可以将 Dir1 的路径作为参数传递给批处理文件。`.`如果要使用当前文件夹，请作为路径传入。

```
@echo off
for /r %1 /d %%F in (*) do copy /y "%~1\%%F\*" 
```

# webdav - IT-Hit WebDav Server Checkout 和 MS Office 2007

> ID：14811530
> 
> 赞同：1
> 
> 时间：2013-02-11T12:07:57.913
> 
> 标签：webdav

我正在评估 IT-Hit Webdav 组件。他们的 Delta-V 服务器示例是我的起点。如果我直接从 Sharepoint 站点打开 Word 文档，MS Office 会显示一个按钮，让我可以在需要时签出文档。虽然使用 IT-Hit 服务器不为 MS Office 提供此功能。对我们来说重要的是，我们自己使用 IT-Hit 创建的 WebDav 服务器提供与 Sharepoint 相同的功能。我做错了什么，还是这不可能？

Rgards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:20:41.457

Microsoft SharePoint 和 Microsoft Office 正在使用一堆专有的 SharePoint 协议进行通信，它们没有使用 DeltaV。IT Hit WebDAV 服务器引擎没有实现该 Microsoft 协议。因此，您无法仅实现 DeltaV 或使用 DeltaV 示例来实现相同的功能。

据我所知，唯一实现 Microsoft SharePoint 协议的服务器是 Alfresco。

# nginx - 使用 nginx proxy_pass 时的客户端身份验证

> ID：14811532
> 
> 赞同：1
> 
> 时间：2013-02-11T12:08:00.253
> 
> 标签：nginx

我的问题是关于 nginx 指令“proxy_pass”。

我有一个 http 服务器，我需要使用 https 重定向请求。我正在使用以下语句：proxy_pass [https://secure.server](https://secure.server) 在wireshark 中我看到有一个SSL 握手，但是客户端（nginx proxy_pass https:) 没有在服务器的SSL 证书请求中发送证书。服务器需要验证客户端证书。使用 https 时如何强制 proxy_pass 发送客户端证书？以下是 nginx.conf 配置文件的一部分：

```
server {
    listen  8888;
    server_name     _;
    error_page 405 =200 $uri;
    ssl_certificate       /usr/local/cert.pem;
    ssl_certificate_key   /usr/local/cert.pem                                          
    ssl_client_certificate  /usr/local/ca.cer;       

    location ~ /uri/(.+) {

                    proxy_pass https://secure.server;
                    break;
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T20:01:00.977

我也在寻找相同的解决方案。

我找到了 SEnginx，它有一个名为“代理 HTTPS 客户端证书”的模块。从描述看来，应该允许客户端证书，但我无法让它为我工作。后端服务器根本不会提示客户端提供证书。

以下是[SEnginx](http://www.senginx.org/en/index.php/Proxy_HTTPS_Client_Certificate)的链接。

另外：[这](https://serverfault.com/questions/576965/nginx-proxy-pass-with-a-backend-requesting-client-certificates)是一个可能的解释，说明为什么这可能是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:37:17.867

您需要启用 SSL 客户端证书验证。

在其他 SSL 配置下添加：

```
ssl_verify_client on; 
```

[在此处查看更多信息。](http://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_verify_client)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-30T20:58:26.767

在 ssl 握手期间，服务器将发送“客户端证书 ca 名称”。(ie) 服务器将只接受来自这些 CA 的客户端证书。仅当客户端具有由这些 CA 签名的证书时，客户端才会发送发送客户端证书。

因此，在您的情况下，请验证 1\. 服务器为客户端证书请求发送的 CA 名称。这将是您在服务器的信任库中配置的 CA。(ie) 在 ssl 握手期间查找 CertificateRequest 消息

2.  确保您的客户端证书由这些 CA 之一签名

3.  最好的选择是使用 curl 进行验证，您的客户端和服务器证书均已正确配置 curl -vvv --cert /usr/local/cert.pem [https://secure.server](https://secure.server) 如果您无法通过 curl 输出找出答案，请粘贴 curl 输出

# maven - 如何在 URL 中没有用户名和密码的情况下从我自己经过身份验证的关系中获取 Maven 原型？

> ID：14811535
> 
> 赞同：5
> 
> 时间：2013-02-11T12:08:11.297
> 
> 标签：maven, nexus, maven-archetype, sonatype

我有一个私有 Nexus，其存储库通过身份验证保护。

拉取库就像一个魅力，但如果我想使用其中存储的原型之一，我总是需要在原型目录的 URL 中写入纯文本用户名和密码，如下所示：

```
mvn archetype:generate -DarchetypeCatalog=http://username:password@maven.mycompany.com/nexus/content/repositories/myrepo/archetype-catalog.xml 
```

我阅读了[http://maven.apache.org/archetype/maven-archetype-plugin/faq.html#authentication](http://maven.apache.org/archetype/maven-archetype-plugin/faq.html#authentication)并用我从那一点点帮助中了解到的内容更新了我的 settings.xml：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <servers>
    <server>
      <id>myrepo</id>
      <username>username</username>
      <password>{HASHED_PASSWORD}</password>
    </server>
    <server>
      <id>pretty-archetype-unicorn-repo</id>
      <username>username</username>
      <password>{HASHED_PASSWORD}</password>
    </server>
  </servers>

  <profiles>
   <profile>
     <id>someid</id>
     <repositories>
       <repository>
         <id>myrepo</id>
         <name>My Repo</name>
         <url>http://maven.mycompany.com/nexus/content/repositories/myrepo/</url>
       </repository>
     </repositories>
   </profile>
  </profiles>

  <activeProfiles>
    <activeProfile>someid</activeProfile>
  </activeProfiles>

</settings> 
```

不用说，它不起作用，当我尝试时：

```
mvn archetype:generate -DarchetypeCatalog=http://maven.mycompany.com/nexus/content/repositories/myrepo/archetype-catalog.xml 
```

我得到同样的旧：

```
[WARNING] Error reading archetype catalog http://maven.mycompany.com/nexus/content/repositories/myrepo/archetype-catalog.xml
org.apache.maven.wagon.authorization.AuthorizationException: Access denied to: http://maven.mycompany.com/nexus/content/repositories/myrepo/archetype-catalog.xml 
```

任何提示，或带有工作示例的更好文档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T09:47:55.997

如果您不至少指定`-DarchetypeArtifactId`. 根据您链接的官方文档：

```
The server id used to download the artifact is [archetypeArtifactId]-repo 
```

因此，如果目录受密码保护（并且您不愿意在 shell 历史记录中公开用户名/密码），则无法仅浏览目录。

同时，您可以继续投票给[ARCHETYPE-204](https://issues.apache.org/jira/browse/ARCHETYPE-204)。多年来他们已经有一个补丁可用，他们可能只需要一点推动。

**更新**

查看 maven 原型项目的[源代码](http://svn.apache.org/viewvc/maven/archetype/tags/maven-archetype-2.2/archetype-common/src/main/java/org/apache/maven/archetype/source/RemoteCatalogArchetypeDataSource.java?view=markup)，看起来`settings.xml`可能适合您的以下代码段：

```
<servers>
    <server>
      <id>archetype</id>
      <username>${your username}</username>
      <password>${your password}</password>
    </server>
</servers> 
```

在获取远程目录`archetype`时构建对象时有一个默认 ID 。`Repository`我不认为这是处理这种情况的官方方式，而且它有点脏 IMO。但它可能仍然对你有用:-)

此外，您应该能够设置配置文件以重用`archetype`不同服务器的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T03:29:34.450

看起来这是一个已知问题，您不能使用受保护存储库中的原型。见[https://issues.apache.org/jira/browse/ARCHETYPE-204](https://issues.apache.org/jira/browse/ARCHETYPE-204)

可以通过执行以下操作来解决此问题：

```
mvn archetype:generate -DarchetypeCatalog=https://username:password@maven.mycompany.com/nexus/content/repositories/myrepo/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T17:11:46.620

我认为它应该在您的 settings.xml 中

```
<servers>
    <server>
      <id>myrepo</id>
      <username>${your username}</username>
      <password>${your password}</password>
    </server>
</servers> 
```

您需要`<server>`为每个受密码保护的存储库添加。

# php - 如何在opencart v1.5.5中添加告诉朋友表格

> ID：14811538
> 
> 赞同：0
> 
> 时间：2013-02-11T12:08:21.357
> 
> 标签：php, opencart

谁能告诉我
这个查询 的工作代码示例

如何在opencart v1.5.5中添加告诉朋友表格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:13:57.183

这是一个扩展。有关详细信息，请参阅[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=4348](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=4348)或[在此处](http://www.best-byte.com/tell-a-friend-form-oc-free-mod-opencart)免费下载。

# algorithm - 期望最大化算法的数值示例

> ID：14811541
> 
> 赞同：6
> 
> 时间：2013-02-11T12:08:51.767
> 
> 标签：algorithm, machine-learning, data-mining, expectation-maximization

由于我不确定给出的公式，任何人都可以提供 EM 算法的简单数字示例吗？一个非常简单的具有 4 或 5 个笛卡尔坐标的坐标就可以了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:49:55.017

这个怎么样： [http ://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Clustering/Expectation_Maximization_(EM)#A_simple_example](http://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R/Clustering/Expectation_Maximization_(EM)#A_simple_example)

一年前我还在 (edit)R 中写了一个简单的例子，不幸的是我找不到它。稍后我会再次尝试找到它。

编辑：这是-

```
EM <-函数（）
{
    ### 读取文件，获取必要的列
    dataFile <- read.csv("wine.csv", head = FALSE, sep = ",")
    sl <- 数据文件 [, 2]
    #sw <- 数据文件 [, 3]
    #pl <- 数据文件 [, 3]
    #pw <- 数据文件 [, 4]
    类 <- 数据文件 [, 5]
    N <- 长度（sl）
    pi1 <- 0.5
        ＃＃＃ 在里面 ＃＃＃
    rand1 <- floor(runif(1) * N)
    rand2 <- floor(runif(1) * N)
    mu1 <- sl[rand1]
    mu2 <- sl[rand2]
    mean1 <- sum(sl)/N
    sigma1 <- sum( (sl - mean1) ** 2) / N
    sigma2 <- sigma1
    打印(mu1)
    打印（亩2）
    打印（sigma1）
    打印（sigma2）
    计数 <- 10
    计数 <- 1
    prevmu1 <- 0.0;
    prevmu2 <- 0.0;
    prevsigma1 <- 0.0;
    prevsigma2 <- 0.0;
    伽玛 <- 数组（0，长度（sl））
    而（计数 <= COUNTLIM）
    {
        伽玛 <- pi1 * dnorm(sl, mu2, sigma2)/ ( (1 - pi1) * dnorm(sl, mu1, sigma1) + pi1 * dnorm(sl, mu2, sigma2))
        mu1 <- sum((1 - gamma) * sl) / sum(1 - gamma) 

        mu2 <- sum((gamma) * sl) / sum(gamma)

        sigma1 <- sum((1 - gamma) * (sl - mu1) ** 2)/sum(1 - gamma)
        sigma2 <- sum((gamma) * (sl - mu2) ** 2)/sum(gamma)
        pi1 <- sum(gamma)/N
        打印（c（mu1，mu2，sigma1，sigma2，pi1））
        如果（计数 == 1）
        {
            prevmu1 <- mu1;
            prevmu2 <- mu2;
            prevsigma1 <- sigma1;
            prevsigma2 <- sigma2;
        }
        别的
        {
            val <- ((prevmu1 - mu1)* *2 + (prevmu2 - mu2)* *2 + (prevsigma1 - sigma1)* *2 + (prevsigma2 - sigma2)* *2) ** 0.5;
            打印（c（“val：”，val））
            如果 (val <= 1)
            {
                休息;
            }
        }
        计数 <- 计数 + 1
    }
    打印(mu1)
    打印（亩2）
    打印（sigma1）
    打印（sigma2）
}

```

# android - 如果关闭 3g，android emualtor 就会消失

> ID：14811546
> 
> 赞同：1
> 
> 时间：2013-02-11T12:09:15.227
> 
> 标签：android, android-emulator

当我按 F8 并想关闭 3g 时，虚拟设备从 DDMS 中消失。所以我不得不重新启动设备才能出现在 DDMS 中。我需要关闭互联网连接来调试我的应用程序的功能。任何建议如何解决这个问题？

# linux - 使用 XGetPointerMapping/XSetPointerMapping 交换鼠标按钮

> ID：14811549
> 
> 赞同：0
> 
> 时间：2013-02-11T12:09:26.763
> 
> 标签：linux, x11

我在[http://linux.die.net/man/3/xgetpointermapping](http://linux.die.net/man/3/xgetpointermapping)找到了这两个 API 。我认为它们可以用来交换 linux 或 mac 系统上的鼠标按钮。我以下列方式使用它：

```
 Display *   curdisp;    // Current display.
    char        curmap[MAX_NUM];// Current mapping.
    int         nmap;       // number of mappings.

curdisp = XOpenDisplay(NULL);

nmap    = XGetPointerMapping(curdisp, curmap, MAX_NUM);
if(!nmap)
    return -1;

if(curmap[0] == '1' && curmap[2] == '3') {
    curmap[0] = '3';
    curmap[2] = '1';
} else {
    curmap[0] = '1';
    curmap[2] = '3';
}

//Set the mapping.
nmap    = XSetPointerMapping(curdisp, curmap, nmap); 
```

但是调用 XSetPointerMapping 返回 0 并且对鼠标按钮没有影响。谁能给出一些使用 XSetPointerMapping 交换鼠标按钮的例子？或如何正确使用？它会立即起作用吗？

使用的操作系统是 Mac OS X 10.7.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:42:04.703

按钮编号存储为无符号字符，但不存储为字符。将“1”和“3”更改为 1 和 3。

您的代码将它们映射到按钮 49 和 51，并且确实会影响使按钮 1 和 3 无法使用的按钮。

# java - NestedServlet 异常

> ID：14811550
> 
> 赞同：0
> 
> 时间：2013-02-11T12:09:27.727
> 
> 标签：java, spring, hibernate

在某些情况下我得到了这个例外。我试图跟踪堆栈跟踪，但无法找到导致此问题的原因。你能帮助我吗 ？

如您所见，它是 MVC spring 应用程序。确信一切都很好地定义在 web.xml 和 servlet xml 文件中。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at me.hatem.ui.web.filter.MenuAuthorizationFilter.doFilterInternal(MenuAuthorizationFilter.java:69)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at me.hatem.ui.web.filter.MenuGeneratorFilter.doFilterInternal(MenuGeneratorFilter.java:46)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:722)Caused by: java.lang.NullPointerException
at me.hatem.tms.masterdata.general.configuration.SystemConfiguration.getDefaultPageSize(SystemConfiguration.java:47)
at me.hatem.tms.taxpayer.web.servlet.controller.DeclarationsController.createSearchForm(DeclarationsController.java:47)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
at org.springframework.web.method.annotation.ModelFactory.invokeModelAttributeMethods(ModelFactory.java:123)
at org.springframework.web.method.annotation.ModelFactory.initModel(ModelFactory.java:97)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:601)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
... 69 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:12:33.600

这是您的原因（粗略搜索“Caused”一词）：

```
Caused by: java.lang.NullPointerException
at me.hatem.tms.masterdata.general.configuration.SystemConfiguration.getDefaultPageSize(SystemConfiguration.java:47)
at me.hatem.tms.taxpayer.web.servlet.controller.DeclarationsController.createSearchForm(DeclarationsController.java:47) 
```

值得在您最喜欢的编辑器中加载这样的跟踪并搜索“Caused”，因为（如您所见）堆栈跟踪会掩盖相关信息。

# android - Android Twitter 集成 - 卡在登录页面？

> ID：14811556
> 
> 赞同：3
> 
> 时间：2013-02-11T12:09:38.773
> 
> 标签：android, twitter, android-webview, android-twitter

我有来自以前的 Android 应用程序的代码，我成功地与 Twitter 集成。我已将此代码复制到一个新应用程序中，并为我的新应用程序更改了`callback-url`,和 。`consumer-key``consumer-secret`

使用该`twitter4j`库，我可以获得我的`RequestToken`身份验证 URL，如下所示：

```
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(myConsumerKey, myConsumerSecret);
RequestToken requestToken = twitter.getOAuthRequestToken(myCallbackUrl);
String authenticationUrl = requestToken.getAuthenticationURL() 
```

具有`RequestToken`非空`token`值、非空`tokenSecret`值和空`secretKeySpec`值。身份验证 url 的格式如下：

```
http://api.twitter.com/oauth/authenticate?oauth_token=... 
```

我在我的中加载了这个 url，`WebView`我看到了以下页面：

![登录页面](../Images/1c4893911082a85a4c291f4514ebad9f.png)

我在这里卡住了。当我单击`Sign In`按钮时，只是同一页面不断加载。没有其他的。但是，当我单击该`Cancel`按钮时，我会看到以下页面：

![在此处输入图像描述](../Images/6ceac816cd06d80facb7aa4fe9196a87.png)

只有在我单击`Return to Fan League Beko BBL`按钮时才会在此页面上`callback-url`调用我，并使用一个`denied`以 my`oauth_token`作为其值的参数。任何人以前都见过这样的事情并且知道什么可能会阻止我的登录请求被处理？？？

> **更新 1：**我已经尝试了`Sign In`来自桌面浏览器的身份验证 URL 和按钮，它按预期工作，处理响应，然后调用回调 URL。`WebView`在我的 Android 应用程序中尝试它只是失败了。我已经在多个 Android 设备和平板电脑上尝试过。我也启用了 JavaScript，`WebView`所以不是这样。想法最受欢迎。我没主意了！
> 
> **更新 2：**我刚刚对我`WebView`的 's进行了一些调试模式代码跟踪，`WebViewClient`我看到当我单击`Sign In`按钮时，`shouldOverrideUrlLoading(WebView webView, String url)`没有调用该方法，但调用了以下三个方法（按顺序）`onPageStarted(WebView view, String url, Bitmap favicon)`：，`onLoadResource(WebView view, String url)`, `onPageFinished(WebView view, String url)`. 这些方法的`url`值是: `https://api.twitter.com/oauth/authenticate`，即`oauth_token`参数已从认证 url 中剥离。也许这是一个`POST`被视为请求的`GET`请求，因此为什么同一页面不断加载？有什么想法可以`Sign In`正确处理此按钮按下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T22:29:02.230

我猜你忘了从 twitter 应用程序控制面板设置回调 url。

登录 twitter api 部分，选择您的应用程序并转到设置选项卡。

![在此处输入图像描述](../Images/bbd42a6acfe9401cd921102ea97fbcc1.png)

如果你不这样做，当用户按下登录时，不会发生重定向，因此你将无法捕捉到验证者。

另一方面，当您设置回调 url 时，您的 webview 可以拦截重定向。

注意：您可以设置任何您想要的 url，重要的是捕获传递给重定向 url 的 oauth_verifier 参数。

在这种情况下，您的

```
shouldOverrideUrlLoading 
```

应该被触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:59:41.527

从 WebViewClient覆盖并在您在 onResume() 和onCreate() 中使用的`onLoadResource(WebView view, String url)`Authorization Activity 中使用此代码。`webView.loadUrl(authenticationUrl)``webView.setWebViewClient(webViewClient)`

```
private WebViewClient webViewClient = new WebViewClient() {
    @Override
    public void onLoadResource(WebView view, String url) {
        // the URL we're looking for looks like this:
        // callbackurl?oauth_token=1234567890qwertyuiop
        Uri uri = Uri.parse(url);
        if (uri.getHost().equals("callbackurlhost")) {
            String token = uri.getQueryParameter("oauth_token");
            if (null != token) {
                webView.setVisibility(View.INVISIBLE);
                AccessToken accessToken = twitter.getOAuthAccessToken();
                // TODO store access token
                finish();
            } else {
                // TODO tell user to try again 
            }
        } else {
            super.onLoadResource(view, url);
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T07:29:37.000

我最近在我的应用程序中集成了 Twitter 上的共享。它工作完美。

我使用了最新的 twitter4j-core-3.0.3.jar

我创建了一个简单的演示应用程序，您可以从以下链接下载并仔细阅读。 [http://santhoshkumaar.blogspot.in/2013/02/posting-message-on-twitter.html](http://santhoshkumaar.blogspot.in/2013/02/posting-message-on-twitter.html) [https://github.com/santhoshkumaar/ShareOnTwitter/](https://github.com/santhoshkumaar/ShareOnTwitter/)

这可能对您有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T15:09:12.367

奇怪的是，我的 Twitter 集成已经开始工作了。我没有更改我的应用程序代码或应用程序的 Twitter 设置。我注意到 Twitter 身份验证页面以前有一个蓝色`Sign In`按钮，现在它有一个蓝色`Authenticate app`按钮。所以我猜在 Twitter 结束时有些东西被改变/修复了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T07:39:11.597

有没有放回调地址？

**公共静态最终字符串CALLBACK_URL =“twitterapp：//connect”；**

检查您的授权方法：

```
mHttpOauthConsumer = new CommonsHttpOAuthConsumer(mConsumerKey, mSecretKey);
mHttpOauthprovider = new DefaultOAuthProvider("http://twitter.com/oauth/request_token",
                                                     "http://twitter.com/oauth/access_token",
                                                     "http://twitter.com/oauth/authorize");

public void authorize() 
{
        mProgressDlg.setMessage("Initializing ...");
        mProgressDlg.show();

        new Thread() {
            @Override
            public void run() {
                String authUrl = "";
                int what = 1;

                try {
                    authUrl = mHttpOauthprovider.retrieveRequestToken(mHttpOauthConsumer, CALLBACK_URL);    

                    what = 0;

                    Log.d(TAG, "Request token url " + authUrl);
                } catch (Exception e) {
                    Log.d(TAG, "Failed to get request token");

                    e.printStackTrace();
                }

                mHandler.sendMessage(mHandler.obtainMessage(what, 1, 0, authUrl));
            }
        }.start();
    } 
```

**调用 twitter.authorize();** 希望这可以帮助

# java - 用于 HTML 到 Java (POJO) 转换的 Java 库

> ID：14811557
> 
> 赞同：0
> 
> 时间：2013-02-11T12:09:39.490
> 
> 标签：java, html, reverse-engineering, templating

使用[Apache Velocity Api](http://velocity.apache.org/)，我们可以将 Java 对象（列表、POJO 等）与 (HTML)[模板](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html)组合并创建 (HTML) 输出。

是否有任何 Java API 可以帮助对此进行逆向工程？此 API 的输入可以是 HTML 输出和使用的模板，输出应该是用于生成输出的数据（Java/XML 格式）。

我知道[HTTP Unit API](http://httpunit.sourceforge.net/)，但这只是让我提取 HTML 元素（如表格）。我正在寻找基于某些模板提取数据的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:13:23.553

您可以使用 google protobuf 来转换不同类型的消息。定义模板也很容易。我使用 JSON.parse() 创建 JavaScript 对象，在 Java 中，您可以使用 protobuf 将 JSON 转换为 Java 对象。

1.  [http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)
2.  [http://code.google.com/p/protobuf-java-format/](http://code.google.com/p/protobuf-java-format/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T22:16:11.050

我的回答可能对这个问题的作者没有用（我迟到了 5 年，所以我猜这不是正确的时间）但由于这是我在谷歌上打字时发现的第一个结果`HTML to POJO`，我认为它可能对许多其他可能会遇到此答案的开发人员。

今天，我刚刚（以我公司的名义）发布了一个 HTML 到 POJO 的完整框架，您可以使用该框架将 HTML 映射到任何 POJO 类，只需一些注释。该库本身非常方便，并且具有许多其他功能，同时非常易于插入。您可以在这里查看它：[https ://github.com/whimtrip/jwht-htmltopojo](https://github.com/whimtrip/jwht-htmltopojo)

## 如何使用：基础

假设我们需要解析以下 html 页面：

```
<html>
    <head>
        <title>A Simple HTML Document</title>
    </head>
    <body>
        <div class="restaurant">
            <h1>A la bonne Franquette</h1>
            <p>French cuisine restaurant for gourmet of fellow french people</p>
            <div class="location">
                <p>in <span>London</span></p>
            </div>
            <p>Restaurant n*18,190\. Ranked 113 out of 1,550 restaurants</p>  
            <div class="meals">
                <div class="meal">
                    <p>Veal Cutlet</p>
                    <p rating-color="green">4.5/5 stars</p>
                    <p>Chef Mr. Frenchie</p>
                </div>

                <div class="meal">
                    <p>Ratatouille</p>
                    <p rating-color="orange">3.6/5 stars</p>
                    <p>Chef Mr. Frenchie and Mme. French-Cuisine</p>
                </div>

            </div> 
        </div>    
    </body>
</html> 
```

让我们创建我们想要映射到的 POJO：

```
public class Restaurant {

    @Selector( value = "div.restaurant > h1")
    private String name;

    @Selector( value = "div.restaurant > p:nth-child(2)")
    private String description;

    @Selector( value = "div.restaurant > div:nth-child(3) > p > span")    
    private String location;    

    @Selector( 
        value = "div.restaurant > p:nth-child(4)"
        format = "^Restaurant n\*([0-9,]+). Ranked ([0-9,]+) out of ([0-9,]+) restaurants$",
        indexForRegexPattern = 1,
        useDeserializer = true,
        deserializer = ReplacerDeserializer.class,
        preConvert = true,
        postConvert = false
    )
    // so that the number becomes a valid number as they are shown in this format : 18,190
    @ReplaceWith(value = ",", with = "")
    private Long id;

    @Selector( 
        value = "div.restaurant > p:nth-child(4)"
        format = "^Restaurant n\*([0-9,]+). Ranked ([0-9,]+) out of ([0-9,]+) restaurants$",
        // This time, we want the second regex group and not the first one anymore
        indexForRegexPattern = 2,
        useDeserializer = true,
        deserializer = ReplacerDeserializer.class,
        preConvert = true,
        postConvert = false
    )
    // so that the number becomes a valid number as they are shown in this format : 18,190
    @ReplaceWith(value = ",", with = "")
    private Integer rank;

    @Selector(value = ".meal")    
    private List<Meal> meals;

    // getters and setters

} 
```

现在`Meal`也上课了：

```
public class Meal {

    @Selector(value = "p:nth-child(1)")
    private String name;

    @Selector(
        value = "p:nth-child(2)",
        format = "^([0-9.]+)\/5 stars$",
        indexForRegexPattern = 1
    )
    private Float stars;

    @Selector(
        value = "p:nth-child(2)",
        // rating-color custom attribute can be used as well
        attr = "rating-color"
    )
    private String ratingColor;

    @Selector(
        value = "p:nth-child(3)"
    )
    private String chefs;

    // getters and setters.
} 
```

我们在我们的 github 页面上提供了对上述代码的更多解释。

目前，让我们看看如何废弃它。

```
private static final String MY_HTML_FILE = "my-html-file.html";

public static void main(String[] args) {

    HtmlToPojoEngine htmlToPojoEngine = HtmlToPojoEngine.create();

    HtmlAdapter<Restaurant> adapter = htmlToPojoEngine.adapter(Restaurant.class);

    // If they were several restaurants in the same page, 
    // you would need to create a parent POJO containing
    // a list of Restaurants as shown with the meals here
    Restaurant restaurant = adapter.fromHtml(getHtmlBody());

    // That's it, do some magic now!

}

private static String getHtmlBody() throws IOException {
    byte[] encoded = Files.readAllBytes(Paths.get(MY_HTML_FILE));
    return new String(encoded, Charset.forName("UTF-8"));

} 
```

另一个简短的例子可以在[这里找到](https://github.com/Louis-wht/jwht-htmltopojo-booking-example)

希望这会帮助那里的人！

# asp.net - 从 Windows 服务应用程序通过电子邮件发送 asp.net 页面

> ID：14811560
> 
> 赞同：0
> 
> 时间：2013-02-11T12:09:47.287
> 
> 标签：asp.net, windows

以下是用 asp.net web 表单编写的代码，用于通过电子邮件执行和发送 aspx 页面：

```
StringWriter sw = new StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);
Server.Execute("ResetPasswordEmailContents.aspx?UserID=" + user.ProviderUserKey.ToString(), htw);
return MailManager.SendEmail(txtEmail.Text, String.Empty, ConfigurationManager.AppSettings["EmailPasswordRecoverySubject"], sw.ToString()); 
```

我现在要做的是从 Windows 服务应用程序发送这封电子邮件，我不能在 Windows 窗体应用程序中使用“Server.Execute()”方法。任何人有想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:40:21.980

目前尚不清楚 ResetPasswordEmailContents.aspx 的作用。

我会使用[SmtpClient](http://www.intstrings.com/ramivemula/articles/how-to-send-an-email-using-c-net-with-complete-features/)发送消息。我还写了一篇关于[使用 WPF 应用程序/Windows 服务中的 Spark 视图引擎进行模板化](http://www.leghumped.com/2012/12/28/templating-with-spark-and-wpf/)的文章，这可能会对您有所帮助。

# javascript - 删除外部文件

> ID：14811561
> 
> 赞同：0
> 
> 时间：2013-02-11T12:09:54.873
> 
> 标签：javascript, jquery-ui, drag-and-drop

我正在使用 Jquery ui。我想在 dropzone 中放置一个外部文件并只获取文件的路径。我想我必须覆盖默认功能`window.drop`。但我不知道该怎么做或写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:14:47.783

出于安全原因，您无法在 JavaScript 中获取本地文件路径。

# c++ - Gemfire 从 cqEvent 获取错误

> ID：14811562
> 
> 赞同：0
> 
> 时间：2013-02-11T12:10:04.383
> 
> 标签：c++, c, listener, gemfire

我`cqListener`在一个地区注册。我怎样才能`onError`从方法的参数中得到实际错误的原因`const gemfire::CqEvent& cqEvent`？

我检查了文档，但似乎他们在类上没有任何方法`CqEvent`可以实际检索可能的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T11:49:04.060

@Alex Hi Alex, See what documentation says:

```
/** 
   * This method is invoked when there is an error during CQ processing.  
   * The error can appear while applying query condition on the event.
   * e.g if the event doesn't has attributes as specified in the CQ query.
   * This event does contain an error. The newValue may or may not be 
   * available, and will be NULLPTR if not available.
   */
  virtual void onError(const CqEvent& aCqEvent); 
```

It explicitly mentions "This event does contain an error". and CqEvent also does not contain method to get the error.

# android - 每次我想通过单击评级栏滚动列表视图时，这是一个评级执行

> ID：14811563
> 
> 赞同：1
> 
> 时间：2013-02-11T12:10:03.797
> 
> 标签：android, listview, scroll, ratingbar

我与这个问题斗争了很长时间，却没有在任何地方找到解决方案。我有一个包含一些 RatingBars 的 ListView。每次我想滚动并意外点击评级栏时，都会执行评级而不是滚动。现在我找到了一个简单的解决方案：我编写了自己的 RatingBar：

```
public class ScrollableRatingBar extends RatingBar {

    public ScrollableRatingBar(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public ScrollableRatingBar(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ScrollableRatingBar(Context context) {
        super(context);
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        final int action = ev.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            return true;

        }
        case MotionEvent.ACTION_MOVE: {
            return true;
        }
        }
        return super.dispatchTouchEvent(ev);

    }

} 
```

会发生什么：如果您单击 RatingBar，则会出现 3 个不同的 MotionEvents：
-Action_DOWN：放下手指
-Action_MOVE：移动手指
-Action_UP：抬起手指

您不想将评级设置为“向下”或“移动”操作。所以只要返回 true 就表示它已经发生了。如果出现“up”，则程序本身会有所不同，它是滚动还是评级，这取决于您所做的。

就这样！我希望有人帮助。

编辑：我意识到这是 Android 2.3.7 及更低版本的问题。

# android - 如何将另一个应用程序（皮肤）的 xml 布局（setContentView（））添加到主应用程序？

> ID：14811564
> 
> 赞同：0
> 
> 时间：2013-02-11T12:10:10.967
> 
> 标签：android, themes, skins

假设在我的主应用程序中我有一个布局“main_layout.xml”，而在我的皮肤（另一个应用程序）应用程序中我有一个布局“main_layout2.xml”。

现在我如何`setContentView(main_layout2)`在我的主应用程序中设置皮肤应用程序是否已安装，如果未安装则`setContentView(R.layout.main_layout);`

我知道这么多：

```
[In Theme package] 
1\. set action for activity, for example: my.package.theme 
2\. add all files you need for this theme 

[In main app] 
  // Create intent with your action: my.package.theme 
  Intent intent = new Intent(); 
  intent.setAction("my.package.theme"); 

  // Get list of all installed packages with your themes 
  List<ResolveInfo> lresolve = pm.queryIntentActivities(intent, 0); 

  int size = lresolve.size(); 
  for (int i = 0; i < size; i++) { 
    ApplicationInfo appInfo = lresolve.get 
(i).activityInfo.applicationInfo; 
    try { 
      Resources resSkin = pm.getResourcesForApplication(appInfo); 
      int backres = resSkin.getIdentifier("my_background", "drawable", 
appInfo.packageName); 
      // getting background from theme package 
      Drawable background = resSkin.getDrawable(backres); 
    } catch (NameNotFoundException e) { 
       e.printStackTrace(); 
    } 
  } 
```

通过上面的代码，我可以更改图像。但是如何将其他应用程序的 xml 布局渗透到主应用程序。

请帮助我（示例代码或示例链接，将不胜感激）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:12:00.800

[单击此处](http://developer.android.com/training/improving-layouts/reusing-layouts.html)重用布局`<include/>`

```
 <include layout="@layout/main_layout2"/> 
```

# android - android InterstitialAd 总是无法正确显示

> ID：14811566
> 
> 赞同：2
> 
> 时间：2013-02-11T12:10:13.937
> 
> 标签：android, layout, interstitial

我正在我的应用中实现 InterstitialAd，并按照 Google 代码示例来实现广告。

## 问题：

广告大部分时间无法正常显示。我已经设置了所有活动以及 Manifest 中的 AdActivity，迫使它们定向为纵向。然而它仍然失败。有没有人知道是什么问题？万谢！

PS：我不是在这里宣传任何广告..只是为了在这里为我遇到的问题截屏

## 没事的时候做广告：

![在此处输入图像描述](../Images/4c45ff9dbb464daa8ef583f04861eb40.png)

## 但大多数时候它不在屏幕上：它变成水平的，底部有白色的空白屏幕

![在此处输入图像描述](../Images/1de09658c790b2bfe9041dbdb342cb98.png)

## 代码：

```
 interstitialAd = new InterstitialAd(this, MY_PUBLISHER_ID); 
    interstitialAd.setAdListener(this); // Set the AdListener.
    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    interstitialAd.loadAd(adRequest); 
```

## 显现：

```
<application
    android:icon="@drawable/logo"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Abc"
        android:screenOrientation="portrait"
        android:label="@string/title_activity_startup" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<activity
    android:name="com.google.ads.AdActivity"
    android:screenOrientation="portrait"           
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T06:48:11.380

现在已修复。因此不再需要解决方法： [https ://groups.google.com/forum/?fromgroups=#!topic/google-admob-ads-sdk/83DP6aCnwx4](https://groups.google.com/forum/?fromgroups=#!topic/google-admob-ads-sdk/83DP6aCnwx4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:03:08.340

我以 100% 的可重复性重现了这个问题。在下面寻找解决方法。

**说明：**
Admob 插页式广告在 Android 上显示不正确

**重现步骤：**

1.  使用页面上的“下载示例项目”链接下载 admob 插页式示例：[https://developers.google.com/mobile-ads-sdk/docs/admob/advanced](https://developers.google.com/mobile-ads-sdk/docs/admob/advanced)
2.  打开 InterstitialSample.java
3.  在 onCreate 方法中找到以下 2 行代码：

    > interstitialAd = new InterstitialAd(this, AD_UNIT_ID_GOES_HERE);
    > interstitialAd.setAdListener(this);

4.  从 onCreate 方法中删除这两行并将它们添加到 onClick 之前 interstitialAd.loadAd(adRequest);
5.  用您的 ID 替换 AD_UNIT_ID_GOES_HERE
6.  将 GoogleAdMobAdsSdk-6.3.0.jar 添加到项目中
7.  构建并运行
8.  单击“加载插页式”按钮，然后单击“显示插页式”按钮

**观察到的结果：**
当设备处于纵向时，插页式广告会显示横向版本的广告内容，反之亦然，当设备处于横向时，插页式广告会显示纵向版的广告内容。

**用于测试的配置：**
Android OS：4.2.1 或 4.2.2
GoogleAdMobAdsSdk：6.2.1 或 6.3.0
设备：Galaxy Nexus

**解决方法：**
您可以看到未经修改的原始示例（在 Activity.onCreate 中创建 InterstitialAd 时）工作正常。因此，解决方法的主要思想是为在实际应用程序中显示插页式广告创建相同的条件。如果您无法在真实 Activity 的 onCreate 方法中放置用于创建 InterstitialAd 对象的代码，或者您需要从任意代码（例如库代码中的表单）显示插页式广告，那么您需要创建额外的“启动器”Activity。

在我的例子中，我使用了以下步骤：
1\. 创建额外的 Activity（基于来自 Google 示例的 InterstitialSample），它将用作插页式广告的启动器
2\. 添加用于创建 InterstitialAd 对象并在该 Activity 的 onCreate 方法中设置监听器的代码
3 .在onCreate方法中添加加载插屏广告的
代码 4.在onReceiveAd监听方法中添加显示插屏广告的
代码 5.在onFailedToReceiveAd和onDismissScreen监听方法中添加Activity完成代码

然后，只要您需要展示广告，只需启动这个额外的“启动器”活动。这种解决方法对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T14:24:43.733

有同样的问题，通过一些测试，我发现其他东西会导致这个问题。如果应用程序使用 WebView 并且开发人员暂停了 WebView 计时器，然后显示插页式广告。也会导致这个问题。

原因可能是取决于 HTML/JS 的插页式广告。暂停的计时器将导致异常行为。

该解决方案可以保留 WebView 计时器，从不暂停它。

# mysql - 如何在mysql中获取两个日期之间的月份列表

> ID：14811568
> 
> 赞同：14
> 
> 时间：2013-02-11T12:10:19.070
> 
> 标签：mysql, sql

我必须在 mysql 中获取两个日期之间的月份列表。

```
For Example:My Input is

 From date 23-01-2013
 To Date   01-04-2014

Output Should be 

Jan   2013,
Feb   2013,
March 2013,
.
.
.
Jan   2014,
Feb   2014,
Mar   2014,
Apr   2014. 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T13:38:41.867

[SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/7282)

```
select 
DATE_FORMAT(m1, '%b %Y')

from
(
select 
('2013-01-23' - INTERVAL DAYOFMONTH('2013-01-23')-1 DAY) 
+INTERVAL m MONTH as m1
from
(
select @rownum:=@rownum+1 as m from
(select 1 union select 2 union select 3 union select 4) t1,
(select 1 union select 2 union select 3 union select 4) t2,
(select 1 union select 2 union select 3 union select 4) t3,
(select 1 union select 2 union select 3 union select 4) t4,
(select @rownum:=-1) t0
) d1
) d2 
where m1<='2014-04-01'
order by m1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-04T19:39:06.580

这是一个实用的解决方案，如果您想以这种方式看待它，它并不是那么“优雅”，但它可以工作，您可以将其设为函数和/或存储过程，只需几个参数......

首先，我们需要一个包含一些记录的表，任何表。我们将使用这个表，就像一个行号表。（在要显示的相同月份内，您需要尽可能多的行，最好有一个大表）>>

```
SELECT CONCAT(table_schema, '.', table_name) as schema_table, table_rows
FROM   information_schema.TABLES
order by 2 desc limit 0,100 
```

这会告诉你，你的实例上记录最多的前 100 个表，我在这个例子中使用 mysql.help 表，默认情况下，它有几千条记录，而且它总是在那里......

```
set @start_date = '2013-01-23';
set @end_date = '2014-04-01';
set @months = -1;

select DATE_FORMAT(date_range,'%M, %Y') AS result_date from (
    select (date_add(@start_date, INTERVAL (@months := @months +1 ) month)) as date_range
    from mysql.help_topic a limit 0,1000) a
where a.date_range between @start_date and last_day(@end_date); 
```

解释：

> 1\. 设置日期变量 2\. 设置月份值，用于添加月份 3\. 为每一行选择一个日期（我们添加一个月份并在同一行上增加月份变量） 4\. 过滤范围之间的日期 5\. 输出格式化日期。

这是最终输出>>

```
January, 2013
February, 2013
March, 2013
April, 2013
May, 2013
June, 2013
July, 2013
August, 2013
September, 2013
October, 2013
November, 2013
December, 2013
January, 2014
February, 2014
March, 2014
April, 2014 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T12:13:40.807

试试这个：

```
select aDate from (
  select @maxDate - interval (a.a+(10*b.a)+(100*c.a)+(1000*d.a)) day aDate from
  (select 0 as a union all select 1 union all select 2 union all select 3
   union all select 4 union all select 5 union all select 6 union all
   select 7 union all select 8 union all select 9) a, /*10 day range*/
  (select 0 as a union all select 1 union all select 2 union all select 3
   union all select 4 union all select 5 union all select 6 union all
   select 7 union all select 8 union all select 9) b, /*100 day range*/
  (select 0 as a union all select 1 union all select 2 union all select 3
   union all select 4 union all select 5 union all select 6 union all
   select 7 union all select 8 union all select 9) c, /*1000 day range*/
  (select 0 as a union all select 1 union all select 2 union all select 3
   union all select 4 union all select 5 union all select 6 union all
   select 7 union all select 8 union all select 9) d, /*10000 day range*/
  (select @minDate := '2001-01-01', @maxDate := '2002-02-02') e
) f
where aDate between @minDate and @maxDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T08:47:07.733

下面的这个 SQL 对我的 MYSQL 有帮助。您可以根据需要更新 curdate() 值以获取任何月份的日期列表。链接：（[https://www.programmersought.com/article/26156494713/](https://www.programmersought.com/article/26156494713/)）

```
SELECT DATE_FORMAT(DATE_SUB(last_day(curdate()), INTERVAL xc-1 day), '%Y-%m-%d') as date
FROM ( 
            SELECT @xi:=@xi+1 as xc from 
            (SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5 UNION SELECT 6) xc1, 
            (SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5 UNION SELECT 6) xc2,  
            (SELECT @xi:=0) xc0 
) xcxc) x0 where x0.date >= (select date_add(curdate(),interval-day(curdate())+1 day)) 
```

# php - 没有错误，我的 PHP 代码根本没有登录。

> ID：14811572
> 
> 赞同：-2
> 
> 时间：2013-02-11T12:10:41.643
> 
> 标签：php, html, session

晕那里，

我有一个 PHP 脚本和一个登录表单，当我尝试登录时它不起作用并且没有显示错误。当它假设登录时，它会清除我的用户名和密码字段。它没有通过。

下面是我的代码。

```
<?php session_start(); ?>
<?php ob_start(); ?>
<?php
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); // date in the past
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); // always modified
header("Cache-Control: no-store, no-cache, must-revalidate"); // HTTP/1.1 
header("Cache-Control: post-check=0, pre-check=0", false); 
header("Pragma: no-cache"); // HTTP/1.0 
?>
<?php include ("db.php") ?>
<?php include ("phpmkrfn.php") ?>

<?php

// User levels
define("ewAllowAdd", 1, true);
define("ewAllowDelete", 2, true);
define("ewAllowEdit", 4, true);
define("ewAllowView", 8, true);
define("ewAllowList", 8, true);
define("ewAllowReport", 8, true);
define("ewAllowSearch", 8, true);                                                                                                                       
define("ewAllowAdmin", 16, true);   
if (@$HTTP_POST_VARS["submit"] <> "") {
$bValidPwd = false;

// Setup variables
$sUserId = @$HTTP_POST_VARS["userid"];
$sPassWd = @$HTTP_POST_VARS["passwd"];
if (!($bValidPwd)) {
        $conn = phpmkr_db_connect(HOST, USER, PASS,DB);
    //$sUserId = (!get_magic_quotes_gpc()) ? addslashes($sUserId) : $sUserId;
        $sSql = "SELECT * FROM `users`";
        $sSql .= " WHERE `username` = '" . $sUserId . "'";
        $rs = phpmkr_query($sSql,$conn) or die("Failed to execute query" . phpmkr_error() . ' SQL:' . $sSql);
        if (phpmkr_num_rows($rs) > 0) {
        $row = phpmkr_fetch_array($rs);
            if (strtoupper($row["password"]) == strtoupper($sPassWd)) {         $HTTP_SESSION_VARS["talkto_me_status_User"] = $row["username"];                 $HTTP_SESSION_VARS["talkto_me_status_zita"] =      $row["Full_Name"];                         $HTTP_SESSION_VARS["talkto_me_status_UserLevel"] = $row["security_id"];
                $bValidPwd = true;
                header("Location: index.php");
            }
        }
phpmkr_free_result($rs);
phpmkr_db_close($conn);
}
if ($bValidPwd) {
    SetUpUserLevel();

    // Write cookies
    if (@$HTTP_POST_VARS["rememberme"] <> "") {
        setCookie("talkto_me_userid", $sUserId, time()+365*24*60*60);
    }
    $HTTP_SESSION_VARS["talkto_me_status"] = "login";
    ob_end_clean();
    header("Location: index.php");
    exit();
} else {
    $HTTP_SESSION_VARS["ewmsg"] = "Incorrect user ID or password";
}
}

function SetUpUserLevel()
{
global $HTTP_SESSION_VARS;
$arrSecurity[0][1] = "support"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["support_menuitem"] = true;
}
$arrSecurity[1][0] = "General_User"; // User Level Name
$arrSecurity[1][1] = 12; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["support_menuitem"] = (12 & ewAllowList);
}
$arrSecurity[0][2] = "users"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["users_menuitem"] = true;
}
$arrSecurity[1][2] = 0; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["users_menuitem"] = (0 & ewAllowList);
}
$arrSecurity[0][3] = "open_calls_report"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["open_calls_report_menuitem"] = true;
}
$arrSecurity[1][3] = 8; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["open_calls_report_menuitem"] = (8 & ewAllowList);
}
$arrSecurity[0][4] = "calls_by_number"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["calls_by_number_menuitem"] = true;
}
$arrSecurity[1][4] = 8; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["calls_by_number_menuitem"] = (8 & ewAllowList);
}
$arrSecurity[0][5] = "escalated_calls"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["escalated_calls_menuitem"] = true;
}
$arrSecurity[1][5] = 8; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["escalated_calls_menuitem"] = (8 & ewAllowList);
}
$arrSecurity[0][6] = "calls_attended_by_technician"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["calls_attended_by_technician_menuitem"] = true;
}
$arrSecurity[1][6] = 8; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["calls_attended_by_technician_menuitem"] = (8 &    ewAllowList);
}
$arrSecurity[0][7] = "calls_attended_today"; // Table Name
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == -1) {
    $HTTP_SESSION_VARS["calls_attended_today_menuitem"] = true;
}
$arrSecurity[1][7] = 8; // User Level Security
if (@$HTTP_SESSION_VARS["talkto_me_status_UserLevel"] == 1) {
    $HTTP_SESSION_VARS["calls_attended_today_menuitem"] = (8 & ewAllowList);
}
$HTTP_SESSION_VARS["ewSecurity"] = $arrSecurity; // Save Security Table
}
?>
<?php include ("header.php") ?>
<script type="text/javascript" src="ew.js"></script>
<script type="text/javascript">

function EW_checkMyForm(EW_this) {
if (!EW_hasValue(EW_this.userid, "TEXT" )) {
    if  (!EW_onError(EW_this, EW_this.userid, "TEXT", "Please enter user ID"))
        return false;
}
if (!EW_hasValue(EW_this.passwd, "PASSWORD" )) {        if     (!EW_onError(EW_this, EW_this.passwd, "PASSWORD", "Please enter password"))
        return false;
}
return true;
}

</script>
<p> <span class="phpmaker">Login Page</span></p>
<?php
if (@$HTTP_SESSION_VARS["ewmsg"] <> "") {
?>
   <p><span class="phpmaker" style="color: Red;"><?php echo   $HTTP_SESSION_VARS["ewmsg"]; ?  >    </span></p>
<?php
$HTTP_SESSION_VARS["ewmsg"] = ""; // Clear message
}
?>
<form action="" method="post" onSubmit="return EW_checkMyForm(this);">
<table border="0" cellspacing="0" cellpadding="4">
<tr>
    <td><span class="phpmaker">User Name</span></td>
    <td><span class="phpmaker"><input type="text" name="userid" size="20"     value="<?php echo @$HTTP_COOKIE_VARS["talkto_me_userid"]; ?>"></span></td>
</tr>
<tr>
    <td><span class="phpmaker">Password</span></td>
    <td><span class="phpmaker"><input type="password" name="passwd" size="20">    </span></td>
</tr>
    <tr>
    <td>&nbsp;</td>
    <td><span class="phpmaker"><input type="checkbox" name="rememberme"         value="true">Remember me</span></td>
</tr>
<tr>
<td colspan="2" align="center"><span class="phpmaker"><input type="submit"        name="submit" value="Login"></span></td>
</tr>
</table>
</form>
<br>
<p><span class="phpmaker">
</span></p>
<?php include ("footer.php") ?> 
```

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:29:54.033

如果没有任何数据库问题，请使用`$_POST`而不是我希望它会做`@$HTTP_POST_VARS`

# css - CSS前缀的目的是什么？

> ID：14811573
> 
> 赞同：7
> 
> 时间：2013-02-11T12:10:43.737
> 
> 标签：css, browser, vendor-prefix

我知道，如果我们想确保某些 CSS3 功能在任何地方都能正常工作，我们需要使用 W3C 推荐的前缀版本，例如：

```
transition: all 1s ease;
-moz-transition: all 1s ease;
-o-transition: all 1s ease;
-webkit-transition: all 1s ease; 
```

我知道前缀用于实验性功能，但为什么它们是必要的？他们为什么不在最初的 W3C 上测试它们呢？每个 CSS3 功能是否都有或有每个浏览器的前缀，或者如果他们认为应该创建一个前缀版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T12:14:36.350

供应商前缀的最初目的是让供应商能够添加他们自己的非标准功能，以在他们的 CSS 实现中使用。但是，它们中的大多数用于最终成为标准的事物的实验版本。

如果实验属性没有前缀，则意味着它是属性的正确标准版本。如果每个浏览器都以不同的方式呈现它，那么就没有多少标准了。取而代之的是，浏览器会避免实现无前缀属性，直到它确定它是根据标准完成的，然后它才开始支持无前缀属性，以此表示它正确地支持了这个特定的标准。

并非每个功能都有前缀；实际上，供应商仅在认为有必要时才创建前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:44:31.567

是的..可能将来我们不必为不同的浏览器使用这些前缀，但现在每个浏览器都有不同的 css 库，因此作为前端开发人员我们必须在 css 中使用这些前缀，否则某些浏览器将不会呈现我们的css。这就是他们的工作方式，我们已经跟随他们。

这是 Webkit 和 Firefox 前缀库的喜好

[http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Gradients/Gradient.html](http://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Gradients/Gradient.html)

[https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference/Mozilla_Extensions](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference/Mozilla_Extensions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:35:56.170

使用实验功能的人已经知道，根本不应该期望标准的跨浏览器行为。

在我看来，没有必要为新功能添加前缀。它使使用它们变得更加困难，因为您必须编写标准属性、chrome 的前缀属性、firefox、opera ......它还使样式表更大（谁将在将来删除所有这些前缀属性，当它们不需要时不再？）。

我没有看到任何优势，但这只是我的意见。

# visual-studio-2010 - 有没有人成功通过实时 555 库使用 TCP 流式传输 rtsp 数据包

> ID：14811574
> 
> 赞同：0
> 
> 时间：2013-02-11T12:10:44.393
> 
> 标签：visual-studio-2010, stream, streaming, rtsp, live555

有没有人成功地**通过实时 555 库使用 TCP 流式传输 rtsp 数据包**。？** 我尝试了很多网络搜索，但没有找到任何有用的所有解决方案提供的所有解决方案，但**wireshark**显示**UDP**数据包正在流式传输.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:51:18.770

雅发送适当的设置请求，您将能够通过 TCP 进行流式传输。如果是实时 555 子类“OnDemandServerMediaSession”类。

# android - 如何使用 Android 地图 API v2 创建自定义形状的位图标记

> ID：14811579
> 
> 赞同：185
> 
> 时间：2013-02-11T12:11:12.570
> 
> 标签：android, google-maps-markers, google-maps-android-api-2

我正在开发一个使用 Google Map API v2 的 Android 应用程序。我需要使用自定义标记在地图上显示用户位置。

每个标记都将显示来自 URL 的用户图片。图像必须以异步模式从服务器下载。有关示例，请参见随附的屏幕截图。

如何在标记中添加图像和自定义信息？

![在此处输入图像描述](../Images/9cc688d85b63791277ea9d0e4e3a2a09.png)

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2013-02-11T12:40:10.280

在[Google Maps API v2 Demo](https://developers.google.com/maps/documentation/android-api/marker)中有一个`MarkerDemoActivity`类，您可以在其中看到自定义图像如何设置为 GoogleMap。

```
// Uses a custom icon.
mSydney = mMap.addMarker(new MarkerOptions()
    .position(SYDNEY)
    .title("Sydney")
    .snippet("Population: 4,627,300")
    .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))); 
```

因为这只是将标记替换为您可能想要使用的图像`Canvas`来绘制更复杂和更花哨的东西：

```
Bitmap.Config conf = Bitmap.Config.ARGB_8888;
Bitmap bmp = Bitmap.createBitmap(80, 80, conf);
Canvas canvas1 = new Canvas(bmp);

// paint defines the text color, stroke width and size
Paint color = new Paint();
color.setTextSize(35);
color.setColor(Color.BLACK);

// modify canvas
canvas1.drawBitmap(BitmapFactory.decodeResource(getResources(),
    R.drawable.user_picture_image), 0,0, color);
canvas1.drawText("User Name!", 30, 40, color);

// add marker to Map
mMap.addMarker(new MarkerOptions()
    .position(USER_POSITION)
    .icon(BitmapDescriptorFactory.fromBitmap(bmp))
    // Specifies the anchor to be at a particular point in the marker image.
    .anchor(0.5f, 1)); 
```

这会将 Canvas 绘制`canvas1`到`GoogleMap mMap`. 代码应该（大部分）不言自明，那里有很多教程如何绘制`Canvas`. 您可以从 Android 开发者页面中查看[Canvas 和 Drawables开始。](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

现在您还想从 URL 下载图片。

```
URL url = new URL(user_image_url);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();   
conn.setDoInput(true);   
conn.connect();     
InputStream is = conn.getInputStream();
bmImg = BitmapFactory.decodeStream(is); 
```

您**必须**从后台线程下载图像（您可以使用[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)或[Volley](https://developer.android.com/training/volley/index.html)或[RxJava](https://github.com/ReactiveX/RxJava)）。

之后，您可以将 替换为`BitmapFactory.decodeResource(getResources(), R.drawable.user_picture_image)`您下载的图像`bmImg`。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2016-03-04T16:17:16.253

我还使用的另一种更简单的解决方案是创建自定义标记布局并将其转换为位图。

view_custom_marker.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/custom_marker_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/marker_mask">

    <ImageView
        android:id="@+id/profile_image"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_gravity="center_horizontal"
        android:contentDescription="@null"
        android:src="@drawable/avatar" />
</FrameLayout> 
```

使用下面的代码将此视图转换为位图

```
 private Bitmap getMarkerBitmapFromView(@DrawableRes int resId) {

        View customMarkerView = ((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.view_custom_marker, null);
        ImageView markerImageView = (ImageView) customMarkerView.findViewById(R.id.profile_image);
        markerImageView.setImageResource(resId);
        customMarkerView.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
        customMarkerView.layout(0, 0, customMarkerView.getMeasuredWidth(), customMarkerView.getMeasuredHeight());
        customMarkerView.buildDrawingCache();
        Bitmap returnedBitmap = Bitmap.createBitmap(customMarkerView.getMeasuredWidth(), customMarkerView.getMeasuredHeight(),
                Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(returnedBitmap);
        canvas.drawColor(Color.WHITE, PorterDuff.Mode.SRC_IN);
        Drawable drawable = customMarkerView.getBackground();
        if (drawable != null)
            drawable.draw(canvas);
        customMarkerView.draw(canvas);
        return returnedBitmap;
    } 
```

在地图就绪回调中添加您的自定义标记。

```
@Override
public void onMapReady(GoogleMap googleMap) {
    Log.d(TAG, "onMapReady() called with");
    mGoogleMap = googleMap;
    MapsInitializer.initialize(this);
    addCustomMarker();
}
private void addCustomMarker() {
    Log.d(TAG, "addCustomMarker()");
    if (mGoogleMap == null) {
        return;
    }

    // adding a marker on map with image from  drawable
   mGoogleMap.addMarker(new MarkerOptions()
            .position(mDummyLatLng)
            .icon(BitmapDescriptorFactory.fromBitmap(getMarkerBitmapFromView(R.drawable.avatar))));
} 
```

欲知更多详情，请点击以下链接

[如何使用布局创建自定义标记？](http://waleedsarwar.com/posts/2016-03-03-custom-markers-google-maps/)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-03-08T04:59:22.743

我希望现在分享我的解决方案还为时不晚。在此之前，您可以按照[Android 开发者文档](https://developers.google.com/maps/documentation/android-api/utility/marker-clustering#introduction)中所述的教程进行操作。为此，您需要将 Cluster Manager 与`defaultRenderer`.

1.  创建一个实现的对象`ClusterItem`

    ```
    public class SampleJob implements ClusterItem {

    private double latitude;
    private double longitude;

    //Create constructor, getter and setter here

    @Override
    public LatLng getPosition() {
        return new LatLng(latitude, longitude);
    } 
    ```

2.  创建一个默认渲染器类。这是完成所有工作的类（用您自己的风格膨胀自定义标记/集群）。我正在使用通用图像加载器来下载和缓存图像。

    ```
    public class JobRenderer extends DefaultClusterRenderer< SampleJob > {

    private final IconGenerator iconGenerator;
    private final IconGenerator clusterIconGenerator;
    private final ImageView imageView;
    private final ImageView clusterImageView;
    private final int markerWidth;
    private final int markerHeight;
    private final String TAG = "ClusterRenderer";
    private DisplayImageOptions options;

    public JobRenderer(Context context, GoogleMap map, ClusterManager<SampleJob> clusterManager) {
        super(context, map, clusterManager);

        // initialize cluster icon generator
        clusterIconGenerator = new IconGenerator(context.getApplicationContext());
        View clusterView = LayoutInflater.from(context).inflate(R.layout.multi_profile, null);
        clusterIconGenerator.setContentView(clusterView);
        clusterImageView = (ImageView) clusterView.findViewById(R.id.image);

        // initialize cluster item icon generator
        iconGenerator = new IconGenerator(context.getApplicationContext());
        imageView = new ImageView(context.getApplicationContext());
        markerWidth = (int) context.getResources().getDimension(R.dimen.custom_profile_image);
        markerHeight = (int) context.getResources().getDimension(R.dimen.custom_profile_image);
        imageView.setLayoutParams(new ViewGroup.LayoutParams(markerWidth, markerHeight));
        int padding = (int) context.getResources().getDimension(R.dimen.custom_profile_padding);
        imageView.setPadding(padding, padding, padding, padding);
        iconGenerator.setContentView(imageView);

        options = new DisplayImageOptions.Builder()
                .showImageOnLoading(R.drawable.circle_icon_logo)
                .showImageForEmptyUri(R.drawable.circle_icon_logo)
                .showImageOnFail(R.drawable.circle_icon_logo)
                .cacheInMemory(false)
                .cacheOnDisk(true)
                .considerExifParams(true)
                .bitmapConfig(Bitmap.Config.RGB_565)
                .build();
    }

    @Override
    protected void onBeforeClusterItemRendered(SampleJob job, MarkerOptions markerOptions) {

        ImageLoader.getInstance().displayImage(job.getJobImageURL(), imageView, options);
        Bitmap icon = iconGenerator.makeIcon(job.getName());
        markerOptions.icon(BitmapDescriptorFactory.fromBitmap(icon)).title(job.getName());

    }

    @Override
    protected void onBeforeClusterRendered(Cluster<SampleJob> cluster, MarkerOptions markerOptions) {

        Iterator<Job> iterator = cluster.getItems().iterator();
        ImageLoader.getInstance().displayImage(iterator.next().getJobImageURL(), clusterImageView, options);
        Bitmap icon = clusterIconGenerator.makeIcon(iterator.next().getName());
        markerOptions.icon(BitmapDescriptorFactory.fromBitmap(icon));
    }

    @Override
    protected boolean shouldRenderAsCluster(Cluster cluster) {
        return cluster.getSize() > 1;
    } 
    ```

3.  在您的活动/片段类中应用集群管理器。

    ```
    public class SampleActivity extends AppCompatActivity implements OnMapReadyCallback {

    private ClusterManager<SampleJob> mClusterManager;
    private GoogleMap mMap;
    private ArrayList<SampleJob> jobs = new ArrayList<SampleJob>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_landing);

        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);
    }

    @Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;
        mMap.getUiSettings().setMapToolbarEnabled(true);
        mClusterManager = new ClusterManager<SampleJob>(this, mMap);
        mClusterManager.setRenderer(new JobRenderer(this, mMap, mClusterManager));
        mMap.setOnCameraChangeListener(mClusterManager);
        mMap.setOnMarkerClickListener(mClusterManager);

        //Assume that we already have arraylist of jobs

        for(final SampleJob job: jobs){
            mClusterManager.addItem(job);
        }
        mClusterManager.cluster();
    } 
    ```

4.  结果

[![结果](../Images/2a84e21e7358b19e9935409599a8c8fd.png)](https://i.stack.imgur.com/g3lFT.jpg)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-29T16:56:31.270

从 lambda 答案中，我做了一些更接近要求的东西。

```
boolean imageCreated = false;

Bitmap bmp = null;
Marker currentLocationMarker;
private void doSomeCustomizationForMarker(LatLng currentLocation) {
    if (!imageCreated) {
        imageCreated = true;
        Bitmap.Config conf = Bitmap.Config.ARGB_8888;
        bmp = Bitmap.createBitmap(400, 400, conf);
        Canvas canvas1 = new Canvas(bmp);

        Paint color = new Paint();
        color.setTextSize(30);
        color.setColor(Color.WHITE);

        BitmapFactory.Options opt = new BitmapFactory.Options();
        opt.inMutable = true;

        Bitmap imageBitmap=BitmapFactory.decodeResource(getResources(),
                R.drawable.messi,opt);
        Bitmap resized = Bitmap.createScaledBitmap(imageBitmap, 320, 320, true);
        canvas1.drawBitmap(resized, 40, 40, color);

        canvas1.drawText("Le Messi", 30, 40, color);

        currentLocationMarker = mMap.addMarker(new MarkerOptions().position(currentLocation)
                .icon(BitmapDescriptorFactory.fromBitmap(bmp))
                // Specifies the anchor to be at a particular point in the marker image.
                .anchor(0.5f, 1));
    } else {
        currentLocationMarker.setPosition(currentLocation);
    }

} 
```

# qt - 应用程序在调试时工作，但在“发布”时不工作

> ID：14811580
> 
> 赞同：3
> 
> 时间：2013-02-11T12:11:15.363
> 
> 标签：qt, qml, qt5, qtquick2

所以，我只是做了一个标准的`QtQuick 2`应用程序，它有默认的`Recangle`,`Text`和`MouseArea`. 所以，我只是尝试在发布模式下编译应用程序，看看它会生成什么文件，然后我尝试打开应用程序并发生了这种情况：

![](../Images/d824f9dc1cf69bb74512ed6ae9be981a.png)

当我调整它的大小时，我可以看到空白：

![](../Images/5f7e0c098a755d524e9d16d44ba88c68.png)

但是，在调试中一切正常：

![在此处输入图像描述](../Images/107304109a24b1a13579f0d05c9ae9f4.png)

我正在使用 Qt 5.0.1 和 QtQuick2

## 更新

因此，在通过[Dependency Walker](http://www.dependencywalker.com/)运行它之后，似乎缺少三个文件：`qt5quick.dll`、`qt5gui.dll`和`qt5core.dll`. **我必须从某个地方手动添加它们吗？**

当前目录结构为：

```
`test-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release/release
|+qml
 |+test
  |-main.qml
|-main.obj
|-moc_qtquick2applicationviewer.cpp
|-moc_qtquick2applicationviewer.obj
|-qtquick2applicationviewer.obj
|-test.exe
|-test.exe.embed.manifest 
```

注意：我按照父目录中[Nemanja Boric 的回答](https://stackoverflow.com/a/14812814/553801)中的建议粘贴了 qml 目录，但这并没有解决问题！:(

另外，我的印象是，没有任何源代码（可能除了 JavaScript）不会与应用程序一起*公开*分发，而是以某种方式编译或打包在应用程序中（注意`.cpp`文件和`qml`目录）？

## 更新 2

从 Qt 5 Creator 内部运行时，该应用程序运行良好：

```
Starting [...]\test-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release\release\test.exe...
QOpenGLShader::link: "(41,18): warning X3206: implicit truncation of vector type

" 
[...]\test-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release\release\test.exe exited with code 0 
```

好吧，除了那个尴尬的警告...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:18:02.530

您需要将 qml 文件复制到当前目录中。当您使用 QtCreator 创建发布应用程序时，您将拥有以下目录结构（或类似的东西）：

```
example-build-Desktop_Qt_5_0_1_MSVC2010_32bit-Release
  |-     debug
  |-     qml
  |-     release // application executable is here 
```

您需要做的是将`qml`文件夹复制到与可执行发布文件相同的目录中（只需将文件夹复制`qml`到`release`文件夹中）。

关于 dll 文件 - 您可以从文件夹中手动复制它们，`QtInstallDir/bin`或者您可以将该目录添加到`PATH`.

不需要发布cpp文件，但需要发布qml文件。你可以做什么，通过我从来没有成功，但似乎有可能将 qml 文件捆绑到资源文件中，并从资源中加载它，但这也可以很容易地提取 - 所以 -**不要把你的逻辑或qml 文件中的机密信息**。

此外，您需要将所有需要的 dll 文件复制到带有 exe 的目录中：qt5quick.dll、qt5gui.dll、qt5core.dll 和 libEGL.dll。

# mysql - 检查mysql中的行顺序

> ID：14811583
> 
> 赞同：1
> 
> 时间：2013-02-11T12:11:21.537
> 
> 标签：mysql, sql

需要一些关于mysql的帮助。

我有一张满是出价的桌子，我需要检查是否有超过 3 个**来自同一用户的**出价一个接一个。

以下是一些代码示例：

```
$all = sql_get('select all bids from bids where auction_id = 1 order by amount asc');
$total = 0;

foreach ($all as $bid) {
  if ($bid->user_id == $user->id) {
    if (++$total <= 3) continue;
    $bid->burned = true;
    sql_store($bid);
    show_error('you cant have more than 4 bids one after another, the last bid was burned.');
  } else {
    $total = 0;
  }
} 
```

有没有办法在单个查询中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:29:30.353

```
SELECT user_id, CASE WHEN @user_id = user_id 
    THEN @rownum := @rownum + 1 
    ELSE ((@user_id := user_id) * 0) + (@rownum := 1) END AS rownum
FROM (  SELECT user_id
        FROM bids, (SELECT @rownum := 0, @user_id := NULL) AS vars
        WHERE auction_id = 1
        ORDER BY created DESC) AS h
HAVING user_id = '{$user->id}' AND rownum >= 3 
```

只需将 user_id 解析为查询，您就会知道是否**连续 3 个**。这假设您保存了使用列创建行的时间`created`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:17:12.767

为什么不只做一个计数查询并在`WHERE`子句中传递 user_id 呢？

```
$query = "SELECT COUNT(bids) AS total_bids FROM bids WHERE auction_id = 1 AND user_id = '$user->id' ORDER BY amount"; 
```

# asp.net-mvc-4 - 尝试在视图中显示图像时，Asp.net MVC 无法检索查询字符串

> ID：14811584
> 
> 赞同：1
> 
> 时间：2013-02-11T12:11:22.513
> 
> 标签：asp.net-mvc-4, query-string

这是我显示图像的目标页面设计

`<img alt="" src="@Url.Action("GetPhoto", "Display")" height="50" width="50" class="photo" />`

这是我的源页面，我将我的绑定`linkbutton`如下

`@Html.ActionLink("QuestionTitle", "Index", "Display", new { QuestionID = item.QuestionID }, null)`

我在浏览器中单击上述网址时的目的地如下

`http://localhost:1931/Display?QuestionID=1`

这是我试图显示图像的代码

```
[HttpGet]
public ActionResult GetPhoto()
{
    // int quesID = Convert.ToInt16(Request.QueryString["QuestionID"].ToString()); this didn't worked so by having a look at quick watch I write the below
    int quesID = Convert.ToInt16(Request.UrlReferrer.Query.Substring(12, 1));
        byte[] photo = null;

        var usrname = (from a in db.tblQuestions
                       where a.QuestionID == quesID
                       select new { a.UserName });
        var v = db.tblUsers.Where(p => p.UserName == usrname.FirstOrDefault().UserName).Select(img => img.Photo).FirstOrDefault();
        photo = v;
        return File(photo, "image/jpeg");
    } 
```

有人可以告诉我如何在`querystring`除此页面之外的每个页面上获取查询字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:59:42.473

在您的目标页面中，您应该使用

```
<img alt="" src="@Url.Action("GetPhoto", "Display", new {QuestionId=Model.Id})" height="50" width="50" class="photo" /> 
```

（例如，我假设您有一个带有 Id 属性的模型）。

这与您在源页面中调用*显示*控制器的*索引*操作的方式相同

 *没有 Route 数据`@Url.Action("GetPhoto", "Display")`生成链接`http://localhost:1931/Display/GetPhoto`

使用路由数据（第三个参数）生成的链接是`http://localhost:1931/Display/GetPhoto?QuestionId=<some value>`*

# c++ - LLVM中间接调用时如何从CallInst获取FunctionType

> ID：14811587
> 
> 赞同：8
> 
> 时间：2013-02-11T12:11:35.537
> 
> 标签：c++, llvm

如果函数调用是直接的，可以通过以下代码获取Function类型。

```
Function  * fun  = callInst->getCalledFunction();
Function  * funType = fun->getFunctionType(); 
```

但是，如果调用是间接的，即通过函数指针，则`getCalledFunction` 返回 NULL。所以我的问题是如何在通过函数指针调用函数时获取函数类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T12:15:52.833

要从间接调用中获取类型，请使用`getCalledValue`而不是`getCalledFunction`，如下所示：

```
Type* t = callInst->getCalledValue()->getType(); 
```

这将为您提供传递给调用指令的指针类型；要获取实际的函数类型，请继续：

```
FunctionType* ft = cast<FunctionType>(cast<PointerType>(t)->getElementType()); 
```

# sql - 人数大于等于3

> ID：14811588
> 
> 赞同：1
> 
> 时间：2013-02-11T12:11:40.487
> 
> 标签：sql

再会

这是我被赋予的任务： *请你让我有一份关于在过去 6 个月内入院超过 3 次的 Thebemed 和 Hosmed 患者的报告*

这是我的编码：*

我怎样才能将成员缩小到=> 3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:13:29.170

添加`HAVING`子句

```
SELECT...
FROM...
WHERE..
GROUP BY...
HAVING COUNT(*) >= 3 
```

# c++ - 调用模板成员函数编译失败

> ID：14811589
> 
> 赞同：5
> 
> 时间：2013-02-11T12:11:42.277
> 
> 标签：c++, templates

我对以下形式的一段代码有疑问：

```
template<class Type>
class Class1 {
public:
    template<class TypeName1> TypeName1* method1() const {return 0;}
};

struct Type1{};
struct Type2{};

class Class2 {
public:
   template<typename TypeName1, typename TypeName2>
   int method2() {
       Class1<TypeName2> c;
       c.method1<TypeName1>();
       return 0;
   }

   int method1() {
       return method2<Type1, Type2>();
   }
};

int
main() {
   Class2 c;
   return c.method1();
} 
```

在键盘上使用编译器编译时：

[http://codepad.org/ZR1Std4k](http://codepad.org/ZR1Std4k)

我收到以下错误：

> t.cpp：在成员函数“int Class2::method2()”中：第 15 行：错误：“>”标记编译之前的预期主表达式由于 -Wfatal 错误而终止。

违规行是模板成员函数的调用：

```
c.method1<TypeName1>(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T12:14:45.293

`template`当您调用成员函数模板并且您有一个依赖名称时，您应该使用关键字，或者`method1`将被解析为成员变量`c`和`<`“小于”符号：

```
c.template method1<TypeName1>(); 
```

正如@DrewDormann 正确指出的那样，`template`需要关键字的原因是`Class1`类模板的特化可能存在于提供的特定类型参数中，其中`method1`定义为成员变量而不是函数模板。因此，如果不是这种情况，则必须明确指示编译器将其解析`method1`为函数模板的名称。

# android - android以编程方式获取按钮背景imageName

> ID：14811597
> 
> 赞同：2
> 
> 时间：2013-02-11T12:12:10.737
> 
> 标签：android, android-layout, button, android-relativelayout

我在 layout.xml 中使用按钮如下

```
 <Button
      android:id="@+id/karaza"
      android:layout_width="160dp"
      android:layout_height="160dp"
      android:background="@drawable/button_green"
      android:text="0"
      android:textColor="#FFFFFF"
      android:textSize="45dp" /> 
```

背景图片名称为“button_green”

如何在活动代码中以字符串形式获取它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:19:54.157

尝试这个：

我认为没有任何直接的方法可以获取可绘制图像的名称，除非您将图像名称与图像一起存储。

在 XML 中，您可以执行以下操作将图像名称设置为 imageview 的附加数据

```
android:tag="btful.png" 
```

以编程方式设置图像名称

```
ImageView img = (ImageView) findViewByID(R.id.img)// my image
img.settag("btful.png"); // to set an image name 
```

您可以使用 getTag() 获取图像名称

```
 String imageName = (String)img.getTag(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-11T12:15:55.077

尝试这个，

```
Btn.setBackgroundResource(R.drawable.button_green); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T12:16:37.060

只需在 java 文件中 Findviewbyid 按钮，然后使用：

```
 btn.getBackground(); 
```

它会工作的！

并将其分配给可绘制的...

# php - Codeigniter：routes.php 中的会话类

> ID：14811599
> 
> 赞同：1
> 
> 时间：2013-02-11T12:12:35.557
> 
> 标签：php, codeigniter, routes

如何访问 routes.php 中的 codeigniter 会话类？

我需要该类将所有请求（/login 除外）路由到某个控制器，除非用户具有管理员权限（`$this->session->userdata('logged')`）。

所有路由规则都有效，我只需要访问该类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:27:41.980

您通常无法从配置和路由文件中访问单例 ($this->)，因为此时未加载类

尽管有一些解决方法可以访问会话，但更好的方法是使用 MY_Controller 和 _remap() 函数：

[http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping](http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)

下面是一些示例代码，更多地解释了它们是如何工作的：

[http://www.codebyjeff.com/blog/2012/11/ci-_remap-function-the-friend-you-never-knew-you-had](http://www.codebyjeff.com/blog/2012/11/ci-_remap-function-the-friend-you-never-knew-you-had)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:02:13.917

创建它`MY_Controller`并将其存储在 中`application/core/`，然后让您的其他控制器扩展它：

```
<?php if (! defined('BASEPATH')) exit('No direct script access');

class MY_Controller extends CI_Controller {

function __construct() {
    parent::__construct();
    $this->_check_auth();
}

private function _check_auth(){
    if(!$this->session->userdata('is_admin')){
        $this->session->sess_destroy();
        redirect('login');
    }
}
} 
```

注意：上面的代码假设您已经有一个用户登录系统。

# windows - Windows 上的 Jython 2.5 和 virtualenv

> ID：14811600
> 
> 赞同：4
> 
> 时间：2013-02-11T12:12:37.633
> 
> 标签：windows, virtualenv, jython-2.5

我已经在 Windows 上安装了 Jython 2.5，然后是 setuptools，最后是使用 easy_install 的 virtualenv (1.8.4)。现在我正在尝试使用以下命令行创建一个新的虚拟环境：

> jython \Lib\site-packages\virtualenv-1.8.4-py2.5.egg\virtualenv.py jython_env

但是新虚拟环境的创建失败并出现以下错误：

> os.symlink（py_executable_base，full_pth）
> 
> AttributeError：“模块”对象没有属性“符号链接”

我想这是因为 Windows 不处理符号链接，但有人已经遇到过这个问题，有什么解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T21:42:17.273

有点晚了，但为了其他可能阅读此页面的人的利益......

我最近在 jython2.7.0 上遇到了同样的问题，并设法通过破解 jython 的 Lib/os.py（我的位于 C:\jython2.7.0 下）在底部添加：

```
def symlink(target, file):
    ''' Just copy files in Windows, 
        maybe you could use mklink system calls instead '''
    from shutil import copy
    copy(file, target) 
```

不要忘记删除 os 模块的编译字节码版本，否则将不会加载更改。

然后尝试运行`virtualenv -p /path/to/jython.exe jython-env-name`。

请注意，您应该从系统 PATH 中的 jython bin/ 目录中获得 python2*.dll，注册 dll 或者将 dll 复制到新的 virtualenv 的 bin 目录中。

# iphone - 关于可以与 facebook 事件同步的 iOS sdk 示例

> ID：14811604
> 
> 赞同：1
> 
> 时间：2013-02-11T12:12:49.857
> 
> 标签：iphone, ios, objective-c, xcode

我想开发可以与 facebook 事件同步的 iphone 日历应用程序。我无法理解我应该从哪里开始。你能建议我一些开始的方法吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:22:30.800

首先使用此链接开发日历：`https://github.com/klazuka/Kal` 这类似于内置日历中的 iPhone，然后在您的应用程序中使用它来显示事件。

# c++ - 为什么 std::count 返回一个有符号整数？

> ID：14811606
> 
> 赞同：6
> 
> 时间：2013-02-11T12:12:53.203
> 
> 标签：c++, types, containers, c++-standard-library

看到`std::count`返回的 a `iterator_traits<InputIterator>::difference_type`，我真的很惊讶，它又指的是`long int`我平台上的 a 。

这是为什么？容器内的负数元素没有任何意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:18:32.347

它实际上是 a [`std::ptrdiff_t`](http://en.cppreference.com/w/cpp/types/ptrdiff_t)，它必须是有符号整数。它必须被签名，因为它可以用作两个迭代器之间的差异，这当然可以是负数。

# wpf - 嵌套控件的 WPF RelativeSource 问题

> ID：14811608
> 
> 赞同：1
> 
> 时间：2013-02-11T12:13:01.633
> 
> 标签：wpf, binding, triggers, nested-controls

我有以下标记：

```
<Button Name="m_SaveButton" Command="{Binding SaveCommand}">
    <StackPanel>
        <Image Source="{StaticResource IconSave16}">
            <Image.Style>
                <Style TargetType="Image">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Button}}}" Value="False">
                            <Setter Property="Source" Value="{StaticResource IconSaveInactive16}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Image.Style>
        </Image>
        <Label Content="Save" />
    </StackPanel>
</Button> 
```

当 Button.IsEnabled 为 false 时，我想更改嵌套在 Button 内的图像。上面的标记不起作用。

我试图使用在这里找到的 Meleak 代码：[WPF Mouseover Trigger Effect for Child Controls](https://stackoverflow.com/questions/7666836/wpf-mouseover-trigger-effect-for-child-controls)

有谁可以建议我解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:33:47.437

[由于Value Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)，您无法更改样式中的本地值。这应该有效。

```
<Image>
    <Image.Style>
        <Style TargetType="Image">
            <Setter Property="Source" Value="{StaticResource IconSave16}" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Button}}}" Value="False">
                    <Setter Property="Source" Value="{StaticResource IconSaveInactive16}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image> 
```

# asp.net - asp.net 服务器控件未正确保存状态

> ID：14811609
> 
> 赞同：2
> 
> 时间：2013-02-11T12:13:01.690
> 
> 标签：asp.net, ajaxcontroltoolkit, custom-server-controls, servercontrols

我正在尝试创建一个使用 AjaxControlToolkit 中的控件的 ASP.net 服务器控件。本质上，控件是一个下拉列表和一个按钮。当用户单击按钮时，将打开一个模式对话框 (modalPopupExtender)。该对话框有一个复选框列表，其中包含可供选择的选项列表。当用户选择他们的选项并点击 Ok 按钮时，在对话框中，对话框关闭并且所选选项应该被添加到下拉列表中。但是，发生的情况是，当用户做出选择并点击 OK 时，只会添加 Checkboxlist 中的最后一项。我认为这可能与我覆盖的继承函数有关。谁能告诉我我可能做错了什么？以下是相关代码：

```
<DefaultProperty("Text"), ToolboxData("<{0}:myServerControl runat=server> 
        </{0}:myServerControl >")> _
Public Class myServerControl 
Inherits CompositeControl
Implements INamingContainer, IPostBackEventHandler

Private myDropDownListAs New DropDownList
Private addPlant As New Button
Private _updatePanel As UpdatePanel
Private _modalExtenderOne As AjaxControlToolkit.ModalPopupExtender
Private lblWarning As Label
Private cb1 As New CheckBoxList
Private btnSavePlants As New Button
Private btnCancel As New Button

  Protected Overrides Function SaveViewState() As Object
    Return New Pair(MyBase.SaveViewState(), Nothing)
End Function

Protected Overrides Sub LoadViewState(ByVal savedState As Object)
    MyBase.LoadViewState(CType(savedState, Pair).First)
    EnsureChildControls()
End Sub

Protected Overrides Sub CreateChildControls()
    createDynamicControls()
    MyBase.CreateChildControls()
End Sub

Protected Overrides Sub OnInit(ByVal e As System.EventArgs)       
    MyBase.OnInit(e)

End Sub
Protected Overrides Sub OnLoad(ByVal e As System.EventArgs)
    MyBase.OnLoad(e)
End Sub

 Private Sub createDynamicControls()
    Controls.Clear()
    AddHandler btnSavePlants.Click, AddressOf saveItems_Click
    _updatePanel = New UpdatePanel
    Dim myTable As New Table
    myTable = buildControl()  ' a funciton that returns a built table
    Dim myPanel As New Panel
    myPanel = buildDialog()  'a function taht returns a build modal dialog
    _updatePanel.ContentTemplateContainer.Controls.Add(myTable)
    _updatePanel.ContentTemplateContainer.Controls.Add(myPanel)
    Me.Controls.Add(_updatePanel)
End Sub

  Protected Sub saveItems_Click(ByVal sender As Object, ByVal e As EventArgs)
    Me.myDropDownList.Items.Clear()
    Try
        For Each i As ListItem In Me.cb1.Items
            If (i.Selected = True) Then
                Dim newLi As New ListItem
                With newLi
                    .Selected = False
                    .Text = i.Text
                    .Value = i.Value
                End With

                Me.myDropDownList.Items.Add(newLi)
            Else                    
            End If

        Next
    Catch ex As Exception

    End Try

End Sub

   Public Sub bindSelections(ByVal myList As List(Of myObject))

    For Each p As myObjectIn myList
        Dim newLI As New ListItem
        newLI.Value = p.EquipmentPK
        newLI.Text = p.EquipmentID

        Me.cb1.Items.Add(newLI)

    Next

End Sub

Public Sub RaisePostBackEvent(ByVal eventArgument As String) Implements System.Web.UI.IPostBackEventHandler.RaisePostBackEvent

End Sub

End Class 
```

# tomcat6 - Tomcat 部署失败并出现错误 403

> ID：14811611
> 
> 赞同：1
> 
> 时间：2013-02-11T12:13:04.950
> 
> 标签：tomcat6

我的 tomcat 部署每次都失败，并出现以下错误：

403 访问被拒绝

您无权查看此页面。

这是我的 tomacat-users.xml：

```
 <?xml version='1.0' encoding='utf-8'?>
    <tomcat-users>
    <role rolename="manager-gui"/>
    <user username="bhaskar" password="bhaskar007" roles="manager-gui"/>
    </tomcat-users> 
```

我不知道在这种情况下我做错了什么。Tomcat 管理器允许我登录但不允许部署。请帮忙，因为我很确定我的部署路径是正确的。

# google-eclipse-plugin - Juno 的 GPE 覆盖运行配置中的参数

> ID：14811612
> 
> 赞同：1
> 
> 时间：2013-02-11T12:13:05.660
> 
> 标签：google-eclipse-plugin, gwt-2.5, google-plugin-eclipse

我在 Eclipse Juno 上使用 GPE（GWT 2.5 插件），看起来每次执行应用按钮时参数选项卡的内容都会被覆盖。唯一的解决方法是最后编辑参数选项卡，然后关闭对话框。我必须设置一个不同的端口号，但如上所述，端口属性会被删除。我不使用嵌入式服务器。

TIA乌吉比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:41:20.327

@Rajeev

我不使用默认端口（8888），也不想使用嵌入式服务器，因此未在“服务器”选项卡中选中。该应用程序在端口 8080 上的 JBoss 服务器上运行。当我通过“参数”选项卡中的“-port 8080”添加它时，它将主要被 romved。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:55:03.923

What port number are you setting? If you're setting it to the default port number expected for that server, it will be removed from the Arguments tab.

Have you tried changing the port number in the Launch Config UI? There should be a tab for "Server", where you can change the port.

# matlab - 了解何时对内部 Simulink 子系统进行采样

> ID：14811616
> 
> 赞同：3
> 
> 时间：2013-02-11T12:13:13.773
> 
> 标签：matlab, simulink

我有一个采样时间为 1.0 的外部 Simulink 子系统 A，其中包含采样时间为 10.0 的内部子系统 B。一切都按预期工作；但是，我需要子系统 A 的输出端口，指示子系统 B 是否已在此步骤中采样，即每第十步（1.0/10.0）产生 1，否则为 0（我不想用计数器硬编码，但是正确获取此信息）。当然，子系统 B 可以通过输出端口将此信息传递给包含子系统 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:35:51.247

一种方法如下所示。我希望这些图片是不言自明的。所示模型为子系统 A，采样时间为 1s，原子子系统为子系统 B，采样时间为 10s。（请在另一个选项卡中打开图片以查看全尺寸模型）

![模型](../Images/eda5bb72a48c6b8d2e117579b481e126.png)

这会产生以下信号，我相信这就是您所追求的。

![阴谋](../Images/d4a1bde1fe35b46fbf7978eacb73e7fd.png)

# java - 使用 iText 将图像添加到 PDF

> ID：14811618
> 
> 赞同：6
> 
> 时间：2013-02-11T12:13:23.233
> 
> 标签：java, image, pdf, io, itext

我正在尝试使用 iText 将图像添加到 PDF 文件。文件从 .TXT 转换为 PDF 并且应该添加图像：

```
//Convert Reports to PDF
File conv = new File("Report Forms/");
String[] filesconv = conv.list(only);
for (int c = 0; c < filesconv.length; c++) {
    PdfWriter writer = null;
    try {
        Document output = new Document(PageSize.B4);
        Rectangle page = output.getPageSize();
        page.setBackgroundColor(new java.awt.Color(255, 255, 255));
        FileInputStream fs = new FileInputStream("Report Forms/" + filesconv[c]);
        FileOutputStream file = new FileOutputStream(new File("Report Forms/" + name + " " + exa + " FORM " + level + " " + year + ".pdf"));
        DataInputStream in =new DataInputStream(fs);
        BufferedReader br = new BufferedReader(new InputStreamReader( in ));

        writer = PdfWriter.getInstance(output, file);
        writer.createXmpMetadata();

        //define the  font for the disclaimer.
        com.lowagie.text.Font fontfooter = new
        com.lowagie.text.Font(com.lowagie.text.Font.COURIER, 12, com.lowagie.text.Font.BOLD);
        fontfooter.setColor(new java.awt.Color(0, 52, 154));

        output.newPage();
        writer.setPageEvent(new CustomBorder());
        output.open();
        writer.open();

        FileInputStream fsname = new FileInputStream("Report Forms/" + filesconv[c]);
        BufferedReader brname = new BufferedReader(new InputStreamReader(fsname));
        for (int p = 0; p < 0; p++) {
            brname.readLine();
        }
        String custname = brname.readLine();
        // System.out.println(custname);
        com.lowagie.text.Font f1 = new com.lowagie.text.Font(com.lowagie.text.Font.COURIER, 12, com.lowagie.text.Font.BOLD);
        f1.setColor(Color.BLACK);
        output.add(new Paragraph(new Phrase(custname, f1)));
        Image image = Image.getInstance("Student Images/" + num + ".png");
        image.setAlignment(Image.ALIGN_RIGHT);
        image.setAbsolutePosition(450f, 10f);
        image.scalePercent(60, 50);
        Chunk chunk = new Chunk(image, 0, -20);
        HeaderFooter header = new HeaderFooter(new Phrase(chunk), false);
        header.setAlignment(Element.ALIGN_RIGHT);
        header.setBorder(Rectangle.NO_BORDER);
        output.setHeader(header);

        String line = "";
        int lineNo = br.read();
        while ((line = br.readLine()) != null) {
            for (lineNo = 0; br.ready(); lineNo++) {
                if (lineNo % 2 == 1) {
                    line = br.readLine();
                    com.lowagie.text.Font f2 = new com.lowagie.text.Font(com.lowagie.text.Font.COURIER, 12, com.lowagie.text.Font.BOLD);
                    f2.setColor(Color.BLACK);
                    Paragraph p1 = new Paragraph(line, f2);
                    p1.setAlignment(Element.TABLE);
                    PdfPTable table = new PdfPTable(1);
                    table.setWidthPercentage(100);
                    PdfPCell cell = new PdfPCell();
                    cell.setBackgroundColor(new java.awt.Color(247, 246, 243));
                    cell.setBorder(Rectangle.NO_BORDER);
                    cell.setUseBorderPadding(true);
                    cell.setPadding(0);
                    cell.setBorderColor(new java.awt.Color(247, 246, 243));
                    cell.addElement(p1);
                    table.addCell(cell);
                    output.add(table);

                } else {
                    line = br.readLine();
                    com.lowagie.text.Font f2 = new com.lowagie.text.Font(com.lowagie.text.Font.COURIER, 12, com.lowagie.text.Font.BOLD);
                    f2.setColor(new java.awt.Color(0, 52, 154));
                    Paragraph p1 = new Paragraph(line, f2);
                    p1.setAlignment(Element.TABLE);
                    PdfPTable table = new PdfPTable(1);
                    table.setWidthPercentage(100);
                    PdfPCell cell = new PdfPCell();
                    cell.setBorder(Rectangle.NO_BORDER);
                    cell.setBorderWidthBottom(1f);

                    cell.setUseBorderPadding(true);
                    cell.setPadding(0);
                    cell.setBorderColor(new java.awt.Color(255, 255, 255));
                    cell.addElement(p1);
                    table.addCell(cell);
                    // output.add(page);
                    output.add(table);
                }
            }
        }
        output.close();
        file.close();
        fs.close();
        fsname.close(); in .close();
        writer.close();
    } catch(Exception ce) {
        JOptionPane.showMessageDialog(this, ce, "Error", JOptionPane.PLAIN_MESSAGE);
    }
} 
```

如果我没有添加任何图像，则转换进行得很好，但是当我添加图像时，PDF 文件生成的大小为 0KB，当您尝试打开时，会出现错误，因为文件已损坏而无法打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-12-10T10:58:47.780

可以帮助您将图像和图像标题添加到 pdf。

```
Image image1 = Image.getInstance("sample.png");
image1.setAlignment(Element.ALIGN_CENTER);
image1.scaleAbsolute(450, 250);
//Add to document
document.add(image1);
Paragraph imgCaption = new Paragraph(" Sample image-1", imgcaption);
Summary.setAlignment(Element.ALIGN_LEFT);
Summary.setSpacingAfter(10f);
document.add(imgCaption); 
```

# php - Symfony 2 / Doctrine 2：获取对 PersistentCollection 的更改

> ID：14811620
> 
> 赞同：6
> 
> 时间：2013-02-11T12:13:23.220
> 
> 标签：php, forms, symfony, doctrine-orm, persistence

我正在构建一个应用程序，用户可以在其中编辑一些数据，然后显示一个屏幕，他可以在其中确认（和评论）他的编辑。

在确认表单中，我显示了对实体所做的更改。这适用于“正常”字段。下面是一些用于检查单个字段的代码：

```
// create $form
// bind $form

if ($form->isValid() {
    $data = $form->getData();
    // example, get changes of a "normal" field
    if ($data['color'] != $entity->getColor()) {
        // do something with changes
    }
} 
```

但我不能对关系做同样的事情（例如 ManyToMany with Users）：

```
 if ($data['users'] != $entity->getUsers() 
```

不起作用，因为 $data['users'] 和 $entity->getUsers() 引用相同的持久性集合。可以调用这个函数看看有没有变化：

```
 if ($data['users']->isDirty()) 
```

但无法查看进行了哪些更改。

上面的第二个问题是，如果从持久化集合中删除所有项目，Doctrine 不会将其标记为“已更改”（isDirty() = true），因此我无法捕捉到用户删除所有“的具体更改”用户”来自表单中的实体。

请注意，代码一切正常，我唯一的问题是我无法查看/处理在确认步骤中所做的更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T01:38:10.840

[`Doctrine\ORM\PersistentCollection`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/PersistentCollection.php)具有内部 API（公共）方法，`getSnapshot`可在. 例如，您可以在.`getDeleteDiff``getInsertDiff``Doctrine\ORM\UnitOfWork``onFlush`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T17:30:56.090

像这样解决它：

1) 要获取将直接对实体进行的更改，请使用以下命令：

```
// create form
// bind form
// form isValid()

$uow = $em->getUnitOfWork();
$uow->computeChangeSets();
$changeset = $uow->getEntityChangeSet($entity);
print_r($changeset); 
```

2a）要更改关系，请使用上面 Lighthart 的答案：

```
$oldUsers = $entity->getUsers()->toArray();
// bind form
// form isValid
$newUsers = $entity->getUsers()->toArray();
// compare $oldUsers and $newUsers 
```

2b) 在 Persistent Collection 上使用这些方法来查找插入/删除：

```
$newUsers = $entity->getUsers();
$inserted = $newUsers->getDeleteDiff();
$deleted  = $newUsers->getInsertDiff(); 
```

(2b) 的唯一问题是，如果删除了所有用户并且没有添加任何用户，则 getDeleteDiff() 为空，这似乎是 Doctrine 错误/特质

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T04:55:38.283

在绑定之前将原始集合存储在一个变量中，然后在绑定之后比较新集合。PHP 有不少数组比较函数，集合很容易通过 $collection->toArray() 变成原生数组；

例如：

```
// create form
$oldusers=$entity->getUsers()->toArray();
// bind form
if ($form->isValid() {
    $data = $form->getData();
    if ($data['users'] != $oldusers) {
        // do something with changes
    }
} 
```

# ruby-on-rails - RoR：更新动作。出错时的渲染路径

> ID：14811621
> 
> 赞同：4
> 
> 时间：2013-02-11T12:13:23.167
> 
> 标签：ruby-on-rails, validation, render, edit

Rails 项目：`Project`有很多`Ticket`。

编辑工单的路径：`/projects/12/tickets/11/edit`

当更新票证并且验证失败时，我使用`render :action => "edit"`.

但是，当这次编辑视图渲染时，路径变为`/tickets/11/`

这意味着我丢失了一些参数。我怎样才能保持原来的路径？

路线.rb：

```
 resources :projects do
    resources :tickets
  end
  resources :tickets 
```

门票控制器.rb

```
 def new
    @ticket = Ticket.new
  end

  def create
    @ticket = Ticket.new(params[:ticket])
    @ticket.user_id = session[:user_id]

    respond_to do |format|
      if @ticket.save
        format.html { redirect_to project_path(@ticket.project), :notice => "Ticket was created." }
      else
        format.html { render :action => "new" }
      end
    end
  end

  def edit
    @ticket = Ticket.find(params[:id])
  end

  def update
    @ticket = Ticket.find(params[:id])
    respond_to do |format|
      if @ticket.update_attributes(params[:ticket])
        format.html { redirect_to project_ticket_path(@ticket.project, @ticket), :notice => "Ticket was updated." }
      else
        format.html { render :action => "edit" }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:32:37.840

您正在调用资源两次。如果您不想“丢失一些参数”，请删除第二个。

```
resources :projects do
  resources :tickets
end 
```

但是，如果您也想要`resources :tickets`非嵌套，您可以将其限制为仅`show`，`index`以避免在创建和编辑时丢失一些参数。

```
resources :projects do
  resources :tickets
end
resources :tickets, :only => [:index, :show] 
```

**编辑**- 我相信问题出在你的形式上。
确保你有两个对象：

```
form_for([@project, @ticket]) do |f| 
```

此外，您必须`project`在创建或更新`ticket`. 因此，您的`new`和`edit`操作必须具有以下内容：

```
@project = Project.find(params[:project_id])
@ticket = @project.ticket.build 
```

和相同的`create`行动：

```
@project = Project.find(params[:project_id])
@ticket = @project.ticket.build(params[:ticket]) 
```

**edit2** - 你的更新操作应该是这样的：

```
@project = Project.find(params[:project_id])
@ticket = Ticket.find(params[:id])
if @ticket.update_attributes(params[:ticket])
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:35:52.953

看看[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)。您应该能够使用嵌套路由助手从控制器重定向到嵌套资源，例如`project_ticket_path(@project, @ticket)`.

# lua - 电晕停止对象被拖出屏幕

> ID：14811628
> 
> 赞同：3
> 
> 时间：2013-02-11T12:13:31.483
> 
> 标签：lua, coronasdk

我有多个可以在屏幕上移动的可拖动对象。我想设置一个边界，这样它们就不能被拖出屏幕。我真的找不到我想要做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:05:02.387

有几种方法可以做到这一点。

您可以将一些静态物理体设置为墙（就在屏幕边缘之外），并将动态物理体附加到您的可拖动对象。如果您不希望多个可拖动对象相互碰撞，则需要设置自定义碰撞过滤器。

最简单的方法（假设您的对象还不是物理对象）是将所有可拖动项目放入表格中。然后在运行时侦听器中，不断检查对象的 x 和 y 位置。例如

```
object1 = display.newimage.....

local myObjects = {object1, object2, object3}

local minimumX = 0
local maximumX = display.contentWidth
local minimumY = 0
local maximumY = display.contentHeight

local function Update()

    for i = 1, #myObjects do

        --check if the left edge of the image has passed the left side of the screen
        if myObjects[i].x - (myObjects[i].width * 0.5) < minimumX then
            myObjects[i].x = minimumX

        --check if the right edge of the image has passed the right side of the screen
        elseif myObjects[i].y + (myObjects[i].width * 0.5) > maximumX then
            myObjects[i].x = maximumX

        --check if the top edge of the image has passed the top of the screen
        elseif myObjects[i].y - (myObjects[i].height * 0.5) < minimumY then
            myObjects[i].y = minimumY

        --check if the bottom edge of the image has passed the bottom of the screen
        elseif myObjects[i].x + (myObjects[i].height * 0.5) > maximumY then
            myObjects[i].y = maximumY
        end

    end
end

Runtime:addEventListener("enterFrame", Update) 
```

该循环假定图像的参考点位于中心，如果不是，则需要对其进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T02:59:14.000

我还想为那些需要他们的对象更多或更多离屏的人添加，你需要对代码进行以下调整**（请记住 Gooner 在评论周围切换“><”）**我也重命名了一些变量（minimumX/maximumX 为 tBandStartX/tBandEndX），所以请记住这一点。

```
-- Create boundry for tBand

local tBandStartX = 529
local tBandEndX = -204

    local function tBandBoundry()
            --check if the left edge of the image has passed the left side of the screen
            if tBand.x  > tBandStartX then
                tBand.x = tBandStartX

            --check if the right edge of the image has passed the right side of the screen
            elseif tBand.x < tBandEndX then
                tBand.x = tBandEndX
            end
    end

    Runtime:addEventListener("enterFrame", tBandBoundry) 
```

感谢 TheBestBigAl 帮助我使用此功能到达需要的位置！

-罗比

# c# - 在asp.net + c#中从facebook获取任何用户的公开帖子

> ID：14811629
> 
> 赞同：2
> 
> 时间：2013-02-11T12:13:33.233
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

是否可以从 asp.net + c# 检索用户的帖子？
我已经尝试过[https://graph.facebook.com/search?q=ABC&type=post](https://graph.facebook.com/search?q=ABC&type=post)但它返回的结果与预期不同。
我也尝试通过在应用中心创建一个应用，但它只允许自我发布。

# opengl - 如何确定我的 GLSL 编译器是否优化了以下内容？

> ID：14811630
> 
> 赞同：3
> 
> 时间：2013-02-11T12:13:37.890
> 
> 标签：opengl, code-generation, glsl, shader, compiler-optimization

我确信 GLSL 编译器做了很多优化。我想知道是否有办法（可能使用 GL 调试上下文或某些扩展？）在将给定 GLSL 源字符串转换为无法理解的 ASM 或直接 GPU 机器代码*之前获取它的“优化版本”。*

举个例子：

```
vec3 fx_Noop (const in vec3 vCol) {
    return vCol;
}
vec3 fx_Tex2D (const in vec3 vCol) {
    return fx_Noop(texture(uni_Tex2D, var_Tex2D).rgb);
} 
```

这里应该消除整个 fx_Noop() 定义和对它的所有调用，但更重要的是 fx_Tex2D() 应该像这样重写：

```
vec3 fx_Tex2D () {
    return texture(uni_Tex2D, var_Tex2D).rgb;
} 
```

由于*vec3 vCol*中的 const 没有被使用。

现在我意识到每个 GL 驱动程序和 GLSL 实现的行为都不同。我仍然想深入了解驱动程序在汇编/编译/链接之前对给定的 GLSL 源字符串究竟做了什么。

我也意识到 GLSL 编码器不应该编写像上面这样的代码，但是在一个有点实验性的代码生成场景中，当可以安全地做出某些权衡时，事情会得到很多简化，因为知道大多数编译器/实现都会应用一个很好的清理反正...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:18:12.723

不，如果不分析不同的着色器，就无法确定某种方式。

# javascript - jQuery 和 CSS 的窗口大小问题

> ID：14811636
> 
> 赞同：1
> 
> 时间：2013-02-11T12:13:59.407
> 
> 标签：javascript, jquery, html, css

在我的网站上，每个 div 都是根据窗口大小计算的...

```
// Begin functions 

$(document).ready(function(){
    $('.wrapper').css({'top' : '0px','left' : '0px'});
        $('.wrapper > div').css({'height' : + $(window).height() +'px'});
});

$(document).ready(init);

// Set window height and width variables 
var windowheight = $(window).height(); 
var windowwidth = $(window).width(); 

// Check monitor sze and workot if incentives needs extra space etc 
var bff = 3620 + (1993 - windowwidth);

// Move divs into position 
$('.culture').css('top', + - windowheight + 'px');
$('.path').css('top', + - windowheight + 'px');
$('.training').css('top', + - windowheight + 'px');
$('.apply').css({
    'top' : + - windowheight + 'px',
    'width' : windowwidth + 'px'
}); 
```

以上工作正常，我的问题是，当页面加载时，如果用户然后调整那里的窗口大小，则样式会因为 div 已经加载而被丢弃，jquery 有没有办法检测到这一点，然后重新初始化以上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T02:31:27.880

你为什么不使用`$(window).on('resize', init)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:18:28.707

`$(window).resize()`是的，您可以在 jQuery 中找到是否已调整窗口大小。[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:20:39.033

您可以绑定到调整事件宽度 jquery，这样每次调整窗口大小时，您都可以调用您的代码来设置内容。

下一行将调用您的初始化函数：

```
$(window).resize(init); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T02:57:11.993

使用窗口 onresize 会起作用。

但是，如果可能的话，我会使用纯 CSS 来实现这一点，例如：

HTML

```
<div id="main-container">
...
</div> 
```

CSS

```
#main-container {
  position: absolute;
  top: 0px;
  left: 0px;
  bottom: 0px;
  right: 0px;
} 
```

这样，浏览器将为您处理，省去计算麻烦。

这里的关键是底部和右侧样式，它们仅在 position=absolute 或 position=fixed 时有效。

# jquery - 在 JQuery 中传递 $(this) 以删除表中的行

> ID：14811638
> 
> 赞同：1
> 
> 时间：2013-02-11T12:14:04.457
> 
> 标签：jquery, datatables

我有以下 html 代码，它代表表格的一部分

```
<tr>
   <td>    
      <span class='tip'><a href='#' class='Delete' data-name='product1' title='Delete'><img src='images/icon/icon_delete.png'></a></span>"
   </td>
</tr>
<tr>
   <td>    
      <span class='tip'><a href='#' class='Delete' data-name='product2' title='Delete'><img src='images/icon/icon_delete.png'></a></span>"
   </td>
</tr> 
```

和一些 JS

```
$(document).on('click', '.Delete', function () {
    var name = $(this).attr("data-name");
    $.confirm({
        'title': 'DELETE ROW',
        'message': "<strong>DO YOU WANT TO DELETE </strong><br /><font color=red>' " + name + " ' </font> ",
        'buttons': {
            'Yes': {
                'class': 'special',
                'action': function () {

                    // this is the problem
                    // i am trying to get the row
                    var row = $(this).closest("tr").get(0);

                    oTable.fnDeleteRow(row);

                }
            },
            'No': { 'class': '' }
        }
    });
}); 
```

我正在尝试获取行 ID，以便能够将其删除。我如何将调用者传递给`click`事件

**编辑：**我正在尝试删除一行，也许还有其他方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:31:51.037

您的问题是在 $.confirm 插件的`action`回调函数中，值`this`可能是其他东西（即不是 DOM 节点）。`$(this)`在调用插件之前保存对的引用，并在`action`回调中使用该引用。就像是：

```
$(document).on('click', '.Delete', function () {
    var node = $(this);
    var name = node.attr("data-name");
    $.confirm({
        'title': 'DELETE ROW',
        'message': "<strong>DO YOU WANT TO DELETE </strong><br /><font color=red>' " + name + " ' </font> ",
        'buttons': {
            'Yes': {
                'class': 'special',
                'action': function () {
                    var row = node.closest("tr").get(0);
                    oTable.fnDeleteRow(row);
                }
            },
            'No': { 'class': '' }
        }
    });
}); 
```

这有点猜测，因为我不熟悉您的确认插件，但这是一个常见的 JS 陷阱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:18:50.183

`$(this).parent().parent().parent().remove();`应该摆脱它。

# c# - 从 xml 文件接收错误代码值

> ID：14811639
> 
> 赞同：2
> 
> 时间：2013-02-11T12:14:11.853
> 
> 标签：c#, xml, linq-to-xml

我敢肯定，这是一个简单的问题，但我心里真的很模糊，找不到解决方案。

我有一个非常简单的 xml，它看起来像：

```
 <xml-header>
   <error code="40" message="errorMessage" /> 
  </xml-header> 
```

我需要从中获得价值“40”。所以，在我看来，这意味着：从元素“错误”的属性“代码”中获取值。（我对吗？）

```
return (from node in xdoc.Descendants() select node.Element("error").Attribute("code").Value).First(); 
```

那是行不通的。正确的表达方式是什么？

* * *

[更新]

对不起大家，问题出在 xNamespace 上。

所以它应该是这样的：`xdoc.Descendants(Constants.xNamespace)` *即使在常量类中也有这个，aarrgh。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:49:02.737

选择后代*错误*元素。也避免使用 Value 属性，如果你不想在元素中没有这样的属性的情况下获得异常：

```
(from node in xdoc.Descendants("error") 
 select (int)node.Attribute("code"))
 .First(); 
```

您还可以使用方法语法：

```
xdoc.Descendants("error")
    .Select(e => (int)e.Attribute("code"))
    .First() 
```

请记住 - 如果序列不包含元素，First 将引发异常。如果您想避免该错误，请`FirstOrDefault`改用。如果定义了命名空间，则在选择元素时使用它：

```
XNamespace ns = "http://someAdress";
xdoc.Descendants(ns + "error") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:27:31.193

尝试这样的事情（省略所有错误处理！）：

```
using System;
using System.IO;
using System.Xml.Linq;
using System.Xml.XPath;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            string xml = "<xml-header><error code=\"40\" message=\"errorMessage\" /></xml-header>";

            var element = XElement.Load(new StringReader(xml));
            var errorElement = element.XPathSelectElement("error");
            string code = errorElement.Attribute("code").Value;

            Console.WriteLine(code); // Prints 40
        }
    }
} 
```

或者，使用 XDocument 并避免扩展：

```
using System;
using System.IO;
using System.Xml.Linq;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            string xml = "<xml-header><error code=\"40\" message=\"errorMessage\" /></xml-header>";

            var doc = XDocument.Load(new StringReader(xml));

            var errorElement = doc.Element("xml-header").Element("error");
            string code = errorElement.Attribute("code").Value;

            Console.WriteLine(code);  // Prints 40
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:28:19.387

您已经`error`在后代中有元素。试试这个：

```
return xdoc.Descendants().Select(n => n.Attribute("code").Value).First(); 
```

或者这个，如果你喜欢查询风格：

```
return (from node in xdoc.Descendants() select node.Attribute("code").Value).First(); 
```

# android - 如何从 URL Android 获取目录和文件列表？

> ID：14811640
> 
> 赞同：0
> 
> 时间：2013-02-11T12:14:13.197
> 
> 标签：android, listview

我想在 Android 的 ListView 中获取目录和文件的列表

对于 SD 卡，我使用以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main);
    list = (ListView) findViewById(R.id.list);

    // list.setAdapter(new SimpleCursorAdapter(getApplicationContext(),
    // android.R.layout.simple_list_item_1, c, from, to))
    /*
     * File root = new File(Environment .getExternalStorageDirectory()
     * .getAbsolutePath());
     */
    File root = new File("sdcard");
    ListDir(root);

}

void ListDir(File f) {
    File[] files = f.listFiles();
    fileList.clear();
    for (File file : files) {
        fileList.add(file.getPath());
    }

    ArrayAdapter<String> directoryList = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, fileList);
    setListAdapter(directoryList);
} 
```

我想显示来自 URL uri ="http://192.168.10.225/" 的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:21:56.053

您不能像本地目录一样打开 URL 后面的目录。您需要在您的网络服务器配置中启用 DirectoryListing，然后在访问 URL 时解析网络服务器提供的 HTML 页面。然后您可以使用[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)加载网站。

# iphone - iOS：相机方向

> ID：14811641
> 
> 赞同：12
> 
> 时间：2013-02-11T12:14:20.637
> 
> 标签：iphone, objective-c, camera, rotation, avcapturesession

我想使用 AVCaptureSession 用相机捕捉图像。

它工作正常，我启动相机，我可以得到输出。但是，当我旋转设备时，我遇到了一些视频方向问题。

首先，我想支持横向左右方向，以后也可能是纵向模式。

我实现：

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation{ 
return UIInterfaceOrientationIsLandscapse(interfaceOrientation);
} 
```

当我旋转设备时，它会将应用程序从左侧横向旋转到右侧横向，反之亦然，但我只有在左侧横向时才能正确看到相机。当应用程序处于横向右侧时，视频会旋转 180 度。

非常感谢。

**更新：**

我已经尝试过 Spectravideo328 答案，但是当我尝试旋转设备并且应用程序崩溃时出现错误。这是错误：

```
[AVCaptureVideoPreviewLayer connection]: unrecognized selector sent to instance 0xf678210

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[AVCaptureVideoPreviewLayer connection]: unrecognized selector sent to instance 0xf678210' 
```

错误发生在这一行：

```
AVCaptureConnection *previewLayerConnection=self.previewLayer.connection; 
```

我把它放在 shouldAutorotateToInterfaceOrientation 方法里面。你知道这个错误的原因是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-11T12:34:31.767

奇怪的是，默认的相机方向是 UIInterfaceOrientationLeft。

相机方向不会随着设备的旋转而改变。他们是分开的。您必须手动调整相机方向：

将以下内容放入传递给 toInterfaceOrientation 的方法中（也许您从上面的 shouldAutorotateToInterfaceOrientation 调用它，以便设备旋转和相机旋转）：

您必须先获得预览层连接

```
AVCaptureConnection *previewLayerConnection=self.previewLayer.connection;

if ([previewLayerConnection isVideoOrientationSupported])
{
    switch (toInterfaceOrientation)
    {
        case UIInterfaceOrientationPortrait:
            [previewLayerConnection setVideoOrientation:AVCaptureVideoOrientationPortrait];
            break;
        case UIInterfaceOrientationLandscapeRight:
            [previewLayerConnection setVideoOrientation:AVCaptureVideoOrientationLandscapeRight]; //home button on right. Refer to .h not doc
            break;
        case UIInterfaceOrientationLandscapeLeft:
            [previewLayerConnection setVideoOrientation:AVCaptureVideoOrientationLandscapeLeft]; //home button on left. Refer to .h not doc
            break;
        default:
            [previewLayerConnection setVideoOrientation:AVCaptureVideoOrientationPortrait]; //for portrait upside down. Refer to .h not doc
            break;
    }
} 
```

# jmeter - 我可以为 jmeter 中的 Restful 服务使用什么采样器？

> ID：14811642
> 
> 赞同：0
> 
> 时间：2013-02-11T12:14:25.507
> 
> 标签：jmeter, jmeter-plugins

我正在使用 restful 服务，我想通过发送一个以基本 url 作为目标 url 的 xml 格式请求来测试服务，我尝试使用 xml-RPC 请求并且它工作正常。

但我开始知道我们不应该将 XML-RPC 请求用于 RESTful 服务请求，它应该是一个休息采样器，但在 jmeter 中没有看到这个。

请建议我可以在 jmeter 中使用哪个采样器来提供宁静的服务？

它的正常流程就像 CRUD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:17:06.403

最好的方法是将 HTTP 采样器与 Raw Post 正文一起使用。

添加一个标头管理器作为子项以设置正确的内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T11:23:04.370

REST 架构主要用于 HTTP GET 和 POST 方法交换。

1.  捕获服务调用 URL（在浏览器中检查元素和网络选项卡）

2.检查传递的参数

3.检查GET/POST方法

在您的 HTTP 请求中包含相同的内容并添加一个侦听器。它实际上比 xml-rpc 调用更容易和有效，因为 jmeter 是基于 java 构建的。

参考--- [http请求的官方文档](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)

blazemeter docs 是 jmeter 参考的优秀集合。

# simulation - 用于仿真的 VHDL 替代子模块架构

> ID：14811646
> 
> 赞同：5
> 
> 时间：2013-02-11T12:14:31.060
> 
> 标签：simulation, vhdl, fpga

我有一个实现 DRAM 测试序列的 VHDL 组件。它包含一个子实体，即 DRAM 控制器。

我想模拟（调试）DRAM 测试序列，但对 DRAM 控制器使用一个简单的假存根，而不是真正的、复杂的东西。

有没有办法可以设置它，也许使用 VHDL 配置来使用控制器实体的简单版本进行仿真？我对仿真很陌生，一般来说对 VHDL 的经验并不丰富。

这是使用面向 Spartan-6 的 Xilinx ISE 和 ISim，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:37:58.170

一种不使用配置的方法：

请记住，您可以为每个实体创建多个架构。

因此，您可以在测试台中将一个单元实例化为

```
Controller_1 : entity work.DRAM_controller(simple)
               port map ( ... 
```

或者

```
Controller_2 : entity work.DRAM_controller(rtl)
               port map ( ... 
```

其中“simple”和“rtl”是两种架构。为此，您可能必须将实体和两种架构放在不同的文件中；Xilinx 工具不太擅长处理不常见的情况（有一次他们告诉我配置不是设计单元！）

然后，您可以在测试平台中使用任一架构实例化 DRAM 控制器。

正如vermaete 所说，您还必须测试简化的架构。一种方法是通过在另一个测试平台中实例化两个控制器来在其上运行单元测试，每个架构一个，并比较每个操作的输出。

有趣的是，Ashenden 的直接实体实例化示例（Designer's Guide to VHDL ch 5.4, p.136 in my 1996 edition）是一个 DRAM 控制器！

编辑：（这是一条评论，但太长了）

对于单元测试，两个控制器都可以在测试平台中实例化，一切都很好。

对于系统测试，我不明白 DRAM 控制器在 UUT（顶层设计）内部——您需要一个实例化（真实的）用于合成器和简单的 DRAM 测试，而另一个（简单）用于完整的 DRAM 测试。是的，配置是正确和最干净的方法。在顶层设计 (UUT) 中实例化控制器实体，并在配置中选择架构。

但是，有一个不太干净的替代方案，作为一种备用计划，以防配置不起作用。为顶级实体创建 2 个架构；仅在他们为控制器选择的拱门上有所不同。当您在测试台中实例化顶级实体时，您可以选择任一架构。不过这很痛苦，因为您必须使两个版本保持同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T11:28:21.337

另一种免配置的方式是使用`generate`来实现这一点：

```
sim:if in_simulation generate
   Controller_1 : entity work.DRAM_controller(simple)
                  port map ...
else
   Controller_1 : entity work.DRAM_controller(rtl)
                  port map ...
end generate; 
```

您可以使用[此答案](https://stackoverflow.com/a/13009406/106092)创建一个`in_simulation`常量。

（如果您没有符合 VHDL2008 的工具，则不能执行 an`if...else..end generate`并且您必须执行`if in_simulation`/ `if not in_simulation`pair 代替。提出错误报告 :)

# javascript - 如何对从一个 div 转移到另一个空 div 的列表项进行操作

> ID：14811654
> 
> 赞同：2
> 
> 时间：2013-02-11T12:14:51.420
> 
> 标签：javascript, jquery

我刚开始学习 JavaScript。
我有个问题。我正在尝试执行以下操作：

我有两个div。左填充列表，

.php 代码

```
<ul class="master">
    <?php foreach ($zabiegi as $zabieg): 
        echo '<button class="down" style="display: none;">Down</button>'.'<li>'.$zabieg['nazwa'].'</li>'.'<button class="up" style="display: none;">Up</button>';
    endforeach; ?>
</ul> 
```

html

```
<ul class="master">
    <li><button class="down" style="display: none;">Down</button></li>
    <li>First</li>
    <li><button class="up" style="display: none;">Up</button></li>
    <li><button class="down" style="display: none;">Down</button></li>
    <li>Second</li>
    <li><button class="up" style="display: none;">Up</button></li>
    <li><button class="down" style="display: none;">Down</button></li>
    <li>Third</li>
    <li><button class="up" style="display: none;">Up</button></li>
</ul> 
```

并且是空的。我正在尝试达到以下效果。单击左侧`div`元素时，会将项目复制到右侧`div`。然后，当单击复制到右侧的项目时，`div`我想显示 2 个按钮（元素，等等）调用`UP`，`DOWN`（我应该看起来像`[Down] [Li] [Up]`）。当您单击其中一个（向上、向下）时，分配给它们的适当元素将向上或向下移动一个位置。

我不想使用可拖动（jquery-ui），我想在简单点击的基础上执行这个任务

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:35:54.717

请在下面找到一个非常粗略但有效的示例，如果您决定使用基于此的东西，您将能够清理它，谢谢。

你也可以在这里看到它工作[http://jsfiddle.net/XqE3p/](http://jsfiddle.net/XqE3p/)

```
<ul id="master">
  <li>
    First
    <button class="up">Up</button>
    <button class="down">Down</button>
  </li>
  <li>
    Second
    <button class="up">Up</button>
    <button class="down">Down</button>
  </li>
  <li>
    Third
    <button class="up">Up</button>
    <button class="down">Down</button>
  </li>
</ul>

<script>
(function() {

  // get the UL
  var ul = document.getElementById('master');

  // remove whitespace from in-between the <li>s
  // so that eg element.previousSibling always refers
  // to an <li> and not to eg "    "
  for(var i = 0, child = null; i < ul.childNodes.length; i++) {
    // get each child
    child = ul.childNodes[i];
    // if it's not an element, like an <li>
    if(child.nodeType !== 1) {
      // remove it
      ul.removeChild(child);
    }
  }

  function moveUp(li) {
    // if the li isn't already at the top
    if(li !== ul.firstChild) {
      // move it up one
      ul.insertBefore(li, li.previousSibling);
    }
  }

  function moveDown(li) {
    // if the li isn't already at the bottom
    if(li !== ul.lastChild) {
      // move the li below it up by one, moving us down
      moveUp(li.nextSibling);
    }
  }

  // listen for clicks
  ul.addEventListener('click', function(e) {
    // the clicked element
    var el = e.target;
    // it's class=""
    var elType = el.className;
    // any element with class="up"
    var isUpButton = elType.search(/\bup\b/) !== -1;
    // any element with class="down"
    var isDownButton = elType.search(/\bdown\b/) !== -1;

    if(isUpButton) {
      moveUp(el.parentNode);
    }
    if(isDownButton) {
      moveDown(el.parentNode);
    }
  });
}());
</script> 
```

# delphi - 如何获取加载的运行时包的列表？

> ID：14811655
> 
> 赞同：5
> 
> 时间：2013-02-11T12:14:59.933
> 
> 标签：delphi, delphi-xe2, runtime-packages

我正在为我的应用程序创建一个“版本信息”对话框；类似于 Delphi 在“关于”对话框中的内容。我只想显示运行时包（`.BPL`文件）的版本信息，而不是所有加载的 DLL。是否`RTL`包含函数来获取已加载包的列表，或者我必须使用该[`EnumProcessModules`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682631%28v=vs.85%29.aspx)函数并过滤结果？

提前致谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T12:25:05.657

您可以使用[EnumModules 中](http://docwiki.embarcadero.com/Libraries/XE2/en/System.EnumModules)的函数`System`。

这是一个非常简单的演示，说明如何使用该`EnumModules`函数并获取所有已加载的名称`BPL's`。它是一个控制台应用程序，但代码可以很容易地在生产应用程序中重用。如果您想对其进行测试，请确保您使用的是软件包：

```
program Project17;

{$APPTYPE CONSOLE}

uses
  SysUtils, Classes, Windows;

function EnumModulesFunc(HInstance: Integer; Data: Pointer): Boolean;
var Buff:array[0..1023] of char;
begin
  if GetModuleFileName(HInstance, @Buff, SizeOf(Buff)) = ERROR_INSUFFICIENT_BUFFER then
    Buff[High(Buff)] := #0;
  TStringList(Data).Add(Buff);
end;

var L: TStringList;

begin
  try
    L := TStringList.Create;
    try
      System.EnumModules(EnumModulesFunc, L);
      WriteLn(L.Text);
    finally L.Free;
    end;
    Readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

# asp.net-mvc - 水晶报表中横向子报表生成的页面重复数据

> ID：14811656
> 
> 赞同：1
> 
> 时间：2013-02-11T12:15:01.223
> 
> 标签：asp.net-mvc, subreport, crystal-reports-2010

我的水晶报表有点问题，我希望有人能帮助我。我在 vs2010 中使用水晶报告 13_0_4。

基本上我有一个看起来有点像这样的报告：

![在此处输入图像描述](../Images/3e6c926e18e4ba084d4b61fe1ba2ef05.png)

当子报表数据跨越一页时，我遇到了一些问题，因为我想在每一页上重复初始数据，我似乎无法做到这一点。请记住，子报表水平显示数据（我使用了多列格式属性）。

现在输出看起来有点像这样：

![在此处输入图像描述](../Images/a98e711150ad3506f2c60425207d74c7.png)

我希望它看起来像这样：

![在此处输入图像描述](../Images/a2c8a34df5e2273ac1e0c08943d720bf.png)

# xcode - Xcode 4.6 中的奇怪错误指的是颠覆

> ID：14811662
> 
> 赞同：1
> 
> 时间：2013-02-11T12:15:48.037
> 
> 标签：xcode, svn

错误看起来像：

```
subversion/libsvn_wc/revision_status.c:64: (apr_err=155036)
subversion/libsvn_wc/wc_db.c:12132: (apr_err=155036)
subversion/libsvn_wc/wc_db_wcroot.c:573: (apr_err=155036)
subversion/libsvn_wc/wc_db_wcroot.c:301: (apr_err=155036)
subversion/libsvn_wc/upgrade.c:1551: (apr_err=155036)
svn: E155036: Working copy '/Volumes/(some path)' is too old (format 10, created by Subversion 1.6)
output of svnversion -n is: 
Command /bin/sh emitted errors but did not return a nonzero exit code to indicate failure 
```

尽管如此，我仍然可以编译和执行/调试我的项目，但必须在某个地方摆脱这个错误......提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:15:29.107

好的，现在我开始了：关闭 Xcode，在控制台中为每个项目获取“svn upgrade”——准备好了！这个错误的原因是 Xcode 4.x 不能处理 svn 1.7！

# vba - 多选列表框在 Excel 中切换窗口时更改选项

> ID：14811665
> 
> 赞同：1
> 
> 时间：2013-02-11T12:15:49.747
> 
> 标签：vba, excel

我在 VBA (Excel) 中遇到了 MultiSelect ListBox 的问题。我希望用户在 ListBox 中选择多个选项，但他还需要能够同时切换窗口以在另一个程序中查找选项。当用户切换窗口并返回 Excel 时会出现此问题。当他选择一个选项时，在切换窗口之前被选择为最后一个选项的选项会改变状态（如果选择了最后一个操作，则取消选择该选项；如果取消选择最后一个操作，则选择该选项）。

例子

![例子](../Images/3b059ff0aa7538514f3c719d6d0d5f21.png)

我选择 A 和 B。我切换窗口，然后返回 Excel。我单击 D 并且 B 未被选中（切换窗口之前最后选择的选项）。这真的让用户感到困惑。

任何人都知道这个问题的原因是什么？有没有办法来解决这个问题？

所有列表框代码：

```
Private Sub Worksheet_Activate()

  Worksheets(1).ListBox1.Clear

  ile = Worksheets(2).Range("b1").Value

  For i = 1 To ile
    Worksheets(1).ListBox1.AddItem (Worksheets(2).Range("b" + CStr(i + 2)))
  Next i

End Sub

Private Sub ListBox1_GotFocus()

  Application.ScreenUpdating = False

  Range("a1").Select

End Sub 
```

焦点消失但问题未解决

[http://imgur.com/Flzpq6N](https://imgur.com/Flzpq6N)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:46:44.333

excel的另一个奇怪行为就在那里

您可以将用户选择存储在您不太可能使用的某些工作表的某个模糊范围内（例如 sheet3），因此当它失去焦点时，它不会忘记选择的内容

```
Private Sub ListBox1_Change()
    Dim i As Long, ii As Long
    With Sheet3.[ObscureRange]
        For i = 0 To ListBox1.listCount - 1
            If ListBox1.Selected(i) = False Then
            For ii = 1 To 250
                If ListBox1.List(i) = .Offset(ii, 0) Then _
                .Offset(ii, 0).Delete xlShiftUp
            If "" = .Offset(ii, 0) Then Exit For
            Next
            Else
            For ii = 1 To 250
                If XcludeList(ListBox1.List(i)) = False Then _
                If "" = .Offset(ii, 0) Then _
                .Offset(ii, 0) = ListBox1.List(i): Exit For
            Next
            End If
        Next
    End With
End Sub 
```

XcludeList 子

```
Function XcludeList(strVal As String) As Boolean
    Dim i As Long
    With Sheet3.[ObscureRange]
    For i = 1 To 250
        If strVal = .Offset(i, 0) Then XcludeList = True: Exit For
        If .Offset(i, 0).Value = "" Then XcludeList = False: Exit For
    Next
    End With
End Function 
```

这样做的另一个优点是它仍然记住用户关闭用户窗体后的选择，如果您认为这是一个优势：D

# solr - 是否可以将数据存储在solr中？

> ID：14811669
> 
> 赞同：2
> 
> 时间：2013-02-11T12:16:03.277
> 
> 标签：solr

如果我需要使用几个站点的小索引，我可以在不使用任何数据库的情况下将数据存储在 solr 中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:54:39.197

Solr 可能并不打算成为数据库，而是作为全文搜索解决方案。

可以在 Solr 中存储数据。
您可以将您的字段标记为[stored=true](http://wiki.apache.org/solr/SchemaXml#Common_field_options)，并且信息将保存在 Solr 中。
Solr 会将数据存储在文件系统上，文件系统或 Solr 索引的任何问题都可能导致数据丢失。

主要遵循的方法是将 DB 中的数据作为持久存储，并在 Solr 中对数据进行索引以便更快地搜索。

编辑：-
如果您正在索引网站数据，那么您不需要将数据存储在数据库中。
[带有 Nutch 集成的 Solr](http://wiki.apache.org/nutch/NutchTutorial)可以帮助您实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:52:05.423

您可以在 Solr 中存储数据，但存在一些问题：

*   与普通数据库相比，Solr 是非规范化的。这意味着没有关系、没有外键、没有 SQL 连接
*   您必须确保存储所有字段，而不仅仅是索引
*   如果您想直接从 Solr 显示 HTML 之类的内容，您可能无法使用结果高亮显示
*   更新内容有点痛苦，尽管最新的 Solr (4+) 使它更容易

# iphone - 使用 UITableview 的树视图

> ID：14811671
> 
> 赞同：3
> 
> 时间：2013-02-11T12:16:07.803
> 
> 标签：iphone, ipad

我必须在 UITable View 中显示以下层次结构数据，请给出一些建议数据将来自 plist 并将采用以下形式：

* * *

```
item 0:
            NODEID:0
            PARENTID:0
            LEVEL:0
            CHLID NODES: (NSARRAY)
                 item 0:
                        NODEID:0
                        PARENTID:0
                        LEVEL:0
                        CHLID NODES: (NSARRAY)
            up to n level

    item 1:
            NODEID:0
            PARENTID:0
            LEVEL:0
            CHLID NODES: (NSARRAY) 
```

首先，我将部分标题用于顶级节点，并且在运行时我希望它在用户单击按钮时展开。那么如何将行插入到 n 个部分并更新数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:42:36.807

您必须即时找出子节点。

```
NSPredicate*thePredicate=
[NSPredicate predicateWithFormat:@"SELF.mNodeID == %@",aNodeID];
    NSArray*theChildNodes=[NSArray arrayWithArray:[mNodes filteredArrayUsingPredicate:thePredicate]]; 
```

一旦用户单击展开行，使用其 nodeID 过滤节点以获取子节点。

![在此处输入图像描述](../Images/072e2d76ef98a4334040bf3034d0eccf.png)

# android - Android中的多语言和不同平台支持

> ID：14811672
> 
> 赞同：1
> 
> 时间：2013-02-11T12:16:17.943
> 
> 标签：android, localization, version

这个问题可能很简单，但我只需要澄清一下。我之前曾在 Android 中使用 values-sv、values-fi 风格进行本地化，并且效果很好。我也一直在使用特定于平台的值，例如 values-v11、values-v14，而且效果非常好。现在我需要将它们组合起来，我需要多语言支持和不同的值，具体取决于平台。而且我无法让它工作，我已经尝试过这种风格 values-v11-sv 等等。

我需要这样做的原因是因为我希望根据平台在我的主题上具有不同的样式，并且将在 styles.xml 文件中进行配置。我还有一个问题是我是否需要在所有版本和语言映射中包含所有 strings.xml 文件，或者如果它只需要在具有最低平台号的值映射中，我的意思是字符串应该是相同的所有平台。

实现这一点的正确方法是什么。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:24:40.123

您可以将`string.xml`文件放入特定于语言的目录中`values-fi`，例如将`styles.xml`文件放入特定于版本的目录中，例如`values-v11`.

然后，所有 API 版本的字符串都相同，所有语言的样式都相同。

`values-fi-v11`仅当您希望资源仅适用于此特定版本和语言组合时，才需要使用版本和样式特定目录（请注意，必须首先指定语言）的方法。

有关完整详细信息，请参阅[文档](http://developer.android.com/guide/topics/resources/providing-resources.html)。

# c# - 使用 C# 读取发布数据

> ID：14811674
> 
> 赞同：3
> 
> 时间：2013-02-11T12:16:25.857
> 
> 标签：c#, javascript, jquery, post

我正在使用 Jquery Ajax 函数从 html 页面发送数据，并且我正在使用 C# 在后端读取它。

我用Get的时候，数据发送成功，但是当我切换到Post的时候，后端的数据值为null。

HTML：

```
<form onsubmit="AddData();>
<input type="submit"value="Submit" />
</form> 
```

Javascript：

```
function AddData() {
            var RData = GetRData();
            var postData = { 'Function': "AddData", 'RData': JSON.stringify(RData) };
            $.ajax(
            {
                type: "POST",
                url: "/Services/GetRData.aspx",
                data: postData,
                contentType: "application/json; charset=utf-8",
                dataType: "jsonp",
                jsonp: 'jsoncallback',
                success: function (result) { 
                AddClubCallBackFunction(result) },
                error: function (msg) {
                    alert('Sorry, an error occured while adding your Data!');
                }
            });
        } 
```

C＃：

```
string FunctionName =Request["Function"]; //null
string RData = Request.Form["RData"]; //null 
```

那么，我做错了什么以及如何解决？

**更新：**

我刚刚删除

```
contentType: "application/json; charset=utf-8", 
```

它奏效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:26:48.200

假设上面的代码*正是*您正在执行的，似乎确实有一个错字：

```
var Data = GetRData();
var postData = { 'Function': "AddData", 'RData': JSON.stringify(RData) }; 
```

您的变量是`Data`您的调用`JSON.Stringify`，但`RData`尚未声明（因此为 null 属性）。

**更新**

根据您的最后评论，我会说这是 JSON 格式问题。当您尝试手动构建您在解决方案中*部分*执行的 JSON 对象时，通常会发生这种情况。我会将您的代码更改为：

```
var rdata = GetRData();
var postData = { Function: 'AddData', RData: JSON.stringify(rdata) };
$.ajax({
    ...
    data: JSON.stringify(postData),
    ...
}); 
```

# vba - VBA：将单元格范围复制到不同的工作簿

> ID：14811681
> 
> 赞同：0
> 
> 时间：2013-02-11T12:16:53.370
> 
> 标签：vba, excel, excel-2010

我目前正在研究一组集成的工作簿，我需要在工作簿之间传输数据值。为此，我需要一个 VBA 宏，它可以复制特定范围（工作表中的一行）并将其插入另一本书的概览列表的底部。

我怎样才能做到这一点？

我有点像 VBA 新手，因此非常感谢您的具体说明。注意：我使用的是 MS Excel 2010。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:54:04.147

下面的示例复制将单元格的内容`A1:A3`从`Worksheet`命名`Source`中的`Workbook`命名复制`workbook1.xlsx`到不同的`Worksheet`命名中，。如果两个s 中的任何一个未打开，或者它们不包含调用所需的s，它将引发错误。`Target``Workbook``workbook1.xlsx``Workbook``Worksheet``Sub`

```
Sub Example()

    Dim wb1 As Workbook
    Dim wb2 As Workbook
    Dim ws1 As Worksheet
    Dim ws2 As Worksheet

    Set wb1 = Workbooks("workbook1.xlsx")
    Set wb2 = Workbooks("workbook2.xlsx")
    Set ws1 = wb1.Sheets("Source")
    Set ws2 = wb2.Sheets("Target")

    ws2.Range("A1:A3") = ws1.Range("A1:A3").Value

End Sub 
```

# php - PHP单例无法访问

> ID：14811683
> 
> 赞同：0
> 
> 时间：2013-02-11T12:17:05.143
> 
> 标签：php, singleton

我在让单例在 php 5.3 中工作时遇到了一些问题

我想要实现的是，我将能够在一个类中包含一个 php 文件，这让我可以通过字典在全局单例上翻译网页。

使用示例：

```
<?php
    include_once "CLocale.php";
?>
//...
<head>
<title><?php CLocale::Instance()->getText("StrMemberArea")?></title> 
```

我的班级目前如下所示：

```
class CLocale
{
    private function __clone()
    {
    }

    public static function Instance()
    {
        if (static::$_instance === NULL)
        {
            static::$_instance = new static();
        }
        return static::$_instance;
    }

    private function __construct()
    {
    }

    public function getText($str)
    {
        return "Test";
    }
} 
```

所以，问题是，当使用如上所示的类时，我没有得到任何“Test”输出，而且，我没有得到任何错误。PHP Storm 并没有真正向我显示任何错误。也许你们中的一个人能够在某个地方发现问题。

*在此先感谢，calav3ra*

PS：我不介意单例是如何实现的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:19:30.523

哟忘了回显结果

```
<title><?php CLocale::Instance()->getText("StrMemberArea")?></title> 
```

应该：

```
<title><?php echo CLocale::Instance()->getText("StrMemberArea")?></title> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:19:31.093

Ehm - Singleton 代码完全正确，但您忘记从 getText 输出返回值

```
<?php
    include_once "CLocale.php";
?>
//...
<head>
<title><?php echo CLocale::Instance()->getText("StrMemberArea")?></title> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T12:19:42.223

要显示任何内容，您不仅需要返回它，还需要返回`echo`它`print`。像这样：

```
<title><?php echo CLocale::Instance()->getText("StrMemberArea")?></title> 
```

# ios - NSUserDefaults 可以保存带有自定义对象的 NSArray 吗？

> ID：14811687
> 
> 赞同：6
> 
> 时间：2013-02-11T12:17:14.517
> 
> 标签：ios, cocoa-touch

标题几乎解释了它。我需要先序列化对象，还是有可能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T12:26:55.953

您必须对对象（在您的数组中）中的对象进行编码/解码，并将数组存档到 NSData。

只需添加

```
<NSCoding> 
```

到您的对象的类（在您的数组中）并遵循编译器的警告：D

然后像这样归档你的数组：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:yourArray];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:data forKey:@"yourKey"];

NSArray *array= [NSKeyedUnarchiver unarchiveObjectWithData:[defaults objectForKey:@"yourKey"]; 
```

看看这个[http://soff.es/archiving-objective-c-objects-with-nscoding](http://soff.es/archiving-objective-c-objects-with-nscoding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:23:16.613

你需要序列化它。

来自 NSUSerDefaults 的苹果文档：

> NSUserDefaults 类提供方便的方法来访问常见类型，例如浮点数、双精度数、整数、布尔值和 URL。默认对象必须是一个属性列表，即以下实例（或集合实例的组合）：NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary。如果要存储任何其他类型的对象，通常应该将其归档以创建 NSData 的实例。有关更多详细信息，请参阅首选项和设置编程指南。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T12:28:12.637

是的，你可以做到。

在这里检查你的答案：

> [如何在 NSUserDefaults 中设置 NSArray？](https://stackoverflow.com/questions/1342334/how-to-set-an-nsarray-in-nsuserdefaults)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T12:31:05.083

是的，有可能，只是你必须在存储和检索 NULL 值时处理它，

# iphone - 我的 uinavigationbar 不显示正确的 uinavigationcontroller 的名称

> ID：14811696
> 
> 赞同：1
> 
> 时间：2013-02-11T12:17:49.040
> 
> 标签：iphone, uinavigationcontroller

我弹出到所需的视图控制器，但 uinavigationbar 和 uinavigationitem 没有显示正确的名称，我必须单击后退按钮（uinavigationitem）才能在导航栏上看到正确的名称。

我在用

```
 YTOCalculatorViewController * parent = (YTOCalculatorViewController *)self.controller;
     [self.navigationController popToViewController:parent animated:YES]; 
```

为了显示 YTOCalculatorViewController。我已经把这段代码放在viewcontroller的viewwilldisappear中，从我想去YTOCalculatorViewController的地方，但是虽然它弹出到正确的viewcontroller，但导航栏显示错误的名称，点击后退按钮后，它显示正确的名称。

例如我在堆栈 C B A

在这种情况下，A 是 YTOCalculatorViewController。在显示 C 的时候，我保存了信息，我想再次显示 A，所以我使用上面的代码。

如果我从 A 到 C 再回到 C 到 A 多次 x，那么当我到达 A 时，我必须在后退按钮上单击 x 次才能看到属于 A 的正确 uinavigationbar 的名称. uinavigationbar 显示 B 视图控制器的名称，而不是显示 A 的名称。

对不起，如果我不够清楚，我希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:31:28.820

看来你正试图从一个自我跳到另一个自我..

如果你想弹出到某个已经被推送的特定控制器。假设你已经推送了 A->B->C->D，你目前在**D**上并且想要弹出**B**，你应该执行以下操作

```
for(UIViewController *controller in [self.navigationController viewControllers]){
    if([controller isKindOfClass:[B class]]){
        [self.navigationController popToViewController:controller animated:YES];
        break;
    }

} 
```

以上应该可以正常工作.. 上面的代码在语法上可能不正确，如果是，请更正。

# java - 不同的 OnClickListener 实现方式

> ID：14811701
> 
> 赞同：2
> 
> 时间：2013-02-11T12:18:03.810
> 
> 标签：java, android

有什么区别：

```
public class MainActivity extends Activity {

    public void onCreate (Bundle savedInstanceState) {
        button1 = (Button) findViewById(R.id.btn1);
        button1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // Click code
            }
        )};
    }
} 
```

和：

```
public class MainActivity extends Activity implements OnClickListener {

    public void onCreate (Bundle savedInstanceState) {
        button1 = (Button) findViewById(R.id.btn1);
        button1.setOnClickListener(this);
    }

    public void onClick(View arg0) {
        switch(arg0.getId()) {
        case R.id.button1:
            // Click code
            break;
        }
    }
} 
```

它们具有完全相同的功能和结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:26:04.447

第一种方法使用实现接口方法的匿名内部类。通过使用这种方法，您只接收该特定视图的事件。

在第二种方法中，您整个 Activity 类都实现了该`OnClickListener`接口。您可以将每个 View 的 OnClickListener 设置为`this`，并以一种方法接收所有点击事件，然后您可以在其中过滤它们并对其采取行动。

第一种方法转化为：

```
Button.OnClickListener anonymous_listener = new Button.OnClickListener() { ... };
button.setOnClickListener(anonymous_listener); 
```

也就是说它会`OnClickListener`在你使用它时动态地创建和存储一个新的实例。

在第二种方法中，您的整个类使用 的单个实例，该实例`OnClickListener`被传递给您想要监听点击的所有视图。

# c# - linq to sql 中的隔离级别，DataContext

> ID：14811702
> 
> 赞同：2
> 
> 时间：2013-02-11T12:18:03.677
> 
> 标签：c#, .net, linq, linq-to-sql

需要对带有 linq 的 Dbml 文件的建议，我们有大量数据的数据库。有时表中存在锁定。因此我们需要在 dbml 类上应用未提交读取的隔离级别（我们知道此隔离级别的一些缺点）。

我在 dbml 文件中将苹果下面的代码作为部分类

```
partial class MainDataContext
{
  public MainDataContext()
  {
      base.Connection.BeginTransaction(System.Data.IsolationLevel.ReadUncommitted);
  } 
} 
```

这是一种正确的实施方式吗？或对此提出任何半途而废的建议。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:20:24.413

如果这样做，则需要将事务附加到*该连接上的每个命令*，这不是 LINQ-to-SQL 将为您做的事情（尽管有一些方法可以让它了解事务实例）。也许一种选择是使用接受连接的重载，并简单地提供一个已经打开的连接，您已经通过以下方式踩踏了隔离级别：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED; 
```

当然，如果你这样做了——那么现在*你的工作*就是在你完成后正确地处理连接：LINQ-to-SQL 将假定你正在管理连接的生命周期。

LINQ-to-SQL 数据上下文的另一个选项是使用该`ExecuteQuery<T>(sql, args)`方法，它允许您传入自己的原始 TSQL - 这显然意味着您不再真正使用*LINQ*，但它允许您`NOLOCK`在很少有战术意义的地方（仅使用物化器的数据上下文）。这更加细化，并允许您专注于高吞吐量/高并发表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T12:37:17.360

您可以将与数据库交互的代码放在一个`TransactionScope`块中，并为 TransactionScope 设置所需的隔离级别。

```
TransactionOptions _transactionOptions = new TransactionOptions() { IsolationLevel = IsolationLevel.Snapshot };
using (TransactionScope transactionScope = new TransactionScope(TransactionScopeOption.Required, _transactionOptions))
{
 //your code here
} 
```

当然，更进一步，您可以将 transactionScope 的创建封装在类似工厂的静态方法中，以便在需要的地方更容易，如果您想更改隔离级别，将有一个单独的地方可以更改它。根据您的要求，选择最适合您的。

# ios - 搜索栏和搜索显示，无法识别的选择器发送到实例

> ID：14811711
> 
> 赞同：0
> 
> 时间：2013-02-11T12:18:33.393
> 
> 标签：ios, nspredicate, uisearchbardisplaycontrol

我的 searchBar 有问题，我收到错误无法识别的选择器。

> 2013-02-11 14:48:27.211 分数（免费）[13946:c07] 测试 ijsid 包含 [cd] “A” 2013-02-11 14:48:27.213 分数（免费）[13946:c07] 测试（Axel ，“双轴”，“三轴”，“四轴”） 2013-02-11 14:48:27.213 分数（免费）[13946:c07]-[SingleElements isEqualToString:]：无法识别的选择器发送到实例 0x755a5f0 2013- 02-11 14:48:27.214 分数（免费）[13946:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[SingleElements isEqualToString:]：无法识别的选择器发送到实例 0x755a5f0”***首先抛出调用堆栈：（0x209f012 0x11ace7e 0x212a4bd 0x208ebbc 0x208e94e 0x249e9f 0x24a064 0x2ae4 0x1ab8fb 0x1ab9cf 0x1941bb 0x192872 0x19d701 0x1a5d5d 0x1ade04 0x3d55f5 0x3d809e 0x327cc5 0x11c0705 0xf4213 0x1b5c7e 0x1b5310 0x1c213c 0x1cc5a6 0xc6d4f9 0x20f90c5 0x2053efa 0xba1bb2 0x38a39de 0x29f11da 0x2e2adfc 0x2e2dbf8 0x387e612 0x387e74a 0x387eec0 0x387ecb8 0x387e204 0x2c6c22b 0x2c6c193 0x3850e96 0x387d4cc 0x2e28136 0x2e273c6 0x2e5a980 0x34b67fd 0x2e51576 0x2e526da 0x2e5072e 0x34b4eaa 0x2e6aaf1 0x2e5a72a 0x2e2e6ae 0x2a2d62b 0x11c06b0 0x3899810 0x2a6c1a4 0x2a6e2ff 0x2b20b4 0x274aef 0x275e58 0x2749fe 0x27ed29 0x101ddb 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x1ff7f5 0x101e35 0x101806 0x101beb 0xf3698 0x1ffadf9 0x1ffaad0 0x2014bf5 0x2014962 0x2045bb6 0x2044f44 0x2044e1b 0x1ff97e3 0x1ff9668 0xf0ffc 0x1f8d 0x1eb5）libc++abi.dylib：终止调用抛出异常
> 
> (lldb) po 0x755a5f0 $0 = 123053552 阿克塞尔

。H

```
@interface SingleElementsVC : UITableViewController{
    NSMutableArray *thesingleelementslist;
    sqlite3 * db;
    UISearchDisplayController *searchDisplayController;
    UISearchDisplayController *searchBar;
    NSMutableArray *searchResults;

}

@property(nonatomic,retain) NSMutableArray *thesingleelementslist;
@property(nonatomic, strong)SingleElementsDetailView *details;

-(NSMutableArray *) singleElementsList;
@property (nonatomic, retain) IBOutlet UISearchDisplayController *searchDisplayController;
@property (nonatomic, retain) IBOutlet UISearchDisplayController *searchBar;
@property (nonatomic, copy) NSMutableArray *searchResults;

@end 
```

.m

```
@interface SingleElementsVC ()

@end

@implementation SingleElementsVC
@synthesize thesingleelementslist;
@synthesize searchDisplayController;
@synthesize searchBar;
@synthesize searchResults;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self singleElementsList];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSString *sectionHeader = nil;
    sectionHeader = @"Scale Of Values For Single";
    return sectionHeader;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    NSInteger rows = 0;

    if ([tableView
         isEqual:self.searchDisplayController.searchResultsTableView]){
        rows = [self.searchResults count];
    }
    else{
        rows = [self.thesingleelementslist count];
    }

    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SingleElementsCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if ([tableView isEqual:self.searchDisplayController.searchResultsTableView]){
        cell.textLabel.text = [self.searchResults objectAtIndex:indexPath.row];
    }
    else{
        SingleElements *singleElements = [self.thesingleelementslist objectAtIndex:indexPath.row];
        cell.textLabel.text = singleElements.ijsid;
        NSString *singleElementsDescriptionAndBase = [NSString stringWithFormat:@"%@ (%@)",singleElements.description, singleElements.base];
        cell.detailTextLabel.text = singleElementsDescriptionAndBase;
    }

    return cell;
}

-(NSMutableArray *) singleElementsList{
    thesingleelementslist = [[NSMutableArray alloc] initWithCapacity:10];
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"ElementsDb.sqlite"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %s", sqlite3_errmsg(db));

        }
        const char *sql = "SELECT * FROM single";
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
        }else{

            while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                SingleElements * singleElements = [[SingleElements alloc] init];
                singleElements.group = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
                singleElements.ijsid = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
                singleElements.description = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,3)];
                singleElements.plus3 = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,4)];
                singleElements.plus2 = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,5)];
                singleElements.plus1 = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,6)];
                singleElements.base = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,7)];
                singleElements.baseur = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,8)];
                singleElements.minus1 = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,9)];
                singleElements.minus2 = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,10)];
                singleElements.minus3 = [[NSDecimalNumber alloc] initWithDouble:sqlite3_column_double(sqlStatement,11)];
                singleElements.goeplus3 = [singleElements.plus3 decimalNumberByAdding:singleElements.base];
                singleElements.goeplus2 = [singleElements.plus2 decimalNumberByAdding:singleElements.base];
                singleElements.goeplus1 = [singleElements.plus1 decimalNumberByAdding:singleElements.base];
                singleElements.goeminus1 = [singleElements.minus1 decimalNumberByAdding:singleElements.base];
                singleElements.goeminus2 = [singleElements.minus2 decimalNumberByAdding:singleElements.base];
                singleElements.goeminus3 = [singleElements.minus3 decimalNumberByAdding:singleElements.base];
                [thesingleelementslist addObject:singleElements];
            }
        }
    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
    }
    @finally {
        sqlite3_close(db);

        return thesingleelementslist;
    }
}

- (void)filterContentForSearchText:(NSString*)searchText
                             scope:(NSString*)scope
{
    NSPredicate *resultPredicate = [NSPredicate
                                    predicateWithFormat:@"ijsid contains[cd] %@",
                                    searchText];

    self.searchResults = [NSMutableArray arrayWithArray:[self.thesingleelementslist filteredArrayUsingPredicate:resultPredicate]];

     NSLog(@"test %@", searchResults);
}

#pragma mark - UISearchDisplayController delegate methods
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    return YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text] scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];

    return YES;
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    //if ([[segue identifier] isEqualToString:@"showDetail"]) {

        SingleElementsDetailView *detailViewController = [segue destinationViewController];
        SingleElements *singleElements = [[SingleElements alloc]init];
        detailViewController.singleElements = [self.singleElementsList objectAtIndex:[self.tableView indexPathForSelectedRow].row];
        singleElements = [self.singleElementsList objectAtIndex:[self.tableView indexPathForSelectedRow].row];

        NSLog(@"test %@", singleElements.ijsid);
        NSLog(@"test %@", singleElements.description);
        NSLog(@"test %@", singleElements.goeplus3);
        NSLog(@"test %@", singleElements.goeplus2);
        NSLog(@"test %@", singleElements.goeplus1);
        NSLog(@"test %@", singleElements.base);
        NSLog(@"test %@", singleElements.goeminus1);
        NSLog(@"test %@", singleElements.goeminus2);
        NSLog(@"test %@", singleElements.goeminus3);
    //}
}

@end 
```

类 SingleElements.h

```
@interface SingleElements : NSObject{
    NSString *group;
    NSString *ijsid;
    NSString *description;
    NSDecimalNumber *plus3;
    NSDecimalNumber *plus2;
    NSDecimalNumber *plus1;
    NSDecimalNumber *base;
    NSDecimalNumber *baseur;
    NSDecimalNumber *minus1;
    NSDecimalNumber *minus2;
    NSDecimalNumber *minus3;
    NSDecimalNumber *goeplus3;
    NSDecimalNumber *goeplus2;
    NSDecimalNumber *goeplus1;
    NSDecimalNumber *goeminus1;
    NSDecimalNumber *goeminus2;
    NSDecimalNumber *goeminus3;
}

@property(nonatomic,copy) NSString *group;
@property(nonatomic,copy) NSString *ijsid;
@property(nonatomic,copy) NSString *description;
@property(nonatomic,copy) NSDecimalNumber *plus3;
@property(nonatomic,copy) NSDecimalNumber *plus2;
@property(nonatomic,copy) NSDecimalNumber *plus1;
@property(nonatomic,copy) NSDecimalNumber *base;
@property(nonatomic,copy) NSDecimalNumber *baseur;
@property(nonatomic,copy) NSDecimalNumber *minus1;
@property(nonatomic,copy) NSDecimalNumber *minus2;
@property(nonatomic,copy) NSDecimalNumber *minus3;
@property(nonatomic,copy) NSDecimalNumber *goeplus3;
@property(nonatomic,copy) NSDecimalNumber *goeplus2;
@property(nonatomic,copy) NSDecimalNumber *goeplus1;
@property(nonatomic,copy) NSDecimalNumber *goeminus1;
@property(nonatomic,copy) NSDecimalNumber *goeminus2;
@property(nonatomic,copy) NSDecimalNumber *goeminus3;

@end 
```

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:59:20.180

是`SingleElements`子类`NSString`？？

我的猜测`isEqualToString`是不适用于`SingleElements`.

能贴出`SingleElements`上课代码吗？

**编辑：** 从您更新的问题中，我可以看到它是一个子类，`NSObject`不知道与它有什么`isEqualToString`关系。

为了到达崩溃线（你不会有任何线索，如果我猜对了），请尝试执行以下操作：

1.  转到左侧窗格中的断点导航器。
2.  单击屏幕底部的加号按钮。
3.  选择添加异常断点
4.  在弹出的气泡中，在 Exception 字段中选择 Objective-C。
5.  再次执行程序

现在，尝试再次出现该异常。XCode 会在崩溃之前将您带到该行。然后，在此处发布该行。可能到那时，我们可以寻求解决方案。

# c++ - NVCC 不能与 Intel 的编译器一起工作？

> ID：14811713
> 
> 赞同：0
> 
> 时间：2013-02-11T12:18:35.877
> 
> 标签：c++, cuda, intel, nvcc

我正在尝试在 GPU 上进行一些编码，并且我安装了 Visual Studio 和 Intel Composer，当我启动一个 CUDA 项目时，编写代码然后编译，如果我要求 MS 的编译器编译主机代码，一切都会好起来的，但是如果我要求英特尔的编译器这样做，它总是会失败，无论如何让 NVCC 与英特尔的 C++ 编译器（v 13.0）一起工作？

# c# - DbContext.Add 错误，集合被修改；枚举操作可能无法执行

> ID：14811714
> 
> 赞同：3
> 
> 时间：2013-02-11T12:18:37.787
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我正在寻找答案，但我没有找到任何答案。因此，当我在 中添加第二个元素时`context.Customers`，我得到一个异常：

> 收藏已修改；枚举操作可能无法执行。

为什么？任何帮助都感激不尽。

我的代码：

```
public class CompanyInitalizer : DropCreateDatabaseAlways<CompanyContext>
{
    protected override void Seed(CompanyContext context)
    {
        var contacts = new List<Contact>
        {
            new Contact {
                Vezetéknév="Nagy",
                Keresztnév="János",
                Beosztás="alkalmazott",
                Email="nagy.janos@default1.com",
                Telefonszám="06361254452"
            },

            new Contact {
                Vezetéknév="Kiss",
                Keresztnév="Ferenc",
                Beosztás="alkalmazott",
                Email="kiss.ferenc@default1.com",
                Telefonszám="06361254452"
            }
        };

       contacts.ForEach(d => context.Contacts.Add(d));
       context.SaveChanges();

        var events = new List<Event>
        {
            new Event {
                Időpont=DateTime.Parse("12/31/2010"), 
                Típusa="Tárgyalás",
                Leírás="Éves költségvetés"
            },

            new Event {
                Időpont=DateTime.Parse("12/31/2010"), 
                Típusa="Tárgyalás",
                Leírás="Éves költségvetés"
            }
        };

      events.ForEach(d => context.Events.Add(d));
      context.SaveChanges();

        var customers = new List<Customer>
        {
            new Customer {
                Cégnév ="Default1.Kft",
                Irányítószám= 1012,
                Város="Budapest",
                Cím="Tavasz utca 54.",
                Weblap="http://www.default1.com",
                Telefonszám="06361254452",
                Contacts= contacts,
                Events=events
            },

            new Customer {
                Cégnév ="Default2.Kft",
                Irányítószám= 2440,
                Város="Százhalombatta",
                Cím="Tél utca 34.",
                Weblap="http://www.default1.com",
                Telefonszám="063623254452",
                Contacts=contacts,
                Events=events
            }
        };

    customers.ForEach(d => context.Customers.Add(d)); //Throw exception here!
    context.SaveChanges();           
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:29:36.777

**问题解决了！添加到客户的相同实体。我创建新的联系人和事件实体并添加到客户。**

# javascript - 如何使用 asp.net 下拉列表调用 javascript 函数

> ID：14811718
> 
> 赞同：2
> 
> 时间：2013-02-11T12:18:51.160
> 
> 标签：javascript, asp.net

列表更改时我需要调用一个`javascript`函数。`dropdown`

我怎样才能实现`asp.net`呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T12:39:05.757

每当单击下拉列表时，使用`onchange`事件来执行功能。

```
<select id="mylist" onchange = "go()">
<option value="value1">value1</option>
<option value="value2">value2</option>
</select>

<script>
  function go()
  {
    var x = document.getElementById("mylist").value;
    console.log(x);
  }
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T12:28:17.827

```
<asp:DropDownList runat="server" ID="DDList" onclick="alert(1)"></asp:DropDownList> 
```

如果你想在元素点击时执行函数，你可以使用上面的代码来定义一个应该在“onclick”中执行的函数。

但最好使用类似的东西[`addEventListener`](https://developer.mozilla.org/ru/docs/DOM/element.addEventListener)，只需搜索跨浏览器函数（例如，[这里](http://msdn.microsoft.com/en-us/magazine/ff728624.aspx)的 addListener 函数）：

```
document.getElementById("<%=DDList.ClientID %>").addEventListener("click", fucntionToExecuteName, false) 
```

请记住，在这种情况下，您必须将`DDList.ClientID`其用作元素的 id，因为它与您在 aspx 代码中设置的 ID 不同

但是如果你需要在实际值改变时执行一些函数，你应该使用`onchange`event.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T12:21:01.367

使用**jQuery**：

```
$(document).ready(function(){
    $("#DropDownID").change(function () {
           // Your requirment
     });
}); 
```

另外最好把它写在里面`document.ready`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T12:24:04.857

使用这样的东西（使用 jQuery）：

```
$(document).ready(function() {
    $("#dropdownId").change(function(e)) {
             do something...
    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-11T12:44:48.117

将此脚本添加到您的标记中，并确保还包含对 jquery 的脚本引用：

```
$(document).ready(function()
{
     $("#yourDropdownId").change(function(){
        //Todo: write your javascript code here.
 });
}); 
```

确保以“yourDropdownId”为 ID 的控件具有以下属性：“ClientIDMode”设置为静态或“无所不知”的 ASP.NET 引擎将为生成的 html 自动生成一个元素名称，并将父元素名称附加到默认控制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T12:22:34.943

使用 jQuery

```
$(document).ready(function(){
    $('select[name$=DrpGoingTo]').change(function () {
       //Code here
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-05T02:16:08.460

您可以使用`onchange`事件并从其自身调用它：

```
<asp:DropDownList ID="DropdownList" runat="server" onchange="javascript:MyFunction();" >
</asp:DropDownList> 
```

# mercurial - 查找所有解释两个变更集之间差异的日志消息

> ID：14811721
> 
> 赞同：1
> 
> 时间：2013-02-11T12:19:08.493
> 
> 标签：mercurial, configuration-management

我想找出两个反复无常的修订之间的所有差异。我主要想查看差异的*历史记录*（即变更集日志消息），而不是文件中更改内容的内部细节。

示例：比较修订版**105**和**106**

```
 /---101---103---105 
100         \
   \---102---104---106 
```

在这里，修订版 106 包括 105 没有的变更集 106,104 和 102，而 105 又包括 106 没有的 103 和 105。我怎样才能轻松获得这份清单；理想情况下也考虑移植物？

以下修订集查询几乎可以工作：

```
(ancestors(105) - ancestors(106)) + (ancestors(106) - ancestors(105)) 
```

然而，这是一个相当长的查询，似乎是一个相当常见的问题：*为什么这个分支与我的本地版本完全不同？* 我也认为它没有考虑到移植，不幸的是它包含了无趣的变更集，例如合并。

`git`包括等价物的奖励积分。

***编辑：*** 我想要这个的原因是向人类解释这些版本的不同之处。我有一个复杂的源代码树，我需要能够告诉人们版本 X 包括功能 A 和 B 和错误修复 P，但版本 Y 包括功能 C 和 D 和错误修复 Q - 并且它们是相同的.

如果我回到我的示例：合并本身并不有趣（因此在上面的示例`104`中并不有趣），但是合并所包含的变更集非常有趣 - 意思是 101 和 102。合并将大量更改合并到一个变更集中缺少合理的日志信息。特别是，如果我只找到最近的祖先，我会找到`101`，然后它看起来`102`并不特别有趣。就实际应用的补丁而言，这些信息是完整的——我不需要查看合并变更集`104`是如何构建的，只需要查看结果。但是，如果我想知道它*为什么*包含这些更改，我需要来自`102`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:20:16.820

Hrm，我没有测试过，但会：

```
ancestor(X,Y)::X + ancestor(X,Y)::Y 
```

给你同样的清单。我认为它会，而且可能会更快。

# django - Nginx / Django：访问静态文件导致403 Forbidden

> ID：14811726
> 
> 赞同：2
> 
> 时间：2013-02-11T12:19:20.963
> 
> 标签：django, nginx

我已经尝试调试了几个小时，但我不确定还要检查什么。我的问题是 Nginx 不提供 Django 静态文件。访问静态文件会导致错误**403 Forbidden**。

来自**nginx 错误日志**的确切错误是：

`2013/02/11 05:42:13 [error] 22526#0: *29 open() "/home/mydomain/public_html/test2/src/bootstrap.css" failed (13: Permission denied), client: XXX.XXX.XX.XX, server: mydomain.com, request: "GET /src/bootstrap.css HTTP/1.1", host: "www.mydomain.com"`

这是我的**nginx 配置文件**：

```
server {
    listen   XX.XX.X.XXX:80;
    server_name mydomain.com;
    root /home/mydomain/public_html/test2/app;
    # serve directly - analogous for static/staticfiles
    location /media/ {
        # if asset versioning is used
        if ($query_string) {
            expires max;
        }
    }
    location /admin/media/ {
        # this changes depending on your python version
        root /home/mydomain/public_html/test2/lib/python2.7/site-packages/django/contrib;
    } 
    location /src/ { 
        autoindex    on;   
        root /home/mydomain/public_html/test2;
    }     
    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off; 
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    }
    # what to serve if upstream is not available or crashes
    error_page 500 502 503 504 /media/50x.html;
} 
```

静态文件存储在`/home/mydomain/public_html/test2/src`.

我试过了`chown mydomain.mydomain -R *`，`chmod 755 /home/mydomain -R *`没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:22:19.140

用这个

顺便提一句。[如果是邪恶的](http://wiki.nginx.org/IfIsEvil)

```
server {
    listen 80;
    server_name mydomain.com;

    #access_log /var/log/nginx/x_access.log;
    #error_log /var/log/nginx/x_error.log;

    location /static {
        alias /path/to/your/static;
    }

    location /media {
        alias /path/to/your/media;
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off; 
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:41:16.067

这是我最初问题的**有效解决方案：**

```
server {
    listen   XX.XX.X.XXX:80;
    server_name mydomain.com;
    root /home/mydomain/public_html/test2/app;

    location /admin/media/ {
        # this changes depending on your python version
        root /home/mydomain/public_html/test2/lib/python2.7/site-packages/django/contrib;
    }
    location /src {
        root /home/mydomain/public_html/test2;
    }
    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    } 
    # what to serve if upstream is not available or crashes
    error_page 500 502 503 504 /media/50x.html;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:49:30.920

另一种方法是使用 try_files。这样做的好处是 Nginx 将首先寻找一个真实的文件来提供服务，如果找不到它，它会将执行传递给您的 django 应用程序。例如，这非常适合提供动态 sitemap.xml，因为您不需要在 nginx.conf 中对文件进行特殊处理。

```
# Set default expires headers (used for static assets)
expires 30d;

server {
  listen 80;
  server_name mydomain.com;

  root /some/path/assets/;
  try_files $uri @django;

  location @django {
    expires -1d;
    proxy_set_header  Host $host;
    proxy_set_header  X-Real-IP $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_redirect    off;
    proxy_pass        http://unix:/some/path/server.sock;
  }

  location /static/admin/ {
    alias /some/path/lib/python2.7/site-packages/django/contrib/admin/static/admin/;
  }
} 
```

# .htaccess - htaccess 移动重定向在一台服务器上工作，在另一台服务器上给出 500 错误

> ID：14811729
> 
> 赞同：0
> 
> 时间：2013-02-11T12:19:30.390
> 
> 标签：.htaccess, redirect, mobile

我正在尝试从 detectmobilebrowsers.com 实现 htaccess 移动浏览器检测脚本。格式如下：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} (android|bb\d+|meego) .... [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso) .... [NC]
RewriteRule ^$ http://domain.com/mobile [R,L] 
```

该脚本在我自己的网站（由 mediaTemple 托管）上完美运行，但不会在我的由 XO Communiations 托管的工作站点上解析，这显然对 htaccess 规则非常严格并且提供很少的支持，例如，详细说明[here](http://www.katemorris.com/2010/02/yes-i-hate-xo-communications.html)。服务器将抛出“500 内部服务器错误”。

除了基础知识之外，我对 htaccess 文件的编码不太熟悉，所以我希望有人可能对如何在“严格”的服务器环境中实现这种类型的重定向脚本有所了解。我在上面引用的网站中的博主指出，“如果 [htaccess 文件] 未编码并作为 UNIX 文件加载，则存在导致问题的换行问题”——我不确定这是否可以提供任何方向在这里，但非常感谢任何帮助。目前，我正在使用基于 JavaScript 的重定向，但如果可能的话，我会非常喜欢基于 htaccess 的方法。我想在处理 XO 乏善可陈的支持之前，我会尝试在这里询问...

# mysql - 我可以更改 mysql 中的外键约束吗？

> ID：14811732
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:19:33.500
> 
> 标签：mysql

我在 3 个表中有一个外键，它们在级联更新中。所以我想添加另一个级联删除，。在不放弃约束的情况下这可能吗？如果是，请给我任何 alter 的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:35:49.280

要更改您的外键，您首先必须删除它（使用名称），然后创建一个具有正确定义的新外键并完成！

```
ALTER TABLE `pets` DROP FOREIGN KEY `your_fk_name_here`;
ALTER TABLE `pets` ADD FOREIGN KEY (`owner_id`) REFERENCES `owners`(`id`) ON UPDATE CASCADE ON DELETE CASCADE;
or
ALTER TABLE `pets` ADD CONSTRAINT fk_owner_pet FOREIGN KEY (`owner_id`) REFERENCES `owners`(`id`) ON UPDATE CASCADE ON DELETE CASCADE; 
```

# android - 无法在 Trigger.io Android 应用上启动接收器 com.parse.ParseBroadcastReceiver

> ID：14811733
> 
> 赞同：4
> 
> 时间：2013-02-11T12:19:35.233
> 
> 标签：android, push-notification, trigger.io, parse-platform

我有一个用 trigger.io 构建的 Android 应用程序，使用 Parse 推送通知。应用程序已部署到 google play，并且推送通知运行良好。最近重新构建并部署到google play的新版本app，Forge平台版本为1.4.29。

从那时起，我通过 Google Play 收到了以下崩溃报告：

```
java.lang.RuntimeException: Unable to start receiver com.parse.ParseBroadcastReceiver: android.content.ReceiverCallNotAllowedException: IntentReceiver components are not allowed to register to receive intents
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
at android.app.ActivityThread.access$1500(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.content.ReceiverCallNotAllowedException: IntentReceiver components are not allowed to register to receive intents
at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:125)
at android.app.ReceiverRestrictedContext.registerReceiver(ContextImpl.java:119)
at com.parse.ParseCommandCache.<init>(ParseCommandCache.java:132)
at com.parse.Parse.getCommandCache(Parse.java:450)
at com.parse.ParseObject.saveEventually(ParseObject.java:1022)
at com.parse.ParseInstallation.saveEventually(ParseInstallation.java:170)
at com.parse.ParsePushRouter.saveEventually(ParsePushRouter.java:92)
at com.parse.ParsePushRouter.ensureStateIsLoaded(ParsePushRouter.java:208)
at com.parse.ParsePushRouter.hasRoutes(ParsePushRouter.java:122)
at com.parse.PushService.startServiceIfRequired(PushService.java:129)
at com.parse.ParseBroadcastReceiver.onReceive(ParseBroadcastReceiver.java:19)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2229)
... 10 more 
```

我已经在以下 Android 手机上彻底测试了该应用程序，但我自己无法复制该错误。

*   三星 Galaxy Nexus
*   三星盖乐世 S2
*   三星盖乐世 S

有人可以建议这里出了什么问题以及如何使用 Trigger.io 解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:39:31.490

此问题已在 Forge v1.4.37 中得到修复，其中包括对 Parse Android SDK v1.2.3 的更新。

*   [Trigger.io 发布说明](https://trigger.io/docs/current/api/release_notes.html)
*   [关于 Parse Q&A 的错误报告](https://parse.com/questions/androidcontentreceivercallnotallowedexception-when-registering-for-push-notifications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T05:37:49.657

最近我遇到了这个问题，与 Parse 版本无关。问题是 Parse 的初始化是在 Activity 而不是 Application 上完成的。广播接收器可以在 Activity 之前启动并编写自定义应用程序类并在 onCreate 中初始化 Parse 有帮助。

```
public class MyApplication extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
        //Initialize Parse here
    }
}

<application
        android:name=".MyApplication"
...>
.
.
.
</application> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T23:34:59.970

这个问题在 Forge v1.4.32 中得到解决：http: [//docs.trigger.io/en/v1.4/release-notes.html#v1-4-32](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-32)

# c# - 使用 Dapper 绑定具有附加动态属性的强类型模型

> ID：14811736
> 
> 赞同：4
> 
> 时间：2013-02-11T12:19:51.460
> 
> 标签：c#, dynamic, dapper, strong-typing

我们希望转而使用[Dapper](http://code.google.com/p/dapper-dot-net/)为我们的业务模型提供对象关系映射。

除了这些数据模型，我们还经常遇到由用户创建并作为返回结果集的一部分出现的自定义字段（在运行时未知）：

```
Id
Title
c_MyCustomField1
c_MyCustomField2 
```

目前，所有这些字段都由阅读器返回和处理。我们喜欢将所有这些都转移到[Dapper](http://code.google.com/p/dapper-dot-net/)，但努力解决如何将强类型对象与动态自定义字段混合在一起。

我们看到我们的选项是这样的：

1.  从 dapper 获取动态的每个结果并进行我们自己的绑定。
2.  让 Dapper 绑定到强类型模型并进行单独调用以附加自定义字段。
3.  扩展 Dapper 以在中间添加我们的特定用户案例以绑定已知字段和动态字段。

**1**似乎适得其反，我们可能会受到性能影响，这就是您首先要引入 Dapper 的原因。 **2**我们真的做不到，因为这需要对数据提供者进行大量更改。 **3**我知道我不属于 Dapper 的来源。

我认为圣杯最终会是这样的模型：

```
class Model
{
    int Id {get; set;}
    string Title {get; set;}
    IList<CustomField> CustomFields {get; set;}
}

class CustomField : dynamic
{
    string Name {get; set;}
    object Value {get; set;}
} 
```

有什么方法可以使用 Dapper 完成吗？

与往常一样，任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:33:23.733

目前无法在 dapper 中清晰地建模；您也许可以使用非通用 API 做一些事情，然后手动应用绑定。或者也许只是*包装*一个动态：

```
class Model {
    private dynamic obj;
    public int Id { get { return obj.Id; } set { obj.Id = value; } }
    public string Title { get { return obj.Title; } set { obj.Title = value; } }

    public object this[string key] {
        get { return ((IDictionary<string,object>)obj)[key]; }
        set { ((IDictionary<string,object>)obj)[key] = value; }
    }
} 
```

您可以在不指定泛型参数的情况下使用`dynamic`/来获取。`IDictionary<string,object>``Query`

# java - 在两个正方形之间绘制平行线

> ID：14811739
> 
> 赞同：0
> 
> 时间：2013-02-11T12:19:55.710
> 
> 标签：java, math, geometry

我需要在两个正方形之间画平行线。它们可以倾斜放置。我需要找出 6 个点（正方形 A 上的 3 个点和正方形 B 上的 3 个点），以便在它们之间绘制的线等距。谢谢![在此处输入图像描述](../Images/b7ed7db85d2a12bb70285d0439da7be3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:47:54.723

最好你熟悉一点向量数学。

理想情况下，这些线会将自身定向到两个正方形 (x0, y0) - (x1, y1) 中心之间的向量。

三条线的方向是：

```
x = (x1 - x0)
y = (y1 - y0) 
```

与 (x, y) 成 90° 且大小为 1 的向量：

```
vn = (y, - x) / sqrt(x² + y²) 
```

所以距离中心 10 px 的线是

```
(x0, y0) + 10.vn + µ.(x, y) 
```

对三行使用 -10.vn、0、+10.vn。

确定与正方形边缘的交点（对于第一个正方形，µ > 0）。

因为它对一个人的自我意识是有益的，所以我把解决方案留给你。它也不再那么可读了。

# jquery - 从 CDN 加载 jquery，并在优化的 requireJS 上进行回退

> ID：14811740
> 
> 赞同：3
> 
> 时间：2013-02-11T12:19:57.767
> 
> 标签：jquery, requirejs

我想从带有本地回退的 CDN 加载 jquery。

如果您在 stackoverflow 中查找它，这非常简单，我发现了这个关于任务的[信息性问题。](https://stackoverflow.com/questions/12143737/does-requirejs-2-0-and-jquery-with-plugins-using-shimconfig-need-paths)

但是当我优化生产代码时，jQuery 被捆绑在优化的代码中，这违背了通过公共 CDN 加载 jQuery 的目的。

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:38:25.187

一种方法可能是将其从您的构建中排除。使用配置选项`exclude`

[https://github.com/jrburke/r.js/blob/master/build/example.build.js#L352](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L352)

# c# - Windows 8 C#/XAML如何从单选组中清除选择

> ID：14811741
> 
> 赞同：1
> 
> 时间：2013-02-11T12:20:03.410
> 
> 标签：c#, xaml

我想知道如何从我的 Windows 8 应用程序中的无线电组中清除选择。我在想这样：

```
 RadioButton.SelectedIndex = -1; 
```

有谁知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:06:14.703

尝试使用事件跟踪`RadioButton`当前选择的特定实例，并在需要清除组时`Checked`分配给该实例。`IsChecked = false`是的，这很痛苦……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:40:46.973

您无法清除单选按钮的选择。如果您需要清除选择的能力，请考虑使用其他控件，例如[CheckBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.checkbox%28v=vs.85%29.aspx)

# jquery - jquery插件基础任务

> ID：14811743
> 
> 赞同：0
> 
> 时间：2013-02-11T12:20:07.520
> 
> 标签：jquery, jquery-plugins

我正在尝试开发一个简单的 jquery 插件...

我阅读了 jquery 文档，现在我只是想更改添加插件的 div，但老实说，我不知道发生了什么。

这是 jfiddle 链接：http: [//jsfiddle.net/9eLqm/](http://jsfiddle.net/9eLqm/)

html:

```
<script type="text/javascript">
$(document).ready(function() {
    $('dropdown').pifo_dropdown({'width': 300, 'fontsize' : 18 }); 
    $('dropdown').pifo_dropdown('show');
});
</script>

<div id="dropdown"> div</div> 
```

javascript:

> (function($) { var settings = $.extend( { 'width' : 200, 'maxheight' : 200, 'fontsize' : 13, 'defaultlbl' : '选择一个选项' });
> 
> var methods = { init : function( options ) {
> settings = $.extend(options); // 应用设置 } };
> 
> ```
>  $.fn.pifo_dropdown = function( method, options ) {
> 
> // Methods
> if ( methods[method] ) {
>   return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
> } else if ( typeof method === 'object' || ! method ) {
>   return methods.init.apply( this, arguments );
> } else {
>   $.error( 'Method ' +  method + ' does not exist on jQuery.pifo_dropdrown' );
> }   
> 
> this.fadeOut(); 
> ```
> 
> };
> }) ( jQuery );

任何人都可以帮助我吗？预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:22:34.233

你不能使用`id`这样的元素`$('dropdown')`。对于使用 id 你需要声明它`$('#dropdown')`并假设你使用类`$('.dropdown')`

**代替**

```
$('dropdown').pifo_dropdown({'width': 300, 'fontsize' : 18 }); 
$('dropdown').pifo_dropdown('show'); 
```

**和**

```
$('#dropdown').pifo_dropdown({'width': 300, 'fontsize' : 18 }); 
$('#dropdown').pifo_dropdown('show'); 
```

# android - 如何设置嵌入在片段中的固定大小的imageView？

> ID：14811748
> 
> 赞同：0
> 
> 时间：2013-02-11T12:20:27.003
> 
> 标签：android, imageview

我制作了一个 listfragment 来显示嵌入在另一个片段中的图像视图。通过选择列表中的项目，将显示不同分辨率的不同图像。但我想让它们显示为相同的大小。所以这就是我所做的。但是对于不同的图像和分辨率，它们以不同的大小显示。

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myImageView"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:scaleType="fitXY"
    android:contentDescription="@string/description"
    android:background="#FFF"
    android:padding="10dp"
    >
</ImageView> 
```

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment android:name="com.example.showdognames.DogImageFragment"
    android:id="@+id/DogImageFragment"
    android:layout_weight="wrap_content" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
  />
  <fragment android:name="com.example.showdognames.DognameFragment"
    android:id="@+id/DognameFragment"
    android:layout_weight="wrap_content" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
  />

</LinearLayout> 
```

```
public class DogImageFragment extends Fragment {

    Integer[] imageList = new Integer[] { R.drawable.alaskan_malamute,
            R.drawable.beagle, R.drawable.border_terrier, R.drawable.dashshund,
            R.drawable.finnish_spitz, R.drawable.greyhound,
            R.drawable.portuguese_water_dog, R.drawable.rottweiler };

    private ImageView myView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        myView = (ImageView) inflater.inflate(R.layout.dog_image_fragment,
                container, false);
        myView.setLayoutParams(new LinearLayout.LayoutParams(200,200));
        return myView;
    }

    // method setImageResource is used to bound image reference array and
    // imageView
    public void update(int position) {
        if (myView != null) {
            myView.setImageResource(imageList[position]);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:27:41.787

```
android:layout_weight="wrap_content" 
```

严重地？

如果问题是 ImageView 没有以所需的宽度和高度显示图像，您可以设置 imageview 的 android:scaleType 尝试使用 fitCenter 或 fitXY。看看你想展示什么。

# php - CodeIgniter - 执行 AJAX 操作时是否可以更改 URL？

> ID：14811750
> 
> 赞同：0
> 
> 时间：2013-02-11T12:20:29.220
> 
> 标签：php, ajax, codeigniter

我已经在 ajax 上工作了很长一段时间。我知道标签和hashbang。最近我开始使用 Code Igniter 框架。假设我在一个页面中 - [http://domain.com/media](http://domain.com/media)，并且有一个名为“音频”的链接。

当我点击这个音频链接时，我会发送一个 ajax 请求，获取内容并动态显示内容。但在这种情况下，URL 仍然保持不变（即）[http://domain.com/media](http://domain.com/media)。

现在，当我单击音频链接时是否可以将 url 更改为[http://domain.com/media/audio](http://domain.com/media/audio)并且我仍然想要拥有 ajax 功能。我不想按照代码点火器（/控制器/方法）的通常方式来做。

任何帮助，将不胜感激。提前致谢。

如果在 Code Igniter 中不可能，那么在任何其他框架中是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:57:40.917

您可以使用[`pushState`](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)来实现这一点。

[这是我自己的网站](http://robin.castlin.se/galleri)使用它来浏览给定图像的示例；不会发生重新加载。我还添加了对每个图库图像的支持，并且它已加载 url，因此您可以毫无问题地与任何人共享 url。回退是，如果`pushState`不支持，您将像往常一样简单地浏览。

# c# - 按键保持一定时间后如何重复动作？

> ID：14811752
> 
> 赞同：3
> 
> 时间：2013-02-11T12:20:33.233
> 
> 标签：c#, xna, keyboard, repeat

我目前正在使用 XNA/C# 进行开发。当用户按下一个键 ( `Keys.Right`) 时，我需要移动一个对象。我希望这发生

1.  当用户按键时
2.  1 秒后，用户按住键，然后每 0.25 秒。

我已经实现了第一个：

```
_kbOld = _kbNew;
_kbNew = _kb.GetState();
if(_kbNew.IsKeyDown(Keys.Right) &&
   _kbOld.IsKeyUp(Keys.Right))
{
    //Do something
} 
```

我将如何执行其他操作？我有以下想法：

*   A `Queue<KeyboardState>`, 跟踪最后`KeyboardState`的 s

*   保存最后一次按下按键和松开按键的时间 ( `GameTime`)

它应该像 Windows 中的文本输入一样工作：当你拿着一个字母时，它会在一定时间后重复。

我应该使用哪种方式？你有其他想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:36:52.493

我会简单地存储最后一次推送时间，就像你建议的那样：

```
if (IsPressed())
{
    // Key has just been pushed
    if (!WasPressed())
    {
        // Store the time
        pushTime = GetCurrentTime();

        // Execute the action once immediately
        // like a letter being printed when the button is pressed
        Action();
    }

    // Enough time has passed since the last push time
    if (HasPassedDelay())
    {
        Action();
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:28:30.353

我记得在 javascript 中做类似的事情

1.  您创建一个计时器，将其间隔设置为 1 秒，然后在 mousedown 上启用它（在您的情况下为 keydown）。您将在 keyup 上重置并禁用它。
2.  第二步是将您的行为与 Tick() 事件联系起来。
3.  第三步是在 Tick() 处理程序中检查 Keys.Right 的状态是否为关闭，如果不是，则重置计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:31:57.953

我建议您制作自己的 Key and Keyboard 课程。在键盘中，您可以创建方法 updateInput() 来更新每个键的状态，您可以在其中使用这样的高级功能。在 Key 类中，您可以使用

> 保存最后一次按下键和释放键的时间 (GameTime)

@JuannStrauss 当然不是计时器。

# c# - 浮点格式

> ID：14811761
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:21:06.493
> 
> 标签：c#

我需要将浮点值格式化为字符串，如下所示

```
1.0E11 -- 1.0E11  
1.21 -- 1.21 
```

尝试使用时，`ToString("0.00")`我得到以下值：

```
1.0E11- "10000000000.00"  
1.21 - 1.21 
```

如果它具有指数，我们如何将浮点值转换为具有指数值的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:22:23.703

```
String.Format("{0:E4}", myFloat); 
```

或者

```
myFloat.ToString("E4"); // Where 4 is the number of decimal places 
```

参考：http: [//blogs.msdn.com/b/kathykam/archive/2006/03/29/564426.aspx](http://blogs.msdn.com/b/kathykam/archive/2006/03/29/564426.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:11:02.347

我认为`.ToString("G3")`接近您想要的，但是您没有指定如何`666.123f`格式化中间数字，例如 。

# eclipse - jsp找不到eclipse链接资源

> ID：14811763
> 
> 赞同：0
> 
> 时间：2013-02-11T12:21:07.660
> 
> 标签：eclipse, maven

我有一个带有一些 maven 项目的 eclipse (juno) 工作区，源目录总是出现在一个名为“java 资源”的文件夹下。

由于办公室的一些迁移，我不得不创建一个新工作区并重新导入项目。现在“java资源”文件夹消失了，源目录直接出现在项目根目录下。

这弄乱了我拥有的 jsp 文件中的一些链接资源。项目中有一个jsp文件，该文件在其他项目中的许多其他文件中导入。在这些额外的项目中有一个指向文件所在位置的链接，以便可以找到它。以前发现链接没问题，但现在不是从源目录的根目录开始查找文件，而是在项目的根目录中查找它：

<%@include file="/common/includes/global.jsp"%> 我得到 Fragment "/common/includes/global.jsp" was not found at expected path /MYPROJECT/common/includes/global.jsp

更新 - 我认为链接资源的问题是由此配置引起的。我已经解决了java资源问题，jsp仍然找不到文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:25:08.393

我在旧工作区中查找了配置文件，发现 .settings 下的 org.eclipse.wst.common.component 文件不同。标签 defaultRootSoruce 不正确，因为我项目中的 jsps 不在标准 maven 布局下。

这修复了它：

# ireport - 使用 Oracle 函数进行报告

> ID：14811770
> 
> 赞同：0
> 
> 时间：2013-02-11T12:21:29.687
> 
> 标签：ireport

我有一个 oracle 函数（SOS_NUMBER_TO_WORD_JR_F）。它有 INTEGER 参数，返回类型是 STRING。现在我想从 Ireport 变量或文本字段中调用此函数。我不知道该怎么做？任何人帮助我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:03:56.527

您可以在查询中调用它吗？

```
 SELECT SOS_NUMBER_TO_WORD_JR_F($P{the_integer_parameter}) AS RETURNS_A_WORD
 FROM MY_TABLE 
```

如果这不起作用，请向我们提供有关您通常如何调用该函数的更多信息。

# c# - 如何在 ASP.NET Web API 中使用缓存？

> ID：14811772
> 
> 赞同：61
> 
> 时间：2013-02-11T12:21:34.890
> 
> 标签：c#, asp.net-web-api, http-caching

我正在使用带有 WEB API 的 ASP.NET MVC 4

我有以下操作，在下面显示的操作中，我的服务方法对方法进行 db 调用`DoMagic()`并返回一个整数值，然后我在每个页面上使用该整数值，使用 ajax 调用调用此操作。

以下是我的 WEB API 操作：

```
[OutputCache(Duration = 86400, VaryByParam = "none")]
[ActionName("GetMyMagicNumber")]
public int GetMyMagicNumber()
{
    if (WebSecurity.IsAuthenticated)
    {
        var revenue = _magicService.DoMagic();
        return revenue;
    }
    return 0;
} 
```

我的问题：我尝试过使用`[OutputCache(Duration = 86400, VaryByParam = "none")]`，但我只是在第一次调用 db 时以及对该操作的下一个后续请求将返回缓存值，但这并没有发生。

再次进行 db 调用，db 调用需要时间我如何让它工作？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-11T12:28:32.083

不幸的是，缓存没有内置到 ASP.NET Web API 中。

看看这个让你走上正轨： http: [//www.strathweb.com/2012/05/output-caching-in-asp-net-web-api/](http://www.strathweb.com/2012/05/output-caching-in-asp-net-web-api/)

此处更新资源：[https ://github.com/filipw/AspNetWebApi-OutputCache](https://github.com/filipw/AspNetWebApi-OutputCache)

***编辑：截至 2020-02-03，即使这个答案已经很老了，它仍然有效。***

上面的两个 URL 都指向同一个项目，由[Filip W编写的](https://github.com/filipw)[ASP.NET Web API CacheOutput](https://github.com/filipw/Strathweb.CacheOutput)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-02-22T14:45:45.927

在项目中添加对 System.Runtime.Caching 的引用。添加一个助手类：

```
using System;
using System.Runtime.Caching;

public static class MemoryCacher
{
    public static object GetValue(string key)
    {
        MemoryCache memoryCache = MemoryCache.Default;
        return memoryCache.Get(key);
    }

    public static bool Add(string key, object value, DateTimeOffset absExpiration)
    {
        MemoryCache memoryCache = MemoryCache.Default;
        return memoryCache.Add(key, value, absExpiration);
    }

    public static  void Delete(string key)
    {
        MemoryCache memoryCache = MemoryCache.Default;
        if (memoryCache.Contains(key))
        {
            memoryCache.Remove(key);
        }
    }
} 
```

然后从您的代码中获取或设置缓存中的对象：

```
list = (List <ChapterEx>)MemoryCacher.GetValue("CacheItem1"); 
```

和

```
MemoryCacher.Add("CacheItem1", list, DateTimeOffset.UtcNow.AddYears(1)); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-11-20T12:57:16.303

正如 OakNinja 已经提到的，`[OutputCache]`ASP.NET Web API 目前不支持通过属性进行的输出缓存。

但是，有一些开源实现填补了这一空白：

## Strathweb.CacheOutput

一个小型库，将缓存选项（类似于 MVC 的“OutputCacheAttribute”）引入 Web API 操作。

Github：[https](https://github.com/filipw/Strathweb.CacheOutput)
://github.com/filipw/Strathweb.CacheOutput 许可：Apache v2

## 缓存牛

用于客户端和服务器端的 ASP.NET Web API 中的 HTTP 缓存实现。

Github：[https](https://github.com/aliostad/CacheCow)
://github.com/alostad/CacheCow 许可：麻省理工学院

Scott Hanselmann有一篇不错的[博客文章](http://www.hanselman.com/blog/NuGetPackageOfTheWeekASPNETWebAPICachingWithCacheCowAndCacheOutput.aspx)涵盖了这两个功能集。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-25T23:22:27.963

`[ResponseCache]`现在在 ASP.NET Core 中受支持

功能可能看起来相同，`[OutputCache]`但`[ResponseCache]`仅适用于客户端。

> 响应缓存将缓存相关的标头添加到响应中。这些标头指定您希望客户端、代理和中间件如何缓存响应。

[https://docs.microsoft.com/en-us/aspnet/core/performance/caching/response](https://docs.microsoft.com/en-us/aspnet/core/performance/caching/response)

```
[ResponseCache(Duration = 3600)]
[HttpGet]
public IEnumerable<Product> Get()
{
  return _service.GetAll();
} 
```

# jquery - 如何仅使用 jquery ajax 访问 kippt api？

> ID：14811775
> 
> 赞同：0
> 
> 时间：2013-02-11T12:21:54.523
> 
> 标签：jquery, ajax, api, cross-domain

我正在尝试使用[他们的 api](https://kippt.com/developers/)访问我的 kippt 书签。

该 api 看起来很简单，我可以在我的终端中访问它做一个`curl`请求。但是当我在浏览器中尝试使用 jquery ajax 进行跨域 jsonp 请求时，出现`401 UNAUTHORIZED`错误。

这是我的代码：

```
 var authconfig = {
    api_url: 'https://kippt.com/api/',
    username: 'amit_e',
    password: '*****'
}

$.ajax({
    url: authconfig.api_url + 'lists',
    username: authconfig.username,
    password: authconfig.password,
    dataType: 'jsonp',
    async: false,
    type: 'GET'
}).done(function(data){
    console.log(data); 
}).fail(function(jqXHR, textStatus, errorThrown){
    console.log(errorThrown);
}); 
```

我正在使用 jquery 1.9`http://localhost:3501`在一个简单的 python 服务器上工作。我没有使用 jsonp 的经验。所以请帮我取回json数据。返回的数据应如下所示：

```
{
    "meta": {
        "limit": 20,
        "next": "/api/clips/?limit=20&offset=20",
        "offset": 0,
        "previous": null,
        "total_count": 33
    },
    "objects": [
        {
            "id": 15,
            ...
        },
        ...
    ]
} 
```

更新：

添加 async: false 作为我的 ajax 请求的一个选项让我恢复了我的数据。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:59:25.287

我相信您正在为异步函数使用同步方法，就像 AJAX 函数一样。对于错误方法的示例：

```
var f = function(){
    $.ajax({
        ...
    }).done(function(data){
        console.log('done');
    });
    /* data isn't available yet - data is undefined */
    return data;
}; 
```

AJAX 函数立即返回。即便如此，回应还没有到来。当`done`数据从服务器返回时将触发回调，您需要对其做出反应。

# javascript - 开始在 javascript 中使用 phantom.js

> ID：14811777
> 
> 赞同：0
> 
> 时间：2013-02-11T12:21:56.470
> 
> 标签：javascript, html, phantomjs

我真的不明白如何在我的网页中使用 PhantomJS ......我已经能够在 Windows 上用作二进制文件，但现在需要在线包含在我的网络应用程序中。

我已经安装了 Linux 版本并在我的机器上获取了源代码，但是如何实际使用它呢？这是我下面非常简单的`hello word`测试。我以为我会打开控制台看到“Hello World！” 但什么也没发生。我究竟做错了什么？甚至在 中`hello.js`，我们实际上在哪里调用 phantomjs 可执行文件？

```
<html><head>
<script type='text/javascript' src='js/hello.js' />
<script>
console.log('Hello, world!');
phantom.exit();
</script>
</head>
<body>
</body>
</html> 
```

Hello.js，如网站上所示：

```
console.log('Hello, world!');
phantom.exit(); 
```

顺便说一句，我正在运行 CentOS，我得到了 PhantomJS 的压缩包并将其解压缩到我的主 www 文件夹中，我不知道该怎么办？我`phantomjs --version`在 linux 提示符下运行，但它无法识别它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:52:53.567

好的，我刚刚意识到 PhantomJS 不能在网页上引用的常规 javascript 文件中使用。此外，我只需要`./phantomjs`在`phantomjs`提示符下执行操作即可运行它。

# php - Zend getParam 多值

> ID：14811778
> 
> 赞同：2
> 
> 时间：2013-02-11T12:22:15.560
> 
> 标签：php, html, zend-framework

如何从多个复选框选项中获取多个值数据？以下是我可以选择多个值的复选框 html 代码

```
<li class='voteable-attribute off clearfix'>
            <label class='primary formField'>Parking:
            </label>
                    <div class='inputFields ieSucks'>
            <div class='thereisonlybool'>
                <label for='av_box:BusinessParking:valet'>
                    <input type='checkbox' id='av_box:BusinessParking:valet' name='BusinessParking_valet' value='1'>
                    Valet
                </label>
            </div>
            <div class='thereisonlybool'>
                <label for='av_box:BusinessParking:garage'>
                    <input type='checkbox' id='av_box:BusinessParking:garage' name='BusinessParking_garage' value='1'>
                    Garage
                </label>
            </div>
            <div class='thereisonlybool'>
                <label for='av_box:BusinessParking:street'>
                    <input type='checkbox' id='av_box:BusinessParking:street' name='BusinessParking_street' value='1'>
                    Street
                </label>
            </div>
            <div class='thereisonlybool'>
                <label for='av_box:BusinessParking:lot'>
                    <input type='checkbox' id='av_box:BusinessParking:lot' name='BusinessParking_lot' value='1'>
                    Private Lot
                </label>
            </div>
            <div class='thereisonlybool'>
                <label for='av_box:BusinessParking:validated'>
                    <input type='checkbox' id='av_box:BusinessParking:validated' name='BusinessParking_validated' value='1'>
                    Validated
                </label>
            </div>
    </div>

        </li> 
```

从 zend 控制器我可以访问单个值，如下所示：

```
$data1 = $this->_getParam('input_name') 
```

但是在这种情况下有多个值，我怎样才能在 zend 控制器中获取这个多个值并将其存储在数组中并保存在 db.Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:34:47.777

您必须创建一个名为**BusinessParking[]**的元素。

意思是像数组一样创建这个复选框。现在，当您获得价值控制器时，您就会得到想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T21:54:49.993

将html页面创建为：

```
<input type="hidden" name="id[]" value="<?php echo $value[i] ?>"/> 
```

注意`name="id[]"`，这就是诀窍。现在在 Zend 中，您可以获得如下值：

```
$array = $this->getRequest()->getParam("id"); 
```

# javascript - jQuery 剥离第一期

> ID：14811785
> 
> 赞同：2
> 
> 时间：2013-02-11T12:22:25.943
> 
> 标签：javascript, jquery, split

如果这是一个双重职位，请原谅我，但我找不到适合我的类似职位。

我有一个域名 ex。`google.co.uk`（但这也可以是 google.com）。我需要在第一阶段拆分它，所以我得到一个这样的数组对象：`["google", "co.uk"]`或`["google", "com"]`

在antoher post我发现了这个：`'google.co.uk'.split(/.(.+)?/)[1];`但这似乎不起作用......

谁能帮我？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T12:26:39.893

替换第一个 . 与永远不会出现在字符串中的其他内容（例如 |），然后拆分该字符。

由于 str.replace 仅替换默认情况下找到的字符的第一个实例，因此代码非常简单：

```
str = "google.co.uk";
str.replace(".", "|").split("|"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:27:36.273

**[jsFiddle](http://jsfiddle.net/bYyH6/)**

```
var text = 'google.co.uk';

//Returns the position of the first '.'
var index = text.indexOf('.');

//Grab the the start of the string up to the position of the '.'
var first = text.substring(0, index);

//Start from the '.' + 1(to exclude the '.') and go to the end of the string
var second = text.substring(index + 1);

alert(first); //google
alert(second); //co.uk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:34:36.967

你们都让这有点复杂。一条简单的线是可能的：

```
var domain = 'google.co.uk';
alert(domain.split(/^(.+?)\./ig).splice(1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:36:26.163

您可以使用一些本机 javascript 函数...

```
string='google.com';
dot=string.indexOf('.',0);

name=string.substring(0,dot);
domain=string.substring(dot+1,string.length);

arr= new Array(name, domain);
alert(arr); 
```

大声笑，已经看到更好的解决方案... :) 和类似的解决方案...

# security - 通过参数+安全的数据源

> ID：14811792
> 
> 赞同：3
> 
> 时间：2013-02-11T12:22:51.737
> 
> 标签：security, reporting-services, ssrs-2008, connection-string, database-security

我的问题更多地涉及其实施的安全性，而不仅仅是技术问题。

我已经开发了所有报告并在报告服务器上。它们由使用 ASP.NET 中的 ReportViewer 控件的应用程序使用。

鉴于这些报告可能有不同的数据源，我在报告中为数据源创建了一个参数，并将 connectionString 应用程序作为参数发送到报告。

到目前为止一切都很好，但是，这就是我的问题出现的地方。由于我使用了一个具有用户名和密码的 ConnectionString 作为参数，我不会在这里有安全漏洞吗？

我想听听你的意见，如果有人有更好的实施方法，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T12:39:40.460

也许[基于表达式的连接字符串](http://msdn.microsoft.com/en-us/library/ms156450.aspx#Expressions)在这里会有所帮助？

文档有一个非常清晰的示例，即类似于以下的连接字符串：

```
="data source=" & Parameters!ServerName.Value & ";initial catalog=AdventureWorks 
```

这些允许您仍然传递一个参数来定义数据源，但它还允许您单独存储凭据，这样您在调用报告时就不必传递任何安全细节。

**评论后补充：**

这是一个带有基于表达式的连接字符串的示例报告。

![在此处输入图像描述](../Images/f1f5d49607b2aa1e8877adf957c4acb0.png)

您可以看到连接字符串使用一个参数来确定它的确切连接位置；这可以根据您的需要进行更新。

凭据存储在数据源中；您可以存储凭据（参见上面的屏幕截图），或者您可以选择任何其他适合的选项，例如 Windows 集成安全性。

所以它可能不完全适合你，但这是这种可配置数据源要求的内置 SSRS 功能。

**第二次编辑：**

在上面的示例中，`Parameters!ServerName.Value`确实是一个报表参数，您只需像创建其他任何参数一样创建它。根据报告的启动方式，您可以将其设为隐藏参数并处理代码中发送的实际值；这只是一个实施问题，完全取决于您。

对于基于表达式的连接字符串，数据源必须存储在报表中，并且其连接字符串在运行时确定。

因此，您可以根据一个或多个参数构建所需的任何内容 - 它只是您正在构建的字符串值，因此您可以根据自己的目的制作任何内容；您可以将其指向所需的任何服务器/数据库组合。请澄清这是否不能回答您的问题。

# php - Cookie 不会删除

> ID：14811794
> 
> 赞同：2
> 
> 时间：2013-02-11T12:23:01.237
> 
> 标签：php, cookies

所以我的 index.php 上有这段代码：

```
<?php if(isset($_POST['cookie'])) { setcookie("RememberMe", "Yes", time()+1209600);  } ?> 
```

如果用户选中了记住我框，那么它将设置一个名为“记住我”的 cookie，为期 2 周。这部分工作正常。

现在我遇到的问题是当他们按下注销时删除这个cookie。

按注销时，它们会被重定向到 logout.php，其中包含以下代码：

```
<?php include_once('config.php');
include_once('functions.php');

unset($_COOKIE['RememberMe']);
setcookie("RememberMe", "", time()-3600);
$_SESSION = array(); session_destroy(); 

?> 

<meta http-equiv="refresh" content="0;../index.php"> 
```

但是由于某些奇怪的原因不会删除cookie？关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:33:46.747

您可能需要检查设置 cookie 的路径是否正确。默认情况下，PHP 将 cookie 路径设置为它所在的目录，并且从不同的位置将不可用（也不能删除）。

还有一些提示：

*   没有必要取消设置`$_COOKIE`和`$_SESSION`
*   而不是使用带有 HTTP 标头的元标记重定向：

    ```
    header('Location: /index.php'); // or whatever is the path you want to redirect to 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:41:26.207

Cookie 取消有时可能需要与设置相同的时间值。

```
setcookie("RememberMe", "", time()-1209600); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:31:37.330

不是最干净的，但检查时区是否正确 确保您正在核对正确的 cookie（区分大小写） 失败所有他们写的 cookie 无论如何都会核对它所以...

Setcookie('mycookie') // 用空白条目核对 cookie

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:55:29.523

删除此行

`unset($_COOKIE['RememberMe']);`

# r - 公式中不同阶数的lm的系数

> ID：14811795
> 
> 赞同：4
> 
> 时间：2013-02-11T12:23:02.560
> 
> 标签：r, regression

我正在尝试分析 R 中的一些线性模型结果，特别是我对 lm 对象摘要中为自变量报告的 p 值感兴趣（我知道有更复杂的方法来比较变量的相关性但过去的一些比较让我相信，对于初步分析，这个 p 值就可以了）。我确信这些 p 值不依赖于公式中指定变量的顺序（例如，在使用 anova 时这是不正确的）所以我对我得到的假数据的一些结果感到困惑：

```
> x<-rnorm(100)
> y <- 2*x
> xJ <- jitter(x)
> lm1 <- lm(y~x)
> lm2 <- lm(y~x+xJ)
> lm3 <- lm(y~xJ+x)
> summary(lm1)$coefficients
                 Estimate   Std. Error       t value  Pr(>|t|)
(Intercept) -2.220446e-17 4.064501e-17 -5.463023e-01 0.5860998
x            2.000000e+00 4.037817e-17  4.953172e+16 0.0000000
> summary(lm2)$coefficients
                Estimate   Std. Error      t value  Pr(>|t|)
(Intercept) 0.000000e+00 4.271540e-17 0.000000e+00 1.0000000
x           2.000000e+00 3.534137e-13 5.659091e+12 0.0000000
xJ          4.147502e-13 3.534140e-13 1.173553e+00 0.2434475
> summary(lm3)$coefficients
                 Estimate   Std. Error       t value      Pr(>|t|)
(Intercept) -1.594538e-18 5.512644e-21 -2.892511e+02 3.147977e-144
xJ          -3.531641e-16 4.560990e-17 -7.743146e+00  9.391428e-12
x            2.000000e+00 4.560986e-17  4.385017e+16  0.000000e+00 
```

我的错误在哪里？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:00:06.510

考虑到这一点，我认为除了任何奇怪的浮点问题外，系数不稳定的原因是[多重共线性](http://en.wikipedia.org/wiki/Multicollinearity)`x`，这是由于和`xJ`几乎完全相关的事实。快速测试方差膨胀因子：

```
library(car)
vif(lm2)
        x        xJ 
103233533 103233533 
```

VIF 大于 5 通常被认为是值得一看的东西，所以在这种情况下，系数稍微移动一点也就不足为奇了。

# html - 应用于儿童背景图像的 CSS 阴影

> ID：14811800
> 
> 赞同：1
> 
> 时间：2013-02-11T12:23:08.413
> 
> 标签：html, css

我为父标题元素使用了嵌入阴影

```
 -webkit-box-shadow:inset 0px 0px 50px 10px #e5e5e55; box-shadow:inset 0px 0px 50px 10px #e5e5e5; 
```

这对父元素很有效。但是我有一个子元素“徽标”，其中背景图像是 JPG。阴影应用于图像的顶部。它很奇怪，因为它不应该应用，但如果它应用了，我会怀疑它会完全应用，而不是看起来它已经*浸入阴影的一部分*！下图突出显示了正确的阴影（紫线）和错误的阴影（红线）。

*在此屏幕截图中，图像是透明的 PNG*

![在此处输入图像描述](../Images/3e829511576a8fda83bd761ab8c995bd.png)

我试过 Chrome、Firefox 和 IE，它们都有这个问题。我知道在那张照片中很难看到它，但它确实让它看起来不精致。我还尝试将图像放置在元素中而不是背景图像，以及尝试 JPG 和 PNG 文件，但都具有相同的结果。

**标题的完整 HTML 代码**

```
<div id="header">
  <div id="header-level-1">
    <div id="header-logo">
      <img src="images/logo.png">
    </div>
    <div id="header-contact">
      <p class="header-contact-title">For More Information Call</p>
      <p class="header-contact-phone"><a href="tel:xxx">xxx</a></p>
    </div>
  </div>

  <div id="header-level-2">
    <div id="header-nav">

    </div>
  </div>
</div> 
```

**完整的 CSS**

*请注意，图像当前位于元素中，而不是背景图像，但结果相同*

```
 #header {width:950px; height:220px; margin:0 auto; margin-top:30px; background-color:#fff; border-radius:15px; -webkit-box-shadow:inset 0px 0px 50px 10px #e5e5e55; box-shadow:inset 0px 0px 50px 10px #e5e5e5;}
#header-level-1 {width:950px;}
#header-level-2 {width:950px;}
#header-logo {width:700px; height:130px; display:inline-block; vertical-align:top;}
#header-contact {width:240px; height:100px; padding-top:30px; color:#76a410; font-size:1.3em; display:inline-block; vertical-align:top;}
#header-contact a:link {color:#00446e; text-decoration:none; font-weight:900; font-size:1.6em;}
#header-contact a:hover {text-decoration:underline; font-weight:800;}
.header-contact-title {display:block; padding:0px; margin:0px;}
.header-contact-phone {display:block; padding:0px; margin:0px; padding-top:5px;}

#header-nav {width:900px; margin-left:25px; height:66px; margin:0 auto; text-align:center; bottom:5px; position:relative; background:url('../images/nav-background.jpg'); border-radius:5px;}
#header-nav a:link, #header-nav a:visited, #header-nav a:active {color:#fff; text-decoration:none; padding-left:6px; padding-right:6px; padding-top:18px; display:inline-block;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:25:36.850

您可以在 HTML 元素上使用多个类。

为阴影创建一个新类，只在需要的地方添加它。

它也可以在其他元素上重复使用......（如果你需要相同的阴影）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:24:46.683

CSS 阴影不适用于儿童背景图像，它是由您用于徽标的**.JPG图像引起的。**您需要为徽标提供透明图像，使用透明的**.gif**或**.png**文件。我会推荐**.PNG**。

# java - 线程：等待（）和通知（）

> ID：14811803
> 
> 赞同：1
> 
> 时间：2013-02-11T12:23:15.563
> 
> 标签：java, multithreading

执行以下代码并抛出`IllegalMonitorStateException` 异常后。我收到错误消息：

```
java.lang.IllegalMonitorStateException
    at java.lang.Object.notify(Native Method)
    at com.blt.ThreadExample.main(ThreadExample.java:21) 
```

我是多线程的新手，我想在代码中使用`wait()`和`notify()`。

```
package com.blt;

public class ThreadExample implements Runnable {
    public static void main(String args[])
    {

        System.out.println("A");
        Thread T = new Thread(new ThreadExample());
        Thread T1 = new Thread(new ThreadExample());

        System.out.println("B");
        try
        {
        T.setName("thread 1");
        T.start();
        T1.setName("thread 2");
        System.out.println("C");
        T.notify();

        System.out.println("D");
        T1.start();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

        public  void run()
{

            synchronized(ThreadExample.class)
            {

        for(int i=0; i<5; i++)
    {

        try
        {
            Thread.currentThread().wait(400);
         System.out.println("Inside run=>"+Thread.currentThread().getName());
         Thread.currentThread().sleep(2000);

        }
         catch(Exception e)
        {
            e.printStackTrace();
        }
      }  
}
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:25:32.790

正如[javadoc 中所解释的](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#notify%28%29)，您需要在同步块中使用对象作为监视器才能调用`notify`或`wait`在该对象上。

`Thread.currentThread()`将很难跟踪，因此我建议您使用另一个对象。例如：

```
public class ThreadExample implements Runnable {

    private static final Object lock = new Object();

    public static void main(String args[]) {
        System.out.println("A");
        Thread T = new Thread(new ThreadExample());
        Thread T1 = new Thread(new ThreadExample());

        System.out.println("B");
        try {
            T.setName("thread 1");
            T.start();
            T1.setName("thread 2");
            System.out.println("C");
            synchronized(lock) {
                lock.notify();
            }
            System.out.println("D");
            T1.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void run() {
        synchronized (lock) {
            for (int i = 0; i < 5; i++) {
                try {
                    lock.wait(400);
                    System.out.println("Inside run=>" + Thread.currentThread().getName());
                    Thread.currentThread().sleep(2000);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

请注意，您的代码中还有其他几个问题，特别是：

*   您应该始终`wait`循环调用（阅读 javadoc 了解更多详细信息）
*   `sleep`是一个静态方法，不需要使用`Thread.currentThread().sleep(2000);`-`sleep(2000);`也会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:26:39.520

这些方法必须包含在同步块中。阅读[java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)中的对象锁。

换句话说：

```
//thread 1
synchronized (commonObj) {
  commonObj.wait();
}

//thread 2:
synchronized (commonObj) {
  commonObj.notify();
} 
```

同样的问题：[如何在 Java 中使用等待和通知？](https://stackoverflow.com/questions/886722/how-to-use-wait-and-notify-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:54:26.060

试试这个..如果你有任何疑问，请告诉我。

```
package com.blt;

public class ThreadExample implements Runnable {
    public static void main(String args[]) {
        Thread T1 = new Thread(new ThreadExample());
        Thread T2 = new Thread(new ThreadExample());
        try {
            T1.setName("thread 1");
            T1.start();
            T2.setName("thread 2");
            T2.start();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void run() {

        synchronized (ThreadExample.class) {
            for (int i = 0; i < 5; i++) {
                try {
                    ThreadExample.class.notify();
                    System.out.println("Thread going to wait state::"+ Thread.currentThread().getName());
                    ThreadExample.class.wait(400);
                    System.out.println("Thread notified is::"+ Thread.currentThread().getName());
                    System.out.println("Thread going to sleep state::"+ Thread.currentThread().getName());
                    Thread.sleep(2000);
                    System.out.println("==========");

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

# html - 通过 CSS 样式从左侧开始输出文本的边距偏移

> ID：14811809
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:23:35.607
> 
> 标签：html, css

我对 css 只有很少的概述，所以我问，我有这个表格

```
<h:form>
      <h:outputLabel1 value="some text1"/>
      <h:outputText1 value="someOutputtext1 />
       .
       .
      <h:outputLabelN value="some textN"/>
      <h:outputTextN value="someOutputtextN/>
 <h:form/> 
```

结果是这样的：

一些文本 1 一些输出文本 2 一些文本 N 一些输出文本 N

如何通过 style="" 属性设置偏移边距，从“some text1”的开头到“someOutputtext2”的开头，我希望达到每个输出文本将具有相同的起始位置，非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:03:44.173

使用 ah:panelGrid 创建表单。像这样：

```
 <h:form>
            <h:panelGrid id="panel" columns="2">
                    <h:outputLabel value="some text1"/>
                    <h:outputText value="someOutputtext1 />
                    <h:outputLabel value="some textN"/>
                    <h:outputText value="someOutputtextN/>
            </h:panelGrid>
    <h:form/> 
```

我建议您添加一个新的消息列来处理验证错误，标签

```
 <h:outputLabel1>
```

不存在，使用

```
    <h:输出标签>
```

并添加一个 id 属性来标记具有唯一名称的字段。

对不起，我的英语不好

# android - Android：AsyncTask，我的第一个任务在另一个启动时还没有完成

> ID：14811810
> 
> 赞同：1
> 
> 时间：2013-02-11T12:23:53.570
> 
> 标签：android, android-asynctask, handler, runnable

这是我的主线程中的代码

```
 myAsyncRunnable mar = new myAsyncRunnable(GameActivity.this);
            mar.execute("fire");
            PhotoTask photoTask = new PhotoTask(camera,surfaceCamera,isPreview,holder,GameActivity.this);
            photoTask.execute(null); 
```

在 myAsyncRunnable.fire() 中，我有一个循环将 gameActivity 中 ImageView 的图像更改 10 倍。我希望 photoTask 在最后一张图片更改后启动

```
@Override
protected Void doInBackground(String... params) {
fire();
return null;
}

public void fire() {
        final ImageView image3 = (ImageView) gameactivity.findViewById(R.id.imageView3);
        final int drawables[] = new int[] {R.drawable.fire1,R.drawable.fire2,R.drawable.fire3,R.drawable.fire4,R.drawable.fire5,R.drawable.fire6,R.drawable.fire7,R.drawable.fire8,R.drawable.fire9,R.drawable.fire10,R.drawable.fire11,R.drawable.fire12,R.drawable.fire13,R.drawable.fire14,R.drawable.fire15,R.drawable.fire16};
        for (int i=0;i<drawables.length;i++) {
            final int j=i;
            Runnable runnable = new Runnable() {
                @Override
                public void run() {
                    image3.setImageResource(drawables[j]);
                }
            };
            gameactivity.handler.postDelayed(runnable, 200*j);
        }
    } 
```

但是 photoTask 在最后一张图像出现之前执行。这可能是由于 postDelayed 方法，我试图在 onPostExecute() 方法中执行 photoTask 但它也没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:31:02.087

放入`photoTask.execute(null);`第`onPostExecute()`一个`AsyncTask`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:41:32.260

正如 pvn 所说，您也需要重写 onPostExecute 方法并在那里执行您的照片异步类。把它放在 doInBackground 方法之后。

```
@Override
protected void onPostExecute(YourParam param)
{
     PhotoTask photoTask = new PhotoTask(camera,surfaceCamera,isPreview,holder,GameActivity.this);
        photoTask.execute(null);
} 
```

# matlab - bsxfun 循环中的行减法

> ID：14811815
> 
> 赞同：0
> 
> 时间：2013-02-11T12:24:05.323
> 
> 标签：matlab, row, subtraction, bsxfun

我有一个`D`包含 98 行和 2 列的文本文件。看起来像这样：

> 10 0.261344
> 11 0.456167
> 12 0.668595
> 2 0.481754
> ...等

我有另一个`M`17 行和 2 列的 excel 文件。
我想从第一行中减去所有行的值，然后从 2 中减去，等等。所以我得到这样的结果：

> 10-11 -0.194823
> 10-12 -0.407251
> ...等

换句话说，第一行和所有其余部分之间的区别，第二行和所有其余部分之间的区别..不包括那些第一列与第二个 M excel 文件第一列具有相同值的行。与 81 行相比，这完全不同。

我一直在尝试使用这个：

```
M = xlsread('...');    

FSumID=fopen(D);
 MatrixSub = loadD);
 m = textscan(FSumID,'%d %f');
horzcat(m{:}) 

NewData = M(:,1)
D_size=size(D);

for i=1:D_size

 if (ptvBodyDist(:,1)~=NewData(i))
%for calculating 
 DVec = bsxfun(@minus, ((m{i,2})), (m{i,2})); 
```

%当我检查这个时它只给出一个循环全零（98,1）而我需要（（（98-17）^2,1）。我需要改变，表达式的最后一部分得到我想要的，但我'我坚持使用 bsxfun。我不知道如何做出正确的表达式来减去所有行。

我是 Matlab 的新手，任何帮助将不胜感激。另外，如果您可以建议一些手册或教程，除了 mathworks 帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:14:16.810

让我们`D`通过矩阵（来自文本文件的数据）`n`。通过矩阵（来自excel文件的数据 ）。`2`
`M``m``2`

第一阶段是使用 : 查找其第一个值未出现在其中的相关`n-m`行。`D``M`[`setdiff`](http://www.mathworks.com/help/matlab/ref/setdiff.html)

```
[~, idx] = setdiff( D( :, 1 ), M( :, 1 ), 'stable' ); 
```

现在我们可以使用计算 all-vs-all diff`bsxfun`

```
d = bsxfun( @minus, permute( D( idx, : ), [1 3 2] ), ...
                    permute( D( idx, : ), [3 1 2] ) ); 
```

现在`d`是| `idx`|x| `idx`|x`2`数组

```
d( ii, jj, : ) = D( idx(ii), :) - D( idx(jj), : ) 
```

# asp.net - ASP.NET - 捕获 sql 重复异常

> ID：14811818
> 
> 赞同：1
> 
> 时间：2013-02-11T12:24:14.380
> 
> 标签：asp.net, sql, vb.net, key

我需要一个关于将重复键插入数据库的 sql 帮助。我故意导致异常不将重复记录插入数据库。

在后面的代码中，我有以下代码：

```
Protected Sub SqlDataSource3_Inserting(sender As Object, e As SqlDataSourceCommandEventArgs)
    Try

    Catch ex As SqlException

    End Try
End Sub 
```

`Try...Catch`但我不知道该在块中写入什么。我只想显示一个带有文本的 MessageBox*你已经是这个组的成员。*插入错误页面。

这是我的服务器代码：

```
<asp:SqlDataSource ID="SqlDataSource3" OnInserted="SqlDataSource3_Inserted" OnInserting="SqlDataSource3_Inserting" runat="server" ConnectionString="<%$ ConnectionStrings:MotWebConnectionString %>" 
    InsertCommand="INSERT INTO [GroupMembers] ([UserName], [GroupId]) VALUES (@UserName, @GroupId)" >

<asp:SqlDataSource ID="SqlDataSource3" OnInserted="SqlDataSource3_Inserted" OnInserting="SqlDataSource3_Inserting" runat="server" ConnectionString="<%$ ConnectionStrings:MotWebConnectionString %>" 
    InsertCommand="INSERT INTO [GroupMembers] ([UserName], [GroupId]) VALUES (@UserName, @GroupId)" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:28:48.163

事件处理程序中不会引发异常；相反，您应该执行以下操作：

```
Protected Sub SqlDataSource3_Inserted(sender As Object, e As SqlDataSourceStatusEventArgs)
   If e.Exception IsNot Nothing Then
      ' Handle exception here
      ' Prevent exception from being re-thrown
      e.ExceptionHandled = True
   End If
End Sub 
```

# ios - 如何在ios的表格视图的标题视图中添加一个按钮？

> ID：14811819
> 
> 赞同：-1
> 
> 时间：2013-02-11T12:24:15.327
> 
> 标签：ios, objective-c

我只想在 headerview 的右侧添加一个按钮。我不想创建一个新的标题视图。我们如何在现有的标题视图中添加按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:29:03.743

您可以通过以下代码访问表格的标题视图。

```
UIView *headerView = self.tableView.tableHeaderView; 
```

您可以在此视图中添加一个按钮。

# c# - 如何在 MVVM 中实现对话架构

> ID：14811820
> 
> 赞同：7
> 
> 时间：2013-02-11T12:24:24.483
> 
> 标签：c#, wpf, mvvm

我正在开发一个基于 PRISM 框架（Unity Container）的 WPF 4.0 - MVVM 应用程序。

我想知道在 mvvm 模式中实现对话框的最佳方法是什么。我打算在我的应用程序中使用很多，所以我想要一些可重用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:35:20.133

由于您使用的是 Prism/Unity，因此为您的视图模型实现了中介者模式。

1.  将 DialogService (IDialogService) 模块添加到您的项目中。
2.  包含对话框的模块向 IDialogService 注册它们。不要忘记将 DialogServiceModule 声明为 ModuleDependency。
3.  ViewModel 现在使用 IDialogService 来显示所需的对话框。

    ```
    public interface IDialogService
    {
        void    RegisterDialog  (string dialogID, Type type);
        bool?   ShowDialog      (string dialogID);
    }

    public class DialogService : IDialogService
    {
        private IUnityContainer       m_unityContainer;
        private DialogServiceRegistry m_dialogServiceRegistry;

        public DialogService(IUnityContainer unityContainer)
        {
            m_unityContainer = unityContainer;
            m_dialogServiceRegistry = new DialogServiceRegistry();
        }

        public void RegisterDialog(string dialogID, Type type)
        {
            m_dialogServiceRegistry.RegisterDialog(dialogID, type);
        }

        public bool? ShowDialog(string dialogID)
        {
            Type type = m_dialogServiceRegistry[dialogID];
            Window window  = m_unityContainer.Resolve(type) as Window;
            bool? dialogResult = window.ShowDialog();

            return dialogResult;
        }
    } 
    ```

如果您在视图中使用 ViewModel 事件和处理程序，请使用 Wea​​kEventHandler 模式来消除潜在的资源泄漏。此外，可以将多个 View 附加到同一个 ViewModel。我用一个 ViewModel -> 一个 View 处理过项目。但也有一个 ViewModel -> 多个 Views。只是在做出设计决策时需要考虑的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T12:42:19.140

这篇关于 MVVM 对话框的文章可能对您有用： http: [//www.codeproject.com/Articles/36745/Showing-Dialogs-When-Using-the-MVVM-Pattern](http://www.codeproject.com/Articles/36745/Showing-Dialogs-When-Using-the-MVVM-Pattern)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:31:19.190

我让 ViewModel 在需要获取用户信息时引发事件。然后由 View 如何提供它。这*确实*意味着文件背后的代码将获得事件处理程序，但真正的 MVVM 专家会在......

# javascript - ASP.NET：如何从弹出窗口中获取 JavaScript 变量？

> ID：14811826
> 
> 赞同：1
> 
> 时间：2013-02-11T12:24:40.663
> 
> 标签：javascript, asp.net, return-value

这是火狐的代码。

默认.aspx：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
    <script type="text/javascript" src="pop.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input id="Hidden1" type="hidden" runat="server" />
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" Text="Popup" />
    </div>
    </form>
</body>
</html> 
```

默认.aspx.cs：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        TextBox1.Text = "Hello";
        Button1.Attributes.Add("onClick", "javascript:InvokePop('" + TextBox1.ClientID + "');");
    } 
```

弹出窗口.aspx：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
    <script type="text/javascript" src="pop.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtValue" runat="server"></asp:TextBox><br />
        <br />
        <input type="button" id="btnReturnValue" value="Return value back" onclick="ReturnValue();" />
    </div>
    </form>
</body>
</html> 
```

pop.js：

```
function InvokePop(fname)
{
    val = document.getElementById(fname).value;
    retVal = window.open("PopupWin.aspx?Control1=" + fname, 'Show Popup Window', 'height=90,width=250,resizable=yes,modal=yes');
    retVal.focus();
}

function ReturnValue()
{
    var newValue = document.getElementById("txtValue").value;
    if ((window.opener != null) && (!window.opener.closed))
    {
        window.opener.document.getElementById("TextBox2").value = newValue;
    }
    window.close();
} 
```

在这种情况下，我单击 Default.aspx 页面上的按钮并打开 Popup.aspx 作为弹出窗口。我在 Popup.aspx 的文本框中输入一些值并按下按钮。新值出现在 Default.aspx 页面上的第二个文本框中。

这行得通，但是如何将在 Popup.aspx 页面中输入的新值传递给 Default.aspx 页面中的某个处理程序并进一步使用它？例如，我可以在 Default.aspx 页面上有另一个 ASPX 按钮，当我单击它时，我可以使用在 Popup.aspx 页面中输入的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:48:53.370

那么你可以做的是以下几点：

在第一页添加一个 hiddenField。我称之为“hfPopupValue”。

在 pop.js 中，你目前正在这样做：

```
window.opener.document.getElementById("TextBox2").value = newValue; 
```

您可以将其更改为：

```
window.opener.document.getElementById("hfPopupValue").value = newValue; 
```

之后，您可以从 hiddenField 中读取值。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:44:46.530

您是否想过使用[jQueryUI 的 Dialog](http://jqueryui.com/dialog/)，它可以让您将所有控件保持在同一页面上，这意味着代码更简洁。

它看起来也不像 JavaScript 弹出窗口那么讨厌。

# c# - 在 SendKeys.Send 方法中睡觉

> ID：14811827
> 
> 赞同：1
> 
> 时间：2013-02-11T12:24:46.653
> 
> 标签：c#, .net

我想知道`SendKeys.Send("test text {sleep 250} another test text");`C#中是否有类似的东西。

我知道我可以使用`Thread.Sleep`，但我从用户输入中获取了字符串，我无法知道我必须睡多少次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:12:07.857

我不相信有一种方法可以`SendKeys.Send()`暂停中弦。

如果您从用户输入读取要发送的字符串，最好将此字符串解析为要发送和暂停的部分字符串列表。

即使用您的示例，您将有一个字符串列表：`"text text "`和`" another test test"`
一个睡眠间隔列表：`250`

睡眠间隔列表自然总是比要发送的字符串列表短 1 项。

# mysql - 从不存在的地方选择查询

> ID：14811830
> 
> 赞同：1
> 
> 时间：2013-02-11T12:25:00.570
> 
> 标签：mysql, sql

会员表：

```
CREATE TABLE `Consultant_Memberships` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) DEFAULT NULL,
  `membership_url` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ; 
```

Memberships_List 表：

```
CREATE TABLE `Consultant_Memberships_List` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `consultant_id` int(11) DEFAULT NULL,
  `membership_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

在成员资格表中，有一个成员可以成为其中一部分的“社团”列表。选择后，它会以以下形式添加到“Memberships_List”中：

1.  id - 自动递增
2.  advisor_id - 添加社团的用户的唯一 ID
3.  member_id - 指会员表中的“id”。

我希望能够在下拉列表中**仅**显示用户尚未选择的成员资格。到目前为止，我有：

```
$query = $db->query("SELECT `Consultant_Memberships.`id`, `Consultant_Memberships`.`title` `FROM `Consultant_Memberships 
WHERE NOT EXISTS (SELECT `Consultant_Memberships`.`id`, `Consultant_Memberships`.`title` 
WHERE `Consultant_Memberships`.`id` = $user_id)"); 
```

我目前收到此错误，也不确定这是否是正确的查询：

```
PHP Fatal error:  Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `Consultant_Memberships_List`.`id` = )' at line 1' in /Users/Sites/pages/medical.php:72
Stack trace:
#0 /Users/Sites/pages/medical.php(72): PDO->query('SELECT `Consult...')
#1 /Users/Sites/index.php(18): include('/Users/Site...')
#2 {main}
  thrown in /Users/Sites/pages/medical.php on line 72 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:16:11.307

`FROM``NOT EXISTS`子查询中缺少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:30:31.003

```
SELECT `Consultant_Memberships.`id`, `Consultant_Memberships`.`title` `FROM `Consultant_Memberships 
WHERE NOT EXISTS (SELECT `Consultant_Memberships`.`id`, `Consultant_Memberships`.`title` 
WHERE `Consultant_Memberships`.`id` = $user_id) 
```

你有一个错误的语法试试这样

```
SELECT Consultant_Memberships.id, Consultant_Memberships.title FROM Consultant_Memberships 
WHERE NOT EXISTS (SELECT Consultant_Memberships.id, Consultant_Memberships.title from Consultant_Memberships
WHERE Consultant_Memberships.id = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:31:23.597

始终从突出显示的查询部分向左看。在你的情况下在哪里

```
SELECT `Consultant_Memberships.`id`, `Consultant_Memberships`.`title`
`FROM <--- extra backtick
`Consultant_Memberships <--- unclosed backtick 
```

顺便说一句，不要过度使用反引号。您的大多数领域都不需要它们

...而且您的查询似乎完全搞砸了
据我了解您的问题，它必须是

```
SELECT cm.id, title 
FROM Consultant_Memberships cm LEFT JOIN Consultant_Memberships_List
ON cm.id=membership_id WHERE membership_id IS NULL 
```

请注意，您的问题与 PDO 无关。
这是明确的 SQL 查询问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:54:58.000

请试试这个：

```
SELECT a.id, a.title 
FROM Consultant_Memberships a, Consultant_Memberships_List b
WHERE a.id <> b.consultant_id 
```

您收到语法错误的原因是如果您看到您的子查询，您会发现您没有在其中指定任何表。

```
WHERE NOT EXISTS (SELECT `Consultant_Memberships`.`id`, `Consultant_Memberships`.`title` 
WHERE `Consultant_Memberships`.`id` = $user_id) 
```

如果您需要更多帮助，请告诉我们...

问候... 777 先生

# java - 使用选项卡主机解析片段时出错

> ID：14811833
> 
> 赞同：2
> 
> 时间：2013-02-11T12:25:19.450
> 
> 标签：java, android, eclipse

我正在使用以下代码从互联网获取数据并打开它。它工作得很好，但如果我更改选项卡并返回旧选项卡会出错。例如，如果在开始时我是选项卡 1，然后转到选项卡 2 效果很好，但如果我返回选项卡 1，则会出现错误

```
public class MainMenu extends FragmentActivity 
{
    private TabHost tHost;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
         this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,  
                     WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main_menu);

        tHost = (TabHost) findViewById(android.R.id.tabhost);
        tHost.setup();

        /** Defining Tab Change Listener event. This is invoked when tab is changed */
        TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener() 
        {
            @Override
            public void onTabChanged(String tabId) 
            {
                FragmentManager fm =   getSupportFragmentManager();
                PrayerTimes prayerFragment = (PrayerTimes) fm.findFragmentByTag("prayerTimes");
                CompassActivity qiblaFragment = (CompassActivity) fm.findFragmentByTag("qibla");
                Settings settingFragment = (Settings) fm.findFragmentByTag("settings");

                FragmentTransaction ft = fm.beginTransaction();

                /** Detaches the androidfragment if exists */
                if(prayerFragment!=null)
                    ft.detach(prayerFragment);
                if(qiblaFragment!=null)
                    ft.detach(qiblaFragment);
                if(settingFragment!=null)
                    ft.detach(qiblaFragment);

                /** If current tab is android */
                if(tabId.equals("prayerTimes"))
                { 
                    if(prayerFragment == null)
                    {
                        /** Create AndroidFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new PrayerTimes(), "prayerTimes");
                    }
                    else
                    {
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(prayerFragment);
                    }

                }
                else if (tabId.equals("qibla"))
                {
                    if( qiblaFragment == null)
                    {
                        /** Create AppleFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new CompassActivity(), "qibla");
                     }
                    else
                    {
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(qiblaFragment);
                    }
                }
                else if(tabId.equals("settings"))
                {
                    if( settingFragment == null)
                    {
                        /** Create AppleFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new Settings(), "settings");
                     }
                    else
                    {
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(settingFragment);
                    }                   
                }
                ft.commit();
            }
        };

        /** Setting tabchangelistener for the tab */
        tHost.setOnTabChangedListener(tabChangeListener);

        /** Defining tab builder for Andriod tab */
        TabHost.TabSpec tSpecPrayer = tHost.newTabSpec("prayerTimes");
        tSpecPrayer.setIndicator("Prayer Times");
        tSpecPrayer.setContent(new MyTabContent(getBaseContext()));
        tHost.addTab(tSpecPrayer);

        /** Defining tab builder for Apple tab */
        TabHost.TabSpec tSpecQibla = tHost.newTabSpec("qibla");
        tSpecQibla.setIndicator("Qibla");
        tSpecQibla.setContent(new MyTabContent(getBaseContext()));
        tHost.addTab(tSpecQibla);

        TabHost.TabSpec tSpecSettings = tHost.newTabSpec("settings");
        tSpecSettings.setIndicator("Settings");
        tSpecSettings.setContent(new MyTabContent(getBaseContext()));
        tHost.addTab(tSpecSettings); 
    }
} 
```

错误是

```
2-11 12:21:28.245: E/AndroidRuntime(992): FATAL EXCEPTION: main
02-11 12:21:28.245: E/AndroidRuntime(992): java.lang.IllegalStateException: Recursive entry to executePendingTransactions
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.view.ViewPager.onRestoreInstanceState(ViewPager.java:1221)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.view.View.dispatchRestoreInstanceState(View.java:12088)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2582)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2588)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.view.View.restoreHierarchyState(View.java:12066)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.Fragment.restoreViewState(Fragment.java:417)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:933)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.os.Handler.handleCallback(Handler.java:725)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.os.Looper.loop(Looper.java:137)
02-11 12:21:28.245: E/AndroidRuntime(992):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-11 12:21:28.245: E/AndroidRuntime(992):  at java.lang.reflect.Method.invokeNative(Native Method)
02-11 12:21:28.245: E/AndroidRuntime(992):  at java.lang.reflect.Method.invoke(Method.java:511)
02-11 12:21:28.245: E/AndroidRuntime(992):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-11 12:21:28.245: E/AndroidRuntime(992):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-11 12:21:28.245: E/AndroidRuntime(992):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:40:38.897

问题是您不能在另一个片段中创建一个片段。这会导致错误。幸运的是，有了最新的更新，这现在*是*可能的并且是允许的。您可以在 Android 文档中找到有关如何执行此操作的更多信息。考虑使用 Android-Support 库。

[http://developer.android.com/about/versions/jelly-bean.html#42-ui-tools](http://developer.android.com/about/versions/jelly-bean.html#42-ui-tools)

# ember.js - Ember.JS 中的动态计算属性已弃用？

> ID：14811838
> 
> 赞同：9
> 
> 时间：2013-02-11T12:25:35.967
> 
> 标签：ember.js

我正在尝试制作 ember 应用程序。我有一个计算属性，控制器如下所示：

```
// The Controller

Todos.Controller = Ember.Controller.create({

    // ** SNIP ** //

    countCompleted: function()
    {
        return this.get('todos').filterProperty('completed', true).length
    }.property(),
});

// The View

{{Todos.Controller.countCompleted.property}} Items Left 
```

现在我正在学习的教程使用的是旧版本的 Ember.JS。我已经修复了所有错误，但是这个：

`Uncaught Error: assertion failed: Ember.Object.create no longer supports defining computed properties.`

有什么替代方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T12:29:15.400

计算属性仅在`create()`对象的功能上被弃用。如果你想创建一个计算属性，那么你必须首先创建`extend()`对象，然后`create()`是它。

例如：

```
// The Controller

Todos.TodosController = Ember.Controller.extend({

    // ** SNIP ** //

    countCompleted: function()
    {
        return this.get('todos').filterProperty('completed', true).length
    }.property(),
});

// Note the lower case 't' here. We've made a new object
Todos.todosController = Todos.TodosController.create();

// The View

// We reference the created object here (note the lower case 't' in 'todosController')
{{Todos.todosController .countCompleted.property}} Items Left 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:52:06.927

如果您重新打开，它似乎也可以正常工作：

```
Todos.todosController = Ember.Controller.create({
    // ** SNIP ** //
});

Todos.todosController.reopen({
    countCompleted: function() {
        return this.get('todos').filterProperty('completed', true).length
    }.property(),
}); 
```

# java - 从 Google Java API 数据存储迁移到 Mysql

> ID：14811839
> 
> 赞同：1
> 
> 时间：2013-02-11T12:25:36.450
> 
> 标签：java, mysql, google-app-engine, migration, datastore

我有一个在 GAE 及其数据存储上运行的整个应用程序......现在我需要将应用程序及其数据存储迁移到 mysql db。

实现这一目标的最佳方法是什么，如果我使用 Java API，是否有批量下载器。

寻找这个答案已经4天了，非常感谢您的建议。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:34:19.927

我会为此使用[approcket](https://github.com/k7d/approcket/)。它是一个可用于将 GAE 数据存储与 MySQL 数据库同步的工具。

它[有据可查](https://github.com/k7d/approcket/wiki)，但没有大规模活跃。我以前用过它，它做得很好。

干杯

# php - 如何在访问者登陆的第一页上禁用 cookie 触发的弹出窗口？

> ID：14811842
> 
> 赞同：0
> 
> 时间：2013-02-11T12:25:51.110
> 
> 标签：php, javascript, jquery

我设置了一个 3 分钟到期的 cookie，这将允许用户在看到广告之前浏览该网站 3 分钟。如果他们访问的下一页上没有 cookie，他们将看到广告，并且一旦广告关闭，cookie 将被重置。

然而，这样做的结果是，一旦访问该网站，广告就会显示，我怎样才能停止在访问者登陆的第一页上显示广告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:27:38.167

如果您只想使用 cookie：您可以向网站添加另一个 cookie，将其设置为在浏览器关闭后过期，并且仅在设置了此 cookie 而另一个未设置时才显示广告。

或者使用类似会话的方法，例如在会话中存储用户进入页面的时间，并计算从该时间开始显示广告的时间。这也意味着您必须检查广告是否以其他方式显示（检查会话变量的值），而不是通过 cookie。

# azure - Azure 中的客户端证书身份验证和 CA 证书

> ID：14811843
> 
> 赞同：6
> 
> 时间：2013-02-11T12:25:55.423
> 
> 标签：azure, certificate, azure-web-roles, client-certificates

我需要使用客户端证书对 Azure 云服务**Web 角色**的请求进行身份验证。如何将**证书颁发机构 (CA) 根证书**放入正确的受信任存储区？

我尝试将其上传到管理门户中，然后使用**AuthRoot**存储名称在服务定义文件中定义它：

```
<Certificate name="RootCA" storeLocation="LocalMachine" storeName="AuthRoot" /> 
```

真正奇怪的是它可以工作......但只是有时。它可能在实例重启后工作，但在服务更新或另一个实例重启后可能无法工作。这似乎是 Azure 中的一个错误。

当我说“有效”时，我的意思是服务器成功接受了客户端证书并处理了请求。当我说“不起作用”时，我的意思是服务器在证书检查和“请求被中止：无法创建 SSL/TLS 安全通道”之后没有协商连接。在客户端抛出异常。

**如何让它工作稳定？**

**升级版：**

在系统 Windows 事件日志中找到这条记录（来源是 Schannel）：

> 当请求客户端身份验证时，此服务器会向客户端发送受信任的证书颁发机构列表。客户端使用此列表来选择服务器信任的客户端证书。目前，该服务器信任的证书颁发机构太多，以至于列表变得太长。因此，此列表已被截断。这台机器的管理员应该审查信任的证书颁发机构进行客户端身份验证，并删除那些实际上不需要信任的证书颁发机构。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T08:45:18.500

此处描述了确切的问题：http: [//support.microsoft.com/kb/2801679](http://support.microsoft.com/kb/2801679)。

2012 年 12 月 Windows 更新后，许多证书被添加到 AuthRoot 存储。所以我们必须删除它们来解决问题。

为此，我使用 PowerShell 启动任务：

```
Get-ChildItem -Path Registry::HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\SystemCertificates\AuthRoot\Certificates | Where-Object {$_.Name -notlike "*\<YOUR_CERTIFICATE_THUMBPRINT>"} | Remove-Item 
```

要从 CMD 启动任务运行它：

```
PowerShell -ExecutionPolicy Unrestricted .\Startup.ps1
exit /b %errorlevel% 
```

在 ServiceDefinition.csdef 中：

```
<WebRole name="Web">
  <Startup>
    <Task commandLine="Startup.cmd" executionContext="elevated" taskType="simple" />
  </Startup>
  <!-- ... ->
</WebRole> 
```

# java - 如何使用 java (Sockets) 连接/telnet 到 SPOP3 服务器？

> ID：14811844
> 
> 赞同：1
> 
> 时间：2013-02-11T12:25:59.573
> 
> 标签：java, sockets, openssl, telnet, pop3

在 POP3 的情况下，可以使用端口 110 上的套接字通过 telnet 进行连接，但是如果实现了 SPOP3，该怎么做。使用普通的 telnet 可以很容易地完成

```
Socket pop3Socket = new Socket(host.com, 110); 
```

仅供参考：为了连接到 SPOP3，我们在 linux/unix 中使用

```
 openssl s_client -connect servername.com:995 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:06:02.497

您需要使用 SSLSocket 类。可以在以下位置找到一个示例： [http](http://www.herongyang.com/JDK/SSL-Socket-Client-Example-SslSocketClient.html) ://www.herongyang.com/JDK/SSL-Socket-Client-Example-SslSocketClient.html 。

基本上，您将执行以下操作：

```
SSLSocketFactory f = (SSLSocketFactory) SSLSocketFactory.getDefault();
SSLSocket c =        (SSLSocket) f.createSocket("localhost", 8888); 
```

如果端点有自签名证书，那么您有两个选择：

1.  将此自签名证书添加到您的本地密钥库。此 URL 提供了一个很好的概述： http: [//www.chrissearle.org/blog/technical/adding_self_signed_https_certificates_java_keystore](http://www.chrissearle.org/blog/technical/adding_self_signed_https_certificates_java_keystore)
2.  创建一个不验证服务器证书的 TrustManager：http: [//www.howardism.org/Technical/Java/SelfSignedCerts.html](http://www.howardism.org/Technical/Java/SelfSignedCerts.html)

选项 1 更安全。

# jquery - jQuery validate 插件允许在验证失败时提交。表单正在使用 .load

> ID：14811847
> 
> 赞同：0
> 
> 时间：2013-02-11T12:26:04.990
> 
> 标签：jquery, forms, jquery-validate

我已经建立了一个分页（jQuery ajax 样式）超过 6 页的表单。我正在尝试让 jQuery 验证插件使用它。

表单底部是一个“下一步”按钮，该按钮将该页面的值提交到数据库，并使用 jQuery .load() 将下一个“页面”加载到#pagination div 中。

我刚刚使用[jQuery validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)向表单添加了 jQuery 验证，但是验证在屏幕上闪烁了一秒钟，并且页面无论如何都会移动到下一页。我将不胜感激任何帮助！如果验证成功，我想允许表单移动到下一页，但如果验证不成功，则不允许。这是我的代码（我已将其归结为尽可能简单）：

### jQuery

```
jQuery(document).ready(function(){
    jQuery("#survey").validate();   
    var page=1; //Set first page on load
    jQuery("#pagination").load("survey_"+page+".htm");

    jQuery("#next").click(function(){

        if(page !== 6){
            page=page+1;}
        if(page == 6){
            jQuery('#next').replaceWith('<button id="submit" type="button">Submit</button>');
        }
        else
        {page == 6;}

    jQuery("#pagination").load("survey_"+page+".htm");
 }); 
```

### HTML

```
<form class="survey" id="survey" method="post" action="">
    <div id="pagination">
</div>
<div class="nav"><input id="prev" type="submit" value="Previous" ><input class="submit" id="next" value="Next" name="submit" type="submit" /></div>
</form> 
```

表单页面位于 6 个单独的文件中，分别称为survey_1.htm、survey_2.html....survey_6.htm，正如您在上面看到的，它们是使用 .load() 加载的。

如前所述，如果验证成功，我希望允许表单移动到下一页，但如果验证不成功，则不允许。目前，在加载下一页之前，验证会在屏幕上闪烁。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:23:32.227

> **引用 OP：** “如前所述，如果验证成功，我希望允许表单移动到下一页，但如果不成功则不允许。目前，在加载下一页之前，验证会在屏幕上闪烁。 "

它正在移动到下一页，因为您的页面加载逻辑正在绕过验证插件的内置点击处理程序。

我不太清楚您的页面加载方案最终将如何工作。但是，为了`ajax`与 jQuery Validate 插件一起使用，您将利用其[内置的`submitHandler`回调函数](http://docs.jquery.com/Plugins/Validation/validate#toptions)。换句话说，该`submitHandler`函数仅在表单通过验证测试时才被触发。

像这样的东西...

```
jQuery(document).ready(function(){

    jQuery("#survey").validate({
        submitHandler: function(form) {
            // your ajax loading logic
            // form.submit(); // use this to finally submit form data at the last step
            return false;  // prevent form submit because you are doing the ajax
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/zpkm2/](http://jsfiddle.net/zpkm2/)**

* * *

另请注意您的代码：

```
else
    {page == 6;} 
```

应该是：

```
else
    {page = 6;} 
```

[`==`用于*比较*value](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)，`=`用于*设置*value。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T13:17:52.613

无论您是否要验证来自方法 .load() 的表单，请在此处尝试：

**HTML**

```
<div class="continent-type">
     <label for="people">What is your continent?</label>
     <input type="radio" name="continent" value="A">The Americas
     <input type="radio" name="continent" value="E">European
</div>
<div id="form-load"></div> 
```

**jQuery**

```
function validateForm(form){
     form.validate({
          rules:{
               // rules...
          },
          messages:{
               // messages...
     });
};
jQuery('input[name=continent]').on('click', function(){

     var continent= jQuery(this).val();

     jQuery("#form-load").load('/get-form.html', {continent:continent}, function(){
          validateForm($(this).find('form'));
     });
}); 
```

# ios - 使用块 ARC 泄漏 sendSynchronousRequest

> ID：14811852
> 
> 赞同：1
> 
> 时间：2013-02-11T12:26:21.493
> 
> 标签：ios, memory-management, automatic-ref-counting, memory-leaks, block

仪器在我的代码中显示泄漏：泄漏：CFHTTPCookieStorage ->`NSData *resultData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; //100.0%`

我使用块执行异步下载：

```
 NSURL *url = [NSURL URLWithString:user.user_photo];
   NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url];
   [NSURLConnection asyncRequestSimple:request success:^(NSData *data) {
        user.user_photo_data=data;
        NSLog(@"Image Downloaded");
        dispatch_async(dispatch_get_main_queue(), ^{
           [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
        });     

    } failure:^(NSError *error) {
        NSLog(@"Failed downloading");
    }]; 
```

我使用类别的异步实现：

**NSURLConnection+MyExtensions.h**

```
+ (void)asyncRequestSimple:(NSURLRequest *)request success:(void(^)(NSData* data))successBlock_ failure:(void(^)(NSError *error))failureBlock_; 
```

**NSURLConnection+MyExtensions.m**

```
+ (void)asyncRequestSimple:(NSURLRequest *)request success:(void(^)(NSData* data))successBlock_ failure:(void(^)(NSError *error))failureBlock_
{

     [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSURLResponse *response = nil;
        NSError *error = nil;
        NSData *resultData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];//100% leak

        dispatch_sync(dispatch_get_main_queue(), ^{
            [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
        });

        if (error) {
            failureBlock_(error);
        } else {
            successBlock_(resultData);
        }
    });
} 
```

为什么会泄漏？

![在此处输入图像描述](../Images/d0997c69506ffda53040574e10b28725.png)

![在此处输入图像描述](../Images/48bfdf54dfb62df998a4f7b45a88c142.png)

# java - Log4j - STMPAppender NoSuchProviderException stmp

> ID：14811853
> 
> 赞同：0
> 
> 时间：2013-02-11T12:26:21.850
> 
> 标签：java, error-handling, log4j, smtpappender

我正在尝试使用 log4j 发送我的 GWT 项目的错误，但我遇到了问题。这是我添加到 log4j.xml 文件中的内容：

```
<appender name="EMAIL" class="org.apache.log4j.net.SMTPAppender">
<param name="BufferSize" value="512" />
<param name="SMTPHost" value="localhost" />
<param name="From" value="myemail@teste.com" />
<param name="To" value="myemail@teste.com" />
<param name="Subject" value="[SMTPAppender] Application message" />
<layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="%p %d (%c{1}) %m%n" />
</layout>
<filter class="org.apache.log4j.varia.LevelRangeFilter">
    <param name="LevelMin" value="ERROR" />
    <param name="LevelMax" value="FATAL" />
</filter>
</appender>

<root>
<level value="WARN" />
<appender-ref ref="EMAIL" />
</root> 
```

很简单，但是在尝试发送电子邮件时它给了我以下错误？

```
log4j:ERROR Error occured while sending e-mail notification.
javax.mail.NoSuchProviderException: smtp
at javax.mail.Session.getService(Session.java:806)
at javax.mail.Session.getTransport(Session.java:728)
at javax.mail.Session.getTransport(Session.java:668)
at javax.mail.Session.getTransport(Session.java:648)
at javax.mail.Session.getTransport(Session.java:705)
at javax.mail.Transport.send0(Transport.java:192)
at javax.mail.Transport.send(Transport.java:124)
at org.apache.log4j.net.SMTPAppender.sendBuffer(SMTPAppender.java:330)
at org.apache.log4j.net.SMTPAppender.append(SMTPAppender.java:215)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
at org.apache.log4j.Category.callAppenders(Category.java:206)
at org.apache.log4j.Category.forcedLog(Category.java:391)
at org.apache.log4j.Category.error(Category.java:305)
at pt.keep.vault.web.server.WebServiceImpl.login(WebServiceImpl.java:1257)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:324)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

我已经在我的项目中添加了 activation-1.1.jar 和 mail.jar (1.4.6 API)。有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:52:24.013

试试这个配置 - 它适用于我，它使用 gmail 作为 smtp 服务器，这对于您在开发和生产环境中都是不错的选择。我使用 log4j 版本：1.2.16 和 apache-log4j-extras 版本 1.0（这个额外的库只有在你使用时才需要`FilterBasedTriggeringPolicy`：）

```
<appender name="emailApp" class="org.apache.log4j.net.SMTPAppender">
    <param name="SMTPProtocol" value="smtps" /> 
    <param name="SMTPHost" value="smtp.gmail.com" />
    <param name="SMTPPort" value="465" />
    <param name="SMTPUsername" value="your.gmail.username" />
    <param name="SMTPPassword" value="xxxxx" />
    <param name="From" value="your.gmail.username@gmail.com" />
    <param name="To" value="target@devnull.com" />
    <param name="Subject" value="Logging from my application" />
    <param name="BufferSize" value="1" />
    <triggeringPolicy class="org.apache.log4j.rolling.FilterBasedTriggeringPolicy">
        <filter class="org.apache.log4j.varia.LevelRangeFilter">
            <param name="LevelMin" value="WARN"/>
            <param name="LevelMax" value="FATAL"/>
        </filter>
    </triggeringPolicy>
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{dd-MM-yyyy HH:mm:ss:SSS} %-4r %-5p %c %x - %m%n"/>
    </layout>
</appender> 
```

# mysql - sql 选择用户最多的产品

> ID：14811854
> 
> 赞同：1
> 
> 时间：2013-02-11T12:26:27.937
> 
> 标签：mysql, sql

用户：

```
uid int(11) - userid(primary key, auto_increment)
name varchar(255)
pass varchar(64)
created int(11) 
```

项目：

```
pid int(11) .....
name varchar(150)
description varchar(255)
created int(11) 
```

用户项目：

```
uid int(11) - user id
pid int(11) - product id 
```

如何选择分配给它的用户最多的项目？

sql查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:39:41.123

你可以使用这样的东西：

```
select p.pid, 
  p.name,
  up.TotalUsers
from projects p
inner join
(
  select pid, count(uid) TotalUsers
  from users_projects
  group by pid
) up
  on p.pid = up.pid
order by TotalUsers Desc
-- limit 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/b2da4a/17)

这将返回所有项目的列表和每个项目的总用户数。如果您想返回项目将最多的用户，那么您将包括`limit 1`被注释掉的那个。

如果您有多个`project`用户具有相同数量的用户，那么您可能需要使用类似于以下内容的内容：

```
select p.pid, 
  p.name,
  up.TotalUsers
from projects p
inner join
(
  select pid, count(uid) TotalUsers
  from users_projects
  group by pid
) up
  on p.pid = up.pid
where totalusers = (select count(*) Total
                    from users_projects
                    group by pid
                    order by total desc
                    limit 1) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/b2da4a/16)

感谢[@JW](https://stackoverflow.com/questions/14811854/sql-select-the-product-with-most-users/14812131#14812131)的小提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:41:06.377

以下查询将包括具有相同用户数的多个项目，并且恰好是用户数最多的项目。

```
SELECT  a.name userName, c.name ProjectName
FROM    users a
        INNER JOIN users_projects b
            ON a.uid = b.uid
        INNER JOIN projects c
            ON b.pid = c.pid
        INNER JOIN
        (
            SELECT  pid, COUNT(*) totalCount
            FROM    users_projects
            GROUP   BY pid
            HAVING  COUNT(*) = (SELECT COUNT(*) x 
                                FROM users_projects 
                                GROUP BY pid 
                                ORDER BY x DESC 
                                LIMIT 1)
        ) d ON b.pid = d.pid
ORDER   BY a.Name ASC 
```

*   [SQLFiddle Demo（*有重复项目*）](http://www.sqlfiddle.com/#!2/b2da4a/8)
*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9948d/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T14:29:23.800

如果您只寻找一个项目，以下是最快的方法：

```
select project_id, count(*) as NumUsers
from user_projects
group by project_id
order by count(*) desc
limit 1 
```

（我假设“产品”=“项目”）。

# javascript - groc javascript documentor - 记录所有子目录的参数

> ID：14811855
> 
> 赞同：0
> 
> 时间：2013-02-11T12:26:29.730
> 
> 标签：javascript, node.js, documentation, glob, groc

使用[node.js npm](http://nevir.github.com/groc/)包为文件`path/to/thisDirectory`和所有子目录中的文件创建文档的命令 (osx bash $ groc) 是什么？

```
$ cd path/to/thisDirectory
$ groc App/scripts/**/*.js 
```

上面只处理比上一层更深的文件，`/scripts/`而不是高于或低于......这是有道理的！

我可能只需要知道获取子目录的语法。我在其他任何地方都找不到信息。

通配符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:58:06.507

在 groc 手册中，它说您应该引用全局路径以让 groc 进行扩展：

```
$ groc "App/scripts/**/*.js" 
```

# php - 我如何创建像 md5 这样的加密方法

> ID：14811856
> 
> 赞同：-5
> 
> 时间：2013-02-11T12:26:30.657
> 
> 标签：php

请，任何建议如何创建像 md5 这样的加密方法

```
$pass = "abc";
$password = xyz($pass); 
```

上面的方法我想像 md5 方法一样自己创建它

请任何帮助我，我该如何创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:34:54.307

看看这个网站以获得一个想法：

> [http://lifehacker.com/5856506/how-to-create-a-personal-information-encryption-scheme-to-easily-hide-your-data-in-plain-sight](http://lifehacker.com/5856506/how-to-create-a-personal-information-encryption-scheme-to-easily-hide-your-data-in-plain-sight)

之后，当您了解加密数据的“技术”时，请尝试将其实现为您选择的语言。在这种情况下，如果它是 PHP，您将不得不创建一个函数来为您处理加密。

基本上系统是未加密的字符串进来，加密的字符串从函数中返回。加密的难度和方法完全取决于您 - 如果您想要一些只是将字符向上或向下移动多个位置的东西，或者如果您想要更复杂的东西。

# html - iOS 应用程序的 UIWebView 中的 iframe Https 站点 - 突然停止工作（..但不是在 safari 中）

> ID：14811857
> 
> 赞同：0
> 
> 时间：2013-02-11T12:26:34.687
> 
> 标签：html, ios, iframe, uiwebview, safari

我刚刚向 Appstore 提交了一个应用程序，该应用程序在其中一个视图控制器中构建了**一个 Https 站点**（不是我的） 。`UIWebView`“框架”**完美地工作了大约一个星期**，然后突然*发生了一些事情*。由于它的突然发生，我怀疑框架网站的主人可能做了一些事情来保护我的框架。我很确定情况并非如此，因为它在几天前就起作用了，而且他们**很少对他们的网站进行更新**。

## 现在发生了什么

让我进一步解释一下。前几天，可以**通过应用程序内部的WebView提交数据**（这是WebView的唯一用途），但现在，突然尝试提交数据生成自定义错误：**“出现问题，请联系系统管理员”**。**不是 404**错误或其他什么，只是表示出现问题的“自定义错误”。但是，如果有人在**移动 safari**中打开我的 iframe .html 文档，在iframe 中提交数据**就可以了**。我的 iframe html 文档的控制台中没有显示任何错误，除了**favicon 错误**，但我确信这与它无关。我也尝试**将文件移动到不同的域**以防他们将我的第一个域列入黑名单，但这没有帮助。（拥有这个 https 网站的公司已允许我在我的应用程序中构建他们的网站，但他们真的不那么合作，所以问他们发生了什么不会导致任何结果。我当然有，但没有答案。）

我确实意识到这可能是我应该问他们的问题，但是由于他们没有像以前那样响应，我猜这可能是其他原因。**有什么想法我还能尝试吗？为什么它在 safari 中有效，但在 UIWebView 中无效（不再）**？我知道，UIWebView != safari，但除此之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:34:52.057

我猜远程服务器正在过滤 UIWebView 的用户代理......不确定。

# c# - 如何将xml数据附加到xml文件中

> ID：14811865
> 
> 赞同：2
> 
> 时间：2013-02-11T12:26:58.423
> 
> 标签：c#, xml

我正在尝试将集合类转换为 xml 数据并将该 xml 数据附加到 xml 文件这是我的函数

```
 public void XmlWriter(List<Email> Femails)
    {
        string ErrorXmlFile = @"../../Retries.xml";
        try
        {
            if (!File.Exists(ErrorXmlFile))
            {
                XmlSerializer xSeriz = new XmlSerializer(typeof(List<Email>));
                FileStream fs = File.Open(ErrorXmlFile, FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
                xSeriz.Serialize(fs, Femails);

            }
            else 
            {
                foreach(Email email in Femails)
                {
                XmlDocument doc = new XmlDocument();
                doc.Load(ErrorXmlFile);
                XmlNode xnode = doc.CreateNode(XmlNodeType.Element, "ArrayOfEmail", null);
                XmlSerializer xSeriz = new XmlSerializer(typeof(Email));
                StringWriter sw = new StringWriter();
                xSeriz.Serialize(sw,email);
                xnode.InnerXml = Convert.ToString(sw);
                doc.DocumentElement.AppendChild(xnode);
                doc.Save(ErrorXmlFile);
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

在上面的函数中，“femail”是一个List的参数，其中Email是用户定义的自定义类。第一次检查文件是否存在。如果不是，那么它现在可以正常工作，但是当我需要将数据附加到现有文件时，它会失败。

根据我上面的代码，它 `<?xml version="1.0" encoding="utf-16"?>`使用我想在绑定之前删除的这个标签将单个电子邮件对象转换为 xml 数据。

我从我的代码中得到的输出是：

```
<?xml version="1.0"?>
<ArrayOfEmail xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Email>
    <UtcDateTime>2013-01-23T10:09:48+05:30</UtcDateTime>
    <From>Rajendra Bhalekar &lt;rajendra.b000@gmail.com&gt;</From>
    <To>Mansha Suman &lt;asdmansha@gmail.com&gt;</To>
    <Subject>Ye dil sun raha hai jo mere dil ki hai sada ye...socha tha na maine......</Subject>
    <IDX>32a84ef7-31bf-4366-bcab-ec10b2f39bc6</IDX>
    <Body>
Hi Raj,

Dil pe mat le yaar dil pe mat le....
idx:32a84ef7-31bf-4366-bcab-ec10b2f39bc6

odhani chunariya tere naam ki - Pyar kiya to darna kya

sona sona telephone dhun pe hasne wali - hidustaniREPLY ABOVE THIS LINEdil
ibadat kar raha hai

Thanks &amp; regards,

Raj

</Body>
    <ExtractReplyText>Hi Raj,Dil pe mat le yaar dil pe mat le....idx:32a84ef7-31bf-4366-bcab-ec10b2f39bc6odhani chunariya tere naam ki - Pyar kiya to darna kya</ExtractReplyText>
  </Email>
  <ArrayOfEmail>
    <?xml version="1.0" encoding="utf-16"?>
<Email xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <UtcDateTime>2013-01-23T10:09:48+05:30</UtcDateTime>
  <From>Rajendra Bhalekar &lt;rajendra.b000@gmail.com&gt;</From>
  <To>Mansha Suman &lt;asdmansha@gmail.com&gt;</To>
  <Subject>Ye dil sun raha hai jo mere dil ki hai sada ye...socha tha na maine......</Subject>
  <IDX>32a84ef7-31bf-4366-bcab-ec10b2f39bc6</IDX>
  <Body>
Hi Raj,

Dil pe mat le yaar dil pe mat le....
idx:32a84ef7-31bf-4366-bcab-ec10b2f39bc6

odhani chunariya tere naam ki - Pyar kiya to darna kya

sona sona telephone dhun pe hasne wali - hidustaniREPLY ABOVE THIS LINEdil
ibadat kar raha hai

Thanks &amp; regards,

Raj

</Body>
  <ExtractReplyText>Hi Raj,Dil pe mat le yaar dil pe mat le....idx:32a84ef7-31bf-4366-bcab-ec10b2f39bc6odhani chunariya tere naam ki - Pyar kiya to darna kya</ExtractReplyText>
</Email></ArrayOfEmail>
</ArrayOfEmail> 
```

这不是我所期望的。请建议我进行必要的更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:54:49.483

我的问题现在解决了，这段代码对我有用

```
public void XmlWriter(List<Email> Femails)
{
    #region On Error Retry and retrycount with xml file

    string ErrorXmlFile = @"../../Retries.xml";
    try
    {
        if (!File.Exists(ErrorXmlFile))
        {
            XmlSerializer xSeriz = new XmlSerializer(typeof(List<Email>));
            FileStream fs = File.Open(ErrorXmlFile, FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
            xSeriz.Serialize(fs, Femails);
            foreach (Email email in Femails)
            {
                SaveAttachment(email);
            }

        }
        else 
        {
            XmlDocument doc = new XmlDocument();
            doc.Load(ErrorXmlFile);

            foreach (Email email in Femails)
            {
                XmlNode xnode = doc.CreateNode(XmlNodeType.Element, "BLACKswastik", null);
                XmlSerializer xSeriz = new XmlSerializer(typeof(Email));
                XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                ns.Add("", "");
                XmlWriterSettings writtersetting = new XmlWriterSettings();
                writtersetting.OmitXmlDeclaration = true;
                StringWriter stringwriter = new StringWriter();
                using (XmlWriter xmlwriter = System.Xml.XmlWriter.Create(stringwriter, writtersetting))
                {
                    xSeriz.Serialize(xmlwriter, email, ns);
                }
                xnode.InnerXml = stringwriter.ToString();
                XmlNode bindxnode = xnode.SelectSingleNode("Email");
                doc.DocumentElement.AppendChild(bindxnode);
                SaveAttachment(email);
            }
            doc.Save(ErrorXmlFile);
        }
    }
    catch (Exception ex)
    {
        throw ex;
    }

    #endregion
} 
```

# python - 如何将模块/应用程序添加到 virtualenv 项目？

> ID：14811869
> 
> 赞同：1
> 
> 时间：2013-02-11T12:27:14.450
> 
> 标签：python, django

我正在尝试在我的计算机上安装 nathan burrows 基本应用程序[https://github.com/nathanborror/django-basic-apps](https://github.com/nathanborror/django-basic-apps)

> 用于 Django 项目的简单应用程序。
> 
> 要安装列出的任何应用程序，只需在 PYTHONPATH 上创建一个名为“basic”的文件夹，然后将您希望使用的应用程序放在该文件夹中。然后加了基础。到您项目的 settings.py 文件。（自然地替换为您希望使用的应用程序）。

我已经建立了一个 virtualenv 项目并将 burrows 的“博客”应用程序文件夹复制/粘贴到我的项目文件夹中。目录结构：
MainvirtualenvFolder----------->(Basic, Mysite, manage.py)
Basic 文件夹有“blog”app 文件夹。Mysite 文件夹有常用的 django 文件，如设置等。

我已经编辑了 settings.py “Insalled Apps”以包含“basic.blog”。

但是，当运行 manage.py （当然是在 virtualenv 下）时，我得到了错误：

> 错误：没有名为 basic.blog 的模块

我究竟做错了什么？

编辑 -

```
> ^C(mike)prince@kingdom:~/projects/mike/basicsite$ python manage.py
> syncdb Traceback (most recent call last):   File "manage.py", line 10,
> in <module>
>     execute_from_command_line(sys.argv)   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/core/management/__init__.py",
> line 443, in execute_from_command_line
>     utility.execute()   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/core/management/__init__.py",
> line 382, in execute
>     self.fetch_command(subcommand).run_from_argv(self.argv)   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/core/management/base.py",
> line 196, in run_from_argv
>     self.execute(*args, **options.__dict__)   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/core/management/base.py",
> line 231, in execute
>     self.validate()   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/core/management/base.py",
> line 266, in validate
>     num_errors = get_validation_errors(s, app)   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/core/management/validation.py",
> line 30, in get_validation_errors
>     for (app_name, error) in get_app_errors().items():   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/db/models/loading.py",
> line 158, in get_app_errors
>     self._populate()   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/db/models/loading.py",
> line 67, in _populate
>     self.load_app(app_name)   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/db/models/loading.py",
> line 88, in load_app
>     models = import_module('.models', app_name)   File "/home/prince/projects/mike/local/lib/python2.7/site-packages/django/utils/importlib.py",
> line 35, in import_module
>     __import__(name)   File "/home/prince/projects/mike/basicsite/basic/blog/models.py", line 10,
> in <module>
>     import tagging ImportError: No module named tagging 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:00:24.170

放入`__init__.py`基本文件夹。

如果该应用程序内再次缺少模块：

1.  搜索那个模块
2.  `pip install`
3.  将该模块放入您`INSTALLED_APPS`的`settings.py`

# parsing - 更改语法中的关联模式

> ID：14811874
> 
> 赞同：0
> 
> 时间：2013-02-11T12:27:24.127
> 
> 标签：parsing, grammar, context-free-grammar, sablecc

我正在尝试使用 SableCC 为模型生成解析器，我称之为 LAM。LAM 本身很简单，其中一个简单的语法（我省略了很多东西）是：

```
L :=   0   |   (x,y)   | F(x1,...,xn)  |    L || L    |    L ; L 
```

我写了这个语法：

```
Helpers
    number   = ['0' .. '9'] ;
    letter   = ['a' .. 'z'] ;
    uletter  = ['A' .. 'Z'] ;

Tokens
    zero     = '0' ;
    comma    = ',' ;
    parallel = '||' ;
    point    = ';' ;
    lpar    = '(' ;
    rpar    = ')' ;

    identifier = letter+ number* ;
    uidentifier = uletter+ number* ;

Productions
    expr = {term} term |
           {parallel} expr parallel term |
           {point} expr point term;

    term = {parenthesis} lpar expr rpar |
           {zero} zero |
           {invk} uidentifier lpar paramlist rpar |
           {pair} lpar [left]:identifier comma [right]:identifier rpar ;

    paramlist  = {list} list | 
                 {empty} ;

    list  = {var} identifier |
            {com} identifier comma list ; 
```

这基本上有效，但有一个副作用：它是左关联的。例如，如果我有

```
L = L1 || L2 ; L3 || L4 
```

然后解析如下：

```
L = ((L1 || L2) ; L3) || L4 
```

我想优先考虑“;” 运算符，因此 L 被解析为

```
L = (L1 || L2) ; (L3 || L4) 
```

（其他东西，比如“||”，可以保持左结合）

我的问题是：

1.  有以“自动”方式进行此类转换的技巧吗？
2.  怎么可能是所有优先级都在“;”上的语法？?

它也被接受“RTFM链接”:-D 谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:21:30.593

您需要创建与所需运算符优先级匹配的规则层次结构。

```
expr = {subexp} subexp |
       {parallel} subexp parallel expr ;

subexp = {term} term |
         {point} term point subexp; 
```

请注意，我还更改了关联性。

# c# - C# XML 序列化 - 如何序列化继承 List 的类中的属性? I need to create an XML file using C#. I am using a class that inherits List that represents a list of computers and later initialize it with values but the serializer doesn't get the attributes 问问题 问问题 2013-02-11T12:27:40.300 7988 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I need to create an XML file using C#. I am using a class that inherits List that represents a list of computers and later initialize it with values but the serializer doesn't get the attributes for this class, only for its descendants. this is the class: public class Computers : List <computer>{ [XmlAttribute("StorageType")] public int StorageType { get; set; } [XmlAttribute("StorageName")] public string StorageName { get; set; } } public class Computer { [XmlAttribute("StorageType")] public int StorageType { get; set; } [XmlAttribute("StorageName")] public string StorageName { get; set; } public string IPAddress { get; set; } public string Name { get; set; } } The result should look something like this: <fpc4:computers storagename="Computers" storagetype="1"><fpc4:computer storagename="{D37291CA-D1A7-4F34-87E4-8D84F1397BEA}" storagetype="1"><fpc4:ipaddress dt:dt="string">127.0.0.1</fpc4:ipaddress> <fpc4:name dt:dt="string">Computer1</fpc4:name></fpc4:computer> <fpc4:computer storagename="{AFE5707C-EA71-4442-9CA8-2A6264EAA814}" storagetype="1"><fpc4:ipaddress dt:dt="string">127.0.0.1</fpc4:ipaddress> <fpc4:name dt:dt="string">Computer2</fpc4:name></fpc4:computer> But what I get so far is this: <fpc4:computers><fpc4:computer storagetype="1" storagename="{7297fc09-3142-4284-b2e9-d6ea2fb1be78}"><fpc4:ipaddress>127.0.0.1</fpc4:ipaddress> <fpc4:name>Computer1</fpc4:name></fpc4:computer> <fpc4:computer storagetype="1" storagename="{eab517f6-aca9-4d01-a58b-143f2e3211e7}"><fpc4:ipaddress>127.0.0.1</fpc4:ipaddress> <fpc4:name>Computer2</fpc4:name></fpc4:computer></fpc4:computers> As you can see the Computers node which is the parent node doesn't get the attributes. Do you guys have a solution? XmlSerializer treats lists completely separate to leaf nodes; properties on lists do not exist - it is just a collection of the contained data. A better approach would be: public class Computers { private readonly List <computer>items = new List<computer>(); [XmlElement("Computer")] public List <computer>Items { get { return items; } } [XmlAttribute("StorageType")] public int StorageType { get; set; } [XmlAttribute("StorageName")] public string StorageName { get; set; } } This is an object that has a set of computers and has two attributes - but is not a list itself. The use of XmlElementAttribute for the list flattens the nesting as desired. Note that I have omitted namespaces for convenience. Inheriting from a list (with an aim of adding members) will not work well, not just for XmlSerlaizer, but for a wide range of serializers and binding frameworks. c#xmlxml-serializationxmlserializer 4 1 回答 1 This answer is useful 2 XmlSerializer将列表与叶节点完全分开；列表上的属性不存在- 它只是所包含数据的集合。更好的方法是： public class Computers { private readonly List <computer>items = new List<computer>(); [XmlElement("Computer")] public List <computer>Items { get { return items; } } [XmlAttribute("StorageType")] public int StorageType { get; set; } [XmlAttribute("StorageName")] public string StorageName { get; set; } } 这是一个具有一组计算机并具有两个属性的对象 - 但它本身不是一个列表。使用XmlElementAttributefor 列表可以根据需要展平嵌套。请注意，为方便起见，我省略了名称空间。 从列表继承（以添加成员为目的）不会很好地工作，不仅适用于XmlSerlaizer，而且适用于广泛的序列化程序和绑定框架。 于 2013-02-11T12:35:21.443 回答 Related 1 vim - 通过heredoc 给出exim 命令时设置了哪些选项？ 2 algorithm - Paxos 共识算法中的“视图”是什么？ 1 mysql - 每个派生表都必须有自己的别名错误mysql 1 oauth - 从 YouTube ClientLogin 迁移到 OAuth 2.0 1 xml - 如何获取 Spring 中任何 XML 命名空间的底层 bean 配置等价物？ 1 c# - 如何在运行时转换为从 String（= 类的名称）获得的类型？ 2 database-design - 基于订阅的服务的数据模型 1 iphone - 使用 UIImagePicker 时如何去除从 UIImagePickerControllerEditedImage 返回的图像上的黑底 1 jstree - JSTree 格式化问题 - jstree-icon 向右浮动 4 html - 继承父级的高度不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</computer></computer></computer></computer></computer></computer></fpc4:computers></computer>

> ID：14811880
> 
> 赞同：3
> 
> 时间：
> 
> 标签：c#, xml, xml-serialization, xmlserializer

I need to create an XML file using C#. I am using a class that inherits List that represents a list of computers and later initialize it with values but the serializer doesn't get the attributes for this class, only for its descendants. this is the class:

```
public class Computers : List<Computer>
    {
        [XmlAttribute("StorageType")]
        public int StorageType { get; set; }

        [XmlAttribute("StorageName")]
        public string StorageName { get; set; }            

    }

    public class Computer 
    {
        [XmlAttribute("StorageType")]
        public int StorageType { get; set; }

        [XmlAttribute("StorageName")]
        public string StorageName { get; set; }

        public string IPAddress { get; set; }
        public string Name { get; set; }
    } 
```

The result should look something like this:

```
<fpc4:Computers StorageName="Computers" StorageType="1">
    <fpc4:Computer StorageName="{D37291CA-D1A7-4F34-87E4-8D84F1397BEA}" StorageType="1">
        <fpc4:IPAddress dt:dt="string">127.0.0.1</fpc4:IPAddress>
        <fpc4:Name dt:dt="string">Computer1</fpc4:Name>
    </fpc4:Computer>
    <fpc4:Computer StorageName="{AFE5707C-EA71-4442-9CA8-2A6264EAA814}" StorageType="1">
        <fpc4:IPAddress dt:dt="string">127.0.0.1</fpc4:IPAddress>
        <fpc4:Name dt:dt="string">Computer2</fpc4:Name>
    </fpc4:Computer> 
```

But what I get so far is this:

```
<fpc4:Computers>
    <fpc4:Computer StorageType="1" StorageName="{7297fc09-3142-4284-b2e9-d6ea2fb1be78}">
      <fpc4:IPAddress>127.0.0.1</fpc4:IPAddress>
      <fpc4:Name>Computer1</fpc4:Name>
    </fpc4:Computer>
    <fpc4:Computer StorageType="1" StorageName="{eab517f6-aca9-4d01-a58b-143f2e3211e7}">
      <fpc4:IPAddress>127.0.0.1</fpc4:IPAddress>
      <fpc4:Name>Computer2</fpc4:Name>
    </fpc4:Computer>
  </fpc4:Computers> 
```

As you can see the Computers node which is the parent node doesn't get the attributes.

Do you guys have a solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:35:21.443

`XmlSerializer`将列表与叶节点完全分开；列表上的属性*不存在*- 它只是所包含数据的集合。更好的方法是：

```
public class Computers {
    private readonly List<Computer> items = new List<Computer>();
    [XmlElement("Computer")]
    public List<Computer> Items { get { return items; } }

    [XmlAttribute("StorageType")]
    public int StorageType { get; set; }

    [XmlAttribute("StorageName")]
    public string StorageName { get; set; }   
} 
```

这是一个*具有*一组计算机并*具有*两个属性的对象 - 但它本身不是一个列表。使用`XmlElementAttribute`for 列表可以根据需要展平嵌套。请注意，为方便起见，我省略了名称空间。

从列表继承（以添加成员为目的）不会很好地工作，不仅适用于`XmlSerlaizer`，而且适用于广泛的序列化程序和绑定框架。

# php - 将自定义值分配给 Cakephp 分页中的 $paginator->numbers

> ID：14811881
> 
> 赞同：0
> 
> 时间：2013-02-11T12:27:40.470
> 
> 标签：php, cakephp, pagination, cakephp-2.0

这是我的情况，我有一个带有标签的用户仪表板：

1.  第一个选项卡显示活动的用户项目
2.  第二个选项卡显示过期的用户项目。

以及一堆其他标签。

当我尝试对 Tab1 和 Tab2 进行分页时，问题就开始了。我在[这里](https://stackoverflow.com/questions/2305839/cakephp-two-separate-paginations-of-the-same-model)有相对的问题。[petrocket](https://stackoverflow.com/a/5878734/)已经回答了这个问题，尽管它并不完全有效。

分页链接和计数器的问题仍然存在。

当我做

```
<?php pr($this->Paginator->params['paging']); ?> 
```

我得到以下结果：

```
Array (
    [UserProject] => Array
    (
        [page] => 1
        [current] => 1
        [count] => 8
        [prevPage] => 
        [nextPage] => 1
        [pageCount] => 8
        [order] => UserProject.id Desc
        [limit] => 1
        [options] => Array
            (
            )
        [paramType] => named
    )

    [UserProject2] => Array
    (
        [page] => 1
        [current] => 1
        [count] => 5
        [prevPage] => 
        [nextPage] => 1
        [pageCount] => 5
        [order] => UserProject2.id Desc
        [limit] => 1
        [options] => Array
            (
            )
        [paramType] => named
    )
) 
```

**我的问题是：**有什么方法可以手动更改 paginator *counter*、*next*、*previous*、*first*和*last*的值？

我的假设是，如果我可以从上述数组中手动​​指定这些值，它将正常工作。现在它只是`[UserProject]`正确地获取 array 的值，而不是 array `[UserProject2]`。

# ajax - Solgema.fullcalendar AJAX 抛出错误

> ID：14811885
> 
> 赞同：0
> 
> 时间：2013-02-11T12:27:46.633
> 
> 标签：ajax, plone, fullcalendar

## 概述

我正在运行 Plone 4.2.4 服务器，它是独立安装的，除了`Solgema.fullcalendar`. 一切都安装好了（我在构建输出中看不到任何关于错误或缺少依赖项的信息，并且在前台模式下运行我的实例没有任何问题）。

## 扩建

在我的扩建中，我有：（正如他们在[此链接](http://plone.org/products/solgema.fullcalendar)上要求的那样）

```
eggs = 
    [...]
    Solgema.fullcalendar

zcml = 
    [...]
    Solgema.fullcalendar 
```

## 过程

我按照文档中的说明进行操作，转到`Add New...`>`Collection`

然后在我的收藏中选择`View`>`Solgema Fullcalendar`

我单独留下日历属性选项卡，除了将视图更改为“月份”之外，其他一切都保持不变。

## 问题

单击空白日期块时，我看到一个小 spinner.gif 表示正在加载某些内容，但在我的 Javascript 控制台中，我看到：

```
Error: uncaught exception: cannot call methods on dialog prior to initialization; 
attempted to call method 'destroy' 
```

这也通过右键菜单发生，右键菜单加载但一旦我单击其中包含的任何按钮就会引发上述错误。

我可以拖动事件，并毫无问题地调整它们的大小（但是我认为在拖动或调整事件大小后，浏览器会将我带到该事件的页面）。

## 概括

似乎我缺少一个未包含在其中的 Javascript 文件，`Solgema.fullcalendar`但是我不知道它是什么脚本，并且我无法破译这个 Javascript 错误（上图）。

如果有人对此有任何经验，将不胜感激您的想法或想法。

# doxygen - doxygen 中的标记文件与 INCLUDE_PATH

> ID：14811889
> 
> 赞同：0
> 
> 时间：2013-02-11T12:27:52.117
> 
> 标签：doxygen

我有两个 C++ 代码项目，一个 (A) 依赖于另一个 (B)。我希望为 A 生成的文档了解 B 使用的类型。在 INCLUDE_PATH 上添加 B 似乎并没有真正做太多，所以我正在为 B 生成一个 TAG，然后将其添加到 A 中。但这是正确的方法吗做事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:45:09.957

进一步调查后的答案是 INCLUDE_PATH 并不顾名思义添加要由 doxygen 记录的文件，只是为了进行预处理。

# c# - 使用 C# 5.0 异步读取文件

> ID：14811892
> 
> 赞同：9
> 
> 时间：2013-02-11T12:28:10.177
> 
> 标签：c#, asynchronous, windows-8, async-await, c#-5.0

我刚刚开始使用 C# 的新`async`功能。我现在已经阅读了大量关于并行下载等的操作方法，但没有阅读/处理文本文件。

我有一个用于过滤日志文件的旧脚本，我想我会尝试升级它。但是我不确定我对新`async`/`await`语法的使用是否正确。

在我的脑海中，我看到它逐行读取文件并将其传递给不同的线程进行处理，这样它就可以继续而不等待结果。

我是否正确地考虑它，或者实现它的最佳方法是什么？

```
static async Task<string[]> FilterLogFile(string fileLocation)
{
    string line;

    List<string> matches = new List<string>();

    using(TextReader file = File.OpenText(fileLocation))
    {        
        while((line = await file.ReadLineAsync()) != null)
        {
            CheckForMatch(line, matches);
        }
    }

    return matches.ToArray();
} 
```

完整脚本：[http ://share.linqpad.net/29kgbe.linq](http://share.linqpad.net/29kgbe.linq)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T13:01:22.627

> 在我的脑海中，我看到它逐行读取文件并将其传递给不同的线程进行处理，这样它就可以继续而不等待结果。

但这不是您的代码所做的。相反，当所有读取完成后，您将（异步）返回一个数组。如果您真的想异步地一一返回匹配项，则需要某种异步集合。您可以为此使用 TPL Dataflow 中的块。例如：

```
ISourceBlock<string> FilterLogFile(string fileLocation)
{
    var block = new BufferBlock<string>();

    Task.Run(async () =>
    {
        string line;

        using(TextReader file = File.OpenText(fileLocation))
        {        
            while((line = await file.ReadLineAsync()) != null)
            {
                var match = GetMatch(line);

                if (match != null)
                    block.Post(match);
            }
        }

        block.Complete();
    });

    return block;
} 
```

（您可能需要添加错误处理，可能是通过错误返回的块。）

然后，您会将返回的块链接到另一个将处理结果的块。或者您可以直接从块中读取它们（使用`ReceiveAsync()`）。

* * *

但是查看完整的代码，我不确定这种方法对您是否有用。由于您处理结果的方式（分组，然后按每组中的计数排序），在您拥有所有结果之前，您无法对它们做太多事情。

# sitecore - 使用 Sitecore Advanced Database Crawler 将索引作为 NumericFields

> ID：14811897
> 
> 赞同：3
> 
> 时间：2013-02-11T12:28:26.173
> 
> 标签：sitecore, lucene.net, lucene

我需要使用 lucene 范围查询来搜索价格字段。然而，它给出的结果并不准确或一致，因为我在 Lucene.Net API 中使用了 TermRangeQuery。我相信使用 NumericRangeQuery 可以获得准确的结果。要使用 NumericRangeQuery，需要使用 NumericField 对该字段进行索引。有没有办法可以使用 Advanced Database Crawler 来做到这一点。我试图通过更改 Advanced Database Crawler 源代码来做到这一点，但它对我不起作用。

这些是我在 Advanced Database Crawler 中所做的更改。在 CreateField 方法的 scSearchContrib.Crawler.Crawlers.AdvancedDatabaseCrawler 类中，我添加了以下代码。

```
if (name.EndsWith("numeric"))
{
    field = new NumericField(name, storageType, true);
} 
```

在索引配置中，我给出了字段名称 name 并将文本“numeric”附加到它上面。但是，我通过删除“数字”部分正确地传递了字段名。

构建索引时出现这样的错误。

```
Job started: RebuildSearchIndex|System.NullReferenceException: Object reference not set to an instance of an object.
   at Lucene.Net.Store.IndexOutput.WriteString(String s)
   at Lucene.Net.Index.FieldsWriter.WriteField(FieldInfo fi, Fieldable field)
   at Lucene.Net.Index.StoredFieldsWriterPerThread.AddField(Fieldable field, FieldInfo fieldInfo)
   at Lucene.Net.Index.DocFieldProcessorPerThread.ProcessDocument()
   at Lucene.Net.Index.DocumentsWriter.UpdateDocument(Document doc, Analyzer analyzer, Term delTerm)
   at Lucene.Net.Index.DocumentsWriter.AddDocument(Document doc, Analyzer analyzer)
   at Lucene.Net.Index.IndexWriter.AddDocument(Document doc, Analyzer analyzer)
   at Lucene.Net.Index.IndexWriter.AddDocument(Document doc)
   at Sitecore.Search.IndexUpdateContext.AddDocument(Document document)
   at Sitecore.Search.Crawlers.DatabaseCrawler.AddItem(Item item, IndexUpdateContext context)
   at Sitecore.Search.Crawlers.DatabaseCrawler.AddTree(Item root, IndexUpdateContext context)
   at Sitecore.Search.Crawlers.DatabaseCrawler.AddTree(Item root, IndexUpdateContext context)
   at Sitecore.Search.Crawlers.DatabaseCrawler.AddTree(Item root, IndexUpdateContext context)
   at Sitecore.Search.Index.Rebuild()
   at Sitecore.Shell.Applications.Search.RebuildSearchIndex.RebuildSearchIndexForm.Builder.Build()|Job ended: RebuildSearchIndex (units processed: 1) 
```

有人可以告诉我使用高级数据库爬虫的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:30:50.927

即使我无法将数字字段索引为数字字段，也找到了解决该问题的方法。它是用填充零索引，因此 lucene TermRangeQuery 给出正确的搜索结果。每个价格都用填充零索引，因此每个值都包含 10 位数字。这样我得到的结果是准确的。

# ruby - 如何发现单词附近的日期或数字 - 仅使用正则表达式中的正则表达式

> ID：14811898
> 
> 赞同：0
> 
> 时间：2013-02-11T12:28:29.613
> 
> 标签：ruby, regex, recursion

我仍在学习正则表达式的内在函数，并且想知道是否可以使用单个正则表达式找到与单词相距一定距离的数字。

考虑以下文本

```
DateClient
15-01-20130060 15-01-20140010 15-01-20150020 
```

我希望我的正则表达式只匹配`15-01-2013`.

我知道我可以拥有完整`DateClient 15-01-2013`的 with `DateClient\W+\d{2}-\d{2}-\d{4}`，然后再应用正则表达式，但我正在尝试构建一个可配置的不可知系统，为用户提供权力，所以我希望有一个匹配的正则表达式`15-01-2013`。

这甚至可行吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:31:36.807

您可以使用捕获组：

```
DateClient\W+(\d{2}-\d{2}-\d{4}) 
```

javascript 中的示例（您没有指定语言）：

```
var str = "DateClient\n15-01-20130060 15-01-20140010 15-01-20150020";
var date = str.match(/DateClient\W+(\d{2}-\d{2}-\d{4})/)[1]; 
```

编辑（在添加 Ruby 标签之后）：

在 Ruby 中，您可以使用

```
(?<=DateClient\W)(\d{2}-\d{2}-\d{4}) 
```

[示范](http://rubular.com/r/9YfMLop5sh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:33:07.170

查看[lookbehind](http://www.regular-expressions.info/lookaround.html)以仅匹配日期。但是，您的环境的后向支持可能会受到限制。

或者您可以只使用一个捕获[组](http://www.regular-expressions.info/brackets.html)，您将能够从匹配结果中提取它。

# ios - 将 double 转换为 int 的意外结果

> ID：14811901
> 
> 赞同：0
> 
> 时间：2013-02-11T12:28:33.757
> 
> 标签：ios, objective-c, casting, int, double

我试图将一个`double`值转换为`int`，但我得到了一个不同的值。

我有这个代码：

```
double double100times = 240;
int a=[[NSNumber numberWithDouble:double100times] intValue]; 
```

我从中得到的价值是`a=239`.

如果我`int a= (int)double100times`改用，我会得到相同的值。

为什么是这样？

更新：如果我使用 double double100times = 240; 有效，但我正在使用：

```
 double double100times = (2.3*100)+10; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:35:09.083

我试过这段代码

```
double double100times = 240;
    int a=[[NSNumber numberWithDouble:double100times] intValue];
    NSLog(@"Integer : %d",a); 
```

结果我

> 整数：240

你确定，再次检查你的日志..

编辑 ：-

一种解决方法..

```
double double100times = ((2.3*100)+10);
    NSLog(@"Value : %f",double100times);
    int a=[[NSNumber numberWithDouble:double100times] intValue];
    int b = [[NSString stringWithFormat:@"%f",double100times] intValue];
    NSLog(@"Integer : %d",a);
    NSLog(@"Integer : %d",b); 
```

# c# - 想从数据库中检索数组

> ID：14811907
> 
> 赞同：1
> 
> 时间：2013-02-11T12:28:55.020
> 
> 标签：c#, asp.net-mvc, linq, highcharts

我对 MVC 很陌生，并且对 Linq 有一些问题，我认为解决方案会很简单。

我在数据库中有一个包含以下变量的表；

名称 - 字符串

值 - 浮动

时间-日期时间

现在我想将一个特定的名称放入两个数组中，一个包含值，另一个包含时间，这样很容易绘制。我制作了一个控制器，我可以在其中设法访问数据库并使用此代码获取特定名称；

```
 var Names = db.Graphs
                        .Where(r => r.Name.Contains(Name) ||
                                    string.IsNullOrEmpty(Name))
                        .Take(10) 
```

但是我完全坚持如何遍历数据库，获取两个数组并将其发送到我有我的 Highchart-plot 的视图。

Javascript；

```
 series: [{
            name: 'NameOn',
            data: [23.3, 18.3, 13.9, 9.6]   <--- Where i want to insert my data
        }] 
```

关于如何检索数据的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T13:52:47.510

对于不规则时间图表数据格式如下

```
public static Series GetIrregularTimeChartData()
{
    List<Series> Series = new List<Series>();

    // get data from db and convert it to chart data (name, value, date)
    var chartSeries = db.Graphs.GroupBy(x => new { x.Name })
                      .Select(g => new
                      {
                          Name = g.Key,
                          Data = g.Select(x => x.Value).ToArray(),
                          Date = g.Select(x => x.Date).ToArray()
                      }).ToArray();

    // create 2D array => [value, date]
    foreach (var item in chartSeries)
    {
        int lenght = item.Data.Count();
        object[,] data = new object[lenght, 2];
        for (int i = 0; i < lenght; i++)
        {
            data[i, 0] = item.Date[i];
            data[i, 1] = item.Data[i];
        }
        Series localSeries = new Series { Name = item.Name, Data = new Data(data) };
        Series.Add(localSeries);
    }

    return Series;
} 
```

将此数据设置为图表数据源。您可以使用[此页面中的示例](http://dotnethighcharts.codeplex.com/releases/view/85324)获取更多信息。

# .net - 反序列化时如何配置ServiceStack.Text JsonSerializer 属性名

> ID：14811912
> 
> 赞同：7
> 
> 时间：2013-02-11T12:29:14.520
> 
> 标签：.net, json, serialization, servicestack

我正在尝试使用`ServiceStack.Text`具有非 C# 类属性名称约定的库来反序列化 JSON 数据，特别是如下蛇案例：

```
{
    "first_name": "Foo",
    "last_name": "Bar"
} 
```

我想将其反序列化为 POCO：

```
public class MyDto
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

我目前正在这样做：

```
var dto = JsonSerializer.DeserializeFromString<MyDto>(dtoData); 
```

但这不会识别属性名称。我以前在`Newtonsoft.Json`使用[自定义`ContractResolver`](https://gist.github.com/roryf/1042502). 这应该如何使用`ServiceStack.Text`？

我不想用属性装饰我的 dto 类，`DataMember`因为这似乎是数据源的问题，而不是 dto 本身，因此应该由执行反序列化的代码处理。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T15:58:10.747

查看[JsConfig以了解](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/JsConfig.cs)[ServiceStack 的 JSON 和文本序列化](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/JsConfig.cs)程序支持的所有不同配置和自定义，例如：

```
JsConfig.Init(new Config { TextCase = TextCase.SnakeCase }); 
```

应该做你想做的。

# python - 使用 pyinstaller 打包：找不到 PyQt4 模块

> ID：14811919
> 
> 赞同：3
> 
> 时间：2013-02-11T12:29:33.337
> 
> 标签：python, pyinstaller

大家好，感谢阅读。我正在使用 pyinstaller 将我的 python 代码打包在一个文件中，但是当我运行我的打包文件时，我收到以下错误：

```
Traceback (most recent call last):
File "<string>", line 21, in <module>
File "C:\Users\****\Desktop\pyinstaller-2.0\pyinstaller-2.0\PyInstaller\loader\iu.py", line 409, in importHook
ImportError: No module named PyQt4.QtCore 
```

我不知道这个错误告诉我什么，特别是因为我的桌面上没有目录名称 pyinstaller-2.0 并且我根本没有使用 PyQt4。

导入模块：`Tkinter, tkFileDialog, tkMessageBox, multiprocessing, os, sys, time, numpy, scipy.weave, pywt, matplotlib.pyplot`

我认为这个问题与`multiprocessing`，因为我之前没有遇到过这个错误。我使用[这个配方](http://www.pyinstaller.org/wiki/Recipe/Multiprocessing)来正确实现`multiprocessing`模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T10:01:01.253

如果您正在使用，`PyQt`那么使用 PyInstaller 导入模块的唯一方法是使用

```
 from PyQt4 import QtCore, QtGui 
```

而不是

```
 import PyQt4.QtCore, PyQt4.QtGui 
```

你的错误暗示。但是，您说您没有使用`PyQt`.

`PyQt`是一个可选依赖项，`matplotlib`因此 PyInstaller 有可能正在检查`matplotlib`模块并因此包括`PyQt`.

我建议`PyQt`从构建中排除模块；在您的`.spec`文件中，搜索`Analysis`该类的行 - 类似于

```
Analysis( ..., excludes=['PyQt4', 'PyQt4.QtCore', 'PyQt4.QtGui']) 
```

并按照上面的建议编辑`excludes`关键字 arg。

# format - LibreOffice：最后一页页脚的文本

> ID：14811920
> 
> 赞同：4
> 
> 时间：2013-02-11T12:29:37.003
> 
> 标签：format, footer, libreoffice, openoffice-writer

我想为我们公司创建一个自定义的 LibreOffice Writer 模板。此模板应在每个文档的最后一页的页脚中包含免责声明。

在我们现有的 M$ Word 模板中，我们使用带有“IF({current page}={last page};...”的字段，但 LibreOffice 似乎无法在条件文本中使用当前页码[。LibreOffice 帮助页面](https://help.libreoffice.org/Writer/Defining_Conditions)说：

> 您不能在条件表达式中使用内部变量，例如页码和章节号。

对最后一页使用自定义页面样式似乎也不是一个好的决定，因为如果有人在“最后一页”中插入太多内容并导致自动分页符，那么他会两次获得免责声明。

如何在 LibreOffice 中创建一个页脚，该页脚将自动显示在文档的最后一页，但不会显示在任何其他页面上？

* * *

编辑：我设法编写了一个可以为最后一页插入分页符的宏。仍然不是完整的解决方案，但可能是一种方法：

```
Sub PageBreakForLastPage

  ' create cursor
  Cursor = ThisComponent.CurrentController.getViewCursor

  ' move to start of last page
  Cursor.jumpToLastPage
  Cursor.jumpToStartOfPage

  ' create page break
  Cursor.BreakType = com.sun.star.style.BreakType.PAGE_BEFORE
  Cursor.PageDescName = "First Page"

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:59:19.703

我们在使用 OpenOffice 模板引擎时遇到了同样的问题（我想它是相同的：D），解决这个问题的唯一方法是为页码添加一个带有自定义字段的页脚，并在创建每个页面后填写它。

# java - Mybatis spring 变换参数

> ID：14811925
> 
> 赞同：1
> 
> 时间：2013-02-11T12:29:57.280
> 
> 标签：java, mybatis

我想知道在使用 mybatis 和 spring 集成时转换方法参数的最佳方法是什么。转换的原因可能有多种原因 - 例如 mybatis 无法将 java.util.Set 处理为参数输入。

具体来说，假设我有一个 DAO 接口方法：

```
List<Foo> getFooForUniqueIds(Set<Long> ids); 
```

和相应的 XML 为：

```
<select id="getFooForUniqueIds" parameterType="java.util.Set" resultMap="foo">
    SELECT f.*
      FROM foo f
     WHERE f.id IN <foreach collection="list" item="item" separator="," close=")" open="(">
            #{item}
           </foreach>
</select> 
```

我需要一种将其转换`Set<Long> ids`为`List<Long> ids`mybatis XML 片段可以解释的方法。我知道我们可以提供一个直接处理 SqlSessionFactory 的具体类，但我喜欢 Spring 集成提供的抽象，我不担心获取会话和关闭它们等无趣的东西。

有人可能还会争辩说 DAO 应该是愚蠢的，并且可能转换应该发生在服务层。但是，这种情况下的转换是由于映射器框架的细微差别，服务层采取了一些措施来抵消它，这似乎是不正确的。

欢迎提出建议并提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T05:04:37.303

这里的具体示例可以通过@Param 提供参数名称（而不是假设它是“列表”）并在 XML 中使用该参数名称来解决。

```
List<Foo> getFooForUniqueIds(@Param("set") Set<Long> ids); 
```

使用 XML 作为

```
<select id="getFooForUniqueIds" parameterType="java.util.Set" resultMap="foo">
SELECT f.*
  FROM foo f
 WHERE f.id IN <foreach collection="set" item="item" separator="," close=")" open="(">
        #{item}
       </foreach>
</select> 
```

参考： [https ://groups.google.com/forum/?fromgroups=#!topic/mybatis-user/BGjvVw1xx_c](https://groups.google.com/forum/?fromgroups=#!topic/mybatis-user/BGjvVw1xx_c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:59:58.580

你可以看看 MyBatis typeHandlers。创建您自己的类型处理程序并在您的 parameterMap 中定义它 - 这可以起到作用。

MyBatis 在 foreach 语句中只接受 List 和 Array 类型：

> 您可以将 List 实例或 Array 作为参数对象传递给 MyBatis。当你这样做时，MyBatis 会自动将它包装在一个 Map 中，并按名称键入它。列表实例将被键入名称“list”，数组实例将被键入名称“array”。

# delphi - 如何在 Windows 7 的任务栏中隐藏应用程序？

> ID：14811935
> 
> 赞同：15
> 
> 时间：2013-02-11T12:30:32.100
> 
> 标签：delphi, winapi, delphi-2007, taskbar

我想从 Windows 7 任务栏中隐藏一个应用程序。

我想在屏幕边缘做一个工具栏之类的东西，当用户点击它时它会做某些事情，但我不希望它显示在任务栏中，因为它是我想留在后台的东西.

我尝试了以下帖子中的说明，但它不适用于我的应用程序：

[如何隐藏任务栏条目但保留窗口形式](https://stackoverflow.com/questions/1553923/how-to-hide-a-taskbar-entry-but-keep-the-window-form)

然后我在一个新的空 VCL 表单应用程序上尝试了它，它仍然无法正常工作。我搜索了其他解决方案，但它们的作用与链接帖子中的非常相似。

有什么改变，这使得在 Windows 7 中不可能吗？或者有什么你能想到的，可以阻止它工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T17:54:09.187

您可以覆盖主窗体`CreateParam`以删除强制任务栏按钮 ( `WS_EX_APPWINDOW`) 的标志，并另外使窗体*归*应用程序窗口所有。这与 shell 为窗口放置任务栏按钮的要求*相反。*来自“[管理任务栏按钮](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144179%28v=vs.85%29.aspx#Managing_Taskbar_But)”：

> [..] 为确保窗口按钮位于任务栏上，请使用**WS_EX_APPWINDOW**扩展样式创建一个无主窗口。[..]

样本：

```
type
  TForm1 = class(TForm)
  protected
    procedure CreateParams(var Params: TCreateParams); override;
  end;

procedure TForm1.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.ExStyle := Params.ExStyle and not WS_EX_APPWINDOW;
  Params.WndParent := Application.Handle;
end; 
```

如果您使用此方法，请勿`MainFormOnTaskbar`将“应用程序”的属性状态从其默认“真”更改。

您还可以删除第二行 (..WndParent := ..) 并在对象检查器`PopupMode`中将表单设置为相同的效果。`pmExplicit`

* * *

[顺便说一句，这是发布的解决方案TLama](https://stackoverflow.com/a/14878743/243614)的同一主题的文档引用：

> 为了防止窗口按钮被放置在任务栏上，[...] 作为替代方案，您可以创建一个隐藏窗口，并使该隐藏窗口成为可见窗口的所有者。

当您设置`MainFormOnTaskbar`为 false 时，主窗体由 VCL 设计的应用程序窗口拥有。如果您隐藏应用程序窗口，则满足要求。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T15:53:10.643

尝试使用以下描述的棘手方法[`this article`](http://delphi.about.com/od/delphitips2008/qt/hide_taskbutton.htm)：

在项目文件中将设置[`MainFormOnTaskBar`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TApplication.MainFormOnTaskBar)为 False。然后尝试从主窗体[`OnShow`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.OnShow)和[`OnActivate`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TCustomForm.OnActivate)事件处理程序中隐藏应用程序窗口。所以你的项目可能如下所示：

***项目1.dpr：***

```
program Project1;

uses
  Forms,
  Unit1 in 'Unit1.pas' {Form1};

{$R *.res}

begin
  Application.Initialize;
  Application.MainFormOnTaskbar := False;
  Application.CreateForm(TForm1, Form1);
  Application.Run;
end. 
```

***单元1.pas：***

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs;

type
  TForm1 = class(TForm)
    procedure FormShow(Sender: TObject);
    procedure FormActivate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormShow(Sender: TObject);
begin
  ShowWindow(Application.Handle, SW_HIDE);
end;

procedure TForm1.FormActivate(Sender: TObject);
begin
  ShowWindow(Application.Handle, SW_HIDE);
end;

end. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-07T07:05:00.917

您的应用程序主窗体通常在 dpr 中创建，因此打开 dpr 并查找创建主窗体的行。

```
// add this line first
// blank app title will prevent app from showing in the applications list in task manager
Application.Title := '';

// this line is already in the dpr and creates the main form, the class will differ
Application.CreateForm(TMainForm, Result);

// make the main form invisible to windows taskbar/task switcher
i := GetWindowLong(Application.Handle, GWL_EXSTYLE);
SetWindowLong(Application.Handle, GWL_EXSTYLE, i OR WS_EX_TOOLWINDOW AND NOT WS_EX_APPWINDOW); 
```

我知道这适用于 XP 和 7。我猜它也适用于 8。这会添加工具窗口标志并删除 appwindow 标志，所以我想如果您对 toolwindow 标志不感兴趣，您可以省略以下部分

```
i OR WS_EX_TOOLWINDOW 
```

# java - Java swing，无法使图像正常工作

> ID：14811937
> 
> 赞同：0
> 
> 时间：2013-02-11T12:30:38.290
> 
> 标签：java, image, swing

我写了一个简单的程序来绘制图像，我根本无法让它工作。它应该只在框架内的窗格中显示 1 张图片。ps 有我不需要的 prolly 进口，我尝试了很多不同的东西。

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Panel;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import javax.swing.*;

import javax.imageio.ImageIO;

public class ShowImage {
private Graphics g;
private BufferedImage lionImage=null;
private JFrame frame;
private JPanel totalGUI,values;

 public static void main(String[] args) {
       SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }

   });
   }
 public JPanel createContentPane(){
     totalGUI = new JPanel();

        totalGUI.setLayout(null);

        values = new JPanel();
        values.setLayout(null);
        values.setLocation(10, 10);
        values.setSize(490, 290);
        values.setBackground(Color.WHITE);
        totalGUI.add(values);
        getImage();
        Graphics g = values.getGraphics();

        g.drawImage(lionImage,100,100,null);

        totalGUI.setOpaque(true);
        return totalGUI;
 }

    private static void createAndShowGUI() {
        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("Calculator");

        ShowImage demo = new ShowImage();
        frame.setContentPane(demo.createContentPane());

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500, 300);
        frame.setVisible(true);

}

void getImage(){
    try{
    lionImage =ImageIO.read(new File("imgres.jpg"));// *see note
    }catch (IOException e){}
    }

} 
```

我得到了错误。我不知道问题是什么。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at ShowImage.createContentPane(ShowImage.java:43)
at ShowImage.createAndShowGUI(ShowImage.java:55)
at ShowImage.access$0(ShowImage.java:50)
at ShowImage$1.run(ShowImage.java:23)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:56:28.790

```
public static void main (String [] args) throws Exception 
{
    final BufferedImage lionImage = ImageIO.read (new File ("imgres.jpg"));

    JComponent image = new JComponent () 
    {
        @Override
        protected void paintComponent (Graphics g) 
        {
            super.paintComponent (g);

            g.drawImage (lionImage, 0, 0, null);
        }

        @Override
        @Transient
        public Dimension getPreferredSize () 
        {
            return new Dimension (lionImage.getWidth (), lionImage.getHeight ());
        }
    };
    image.setOpaque (true);

    JFrame frame = new JFrame ("Image");
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane ().setLayout (new BorderLayout ());
    frame.getContentPane ().add (image, BorderLayout.CENTER);
    frame.pack ();
    frame.setVisible (true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:35:29.733

这是因为你`g`是`null`. 当 JPanel 的路径尚未显示在屏幕上时，就会发生这种情况。

为了在 a 中绘制图像`JPanel`，您通常会创建一个新类`extends JPanel`并覆盖其`paintComponent(Graphics g)`方法。请参阅[此](https://stackoverflow.com/questions/14478112/why-do-my-shapes-and-images-dissapear-on-my-panel/14478168#14478168)示例，只是您需要调用该`drawImage()`方法。

我建议你永远不要抓住它`Exception`，也不要以任何方式处理它。您可以在`getImage()`尝试加载图像的方法中执行此操作。

# php - Wordpress 管理员在升级到 3.5.1 后停止工作

> ID：14811941
> 
> 赞同：0
> 
> 时间：2013-02-11T12:30:54.303
> 
> 标签：php, wordpress

今天我尝试将 Wordpress 更新到最新版本（3.5.1）。这样做后，我无法再打开`wp-admin/index.php`了。它给了我一个 404 错误。我已经查看了该`index.php`文件，并且在调用该函数时它会中断`auth_redirect()`。这是该函数的代码：

```
function auth_redirect() {
    // Checks if a user is logged in, if not redirects them to the login page
    $secure = ( is_ssl() || force_ssl_admin() );
    $secure = apply_filters('secure_auth_redirect', $secure);
    // If https is required and request is http, redirect
    if ( $secure && !is_ssl() && false !== strpos($_SERVER['REQUEST_URI'], 'wp-admin') ) {
        if ( 0 === strpos( $_SERVER['REQUEST_URI'], 'http' ) ) {
            wp_redirect( set_url_scheme( $_SERVER['REQUEST_URI'], 'https' ) );
            exit();
        } else {
            wp_redirect( 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] );
            exit();
        }
    }
    if ( is_user_admin() )
        $scheme = 'logged_in';
    else
        $scheme = apply_filters( 'auth_redirect_scheme', '' );
    if ( $user_id = wp_validate_auth_cookie( '',  $scheme) ) {
        do_action('auth_redirect', $user_id);
        // If the user wants ssl but the session is not ssl, redirect.
        if ( !$secure && get_user_option('use_ssl', $user_id) && false !== strpos($_SERVER['REQUEST_URI'], 'wp-admin') ) {
            if ( 0 === strpos( $_SERVER['REQUEST_URI'], 'http' ) ) {
                wp_redirect( set_url_scheme( $_SERVER['REQUEST_URI'], 'https' ) );
                exit();
            } else {
                wp_redirect( 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] );
                exit();
            }
        }
        return;  // The cookie is good so we're done
    }
    // The cookie is no good so force login
    nocache_headers();
    $redirect = ( strpos( $_SERVER['REQUEST_URI'], '/options.php' ) && wp_get_referer() ) ? wp_get_referer() : set_url_scheme( 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] );
    $login_url = wp_login_url($redirect, true);
    wp_redirect($login_url);
    exit();
} 
```

但是我找不到它中断的特定部分，因为它没有给我一条错误消息，它只显示一个 404 页面，并且在 Firefox 中它说它没有正确重定向。

有人可以帮我解决这个问题吗？

谢谢！

一些附加信息：

我找到了它中断的那一行，它是：

```
wp_redirect( 'https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'] ); 
```

回应`$_SERVER['HTTP_HOST']`并`$_SERVER['REQUEST_URI']`给我预期的结果（www.domain.com/blog）。然而它只是不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:58:50.057

我过去也遇到过类似的问题。但它通常涉及一个新的插件安装......几件事：

1.  尝试增加可用的 RAM。WP 过去曾给我带来过类似的麻烦，并且与 RAM 相关。您应该能够增加 .htaccess 文件中的 RAM
2.  这是生产系统吗？如果没有，也许记下所有插件，删除它们，尝试访问系统。如果可行，那么您就知道问题是基于插件的，而不是 WP 本身。然后，您可以系统地一一添加插件，并确定是哪一个导致了问题。

# json - JSonRestStore 和 CLientfilter

> ID：14811947
> 
> 赞同：0
> 
> 时间：2013-02-11T12:31:11.730
> 
> 标签：json, dojo, store

我已经设置了一个小脚本来测试 JRS 和一个客户端过滤器。我已经使用我在互联网上可以找到的东西来设置它，但它不起作用。我正在尝试使用 clientFilter 在 JRS 上执行客户端提取。尽管如此，JRS 正在查询后端，而不是在客户端执行 fetch。我在下面粘贴了脚本，希望你们中的一个人能解释一下为什么它不起作用。

谢谢

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="js/dojo-release-1.7.2/dojo/resources/dojo.css"/>
    <link rel="stylesheet" type="text/css" href="js/dojo-release-1.7.2/dijit/themes/tundra/tundra.css"/>

    <script>
        dojoConfig= {
            has: {
                "dojo-firebug": true
            },
            parseOnLoad: true,
            isDebug: true,
            locale: "nl"
        };
    </script>

    <script type="text/javascript" src="js/dojo-release-1.7.2/dojo/dojo.js"></script>

    <script type="text/javascript">
        dojo.require("dojox.data.ClientFilter");
        dojo.require("dojox.data.JsonRestStore");
        dojo.require("dijit.form.Button");

        myStore = new dojox.data.JsonRestStore({target:"TARGET"});
        myStore.fetch();

        dojo.ready(function() {
            dojo.connect(dijit.byId("query"), "onClick", function() {
                myStore.fetch({query:{id:"4"},queryOptions:{cache:true}, onItem: function(item) {console.log(item); }});
            });
        });
    </script>
</head>

<body cllass="tundra">
    <button type="button" id="query" data-dojo-type="dijit.form.Button">Query</button>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:46:51.727

我制作了一个 jsfiddle，展示了如何使用新语法和 dojo 存储来做到这一点。 [http://jsfiddle.net/SgyYW/](http://jsfiddle.net/SgyYW/)

```
require([
"dojo/store/Cache",
"dojo/store/JsonRest",
"dojo/store/Memory",
"dojo/parser",
"dojo/on",
"dojo/ready",
"dijit/form/Button",
"dijit/registry"
],function(Cache,JsonRest,Memory,parser,on,ready,Button,registry){
console.log('x');
var someData = [
    {id:1, name:"One"},
    {id:2, name:"Two"},
    {id:3, name:"Three"},
    {id:4, name:"Four"},
    {id:5, name:"Five"}
];
recToQuery = 4;
// recToQuery = 6; // try one that is not in the cache
var memoryStore = new Memory({data: someData});
var restStore = new JsonRest({ target: "/i/dont/exist.json/"});
var myStore = new Cache(restStore, memoryStore);
myStore.query({}); // this will ask for everything and prime the cache
ready(function(){
    parser.parse();
    var queryBtn = registry.byId("query");
    console.log('queryBtn',queryBtn);
    on(queryBtn, "click", function() {
        console.log('query button clicked',[this,arguments]);
        var resultOrPromise = myStore.get(recToQuery);
        if (typeof resultOrPromise.then ==='function'){
            // it is asking the server
            resultOrPromise.then(function(){
                console.log('Result from server fetch',arguments);
            },function(){
                console.log('it queried the server but failed',arguments);
            });
        }else{
            // it is in the cache (from the first query)
            console.log('result from cache:',resultOrPromise);
        }
    });//end connect
}); //end ready
}); //end require 
```

# javascript - 上传上传进度

> ID：14811958
> 
> 赞同：2
> 
> 时间：2013-02-11T12:31:46.207
> 
> 标签：javascript, jquery, plupload

我试图在 ID 为 #percentage 的 div 中以百分比显示上传进度。它应该与 $('#percentage') 一起使用，但我只能通过在变量 elem 中一直键入 DOM 元素来使其工作。

```
uploader.bind('UploadProgress', function(up, file) {
    var elem = document.getElementById("percentage");
    $("#percentage").innerHTML = "<div>"+ file.percent +"%</div>"; //doesnt work
    elem.innerHTML = "<div>"+ file.percent +"%</div>"; //works
    $('#'+file.id).find('.progress').css('width',file.percent+'%')
}); 
```

也许有人知道我的错误是什么？

编辑：它通过将 [0] 添加到 $("#percentage").

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T12:58:32.883

你有没有尝试过 ？

```
$("#percentage").html("<div>"+ file.percent +"%</div>"); 
```

见：[http ://api.jquery.com/html/](http://api.jquery.com/html/)

# css - 在 :active psuedo-class 之后禁用/删除 css3 转换

> ID：14811962
> 
> 赞同：2
> 
> 时间：2013-02-11T12:31:55.387
> 
> 标签：css, css-transitions, pseudo-class

所以我有一个典型的场景：当鼠标悬停在 :hover psuedo-class 时，按钮的样式会转换它的颜色。
该按钮还有一个 :active 触发类，以便在单击时再次更改颜色；但是这一次我不想要一个过渡，所以这个类禁用了所有的过渡（我希望改变是活泼的）。

我遇到的问题是，虽然这适用于单击的 mousedown 部分，但不适用于 mouseup 部分，因为一旦释放鼠标按钮，:active 状态就不再存在，这会导致转换（即按钮的类定义的一部分）来应用。

有没有办法让它工作，这样悬停/悬停应用带有过渡的更改，但单击向下/向上不？
我可能可以重做 jQuery 中的行为；但理想情况下，我想在不诉诸 JavaScript 的情况下实现这一目标。

一个工作示例是[here](http://codepen.io/raad/pen/yjIdr "CodePen 上的示例")。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T22:02:49.830

你可以用一个技巧来做到这一点

例如，您可以更改颜色，而不是使用背景，而是使用阴影：

```
button:active {
    -webkit-box-shadow: inset 0 0 100px green;
} 
```

然后，您唯一剩下的更改是将过渡限制为背景颜色，而不是全部

```
button {
    transition: background-color 1s;
} 
```

不是你想要的，但尽可能接近:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T05:25:11.130

我认为您想要做的是使用`:focus`伪来保持您的绿色“状态”处于活动状态：

```
button:active, button:focus {
  transition: none;
  box-shadow: inset 0 0 100px green;
  /*background-color: #00f;*/
} 
```

[http://codepen.io/anon/pen/tgJcf](http://codepen.io/anon/pen/tgJcf)

注意：在撰写本文时，这适用于 IE11 和最新的 Webkit/Blink 版本，但不适用于 Firefox。Firefox 确实保持按钮的活动状态，并且可能存在错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:42:49.140

这可以通过向活动按钮状态和基本按钮状态添加不同的转换来仅使用 CSS 来完成。

*   将无转换添加到基本按钮，这意味着到基本状态的转换将是即时的。
*   然后，将所需的转换添加到按钮，这意味着转换到活动状态（鼠标按下）将需要一些时间。

这是一些示例 CSS：[http ://codepen.io/anon/pen/hEmbl](http://codepen.io/anon/pen/hEmbl)

```
button {
  background:#009;
  color:#fff;
  padding:1em;
  border:0;
  border-radius:4px;
  -webkit-transition:none;
}

button:active {
  background:#090;
  -webkit-transition:all 1s;
} 
```

# iphone - 带有动画的 UIView addSubView，但允许旧的底层点击

> ID：14811966
> 
> 赞同：0
> 
> 时间：2013-02-11T12:31:58.040
> 
> 标签：iphone, ios, objective-c

我有一个`myView`响应用户点击的 UIView。
我添加了一个动画视图，使用：

```
[myView addSubView:animatedView]; 
```

但是现在动画视图阻止了水龙头，因为两者都使用相同的`frame` 我如何轻松覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:55:00.897

我认为最好的方法是在视图中声明 UITouchGesture ，当您需要在视图中禁用触摸时，您可以禁用：

一个水龙头的例子：

在您的 .h 文件中声明它：

```
UITapGestureRecognizer* tap; 
```

在你的 .m 文件中

```
tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[yourView addGestureRecognizer:tap]; 
```

当您需要禁用水龙头时，您可以简单：

```
[tap setEnable:NO]; 
```

或删除它：

```
[yourView removeGestureRecognizer:tap]; 
```

这样，当您需要启用/禁用时会更容易，也更容易管理您的触摸。

# iphone - 使用 Sqlite3 数据库在 iPhone 应用程序中显示上周记录和删除以前的记录

> ID：14811969
> 
> 赞同：0
> 
> 时间：2013-02-11T12:32:06.267
> 
> 标签：iphone, database, datetime, sqlite

我想在我的 iPhone 应用程序中显示上周记录并删除以前的记录。

所以我通过使用得到一个星期后的日期时间，

```
//Now
nowDate = [entryDateFormat stringFromDate:[NSDate date]];

//1 week previous
weekDate = [entryDateFormat stringFromDate:[[NSDate date] dateByAddingTimeInterval: -604800.0]]; 
```

然后，执行 SQL 查询，如

```
NSString *selectSQL = [NSString stringWithFormat:@"SELECT * FROM tblTest Where Time between \"%@\" and \"%@\"", weekDate, nowDate]; 
```

所以获得查询的价值::

```
SELECT * FROM tblTest Where Time between "04-02-2013 17:20:36" and "11-02-2013 17:20:36"; 
```

与删除以前的记录相同

```
Delete FROM tblTest Where Time < "04-02-2013 17:20:36"; 
```

因此，它仅适用于当前日期的第 1、第 2 和第 3 天。
它不会针对上个月的日期执行，例如“30-01-2013”​​和“31-01-2013”​​。

我也尝试过：

```
Delete FROM tblTest Where Time < DATE('now','-7 days'); 
```

但没有结果。:(

sqlite端的函数是什么，所以我们可以根据这些函数进行操作，得到上周记录的准确值。？

请帮助我解决这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:41:17.830

在 SQLite 中，时间戳[应该首先与年份字段一起存储](http://www.sqlite.org/datatype3.html#datetime)，即格式为`yyyy-mm-dd hh:mm:ss`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:58:38.293

首先，为了
节省时间，

```
NSTimeInterval currentTimeStamp = [[NSDate date] timeIntervalSince1970];
NSNumber *currentTimeStampObj = [NSNumber numberWithDouble: currentTimeStamp];

[currentTimeStampObj retain]; 
```

并将其作为新的“进入时间”字段存储到数据库中。

在显示数据和删除以前的数据时

```
//Date Formatter
NSDateFormatter *entryDateFormat;

//Now Date & Previous Date
NSString *nowDate, *weekDate;

NSNumber *currentNowTimeStamp, *pastWeekDateTimeStamp;

//Today
nowDate = [entryDateFormat stringFromDate:[NSDate date]];

NSTimeInterval currentTimeStamp = [[NSDate date] timeIntervalSince1970];
currentNowTimeStamp = [NSNumber numberWithDouble:currentTimeStamp];

[currentNowTimeStamp retain];

NSLog(@" Time :::: %@", currentNowTimeStamp);

//Past Week Date
weekDate = [entryDateFormat stringFromDate:[[NSDate date] dateByAddingTimeInterval: -604800.0]];

currentTimeStamp = [[[NSDate date] dateByAddingTimeInterval: -604800.0] timeIntervalSince1970];
pastWeekDateTimeStamp = [NSNumber numberWithDouble: currentTimeStamp];

[pastWeekDateTimeStamp retain];

NSLog(@" Past Week Time :::: %@", pastWeekDateTimeStamp); 
```

询问 ：：

```
NSString *deleteSQL = [NSString stringWithFormat:@"Delete FROM tblTest Where entry time < \"%@\"", pastWeekDateTimeStamp]; 
```

结果 ：：`Delete FROM tblTest Where entry time < "1360392911.010868"`

```
NSString *selectSQL = [NSString stringWithFormat:@"SELECT * FROM tblTest Where Time between \"%@\" and \"%@\"", pastWeekDateTimeStamp, currentNowTimeStamp]; 
```

结果 ：：`SELECT * FROM tblTest Where entry time between "1360392911.010868" and "1360997711.010534"`

我得到了我想要的确切解决方案。

干杯..！！

快乐编码..

# visual-studio-2010 - 运行负载测试时无法从某些服务器获取性能计数器

> ID：14811973
> 
> 赞同：3
> 
> 时间：2013-02-11T12:32:20.120
> 
> 标签：visual-studio-2010, automated-tests, load-testing, performancecounter

我正在使用 Visual Studio 2010 中的内置系统运行负载测试。设置是一个带有四个代理的测试控制器。我正在运行的测试将负载放在应用程序服务器和数据库服务器上。我遇到的问题是我无法从应用程序服务器和数据库服务器上的性能计数器获取值。我已按照[http://msdn.microsoft.com/en-us/library/ms404661%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms404661%28v=vs.100%29.aspx)和[http://blogs.catapultsystems.com/tlingenfelder/archive/2009/上的说明进行操作06/18/performance-counters-timeouts-and-load-testing-with-visual-studio-2008.aspx](http://blogs.catapultsystems.com/tlingenfelder/archive/2009/06/18/performance-counters-timeouts-and-load-testing-with-visual-studio-2008.aspx)以进行故障排除，但无济于事。

使用性能监视器 (perfmon)，我可以连接并从应用程序服务器和数据库上的性能计数器获取值，这些计数器是从几台计算机上测试的。但是在运行负载测试时，我什么也没得到。

我正在尝试获取系统性能计数器，例如 CPU% 和内存使用情况，因此不涉及自定义计数器。

关于我接下来应该做什么的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:41:07.333

主要问题是我没有意识到为了在负载测试期间从计算机获取性能数据，它应该安装一个测试代理（或控制器）。

1.  在所有用于负载测试的机器上安装测试代理并将它们注册到控制器（对我来说，应用服务器和数据库，那些没有安装测试代理）
2.  在 Visual Studio 中的实际负载测试中，从计数器集中删除应用服务器和数据库
3.  再次添加它们
4.  运行测试！

似乎负载测试中对应用服务器和数据库的旧引用没有按预期工作，因此需要删除并再次添加它们。

瞧！性能计数器出现并返回值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T08:53:28.473

我也有同样的问题。我发现的唯一解决方案是删除计数器集中的一些计数器并增加采样间隔（参见[此处](http://msdn.microsoft.com/en-us/library/ms184776.aspx#CounterSampling)）。

我的装备中的另一件事是**角色**：代理将运行测试但不收集数据；这将由我的 Web 服务器完成（在其上安装了一个测试代理）。请看[链接](http://msdn.microsoft.com/en-us/library/dd286743%28v=vs.100%29.aspx)。

# ivy - 如何将 Apache Ivy 与 FREE 和 BASE 计划一起使用？

> ID：14811975
> 
> 赞同：0
> 
> 时间：2013-02-11T12:32:35.033
> 
> 标签：ivy, cloudbees

据我了解，Jenkins Ivy 插件没有随 Cloudbees 的免费和基本计划一起安装。在没有安装这些插件的情况下使用 Ivy 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T20:48:48.070

一种可能的解决方法是添加一个引导目标来下载和安装 ivy jar。

例如：

```
<target name="bootstrap">
   <mkdir dir="${user.home}/.ant/lib"/>
   <get dest="${user.home}/.ant/lib/ivy.jar" src="http://search.maven.org/remotecontent?filepath=org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar"/>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:13:02.623

无论如何，常春藤不是构建工具而是依赖管理器，您的项目需要配置为运行另一个构建器，可能是 ant 或？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:15:42.957

我已经向 Pro 和 Enterprise 层添加了几个与 Ivy 相关的插件。

# php - 如何在 opencart 模块中显示所有产品信息？

> ID：14811976
> 
> 赞同：1
> 
> 时间：2013-02-11T12:32:36.253
> 
> 标签：php, opencart

我是 opencart 的新手，我在 opencart 中创建了一个类似于 latest 模块的模块，但不同之处在于唯一的最新模块显示最新产品，而我的模块适用于所有产品并以随机方式显示产品。这个我的模块工作正常..但是显示每个产品的实际评级时出现问题..现在我想在我的模块中添加评级系统。所以我想知道 whta 应该是 mysql 的正确查询，以获取所有产品信息，如名称、描述、评论、评级、product_id 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T16:14:03.767

你还没有展示你的方法，所以它只是一般的指针

首先你在你的控制器文件中加载 product.php 模型`$this->load->model('catalog/product');`

然后你决定在调用 getProducts 时你的过滤器是什么，如果你不提供任何过滤器，它将返回数据库中的所有产品，假设你决定没有过滤器，然后只传递一个空的数据数组（或者根本不传递任何东西)

```
$data = array(); 
```

然后你调用函数

```
 $results = $this->model_catalog_product->getProducts($data); //or without $data 
```

现在你可以做类似的事情

```
foreach ($results as $result) {
$this->data['products'][] = array(
                    'product_id'  => $result['product_id'],
                    'name'        => $result['name'],
                    'rating'      => $result['rating'],

                ); 
```

现在你可以在你的 tpl 文件中使用它，比如

```
<?php foreach ($products as $product) { ?>
some code here
<?php echo $product['rating']; ?>
<?php } ?> 
```

这是您应该使用的通用方式，并且也很容易，如果您知道 getProducts 函数如何从数据库中取出数据并返回结果，请参阅**目录/模型/目录/product.php 中的 getProducts 函数**

# bash - 编写从管道读取的 bash 脚本

> ID：14811979
> 
> 赞同：14
> 
> 时间：2013-02-11T12:32:43.563
> 
> 标签：bash

我想做这样的事情：

```
cat file.txt | ./myscript.sh 
```

文件.txt

```
http://google.com
http://amazon.com
... 
```

如何读取 myscript.sh 中的数据？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T12:37:23.440

您可以使用`while loop`（逐行处理）来执行此操作，这是此类事情的常用方法：

```
#!/bin/bash

while read a; do
    # something with "$a"
done 
```

有关详细信息，请参阅[http://mywiki.wooledge.org/BashFAQ/001](http://mywiki.wooledge.org/BashFAQ/001)

* * *

相反，如果您想将*整个*文件放入变量中，请尝试执行以下操作：

```
#!/bin/bash

var="$(cat)"
echo "$var" 
```

或者

```
#!/bin/bash

var="$(</dev/stdin)"
echo "$var" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T12:37:48.617

你可以使用这样的东西：

```
while read line; do
  echo $line;
done 
```

在此处进一步阅读：[Bash 脚本，从标准输入管道读取值](https://stackoverflow.com/questions/2746553/bash-script-read-values-from-stdin-pipe)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T12:36:06.980

您可以欺骗`read`从这样的管道接受：

```
echo "hello world" | { read test; echo test=$test; } 
```

甚至写一个这样的函数：

```
read_from_pipe() { read "$@" <&0; } 
```

# symfony - 身份验证：app_dev.php/_wdt/511509b611682 而不是主页

> ID：14811980
> 
> 赞同：7
> 
> 时间：2013-02-11T12:32:45.470
> 
> 标签：symfony

我正在研究 Symfony 2.0 中的安全性，但我遇到了一个无法解释的问题。

我的安全包现在非常简单。

在放置真正的提供者之前，我尝试让一切正常工作。

所以，现在，当我访问网站时，它会按预期向我发送登录表单。我输入用户名和密码，然后，而不是主页，我发送到“/.../app_dev.php/_wdt/511509b611682”（每次不同的数字）。

我的用户未在调试工具栏中标记为已通过身份验证。

如果我去掉网址的末尾，我会到达主页。我的用户似乎在调试工具栏中被识别和验证。

这仅在开发环境中出现。在 prod 环境中，它似乎按预期工作。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-31T14:10:17.047

除了@artworkad 的回答，您必须在主`dev`防火墙*之前*添加防火墙，否则它永远不会匹配：

```
security:
    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        main:
            pattern: ^/
            #... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T17:55:47.280

当您使用开发环境登录时，您将被重定向到`index_dev.php/_wdt/4e95412bc6871`.

WDT aka web 调试工具栏可以通过以下方式从防火墙范围中删除

```
dev:
  pattern:  ^/(_(profiler|wdt)|css|images|js)/
  security: false 
```

实际上它与 SecurityBundle 无关，无论如何它都记录在这里[https://github.com/FriendsOfSymfony/FOSUserBundle/issues/368](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/368)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T15:32:49.873

您也可以将这些行放在 access_control 中：

```
{ path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
{ path: ^/_profiler, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

但我更喜欢只为我的应用程序路线保留我的 access_control。

# java - Java Netbeans：Bufferedimage 无法读取输入文件

> ID：14811981
> 
> 赞同：1
> 
> 时间：2013-02-11T12:32:47.327
> 
> 标签：java, nullpointerexception, bufferedimage

我正在尝试创建一个类，它将图像设置为其变量并告诉主类它是什么图像，然后主类绘制它。基本上有大量的对象在它们存在时会打印出来。我实现了这一点，`ImageIcon`但`BufferedImage`似乎更适合一次绘制许多图像或移动的图像等，所以我想避免使用`ImageIcon`. 主类：

```
package handBasket;

import java.awt.*;
import javax.swing.*;
public class AppStarter  extends JPanel
{
static ImageDisplayerTest idt;
public void paintComponent(Graphics g)
{
    g.drawImage(idt.demoPann, 0, 0, null);
}
public static void main(String[] args)
{        
    JFrame frame = new JFrame();
    frame.setSize(800,600);
    frame.getContentPane().add(new AppStarter());
    frame.setVisible(true);
    frame.setTitle("The Great Graphical Achievement");
    frame.setResizable(false);
    int w = frame.getSize().width;
    int h = frame.getSize().height;
    Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (dim.width-w)/2;
    int y = (dim.height-h)/2;
    frame.setLocation(x,y);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    idt = new ImageDisplayerTest();
    System.out.println(idt.demoPann);
}
} 
```

当图像是`ImageIcon`. 至于要绘制图像的对象，它会创建一个文件，将文件名读入该文件并尝试将该文件传递给该文件，`BufferedImage`但这就是我`NullPointerException`说它无法读取文件的地方。尝试了多个文件和文件类型，没有变化。

```
package handBasket;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

public class ImageDisplayerTest
{
BufferedImage demoPann;
File loadThis;
public ImageDisplayerTest()
        {
            loadThis = new File("hp_small.jpg");
            try 
            {
            demoPann = ImageIO.read(loadThis); 
            } 
            catch (IOException e) 
            {
            System.out.println("wtf");
            }
        }
} 
```

任何建议和意见表示赞赏。

- - -编辑：

在执行 printStackTrace() 时，我得到以下几行，请注意其中一些无论如何都会显示，所以我不确定 printStackTrace() 应该做什么。

至于文件夹结构，一切都在我的项目文件夹包含的文件夹中的 src/handBasket 文件夹中。

```
run:
javax.imageio.IIOException: Can't read input file!
    at javax.imageio.ImageIO.read(ImageIO.java:1301)
    at handBasket.ImageDisplayerTest.<init>(ImageDisplayerTest.java:17)
    at handBasket.AppStarter.main(AppStarter.java:31)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at handBasket.AppStarter.paintComponent(AppStarter.java:12)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5228)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent.paint(JComponent.java:1040)
    at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:39)
    at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:78)
    at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:115)
    at java.awt.Container.paint(Container.java:1967)
    at java.awt.Window.paint(Window.java:3877)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:781)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)
BUILD SUCCESSFUL (total time: 15 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:51:13.600

您需要参考与类路径相关的图像。这通常涉及将其 URI 作为资源获取：

```
URI imageurl = getClass().getResource("hp_small.jpg").toURI(); 
```

因此，对于您上面的测试，类似于：

```
public ImageDisplayedTest() {
    try {
        URI imageurl = getClass().getResource("hp_small.jpg").toURI();
        loadThis = new File(imageurl);

        demoPann = ImageIO.read(loadThis);
        System.out.println("Success");
    } catch (IOException e) {
        System.out.println(e);
    } catch (URISyntaxException e) {
        System.out.println(e);
    }
} 
```

应该为你工作。

# macos - 什么时候为 CALayer 调用 setAnchorPoint: 是安全的？

> ID：14811982
> 
> 赞同：1
> 
> 时间：2013-02-11T12:33:05.207
> 
> 标签：macos, cocoa, nsview, quartz-graphics

我想在我的一个里面设置`anchorPoint`属性。`layer``NSViewController`

我试图设置`anchorPoint`内部`loadView`和`awakeFromNib`；第一次访问`view`my 的属性时，它们都会被`NSViewController`调用。这就是我当前设置`anchorPoint`.

我遇到的问题是，一旦我将视图控制器`view`作为子视图添加到另一个视图（在我的主窗口的某个位置），Cocoa 在内部调用了一个私有方法`NSView`called `_updateLayerGeometryFromView`，然后用默认值覆盖我的 anchorPoint。

所以我的问题是，我可以在不被覆盖的情况下设置`anchorPoint`my的最早点是什么？`layer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:07:50.457

来自[AppKit 发行说明](http://developer.apple.com/library/mac/releasenotes/Cocoa/AppKit.html)（从 Mountain Lion 开始；该链接需要在 10.9 发布时更新）：

> *   在 10.8 上，AppKit 将控制 CALayer 上的以下属性（无论是“layer-hosted”还是“layer-backed”）：geometryFlipped、bounds、frame（隐含）、position、**anchorPoint**、transform、shadow*、hidden、filters、和合成过滤器。... 使用适当的 NSView 覆盖方法来更改这些属性。

我会试试[这个`translateOriginToPoint:`方法](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/translateOriginToPoint%3a)。

# api - 我可以在没有所有更改历史的情况下获得要点吗？

> ID：14811985
> 
> 赞同：1
> 
> 时间：2013-02-11T12:33:13.460
> 
> 标签：api, github, gist

这是获取单一要点的请求 GET /gists/:id [http://developer.github.com/v3/gists/#get-a-single-gist](http://developer.github.com/v3/gists/#get-a-single-gist)

它工作。但是有一个问题：每次我都会获得所有要点更改的历史记录。几天后，有大量数据需要传输。有没有办法只获得最后一个状态，没有历史？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T13:39:55.813

没有用于此的 API。

但是，如果 gist 只有一个文件，您只需对`https://gist.github.com/user/gist-id/raw`.

如果一个 gist 有多个文件，您只需对`https://gist.github.com/user/gist-id/raw/filename`.

# coldfusion - 如何在 ColdFusion 中将数字截断到小数点后 2 位？

> ID：14811988
> 
> 赞同：7
> 
> 时间：2013-02-11T12:33:21.817
> 
> 标签：coldfusion, formatting, decimal

如何获取一些变量并将它们仅输出到小数点后两位，但保持变量本身不变？

我试过

```
NumberFormat(reportData, '0,00') 
```

但数字保持不变。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T12:38:09.423

`,`是千位的分隔符，`0`代表“用零填充”，可以[在官方文档](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_08.html)中阅读。试试这样：

```
NumberFormat(reportData, '9.99'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-11T13:34:45.400

如果您所在的国家/地区恰好有小数点分隔符`,`而不是，`.`那么您应该改用[LSNumberFormat](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d91.html)。与[SetLocale](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fa3.html)结合使用，或指定`locale`函数的属性。例如

```
<cfoutput>#LSNumberFormat(reportData, "0.00", "Swedish")#</cfoutput> 
```

或者

```
<cfscript>setLocale("Swedish");</cfscript>
<cfoutput>#LsNumberFormat(reportData, "0.00")#</cfoutput> 
```

请注意，在`mask`属性中，我们仍然使用`.`小数点分隔符。然后将其映射到瑞典小数点分隔符（逗号）。

# regex - Reg Ex 匹配时间范围

> ID：14811990
> 
> 赞同：0
> 
> 时间：2013-02-11T12:33:28.370
> 
> 标签：regex, expression

我有一个按时间戳保存日志的日志文件。我要做的是读取时间范围之间的某些值。例如从文件的开头和`5:3:55`. 我不擅长正则表达式，想知道如何编写表达式来阅读它。到目前为止，我提出了以下不正确的表达方式。任何示例如何正确编写它？谢谢

```
([0-1]?\d|2[0-3]):([0-5]?\d):([0-5]?\d) 
```

具有范围解决方案的帖子无法满足我的需求，因为它需要花费大量时间并处理文件。虽然我需要从文件时间戳开始而不是某些增量而不是某些单词匹配。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:42:40.707

不要在数学中使用正则表达式！您可以使用它们来解析所有日期（例如，使用您在问题中包含的正则表达式），然后使用解析值与您的给定时间戳进行比较。这就像在词汇上比较数字。

如果你真的需要一个匹配**5:3:34**和**5:3:55**之间每个日期的正则表达式，它需要分别匹配所有可能的数字：

```
/5:3:(3[4-9]|4[0-9]|5[0-5])/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T13:20:55.783

你需要的不仅仅是一个正则表达式（至少要做出一个理智的解决方案）。下面是一个示例程序，演示了 Perl 中的一个简单解决方案：

```
use warnings;
use strict;

my $time_min = '08:19:48';
my $time_max = '12:30:48';

while (1)
{
   print "enter time: ";

   chomp($_ = <STDIN>); 

   if (time_numeric($_) <= time_numeric($time_max) and
       time_numeric($_) >= time_numeric($time_min))
   {
        print "$_ is between $time_min and $time_max\n";
   }
   else
   {
        print "$_ ain't between $time_min and $time_max\n";
   }
}

sub time_numeric 
{
   if ($_[0] =~ /^(\d{1,2}):(\d{1,2}):(\d{1,2})$/)
   {
        return ($3 + $2 * 100 + $1 * 10000);
   }
   else
   {
        die "Invalid time!";
   }
} 
```

它不需要验证时间，只需假设输入是实时的。它也仅适用于 24 小时时间戳。

无论字段中是否有前导零，它都适用于输入。

如果您在 Perl 中工作，还可以考虑使用诸如 的模块`Time::Piece`，[如本答案所示](https://stackoverflow.com/a/8222183/1919238)。

# windows - git checkout 错误：无法创建文件

> ID：14811991
> 
> 赞同：26
> 
> 时间：2013-02-11T12:33:32.087
> 
> 标签：windows, git, filepath, git-checkout

在将 git 存储库从 Linux 克隆到 Windows 系统时，我在结帐阶段收到以下错误：

> $ git clone gituser@serveraddr:/git/git_repo.git git_WA
> 克隆到 'git_WA'...
> gituser@serveraddr 的密码：
> 远程：计数对象：500846，完成。
> 远程：压缩对象：100% (118676/118676)，完成。
> 远程：总计 500846（增量 307739），重复使用 483023（增量 291136）
> 接收对象：100% (500846/500846)，907.54 MiB | 9.04 MiB/s，完成。
> 解决增量：100% (307739/307739)，完成。
> 
> 错误：无法创建文件 RealR************************************************ ****************************************************** ****************************************************** ****************************************************** *************validation.xml（没有这样的文件或目录）
> 检出文件：100％（441329/441329）
> 检出文件：100％（441329/441329），完成。
> 完毕。

案例 2：克隆为裸仓库，在本地从裸仓库中签出所有内容 => 相同的错误。

Case-3：直接克隆C:\中的repo，checkout成功，没有报错。

-> 看起来文件名/文件路径长度限制有问题。

案例 4：从 SVN 存储库签出相同的文件。可以在任何地方结帐，没有任何问题。因此从窗户方面没有问题。（是的，我在 SVN 和 GIT 中都有数据，我刚刚从 SVN 迁移到 GIT）。

因此，问题必须在 msysgit 内，一些文件路径长度限制。可以调整 gitclient/msysgit 中的路径长度吗？

Edit1：*所有操作都使用**TortoiseGIT 客户端 v1.8.0**和**git-bash：git version 1.8.0.msysgit.0 进行了尝试**。*
Edit2：添加了克隆时使用的实际命令。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-06T17:26:30.157

在将项目签出到具有 67- (Windows) 或 76- (cygwin) 字符基本路径的 Windows 目录中时，我遇到了类似的问题 - 当添加到签出文件的路径长度时，它超过了 Windows 的路径 -长度限制：

```
git checkout -f HEAD
error: unable to create file <194-character filepath> (No such file or directory)
fatal: cannot create directory at '<187-character directory path>': No such file
or directory 
```

**我通过将 git 存储库检查到 c:\git 解决了这个问题，该存储库**的长度为 6 或 15 个字符，将最大路径长度保持在 Windows 限制之下。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-01-13T12:22:32.617

尝试：

```
git config --system core.longpaths true 
```

这将允许它检查文件，即使文件路径较长。问题是当您尝试删除它时，因为 Windows 不允许删除长度超过允许阈值的路径。解决方法是重命名本地存储库中的文件夹，以减少路径的总长度。例如，路径为 alpha/beta/gamma/universe.txt，可以限制为 1/2/3/universe.txt，使其长度低于 windows 文件大小阈值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-03T12:33:22.207

许多 Windows API 的文件路径名限制为 260 个符号。所以 git 不能创建名称超过 260 个符号的文件。NTFS 文件系统实际上支持更长的名称（32k），但没有简单的方法允许程序使用长名称。

解决方法 1：将您的项目移动到更靠近磁盘根目录的新位置。优势：

*   一切都应该正常（假设没有路径更长的文件 260）

坏处：

*   您必须更改项目位置

解决方法 2：从更接近磁盘根目录的文件夹中创建一个[Junction](http://en.wikipedia.org/wiki/NTFS_junction_point)到您的项目文件夹，然后从 junction 文件夹执行 git clone。您可以使用`mklink`command 或[Link Shell Extension](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html)来执行此操作。

优势：

*   您可以有长文件名（大于 260）
*   您可以保存项目位置
*   您可以在初始克隆后安全地删除连接（如果您不需要在原始位置处理违反 260 个符号限制的文件）

坏处：

*   连接处的完整文件名仍然必须少于 260 个符号。否则，此解决方案将无济于事。
*   如果要修改长文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T13:58:22.450

[考虑到类似的问题](http://jira.xwiki.org/browse/XWIKI-6591)，我看到的唯一建议是：

> 解决方法：使用[http://www.cygwin.com/](http://www.cygwin.com/)

或者至少检查msysgit的[git-bash 会话中的结帐是否效果更好。](https://github.com/msysgit/msysgit/blob/master/share/WinGit/Git%20Bash.vbs)

* * *

2015 年 5 月更新（2 年后）：

注意：[最新的 2.4.1 git-for-windows 建议](https://github.com/git-for-windows/git/commit/09a8bcad8a278b5d5f42007cfc923453ecd3042b#diff-ba92ef40c548c691816362bbdc35a613L707)：

```
core.longpaths:: 
```

> 在 Git for Windows 中启用对内置命令的长路径 (> 260) 支持。
> 默认情况下禁用此功能，因为 Windows 资源管理器、cmd.exe 和 Git for Windows 工具链（msys、bash、tcl、perl...）不支持长路径。
> 仅当您知道自己在做什么并准备好忍受一些怪癖时才启用此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T01:13:30.767

使用 Windows PowerShell。为我工作。

# extjs4 - 使用 Ext.ux.form.plugin.HtmlEditor 添加动态行

> ID：14811992
> 
> 赞同：1
> 
> 时间：2013-02-11T12:33:33.723
> 
> 标签：extjs4

我在 html 编辑器中创建了一个 html 表。现在我想向表中添加动态行。我尝试使用 Ext.ux.form.HtmlTableEditor 插件。但我不确定如何使用这个插件。有什么解决方案这个？

# android - 当前位置、纬度和经度

> ID：14811995
> 
> 赞同：0
> 
> 时间：2013-02-11T12:33:43.473
> 
> 标签：android, location, latitude-longitude

我的问题是获得纬度和经度。

在模拟器中，我使用：Lat - 54.035795，Long - 21.760029。但是当我打电话`getLatitude()`或`getLongitude()`我得到 54.0 和 21.0。
所以我无法获得两点之间的准确距离。问题是什么？

请帮我。

```
public final class LocationGpsListener implements LocationListener 
{

        private final Context mContext;
        public boolean isGPSEnabled = false;
        boolean isNetworkEnabled = false;
        boolean canGetLocation = false;

        Location location;
        Double latitude;
        Double longitude;

        private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10;
        private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1;

        protected LocationManager locationManager;

        public LocationGpsListener(Context context) {
            this.mContext = context;
            getLocation();
        }

        public Location getLocation() {
            try {
                locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
                isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                Log.v("isGPSEnabled", "=" + isGPSEnabled);

                isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
                Log.v("isNetworkEnabled", "=" + isNetworkEnabled);

                if (isGPSEnabled == false && isNetworkEnabled == false) {

                } else {
                    this.canGetLocation = true;
                    if (isNetworkEnabled) {
                        locationManager.requestLocationUpdates(
                                LocationManager.NETWORK_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        if (locationManager != null) {
                            location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                    if (isGPSEnabled) {
                        if (location == null) {
                            locationManager.requestLocationUpdates(
                                    LocationManager.GPS_PROVIDER,
                                    MIN_TIME_BW_UPDATES,
                                    MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                            Log.d("GPS Enabled", "GPS Enabled");
                            if (locationManager != null) {
                                location = locationManager
                                        .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                                if (location != null) {
                                    latitude = location.getLatitude();
                                    longitude = location.getLongitude();
                                }
                            }
                        }
                    }
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

            return location;
        }

        public void stopUsingGPS() {
            if (locationManager != null) {
                locationManager.removeUpdates(LocationGpsListener.this);
            }
        }

        public double getLatitude() {
            if (location != null) {
                latitude = location.getLatitude();
            }
            return latitude;
        }

        public double getLongitude() {
            if (location != null) {
                longitude = location.getLongitude();
            }
            return longitude;
        }

        public boolean canGetLocation() {
            return this.canGetLocation;
        }

        public void showSettingsAlert() {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

            alertDialog.setTitle("GPS");
            alertDialog.setMessage("GPS is ENABLED:");

            alertDialog.setPositiveButton("Settings",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            Intent intent = new Intent(
                                    Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                            mContext.startActivity(intent);
                        }
                    });

            alertDialog.setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.cancel();
                        }
                    });
            alertDialog.show();
        }

        @Override
        public void onLocationChanged(Location location) {
        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }

} 
```

我使用：

```
mGPS = new LocationGpsListener(this);

if(mGPS.canGetLocation ){

    longitude = mGPS.getLatitude();
    latitude = mGPS.getLongitude();         
}else{
     longitude = 21.230000;
     latitude = 53.230000;
}

Location l1 = new Location("lok a");
l1.setLatitude(latitude);
l1.setLongitude(longitude);

Location l2 = new Location("lok b");
l2.setLatitude(54.035679);
l2.setLongitude(21.784879); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:33:10.477

我无法重现您的问题，但是我可以为您提供代码的改进版本：

```
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

public final class LocationGpsListener implements LocationListener {

    public boolean isGPSEnabled = false;

    private Location location;

    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10;
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1;

    protected LocationManager locationManager;

    public LocationGpsListener(Context context) {
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        // TODO check is network/gps is enabled and display the system settings
        // see
        // https://github.com/unchiujar/Umbra/blob/master/src/main/java/org/unchiujar/umbra/activities/FogOfExplore.java#L599
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES,
                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);

        location = new Location("fake");
        location.setLatitude(0);
        location.setLongitude(0);
    }

    public void stopLocationUpdates() {
        if (locationManager != null) {
            locationManager.removeUpdates(LocationGpsListener.this);
        }
    }

    public double getLatitude() {
        return location.getLatitude();
    }

    public double getLongitude() {
        return location.getLongitude();
    }

    @Override
    public void onLocationChanged(Location location) {
        this.location = location;
    }

    @Override
    public void onProviderDisabled(String provider) {
        // NO-OP
    }

    @Override
    public void onProviderEnabled(String provider) {
        // NO-OP
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // NO-OP
    }

} 
```

您发布的代码没有正确使用侦听器模式（我的也没有，但这是一个改进）。位置逻辑应该在`onLocationChanged`方法中，而不是在其他地方的随机方法中。在

我建议您阅读：[http ://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

此外，永远不要使用`catch(Exception e)`它会导致各种非常难以追踪的错误。 [为什么 Catch(Exception) 几乎总是一个坏主意？](https://stackoverflow.com/questions/2416316/why-is-the-catchexception-almost-always-a-bad-idea) [http://today.java.net/article/2006/04/04/exception-handling-antipatterns# catchException](http://today.java.net/article/2006/04/04/exception-handling-antipatterns#catchingException)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:16:01.797

我认为问题在于您对所使用的位置提供程序不够具体，并且您正在恢复课程准确性。

[`Criteria`](http://developer.android.com/reference/android/location/Criteria.html)获取用于设置所需精度的最佳位置提供程序：

```
locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_HIGH);  
locationManager.getBestProvider(criteria, true); 
```

或者也可以使用[`requestLocationUpdates`](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)将 Criteria 作为参数的覆盖。

检查上述内容，并且`"android.permission.ACCESS_FINE_LOCATION"`在您的清单中也有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:50:25.960

我的问题是在我的 GPS 设置好的价值之前获取位置

我遇到了一个有趣的问题（当应用程序崩溃时）：“记住，检查设备是否有 GPS”:)

# download - 如何在vaadin的新窗口中打开资源？

> ID：14811996
> 
> 赞同：0
> 
> 时间：2013-02-11T12:33:45.393
> 
> 标签：download, window, vaadin

我正在尝试在 vaadin 中生成 pdf。我的问题是生成的 pdf 在当前窗口（浏览器选项卡）中打开。我试过了：

```
 String filename = contentDataName + ".pdf";
    StreamResource resource = new StreamResource(source, filename, vaadinApplication);
    resource.getStream().setContentType("application/pdf");
    resource.getStream().setFileName(filename);
    resource.getStream().setParameter("Content-Disposition", "attachment; filename=\"" + filename + "\"");
    resource.getStream().setParameter("Content-Length", Integer.toString(fopOutput.size()));
    resource.setCacheTime(5000);
    resource.setMIMEType("application/pdf");

    mainWindow.open(resource);
    mainWindow.open(resource, "_blank", true); 
```

它不起作用。我错过了什么？我也试过

```
mainWindow.open(resource, "_blank"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-23T14:30:24.433

以下为我工作（Vaadin 7）

```
 ClickListener getHelpButtonListener(final Button helpButton)
{
log.debug("+++++++++ setButtonListener ...++++++++++++++===.........");
final ClickListener helpButtonlistener = new ClickListener()
{
    @Override
    public void buttonClick(ClickEvent event)
    {

    StreamSource source = new StreamSource()
    {
        public java.io.InputStream getStream()
        {
        try
        {
            String helpFilePath = basepath + "/datafiles/";
            File helpFile = new File(helpFilePath);
            FileInputStream helpFileInputStream = new FileInputStream(helpFile);
            return helpFileInputStream;
        } catch (FileNotFoundException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
        }
    };
    String filename = basepath + "/datafiles/help.pdf";
    StreamResource resource = new StreamResource(source, filename);
    resource.setMIMEType("application/pdf");
    resource.getStream().setParameter("Content-Disposition", "attachment; filename=" + filename);
    BrowserWindowOpener opener = new BrowserWindowOpener(resource);
    opener.extend(helpButton);
    }

};
return helpButtonlistener;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:13:39.110

我在我的项目中做了同样的工作，你可以在下面看到我的函数，它在 Vaadin 的窗口中显示“.pdf”。（忽略对象和函数的奇怪命名，因为它只是我项目的代码的和平）

```
private void publishReport(final String path){
    StreamSource s = new StreamSource() {

        public java.io.InputStream getStream() {
            try {
                File f = new File(path);
                FileInputStream fis = new FileInputStream(f);
                return fis;
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }
    };

    StreamSource ss = new StreamSource(){

        @Override
        public InputStream getStream() {
            // TODO Auto-generated method stub
            return null;
        }

    };

    StreamResource r = new StreamResource(s, "appointmentScheduleDate.pdf", app);
    r.setCacheTime(-1);
    Embedded e = new Embedded();
    e.setSizeFull();
    e.setType(Embedded.TYPE_BROWSER);

    r.setMIMEType("application/pdf");

    e.setSource(r);
    e.setHeight("650px");
    plaintReoprtWindow = new Window("Report");
    plaintReoprtWindow.center();
    plaintReoprtWindow.setModal(true);
    plaintReoprtWindow.setHeight("700px");
    plaintReoprtWindow.setWidth("900px");
    plaintReoprtWindow.addComponent(e);
    app.getMainWindow().addWindow(plaintReoprtWindow);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:12:12.580

It should work that way. Maybe this might be helpful: [https://vaadin.com/forum/-/message_boards/view_message/1572816](https://vaadin.com/forum/-/message_boards/view_message/1572816)?