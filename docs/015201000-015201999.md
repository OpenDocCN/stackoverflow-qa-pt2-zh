# StackOverflow 问答 15201000-15201999

# java - Jnlp 文件不工作

> ID：15201005
> 
> 赞同：0
> 
> 时间：2013-03-04T11:55:55.310
> 
> 标签：java, database, jnlp, java-web-start

我已经创建了一个桌面应用程序，所以我打算使用项目文件夹中的 dist.zip 分发软件。当我从 netbeans 运行程序时，一切正常。当我打开 launch.jnlp 文件时，框架会打开，但它不会监听 actionlistener 并且没有显示任何内容，但 jar 文件正在工作。但是，如果我打开 jar 文件而不是 jnlp 文件，则 .class 文件正在打开。但它从命令提示符运行

```
java -jar projectname.jar 
```

该应用程序与数据库有连接。错误会在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:00:26.030

这是我成功使用的 JNLP。

```
<?xml version="1.0" encoding="utf-8"?> 
<jnlp 
  codebase="http://www.domain.com/tools" 
  href="livechat.jnlp"> 
  <information> 
    <title>Live Chat</title> 
    <vendor>vendor</vendor> 
    <homepage href="www.domain.com"/> 
    <description>Live Chat Application</description> 
    <icon href="images/logo.png"/> 
    <icon kind="splash" href="images/logo.png"/> 
    <shortcut online="true">
      <desktop/>
      <menu submenu="sub menu name"/>
    </shortcut>
  </information> 
  <security> 
      <all-permissions/> 
  </security> 
  <update check="always" policy="always"/>
  <resources> 
    <j2se version="1.6+" java-vm-args="-esa -Xnoclassgc"/>
    <jar href="lib/livechat-100.jar"/> 
  </resources> 
  <application-desc main-class="package.mainclass"/> 
</jnlp> 
```

设置的方式是 jnlp 文件存储在 www.domain.com\tools\ 和 jar 文件存储在 www.domain.com\tools\lib\

在这一行，你想找到你的主类。如果您使用包（com.domain.application），您将使用 com.domain.application.mainclass

否则，您只需将主类放在引号中。

```
<application-desc main-class="package.mainclass"/> 
```

确保你也签署了你的 jar 文件。[罐子签名](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)

* * *

您不必创建 XML。如果您打开记事本并将其粘贴到空白页中，然后将其另存为 filename.jnlp，它将正确保存。

您的 JNLP 文件在很大程度上取决于您存储它的 Web 服务器/服务器的文件结构，以及您的应用程序的包名称（如果您创建了一个），例如：

我将使用以下信息创建一个名为 applet1 的 java applet： 包：com.digitalck.applet1 mainclass：Applet1.java（您的主类是包含您的公共静态 void main() 方法的文件） 服务器结构：www.domain。 com/工具/库

我将 jnlp 文件存储在 www.domain.com/tools 和 SIGNED jar 文件在 www.domain.com/tools/lib

在 JNLP 文件中：

```
codebase="domain.com/tools" 
href="livechat.jnlp">      (this assumes the file is in my codebase location) 
<jar href="lib/livechat-100.jar"/> 
<application-desc main-class="com.digitalck.applet1.Applet1"/> 
```

希望这有助于澄清，我已经展示了要修改的要点，以便在不知道有关您的应用程序/小程序或如何存储文件的任何其他信息的情况下让您的工作正常工作。

[如何创建 JNLP 文件](https://www.google.com/search?q=jnlp&aq=f&oq=jnlp&aqs=chrome.0.57j5j0l2j60l2.1809&sourceid=chrome&ie=UTF-8#hl=en&safe=off&sclient=psy-ab&q=create%20jnlp&oq=create%20jnlp&gs_l=serp.3..35i39j0l3.4048.4710.0.5037.7.7.0.0.0.4.143.728.3j4.7.0.les;..0.0...1c.1.5.psy-ab.AxAqIqd4WHc&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43148975,d.aWc&fp=443df112168ae7b8&biw=1680&bih=989)

# clojure - clojure中符号后的点是什么意思

> ID：15201013
> 
> 赞同：4
> 
> 时间：2013-03-04T11:56:19.740
> 
> 标签：clojure

我正在阅读 Programming Clojure 并在 src/examples/gulp.clj 遇到以下代码。我无法理解 StringBuilder、FileInputStream 等之后的点是什么意思 -

```
(ns examples.gulp
  (:import (java.io FileInputStream InputStreamReader BufferedReader)))
(defn gulp [src]
  (let [sb (StringBuilder.)]
    (with-open [reader (-> src
                         FileInputStream.
                         InputStreamReader.
                         BufferedReader.)]
      (loop [c (.read reader)]
        (if (neg? c)
          (str sb)
          (do
            (.append sb (char c))
            (recur (.read reader)))))))) 
```

任何人都可以请阐明一些光。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T12:18:41.913

类名后面的点只是调用类的构造函数的特殊语法。

```
(macroexpand '(StringBuilder. "foo"))
;=> (new StringBuilder "foo") 
```

阅读[http://clojure.org/java_interop](http://clojure.org/java_interop)。

# javascript - 如何改进我的 Javascript 购物车代码？请原谅原始代码

> ID：15201015
> 
> 赞同：-3
> 
> 时间：2013-03-04T11:56:28.790
> 
> 标签：javascript, performance, shopping-cart

在过去的几天里，我试图了解 Javascript。这是我的第一个正确的 Javascript，我想知道是否有人可以看到我可以改进我的代码并最终改进我的 Javascript 知识。我很欣赏我的代码到目前为止可能看起来有点原始。

有一件事我很困惑如何完成我的“calcUnitPriceF”函数，这样我就不会在每个产品案例中创建一个数组。这些价格将很快来自数据库。

我希望下面的代码非常清楚它的作用。

```
<script type="text/javascript">
function update(){

var total = 0.00;
var calcUnitPrice, quantity;

var myForm = document["getElementById"]("totalform");
var justQuantity = myForm["quantity[]"];
var justPrice = myForm["productPrice[]"];
var unitPrice = myForm["unitPrice[]"];
var linePrice = myForm["linePrice[]"];

for(var i =0; i < justQuantity.length; i++)
{
 justQuantity[i].value = Math.floor(justQuantity[i].value);
 quantity = justQuantity[i].value;
 calcUnitPrice = 0;

 if(isNaN(quantity) || quantity < 0) {
   justQuantity[i].value ="0";
 }
 else
 {
  calcUnitPrice = calcUnitPriceF(justPrice[i].value,quantity);

  document.getElementById('unitPrice[' + i + ']').innerHTML = '£' + calcUnitPrice.toFixed(2);
  document.getElementById('linePrice[' + i + ']').innerHTML = '£' + (calcUnitPrice * justQuantity[i].value).toFixed(2); 
  total = (total + (quantity* calcUnitPrice));
 }
}

document.getElementById("delivery").innerHTML = "Your Order Delivery is: £2.50";
document.getElementById("Totprice2").innerHTML = "Your Order Total is: £" + total.toFixed(2);

}

function calcUnitPriceF(product,quantity)
{
 switch(product)
  {
   case '0':
    return 0;
   case '1':
    var values = [5, 4 , 15.30 , 10 , 12 ]; // Structure(Exceeding Quantity Price,Quantity Under, Price)

    for(var i = 1; i< values.length; i=i+2)
     if(quantity < values[i])
      return values[i+1];
    return values[0];
   case '2':
    return 75;
   }
}
</script>

<body>

<form id="totalform">
<select id ="productPrice[]" onchange="update()">
  <option value="0">Please Select One</option>
  <option value="1">Product 1</option>
  <option value="2">Product 2</option>
</select>
QUANTITY <input type = "text" id = "quantity[]" onChange="update()" >
UNIT PRICE <p id="unitPrice[0]" style="display:inline;">£0.00</p>
LINE PRICE <p id="linePrice[0]" style="display:inline;">£0.00</p><br />

<select id="productPrice[]" onchange="update()">
  <option value="0">Please Select One</option>
  <option value="1">Product 1</option>
  <option value="2">Product 2</option>
</select>
QUANTITY <input type = "text" id = "quantity[]" onChange="update()" >
UNIT PRICE <p id="unitPrice[1]" style="display:inline;">£0.00</p>
LINE PRICE <p id="linePrice[1]" style="display:inline;">£0.00</p><br />

<span id ="delivery">Your Order Delivery is: £0.00</span><br />
<span id ="Totprice2">Your Order Total is: £0.00</span>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:10:48.127

The number one thing I would do is change the JS approach.

```
var project = {};
project.ShoppingCart = function() {
    this.total = 0;
    this.justQuantity = ...;
    this.currentQuantity = 0;
};
/**
 * Updates the current quantity in the shopping cart.
 * @param {!number} quantity The quantity to update with.
 * @return {void} nothing.
 */
project.ShoppingCart.prototype.updateQuantity = function(quantity) {
    // this is how to check for a number properly.
    if (!isNaN(quantity) && parseFloat(quantity) && isFinite(quantity)) {
        this.currentQuantity = quantity;
    } else {
        console.log("Invalid quantity");
    };
}; 
```

Now in order to use the above.

```
var shoppingCart = new project.ShoppingCart(); 
```

Look at Object Oriented Javascript, how to properly use that, stop poluting the global namespace and randomly writing functions, comment your code and validate things properly.

# selenium - 为什么我的代码无法连接到 Selenium Remote Webdriver？

> ID：15201016
> 
> 赞同：1
> 
> 时间：2013-03-04T11:56:32.857
> 
> 标签：selenium, selenium-webdriver, selenium-rc

我正在尝试使用“Selenium Remote Webdriver”进行自动化测试，但在尝试连接远程服务器时出现异常。

**例外是：**

```
Unexpected error. System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:4444
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
   at System.Net.HttpWebRequest.GetRequestStream()
   at OpenQA.Selenium.Remote.HttpCommandExecutor.Execute(Command commandToExecute) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\HttpCommandExecutor.cs:line 109
   at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 836 
```

**我写的代码是：**

```
 DesiredCapabilities capabilities = DesiredCapabilities.Firefox();
            capabilities.Platform = new Platform(PlatformType.Vista);
            capabilities.SetCapability("api_key", "REPLACE_API_KEY");
            capabilities.SetCapability("api_secret", "REPLACE_API_SECRET");  

            var remoteAddress = new Uri("http://122.176.112.91:4444/wd/hub");

           // ... but only if it supports javascript
            capabilities.IsJavaScriptEnabled = true;

            // Get a handle to the driver. This will throw an exception
            // if a matching driver cannot be located
            IWebDriver driver = new RemoteWebDriver(remoteAddress, capabilities);
            driver.Manage().Timeouts().ImplicitlyWait(new TimeSpan(0, 0, 30));

            // Query the driver to find out more information
            ICapabilities actualCapabilities = ((RemoteWebDriver)driver).Capabilities; 
```

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T04:48:02.033

堆栈跟踪表明本地机器正在积极拒绝任何连接。仔细检查防火墙是否允许在所有端口上使用 Firefox。

不幸的是，即使打开防火墙，我也遇到了这个问题： [C# + VisualStudio + Multiple WebDriver instances = SocketExceptions](https://stackoverflow.com/questions/27029988/c-sharp-visualstudio-multiple-webdriver-instances-socketexceptions)

# shader - Pix，无法调试着色器

> ID：15201021
> 
> 赞同：1
> 
> 时间：2013-03-04T11:56:45.550
> 
> 标签：shader, directx-9

我无法让 Pix 调试着色器。我以前用过它完全没问题，但今天我在尝试调试顶点或像素着色器时一直收到这个错误：

之前成功的调用失败的furing播放：

EID：8 调用：IDirect3D9::CreateDevice() HRESULT:D3DERR_NOTAVAILABLE

如需更多信息，请单击“帮助”。

帮助提出了这一点：

```
"Playback failure is the error state that occurs following a successful timing capture.

There are many reasons why a call that succeeded at capture time can fail during PIX playback. Here are some common causes:

If the run file was captured on a system with different capabilities or more video memory. Also, PIX Win will use up more video memory than the original title did when it allowed debugging.

It can also occur if your Direct3D control panel settings are different from when the run file was captured. Some Direct3D 9 calls only fail when the debug runtime is active.

In the case of Direct3D 9 playback, the mesh viewer and shader debugging potentially use different device settings than the original application that can cause playback failures. For example, the shader debugging has to use a reference device. In this situation, there is a possibility that the HW device supports settings that are not supported under the reference device like StretchRect() filters. " 
```

我真的不明白为什么它会在一天而不是下一天起作用，我将调查我的显卡驱动程序，但我对如何检查上述错误没有真正的了解。

我还应该补充一点，我正在将 Pix 与 DirecX 9 XNA 应用程序一起使用。我已经尝试过测试调试版本和发布版本。我已禁用 D3D 分析并正在使用帧捕获。

如果有人有任何想法，请帮忙！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:25:18.297

只是出于好奇，如果您使用软件而不是硬件来进行顶点处理，它是否有效？

IE

Direct3D.CreateDevice（D3DADAPTER_DEFAULT，D3DDEVTYPE_HAL，HWindow，D3DCREATE_SOFTWARE_VERTEXPROCESSING，D3DInit，设备）；

如果自上次运行代码以来没有其他任何变化，则可能是您的驱动程序（或 DirectX 控制面板中的某些设置）已被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:41:40.333

该错误表明硬件故障，为了解决这个问题，我认为您可能真的需要恢复系统一些东西。

但是在调试着色器方面，它不一定是 XNA 有界的，您甚至可以使用 @crazylpfan 建议的软件管道创建一个存根 D3D 程序，然后您可以将您的 PIX 附加到该程序进行调试。

# c# - wpf 列表框项目从另一个 wpf 窗口添加

> ID：15201026
> 
> 赞同：0
> 
> 时间：2013-03-04T11:56:53.887
> 
> 标签：c#, wpf, blend

有谁知道如何从另一个 WPF 窗口将项目添加到 WPF 列表框（混合创建的窗口）？

我有以下代码

```
mainpage mp = new mainpage();
        mp.listbox1.Items.Add(namebox.Text); 
```

感谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:04:26.367

您可以在-namespace中使用`Application`-class 。`System.Windows`利用

```
System.Windows.Application app = System.Windows.Application.Current;
System.Windows.WindowCollection wincol = app.Windows;
//iterate through collection and find your window 
```

当然，您需要处理线程，因为通常每个窗口都是在自己的线程中创建的。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.application.windows.aspx)以获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:01:50.607

两种解决方案：

1.  创建一个带参数的构造函数，并将它们添加到构造函数中

    mainpage mp = new mainpage(namebox.Text);

公共主页（字符串 newItem）{ this.listbox1.Items.Add(namebox.Text); }

1.  公开列表并访问列表

# .htaccess - htaccess，将多个页面重写到同一页面，但将原始值保留在某处

> ID：15201031
> 
> 赞同：0
> 
> 时间：2013-03-04T11:57:06.680
> 
> 标签：.htaccess, mod-rewrite, rewrite

我一直在摆弄 htaccess 和 RewriteEngine，但我无法完全理解它......

例如，我正在构建一个希望用户能够访问的网站`/portfolio/typography`。但是我不想为这个投资组合中的每个类别创建单独的页面，因此我想重写（重定向？）所有转到这个目录的请求`/portfolio/`并`index.php`从那里加载这个类别的适当项目。

关于我如何做到这一点的任何想法？我用它来将所有请求重定向到`/portfolio/`：

```
RewriteCond %{REQUEST_URI} !/portfolio/$ [NC]
RewriteCond %{REQUEST_URI} !\.(jpe?g?|png|gif) [NC]
RewriteRule .* /portfolio/ [R=302,L] 
```

提前致谢， Cas Cornelissen

**编辑**

也许我应该注意到我的网站根目录中有另一个 .htaccess 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:17:02.983

好的，所以我找到了自己问题的答案...

似乎以下工作：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php/$1?%{QUERY_STRING} [L] 
```

# eclipse - 如何使用 Play 调试测试！2.0

> ID：15201034
> 
> 赞同：9
> 
> 时间：2013-03-04T11:57:11.843
> 
> 标签：eclipse, junit, playframework, playframework-2.0, jpda

我正在使用 Play 2 设置一个项目，并且我已经能够使用 Eclipse 远程调试来调试 webapp。不过，我也想在我的测试中使用断点。有谁知道如何设置单元测试的远程调试？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T08:39:32.983

这是因为 Play (SBT) 为测试分叉了单独的 JVM，而没有远程调试所需的选项。您至少有两个选择：禁用新 JVM 的分叉，将其他选项传递给用于测试的 JVM。

要禁用 fork，请修改 Build.scala，添加`fork in (Test) := false`，请参阅下面的完整 Build.scala 示例：

```
import sbt._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "so1"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here
    Keys.fork in (Test) := false
  )
} 
```

要传递其他选项，请添加您可以使用以下代码：

```
 val main = play.Project(appName, appVersion, appDependencies).settings(
    Keys.javaOptions in (Test) += 
    "-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9998"
  ) 
```

您需要将 IDE 配置为使用端口 9998 来附加到测试。此外，每次运行测试时都需要重新附加调试器，这可能很不方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:45:52.960

我使用 eclipse 或者更确切地说是 scala ide

而不是运行“播放”我运行这个命令“播放调试”然后播放会打印这个消息：

```
Listening for transport dt_socket at address: 9999 
```

将出现正常的 $ 播放提示。然后输入这个命令“运行”

从eclipse，我设置断点并单击“运行->调试配置...”在左侧查找“远程Java应用程序”并单击“启动新配置”（小图标，左上角，看起来像一个“新文档”图标）。默认端口为 8000，将其更改为 9999 并更改机器，很可能您将使用 localhost。并单击 [调试] 按钮

应该这样做。只需在浏览器上正常加载，`http://localhost:9000`只需等待应用程序到达断点即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T13:33:55.140

通过在测试环境中禁用分叉和并行执行，您可以调试测试。只有你应该在你的`build.sbt`文件末尾添加这些行：

```
parallelExecution in Test := false
fork in Test := false 
```

# java - 泛型基础

> ID：15201041
> 
> 赞同：2
> 
> 时间：2013-03-04T11:57:30.857
> 
> 标签：java, generics

为什么以下不起作用？

```
Vector<? extends SomeClass> v = new Vector<SomeClass>();  
SomeClass e = new SomeClass();  
v.add(e); 
```

我收到一个编译错误：

> Vector 类型中的方法 add(capture#1-of ? extends SomeClass) 不适用于参数 (SomeClass)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:00:17.263

[具有从一个类型扩展的通用通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)的集合不允许您添加到该类型`Collection`。

由于编译器不知道您要添加的确切*类型*，`SomeClass`因此它不允许添加。一个例外是`null`可以表示任何类型的`Object`.

回答您的评论：虽然您无法*添加*到`Collection`，但不能将其描述为*只读*，因为仍然可以*删除* `Objects`。

要允许添加`Objects`，您需要使用已知类型：

```
Vector<SomeClass> v = new Vector<SomeClass>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:10:46.410

问题基本上是通过声明它是一个集合`v`或*它*的一个*子类*。编译器无法对容器实际保存的特定类型做出任何假设，即使分配是在同一行上完成的。据编译器所知，可能已创建为. 这就是为什么它拒绝**将**实例（或其他任何东西）放入集合中。但是，您可以**从中获取**元素。`Vector<? extends SomeClass>``SomeClass` **`new Vector<SomeClass>()``v``new Vector<SubClassOfSomeClass>()` **`SomeClass`**`SomeClass`******

 ******如果您希望能够**将**元素放入集合中，则声明`v`为`Vector<? super SomeClass>`，这样您就可以说它是容器`SomeClass` *或其**超类*之一。然后编译器知道一个`SomeClass`实例肯定适合这样的集合。
但是，您不能从该集合中获取**元素**`SomeClass`，因为编译器对其中元素的类型一无所知（除了它是 的某个超类`SomeClass`）。根据它的定义，`v`它也可能只是`Object`s 的集合。

这被称为**put/get 原则，在其他类似**[的](https://stackoverflow.com/q/1292109/1276804)帖子中也有详细讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:00:32.793

这是解释[here](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)。这样声明的列表实际上是一个只读列表，但它比普通`List<AbstractClass>`列表更灵活。

如果您想使用抽象类作为模板，只需像这样直接使用它：`List<SomeClass> list`.

考虑阅读[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)，有很多关于泛型逻辑的信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T12:26:52.883

你的问题解释应该没有问题。我在以下代码中理解了您的问题。

```
import java.util.*;
class Test
{
  int x;
}
public class Demo
{
   public static void main(String args[])
   {
      Vector<Test> vect = new Vector<Test>();

      Test t1 = new Test();
      Test t2 = new Test();
      t1.x = 10;
      t2.x = 20;

      vect.add(t1);
      vect.add(t2);

      for(Test t : vect)
      {
         System.out.println(t.x);
      }  
  }
} 
```

[我在Vector Play With](http://way2java.com/collections/vector-play-with/)中读到了这种类型的噱头。******

# ipad - 条形按钮项目未从 UISplitViewController 委托的 splitViewController:willHideViewController 中显示：

> ID：15201044
> 
> 赞同：3
> 
> 时间：2013-03-04T11:57:41.793
> 
> 标签：ipad, uikit, uisplitviewcontroller, uibarbuttonitem, uinavigationitem

所以，我有一个拆分视图控制器，主控制器设置为委托。旋转到纵向视图时，我想添加一个按钮以将弹出窗口显示到导航栏。我的`splitViewController:willHideViewController:withBarButtonItem:forPopoverController:`委托方法被成功调用，并且栏按钮项不是零，但是当我将它设置为导航项上的`leftBarButtonItem`或时，什么也没有发生。`rightBarButtonItem`导航项是正确的，因为设置`titleView`或添加其他条形按钮项是有效的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T11:57:41.793

所以事实证明，提供给委托方法的条形按钮项可能没有标题。如果它没有标题，它不会显示为空按钮，但根本不会。所以解决这个问题是：

```
barButtonItem.title = @"MyButtonTitle"; 
```

在将其添加为`leftBarButtonItem`or之前`rightBarButtonItem`，它会显示并按预期工作。

# objective-c - NSNumberFormatter 错误结果

> ID：15201050
> 
> 赞同：2
> 
> 时间：2013-03-04T11:58:08.317
> 
> 标签：objective-c, nsnumberformatter

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:09:02.283

# java - 将 System.out 的输出重构为 PrintStream

> ID：15201055
> 
> 赞同：-1
> 
> 时间：2013-03-04T11:58:31.720
> 
> 标签：java, refactoring

如何更改`System.out`我用来检查结果的方法。
我需要测试这个方法。最好在输出为`PrintStream`.
怎么能解决这个问题？

**代码：**

```
private void scan(File file) {
        Scanner scanner = null;
        int matches = 0;

        try {
            scanner = new Scanner(file);
        } catch (FileNotFoundException e) {
            System.out.println("File Not Found.");
            e.printStackTrace();
        }

        while (scanner.hasNext())
            if (scanner.next().equals(whatFind)) {
                matches++;
            }

        if (matches > 0) {
            String myStr = String.format(
                    "File: %s - and the number of matches " + "is: %d",
                    file.getAbsolutePath(), matches);
            System.out.println(myStr);
        }
    } 
```

**问题：**

*   如何将输出重构`System.out`为`PrintStream`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:01:07.343

尝试使用这个
`PrintWriter out = new PrintWriter(System.out);`

最后不要忘记关闭它。
`out.close();`

注意：`out println()`比`System.out.println()`

**更新**

```
import java.io.PrintStream;
import java.io.PrintWriter;

public class TimeChecker 
{
    public static void main(String[] args) 
    {
        /**
         * Normal System.out.println
         */
        long start = System.currentTimeMillis();
        for(int i=1; i<1000000000; i++);
        long end = System.currentTimeMillis();
        System.out.println((end-start));

        /**
         * Using PrintWriter
         * 
         * Note: The output is displayed only when you write "out.close()"
         * Till then it's in buffer. So once you write close() 
         * then output is printed
         */
        PrintWriter out = new PrintWriter(System.out);
        start = System.currentTimeMillis();
        for(int i=1; i<1000000000; i++);
        end = System.currentTimeMillis();
        out.println((end-start));

        /**
         * Using PrintStream
         */
        PrintStream ps = new PrintStream(System.out, true);
        System.setOut(ps);
        start = System.currentTimeMillis();
        for(int i=1; i<1000000000; i++);
        end = System.currentTimeMillis();
        ps.println((end-start));

        // You need to close this for PrintWriter to display result
        out.close();
    }

} 
```

这将使您了解它们如何工作以及彼此不同。
希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:16:23.120

试试这样： PrintStream 匿名对象，它不会保证关闭流。但 PrintWriter 保证。

```
new PrintStream(System.out).print(str); 
```

这个答案是我从[PrintStream 编程](http://way2java.com/io/printstream/)中得到的。

# vb.net - 在 DirectShow 中更改分辨率和过滤器

> ID：15201056
> 
> 赞同：1
> 
> 时间：2013-03-04T11:58:32.663
> 
> 标签：vb.net, winforms, windows-8, camera, directshow

我正在使用 DirectShow（这对我来说很新）在 VB.NET 2010 中为 Windows 8 平板电脑制作 Windows 表单应用程序。在我的代码中，我从内置的 8Mp 摄像头/网络摄像头获取视频并保存图片。

目前保存的图片为 640x480 像素，边缘呈锯齿状。

谁能帮我提高质量？我正在寻找捕捉平滑的 1024x768 像素图片的通用技术。

大多数论坛帖子都与播放视频文件有关，因此欢迎提供任何帮助。

我期待着您的回复

# android - Android Skydrive (LiveSdk) AssertionError (Unknown SkyDriveObject type) 通过点击 Documents

> ID：15201057
> 
> 赞同：1
> 
> 时间：2013-03-04T11:58:40.913
> 
> 标签：android, onedrive, live-sdk

[我使用来自https://github.com/liveservices/LiveSDK-for-Android](https://github.com/liveservices/LiveSDK-for-Android)的 LiveSdk 示例。我在配置文件中输入了我的 ClientID，编译并启动了示例应用程序。现在我得到：

```
java.lang.AssertionError: Unknown SkyDriveObject type 
```

如果我登录并尝试打开 SkyDrive 文档。移动上传访问没有任何错误。任何想法都会有所帮助。谢谢你。

这是完整的跟踪：

```
E/AndroidRuntime(8872): FATAL EXCEPTION: main
E/AndroidRuntime(8872): java.lang.AssertionError: Unknown SkyDriveObject type
E/AndroidRuntime(8872): at com.microsoft.live.sample.skydrive.SkyDriveObject.create(SkyDriveObject.java:75)
E/AndroidRuntime(8872): at com.microsoft.live.sample.skydrive.SkyDriveActivity$9.onComplete(SkyDriveActivity.java:746)
E/AndroidRuntime(8872): at com.microsoft.live.LiveConnectClient$OperationObserver.onComplete(LiveConnectClient.java:249)
E/AndroidRuntime(8872): at com.microsoft.live.LiveConnectClient$OperationObserver.onComplete(LiveConnectClient.java:1)
E/AndroidRuntime(8872): at com.microsoft.live.ApiRequestAsync$OnCompleteRunnable.run(ApiRequestAsync.java:46)
E/AndroidRuntime(8872): at com.microsoft.live.ApiRequestAsync.onPostExecute(ApiRequestAsync.java:166)
E/AndroidRuntime(8872): at com.microsoft.live.ApiRequestAsync.onPostExecute(ApiRequestAsync.java:1)
E/AndroidRuntime(8872): at android.os.AsyncTask.finish(AsyncTask.java:631)
E/AndroidRuntime(8872): at android.os.AsyncTask.access$600(AsyncTask.java:177)
E/AndroidRuntime(8872): at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
E/AndroidRuntime(8872): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(8872): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(8872): at android.app.ActivityThread.main(ActivityThread.java:5041)
E/AndroidRuntime(8872): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(8872): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(8872): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(8872): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(8872): at dalvik.system.NativeStart.main(Native Method) 
```

# c - CMake条件预处理器在代码上定义

> ID：15201064
> 
> 赞同：26
> 
> 时间：2013-03-04T11:59:16.750
> 
> 标签：c, cmake, preprocessor

我正在将 makefile 项目迁移到 CMake。第一次编写 makefile 的人已经完成了一个模块，用于在包含文件中写入某些值。

有一个包含 config_in.h 的主 config.h 文件。config.h 文件包含如下内容：

```
#ifndef USE_FEATURE_A
#define USE_FEATURE_A 0
#endif

#ifndef USE_FEATURE_B
#define USE_FEATURE_B 0
#endif 
```

在makefile中有一个像`with_feature_a`config_in.h这样写的假目标

```
#define USE_FEATURE_A 1 
```

这样有人可以输入

```
make with_feature_a
make 
```

获得正确的构建。

我想使用这个代码库但使用 CMake 来复制这样的东西。我尝试了网上建议的几种方法，但我没有得到它的工作。

```
set_target_properties(with_feature_a PROPERTIES COMPILE_DEFINITIONS 
    "WITH_FEATURE_A=1"
) 
```

这不起作用，因为如果我运行

```
make with_feature_a 
```

我`with_feature_a`在预处理器命令行中看不到。

我所做的第二次尝试是直接编写一个文件，内容设置为我想要的任何内容，但我不明白如何将`file()`命令连接到我的目标。

我把它放在我的 CMakeLists.txt

```
file(WRITE 
local/config_in.h 
    "#define WITH_FEATURE_A 1"
) 
```

但这并不是每次都执行，我不知道如何将其设置为单个目标。

任何帮助表示赞赏。感谢您阅读所有这些内容。对不起，长篇大论:)

更新

[这里](https://stackoverflow.com/a/15212881/1350961)提供的解决方案是解决方案道路上的一大进步。问题是不允许递归定义。我举个例子：

在 CMakeLists.txt 我放置：

```
if (WITH_FEATURE_A)
MESSAGE(STATUS "WITH_FEATURE_A")
add_definitions(-DUSE_FEATURE_A=1)
    add_definitions(-DWITH_FEABURE_B=1)
endif()

if (WITH_FEABURE_B)
MESSAGE(STATUS "WITH_FEATURE_B")
add_definitions(-DUSE_FEATURE_D=1)
endif()

if (WITH_FEABURE_C)
MESSAGE(STATUS "WITH_FEATURE_C")
add_definitions(-DUSE_FEATURE_D=1)
endif()

if (WITH_FEABURE_D)
MESSAGE(STATUS "WITH_FEATURE_D")
endif() 
```

在这种情况下，如果我使用 -DWITH_FEATURE_A=1 执行 cmake，我很想在输出中看到：

```
WITH_FEATURE_A
WITH_FEATURE_B
WITH_FEATURE_D 
```

实际上这段代码只是打印

```
WITH_FEATURE_A 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-04T23:07:18.653

您可以通过避免创建虚拟目标和删除配置文件来简化事情。相反，如果您在调用 CMake（或通过 CMake GUI）时通过命令行传递要求，则只能运行一次 make。

例如，您可以将以下内容添加到您的 CMakeLists.txt 中：

```
option(WITH_FEATURE_A "Option description" ON)
option(WITH_FEATURE_B "Option description" OFF)

if(WITH_FEATURE_A)
  add_definitions(-DUSE_FEATURE_A)
endif()
if(WITH_FEATURE_B)
  add_definitions(-DUSE_FEATURE_B)
endif() 
```

默认情况下，如果您只运行 CMake，它将设置 CMake 变量`WITH_FEATURE_A`，`ON`然后将其`USE_FEATURE_A`作为预处理器定义添加到构建中。 `USE_FEATURE_B`在代码中未定义。

这相当于`#define USE_FEATURE_A`在您的代码中执行。

如果你真的需要相当于

```
#define USE_FEATURE_A 1
#define USE_FEATURE_B 0 
```

然后在您的 CMakeLists.txt 中，您可以执行以下操作：

```
option(WITH_FEATURE_A "Option description" ON)
option(WITH_FEATURE_B "Option description" OFF)

if(WITH_FEATURE_A)
  add_definitions(-DUSE_FEATURE_A=1)
else()
  add_definitions(-DUSE_FEATURE_A=0)
endif()
if(WITH_FEATURE_B)
  add_definitions(-DUSE_FEATURE_B=1)
else()
  add_definitions(-DUSE_FEATURE_B=0)
endif() 
```

要从命令行更改这些默认值，只需执行（例如）：

```
cmake . -DWITH_FEATURE_A=OFF -DWITH_FEATURE_B=ON
make 
```

一旦通过命令行以这种方式设置了变量，它就会被缓存并保持不变，直到在命令行上用不同的值覆盖它，或者在构建根目录中删除 CMakeCache.txt 文件。

### 对更新的回应：

正如@Peter 指出的那样，您似乎混淆了 CMake 变量（`WITH_FEATURE...`那些）和预处理器定义（`USE_FEATURE...`那些）。您可以按照建议首先解决选项之间的所有依赖关系，然后设置生成的预处理器定义，或者在这种流程非常简单的情况下，只需一次性完成所有操作：

```
if(WITH_FEATURE_A)
  message(STATUS "WITH_FEATURE_A")
  add_definitions(-DUSE_FEATURE_A=1)
  set(WITH_FEATURE_B ON)
endif()

if(WITH_FEATURE_B)
  message(STATUS "WITH_FEATURE_B")
  add_definitions(-DUSE_FEATURE_B=1)
  set(WITH_FEATURE_D ON)
endif()

if(WITH_FEATURE_C)
  message(STATUS "WITH_FEATURE_C")
  add_definitions(-DUSE_FEATURE_C=1)
  set(WITH_FEATURE_D ON)
endif()

if(WITH_FEATURE_D)
  message(STATUS "WITH_FEATURE_D")
  add_definitions(-DUSE_FEATURE_D=1)
endif() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-01T21:57:46.207

我偶然发现了这个问题，我想我分享了另一个选择：[`TARGET_COMPILE_DEFINITIONS`](https://cmake.org/cmake/help/latest/command/target_compile_definitions.html#command:target_compile_definitionshttp://). 您可以在 CMakeLists.txt 文件中有两个目标，每个配置一个，并且有类似这样的内容

```
ADD_EXECUTABLE (versionA, ...)
TARGET_COMPILE_DEFINITIONS (versionA, PUBLIC -DWITH_FEATURE_A=1 -DWITH_FEATURE_B=0)

ADD_EXECUTABLE (versionB, ...)
TARGET_COMPILE_DEFINITIONS (versionB, PUBLIC -DWITH_FEATURE_A=0 -DWITH_FEATURE_B=1) 
```

这告诉 cmake 添加宏的预处理器定义`WITH_FEATURE_A`和`WITH_FEATURE_B`（具有适当的值），就像您在 *pp 文件中定义它们一样。然后你可以告诉 make 编译哪个版本：

```
make versionA
make versionB 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-05T16:36:58.860

听起来您想介绍您的选项之间的关系。如果您将步骤分开，这将更容易。首先解决关系，然后在结果上设置 C 定义。请记住 WITH_FEATURE_A 是一个 cmake 变量，而 USE_FEATURE_A 是 C 预处理器定义集，带有 ADD_DEFINITIONS：

```
# Specify the inter-feature dependencies
if (WITH_FEATURE_A)
    # A requires B because <somereason>
    set(WITH_FEATURE_B ON)
endif()

if (WITH_FEATURE_B)
    set(WITH_FEATURE_D ON)
endif()

if (WITH_FEATURE_C)
    set(WITH_FEATURE_D ON)
endif()

# Now generate the C defines for passing the options to the compiler
if (WITH_FEATURE_A)
    MESSAGE(STATUS "WITH_FEATURE_A")
    add_definitions(-DUSE_FEATURE_A=1)
endif()

if (WITH_FEATURE_B)
    MESSAGE(STATUS "WITH_FEATURE_B")
    add_definitions(-DUSE_FEATURE_B=1)
endif()

if (WITH_FEATURE_C)
    MESSAGE(STATUS "WITH_FEATURE_C")
    add_definitions(-DUSE_FEATURE_C=1)
endif()

if (WITH_FEATURE_D)
    MESSAGE(STATUS "WITH_FEATURE_D")
    add_definitions(-DUSE_FEATURE_D=1)
endif() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-06T21:17:17.370

`configure_file`可用于此。例如，在`CMakeLists.txt`：

```
if(WITH_FEATURE_A)
    set(USE_FEATURE_A 1)
    # Feature A should enable feature B
    set(WITH_FEATURE_B ON)
endif()

if(WITH_FEATURE_B)
    set(USE_FEATURE_B 1)
    # Feature B should enable feature D
    set(WITH_FEATURE_D ON)
endif()

if(WITH_FEATURE_C)
    set(USE_FEATURE_C 1)
    # Feature C should enable feature D, too
    set(WITH_FEATURE_D ON)
endif()

if(WITH_FEATURE_D)
    set(USE_FEATURE_D 1)
endif()

configure_file(config.h.in config.h) 
```

在`config.h.in`您可以将 CMake 变量转换为定义：

```
#cmakedefine USE_FEATURE_A 1
#cmakedefine USE_FEATURE_B 1
#cmakedefine USE_FEATURE_C 1

/* You can use the values of the cmake variables too, using @<var>@. Ex: */
#cmakedefine USE_FEATURE_D @USE_FEATURE_D@ 
```

运行`cmake -DWITH_FEATURE_A=1`时，生成的 config.h 将是：

```
#define USE_FEATURE_A 1
#define USE_FEATURE_B 1
/* #undef USE_FEATURE_C */

/* You can use the values of the cmake variables too, using @<var>@: */
#define USE_FEATURE_D 1 
```

参考：

*   [https://cmake.org/cmake/help/latest/command/configure_file.html](https://cmake.org/cmake/help/latest/command/configure_file.html)
*   [https://cmake.org/cmake/help/latest/guide/tutorial/index.html#adding-a-library-step-2](https://cmake.org/cmake/help/latest/guide/tutorial/index.html#adding-a-library-step-2)
*   有关利用此功能的项目示例，请参阅[https://github.com/Cisco-Talos/clamav-devel/blob/dev/0.104/CMakeLists.txt](https://github.com/Cisco-Talos/clamav-devel/blob/dev/0.104/CMakeLists.txt)

# python - 如何从外部文件中列出 python 中的数字？

> ID：15201066
> 
> 赞同：1
> 
> 时间：2013-03-04T11:59:22.420
> 
> 标签：python, file

外部文件的内容是这样的：

```
Ricky, 12
Sachin, 45
Brian, 2
Monty, 1 
```

我基本上想要做的是能够在 python 中阅读它并能够对其进行排序，因此它的得分最低，得分最高。

这是我到目前为止得到的代码：

```
def SaveTopScores():
  return HiScores.rsplit('(',1)[1]

  with open("HiScores.txt", "r")as file:
    HiScoreslist = HiScores.read().splitlines()

  HiScoreslist.sort()

  HiScoreslist.sort(key=HiScore)

  for HiScore in HiScoreslist:
    print(HiScore) 
```

我仍然是 python 的新手，确实需要帮助。请纠正我哪里错了，如果我完全错了，如果是，我解决问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:04:12.913

有一些列表推导：

```
with open("HiScores.txt") as hiscores:
    scores = [line.split(',') for line in hiscores if line.strip()]
scores = [(name.strip(), int(score)) for name, score in scores]
scores.sort(key=lambda s: s[1], reversed=True)

for name, score in scores:
    print('{:<20} {:>10}'.format(name, score)) 
```

这个：

1.  作为上下文管理器 ( `with ... as ...`) 打开文件，因此它会自动关闭
2.  循环分割每一行的文件（前提是该行不为空）
3.  将文件中的每个 2 值条目转换为剥离字符串和整数
4.  根据每个元组中的第二个值（分数）对文件进行排序，反转结果（最高分优先）
5.  打印格式化的每个条目（在 20 个字符的区域中将每个名称向左对齐，在 10 个字符的字段中将每个分数向右对齐）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:03:35.417

所以，有点像这样？

```
def scores(fn):

    data = []
    with open(fn) as f:
        for ln in f:
            name, score = ln.strip().split(',')
            data.append((int(score.strip()), name))

    for score, name in sorted(data, reversed=True):
        print name, score 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:12:07.363

在不过多更改原始代码的情况下，这应该可以工作。如果您需要解释任何部分，请告诉我。

```
with open("HiScores.txt", "r") as fin:
    HiScores = fin.read().splitlines()

HiScoresList = []

for score in HiScores:
    name, score = score.split(', ')
    score = int(score.strip())
    HiScoresList.append((name, score))

# Look at two score entries, and compare which score is larger
def BestScore(a, b):
   return cmp(b[1], a[1])

HiScoresList.sort(BestScore)

for HiScore in HiScoresList:
    print(HiScore) 
```

印刷：

```
('Sachin', 45)
('Ricky', 12)
('Brian', 2)
('Monty', 1) 
```

# javascript - 如何在具有预定义属性的表中添加新行和列？

> ID：15201070
> 
> 赞同：0
> 
> 时间：2013-03-04T11:59:34.620
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试使用 jQuery 向我的表中添加新行和列，但是在添加新行和列时，表的 css 属性丢失，即新添加的行不会出现表边框。这是我的代码：

```
 //Add new rows
     $('#btn3 li a:eq(0)').on('click', function (){

     var numcols = $('#tab1 tr:eq(0) td').length;
     var row = document.createElement('tr');

     //Insert name
     var name_td = document.createElement('td');
     row.appendChild(name_td);
     name_td.appendChild(document.createTextNode(name));

     //fill the rest with empty td's
     for (var i=1; i < numcols; i++) {
         row.appendChild(document.createElement('td'));
     }

     $('#tab1').append(row);
     }); 

   //Add new coloumn

   $('#btn3 li a:eq(1)').on("click", function (){
      $('#tab1').find('tr').each(function(){
        $(this).append('<td></td>');
        });
     }); 
```

html代码在这里：

```
<table class="table table-bordered" id="tab1">
    <thead class="mbhead">
       <tr class="mbrow">
          <th></th>
          <th>A</th>
          <th>B</th>
          <th>C</th>
          <th>D</th>
          <th>E</th>
          <th>F</th>
          <th>G</th>
          <th>H</th>
          <th>I</th>
          <th>J</th>
          </tr>
   </thead>
<tbody>
   <tr>
     <td class="crow">1</td>
     <td>asd</td>
     <td></td>
     <td></td>
     <td></td>
     <td></td>
     <td></td>
     <td>ddd</td>
     <td></td>
     <td></td>
     <td></td>
  </tr>
  <tr>
    <td class="crow">2</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td class="crow">3</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td class="crow">4</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
 </tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:05:16.067

问题是你的 tr 0 是 0 长度，因为它是一个thead，所以你可能需要：

```
var numcols = $('#tab1').find('thead th').length; 
```

这是一个代码示例（修改了一下）[http://jsfiddle.net/XdMqD/1/](http://jsfiddle.net/XdMqD/1/)

这是代码： 注意：我没有你所有的布局，所以我创建了几个按钮：

```
$('#btn3').on('click', function () {
    var name = "Feidrich";
    var numcols = $('#tab1').find('thead th').length;
    var row = $('<tr />');
    //Insert name
    var name_td = '<td >' + name + numcols + '</td>';
    row.append(name_td);
    //fill the rest with empty td's
    for (var i = 1; i < numcols; i++) {
        $('<td />').appendTo(row);
    }
    row.appendTo('#tab1');
});

//Add new coloumn

$('#btn4').on("click", function () {
    $('#tab1').find('tr').each(function () {
        $(this).append('<td>&nbsp;</td>');
    });
}); 
```

编辑注意：我不知道你的 CSS，所以我使用了：

```
.table-bordered {
    border:solid lime 2px;
}
.table-bordered td {
    border:solid green 2px;
} 
```

EDIT2：修复列添加 - 注意我添加了一个空白标题 - 你可以看到你想要其他东西的地方：

```
$('#btn4').on("click", function () {
    $('#tab1').find('tr').eq(0).append('<th>&nbsp</th>')
    var mycontent = $('#tab1').find('tr:not(:eq(0))'); //.not(':eq(0)');
    mycontent.each(function () {
        $(this).append('<td>&nbsp;</td>');
    });
}); 
```

更新了这个：http: [//jsfiddle.net/XdMqD/2/](http://jsfiddle.net/XdMqD/2/)

# javascript - 如何在更改时获取所选文件的完整路径 如何在使用选择文件时获取文件的完整路径  但 filePath var 包含only name所选文件，而不是full path. 我在网上搜索过，但出于安全原因，浏览器（FF、chrome）似乎只给出了文件名。 有没有其他方法可以获取所选文件的完整路径？ $txtTree[0]="/"; foreach($treeArray as $branch){ if(isset($txtTree[$branch['parent_id']])) { $txtTree[$branch['id']] = $txtTree[$branch['parent_id']] . $branch['name']. "/"; } } print_r($txtTree); Array ( [0] => / [1] => /New Folder/ [2] => /New Folder/New Folder2/ [3] => /New Folder/New Folder2/New Folder3/ [6] => /New Folder6/ [7] => /New Folder6/New Folder7/ [8] => /New Folder6/New Folder8/ ) javascriptjqueryfile-uploadfilepath 4 13 回答 13 This answer is useful 197 For security reasons browsers do not allow this, i.e. JavaScript in browser has no access to the File System, however using HTML5 File API, only Firefox provides a mozFullPath property, but if you try to get the value it returns an empty string: $('input[type=file]').change(function () { console.log(this.files[0].mozFullPath); }); https://jsfiddle.net/SCK5A/ So don't waste your time. edit: If you need the file's path for reading a file you can use the FileReader API instead. Here is a related question on SO: Preview an image before it is uploaded. 于 2013-03-04T12:09:13.360 回答 This answer is useful 115 尝试这个： 它会给你一个临时路径而不是准确的路径，如果你想在这个 jsfiddle 示例中显示选定的图像，你可以使用这个脚本（通过 selectng 图像以及其他文件尝试）： - JSFIDDLE 这是代码：- HTML:-  

JS：- $('#i_file').change( function(event) { var tmppath = URL.createObjectURL(event.target.files[0]); $("img").fadeIn("fast").attr('src',URL.createObjectURL(event.target.files[0])); $("#disp_tmp_path").html("Temporary Path(Copy it and try pasting it in browser address bar) --> **["+tmppath+"]**"); }); 它不完全是您正在寻找的东西，但它可能会在某个地方为您提供帮助。 于 2014-07-18T06:07:47.523 回答 This answer is useful 18 你不能。安全性会阻止您对客户端计算机的文件系统一无所知 - 它甚至可能没有！它可以是 MAC、PC、平板电脑或支持互联网的冰箱——你不知道、不知道也不会知道。让您拥有完整路径可以为您提供有关客户端的一些信息——尤其是在它是网络驱动器的情况下。 事实上，您可以在特定条件下获得它，但它需要 ActiveX 控件，并且在 99.99% 的情况下无法正常工作。 无论如何，您都不能使用它将文件恢复到原始位置（因为您完全无法控制下载的存储位置，或者即使它们被存储），所以实际上它对您来说并没有多大用处。 于 2013-11-22T05:47:41.700 回答 This answer is useful 18 您不能这样做 - 出于安全考虑，浏览器不允许这样做。 当使用输入 type=file 对象选择文件时，value 属性的值取决于用于显示网页的安全区域的“将文件上传到服务器时包括本地目录路径”安全设置的值包含输入对象。 仅当启用此设置时，才会返回所选文件的完全限定文件名。禁用该设置时，Internet Explorer 8 将本地驱动器和目录路径替换为字符串 C:\fakepath\，以防止不适当的信息泄露。 和别的 );您在更改事件函数结束时错过了这一点。 也不要为更改事件创建函数，而是按如下方式使用它，  于 2013-03-04T12:05:10.187 回答 This answer is useful 12 你是这个意思吗？ $('#i_file').change( function(event) { var tmppath = URL.createObjectURL(event.target.files[0]); $("img").fadeIn("fast").attr('src',tmppath); }); 于 2014-11-23T19:10:16.800 回答 This answer is useful 12 您可以使用以下代码获取上传文件的有效本地 URL：  于 2016-03-30T14:26:41.593 回答 This answer is useful 9 一个有趣的注意事项：虽然这在网络上不可用，但如果你在 Electron 中使用 JS，那么你可以这样做。 使用标准 HTML5 文件输入，您将收到所选文件的额外path属性，其中包含真实文件路径。 完整文档在这里：https ://github.com/electron/electron/blob/master/docs/api/file-object.md 于 2019-11-18T14:23:54.733 回答 This answer is useful 2 您可以，如果您可以选择上传整个文件夹  更改事件将包含： .target.files[...].webkitRelativePath: "FOLDER/FILE.ext" 但它不包含整个绝对路径，只包含相对路径。Firefox 也支持。 于 2017-03-04T09:31:36.300 回答 This answer is useful 1 you should never do so... and I think trying it in latest browsers is useless(from what I know)... all latest browsers on the other hand, will not allow this... some other links that you can go through, to find a workaround like getting the value serverside, but not in clientside(javascript) Full path from file input using jQuery How to get the file path from HTML input form in Firefox 3 于 2013-03-04T12:09:07.120 回答 This answer is useful 0 可以使用 FileReader API 来更改 img 元素的 src。 https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL 于 2021-04-04T08:05:00.840 回答 This answer is useful -1 文件元素有并且数组调用files它包含你需要的所有必要的东西 var file = document.getElementById("upload"); file.addEventListener("change", function() { for (var i = 0; i < file.files.length; i++) { console.log(file.files[i].name); } }, false); 于 2017-12-13T07:56:23.680 回答 This answer is useful -3 $('input[type=file]').change(function () { console.log(this.files[0].path); }); 这是正确的形式。 于 2021-08-01T13:57:07.823 回答 This answer is useful -3 您只能通过 IE11 和 MS Edge 获取要上传的所选文件的完整路径。 var fullPath = Request.Form.Files["myFile"].FileName; 于 2019-04-01T11:03:21.500 回答 Related 1 c++ - 在应用程序文件夹中安装 C/C++ 库“IGRAPH” 2 titanium - 日期选择器中的字体未调整大小 1 ruby-on-rails - 通过 Axlsx 添加到电子表格时正确设置 Excel 列宽 1 c - 使用C函数获取不同R对象的类属性时不一致 0 iphone - 在 iPad 上运行的 iPhone iOS7 应用程序 3 java - How do I inherit variables from specific instance of a superclass? 1 programming-languages - Ada 语言及其标准库是否存在“循环依赖”？ 1 java - Android - Frequency isn't correct after compute FFT 4 sql - 在查询的选择部分计算带有条件的结果 1 c# - 如何在不迭代的情况下获取、排序和计数舍入插值数据？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15201071
> 
> 赞同：295
> 
> 时间：
> 
> 标签：javascript, jquery, file-upload, filepath

如何在使用选择文件时获取文件的完整路径`<input type=‘file’&gt;`

```
<input type="file" id="fileUpload">
<script type="text/javascript">
function getFilePath(){
     $('input[type=file]').change(function () {
         var filePath=$('#fileUpload').val(); 
     });
}
</script> 
```

但 filePath var 包含`only name`所选文件，而不是`full path`.
我在网上搜索过，但出于安全原因，浏览器（FF、chrome）似乎只给出了文件名。
有没有其他方法可以获取所选文件的完整路径？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-03-04T12:09:13.360

For security reasons browsers do not allow this, i.e. JavaScript in browser has no access to the File System, however using HTML5 File API, only Firefox provides a `mozFullPath` property, but if you try to get the value it returns an empty string:

```
$('input[type=file]').change(function () {
    console.log(this.files[0].mozFullPath);
}); 
```

[https://jsfiddle.net/SCK5A/](https://jsfiddle.net/SCK5A/)

So don't waste your time.

edit: If you need the file's path for reading a file you can use the [FileReader](https://developer.mozilla.org/en/docs/Web/API/FileReader) API instead. Here is a related question on SO: [**Preview an image before it is uploaded.**](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded)

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2014-07-18T06:07:47.523

尝试这个：

它会给你一个临时路径而不是准确的路径，如果你想在这个 jsfiddle 示例中显示选定的图像，你可以使用这个脚本（通过 selectng 图像以及其他文件尝试）： -

**[JSFIDDLE](https://jsfiddle.net/dwebexperts/4FGg8/1/)**

这是代码：-

HTML:-

```
<input type="file" id="i_file" value=""> 
<input type="button" id="i_submit" value="Submit">
<br>
<img src="" width="200" style="display:none;" />
<br>
<div id="disp_tmp_path"></div> 
```

JS：-

```
$('#i_file').change( function(event) {
    var tmppath = URL.createObjectURL(event.target.files[0]);
    $("img").fadeIn("fast").attr('src',URL.createObjectURL(event.target.files[0]));

    $("#disp_tmp_path").html("Temporary Path(Copy it and try pasting it in browser address bar) --> <strong>["+tmppath+"]</strong>");
}); 
```

它不完全是您正在寻找的东西，但它可能会在某个地方为您提供帮助。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-11-22T05:47:41.700

你不能。安全性会阻止您对客户端计算机的文件系统一无所知 - 它甚至可能没有！它可以是 MAC、PC、平板电脑或支持互联网的冰箱——你不知道、不知道也不会知道。让您拥有完整路径可以为您提供有关客户端的一些信息——尤其是在它是网络驱动器的情况下。

事实上，您可以在特定条件下获得它，但它需要 ActiveX 控件，并且在 99.99% 的情况下无法正常工作。

无论如何，您都不能使用它将文件恢复到原始位置（因为您完全无法控制下载的存储位置，或者即使它们被存储），所以实际上它对您来说并没有多大用处。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-04T12:05:10.187

您不能这样做 - 出于安全考虑，浏览器不允许这样做。

> 当使用输入 type=file 对象选择文件时，value 属性的值取决于用于显示网页的安全区域的“将文件上传到服务器时包括本地目录路径”安全设置的值包含输入对象。
> 
> 仅当启用此设置时，才会返回所选文件的完全限定文件名。禁用该设置时，Internet Explorer 8 将本地驱动器和目录路径替换为字符串 C:\fakepath\，以防止不适当的信息泄露。

**和别的**

`);`您在更改事件函数结束时错过了这一点。

也不要为更改事件创建函数，而是按如下方式使用它，

```
<script type="text/javascript">

    $(function()
    {
        $('#fileUpload').on('change',function ()
        {
            var filePath = $(this).val();
            console.log(filePath);
        });
    });

</script> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-11-23T19:10:16.800

你是这个意思吗？

```
$('#i_file').change( function(event) {
var tmppath = URL.createObjectURL(event.target.files[0]);
    $("img").fadeIn("fast").attr('src',tmppath);       
}); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-03-30T14:26:41.593

您可以使用以下代码获取上传文件的有效本地 URL：

```
<script type="text/javascript">    
    var path = (window.URL || window.webkitURL).createObjectURL(file);
    console.log('path', path);
</script> 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-11-18T14:23:54.733

一个有趣的注意事项：虽然这在网络上不可用，但如果你在 Electron 中使用 JS，那么你可以这样做。

使用标准 HTML5 文件输入，您将收到所选文件的额外`path`属性，其中包含真实文件路径。

完整文档在这里：[https ://github.com/electron/electron/blob/master/docs/api/file-object.md](https://github.com/electron/electron/blob/master/docs/api/file-object.md)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-04T09:31:36.300

您可以，如果您可以选择上传整个文件夹

```
<input type="file" webkitdirectory directory multiple/> 
```

更改事件将包含：

```
.target.files[...].webkitRelativePath: "FOLDER/FILE.ext" 
```

但它不包含整个绝对路径，只包含相对路径。Firefox 也支持。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-04T12:09:07.120

you should never do so... and I think trying it in latest browsers is useless(from what I know)... all latest browsers on the other hand, will not allow this...

some other links that you can go through, to find a workaround like getting the value serverside, but not in clientside(javascript)

[Full path from file input using jQuery](https://stackoverflow.com/questions/3489133/full-path-from-file-input-using-jquery)
[How to get the file path from HTML input form in Firefox 3](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-04T08:05:00.840

可以使用 FileReader API 来更改 img 元素的 src。

[https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL](https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-12-13T07:56:23.680

文件元素有并且数组调用`files`它包含你需要的所有必要的东西

```
var file = document.getElementById("upload");

file.addEventListener("change", function() {
    for (var i = 0; i < file.files.length; i++) {
        console.log(file.files[i].name);
    }
}, false); 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2021-08-01T13:57:07.823

```
$('input[type=file]').change(function () {
    console.log(this.files[0].path);
}); 
```

*这是正确的形式*。

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2019-04-01T11:03:21.500

您只能通过 IE11 和 MS Edge 获取要上传的所选文件的完整路径。

```
var fullPath = Request.Form.Files["myFile"].FileName; 
```

# actionscript-3 - Actionscript 3 显示测验结果

> ID：15201077
> 
> 赞同：-3
> 
> 时间：2013-03-04T11:59:58.967
> 
> 标签：actionscript-3, flash-cs5

我想做一个测验，最后向一个人展示他/她选择特定大学课程的品质。测验将提出 10 个问题，每个问题有 2 个答案，点击答案后，将获得特定课程的积分。

例如，问题可能是“您想与计算机一起工作，还是与人一起工作？”

回答计算机分数将在 Informatica、设计和编辑课程中获得 回答人分数将在医生、社会工作者等课程中获得（例如，我只是在这里命名）

我希望人们通过测验，回答问题，最后看看他们在每门课程中获得了多少分，看看哪些课程最适合他们的潜力。

我的问题是我现在有 1 个问题作为示例和一个“结果”框架。

在第一个问题框架上，我有以下带有两个按钮的代码；

```
stop();

btn1.addEventListener(MouseEvent.CLICK, release1);

btn2.addEventListener(MouseEvent.CLICK, release2);

var option1:Number = 0;

var option2:Number = 0;

function release1(){

option1 += 1;

gotoAndStop(2);

}

function release2(){

option2 += 1;

gotoAndStop(2);

} 
```

现在我想在第二帧上显示选择的结果，它有 twqo 动态文本框（代表课程的框），代码如下；

```
txt1.text = option1.toString();

txt2.text = option2.toString(); 
```

在我看来，这应该给我结果....但是当我玩它时，我明白了

ArgumentError：错误 #1063：TEST_FLA::MainTimeline/release1() 上的参数差异

如何让结果显示在动态文本框中？另外，当我玩这个东西时，它一直卡在第 1 帧，不会转到第 2 帧。

**奖励问题：**是否有可能使用 Actionscript 3 在条形图中显示结果？因为我不知道从哪里开始这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:24:53.357

您收到参数不匹配错误，因为 release1 需要 0 个参数，但它正在接收`MouseEvent`. 更改`function release1()`为`function release1(e:MouseEvent)`Same 适合您的`release2`功能。

为了显示条形图，您可以使用`Graphics`API 来绘制线条和填充矩形：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html)

# google-analytics - 将 Google 分析代码添加到 php 网站的位置

> ID：15201082
> 
> 赞同：2
> 
> 时间：2013-03-04T12:00:13.580
> 
> 标签：google-analytics

将 Google 分析代码添加到 php 网站时，我是仅将代码添加到索引页面、创建的每个页面还是仅添加到客户旅程中的正面页面？最佳做法是什么？感谢您提前回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:04:07.877

您想要分析的所有页面，在正面页面上添加代码。最佳做法是创建一个文件“analytics.php”并将代码粘贴到那里，然后添加

`<?php include_once("analytics.php"); ?>`

到所有正面页面

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-01T05:08:18.370

**在您的 Google Analytics（分析）帐户中：**

*转到主页-> 管理-> 在属性下单击跟踪信息->*

我通常将我的放在服务器中 partials/header.php 的子目录中，这样它就会进入我在主目录中创建的每个页面。

这取自 03/2014 的 Google Analytics（可能会改变）

**PHP 实现**（可选）

使用上面的代码创建一个名为“analyticstracking.php”的 PHP 文件，并将其包含在每个 PHP 模板页面中。然后，在每个模板页面的开始标记之后立即添加以下行：

```
<?php include_once("analyticstracking.php") ?> 
```

**动态内容实现**（可选）

使用通用的包含或模板来粘贴上面的代码，而不是手动将其添加到每个页面。WAP 站点 - 用于较旧的功能手机可选

如果您有一个为不支持 JavaScript 的旧功能手机构建的站点，或者如果您由于其他原因无法使用 JavaScript，则可以从[此处下载服务器端代码库。](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:04:55.463

在您要跟踪的每个页面上添加代码（通常是您网站中的每个页面）。如果这是一个动态（通过 PHP）生成的网站，您很可能有模板文件或常见的页眉/页脚文件（至少应该有），因此您可以在其中插入代码，或使用分析代码创建一个单独的文件并使用包括（这甚至在分析界面中提到，在让您获取 GA 代码的页面上）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-07T19:57:03.447

您可以将相同的代码放在 header.php 中，您可以在其中初始化 ga（设置帐户 api 密钥等）。并在整个网站中使用它。

# java - 在 Android 中处理事件的最佳方式

> ID：15201087
> 
> 赞同：14
> 
> 时间：2013-03-04T12:00:22.397
> 
> 标签：java, android, event-handling

我知道这似乎是一个重复的问题，但我真的无法找到相关主题的好答案。

关于什么是`OnClick`处理`Button`.
以下是我遇到的一些选项：

### 1 - 在方法上以编程方式定义侦听器`OnCreate`：

```
button.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        //do stuff
    }
}); 
```

* * *

### 2 -`android:OnClick`在 XML 上设置属性：

```
<Button android:id="@+id/btnDelete"
    ...
    android:OnClick="btnDelete_OnClick"/> 
```

* * *

### 3 -`OnClickListener`在类上实现接口`Activity`并将自引用传递给 Button：

```
public class MainActivity extends Activity implements OnClickListener{
    @Override
    public void onClick(View v) {
        //do stuff
    }

    protected void onCreate(Bundle savedInstanceState) {
        ...
        button.setOnClickListener(this);
    }
} 
```

* * *

### 4 - 创建一个`OnClickListener`类型为：

```
private OnClickListener onClickHandler = new OnClickListener(){

    @Override
    public void onClick(View v) {
        //stuff
    }
};

protected void onCreate(Bundle savedInstanceState) {
    ...
    button.setOnClickListener(onClickHandler);
} 
```

* * *

当谈到 a`Button`和`OnClick`事件时，我总是更喜欢在 XML 上定义它，它只是更干净。

但是其他事件，例如`OnItemClick`from the`ListView`或 the `OnTimeSet`from the`TimePickerDialog`呢？我看不到用于在 XML 上设置它的属性。我认为实现监听器接口是一个非常干净的解决方案，但这意味着我只能实现一次，如果我有两个相等的视图，我将不得不在同一个地方处理它们的事件。如果我使用选项 2 或 4，则在处理来自 UI 的不同视图的多个事件时可能会变得非常混乱。

如果事件处理有任何其他实现选项，我希望看到关于这个主题的其他意见。真的有替代方案可以定义为更好的替代方案，还是只是每个程序员的个人问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:24:50.743

让我尝试逐个解释：

**案例# 1** 这种方式会像创建按钮一样创建匿名类（每个按钮都需要新的监听器），而且它的可读性和成本都较低。

**案例#2** 其实如果你阅读这背后的代码，你会发现它使用反射来找到你的回调监听器（方法），并且它的可读性较差，并且使其他开发人员感到困惑。

**案例# 3** 这种方式很难导航，因为您无法确定当前按钮正在使用的侦听器的类型（我知道 eclipse 会突出显示`this`指向的方法，但是对于庞大的代码，我认为这会很困难找到）。

**案例# 4** 我认为这是实现监听器的最佳方式，易于导航，更具可读性，一个监听器可以处理所有相关事件（并且使用 eclipse，`ctrl+click`你可以去监听器），所以***我推荐这个***（我在工作中只使用这种方式）

我希望这个能帮上忙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:37:29.887

1.  如果我在课堂上只有一两个听众，我喜欢这种方法。比如列表视图的`onItemClickListener`. 有多个视图，它确实变得非常混乱。

2.  我根本不使用`android:onClick`，只是因为我喜欢将我的代码保留在我的代码中。

3.  当我有几个视图需要处理时，我喜欢这个。但是，我仍然喜欢保持我的`onClick()`代码稀疏。它通常以`switch`id 为结尾，一组类似的视图调用额外的方法来处理，类似`handleDownVote()`或类似的。这样，我所有的主要“处理”调用都在一个地方完成。

4.  我不知道人们这样做了。我想它比#3 提供了更好的分组相似视图的能力，但我从来没有真正考虑过。也许我会试一试。

然而，归根结底，这是一个非常主观的问题，因为没有真正“正确”或“优化”的方式来做到这一点。如您所见，到目前为止，每个答案都不同。没有冒犯，但投票结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T22:01:47.107

There is another possibility

```
class MyListener implements onClickHandler{
    public MyListener(SomeType parameter)
    {
       m_parameter = parameter;
    }
    @Override
    public void onClick(View v) {
        // do some stuff based on the value of m_parameter
    }
    private SomeType m_parameter;
};

protected void onCreate(Bundle savedInstanceState) {
    ...
    findViewById(R.id.Button1).setOnClickListener(new MyListener(parameter1));
    findViewById(R.id.Button2).setOnClickListener(new MyListener(parameter2));
    ...
} 
```

This avoids having to figure out what to do based on the view (button) that was clicked. Obviously you could have more than one parameter to the constructor to support specifying even richer actions without "hard-coding" resource ID's or button identities into the MyListener object.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T23:31:26.147

首先 - 每个人都应该习惯阅读匿名内部类。它们很恶心，但它们被广泛使用，你会看到很多。

也就是说，我会选择 #1，因为它是本地化的 - 您会在添加它的位置看到您作为侦听器添加到您关注的按钮的内容。它允许监听多个按钮（与在类级别实现监听器相比）。

风格方面，我建议像这样实现具有单一方法的匿名内部类：

```
button.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        //do stuff
    }}); 
```

这 ”}}）;” 是一个主要的眼睛 - 这是故意的。它像旧的“拇指酸痛”一样突出。这抓住了你的眼球，让你意识到正在发生一些特别的事情——匿名内部类定义的结束。匿名内部类可能难以阅读——这种丑陋实际上有助于提高可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T12:04:07.763

处理 Button 的 OnClick 事件的最佳方式取决于以下几点：

**1\. 没有你有的按钮。**

Ans：如果你只有一个按钮，你可以使用第一种创建匿名类的方法。但是如果你有多个按钮，那么创建多个匿名 onClicklistener 是不好的。但与其他选择一起去

**2.内存优化**

Ans：如果您在 Activity 类上实现 OnClickListener 接口并将自引用传递给 Button，则 onclick 侦听器将保留对该活动对象的引用，因此将整个活动的对象保留在其中会很重，所以在这个方式具有 OnClickListener 类型的局部变量是更优化的方式。

因此，总体而言，最佳实践是使用 OnClickListener 类型创建一个局部变量，这是处理任何类型事件的最佳方式，而不仅仅是 Button 上的 onClick 事件。

# dataset - 大数据的内存不足异常

> ID：15201090
> 
> 赞同：1
> 
> 时间：2013-03-04T12:00:30.190
> 
> 标签：dataset, out-of-memory

在我的应用程序中有一个填充数据集的 SqlDataAdapter。DataSet 只得到一个表，而该表进一步只得到一个 DataRow。此 DataRow 有一个从数据库获取图像数据的列，因此它可能是来自数据库的非常大的图像数据。

```
SqlCommand cmd = DBHandler.CreateSPCmd("AttachmentSelectbyID");
DBHandler.AddParam(cmd, "@AttachmentID", SqlDbType.Int, attachmentID);
var da = new SqlDataAdapter(cmd);
var ds = new DataSet();
da.Fill(ds, "Attachment"); 
```

当相应的图像数据非常大时，该命令会引发内存不足异常。我尝试使用 SqlDataReader，但仍然发生相同的异常：

```
SqlDataReader reader = cmd.ExecuteReader();
while (reader.Read())
{
    object ob =  reader["AttachmentImage"];
} 
```

问题不在于大量的数据记录，但我认为问题是基于来自数据库的非常大的图像数据。有什么解决办法吗？

# php - PHP 中的 IF ELSE 语句有多贵

> ID：15201091
> 
> 赞同：0
> 
> 时间：2013-03-04T12:00:31.443
> 
> 标签：php, if-statement, web, resources

根据我的分页方案，我在每个 PHP 页面上大约有 20 条评论。我在每条评论上都使用了 If else 语句来检查用户是否登录。因此，大约有 20 个 IF ELSE 语句。

我不知道处理一个 IF ELSE 语句需要多少时间。IF ELSE 语句的价格可能是多少。如果我使用了 20 条这样的 IF ELSE 语句

```
IF ($user_logged_in) {
     // do this
} ELSE {
    // do this
} 
```

注意：$user_logged_in 不是函数，它是在页面开头设置的布尔变量。

那么，在这种情况下，我的网页可能会花费多少时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:03:38.810

您不应该真正关心 if 语句的性能。关心真正昂贵的东西，例如数据库调用、文件打开、目录管理、XML 读取等。

语言结构比你想象的要快得多。因此，如果您的页面加载太慢，这不是问题。

# php - PHP 5.4 扩展

> ID：15201095
> 
> 赞同：0
> 
> 时间：2013-03-04T12:00:35.740
> 
> 标签：php, macos, openssl

我正在尝试确认我最近安装的 MAMP 版本上是否安装了 mysql 扩展和 mod_mcrypt、mod_mbstring 以及 openssl。我在 phpmyinfo 下查看并查看配置命令部分。例如 './configure' '--with-mysql=/Applications/MAMP/Library' 只是将其输入终端还是我需要做的其他事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:07:26.477

如果您创建一个仅包含以下内容的 php 页面：

```
<?php phpinfo(); ?> 
```

然后查看输出可以看到各个模块是否启用。如果启用了 mcrypt;led 你将看到它的部分和 mbstring 相同的部分。

以下是我安装的输出（抱歉格式化丢失）

mcrypt

启用 mcrypt 支持

版本 2.5.7

原料号 20021217

支持的密码 cast-128 gost rijndael-128 twofish arcfour cast-256 loki97 rijndael-192 safeplus wake blowfish-compat des rijndael-256 serpent xtea 河豚谜 rc2 Tripledes

支持的模式 cbc cfb ctr ecb ncfb nofb ofb 流

指令 本地价值 主价值

mcrypt.algorithms_dir 无值 无值

mcrypt.modes_dir 无值 无值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:10:01.110

这些只是在构建 PHP 时传递给 C 编译器的命令行选项。大多数扩展都没有定义这样的选项。

最简单的方法是查看`phpinfo()`'s 的其余输出（可能使用浏览器的“搜索”功能）。许多扩展在那里添加自己的表。此外，一些扩展（不是全部！）提供您可以使用[phpversion()](http://www.php.net/manual/en/function.phpversion.php)检索的版本信息，例如：

```
var_dump( phpversion('mysqli') );
// 0.1 
```

但最普遍和恕我直言可靠的方法只是测试扩展提供的功能是否可供您使用。您可以使用[function_exists()](http://php.net/function_exists)和[class_exists()](http://php.net/class_exists)：

```
echo 'Mcrypt: ' . (function_exists('mcrypt_encrypt') ? 'Available' : 'Not available'); 
```

# javascript - 数据数组作为 extjs 中的模型属性

> ID：15201099
> 
> 赞同：1
> 
> 时间：2013-03-04T12:00:45.617
> 
> 标签：javascript, extjs, extjs4

我在 extjs 中有一个这样的模型：

```
Ext.define('Game', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'int' },
        { name: 'Name', type: 'string' },
        //{ name: 'levels' , type:'array'},
    ]
}); 
```

我想将此模型用于网格存储，但它的第三个属性

> //{ name: 'levels' , type:'array'}

是一个数据数组，我想在我的网格的动态创建的列中显示它们。我想也许 extjs 模型上的关联可能会给我带来一个解决方案，但我很困惑如何使用它们。任何解决方案都会被应用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T21:12:23.793

只需使用 type: 'auto' 设置，您的阵列将保持不变。

```
Ext.define('Game', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'int' },
        { name: 'Name', type: 'string' },
        { name: 'levels' , type:'auto'},
    ]
}); 
```

然后您可以使用渲染器定义列，如下所示：

```
columns: [
    {
        text: "ID",
        dataIndex: "id"
    },
    {
        text: "Name",
        dataIndex: "Name"
    },
    {
        text: "Array Item 1",
        dataIndex: "levels",
        renderer: function(value){
             return levels[0];
        }
    },
    {
        text: "Array Item 2",
        dataIndex: "levels",
        renderer: function(value){
             return levels[1];
        }
    }
] 
```

如果您想按数组中的项目动态添加列，您实际上必须找出哪个记录​​具有包含最多项目的数组，然后根据需要向列数组添加尽可能多的列，然后设置网格的列使用 .configure 方法。这可能在商店的加载事件中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T11:14:53.393

假设这是您模型的数据 -

```
{
  "id": 1,
  "name": "game",
  "levels": ["level 1", "level 2", "level 3"]
} 
```

您始终可以将模型定义为

```
Ext.define('Game', {
    extend: 'Ext.data.Model',
    requires: [
        'Ext.data.field.Integer',
        'Ext.data.field.String'
    ],
    fields: [
        { 
            name: 'id', type: 'int' 
        },
        { 
            name: 'Name', type: 'string' 
        },
        { 
            name: 'levels'
        }
    ]
}); 
```

将类型留空将被解释为“自动”，因此不会对该字段应用任何转换。

PS：注意后面的逗号。:)

# data-binding - 从使用 KnockOutJs 呈现的 HTML 元素调用 ViewModel 函数

> ID：15201100
> 
> 赞同：0
> 
> 时间：2013-03-04T12:00:47.153
> 
> 标签：data-binding, knockout.js

我正在使用这样绑定的列数据呈现 HTML：

```
<td data-bind="html: content"></td> 
```

在 ViewModel 内容中可以包含一个应该响应 viewmodel 事件（如 click）的元素。一个例子可以是：

```
<a href='#'><img src='../img/search.png' data-bind='click: function() { foo()  }' ></img></a> 
```

在这种情况下，`foo()`函数不会被调用。两者都不是`$root.foo()`或`$parent.foo()`（我在 foreach 上下文中。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:51:46.410

您不必说 foo() 函数是一个函数。

我的意思是你不使用`function() {foo() } syntax`

您应该能够通过仅使用函数调用本身来使其工作：

```
<a href='#'><img src='../img/search.png' data-bind='click:foo()' ></img></a> 
```

# vb.net - 合并相同的文本值 + 求和

> ID：15201103
> 
> 赞同：0
> 
> 时间：2013-03-04T12:00:58.963
> 
> 标签：vb.net, vba, ms-access

我正在寻找一种方法来合并相同的文本值并将它们加在一起以显示总数。

所以假设有 5 个相同的项目编号，每个项目的时间都用正常的数值表示，比如

```
PROJECT | TIME SPENT
451/676 | 4
451/676 | 0.5
451/676 | 5
451/676 | 4.5
451/676 | 3.2 
```

我将如何合并它们看起来像

```
PROJECT | TIME SPENT
451/676 | 17.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:05:03.903

您需要使用聚合函数`SUM()`并将 a`GROUP BY`应用于项目列：

```
select project, sum([Time Spent]) as TotalTimeSpent
from yourtable
group by project 
```

# knockout.js - Typescript 不喜欢 ko.bindingHandlers.dialog 语句中的“对话”

> ID：15201106
> 
> 赞同：1
> 
> 时间：2013-03-04T12:01:15.967
> 
> 标签：knockout.js, typescript

我正在尝试让 jqueryUI 对话与 knockoutjs 视图模型一起使用并尝试过。任何想法有什么问题：

```
ko.bindingHandlers.dialog = { 
```

导致错误“KnockoutBindingHandlers”类型的值上不存在属性“对话框”

但是，我已经导入了淘汰赛：

```
///<reference path="d.ts/knockout.d.ts"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:26:43.373

我在 .d.ts 文件的界面上看不到它。你可以像这样扩展它......

```
interface KnockoutBindingHandlers {
    dialog: {};
} 
```

您可以填写有关对话框的预期类型的​​更多详细信息，以获得静态类型和智能感知。

# c# - FormsAuthenticationModule 中的这段代码应该如何工作？

> ID：15201108
> 
> 赞同：5
> 
> 时间：2013-03-04T12:01:25.593
> 
> 标签：c#, .net, iis, .net-4.0

我正在阅读 .NET4 源代码（可以免费下载它们进行研究），我在 .NET4 的实现中发现了一些奇怪的东西`System.Web.Security.FormsAuthenticationModule`。

该类声明如下：

```
public sealed class FormsAuthenticationModule : IHttpModule 
```

where`IHttpModule`有两种方法 -`Init()`和`Dispose()`.

里面`OnEnter()`有这些行：

```
// Step 2: Call OnAuthenticate virtual method to create 
//    an IPrincipal for this request
OnAuthenticate( new FormsAuthenticationEventArgs(context) ); 
```

where`OnAuthenticate()`声明如下：

```
// OnAuthenticate: Forms Authentication modules can override 
//             this method to create a Forms IPrincipal object from
//             a WindowsIdentity 
private void OnAuthenticate(FormsAuthenticationEventArgs e) { 
```

现在类是`sealed`，所以不可能继承。也不`OnAuthenticate()`是`virtual`，所以我看不出它是如何被覆盖的。

所以看起来这些评论已经过时并且`OnAuthenticate()`不再可能覆盖。

我有什么不对吗？这段代码可能允许覆盖`OnAuthenticate()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:33:43.977

它不起作用。这只是不正确的文档。对于 MS 来说，这不是第一次。例如，我在 .NET Framework 的 1.1 版中通知了 MS​​，而我们现在是 4.5，文档仍然完全具有误导性：http: [//msdn.microsoft.com/en-us/library/7he0a7s1.aspx](http://msdn.microsoft.com/en-us/library/7he0a7s1.aspx)

请注意“继承者须知”部分。`internal abstract`当一个类包含多个属性和方法时，应该如何从 BindingManagerBase 派生一个类？然而，BindingManagerBase 和 CurrencyManager 的文档中有几个地方有“继承者注释”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-19T11:19:55.450

我知道这很旧，但唯一的方法是在 Global.asax 中实现 FormsAuthenticate_OnAuthenticate 事件。当您将 e.Context.User 设置为一个值时，它会阻止内部代码执行。这有点笨拙。

# c# - 设置重叠的两个 PictureBox

> ID：15201114
> 
> 赞同：2
> 
> 时间：2013-03-04T12:01:54.090
> 
> 标签：c#, image, picturebox, overlapping

我在创建两个重叠的`PictureBox`es 时遇到问题。我像每个人告诉我的那样编写代码，但我有一些问题：

第一：背景是黑色的（为什么？） 第二：为什么树会出现两次？

编辑：图片[http://i48.tinypic.com/2llnfrq.png](http://i48.tinypic.com/2llnfrq.png)（堆栈溢出有问题）

这是用于测试的示例代码。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        this.AllowTransparency = true;

        MyPictureBox pb1 = new MyPictureBox();
        MyPictureBox pb2 = new MyPictureBox();

        pb1.Size = new Size(64, 64);
        pb1.Location = new Point(20, 20);
        pb1.BackColor = Color.Transparent;

        //pb1.SizeMode = PictureBoxSizeMode.Zoom;

        pb2.Size = new Size(64, 64);
        pb2.Location = new Point(52, 20);
        pb2.BackColor = Color.Transparent;

        pb1.Image = Image.FromFile("D:\\...\\Graphics\\Grounds\\woda1.png");
        pb2.Image = Image.FromFile("D:\\...\\Graphics\\Objects\\tree1.png");

        panel1.Controls.Add(pb2);
        panel1.Controls.Add(pb1);
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {

    }
}

class MyPanel : Panel
    {
        protected override CreateParams CreateParams
        {
            get
            {
                CreateParams cp = base.CreateParams;
                cp.ExStyle |= 0x20;
                return cp;
            }
        }
        protected override void OnPaintBackground(PaintEventArgs e)
        {
            // Do Nothing
        }

        public MyPanel()
        {

        }
    }

class MyPictureBox : PictureBox
{
    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }
    protected override void OnPaintBackground(PaintEventArgs e)
    {
        // Do Nothing
    }

    public MyPictureBox()
    {
    }
} 
```

# oracle11g - 在 oracle 11g 中面临 clob 数据类型的问题，并且某些特殊字符无法正确迁移

> ID：15201115
> 
> 赞同：0
> 
> 时间：2013-03-04T12:01:54.163
> 
> 标签：oracle11g, database-migration

我正在开发一个将 oracle 11g 作为数据库的项目。实际上我们正在迁移旧项目，即使用visualbasic和foxpro作为数据库开发的项目。在将旧数据从 foxpro 迁移到我们的 oracle 表时，具有包含特殊字符的长描述的列无法正确迁移。我正在使用由内部 java 团队开发的一个名为 fox 的工具到 oracle 迁移。我的问题是如何解决这个问题。特殊字符表示@、^ & 和.....

我的第二个问题是我们有超过 4000 个字符的长描述。我打算为这些列采用 clob 数据类型，可以吗？

提前谢谢..

# c++ - 任何人都可以用几个术语解释 DYNAMIC_CLASSes 吗？

> ID：15201116
> 
> 赞同：1
> 
> 时间：2013-03-04T00:09:24.653
> 
> 标签：c++, dll, mfc

我已经开发了一段时间。这些野兽不时出现在 MFC、wxWidgets 代码中，但我找不到任何关于它们具体做什么的信息。

据我了解，它们出现在 dynamic_cast 集成到核心 C++ 之前。目的是允许动态创建对象和运行时动态转换。

但这就是我找到的所有信息的终点。

我遇到了一些在 DLL 中使用 DECLARE_DYNAMIC_CLASS 和 IMPLEMENT_DYNAMIC_CLASS 的示例代码，这些代码用于导出的类。这种结构让我感到困惑。

为什么这样做？这是一种基于插件的方法，您调用 LoadLibrary 然后调用 CreateDynamicClass 来获取可以转换为所需类型的指针？

DECLARE/IMPLEMENT_DYNAMIC 是否在 DLL 边界上工作？既然连class对DLLEXPORT都不是那么安全，这里我们除了现有的问题外还有一个自定义的RTTI表。

是否可以从另一个 DLL 的 DYNAMIC_CLASS 派生我的类，它是如何工作的？

谁能解释一下这些东西的用途，或者我在哪里可以找到关于一个主题的两个以上的句子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:28:54.823

这些东西为你的类附加了额外的类型信息，这允许以独立于运行时的方式进行 RTTI，让工厂创建你的类和许多其他东西的可能性。您可以在 COM、QMetaObject 等处找到类似的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:33:07.067

你看过 DECLARE/IMPLEMENT_DYNAMIC 的定义了吗？

在 MS 世界中，所有大写字母通常表示一个宏，因此您只需查找定义并尝试从那里弄清楚它在做什么。如果您在 Visual Studio 中，您可以点击一个键来跳转到定义 - 看看它说了什么，然后查找并尝试从那里开始工作。

# glsl - 了解实现相关的限制

> ID：15201119
> 
> 赞同：0
> 
> 时间：2013-03-04T12:02:08.113
> 
> 标签：glsl, vertex-shader

我的问题接近这个问题[ATI 显卡上 GLSL 着色器的顶点统一组件的实际数量是多少？](https://stackoverflow.com/questions/8586543/what-is-the-actual-number-of-vertex-uniform-components-for-glsl-shader-on-ati-gr)

在他的情况下，

*   他的 GL_MAX_VERTEX_UNIFORM_COMPONENTS 为 4096
*   他正在使用 mat4[] 数组
*   低于64 mat4，shader很好，高于，不是

正如[wiki 上写的](http://www.opengl.org/wiki_132/index.php?title=GLSL_Uniform&oldid=3601#Implementation_limits "维基")那样，在 AMD 卡上，要获得正确的值，它应该除以 4，这给了他 4096/4 = 1024 个浮点数。

由于 mat4 是 16 个浮点数，因此他将其除以 16，得到 1024/16 = 64 mat4。

所以限制与他的使用是一致的。

* * *

但这不是我的，这就是我所拥有的：

*   GL_MAX_VERTEX_UNIFORM_COMPONENTS：16384
*   vec3 数组

我正在使用向量来转换立方体的实例，因此向量的数量等于传递给 glDrawArraysInstanced() 的实例数量。代码真的很简单`gl_Position = vp * translateVec[gl_InstaceID] * pos`（使用 vp 一个独特的 ViewProjection 矩阵）。如果向量少于 256 个，则立方体被正确平移。在 256 个向量之上，前 256 个立方体是可以的，但其他的都不是，它们位于 (0, 0, 0) 点，看起来向量是 (0, 0, 0)。

我有一个 AMD 6490m 和他一样，我应该按 4 步 16384/4 = 4096 浮点数进行除法

wiki 说，由于矢量架构，“您应该假设每个单独的制服占用 4 个组件”。这意味着 vec3 将使用 4 个组件而不是 3 个。

所以 4096/4 = 1024 vec3

如您所见，这与我的观察不一致。

我错过了什么？还有 GL_MAX_UNIFORM_VECTORS （对我来说是 4096）呢？

**注意**：我上传了 vec3 数组，并使用Core profile 4.2、win7、13.1 催化剂`glUniform3fv()`声明了该数组。`uniform vec3[255]`

# wcf - 关于 WCF 频道的困惑

> ID：15201120
> 
> 赞同：8
> 
> 时间：2013-03-04T12:02:26.333
> 
> 标签：wcf, channelfactory

我对代理和频道感到困惑。根据我的阅读，WCF 客户端正在使用通过一系列通道传递消息的代理。每个 Channel 都负责特定的任务，例如一个 Channel 正在对消息进行编码，而另一个 Channel 正在对其进行加密。

当我看到以下代码时，我的困惑开始了

*   什么时候`proxy.MyMethod()`被调用，它实际上调用了整个通道链？

*   作者使用了方法调用`CreateChannel`并命名了标识符代理。那么在WCF架构中Proxy只是一个空间高层通道，它不是一个独立的架构元素吗？

    ```
    Binding binding = new NetTcpBinding();  
    EndpointAddress address = new EndpointAddress("net.tcp://localhost:8000");  
    IMyContract proxy = ChannelFactory<IMyContract>.CreateChannel(binding,address);  
    using(proxy as IDisposable)  
    {  
        proxy.MyMethod();  
    } 
    ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T12:56:43.547

在 WCF 中，您有 3 个主要组件 - 合同、地址和绑定。通道是一个管道，它是根据这三个部分构建的。

![在此处输入图像描述](../Images/8db85e69de30f079824c53877acce2d4.png)

通道的目的是将消息修改为客户端和服务器都可以理解的格式，并组织它的正确传输。为此使用传输和协议通道。为了使这个过程更容易，我们使用绑定。每个绑定都由元素组成，这些元素代表通道堆栈中的某个通道。

因此，每次调用方法时，它都会根据您的 DataContract 形成消息，并将其传递给整个通道链。每个频道都会修改您的消息。proses看起来像这样

![在此处输入图像描述](../Images/546777340844607e5ca618c7e2f01ee0.png)

WCF 代理实际上只是一个抽象级别。它是进程外服务的进程内代表。你可以把它想象成一个对象，根据你的绑定元素和你的 dataContract 生成和正确配置，它允许你的客户端和服务器端相互理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:19:51.350

是的，我认为您准确地描述了这一点。WCF 具有“通道”的概念，开发人员倾向于在 web.config 中进行配置，而不是编写 C# 代码。

这些在[通道模型概述](http://msdn.microsoft.com/en-us/library/ms729840.aspx)中进行了描述。

当您调用`ChannelFactory.CreateChannel(binding,address);`框架时，会查看您的配置并为您创建所有这些通道作为一个对象。所以是的，代理就像一堆频道。

从你的角度来看，你与它作为一个对象进行交互。该框架处理单独通道的实现。很高兴了解您正在浏览这些层，以便您可以正确配置它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:23:20.597

在这种情况下，“代理”是对软件设计模式的引用。[来自维基百科](http://en.wikipedia.org/wiki/Proxy_pattern)：

> 代理，在其最一般的形式中，是一个作为与其他事物的接口的类。代理可以连接到任何东西：网络连接、内存中的大对象、文件或其他一些昂贵或无法复制的资源。

在 WCF 的情况下， ChannelFactory<>.CreateChannel 正在根据配置创建[通道堆栈。](http://msdn.microsoft.com/en-us/library/ms729840.aspx)每个通道都为其下面的通道提供一个抽象。例如，简化的通道堆栈可能是：

*   通道 1 将 .NET 对象序列化为 SOAP 消息
*   通道 2 向消息中添加安全信息
*   通道 3 对要通过 TCP 发送的消息进行编码。

我想你明白这一切。

回到“代理”的使用：堆栈中的任何通道都是它下面的通道的代理。也就是说，没有渠道是最终目的地。所有渠道都是“与其他事物的接口”。但是，当您向下移动通道堆栈时，不同的通道正在为调用者提供不同的接口/抽象（.NET 对象、SOAP 消息等）。

同样，此讨论旨在回答问题并有意简化。

在编写客户端代码时，最有用的接口是理解 .NET 对象的接口。知道这一点后，ChannelFactory 将返回位于堆栈顶部的通道，该通道具有与您的服务合同相匹配的 .NET 接口。将 SOAP 消息创建为字符串，沿着通道堆栈（或创建自定义堆栈），找到接受原始 SOAP 消息的通道，将其标记为“代理”，然后直接调用它是有效的。

> 作者使用了名为 CreateChannel 的方法，并将标识符命名为代理。那么在WCF架构中Proxy只是一个特殊的高层通道，它不是一个独立的架构元素吗？

通道是实现代理软件设计模式的架构元素。所有频道都是代理。当您编写客户端代码时，顶层通道恰好是最有用的，因为它接受 .NET 操作协定。

# c# - 在 c# 中将字符串日期（使用 jquery datepicker）转换为日期时间的正确过程

> ID：15201121
> 
> 赞同：0
> 
> 时间：2013-03-04T12:02:26.957
> 
> 标签：c#, asp.net, sql-server

我在将日期从 c# 插入 SQL Server 时遇到了问题。将日期从 c# 插入到 SQL Server 中的 DateTime 列的正确方法是什么。

目前我的方法是将字符串日期转换为 DateTime 格式，然后插入数据库。

```
Datetime dt = Convert.ToDateTime(txtDate.Text.Trim()); 
```

这样做我遇到了一个错误，当前系统日期与新转换的日期冲突。将字符串日期插入数据库的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:03:17.703

使用[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)并形成[参数化查询](http://blog.divergencehosting.com/2009/04/09/using-parameters-parameterized-queries-database-interactions-cshar-vbnet/)。通过这种方式，您会将 .Net DateTime 对象传递给 SQL Server。

就像是：

```
using (SqlConnection con = new SqlConnection("yourconnectionstring"))
using (SqlCommand cmd = new SqlCommand("INSERT into yourTable([DateCol]) VALUES (@pDate)", con))
{
    cmd.Parameters.AddWithValue("@pDate", DateTime.Now);
    con.Open();
    cmd.ExecuteNonQuery();
} 
```

对于您的问题：

> 将字符串日期插入数据库的正确方法是什么？

**不。**而是将日期字符串转换为`DateTime`对象，然后使用参数化查询将其插入数据库。

对于您的评论：

> 您将如何将字符串日期（使用 jquery datepicker）转换为日期时间格式？

您可以使用`DateTime.ParseExact`日期时间选择器的格式并将字符串转换为 DateTime 对象。

例如，如果您的 DateTime 选择器格式是：`mm/dd/yyyy`那么您可以尝试：

```
DateTime dt = DateTime.ParseExact(dateString, "mm/dd/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:11:23.230

使用这样的参数创建查询

```
SqlCommand cmd = new SqlCommand ("insert into T (...) values (@d",db);
cmd.Parameters.AddWithValue("@d",Convert.ToDateTime(txtDate.Text.Trim());
//... 
```

# wpf - 处理wpf MVVM中的窗口关闭按钮

> ID：15201122
> 
> 赞同：20
> 
> 时间：2013-03-04T12:02:29.933
> 
> 标签：wpf, mvvm

有没有办法通过绑定到命令来处理视图模型右上角的窗口关闭按钮，即“X”？或覆盖 window.close 命令，以便关闭一个窗口返回到前一个窗口。谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-04T12:37:47.143

有几种方法可以做到这一点。我在下面指出了两种方法。

1.  您可以使用附加的命令来绑定视图模型中的关闭按钮。

2.  您可以使用下面的代码

xml:

```
<Window x:Class="WpfInfragisticsModal.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" 
        xmlns:ig="http://schemas.infragistics.com/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        Name="myWindow">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closing">
            <i:InvokeCommandAction Command="{Binding CloseWindowCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid>
    </Grid>
</Window> 
```

> **注意：添加 System.Windows.Interactivity 参考**

查看模型

```
private ICommand closeWindowCommand;

public ICommand CloseWindowCommand
{
      get
      {
          if (closeWindowCommand == null)
          {
             closeWindowCommand = new RelayCommand(param => this.CloseWindow(), null);
          }
          return closeWindowCommand;
      }
 }

private void CloseWindow()
{
     //Do your operations
} 
```

这是我的 RelayCommand 类。

```
public class RelayCommand : ICommand
{
    /// <summary>
    /// Initializes a new instance of the <see cref="RelayCommand"/> class.
    /// </summary>
    /// <param name="execute">The execute.</param>
    public RelayCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="RelayCommand"/> class.
    /// </summary>
    /// <param name="execute">The execute.</param>
    /// <param name="canExecute">The can execute.</param>
    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");
        _execute = execute;
        _canExecute = canExecute;
    }

    /// <summary>
    /// Defines the method that determines whether the command can execute in its current state.
    /// </summary>
    /// <param name="parameter">Data used by the command.  If the command does not require data to be passed, this object can be set to null.</param>
    /// <returns>
    /// true if this command can be executed; otherwise, false.
    /// </returns>
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    /// <summary>
    /// Occurs when changes occur that affect whether or not the command should execute.
    /// </summary>
    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    /// <summary>
    /// Defines the method to be called when the command is invoked.
    /// </summary>
    /// <param name="parameter">Data used by the command.  If the command does not require data to be passed, this object can be set to null.</param>
    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    /// <summary>
    /// Action
    /// </summary>
    private readonly Action<object> _execute;

    /// <summary>
    /// Predicate
    /// </summary>
    private readonly Predicate<object> _canExecute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:18:33.247

问题是我正在关闭父窗口并在关闭其各自的子窗口后重新打开它，导致内存泄漏。我通过隐藏父窗口然后在子窗口关闭后再次显示它来解决。我是 wpf 和 windows 开发的新手，所以我边走边学。

# php - 如何通过 PHP 使用 UTF-16 编码生成有效的 XML 文件

> ID：15201133
> 
> 赞同：1
> 
> 时间：2013-03-04T12:02:56.523
> 
> 标签：php, xml, character-encoding, domdocument, utf-16

我正在尝试使用 PHP 以 UTF-16 编码生成 XML 文件，但是当我打开生成的文件时出现问题。我使用 DOMDocument 创建文件。使用 UTF-8 编码，没问题。使用 Notepad++ 打开 XML 文件时，它看起来像这样：

```
<?xml version="1.0" encoding="UTF-16"?>਍㰀伀䈀㸀ഀ
<CLIENT>਍    㰀䈀伀䴀㸀ഀ
  <BO>਍        㰀䄀搀洀䤀渀昀漀㸀ഀ
      <Object>2</Object>਍          㰀嘀攀爀猀椀漀渀㸀㈀㰀⼀嘀攀爀猀椀漀渀㸀ഀ
    </AdmInfo>਍        㰀䈀甀猀椀渀攀猀猀倀愀爀琀渀攀爀猀㸀ഀ
      <row>਍   

         㰀䌀愀爀搀吀礀瀀攀㸀㠀㰀⼀䌀愀爀搀吀礀瀀攀㸀ഀ 
```

... 等等 ！！！有人能帮助我吗 ？

使用 Notepad++，我将编码设置为没有 BOM 的 UTF-8，文件看起来像这样：

```
 <?xml version="1.0" encoding="UTF-16"?>਍㰀伀䈀㸀ഀ
  <CLIENT>਍    㰀䈀伀䴀㸀ഀ
      <BO>਍        㰀䄀搀洀䤀渀昀漀㸀ഀ
          <Object>2</Object>਍          㰀嘀攀爀猀椀漀渀㸀㈀㰀⼀嘀攀爀猀椀漀渀㸀ഀ
        </AdmInfo>਍        㰀䈀甀猀椀渀攀猀猀倀愀爀琀渀攀爀猀㸀ഀ
          <row>਍            㰀䌀愀爀搀吀礀瀀攀㸀㠀㰀⼀䌀愀爀搀吀礀瀀攀㸀ഀ
            <CardCode>01000001</CardCode>਍          㰀⼀爀漀眀㸀ഀ
        </BusinessPartners>਍      㰀⼀䈀伀㸀ഀ
    </BOM>਍  㰀⼀䌀䰀䤀䔀一吀㸀ഀ 
```

作为请求的 PHP 文件的一部分：

```
 header('Content-Type: text/xml');
                    //header('Content-Transfer-Encoding: binary');
                    $xml = new DOMDocument();
                    $xml->version='1.0';
                    $xml->encoding='UTF-16';
                    $ob_client = $xml->createElement('OB');
                        $client_element = $xml->createElement('CLIENT');
                            $client_bom_element = $xml->createElement('BOM');
                                $client_bo_element = $xml->createElement('BO');
                                    $client_adminfo_element = $xml->createElement('AdmInfo');
                                        $client_adminfo_object_element = $xml->createElement('Object', '2');
                                        $client_adminfo_version_element = $xml->createElement('Version', '2');

                                    $client_BusinessPartners_element = $xml->createElement('BusinessPartners');
                                        $client_BusinessPartners_row_element = $xml->createElement('row');
                                            $client_BusinessPartners_row_cardtype_element = $xml->createElement('CardType', $_XML_CardType);
                                            $client_BusinessPartners_row_cardcode_element = $xml->createElement('CardCode', $_XML_CardCode);

...
$xml->formatOutput = true;                  
                    echo $xml->saveXML();
                    $xml->save('rudy-xml-particulier'.$commandeId.'.xml'); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:14:50.973

您已经使用 UTF-16 生成了一个 XML 文件。您需要做的就是预先指定您所做的编码：

```
$doc = new DOMDocument();
$doc->encoding='UTF-16'; 
```

因此，当您添加数据，尤其是元素值时，问题更可能出现。PHP 不会给出任何警告，也不会阻止您添加非 UTF-8 字节序列。这是一个例子，甚至可以引起：

```
$_XML_CardType = "\xA9"; # non utf-8 byte-sequence (latin-1 copyright symbol)
$xml->createElement('CardType', $_XML_CardType); # returns DOMElement 
```

然后当你使用

```
echo $xml->saveXML(); 
```

PHP 可能会告诉您问题（取决于 PHP 版本、错误报告设置和底层库）并且（对于较新的 PHP 版本）在发生错误的地方切断字符串。示例性错误消息是：

> 警告：DOMDocument::saveXML()：由于转换错误，输出转换失败，字节 0xA9 0x3C 0x2F 0x69

因此，您需要做的就是确保`createElement`用于值的字符串数据是 UTF-8 编码的。这已经是您需要做的所有事情了。

当您说您从数据库中获取数据时，请查阅您的 PHP 数据库客户端库的文档，如何使其以 UTF-8 编码返回字符串。那应该可以立即解决您的问题。

为确保您在插入之前获得 UTF-8 编码的字符串，例如使用正则[表达式来检测 Invalid UTF-8 String](https://stackoverflow.com/a/11709831/367456)：

```
if (!preg_match('//u', $_XML_CardType) {
    throw new Exception("Non utf-8 string deteced.");
}
$xml->createElement('CardType', $_XML_CardType); 
```

这将引发异常而不是插入。还[记录/显示错误](https://stackoverflow.com/a/14504459/367456)并按照错误流发现其他问题。

# c# - 选择涉及日期和时间比较的查询

> ID：15201134
> 
> 赞同：2
> 
> 时间：2013-03-04T12:02:59.107
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

这是我的 MS Sql 表。表： [http ://snag.gy/L6ag1.jpg](http://snag.gy/L6ag1.jpg)

```
SELECT 
    * 
FROM Table1 
WHERE   
    Class = '12' 
    AND Section = 'B' 
    AND '3/4/2013' BETWEEN DATE AND TODATE 
    and '3/14/2013' between Date and ToDate 
    or '3/4/2013' < Date and '3/14/2013' > ToDate 
    AND (
            '12:00 PM'  between [StartTime] and endtime 
            and '1:00 PM' between [StartTime] and endtime 
            or ('12:00 PM' < StartTime and '1:00 PM' > EndTIme)
        ) 
```

上面的查询返回表的所有 6 行，而下面的查询返回 0 行。

```
SELECT 
    * 
FROM Teacher 
WHERE   
    Class = '12' 
    AND Section = 'B' 
    and '12:00 PM'  between [StartTime] and endtime 
    and '1:00 PM' between [StartTime] and endtime 
    or ('12:00 PM' < StartTime and '1:00 PM' > EndTIme) 
```

我期待顶部的查询返回 0 行，因为我使用了 AND 操作数，所以即使日期比较返回行，组合查询也不应该返回任何内容，因为时间比较返回 false。

创建表的脚本：

```
INSERT INTO [SLIITComDB].[dbo].[Teacher]
           ([TeacherId]
           ,[TeacherName]
           ,[Class]
           ,[Section]
           ,[SubjectId]
           ,[Date]
           ,[ToDate]
           ,[Day]
           ,[StartTime]
           ,[EndTIme]
           ,[Absent])
     VALUES
           (<TeacherId, int,>
           ,<TeacherName, varchar(50),>
           ,<Class, varchar(50),>
           ,<Section, varchar(50),>
           ,<SubjectId, varchar(50),>
           ,<Date, date,>
           ,<ToDate, date,>
           ,<Day, varchar(50),>
           ,<StartTime, time(7),>
           ,<EndTIme, time(7),>
           ,<Absent, varchar,>)
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:21:05.123

在 SQL 中，`AND`运算符优先于`OR`运算符。

因此，在您的第一个查询中，条件如下所示：

```
WHERE   
  ( Class = '12' 
    AND Section = 'B' 
    AND '3/4/2013' BETWEEN DATE AND TODATE 
    and '3/14/2013' between Date and ToDate
   ) OR (
    '3/4/2013' < Date and '3/14/2013' > ToDate 
    AND (
            '12:00 PM'  between [StartTime] and endtime 
            and '1:00 PM' between [StartTime] and endtime 
            or ('12:00 PM' < StartTime and '1:00 PM' > EndTIme)
        )) 
```

结果是`TRUE`顶部或底部（由 分隔`OR`）中的任何一个为`TRUE`.

第二个查询中的条件也如下所示：

```
WHERE   
  ( Class = '12'
    AND Section = 'B' 
    and '12:00 PM'  between [StartTime] and endtime 
    and '1:00 PM' between [StartTime] and endtime
   )
    or ('12:00 PM' < StartTime and '1:00 PM' > EndTIme) 
```

即使时间比较都是`FALSE`因为您的前两个日期比较可以是，您的第一个查询也可以返回结果`TRUE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:22:10.877

实际上是您的 OR 导致了这种情况：

根据您的数据，或之前的第一部分是正确的。所以这些将被退回。添加括号以澄清事情。

真的：

```
 Class = '12' 
    AND Section = 'B' 
    AND '3/4/2013' BETWEEN DATE AND TODATE 
    and '3/14/2013' between Date and ToDate 

 OR 
```

错误的：

```
'3/4/2013' < Date and '3/14/2013' > ToDate 
    AND (
            '12:00 PM'  between [StartTime] and endtime 
            and '1:00 PM' between [StartTime] and endtime 
            or ('12:00 PM' < StartTime and '1:00 PM' > EndTIme)
        ) 
```

试试这个简化：

```
select * 
from Table1 
where 1 = 1
or 2 = 2
and 1 = 3 
```

# c# - 单选按钮列表选择所需的 CustomValidator 文本框

> ID：15201138
> 
> 赞同：1
> 
> 时间：2013-03-04T12:03:09.413
> 
> 标签：c#, asp.net, textbox, radiobuttonlist, customvalidator

在我的页面上，我有一个单选按钮列表和一个文本框。

默认情况下，文本框是隐藏的，然后如果用户单击是，则会出现。一旦他们单击“是”，则必须先填写文本框，然后才能继续。

我已经输入了以下代码，但是它似乎根本不起作用，当按下按钮转到下一页时，它会继续而不是停止并要求用户在框中输入内容。

```
function Q12iYes() {           
        document.getElementById('txt12i').style.display = "block"
     }
    function Q12iNo() {
        document.getElementById('txt12i').style.display = "none"
    }      

<asp:RadioButtonList ID="rbtn12" runat="server" RepeatDirection="Horizontal">
    <asp:ListItem Value="Yes" onclick="Q12iYes()" /> <asp:ListItem Value="No"  Selected="True" onclick="Q12iNo()" /> 
    </asp:RadioButtonList>
            <br />

    12.i) If &#39;Yes&#39; please provide details<br />
    <br />
    <asp:TextBox ID="txt12i" runat="server" Height="62px" TextMode="MultiLine" Width="343px"></asp:TextBox>
            <br />                
            <asp:CustomValidator ID="MyTxtBoxValidator" runat="server" ControlToValidate="txt12i" ValidateEmptyText="true" ErrorMessage="Please enter some values into Textbox" 
            ClientValidationFunction="validateMyBtn"  Display="Dynamic"> </asp:CustomValidator>
              <script type="text/javascript">
                  function validateMyBtn(oSrc, args) {
                      var rbtnValue = null;
                      var rbtnList = document.getElementsByName('<%=rbtn12.ClientID %>');
                      var radio = rbtnList[0].getElementsByTagName("input");
                      for (var i = 0; i < radio.length; i++) { if (radio[i].checked) rbtnValue = radio[i].value; }
                      if (rbtnValue == "Yes") { args.IsValid = !(args.Value == "") }
                      else { args.IsValid = true; }
} 
</script> 

<asp:Button ID="btnContinue" runat="server" OnClick="btnContinue_Click" Text="Continue" /> 
```

我已经看过如何做到这一点，但我所看到的也没有任何效果，或者帮助我了解我哪里出错了。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:09:14.807

A`CustomValidator`默认情况下不验证空文本，因此设置[`ValidateEmptyText`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx)：

```
<asp:CustomValidator  ValidateEmptyText="true" ID="MyTxtBoxValidator" runat="server" ... 
```

**编辑**问题是您的javascript验证功能仅适用于IE。这是一个也适用于其他浏览器的版本：

```
function validateMyBtn(oSrc, args) {
      var rbtnList = document.getElementsByName('<%=rbtn12.ClientID %>');
      var noClicked = false;
      for (var x = 0; x < rbtnList.length; x++) {
          if (rbtnList[x].checked) {
              noClicked = rbtnList[x].value == "No";
              break;
          }
      }
      if (noClicked) 
          args.IsValid = true;
      else
          args.IsValid = args.Value.trim().length > 0;
} 
```

# internet-explorer - 滚动在 IE8 中不起作用

> ID：15201139
> 
> 赞同：0
> 
> 时间：2013-03-04T12:03:09.860
> 
> 标签：internet-explorer, internet-explorer-8, scroll

i 我的 IE8（版本：8.0.6001.18702）和这个网站（gute-tat.de）有问题，我自己无法解决。在所有其他浏览器中滚动都很好，但在 IE8 中滚动只能偶尔或根本不起作用。我无法通过 stackoverflow 或谷歌找到解决方案。

我试图通过验证站点并修复所有错误来解决问题。这个页面只剩下 2 个错误[http://www.gute-tat.de/konzept.html](http://www.gute-tat.de/konzept.html)，仍然滚动仍然损坏。剩下的两个错误之一，“onLoad”错误也不是原因。我暂时把它拆了，没解决问题后又放回去了。（我刚刚接手了维护这个网站的工作，所以我不想太快做出太多的改变）

我还想更改文档类型，但 Typolight 只允许在“XHTML Strict”和“XHTML Transitional”之间进行选择。

如果有人能指出我正确的方向，那会让我很开心。

在此先感谢，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:19:45.843

该问题是由通过表格实现的全屏背景图像引起的。

```
<body>
    <div id="mainwrapper">
        <!-- the actual conent of the page... -->
    </div>
    <div id="bg">
        <div>
            <table cellspacing="0" cellpadding="0">
                <tbody><tr><td>
                    <img alt="" src="pathtobackgroundimage/bg_image.jpg">
                </td></tr></tbody>
            </table>
        </div>
    </div>
</body> 
```

仅当鼠标指针位于背景图像上时，滚动才会中断。如果鼠标指针放在实际内容的顶部，滚动效果很好。

我知道表格是实现全屏背景图像的错误方法，但我不知道它会导致滚动在 IE8 中不起作用（至少在这种情况下）。

我无法在合理的时间内找出背景的哪个确切部分导致了问题。由于无论如何我都会用更新的方法替换表格，所以我不想在上面浪费更多时间。但是，如果有人可以就此分享更多见解，我将不胜感激。

这是相关的CSS

```
html, body, #bg, #bg table, #bg td {
    height: 100%;
    overflow: hidden;
    width: 100%;
}
#bg div {
    height: 200%;
    left: -50%;
    position: absolute;
    top: -50%;
    width: 200%;
}
html, body, #bg, #bg table, #bg td {
    height: 100%;
    overflow: hidden;
    width: 100%;
}
#bg td {
    text-align: center;
    vertical-align: middle;
}
#bg img {
    margin: 0 auto;
    min-height: 50%;
    width: 50%;
} 
```

# c - 如何让 gcc 告诉我我传递了错误的标量类型？

> ID：15201142
> 
> 赞同：2
> 
> 时间：2013-03-04T12:03:18.093
> 
> 标签：c, gcc, typedef

我的代码传递指向标量类型的指针，这些标量类型表示容易混淆的不同事物。我认为编译器可以帮助我解决这个问题。

这是一个测试程序：

```
typedef int type_a;
typedef int type_b;

type_a do_something_with_a(type_a* pa)
{
    return *pa + 3;
}

int main(void)
{
    type_b b = 0;
    do_something_with_a(&b);  /* This is a bug. */
    return 0;
} 
```

我将 B 传递给只应该使用 As 执行操作的函数，但 gcc 甚至没有发出警告：

```
$ gcc -Wall typesafe2.c 
$ 
```

有没有一种优雅的方法可以编写等效代码，但当我犯了如此可怕的错误时编译器会抛出错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:06:36.600

`typedef`没有定义新类型，而是现有类型的别名。由于您的两种类型都是 int ，因此没有错误！见[这里](http://publications.gbdirect.co.uk/c_book/chapter8/typedef.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:07:39.303

而不是`typedef int type_a;`等，使用`typedef struct { int value; } type_a;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T12:14:14.370

根据标准，您的 typedef 是同义词：

> **C99 §6.7.8，p3：**
> 
> 在存储类说明符为 typedef 的声明中，每个声明符将标识符定义为 typedef 名称，该名称以 6.7.6 中描述的方式表示为标识符指定的类型。每次按执行顺序到达 typedef 名称的声明时，都会评估与可变长度数组声明符关联的任何数组大小表达式。**typedef 声明不引入新类型，仅引入指定类型的同义词。**也就是说，在以下声明中：
> 
> ```
> typedef T type_ident;
> type_ident D; 
> ```
> 
> `type_ident`被定义为 typedef 名称，其类型由 T 中的声明说明符指定（称为 T ），并且 D 中的标识符具有类型 ''derived-declarator- type-list T '' 其中derived-declarator-type- list 由 D 的声明符指定。 typedef 名称与在普通声明符中声明的其他标识符共享相同的名称空间。

因此，除非您声明要钻取的唯一类型*（*例如独特的结构类型），否则您可能不会得到您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:04:25.927

而不是在基本数据类型上使用 typedef ...使用结构类型

例如

```
typedef struct { int a; } type_1;
typedef struct { int b; } type_2; 
```

这可能会解决问题，编译器会抛出警告/错误

# c++ - 在 vs2010 上构建 opengl 项目后出现一些错误

> ID：15201145
> 
> 赞同：1
> 
> 时间：2013-03-04T12:03:24.317
> 
> 标签：c++, opengl

来自 Opengl Superbible（第 4 版）的代码。在项目中添加*.h*和*.cpp*文件并忽略*LIBC.LIB后，出现错误：*

```
1>freeglut_static.lib(freeglut_display.obj) : error LNK2019: unresolved external symbol __iob referenced in function _glutSwapBuffers
1>freeglut_static.lib(freeglut_main.obj) : error LNK2001: unresolved external symbol __iob 
```

仅当我尝试从*gltools*`glLoadTGA()`使用（在*gltools.h*中定义）时才会出现这些错误。如果有人对此有一些想法，那就太好了......

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:21:28.273

> 忽略 LIBC.LIB

为什么？这很可能是错误的原因。除非您正在做最低系统级别的工作，否则您需要一个 libc。*

# c# - 为什么在为 Silverlight 5 应用程序添加编码 UI 支持时无法加载 System.Core？

> ID：15201164
> 
> 赞同：26
> 
> 时间：2013-03-04T12:04:18.313
> 
> 标签：c#, .net, silverlight, ui-automation, coded-ui-tests

我遇到以下问题：

尝试为 Silverlight 5 应用程序 ([MSDN][1]) 添加对创建编码 UI 测试的支持。第一步是在 Silverlight 5 项目中引用程序集 Microsoft.VisualStudio.TestTools.UITest.Extension.SilverlightUIAutomationHelper.dll。不幸的是，在添加引用后，项目停止编译并出现许多类似的错误：

>

```
 Error  25  Cannot resolve reference assemblies. Please check the reference assemblies. Could not load file or assembly 'System.Core, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) ....\ErrorReportDialog.xaml

Looks like System.Core 5.0.5.0 fails to load, okay, debugging assemblies loading with Fuslogw produces two interesting logs:

First log:

> Assembly Binder Log Entry  (04.03.2013 @ 14:07:49)
The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe
A detailed error log follows. 
=== Pre-bind state information ===
LOG: DisplayName = System.Core, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
 (Fully-specified)
LOG: Appbase = file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = MSBuild.exe
Calling assembly : System.Windows, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e.
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: Using application configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: System.Core, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
LOG: Binding succeeds. Returns assembly from C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\System.Core.dll.
LOG: Assembly is loaded in LoadFrom load context.

Looks like System.Core, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e loads succesfully.

But second log entry produces the following error:

> Assembly Binder Log Entry  (04.03.2013 @ 14:07:49)
The operation failed.
Bind result: hr = 0x80131040\. No description available.
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe
A detailed error log follows. 
Pre-bind state information
LOG: DisplayName = System.Core, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
 (Fully-specified)
LOG: Appbase = file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = MSBuild.exe
Calling assembly : Microsoft.VisualStudio.TestTools.UITest.Extension.SilverlightUIAutomationHelper, Version=10.0.30319.381, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a.
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Redirect found in application configuration file: 2.0.5.0 redirected to 5.0.5.0.
LOG: Post-policy reference: System.Core, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e
LOG: The same bind was seen before, and was failed with hr = 0x80131040.
ERR: Unrecoverable error occurred during pre-download check (hr = 0x80131040). 
```

看起来 Microsoft.VisualStudio.TestTools.UITest.Extension.SilverlightUIAutomationHelper.dll 尝试加载 System.Core，Version=2.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e，但被重定向到 System.Core，Version=5.0.5.0 ，Culture=neutral，PublicKeyToken=7cec85d7bea7798e（已经从第一个日志加载）并且仍然无法加载。

```
Can anyone provide some insight on how to further debug this problem? I'm compiling Silverlight projects for AnyCpu platform.

  [1]: http://msdn.microsoft.com/en-us/library/gg413374.aspx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T14:31:36.120

要确认 SilverlightUIAuthomationHelper 所需的 System.Core 版本，请执行以下操作：

1.  在磁盘上找到引用的 SilverlightUIAuthomationHelper dll。
2.  将其加载到任何反汇编器/反射器中 - 例如 dotPeek 或 Reflector。
3.  检查引用程序集的版本 - System.Core 在您的 SilverlightUIAuthomationHelper 版本中必须是 2.0.5.0

可能的解决方案：

1.  将 SilverlightUIAuthomationHelper 更新到引用新 System.Core dll（版本 5.0.5.0）的新版本（Hans Passant 评论中的链接）
2.  因为 fuslogvw 说从 2.0.5.0 到 5.0.5.0 的重定向位于 APPLICATION 配置文件中 - 尝试查找并删除此重定向（[此处有详细信息](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)）。但很有可能其他东西会破裂。

# java - 未找到 Android-R.java 文件

> ID：15201166
> 
> 赞同：3
> 
> 时间：2013-03-04T12:04:26.913
> 
> 标签：java, android

在使用 android 项目时。我被 R.java 文件卡住了，即使我清理项目也找不到该文件（项目---->干净）。但仍然找不到该文件。即使我创建了一个相同的新项目出现问题。我需要做什么 ？我期待着有价值的回复，我可以克服这个问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T12:06:28.970

R.java 丢失暗示您的资源文件夹有一些问题。请尝试查看您的资源文件（布局、可绘制等）。然后清理项目。它肯定会解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T14:18:10.137

您是否检查过您的构建器设置是否正确？要生成 R.java 文件，Android 预编译器需要处理所有资源。

在 Eclipse 中，转到“Project --> Properties”并从列表中选择“Builders”。

![安卓建设者](../Images/cdd2dc0bdbea4ce1cc4ad0a72d3e2c88.png)

只有设置了这些构建器，才能生成R文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:11:08.400

R.java 仅在资源文件出现问题时才错过。正确检查您的**菜单文件**、布局和 Drwables，（有时存在具有 .jpg 和 .png 扩展名的相同图像名称）。

或者您可以创建新项目并将所有内容粘贴到新项目中，然后再次检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:25:33.323

*   单击项目 --> 自动构建
*   自动检查构建
*   清理项目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-06T10:44:01.763

简单的方法！转到导入部分（当前java类的顶部）并删除错误的导入R，然后越过R并单击Alt+Enter，然后android studio import true R。

# html - 删除之间的空间

> ID：15201167
> 
> 赞同：1
> 
> 时间：2013-03-04T12:04:27.263
> 
> 标签：html, space

我在此网站模板 ( [http://andreasviklund.com/dt_portfolio/this-is-me-dark/](http://andreasviklund.com/dt_portfolio/this-is-me-dark/) ) 中添加了两个 Skype 按钮 ( [https://dev.skype.com/skype-uri/generator](https://dev.skype.com/skype-uri/generator) ) ，我在其中进行了修改以下 HTML 代码：

```
 <li id="contact" class="section">
        <h2>Contact</h2>
        <div id="address">
            <h3>Your Name</h3>
            <p>Street Name XX,<br />
            Floor YY,<br />
            City Name, Country</p>
            <p>Telephone: +123 000 000<br />
            Mobile: +123 000 000<br />
            E-mail: <a href="#">youraddress@yourserver.com</a></p>
            <script type="text/javascript" src="http://cdn.dev.skype.com/uri/skype-uri.js"></script>
            <div id="genSkypeCall_01">
                <script type="text/javascript">
                    Skype.ui({
                        name: "call",
                        element: "genSkypeCall_01",
                        participants: ["yourSkypeName"],
                        imageSize: 32,
                        imageColor: "skype"
                    });
                </script>
            </div>
            <div id="genSkypeCall_02">
                <script type="text/javascript">
                    Skype.ui({
                        name: "chat",
                        element: "genSkypeCall_02",
                        participants: ["yourSkypeName"],
                        imageSize: 32,
                        imageColor: "skype"
                    });
                </script>
            </div>
        </div>
        <div id="map">
            <img alt="Sample map" src="http://maps.googleapis.com/maps/api/staticmap?center=59.32463,18.073583&amp;zoom=11&amp;size=305x200&amp;sensor=false&amp;markers=color:red%7C59.32463,18.073583" />           
        </div>
    </li> 
```

CSS代码如下（我没有修改）：

```
/*
Original design: This is me (dark) (v1.2 - Sep 12, 2012) - A free xhtml/css website template for andreasviklund.com.
For more information, see http://andreasviklund.com/templates/this-is-me-dark/

Includes:
jQuery from http://jquery.org/
Poptrox jQuery plugin by nodethirtythree: http://www.nodethirtythree.com/jquery_plugins.html
jQuery.ScrollTo and jQuery.LocalScroll by Ariel Flesler: http://flesler.blogspot.com/
Icons fom http://www.komodomedia.com/
*/

*{border:0;font:inherit;font-size:100%;margin:0;padding:0;vertical-align:baseline;}
body{background-color:#fafafa;color:#646464;font:12px/16px Cabin, Helvetica, Arial, sans-serif;}
ol,ul{list-style:none;list-style-image:none;list-style-position:outside;list-style-type:none;}
a img{border:none;}
a{color:#000;text-decoration:none;}
a:hover,a:focus{color:#666;text-decoration:underline;}
p{font-family:Cabin, sans-serif;padding:0 2px 10px;}
h2{color:#333;font:22px Cabin, sans-serif;padding:6px 0 10px;}
.left{float:left;margin:0 15px 5px 0;}
.right{float:right;margin:0 0 5px 15px;}

#mainwrap{margin:0 auto;overflow:hidden;position:relative;width:640px;}
#cardstyle{background-color:#fff;border:1px solid #d4d4d4;height:300px;margin:125px auto 20px;overflow:hidden;padding:6px;position:relative;width:600px;}
#content{background-color:#fafafa;height:300px;overflow:hidden;position:relative;width:600px;}
#pagecontainer{position:relative;width:9999px;}
.section{float:left;height:275px;margin-right:50px;padding:0 10px 25px;position:relative;width:568px;}

#menuwrap{margin:0 auto;}
#iconmenu{bottom:0;clear:both;height:22px;left:180px;overflow:hidden;padding:8px 0 6px 10px;position:absolute;text-align:center;width:auto;z-index:100;}
#iconmenu li{display:block;float:left;}
#iconmenu li a{display:block;float:left;opacity:0.4}
#iconmenu li img{padding:0 10px;}
#iconmenu li a.selected,#iconmenu li a:hover,#iconmenu li a:focus{opacity:1;}

#start{height:188px;padding:80px 15px 30px;}
#start h1{color:#2e6dd1;font:normal 90px Allura, Helvetica;line-height:0.9em;margin:0;padding:10px 0;text-align:center;text-shadow:0 1px 0 #fff;}
p.tagline{color:#666;font-size:16px;text-align:center;}

#bio img{border:3px solid #fff;box-shadow:1px 1px 0px #aaa;}

.poptroxactive{list-style:none;margin:0 auto;padding:0;width:100%;}
.poptroxactive li{float:left;height:110px;margin:0 30px 8px 0;}
.poptroxactive li img{border:3px solid #fff;box-shadow:1px 1px 0px #aaa;cursor:pointer;width:100px;}
.poptrox_popup{background:#fff;border-radius:12px;box-shadow:0px 0px 50px #111;padding:1em 1em 3em;position:relative;}
.poptrox_popup .loader{background:url('images/loader.gif') top center no-repeat;border-radius:8px;display:block;margin:55px 0 0;text-indent:-9999em;}
.poptrox_popup .caption{bottom:1em;left:1em;position:absolute;}
.poptrox_popup .closer{bottom:1em;position:absolute;right:1em;}

#social ul{padding:2px 0;}
#social li{display:block;float:left;height:46px;margin:0 14px 12px 0;overflow:hidden;width:252px;}
#social li a{color:#666;display:block;float:left;height:32px;overflow:hidden;padding:0 0 3px;width:252px;}
#social li a:hover,#social li a:focus{color:#333;text-decoration:none;}
#social img{float:left;margin:0 16px 0 10px;}
#social strong{color:#333;display:block;font-size:14px;font-weight:700;}

#address{border-right:1px solid #ddd;float:left;margin-right:20px;padding:0 0 0 1px;width:240px;}
#address h3{color:#333;font-size:14px;font-weight:700;padding:6px 2px 0;}

#footer{color:#999;text-align:center;width:100%;}
#footer a{color:#999;}

/* If you want to add styles for the custom page, you can do it by using the ID #custom, like this:
#custom h2{color:blue;}
#custom p{text-align:center;}
*/

/* Custom styles for inverting the default color scheme. See 
http://andreasviklund.com/learn/this-is-me-template-with-inverted-colorscheme/
for more information. */

body.inverted {background-color:#1a1a1a;color:#e0e0e0;}
body.inverted #cardstyle {background-color:#101010;border:1px solid #2a2a2a;}
body.inverted #content {background-color:#181818;}
body.inverted h2 {color:#eee;}
body.inverted #start h1 {color:#ddd;text-shadow:0 1px 0 #111;}
body.inverted #bio img {border:3px solid #111;box-shadow:0px 0px 2px #000;}
body.inverted .poptroxactive li img {border:3px solid #111;box-shadow:0px 0px 2px #000;}
body.inverted .poptrox_popup{background-color:#222;}
body.inverted #social li a {color:#ddd;}
body.inverted #social strong {color:#eee;}
body.inverted #address h3 {color:#eee;}
body.inverted #address {border:0;}
body.inverted #footer, body.inverted #footer a {color:#777;}
body.inverted a {color:#ddd;} 
```

正如标题所暗示的那样，我的问题是它仍然存在很大的差距，无论是在文本块和第一个 Skype 按钮“呼叫”之间，还是在这个和第二个按钮“聊天”之间（甚至使这个按钮在屏幕下消失） .

由于我是 HTML 的新手，所以我想请你帮忙看看如何设置这些空间。

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:21:41.347

我通过将以下样式添加到样式表的末尾来使其工作：

```
p#genSkypeCall_01_paraElement a img, p#genSkypeCall_02_paraElement a img {
    margin:0 !important;
    vertical-align:0 !important
}
div#genSkypeCall_02, div#genSkypeCall_01 {
    display:inline-block;
} 
```

我很抱歉`!important`在我的 CSS 中使用这里，但负责您的问题的代码是由 Skype JavaScript 创建的内联代码，并且必须被覆盖。

在这里查看：http: [//jsfiddle.net/LHEKd/01](http://jsfiddle.net/LHEKd/01)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T04:31:38.840

我一直在与此作斗争，我不得不对 ProbibilityWolf 的答案进行一些更改

这是我的版本：

# call_r_paraElement 是我的 javascript 代码生成的 p 的名称。

```
#call_r_paraElement { margin:0px !important;display:inline;  }
#call_r_paraElement a img, #call_r_paraElement a img {
    margin:0 !important;
    vertical-align:0 !important;    
} 
```

# java - 从活动外部使用自定义对话框

> ID：15201171
> 
> 赞同：0
> 
> 时间：2013-03-04T12:04:51.767
> 
> 标签：java, android, dialog, customdialog

我正在努力从活动外部使用自定义对话框，我已经在一个类中编写了对话框代码，然后在单击按钮时在活动中调用该对话框。但这对我不起作用当我单击 showDialog 按钮时应用程序崩溃。下面是代码

**活动代码**

```
package com.Customers;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.res.Resources.Theme;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
    Context context;
    int theme;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dialog);
        Button showDialog=(Button)findViewById(R.id.show_dialog);
        showDialog.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Custom_Dialog calcDialog=new Custom_Dialog(context,R.style.myCoolDialog);
                calcDialog.dailogCalculator();
            }
        });
    }
} 
```

**自定义对话框类**

```
package com.Customers;

import android.app.Dialog;
import android.content.Context;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.EditText;

public class Custom_Dialog extends Dialog implements android.view.View.OnClickListener{
        Context mContext;
        protected Custom_Dialog(Context context, int theme) {
            super(context, theme);
         }
        public boolean TouchEvent(int actionOutside) {
            return false;
    }

    public void dailogCalculator(){
                Custom_Dialog alertbox = new Custom_Dialog(mContext, R.style.myCoolDialog);
                alertbox.requestWindowFeature(Window.FEATURE_NO_TITLE);
                alertbox.setContentView(R.layout.calculator);
                EditText calcDisplay=(EditText)alertbox.findViewById(R.id.editText1);
                Button value1=(Button) alertbox.findViewById(R.id.button1);
                value1.setOnClickListener(this);
                Button value2=(Button) alertbox.findViewById(R.id.button2);
                value2.setOnClickListener(this);
                Button value3=(Button) alertbox.findViewById(R.id.button3);
                value3.setOnClickListener(this);
                Button value4=(Button) alertbox.findViewById(R.id.button4);
                value4.setOnClickListener(this);
                Button value5=(Button) alertbox.findViewById(R.id.button5);
                value5.setOnClickListener(this);
                Button value6=(Button) alertbox.findViewById(R.id.button6);
                value6.setOnClickListener(this);
                Button value7=(Button) alertbox.findViewById(R.id.button7);
                value7.setOnClickListener(this);
                Button value8=(Button) alertbox.findViewById(R.id.button8);
                value8.setOnClickListener(this);
                Button value9=(Button) alertbox.findViewById(R.id.button9);
                value9.setOnClickListener(this);
                Button value00=(Button) alertbox.findViewById(R.id.button00);
                value00.setOnClickListener(this);
                Button value0=(Button) alertbox.findViewById(R.id.button0);
                value0.setOnClickListener(this);
                Button backspaceBtn=(Button) alertbox.findViewById(R.id.backspace);
                backspaceBtn.setOnClickListener(this);
                Button Ok_dialog=(Button)alertbox.findViewById(R.id.ok_dialog);
                Ok_dialog.setOnClickListener(this);
                Button Qty_btn=(Button)alertbox.findViewById(R.id.btn_qty);
                Qty_btn.setOnClickListener(this);
                alertbox.show();  
    }
        @Override
        public void onClick(View v) {

            switch(v.getId()){
            case R.id.button1:

                break;
            case R.id.button2:

                break;
            case R.id.button3:

                break;
            case R.id.button4:

                break;
            case R.id.button5:

                break;
            case R.id.button6:

                break;
            case R.id.button7:

                break;
            case R.id.button8:

                break;
            case R.id.button9:

                break;
            case R.id.button0:
                break;
            case R.id.button00:
                break;
            case R.id.backspace:
                break;
            case R.id.btn_qty:
                break;
            case R.id.ok_dialog:
                break;
            }

        }   

    } 
```

**日志猫**

```
03-04 16:54:47.293: E/AndroidRuntime(275):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 17:16:22.793: E/AndroidRuntime(332): FATAL EXCEPTION: main
03-04 17:16:22.793: E/AndroidRuntime(332): java.lang.NullPointerException
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.app.Dialog.<init>(Dialog.java:141)
03-04 17:16:22.793: E/AndroidRuntime(332):  at com.Customers.Custom_Dialog.<init>(Custom_Dialog.java:13)
03-04 17:16:22.793: E/AndroidRuntime(332):  at com.Customers.MainActivity$1.onClick(MainActivity.java:24)
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.view.View.performClick(View.java:2408)
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.view.View$PerformClick.run(View.java:8816)
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.os.Handler.handleCallback(Handler.java:587)
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
03-04 17:16:22.793: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-04 17:16:22.793: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
03-04 17:16:22.793: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:521)
03-04 17:16:22.793: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-04 17:16:22.793: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-04 17:16:22.793: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method) 
```

请指导我在哪里做错了。它也确实对其他人有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:08:34.700

将构造函数更改`Custom_Dialog`为：

```
Context mContext;
        protected Custom_Dialog(Context context, int theme) {
            super(context, theme);
           this.mContext=context;  //<<<<<<  initialize  mContext here
         } 
```

并且在将其传递给构造函数之前使用 Activity 上下文进行`MainActivity`onCreate 初始化：`context``Custom_Dialog`

```
 //......your code here
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dialog);
        context=MainActivity.this //<<<<< initialize  context here
        //......your code here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:10:32.863

您没有`mContext`在构造函数中实例化上下文。问题似乎在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:13:23.493

试试这个方法。它会解决它。

```
 public class MainActivity extends Activity {
    Context context;
    int theme;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dialog);
        context= this;
        Button showDialog=(Button)findViewById(R.id.show_dialog);
        showDialog.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Custom_Dialog calcDialog=new Custom_Dialog(context,R.style.myCoolDialog);
                calcDialog.show();
            }
        });
    }
} 
```

***自定义对话框.java***

```
@Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.calculator);

            EditText calcDisplay=(EditText)findViewById(R.id.editText1);
            Button value1=(Button) findViewById(R.id.button1);
            value1.setOnClickListener(this);
            Button value2=(Button) findViewById(R.id.button2);
            value2.setOnClickListener(this);
            ....... 

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:13:07.913

这不是我认为的正确方式。您必须使用主题对话框创建一个活动并调用此活动。该活动应该看起来像一个对话框。

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T12:33:10.470

您必须像这样在单独的类中创建对话框

```
 Custom_Dialog alertbox = new Custom_Dialog(currentActivity); 
```

currentActivity 是当前活动参考。

之后

```
LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

因此，您必须为另一个类传递上下文和当前活动引用。

# ruby-on-rails - 如何在活动管理仪表板部分使用 current_admin_user

> ID：15201173
> 
> 赞同：1
> 
> 时间：2013-03-04T12:04:52.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

只有当用户是超级管理员时，我才想在仪表板中显示部分。

伪代码（说话很便宜，给我看代码）。

```
 if current_admin_user.superadmin?
    section "Super admin menu" do
      div do
        link_to "Admins permissions", admin_admin_permissions_url
      end
    end
  end 
```

我怎样才能做到这一点？

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:27:49.857

我实际上没有尝试过，但根据发行说明，从[0.4.1](http://reverbhq.com/blog/2012/02/active-admin-0-4-1-released/)开始，您可以通过传递可选的“if”条件有条件地显示*大多数组件：*

```
section "Super admin menu", if: -> { current_admin_user.super_admin? } do
  div do
    link_to "Admins permissions", admin_admin_permissions_url
  end
end 
```

# python - 无法在python中打开文件

> ID：15201187
> 
> 赞同：0
> 
> 时间：2013-03-04T12:05:20.660
> 
> 标签：python, python-2.7

我在打开文件时遇到问题，python（2.7）告诉我没有这样的文件，但是有。

```
 csvData = None
        csvHeader = None
        os.chdir("../result/files/")
        for fileName in os.listdir("."):
            if fileName.endswith(".csv"):
                print fileName
                with open("../result/files/"+fileName, 'rb') as csvFile:
                    readerCsv = reader(csvFile, delimiter = ';')
                    csvHeader = readerCsv.next()
                    _unused = readerCsv.next()
                    self.data = list.append(list(readerCsv)) 
```

此代码应读取 5 个 csv 文件并将其内容存储在数据中（第一行除外）

起初 chdir 告诉我他找到了 Stats20120903.csv 然后我要求程序打开所述文件但我收到一个错误：

```
IOError: [Errno 2] No such file or directory: '../files/Stats20120903.csv' 
```

为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:06:55.513

做

```
with open(fileName, 'rb') as csvFile: 
```

而不是相对于您更改的目录查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:09:05.320

[`os.chdir`](http://docs.python.org/3/library/os.html?highlight=chdir#os.chdir)不会告诉您目录中有什么，它会更改当前的工作路径。您提供的所有相对文件路径都相对于工作目录。

你应该要么

*   删除`os.chdir("../result/files/")`并调用 os.listdir("../result/files/") 或
*   不要添加`"../result/files/"`到您要打开的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:07:59.673

您可以尝试使用`os.path.abspath()`来找出 Python 尝试使用的实际路径。

# java - 下载文件需要很长时间

> ID：15201189
> 
> 赞同：1
> 
> 时间：2013-03-04T12:05:26.620
> 
> 标签：java, android

```
 URL url = new URL(myurl);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setReadTimeout(10000 /* milliseconds */);
            conn.setConnectTimeout(15000 /* milliseconds */);
            conn.setRequestMethod("GET");
            conn.setDoInput(true);
            // Starts the query
            conn.connect();
            int response = conn.getResponseCode();
            Log.d("1", "The response is: " + response);

            in = new BufferedInputStream(conn.getInputStream());

            out = new FileOutputStream(file);

            int bufferLength = 0;
            byte[] buffer = new byte[1024];

            while ((bufferLength = in.read(buffer)) > 0) {
                out.write(buffer, 0, bufferLength);
            } 
```

我正在下载小的 xml 文件，然后解析它并从此文件创建对象。

文件大小 3,8 kB。但是下载开始后需要几秒钟才能显示一些数据。当我在没有互联网连接的情况下解析已经下载的文件时，显示数据不到一秒钟。由此我得出结论，问题出在这种方法上。PS我忘了说，在那之后它正在下载一些小的缩略图。

我测量了时间

```
@Override
protected ArrayList<?> parseData(File dataFile) {
    // TODO Auto-generated method stub
    long startTime = System.currentTimeMillis();

    ArrayList<Training> list = new ArrayList<Training>();
    MyParser parser = new MyParser();
    MyFileDownloader downloader = new MyFileDownloader();
    try {
        list = parser.parseTrainings(dataFile);
        boolean networkAvaible = fragment.isNetworkAvailable();
        for (int i = 0; i < list.size(); i++) {
            if (networkAvaible)
                downloader.downloadFile(list.get(i).getImageURL(), new File(fragment.getDataFolder(), "image"+i));
            String path = fragment.getDataFolder().getPath() + "/image"+i;
            Drawable im = Drawable.createFromPath(path);
            list.get(i).setImage(im);
        }

    } catch (XPathExpressionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    long stopTime = System.currentTimeMillis();
    long elapsedTime = stopTime - startTime;
    Log.d("******TIME PASSED******", String.valueOf(elapsedTime));
    return list; 
```

当有互联网连接并且我需要下载文件时，大约需要 9-11 秒。当不需要下载它们时，大约需要 0.5 秒。如何减少下载此文件的时间？文件大小总和为 5236 Mbits。使用我的 20Mbps wi-fi 下载它应该不到 1 秒。一两秒就好了。但是 9 甚至 16 秒？那是糟糕的用户体验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:01:45.197

尝试使用 asynctask 下载文件。这是一个很好的例子，参考这个。

> [http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/](http://www.androidhive.info/2012/04/android-downloading-file-by-showing-progress-bar/)

# tfs - 客户端上的 TFS Checkin 成功事件

> ID：15201190
> 
> 赞同：0
> 
> 时间：2013-03-04T12:05:29.807
> 
> 标签：tfs, checkin

我已使用复选框扩展了我的 Visual Studio TeamExplorer-PendingChanges-Page，您需要先检查该复选框，然后才能检查任何更改。为此，我编写了一个 Checkin-Policy 并且它有效。

但是我有一个问题，在我签入变更集后，复选框仍然处于选中状态。如果签入成功，我想取消选中复选框。

如何在客户端获取 CheckinNotification ？

我能找到的只是服务器端。

我很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:55:53.343

签入完成时会引发来自 VersionControlServer 的 AfterWorkItemsUpdated 事件。

[http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.afterworkitemsupdated.aspx](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.afterworkitemsupdated.aspx)

# ruby-on-rails - Ruby on Rails - 建模有向图

> ID：15201192
> 
> 赞同：1
> 
> 时间：2013-03-04T12:05:33.550
> 
> 标签：ruby-on-rails, ruby, directed-graph

我正在尝试为我的 ruby​​ on rails 应用程序建模一个有向图我有两个模型，标签和连接

```
class Connection < ActiveRecord::Base
  attr_accessible :cost, :from_id, :to_id
  belongs_to :from_tag, :foreign_key => "from_id", :class_name => "Tag" 
  belongs_to :to_tag, :foreign_key => "to_id",   :class_name => "Tag" 
  end

class Tag < ActiveRecord::Base
  attr_accessible :location_info, :reference
  has_many :to_connections, :foreign_key => 'from_id', :class_name => 'Connection' 
  has_many :to_tags, :through => :to_connections  
  has_many :from_connections, :foreign_key => 'to_id', :class_name => 'Connection' 
  has_many :from_tags, :through => :from_connections
  end 
```

当我像这样创建标签时

```
a = Tag.create(:reference => "a", :location_info => "Tag A")
b = Tag.create(:reference => "b", :location_info => "Tag B") 
```

它工作正常。

但是当我试图在两者之间建立联系时

```
Connection.create(:from_tag => a, :to_tag => b, :cost => 5) 
```

我收到一条错误消息

“ActiveModel::MassAssignmentSecurity::Error：无法批量分配受保护的属性：from_tag 和 to_tag”

，谁能看到问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:16:45.800

您不能批量分配关系。

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

```
connection = Connection.new
connection.from_tag = a
connection.to_tag = b
connection.cost = 5
connection.save 
```

# django - 可以在 URL 模式中使用 url 参数吗？

> ID：15201195
> 
> 赞同：0
> 
> 时间：2013-03-04T12:05:59.193
> 
> 标签：django

我正在将系统的服务器端从 PHP 转换为 Django，并且正在考虑是否有可能拥有依赖于参数而不仅仅是 URL 的 urlpatterns？

示例：这两个 url 执行两个完全不同的功能：

```
/trackme/requests.php?a=upload

/trackme/requests.php?a=gettriplist 
```

由于我无法更改客户，我想让它们匹配两种不同的模式。

目前我必须做一个大如果。我希望它直接从 URL 调用正确的函数

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:18:56.403

你不能，我害怕。在匹配 urlconf 中的任何正则表达式之前，查询字符串会从 URL 中删除。

我认为您将不得不处理您视图中的字符串。

```
if 'a' in request.GET:
    if request.GET['a'] == 'upload':
        #...
    elif request.GET['a'] == 'gettriplist':
        #... 
```

# javascript - toggleClass 在滑块上不起作用

> ID：15201201
> 
> 赞同：0
> 
> 时间：2013-03-04T12:06:30.703
> 
> 标签：javascript

我正在尝试使用 .toggleClass 更改链接上的类，以便在切换打开/关闭时将背景图像从加号交换为减号。它似乎引用了正确的代码片段，正如我在 Firebug 中看到的那样，它试图更改类，但实际上并没有发生更改。这是我拥有的代码：

```
<div class="slide-click-container">
<a href="#" class="slide-click-link">
    Click here to expand/contract

    <span class="control-arrow"><!-- PLUS/MINUS SIGN BACKGROUND IMAGE HERE --></span>
</a>

<div class="slider hide"> <!-- HIDE CLASS SETS DIV TO DISPLAY:NONE -->
    Content here
</div>
</div>

<script type="text/javascript">

$(".slide-click-container").click(function(ev){
ev.preventDefault();
$(this).find(".slider").slideToggle('slow');
$(this).find(".control-arrow").toggleClass('open');
});

</script> 
```

您能提供的任何帮助将不胜感激！

谢谢！

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:37:59.493

给你的班级一些布局和一些内容：

```
.control-arrow {
    width:14px;
    display:inline-block;
 } 
```

和一个固定的空间：

```
<span class="control-arrow">&nbsp;<!-- PLUS/MINUS SIGN BACKGROUND IMAGE HERE --></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:17:06.793

你不需要为此使用`find`。

```
$(".slide-click-container").click(function(ev){
   ev.preventDefault();
   $(".slider").slideToggle('slow');
   $(".control-arrow").toggleClass('open');
 }); 
```

编辑：使用`next`and`closest`代替

```
$(".slide-click-container").click(function(ev){
   ev.preventDefault();
   $(this).parent().next().slideToggle('slow');
   $(this).closest(".control-arrow").toggleClass('open');
}); 
```

# xamarin.ios - 如何在单声道触摸中从位矩阵创建二维码图像

> ID：15201216
> 
> 赞同：0
> 
> 时间：2013-03-04T12:07:03.400
> 
> 标签：xamarin.ios

我正在使用**zXing.net.monotouch.dll**库在 monotouch 中创建 QRCode。我通过使用以下代码获得了位矩阵。我不知道如何将其转换为图像。在网络中，每个人都使用**com.google.zxing.common.BitMatrix**但我的程序不支持它。请给我一个解决方案：

```
ZXing.QrCode.QRCodeWriter ObjQrCodeWriter= new ZXing.QrCode.QRCodeWriter();
ZXing.Common.BitMatrix bitMatrix1=ObjQrCodeWriter.encode("this is a string content",ZXing.BarcodeFormat.QR_CODE,60,60); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T07:05:42.920

使用 ZXing.BarcodeWriter 类。

```
var writer = new ZXing.BarcodeWriter
{ 
   Format = BarcodeFormat.QR_CODE, 
   Options = new EncodingOptions { Height = 60, Width = 60 } 
};
var image = writer.Write("this is a string content"); 
```

# sql - 命名/引用连接表

> ID：15201219
> 
> 赞同：0
> 
> 时间：2013-03-04T12:07:08.250
> 
> 标签：sql, join, alias

我把 4 张桌子连在一起。

以后怎么参考？我可以或是否需要命名此表？

这是一个简单的内部连接：

```
select *
from table1 as 1
inner join table2 as 2 on x=y
inner join table3 as 3 on a=y
inner join table4 as 3 on z=a 
```

现在当我稍后在代码中引用它时，我该怎么做？

我试图将所有内容（从 table1 到 z=a）放在括号中，并在其后面加上“as tablename”——它没有用。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:09:39.153

Once you provide a name to the table alias, you would refer to the alias in your joins as well as in your `SELECT` list:

```
select t1.x,
  t2.y,
  t3.y,
  t4.a
from table1 as t1
inner join table2 as t2 
  on t1.x = t2.y 
inner join table3 as t3 
  on t1.a = t3.y
inner join table4 as t4 
  on t1.z = t4.a 
```

You will see that when I provided the table alias' above I provided a name that began with a letter and not a number.

# java - 一个组合框无法将其所有项目添加到 ms access 数据库中

> ID：15201220
> 
> 赞同：0
> 
> 时间：2013-03-04T12:07:14.320
> 
> 标签：java, ms-access-2010

```
>  [i want to add all combobox item in msaccess database] 
```

我想这样做我想将一个组合框的每个项目添加到 msaccess 数据库中，例如我想
这样做我的组合有 4 个字段一、二、三、四，而数据库有四个字段 route1、route2、route3、route4 .. .我想设置为 route1=one, route2= two....等。如果我在组合框中添加了 2 个项目，那么剩下的两个不会保持空白。

```
if(e.getSource()==btn_save)
{
    try{

         Connection con;

         DriverManager.registerDriver(new sun.jdbc.odbc.JdbcOdbcDriver());

         Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

         con = DriverManager.getConnection("jdbc:odbc:dsnproj","","");

         Statement s1 = con.createStatement();

         String q1="insert dest,route1,route2,route3,route4 into trans_dest values(
                    '"+cmb_dest.getSelectedItem()+"',
                    '"+cmb_route.getItem(1)+"',
                    '"+cmb_route.getItem(2)+"',
                    '"+cmb_route.getItem(3)+"',
                    '"+cmb_route.getItem(4)+"')";

         s1.execute(q1);

         }

         catch(Exception ae)
         {
             System.out.println(ae);
         }
    }
}

  public void focusLost(FocusEvent e) {
   // throw new UnsupportedOperationException("Not supported yet.");

    if(e.getSource()==txt_route)
    {
      // transport t=new transport();

       JFrame frame = new JFrame();
       String[] options = {"Yes", "No"};

       int n = JOptionPane.showOptionDialog(frame,
        "Do you want to add more routes?",
        "",
        JOptionPane.YES_NO_OPTION,
        JOptionPane.QUESTION_MESSAGE,
        null, //do not use a custom Icon
        options, //the titles of buttons
        null); // disabled the ENTER Key

 System.out.println(n);

 if (n == JOptionPane.YES_OPTION) {

     cmb_route.add(txt_route.getText());

     txt_route.setText("");

 } else {

     cmb_route.add(txt_route.getText());
     txt_route.setText("");

 }
}

int i=cmb_route.getItemCount();
        if(i==4)
        {
            s1=cmb_route.getItem(0);
            s2=cmb_route.getItem(1);
            s3=cmb_route.getItem(2);
            s4=cmb_route.getItem(3);

            cmb_route.insert(s1, 0);
            cmb_route.insert(s2, 1);
            cmb_route.insert(s3, 2);
            cmb_route.insert(s4, 3); 

        }
        else
        if(cmb_route.getItemCount()==3)
        {
           s1=cmb_route.getItem(0);
            s2=cmb_route.getItem(1);
            s3=cmb_route.getItem(2);
            cmb_route.insert(s1, 0);
            cmb_route.insert(s2, 1);
            cmb_route.insert(s3, 2);
            cmb_route.insert("", 3);
        }

        else
        if(cmb_route.getItemCount()==2)
        {

             s1=cmb_route.getItem(0);
            s2=cmb_route.getItem(1);
            cmb_route.insert(s1, 0);
            cmb_route.insert(s2, 1);
            cmb_route.insert("", 2);
            cmb_route.insert("", 3);
        }
        else
        if(cmb_route.getItemCount()==1)
        {

            s1=cmb_route.getItem(0);
            cmb_route.insert(s1, 0);
            cmb_route.insert("", 1);
            cmb_route.insert("", 2);
            cmb_route.insert("", 3);

        }

    } 
```

[我收到错误] java.lang.ArrayIndexOutOfBoundsException: 3 >= 2

# azure - Azure 文件访问/访问 windows azure 云服务中的自定义配置文件

> ID：15201221
> 
> 赞同：2
> 
> 时间：2013-03-04T12:07:14.377
> 
> 标签：azure, azure-storage, file-access

我发现了一些关于 stackoverflow 的文章，我试图用这些文章来回答我对 Windows azure 云服务中文件访问的问题。

我的应用程序有许多用作自定义配置文件的 xml 文件，这些文件存储在 Web 项目中，因为这是能够管理/编辑它们的最方便的地方。

现在，当将此解决方案部署到本地 IIs 服务器时，我显然可以轻松访问和读取这些 xml 文件。我原本预计这在 Windows azure 云服务中会完全一样。但是我发现我在尝试读取这些文件时遇到了文件访问错误。

在阅读了这里的一些文章之后，很明显情况并非如此，要访问文件存储，我必须配置本地存储。

但是，这不太适合我的方案，因为此存储是临时的，不跨角色实例共享，并且不会在部署时填充 xml 配置文件。

我想将我的配置文件保留在项目中，因为它们与特定的发布版本相关联，所以这些都在源代码控制下很好，因为它们是在每个发布的部署中部署的。

我可以想到一种利用本地存储的方法，这可能是可能的，但不确定如何。部署时是否有任何方法可以将所有本地配置文件复制到本地存储帐户，然后应用程序可以在需要时从本地存储访问它们。我认为这将是临时的并且不共享的事实是可以的，因为每个实例都有自己的本地存储，并且也部署了配置文件。但我需要确保云服务是否崩溃，本地存储将重新填充必要的配置文件

还是有其他选择。？

显然，在所有文章中，建议是使用 azure stoage 并使用 blob，我可以这样做，但这会带来额外的问题，我必须找到一种方法，在每次部署到 azure 时自动部署所有配置文件。

我们将不胜感激地收到有关如何最好地实现这一目标的任何帮助。

正如我在下面的评论之一中提到的，配置文件是标准的 xml 文件，它们作为内容包含在解决方案中。当部署到本地服务器时，配置文件会被发布和部署并且可以读取。但是当部署到 azure 云服务时，配置文件被部署（正如我通过远程处理并在云服务 vm 上查找文件进行检查的那样）。但是每当我尝试阅读它们（使用 XmlSerializer）时，我都会收到拒绝访问错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:10:13.653

Kramer，如果您在项目中包含配置文件，并且将复制到输出设置为始终复制，或者将构建类型设置为内容，那么访问配置文件应该像在 IIS 中一样工作。查看以下 2 篇文章，了解如何执行此操作的示例：

*   [http://blogs.msdn.com/b/jnak/archive/2009/01/28/adding-files-to-your-windows-azure-service-package.aspx](http://blogs.msdn.com/b/jnak/archive/2009/01/28/adding-files-to-your-windows-azure-service-package.aspx)
*   [http://blogs.msdn.com/b/philliphoff/archive/2012/06/08/add-files-to-your-windows-azure-package-using-role-content-folders.aspx](http://blogs.msdn.com/b/philliphoff/archive/2012/06/08/add-files-to-your-windows-azure-package-using-role-content-folders.aspx)

# jquery - 在加载时使用动态内容刷新静态页面

> ID：15201222
> 
> 赞同：3
> 
> 时间：2013-03-04T12:07:16.663
> 
> 标签：jquery, jquery-mobile

我有一个*静态*页面，可以正常加载，然后使用*AJAX*和*JSON**动态*`background-image`更改。当用户向左/向右滑动或使用下一个/上一个按钮时，背景会发生变化。

 ***一切都很好，只是在页面启动时不会出现照片，除非我刷新页面 (F5)。我尝试了很多方法`.trigger('refersh')`，包括`.page('refresh')`但都失败了。

每当用户向左或向右滑动或使用导航按钮时，我都有下面的代码来加载相同的页面。

```
function animation() {
$.mobile.changePage( "#gallery", { // #galley is the static page ID.
allowSamePageTransition: true,
changehash: false,
transition: "flow"
});
} 
```

而这个显示加载ajax。

```
function showmsg() {
$.mobile.showPageLoadingMsg()
setTimeout(function() {
  $.mobile.hidePageLoadingMsg()
  }, 500);
 } 
```

**HTML**

```
<div data-role="page" class="demo-page" id="gallery">

<div data-role="header" data-position="fixed" data-fullscreen="true" data-tap-toggle="false">
    <h1>Photos Gallery</h1>
</div><!-- /header -->

<div data-role="content">   
</div><!-- /content -->

<div data-role="footer" data-position="fixed" data-fullscreen="true" data-tap-toggle="false">
    <div data-role="controlgroup" class="control ui-btn-left" data-type="horizontal" data-mini="true">
        <a href="#" class="prev" data-role="button" data-icon="arrow-l" data-iconpos="notext" data-theme="d">Previous</a>
        <a href="#" class="next" data-role="button" data-icon="arrow-r" data-iconpos="notext" data-theme="d">Next</a>
    </div>
</div><!-- /footer -->
</div><!-- /page --> 
```

**AJAX 和 JQM**

```
var ID = $('#displayid').val();
$.ajax({
Type: "GET",
url: 'photos.php',
data: { display: ID },
dataType: "json",
contentType: "application/json",
success: function(data) {
  var first = "url('" + data.items[0] + "')";
  $('[data-role="page"]').css({'background-image': first });
  var count = data.count - 1;
  var last = "url('" + data.items[count] + "')";
  console.log("last img " +data.items[0]);
  console.log("last img " +data.items[count]);
  console.log("number of photos " + count);
  var img = 0;
  var page = $(this);

  // Swipe events
  $('body').on('swiperight swipeleft', page, function (event){
      if (event.type == "swipeleft") {
          if (img == count) { $('[data-role="page"]').css({'background-image': first }); img = 0; }
          else { img++; }
          if (img >= 0 && img <= count) {
      var bg = "url('" + data.items[img] + "')";
        animation();
        showmsg();
      $('[data-role="page"]').css({'background-image': bg });
         } //if img
      } //if left
      if (event.type == "swiperight") {
          if (img == 0) { $('[data-role="page"]').css({'background-image': last }); img = 9; }
          else { img--; }
          if (img >= 0 && img <= count) {
       var bg = "url('" + data.items[img] + "')";
        animation();
        showmsg();
      $('[data-role="page"]').css({'background-image': bg });
         } //if img
         else { $('[data-role="page"]').css({'background-image': first }); img = 1; }
      } //if right 
  });// swipe event

  // .next & .prev  events
$('.next').on('click', page, function (){
    $(page).addClass("slidedown");
    if (img == count) { $('[data-role="page"]').css({'background-image': first }); img = 0; }
          else { img++; }
          if (img >= 0 && img <= count) {
      var bg = "url('" + data.items[img] + "')";
        animation();
        showmsg();
      $('[data-role="page"]').css({'background-image': bg });
 }
}); // .next
$('.prev').on('click', page, function (){
          if (img == 0) { $('[data-role="page"]').css({'background-image': last }); img = 9; }
          else { img--; }
          if (img >= 0 && img <= count) {
       var bg = "url('" + data.items[img] + "')";
        animation();
        showmsg();
      $('[data-role="page"]').css({'background-image': bg });
         } //if img
         else { $('[data-role="page"]').css({'background-image': first }); img = 1; }
 }); // .prev
 } // success
}); //ajax 
```

我如何在初始加载时刷新页面以显示图像，或者我应该使用*系统生成的页面更改**静态*页面？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:45:59.617

这是个问题。

因为在正确的页面加载事件期间没有触发 ajax 调用，所以在第一个页面加载期间没有绑定滑动事件，因为页面没有加载到 DOM 中。

在刷新（第二页加载）期间，页面已经在 DOM 中，一切正常。

要解决此问题，请将您的 ajax 调用包装到此：

```
$(document).on('pagebeforeshow', '#gallery', function(){      
    //your ajax call should go here
}); 
```****

# html-table - 为什么这些空间在我的桌子上？

> ID：15201223
> 
> 赞同：0
> 
> 时间：2013-03-04T12:07:18.627
> 
> 标签：html-table, cell, space

你能帮我请如何删除这些空格？[这张图片](https://i.stack.imgur.com/yP0ki.gif)显示了我的问题：

![](../Images/df83da49006fda722e76879f7f26c81a.png)

任何人都可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:14:00.893

对第 1 次和第 3 次 td 使用 valign 属性。

```
<tr><td valign="top"></td><td></td><td valign="top"></td></tr> 
```

# c - 如何动态改变 char 指针大小？

> ID：15201224
> 
> 赞同：0
> 
> 时间：2013-03-04T12:07:23.900
> 
> 标签：c, pointers

我使用 realloc 动态增加 char 指针 (*seqA) 的大小。还有其他更好的方法吗？

这是我的代码的一部分：

```
 while((holder=fgetc(fileA)) != EOF) {
    lenA++;
    temp=(char*)realloc(seqA,lenA*sizeof(char));
    if (temp!=NULL) {
        seqA=temp;
    seqA[lenA-1]=holder;
    }
    else {
        free (seqA);
        puts ("Error (re)allocating memory");
        exit (1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:15:44.623

由于您的代码正在将完整文件读入字符串，为什么不使用以下代码：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

....

struct stat buf;
fstat(fileno(fileA), &buf);
seqA = malloc(buf.st_size);
fread(seqA, buf.st_size, 1, fileA); 
```

当然，您应该检查这些函数的返回值并采取适当的措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:42:26.517

为什么要质疑算法的一小部分？更全面地审视整个算法可能是一个更好的主意。您当前的算法依赖于这种相当密集且不必要的代码。如果您可以消除将整个文件读入内存的依赖，那么您的解决方案将更具可扩展性。也许通过“一种更好的方法”，您的意思是“更快”或“这样我就可以处理 100GB 大小的文件而不会停止爬行”。

Consider a [finite state machine](http://en.wikipedia.org/wiki/Finite-state_machine) that can read, process and extract the required information from your file one byte at a time. You probably wouldn't need malloc so much. Without a specific description of your problem, we can't help you derive a finite state machine to solve your problem. However, one example that stands out might be finding a maximum integer in a 100GB file:

```
while (fscanf(file, "%d", &current_num) == 1) {
    if (current_num > max_num) {
        max_num = current_num;
    }
} 
```

This code clearly doesn't need malloc, let alone to read the entire file into memory; It'll only ever use a constant amount of memory, regardless of the size of the file.

# css - 从正方形到填充渐变的右梯形的动画变换

> ID：15201231
> 
> 赞同：1
> 
> 时间：2013-03-04T12:07:45.217
> 
> 标签：css, transform, css-animations

我需要从正方形到右梯形填充渐变的动画。这是我所做的：http: [//jsfiddle.net/7Aav7/](http://jsfiddle.net/7Aav7/)。

```
#box {
    border-bottom: 100px solid transparent;
    border-left: 50px solid transparent;
    border-right: 50px solid transparent;
    height: 0;
    width: 50px;
    background-origin: border-box;
    background-image: -webkit-linear-gradient(blue, yellow);
    border-right: 0px solid white;
    -webkit-animation: rightTrapezoid 2s infinite alternate;
}
@-webkit-keyframes rightTrapezoid {
    to {
        border-right-width: 50px;
    }
} 
```

但在这种情况下，我的右边框是白色的 - 我需要它是透明的（不要与身体颜色绑定）。有什么办法可以做到这一点？这可能与css转换吗？谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:13:17.650

这是我的解决方案，使用包装器 div。

（无聊的）html：

```
<div id="container">
<div id="inner">
</div>
</div> 
```

在内部 div 中，标准的东西。只注意负左

```
#inner {
    width: 400px;
    height: 150px;
    left: -50px;
    position: absolute;
    background-image: -webkit-linear-gradient(blue, yellow);
    -webkit-animation: rightTrapezoid 2s infinite alternate;
} 
```

和动画，只是使用倾斜

```
@-webkit-keyframes rightTrapezoid {
    to {
        -webkit-transform: skew(30deg,0deg); 
    }
} 
```

这会在 div 的两侧生成动画。为了隐藏左侧移动，我使用了容器 div，隐藏了溢出（使用内部 div 的负左侧）

```
#container {
    left: 55px;
    top: 0px;
    width: 400px;
    height: 150px;
    position: absolute;
    overflow: hidden;
} 
```

[这是小提琴](http://jsfiddle.net/Se9VK/)

# android - 我可以自己提交申请吗？

> ID：15201232
> 
> 赞同：1
> 
> 时间：2013-03-04T12:07:47.550
> 
> 标签：android, payment, google-play

昨天我发布了我的第一个付费应用程序。我自己买不到吧？是否可以将付费版本的访问权限授予其他用户？例如，为特定用户提供付费版本。

谢谢你，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:10:09.130

两种解决方案：

1.  构建一个apk并将其发送给他们。
2.  让他们购买并退款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:10:30.940

您可以构建 apk 并将其通过电子邮件发送给他们。但是，他们不会通过 Play 商店获得更新。

# java - 使用 arraylist 处理大量数据

> ID：15201235
> 
> 赞同：0
> 
> 时间：2013-03-04T12:08:11.583
> 
> 标签：java, performance

我在java中有一个作业问题。

我有一个 GB 大小的文本文件。阅读它，并找到该文件中每个单词的出现次数，并将其显示为 [<< word >> - <>]。

最好的情况是所有的词都是一样的。所以我会显示没有出现的单词，但考虑最坏的情况，比如文件中存在的单词是唯一的。所以我需要显示所有出现为 1 的单词。

如何处理这个庞大的数据列表？我们对此有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:51:09.497

理想情况下，用 java 编写 Map-Reduce 程序可能是最好的方法。这是使用 Map-Reduce 范例的字数统计程序示例：[字数示例](http://wiki.apache.org/hadoop/WordCount)

其他方法可以使用递归读/写操作来执行此操作。创建一个地图（每个字母一个地图），以便您可以拥有 26 个地图。根据起始字母将单词放在适当的地图中。当达到一定的地图大小时，将该地图中的所有单词连同其增加的计数一起写入带有一些标识的文件，以了解其中包含哪些单词。从文件中读取所有单词后（以 GB 为单位的大小），从磁盘读回文件并计算字数。这将涉及一些 IO，但我认为不会导致任何与内存相关的问题。

# r - 在 R 中保存 Jags/Winbugs 输出

> ID：15201236
> 
> 赞同：1
> 
> 时间：2013-03-04T12:08:19.950
> 
> 标签：r, output, winbugs, jags

我在 R 中运行 Jags/Winbugs，效果很好，但我无法将输出保存到文本或 csv 文件（两者都可以）

```
TEST.sim<- jags(data=jags.data, 
                parameters.to.save=jags.params, 
                n.iter=200000,jags.seed=123, 
                model.file="~/Documents/ARRModel.txt") 
```

我需要的是一种保存输入时出现的输出的方法：

```
print(TEST.sim) 
```

当我尝试 write.table 时，它​​给出以下错误：无法将类“错误”强制转换为 data.frame

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:22:29.893

如果您使用库`R2jags`和函数，`jags()`则函数`print()`会生成存储在列表元素`BUGSoutput`和子列表中的统计信息表`summary`。您可以直接访问这些数据并将其存储为其他对象（或直接在函数中使用`write.table()`），然后写入文本文件。

```
jag.sum<-TEST.sim$BUGSoutput$summary
jag.sum

                mean         sd        2.5%         25%         50%          75%        97.5%     Rhat n.eff
alpha     19.6399640 1.22982919  17.1888046  18.8401629  19.6391880  20.45108889  22.03860486 1.001312  4100
beta1     -0.1063905 0.01755548  -0.1409861  -0.1180097  -0.1064871  -0.09469226  -0.07198614 1.001028 18000
beta2     -0.1857631 0.03667742  -0.2573464  -0.2103279  -0.1860142  -0.16155874  -0.11304929 1.001138  7700
deviance 192.6742580 3.02780455 188.9038177 190.4371154 192.0046398 194.13875526 200.28772929 1.001252  4800

write.table(x=jag.sum,file="out.txt",sep="\t") 
```

# exception - WiX 3 自定义操作 - 函数返回无异常

> ID：15201239
> 
> 赞同：0
> 
> 时间：2013-03-04T12:08:23.433
> 
> 标签：exception, wix, wix3.5, wix3, wix3.6

我在 WiX 3.7 中编写了一个自定义操作，现在当我想在某个地方连接到数据库（Firebird）时，它只是从函数中返回，我现在已经调试了一个多小时，但无法弄清楚它在哪里确切的问题是

```
Database db;
        try
        {
            db = new Database(@"C:\Cedex2\DB\CEDEX.FDB", DatabaseOpenMode.Transact);
            Debuging.Log("step0");
        }
        catch (Exception ex)
        {
            Debuging.Log(ex.Message);
        }
        try
        {
            string sqlScript = "";
            Debuging.Log("step1");
            using (StreamReader reader = new StreamReader(@"C:\Cedex2\DB\script1.sql"))
            {
                try
                {
                    sqlScript = reader.ReadToEnd();
                }
                catch (Exception ex)
                {
                    Debuging.Log(ex.Message);
                }
            }
            Debuging.Log(sqlScript);
            db.Execute(sqlScript);
            Debuging.Log("step2");
            db.Close();
            Debuging.Log("closed");
        }
        catch (Exception ex)
        {
            Debuging.Log(ex.Message);
        } 
```

脚本存在，数据库文件也存在。在记录（“step0”）之前必须发生一些事情，因为这不会出现在我的记录文件中。如果我在 new Database() 之前手动抛出异常，它将进入捕获并记录。有什么问题？如果它是一个编译器错误，为什么它不会在我的捕获中结束？

运行自定义操作后，数据库文件也没有新的 Windows-Lastmodified 日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:32:08.363

您的“数据库”类的完全限定名称空间是什么？您是否尝试使用 Microsoft.Deployment.WindowsInstaller.Database 打开 Firebird 数据库？如果是这样，该类仅打开 Windows Installer 数据库。（我怀疑你是。）

看一眼：

[Firebird：.NET — 使用示例](http://www.firebirdsql.org/en/net-examples-of-use/)

# actionscript-3 - 使用 Flex SDK 将 ActionScript 编译为 SWF

> ID：15201244
> 
> 赞同：3
> 
> 时间：2013-03-04T12:08:39.443
> 
> 标签：actionscript-3, apache-flex, sdk, flash

我正在尝试将 ActionScript“Hello World”编译成 SWF 文件，但没有成功。
这是我到目前为止所做的：

1.  [我从这里](http://sourceforge.net/adobe/flexsdk/wiki/About/)下载了 Flex SDK 4.6
2.  [我使用此处](http://en.wikipedia.org/wiki/ActionScript)的示例创建了一个“hello world”.as 文件
3.  我尝试按照[此页面中的说明编译 .as 文件](http://www.senocular.com/flash/tutorials/as3withmxmlc/)

我正在使用命令行：

```
D:\flex_sdk_4.6\bin\mxmlc.exe test.as 
```

我得到的结果是：

```
Loading configuration file D:\flex_sdk_4.6\frameworks\flex-config.xml
Error: null 
```

我错过了什么或做错了什么？
如果我的 ActionScript 代码错误，我是否应该至少不会出现编译错误？
请给我一些指导。

PS：我也尝试过使用 Apache Flex 4.9，但我得到了完全相同的结果`Error: null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:19:34.093

mxmlc 默认查找 flex-config.xml，除非您使用 -load-config 参数指定配置文件。该文件是否存在于您的框架目录 D:\flex_sdk_4.6\frameworks\flex-config.xml 中？如果是，那么您下载的 sdk 可能已损坏，请尝试再次下载（胡乱猜测）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:44:59.767

事实证明，在某些情况下，mxml 编译器根本不会给您任何编译错误，例如当您省略 package 语句或将`use namespace`语句放在错误的位置时。
我假设如果我的代码错误，那么编译器会出现某种错误，因为它没有，我认为问题出在其他地方。我错了。

故事的寓意：永远不要假设事情会以预期的方式进行。常识远非常识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:12:40.813

嗯，你应该有一个随 SDK 一起提供的配置文件：（`\somwhere\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\frameworks\flex-config.xml`我仔细检查过，它在 adobe 的 zip 中）。你是如何安装框架的？

顺便说一句，我建议您使用 IDE 来编译它，因为您必须将配置文件传递给编译器，而这在没有帮助的情况下并不容易。

否则，请查看为自动编译而设计的 ant 任务。

[http://livedocs.adobe.com/flex/3/html/help.html?content=anttasks_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=anttasks_1.html)

最后，我会建议你有一个自动化和结构化的项目，并带有一个 Maven 描述文件。

HIH

# java - 如何在连接之前告诉 SSLSocket 所需密钥条目的别名？

> ID：15201251
> 
> 赞同：19
> 
> 时间：2013-03-04T12:09:04.073
> 
> 标签：java, ssl, keystore, authentication

我在 java 密钥库中有两个证书/密钥对。这些键条目的别名是“foo”和“bar”。

我的 TLS 客户端（java 程序）使用密钥库。TLS 客户端身份验证在连接打开期间完成。当 TLS 服务器向客户端请求证书时，客户端程序应使用“foo”键条目。现在客户端在连接握手期间向服务器发送错误的证书（“bar”）。

如何在连接之前告诉 SSLSocket 所需密钥条目的别名？

目前代码如下：

```
final SSLSocket ss = (SSLSocket)SSLSocketFactory.getDefault().createSocket(); 
ss.setEnabledProtocols( new String[] {"TLSv1"});
ss.connect( targetAddress ); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-04T13:25:27.790

默认`KeyManager`将发送它找到的与服务器请求的条件匹配的第一个证书，也就是说，它将发送它找到的第一个证书，它可以在请求期间服务器发送的 CA 名称中建立一个证书链.

如果您总是希望选择特定的别名，则需要实现自己的[`X509KeyManager`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/X509KeyManager.html)，可能包装默认管理器。这些方面的东西应该可以工作（没有测试这个实际的代码，可能有一些错别字）：

```
KeyStore keystore = ... // create and load your keystore.

KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
kmf.init(keystore, password.toCharArray());

final X509KeyManager origKm = (X509KeyManager)kmf.getKeyManagers()[0];

X509KeyManager km = new X509KeyManager() {
    public String chooseClientAlias(String[] keyType, Principal[] issuers, Socket socket) {
        return "foo";
    }

    public X509Certificate[] getCertificateChain(String alias) {
        return origKm.getCertificateChain(alias);
    }

    // Delegate the rest of the methods from origKm too...
} 
```

然后将其用于您的`SSLContext`：

```
SSLContext sslContext = sslContext.getInstance("TLS");
sslContext.init(new KeyManager[] { km }, null, null);
SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory(); 
```

# c# - Request.Content.ReadAsMultipartAsync never returns

> ID：15201255
> 
> 赞同：56
> 
> 时间：2013-03-04T12:09:09.030
> 
> 标签：c#, asp.net-web-api, c#-5.0

I have an API for a system written using the ASP.NET Web Api and am trying to extend it to allow images to be uploaded. I have done some googling and found how the recommended way to accept files using MultpartMemoryStreamProvider and some async methods but my await on the ReadAsMultipartAsync never returns.

Here is the code:

```
[HttpPost]
public async Task<HttpResponseMessage> LowResImage(int id)
{
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    var provider = new MultipartMemoryStreamProvider();

    try
    {
        await Request.Content.ReadAsMultipartAsync(provider);

        foreach (var item in provider.Contents)
        {
            if (item.Headers.ContentDisposition.FileName != null)
            {

            }
        }

        return Request.CreateResponse(HttpStatusCode.OK);
    }
    catch (System.Exception e)
    {
        return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
} 
```

I can step through all the way to:

```
await Request.Content.ReadAsMultipartAsync(provider); 
```

at which point it will never complete.

What is the reason why my await never returns?

# Update

I am attempting to POST to this action using curl, the command is as follows:

```
C:\cURL>curl -i -F filedata=@C:\LowResExample.jpg http://localhost:8000/Api/Photos/89/LowResImage 
```

I have also tried using the following html to POST to the action as well and the same thing happens:

```
<form method="POST" action="http://localhost:8000/Api/Photos/89/LowResImage" enctype="multipart/form-data">
    <input type="file" name="fileupload"/>
    <input type="submit" name="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-03-06T22:14:17.960

我在 .NET 4.0 中遇到了类似的问题（没有异步/等待）。使用调试器的线程堆栈，我可以看出 ReadAsMultipartAsync 正在将任务启动到同一个线程上，因此它会死锁。我做了这样的事情：

```
IEnumerable<HttpContent> parts = null;
Task.Factory
    .StartNew(() => parts = Request.Content.ReadAsMultipartAsync().Result.Contents,
        CancellationToken.None,
        TaskCreationOptions.LongRunning, // guarantees separate thread
        TaskScheduler.Default)
    .Wait(); 
```

TaskCreationOptions.LongRunning 参数对我来说很关键，因为没有它，调用将继续在同一个线程上启动任务。您可以尝试使用类似下面的伪代码来查看它在 C# 5.0 中是否适用于您：

```
await TaskEx.Run(async() => await Request.Content.ReadAsMultipartAsync(provider)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-08T02:23:44.470

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-16T12:05:58.603

[在 stackoverflow 上的另一个答案](https://stackoverflow.com/a/24973147/151025)和[关于 targetFramework 的博客文章的](http://blogs.msdn.com/b/webdev/archive/2012/11/19/all-about-httpruntime-targetframework.aspx)帮助下，我发现更新到 4.5 并在 web.config 中添加/更新以下内容可以解决此问题：

```
<system.web>
    <compilation debug="true" targetFramework="4.5"/>
</system.web>
<appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T17:20:29.707

我有一个有效的 .Net MVC WebAPi 项目，它使用以下 Post 方法，似乎效果很好。它与您已经拥有的非常相似，因此这应该会有所帮助。

```
 [System.Web.Http.AcceptVerbs("Post")]
    [System.Web.Http.HttpPost]
    public Task<HttpResponseMessage> Post()
    {
        // Check if the request contains multipart/form-data.
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }
        string fileSaveLocation = @"c:\SaveYourFile\Here\XXX";
        CustomMultipartFormDataStreamProvider provider = new CustomMultipartFormDataStreamProvider(fileSaveLocation);
        Task<HttpResponseMessage> task = Request.Content.ReadAsMultipartAsync(provider).ContinueWith<HttpResponseMessage>(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                {
                    Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception);
                }
                foreach (MultipartFileData file in provider.FileData)
                {
                    //Do Work Here
                }
                return Request.CreateResponse(HttpStatusCode.OK);
            }
        );
        return task;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T11:54:36.003

我有同样的。我的解决方案

```
public List<string> UploadFiles(HttpFileCollection fileCollection)
    {
        var uploadsDirectoryPath = HttpContext.Current.Server.MapPath("~/Uploads");
        if (!Directory.Exists(uploadsDirectoryPath))
            Directory.CreateDirectory(uploadsDirectoryPath);

        var filePaths = new List<string>();

        for (var index = 0; index < fileCollection.Count; index++)
        {
            var path = Path.Combine(uploadsDirectoryPath, Guid.NewGuid().ToString());
            fileCollection[index].SaveAs(path);
            filePaths.Add(path);
        }

        return filePaths;
    } 
```

并调用

```
if (!Request.Content.IsMimeMultipartContent())
{
    throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
}

var filePaths = _formsService.UploadFiles(HttpContext.Current.Request.Files); 
```

# hive - Hive multiple subqueries and group by

> ID：15201256
> 
> 赞同：0
> 
> 时间：2013-03-04T12:09:10.393
> 
> 标签：hive, amazon-dynamodb, emr, hiveql

I'm switching statistics from MySQL to Amazon DynamoDB and Elastic MapReduce.

I have query bellow that works with MySQL and I have the same table on hive and need the same results as on MySQL (product views for last_week, last_month and last_year).

```
SELECT product_id,
SELECT COUNT(product_id) from dev_product_views_hive as P2 where P2.product_id=P.product_id and created >= DATE_SUB(NOW(), INTERVAL 1 WEEK) as weekly,
SELECT count(product_id) from dev_product_views_hive as P3 where P3.product_id=P.product_id and created >= DATE_SUB(NOW(), INTERVAL 1 MONTH) as monthly,
SELECT count(product_id) from dev_product_views_hive as P4 where P4.product_id=P.product_id and created >= DATE_SUB(NOW(), INTERVAL 1 YEAR) as yearly
from dev_product_views_hive as P group by product_id; 
```

I figured out how to get results for example for last month with hive:

```
SELECT product_id, COUNT(product_id) as views from dev_product_views_hive WHERE created >= UNIX_TIMESTAMP(CONCAT(DATE_SUB(FROM_UNIXTIME(UNIX_TIMESTAMP()), 31)," ","00:00:00")) GROUP BY product_id; 
```

but i need grouped results like I get with MySql:

```
product_id views_last_week views_last_month views_last_year
2                 564             2460         29967
4                 980             3986         54982 
```

Is it possible to do this with hive?

Thank you in advance,

Amer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:47:54.577

您可以使用`case when` and`sum()`或`count()`

例如。

```
select product_id, 
sum(case when created >= concat(date_sub(to_date(from_unixtime(unix_timestamp())), 7)," 00:00:00") then 1 else 0 end)  as weekly,
sum(case when created >= concat(date_sub(to_date(from_unixtime(unix_timestamp())), 31)," 00:00:00") then 1 else 0 end) as monthly,
sum(case when created >= concat(date_sub(to_date(from_unixtime(unix_timestamp())), 365)," 00:00:00") then 1 else 0 end) as yearly
from dev_product_views_hive 
group by product_id; 
```

`concat(date_sub(to_date(from_unixtime(unix_timestamp())), days)," 00:00:00")`将返回当前时间过去几天的格式化字符串。

和

`case when`将在创建`>=`您期望的日期时重新​​运行 1

您也可以使用 hive 内置函数来执行此操作，该函数`count()`仅计算那些返回非 NULL 的行

```
count(case when created >= concat(date_sub(to_date(from_unixtime(unix_timestamp())), 7)," 00:00:00") then 1 end)  as weekly 
```

# ios - Sybase Embedding Database

> ID：15201257
> 
> 赞同：0
> 
> 时间：2013-03-04T12:09:11.933
> 
> 标签：ios, database, mobile, sqlanywhere

I would like to know if its possible to embed a database into a mobile app, which uses sybase. I am informed this is not possible as the app needs to pair with the server first. My issue is that it takes too long on first run to download the data. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:11:48.280

[SAP Sybase SQL Anywhere](http://infocenter.sybase.com/help/index.jsp?docset=/com.sybase.help.sqlanywhere.12.0.1/sqlanywhere_en12/help_top_index.htm&docSetID=1744)是一个可嵌入的数据库，可用于移动应用程序。

# eclipse - BIRT - 使用报表变量将数据从外部嵌套数据集传递到内部嵌套数据集

> ID：15201261
> 
> 赞同：2
> 
> 时间：2013-03-04T12:09:24.817
> 
> 标签：eclipse, report, birt

希望有人能告诉我这个 BIRT 报告有什么问题。我正在尝试使用嵌套的脚本数据集，其中外部数据集通过报告变量将数据传递给内部数据集。

我发现这份报告并没有像我想象的那样行事。似乎报告变量正在输出每行的最后一个值。对于以下报告，我看到的输出如下：

```
key0
  value[9][0]
  value[9][1]
  value[9][2]
  value[9][3]
  value[9][4]

key1
  value[9][0]
  value[9][1]
  value[9][2]
  value[9][3]
  value[9][4]

....

key9
  value[9][0]
  value[9][1]
  value[9][2]
  value[9][3]
  value[9][4] 
```

而我希望看到这个：

```
key0
  value[0][0]
  value[0][1]
  value[0][2]
  value[0][3]
  value[0][4]

key1
  value[1][0]
  value[1][1]
  value[1][2]
  value[1][3]
  value[1][4]

....

key9
  value[9][0]
  value[9][1]
  value[9][2]
  value[9][3]
  value[9][4] 
```

我的（完全独立的）示例报告在这里：[单击以查看 pastebin 中的报告 xml](http://pastebin.com/aDq0H4ns)。

关键思想是在外部数据集的**fetch**中，我设置了报告变量：

```
vars["values"] = value; 
```

内部数据集的**fetch**将抓取它：

```
values = vars["values"].iterator(); 
```

内部数据集的**fetch**将从报告变量中获取数据：

```
row["value"] = values.next(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:07:28.590

您应该能够使用 dataSet 参数来执行此操作。在您的示例中，您将在外部数据集的数据集编辑器中设置输出参数。您将此参数的值设置为您传递给其他数据集的值。

在内部数据集中，您将创建一个输入参数来获取值。在您的布局中，您需要刷新外部列表上的绑定，以便输出参数是一个绑定。然后，您将转到内部列表的绑定选项卡，并选择将外部列表的输出参数绑定传递给您的输入参数。

希望这可以帮助。

# php - CakePHP data not saving/adding to database

> ID：15201262
> 
> 赞同：3
> 
> 时间：2013-03-04T12:09:27.290
> 
> 标签：php, sql, cakephp

Submitting the data only reloads the page, no errors or messages is given by CakePHP. The code follows the same/similar structure as the blog tutorial.

The view code

```
 <?php
        echo $this->Form->create('Sm');
        echo $this->Form->input('recievers', array('rows' => '1'));
        echo $this->Form->input('subject');
        echo $this->Form->input('message');
        echo $this->Form->end('SEND');
        ?> 
```

Controller code

```
 public function send() {
    if ($this->request->is('sm')) {
        $this->Sm->create();
        if ($this->Sm->save($this->request->data)) {
            $this->Session->setFlash('Sms has been added to the database');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to send sms.');
        }
    }
} 
```

Model code

```
class Sm extends AppModel {
public $validate = array(
    'subject' => array(
        'rule' => 'notEmpty'
    ),
    'message' => array(
        'rule' => 'notEmpty'
    ),
    'recievers' => array(
        'rule' => 'notEmpty'
    )
); } 
```

Exported SQL

```
 CREATE TABLE IF NOT EXISTS `sms` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `subject` varchar(150) DEFAULT NULL,
  `message` text,
  `sender` varchar(50) DEFAULT NULL,
  `recievers` text,
  `sent` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:07:47.723

您指定了错误的请求“方法”；

```
if ($this->request->is('sm')) { 
```

应该：

```
if ($this->request->is('post')) { 
```

我怀疑您对 CakePHP 上使用“post”*模型*的示例感到困惑。然而，这一行是检查用于访问页面*的请求类型*，例如`post`, 。`get``put`

通过检查正确的请求方法，CakePHP 将只插入/更新表单发送/提交的数据，否则仅*显示*表单而不更新数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T10:10:40.653

就在几分钟前，我遇到了同样类型的问题。我的问题更奇怪。在我的控制器中，我使用了这样的东西：

```
if( $this->MyModel->save( $this->request->data ) ) {
    //positive. proceed.....
}
else {
    //negative. show error
    pr( $this->MyModel->validationErrors );
} 
```

如您所见，我已经处理了负面情况，但我仍然什么也看不到。即使在我的模型中，我也使用 beforeSave 和 afterSave 进行检查。在我的 beforeSave 模型中，我可以看到一个格式完美的数组可以保存，但我 afterSave 没有触发，这意味着数据没有保存。因此我应该从我的控制器中看到错误。仍然没有解决办法。

现在这就是我发现问题的方式。我检查了要保存数据的表。该表有很多具有 NOT NULL 属性的列。我保存的数据有一些具有 NULL 值的字段。所以理论上，我应该将控制器中的validationErrors视为一个原因，但不幸的是它没有显示。将这些字段设置为空解决了我的问题。所以我给你的建议是检查哪些字段可能具有 NULL 值并设置那些可为空的并确保 NOT NULL 字段具有一些值。

希望这可以帮助。干杯！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:15:45.907

您忘记`name`在模型中定义属性。

```
var $name = 'Sm'; 
```

# r - R: RStudio: How to get silhouette plot working?

> ID：15201263
> 
> 赞同：8
> 
> 时间：2013-03-04T12:09:31.107
> 
> 标签：r, cluster-analysis, r-daisy

Today I have realised that the `silhouette` plot in the `cluster` package doesn't display properly in `RStudio`. A Google search revealed that someone else had had a problem with this:

[http://support.rstudio.org/help/discussions/problems/3094-plotsnot-showing-up-in-r-studio](http://support.rstudio.org/help/discussions/problems/3094-plotsnot-showing-up-in-r-studio)

Being new to R, it was unclear to me whether the problem had been resolved in this thread! So my question is: is there a way to get the `silhouette` plot to display properly in `RStudio`?

Thanks for any help.

**Example script:**

```
library(cluster)
data(xclara)
km <- kmeans(xclara,3)
dissE <- daisy(xclara)
sk <- silhouette(km$cl, dissE)
plot(sk) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T12:19:29.190

似乎您引用的线程非常明确：该`silhouette`包可能有错误`png`输出，并且 RStudio 与其他一些图形格式不兼容。因此，正如 Josh 所写，您需要在使用 RStudio 时指定“pdf()、quartz() 和 windows() 设备……”。

编辑：所以你需要做的是

```
pdf('my_nice_plot.pdf')
plot(sk)
dev.off() 
```

它将您的情节直接写入文件。您可以尝试用等替换第一行`png('my_nice_plot.png')`，因为这些应该也可以。但我怀疑你会在 RStudio 的图形窗口中得到一个干净的绘图，直到他们升级他们的界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T15:02:32.433

这可能只是实际情节的可见性问题：尝试

```
library(cluster)
data(xclara)
km <- kmeans(xclara[1:100,],3)
dissE <- daisy(xclara[1:100,])
sk <- silhouette(km$cl, dissE)
plot(sk) 
```

# .htaccess - .htaccess conditional statement

> ID：15201264
> 
> 赞同：0
> 
> 时间：2013-03-04T12:09:32.703
> 
> 标签：.htaccess, seo, subdomain, wildcard-subdomain

I want to rewrite my urls to more seo urls using wildcard sub-domains and I am unable to write htaccess conditions and hoping to get some help with it.

I have this url:

> [http://learntipsandtricks.com/blog/c/magento](http://learntipsandtricks.com/blog/c/magento)

I want to rewrite as:

> [http://magento.learntipsandtricks.com/](http://magento.learntipsandtricks.com/)

Change pagination link:

> [http://learntipsandtricks.com/blog/92/magento/3](http://learntipsandtricks.com/blog/92/magento/3)

to:

> [http://magento.learntipsandtricks.com/p-92-3](http://magento.learntipsandtricks.com/p-92-3)

Finally change article url:

> [http://learntipsandtricks.com/blog/magento/114/magento-index-management-Cannot-initialize-the-indexer-process](http://learntipsandtricks.com/blog/magento/114/magento-index-management-Cannot-initialize-the-indexer-process)

to:

> [http://magento.learntipsandtricks.com/114-magento-index-management-Cannot-initialize-the-indexer-process](http://magento.learntipsandtricks.com/114-magento-index-management-Cannot-initialize-the-indexer-process)

I wrote this:

```
RewriteCond %{HTTP_HOST} !^www\.(.+)$ [NC]
RewriteCond %{HTTP_HOST} (.+)\.learntipsandtricks\.com\/p\-(\d+)\-(d+) [NC]
RewriteRule ^(.*)$ http://learntipsandtricks.com/blog/%2/%1/%3/$1 [P]

RewriteCond %{HTTP_HOST} !^www\.(.+)$ [NC]
RewriteCond %{HTTP_HOST} (.+)\.learntipsandtricks\.com\/(\d+)\-(.*) [NC]
RewriteRule ^(.*)$ http://learntipsandtricks.com/blog/%1/%2/%3/$1 [P]

RewriteCond %{HTTP_HOST} !^www\.(.+)$ [NC]
RewriteCond %{HTTP_HOST} (.+)\.learntipsandtricks\.com [NC]
RewriteRule ^(.*)$ http://learntipsandtricks.com/blog/c/%1/$1 [P]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ index.php/$1 [L] 
```

The above code doesn't work. Is it possible using if else in htaccess to check all types of urls and rewrite accordingly?

**EDIT:**

```
RewriteCond %{HTTP_HOST} !^www\.(.+)$ [NC]
RewriteCond %{HTTP_HOST} (.+)\.learntipsandtricks\.com [NC]
RewriteCond %{REQUEST_URI} ^/p-(\d+)-(\d+)$ [NC]
RewriteRule ^(.*)$ http://learntipsandtricks.com/blog/%1/[first part of sub-domain]/%2/$1 [P] 
```

How can I get first part of sub-domain here.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:00:39.833

`HTTP_HOST`不包括 URL 路径。如果要匹配 URL 路径，请`REQUEST_URI`改用

```
RewriteCond %{REQUEST_URI} ^/p-(\d+)-(\d+)$ 
```

例如。

从[`RewriteCond Directive`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)

> *   **RewriteCond 反向引用**：这些是 %N (0 <= N <= 9) 形式的反向引用。%1 到 %9 提供对模式的分组部分（同样在括号中）的访问，**从当前条件集中最后匹配的 RewriteCond**开始。%0 提供对该模式匹配的整个字符串的访问。

因此，如果要同时捕获域和 URL 路径组件，则必须将`HTTP_HOST`and`REQUEST_URI`合二为一`RewriteCond`

```
RewriteCond %{HTTP_HOST} !^www\.(.+)$ [NC]
RewriteCond %{HTTP_HOST} (.+)\.learntipsandtricks\.com [NC]
RewriteCond %{HTTP_HOST}%{REQUEST_URI} ^(.+)\.learntipsandtricks\.com/p-(\d+)-(\d+)$ [NC]
RewriteRule ^(.*)$ http://learntipsandtricks.com/blog/%2/%1/%3/$1 [P] 
```

# jquery - Dynamically creating elements using jQuery

> ID：15201265
> 
> 赞同：6
> 
> 时间：2013-03-04T12:09:36.010
> 
> 标签：jquery

I am building a list of checkbox items in jQuery based on an array returned from a handler.

The containing element is the `.listContainer` element below and then each dynamic element I want to add to this takes the form of the `.listContainerItem` element. Each item will have checkbox value and label based on the array item creating it.

```
<div class="listContainer">
    <div class="listContainerItem">
        <input type="checkbox" value="1" />
        <div class="listContainerItemLabel">Checkbox 1</div>
    </div>
</div> 
```

At the point of the function that has the array passed to it, what is the most efficient way of creating this? I have been trying to accomplish it as below, but quickly running into major performance issues.

```
function AddItemToListContainer(item) {
    var currentItems = $j("#listContainerAvailable .listContainerItem");
    if ($j.grep(currentItems, function (e) { return $j(e).find(":checkbox:first").val() == item.Id; }).length === 0) {
        labelDiv = $j("<div />").addClass("listContainerItemLabel").html(item.Text);
        itemToAdd = $j("<div />").addClass("listContainerItem").append("<input type=\"checkbox\" value=\"" + item.Id + "\" />").append(labelDiv);
        currentItems.append(itemToAdd);
    }
} 
```

I've looked at `.map` function, but not sure quite how to implement it. Can someone point me in the right direction?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:33:27.627

你想让这些元素一次出现一个吗？或者只是在页面加载时从数组中动态创建？

最后：

html

```
 <div class="listContainer">
       <div class="listContainerItem"></div>
     </div> 
```

和jQuery

```
var array = ['1', '2', '3', '4', '5'];

 $.each(array, function (index, value) {
    $(".listContainerItem").append('<input type="checkbox" value="' + value + '" /> <div         class="listContainerItemLabel">Checkbox ' + value + '</div>');
 }); 
```

[http://jsfiddle.net/jeremythuff/HEKjk/](http://jsfiddle.net/jeremythuff/HEKjk/)

一些 .click 事件可以给你第一个效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:26:44.577

当按下代码的按钮时，它会检查输入字段是否已被填写，如果它是空的，它会弹出一个提醒你如果它不是空的，它会获取输入字段的值，创建一个复选框并将复选框旁边的输入值。

表单的 HTML

```
<form name="formName" id="listContainerItem">
    <input id="newinput" type="text" value=""/><button id="button">Add new rule</button> <br />
    <input type="checkbox" value="1" /><span class="listcontainerItemLabel" />Checkbox 1 <br />
</form> 
```

Javascript

```
$(#button).click(function() {
function addLine(e) {
        e.preventDefault();
        var x = document.getElementById('newinput').value;
        if(x == '') {
            alert('not filled in')
        } else {
            $('#listContainer').append('<input type="checkbox" value="1" /><span class="listcontainerItemLabel" />'+x+  '<br />')
        }
    } 
```

});

记住`document.getElementById('newinput')`也可以这样写：`$('#newinput')`

您所要做的就是根据您的需要更改将附加的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:25:43.637

我会从这样的事情开始：

```
var $container = $j('#listContainerAvailable');
var checkboxes = {};

function AddItemToListContainer(item) {
    if (checkboxes[item.Id]) return false;

    checkboxes[item.Id] = true;

    var $item = $j('<div />', {
        'class': 'listContainerItem',
    }).appendTo($container);

    $j('<input />', {
        'type': 'checkbox',
        'value': item.Id
    }).appendTo($item);

    $j('<div />',  {
        'class': 'listContainerItemLabel',
        'text': item.Text
    }).appendTo($item);
} 
```

只要在创建页面时这些元素都不存在，就可以将它们添加到哈希表中，而不是通过 DOM 进行搜索。我认为你也会受益于像[mustache.js这样的 JS 模板引擎](https://github.com/janl/mustache.js#readme)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T11:26:54.247

您可以使用多种方式动态创建....

```
$("#elementid").after("<input type='checkbox'></input><span></span>;

$("#elementid").before("<input type='checkbox'></input><span></span>;

$("#elementid").append("<input type='checkbox'></input><span></span>;

$("#elementid").prepend("<input type='checkbox'></input><span></span>; 
```

同样明智的是，您可以使用`insertAfter()`, `insertBefore()`, `appendTo()`, `prependTo()`.....

# java - Special character Symbol replacing ''�"

> ID：15201270
> 
> 赞同：0
> 
> 时间：2013-03-04T12:10:05.150
> 
> 标签：java, utf-8

how to replace this symbol from java coding .. when i copied it into here its look like "�" but in the coding it looks like a

> small square box

if i saved the code its asking to save as `'utf-8'` any one help me? Actually this is saved in the MYSQL Table while accession iam getting the problem

```
i will explain the scenario here.. 
```

> I have to replace the single quotes and new line and double quotes characters in a string in java..
> 
> when i was iterating, i found a string like 'RS approves President?s Rule', i've checked in the database it is saved as 'RS approves President[small square box]s Rule '....i first think that `'single qoute'` and tried to replace,
> 
> how can i replace this symbol..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:26:52.103

你能提供更多关于字符串流动的信息吗？

比如：
输入 - webform
java - 解析它还是直接将它插入数据库？
MySQL - 存储数据

确保输入设置为（允许）UTF-8？
Java中的字符串被处理为UTF-8
另外MySQL被设置为UTF-8

# magento - Cache management and Index management in magento

> ID：15201271
> 
> 赞同：2
> 
> 时间：2013-03-04T12:10:06.477
> 
> 标签：magento, caching

Why it is sometime necessary to do Cache management to disable and Index management to re-index in magento.I am new in magento so if you know then reply this kindly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:25:24.427

在您的开发环境中，建议禁用缓存，因为您倾向于经常在模板/布局文件中进行更改，以便将其反映在前端/网站上，建议您在开发环境中禁用缓存。但不要在生产中这样做。

进入索引管理，将其设置为“更新时保存”模式，这样每次如果您对产品、类别或属性进行一些更改，它就会自动重新编制索引，避免每次手动重新编制索引的必要性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:39:35.620

Specifically, "Block" data are the html blocks that the MVC generates to present to the frontend and even in the admin sometimes. Because of the caching and also session information, you need to log out of admin and back in for some changes to appear.

Depending on site volume, there might not be a penalty for turning off caching. If I'm doing a quick styling fix, I'll disable the block cache for a couple minutes.

# php - 具有多单元支持功能的库存

> ID：15201273
> 
> 赞同：0
> 
> 时间：2013-03-04T12:10:06.837
> 
> 标签：php, mysql, codeigniter, inventory, database-management

我一直在开发一个库存系统（PHP Codeigniter 和 MySQL），我已经设置了几乎所有东西，除了我的一个客户想要在系统中实现的一个功能 - 系统的多单元支持功能。

目前我的系统每笔交易只支持每件单件：

```
item_desc: Item1
default_unit: pc
reorder: 1
in_stock: 25
remain: 25 
```

在多单元特征中，这将变为：

```
item_desc: Item1
default_unit: pc
big_unit: pack
pack_size: 50
reorder: 1
in_stock: 25 pack
remain: 24 pack 5 pc 
```

有人可以给我提示一下实现这一点的简单方法吗？我只想知道从哪里开始做这件事。如果有人能分享一个关于这个的想法，我将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:42:08.330

我们刚刚推出了我们网站的 v2，我自己也经历了 8 个月的各种类似问题。最好的方法是将您的表格分成产品、库存和列表。

产品仅包含产品特定信息，这些信息永远不会改变。库存仅包含有关当前库存的信息，即现有数量、延期交货、仓库位置等。清单是您处理多项目支持的方式。该表将保存列表信息，并从其他两个表中提取产品和数量数据。所以你会有一个像这样的基本表结构

产品

*   产品编号
*   产品名称
*   产品型号
*   产品描述

存货

*   库存编号
*   产品编号
*   数量在手
*   地点

清单

*   清单编号
*   库存编号
*   数量清单
*   numberOfListings
*   价格

我们公司出售大量二手商品，因此列表会定期更改，但如果您要销售刚进货的新商品，您始终可以将列表设置为根据库存自动填充。这样做意味着您不会像您刚刚为倍数创建产品那样最终产生大量数据重复。它还允许您以任何数量出售任何物品并手动为这些数量设置价格。

# c++ - Initialize a variable

> ID：15201276
> 
> 赞同：3
> 
> 时间：2013-03-04T12:10:13.793
> 
> 标签：c++, c, variables

Is it better to declare and initialize the variable or just declare it? What's the best and the most efficient way?

For example, I have this code:

```
#include <stdio.h>

int main()
{
    int number = 0;

    printf("Enter with a number: ");
    scanf("%d", &number);

    if(number < 0)
        number= -number;

    printf("The modulo is: %d\n", number);

    return 0;
} 
```

If I don't initialize `number`, the code works fine, but I want to know, is it faster, better, more efficient? Is it good to initialize the variable?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T12:14:49.327

`scanf`可能会失败，在这种情况下不会向`number`. 因此，如果您希望代码*正确*，则需要对其进行初始化（或检查 的返回值`scanf`）。

错误代码的速度通常是无关紧要的，但是对于您的示例代码，如果速度完全不同，那么我怀疑您是否能够测量它。将 a 设置`int`为 0 比 I/O 快得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:14:58.687

假设如果你没有初始化一个变量并且你的代码是错误的。（例如你忘了读数字）。那么未初始化的数字值就是垃圾，不同的运行将输出（或表现）不同的结果。

但是，如果您初始化所有变量，那么它将产生恒定的结果。一个易于追踪的错误。

是的，初始化步骤将在低级别的代码中添加额外的步骤。例如`mov $0, 28(%esp)`在低级别的代码中。但它的一次性任务。不会降低您的代码效率。

因此，始终使用**初始化是一个好习惯**！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T12:26:19.580

不要将速度归因于语言；该属性属于语言的实现。有快速实现和慢实现。有与快速实现相关的优化；如果编译器可以推断出它不需要初始化，则生成优化好的机器代码的编译器将优化初始化。

在这种情况下，它实际上确实需要初始化。考虑 scanf 是否会失败。当 scanf 失败时，它的返回值反映了这个失败。它要么返回：

1.  如果存在读取错误或 EOF（可以以实现定义的方式触发，通常是 Windows 上的 CTRL+Z 和 Linux 上的 CTRL+d），则值小于零，
2.  当发生转换失败时（例如，当您告诉 scanf 时在标准输入上输入 'a'将 '0'..'9' 的序列转换为整数），
3.  scanf 管理分配给的对象数。在你的情况下，这是 1。

由于您没有检查任何这些返回值（特别是＃3），因此您的编译器无法推断出初始化是必要的，因此无法对其进行优化。当变量未初始化时，未能检查这些返回值会导致未定义的行为。一只鸡可能看起来还活着，即使它没有了头。最好检查scanf的返回值。这样，当您的变量未初始化时，您可以避免使用未初始化的值，如果不是，您的编译器可以优化初始化，假设您通过生成错误消息而不是使用变量来处理错误的返回值。

编辑：关于未定义行为的主题，请考虑此代码中发生的情况：

```
if(number < 0)
    number= -number; 
```

如果 number 为 -32768，而 INT_MAX 为 32767，则适用 C 标准的第 6.5 节第 5 段，因为 -(-32768) 不能表示为 int。

第 6.5 节第 5 段说：

> 如果在计算表达式期间出现异常情况（即，如果结果未在数学上定义或不在其类型的可表示值范围内），则行为未定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T12:18:35.517

在此之前，您需要回答以下问题：

1）这个函数调用了多少次？如果您调用 10.000.000 次，那么最好是最好的。

2）如果我不初始化我的变量，我确定我的代码是安全的并且不会抛出任何异常？

之后， int 初始化在您的代码中没有太大变化，但是字符串初始化是的。

确保你做了所有的控制，因为如果你有一个未初始化的变量，你的程序可能是错误的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T12:21:39.460

我无法告诉你我见过多少次简单的错误，因为程序员没有初始化变量。就在两天前，还有[一个关于 SO](https://stackoverflow.com/questions/15165601/c-honestly-at-a-loss-for-this-odd-behaviour)的问题，其中面临的问题的最终结果只是 OP 没有初始化变量，因此存在问题。

当您谈论“速度”和“效率”时，不要简单地考虑代码编译或运行的速度有多快（在这种情况下，无论如何这几乎无关紧要），而是要考虑代码中出现简单错误时的*调试*时间事实上你*没有*初始化一个很容易初始化的变量。

另请注意，我的经验是，在为大型公司编码时，他们将通过 Coverity或[klocwork](http://www.coverity.com/products/coverity-save-aw.html?gclid=CLDMqtKG47UCFQWEnQodXSEA-A)等工具运行您的代码，这些工具会[提示](http://www.klocwork.com/index-v2.php)您未初始化的变量，因为它们存在安全风险。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T12:15:30.937

使用现代编译器，效率不会有任何差异。编码风格是主要考虑因素。一般来说，如果您在声明所有变量时对其进行初始化，您的代码将更加不言自明，并且不太可能出现错误。但是，在您给出的情况下，由于该变量已由 scanf 有效地初始化，因此我认为最好不要进行冗余初始化。

# facebook - How to hide a tab from a fanpage during development

> ID：15201281
> 
> 赞同：1
> 
> 时间：2013-03-04T12:10:25.843
> 
> 标签：facebook, tabs, hide, privacy

I'm wondering how to hide a Facebook tab from a published fanpage while the tab is under development, so that it only appears for page Admins?

In order to edit tabs it seems that they have to be added to the page, in order to be able to edit them. That's a problem when customizing a Facebook tab, as you don't want your fans to see your work-in-progress content until it's ready to be published.

Here I'm not referring to a custom built app, but apps like Static HTML.

Any one who has experience with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:10:32.860

在应用设置中启用沙盒模式。

转到开发[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

单击左侧栏中的应用程序。

在设置下查看沙盒模式是打开还是关闭。

如果要更改设置，请单击“编辑设置”

沙盒设置在基本设置下。

为了让您和客户测试应用程序，您必须通过将它们添加为应用程序的测试人员/开发人员/管理员来授予他们权限。 [https://developers.facebook.com/docs/ApplicationSecurity/](https://developers.facebook.com/docs/ApplicationSecurity/)

# android - can we implement SPP profile on android device?

> ID：15201292
> 
> 赞同：1
> 
> 时间：2013-03-04T12:11:09.810
> 
> 标签：android, bluetooth

How can we achieve or implement the SPP profile for android bluetooth? it's very entry level question but please give me some entry point to start with?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:15:16.433

SPP 是您可以在 Android 上可靠使用的唯一配置文件。使用 BluetoothSocket 就可以了。

# excel - 不使用VBA的excel中的MD5 Hash函数

> ID：15201297
> 
> 赞同：14
> 
> 时间：2013-03-04T12:11:31.457
> 
> 标签：excel, excel-formula, md5

我需要一个函数，它将在 Excel 中获取整个单元格值并将该值转换为新单元格中的 MD5 哈希等效值。excel中有没有这样的公式？我需要不使用 VBA 的解决方案。可能吗？

# java - 按第一个字符排序

> ID：15201303
> 
> 赞同：0
> 
> 时间：2013-03-04T12:11:51.123
> 
> 标签：java

手头的问题是每个保单号是一个9个字符的字符串，其中表示保险单的类型

*   B 用于建筑政策
*   C 内容政策
*   L 终身保单
*   V代表汽车政策

保单编号的其余 8 个字符中的每一个都是十进制数字。

**我尝试过使用 charAt 但有人告诉我有更好的方法**

```
public String getpolicyNo(String initpolicyNo) {

    /**
     * Access method to find the first character of the policy to then
     * determine what type of policy it is.
     */
    String b = "B";
    String C = "C";
    String L = "L";
    String V = "V";

    char c1 = b.charAt(0);
    char c2 = C.charAt(0);
    char c3 = L.charAt(0);
    char c4 = V.charAt(0);

    if (c1 == 0) {
        System.out.println("Its building" + c1);
        return initpolicyNo;
    } else {
        if (c2 == 0) {
            System.out.println("Its Content");
            return initpolicyNo;
        } else {
            if (c3 == 0) {
                System.out.println("Its life");
                return initpolicyNo;
            } else {
                if (c4 == 0) {
                    System.out.println("Its car");

                    return initpolicyNo;
                }
            }
        }
    }
    throw new IllegalArgumentException();
} 
```

我不是在寻找您为我提供答案，我只是在寻找任何可能的替代方案和可能的建议。

非常感谢

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:19:58.870

我不太确定你想要达到什么目标，但我会这样写：

```
public String getpolicyNo(String initpolicyNo) {
    switch(initPolicyNo.charAt(0))
    {
       case 'B':
          System.out.println("Its building B");
          return initpolicyNo;
       case 'C':
          System.out.println("Its building C");
          return initpolicyNo;
       case 'L':
          System.out.println("Its building L");
          return initpolicyNo;
       case 'V':
          System.out.println("Its building V");
          return initpolicyNo;
    }

    throw new IllegalArgumentException();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:13:27.337

我建议您使用`Enum`. Enum 的每个值都有一个序数值，您可以对其进行排序。
如果您想阅读 Enums 的介绍，以下站点会有所帮助：[Enum Types - The Java Tutorials](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

```
enum Policy {
     BUILDING_POLICY, CONTENTS_POLICY, LIFE_POLICY, CAR_POLICY
} 
```

对于每个枚举值，您可以分配一个自定义值，您可以使用该值进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:20:20.350

```
public void whatItIs(String s){

  if(s.length() < 1){
    //-- nothing to see here ---
    return;
  }

  //-- case insensitive --
  char c = Character.toUpperCase(s.charAt(0));

  switch(c){
    case 'B':
      //-- its a building !--
      break;
    case 'C':
      //-- its a c........ !--
      break;
    case 'L':
      //-- its a l........ !--
      break;
    case 'V':
      //-- its a v........ !--
      break;
    default:
      //-- its something else :(--
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:15:53.130

> 我尝试过使用 charAt 但有人告诉我有更好的方法

没有比使用 charAt 更好的方法来获取字符串的第一个字母了。

与其有很多 if's/switches 之类的东西，不如让更多的 OOPs 在你的头上。

```
Map<Character, String> myMap = new HashMap<Character, String>() {{
        put('B', "Its building");
        put('C', "Its content");
        put('L', "its life");
        put('V', "its vehicle");
    }} ;
    public void iShouldBeDoingMyOwnWork(String initpolicyNo) {
        System.out.println(myMap.get(initpolicyNo.charAt(0)));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T12:17:12.543

```
public String getpolicyNo(String initpolicyNo) {

        switch (initpolicyNo.charAt(0)) {
        case 'B':
            System.out.println("Its building" );
            break;
        case 'C':
            System.out.println("Its Content");
            break;
        case 'L':
            System.out.println("Its life");
            break;
        case 'V':
            System.out.println("Its car");
            break;
        default:
            throw new IllegalArgumentException();
            break;
        }
        return initpolicyNo;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T12:18:11.097

您可以添加`enums`到您的代码中，或者您可以使用`switch`语句而不是`if/else`您当前拥有的块：

```
 char type = initpolicyNo.charAt(0);
    switch (type) {
        case 'B':
            // do stuff
            break;
        case 'C':
            // do stuff
            break;
    } 
```

注意：我认为您的代码中可能存在问题，因为在我看来您应该打开`initpolicyNo`，而不是实际类型？

# r - 如何将由不同长度的向量组成的列表转换为R中的可用数据框？

> ID：15201305
> 
> 赞同：63
> 
> 时间：2013-03-04T12:11:55.093
> 
> 标签：r, vector, dataframe

我有一个（相当长的）向量列表。这些向量由我通过`strsplit()`在句子上使用函数得到的俄语单词组成。

以下是`head()`返回的内容：

```
[[1]]
[1] "модно"     "создавать" "резюме"    "в"         "виде"     

[[2]]
[1] "ты"        "начианешь" "работать"  "с"         "этими"    

[[3]]
[1] "модно"            "называть"         "блогер-рилейшенз" "―"                "начинается"       "задолго"         

[[4]]
[1] "видел" "по"    "сыну," "что"   "он"   

[[5]]
[1] "четырнадцать," "я"             "поселился"     "на"            "улице"        

[[6]]
[1] "широко"     "продолжали" "род." 
```

请注意，向量的长度不同。

我想要的是能够从每个句子中读取第一个单词，第二个单词，第三个单词等。

期望的结果是这样的：

```
 P1              P2           P3                 P4    P5           P6
[1] "модно"         "создавать"  "резюме"           "в"   "виде"       NA
[2] "ты"            "начианешь"  "работать"         "с"   "этими"      NA
[3] "модно"         "называть"   "блогер-рилейшенз" "―"   "начинается" "задолго"         
[4] "видел"         "по"         "сыну,"            "что" "он"         NA
[5] "четырнадцать," "я"          "поселился"        "на"  "улице"      NA
[6] "широко"        "продолжали" "род."             NA    NA           NA 
```

我试图只使用`data.frame()`，但这没有用，因为行的长度不同。`rbind.fill()`我也从包中尝试过`plyr`，但该函数只能处理矩阵。

我在这里发现了一些其他问题（这就是我得到`plyr`帮助的地方），但这些都是关于组合例如两个不同大小的数据框。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-04T15:17:42.230

一个班轮与`plyr`

```
plyr::ldply(word.list, rbind) 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-03-04T12:32:46.790

试试这个：

```
word.list <- list(letters[1:4], letters[1:5], letters[1:2], letters[1:6])
n.obs <- sapply(word.list, length)
seq.max <- seq_len(max(n.obs))
mat <- t(sapply(word.list, "[", i = seq.max)) 
```

诀窍是，

```
c(1:2)[1:4] 
```

返回向量 + 两个 NA

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-03-17T19:51:39.343

另一种选择是`stri_list2matrix`从`library(stringi)`

```
library(stringi)
stri_list2matrix(l, byrow=TRUE)
#    [,1] [,2] [,3] [,4]
#[1,] "a"  "b"  "c"  NA  
#[2,] "a2" "b2" NA   NA  
#[3,] "a3" "b3" "c3" "d3" 
```

注意：来自@juba 帖子的数据。

或者正如评论中提到的@Valentin

```
sapply(l, "length<-", max(lengths(l))) 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-03-04T12:21:10.757

你可以这样做：

```
## Example data
l <- list(c("a","b","c"), c("a2","b2"), c("a3","b3","c3","d3"))
## Compute maximum length
max.length <- max(sapply(l, length))
## Add NA values to list elements
l <- lapply(l, function(v) { c(v, rep(NA, max.length-length(v)))})
## Rbind
do.call(rbind, l) 
```

这使 ：

```
 [,1] [,2] [,3] [,4]
[1,] "a"  "b"  "c"  NA  
[2,] "a2" "b2" NA   NA  
[3,] "a3" "b3" "c3" "d3" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-03-15T14:21:38.720

您也可以`rbindlist()`从[data.table](https://github.com/Rdatatable/data.table)包中使用。

将向量转换为`data.table`s 或`data.frame`s 并在`lapply()`. 然后将它们绑定`rbindlist()`- 用 NA 填充缺失的单元格。

```
require(data.table)

l = list(c("a","b","c"), c("a2","b2"), c("a3","b3","c3","d3"))
dt = rbindlist(
  lapply(l, function(x) data.table(t(x))),
  fill = TRUE
) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-09-14T10:35:57.937

另一种选择可能是定义这样的函数（它会模仿`rbind.fill`）或直接从`rowr`包中使用它：

```
cbind.fill <- function(...){
  nm <- list(...) 
  nm <- lapply(nm, as.matrix)
  n <- max(sapply(nm, nrow)) 
  do.call(cbind, lapply(nm, function (x) 
    rbind(x, matrix(, n-nrow(x), ncol(x))))) 
} 
```

此响应取自[此处](https://stackoverflow.com/a/7962286/7580614)（并且有一些使用示例）。

# iphone - 即使用户从该视图控制器弹出，如何保持 ASIHTTPRequestDelegate？

> ID：15201306
> 
> 赞同：1
> 
> 时间：2013-03-04T12:12:02.697
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我需要在其中有一个设置页面，该页面具有用户的一些凭据，然后他可以编辑它。它是从 httprequest 获取的数组加载的表格视图。通过单击其中的每一个，它将具有选择转到另一个视图并更新该值并返回。我已经像这样在该更新视图上对服务器进行了更新调用..

```
 dispatch_async(backgroundQueue_, ^{
            [self performSelectorInBackground:@selector(load) withObject:nil];

            dispatch_sync(dispatch_get_main_queue(), ^{
                 [self showHUD];

            }); 
```

因为在主队列中我正在执行弹回操作。所以我需要在后台调用更新服务。但问题是当我回来时我在设置中调用另一个服务`viewcontroller`。加载更新的值。有时请求的代表正在崩溃。我正在这样调用服务。

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
   [request setPostValue:uidstr forKey:@"userId"];
     request.userInfo=[NSDictionary dictionaryWithObject:@"update" forKey:@"type"];
    [request setPostValue:self.string forKey:@"age"];
    [request setDelegate:self];
    [request setCachePolicy:ASIAskServerIfModifiedCachePolicy|ASIFallbackToCacheIfLoadFailsCachePolicy];
    [self showHUD1];    
    [request startAsynchronous]; 
```

任何人都可以指出我如何在不崩溃我的应用程序的情况下做到这一点。我认为问题是代表得到零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:54:54.613

由于开发人员不再支持此框架，因此更好地放弃使用 ASIHTTP。您将不会获得对未来 iOS 版本可能更改的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:31:59.130

将您的网络请求与视图控制器代码分离。这样，如果视图被卸载，网络委托仍然存在。

例如：创建一个与网络进行所有通信的 NetworkRequest 单例类，然后您可以使用类似 NSNotifications 的机制，或者视图控制器可以成为委托的单例类中的 @protocol 接口来传递结果和状态更改如所须。

有关 Objective-C 中单例的好教程，请参阅：[http ://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

# c# - c#: SerializableAttribute

> ID：15201307
> 
> 赞同：-8
> 
> 时间：2013-03-04T12:12:04.510
> 
> 标签：c#

该`SerializableAttribute`课程在[此链接](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)上进行了解释。开头是这样写的：

> 表示**一个类可以序列化**

任何人都可以解释这意味着什么（粗体部分）。我不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:15:13.303

序列化一个对象（一个类的实例）意味着将它变成可以写入文件或通过网络广播的东西，例如 XML 文件（Xml 序列化）或字节数组（二进制序列化）。

这需要是双向操作，因此您必须能够“反​​序列化”对象。

为了可序列化，对象必须只包含可序列化的字段/属性或标记为未序列化的字段。例如，一个 Sql 连接没有被序列化（在其他地方反序列化它是没有意义的......）

# c# - 为什么我不能从 RichTextBox 的引用创建 RichTextBox

> ID：15201309
> 
> 赞同：1
> 
> 时间：2013-03-04T12:12:12.477
> 
> 标签：c#, .net, richtextbox

我对`RichTextBox`控制感到困惑。

我有一个宽度为 100px的`RichTextBox`控件。`WinForm`我想动态创建一个，然后引用该实例。

所以，假设`Form`我有一个`RichTextBox`电话`rtbResult`，我会认为我可以做到以下几点：

```
 RichTextBox rtb = new RichTextBox();
    rtb.Text =  "Hello all";
    rtb.Width = 50;
    rtbResult = rtb; 
```

当代码执行时，`RichTextBox`我的页面上的结果是一个空白，原始大小为 100 像素（例如，宽度不是 50）。

请注意，在现场我使用文本突出显示，因此它必须是 a `RichTextBox`，上面的示例被剥离以使问题更简洁。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:16:31.607

您所做的与此没有太大不同：

```
RichTextBox r1 = new RichTextBox();
r1.Text =  "I am RTB #1";
Controls.Add(r1);

RichTextBox r2 = new RichTextBox();
r2.Text =  "I am RTB #2"; 
```

现在在您的页面上，您已`RichTextBox`命名为`r1`. 如果你这样做：

```
r1 = r2; 
```

您不需要用新的控件替换表单中的控件`RichTextBox`，您只需将相同的引用分配给变量`r1`。在您的表单中，您仍然拥有*旧*控件，但两个变量 (`r1`和`r2`) 都指向同一个对象。

如果您不能简单地`RichTextBox`使用新值更新原始值，您可以做的是删除旧值并将新值添加到相同位置：

```
r2.Bounds = r1.Bounds;
Controls.Remove(r1);
Controls.Add(r2); 
```

这很幼稚，可能需要将许多属性从旧属性复制到新属性（等等），而且顺序也很重要，因此您可能需要调用`Dock`正确的定位（这取决于您真正拥有的做什么以及您的代码如何）。`TabIndex``Controls.SetChildIndex()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:16:38.550

这`rtbResult`只是一个包含对控件的引用的变量，而不是控件本身。通过将新控件放入该变量中，您只是更改了变量，原始控件仍在表单中，并且新控件不属于任何表单，因此它在任何地方都不可见。

您必须将新控件添加到表单以使其可见，例如：

```
somePanel.Controls.Add(rtb); 
```

# php - 基本的 PHP 面向对象的 MYSQL 查询

> ID：15201312
> 
> 赞同：0
> 
> 时间：2013-03-04T12:12:18.150
> 
> 标签：php

所以我现在已经学习了大约 3 个月，目前在我的代码中使用非常古老的程序技术和不推荐使用的 mysql 扩展。所以是时候向前迈出一步，放弃我的程序方式并进入面向对象/准备好的语句......

这是非常基础的，但我想每个人有一天都必须学习。我正在尝试从 mysql 数据库中获取检索和简单的数据集。

到目前为止，我有我的联系：

```
$useri = new mysqli('localhost', 'useri', 'xxx','yyy');
if(mysqli_connect_errno()){
    echo mysqli_connect_error();
        } 
```

我没有收到任何错误，所以我认为这是可行的，并且我有我的疑问：

```
$test_query = "SELECT * FROM t";
$test_query = $useri->real_escape_string($test_query);
 echo $test_query;
  if($result = $useri->query($test_query)){
   while($row = $useri->fetch_object($result)){
    echo $row->id;
 }
 $result->close();
}
$useri->close(); 
```

但是我没有得到任何结果......所以，有两个问题：

一种。我究竟做错了什么？和

湾。除了这些东西的php手册之外，有人推荐任何好的教程吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:16:42.813

1.  确保你有一个空间`*`

    ```
    $test_query = "SELECT * FROM t"; 
    ```

2.  检查本教程

    [http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/) [http://net.tutsplus.com/tutorials/php/why-you-should-正在使用-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:28:58.487

这适用于我的数据库中的一张表：

```
$useri = new mysqli('localhost', 'useri', 'xxx','yyy');
if(mysqli_connect_errno()){
echo mysqli_connect_error();
    }

$test_query = "SELECT * FROM t";
$test_query = $useri->real_escape_string($test_query);
  if($result = $useri->query($test_query)){
    while ($row = $result->fetch_object()) { //only this is changed
    echo $row->id;
  }
 $result->close();
 }else{ //check for error if query was wrong
 echo $useri->error;
 }
 $useri->close(); 
```

# javascript - 使用 WebImage 和 JavaScript 处理 MVC 图像

> ID：15201314
> 
> 赞同：0
> 
> 时间：2013-03-04T12:12:25.683
> 
> 标签：javascript, html, asp.net-mvc-4, webimage

在一个视图中，我有以下内容`fieldset`，它以缩略图类型的形式显示与特定项目相关联的图像：

```
<fieldset style="position:absolute; top:113px; left: 1050px; width: 300px;">
    <legend>Photos</legend>

    <div>
        <img src="@Url.Action("GetImage1")" alt="" />
        <img src="@Url.Action("GetImage2")" alt="" />     
        <img src="@Url.Action("GetImage2")" alt="" />     
    </div>

</fieldset> 
```

在我的控制器中，我有以下代码：

```
public void GetImage1()
{
    BicycleSellerListing bicyclesellerlisting = db.BicycleSellerListing.Find(1023);

    WebImage wbImage = new WebImage(bicyclesellerlisting.ImageList.First().Image);
    wbImage.Resize(100, 100);
    wbImage.FileName = "Item.jpg";
    wbImage.Write();
} 
```

所有这一切都很好。我对 MVC、HTML 和 JavaScript 相当陌生，不知道如何执行以下操作。我想做的是允许用户单击图像并加载另一个视图，我在该视图中显示图像的完整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:32:57.757

这取决于你想从中得到什么。您希望它在新页面上单独显示图像还是使用 AJAX 在同一页面上显示完整图像？

如果是后者，您可能需要考虑使用部分视图。

# android - 如何将录制的视频保存在android的自定义文件夹中

> ID：15201321
> 
> 赞同：0
> 
> 时间：2013-03-04T12:12:47.033
> 
> 标签：android, video-recording

如何将视频保存在自定义文件夹中而不是默认文件夹中，所以这是我的代码，但是当我关闭录制时它只是挂起

```
 File dir = new File(Environment.getExternalStorageDirectory()+ "/FutureCopyright");
            if (dir.exists() && dir.isDirectory()) {
                // do something here
            } else {
                // create dir here
                dir.mkdir();
            }
            System.out.println(1);
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
            System.out.println(2);
            cameraIntent.putExtra(android.provider.MediaStore.Video.Media.MIME_TYPE,"video/3gp");
            System.out.println(3);
            cameraIntent.putExtra(android.provider.MediaStore.EXTRA_DURATION_LIMIT,6000);
            System.out.println(4);
            ff=new File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,VIDEO_CAPTURE_NAME);
            System.out.println(5);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile((ff)));
            System.out.println(6);
            startActivityForResult(cameraIntent,SELECT_PICTURE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:55:24.707

这样做。对于保存文件，您可以参考此链接。

```
 public boolean isExternalStorageWritable() {
String state = Environment.getExternalStorageState();
if (Environment.MEDIA_MOUNTED.equals(state)) {
    return true;
}
return false;
}
public boolean isExternalStorageReadable() {
String state = Environment.getExternalStorageState();
if (Environment.MEDIA_MOUNTED.equals(state) ||
    Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    return true;
}
return false; 
```

}

> [http://developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)

# c++ - 带有无符号字符的 C++ atoi

> ID：15201322
> 
> 赞同：-1
> 
> 时间：2013-03-04T12:12:58.580
> 
> 标签：c++, atoi

我得到一个值为 1 的无符号字符，我需要把它放在一个像“1”这样的字符串中。但是，如果我尝试将其直接放入字符串流中，它将获得 char(1) 的值，我需要它为“1”。我知道如果我可以将它放入函数 atoi 中，它将返回“1”值。但是我尝试将其转换为 char 并将其放入 atoi 函数中，但它会引发异常。已经尝试将其放入字符串中，然后将 c_str() 转换为 atoi 函数，但尚未成功。如果有人可以帮助我，我会很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:14:38.483

只需将 a`char`转换为a ，`int`然后再将其插入`std::stringstream`：

```
ss << static_cast<int>(c); 
```

这将`char`不将 的值视为字符，而是将其视为数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:19:49.087

我相信您在这里混淆了两个功能。

您希望将整数转换为字符串。

`atoi`(ascii to integer) 但是接受一个字符串并将其解析为一个整数，将其转换`"123"`为`123`.

您正在这里寻找`itoa`具有以下原型的函数：

```
char *  itoa ( int value, char * str, int base ); 
```

在你的情况下，这看起来像这样：

```
char Buf[10];
itoa(123, Buf, 10);
printf("%s", Buf); //Outputs 123 
```

但请记住，itoa 不是标准的一部分，尽管某些编译器支持它。对于更符合标准的版本，请使用：

```
sprintf(Buf, "%d", 123); 
```

当然，所有这些都是纯 C，但任何 C++ 编译器都可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:30:23.253

要将 [0,9] 范围内的数值转换为相应的字符，只需添加`'0'`即可。这保证适用于所有系统。

# wpf - 如何还原 EF 中的列更改

> ID：15201323
> 
> 赞同：0
> 
> 时间：2013-03-04T12:13:00.733
> 
> 标签：wpf, entity-framework, mvvm

在 EF4 中，我想在用户更改特定列时显示确认消息，例如“您确定要更改它吗？”，是/否。我只想在用户按 Yes 时接受此更改，如果他按 No，则将其恢复为原始值。我试图在EF 生成的部分方法 On* *Column* *Changing （例如**OnStatusChanging ）中执行此操作。**该方法为我提供了新的传入值，但我不知道如何“取消”它，相当于`e.Handled = true`, 或`e.Cancel = true`.

顺便说一句，我正在使用[这种](http://blogs.msdn.com/b/bethmassi/archive/2009/07/07/implementing-validation-in-wpf-on-entity-framework-entities.aspx)方法进行验证/确认。

# algorithm - 改进 A* 算法

> ID：15201329
> 
> 赞同：4
> 
> 时间：2013-03-04T12:13:45.503
> 
> 标签：algorithm

假设我正在使用 A* 算法在房子里寻找路径。现在运行时间可能是 O(n^2)。

我在想如果我知道要遵循哪些门并据此应用 A* 是否会提高性能，即如果我的起始位置`S`和最终位置为`F`，而不是在这两个端点上应用 A*，将如果我应用 A* 会更好

```
`S` and `A1`
`A1` and `A2`
`A2` and F. 
```

在哪里 A1 和 A2 是我的最短路径应遵循的中间体（门）？是否值得改进找到中间体，然后按照路径而不是直接在开始和结束时应用 A*。

考虑到找到中间体需要线性时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:30:33.083

`O(n^2)`是的，如果算法在运行时采取行为，这将有很大帮助。而不是一个大问题，您会遇到两个较小的问题，每个问题的计算成本都是其 1/4。

我确信在某些病理情况下它没有帮助甚至伤害，但在你的场景（房子）中它可能会有很大帮助。

我想你是在利用一个人必须上电梯或楼梯才能换楼层的事实。这将对 A* 有很大帮助，因为成本函数现在只能在一个楼层内工作。它将非常代表实际成本。与此相反，如果您想搬进同一个房间但要高一层，则成本函数会大大低估距离。在这种情况下，欧几里得距离将完全失败（并且算法将退化为穷举搜索）。首先移动到楼梯，然后从楼梯移动到所需的房间会更好。

# mouseover - onmouseover 操作不起作用...我该怎么办？

> ID：15201331
> 
> 赞同：0
> 
> 时间：2013-03-04T12:13:49.460
> 
> 标签：mouseover

```
 <span id="hintText_123" style="display:none">
          <table id="hintTable" style="width:100%;border:0px none;padding:0px;border-collapse:collapse;margin:0px;background-color:#7F9DB9;">
             <tr style=background-color:#56718A;>
             <td style="color:white;font-size:11px;font-weight:bold;padding:2px">
                                        Title
              </td>
              <td style="width:5%;padding:2px">
              <img alt="" src="close.gif" style="width:15px;height:15px"  align=middle onclick=parent.hidetip()>
                                    </td></tr>
              <tr  style="background-color:#8CA7C0;"><td style="color:white;font-size:10px;padding:2px" colspan=2 >Description
                 </td>
               </tr>
               </table>
                        </span> 
```

这是我想在以下项目的 mouseclick 事件上显示的表格

```
<span style="display:block;" onmouseout="toggleHelp('helpGrp_123',false,'group_field_name_123')" onclick="showhint(document.getElementById('hintTextGrp_123') , this, event, '380px')">
                                Hello!!!
</span>

</tr> 
```

**但点击Hello**时表格未显示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:22:47.027

```
<script>
function callMe()
{
    var tmp = document.getElementById("hintText_123");
    alert(tmp.style.display);
    tmp.style.display = 'block'; 
}
</script> 
```

调用 onmousemove="callMe()"

# cakephp - 如何在 cakephp 中即时导入组件

> ID：15201333
> 
> 赞同：0
> 
> 时间：2013-03-04T12:13:57.957
> 
> 标签：cakephp

我正在尝试使用以下语法在函数中导入组件：

`App::import('Component', 'ImageUploader');`

但是，如果我在类中定义它，它会起作用，例如：

```
class AbcController extends AppController {
public $name = 'Abc';
public $components = array('ImageUploader');`
} 
```

如何在函数中导入它？我正在使用 CakePhp 最新的稳定版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:52:45.163

来自[食谱](http://book.cakephp.org/2.0/en/controllers/components.html#loading-components-on-the-fly)

```
$this->ImageUploader = $this->Components->load('ImageUploader'); 
```

当然，这是假设您至少使用 v2 并希望在控制器函数中加载它。

# android - 安装 Android API 16 导致问题

> ID：15201334
> 
> 赞同：0
> 
> 时间：2013-03-04T12:13:58.140
> 
> 标签：android

我是一个非常新的 Android 开发人员。

我正在使用 API 17 并且我想使用 API 16 测试应用程序，我将其更改`project.properties` `target=android-17`为`target=android-16` 然后它似乎有这个错误：

```
Unable to resolve target 'android-16' 
```

我所做的是去 Android SDK Manager 下载并安装 API 16，之后没有任何效果，MainActivity 上的所有内容都是错误的，我无法运行任何项目，也无法创建任何新项目。

有人可以告诉我如何解决吗？我做错了什么？

# visual-studio-2008 - VS 2008：代码定义窗口错误的符号文件

> ID：15201337
> 
> 赞同：0
> 
> 时间：2013-03-04T12:14:03.100
> 
> 标签：visual-studio-2008, visual-c++, symbols, definition, platform-sdk

我已经安装了 Microsoft Platform SDKs v6.0A 和 v7.0。在 Visual Studio 2008 中，我包含了为从 v7.0 获取此文件而定义的内容。

除此之外，当我使用 CDW（代码定义窗口）来概述符号时，例如通过打开“uuids.h”来打开包含在 SDK v6.0A 而不是 v7.0 中的 GUID。

我清理了解决方案，我仔细检查了 VC++ 目录（包括、库等），它们都是在 v7.0 中设置的。

CDW 有什么问题？如何强制 CDW 看到 v7.0 路径而不是旧路径？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:06:40.160

您可以使用随任何 SDK 一起安装的“ *Windows SDK 配置工具”。*当您启动该工具时，它会显示所有已安装的 SDK 供您选择，然后您选择的那个将在 VS2008 中使用。

PS：在 [http://blogs.msdn.com/b/windowssdk/archive/2009/08/21/windows-sdk-configuration-检查“Windows SDK Configuration Tool May Report an Error When OS Display Format is not English”工具-可能报告-错误-when-os-display-format-is-not-english.aspx](http://blogs.msdn.com/b/windowssdk/archive/2009/08/21/windows-sdk-configuration-tool-may-report-an-error-when-os-display-format-is-not-english.aspx)

# android - 如何自定义 Actionbar.Tab？

> ID：15201342
> 
> 赞同：0
> 
> 时间：2013-03-04T12:14:27.207
> 
> 标签：android, android-actionbar

我正在使用设置了 NAVIGATION_MODE_TABS 的操作栏。您将出现在所选选项卡底部的矩形称为什么？以及如何定制它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:10:02.747

我不知道它是怎么叫的，也许是*tab highlight*。

无论如何，使用[Android 操作栏样式生成器](http://jgilfelt.github.com/android-actionbarstylegenerator)对其进行自定义。

# java - 如何在 Windows 7 命令提示符下编写 adb 命令

> ID：15201344
> 
> 赞同：3
> 
> 时间：2013-03-04T12:14:37.583
> 
> 标签：java, android, adb

我在eclipse中运行Android应用程序时遇到了一个大问题！当我完成应用程序的开发后，右键单击项目>运行方式>Android 应用程序，我看到一个

```
[2013-03-04 15:36:25 - DeviceMonitor] Connection attempts: 1
[2013-03-04 15:36:28 - DeviceMonitor] Connection attempts: 2
[2013-03-04 15:36:25 - DeviceMonitor] Connection attempts: 3 
```

在控制台窗口中。

然后我打开我的命令提示符（在 Win 7 32 位中）并查看

```
C:\user\saadati> 
```

我如何在其中编写 adb 命令？喜欢**adb kill-server**等。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T12:19:53.503

首先转到 Android-sdk Path -> (如 D:\RAJESH-ANDROID\android-sdk\platform-tools) 并执行你的命令，如 adb-kill server

```
like below :

Microsoft Windows [Version 6.1.7600]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\raj>cd D:\RAJESH-ANDROID\android-sdk\platform-tools

C:\Users\raj>d:

D:\RAJESH-ANDROID\android-sdk\platform-tools>adb kill-server

D:\RAJESH-ANDROID\android-sdk\platform-tools>adb start-server
* daemon not running. starting it now on port 5037 *
* daemon started successfully *

D:\RAJESH-ANDROID\android-sdk\platform-tools> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T12:27:25.380

将 adb 添加到您的 PATH 中，您将能够在 cmd 中的任何位置使用 adb 命令，这有助于快速构建应用程序和终止/启动服务器。

为此，请右键单击开始菜单中的*计算机*，然后单击属性。接下来，单击窗口左侧的*高级系统设置。*接下来，在弹出的窗口中单击*环境变量。*

从这里您可以获得用户变量和系统变量的列表。添加一个名为**ADB_HOME**的新系统变量，其值作为您的 android sdk 的平台工具文件夹的路径。接下来，找到**Path**变量并将**%ADB_HOME%**添加到此值字符串中。

您现在可以在任何地方使用 adb。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:18:08.123

Windows 7->运行->cmd->进入android sdk的platform-tools文件夹。

然后输入

adb kill-server adb start-server

ETC

# java - 使用 readObject() 接收对象时出现 NoClassDefFoundException

> ID：15201354
> 
> 赞同：0
> 
> 时间：2013-03-04T12:15:01.257
> 
> 标签：java, noclassdeffounderror, objectinputstream

这是我的设置：

我的服务器`IPlugin-Objects`使用`ObjectInputStream`. 传入的`IPlugin-Ob`ject 属于未知类，因此首先由`classloader`OIS 传输和加载类文件。然后，IPlugin 本身由客户端发送。IPlugin 的转换似乎不是问题（在 OIS 中使用我自己的类加载器时）。但是 IPlugin 使用 jama，现在我`NoClassDefFoundException`收到对象时得到了一个。对我来说奇怪的是，在服务器`classpath`中包含 Jama 库。我还尝试编写一个虚拟行，以便真正导入库（并且不会被编译器忽略）。

有人可以帮我吗？真的让我很烦...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:27:02.193

好的，我明白了：

问题是，我个人的 URIClassLoader 获得了所有可能的 URI，除了当前的类加载器。现在构造函数如下所示：

```
URLClassLoader loader = new URLClassLoader(new URL[]{pluginFolder.toURI().toURL()},
this.getClass().getClassLoader()); 
```

# javascript - 从 js 文件返回值

> ID：15201355
> 
> 赞同：3
> 
> 时间：2013-03-04T12:15:02.030
> 
> 标签：javascript, jquery, html, function

我的页面中有两个`js`文件`html`。如果第一个以 开头：

```
 (function($){
   ..  
   ..
   }(jQuery)); 
```

我可以插入一个`var`到它的值并在另一个文件中使用它吗`function($,varname)`？`return`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:19:59.040

为此，您需要一个全局变量。您可以通过以下几种方式之一执行此操作。假设我们需要将值“Bacon”发送到另一个脚本。

```
(function($){
   window.myScriptsExports = "Bacon";
}(jQuery));

// OR

var myScriptsExports = (function($){
   // other code
   return "Bacon";
   // NO other code
}(jQuery));

// OR (not really recommended)

(function($){
   // other code
   $.myScriptsExports = "Bacon";
   // other code
}(jQuery)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:27:33.437

您可以使用全局命名空间来改进代码，如下所示：

```
 (function($,global){
       var _obj = {};
       _obj.property1 = 'Property1';
       _obj.function1 = function() { console.log('Function 1');};
       global.myObject = _obj;
     }(jQuery,window));

     //accessing
     window.myObject.property1
     //or
     window.myObject.function1() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T12:17:48.950

假设你的函数是同步的，你可以设置一个全局函数：

```
 (function($){
   .. 
      var myvar = 666; 
      window.getMyVar = function() {
         return myvar;
      };
   ..
   }(jQuery)); 
```

如果在此之后导入第二个文件，您可以从另一个函数中使用它：

```
 (function($){
   .. 
      var myprevisouslysetvar = window.getMyVar();
   ..
   }(jQuery)); 
```

请注意，这些文件在 javascript 中无关紧要：您的页面将在两个文件连接的情况下以相同的方式工作（如果您有“使用严格”，则除了细节之外）。

# backbone.js - 如何在 Backbone 上创建嵌套模板

> ID：15201362
> 
> 赞同：0
> 
> 时间：2013-03-04T12:15:36.500
> 
> 标签：backbone.js, coffeescript

我是 Backbone 的新手，我正在尝试单击工具栏上的按钮（位于工具栏 div 上），该按钮称为“新建”。单击后，我想在 id="app-list" 的不同 div 上打开一个新面板。

但是当按下新按钮时，它总是覆盖“app-list”div

这是我的代码（我正在使用 Backbone 和 coffeescript）：

```
class MyApp.Views.ToolbarAppView extends Backbone.View
  el: "#toolbar-app"

  events: "click #add_new": "newApp"

  newApp: (e) ->
    myapp = new MyApp.Models.App
    @model = myapp
    newPanel = new MyApp.Views.NewAppView({ el: @$el, model: @model, parent: @})
    newParent.render()

 class MyApp.Views.NewAppView extends Backbone.View
   template: JST["myapp", "new_app_view"]

   render: ->
     fieldsPanel = new MyApp.Views.EditAppView({ el: @$el, model: @model, parent: @})
     fieldsPanel.setElement('#app-list').render()

class MyApp.Views.EditAppView extends Backbone.View
  template: JST["myapp", "edit_app_view"]
  tagName: "tr"
  className: "edit_data"

  render: ->
    @$el.html(@template({ el: @$el, model: @model, parent: @}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:23:48.380

在不知道您的 HTML 结构的外观的情况下，很难推断出可能是什么问题。然而，这里的这两行有一些有趣的地方：

```
fieldsPanel = new MyApp.Views.EditAppView({ el: @$el, model: @model, parent: @})
fieldsPanel.setElement('#app-list').render() 
```

在构造函数中，将视图设置`el`为`ToolbarAppView`'s `el`，然后在下一行将元素更改为另一个元素。

尝试用以下内容替换这两行：

```
fieldsPanel = new MyApp.Views.EditAppView({ el:'#app-list', model: @model, parent: @}) 
```

如果失败，请考虑使用更多信息编辑您的问题，尤其是关于 HTML 模板的相关部分。

# sharepoint - 用于存储会话状态的 SharePoint 2013 分布式缓存服务

> ID：15201364
> 
> 赞同：1
> 
> 时间：2013-03-04T12:15:38.593
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2013

我们正在开发基于 SharePoint 2013 Foundation 的解决方案。SharePoint 2013 中提供了一个新的分布式缓存服务。当我们检查 web.config 以获取新的示例 SharePoint Web 应用程序时，我们发现它被配置为使用“进程内”模式来存储会话状态。我们可以利用这种分布式缓存服务来存储会话状态吗？

我还在以下 msdn 文章中看到了用于在数据库中配置会话状态的 powershell cmdlet：[http](http://technet.microsoft.com/en-us/library/ee890113.aspx) ://technet.microsoft.com/en-us/library/ee890113.aspx 。数据库是存储会话状态的首选方式，而不是 SharePoint 2013 的分布式缓存吗？

是否还有其他替代方法可用于在 SharePoint 2013 中存储会话状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:27:39.267

`Enable-SPSessionStateService`通常，您必须使用链接到的文章中的 PowerShell cmdlet 来使用 SharePoint 会话状态服务。

SharePoint 分布式缓存服务适用于可缓存项目，尤其是源、登录令牌和应用程序令牌。我没有看到会话状态提供者的实现。这里有一个关于分布式缓存服务的很好的解释：

*   [SharePoint 2013 中的分布式缓存服务](http://www.c-sharpcorner.com/UploadFile/d2ee01/distributed-cache-service-in-sharepoint-2013/)

该服务依赖于 Azure，或者更具体地说，依赖于 AppFabric 缓存基础结构。您可以实现自己的东西来访问此缓存框架，如下所述：

*   [WCF 服务中的缓存：第 2 部分 - AppFabric 分布式缓存](http://dotnet.dzone.com/articles/caching-wcf-services-part-2)

如前所述，SharePoint 使用会话状态服务，而后者又使用标准 ASP.NET 会话状态：

*   [在 SharePoint 2010 中使用会话状态](http://blogs.msdn.com/b/markarend/archive/2010/05/27/using-session-state-in-sharepoint-2010.aspx)

正如您所说的正确，状态服务的默认模式设置为`In-Proc`（在内存中）。您通常所做的是将其设置为，`SQLServer`以便将会话状态保存到某个数据库中，并且可以由多个服务器检索。您在帖子中链接的 PowerShell cmdlet 会自动为您执行此操作。

简而言之：通过实现您自己的 ASP.NET 会话状态处理程序，您可以绕过普通的 SharePoint 状态服务并利用分布式缓存，但这并不容易，也许只使用状态数据库更容易。

# haskell - 使用类型族时简化类型签名？

> ID：15201365
> 
> 赞同：2
> 
> 时间：2013-03-04T12:15:39.043
> 
> 标签：haskell, type-families

我正在重写我的一些库以使用类型族而不是功能依赖项。但是，似乎我必须添加到函数中以使它们编译的一些约束是不必要的。这让我怀疑我没有以最好的方式做事。

在下面的示例中，有没有办法改进和的定义，`Grid`以便`GridMap`和的签名`diff`更`classify`简单？特别是，约束`BaseGrid (Container gm k) ~ BaseGrid gm`、`Container (Container gm k) ~ Container gm`和`GridMap (Container gm k)`on`classify`似乎不优雅。

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-}

import Prelude hiding (map)
import Data.List (minimumBy)
import qualified Data.Map as M
import Data.Ord (comparing)

class Grid g where
  type Index g
  indices :: g -> [Index g]
  -- plus other functions

class (Grid (BaseGrid gm)) => GridMap gm where
  type BaseGrid gm
  type Value gm
  type Container gm :: * -> *

  toMap :: gm -> M.Map (Index (BaseGrid gm)) (Value gm)
  toList :: gm -> [(Index (BaseGrid gm), Value gm)]
  toList = M.toList . toMap

  map
    :: (GridMap gm2, gm2 ~ Container gm (Value gm2)) => 
      (Value gm -> Value gm2) -> gm -> gm2

  mapWithKey 
    :: (GridMap gm2, gm2 ~ Container gm (Value gm2)) => 
      (Index gm -> Value gm -> Value gm2) -> gm -> gm2
  -- plus other functions

class Pattern p where
  type Metric p
  difference :: p -> p -> Metric p
  makeSimilar :: p -> Metric p -> p -> p

diff 
  :: (GridMap gm1, p ~ Value gm1, GridMap gm2, Pattern p, 
      Metric p ~ Value gm2, Container gm1 ~ Container gm2, 
      BaseGrid gm1 ~ BaseGrid gm2,
      gm2 ~ Container gm2 (Value gm2)) => 
    gm1 -> p -> gm2
diff c pattern = map (pattern `difference`) c

classify
  :: (GridMap gm, p ~ Value gm, Pattern p, Ord k, k ~ Metric p, 
      k ~ Index (BaseGrid gm), k ~ Value (Container gm k),
      BaseGrid (Container gm k) ~ BaseGrid gm,
      Container (Container gm k) ~ Container gm,
      GridMap (Container gm k)) =>
    gm -> p -> k
classify c pattern = 
  fst $ minimumBy (comparing snd) $ toList $ diff c pattern 
```

* * *

编辑：我喜欢 leventov 的解决方案，但是当我尝试实现它时，我得到一个我不理解的编译错误。

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-}

import Prelude hiding (map)
import Data.List (minimumBy)
import qualified Data.Map as M
import Data.Ord (comparing)

class Grid g where
  type Index g
  indices :: g -> [Index g]
  -- plus other functions

class (Grid (BaseGrid gm a)) => GridMap gm a where
  type BaseGrid gm a

  toMap :: gm -> M.Map (Index (BaseGrid gm a)) a
  toList :: gm -> [(Index (BaseGrid gm a), a)]
  toList = M.toList . toMap

  map :: GridMap gm b => (a -> b) -> gm a -> gm b -- <<<<<LINE 20>>>>>

  mapWithKey 
    :: GridMap gm b => 
      (Index (BaseGrid gm a) -> a -> b) -> gm a -> gm b
  -- plus other functions

class Pattern p where
  type Metric p
  difference :: p -> p -> Metric p
  makeSimilar :: p -> Metric p -> p -> p

diff 
  :: (GridMap gm p, Pattern p, GridMap gm m,
      Metric p ~ m, BaseGrid gm p ~ BaseGrid gm m) => 
    gm p -> p -> gm m
diff c pattern = map (pattern `difference`) c

classify
  :: (GridMap gm p, Pattern p, Ord k, k ~ Metric p, 
      k ~ Index (BaseGrid gm p),
      BaseGrid gm k ~ BaseGrid gm p) =>
    gm p -> p -> k
classify c pattern = 
  fst $ minimumBy (comparing snd) $ toList $ diff c pattern 
```

我得到的错误是：

```
../Amy5.hs:20:42:
    `gm' is applied to too many type arguments
    In the type `GridMap gm b => (a -> b) -> gm a -> gm b'
    In the class declaration for `GridMap'
Failed, modules loaded: none. 
```

如果我离开约束，我也会收到此错误`GridMap gm b =>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:44:30.583

我会`GridMap`使用 2 个参数：容器本身和值类型。

就像是

```
{-# LANGUAGE TypeFamilies, FlexibleContexts, MultiParamTypeClasses #-}

import Prelude hiding (map)
import Data.List (minimumBy)
import qualified Data.Map as M
import Data.Ord (comparing)

class Grid g where
  type Index g
  indices :: g -> [Index g]
  -- plus other functions

class (Grid (BaseGrid gm a)) => GridMap (gm :: * -> *) a where
  type BaseGrid gm a

  toMap :: gm a -> M.Map (Index (BaseGrid gm a)) a
  toList :: gm a -> [(Index (BaseGrid gm a), a)]
  toList = M.toList . toMap

  map :: GridMap gm b => (a -> b) -> gm a -> gm b -- <<<<<LINE 20>>>>>

  mapWithKey 
    :: GridMap gm b => 
      (Index (BaseGrid gm a) -> a -> b) -> gm a -> gm b
  -- plus other functions

class Pattern p where
  type Metric p
  difference :: p -> p -> Metric p
  makeSimilar :: p -> Metric p -> p -> p

diff 
  :: (GridMap gm p, Pattern p, GridMap gm m,
      Metric p ~ m, BaseGrid gm p ~ BaseGrid gm m) => 
    gm p -> p -> gm m
diff c pattern = map (pattern `difference`) c

classify
  :: (GridMap gm p, Pattern p, Ord k, k ~ Metric p, 
      k ~ Index (BaseGrid gm p),
      GridMap gm k,
      BaseGrid gm k ~ BaseGrid gm p) =>
    gm p -> p -> k
classify c pattern = 
  fst $ minimumBy (comparing snd) $ toList $ diff c pattern 
```

# eclipse - Eclipse Javadoc 的弹出字体大小

> ID：15201367
> 
> 赞同：6
> 
> 时间：2013-03-04T12:15:44.487
> 
> 标签：eclipse

我的 Fedora 17 上运行着 Eclipse Juno。

当我将鼠标悬停在 Eclipse 中的函数/变量上时，会弹出一个框，其中包含有关该函数的信息，字体大小约为 30 或 40 个单位。我真的很难搜索以减小字体大小，但我不能。

为什么我有这个问题？

我知道 Eclipse IDE 的字体设置在哪里。我已经更改并测试了那里的所有选项，以查看哪些可能会更改字体，但没有一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-04T20:24:20.390

评论中@tobias_k 的回答帮助我获得了对话框的正确设置。我在这里复制它以方便任何人参考。

```
Preferences -> Appearance -> Colors and Fonts -> Java -> Javadoc Display Font 
```

这应该能让你到达你需要的地方。澄清一下，文档弹出窗口被认为是一个对话框，因此它会检查对话框的字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:21:53.737

您是否尝试过更改 gnome 主题，或者您的 shell 是什么。我在 Ubuntu 中有类似的问题，问题出在这个窗口的背景上，它是黑色的，我的字体也是黑色的，所以什么都无法读取，但是当我改变我的主题时，现在一切都很好。

# iphone - 跟踪访客用户在我的 iPhone 上的操作

> ID：15201372
> 
> 赞同：-2
> 
> 时间：2013-03-04T12:15:57.737
> 
> 标签：iphone, ios, tracking

如果我们可以跟踪用户的操作，在 iPhone 中是否有可能？比如他打开了哪些应用程序，发送了消息或呼叫等。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:52:13.190

简单的回答：没有

应用程序无法访问不同应用程序的使用信息。

通过实现 Proxy-App 有一个（work arround）解决方案，它提供代理服务器并在首选项中注册该代理服务器。所有网络数据都将通过该代理，您的代理应用程序可以将使用统计信息发送到您的服务器。

但是，您只能跟踪网络流量，而不能跟踪其他使用情况统计信息。而且，这个应用程序永远不会通过应用程序审查过程......

# javascript - 使用 JavaScript/jQuery 将 HTML 实体分配为属性值

> ID：15201373
> 
> 赞同：4
> 
> 时间：2013-03-04T12:16:02.590
> 
> 标签：javascript, jquery, html-entities, icon-fonts

我一直在 css-tricks 上遵循这种技术向网站添加图标：http: [//css-tricks.com/html-for-icon-font-usage/](http://css-tricks.com/html-for-icon-font-usage/)

我的 CSS 中有这个：

```
[data-icon]:before {
  font-family: Symbol;
  content: attr(data-icon);
  speak: none;
} 
```

但是，我的部分界面是使用 jQuery 生成的。这是一个这样的控制：

```
var $control = $('<div>', {
    'aria-hidden':'true'
    , 'data-icon': '&#57372;'
}); 
```

我已经尝试将它编码为`\e01c`, `\\e01c`, `&#xe01c;`，你的名字，我可能已经尝试过了。结果总是一样的，在 & 号之后的所有内容都被渲染到屏幕上，因为 & 号`&amp;`在源代码中出现或者反斜杠出现了。

我尝试在 CSS 内容中连接：

```
content: "&" attr(data-icon) ";"; 
```

并且只在数据中包含数字，但与号仍然会自行编码。

有没有办法对这个实体进行编码并将其正确输出到页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:08:30.477

要在 JavaScript 中编码代码点 57372，请使用`'\ue01c'`.

您应该知道它不会很好地呈现，因为 unicode 将其定义为私有使用区域中未分配的代码点”：

[http://www.unicode.org/charts/PDF/UE000.pdf](http://www.unicode.org/charts/PDF/UE000.pdf)

> 私人使用区
> 
> 范围：E000-F8FF
> 
> 私人使用区域不包含任何字符分配，因此没有为该区域提供字符代码图表或名称列表。

也许您的意思是另一个代码点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:21:13.033

这有点骇人听闻，但应该可以：

```
'data-icon': $("<span>&#57372;</span>").contents().get(0).nodeValue 
```

[**演示在这里**](http://jsfiddle.net/salman/C6jyq/)

它的工作原理如下：

`$("<span>&entity;</span>")`创建一个具有一个子类型的 span 元素`textNode`。[`.contents()`](http://api.jquery.com/contents/)用于提取包括文本节点在内的所有子节点，`nodeValue`然后将其分配给`data-icon`属性。

# php - 将 PHP 变量转换为 JQuery 变量。

> ID：15201375
> 
> 赞同：0
> 
> 时间：2013-03-04T12:16:18.280
> 
> 标签：php, jquery

我有一个名为的 PHP 变量`$finalprice`

如果我从 PHP 中回显它，它会返回`147`

然后我想操作它并使用 JQuery 进行一些计算，所以我执行以下操作：

```
 $('#childseat').change(function() {
        $('#childseatadd').show();
            var price = "<?php echo number_format($finalprice, 2); ?>";
            alert(price);
            var numberofboostseat = $(this).val();
            alert(numberofboostseat);
            var numofdays = "<?php echo $length->days; ?>";
            alert(numofdays);
            var boostcost = Number(3) * Number(numofdays);
            var boosttotal = Number(numberofboostseat) * Number(boostcost);
            var newprice = Number(price) + Number(boosttotal);
            $('.price').html(newprice);
        }); 
```

我的其余计算都很好，但是这些行：

```
var price = "<?php echo number_format($finalprice, 2); ?>";
alert(price); 
```

警报返回**140**而不是**147**，我不知道为什么我会失去 7.... 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:30:52.667

以下是 jquery 中一个 php 变量的示例：

```
 <script>
$(function(){
   $("a#yeah").click(function(){
           $.ajax({
        url: "ajax.php?action=yeah&id=<?php echo $id?>",
        success: function(html){
         $("a#yeah").html("your cool")
                   }
     })
   })

})</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:38:26.073

首先检查您进入的`$finalprice`内容`alert`：

```
alert("<?php echo number_format($finalprice, 2); ?>"); 
```

还要检查一下，你不是你`change`的。`value``$finalprice``code`

# python - 如何使用 matplotlib 在一张图表中绘制多个水平条

> ID：15201386
> 
> 赞同：8
> 
> 时间：2013-03-04T12:16:43.723
> 
> 标签：python, matplotlib, plot, bar-chart

你能帮我弄清楚如何用 matplotlib 绘制这种情节吗？

我有一个代表表格的熊猫数据框对象：

```
Graph       n           m
<string>    <int>      <int> 
```

我想可视化每个的大小`n`：`m`一个`Graph`水平条形图，其中每一行都有一个标签，其中包含`Graph`y 轴左侧的名称；在 y 轴的右侧，有两条细横条，它们正下方，它们的长度分别代表`n`和`m`。应该清楚地看到两个细条都属于标有图形名称的行。

这是我到目前为止写的代码：

```
fig = plt.figure()
ax = gca()
ax.set_xscale("log")
labels = graphInfo["Graph"]
nData = graphInfo["n"]
mData = graphInfo["m"]

xlocations = range(len(mData))
barh(xlocations, mData)
barh(xlocations, nData)

title("Graphs")
gca().get_xaxis().tick_bottom()
gca().get_yaxis().tick_left()

plt.show() 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-05T02:02:29.473

听起来您想要与此示例非常相似的东西：http: [//matplotlib.org/examples/api/barchart_demo.html](http://matplotlib.org/examples/api/barchart_demo.html)

作为开始：

```
import pandas
import matplotlib.pyplot as plt
import numpy as np

df = pandas.DataFrame(dict(graph=['Item one', 'Item two', 'Item three'],
                           n=[3, 5, 2], m=[6, 1, 3])) 

ind = np.arange(len(df))
width = 0.4

fig, ax = plt.subplots()
ax.barh(ind, df.n, width, color='red', label='N')
ax.barh(ind + width, df.m, width, color='green', label='M')

ax.set(yticks=ind + width, yticklabels=df.graph, ylim=[2*width - 1, len(df)])
ax.legend()

plt.show() 
```

![在此处输入图像描述](../Images/d283e510edf211a0e74c82bbf4479c0b.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-05-16T23:12:56.037

问题和答案现在有点老了。[根据文档，](https://pandas.pydata.org/pandas-docs/version/0.23/generated/pandas.DataFrame.plot.barh.html)这现在要简单得多。

```
>>> speed = [0.1, 17.5, 40, 48, 52, 69, 88]
>>> lifespan = [2, 8, 70, 1.5, 25, 12, 28]
>>> index = ['snail', 'pig', 'elephant',
...          'rabbit', 'giraffe', 'coyote', 'horse']
>>> df = pd.DataFrame({'speed': speed,
...                    'lifespan': lifespan}, index=index)
>>> ax = df.plot.barh() 
```

[![在此处输入图像描述](../Images/f0c101ff67d9f727bf8d57ba9f6785b6.png)](https://i.stack.imgur.com/uhfZ2.png)

# c# - C# 异步 Web 服务

> ID：15201388
> 
> 赞同：1
> 
> 时间：2013-03-04T12:16:50.360
> 
> 标签：c#, web-services, asynchronous

有人可以给我一个示例，说明如何使用方法开始向用户显示警告说正在加载...使用下面的代码，我使用 Completed 事件放置查询，使用方法作为开始？

```
service.EventosDoDiaCompleted += RecebeEventos;
service.EventosDoDiaAsync();

private void RecebeEventos(object sender, AsyncCompletedEventArgs e)
{
   Dataset ds = service.EventosDoDia();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:21:01.660

只需放置简单的 Textblock 或类似的东西：

```
 service.EventosDoDiaCompleted += RecebeEventos;
    textblock.Text="Loading....";
    service.EventosDoDiaAsync();
    private void RecebeEventos(object sender, AsyncCompletedEventArgs e)
    {
        textblock.Text="Loaded";
        Dataset ds = service.EventosDoDia();
    } 
```

# excel - 搜索多个值并将单元格下方复制到下一张表

> ID：15201392
> 
> 赞同：1
> 
> 时间：2013-03-04T12:16:58.993
> 
> 标签：excel, excel-formula, vba

我有一个 30K+ 行的 excel 表（原始），有一个 Header 行，后跟一个值行，整个 excel 表行是这样交替的。

我需要将一行中所有唯一标题的列表复制到新工作表（所需），以及相应标题下方的所有相关值。

简而言之，我正在尝试将“原始”表合并到“所需”中。

非常感谢您对此的任何帮助。

这是我的示例原始表：

```
Header1  Header6  Header5  Header3  Header4  Header2
1        223      3        4        5        6
Header4  Header3  Header2  Header6  Header5  Header1  Header7
12       53       879      234      546      123      876
Header2  Header3  Header5  Header6  Header4  Header1
abc      sdf      weroit   scfm     Aasd     ertmn
Header5  Header3  Header8  Header6  Header2  Header1  Header7  Header4
123      sdf      564      sdg      nhd      234      vdsq     234 
```

这是我想要的表：

```
Header1  Header2  Header3  Header4  Header5  Header6  Header7  Header8
1        6        4        5        3        223
123      879      53       12       546      234      876
ertmn    abc      sdf      Aasd     weroit   scfm
234      nhd      sdf      234      123      sdg      vdsq     564 
```

谢谢-拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:28:53.007

Thank you for (a) providing a data sample (even space delimited!) and (b) the desired result (even consistent with the data sample!)

Using formulae, one option possibility is as below:

*   Work on a copy of your spreadsheet.
*   Clone your entire array alongside the existing one (I’d guess into `I1:P30000`).
*   Delete (shift up) the first row of the ‘clone’.
*   Filter `ColumnI` based on ‘Contains: Header’ and delete entire rows.
*   Cut and insert `I` alongside `A` .. to .. `O` (alongside what should be `M`).
*   Copy ‘Header1’ into `Q1` and drag to the right until ‘Header8’.
*   Insert the formula below in `Q2` and copy across/down as required:

    > =IFERROR(INDEX($A2:$P2,1,MATCH(R$1,$A2:$P2,0)+1),"")

*   Select entire sheet contents and Copy > Paste Special > Values.

*   Delete `A:Q`, Left align and Save as “Desired”.

This seems quite viable for occasional use, though obviously VBA wins hands down if required often. So maybe turn on macro recorder while taking the above steps?

# php - 之字形扫描 N x N 阵列

> ID：15201395
> 
> 赞同：50
> 
> 时间：2013-03-04T12:17:04.600
> 
> 标签：php, arrays, algorithm, zigzag

我有一个简单的数组。数组长度总是有一个整数的平方根。所以 16、25、36 等等。

```
$array = array('1', '2', '3', '4' ... '25'); 
```

我所做的是用 HTML 排列数组，使其看起来像一个具有均匀边的块。

![](../Images/25ab824449cc89342ebf715dc38a99cc.png)

我想做的是对元素进行排序，这样当我将 JSON 编码的数组传递给 jQuery 时，它将迭代数组，淡入当前块，因此我会得到一种波浪动画。所以我想像这样对数组进行排序

![](../Images/16fc651a39fa4e20846af302d3267091.png)

所以我的排序数组看起来像

```
$sorted = array('1', '6', '2', '3', '7', '11', '16, '12' .. '25'); 
```

有没有办法这样做？..谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-05T23:02:54.203

很酷的问题。这是一个分析和一个算法。

使用此算法的一个关键优势是它全部使用简单的整数计算完成；它没有“if”语句，因此没有分支，这意味着如果它被编译，即使对于非常大的 n 值，它也会非常快速地执行。这也意味着它可以很容易地并行化以将工作分配到多个处理器上以获得*非常*大的 n 值。

考虑一个 8x8 网格（这里，输入在技术上是 n = 64，但为了简单起见，我将在下面的公式中使用 n = 8）遵循这个 zigzag 模式，就像这样（使用 0 索引的行和列轴）：

```
 [ 0] [ 1] [ 2] [ 3] [ 4] [ 5] [ 6] [ 7]
[ 0]   1    3    4   10   11   21   22   36
[ 1]   2    5    9   12   20   23   35   37
[ 2]   6    8   13   19   24   34   38   49
[ 3]   7   14   18   25   33   39   48   50
[ 4]  15   17   26   32   40   47   51   58
[ 5]  16   27   31   41   46   52   57   59
[ 6]  28   30   42   45   53   56   60   63
[ 7]  29   43   44   54   55   61   62   64 
```

首先注意从左下角 (0,7) 到右上角 (7,0) 的对角线将网格划分为两个近乎镜像的分量：

```
 [ 0] [ 1] [ 2] [ 3] [ 4] [ 5] [ 6] [ 7]
[ 0]   1    3    4   10   11   21   22   36
[ 1]   2    5    9   12   20   23   35
[ 2]   6    8   13   19   24   34
[ 3]   7   14   18   25   33
[ 4]  15   17   26   32
[ 5]  16   27   31
[ 6]  28  30
[ 7]  29 
```

和

```
 [ 0] [ 1] [ 2] [ 3] [ 4] [ 5] [ 6] [ 7]
[ 0]                                     36
[ 1]                                35   37
[ 2]                           34   38   49
[ 3]                      33   39   48   50
[ 4]                 32   40   47   51   58
[ 5]            31   41   46   52   57   59
[ 6]       30   42   45   53   56   60   63
[ 7]   29  43   44   54   55   61   62   64 
```

您可以看到右下角只是左上角的镜像，并从平方加上 1（在本例中为 65）减去。

如果我们可以计算左上部分，那么右下部分可以很容易地计算，只需将平方加 1 ( `n * n + 1`) 并减去反坐标 ( `value(n - x - 1, n - y - 1)`) 处的值。

例如，考虑右下角的任意一对坐标，例如 (6,3)，其值为 48。按照这个公式，可以得到`(8 * 8 + 1) - value(8 - 6 - 1, 8 - 3 - 1)`，简化为`65 - value(1, 4)`。查看左上角，(1,4) 处的值为 17 `65 - 17 == 48`。

但是我们仍然需要计算左上角的部分。请注意，这也可以进一步细分为两个重叠的组件，其中一个组件的数字会随着您向右上方的增加而增加：

```
 [ 0] [ 1] [ 2] [ 3] [ 4] [ 5] [ 6] [ 7]
[ 0]        3        10        21        36
[ 1]   2         9        20        35
[ 2]        8        19        34
[ 3]   7        18        33
[ 4]       17        32
[ 5]  16        31
[ 6]       30
[ 7]  29 
```

当您向左下方移动时，其中一个组件的数字会增加：

```
 [ 0] [ 1] [ 2] [ 3] [ 4] [ 5] [ 6] [ 7]
[ 0]   1         4        11        22     
[ 1]        5        12        23     
[ 2]   6        13        24     
[ 3]       14        25     
[ 4]  15        26     
[ 5]       27     
[ 6]  28    
[ 7] 
```

前者也可以定义为坐标`x + y`和为奇数的数，后者定义为坐标和为偶数的数。

现在，这里的关键见解是我们在这里绘制三角形，所以毫不奇怪，[三角形数](http://en.wikipedia.org/wiki/Triangular_number)在这里扮演着重要的角色。三角形数序为：1、3、6、10、15、21、28、36、...

如您所见，在奇和分量中，每隔一个以 3 开头的三角形数出现在第一行（3、10、21、36）中，而在偶数分量中，每隔一个以 1 开头的三角形数出现在第一列 (1, 6, 15, 28)。

具体来说，对于给定的坐标对 (x,0) 或 (0,y)，对应的三角形数是 triangle(x + 1) 或 triangle(y + 1)。

图形的其余部分可以通过从这些三角形数中向上或向下递增地减去对角线来计算，这相当于减去给定的行数或列数。

请注意，*对角线*可以正式定义为具有给定坐标和的所有单元格的集合。例如，坐标和为 3 的对角线具有坐标 (0,3)、(1,2)、(2,1) 和 (3,0)。因此，单个数字定义了每个对角线，并且该数字也用于确定起始三角形数。

所以从简单的检查来看，计算奇和分量的公式很简单：

```
triangle(x + y + 1) - y 
```

计算偶和分量的公式很简单：

```
triangle(x + y + 1) - x 
```

众所周知的三角形数公式也很简单：

```
triangle(n) = (n * (n + 1)) / 2 
```

所以，算法是：

1.  初始化一个 nxn 数组，其中 n 是输入大小的平方根。
2.  计算左上部分的偶数和坐标的索引。这可以通过嵌套两个循环来完成，一个外循环“y 从 0 到 n - 1”和一个内循环“x 从 y % 2 到 y，步长为 2”（通过在当前 y 上限制 x，我们只根据需要查看左上部分，并且从 y % 2 开始并以 2 为步长，我们只能得到偶数和坐标）。可以将循环索引插入上面的公式以获得结果。`value[x, y] = triangle(x + y + 1) - x`.
3.  计算左上部分的奇数和坐标的索引。这可以通过类似的循环来完成，除了内部循环是“x 从 y % 2 + 1 到 y 以 2 为步长”，只得到奇数坐标。`value[x, y] = triangle(x + y + 1) - y`.
4.  `n * n + 1`如本文第一部分所述，通过简单的减法计算右下部分的索引。这可以通过两个向后计数的嵌套循环来完成（并将内部循环限制在外部循环上以仅获得右下部分）。`value[x, y] = (n * n + 1) - value[n - x - 1, n - y - 1]`.
5.  将网格展平为一个数组（排列所有行），然后使用网格中生成的数字作为新索引将给定的输入（大小为 n * n）转换为输出。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-04T13:09:28.107

这是我的。

```
function waveSort(array $array) {
  $dimension = pow(count($array),0.5);
  if((int)$dimension != $dimension) {
    throw new InvalidArgumentException();
  }

  $tempArray = array();
  for($i = 0; $i < $dimension; $i++) {
    $tempArray[] = array_slice($array,$i*$dimension,$dimension);
  }

  $returnArray = array();

  for($i = 0; $i < $dimension * 2 -1; $i++) {
    $diagonal = array();

    foreach($tempArray as $x => $innerArray) {
      if($i - $x >= 0 && $i - $x < $dimension) {
        $diagonal[] = $innerArray[$i - $x];
      }
    }

    if($i % 2 == 1) {
      krsort($diagonal);
    }

    $returnArray = array_merge($returnArray,$diagonal);

  }

  return $returnArray;

} 
```

用法：

```
<?php
$a = range(1,25);
var_dump(waveSort($a)); 
```

输出

```
array(25) {
  [0]=>
  int(1)
  [1]=>
  int(6)
  [2]=>
  int(2)
  [3]=>
  int(3)
  [4]=>
  int(7)
  [5]=>
  int(11)
  [6]=>
  int(16)
  [7]=>
  int(12)
  [8]=>
  int(8)
  [9]=>
  int(4)
  [10]=>
  int(5)
  [11]=>
  int(9)
  [12]=>
  int(13)
  [13]=>
  int(17)
  [14]=>
  int(21)
  [15]=>
  int(22)
  [16]=>
  int(18)
  [17]=>
  int(14)
  [18]=>
  int(10)
  [19]=>
  int(15)
  [20]=>
  int(19)
  [21]=>
  int(23)
  [22]=>
  int(24)
  [23]=>
  int(20)
  [24]=>
  int(25)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T22:18:34.010

尽管这个问题已经有很多解决方案，但这是我的：

将其与其他解决方案区分开来的主要特点：

*   只有一个复杂度 O(n) 的循环
*   只有原始（整数）临时变量

来源：

```
<?php

function zigzag($input)
{
    $output = array();

    $inc = -1;
    $i = $j = 0;
    $steps = 0;

    $bounds = sqrt(sizeof($input));

    if(fmod($bounds, 1) != 0)
    {
        die('Matrix must be square');
    }

    while($steps < sizeof($input))
    {
        if($i >= $bounds) // bottom edge
        {
            $i--;
            $j++;
            $j++;
            $inc = 1;
        }
        if($j >= $bounds) // right edge
        {
            $i++;
            $i++;
            $j--;
            $inc = -1;
        }
        if($j < 0) // left edge
        {
            $j++;
            $inc = 1;
        }
        if($i < 0) // top edge
        {
            $i++;
            $inc = -1;
        }

        $output[] = $input[$bounds * $i + $j];

        $i = $i - $inc;
        $j = $j + $inc;
        $steps++;
    }
    return $output;
}

$a = range(1,25);
var_dump(zigzag($a)); 
```

顺便说一下，这种算法被称为“zig zag 扫描”，并被大量用于 JPEG 和 MPEG 编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T16:26:33.627

使用单个循环并利用 simetry 并且没有排序：

```
function waveSort(array $array) {
    $n2=count($array);
    $n=sqrt($n2);
    if((int)$n != $n) throw new InvalidArgumentException();

    $x=0; $y=0; $dir = -1;

    $Result = array_fill(0, $n2, null);
    for ($i=0; $i < $n2/2; $i++) {

        $p=$y * $n +$x;

        $Result[$i]=$array[$p];
        $Result[$n2-1-$i]=$array[$n2-1-$p];

        if (($dir==1)&&($y==0)) {
            $x++;
            $dir *= -1;
        } else if (($dir==-1)&&($x==0)) {
            $y++;
            $dir *= -1;
        } else {
            $x += $dir;
            $y -= $dir;
        }
    }

    return $Result;
}

$a = range(1,25);
var_dump(waveSort($a)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:04:59.800

我用 C# 编写了它，所以没有在 PHP 中编译/解析它，但是这个逻辑应该可以工作：

```
List<long> newList = new List<long>();
double i = 1;

double root = Math.Sqrt(oldList.Count);
bool direction = true;

while (newList.Count < oldList.Count)
{
    newList.Add(oldList[(int)i - 1]);
    if (direction)
    {
        if (i + root > root * root)
        {
            i++;
            direction = false;
        }
        else if (i % root == 1)
        {
            i += 5;
            direction = false;
        }
        else
        {
            i += root - 1;
        }
    }
    else
    {
        if (i - root <= 0)
        {
            direction = true;
            if (i % root == 0)
            {
                i += root;
            }
            else
            {
                i++;
            }
            direction = true;
        }
        else if (i % root == 0)
        {
            direction = true;
            i += root;
        }
        else
        {
            i += 1 - root;
        }
    }
} 
```

PHP 版本看起来像这样：

```
$oldList = ...
$newList = [];
$i = 1;

$root = sqrt(Count($oldList);
$direction = true;

while (count($newList) < count($oldList)
{
    $newList[] = $oldList[$i - 1];
    if ($direction)
    {
        if ($i + $root > $root * $root)
        {
            $i++;
            $direction = false;
        }
        else if ($i % $root == 1)
        {
            $i += 5;
            $direction = false;
        }
        else
        {
            $i += $root - 1;
        }
    }
    else
    {
        if ($i - $root <= 0)
        {
            $direction = true;
            if ($i % $root == 0)
            {
                $i += $root;
            }
            else
            {
                i++;
            }
            direction = true;
        }
        else if ($i % $root == 0)
        {
            $direction = true;
            $i += $root;
        }
        else
        {
            $i += 1 - $root;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T13:05:51.387

示例 Python 实现：

```
def wave(size):
    curX = 0
    curY = 0
    direction = "down"
    positions = []
    positions.append((curX, curY))
    while not (curX == size-1 and curY == size-1):
        if direction == "down":
            if curY == size-1: #can't move down any more; move right instead
                curX += 1
            else:
                curY += 1
            positions.append((curX, curY))
            #move diagonally up and right
            while curX < size-1 and curY > 0:
                curX += 1
                curY -= 1
                positions.append((curX, curY))
            direction = "right"
            continue
        else: #direction == "right"
            if curX == size-1: #can't move right any more; move down instead
                curY += 1
            else:
                curX += 1
            positions.append((curX, curY))
            #move diagonally down and left
            while curY < size-1 and curX > 0:
                curX -= 1
                curY += 1
                positions.append((curX, curY))
            direction = "down"
            continue
    return positions

size = 5
for x, y in wave(size):
    index = 1 + x + (y*size)
    print index, x, y 
```

输出：

```
1 0 0
6 0 1
2 1 0
3 2 0
7 1 1
11 0 2
16 0 3
12 1 2
8 2 1
4 3 0
5 4 0
9 3 1
13 2 2
17 1 3
21 0 4
22 1 4
18 2 3
14 3 2
10 4 1
15 4 2
19 3 3
23 2 4
24 3 4
20 4 3
25 4 4 
```

喜剧单行实现：

```
def wave(size):
    return [1+x+size*y for x,y in filter(lambda (x,y): x >=0 and x < size and y >= 0 and y < size, reduce(lambda x, y: x+y, [r if i==0 else list(reversed(r)) for i, r in enumerate([(x-delta, delta) for delta in range(size)] for x in range(size*2))], []))]

print wave(5) 
```

输出：

```
[1, 6, 2, 11, 7, 3, 16, 12, 8, 4, 21, 17, 13, 9, 5, 22, 18, 14, 10, 23, 19, 15, 24, 20, 25] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T13:27:09.613

另一种 PHP 解决方案，仅使用`for`and `if`，仅遍历数组一次

```
function waveSort(array $array) {

    $elem = sqrt(count($array));

    for($i = 0; $i < $elem; $i++) {
        $multi[] = array_slice($array, $i*$elem , $elem);
    }

    $new = array();
    $rotation = false;
    for($i = 0; $i <= $elem-1; $i++) {
        $k = $i;
        for($j = 0; $j <= $i; $j++) {
            if($rotation)
                $new[] = $multi[$k][$j];
            else
                $new[] = $multi[$j][$k];
            $k--;
        }   
        $rotation = !$rotation;
    }

    for($i = $elem-1; $i > 0; $i--) {
        $k = $elem - $i;

        for($j = $elem-1; $j >= $elem - $i; $j--) {

            if(!$rotation)
                $new[] = $multi[$k][$j];
            else
                $new[] = $multi[$j][$k];
            $k++;
        }   
        $rotation = !$rotation;
    }

    return $new;
}

$array = range(1, 25);
$result = waveSort($array);
print_r($result);

$array = range(1, 36);
$result = waveSort($array);
print_r($result); 
```

[这是在行动](http://codepad.org/mxCgM8Gc)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T22:26:39.807

这是我的看法。与qiuntus的回复类似，但更简洁。

```
function wave($base) {
  $i = 1;
  $a = $base;
  $square = $base*$base;
  $out = array(1);

  while ($i < $square) {
    if ($i > ($square - $base)) { // hit the bottom
      $i++;
      $out[] = $i;
      $a = 1 - $base;
    } elseif ($i % $base == 0) { // hit the right
      $i += $base;
      $out[] = $i;
      $a = $base - 1;
    } elseif (($i - 1) % $base == 0) { // hit the left
      $i += $base;
      $out[] = $i;
      $a = 1 - $base;
    } elseif ($i <= $base) { // hit the top
      $i++;
      $out[] = $i;
      $a = $base - 1;
    }

    if ($i < $square) {
      $i += $a;
      $out[] = $i;
    }
  }

  return $out;
} 
```

# c# - 从方法分配属性

> ID：15201400
> 
> 赞同：2
> 
> 时间：2013-03-04T12:17:24.303
> 
> 标签：c#

我有两个类，像这样的基类和继承类

```
public class A
{
     public string Prop1 { get; set; }
} 

public class B : A
{
     public string Prop2 { get; set; }
} 
```

`A`现在我有一个在填充属性值后返回类的方法

```
public A GetPopulatedValues()
{
     //code to populate values here
} 
```

现在我的问题是，如何一次分配所有属性值？

这有效

```
public void Init()
{
   var obj = new B();
   obj.Prop1 = GetPopulatedValues().Prop1;
} 
```

但我想要这样的东西

```
 public void Init()
{
   var obj = new B();
   obj = GetPopulatedValues();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:19:01.477

创建一个构造函数：

```
public Foo(string prop1, string prop2)
{
    Prop1 = prop1;
    Prop2 = prop2;
} 
```

或复制构造函数：

```
public Foo(Foo other)
{
    Prop1 = other.Prop1;
    Prop2 = other.Prop2;
} 
```

或者使用对象初始化器：

```
var foo = new Foo { Prop1 = "Hello", Prop2 = "World" }; 
```

但正如@RudiVisser 所说，您实际上希望`GetPopulatedValues()`通过提供对要填充的对象的引用来解决此问题：

```
static class FooPopulator
{
    public static void PopulateValues(Foo foo)
    {
        foo.Prop1 = "Hello";
        foo.Prop2 = "World";
    }
}

var foo = new Foo();
FooPopulator.PopulateValues(foo); 
```

现在您的`foo`对象是可用和可填充的，而无需更改`Foo`类。额外的好处：当您添加要填充的属性（例如`Prop3`）时，您只需更改`PopulateValues()`方法。

在您的代码中，您也必须这样做，但是您还需要添加`Prop3`分配，如果忘记，将导致错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:21:11.350

我同意@CodeCaster 的观点，这可能应该通过修改构造函数来完成，但只是为了提供另一种选择——为什么不让你的`GetPopulatedValues`方法接受 的实例`A`，并直接填充值。

```
public void GetPopulatedValues(A instance)
{
    instance.Prop1 = (whatever);
}

public void Init()
{
    var obj = new B();
    GetPopulatedValues(obj);
} 
```

# java - 安卓。键盘永远不会出现

> ID：15201404
> 
> 赞同：0
> 
> 时间：2013-03-04T12:17:35.393
> 
> 标签：java, android, xml, android-edittext, android-softkeyboard

我正在尝试在模拟器中为我的 EditText 显示键盘，但无论我尝试什么，它都不会出现。

这就是我在 XML 文件中声明它的方式：

```
<EditText
    android:id="@+id/editTextSearch"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="50dp"
    android:layout_weight="0.05"
    android:background="@color/white"
    android:ems="10"
     >

</EditText> 
```

这就是我在 java 文件中使用它的方式：

```
private void createTextEdit()
{
    EditText searchTextField = (EditText)findViewById(R.id.editTextSearch);
    searchTextField.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s)
        {
           System.out.println("AFTER TEXT CHANGED");                                                             
        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {
             System.out.println("BEFORE TEXT CHANGED " + s);
        }

        public void onTextChanged(CharSequence s,
                int start, int before, int count)
        {
            System.out.println(s);
        }

    });

    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.showSoftInput(searchTextField, InputMethodManager.SHOW_IMPLICIT);
} 
```

我还在 Manifest 文件中声明了以下内容：

```
<activity 
        android:name = "com.blabla.blablabla.MyActivity" 
        android:windowSoftInputMode="stateVisible">
    </activity> 
```

并且从未显示键盘。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:32:13.233

代码在设备上运行良好。据我说，模拟器打开了硬键盘，所以它不会显示软键盘。尝试在设备上运行此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:40:28.203

请确保您的模拟器没有“硬件键盘存在”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:26:44.350

试试这个;

```
<EditText
....
<requestFocus /> 
</EditText> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:33:33.437

尝试强制软键盘打开如下：

> ```
>  InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
>   imm.showSoftInput(searchTextField, InputMethodManager.SHOW_FORCED); <-- change here. 
> ```

# javascript - 使用 Javascript 替换文本区域框中的唯一字符

> ID：15201406
> 
> 赞同：1
> 
> 时间：2013-03-04T12:17:38.933
> 
> 标签：javascript, textarea

我想使用 Javascript 在将字符输入到 textarea 框中时捕获该字符并将其与另一个字符交换。然而，与[这个人](https://stackoverflow.com/questions/9199287/replacing-text-inside-a-textarea-box)不同的是，我希望每个字母都有一个独特的字符。

因此`.replace("This guy", "With this guy");`，只要将其输入文本区域。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:25:35.537

```
document.getElementById('txtarea').onkeydown = function(){
    var txt = this.innerHTML;
    if(txt.indexOf('This guy') != -1)
        txt.replace('This guy', 'With this guy');
} 
```

# properties - 属性实现必须在接口错误中声明

> ID：15201407
> 
> 赞同：1
> 
> 时间：2013-03-04T12:17:45.050
> 
> 标签：properties, implementation

“属性实现必须在接口中声明”错误

我遇到了这个错误，而且我是 xcode 的新手，所以我不确定该怎么做。

我在一个类中有很多代码，然后我把它移到另一个类，现在我有很多错误。这没有任何意义，因为一切看起来都应该如此。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize MenuScreenButton;
@synthesize HowToPlayButton;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)HowToPlayButtonPressed:(id)sender

{
HowToPlayViewController *HowToPlayView=[[HowToPlayViewController alloc]initWithNibName:nil bundle:nil];
    HowToPlayView.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:HowToPlayView animated:YES completion:NULL];
}

-(IBAction)MenuScreenButtonPressed:(id)sender

{
    MenuScreen *MenuScreenView=[[MenuScreen alloc]initWithNibName:nil bundle:nil];
    MenuScreenView.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:MenuScreenView animated:YES completion:NULL];
}
@end 
```

下面是 .h 文件：

```
#import <UIKit/UIKit.h>
#import "HowToPlayViewController.h"
#import "MenuScreen.h"

@interface ViewController : UIViewController
{
    IBOutlet UIButton *HowToPlayButton;
    IBOutlet UIButton *MenuScreenButton;

}

@property(retain,nonatomic) IBOutlet UIButton *MenuScreenButton;

@property(retain,nonatomic) IBOutlet UIButton *HowToPlayButton;

-(IBAction)HowToPlayButtonPressed:(id)sender;
-(IBAction)MenuScreenButtonPressed:(id)sender;
@end 
```

# ruby-on-rails - 输出前的哈希值

> ID：15201408
> 
> 赞同：1
> 
> 时间：2013-03-04T12:17:46.157
> 
> 标签：ruby-on-rails, ruby

我希望在从 Rails 模型输出之前对电子邮件地址进行 MD5 哈希处理。目前我的模态看起来像这样：

```
class Comment < ActiveRecord::Base
    belongs_to :post
    attr_accessible :body, :name, :reply, :email
    validates_presence_of :body, :name

    def gravator
        require 'digest/md5'

        email_address = self.email.downcase

        # create the md5 hash
        hash = Digest::MD5.hexdigest(email_address)

        # compile URL which can be used in <img src="RIGHT_HERE"...
        self.email = "http://www.gravatar.com/avatar/#{hash}"

    end
end 
```

我想知道将电子邮件字段转换为从 gravator 方法输出的 URL 的最佳方法是什么。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:31:53.543

与其每次都对其进行散列，不如在数据库中创建一个包含散列值的新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:26:59.593

创建一个`gravator`字段并将其分配给`before_save`. 这将加快速度，并且不会在每次显示时调用数据库。

```
class Comment < ActiveRecord::Base
    belongs_to :post
    attr_accessible :body, :name, :reply, :email
    validates_presence_of :body, :name
    before_save :set_gravator

    def set_gravator
        require 'digest/md5'

        email_address = self.email.downcase

        # create the md5 hash
        hash = Digest::MD5.hexdigest(email_address)

        # compile URL which can be used in <img src="RIGHT_HERE"...
        self.gravator = "http://www.gravatar.com/avatar/#{hash}"
    end
end 
```

# java - 如何从 p12 证书中获取 SHA1 指纹？

> ID：15201409
> 
> 赞同：16
> 
> 时间：2013-03-04T12:17:48.667
> 
> 标签：java, android, command-line, sha

为了获取我的 Android 项目的密钥，Google 需要 SHA1 指纹。提供此命令：keytool-list-v-keystore mystore.keystore

我经历了不同的选项，但总是出现错误 Illegal option: Files keytool:-list [OPTION] ...

例如我的命令：

```
C:\Program Files (x86)\Java\jre7\bin>keytool -storepass mypass -list -v -keystore C:\Program Files (x86)\Java\jre7\bin\android.p12 
```

如果我在 root (c:) 中设置 p12 文件，那么我会收到另一个错误 - 无效的密钥库格式。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T10:07:41.583

这也可以通过 OpenSSL 完成：

```
openssl pkcs12 -in <my pkcs12 file>.p12 -nodes -passin pass:<passphrase, or blank> |openssl x509 -noout -fingerprint 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-04T12:31:04.027

对于 p12 格式 (PKCS12)，请使用 option `-storetype PKCS12`。

例如：

```
keytool -list -v -keystore mykeystore.p12 -storetype PKCS12 -storepass 123456 
```

对于密钥库/证书检查和操作，我推荐 GUI 工具[Portecle](http://portecle.sourceforge.net/)（以前：KeyToolGUI）。[这](http://sourceforge.net/projects/portecleinstall/)是方便的Windows安装程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-27T20:21:19.740

如果您使用的是**Android Studio**。您可以通过 Gradle Tasks快速获取**SHA1 证书指纹**（**调试、发布...所有构建类型！！ ）：**

> 签约报告

SHA1 显示在**消息日志中**

**Android 插件**（在 gradle 应用程序中配置）**为 default创建一个****调试**模式。到密钥库的文件路径： *HOME/.android/debug.keystore*

 ***我建议将 debug.keystore 附加到 build.gradle。为此，将文件 debug.keystore 放入应用文件夹。

额外：如果要创建发布，请将文件 release.keystore 放入应用文件夹。（此示例使用相同的 debug.keystore）***

# jquery - 关于 jquery 滑块行为的一般查询

> ID：15201415
> 
> 赞同：0
> 
> 时间：2013-03-04T12:18:06.850
> 
> 标签：jquery

我正在从互联网上制作一个免费的画廊滑块，效果很好，但我的客户需要什么完全不在我的脑海里。我会向你们解释。

1.  有四个专辑（这些可以扩展）作为滑块的缩略图。
2.  这些相册中的每一个都将包含一定数量的图像。
3.  用户点击相册 1 时，相册中的第一张图片应该会显示出来，当用户点击下一个按钮时，他应该留在同一个相册中，当他在滚动下一个按钮时到达最后一张图片时，应该将他带到第一张图片。
4.  当用户点击画廊 2 时，应该会发生与画廊 1 相同的事情。

我只需要知道这是否可能。如果是的话，我需要一个从哪里可以找到的方向。

这是画廊滑块外观的图像[链接](http://s21.postimage.org/6lwkfynnb/gallery.jpg)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:34:26.663

[这个](http://www.tn3gallery.com/?refCode=fe8775)jquery 可能会帮助你..

通过网络搜索或 jst google it.. 可能会有选项可供您使用..

# iphone - 即使重新加载表格后文本的颜色也不会改变

> ID：15201417
> 
> 赞同：0
> 
> 时间：2013-03-04T12:18:09.007
> 
> 标签：iphone, ios, uitableview

我创建了自定义类，并且将所有文本颜色设置为黑色。选择行后，我将行内容的文本颜色更改为绿色。在向左滑动手势事件中，我再次重新加载了表格，但之前选择的行文本没有将他的颜色改回黑色，即使在表格重新加载后它仍然是绿色，但它的文本值正在改变。为什么它不把颜色变回黑色

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger rows=indexPath.row;
    if(rows==2||rows==3||rows==4)
    {
  UIImageView *localImageView=(UIImageView*)[self.view  viewWithTag:rows];
    localImageView.image=[UIImage imageNamed:@"check"];
    UILabel *localLabel=(UILabel*)[self.view viewWithTag:rows+100];

        Question *question=[[Question alloc]init];
        question=[self.questionsArray objectAtIndex:self.currentQuestionIndex];
        if([localLabel.text isEqualToString:question.correctOptionText])
        {
            localLabel.textColor=[UIColor greenColor];  //changed color here
        }
        else{
            localLabel.textColor=[UIColor redColor];

        }
    }
} 
```

自定义类代码

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        UIImageView *localCheckImageView=[[UIImageView alloc]initWithFrame:CGRectMake(45, 10, 25, 25)];
        localCheckImageView.image=[UIImage imageNamed:@"dot"];
        self.checkImageView=localCheckImageView;
        [self.contentView addSubview:self.checkImageView];

        UILabel *localOptionLabel=[[UILabel alloc]initWithFrame:CGRectMake(95, 0, 200, 44)];
        [localOptionLabel setBackgroundColor:[UIColor clearColor]];
        [localOptionLabel setFont:[UIFont systemFontOfSize:18.0f]];
        [localOptionLabel setTextColor:[UIColor blackColor]];

        self.optionLabel =localOptionLabel;
        [self.contentView addSubview:self.optionLabel];
        [localCheckImageView release];
        [localOptionLabel release];
    }
    return self;
} 
```

cellfor行代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Question *question=[[Question alloc]init];
    question=[self.questionsArray objectAtIndex:self.currentQuestionIndex];
    //UITableViewCell *cell=[[UITableViewCell alloc]init];
    NSInteger rows=[indexPath row];
    static NSString *rowZeroCellIdentifier = @"rowZero";
    static NSString *rowOneCellIdentifier=@"rowOne";
    static NSString *rowRemainingCellIdentifier=@"rowRemaining";

    if(rows==0)
    {
    QuesNumberCell *cell =(QuesNumberCell *)[tableView dequeueReusableCellWithIdentifier:rowZeroCellIdentifier];
    if (cell == nil)
    {
        cell = [[QuesNumberCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:rowZeroCellIdentifier];

                                         }

    cell.questionNumberLabel.text = [NSString stringWithFormat:@"Question: %i",question.questionNumber];
return cell;

    }
   else if(rows==1)
    {
        QuestionTextCell *cell=(QuestionTextCell *)[tableView dequeueReusableCellWithIdentifier:rowOneCellIdentifier];
        if (cell == nil)
        {
            cell = [[QuestionTextCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:rowOneCellIdentifier];

        }

        if(_explainButtonFlag==1)
        {
         cell.questionTextView.text = [NSString stringWithFormat:@"%@",question.questionText];
        }
        else
        {
           cell.questionTextView.text = [NSString stringWithFormat:@"%@",question.explanationText];
        }

        return cell;
          }
   else{
       OptionsCell *cell=(OptionsCell *)[tableView dequeueReusableCellWithIdentifier:rowRemainingCellIdentifier];
       if (cell == nil)
       {
           cell = [[OptionsCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:rowRemainingCellIdentifier];

       }
       if(rows==2)
       {
       cell.optionLabel.text = [NSString stringWithFormat:@"%@",question.optionOneText];
       }
       if(rows==3)
       {
           cell.optionLabel.text = [NSString stringWithFormat:@"%@",question.optionTwoText];
       }
           if(rows==4)
           {
               cell.optionLabel.text = [NSString stringWithFormat:@"%@",question.optionThreeText];
           }

       //[cell setSelected:NO animated:NO];
       [cell.checkImageView setTag:indexPath.row];
       [cell .optionLabel setTag:indexPath.row+100];
       return cell;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:31:08.710

它没有给出黑色，因为它正在重用单元格。在 cellForRow 方法中给文本颜色。看你给外面的颜色。

```
 if (cell == nil)
          {
         cell = [[QuesNumberCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:rowZeroCellIdentifier];

          }
           [cell.localOptionLabel setTextColor:[UIColor blackColor]]; 
```

在自定义单元格中，您应该只创建视图。单元格内容的数据必须在 cellForRow 方法中给出。希望这会帮助你。

# c# - WCF 和运输认证

> ID：15201419
> 
> 赞同：2
> 
> 时间：2013-03-04T12:18:15.243
> 
> 标签：c#, .net, wcf, soap

我有一个项目有一个要求，即我们需要公开一个简单的 SOAP 1.1 ack/nack web 服务，该服务使用 TLS 和 WS-Security 标头中的用户名/密码进行保护。我创建了以下自定义绑定和行为

```
 <binding name="itkService" closeTimeout="00:10:01" openTimeout="00:10:01"
                    receiveTimeout="00:10:01" sendTimeout="00:10:00.0000001">
     <sslStreamSecurity requireClientCertificate="true" />
     <security enableUnsecuredResponse="true" authenticationMode="UserNameOverTransport"                            includeTimestamp="true" requireSecurityContextCancellation="true">
         <localClientSettings maxClockSkew="24.20:31:23.6470000" />
         <localServiceSettings maxClockSkew="24.20:31:23.6470000" />
         <secureConversationBootstrap authenticationMode="UserNameOverTransport" />
     </security>
     <customTextMessageEncoding messageVersion="Soap11WSAddressing10" mediaType="text/xml" encoding="utf-8">
           <readerQuotas maxStringContentLength="1024" />
     </customTextMessageEncoding>
     <httpsTransport maxReceivedMessageSize="10485760" keepAliveEnabled="true" maxBufferSize="10485760" />
</binding>

<behavior name="webHttpEnablingBehaviour">
     <serviceMetadata httpsGetEnabled="true" />
     <serviceDebug includeExceptionDetailInFaults="true" />
     <serviceCredentials>
         <clientCertificate>
              <authentication customCertificateValidatorType="ITKCore.Validation.MyCertificateValidator, ITKCore"
                                certificateValidationMode="Custom" />
         </clientCertificate>
         <serviceCertificate findValue="Sub CA" storeLocation="LocalMachine" storeName="TrustedPeople" x509FindType="FindByIssuerName" />
         <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="ITKCore.Validation.UsernameValidator, ITKCore" />

     </serviceCredentials>
 </behavior> 
```

然而，服务请求验证逻辑的一部分声明我们必须使用提供的 TLS 证书并根据访问控制列表检查主题专有名称。我已经进行了挖掘，但看不到实际检索运输证书的方法。

有人对我将如何在 WCF 中解决这个问题有任何建议吗？

# ios - 为什么这些信息没有从一个班级传递到另一个班级

> ID：15201420
> 
> 赞同：0
> 
> 时间：2013-03-04T12:18:17.827
> 
> 标签：ios, objective-c, class

我试图让这些信息从一个被调用的类发送`ViewController`到另一个类。在`viewController`我有一个`NSDictionary`叫`selectedVenues`. 然后在另一个班级我也有一个`NSDictionary`叫`selectedVenues`. 我想将信息从`ViewController selectedVenues`另一个类的 selectedVenue 发送，但它只返回 null；

```
ViewController *main = nil;
self.selectedVenue = main.selectedVenues;
NSDictionary *selectedLocation = self.selectedVenue[@"location"];
NSString *selectedLat = selectedLocation[@"lat"];
NSString *selectedLng = selectedLocation[@"lng"]; 
```

我现在已经试过了。它仍然无法正常工作

```
ViewController *main = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];

       //self.selectedVenue = main.selectedVenues;
       NSDictionary *selectedLocation =  [main getSelectedVenue:@"location"];
       NSString *selectedLat = selectedLocation[@"lat"];
       NSString *selectedLng = selectedLocation[@"lng"]; 
```

这是我的 viewController 中的方法。

```
-(NSDictionary *)getSelectedVenue:(NSString *)key;
{

    NSIndexPath *selectedIndexPath = [self.tableView indexPathForSelectedRow];
    self.selectedVenue= [self.venues objectAtIndex:selectedIndexPath.row];
     NSDictionary *selectedLocation = self.selectedVenue[key];

    return selectedLocation;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:20:06.383

```
ViewController *main = nil;
self.selectedVenue = main.selectedVenues; 
```

当您引用一个`nil`值时，您期望会发生什么？

*但它只返回null；*

是的，这是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:21:35.373

您需要`viewController`在代码中初始化以获取其字典值

```
ViewController *main = nil; 
```

你应该用你正在使用的 nib 或 viewController 来初始化它

```
ViewController *main = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:29:47.793

在推送 viewController 之前传递值。

在你的 ViewController.m

```
NextViewController *main = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
main.selectedVenue = self.selectedVenue;

[self.navigationController pushViewController:main animated:YES]; 
```

# php - 通过 PHP 在 XML 文件中添加新节点

> ID：15201433
> 
> 赞同：6
> 
> 时间：2013-03-04T12:19:08.387
> 
> 标签：php, xml, xml-parsing, simplexml

我只是想问一个问题..如何使用 php 在 xml 中插入新节点。我的 XML 文件 (questions.xml) 在下面给出

```
<?xml version="1.0" encoding="UTF-8"?>
<Quiz>
   <topic text="Preparation for Exam">
      <subtopic text="Science" />
      <subtopic text="Maths" />
      <subtopic text="english" />
   </topic>
</Quiz> 
```

我想添加一个带有“文本”属性的新“子主题”，即“地理”。我怎样才能使用 PHP 做到这一点？不过提前谢谢。好吧，我的代码是

```
<?php

$xmldoc = new DOMDocument();
$xmldoc->load('questions.xml');

$root = $xmldoc->firstChild;

$newElement = $xmldoc->createElement('subtopic');
$root->appendChild($newElement); 
```

// $newText = $xmldoc->createTextNode('geology'); // $newElement->appendChild($newText);

```
$xmldoc->save('questions.xml'); 
```

?>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T12:32:17.523

I'd use [SimpleXML](http://www.php.net/manual/en/book.simplexml.php) for this. It would look somehow like this:

```
// Open and parse the XML file
$xml = simplexml_load_file("questions.xml");
// Create a child in the first topic node
$child = $xml->topic[0]->addChild("subtopic");
// Add the text attribute
$child->addAttribute("text", "geography"); 
```

You can either display the new XML code with echo or store it in a file.

```
// Display the new XML code
echo $xml->asXML();
// Store new XML code in questions.xml
$xml->asXML("questions.xml"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T12:22:21.187

最好且安全的方法是将您的 XML 文档加载到 PHP DOMDocument 对象中，然后转到您想要的节点，添加一个子节点，最后将新版本的 XML 保存到一个文件中。

看看文档：[DOMDocument](http://php.net/domdocument)

代码示例：

```
// open and load a XML file
$dom = new DomDocument();
$dom->load('your_file.xml');

// Apply some modification
$specificNode = $dom->getElementsByTagName('node_to_catch');
$newSubTopic = $xmldoc->createElement('subtopic');
$newSubTopicText = $xmldoc->createTextNode('geography');
$newSubTopic->appendChild($newSubTopicText);
$specificNode->appendChild($newSubTopic);

// Save the new version of the file
$dom->save('your_file_v2.xml'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T12:23:01.033

You can use PHP's [Simple XML.](http://php.net/manual/en/book.simplexml.php) You have to read the file content, add the node with Simple XML and write the content back.

# php - 使用 preg_match 进行索引

> ID：15201436
> 
> 赞同：0
> 
> 时间：2013-03-04T12:19:13.870
> 
> 标签：php, arrays, preg-match

我正在尝试索引一个网站，而我的 preg_match 返回一个空数组。

这是我到目前为止所拥有的：

```
$content = get_content("www.something.com");
preg_match_all('#<span class="box_cod">Cod: ([0-9\.]*)</span><span class="box_pret">PRET: (.*)</span>#',$content,$Produs); 
```

其中 get_content 是用于检索站点的 curl 函数。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:42:50.423

您可以使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)来解析和获取变量中的站点内容。
例如，首先你包含 php 文件..

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/'); 
```

它比使用正则表达式解析 HTML 容易。

# wordpress - Wordpress 第 2 页（上一个完整链接）导致空白页

> ID：15201440
> 
> 赞同：3
> 
> 时间：2013-03-04T12:19:25.923
> 
> 标签：wordpress, pagination

我已经研究这个问题几个小时了，但一直无法弄清楚。我联系了几个支持论坛，但没有人愿意提供帮助。

我不太确定这是否是我可能造成的，或者是否是 wordpress 问题。我知道其他人也有同样的问题。

如果您知道发生了什么，请告诉我。请记住，我并不精通编码。

网站：[http](http://www.brightontheday.com) ://www.brightontheday.com （以前的条目链接是[http://www.brightontheday.com/page/2](http://www.brightontheday.com/page/2)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:45:40.930

尝试这个：

*   去这里： [http ://codex.wordpress.org/Using_Permalinks#Choosing_your_permalink_structure](http://codex.wordpress.org/Using_Permalinks#Choosing_your_permalink_structure)

*   在您的 Wordpress 安装中打开该设置面板

*   在此处设置为“默认”，这将暂时禁用永久链接。记住之前的设置:-)

如果它现在可以工作，并且打开了丑陋的 URL，那么您的永久链接就有问题了。

我曾经有过这个——一定要检查**名称**与**帖子类别**相似的**页面**。他们可能有冲突的永久链接，这不会自动检测到。

 ****示例：您有一个帖子类别“水果”。您还有一个名为“水果”的页面。然后，默认情况下，它们（类别存档和页面）都可以通过“www.example.com/fruit/”访问。

这一点，以及模板 php 文件（带有 while 循环的 page.php）中的某些特定情况，在我的情况下导致了这种行为。****

# java - 如何在 Eclipse 中正确使用 Tomcat 和 maven

> ID：15201445
> 
> 赞同：8
> 
> 时间：2013-03-04T12:19:32.693
> 
> 标签：java, eclipse, maven, tomcat

我正在寻找如何在 Eclipse 和 Maven 中使用 Tomcat 的最佳方式。

我有一些开发 Java EE 应用程序的经验，并且我期望在使用 Maven 时会出现类似的行为。

我的要求很简单：

*   简单的应用程序构建
*   易于部署
*   如果可能，热插拔

我不知道 Tomcat + Eclipse 的详细工作原理，所以我假设 Maven 命令

```
mvn eclipse:eclipse -Dwtpversion=2.0 
```

正确设置了所有内容，但我怀疑它运行不正常（或至少按预期运行）。

当项目（我们称之为测试）在 Maven 中构建时，结果在`${project}/target/test`文件夹中。但在我看来，Tomcat 的类来自不同的文件夹（`${project}/target/classes`？）。恕我直言，这是错误的（如果我错了，请纠正我），但 maven 可以在构建类之前执行其他操作 - 代码生成、资源过滤、AOP 编织等。

有一些建议如何使用吗？因为`mvn clean install`从命令行执行并将结果部署到 Tomcat 在我看来不像 IDE（集成开发环境）。是否可以指示 maven eclipse 插件正确设置它？

我也尝试使用`mvn tomcat:run`，但在这里我完全迷路了，我遇到了我不明白的错误

```
java.lang.NoSuchMethodError: org.apache.cxf.common.classloader.ClassLoaderUtils.loadClass 
```

而且我不知道为什么在使用 Tomcat 6 的服务器运行时它不能在 Eclipse 中正常工作。

`mvn install`当我保存课程时，是否可以指示 Eclipse 执行 let say ？会比吗？这是否足够快（仅重建改变的东西+依赖项，就像我习惯于从标准 JSE 项目中那样）？

其实我正在使用

*   行家3.0.4
*   爪哇 1.6
*   日食 4.2.1 ( [STS](http://www.springsource.org/sts) 3.2.0.M2)
*   tomcat 6（我们目前正在为 Tomcat 6 开发，但我猜 7 也是一样的）

**编辑**

pom.xml 中的一些相关部分

```
<project ...>
    <modelVersion>4.0.0</modelVersion>

    <groupId>...</groupId>
    <artifactId>...</artifactId>
    <version>...</version>
    <packaging>war</packaging>

    <properties>
        <spring.version>3.1.1.RELEASE</spring.version>
        <!-- WSDL -> Java (start) -->
        <cxf.version>2.7.3</cxf.version>
        <cxf-codegen-plugin.version>2.6.1</cxf-codegen-plugin.version>
        <cxf.sourceRoot>src/main/generated</cxf.sourceRoot>
        <!-- WSDL -> Java (end) -->

        <junit.version>4.11</junit.version>
        <maven.build.timestamp.format>yyyy-MM-dd HH:mm</maven.build.timestamp.format>
        <project.build.date>${maven.build.timestamp}</project.build.date>
    </properties>

    <dependencies>
        ...
    </dependencies>

    <build>

        <resources>
            <resource>
                <!-- filtering used to replace variables from in property files -->
                <filtering>true</filtering>
                <directory>${basedir}/src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>

            <resource>
                <filtering>false</filtering>
                <directory>${basedir}/src/main/resources</directory>
            </resource>
        </resources>

        <plugins>
            <!-- add src/main/generated for maven -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>1.7</version>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>add-source</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>src/main/generated</source>
                            </sources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <!-- WSDL -> Java (start) -->
            <plugin>
                <!-- !!! READ !!! -->
                <!-- mvn cxf-codegen-plugin:wsdl2java NOT working, comment phase and run "mvn clean install -DskipTests") -->
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>${cxf-codegen-plugin.version}</version>
                <executions>
                    ...
                </executions>
            </plugin>
        </plugins>

        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <version>2.5.1</version>
                    <inherited>true</inherited>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <version>2.1.1</version>
                    <artifactId>maven-war-plugin</artifactId>
                    <configuration>
                        <warName>test</warName>
                    </configuration>
                </plugin>

                <!-- resources in UTF-8 -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>2.5</version>
                    <configuration>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>

                <!-- JUnit -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.8</version>
                    <configuration>
                        <redirectTestOutputToFile>true</redirectTestOutputToFile>
                    </configuration>
                </plugin>

                <plugin>
                    <artifactId>maven-eclipse-plugin</artifactId>
                    <configuration>
                        <wtpversion>1.5</wtpversion>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:29:17.250

我通常只使用[m2eclipse](http://www.eclipse.org/m2e/) Maven 插件并将项目导入 eclipse。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:27:01.840

如果使用`mvn eclipse:eclipse`，Maven 会创建特定于 Eclipse 的项目设置。这样，Eclipse 不会执行任何 Maven 命令来在 Eclipse 中开发您的应用程序。Eclipse 一如既往地自动将您的应用程序部署到嵌入式 Tomcat。

如果您进行测试构建或生产构建，那么您将使用 Maven（例如`mvn package deploy`） 这将创建 war 文件并将其部署到 Nexus（或任何其他工件存储库，如果已配置）。在您的`target/`文件夹中，您将找到一个`artifactId-version.war`可以部署在您想要的任何 Tomcat 上的文件。

这是一篇有更多提示的文章：[https ://jacksonps4.me/wordpress/?p=1013](https://jacksonps4.me/wordpress/?p=1013)

# django - 如何在 jinja2 中编辑一些扩展块？

> ID：15201471
> 
> 赞同：2
> 
> 时间：2013-03-04T12:20:52.560
> 
> 标签：django, django-templates, flask, jinja2

我有一个名为*main.html*的基本模板：

```
<ul>
  <li>index</li>
  <li>about</li>
  <li>contacts</li>
</ul> 
```

我有一个模板*index.html*，它有：

```
{% extends "main.html" %} 
```

如何`<li>`根据命名继承人将类属性添加到标签中？

例如，如果*index.html*扩展*main.html*，那么我添加`class="active"`到 first `<li>`，如果*about.html*扩展*main.html*，那么我添加`class="active"`到 second `<li>`.... 等等。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:38:02.823

一种方法是保持 main.html 原样并通过调用 super 在子级别（about.html 等）覆盖它？我没有测试过这段代码，但类似：

## main.html

```
{% block menu_bar %}
<ul>
  <li>index</li>
  <li>about</li>
  <li>contacts</li>
</ul>
{% endblock %} 
```

## about.html

```
{% block menu_bar %}
<li class="active">about</li>
{{ super() }}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:32:12.950

有两种解决方案：

第一种方法是定义一个宏并从子页面（而不是继承的`main`页面）调用它，其中包含使哪个`<li>`激活的信息。

像 ：

```
{% macro menu(active) %}

<ul>
  {% if active == 'index' %}<li class="active">{% else %}<li>{%endif%}index</li>
  {% if active == 'about' %}<li class="active">{% else %}<li>{%endif%}about</li>
  {% if active == 'contacts' %}<li class="active">{% else %}<li>{%endif%}contacts</li>
</ul>

{% endmacro %} 
```

并将其用作：

```
{% from 'macro.html' import menu %}

{{ macro('index') }} #in index.html
{{ macro('about') }} #in about.html
{{ macro('contacts') }} #in contacts.html 
```

另一种方法是使用魔法`g`变量。在您的视图函数中定义哪个项目应该是活动项目并放入`g`变量中。像：

```
from flask import g

app.route('/about')
def about():
  ...
  g.active_menu_item = 'about'

  ...

  return render_template('about.html') 
```

并且您的`about.html`（索引和联系人也是）继承自`main.html', so the codes that render menu of`main.html `should consider`g.active_menu_item` 考虑在内。像：

主要.html：

```
<ul>
  {% if g.active_menu_item == 'index' %}<li class="active">{% else %}<li>{%endif%}index</li>
  {% if g.active_menu_item == 'about' %}<li class="active">{% else %}<li>{%endif%}about</li>
  {% if g.active_menu_item == 'contacts' %}<li class="active">{% else %}<li>{%endif%}contacts</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:46:03.200

**菜单.html**

```
<ul>
  <li class="{% if active_menu == 'index' %}active{% endif %}">index</li>
  <li class="{% if active_menu == 'about' %}active{% endif %}">about</li>
  <li class="{% if active_menu == 'contacts' %}active{% endif %}"contacts</li>
</ul> 
```

**索引.html**

```
{% extends "main.html" %}

{% include "menu.html" with active_menu='index' %} 
```

**about.html**

```
{% extends "main.html" %}

{% include "menu.html" with active_menu='about' %} 
```

**联系人.html**

```
{% extends "main.html" %}

{% include "menu.html" with active_menu='contacts' %} 
```

# mongodb - MongoDB 拉取查询不起作用

> ID：15201488
> 
> 赞同：0
> 
> 时间：2013-03-04T12:21:34.453
> 
> 标签：mongodb, nosql

**我的文档结构**

```
{
  "_id": { "$oid" : "512F57222F2A936C3300198E" },
  "createdAt": { "$date": 1362056994000.000000 },
  "level": null,
  "levelAchievements": [

  ],
  "points": 1,
  "profile": null,
  "progresses": [
    {
      "behavior": {
        "_id": { "$oid" : "511D058E52FBF0FD25000004" },
        "name": "Active User",
        "key": "ActiveUser",
        "points": 0,
        "timeout": 0
      },
      "behaviorCount": 1,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1362056994000.000000 },
      "createdAt": { "$date": 1362056994000.000000 },
      "behaviorType": "user"
    },
    {
      "behavior": {
        "name": "Mur (1)",
        "points": 1,
        "timeout": 0,
        "_id": { "$oid" : "512F4EADA674A86833000006" }
      },
      "behaviorCount": 1,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1362056994000.000000 },
      "createdAt": { "$date": 1362056994000.000000 },
      "behaviorType": "user"
    },
    {
      "behavior": {
        "_id": { "$oid" : "511D052F52FBF0FD25000002" },
        "disabled": false,
        "name": "Unity Installed",
        "key": "UnityInstalled",
        "points": 0,
        "timeout": 0
      },
      "behaviorCount": 1,
      "behaviorParameter": null,
      "userId": null,
      "modifiedAt": { "$date": 1362056994000.000000 },
      "createdAt": { "$date": 1362056994000.000000 },
      "behaviorType": "user"
    }
  ],
  "trophyAchievements": [

  ],
  "userId": "1022082379"
} 
```

我正在尝试删除progresses.behavior.name 等于“Mur (1)”的数组节点，我尝试了这个查询，但它不起作用。

```
db.users.update({},{$pull : { "progresses" : { "behavior" : { "name" : "Mur (1)" }}}});
db.users.update({}, { $pull : {"progresses.behavior.name" : "Mur (1)"} }, false, true ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:19:21.697

**这个有效：**

```
db.users.update({"progresses.behavior.name" : "Mur (1)"}, { $pull :  {"progresses" : { "behavior.name" : "Mur (1)"} } }, false, true ); 
```

# gzip - 如何使用 spring-rmi 实现压缩

> ID：15201495
> 
> 赞同：0
> 
> 时间：2013-03-04T12:21:53.340
> 
> 标签：gzip, rmi, remoting, socketfactory

我正在尝试在我们的 Spring-rmi 应用程序中实现自定义套接字工厂以进行压缩。

以下是 rmi-server 配置：

```
<bean id="parentRmiServiceExporter" class="org.springframework.remoting.rmi.RmiServiceExporter" abstract="true">
    <property name="registryPort" value="${rmi.port}"/>
    <property name="registerTraceInterceptor" value="false"/>
    <!-- gZip Server and Client Socket Factory -->    
    <property name="clientSocketFactory" ref=egsZipClientSocketFactory/>   
    <property name="serverSocketFactory" ref="egsZipServerSocketFactory" />
</bean> 
```

压缩流基于以下实现：

[http://jmvidal.cse.sc.edu/csce790/handouts/sockets/CompressionInputStream.java.html](http://jmvidal.cse.sc.edu/csce790/handouts/sockets/CompressionInputStream.java.html)

但是我在 rmi 客户端启动时遇到以下错误：

```
 Caused by: java.net.SocketException: Software caused connection abort: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method) [rt.jar:1.7.0_15]
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) [rt.jar:1.7.0_15]
    at java.net.SocketOutputStream.write(SocketOutputStream.java:132) [rt.jar:1.7.0_15] 
```

如何使用 spring-rmi app 实现压缩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T13:05:33.650

我们可以使用 DeflaterOutputStream 压缩 Object 并使用 InflaterInputStream 解压缩。

**压缩**：

```
ByteArrayOutputStream buf = new ByteArrayOutputStream();
ObjectOutputStream out = new ObjectOutputStream(new DeflaterOutputStream(buf,       new        Deflater(Deflater.BEST_COMPRESSION)));
out.writeObject(object);

egsZippedObject = new EGSZippedObject(buf.toByteArray());

public class EGSZippedObject implements Serializable{       
private byte[] byteArray = null;
public EGSZippedObject(byte[] byteArray) throws Exception { 
    setByteArray(byteArray);
}
public void setByteArray(byte[] byteArray) {
    this.byteArray = byteArray;
}
public byte[] getByteArray() {
    return byteArray;
}
} 
```

**解压**：

```
ByteArrayInputStream buf = null;
ObjectInputStream in = null;
R retVal = null;

buf = new ByteArrayInputStream(egsZippedObject.getByteArray());
in = new ObjectInputStream(new InflaterInputStream(buf));
retVal = (R) in.readObject(); 
```

# android - 视频没有在 android 中以设备的纵横比播放

> ID：15201499
> 
> 赞同：0
> 
> 时间：2013-03-04T12:22:02.690
> 
> 标签：android, surfaceview, android-mediaplayer

我使用表面视图从服务器播放视频。我已经使用异步任务来播放视图。并显示一个进度对话框，直到视频准备好在媒体播放器中播放。doinbackground 代码如下。

```
 holder = mpreview.getHolder();
 holder.addCallback(MediaPlayerDemo_Video.this);
 holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

一切都很完美，但问题是视频没有以适当的大小播放，这意味着在大分辨率设备中非常小。如何设置表面视图的大小，因为它在 Oncreate() 中定义，其余代码由异步任务给出。

# magento - 无法在 magento 中找到联系人/form.phtml

> ID：15201509
> 
> 赞同：0
> 
> 时间：2013-03-04T12:22:31.533
> 
> 标签：magento, magento-1.4, magento-1.5

我想在我的联系我们表单页面（默认 Magento）中添加一些额外的文本。我用谷歌搜索并找到了[这个教程](http://inchoo.net/ecommerce/magento/contact-form-in-magento/)。当我试图走那条路时，我找不到那个文件。有人知道它背后的原因是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:32:15.603

如果您没有联系人文件夹，请在您的自定义主题的模板文件夹中检查它，然后在您的 base/default/template 文件夹中检查它。

如果是这种情况，请将其复制到您的自定义主题文件夹中，并将 contacts.xml 复制到您的自定义主题文件夹以确保主题回退。

# objective-c - NSString 浮动值不正确

> ID：15201510
> 
> 赞同：1
> 
> 时间：2013-03-04T12:22:32.793
> 
> 标签：objective-c

我有一个 NSString 转换为浮点值，记录的结果是这样的

```
2,146.952 as a float is 2.000000 
```

逗号似乎会导致浮点值向下舍入，如果我使用 doubleValue] 它也会这样做。

有没有办法做到这一点`2146.952`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:32:48.233

您应该使用 NSNumberFormatter。
如果格式始终为显示（来源：服务器 api），请将 decimalSeparator 设置为 groutingSeparator`.`为`,`.

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setDecimalSeparator:@"."];
[numberFormatter setGroupingSeparator:@","];

NSNumber *number = [numberFormatter numberFromString:numberString]; 
```

如果字符串格式以某种方式取决于用户偏好（通过键盘输入），请改为设置语言环境

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setLocale:[NSLocale currentLocale]];
NSNumber *number = [numberFormatter numberFromString:numberString]; 
```

如果您设置类似的语言环境，则第二种解决方案也可用于第一种情况

```
[numberFormatter setLocale: [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:25:41.280

尝试，

1）从字符串中删除逗号为

```
NSString * str = [str stringByReplacingOccurencesOfString:@"," withString:@""]; 
```

2) 从字符串中检索浮点值

```
float f = [str floatValue]; 
```

# java - 码头包 org.json.simple 不存在

> ID：15201513
> 
> 赞同：2
> 
> 时间：2013-03-04T12:22:49.037
> 
> 标签：java, jsp, servlets, jetty

我有简单的 servlet 供码头使用。

这是我的 servlet 的片段：

```
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;

public class Oscar4Servlet extends HttpServlet
{ 
...

    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException
    {
        request.setCharacterEncoding("utf8");
        response.setCharacterEncoding("utf8");
        response.setContentType("application/json");
        PrintWriter out = resp.getWriter();

        JSONObject obj = new JSONObject();
        obj.put("message", "hello from server");
        out.print(obj);
    }
} 
```

调用后：

```
javac -cp  /usr/share/jetty/lib/servlet-api-2.5.jar  Oscar4Servlet.java 
```

我收到此错误：

```
Oscar4Servlet.java:5: error: package org.json.simple does not exist
import org.json.simple.JSONObject;
                      ^
Oscar4Servlet.java:6: error: package org.json.simple does not exist
import org.json.simple.JSONValue; 
```

虽然我的目录中有`json-simple-1.1.1.jar`（从[http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar](http://code.google.com/p/json-simple/downloads/detail?name=json-simple-1.1.1.jar)下载）`WEB_INF/lib`......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:25:11.030

编译时需要指定完整的编译类路径。因此，您需要将命令修改为：

```
javac -cp  /usr/share/jetty/lib/servlet-api-2.5.jar:<path-to>/json-simple-1.1.1.jar Oscar4Servlet.java 
```

（当然还有其他依赖项）

或者，如果您现在所有依赖项都在其中，`/some-path/WEB-INF/lib`那么您可以执行以下操作：

```
javac -cp  /usr/share/jetty/lib/servlet-api-2.5.jar:/some-path/WEB-INF/lib/* Oscar4Servlet.java 
```

# combobox - ZK 框架中的组合框问题

> ID：15201515
> 
> 赞同：0
> 
> 时间：2013-03-04T12:22:58.710
> 
> 标签：combobox, zk, zul

当我单击组合框时，选项会在此组合框下方打开

当我在鼠标滚轮的帮助下滚动窗口时，窗口正在向下滚动，但组合框选项出现在同一个地方。此组合框选项值下方显示在中间名下方

看这里了解详情[点击这里](http://forum.zkoss.org/question/85535/combobox-issue-in-zk-framework/)

小提琴示例[在这里](http://zkfiddle.org/sample/2p168oo/1-Another-new-ZK-fiddle)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:33:02.630

这似乎是一个已知问题（[请参阅 tracker](http://tracker.zkoss.org/browse/ZK-172)），目前您需要自己同步位置。

例如，

```
<zk>
    <script><![CDATA[
        function addSyncScroll (wgtId, parentId, add) {
            var wgt = zk.Widget.$('#'+wgtId),
                parentWgt = zk.Widget.$('#'+parentId);
            if (wgt && parentWgt) {
                var cbxToSync = parentWgt._cbxToSync,
                    idx;
                if (!cbxToSync) {
                    initSyncScroll(parentWgt);
                }
                cbxToSync = parentWgt._cbxToSync;

                if (cbxToSync) {
                    if (!wgt._syncPopupScroll) {
                        wgt._syncPopupScroll = function () {
                            zk(wgt.getPopupNode_()).position(wgt.getInputNode(), "after_start");
                        }
                    }
                    if (add) {
                        if (cbxToSync.indexOf(wgt) < 0)
                            cbxToSync.push(wgt);
                    } else {
                        if ((idx = cbxToSync.indexOf(wgt) < 0) > -1) {
                            cbxToSync.splice(idx, 1);
                        }
                    }
                }
            }
        }
        function initSyncScroll (parentWgt) {
            parentWgt._cbxToSync = [];
            parentWgt.$n().onscroll = function (event) {
                var cbxToSync = parentWgt._cbxToSync;
                for (var i = 0; i < cbxToSync.length; i++) {
                    cbxToSync[i]._syncPopupScroll();
                }
            }
        }
    ]]></script>
    <div width="200px" height="300px">
        <div id="parent" width="100%" vflex="1" style="overflow:auto;">
            <label value="Some text" />
            <textbox value="01" />
            <textbox value="02" />
            <textbox value="03" />
            <combobox>
                <attribute name="onOpen"><![CDATA[
                    Clients.evalJavaScript("addSyncScroll('"+self.getUuid()+"', '"+parent.getUuid()+"', "+self.isOpen()+")");
                ]]></attribute>
                <comboitem label="Simple and Rich" />
                <comboitem label="Cool!" />
                <comboitem label="Ajax and RIA" />
            </combobox>
            <textbox value="04" />
            <textbox value="05" />
            <textbox value="06" />
            <textbox value="07" />
            <textbox value="08" />
            <textbox value="09" />
            <textbox value="10" />
            <textbox value="11" />
            <textbox value="12" />
            <textbox value="13" />
            <textbox value="14" />
            <textbox value="15" />
        </div>
    </div>

</zk> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:34:57.353

这是 ZK 中的一个已知问题，您可以在此处查看[ZK Issue trcker](http://tracker.zkoss.org/browse/ZK-1552)

可能需要一些时间，在未来的版本中，我们将得到一些解决方法，根据@Ben 的说法，它将在未来修复。

# sql - SQL 子查询：过滤不返回任何行的条目

> ID：15201518
> 
> 赞同：0
> 
> 时间：2013-03-04T12:23:01.423
> 
> 标签：sql, join, subquery

我在 SQL 查询上苦苦挣扎......我有三个表：

1) 职位

2) 纸1

3) 纸2

`paper1`并`paper2`有一个列`job_id`，其中引用了相应的作业 ID；因此 id为**123**的作业的a`paper1.job_id`为**123**。

现在我想查看所有有相应`paper1`但没有的工作`paper2`（因此：未完成，因为**paper1**和**paper2**是要完成的工作的要求）。我的尝试是这样的，但结果不正确：

```
SELECT id 
FROM   jobs 
WHERE  (SELECT id FROM paper1 WHERE (job_id = jobs.id) != 0 LIMIT 1) 
AND    (SELECT id FROM paper2 WHERE (job_id = jobs.id)  = NULL LIMIT 1) 
```

任何帮助表示赞赏；谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:34:17.273

```
select id 
from jobs 
where exists (select p1.id from paper1 as p1 where p1.job_id = jobs.id)
    and not exists (select p2.id from paper2 as p2 where p2.job_id = jobs.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:35:24.963

根据我的理解，我认为您只需要仅在 paper1 中而不在 paper2 中的工作，如果这是要求，请尝试以下代码

```
select * from jobs where id in (select distinct j1 from 
(select a.job_id as j1,b.job_id as j2 from paper1 a,paper2 b where a.job_id=b.job_id(+)) 
where j2 is null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:56:04.130

尝试：

```
Select job_id 
FROM paper1 
WHERE job_id NOT IN (Select job_id from paper2 group by paper2)

GROUP BY job_id; 
```

# ruby-on-rails - Rails 3：.js.erb 文件中的实例变量不可访问

> ID：15201523
> 
> 赞同：1
> 
> 时间：2013-03-04T12:23:10.673
> 
> 标签：ruby-on-rails

我正在尝试构建一个非常简单的页面，我需要在其中为照片库生成一些动态 JavaScript。一些直观简单的东西，但我正在努力解决这个问题。在我的控制器中，我正在构建一个`Photo`as列表`@photos`，然后需要为我的`photo.js.erb`文件中的每张照片迭代出一些 JavaScript。

但是，每当我到达我的 .js.erb 文件时，`@photos`变量就会变为 nil ......我错过了什么？

**控制器/photos_controller.rb**文件：

```
class PhotosController < ApplicationController
  layout "application_photos"
  def category
    @photos = ...(generates collection of Photos)...
  end
end 
```

**视图/照片/category.html.haml**文件：

```
= content_for :head do
  // @photos is still initialized at this point
  = javascript_include_tag "photos"

// This partial only loads some more markup, it's inconsequential.
= render :partial => 'default_slideshow' 
```

**javascripts/photos.js.erb**文件：

```
jQuery(function($){
    // Throws NilClass error
    <% puts 'Photos: ' + @photos %>
}); 
```

我知道这个问题已经被问过十几次了，但以前接受的答案都没有真正对我有用。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:56:19.477

您需要向服务器发送 js 请求才能访问实例变量。像这样的东西

```
$(function($){
  $.ajax({
    type: "get",
    url: "..."
    })  

}); 
```

在 views/photos/category.js.erb 文件中：

```
alert("<%= j @photos %>") 
```

或者你可以使用[gon](https://github.com/gazay/gon) gem 来做同样的事情。

`app/views/layouts/application.html.erb`

```
<head>
 <title>some title</title>
 <%= include_gon %>
 <!-- include your action js code -->
 ... 
```

你把这样的东西放在你的控制器的动作中：

```
@your_int = 123
@your_array = [1,2]
@your_hash = {'a' => 1, 'b' => 2}
gon.your_int = @your_int
gon.your_other_int = 345 + gon.your_int
gon.your_array = @your_array
gon.your_array << gon.your_int
gon.your_hash = @your_hash

gon.all_variables # > {:your_int => 123, :your_other_int => 468, :your_array => [1, 2, 123], :your_hash => {'a' => 1, 'b' => 2}}
gon.your_array # > [1, 2, 123]

gon.clear # gon.all_variables now is {} 
```

从您的 JavaScript 文件访问变量：

```
alert(gon.your_int)
alert(gon.your_other_int)
alert(gon.your_array)
alert(gon.your_hash) 
```

希望这可以帮助

# php - 我从特定网站获取 NULL 检索 JSON

> ID：15201525
> 
> 赞同：0
> 
> 时间：2013-03-04T12:23:13.190
> 
> 标签：php, json

我想从[这里](https://blockchain.info/api/receive?method=create&format=plain&anonymous=true&address=12Za1i1zhYTCeHWBg8yJb72BeEGQVEuMdT&callback=http://example.com)检索 JSON 数据：

```
{

    "input_address": "1BeE32K9FxvrnBNeuKwdyM26vZ4GsggqZG",
    "callback_url": "http://example.com",
    "fee_percent": 1.5,
    "destination": "12Za1i1zhYTCeHWBg8yJb72BeEGQVEuMdT"

} 
```

...如果你把它放在你的浏览器上，你会看到 JSON 数据的格式是正确的。那里没问题。

但是，当我尝试使用标准脚本通过 PHP 检索数据时：

```
<?php
$url = 'https://blockchain.info/api/receive?method=create&format=plain&anonymous=true&address=12Za1i1zhYTCeHWBg8yJb72BeEGQVEuMdT&callback=http%3A%2F%2Fexample.com';
$JSON = file_get_contents($url);
$data = json_decode($JSON);
var_dump($data);
echo 'url: '.$url;
?> 
```

...我没有得到任何数据；var_dump 写入“NULL”（您可以在[http://bitstamina.com/theamazinghat/thehat.php](http://bitstamina.com/theamazinghat/thehat.php)测试之前的代码）。然而，如果我尝试任何其他返回 JSON 数据的 url，我的代码就可以完美运行。

我究竟做错了什么？这一定是我的一个非常愚蠢的错误，或者网站 blockchain.info 阻止了我的网站发出请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:28:15.387

您是否已`allow_url_fopen`在您的 php 配置中启用？

如果没有，您将收到警告 - 您是否显示错误/警告？

要检查错误，请在脚本顶部添加以下行。

```
error_reporting(E_ALL);
ini_set('display_errors', true); 
```

然后您可能会看到为什么`file_get_contents()`不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:32:55.387

我相信这是由于跨域不匹配造成的。将您的页面更改为 https 或使用 http 调用。 [http://blockchain.info/api/receive?method=create&format=plain&anonymous=true&address=12Za1i1zhYTCeHWBg8yJb72BeEGQVEuMdT&callback=http%3A%2F%2Fexample.com](http://blockchain.info/api/receive?method=create&format=plain&anonymous=true&address=12Za1i1zhYTCeHWBg8yJb72BeEGQVEuMdT&callback=http%3A%2F%2Fexample.com)

这行得通。

# javascript - 套接字将文本字符串作为十六进制数组，在彼此的事件中多个套接字调用

> ID：15201526
> 
> 赞同：0
> 
> 时间：2013-03-04T12:23:18.630
> 
> 标签：javascript, node.js, socket.io

客户：

```
var iosocket = io.connect();
iosocket.on('connect', function () {
    iosocket.on('message', function(message) {
    console.log(message)
    });
});

$('#input').keypress(function(event) {
    if(event.which == 13) {
        event.preventDefault();
        iosocket.send($('#input').val());
    }
}); 
```

服务器：（忽略需要的部分）

```
var socket = require('socket.io');
conn = function (socket) {
    console.log("connnect");
    socket.on('disconnect', function (socket) {
    console.log("disconnect");
    });  

socket.on('message', function (data) {
    var socket1 = new net.Socket();
    socket1.connect (PORT, HOST, function() {
    socket1.write(data);
    socket1.end();
    });

    socket1.on('data', function(data) {
    socket.broadcast.emit('message', data);
    socket.emit('message',data);
    });

    socket1.on('error', function(exception){
    console.log('Exception:');
    console.log(exception);
    });

    socket1.on('drain', function() {
    console.log("socket1 drain!");
    });

    socket1.on('timeout', function() {
    console.log("socket1 timeout!");
    });

    socket1.on('close', function() {
    console.log('Socket1 closed');
    });
});
}
var io = socket.listen(server, { log: false });
io.sockets.on('connection', conn ); 
```

问题1（已解决但需要反馈）：我在客户端收到的响应（mkessage 变量）是十六进制数组格式，我尝试了 setencoding 和 tostring 方法，但没有解决问题。以下代码将十六进制数组转换为可读字符串。

```
byte = '';
for (var i=0; i < data.length; i++) {
byte += String.fromCharCode( parseInt(data[i], 16).toString(16) );
} 
```

问题 2：每次都会创建 tcp 套接字 socket1 并且需要花费大量时间来执行此操作。如何创建和使用 socket1 以使其在每次写入后不会关闭？
在 PORT HOST 监听的其他人的状态是否强制它关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:13:22.957

您是否尝试过明确设置套接字的编码？

```
socket.on('message', function (msg) {
    var socket1 = new net.Socket();
    socket1.setEncoding('utf8'); //< explicitly request utf8
    socket1.connect (PORT, HOST, function() {
        socket1.write(msg);
        socket1.end();
    }); 
```

有关更多详细信息，请参阅[NodeJS 文档](http://nodejs.org/api/net.html#net_socket_setencoding_encoding)。

如果这没有帮助，您能否分享在 HOST:PORT 处监听的 TCP 服务器的代码（参见`socket1`初始化）？

**编辑**

正如下面评论中提到的：除非您在套接字上调用 setEncoding()，否则“数据”回调将接收 Buffer 对象。您应该将其转换为 String 以进行广播。

```
socket1.on('data', function(data) {
    socket.broadcast.emit('message', data.toString());
}); 
```

# ios - 从 iPhone 中的服务器流式传输视频？

> ID：15201527
> 
> 赞同：0
> 
> 时间：2013-03-04T12:23:19.273
> 
> 标签：ios, media-player

我想知道我使用 MediaPlayer 框架来流式传输实时视频是等到视频下载并开始播放还是同时播放？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:21:53.277

试试这个：

```
-(void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:strSelectedVideoUrl]];
    player.scalingMode = MPMovieScalingModeFill;
    player.movieSourceType = MPMovieSourceTypeFile;
    player.view.frame = CGRectMake(0, 45, 320, 400);
    player.shouldAutoplay = YES;
    [player prepareToPlay];
    [self.view addSubview:player.view];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:player];

    [player play];
}

- (void) movieFinishedCallback:(NSNotification*) aNotification 
{
    MPMoviePlayerController *player1 = [aNotification object];

    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:player1];

    [player1.view removeFromSuperview];
    [player1 release];
    player1 = nil;
    [self.navigationController popViewControllerAnimated:YES];

} 
```

# jquery - 如何使用 jquery 为控件禁用和启用RequiredFieldValidator

> ID：15201529
> 
> 赞同：0
> 
> 时间：2013-03-04T12:23:23.433
> 
> 标签：jquery, asp.net, requiredfieldvalidator

在一个页面中，我有两个单选按钮，基于哪个单选按钮，我将使用名为“person”和“organization”的类在此页面中显示一些控件。此外，我想检查用户在输入文本控件中输入的数据是否正确。如何在客户端验证数据？例如：

```
<input runat="server" id="txtnationalid" maxLength="10" name="txtnationalid" class='person ltr glow-onfocus customerCode required number' dir="ltr" />
<asp:RequiredFieldValidator Display="Dynamic" runat="server" ID="txtcodecv1" ErrorMessage="it can not be null" ControlToValidate="txtnationalid" ></asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ValidationExpression="[0-9]{10}" Display="Dynamic" runat="server" id="txtcodev2" ErrorMessage="it's not in correct format" ControlToValidate="txtnationalid" ></asp:RegularExpressionValidator>
<input runat="server" id="txteconomiccode" maxLength="15" name="txteconomiccode" class='organization ltr glow-onfocus customerCode required number' dir="ltr" />
<asp:RequiredFieldValidator Display="Dynamic" runat="server" id="txtcodecv3" ErrorMessage="economiccode required" ControlToValidate="txteconomiccode"></asp:RequiredFieldValidator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:25:56.180

你可以为此使用 jQuery

```
 <script>
  $(document).ready(function(){
    $("#commentForm").validate();
  });
  </script>

</head>
<body>

 <form class="cmxform" id="commentForm" method="get" action="">
   <input type="text" name="firstName" class="required"/>
 <input type="submit" value="submit"/>
 </form>
</body>
</html> 
```

有关模式详细信息，[请参见此处](http://docs.jquery.com/Plugins/Validation)

# java - 在事件上创建正方形

> ID：15201539
> 
> 赞同：0
> 
> 时间：2013-03-04T12:23:51.237
> 
> 标签：java, swing, jpanel, paint

我正在尝试创建一个与蛇具有相同系统的游戏。我创建了一个窗口，上面有一个`JPanel`，给它一个背景和画线来向用户展示正方形。

板为 600x600（601x601 以使所有人可见）。正方形是 20x20。

现在我正在尝试添加一种将彩色方块放在板上的方法，并检测彩色方块是否已经理想地存在。

```
public class CreateWindow extends JFrame {

    JPanel GameArea;
    static JLayeredPane Java_Window;
    Image Background;

    public void CreateWindow() {
        Dimension Panel_Size = new Dimension(800, 800);
        this.setSize(800,800);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible( true );
        this.setTitle("LineRage");
        getContentPane().setBackground(Color.white); 

        Java_Window = new JLayeredPane();
        this.add(Java_Window);
        Java_Window.setPreferredSize(Panel_Size);

        GameArea = new JPanel()
        {
            @Override
            public void paint(Graphics g) {
                g.setColor(Color.BLACK);
                g.fillRect(0,0,601,601);

                g.setColor(Color.GRAY);
                // Cut map into sections
                int x;
                //draw vertical lines
                for(x = 0; x < 31; x++) {
                    g.drawLine(x*20,0,x*20,600);
                }    
                //draw horizontal lines
                for(x = 0; x < 31; x++) {
                    g.drawLine(0,x*20,600,x*20);
                }     
            }

            public void PaintSquare (int x,int y) {
                //Check if square painted

                //Paint square
                Rectangle rect = new Rectangle(x, y, 20, 20);
                GameArea.add(rect);
            }
        };
        Java_Window.add(GameArea, JLayeredPane.DEFAULT_LAYER);
        GameArea.setBounds(20, 20, 601, 601);
        GameArea.setVisible(true);
    }
} 
```

所以`Java_Window`(800x800) 有一个白色背景， `Game_Area`(601x601) 有黑色背景，有 32 条线沿着并穿过它以将其划分为正方形。

```
public void PaintSquare (int x, int y) {
    //Check if square painted

    //Paint square
    Rectangle square = new Rectangle(x, y, 20, 20);
    GameArea.add(square);
} 
```

`PaintSquare`将从另一个对象（主游戏）调用并检查正方形的背景，如果它是空闲的，它将在其上绘制一个正方形（20x20）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:58:31.600

您的确切问题尚不清楚，但这里有一些提示：

*   使用`paintComponent`而不是`paint`在 Swing 中进行自定义绘画时。别忘了打电话`super.paintComponent(g)`。
*   `java.awt.Rectangle`不是从`JComponent`（或`Component`）派生的，因此不能添加到容器中。
*   采取的一种方法是使用[fillRect](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#fillRect%28int,%20int,%20int,%20int%29)并“绘制”正方形：

此外，在 Java 中，方法以*小写*字母开头。将这一点和上一点相加，您可以执行以下操作：

```
public void paintSquare(Graphics g, int x, int y) {
   g.fillRect(x, y, 20, 20);
} 
```

在这里，该`paintSquare`方法将从 调用`paintComponent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:31:14.090

遵循[Reimeus](https://stackoverflow.com/a/15202157/300257)的建议，此外，您需要创建一个 GUI 模型。

在游戏模型类中定义一个与游戏板大小相同的 Rectangle 数组。

```
Rectangle[][] board; 
```

这样，您可以在模型类中测试重叠的蛇，而不必担心已经绘制的内容。

您的paintComponent 方法变得非常简单。

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    model.draw(g);
} 
```

请参阅[此答案](https://stackoverflow.com/a/15120594/300257)以获得更完整的解释。

# vba - 如何验证 Excel 文件是否已成功导入 MS Access？

> ID：15201540
> 
> 赞同：1
> 
> 时间：2013-03-04T12:23:58.800
> 
> 标签：vba, ms-access, excel, ms-access-2007

似乎在网上的任何地方都找不到这个答案，所以我们开始吧。

我有一些代码可以提取一个 excel 文件并将其数据输入到 MS Access 2007 中的表中。

如何验证文件是否已成功导入？

例如：

```
If excel did import Then
MsgBox "Import successful"
Else If Excel didnt import
MsgBox "Import Not successful" 
```

我目前正在使用以下代码导入 excel 文件：

```
DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel9, "tblData", "FilePath", True, "Sheet1!" 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T13:38:58.240

看了一圈终于明白了！

将此代码放在“DoCmd.TransferSpreadsheet”代码之后。

```
If DBEngine.Errors.Count = 0 Then

    MsgBox "Imported data successfully!"

ElseIf DBEngine.Errors.Count > 0 Then

    MsgBox "The file did not import!"
    Exit Sub

End If 
```

# android - ListView加载中的Android进度条

> ID：15201544
> 
> 赞同：2
> 
> 时间：2013-03-04T12:24:04.090
> 
> 标签：android, android-listview, android-asynctask

我想在我的应用程序中添加`ListView`，里面`LinearLayout`什么时候加载而不是列表有进度条。这类似于系统应用程序，您可以在其中管理您的应用程序。

我找到了一些关于它的信息，但没有一个是好的。一个似乎最好的说法是创建两个布局（一个带有进度条，另一个带有 ListView），然后在`onPreExecute()`（我正在使用`AsyncTask`它）显示进度条。然后`onPostExecute()`隐藏它，仅此而已。

我试图实现它，但我有 ScrapView 错误，并且没有更多信息，它是如何完成的。

所以，我的问题是，你会建议我怎么做？**我不想要任何进度对话框。**

**编辑：**

这是我的代码片段，显示了我到目前为止所做的事情：

*测试活动.java*

```
 @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.mylist_layout);
            wordList = (ListView) findViewById(R.id.wordsList);

            //...
    }

        private class AsyncDBDownload extends AsyncTask<String, Integer, String> {
                LinearLayout linlaHeaderProgress = (LinearLayout) findViewById(R.id.linlaHeaderProgress);

                @Override
                protected String doInBackground(String... params) {
                    try {
                        refreshList();//upload of contetn and set of adapter
                    } catch (Exception ex) {
                        Log.e(TAG, ex.toString());
                    }
                    return null;
                }

                @Override
                protected void onPostExecute(String result) {
                    linlaHeaderProgress.setVisibility(View.GONE);
                    wordList.setVisibility(View.VISIBLE);
                }

                @Override
                protected void onPreExecute() {
                    linlaHeaderProgress.setVisibility(View.VISIBLE);
                }
            }

    private void refreshList() {
            //List content download into Cursor - adapterCursor 
            //...

            wordList.setAdapter(adapterCursor);
        } 
```

word_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linlaHeaderProgress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            android:id="@+id/pbHeaderProgress"
            style="@android:style/Widget.ProgressBar.Small"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </ProgressBar>
    </LinearLayout>

    <ListView
        android:id="@+id/wordsList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fastScrollEnabled="true" >
    </ListView> 
```

两个额外的东西：

*   有`onResume()`调用 AsyncTask 被执行；
*   在`mylist_layout.xml`应该列出的地方包含包含在此布局`word_list.xml`布局中的包含

其他事情：

*   我不想使用进度对话框，因为它不符合我的需要，而且我觉得它看起来不适合我的目的。我想替换列表，而不是添加任何内容。
*   ListFragment 似乎还不错，但我认为可能还有其他更好或更简单的解决方案来实现我想要的。

我正在做与 Android 2.2/2.3 兼容的应用程序，我忘了提，所以如果里面没有东西`android.support.v4.app.Fragment`，我就不会使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:29:50.597

您可以使用`ListFragment`. `setListShown()`与`true`/一起使用`false`来隐藏/显示加载程序而不是列表。

# java - Hibernate - 在事务完成时强制清理容器资源

> ID：15201547
> 
> 赞同：9
> 
> 时间：2013-03-04T12:24:09.827
> 
> 标签：java, hibernate

在执行了一些查询后，我从 Hibernate 收到以下消息：

```
HHH000106: Forcing container resource cleanup on transaction completion 
```

一切似乎都运行良好，没有错误，但我没有找到任何关于这条消息的含义的解释，或者我是否应该对此做任何事情。

我将 Hibernate/JPA 与 JTA 全局事务一起使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-20T12:50:25.437

（完成xwoker的回答。）

我们谈论的资源是：

*   结果集
*   陈述

出现此消息是因为您让其中一些资源处于*打开状态*，即您没有调用它们的`close()`方法。由于当前的 ConnectionReleaseMode：这些资源变得无用，Hibernate 会通知您它正在为您调用 close() 方法。

要避免此日志：只需在事务结束之前自己调用 close() 方法（在您的 ResultSet(s) 和 Statement(s) 上）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-19T06:41:51.650

此消息在**org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl**中生成（至少是我发现它使用的唯一地方）并声明为**INFO**：

```
public void afterTransaction() {
    transactionTimeOutInstant = -1;
    if ( connectionReleaseMode() == ConnectionReleaseMode.AFTER_STATEMENT ||
            connectionReleaseMode() == ConnectionReleaseMode.AFTER_TRANSACTION ) {
        if ( hasRegisteredResources() ) {
            LOG.forcingContainerResourceCleanup();
            releaseResources();
        }
        getLogicalConnection().aggressiveRelease();
    }
} 
```

如果使用了某些 ConnectionReleaseModes 并且有注册的资源，Hibernate 会通知您它会释放这些资源。

如果这是所需的行为，请不要做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T07:12:56.810

如果 Hibernate 会话在不同线程（以及不同的事务）之间意外共享，则该日志消息`HHH000106: Forcing container resource cleanup on transaction completion`也可能由线程安全问题触发。如果是这样，则可能会出现异常，例如`Trying to return an unknown connection2!`从连接池中泄漏 JDBC 连接。

# qt - 在 Qt 上使用 KDE 库

> ID：15201550
> 
> 赞同：3
> 
> 时间：2013-03-04T12:24:30.167
> 
> 标签：qt, kde

我对 Qt 比较陌生（相对较新的意思是我已经在 Qt 上开发了一些基本应用程序）。我想在使用 Qt 的 KDE 游戏上工作，遇到了诸如`kapplication.h`、`KMainWindow`等之类的东西。我如何在 Qt 上使用它们，它们与对应的`QApplication`或`QMainWindow`Qt 中的有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:43:38.473

不同之处在于这些头文件是用于 KDE 开发库的，在不了解如何使用这些库的情况下，我认为可以合理地假设它们用于更好地将您的程序集成到 KDE 桌面中。如果您要使用这些头文件编写程序，那么如果您想在 Gnome 或 XFCE 等 GTK 环境中使用该程序，则必须包含 KDE 运行时库。当您可以直接使用 Qt 库代替 KDE 库时，这会给您的程序添加不必要的依赖项。除非您的程序明确打算在 KDE 上运行，否则我建议使用 Qt。但是，如果您想根据 KDE 环境定制您的应用程序，那么 KDE 库将是一个不错的选择。

简而言之，如果您的目标是 Windows、Gnome、XFCE、Cinnamon、KDE ​​等……那么 Qt。如果 KDE 是您唯一的选择，请使用这些标头。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:25:19.903

有 IDE，使用 KDE 和 qt，KDevelop，你可以在这里查看：[http ://www.kdevelop.org/](http://www.kdevelop.org/)

# vb.net - 序列化一个泛型类（不需要 XML 帮助类）

> ID：15201562
> 
> 赞同：4
> 
> 时间：2013-03-04T12:25:26.003
> 
> 标签：vb.net, visual-studio-2010, generics, xml-serialization

我有一个关于泛型类的序列化的问题。

因为我想为我的所有配置（被序列化为 XML）使用一个通用类，所以我编写了以下类：

```
Imports System.Xml
Imports System.Xml.Serialization
Imports System.IO
Imports System.Reflection
Imports System.Reflection.Assembly

<Serializable()> _
Public Class GenericConfig(Of T)
    Public Sub WriteToFile(ByVal FileName As String)
        ConfigVersion = ProgrammVersion.ToString
        Dim XmlFile As FileStream = New FileStream(FileName, FileMode.Create)
        Dim serialize As XmlSerializer = New XmlSerializer(GetType(GenericConfig(Of T)), New Type() {GetType(GenericConfig(Of T))})
        serialize.Serialize(XmlFile, Me)
        XmlFile.Close()
    End Sub

    Public Shared Function ReadFromFile(ByVal FileName As String) As GenericConfig(Of T)
        Dim XmlFile As FileStream = New FileStream(FileName, FileMode.Open)
        Dim serialize As XmlSerializer = New XmlSerializer(GetType(GenericConfig(Of T)))
        ReadFromFile = serialize.Deserialize(XmlFile)
        XmlFile.Close()
        Return ReadFromFile
    End Function

    Public Shared ReadOnly Property ConfigFileName() As String
        Get
            Return GetExecutingAssembly.Location.Substring(0, GetExecutingAssembly.Location.Length - 4) & ".Config.xml"
        End Get
    End Property
End Class

Public Class ToolConfig
    Inherits GenericConfig(Of ToolConfig)

    Public Property Key1 As String = "Value 1"
End Class 
```

我遇到的问题是我无法序列化它，因为出现以下错误

```
serialize.Serialize(XmlFile, Me) 
```

{“类型 GenericConfigClass.ToolConfig 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。”}

如果您在派生类上使用 XMLSerializer，我已经搜索并发现了很多与该错误相关的文章。我在这里不这样做。我在通用类上使用它。

除了在这里创建像这个家伙这样的 XML 帮助器类之外，还有其他方法吗：http: [//www.codeproject.com/Articles/35925/Generic-XML-Serialization-Methods](http://www.codeproject.com/Articles/35925/Generic-XML-Serialization-Methods)

谢谢，
沃尔夫冈

**更新：**
这就是我所说的（简短的例子）

```
Imports System.IO

Public Class frmMain
    Dim Config As ToolConfig

    Private Sub btnConfigInit_Click(sender As Object, e As EventArgs) Handles btnConfigInit.Click
        '----------------- read config file  -----------------
        If File.Exists(ToolConfig.ConfigFileName) Then
            Config = ToolConfig.ReadFromFile(ToolConfig.ConfigFileName)
        Else
            Config = New ToolConfig
        End If
        Config.WriteToFile(ToolConfig.ConfigFileName)

        MsgBox(Config.Key1)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:28:15.370

是的，您*使用*的是派生类：`ToolConfig`. 通过让它知道`XmlInclude`，你应该没问题：

添加`<XmlInclude(GetType(ToolConfig))>`到`GenericConfig`.

另一个解决方案应该是在创建实例时简单地使用`Me.GetType()`而不是：`GetType(GenericConfig(Of T))``XmlSerializer`

```
Dim serialize As XmlSerializer = New XmlSerializer(Me.GetType()) 
```

为了能够成功反序列化，您必须使共享`ReadFromFile`方法成为实例方法或使其成为通用方法。

* * *

如果您想保持该反序列化方法共享，您可以这样做：

```
Public Class GenericConfig ' <- No (Of T) here! But in the line below.
    Public Shared Function ReadFromFile(Of T)(ByVal FileName As String) As T
        Dim XmlFile As FileStream = New FileStream(FileName, FileMode.Open)
        Dim serialize As XmlSerializer = New XmlSerializer(GetType(T))
        ReadFromFile = serialize.Deserialize(XmlFile)
        XmlFile.Close()
        Return ReadFromFile
    End Function
End Class 
```

用法：

```
GenericConfig.ReadFromFile(Of ToolConfig)(filename) 
```

# java - 保存和检索过度更改的代码

> ID：15201564
> 
> 赞同：0
> 
> 时间：2013-03-04T12:25:31.777
> 
> 标签：java, netbeans, ide, version

我是java编程新手。我使用 netbeans IDE 制作了一个相当大的项目。因此，当我开发项目时，我会不断更改代码以使其适合需要。如何在修改之前保持我的代码可用？这是因为我想保留所有早期版本的代码，所以当我遇到错误时，我可以轻松跳转到早期版本。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:27:03.163

您应该认真考虑使用版本控制系统`GIT`，`SVN`尤其是现在您正在处理大型项目。

阅读[这篇](http://en.wikipedia.org/wiki/Revision_control)关于版本控制的文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:43:21.617

正如其他人所说，版本控制是您的朋友。使用版本控制时，将您的活动分解为简单/小任务。只专注于一项任务，在工作时，将这项工作与有意义的评论一起提交（你未来的自己会感谢你）。这个想法是很少而且经常提交。这很有用，原因有两个：

1.  如果您需要丢弃更改，您不会损失太多。
2.  如果您需要了解您所做的更改，那么了解的内容就更少了

在某些时候，您会想要分支/标记您的工作。标签对于标记可能应该被冻结的重要时刻（如发布）很有用。分支对于尚未准备好“发布就绪”的重大更改/添加很有用。当该工作准备就绪时，您可以合并您的更改。这允许您的项目的稳定（主干）版本和项目的正在进行的（分支）版本。

# ruby-on-rails - RVM::IncompatibleRubyError

> ID：15201570
> 
> 赞同：0
> 
> 时间：2013-03-04T12:25:41.637
> 
> 标签：ruby-on-rails, ruby

我正在尝试在服务器上运行示例 Rails 应用程序，但无法这样做，只是不断收到此消息。

错误消息：给定的 ruby​​ 环境需要 ruby​​-1.9.3-p392（相对于 ruby​​-1.9.3-p374）（RVM::IncompatibleRubyError）

我认为这意味着我必须更改我的 ruby​​ 版本？是否可以在命令行中执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:30:27.340

是的，您是正确的，您可以使用命令行来完成，

如果您安装了相应的 ruby​​ 版本

# 这将切换到以下 ruby​​ 版本

> rvm ruby​​-1.9.3-p392

# 如果要使用命令安装

> rvm 安装 ruby​​-1.9.3-p392

并使用 rvm ruby​​-1.9.3-p392

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:53:45.503

要找出您安装了哪些 ruby​​ 版本，请键入：

```
rvm list 
```

如果您需要的版本未列出，请键入：

```
rvm get head 
```

这将升级到最稳定的 rvm 版本（可选步骤）。

要列出可安装的所有版本，请键入：

```
rvm list known 
```

要安装版本，您需要键入：

```
rvm install ruby-1.9.3-p392 
```

现在您可以使用以下命令仔细检查：

```
rvm list 
```

并输入：

```
rvm use ruby-1.9.3-p392 
```

使用它。

如果您希望您的新版本为默认版本，请将 --default 标志添加到 rvm 使用命令

```
rvm --default use ruby-1.9.3-p392 
```

还有一些其他标志，例如 --system ，请查看[rvm 主页](https://rvm.io/rvm/basics/)以获取更多信息。

**更新**

我只是假设您正在使用 rvm，但是在重新阅读您的答案后，我没有找到任何有关它的信息（我的大脑滞后）。

RVM 是一个 Ruby 版本管理器（几乎没有其他版本），它可以帮助您安装新版本的 ruby​​ 并管理已安装的版本。我建议您使用某种 ruby​​ 版本管理器，RVM 是一个不错的选择。

如果您需要有关如何安装它的信息，请告诉我或查看我给您的安装过程链接。

# mobile - 压缩文件并通过所有移动平台访问？

> ID：15201572
> 
> 赞同：0
> 
> 时间：2013-03-04T12:25:44.430
> 
> 标签：mobile, compression, cross-platform

您知道使用 Winrar 您可以在 Windows 中压缩文件并在 Unix 中提取它！同样，移动设备中是否有任何压缩格式可以压缩并访问所有移动平台。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:24:48.220

[Zlib](http://zlib.net/)是一个相当普遍的压缩库。当你说“跨平台”和“移动”时，我首先想到的是 iOS 和 Android。稍微搜索一下就会发现 zlib 以各种形式存在于两种编程框架中。

由于您可以在移动环境中控制程序，因此您还可以自由调整产生卓越压缩的压缩算法（通用压缩器或最适合特定类型数据的压缩器）。但是为了快速验证概念，您应该能够使用 zlib 在 PC 上压缩数据并将其发送到 iOS 或 Android 以使用包含的库进行解压缩。

# c++ - 斐波那契数列公式查询

> ID：15201573
> 
> 赞同：-3
> 
> 时间：2013-03-04T12:25:44.900
> 
> 标签：c++, fibonacci

我有这个代码

```
for(int Variable=2; Variable<N; Variable++)
{
    Answer = b + c;
    b = c;
    c = Answer;
} 
```

它适用于与我所有其他代码一起计算答案。但是上面的代码我不明白它是如何工作的......只是寻找关于它如何给出正确答案的解释。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:34:52.750

首先，您必须了解斐波那契数列的外观以及它是如何构建的。这里不讨论了，网上找找。然后尝试在一张纸上写下每个循环步骤中的 Answer、b 和 c 的值，例如。

```
Variable | Answer  b  c
---------+-------------
(before) |   1     1  1
       2 |   2     1  2
       3 |   3     2  3
       4 |   5     3  5 
```

...等等。

然后寻找这种“纸上调试”的值与斐波那契数列定义的相似之处，一切都会变得清晰。

* * *

**编辑：**

我了解，您在理解变量范围时遇到问题？`{`如果您在用大括号表示的代码块中声明一个变量，`}`则该变量在该块中的任何地方都是可见和可修改的。

```
{    
    {
        int b = 1, c = 1, Answer = 0;
        for(int Variable=2; Variable<N; Variable++)
        {
            // The b and c variables are visible here
            // and can be both read and written.

            Answer = b + c;
            b = c;
            c = Answer;
        }
    } 

    // However, they are no longer visible here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:27:21.283

也许以下内容会有所帮助。当代码遍历斐波那契数时，`c`它是最新的数字，并且`b`是紧接在此之前的数字。

# azure - SQL Azure 在线管理门户 - 是什么导致“查询性能”运行计数重置为零？

> ID：15201581
> 
> 赞同：2
> 
> 时间：2013-03-04T12:26:07.813
> 
> 标签：azure, azure-sql-database

我们使用 Azure SQL 数据库，并密切关注在线管理门户的查询性能页面以进行昂贵的查询；即这个页面：http: [//blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-70-92-metablogapi/3058.image_5F00_60004D77.png](http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-70-92-metablogapi/3058.image_5F00_60004D77.png)

我们在上周收到了服务中断，这似乎与我们所有查询的运行计数列重置为零一致。

我的问题是，是什么导致此运行计数重置为零，它是否还会导致我们的 Azure SQL 数据库服务中断？当我们占用 CPU 时，数据库是否被移动到不同的节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T08:08:45.520

门户中的“查询性能”视图只是一种呈现如下查询的方式，由来自 sql azure 数据库引擎的数据提供支持。

```
SELECT *
FROM sys.dm_exec_query_stats AS s 
CROSS APPLY sys.dm_exec_sql_text(plan_handle) AS q 
```

**[sys.dm_exec_sql_text](http://msdn.microsoft.com/en-us/library/ms181929%28v=sql.90%29.aspx)** 和**[sys.dm_exec_query_stats](http://msdn.microsoft.com/en-US/library/ms189741%28v=sql.90%29.aspx)**都是 DMV（**[动态管理视图](http://technet.microsoft.com/en-us/magazine/hh441700.aspx)**），

DMV 由内存数据结构 ( [source](http://technet.microsoft.com/en-us/magazine/hh441700.aspx) ) 提供支持，因此如果您的数据库被 sql azure 平台放置在新机器上（由于许多可能的原因之一，并非都是坏的），那么新机器显然不会有任何在内存数据中提供给 DMV 的。

它被重置为零的事实并不是中断的明确证据，如果您有这类问题，您应该在支持下打开一张票（门户中有一个按钮）。

# django - Django、Informix、ibm_db 和 DB2 数据服务器驱动程序

> ID：15201584
> 
> 赞同：2
> 
> 时间：2013-03-04T12:26:19.017
> 
> 标签：django, db2, informix

我正在尝试使用 IBM DB2 数据服务器驱动程序 (ODBC)(v10.1) 和 ibm_db ( [https://code.google.com/p/ibm从 django(v1.3.1) 连接到 IDS(v11.50) -db/](https://code.google.com/p/ibm-db/)）。从 django 到驱动程序的简单查询，例如“从 adm_audit 中选择不同的 adm_audit.action”，`select distinct "adm_audit"."action" from "adm_audit"`并生成错误：

```
[IBM][CLI Driver][IDS/UNIX64] A syntax error has occurred. 
```

我尝试在 db2cli 中执行相同的 sql 语句，它返回相同的错误：

```
 >select distinct "adm_audit"."action" from "adm_audit"
    select distinct "adm_audit"."action" from "adm_audit"
    SQLError: rc = 0 (SQL_SUCCESS)
    SQLGetDiagRec: SQLState     : 42000
              fNativeError : -201
              szErrorMsg   : [IBM][CLI Driver][IDS/UNIX64] A syntax error has occurred.
              cbErrorMsg   : 58 
```

如果引号被删除，语句成功完成：

```
 > select distinct adm_audit.action from adm_audit
    select distinct adm_audit.action from adm_audit
    FetchAll:  Columns: 1
      action
       ...results...
    FetchAll: 13 rows fetched. 
```

阿努建议？感谢任何帮助。

问题解决了。

1) DELIMIDENT 变量

2) 从 ibm_db_django -> operation.py 更改大约 176 行，字符串

`"name = upper( name )"`

至

`"name = lower( name )"`

（并从字符串类导入'lower'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:35:21.880

有一个环境变量`DELIMIDENT`可以控制双引号的使用。将其设置为`y`仅在分隔的 SQL 标识符周围使用它。

更多信息： http: [//publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp ?topic=/com.ibm.sqls.doc/sqls1077.htm](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqls.doc/sqls1077.htm)

我用 ODBC 和 JDBC 对其进行了测试，它的工作原理相同，用于`SELECT * FROM "aaa"`：

*   没有`DELIMIDENT`设置，默认`DELIMIDENT=n`：错误
*   设置`DELIMIDENT=y`：查询有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T12:34:25.660

我为 Informix 摆弄了一下 ibm_db_django。

结果可以在这里找到：[https ://github.com/nutztherookie/ibm_db_django](https://github.com/nutztherookie/ibm_db_django)

它并不完美，但它确实支持inspectdb，例如:)

# c# - 将文件从源文件夹移动到与输入的 ID 不匹配的存档文件夹

> ID：15201588
> 
> 赞同：0
> 
> 时间：2013-03-04T12:26:20.823
> 
> 标签：c#

对于我的项目，我想根据名称与表的“文件名”列值**不匹配的文件将文件从文件夹结构移动到存档文件夹。**

意味着我需要找到数据库中不存在的所有文件名，然后将这些文件移动到另一个文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:39:13.417

```
var files = Directory.GetFiles(path); // get all files
foreach (var file in files.Where(f => !dbFiles.Contains(f)))
{
    File.Move(file, Path.Combine(destPath, Path.GetFileName(file)));
} 
```

`dbFiles`是已经存储在数据库中的文件。`destPath`是您要将文件移动到的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:35:39.017

您可以按照以下步骤完成此任务。

1.  从数据库中获取所有文件名作为数据表格式或列表格式。

2.  获取 FileInfo 对象以获取文件夹中的所有文件。

3.  通过 foreach 循环将这两个对象作为数据表和 FileInfo 进行比较。

4.  从数据库中不存在的 fileInfo 对象获取文件名。

5.  将此文件移动到另一个文件夹中。

我希望您可以使用此步骤并解决您的问题。

# java - 新创建的客户端是否知道 hornetq 中的旧消息？

> ID：15201590
> 
> 赞同：4
> 
> 时间：2013-03-04T12:26:34.350
> 
> 标签：java, jms, hornetq

我在 hornetQ 中与一位消费者创建了会话，然后我使用生产者在队列中添加了 4 条消息。在此之后，我创建了新的消费者。

这个消费者会知道旧消息吗？

如果不是，是否可以在 XML 中配置它？

我创建了无法获取以前消息的新消费者。我只是想确认这种行为是否正确？我在文档中没有找到任何帮助。

下面是代码片段：

```
TextMessage receivedMessage = (TextMessage)consumer.receive(); 
receivedMessage.acknowledge();
System.out.println("Got order: " + receivedMessage.getText());
//consumer.close();
MessageConsumer newConsumer = session.createConsumer(orderQueue);
receivedMessage = (TextMessage)newConsumer.receive();
receivedMessage.acknowledge();  
System.out.println("Got order: " + receivedMessage.getText()); 
```

如果我取消注释 consumer.close() 行，它工作正常。
我的 hornetq-jms.xml

```
<connection-factory name="NettyConnectionFactory">
      <xa>true</xa>
      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="/XAConnectionFactory"/>
      </entries>
       <consumer-window-size>0</consumer-window-size>
   </connection-factory>

   <connection-factory name="NettyConnectionFactory">
      <xa>false</xa>
      <connectors>
         <connector-ref connector-name="netty"/>
      </connectors>
      <entries>
         <entry name="/ConnectionFactory"/>
      </entries>
       <consumer-window-size>0</consumer-window-size>
   </connection-factory>

   <connection-factory name="NettyThroughputConnectionFactory">
      <xa>true</xa>
      <connectors>
         <connector-ref connector-name="netty-throughput"/>
      </connectors>
      <entries>
         <entry name="/XAThroughputConnectionFactory"/>
      </entries>
       <consumer-window-size>0</consumer-window-size>
   </connection-factory>

   <connection-factory name="NettyThroughputConnectionFactory">
      <xa>false</xa>
      <connectors>
         <connector-ref connector-name="netty-throughput"/>
      </connectors>
      <entries>
         <entry name="/ThroughputConnectionFactory"/>
      </entries>
       <consumer-window-size>0</consumer-window-size>
   </connection-factory> 
```

连接工厂代码片段

```
TransportConfiguration transportConfiguration = new
                TransportConfiguration(NettyConnectorFactory.class.getName());
        HornetQConnectionFactory cf =
                HornetQJMSClient.createConnectionFactoryWithoutHA(JMSFactoryType.CF,getTransportConfiguration());
        Queue orderQueue = HornetQJMSClient.createQueue("MutationPipelineQueue"); 
```

getTransportConfiguration() 的代码：

```
private synchronized static TransportConfiguration getTransportConfiguration() {
        HashMap<String, TransportConfiguration> transportConfigurationMap = new HashMap<String, TransportConfiguration>();
        TransportConfiguration tc = transportConfigurationMap.get("machinename:5455");
        if(tc == null){
            Map<String, Object> connectionParams = new HashMap<String, Object>();
            connectionParams.put(org.hornetq.core.remoting.impl.netty.TransportConstants.HOST_PROP_NAME,"machinename");
            connectionParams.put(org.hornetq.core.remoting.impl.netty.TransportConstants.PORT_PROP_NAME,Integer.valueOf("5455"));
            tc = new TransportConfiguration(NettyConnectorFactory.class.getName(), connectionParams);
            transportConfigurationMap.put("machinename:5455", tc);
        }
        return tc; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:16:46.223

是的，它会知道您的旧消息。但是在这种情况下，您的旧消费者仍然打开，因此消费者将在其缓冲区中缓存消息，除非您关闭它，或者您更改消费者窗口大小 = 0。

大多数消息系统将在消费者上提前缓存，因此下次您在消费者上调用接收时，消息将准备好被接收。

但是，如果您的消费者速度很慢并且您没有那么多消息，则该消息将在客户端的缓冲区中，直到您关闭该消费者。

对于生产中的快速消费者来说，最好始终提前缓存，因为这将提高您的吞吐量，而这将受到网络延迟的限制而没有缓存。

在 HornetQ 案例中，您可以通过设置 consumer-window-size=0 来应对缓慢的消费者。

[http://docs.jboss.org/hornetq/2.3.0.beta3/docs/user-manual/html/flow-control.html#flow-control.consumer.window](http://docs.jboss.org/hornetq/2.3.0.beta3/docs/user-manual/html/flow-control.html#flow-control.consumer.window)

如果您通过 JNDI 查找实例化连接工厂：

```
 <connection-factory name="ConnectionFactory">
      <connectors>
         <connector-ref connector-name="netty-connector"/>
      </connectors>
      <entries>
         <entry name="ConnectionFactory"/>
      </entries>

      <!-- We set the consumer window size to 0, which means messages are not buffered at all
      on the client side -->
      <consumer-window-size>0</consumer-window-size>

   </connection-factory> 
```

或者在您直接实例化连接工厂的情况下，您必须在实例中设置 consumerWindowSize：

```
TransportConfiguration transportConfiguration = new
                TransportConfiguration(NettyConnectorFactory.class.getName());
HornetQConnectionFactory cf =
HornetQJMSClient.createConnectionFactoryWithoutHA(JMSFactoryType.CF,getTransportConfiguration());
cf.setConsumerWindowSize(0) // <<<<<< here 
```

这是一个来自 HornetQ 发行版的运行示例，位于 examples/jms/no-consumer-buffering。它与您的代码片段完全相同，并且每次都有效：

```
 // Step 5\. Create a JMS Session
 Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

 // Step 6\. Create a JMS Message Producer
 MessageProducer producer = session.createProducer(queue);

 // Step 7\. Create a JMS MessageConsumer

 MessageConsumer consumer1 = session.createConsumer(queue);

 // Step 8\. Start the connection

 connection.start();

 // Step 9\. Send 10 messages to the queue

 final int numMessages = 10;

 for (int i = 0; i < numMessages; i++)
 {
    TextMessage message = session.createTextMessage("This is text message: " + i);

    producer.send(message);
 }

 System.out.println("Sent messages");

 // Step 10\. Create another consumer on the same queue

 MessageConsumer consumer2 = session.createConsumer(queue);

 // Step 11\. Consume three messages from consumer2

 for (int i = 0; i < 3; i++)
 {
    TextMessage message = (TextMessage)consumer2.receive(2000);

    System.out.println("Consumed message from consumer2: " + message.getText());
 } 
```

正如您在此示例中看到的那样，正在接收旧消息。

任何与此不同的东西都是您系统的错误配置。也许您没有设置正确的连接工厂？

顺便说一句：在 ActiveMQ 上，您可以管理预取限制以管理相同的行为：

[http://activemq.apache.org/what-is-the-prefetch-limit-for.html](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)

[这个问题是具有多个消费者的 JMS 队列](https://stackoverflow.com/questions/7008664/jms-queue-with-multiple-consumers)的精确复制

至于追溯消息，这是 ActiveMQ 上仅适用于主题的另一个功能，它是使用旧消息创建的订阅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:56:26.323

您正在寻找的功能是通过 Durable 订阅提供的。这是标准 JMS 规范的一部分。如果您查看您的版本的 HornetQ 文档，我相信您会找到它。此外，这里是在 HornetQ 中使用 JMS Durable 订阅[的 Java 客户端的一个很好的示例。](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&sqi=2&ved=0CFcQFjAD&url=https://issues.jboss.org/secure/attachment/12340682/readme.html&ei=Ipc0UY7uHe6v0AH28YGYBQ&usg=AFQjCNFqS5wDE4N_Wz0uur88W1LRXp6Ozw&sig2=SBuaLS9nnUq_PxULE_jPoQ)

# highcharts - 带有饼图的符号轮廓或自定义图例符号

> ID：15201607
> 
> 赞同：5
> 
> 时间：2013-03-04T12:27:09.607
> 
> 标签：highcharts, pie-chart

我有一个带有`white slice/segment and grey border`. 不幸的是，边框不适用于图例图标！我想知道是否有必要单独设置图例符号的样式。我在 API 描述中没有找到任何属性。

有两个想法，如何使这项工作。哪一个会起作用？

1.  为项目创建自定义 SVG 图像（非常灵活）
2.  启用图例符号的轮廓

这是示例：http: [//jsfiddle.net/c2XVz/](http://jsfiddle.net/c2XVz/)

```
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        colors: [
        'blue'      , 
        'red'   , 
        'silver'        ,
        'orange'    , 
        'green'     ,
        'grey'  , 
        'gold'      ,
        'rgba(80, 183, 123, 1)' ,
        'rgba(128, 0, 102, 1)'  ,
        'rgba(150, 124, 100, 1)'    ,
        'rgba(193, 10, 0, 1)'       ,
        'rgba(91, 214, 235, 1)' ,
        'rgba(90, 111, 137, 1)'     ,
        'rgba(212, 173, 156, 1)'    ,
        'rgba(145, 145, 145, 1)'    ,
        'rgba(146, 184, 214, 1)'
        ],
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Lorem ipsum 2013'
        },
        legend: {
            align: 'right',
            verticalAlign: 'top',
            x: -60,
            y: 72,
            layout: 'vertical'
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true,
                slicedOffset: 20
            }
        },
        series: [{
            type: 'pie',
            name: 'Expenses',
            data: [
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    ['Legend item', 20.0],
                    {
                        name: 'Not categorized',
                        y: 10.0,
                        color: '#ffffff',
                        borderColor: '#646464',
                        borderWidth: 0.5,
                        sliced: true,
                        selected: true
                    }
                ]
        }]
    });
}); 
```

谢谢你的任何线索......</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T15:01:01.637

我在 API 中没有看到任何用于绘制图例符号的自定义级别的选项。图表呈现后很容易破解：

```
$(chart.series[0].data).each(function(i,slice){
   $(slice.legendSymbol.element).attr('stroke-width','1');
   $(slice.legendSymbol.element).attr('stroke','gray');
}); 
```

![在此处输入图像描述](../Images/db3b466120cf4167fe4909ad9c193d9f.png)

[在这里](http://jsfiddle.net/c2XVz/1/)看小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-12T11:26:59.557

马克的答案不适用于`line/bar/column`类型。下面的代码支持这些：

```
$(chart.series).each(function(i,slice){
   $(slice.legendSymbol.element).attr('stroke-width','1');
   $(slice.legendSymbol.element).attr('stroke','black');
}); 
```

[在这里](http://jsfiddle.net/3vkzg0d2/1/)提琴

# html - 带预包装的手动包装

> ID：15201612
> 
> 赞同：0
> 
> 时间：2013-03-04T12:27:32.670
> 
> 标签：html, css

我正在尝试设计一个页面来显示电子邮件。我在`pre`with中有这样的东西`white-space: pre`：

```
>> Donec tincidunt lobortis orci, a cursus dui ullamcorper
>> 水平。Praesent vel enim et lectus aliquet laoreet。在时间
>> 苏打水。

```

现在，当 screen-y 太小并且溢出时，我不想使用`overflow: auto`. 相反，我希望它像这样自动包装：

```
>> Donec tincidunt lobortis orci，一种诅咒
>> dui ullamcorper vel。普雷森特维尼姆
>> et lectus aliquet laoreet。在时间
>> 苏打水。

```

`:before`如果我能够选择页面中的文本并将其原样复制到电子邮件中，我不介意使用。

好的，让我们首先尝试解决一个更简单的问题：假设每行前面没有“>>”前缀。我可以使用`white-space: normal`，但是当我复制文本时，我得到一行没有换行符，这是不可取的。那么，如何让我的浏览器换行而不失去在显示时使用换行符将其复制出来的能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:38:03.020

# django - 登录时出现 Django AbstractUser 错误

> ID：15201616
> 
> 赞同：0
> 
> 时间：2013-03-04T12:27:38.377
> 
> 标签：django, django-authentication, django-users

我创建了一个 AbstractUser 模型来向标准用户模型添加一些额外的字段。

我认为一切都设置正确，但是当我登录时，我收到此错误：

```
unbound method save() must be called with UserProfile instance as first argument (got nothing instead) 
```

这是我的帐户/models.py

```
from django.db import models
from django.conf import settings
from django.contrib.auth.models import UserManager, AbstractUser

class UserProfile(AbstractUser):
    mobile = models.CharField(max_length=20, blank=True)
    homephone = models.CharField(max_length=20, blank=True)
    updated = models.DateTimeField(blank=True, null=True)    

    objects = UserManager() 
```

在我的设置中，我有：

```
AUTH_USER_MODEL = 'accounts.UserProfile' 
```

我的身份验证中间件：

```
from django.conf import settings
from django.contrib.auth import authenticate, login
from django.contrib.auth.models import User
from accounts.models import UserProfile

#Authentication Middleware using a external cookie named AUTHENTICATION
class CookieMiddleware(object):

    def process_request(self, request):
        #if not hasattr(request, 'userprofile'):
        #   raise ImproperlyConfigured()
        if "AUTHENTICATION" not in request.COOKIES:
            #Cookie not found - do nothing
            return

        #Token found - first check if the user is allready is logged in
        if request.user.is_authenticated():
            return

        #Not logged in, then send to RemoteUserBackend.py    
        token = request.COOKIES["AUTHENTICATION"]

        #Return if the cookie length is 0
        if len(token) == 0:
            return

        UserProfile = authenticate(token=token)
        request.UserProfile = UserProfile

        if request.UserProfile:
            login(request, request.UserProfile) 
```

我的 RemoteUserBackend.py 用于登录外部用户：

```
from django.conf import settings
from django.contrib.auth import authenticate, login
from django.contrib.auth.models import User
from base64 import b64decode
from hashlib import sha1
from urllib import unquote
from sitetasks import tasks
from accounts.models import UserProfile

class Backend( object ):
        def authenticate(self, username=None, password=None, token=None):

            #Unescape token
            unescaped_token = unquote(token)

            #Decode token
            decoded_token = unescaped_token.decode('base64')

            #Split the token into tree variable
            secret, hashstring, userID = decoded_token.split('-', 2)

            #Secret needs to bee in lower to match shared secret
            secret_lower = secret.lower()

            #Make string of SHARED_SECRET, hashstring, userID
            check_string = "%s%s%s" % (settings.SHARED_SECRET, hashstring, userID)

            #sha1 the string
            sha1_check_string = sha1(check_string)

            #Check if the SHARED_SECRET is matching cookie secret
            cookie_valid = sha1_check_string.hexdigest() == secret_lower

            if cookie_valid:
                try:
                    userprofile = UserProfile.objects.get(username=userID)

                    #The user exist, then update the user

                    #Make celery worker update user asynchronous
                    tasks.user_update.delay(user_id=userID)

                except UserProfile.DoesNotExist:
                    # Create a new user

                    userprofile = UserProfile(username=userID)
                    userprofile.is_staff = False
                    userprofile.is_superuser = False

                    userprofile.save() #Save the user

                    #Make celery worker update user asynchronous
                    tasks.user_update.delay(user_id=userID)

                return UserProfile
            return None

        def get_user(self, user_id):
            try:
                return UserProfile.objects.get(pk=user_id)
            except UserProfile.DoesNotExist:
                return None 
```

我得到的错误的回溯是这样的：

```
Request Method: GET
Request URL: http://mydomain.com/

Django Version: 1.6.dev20130302084542
Python Version: 2.7.3
Installed Applications:
('django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.sites',
 'django.contrib.flatpages',
 'south',
 'djcelery',
 'gunicorn',
 'sorl.thumbnail',
 'template_utils',
 'compressor',
 'tagging',
 'ckeditor',
 'debug_toolbar',
 'mptt',
 'accounts',
)
Installed Middleware:
('django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
 'django.middleware.clickjacking.XFrameOptionsMiddleware',
 'myproj.CookieMiddleware.CookieMiddleware')

Traceback:
File "/home/USER/.virtualenvs/SITE/downloads/django-trunk/django/core/handlers/base.py" in get_response
  82\.                     response = middleware_method(request)
File "/home/USER/.virtualenvs/SITE/myproj/myproj/CookieMiddleware.py" in process_request
  35\.             login(request, request.UserProfile)
File "/home/USER/.virtualenvs/SITE/downloads/django-trunk/django/contrib/auth/__init__.py" in login
  86\.     user_logged_in.send(sender=user.__class__, request=request, user=user)
File "/home/USER/.virtualenvs/SITE/downloads/django-trunk/django/dispatch/dispatcher.py" in send
  182\.             response = receiver(signal=self, sender=sender, **named)
File "/home/USER/.virtualenvs/SITE/downloads/django-trunk/django/contrib/auth/models.py" in update_last_login
  31\.     user.save(update_fields=['last_login'])

Exception Type: TypeError at /
Exception Value: unbound method save() must be called with UserProfile instance as first argument (got nothing instead) 
```

有人看到我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:17:10.240

您的后端`authenticate()`方法返回`UserProfile`（类）而不是`userprofile`（属于用户的该类的实例）。

尽管中间件实际上并没有什么问题，但如果您保持相同的命名约定（这是普通的 Python 命名约定）并引用`request.userprofile`而不是`request.UserProfile`.

# c# - RegExp 用于但不用于

> ID：15201617
> 
> 赞同：0
> 
> 时间：2013-03-04T12:27:39.880
> 
> 标签：c#, regex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:25:12.660

这应该可以按需要工作：

```
Regex.Replace(text, "<a(((?!target=).)*)\">", "<a$1\" target=\"_parent\">")
```

需要进行少量假设，即您关闭的每个开始锚标记必须`"`在关闭带有字符的开始标记之前具有该`>`字符。

即<a......`">`我的链接</a>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:52:16.483

为您解决方案：

```
Regex _r = new Regex("<a (.+?)>");
foreach (Match m in _r.Matches(text))
{
    string Link = m.Groups[0].Value;
    if (!Link.Contains("target"))
        text = text.Replace(Link, string.Format("{0} target=\"_parent\">", Link.Substring(0, Link.Length - 1)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:50:57.650

可能会像这样更容易吗？：

```
if (false == text.Contains("target="))
{
   Regex.Replace(text, "<(a)([^>]+)(((?! target=).)*$)([^>]+)>", "<$1 target=\"_parent\" $2 $3>");
} 
```

# matlab - 比例因子必须是 1D 或 3D

> ID：15201619
> 
> 赞同：0
> 
> 时间：2013-03-04T12:27:51.777
> 
> 标签：matlab

我是 Matlab 的初学者，我正在尝试使用`makehgtform`imresize3d.m 制作转换结构，但这给了我一个问题：

```
Error using makehgtform (line 100)
Scale factors must be either 1D or 3D 
```

那什么意识？是 内部的`imresize3d`一个函数`ASM_MakeAppearanceModel`，规模的变量是 5`double`类型。它给了我如下错误。

```
Error in imresize3d (line 28) 
```

代码 ： `T = makehgtform('scale',scale);`

我需要这方面的帮助，我正在尝试搜索如何解决这个问题，但我找不到它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:43:58.880

虽然我以前没有使用过 Matlab，但我使用过图形库。

通常使用缩放变换，或者在所有 3 个维度（5、5、5）中应用统一的比例，或者对每个维度（3、5、2）应用不同的比例。

在此之后，1D 或 3D 请求因此很可能是对单个数字（用于第一种缩放类型）或 3 个数字（用于第二种缩放类型）的请求。

鉴于方法的类型，似乎只能为第二个参数提供 1 个值，这让我相信可能需要一个数组？

因此，不要简单地输入您的号码，而是尝试在数组中输入您的号码。

makehgtform('比例', [3]);

如果这不起作用，也许您的输入类型不被接受？我会尝试一个浮点数，这通常是最受支持的十进制支持数字类型。

# c# - 服务器相关列表 URL 不起作用（链接中的奇怪字符）

> ID：15201622
> 
> 赞同：1
> 
> 时间：2013-03-04T12:28:00.983
> 
> 标签：c#, sharepoint, sharepoint-2010, timer-jobs, relative-url

我对服务器对象模型有一些奇怪的问题...我正在创建 timerjob，它必须只运行`item.update()`函数，其余工作由事件接收器完成。

```
server url - demo2010a:2010

sitecolletion url - http://www.contoso.com/sites/test/

list url - http://www.contoso.com/sites/test/Lists/Zadania%20naprawcze%20t/ 
```

问题出在：

```
 SPSite site = new SPSite("http://www.contoso.com/sites/test/");
        SPWeb web = site.OpenWeb("sites/test");

        SPList ldk_List = web.GetList("http://www.contoso.com/sites/test/Lists/Zadania naprawcze t"); //this is working fine ! but i cant use absolute URL !!!
        SPListItem item = ldk_List.GetItemById(5);
        item["Title"] = "testestestestes";
        item.Update(); 
```

这是我的“测试”代码。列表名称是 url 中的“Zadania Naprawcze -t”，它看起来很奇怪，但它正在使用`http://www.contoso.com/sites/test/Lists/Zadania naprawcze t`我想要类似的东西：`web.GetList("/sites/Zadania Naprawcze -t")`; 或者我试图削减`-`等等。有人可以告诉我应该怎么做吗？所有代码都作为 Timer Job 运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:50:27.253

你的问题不是很清楚。“Lists/Zadania naprawcze t”有效并且是列表的 URL。"/Lists/Zadania%20naprawcze%20t/" 与刚刚编码的内容相同（%20 = 空格）。现在你在问`-t`，你从哪里得到的`-`？**list title**和**list url**是有区别的，你知道吗？*GetList*方法要求您提供列表 URL，也有`SPListCollection.TryGetList`可以提供列表标题的方法 ( ) `web.lists.TryGetList()`。

# java - web.xml 配置显示标签

> ID：15201625
> 
> 赞同：0
> 
> 时间：2013-03-04T12:28:23.977
> 
> 标签：java, jsp, jsp-tags, displaytag

jsp项目中如何配置显示标签？

```
WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.lang.NoClassDefFoundError: org/apache/commons/lang/UnhandledException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:50:34.477

## 示例 Jsp 页面：

```
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>

<display:table uid="ratingAdjustmentHistoryUID" name="${ratingAdjustmentHistoryForm.ratingAdjustmentHistoryQOList}"
                            requestURI="/ratingAdjustmentHistoryPre.do?method=searchRatingTracker" excludedParams="method"
                            decorator="com.ford.mpl.superg.decorator.RatingAdjustmentHistoryTableDecorator" keepStatus="true" style="width:100%">
                            <%@include file="/jsp/include/displaytag.jsp"%>
                                <display:column property="shipSite" title="RAHSiteCode" sortable="true" />
                                <display:column property="ratingMonth" title="RAHRatingMonth" sortable="true" />
                                <display:column property="prior" title="RAHPrior" sortable="true" />
                                <display:column property="revised" title="RAHRevised" sortable="true" />
                                <display:column property="adjustments" title="RAHAdjustments" sortable="true" />
                                <display:column property="comments" title="RAHComments" sortable="true" />
                                <display:column property="lastUpdated" title="RAHLastUpdated" sortable="true" />
                                <display:column property="lastUpdatedCDSID" title="RAHLastUpdatedCDSID" sortable="true" />
                        </display:table> 
```

`RatingAdjustmentHistoryTableDecorator`- 它用于装饰器

将 displaytag.jar 文件粘贴到您的位置`*YourApplicationName*/Webcontent/WEB-INF/lib/`displaytag-1.2.jar`

[***显示标签概述***](http://www.displaytag.org/1.2/)

`display:column`用于显示您的列 `property`用于在您的 java 文件中定义的 bean 名称 `title`用于显示表的标题 `sortable`用于对单个列进行排序或不 `name`用于使用表单名称获取列表 `uid`它是使用的唯一标识符将表存储为对象 `keepStatus`用于维护表的状态，直到会话到期

如果您仍然面临这个问题，请告诉我。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:38:42.117

对于显示标签，web.xml 中不需要任何配置

显示标签用于网格数据中的分页排序

只放了三个 jar (1)displaytag-1.2,(2)displaytag-export-poi-1.2,(3)displaytag-portlet-1.2

并在您的 jsp 页面中编写标签库，例如：

```
 <%@ taglib uri="http://displaytag.sf.net" prefix="display"%> 
```

您的网格代码：

```
 <display:table name="sessionScope.yourListname" pagesize="5" sort="list" cellspacing="10" cellpadding="5">

            <display:column property="var1" title="Title1" sortable="true" />  
            <display:column property="var2" title="Title2" sortable="true" />  
            <display:column property="var3" title="Title3" sortable="true"  />  

        </display:table> 
```

如需更多了解，请点击链接

[http://viralpatel.net/blogs/struts-displaytag-tutorial-sort-pagination-data-displaytag-struts/](http://viralpatel.net/blogs/struts-displaytag-tutorial-sort-pagination-data-displaytag-struts/)

# c - c程序中线程内的多线程

> ID：15201628
> 
> 赞同：2
> 
> 时间：2013-03-04T12:28:44.257
> 
> 标签：c, multithreading, gdb

我正在调试创建 3 个线程的 ac 代码。这 3 个线程等待（使用 pthread_cond_wait），当我的程序向它们发出信号时（使用 pthread_cond_signal），它们每个创建 4 个线程。现在当这 4 个线程开始运行时，就会发生**分段错误**。

我的 gdb 输出：

```
[New Thread 0x7fffd57fa700 (LWP 707)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7fffd77fe700 (LWP 701)]
0x00007ffff79b591f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

(gdb) info threads 
  Id   Target Id         Frame 

  18   Thread 0x7fffd57fa700 (LWP 707) "scan_mt_skip_de" 0x00007ffff79b80db in __lll_lock_wait_private () from /usr/lib/libpthread.so.0

  17   Thread 0x7fffd5ffb700 (LWP 704) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  16   Thread 0x7fffd67fc700 (LWP 703) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  15   Thread 0x7fffd6ffd700 (LWP 702) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

* 14   Thread 0x7fffd77fe700 (LWP 701) "scan_mt_skip_de" 0x00007ffff79b591f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  13   Thread 0x7fffd7fff700 (LWP 578) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  12   Thread 0x7fffe0e6f700 (LWP 577) "scan_mt_skip_de" 0x00007ffff62aed37 in mprotect () from /usr/lib/libc.so.6

  11   Thread 0x7fffe1b21700 (LWP 576) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  10   Thread 0x7fffe2c84700 (LWP 574) "scan_mt_skip_de" 0x00007ffff79b83ed in read () from /usr/lib/libpthread.so.0

  9    Thread 0x7ffff157b700 (LWP 32268) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  8    Thread 0x7ffff1d7c700 (LWP 32265) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  7    Thread 0x7ffff257d700 (LWP 32244) "scan_mt_skip_de" 0x00007ffff62a9fad in poll () from /usr/lib/libc.so.6

  6    Thread 0x7ffff2d7e700 (LWP 32233) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  5    Thread 0x7ffff357f700 (LWP 32231) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  4    Thread 0x7ffff41c3700 (LWP 32229) "scan_mt_skip_de" 0x00007ffff62a9fad in poll () from /usr/lib/libc.so.6

  3    Thread 0x7ffff49c4700 (LWP 32228) "scan_mt_skip_de" 0x00007ffff79b5954 in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  2    Thread 0x7ffff51e6700 (LWP 32227) "scan_mt_skip_de" 0x00007ffff79b5d01 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

  1    Thread 0x7ffff7fe1780 (LWP 32223) "scan_mt_skip_de" 0x00007ffff62f9833 in __memcpy_ssse3 () from /usr/lib/libc.so.6

(gdb) bt

0  0x00007ffff79b591f in pthread_cond_wait@@GLIBC_2.3.2 () from /usr/lib/libpthread.so.0

1  0x000000000040385d in myDmtxDecodeThread ()

2  0x00007ffff79b1e0f in start_thread () from /usr/lib/libpthread.so.0

3  0x00007ffff62b2efd in clone () from /usr/lib/libc.so.6 
```

在我的代码中，当我创建 3 个线程时，我锁定了一个互斥变量，然后等待。但是在每 4 个线程中，我只使用一个互斥变量并等待它。

部分代码：

在 3 个线程中：

```
{
    pthread_mutex_lock(tdata-> wait_mutex);
    pthread_cond_wait(tdata-> wait_cv, tdata-> wait_mutex);
} 
```

在 4 个线程中：

```
{
    pthread_cond_wait(thdata->wait_cv_th,thdata->wait_mutex_th);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:41:50.293

> 但是，在每 4 个线程中，我只使用一个互斥变量并等待它。

好吧，这是错误的。您**必须**在等待之前锁定互斥锁（它将在等待条件时释放锁定，然后在从等待返回之前再次获取它，如果它被其他人锁定则阻塞）。而且，由于`pthread_cond_wait()`互斥锁返回，您还必须解锁它。

# xslt - 如何处理 XSLT 文件？

> ID：15201630
> 
> 赞同：2
> 
> 时间：2013-03-04T12:28:47.390
> 
> 标签：xslt

我只是想知道，如何处理 XSLT 文件。它们是如何解释和执行的？

XSLT 文件是否像脚本语言一样逐行读取并立即“执行”？还是总是首先读取整个文件，并且只有在整个 XSLT 代码格式正确时才会执行语句？或者.... ？？？？

（请注意，我是第一天接触 XSLT 的 C++ 程序员。我唯一想到的是，XSLT 很可能不会被编译成机器代码。:-)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T14:35:50.930

它会因一个 XSLT 处理器而异。您可能可以假设整个样式表已被读取、验证并转换为某种内部表示，然后可以使用重写规则对其进行优化，然后由某种解释器执行内部表示。更高级的处理器，例如 Saxon-EE，确实会生成指令——不是机器指令，而是某种中间语言，例如 Java 字节码，或者可能是供解释器执行的自定义指令集。

# jquery - jquery .on 方法不起作用

> ID：15201632
> 
> 赞同：0
> 
> 时间：2013-03-04T12:28:52.157
> 
> 标签：jquery, mouseenter

当您在我的 div 上“鼠标悬停”时，我会编写脚本以显示一些视频。因为 IE 我使用了调用 mouseenter 的 jquery 函数，但是什么也没发生。

我的脚本：

```
jQuery.fn.PlayMovieHome = function () {
    alert("something");
    var co = $(this).children("a").children("img").attr("src").split('images/')[1].split('.')[0];
    var odkaz = $(this).children("a").attr("href");
    $(this).children("a").after("<div id='video' style='position:absolute;width:163px;height:123px;top:5px;'><embed type='application/x-shockwave-flash' src='http://pacogames.com/games/videos/" + co + ".swf' width='163' height='123' wmode='transparent'></embed><a href='" + odkaz + "'><img src='http://pacogames.com/images/163x123.gif' style='position:absolute;left:0px;width:163px;height:123px;top:5px;'></a></div>");
};

jQuery.fn.StopMovieHome = function () {
    $(this).children('#video').remove();
}; 
```

和：

```
$("div#games").on('mouseenter', '.videobox', function () {
    var element = $(this);
    $(element).data('timeouthra', setTimeout(function () {
        $(element).PlayMovieHome();
    }, 250));
});

$("div#games").on('mouseleave', '.videobox', function () {
    var element = $(this);
    clearTimeout($(element).data('timeouthra'));
    $(this).StopMovieHome();
}); 
```

html看起来像这样：

```
<div id="games">
  <li id="videobox-id" class="videobox">
    <a href="/games/nascar.swf">    
    <img class="BOXGAMES_IMG" src="./images/nascar.png" alt="play nascar" style="position: relative; z-index: 1;" /><br />Nascar Racing
    </a>
  </li>
</div> 
```

它不起作用。有人知道为什么吗？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:35:35.197

尝试这个：

```
$("div#games").on('mouseenter', '.videobox', function () {
    var element = $(this);
    element.data('timeouthra', setTimeout(function () {
        element.PlayMovieHome();
    }, 250));
});

$("div#games").on('mouseleave', '.videobox', function () {
    var element = $(this);
    clearTimeout(element.data('timeouthra'));
    element.StopMovieHome();
}); 
```

# python - 将十六进制代码解密为（可能）时间戳

> ID：15201633
> 
> 赞同：2
> 
> 时间：2013-03-04T12:28:56.623
> 
> 标签：python, regex, hex

我正在解析一些非常不干净的日志，并且每个日志文件都存在于一行中。

我已经设法用正则表达式将它们分开，只留下一个奇怪的类似 HEX 的数字，它是日志字符串。我认为类似 HEX 的数字中的序列是时间戳，但我不知道如何破译它。

我想知道是否有人会看到这种模式。

```
513328F8003D
51332900003D
5133290C003D
5133293C003D
51332945003D
5133294E003D
51332955003D 
```

这是几秒钟后

```
5134519A102B
5134519C0039
513451B0132B
513451B3102B
513451B31329
513451B3182B
513451B31A2F 
```

在少数情况下，数字是相同的。但是在大约 28000 行上，它只发生了几次。所以我猜它每秒记录时间，因此在极少数情况下会在完全相同的时间生成编码时间戳，如下所示：

```
51345D391929
51345D391929
51345D3A042B 
```

日志文件的更新时间（除了上面提到的双倍时间）是今天早上 08:45 左右。

也许这是一种奇怪的方式来表示微时间？我想不通：P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:47:34.333

首先，让我们找到 2013-03-04 08:43 GMT+1 的时间戳：

```
In [25]: import pytz
In [47]: gmt1 = pytz.timezone('Etc/GMT+1')

In [48]: import datetime as DT

In [49]: date = gmt1.localize(DT.datetime(2013, 3, 4, 8, 43))

In [50]: date
Out[50]: datetime.datetime(2013, 3, 4, 8, 43, tzinfo=<StaticTzInfo 'Etc/GMT+1'>)

In [51]: import calendar

In [53]: calendar.timegm(date.utctimetuple())
Out[53]: 1362390180

In [54]: hex(calendar.timegm(date.utctimetuple()))
Out[54]: '0x51346ca4' 
```

这与您发布的十六进制字符串有很大的相似性。

* * *

因此，如果最后 4 个十六进制数字被视为小数部分，则该数字可以解释为 UTC 时间戳：

```
import datetime as DT
hexstamps = '''\
513328F8003D
51332900003D
5133290C003D
5133293C003D
51332945003D
5133294E003D
51332955003D
5134519A102B
5134519C0039
513451B0132B
513451B3102B
513451B31329
513451B3182B
513451B31A2F
51345D391929
51345D391929
51345D3A042B'''

for hexstamp in hexstamps.split():
    print(DT.datetime.utcfromtimestamp(float(int(hexstamp, 16))/16**4)) 
```

产生 UTC 日期时间：

```
2013-03-03 10:42:00.000931
2013-03-03 10:42:08.000931
2013-03-03 10:42:20.000931
2013-03-03 10:43:08.000931
2013-03-03 10:43:17.000931
2013-03-03 10:43:26.000931
2013-03-03 10:43:33.000931
2013-03-04 07:47:38.063156
2013-03-04 07:47:40.000870
2013-03-04 07:48:00.074875
2013-03-04 07:48:03.063156
2013-03-04 07:48:03.074844
2013-03-04 07:48:03.094406
2013-03-04 07:48:03.102280
2013-03-04 08:37:13.098282
2013-03-04 08:37:13.098282
2013-03-04 08:37:14.016281 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T12:48:46.890

似乎最左边的四个字节是时间戳：

```
In [29]: datetime.datetime.fromtimestamp(0x5134519A)
Out[29]: datetime.datetime(2013, 3, 4, 11, 47, 38)

In [30]: datetime.datetime.fromtimestamp(0x51332955)
Out[30]: datetime.datetime(2013, 3, 3, 14, 43, 33) 
```

最右边两个字节的最大值是多少？如果它们不一致`0000-FFFF`，则不太可能只是小数秒。而且它们大于`0x3e8`，所以它们不能是毫秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T12:59:08.043

看起来它们是十六进制编码的纪元时间戳（至少前 8 个字符看起来像是自纪元以来的秒数，时间戳。

```
lines = """513328F8003D
51332900003D
5133290C003D
5133293C003D
51332945003D
5133294E003D
51332955003D
5134519A102B
5134519C0039
513451B0132B
513451B3102B
513451B31329
513451B3182B
513451B31A2F""".split("\n")

from datetime import datetime

def convert(x):
    return datetime.utcfromtimestamp( eval("0x" + x.strip()[:-4] ) )        

for x in lines:
    print x, convert(x) 
```

给....

```
513328F8003D 2013-03-03 10:42:00
51332900003D 2013-03-03 10:42:08
5133290C003D 2013-03-03 10:42:20
5133293C003D 2013-03-03 10:43:08
51332945003D 2013-03-03 10:43:17
5133294E003D 2013-03-03 10:43:26
51332955003D 2013-03-03 10:43:33
5134519A102B 2013-03-04 07:47:38
5134519C0039 2013-03-04 07:47:40
513451B0132B 2013-03-04 07:48:00
513451B3102B 2013-03-04 07:48:03
513451B31329 2013-03-04 07:48:03
513451B3182B 2013-03-04 07:48:03 
```

我冒险猜测最后四个十六进制数字对应于数据的毫秒/微秒部分，但没有确切的值来比较我不会试图猜测它们是如何编码的。如果您对秒数感到满意，那么这可能会完成这项工作。

干杯，

一个。

# qt - Qt 并使用现有的 win32 dll

> ID：15201637
> 
> 赞同：1
> 
> 时间：2013-03-04T12:29:16.400
> 
> 标签：qt, dllexport

我想用 Qt 做一些开发工作。我已经构建了几个小应用程序并遵循了一些教程。一切都很好，看起来很简单。

要完成的开发涉及使用包含在 win32 dll 中的现有代码。我想以最小的麻烦重用这段代码并将它们链接到我的 Qt 应用程序中。我有头文件、库和 dll，所以我将在编译时链接而不是在运行时动态链接。

我曾尝试这样做，但 Qt 总是抱怨总是抱怨链接错误类似于： main.obj:-1: error: LNK2019: unresolved external symbol _ *imp* _Add referenced in function _main

无论我如何调整 .pro 文件，它总是会抱怨。

我花了很多时间在谷歌上搜索并找到了一些信息片段。我找不到一个能说出整个故事的答案。我所追求的是一组步骤，一个需要遵循的序列之类的教程。Qt 安装示例中甚至可能有一个示例，但我一直找不到。

这是我一直试图开始工作以继续进行主要开发的简单“组合”。它基于 MS 教程 dll MathsFunc。

win32 dll：

```
// Visual Studio 2005
//Funcs.h
#ifdef MATHFUNCS_EXPORTS
    #define MATHFUNCSDLL_API __declspec(dllexport)
#else
    #define MATHFUNCSDLL_API __declspec(dllimport) 
#endif

#ifdef __cplusplus
extern "C" {                    /* Assume C declarations for C++ */
#endif

// Returns a + b
MATHFUNCSDLL_API double Add(double a, double b); 

#ifdef __cplusplus
}                   /* Assume C declarations for C++ */
#endif

//Funcs.cpp
#include "Funcs.h"

double Add(double a, double b)
{
    return a + b;
} 
```

导入 dll 的 Qt 应用程序。

```
//main.cpp
#include <QCoreApplication>

#include "../../mathfuncs/funcs.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    double dResult = Add(1.0,2.0);

    printf("1 + 2 = %f\n",dResult);

    return a.exec();
} 
```

//Qt项目文件.por

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-03-04T09:16:18
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = Useit
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp

INCLUDEPATH += c:/tmp/mathfuncs

HEADERS += c:/tmp/mathfuncs

LIBS += c:/tmp/mathfuncs/MathFuncs.lib 
```

提前感谢您的任何意见。

D.

# kannel - 将新的 kannel 盒连接到 opensmppbox

> ID：15201639
> 
> 赞同：1
> 
> 时间：2013-03-04T12:29:30.837
> 
> 标签：kannel, opensmppbox

我一直在尝试连接一个我刚刚在其上安装了 kannel 的新盒子 (17.xxx)。我已经在另一个盒子 (19.xxx) 上有一个正在运行的 kannel，它可以发送和接收短信。我在 19.xxx 上安装了 opensmppbox。当我启动 opensmppbox 时，它显示正在等待传入连接。然后当我在 17.xxx 上启动 kannel 时，它连接到 smsbox，但连接到 opensmppbox 时出错。我在这上面花了太多时间。

我怎么解决这个问题。这是我的 17.xxx 的 kannel.conf

```
# Core 
group = core
admin-port=9000
wapbox-port=9001
smsbox-port=9002
admin-password=Wass
status-password=Wing
dlr-storage=mysql
log-file="/var/log/kannel/bearerbox.log"
log-level=0
access-log="/var/log/kannel/access.log"
access-log-clean=true
access-log-format="%t %l [SMSC:%i] [SVC:%n] [ACT:%A] [BINF:%B] [FID:%F][from:%p] [to:%P] [flags:%m:%c:%M:%C:%d] [msg:%L:%b] [udh:%U:%u]"
box-allow-ip="*.*.*.*"
unified-prefix="0234,+234,00234"

#######################################
# WAPBOX box 
group = wapbox
bearerbox-host = 127.0.0.1
log-file = "/var/log/kannel/wapbox.log"

#######################################
#SMSC group - For 38276
group = smsc
smsc = smpp
smsc-id = smppbox
host = 192.101.17.30
port = 2775
transceiver-mode = true
smsc-username = "hot"
smsc-password = "kkkk"
interface-version = 34
system-type = 
my-number=38260
msg-id-type = 0x03
alt-charset = GSM
#denied-smsc-id = 
#source-addr-ton = 0
#source-addr-npi = 0
#dest-addr-ton = 0
#dest-addr-npi = 0
allowed-prefix-regex = ^\+?(0|234)((8[01]2)|(808)|(7[01]8))

#######################################
# SMSBOX
group = smsbox
bearerbox-host = localhost
smsbox-id = vsmsc
sendsms-port = 9009
sendsms-url = "/cgi-bin/sendsms"
global-sender = cingular
reply-couldnotfetch = "Could not temporarily get content...please try again"
sendsms-chars = "0123456789 +-"
http-request-retry = 1
reply-emptymessage = ""
http-queue-delay = 30
max-pending-requests = 1000
log-file = "/var/log/kannel/smsbox.log"
log-level = 0
access-log = "/var/log/kannel/smsbox-access.log"

#######################################
# DATABASE
group = mysql-connection
id=mydlr
host=localhost
username=root
password=Wind
database=inm
max-connections=1

group = dlr-db
id = mydlr
table = dlr
field-smsc = smsc
field-timestamp = ts
field-destination = destination
field-source = source
field-service = service
field-url = url
field-mask = mask
field-status = status
field-boxc-id = boxc

below is the opensmppbox.conf

#
group = core
dlr-storage = internal

group = opensmppbox
opensmppbox-id = smppbox
opensmppbox-port = 2775
bearerbox-host = localhost
bearerbox-port = 9000
log-level = 0
log-file = /var/log/kannel/opensmppbox/opensmppbox.log
our-system-id = 
use-systemid-as-smsboxid = true
route-to-smsc =Singtel
smpp-logins = "/etc/kannel/smpplogins.txt"
#route-to-smsc = emitsms

group = mysql-connection
id = mydlr
host = localhost
username = root
password = Wing
database = inm
max-connections = 1

group = dlr-db
id = mydlr
table = dlr
field-smsc = smsc
field-timestamp = ts
field-destination = destination
field-source = source
field-service = service
field-url = url
field-mask = mask
field-status = status
field-boxc-id = boxcid

below is the smpplogins.txt

system-id-01 password-01 system-type-01
client-02 password-02 vma 127.0.0.1
client-03 password-03 vma *.*.*.*
hot cingul12 vma 17.x.x.x 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:32:32.523

在opensmppbox中将bearerbox-port更改为kannel conf中核心组的smsbox-port，即在opensmppbox conf中将9000更改为9002

# android - 如何在 Android 活动之间传递 jpg id

> ID：15201640
> 
> 赞同：0
> 
> 时间：2013-03-04T12:29:41.103
> 
> 标签：android, imageview, drawable

我在一个 Activity 中有一个带有 imageViews 的 gridView，我想在选择它时将其中一个加载到新 ImageView 上的其他 Activity 中，但我没有结果

活动一：

```
public class Level extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.level);

    GridView gridview = (GridView) findViewById(R.id.gridviewLevel);
    ImageAdapter ia = new ImageAdapter(this);
    gridview.setAdapter(ia);

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(Level.this, "" + position, Toast.LENGTH_SHORT).show();
            initImageCheck( v.getId());
        }
    });
}

public void initImageCheck(int id){
    Intent intentIC = new Intent(this, ImageCheck.class);
    intentIC.putExtra("ID", id);
    startActivity(intentIC);
} 
```

}

活动二：

```
public class ImageCheck extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_check);

    Bundle extras = getIntent().getExtras();
    int id = extras.getInt("ID");

    ImageView imgView = (ImageView) findViewById(R.id.imageViewCheck);

    imgView.setImageResource(id);
} 
```

}

有什么问题？？？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:33:17.380

`v.getId()`是视图的 ID，而不是图像资源的 ID。

还`ImageAdapter`保存了每个项目使用的资源的 id，并提供了一个方法，如`getResourceIdForItem(int position)`.

# jquery - Jquery ToolTip - 工作但需要调整

> ID：15201641
> 
> 赞同：0
> 
> 时间：2013-03-04T12:29:43.693
> 
> 标签：jquery, html, css, tooltip, positioning

我在这里使用代码：http: [//cssglobe.com/easyest-tooltip-and-image-preview-using-jquery/](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery/)

除了桌子的问题之外，这似乎工作正常。

我的桌子很宽，有 80 多列，需要滚动才能看到。这很好，因为它的布局实际上可以很好地滚动。

每个标题都有一个分配给它的工具提示，它提供了下面列的详细信息。这同样适用于一个例外。

当我接近页面的右侧边缘时，工具提示开始换行，任何属于屏幕且需要滚动到的标题/工具提示也被换行。

无论如何，无论它出现在页面上相对于右边缘的哪个位置，都可以在工具提示上获得固定宽度吗？

这是jQuery：

```
/*
 * Tooltip script 
 * powered by jQuery (http://www.jquery.com)
 * 
 * written by Alen Grakalic (http://cssglobe.com)
 * 
 * for more info visit http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery
 *
 */

this.tooltip = function(){  
    /* CONFIG */        
        xOffset = 10;
        yOffset = 20;       
        // these 2 variable determine popup's distance from the cursor
        // you might want to adjust to get the right result     
    /* END CONFIG */        
    $("a.tooltip").hover(function(e){                                             
        this.t = this.title;
        this.title = "";                                      
        $("body").append("<p id='tooltip'>"+ this.t +"</p>");
        $("#tooltip")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px")
            .fadeIn("fast");        
    },
    function(){
        this.title = this.t;        
        $("#tooltip").remove();
    }); 
    $("a.tooltip").mousemove(function(e){
        $("#tooltip")
            .css("top",(e.pageY - xOffset) + "px")
            .css("left",(e.pageX + yOffset) + "px");
    });         
};

// starting the script on page load
$(document).ready(function(){
    tooltip();
}); 
```

它被称为使用：

```
<a href="http://cssglobe.com" class="tooltip" title="Web Standards Magazine">Roll over for tooltip</a> 
```

并使用：

```
#tooltip{
    position:absolute;
    border:1px solid #333;
    background:#f7f5d1;
    padding:2px 5px;
    color:#333;
    display:none;
    } 
```

添加宽度：150 ！重要；有效，但是当我获得页面的右侧时，工具提示会从页面上消失。

有什么方法可以让它在到达右侧边缘时从右到左显示？

# python - 从没有标题的sqlite中选择

> ID：15201646
> 
> 赞同：2
> 
> 时间：2013-03-04T12:29:55.917
> 
> 标签：python, select, sqlite

我想知道是否有办法以编程方式从 sqlite3 表中选择并获得*没有*标题的结果集。我在[这里](https://stackoverflow.com/questions/5924149/how-to-configure-sqlite-to-display-headers-by-default)和[这里](https://stackoverflow.com/questions/8911865/set-default-output-format-for-sqlite)发现了几个相关的问题，它们通过调用来解决问题`.headers OFF`，但这个选项似乎只适用于命令行 sqlite 客户端。作为参考，这是我的python查询代码（少一些异常处理）：

```
con = lite.connect('my_db.sqlite')
sql = 'SELECT * FROM some_table'
cur = execute(sql, con)
rows = cur.fetchall() 
```

那么的值`rows`变成

```
[
    (100, 102460, 18994), 
    (200, 102460, 13056), 
    (300, 102460, 10784), 
    (400, 102460, 9153), 
    (u'sample_size', u'total_tok', u'unknown_tok_mean')
] 
```

请注意最后一项是 sqlite 返回的标头。这只会不时出现（当返回许多行时往往会出现）。我需要一种方法来控制是否返回标头——任何一种方式都可以，只要结果是 *一致*的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:26:29.780

不，最后一行是从表返回的数据。选择*永远不会*在行数据中包含列标题。

该信息*是*可用的，但作为`.description`光标上的属性，永远不会出现在`.fetchall()`.

换句话说，其他东西将该数据插入到您的表中，并且`SELECT`只是返回该信息。

命令行客户端所做的是为您格式化结果，并且如果这样配置，它将添加标题信息，但这不是`SELECT`语句本身的一部分的行为。

# sugarcrm - SugarCRM - 在关系表中插入新记录

> ID：15201652
> 
> 赞同：3
> 
> 时间：2013-03-04T12:30:27.407
> 
> 标签：sugarcrm

您好我正在测试并尝试在关系表中插入一条记录，但没有成功。当我在联系人模块中保存时，我试图使用逻辑钩子在关系表中输入新行，但我得到的是空白 index.php 页面。哪里有问题？谢谢你

```
 <?php

    include_once('modules/Contacts/ContactOpportunityRelationship.php');
    class User_hook {

        function insert()
        {
            $instance=new ContactOpportunityRelationship();
            $instance->$contact_id='96163e07-f55a-eb87-251f-513482e4a1da';
            $instance->$opportunity_id='c99178c5-fed5-7092-4a79-4e1da40a1eea';
            $instance->save();

        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T09:52:52.930

正确的语法应该是

```
<?php
$contactId = '96163e07-f55a-eb87-251f-513482e4a1da';
$oppId = 'c99178c5-fed5-7092-4a79-4e1da40a1eea';
$oContact = BeanFactory::getBean('Contacts', $contactId);
$oContact->load_relationship('opportunities');
$oContact->opportunities->add($oppId); 
```

# unit-testing - WPToolkitTestFx：assertfailed 时出现未处理的异常

> ID：15201657
> 
> 赞同：1
> 
> 时间：2013-03-04T12:30:40.103
> 
> 标签：unit-testing, windows-phone-8

我正在为 Windows Phone 8 应用程序使用 WPToolkitTestFx 单元测试框架。我在执行时遇到错误`Assert.Fail()`或`Assert.IsFalse(true)`.

> Microsoft.VisualStudio.QualityTools.UnitTesting.Phone.DLL 中出现了“Microsoft.VisualStudio.TestTools.UnitTesting.AssertFailedException”类型的第一次机会异常

上述错误的任何解决方案。

这里是源代码

```
 [TestMethod]
    [Asynchronous]
    [Description("Test2: Sample asynchronous test")]
    public void Test2()
    {
        // this test executes asynchronously
        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            // ... and then fails

            Assert.IsFalse(true);

            EnqueueTestComplete();
        });
    } 
```

谢谢， 拉古

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:13:43.437

[遵循http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/20/windows-phone-toolkit-overview.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/20/windows-phone-toolkit-overview.aspx)中的示例代码时，我可以看到类似的内容。

出现异常是正常的，见：

`A first chance exception of type 'Microsoft.VisualStudio.TestTools.UnitTesting.AssertFailedException' occurred in Microsoft.VisualStudio.QualityTools.UnitTesting.Phone.DLL`

此外，如果调试器连接到您的设备/模拟器，调试器将中断，因此您可以找出测试失败的位置。

```
 private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
    {
        if (Debugger.IsAttached)
        {
            // An unhandled exception has occurred; break into the debugger
            Debugger.Break(); // <- !!! application will stop in debugger here !!!
        }
    } 
```

但是，如果您继续项目（按 F5），或者没有在调试器下运行，您将看到应用程序继续运行并且不会退出。

这使您可以查看测试结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T17:44:22.750

问题，断言失败是您测试的正常部分吗？如果是这样，您需要指示框架预期会发生此类异常

```
[TestMethod, Asynchronous]
[Description("Test2: Sample asynchronous test")]
[ExpectedException(typeof(AssertFailedException))]
public void Test2()
{
    // this test executes asynchronously
    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        // ... and then fails

        Assert.IsFalse(true);

        //TestComplete();
    });
} 
```

另外我注意到您将方法标记为异步，但您没有使用异步调用方法，`EnqueueDelay(TimeSpan), EnqueueCallback(), EnqueueTestComplete()`这些方法使方法功能异步。

# griffon - Griffon 1.2 - 邮件插件不查看邮件主机参数

> ID：15201659
> 
> 赞同：0
> 
> 时间：2013-03-04T12:30:44.100
> 
> 标签：griffon

我安装了 Griffon 1.2 和邮件插件。

`griffon install-plugin mail`

我创建了一个测试：

```
 sendMail(mailhost: '192.168.0.19', 
                to: 'me@home.com', 
                from: 'me@home.com', 
                subject: 'Test Mail', 
                text:'''
            Hello
            World''') 
```

但它不使用 mailhost 参数。它尝试使用本地主机：

`javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25`

我通过 telnet 命令验证了 SMTP 服务器，并且可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:54:40.613

[https://github.com/griffon/griffon-mail-plugin/blob/master/src/main/griffon/plugins/mail/MailSender.groovy](https://github.com/griffon/griffon-mail-plugin/blob/master/src/main/griffon/plugins/mail/MailSender.groovy)的第 70 行显示`mailhost`已考虑到这一点，至少在设置时特性。

然而，这听起来更像是一个错误报告而不是一个实际问题。如果是这样，我建议您将问题发布到 Griffon 用户列表。如果发现它是一个错误，则应向[http://jira.codehaus.org/browse/griffon报告](http://jira.codehaus.org/browse/griffon)

# c# - 在自己的类中动态设置属性

> ID：15201661
> 
> 赞同：2
> 
> 时间：2013-03-04T12:30:58.230
> 
> 标签：c#, class, dynamic, properties

我想我已经很接近解决这个问题了，但是我已经有一段时间没有取得进展了，除了四处打听之外别无选择。

我有一个`GraphicsSettings`具有大量图形属性的类。这些属性有一个带有属性名称的占位符值，我将其用于比较循环。

比较循环是类内部的一个函数，位于图形属性数组和`Stringreader`外部文本文件中的遍历行之间。

当循环找到图形属性的值与行中的一部分内容之间的匹配时，我想将行的整个值设置到图形属性中。

这是问题所在，我不知道如何从类中调用属性设置器而不专门输入它的名称，因为它是一个循环，所以我不能这样做。

我试过使用：

```
this.GetType().GetProperty(key).SetValue(this,line, null); 
```

其中“key”是属性名称，“line”是行值。据我了解，这在从外部调用类对象来设置值时应该可以正常工作，但似乎完全反对使用这种方法从内部调用类。

我得到的只是一个 `TargetInvocationException was unhandled`错误。并不奇怪，但我不知道如何解决这个问题。

所以我想它归结为：我如何通过使用字符串从属性所在的同一个类中访问属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:02:40.353

如果属性不是公共的，您可能需要使用绑定标志，因为该`GetProperty`方法不知道您是从目标类中调用它。C# 的可访问性规则适用于静态代码文本，但不适用于此处。

```
PropertyInfo prop = this.GetType().GetProperty(key, BindingFlags.Instance | 
                                                    BindingFlags.NonPublic);
prop.SetValue(this, "data", null); 
```

请注意，查找属性区分大小写。因此，您可能还需要包含该`IgnoreCase`标志。

```
PropertyInfo prop = this.GetType().GetProperty(key, BindingFlags.Instance |
                                                    BindingFlags.NonPublic |
                                                    BindingFlags.IgnoreCase);
prop.SetValue(this, "data", null); 
```

如果您的属性是静态的，您将指定`BindingFlags.Static`标志而不是`BindingFlags.Instance`标志。您还可以结合两者以及`BindingFlags.NonPublic | BindingFlags.Public`混合情况。

* * *

另请注意，类型必须匹配。C# 的隐式类型转换在这里不起作用。因此，始终为 的值参数（第二个参数）提供正确的类型`SetValue`。例如

```
string input = "123";
prop.SetValue(this, Int32.Parse(input), null);

int i = 77;
prop.SetValue(this, (double)i, null); 
```

如果属性的类型为 ，也将 an显式转换`int`为 a 。`double``double`

* * *

Chris Kerekes 建议`prop.MemberType`结合使用`Convert.ChangeType`来获得一种完全动态的方法，如果您有不同类型的属性（至少对于最常见的类型），该方法将起作用。

```
prop.SetValue(this, Convert.ChangeType(line, prop.MemberType), null); 
```

# spring - 没有弹簧核心的弹簧安全？

> ID：15201668
> 
> 赞同：0
> 
> 时间：2013-03-04T12:31:17.747
> 
> 标签：spring, spring-security

我有一个非常简单的问题，我就是找不到答案。

如果我只想使用 Spring Security，我需要 Spring 核心或任何其他依赖项吗？

在[这个链接](http://www.springsource.org/spring-security)中，在底部我只看到弹簧安全罐作为依赖项，但我仍然无法让它工作。只有当我使用了更多的 spring jars（核心、上下文等）时，我才能让它工作。

那么，使用 Spring Security 所需的最小依赖项是什么？我所需要的只是一个授权和身份验证框架，并且我希望尽可能少的依赖。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-07T19:46:29.627

对于每个弹簧扩展，您都需要使用 Srping 核心，因为每个扩展都构建在弹簧核心之上

# javascript - 检查 javascript 到期日期是否早于审核日期

> ID：15201671
> 
> 赞同：0
> 
> 时间：2013-03-04T12:31:41.117
> 
> 标签：javascript, validation

我有以下代码和验证来检查输入的日期是否有效。我需要添加一些简单的 javascript 验证来检查“到期”日期是否早于“审阅”日期。如果到期日期是审查日期之前的日期，则可以，如果没有，则给出错误警报框。谢谢你的帮助。

我想我可以比较这两个字符串，看看一个是 < 还是另一个，但不确定最好的方法是什么。

```
<tr>
    <td class="SubHeader" height="5%">Review</td>
</tr>
<tr>
<td class="Label">Review By</td>
<td>
    <input class="amdInputText" type="text" id="guaranteereviewbydate" value="">
    <xsl:attribute name="value"><xsl:value-of select="guaranteereviewbydate"/></xsl:attribute>
    </input>
</td>
</tr>
<tr>
<td class="Label">Expire On</td>
<td><input class="amdInputText" type="text" id="guaranteeexpireondate" value="">
    <xsl:attribute name="value"><xsl:value-of select="guaranteeexpireondate"/></xsl:attribute>
    </input>
</td>
</tr>

<xsl:if test="count(../bankguaranteedata) &gt; '1'">
else if(!validateDate(document.lending.guaranteereviewbydate[<xsl:value-of select="@id"/>].value)){alert("Please enter a valid review by date. The date must be of the format dd/mm/yyyy");document.lending.guaranteereviewbydate[<xsl:value-of select="@id"/>].focus();return false;}                                  
else if(!validateDateExpireOn(document.lending.guaranteeexpireondate[<xsl:value-of select="@id"/>].value)){alert("Please enter a valid expire on date. The date must be of the format dd/mm/yyyy");document.lending.guaranteeexpireondate[<xsl:value-of select="@id"/>].focus();return false;}
</xsl:if>

<xsl:if test="count(../bankguaranteedata) = '1'">
else if(!validateDate(document.lending.guaranteereviewbydate.value)){alert("Please enter a valid review by date. The date must be of the format dd/mm/yyyy");document.lending.guaranteereviewbydate.focus();return false;}                                  
else if(!validateDateExpireOn(document.lending.guaranteeexpireondate.value)){alert("Please enter a valid expire on date. The date must be of the format dd/mm/yyyy");document.lending.guaranteeexpireondate.focus();return false;}
</xsl:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:33:55.923

您需要将数据字符串转换为 Javascript[`Date`对象](http://www.comptechdoc.org/independent/web/cgi/javamanual/javadate.html)，并使用普通运算符`<`和`>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:46:28.213

使用您的上述回复，我已将代码修改如下：

```
<xsl:if test="count(../documentarycreditdata) &gt; '1'">                
else if(!compareDates(document.lending.documentaryexpireondate[<xsl:value-of select="@id"/>].value, document.lending.documentaryreviewbydate[<xsl:value-of select="@id"/>].value)){alert("Please enter an expire on date which is later than the review by date");document.lending.documentaryexpireondate[<xsl:value-of select="@id"/>].focus();return false;}
</xsl:if><xsl:if test="count(../documentarycreditdata) = '1'">          
else if(!compareDates(document.lending.documentaryexpireondate.value, document.lending.documentaryreviewbydate.value)){alert("Please enter an expire on date which is later than the review by date");document.lending.documentaryexpireondate.focus();return false;}
</xsl:if>

 function compareDates(expirydate, reviewbydate){
 if(expirydate.length <11 && reviewbydate.length <11)
    {
try{
  dayexpire = expirydate.substring(0,2);
  monthexpire = expirydate.substring(3,5);
  yearexpire = expirydate.substring(6,10);
  dayreview = reviewbydate.substring(0,2);
  monthreview = reviewbydate.substring(3,5);
  yearreview = reviewbydate.substring(6,10);
  totalexpire = expirydate.substring(3,5)+"/"+expirydate.substring(0,2)+"/"+expirydate.substring(6,10);
  totalreview = reviewbydate.substring(3,5)+"/"+reviewbydate.substring(0,2)+"/"+reviewbydate.substring(6,10);
  newexpirydate = new Date(totalexpire);
  newreviewdate = new Date(totalreview);
  if(newexpirydate < newreviewdate)
     {
       return false;
     }
  else
     return true;
}catch(e){return false;}
 }
 else
 return false;

} 
```

日期作为字符串传入，并以新 Date() 接受的 mm/dd/yyyy 格式输入

然后我进行比较并工作。

# ember.js - 将视图类与布局和 {{#each}} 多次组合会产生不正确的行为

> ID：15201677
> 
> 赞同：1
> 
> 时间：2013-03-04T12:32:06.147
> 
> 标签：ember.js

我在[这个 jsfiddle](http://jsfiddle.net/SphtKr/uunGr/)中看到了一些非常奇怪的行为。

我正在构建一个手风琴控件（希望最终对 ember-bootstrap 做出很好的贡献），因此我构建了一个`layout`用于包装视图内容的视图类：

```
Bootstrap.Accordion = Ember.View.extend({
    tagName: 'div',
    classNames: 'accordion',
    layout: Ember.Handlebars.compile('{{yield}}') 
}); 
```

然后我像这样与`{{#view}}`助手一起使用它，并包含一个`{{#each}}`块，该块最终将包含其他视图以设置手风琴控件的内部。到目前为止，在一种情况下，我在同一个模板中做了两次，在两个不同的手风琴控件中显示不同的信息，有点像这样：

```
{{#view Bootstrap.Accordion}}
  {{#each content}}
    <div><strong>Field 1:</strong> {{field1}}</div>
  {{/each}}
{{/view}}

{{#view Bootstrap.Accordion}}
  {{#each content}}
    <div><strong>Field 2:</strong> {{field2}}</div>
  {{/each}}
{{/view}} 
```

但是，正如您在小提琴中看到的那样，这会产生非常意想不到的结果。基本上，视图的第二个实例是第一个的精确副本。即使是块内的静态内容`{{#each}}`也不对：

```
Field 1: Instance 1 Field 1
Field 1: Instance 2 Field 1
Field 1: Instance 1 Field 1
Field 1: Instance 2 Field 1 
```

但是，如果我在`{{#view...}}`和`{{#each}}`助手之间放置一些东西，它会按预期运行：

```
{{#view Bootstrap.Accordion}}
  Fourth try...
  {{#each content}}
    <div><strong>Field 4:</strong> {{field4}}</div>
  {{/each}}
{{/view}} 
```

因此，*看起来*直接在帮助程序中的内容相似性`{{#view}}`导致结果被 Handlebars 缓存......或其他东西。这只是一个疯狂的假设。谁能看到这里出了什么问题？

（请注意，小提琴中不包含 Bootstrap 库，因此 Bootstrap 不可能搞砸了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:20:14.067

这看起来像一个错误。

这个[github 问题](https://github.com/emberjs/ember.js/issues/2210)是今天创建的，只有`{{#linkTo}}`helper。

看起来所有块助手都会发生这种情况。

# c# - 为什么一开始就有线程竞赛？

> ID：15201682
> 
> 赞同：0
> 
> 时间：2013-03-04T12:32:16.043
> 
> 标签：c#, locking, task

我最近尝试为 lock 语句编写一个示例。考虑以下代码：

```
public partial class Form1 : Form
    {
        private class Concurrency
        {
            private int _myValue;
            private object _locker = new object();
            public int Value
            {
                set
                {
                    lock (_locker)
                    {
                        _myValue = value;
                        Thread.Sleep(new Random().Next(5, 25));
                    }
                }

                get
                {
                    return _myValue;
                }
            }
        }

        private Random _random;
        private Concurrency _concurrency;

        public Form1()
        {
            InitializeComponent();
            _random = new Random();
            _concurrency = new Concurrency();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            CreateTask(1);
            CreateTask(2);
        }

        private void CreateTask(int taskId)
        {
            Task.Factory.StartNew(() =>
                {
                    for (int i = 0; i < 10; ++i)
                    {
                        int randomNumber = _random.Next(0, 50);

                        Console.WriteLine("Thread {0}, setting value {1}", taskId, randomNumber);
                        _concurrency.Value = randomNumber;
                        Console.WriteLine("Thread {0}, getting value {1}", taskId, _concurrency.Value);

                        Thread.Sleep(_random.Next(5, 15));
                    }
                });
        }
    } 
```

结果是：

```
Thread 2, setting value 4
Thread 1, setting value 22
Thread 2, getting value 22
Thread 1, getting value 22
Thread 2, setting value 11
Thread 2, getting value 11
Thread 1, setting value 8
Thread 2, setting value 41
Thread 1, getting value 8
Thread 1, setting value 30
Thread 2, getting value 41
Thread 1, getting value 30
Thread 2, setting value 18
Thread 1, setting value 42
Thread 2, getting value 18
Thread 2, setting value 30
Thread 1, getting value 42
Thread 1, setting value 24
Thread 2, getting value 30
Thread 1, getting value 24
Thread 2, setting value 13
Thread 1, setting value 7
Thread 2, getting value 13
Thread 2, setting value 13
Thread 1, getting value 7
Thread 2, getting value 13
Thread 1, setting value 38
Thread 2, setting value 19
Thread 1, getting value 38
Thread 1, setting value 4
Thread 2, getting value 19
Thread 2, setting value 44
Thread 1, getting value 4
Thread 2, getting value 44
Thread 1, setting value 48
Thread 2, setting value 12
Thread 1, getting value 48
Thread 1, setting value 47
Thread 2, getting value 12
Thread 1, getting value 47 
```

如您所见，除了第一次设置/获取情况外，一切都很好：线程 2 设置值 2 但得到 22。这不是单一情况，它每次都会发生。我知道设置和获取不是原子的，应该围绕任务中的指令设置锁定，但为什么第一次尝试总是失败而其他工作正常？

编辑：

我将并发类更新为：

```
private class Concurrency
        {
            private static Random _random = new Random();
            private int _myValue;
            private object _locker = new object();
            public int Value
            {
                set
                {
                    lock (_locker)
                    {
                        _myValue = value;
                        Thread.Sleep(_random.Next(5, 250));
                    }
                }

                get
                {
                    return _myValue;
                }
            }
        } 
```

请注意，我还在 Thread.Sleep 中扩展了时间范围。结果是：

```
Thread 2, setting value 3
Thread 1, setting value 9
Thread 2, getting value 9
Thread 2, setting value 44
Thread 1, getting value 9
Thread 1, setting value 35
Thread 2, getting value 44
Thread 2, setting value 32
Thread 1, getting value 35
Thread 1, setting value 25
Thread 2, getting value 32
Thread 2, setting value 15
Thread 1, getting value 25
Thread 1, setting value 5
Thread 2, getting value 15
Thread 2, setting value 34
Thread 1, getting value 5
Thread 1, setting value 42
Thread 2, getting value 34
Thread 2, setting value 36
Thread 1, getting value 42
Thread 1, setting value 8
Thread 2, getting value 36
Thread 2, setting value 42
Thread 1, getting value 8
Thread 1, setting value 16
Thread 2, getting value 42
Thread 2, setting value 0
Thread 1, getting value 16
Thread 1, setting value 43
Thread 2, getting value 0
Thread 2, setting value 20
Thread 1, getting value 43
Thread 1, setting value 30
Thread 2, getting value 20
Thread 2, setting value 38
Thread 1, getting value 30
Thread 1, setting value 0
Thread 2, getting value 38
Thread 1, getting value 0 
```

真的什么都没有改变。我猜这不是随机的问题，而是其他的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:44:41.167

它发生**了很多次，而不仅仅是第一次**。

您只“看到”一次，实际上**这**是您程序中的*错误*。可能每次您看到两个“设置...”时，您可能会阅读最后一个。想象一下这种情况：

```
主线程 1 线程 2
值 = 0         
整数 x1 = 值     
                  值 = 2
                  整数 x2 = 值
写线（x1）     
                  写线（x2）

```

输出正确（线程 1 为 0，线程 2 为 2）。现在想象一下，如果调度是这样的：

```
主线程 1 线程 2
值 = 0         
                  值 = 2
整数 x1 = 值     
写线（x1）     
                  整数 x2 = 值
                  写线（x2）

```

您会得到*错误*的结果，因为对于两个线程，您都将读取值 2。实际上这并没有*错*，因为锁定的唯一操作是集合，不能保证线程 1 的读取操作（获取属性值）将在线程 2 的写操作（设置属性值）之前执行。

最后也看看[这篇文章](https://stackoverflow.com/questions/133270/illustrating-usage-of-the-volatile-keyword-in-c-sharp)，如果你写这个，你会看到这样的代码可能会失败（完全出于同样的原因）：

```
++_concurrency.Value; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T12:51:29.720

正如您所指出的，锁定不正确。所以这更像是一个“为什么它似乎有效，除了一开始？”的问题。（我只是重申你的问题。）

[编辑]

由于您更改了代码以删除我正在谈论的问题，所以这里有另一个想法 - 我认为这确实是答案。

您拥有代码的方式是，线程退出锁和读回值之间的时间非常短。

检查你的二传手：

```
set
{
    lock (_locker)
    {
        _myValue = value;
        Thread.Sleep(_random.Next(5, 25));
    }
} 
```

现在，如果 thread1 在锁内，它将设置 _myValue 然后休眠。Thread2 在此期间将坐等进入锁。

当 thread1 退出睡眠时，它立即退出锁并继续执行下一行代码，在本例中是打印当前值的行：

```
Console.WriteLine("Thread {0}, getting value {1}", taskId, _concurrency.Value); 
```

除非 thread1 在退出锁和取消引用之间被取消调度`_concurrency.Value`，否则它将收到正确的值。因为时间太短，所以不太可能在这段时间内被取消。

如果线程 1*被*取消调度，那么线程 2 将能够进入锁并更改`_myValue`在线程 1 取消引用之前进入锁并进行更改。

做任何事情来增加线程设置和获取值之间的时间将更有可能观察到“不正确”的值。

尝试以下程序，然后取消注释用`// Try with this sleep uncommented.`. 您会看到更多行打印“数字不匹配”。

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    class Program
    {
        private static void Main(string[] args)
        {
            Console.WriteLine("Starting");
            CreateTask(1);
            CreateTask(2);
            Console.ReadKey();
        }

        private static void CreateTask(int taskId)
        {
            Task.Factory.StartNew(() =>
            {
                for (int i = 0; i < 10; ++i)
                {
                    int randomNumber = _random.Next(0, 50);

                    Console.WriteLine("Thread {0}, setting value {1}", taskId, randomNumber);
                    _concurrency.Value = randomNumber;
                    // Thread.Sleep(10); // Try with this sleep uncommented.
                    int test = _concurrency.Value;
                    Console.WriteLine("Thread {0}, getting value {1}", taskId, test);

                    if (test != randomNumber)
                    {
                        Console.WriteLine("Number mismatch.");
                    }

                    Thread.Sleep(_random.Next(5, 15));
                }
            });
        }

        private static Random _random = new Random();
        private static Concurrency _concurrency = new Concurrency();

    }

    class Concurrency
    {
        private int _myValue;
        private object _locker = new object();
        public int Value
        {
            set
            {
                lock (_locker)
                {
                    _myValue = value;
                    Thread.Sleep(_random.Next(5, 25));
                }
            }

            get
            {
                return _myValue;
            }
        }

        static Random _random = new Random();
    }
} 
```

那么为什么一开始就失败了呢？好吧，我认为这只是系统启动线程的方式的产物。

# c# - 多个权限作为数据库中的单个整数

> ID：15201683
> 
> 赞同：0
> 
> 时间：2013-03-04T12:32:16.397
> 
> 标签：c#, asp.net, sql-server, enums

我在论坛上工作，我想在数据库中保存用户权限。我的想法是这样的：

```
USER TABLE HAS: (besides name, login etc)
fk_role_id

ROLE TABLE HAS:
role_id
role_name
role_rights 
```

然后我有一个`Enum`用户权限和一个用户类：

```
[Flags] public enum PermissionTypes : int {
    None = 0,
    Register = 1,
    ThreadCreate = 2,
    ThreadEdit = 4,
    ThreadDelete = 8,
    ReplyCreate = 16,
    ReplyEdit = 32,
    ReplyDelete = 64,
    CatCreate = 128,
    CatEdit = 256,
    CatDelete = 512,
    UserCreate = 1024,
    UserEdit = 2048,
    UserDelete = 4096,

    All = Register | ThreadCreate | ThreadEdit | ThreadDelete | ReplyCreate | ReplyEdit | ReplyDelete | CatCreate | CatEdit | CatDelete | UserCreate | UserEdit | UserDelete
}

public class User {
    public PermissionTypes Permissions = PermissionTypes.None;
} 
```

现在可以将用户权限保存为 int in`role_rights`吗？然后让他们再次离开？

更新：

只是为了澄清我的问题是什么...... Fx。如果我有一个具有权限的用户：CatCreate 和 UserCreate，那将给我总共：1152... 现在我将如何使用该数字来测试用户拥有哪些权限？现在它是一个小数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:45:24.077

是的。

如果您想检查某个值，例如“CatDelete”，您可以：`Permissions & PermissionTypes.CatDelete == PermissionTypes.CatDelete`。

要删除一个值：`Permissions &= ~PermissionTypes.CatDelete`

添加一个值：`Permissions |= PermissionTypes.CatDelete`

# c# - 使用 Ninject 解析服务时堆栈溢出

> ID：15201686
> 
> 赞同：1
> 
> 时间：2013-03-04T12:32:38.117
> 
> 标签：c#, dependency-injection, ninject, stack-overflow

我正在尝试使用 NInject 解决已知的 Foo 服务固定列表（在单例范围内）；此解决方案发生在 FooProvider 的构造函数中。问题是每个 Foo 也需要这个提供者。

```
public interface IFoo { }
public interface IFooProvider { }

public class Foo : IFoo
{
    private readonly IFooProvider _provider;

    public Foo(IFooProvider provider)
    {
        _provider = provider;
    }
}

public class FooProvider : IFooProvider
{
    private List<IFoo> _allFooServices;

    public FooProvider(IKernel kernel)
    {
        _allFooServices = kernel.GetAll<IFoo>().ToList();
    }
}

public class Program
{
    private static void Main(string[] args)
    {
        var IoC = new StandardKernel();

        IoC.Bind<IFoo>().To<Foo>().InSingletonScope();
        IoC.Bind<IFooProvider>().To<FooProvider>().InSingletonScope();

        var foo = IoC.Get<IFoo>();
    }
} 
```

这里有一个逻辑循环循环，显然堆栈溢出表明它正在下降。但是，我将两个接口都绑定到单例。

考虑此事; 我们尝试解析 IFoo，然后它需要解析 IFooProvider，它本身需要一个 IFoo 列表……但是我们还没有解析任何 IFoo 单例，因为我们仍在尝试解决它！

那么我该如何解决这个问题呢？

[编辑] 可能的解决方案；IFoo 服务实例的延迟缓冲。

```
public FooProvider(IKernel kernel)
{
    _kernel = kernel;
}

public IFoo Find(object context)
{
    if (_allFooServices == null)
        _allFooServices = _kernel.GetAll<IFoo>().ToList();

    return _allFooServices.Where(... 
```

[为什么？]

一般的想法是避免服务定位器模式，因为我已经看到它被描述为一种反模式。因此，与其在运行时尝试通过依赖注入器解析服务；您尝试在设置过程中获取服务列表。但是，问题在于，如果您的任何服务想要找到其他服务，您就会遇到上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:29:39.527

您可以将属性注入与其中之一一起使用。

```
public interface IFoo
{
}

public interface IFooProvider
{
}

public class Foo : IFoo
{
   [Inject]
   public IFooProvider Provider { get; set; }
}

public class FooProvider : IFooProvider
{
   private List<IFoo> _allFooServices;

   public FooProvider(IKernel kernel)
   {
      _allFooServices = kernel.GetAll<IFoo>().ToList();
   }
}

private static void Main(string[] args)
{
   var IoC = new StandardKernel();
   IoC.Bind<IFoo>().To<Foo>().InSingletonScope();
   IoC.Bind<IFooProvider>().To<FooProvider>().InSingletonScope();

   var foo = IoC.Get<IFoo>();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:37:30.723

您无法使用 Ninject 解决此循环依赖关系。您甚至无法手动创建这样的对象图。

首先，您必须从至少一个构造函数中删除循环依赖。您可以将此依赖项移至属性并使用属性注入。

```
public class Foo : IFoo
{
   [Inject]
   public IFooProvider Provider { get; set; }
} 
```

`IKernel`如果你想避免服务定位器模式，你应该从构造函数中删除依赖，`FooProvider`并使用注册实现集合的注入来`IFoo`代替。

```
public class FooProvider : IFooProvider
{
    private List<IFoo> _allFooServices;

    public FooProvider(IEnumerable<IFoo> fooServices)
    {
        _allFooServices = fooServices.ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:21:41.820

确实这似乎是糟糕的设计，但要直接回答您的问题，请不要在构造函数中实例化 _allFooServices。你可以这样做：

```
private List<IFoo> _allFooServices;
private List<IFoo> AllFooServices
{
    get { return _allFooServices ?? (_allFooServices = Kernel.GetAll<IFoo>().ToList()) }
} 
```

也许你可以选择一个更具体的例子，而不是 Foo。

# php - 在mysql db中更新多行时遇到麻烦

> ID：15201688
> 
> 赞同：0
> 
> 时间：2013-03-04T12:32:46.710
> 
> 标签：php, sql-update

有人能告诉我我写错了吗？此代码显示来自数据库的数据，但是当我按下提交时，它只是重新加载页面并且数据库中没有这些字段的更新......我应该将更新查询中的变量更改为例如：$_POST['name']

```
<?php

$host="localhost"; // Host name
$username="username"; // Mysql username
$password="password"; // Mysql password
$db_name="db"; // Database name
$tbl_name="test"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);

// Count table rows
$count=mysql_num_rows($result);
?>

<table width="500" border="0" cellspacing="1" cellpadding="0">
<form name="form1" method="POST" action="">
<tr>
<td>
<table width="500" border="0" cellspacing="1" cellpadding="0">

<tr>
<td align="center"><strong>Id</strong></td>
<td align="center"><strong>Name</strong></td>
<td align="center"><strong>Lastname</strong></td>
<td align="center"><strong>mid</strong></td>
</tr>

<?php
while($rows=mysql_fetch_array($result)){
    $id[]=$rows['id']; 
 ?>

<tr>
<td align="center">
<input name="id[]" type="text" id="id" value="<? echo $rows['id']; ?>">
</td>
<td align="center">
<input name="name[]" type="text" id="name" value="<? echo $rows['name']; ?>">
</td>
<td align="center">
<input name="lastname[]" type="text" id="lastname" value="<? echo $rows['lastname']; ?>">
</td>
<td align="center">
<input name="midmark[]" type="text" id="midmark" value="<? echo $rows['midmark']; ?>">
</td>
</tr>
<?
}
?>

<tr>
<td colspan="4" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</td>
</tr>
</form>
</table>

<?php
            if(isset($_POST['submit'])){
                for($i=0;$i<$count;$i++){
                $sql1=mysql_query("UPDATE $tbl_name SET name='$name[$i]', lastname='$lastname[$i]', midmark='$midmark[$i]'  WHERE id='$id[$i]' ");
                $result1=mysql_query($sql1);
                }
            }

                if(isset($result1)){
                header("location:multiple.php");
                }
                mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:37:50.617

尝试放一个“。” 在 SQL 字符串和文本中的变量之间并使用单引号 - 它可能试图评估 $name[$i] 的两个部分，例如

```
 'UPDATE '.$tbl_name.' SET name=\''.$name[$i].'    ...etc 
```

此外，在测试时始终在查询之前回显 SQL 字符串以查看它会做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:39:50.263

试试这个，希望对你有帮助。

```
if(isset($_POST['Submit']))
{
    for($i=0;$i<$count;$i++)
    {
        $sql1=mysql_query("UPDATE `".$tbl_name."` SET name='".magic($_REQUEST['name'][$i])."', lastname='".magic($_REQUEST['lastname'][$i])."', midmark='".magic($_REQUEST['midmark'][$i])."'  WHERE id='".magic($_REQUEST['id'][$i])."' ");
            $result1=mysql_query($sql1);
     }
}

function magic($value)
{
   if( get_magic_quotes_gpc() )
       $value = stripslashes( $value );
   if( function_exists( "mysql_real_escape_string" ) )
       $value = mysql_real_escape_string( $value );
   else
       $value = addslashes( $value );
   return $value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:41:57.797

显示和输入使用： -

```
<tr>
<td align="center">
<input name="data[<? echo $rows['id']; ?>][name]" type="text" id="name" value="<? echo $rows['name']; ?>">
</td>
<td align="center">
<input name="data[<? echo $rows['id']; ?>][lastname]" type="text" id="lastname" value="<? echo $rows['lastname']; ?>">
</td>
<td align="center">
<input name="data[<? echo $rows['id']; ?>][midmark]" type="text" id="midmark" value="<? echo $rows['midmark']; ?>">
</td>
</tr> 
```

然后使用： -

```
<?php
        if(isset($_POST['submit']))
        {
            while(list($index,$record)=each($_POST['data']))
            {
                $sql=mysql_query("UPDATE $tbl_name SET name='".mysql_real_escape_string($record['name'])."', lastname='".mysql_real_escape_string($record['lastname'])."', midmark='".mysql_real_escape_string($record['nmidmarkame'])."  WHERE id=".intval($index));
                $result1=mysql_query($sql1);
            }
        }
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:42:57.507

您的帖子变量设置错误。

首先，您的 if 语句， post['submit'] 是小写的，它需要与表单中的相同：

```
isset($_POST['Submit']) 
```

然后您需要读取其余的帖子值并将它们存储在变量中或至少正确引用它们：

```
$sql1=mysql_query("UPDATE $tbl_name SET name='$name[$i]', lastname='$lastname[$i]', midmark='$midmark[$i]'  WHERE id='$id[$i]' "); 
```

应该变成：

```
$name = $_POST['name[$i]'];
$lastname = $_POST['lastname[$i]'];

$sql1=mysql_query("UPDATE $tbl_name SET name='$name', lastname='$lastname',  ... 
```

# android - Xperia Z 模拟器

> ID：15201692
> 
> 赞同：8
> 
> 时间：2013-03-04T12:32:48.417
> 
> 标签：android, avd

[Xperia Z](http://www.sonymobile.com/global-en/products/phones/xperia-z/specifications/#tabs)有一个 1920x1080的屏幕。

我需要开发一个专门针对此设备的应用程序，但我目前没有。

因此，我想使用具有相同规格的模拟器，但在 AVD Manager 的可用设备列表中找不到此屏幕尺寸。

是否可以设置具有此屏幕尺寸的虚拟设备？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-05-13T17:51:01.820

只是为了添加到现有答案，有可用的[Sony 附加组件](https://dl.developer.sonymobile.com/sdk_manager/Sony-Add-on-SDK.xml)，它们还将在 AVD 中为您添加设备定义：

![索尼 Xperia Z AVD](../Images/d00b222dac3b939289919e06f3044eb9.png)

在 Android SDK 管理器中，转到**工具 > 管理附加站点...。**并添加站点 `https://dl.developer.sonymobile.com/sdk_manager/Sony-Add-on-SDK.xml` 您应该可以选择安装索尼设备定义，该选项将显示在 Android 虚拟设备管理器中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T12:39:58.650

是的你可以。打开 Android 虚拟设备管理器，选择设备定义选项卡并添加设备...

# asp.net - 从 asp.net 将参数作为查询字符串传递给 fancybox 的 ajax 调用

> ID：15201700
> 
> 赞同：1
> 
> 时间：2013-03-04T12:32:58.147
> 
> 标签：asp.net, jquery, asp.net-ajax, fancybox

我正在处理 asp.net 网页，我正在使用花式框显示你的视频。

到目前为止它工作正常，我还需要对 asp.net 文件进行 ajax 调用，`UpdateVideoViews.aspx?VideoID=xyzxvtmiw` 以便我可以更新数据库中该视频的点击次数/观看次数（当有人点击缩略图时）。

到目前为止，它工作正常，我能够在花哨的框中显示视频并同时进行 ajax 调用，但问题是我无法将`youtubeVideoID`查询字符串传递给 ajax 脚本的一部分，以便它获取正确视频的 youtubeVideoID点击。

```
$.ajax({
      type: "POST",
      url: "UpdateVideoViews.aspx?youtubeVideoID=7oR4411Pza0",
     }); 
```

以下是我的脚本的一部分

```
<script type="text/javascript">
    //Code to Reinitialize Fancybox script when using update panel START
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);
    function InitializeRequest(sender, args) { }
    function EndRequest(sender, args) { InitMyFancyBox(); }
    $(document).ready(function () {
        InitMyFancyBox();
    });

    function InitMyFancyBox() {
        $(document).ready(function () {
            $(".youtube").click(function () {
                // first, get the value from the alt attribute
                var newTitle = $(this).find("img").attr("alt"); // Get alt from image
                $.fancybox({
                    'padding': 0,
                    'autoScale': false,
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    //'title': this.title, // we will replace this line
                    'title': newTitle,  //<--- this will do the trick
                    'width': 680,
                    'height': 495,
                    'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                    'type': 'swf',
                    'swf': { 'wmode': 'transparent', 'allowfullscreen': 'true' }
                });

                $.ajax({
                    type: "POST",
                    url: "UpdateVideoViews.aspx?youtubeVideoID=7oR4411Pza0",
                });
                return false;
            });
        });

    }
</script>

            <asp:Repeater ID="rptvideos" runat="server" >
                <ItemTemplate>
                <div class="single-video-wrapper">
                    <asp:HyperLink ID="hylnkvideo" CssClass="youtube"  NavigateUrl='<%# getVideoURL(Eval("VideoID"), Eval("VideoYoutubeID")) %>' runat="server">
                        <div class="video-image-wrapper">
                            <asp:Image ID="imgvideo" ImageUrl='<%# getVideoImagePath(Eval("VideoYoutubeID"), Eval("VideoYoutubeIcon")) %>'   AlternateText='<%# getVideoTitleDesc(Eval("VideoDate"),Eval("VideoTitle"),Eval("VideoDesc")) %>'  runat="server" CssClass="video-thumbnail" />
                        </div>
                       <div class="video-name">
                            <asp:Label ID="lblvideoName" CssClass="video-name-lbl" runat="server" Text='<%#Eval("VideoTitle") %>'></asp:Label>
                       </div>
                       <div class="video-issue">
                            <asp:Label ID="lblVideoIssue" CssClass="video-issue-lbl" runat="server" Text='<%#getIssuCode(Eval("IssueCode")) %>'></asp:Label>
                       </div>
                    </asp:HyperLink>
                </div>
                </ItemTemplate>
            </asp:Repeater> 
```

我将不胜感激这方面的帮助

# mysql - 如何在 MySql Workbench 中添加新页面

> ID：15201702
> 
> 赞同：10
> 
> 时间：2013-03-04T12:33:06.043
> 
> 标签：mysql, database-design, mysql-workbench

我想在 MySql Workbench 中添加一个新页面。这怎么可能？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-09T10:40:06.757

打开您的模型，转到模型 -> 图表属性和大小。在打开的对话框中，用鼠标（在网格中）拖动您的大小或在该网格下方的文本框中输入新值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-21T00:21:36.013

1.转到**模型>图表属性和大小** [![在此处输入图像描述](../Images/27aee01b5f7bc6c787d7d179199a01ce.png)](https://i.stack.imgur.com/yxLup.png) 2.选择您需要的页面[![在此处输入图像描述](../Images/cad4cc311abdcf1c15318ba832325407.png)](https://i.stack.imgur.com/y2gUY.png)

# java - 为什么 Grails 在 Mac OS x 7 上使用旧的 JVM 编译器？

> ID：15201703
> 
> 赞同：3
> 
> 时间：2013-03-04T12:33:06.517
> 
> 标签：java, macos, grails, jvm, java-compiler-api

操作系统 x 10.7

```
grails> !java -version
java version "1.7.0_13"
Java(TM) SE Runtime Environment (build 1.7.0_13-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)

grails> !which java
/Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home/bin/java 
```

我想在其中一项服务中使用 Java 1.7 NIO，我得到了以下信息：

```
grails> run-app 
...
| Error Compilation error: startup failed:
/path/to/Acquiring.groovy: 7: unable to resolve class java.nio.file.FileSystems
 @ line 7, column 1.
   import java.nio.file.FileSystems
   ^
/path/to/Acquiring.groovy: 8: unable to resolve class java.nio.file.Path
 @ line 8, column 1.
   import java.nio.file.Path
   ^
2 errors
| Error Error running script run-app : org.codehaus.groovy.grails.cli.ScriptExitException (Use --stacktrace to see the full trace) 
```

怎么回事！他妈的！？好的。我在代码中检查java版本：println

```
println System.getProperty("java.version").startsWith('1.6')?
"I use 1.6?! WTF?!":"It's ok" 
```

最后我明白了

```
I use 1.6?! WTF?! 
```

或者更具体地说

```
 RuntimeMXBean RuntimemxBean = ManagementFactory.getRuntimeMXBean();
    println System.getProperty("java.version").startsWith('1.6')?"I use 1.6?!         WTF?!":"It's ok";
    println "VM_vmVendor: " + RuntimemxBean.vmVendor
    println "VM_getName: " + RuntimemxBean.getName()
    println "VM_getVmVersion: " + RuntimemxBean.getVmVersion()
    println "VM_getVmName: " + RuntimemxBean.getVmName()
    println "VM_namevendor: " + RuntimemxBean.getLibraryPath()

    println "VM_getSystemProperties:" + 
            "\n ================= \n" +          RuntimemxBean.getSystemProperties() +
            "\n ================= "

    List<String> arguments = RuntimemxBean.getInputArguments();
    arguments.each { print it+ "\n" } 
```

变成：

```
I use 1.6?! WTF?!
VM_vmVendor: Apple Inc.
VM_getName: 91621@air.local
VM_getVmVersion: 20.14-b01-445
VM_getVmName: Java HotSpot(TM) 64-Bit Server VM
VM_namevendor: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
VM_getSystemProperties:
 ================= 
[java.vm.version:20.14-b01-445, java.vendor.url:http://www.apple.com/, sun.jnu.encoding:MacRoman, grails.interactive.mode.enabled:true, java.vm.info:mixed mode, user.dir:/Users/me/Sites/java/grailsnew, grails.buildScope:all, sun.cpu.isalist:, java.awt.graphicsenv:apple.awt.CGraphicsEnvironment, sun.os.patch.level:unknown, catalina.useNaming:true, tools.jar:/Library/Java/Home/lib/tools.jar, java.io.tmpdir:/var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/, user.home:/Users/me, java.awt.printerjob:apple.awt.CPrinterJob, java.version:1.6.0_41, file.encoding.pkg:sun.io, java.vendor.url.bug:http://bugreport.apple.com/, mrj.build:11M4107, file.encoding:UTF-8, line.separator:
, sun.java.command:org.codehaus.groovy.grails.cli.support.GrailsStarter --main org.codehaus.groovy.grails.cli.GrailsScriptRunner --conf /Users/me/.grails/wrapper/2.2.0/grails-2.2.0/conf/groovy-starter.conf --classpath , javax.sql.DataSource.Factory:org.apache.commons.dbcp.BasicDataSourceFactory, java.vm.specification.vendor:Sun Microsystems Inc., grails.version:2.2.0, catalina.home:/Users/me/.grails/2.2.0/projects/grailsnew/tomcat, java.vm.vendor:Apple Inc., base.name:grailsnew, java.class.path:/Users/me/.grails/wrapper/2.2.0/grails-2.2.0/lib/org.codehaus.groovy/groovy-all/jars/groovy-all-2.0.5.jar:/Users/me/.grails/wrapper/2.2.0/grails-2.2.0/dist/grails-bootstrap-2.2.0.jar:/System/Library/Java/Support:/Users/me/.grails/wrapper/2.2.0/grails-2.2.0/lib/org.springsource.springloaded/springloaded-core/jars/springloaded-core-1.1.1.jar, awt.nativeDoubleBuffering:true, sun.io.unicode.encoding:UnicodeLittle, os.arch:x86_64, user.language:en, user.name:root, java.runtime.version:1.6.0_41-b02-445-11M4107, sun.boot.class.path:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jsfd.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar:/System/Library/Frameworks/JavaVM.framework/Frameworks/JavaRuntimeSupport.framework/Resources/Java/JavaRuntimeSupport.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/ui.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/laf.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/sunrsasign.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jsse.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jce.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/charsets.jar, gopherProxySet:false, sun.cpu.endian:little, groovy.starter.conf:/Users/me/.grails/wrapper/2.2.0/grails-2.2.0/conf/groovy-starter.conf, grails.env:development, ftp.nonProxyHosts:local|*.local|169.254/16|*.169.254/16, awt.toolkit:apple.awt.CToolkit, base.dir:/Users/me/Sites/java/grailsnew, sun.boot.library.path:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Libraries, java.vm.name:Java HotSpot(TM) 64-Bit Server VM, java.home:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home, net.sf.ehcache.skipUpdateCheck:true, grails.disable.exit:true, java.endorsed.dirs:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/endorsed, sun.management.compiler:HotSpot 64-Bit Tiered Compilers, jna.platform.library.path:/usr/lib:/usr/lib, java.naming.factory.initial:org.apache.naming.java.javaURLContextFactory, java.runtime.name:Java(TM) SE Runtime Environment, catalina.base:/Users/me/.grails/2.2.0/projects/grailsnew/tomcat, grails.home:/Users/me/.grails/wrapper/2.2.0/grails-2.2.0, java.library.path:.:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java, file.separator:/, java.specification.vendor:Sun Microsystems Inc., java.vm.specification.version:1.0, sun.java.launcher:SUN_STANDARD, grails.env.default:true, grails.env.set:true, user.timezone:Europe/Moscow, program.name:grails, http.nonProxyHosts:local|*.local|169.254/16|*.169.254/16, os.name:Mac OS X, path.separator::, java.ext.dirs:/Library/Java/Extensions:/System/Library/Java/Extensions:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/lib/ext, sun.arch.data.model:64, java.specification.name:Java Platform API Specification, os.version:10.7.5, mrj.version:1070.1.6.0_41-445, grails.env.initializing:false, springloaded:profile=grails;cacheDir=/Users/me/.grails/2.2.0/, grails.cli.args:, java.class.version:50.0, user.country:US, java.vendor:Apple Inc., socksNonProxyHosts:local|*.local|169.254/16|*.169.254/16, java.vm.specification.name:Java Virtual Machine Specification, org.mortbay.xml.XmlParser.NotValidating:true, java.specification.version:1.6, grails.server.factory:org.grails.plugins.tomcat.TomcatServerFactory, grails.shutdown.hook.installed:true, java.naming.factory.url.pkgs:org.apache.naming]
 ================= 
-Xserver 
-Xmx768M 
-Xms64M  
-XX:PermSize=32m
-XX:MaxPermSize=256m
-Dfile.encoding=UTF-8
-javaagent:/Users/me/.grails/wrapper/2.2.0/grails-2.2.0/lib/org.springsource.springloaded/springloaded-core/jars/springloaded-core-1.1.1.jar
-Xverify:none
-Dspringloaded=profile=grails;cacheDir=/Users/me/.grails/2.2.0/
-Dgrails.home=/Users/me/.grails/wrapper/2.2.0/grails-2.2.0
-Dtools.jar=/Library/Java/Home/lib/tools.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T19:17:33.717

我建议

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

在您的`.profile`,`.bashrc`或其他登录时获取的文件中。

见[http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/](http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T13:11:38.170

我遇到了同样的问题，Grails 正在使用 /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK 中的 java。您可以通过将 Grails 指向 $JAVA_HOME 来强制 Grails 使用不同的版本 - 将以下内容添加到您的 ~/.profile 或全局 /etc/profile

```
JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_13.jdk/Contents/Home; export JAVA_HOME 
```

获取您的配置文件，Grails 应该在 1.7.0_13 版本上运行

注意：我不是 Java 开发人员，我需要快速启动并运行 grails - 这可能不是最好的答案

# excel - 将范围从 Excel 复制到 Outlook 时如何保留格式

> ID：15201709
> 
> 赞同：1
> 
> 时间：2013-03-04T12:33:19.800
> 
> 标签：excel, vba, format

您好，我有一个 Excel 表格，格式**为 10(Red)** -> **15(Green)**，但最后我失去了我在 Excel 中的所有格式。我使用下一个代码从范围发送和电子邮件到 Outlook

```
Sub email()

    Dim OutApp As Object
    Dim OutMail As Object
    Dim Fname As String
    Dim hoja As String
    Dim rng As Range
    Dim celdas As String

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    Set rng = Range("C3:Q22")
    On Error Resume Next
    With OutMail

        .To = "juan"
        .CC = "Maria"
        .BCC = ""
        .Subject = "XXXX"
        .HTMLBody = "Hey" & RangetoHTML(rng)

        .Display   'or use .Display
    End With
    On Error GoTo 0

    'Kill Fname
    Set OutMail = Nothing
    Set OutApp = Nothing

End Sub 
```

和下一个功能，我从下一个链接复制[如何从 excel 发送邮件](http://www.rondebruin.nl/mail/folder3/mail4.htm)

```
Function RangetoHTML(rng As Range)
' Changed by Ron de Bruin 28-Oct-2006
' Working in Office 2000-2010
    Dim fso As Object
    Dim ts As Object
    Dim TempFile As String
    Dim TempWB As Workbook

    TempFile = Environ$("temp") & "/" & Format(Now, "dd-mm-yy h-mm-ss") & ".htm"

    'Copy the range and create a new workbook to past the data in
    rng.Copy
    Set TempWB = Workbooks.Add(1)
    With TempWB.Sheets(1)
        .Cells(1).PasteSpecial Paste:=8
        .Cells(1).PasteSpecial xlPasteValues, , False, False
        .Cells(1).PasteSpecial xlPasteFormats, , False, False
        .Cells(1).Select
        Application.CutCopyMode = False
        On Error Resume Next
        .DrawingObjects.Visible = True
        .DrawingObjects.Delete
        On Error GoTo 0
    End With

    'Publish the sheet to a htm file
    With TempWB.PublishObjects.Add( _
         SourceType:=xlSourceRange, _
         Filename:=TempFile, _
         Sheet:=TempWB.Sheets(1).Name, _
         Source:=TempWB.Sheets(1).UsedRange.Address, _
         HtmlType:=xlHtmlStatic)
        .Publish (True)
    End With

    'Read all data from the htm file into RangetoHTML
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
    RangetoHTML = ts.ReadAll
    ts.Close
    RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                          "align=left x:publishsource=")

    'Close TempWB
    TempWB.Close savechanges:=False

    'Delete the htm file we used in this function
    Kill TempFile

    Set ts = Nothing
    Set fso = Nothing
    Set TempWB = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-19T21:19:23.337

虽然 OP 接受的答案可能对他有用，但我认为这不是正确的答案。

如果要保留源中的格式，则需要使用**[xlPasteAllUsingSourceTheme](https://analysistabs.com/vba-code/range/m/pastespecial/)**

**代码：**

```
With TempWB.Sheets(1)
        .Cells(1).PasteSpecial Paste:=8
        '.Cells(1).PasteSpecial xlPasteValues, , False, False
        '.Cells(1).PasteSpecial xlPasteFormats, , False, False
        .Cells(1).PasteSpecial xlPasteAllUsingSourceTheme, , False, False
        .Cells(1).Select
        Application.CutCopyMode = False
        On Error Resume Next
        .DrawingObjects.Visible = True
        .DrawingObjects.Delete
        On Error GoTo 0
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T15:06:11.903

好的，我在 rangetoHtml() 中找到了制作方法，当粘贴值时，我更改了代码：

```
 With TempWB.Sheets(1)
        '.Cells(1).PasteSpecial Paste:=8
        .Cells(1).PasteSpecial
        '.Cells(1).PasteSpecial xlPasteValues, , False, False
        '.Cells(1).PasteSpecial xlPasteFormats, , False, False
        '.Cells(1).Select
        Application.CutCopyMode = False
        On Error Resume Next
        .DrawingObjects.Visible = True
        .DrawingObjects.Delete
        On Error GoTo 0
    End With 
```

因为如果我只是复制并粘贴，我不会丢失任何格式。

# java - 如何截断双精度值？

> ID：15201713
> 
> 赞同：0
> 
> 时间：2013-03-04T12:33:34.730
> 
> 标签：java

我想截断双精度。

例如

```
double d=3.123456789087654; 
```

如果我想将它截断到小数点后的第 10 位，结果应该是

```
result: 3.1234567890 
```

结果我不需要四舍五入值

我尝试了自己的功能

```
 static double truncateDouble(double number, int numDigits) {
    double result = number;
    String arg = "" + number;
    int idx = arg.indexOf('.');
    if (idx!=-1) {
        if (arg.length() > idx+numDigits) {
            arg = arg.substring(0,idx+numDigits+1);
            result  = Double.parseDouble(arg);
        }
    }
    return result ;
 } 
```

但没有得到我想要的适当结果..谁能帮我解决我的问题。

java是否支持任何支持截断不四舍五入的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:40:15.553

一般来说，你不能，至少不能使用`double`. 原因是许多数字根本无法准确表示，即使它们有少量的十进制数字。

以0.1为例。最接近`double`的是 0.1000000000000000055511151 ......并且没有多少截断会给你正好 0.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:37:14.380

您可以使用 DecimalFormat 类。

```
double d = 3.123456789087654;

DecimalFormat newFormat = new DecimalFormat("#.##########");
double tenDecimal =  Double.valueOf(newFormat.format(d)); 
```

这将四舍五入最后一位数字。

我同意 NPE。没有多少截断会给你正好 0.1。

唯一的方法是转换为字符串，然后子字符串转换回双精度。

# mysql - 与其他列一起插入默认值

> ID：15201714
> 
> 赞同：0
> 
> 时间：2013-03-04T12:33:43.880
> 
> 标签：mysql

您好，在这种情况下，我需要在表中插入两列，其中一列必须是默认值作为“其他”（请不要建议将“其他”作为默认值），其他列应该从不同的表中插入。这是我的示例代码，请提出必要的更改：

```
INSERT INTO table1 (`ID`,`specialty`) 
SELECT `ID`,`here i need to put default value as other` from table2 a WHERE
Id IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:22:14.987

你是这个意思吗？

```
INSERT INTO table1 (ID,specialty) 
SELECT ID, 'Other'
FROM table2
WHERE ID IS NOT NULL 
```

# ruby-on-rails - 关于 debugger-linecache 与橡胶捆绑的失败者

> ID：15201715
> 
> 赞同：0
> 
> 时间：2013-03-04T12:33:44.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, capistrano

我正在使用 ec2 和 Rubber 进行部署，而不是 debugger-linecache 失败，因为我说我正在使用带有橡胶的 cap 以便于使用 ec2 部署现在这是他给我的输入：

```
 * executing "cd /mnt/feelike-app-staging/releases/20130304122452 && bundle install --gemfile /mnt/feelike-app-staging/releases/20130304122452/Gemfile --path /mnt/feelike-app-staging/shared/bundle --deployment --quiet --without development test"
    servers: ["feelike-app.feelike-app-dev.tk"]
    [feelike-app.feelike-app-dev.tk] executing command
 ** [out :: feelike-app.feelike-app-dev.tk] Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
 ** [out :: feelike-app.feelike-app-dev.tk] 
 ** [out :: feelike-app.feelike-app-dev.tk] /usr/local/rubies/1.9.3-p392/bin/ruby extconf.rb
 ** [out :: feelike-app.feelike-app-dev.tk] checking for vm_core.h... no
 ** [out :: feelike-app.feelike-app-dev.tk] checking for vm_core.h... no
 ** [out :: feelike-app.feelike-app-dev.tk] Makefile creation failed
 ** [out :: feelike-app.feelike-app-dev.tk] **************************************************************************
 ** [out :: feelike-app.feelike-app-dev.tk] No source for ruby-1.9.3-p392 provided with debugger-ruby_core_source gem.
 ** [out :: feelike-app.feelike-app-dev.tk] **************************************************************************
 ** [out :: feelike-app.feelike-app-dev.tk] *** extconf.rb failed ***
 ** [out :: feelike-app.feelike-app-dev.tk] Could not create Makefile due to some reason, probably lack of
 ** [out :: feelike-app.feelike-app-dev.tk] necessary libraries and/or headers.  Check the mkmf.log file for more
 ** [out :: feelike-app.feelike-app-dev.tk] details.  You may need configuration options.
 ** [out :: feelike-app.feelike-app-dev.tk] 
 ** [out :: feelike-app.feelike-app-dev.tk] Provided configuration options:
 ** [out :: feelike-app.feelike-app-dev.tk] --with-opt-dir
 ** [out :: feelike-app.feelike-app-dev.tk] --without-opt-dir
 ** [out :: feelike-app.feelike-app-dev.tk] --with-opt-include
 ** [out :: feelike-app.feelike-app-dev.tk] --without-opt-include=${opt-dir}/include
 ** [out :: feelike-app.feelike-app-dev.tk] --with-opt-lib
 ** [out :: feelike-app.feelike-app-dev.tk] --without-opt-lib=${opt-dir}/lib
 ** [out :: feelike-app.feelike-app-dev.tk] --with-make-prog
 ** [out :: feelike-app.feelike-app-dev.tk] --without-make-prog
 ** [out :: feelike-app.feelike-app-dev.tk] --srcdir=.
 ** [out :: feelike-app.feelike-app-dev.tk] --curdir
 ** [out :: feelike-app.feelike-app-dev.tk] --ruby=/usr/local/rubies/1.9.3-p392/bin/ruby
 ** [out :: feelike-app.feelike-app-dev.tk] --with-ruby-dir
 ** [out :: feelike-app.feelike-app-dev.tk] --without-ruby-dir
 ** [out :: feelike-app.feelike-app-dev.tk] --with-ruby-include
 ** [out :: feelike-app.feelike-app-dev.tk] --without-ruby-include=${ruby-dir}/include
 ** [out :: feelike-app.feelike-app-dev.tk] --with-ruby-lib
 ** [out :: feelike-app.feelike-app-dev.tk] --without-ruby-lib=${ruby-dir}/lib
 ** [out :: feelike-app.feelike-app-dev.tk] 
 ** [out :: feelike-app.feelike-app-dev.tk] 
 ** [out :: feelike-app.feelike-app-dev.tk] Gem files will remain installed in /mnt/feelike-app-staging/shared/bundle/ruby/1.9.1/gems/debugger-linecache-1.1.2 for inspection.
 ** [out :: feelike-app.feelike-app-dev.tk] Results logged to /mnt/feelike-app-staging/shared/bundle/ruby/1.9.1/gems/debugger-linecache-1.1.2/ext/trace_nums/gem_make.out
 ** [out :: feelike-app.feelike-app-dev.tk] An error occurred while installing debugger-linecache (1.1.2), and Bundler
 ** [out :: feelike-app.feelike-app-dev.tk] cannot continue.
 ** [out :: feelike-app.feelike-app-dev.tk] Make sure that `gem install debugger-linecache -v '1.1.2'` succeeds before
 ** [out :: feelike-app.feelike-app-dev.tk] bundling.
 ** [out :: feelike-app.feelike-app-dev.tk] 
    command finished in 64109ms
failed: "/bin/bash -l -c 'cd /mnt/feelike-app-staging/releases/20130304122452 && bundle install --gemfile /mnt/feelike-app-staging/releases/20130304122452/Gemfile --path /mnt/feelike-app-staging/shared/bundle --deployment --quiet --without development test'" on feelike-app.feelike-app-dev.tk 
```

现在我已经安装在“gem install debugger-linecache -v '1.1.2'”并且仍然失败不知道该怎么做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:35:37.293

在您的服务器上执行以下操作：

```
gem install debugger-linecache -v '1.1.2' -- --with-ruby-include=$rvm_path/src/ruby-1.9.3-p392/ 
```

**注意：**如果您不使用**rvm**，请将**--with-ruby-include**更改为正确的 ruby​​ 源代码路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T15:10:26.390

好的，经过长时间的搜索发现你需要安装 ruby​​-debug-base19 gem 来获得一些我现在错过的所有工作的响应

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:21:10.607

我遇到了同样的问题：这就是我解决它的方法

捆绑更新调试器

# c# - 带有 oracle 连接问题的 asp.net

> ID：15201716
> 
> 赞同：2
> 
> 时间：2013-03-04T12:33:44.730
> 
> 标签：c#, asp.net, oracle11g, database-connection

我正在尝试使用以下代码使用 oracle 作为数据库添加参数：

```
for (int i = 1; i <= count; i++)
{
    var parameterName = ":ref_cur" + i;
    DbParameter parameter = Acidaes.Data.DbHelper.CreateRefCursorParameter(
        parameterName, 
        ParameterDirection.Output);
    command.Parameters.Add(parameter);
} 
```

添加参数时发生以下崩溃

> [A]Oracle.DataAccess.Client.OracleParameter 无法转换为 [B]Oracle.DataAccess.Client.OracleParameter。类型 A 源自位置“C:\WINDOWS\assembly\GAC_32\Oracle.DataAccess\2.112.2.0__89b483f429c47342\ Oracle.DataAccess.dll'。类型 B 源自 'Oracle.DataAccess, Version=4.112.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342' 在位置 'C:\WINDOWS\Microsoft.Net\assembly\GAC_32\Oracle.DataAccess\v4 的上下文'Default'中.0_4.112.2.0__89b483f429c47342\Oracle.DataAccess.dll'。

没有找到解决此崩溃的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:37:12.113

您需要检查您的参考资料，您正在查看的版本不匹配：

```
DbParameter parameter = 
 Acidaes.Data.DbHelper.CreateRefCursorParameter(parameterName, ParameterDirection.Output); 
```

`DbParameter`您的代码中引用的类型（在这种情况下为版本）与您的`DbHelper`类返回的类型不同。您将需要更新这两个项目以引用相同版本的`Oracle.DataAccess`.

# c# - 控制器在 MVC3 中需要小写

> ID：15201720
> 
> 赞同：-2
> 
> 时间：2013-03-04T12:34:04.063
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我在 MVC 项目中添加了一个名为“ListController”的新控制器

如果我在浏览器网址中编写`http://localhost:1509/list`一切正常

但是，如果我在浏览器 URL 中编写，`"http://localhost:1509/List"`我会得到 Erorr 页面

唯一的区别是 URL 中的字母 L 是大写还是小写

是什么原因造成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:17:17.360

要么在你不知道的情况下在 global.asax 文件中配置了区分大小写的路由，要么你遗漏了一些东西。

默认情况下，Asp.net mvc 路由 url 不区分大小写。就 mvc 路由引擎而言，“home”、“HOME”、“hOmE”等都完全相同。

这是 ScottGu 解释 Asp.Net MVC url 路由规则如何工作的 url。

[ScottGu - ASP.Net MVC 框架：URL 路由](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)

# linux - 用于访问表内容的 OpenOffice 宏

> ID：15201721
> 
> 赞同：2
> 
> 时间：2013-03-04T12:34:07.240
> 
> 标签：linux, macros, openoffice-writer, openoffice-basic

我编写了一个宏，它应该将两个日期（dd.mm.yyyy）作为一个字符串从 OpenOffice 文档（Writer，而不是 Calc）中的表中获取。这两个日期应该合并到这个：ddmmyyyy-ddmmyyyy。这应该用作文件名。

该表只有一行 6 列，第一个日期在 table2:D1:D1 中，第二个在 table2:F1:F1 中。我将其“翻译”为 table2(1, 4) 和 table2(1, 6)

[这个德国网站](http://www.ooowiki.de/FeldinhaltAlsDateiname)正在做我想做的事情，但使用的是 OOCalc 文档中的电子表格，而不是 OOWriter。

废话不多说，这是我的代码：

```
sub save
  oDoc=thisComponent

  sStartDate = oDoc.Table2(1, 4)
  sEndDate = oDoc.Table2(1, 6))

  sFilename = sStartDate.String & sEndDate.String

  sURL = ConvertToURL("file:///home/cp/Documents/" & sFilename & ".odt")

  msgbox sURL
  ' oDoc.StoreAsURL(sURL, Array())

end sub 
```

是的，我运行linux，所以路径应该是正确的。当我尝试运行此脚本时，它说：

```
Property or Method not found table2 
```

我当然尝试了谷歌，但不知何故我找不到解决方案。一个正确方向的提示就足够了，我也猜想我必须写“更多”：

```
sStartDate = oDoc.getString(table2(1, 4)) 
```

或类似的东西。也没有工作。我尝试的另一件事是使用 (0, 3) 而不是 (1, 4)。

好吧，如果有人可以帮助我，我将不胜感激！:) 我希望我已经按照我在这里发布的方式正确地完成了所有事情。

韦洛

[编辑：根据在第14.9](http://www.pitonyak.org/book/)章中找到的 PDF，我现在已将脚本修改为此。

现在看起来是这样的，

```
 sub save

  oDoc=thisComponent
  Dim oTable
  Dim sTableName As String  

  sTableName = "Table2"

  oTable = oDoc.getTextTables().getByName(sTableName)
  ' oTable = oTables.getByName(sTableName)

 sStartDate = oTable.getCellByPosition(0, 3)
 sEndDate = oTable.getCellByPosition(0, 5)

 sFilename = sStartDate.String & sEndDate.String

 sURL = ConvertToURL("file:///home/cp/Documents/" & sFilename & ".odt")

 msgbox sURL
 ' oDoc.StoreAsURL(sURL, Array())

 end sub 
```

但是，仍然无法正常工作。现在我得到了这个异常IndexOutOfBoundsException。（我想链接它，但它说，我不能发布超过 2 个链接 :-( ）

我的第一个想法是我必须将 cels 更改为 0、3 和 0、5。更改后，错误仍然存​​在。:-(

Edit2：由于我没有得到回应，我想我会在 Python 中尝试这个，也许它会产生更好的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-17T18:17:48.793

此代码演示如何定位具有给定名称的文本表以及如何访问单个单元格。

```
function get_table_by_name(name as string) as object
    dim oenum as object
    dim oelem as object

    oenum = thisComponent.text.createEnumeration
    while oenum.hasMoreelements
        oelem = oenum.nextElement
        if oelem.supportsService("com.sun.star.text.TextTable") then
            if oelem.Name = name then
                get_table_by_name = oelem
                exit function
            end if
        end if
    wend
end function

Sub Main
    dim table as object

    table = get_table_by_name("Table1")
    if not isNull(table) then
        msgbox "Got " & table.Name & " " & table.getRows().getCount() & "x" & table.getColumns().getCount()
        msgbox "Cell[0,0] is " & table.getCellByPosition(0, 0).getString()
    end if
End Sub 
```

# node.js - 如何将变量传递给 ejs.compile

> ID：15201724
> 
> 赞同：10
> 
> 时间：2013-03-04T12:34:13.263
> 
> 标签：node.js, ejs

我的 bottom_index.ejs 看起来像这样：

```
<div>The bottom section</div> 
```

在我的代码中，我声明了 ejs：

```
ejs = require('ejs'); 
```

然后编译函数：

```
var botom_index_ejs =
ejs.compile(fs.readFileSync(__dirname + "/../views/bottom_index.ejs", 'utf8')); 
```

然后调用它来获取渲染的html：

```
botom_index_ejs() 
```

它工作正常！

现在我想将我的模板更改为：

```
<div><%= bottom_text %></div> 
```

并能够将参数（bottom_text）传递给bottom_index.ejs

我应该如何传递参数？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T14:48:14.233

参数作为 JS 普通对象传递给 EJS 模板。对于您的示例，它应该是：

```
botom_index_ejs({ bottom_text : 'The bottom section' }); 
```

**更新：**

测试.js

```
var fs = require('fs');
var ejs = require('ejs');
var compiled = ejs.compile(fs.readFileSync(__dirname + '/test.ejs', 'utf8'));
var html = compiled({ title : 'EJS', text : 'Hello, World!' });
console.log(html); 
```

测试.ejs

```
<html>
    <head>
        <title><%= title %></title>
    </head>
    <body>
        <p><%= text %></p>
    </body>
</html> 
```

# linux - 通过 SSH 在端口 8080 上的 HTTP XML 数据

> ID：15201732
> 
> 赞同：0
> 
> 时间：2013-03-04T12:34:30.890
> 
> 标签：linux, web-services, http, ssh

我已经部署了一个 Web 服务，它应该在端口 8080 上接收 XML 数据。另一个服务正在从远程主机推送这些数据。但至于我的服务器，它只有一个本地 IP 地址。我只能从外部使用 ssh 访问它。当我问管理员时，他说HTTP数据推送应该通过ssh隧道完成。问题是 - 怎么可能？如何配置本地服务器以通过 SSH 使用 HTTP 接收 XML 数据？这样做的常见方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:45:43.137

从发件人试试这个：

```
ssh <ssh_username>@<yourserverip> -L 7070:localhost:8080 -N 
```

然后，如果您将 XML 数据发送到“localhost:7070”，数据将被重定向到“yourserverip”的端口 8080。如果您的服务器运行了 SSH 守护程序，则服务器端无需执行任何操作。

更多信息： http: [//www.debianadmin.com/howto-use-ssh-local-and-remote-port-forwarding.html](http://www.debianadmin.com/howto-use-ssh-local-and-remote-port-forwarding.html)

# xml - W3C xml 获取具有命名空间和没有命名空间的元素

> ID：15201736
> 
> 赞同：0
> 
> 时间：2013-03-04T12:34:54.280
> 
> 标签：xml, xml-namespaces, w3c

我有一个如下所示的 XML，

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
 <Entities xmlns="sample">
  <Entity>
    sample Value
   </Entity>
   <ns1:Entity xmlns:ns1="sample">
     sample Value
   </ns1:Entity>
 </Entities> 
```

我用的时候`nodeElement.getNodeName();`，只能`<Entity>`拿不到`<ns1:Entity>`。
我验证[了这篇文章](https://stackoverflow.com/questions/13882433/java-getnodename-and-namespaces)并尝试`getLocalName()`了而不是`getNodeName()`. 它不工作。此外，当我尝试使用时`getElementByTagNameNS("Entity","sample")`，该 `getLength()`方法返回 0。

**更新：**

正如下面的答案中提到的，我交换了`getElementByTagNameNS`. 我看到了一个使用选项，`getElementByTagNameNS("*","Entity")`它允许我不在代码中对命名空间进行硬编码。现在想知道，使用`*`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:52:47.600

`getElementByTagNameNS("Entity","sample")`应该是`getElementsByTagNameNS("sample","Entity")`，即命名空间名称位于本地名称之前。

您在尝试获取时可能犯了类似的错误，`nodeElement.getNodeName()`但您没有发布相关代码。

# python - Django 和 wkhtmltopdf 在 Python shell 中运行良好，但在 URL 中运行良好

> ID：15201738
> 
> 赞同：1
> 
> 时间：2013-03-04T12:35:02.780
> 
> 标签：python, django, wkhtmltopdf

```
call([WKHTMLTOPDF_COMMAND_PATH, html_file_url, pdf_file_path]) 
```

从 python shell 运行时，上述命令会在指定位置生成 pdf。但是当来自 URL 时，会卡住，如下所示

```
Loading pages (1/6)            10% 
```

# c# - 如何将参数设置为 app.config 文件

> ID：15201740
> 
> 赞同：-2
> 
> 时间：2013-03-04T12:35:08.767
> 
> 标签：c#

1.  我想以编程方式为我自己的 App.Config 文件设置一些参数？

我为 1 个问题尝试了以下代码，但它不起作用。

```
Configuration config = 
    ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);

config.AppSettings.Settings.Add("param1", "value1");

config.Save(ConfigurationSaveMode.Minimal); 
```

我的第二个问题是

如果可以，我可以访问和更新其他项目的 App.Config 文件吗？请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:45:42.043

这段代码非常适合我。查看应用程序的 Debug 或 Release 文件夹并查看 yourProjectName.Exe.Config 文件。Application.ExecutablePath 就是其中之一。

# php - Zend / Apache2：多次请求url时发现302

> ID：15201741
> 
> 赞同：8
> 
> 时间：2013-03-04T12:35:08.897
> 
> 标签：php, mysql, api, zend-framework, apache2

我正在使用**Zend 框架编写****REST API**。 当多次调用 url 时（例如 1000 次，每秒 1 个请求），在大约**0.2%**的情况下，我没有得到响应- 所以重定向到不同的页面。 这是整个服务器响应： ******`200 OK`****`302 Found`****** 

 ****```
302 Found Date: Mon, 04 Mar 2013 11:56:04 GMT
Server: Apache/2.2.17 (Ubuntu)
X-Powered-By: PHP/5.3.5-1ubuntu7.11
Set-Cookie: PHPSESSID=ui9r8jqa63dbom8osknso6eea5; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Location: /de/default/index/index/error/500
Vary: Accept-Encoding
Content-Length: 0
Content-Type: text/html; charset=utf-8 
```

因此 Zend 重定向到**错误 500**（内部服务器错误）页面。问题是**为什么**-我只是想不通...
被调用的php页面将**一行插入MySQL数据库**并返回一个JSON字符串-仅此而已。

**Apache2**打开了大约**20 个并发连接**，服务器负载 <<1 所以我真的不明白为什么请求会导致问题。

**我知道这是远程诊断的一个非常困难的问题，但是非常欢迎对如何解决这个问题提出好的猜测和建议！谢谢。**

这是@chris 要求的 apache vhost 配置：

```
<IfModule mod_ssl.c>
<VirtualHost mydomain.tld:443>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    ServerName www.mydomain.tld
    ServerAlias mydomain.tld *.mydomain.tld
    <Directory />
        Options FollowSymLinks
        AllowOverride All
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog /var/log/apache2/ssl_access.log combined

#   RewriteLog "/var/log/htaccess.log"
#   RewriteLogLevel 5

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

    #   SSL Engine Switch:
    #   Enable/Disable SSL for this virtual host.
    SSLEngine on
    SSLOptions +StrictRequire
    SSLCertificateFile /etc/apache2/ssl/cert_2013_2014.crt
    SSLCertificateKeyFile /etc/apache2/ssl/www.mydomain.tld.key
    SSLCACertificateFile /etc/apache2/ssl/intermediate.crt

</VirtualHost>
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T16:03:41.463

这在我看来非常简单直接。这是一个 302 重定向，我想不出 ZF 中有任何东西可以自行重定向；特别是不要出现 500 错误页面。500 错误（内部服务器错误）必须始终返回 500 错误，并且永远不应该是 302 重定向。所以你在这里有点幸运，因为**你的 RETS API**中必须有一些错误处理，这会导致某处重定向（而不是常规错误页面）。

在您的代码中搜索重定向。可以使用 ZF 重定向器助手（在控制器内）或手动（在任何地方）使用 header() 和 exit() 来完成。当您找到重定向时，显示（退出）带有 debug_backtrace 或将其转储到日志文件中。并修复返回码或错误处理方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:58:03.037

> 请注意，当您指定一个指向远程 URL 的 ErrorDocument（即前面带有 http 之类的方法的任何内容）时，Apache 将向客户端发送重定向以告诉它在哪里可以找到文档，即使文档最终在同一台服务器上。

[http://httpd.apache.org/docs/2.2/mod/core.html#errordocument](http://httpd.apache.org/docs/2.2/mod/core.html#errordocument)

我假设`ErrorDocument`您在您的 Apache HTTP 服务器配置中使用该指令，该指令将按照 500 错误的配置执行。

500 错误可以由 PHP 本身触发。要了解发生了什么，您需要查看服务器错误日志以及 php 错误日志（并自然为此启用 PHP 错误日志记录）。

或者就像我通常写的那样：

> *500 内部服务器错误*始终***是***查看服务器错误日志的邀请。它包含更多信息。由于这是 PHP，也很有可能是因为*PHP 中的致命错误*，因此确保启用 PHP 错误日志并查看 PHP 错误日志也非常有用。[有关 500 内部服务器错误的更多信息](https://stackoverflow.com/a/13940190/367456)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T16:38:43.490

如果没有有关您的应用程序的更多详细信息，则很难猜测。我的猜测是您的一项服务（很可能是数据库）在流量和 I/O 增加的情况下会变慢。因此，某些 PHP 连接可能会超时。这会导致应用程序错误并重定向到错误页面。

取决于您的应用程序在记录内部问题方面的表现如何，`logs/application.log`但默认情况下，记录内容并不是很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T21:20:20.970

哇 - 这是一个完全出乎意料的问题，真的很难弄清楚......

@AdrianWorld 帮助我走上正轨。在 Zend ErrorController 中，我输出错误消息并发现以下异常：

```
ps_files_cleanup_dir: opendir(/var/lib/php5) failed: Permission denied (13) Array 
```

[这显然是一个很常见的问题，正如这里](http://somethingemporium.com/2007/06/obscure-error-with-php5-on-debian-ubuntu-session-phpini-garbage)描述和解决的那样。
该变量`session.gc_probability`设置为`1`，`php.ini`这意味着垃圾收集器有 1% 的概率运行并清理`/var/lib/php5`存储 php 会话的目录。`www-data`显然，由于导致上述错误并抛出 Zend 异常，该文件夹不可写。

由于`session.gc_probability`仅设置错误随机发生的概率，因此调试非常困难。

无论如何，我很高兴它已解决 - 感谢所有提示和猜测:)****

# vim - 将一组线应用于模板

> ID：15201743
> 
> 赞同：1
> 
> 时间：2013-03-04T12:35:13.513
> 
> 标签：vim

我想处理一组行并将模板应用于每一行。假设我有以下几行：

```
CASE
ESAC
IF
FI 
```

我想得到以下输出：

```
<YYINITIAL> {CASE} {
    return new Symbol(sym.CASE);
}

...

<YYINITIAL> {FI} {
    return new Symbol(sym.FI);
} 
```

所以，我想有一个带有正文的模板来申请每一行，如下所示：

```
<YYINITIAL> {###PLACE_HOLDER###} {
    return new Symbol(sym.###PLACE_HOLDER###);
} 
```

并将其应用于每一行。

我的想法是选择行，然后放入寄存器（例如“a”），然后选择将其放入寄存器（“b）的模板并调用生成输出的外部脚本。但是没有运气（不知道如何将寄存器的内容传递给外部脚本）。

欢迎任何其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:43:33.580

这个命令将完成这项工作：

```
:%s/.*/<YYINITIAL> {&} {\r\treturn new Symbol(sym.&);\r}/ 
```

`%`如果您看到选定的行，您可以删除。如果经常使用，您也可以为其创建映射或用户命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:50:30.043

您建议的方法似乎过于复杂，特别是因为您仍然必须将模板扩展逻辑实现为外部脚本。

为什么不简单地将模板定义为`:substitute`命令？！您可以对您的`PLACEHOLDER`via进行模式匹配`/\({pattern}\)/`并将其插入替换文本中，如`\1`,`\2`等（我希望您了解 Vim`:substitute`命令的强大功能；否则，请阅读`:help :s`.

您可以通过多种方式保留和保留您的模板，具体取决于您需要它们的频率/时间：

1.  就在命令行历史 ( `:s<Up>`)
2.  保存在命名寄存器 ( `:let @a = @:`) 中，执行`:@a`
3.  保存在 Vim 脚本`:source`中
4.  `:command`用s编写一个自定义插件

# javascript - 如果css有样式，jquery addClass to element

> ID：15201745
> 
> 赞同：0
> 
> 时间：2013-03-04T12:35:30.957
> 
> 标签：javascript, jquery, css

请看下面的问题和答案，第二个答案（有很多赞成票） [Jquery: How to check if the element has certain css class/style](https://stackoverflow.com/questions/759631/jquery-how-to-check-if-the-element-has-certain-css-class-style)

看起来像这样：

```
if ($('#yourElement').css('position') == 'absolute') {
    // true
} 
```

所以这太棒了，但我想要类似的东西

```
if ($('#yourElement').css('position') == 'absolute') {
    $(this).addClass('xxx');
} 
```

因此 ID 为“yourElement”的元素添加了一个类

最简单的方法是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:40:20.893

你可以这样做：

```
$('#yourElement').addClass(function(index, currentClass) {
    return $(this).css('position') == 'absolute' ? 'xxx' : '';
}); 
```

有关语法的更多信息，请查看[API for`.addClass()`](http://api.jquery.com/addClass/) .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:37:16.677

赋值`$('#yourElement')`给一个变量。然后对该变量执行检查并将类也添加到其中。这只是节省了使用`$()`示例中的函数对 DOM 进行的查询次数，并且可能需要进一步的操作。

例如：

```
var your_element = $('#yourElement');
if (your_element.css('position') == 'absolute') { your_element.addClass('xxx'); } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T12:39:30.577

```
var yourElement = $('#yourElement');    
if (yourElement.css('position') == 'absolute') {
        yourElement.addClass('xxx');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T12:39:52.727

```
// Cache your element first
var $element = $('#yourElement');

if ($element.css('position') == 'absolute') {
    $element.addClass('xxx');
} 
```

# c# - 如何在第一次请求发生之前初始化 WCF 服务？

> ID：15201752
> 
> 赞同：1
> 
> 时间：2013-03-04T12:35:49.097
> 
> 标签：c#, .net, wcf, iis

我有一个 WCF 服务，它使用位于数据库中的各种配置参数，以及一个缓存以获得更好的性能。现在我有一个单例，它保存这些信息，并在第一次调用 Web 服务时以延迟加载行为进行初始化。

缓存最近被扩展，因此初始化需要一些时间，当然会导致第一个服务请求的响应时间更长。

那么在第一次调用发生之前（可能在应用程序池启动时）对服务进行某种急切加载初始化的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:40:13.517

不要在 asp.net 应用程序中托管服务，而是在 IIS 中使用自托管进程（即控制台应用程序）或（甚至更好）WAS（Windows 激活服务）服务。

这更可靠，您可以在第一次客户调用之前初始化服务。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms733109.aspx)。

# c# - 在 ascx.cs 中转换为大写

> ID：15201754
> 
> 赞同：-1
> 
> 时间：2013-03-04T12:36:00.290
> 
> 标签：c#, asp.net, uppercase

我目前有以下代码将姓氏的第一个字母转换为大写；

```
static string UppercaseFirst(string s)
{
    if (string.IsNullOrEmpty(s))
    {
        return string.Empty;
    }
    char[] a = s.ToCharArray();
    a[0] = char.ToUpper(a[0]);
    return new string(a);
} 
```

我现在想编辑它，以便将姓氏中的所有字母都更改为大写。应该是一个简单的，但我的 ascx.cs 知识是可怕的！：） 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:38:23.350

尝试或，等[`return s.ToUpper();`](http://msdn.microsoft.com/en-gb/library/ewdd6aed.aspx)的变体。[`ToUpperInvariant()`](http://msdn.microsoft.com/en-gb/library/system.string.toupperinvariant.aspx)

根据您的要求，有多种方法可以做到“文化安全”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:40:33.070

试试这个

```
static string UppercaseFirst(string s)
{
    return s.ToUpper();
} 
```

# php - 我在使用 Curl 和 SSL 证书时出错

> ID：15201755
> 
> 赞同：3
> 
> 时间：2013-03-04T12:36:00.560
> 
> 标签：php, ssl, curl

我有一个问题。当您向 HTTPS 发送带有 CURL 库的 POST 请求时，收到错误：**SSL 证书问题，请验证 CA 证书是否正常。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败。**使用当前证书。[我尝试了来自http://www.startssl.com/certs/](http://www.startssl.com/certs/)和 FROM [http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)的各种证书 告诉我错误的原因可能是什么？这是 POST 请求的代码：

```
 curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent);
    curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
    curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
    curl_setopt($process, CURLOPT_ENCODING , '');
    curl_setopt($process, CURLOPT_CONNECTTIMEOUT, 120); 
    curl_setopt($process, CURLOPT_TIMEOUT, 120);
    curl_setopt($process, CURLOPT_PROXY,$this->proxy);
    curl_setopt($process, CURLOPT_POSTFIELDS, $data);
    curl_setopt($process, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($process, CURLOPT_POST, 1);
    curl_setopt($process,CURLOPT_VERBOSE,1);

    if($ssl){
        curl_setopt ($process, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt ($process, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($process ,CURLOPT_CAINFO, YiiBase::getPathOfAlias('webroot').'/files/GTECyberTrustGlobalRoot.crt');
    }
    curl_setopt ($process, CURLOPT_HTTPHEADER, array('Expect:'));
    $return = curl_exec($process);

    $this->error_code = curl_getinfo($process,  CURLINFO_HTTP_CODE); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T13:12:31.407

这是一个工作示例。您应该查看您的选项（减少测试选项的数量）并将其设置`CURLOPT_SSL_VERIFYPEER`为 false 以禁用 CA 检查。

```
// connect via SSL, but don't check cert
$handle=curl_init('https://www.google.com');
curl_setopt($handle, CURLOPT_VERBOSE, true);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);
$content = curl_exec($handle);

echo $content; // show target page 
```

检查[这里](http://codepad.viper-7.com/qmcpKV)

# apache - 构建 apache 1.3 模块（特别是 mod_rewrite 和 mod_alias）

> ID：15201756
> 
> 赞同：1
> 
> 时间：2013-03-04T12:36:09.863
> 
> 标签：apache, compilation, apache-modules

出于学习目的，我必须安装 1.3 版本的 apache 网络服务器。问题是我不知道如何构建模块，而且在安装目录中我看不到任何“模块”文件夹。

我想用我需要的一些模块重新编译和重新安装服务器，比如 mod_rewrite（支持 LDAP）和 mod_alias...你能告诉我怎么做吗？

不幸的是，文档主要针对 2.x 版本...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:46:52.463

当您运行 ./configure 时，您可以使用 --enable-module 和 enable-sahre 启用模块，例如：

```
./configure --enable-module=rewrite --enable-shared=rewrite 
```

有关 apache 附带的模块的完整列表，请查看配置帮助

```
./configure --help 
```

此外，如果您尝试在现代 linux 系统上编译 apache，这篇博文提供了一些有用的建议。 [http://www.cambus.net/compiling-apache-1.3.x-on-modern-linux-distributions/](http://www.cambus.net/compiling-apache-1.3.x-on-modern-linux-distributions/)

# embedded - 交叉编译手臂目标时出现 Imlib2 错误

> ID：15201757
> 
> 赞同：1
> 
> 时间：2013-03-04T12:36:10.757
> 
> 标签：embedded, arm, x11, cross-compiling, embedded-linux

我正在尝试将 x11 移植到 arm 处理器。所以我将 Imlib2 库用于 jpeg 图片。我已经成功地将带有 x windows 的 Imlib2 库交叉编译到 arm。我的示例程序也成功构建。但是当我运行二进制 jpeg 时显示不正确。（它显示图像上传错误）；

#

```
include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <X11/Xlib.h>
#include <Imlib2.h>
int main(int argc, char **argv)
{
    Imlib_Image img;
    Display *dpy;
    Pixmap pix;
    Window root;
    Screen *scn;
    int width, height;
    const char *filename = NULL;

    if (argc < 2)
        return 0;
    filename = argv[1];

    img = imlib_load_image(filename);
    printf("img values %x",img);

    if (!img) {
        fprintf(stderr, "%s:Unable to load image\n", filename);
        return 0;
    }
    imlib_context_set_image(img);
    width = imlib_image_get_width();
    height = imlib_image_get_height();

    dpy = XOpenDisplay(NULL);
    if (!dpy)
        return 0;
    scn = DefaultScreenOfDisplay(dpy);
    root = DefaultRootWindow(dpy);

    pix = XCreatePixmap(dpy, root, width, height,
        DefaultDepthOfScreen(scn));
printf("caal");
    imlib_context_set_display(dpy);
    imlib_context_set_visual(DefaultVisualOfScreen(scn));
    imlib_context_set_colormap(DefaultColormapOfScreen(scn));
    imlib_context_set_drawable(pix);

    imlib_render_image_on_drawable(0, 0);

    Window w = XCreateSimpleWindow(dpy, root, 0, 0, width, height, 0, None, None);
    XSelectInput(dpy, w, ExposureMask); 
    XMapWindow(dpy, w);
    //XCopyPlane(dpy, pix, w, gc, 0, 0, width, height, 0, 0, DefaultDepthOfScreen(scn));
    XFlush(dpy);

    XSetWindowBackgroundPixmap(dpy, w, pix);
    XClearWindow(dpy, root);

    XEvent ev;
    while (XNextEvent(dpy, &ev)) { 

        if( ev.type == Expose )
        {
            //XCopyPlane(dpy, pix, w, gc, 0, 0, width, height, 0, 0, DefaultDepthOfScreen(scn));
            printf("Expose called\n");
        }
    }
    sleep(20);

    XFreePixmap(dpy, pix);
    imlib_free_image();
    XCloseDisplay(dpy);
    return 0;

    fprintf(stderr, "usage: %s <image_file>\n", argv[0]);
    return 1;
} 
```

# tridion - XPM / UI：使用复制的组件基于页面类型创建新页面

> ID：15201761
> 
> 赞同：4
> 
> 时间：2013-03-04T12:36:34.267
> 
> 标签：tridion, tridion-2011, experience-manager

我这次关于 XPM 的问题比较简单。这是关于创建页面类型，编辑可以使用它来建立他们的新网站页面。定义页面类型时，您可以使用现有页面将其作为示例页面启用，包括其组件。您可以复制这些组件以使编辑者能够自由地编辑这些组件，而无需篡改使用这些组件的现有页面。在 SDL Live 内容文档中，他们解释了以下内容：

> 将设置从包含此组件演示文稿更改为包含包含此组件副本的组件演示文稿。如果您在此页面上的多个组件演示中使用此组件，则保存页面会导致所有这些组件演示具有您上次为任何这些组件演示配置的设置。出现了许多新控件。

这意味着每当编辑器在 XPM 中单击“新页面”时，此页面类型可用，并且其中定义的组件将使用用户特定的前缀进行复制。您可以在定义为页面类型本身的页面内定义它，方法是单击组件演示选项卡，然后单击组件并选择页面类型设置。请注意以下事项：

[![](../Images/cf9e5901ed86aea0b9bf6d12034d508a.png "由 imgur.com 主办")](https://imgur.com/QzIifUe)

如您所见，内容的副本是在 050 - Web - Global 中创建的，在我们的蓝图中，这是错误的发布。但是，在弹出窗口中，您无法选择正确的内容位置，只能选择页面类型所在的位置。

我已经对此进行了测试，还使用了特定于 UI 的蓝图上下文设置，您*应该*在其中定义创建内容和页面的位置。但是，在创建新页面时，组件会复制到 050 - web - global 内部；错误的出版物。当我们进行培训时，我想像这样动态创建的组件可能会在错误位置的内容中阻塞 CMS，使其无法用于其他出版物。这种行为是否有原因，如果有，是否有办法使其正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:10:57.253

如果您将组件的 BluePrint 上下文设置为您希望在其中创建它们的出版物，它应该可以按预期工作。

# java - IntelliJ 无法识别 PATH 变量

> ID：15201763
> 
> 赞同：16
> 
> 时间：2013-03-04T12:36:46.447
> 
> 标签：java, shell, path, intellij-idea, environment-variables

我最近尝试导入一个现有的 Gradle 项目，使用启动窗口中的“打开项目”选项和现有的 build.gradle 文件来自动设置项目。

就在我这样做之后，IntelliJ 中出现了一条错误消息，说：

> 无法使用 Gradle 安装“/Users/myUser/Tools/gradle-1.3”获取“BasicIdeaProject”类型的模型。构建文件“/Users/myUser/IdeaProjects/myProject/database/build.gradle”行：20 评估项目“：数据库”时出现问题。评估项目“：数据库”时出现问题。在 PATH 中找不到“播放”命令。确保您已安装 Play Framework 2.0 并在您的路径中

看起来，IntelliJ 抱怨我没有将播放框架添加到我的 PATH 变量中。尽管 shell 的输出说明了某事。别的：

```
echo $PATH; 
/usr/local/bin:/Users/myUser/Library/Ruby/Gems/1.8/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/Users/myUser/.yadr/bin:/Users/myUser/.yadr/bin/yadr:/Users/myUser/Tools/gradle/bin:/usr/local/Cellar/mongodb/2.2.2-x86_64//bin:/Users/myUser/Tools/groovy/bin:/Users/myUser/Tools/play-2.0 
```

我还编写了一个简单的类来显示 IntelliJ 使用的 PATH 变量：

```
public class Playground {

    public static void main(String[] args) {

        System.out.println( System.getenv( "PATH" ));
    }
} 
```

当我运行这个类时，它给了我以下输出：

```
/usr/bin:/bin:/usr/sbin:/sbin 
```

看起来，IntelliJ 完全忽略了 shell 中设置的 PATH 变量。所以我想知道如何操作/配置 IntelliJ 来识别这个 PATH 变量？

我使用的外壳是 zsh。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T12:43:20.960

检查这篇文章：[http](http://emmanuelbernard.com/blog/2012/05/09/setting-global-variables-intellij/) ://emmanuelbernard.com/blog/2012/05/09/setting-global-variables-intellij/问题是IDEA不读取您的`.zshrc`文件并且不知道播放路径。尝试在 IDEA 设置中手动设置 PATH 变量。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-10T13:41:43.937

您实际上可以从命令行在 mac 上使用“open -a [IntelliJ App]”，它应该为您的 .bash_profile 和/或 .zshrc 获取路径变量 - 比剪切和粘贴到 IntelliJ IMO 更好。如果我没记错的话，似乎只是一个mac问题。

# php - Yii 复合主键与 isNewRecord

> ID：15201769
> 
> 赞同：7
> 
> 时间：2013-03-04T12:37:06.770
> 
> 标签：php, mysql, yii

我有一个带有复合键（ user_id ， category_id ）的 mysql 表；我正在尝试更新这些记录的最后访问权限，如下所示

```
$userCategory = new UserCategory;
$userCategory->user_id = 1;
$userCategory->category_id = 15;
echo $userCategory->isNewRecord; //always true
$userCategory->last_access = Now();

$userCategory->save(); 
```

{$userCategory->isNewRecord} 当我尝试 save() 时，MySQL 会为复合主键生成重复错误。

我也将此添加到 UserCategory 模型中，但没有帮助

```
public function primaryKey() {
        return array('user_id', 'category_id');
    } 
```

****更新：很抱歉造成混乱。我的问题是如何在 Yii 框架中实现与“ON DUPLICATE KEY UPDATE”相同的结果。换句话说，如何在一个 SQL 查询中进行插入或更新。如果您查看[save()的源代码](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#save-detail)

```
public function save($runValidation=true,$attributes=null)
{
    if(!$runValidation || $this->validate($attributes))
        //checking if new record
        return $this->getIsNewRecord() ? $this->insert($attributes) : $this->update($attributes);**
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T20:54:53.320

实际上，问题在于 if`isNewRecord`始终为真，这意味着 Yii 在将模型保存到数据库时将使用`INSERT`语句而不是`UPDATE`语句。这就是为什么你总是会得到重复的 pk 错误，即使它是复合的。

[**这**](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#getIsNewRecord-detail)是关于`IsNewRecord`. 所以，问题是你正在使用

```
$userCategory = new UserCategory; //Always a new record, tries to INSERT 
```

因此，要解决此问题，您必须找到记录并评估是否在保存之前找到它。也可以[**在此处**](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#find-detail)阅读有关`find()`方法系列及其返回值的文档，find() 方法的返回值在其性质上略有不同：

> find..() 返回找到的记录，或者`NULL`如果没有找到记录。
> 
> findAll..() 返回一个包含所有找到的记录的数组，如果没有找到记录，则返回一个空数组。

您可以使用此返回值来区分主键是否存在：

```
$userCategory = UserCategory::model()->findByAttributes(array('user_id '=>1,'category_id '=>15));
// if user does not exist, you need to create it
if ($userCategory == NULL) {
     $userCategory = new UserCategory;
     $userCategory->user_id = 1;
     $userCategory->category_id = 15;
}
echo $userCategory->isNewRecord; //you will see the difference if it does exist or not exist
$userCategory->last_access = Now();
$userCategory->save(); 
```

这将确保框架正确使用 INSERT 或 UPDATE 语句，避免出现重复的 PK 错误。

**编辑：**增强示例代码以在新记录时正确填充记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:35:27.800

在您的模型中，添加以下方法：

```
/**
* Uses the primary keys set on a new record to either create or update
* a record with those keys to have the last_access value set to the same value
* as the current unsaved model.
*
* Returns the model with the updated last_access. Success can be checked by
* examining the isNewRecord property.
*
* IMPORTANT: This method does not modify the existing model.
**/

public function updateRecord(){
  $model = self::model()->findByPk(array('user_id'=>$this->user_id,'category_id'=>$this->category_id));

  //model is new, so create a copy with the keys set
  if(null === $model){
    //we don't use clone $this as it can leave off behaviors and events
    $model = new self;
    $model->user_id = $this->user_id;
    $model->category_id = $this->category_id;
  }

  //At this point we have a model ready for saving, 
  //and don't care if it is new or not
  $model->last_access = $this->last_access;
  $model->save(false);
  return $model;
} 
```

以上内容的灵感来自一种更通用的方法，我经常使用该方法来执行创建或查找是否已存在的过程。

使用以下代码执行此操作。

```
$userCategory = new UserCategory;
$userCategory->user_id = 1;
$userCategory->category_id = 15;
echo $userCategory->isNewRecord; //always true
$userCategory->last_access = Now();

$userCategory = $userCategory->updateRecord(); 
```

请注意，只有最后一行与您的代码不同。`new UserCategory`声明的模型实例未更改的事实是预期行为。

然后，您可以在代码中验证模型是否使用以下内容保存：

```
if(!$userCategory->isNewRecord){
  echo 'save succeeded';
}
else{
  echo 'save failed';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:59:48.087

在 UserCategory.php 中

```
public function isNewRecord()
{
    $result = $this->findByAttributes(array('user_id'=>$this->user_id,'category_id'=>$this->category_id));
    if($result === NULL)
    {
        return true;
    }
    return false;
} 
```

然后在控制器中

```
$userCategory = new UserCategory;
$userCategory->user_id = 1;
$userCategory->category_id = 15;
echo $userCategory->isNewRecord(); 
---- 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T13:04:18.047

如果您尝试更新，则应加载记录，而不是创建新记录。

```
UserCategory::model()->findByPk(array('user_id'=> 1,'category_id '=> 15));
$userCategory->last_access = Now();
$userCategory->save(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T15:38:20.670

另一种选择是修改模型以更改保存函数的条件，然后调用父保存函数：（此代码进入 UserCategory 模型）

```
public function save($runValidation=true,$attributes=null) {
    $exists = UserCategory::model()->findByAttributes(array('category_id'=>$this->category_id,'user_id'=>$this->user_id));
    if($exists) {
        $this->isNewRecord = false;
    }
    return parent::save($runValidation,$attributes);
} 
```

我刚刚做了一个测试，它似乎工作正常。你应该能够做到这一点：

```
$userCategory = new UserCategory;
$userCategory->user_id = 1;
$userCategory->category_id = 15;
$userCategory->last_access = Now();
$userCategory->save(); 
```

应该根据是否找到记录来插入或更新，因此您不必更改任何其他代码。

# c# - 从 Sqlite 中检索 ulong 导致 NotSupportedException

> ID：15201776
> 
> 赞同：2
> 
> 时间：2013-03-04T12:37:24.990
> 
> 标签：c#, .net, sqlite, ulong

我已经通过控制台应用程序将一些哈希值（如 ulong）保存到 Sqlite 数据库中。现在我想在 Windows 应用商店应用程序中检索这些值，不幸的是我收到 NotSupportedException 说“不知道如何阅读 System.UInt64”。我不能在我的数据库中使用 ulong 值吗？数据库已填充，哈希字段似乎确实是 ulong，至少这是 Database .NET 告诉我的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:02:13.933

SQLite 的整数有 64 位，[但是是有符号的](http://www.sqlite.org/datatype3.html#storageclasses)。

您应该将您的哈希值转换为/从`long`.

# hibernate - 休眠会话模式默认设置为手动

> ID：15201781
> 
> 赞同：1
> 
> 时间：2013-03-04T12:37:37.000
> 
> 标签：hibernate, spring-mvc, hibernate-session

我有简单的 Spring MVC - Hibernate 应用程序，在连接到 MySQL 5.5 数据库时工作正常（插入和读取数据）。在将同一应用程序连接到 Oracle 10g 时，它从数据库中读取记录，但无法插入记录。

在调试时，我发现会话的flushMode 是MANUAL。保存记录后，我显式编写了 session.flush()，代码开始在两个数据库中正常工作。

**我的问题- 正如我从 Hibernate 的**[文档](http://javasourcecode.org/html/open-source/hibernate/hibernate-3.5.6-Final/org/hibernate/FlushMode.html#AUTO)中了解到的那样，默认的刷新模式是 AUTO。我没有在我的代码中将其设置为手动，但不知何故它正在设置。如何控制这个？

我正在使用 Spring 3.1.1 和 Hibernate 3.5.6。下面是我的 root-context.xml 和 servlet-context.xml 文件。

servlet-context.xml：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/views/"/>
    <property name="suffix" value=".jsp"/>
</bean>

<context:component-scan base-package="com.home.cfs"/>

<mvc:annotation-driven/> 
```

根上下文.xml：

```
<bean id="databaseDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <!-- 
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@localhost:1521:testdb"/>
    <property name="username" value="test_usr"/>
    <property name="password" value="test_usr"/>
     -->

    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/person"/>
    <property name="username" value="root"/>
    <property name="password" value="admin"/> 

</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="databaseDataSource"/>
    <property name="packagesToScan" value="com.home.cfs"/>
    <property name="configurationClass" value="org.hibernate.cfg.AnnotationConfiguration"/>
    <property name="hibernateProperties">
        <props>
            <!-- <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop> -->
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.use_sql_comments">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven/>
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

如果需要更多详细信息，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:14:41.690

检查您是否打开了 OpenSessionInViewFilter 过滤器。这似乎是一个可能的罪魁祸首。

# c++ - 当我将一组命令移动到单独的函数中时出现代码段错误

> ID：15201783
> 
> 赞同：0
> 
> 时间：2013-03-04T12:37:45.423
> 
> 标签：c++, segmentation-fault

我正在使用 CLHEP 库，但遇到了一些困难。在进行这些更改之前，我一直在生成一组粒子动量作为 CLHEP 对象的向量 (std::vector)，然后将它们转换为普通数组的向量 - 仍然包含相同的动量 - 以供另一个程序 (MadGraph) 使用。我想把这个转换例程放到一个新函数中，所以我做了这个：

```
std::vector<double*> MadGraphConvert(vector<CLHEP::HepLorentzVector> p) {

double ptemp[6][4];

for (int i = 0; i < 6; i++) {
    ptemp[i][0] = p.at(i).e();
    ptemp[i][1] = p.at(i).x();
    ptemp[i][2] = p.at(i).y();
    ptemp[i][3] = p.at(i).z();
}

// Give particles to MG in a 'vector of arrays' format
std::vector<double*> p_MG;

p_MG.push_back(ptemp[0]);
p_MG.push_back(ptemp[1]);
p_MG.push_back(ptemp[2]);
p_MG.push_back(ptemp[3]);
p_MG.push_back(ptemp[4]);
p_MG.push_back(ptemp[5]);

return p_MG;
} 
```

现在，当我运行我的代码时，其他代码中的某些内容会引发段错误，但我认为我正在传递以前的内容？我的旧转换集如下所示：

```
 p[0][0] = pa.e();
    p[0][1] = pa.x();
    p[0][2] = pa.y();
    p[0][3] = pa.z();

    p[1][0] = pb.e();
    p[1][1] = pb.x();
    p[1][2] = pb.y();
    p[1][3] = pb.z();
.
'
'
    std::vector<double*> p_MG;

    p_MG.push_back(p[0]);
    p_MG.push_back(p[1]);
    p_MG.push_back(p[2]);
    p_MG.push_back(p[3]);
    p_MG.push_back(p[4]);
    p_MG.push_back(p[5]); 
```

如果有人能发现这两种方法的区别在哪里，我将不胜感激！干杯杰克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T12:39:43.193

包含悬空指针，`vector`因为它正在填充来自局部变量数组的地址，当函数返回时，该数组`ptemp`超出范围。`MadGraphConvert()`取消引用悬空指针是*未定义的行为*，在这种情况下，它会导致分段错误。

使用 a`std::vector<std::vector<double>>`代替：

```
std::vector<std::vector<double>> ptemp(6, std::vector<double>(4)); 
```

`for`循环将按原样工作（因为此构造函数创建具有六个元素的s `vector`，每个元素是`vector`四个`double`s 中的另一个）并返回`ptemp`（记住更改 s 的返回值`MadGraphConvert()`）。

* * *

如果，如对此答案的评论，类型更改被禁止，则`double[4]`使用动态分配数组`new`。现在`vector`拥有数组，并且`delete[]`在不再需要时必须使用它们：

```
// In function.
std::vector<double*> ptemp(6); // By default, created with six null pointers.
try
{
    for (size_t i(0), count(ptemp.size()); i < count; i++)
    {
        ptemp[i] = new double[4];
        // Remainder of loop as before.
    }
}
catch (std::exception const&) // std::out_of_range, std::bad_alloc
{
    // Exception safety.
    // delete[] whatever was allocated, remember that
    // delete[] on a null pointer is a no-op so no
    // prior check required.
    for (auto i : ptemp) delete[] i;
    throw;
} 
```

然后返回`ptemp`。稍后，何时`vector`不再需要：

```
// c++11
for (auto i : ptemp) delete[] i;

// c++03
for (std::vector<double*>::iterator i(ptemp.begin());
     i != ptemp.end();
     i++)
{
    delete[] (*i);
} 
```

# javascript - 根据大小将数字动态四舍五入到 n 位小数

> ID：15201784
> 
> 赞同：2
> 
> 时间：2013-03-04T12:37:45.967
> 
> 标签：javascript

我需要一个函数，它接受一个计算值（范围可以从非常小到非常大）并将其四舍五入到小数位以供显示。小数位数应该取决于输入的大小，所以我不能只使用像`.toFixed(n)`因为`n`未知的东西。

我想出了以下方法，但感觉有更好的方法来做到这一点：

```
function format_output(output) {
    if (output > 10000) {
        output = output.toFixed(0);
} else {
        if (output > 100 && output < 10000) {
        output = output.toFixed(1);
    } else {
            if (output>1 && output <100) {
                output = output.toFixed(3);
    } else {
        // repeat as necessary
    }
return output;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:20:02.877

您似乎确实希望将其限制为大约五个精度位置。这可能会更明确地这样做：

```
var toPrecision = function(precision) {
    return function(nbr) {
        if (typeof nbr !== 'number') return 0; //???
        if (nbr === 0) return 0;
        var abs = Math.abs(nbr);
        var sign = nbr / abs;
        nbr = abs;
        var digits = Math.ceil(Math.log(nbr)/Math.LN10);
        var factor = Math.pow(10, precision - digits);
        var result = nbr * factor;
        result = Math.round(result, 0);
        return result / factor;
    };
};

var format_output = toPrecision(5);

format_output(1234567.89012); // 1234600
format_output(987.654321); // 987.65
format_output(-.00246813579); // -0.0024681 
```

当然，如果您愿意，可以将它们组合成一个有两个参数的函数：

```
var toPrecision = function(nbr, precision) {
    if (typeof nbr !== 'number') return 0; //???
    if (nbr === 0) return 0;
    var abs = Math.abs(nbr);
    var sign = nbr / abs;
    nbr = abs;
    var digits = Math.ceil(Math.log(nbr)/Math.LN10);
    var factor = Math.pow(10, precision - digits);
    var result = nbr * factor;
    result = Math.round(result, 0);
    return result / factor;
};

toPrecision(1234567.89012, 5); // 1234600 
```

或者，如果它使您的船漂浮，您可以将其附加到 Math 对象：

```
Math.toPrecision = function(nbr, precision) {
    // ...
} 
```

## 更新（2020 年 5 月）

许多年后，随着 ES6 的普及，我会以不同的方式来写这个。它可能看起来像这样：

```
var toPrecision = (precision) => (nbr, _, __, powerOf10) => 
  nbr === 0
    ? 0
    : (
        powerOf10 = 10 ** (precision - Math .ceil (Math .log10 (Math .abs (nbr)))), 
        Math .round (nbr * powerOf10) / powerOf10
      ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:46:07.687

根据您的要求，您应该研究科学记数法

```
output.toExponential(); 
```

如果您不想使用科学记数法，请尝试以下方法：

```
function format_output(output) {
    var n =  Math.log(output) / Math.LN10;
    var x = 4-n;
    if(x<0)
        x=0;
    output = output.toFixed(x);
    return output;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:59:54.637

您似乎想将该值限制为 5 个有效数字。以下是针对有限范围的值（99999 到 0.00001）执行此操作的，您可以计算出如何为其余的值执行此操作。请注意，某些值在某些旧浏览器中可能存在舍入错误。

```
 <input onchange="
    var bits = this.value.split('.');
    var places = 5 - bits[0].length;

    if (places < 0) {
      places = 0;

    } else if (bits[0] == 0) {
      places = 5;
    }
    this.value = Number(this.value).toFixed(places); 
  "> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-08T16:51:52.990

这是我在尝试解决相同问题时提出的一种方法，即如何动态舍入以便向最终用户呈现非常大和非常小的数字。

```
function get_exponent_value(num){
     value = num.toExponential();
     string_e_value = value.split('e')[1];
     return parseInt(string_e_value);
} 
```

这为您提供给定数字的指数值。然后，要使用它，你可以根据这个数字四舍五入：

```
 var EValue = get_exponent_value(val);
 if (EValue <= -1)
       val = float_to_fixed(val, ((EValue * -1) + 3));
 else
       val = float_to_fixed(val); 
```

通过这种方式，它可以为您提供看起来合理的小数字，并从大数字中删除小数。它并不完美，但在我能想到/找到更好的解决方案之前它现在运行良好。

# javascript - 用jquery顺利销毁div

> ID：15201787
> 
> 赞同：0
> 
> 时间：2013-03-04T12:37:55.217
> 
> 标签：javascript, jquery, html, animation

我一直在寻找这个但我没有找到它，我在表 tds 中有 2 个 div：

```
 __________ __________
|         | |         |
|  Div 1  | |  Div 2  |
|         | |         |
|_________| |_________| 
```

我是在淡出内容的同时减小 div1 的宽度并在最后销毁它，然后我想让它重新出现在 div2 中，这样我就可以对不同的内容进行 css 处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:41:20.977

您可以使用 jQuery 的`animate`功能。

```
$('#div1').stop().animate({
        width:0,
        opacity:0
    }, 1000, function() {
        $(this).remove();
    }); 
```

这首先调用`stop()`停止任何现有的动画。然后它在 1000 毫秒内将元素的宽度和不透明度设置为 0。`remove()`它最终在`#div1`动画完成后调用。

如果您希望它在之后立即重新出现，则`remove()`无需调用。`appendTo()`在这种情况下，您需要使用：

```
...
   }, 1000, function() {
       $(this).appendTo($(this).parent());
       /* Remember that the width and opacity are still 0 here, so you'll need to revert the animation when re-displaying it */
   }); 
```

这假定您的 HTML 标记类似于以下内容：

```
<div>
    <div id="div1"></div>
    <div id="div2"></div>
</div> 
```

这是一个[JSFiddle 演示](http://jsfiddle.net/NQzj4/1/)。

# python - 从文件中写入行

> ID：15201788
> 
> 赞同：1
> 
> 时间：2013-03-04T12:37:56.413
> 
> 标签：python

在此示例中，我在文件中找到一个字符串并将匹配的行写入另一个文件。这是基本的，也是我目前能做的。

```
fd_w = open('tt', 'w')
with open('r.0', 'r') as IRR:
    for line in IRR:
        if 'status: ASSIGNED PA' in line:
            towrite = "%s" % (line)
fd_w.write(towrite)   
fd_w.close() 
```

我真正想做的是，当有匹配行时，获取匹配行之前的行，直到有空格，然后类似地获取匹配行之后的行，直到有空格。

这是正在读取的文件中的示例。

```
admin-c:        DUMY-RIPE
tech-c:         DUMY-RIPE
status:         ASSIGNED PA
mnt-by:         AS6667-MNT

admin-c:        DUMY-RIPE
tech-c:         DUMY-RIPE
status:         ASSIGNED PA
mnt-by:         DATANET-NOC 
```

我一直在试图弄清楚如何定义两个函数，比如在匹配行之后获取上一行和下一行。所以任何想法，任何帮助都是高度恰当的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:49:48.190

读取由空行划定的块中的数据，然后测试您的状态：

```
with open('r.0', 'r') as IRR, open('tt', 'w') as fd_w:
    lines = []
    for line in IRR:
        line = line.strip()
        if line:
            lines.append(line)
        else:
            # empty line, found a complete block, test for status line
            if 'status:         ASSIGNED PA' in lines:
                for line in lines:
                    fd_w.write(line + '\n')
            lines = [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:46:25.713

我会创建一个缓冲区并保留一个变量来判断该缓冲区中是否存在匹配项。

例如，当您开始读取文件时，使用列表启动缓冲区。

将所有内容附加到该列表，直到您获得另一个空格，如果同时找到匹配项，请使用变量来跟踪该事实。

当您最终到达另一个空间时，如果变量为真，则使用该缓冲区做任何您想做的事情，即写入另一个文件。

重置缓冲区，重新开始。

这样做直到文件结束。

# cluster-analysis - MANOVA - 巨大的矩阵

> ID：15201793
> 
> 赞同：0
> 
> 时间：2013-03-04T12:38:03.183
> 
> 标签：cluster-analysis, anova

首先，对不起，标签为“ANOVA”，它是关于 MANOVA（尚未成为标签......）

从我发现的教程中，所有示例都使用小矩阵，对于大矩阵的情况，遵循它们是不可行的，因为这是许多研究的情况。

我为我的 14 个采样点获得了 2 个矩阵，1 个用于生物体 ID（4493 个 ID）和其他化学特征（190 个变量）。

这 2 个矩阵由 spearman 关联，并基于相关性，分成 4 个簇（k 均值关于平方欧几里得聚类值）、行上的 ID 和在线化学概况。

它们之间的差异有些明显，但为了以更稳健的方式进行，我想执行 MANOVA 以显示集群之间和集群内的差异 - 当然，这是得出结论的关键因素。

问题是，经过 8 小时的尝试，甚至无法以分析可接受的格式输入数据。

我发现的教程设计的变量很少，即使我认为我已经克服了这一点，程序说我的矩阵无法通过它们的长度差异进行比较。

每个集群都有自己的一组 ID，共享所有相同的变量集。

我应该怎么办？

提前致谢。

小川大哥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T18:10:56.207

如果您的数据中有缺失值（实际上所有数据集似乎都包含），您可以删除这些观察值，也可以使用这些观察值创建模型。如果您的方法论中的某些内容使您确信这些观察结果有所不同，请使用第一种方法。大多数情况下，最好使用缺失值运行模型。在这种情况下，请使用一般线性模型而不是平衡 ANOVA 模型。平衡模型将与那些缺失的数据作斗争。

# algorithm - 使用有限算术运算符集的 Ceil 函数

> ID：15201796
> 
> 赞同：6
> 
> 时间：2013-03-04T12:38:13.553
> 
> 标签：algorithm, math

`ceil(2.12) = 3`是否可以仅使用几个可用的算术运算来计算上限（例如）：`* - + /` 即没有强制转换和其他软件技巧，只使用除法/mul/sub/addition 和比较运算符？

说明：

*   复杂性很重要，但我很高兴听到任何解决方案。
*   模数不可用。
*   价值观是积极的。
*   运算不是四舍五入的。
*   我所说的软件技巧是指 mod、位级操作等。

基本上我有一个系统，它允许将表达式分配给变量，其中表达式只能包含上述 4 个算术运算、比较和循环。例如

var x = if (A * (1.434 + 0.4325)) > 54.4534) 则为 45.6 否则为 43.435

我想做

变量 x = CEIL(...)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:48:21.760

这是可能的，但不要指望任何惊人的表现。最简单的算法 ( `th(x)`) 是：

```
frac = x;
while(frac<0) frac+=1;
while(frac>=1) frac-=1;

if(frac>0) return x-frac+1;
else return x; 
```

您可以通过二分搜索 ( ) 做得更好`th(log x)`：

```
lower = 0;
upper = 0;
if(x>0){
  upper = 1;
  while (x > upper) upper *= 2;
}else if(x<0){
  lower = -1;
  while (x > lower) lower *= 2;
}

while(upper-lower > 1){
  //mid is guaranteed to be integer, since the upper-lower is a power of two
  mid = (upper+lower)/2; 
  if(x > mid) lower = mid;
  else if(x < mid) upper = mid;
  else return mid;
}

return upper; // lower for floor 
```

# jsp - 如何从 Bean 对象的 ArrayList 中显示 Bean 属性？

> ID：15201801
> 
> 赞同：0
> 
> 时间：2013-03-04T12:38:26.650
> 
> 标签：jsp, struts, jstl

我正在使用struts 1.3。在我的操作类中，我从 DB 访问数据并在 Bean 类对象（每行一个对象）中设置值。最后，我将对象添加到 ArrayList 对象中。现在在我的 jsp 中，我需要显示这些数据（Bean 属性值）。我使用 scriptlet 做到了这一点，它工作正常。但我只想使用标签（按照标准方式推荐）。任何人都可以提供一些想法如何使用`<logic:iterate>`或`<nested:iterate>`任何可以正常工作的方法吗？

这是我的jsp代码：

```
<% AppForm fm; %>
   <% Iterator itr; int i=0;
    ArrayList al=(ArrayList)request.getAttribute("data");
    System.out.println("ArrayList size is..."+al.size());
    if(al!=null)
    {
        for(itr=al.iterator(); itr.hasNext();i++)
        {
           fm=(AppForm)itr.next();
         %>
         <tr  id=i  onclick="toggle(this)" bgcolor="pink">
          <td align="center">
           <%= fm.getRegid() %>
          </td>
          <td align="center">
           <%= fm.getEid() %>
          </td>
          <td align="center">
           <%= fm.getFname() %>
          </td>
          <td align="center">
           <%= fm.getLname() %>
          </td>
          <td align="center">
           <%= fm.getDesignation() %>
          </td>
          <td align="center">
           <%= fm.getEmail() %>
          </td>
          <td align="center">
           <%= fm.getContact() %>
          </td>
          <td align="center">
           <%= fm.getAddress() %>
          </td>
          <td align="center">
           <%= fm.getQualification() %>
          </td>
          <td align="center">
           <%= fm.getJdate() %>
          </td>
          <td align="center">
           <%= fm.getReqdate() %>
          </td>
          <td align="center">
           <%= fm.getIpaddress() %>
          </td>
          <td align="center">
           <input type="radio" name="<%= fm.getEid() %>" value="approved" onclick="this.parentNode.parentNode.bgColor='DarkOliveGreen'"; />
          </td>
          <td align="center">
           <input type="radio" name="<%= fm.getEid() %>" value="rejected" onclick="this.parentNode.parentNode.bgColor='Orchid'"; />
          </td>

    </td>
         </tr> 
         <%
        }
    }
   %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:54:08.947

试试这个

```
<c:forEach var="i" items ="${data}">
  <tr>
     <td>${i.eId}</td>
     <td>${i.lName}</td>
     ....................
  </tr>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:40:17.663

与struts标签相同的版本

```
<logic:iterate id="item" name="data" indexId="idx">
  Row index: <bean:write name="idx"/>
  <bean:write name="item" property="eid"/>
  <bean:write name="item" property="fname"/>
</logic:iterate> 
```

# javascript - 如何确保 JS 匿名对象继续映射到 POCO ViewModels

> ID：15201802
> 
> 赞同：2
> 
> 时间：2013-03-04T12:38:29.543
> 
> 标签：javascript, jquery, asp.net-mvc, unit-testing

我们有一个广泛使用 AJAX 调用的 ASP.NET MVC 应用程序。

这些 AJAX 调用将数据发送到我们的控制器方法——这个控制器方法需要一个参数，它是一个简单的 POCO ViewModel 类。

在我们的 JavaScript 中，我们创建了一个匿名对象，其属性映射到 ViewModel 的属性，MVC 框架处理所有路由，以便在控制器方法中我们获得具有所有属性的 ViewModel。

一切都很好。

我们要做的是采用一种稳健的方式来确保 JavaScript 匿名类和 ViewModel 类保持同步——如果开发人员更改了一个，那么他们就会更改另一个。我们当然可以在两个文件中添加注释说“改变一个，改变另一个”，并且对于未能保持这些同步的开发人员的严重殴打的威胁，但即使有代码审查，这也是一个可能被错过。

拥有某种可以检查这一点的自动化单元测试会很棒，但我不知道如何实现这一点。

有什么建议么？

提前致谢

格里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T20:50:39.510

有一个名为 knockoutjs 的 javascript 库，它完全用于您想要实现的目标。您似乎正在尝试将 MVVM 模式与 ASP.NET MVC 框架一起使用。对于任何 MVVM 模式，使视图模型与视图保持同步是一个常见问题。KnockoutJS 允许您创建直接绑定到视图的 javascript 视图模型客户端。视图更新时视图模型会更新，视图模型更新时视图也会更新。KnockoutJS 使用一种称为观察者模式的通用模式来实现这一点。KnockoutJS 还提供了一个映射插件，因此视图模型可以接收 JSON 格式的服务器端视图模型并更新自身，从而更新视图。这是您正在寻找的功能。该库和映射插件可以在他们的网站上找到，www。淘汰赛.com。仅供参考...这是一个生产级库。他们也有很好的文档和示例。我希望这有帮助。不要重新发明轮子。

# java - 在 TableRow Inflater 中只检查一个单选按钮？

> ID：15201806
> 
> 赞同：1
> 
> 时间：2013-03-04T12:38:49.647
> 
> 标签：java, android, xml, android-tablelayout, android-inflate

我一直试图只选中一个单选按钮，但每次用户都可以选择多个单选按钮。

如何只选中一个或当前选定的单选按钮？

我基本上有一个`TableLayout`从`TableRow`代码中膨胀的 XML 布局。此外，`onClickListener`在 RadioButton 上应用了an ，它`tag`为当前选定的单选按钮获取 。

有人可以帮我解决这个问题吗？

对于参考。我的表格行的 XML 布局：

```
<TableRow xmlns:android="http://schemas.android.com/apk/res/android" 
                        android:id="@+id/tblDynStoreRow"
                        android:layout_margin="0.0dp"
                        android:layout_width="match_parent" >

                        <TextView
                            android:id="@+id/tvStoreCount"
                            android:textSize="10sp"
                            android:layout_width="wrap_content"
                            android:layout_height="12dp"
                            android:singleLine="true"
                            android:scrollHorizontally="true" />

                        <RadioButton
                            android:id="@+id/rb1StoreName"
                            android:textSize="10sp"
                            android:layout_width="wrap_content"
                            android:layout_height="31dp"
                            android:singleLine="true"
                            android:scrollHorizontally="true" />
                    </TableRow> 
```

onCreate() 方法：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_store_selection);

    TableLayout tl = (TableLayout) findViewById(R.id.mainstoretable);
    //RadioButton rb1;

    TextView TVdate = (TextView) findViewById(R.id.textView1_date2);

    Intent getStorei = getIntent();
    // UsrGPSLock = i.getStringExtra("currUsrLat") + "," +
    // i.getStringExtra("currUsrLon");
    uuid = getStorei.getStringExtra("imei").trim();

    userDate = getStorei.getStringExtra("userDate");
    TVdate.setText(userDate);

    /*TelephonyManager tManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    uuid = tManager.getDeviceId();*/

    Button btnStart = (Button)findViewById(R.id.startQues);

    dbengine.open();

    storeList = dbengine.FetchStoreList();

    dbengine.close();

    /*final String[] storeCode = new String[storeList.length];
    final String[] storeName = new String[storeList.length];*/

    storeCode = new String[storeList.length];
    storeName = new String[storeList.length];

    for (int splitval = 0; splitval <= (storeList.length - 1); splitval++) {
        StringTokenizer tokens = new StringTokenizer(String.valueOf(storeList[splitval]), "_");

        storeCode[splitval] = tokens.nextToken().trim();
        storeName[splitval] = tokens.nextToken().trim();

    }

    System.out.println(storeList);

    // Get the TableLayout
    /*TableLayout tl = (TableLayout) findViewById(R.id.maintable);*/

    LayoutInflater inflater = getLayoutInflater();

    // Go through each item in the array

    for (int current = 0; current <= (storeList.length - 1); current++) {

        TableRow storeRow = (TableRow)inflater.inflate(R.layout.store_table_row, tl, false);

        TextView tv1 = (TextView)storeRow.findViewById(R.id.tvStoreCount);
        final RadioButton rb1 = (RadioButton)storeRow.findViewById(R.id.rb1StoreName);

        //tv1.setTag(current);

        tv1.setText((""+(current+1)).trim());

        //tv1.setId();

        rb1.setTag(storeCode[current]);
        rb1.setText(storeName[current]);

        tl.addView(storeRow);

        /*// Create a TableRow and give it an ID
        tr = new TableRow(this);

        tr.setId(200 + current);
        tr.setTag(storeCode[current]);
        tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        tr.setClickable(true);

        rb1 = new RadioButton(this);

        rb1.setId(current);
        rb1.setTag(storeCode[current]);
        rb1.setText(storeName[current]);
        rb1.setTextColor(Color.BLACK);
        rb1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        tr.addView(rb1);

        CheckBox cb1 = new CheckBox(this);
        cb1.setId(500 + current);
        // cb1.setText(provinces[current]);
        cb1.setTextColor(Color.BLACK);
        cb1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        tr.addView(cb1);

         * CheckBox cb2 = new CheckBox(this); cb2.setId(300+current);
         * //cb1.setText(provinces[current]); cb2.setTextColor(Color.BLACK);
         * cb2.setLayoutParams(new LayoutParams( LayoutParams.WRAP_CONTENT,
         * LayoutParams.WRAP_CONTENT)); tr.addView(cb2);

        // Add the TableRow to the TableLayout
        tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));*/

        rb1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                System.out.println("inside-onClick");
                //System.out.println(arg0.getId());
                System.out.println(arg0.getTag());
                selStoreID = arg0.getTag().toString();

                if(prevSel == 0) {
                    prevSelStoreID = selStoreID;
                    prevID = arg0.getId();
                    prevSel = 1;
                }
                else{

                }
                /*rb1.refreshDrawableState();*/

                if(prevSelStoreID.equals(arg0.getTag().toString())){
                    /*int rbID;
                    rbID = rb1.getId();
                    System.out.println("RB ID: " + rbID);*/

                }
                else{
                    int rbID;
                    rbID = arg0.getId();

                    //rb1.refreshDrawableState();
                    //rb1.clearFocus();
                    //rb1.findViewById(rbID).isSelected();

                    rb1.findViewById(prevID).clearFocus();
                    rb1.findViewById(prevID).invalidate();
                    rb1.findViewById(prevID).refreshDrawableState();

                    System.out.println("prevID: " + prevID);
                    System.out.println("rbID: " + rbID);

                    rb1.setChecked(false);
                    //rb1.findViewWithTag(prevSelStoreID).invalidate();

                    prevSel = 0;
                    prevSelStoreID = selStoreID;
                    prevID = rbID;

                    rb1.findViewById(rbID).isSelected();

                }

            }
        });

    }

    btnStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent nxtP3 = new Intent(StoreSelection.this, LastVisitDetails.class);
            nxtP3.putExtra("storeID", selStoreID);
            nxtP3.putExtra("imei", uuid);
            nxtP3.putExtra("date", userDate);
            startActivity(nxtP3);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:46:19.217

为了防止对 RadioButton 进行多次检查，它们必须都在同一个 RadioGroup 中。

您可以在 XML 中定义一个 Radiogroup（但从我看到的情况来看，您正在尝试这样做会很困难）

或者您在 Java 中创建它：`RadioGroup rg = new RadioGroup(this);`

**编辑 编辑 编辑**

试试这个...希望它有效

```
RadioGroup rg = new RadioGroup(this);
RadioButton[] rb = new RadioButton[storeList.length];
for (int current = 0; current <= (storeList.length - 1); current++) {

    TableRow storeRow = (TableRow)inflater.inflate(R.layout.store_table_row, tl, false);

    TextView tv1 = (TextView)storeRow.findViewById(R.id.tvStoreCount);
    rb[current]  = (RadioButton)storeRow.findViewById(R.id.rb1StoreName);
    rg.addView(rb[current]);
    /*other suff... 
```

# java - JADE：调度行为

> ID：15201815
> 
> 赞同：0
> 
> 时间：2013-03-04T12:39:15.590
> 
> 标签：java, agents-jade, multi-agent

我正在自学 JADE，想知道是否有一种简单的方法来安排行为，即在所有其他代理之前完成其行为周期之前不会执行一个代理行为？

例如，假设我有一组添加到每个代理的行为（A、B、C），但是我不希望在所有代理完成行为 A 之前执行任何其他行为（B、C）。谢谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:46:17.100

您可以协调代理之间交换消息的此类行为。这是一篇具有更复杂协议的论文，可以避免 MAS 中的死锁：[http ://www.db-thueringen.de/servlets/DerivateServlet/Derivate-19681/ESM2009_S337-341.pdf](http://www.db-thueringen.de/servlets/DerivateServlet/Derivate-19681/ESM2009_S337-341.pdf)

# c# - 将项目从 TextBox 添加到 ListBox

> ID：15201821
> 
> 赞同：2
> 
> 时间：2013-03-04T12:39:44.973
> 
> 标签：c#, .net, wpf

我有这个`ListBox`：

```
<ListBox x:Name="PlaylistList" AlternationCount="2" SelectionChanged="DidChangeSelection">
        <ListBox.GroupStyle>
            <GroupStyle />
        </ListBox.GroupStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我想添加选项以将新项目添加到`ListBox`. 我想通过在用户按下按钮然后用户按下回车并将文本添加`TextBox`到.`ListBox``TextBox``ListBox`

我尝试将文本框添加到列表框中，但我只能添加一种类型`ListBox.ItemTemplate`，我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:05:23.467

**更新**为在列表框中添加文本框：

要将新项目添加到 ListBox，请在 Button Click 代码隐藏中执行以下操作：

```
TextBox TextBoxItem = new TextBox();
// set TextBoxItem properties here
PlaylistList.Items.Add(TextBoxItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:52:21.217

你的列表框：

```
<ListBox
    Name="MyListBox"
    ItemsSource="{Binding Path=Reason}"
    DisplayMemberPath="Description"/> 
```

为 ListBox 的项目创建一个 ObversableCollection

```
public ObservableCollection<IdObject> items
{
    get { return (ObservableCollection<IdObject>)GetValue(ApplicationsProperty); }
    set { SetValue(ApplicationsProperty, value); }
}

items = new ObservableCollection<IdObject>(); 
```

在这种情况下，我的 ID-Object 具有以下属性：

```
private int _id = 0;
private string _description = ""; 
```

将集合绑定到 ListBox：

```
MyListBox.ItemsSource = items; 
```

然后制作一个带有 Button 的 TextBox，以及一个按下按钮的事件，在其中将文本添加到 observable 集合中：

```
items.Add(new IdObject(someId, TextBox.Text)); 
```

当 ObservableCollection 更改时，ListBox 将更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T01:49:49.470

单击按钮时编写此代码，以便将文本框文本添加到列表框中。

```
private void addEventButton_Click(object sender, EventArgs e)
    {

        // Adds events to listbox. 
       if (this.titleTextBox.Text != "")
        {
            listBox1.Items.Add(this.titleTextBox.Text); 
            listBox2.Items.Add(this.titleTextBox.Text);
            this.titleTextBox.Focus();
            this.titleTextBox.Clear();

         }
      } 
```

# ruby-on-rails - rails 命令失败

> ID：15201822
> 
> 赞同：0
> 
> 时间：2013-03-04T12:39:49.530
> 
> 标签：ruby-on-rails, ruby

我正在关注[本教程](http://net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/)，该教程涵盖了使用 rspec、capybara 等的 TDD。我在 Gemfile 中添加了以下内容：

```
group :test, :development do
    gem 'turn'
    gem 'rspec-rails'
    gem 'capybara'
    gem 'guard-rspec'
    gem 'growl_notify'
end 
```

跑`bundle install`，现在得到：

```
juco@jucoiMac ~/Desktop/rails-test $ rails s
    gem install minitest
    /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn/minitest.rb:9:in `require': no such file to load -- minitest/unit (LoadError)
        from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn/minitest.rb:9
        from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn.rb:13:in `require'
        from /Library/Ruby/Gems/1.8/gems/turn-0.9.6/lib/turn.rb:13
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in `require'
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler/runtime.rb:68:in `require'
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in `each'
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler/runtime.rb:66:in `require'
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in `each'
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler/runtime.rb:55:in `require'
        from /Library/Ruby/Gems/1.8/gems/bundler-1.2.4/lib/bundler.rb:128:in `require'
        from /Users/juco/Desktop/rails-test/config/application.rb:7
        from /Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:53:in `require'
        from /Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:53
        from /Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:50:in `tap'
        from /Library/Ruby/Gems/1.8/gems/railties-3.2.12/lib/rails/commands.rb:50
        from script/rails:6:in `require'
        from script/rails:6 
```

当我尝试执行任何 rails 命令时，包括`rails server`. 之前已经[发过](https://stackoverflow.com/questions/13100522/rails-insecure-world-writable-dir-library-ruby-gems-1-8-in-path-mode-040777)这个，但是没有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:42:48.530

`turn`gem 用于最小测试。似乎您正在使用 rspec，因此您遇到了不兼容问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:48:43.680

转gem版本-

```
 group :test do
      gem 'turn', '< 0.8.3'
    end 
```

来自：[Minitest Error](https://stackoverflow.com/questions/9989609/rails-generate-throwing-minitest-error)。

# xaml - 组合框自定义 Winrt

> ID：15201827
> 
> 赞同：0
> 
> 时间：2013-03-04T12:40:14.507
> 
> 标签：xaml, windows-8, combobox, windows-runtime, windows-store-apps

我正在尝试在 Winrt 应用程序顶部创建一个应用程序栏，也许是一个 ComboBox。我想做 Windows 8 中的“Bing Sport”应用程序。喜欢：

[http://i.imgur.com/5XNjYAe.png](http://i.imgur.com/5XNjYAe.png)

[http://i.imgur.com/CO0dV6H.png](http://i.imgur.com/CO0dV6H.png)

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:50:43.583

我认为最好的方法是编写自己的代码。

1）创建一个应用栏。

2）为带有图标的菜单创建第一个 StackPanel（将方向设置为水平）

3）然后菜单项作为网格或堆栈面板的

4) 为幻灯片内容添加 Grid 或 StackPanel。（将可见性设置为折叠）

5) 处理点击事件。带箭头的 OnClick 项目：“更改单击的事件样式”、“将带有幻灯片内容可见性的项目设置为可见”、“添加项目”

# java - 链接到 Rhino 时为 java 生成 ant 脚本的问题

> ID：15201828
> 
> 赞同：0
> 
> 时间：2013-03-04T12:40:14.593
> 
> 标签：java, eclipse, ant, build, rhino

当我尝试使用 ant 构建我的项目时，我得到：“java.lang.NoClassDefFoundError: sun/org/mozilla/javascript/internal/Scriptable”

这源于我对 Rhino 的使用（Oracle JDK 附带的捆绑 java 脚本）

*   当我用 Eclipse 构建项目时，一切正常。
*   我使用的 ant 文件是由 eclipse 生成的，除了 java-script 依赖项外，它工作正常。
*   这些依赖项位于 oracle JDK 附带的 RT.jar 中。
*   我已经尝试了 jdk6_0_u41 和 jdk7，并且都给出了相同的结果：在 eclipse 中成功，在 ant 中失败。
*   我尝试在 ubuntu 10 和 12 上构建

我还看到了另外两个对我来说似乎无法接受的建议：

*   一个线程建议将 RT.jar 复制到项目 lib 目录中。（RT 是整个 java 运行时！）
*   另一个线程建议我不应该使用：sun/org/mozilla/javascript/internal。但由于我正在进行高级操作（调用对象方法、注册回调等），我认为除了使用 sun.org.mozilla.javascript.internal 系列类之外别无选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:29:56.070

来自 Oracle 网站的评论：

> 用户不应编写依赖于内部 JDK 实现类的代码。这些类是 JDK 的内部实现细节，如有更改，恕不另行通知。
> 
> 这不是编译器问题。根据 ct.sym 中提供的信息，javac 行为正确。
> 
> 问题属于那些决定 ct.sym 应该提供什么（以及应该隐藏什么）的人

您可能会建议将[Rhino 的 jar](https://developer.mozilla.org/en-US/docs/Rhino/Download_Rhino)包含到您的项目中，并将其重新指向原始的 Rhino 类，其中不会对用户隐藏“内部”

# objective-c - ObjC：不能继承 NSUserNotification

> ID：15201830
> 
> 赞同：0
> 
> 时间：2013-03-04T12:40:16.147
> 
> 标签：objective-c, subclass, nsusernotification

正如标题所说，我不能子类化`NSUserNotification`。好吧，我可以编写和编译子类，但是我不能在运行时获取子类对象：如果我创建该子类的一个实例，然后在运行时测试它的类，我总是会得到`_NSConcreteUserNotification`. 为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:46:34.150

你遇到了一个[班级集群](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html)。它们不容易被子类化，如下所述：http: [//www.mikeash.com/pyblog/friday-qa-2010-03-12-subclassing-class-clusters.html](http://www.mikeash.com/pyblog/friday-qa-2010-03-12-subclassing-class-clusters.html)

# jedis - Jedis 和 JOhm 错误

> ID：15201833
> 
> 赞同：2
> 
> 时间：2013-03-04T12:40:24.187
> 
> 标签：jedis

我正在使用通过巧克力安装在 Windows 上的 Redis，并在 Java 项目中设置 jedis 和 JOhm。Redis 服务器是实时的 Redis 版本 2.6 当我想保存一个像帖子中的 Java 对象时，我收到一条错误消息。

```
java.lang.NoSuchMethodError: redis.clients.jedis.Jedis.sadd(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/Long;
    at redis.clients.johm.Nest.sadd(Nest.java:168)
    at redis.clients.johm.JOhm.save(JOhm.java:220)
    at redis.clients.johm.JOhm.save(JOhm.java:146) 
```

这是我的 java 对象：

```
/**
 * 
 */
package com.smsgh.unitysmpp.MessageProcessor;

import java.io.Serializable;

import org.joda.time.DateTime;

import redis.clients.johm.Attribute;
import redis.clients.johm.Id;
import redis.clients.johm.Model;

/**
 * @author Arsene Tochemey GANDOTE This class holds the Messages that needs a
 *         Delivery Receipt
 */
@Model
public class StoredShortMessage implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 6185862961624213864L;

    @Id
    private Integer id;

    // session Id
    @Attribute
    private Long smppSessionId;

    // Message Id
    @Attribute
    private String messageId;

    // ESME Account Number#
    @Attribute
    private Long accountNumber;

    // ESME Account Id
    @Attribute
    private String accountId;

    // ESME API Pub Key
    @Attribute
    private String apiPublicKey;

    // Message state
    @Attribute
    private String messageState;

    // Network Error
    @Attribute
    private String networkErrorCode;

    // First 20 Characters of the message
    @Attribute
    private String mesgFirstLines;

    // esme TCP/IP connection
    @Attribute
    private String ip;

    // message submitted datetime
    @Attribute
    private DateTime submitDate;

    // final state date
    @Attribute
    private DateTime doneDate;

    // source address
    @Attribute
    private byte srcTon;

    @Attribute  
    private byte srcNpi;

    @Attribute
    private String srcAddr;

    // destination address
    @Attribute
    private byte destTon;

    @Attribute
    private byte destNpi;

    @Attribute
    private String destAddr;

    // delivery state
    @Attribute
    private char dlrState;

    /**
     * 
     */
    public StoredShortMessage() {
    }

    /**
     * @return the smppSessionId
     */
    public Long getSmppSessionId() {
        return smppSessionId;
    }

    /**
     * @param smppSessionId
     *            the smppSessionId to set
     */
    public void setSmppSessionId(Long smppSessionId) {
        this.smppSessionId = smppSessionId;
    }

    /**
     * @return the messageId
     */
    public String getMessageId() {
        return messageId;
    }

    /**
     * @param messageId
     *            the messageId to set
     */
    public void setMessageId(String messageId) {
        this.messageId = messageId;
    }

    /**
     * @return the accountNumber
     */
    public Long getAccountNumber() {
        return accountNumber;
    }

    /**
     * @param accountNumber
     *            the accountNumber to set
     */
    public void setAccountNumber(Long accountNumber) {
        this.accountNumber = accountNumber;
    }

    /**
     * @return the accountId
     */
    public String getAccountId() {
        return accountId;
    }

    /**
     * @param accountId
     *            the accountId to set
     */
    public void setAccountId(String accountId) {
        this.accountId = accountId;
    }

    /**
     * @return the apiPublicKey
     */
    public String getApiPublicKey() {
        return apiPublicKey;
    }

    /**
     * @param apiPublicKey
     *            the apiPublicKey to set
     */
    public void setApiPublicKey(String apiPublicKey) {
        this.apiPublicKey = apiPublicKey;
    }

    /**
     * @return the messageState
     */
    public String getMessageState() {
        return messageState;
    }

    /**
     * @param messageState
     *            the messageState to set
     */
    public void setMessageState(String messageState) {
        this.messageState = messageState;
    }

    /**
     * @return the networkErrorCode
     */
    public String getNetworkErrorCode() {
        return networkErrorCode;
    }

    /**
     * @param networkErrorCode
     *            the networkErrorCode to set
     */
    public void setNetworkErrorCode(String networkErrorCode) {
        this.networkErrorCode = networkErrorCode;
    }

    /**
     * @return the mesgFirstLines
     */
    public String getMesgFirstLines() {
        return mesgFirstLines;
    }

    /**
     * @param mesgFirstLines
     *            the mesgFirstLines to set
     */
    public void setMesgFirstLines(String mesgFirstLines) {
        this.mesgFirstLines = mesgFirstLines;
    }

    /**
     * @return the ip
     */
    public String getIp() {
        return ip;
    }

    /**
     * @param ip
     *            the ip to set
     */
    public void setIp(String ip) {
        this.ip = ip;
    }

    /**
     * @return the submitDate
     */
    public DateTime getSubmitDate() {
        return submitDate;
    }

    /**
     * @param submitDate
     *            the submitDate to set
     */
    public void setSubmitDate(DateTime submitDate) {
        this.submitDate = submitDate;
    }

    /**
     * @return the doneDate
     */
    public DateTime getDoneDate() {
        return doneDate;
    }

    /**
     * @param doneDate
     *            the doneDate to set
     */
    public void setDoneDate(DateTime doneDate) {
        this.doneDate = doneDate;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    /**
     * @return the srcTon
     */
    public byte getSrcTon() {
        return srcTon;
    }

    /**
     * @param srcTon
     *            the srcTon to set
     */
    public void setSrcTon(byte srcTon) {
        this.srcTon = srcTon;
    }

    /**
     * @return the srcNpi
     */
    public byte getSrcNpi() {
        return srcNpi;
    }

    /**
     * @param srcNpi
     *            the srcNpi to set
     */
    public void setSrcNpi(byte srcNpi) {
        this.srcNpi = srcNpi;
    }

    /**
     * @return the srcAddr
     */
    public String getSrcAddr() {
        return srcAddr;
    }

    /**
     * @param srcAddr
     *            the srcAddr to set
     */
    public void setSrcAddr(String srcAddr) {
        this.srcAddr = srcAddr;
    }

    /**
     * @return the destTon
     */
    public byte getDestTon() {
        return destTon;
    }

    /**
     * @param destTon
     *            the destTon to set
     */
    public void setDestTon(byte destTon) {
        this.destTon = destTon;
    }

    /**
     * @return the destNpi
     */
    public byte getDestNpi() {
        return destNpi;
    }

    /**
     * @param destNpi
     *            the destNpi to set
     */
    public void setDestNpi(byte destNpi) {
        this.destNpi = destNpi;
    }

    /**
     * @return the destAddr
     */
    public String getDestAddr() {
        return destAddr;
    }

    /**
     * @param destAddr
     *            the destAddr to set
     */
    public void setDestAddr(String destAddr) {
        this.destAddr = destAddr;
    }

    /**
     * @return the dlrState
     */
    public char getDlrState() {
        return dlrState;
    }

    /**
     * @param dlrState
     *            the dlrState to set
     */
    public void setDlrState(char dlrState) {
        this.dlrState = dlrState;
    }
} 
```

有人可以告诉我可能是什么错误吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:11:05.080

为了解决我必须下载源代码并使用它。我认为我下载的 jar 文件中存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T14:11:10.307

*下载项目源代码*

[https://github.com/xetorthio/johm](https://github.com/xetorthio/johm)

编辑 pom.xml

**将 Jedis 版本从 1.5.1 更改为 2.4.2 或最新**

```
<dependency>
   <groupId>redis.clients</groupId>
   <artifactId>jedis</artifactId>
   <version>2.4.2</version>
   <type>jar</type>
   <scope>compile</scope>
</dependency> 
```

**编译项目并构建 jar，在你的项目中使用这个新的 jar**

# google-apps-script - 尝试在 Google Apps 脚本中获取页面的 URL 时出错

> ID：15201834
> 
> 赞同：0
> 
> 时间：2013-03-04T12:40:25.830
> 
> 标签：google-apps-script

我正在编写要嵌入到 Google 协作平台中的 Google Apps 脚本，以检索当前页面的子页面的名称和 URL。当我调用 getURL() 函数时，出现以下错误：

*“类型错误：在对象网页中找不到函数 getURL。”*

我的代码如下：

```
function doGet() {

    var app = UiApp.createApplication();

    var pages = SitesApp.getActivePage().getChildren();

    for (var i = 0; i < pages.length; i++) {
        Logger.log(pages[i].getURL());
    }

    return app;
} 
```

我是 Google Apps 脚本的新手，所以很难弄清楚这意味着什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:02:30.033

采用 `pages[i].getUrl()`

您应该使用脚本编辑器中的自动完成功能来避免此类输入错误（点后的控制空间：page[i]。*在这里输入 CTRL 空间*，您将看到所有可能的方法......）

注意：javascript中的一般规则是使用所谓的camelCase格式：`getRange`，`createLabel`......只有少数例外，`setHTML`但每个规则都必须有例外，不是吗？

# java - jrxml 不编译

> ID：15201849
> 
> 赞同：-1
> 
> 时间：2013-03-04T12:41:13.110
> 
> 标签：java, jasper-reports

嗨，我在 jasper 报告中有问题。我通过我的 java 类执行 jrxml，如下所示

```
String jrxmlPath = context.getRealPath("//IREPORT_JRXML//" + reportPath);
System.out.println("in BTO report Selected  " +jasperReport);         ---->(1)
JasperReport jasperReport = JasperCompileManager.compileReport(jrxmlPath);
System.out.println("in BTO report compiled  " +jasperReport);         ----->(2) 
```

"//IREPORT_JRXML// 是我放置 jrxml 文件的路径。我执行了我的应用程序控制执行到 ---->(1) 行但它不执行 belo 语句，这里的问题是至少我没有显示任何控制台上的错误。

我使用 IReport 4.0.2、tomcat 7、jdk 1.7，我在 lib 文件夹中添加了 jasperreport-3.7.4.jar 文件。

版本问题有什么问题吗？IReport 4.0.2、tomcat 7、jdk 1.7 和 web 动态模块 3.0 我试图找出问题，不幸的是我错过了一些库……但我不记得它是哪个库……jasper 编译器不执行报告设计元素，报告没有设计元素正在执行，谁能告诉我我需要添加用于执行报告设计元素的 wat 库/jar .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:58:43.357

请尝试以下代码

```
`ServletContext context = getServletContext();
        String reportPath = context
                .getRealPath("/WEB-INF/reports/filname.jasper");
JasperReport jasperReport =
             JasperCompileManager.compileReport(reportPath);` 
```

# angularjs - Angular 在控制器中使用 $cacheFactory 数据

> ID：15201852
> 
> 赞同：0
> 
> 时间：2013-03-04T12:41:34.157
> 
> 标签：angularjs

我有一个用于缓存产品数组的 ProdCache 服务。

```
...
var products = ProdCache.get('all');
if(typeof products == 'undefined'){
    products = Product.query();
    ProdCache.put('all',products);
} 
```

如果我将产品放在范围内，产品会按预期显示，但我只需要显示几个产品。
我的尝试：

```
$scope.related = (function(){
    var res = [];
    if(products.length>0){
        for (var i = 0, key; i < 3; i++) {
            key = Math.floor(Math.random() * products.length);
            res.push(products[key]);
        }
    }
    return res;
})(); 
```

该函数第一次无法工作，因为正在处理 xhr 请求并且返回的数据不是反应性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:28:02.923

[正确的方法是在此处](http://docs.angularjs.org/api/ng.filter%3afilter)和[此处](http://docs.angularjs.org/api/ng.%24filterProvider)使用过滤器文档。

假设您编写的过滤器是一个模拟，并且您需要一个复杂的过滤器，您只需要创建一个过滤器函数并在表达式中`$scope`引用它：`ng-repeat`

```
$scope.isRelated = function isRelatedFilter(item) {
  // if return is true, the item is included.
  return item.someProperty === 'someCriteria';
} 
```

```
<span ng-repeat="product in products | filter:isRelated">...</span> 
```

可以是`someCriteria`另一个 $scope/controller 属性或由服务定义。如果您需要自定义参数，则不能使用`filter`过滤器，应该创建自己的过滤器。看看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:49:10.300

如果没有用于绑定的 HTML 代码，就很难确定如何使用 $scope.related 函数。但是，如果您遇到的唯一问题是，当数据从 xhr 请求返回时，UI 没有更新，那么您的 $digest 阶段可能已经结束，因此与 $scope.related 的绑定不是导致函数重新触发，直到下一个 $digest 阶段。

这可能会解决您遇到的问题：

```
...
var products = ProdCache.get('all');
if(typeof products == 'undefined'){
    products = Product.query();
    ProdCache.put('all',products);
    // Add this line to force re-digest if needed
    if(!$scope.$$phase) $scope.$digest();
} 
```

虽然没有看到 HTML，但我不确定这是否能解决您的问题。如果没有，请发布一个 plunker，以便我们更好地看到问题。

# android - Android：PreferenceScreen 中的 TimePicker：将数据发送到 TimePicker

> ID：15201853
> 
> 赞同：1
> 
> 时间：2013-03-04T12:41:43.953
> 
> 标签：android, timepicker, preference

我有一个`PreferenceScreen`where 3 它的偏好`TimePreferences`。`TimePreference`是一个扩展的自定义类`DialogPreference`，它包含一个`TimePicker`. 我按照[此代码](https://github.com/commonsguy/cw-lunchlist/blob/master/19-Alarm/LunchList/src/apt/tutorial/TimePreference.java)创建了它。

现在我想限制`TimePicker`输入。每个都`TimePreference`需要有一个特定的时间限制（这个限制在每个中都会不同`TimePreference`），我将使用这个限制来检查输入值。即，我可能希望第一个`TimePreference`低于 1 小时，第二个到 5 小时，最后一个没有限制。

因为我想避免使用 3 个不同的类，所以我正在寻找一种将一些数据发送到偏好的方法。我尝试使用 defaultValue，但是当用户已经选择了任何值时它为空。

我的 PreferenceActivity 使用`PreferenceFragment`. 这是他们的代码：

```
public class PrefsActivity extends Activity {

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getFragmentManager().beginTransaction().replace(android.R.id.content,
            new PrefsFragment()).commit();
}

}

public class PrefsFragment extends PreferenceFragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs_tod);
}

} 
```

我可以将此数据发送到首选项吗？还是我应该有 3 个不同的课程？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:28:13.737

您可以使用附加属性创建自定义首选项，在您的情况下使用`limit`属性。

资源/值/attrs.xml

```
<declare-styleable name="CustomPreference">
    <attr name="limit" format="integer"/>
</declare-styleable> 
```

CustomPreference.java

```
public class CustomPreference extends DialogPreference {
private int limit;

public CustomPreference(Context context, AttributeSet attrs) {
    super(context, attrs);

    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomPreference, 0, 0);
    limit = a.getInteger(R.styleable.CustomPreference_limit, 0);

    a.recycle();
} 
```

在偏好布局中：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" 
   xmlns:app="http://schemas.android.com/apk/res/com.example.package">
    <PreferenceCategory>
        <com.example.package.CustomPreference
        android:key="@string/pref_key"
            android:title="@string/pref_title"
            app:limit="6" />
    </PreferenceCategory>
</PreferenceScreen> 
```

您还可以以编程方式设置属性值

# xslt - 检查路径中是否有特定元素

> ID：15201854
> 
> 赞同：0
> 
> 时间：2013-03-04T12:41:44.577
> 
> 标签：xslt, xpath

我一直在尝试使用以下语句检查路径是否在其属性中包含“（”。但它显示错误。

```
<xsl:for-each select="section/section/contains(@num,'(')"> 
```

当我在 Altova Spy 的 XSLT 中使用上述语句时，它会显示一条消息，提示“无效的 XPath 表达式”。浏览器输出如下：

```
current()/section/section/section/-->contains<--(@num,'a') 
```

请让我知道要使用的正确语句。这`num`是我正在使用的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:44:57.137

所以你想遍历`section`s where `@num`contains `(`？

如果是这样，应该这样做：

```
<xsl:for-each select="section/section[contains(@num, '(')]"> 
```

# php - json jquery问题

> ID：15201856
> 
> 赞同：1
> 
> 时间：2013-03-04T12:41:52.960
> 
> 标签：php, jquery, json

我正在使用它从 ajax jquery 在 json 格式中获取信息，但它给了我这样的错误 0 =[object object]

```
$.getJSON("ajax_files/getSingleRow.php?id="+id+"&type="+type, function(json){ 
                 $.each(json, function(key, val) {
                    //$("#"+key).val(val);
                    alert(key+'='+val);
                 });
                 }); 
```

这是我的 josn 字符串

```
[{"id":"1","ref":"RH-R-1","name":"","description_demo":"this is desc test"}] 
```

* * *

谢谢大家......这是我的json如何发展

```
 while($rw = $oAppl->row($res))
{
 $return[]=array('id'=>$rw['id'],
                'ref'=>$rw['ref'],
                'name'=>$rw['name'],
                'description_demo'=>$rw['description_demo']);
}

    header('Content-type: application/json');
   echo json_encode($return); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:44:16.393

JSON 文本由一个包含对象的数组组成。

当你遍历它时，你会得到数组的第一个键 ( `0`)，然后是对象的字符串序列化 ( `[Object object]`)。然后它停止，因为数组中只有一个条目。

这**不是错误**。鉴于您输入的数据，这是预期的行为。

可能您想要循环遍历对象，在这种情况下：

```
var ob = json[0];
$.each(ob, function(key, val) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:43:18.130

这不是一个错误，严格来说，它是一个对象。它可能包含一个错误，谁知道呢。但是事物本身是一个等待被访问的事物（即 的值`val`），它本身并没有什么错误。

尝试访问成员，输出`id`,`name`等，而不是仅仅将事物转储到警报中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T12:45:52.360

尝试这个：

```
$.getJSON("ajax_files/getSingleRow.php?id=" + id + "&type=" + type, function (json) {
    $.each(json, function (key, val) {

        // This will only give you the 'ref' value
        alert(key + '=' + val.ref);

        // To loop through all the values
        $.each(val, function (key2, data) {
            alert(key2 + ": " + data);
        });
    });
}); 
```

[**在这里演示**](http://jsfiddle.net/YhuhZ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:46:00.200

您的 JSON 字符串包含在一个数组中。`[ {} ]`把 " `[`" 和 " `]`" 去掉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T12:48:20.387

读取 JSON 集合项的属性值。

```
 $.each(json, function(key, item) {
     alert(key+'='+item.id);
     alert(key+'='+item.ref);
     alert(key+'='+item.description_demo);
 }); 
```

假设您的页面中没有其他脚本错误，这应该可以正常工作。

工作样本：http: [//jsfiddle.net/a4Efx/4/](http://jsfiddle.net/a4Efx/4/)

# delphi - 如何创建一个带有 Owner 的 TStringList 后代，它将自动释放 TStringList？

> ID：15201857
> 
> 赞同：9
> 
> 时间：2013-03-04T12:41:54.153
> 
> 标签：delphi, delphi-7

我希望创建类似“TOwnedStringList”（类名是虚构的）之类的东西，我可以将其构造为：

```
sl := TOwnedStringList.Create(Self);
sl.Sorted := True;
sl.Duplicates := dupIgnore; 
sl.Add(...);
// etc... 
```

哪里`Self`可能是一个表单（例如），以便所有者将自动释放 StringList。我希望能够避免给`sl.Free`自己打电话。

这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T12:54:06.250

这会有点乱。你需要做这样的事情。

```
type
  TOwnerComponent = class(TComponent)
  private
    FOwnedObject: TObject;
  public
    constructor Create(Owner: TComponent; OwnedObject: TObject);
    destructor Destroy; override;
  end;

  TOwnedStringList = class(TStringList)
  private
    FOwner: TOwnerComponent;
  public
    constructor Create(Owner: TComponent);
    destructor Destroy; override;
  end;

{ TOwnerComponent }

constructor TOwnerComponent.Create(Owner: TComponent; OwnedObject: TObject);
begin
  inherited Create(Owner);
  FOwnedObject := OwnedObject;
end;

destructor TOwnerComponent.Destroy;
begin
  FOwnedObject.Free;
  inherited;
end;

{ TOwnedStringList }

constructor TOwnedStringList.Create(Owner: TComponent);
begin
  inherited Create;
  if Assigned(Owner) then
    FOwner := TOwnerComponent.Create(Owner, Self);
end;

destructor TOwnedStringList.Destroy;
begin
  if Assigned(FOwner) and not (csDestroying in FOwner.ComponentState) then
  begin
    FOwner.FOwnedObject := nil;
    FOwner.Free;
  end;
  inherited;
end; 
```

基本上，您创建一个`TOwnerComponent`由`Owner`您传递给的`TOwnedStringList.Create`. 当它`Owner`死时，它会破坏`TOwnerComponent`它，而后者又会破坏你的字符串列表。

`Free`该代码对字符串列表上的显式调用具有弹性。

# php - 如何为每个用户向我的网站添加通知

> ID：15201859
> 
> 赞同：0
> 
> 时间：2013-03-04T12:42:00.540
> 
> 标签：php, facebook

我有一个网站，我需要在其中使用 Facebook 一个我已经实施的通知。但问题是，当用户点击通知时，他会重定向到我没有的画布页面。如何将其重定向到我的网页，这在 Facebook 上是否合法？

我添加了我的网站页面的页面名称“login.php”，但它显示在画布页面内。

```
$params = array( 'access_token' => $accessToken, 'href' => 'login.php', 'template' => $notification_message['FB']['message'], );
$facebook->api('/' . $userId . '/notifications/', 'post', $params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:50:59.827

您可以使用画布应用程序通过 JavaScript 进行重定向——但这将违反[平台政策](https://developers.facebook.com/policy/)，该政策明确规定：

> 政策，I. 特性和功能，第 11 点）
> 
> Facebook 上的 Canvas 或 Page Tab 应用程序的主要目的不能是简单地将用户从 Facebook 体验重定向到外部网站。

# php - 为多个用户每x时间执行一次php函数

> ID：15201866
> 
> 赞同：0
> 
> 时间：2013-03-04T12:42:16.810
> 
> 标签：php

得到这个代码：

```
<?php
function test ($url){
$starttime = microtime(true);
$valid = @fsockopen($url, 80, $errno, $errstr, 30);
$stoptime = microtime(true);
echo (round(($stoptime-$starttime)*1000)).' ms.';

if (!$valid) {
   echo "Status - Failure";
} else {
   echo "Status - Success";
}
}
    test('google.com');
?> 
```

我希望有一个选项可以每 5 分钟/1 小时/1 天等执行一次此功能。有人建议我使用 cron，但在进行一些研究之前和之后我从未听说过 cron，我知道它是一个单独的文件，它将执行每x时间运行一次。如果我有多个用户，例如 userA 想要每 5 分钟运行一次脚本，而 userB 想要每小时运行一次脚本，该怎么办？在这种情况下，我需要为每个用户创建多个 cron 文件吗？

编辑：我正在考虑做这样的事情：

```
for ($i = 0; $i < 100; $i++) { 
    test('google.com');
    sleep(10 * 60); 
} 
```

只有在睡眠行中，我才会有一个每个用户自己定义的自定义 $n 字段。我的问题是 - 它仅在整个周期完成后返回结果，我希望它在每个“回合”后返回结果？（idk 它叫什么，但基本上会给出 1 个值，然后 10 分钟后给出第二个值，依此类推）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:44:04.797

我发现的唯一方法是使用将在 setTimeout 内从用户页面调用的 ajax 方法。参见：[settimeout 函数](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:56:15.863

您可能需要使用 cron (UNIX) 或 Windows Tasks (Microsoft)，具体取决于服务器上的操作系统。

[克朗](http://es.wikipedia.org/wiki/Cron_%28Unix%29)

[窗口任务](http://en.wikipedia.org/wiki/Windows_Task_Manager)

问候，

# ibm-mobilefirst - 安装 IBM Worklight Server

> ID：15201868
> 
> 赞同：2
> 
> 时间：2013-03-04T12:42:35.353
> 
> 标签：ibm-mobilefirst

我已经下载了**IBM Worklight Enterprise Server**，尝试使用**Apache Tomcat安装****Worklight 服务器**，并将我的 Worklight 应用程序部署在我的远程服务器中。 自述文件中提到，我需要“IBM 安装管理器”来安装“IBM Worklight Server”。 我下载了**IBM 安装管理器**并按照自述文件中的步骤在我的本地机器上安装了 Worklight 服务器。在我的远程机器上 安装**Apache Tomcat并将****worklight-jee-library.jar**复制到**$TOMCAT_HOME/lib**目录。 **********这是安装 IBM Worklight 服务器的正确方法吗？还是有任何其他方法可以从命令行在我的远程机器上安装“IBM Worklight Enterprise Server”？
我被困在这个地方任何帮助将不胜感激。
谢
谢苏仁**********

 ******* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:15:49.770

不，这不是正确的方法。具体来说，您不应该将任何内容复制到 Tomcat 中。安装为您完成。要遵循的步骤是

1.  安装 IBM Installation Manager 版本 1.5.2 及更高版本（可在 Web 上获得）。这是一次性步骤。

2.  从 IBM 下载 Worklight 服务器包

3.  将 IBM Installation Manager 指向 Worklight 服务器包（主屏幕中的文件 - 首选项）。

4.  开始安装。安装将询问您到 Tomcat 的路径，并将在 Tomcat 中安装所需的一切。

如果您的服务器没有 GUI，则将步骤 3 和 4 替换为所谓的[静默安装](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fadmin%2Ft_silent_installation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T15:31:02.873

Quite often you won't have access to the server GUI but you can simply redirect the X display output to your desktop and launch IM. Ie. if you are running Linux export DISPLAY=xxx.xxx.xx:0.0

If you are running Windows just use Exceed.******

# iphone - 在没有私有 API 的情况下实现自定义 UITabBarController

> ID：15201870
> 
> 赞同：0
> 
> 时间：2013-03-04T12:42:44.800
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitabbarcontroller

在搜索了 StackOverflow 上的几个问题后，我发现只有 1 个用于创建自定义 UITabBar 的主要项目称为`BCTabBarController`. 它的描述说：

> 使用标准的 UITabBarController 有几个问题，包括：
> 
> 它太高了，尤其是在横向模式下
> 
> 高度与 UIToolbar 不匹配
> 
> *不使用私有 API 无法自*定义

 *尽管如此，我[在 GitHub 上找到了这个奇怪的项目，](https://github.com/rumex/RXCustomTabBar)这里的[教程](http://www.rumex.it/2010/07/how-to-customise-the-tab-bar-uitabbar-in-an-iphone-application-part-1-of-2/)`UITabBarController`在其实现中使用标准，`UIButtons`每个选项卡都在工作（很奇怪，但确实如此）。

我想知道，如果`UITabBarController`使用`UIButtons`而不是选项卡创建自定义是错误的，它会导致什么结果？这个的实现看起来像这样：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [self hideTabBar];
    [self addCustomElements];
}

- (void)hideTabBar
{
    for(UIView *view in self.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            view.hidden = YES;
            break;
        }
    }
}

-(void)addCustomElements
{
    // Initialise our two images
    UIImage *btnImage = [UIImage imageNamed:@"NavBar_01.png"];
    UIImage *btnImageSelected = [UIImage imageNamed:@"NavBar_01_s.png"];

    self.btn1 = [UIButton buttonWithType:UIButtonTypeCustom]; //Setup the button
    btn1.frame = CGRectMake(0, 430, 80, 50); // Set the frame (size and position) of the button)
    [btn1 setBackgroundImage:btnImage forState:UIControlStateNormal]; // Set the image for the normal state of the button
    [btn1 setBackgroundImage:btnImageSelected forState:UIControlStateSelected]; // Set the image for the selected state of the button
    btn1.backgroundColor = [UIColor yellowColor];
    [btn1 setTag:0]; // Assign the button a "tag" so when our "click" event is called we know which button was pressed.
    [btn1 setSelected:true]; // Set this button as selected (we will select the others to false as we only want Tab 1 to be selected initially 
```

在我的项目中，我将使用 iOS 5.1 及更高版本，并且不使用 Storyboard 或 XIB。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:20:56.867

从 iOS 5.0 开始，使用屏幕底部的`UITabBarController`一行创建自己的不再是问题。`UIButtons`

在以前的 iOS SDK 版本中，这有点冒险，因为您必须自己管理`viewWill/viewDid`方法的转发。

查看`UIViewController`Class Reference，**Implementing a Container View Controller**部分，您会在那里找到所需的一切：[UIViewController Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

还有一篇专题文章准确解释了您的需求：[创建自定义容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

希望这会有所帮助，*

# r - 使用 spplot() 合并多边形并绘图

> ID：15201875
> 
> 赞同：0
> 
> 时间：2013-03-04T12:42:59.837
> 
> 标签：r, maptools

我想合并 gadm 数据中的一些区域，然后绘制地图。到目前为止，我有以下内容：

```
#install.packages("sp",dependencies=TRUE)
#install.packages("RColorBrewer",dependencies=TRUE)
#install.packages("maptools",dependencies=TRUE)
library(sp)
library(maptools)
#library(RColorBrewer)

# get spatial data
con <- url("http://gadm.org/data/rda/CZE_adm2.RData")
print(load(con))
close(con)

IDs <- gadm$ID_2
IDs[IDs %in% c(11500:11521)] <- "11500"
gadm_new <- unionSpatialPolygons(gadm, IDs)

# plot map
spplot(gadm_new, "NAME_2", col.regions=col, main="Test",colorkey = FALSE, lwd=.4, col="white") 
```

但是，这会导致错误：

```
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "spplot", for signature "SpatialPolygons" 
```

现在我不知道什么可以解决这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:18:16.247

我不确定你想在这里做什么。

该错误是由于`spplot`用于绘制具有属性的空间对象，即具有关联数据的事实。您的`gadm`对象属于类`SpatialPolygonsDataFrame`，因此它定义了可以通过插槽访问的多边形和相关数据`gadm@data`。当你使用 时`UnionSpatialPolygons`，你只会得到一个`SpatialPolygons`类对象，它可以用 绘制`plot`，但不能用绘制`spplot`：

```
IDs <- gadm$ID_2
IDs[IDs %in% c(11500:11521)] <- "11500"
gadm_new <- unionSpatialPolygons(gadm, IDs)
plot(gadm_new) 
```

![](../Images/2c9a75ebec534295bb14278461e2adcc.png)

如果你想使用`spplot`，你必须手动合并你的关联数据，就像你合并你的多边形一样，然后重新构建一个`SpatialPolygonsDataFrame`. 一种方法如下：

```
gadm_new <- gadm
## Change IDs
gadm_new$ID_2[gadm_new$ID_2 %in% c(11500:11521)] <- "11500"
## Merge Polygons
gadm_new.sp <- unionSpatialPolygons(gadm_new, gadm_new$ID_2)
## Merge data
gadm_new.data <- unique(gadm_new@data[,c("ID_2", "ENGTYPE_2")])
## Rownames of the associated data frame must be the same as polygons IDs
rownames(gadm_new.data) <- gadm_new.data$ID_2
## Build the new SpatialPolygonsDataFrame
gadm_new <- SpatialPolygonsDataFrame(gadm_new.sp, gadm_new.data) 
```

然后您可以使用`spplot` 关联属性绘制地图​​：

```
spplot(gadm_new, "ENGTYPE_2", main="Test", lwd=.4, col="white") 
```

![](../Images/968c911659b1f8c4f5f35bc34f0c56a9.png)

请注意，这里我只使用了`ENGTYPE_2`您的数据变量，而不是`NAME_2`变量，因为我看不到表示每个值对于每个多边形都是唯一的变量的意义。

# svg - 使用 ada 创建 SVG 文件

> ID：15201876
> 
> 赞同：-1
> 
> 时间：2013-03-04T12:43:01.080
> 
> 标签：svg, ada

我想学习如何使用 ada 代码创建 SVG 图像。任何帮助都会得到帮助！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:01:38.910

SVG 被编码为 XML 文件。您需要了解与编程语言无关的 SVG 格式，然后简单地使用该格式编写 XML 文件。

Ada 程序可以借助[Ada.Text_IO](http://www.ada-auth.org/standards/12rm/html/RM-A-10-1.html)、[XMLAda](http://libre.adacore.com/tools/xmlada/)或[XML EZ Out](http://www.mckae.com/xmlEz.html)等编写 XML 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T13:04:07.370

看看[PLplot](http://plplot.sourceforge.net/)。

*语言绑定：*

*   **艾达**
*   C/C++/D
*   Fortran 77/90
*   爪哇
*   语言
*   卢阿
*   OCaml
*   八度
*   Perl
*   Python
*   Tcl/Tk

*输出文件格式：*

*   CGM
*   动图
*   JPEG
*   乳胶
*   PBM
*   PDF格式
*   PNG
*   后记
*   **SVG**
*   无花果

有关文档，请参见项目网站。

**另见：** [Ada：绘制二维图](https://stackoverflow.com/questions/3210207/ada-plotting-2d-graphs/3213050)

# plsql - 我如何在 plsql 中将 htf.escape_sc 字符串转换为 html？

> ID：15201879
> 
> 赞同：0
> 
> 时间：2013-03-04T12:43:14.283
> 
> 标签：plsql, oracle11g

我有字符串

```
encodeString = select htf.escape_sc('Please<B> escape <this> tag<html></html>'); 
```

我想将“encodeString”变量转换为纯 html 代码（请转义标签）

如果是的话，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:36:09.300

```
str1 := 'Please<B> escape <this> tag<html></html>';
str2 := regexp_replace(str1, '<.*?>'); 
```

或者

```
select regexp_replace(col, '<.*?>') from table 
```

# .net - 三层架构中的实体关系验证

> ID：15201883
> 
> 赞同：1
> 
> 时间：2013-03-04T12:43:25.860
> 
> 标签：.net, validation, architecture, orm, domain-driven-design

我正在开发一个 ASP.NET MVC C# 应用程序，其中 MVC 应用程序作为 3 轮胎应用程序中的 UI 层，EF CodeFirst 5 作为 DAL。

```
DAL -> DTL
DTL <- BLL -> DAL
DTL <- UI -> BLL 
```

*箭头表示用途。（所以 DAL 使用 DTL 等等......）*

我使用 POCO 作为数据传输对象，并根据 EF Code First 进行数据相关验证。我的 POCO 有关系，而关系中的 POCO 也有关系。很标准...

BL 中的所有类都根据单一职责规则处理单一 POCO 类型。令我困惑的是，当 POCO 的关系是其他 BL 关心的（以保持单一责任）时，我如何在 POCO 上应用业务规则和验证？

我将尝试给出一个简化的示例：（将*其作为伪代码阅读更多内容）*

```
public class Customer{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual Enumerable<Person> Users { get; set; }
}

public class Person{
    public int Id { get; set; }
    public string Name { get; set; }
    public Customer BelongsTo { get; set; }
    public virtual Enumerable<Property> Properties { get; set; }
}

public class Property{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
} 
```

```
public class CustomerBL{

    private DALContext = new DALContext();        

    public void Add(Customer customer){
        DALContext.Customers.Add(customer);
        DALContext.SaveChanges();
    }
}

public class PersonBL{

    private DALContext = new DALContext();        

    public void Add(Person person){
        if(person.Properties.Count() < 3)
             throw new ApplicationException("Each person must have at least three properties");

        DALContext.People.Add(person);
        DALContext.SaveChanges();
    }
} 
```

所以我的问题是，在添加新客户时，如何确保所有用户（如果在客户对象上设置了任何用户）都按照 PersonBL 的 Add 方法中的说明进行验证，而不会破坏单一责任规则（或至少以一种好的方式打破它）？

***请记住，Person 可以拥有其他关系，这些关系具有其他关系，并且都具有特定的 BL 和业务规则。我提供了一个“特定”示例，但我正在寻找更通用的解决方案。谢谢！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:33:17.527

您可能需要查看聚合根设计。

请记住，AR 应始终处于一致状态。如果您发现需要验证不应该验证的内容，那么您的聚合根扩展得太远了。当您从导航的角度考虑您的对象模型时，可能会发生这种情况：从 AI 想要到达 B，然后到 C。这是一个很容易出错的地方。如果您不使用域模型进行查询，则不需要导航。延迟加载是使用域模型进行查询/导航的另一个症状。

在您的示例`Customer`中，有一个`Person`名为`Users`. A`Person`似乎是另一个 AR。AR 不应包含其他 AR 的实例，因为这会使您的生活变得痛苦。打破这种束缚。

所以 a`Customer`可能有一个列表`Users`（或在您的域中有意义的任何内容）。用户可能具有以下结构：

```
public class User{
    public int PersonId { get; set; }
} 
```

就如此容易。现在您不必再担心了`Person`，因为这是在其他地方维护的。因此，尝试将其他聚合根表示为相关 AR 中的值对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T14:55:17.017

**如何创建一个单独的验证器类来进行验证？**然后，每当您需要对特定实体进行验证时，您可以将该工作传递给验证器，然后验证器将返回损坏的规则。这将允许您不仅在 Person 存储库中重用验证器，还可以在其他可能添加 parson 作为工作单元的一部分的区域中重用验证器。这种技术已在几个业务对象框架中使用，我已经看到这些框架保持验证独立于其他主要业务逻辑，并且还允许更轻松的测试。 [这是一个关于这个主题的好帖子。](http://blog.bobcravens.com/2010/09/the-repository-pattern-part-2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:10:39.940

*建立正确的关系方向*非常重要。

一个好的方法通常是消除实体类中的集合属性。在您的特定情况下，这些是`Customer.Users`和`Person.Properties`。让我们专注于`Customer.Users`。创建一个`Users`属性，我们表明用户列表对于`Customer`实体来说是必不可少的。但随后我们看到了一个矛盾

> 确保验证所有用户（*如果在客户对象上设置了任何用户*）

我们看到客户可以在没有用户列表的情况下存在。现在的问题是`User`没有`Customer`. 可能不是（如果是，可能是不同类型的用户）。因此，翻转关系的方向将为实体创建一个`Customer`属性，`User`并消除实体`Users`的集合属性`Customer`。

这将改进您的 POCO 的设计，因为有些人可能会认为集合属性不适合 POCO，尤其是虚拟成员。

所以，我们可以改进设计，但是我们应该如何验证关系本身呢？答案是我们需要一个不同的实体来执行这个任务。这可能是一个`CustomerRegistrationJournal`例如它可能有一个`RegisterCustomer`具有两个重载的方法：一个在`Customer`没有关联用户的情况下采用一个实体，另一个`Customer`是相关`User`帐户的列表。此方法将为每个实体调用验证并调用 DAL。这样，它将控制创建两种类型实体的事务。

在这种情况下，应该对 DAL 进行建模，以对`User`引用 a 的列强制执行外键约束`Customer`。这样，它将提供弱关系。这意味着加载`User`不会加载`Customer`，不会有级联更新或删除。`User`实体将有一个`Id`to `Customer`，与表相同`User`。这`Id`对于 a 是必不可少的，`User`但`Customer` *不是*. `User`当然，您可以将其建模为具有整个`Customer`属性，但这将是不必要的开销恕我直言（即使使用 NHibernate 延迟加载）。

应应用不同的设计策略建模`Person.Properties`。出于某种原因，Person 的某些属性必须由`Property` [值对象](http://martinfowler.com/bliki/ValueObject.html)列表表示。没有实体，值对象就不存在。值对象是其他实体的组件，它们必须与实体一起加载和更新。这是一个强大的一对多关系。这就是需要充分发挥 ORM 潜力的地方。

# javascript - 使表单中的按钮具有将数据发送到服务器的不同方法

> ID：15201893
> 
> 赞同：0
> 
> 时间：2013-03-04T12:44:01.637
> 
> 标签：javascript, jquery, html

我有一个 html 表单和 2 个按钮。表格的方法是邮寄。但是，我希望能够通过单击第二个按钮来发送**get ajax 请求。**但即使我设置了，它也会发送一个**发布**`$.ajax({type: "GET"})`请求。

我不能将第二个按钮放在表单之外，因为布局看起来不像我想要的：第二个按钮将放在下一行。

所以底线是我希望第二个按钮与第一个按钮在同一行并发送一个 get ajax 请求。

我怎样才能做到这一点？我认为重写后表单方法 get 会很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:47:39.300

您需要在发出 ajax 请求之前删除分配给按钮的默认发布操作，

```
$("#button").click(function(event) {
     event.preventDefault();
     $.ajax({
        .....
        .....
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:47:59.623

一般原则是您希望阻止第二个按钮的默认操作，并且只需在事件处理程序中进行 AJAX 调用。代码大致如下所示：

```
$('selector-for-your-button').on('click', function(event) {
    event.preventDefault(); // nullifies the click, form won't be submitted
    // make your AJAX call here
}); 
```

# mysql - 如何在不知道列名的情况下从第 N 列获得最高值

> ID：15201896
> 
> 赞同：0
> 
> 时间：2013-03-04T12:44:05.697
> 
> 标签：mysql, pdo

如何在不知道列名的情况下从表中的第二列获取最大值？在单个 SQL 查询中？

我有一组表，我想获得的值总是在第二列中（这是总是制作表的方式的一部分），但每个表中该列的名称不同。所以我可以使用一些简单的 SQL 查询来获取这个值。有任何想法吗？我知道使用 PHP 和附加查询来提取列名是可行的，但我正在寻找优雅的纯 SQL 解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:47:36.707

这将是一个乏味的过程。但是，如果有必要，您可以使用表`ORDINAL_POSITION`中的`information_schema.columns`列来获取第 N 列名称。

```
SELECT column_name 
FROM information_schema.columns 
WHERE table_name = "your table name" 
AND ordinal_position = 1 --replace 1 with your N 
```

[检查这个。](http://www.mssqltips.com/sqlservertutorial/183/informationschemacolumns/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T13:08:11.557

显而易见的解决方案是更改数据结构。使其*[相关](http://en.wikipedia.org/wiki/Relational_model)*和*[规范化](http://en.wikipedia.org/wiki/Database_normalization)*。
在一个设计合理的数据库中，像你这样简单的问题是不可能的。
总有一个字段可以查询最高值。并且在字段列表中的位置绝对无关紧要。

作为重构数据库结构的副作用，您将获得解决未来数百个其他问题的解决方案。

# css - bootstrap-sass，两次定义空白的混淆

> ID：15201897
> 
> 赞同：0
> 
> 时间：2013-03-04T12:44:13.087
> 
> 标签：css, bootstrap-sass

```
code {
   padding: 0;
   color: inherit;
   white-space: pre;              // first time
   white-space: pre-wrap;        // why do this twice?
   background-color: transparent;
   border: 0;
} 
```

在里面`/vendor/assets/stylesheets/bootstrap/_code.scss`

为什么不只是定义`white-space: pre-wrap`，从我的角度来看，它运作良好。
它是否适用于某些特殊目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:48:41.647

`pre-wrap`并非在所有浏览器中都可用，并且`pre`是其备份。

# c# - args 0 在这个程序中存储了什么

> ID：15201900
> 
> 赞同：2
> 
> 时间：2013-03-04T12:44:16.563
> 
> 标签：c#

这段代码在这个例子中做了什么，`args[0]`存储了什么？如果我想访问我的目录的路径，但我很确定我在同一行犯了一个错误，但我不能。

```
string directoryPath = args[0]; 
```

这是我的代码：

```
class Program
    {
        static void Main(string[] args)
        {

                string directoryPath = args[0];
                string[] filesList, filesListTmp;
                IFileOperation[] opList = { new FileProcNameAfter10(),
                                            new FileProcEnc(),
                                            new FileProcByExt("jpeg"),
                                            new FileProcByExt("jpg"),
                                            new FileProcByExt("doc"),
                                            new FileProcByExt("pdf"),
                                            new FileProcByExt("djvu")
                                            };
                if (Directory.Exists(directoryPath))
                {
                    filesList = Directory.GetFiles(directoryPath);
                    while (true)
                    {
                        Thread.Sleep(500);
                        filesListTmp = Directory.GetFiles(directoryPath);
                        foreach (var elem in Enumerable.Except<string>(filesListTmp, filesList))
                        {
                            Console.WriteLine(elem);
                            foreach (var op in opList)
                            {
                                if (op.Accept(elem)) op.Process(elem);
                            }
                        }
                        filesList = filesListTmp;
                        if (Console.KeyAvailable == true && Console.ReadKey(true).Key == ConsoleKey.Escape) break;
                    }
                }
                else
                {
                    Console.WriteLine("There is no such directory.");
                    Console.ReadKey();

                }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:45:09.273

> args 0 在这个程序中存储了什么

它的[命令行参数](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)，如果你从命令行执行你的参数，你会得到它的价值`exe`。

出于调试目的，您也可以通过 Visual Studio 发送它，转到项目属性、调试并在启动选项下指定。

![在此处输入图像描述](../Images/a85d3c22a28c69b05f7c5c2f54624323.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:53:32.793

> 如果我想访问我的目录的路径 [...]

如果您想获取应用程序的位置，可以尝试

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

另请参阅此问题：[如何在 .NET 控制台应用程序中获取应用程序的路径？](https://stackoverflow.com/q/837488)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T12:48:01.470

好的，所以`args[0]`代表传递给程序的第一个命令行参数-简而言之，我们不知道它在您的情况下代表什么。但是考虑这个命令行：

```
MyProgram.exe 
```

这不会将任何内容传递给`args[]`，因此不会有任何索引`0`。现在考虑这个命令行：

```
MyProgram.exe Hello 
```

这将传递`Hello`给`args[]`，因此 index 处的值`0`将是`Hello`。现在让我们考虑这个命令行：

```
MyProgram.exe Hello World 
```

这将传递`Hello`并`World`进入`args[]`，因此 index 处的值`0`将是`Hello`并且 index 处的值`1`将是`World`。现在，要记住的另一件事是`"`参数，尤其是在必须处理路径时：

```
MyProgram.exe "C:\MyPath\ToSomewhere" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T12:45:37.663

您需要将命令行参数设置为某些内容，以便`arg[0]`填充某些内容。您可以从项目属性的“调试”选项卡并设置“命令行参数”字段来执行此操作。这将允许您调试应用程序，就像在 IDE 外部运行时从提示符指定命令行一样。通常，在尝试使用参数之前，您应该始终检查参数是否存在；

```
if (args != null && args.Length > 1)
{
    // now you know there's thing in "args[0]"
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T12:46:50.157

`args[0]`包含启动应用程序时传递的第一个命令行参数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-04T12:47:34.180

args[0] 是执行期间传递的第一个参数，即

> C:\Path to your program\Program.exe "你的目录路径"

# sql - 存储过程获取参数列表和当前值

> ID：15201901
> 
> 赞同：2
> 
> 时间：2013-03-04T12:44:17.463
> 
> 标签：sql, tsql, sql-server-2005

不知道如何实现这一点，但我需要一种方法来获取存储过程的当前参数列表以及它们传入的值（此代码将在存储过程本身中执行）。

我知道我可以`sys.parameters`用来获取参数名称，但是如何获取实际值呢？

我需要做的是制作一个 char 形式的字符串

```
@param_name1=@value1,@param_name2=@value2,...,@param_namen=@valuen 
```

我曾尝试使用动态 sql，但对此并不满意。

有任何想法吗？？

编辑：

目前我只是一个一个地检查所有参数来构建字符串。但是我想要一种“更好”的方式来做到这一点，因为有很多参数。并且稍后会添加 incase 参数（但不会更新生成字符串的代码）。

我尝试使用动态 sql 但放弃了，因为`sp_executesql`sp 需要将参数传递给它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:02:02.170

您声明'（此代码将在存储过程本身中执行）。因此，假设您在过程中，您将已经知道参数名称，因为您必须在创建过程时声明它们。只需进行选择并将名称放在文本字段中

```
ALTER PROCEDURE procname
(
     @param1 NVARCHAR(255)
    ,@param2 INT
    ...
)

SELECT [Parameters] = '@param1=' + @param1 
                    + ',@param2=' + CONVERT(NVARCHAR(MAX),@param2)... 
```

这`CONVERT`是非字符数据类型的示例。

* * *

## 更新

您需要创建一个指向自身的链接服务器才能使用该`OPENQUERY`功能。

```
USE [master]
GO

/****** Object:  LinkedServer [.]    Script Date: 04/03/2013 16:22:13 ******/
EXEC master.dbo.sp_addlinkedserver @server = N'.', @srvproduct=N'', @provider=N'SQLNCLI', @datasrc=N'.', @provstr=N'Integrated Security=SSPI'
 /* For security reasons the linked server remote logins password is changed with ######## */
EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'.',@useself=N'True',@locallogin=NULL,@rmtuser=NULL,@rmtpassword=NULL

GO 
```

现在您可以执行类似此游标的操作来获取每个参数名称，然后使用动态 sql in`OPENQUERY`获取值：

```
DECLARE curParms CURSOR FOR
SELECT
    name
FROM sys.parameters
WHERE OBJECT_ID = OBJECT_ID('schema.procedurename')
ORDER BY parameter_id
OPEN curParms
FETCH curParms INTO @parmName
WHILE @@FETCH_STATUS <> -1
BEGIN
    SELECT @parmName + '=' + (SELECT * FROM OPENQUERY('linkedservername','SELECT ' + @parmName))
    FETCH curParms INTO @parmName
END
CLOSE curParms
DEALLOCATE curParms 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-19T18:58:21.147

从 SQL Server 2014 开始`sys.dm_exec_input_buffer`，它是一个表值函数，带有一个输出列`event_info`，提供完整的执行语句（包括参数）。

我们可以从中解析参数值`sys.dm_exec_input_buffer`并从中获取参数名称`sys.parameters`并将它们连接在一起以获得您想要的字符串。

例如：

```
create procedure [dbo].[get_proc_params_demo]
(
    @number1 int,
    @string1 varchar(50),
    @calendar datetime,
    @number2 int,
    @string2 nvarchar(max)
)
as
begin

-- get the full execution statement
declare @statement nvarchar(max)
select  @statement = event_info
from    sys.dm_exec_input_buffer(@@spid, current_request_id())

-- parse param values from the statement
declare @proc_name varchar(128) = object_name(@@procid)
declare @param_idx int = charindex(@proc_name, @statement) + len(@proc_name)
declare @param_len int = len(@statement) - @param_idx 
declare @params nvarchar(max) = right(@statement, @param_len)

-- create param values table
select  value, row_number() over (order by current_timestamp) seq
into    #params
from    string_split(@params, ',')

-- get final string
declare @final nvarchar(max)
select  @final = isnull(@final + ',','') + p1.name + '=' + ltrim(p2.value)
from    sys.parameters p1
        left join #params p2 on p2.seq = parameter_id
where   object_id = @@procid

select  @final params
end 
```

要测试它：

```
exec get_proc_params_demo 42, 'is the answer', '2019-06-19', 123456789, 'another string' 
```

返回你想要的字符串：

```
@number1=42,@string1='is the answer',@calendar='2019-06-19',@number2=123456789,@string2='another string' 
```

我有类似的东西包装成 UDF。我用它来记录 catch 块中的错误。

# c - s(n)printf 打印的字符多于格式说明符指定的字符

> ID：15201904
> 
> 赞同：1
> 
> 时间：2013-03-04T12:44:28.417
> 
> 标签：c, embedded, stdio

我`sprintf`在嵌入式系统（Libelium Waspmote，类似于 Arduino）上遇到了一个奇怪的问题，其中 sprintf 输出的字符多于格式说明符给出的字符。在这个特定的例子中，我`%02X`用来输出数组中字节的十六进制值。然而，在某些字节上，不是写入 2 个字符，而是写入 4 个字符，并`FF`在实际字节值之前添加前缀。`snprintf`行为类似，除了它遵守指定的缓冲区大小并仅打印前缀。

作为参考，这里是打印数组内容的代码片段：

```
char *pduChars = (char *) malloc(17*sizeof(char));
pduData.toChar(pduChars);
for (int i = 0; i < 17; i++) {
    char asciiCharsS[5];
    char asciiCharsSN[3];
    int printedS = sprintf(asciiCharsS, "%02X", pduChars[i]);
    int printedSN = snprintf(asciiCharsSN, 3, "%02X", pduChars[i]);
    USB.print(printedS);
    USB.print(" ");
    USB.print(printedSN);
    USB.print(" ");
    USB.print(asciiCharsS);
    USB.print(" ");
    USB.print(asciiCharsSN);
    USB.println(" ");
} 
```

该片段的输出（仅删节为错误字节）：实际字节序列应为 0x00 0xFC 0xFF 0xFF 0x48 0xA5 0x33 0x51

`sprintf snprintf sprintf Buffer snprintf Buffer`

`…<br> 2 2 00 00
4 4 FFFC FF
4 4 FFFF FF
4 4 FFFF FF
2 2 48 48
4 4 FFA5 FF
2 2 33 33
2 2 51 51`

我是否在这里忽略了某些东西，或者这可能是与实施有关的特定于平台的问题`s(n)printf`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:53:14.910

我猜你的实现是使用带**符号**的字符。该格式`"%X"`需要**无符号**值。铸造或`unsigned char`改用。

```
/* cast */
int printedS = sprintf(asciiCharsS, "%02X", (unsigned char)pduChars[i]);
int printedSN = snprintf(asciiCharsSN, 3, "%02X", (unsigned char)pduChars[i]); 
```

或者

```
/* use unsigned char */
unsigned char *pduChars = malloc(17); /* cast is, at best, redundant */
                                      /* sizeof (char) is, by definition, 1 */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:46:05.273

您使用的格式说明符修饰符仅用于填充。如果值的符号数超过指定值，将打印整个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:00:14.857

%02X 用于填充...它不会省略...因此，如果您的值大于指定值，则将打印整个字符串

# shell - 如何在终端中查看文件夹的属性？

> ID：15201906
> 
> 赞同：3
> 
> 时间：2013-03-04T12:44:36.860
> 
> 标签：shell, ubuntu

如何在终端中查看文件夹（包括子文件夹）的属性，因为 Windows 给出了大小、文件数量、文件夹数量等属性......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T12:49:14.247

您想做的所有事情都有单独的命令。例如：

总尺寸：

```
du -hc FOLDER 
```

文件数：

```
find FOLDER -maxdepth 1 -type f | wc -l 
```

文件夹数：

```
find FOLDER -maxdepth 1 -type d | wc -l 
```

等等。通常，实现同一件事的方法不止一种。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-10T09:04:22.020

使用`ll`或`ls -l`查看详细信息..

# c# - 没有找到证书

> ID：15201908
> 
> 赞同：0
> 
> 时间：2013-03-04T12:44:41.657
> 
> 标签：c#, azure

我正在尝试对 Azure 管理 API 的用户进行身份验证。我正在关注本教程：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee460782.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460782.aspx)

但是，当我执行它时，我总是收到“找不到证书”错误。什么可能导致这种情况？我的代码与示例中的代码完全相同：

```
 // Values for the subscription ID and List Hosted Services operation.
        // 
        string subscriptionId = "****************";

        // The opperation to be performed. This value can be modified to reflect the operation being performed.
        string operationName = "hostedservices";

        // Build a URI for https://management.core.windows.net/<subscription-id>/services/<operation-type>
        Uri requestUri = new Uri("https://management.core.windows.net/"
                                + subscriptionId
                                + "/services/"
                                + operationName);

        // Create the request and specify attributes of the request.
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestUri);

        // Define the requred headers to specify the API version and operation type.
        request.Headers.Add("x-ms-version", "2010-10-28");
        request.Method = "GET";
        request.ContentType = "application/xml";

        // The thumbprint value of the management certificate.
        // You must replace the string with the thumbprint of a 
        // management certificate associated with your subscription.
        string certThumbprint = "*************";

        // Create a reference to the My certificate store.
        X509Store certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);

        // Try to open the store.
        try
        {
            certStore.Open(OpenFlags.ReadOnly);
        }
        catch (Exception e)
        {
            if (e is CryptographicException)
            {
                Console.WriteLine("Error: The store is unreadable.");
            }
            else if (e is SecurityException)
            {
                Console.WriteLine("Error: You don't have the required permission.");
            }
            else if (e is ArgumentException)
            {
                Console.WriteLine("Error: Invalid values in the store.");
            }
            else
            {
                throw;
            }
        }

        // Find the certificate that matches the thumbprint.
        X509Certificate2Collection certCollection = certStore.Certificates.Find(X509FindType.FindByThumbprint, certThumbprint, false);
        certStore.Close();

        // Check to see if our certificate was added to the collection. If no, throw an error, if yes, create a certificate using it.
        if (0 == certCollection.Count)
        {
            throw new Exception("Error: No certificate found containing thumbprint " + certThumbprint);
        }

        // Create an X509Certificate2 object using our matching certificate.
        X509Certificate2 certificate = certCollection[0];

        // Attach the certificate to the request.
        request.ClientCertificates.Add(certificate);

        try
        {
            // Make the call using the web request.
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();

            // Display the web response status code.
            Console.WriteLine("Response status code: " + response.StatusCode);

            // Display the request ID returned by Windows Azure.
            if (null != response.Headers)
            {
                Console.WriteLine("x-ms-request-id: "
                + response.Headers["x-ms-request-id"]);
                Console.ReadKey();
            }

            // Parse the web response.
            Stream responseStream = response.GetResponseStream();
            StreamReader reader = new StreamReader(responseStream);

            // Display the raw response.
            Console.WriteLine("Response output:");
            Console.WriteLine(reader.ReadToEnd());
            Console.ReadKey();

            // Close the resources no longer needed.
            response.Close();
            responseStream.Close();
            reader.Close();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }

    } 
```

# php - 提交没有任何变量名的表单

> ID：15201914
> 
> 赞同：0
> 
> 时间：2013-03-04T12:45:06.167
> 
> 标签：php, html, forms

我需要向 URL 提交一个表单`/search/`，没有任何变量名。因此，如果我输入“foobar”表单，它将以 GET 格式将表单提交到`/search/foobar`.

我怎样才能做到这一点？据我所知，没有办法用 HTML 做到这一点，我将不得不使用 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:00:08.477

```
<form action = "/search/" onsubmit="this.action += encodeURIComponent(this.term.value); this.term.disabled = 'disabled'">
<input type="text" name="term">
</form> 
```

# php - PHP 和 JQuery 实时定价。

> ID：15201917
> 
> 赞同：0
> 
> 时间：2013-03-04T12:45:10.747
> 
> 标签：php, jquery

我有一个 PHP 循环，它遍历数据库中的行，然后列出所有汽车。

```
$getcars = $carstring;
while($searchcars = mysql_fetch_array($getcars)) { 
```

所以我多次以这条线结束：

```
<div id="price_<?php echo $carid; ?>">&euro;<?php echo number_format($bookingprice, 2); ?></div> 
```

所以每个人都有一个唯一的ID。到目前为止一切都很好：

```
$bookingprice 
```

是由 PHP 包含文件计算的变量，是汽车的基本报价。

然后用户可以添加额外的东西，在这样做的同时，我想实时更新价格。

所以我写了一些JQuery：

```
 var price = "<?php echo $finalprice; ?>";
        alert(price);
        var numberofboostseat = $(this).val();
        alert(numberofboostseat);
        var numofdays = "<?php echo $length->days; ?>";
        alert(numofdays);
        var boostcost = Number(3) * Number(numofdays);
        var boosttotal = Number(numberofboostseat) * Number(boostcost);
        var newprice = Number(price) + Number(boosttotal);
        $('#price_<?php echo $carid; ?>').html(newprice); 
```

我的问题是脚本不在循环内，所以它不知道要更新哪个价格。如果我将它们都设为同一类，它会更新页面上每辆车的所有价格，这不是预期的结果，我只想更新某个价格字段，但我正在努力弄清楚如何告诉 JQuery 哪个.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:27:07.950

您可以使用 php 脚本打印 html 内容，例如

```
$cras = '';

while($searchcars = mysql_fetch_array($getcars)) {
    $cars .= '<div id=' . searchcars['id'] . '>&euro; ' . number_format(searchcars['bookingprice'], 2); . '</div>';
}

<div class="price">
<?php echo $cars; ?>
</div> 
```

# javascript - javascript焦点功能无法按预期工作

> ID：15201918
> 
> 赞同：2
> 
> 时间：2013-03-04T12:45:12.770
> 
> 标签：javascript, html, css

我有一个 jsp/html 页面。这个页面是从两个不同的链接访问的。它是 Menu1-->demo.html 页面和 Menu2-->demo.html 页面（在我的情况下是它的 jsp） 在 demo.html 页面中，我有一个默认禁用的文本框。

```
<input class="mytextinputtextField" type="text" id="countryOfOrigin"
readonly style="background-color:#DCDCDC"   /> 
```

现在，当从 Menu2 访问 demo.html 页面时，我正在使用隐藏参数检查它并再次启用文本框并将焦点设置在文本框上。

```
if(document.getElementById("submenu_name").value=="PM")
{
   document.getElementById("countryOfOrigin").focus();
} 
```

该字段已启用并且光标可见，但如果我键入文本，则不会在文本框中键入文本。我需要点击文本框来输入文本。我认为这是因为禁用并再次启用该字段。请任何人都可以帮助我从javascript中输入焦点事件的文本框。我没有使用 JQuery，浏览器是 IE 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:12:00.717

尝试这个 ：

```
document.getElementById("countryOfOrigin").removeAttribute('readOnly'); 
```

jQuery版本：

```
jQuery('#countryOfOrigin').removeAttr('readOnly'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:08:44.683

谢谢您的帮助。我找到了解决方案，或者可能会说解决方法。我正在粘贴可能对其他人有用的代码

```
if(document.getElementById("submenu_name").value=="PM")
{
 document.getElementById("countryOfOrigin").focus();
 document.getElementById("countryOfOrigin").select();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:30:53.157

您是否尝试过删除该属性？

```
document.getElementById("countryOfOrigin").Attributes.Remove("readonly"); 
```

或者

```
document.getElementById("countryOfOrigin").removeAttribute("readonly"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T12:53:11.043

这是一个非官方的解决方案，我们必须使用 setTimeout() 函数来延迟 focus() 的执行时间。

```
setTimeout(function() { document.getElementById('myInput').focus(); }, 10); 
```

见[http://www.mkyong.com/javascript/focus-is-not-working-in-ie-solution/](http://www.mkyong.com/javascript/focus-is-not-working-in-ie-solution/)

# ios - 试图在 UIWebView 中保存 html 的加载时间

> ID：15201921
> 
> 赞同：0
> 
> 时间：2013-03-04T12:45:33.737
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

我有一个本地`NSArray`的 html 字符串。当用户在 gui 中向后移动或向前移动时，每次点击都会将数组中的一个新 html 加载到`UIWebview`. 加载 html 需要 1-2 秒，这是我试图避免的。我考虑过`UIWebviews`一次使用 3 个并加载 3 个 html，但只`UIWebVIew`向用户显示一个。当用户四处移动时，加载似乎是即时的。你能想出一个更好的主意吗，还是我走在正确的轨道上？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:40:40.767

你在正确的轨道上。我建议像 UITableView 重用单元一样重用 webview。如果需要，您可以在第一次渲染每个 webview 时对其进行快照，然后在其他时间加载 webview 时显示图像。

# java - Java中基于模板提取网页信息

> ID：15201922
> 
> 赞同：13
> 
> 时间：2013-03-04T12:45:35.377
> 
> 标签：java, text-extraction, named-entity-extraction

现在我使用[Jsoup](http://jsoup.org)从一些第三方网页中提取某些信息（不是所有文本），我会定期进行。这工作正常，直到某些网页的 HTML 发生变化，这种变化会导致现有 Java 代码发生变化，这是一项繁琐的工作，因为这些网页变化非常频繁。它还需要程序员来修复 Java 代码。这是我在网页上感兴趣的 HTML 代码示例：

```
<div>
<p><strong>Score:</strong>2.5/5</p>
<p><strong>Director:</strong> Bryan Singer</p>
</div>
<div>some other info which I dont need</div> 
```

现在这就是我想要做的，我想在本地保存这个网页（一个 HTML 文件）并从中创建一个模板，比如：

```
<div>
<p><strong>Score:</strong>{MOVIE_RATING}</p>
<p><strong>Director:</strong>{MOVIE_DIRECTOR}</p>
</div>
<div>some other info which I dont need</div> 
```

连同网页的实际 URL，这些 HTML 模板将作为 Java 程序的输入，Java 程序将找出这些预定义关键字的位置（例如**{MOVIE_RATING}**、**{MOVIE_DIRECTOR}**）并从实际网页中提取值。

这样我就不必每次网页更改时都修改Java程序，我只需保存网页的HTML并用这些关键字替换数据，其余的将由程序处理。例如，将来实际的 HTML 代码可能如下所示：

```
<div>
<div><b>Rating:</b>**1/2</div>
<div><i>Director:</i>Singer, Bryan</div>
</div> 
```

相应的模板将如下所示：

```
<div>
<div><b>Rating:</b>{MOVIE_RATING}</div>
<div><i>Director:</i>{MOVIE_DIRECTOR}</div>
</div> 
```

非程序员也可以创建此类模板，任何可以编辑文件的人都可以完成。

现在的问题是，我怎样才能在 Java 中实现这一点，是否有任何现有的更好的方法来解决这个问题？

**注意：** *在谷歌搜索时，我发现了一些研究论文，但其中大多数都需要一些先前的学习数据，准确性也是一个问题。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T01:31:22.920

> *除了正则表达式部分外，您提供的方法与吉尔伯特的方法非常相似。我不想进入丑陋的正则表达式世界，我计划在电影信息之外的许多其他领域使用模板方法，例如价格、产品规格提取等。*

1.  您描述的模板实际上并不是正常意义上的“模板”：一组静态内容被转储到输出中，其中插入了一堆动态内容。相反，它是模板的“逆向”——它是一种被吞并丢弃的解析模式，留下需要的参数。

2.  因为您的网页会定期更改，所以您不希望将要解析的内容硬编码得太精确，而是希望“放大”其基本特征，尽量减少假设。即，您希望承诺按字面意思匹配“Rating:”等关键文本，并`"<b/>"`以更灵活的方式处理交错标记——忽略它并允许它在不中断的情况下进行更改。

3.  当您结合 (1) 和 (2) 时，您可以为结果指定任何您喜欢的名称，但它是使用正则表达式进行解析。即模板方法是使用正则表达式的解析方法——它们是相同的。问题是：正则表达式应该采用什么形式？

    3A。如果您使用 java 手工编码进行解析，那么显而易见的答案是正则表达式格式应该只是`java.util.regex`格式。其他任何东西都是开发负担并且是“非标准的”并且难以维护。

    3B。如果您想使用支持 html 的解析器，那么 jsoup 是一个很好的解决方案。问题是您需要比 jsoup 提供的更多的文本/正则表达式处理和灵活性。它似乎过于锁定特定的 html 标记和结构，因此在页面更改时会中断。

    3C。您可以使用更强大的语法控制的通用文本解析器，例如 ANTLR - 一种受 backus-naur 启发的语法形式用于控制解析，并插入生成器代码来处理解析的数据。在这里，解析语法表达式确实非常强大，它具有复杂的规则，用于文本在页面上的排序方式以及文本字段和值如何相互关联。由于您没有处理语言，因此功能超出了您的要求。无可避免的事实是，您仍然需要描述要跳过的丑陋位 - 例如标记标签等。第一次与 ANTLR 搏斗涉及教育投资，然后才能获得生产力回报。

    3D。是否有一个 java 工具只使用简单的模板类型方法来给出一个简单的答案？好吧，谷歌搜索并没有给太多希望[https://www.google.com/search?q=java+template+based+parser&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-GB :official&client=firefox-a](https://www.google.com/search?q=java%20template%20based%20parser&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-GB%3aofficial&client=firefox-a)。我相信任何创建这样一个野兽的尝试都会退化为基本的正则表达式解析或更高级的语法控制解析，因为匹配/忽略/替换文本的基本要求推动了这些方向的解决方案。其他任何事情都太简单而无法实际工作。对不起，负面观点 - 它只是反映了问题空间。

我投票赞成 (3A) 作为满足您需求的最简单、最强大和最灵活的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T02:54:32.170

这里不是真正基于模板的方法，但如果您只是将[Selector](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)查询外部化到配置文件，jsoup 仍然是一个可行的解决方案。

您的非程序员甚至不必查看 HTML，只需更新配置文件中的选择器即可。像[SelectorGadget](http://www.selectorgadget.com/)这样的东西可以更容易地挑选出实际使用的选择器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T19:42:06.553

> 我怎样才能在 Java 中实现这一点，是否有任何现有的和更好的方法来解决这个问题？

模板方法是一个很好的方法。你在你的问题中给出了所有的原因。

您的模板将仅包含您要处理的 HTML，没有其他内容。这是基于您的示例的示例。

```
<div>
<p><strong>Score:</strong>{MOVIE_RATING}</p>
<p><strong>Director:</strong>{MOVIE_DIRECTOR}</p>
</div> 
```

基本上，您将使用 Jsoup 来处理您的模板。然后，当您使用 Jsoup 处理网页时，您检查所有已处理的模板以查看是否有匹配项。

在模板匹配中，您在已处理的模板中找到关键字，然后在已处理的网页中找到相应的值。

是的，这将是大量的编码，并且比我的描述更难。您的 Java 程序员将不得不将此描述分解为越来越简单的任务，直到她或他能够编写这些任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T00:09:27.937

如果网页经常更改，那么您可能希望将 MOVIE_RATING 等字段的搜索限制在页面的最小可能部分，而忽略其他所有内容。有两种可能性：您可以为每个字段使用正则表达式，或者您可以使用某种 CSS 选择器。我认为任何一个都可以工作，并且“模板”可以包含一个简单的搜索表达式列表，正则表达式或 css，您可以应用。只需滚动列表并提取您可以提取的内容，如果由于页面更改而找不到某些特定字段，则失败。

例如，正则表达式可能如下所示：

```
"Score:"(.)*[0-9]\.[0-9]\/[0-9] 
```

（我没有测试过这个。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T21:04:19.197

或者您可以尝试不同的方法，使用我称之为“规则”而不是模板：对于您需要从页面获取的每条信息，您可以定义提取文本的 jQuery 表达式。通常，当页面更改很小时，同样编写良好的 jQuery 表达式仍然会给出相同的结果。

然后您可以使用[Jerry](http://jodd.org/doc/jerry/index.html)（Java 中的 jQuery），使用几乎相同的表达式来获取您要查找的文本。因此，它不仅与选择器有关，而且您还有其他用于遍历/过滤 DOM 树的 jQuery 方法。

例如，某些*Director*文本的规则是（类似于 sudo-java-jerry-code）：

```
$.find("div#movie").find("div:nth-child(2)")....text(); 
```

规则中可能有更多（和更复杂）的表达式，分布在多行中，例如迭代一些节点等。

如果您是 OO 人，则每个规则都可能在其自己的实现中定义。如果您是 groovy 人，您甚至可以在需要时重写规则，而无需重新编译您的项目，并且仍然在 java 中。等等。

如您所见，这里的核心思想是定义如何查找文本的**规则；**并且不匹配模式，因为这可能对微小的变化很脆弱 - 想象一下如果在两个 div 之间添加了一个空格:)。在我的这个示例中，我使用了类似 jQuery 的语法（实际上，它是类似 Jerry 的语法，因为我们使用的是 Java）来定义规则。这只是因为 jQuery 流行且简单，并且您的 Web 开发人员也知道；最后，您可以定义自己的语法（取决于您使用的解析工具）：例如，您可以将 HTML 解析为 DOM 树，然后使用您的辅助方法编写规则，如何将其遍历到感兴趣的地方。Jerry 还允许您访问底层 DOM 树。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T12:53:20.820

我使用以下方法在我的个人项目中执行类似的操作，该项目从[西班牙领先的房地产网站](http://www.idealista.com/en/)生成 RSS 提要。

使用这个工具，我找到了我目前居住的租来的地方；-)

1.  从页面获取 HTML 代码
2.  将 HTML 转换为 XHTML。我用这个[这个库](http://nekohtml.sourceforge.net/)我想今天可能有更好的选择
3.  使用 XPath 将 XHTML 导航到您感兴趣的信息

当然，每次他们更改原始页面时，您都必须更改 XPath 表达式。我能想到的另一种方法——对原始 HTML 源代码的语义分析——远远超出了我的卑微技能；-)

# asp.net - 无法在 RadAjaxPanel 中检索 RadTextBox/ASP.NET TextBox 更新值

> ID：15201924
> 
> 赞同：1
> 
> 时间：2013-03-04T12:45:37.303
> 
> 标签：asp.net, telerik

这真的很尴尬。我正在研究 Telerik 控件。我有一个 .NET Web 用户控件，其中有一些 RadCombo 框和一个新添加的 RadTextBox。所有这些都在 RadAjaxPanel 和 RadLoadingAjaxPanel 中。当用户控件加载时，所有控件都从数据库中加载值，包括 RadTextBox。

（问题从这里开始）当我尝试更新 RadTextBox 控件值并尝试提交时，我“总是”获取文本框的旧值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:51:34.310

请检查您的`Page_Load`事件并验证您是否有`if(!IsPostBack)`将原始值加载到`RadTextBox`.

# iphone - 图像在 iOS 中用手指在屏幕上移动

> ID：15201927
> 
> 赞同：0
> 
> 时间：2013-03-04T12:45:42.047
> 
> 标签：iphone, ios, cocoa-touch, touch

我正在为 iOS 开发一个绘图应用程序。

我已经创建了一个图像列表，当用户点击将选择的任何图像时，我还获得了所选图像的标签值。

选择后我想用手指在屏幕上移动图像，我已经成功完成了这个过程，但是当我想应用标签时，我不会通过触摸获得图像的标签值。我用于移动图像的代码如下。在这个视图数组中是我在屏幕上选择的图像数组。

```
CGPoint firstTouch = [touch locationInView:selectedPerson_ImageView];
for (UIImageView *view in viewArray) {
    if (CGRectContainsPoint(view.frame, firstTouch)) 
    {
        toMove = view;
    }
} 
```

如何获取要移动的图像的标签值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:38:48.150

You can get the tag value of touch location view by using this

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
       UITouch *touch = [touches anyObject];
       int viewTag=[touch view].tag;
} 
```

# maven - 在 Maven 发布期间更新版本属性准备

> ID：15201930
> 
> 赞同：4
> 
> 时间：2013-03-04T12:45:45.113
> 
> 标签：maven, maven-release-plugin

如何在更新期间更新属性`mvn release:prepare`

我的 pom.xml 看起来像这样：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.mycompany.proj</groupId>
  <artifactId>mavenproject1</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <properties>
    <proj-dependency-version>1.0.0-SNAPSHOT</proj-dependency-version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>my.proj.dependency</groupId>
      <artifactId>proj-dependency</artifactId>
      <version>${proj-dependency-version}</version>
    </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:50:45.153

我通过 maven version:update_properties 插件找到了解决方案

# php - 如何从 php 脚本中获取 Windows 登录 ID？

> ID：15201931
> 
> 赞同：1
> 
> 时间：2013-03-04T12:45:47.147
> 
> 标签：php, apache

我有一个 PHP Web 应用程序。当用户打开它时，我需要获取 Windows 系统的登录 ID。我不再对用户进行身份验证。

我听说过 Active Directory，但我不想再次对用户进行身份验证。打开我的 Web 应用程序时，应自动捕获用户名。

如何在我的 PHP 脚本中获取登录 ID？

我还听说为 mod_ntlm 环境和 REMOTE_USER 变量等配置 Apache 服务器。我不知道所有这些。任何人都可以简单地说，以便我可以继续配置所有这些吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:54:55.687

如果仅在内部 LAN 上运行并且网络上的所有 Windows 机器都针对 SBS 或完整的 Windows Active Directory 进行身份验证，则您可以使用 LDAP 查询来查询浏览页面的用户的登录。多年前我为内部网做了这个。它非常可靠，但仅适用于针对 Windows 域进行身份验证的内部用户。

**基本 LDAP 查询**

```
 <?php

    // basic sequence with LDAP is connect, bind, search, interpret search result,
    // close connection

    $ds=ldap_connect("192.168.0.1");        // ! Your LDAP/Active Direcotry Server !
    echo "Connection: ".$ds."";

    if ($ds) {
            echo "Binding ..";
            $r=ldap_bind($ds);        // this is an "anonymous" bind, typically read-only access
            echo "Bind result is ".$r."";
            echo "Searching for (sn=A*) .."; // this example searches surname entry for all surnames starting with A
            $sr=ldap_search($ds,"o=Organisation Name, c=UK", "sn=A*"); // ! must use real base dn here !
            echo "Search result is ".$sr."";
            echo "Number of entires returned is ".ldap_count_entries($ds,$sr)."";
            echo "Getting entries ...";
            $info = ldap_get_entries($ds, $sr);
            echo "Data for ".$info["count"]." items returned:";

            for ($i=0; $i<$info["count"]; $i++) {
               echo "dn is: ". $info[$i]["dn"] ."";
               echo "first cn entry is: ". $info[$i]["cn"][0] ."";
               echo "first email entry is: ". $info[$i]["mail"][0] ."";
            }
    //now  close connection
    ldap_close($ds);
} else {
    echo "Unable to connect to LDAP server";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:52:24.893

我非常怀疑任何 Web 应用程序是否可以获取 Windows 登录 ID - 这将是一个非常严重的安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:10:05.563

据我所知，您能做的最好的事情就是存储用户的 ip 并使用它来自动登录（在他们通过身份验证一次之后）。您可以从 $_SERVER['REMOTE_ADDR'] 获取用户的 ip。

Keep in mind though, IPs can be spoofed and can change (sometimes frequently, sometimes rarely), so it's not a very secure or reliable way to log someone in automatically. However, depending on the nature of your application, it could be sufficient. Particularly if you're only using it on an intranet (in which case you could set static ips, if needed).

# api - 决定耦合程度

> ID：15201938
> 
> 赞同：1
> 
> 时间：2013-03-04T12:46:00.870
> 
> 标签：api, oop, loose-coupling

我有一个组件，它的 API 公开了大约 10 个功能。我可以想到两种方法来实现它：

1.  将所有这些功能作为单独的功能提供。

2.  仅公开一个以 XML 作为输入的函数。根据指定的 request_Type 和 XML 中传递的参数，我在内部调用了相应的函数之一。

Q1。第二种设计会比第一种更松散耦合吗？

我总是读到我应该如何尝试我的组件松散耦合，我真的应该达到这种程度来实现失去耦合吗？

Q2。就 OOP 而言，其中哪一个是更好的设计，为什么？

* * *

编辑：

如果我通过 D-Bus 公开这个 API 供其他人使用，类型检查是否仍然是比较这两种方法的考虑因素？据我了解，类型检查是在编译时完成的，但是如果这个函数通过一些 IPC 暴露出来，类型检查的问题就会出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T12:58:02.067

您建议的两个替代方案在您希望从 API 提供的“功能”数量（显然相当大）方面没有区别。然而，第二个似乎有很多缺点，因为你失去了任何强类型检查，记录功能等变得更加困难。（我看到的唯一优点是，如果你添加功能，你不需要更改你的 API . 但缺点是用户直到运行时才能弄清楚 API 更改（如删除的函数）。）

与这个问题更相关的是**单一责任原则**（[http://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)）。当你在谈论 OOP 时，你不应该在一个类中公开你的数十个函数，而是将它们拆分到不同的类中，每个类都有一个单一的职责。定义良好的“职责”和角色需要一些练习，但遵循一些基本准则将帮助您快速入门。请参阅[OOP 是否有任何规则？](https://stackoverflow.com/questions/399656/are-there-any-rules-for-oop)一个好的起点。

* * *

**回复问题编辑**

我没有使用过 D-Bus，所以这可能是完全错误的。但是通过快速浏览我阅读的[教程](http://dbus.freedesktop.org/doc/dbus-tutorial.html)

> 每个对象都支持一个或多个接口。将接口视为一组命名的方法和信号，就像在 GLib、Qt 或 Java 中一样。接口定义对象实例的类型。
> 
> DBus 使用简单的命名空间字符串标识接口，例如 org.freedesktop.Introspectable。大多数绑定会将这些接口名称直接映射到适当的编程语言结构，例如 Java 接口或 C++ 纯虚拟类。

据我了解，D-Bus 具有不同对象的概念，这些对象提供由多种方法组成的接口。这意味着（对我而言）我上面的回答仍然适用。指定 API 的“D-Bus 本机”方式意味着展示接口，我看不出好的 OOP 设计指南不应该有效的任何理由，在这里。由于 D-Bus 似乎将这些甚至映射到本地语言结构，这更有可能。

当然，没有人会阻止您仅使用 XML 构建自己的 API 描述语言。但是，诸如此类的事情是对底层技术的某种滥用。你应该有充分的理由做这样的事情。

# javascript - jquery/javascript 检查多个子字符串的字符串

> ID：15201939
> 
> 赞同：10
> 
> 时间：2013-03-04T12:46:04.560
> 
> 标签：javascript, jquery, string, search

我需要检查一个字符串是否具有三个子字符串之一，如果是，则实现一个函数。我知道我可以使用检查一个子字符串，`if (str.indexOf("term1") >= 0)`但是有没有一种方法可以检查多个子字符串，而不是使用此代码的多个实例？

TIA

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-04T12:49:19.903

```
if (/term1|term2|term3/.test("your string")) {
   //youre code
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-06-24T19:33:40.927

这可以动态而优雅地实现您想要做的事情

```
const terms = ["term1", "term2", "term3"]
const str = "very large string to check for term1, tern2, etc ..."

// check if the string has some of the terms
const result1 = terms.some(term => str.includes(term))

// check if the string has all the terms
const result2 = terms.every(term => str.includes(term)) 
```

这也使得为子字符串数组过滤字符串数组变得容易

```
const terms = ["term1", "term2", "term3"]
const strings = ["very large string text ....", "another large string text"] 

// filter the strings of the array that contain some of the substrings we're looking for
const result1 = strings.filter(str => terms.some(term => str.includes(term)))

// filter the strings of the array that contain all the substrings we're looking for
const result2 = strings.filter(str => terms.every(term => str.includes(term))) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-04T12:49:30.313

你可以使用循环。甚至可以像这样创建一个辅助函数：

```
function ContainsAny(str, items){
    for(var i in items){
        var item = items[i];
        if (str.indexOf(item) > -1){
            return true;
        }

    }
    return false;
} 
```

然后你可以这样调用：

```
if(ContainsAny(str, ["term1", "term2", "term3"])){
   //do something
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T12:48:53.793

也许是这样：

```
if (str.indexOf("term1") >= 0 || str.indexOf("term2") >= 0 || str.indexOf("term3") >= 0) 
{
 //your code
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T12:50:41.570

你可以做类似的事情

```
function isSubStringPresent(str){
    for(var i = 1; i < arguments.length; i++){
        if(str.indexOf(arguments[i]) > -1){
            return true;
        }
    }

    return false;
}

isSubStringPresent('mystring', 'term1', 'term2', ...) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-08T08:26:30.963

该`.map()`函数可用于将术语数组转换为**布尔值**数组，指示是否找到每个术语。然后检查是否有任何**布尔值**是`true`.

给定一个数组`terms`：

```
const terms = ['term1', 'term2', 'term3']; 
```

`true`如果`string`包含以下任何内容，则此代码行将返回`terms`：

```
terms.map((term) => string.includes(term)).includes(true); 
```

三个例子：

```
terms.map((term) => 'Got term2 here'.includes(term)).includes(true);       //true
terms.map((term) => 'Not here'.includes(term)).includes(true);             //false
terms.map((term) => 'Got term1 and term3'.includes(term)).includes(true);  //true 
```

或者，如果你想将代码包装成一个可重用的`hasTerm()`函数：

```
const hasTerm = (string, terms) =>
   terms.map(term => string.includes(term)).includes(true);

hasTerm('Got term2 here', terms);       //true
hasTerm('Not here', terms);             //false
hasTerm('Got term1 and term3', terms);  //true 
```

试试看：
[https ://codepen.io/anon/pen/MzKZZQ?editors=0012](https://codepen.io/anon/pen/MzKZZQ?editors=0012)

`.map()`文档：
[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

**笔记：**

1.  该答案针对简单性和可读性进行了优化。如果需要非常大的术语数组，请使用一旦找到术语就会短路的循环。
2.  为了支持 IE，transpile 以用声明替换出现的`.includes(x)`with`.indexOf(x) !== -1`和`=>`with `function`。

# sql-server - xml查询变量

> ID：15201945
> 
> 赞同：0
> 
> 时间：2013-03-04T12:46:28.233
> 
> 标签：sql-server, xml

我正在尝试将 xpath 作为参数传递给查询。

```
 declare @test as nvarchar(1000) = '(ns1:Book/Authors)[1]'
   ;with XMLNAMESPACES ('MyNameSpace:V1' as ns1)
   select 
    b.XmlData.value(
     '@test'
     , 'nvarchar(100)') as QueriedData 
   from Books b
   where b.BookID = '1' 
```

上面的语句给出了以下错误。

```
XQuery [Books.XmlData.value()]: Top-level attribute nodes are not supported 
```

尝试将其作为@test，而不是'@test'。并得到以下错误：

```
The argument 1 of the XML data type method "value" must be a string literal. 
```

尝试使用 'sql:variable(@test)' 并得到这个错误：

```
XQuery [Books.XmlData.value()]: A string literal was expected 
```

尝试将其作为'sql：variable（“@test”）'并将@test中的值显示为QueriedData，这是错误的

请告诉我我在这里缺少什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:35:02.633

不能将变量用作 XQuery 表达式，但表达式*可以引用*变量。

```
set @ix = 2
with XMLNAMESPACES ('MyNameSpace:V1' as ns1)
select 
 b.XmlData.value(
  '((ns1:Book/ns1:Authors)[sql:variable("@ix")])[1]'
  , 'nvarchar(100)') as QueriedData 
    from Books b
    where b.BookID = '1' 
```

这包括元素名称。例如，要将节点名称放在参数中：

```
declare @elementName nvarchar(20) set @elementName = 'Authors'

    with XMLNAMESPACES ('MyNameSpace:V1' as ns1)
    select 
     b.XmlData.value(
      '((//ns1:*)[ local-name()=sql:variable("@elementName") ] )[1]'
      , 'nvarchar(100)') as QueriedData 
```

这意味着“在名称空间 ns 中查找元素，其本地名称为 @elementName，然后返回第一个。”

# python - 赋值时 a[] 和 a[:] 有什么区别？

> ID：15201946
> 
> 赞同：4
> 
> 时间：2013-03-04T12:46:33.887
> 
> 标签：python, variable-assignment, slice

我碰巧看到了这段代码：

```
a = []  
a = [a, a, None]
# makes a = [ [], [], None] when print

a = []
a[:] = [a, a, None]
# makes a = [ [...], [...], None] when print 
```

似乎`a[:]`分配分配了一个指针，但我找不到有关它的文档。所以有人可以给我一个明确的解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T12:51:11.013

在 Python 中，`a`是一个名称——它指向一个对象，在本例中是一个列表。

在您的第一个示例中，`a`最初指向空列表，然后指向新列表。

在您的第二个示例中，`a`指向一个空列表，然后将其*更新*为包含新列表中的值。这不会更改列表`a`引用。

最终结果的不同之处在于，由于首先评估操作的右侧，因此在两种情况下都`a`指向原始列表。这意味着在第一种情况下，它指向曾经是的列表`a`，而在第二种情况下，它指向自身，形成一个递归结构。

如果您无法理解这一点，我建议您将[其可视化](http://www.pythontutor.com/visualize.html#code=a+%3D+%5B%5D++%0Aa+%3D+%5Ba,+a,+None%5D%0A%0Aa+%3D+%5B%5D%0Aa%5B%3A%5D+%3D+%5Ba,+a,+None%5D&mode=display&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&py=2&curInstr=0)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T12:51:27.360

第一个将指向`a`一个新对象，第二个将 mutate `a`，因此引用的列表`a`仍然相同。

例如：

```
a = [1, 2, 3]
b = a
print b # [1, 2, 3]

a[:] = [3, 2, 1]
print b # [3, 2, 1]
a = [1, 2, 3]
#b still references to the old list
print b # [3, 2, 1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:24:28.387

来自@pythonm 响应的更清晰的示例

```
>>> a=[1,2,3,4]
>>> b=a
>>> c=a[:]
>>> a.pop()
4
>>> a
[1, 2, 3]
>>> b
[1, 2, 3]
>>> c
[1, 2, 3, 4]
>>> 
```

# c# - 将 SpecFlow 用于项目架构 (MVP-VM)

> ID：15201951
> 
> 赞同：1
> 
> 时间：2013-03-04T12:46:49.360
> 
> 标签：c#, winforms, mvp, specflow

我是第一次尝试 SpecFlow，我想知道我是否可能过度思考了整个概念，或者更糟糕的是，完全滥用它来达到预期目的？

我想为我的 WinForms 项目采用 MVP-VM 架构设计模式，并列出样板故事，以定义遵循相同模式的未来项目。

欢迎任何建议，谢谢！

```
Feature: DesignPattern
    In order to encourage pluggability and loose coupling
    As a software developer who has to comply with company GUI standards
    I want to make sure the MVP-VM design pattern is enforced

@mytag
Scenario: MainPresenter loosely couples with IMainView and IModelContainer implementations
    Given a stub of the IMainView interface
    And a stub of the IModelContainer interface
    When I create a new MainPresenter with the IMainView and IModelContainer stubs as arguments
    Then the MainPresenter should have the IMainView and IModelContainer stubs as properties

Scenario: MainPresenter tightly couples with MainViewModel
    Given a stub of the IMainView interface
    And a stub of the IModelContainer interface
    When I create a new MainPresenter with the IMainView and IModelContainer stubs as arguments
    Then the MainPresenter should have a collection of MainViewModels as a property

Scenario: IModelContainer contains all required model interfaces
    Given a stub of the IModelContainer interface
    Then the IModelContainer stub should have an IContractsModel property

Scenario: IMainView extends the company BaseView GUI standard
    Given a stub of the IMainView interface
    Then the IMainView stub should extend the IBaseView interface

Scenario: IMainView exposes a datasource binding method that accepts a collection of MainViewModels as argument
    Given a stub of the IMainView interface
    And a collection of MainViewModels
    Then the IMainView stub should have a BindViewModelsList method that accepts the collection of MainViewModels

Scenario: MainViewModel takes a ContractDataEntity and stores it as a property
    Given a ContractDataEntity
    When I create a new MainViewModel with the ContractDataEntity as argument
    Then the MainViewModel should have the ContractDataEntity as a property

Scenario: MainViewModel presents the required attributes of its associated DataEntity
    Given a ContractDataEntity
    When I create a new MainViewModel with the ContractDataEntity as argument
    Then the MainViewModel should have the ContractDataEntity ContractNumber as a property
    And the MainViewModel should have the ContractDataEntity CustomerCode as a property

Scenario: MainViewModel has a factory method that translates a collection of DataEntities into MainViewModels
    Given a collection of ContractDataEntities
    When I call the MainViewModel TranslateDataEntityList factory method
    Then it should return a collection on MainViewModels 
```

然后，我将从 SpecFlow 方法生成类、属性和方法存根：

```
using Rhino.Mocks;
using Should.Fluent;
using TechTalk.SpecFlow;

namespace CONTR001.Test
{
    [Binding]
    public class DesignPatternSteps
    {
        [Given(@"a stub of the IMainView interface")]
        public void GivenAStubOfTheIMainViewInterface()
        {
            IMainView view = MockRepository.GenerateStub<IMainView>();
            ScenarioContext.Current.Set(view);
        }

        [Given(@"a stub of the IModelContainer interface")]
        public void GivenAStubOfTheIModelContainerInterface()
        {
            IModelContainer model = MockRepository.GenerateStub<IModelContainer>();
            ScenarioContext.Current.Set(model);
        }

...

        [When(@"I create a new MainPresenter with the IMainView and IModelContainer stubs as arguments")]
        public void WhenICreateANewMainPresenterWithTheIMainViewAndIModelContainerStubsAsArguments()
        {
            var view = ScenarioContext.Current.Get<IMainView>();
            var model = ScenarioContext.Current.Get<IModelContainer>();
            var presenter = new MainPresenter(view, model);
            ScenarioContext.Current.Set(presenter);
        }

...

        [Then(@"the MainPresenter should have the IMainView and IModelContainer stubs as properties")]
        public void ThenTheMainPresenterShouldHaveTheIMainViewAndIModelContainerStubsAsProperties()
        {
            var presenter = ScenarioContext.Current.Get<MainPresenter>();
            presenter.View.Should().Equal(ScenarioContext.Current.Get<IMainView>());
            presenter.Model.Should().Equal(ScenarioContext.Current.Get<IModelContainer>());
        }

...

        [Then(@"the IMainView stub should extend the IBaseView interface")]
        public void ThenTheIMainViewStubShouldExtendTheIBaseViewInterface()
        {
            var view = ScenarioContext.Current.Get<IMainView>();
            view.Should().Be.AssignableFrom<IBaseView>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:48:59.053

您怀疑自己的过度思考/未用于预期目的这一事实已经告诉您，您已经从这次经历中学到了很多东西。SpecFlow 是一个主要用于支持 BDD 的工具，BDD 是一个从业务中获取知识并定义成功标准的过程。这绝对不是 BDD，但我当然可以想象得出这些测试使您能够详细考虑您的领域。您已经通过规范生成了一些完整的单元测试示例，这很有用。一旦您认为您的代码库足够成熟以至于它们没有任何用途，您可能会选择在将来（还没有）删除这些测试，即使如此，编写它们也阐明了您对事物应该如何工作的看法。

当我第一次开始使用 SpecFlow 时，我以与这些非常相似的粒度级别编写了大量测试。我还写了一些更高级别的文章，几乎是系统集成级别。现在事后看来，我的观点发生了变化，我发现自己在 nUnit 中编写了类似的低级测试，而在 SpecFlow 中编写了更高级别的测试。每种技术都有它的位置，我发现从 Specflow 到 c# Bindings 的转换为低级测试增加了一层额外的复杂性。

但是不要放弃 SpecFlow/Gherkin/BDD，当您在正确的粒度级别上使用它时，它比单元测试具有一些奇妙的优势。你只需要找到你满意的水平。对我来说，这就是我可以提取功能文件并与某人喝咖啡讨论的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:00:34.093

我不认为您将 SpecFlow 用于我所理解的原始目的，但是我认为您仍然“明白”并且您所做的仍然是一个很好的用途。

据我了解，SpecFlow 用于描述行为——我不会说这些场景就是这样的行为。但是，您已经设法用适当的语言描述了您的需求并为它们编写了测试，所以我想这证明它在这方面也很有用。祝你好运！

# sql - 非 root 用户访问 postgres

> ID：15201953
> 
> 赞同：2
> 
> 时间：2013-03-04T12:46:53.353
> 
> 标签：sql, postgresql, postgresql-9.1, postgresql-9.2

我在 postgres 中创建了一个名为“databaseName”的 postgres 数据库。现在我可以通过

```
 su - postgres 
```

然后输入我的密码

然后我通过：psql databaseName进入数据库

我通过以下方式创建了该数据库的用户：

```
 createuser -P userName1 
```

现在我不希望数据库的用户以 root 用户身份访问数据库。现在，当用户尝试以

```
 su - postgres -u userName1 
        or through
 psql databaseName -u userName1 
```

我收到错误...有人可以指导我用户如何在不成为 root 用户的情况下访问 postgres 和数据库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T13:01:44.177

配置`pg_hba.conf`为接受`peer`通过 unix 套接字的连接或`ident`通过`host`(tcp) 连接的连接。如果您愿意，可以`md5`改用密码身份验证。

默认情况下`psql`，将使用与本地操作系统用户名相同的用户名进行连接；这可以被`-U`标志覆盖，例如：

```
psql -U myusername thedatabase 
```

请注意，它`-U`不是`-u`（它是大写的）。

PostgreSQL 文档中详细介绍了这一切；看：

*   [客户端认证](http://www.postgresql.org/docs/current/static/client-authentication.html)
*   [`pg_hba.conf`](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)
*   [`psql`](http://www.postgresql.org/docs/current/static/app-psql.html)

顺便说一句，如果你想以`postgres`用户身份运行命令，而不是`su`'ing 你可以写：

```
sudo -u postgres psql 
```

# codeigniter - Codeigniter Active Record 类插入

> ID：15201954
> 
> 赞同：4
> 
> 时间：2013-03-04T12:47:01.487
> 
> 标签：codeigniter, activerecord

我有一个新闻跟踪网站，我们已经迁移到 Codeigniter，我遇到了使用 Codeigniter Active Record 的问题——我没有足够的知识来解决这个问题。

在旧代码中 - 我们进行插入，在插入中我们执行 SELECT FROM 以获取插入中一个字段的值

```
$this->db->query("INSERT INTO news_item_keywords_link (news_item_keyword, keyword) 
SELECT $version_id, keyword FROM news_item_keywords_link WHERE       news_item_keyword=$old_version 
```

我曾尝试使用 Active Record 来做到这一点，但我不知道该怎么做，或者你可能无法使用 Active Record 来做到这一点。

我已经尝试了一些事情，我的问题是如何使用 Active Record 在 INSERT 语句中执行内联 FROM。我试过这种方式，但它没有工作得到语法错误，任何建议。

```
if ($this->db->insert('news_item_keywords', Array(
                    'news_item_keyword' => $version_id,
                    'keyword' => $this-db->select('keyword') 
                                 ->from('news_item_keywords')
                                 ->where('news_item_keyword', $old_version);
    ))) { 
```

我应该安装 ORM 库来扩展功能吗？如果是这样，推荐使用什么 ORM 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T07:58:13.950

第一件事将模型加载到控制器中......

模型：

```
function add($data){
$this->insert("tablename",$data);
}
function select_keyword($oldversion){
 $this->db->select("keyword");
 $this->db->where("news_item_keywords",$oldversion);
 $this->db->get("news_item_keywords");
} 
```

控制器：

```
function create(){

$data = array('news_item_keyword' => $version_id,
              'news_item_keywords' => $this->modelname->select_keyword("oldversion")
             );
$this->modelname->insert($data);//successful!

} 
```

# assembly - 如何在汇编语言 8086 中设置 1 秒时间延迟

> ID：15201955
> 
> 赞同：8
> 
> 时间：2013-03-04T12:47:10.947
> 
> 标签：assembly, time, delay, x86-16

我的问题是我编写了一个代码，该代码应该将结果输出到一组连接到并行端口的 LED 中。当我运行代码时，它几乎什么也没做。我的导师告诉我，代码运行得太快，我的眼睛看不到发生了什么。

我发现有几种方法可以延迟时间，我尝试循环 NOP，但我认为我无法真正确定发生了什么。有没有更好的办法？

我在这里有一部分代码，我必须在其中添加时间延迟：

```
org 100h

mov ax, 0
mov dx, 378
out dx, ax
mov ax, 1  

; 1st

mov cx, 1ah
start1st:
mov ax, 1
left:
out dx, ax 
; --------------------------------> how to loop?
mov bx, 2
mul bx
cmp ax, 80h
jl left
dec cx
cmp cx,0
jg start1st
; end 1st 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-04T18:20:05.453

使用以下指令设置 100 万微秒间隔（1 秒）。

```
MOV     CX, 0FH
MOV     DX, 4240H
MOV     AH, 86H
INT     15H 
```

您可以使用 86H 和 INT 15H 设置多秒延迟

检查这些链接以获取更多详细信息

[在将控制权返回给调用者之前等待指定的微秒数](http://vitaly_filatov.tripod.com/ng/asm/asm_026.13.html)

[INT 15H 86H：等待](http://webpages.charter.net/danrollins/techhelp/0221.HTM)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T13:28:52.707

您可以使用中断`1Ah`/函数`00h`（[GET SYSTEM TIME）](http://www.ctyme.com/intr/rb-2271.htm)获取自午夜以来的时钟滴答数（18.2/s）`CX:DX`。

因此，要使用这种方法等待大约 1 秒，您需要执行一次此中断函数，将 CX:DX 保存在一个变量中，然后在循环中执行相同的中断，直到 的绝对值`CX:DX - firstCX:DX`大于 18。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T15:43:59.757

我最终使用的是 nop 循环

```
; start delay

mov bp, 43690
mov si, 43690
delay2:
dec bp
nop
jnz delay2
dec si
cmp si,0    
jnz delay2
; end delay 
```

我使用了两个寄存器，我将它们都设置为任何高值，并且它会继续循环，直到两个值都变为零

我在这里使用的是`AAAA`两个`SI and BP`，我最终每个延迟循环大约 1 秒。

感谢大家的帮助，是的，我们仍然使用 MS DOS 来学习这门汇编语言课程 :(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T15:27:15.073

或者，您可以创建一个进程并在每次想要延迟时调用它，只使用计数器寄存器和堆栈实现。

下面的示例延迟大约 1/4 秒。

```
delay       proc
            mov     cx, 003H
    delRep: push    cx
            mov     cx, 0D090H
    delDec: dec     cx
            jnz     delDec
            pop     cx
            dec     cx
            jnz     delRep
            ret
delay       endp 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-23T17:10:49.150

```
.DATA TIK DW ?
...
MOV AX,00H
INT 1AH

MOV TIK,DX
ADD TIK, 12H

DELAY:
MOV AX,00H
INT 1AH
CMP TIK, DX
JGE DELAY 
```

我是手机的。对不起我的输入;）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-03-05T13:11:11.287

```
DELAY_1SEC: MOV R3,#0AH;10D
LOOP1:      MOV R2,#64H;100D
LOOP2:      MOV R1,#0FAH;250D
LOOP3:      NOP
            NOP
            DJNZ R1,LOOP3;4x250Dx1,085us=1,085ms (0s.001ms010)/cycle
            DJNZ R2,LOOP2;3x100Dx1,085ms=325,5ms (0s.100ms309)/cycle
            DJNZ R3,LOOP1;3x10Dx325,5us=976,5ms (1s.604ms856)/cycle
            RET 
```

# android - android : facebook 登录使用 facebook sdk 3 没有安装 facebook 应用程序

> ID：15201956
> 
> 赞同：1
> 
> 时间：2013-03-04T12:47:13.553
> 
> 标签：android, facebook, login

我在我的应用程序中使用 facebook sdk 3。我想获取一些要在我的应用程序中使用的用户信息。如果我在我的设备中安装了 facebook 应用程序，它工作得很好。它要求登录，如果它没有登录并且可以工作。但即使设备上没有安装 facebook 应用程序，我也希望我的应用程序能够正常工作。我该怎么做。我的代码如下。请帮忙

```
Session.openActiveSession(this, true, new Session.StatusCallback() {

        // callback when session changes state
        @Override
        public void call(Session session, SessionState state,
                Exception exception) {
            if (session.isOpened()) {
                // make request to the /me API
                Request.executeMeRequestAsync(session,
                        new Request.GraphUserCallback() {

                            // callback after Graph API response with user
                            // object
                            @Override
                            public void onCompleted(GraphUser graphuser,
                                    Response response) {
                                L
                                if (graphuser != null) {
                                    GraphObject graphObject = response
                                            .getGraphObject();
                                    Log.i(" facebookLogin Email is ",
                                            "value"
                                                    + graphObject
                                                            .getProperty("email"));
                                    User user = getUserDetails(graphObject,
                                            graphuser.getId());
                                    sendFBCredentialsToServer(user);
                                    updateSharedPrefsWithFacebookCredentials(user);

                                }
                            }

                        });
                Toast.makeText(getApplicationContext(),
                        "Pls wait , Fetching data", Toast.LENGTH_LONG)
                        .show();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:45:15.810

```
// Add code to print out the key hash

try {
PackageInfo info = getPackageManager().getPackageInfo(
        "com.your.packagename", 
        PackageManager.GET_SIGNATURES);
for (Signature signature : info.signatures) {
    MessageDigest md = MessageDigest.getInstance("SHA");
    md.update(signature.toByteArray());
    Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));// g
    }
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

} 
```

在 onCreate 上添加此代码并从 facebook 获取哈希键并在 facebook 上的应用程序设置中替换此键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:59:27.340

在 main.xml 中添加 Facebook LoginButton

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<com.facebook.widget.LoginButton
    android:id="@+id/loginButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Login With Facebook" />

</LinearLayout> 
```

现在，每当您单击 facebook 登录按钮时，它会打开 facebook 应用程序（如果已安装），否则会在 webview 中打开 facebook 登录页面

创建

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

   LoginButton authButton = (LoginButton) view.findViewById(R.id.loginButton);
   authButton.setReadPermissions(Arrays.asList("email","user_about_me"));

} 
```

onSessionStateChange

```
private void onSessionStateChange(Session session, SessionState state, Exception exception) {
             if( session.isOpen())
                  getUserData();

}
public void getUserData()
{
Request.executeMeRequestAsync(Session.getActiveSession(), 
                              new GraphUserCallback() {

        @Override
        public void onCompleted(GraphUser user, Response response) {

            Log.d("FNAME", user.getFirstName());
            Log.d("LNAME", user.getLastName());
            Log.d("GENDER",user.getProperty("gender").toString());
            Log.d("EMAIL_ID",user.getProperty("email").toString());
            Log.d("FACEBOOK_ID",user.getId());
             }                  
    });
 } 
```

# iphone - 使用 UIProgressView 进行图像编辑

> ID：15201957
> 
> 赞同：0
> 
> 时间：2013-03-04T12:47:16.923
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiprogressview

在我的应用程序中，我为`image`. 我想补充`UIProgressView`一下，因为完成编辑大约需要几秒钟。如何`UIProgressView`为这种方法添加一个并更新它完成的百分比？我已经经历了很多例子，`UIProgressView`但它们是用于`Http`请求和加载网络数据的。如何为自定义方法实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:14:53.953

我想您需要为此使用操作队列。

```
[NSThread detachNewThreadSelector:@selector(showProgressView:) toTarget:self withObject:nil]; 
```

这对我有用，我希望它也对你有用。祝你编码愉快。！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:57:57.057

如果您可以控制完成的编辑量，就像任何委托事件一样，您可以像网络调用或其他一样更新进度。即使您没有此类事件，您也可能有一些内部方法，它们可以为您提供所发生的总进度的增量。

然后你可以有一个方法来接受这个增量，将它添加到现有的进度中。

```
- (void)updateProgress:(CGFloat)delta
{
    [self.progressView setProgress:self.progressView.progress+delta];
    self.progressLabel.text = [NSString stringWithFormat:@"Completed : %.0f",self.progressView.progress*100];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:47:51.057

在不知道您可以使用哪些数据的情况下很难回答这个问题，但从本质上讲，您需要有一个方法可以以一致的周期性时间间隔调用，直到应用图像过滤器。这样做的一个技巧是，如果您可以为过滤器提出一个时间估计值，然后只需使用 NSTimer 来触发一个方法，直到该时间完成。虽然如果你能弄清楚它过滤的确切时间，那显然是更可取的。

从那里您需要将进度视图的进度设置为该时间超过总时间，就像这样......

```
self.progressView.progress = (float) progress 
```

请记住，尽管进度视图是一个百分比，所以您需要存储两个值来比较（彼此相除）1）总时间量 2）经过的总时间量。您可以通过在用户@interface 中设置浮动进度来做到这一点。

# html - 图片作为列表项未显示在 Chrome 浏览器中

> ID：15201958
> 
> 赞同：0
> 
> 时间：2013-03-04T12:47:16.947
> 
> 标签：html, google-chrome, html-lists, image

由于某种原因`<li></li>`，Chrome浏览器停止显示图片。它显示在 Firefox 甚至 IE 中。我在 Chrome Shift+F5 中进行了缓存刷新，但没有帮助。

相关代码部分如下。

```
<ul>
    <li><a href="http://www.itse.co.za" title="For Consulting Services" target="_blank"><img src="images/adverts/itse-hori.jpg" width="280" height="158" alt="itse" /></a></li>
</ul> 
```

出了什么问题？是我的浏览器还是我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:03:34.553

我在 Chrome 中进行了测试，它工作正常，检查浏览器的设置，或尝试图像中的完整 url。

```
<ul><li><a href="http://www.itse.co.za" title="For Consulting Services" target="_blank"><img src="http://cdn.sejalivre.org/uploads/2011/08/firefox.jpg" width="200" height="200" alt="itse" /></a></li></ul> 
```

# spring-mvc - 在普通 Servlet 中访问 Spring 代理会话对象

> ID：15201963
> 
> 赞同：1
> 
> 时间：2013-03-04T12:47:37.487
> 
> 标签：spring-mvc, spring-aop

我已将表单对象声明为代理范围并在会话中维护。每当我自动装配表单对象时，代码都可以正常工作。如果我想在普通 POJO 类中访问 war 层中的表单对象，那么它会失败，因为我不是在普通 Java 类（非 Spring）中自动装配。代码片段...

```
@Scope(proxyMode = ScopedProxyMode.TARGET_CLASS, value = "session")
class FormA{
} 
```

在 Spring 控制器中，我可以在 SpringController 下面检索 FormA

```
@Controller
Class ControllerB{
@Autowired
FormA formA;
} 
```

但我的要求是在普通 Servlet（非 Spring 类，servlet 2.4 实现）中访问 FormA。如何在 Servlet 中检索 FormA 的实例？

在 web.xml 中添加了以下侦听器条目，但它返回新的 formA 而不是会话中的原始 formA 对象。

```
<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:38:50.787

如果请求、会话和全局会话范围的 bean 被注入到 Singleton 或原型范围的 bean 中，Spring 将注入一个生成的代理作为依赖项。

填充代理的目标对象时，在请求范围的情况下，它将存储为线程本地对象，对于会话范围，它将存储在会话中。在代理上进行调用时，它将调用委托给线程本地/会话范围的目标对象.

在您的情况下，如果 FormA 对象已被填充并且代理已被注入控制器，那么您应该能够在该请求中使用此代理来访问 FormA 对象，前提是它在单线程/会话中。

# c# - BigInteger.ToString("x") 不能正确打印负十六进制数

> ID：15201965
> 
> 赞同：3
> 
> 时间：2013-03-04T12:47:41.650
> 
> 标签：c#, .net, tostring, biginteger

我需要将 BigInteger 打印为负数，但是 ToString("X") 的十六进制重载不正确。

```
 BigInteger be1 = new BigInteger();
        be1 = 0x7e;
        Console.WriteLine(be1.ToString());     // 126
        Console.WriteLine(be1.ToString("X"));  // 7E
        Console.WriteLine(be1.ToString("x"));  // 7e
        Console.WriteLine();
        be1 = BigInteger.Negate(be1);  
        Console.WriteLine(be1.ToString());     // -126  OK
        Console.WriteLine(be1.ToString("X"));  // 82  WRONG
        Console.WriteLine(be1.ToString("x"));  // 82 WRONG 
```

我做错了什么，我该如何解决这个问题？

（我这样做是值得的，所以我可以[在这里匹配十六进制输出，以 C++ 数组为例](https://github.com/bitcoin/bitcoin/blob/master/src/bignum.h#L362)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T12:55:59.897

`ToString`打印一个十六进制整数，就好像它没有符号一样。要使用符号打印十六进制，请取反该值并在其前面加上符号。

```
BigInteger v = new BigInteger(-10);
string str = "-" + (-v).ToString("X");  // "-0A" 
```

作为一种扩展方法，它可以像这样工作：

```
class Program
{
    static void Main(string[] args)
    {
        BigInteger v = new BigInteger(-10);
        Console.WriteLine(v.ToSignedHexString());   // Prints: "-0A"
        Console.ReadLine();
    }
}

public static class BigIntegerExtensions
{
    public static string ToSignedHexString(this BigInteger value)
    {
        if (value.Sign == -1)
            return "-" + (-value).ToString("X");
        else
            return value.ToString("X");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:56:21.647

对于 C#，数字的十六进制格式输出永远不会是负数。

这也适用于整数 - 例如，

```
int x = -1000;
Console.WriteLine(x.ToString("X")); 
```

输出

```
FFFFFC18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:04:20.327

十六进制不能为负数。所以使用 Math.Sign 和 Math.Abs​​ ：

```
 int v = -126;
        Console.WriteLine("{0} => {1}", v, (Math.Sign(v) < 0 ? "-" : String.Empty) + Math.Abs(v).ToString("X")); 
```

# javascript - 传递给 Javascript 时 ASP.NET DateTime 对象“更改”

> ID：15201966
> 
> 赞同：2
> 
> 时间：2013-03-04T12:47:44.207
> 
> 标签：javascript, asp.net, web-services, utc

我的 ASP.NET 网络服务在我的测试环境中的本地计算机上运行。我的本地计算机 UTC 时间是 +1（丹麦）。现在我的 javascript 客户端可以使用这些方法：

```
[WebMethod(EnableSession=true)]
public DateTime GetDateTime() {
  return new DateTime(2013,3,15,10,0,0);
}

[WebMethod(EnableSession=true)]
public void SetDateTime(DateTime DT) {

} 
```

当我从 javascript 调用第一个方法并提醒传递的 DateTime 时，它​​正确显示了上午 10 点的时间：'Fri Mar 15 2013 10:00:00 GMT+0100 (Romance Standard Time)' 在此警报之后，我立即通过了 DateTime对象返回到网络服务器。但是当我调试这个对象时，DateTime 现在是上午 9 点。怎么会？客户端和服务器在同一台机器上运行。我玩过 DateTime.SpecifyKind，但总的来说结果是一样的；当时间被发送回服务器时，客户端减去一个小时。

希望你能帮助我更好地理解这个主题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:16:32.350

@millimoose 我已经尝试过 DateTimeOffset 解决方案，但它并没有真正帮助。我不确定我是否 100% 正确使用它。现在对我有用的是：

在我将 DateTime(s) 从服务器发送到客户端之前，我不对 DateTime 做任何事情（例如设置 UTC）。然后，javascript 客户端会显示正确的时间。当 javascript 将时间发送回服务器时，会增加一个小时。然后我打电话给 .ToLocalTime(); 在 DateTime 对象上，时间现在是正确的。

# c++ - 通过 OpenCV/C++ 使用 Android 手机摄像头作为网络摄像头

> ID：15201967
> 
> 赞同：2
> 
> 时间：2013-03-04T12:47:46.350
> 
> 标签：c++, opencv

我需要一个移动摄像头作为网络摄像头。我需要为我的 openCV 应用程序进一步处理相机视频。但是可用于此目的的软件缺乏所需的 api 文档。（我的意思是如何访问手机摄像头界面）所以任何人都可以给我这个场景的好建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-17T10:30:49.640

为了让它工作，我们首先需要一个移动客户端。您可以在您的安卓手机上下载“IP 网络摄像头”应用程序。配置端口（例如：2333）并启动服务器。

如果您的计算机和移动设备连接到同一个本地网络，您可以在计算机的 Web 浏览器上键入您的手机应用程序上显示的 IP 地址。那应该没问题。这样，流通过速度很慢的wifi传输。

为了提高速度，您可以通过 USB 连接。我们将通过 USB 重定向 TCP 流。在您的 android 设备上打开调试模式并在您的计算机上安装 android ADB 工具。要转发流，语法是：

```
adb forward <local> <remote>
for example:
./adb forward tcp:5555 tcp:2333 
```

将您的手机转发`192.168.XX.XX:2333`到您的计算机`http://localhost:5555/`

然后你可以使用这个链接。

要在您的 OpenCV 项目中使用，请尝试以下示例：

```
#include <opencv2/opencv.hpp>
#include <iostream>

int main(int, char**) {
    cv::VideoCapture vcap;
    cv::Mat image;

    const std::string videoStreamAddress = "http://localhost:5555/video";
       //open the video stream and make sure it's opened
    if(!vcap.open(videoStreamAddress)) {
        std::cerr << "Error opening video stream or file" << std::endl;
        return -1;
    }

    for(;;) {
        vcap.read(image);
        cv::imshow("Output Window", image);

        if(cv::waitKey(1) >= 0) break;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:52:33.757

我认为，这实际上不是 openCV 的问题。我假设该应用程序将在 PC 上运行。你有两个选择：

1.  尝试使用特定于设备的驱动程序与手机的摄像头交互。也许他们中的一些人支持这样的功能。

2.  为您的手机编写一个应用程序，它将通过 WiFi、蓝牙或其他方式流式传输视频。然后编写一组驱动程序，它将尝试检索视频源并作为网络摄像头提供给操作系统。

第三种选择涉及在移动设备上录制视频，然后将其传输到 PC，但我想这不是一个选择。

# ruby - 带有 Kaminari 的 Sinatra：无法加载此类文件 -- kaminari/sinatra

> ID：15201968
> 
> 赞同：1
> 
> 时间：2013-03-04T12:47:48.720
> 
> 标签：ruby, sinatra, kaminari

我想用 kaminari 在 Sinatra 中实现分页。我的 Gemfile 看起来像这样：

```
source "https://rubygems.org"
gem "sinatra"
gem "activerecord", :require => "active_record"
gem "mysql2"
gem "padrino-helpers"
gem "kaminari", :require => "kaminari/sinatra" 
```

我的 Sinatra config.ru 有一个`Bundler.require`.

但是，Passenger 显示以下错误：`cannot load such file -- kaminari/sinatra`

我不知道怎么了。关于 Sinatra 的 kaminari 的文档并不多，我发现的唯一一点是：“你需要 padrino-helpers 并且需要 kaminari/sinatra”。这就是我所做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T17:46:46.507

Sinatra (~> 1.4.0) 依赖于 rack (1.5.2)，而 kaminari (~> 0.13.0) 依赖于 rack (~> 1.2.1)。而且由于 kaminari 从 0.13.0 版本开始才开始对 Sinatra 进行实验性支持，因此似乎陷入了僵局。

# post - 使用 GET 方法上传文件

> ID：15201976
> 
> 赞同：44
> 
> 时间：2013-03-04T12:48:17.703
> 
> 标签：post, file-upload, upload, get

众所周知，文件上传最常使用`POST`方法来完成。那么，为什么该`GET`方法不能用于文件上传呢？是否有针对 HTTP`GET`上传的具体禁令？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-04T20:46:05.450

## GET 请求可能包含实体主体

RFC 2616 不阻止将实体主体作为 GET 请求的一部分。这经常被误解，因为 PHP 以其*名称不佳的* `$_GET`superglobal 混淆了水域。`$_GET`从技术上讲，它与 HTTP`GET`请求方法无关——它只不过是来自请求 URI 查询字符串的 url 编码参数的键值列表。`$_GET`即使请求是通过 POST/PUT/etc 发出的，您也可以访问该数组。很奇怪，对吧？不是一个很好的抽象，是吗？

## 为什么 GET 实体主体是个坏主意

那么[规范对 GET 方法有](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.1)什么看法......好吧：

> 特别是，已经建立了约定，即 GET 和 HEAD 方法不应该具有采取除检索之外的操作的意义。这些方法应该被认为是“安全的”。

所以 GET 的重要一点是确保任何 GET 请求都是安全的。尽管如此，禁令只是*“不应该”* ......从技术上讲，HTTP 仍然允许 GET 请求导致不严格基于“检索”的操作。

当然，从语义的角度来看，使用名为`GET`“获取”资源之外的方法执行操作也没有多大意义。

## 当 GET 实体主体完全错误时

关于幂等性，规范说：

> 方法还可以具有“幂等性”的属性，因为（除了错误或过期问题）N > 0 个相同请求的副作用与单个请求相同。GET、HEAD、PUT 和 DELETE 方法共享此属性。

这意味着 GET 方法*不能*对同一资源的多个请求产生不同的副作用。因此，无论作为 GET 请求的一部分存在的实体主体如何，副作用都必须始终相同。用外行的话来说，这意味着如果你发送一个带有实体主体的 GET 100 次，服务器就不能创建 100 个新资源。无论是发送一次还是发送 100 次请求都必须具有相同的结果。这严重限制了 GET 方法发送实体主体的有用性。

当有疑问时，在评估方法的有效性及其产生的副作用时，总是回退到安全性/幂等性测试。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-07-26T11:24:07.120

在 GET 方法的情况下

1.  以名称/值对的形式将表单数据附加到 URL 中，并且 URL 的长度是有限的（3000 个字符）。
2.  不能使用表单将文件内容放入 URL 参数中。所以使用 POST
3.  在 Get 方法中，action 的值会附加一个 `?' 到它，然后附加表单数据集，使用“application/x-www-form-urlencoded”内容类型编码。用户代理然后遍历此 URI 的链接。在这种情况下，表单数据**仅限于 ASCII 代码**。

因此，在 GET 方法中无法上传文件

# magento - 如何使用自定义选项 ID 为 Magento 网站上提供的各种产品生成下载链接？

> ID：15201984
> 
> 赞同：0
> 
> 时间：2013-03-04T12:48:44.957
> 
> 标签：magento

我想获取 Magento 产品的自定义选项 ID，以在 Magento 中生成不同的可下载链接。

我在 One 产品中有三个自定义选项。

选项1：免费

选项2：付费

选项3：两者

如果我选择选项 1，那么它将允许我下载该模块的免费版本。如果我选择选项 2，那么它将允许我下载模块的付费版本。很快..

因此，我想为不同的选项添加不同的下载链接，点击后将根据所选的特定自定义选项进行结帐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:22:02.503

我已经实现了类似的东西（[见这里](http://www.lingerieletters.co.za/subscribe)）

```
<div class="styled-select">
<select name="options[22]">
    <option value="57">SA Postal (Free)</option>
    <option value="56">Registered Mail (+ R22 pm)</option>
    <option value="53">Door to Door (+ R30 pm)</option>
</select>
</div> 
```

现在转到管理面板（后端）并选择目录 -> 管理产品。选择您要为其创建自定义链接的产品。转到自定义选项。如果您“检查元素”或查看页面的源代码，您会发现：

```
<tr id="product_option_22_select_53"><td><input type="hidden" name="product[options][22][values][53][option_type_id]" value="53"> 
```

你会看到你只需要匹配这些值。在这种情况下，options[22] 是哪个选项，53 是“Delivery Type”和“Door to Door”的值。

只需查看产品页面即可了解产品页面上的表单（目录/产品/视图）的外观，并在查看产品选项时查看产品选项。

# inheritance - 在 OpenERP 7.0 中自定义员工表单

> ID：15201992
> 
> 赞同：0
> 
> 时间：2013-03-04T12:48:59.890
> 
> 标签：inheritance, customization, field, openerp

我想在 OpenERP 7.0 的员工表单中添加一个字段“员工档案号”。我已经查看了官方文档，在谷歌上搜索但找不到一个简单的例子。如果有人可以提供一个很好的逐步示例，我是 OpenERP 的新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:40:33.800

在您的模块中添加以下代码。

**py文件：**

```
class hr_employee(osv.osv):

    _inhetit= 'hr.employee'

    _columns = {
        'emp_file':fields.char('Employee File Number', size='128'),
    }

hr_employee() 
```

**XML 文件：**

```
<record id="view_hr_employee_inherited" model="ir.ui.view">
    <field name="name">view.hr.employee.inherited</field>
    <field name="model">hr.employee</field>
    <field name="inherit_id" ref="hr_employee.view_employee_form" />
    <field name="arch" type="xml">
        <field name="name" position="after">
            <field name="emp_file" />
        </field>
    </field>
</record> 
```

# javascript - 添加第二个提交处理程序

> ID：15201993
> 
> 赞同：0
> 
> 时间：2013-03-04T12:49:00.570
> 
> 标签：javascript, javascript-events

我正在尝试修改一个看起来像这样的现有网页

```
<script type="text/javascript" src="s1.js"></script> 
```

s1.js 有这样的东西

```
window.onDomReady = DomReady;

function DomReady(fn)
{
    if(document.addEventListener)
    {
        document.addEventListener("DOMContentLoaded", fn, false);
    }
    else
    {
        document.onreadystatechange = function(){chState(fn);};
    }
}

function chState(fn)
{
    if(document.readyState == "interactive" || document.readyState == "complete")
        fn();
}

window.onDomReady(addHndlrs);

function addHndlrs()
{
    var forms = document.getElementsByTagName("form");
    for(var i = 0; i < forms.length; i++) 
    {
        var form = forms[i];
        if(form.addEventListener)
        {
            form.addEventListener("submit", DoValidate, false);
        }
        else if (form.attachEvent)
        {
            form.attachEvent("onsubmit", DoValidate);
        } 

        Other stuff.

    } 
```

当我在表单上单击提交时，会调用 DoValidate。

我正在尝试修改此页面以添加另一个在第一个提交处理程序之后调用的提交处理程序。

我复制了上面的代码，更改了函数名并放入 s2.js。

```
window.onDomReady = DReady;

function DReady(fn)
{
    if(document.addEventListener)
    {
        document.addEventListener("DOMContentLoaded", fn, false);
    }
    else
    {
        document.onreadystatechange = function(){Chk1State(fn);};
    }
}

function Chk1State(fn)
{
    if(document.readyState == "interactive" || document.readyState == "complete")
        fn();
}

window.onDomReady(myready);

function myready()
{
    var forms = document.getElementsByTagName("form");
    for(var i = 0; i < forms.length; i++) 
    {
        var form = forms[i];
        if(form.addEventListener) 
        {
            form.addEventListener("submit", mynewhandler, false);
        }
        else if (form.attachEvent) 
        {
            form.attachEvent("onsubmit", mynewhandler);
        }
    }

} 
```

在表单 html 中，我添加了对它的引用

```
<script type="text/javascript" src="s1.js"></script>
<script type="text/javascript" src="s2.js"></script> 
```

我的新提交处理程序永远不会被调用。我通过 firebug 对其进行了调试 - 我看到 DReady 被调用并且我的 DOM Ready 处理程序被注册。但是 myready 永远不会被调用，所以我的提交处理程序永远不会被注册。

我在这里想念什么？我尝试更改包含 s1.js 和 s2.js 的顺序，但这似乎没有帮助。我想在不修改 s1.js 的情况下做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T10:34:45.690

您提供的代码似乎很好！已检查 Chrome 25、FireFox 19 和 IE 10！

通常我发现在运行时修改代码（而不是源文件）更容易，这要归功于 JavaScript 是动态类型的，您可以`DoValidate`用自己的函数覆盖该函数，`DoValidate`通过以下代码中的闭包将其传递给原始函数`s2.js`：

```
var originalValidate = DoValidate;
DoValidate = function () {
    originalValidate();
    alert("my handler");
}; 
```

# c# - 无法让 JSON 的异步（异步等待）下载工作

> ID：15201999
> 
> 赞同：0
> 
> 时间：2013-03-04T12:49:20.540
> 
> 标签：c#, windows-phone-8, async-await

我已经挣扎了一段时间，但我就是无法完成这项工作。我正在尝试通过使用“某种”异步等待将 json 字符串下载到我的 Windows Phone 8 应用程序。

我正在使用[Matthias Shapiro 的有前途的解决方案](http://matthiasshapiro.com/2012/12/10/window-8-win-phone-code-sharing-httpwebrequest-getresponseasync/)。

HttpExtensions.cs

```
 public static class HttpExtensions
 {
    public static Task<Stream> GetRequestStreamAsync(this HttpWebRequest request)
    {
        var taskComplete = new TaskCompletionSource<Stream>();
        request.BeginGetRequestStream(ar =>
        {
            Stream requestStream = request.EndGetRequestStream(ar);
            taskComplete.TrySetResult(requestStream);
        }, request);
        return taskComplete.Task;
    }

    public static Task<HttpWebResponse> GetResponseAsync(this HttpWebRequest request)
    {
        var taskComplete = new TaskCompletionSource<HttpWebResponse>();
        request.BeginGetResponse(asyncResponse =>
        {
            try
            {
                HttpWebRequest responseRequest = (HttpWebRequest)asyncResponse.AsyncState;
                HttpWebResponse someResponse = (HttpWebResponse)responseRequest.EndGetResponse(asyncResponse);
                taskComplete.TrySetResult(someResponse);
            }
            catch (WebException webExc)
            {
                HttpWebResponse failedResponse = (HttpWebResponse)webExc.Response;
                taskComplete.TrySetResult(failedResponse);
            }
        }, request);
        return taskComplete.Task;
    }
 }

 public static class HttpMethod
 {
    public static string Head { get { return "HEAD"; } }
    public static string Post { get { return "POST"; } }
    public static string Put { get { return "PUT"; } }
    public static string Get { get { return "GET"; } }
    public static string Delete { get { return "DELETE"; } }
    public static string Trace { get { return "TRACE"; } }
    public static string Options { get { return "OPTIONS"; } }
    public static string Connect { get { return "CONNECT"; } }
    public static string Patch { get { return "PATCH"; } }
 } 
```

还有我的 MainPageViewModel.cs

```
 protected override void OnActivate()
    {
        base.OnActivate();
        GetSessions();
    }

    private async void GetSessions()
    {
        var result = await GetMyData("http://localhost/api/MyData");
     }

    public async Task<string> GetMyData(string urlToCall)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlToCall);
        request.Method = HttpMethod.Get;
        HttpWebResponse response = (HttpWebResponse)await request.GetResponseAsync();
        using (var sr = new StreamReader(response.GetResponseStream()))
        {
            return sr.ReadToEnd();
        }
    } 
```

一旦它达到“HttpWebResponse someResponse = (HttpWebResponse)responseRequest.EndGetResponse(asyncResponse);”，我就会得到一个 WebException：

“System.Net.WebException：远程服务器返回错误：未找到”

当我深入研究时，我注意到这个错误不是实际错误。当我检查 HttpExtensions 类的 GetResponseAsync 方法中的“asyncResponse”时，我注意到错误：

“AsyncWaitHandle = 'asyncResponse.AsyncWaitHandle' 引发了 'System.NotSupportedException' 类型的异常”

我不知道如何完成这项工作。是我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T16:39:10.757

我现在看到了问题。由于模拟器使用的是虚拟机，因此您不能使用 localhost，因为 localhost 是电话而不是您的 PC。请参阅此解决方案：[Windows Phone 8 Emulator: Access localhost](https://stackoverflow.com/questions/13149304/windows-phone-8-emulator-access-localhost)