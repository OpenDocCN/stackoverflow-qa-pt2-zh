# StackOverflow 问答 13204000-13204999

# ios - UIPopoverController 中的 UIViewController 始终报告为处于纵向模式

> ID：13204001
> 
> 赞同：1
> 
> 时间：2012-11-02T22:41:25.657
> 
> 标签：ios, ipad

我在 UIPopoverController 中有一个视图控制器。我想根据是否纵向调整ui。

无论我的 iPad 处于什么方向（物理设备），self.interfaceOrientation 总是报告纵向。我将它记录在 -viewWillAppear: 中，它总是纵向的。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:46:24.937

利用：

```
UIInterfaceOrientation deviceOrientation = [UIApplication sharedApplication].statusBarOrientation; 
```

识别 statusBar 方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:49:22.510

弹出窗口中的视图控制器始终是纵向的。无论设备以何种方式握持，弹出框的方向始终是纵向的。

如果您希望根据设备的方向在视图控制器中做一些不同的事情，请查看`UIApplication statusBarOrientation`.

将弹出框想象为跟随重力。它总是指向下方。

# css - 在 CSS 中对齐表单元素

> ID：13204002
> 
> 赞同：27
> 
> 时间：2012-11-02T22:41:27.073
> 
> 标签：css

我是 CSS 新手，并且有一个简单的登录表单，我正在尝试正确对齐。基本上是两列，其中一列包含标签和*登录*按钮，另一列包含文本框。我如何在 CSS 中做到这一点？

HTML 代码是：

```
<body>
  <form action="" method="post">
    <label> Username </label>
    <input type="text"/>

    <label> Password </label>
    <input type="password"/>

    <input type="submit" value="submit"/>
  </form>
</body> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-02T22:45:39.650

这是一种有效的方法：

```
form {
  width: 80%;
  margin: 0 auto;
}

label,
input {
  /* In order to define widths */
  display: inline-block;
}

label {
  width: 30%;
  /* Positions the label text beside the input */
  text-align: right;
}

label+input {
  width: 30%;
  /* Large margin-right to force the next element to the new-line
           and margin-left to create a gutter between the label and input */
  margin: 0 30% 0 4%;
}

/* Only the submit button is matched by this selector,
       but to be sure you could use an id or class for that button */

input+input {
  float: right;
}
```

```
<form action="#" method="post">
  <!-- note that I've added a 'for' attribute to
       both of the <label> elements, which is
       equal to the 'id' attribute of the relevant
       <input> element; this means that clicking
       the <label> will focus the <input>: -->
  <label for="username">Username</label>
  <input id="username" type="text" />

  <label for="password">Password</label>
  <input id="password" type="password" />

  <input type="submit" value="submit" />
</form>
```

​</p>

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4wPPZ/)。

当然，调整尺寸和边距以适合您的用例和审美。

当然，目前还有其他方法可以实现这一点，例如 CSS Grid：

```
*,
::before,
::after {
  /* selecting all elements on the page, along with the ::before
     and ::after pseudo-elements; resetting their margin and
     padding to zero and forcing all elements to calculate their
     box-sizing the same way, 'border-box' includes the border-widths,
     and padding, in the stated width: */
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

form {
  /* Using CSS Grid to lay out the elements in two-dimensions: */
  display: grid;
  /* specifying a 0.5em gutter/gap between adjacent elements: */
  gap: 0.5em;
  /* declaring a number of named grid areas in order to lay out
     the child elements; the areas identified with a period (.)
     are 'empty' areas, whereas the areas named by strings are
     used, later, to place elements according to those names: */
  grid-template-areas:
    "usernameLabel . usernameInput"
    "passwordLabel . passwordInput"
    ". . submit";
  /* declaring the size of each of the three columns; 1fr is
     one fractional unit of the available space, and is the
     size of the first and last of the columns. The central
     column is declared as being 0.5em in width: */
  grid-template-columns: 1fr 0.5em 1fr;
  margin: 1em auto;
  width: 80%;
}

label {
  /* placing all <label> elements in the grid column 1 (the first): */
  grid-column: 1;
  /* aligning text-content to the right in order to position the label
     text near to the relevant <input>: */
  text-align: right;
}

label::after {
  content: ':';
}

input {
  grid-column: 3;
}

button {
  /* positioning the <button> element in the grid-area identified
     by the name of 'submit': */
  grid-area: submit;
}
```

```
<form action="" method="post">
  <label for="username">Username</label>
  <input id="username" type="text" />

  <label for="password">Password</label>
  <input id="password" type="password" />

  <input type="submit" value="submit" />
</form>
```

[JS 小提琴演示](https://jsfiddle.net/davidThomas/4wPPZ/1215/)。

参考：

*   [相邻兄弟 ( `+`) 组合](https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_combinator)子。
*   [`box-sizing`](https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing).
*   [`display`](https://developer.mozilla.org/en-US/docs/Web/CSS/display).
*   [`float`](https://developer.mozilla.org/en-US/docs/Web/CSS/float).
*   [`gap`](https://developer.mozilla.org/en-US/docs/Web/CSS/gap).
*   [`grid-area`](https://developer.mozilla.org/en-US/docs/Web/CSS/grid-area).
*   [`grid-template-areas`](https://developer.mozilla.org/en-US/docs/Web/CSS/grid-template-areas).
*   [`grid-template-columns`](https://developer.mozilla.org/en-US/docs/Web/CSS/grid-template-columns).
*   [`grid-template-rows`](https://developer.mozilla.org/en-US/docs/Web/CSS/grid-template-rows).
*   [`margin`](https://developer.mozilla.org/en-US/docs/Web/CSS/margin).
*   [`width`](https://developer.mozilla.org/en-US/docs/Web/CSS/width).

参考书目：

*   《[网格布局的基本概念](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Basic_Concepts_of_Grid_Layout)》。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T22:53:24.077

对于您的要求，我只是将它们放在一张桌子上。

```
 <form action="" method="post">
    <table>
        <tr>
            <td><label> Username </label></td>
            <td><input type="text"/></td>
        </tr>
        <tr>
            <td><label> Password </label></td>
            <td> <input type="password"/></td>
        </tr>
        <tr>
            <td colspan="2"><input type="submit" value="submit"/></td>
        </tr>
    </table>
  </form> 
```

这是它的样子 [http://jsfiddle.net/wCSAn/](http://jsfiddle.net/wCSAn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T04:08:29.193

您还可以使用 CSS 中的 position 属性来对齐*标签*并根据需要以某种指定的方式*输入。*这样，它们就按照父元素进行排列。

```
form {
    position: relative;
    width: 70%;
    text-align: right;
}

label {
    width: 30%;
    position: absolute;
    left: 10%;
    text-align: right;
    margin-right: 30px;
}

input[type=submit] {
    position: absolute;
    left: 25%;
    background-color: #9AE5F8;
} 
```

这是其[jsfiddle](https://jsfiddle.net/vaibnak/cj4deqyo/24/)的链接。

# r - R中的中位数需要数字数据

> ID：13204008
> 
> 赞同：0
> 
> 时间：2012-11-02T22:41:54.660
> 
> 标签：r, vector, statistics, median

我试图计算给定向量的中位数，但是当我尝试时，我不断收到错误：

```
median(returns)
Error in median.default(returns) : need numeric data

> returns
 [1] 0.001262733  -0.005048584 -0.009160197 0.010411955  -0.00542421 
 [6] -0.010982649 -0.005807832 0.000863131  -0.00210823  0.000117543 
[11] 0.001319904  0.005307534  0.005246006  0.008469327  0.006006664 
[16] -0.001411188 -0.011446652 0.002669714  0.003896259  -0.003060607
[21] 0.006306116  0.000895311  -0.006235211 -0.000856819 -0.00056599 
[26] 0.00808345   0.00038652   -0.004070623 0.008398158  -0.005976036
[31] 0.011270873  0.007959499  0.003776885  -0.000591663 0.001163452 
[36] 0.005759682  0.000678132  0.000609123  -0.000735042
40 Levels: -0.00056599 -0.000591663 -0.000735042 -0.000856819 ... 0.011270873

dput(returns)
structure(c(25L, 9L, 14L, 39L, 10L, 15L, 11L, 22L, 6L, 18L, 26L, 
31L, 30L, 38L, 33L, 5L, 16L, 27L, 29L, 7L, 34L, 23L, 13L, 4L, 
1L, 36L, 19L, 8L, 37L, 12L, 40L, 35L, 28L, 2L, 24L, 32L, 21L, 
20L, 3L), .Label = c("-0.00056599", "-0.000591663", "-0.000735042", 
"-0.000856819", "-0.001411188", "-0.00210823", "-0.003060607", 
"-0.004070623", "-0.005048584", "-0.00542421", "-0.005807832", 
"-0.005976036", "-0.006235211", "-0.009160197", "-0.010982649", 
"-0.011446652", "#DIV/0!", "0.000117543", "0.00038652", "0.000609123", 
"0.000678132", "0.000863131", "0.000895311", "0.001163452", "0.001262733", 
"0.001319904", "0.002669714", "0.003776885", "0.003896259", "0.005246006", 
"0.005307534", "0.005759682", "0.006006664", "0.006306116", "0.007959499", 
"0.00808345", "0.008398158", "0.008469327", "0.010411955", "0.011270873"
), class = "factor") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T23:04:31.327

由于您正在从 excel 中读取它，因此 R 正在查看“DIV#0”消息并认为您的数据是分类的，就好像它是说“蓝色”、“绿色”、“淡褐色”等的数据。所以当你在问`median`，R 认为你在问眼睛颜色的中值，这没有任何意义。

要将因子列表转换为数字：

```
returns.numbers <- as.numeric(as.vector(returns))
median(returns.numbers) 
```

# java - 在不冻结 UI 的情况下显示对话框

> ID：13204010
> 
> 赞同：0
> 
> 时间：2012-11-02T22:42:25.017
> 
> 标签：java, android, user-interface, dialog, progress

我当前的进度对话框冻结了 UI，我的意思是，在显示对话框时我无法使用该应用程序，我无法移动或单击任何按钮。是否可以在没有任何焦点的情况下显示对话框？（所以我可以单击当前活动中的按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:54:55.620

ProgressDialog 与任何对话框一样，总是会从您当前的活动中窃取焦点。如果您想在当前布局中嵌入进度条，请使用[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)，`setVisible(true)`在您开始长时间运行的操作并`setProgress`更新进度条时使用（如果您不知道任务需要多长时间，请使用不确定模式）。

设置进度条的样式主要是通过他们的样式完成的，选择一种内置的进度条类型：

*   默认样式（即未指定样式）：纺车
*   `Widget.ProgressBar.Horizontal`- 单杠
*   `Widget.ProgressBar.Small`- 更小的纺车
*   `Widget.ProgressBar.Large`- 更大的纺车
*   `Widget.ProgressBar.Inverse`- 浅色背景上的纺车
*   `Widget.ProgressBar.Small.Inverse`- 浅色背景上较小的纺车
*   `Widget.ProgressBar.Large.Inverse`- 浅色背景上更大的纺车

您可以通过将`style`属性添加到`ProgressBar`xml 来应用这些：

```
 <ProgressBar
     style="@android:style/Widget.ProgressBar.Horizontal"
     ... /> 
```

如果您需要自定义着色，您可以使用[此处](https://stackoverflow.com/a/10928926/1676363)发布的解决方案，该解决方案利用[setColorFilter](http://developer.android.com/reference/android/widget/ImageView.html#setColorFilter%28int,%20android.graphics.PorterDuff.Mode%29)。

# android - Webview 在 android 中不显示 onConsoleMessage

> ID：13204011
> 
> 赞同：1
> 
> 时间：2012-11-02T22:42:32.130
> 
> 标签：android, webview

我用过网络视图

参考[http://developer.android.com/guide/webapps/debugging.html](http://developer.android.com/guide/webapps/debugging.html)

```
 myWebView.getSettings().setJavaScriptEnabled(true);

myWebView.setWebChromeClient(new WebChromeClient() {
   public boolean onConsoleMessage(ConsoleMessage cm) {
              Log.d("MyApplication", cm.message() + " -- From line "
                                   + cm.lineNumber() + " of "
                                   + cm.sourceId() );
              return true;
            }
            public void onConsoleMessage(String message, int lineNumber, String sourceID) {
                Log.d("MyApplication", message + " -- From line "
                                     + lineNumber + " of "
                                     + sourceID);
              }
}); 
```

但仍然没有得到日志 Logcat

请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T14:45:09.270

似乎某些具有特定操作系统的设备（HTC Desire 和其他一些设备）（我的是 2.3.3）不会在 Logcat 窗口中显示消息，并且似乎 console.log 对它们不起作用。我找到了一个很好的解决方法，使用 JavaScript 接口来解决这个问题：[Android Console via JS interface](https://web.archive.org/web/20140209000107/http://www.stevenmarkford.com/solution-to-onconsolemessage-not-working-for-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-21T07:31:51.307

就我而言（我有运行 Android 6.0 的三星 Note 4），`onConsoleMessage`只有在我设置时才会调用

```
myWebView.setWebContentsDebuggingEnabled(true); 
```

当我打开 Chrome 远程设备调试器来检查 webview 时。但显然这不是很有帮助，因为我已经可以在调试器窗口上看到控制台输出。

# java - 使用 while 循环添加双打

> ID：13204014
> 
> 赞同：-3
> 
> 时间：2012-11-02T22:42:57.937
> 
> 标签：java

过去一周我一直在研究循环，但我仍然不明白这是如何工作的。基本上我有一个包含一些 salires 的文件，我需要使用 while 循环将它们添加在一起。我已经在这个问题上停留了几个小时，毫无意义：/谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:46:47.427

创建一个双变量并将其初始化为零，然后在 while 循环的每次迭代中，将薪水添加到该变量。

```
double total = 0;

while(termination_condition) {
   total += salary;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:50:00.303

如果您使用的是扫描仪，下面是示例代码。

```
Scanner scan = new Scanner("salaries.txt");
double sum=0.0;
String line="";
while((line.hasNextDouble()){
  sum= sum+ line.nextDouble();
}
System.out.println(sum); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:53:06.323

使用一个`Scanner`类，来自`java.util`：

```
double sum = 0.0;
Scanner scan = new Scanner(new File("yourFile.txt"));
while(scan.hasNextDouble()){
   sum += scan.nextDouble();
} 
```

这是我可以为这个问题编写的基本代码。

# java - 如何将数字（作为字符串）转换为 Java 中的字节数组？

> ID：13204016
> 
> 赞同：1
> 
> 时间：2012-11-02T22:43:05.157
> 
> 标签：java, arrays, string, bytearray, converter

我正在为我正在处理的 java 项目创建一个特定于方法的方法。给定的 UML 指定了`static byte[]`接受参数的返回类型`(String, byte)`

到目前为止，看起来像这样：

```
public static byte[] convertNumToDigitArray(String number, byte numDigits) {

} 
```

此方法应该将数字（作为字符串）转换为字节数组。排序必须从最高有效数字到最低有效数字。例如，如果数字字符串是“732”，那么数组的索引 0 应该包含 7。
最后一个参数 (numDigits) 应该与传入的字符串的长度匹配。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:46:12.690

可以使用 检索字符串中的每个字符`charAt()`。char 可以通过减法转换为其数字值，例如：

```
char c = number.charAt(0);
byte b = c - '0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:38:27.403

我不明白为什么我们需要如此复杂的代码。

只使用JDK附带的方法有什么问题

```
public static byte[] convertNumToDigitArray(String number, byte numDigits) {
    byte[] bytes = number.getBytes();
    Arrays.sort(bytes);
    return bytes;
} 
```

如果排序不是您的意思，只需删除该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:44:26.907

我不会使用第二个参数并执行以下操作：

```
public static byte[] convertNumToDigitArray(String number) {
    if (number != null && number.matches("\\d*") {
        byte[] result = new byte[number.length()];
        for (int i = 0; i < number.length(); i++) {
            result[i] = Byte.parseByte("" + number.charAt(i));
        }
        return result;
    } else {
        throw new IllegalArgumentException("Input must be numeric only");
    }
} 
```

# android - 从 AttributeSet 获取 Android 样式属性

> ID：13204017
> 
> 赞同：1
> 
> 时间：2012-11-02T22:43:11.740
> 
> 标签：android, android-layout

在自定义视图中，我可以从 AttributeSet 中获取自定义 attrs 值（如下所示）。但是如何获取 Android 属性呢？例如，我如何访问 android:background 或 android:text ？android.R.styleable 是不允许的。

```
<mine.custom.RangeSeekBar
    custom:selectedMinValue="2"
    custom:selectedMaxValue="4"
    android:background="@drawable/my_skin" />

public RangeSeekBar(Context context, AttributeSet attrs, int defStyle) {
TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.RangeSeekBar, defStyle, 0);
    selectedMinValue = a.getInt(R.styleable.RangeSeekBar_selectedMinValue, selectedMinValue);
    selectedMaxValue = a.getInt(R.styleable.RangeSeekBar_selectedMaxValue, selectedMaxValue);
    minRangeValue = a.getInt(R.styleable.RangeSeekBar_minRangeValue, minRangeValue);
    maxRangeValue = a.getInt(R.styleable.RangeSeekBar_maxRangeValue, maxRangeValue);
    a.recycle();
} 
```

编辑：这是标准方式吗？

```
final String xmlns="http://schemas.android.com/apk/res/android";
    int xmlRes = attrs.getAttributeResourceValue(xmlns, "background", -1);
    String xmlText = attrs.getAttributeValue(xmlns, "text"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T09:37:17.797

我想我们会这样做：

```
final String xmlns="http://schemas.android.com/apk/res/android";
int xmlRes = attrs.getAttributeResourceValue(xmlns, "background", -1);
String xmlText = attrs.getAttributeValue(xmlns, "text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T19:09:54.360

正如[评论](https://stackoverflow.com/questions/13204017/get-android-styled-attributes-from-attributeset#comment27179039_13540014)中提到的，这不是做到这一点的规范方法。此外，这实际上仅适用于硬编码字符串。[Preference 类](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4.2_r1/android/preference/Preference.java#Preference)的 android 源代码示例可能会有所帮助：

```
 TypedArray a = context.obtainStyledAttributes(attrs,
                 com.android.internal.R.styleable.Preference, defStyle, 0);
         for (int i = a.getIndexCount(); i >= 0; i--) {
             int attr = a.getIndex(i); 
             switch (attr) {
                 ...
                 case com.android.internal.R.styleable.Preference_key:
                     mKey = a.getString(attr);
                     break;
                 ...
             } 
```

# gcc - 如果应用程序链接到共享库，为什么在编译时需要该库？

> ID：13204020
> 
> 赞同：2
> 
> 时间：2012-11-02T22:43:18.637
> 
> 标签：gcc, dynamic, linker

如果我的术语不正确，我提前道歉。

假设我有一个名为`libVectorMath.so`. 其中有两个有趣的功能，`addVector()`和`subtractVector()`。这两个函数的原型是`vectorMath.h`. 我还有一个名为 的可执行文件`testVectorMath`，它使用这两个函数，并动态链接到`libVectorMath.so`.

一般来说，要构建`testVectorMath`，我也需要构建`libVectorMath.so`。为什么是这样？头文件`vectorMath.h`是否不足以说明`testVectorMath`它应该期望在哪些符号中找到`libVectorMath.so`？

换句话说，不能`testVectorMath`有一些指令说“查找一个名为的库`libVectorMath.so`，然后在其中查找命名的符号`addVector()`”`subtractVector()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-05T09:07:51.503

阅读此[链接](https://www.iecc.com/linker/linker09.html)。它以非常好的方式讲述了同样的事情！

上面的摘录如下：所有共享库方案的工作方式基本相同。在链接时，链接器像往常一样在库中搜索以找到解析其他未定义的外部符号的模块。但是，链接器不会将模块的内容复制到输出文件中，而是记下模块来自哪个库，并将库列表放入可执行文件中。加载程序时，启动代码会在程序启动之前找到这些库并将它们映射到程序的地址空间中，图 1。标准操作系统文件映射语义自动共享映射为只读或写时复制的页面。进行映射的启动代码可能在操作系统中，可执行文件中，在映射到进程地址空间的特殊动态链接器中，

# json - 如何让 Flume-ng 以 JSON 格式存储日志

> ID：13204026
> 
> 赞同：2
> 
> 时间：2012-11-02T22:43:45.003
> 
> 标签：json, flume

我有一个 Flume 整合器，它将自定义日志中的条目写入 AWS 中的 s3 存储桶

我遇到的问题是，它没有以 JSON 格式存储它。我正在使用flume-ng（flume 1.2.0），因为我已经从flume-og（实际上只是flume 0.9.4-cdh3u3）升级。当我使用flume（og one）时，我默认以JSON格式移动日志而没有设置任何参数。flume-ng 是否可以解析日志并将其设置为 JSON 格式？

任何帮助深表感谢。谢谢

我的设置配置如下

```
 agent.sources = source1
agent.sinks = sink1
agent.channels = channel1

agent.sources.source1.type = netcat
agent.sources.source1.bind = localhost
agent.sources.source1.port = 4555

agent.sinks.sink1.type=hdfs
agent.sinks.sink1.hdfs.path = s3://KEY:SECRET@BUCKET/flume/apache/incoming
agent.sinks.sink1.hdfs.filePrefix = log-file-

agent.channels.channel1.type = memory
agent.channels.channel1.capacity = 1000
agent.channels.channel1.transactionCapactiy = 100

agent.sources.source1.channels = channel1
agent.sinks.sink1.channel = channel1 
```

# javafx - JavaFx 网页浏览 YouTube

> ID：13204033
> 
> 赞同：2
> 
> 时间：2012-11-02T22:44:26.000
> 
> 标签：javafx

几周前，我使用 NetBeans 创建了其中一个 javafx 示例
webview 项目，它运行良好。
我对使用 javafx
在 swinginterop 应用程序中播放 youtube 视频特别感兴趣。
这是一个更大项目的一部分，所以我使用 NetBeans
中的 SwingInterop 示例将播放器加载到 JFrame 上，
我需要加载多个 YouTube 视频。
一切都很好。
我正在使用 Windows XP、NetBeans 7.2、Java 1.7 9
这些天我再次尝试了该应用程序，但这次在 youtube 上我看到
“此视频当前不可用”。
我首先想到的可能是
我没有最新的 FlashPlayer ...
不用说我下载了所有东西......
该应用程序不再播放youtube视频
我什至再次重新安装了java和netbeans，但没有任何改变。
我还提到在 Firefox 上，这是我在我的 pc 上使用的浏览器
youtube 工作得很好。
知道这很烦人......有些事情还可以，也许......
我找到了一种把东西弄乱的方法......
所以现在，我可以在 javafx webview 中看到网页，但 youtube 视频仍然没有播放。 ..

上次我寻求帮助时，我没有输入代码……对此感到抱歉。

所以我做了另一个只有两个类的小项目来展示我做了什么

我没有在另一台电脑上对此进行测试，因为如果它发生过一次
，它可能会再次发生，并且由于事情无法自行解决，
我希望能够在它弹出时回答这个问题。

感谢 Jewelsea 和 Gregory 的关注

这是代码：

### 加载播放器的框架

```
package stackoverflow;

import java.awt.Dimension;
import java.awt.Point;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;

public class PlayersFrame extends JFrame
{
    public PlayersFrame()
    {
        // initialize jframe
        setLayout(null);
        setTitle("   YouTube on JFrame");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        CreatePlayersList();
    }

    // all the players have the same size
    Dimension PlayerSize = new Dimension(300, 230);    

    private void CreatePlayersList()
    {
        /*
         * create an instance of playerclass
         * containing the location and the youtube embedded address
         * for each of the four players
         */

        Point NewPlayerLocation = null;
        PlayerClass NewPlayer = null;

        NewPlayerLocation = new Point(10, 10);
        NewPlayer = new PlayerClass(NewPlayerLocation, PlayerSize, "http://www.youtube.com/embed/SvcDwPlaWgw?rel=0");
        // add player1 class to the players list
        Players.add(NewPlayer);

        NewPlayerLocation = new Point(320, 10);
        NewPlayer = new PlayerClass(NewPlayerLocation, PlayerSize, "http://www.youtube.com/embed/L0huXvTeVvU?rel=0");
        // add player2 class to the players list
        Players.add(NewPlayer);

        NewPlayerLocation = new Point(10, 240);
        NewPlayer = new PlayerClass(NewPlayerLocation, PlayerSize, "http://www.youtube.com/embed/rHcnsEoSK_c?rel=0");
        // add player3 class to the players list
        Players.add(NewPlayer);

        NewPlayerLocation = new Point(320, 240);
        NewPlayer = new PlayerClass(NewPlayerLocation, PlayerSize, "http://www.youtube.com/embed/vaXuK-RsT6E?rel=0");
        // add player4 class to the players list
        Players.add(NewPlayer);

        // stand by
        LoadPlayers();
    }

    // list of players data
    List<PlayerClass> Players = new ArrayList<>();

    /*
     * a class to hold data about a player
     */
    public class PlayerClass
    {
        public PlayerClass(Point playerLocation, Dimension playerSize, String youTubeAddress)
        {
            PlayerLocation = playerLocation;
            PlayerSize = playerSize;
            YouTubeAddress = youTubeAddress;
        }
        public Point PlayerLocation = null;
        public Dimension PlayerSize = null;
        public String YouTubeAddress = null;
    }

    /*
     * in this swinginterop project i want to display youtube videos on a jframe
     * with webview i get more that i ask for
     * webview will display an entire web page
     * so a web page is created on the fly containing a frame for the player
     */
    private String GeneratePlayerPage(Dimension PlayerSize, String EmbeddedAddress)
    {
        String GeneratedPage = null;

        GeneratedPage = "<html>\n";        
        GeneratedPage += "<body>\n";        
        GeneratedPage += "<iframe\n";        
        GeneratedPage += "style=\"position:absolute;\n";
        GeneratedPage += "left:0px;top:0px;" + 
                "width:" + String.valueOf(PlayerSize.width) +
                "px;height:" + String.valueOf(PlayerSize.height) + "px;\"\n";
        GeneratedPage += "src=\"" + EmbeddedAddress + "\"" + "\n";
        GeneratedPage += "frameborder=\"0\" allowfullscreen>\n";        
        GeneratedPage += "</iframe>\n";        
        GeneratedPage += "</body>\n";        
        GeneratedPage += "</html>";

        return(GeneratedPage);
    }

    /*
     * why synchronized ? ...
     * 
     * each javafx object runs on it's own thread
     * this means that, sooner or later
     * you will have to deal with crossthreading issues
     * 
     * in this project it does not throw an error
     * but since the playersform will add controls on a locked procedure,
     * and i don't use a single player on the jframe,
     * some of the players will not appear on the frame.
     *
     * if only one player is loaded on the jframe
     * then all this is not necessary.
     *
     * i don't know if the players are there but are not rendered
     * or the players were just not loaded
     * 
     * with this synchronized void a callback from the javafx object is handled
     */
    public synchronized void OkPlayer()
    {
        try
        {
            /*
             * a player was loaded
             * delay before the next player
             */
            Thread.sleep(10);
        }
        catch(Exception Ex)
        {}

        /*
         * if the players list is empty than all the players have been loaded
         * but you also get an error, so check the size ...
         */
        if(Players.size() > 0)
        {
            LoadPlayers();
        }
    }

    void LoadPlayers()
    {
        /*
         * get the data from the first playerclass in the players list
         * and create a new player
         */
        PlayerClass TempPlayer = Players.get(0);
        Dimension playerSize = TempPlayer.PlayerSize;
        YouTubePlayer player = new YouTubePlayer(this, playerSize,
        GeneratePlayerPage(playerSize, TempPlayer.YouTubeAddress));
        add(player);        
        player.setLocation(TempPlayer.PlayerLocation);
        player.setSize(TempPlayer.PlayerSize);
        player.setVisible(true);
        // remove the used playerclass from the players list
        Players.remove(0);
    }
} 
```

### 和玩家

```
package stackoverflow;

import java.awt.Dimension;
import javafx.application.Platform;
import javafx.embed.swing.JFXPanel;
import javafx.scene.Scene;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UnsupportedLookAndFeelException;

public final class YouTubePlayer extends JPanel
{
    public YouTubePlayer(PlayersFrame playersFrame, Dimension PlayerSize, String YouTubeAddress)
    {
        remote = playersFrame;
        init(PlayerSize, YouTubeAddress);
    }

    private static JFXPanel browserFxPanel;
    private Pane browser;

    public void init(Dimension playerSize, String youTubeAddress) 
    {
        final Dimension PlayerSize = playerSize;
        final String YouTubeAddress = youTubeAddress;
        browserFxPanel = new JFXPanel();
        browserFxPanel.setPreferredSize(new Dimension(PlayerSize.width, PlayerSize.height));        
        add(browserFxPanel);

        Platform.runLater(new Runnable() 
        {
            public void run() 
            {
                // inside the player's thread
                createScene(PlayerSize, YouTubeAddress);
            }
        });
    }

    /*
     * the program will start on the javafx thread
     * the main void is placed in the javafx component
     * 
     * maybe there are other ways to launch the program
     * but for this one it is good enough ... for now
     */
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater(new Runnable() 
        {
            public void run() 
            {
                try
                {
                    for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) 
                    {
                        // set windows look and feel
                        if ("Windows".equals(info.getName())) 
                        {
                            javax.swing.UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                }
                catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException Ex)//ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) 
                {}

                // create an instance of playersframe
                PlayersFrame LoadPlayers = new PlayersFrame();
                LoadPlayers.setSize(new Dimension(640, 520));
                // make it visible
                LoadPlayers.setVisible(true);        
            }
        });
    }

    PlayersFrame remote = null;

    private void createScene(Dimension PlayerSize, String YouTubeAddress) 
    {
        browser = createBrowser(PlayerSize, YouTubeAddress);
        browserFxPanel.setScene(new Scene(browser));        
        /*
         * player loaded
         * let playersform know that it can proceed
         * with the next player, if there still is one
         */
        remote.OkPlayer();
    }

    private Pane createBrowser(Dimension PlayerSize, String YouTubeAddress) 
    {
        WebView view = new WebView();
        view.setPrefSize(PlayerSize.width, PlayerSize.height);
        final WebEngine eng = view.getEngine();
        eng.loadContent(YouTubeAddress);
        GridPane grid = new GridPane();
        grid.getChildren().addAll(view);
        return grid;
    }
} 
```

### 这就是它的样子

[http://i.stack.imgur.com/UvhcJ.jpg](http://i.stack.imgur.com/UvhcJ.jpg)

### 这就是“事情”

[http://i.stack.imgur.com/lB4uY.jpg](http://i.stack.imgur.com/lB4uY.jpg)

最后一位玩家的行为与其他玩家相同

如果我使用 NetBeans 中的示例并粘贴 YouTube 链接
，我会得到相同的结果

我真的需要知道发生了什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T05:59:02.237

查看系统要求：

[http://docs.oracle.com/javafx/2/system_requirements_2-2/jfxpub-system_requirements_2-2.htm](http://docs.oracle.com/javafx/2/system_requirements_2-2/jfxpub-system_requirements_2-2.htm)

```
For Windows XP and Windows Vista, JavaFX Media 2.2 requires that one of the following external modules be installed to play AAC audio and H.264/AVC video: 
MainConcept H.264/AVC Pro Decoder Pack
DivX Plus Codec Pack
MainConcept Showcase (includes demo version codecs) 
```

DivX 可免费下载：[http ://www.divx.com/](http://www.divx.com/)

参考：[https ://forums.oracle.com/thread/2467376](https://forums.oracle.com/thread/2467376)

# ms-access - 单击文本时会将我链接到表格

> ID：13204037
> 
> 赞同：1
> 
> 时间：2012-11-02T22:44:46.967
> 
> 标签：ms-access, vba

目前我有一个文本框，它将根据搜索条件显示一些文本。显示的文本将是表的名称。我是否可以这样做，以便如果我单击文本框中的表格名称，它会为我打开表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:02:10.303

在文本框的点击事件中：

```
DoCmd.OpenTable Me.MyTextbox 
```

编辑重新评论，这是一个草图，如果表名有空格，它将不起作用。

```
Private Sub Text0_Click()
    i = Me.Text0.SelStart
    j = InStr(i, Me.Text0, " ")
    k = InStrRev(Me.Text0, " ", i)
    tbl = Mid(Me.Text0, k, j - k)
    DoCmd.OpenTable tbl
End Sub 
```

或者更好的是，逐行在列表框中捕获构造，而不是在文本框中。

根据您的代码示例，您可以说：

```
Public Sub SearchTables(SearchString As String)
Dim tdf As DAO.TableDef
Dim sTable As String
Dim sField As String
Dim sMsg As String
sMsg = ""
For Each tdf In CurrentDb.TableDefs

    sTable = tdf.Name
    sField = SearchTable(sTable, SearchString)
    If sField <> vbNullString Then
        sMsg = sMsg & ";" & sTable & ";" & sField
    End If
Next
'listbox0
'Row source type: Value List
'Column count: 2
'You will get a two column listbox with table in one column
'and field in another
Forms!Search!listbox0.RowSource = Mid(sMsg, 2)
End Sub 
```

然后在 listbox0 的点击事件中：

```
Private Sub listbox0_Click()
    DoCmd.OpenTable Me.listbox0
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:49:45.013

你的意思是专门点击名字的文字......所以如果文字是“John 12345 THE TABLE”，你只想打开桌子？

没有足够的信息来给出一个可靠的答案，但如果你只想从上面的文本中获取表格，那么你可以根据你点击的位置相对于文本的位置来使用屏幕坐标。换一种方式会容易得多...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T16:17:14.957

如果您的文本格式是这样的：

```
Table = NAMEOFTABLE Field = NAMEOFSEARCH Table = NAMEOFTABLE2 Field = NAMEOFSEARCH2 
```

您可以使用以下代码：

```
Private Sub Text0_Click()
  i = Me.Text0.SelStart
  If i > 0 Then
    startTable = InStrRev(Me.Text0, "Table = ", i)
    startField = InStr(startTable + 8, Me.Text0, "Field = ")
    If startTable > 0 And i < InStr(startTable + 8, Me.Text0, "Field = ") Then
      DoCmd.OpenTable Mid(Me.Text0, startTable + 8, startField - startTable - 9)
    End If
  End If
End Sub 
```

如果单击任何表的名称，它将打开该表。

这里有一点解释：使用光标的当前位置，我正在向后搜索`"Table = "`字符串，然后从那里搜索下一个字符串`"Field = "`。我们所要做的就是检查光标是否在下一个字段之前。

# vb.net - Silverlight 5 活动

> ID：13204038
> 
> 赞同：0
> 
> 时间：2012-11-02T22:44:52.537
> 
> 标签：vb.net, silverlight

我是用 VB.Net 用 Silverlight 5 编写的。我有许多子窗口。我想在用户关闭此窗口而不单击任何按钮时捕获事件。如果可能的话，请给我一个例子。我更喜欢VB，但我可以翻译C#。

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:45:11.160

您可以订阅 ChildWindows 的 Closing 或 Closed 事件，在 Closing 事件中您可以检查 DialogResult 以查看它是否为 True，如果是则关闭窗口，否则通过将 e.Cancel 设置为 True 来取消 ChildWindow 的关闭。我在这里的示例显示了这两个事件，并允许您停止 ChildWindows 关闭。

```
Partial Public Class MainPage
    Inherits UserControl
    Dim child As ChildWindow1

    Public Sub New()
        InitializeComponent()
    End Sub

    Private Sub Button_Click_1(sender As Object, e As RoutedEventArgs)
        child = New ChildWindow1
        AddHandler child.Closed, AddressOf ChildClosed
        AddHandler child.Closing, AddressOf ChildClosing
        child.Show()
    End Sub

    Private Sub ChildClosed(sender As Object, e As EventArgs)
        Dim result As Boolean? = CType(sender, ChildWindow).DialogResult

        If IsNothing(result) Then
            'Do something if DialogResult is Nothing You can not cancel close with this event
        ElseIf Not result Then
            'Do what you want when the Cancel Button is clicked
        ElseIf result Then
            'Do what you want when the Ok Button is clicked
        End If
    End Sub

    Private Sub ChildClosing(sender As Object, e As ComponentModel.CancelEventArgs)
        Dim result As Boolean? = CType(sender, ChildWindow).DialogResult

        If IsNothing(result) Then
            e.Cancel = True 'This will cancel the ChildWindows Close and leave it open
        ElseIf Not result Then
            'Do what you want when the Cancel Button is clicked
        ElseIf result Then
            'Do what you want when the Ok Button is clicked
        End If
    End Sub

End Class 
```

# c# - 如何创建具有选择性属性的对象？

> ID：13204039
> 
> 赞同：1
> 
> 时间：2012-11-02T22:44:55.780
> 
> 标签：c#, powershell

使用 Powershell 的 AD Cmdlet 时，您可以执行以下任一操作来返回 Microsoft.ActiveDirectory.Management.ADUser 类型的对象：

```
Get-ADUser user
Get-ADUser user -Properties * 
```

但是，第二个将返回一个具有更多属性的对象。

我正在使用 C# 编写自己的 PowerShell Cmdlet，它将返回与此类似的自定义对象。如何将其设置为仅根据参数返回某些属性？

这是一个将返回的示例类。我如何将其设置为有时包含 Suspended bool，有时不包含？例如，只有当我有一个论点 -Suspended

```
public class User
{
    public string Username { get; set; }
    public string GivenName { get; set; }
    public string FamilyName { get; set; }
    public string Uri { get; set; }
    public bool Suspended { get; set; }

    public GAUser(string username, string givenName,
        string familyName)
    {
        Username = username;
        GivenName = givenName;
        FamilyName = familyName;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:15:37.437

下面是一个使用开关的简短示例：

```
$scriptBlock = {
 param ([switch]$Suspended)
 $original = New-Object System.Object
 if ($Suspended)
 {
  $original | Add-Member -MemberType NoteProperty -Name Suspended -Value $true
 }
 Write-Output $original
} 
```

如果您使用 Suspended 开关调用脚本块，则 $new 将具有以下属性：

```
$new = & $scriptBlock -Suspended 
```

如果您在没有 Suspended 开关的情况下调用脚本块，则 $new 将不具有以下属性：

```
$new = & $scriptBlock 
```

# php - 如果 0-9 的所有数值都与字符串中的其他字符匹配，如何返回 false？

> ID：13204042
> 
> 赞同：0
> 
> 时间：2012-11-02T22:45:06.467
> 
> 标签：php, javascript, html, regex, validation

我专门针对数字，所以如果我在前端使用使用 javascript 的电话掩码，将用户输入过滤到 (000)000-000，基本上 [2-9] 和 [0-9] 作为掩码（[jquery.maskedinput -1.3.js](http://code.google.com/p/allios/source/browse/branches/25.07.2011/WebContent/jquery.maskedinput-1.3.js?r=209) ) 和移动过滤器...

```
jQuery(function ($e) {
var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/);
$e('#refer').val(window.location.href);

if (!(isMobile)) {      
    $e('#phone').mask('(299)299-9999');
    $e('#field_phone_number').mask('299-299-9999');
}
}); 
```

对于服务器端，我在 PHP 中有一个正则表达式（还没有什么特别的）

```
function phonenumber($value)
{
    return preg_match("/\(?\b[(. ]?[0-9]{3}\)?[). ]?[0-9]{3}[-. ]?[0-9]{4}\b/i", $value);
} 
```

如何创建一个针对所有数值的正则表达式或 php 脚本，而不为每个字符创建一个很长的正则表达式？我只想知道如果有人输入 (222)222-2222，他们在返回时会得到错误的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:03:24.797

```
function phonenumber($value)
{
    $prefix = '\d{3}'; // You might want to specify '2\d\d' (200 to 299)
    $regex = '#^(\('.$prefix.'\)|'.$prefix.')[\s\.-]?\d{3}[\.-]?\d{4}$#';
    if (preg_match($regex, $value))
    {
        // Number is in a suitable format

        // Now extract digits -- remove this section to not test repeated pattern
        $digits = preg_replace('#[^\d]+#', '', $value);

        // All numbers equal are rejected
        if (preg_match('#^(\d)\1{9}$#', $digits))
            return false;
        // end of pattern check

        // Otherwise it is accepted
        return true;
    }
    return false; // Not in a recognized format
} 
```

这将接受 (299)423-1234 和 277-111-2222，以及 (400)1234567 或 4001234567。它将拒绝 (400-1234567 和 400-12-34-56-7。它还将拒绝 (222) 222-2222 因为重复的 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:51:19.107

您可以使用反向引用`\1`来检测重复出现的模式。在您的情况下，您可以简单地混合 a`.*`以忽略中间填充物，例如`(`和`-`

```
 /(\d)(.*\1){7}/ 
```

将查找一个数字，并至少重复 7 次相同的数字，忽略用作填充符的任何其他字符。但是，这并不能确保它们是连续的，因此`(222)222-8222`也会匹配。

# r - 如何从R中的矩阵创建边缘列表？

> ID：13204046
> 
> 赞同：13
> 
> 时间：2012-11-02T22:45:46.203
> 
> 标签：r, list, matrix, social-networking, edge-list

该关系表示为如下矩阵`x`：

```
 A    B    C     D
A     0    2    1     1
B     2    0    1     0
C     1    1    0     1
D     1    0    1     0 
```

这些条目是指它们拥有的连接数。

谁能告诉我如何将其写为边缘列表？

我宁愿把它写成一个边缘列表：

```
A B
A B
A C
A D
B C 
```

但是这个边缘列表可以让我创建一个网络图吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-02T23:10:33.180

使用`igraph`包：

```
x <- matrix(c(0,2,1,1,2,0,1,0,1,1,0,1,1,0,1,0), 4, 4)
rownames(x) <- colnames(x) <- LETTERS[1:4]

library(igraph)
g <- graph.adjacency(x)
get.edgelist(g)

#      [,1] [,2]
#  [1,] "A"  "B" 
#  [2,] "A"  "B" 
#  [3,] "A"  "C" 
#  [4,] "A"  "D" 
#  [5,] "B"  "A" 
#  [6,] "B"  "A" 
#  [7,] "B"  "C" 
#  [8,] "C"  "A" 
#  [9,] "C"  "B" 
# [10,] "C"  "D" 
# [11,] "D"  "A" 
# [12,] "D"  "C" 
```

我还建议您花一些时间阅读[http://igraph.sourceforge.net/index.html](http://igraph.sourceforge.net/index.html)`igraph`上的文档，因为您最近提出的许多问题都是简单的案例用法。

（作为奖励，`plot(g)`将回答您的其他问题[如何在 R 中绘制关系？](https://stackoverflow.com/questions/13203778/how-to-plot-relationships-in-r)）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-01T00:58:34.940

使用`melt`in `reshape2`，然后删除权重==0。如果不需要打印重量。只是删除它。

```
x
    sample1 sample2 sample3 sample4
feature1       0       2       1       1
feature2       2       0       1       0
feature3       1       1       0       1
feature4       1       0       1       0

melt(x)
   Var1    Var2 value
1  feature1 sample1     0
2  feature2 sample1     2
3  feature3 sample1     1
4  feature4 sample1     1
5  feature1 sample2     2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:11:29.060

试试这个

```
M <- matrix( c(0,2,1,1,2,0,1,0,1,1,0,1,1,0,1,0), 4, 4, dimnames=list(c("A","B","C","D"), c("A","B","C","D")))

eList <- NULL
for ( i in 1:nrow(M) ){
  for ( j in 1:ncol(M)) {
    eList <- c(eList, rep(paste(dimnames(M)[[1]][i], dimnames(M)[[2]][j] ), M[i,j]))
  }
} 
```

输出

```
> eList
 [1] "A B" "A B" "A C" "A D" "B A" "B A" "B C" "C A" "C B" "C D" "D A" "D C" 
```

# c - C 程序链接到错误版本的函数

> ID：13204047
> 
> 赞同：5
> 
> 时间：2012-11-02T22:45:55.920
> 
> 标签：c, linker, glibc

我正在尝试调试调用错误版本的函数导致段错误的问题。我正在编译的代码是机器生成的，并包含一个名为“times”的函数，该函数将它的两个参数进行复数相乘。此代码在链接到更高级别的目标文件之前被编译为 .o。

当运行此代码时，segfaults 和 gdb 表明它在 glibc 的“times”版本中，它甚至不采用相同数量的参数。在此代码中的任何地方都没有 '#include 的实例。

将时间名称更改为 times1 可以解决问题。这不是一个长期的解决方案，尽管由于代码的机器生成性质，并且一直手动编辑此函数的名称并不吸引人。

整个混乱用 -Wall 编译清理，所以我不知道在哪里看。关于如何解决这个问题的任何想法？

```
Compile chain:
    gcc -Wall -I. -g --shared -o dpd.o -fPIC *.c (mahine generated code here)
    gcc -g --std=c99 -c -fpic getData.c -I/usr/local/include -L/usr/local/lib -lmatio -I/usr/local/include/iverilog -I$(MATLAB)
    gcc -g -shared -o getData.vpi getData.o $(MATLAB)/dpd.o -lvpi -lmatio -L/usr/local/lib 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:51:54.657

C 仅使用函数的名称作为标识符，因此任何两个（导出的）同名函数都会发生冲突。通常的做法是在库中为所有导出的名称添加一个唯一前缀。另一种选择是使用 C++ 作为“更好的 C”，并使用 C++ 编译器简单地构建 C 代码，利用 C++ 名称修饰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:20:41.107

所以这个问题的真正答案是扔给`-fno-builtin-times`gcc。这巧妙地避免了这个问题，没有大惊小怪。

这当然假设您不能将名称更改为`times`与 glibc 提供的函数不冲突的名称。

# java - Java Web 服务调用返回 HTML 而不是 XML

> ID：13204048
> 
> 赞同：0
> 
> 时间：2012-11-02T22:45:56.703
> 
> 标签：java, web-services, wsdl

在使用 POST 请求后尝试从 Web 服务读取响应时遇到问题。我期待得到一些有用的 XML，但我得到的只是 HTML。

```
 URL url = new URL("https://abc.co.uk/someWS");
    String pKeyPassword = "xxxxxx";
    String xmlOutput = "someXML...";

    HttpsURLConnection con = (HttpsURLConnection) url.openConnection();

    //Load authentication certificate.
    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("SunX509");
    KeyStore keyStore = KeyStore.getInstance("PKCS12");

    InputStream keyInput = new FileInputStream("/home/keystore.p12");
    keyStore.load(keyInput, pKeyPassword.toCharArray());
    keyInput.close();

    keyManagerFactory.init(keyStore, pKeyPassword.toCharArray());

    SSLContext context = SSLContext.getInstance("TLS");
    context.init(keyManagerFactory.getKeyManagers(), null, new SecureRandom());

    con.setSSLSocketFactory(context.getSocketFactory());

    // Tell the connection that we will be sending information
    con.setDoInput(true);
    con.setDoOutput(true);
    con.setRequestProperty("Content-Length", "" + xmlOutput.length());
    con.setRequestProperty("Content-Type", "text/xml; UTF-8");
    con.setRequestMethod("POST");

    con.connect();

    // Send the POST stream data
    DataOutputStream outputStream = new DataOutputStream(con.getOutputStream());
    outputStream.writeBytes(xmlOutput);

    // Read the response
    InputStream inputstream = con.getInputStream();
    InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
    BufferedReader bufferedreader = new BufferedReader(inputstreamreader);

    // format response to a string
    String string = null;
    String response = "";
    while ((string = bufferedreader.readLine()) != null) {
      response += string;
    }
    con.disconnect();
    System.out.println(response); 
```

我确信我正在连接的 Web 服务没有任何问题，显然从他们的角度来看，我正在尝试执行 GET 请求（它将返回 HTML）而不是 POST 请求。知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:29:16.070

您似乎将您的网络服务称为“艰难的方式”（TM）。

有许多框架（Metro、CXF 等）可以为您生成存根类，您可以很容易地调用它们，而且您处理当前问题的可能性要小得多。`wsimport`是您的朋友，如果有问题的 WSDL 不正确，他会告诉您。

有关一些相关链接，请参阅[此答案](https://stackoverflow.com/a/3590252/79450)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:49:30.123

假设如果你有 HTML，它可能是一些服务器错误。请阅读服务器日志以检测该问题。无论如何，您可以使用*[soapUI](http://www.soapui.org/pages/index2/index_10_reasons_3.html?utm_expid=56905-10&utm_referrer=http://www.google.co.il/search?q=SOAPui&rlz=1C1LENP_enIL506IL506&aq=f&oq=SOAPui&sugexp=chrome,mod&sourceid=chrome&ie=UTF-8)*应用程序来验证您的Web 服务是否已定义并正常工作。

这是对我有用的代码片段（只需添加密码）：

```
import org.apache.axis.AxisFault;
import org.apache.axis.SOAPPart;
import org.apache.axis.client.Call;
import org.apache.axis.client.Service;
import org.apache.axis.message.SOAPEnvelope;
import org.apache.axis.soap.MessageFactoryImpl;
....
String mHostAddr = "yourURL";
try {

        String envelope = getXML(); //redFromXmlFile();
        //String envelope = "";
        byte[] reqBytes = envelope.getBytes();
        ByteArrayInputStream bis = new ByteArrayInputStream(reqBytes);
        StreamSource ss = new StreamSource(bis);

        //Create a SOAP Message Object
        MessageFactoryImpl messageFactory = new MessageFactoryImpl();
        SOAPMessage msg = messageFactory.createMessage();
        SOAPPart soapPart = (SOAPPart) msg.getSOAPPart();

        //Set the soapPart Content with the stream source
        soapPart.setContent(ss);

        //Create a WebService Call
        Service service = new Service();
        Call call = (Call)service.createCall();
        call.setTargetEndpointAddress(mHostAddr);

        //Invoke the WebService.
        SOAPEnvelope resp = call.invoke(((org.apache.axis.SOAPPart)soapPart).getAsSOAPEnvelope());

    } catch (AxisFault ex) {
        System.out.println(ex.getMessage());
    } catch (ServiceException ex) {
        System.out.println(ex.getMessage());
    } catch (SOAPException ex) {
        System.out.println(ex.getMessage());
    } catch (RemoteException e) {
        e.printStackTrace();
    } 

.... 
```

它可能会帮助您或找到正确的方向

# android - 在 Android 2.3 中实现相机 API

> ID：13204049
> 
> 赞同：1
> 
> 时间：2012-11-02T22:45:57.460
> 
> 标签：android, callback, camera, preview

我正在开发相机 API。它在 4.0 和 4.1 中完美运行，但是当我在 Android 2.3 或更低版本的设备上尝试它时，它在 surfacechanged 功能中崩溃。我正在使用前置摄像头拍照。这是我的日志：

```
11-03 03:37:11.756: E/AndroidRuntime(11316): FATAL EXCEPTION: main
11-03 03:37:11.756: E/AndroidRuntime(11316): java.lang.RuntimeException: startPreview failed
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.hardware.Camera.startPreview(Native Method)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at com.test.CameraSurfaceView.surfaceChanged(CameraSurfaceView.java:42)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.SurfaceView.updateWindow(SurfaceView.java:557)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.View.draw(View.java:6988)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.View.draw(View.java:6988)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.View.draw(View.java:6988)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1993)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewRoot.draw(ViewRoot.java:1614)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1335)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1973)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.os.Looper.loop(Looper.java:150)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at android.app.ActivityThread.main(ActivityThread.java:4293)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at java.lang.reflect.Method.invokeNative(Native Method)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at java.lang.reflect.Method.invoke(Method.java:507)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-03 03:37:11.756: E/AndroidRuntime(11316):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码：

```
class CameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback {

    Camera camera;
    private int cameraId = 0;

    CameraSurfaceView(Context context) {
        super(context);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        SurfaceHolder holder = this.getHolder();
        holder.addCallback(this);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {

        // The default orientation is landscape, so for a portrait app like this
        // one we need to rotate the view 90 degrees.
//      camera.setDisplayOrientation(90);

        // IMPORTANT: We must call startPreview() on the camera before we take
        // any pictures

//      camera.startPreview();

//      camera.setParameters(parameters);
        camera.startPreview();

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            // Open the Camera in preview mode
//          cameraId = findFrontFacingCamera();
            this.camera = Camera.open(cameraId);
            this.camera.setPreviewDisplay(holder);
        } catch (IOException ioe) {
            ioe.printStackTrace(System.out);
        }

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when replaced with a new screen
        // Always make sure to release the Camera instance
        camera.stopPreview();
        camera.release();
        camera = null;
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        // TODO Auto-generated method stub
    }

    public void takePicture(PictureCallback imageCallback) {
        camera.takePicture(null, null, imageCallback);
    }

    private int findFrontFacingCamera() {
        int cameraId = -1;
        // Search for the front facing camera
        int numberOfCameras = Camera.getNumberOfCameras();
        for (int i = 0; i < numberOfCameras; i++) {
            CameraInfo info = new CameraInfo();
            Camera.getCameraInfo(i, info);
            if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {

            Log.e("Found", "Camera found");
            cameraId = i;
            break;
        }
    }
    return cameraId;
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-18T10:00:35.750

在前面加上这个

```
 if (camera != null) {
        try {
            if (previewing) {
                camera.stopPreview();
                previewing = false;
                Log.d("", "previewing :");
            }

            camera.setPreviewDisplay(holder);
            camera.startPreview();

            previewing = true;
            } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

# magento - Magento 块输出给出空字符串

> ID：13204051
> 
> 赞同：1
> 
> 时间：2012-11-02T22:46:09.223
> 
> 标签：magento

我正在尝试解决我的块输出为空字符串的问题。

我将其追踪到可以看到在模板文件中评估 PHP 语句的点，但在`toHtml()`class内部`Mage_Core_Block_Abstract`，`$html = $this->_toHtml();`将空字符串分配给`$html`.

`fetchView()`我进一步挖掘它，发现 inside`$html = ob_get_clean();`为其分配了空字符串，即使模板包含在这一行之上，我也可以看到它使用调试器进行评估。

从这里我对如何调试它一无所知，可能是我的模块中遗漏了一些错误（我是 Magento 的初学者）。

这是模块中的相关代码：

**应用程序/代码/本地/AnattaDesign/AbandonedCarts/etc/config.xml**

```
<config>
    <global>
        <blocks>
            <anattadesign_abandonedcarts>
                <class>AnattaDesign_AbandonedCarts_Block</class>
            </anattadesign_abandonedcarts>
        </blocks>
    </global>
    <adminhtml>
    <layout>
        <updates>
            <anattadesign_abandonedcarts>
                <file>layout.xml</file>
            </anattadesign_abandonedcarts>
        </updates>
    </layout>
</adminhtml> 
```

**app/design/adminhtml/base/default/layout/layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<layout>
    <adminhtml_dashboard_index>
        <reference name="head">
            <action method="addCss">
                <stylesheet>anattadesign/abandonedcarts/css/style.css</stylesheet>
            </action>
            <action method="addJs">
                <script>anattadesign/abandonedcarts/zepto.js</script>
            </action>
            <action method="addJs">
                <script>anattadesign/abandonedcarts/adminhack.js</script>
            </action>
        </reference>
    </adminhtml_dashboard_index>
</layout> 
```

**应用程序/代码/本地/AnattaDesign/AbandonedCarts/controllers/WidgetController.php**

```
<?php

class AnattaDesign_AbandonedCarts_WidgetController extends Mage_Adminhtml_Controller_Action {

    public function indexAction() {
        echo "index action of widget controller";
        die();
    }

    public function renderAction() {
        $html = $this->getLayout()->createBlock( 'anattadesign_abandonedcarts/widget', 'root' )->setTemplate( 'anattadesign/abandonedcarts/widget.phtml' )->toHtml();
        $this->getResponse()->setBody( $html );
        die();
    }
} 
```

**应用程序/代码/本地/AnattaDesign/AbandonedCarts/Block/Widget.php**

```
<?php

class AnattaDesign_AbandonedCarts_Block_Widget extends Mage_Core_Block_Template {

} 
```

我正在由管理员控制器运行它并`renderAction()`生火。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T20:30:25.537

移除方法 renderAction() 中的 die()

```
class AnattaDesign_AbandonedCarts_WidgetController extends Mage_Adminhtml_Controller_Action {

    ....

    public function renderAction() {
        $html = $this->getLayout()->createBlock( 'anattadesign_abandonedcarts/widget')
                ->setTemplate( 'coming.phtml' )
                ->toHtml();
        $this->getResponse()->setBody( $html );
    }
} 
```

# jquery - 带有链接的图像悬停画廊

> ID：13204055
> 
> 赞同：1
> 
> 时间：2012-11-02T22:46:41.100
> 
> 标签：jquery, image, image-gallery

我需要在一个简单的图片库上发生 3 件事，在悬停时更改主大图，点击（在大图上），打开一个模态框。问题是我不知道如何将唯一链接附加到动态加载的图像，这是我目前所拥有的：

jQuery：

```
$('#thumbs ul li a').hover(

function() {
    var currentBigImage = $('#bigpic img').attr('src');
    var newBigImage = $(this).attr('href');
    var currentThumbSrc = $(this).attr('rel');
    switchImage(newBigImage, currentBigImage, currentThumbSrc);
}, function() {});

function switchImage(imageHref, currentBigImage, currentThumbSrc) {
    var theBigImage = $('#bigpic img');
    if (imageHref != currentBigImage) {
        theBigImage.fadeOut(250, function() {
            theBigImage.attr('src', imageHref).fadeIn(250);
            var newImageDesc = $("#thumbs ul li a img[src='" + currentThumbSrc + "']").attr('alt');
            $('p#desc').empty().html(newImageDesc);
        });
    }
}

$('#thumbs ul li a').click(function(e) {
    e.preventDefault();
});​ 
```

HTML：

```
<div id="thumbs">
    <ul>
        <li><a rel="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring01.jpg" href="http://www.test25.net/prestashop1-gallery/images/rings/large/ring01_L.jpg"><img src="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring01.jpg" alt="Ring 1"/></a></li>
        <li><a rel="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring02.jpg" href="http://www.test25.net/prestashop1-gallery/images/rings/large/ring02_L.jpg"><img src="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring02.jpg" alt="Ring 2"/></a></li>
    </ul>
    <ul>
        <li><a rel="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring07.jpg" href="http://www.test25.net/prestashop1-gallery/images/rings/large/ring07_L.jpg"><img src="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring07.jpg" alt="Ring 7"/></a></li>
        <li><a rel="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring08.jpg" href="http://www.test25.net/prestashop1-gallery/images/rings/large/ring08_L.jpg"><img src="http://www.test25.net/prestashop1-gallery/images/rings/thumbnails/ring08.jpg" alt="Ring 8"/></a></li>
    </ul>
</div>
<div id="bigpic">
    <img src="http://www.test25.net/prestashop1-gallery/images/rings/large/ring01_L.jpg" alt="First Main Image"/>
    <p id="desc">
        Move your mouse over the images on the left to view here...
    </p>
</div> 
```

​</p>

[演示](http://jsfiddle.net/ub8GT/)

```
Any ideas? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:00:21.187

你可以这样做：

```
function switchImage(imageHref, currentBigImage, currentThumbSrc) {
    var theBigImage = $('#bigpic img');
    if (imageHref != currentBigImage) {
        theBigImage.fadeOut(250, function() {
            theBigImage.attr('src', imageHref).fadeIn(250);
            var newImageDesc = $("#thumbs ul li a img[src='" + currentThumbSrc + "']").attr('alt');
            $('p#desc').empty().html(newImageDesc);
        });
        theBigImage.off('click').on('click', function() {
            alert('open modal box');
        });
    }

} 
```

见 .on() .off()

# assembly - 汇编代码循环

> ID：13204062
> 
> 赞同：0
> 
> 时间：2012-11-02T22:46:57.370
> 
> 标签：assembly, x86, disassembly

我知道这里有一个循环，但我不知道发生了什么。更准确地说，前三行发生了什么？

```
0x08048d45 <phase_2+42>:        lea    -0x14(%ebp),%ebx
0x08048d48 <phase_2+45>:        mov    -0x8(%ebx),%eax
0x08048d4b <phase_2+48>:        add    -0x4(%ebx),%eax
0x08048d4e <phase_2+51>:        cmp    %eax,(%ebx) //compare register values
0x08048d50 <phase_2+53>:        je     0x8048d57 <phase_2+60> // if true, jump to 0x08048d57
0x08048d52 <phase_2+55>:        call   0x8049155 <func> //calls func otherwise
0x08048d57 <phase_2+60>:        add    $0x4,%ebx //add 4 to ebx
0x08048d5a <phase_2+63>:        lea    -0x4(%ebp),%eax
0x08048d5d <phase_2+66>:        cmp    %eax,%ebx //compare register values
0x08048d5f <phase_2+68>:        jne    0x8048d48 <phase_2+45> // if true, jump to 0x08048d48 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:15:59.820

```
lea    -0x14(%ebp),%ebx 
```

这有效地做到了`%ebx = %ebp - 0x14`。加载有效地址指令经常被滥用，因为它能够执行非常快速的简单数学运算。

```
mov    -0x8(%ebx),%eax 
```

这个可以`%eax = *(%ebx - 0x8)`，即将值加载到`%ebx - 0x8`to `%eax`。

```
add    -0x4(%ebx),%eax 
```

这个可以`%eax += *(%ebx - 0x4)`。

```
cmp    %eax,(%ebx) //compare register values
je     0x8048d57 <phase_2+60> // if true, jump to 0x08048d57
call   0x8049155 <func> //calls func otherwise 
```

这三个指令相当于`if (%eax != *%ebx) func();`

```
add    $0x4,%ebx //add 4 to ebx 
```

这个可以`%ebx += 4`。

```
lea    -0x4(%ebp),%eax 
```

这个计算`%eax = %ebp - 0x4`。

```
cmp    %eax,%ebx //compare register values
jne    0x8048d48 <phase_2+45> // if true, jump to 
```

这两个等于`do { ... } while (%eax != %ebx)`。

`%ebp`是基指针。它指向调用者的堆栈（上层函数）和被调用者的堆栈（当前函数）之间的分割点。上面是它自己保存的值、返回地址和这个函数的参数（除非使用了一些寄存器调用约定）。在它下面是局部变量，因此`%ebp - 0x14`很可能是指向 32 位整数数组的指针，假设`%ebx`稍后会逐步递增`4`并使用整数加法。整个汇编代码应该在 C 中转换为类似的东西：

```
int arr[6];

for (i = 0; i < 4; i++)
{
   if (arr[i] + arr[i+1] != arr[i+2])
      func();
} 
```

或者，如果您更喜欢负偏移量：

```
for (i = 2; i < 6; i++)
{
   if (arr[i-2] + arr[i-1] != arr[i])
      func();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:03:29.607

我讨厌[相反的语法](http://asm.sourceforge.net/articles/linasm.html#Syntax)，`AT&T`但您要问的是：

*   [做什么`lea`？](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction)
*   做什么`mov`？
*   有什么不同？`// it is confusing`

> `lea`是“加载有效地址”的缩写。它将源操作数的位置引用的地址加载到目标操作数。例如，您可以使用它来：
> 
> ```
> lea ebx, [ebx+eax*8] 
> ```
> 
> 用一条指令进一步移动`ebx`指针项（在 64 位/元素数组中）。`eax`基本上，您可以从 x86 架构支持的复杂寻址模式中受益，从而有效地操作指针。

```
lea eax, [var] — the address of var is placed in EAX. see [here][3]

mov eax, [ebx]  ; Move the 4 bytes in memory at the address contained in EBX into EAX 
```

和这里解释的区别：

[MOV和LEA有什么区别](https://stackoverflow.com/questions/1699748/what-is-the-difference-between-mov-and-lea)

汇编代码中的第 3 行设置源代码中的局部变量，`c`它以下列方式在堆栈上声明变量：

```
u32 *ptr = %ebp - 0x14;
u32 var1 = *(ptr - 0x8);
u32 var2 = var1 + *(ptr- 0x4) ; 
```

# shell - 只要变量为空，就运行一个循环

> ID：13204063
> 
> 赞同：0
> 
> 时间：2012-11-02T22:46:58.690
> 
> 标签：shell

我有这个小脚本，用于检查 git 配置中是否存在用户名和电子邮件，否则提示用户输入它们：

```
GIT_USER_EXISTS=`git config --get-regexp 'name' | awk '{print $2}'`
GIT_EMAIl_EXISTS=`git config --get-regexp 'name' | awk '{print $2}'`
while [[ -z $GIT_USER_EXISTS || -z $GIT_EMAIl_EXISTS ]]; do
    echo "User name and Email are not set in git. Please enter them now..."
    echo "First and Last name:"
    read gitUser
    git config --global user.name "$gitUser"
    echo "Email:"
    read gitEmail
    git config --global user.email "$gitEmail"
done 
```

但它不起作用；）

第一 - 它甚至没有首先进入循环。我的猜测是，与 grep 不同，awk 确实在变量中插入了一些（隐藏的？）字符。第二 - 我不确定脚本是否可以识别现在的值，因为我在循环之外声明了变量。我在这个假设上错了吗？

编辑：

我通过使用反引号而不是变量名的引号解决了第一个问题。第二个问题仍然存在 - 一定有比两次声明变量更好的用法？！类似于 do...while in shell 的东西？

编辑＃2：

这样做的效果稍微好一点，但有一个相当长的条件语句。能不能再短一点？

```
while [[ -z $GIT_USER_EXISTS || -o $GIT_USER_EXISTS || -z $GIT_EMAIl_EXISTS || -o $GIT_EMAIl_EXISTS ]]; do
    echo "User name and Email are not set in git. Please enter them now..."
    echo "First and Last name:"
    read gitUser
    git config --global user.name "$gitUser"
    echo "Email:"
    read gitEmail
    git config --global user.email "$gitEmail"

    GIT_USER_EXISTS=`git config --get-regexp 'name' | awk '{print $2}'`
    GIT_EMAIl_EXISTS=`git config --get-regexp 'name' | awk '{print $2}'`
done 
```

实际上它几乎可以解决问题 - 它应该是“如果 var 已设置并且为空或 var 未设置”。但这太长了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:49:36.853

尝试这样做：

```
GIT_USER_EXISTS="git config --get-regexp 'name' | awk '{print $2}'"
GIT_EMAIl_EXISTS="git config --get-regexp 'name' | awk '{print $2}'"
while [[ -z $GIT_USER_EXISTS || -z $GIT_EMAIl_EXISTS ]]; do
    echo "User name and Email are not set in git. Please enter them now..."
    echo "First and Last name:"
    read gitUser
    git config --global user.name "$gitUser"
    echo "Email:"
    read gitEmail
    git config --global user.email "$gitEmail"
    GIT_USER_EXISTS="git config --get-regexp 'name' | awk '{print $2}'"
    GIT_EMAIl_EXISTS="git config --get-regexp 'name' | awk '{print $2}'"
done 
```

*   如果你测试`$GIT_USER_EXISTS`or `$GIT_EMAIl_EXISTS`，你应该在某处声明它；）

# c# - 关闭过滤器

> ID：13204064
> 
> 赞同：11
> 
> 时间：2012-11-02T22:47:02.597
> 
> 标签：c#, excel

因此，我在 Excel 文档中进行了一些搜索，但其他人打开过滤器并保持打开状态是很常见的。当这些过滤器打开时，这些单元格不包含在工作表的单元格范围内。

有没有办法关闭这些自定义过滤器，以便我仍然可以访问工作表中的所有单元格？

这是我用来查找方法的方式

```
Microsoft.Office.Interop.Excel.Range find = sheet.Cells.Find(tapeID, Type.Missing,
Microsoft.Office.Interop.Excel.XlFindLookIn.xlValues, Microsoft.Office.Interop.Excel.XlLookAt.xlPart, 
Microsoft.Office.Interop.Excel.XlSearchOrder.xlByRows, Microsoft.Office.Interop.Excel.XlSearchDirection.xlNext, false, Type.Missing, Type.Missing); 
```

当过滤器打开时，我会返回一个空对象，并且除了关闭过滤器之外什么也做不了，我得到了我需要的东西。

关于关闭过滤器的任何提示？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T00:59:31.560

我将首先测试是否已应用过滤器，然后将其停用：

```
if (xlSheet.AutoFilter != null)
{
    xlSheet.AutoFilterMode = false;
} 
```

这应该删除已应用的任何过滤并删除过滤箭头按钮。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T00:23:28.473

[您可以通过在不带参数的范围内调用AutoFilter](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.autofilter%28VS.80%29.aspx#Y0)方法两次来禁用所有过滤器。

```
sheet.Cells.AutoFilter();
sheet.Cells.AutoFilter(); 
```

我不是很精通互操作，但您可能需要传递 5`Type.Missing`或`Missing.Value`作为参数。

如果 AutoFilter 打开，第一个调用将关闭它，如果它关闭，第二个调用将打开它，反之亦然。但无论哪种情况，由于过滤，将不再有隐藏单元格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-22T11:07:23.233

我使用了以下代码，因为`xlSheet.AutoFilterMode = false`即使`xlSheet.AutoFilterMode`是`true`.

```
if (xlSheet.AutoFilter != null && xlSheet.AutoFilterMode == true)
{
    xlSheet.AutoFilter.ShowAllData();
} 
```

正如[Sid Holland](https://stackoverflow.com/questions/13204064/turn-off-filters#comment18132372_13204989)所提到的，这会清除所有过滤器，同时还保留过滤器箭头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-08T18:19:37.173

如果您想关闭工作表上的所有过滤器，包括表格，这里有一些代码。似乎没有现成的方法可以清除所有过滤器，包括表格，更糟糕的是，当您尝试清除过滤器并且工作表上有表格时，我们注意到有时会引发异常。所以我们要做的是尝试两种方式——对于表格和常规工作表，并吞下并记录我们发现的任何异常。

注意：我在这里不包括日志依赖项，所以我已经注释掉了。作为记录，我们使用的是 log4net。

```
using Microsoft.Office.Interop.Excel;

class WorksheetDecoratorImpl
{
    public Worksheet Worksheet { get; private set; }

    public string Name => Worksheet.Name;

    public void TryClearAllFilters()
    {
        try
        {
            if (Worksheet.AutoFilter != null)
            {
                Worksheet.AutoFilterMode = false;
            }
        }
        catch(Exception ex)
        {
            //Log.Error(string.Format("Clear filters encountered an issue. Sheet: {0}", Name));
        }
        try
        {
            ListObjects listObjects = Worksheet.ListObjects;                
            foreach(ListObject listObject in listObjects)
            {
                listObject.AutoFilter.ShowAllData();
            }
        }
        catch (Exception ex)
        {
            //Log.Error(string.Format("Clear table filters encountered an issue. Sheet: {0}", Name));
        }
    }
} 
```

# 参考

[从表中清除过滤器](https://stackoverflow.com/questions/33197641/clear-filter-from-table)

# ajax - jQuery ajax - 从 ajax 请求输出文件

> ID：13204065
> 
> 赞同：1
> 
> 时间：2012-11-02T22:47:16.263
> 
> 标签：ajax, jquery, httpresponse

是否可以将文件作为 ajax 调用的响应输出？我编写了一个使用 ajax 调用输出 zip 文件的函数，代码如下：

```
<script type="text/javascript">

    $(document).ready(function () {

        $(".ziplink").click(function (e) {
            e.preventDefault();
            var url = $(this).attr('href');
            var spinner = $(this).parent().children(".spinnerbox");
            spinner.show();
            $.ajax({
                url:url,
                type:"GET",
                dataType:"application/x-zip-compressed",
                success:function (data) {
                    console.log('success');
                    spinner.hide();

                },
                error:function () {
                    console.log('ko');
                    spinner.hide();
                }

            });
        });

    });
</script> 
```

现在，从萤火虫控制台一切正常，但我没有文件输出。缺什么？

虽然这在非 ajax 方式中具有完整的功能（一个简单的操作链接），但我希望在服务器处理请求时有微调器动画。

谢谢 - 卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:43:05.123

```
$(".ziplink").click(function (e) {

    e.preventDefault();
    var _self = $(this);
    $('.spinner').show();

    $.ajax({
        type : 'HEAD',
        url : _self.attr('href'),
        complete : function(){

            $('.spinner').hide();
            var _tmp = $('<iframe />')
                .attr('src', _self.attr('href'))
                .hide()
                .appendTo(_self)
                setTimeout(function(){
                    _tmp.remove();
                },5000);

        }

    });

}); 
```

Demo [http://jsfiddle.net/4sMsr/3/](http://jsfiddle.net/4sMsr/3/)

# mercurial - Mercurial：可能存在不完整的中央存储库？

> ID：13204072
> 
> 赞同：0
> 
> 时间：2012-11-02T22:48:05.980
> 
> 标签：mercurial, repository

我想实现以下设置：

AtWork:MercurialRepo <-> Internet:MercurialRepo <-> AtHome:MercurialRepo

问题是存储库是几个演出。我已经在家里拥有了整个 repo（通过捆绑->cdrom->unbundling）。问题是，我不想将整个存储库存储在互联网上。有没有办法暂时从版本控制中排除文件夹，以便仅推送/拉出我正在通过 Internet 处理的存储库的一个子集？我怎样才能最好地实现我的目标？有时我需要做繁琐的捆绑 -> cdrom -> 解绑路由，只是为了更新其他所有内容，但总的来说，我确实想使用互联网路由并且不想将整个 repo 存储在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:23:32.453

因此，正如您现在发现的那样，您无法从存储库中选择性地克隆某些文件。你能做的最好的就是克隆所有分支的一个子集；但是对于存储库中的所有文件，您将获得这些分支的整个过去历史记录。所以，除非很多大文件只在某些分支中知道，而在其他分支中不知道，否则这对您没有帮助。

由于您的问题是文件的大小（而不是漫长而庞大的历史），您可能需要将其分解为几个可管理大小的“子存储库”。请注意，您有兴趣克隆的子集必须是子存储库；克隆主存储库必然包括子存储库。mercurial[子存​​储库文档](http://mercurial.selenic.com/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)建议您制作一个简单的（“瘦壳”）主存储库，并将所有项目代码放在子存储库中。

子存储库是一个复杂的解决方案，并且被 mercurial 团队认为是“不得已而为之的功能”。这是一个复杂的设置，有各种限制（请参阅文档），并且您将尝试以保留文件历史记录的方式转换您的存储库。因此，值得考虑避免这种情况的方法：

a) 如果你能避免你的 repo 的中间副本，那将是最好的；有没有办法可以设置 ssh 访问或代理，以便您的家庭回购可以直接与您的工作回购交谈？（反之亦然；如果*其中一个*位置能够与另一个位置联系就足够了）。

b）正如@vaclav 的回答所暗示的那样，您可以在 USB 记忆棒上携带 repo。

c）或者也许你应该咬紧牙关，在互联网上克隆整个 repo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:27:13.427

> 有没有办法暂时从版本控制中排除文件夹，以便仅推送/拉出我正在通过 Internet 处理的存储库的一个子集？

不是文件夹，而是回购的某些部分 - 是的

您可以`push -b`（仅某些分支）或`push -r`（与祖先一起修订：对于最新工作，它将是 -r 提示），但最终的传输大小很大程度上取决于您的 DAG 的类型 - 如果有很多跨分支合并您可能只跳过一小部分变更集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T23:47:03.327

是不可能的。最接近的方法是使用子存储库，这将有效地允许您在网络上仅拥有大型存储库的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:34:28.203

我有一个小想法，与你所问的有点不同，但是......如果我有同样的问题，我会使用 USB 闪存作为整个存储库（如果你大约 10 或 20 个演出，它应该很便宜）。因此，在工作中，您可以复制或克隆整个 repo 到 usb，在家中从中提取新的更改，完成家庭工作后，将其推送到 flash 上的 repo，然后将其拉到工作中的 repo（我什至使用临时提交对于我恢复到工作目录并剥离的未完成的工作，所以我可以继续我结束的地方）。

但绝对最简单的方法是尝试与工作服务器或工作中的机器建立一些连接。或者在互联网上获得更大的回购空间。所以，只是另一个想法。高温高压

# c# - System.InvalidOperationException：实体只能按修改后附加

> ID：13204076
> 
> 赞同：0
> 
> 时间：2012-11-02T22:48:17.877
> 
> 标签：c#, sql, linq-to-sql, datacontext

我正在尝试更新名为“Hero”的表，正在使用`DataContext`，代码如下所示：-

```
//linq to sql table (automatic generated)
[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.Hero")]
    public partial class Hero : INotifyPropertyChanging, INotifyPropertyChanged
    {
          //fields methods etc..
    } 
```

还有我自己的偏职英雄...

```
 public partial class Hero : IHero {
           //my fields and methods etc...

            public void Save() {
                using(GameDBDataContext db = new GameDBDataContext()) {
                    db.Heros.Attach(this, true);
                    db.SubmitChanges();
                }
        }
} 
```

但它正在抛出这个：-

```
System.InvalidOperationException: An entity can only be attached as modified without original state if it declares a version member or does not have an update check policy. 
```

这个问题的解决方案是什么？

编辑：我试过这个： -

```
public void Save() {
    using(GameDBDataContext db = new GameDBDataContext()) {
        db.Heros.Attach(this, db.Heros.SingleOrDefault(x => x.id == EntityID));
    }
} 
```

它抛出：-`System.NotSupportedException: An attempt has been made to Attach or Add an entity that is not new, perhaps having been loaded from another DataContext. This is not supported.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:21:42.920

我认为您没有`Attach`正确使用该方法。你看过这个[http://msdn.microsoft.com/en-us/library/bb548978.aspx](http://msdn.microsoft.com/en-us/library/bb548978.aspx)吗？

如果您传入的对象是在代码中创建的（而不是通过反序列化），它可能无法工作。如果它是通过反序列化制作的，那么我建议您尝试制作原始对象的副本，对其进行修改，并使用接受修改和未修改实体的重载`Attach(Entity old, Entity new)`。

# c# - 我们如何从 XMLSerializer 函数传递多个对象

> ID：13204078
> 
> 赞同：1
> 
> 时间：2012-11-02T22:48:20.483
> 
> 标签：c#, xml-serialization

我们如何通过函数重载方法传递不同类的不同对象？

示例代码：

```
static public void SerializeToXML(Movie movie)
{
    XmlSerializer serializer = new XmlSerializer(typeof(Movie));
    TextWriter textWriter = new StreamWriter(@"C:\movie.xml");
    serializer.Serialize(textWriter, movie);
    textWriter.Close();
} 
```

当我使用此代码时：

```
static public void SerializeToXML(FbTextView p, FbTextField q)
{
    try
    {
        XmlSerializer textviewserilizer = new XmlSerializer(typeof(FbTextView));
        XmlSerializer textfieldserilizer = new XmlSerializer(typeof(FbTextField));

        TextWriter textWriter = new StreamWriter(@"D:\movie.xml");
        textviewserilizer.Serialize(textWriter, p);
        textfieldserilizer.Serialize(textWriter, q);
        textWriter.Close();
    }
    catch (Exception ex)
    {
        while (ex != null)
        {
            Trace.WriteLine(ex.Message);
            ex = ex.InnerException;
            MessageBox.Show(ex.Message);
        }
        throw;
    }
} 
```

它的输出 xml 显示一些结果，即：

```
XML Parsing Error: junk after document element 
Location: file:///D:/movie.xml
Line Number 6, Column 14:</FbTextView><?xml version="1.0" encoding="utf-8"?>
                         -------------^ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T23:00:08.317

你可以这样写[`generics`](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.80%29.aspx)：

```
public static void SerializeToXml<T>(this T objectToSerialize, string fileName)
{
    XmlSerializer serializer = new XmlSerializer(objectToSerialize.GetType());
    using (TextWriter textWriter = new StreamWriter(fileName))
    {
        serializer.Serialize(textWriter, objectToSerialize);
    }
} 
```

*   泛型一开始可能有点令人困惑，但绝对值得学习。简而言之，现在您的方法接受任何类型。
*   接受每种类型可能过于自由，然后您可以[`constrain`](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)只接受某些类型。
*   将文件名作为参数传递给您的方法似乎是个好主意，否则您只能使用该方法写入一个文件（名称）。
*   您还可以阅读有关[`using statement`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)
*   [`extension method`](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)正如 LB 建议的那样，您可以通过在第一个参数之前添加 this 关键字来将您的方法变成一个。
*   如果要将其实现为扩展方法，则方法和类必须是静态的。

如果您将 SerializeToXml 方法作为扩展方法，您可以通过以下两种方式之一调用它，结果将是相同的：

```
movie.SerializeToXml(@"C:\movie.xml");

SerializeToXml(movie, @"C:\movie.xml"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:01:21.800

这里可以使用扩展方法

```
var xml = movie.SerializeToXML();

public static class SOExtensions
{
    public static string SerializeToXML<T>(this T obj)  where T : new()
    {
        StringWriter s = new StringWriter();
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        serializer.Serialize(s, obj);
        return s.ToString();
    }
} 
```

* * *

对于@ [JohnSaunders](https://stackoverflow.com/users/76337/john-saunders)的评论：*“-1 直到您将该 StringWriter 放入 using 块”*

> “StringWriter 类” 实现一个 TextWriter 用于将信息写入字符串。信息存储在底层**StringBuilder**中。 [http://msdn.microsoft.com/en-us/library/system.io.stringwriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.stringwriter.aspx)

这里是 StringWriter 及其基类处理的代码。

```
//StringWriter
protected override void Dispose(bool disposing)
{
    this._isOpen = false;
    base.Dispose(disposing);
}

//TextWriter
protected virtual void Dispose(bool disposing)
{
} 
```

# sql - Oracle SQL - 按 CASE 分组

> ID：13204080
> 
> 赞同：1
> 
> 时间：2012-11-02T22:48:33.510
> 
> 标签：sql, oracle

我有以下查询：

```
Select Player_Id,
Pt_Credit As Total_Points
From Player 
Where Trunc(Create_Dtime) = Trunc(Sysdate) - 90
And Trunc(Init_Dtime) >= To_Date('2012-sep-1','yyyy-mon-dd')
Order by Total_Points Desc 
```

这给了我这个结果：

```
Player_ID      TOTAL_POINTS
  23452         1500
  23494         1000
  30934         500 
```

等等。我想将这些 player_ids 结果分组为 0-300 点、301-600 点、601-900 点和大于 900 点的组......所以结果看起来像这样：

```
Point_Level     Count(Player_ID)
0-300            532
301-600          444
601-900          669
>900             185 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:06:34.680

采用`CASE ... WHEN`

```
SELECT players.clasification, count(players.player_id)
FROM (
    SELECT ROWNUM player_id, 
        (ROWNUM + 100) points,
        CASE
            WHEN (ROWNUM + 100) BETWEEN 0 AND 300 THEN
                '0-300'
            WHEN (ROWNUM + 100) BETWEEN 301 AND 600 THEN
                '301-600'
            WHEN (ROWNUM + 100) BETWEEN 601 AND 900 THEN
                '601-900'
            ELSE
                '> 900'
            END clasification
    FROM dual 
    CONNECT BY LEVEL <= 1000
) players 
GROUP BY players.clasification; 
```

或者在您的示例中：

```
SELECT 
    count(player.player_id),
    player.clasification
FROM (
    SELECT pl.*,
        CASE
            WHEN total_points BETWEEN 0 AND 300
                THEN '0-300'
            WHEN total_points BETWEEN 301 AND 600
                THEN '301-600'
            WHEN total_points BETWEEN 601 AND 900
                THEN '601-900'
            ELSE '> 900'
        END clasification
    FROM player pl
    WHERE 
            TRUNC(Create_Dtime)  = TRUNC(SYSDATE) - 90
        AND TRUNC(Init_Dtime) >= To_Date('2012-sep-1', 'yyyy-mon-dd')

)
    Player
GROUP BY player.clasification; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:01:02.373

```
Select case 
    when Pt_Credit between 0 and 300 then '0 to 300'
    when Pt_Credit between 301 and 600 then '301 to 600'
    when Pt_Credit between 601 and 900 then '601 to 900'
    else '> 900'
end Total_Points
, count(*)
From Player 
Where Trunc(Create_Dtime) = Trunc(Sysdate) - 90
And Trunc(Init_Dtime) >= To_Date('2012-sep-1','yyyy-mon-dd')
Group by case 
    when Pt_Credit between 0 and 300 then 0 
    when Pt_Credit between 301 and 600 then 1 
    when Pt_Credit between 601 and 900 then 2
    else 3
end
Order by Total_Points Desc 
```

或者

```
Select case 
    when Pt_Credit between 0 and 300 then '0 to 300'
    when Pt_Credit between 301 and 600 then '301 to 600'
    when Pt_Credit between 601 and 900 then '601 to 900'
    else '> 900'
end Total_Points
, count(*)
From Player 
Where Trunc(Create_Dtime) = Trunc(Sysdate) - 90
And Trunc(Init_Dtime) >= To_Date('2012-sep-1','yyyy-mon-dd')
Group by cast(Pt_Credit/300 as integer)
Order by Total_Points Desc 
```

# iphone - 如何在 iOS 上将 GTMOAuth2 与 RestKit 集成？

> ID：13204090
> 
> 赞同：1
> 
> 时间：2012-11-02T22:49:32.190
> 
> 标签：iphone, objective-c, ios, oauth-2.0, restkit

我正在尝试让[RestKit](http://restkit.org/)（版本 0.10.2）通过 OAuth2 进行身份验证。我正在使用[GTMOAuth2](http://code.google.com/p/gtm-oauth2/)来处理 OAuth 交互。

我已经成功让 GTMOAuth2 让我登录并向我正在使用的 api 发出请求。我还设法让 RestKit 使用我的访问令牌发出请求：

```
- (void)setRKAuthorizationToken:(NSString *)authorizationToken {
  RKObjectManager* objectManager = [RKObjectManager sharedManager];
  NSString* authHeader = [NSString stringWithFormat:@"Bearer %@", authorizationToken];
  [objectManager.client setValue:authHeader forHTTPHeaderField:@"Authorization"];
} 
```

在此代码示例中，我手动设置 HTTP 标头，因为 RestKit 对 OAuth2 的支持将标头设置为`Authorization: OAuth2 <accessToken>`而不是`Authorization: Bearer <accessToken>`.

无论如何，在需要使用刷新令牌刷新访问令牌之前，这很有效。

我真正想做的是告诉 RestKit 使用`GTMOAuth2Authentication`'s `- (BOOL)authorizeRequest:(NSMutableURLRequest *)request;`，因为当访问令牌过期时，它会自动使用刷新令牌获取新的访问令牌。

顺便说一句，RestKit 正在[逐步支持 OAuth](https://github.com/RestKit/RestKit/issues/643)；建议使用第三方库授权请求。我[问了一个例子](https://github.com/RestKit/RestKit/pull/696)，响应指向了类到子类的方向，它们在`development`分支中。

所以，问题是：您是否成功地将 RestKit 0.10.x 与 GTMOAuth2 集成或知道如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:36:14.057

我将在这里回答我自己的问题，因为我有一些可行的方法，但并不理想。

基本上我将继续手动签署请求，并处理过期令牌的可能性，我正在使用 GTMOAuth 来授权一个虚拟请求。严重的缺点是这意味着对 api 的额外请求。但是，现在我知道我有一个有效的访问令牌。诀窍的一部分是知道什么时候打电话`loginWithBaseController:`。

这是基本概念：

```
- (void)makeRequestToEnsureAccessTokenSuccess:(void (^)())block error:(void (^)(NSError*))errorBlock {
  NSURL *url = [NSURL URLWithString:@"https://uri/to/a/basic/api/call.json"];
  NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

  // TODO: Only do this if we need to. It's kind of a waste to refresh the token
  //  all the time.
  [self.gtmoauth authorizeRequest:request completionHandler:^(NSError *error) {
    if (error) {
      errorBlock(error);
    } else {
      [GTMOAuth2ViewControllerTouch saveParamsToKeychainForName:kKeychainItemName accessibility:NULL authentication:self.gtmoauth];
      block();
    }
  }];
}

- (void)loginWithBaseController:(UIViewController *)baseViewController {
  [self loadAuthFromKeyChain];

  if (self.gtmoauth.canAuthorize) {

    [self makeRequestToEnsureAccessTokenSuccess:^{
      NSLog(@"setting RKAuthorizationToken with %@", self.gtmoauth.accessToken);
      [self setRKAuthorizationToken: self.gtmoauth.accessToken];
      [self.delegate authorizationFinished];
    } error:^(NSError* error) {
      [self logout];
      [self showAuthorizationControllerFor:baseViewController];
    }];
  } else {
    [self showAuthorizationControllerFor:baseViewController];
  }
} 
```

无论如何，我仍在寻找更好的解决方案。我想我会发布这个，以防它至少通过开发帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T08:46:38.507

RestKit Wiki 上的这篇文章，Restkit 上的[OAuth 支持引用了使用](https://github.com/RestKit/RestKit/wiki/OAuth-Support-on-RestKit)[AFOAuth2Client](https://github.com/AFNetworking/AFOAuth2Client)的完整解决方案。

The referenced sample iOS application at [telegraphy-interactive/OAuthClientSetup](https://github.com/telegraphy-interactive/OAuthClientSetup) has a pluggable architecture for authorized operations. It includes a class, `OACSAuthOpRK` that provides a RestKit `RKObjectManager` operation for making an authorized request.

The strategy used there is to wrap the request inside of the authorization. The authorization checks the currency of the OAuth2 authorization token. Finding the token current, it tries the request and checks the return status. Finding the token expired, or finding a 401 status return from the request, it will refresh the authorization token and try the request one more time.

# android - Android FacebookSDK 3.0.b getAttributionId 始终返回 null

> ID：13204095
> 
> 赞同：0
> 
> 时间：2012-11-02T22:49:48.157
> 
> 标签：android, facebook, facebook-android-sdk

我正在尝试设置我们的一个标题以使用最新的 Facebook SDK。感兴趣的主要函数是 Settings.getAttributionId（以前称为 Facebook.getAttributionId），但是当我调用此函数时，它总是返回 null。

我已经安装了 facebook 附带的 facebook.apk 并且没有任何运气登录。

在 LogCat 中，我确实在查询后不久注意到了这个错误：11-02 22:26:01.522: E/ActivityThread(25521): Failed to find provider info for com.facebook.katana.provider.AttributionIdProvider

只是好奇是否有人知道会导致这种情况的原因，或者我可能设置错误（或未设置）的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:12:49.217

您需要在设备上安装最新版本的 Facebook for Android 应用程序才能正常工作。我没查过，但是sdk beta下载中包含的版本可能太旧了，不支持这个。如果您在安装了来自 Play 商店的最新 Facebook 应用程序的真实设备上试用它，这应该可以工作。

# ios - 解析推送通知不起作用 ios

> ID：13204101
> 
> 赞同：0
> 
> 时间：2012-11-02T22:50:13.883
> 
> 标签：ios, push-notification

我在我的 iphone 应用程序上安装了 Parse sdk。这是针对 xcode 4.5 的。我收到启用推送通知的模式请求。
订阅成功。令牌显示在解析 Web 应用程序上。说有 1 个用户订阅了。但我没有收到来自网络应用程序的通知。

我只是不明白在这里做什么。

所有疯狂的供应都应该是正确的。为发展而生。

我正在使用下面的代码来收听通知。

但永远不会被解雇。我在这里做错了什么？？？

```
- (void)application:(UIApplication *)application 
didReceiveRemoteNotification:(NSDictionary *)userInfo {
NSLog(@"received push %@", userInfo);
[PFPush handlePush:userInfo];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:21:24.177

1.  在 Parse 仪表板中检查应用程序的推送通知页面，该页面应位于`https://www.parse.com/apps/(your app)/push_notifications`. 如果推送通知没有出现在那里，那么您的通知没有被发送，问题出在网络应用程序方面。
2.  尝试在您的应用未运行时发送推送通知。如果您收到通知，那么它就在您的应用程序中。如果您没有收到通知，那么您一定是在某处错误地设置了推送通知。

此外，Parse 有一个非常详细的[教程](https://parse.com/tutorials/ios-push-notifications)。

# cakephp - CakePHP：使用插件覆盖控制器方法

> ID：13204104
> 
> 赞同：2
> 
> 时间：2012-11-02T22:50:23.640
> 
> 标签：cakephp, plugins, controller, overriding

我是这个框架的新手，并希望使用插件扩展/覆盖控制器方法。如果这是错误的方法，请告诉我。我只希望解决方案是模块化的，因为扩展控制器不会被篡改。这是我想要的。。

```
MyController extends AppController{

function index(){}

} 
```

我有一个插件

```
MyPlugin extends MyController{

function index(){}

} 
```

我希望在调用 MyController->index() 时运行 MyPlugin->index()。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:46:20.723

您要求的是某种“反向继承”，PHP 不支持这种方法（可能会考虑 Java 或 ObjectiveC 类别中的方面）。

据我了解，您有以下情况：

```
"3rd Party App's Controller class" extends "CakePHP's Controller class" 
```

您从外部上游获取这两个类，并希望在不牺牲任何上游的情况下修改 3rd Party App 的控制器。这在语言上是不可能的，据我所知，CakePHP 没有提供任何框架解决方案。

您可以通过修改路由来实现您的目标，即将请求重定向`MyController`到您的自定义`MyPlugin`控制器并`MyController`从那里调用操作。

# php - 使用“php://memory”进行 I/O - 无法读回写入的值

> ID：13204106
> 
> 赞同：1
> 
> 时间：2012-11-02T22:50:34.170
> 
> 标签：php, io

所以给出这个简单的例子：

```
<?php
$memory = fopen('php://memory', 'r+');

fwrite($memory, 'asdf', 4);

$value = fread($memory, 3);

var_dump($value); 
```

我期待`$value`包含字符串`"asd"`，但我得到一个空字符串。这个例子有什么明显的地方需要改变吗？我的期望不正确吗？如果`$value`确实应该包含`"asd"`可能导致这种情况发生的原因（可能是配置/php.ini 问题）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:54:42.127

由于写入数据后流的内部指针位于索引 4，因此您需要[`fseek`](http://php.net/fseek)回到流的开头：

```
// fwrite
fseek($memory, 0);  // same as rewind($memory);
// fread 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:40:14.410

Alternatively, this would also work (and is basically the equivalent to `fseek($memory, 0);`):

```
rewind($memory); 
```

# .net - 我可以拥有一个具有两个端点的 WCF 应用程序吗？一个有 Windows 安全性，一个没有？

> ID：13204107
> 
> 赞同：0
> 
> 时间：2012-11-02T22:50:34.740
> 
> 标签：.net, wcf, wcf-4

我已经阅读了几篇文章（在 SO 和 MSDN 上），这些文章据说展示了我如何为我的 WCF 服务设置两个端点。但是我似乎无法让它发挥作用。我尝试了他们显示的内容，但仍然无法正常工作。

这是我现在拥有的：

```
<system.serviceModel>
  <services>
    <service name="MyServiceProject.MyServiceClass">
      <endpoint address="MyService.svc"
                  binding="basicHttpBinding"
                  bindingName="normalBasicHttpBinding"
                  contract="MyContractsProject.IMyServiceClass" />

        <endpoint address="SecuredMyService.svc"
                  binding="basicHttpBinding"
                  bindingName="secureBasicHttpBinding"
                  contract="MyContractsProject.IMyServiceClass" />
    </service>
  </services>
  <bindings>
      <basicHttpBinding>
          <binding name="normalBasicHttpBinding" maxBufferSize="5242880"
                    maxBufferPoolSize="5242880"
                    maxReceivedMessageSize="5242880">
              <readerQuotas maxArrayLength="16384"
                            maxStringContentLength="5242880" />
          </binding>

        <binding name="secureBasicHttpBinding" maxBufferSize="5242880"
                    maxBufferPoolSize="5242880"
                    maxReceivedMessageSize="5242880">
          <security mode="Transport">
            <transport clientCredentialType="Windows" />
          </security>
          <readerQuotas maxArrayLength="16384"
                        maxStringContentLength="5242880" />
        </binding>
      </basicHttpBinding>
  </bindings>
  <behaviors>
      <serviceBehaviors>
          <behavior>
              <serviceMetadata httpGetEnabled="true" />
              <serviceDebug includeExceptionDetailInFaults="true" />
          </behavior>
      </serviceBehaviors>
  </behaviors>
</system.serviceModel> 
```

我尝试过的变体：

*   拿出保安
*   让第一个地址为空白，第二个只是“安全”然后去`http://MyNormalEndpoint/MyService.svc/secure`（为空白，WCF Storm 无法连接）
*   添加一个 <`Host>`部分，它是对部署路径的硬引用。（我不想这样做，因为我的服务必须部署到几个不同的位置。但无论如何它都不起作用）
*   只有一个端点（安全的端点）
*   使用两种不同的绑定类型 (wsHttpBinding)。

这些都没有奏效。

现在对我的正常服务的调用返回 404。（所以我搞砸了）。如果您想查看我的原始（工作）配置，可以在[这里](https://gist.github.com/4004836)找到。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:07:08.003

你确定你有正确的地址格式吗

[指定端点地址](http://msdn.microsoft.com/en-us/library/ms733749.aspx)

# asp.net-mvc - 如何无延迟地发布或部署 .NET 网站

> ID：13204109
> 
> 赞同：1
> 
> 时间：2012-11-02T22:50:44.817
> 
> 标签：asp.net-mvc, iis, web-deployment

如何无延迟地发布或部署 .NET 网站？

我一直在寻找基于 .NET 技术构建的网站，例如 StackOverflow，但我从未见过它们，因为正在进行更新。对于我的网站，我在次要更新中得到了停机时间，比如纠正我的控制器上的一些错误（我使用 MVC），而不是通过做一些更大的事情，比如数据库或服务器移动。

那么如何防止由于 ASP.NET 启动导致的站点加载延迟呢？我知道它需要“ASP.NET 工作进程”来编译代码，但我怎样才能防止流量问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:02:25.817

执行此操作的典型方法是创建一个由多个 Web 服务器组成的场，当您想要更新站点时，将每台服务器脱机并一次更新一个。调查[如何创建 ASP.NET Web 场？](https://stackoverflow.com/questions/1816756).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:07:13.057

这都是关于服务器设置的。大多数公司至少有 2-3 台服务器：2 台前端服务器和一台后端服务器。然后，您可以关闭其中一台前端服务器，将所有流量指向另一台，升级已关闭的服务器，然后启动该服务器，并继续使用另一台服务器。

在某些情况下，您会使用负载平衡来确保两台服务器同步。

您会注意到，有时由于更新，您无法在 Stackoverflow 上发帖。那是因为数据库是一个共享服务器，如果您需要升级，它“可以关闭”。是的，也有针对此的选项，但如果每个人都在站点启动时写入数据库，则会出现问题，因此有时会出现“只读模式”。

# java - Java anagram 递归列表 > 只存储空列表

> ID：13204110
> 
> 赞同：0
> 
> 时间：2012-11-02T22:51:09.920
> 
> 标签：java, recursion

嗨，在这个递归方法中，我试图找到所有字谜并将其添加到列表中>但是当我运行此代码时会发生什么，它只是返回了很多空列表。

```
 private List<List<String>> findAnagrams(LetterInventory words,
        ArrayList<String> anagram, int max,
        Map<String, LetterInventory> smallDict, int level, List<List<String>> result) {

    ArrayList<String> solvedWord = new ArrayList<String>();
    LetterInventory shell;
    LetterInventory shell2;
    if (level < max || max == 0) {
        Iterator<String> it = smallDict.keySet().iterator();
        while (it.hasNext()) {
            String k = it.next();
            shell = new LetterInventory(k);
            shell2 = words;
            if (shell2.subtract(shell) != null) {
                anagram.add(k);
                shell2 = words.subtract(shell);
                if (shell2.isEmpty()) {
                    //System.out.println(anagram.toString()); it prints off fine here
                                            result.add(anagram); // but doesnt add here

                }
                else 

                    findAnagrams(shell2, anagram, max, smallDict, level + 1, result);
                anagram.remove(anagram.size()-1);
            }
        }
    }
    return results;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:58:41.250

我的猜测是它在这里。

```
else 
    findAnagrams(shell2, anagram, max, smallDict, level + 1, result);
anagram.remove(anagram.size()-1);  // this is outside of the else case 
```

`anagram`每次添加元素时都会删除它。你的意思是让它在里面`else`吗？

```
else {
    findAnagrams(shell2, anagram, max, smallDict, level + 1, result);
    anagram.remove(anagram.size()-1);
} 
```

# ruby - 从哈希数组中的每个组中获取第二个项目的聪明方法？

> ID：13204116
> 
> 赞同：-1
> 
> 时间：2012-11-02T22:51:49.583
> 
> 标签：ruby

这个问题很容易通过手动循环和结果数组来解决，你可以随时添加。但我正在寻找一个更红宝石式的解决方案，可能是使用注入或选择的东西。这是问题所在：

```
arr_of_hashes = [
  {id: 1, val: "blah1"},
  {id: 1, val: "blah2"},
  {id: 1, val: "blah3"},
  {id: 2, val: "blah4"},
  {id: 2, val: "blah5"},
  {id: 3, val: "blah6"},
  {id: 3, val: "blah7"},
  {id: 3, val: "blah8"},
  {id: 3, val: "blah9"}
] 
```

“组”由散列中的“id”字段定义。我们保证每组至少有两个项目。我们想要返回一个包含每个组的第二项的数组：

```
output_should_be = [
  {id: 1, val: "blah2"},
  {id: 2, val: "blah5"},
  {id: 3, val: "blah7"}
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T23:03:16.567

“我正在寻找一个更红宝石式的解决方案”。我猜你的意思是[功能](http://en.wikipedia.org/wiki/Functional_programming)：

```
arr_of_hashes.chunk { |h| h[:id] }.map { |id, hs| hs[1] }
#=> [{:id=>1, :val=>"blah2"}, {:id=>2, :val=>"blah5"}, {:id=>3, :val=>"blah7"}] 
```

*如果元素未按id*`group_by`预先排序，则使用。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:09:09.263

这是使用的解决方案`group_by`：

```
arr_of_hashes.group_by{|h| h[:id]}.to_a.map{|id,a| a[1]} 
```*

# javascript - 如何通过单击或点击 iphone safari 页面上的任意位置来调用函数

> ID：13204120
> 
> 赞同：0
> 
> 时间：2012-11-02T22:52:23.360
> 
> 标签：javascript, jquery, iphone, safari, webview

我正在尝试使用 jquery，这样如果我单击页面上的任何位置，它将更改 iphone 浏览器的 div 文本。

我有以下内容：

```
<div id="alternative_text">traduit</div>

<script type="text/javascript">

$(document).click(function() {
    $('#alternative_text').text("second text");
});

</script> 
```

在标题中包含以下内容：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

这在我的桌面浏览器中运行良好，但是当我在 iphone 上尝试时，它什么也没做。我需要做什么才能让它工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:25:04.497

您可以尝试定位 body 元素：

```
$("body").click(function() {
    $('#alternative_text').text("second text");
}); 
```

# c# - 包括一个列表 在模型中，以及如何填充它

> ID：13204121
> 
> 赞同：0
> 
> 时间：2012-11-02T22:52:27.110
> 
> 标签：c#, asp.net-mvc

我目前有三个模型类：

```
public class MarketReport
{
    public MarketReportAbbrStores LISTOFSTORESUMMARY {get; set;}

}

public class MarketReportAbbrStores : List<AbbrStore>
{
    public AbbrStore abbrStore  { get; set; }
}

    public class AbbrStore
{
    public string StoreName { get; set; }
    public int MemberCount { get; set; }
    public int LeaderCount { get; set; }
    public int ActivistCount { get; set; }
} 
```

现在，我不知道我是否正确地执行了上述操作，但我想在 MarketReport 中填充列表

```
 foreach (var store in stores)            
        {

            AbbrStore abbrstore = new AbbrStore();
            abbrstore.StoreName = store;
            marketInformation.LISTOFSTORESUMMARY.Add(abbrstore);
            //ERROR: Object reference not set to an instance of an object.
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:57:18.723

这里有几个问题：

1.  您的`Leaders`类型`List`本身就是一个 - 这不应该是一个集合类型，因为它描述的是一个单一的实体，所以只是`Leader`
2.  `leaderlist`应该使用 PascalCase -`Leaders`
3.  `leaderlist`是一个实例属性，因此您需要实例化 a`MarketReport`才能开始填充该列表
4.  `leaderlist``List<Leader>`如果您没有定义集合类型，则应该是 a （参见 1）
5.  `List<T>`有一个`Add`方法，你应该用它来添加新的实例`Leader`
6.  您需要先实例化一个新列表并将其分配给`Leaders`属性，然后才能开始添加它

建议更改：

```
public class Leader
{
   public string Name { get; set; }
   public string Precinct { get; set; }
}

public class MarketReport
{
   public List<Leader> Leaders { get; set }
}

this.Leaders = new List<Leader>();
foreach (var store in stores)
{
    var leader = new Leader { ... };
    this.Leaders.Add(leader);
} 
```

# php - foreach 循环中的 DISTINCT mysql 查询

> ID：13204125
> 
> 赞同：0
> 
> 时间：2012-11-02T22:52:52.097
> 
> 标签：php, codeigniter, activerecord, foreach, mysqli

我需要查询数据库并为列返回不同的值。查询在 foreach 循环中，并根据数组而变化。

```
$get_all_col_names = $this->db->list_fields($table_by_product);
//This will return "X_SIZE", "X_PRINT", "X_QTY" 
```

现在我有一个 foreach 需要分别获取“X_SIZE”、“X_PRINT”和“X_QTY”的不同值。

```
foreach ($X_types as $X) {
   $this->db->select($X);
   $this->db->distinct();
   $qX = $this->db->get($table_by_product);
   return $qX->result_object();
} 
```

当前设置的问题在于它只返回 X_QTY 的 DISTINCT 值，这是列表中的最后一个数组。

我需要为数组中的所有键返回不同的值。我怎样才能使这项工作？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:22:39.233

问题是您的 foreach 将在循环的第一轮之后返回，请尝试以下操作：

```
$resultArray = array(); 
foreach ($X_types as $X) { 
    this->db->select($X)$this->db->distinct(); 
    $qX = $this->db->get($table_by_product); 
    resultArray[] = $qX->result_object(); 
} 
return $resultArray; 
```

# image-processing - Opencv的medianBlur中使用的模式如何？

> ID：13204138
> 
> 赞同：0
> 
> 时间：2012-11-02T22:53:59.760
> 
> 标签：image-processing, opencv, median

我正在阅读 John C. Russ - The Image Processing Handbook, Sixth Edition 中的中值滤波器，在他的书中他描述了相邻像素中可能的形状，例如十字形或正方形。

所以我遇到了 OpenCV [medianBlur](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=medianblur#medianblur "中值模糊")，不确定使用的模式。我会假设它是平方的，但不确定。那么 OpenCV 中实现的模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:12:10.383

你是对的。它是平方的。

# c++ - 指向结构的指针，包含指向对象的指针，我想为其调用函数

> ID：13204139
> 
> 赞同：1
> 
> 时间：2012-11-02T22:54:06.947
> 
> 标签：c++

> **可能重复：**
> [请求非类成员](https://stackoverflow.com/questions/7617421/request-for-member-which-is-of-non-class)

所以我创建了一个 ADT，它是一个由节点组成的单链表。这些节点每个都有一个指向其中一个对象的指针，称为数据。

```
Class Structure
{
    private:
        struct Node
        {
            Object *data;
            Node *next;
        };
        Node *head;
}; 
```

我试图在对象中调用一个函数，如下所示：

```
head = new Node;
head -> data = new Object();
head -> next = NULL;

cout << head -> data.print(); 
```

我在编译时不断收到以下错误。

*错误：在“head->Structure::Node::data”中请求成员“print”，它是非类类型“Object* ”*

**编辑：感谢您的快速回答，令人惊叹的社区。对我来说非常愚蠢的错误，我觉得自己像个傻瓜呵呵：P**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:56:23.477

`data`是一个指针，也许你需要

```
cout << head -> data -> print(); 
```

? 或者，如果函数`print`自己打印，也许只是

```
head -> data -> print(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:56:53.210

对于指针类型，您应该使用`->`而不是`.`访问成员或首先使用`*`取消引用指针然后使用`.`，所以您应该有`cout << head->data->print()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:58:24.030

您需要`cout << head->data->print()`而不是`cout << head->data.print()`不能使用点运算符从指针调用方法。

# dialog - 为最大化 Primefaces 对话框设置大小限制

> ID：13204141
> 
> 赞同：1
> 
> 时间：2012-11-02T22:54:36.880
> 
> 标签：dialog, primefaces, limit, maximize

我想`Dialog`在我的`Primefaces`页面中制作一个可以最大化的页面。但我有一个问题。我`Menubar`在页面顶部有一个，我希望在整个屏幕上`Dialog`最大化**，**`Menubar`但在. 我也有一个`Dock`在底部，我希望这个总是在前面。有没有可能解决这些问题？

# android - 如何在imageview中显示缓冲图像

> ID：13204147
> 
> 赞同：0
> 
> 时间：2012-11-02T22:55:11.243
> 
> 标签：android, zxing

我是 android 编程新手，目前正在使用 zxing 研究 QRcode。我使用 zxing 对字符串进行编码，现在返回了缓冲图像。现在我想在图像视图中显示这个图像，但看起来我需要先将它转换为位图。有人可以告诉我这样做的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:03:33.527

位图 bitMapImage = BitmapFactory.decodeFile("bufferedImage.jpg");

# asp.net-mvc - 如何在 Asp.Net MVC 4 开发过程中捆绑特定包

> ID：13204151
> 
> 赞同：1
> 
> 时间：2012-11-02T22:56:15.130
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundle

鉴于这些捆绑：

```
 public static void RegisterBundles(BundleCollection bundles)
     {
        // 3rd party scripts
        bundles.Add(new ScriptBundle("~/scripts")
            .IncludeDirectory("~/Scripts/", "*.js"));            

        // my scripts
        bundles.Add(new ScriptBundle("~/myscripts")
            .IncludeDirectory("~/MyScripts/", "*.js"));
     } 
```

在开发过程中，仅捆绑第一个捆绑包、第 3 方脚本而不捆绑第二个捆绑包会很有帮助。

有没有办法指定一个捆绑包应该捆绑甚至缩小，但另一个不？

我想过添加类似的东西

```
 BundleTable.EnableOptimizations = true; 
```

但这将捆绑所有捆绑包。另一方面，像 ScriptBundle 这样的捆绑类没有允许我强制捆绑它们的成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:37:29.000

在特定捆绑包上添加转换，如下所示：

```
Bundle bundle = new ScriptBundle("~/scripts")
                    .IncludeDirectory("~/Scripts/", "*.js");
bundle.Transforms.Add(new JsMinify());
bundles.Add(bundle); 
```

# linux - 根据反斜杠分隔符拆分字符串

> ID：13204155
> 
> 赞同：2
> 
> 时间：2012-11-02T22:56:34.457
> 
> 标签：linux, bash, unix

我是 bash 脚本的新手。我有一个这样的字符串：`\\abc\def\ghi`

我想使用分隔符解析字符串，并且需要一行命令将其转换为`/abc/def/ghi`（将 Windows 路径转换为 ​​unix 路径）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:59:20.533

尝试这样做：

```
$ x='\abc\def\ghi'
$ echo ${x//\\//}
/abc/def/ghi 
```

见[参数扩展](http://wiki.bash-hackers.org/syntax/pe)

**笔记**

*   *参数扩展*是[bash](/questions/tagged/bash "显示标记为“bash”的问题")内置的，因此比外部命令更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:10:49.923

或使用 sed：

```
kent$  echo -E "\abc\def\ghi"|sed 's:\\:/:g' 
/abc/def/ghi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:02:41.117

```
string=$( echo "$string" | tr '\' '/' ) 
```

# license-key - c# 使用 rhino-licensing 的浮动许可证服务器的示例代码

> ID：13204156
> 
> 赞同：0
> 
> 时间：2012-11-02T22:56:39.240
> 
> 标签：license-key, rhino-licensing

我正在尝试使用 Rhino-Licensing 开发一个许可系统，但实际上没有任何可用的示例代码或浮动许可服务器的说明和客户端的相应代码。有人可以发布一些提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T11:04:33.277

我不确定你是否看过 Github 项目，它有测试用例，你可以看看并实现它

[https://github.com/hibernating-rhinos/rhino-licensing/](https://github.com/hibernating-rhinos/rhino-licensing/)

还有 [http://www.jagregory.com/writings/rhino-licensing/](http://www.jagregory.com/writings/rhino-licensing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T07:06:20.930

我发现这个很有帮助，请查看：

[http://patrick.lioi.net/2013/01/08/whittling-rhino-licensing/](http://patrick.lioi.net/2013/01/08/whittling-rhino-licensing/)

# ruby-on-rails - Unicorn_init.sh 在 capistrano 冷部署中找不到应用根目录

> ID：13204158
> 
> 赞同：0
> 
> 时间：2012-11-02T22:56:55.790
> 
> 标签：ruby-on-rails, deployment, capistrano, unicorn

我正在部署 Rails 应用程序并在运行时

> 帽部署：冷

我收到错误消息

```
 * 2012-11-02 23:53:26 executing `deploy:migrate'
  * executing "cd /home/mr_deployer/apps/prjct_mngr/releases/20121102225224 && bundle exec rake RAILS_ENV=production  db:migrate"
    servers: ["xxxxxxxxxx"]
    [xxxxxxxxxx] executing command
    command finished in 7464ms
  * 2012-11-02 23:53:34 executing `deploy:start'
  * executing "/etc/init.d/unicorn_prjct_mngr start"
    servers: ["xxxxxxxxxx"]
    [xxxxxxxxxx] executing command
 ** [out :: xxxxxxxxxx] /etc/init.d/unicorn_prjct_mngr: 33: cd: can't cd to /home/mr_deployer/apps/prjct_mngr/current;
    command finished in 694ms
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.3-p125@prjct_mngr' -c '/etc/init.d/unicorn_prjct_mngr start'" on xxxxxxxxxx 
```

但我的应用程序根在那里！为什么找不到呢？这是我的**unicorn_init.sh 文件**的一部分：

```
 1 #!/bin/sh
  2 set -e
  3 # Example init script, this can be used with nginx, too,
  4 # since nginx and unicorn accept the same signals
  5 
  6 # Feel free to change any of the following variables for your app:
  7 TIMEOUT=${TIMEOUT-60}
  8 APP_ROOT=/home/mr_deployer/apps/prjct_mngr/current
  9 PID=$APP_ROOT/tmp/pids/unicorn.pid
 10 CMD="cd $APP_ROOT; bundle exec unicorn -D -E production -c $APP_ROOT/config/unicorn.rb"
 11 # INIT_CONF=$APP_ROOT/config/init.conf
 12 AS_USER=mr_deployer
 13 action="$1"
 14 set -u
 15 
 16 # test -f "$INIT_CONF" && . $INIT_CONF
 17 
 18 old_pid="$PID.oldbin"
 19 
 20 cd $APP_ROOT || exit 1
 21 
 22 sig () {
 23   test -s "$PID" && kill -$1 `cat $PID`
 24 }
 25 
 26 oldsig () {
 27   test -s $old_pid && kill -$1 `cat $old_pid`
 28 }
 29 case $action in
 30 
 31 start)
 32   sig 0 && echo >&2 "Already running" && exit 0
 33   $CMD
 34   ;;
 35 
 36 stop)
 37   sig QUIT && exit 0
 38   echo >&2 "Not running"
 39   ;;
 40 
 41 force-stop)
 42   sig TERM && exit 0
 43   echo >&2 "Not running"
 44   ;;
 45 
 46 restart|reload)
 47   sig HUP && echo reloaded OK && exit 0
 48   echo >&2 "Couldn't reload, starting '$CMD' instead"
 49   $CMD
 50   ;;
 51 
 52 upgrade)
 53   if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
 54   then
 55     n=$TIMEOUT
 56     while test -s $old_pid && test $n -ge 0
 57     do
 58       printf '.' && sleep 1 && n=$(( $n - 1 ))
 59     done
 60     echo
 61 
 62     if test $n -lt 0 && test -s $old_pid
 63     then
 64       echo >&2 "$old_pid still exists after $TIMEOUT seconds"
 65       exit 1
 66     fi
 67     exit 0
 68   fi
 69   echo >&2 "Couldn't upgrade, starting '$CMD' instead"
 70   $CMD
 71   ;;
 72 
 73 reopen-logs)
 74 sig USR1
 75 ;;
 76 
 77 *)
 78   echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
 79   exit 1
 80   ;;
 81 esac 
```

## --------------------------------------

**更新：**

我运行了它抱怨的命令（下）

> cd /home/mr_deployer/apps/prjct_mngr/current; bundle exec unicorn -D -E production -c /home/mr_deployer/apps/prjct_mngr/current/config/unicorn.rb

在我的 VPS 上，它起作用了！**当我限制部署时它不起作用：冷。这是为什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:01:04.167

访问权限是否正确设置？您正在设置`AS_USER`变量，但您是否使用该用户来启动服务器？

# javascript - 获取对 jquery ui 小部件所有实例的引用？

> ID：13204159
> 
> 赞同：2
> 
> 时间：2012-11-02T22:56:58.153
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-ui-widget

我正在编写一个 jquery UI 小部件，它简单地包装了 bootstrap popover 插件，在小部件中，您可以传入选项“singular”，如果传入，那么它应该调用插件的所有其他实例的函数。

就像是

```
$('#one').myWidget();
$('#two').myWidget();
$('#three').myWidget();
$('#four').myWidget();

$('#one').myWidget('show'); //stuff from widget one is now visible
$('#two').myWidget('show'); //stuff from widget one and two are now visible
$('#three').myWidget('show'); //stuff from widget one, two and three are now visible
$('#two').myWidget('hide'); //stuff from widget one and three are now visible
$('#four').myWidget('show', {singular:true}); //stuff from widget four is now visible 
```

所以，我想象 show 函数看起来像：

```
show: function(options){
    options = options || {};

    if(options.singular){
        var instances = '????'; // how do I get all instances?
        $.each(instances, function(i, o){
            o.myWidget('hide');
        });
    }

    this.element.popover('show');

} 
```

所以，问题是，我将如何获得对所有具有`myWidget`小部件的元素的引用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T17:49:51.927

您可以使用`$(':ui-myWidget')`where`ui`是您的小部件的命名空间。它比使用类选择器慢，`$('.ui-myWidget')`因此在创建小部件时添加类仍然是一个好习惯。

jQuery UI 对所有小部件执行此操作，因此您可以通过`$(':ui-progressbar')`或获取每个进度条`$('.ui-progressbar')`。

[这篇博](http://www.boduch.ca/2011/07/jquery-ui-widget-selectors.html)文更深入地解释了薄。

# python - 如何从交互式 shell 访问调用源代码行

> ID：13204161
> 
> 赞同：1
> 
> 时间：2012-11-02T22:57:01.063
> 
> 标签：python

我想做一个函数来确定它是如何被调用的源代码。我知道通常如何使用检查模块执行此操作。例如，[这个问题](https://stackoverflow.com/questions/3711184/how-to-use-inspect-to-get-the-callers-info-from-callee)运行良好，并在变量中提供了我想要的输出，`lines`如下所示：

```
def hello(x):
   frame,filename,line_number,function_name,lines,index=\
       inspect.getouterframes(inspect.currentframe())[1]
   print(frame,filename,line_number,function_name,lines,index) 
```

问题是这个解决方案在交互式命令行会话中不起作用。例如，在命令行中，结果如下所示：

```
>>> y = hello(7)
(<frame object at 0x01ECA9E8>, '<stdin>', 1, '<module>', None, None) 
```

问题是源文件是`'<stdin>'`，所以`lines`变量是`None`。如何`y = hello(7)`在交互式会话期间访问调用线路以查找包含字符串的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:43:21.233

[正如@abarnert](https://stackoverflow.com/users/908494/abarnert)所说，这可能是不可能的。但是，至少有部分解决方法。

获取源代码行不是最大的问题。像[readline](http://docs.python.org/2/library/readline.html)这样的模块会跟踪它们。交互式 Python 和 iPython 显示它们的线条略有不同（*叹气*），但这也可以均衡。（例如，我的[show](http://pypi.python.org/pypi/show)`linecacher`包就是这样做的；它的模块为普通 Python 和不同的交互式风格提供了均衡的源代码访问。）

更大的问题是，即使您拥有源代码，`inspect`也不提供合法的行号（例如`inspect.currentframe().f_back.f_lineno`，在普通代码中效果很好，但在`<stdin>`交互调用时会给出类似 1 或调用点的值。）

但我还没有准备好说这是不可能的。根据交互式 Python 和 iPython 生成的回溯，似乎有足够的信息可用于重建“这个调用来自哪里？” 这需要付出多少努力，答案会有多强大……这些都是悬而未决的问题。

# javascript - 使用 JavaScript 解析 XML 文件

> ID：13204165
> 
> 赞同：18
> 
> 时间：2012-11-02T22:57:30.317
> 
> 标签：javascript, xml

我是 Stack OverFlow 和一般编码的新手。我正在尝试获取一个 XML 文件并使用 JavaScript 在浏览器中呈现它。我查看了一些如何执行此操作的示例代码，并提出了以下代码：

```
<!DOCTYPE html>
<html>
<body>

<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("GET","social.xml",false);
  xmlhttp.send();
  xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("CD");
for (i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("c_id")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("facebook_id")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
  }
  document.write("</table>");
</script>

</body>
</html> 
```

无论如何，当我在本地服务器上运行它时，我试图在表中显示的任何数据都不会出现。我的 .html 文件和 .xml 文件在同一个文件夹中，所以我相信我有正确的文件路径。我可能只是在这里犯了一个新手错误，但我一生都无法弄清楚为什么没有创建列出 c_id 和 facebook_id 值的表。我环顾四周寻找答案，但找不到任何答案。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-02T23:31:48.193

在发送请求之前，您需要添加一个`onload`事件监听器。`xmlhttprequest`此外，您可能需要使用`DOMParser`. 无论如何，这应该适用于现代浏览器：

```
<!DOCTYPE html>
<html>
    <body>

        <script>
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onload = function() {
                var xmlDoc = new DOMParser().parseFromString(xmlhttp.responseText,'text/xml');

                console.log(xmlDoc);

                document.write("<table border='1'>");
                var x=xmlDoc.getElementsByTagName("CD");
                for (i=0;i<x.length;i++)
                { 
                    document.write("<tr><td>");
                    document.write(x[i].getElementsByTagName("c_id")[0].childNodes[0].nodeValue);
                    document.write("</td><td>");
                    document.write(x[i].getElementsByTagName("facebook_id")[0].childNodes[0].nodeValue);
                    document.write("</td></tr>");
                }
                document.write("</table>");

            }

            xmlhttp.open("GET","social.xml",false);
            xmlhttp.send();
            </script>

    </body>
</html> 
```

现在，关于你正在做的事情，只有几件事值得一提：

*   `xmlhttprequest`对象有许多不同的参数，它们意味着各种各样的东西：`readystate`、状态码、作品。你可能会受益于更多地研究这些。

*   `document.write`真的不应该被使用，永远。事实上，任何 HTML 注入方式都应该非常小心地处理。您可以使用许多 MVC 式框架中常见的基于模板的解决方案，或者如果您愿意，可以使用[我](https://github.com/jsweeneydev/HTMLTemplate)的:)

# cloudbees - tomcat7 clickstack找不到配置参数

> ID：13204166
> 
> 赞同：0
> 
> 时间：2012-11-02T22:57:37.430
> 
> 标签：cloudbees

我正在为我们的应用程序测试 tomcat7 clickstack，该应用程序使用 Cloudbees 的内置配置功能设置了一些配置参数。tomcat7 clickstack 找不到它们，但标准 tomcat6 容器可以。我已经仔细检查了它们并通过cloudbees sdk重置它们，它们在那里并且正确，但是对于tomcat7返回为null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:01:01.723

切换到 clickstacks 要求我们重构 servlet 容器的配置方式，以便注入点（例如`cloudbees-web.xml`jvm 系统属性）在所有 servlet 容器 clickstacks 中的行为一致。

[其中一些](https://github.com/CloudBees-community/tomcat7-clickstack/commits/master)重构已经提交，但一些工作仍在我的待办事项中......假设在我开始之前没有其他蜜蜂从我的待办事项中窃取该任务;-)

如果我没记错的话，参数应该作为环境变量提供（我知道次优，但所有容器都应该将其作为所有点击堆栈的一致 UX，例如非基于 java 和基于 java）并且可能已经可用作为系统属性（再次次优，但 java 容器重构应该将其作为所有基于 java 的 clickstacks 的一致 UX）。一致的 java servlet UX 尚未提交，但应该很快可用。

# java - 在循环中添加 google.maps.latlng

> ID：13204168
> 
> 赞同：2
> 
> 时间：2012-11-02T22:57:46.507
> 
> 标签：java, javascript, jsf-2

我是 Java 脚本的新手。我将它与 Java Server Faces 2.0 结合使用。我想添加一些要点来使用 GoogleMaps Apiv3 定义一个 Poliyne。我的问题是我无法向 javascript 添加 FOR 语句，因为它会转储。如果我评论这个 FOR 循环，它也会转储。我得到的转储是：“javax.servlet.ServletException：null source”。有没有人有任何建议来解决这个问题？在此先感谢，伊曼纽尔

```
<script type="text/javascript">
function initialize() 
{ 
  var longit = "${dateRange.longitude}" ;
  var lat = "${dateRange.latitude}" ;
  var latlng = new google.maps.LatLng(lat, longit);
  var myOptions = 
  {
    zoom: 15,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var points = []; 
  var cadena1 = "${dateRange.latArray}" ;
  var cadena2 = "${dateRange.longArray}" ;
  var latArray = cadena1.split('?');
  var longArray = cadena2.split('?');

  /* The code Below is the one that fails */
  for (var i=0; i < latArray.length; i++)
  { 
    points.push(new google.maps.LatLng(latArray[i], longArray[i]));         
  }
  /* Finish of the error code */

  // The Polilyne is created
  var mapPath = new google.maps.Polyline
  ({
    path: points,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 4
  });
  mapPath.setMap(map);
}
</script>
</head>
<body onload="initialize()">
  <h:graphicImage url="http://localhost:8080/gps_tracking/faces/resources/images/logo.jpg">    
  </h:graphicImage>
  <h1 align="center">Sol-Tech</h1><br  />
  <hr></hr>
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body> 
```

![错误信息](../Images/d63262238fb34636e2227d245288ed29.png)

# css - javafx 2，CSS和焦点消失

> ID：13204174
> 
> 赞同：1
> 
> 时间：2012-11-02T22:58:55.530
> 
> 标签：css, javafx-2

我创建了一个非常简单的 CSS 样式两个按钮。
第一个刚刚添加了一个填充。对第二个设置了 -fx-background-color，但该值取自 caspian.css，即它在设置之前应该具有的值。

```
.first-style { -fx-padding: 20 5 1 5; }

.second-style { -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, -fx-body-color; } 
```

此时我遇到了一个奇怪的行为：焦点装饰停止工作，第二个按钮在聚焦时没有蓝色边框。

![在此处输入图像描述](../Images/11f03e72cb0824ec2212e51bff552e6f.png)

发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:53:56.700

您需要为`:focused`第二种样式添加一个伪类以允许对焦环工作，否则您只需在第二种样式类中重新指定按钮的背景颜色时覆盖它。

示例 CSS：

```
.root { -fx-background-color: cornsilk; -fx-padding: 10; }
.first-style { -fx-padding: 20 5 1 5; }
.second-style { -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, -fx-body-color; }
.second-style:focused { -fx-background-color: -fx-focus-color, -fx-outer-border, -fx-inner-border, -fx-body-color; } 
```

示例应用程序：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.stage.Stage;

public class ButtonFocusCss extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws Exception {
    VBox layout = new VBox(15);
    Button b1 = new Button("B1");
    b1.getStyleClass().add("first-style");
    Button b2 = new Button("B2");
    b2.getStyleClass().add("second-style");
    layout.getChildren().addAll(b1, b2);
    layout.getStylesheets().add(getClass().getResource("button.css").toExternalForm());
    stage.setScene(new Scene(layout));

    stage.show();
  }
} 
```

**更新**

老实说，我无法准确解释为什么 JavaFX CSS 覆盖机制会以这种方式工作，我在这里通过查看默认的[JavaFX 2.2 caspian.css](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css)并根据它可能如何工作的预感得到了答案。

当前对 JavaFX CSS 应用规则的最佳解释在 CSS 参考指南部分[CSS 和 JavaFX 场景图](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introscenegraph)，尽管在此示例中存在一些细微之处，您需要求助于通用 CSS 规范来理解诸如[级联之类的东西顺序](http://www.w3.org/TR/CSS21/cascade.html#cascading-order)和[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)。

# opencl - OpenCL 矩阵向量乘法代码从运行到运行提供正确和不正确的解决方案

> ID：13204176
> 
> 赞同：3
> 
> 时间：2012-11-02T22:59:08.147
> 
> 标签：opencl, sparse-matrix, matrix-multiplication

我正在研究用于稀疏矩阵运算的 OpenCL 代码，我发现当包括内核的代码被执行一次或两次时它可以工作。但是每隔几次运行，答案就会稍微偏离。这是我正在使用的非常简单的内核：

```
__kernel void dsmv( int N, __global int * IA,
                    __global int * JA, __global float * A,
                    __global float * X, __global float * Y){

    int IBGN, ICOL, IEND, ii;
    ICOL = get_global_id(0);

    if(ICOL < N)
    {
        IBGN = JA[ICOL]-1;
        IEND = JA[ICOL+1]-1-1;

        for (ii = IBGN; ii <= IEND; ii++)
        {
            Y[IA[ii]-1] +=  A[ii]*X[ICOL];
        }
    }
} 
```

我还可以发布使用此内核的 fortran 代码。我正在使用 FortranCL。

什么可能导致乘法在每次运行时给出不同的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:57:03.273

这条线看起来很可疑：

```
Y[IA[ii]-1] +=  A[ii]*X[ICOL]; 
```

似乎两个工作项可能会增加相同的内存位置，因此这里存在潜在的竞争条件，并且由于`+=`不是原子操作，因此这是一个问题。

不幸的是，您不能使用内置函数，`atomic_add`因为它不支持浮点数，但`atomic_cmpxchg`确实支持，因此您可以使用它来实现浮点原子加法 - 或者只需[查看现有的浮点数加法实现](http://suhorukov.blogspot.co.il/2011/12/opencl-11-atomic-operations-on-floating.html)。

# c++ - 如何确定是从终端还是 GUI 运行

> ID：13204177
> 
> 赞同：4
> 
> 时间：2012-11-02T22:59:11.000
> 
> 标签：c++, linux, qt, shell, ubuntu

我正在尝试构建一个如果使用 shell 或从 GUI 运行会以不同方式运行的类。

它可以使用#include“myclass.h”包含在两种形式中......

但是，在构造函数中，我想区分 Shell 运行和 GUI 运行。

我可以使用在声明它时传递给构造函数的参数轻松实现它，但我想探索我的选项。

我在 ubuntu 上使用 C++，我的 GUI 使用 Qt。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T23:06:00.420

确定 X Window 是否存在的标准 C 方法：

```
#include <stdlib.h>

if (NULL == getenv("DISPLAY")) is_gui_present = false;
else is_gui_present = true; 
```

*   这允许区分终端仿真器和纯 tty 启动中的伪终端。

如果您想确定是否有 shell，或者应用程序是从文件管理器运行的，那么这并不容易：这两种情况都只是`exec`从 shell 或文件管理器/GUI 程序运行器调用系统调用（通常使用相同的参数），您需要显式传递一个标志才能看到。

PS我刚刚找到了一种方法：检查变量“TERM”的环境-它是为shell设置的并且继承给Qt程序，它通常不在GUI程序中设置。但是不要把它当作一个准确的解决方案！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T23:23:25.693

从桌面启动程序（双击或从桌面文件/开始菜单）通常会将其标准输入文件描述符重定向到管道。您可以检测到这一点：

```
#include <cstdio>    // fileno()
#include <unistd.h>  // isatty()

if (isatty(fileno(stdin)))
    // We were launched from the command line.
else
    // We were launched from inside the desktop 
```

# java - 如何检查表达式的每个部分是否由单个空格分隔？

> ID：13204180
> 
> 赞同：0
> 
> 时间：2012-11-02T22:59:39.690
> 
> 标签：java, expression

我正在创建一个程序，该程序的一部分接收到一个具有以下条件的表达式：

*   允许的字符：“1234567890+-*/()”——**注意它们末尾的空格**

*   必须平衡

*   以“（”和“）”开头和结尾

*   分隔符是每个运算符、操作数或/和括号之间的单个空格：

我已经完成了前两个条件，但我坚持第三个条件。

例子：

( 1 + ( ( 22 - 322 ) * 4 / 5 ) ) <<< 有效

( **1+** ( ( 22 - 322 ) * 4 / 5 ) ) <<< 无效

( 1 + **((** 22 - 322 ) * 4 / 5 ) ) <<< 无效

( 1 + ( ( 22 - 322 **)*** 4 / 5 ) ) <<< 无效

这是我到目前为止所做的：

```
public static boolean isSSWS(String e) {

    boolean valid = false;
    int indexOfWS = 0;
    Character preChar = '\0';
    Character postChar = '\0';

    while(!valid && (indexOfWS < e.length())) {
        indexOfWS = e.indexOf(" ", indexOfWS + 1);
        preChar = e.charAt(indexOfWS - 1);
        postChar = e.charAt(indexOfWS + 1);

        if(preChar == ' ' || postChar == ' ') {
            return false;
        }
    }

    return true;
} 
```

isSSWS, is * *S* *eparated with * *S* *ingle * *W* *ite * *S* *pace

indexOfWS，空白索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:07:48.237

编辑，我没有注意到数字不应该有空格。有点乱，但适用于我尝试过的所有输入。

```
public static boolean isSSWS(String s) {
    boolean isWhiteSpace = false;
    boolean isPreviousCharDigit = false;

    for (char c : s.toCharArray()) {
        if (!isPreviousCharDigit || !Character.isDigit(c)) {
            if (c == ' ' && !isWhiteSpace) {
                return false;
            }
            if (c != ' ' && isWhiteSpace) {
                return false;
            }
            isWhiteSpace = !isWhiteSpace;
        }
        isPreviousCharDigit = Character.isDigit(c);
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:09:09.320

```
public static boolean isSSWS(String e) {

    for (int i=1; i < e.length() - 1; i++){
        char preChar = e.charAt(i - 1);
        char postChar = e.charAt(i + 1);
        char zchar = e.charAt(i);

        if (zchar == ' ' && (preChar == ' ' || postChar == ' ')){
            return false;
        }

        if (Character.isDigit(zchar)){
            if (!Character.isDigit(preChar) && preChar != ' '){
                return false;
            }
            if (!Character.isDigit(postChar) && postChar != ' '){
                return false;
            }
        }

        if (("+-*/()".indexOf(zchar) != -1) && (preChar != ' ' || postChar != ' ')){
            return false;
        }
    }

    return true;
} 
```

# android - ListView 图像仅在可见时显示

> ID：13204181
> 
> 赞同：1
> 
> 时间：2012-11-02T22:59:48.380
> 
> 标签：android, asynchronous, android-listview, universal-image-loader

我有一个异步`ListView`加载图像的方法。`ImageView`为了实现这一点，我正在使用[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

但我想仅当它们在列表视图中可见时才开始加载这些图像。例如，如果列表视图的可见项是从 5 到 9，则只应加载那些。此外，如果用户滚动非常快，则`ListView`只有在停止时才应加载这些项目。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T08:50:16.393

如果您在列表视图适配器中使用“视图重用”，那么您不应该做任何事情。UIL 为您完成。UIL 不会加载所有滚动的图像，只会加载任务池中的那些（您可以在配置中设置设置池大小）。如果您使用“视图重用”，则不会加载快速滚动的图像。查看 GitHub 上的示例项目。

**UPD：**自 1.7.0 版本以来，UIL 具有**`PauseOnScrollListener`**.

```
boolean pauseOnScroll = true;
boolean pauseOnFling = true;
listView.setOnScrollListener(new PauseOnScrollListener(pauseOnScroll, pauseOnFling)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:10:25.393

使用[OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)，当 ListView 在、（较慢的滚动）和（较快的滚动）`onScrollStateChanged()`之间切换时调用该方法。有了这个，您可以选择仅在状态为“空闲”或“触摸”时加载新图像。`SCROLL_STATE_IDLE``SCROLL_STATE_TOUCH_SCROLL``SCROLL_STATE_FLING`

* * *

**添加**

> 在第一次运行中，未显示 ListView 的可见项。例如，当应用程序启动时，如果 ListView 有 4 个可见项目，则应加载这 4 个图像。

我自己没有使用通用图像加载器，但是根据您在下面的描述，您需要知道在开始下载之前将显示*多少行。*试试这个：

*   编写一个 Runnable 来启动异步下载。
*   绘制行*后*，使用 ListView 的内置处理程序调用 Runnable

例如：

```
private Runnable loadImages = new Runnable() {
    @Override
    public void run() {
        // Start the asynchronous downloads
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    mListView.post(loadImages);
} 
```

将在绘制 ListView*后*`loadImages`调用，因此您将确切知道有多少行可见。

# storyboard - 如何将数据从模态视图控制器传递到父视图

> ID：13204182
> 
> 赞同：0
> 
> 时间：2012-11-02T23:00:06.680
> 
> 标签：storyboard, modalviewcontroller, uistoryboardsegue, pass-data

我正在为看起来如此简单的事情而苦苦挣扎：将数据从模态视图传递到其父级。我尝试了无数种方法，令我惊讶的是，网上没有太多东西，似乎没有什么能与我想做的事情相匹配。我正在使用故事板，并且大多数示例不使用序列/故事板。

如果有人可以为我提供一些示例代码，我将不胜感激！

我有一个带有自定义单元格的静态表格视图控制器。在单元格内，我有一个标签。我想点击单元格以呈现带有文本视图的模态视图。在文本视图中输入数据，然后点击保存/完成按钮以关闭模式视图并使该数据出现在单元格中的 UILabel 上。

我知道这听起来一定很简单，这里有很多关于它的问题，但没有什么能做这件事。一些示例代码将不胜感激。我完全坚持构建我的应用程序，在我得到这个之前不能再进一步了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:39:40.230

You can try NSUserDefaults to store your data from textview and then read them back for the label.

EDIT: If you don't want to use NSUserDefaults as it's not the "right" way (but the easy one) you can try this:

In your tableViewController.h create a NSString:

```
#import <UIKit/UIKit.h>
@interface TestTableViewController : UITableViewController
@property (nonatomic, strong) NSString *string;
@end 
```

In your viewController.h that contains the textView add these:

```
- (IBAction)doneButton;
@property (weak, nonatomic) IBOutlet UITextView *textView; 
```

In viewController.m:

```
- (IBAction)doneButton {
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
TestTableViewController *tvc = (TestTableViewController*)[storyboard instantiateViewControllerWithIdentifier:@"TestTableViewController"];
tvc.string = _textView.text;
[tvc setModalPresentationStyle:UIModalTransitionStyleFlipHorizontal];
[self presentModalViewController:tvc animated:YES];
// ios6 version:
//[self presentViewController:tvc animated:YES completion:nil];} 
```

Then back in your tableViewController.m display the input data to your cell (you don't need to use a label):

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{      
static NSString *CellIdentifier = @"test";
UITableViewCell *cell = [[UITableViewCell alloc] init]; 
if (SYSTEM_VERSION_LESS_THAN(@"6.0")) { 
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; } 
else { 
cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
} 
 // Configure the cell...
cell.textLabel.text = _string;

return cell;} 
```

DON'T forget to set the Storyboard ID to identity inspector on storyboard for your tableViewController!!

# entity-framework - 从 WCF 调用时实体框架超时

> ID：13204187
> 
> 赞同：2
> 
> 时间：2012-11-02T23:00:29.970
> 
> 标签：entity-framework

我有一个 .NET 项目，其中包含以下内容：

1.  WCF 网络服务
2.  实体框架数据层

下面描述的最终问题是用户表。User表的schema如下：

```
CREATE TABLE [dbo].[User](
    [Id] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY CLUSTERED,
    [FirstName] [varchar](50) NOT NULL,
    [LastName] [varchar](50) NOT NULL,
    [Email] [varchar](50) NOT NULL,
    [Username] [varchar](50) NOT NULL,
    [Password] [varchar](250) NOT NULL,
    [AuthenticationKey] [uniqueidentifier] NULL,
    [Active] [bit] NOT NULL DEFAULT (1),
    [Admin] [bit] NOT NULL DEFAULT (0),
    [AutoSubmit] [bit] NOT NULL DEFAULT(0))

CREATE UNIQUE NONCLUSTERED INDEX [IX_User] ON [dbo].[User] 
(
        [Username] ASC
) 
```

如果我对包含 3 条记录的 User 表运行查询，它会在不到一秒的时间内执行。

我正在一个名为 User.Validate() 的方法中针对实体框架运行以下查询。

```
database.User.Where(user => user.Username == userName && user.Active).SingleOrDefault() 
```

从单元测试调用时，上面的代码执行正常。但是，当从 WCF Web 服务调用该方法时，会发生以下异常：

*System.ServiceModel.FaultException：System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.Data.EntityCommandExecutionException：执行命令定义时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。---> System.ComponentModel.Win32Exception：等待操作超时*

在实体框架的覆盖下，以下查询是查询超时时运行的内容。如果我运行查询，它会在不到一秒的时间内执行。什么可能导致此超时？

```
exec sp_executesql N'SELECT TOP (2) 
[Extent1].[Id] AS [Id], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[Email] AS [Email], 
[Extent1].[Username] AS [Username], 
[Extent1].[Password] AS [Password], 
[Extent1].[AuthenticationKey] AS [AuthenticationKey], 
[Extent1].[Active] AS [Active], 
[Extent1].[Admin] AS [Admin], 
[Extent1].[AutoSubmit] AS [AutoSubmit]
FROM [dbo].[User] AS [Extent1]
WHERE [Extent1].[Username] = @p__linq__0',N'@p__linq__0 varchar(8000)',@p__linq__0='test1' 
```

# javascript - JavaScript 不在 android 3.0 的 Webview 中运行

> ID：13204189
> 
> 赞同：-1
> 
> 时间：2012-11-02T23:00:37.100
> 
> 标签：javascript, android, webview

在 Android 3.0 + webview 支持 svg 文件进行显示。我已经在资产文件夹中设置了所有 svg 图像和 java 脚本。

使用此代码可以在 webview 中看到 svg。

```
myBrowser.loadUrl("file:///android_asset/00011_1.svg"); 
```

但是因为`java script`我使用过这段代码

```
myBrowser.loadUrl("file:///android_asset/00011_1.svg?text=aaaaa&sig=bbbbb"); 
```

但 WebView 显示 webPage 不可用。

我怎么知道？

请帮帮我。

谢谢帕拉格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:02:57.380

该`file://`方案不支持查询参数，AFAIK。

作为一种解决方法，在加载 SVG 后，使用：

```
myBrowser.loadUrl("javascript:..."); 
```

其中`...`替换为 JavaScript 源代码，它将您想要的值传递给某个全局函数。

# c - 将二维数组 char 传递给函数

> ID：13204198
> 
> 赞同：8
> 
> 时间：2012-11-02T23:01:49.267
> 
> 标签：c, string, function, 2d

我正在尝试将一个带有字符串的二维数组传递给一个函数。我一直在 ] 令牌之前得到预期的表达式。

这段代码的重点是阅读一个单词搜索谜题，然后在该谜题中找到单词。我将编写一个用于向前搜索、反向搜索、然后是向上和向下搜索的函数。

我该如何摆脱这个错误？错误在我调用 forward 函数的最底部。

```
 /*Andrea Hatfield CPE 101 October 31st, 2012*/
    #include <stdio.h>
    #include <string.h>

    int forward(char words[][8], char puzzle[][11]);

    int main()
    {
    char puzzle[11][11];
    char words[8][8];
    FILE *fin, *fwords;
    int i = 0;
    int j= 0;

    fin = fopen("puzzle.in", "r"); 
    fwords = fopen("words.in", "r");

    if(fin == NULL) /*Reads in the puzzle file*/
    printf("File does not exist");
    else
    {
            while(fscanf(fin,"%s", puzzle[i])!=EOF)
            {
                    printf("%s\n", puzzle[i]);
                    i++;
            }

    }

    if(fwords == NULL) /*Reads in the words the puzzle will search for */
    printf("File does not exist");
    else
    {
            while(fscanf(fwords, "%s", words[j])!=EOF)
            {
                    printf("%s\n", words[j]);
            }
    }

    forward(&words[][8], &puzzle[][11]); /*Error at this point*/
    return(0);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:13:58.683

得到你想做的事情有点困难，但这里有一个问题：

```
forward(&words[][8], &puzzle[][11]); 
```

试试这个：

```
forward(words, puzzle); 
```

这里还有两个应该从[这里](https://stackoverflow.com/questions/3911400/passing-2d-arrays)提到的选项：

```
#define ROWS 4
#define COLS 5

void func(int array[ROWS][COLS]) {
  int i, j;

  for (i=0; i<ROWS; i++) {
    for (j=0; j<COLS; j++) {
      array[i][j] = i*j;
    }
  }
}

void func_vla(int rows, int cols, int array[rows][cols]) {
  int i, j;

  for (i=0; i<rows; i++) {
    for (j=0; j<cols; j++) {
      array[i][j] = i*j;
    }
  }
}

int main() {
  int x[ROWS][COLS];

  func(x);
  func_vla(ROWS, COLS, x);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:37:55.153

你需要直接打电话

```
 forward(words, puzzle); 
```

但是，您的代码中有一个错误：您在读取时忘记了`j++`在读取周期中`words`，因此您正在覆盖`words[0]`而不是初始化数组的其他成员。

此外，在现实世界的情况下，您可能会发现在运行时选择数组大小是可取的。一个简单的方法是为宽度和高度选择一个相当大的限制，然后使用 0x90 的解决方案（您需要一个 30x20 的拼图，并且您可以轻松处理它，因为您使用 ROWS 和 COLS 进行编译，例如， 1024)。

更复杂的方法是使用`malloc()`（使用指向字符指针的指针）并动态分配两个数组，受可用内存的限制；然后你会将它们的尺寸传递给`forward`函数。

```
int forward(char **words, char **puzzle, size_t w_w, size_t w_h, size_t p_w, size_t p_h)
{

} 
```

`malloc()`然而，考虑到循环调用以及每次都需要检查其返回值以拦截内存不足的情况，分配部分会更加复杂；此外，在某些情况下，您可能希望*取消*分配内存（例如运行重复的谜题），这会导致进一步的复杂性。

# matlab - 将二进制数据转换为 jpeg

> ID：13204200
> 
> 赞同：0
> 
> 时间：2012-11-02T23:01:57.797
> 
> 标签：matlab, binary, jpeg

在过去的几个小时里，我一直在互联网上寻找解决问题的方法，虽然我在其他论坛上看到了一些“答案”，但没有一个适合我的需求......

我有一个二进制文件，我正在使用 fwrite 在 Matlab 中创建它（尽管，如果有人有更好的方法在 Matlab 中生成二进制文件，我愿意接受建议）。回到我的问题 - 我有这个二进制文件，我想将它转换为 jpeg。没关系二进制数据来自哪里，我只想生成二进制数据的 jpeg 图像。

这甚至可能吗？- 就像我说的，有很多类似问题的“解决方案”，但没有一个能满足我的需求。

如有必要，我可以用 C++ 编写代码，但为简单起见，我想留在 Matlab 中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:47:15.277

**编辑：**

[从二进制到数组](http://www.mathworks.com/help/matlab/ref/fread.html)：

```
fid = fopen('yourfilename.bin');

% read the entire file as characters
% transpose so that F is a row vector
B = fread(fid, '*char')'

fclose(fid); 
```

根据图像尺寸重塑为数组

```
C=reshape(B,512,512); % or whatever dimension you have 
```

在拥有字符串数组后，只需使用：

```
D=int32(str2num(C)); 
```

# cakephp - CakePHP 的翻译行为如何决定使用哪个语言环境？

> ID：13204210
> 
> 赞同：0
> 
> 时间：2012-11-02T23:02:45.337
> 
> 标签：cakephp, translate, cakephp-2.3

我认为 CakePHP 的翻译行为使用以下内容来确定要在 i18n 表中查询的内容：

```
Configure::write('Config.language', 'en'); 
```

但即便如此，它在一个页面上查询，`locale='en'`而在另一个页面上，它使用`locale='eng'`.

我已经验证它在两个页面上都设置为“en” - 所以......为什么在一页上使用“eng”进行查询？

虽然我可能会在某个地方设置不同的设置，但是 - 我不相信你可以重新设置一个常数。

# java - 这里的 instanceof 检查有什么问题吗？

> ID：13204215
> 
> 赞同：4
> 
> 时间：2012-11-02T23:03:11.657
> 
> 标签：java, oop

随着泛型的引入，我不愿意尽可能多地执行 instanceof 或强制转换。但是在这种情况下，我看不到解决方法：

```
for (CacheableObject<ICacheable> cacheableObject : cacheableObjects) {
    ICacheable iCacheable = cacheableObject.getObject();
    if (iCacheable instanceof MyObject) {
        MyObject myObject = (MyObject) iCacheable;
        myObjects.put(myObject.getKey(), myObject);
    } else if (iCacheable instanceof OtherObject) {
        OtherObject otherObject = (OtherObject) iCacheable;
        otherObjects.put(otherObject.getKey(), otherObject);
    }
} 
```

在上面的代码中，我知道我的 ICacheables 应该只是 MyObject 或 OtherObject 的实例，并且根据这一点，我想将它们放入 2 个单独的映射中，然后进一步执行一些处理。

如果没有我的 instanceof 检查，如果有另一种方法可以做到这一点，我会很感兴趣。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:10:57.420

您可以使用双重调用。没有承诺这是一个更好的解决方案，但它是一个替代方案。

# 代码示例

```
import java.util.HashMap;

public class Example {

    public static void main(String[] argv) {
        Example ex = new Example();
        ICacheable[] cacheableObjects = new ICacheable[]{new MyObject(), new OtherObject()};

        for (ICacheable iCacheable : cacheableObjects) {
            // depending on whether the object is a MyObject or an OtherObject,
            // the .put(Example) method will double dispatch to either
            // the put(MyObject) or  put(OtherObject) method, below
            iCacheable.put(ex);
        }

        System.out.println("myObjects: "+ex.myObjects.size());
        System.out.println("otherObjects: "+ex.otherObjects.size());
    }

    private HashMap<String, MyObject> myObjects = new HashMap<String, MyObject>();
    private HashMap<String, OtherObject> otherObjects = new HashMap<String, OtherObject>();

    public Example() {

    }

    public void put(MyObject myObject) {
        myObjects.put(myObject.getKey(), myObject);
    }

    public void put(OtherObject otherObject) {
        otherObjects.put(otherObject.getKey(), otherObject);
    }

}

interface ICacheable {
    public String getKey();
    public void put(Example ex);
}

class MyObject implements ICacheable {

    public String getKey() {
        return "MyObject"+this.hashCode();
    }

    public void put(Example ex) {
        ex.put(this);
    }
}

class OtherObject implements ICacheable {

    public String getKey() {
       return "OtherObject"+this.hashCode();
    }

    public void put(Example ex) {
        ex.put(this);
    }

} 
```

这里的想法是 - 而不是强制转换或使用`instanceof`- 您调用`iCacheable`对象的`.put(...)`方法，该方法将自身传递回`Example`对象的重载方法。调用哪个方法取决于该对象的类型。

另请参阅[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。我的代码示例有异味，因为该`ICacheable.put(...)`方法没有凝聚力 - 但是使用访问者模式中定义的接口可以清除这种异味。

# 为什么我不能直接`this.put(iCacheable)`从`Example`课堂上打电话？

在 Java 中，覆盖总是在运行时绑定，但重载稍微复杂一些：动态调度意味着方法的实现将在运行时选择，但方法的签名仍然在编译时确定。（查看[Java 语言规范，第 8.4.9 章](http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.4.9)了解更多信息，还可以查看[Java Puzzlers](http://www.javapuzzlers.com/)书第 137 页上的谜题“Making a Hash of It” 。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:28:53.530

有没有办法将每个地图中的缓存对象组合成一张地图？他们的密钥可以将它们分开，因此您可以将它们存储在一张地图中。如果你不能这样做，那么你可以有一个

```
Map<Class,Map<Key,ICacheable>> 
```

然后这样做：

```
Map<Class,Map<Key,ICacheable>> cache = ...;

public void cache( ICacheable cacheable ) {
   if( cache.containsKey( cacheable.getClass() ) {
      cache.put( cacheable.getClass(), new Map<Key,ICacheable>() );
   }
   cache.get(cacheable.getClass()).put( cacheable.getKey(), cacheable );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:12:40.290

您可以执行以下操作：

1.  向您的界面添加一个方法，该方法`ICachableInterface`将处理将对象放置到两个 Map 之一中，作为方法的参数给出。
2.  在您的两个实现类中的每一个中实现此方法，让每个类决定将自己放入哪个 Map。
3.  删除`instanceof`for 循环中的检查，并将该`put`方法替换为对步骤 1 中定义的新方法的调用。

然而，这不是一个好的设计，因为如果您曾经有另一个实现此接口的类和第三个映射，那么您需要将另一个映射传递给您的新方法。

# octave - 如何在 Octave 中更改加载路径

> ID：13204217
> 
> 赞同：1
> 
> 时间：2012-11-02T23:03:23.077
> 
> 标签：octave

我在 Octave 中加载图像和编辑脚本时遇到问题。我认为 Octave 有错误的路径之类的。当我说“编辑”时，它说：

> sh：1：emacs：未找到

这意味着什么？

我对 Octave 和 MATLAB 都很陌生，但是当我在学校使用 MATLAB 时，例如，编写命令“编辑”就可以了……

我如何知道在 Octave 中将要加载的文件放在哪里，以及如何更改路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:53:27.857

问题不在于您的路径，问题在于您没有设置`EDITOR`（请参阅`help EDITOR`和编辑器选项`help edit`）。由于您没有环境变量，因此它默认为 emacs，因此当您运行时`edit`，它会尝试在 emacs 中打开文件并失败，因为您没有安装它。在文件中设置`EDITOR`您选择的文本编辑器`.octaverc`（如果我没记错的话，要使用的文本编辑器被设置为内部的持久变量，`edit.m`因此您必须重新启动八度）或环境变量（我推荐这个）。

它可以在 matlab 中使用，因为他们制作了自己的文本编辑器。Octave 不是文本编辑器，它是一种编程语言，重新发明轮子会浪费时间，而且你应该能够选择任何你喜欢的代码。

# php - 刷新包含 PHP 函数的 div

> ID：13204225
> 
> 赞同：0
> 
> 时间：2012-11-02T23:04:00.470
> 
> 标签：php, jquery, refresh

所以我有以下代码：

```
<div id="currentmotto"><?php mottoGrab($name); ?></div> 
```

它的作用是使用 curl 截取用户座右铭并将其显示在网站上。我需要它做的是让该功能每隔几秒钟刷新一次，以查看用户是否更新了座右铭。

我知道使用 jquery 我可以使用 .load('phpfile.php') 但问题是如果我将该函数放在该文件中，它不再从另一个页面获取 $name 变量。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:07:54.553

由于 PHP 是在服务器端执行的，因此一旦客户端加载页面，它就不会改变。在没有 JavaScript 的情况下刷新 div 的唯一方法是重新加载页面。

我会尝试使用 AJAX 从另一个文件中获取名称并使用 JavaScript 更新 HTML

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:09:54.170

通过查询字符串将名称传递给 phpfile.php：

.load('phpfile.php?name=THENAME');

然后使用 $_GET['name'] 从 phpfile.php 中获取名称并将其粘贴到函数中。

或者

发出传递名称的 AJAX 请求并使用 javascript 更新页面。

# c++ - 在其成员函数返回之前删除对象是未定义的行为吗？

> ID：13204226
> 
> 赞同：4
> 
> 时间：2012-11-02T23:04:11.417
> 
> 标签：c++

> **可能重复：**
> [C++：删除这个？](https://stackoverflow.com/questions/3150942/c-delete-this)

我正在尝试创建一个系统来管理游戏的状态。

我当前设计的问题是，当我切换状态时，旧状态会在控制切换到新状态之前被删除。

以下是我的代码的简化版本：

```
class StateManager;

class State
{
public:
    virtual void update(StateManager &manager)= 0;
    virtual ~State(){}
};

class StateManager
{
public:
    void setState(std::unique_ptr<State> && newState )
    {
        currentState = std::move(newState);
    }
    std::unique_ptr<State> currentState;

    void run()
    {
        currentState->update(*this);
    }
}; 
```

请注意，如果 State 对象在 update 方法中调用 StateManager::setState 时，将有一段时间在刚刚销毁的对象上调用成员函数。

此行为的完整示例位于[http://ideone.com/WHLzJL](http://ideone.com/WHLzJL)。请注意在 FirstState::update 返回之前如何调用 FirstState 的析构函数。

这是 C++ 中未定义的行为吗？如果是这样，我应该如何改变我的设计？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T23:10:00.457

不，没关系，如果你小心的话：[https ://isocpp.org/wiki/faq/freestore-mgmt#delete-this](https://isocpp.org/wiki/faq/freestore-mgmt#delete-this)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:21:30.160

只要没有问题，这是您在函数中做的*最后一*件事。(`delete this`是一个常见的习惯用法。) 然而，在这种特殊情况下，我通常发现最好`State::update`返回新的`State`（可能是`this`）。然后，调用它的代码`StateManager`将简单地将其分配给指针。

在这种情况下，请注意智能指针的语义。我使用侵入式共享指针来做到这一点，但我怀疑大多数当前的智能指针在这里都会失败。另一方面，您在这里并不需要智能指针，所以为什么要添加复杂功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:12:16.847

据我所知，主要影响是`this`成为一个悬空指针，因此访问字段、调用`virtual`方法或执行`dynamic_cast<T*>(this)`依赖运行时类型信息的类似操作会导致未定义的行为。

# python - JSON解析错误“NoneType对象不可调用”？

> ID：13204229
> 
> 赞同：1
> 
> 时间：2012-11-02T23:04:37.457
> 
> 标签：python, json

**代码：**

```
 body = '%s' % message.get_body()
                logging.error(body)
                parsed_body = json.loads(body) 
```

**正文包含：**

> [{u'content': u'Test\r\n', u'body_section': 1, u'charset': u'utf-8', u'type': u'text/plain'}, {u 'content': u'Test\r\n', u'body_section': 2, u'charset': u'utf-8', u'type': u'text/html'}]

**错误：**

```
line 67, in get
    parsed_body = json.loads(body)
  File "C:\Python27\lib\json\__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "C:\Python27\lib\json\decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Python27\lib\json\decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
  File "C:\Python27\lib\json\decoder.py", line 38, in errmsg
    lineno, colno = linecol(doc, pos)
TypeError: 'NoneType' object is not callable 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:12:39.717

`body`是一个字符串（你可以用 '%s' % ... 得到它），所以它**不应该**包含 Python 字符串编码，例如`u'content'`.

这意味着 get_body() 返回一个复杂对象，并将`'%s' % ...`其转换**为不是**JSON 的 python 输出字符串，或者当 get_body 返回它时，某些东西已经在“修复”该字符串。然后错误在其他地方。

例子：

```
import json

# This is a correct JSON blob

body = '[{"content": "Test\\r\\n", "body_section": 1, "charset": "utf-8", "type": "text/plain"}, {"content": "Test\\r\\n", "body_section": 2
, "charset": "utf-8", "type": "text/html"}]'

# And this is a correct object
data = json.loads(body)

# If I were to print this object into a string, I would get 
# [{u'content': u'Test\r\n', u'type': u'text/plain', u'charset'...
# and a subsequent json.load would fail.

# Remove the comment to check whether the error is the same (it is not on
# my system, but I'm betting it depends on JSON implementation and/or python version)

# body = '%s' % data

print body

print json.loads(body) 
```

# string - 计算翻译重复

> ID：13204230
> 
> 赞同：0
> 
> 时间：2012-11-02T23:04:42.480
> 
> 标签：string, translation, repeat

我在网上搜索了计算待翻译文档中重复次数的标准公式。我还没有找到它。对于那些不知道翻译中的重复是什么意思的人来说，[这](http://www.proz.com/forum/poll_discussion/233680-poll%3A_do_you_apply_discounts_for_repetitions.html#2023766)很好地描述了它。

我首先尝试过这样的事情

```
using System;
using System.Collection.Generic;
using System.Text.RegularExpressions;
using System.Linq;
<snip>
Dictionary<string, int> _dict = new Dictionary<string, int>();
int CalculateRepetitions(string plainTextDoc) {
    foreach (string item in Regex.Split(plainTextDoc, "\\P{L}+"))
        if (_dict.ContainsKey(item))
            _dict[item]++;
        else
            _dict.Add(item, 0);
    return _dict.Where((key, value) => value > 0).Count();
} 
```

但这与同一文档的 Trados 样本编号并不接近，而且无论如何都是错误的重复定义。有没有人有一个计算翻译重复的好例子？我不期待只有 C# 的答案，我也很擅长 java 和 c++ 的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:03:20.093

[GMX/V](https://en.wikipedia.org/wiki/Global_information_management_Metrics_eXchange)标准可能是您的答案，而且似乎有一个[C# 实现](https://code.google.com/p/gmx-v/)。

# ruby-on-rails - Rails：使用单个 rails 方法设置 HTML 属性的类和数据标记

> ID：13204231
> 
> 赞同：0
> 
> 时间：2012-11-02T23:04:51.247
> 
> 标签：ruby-on-rails

我目前正在开发一个可以在我的网站上引导新用户的旅游界面。我有一个包含许多 TourStop 的 Tour 模型，每个 TourStop 都包含有关网站一部分的信息。

基本上，我想为 Tour 模型编写一个函数——当传递一个 TourStop 的编号时——为它所附加的 HTML 元素生成正确的类和数据属性。例如，我想

```
<%= link_to image_tag("new_button.png", tour.stop_data(1), :title => 'Add new asset'), new_asset_path %> 
```

调用一个函数并返回类似的东西

```
def stop_data(order)
     " :class => '#{tour_stops.find_by_order(order).name}', 
       :data => '{:order => order}'"
end 
```

创建一个 link_to 标签，如：

```
<%= link_to image_tag("new_button.png", :class => 'tour_stop_1', 
       :data => {:order => 1}, :title => 'Add new asset'), new_asset_path %> 
```

上面的代码不起作用。这样的事情甚至可能吗？如果没有，我可能会采取什么更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:41:30.927

[image_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag)接受两个参数。一个源和一个选项哈希。

您要做的是将您的返回值从`stop_data`该选项哈希中压缩。

为了让它工作，你首先需要从 Hash 返回一个 Hash `stop_data`，其次，确保你只将两个参数传递给`image_tag`- 源和选项。

**首先**：

```
def stop_data(order)
  { 
    :class => tour_stops.find_by_order(order).name, 
    :data  => { :order => order } # you may need order.to_json
  }
end 
```

**第二**：

```
link_to image_tag("new_button.png", tour.stop_data(1), :title => "Add new asset"), new_asset_path 
```

这看起来会起作用，但它不会，因为你将三个参数传递给`image_tag`.

当您执行以下操作时：

```
image_tag("new_button.png", :class => "tour_stop_1", :data => { :order => 1 }, :title => "Add new asset") 
```

看起来您甚至将 4 个参数传递给`image_tag`，但实际上它们只有两个。在 Ruby 中，当方法的最后一个参数是 Hash 时，不需要将 Hash 键/值对包裹在花括号 ( `{}`) 中，因此上面的示例与

```
image_tag("new_button.png", { :class => "tour_stop_1", :data => { :order => 1 }, :title => "Add new asset" }) 
```

现在，为了让你的助手使用`image_tag`，你需要合并选项，所以它们只有一个哈希。

```
link_to image_tag("new_button.png", tour.stop_data(1).merge(:title => "Add new asset")), new_asset_path 
```

同样，我们在调用 时省略了花括号`merge`，因为它唯一（因此也是最后一个）参数是一个哈希。结果是一样的：

```
tour.stop_data(1).merge({ :title => "Add new asset" }) 
```

# macos - Mac 上的 Jenkins：无法运行程序“pdepend”

> ID：13204233
> 
> 赞同：0
> 
> 时间：2012-11-02T23:05:19.860
> 
> 标签：macos, ant, jenkins, phpunit

每次我尝试运行构建时，我都会得到一堆这样的行：

```
/Users/Shared/Jenkins/Home/jobs/dghhtreew/workspace/build.xml:28:
The following error occurred while executing this line:
/Users/Shared/Jenkins/Home/jobs/dghhtreew/workspace/build.xml:39: Execute failed: java.io.IOException: Cannot run program "pdepend": error=2, No such file or directory 
```

这是我的 build.xml 中的相关部分，它是由 PHP 项目向导自动生成的：

```
...
 <target name="parallelTasks" description="Run the pdepend, phpmd, phpcpd, phpcs, phpdoc and phploc tasks in parallel using a maximum of 2 threads.">
  <parallel threadCount="2">
   <sequential>
    <antcall target="pdepend"/>
    <antcall target="phpmd"/>
   </sequential>
   <antcall target="phpcpd"/>
   <antcall target="phpcs"/>
   <antcall target="phpdoc"/>
   <antcall target="phploc"/>
  </parallel>
 </target>
 <target name="pdepend" description="Generate jdepend.xml and software metrics charts using PHP_Depend">
  <exec executable="pdepend">
   <arg line="--jdepend-xml=${basedir}/build/logs/jdepend.xml
              --jdepend-chart=${basedir}/build/pdepend/dependencies.svg
              --overview-pyramid=${basedir}/build/pdepend/overview-pyramid.svg
              ${source}" />
  </exec>
 </target>
... 
```

显然 Jenkins 用户找不到这些命令或其他东西。当我像这样通过终端登录到 Jenkins 时：

```
sudo -s -H -u jenkins 
```

并尝试`pdepend`按预期工作。但由于某种原因，它在从 Jenkins 服务器执行时不起作用。我尝试在可执行行中设置绝对路径，但我得到了相同的结果。我没有弄乱安装或任何东西，我通过[mac 安装程序](http://jenkins-ci.org/)获得了 Jenkins 的最新版本（1.488） 。

*为什么詹金斯什么都做不了？？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:21:36.817

这是 exec 任务的执行路径问题。尝试指定 pdepend 命令的完整路径。

```
 <exec executable="/complete/path/to/command/pdepend">
  .. 
```

# 更新

如果这仍然不起作用，请检查**pdepend**命令的权限以确保它可以由 jenkins 用户执行。

直接运行 pdepend 命令时还值得检查返回码：

```
sudo -u jenkins /complete/path/to/command/pdepend || echo non-zero return code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-07T18:29:02.797

也许你没有安装命令，所以对我来说最简单的方法是通过 composer：

```
composer global require 'pdepend/pdepend=*' 
```

如果您没有作曲家，请安装它：

```
curl -sS https://getcomposer.org/installer | php

php composer.phar global require 'pdepend/pdepend=*' 
```

Jenkins让我们添加路径变量，你不需要添加路径

1.  请点击“管理詹金斯”
2.  单击配置系统
3.  找到复选框“环境变量”并确保它被选中
4.  添加新的：名称：PATH 值：$PATH:/Users/YOUR_USER/.composer/vendor/bin

# facebook - 购买自定义域而不会丢失 fb 喜欢、评论和 G+ +1

> ID：13204239
> 
> 赞同：-1
> 
> 时间：2012-11-02T23:06:14.947
> 
> 标签：facebook, google-plus, blogger

> **可能重复：** [如何通过 301 重定向移动 URL 并保留页面的 Facebook 点赞和 Open Graph 信息？](https://stackoverflow.com/questions/7197919/how-can-I-move-a-url-via-301-redirect-and-retain-the-pages-Facebook-likes-and-o)

我运行这个博客[http://everythingyoumightneed.blogspot.com](http://everythingyoumightneed.blogspot.com)我正在考虑将我的 blogspot 博客移动到自定义域。我做了一些研究，我发现如果我这样做，我将失去我所有的 G+ plusones 和 Facebook 对我的帖子的喜欢。Facebook 评论也是如此。（我博客的每篇文章都有 Facebook 评论社交插件）

我的问题是，是否有办法避免这种情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:12:53.553

您无法更改与评论关联的 url。但是，您可以修改新站点上的代码，使每个帖子都指向旧 URL 的评论页面。

在新域的每个页面上，这会将 facebook 评论与旧域相关联：

```
<fb:comments href="THE-OLD-URL"></fb:comments> 
```

例如[http://newdomain.com/thenewpage.html](http://newdomain.com/thenewpage.html)：

```
<fb:comments href="http://olddomain.com/theoldpage.html"></fb:comments> 
```

要使其正常工作，首先使用 facebook 文档让 facebook 评论在您的新网站上工作。一旦你有这个工作，你可以把代码放在页面上的任何地方（我通常把它放在头部的某个地方）。这将告诉 facebook 使用旧网址。

这将适用于喜欢、评论和其他所有内容。

# javascript - 从字符串中提取分数、小数和数字的正则表达式

> ID：13204242
> 
> 赞同：-3
> 
> 时间：2012-11-02T23:06:50.467
> 
> 标签：javascript, regex, number-formatting

我需要一个正则表达式来从给定的字符串中提取分数、小数和整数值。例如，输入将如下所示。

*   1/2 个苹果
*   1.5橙
*   2.5橙
*   1个柠檬

并且输出应该如下。

*   1/2
*   1.5
*   2.5
*   1

我想出了如何使用 3 个不同的正则表达式分别提取小数、小数和整数值，但我想不出一种方法来用一个正则表达式提取所有可能的数字值。

我目前正在使用 Javascript String 对象的匹配方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:15:31.523

使用正则表达式模式

```
\d+([/.]\d+)? 
```

...导致 Javascript 代码

```
var n = str.match(/\d+([\/.]\d+)?/g); 
```

检查[**这个**](http://jsfiddle.net/zsa6jtmv/)小提琴/演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:14:27.873

如果您确定所有字符串具有相同的格式（即以数量开头，然后是空格，然后是文本），则甚至不需要正则表达式：

```
"1/2 apples".split(" ").shift();   // gives "1/2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:09:48.470

在这种情况下，最简单的正则表达式（假设您的数字始终位于字符串的开头）是：

```
^\S+ 
```

例子：

```
'1/2 apples'.match(/^\S+/) // ["1/2"]
'1 lemon'.match(/^\S+/) // ["1"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T23:08:20.260

那么为什么不展示你的工作正则表达式呢？

但这里是如何，只需使用交替：

```
\d+(\/\d+|\.\d+)? 
```

这已经稍微优化了。您可以简单地将三个正则表达式分开`|`。

# python - 更改列表中具有相同键的字典的值

> ID：13204246
> 
> 赞同：1
> 
> 时间：2012-11-02T23:07:20.387
> 
> 标签：python, dictionary, for-loop

我有这个：

`[{'name': 'Peter'}, {'name': 'Anna'}]`

我想把它弄出来：

`[{'name': 'Peter Williams'}, {'name': 'Anna Williams'}]`

所以我做了：

```
>>> li = [{'name': 'Peter'}, {'name': 'Anna'}]
>>> new_li = []
>>> dic = {}
>>> for i in li:
...     dic["name"] = i["name"] + " Williams"
...     new_li.append(dic) 
```

但：

```
>>> new_li
[{'name': 'Anna Williams'}, {'name': 'Anna Williams'}] 
```

为什么？

你也能展示如何最好地得到`[{'name': 'Peter Williams'}, {'name': 'Anna Williams'}]`吗？

**编辑**

我不理解这种行为的原因是因为我假设：

```
>>> dict = {'name':'Peter'}
>>> lis = [dict]
>>> dict['name'] = 'Olaf' 
```

在哪里

```
>>> print lis 
```

给

```
[{'name': 'Peter'}] 
```

虽然它实际上是

```
[{'name': 'Olaf'}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:09:51.950

因为您在每次迭代中都使用相同的字典对象。

在第二次迭代中，您正在更改`name`在前一次迭代中分配给键的值，并且您的列表最终包含对同一对象的两个引用。

我强烈建议您查看“Python Tutor”工具 (pythontutor.com)，它允许您可视化一些 Python 代码的执行，并查看堆栈中正在创建哪些对象。例如[Python Tutor 与您的代码](http://www.pythontutor.com/visualize.html#code=li+=+%5B%7B%27name%27%3a+%27Peter%27%7D,+%7B%27name%27%3a+%27Anna%27%7D%5D%0Anew_li+=+%5B%5D%0Adic+=+%7B%7D%0Afor+i+in+li%3a%0A++++dic%5B%22name%22%5D+=+i%5B%22name%22%5D+++%22+Williams%22%0A++++new_li.append%28dic%29&mode=display&cumulative=false&py=2&curInstr=10)

做你想做的事情的正确方法是：

```
li = [{'name': 'Peter'}, {'name': 'Anna'}]
new_li = []
for p in li:
    new_p = {'name': p['name'] + ' Williams'}
    new_li.append(new_p) 
```

这样，每次迭代都会创建一个新的字典对象。

**更简洁的解决方案：**

```
li = [{'name': 'Peter'}, {'name': 'Anna'}]
new_li = [{'name': p['name'] + ' Williams'} for p in li] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:11:03.357

您需要在循环的每次迭代中创建一个新字典，否则在每次迭代中您修改并将相同的对象附加到`new_li`：

```
>>> li = [{'name': 'Peter'}, {'name': 'Anna'}]
>>> new_li = []
>>> for i in li:
...     new_li.append({'name': i['name'] + ' Williams'})
...
>>> new_li
[{'name': 'Peter Williams'}, {'name': 'Anna Williams'}] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:13:15.877

我假设你想就地改变它。你不需要做一个新的字典。

```
for d in inlist:
    d["name"] += " Williams" 
```

是你所要做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T23:13:41.520

你遇到了一个非常讨厌的问题。问题出在你的`dic`. 您正在遍历名称列表，首先您使用“Peter”点击名称列表。此时，您设置`dic`并`{'name': 'Peter Williams'}`附加它。但是，你用'Anna'打了那个，然后把它`dic`改成`{'name': 'Anna Williams'}`. 因此，您最终会在列表中*两次使用**相同*的字典。要解决此问题，您需要改为：

 *```
new_li = []
for i in li:
      n_li.append({'name': i['name'] + ' Williams'}) 
```*

# javascript - 如何在复选框勾选上将表单字段从一个表单复制到另一个表单？

> ID：13204252
> 
> 赞同：0
> 
> 时间：2012-11-02T23:07:57.360
> 
> 标签：javascript, html-select

我有一个地址表格和另一个地址表格，两种表格都有相同的字段。

当填写一个表单时，我希望用户能够选中一个框以将表单数据复制到另一个表单，因为这些值大部分时间都是相同的。

我所有的文本字段都在工作，我只是被国家和省份的下拉菜单困住了。

这是我到目前为止所得到的：

```
function FillShipping(f){ if(f.shippingtoo.checked == true)
{
  {
    f.email1.value = f.email.value;
    f.fullName1.value = f.fullName.value;
    f.address1.value = f.address.value;
    f.address3.value = f.address2.value;
    f.city1.value = f.city.value;
    f.postCode1.value = f.postCode.value;
    f.phone11.value = f.phone1.value;
    f.phone22.value = f.phone2.value;
    f.phone33.value = f.phone3.value;
    f.cell11.value = f.cell1.value;
    f.cell22.value = f.cell2.value;
    f.cell33.value = f.cell3.value;
  }
}
else
{
    f.email1.value = '';
    f.fullname1.value = '';
    f.address1.value = '';
    f.address3.value = '';
    f.city1.value = '';
    f.postCode1.value = '';
    f.phone11.value = '';
    f.phone22.value = '';
    f.phone33.value = '';
    f.cell11.value = '';
    f.cell22.value = '';
    f.cell33.value = '';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:23:31.860

试试这个（假设您的国家和省的组合名称是、`country`和`province`）：`country1``province1`

```
f.country1.selectedIndex = f.country.selectedIndex;
f.province1.selectedIndex = f.province.selectedIndex; 
```

# javascript - 引导词缀

> ID：13204258
> 
> 赞同：18
> 
> 时间：2012-11-02T23:08:33.633
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我正在尝试使用 Twitter Bootstrap 的新词缀选项，但我不能完全正确。

[我在http://jsfiddle.net/yPgUu/1/](http://jsfiddle.net/yPgUu/1/)上整理了一个示例，相关部分是

```
<ul class="nav nav-list" data-spy="affix"> 
```

左侧导航从正确的位置开始。但是，当您向下滚动时，导航顶部会出现一个间隙。我希望导航始终位于当前视图的顶部，而不是成为间隙。

我也试过玩弄`data-offset-top="200"`，但这似乎只是让菜单反弹。

我错过了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-02T23:25:30.537

好的，所以这需要分两部分完成。

[http://jsfiddle.net/yPgUu/2/](http://jsfiddle.net/yPgUu/2/)

先赋值`data-offset-top="50"`再修改`affix`css中的属性

```
.affix {
    top: 10px;
}​ 
```

# teamcity - TeamCity FxCop 运行器：指定程序集

> ID：13204261
> 
> 赞同：5
> 
> 时间：2012-11-02T23:09:04.977
> 
> 标签：teamcity, fxcop

我的第一个想法是单独列出每个 dll 是不好的做法。我想避免每次有人创建新项目/dll 时都必须编辑我的 TC 配置。

尽管使用传统的目录结构，我找不到任何明智的通配符模式。

**目录结构**

*   解决方案
    *   容器
        *   垃圾桶
            *   调试
    *   核
        *   垃圾桶
            *   调试
    *   网络
        *   垃圾桶
            *   调试
    *   ...

任何通配符模式（如`**\bin\**.dll`）将多次匹配相同的 DLL。

你们如何指定在 TeamCity 中使用 FxCop 检查哪些程序集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T04:46:13.447

我有一个单元测试项目，它引用了我的解决方案中的所有其他项目。构建单元测试项目时，其他项目生成的 DLL 会在本地复制，因此我在该单个 bin 文件夹上运行所有分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:39:56.460

对我来说最舒服的方法是在存储库中签入一个 FxCop 项目文件。所以我在开发者机器和构建服务器上有相同的报告。

# python-2.7 - 将数据插入特定表（sqlalchemy）

> ID：13204262
> 
> 赞同：6
> 
> 时间：2012-11-02T23:09:05.973
> 
> 标签：python-2.7, sqlalchemy

使用 sqlalchemy 将数据插入数据库非常容易。

```
address.name = 'Joe'
address.age = 26
session.add(address) 
```

但实际上我有三个表 - 我如何指定要插入数据的表？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-05T22:55:23.350

我通过使用 sql 表达式语言添加新行解决了这个问题：

```
engine.execute(table_addresses.insert(), name='Joe', age=20)
engine.execute(table_contacts.insert(), email='joe@something.com', cellnumber='267534320') 
```

通常我使用 ORM，但在我的情况下它更方便。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-03T17:57:16.400

您可能想查看[sqlalchemy ORM 教程](https://docs.sqlalchemy.org/en/latest/orm/tutorial.html)。

不过，为了让你开始，我怀疑你会想要设置类似下面的东西。

```
from sqlalchemy import Column, Integer, String
class Address(Base):
    __tablename__ = 'addresses'

    id = Column(Integer, primary_key=True)
    name = Column(String)
    age = Column(Integer)

    def __init__(self, name, age):
        self.name = name
        self.age = age 
```

现在，由于您似乎已经知道如何获得会话，因此您可以这样做

```
address = Address('Joe', 26)
session.add(address) 
```

尽管您可能只是尝试即时执行此操作，但它可能不会让您的生活更轻松，因为您仍然必须告诉它哪些对象与整数、字符串等相关，才能映射到数据库表。

# c# - 如何引用我的弹出窗口？

> ID：13204266
> 
> 赞同：0
> 
> 时间：2012-11-02T23:09:16.737
> 
> 标签：c#, windows-8, settings, winrt-xaml, flyout

根据我从弗里曼的书“Metro Revealed”中收集到的信息（顺便说一句，这是迄今为止最好的书，尽管它的重量不到 100 页），我正在尝试实现一个设置弹出窗口（弹出窗口）。

我有这个相关的代码：

具有/是弹出窗口的用户控件：

```
<UserControl
    x:Class="TimeAndSpaceLines.View.TSLsSettings"
    . . .
    <Popup x:Name="popupSectionName" IsLightDismissEnabled="True" >
    . . .
    </Popup>
</UserControl> 
```

“主”页面的 xaml：

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    . . .
    xmlns:settingsflyout="using:TimeAndSpaceLines.View"
    . . .
        </Grid>
        <settingsflyout:TSLsSettings x:Name="hubPageSettingsFlyout"/>
        <VisualStateManager.VisualStateGroups>
    . . . 
```

“主”页面的相关“代码隐藏”：

```
public ItemsPage()
{
    InitializeComponent();
    SettingsPane.GetForCurrentView().CommandsRequested += OnSettingsPaneCommandRequested;
}

private void OnSettingsPaneCommandRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
{
    // Add the commands one by one to the settings panel
    args.Request.ApplicationCommands.Add(new SettingsCommand("commandSetSection1Name",
                                                            "Change the name of Section 1", SetAndSaveSectionNames));
. . .        
} 
```

但是，当我尝试以这种方式打开它时：

```
private void SetAndSaveSectionNames(IUICommand command)
{
    TimeAndSpaceLines.View.TSLsSettings.popupSectionName.IsOpen = true;
    . . .
} 
```

我受到了欢迎：

```
An object reference is required for the non-static field, method, or property
'TimeAndSpaceLines.View.TSLsSettings.popupSectionName' 
```

和：

```
'TimeAndSpaceLines.View.TSLsSettings.popupSectionName' is inaccessible due to its protection level 
```

然而`popupSectionName`不是一个类，它所在的类是公共的。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:52:13.850

`TimeAndSpaceLines.View.TSLsSettings`是类名，而不是实例名。您想要的是实例的名称：`hubPageSettingsFlyout`. 我建议对您使用绑定，`popupSectionName` `IsLightDismissEnabled`这样您就不必尝试查找 UI 元素，而只需检查它所绑定的任何属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:22:16.127

它做的有点不同

我没有创建一个`UserControl`，而是创建了一个`BasicPage`，然后从我的主页创建了该页面的一个实例（见下文`var mypane = new CreateProvider {Height = Window.Current.Bounds.Height};`），其中`CreateProvider`是`XAML`我传递给我的`Popup`喜欢的页面`_providerPopup.Child = mypane;`。试试这种方式，我认为你`UserControl`也可以正常工作。只需将您的用户控件分配给`Popup`like `_popup.Child = popupSectionName;`。

```
 // Create a Popup window which will contain our flyout.
        _providerPopup = new Popup
                             {
                                 Height = Window.Current.Bounds.Height,
                                 ChildTransitions = new TransitionCollection
                                                        {
                                                            new PaneThemeTransition
                                                                {
                                                                    Edge =
                                                                        (SettingsPane.Edge ==
                                                                         SettingsEdgeLocation.Right)
                                                                            ? EdgeTransitionLocation.Right
                                                                            : EdgeTransitionLocation.Left
                                                                }
                                                        }
                             };

        // Add the proper animation for the panel.

        // Create a SettingsFlyout the same dimenssions as the Popup.
        var mypane = new CreateProvider {Height = Window.Current.Bounds.Height};

        // Place the SettingsFlyout inside our Popup window.
        _providerPopup.Child = mypane;

        // Let's define the location of our Popup.
        _providerPopup.SetValue(Canvas.LeftProperty,
                                SettingsPane.Edge == SettingsEdgeLocation.Right
                                    ? (Window.Current.Bounds.Width - SettingsWidth)
                                    : 0);
        _providerPopup.SetValue(Canvas.TopProperty, 0);
        _providerPopup.IsOpen = true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T15:18:32.293

从“主”页面的相关“代码隐藏”中试试这个：

```
var myPopUp = (PopUp)hubPageSettingsFlyout.FindName("popupSectionName"); 
```

这将有效！

# java - Android JSON 解析（杰克逊）

> ID：13204267
> 
> 赞同：2
> 
> 时间：2012-11-02T23:09:44.693
> 
> 标签：java, android, json, parsing, jackson

我已经阅读了许多不同的文章、比较和教程，它们使用不同的 JSON 库将 JSON 解析（和创建）为 Java 对象。无论如何，我认为我已经掌握了正确的事实，因为我决定使用名为**Jackson 的 JSON 库。**

GSON 简单而健壮，但对我来说很慢。所以我决定实际尝试一下这个杰克逊的东西，但是，这里的解析似乎比 GSON 更令人困惑。

我要解析的值的数据类型只是一个**Boolean**。

*这就是我试图解析的 JSON 的样子：*

```
{"FooResult":true} 
```

所以我真正需要帮助的是从键中选择值`FooResult`，然后将其值解析为布尔值。

*这是我到目前为止所做的：*

```
String json = getString(request);
ObjectMapper mapper = new ObjectMapper();
mapper.readValue(json, Boolean.class); 
```

但是这段代码显然给了我一个错误，因为我没有选择它是`FooResult`我有兴趣阅读和解析为布尔值的关键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:13:49.450

您应该像这样创建一个新类：

```
class MyClass {
   public boolean FooResult;
} 
```

并使用此代码加载数据：

`MyClass myObject = mapper.readValue(json, MyClass.class);`

然后您可以使用`myObject.FooResult`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:48:31.343

好吧，这很蹩脚。当我重新考虑它时，甚至更加laer。一直以来的问题是您要解析的对象的类必须是**静态**的。在我今天发布这个问题之前，我已经尝试了西蒙建议的四五次，但问题一直是课程不是**静态**的。

所以现在它终于起作用了。

```
static class FooClass
{  
    public boolean FooResult; 
} 
```

而对于解析过程。

```
String json = getString(request);
ObjectMapper mapper = new ObjectMapper();
FooClass fooClass = null;
try 
{
    fooClass = mapper.readValue(json, FooClass.class);
}
boolean result = fooClass.FooResult; 
```

# android - BufferedReader 适用于标准 java 但不适用于 android

> ID：13204271
> 
> 赞同：0
> 
> 时间：2012-11-02T23:09:52.057
> 
> 标签：android, url, bufferedreader

所以我在 java 和 android 中有完全相同的代码，但由于某种原因，在 android 方法中`get()`总是无法完成工作并返回 false，但在标准 java 中它工作得很好。而且我确实有清单中的互联网许可。

这是代码：

```
 public boolean get(){
        try {
            jsonObject = new JSONObject(readUrl(url)); // Ignore JSON thing.
            return true;
        } catch (Exception ex) {
            return false;
        }
    }

    private String readUrl(String urlString) throws Exception {
        BufferedReader reader = null;
        try {
            URL url = new URL(urlString);
            reader = new BufferedReader(new InputStreamReader(url.openStream()));
            StringBuffer buffer = new StringBuffer();
            int read;
            char[] chars = new char[1024];
            while ((read = reader.read(chars)) != -1) {
                buffer.append(chars, 0, read);
            }

            return buffer.toString();
        } finally {
            if (reader != null) {
                reader.close();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:55:44.650

在 Android 中，当您启动一项服务时，它仍会在*Main Thread*（又名*UIThread* ）中运行，作为一种好的做法，您不应在该线程中进行任何密集处理，因为它会锁定用户与您的应用程序的交互。因此，即使在服务中，您也必须创建自己的线程来访问网络资源。
这是[服务的参考链接](http://developer.android.com/guide/components/services.html)

# objective-c - 为什么当我尝试使用 __attribute__((NSObject)) 时 Xcode 4.5 静态分析器告诉我有潜在的内存泄漏

> ID：13204276
> 
> 赞同：1
> 
> 时间：2012-11-02T23:10:36.690
> 
> 标签：objective-c, xcode4.5, core-foundation

我有一个包含核心基础对象的属性，特别是 CFHTTPMessageRef。我尝试使用**属性**((NSObject)) 宏来告诉编译器将引用的对象视为普通的 NSObject 并为我处理该对象的保留和释放，而不必自己 CFRelease。我尝试将属性更改为弱而不是强，但似乎没有任何效果，静态分析器仍然告诉我有内存泄漏，从 CFGetRetainCount 的输出来看，它是正确的。有谁知道为什么我的财产会导致内存泄漏：

```
typedef __attribute__((NSObject)) CFHTTPMessageRef HTTPMessageRef;

@interface ABRemoteConnection : NSObject
@property (strong) HTTPMessageRef message;
@end

- (void)dataReceived:(NSNotification *)notification {
    self.message = CFHTTPMessageCreateEmpty(kCFAllocatorDefault, TRUE);

    // do some stuff and if the message is complete, use it and release the 
    // message object
    if (messageIsComplete(self.message)) {
         self.message = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:34:25.137

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)来看，它看起来`__attribute__((NSObject))`只适用于`retain`.

但是切换`strong`到`retain`意味着您现在正在添加另一个 ref，该道具将为您管理；还有你必须的原始参考`CFRelease`。

如果你仔细想想，这是有道理的。想象一下用 a 做同样的事情`property(retain) NSObject *`：

```
- (void)dataReceived:(NSNotification *)notification {
    self.o = [[NSObject alloc] init];
} 
```

这很好用——但只是因为 ARC 看到并在范围的末尾`alloc`自动为您插入对应的。`release`使用一个`CF___Create`函数，在作用域的末尾没有自动的 CFRelease，所以你必须手动编写一个。

如果你真的想像`HTTPMessageRef`一样方便`NSDictionary`，它不能只是一个 typedef；它必须是免费的桥接课程。

# php - 在php中访问超类的受保护var

> ID：13204283
> 
> 赞同：0
> 
> 时间：2012-11-02T23:11:05.003
> 
> 标签：php, protected, superclass

一个小的 php 问题的简短问题。

```
class topclass {
protected $test;
//....
}

class childclass extends topclass {`
public static function accessVariable(){

//HOW CAN I ACCESS THE $Test VARIABLE OF THE SUPERCLASS HERE?

}... 
```

有人可以帮助我吗？

非常提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:12:20.477

将`self::$test`or`parent::$test`用于静态函数和`$this->test`常规函数。受保护的变量在扩展类的范围内可用，私有变量不可用。

`self::$test`using和之间的区别在于`parent::$test`，如果您`$test`在子类中被覆盖，您将在 using 时获得被覆盖的值`self::$test`。

当然，如果您希望静态访问该属性，则需要将其声明为静态（即`protected static $test`）。

# loops - Install4j 的默认后退按钮行为与循环不兼容。解决方法是什么？

> ID：13204298
> 
> 赞同：3
> 
> 时间：2012-11-02T23:12:40.870
> 
> 标签：loops, install4j

有人可以阐明Install4j的后退按钮实际上是如何工作的吗？在这一点上我应该注意我正在使用 install4j Multi-Platform Edition 5.1.2（build 5492）。

**循环示例**

此示例基于包含 2 个屏幕（“屏幕 1”和“屏幕 2”）的屏幕组。

1.  开始画面
2.  屏幕 1（在循环组中）
3.  屏幕 2（在循环组中）
4.  结束画面

屏幕组属性：

*   循环索引开始：0
*   循环索引步长：1
*   循环表达式：(Integer)context.getVariable("i") < 2
*   循环索引变量名：i

正如预期的那样，重复单击下一步会导致以下屏幕流程：

1.  开始画面
2.  屏幕 1 (i=0)
3.  屏幕 2 (i=0)
4.  屏幕 1 (i=1)
5.  屏幕 2 (i=1)
6.  屏幕 1 (i=2)
7.  屏幕 2 (i=2)
8.  结束画面

我希望后退按钮在上面列出的历史记录中后退一步。但是，实际行为如下：

1.  结束画面
2.  屏幕 2 (i=3)
3.  屏幕 1 (i=3)
4.  屏幕 1 (i=3)
5.  屏幕 1 (i=3)
6.  开始画面

显然，这不是任何理性用户所期望的。更复杂的是[，5.1 Build 5435 的 Log Install4j 更改](http://www.softpedia.com/progChangelog/install4j-Changelog-172405.html)包括以下内容：

> 修复了返回存在屏幕循环的屏幕历史记录时的错误行为

这个例子中提出的另一个问题是，当倒退时如何减少循环计数器？使用循环屏幕组时，似乎没有实际的方法可以做到这一点。

如果是这种情况，实现可以向后逐步执行的循环的唯一方法是实现您自己的屏幕以覆盖[previous()](http://resources.ej-technologies.com/install4j/help/api/com/install4j/api/screens/Screen.html#previous%28%29)。副作用是您必须手动编写屏幕代码才能获得正确的循环后退按钮行为，这似乎很荒谬。

有没有其他人找到解决这个问题的好方法？install4j 手册非常蹩脚，因为“历史”这个词只出现了一次。没有关于后退按钮如何工作的规范。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:44:47.350

这是一个错误，它将在 5.1.4 中修复。请联系 support@ej-technologies.com 以获取已修复的当前版本。

> 这个例子中提出的另一个问题是，当倒退时如何减少循环计数器？使用循环屏幕组时，似乎没有实际的方法可以做到这一点。

这将在 5.1.4 中自动运行。

# c++ - 在文本框中使用 WM_CHAR 输入处理的 gobbledygook

> ID：13204300
> 
> 赞同：0
> 
> 时间：2012-11-02T23:12:55.690
> 
> 标签：c++

在你看来，我可能仍然是一个自杀者，或者更合理地说，我只是一个想要不惜一切代价学习如何经营一家全球性大公司的孩子：L

试图在窗口内制作一个文本输入控制台框，我使用了这个：

```
textString.insert(cursorPosition,1,(char)wParam);
cursorPosition+=1; 
```

同时从窗口的 WM_CHAR 消息中获取*wParam 。*当我输入一些东西时，我得到了 gobbledygook！每个按下的键 3 个字母，通常应该在大写字母本身或一些奇怪的 ASCII 之间。例如：

**一个**-> AA

**l** -> LLL

**\** -> Ü\Ü

**shift 键**-> □（空白）有一堆空格

据我所知，看起来文本不仅获得了 WM_CHAR，还获得了 WM_KEYDOWN 和 WM_KEYUP。我将代码放在消息处理程序中调用的类中：

```
case WM_CHAR:
myTextClass(wParam);
    break; 
```

有什么问题？=_=''

如果需要，我将发布代码的其他部分。

编辑：好的，请稍等。直观地说，在其他消息解决问题之前移动 WM_CHAR 处理，但我仍然很好奇为什么它会做所有这些事情，如果不是谁来回复 xD 的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:29:21.817

当你的 switch 语句中的前一个*case缺少**break*关键字时，就会出现这种情况。所以它属于 WM_CHAR 案例。

在处理 WM_CHAR 时，像您一样使用*break 。*这样它就会被传递给 DefWindowProc() 而你真的打算*返回*，因为你已经处理了消息。

猜猜，你没有发布足够的代码，但鞋子合脚。

# python - Debian中没有包管理器安装程序的本地Python？

> ID：13204302
> 
> 赞同：3
> 
> 时间：2012-11-02T23:13:01.837
> 
> 标签：python, installation, debian

我的包管理器已经坏了一个多月了，我一直无法修复它，更多[在这里](https://stackoverflow.com/questions/13204173/broken-debian-package-manager-how-to-deal-with-it)。我现在正在寻找一种没有包管理器/安装程序来规避这个问题的方法。如何在 Debian 中使用没有 pkg​​ -manager 的 python？

**示例错误：** `"python -m http.server 8000 /usr/bin/python: No module named http"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T23:51:22.823

这似乎与缺少包管理器没有任何关系。

该`http.server`模块默认带有 python 3。
如果您使用的是 python 2，请`SimpleHTTPServer`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:42:14.680

一般来说，如果你想避免使用 apt，或者如果你没有管理员权限，你可以使用`easy_install`来抓取大多数 python 包并将它们存储在你的主文件夹中。只需添加`--install-dir $HOME/lib/<pythonversion>/dist-packages`然后放入`export PYTHONPATH=$HOME/lib/<pythonversion>/dist-packages`您的 .bashrc 或类似文件。

# javascript - Ajax 函数仅在部分时间工作

> ID：13204310
> 
> 赞同：0
> 
> 时间：2012-11-02T23:14:04.767
> 
> 标签：javascript, ajax, xmlhttprequest

我正在使用以下 Ajax 函数格式：

```
var xmlhttp;

function addAddress(str)
{
 if (window.XMLHttpRequest)
  {
    xmlhttp = new XMLHttpRequest();
  }
  else
  {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange = function()
  {
     if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
     {
       //specific selection text
       document.getElementById('info').innerHTML = xmlhttp.responseText; 
     }
  }
  var addAddress = "add";
  xmlhttp.open("POST", "sys.php", true);
  xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  var queryString = "&addAddress=" + addAddress;
  xmlhttp.send(queryString);
}

function GetXmlHttpObject()
{
 if (window.XMLHttpRequest)
  {
    return new XMLHttpRequest();
  }
 if (windows.ActiveXObject)
  {
    return new ActiveXObject("Micorsoft.XMLHTTP");
  }
 return null;
} 
```

到现在为止，我所有的 Ajax 函数，就像上面的一样，都运行良好。但是，现在该功能仅在某些时候起作用。现在，有时我必须单击几次 onclick 事件才能执行该函数，否则该函数会挂起，然后大约 4 分钟后它会执行。

我测试了部分功能，发现问题出在以下位置：

```
if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
 {
    alert(xmlhttp.status);
   //specific selection text
   document.getElementById('info').innerHTML = xmlhttp.responseText; 
 } 
```

当函数工作时，我可以 alert(xmlhttp.status) 并得到 200。但是，当它不工作时，警报框甚至不会触发。事实上，什么都没有发生，甚至没有错误。

这可能是服务器问题吗？我有点想我的网站被黑了，但我找不到任何问题可以接受 Ajax 函数没有正确执行。

最后，我没有在我的本地主机上遇到这个问题，它只发生在实时网站上。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:31:25.300

首先确认当您单击应该触发它的按钮或控件时实际调用了 addAddress 函数。

像这样在第一行中添加一个简单的警报就可以了：

```
function addAddress(str)
{
    alert('addAddress has been called!')
    ....
} 
```

如果您没有收到警报，请确保页面上没有阻止函数运行的 javascript 错误。例如，在 Firefox 中，您可以按 CTRL+SHIFT+J 来查看错误控制台。

如果该部分正常工作，请尝试将 ajax 请求的 URL 直接放入浏览器并以这种方式进行诊断。

看起来您正在使用 ajax 请求此 url：

```
sys.php&addAddress= (address goes here) 
```

检查页面是否会直接加载到您的浏览器中。如果不是，问题不是 ajax 请求，而是 sys.php 页面本身的问题 - 然后您可以深入研究。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:20:46.373

这不是我所期望的答案，但我最终让我的网络主机 (GoDaddy) 更改服务器，这解决了问题。将近一年，我一直在用 PHP 运行 IIS7。由于我从未遇到任何问题，我只是继续使用该服务器。在出现 Ajax 延迟问题并且无法找到解决方案之后，我想我会切换到 Apache。更改后，一切又开始顺利进行。

我在想也许有一个软件更新我没有收到通知。或者，也许我的网站受到了 DDoS 攻击，这降低了我的 Ajax 请求的性能。最后，也许有人进入 IIS 并更改了设置。我不知道，我只知道服务器切换到 Apache 的那一刻是网站再次开始正常运行的时候。

感谢大家的建议。

# c# - 无法删除“元数据文件”...\bin\foo.dll“不可用”错误

> ID：13204312
> 
> 赞同：0
> 
> 时间：2012-11-02T23:14:16.110
> 
> 标签：c#, asp.net, asp.net-mvc, dll, metadata

我收到 NewtonSoft Json dll 的这个问题。这是说命名空间“Json”在命名空间“System.Runtime.Serialization”中不存在。

我已经清理并再次构建了代码。还尝试将 dll 添加到 bin 文件夹中，但仍然没有运气。

为什么会发生这种情况，我该如何克服？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:35:03.807

有一个 System.Runtime.Serialization 命名空间和一个 NewtonSoft.Json.Serialization 命名空间，听起来它正在使用前者，而您期望它使用后者。确保您引用了正确的 NewtonSoft 命名空间和/或在从任一命名空间声明类型对象时更加明确。

# django - 在 json 中包含渲染的 html 模板

> ID：13204319
> 
> 赞同：1
> 
> 时间：2012-11-02T23:14:44.080
> 
> 标签：django, django-templates, django-views

我想将我呈现的 html 模板包含到一个 json 对象中。

```
def updates(request, game_id, from_staff_comment_id):
    game = Game.objects.latest()
    staff_comments = StaffComment.objects.find_by_game_with(game_id, from_staff_comment_id)
    staff_comments_max = 0
    if staff_comments:
        staff_comments_max = staff_comments[0].id
    game_json = {
        'home_score': game.home_score,
        'guest_score': game.guest_score,
        #'staff_comments': serializers.serialize('json', staff_comments, fields=('time', 'unsername', 'comment')),
        'staff_comments_html': render_to_string('live_staff_comment.html', {'comments': staff_comments}),
        'staff_comments_max': staff_comments_max
    }
    return HttpResponse(simplejson.dumps(game_json), mimetype='application/json') 
```

`render_to_string()`有效，但 html 被转义，因此当我使用 javascript 将其附加到浏览器时，它呈现为文本。

你能帮助我吗 ？

谢谢

# mysql - 有限制的汇总？

> ID：13204320
> 
> 赞同：1
> 
> 时间：2012-11-02T23:14:55.690
> 
> 标签：mysql, limit, rollup

我的 MySQL 查询之一有问题：

```
SELECT id,Portfolio,Agency,Program,Objective,billion1,value11_12,
    Proportion1,billion,value12_13,Percentage,Difference,
    Diff_Percent,PIT,TOS,Actual_PIT,Actual_TOS,SUM(billion),SUM(Percentage),
    SUM(PIT),SUM(TOS),SUM(Actual_PIT),SUM(Actual_TOS)
FROM budget_table
GROUP BY 'sum(Billion)'
WITH ROLLUP
LIMIT 0,100 
```

查询有效，但我无法获得使用汇总的限制。您可以在[BudgetAus查看查询结果](http://budgetaus.net/results.php?Page1=001-100&submit=Show#All)

它汇总了所有结果，而不是我现在想要实现的前 100 个结果。我也尝试过仅使用 LIMIT 100 但无法正常工作。我尝试在数据库上的 MySQL 中使用 EXPLAIN（第一次），它说虽然我没有看到任何结果，但查询已执行——但因为我在不确定要查找什么之前从未使用过它。我是编程和使用 WAMP 而不是 CLI 的新手。

我也不确定是从 0 还是 1 开始我的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:30:28.677

`SUM()`运算符不能在`GROUP BY`表达式中使用，`SUM()`聚合运算符也是如此，因此在 a 中没有任何意义`GROUP BY`

因此，您应该`id`为`GROUP BY`.

`LIMIT`（偏移参数）的第二个参数从 0 开始，而不是 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:19:21.977

```
GROUP BY 'sum(Billion)' 
```

这不会按 Billion 列的每个不同值进行分组。这按单个值分组，即常量字符串字面量`'sum(Billion)'`。因此，您将获得一组，因为当您使用常量字符串文字作为分组表达式时，所有行都具有相同的值。

当您将表达式放在 GROUP BY 列中时，请去掉引号。

然后你会发现这无论如何都不是一个有效的分组表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T09:05:35.937

我的儿子（他在附近某个地方，但我不知道他的用户名）决定他今天想为我解决这个问题，并提供了以下解决方案：

//获取主要结果集 $result = mysql_query("SELECT * FROM budget_table ORDER BY Percentage DESC LIMIT 0,100 ");

//为结果集构建一个id数组 $ids = array(); $rows = mysql_num_rows($result);

//获取每一行的id并添加到ids

for($i = 0; $i < $rows; $i++) $ids[] = mysql_result($result, $i, "id");

//将ids加入一个字符串以供IN()使用

$ids_str = implode(",", $ids);

//仅获取上述结果集的 id 的总和

$result2 = mysql_query("SELECT SUM(十亿),SUM(百分比),SUM(PIT),SUM(TOS),SUM(Actual_PIT),SUM(Actual_TOS) FROM budget_table WHERE id IN($ids_str)");

# ruby-on-rails-3 - 在 Rails 3 控制器测试中设置 host/remote_addr 和其他环境属性

> ID：13204329
> 
> 赞同：1
> 
> 时间：2012-11-02T23:15:42.197
> 
> 标签：ruby-on-rails-3, testing, controller

在 Rails 2 中，您可以在控制器测试中指定主机和其他 Rack 环境属性，如下所示：

```
should "spoof host and remote_addr" do
  get "/thing/2", {}, :remote_addr => "192.71.1.2", :host => "somewhere.else"
end 
```

但是，由于某种原因，这在 Rails 3 上不起作用。我尝试使用常规控制器，`env["HTTP_HOST"]`但没有按预期设置（与 相同`"REMOTE_ADDR"`）。我也试过这个：

```
should "use host and remote_addr" do
  request.env["REMOTE_ADDR"] = "192.71.1.2"
  request.env["HTTP_HOST"] = "git.gittit.it"
  get "/thing/1"
end 
```

这也曾经在 Rails 2 中工作，但不再在 Rails 3 中工作。作为最终测试，我尝试了一个解析为裸 Rack 应用程序的路由，结果相同。

如何在 Rails 3 控制器测试中欺骗主机和 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:43:52.033

根据您在控制器中访问它的方式......这对我来说效果很好：

```
request.stub!(:remote_ip).and_return('192.71.1.2') 
```

当我`request.remote_ip`在控制器中使用时，我得到 192.71.1.2

# java - 图像视图列表视图

> ID：13204332
> 
> 赞同：1
> 
> 时间：2012-11-02T23:16:08.833
> 
> 标签：java, android, arrays, image, android-listview

我有个问题。

我制作了一个具有不同名称、id、类型的数据库（数组）。我还制作了读取名称的字符串（名称是一个字符串：

```
public static String[] getAllPokemonsInStrings() {
    ArrayList<String> items = new ArrayList<String>();
    for(Pokemon p : Pokemon.values()){
        if(p.getName() != null){
            items.add(p.getName());
        }
    }
    return items.toArray(new String[]{});
} 
```

这是创建它的位：

```
public class Test3 extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label,      Types.getAllPokemonsInStrings() ));

    }
} 
```

每行的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"  
    android:orientation="vertical"
    android:id="@+id/LinearLayout">  

    <ImageView
        android:id="@+id/sprite"
        android:layout_width="96dp"
        android:layout_height="96dp"
        android:contentDescription="@string/sprite"
        android:src="@drawable/p002" />

    <LinearLayout
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"  
        android:orientation="vertical">

        <TextView xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/label"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="10dip"
            android:textSize="16dip"
            android:textStyle="bold" />

    </LinearLayout>
</LinearLayout> 
```

有没有办法改变每行的图像资源（它是一个int），从数组中加载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:21:08.823

对的，这是可能的。不过，您需要创建自己的适配器类和 Override `getView()`。我建议您阅读本[教程](http://developerlife.com/tutorials/?p=327)，了解如何创建自定义适配器。

# mysql - 是否可以根据某些条件选择特定值？

> ID：13204335
> 
> 赞同：1
> 
> 时间：2012-11-02T23:16:20.387
> 
> 标签：mysql

我想知道是否可以根据给定行是否匹配某些条件从 myTable 中选择“真”或“假”。因此，例如，如果用户在名为 phone_number 的列中有或没有值，我会这样做......

```
select (**some magic here**) as has_phone_number from users; 
```

结果将是一堆“真”或“假”

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:19:04.847

```
IF (phone_number != '', true, false) as has_phone_number 
```

甚至

```
phone_number != '' as has_phone_number 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:20:21.223

使用案例陈述。

`SELECT CASE WHEN Phone IS NULL THEN FALSE ELSE TRUE END AS has_phone_number FROM users;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:19:58.587

```
select
  phone = '' as has_phone_number
from users 
```

# magento - Magento - Varien Grid - 总计整个集合

> ID：13204336
> 
> 赞同：1
> 
> 时间：2012-11-02T23:16:42.897
> 
> 标签：magento, grid

我使用各种网格功能创建了一个自定义产品网格，并将其用作订单。基本上，有一个产品名称、产品价格和一个输入字段供用户输入他们想要的产品数量。

有数千种产品，我需要对用户选择的产品进行小计。

我得到的最接近的是将以下内容添加到 Grid.php ...

```
 protected function _afterLoadCollection()
{
    $collection = $this->getCollection()->load();
    $total = 0;
    if ($collection) {
            foreach($collection as $item)  {
                    $itemPrice = $item->getPrice();
                    $itemQty = $item->getQty();
                    $total = $total + ($itemPrice * $itemQty);
            }
       echo $total;
    }
} 
```

但是，结果会受到当前限制的影响，因此只计算当前页面的总和。

有没有办法解决这个问题，或者有更好的方法来获得两列的总和？

在此先感谢，我已经坚持了好几天了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:49:30.213

你可以试试这个清除收藏补充，并为第一页设置一个很大的限制

```
$_productCollection = $this->getLoadedProductCollection();
$_productCollection->clear();
$_productCollection->setPage(1,99999); 
```

# knockout.js - knockoutjs - 在视图模型中使用循环引用进行调试

> ID：13204337
> 
> 赞同：2
> 
> 时间：2012-11-02T23:17:09.190
> 
> 标签：knockout.js

视图模型有一个循环引用，通过设计，`<pre data-bind="text: ko.toJSON($data)"></pre>`用于调试抛出：

```
Unable to parse bindings.
Message: TypeError: Converting circular structure to JSON;
Bindings value: text: ko.toJSON($data) 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T02:01:56.173

最终是对`JSON.stringify`inside的调用`ko.toJSON`导致您的错误。

控制 JSON 输出的一种方法是`toJSON`在对象上提供一个函数，如下所述：[http](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html) ://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html . 这样您就可以在适当的位置删除循环引用。

您还可以使用其他一些技术来实现这一点。

*   您可以将第二个参数传递给`ko.toJSON`. 这是此处描述的`replacer`选项：`JSON.stringify`

    [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)。

    例如，您可以传递一组属性以包括：

    ```
    ko.toJSON(myobject, ["one", "two", "three"]) 
    ```

*   您可以将不想转换为 JSON 的属性附加为“sub”-observable，例如：

    ```
    this.data = ko.observable();
    this.data.parent = parent; 
    ```

在这种情况下，`data`将变成`JSON`，但`parent`会消失，因为它是可观察对象上的一个属性，已经被解包为其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:24:33.703

如果您愿意添加对 Dojo 的引用（可能只是为了调试），那么 dojox.json.ref.toJson 似乎能够使用循环引用序列化 JSON 对象。

在这种情况下，您可以这样做：

```
<pre data-bind="text: dojox.json.ref.toJson($data)"></pre> 
```

还有一个值得检查的库，它可能提供比 dojo 更轻量级的解决方案：http: [//mixu.net/snapshot/](http://mixu.net/snapshot/)

# java - Java 小程序仅部分绘制

> ID：13204339
> 
> 赞同：0
> 
> 时间：2012-11-02T23:17:22.147
> 
> 标签：java, drawing, buffer, render, paint

我是 Java 小程序编程的新手，如果这是一个非常基本的问题，请原谅，但我已经广泛搜索了它，只发现了半相关的问题和解决方案。

我正在编写一些几何算法的简单演示，当我编写时`repaint()`，只有我的一些图形基元被渲染到屏幕上。每次我的小程序重绘时，我的线条和椭圆的一个看似随机的子集都会被绘制出来。唯一的模式*是*渲染的图元总是从绘图的开头开始。IE，有时会画图元0-2，有时会画0-5，有时会画整批。

我想指出，据我所知，这不是可以通过双缓冲解决的经典“闪烁”。据我了解，闪烁是指您可以在短时间内看到部分渲染的小程序在完成渲染之前。然而，就我而言，如果它没有完成渲染，除非我再次幸运，否则它*永远不会完成。*`redraw()`我试过双缓冲：

```
public void update(Graphics g) {
    Graphics offgc;
    Image offscreen = null;
    Dimension d = size();

    // create the offscreen buffer and associated Graphics
    offscreen = createImage(d.width, d.height);
    offgc = offscreen.getGraphics();
    // clear the exposed area
    offgc.setColor(getBackground());
    offgc.fillRect(0, 0, d.width, d.height);
    offgc.setColor(getForeground());
    // do normal redraw
    paint(offgc);
    // transfer offscreen to window
    g.drawImage(offscreen, 0, 0, this);
} 
```

但这似乎没有任何帮助。如果它有用，这里有一些正在发生的事情的照片。这是它应该看起来的样子：

![满的](../Images/4d078dd3c07d74bd92aca5d3874d666c.png)

但大多数时候它看起来像这样：

![部分1](../Images/de316782cfc2f52ef97a7f33652d03cd.png)

或这个：

![部分2](../Images/30a1207cd372f7758e00b55d76d650ae.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:41:39.970

这不是双缓冲应该如何工作，也不是绘画过程是如何工作的。

*   不要覆盖`update`.
*   尽可能不要覆盖`paint`顶级容器（如 Applet/JApplet/Frame/JFrame）
*   使用可以渲染的“绘画”面板，最好是`JPanel`. 摆动组件提供双缓冲支持
*   双缓冲区应该在绘制周期之外绘制，并且只在需要时更新，这使得整个绘制过程更快，因为您没有不必要地重新渲染内容。
*   当需要更新缓冲区时，首先渲染到临时缓冲区，这样可以确保在更新时可能发生的任何重绘都不会过早地反射回屏幕......

![在此处输入图像描述](../Images/7fd9af3e0092a0c4588da800c0060fe5.png)

```
public class TestPaintGeometry {

    public static void main(String[] args) {
        new TestPaintGeometry();
    }

    public TestPaintGeometry() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ShowPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ShowPane extends JPanel {

        private GeometryPane geoPane;

        public ShowPane() {
            setLayout(new BorderLayout());

            geoPane = new GeometryPane();
            JButton redrew = new JButton("Redraw");
            add(geoPane);
            add(redrew, BorderLayout.SOUTH);
            redrew.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    geoPane.redrew();
                }
            });
        }            
    }

    public class GeometryPane extends JPanel {

        private BufferedImage buffer;

        public void redrew() {
            Path2D.Float path = new Path2D.Float();
            int width = getWidth();
            int height = getHeight();

            int points = Math.max(10, (int) Math.round(Math.random() * 100));
            for (int index = 0; index < points; index++) {
                int x = (int) Math.round(Math.random() * width);
                int y = (int) Math.round(Math.random() * height);
                if (index > 0) {
                    path.lineTo(x, y);
                } else {
                    path.moveTo(x, y);
                }
            }

            BufferedImage tmp = createCompatibleImage(width, height);
            Graphics2D g2d = tmp.createGraphics();
            g2d.setColor(Color.BLACK);
            g2d.draw(path);
            g2d.dispose();

            buffer = tmp;
            repaint();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (buffer != null) {
                int x = (getWidth() - buffer.getWidth()) / 2;
                int y = (getHeight() - buffer.getHeight()) / 2;
                g.drawImage(buffer, x, y, this);
            }
        }
    }

    public static GraphicsConfiguration getGraphicsConfiguration() {
        return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
    }

    public static BufferedImage createCompatibleImage(int width, int height) {
        return createCompatibleImage(width, height, Transparency.TRANSLUCENT);
    }

    public static BufferedImage createCompatibleImage(int width, int height, int transparency) {
        BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);
        image.coerceData(true);
        return image;
    }
} 
```

这使您可以将其部署`GeometryPane`到`JFrame`或`JAppelt`，因为它不受其继承遗产的限制...

# javascript - 从带有参数的链接提交表单

> ID：13204341
> 
> 赞同：1
> 
> 时间：2012-11-02T23:17:31.053
> 
> 标签：javascript, html, forms, parameters, hyperlink

我正在尝试和搜索几天，但找不到答案。
我的问题是：我使用超链接和 Javascript 提交表单，但我还需要提交带有链接的参数。代码如下所示：

```
<form action="Action.jsp" method="post" id="form-id">
  <input .../>
  ...
  <c:forEach items="${items}" var="item" varStatus="vs">
    <a href="Action.jsp?id=${vs.count}" 
       onclick="javascript:document.forms['form-id'].submit(); return false">
       ${vs.count}
    </a>
  </c:forEach>
</form> 
```

如果我离开了`return false`，参数 id 会被传输，但其他`<input .../>`参数不会被传输，反之亦然。你怎么看我不能使用`<input type="hidden" .../>`参数，因为我只需要链接的参数。

如果你能帮助我，我将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:24:19.863

您还需要将参数添加到表单的 action 属性中。这决定了提交时页面提交到哪个 URL。

因此，当单击链接到它的行为方式时，您可能需要使用 javascript 来更改此属性值。

```
<form action="Action.jsp?id=${vs.count}" method="post" id="form-id"> 
```

当您删除`return false`时，您实际上所做的只是在表单快速提交后获取链接的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:41:21.023

如果`input`在循环外添加隐藏，则可以在提交之前设置该输入的值：

```
<form action="Action.jsp" methode="post" id="form-id">
  <input .../>
  <input type="hidden" id="button-id"/>
  ...
  <c:forEach items="${items}" var="item" varStatus="vs">
    <a href="Action.jsp" 
       onclick="javascript:document.getElementById('button-id').value=${vs.count};document.forms['form-id'].submit(); return false">
       ${vs.count}
    </a>
  </c:forEach>
</form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T00:08:32.847

如果您不需要*锚点，您可以在不使用 JavaScript 的情况下通过使用*[`button`元素](http://www.w3schools.com/tags/att_button_value.asp)提交来解决此问题：

```
<button name="id" type="submit" value="${vs.count}">${vs.count}</button> 
```

请注意，Internet Explorer 8 之前的版本将提交`<button>`和`</button>`标记之间的文本，而其他浏览器将提交该值。

# hadoop - 如何“破解”HBase

> ID：13204343
> 
> 赞同：2
> 
> 时间：2012-11-02T23:17:46.170
> 
> 标签：hadoop, hbase, simulation, load-testing, stress-testing

我们正在尝试一些工具来拍摄 Hbase 的快照并恢复它。

我没有实时运行 HBase 的经验，所以我不知道我们将来会遇到什么问题，这可能会使 HBase 处于不一致的状态。

有谁知道如何模拟现实生活来破坏我们的 HBase 数据来测试我们的快照？任何事情都值得赞赏，比如糟糕的代码、糟糕的 shell 命令甚至拔掉网络。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:39:19.070

*   将具有大值（Megabyes）的键存储在循环中，以免磁盘空间不足
*   Hadoop 版本与随附的版本不匹配
*   将操作系统上允许打开的文件数设置为非常低的数字
*   将 JVM 内存参数设置为非常低的值（刚好足以启动 HBase）并使用查询对其进行重载
*   将 JVM 内存参数设置为非常高的值以导致密集交换
*   关闭端口或硬重启节点
*   软重启节点

我能想到的一些事情:-)

# php - Nesuite PHP 自定义记录

> ID：13204345
> 
> 赞同：0
> 
> 时间：2012-11-02T23:18:08.793
> 
> 标签：php, netsuite

我已经下载了 2012_2 PHP Toolkit for Netsuite。如果文档很少或没有文档，如果有人可以让我先了解如何连接到在 Netsuite 中创建的自定义记录列表，那就太好了

该列表是netsuite中列表->支持下的实验室。

通过 PHP，我想将数据输入到该列表中，我不需要整个代码，我只需要先了解如何连接到我在 netsuite 中创建的自定义记录。我有自定义记录的内部 id 和 netsuite 中自定义记录的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:58:02.083

供其他人稍后参考，这可能会有所帮助

```
$service = new NetSuiteService();

// Create a object for lab name in netsuite
$labName                            = new SelectCustomFieldRef();
$labName->value                     = new ListOrRecordRef();
$labName->value->internalId         = $lab_number; // your input
$labName->internalId                = "xxxxxx"; // internal id of the input in Netsuite

$labCustomRecord                                = new CustomRecord();
$labCustomRecord->recType                       = new RecordRef();
$labCustomRecord->customForm                    = "xxxx"; // form id
$labCustomRecord->recType->internalId           = "xx"; // internal id
$labCustomRecord->customFieldList               = new CustomFieldList();
$labCustomRecord->customFieldList->customField  = $labName

$addRequest = new AddRequest();
$addRequest->record = $labCustomRecord;

if(!$addResponse[$i]->writeResponse->status->isSuccess) {
    echo "<pre>"; print_r("Error"); echo "</pre>"; exit();
} else {
    echo "<pre>"; print_r("Success"); echo "</pre>"; exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:58:17.647

以下是有关如何使用 PHP Toolkit 2012.2 为自定义记录类型添加新记录的示例代码

```
//create an instance of the fields of the custom record 
$customFieldList = new StringCustomFieldRef();
$customFieldList->internalId = "custrecord_name";
$customFieldList->value = "Test from PHP toolkit";
$basicCustomRecord = new CustomRecord();
$basicCustomRecord->name = "PHP Toolkit 2012.2";
$basicCustomRecord->recType = new RecordRef();
$basicCustomRecord->recType->internalId = "14"; //Record Type's internal ID (Setup > Customization > Record Types > Basic Record Type (Internal ID=14)
$basicCustomRecord->customFieldList = new CustomFieldList();
$basicCustomRecord->customFieldList->customField = $customFieldList;
$addRequest = new AddRequest();
$addRequest->record = $basicCustomRecord;
$addResponse = $service->add($addRequest);
if (!$addResponse->writeResponse->status->isSuccess) {    echo "ADD ERROR";    exit();} 
else {    echo "ADD SUCCESS, id " . $addResponse->writeResponse->baseRef->internalId;}
?> 
```

SuiteAnswers 中提供了相同的代码。SuiteAnswers 中还有许多其他 PHP Toolkit 2012.2 示例代码。如果您有时间，可以查看这些代码以供将来参考。

问候！

# installation - 创建安装程序包

> ID：13204349
> 
> 赞同：1
> 
> 时间：2012-11-02T23:18:20.400
> 
> 标签：installation

所以我有一个编译的matlab代码，'Example.exe'......我想创建一个安装程序包，它执行以下操作：

我的 exe 文件将驻留在网络驱动器上。

我的安装程序会首先询问用户安装路径。

然后它将在给定路径中复制exe（以及其他一些支持文件）......如果文件夹已经存在，它将要求用户进行覆盖确认。

复制完成后，我的安装程序会询问用户是否要安装 MCR 并相应地安装（或不安装）。

一切完成后，桌面上会创建一个exe的快捷方式。

我的问题是，是否有一些安装程序包生成器可以完成所有这些？我了解 matlab 可以创建一个安装程序包，但我希望从网络驱动器复制我的文件。我也没有 Visual Studio，所以无法创建 msi。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T10:22:32.467

有一种简单的方法可以做到这一点，您需要一个名为 IExpress 的软件，它可以使用提供的接口（IExpress 向导）创建自解压可执行文件 (.EXE) 或压缩的 Cabinet (.CAB) 文件。它包含在所有版本的 Windows 中（我认为..）。要运行 IExpress 向导，请转到本地驱动器：Windows\System32，搜索“iexpress”然后运行程序。然后...

请按照下列步骤操作：
1\. 运行 iexpress.exe
2\. 创建一个新的“自解压指令”文件
3\. 仅解压文件
4\. 指定标题、提示用户选项、许可证等
5\. 开始将文件添加到包中
7\. 指定其他选项（窗口、消息）
8\. 输入您希望包裹所在的路径。

然后你几乎完成了，创建你的包（可能需要几分钟），分发它，上传它等等。
有关详细信息，请访问[http://www.makeuseof.com/tag/how-to-make-an-exe-installation-file/](http://www.makeuseof.com/tag/how-to-make-an-exe-installation-file/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:30:26.693

没有简单的方法可以做到这一点。但是如果你紧紧地束缚在 Windows 平台上，你绝对可以学习 Windows Installer 技术。它与 Visual Studio 无关！

只需下载[WiX 工具集](http://wix.codeplex.com/downloads/get/482065)（它是免费且开源的！）并学习有关 Windows Installer 的 MSDN 文档。

但这是复杂的方式，请记住。您可以花几个月的时间学习如何制作出色的 Windows 安装程序。

当然，您可以使用 Inno Setup 或 NSIS，但我不建议这样做，因为它们重新设计了安装程序技术，而不是原生 Windows Installer。

如果你愿意，我可以通过 Skype 或类似的方式了解你。:-) 或者（不是很好的提议？）我可以为您编写安装程序并将所有代码发送给您并描述其中的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-21T00:28:48.913

使用 iExpress！可从 win xoxo 及以上 (xp)

使用windows 8 pro，你可以用你的声音做一个包！仅适用于 win 8 或 8.1 pro。

# python - 如何将字符串列表转换为字符串中单个字符的子列表列表？

> ID：13204351
> 
> 赞同：2
> 
> 时间：2012-11-02T23:19:02.537
> 
> 标签：python, list, append, sublist

所以我开始：

```
['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN'] 
```

而且我要：

```
[['B', 'L', 'U', 'E'], ['O', 'R', 'A', 'N', 'G', 'E'], ['Y', 'E', 'L', 'L', 'O', 'W'], ['G', 'R', 'E', 'E', 'N'], ['B','L', 'A', 'C', 'K'], ['P', 'U', 'R', 'P', 'L', 'E'], ['B', 'R', 'O', 'W','N']] 
```

我尝试了这个，因为它看起来会产生我想要的东西，但它一直告诉我我有一个错误。AttributeError：“NoneType”对象没有“附加”属性：

```
first_list = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']
list_1 = []

for i in range (len(first_list)):
    list_1 = list_1.append(list(first_list[i]))

return list_1 
```

我一直在使用“.append”并在其他迭代中继续使用“+”时遇到问题，但这只是给了我所有字符的长列表，而不是字符子列表的列表。感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T23:23:30.580

内置[`list()`](http://docs.python.org/2/library/functions.html#list)函数从可迭代对象创建列表。由于字符串是一个可迭代的对象，我们可以将它传递`list()`给创建单个字符的列表。要对每个单词执行此操作，我们可以使用[列表推导](http://carlgroner.me/Python/2011/11/09/An-Introduction-to-List-Comprehensions-in-Python.html)：

```
>>> words = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']
>>> [list(word) for word in words]
[['B', 'L', 'U', 'E'], ['O', 'R', 'A', 'N', 'G', 'E'], ['Y', 'E', 'L', 'L', 'O', 'W'], ['G', 'R', 'E', 'E', 'N'], ['B', 'L', 'A', 'C', 'K'], ['P', 'U', 'R', 'P', 'L', 'E'], ['B', 'R', 'O', 'W', 'N']] 
```

编辑：您得到的属性错误是因为`append()`列表的方法返回无。由于您将方法的输出分配给`list1`变量，因此您在循环的第一次使用 None 覆盖列表。由于 None 没有`append`方法，因此在下一次循环时会出现错误。删除此分配使您的代码工作：

```
>>> first_list = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']
>>> list_1 = []
>>> for i in range (len(first_list)):
...     list_1.append(list(first_list[i]))
... 
>>> list_1
[['B', 'L', 'U', 'E'], ['O', 'R', 'A', 'N', 'G', 'E'], ['Y', 'E', 'L', 'L', 'O', 'W'], ['G', 'R', 'E', 'E', 'N'], ['B', 'L', 'A', 'C', 'K'], ['P', 'U', 'R', 'P', 'L', 'E'], ['B', 'R', 'O', 'W', 'N']] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:27:23.733

```
>>> map(list,first_list)
[['B', 'L', 'U', 'E'], ['O', 'R', 'A', 'N', 'G', 'E'], ['Y', 'E', 'L', 'L', 'O', 'W'], ['G', 'R', 'E', 'E', 'N'], ['B', 'L', 'A', 'C', 'K'], ['P', 'U', 'R', 'P', 'L', 'E'], ['B', 'R', 'O', 'W', 'N']] 
```

`list`构造函数应用于原始列表的每个元素。原始列表的元素是字符串，是可迭代的。因此`list`，只需将字符串视为迭代器，因此最终它包含字母（因为字符串在迭代时将字母作为元素产生）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:24:52.097

您可以简单地将字符串强制转换为列表以获取字符串字符的列表。

```
words = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']
split_words = [list(word) for word in li] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T23:29:51.343

您现有代码不起作用的唯一原因是`list.append`修改了一个列表，并返回`None`. 所以：

```
for i in range (len(first_list)):
    list_1 = list_1.append(list(first_list[i])) 
```

第一次，您将第一个单词添加到 list_1，然后将 list_1 设置为`None`. 所以下次通过时，你会得到一个`AttributeError`.

只需这样做：

```
for i in range (len(first_list)):
    list_1.append(list(first_list[i])) 
```

或者使用一个不会就地修改列表，而是返回一个新列表的函数：

```
for i in range (len(first_list)):
    list_1 = list_1 + [list(first_list[i])] 
```

`range(len(first_list))`如果你想要的索引`i`是`first_list[i]`;循环遍历有点傻。你可以直接循环`first_list`。（即使您*确实*需要`i`其他目的，也可以循环`enumerate(first_list)`。）

然而，正如许多人所指出的那样，使用列表推导几乎总是比尝试使用显式循环构建列表要好。

事实上，造成这种情况的众多原因之一是您不必记住`append`vs. `extend`，哪些函数会发生变异，哪些会返回新值，等等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T23:25:31.940

这将做：

```
myList = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']

res = [[i for i in s] for s in myList]

res
[['B', 'L', 'U', 'E'], ['O', 'R', 'A', 'N', 'G', 'E'], ['Y', 'E', 'L', 'L', 'O', 'W'],    ['G', 'R', 'E', 'E', 'N'], ['B', 'L', 'A', 'C', 'K'], ['P', 'U', 'R', 'P', 'L', 'E'], ['B', 'R', 'O', 'W', 'N']] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T23:27:08.463

您可以`list()`使用以下方式申请每个项目`map`：

```
>>> words = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']
>>> map(list, words)
[['B', 'L', 'U', 'E'], ['O', 'R', 'A', 'N', 'G', 'E'], ['Y', 'E', 'L', 'L', 'O', 'W'], ['G', 'R', 'E', 'E', 'N'], ['B', 'L', 'A', 'C', 'K'], ['P', 'U', 'R', 'P', 'L', 'E'], ['B', 'R', 'O', 'W', 'N']] 
```

虽然我不确定你为什么需要这样做。字符串和列表的行为几乎相同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T23:28:59.390

您当前的解决方案不起作用，因为`list.append()`返回`None`，并且您将返回的结果分配`list_1.append()`给`list_1`，因此在第二次迭代中您得到属性错误。

以下是修复当前代码的方法：

```
first_list = ['BLUE', 'ORANGE', 'YELLOW', 'GREEN', 'BLACK', 'PURPLE', 'BROWN']
list_1 = []
for i in range(len(first_list)):
    list_1.append(list(first_list[i])) 
```

更好的解决方案是直接遍历列表中的项目：

```
for s in first_list:
    list_1.append(list(s)) 
```

但是最好的方法是使用列表理解或映射，就像其他答案一样。

# c++ - 是否有一种直观的方式来检查标志和状态？

> ID：13204354
> 
> 赞同：1
> 
> 时间：2012-11-02T23:19:15.797
> 
> 标签：c++, enums, flags, enum-flags, bitflags

找不到与我的案例相关的答案，所以我将尝试解释我的情况：

我有以下代码：

```
enum Flags {
    OnlySpaces      = 1 <<  0,

    valComment      = 1 <<  1,
    valCommentBlock = 1 <<  2,
    valLabelName    = 1 <<  3,
    valVariableName = 1 <<  4,
    valFunctionName = 1 <<  5,

    invSyntax       = 1 << 32,

    fInVarLab       = valLabelName|valVariableName,
    fInIdentifier   = valLabelName|valVariableName|valFunctionName,
    fInCommentBlock = OnlySpaces|valCommentBlock,

    initState       = OnlySpaces|fInIdentifier|valComment,
};

int lexStatus = initState;

for (int i = 0; sc.More(); sc.Forward(), i++) {

    if (sc.atLineStart) {
        if (lexStatus & fInCommentBlock != fInCommentBlock) // Here is the problem
            sc.SetState(DEFAULT);

        lexStatus = initState;
    }
 ... // More code
 } 
```

我的代码用于对文档进行词法分析，并且仅当我不在评论块中时才尝试执行操作。问题是，当我不在评论中时，上面的语句会返回完全相反的结果......

以下语句正确地完成了工作，但似乎相当违反直觉：

`if (lexStatus & fInCommentBlock == fInCommentBlock)`

所以问题是：

*   为什么？为什么它的行为与我的预期完全相反？

由于运算符优先级`if ((lexStatus & fInCommentBlock) != fInCommentBlock)`修复了问题

*   我正在接近正确的方式吗？
*   有没有更好的办法？
*   有没有办法确保每个标志都有不同的价值？

添加最后一个问题是因为出于某种原因`lexStatus & fInCommentBlock`，即使我没有在代码中的任何位置设置它们，也设置了一些位......

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:09:48.190

要解决您的第一个问题：您的问题是运算符优先级和对位运算符如何工作的理解。

`if (lexStatus & fInCommentBlock == fInCommentBlock)`

这仅对您有用，因为`==`优先级高于`&`所以`fInCommentBlock == fInCommentBlock`总是正确的，因此与 相同`lexStatus & 1`，与 相同`lexStatus & OnlySpaces`。`lexStatus == initState`当因为`initState`包含标志时，这将是正确的`OnlySpaces`。

> 有没有更好的办法？

您希望将按位比较抽象为一两个辅助函数。

```
int LexStatus_Is(int flags) { return (lexStatus & flags) == flags; }
int LexStatus_IsNot(int flags) { return (lexStatus & flags) != flags; } 
```

然后你可以写：

`if (LexStatus_IsNot(fInComment))`

这会更直观。

# ios - 奇怪的亮点 Mobile Safari

> ID：13204356
> 
> 赞同：0
> 
> 时间：2012-11-02T23:19:42.440
> 
> 标签：ios, html, css, uiwebview, mobile-safari

我对高光有一些问题。

这是我的 CSS 代码：

```
html {
            -webkit-tap-highlight-color: rgba(0,0,0,0.7);
            -webkit-touch-callout: none;
        } 
```

这是我的 HTML 代码：

```
<a href="javascript: location.href = 'level://?id=123456';">
    <div class="Box" id="Box0">
        <table class="BoldText" style="margin:8px;">
            <tr>
                <td valign="top" width="50">
                    <div class="ProfileImage">
                        <div style="background:url(<url>) top left no-repeat;"></div>
                    </div>
                </td>
                <td>gustaf98 published a level
                    <div style="width:220px; margin-top:4px;" class="lightText">Skiftnyckel</div>
                </td>
            </tr>
        </table>
    </div>
</a> 
```

这是当我在 UIWebView 中触摸 iPhone 上的框时的结果：

![预习](../Images/d2476eca5d08820c9dcfb28458c878c1.png)

我的问题是，我怎样才能在整个盒子上获得黑色高光？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:23:37.837

根据您的 CSS，您已将此应用于整个 HTML，而不是特定容器。你有这个工作的例子，或者一个链接？

尝试将其专门应用于要突出显示的框。

例如...

```
.box {
        -webkit-tap-highlight-color: rgba(0,0,0,0.7);
        -webkit-touch-callout: none;
    } 
```

# linux - 从本地 SVN 存储库自动更新软件

> ID：13204358
> 
> 赞同：1
> 
> 时间：2012-11-02T23:19:58.167
> 
> 标签：linux, svn, cron, auto-update

我需要在我的 Linux 机器上创建一个 cron 作业，以自动检查通过 Subversion 维护的某些系统关键软件的新版本。我已经完成了结帐，所以现在我只需要更新源代码的本地副本并使用 cron 脚本定期从最新版本构建。

因此，问题是，是否有一种简单的方法可以确定软件的新版本是否出现在本地存储库中，可能可以选择查看其中一个`branches`或`tags`子目录，*以及*获取子目录的路径最新版本（在`branches`或中`tags`），也许还应用自定义关键字，例如“安全”来过滤掉任何非安全更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:33:35.833

您可以编写一个脚本来调用`svn info`和解析修订和/或时间戳以确定是否有更新。示例输出：

```
$ svn info http://svn.red-bean.com/repos/test/readme.doc
Path: readme.doc
Name: readme.doc
URL: http://svn.red-bean.com/repos/test/readme.doc
Repository Root: http://svn.red-bean.com/repos/test
Repository UUID: 5e7d134a-54fb-0310-bd04-b611643e5c25
Revision: 1
Node Kind: file
Schedule: normal
Last Changed Author: sally
Last Changed Rev: 42
Last Changed Date: 2003-01-14 23:21:19 -0600 (Tue, 14 Jan 2003)
Lock Token: opaquelocktoken:14011d4b-54fb-0310-8541-dbd16bd471b2
Lock Owner: harry
Lock Created: 2003-01-15 17:35:12 -0600 (Wed, 15 Jan 2003)
Lock Comment (1 line):
My test lock comment 
```

您可以轻松地在 URL 中包含一个分支/标签，并使用`-R`开关来获取这些路径下的路径列表。从那里，您可以遍历第一级路径并检查每个路径的修订，以确定是否有新路径。注意输出包含注释、最后更改的时间戳、修订和节点类型；这应该是使脚本正常工作所需的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T01:04:24.390

*   如果“...在本地存储库中...”的意思是“在我可以管理和配置的 Subversion 服务器中”，那么：

    *   编写提交后挂钩，它将查看 /tags|/branches ( `svnlook dirs-changed REPO-PATH`, fe) 的变化并在需要时运行一些操作
*   如果您只有普通的远程访问 repo，您​​可以：

    *   工作副本中有最新标签 (?)
    *   检查 cron 中存储库 /tags 的日志（或按需求）

之后，您将解析结果`svn info`并`svn log -q REPO-URL/tags/ -v -l 1`检测新标签的出现，您可以切换|重新定位+更新或 mkdir+checkout

**样本：**

标签 1.0

```
>svn info
Path: .
Working Copy Root Path: Z:\1.0
URL: http://mayorat.ursinecorner.ru:8088/svn/Hello/tags/1.0
Repository Root: http://mayorat.ursinecorner.ru:8088/svn/Hello
Repository UUID: 65c3f143-cc60-1d4e-9546-1f0378d96c08
Revision: 34
Node Kind: directory
Schedule: normal
Last Changed Author: lazybadger
Last Changed Rev: 11
Last Changed Date: 2010-07-17 04:45:05 +0600 (Сб, 17 июл 2010) 
```

日志

```
>svn log -q http://mayorat.ursinecorner.ru:8088/svn/Hello/tags/ -v -l 1
------------------------------------------------------------------------
r22 | lazybadger | 2010-07-17 05:31:00 +0600 (Сб, 17 июл 2010)
Changed paths:
   A /tags/1.1 (from /trunk:21)
------------------------------------------------------------------------ 
```

或 XML 版本

```
>svn log -q http://mayorat.ursinecorner.ru:8088/svn/Hello/tags/ -v -l 1 --xml --incremental
<logentry
   revision="22">
<author>lazybadger</author>
<date>2010-07-16T23:31:00.513125Z</date>
<paths>
<path
   text-mods="false"
   kind="dir"
   copyfrom-path="/trunk"
   copyfrom-rev="21"
   action="A"
   prop-mods="true">/tags/1.1</path>
</paths>
</logentry> 
```

在任何情况下，从日志中提取修订号，如果它超过 WC 的修订（“Last Changed Rev”）：我们必须有新版本。URL 是 Repository Root+（来自 XML 日志的路径值 | 使用文本日志中的 /tags 解析的行）

# css - 在 GWT 中，是否可以将图像小部件缩放到小于其原始大小？

> ID：13204360
> 
> 赞同：1
> 
> 时间：2012-11-02T23:20:13.813
> 
> 标签：css, image, gwt, widget

我想知道是否可以将图像小部件缩小到小于图像资源本身的大小。我尝试了以下方法：

```
imageResource.setSize(size, size);
imageResource.setPixelSize(size, size); 
```

我也尝试在 CSS 文件中重新调整大小。但是当我将图像的大小设置为小于原始图像时，它只是将其裁剪下来，实际上并没有缩小它。在我看来，解决方案是使用高分辨率、较小的图像，如果需要，我可以放大，但我觉得我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:29:47.897

您可以使用 CSS3 background-size 属性来缩放图像：

[http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

请注意，某些非常旧的浏览器不支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:52:58.497

你也可以试试，

```
ImageResorce myImage = new ImageResource();
myImage.getElement().setAttribute("height","20px");
myImage.getElement().setAttribute("width","20px"); 
```

欢呼！

# c++ - C++ 的 istream::eof() 的不一致是规范中的错误还是实现中的错误？

> ID：13204364
> 
> 赞同：9
> 
> 时间：2012-11-02T23:20:32.877
> 
> 标签：c++, iostream

以下程序演示了 std::istream（特别是在我的测试代码中，std::istringstream）设置 eof() 的方式不一致。

```
#include <sstream>
#include <cassert>

int main(int argc, const char * argv[])
{
    // EXHIBIT A:
    {
        // An empty stream doesn't recognize that it's empty...
        std::istringstream stream( "" );
        assert( !stream.eof() );        // (Not yet EOF. Maybe should be.)
        // ...until I read from it:
        const int c = stream.get();
        assert( c < 0 );                // (We received garbage.)
        assert( stream.eof() );         // (Now we're EOF.)
    }
    // THE MORAL: EOF only happens when actually attempting to read PAST the end of the stream.

    // EXHIBIT B:
    {
        // A stream that still has data beyond the current read position...
        std::istringstream stream( "c" );
        assert( !stream.eof() );        // (Clearly not yet EOF.)
        // ... clearly isn't eof(). But when I read the last character...
        const int c = stream.get();
        assert( c == 'c' );             // (We received something legit.)
        assert( !stream.eof() );        // (But we're already EOF?! THIS ASSERT FAILS.)
    }
    // THE MORAL: EOF happens when reading the character BEFORE the end of the stream.

    // Conclusion: MADNESS.
    return 0;
} 
```

因此，当您在实际文件结尾*之前*读取字符时， eof() “触发” 。但如果流为空，它只会在您实际尝试读取字符时触发。eof() 的意思是“你只是想读完结尾吗？” 或者“如果你再读一遍，你会读到最后吗？” 答案是不一致的。

此外，断言是否触发取决于编译器。例如，Apple Clang 4.1 触发断言（在读取前面的字符时引发 eof()）。例如，GCC 4.7.2 没有。

这种不一致使得很难编写明智的循环来读取流，但可以很好地处理空流和非空流。

选项1：

```
while( stream && !stream.eof() )
{
    const int c = stream.get();    // BUG: Wrong if stream was empty before the loop.
    // ...
} 
```

选项 2：

```
while( stream )
{
    const int c = stream.get();
    if( stream.eof() )
    {
        // BUG: Wrong when c in fact got the last character of the stream.
        break;
    }
    // ...
} 
```

所以，朋友们，我该如何编写一个循环来解析流，依次处理每个字符，处理每个字符，但是当我们到达 EOF 时，或者在流开始为空的情况下停止而不大惊小怪，永远不会开始？

好吧，更深层次的问题：我有直觉，使用 peek() 可能会以某种方式解决这个 eo​​f() 不一致问题，但是......该死的废话！为什么不一致？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T23:29:45.447

该标志仅用于确定您是否在某些操作**后**`eof()`到达文件末尾。主要用途是在读取合理失败时避免出现错误消息，因为没有更多内容要读取。试图控制一个循环或使用的东西肯定会失败。在所有情况下，您都需要在尝试读取**后**检查读取是否成功。在尝试之前，流无法知道您要阅读的内容。**`eof()`**

 ****的语义`eof()`被彻底定义为“读取流时设置此标志导致流缓冲区返回失败”。如果我没记错的话，找到这个陈述并不容易，但这就是结果。在某些时候，该标准还说，在某些情况下，允许流读取比它必须读取的更多，这可能会导致`eof()`在您不一定期望它时设置。一个这样的例子是读取一个字符：流可能最终检测到该字符和 set 后面没有任何内容`eof()`。

如果你想处理一个空流，这很简单：从流中查看一些东西，只有当你知道它不为空时才继续：

```
if (stream.peek() != std::char_traits<char>::eof()) {
    do_what_needs_to_be_done_for_a_non_empty_stream();
}
else {
    do_something_else();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T00:02:53.077

永远不要`eof`单独检查。

在提取操作期间到达文件结尾时设置该标志（与由 返回的值中的位标志`eof`相同）。如果没有提取操作，则永远不会设置，这就是您的第一个检查返回的原因。`eofbit``rdstate()``eofbit``false`

但是`eofbit`，没有迹象表明操作是否成功。为此，请签`failbit|badbit`入`rdstate()`。`failbit`表示“出现逻辑错误”，并`badbit`表示“出现 I/O 错误”。方便的是，有一个`fail()`函数可以精确返回`rdstate() & (failbit|badbit)`. 更方便的是，有一个`operator bool()`返回的函数`!fail()`。所以你可以做类似的事情`while(stream.read(buffer)){ ...`。

如果操作失败，您可以检查`eofbit`,`badbit`并`failbit`单独找出失败的*原因*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:37:56.223

您使用的是什么编译器/标准 C++ 库？我用 gcc 4.6.3/4.7.2 和 clang 3.1 尝试过，它们都工作得很好（即断言没有触发）。

我认为您应该将此报告为工具链中的错误，因为我对标准的阅读符合您的直觉，即只要 get() 能够返回字符，就不应设置 eof()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T23:38:32.763

从某种意义上说，它不是一个错误，它是预期的行为。直到 输入失败后，您*才*使用 test 的意图。`eof()`它的主要目的是在提取函数内部使用，在早期的实现中，`std::streambuf::sgetc()` 返回的事实`EOF`并不意味着它会在下一次被调用：意图是随时`sgetc()`返回`EOF`（现在 `std::char_traits<>::eof()`，这将被记住，并且流不会再调用streambuf。

实际上，我们确实需要两个`eof()`：一个供内部使用，如上所述，另一个可以可靠地说明失败是由于已到达文件末尾。事实上，给定以下内容：

```
std::istringstream s( "1.23e+" );
s >> aDouble; 
```

无法检测到错误是由于格式错误，而不是流没有更多数据。在这种情况下，内部的 eof 应该返回 true（因为我们已经看到文件结尾，当我们往前看时，我们想要抑制对 `streambuf`提取器函数的所有进一步调用），但外部的应该是 false，因为存在数据（即使在跳过初始空格之后）。

当然，如果您没有实现提取器功能，则`ios_base::eof()`在实际输入失败之前永远不要进行测试。这从来都不是提供任何有用信息的意图（这让人想知道他们为什么定义- 它返回的`ios_base::good()`事实意味着它可以提供也不可靠的信息 untin返回，在这一点上，我们知道它会返回，所以调用它没有意义）。`false``eof()``fail()``true``false`

而且我不确定你的问题是什么。因为流不能提前知道你的下一个输入是什么（例如它是否会跳过空格），它不能提前知道你的下一个输入是否会因为文件结束而失败。采用的成语很明确：尝试输入，*然后*测试是否成功。没有其他方法，因为无法实施其他替代方案。Pascal 的做法不同，但是 Pascal 中的文件是类型化的——你只能从中读取一种类型，因此它总是可以在后台预读一个元素，如果预读失败，则返回文件结尾。没有预先的文件结尾是我们为能够从文件中读取多个类型而付出的代价。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T23:39:37.750

行为有些微妙。 `eofbit`在尝试读取文件末尾之后设置，但这可能会也可能不会导致当前提取操作失败。

例如：

```
ifstream blah;
// assume the file got opened
int i, j;
blah >> i;
if (!blah.eof())
    blah >> j; 
```

如果文件包含`142<EOF>`，则数字序列以文件结尾终止，因此`eofbit`设置为并且提取成功。不会尝试提取`j`，因为已经遇到文件结尾。

如果文件包含`142 <EOF>`，则数字序列以空格终止（提取`i`成功）。 `eofbit`尚未设置，因此`blah >> j`将被执行，它将到达文件末尾而没有找到任何数字，因此它将失败。

请注意文件末尾看起来无害的空白是如何改变行为的。****

# silverlight - Silverlight 5 - 实体框架 5 和域服务排除不受支持的地理类型

> ID：13204365
> 
> 赞同：1
> 
> 时间：2012-11-02T23:20:48.807
> 
> 标签：silverlight, entity-framework, geospatial, silverlight-5.0

我对 Silverlight 非常陌生（这是我的第一个测试应用程序），我正在为使用实体框架的 silverlight 5 应用程序设置域服务进行一些演练。

我有一个“TestApp1”项目和一个“TestApp1.Web”项目，它们是在我创建 Silverlight 项目时生成的。

我在 TestApp1.Web 项目中添加了一个 edmx 模型，并从我拥有的测试数据库中随机挑选了几个表，其中一个包括一个地理列 (GeoLocation)，我看到 EF5 现在支持它（太好了！）但我在我的 Silverlight 项目 (TestApp1) 中出现“不支持的类型”错误，如何在我的域服务中排除 GeoLocation 属性，以便我的 Silverlight 应用程序不会抱怨？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T03:18:04.673

您可以在模型本身中编辑表格|列 - 您尝试过吗？以及设计器文件。虽然你必须小心！

# django - “用户”对象没有属性 is_authenticated

> ID：13204367
> 
> 赞同：5
> 
> 时间：2012-11-02T23:21:06.043
> 
> 标签：django, django-authentication, middleware, django-middleware

我为我的 django 应用程序创建了一个用户模型

```
class User(Model):
    """
    The Authentication model. This contains the user type.  Both Customer and
    Business models refer back to this model.
    """
    email = EmailField(unique=True)
    name = CharField(max_length=50)
    passwd = CharField(max_length=76)
    user_type = CharField(max_length=10, choices=USER_TYPES)
    created_on = DateTimeField(auto_now_add=True)
    last_login = DateTimeField(auto_now=True)

    def __unicode__(self):
        return self.email

    def save(self, *args, **kw):
        # If this is a new account then encrypt the password.
        # Lets not re-encrypt it everytime we save.
        if not self.created_on:
            self.passwd = sha256_crypt.encrypt(self.passwd)
        super(User, self).save(*args, **kw) 
```

我还创建了一个身份验证中间件来使用这个模型。

```
from accounts.models import User
from passlib.hash import sha256_crypt

class WaitformeAuthBackend(object):
    """
    Authentication backend fo waitforme
    """

    def authenticate(self, email=None, password=None):
        print 'authenticating : ', email
        try:
            user = User.objects.get(email=email)
        except User.DoesNotExist:
            user = None

        if user and sha256_crypt.verify(password, user.passwd):
            return user
        else:
            return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None 
```

我已经正确修改了 settings.py 文件，如果我在这个后端添加一些打印语句，我可以看到用户详细信息打印出来。我不记得读过我需要在 django 文档中实现 is_authenticated 。我错过了什么愚蠢的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T10:28:21.440

I'm not quite sure why you have created a new User model instead of using Django's built-in one and adding a linked UserProfile, which is the recommended thing to do (until 1.5 is released, when pluggable user models will be available). However, yes you need to define an `is_authenticated` method, which always returns True: this is exactly what the built-in model does. The reason is that if you have an actual User, it will always be authenticated: otherwise, you will have an AnonymousUser object, whose is_authenticated method always returns False.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:41:35.130

你不必重新发明轮子。只需使用 Django 内置的身份验证系统，就可以省去很多麻烦。您还可以根据需要扩展它或使用不同的身份验证后端。[在这里阅读](https://docs.djangoproject.com/en/dev/topics/auth/#basic-usage)。HTH。

# ruby-on-rails - 具有两个单词名称的模型的 rails-backbone gem 错误：未捕获的类型错误：无法调用未定义的方法“绑定”

> ID：13204368
> 
> 赞同：0
> 
> 时间：2012-11-02T23:21:14.407
> 
> 标签：ruby-on-rails, backbone.js, gem, coffeescript

我正在关注这个示例[https://github.com/codebrew/backbone-rails#example-usage](https://github.com/codebrew/backbone-rails#example-usage)以获取主干导轨 gem。它适用于具有一个单词名称的模型，但`Uncaught TypeError: Cannot call method 'bind' of undefined`如果我尝试对具有两个名称的模型遵循相同的模式，则会出现错误。这是我所做的：

```
rails new blog 
```

然后我将`rails-backbone`gem 添加到 Gemfile

```
bundle install

rails g backbone:install

rails g scaffold FriendRequest sender_gender:string recipient_gender:string

rake db:migrate

rails g backbone:scaffold FriendRequest sender_gender:string recipient_gender:string 
```

我的`app/views/friend_requests/index.html.erb`文件如下所示：

```
<h1>Listing friend_requests</h1>

<table>
  <tr>
    <th>Sender gender</th>
    <th>Recipient gender</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @friend_requests.each do |friend_request| %>
  <tr>
    <td><%= friend_request.sender_gender %></td>
    <td><%= friend_request.recipient_gender %></td>
    <td><%= link_to 'Show', friend_request %></td>
    <td><%= link_to 'Edit', edit_friend_request_path(friend_request) %></td>
    <td><%= link_to 'Destroy', friend_request, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Friend request', new_friend_request_path %>

<div id="friend_requests"></div>

<script type="text/javascript">
  $(function() {
    // Blog is the app name
    window.router = new Blog.Routers.FriendRequestRouter({friend_requests: <%= @friend_requests.to_json.html_safe -%>});
    Backbone.history.start();
  });
</script> 
```

当我点击时，`http://localhost:3000/friend_requests`我收到此错误

```
Uncaught TypeError: Cannot call method 'bind' of undefined 
```

我从控制台复制了代码，其中显示了内部错误。我不确定 StackOverflow 的正确协议是否有这样的错误，但你可以看到它，它被 * 包围。如果有人想编辑这个问题以正确显示，那将不胜感激。

```
(function() {
  var _base,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  (_base = Blog.Views).FriendRequests || (_base.FriendRequests = {});

  Blog.Views.FriendRequests.IndexView = (function(_super) {

    __extends(IndexView, _super);

    function IndexView() {
      this.render = __bind(this.render, this);

      this.addOne = __bind(this.addOne, this);

      this.addAll = __bind(this.addAll, this);
      return IndexView.__super__.constructor.apply(this, arguments);
    }

    IndexView.prototype.template = JST["backbone/templates/friend_requests/index"];

    IndexView.prototype.initialize = function() {
      return this.options.friendRequests.bind('reset', this.addAll);
***Uncaught TypeError: Cannot call method 'bind' of undefined***
    };

    IndexView.prototype.addAll = function() {
      return this.options.friendRequests.each(this.addOne);
    };

    IndexView.prototype.addOne = function(friendRequest) {
      var view;
      view = new Blog.Views.FriendRequests.FriendRequestView({
        model: friendRequest
      });
      return this.$("tbody").append(view.render().el);
    };

    IndexView.prototype.render = function() {
      $(this.el).html(this.template({
        friendRequests: this.options.friendRequests.toJSON()
      }));
      this.addAll();
      return this;
    };

    return IndexView;

  })(Backbone.View);

}).call(this); 
```

`index_view.js.coffee`最后，产生上述错误的咖啡脚本文件是

```
Blog.Views.FriendRequests ||= {}

class Blog.Views.FriendRequests.IndexView extends Backbone.View
  template: JST["backbone/templates/friend_requests/index"]

  initialize: () ->
    @options.friendRequests.bind('reset', @addAll)

  addAll: () =>
    @options.friendRequests.each(@addOne)

  addOne: (friendRequest) =>
    view = new Blog.Views.FriendRequests.FriendRequestView({model : friendRequest})
    @$("tbody").append(view.render().el)

  render: =>
    $(@el).html(@template(friendRequests: @options.friendRequests.toJSON() ))
    @addAll()

    return this 
```

我假设这只是一些简单的事情，比如没有对具有两个名称的模型使用正确的大写或其他约定，但我似乎无法弄清楚。

提前致谢！

编辑 - - -

我只是想到了这一点，但我会密切关注我的`app/views/friend_requests/index.html.erb`文件，因为它是我实际手动编辑代码的地方。其他一切都是由`rails-backbone`gem 自动生成的。

--------编辑#2-------------

根据第一条评论询问 IndexView 的实例化位置，它位于`/app/assets/javascripts/backbone/routers/friend_requests_router.js.coffee`：

```
class Blog.Routers.FriendRequestsRouter extends Backbone.Router
  initialize: (options) ->
    @friendRequests = new Blog.Collections.FriendRequestsCollection()
    @friendRequests.reset options.friendRequests

  routes:
    "new"      : "newFriendRequest"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"        : "index"

  newFriendRequest: ->
    @view = new Blog.Views.FriendRequests.NewView(collection: @friend_requests)
    $("#friend_requests").html(@view.render().el)

  index: ->
    @view = new Blog.Views.FriendRequests.IndexView(friend_requests: @friend_requests)
    $("#friend_requests").html(@view.render().el)

  show: (id) ->
    friend_request = @friend_requests.get(id)

    @view = new Blog.Views.FriendRequests.ShowView(model: friend_request)
    $("#friend_requests").html(@view.render().el)

  edit: (id) ->
    friend_request = @friend_requests.get(id)

    @view = new Blog.Views.FriendRequests.EditView(model: friend_request)
    $("#friend_requests").html(@view.render().el) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T00:25:33.840

您的路由器会这样做：

```
index: ->
  @view = new Blog.Views.FriendRequests.IndexView(friend_requests: @friend_requests)
  #... 
```

注意`friend_requests:`部分。但是，您`Blog.Views.FriendRequests.IndexView`总是在寻找`@options.friendRequests`：

```
initialize: () ->
  @options.friendRequests.bind('reset', @addAll) 
```

Backbone 将负责[`@options`](http://backbonejs.org/#View-constructor)：

> 创建新视图时，您传递的选项将附加到视图中`this.options`，以供将来参考。

但它不会将带下划线的名称转换为驼峰式名称。您的视图应该查看`@options.friend_requests`而不是`@options.friendRequests`（或`friendRequests:`在实例化您的视图时使用）。对于变量，您可能只想坚持一种命名约定（小写和下划线或驼峰式）。下划线在 Ruby 和 Rails 中更常见，所以这可能是一个不错的选择（OTOH，camel-case 在 JavaScript 中很常见，所以......）。

PS：Backbone 视图已经有一个 jQuery 版本的`@el`in[`@$el`](http://backbonejs.org/#View-%24el)所以你不必去`$(@el)`任何地方，只需使用`@$el`.

* * *

**Backbone 1.1.0 更新**：从 1.1.0 开始，Backbone 视图不再`this.options`自动设置为视图的选项，如果你想要这种行为，那么你必须自己做：

```
initialize: (options) ->
  @options = options
  #... 
```

或者：

```
initialize: (@options) ->
  #... 
```

您还可以从`options`需要的选项中获取选项并丢弃其余选项：

```
initialize: (options) ->
  @friend_requests = options.friendRequests
  #... 
```

我更喜欢后一种方法，因为它使您的视图选项非常明确且易于跟踪。

# c# - 一维数组中的条件语句

> ID：13204377
> 
> 赞同：1
> 
> 时间：2012-11-02T23:22:25.497
> 
> 标签：c#, for-loop

```
for (int i = 0; i < NumberOfPlayers; i++)
{
     NextMove = playerPositions[i] + DiceThrow();

     while (RocketInSquare(NextMove) == true)
          playerPositions[i] = NextMove++;

     playerPositions[i] = NextMove;
} 
```

我在这个 for 循环中遇到了一些麻烦。有没有办法让我做到这一点：

```
NextMove = playerPositions[i] + DiceThrow(); 
```

只在for循环中运行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:26:23.797

您可以包含一个`flag`或`counter`与一个`if`块组合。

```
if (counter == 0)
{
    NextMove = playerPositions[i] + DiceThrow();
    counter++;
} 
```

`firstIteration`( `bool firstIteration`)的另一种方法，

```
firstIteration = false; 

....

for (...)
{
    if (firstIteration)
    {
        NextMove = playerPositions[i] + DiceThrow();
        firstIteration = !firstIteration; // Toggle the flag 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:28:00.020

保留一面旗帜

```
 bool flag = false;    
    for (int i = 0; i < NumberOfPlayers; i++)
    {
    if(!flag)
    {
        NextMove = playerPositions[i] + DiceThrow();
        flag = true;  
    } 

    while (RocketInSquare(NextMove) == true)
        {
            playerPositions[i] = NextMove++;

        }
        playerPositions[i] = NextMove;

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T02:47:20.890

您应该将该行移出循环。

```
NextMove = playerPositions[0] + DiceThrow(); 
for (int i = 0; i < NumberOfPlayers; i++)
{
     while (RocketInSquare(NextMove))
          NextMove++;

     playerPositions[i] = NextMove;
} 
```

# c# - HttpWebRequest 向 WebService 传递参数

> ID：13204388
> 
> 赞同：0
> 
> 时间：2012-11-02T23:24:13.657
> 
> 标签：c#, asp.net, httpwebrequest

我有一个需要将数据传递给 Web 服务 (SMS) 的网页，我尝试使用它`WebRequest`来完成这项工作，但是当我使用此类时，会出现以下错误：

```
Cannot close stream until all bytes are written 
```

在此行之后的行中：

```
stOut.WriteLine(strNewValue,number,text); 
```

问题是什么？我尝试使用`Flush()`但也没有工作

```
public class SendSms
{
    public SendSms(string number, string text)
    {
         string strNewValue;
         string strResponse;

         HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://www.buymessage.com/ostazSms/send.php");          

         req.Method = "POST";
         req.ContentType = "application/x-www-form-urlencoded";
         strNewValue = "usr=****&pwd=*****&to={0}&msg={1}"; 
         req.ContentLength = strNewValue.Length;

         using(StreamWriter stOut = new StreamWriter (req.GetRequestStream(), System.Text.Encoding.Unicode))
         {
             stOut.WriteLine(strNewValue,number,text);
         }

        StreamReader stIn = new StreamReader(req.GetResponse().GetResponseStream());
        strResponse = stIn.ReadToEnd();
        stIn.Close();  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:34:14.177

您的问题是您调用`WriteLine`，这可能不会发送所有数据。

这是一个对发布数据进行编码并将其全部发送的片段：

```
string strNewValue = string.Format("usr=****&pwd=*****&to={0}&msg={1}", "A", "B");
byte[] byteArray = Encoding.UTF8.GetBytes (strNewValue);
req.ContentLength = byteArray.Length;

using (Stream dataStream = req.GetRequestStream ()) {
    dataStream.Write (byteArray, 0, byteArray.Length);
} 
```

# spring - spring webflow变量序列化

> ID：13204393
> 
> 赞同：2
> 
> 时间：2012-11-02T23:24:40.330
> 
> 标签：spring, spring-webflow-2

我有为三个不同实体提供处理的流程。因此，我有具有公共流状态的父流定义，并且在具体流定义中，我用真实数据和动作实现扩展了该流。

我想将处理实体的bean实例存储在变量中，这样我就可以在父流定义中访问这个变量。

在父流定义中

```
<action-state id="prepareReview" >
    <evaluate expression="processor.prepare(modelInstance)" />
    <transition to="check" />
</action-state> 
```

在具体的流程定义中我有

```
<on-start>
    <set name="flowScope.processor" value="concreteProcessor"/>
</on-start> 
```

`concreteProcessor`实现必要处​​理的单例 bean在哪里。它是无状态的，因此序列化它是没有用的，而且它包含自动装配的 dao 变量，其实现使用无法序列化的 HibernateDaoSupport。

有没有办法克服这个问题？我有一个解决方案，但这不是很方便，因为我需要在每个具体的处理器方法调用的具体流定义样板代码中编写。

```
<action-state id="prepareReview" parent="common#prepareReview">
    <evaluate expression="concreteProcessor.prepare(modelInstance)" />
</action-state> 
```

这有点麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:04:19.273

您可以在您的`ConcreteProcessor`：

```
@Component
@Scope(proxyMode=ScopedProxyMode.TARGET_CLASS,value=ConfigurableBeanFactory.SCOPE_SINGLETON) 
```

这将注入 CGLIB 代理而不是`ConcreteProcessor`. 代理是可序列化的，并且在反序列化时会重新注入依赖项。

缺点是你的类路径中必须有 CGLIB。或者，使用基于接口的代理

```
@Scope(proxyMode=ScopedProxyMode.INTERFACES,value=ConfigurableBeanFactory.SCOPE_SINGLETON) 
```

但是你`ConcreteProcessor`必须实现一个接口。

# c# - 在 Windows 环境中保存 SerialPort 设置

> ID：13204400
> 
> 赞同：0
> 
> 时间：2012-11-02T23:26:01.850
> 
> 标签：c#, serial-port, mscomm32

我想在我的 C# 程序中以编程方式设置串行 (COM) 端口设置（波特率、停止位等）。当我执行以下操作时，它不会将设置保存在我的 Windows 环境中。我完全走错了吗？

```
 SerialPort serialPort = new SerialPort();
  string[] ports = SerialPort.GetPortNames();

  serialPort.PortName = "COM5";
  serialPort.BaudRate = 9600;
  serialPort.DataBits = 8;
  serialPort.DtrEnable = true;

  serialPort.StopBits = StopBits.One;
  serialPort.Parity = Parity.None;
  if (serialPort.IsOpen) serialPort.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:09:39.823

进入您的项目属性的设置选项卡并添加您想要保留的值的设置，如下所示：

![在此处输入图像描述](../Images/9e3cde3aa9b34aafa33beffb8d418db9.png)

然后像这样在您的代码中访问它们。当您的应用程序关闭时保存它们：

```
public partial class Form1 : Form
{
    SerialPort serialPort; 
    public Form1()
    {
        InitializeComponent();
        serialPort = new SerialPort();
        serialPort.PortName = Properties.Settings.Default.PortName;
        serialPort.BaudRate = Properties.Settings.Default.BaudRate;
        serialPort.DataBits = Properties.Settings.Default.DataBits;
        serialPort.DtrEnable = Properties.Settings.Default.DtrEnable;
        serialPort.StopBits = Properties.Settings.Default.StopBits;
        serialPort.Parity = Properties.Settings.Default.Parity;

    }

    private void button1_Click(object sender, EventArgs e)
    {
        serialPort.PortName = "COM1";
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        Properties.Settings.Default.PortName = serialPort.PortName;
        Properties.Settings.Default.BaudRate = serialPort.BaudRate;
        Properties.Settings.Default.DataBits = serialPort.DataBits;
        Properties.Settings.Default.DtrEnable = serialPort.DtrEnable;
        Properties.Settings.Default.StopBits = serialPort.StopBits;
        Properties.Settings.Default.Parity = serialPort.Parity;
        Properties.Settings.Default.Save(); //Saves settings 

    }
} 
```

# python - 在python中计算稀疏矩阵的广义特征值

> ID：13204402
> 
> 赞同：3
> 
> 时间：2012-11-02T23:26:15.200
> 
> 标签：python, matrix, machine-learning, scipy, linear-algebra

我正在使用 scipy.sparse.linalg.eigsh 来解决非常稀疏矩阵的广义特征值问题并遇到内存问题。该矩阵是一个有 100 万行/列的方阵，但每行只有大约 25 个非零条目。有没有办法在不将整个矩阵读入内存的情况下解决问题，即一次只处理内存中的矩阵块？

如果解决方案涉及在 python 或 java 中使用不同的库，那没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T13:43:59.100

对于 ARPACK，您只需要编写一个计算某些矩阵向量乘积的例程。这可以以您喜欢的任何方式实现，例如从磁盘读取矩阵。

```
from scipy.sparse.linalg import LinearOperator

def my_matvec(x):
    y = compute matrix-vector product A x
    return y

A = LinearOperator(matvec=my_matvec, shape=(1000000, 1000000))
scipy.sparse.linalg.eigsh(A) 
```

检查 scipy.sparse.linalg.eigsh 文档以了解广义特征值问题案例中所需的内容。

Scipy ARPACK 接口或多或少地暴露了完整的 ARPACK 接口，所以我怀疑你会通过切换到 FORTRAN 或其他方式访问 Arpack 获得很多。

# javascript - Chrome 扩展 XSS 可能性

> ID：13204404
> 
> 赞同：2
> 
> 时间：2012-11-02T23:26:18.710
> 
> 标签：javascript, google-chrome-extension, xss

这是一个假设性问题：

我想构建一个 Chrome 扩展程序，该扩展程序将跟踪用户在该扩展程序处于活动状态的网页子集上的点击，并通过 AJAX 将数据作为 POST 或 GET 请求发送到我在某处运行的外部服务器。这有可能吗，因为这对我来说听起来像是 XSS？如果是 XSS，有什么解决方法吗？

在此先感谢您的帮助。

编辑：为了澄清，提出这个问题是为了监控*小部件内的点击。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:47:36.087

这不是假设的答案 *：

一个 chrome 扩展......“只要它首先请求跨域权限，它就可以与其源之外的远程服务器通信。”

来源和说明：[Cross-Origin XMLHttpRequest](http://developer.chrome.com/extensions/xhr.html)

* ...但在实施此之前，您应该注意有关隐私和合法性的评论！

# xcode - 如何为网守协同设计现有的 Mac OS X .app 文件？

> ID：13204407
> 
> 赞同：15
> 
> 时间：2012-11-02T23:26:42.017
> 
> 标签：xcode, macos, codesign

我花了 99 美元获得了 Apple 的开发者许可证。安装 Xcode 4.3。转到 Organizer 和“Provisioning Profiles”并刷新以下载我的代码签名证书。检查我的钥匙串访问并确认我有“3rd Party Mac Developer *”、“Developer ID* ”和“Mac Developer *”证书。

此时，来自苹果的文档提到了提取您的项目文件。我正在使用 Wineskin 来打包我的 Windows 应用程序，所以我没有 Xcode 项目。我有一个 .app 文件生成了我的 Wineskin。我想对 Wineskin 为我制作的 .app 文件进行代码设计。

我试过： codesign -s "证书名称" /path/to/my.app

我从我的钥匙串访问中尝试了所有可能的证书名称，其中包含我的名字和“应用程序”一词。

每次我收到错误“/path/to/my.app：目标文件格式无法识别、无效或不合适”

关于如何克服这个错误的任何想法？我什至在尝试正确的命令吗？还是我应该走不同的路？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T15:50:53.607

总结对我的问题的评论，以下是我为 Gatekeeper 签署我的 .app 文件时运行的命令：

```
export CODESIGN_ALLOCATE="/Applications/Xcode.app/Contents/Developer/usr/bin/codesign_allocate"
codesign --force --sign "Developer ID Application: <my name>" /path/to/my.app 
```

谢谢，戈登戴维森和 JWWalker！

（编辑）如果失败，我意识到需要从 XCode 中安装“命令行工具”。

**编辑：** 验证

```
$ codesign -dv --verbose=4 my.app 
```

在 Apple ID 帐户中确保您拥有几种类型的证书？

[![在此处输入图像描述](../Images/f4d948f90d77e5835d6aa8d23bfa0ecd.png)](https://i.stack.imgur.com/Lc2tM.png) [![在此处输入图像描述](../Images/1f58dbd561a8e5d1544a087eb43384eb.png)](https://i.stack.imgur.com/UCz7E.png) [![在此处输入图像描述](../Images/36e9d6be487964870e30d0bc1308e83d.png)](https://i.stack.imgur.com/2C4Op.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-25T12:14:38.737

确保您的钥匙串中有有效的开发人员证书和私钥。如果您对它有一些问题，应该通过 developer.apple.com 撤销证书并从头开始生成（XCode > Accounts > Manage Certificates）。

然后你可以使用`codesign`：

```
codesign --force --deep --sign "Apple Development: FirstName LastName (XXXXXXXXXX)" /Applications/ApplicationName.app 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T14:55:54.013

在使用 codesign 命令之前

1.  [从https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)部分安装 Xcode 命令行工具。（您应该有一个开发者帐户来下载附加工具。）

2.  请检查 Payload 文件夹中的任何隐藏文件，如 (.DStore)，如果有，请将其删除

    *   *使用cd*命令通过终端导航到 Payload 文件夹
    *   在终端上输入 ls- 命令
    *   如果有任何隐藏文件分开，请通过 rm -f .DStore 将其删除

这个解决方案对我有用，所以请试一试....

# javascript - 如何将角色转出基本多语言平面？

> ID：13204412
> 
> 赞同：2
> 
> 时间：2012-11-02T23:27:09.303
> 
> 标签：javascript, unicode, non-english, astral-plane

对于 Basic Multilingual Plane 中的字符，我们可以使用 '\uxxxx' 转义它。例如，您可以使用 /[\u4e00-\u9fff]/ 来匹配一个常见的汉字（0x4e00-0x9fff 是 CJK 统一表意文字的范围）。

但是对于基本多语言平面之外的字符，它们的代码大于 0xffff。所以你不能使用格式'\uxxxx'来转义它，因为'\u20000'表示字符'\u2000'和字符'0'，而不是代码为0x20000的字符。

如何将字符转义出基本多语言平面？直接使用这些字符不是一个好主意，因为它们无法在大多数字体中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:48:10.143

Javascript 不能直接识别 BMP 之外的字符——它们在内部表示为 UTF-16 代理对。例如，您提到的字符 U+20000（当前分配给“CJK Unified Ideographs Ext. B”）表示为代理对 U+D840 U+DC00。作为一个 Javascript 字符串，这只是`"\u2840\uDC00"`. （请注意，`s.length`此字符串为 2，即使它显示为单个字符。）

[维基百科有关于所用编码方案的详细信息。](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T06:54:01.570

您可以使用一对转义的代理代码点，如@duskwuff 的回答中所述。您可以使用我的[完整 Unicode 输入实用程序](http://www.cs.tut.fi/~jkorpela/fui.html8)来获取符号（按钮“显示 \u”），或使用 Fileformat.info[字符搜索](http://www.fileformat.info/info/unicode/char/search.htm)来找到它们（项目“C/C++/Java 源代码”，因为 JavaScript 使用相同的这里的符号）。

或者，您可以直接输入字符：“您可以将非 BMP 字符*本身*输入到 JavaScript 代码中的字符串文字中，无论是在单独的文件中还是嵌入在 HTML 中。自然，您需要在您使用的编辑器中提供合适的 Unicode 支持。但是 JavaScript 实现不需要在程序源中支持非 BMP 字符。他们可能会这样做，而现代浏览器实现通常会这样做。” （使用 JavaScript 和 Globalize.js 走向全球，第 177 页）有一些注意事项，例如正确声明字符编码。

字体支持是一个不同的问题，但是在处理字符时，您通常希望在某个时候看到它们，至少在测试中是这样。所以你或多或少需要一些覆盖字符的字体。Fileformat.info 页面还包含指向浏览器支持信息的链接，例如[(U+20000) 字体支持](http://www.fileformat.info/info/unicode/char/20000/fontsupport.htm)- 一个很好的起点，虽然还不够完整。例如，`''`在 SimSun-ExtB 中也支持U+20000

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-17T04:01:49.730

有趣的问题。

现在我们有了[ES6](http://es6-features.org/)，[我们可以这样做](https://mathiasbynens.be/notes/javascript-escapes#unicode-code-point)：

```
let newSpeak = '\u{1F4A9}' 
```

请注意，在内部它仍然是带有[代理对的](https://en.wikipedia.org/wiki/UTF-16#U.2B10000_to_U.2B10FFFF)[UTF-16](https://en.wikipedia.org/wiki/UTF-16)：

```
newSpeak.length === 2 // "wrong"
[...newSpeak].length === 1
newSpeak === '\uD83D\uDCA9' 
```

[Unicode 是巨大的](http://www.parseerror.com/blog/visualizing-unicode-codespace)。

此外，它不仅仅是文字：

```
newSpeak.charCodeAt(0) === 0xD83D // "wrong"
newSpeak.codePointAt(0) === 0x1F4A9

String.fromCharCode(0x1F4A9) !== newSpeak
String.fromCodePoint(0x1F4A9) === newSpeak

for (let i = 0; i < newSpeak.length; i++) console.log(newSpeak[i]) // "wrong"
for (let c of newSpeak) console.log(c)

[...''].map(c => `__${c}`).join('') === "____" 
```

我 处理 Unicode。

# macos - cuda-gdb 运行>控制台权限被拒绝 OS X

> ID：13204416
> 
> 赞同：0
> 
> 时间：2012-11-02T23:27:25.277
> 
> 标签：macos, cuda, cuda-gdb

我正在尝试在 OS X 上调试我的 CUDA 代码，我需要在`>console`模式下运行它，因为运行它通常会冻结屏幕。但它一直给我“权限被拒绝”错误。有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:58:53.890

[请按照CUDA-GDB 手册](http://docs.nvidia.com/cuda/cuda-gdb/index.html)中“设置调试器环境”中概述的步骤进行操作。

此问题是由需要特殊权限的调试器引起的。

# facebook - 使用新的 api 和 access_token 发布通知

> ID：13204418
> 
> 赞同：0
> 
> 时间：2012-11-02T23:27:33.733
> 
> 标签：facebook, facebook-graph-api, notifications, access-token

我正在尝试通过新的通知 api 向自己发布通知

这就是我获取访问令牌的方式（Wich 有效，因为我将它用于其他一些功能）

```
<?php
    $code = $_REQUEST["code"];
     //auth user
     if(empty($code)) {
         $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=appid&redirect_uri=' . urlencode('http://funcook.com/facebook.php') ;
        echo("<script>top.location.href='" . $dialog_url . "'</script>");
      }
      //get user access_token
      $token_url = 'https://graph.facebook.com/oauth/access_token?client_id=appid&redirect_uri=' . urlencode('http://funcook.com/facebook.php') 
        . '&client_secret=[REMOVED SECRET]&code=' . $code;
      $access_token = file_get_contents($token_url);
?> 
```

这就是我尝试发送通知的方式：

```
<script>
     FB.api('/<?=$uid?>/notifications?<?=$access_token?>&template=hi toni&href=http://mywebsite.com/?yiha', 'post', {}, function (response) {
             if (!response || response.error) {
                    console.log('Error occured:' + response.error.message);
    }else{     console.log('Post ID: ' + response.id);
             }

        });
</script> 
```

这是控制台记录的内容：

> 转义未转义字符 \x20 从 "/652286316/notifications?access_token=&expires=5883&template=hi toni&href= [http://mywebsite.com/?yiha](http://mywebsite.com/?yiha) " facebook.php:222Error occurred:(#15) 此方法必须使用应用访问令牌。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:45:34.567

看起来您使用的是用户访问令牌而不是应用访问令牌 - 需要使用应用访问令牌发布通知

这里有一个使用应用访问令牌发布 Open Graph 操作的简要指南：[https ://developers.facebook.com/docs/opengraph/using-app-tokens/](https://developers.facebook.com/docs/opengraph/using-app-tokens/)

检索令牌的步骤也适用于此处。

更多详情：[https ://developers.facebook.com/docs/howtos/login/login-as-app/](https://developers.facebook.com/docs/howtos/login/login-as-app/)

# iphone - 只让本地通知出现一次

> ID：13204419
> 
> 赞同：1
> 
> 时间：2012-11-02T23:27:35.247
> 
> 标签：iphone, objective-c, ios, notifications, uilocalnotification

我有一个大问题！我的问题是，我已经在我的委托中实现了本地通知代码。我已将此代码放入 didEnterBackround 方法中。但是，我为每个 didEnterBackround 获得了一个本地通知。如果最新的通知消失了，是否有可能只启动一个新的通知触发？就像我有一个 5 天后触发的 localnotifi 一样。当我打开和关闭应用程序 5 次并等待 5 天时，我会收到 5 个本地通知。是否有可能让应用程序只创建一个启动，然后出现一个新的启动？！

我的代码：

```
NSCalendar  *calender = [NSCalendar autoupdatingCurrentCalendar];
NSDate *currentDate = [NSDate date];

NSDateComponents *dateComponents = [calender components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:currentDate];

NSDateComponents *timeComponents = [calender components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:currentDate];

NSDateComponents *temp = [[NSDateComponents alloc]init];

[temp setYear:[dateComponents year]];
[temp setMonth:[dateComponents month]];
[temp setDay:[dateComponents day]];
[temp setHour:[timeComponents hour]];
[temp setMinute:[timeComponents minute]];
[temp setSecond:[timeComponents second] +10];

NSDate *fireTime = [calender dateFromComponents:temp];

UILocalNotification *localN = [[UILocalNotification alloc]init];
localN.fireDate = fireTime;
localN.timeZone = [NSTimeZone defaultTimeZone];

localN.alertBody = @"BLA BLA BLA!";
localN.alertAction = @"GO BACK";

localN.applicationIconBadgeNumber = 1;

[[UIApplication sharedApplication] scheduleLocalNotification:localN]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T02:31:27.280

您可以取消所有预定的通知：

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

如果您不想删除所有计划的通知（也许您还有其他计划），那么请查看`cancelLocalNotification:`仅允许您取消单个实例的通知。

# ruby-on-rails-3 - 用简单的形式格式化日期

> ID：13204422
> 
> 赞同：4
> 
> 时间：2012-11-02T23:28:09.427
> 
> 标签：ruby-on-rails-3, simple-form

我在我的 Rails 应用程序中使用[Simple Form gem 。](https://github.com/plataformatec/simple_form)在我的注册表单中，我有一个出生日期字段。但是，这些字段按以下顺序显示：年/月/日。

获取字段顺序月 - 日 - 年的最佳方法是什么？

我的表格如下所示：

```
 <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
   <%= f.input :created_at %>          
   <%= f.button :submit, "Sign up" %>      
<% end %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T23:40:12.150

你在找这个吗？

```
<%= f.input :birthday, :order => [:month, :day, :year] %> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T00:09:38.560

我不知道它是否适用于 simple_form，但我怀疑它会......将以下内容添加到`config/locals/en.yml`（或类似内容）：

```
en:
  date:
    order:
      - :month
      - :day
      - :year 
```

# xcode - 如何删除嵌入式配置文件

> ID：13204425
> 
> 赞同：1
> 
> 时间：2012-11-02T23:28:55.790
> 
> 标签：xcode, provisioning-profile

一位客户从另一位开发人员那里分配给我一个未完成的项目。我完成了这个项目，但是我无法将它上传到应用商店，因为它有一个“嵌入式配置文件”。我该如何解决这个问题？

ps我试图在这个答案[https://stackoverflow.com/a/3097199/975799](https://stackoverflow.com/a/3097199/975799)之后更改嵌入式配置文件，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:15:53.480

更改应用程序的捆绑包 ID。创建您自己的捆绑包 ID、应用 ID 和配置文件。安装您的个人资料并使用您的个人资料签署此应用程序。它应该工作

# javascript - Visual Studio 2012 JavaScript Intellisense 不工作

> ID：13204428
> 
> 赞同：18
> 
> 时间：2012-11-02T23:29:09.297
> 
> 标签：javascript, visual-studio-2012, intellisense

我的笔记本电脑和台式机上安装了 Visual Studio 2012。在我的台式电脑上，JavaScript 智能感知不起作用。对于它调用的任何方法（甚至是标准 JavaScript 调用），我都会收到消息“Intellisense 无法确定此表达式的准确完成列表”。

我已经尝试了其他帖子中的所有建议，并尝试了我在 Google 上可以找到的所有内容。没有任何效果。这与没有 JQuery Intellisense 无关。我什至没有获得基本的 JavaScript Intellisense。

**编辑：**

![我会发布一张图片，但作为一个新用户它不会让我。](../Images/91e72aa22befdce9eff6f68225341022.png) ![在此处输入图像描述](../Images/ddb73bd7fe1c6d69d2a46993af46a62b.png)

上图中的对象是简单的字符串，但我没有从 Intellisense 获得任何帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-25T12:41:25.580

我遇到了同样的问题：在 Visual Studio 2010 中，我习惯于在顶部的 javascript 文件中添加引用，如下所示：

```
/// <reference path="/scripts/jquery-1.7.1-vsdoc.js" /> 
```

使用新的 Visual Studio 2012，这不再起作用，我环顾四周，找到了将引用放入 /scripts/_references.js 的解决方案，我这样做了，但不起作用。

我**做错**的是我**引用了 vsdoc.js 文件**，或者在撰写本文时，nuget 下载了 jquery 1.9.1 包，引用了错误的 jquery-1.9.1.intellisense.js。

正确的**参考**（如果使用 /scripts/_references.js 文件）是：

```
/// <reference path="/scripts/jquery-1.9.1.js" /> 
```

**（不是 .intellisense.js 或 -vsdoc.js 文件）**。

**对于适用于所有项目的全局解决方案：**复制 C:\Program Files (x86)\Microsoft Visual Studio 11.0\JavaScript\References (如果您在其他地方安装了 Visual Studio 2012，则调整路径）并在 Visual Studio 中，在工具 > 选项 > 文本编辑器 > Javascript > Intellisense > 参考 > 添加对 jquery-1.9.1.js 的引用（同样，**不是 vsdoc 或 intellisense文件**，但主要的文件）如denas在[解决方案](https://stackoverflow.com/questions/11488208/intellisense-doesnt-work-for-js-in-vs2012)中解释的那样（但没有明确表示不要指向 vsdoc/intellisense 文件）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T17:13:51.533

很多事情都可能导致这样的问题，但我通常按照这些步骤进行故障排除。

1.  关闭视觉工作室并重新启动
2.  重新启动 Windows 并再次启动 Visual Studio
3.  让另一个开发人员加载您的项目并对其进行测试
4.  创建一个简单的项目并使用所有库存 javascript 引用进行测试
5.  [重置IDE](http://msdn.microsoft.com/en-us/library/ms247075%28v=vs.110%29.aspx)
6.  [在安全模式下](http://msdn.microsoft.com/en-us/library/ms241278%28v=vs.110%29.aspx)运行 VS并测试您的项目
7.  卸载并重新安装vs

我通常在第 3 步或第 4 步，有时在第 5 步解决大部分 VS 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-25T14:05:33.403

如果你在 C 盘以外的任何地方安装了 VS，就会发生这种情况。

在 Visual Studio 中，在工具 > 选项 > 文本编辑器 > Javascript > Intellisense > 参考下

添加对列表中存在但指向安装 VS 的新路径的相同 .js 文件的引用

> 例如 - G:\Program Files\Microsoft Visual Studio 11.0\JavaScript\References.libhelp.js

其中有 5 个

在这之后去编辑>智能感知>刷新外部参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T07:08:08.380

我通过右键单击解决方案资源管理器中的文件并选择打开方式，然后在编辑 Web 表单时选择 Web 表单编辑器或在编辑 JavaScript 文件时选择源代码（文本）编辑器来解决相同的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T13:46:49.533

在 Visual Studio 2012 中，
使用此解决方案[https://github.com/jmbledsoe/angularjs-visualstudio-intellisense](https://github.com/jmbledsoe/angularjs-visualstudio-intellisense)。

确保将 ng、ngCookies 模块放入必填字段。例如： var module = angular.module("demo", ['ng','ngCookies']);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-13T12:18:23.507

Mads Kristensen 的一篇优秀文章帮助我解决了 JavaScript Intellisense 问题。

三斜杠引用看起来像这样，可以添加到任何 .js 文件的顶部或 /scripts/_references.js 文件中

```
/// <reference path="../app/respond.js" /> 
```

参考： http: [//madskristensen.net/post/the-story-behind-_referencesjs](http://madskristensen.net/post/the-story-behind-_referencesjs)

# plone - 如何将“下一个字段集”按钮添加到 Dexterity Plone 类型的添加/编辑表单

> ID：13204429
> 
> 赞同：0
> 
> 时间：2012-11-02T23:29:11.810
> 
> 标签：plone, fieldset, dexterity

我有一个具有多个字段集的 Dexterity 类型，并且内置的 Javascript 允许在添加或编辑时一次显示一个字段集，这非常棒。

但我想邀请用户按顺序浏览字段集，所以我的理想情况是在最后一个字段集可见之前不会显示“提交”按钮，而是在最后一个字段集之前显示`NEXT>`或`<PREV`和`NEXT>`按钮。

我认为这是一种行为？但是我对如何添加它以及如何控制它有点茫然。我目前正在使用默认的 EditForm，我更愿意只做一个微小的调整，但如果这意味着要自己构建表单，那没关系。我只需要知道这是否是获得此添加的唯一方法，这似乎不太可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:55:53.150

可以使用一些额外的 JavaScript 魔法来装配字段集以添加“上一个”和“下一个”按钮。这是我在当前项目中使用的：

```
var prevnext = {
    formTabs: null,

    next: function() { prevnext.formTabs.data('tabs').next(); prevnext._scrollToTop(); },
    prev: function() { prevnext.formTabs.data('tabs').prev(); prevnext._scrollToTop(); },

    _scrollToTop: function() {
        $(window).scrollTop(prevnext.formTabs.closest('form').offset().top);  
    },

    showButtons: function(event, index) {
        var tabs = prevnext.formTabs.data('tabs'),
            index = typeof(index) === 'undefined' ? tabs.getIndex() : index,
            current = tabs.getTabs()[index],
            count = tabs.getTabs().length;

        $('#prevnext_previous').toggle(index !== 0);
        $('#prevnext_next').toggle(index !== (count - 1));

        $('.formControls:last :submit[name=form_submit]').toggle(index === )count - 1));
    },

    init: function() {
        var tabs;
        prevnext.formTabs = $('.formTabs');
        tabs = prevnext.formTabs.data('tabs');
        if (tabs.getTabs().length > 0) {
            if ($('fieldset#fieldset-distribution').length === 0)
                 return;
            $('.formControls:last :submit:first')
                .before($('<input id="prevnext_previous" class="context" ' +
                          '       type="button" value="" />')
                      .val('< Previous')
                      .click(prevnext.prev))
                .before(document.createTextNode(' '));
            $('.formControls:last :submit:first')
                .before($('<input id="prevnext_next" class="context" ' +
                          '       type="button" value="" />')
                      .val('Next >')
                      .click(prevnext.next))
                .before(document.createTextNode(' '));
            prevnext.showButtons();
            tabs.onClick(prevnext.showButtons);
        }
    }
};

$(prevnext.init()); 
```

# java - Java如何设置jpg质量

> ID：13204432
> 
> 赞同：10
> 
> 时间：2012-11-02T23:29:40.033
> 
> 标签：java

只是想编辑一些代码，以便输出 jpg 质量不是默认的低质量设置

```
try
        {
            ImageIO.write(var6, "jpg", var7);
        } 
```

......目前正在使用。

我查看了其他一些设置质量的 Java 示例，但对 Java 不是很熟悉，我无法理解如何插入内容并重新编写一些示例，这些示例是我在使用 Java 设置图像质量时看到的。

```
ImageWriteParam iwparam = new JPEGImageWriteParam(Locale.getDefault());
    iwparam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
    iwparam.setCompressionQuality(quality);
    writer.write(null, new IIOImage(image, null, null), iwparam); 
```

这是我正在尝试工作的代码......

```
public static String func_74292_a(File par0File, String par1Str, int par2, int par3)
{
    File var4 = new File(par0File, "screenshots");
    var4.mkdir();
    int var5 = par2 * par3;

    if (field_74293_b == null || field_74293_b.capacity() < var5)
    {
        field_74293_b = BufferUtils.createIntBuffer(var5);
        field_74294_c = new int[var5];
    }

    GL11.glPixelStorei(GL11.GL_PACK_ALIGNMENT, 1);
    GL11.glPixelStorei(GL11.GL_UNPACK_ALIGNMENT, 1);
    field_74293_b.clear();
    GL11.glReadPixels(0, 0, par2, par3, GL12.GL_BGRA, GL12.GL_UNSIGNED_INT_8_8_8_8_REV, field_74293_b);
    field_74293_b.get(field_74294_c);
    func_74289_a(field_74294_c, par2, par3);
    BufferedImage var6 = new BufferedImage(par2, par3, 1);
    var6.setRGB(0, 0, par2, par3, field_74294_c, 0, par2);

    if (par1Str == null)
    {
        var7 = func_74290_a(var4);
    }
    else
    {
        var7 = new File(var4, par1Str);
    }

    try
    {
        ImageIO.write(var6, "jpg", var7);
    }
    catch (IOException var8)
    {
        ;
    }

    Thread var7x = new Thread(new ScreenShotHelper$1());
    var7x.start();
    return "\u00a7aUploading Screenshot....";
}

private static File func_74290_a(File par0File)
{
    String var1 = dateFormat.format(new Date()).toString();
    int var2 = 1;

    while (true)
    {
        File var3 = new File(par0File, var1 + (var2 == 1 ? "" : "_" + var2) + ".jpg");

        if (!var3.exists())
        {
            return var3;
        }

        ++var2;
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-03T07:38:40.083

终于用这段代码做到了......

```
try
{

    ImageOutputStream  ios =  ImageIO.createImageOutputStream(var7);
    Iterator<ImageWriter> iter = ImageIO.getImageWritersByFormatName("jpeg");
    ImageWriter writer = iter.next();
    ImageWriteParam iwp = writer.getDefaultWriteParam();
    iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
    iwp.setCompressionQuality(0.85f);
    writer.setOutput(ios);
    writer.write(null, new IIOImage(var6,null,null),iwp);
    writer.dispose();

    //ImageIO.write(var6, "jpg", var7);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T00:05:34.840

您可能想详细说明代码的实际问题是什么。

一般来说，您使用的第二个片段（或多或少）是正确的方法：

1) ImageIO.write(...) 几乎所有东西都使用默认值，它不需要额外的配置。

2) 如果你想调整参数，例如压缩率，你应该使用 ImageWriter。您可以使用任何格式（在您的情况下为 jpg）获得合适的作家`ImageWriter writer = ImageIO.getImageWritersByFormatName("jpg");`

3) 然后您在 ImageWriteParam 的实例上设置要由 writer 使用的配置参数。您可以直接实例化 a `JPEGImageWriteParam`，但如果您只是想更改压缩比，则使用请求默认实例更容易`ImageWriteParam param = writer.getDefaultWriteParam();`

4) 如上述代码片段所示设置压缩质量，并相应地将压缩类型设置为显式。

5）调用`writer.write(null, new IIOImage(image, null, null), iwparam);`基本上告诉您的编写器实例创建一个没有元数据或嵌入缩略图的图像，只包含您的 BufferedImage 并使用您在 3）中创建的配置对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-17T19:44:27.033

我遇到了一个类似的问题，答案对我来说不是很清楚，因为当时我对 ImageIO 并不了解，所以对于像我这样遇到这篇文章的人，我做了一个例子。

```
try {

            //  Image to be altered 
            BufferedImage imagem = ImageIO.read(new File("c://nota.jpg"));

            //  The output image
            File outPutImage = new File("c://nota2.jpg");

            //  Encapsulate the outPut image
            ImageOutputStream  ios =  ImageIO.createImageOutputStream(outPutImage);

            //  List of ImageWritre's for jpeg format 
            Iterator<ImageWriter> iter = ImageIO.getImageWritersByFormatName("jpeg");

            //  Capture the first ImageWriter
            ImageWriter writer = iter.next();

            //  define the o outPut file to the write
            writer.setOutput(ios);

            //  Here you define the changes you wanna make to the image
            ImageWriteParam iwParam = writer.getDefaultWriteParam();
            iwParam.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
            iwParam.setCompressionQuality(.90f);

            //  Compression and saving to file the altered image
            writer.write(null, new IIOImage(imagem, null, null), iwParam);

            writer.dispose();               
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

如果您知道更简单的方法，或者您在我的评论或代码中发现了错误，请在评论中告诉我，以便我进行更改。

# css - 表格行边框不可见

> ID：13204437
> 
> 赞同：6
> 
> 时间：2012-11-02T23:30:28.897
> 
> 标签：css, twitter-bootstrap

我正在使用带边框的表格类来设置表格的样式。

但是，对于某些行，我需要更改表格单元格的左边框，但保留整个表格周围的边框外观。

为此，我尝试重新设置表格单元格左边框的样式并向表格行添加左边框。

我可以删除表格单元格的左边框，但是新的表格行左边框是不可见的。

```
.table tr.topic_row {
    border-left: 3px solid red;
}

.table td.topic_title {
    border-left: none;
} 
```

您可以看到表格行边框似乎不可见：http: [//i.stack.imgur.com/M5lsO.png](http://i.stack.imgur.com/M5lsO.png)

然而它应该在那里：http: [//i.stack.imgur.com/crMQA.png](http://i.stack.imgur.com/crMQA.png)

任何关于如何让表格行边框可见的建议将不胜感激:)

* * *

编辑澄清：

这里的问题是，为什么不显示表格行边框。即使它应该在那里它不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:18:30.713

尝试这个：

```
.table tr.topic_row td {
    border-left: 3px solid red;
}

.table td.topic_title {
    border-left: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:36:40.370

尝试将边框颜色应用于行中的第一个表格单元格，而不是表格行本身：

```
.topic_row td:first-child {
    border-left: 3px solid red;
} 
```

# apache - 密码通过 htaccess 保护多个目录

> ID：13204442
> 
> 赞同：6
> 
> 时间：2012-11-02T23:31:51.143
> 
> 标签：apache, .htaccess, .htpasswd

我可以通过站点根目录下的 htaccess 文件对目录进行密码保护（由于我的 CMS，我必须在站点根目录中使用一个 htaccess 文件）。我遇到的问题是将用户分配给我要保护的每个目录。我可以创建多个用户和密码保护多个目录，但任何用户都可以为任何受保护的目录工作。例如：

example.com/section-one 应该是私有的并由用户“one”访问。

example.com/section-two 应该是私有的并由用户“two”访问。

但是，任何用户都可以在任一部分工作，并且一旦用户登录到一个部分，他们就可以访问其他部分而无需输入密码。我知道这是我的 htaccess 文件的问题。我尝试使用但似乎无法弄清楚格式。所有在线信息都显示了如何对文件执行此操作，但目录并不那么容易找到帮助。

我正在使用这个：

```
<IfModule mod_authn_file.c>
SetEnvIf Request_URI "^/section-one.*$" private
AuthName "Password Needed"
AuthGroupFile /dev/null
AuthType Basic
AuthUserFile /www/server/.htpasswd
Require user one
Order Deny,Allow
Deny from env=private
Satisfy any
</IfModule>

<IfModule mod_authn_file.c>
SetEnvIf Request_URI "^/section-two.*$" private
AuthName "Password Needed"
AuthGroupFile /dev/null
AuthType Basic
AuthUserFile /www/server/.htpasswd
Require User two
Order Deny,Allow
Deny from env=private
Satisfy any
</IfModule> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T07:48:50.480

.htaccess 文件用于将特定的配置指令应用于它们所在的目录。不能使用一个 .htaccess 文件为不同的目录指定不同的配置。您要么需要将访问控制放在 server/vhost 配置文件中，要么每个目录使用一个 .htaccess。

# ios6 - 具有可填充视图宽度的可变单元格大小的集合视图

> ID：13204444
> 
> 赞同：0
> 
> 时间：2012-11-02T23:32:12.173
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我想知道是否有可能制作一个`UICollectionView`具有可变单元格宽度的单元格，其中有两种可能的单元格类型，

*   一种占据 iPad 屏幕 1/4 的
*   另一个占一半。

我希望它是，如果有一个 1/4 的单元格，然后是 1 个半单元格，我可以做到，所以最后有一个 1/4 的单元格，以确保显示的宽度被填满。或者如果有 3 1/4 的单元格，我可以告诉它显示另一个 1/4 的单元格。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:27:35.950

不知道您是否已经回答了您的问题，但要确保您的单元格填满 iPad 的宽度，您只需实现自己的 CollectionViewLayout。您只需将管理规则实施到`- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath`方法中即可。只需计算属性大小和框架。

`UIFlowLayout`如果你想让事情变得更简单并且你的布局不是太复杂，你可以超载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:23:18.280

是的，在集合视图中，单元格可以是所有不同的大小。例如：![在此处输入图像描述](../Images/50b076a5e6e8da8e6542e8905d9ea8f2.png)

# mysql - 使用 MySQL 会话变量在插入时增加排序顺序/权重

> ID：13204445
> 
> 赞同：1
> 
> 时间：2012-11-02T23:32:25.457
> 
> 标签：mysql, sql, insert

好吧，今天我的大脑已经完成了一些工作，我可能完全错误地处理了这个问题，所以我希望有人能给我一些关于这方面的见解。

我正在通过代码中的循环运行插入，尽管我想使用 MySQL 会话变量来增加 sort_order。

也许我只是想多了，有什么建议吗？该表是递归的，因此它确实具有父/子元素，因此除非明确定义父 id.. 这可以工作，否则做类似的事情是`SELECT MAX(sort_order)`行不通的。好吧，我说服了自己，仍然很好奇。

```
INSERT INTO another_table (some_field, sort_order)
VALUES
    (
        'some field value',
        (
            SELECT
                @sort_order := @sort_order + 1 sort_order
            FROM 
                (SELECT @sort_order := 0) so  
        )
    ) 
```

# php - 如何使用 jquery 将文本框值存储在数组中？

> ID：13204448
> 
> 赞同：0
> 
> 时间：2012-11-02T23:32:50.160
> 
> 标签：php, javascript, jquery, html

我有两个同名的文本框，`control_text`但它们的值不同。我想使用 jQuery 将我所有的文本框值存储在一个数组中。

HTML

```
<input type="text" name="control_text" placeholder="Text Label Image" class="required" id="control_text" value="firstvalue" />
<input type="text" name="control_text" placeholder="Text Label Image" class="required" id="control_text" value="secondvalue" /> 
```

JavaScript

```
var test_arr = $("input[name='control_text']");
$.each(test_arr, function(i, item) {
    // i = index, item = element in array
    alert($(item).val());
}); 
```

上面的代码分别显示文本框的值。我不想单独提醒这些值，我想用类似于 . 的逗号分隔符同时提醒这两个值 `(firstvalue, secondvalue)`。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T23:33:49.783

使用[`map()`](http://api.jquery.com/map/)方法：

```
var arr = $("input[name='control_text']").map(function() {
    return this.value;
}).get(); 
```

**附注：**单个页面中的元素应该具有*唯一的*ID，因此请检查您的标记是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-01T07:14:11.740

```
var newArray = [];
$( "input[name='control_text']" ).each(function() {
    newArray.push($( this ).val());
});
console.log(newArray); 
```

您也可以使用 .each 函数来实现它。

# windows-phone-8 - 从 Visual Studio 2012 express for Windows Phone 8 看不到 Windows Phone 8 模拟器

> ID：13204451
> 
> 赞同：1
> 
> 时间：2012-11-02T23:32:58.423
> 
> 标签：windows-phone-8, windows-phone-8-emulator

在我的机器上安装适用于 Windows Phone 8 的 Visual Studio 2012 express 以及 SDK 后，我注意到我没有选项可以调试到 Windows Phone 8 模拟器？

解决此问题的任何特定解决方法或修复程序会有所帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:03:03.320

糟糕，我使用的 PC 不支持硬件虚拟化。

我安装了多次，最后在启动时注意到了这条消息。

```
This Computer does not support hardware virtualization, which means Windows Phone Emulator 8.0 can't run on this PC. 
```

![此计算机不支持硬件虚拟化，这意味着 Windows Phone Emulator 8.0 无法在此 PC 上运行。](../Images/cf7491336cf55d23ae6b8c8e3b7f2d1c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:22:38.693

如果其他人遇到这种情况，这就是我发现的。

我的 Intel Core 2 Duo T9550，不支持 SLAT，这是启用 Hyper-V 所必需的，而这又是运行 WP8 模拟器所必需的……叹息……

你可以运行这个 Coreinfo 工具来查看你的 CPU 支持什么。请遵循此处的指导：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524(v=vs.105).aspx#system](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff626524(v=vs.105).aspx#system)

顺便说一句，Windows Phone 7.1 SDK 模拟器在我的机器上运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T20:47:58.947

Windows Phone 8 模拟器在 Hyper-V 中运行。Hyper-V 需要支持 SLAT（二级地址转换）的处理器。

SLALT (EPT) 英特尔 CPU 列表：[http ://ark.intel.com/Products/VirtualizationTechnology](http://ark.intel.com/Products/VirtualizationTechnology)

所以任何 Core2Duo 都不支持 Hyper-V :/

这是一个测试 CPU 的工具： http: [//slatstatuscheck.codeplex.com/](http://slatstatuscheck.codeplex.com/)

# c# - 我只需要每行剪切一个输入。然后在 C# 中剪切每个单词空间的每一行，但我似乎无法弄清楚二维数组是如何工作的

> ID：13204452
> 
> 赞同：1
> 
> 时间：2012-11-02T23:33:16.927
> 
> 标签：c#, arrays

```
string[][] Chop = null;
string[] Line = null;

private void button1_Click(object sender, EventArgs e)
{
    Line = textBox1.Text.Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None); // Im succesfull at cutting the input per line and stores it per line in Line variable.

    for(int x = 0;x < Line.Length; x++)
    Chop[][x] = Line[x].Split(' '); 

//I want the Chop to have an array of array of strings. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:47:08.763

所以你想要行数组，每行一个单词数组：

```
string[][] lineWords = textBox1.Text
            .Split(new[] { Environment.NewLine }, StringSplitOptions.None)
            .Select(l => l.Split())
            .ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:42:05.053

```
var lines = from line in text.Split(new [] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)
            select line.Split(new [] {' '}, StringSplitOptions.RemoveEmptyEntries); 
```

`lines` variable will be of type `IEnumerable<string[]>`.

If you need Arrays:

```
var lines = text.Split(new[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)
                .Select(line => line.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries))
                .ToArray(); 
```

`lines` will be `string[][]`

*UPDATE* Also I think you can use property `Lines` of `TextBox` to get text splittes by lines:

```
var chop = textBox1.Lines
                   .Select(line => line.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries))
                   .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:41:44.407

Although I'm not certain what the exact question is, I do see a problem in the code that is at least related to the title, thus why this is an answer and not a comment.

Firstly, your working with jagged arrays (arrays of arrays), and not multi-dimentional arrays.

... Normally I would give a good description of jagged arrays, but a quick google will probably explain them better than I would, so instead I will end with this: your last line of code should be

```
Chop[x] = Line[x].Split(' '); 
```

# ios - XMLHttpRequest 无法加载 https://sandbox.itunes.apple.com/verifyReceipt。Access-Control-Allow-Origin 不允许来源

> ID：13204453
> 
> 赞同：1
> 
> 时间：2012-11-02T23:33:22.527
> 
> 标签：ios, cordova, jquery-mobile, in-app-purchase, mobile-website

Apple 似乎不喜欢我的 ajax 请求。我正在尝试在应用内购买后验证 PhoneGap 应用中的收据。

```
// prepare JSON object for Apple
/* Retrieve the receipt data from the transaction’s transactionReceipt property (on iOS) or from the receipt file inside the application bundle (on OS X) and encode it using base64 encoding.
Create a JSON object with a single key named receipt-data and the string you created in step 1\. Your JSON code should look like this:
{
    "receipt-data" : "(receipt bytes here)"
} */
var data = JSON.stringify({
    'receipt-data' : btoa(transactionReceipt)
});
if(DEBUG) console.log('Data: ' + data);

var url = 'https://' + (DEBUG ? 'sandbox' : 'buy') + '.itunes.apple.com/verifyReceipt';
if(DEBUG) console.log('URL: ' + url);

// send the POST request
/* Post the JSON object to the App Store using an HTTP POST request. The URL for the store is https://buy.itunes.apple.com/verifyReceipt. */
$.ajax(url, {
    type: 'POST',
    data: data,
    dataType: 'json',
    success: function(data) {
        console.log('Request returned successfully.');

        // parse the response
        /*
        The response received from the App Store is a JSON object with two keys, status and receipt. It should look something like this:
        {
            "status" : 0,
            "receipt" : { (receipt here) }
        }
        If the value of the status key is 0, this is a valid receipt. If the value is anything other than 0, this receipt is invalid.
        */
        if(data.status === 0)
        console.log("Receipt is valid.");
    },
    error : function(jqXHR, textStatus, errorThrown) {
        console.error('Request failed with response code ' + errorThrown);
    }

}); 
```

我正在使用 jQuery 并且有：

```
$(document).bind("mobileinit", function () {
    // xss
    $.support.cors = true;
    $.mobile.allowCrossDomainPages = true;
} 
```

有没有人尝试通过 ajax 验证他们的收据并遇到这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:27:27.263

> Apache Cordova 中的域白名单是一种安全模型，用于控制对外部域的访问，例如[http://google.com](http://google.com)。默认安全策略是阻止所有网络访问

[http://docs.phonegap.com/guide_whitelist_index.md.html](http://docs.phonegap.com/guide_whitelist_index.md.html)

# c++ - 与类型的二进制表示相关的技术术语是什么？

> ID：13204454
> 
> 赞同：5
> 
> 时间：2012-11-02T23:33:31.967
> 
> 标签：c++, programming-languages, terminology, endianness

我目前正在编写一个`sizeof()`在 C++ 中测试字节顺序和基本类型的函数，以检测系统/编译器是“经典”还是非标准。我搜索了这个函数的名称，例如，`checkSystemSOMETHING()`但我不知道与类型的二进制表示或字节序之类的事物相关联的词。最好的词是什么来代替`SOMETHING`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T23:41:26.393

它是“数据模型”。在 32 位计算长期稳定之后再次相关，在 64 位架构中做出了不同的选择。Windows 是 LLP64，Linux 是 LP64。参考[在这里](http://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models)。

# php - 使用 ajax 将 JavaScript 数组传输到 PHP 数组？

> ID：13204457
> 
> 赞同：0
> 
> 时间：2012-11-02T23:33:35.520
> 
> 标签：php, javascript, ajax

我正在尝试将数据列表从 javascript 数组传输到 php 数组，但我似乎无法让 ajax 来解决问题。有人可以告诉我如何做到这一点的代码吗？到目前为止，这就是我所拥有的，这只是数组：

**JAVASCRIPT**

```
var dates;
// the dates array is then filled up here
// it contains information in the form {'2012-01-01', '2012-03-12', ...}

$.ajax({        
   type: "REQUEST",
   url: "NAMEOFPHPFILE.php",
   data: { sendData1 : dates },
   success: function() {
        alert("Attempting to transfer array -> AJAX");        
   }
}); 

var submissions;
// the submissions array is then filled up here
// it contains information in the form {int, int, ...}

// ect ......... with 3 more arrays using { sendData2 : submissions }, 
```

**PHP**

```
<?php
$bDates = $_REQUEST['sendData1']; 
// need to set this array = to the JavaScript dates array
$bSubmissions = $_REQUEST['sendData2'];
// need to set this array = to the JavaScript submissions array
?> 
```

我更喜欢使用 REQUEST 方法来防止信息登录到 URL。 **尝试 POST 而不是 REQUEST 时，此代码也不起作用**

在 .php 页面的最后，我将一堆数组输出到一个 CSV 页面上，在该页面中我遍历数组并将它们的元素放入文件中。这已经有效，但我需要将其中一些数组从 javascript 传输到 PHP，以便我可以吐出数据。看起来像这样：

```
<?php

$stringData = "Dates, Number of Lines Changed, , Bug Dates, Arrivals, Fixed, Closed, Hold_";
for($i = 0; $i < sizeof($dataXAxis); $i++){
        $date = substr($_REQUEST['Dates'][$i+1], 0, 24);
        $stringData .= "$date, $dataYAxis[$i], , $bDates[$i], $bSubmissions[$i], $bCompletions[$i], $bDones[$i], $bRejections[$i]_";
}

echo '<BR><BR><a href="download_csv.php?csv=' . $stringData . '" target="_blank">Download Your CSV File</a>';
?> 
```

为什么 AJAX 不起作用？数组显示为空...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:54:40.397

一种方法是尝试以 JSON 的形式发送数据。然后使用 json_decode，可以将其转换为数组。例子：

```
 var Json = {"User1":"John", "User2":"Joe", "User3","Jerry"};
   var data = "data="+Json;
   hr = new XMLHttpRequest();
   hr.onreadystatechange = function(){
       if(hr.readyState == 4 && hr.status == 200){
           console.log(hr.responseText);
       }
   }
   hr.open("POST", "parsefile.php", true);
   hr.send(data); 
```

然后，当您在 PHP 文件中获取数据时，它类似于：

```
 $data = $_POST['data'];
 $array = json_decode($data, true); 
```

这一切都将告诉 php 将我们的数据转换为关联数组。然后可以将其作为关联数组进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:06:18.697

简单地将数组转换为字符串

```
var data = [1,2,"hello"];
var data_str = data.join(","); 
```

然后将字符串转换为php中的数组：

```
$array = explode(",", $_REQUEST["data"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:53:45.237

我实际上只是在做这个。

jQuery

```
var group_ids = $('.form-elements li').map(function(){
    return $(this).data('group-id')
}).get()

$.get('{{ url('group/update_order_by') }}', {group_ids: group_ids}); 
```

来自宁静的 Laravel 框架的 PHP

```
public function get_update_order_by()
{
    $group_ids = Input::get("group_ids");
    $group_count = count($group_ids);

    for ($i = 0; $i < $group_count; ++$i) {
        $group = Group::find($group_ids[$i] );
        $group->order_by = $i;
        $group->save();
    }

    return true;
} 
```

原始 PHP（呃...）

```
 $group_ids = $_GET("group_ids");
    $group_count = count($group_ids);

    for ($i = 0; $i < $group_count; ++$i) {
        echo $group_ids[$i];
    }

    return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T23:43:26.577

在 PHP 中，`REQUEST`期望数组以下列格式传递：

```
sendData1[]=first&sendData1[]=second&sendData1[]=third 
```

这会自动转换为数组：

```
$sendData = $_REQUEST['sendData`];
echo $sendData[0];
echo $sendData[1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T00:11:22.167

首先，为了简单起见，创建一个包含要发送和解析的两个数组的数组：

```
var request = Array(dates, submissions); 
```

其次，确保您以格式正确的 JSON 格式发送请求。此外，在测试时，我建议在您的回调中返回远程文件的输出，以查看您的数据是如何被解析的。我推荐以下实现，以及通过 POST 发送：

```
$.ajax({        
   type: "POST",
   url: "NAMEOFPHPFILE.php",
   contentType: "application/json; charset=utf-8",
   data: JSON.stringify(request),
   success: function(data) {
        alert(data);        
   }
}); 
```

在您的 PHP 文件中，您可以使用以下命令将上述请求的内容解析为一个数组：

```
<?php
// convert json data read from the input stream to an array
// *note* you MUST set the true flag in the json_decode() function, otherwise it will convert the data into an object
$request = json_decode(file_get_contents('php://input'), true);
var_dump($request); 
```

您现在应该得到一个包含数组 var_dump 的警报（看起来很乱，我知道！）。

这应该足以让您入门，希望对您有所帮助！

# scala - 重建模式匹配以便我可以调用它的方法？

> ID：13204459
> 
> 赞同：0
> 
> 时间：2012-11-02T23:33:51.653
> 
> 标签：scala

我只是想不出用谷歌搜索的方法。例如，我有这样的代码：

```
import dispatch._
object Main extends App {

  val svc = url("http://www.php.net/license")
  val src:Promise[String] = Http(svc OK as.String) recover {
    case StatusCode(301) => "got the 301, now where the heck should I go?"
    case error => "caught error:" + error.toString
  }

  println(src())
} 
```

从调度包中，recover 需要一个 PartialFunction[Throwable,A] ，在我的例子中，A 最终是一个字符串。该 url 总是返回 301，大概是一条消息告诉我应该去哪里。但是在它的模式匹配中，我如何访问状态码继承的大量方法，这些方法可以让我知道出了什么问题？

在haskell我会这样做：

```
case x of
  sc@StatusCode(301) -> getMessage(sc)
  error -> ... 
```

如果无法在 scala 中获取原始对象，是否可以通过某种方式编写此代码以使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:36:13.850

对不起，我是个彻头彻尾的白痴。即使在编写了我的 haskell 解决方案之后，我什至没有想过要尝试这个：

```
case sc@StatusCode(301) => sc.getMessage 
```

# node.js - 使用带有 ejs 过滤器的默认值

> ID：13204461
> 
> 赞同：1
> 
> 时间：2012-11-02T23:34:01.743
> 
> 标签：node.js, express, ejs

如果 item.description 未定义或为空，我想默认为“无描述”：

我尝试了以下方法：

```
 <%-: ( item.description | markdown ) || '<p>No description</p>' %>
  <%-: ( item.description || 'No description' ) | markdown %> 
```

我还可以做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T03:21:12.037

不确定是否可以`||`与`|`EJS 的[过滤器](https://github.com/visionmedia/ejs#filters)混合使用，但您可以[添加一个过滤器](https://github.com/visionmedia/ejs#adding-filters)来完成它：

```
ejs.filters.or = function (arg, sub) {
  return arg || sub;
}; 
```

```
<%-: item.description | or:'No description' | markdown %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T16:34:20.097

我想知道您的问题的代码，为什么带有 ejs 模板表达式的预标记是`"<%-" not the "<%="`（输出或赋值输出）或`"<%=:"`（过滤器输出）签名？

顺便说一句，过滤器调用签名是单个竖线而不是双竖线，您可以随时根据需要调用...

# iphone - 如何使用 plist 在 iphone 上安装视频屏幕

> ID：13204465
> 
> 赞同：0
> 
> 时间：2012-11-02T23:34:28.077
> 
> 标签：iphone, xcode, video

视频大小为尺寸：**480 × 270px**。编解码器：H.264，AAC 带字幕，它适合​​宽度，但在 iphone 屏幕上留下黑色间隙：屏幕顶部和底部。

是否可以根据高度尺寸强制视频适合屏幕以适合屏幕（4：3宽高比）

我知道`UIViewContentModeScaleToFill`在 contentMode 中。但我不知道如何在 Xcode 中使用它？如果有可能`UIViewContentModeScaleToFill`在 plist 中有类似的东西？

**请参阅屏幕抓取底部的第 3 部 iphone 是首选结果。**

[对齐顶部 http://www.kerrydeaf.com/1full.png](http://www.kerrydeaf.com/1full.png "工具提示")

更新：**Xcode 4.5 中的 p.list**

[对齐顶部 http://www.kerrydeaf.com/plist.png](http://www.kerrydeaf.com/plist.png "工具提示")

# c# - Web 复选框没有为功能提供价值

> ID：13204466
> 
> 赞同：0
> 
> 时间：2012-11-02T23:34:38.580
> 
> 标签：c#, asp.net, checkbox, web, components

我有一个奇怪的问题，我似乎无法弄清楚。我为在服务器上运行的商业应用程序创建了一个 Web 组件。如果我更改`cbxGramEnabled.Checked`为`True`或`False`函数运行正常并进行更改。但是，如果我离开该`cbxGramEnabled.Checked`功能不会更新数据库。

运行该组件的代码如下所示：

```
private void WriteToSQL( )
{
    WriteEnableGram( _pkKey, cbxGramEnabled.Checked);
} 
```

这`cbxGramEnabled.Checked`是`CheckBox`我的 Web 应用程序自定义组件上的一个。

```
private void WriteEnableGram( int nPKkey, bool bChecked)
{
    string szQuery = string.empty;

    if (bChecked == true)
        szQuery = "UPDATE dbo.CustomKeyAttr SET EnableGram = 1 WHERE pkCustomKeyAttr = " + nPKkey.ToString() + ";";
    else
        szQuery = "UPDATE dbo.CustomKeyAttr SET EnableGram = 0 WHERE pkCustomKeyAttr = " + nPKkey.ToString() + ";";

    try
    {
        string szConString = @"Data Source=.\sqlexpress;Initial Catalog=MetricDB;User ID=webuser;Password=mypass;"; 
        using (var Conn = new SqlConnection(szConString))
        {
            Conn.Open();
            using (SqlCommand dbQuery = new SqlCommand(szQuery, Conn))
            {
                dbQuery.ExecuteNonQuery();
            }
        }
    }
    catch (SqlException)
    {
    }
    catch (Exception)
    {
    }
    finally
    {
        cbxEnableGram.Text = szQuery; // at least display what the query is somewhere on the page....
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:14:44.277

首先，让我们假设以下情况为真：

> 布尔值可以是`true`；`false`或`null`（未分配）。

复选框的`checked`属性可以具有这些值。我们也假设

> 如果在运行时在该行代码中`cbxGramEnabled`包含对实例的引用，则 的值永远**不会**是，除非在其框架实现中存在一些奇怪的错误。我假设这是一个 .NET 复选框？说明：仅当该对象的构造函数完成运行并将所有属性设置为不同于 的默认值时，引用才存在。`Checkbox``checked`**`null``null`**

 **因为，如果`checked`属性的值是`true`or `false`，代码将正常执行，正如您尝试使用文字 true/false 值所证明的那样，**我们确信实际值为`null`**。语句 2 证明**`cbxGramEnabled`在您的代码中此时不包含对象引用。**

本质上，变量`cbxGramEnabled`没有真正的价值，它包含一个`null`引用。原因是您的代码是在创建此复选框之前执行的。

通常在 Web 应用程序中，当您的页面仍在加载（创建组件）并且您的代码在页面完全加载之前执行时，就会发生这种情况。这很可能发生在往返服务器之间！我很确定这就是你的问题所在......**

# linux - 开放式嵌入式核心：将包添加到构建中

> ID：13204468
> 
> 赞同：0
> 
> 时间：2012-11-02T23:34:43.383
> 
> 标签：linux, embed, openembedded

因此，使用开放的嵌入式核心和 Igepv2 元层，我刚刚完成了虚拟/内核的构建，现在如果我想添加：

1.  我将如何去添加软件包，是否可以更改 bblayers/local.conf 文件然后开始一个新的配方（这只是建立在我已经得到的基础上）？

2.  如果我现在想构建 angstrom 发行版怎么办，我发现它需要与 oe-core 布局不同的设置有没有办法使用我已经在这里得到的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:39:24.390

你的问题并不完全清楚。您不会将软件包“添加”到虚拟/内核，而是将软件包添加到映像配方（例如 core-image-base）。构建虚拟/内核“目标”只会构建内核和任何依赖项需要构建内核。您最终会想要构建引导映像，并且有几个示例映像配方可供选择，例如“core-image-base”或 core-image-sato'等。这些构建根文件系统映像，通常是引导加载程序映像，具体取决于在你正在建造的机器上。

修改 bblayers.conf 和/或 local.conf 绝对没问题。请注意，尽管您放入 local.conf 中的任何内容基本上对每个配方 bitbake 进程都是可见的。bblayers.conf 是您添加自己的层以进行自定义的地方，因此您应该在其中修改的唯一内容是将层目录添加到堆栈中。

您可能想查看 yoctoproject.org 网站上记录的“hob”。这是一个用户界面，有助于更轻松地将包添加到配方中。有大量文档可用于所有这些，尽管阅读它会让你忙几天！:)

此外，请随时在 yocto 项目邮件列表上发布您的问题，yoctoproject.org 网站上也有详细说明。

玩得开心！

# javascript - “虚拟” dom 操作？

> ID：13204469
> 
> 赞同：9
> 
> 时间：2012-11-02T23:34:59.233
> 
> 标签：javascript, jquery, dom, dom-manipulation

我知道进行多次 dom 操作是不好的，因为它会强制多次重绘。

IE：

```
$('body').append('<div />')
         .append('<div />')
         .append('<div />')
         .append('<div />'); 
```

相反，更好的做法显然是：

```
$('body').append('<div><div></div><div></div><div></div><div></div></div>'); 
```

但我对虚拟操作很好奇

IE：

```
$('<div />').append('<div />')
            .append('<div />')
            .append('<div />')
            .append('<div />')
            .appendTo('body'); 
```

它仍然很糟糕吗，显然多次调用函数会产生一些开销，但是会不会对性能造成严重影响？

* * *

我问的原因是这样的：

```
var divs = [
    {text: 'First',  id: 'div_1', style: 'background-color: #f00;'},
    {text: 'Second', id: 'div_2', style: 'background-color: #0f0;'},
    {text: 'Third',  id: 'div_3', style: 'background-color: #00f;'},
    {text: 'Fourth', id: 'div_4', style: 'background-color: #f00;'},
    {text: 'Fifth',  id: 'div_5', style: 'background-color: #0f0;'},
    {text: 'Sixth',  id: 'div_6', style: 'background-color: #00f;'}
];

var element = $('<div />');

$.each(divs, function(i,o){
    element.append($('<div />', o));
});

$('body').append(element); 
```

想象一下 divs 数组来自描述表单的数据库表（好吧，我在示例中使用 div，但它可以很容易地用输入替换）或类似的东西。

或使用我们拥有的“推荐”版本：

```
var divs = [
    {text: 'First',  id: 'div_1', style: 'background-color: #f00;'},
    {text: 'Second', id: 'div_2', style: 'background-color: #0f0;'},
    {text: 'Third',  id: 'div_3', style: 'background-color: #00f;'},
    {text: 'Fourth', id: 'div_4', style: 'background-color: #f00;'},
    {text: 'Fifth',  id: 'div_5', style: 'background-color: #0f0;'},
    {text: 'Sixth',  id: 'div_6', style: 'background-color: #00f;'}
];

var element = '<div>';

$.each(divs, function(i,o){
    element += '<div ';

    $.each(o, function(k,v){
        if(k != 'text'){
            element += k+'="'+v+'" ';
        }            
    });

    element += '>'+o.text+'</div>';

});

element += '</div>';

$('body').append(element); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T23:39:22.740

首先，虽然很高兴阅读这样的潜在性能影响，但您应该始终从测量开始，看看您是否有问题。

如果您无法察觉问题，请编写最易读的代码。

如果你能察觉到问题，测量、改变和测量。

说了这么多，您发布的最后一个示例涉及尚未写入 DOM 的元素，因此在将`appendTo`元素添加到 DOM 之前不会重新绘制。

如果您能捕捉到第二个和第三个示例之间的速度差异，我会感到非常惊讶 - 如果您能看到它们之间的任何主要差异，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:41:47.403

如果您在附加节点时真的担心性能，则需要使用文档片段。这些将允许您在不重新绘制的情况下将元素附加到 dom。John Resign 有一篇关于这个主题的[优秀文章。](http://ejohn.org/blog/dom-documentfragments/)他注意到性能提高了 200-300%。我在我的一个应用程序中实现了文档片段，并且可以确认他的说法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T06:49:25.723

运行时良好的旧标记生成发生了什么？*说真的，怎么了？*

我同意@Sohnee 关于可读性重要性的观点，但 DOM 操作是浏览器可以执行的一些最昂贵的操作。维护一串标记的选项可以变得完全可读，并提供可以忽略不计的用户体验改进。

在[这个 jsperf](http://jsperf.com/dom-vs-html)中，我们在运行时创建了一个 10x100 的表 - 一个非常合理的（并且不是迄今为止最复杂的场景）数据分页。在运行最新版本 Chrome 的四核机器上，直接 DOM 操作脚本需要 60 毫秒才能完成，而标记缓存则需要 3 毫秒。

这在我的设置上是一个难以区分的区别，但是那些坐在公司防火墙后面的可怜的数字处理人员仍然被迫使用过时的 IE 版本呢？如果所需的 DOM 操作更重，需要进行属性操作并积极地强制[重新绘制/重新流动](http://www-archive.mozilla.org/newlayout/doc/reflow.html)怎么办？

我要说的是，如果你想优化一些 javascript，这不是一个糟糕的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T00:12:32.603

我认为，如果你开始意识到这种代码是性能瓶颈，你应该使用模板而不是 DOM 操作。

但是，是的，使用文档片段方法（在附加到 DOM 之前将所有节点放入一个分离的节点）在大多数情况下会更快，几乎不会变慢。

*   [http://mustache.github.com/](http://mustache.github.com/)
*   [https://developers.google.com/closure/templates/docs/helloworld_js](https://developers.google.com/closure/templates/docs/helloworld_js)
*   [https://developer.mozilla.org/en-US/docs/JavaScript_templates](https://developer.mozilla.org/en-US/docs/JavaScript_templates)

# ruby-on-rails - 使用 google_oauth2 获取“错误：redirect_uri_mismatch”

> ID：13204474
> 
> 赞同：17
> 
> 时间：2012-11-02T23:35:40.857
> 
> 标签：ruby-on-rails, omniauth

该 URL 似乎是正确的（昨天最后更新了它们）：

![在此处输入图像描述](../Images/21e553ea341bd962042cbd329e87556b.png)

文件也是：

**omn​​iauth.rb：**

```
provider :google_oauth2, 'MY_CLIENT_ID.apps.googleusercontent.com', 'MY_CLIENT_SECRET',
           :scope => 'https://mail.google.com/mail/feed/atom/'

Error: redirect_uri_mismatch
The redirect URI in the request: http://localhost:3000/auth/google_oauth2/callback did not match a registered redirect URI 
```

**header.html.erb**

```
<li><%= link_to "Sign in with Google", "auth/google_oauth2" %></li> 
```

**路线.rb：**

```
match '/auth/:provider/callback', to: 'sessions#omniauth_create' 
```

但我得到了这个：

```
> Error: redirect_uri_mismatch The redirect URI in the request:
> http://localhost:3000/auth/google_oauth2/callback did not match a
> registered redirect URI 
```

（Twitter 和 Facebook OmniAuth 运行良好）

不知道是什么问题。有什么建议可以解决这个问题吗？

**编辑**

我将URI更改为`http`...：

![在此处输入图像描述](../Images/e516943cd5e5079f76da54577f72419a.png)

但仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-03T00:50:57.627

看起来请求正在命中`http://localhost:3000/auth/google_oauth2/callback`，但您指定的与类似模式匹配的重定向 URI 是 for `https`。添加`http://localhost:3000/auth/google_oauth2/callback`到您的重定向列表可能会解决该问题。

**编辑：**另一个潜在的解决方法是在相应的重定向 URI 中包含一个尾随`/`，这在这种情况下似乎有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-29T16:05:37.937

`omniauth-oauth2`gem 版本有一个相对较新的问题`1.4` [https://github.com/intridea/omniauth-oauth2/issues/81#issuecomment-151038559](https://github.com/intridea/omniauth-oauth2/issues/81#issuecomment-151038559)

临时修复是在`Gemfile`

```
gem 'omniauth-oauth2', '~> 1.3.1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T06:09:22.600

![在此处输入图像描述](../Images/21e553ea341bd962042cbd329e87556b.png)

富

vi config/initializers/omniauth.rb `OmniAuth.config.full_host = 'https://localhost:3000' Rails.application.config.middleware.use OmniAuth::Builder do provider :google_oauth2, 'google_client_id', 'google_client_secret' end`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T03:55:53.630

分享一个对我有用的非常简单的*复制粘贴*解决方案。

我将我在代码中指定的内容复制为`redirectUri`ie`"redirect_uri": "http://127.0.0.1:3001/"`并将其粘贴`value`到要求**Authorized redirect URIs**`key`的*Google 设置*中。这样我可以确保两个参数是相同的。

 **如果`url`是计算出来的，我会`console.log()`在将其粘贴到谷歌设置之前从控制台窗口复制它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-16T02:16:48.617

我尝试了以上所有方法，但对我没有用。最后在我的错误消息中注意到我的回电略有不同。我在 localhost:3000 和 auth 之间有一个用户。不太清楚为什么。

```
http://localhost:3000/users/auth/google_oauth2/callback 
```

改变它，等了30分钟，它起作用了。**

# entity-framework - (EF 5 + .net 4,5) 使用 EF-Linq 和 SqlConnection 查询时将事务升级到 DTC

> ID：13204475
> 
> 赞同：2
> 
> 时间：2012-11-02T23:35:42.760
> 
> 标签：entity-framework, .net-4.5, entity-framework-5

我们最近升级了我们的项目以使用 .net 4.5 和 EF 5。我们使用传统的 SqlConnection 来查询应用程序的遗留部分，并使用 EF-Linq 进行休息。

升级后可以正常工作的代码开始抛出有关 MSDTC 服务不可用的错误。打开 MSDTC 服务可以解决问题。

**问题是为什么我的交易会升级？.net 4.5 或 EF 5 有什么变化吗？**

例如，我在 TransactionScope 中包装了一段代码，进行了两次更新。首先使用 SqlConnection，然后使用 EF+Linq。两者都使用完全相同的连接字符串部分，连接到 sql server 2012 中的同一数据库。它被升级为 DTC。它过去不会使用 .net 4 和 EF 4X 升级。

# assembly - 如何启动自制操作系统？

> ID：13204479
> 
> 赞同：2
> 
> 时间：2012-11-02T23:36:36.597
> 
> 标签：assembly, operating-system, nasm

所以几天前，我冒险进入了操作系统开发的未知领域。作为一种“Hello, World”程序，我在汇编中创建了这个引导加载程序：

```
;*********************************************
;   Boot1.asm
;       - A Simple Bootloader
;
;   Operating Systems Development Tutorial
;*********************************************

org     0x7c00              ; We are loaded by BIOS at 0x7C00

bits    16                  ; We are still in 16 bit Real Mode

Start:

    cli                 ; Clear all Interrupts
    hlt                 ; halt the system

times 510 - ($-$$) db 0             

dw 0xAA55 
```

然后，我使用 NASM 将程序集文件编译成 .bin 文件。接下来，我使用 PowerISO 将这个二进制文件转换为 ISO 文件。最后，我将 ISO 文件附加到 Microsoft Virtual PC 2007 中。当它最初不起作用时，我检查了 BIOS 并确保 CD/DVD 在启动优先级列表中排在首位。之后我尝试启动系统时，它给了我以下错误：

“重新启动，并选择适当的引导设备 ”

在互联网上搜索后，我发现这意味着 ISO 无法启动。当我对如何解决这个问题进行更多研究时，除了必须正确配置 ISO 才能启动之外，我找不到太多东西。我将如何去做，如果不可能，我还有什么其他选择？

我正在运行 64 位 Windows 7 家庭高级版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:30:58.933

Your program represents a [master boot record](http://en.wikipedia.org/wiki/Master_boot_record), not a bootable ISO image. It works fine when booted as a harddisk with for instance QEMU. Not all virtual machines will accept a harddisk image that small though. In that case you would first create a harddisk image, and then overwrite the first sector with your program.

Making a bootable ISO image is a bit more complex. Read this [wiki](http://wiki.osdev.org/ISO_9660) for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:33:35.360

我知道您使用的是 Microsoft Virtual PC（顺便说一下，我认为它只能启动 Windows），但我建议您使用其他东西。这里有几个选项（全部免费）：

*   Virtualbox：这款免费的虚拟化软件可能会让您更轻松地启动操作系统。
*   QEMU：我和操作系统开发人员的最爱，它使调试和尝试自定义操作系统变得非常容易。另一方面，我认为它仅在基于 UNIX 的系统上可用，因此请准备好使用 Linux Vm 或 Mac，或者安装 Linux。

# php - 使用 API 创建 Shopify 帐户时的自定义字段

> ID：13204482
> 
> 赞同：1
> 
> 时间：2012-11-02T23:36:47.950
> 
> 标签：php, shopify

我想使用 API 向 shopify 中的客户帐户添加一些自定义字段，然后在帐户页面上访问它们，我该怎么做？[我在http://wiki.shopify.com/Customer_%28API%29#Create_a_new_customer_account](http://wiki.shopify.com/Customer_%28API%29#Create_a_new_customer_account)看到了如何创建帐户，但我可以在某处的请求正文中添加任意字段吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:14:17.593

啊哈！我找到了描述自定义元字段的位置 - [http://www.shopify.com/technology/3032322-new-feature-metafields](http://www.shopify.com/technology/3032322-new-feature-metafields)。在该页面上描述了在流动模板中检索它们的语法，从 API 创建它们的细节位于 api.shopify.com/customer.html#create 的示例下，标记为“使用元场”。

# c++ - 去掉多余的括号

> ID：13204483
> 
> 赞同：6
> 
> 时间：2012-11-02T23:36:49.030
> 
> 标签：c++, string, map, expression, parentheses

问题：

从字符串中删除多余的括号。
例如

```
 ((a+b))*c       => (a+b)*c  
    (a+b)+c         => (a+b)+c  
    ((a+b)/(c+d))   => ((a+b)/(c+d))   
    (a+(((b-c)))*d) => (a+(b-c)*d)  and so on. 
```

我想出了以下解决方案：
方法：我扫描字符串并记住（使用映射）左括号的索引以及它是否是额外的（默认情况下是额外的）。如果我找到一个右括号，我会从 map 中检查相应的左括号，如果它是多余的，则将两者都删除。

```
void removeExtraParentheses(string& S){
  map<int, bool> pmap;
  for(int i = 0; i < S.size(); i++){
    map<int, bool>::iterator it;
    if(S.at(i) == '('){
        pmap[i] = true;
    }
    else if(S.at(i) == ')'){
        it = pmap.end();
        it--;
        if(!(*it).second){
            pmap.erase(it);
        }
        else{
            S.erase(S.begin() + i);
            S.erase(S.begin() + (*it).first);
            pmap.erase(it);
            i = i - 2;
        }
    }
    else{
        if(!pmap.empty()){
            it = pmap.end();
            it--;
            (*it).second= false;
        }
    }
  }
} 
```

时间复杂度：O(n2)
空间：O(n)
我对我的解决方案不太满意，因为我使用了额外的存储空间并且在二次时间内完成。

我们可以在 O(n) 时间和 O(1) 空间内做到这一点吗？如果不是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:45:16.553

构建一个表达式树，然后用最少的括号重新生成表达式。原始文件中没有在生成中的任何括号都是不必要的。

一个简单且几乎正确的解决方案是为每个运算符分配优先级。然后，只要您正在处理的节点正下方的节点是优先级低于该节点的运算符，您就需要括号；例如，如果您位于`*` （乘法）节点，并且两个子节点之一是`+` （加法）节点。加上一些处理左右绑定的逻辑：如果你在一个`+`节点上，右手节点也是一个`+`节点，你需要括号。

这只是部分正确，因为 C++ 中有一些构造不能真正映射到优先语法：我想到了一些类型转换构造或三元运算符。然而，至少在三元运算符的情况下，特殊处理并不是那么困难。

编辑：

关于您的大 O 问题：这显然不是空间中的 O(1)，因为您需要在内存中构造整个表达式。我认为内存的 O(1) 是不可能的，因为潜在地，你可以有无限的嵌套，并且在不确定的时间之后你不能判断括号是否是必要的。我没有真正分析过它，但我认为它是 O(n) 的时间。节点数的上限是`n`（字符串的长度），您需要准确地访问每个节点一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:58:11.890

或多或少在网上找到...

给定输入：((A+B)*C) 预期输出：(A+B)*C

假设：

*   Peek（队列）只是告诉队列前端的元素而不删除它。
*   优先级（）是一个查看运算符优先级表的函数

伪代码如下：

1.  将中缀表达式转换为 RPN（例如，Shunting-yard algo O(n)）

    `AB+C*`

2.  仅在队列中插入运算符`Q`

    (前)+ -------- *(后)

3.  解析后缀表达式
4.  如果是操作数，则压入堆栈'S'
5.  如果运算符
    *   y=删除(Q)
    *   如果优先级(y) > 优先级(peek(Q))，则推送(S, "Pop(S) y Pop(S)")
    *   如果优先级（y）<优先级（peek（Q）），则推送（S，“（Pop（S）y Pop（S））”）
6.  最终结果在上面`S`

都应该是 O(n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T00:04:21.157

我以为我会刺伤这个。这是我突然想到的问题的解决方案。请注意，这是伪代码，并不意味着直接运行。

（实际上，它更像是 C++，但自从我上次编写真正的 C++ 以来已经有一段时间了，当我打算通过算法时，我不想努力让一切都正确。）

```
queue<tuple<int, bool> > q = new queue<tuple<int, bool> >();

for (int i = 0; i < str.length; i++)
{
    char a = str.charAt(i);

    if (a == '(')
    {
        q.push(new tuple<int, bool>(i, false));
    }
    else if (a == ')')
    {
        if (q.top().bool)
        {
            // remove top.int and i from string
        }

        q.pop();
        q.top().bool = true;
    }
    else
    {
        q.top().bool = false;
    }
} 
```

它在空间中完成工作`O(n)`并使用`O(n)`空间（或者实际上，使用的空间量实际上基于字符串中存在的最深嵌套级别，但它保证低于`n`）

（请注意，实际上`// remove top.int and i from string`不能在`O(1)`.`O(1)`然后您可以删除 O(1) 中的两个字符。最后，您可以通过迭代 O(n) 中的列表来构建最终字符串。另一种解决方案是实际处理 DummyOrCharacters 的数组（或向量） , 要么是一个虚拟的，不包含任何内容，要么包含一个字符。再一次，您可以用 dummy 中的虚拟替换字符`O(1)`。再一次，您将遍历结构并在`O(n)`)中构建输出字符串

# d3.js - 有没有办法使节点可拖动/到另一个父节点或子节点以重新排列 d3.js 中的节点

> ID：13204484
> 
> 赞同：2
> 
> 时间：2012-11-02T23:36:49.937
> 
> 标签：d3.js

在搜索分层组织结构图控件时，我遇到了一篇关于如何在 d3.js 中定位节点的帖子，我想知道是否有**1) 是一种编辑树/拖动子项的方法。2）如何导出编辑的树。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:01:03.513

要回答您的第二个问题，一种方法是获取 SVG 的父节点的内容（假设您的 SVG 包含在具有 id 的节点中`my_svg_container`），并将其重新打包为可以打开的“真实”SVG文件支持 SVG 的编辑器，例如 Inkscape 或 Illustrator：

```
var rawSvg = $('#my_svg_container').outerHTML();
var result = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" version="1.1">' + rawSvg + '</svg>'; 
```

`outerHTML()`功能：

```
jQuery.fn.outerHTML = function() {
    return jQuery('<div />').append(this.eq(0).clone()).html();
}; 
```

然后使用隐藏的 Web 表单到`POST`CGI`result`脚本，将其作为文件打印到请求的 Web 浏览器。当单击按钮或发生设置为触发表单的其他事件时，将触发表单。然后浏览器询问用户将文件保存到本地文件系统。

如果一个示例表单包含字段`svg_data`和`svg_fn`，其中包含 SVG`result`和您选择的一些文件名，一个非常基本的 Perl 脚本可能类似于：

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI;
use CGI::Pretty qw/:standard/;

my $val = param('svg_data');
my $fn = param('svg_fn');

print "Content-Type: application/x-gzip\n";
print "Content-Disposition: attachment; filename=$fn\n";
print "Content-Description: File to download\n\n";
print $val; 
```

您可能会添加一些数据验证代码，以确保您打印的是 SVG 文件而不是其他文件。

# java - 我如何在java中可视化图形？

> ID：13204485
> 
> 赞同：0
> 
> 时间：2012-11-02T23:36:59.390
> 
> 标签：java

> **可能重复：**
> [用 Java 绘制图形](https://stackoverflow.com/questions/1277126/plot-graphs-in-java)

我试图在我的 java 应用程序中为 x 和 y 值创建图形。不幸的是，在使用[http://www.epic.noaa.gov/java/sgt/index.html](http://www.epic.noaa.gov/java/sgt/index.html)中的库时，我发现大多数类/方法都已弃用。请帮助我找到摆脱这种情况的方法。是否有任何替代库可用于构建图表。我有一个 for 循环，在其中生成 x 和 y 值。因此，我可以直接提供数据然后在循环结束时创建图表的方法会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:41:13.617

Try this one here, this is the link, yes this is it: [http://www.jfree.org/](http://www.jfree.org/)

# php - 将 json 数据解析为变量并在每次迭代时提交给函数

> ID：13204492
> 
> 赞同：0
> 
> 时间：2012-11-02T23:37:49.740
> 
> 标签：php, javascript, json

我创建了一个生成 json 响应的 php 脚本

这是输出的示例：

```
[[],{"idgps_unit":"2","lat":"40","lon":"40","name":"ML350","notes":"Andrew","dt":"2012-10-29 19:43:09","serial":"3602152","speed":"44","odometer":"208.49"},{"idgps_unit":"1","lat":"42","lon":"39","name":"unit1","notes":"fake unit 1","dt":"2012-10-18 18:16:37","serial":"12345","speed":"0","odometer":"0.16"}] 
```

这就是我在 PHP 中形成响应的方式：

```
 $data[] = array();
    foreach ($list->arrayList as $key => $value) {

        $unit = new Unit();
        $unit = $value;
        //create array for json output
        $data[] = array('idgps_unit' => $unit->idgps_unit, 'lat' => $unit->lat,
            'lon' => $unit->lon, 'name' => $unit->name, 'notes' => $unit->notes,
            'dt' => $unit->dt, 'serial' => $unit->serial, 'speed' => $unit->speed,
            'odometer' => $unit->odometer);
    }
    echo json_encode($data); 
```

现在，在 JS 中我这样做了：

```
function getCheckedUnits() {
    jQuery(function($) {    
        $.ajax( {           
            url : "json.php?action=get",
            type : "GET",
            success : function(data) {
                var jsonData = JSON.parse(data);

                ///PARSE VALUES AND SUBMIT TO A FUNCTION :: START
                var C_longitude = 0;
                var C_name = 0;
                var C_idgps_unit = 0;
                var C_serial = 0;
                var C_speed= 0;
                var C_notes= 0;
                var C_dt = 0;
                var C_time = 0;
                var C_odometer = 0;

                initialize(C_longitude,C_name,C_idgps_unit, C_serial,C_speed, C_notes, C_dt, C_time, C_odometer);
                ///PARSE VALUES AND SUBMIT TO A FUNCTION :: END
            }
        });
    });
} 
```

我需要将json响应解析为值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:50:32.357

假设`JSON.parse(data)`只获取 JSON 响应中的关联数组，您应该能够获取 JSON 数据中的值，如下所示：

```
var i = 1;
var C_longitude = jsonData[i]["lon"];
var C_name = jsonData[i]["name"]; 
```

假设 JSON.parse() 没有删除第一个空数组，i = 1 将获得第一批数据，i = 2 将获得第二批数据。

解析的 JSON 的行为方式与在 JavaScript 中定义的方式相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:50:46.237

如果您`dataType: "json"`输入 ajax 设置，它将返回一个 json 对象，而不需要再次解析它。所以这看起来像：

```
function getCheckedUnits() {
    jQuery(function($) {    
        $.ajax( {           
            url : "json.php?action=get",
            type : "GET",
            dataType: "json"
            success : function(data) {

            }
        });
    });
} 
```

但是，您也可以使用自己的选项，而不仅仅是使用 parseJSON 函数`var jsonData = jQuery.parseJSON(data);`

# iphone - 如何从 [UIMenuController sharedMenuController] 对象中获取 targetRect

> ID：13204497
> 
> 赞同：0
> 
> 时间：2012-11-02T23:38:04.680
> 
> 标签：iphone, objective-c, ios, ipad, ipod

我需要获取 [UIMenuController sharedMenuController] 的 targetRect。我已经尝试过这个：

```
[UIMenuController sharedMenuController] addObserver:self forKeyPath:@"targetRect" :NSKeyValueObservingOptionNew context:NULL]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T18:17:15.983

您是否要为 UITextView 或 UIWebView 获取此信息？如果是 UITextView，这个答案可能会对您有所帮助。

[如何从 UITextView 获取选定的文本框](https://stackoverflow.com/questions/8683848/how-can-i-get-the-selected-text-frame-from-a-uitextview?rq=1)

你不能得到实际的`targetRect`，因为它在 UIMenuController 中被声明为私有。

# algorithm - Mean max subset of array values

> ID：13204499
> 
> 赞同：1
> 
> 时间：2012-11-02T23:38:18.907
> 
> 标签：algorithm

I am working on an algorithm to compute multiple mean max values of an array. The array contains time/value pairs such as HR data recorded on a Garmin device over a 5 hour run. the data is approx once a second for an unknown period, but has no guaranteed frequency. An example would be a 10 minute mean maximum, which is the maximum average 10 minute duration value. Assume "mean" is just average value for this discussion. The desired mean maximal value's duration is arbitrary, 1 min, 5 min, 60 min. And, I'm likely going to need many of them-- at least 30 but ideally any on demand if it wasn't a lengthy request.

Right now I have a straight forward algorithm to compute on value:

1) Start at beginning of array and "walk" forward until the subset is equal to or 1 element past the desired duration. Stop if end of array is reached.

2) Find the average of those subset values. Store as max avg if larger than current max.

3) Shift a single value off the left side of array.

4) Repeat from 1 until end of array met.

It basically computes every possible consecutive average and returns the max. It does this for each duration. And it computes a real avg computation continuously instead of sliding it somehow by removing the left point and adding the right, like one could do for a Simple-moving-average series. It takes about 3-10 secs per mean max value depending on the total array size.

I'm wondering how to optimize this. For instance, the series of all mean max values will be an exponential curve with the 1s value highest, and lowering until the entire average is met. Can this curve, and all values, be interpolated from a certain number of points? Or some other optimization to the above heavy computation but still maintain accuracy?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:47:05.360

“它会连续计算一个真正的平均计算，而不是通过移除左边的点并添加右边的方式来滑动它，就像一个简单移动平均系列可以做的那样。”

为什么不直接滑动它（即保持一个运行总和除以该总和中的元素数量）？

# r - 如何使用 R 从需要 cookie 的 SSL 页面下载压缩文件

> ID：13204503
> 
> 赞同：6
> 
> 时间：2012-11-02T23:39:22.620
> 
> 标签：r, web-scraping, rcurl

我正在尝试从需要按下“我同意”按钮然后存储 cookie 的 https 页面下载文件。如果这个答案在某处很明显，我很抱歉..

当我直接在 Chrome 中打开网页并单击“我同意”时 - 文件开始自动下载。

[http://www.icpsr.umich.edu/cgi-bin/bob/zipcart2?path=SAMHDA&study=32722&bundle=delimited&ds=1&dups=yes](http://www.icpsr.umich.edu/cgi-bin/bob/zipcart2?path=SAMHDA&study=32722&bundle=delimited&ds=1&dups=yes)

我试图复制[这个例子](https://stackoverflow.com/questions/10213194/use-rcurl-to-bypass-disclaimer-page-then-do-the-web-scrapping)，但我不认为hangseng 网站实际上存储cookie/身份验证，所以我不知道这个例子是否应该是我所需要的。

除此之外，我认为 SSL 使身份验证复杂化，因为我认为 getURL() 调用将需要像 cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl")) 这样的证书规范

我是 RCurl 的初学者，不知道这个网站是不是很困难，或者我只是错过了一些明显的东西。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T14:20:24.883

这更容易做到，`httr`因为它设置了所有内容，以便 cookie 和 https 无缝工作。

生成 cookie 的最简单方法是让网站为您完成，方法是手动发布“我同意”表单生成的信息。然后，您再次请求下载实际文件。

```
library(httr)
terms <- "http://www.icpsr.umich.edu/cgi-bin/terms"
download <- "http://www.icpsr.umich.edu/cgi-bin/bob/zipcart2"

values <- list(agree = "yes", path = "SAMHDA", study = "32722", ds = "", 
  bundle = "all", dups = "yes")

# Accept the terms on the form, 
# generating the appropriate cookies
POST(terms, body = values)
GET(download, query = values)

# Actually download the file (this will take a while)
resp <- GET(download, query = values)

# write the content of the download to a binary file
writeBin(content(resp, "raw"), "c:/temp/thefile.zip") 
```

# php - 使用 PHP 在 URL 中获取名称

> ID：13204510
> 
> 赞同：1
> 
> 时间：2012-11-02T23:40:23.350
> 
> 标签：php, javascript, html, anchor

我想使用（最好）PHP 或 JavaScript 获取 URL。该页面是使用锚名称（例如`index.php#aboutme`）打开的。当我使用

```
$host = $_SERVER['HTTP_HOST'];
$script = $_SERVER['SCRIPT_NAME'];
$params = $_SERVER['QUERY_STRING']; 
```

它最后`http://afterimagedesign.tk/index.php`没有返回`#home`。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:44:35.797

PHP 永远无法获得这个标签（这就是它的名称），因为浏览器永远不会以任何形式将它发送到服务器。

JavaScript 可以使用 访问它`window.location.hash`，但那是**客户端的**。

**[服务器端编程和客户端编程有什么区别？](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:44:20.987

```
<?
echo parse_url("http://localhost/index.php#aboutme",PHP_URL_FRAGMENT);
?> 
```

输出：关于我

或与 JS

```
window.location.hash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T04:30:15.310

使用 PHP 访问这些数据的唯一方法是在页面加载时通过 AJAX 调用将其发送到 PHP。正如其他回复所说，主题标签永远不会在原始请求中发送到 PHP。所以你必须在之后发送它。

如果这是您需要的信息，您将不得不将您的应用程序更改为不使用主题标签，而是将此数据附加到查询字符串（即 index.php?home 而不是 index.php#home 并使用 javascript 手动滚动页面时）基于此加载。

# java - Creating my own event for right button click

> ID：13204512
> 
> 赞同：0
> 
> 时间：2012-11-02T23:40:41.400
> 
> 标签：java, swing, mouse, mouseevent, right-click

I have some component on the frame and I need it to respond just on right button click. I have to use my own event. Should I extend `MouseEvent`? How can I separate right button click from others in my event?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T23:53:46.640

不，您不会*扩展*MouseEvent，而是*使用*MouseEvent。

如果这是一个 Swing GUI，您可以向组件添加一个 MouseListener，然后在 MouseListener 的 mousePressed 方法中，获取传递给该方法的 MouseEvent 对象，获取它的 modifiersEx，然后检查是否按下了右键：

```
public void mousePressed(MouseEvent mEvt) {
   if ((mEvt.getModifiersEx() & MouseEvent.BUTTON3_DOWN_MASK) != 0) {
      // right button has been pressed
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T23:53:56.593

该类`MouseEvent`有一个方法可以让您检查使用了哪个鼠标按钮。它称为[getButton](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html#getButton())，它返回一个`int`值，您可以将其与[预定义值之一进行比较](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html#BUTTON1)

最重要的是，有一个名为 的方便类`SwingUtilities`，它为这些字段的使用提供了一个很好的抽象层。这是一个你会发现特别有趣的方法：[`isRightMouseButton`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#isRightMouseButton(java.awt.event.MouseEvent))

换句话说，你不需要创建你自己的`MouseEvent`，一个`MouseListener`实现就足够了。这是一个内联实现的示例，不相关的细节被排除在外。

```
new MouseListener(){

        @Override
        public void mouseClicked(MouseEvent e) {
            if(SwingUtilities.isRightMouseButton(e)){
                //do what you want on right click
            }
        }
        // other methods required by the interface

    }; 
```

# node.js - Catch-all root level routing in Express.js: considerations and reserving possible routes for future use?

> ID：13204513
> 
> 赞同：2
> 
> 时间：2012-11-02T23:40:49.607
> 
> 标签：node.js, routing, express

I'm using Express.js (3.0) to develop a Node web app; I'd like to have clean URLs for both user profiles:

**domain.com/username**

as well as for pages each user creates and shares:

**domain.com/username/pagename**

I really prefer the clean URLs to using something like **domain.com/profile/username** or **domain.com/pages/username/pagename**.

The current route configuration for our development is bootstrapped like so:

```
app.get('/', content.home);
app.get('/about', content.about);
app.get('/signup', users.signup);
app.get('/login', users.login);
app.get('/:user', users.profile);
app.get('/:user/:userpage', userpage.render); 
```

The last two being the catch all routes. Now this works fine, but I'm not sure if it's a bad design or implementation.

More importantly, I'd like to reserve a 100 or so page names for future use, like 'contact', 'careers', 'cancels', 'pricing', etc. I don't plan to launch with these pages, but I'm wondering if I can create a route file that captures these requests and sends them to a placeholder page, rather than them being evaluated as a user profile or user generated page.

I can obviously prevent those usernames from being created, but there's got to be a creative approach for the routing as well, and understand any other considerations when using catch-all root level routing-- this can cause an unwieldily amount of DB strain due to the user and page look ups for non-existing objects or pages.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:36:36.853

What you could do is something like the following snippet of code. It's in coffee-script, but the general theory is the same.

```
placeholder = (req, res, next) ->
  res.render 'placeholder'

reserved = ['/contact','/careers','/cancels','/pricing']

each page in reserved
  app.get page, placeholder

app.get '/:user', .... 
```

If you decide you want to add an extra placeholder page, just add it into that array and restart the application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:43:50.320

I'm not 100% sure, but if you put all your routes above the :user then a user who registered your pagename would not get displayed.

# c# - 如何从外部脚本调用 HTML 中的 JavaScript 函数

> ID：13204515
> 
> 赞同：0
> 
> 时间：2012-11-02T23:41:06.170
> 
> 标签：c#, javascript, html

我在脚本标签中的 html 中有一个 JavaScript 函数。我想从外部 JavaScript 文件中声明的另一个 JavaScript 函数调用此函数。假设 function1 在脚本标签中，而 function2 从外部文件中调用它，这样做的正确语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:42:31.853

假设 function1 在 function2 调用它之前定义，并且 function1 不带参数：

```
function1(); 
```

# javascript - 带有 2 个参数的 Jquery 函数

> ID：13204520
> 
> 赞同：0
> 
> 时间：2012-11-02T23:41:26.660
> 
> 标签：javascript, jquery

我正在阅读这篇关于 knockoutJs 的非常有趣的文章（[http://wildermuth.com/2011/11/20/Using_MVVM_on_the_Web_with_KnockoutJS](http://wildermuth.com/2011/11/20/Using_MVVM_on_the_Web_with_KnockoutJS)）

我遇到了这个 jquery 调用：

```
 $.each(response.results, function (x, game) {
          theViewModel.games.push(new gameModel()
          .id(game.Id)
          .name(game.Name)
          .releaseDate(game.ReleaseDate)
          .price(game.Price)
          .imageUrl(game.ImageUrl)
          .genre(game.Genre));
        }); 
```

我不明白的是函数 (x, game)，x 是索引不是？，'game' 参数怎么样，它来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:49:37.240

您提供的回调`$.each`将为每个结果调用一次`response.results`。当它调用回调时，它将传入索引和结果。

例如，它这样做（说明性示例）

```
for (var i = 0; i < response.results.length; i++) {
    yourCallback(i, response.results[i]);
} 
```

# ruby - Watir WebDriver Error Empty Body

> ID：13204528
> 
> 赞同：0
> 
> 时间：2012-11-02T23:42:03.727
> 
> 标签：ruby, selenium, webdriver, watir

I'm writing a watir script. It runs fine on OS X but when I run it on ubuntu, after the the first few watir commands, I get the following error:

`empty body: "application/json" (500) /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:58:in `create_response' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:65:in `request' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:183:in `switchToDefaultContent' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/target_locator.rb:68:in `default_content' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:180:in `assert_exists' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/frame.rb:6:in `locate' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:362:in `assert_exists' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/frame.rb:30:in `assert_exists' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:383:in `locate' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:362:in `assert_exists' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/select.rb:125:in `select_by' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/select.rb:64:in `select' /home/gabe/CTEC-Scraper/lib/tasks/scrape.rake:212:in `block in <top (required)>' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain' /home/gabe/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run' /home/gabe/.rvm/gems/ruby-1.9.3-p125/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>' /home/gabe/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `load' /home/gabe/.rvm/gems/ruby-1.9.3-p125/bin/rake:19:in `<main>'`

NOTE: the 1 line form my file in the stack trace is

`frame.select_list(:name => 'SOME_ID').select('SOMETHING')`

and `frame` is `frame = @browser.frame(:id => 'SOME_FRAME')`

Again, this works in OS X. I am using Firefox as my browser. When I use Chrome, it gets passed this issue but breaks later on in a part of the site not compatible with Chrome (don't blame me, I didn't write it haha)

# windows - dotNerInstaller 出现错误“无法打开安装包。验证...”

> ID：13204530
> 
> 赞同：1
> 
> 时间：2012-11-02T23:42:07.060
> 
> 标签：windows, visual-studio, installation, windows-installer, dotnetinstaller

当我在 C:\Program Files\dotNetInstaller\bin 文件夹中创建 exe 并运行它时，它运行完美，安装完美，但是当我尝试从任何其他位置/路径安装该 exe 时，出现错误“安装包无法打开。验证该包是否存在并且您可以访问它。等等......“我创建了一个 exe 并移动到另一个 XP 系统，在那个系统上，它再次给我错误？

解决方案是什么？有没有管理员权限问题？我已经尝试过 Administrator_Required 选项的 TRUE 和 FALSE。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T06:27:12.023

现在问题已经解决了。我应该在 MSI->Package 字段中写入#CABPATH\。在我写 #TEMPPATH\ 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:03:27.320

我认为您可以添加位置：

```
 C:\Program Files\dotNetInstaller\bin 
```

在 PATH 环境变量中。请按照以下步骤操作：转到

```
My Computer->Right click->Properties->Advanced System Settings
->Click Environmental Variables. Now click PATH and then click EDIT. 
```

在变量值字段中，转到末尾并附加“;” （不带引号），然后添加上面的路径。

# php - PHP send stream to browser as zip archive

> ID：13204532
> 
> 赞同：1
> 
> 时间：2012-11-02T23:42:15.033
> 
> 标签：php, http-headers, zip

I am making a call(PHP server) to an API and I can confirm that I am getting a response, my code at the point where I know I am getting a response is:

```
$binaryF = $rsObject->makeCall('get', "/JobData/{$_GET["jID"]}", "?format=bin");

//header("Pragma: public"); // required
//header("Content-Type: application/zip");
//header("Content-Disposition: attachment; filename=ss.zip");
//header("Content-Length: " . filesize($binaryF.length));
//header("Content-Transfer-Encoding: binary");

file_put_contents('C:\ss.zip', $binaryF); 
```

If I keep the code as is and click on the link that takes me to the page with this code on it, ss.zip is created and I open it and confirm that it has the correct content. The data is coming from an API call on the first line and is basically a zip package. If I remove the comments and comment out the file_put_contents line then the browser opens a file save dialog box but if I save it the archive is 0 bytes?

How do I send the content to a browser after retrieving it from the api call? I do not want to save it to disk first, I want to send it to the browser making the request directly.

Thank you Jack

Ok. I changed it to:

```
header("Pragma: public"); // required
header("Content-Type: application/zip");
header("Content-Disposition: attachment; filename=ss.zip");
header("Content-Length: " . strlen($binaryF));
header("Content-Transfer-Encoding: binary"); 
```

and now it opens the file save. I save it and it is 8 K but when I try t oopen it I get a message of: "Windows cannot open the folder" It complains that the zip is invalid? At least I am getting somewhere, thanks for the help so far!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:54:02.270

尝试（未经测试）：

```
header('Content-type: application/octet-stream');
header('Content-disposition: attachment; filename=ss.zip');

echo $binaryF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:55:19.807

`$binaryF`需要是您尝试提供的文件的文件路径的字符串值`filesize()`才能工作。

您可以使用`strlen()`获取文件大小以在 ContentLength 标头中使用。

当然，您仍然需要将文件实际输出到客户端浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T00:33:24.380

好的，@zerkms 帮助我指出我应该使用： strlen($binaryF) 而不是 filesize($binaryF.length) 他在聊天会话中通过告诉我打开 zip 存档（使用像记事本这样简单的东西）帮助我我确实得到了 file_put_contents('C:\ss.zip', $binaryF); 这表明生成的内容只是部分正确，有一些 HTML 内容滑入了实际调用的响应中。所以所有的功劳都归于@zerkms，谢谢。

什么有效？以下对我有用：

```
header("Pragma: public"); // required
header("Content-Type: application/zip");
header("Content-Disposition: attachment; filename=ss.zip");
header("Content-Length: " . filesize($binaryF.length));
header("Content-Transfer-Encoding: binary");

echo $binaryF 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T00:15:00.263

我对 PDF 有一些类似的问题，对我来说`Content-Length`无法正确计算，`strlen()`因为它不支持`multibyte-characters`.

试试这个：

```
header("Content-Length: " . mb_strlen($binaryF)); 
```

有关更多详细信息，请参阅文档：[http ://www.php.net/manual/en/function.mb-strlen.php](http://www.php.net/manual/en/function.mb-strlen.php)

# linux - OpenMP provides 13.5 times improvement on Visual Studio 2010 but nothing on Unix

> ID：13204535
> 
> 赞同：2
> 
> 时间：2012-11-02T23:42:46.140
> 
> 标签：linux, openmp

I'm a new OpenMP user and have parallelized code that runs 13.5 times faster (14 threads) on Visual Studio 2010 (Windows 7 Ultimate x64). The performance on CentOS 5.8 x64 (gcc 4.1.2) or SUSE x64 (gcc 4.5.1) is zip. I've verified that multiple threads are being used. Is there some system flag or option I need to turn on? Yes, OMP_NUM_THREADS is in the environment and set to 8\. The CentOS machine is a dual xenon processor.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:41:19.293

使用 8 个内核，听起来几乎不可能有 13.5 倍的加速，无论您使用多少线程。

我怀疑你的测量是错误的。你如何衡量绩效？在 Unix 中，命令“time ./myprogram”将返回 3 个不同的时间。“真实”时间是您感兴趣的时间，而“用户”时间是 cpu 时间（每个核心花费的时间总和）。在windows中我不知道，但我猜你会发现一个“用户”时间比“cpu”时间大13.5倍，这并没有说明加速，而是你所有的14个线程都在使用中。

您应该比较单线程程序和 openmp 程序之间的“实时”时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:46:21.693

您是否使用了正确的编译器/链接器开关，例如`-fopenmp -lgomp`？也许首先尝试 OpenMP 文档中的一个简单示例，以证明您的设置正确。

# c# - Getting value of cell in DataGrid in WPF

> ID：13204536
> 
> 赞同：6
> 
> 时间：2012-11-02T23:42:50.723
> 
> 标签：c#, wpf, datagrid

For WinForms it's:

```
var value = DataGridView.Rows[0].Cells[0].Value 
```

Is there any way to get it in WPF?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:45:24.020

我认为最好的方法是使用 Items 属性并直接访问您的数据项：

```
var dataItem = dataGrid.Items[0] as ...; 
```

但是您可以使用此类获取单元格并使用 GetValue() 方法访问值（更像您的示例）。

从这里获取的代码：[datagrid get cell index](https://stackoverflow.com/questions/6888892/datagrid-get-cell-index)

```
static class DataGridHelper {
    static public DataGridCell GetCell(DataGrid dg, int row, int column) {
        DataGridRow rowContainer = GetRow(dg, row);

        if (rowContainer != null) {
            DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(rowContainer);

            // try to get the cell but it may possibly be virtualized
            DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            if (cell == null) {
                // now try to bring into view and retreive the cell
                dg.ScrollIntoView(rowContainer, dg.Columns[column]);
                cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
            }
            return cell;
        }
        return null;
    }

    static public DataGridRow GetRow(DataGrid dg, int index) {
        DataGridRow row = (DataGridRow)dg.ItemContainerGenerator.ContainerFromIndex(index);
        if (row == null) {
            // may be virtualized, bring into view and try again
            dg.ScrollIntoView(dg.Items[index]);
            row = (DataGridRow)dg.ItemContainerGenerator.ContainerFromIndex(index);
        }
        return row;
    }

    static T GetVisualChild<T>(Visual parent) where T : Visual {
        T child = default(T);
        int numVisuals = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < numVisuals; i++) {
            Visual v = (Visual)VisualTreeHelper.GetChild(parent, i);
            child = v as T;
            if (child == null) {
                child = GetVisualChild<T>(v);
            }
            if (child != null) {
                break;
            }
        }
        return child;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T00:46:54.523

通常，您不需要这样做。在 WPF 中，datagrid 旨在与数据绑定一起使用，这意味着存在与单元格具有相同值的底层集合或对象，因此您需要直接访问该集合/对象。如果您需要访问单元格值，您可能需要重新考虑您的设计。

# ios - 我更新的 IOS 应用程序需要多长时间才能出现在 App Store/iTunes 中？

> ID：13204539
> 
> 赞同：2
> 
> 时间：2012-11-02T23:43:04.657
> 
> 标签：ios, app-store

Apple 在 App Store 和 iTunes 网站上更新/发布我的新应用程序/更新平均需要多长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:50:29.260

此链接要求您登录您的开发者帐户：

[https://developer.apple.com/appstore/resources/approval/index.html#expect](https://developer.apple.com/appstore/resources/approval/index.html#expect)

右侧有一个带有批准统计信息的框 -目前*大多数*更新审核在 8 个工作日内完成。

E：

该页面上不再有统计信息（并且不再受开发帐户保护）。

现在无需登录即可获得统计信息：

[https://developer.apple.com/support/appstore/#appReviewStatus](https://developer.apple.com/support/appstore/#appReviewStatus)

左侧有一个框，显示过去 5 个工作日内审核的新/更新应用的百分比。

社区还努力在 # 天之前继续跟踪批准统计数据：

[http://appreviewtimes.com/](http://appreviewtimes.com/)

请记住，社区的努力依赖于批准时间的自我报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:45:46.220

这取决于 Apple 的人员审查您的应用程序。如果您进行了一些小的图形更改，那么不会花费很长时间，如果您添加了诸如访问地址簿之类的东西或者它们可能看起来更仔细的任何东西。如果最近也提交了许多其他应用程序，他们可能需要一段时间才能找到您的应用程序。所以你不妨问“一根绳子有多长？”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:56:50.950

通常从我的经历开始大约 8-10 天（根据这个网站）

[http://reviewtimes.shinydevelopment.com](http://reviewtimes.shinydevelopment.com)

# c# - GridView 未从 DataSet 绑定 DataTable

> ID：13204552
> 
> 赞同：1
> 
> 时间：2012-11-02T23:44:47.857
> 
> 标签：c#, ado.net

寻求朋友的帮助

我已经从数据库加载了 3 个表来`DataSet`使用`DataReader`，但我无法将它绑定到`GridView`.

```
protected void GetStudReport(Object o, EventArgs e)
{
    if (mycon.State != ConnectionState.Open)
    {
        List<string> lstQstn = new List<string>();

        mycon.Open();
        cmd = new MySqlCommand("SELECT * from scord_mark_table where stu_ID=@StID", mycon);
        cmd.Parameters.Add(new MySqlParameter("StID", MySqlDbType.VarChar, 10, "stu_ID"));
        cmd.Parameters["@StID"].Value = drpDnSearch3.SelectedValue;
        MySqlDataReader rdr1 = cmd.ExecuteReader();
        DataSet ds = new DataSet();
        DataTable dtScrTbl = new DataTable("ScoreTable");
        dtScrTbl.Load(rdr1);
        ds.Tables.Add(dtScrTbl);
        rdr1.Close();
        cmd = null;

        int i = 0;
        Dictionary<string, string> dctSub = new Dictionary<string, string>();
        using (DataTableReader dtr = ds.CreateDataReader())
        {
            while (dtr.Read())
            {
                lstQstn.Add(dtr["test_id"].ToString());

                while (i <= lstQstn.Count())
                {
                    cmd = new MySqlCommand("SELECT test_id,subject_id from qution_no_table where test_id='" + lstQstn[i].ToString() + "'", mycon);
                    MySqlDataReader rdr2 = cmd.ExecuteReader();
                    while (rdr2.Read())
                    {
                      dctSub.Add(rdr2["subject_id"].ToString(),rdr2["test_id"].ToString());
                    }
                    rdr2.Close();
                    break;
                }

                i++;

            }
            cmd = null;
        }

        string strTestID="where test_id='";
        i=0;
        foreach (string lst in lstQstn)
        {
            if (i > 0)
            {
                strTestID += @" and test_id='";
            }
            strTestID += lst + @"'";
            i++;
        }

        cmd = new MySqlCommand("SELECT * from qution_no_table " +strTestID+";"+"SELECT * from out_of_mark_table " +strTestID, mycon);

        MySqlDataReader rdr3 = cmd.ExecuteReader();

        DataTable dtQNoTbl = new DataTable("QstNoTable");
        dtQNoTbl.Load(rdr3);
        ds.Tables.Add(dtQNoTbl);

        rdr3.NextResult();

        // bind the second resultset
        DataTable dtOutMrkTbl = new DataTable("OutOfMarkTable");
        dtOutMrkTbl.Load(rdr3);
        ds.Tables.Add(dtOutMrkTbl);
        rdr3.Close();

        //**
        GridView1.DataSource = ds.Tables["OutOfMarkTable"];
        GridView1.DataBind(); //**
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:00:07.397

原因是您`rdr3.NextResult()`将读者推进到下一个结果（如果有的话）。但这已经在[`DataTable.Load`](http://msdn.microsoft.com/en-us/library/4e06d41f.aspx). 来自 MSDN：

> Load 方法使用来自已加载 IDataReader 的第一个结果集，并在成功完成后将读取器的位置设置为下一个结果集（如果有）。

所以你只需要省略它。另一种选择是使用 `DatSet.Load(reader)`一次添加最后两个表：

```
ds.Load(rdr, LoadOption.OverwriteChanges, "QstNoTable","OutOfMarkTable");
GridView1.DataSource = ds.Tables["OutOfMarkTable"]; 
```

`DataSet.Load`不会删除`DataSet`.

# java - 用于在字符串的每个字符后添加空格的正则表达式

> ID：13204553
> 
> 赞同：1
> 
> 时间：2012-11-02T23:45:04.130
> 
> 标签：java, regex

我正在寻找将Java字符串的每个字符替换为字符+空格的方法（最后一个字符除外或在末尾删除尾随空格）

这个想法来自于`STACKOVERFLOW`return `S T A C K O V E R F L O W`。可以用正则表达式来做到这一点还是我应该迭代字符串？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T23:46:55.237

```
"StackOverFlow".replaceAll(".(?!$)", "$0 ")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:47:42.227

不需要正则表达式。

只需遍历字符串并使用 StringBuilder：

```
String withSpaces = addSpaces("StackOverflow"); 
```

* * *

```
public String addSpaces(String s) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < s.length(); i++) {
        sb.append(s.charAt(i)).append(" ");
    }
    return sb.substring(0, sb.length() - 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T23:49:36.663

一起去

```
str.replaceAll("(?<!^)(?!$)", " "); 
```

或同等学历

```
str.replaceAll("(?<=.)(?!$)", " "); 
```

...或者如果您想在非空格字符后面添加空格字符，请使用

```
str.replaceAll("(?<=\S)(?!$)", " "); 
```

...如果你想防止双空格（如果已经有一些空间），那么使用

```
str.replaceAll("(?<=\S)(?!\s)(?!$)", " "); 
```

# google-analytics - 如何使用谷歌分析标签管理器来跟踪网站链接

> ID：13204557
> 
> 赞同：3
> 
> 时间：2012-11-02T23:45:29.310
> 
> 标签：google-analytics, google-tag-manager

我注意到谷歌已经发布了他们的标签管理器应用程序，使更改标签和跟踪选项变得非常容易。如何使用此工具跟踪站点链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:35:07.590

Google 跟踪代码管理器 (GTM) 不是跟踪工具，因此简短且无益的答案是您不能。但是，您可以通过 GTM 部署 Google Analytics，我猜这就是您的意思。不过，我不得不说，跟踪异地链接并没有我预期的那么简单。

通常，您通过虚拟浏览量（或事件）跟踪外部链接。GTM 中的常用方法是在链接的点击事件上将变量推送到数据层，然后根据基于该事件的规则触发具有虚拟综合浏览量的 GA 标记。当我测试它时，这对我来说完全失败了，大概是因为新页面在 GA 标记触发之前已经加载。所以我采用了一个不太优雅的解决方法：

首先，我创建了一个标准的 Google Analytics（分析）标签（跟踪类型的综合浏览量），以确保网站中包含 GA 代码。然后我用一点 Javascript 创建了一个自定义 HMTL 标记（假设您在页面中使用 jQuery）：

```
<script>
$('a').click(function() {
    var p =  $(this).attr('href');  
    if (p.search(/.+YOUDOMAIN/) == -1){         
        _gaq.push(['_trackPageview', "external://" + p]);    // mark links as external in the GA interface
    } 
});
</script> 
```

对于所有不包含 YOURDOMAIN 的链接，链接会附加一个带有综合浏览量的点击事件。为了确保所有链接都被标记为单击事件，您在标签管理器中设置了一条规则，以确保脚本仅在页面加载后执行，您在标签管理器中设置基于事件的规则，其中事件等于 gtm .load（gtm 相当于 jQuerys domReady）。

这行得通（至少在我的测试中确实如此），但由于它不使用 GTM 中介 dataLayer，所以对我来说它看起来更像是一个 hack。如果有人可以提出适当的解决方案，我将不胜感激。

# java - 带弹簧的抽象类变量

> ID：13204558
> 
> 赞同：0
> 
> 时间：2012-11-02T23:45:33.417
> 
> 标签：java, spring, hibernate, multi-tenant

我在我的项目中使用 spring 和 Hibernate 和 Dao 设计模式，在我的`GenericDaoImpl`（抽象类）类中有“tenentId”，我想在使用登录系统时设置“tenentId”。我的其他 DaoImpl 类从 扩展`GenericDaoImpl`，所以我需要设置tenentId（它在 中定义`GenericDaoImpl`）用户登录时间并在用户注销时重置“tenentId”。

做这个的最好方式是什么？

在我的测试用例中，我尝试了@Autowired 的“GenericDaoImpl”，但我做不到，它会抛出一个异常，告诉`org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type`. 我现在知道问题所在了

（我们不能创建抽象类的实例，如果使用tenantId作为静态变量，会不会有问题？）有人可以建议我任何解决方案吗？

谢谢你，乌德西卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:53:19.457

如果您正在开发多租户应用程序并希望拥有租户感知应用程序上下文，那么请查看[spring-tenancy](https://github.com/SpringSource/spring-tenancy)。这将帮助您注入租户感知的 bean。

如果您想在休眠层进行多租户，那么您还可以查看休眠的[多租户](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch16.html)功能。

# javascript - 在 D3 中绘制多边形数据的正确格式

> ID：13204562
> 
> 赞同：16
> 
> 时间：2012-11-02T23:45:55.427
> 
> 标签：javascript, d3.js

我尝试过这种不同的方法，但似乎没有任何效果。这是我目前拥有的：

```
var vis = d3.select("#chart").append("svg")
         .attr("width", 1000)
         .attr("height", 667),

 scaleX = d3.scale.linear()
        .domain([-30,30])
        .range([0,600]),

scaleY = d3.scale.linear()
        .domain([0,50])
        .range([500,0]),

poly = [{"x":0, "y":25},
        {"x":8.5,"y":23.4},
        {"x":13.0,"y":21.0},
        {"x":19.0,"y":15.5}];

vis.selectAll("polygon")
    .data(poly)
    .enter()
    .append("polygon")
    .attr("points",function(d) { 
        return [scaleX(d.x),scaleY(d.y)].join(",")})
    .attr("stroke","black")
    .attr("stroke-width",2); 
```

我认为这里的问题要么与我将点数据定义为单个点对象数组的方式有关，要么与我为`.attr("points",...`

我一直在网上寻找如何绘制简单多边形的教程或示例，但我似乎无法找到它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-03T00:27:07.527

多边形看起来像：`<polygon points="200,10 250,190 160,210" />`

因此，您的完整多边形数组应生成一个长字符串，该字符串将创建一个多边形。因为我们谈论的是一个多边形，所以数据连接也应该是一个只有一个元素的数组。这就是下面代码显示的原因：`data([poly])`如果您想要两个相同的多边形，您可以将其更改为`data([poly, poly])`.

目标是从您的数组中创建一个包含 4 个对象的字符串。我为此使用了一个`map`和另一个`join`：

```
poly = [{"x":0.0, "y":25.0},
        {"x":8.5,"y":23.4},
        {"x":13.0,"y":21.0},
        {"x":19.0,"y":15.5}];

vis.selectAll("polygon")
    .data([poly])
  .enter().append("polygon")
    .attr("points",function(d) { 
        return d.map(function(d) {
            return [scaleX(d.x),scaleY(d.y)].join(",");
        }).join(" ");
    })
    .attr("stroke","black")
    .attr("stroke-width",2); 
```

见工作小提琴：http: [//jsfiddle.net/4xXQT/](http://jsfiddle.net/4xXQT/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-10T09:03:08.820

上面的答案是不必要的复杂。

您所要做的就是将点指定为字符串，一切正常。下面这样的东西会起作用。

```
var canvas = d3.select("body")
   .append("svg")
   .attr("height", 600)
   .attr("width", 600);

canvas.append("polygon")
   .attr("points", "200,10 250,190 160,210")
   .style("fill", "green")
   .style("stroke", "black")
   .style("strokeWidth", "10px"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T00:19:21.493

你想画多边形吗？- 像这样。[http://bl.ocks.org/2271944](http://bl.ocks.org/2271944)代码的开头看起来像一个典型的图表 - 通常会得出这样的结论。

```
chart.selectAll("line")
     .data(x.ticks(10))
   .enter().append("line")
     .attr("x1", x)
     .attr("x2", x)
     .attr("y1", 0)
     .attr("y2", 120)
.style("stroke", "#ccc"); 
```

# actionscript-3 - AS3 套接字事件侦听器是否需要定义它们以结束的函数范围？

> ID：13204563
> 
> 赞同：0
> 
> 时间：2012-11-02T23:45:56.453
> 
> 标签：actionscript-3, sockets, events, actionscript

假设我们有一个函数和一个在其中声明的套接字。我们呼吁`connect`它。现在我们调用`addEventListener`连接。

理论上，我们可以设置提供给 eventDispatcher 的函数来更改类变量，而最初调用的函数`addEventListener`可以锁定在该变量上（类似`while(!class_instancce.is_connected)`）。

我的问题是：传递给`addEventListener`闪存运行时调用的函数会等待“等待”的函数结束吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:52:11.687

只要您正在侦听的任何事件被您正在侦听的实例分派，传递给 addEventListener 的函数就会运行（如果有多个侦听器，这将基于事件优先级。

在我看来，您想尝试使套接字连接同步发生。你不能用套接字来做到这一点，尽管在 AS 中有[一些](http://www.funky-monkey.nl/blog/2009/01/13/synchronous-vs-asynchonous/)你可以强制同步的东西。

老实说，您应该尽早适应事件驱动的架构，因为它使您可以使用各种 OOP 的可爱之处。

如果您有约束力和决心，您可以使用匿名函数。你可以自己研究一下。我认为这是一个坏习惯，除非你*真的*知道自己在做什么以及如何避免内存泄漏等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:15:43.867

下面是套接字在 AS3 中的工作方式：

首先创建套接字并添加监听器：

```
_socket = new Socket();
// or if secure
_socket = new TLSSocket();
_socket.addEventListener(Event.CONNECT, onConnect);
_socket.addEventListener(ProgressEvent.SOCKET_DATA, onData);
// also add listeners for errors, close etc
_socket.connect(myURL, myPORT);

private function onConnect(event:Event):void{
    //connection is live now so do whatever like send something
    var request:String = "create a request here";
    _socket.writeUTFBytes(request);
    _socket.flush();
}

private function onData(event:ProgressEvent):void{
    //this gets called EVERY time new data comes over the socket
    // the socket will stay connected until you close it (or an error makes it drop)
    // here is how you read what came over the socket
    while(_socket.bytesAvailable){
        theData = _socket.readUTFBytes(_socket.bytesAvailable);
    }
    // now do something with the data
} 
```

希望这可以帮助您设置套接字

# java - 为什么我的 Java 应用程序看不到 *.jrxml？

> ID：13204564
> 
> 赞同：1
> 
> 时间：2012-11-02T23:46:03.350
> 
> 标签：java, jasper-reports, filenotfoundexception

我的项目具有以下架构： ![在此处输入图像描述](../Images/bccae84358fdb7fe05743de94883607d.png)

我的模板是“report1.jrxml”，然后当我执行这段代码时：

```
 TableModel model = (TableModel) masterTable.getModel();    
  JRTableModelDataSource data = new JRTableModelDataSource(model);
  String reportSource ="report1.jrxml";
  try {
            JasperReport jr = JasperCompileManager.compileReport(reportSource);
            JasperPrint jp = JasperFillManager.fillReport(jr, null,data);
      } catch (JRException ex) 
      {
            Logger.getLogger(master.class.getName()).log(Level.SEVERE, null, ex);
      } 
```

我收到这个错误（我很抱歉法语，但很容易理解：p）：

```
Grave: null
net.sf.jasperreports.engine.JRException: java.io.FileNotFoundException: report1.jrxml (Le fichier spécifié est introuvable)
    at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:176)
    at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:156)
    at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:171)
    at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:448)
    at testjasper.master.jButton1ActionPerformed(master.java:319)
    at testjasper.master.access$900(master.java:25)
    at testjasper.master$FormListener.actionPerformed(master.java:259) 
```

Netbeans 说找不到该文件，但正如您在屏幕截图中看到的那样，它存在吗？我怎么解决这个问题” ？相反，有什么问题？致以我的问候。:p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:02:23.203

Jasper 报告看不到它，因为该文件是嵌入式资源（它不作为文件存在，而是 Jar 文件中的一个条目）

您需要通过使用`getClass().getResource("/testjasper/report1.jrxml")`which 将返回 a来获得对它的引用`URL`。

从记忆中，您应该能够 Jasper a `InputStream`，这可以通过使用来实现`URL#openConnection`

# android - 基于数组值的图像

> ID：13204568
> 
> 赞同：0
> 
> 时间：2012-11-02T23:46:41.443
> 
> 标签：android, arrays, image, dice

我有一个骰子游戏，我正在尝试将骰子滚动后选择的骰子图像更改为“死亡骰子”图像。我已经尝试了我能想到的一切，我总是在索引中找到值“0”或其他东西，但从来没有找到正确的 Die。

选择骰子时，它会将其值设置为负数。示例我选择 6 它将值更改为 -6 并将模具更改为 -6 模具图像

我怎样才能让它显示并保持我想要的“死”图像。

这是获取图像的区域

```
 //Get the Dice Images
           public Integer getImage(int index) {
               if (diceValues[index] == 0) {
                       return letterImages.get(index);

               } else {
                       return diceImages.get((diceValues[index]));
               }
           } 
```

我试过改变

```
return letterImages.get(index); 
```

对于所有可能的组合，当我得到它来更改图像时，它总是以“0”或当前选择的骰子数量或其他一些我不确定它是如何得出的数字结束。

这是整个 DieManager 类

```
package com.mygames.dice;

import java.util.HashMap;
import android.util.Log;

public class DieManager {

        // Will return the Indexes of the dice when this is used
        public static final int INDEX_FLAG = 1;
        // Will return the values of the dice when this is used
        public static final int VALUE_FLAG = 2;
        // Will return the absolute values of the dice when this is used
        public static final int ABS_VALUE_FLAG = 3;

        // The array that holds the dice
        private int[] diceValues = { 0, 0, 0, 0, 0, 0 };

        private HashMap<Integer, Integer> diceImages = new HashMap<Integer, Integer>();
        private HashMap<Integer, Integer> deadImages = new HashMap<Integer, Integer>();
        private HashMap<Integer, Integer> letterImages = new HashMap<Integer, Integer>();

        // Sets @newValue to dieValues[@index]
        public void setValue(int index, int newValue) {
                Log.w(getClass().getName(), "Index = " + index + " Value = " + newValue);
                diceValues[index] = newValue;
        }

        public DieManager() {
                super();
                initializeMaps();
        }

        private void initializeMaps() {

                diceImages.put(-6, R.drawable.die6_select);
                diceImages.put(-5, R.drawable.die5_select);
                diceImages.put(-4, R.drawable.die4_select);
                diceImages.put(-3, R.drawable.die3_select);
                diceImages.put(-2, R.drawable.die2_select);
                diceImages.put(-1, R.drawable.die1_select);

                diceImages.put(1, R.drawable.die1_roll);
                diceImages.put(2, R.drawable.die2_roll);
                diceImages.put(3, R.drawable.die3_roll);
                diceImages.put(4, R.drawable.die4_roll);
                diceImages.put(5, R.drawable.die5_roll);
                diceImages.put(6, R.drawable.die6_roll);

                deadImages.put(-1, R.drawable.die1_dead);
                deadImages.put(-2, R.drawable.die2_dead);
                deadImages.put(-3, R.drawable.die3_dead);
                deadImages.put(-4, R.drawable.die4_dead);
                deadImages.put(-5, R.drawable.die5_dead);
                deadImages.put(-6, R.drawable.die6_dead);

                letterImages.put(0, R.drawable.die_no);
                letterImages.put(1, R.drawable.die_no);
                letterImages.put(2, R.drawable.die_no);
                letterImages.put(3, R.drawable.die_no);
                letterImages.put(4, R.drawable.die_no);
                letterImages.put(5, R.drawable.die_no);

        }

        public void rollDice() {

                boolean isNewRound = (numOnTable() == 0);
                for (int j = 0; j < 6; j++) {

                        // If its a new round then the dice value can be changed from 0.
                        // Else it can't
                        if (isNewRound || diceValues[j] != 0)
                                diceValues[j] = (int) ((Math.random() * 6) + 1);
                }
        }

        // Returns the value or absolute value
        public int getValue(int index, int flag) {
                if (flag == ABS_VALUE_FLAG)
                        return Math.abs(diceValues[index]);

                return diceValues[index];
        }

        // If a dice value is 0 then its a letter
        public int numOnTable() {
                int count = 6;
                for (int i : diceValues) {
                        if (i == 0)
                                count--;
                }
                return count;
        }

        // Picking up makes the dice value 0
        public void pickUp(int[] highlighted) {

                for (int i = 0; i < highlighted.length; i++)
                        diceValues[highlighted[i]] = 0;

        }

        // A negative value means a die is highlighted
        public void toggleHighlight(int index) {
                diceValues[index] *= -1;
        }

        public void clearTable() {
                diceValues[0] = 0;
                diceValues[1] = 0;
                diceValues[2] = 0;
                diceValues[3] = 0;
                diceValues[4] = 0;
                diceValues[5] = 0;

        }

        // Return the dice that aren't 0
        public int[] diceOnTable(int flag) {
                if (flag == ABS_VALUE_FLAG) {
                        int[] array = new int[diceValues.length];

                        for (int i = 0; i < diceValues.length; i++)
                                array[i] = Math.abs(diceValues[i]);

                        return array;
                }

                return diceValues;
        }

        //Returns dice that are negative
        public int[] getHighlighted(int flag) {
                int[] dirtyArray = { 0, 0, 0, 0, 0, 0 };
                int count = 0;

                for (int j = 0; j < 6; j++) {
                        if (diceValues[j] < 0) {

                                if (flag == INDEX_FLAG)
                                        dirtyArray[count++] = j;

                                if (flag == VALUE_FLAG)
                                        dirtyArray[count++] = diceValues[j];

                                if (flag == ABS_VALUE_FLAG)
                                        dirtyArray[count++] = Math.abs(diceValues[j]);
                        }
                }

                int[] cleanArray = new int[count];

                //Returns an array of length 0
                if (count == 0)
                        return cleanArray;

                System.arraycopy(dirtyArray, 0, cleanArray, 0, count);
                return cleanArray;

        }

        // Finds in dieValues same @value and excludes @index
        public int[] findPairs(int index, int flag) {

                int[] dirtyArray = { 0, 0, 0, 0, 0, 0 };

                int count = 0;

                for (int j = 0; j < 6; j++) {

                        if (j != index
                                        && Math.abs(diceValues[j]) == Math.abs(diceValues[index])) {

                                if (flag == INDEX_FLAG)
                                        dirtyArray[count++] = j;

                                if (flag == VALUE_FLAG)
                                        dirtyArray[count++] = diceValues[j];

                                if (flag == ABS_VALUE_FLAG)
                                        dirtyArray[count++] = Math.abs(diceValues[j]);
                        }

                }

                int[] cleanArray = new int[count];

                if (count == 0)
                        return cleanArray;

                System.arraycopy(dirtyArray, 0, cleanArray, 0, count);
                return cleanArray;
        }

            //Get the Dice Images
           public Integer getImage(int index) {
               if (diceValues[index] == 0) {
                       return letterImages.get(index);

               } else {
                       return diceImages.get((diceValues[index]));
               }
           }

            //Get the Number of dice remaining that are not 0
            public int numDiceRemain() {
                int counter = 0;
                for (int j = 0; j < diceValues.length; j++) { 
                        if (diceValues[j] > 0)
                            counter++;
                }
                return counter;
            }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:43:30.967

由于您的 rollDice() 方法中的以下行，骰子值永远不会在滚动中为零：

```
diceValues[j] = (int) ((Math.random() * 6) + 1); 
```

这对我来说似乎是合乎逻辑的。为什么骰子上的价值永远为零？

# javascript - Javascript - 对无效 eval() 的反应

> ID：13204572
> 
> 赞同：0
> 
> 时间：2012-11-02T23:47:08.543
> 
> 标签：javascript, eval

我正在用 Javascript 为我的学校作业制作一个计算器，它使用函数 eval()。是的，我知道，eval 是邪恶的，但我可以向你保证，我已经得到了这个，所以没有办法利用它。

eval 将文本框中的值转换为答案，然后显示在另一个文本框中。但是，当语法错误时（例如，用户输入“1++2”），我希望脚本显示某种错误。但是当输入无效时， eval() 似乎就消失了。它不返回任何值，不返回错误（好吧，chrome 尝试用“未捕获的语法错误”来解释它，但这对我没有用）所以如果用户弄乱了语法，我无法向脚本解释该怎么做。

TL;DR：如果 eval() 输入无效，如何让脚本显示错误消息？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:50:35.000

它`throw`是（引发）一个异常，您可以`catch`（处理）并做任何您想做的事情：

```
var s;
try
    { s = eval('1++2'); }
catch(e)
    { s = e; }
// now s is either the result, or the exception-info 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:51:48.107

您应该使用 try catch 块来优雅地向用户显示发生了错误。

```
function evalJS(JsCode) 
{ 
    try 
    { 
        eval(JsCode); 
    } 
    catch(e) 
    { 
        alert('The string ' + JsCode + ' contained incorrect JS syntax.'); 
    } 
} 

evalJS('bogus code'); 
```

# python - 使用 mongoengine 查询 ListField 时遇到问题

> ID：13204573
> 
> 赞同：7
> 
> 时间：2012-11-02T23:47:11.820
> 
> 标签：python, django, mongodb, mongoengine

我正在使用mongoengine，我遇到了以下情况，

我的模型：

```
class Item(Document):
   ...
   tags = ListField(StringField(max_length=30)) 
```

查询：

```
filters = {
    'tags__contains': query
}
tags_with_counter = Item.objects.filter(**filters).item_frequencies('tags') 
```

这将返回一个包含标签名称和频率的元组列表。我想要做的是只获取包含**查询**及其各自频率的标签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T13:26:46.263

拥有这个类似的 MongoEngine 模型和文档：

```
class Post(Document):
    title = StringField()
    tags = ListField(StringField())

post1 = Post(title='Fun with MongoEngine', tags=['mongodb', 'mongoengine']).save()
post2 = Post(title='Loving Mongo', tags=['mongodb']).save() 
```

你将存储这个：

```
{
  "tags": [ "mongodb", "mongoengine" ],
  "title": "Fun with MongoEngine"
}
{
  "tags": [ "mongodb" ],
  "title": "Loving Mongo"
} 
```

在 MongoDB 中，当您运行`find()`它时，它会返回与您的查询匹配的文档。

因此，通过以下查询，您将获得一个文档数组（Post 对象），其标签`mongodb`位于数组 field 中`tags`。（实际上，'tag' 数组与一个空字符串连接，如果包含值 'mongodb' 则匹配）：

```
Post.objects(tags__contains='mongodb') 
```

（[过滤器](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.queryset.QuerySet.filter)只是对象构造函数的别名）

因此，在获得项目频率之后，您需要获得您感兴趣的那些。

```
tag_cloud = Post.objects(tags__contains='mongodb').item_frequencies('tags')

> print tag_cloud
{'mongodb': 2, 'mongoengine': 1}
> tag_cloud['mongodb']
2 
```

# mysql - MySQL 5.5.28 构建错误

> ID：13204576
> 
> 赞同：0
> 
> 时间：2012-11-02T23:47:23.663
> 
> 标签：mysql

我在 Windows 7 64 上使用 mingw-w64 (ruben build)。

我需要 libmysqlclient.a 来构建 libodb-mysql (http://www.codesynthesis.com/products/odb/)。但在最初的 Windows 64 mysql 版本中没有 .a 库（只有 mysqlclient.lib）。Reimp 不起作用（生成许多名称中具有不同整数的文件，但不是 .a 库）。

我正在构建 MySQL Community Server 5.5.28。

命令顺序：

```
cmake -G "MSYS Makefiles" .
make 
```

我有

```
[ 11%] Building C object strings/CMakeFiles/strings.dir/ctype-mb.c.obj                                           
[ 11%] Building C object strings/CMakeFiles/strings.dir/ctype-simple.c.obj                                       
In file included from C:/Users/CanisMajor/Downloads/mysql-5.5.28/include/my_sys.h:44:0,                          
                 from c:/Users/CanisMajor/Downloads/mysql-5.5.28/strings/ctype-simple.c:19:                      
C:/Users/CanisMajor/Downloads/mysql-5.5.28/include/my_pthread.h:59:3: error: unknown type name 'CONDITION_VARIABL
E'                                                                                                               
C:/Users/CanisMajor/Downloads/mysql-5.5.28/include/my_pthread.h:102:8: error: redefinition of 'struct timespec'  
In file included from d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/include/pro
cess.h:12:0,                                                                                                     
                 from C:/Users/CanisMajor/Downloads/mysql-5.5.28/include/my_global.h:128,                        
                 from c:/Users/CanisMajor/Downloads/mysql-5.5.28/strings/ctype-simple.c:16:                      
d:\mingw\bin\../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/include/sys/types.h:89:8: note: o
riginally defined here                                                                                           
In file included from C:/Users/CanisMajor/Downloads/mysql-5.5.28/include/my_sys.h:44:0,                          
                 from c:/Users/CanisMajor/Downloads/mysql-5.5.28/strings/ctype-simple.c:19:                      
C:/Users/CanisMajor/Downloads/mysql-5.5.28/include/my_pthread.h:715:5: error: unknown type name 'SRWLOCK'        
make[2]: *** [strings/CMakeFiles/strings.dir/ctype-simple.c.obj] Error 1                                         
make[1]: *** [strings/CMakeFiles/strings.dir/all] Error 2                                                        
mak

e: *** [all] Error 2 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:50:59.813

看起来像一个编译器问题。具体来说，由于您的编译标志和定义，它无法识别某些标记。

[Windows 中的 CONDITION_VARIABLE；不会编译](https://stackoverflow.com/questions/6872010/condition-variable-in-windows-wont-compile)

# java - 在 Bukkit 插件中从网页获取 HTML 字符串

> ID：13204577
> 
> 赞同：2
> 
> 时间：2012-11-02T23:47:25.970
> 
> 标签：java, html, http, minecraft, bukkit

我正在尝试为我的世界 bukkit 服务器创建一个插件。目标是读取 html 页面第一行的字符串。如果结果为 True，它将执行命令。

这是我现在拥有的代码：

```
import java.net.URLConnection;
import java.util.Scanner;
import java.util.logging.Logger;

import org.bukkit.ChatColor;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;
import org.bukkit.plugin.java.JavaPlugin;

public class main extends JavaPlugin{
public final Logger logger = Logger.getLogger("Minecraft");

public void onEnable(){
    logger.info("[First] Has Been Enabled.");
}

public void onDisable(){
    logger.info("[First] Has Been Disabled.");
}

public boolean onCommand(CommandSender sender, Command command, String commandLabel, String[] args) {
    Player player = (Player) sender;
    if(commandLabel.equalsIgnoreCase("hello")){
        player.sendMessage(ChatColor.GOLD + "Hello");
    }
    else if(commandLabel.equalsIgnoreCase("world")){
        player.sendMessage(ChatColor.GOLD + "World");
    }
    else if(commandLabel.equalsIgnoreCase("coolman")){
        player.setPlayerListName("coolman");
    }
    else if(commandLabel.equalsIgnoreCase("vote")){
        String sourceLine = null;

        // The URL address of the page to open.
        URL address = new URL("http://www.koolflashgames.com/test.php");

        // Open the address and create a BufferedReader with the source code.
        InputStreamReader pageInput = new InputStreamReader(address.openStream());
        BufferedReader source = new BufferedReader(pageInput);

        // Append each new HTML line into one string. Add a tab character.
        try {
            sourceLine = source.readLine();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if(sourceLine == "False"){
            player.sendMessage("Thanks for voting!");
        }

    }
    return false;

} 
```

}

在日志中创建以下错误：

```
2012-11-02 16:18:30 [SEVERE] null
org.bukkit.command.CommandException: Unhandled exception executing command 'vote' in        plugin first v1.0
at org.bukkit.command.PluginCommand.execute(PluginCommand.java:46)
at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:180)
at org.bukkit.craftbukkit.CraftServer.dispatchCommand(CraftServer.java:502)
at net.minecraft.server.NetServerHandler.handleCommand(NetServerHandler.java:915)
at net.minecraft.server.NetServerHandler.chat(NetServerHandler.java:828)
at net.minecraft.server.NetServerHandler.a(NetServerHandler.java:810)
at net.minecraft.server.Packet3Chat.handle(Packet3Chat.java:44)
at net.minecraft.server.NetworkManager.b(NetworkManager.java:282)
at net.minecraft.server.NetServerHandler.d(NetServerHandler.java:111)
at net.minecraft.server.ServerConnection.b(SourceFile:35)
at net.minecraft.server.DedicatedServerConnection.b(SourceFile:30)
at net.minecraft.server.MinecraftServer.q(MinecraftServer.java:561)
at net.minecraft.server.DedicatedServer.q(DedicatedServer.java:213)
at net.minecraft.server.MinecraftServer.p(MinecraftServer.java:474)
at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:406)
at net.minecraft.server.ThreadServerApplication.run(SourceFile:539)
Caused by: java.lang.NullPointerException
at java.io.Reader.<init>(Unknown Source)
at java.io.InputStreamReader.<init>(Unknown Source)
at me.storminmormon30.first.main.onCommand(main.java:43)
at org.bukkit.command.PluginCommand.execute(PluginCommand.java:44)
... 15 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:50:34.183

看起来错误在其他地方： *未处理的异常执行**命令“投票”***
我在您给出的代码片段中看不到该命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T20:49:16.017

您应该将每个命令拆分为它自己的类并在 plugin.yml 中注册，我要做的是在`onEnable()`方法中，设置如下：

`getCommand("command").setExecutor(new CommandExecutor());`

这会将所有命令分成他们自己的类，这样会更好，我会建议这样做。

`main`您的代码问题在第 43 行的类中看起来像 NPE （在您的`onEnable()`方法中）

# javascript - BlueImp Jquery Upload - 从 data.files 获取索引

> ID：13204587
> 
> 赞同：4
> 
> 时间：2012-11-02T23:49:38.937
> 
> 标签：javascript, jquery, blueimp

如何从以下代码中获取索引值？

```
add: function (e, data) {
    $.each(data.files, function (index, file) {
        alert('Added file: ' + index + " -- " + file.name);
}); 
```

即使我有 (3) 个文件，索引也总是返回 (0)。FILE.NAME 有效，我可以看到所有 (3) 个文件。

这是输出：

*   添加文件：0 -- dog.jpg
*   添加文件：0 -- cat.jpg
*   添加文件：0 -- honeybadger.jpg

这是我期望/期望的结果：

*   添加文件：0 -- dog.jpg
*   添加文件：1 -- cat.jpg
*   添加文件：2——honeybadger.jpg

经过一些调试，表单似乎被提交 (3) 次，这就是我为每个文件得到 (0) 的原因。另外，我从 GIT WIKI 复制了代码，但没有运气。

希望 BlueImp 专家能提供帮助。

**更新代码：** 下面的代码现在返回每个索引

```
$('#fileUpload1').fileupload(
{
    replaceFileInput: false,
    dateType: 'json',
    url: 'Handlers/AjaxFileHandler.ashx',
    singleFileUploads: false,
    autoUpload: false,
    add: function (e, data) {
        $('#upLoadButton').click(function () {
            $.each(data.files, function (index, file) {
                alert('Added file: ' + index + " -- " + file.name);

                var v = $('input[data-id=' + index + ']').val();
                var d = $('select[data-id=' + index + ']').val();
                alert('textField:' + v + '  selected: ' + d);               
            });

            data.submit();

        });
    },
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:39:31.277

您没有正确使用`Add`方法函数回调。事实上，默认情况下每个文件都会触发此事件。表示文件的数据而不是文件数组。您需要设置`singleFileUploads`为 false 才能获得所需的内容，如下例所示：

```
$('#fileupload').fileupload({
        previewSourceMaxFileSize: 0,
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png|bmp|svg|wmv|avi|mpe?g|mp4|ppt|pps)$/i,
        global:false,
        singleFileUploads:false, //set this to false to handle multi files upload behaviour
        add:function (e, data) {
            $.each(data.files, function (index, file) {
                alert('Added file: ' + index + " -- " + file.name);
            });
        },
        autoUpload: false
    }); 
```

# ios - Core Data 托管对象上下文设计推荐

> ID：13204589
> 
> 赞同：9
> 
> 时间：2012-11-02T23:49:56.983
> 
> 标签：ios, multithreading, core-data, nsmanagedobjectcontext

我们正在开发一个企业级应用程序，它将使用 Core Data 存储数以万计的对象，我们在几个方面遇到了问题。

* * *

我们的应用程序有几个独立的系统，它们在需要时对数据进行操作。这些系统包括项目的发现、项目的加载、同步和 UI 显示。如果我们正确地设计我们的软件，由于不同的系统修改相同的对象，应该几乎没有合并冲突。每个系统都有自己的操作队列，全部在后台执行。我们希望将所有对象的创建和修改都保留在后台，以最大限度地减少 UI 性能问题，尤其是在初始加速期间，可能会从服务器上的数据创建数千个对象。在这里，我们在各种设计尝试中遇到了几个问题。在这些加速过程中会消耗大量内存，并且所有上下文和子上下文的编排不正确，从而导致死锁和崩溃。我们尝试了以下设计：

*   `NSPrivateQueueConcurrencyType`一个具有一个子上下文的根托管对象`NSMainQueueConcurrencyType`上下文。UI 获取结果控制器使用此子上下文从中获取结果。从`NSMainQueueConcurrencyType`子上下文中，我们创建了一个`NSPrivateQueueConcurrencyType`名为“savingContext”的子上下文，每个后台操作都创建了该“savingContext”的一个子上下文，对其进行了更改，最后进行了我们所谓的“深度保存”，递归地保存到顶端。我们最初选择这种设计是为了不必处理`NSManagedObjectContextDidSaveNotification`来自许多不同子上下文的通知。`NSPrivateQueueConcurrencyType`我们包装了对上下文的每次调用和对对象的访问`performBlockAndWait:`. 在功能上，这个设计执行了。所有更改和插入都保存到持久存储中，并且 UI 随更改而更新。至此，引入了两个问题。一个是在加速期间 UI 滞后，因为合并更改通过`NSMainQueueConcurrencyType`子上下文，更重要的是，在加速期间内存使用率非常高。由于无法`reset`递归调用上下文（因为主 UI 子上下文也在那里）和/或缺乏何时调用`refreshObject:mergeChanges:`. 于是我们走了一条不同的路。
*   有两个与持久存储协调器链接的顶级上下文，一个`NSPrivateQueueConcurrencyType`用于保存子上下文，一个`NSMainQueueConcurrencyType`用于 UI 显示。`NSMainQueueConcurrencyType`监听`NSManagedObjectContextDidSaveNotification`来自主上下文的通知并将`NSPrivateQueueConcurrencyType`它们合并到主线程中。每个后台操作创建一个主`NSPrivateQueueConcurrencyType`上下文的子上下文，也具有私有队列并发类型，执行它的工作，递归执行“深度保存”，在当前上下文上执行保存，递归调用深度保存到其父, 在当前上下文中调用 reset 并再次保存。这样我们就避免了内存问题，因为创建的对象在保存后会很快释放。但是，通过这种设计，我们遇到了很多问题，例如死锁，`NSInternalInconsistencyException`尽管有`NSMainQueueConcurrencyType`上下文的保存通知，但异常和获取的结果控制器不会更新 UI。这也会导致 UI 中的初始加载时间变慢很多。在之前的设计中，获取结果控制器返回结果的速度非常快，而这会使 UI 阻塞几秒钟，直到视图加载（我们在 中初始化获取结果控制器`viewDidLoad`）。

我们尝试了许多中间设计，但它们都围绕着相同的问题，要么是非常高的内存使用，要么是获取结果控制器不更新 UI，要么是死锁和`NSInternalInconsistencyException`异常。

* * *

我真的越来越沮丧。我不能不觉得我们的设计对于一些应该相当简单的东西来说过于复杂了，只是我们缺乏对某些基本原理的理解正在扼杀我们。

* * *

那么大家有什么建议呢？对于我们的情况，您会推荐什么安排？我们应该如何管理不同线程中的不同上下文？释放插入对象和重置上下文的最佳实践？避免死锁？在这一点上，所有帮助将不胜感激。

* * *

我还看到了有关 MagicalRecords 类别的建议。推荐吗？我们已经投入使用 Core Data 类型，使用 MR 迁移会有多困难？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T16:54:47.080

首先，为了管理您的内存，您的第二种架构为您提供了更大的灵活性。

其次，有两种内存需要管理：malloc-ed 内存和常驻 VM 内存。您可以拥有较低的 malloc 内存占用，并且仍然拥有较大的 VM 驻留区域。根据我的经验，这是由于 Core Data 积极地坚持新插入的项目。我通过保存后修剪通知解决了这个问题。

第三，MOC 价格便宜。使用它们并扔掉它们。换句话说，尽早并经常释放内存。

第四，在主 MOC 上尽量不做任何基于数据库的操作。是的，这听起来适得其反。我的意思是，您所有的复杂查询确实应该在后台线程上完成，然后将结果传递给主线程，或者在利用现在填充的行缓存时从主线程重做查询。通过这样做，您可以保持 UI 处于活动状态。

第五，在我的多队列应用程序中，我尝试让我所有的保存都真正发生在后台。这使我的主要 MOC 保持快速并与来自网络的数据保持一致。

第六，NSFetchedResultsController 是一个非常有用但专门的控制器。如果您的应用程序将其推到其权限范围之外，它就会开始锁定您的界面。发生这种情况时，我通过自己监听 -didSave 通知来滚动自己的控制器。

# windows-phone-8 - Windows Phone 8 中的 Android Spinner 等价物？

> ID：13204590
> 
> 赞同：2
> 
> 时间：2012-11-02T23:50:11.897
> 
> 标签：windows-phone-8

在 Android 中，有一个漂亮的[Spinner](http://developer.android.com/reference/android/widget/Spinner.html)（或多或少像一个组合框）。Windows Phone 8 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T06:19:12.103

查看该控件的打印屏幕，它看起来就像[Windows Phone Toolkit](http://phone.codeplex.com)中的 ListPicker 控件与您正在寻找的一样。

这是一个很好的开始使用这个控件的教程@http [://www.dotnetspeaks.com/DisplayArticle.aspx? ID=230](http://www.dotnetspeaks.com/DisplayArticle.aspx?ID=230)

# java - 如何在Java中按下鼠标按钮时监听鼠标移动事件

> ID：13204596
> 
> 赞同：1
> 
> 时间：2012-11-02T23:50:36.243
> 
> 标签：java, mouseevent, mouse, mousemove

我的程序中的鼠标事件有问题。我正在尝试使用画布编写绘图程序。

如果他左键单击并移动鼠标，用户应该绘制。所以我定义了一个`Drawer`包含 a的类`boolean allow_draw`，并添加了一个方法`draw`。

`draw``mousemoved`使用画布中的事件调用，并使用and`allow_draw`设置 true 和 false 。`mousepressed``released`

但是，`mousemoved`当我按下鼠标按钮时不会触发...

我的问题是：按下鼠标按钮时如何听鼠标移动。

希望你知道我在找什么:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:55:25.510

你能发布你的源代码吗？请尝试添加 MouseMotionListener。这是我正在从事的一个项目的一个例子。

```
addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {

        public void mouseDragged(java.awt.event.MouseEvent evt) {
            formMouseDragged(evt);
        }
        public void mouseMoved(java.awt.event.MouseEvent evt) {
            formMouseMoved(evt);
        }
    });` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:17:11.247

你应该考虑，

*   使用 MouseListener 和 MouseMotionListener 的组合，在 MouseAdapter 类中方便地组合。
*   当 mousePressed 发生时*打开*绘图。
*   发生 mouseReleased 时*关闭*绘图
*   如果绘图处于打开状态（使用 if 块），则在 mouseDragged 内绘图。
*   `addMouseListener(...)`使用方法和方法将 MouseAdapter 对象两次添加到组件中`addMouseMotionListener(...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:55:48.683

按下按钮的鼠标移动事件将是拖动事件。只需听“MouseListener#mouseDragged”，这就是您要找的。

# c++ - 带有多维数组错误的简单 C++ 程序？

> ID：13204605
> 
> 赞同：0
> 
> 时间：2012-11-02T23:52:26.553
> 
> 标签：c++, multidimensional-array

运行以下代码时，我正在尝试更新井字游戏板。当您输入 3 作为一列时，它会在游戏板上设置 2 个 X 或 O。

**这是输出的示例**

```
*  *  *
*  *  *
*  *  *

X: Select a Row: 1
X: Select a Col: 3
*  *  X
X  *  *
*  *  * 
```

**这是所需的输出**

```
*  *  *
*  *  *
*  *  *

X: Select a Row: 1
X: Select a Col: 3
*  *  X
*  *  *
*  *  * 
```

**这是代码**

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    int rowSelect = 0;
    int colSelect = 0;
    char turn = 'X';
    char rowcol[2][2];

    for(int i=0; i < 3; i++)
    {
        for(int j=0; j < 3; j++)
        {
            rowcol[i][j] = '*';
        }
    }

    for(int i=0; i < 3; i++)
    {
        for(int j=0; j < 3; j++)
        {
            cout << rowcol[i][j] << "  ";
        }
        cout << endl;
    }

    cout << endl;

    while (true)
    {

        cout << turn << ": Select a Row: ";
        cin >> rowSelect;
        while (rowSelect < 1 || rowSelect > 3)
        {
            cout << "I cannot accept that value, try again!" << endl;
            cout << endl;
            cout << turn << ": Select a Row: ";
            cin >> rowSelect;
        }

    cout << turn << ": Select a Col: ";
    cin >> colSelect;
    while (colSelect < 1 || colSelect > 3)
    {
        cout << "I cannot accept that value, try again!" << endl;
        cout << endl;
        cout << turn << ": Select a Col: " << endl;
        cin >> colSelect;
    }

    rowcol[rowSelect-1][colSelect-1] = turn;

    if (turn == 'X')
    {
        turn = 'O';
    }
    else
    {
        turn = 'X';
    }

        for(int i=0; i < 3; i++)
        {
            for(int j=0; j < 3; j++)
            {
                cout << rowcol[i][j] << "  ";
            }
            cout << endl;
        }

    }

    system("PAUSE");
    return 0;
} 
```

谢谢！

-麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:19:50.153

问题是数组。尽管使用从零开始的索引访问数组，但定义需要为其保留空间的实际元素数量。

您将 rowcol 定义为：

```
char rowcol[2][2];  // This defines a 2 x 2 array 
```

您应该将 rowcol 定义为：

```
 char rowcol[3][3];  // This defines a 3 x 3 array 
```

希望这可以帮助！

基思

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T23:57:16.153

您的 rowcol 数组需要为 3x3：

```
char rowcol[3][3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:55:10.703

```
char rowcol[2][2]; 
```

在所有情况下，`i, j`必须只迭代直到`< 2`它是一个 2x2 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T23:58:24.653

*   您的数组每行仅包含 2 个元素，而您的循环运行三行三列。您似乎对数组的编号方式感到困惑，将使用元素 [0] 和元素 [1] 访问具有 2 个元素的数组，因为 0 是编程中的第一个数字（不是 1）。您需要声明一个包含三个元素的数组，并使用 [0] [1] 和 [2] 访问它们。

修复：更改为`char Array[3][3];`

# tomcat - 我无法在 solr 上创建 text_general_edge_ngram 字段

> ID：13204614
> 
> 赞同：0
> 
> 时间：2012-11-02T23:54:16.350
> 
> 标签：tomcat, solr, tokenize

我想在 solr 上搜索一个字段，在写这个之前我搜索了很多，我的问题是我将 fieldType 名称块添加到我的 schema.xml，但是当我尝试定义一个字段时，solr 给了我一些错误，这是我的字段类型代码，

```
<fieldType name="text_general_edge_ngram" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.LowerCaseTokenizerFactory"/>
            <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.LowerCaseTokenizerFactory"/>
        </analyzer>
    </fieldType> 
```

这些是我试图添加到 schema.xml 的字段

```
<field name="name" type="edge_ngram" indexed="true" stored="true"/>
<field name="name" type="edgengram" indexed="true" stored="true"/>
<field name="name" type="ngram" indexed="true" stored="true"/>
<field name="name" type="text_general_edge_ngram" indexed="true" stored="true"/> 
```

我是solr的新手，任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:36:46.223

重新阅读您的问题后，我看到了问题。您不能有四个字段都具有相同的名称。如果您真的需要上面定义的所有四个字段，我会将它们更改为以下内容：

```
 <field name="name1" type="edge_ngram" indexed="true" stored="true"/>
 <field name="name2" type="edgengram" indexed="true" stored="true"/>
 <field name="name3" type="ngram" indexed="true" stored="true"/>
 <field name="name4" type="text_general_edge_ngram" indexed="true" stored="true"/> 
```

架构文件中字段的实际名称必须是唯一的。

# php - 使用 HTML 表单和 PHP 在 MySQL 数据库中存储电子邮件

> ID：13204618
> 
> 赞同：0
> 
> 时间：2012-11-02T23:55:00.460
> 
> 标签：php, html, mysql, forms

我正在制作一个表格，我可以在其中收集姓名和电子邮件地址并将它们发送到 MySQL 数据库进行存储。我编写了 HTML 和 PHP 文件，它似乎正在工作。它与“感谢您输入电子邮件！”相呼应。当我查看数据库时，它会为数据创建一行，但所有字段都是空白的。我不确定发生了什么，这是我第一次使用数据库。感谢你的帮助！

HTML

```
<form action='/submitEmail.php' action='POST'>
  <p>First name: <input type='text' id="firstname" name='firstname' /></p>
  <p>Last name: <input type='text' id="lastname" name='lastname' /></p>
  <p>Email: <input type='text' name='email' /></p>
  <input type='submit' value='Submit Email' />
</form> 
```

PHP

```
<?php
  // Connecting to the MySQL server
  $host="myHost";
  $user_name="myUsername";
  $pwd="myPassword";
  $database_name="myDatabase"; //assuming you created this
  $db=mysql_connect($host, $user_name, $pwd);
  if (mysql_error() > "") print mysql_error() . "<br>";
  mysql_select_db($database_name, $db);
  if (mysql_error() > "") print mysql_error() . "<br>";
  // Storing form values into PHP variables
  $firstname = $_POST["firstname"]; // Since method="post" in the form
  $lastname = $_POST["lastname"];
  $email = $_POST["email"];
  // Inserting these values into the MySQL table
  // we created above
  $query = "insert into email_list (firstname, lastname, email) values ('" . $firstname . "', '" . $lastname . "', '" . $email . "')";
  $result = mysql_query($query);
  // mysql_query() is a PHP function for executing
  // MySQL queries
  echo "<p>Thank you for entering an email!</p>";
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:59:16.540

属性`method`应该是`post`.

```
<form action='/submitEmail.php' method='POST'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T13:21:39.060

你写 `action='POST'` 而不是 `method='POST'`. 尝试使用以后的一个。它应该工作。

编码快乐！！

# c++ - 冒泡排序 - 结构数组和结构数组

> ID：13204619
> 
> 赞同：1
> 
> 时间：2012-11-02T23:55:02.147
> 
> 标签：c++, sorting, bubble-sort

如何使用冒泡排序（Student::name 上的学生 [] 降序排列并在 Class 上对 classes[] 数组进行排序）对两个结构数组（其中一个数组是另一个结构的成员）进行排序：：标题？

```
struct Class
{
    string title; 
    int units;
    char grade;

};
struct Student
{
    string name;
    double gpa;
    Class classes[500];
}; 
```

主要：

```
Student students[SIZE]; 
```

我正在尝试对一个结构数组进行排序，每个结构数组都包含一个结构数组，这些结构也需要使用冒泡排序进行排序。我的排序功能粘贴在下面。它没有正确排序，而是根据标题正确排序结构类 [] 的内部数组，并在 for 循环的第一次迭代中正确排序外部数组 st[]。由于在第二次迭代中 st[] 的元素已被交换，因此第一个元素未排序 b/c currentStu 现在设置为数组中的第二个元素。

```
void sort_name(Student st[], int numValues)
{
  int currentStu = 0;
  int currentClass = 0;

  for(currentStu = 0; currentStu < numValues; currentStu++)
  {
        for(currentClass = 0; st[currentStu].classes[currentClass].title != ""; currentClass++)
        {
            bubbleUpClass(st, currentClass, currentStu);
        }

        bubbleUpLastName(st, currentStu, numValues - 1);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:04:15.690

你并没有真正的二维学生数组，这（总的来说）是一件好事。您需要应用两个单独的排序过程，它们可以完全独立地应用。

1.  您需要遍历您的学生列表，对每个班级列表进行排序（每个学生一个）。目前尚不清楚您如何知道给定学生上多少门课，但这是您需要解决的问题。您可以在其他排序操作之前或之后（但不能在期间）执行此操作。如果感兴趣，它很容易并行化；您可以将学生列表划分为 N 个线程，为每个线程提供一组合适的学生来处理。

2.  您需要对整个学生列表进行排序。此操作将影响整个学生数组（或至少影响其中填充的部分）。您将在其他排序操作之前或之后（但不是期间）执行此排序。

您将需要两个单独的排序函数——或者，如果您借用标准 C 函数的设计`qsort()`，您将需要两个单独的比较器函数和一个排序算法。

所以，不要试图将这两种排序操作结合起来。分开做。

# jquery - jQuery-UI 可排序连接列表将顺序和关联保存到 rails 模型

> ID：13204628
> 
> 赞同：2
> 
> 时间：2012-11-02T23:55:56.383
> 
> 标签：jquery, ruby-on-rails, ruby, jquery-ui, jquery-ui-sortable

假设我有：一个包含许多“问题”的“调查”，其中包含许多“答案”

如果我的“调查”中有 2 个“问题”实例，我们称它们为：“好问题”和“坏问题”

“好问题”有 5 个“答案”，“坏问题”有 3 个“答案”

如果“好问题”和“坏问题”是通过 jQuery-UI 交互连接的可排序列表。[http://jqueryui.com/sortable/#connect-lists](http://jqueryui.com/sortable/#connect-lists)

我知道如何使用 jQuery-UI 将它们显示为 2 个可排序的列表，并且我还可以将“答案”从“坏问题”放到“好问题”中。但是我如何将他们新排序的位置和他们新排序的关联保存到另一个“问题”回到 Rails 数据库？

Railscasts 有如何为单个可排序列表保存位置，但不为属于不同关联模型的列表保存位置。 [http://railscasts.com/episodes/147-sortable-lists-revised](http://railscasts.com/episodes/147-sortable-lists-revised)

我真的很感谢这里的帮助！

**编辑**

我意识到我只需要发布到 Rails 控制器，我将“答案”放入（即`<ol class = "connectableSortable" id = "Good_Question"</ol>`）的列表的元素 id

这是 Railscast 如何向 Rails 控制器发送 POST 以按可排序顺序传递 object_id 数组的语法。

```
jQuery ->
  $('#faqs').sortable(
    axis: 'y'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize'))
  ) 
```

我将如何更新此 POST 以将列表 ID 传递给它，这样我就可以将“答案”的“问题”外键更新为它所属的列表“ID”？

这个 SO 答案有一种方法来检索列表 ID。[获取元素被删除的项目/对象](https://stackoverflow.com/questions/9584816/jquery-sortable-get-the-item-object-where-the-element-is-dropped)

所以现在，我真的只需要知道如何将一个额外的参数传回 Rails 控制器。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:52:51.567

经过几天的努力，我能够弄清楚我想要什么。这里的模型是一天有很多活动（而不是原来的问题有很多答案）。

这是我的 jQuery 代码（在 Coffeescript 中）：使用 jQuery 选择器获取每个列表项的 ID 和每个列表项的列 ID。将其作为看起来像这样的参数推送`Activity:[{"id":"1", "column":"1"}, {"id":"2", "column":"1"}...etc]`

```
jQuery ->
  $('[id*="day"]').sortable(
    connectWith: ".day"
    placeholder: "ui-state-highlight"
    update: (event, ui) ->
      neworder = new Array()
      $(this).children().each ->
        column = $(this).parent().attr("id").match(/\d+/)[0]
        id = $(this).attr("id").match(/\d+/)[0]
        neworder.push(
          id: id
          column: column
        )
      alert neworder
      $.ajax
        url: "sort"
        type: "POST"
        data: { Activity: JSON.stringify(neworder) }
    ).disableSelection() 
```

我如何将 AJAX 调用解析回 Rails 控制器：我正在遍历`{"id":"1", "column":"1"}`数组中的每个对象并获取它的索引位置。

```
def sort
    JSON.parse(params[:Activity]).each_with_index do |x, index|
      idx = x["id"]
      positionx = index+1
      column = x["column"]
      activity = Activity.find(idx)
      activity.update_attributes(:position => positionx, :day_id => column)
    end
    render nothing: true
  end 
```

回到我的模型中，我通过它的位置订购“活动”关联，所以当我在视图中列出它时，它会显示在正确的位置。

```
class Day < ActiveRecord::Base
  has_many :activities, :order => 'position'
  accepts_nested_attributes_for :activities, allow_destroy: true 
end 
```

在这 2 个答案中，有关我如何做到这一点的更多详细信息：

[对 Rails 控制器的 Ajax POST 请求的格式化参数 - 用于 jQuery-UI 可排序列表](https://stackoverflow.com/questions/13214454/formatting-parameters-for-ajax-post-request-to-rails-controller-for-jquery-ui)

[jQuery AJAX POST 到 Rails 控制器。执行 each_with_index 时出错（TypeError 无法将 Symbol 转换为 Integer）](https://stackoverflow.com/questions/13225523/jquery-ajax-post-to-rails-controller-error-when-doing-each-with-index-typeerro)

# android - News Ticker Widget，它们是如何工作的？

> ID：13204631
> 
> 赞同：-2
> 
> 时间：2012-11-02T23:56:25.250
> 
> 标签：android, widget, rss-reader

我知道这可能是一个愚蠢的问题，但我想知道是否有人知道新闻自动收报机小部件是如何工作的……它只是一个显示在屏幕上的 RSS 提要，还是一个从 XYZ 获取最新消息的 webView地点？

一直试图弄清楚这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:44:49.703

你实际上回答了你自己的问题。

RSS 提要确实是最简单的方法之一，因为大多数新闻网站都有 RSS 提要。只需检索提要并解析 XML 块（即标题、新闻正文等）并按照您想要的方式排列内容。

既然您已经标记[了 Android，请尝试一下](http://developer.android.com/training/basics/network-ops/xml.html)。

# ruby-on-rails - 在 Ruby 中冻结一个随机数

> ID：13204634
> 
> 赞同：4
> 
> 时间：2012-11-02T23:56:57.410
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, random

我正在尝试构建一些东西，它会从 Ruby 中的列表中随机选择两个对象（使用 Rails），然后对这些对象执行基本操作。我目前的设置涉及在开始时随机选择数字 - 使用这些数字从数据库中获取对象，然后将这些对象渲染到索引。但是，现在我正在尝试使用 AJAX 编辑这些对象，但遇到了问题。

似乎，当我单击一个链接时，随机数正在重新计算并导致我的 AJAX 函数不起作用。

我已经在下面包含（我相信是）所有相关代码，但如果您需要查看其他内容以了解详情，请告诉我。我正在寻找旧动物的标题和（最好是它们以前的评级和）它们的新评级出现在页面底部。

谢谢，

马特

`controllers/static_pages.rb`

```
class StaticPagesController < ApplicationController
respond_to :html, :js
before_filter :pickanimals

def pickanimals
    @allAnimals = Animal.all
    @random_no = rand(@allAnimals.length)
    @animal = @allAnimals[@random_no]
    @allAnimals.delete_at(@random_no)
    @newRandom = rand(@allAnimals.length)
    @animal2 = @allAnimals[@newRandom]
end

  def index
    respond_to do |format|
        format.html
        format.js
    end
end

  def help
  end

  def about
  end

  def contact
  end

def league
end

def voting
    @votedAnimal = Animal.find(params[:id])
    if @votedAnimal == @animal
        @animal.rating += 1
        @animal2.rating -= 1
    else
        @animal.rating -= 1
        @animal2.rating += 1    
    end
    Animal.transaction do
        @animal.save!
        @animal2.save!
    end
    respond_to do |format|
        format.html { redirect_to root_path }
        format.js  
    end
end
end 
```

`app/views/static_pages/index.html.erb`

```
<div class="center hero-unit">
<h1>Animal Attack</h1>
<p> Who will win when nature collides? </p>
<div class="animalcontainerright">
<h2> <%= @animal.name %> </h2> 
<%= link_to image_tag(@animal.attachment.url(:large)), voting_path(@animal.id), :remote => true, :confirm => "Rating:  "+@animal.rating.to_s  %>
</div>
<div class="animalcontainerleft">
<h2> <%= @animal2.name %> </h2>
<%= link_to image_tag(@animal2.attachment.url(:large)), voting_path(@animal2.id), :remote => true, :confirm => "Rating:  "+@animal2.rating.to_s  %>
</div>
<div id="animalfacts"></div> 
```

`routes.rb`

```
AnimalAttack::Application.routes.draw do

resources :animals

root to: 'static_pages#index'
match '/help' => 'static_pages#help'
match '/about' => 'static_pages#about'
match '/contact' => 'static_pages#contact'
match '/league' => 'static_pages#league'
match '/voting/:id' => 'static_pages#voting'

end 
```

`rake routes`

```
 animals GET    /animals(.:format)          animals#index
        POST   /animals(.:format)          animals#create
 new_animal GET    /animals/new(.:format)      animals#new
edit_animal GET    /animals/:id/edit(.:format) animals#edit
 animal GET    /animals/:id(.:format)      animals#show
        PUT    /animals/:id(.:format)      animals#update
        DELETE /animals/:id(.:format)      animals#destroy
   root        /                           static_pages#index
   help        /help(.:format)             static_pages#help
  about        /about(.:format)            static_pages#about
contact        /contact(.:format)          static_pages#contact
 league        /league(.:format)           static_pages#league
               /animals(.:format)          animals#new
               /voting/:id(.:format)       static_pages#voting 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T00:06:55.277

我猜`@animal`是因为你的`:before_filter`. 除非您另有说明，否则它将在*所有*操作之前执行（因此在*每个*控制器操作`@animal`之前重新分配）。您可能希望将其限制为仅需要新生成的随机数的方法。例如：

 *```
before_filter :pickanimals, :only => :index 
```

还。你知道[Array#sample](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sample)吗？这是一种从数组中选择随机元素的内置方式。您可能会发现它在这里很有用：

```
@animal, @animal2 = @allAnimals.sample(2) 
```

**此外**

像这样依赖控制器中的实例变量是在函数之间传递信息的一种非常脆弱的方式。如果您的控制器需要知道`id`两个模型的 s 以根据用户选择在每个模型上增加或减少计数器，为什么不使用表单将这两个`id`s 发送到此控制器操作？到目前为止，您只需要两个字段：`chosen_animal_id`和`reject_animal_id`.*

# clojure - 线程优先，线程最后和“点”形式

> ID：13204636
> 
> 赞同：3
> 
> 时间：2012-11-02T23:57:02.167
> 
> 标签：clojure, macros, clojure-java-interop

为什么这两个表达式给出相同的结果？

`> (macroexpand-all '(->> "string" (.charAt)))`

`(. "string" charAt)`

`> (macroexpand-all '(-> "string" (.charAt)))`

`(. "string" charAt)`

“->>”宏不应该将“字符串”作为列表中的最后一个元素插入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T00:32:44.997

它首先扩展到`(.charAt "string")`，这确实是最后一个。然后该形式进一步扩展为`(. "string" charAt)`。

# javascript - impromptu.js 和 infieldlabel.js 不能一起工作

> ID：13204641
> 
> 赞同：-1
> 
> 时间：2012-11-02T23:57:36.230
> 
> 标签：javascript, impromptu

我正在使用一个名为 Impromptu 的简单模式对话框，并且我还使用了一个使用 infieldlabel.js 的联系表单——但是，为了使 Impromptu 脚本工作，infieldlabel 不会。为了使 infieldlabel 工作，我必须禁用即兴脚本。

这有什么理由吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:23:54.087

您正在同时加载**三个**不同版本的 jQuery。如果这两个库依赖于不同的不兼容版本，这可能是您为什么它们不能一起工作的原因。

# ios - 禁用xcode中另一个视图控制器的按钮

> ID：13204645
> 
> 赞同：1
> 
> 时间：2012-11-02T23:58:30.530
> 
> 标签：ios, xcode, uiviewcontroller, uibutton

我有一个动态初始化的按钮。我想从另一个 UIViewController 禁用该按钮。

我正在使用这段代码：

按钮是@property (strong, nonatomic) IBOutlet UIButton *aboutus;

然后我尝试以这种方式禁用它：

```
OtherViewController * view2 = [[OtherViewController alloc]      initWithNibName:@"view2"    bundle:nil];
view2.aboutus.enabled=NO; 
```

但该按钮仍将启用..任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:02:12.370

你需要一个公共`BOOL`财产：

```
@property(nonatomic) buttonEnabled; 
```

上`OtherViewController`。将该值设置为您想要的任何值（是或否），然后在 viewDidLoad 中：

```
aboutus.enabled = buttonEnabled; 
```

# objective-c - 核心数据 - NSDate 属性在持久存储中发生变化

> ID：13204649
> 
> 赞同：0
> 
> 时间：2012-11-02T23:58:56.920
> 
> 标签：objective-c, cocoa-touch, cocoa, core-data

我正在开发一个日历应用程序，它可以保存和显示各种班次轮换。在最近发生的无法解释的错误与 X-Code 更新到 ver. 4.5.2\. 我在 Google 或 Stackoveflow 上的任何地方都找不到任何类似的问题。

班次旋转由用户设置和保存。创建轮班轮换的过程涉及向用户呈现一系列日期，并且用户将每个日期与特定轮班相关联。

我正在使用带有 sqlite 存储的 Core Data 来管理保存的数据。上述元素的对象图涉及几个“Shift”NSManagedObject 实体，其中包含班次的详细信息，例如标题、开始和结束时间，最重要的是允许稍后显示班次轮换的日期。“Shift”实体由另一个名为“ShiftRotation”的 NSManagedObject 保持在一起，它与“Shifts”具有多对一的关系。

直到最近，当我对使用这些“Shift”对象的方式进行了一些更改时，我的应用程序才能正常运行。

我的问题是这个。用户将“班次”与日期相关联。日期存储在“Shift”NSManagedObject 的“日期”属性中。上下文被保存。当我稍后访问“Shift”时，没有进行任何更改，分配给“Shift”的日期似乎已更改。

我逐行浏览了我的代码并添加了许多 NSLogs 以查看它在哪里或为什么会发生变化，但没有任何结果。我注意到在我将上下文保存在发生保存的类中之前和之后的日期没有变化。当我从主日历屏幕访问它时，也没有任何变化。但是，当我后来从我管理所有班次轮换的另一个屏幕上检索“班次”时，它们似乎已经改变。

日期更改大约是未来 31 到 32 天。我不禁想知道这是 Core Data 中的错误还是我遗漏了一些东西。

为什么从 sqlite 持久存储中访问日期会导致重大且不可预测的日期更改的任何解释或原因？

**更新：**我试图通过使用 NSNotificationCenter 进一步缩小正在发生的事情以及发生的位置。

我正在使用 iOS 6。

我注册了根视图控制器来观察托管对象上下文的任何变化。特别是对对象的任何更改（即 NSManagedObjectContextObjectDidChange）。

更新“Shift”NSManagedObject 的属性后，我收到一条通知，指示“Shift”对象已更新。这是一些代码和日志。

这是创建“Shift”实体并给出日期的地方：

```
- (NSMutableArray *)arrayWithDateStartingAtDate:(NSDate *)anyDate forNumberOfDays:(NSUInteger)days;
{
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSMutableArray *monthArray = [[NSMutableArray alloc] init];
    NSDateComponents *comps = [[NSDateComponents alloc] init];
    NSDate *tempDate;

    NSManagedObjectContext *moc = [[CSEventStore sharedStore] managedObjectContext];

    for (NSUInteger i = 0; i < days; i++) {
        [comps setDay:i];
        tempDate = [gregorian dateByAddingComponents:comps toDate:anyDate options:0];
        Shift *shiftRDO = [Shift initShiftEntityRDOWithDate:tempDate InContext:moc];
        [shiftRDO setShiftRotation:_shiftRotation];

        NSMutableDictionary *dateDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:tempDate, @"date", shiftRDO, @"shift", nil];
        [monthArray addObject:dateDict];
    }

    return monthArray;
} 
```

这是调用更新它的地方：

```
[shiftEntity updateWithShiftType:_selectedShiftType inContext:context]; 
```

调用方法：

```
- (void)updateWithShiftType:(ShiftType *)shiftType inContext:(NSManagedObjectContext *)context
{
    self.title = [NSString stringWithFormat:@"%@",shiftType.title];
    self.symbol = [NSString stringWithFormat:@"%@",shiftType.symbol];
    self.startTime = [shiftType.startTime dateByAddingTimeInterval:0];
    self.endTime = [shiftType.endTime dateByAddingTimeInterval:0];
    self.splitStartTime = [shiftType.splitStartTime dateByAddingTimeInterval:0];
    self.splitEndTime = [shiftType.splitEndTime dateByAddingTimeInterval:0];
    self.isWorkday = [shiftType.isWorkday copy];
    self.isTimeOff = [shiftType.isTimeOff copy];
    self.typeID = [shiftType typeID];
} 
```

上述代码执行后，日志中会发布第一个通知：

```
<Shift: 0x8140b70> (entity: Shift; id: 0x81409e0 <x-coredata:///Shift/tE59A199A-444E-4079-BD8C-0D3E734607783> ; data: {
date = "2012-10-29 04:00:00 +0000";
endTime = "2012-11-02 19:35:38 +0000";
isTimeOff = 0;
isWorkday = 1;
shiftRotation = "0x81406a0 <x-coredata:///ShiftRotation/tE59A199A-444E-4079-BD8C-0D3E734607782>";
splitEndTime = nil;
splitStartTime = nil;
startTime = "2012-11-02 09:35:34 +0000";
symbol = none;
title = Days;
typeID = "991ACC8C-ECE0-4555-9002-7AC233F26CBF"; 
```

“**日期**”属性确实有正确的分配日期。

现在，只要我使用以下方法保存上下文：

```
- (BOOL)saveContext
{
    NSError *error = nil;
    if (__managedObjectContext) {
        if ([__managedObjectContext hasChanges] && ![__managedObjectContext save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

            // More details on error
            NSArray* detailedErrors = [error userInfo][NSDetailedErrorsKey];
            if(detailedErrors != nil && [detailedErrors count] > 0) {
                for(NSError* detailedError in detailedErrors) {
                    NSLog(@"  DetailedError: %@", [detailedError userInfo]);
                }
            }
            else {
                NSLog(@"  %@", [error userInfo]);
            }

            return NO;
            abort();
        }
    }
    return YES;
} 
```

我收到带有以下日志的第二次更改通知：

```
 <Shift: 0x8140b70> (entity: Shift; id: 0x82c9dd0 <x-coredata://7CE834F9-5056-457A-BB2C-B8BA638086F1/Shift/p23> ; data: {
    date = "2012-12-02 05:00:00 +0000";
    endTime = "2012-11-02 19:35:38 +0000";
    isTimeOff = 0;
    isWorkday = 1;
    shiftRotation = "0x8260dc0 <x-coredata://7CE834F9-5056-457A-BB2C-B8BA638086F1/ShiftRotation/p11>";
    splitEndTime = nil;
    splitStartTime = nil;
    startTime = "2012-11-02 09:35:34 +0000";
    symbol = none;
    title = Days;
    typeID = "991ACC8C-ECE0-4555-9002-7AC233F26CBF";
}), 
```

如您所见，“**日期**”更改为 2012-12-02，只是通过保存。

**更新：**我终于能够追踪到无法解释的变化的原因。在我将上下文保存在代码中的其他位置之后，我似乎无意中更改了“日期”属性。如果我遵循卡明的惯例，也许就不会发生这种情况（如果我有名声，我会给出+1）。毕竟，持久存储中的值没有改变。

也许分享我如何追踪这个错误可能会使其他可能有类似问题的人受益，不一定与核心数据相关。

我使用键值观察来观察“日期”属性。创建“Shift”实体后，我立即开始观察：

```
[_shiftEntity addObserver:self forKeyPath:@"date" options:NSKeyValueObservingOptionNew context:NULL]; 
```

...并在我的代码中已经发生更改的某个点之后停止观察：

```
[_shiftEntity removeObserver:self forKeyPath:@"date" context:NULL]; 
```

然后我实现了 KVO 方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSLog(@"Object being observed: %@", [object description]);
    NSLog(@"Value changed to: %@", change[NSKeyValueChangeNewKey]);
} 
```

我在上述方法处设置了一个断点。当变化发生时，它停在这一点上，并告诉我发生了什么变化。最重要的是，当代码停止执行时，我查看了调用堆栈，并追溯了导致更改的代码所采用的路径。我能够准确地找到我的代码进行更改的位置。

我没有太多使用 KVO 的知识，但这次经历向我展示了它即使用于调试目的也很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:41:02.310

可能的命名冲突。我学会了给我所有的名字加上前缀。例如，我将核心数据属性称为“pDate”而不是“date”。我称堆栈本地“zDate”、参数“aDate”、静态“sDate”和实例变量“iDate”。（我没有为方法名称添加前缀。）这避免了变量命名冲突并使代码更易于理解。给某个东西起一个简单的名称是为了寻找与操作系统的名称冲突，它应该在其所有变量前面加上 __（双下划线），但这并不总是发生。这可能不是您的问题，但操作系统可能将“日期”一词用于其他目的，并且似乎将“日期”修改为保存时间。

# c - 如何在 Linux 环境中使用 C 进行 chdir

> ID：13204650
> 
> 赞同：0
> 
> 时间：2012-11-02T23:59:10.553
> 
> 标签：c, linux, chdir

我是 c 编程的新手。我如何更改目录，就像`/home/jobs/$ans/xxx/`我在 c 程序`$ans`中无法更改的用户字符串一样。`chdir`

我的脚本如下：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char jdir;
    printf("Enter job directory:");  /* user input for different directories */
    scanf("jdir");
    chdir("/home/jobs/%jdir/xxx");
    system("ls -ltr");
    return(0);
} 
```

如何更改目录`chdir`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:35:31.547

用 C 语言编写这个程序似乎有点愚蠢，但如果有充分的理由这样做（例如，如果它必须是 setuid），那么你应该更加防御。我会做这样的事情：

```
#define _XOPEN_SOURCE 700 /* getline */
#include <stdio.h>
#include <string.h>
#include <unistd.h>

int main(void)
{
    char *jobdir = 0;
    size_t asize = 0;
    ssize_t len;

    fputs("Enter job directory: ", stdout);
    fflush(stdout);
    len = getline(&jobdir, &asize, stdin);
    if (len < 0) {
        perror("getline");
        return 1;
    }

    jobdir[--len] = '\0'; /* remove trailing \n */
    if (len == 0 || !strcmp(jobdir, ".") || !strcmp(jobdir, "..")
        || strchr(jobdir, '/')) {
        fputs("job directory name may not be empty, \".\", or \"..\", "
              "nor contain a '/'\n", stderr);
        return 1;
    }

    if (chdir("/home/jobs") || chdir(jobdir) || chdir("xxx")) {
        perror(jobdir);
        return 1;
    }
    execlp("ls", "ls", "-ltr", (char *)0);
    perror("exec");
    return 1;
} 
```

这个答案的编辑历史将证明要做到这一点 100% 是多么困难——我不断地回顾它并意识到我忘记了另一个需要防御的案例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T00:05:54.263

使用类似的东西：

```
char jdir[200]
scanf("%s", &jdir);
char blah[200];
snprintf(blah, 199, "/home/jobs/%s/xxx", jdir);
chdir(blah); 
```

# javascript - 按属性值对 javascript 对象进行排序

> ID：13204651
> 
> 赞同：2
> 
> 时间：2012-11-02T23:59:12.317
> 
> 标签：javascript, sorting

如何对以下对象进行排序以更正*名称*的字母顺序？

```
var users_by_id = {
   '12': ['Ted', 34, 'Male'],
   '13': ['Ben', 36, 'Male'],
   '14': ['Alice', 42, 'Female']
}

var users_by_name = {
   '14': ['Alice', 42, 'Female'],
   '13': ['Ben', 36, 'Male'],
   '12': ['Ted', 34, 'Male']
} 
```

我有一个计划，需要两次通过对象，但我不确定是否有更简单的方法来做到这一点。我的计划是这样的（我正在使用 jQuery）：

```
var users_by_name = {};
var names = [];
$.each(users_by_id, function(id, props) {
  names.push(props[0]);
});
names.sort();
$.each(names, function(i, n) {
  $.each(users_by_id, function(id, props) {
    if(n == props[0]) users_by_name[id] = props;
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:12:35.280

如果要保留基于对象的存储而不是使用数组，则需要创建对象属性的数组，然后对其进行排序以获得订单。

```
var users = {
   '12': ['Ted', 34, 'Male'],
   '13': ['Ben', 36, 'Male'],
   '14': ['Alice', 42, 'Female']
};

var props = Object.keys(users);

var user_props_by_name = props.slice().sort(function(prop_a, prop_b) {
    return users[prop_a][0].localeCompare(users[prop_b][0]);
});

var user_props_by_age = props.slice().sort(function(prop_a, prop_b) {
    return users[prop_a][1] - users[prop_b][1];
}); 
```

然后您可以迭代数组并使用属性名称来查找对象中的项目。

```
user_props_by_name.forEach(function(prop) {
    console.log(users[prop]);
});

user_props_by_age.forEach(function(prop) {
    console.log(users[prop]);
}); 
```

但是，在添加和删除用户时，这将需要一些维护。您可能希望创建一个添加和删除用户的层，同时更新排序数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:07:14.197

sort 接受一个可选参数，它是一个比较函数 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

```
var data =[
  ['Ted', 34, 'Male'],
  ['Ben', 36, 'Male'],
  ['Alice', 42, 'Female']
];

var sortbyid = data.sort(function(a,b){return a[1]<b[1] ? -1 : a[1]>b[1] ? 1 : 0});
var sortbyname = data.sort(function(a,b){return a[0]<b[0] ? -1 : a[0]>b[0] ? 1 : 0}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T00:51:47.547

好，我知道了。正如评论中所指出的，对象没有任何顺序。因此，无论添加（或定义）成员的顺序如何，迭代对象都会产生[相同的结果](http://jsbin.com/ehinec/1/)。

所以，我应该改变我的方法。需要了解一些背景知识才能了解为什么新方法会起作用（顺便说一下，问题中缺少这一点）。

我有一个用户表，我想按字母顺序显示一个包含用户的 html 表，如下所示：

```
<tr id="user-N"><td>NAME</td><td>AGE</td><td>GENDER</td></tr> 
```

这就是我的来历：

```
var name_ids = [];
var trows = '', thisNID;
$.each(users_by_id, function(id, props) {
  name_ids.push(props[0]+':'+id);
});
name_ids.sort();
$.each(name_ids, function(i,nid) {
  thisNID = nid.split(':');
  trows += '<tr id="user-' + thisNID[1] + '">';
  trows += '<td>' + users_by_id[thisNID[1]][0] + '</td>';
  trows += '<td>' + users_by_id[thisNID[1]][1] + '</td>';
  trows += '<td>' + users_by_id[thisNID[1]][2] + '</td>';
  trows += '</tr>';
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T02:34:52.643

另一个使用 Array.prototype.sort 函数的选项

```
var users_by_id = {
       '0': ['Ted', 34, 'Male'],
       '1': ['Ben', 36, 'Male'],
       '2': ['Alice', 42, 'Female']
 }

// as long as length is bigger than max object key value
users_by_id.length = Object.keys( users_by_id ).length; 

Array.prototype.sort.call( users_by_id, function( a, b ) {

        var aName = a[0].toLowerCase();
        var bName = b[0].toLowerCase();

        if( aName > bName ) return 1;
        if( aName < bName ) return -1;
        return 0;
}); 
```

上面有一些警告：

1.  对象必须包含长度属性
2.  length 属性的值必须大于对象键的**最大值**

如果您不使用连续数字作为键并执行以下操作：

```
 var users_by_id = {
           '12': ['Ted', 34, 'Male'],
           '13': ['Ben', 36, 'Male'],
           '14': ['Alice', 42, 'Female']
     } 
```

排序后，对象的排序数字键将被重命名 => 0,1,2

看看[这里的小提琴](http://jsfiddle.net/YChHY/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T00:28:58.860

当您必须对集合进行迭代时，通常会进行排序。所以...我的建议是添加到对象原型的方法 -`.keysById`并且`.keysByName`必须返回按您上面提到的条件排序的键。因此，当您必须按名称迭代时，您可以执行以下操作：

```
var kbn = yourObj.keysByName(); 
for(var i=0; i<yourObj.length;i++) { 
  ... yourObj[kbn[i]] ....  
} 
```

你可以使用这种方法，我敢肯定，所以我不会举例。

```
yourObj.prototype.keysByName = function() { ... } 
```

# ruby-on-rails-3 - 模型之间的关系没有像预期的那样工作

> ID：13204652
> 
> 赞同：0
> 
> 时间：2012-11-02T23:59:13.270
> 
> 标签：ruby-on-rails-3, activerecord

我有 3 个基本上是嵌套的模型。

```
class User < ActiveRecord::Base
  attr_accessible :birthday, :name
  has_one :advancement, :dependent => :destroy
  accepts_nested_attributes_for :advancement
  attr_accessible :advancement_attributes
end

class Advancement < ActiveRecord::Base
  attr_accessible :user_id, :rank_name
  belongs_to :user
  has_one :rank, :dependent => :destroy
  accepts_nested_attributes_for :_rank
  attr_accessible :rank_attributes
end

class Rank < ActiveRecord::Base
  attr_accessible :advancement_id, :one_li, :one_pi, :one_date, ...
  belongs_to :advancement
end 
```

这是我用来创建模型的控制器代码。

```
class UsersController < ApplicationController
  def new
    @user = User.new
    @user.advancement = Advancement.new
    @user.advancement.rank = Rank.new

    respond_to do |format|
      format.html # new.html.erb
    end
  end

  def create
    @user = User.new(params[:user])
    @user.advancement = Advancement.new
    @user.advancement.rank = Rank.new

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end
end 
```

在控制台中，我可以创建像我期望的那样工作的关系。当我尝试通过浏览器执行此操作时，我的所有对象都被实例化，外键是正确的，但如果我尝试查找 user.advancement，则会收到方法丢失错误。我是在使用 new 还是 create 错误，如果是，我该怎么办？对不起代码量，但我不知道任何其他方式来解释它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:26:20.367

首先，在您的大部分代码中，您引用了一个“排名”模型，但该模型本身似乎被称为“BoyScoutRank”。这可能是问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:48:04.613

正如Thanh 指出的那样，您有accepts_nested_attributes_for :_rank 而不是:rank。您也不需要在创建中创建新的 Advancement 和 Rank 模型。Accepts_nested_attributes 应该为您处理。

以下工作是否有效（一旦您解决了 :_rank 问题）：

```
@user = User.new(params[:user]) 
```

# ios - 如何使用 Koolistov Passcode xcode 设置密码

> ID：13204654
> 
> 赞同：0
> 
> 时间：2012-11-02T23:59:30.320
> 
> 标签：ios, xcode, sdk, passwords

我是 XCode 新手；所以请耐心等待。

我正在尝试使用密码保护我的 iOS 应用程序 - 我已使用 github.com/Koolistov/Passcode 作为基本代码。

当应用程序启动时，它运行良好并要求输入密码。**我尝试设置一个新密码**，但它不起作用。请任何人都可以帮忙。目前密码为“0000”

更新 - 代码：

```
- (void)passcodeController:(KVPasscodeViewController *)controller passcodeEntered:(NSString *)passCode {
  if ([passCode isEqualToString:@"0000"]) {
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
  } else {
    controller.instructionLabel.text = [NSString stringWithFormat:NSLocalizedString(@"%@ -wrong PW.", @""), passCode];
    [controller resetWithAnimation:KVPasscodeAnimationStyleInvalid];
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:44:40.703

`if ([passCode isEqualToString:@"0000"])`总是会比较`0000`。您必须跟踪您设置的密码，并与该值进行比较，而不是与`0000`.

# ruby - 登录 vk.com net::http.post_form

> ID：13204655
> 
> 赞同：2
> 
> 时间：2012-11-02T23:59:44.013
> 
> 标签：ruby, http

我想在没有 Ruby 的情况下登录 vk.com 或 m.vk.com。但是我的代码不起作用。

```
require 'net/http'

email = "qweqweqwe@gmail.com"
pass = "qeqqweqwe"

userUri = URI('m.vk.com/index.html')
Net::HTTP.get(userUri)
res = Net::HTTP.post_form(userUri, 'email' => email, 'pass' => pass)
puts res.body 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:49:15.700

这种任务正是 Mechanize 的用途。Mechanize 会自动处理重定向和 cookie。你可以这样做：

```
require 'mechanize'

agent = Mechanize.new
url = "http://m.vk.com/login/"

page = agent.get(url)

form = page.forms[0]
form['email'] = "qweqweqwe@gmail.com"
form['pass'] = "qeqqweqwe"
form.submit

puts agent.page.body 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T00:16:59.740

首先，您需要将 userUri 更改为以下内容：

```
userUri = URI('https://login.vk.com/?act=login') 
```

这是 vk 站点需要您的登录参数的地方。

我对 vk 不是很熟悉，但您可能需要一种方法来处理会话 cookie。既接收它，又为将来的请求提供它。你能详细说明你登录后在做什么吗？

这是用于 cookie 处理的 net/http 信息：

```
# Headers
res['Set-Cookie']            # => String
res.get_fields('set-cookie') # => Array
res.to_hash['set-cookie']    # => Array
puts "Headers: #{res.to_hash.inspect}" 
```

# java - 太多打开文件错误，java.io.FileNotFoundException

> ID：13204656
> 
> 赞同：5
> 
> 时间：2012-11-02T23:59:51.420
> 
> 标签：java, file

在我的程序中，我有一个循环扫描一堆文件并读取它们的内容。问题发生在大约 1500 个文件的迭代中，似乎无法复制（或理解（我））

问题：

```
java.io.FileNotFoundException: /path/to/file//myFile (Too many open files) 
```

此方法的异常点：

```
private static String readFileAsRawString(File f) throws IOException {

    FileInputStream stream = new FileInputStream(f); // <------------Stacktrace
    try{
      FileChannel fc = stream.getChannel();
      MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());

      return Charset.defaultCharset().decode(bb).toString();
    } finally {
        stream.close();
    }
} 
```

我在 QA 中运行了这个方法超过 20,000 个文件，它似乎没有问题。

您是否发现我在上面粘贴的代码有任何问题会导致此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:20:02.353

映射是可疑的。A`MappedByteBuffer`可以比它的 寿命长`FileChannel`，并且在它被垃圾回收之前是有效的。您可能没有足够的垃圾来运行 GC，但可能在特定平台上，文件句柄由未引用的缓冲区保留。

* * *

除非显式垃圾收集被禁用 ( `-XX:-DisableExplicitGC`)，否则您应该能够通过捕获异常、调用并重试来测试这一点`System.gc()`。如果它在第二次尝试时有效，那就是你的问题。但是，将电话`System.gc()`作为永久修复是一个坏主意。整体性能最佳的解决方案将在目标平台上进行一些分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T00:46:43.297

不要将 MappedByteBuffer 用于这个琐碎的任务。没有明确的发布时间。只需打开文件，阅读，关闭它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-03T00:21:38.387

我认为您打开的文件太多太快，请尝试添加一个 wait() 来测试它。然后添加一个静态计数器来跟踪打开的文件，如果许多文件已经打开，添加一个等待机制......

# django - Redis 到 Socket.IO

> ID：13204657
> 
> 赞同：2
> 
> 时间：2012-11-02T23:59:58.300
> 
> 标签：django, redis, socket.io, real-time

我正在使用 Django 制作一个实时网络应用程序。Django 完成了所有繁重的工作。为了使应用程序实时，当在 Django 中进行更改时，它会发布到 redis。然后我设置了一个 node.js 应用程序，它将数据从 redis 编组到 socket.io。

所以现在事情看起来像这样。

`Django -> Redis -> Node.js -> Socket.IO -> Browser`

我可以使用 redis 并认为它很棒。我查看了[gevent-socketio](https://github.com/abourget/gevent-socketio)，但这不是我想要的。有没有办法：

`Django -> Redis -> Socket.IO -> Browser`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T12:39:59.177

Redis 和 socket.io 不直接通信..你需要服务器，特别是如果你使用 websockets，长轮询等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T12:49:01.990

您可以使用[django-socketio](https://github.com/stephenmcd/django-socketio)。

您所做的与 Trello 类似：

[http://blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-02T17:27:13.107

我们开始了一个名为`bus.io`npm 的项目。它应该可以帮助你。它简化了将套接字连接到 pub sub 并将消息分发给它们。

在服务器上。

```
var express = require('express')
var app = express();
app.use(express.static(__dirname+'/public'));

var server = require('http').Server(app).listen(3000);

var bus = require('bus.io')(server); 
```

在客户端。

```
<script type="text/javascript src="/bus.io/bus.io.js">
  var sock = io.connect();
  sock.on('connect', function () {
    sock.message().action('say').content('hello').deliver();
  });
  sock.on('say', function (msg) {
    console.log(msg.content());
  });
</script> 
```

此示例演示构建消息并将其传递到服务器。默认情况下，消息将循环回发送者。“发件人”是一个*演员*，默认情况下，发件人会向自己发送消息。您可以自定义演员和目标。例如，您想向所有人发送消息。

在服务器上，您可以添加它以强制您的所有消息发送给每个人。

```
sock.in(function (msg, sock, next) {
  msg.target('everyone').deliver();
}); 
```

或者在客户端。

```
sock.message().target('everyone').action('say').content('hello').deliver(); 
```

还有一个速记。

```
sock.message({target:'everyone', action:'say', content:'hello'}).deliver(); 
```

您还可以更改演员的分配方式，默认情况下它是`socket.id`.

```
bus.actor(function (sock, cb) {
  //so if you had a session you could get the user name from the session
  cb(null, sock.handshake.session.user);
}); 
```

消息通过总线自动从客户端传播到其他客户端。总线建立在 redis 和 socket.io 之上。

如果您有任何问题或需要帮助，请联系我们的[http://turbonetix.io](http://turbonetix.io)或 github 上的项目[https://github.com/turbonetix/bus.io.git](https://github.com/turbonetix/bus.io.git)

# ruby-on-rails - RoR：嵌套表单和动态字段

> ID：13204661
> 
> 赞同：0
> 
> 时间：2012-11-03T00:00:11.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, simple-form

我正在努力处理一些动态插入字段的嵌套表单。我的代码基于 Ryan Bates 很棒的 railscasts。不过我的问题是我需要将“添加字段”按钮移到嵌套表单之外。这会导致问题，因为我无权访问生成表单所需的某些对象。

在下面的代码中，添加/删除按钮位于同一位置。我可以更改 if 语句来执行此操作，但我无法将添加字段按钮移到 f.simple_fields_for :fund_levels 循环之外。

对于这样做的干净方式有什么建议吗？

风景

```
 = f.simple_fields_for :fund_levels do |fl|
       - fl.object.id ? headerappend = fl.object.id : headerappend = "#{i}-notset"
       %div{id: "flheader-#{headerappend}"}
         %div
           = link_to "Sponsor levels", "#", :class => "show_hide", :id => "initiator1_fl#{i}", :style=>"margin-bottom:2px;", :onclick=>"return false"
         %div{:class => "slidingDiv #{fund_levels_last?(i, @fund_level_count) ? "shown": "hidd" } whitebg leftadj", :id=>"body_fl#{i}", :style=>"width:100%;" }

           = render :partial => 'fund_level_fields', :locals => {:fl => fl, :ad => ad, :i => i, :f => f}
           %div{:style => "float: right; padding: 20px 20px 20px 0"}
             = fund_levels_last?(i, @fund_level_count) ? ( link_to_add_fields "add new level", f, :fund_levels, fl, i+1, ad ) : ( link_to "remove", accounts_ad_fund_level_path(ad, fl.object.id), {:class => 'button orange sm', :method => :delete, :remote => true, :confirm => t('q.are_you_sure')} )
       - i += 1
     %div#newfields
       - # THE BUTTON SHOULD GO HERE if it is an ADD FIELDS (remove btn should stay above) 
```

application_helper 文件

```
 def link_to_add_fields(name, f, association, sublevel, counter, parent)

     new_object = f.object.class.reflect_on_association(association).klass.new
     fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
       render(association.to_s.singularize + "_fields", :f => builder, :fl => sublevel, :i => counter, :ad => parent) #fl, i, ad
     end

     # this bit is required because of some bugs in haml
     fields.gsub!(/\<haml\:newline\/\>/, '').html_safe

     link_to name, '#', :id => "#{name}|-|#{association}|-|#{fields}", :class => "addfields", :onclick => "return false"
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:13:16.613

通过将最后一个循环对象存储到一个变量并在循环外使用它来解决。

> (...) -thisvar = fl
> 
> -link_to_add_fields "添加新级别", f, :fund_levels, thisvar, i+1, ad

# java - 令牌上的语法错误，“类”，无效类型

> ID：13204662
> 
> 赞同：1
> 
> 时间：2012-11-03T00:00:32.937
> 
> 标签：java, class, syntax

带星号的部分是它显示的错误。谁能向我解释为什么会这样？一开始我已经有一个公共课。如果我去掉括号“()”，后面的代码都会显示错误。谢谢！

```
 public class ButtonTester {

/**
 * @param args
 */
public static void main(String[] args) {
// TODO Auto-generated method stub
            new adasdad();
}

//Setting up variables
private static final int FRAME_WIDTH = 500;
private static final int FRAME_HEIGHT = 600;

private   JButton button = new JButton ("A");
private   JButton button2 = new JButton ("B");

 **class ExP12_4 () {**
    //Creating a frame
    //Creating a panel
    ...

    ...

    //Display frame
    ...

          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:04:42.687

您必须删除括号并为该类创建一个构造函数：

```
class ExP12_4 {
    private JFrame frame;
    private JPanel panel;

    private JButton button;
    private JButton button2;

    public ExP12_4 (){
        button = new JButton ("A");
        button2 = new JButton ("B");

        frame = new JFrame ();
        panel = new JPanel ();

        panel.add(button);
        panel.add(button2);
        frame.add(panel); 

        ...
    }
} 
```

查看本[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classes.html)以获取有关 Java 类的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:06:10.133

类定义中不允许使用括号。这些属于构造函数。您还需要将语句放在代码块中，例如构造函数或`init`方法：

```
public class ExP12_4 {

    private static final int FRAME_WIDTH = 400;
    private static final int FRAME_HEIGHT = 300;
    private JButton button;
    private JButton button2;

    public ExP12_4() {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();

        panel.add(button);
        panel.add(button2);
        frame.add(panel);

        // etc.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-28T15:36:16.170

它应该`["a"]`代替`("a")`.

# c# - 使用 JSON.NET 解析嵌套的 JSON 对象

> ID：13204663
> 
> 赞同：12
> 
> 时间：2012-11-03T00:00:43.417
> 
> 标签：c#, json, json.net, deserialization

我的 JSON 提要有这样的嵌套对象：

```
{
"id": 1765116,
"name": "StrozeR",
"birth": "2009-08-12",
"avatar": "http:\/\/static.erepublik.com\/uploads\/avatars\/Citizens\/2009\/08\/12\/f19db99e9baddad73981d214a6e576ef_100x100.jpg",
"online": true,
"alive": true,
"ban": null,
"level": 61,
"experience": 183920,
"strength": 25779.42,
"rank": {
    "points": 133687587,
    "level": 63,
    "image": "http:\/\/www.erepublik.com\/images\/modules\/ranks\/god_of_war_1.png",
    "name": "God of War*"
},
"elite_citizen": false,
"national_rank": 6,
"residence": {
    "country": {
        "id": 81,
        "name": "Republic of China (Taiwan)",
        "code": "TW"
    },
    "region": {
        "id": 484,
        "name": "Hokkaido"
    }
}
} 
```

我的对象类是这样的：

```
class Citizen
{
    public class Rank
    {
        public int points { get; set; }
        public int level { get; set; }
        public string image { get; set; }
        public string name { get; set; }
    }
    public class RootObject
    {
        public int id { get; set; }
        public string name { get; set; }
        public string avatar { get; set; }
        public bool online { get; set; }
        public bool alive { get; set; }
        public string ban { get; set; }
        public string birth { get; set; }
        public int level { get; set; }
        public int experience { get; set; }
        public double strength { get; set; }
        public List<Rank> rank { get; set; }

    }
} 
```

我尝试使用以下代码解析我的 JSON 数据

```
private async void getJSON()
{
    var http = new HttpClient();
    http.MaxResponseContentBufferSize = Int32.MaxValue;
    var response = await http.GetStringAsync(uri);

    var rootObject = JsonConvert.DeserializeObject<Citizen.RootObject>(response);
    uriTB.Text = rootObject.name;
    responseDebug.Text = response;
} 
```

但我收到以下错误：

```
Cannot deserialize the current JSON object (e.g. {"name":"value"}) into type 'System.Collections.Generic.List`1[Erepublik.Citizen+Rank]' because the type requires a JSON array (e.g. [1,2,3]) to deserialize correctly. 
```

我什至无法解析主对象中的值。有任何解决这个问题的方法吗？以及如何解析嵌套对象内的值？例如：“rank”中的“points”

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-03T00:27:34.300

就像错误消息说的那样，您`rank`在 .NET 类中的属性是 a `List<Rank>`，但在您的 JSON 中，它只是一个嵌套对象，而不是数组。将其更改为 a`Rank`而不是 a `List<Rank>`。

JSON（或任何 Javascript，实际上）中的数组包含在`[]`. `{}`字符指定单个对象。CLR 类型必须与 JSON 类型大致匹配才能反序列化。对象到对象，数组到数组。

# shell - 将所有变量转换为小写shell

> ID：13204669
> 
> 赞同：1
> 
> 时间：2012-11-03T00:01:18.957
> 
> 标签：shell

我的脚本中有这个小片段：

```
 scriptVars="ProjectEnvironment ProjectType Project SubProject sshUser"
    for scriptVar in $scriptVars
    do
        # Transform all uppercase letters into lowercase
        $scriptVar=${!scriptVar,,}
    done
    echo $ProjectEnvironment 
```

我试图在变量上只强制使用小写字符。唉，它不允许我执行此操作 - 它错误地认为它不是命令。我的猜测是因为我在一个循环中，它有点像一个局部变量，只在循环内。

反正有没有设置它，所以它会工作？

这可能很明显，但值得一提的是，变量是由用户提示的。

## 编辑 3.11.12

我最终使用了这个，通过使用@chepner 回答：

```
 scriptVars="ProjectEnvironment ProjectType Project SubProject sshUser"
    for scriptVar in $scriptVars
    do
        [[ -n `echo ${!scriptVar} | tr -d "[:lower:][:digit:]-"` ]] &&
        declare "$scriptVar=${!scriptVar,,}"
    done
    echo $ProjectEnvironment 
```

变量中只允许使用字母数字和破折号（我之前对此进行了完整性检查），因此只有当变量具有大写字母时，它才会重新声明它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:34:51.580

间接法只适用于赋值的右侧，而不是左侧。您还必须使用`declare`关键字。

```
scriptVars="ProjectEnvironment ProjectType Project SubProject sshUser"
for scriptVar in $scriptVars
do
    # Transform all uppercase letters into lowercase
    declare "$scriptVar=${!scriptVar,,}"
done
echo $ProjectEnvironment 
```

另一种方法是使用适当的数组，因为您可以一次对所有元素应用扩展而无需显式循环。

```
values=( "$ProjectEnvironment" "$ProjectType" "$Project" "$SubProject" "$sshUser" )
values=( "${values[@],,}" )
ProjectEnvironment=${values[0]}
ProjectType=${values[1]}
# etc. 
```

# c# - 隐藏复制窗口后台工作者

> ID：13204671
> 
> 赞同：1
> 
> 时间：2012-11-03T00:01:40.360
> 
> 标签：c#, backgroundworker

我改编了[这篇文章](http://www.codeproject.com/Articles/12064/Compress-Zip-files-with-Windows-Shell-API-and-C)中的代码来制作一个压缩和复制目录的程序。我在我的代码中包含了一个后台工作程序，因此我可以异步运行压缩例程以防止界面冻结。这是我改编的代码：

```
private void StartZipping()
{
    var zipWorker = new BackgroundWorker { WorkerReportsProgress = true };

    zipWorker.DoWork += ZipWorkerWork;
    zipWorker.RunWorkerCompleted += ZipWorkerCompleted;

    zipWorker.RunWorkerAsync();
}

private void ZipWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    WriteLogEntry("Zip Worker Finished");
    var sleep = new Timer();
    sleep.Tick += SleepTick;
    sleep.Interval = DEBUG ? SecondsToMilliseconds(45) : MinutesToMilliseconds(15);
    sleep.Start();
}

private void ZipWorkerWork(object sender, DoWorkEventArgs e)
{
    WriteLogEntry("Zip Worker Started");
    var checkedItems = GetCheckedItems();
    if (checkedItems.Count() <= 0) return;

    foreach (var p in checkedItems)
        ZipFiles(((BackupProgram)p.Tag));
}

private static void ZipFiles(BackupProgram program)
{
    var zipPath = string.Format("{0}{1}.ZIP", TempZipDirectory, program.Name.ToUpper());
    WriteLogEntry(string.Format("Zipping files from '{0}' to '{1}'...", program.Path, zipPath));
    try
    {
        var emptyzip = new byte[] { 80, 75, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

        if (File.Exists(zipPath)) File.Delete(zipPath);

        var fs = File.Create(zipPath);
        fs.Write(emptyzip, 0, emptyzip.Length);
        fs.Flush();
        fs.Close();
        //fs = null;

        //Copy a folder and its contents into the newly created zip file
        var sc = new Shell32.ShellClass();
        var srcFlder = sc.NameSpace(program.Path);
        var destFlder = sc.NameSpace(zipPath);
        var items = srcFlder.Items();
        destFlder.CopyHere(items, 20);
        //sc = null;

        System.Threading.Thread.Sleep(1000);
        ZippedPrograms.Add(zipPath);
        WriteLogEntry("Zip Succeeded");
    }
    catch (Exception ex)
    {
        WriteLogEntry(string.Format("Zipping Failed: {0} >> {1}", ex.Message, ex.InnerException.Message));
        MessageBox.Show(ex.InnerException.Message, ex.Message);
    }
}

internal class BackupProgram
{
    public string Name { get; set; }
    public string Path { get; set; }

    public BackupProgram(string name, string path)
    {
        Name = name;
        Path = path;
    }
} 
```

显然，就目前而言，所有压缩窗口都会在命中此代码时显示。我试图模仿示例程序（隐藏窗口），但只取得了微不足道的成功。窗户被隐藏了，但拉链只完成了部分。这是修改后的代码，其行为与文章的几乎相同：

```
private static void ZipFiles(BackupProgram program)
{
    try
    {
        var zipPath = string.Format("{0}{1}.ZIP", TempZipDirectory, program.Name.ToUpper());

        var i = new ProcessStartInfo(AppDomain.CurrentDomain.BaseDirectory + "zip.exe");
        i.Arguments = string.Format("\"{0}\" \"{1}\"", program.Path, zipPath);
        //i.CreateNoWindow = false;
        //i.WindowStyle = ProcessWindowStyle.Normal;
        i.CreateNoWindow = true;
        i.WindowStyle = ProcessWindowStyle.Hidden;

        if (File.Exists(zipPath))
        {
            WriteLogEntry(string.Format("'{0}' exists, deleting...",zipPath));
            File.Delete(zipPath);
        }

        var process = Process.Start(i);
        WriteLogEntry(string.Format("Zipping files from '{0}' to '{1}'...", program.Path, zipPath));

        process.WaitForExit();
        ZippedPrograms.Add(zipPath);
        WriteLogEntry("Zip Succeeded");
    }
    catch (Exception ex)
    {
        WriteLogEntry(string.Format("Zipping Failed: {0} >> {1}", ex.Message, ex.InnerException.Message));
        MessageBox.Show(ex.InnerException.Message, ex.Message);
    }
} 
```

我想知道的是：有没有办法使用我原来的改编代码，但隐藏进度窗口？

谢谢！

## 编辑

以下是示例解决方案的代码（可从文章顶部的链接下载），即 zip.exe：

```
using System;
using System.IO;

namespace zip
{
    /// <summary>
    /// Summary description for Class1.
    /// </summary>
    class Class1
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main(string[] args)
        {

            //Create an empty zip file
            byte[] emptyzip = new byte[] { 80, 75, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

            FileStream fs = File.Create(args[1]);
            fs.Write(emptyzip, 0, emptyzip.Length);
            fs.Flush();
            fs.Close();
            fs = null;

            //Copy a folder and its contents into the newly created zip file
            Shell32.ShellClass sc = new Shell32.ShellClass();
            Shell32.Folder SrcFlder = sc.NameSpace(args[0]);
            Shell32.Folder DestFlder = sc.NameSpace(args[1]);
            Shell32.FolderItems items = SrcFlder.Items();
            DestFlder.CopyHere(items, 20);

            //Ziping a file using the Windows Shell API creates another thread where the zipping is executed.
            //This means that it is possible that this console app would end before the zipping thread 
            //starts to execute which would cause the zip to never occur and you will end up with just
            //an empty zip file. So wait a second and give the zipping thread time to get started
            System.Threading.Thread.Sleep(1000);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:52:53.653

这个链接提供了一个很好的例子来完成同样的事情： http: [//geraldgibson.net/dnn/Home/CZipFileCompression/tabid/148/Default.aspx](http://geraldgibson.net/dnn/Home/CZipFileCompression/tabid/148/Default.aspx)

您必须向下滚动链接页面才能看到答案。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T20:16:40.373

如果您想在没有窗口、进度或其他 UI 显示的情况下进行压缩，并且想在后台运行它，隐藏...那么为什么不使用 dotnetzip 之类的 zip 库，只需分离一个调用必要逻辑的线程来执行您的zip 操作工作流程。

[http://dotnetzip.codeplex.com](http://dotnetzip.codeplex.com) http://dotnetzip.codeplex.com/wikipage?title=CS-Examples

# r - R中的内存使用/分配

> ID：13204672
> 
> 赞同：1
> 
> 时间：2012-11-03T00:01:52.760
> 
> 标签：r, memory

我正在运行 R 来处理一个大小约为 1Gb 的文件，将其过滤成几个较小的文件，然后尝试将它们打印出来。在整个过程中，我在不同的地方遇到了这样的错误：

```
**Error: cannot allocate vector of size 79.4 Mb** 
```

这种大小的向量应该不是问题，我/应该/使用多少内存。我的机器有 24Gb 的内存，其中绝大多数仍然是免费的，即使其中包含这些大对象的 R 环境已启动并运行，并且我看到了上面的错误。

```
free -m
             total       used       free     shared    buffers     cached
Mem:         24213       2134      22079          0         55        965
-/+ buffers/cache:       1113      23100
Swap:        32705          0      32705 
```

这是 R 对 gc() 的回应：

```
corner      used   (Mb) gc trigger   (Mb)  max used   (Mb)
Ncells    673097   18.0    1073225   28.7    956062   25.6
Vcells 182223974 1390.3  195242849 1489.6 182848399 1395.1 
```

我在 Ubuntu 12.04.1 LTS 中工作

以下是我正在使用的机器的一些规格：

```
i7-3930K 3.20 GHz Hexa-core (6 Core)12MB Cache
ASUS P9X79 s2011 DDR3-1333MHZ,1600 upto 64GB
32GB DDR3 ( 8x4GB Module )
128GB SSD drive
Asus nVidia 2GB GTX660 TI-DC2O-2GD5 GeForce GTX 660 Ti i 
```

这是我试图写入文件的对象：

```
dim(plant)
[1] 10409404       13 
```

“植物”对象属于“data.frame”类。这是提示错误的代码行之一：

```
write.table(plant, "file.txt", quote=F, sep="\t", row.names=T, col.names=F) 
```

任何有关解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T14:38:35.807

尝试使用 memory.limit() 函数！

```
-
memory.limit(2000)
- 
```

# mysql - mysql空行

> ID：13204673
> 
> 赞同：1
> 
> 时间：2012-11-03T00:01:54.997
> 
> 标签：mysql

我创建了一个简单的 MYSQL 数据库来存储用户信息（id、FirstName、LastName）并用 3 个名称填充它：

```
id | FirstName | LastName
1  | Sam       | Heyman
2  | Ben       | Eliott
3  | Al        | Readman 
```

当我尝试在页面上的表格中显示数据库的内容时，我得到了正确的行数，但单元格是无效的。

```
User id | First Name | Last Name
        |            |
        |            |
        |            | 
```

如果我做

```
var_dump($rows) 
```

我得到以下信息：

```
array(6) { [0]=> string(1) "1" ["id"]=> string(1) "1" [1]=> string(3) "Sam" ["FirstName"]=> string(3) "Sam" [2]=> string(6) "Heyman" ["LastName"]=> string(6) "Heyman" }

array(6) { [0]=> string(1) "2" ["id"]=> string(1) "2" [1]=> string(3) "Ben" ["FirstName"]=> string(3) "Ben" [2]=> string(6) "Eliott" ["LastName"]=> string(6) "Eliott" }

array(6) { [0]=> string(1) "3" ["id"]=> string(1) "3" [1]=> string(8) "Alastair" ["FirstName"]=> string(8) "Alastair" [2]=> string(7) "Readman" ["LastName"]=> string(7) "Readman" } 
```

那么为什么我的单元格是空的呢？我之前做过很多数据库，从来没有遇到过这个问题。在google上看了3个小时，我放弃了。

这是代码：

```
<?php 
// Connect to server and select database.
$dbcnx = @mysql_connect('server','user','pw');
mysql_query('SET NAMES utf8;');
mysql_select_db('db', $dbcnx);
// Fetch all the users from the database
$users = @mysql_query('SELECT * FROM registered_users');
?>

<table width="400" border="1" cellspacing="0" cellpadding="3" style="color:red;">
<tr>
<th>User ID</th>
<th>First name</th>
<th>Last name</th>
</tr>   

<?php
// Start looping through the rows in mysql database.
while($rows=mysql_fetch_array($users)){
var_dump($rows);
echo"<br />";
?>

<tr>
<td><? echo $rows['id']; ?></td>
<td><? echo $rows['FirstName']; ?></td>
<td><? echo $rows['LastName']; ?></td>
</tr>

<?php
// close while loop
}
?>

</table>

<?php
// close MySQL connection
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:20:26.133

改变

```
<td><? echo $rows['id']; ?></td>
<td><? echo $rows['FirstName']; ?></td>
<td><? echo $rows['LastName']; ?></td> 
```

要么

```
<td><?php echo $rows['id']; ?></td>
<td><?php echo $rows['FirstName']; ?></td>
<td><?php echo $rows['LastName']; ?></td> 
```

或者

```
<td><?= $rows['id']; ?></td>
<td><?= $rows['FirstName']; ?></td>
<td><?= $rows['LastName']; ?></td> 
```

# php - PHP：无法删除使用 fopen() 创建的文件？

> ID：13204680
> 
> 赞同：0
> 
> 时间：2012-11-03T00:02:29.093
> 
> 标签：php, unix

当我使用`fopen('filename.php', 'w+')`该文件创建文件时，该文件已成功创建，但以后我无法删除该文件，无论我尝试使用 PHP 还是 FTP 删除它。

注意：创建的文件的所有者\组是'99'（没有人）。

# python - IbPy：如何将 API 响应提取到变量中

> ID：13204686
> 
> 赞同：9
> 
> 时间：2012-11-03T00:02:56.577
> 
> 标签：python

我正在研究 IbPy 是否可以成为我连接到盈透证券交易 API 的好方法。作为测试，我现在正在尝试收集一些股票价格快照，看看我是否可以让 IbPy 为我工作。我正在使用 Brokertron 网关连接 IB。

我从 IB API 得到请求的股票价格就好了（从我发现的一些带有错误处理的示例代码，见下文），所以从技术上讲它适用于 IB API，但我不知道如何提取将特定字段（field=4，price=175.95 下面）转换成一个变量供以后使用。

任何想法如何将字段 4 内容转换为变量？谢谢！

Python 示例脚本：

```
import ib
from ib.ext.Contract import Contract
from ib.opt import ibConnection, message
from time import sleep

class Downloader(object):
    def __init__(self,debug=False):
        self.tws = ibConnection('localhost', 4001, 0)

        if debug:
            self.tws.registerAll(self.debugHandler)

        self.tws.connect()
        self._reqId = 1 # current request id

    def debugHandler(self,msg):
        print '[debug]', msg

    def requestData(self,contract):
        self.tws.reqMktData(self._reqId,c,'',1)
        self._reqId+=1
        return "???"

if __name__=='__main__':
    dl = Downloader(debug=True)
    c = Contract()
    c.m_symbol = 'SPY'
    c.m_secType = 'STK'
    c.m_exchange = 'SMART'
    c.m_currency = 'USD'
    laststockpricefield4 = dl.requestData(c)
    print laststockpricefield4
    sleep(3)
    print 'Done.' 
```

命令行输出：

```
01-Nov-12 22:30:43 DEBUG Server Version: 65
01-Nov-12 22:30:43 DEBUG TWS Time at connection: 20121101 22:30:43 GMT
???
[debug] ManagedAccounts accountsList=DU15144>
[debug] NextValidId orderId=1>
[debug] TickString tickerId=1, tickType=45, value=1351808899>
[debug] TickPrice tickerId=1, field=4, price=175.95, canAutoExecute=0>
[debug] TickSize tickerId=1, field=5, size=1>
[debug] TickGeneric tickerId=1, tickType=49, value=0.0>
[debug] TickPrice tickerId=1, field=1, price=176.03, canAutoExecute=1>
[debug] TickSize tickerId=1, field=0, size=378>
[debug] TickPrice tickerId=1, field=2, price=176.05, canAutoExecute=1>
[debug] TickSize tickerId=1, field=3, size=344 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T21:35:32.530

这行得通！

```
import re
import ib
from ib.ext.Contract import Contract
from ib.opt import ibConnection, message
from time import sleep

class Downloader(object):
    field4price = ''

    def __init__(self):
        self.tws = ibConnection('localhost', 4001, 0)
        self.tws.register(self.tickPriceHandler, 'TickPrice')
        self.tws.connect()
        self._reqId = 1 # current request id

    def tickPriceHandler(self,msg):
        if msg.field == 4:
            self.field4price = msg.price
            #print '[debug]', msg

    def requestData(self,contract): 
        self.tws.reqMktData(self._reqId, contract, '', 1)
        self._reqId+=1

if __name__=='__main__':
    dl = Downloader()
    c = Contract()
    c.m_symbol = 'SPY'
    c.m_secType = 'STK'
    c.m_exchange = 'SMART'
    c.m_currency = 'USD'
    dl.requestData(c)
    sleep(3)
    print 'Price - field 4: ', dl.field4price 
```

# python - appengine python 后端

> ID：13204689
> 
> 赞同：1
> 
> 时间：2012-11-03T00:03:33.887
> 
> 标签：python, google-app-engine, backend

我正在尝试使用动态后端（python）在 Appengine 上运行一些代码，但我发现[Appengine 动态后端文档](https://developers.google.com/appengine/docs/python/backends/overview#Startup)不足。有没有人有任何关于如何做到这一点的示例代码？

我已经像这样配置了我的 backends.yaml

```
backends: 
- name: fileupload-backend
  options: dynamic
  start: backend_handler.py 
```

而且我知道动态后端在 Appengine 向 /_ah/start 发送启动请求时运行，然后在收到来自应用程序的请求时运行，并在没有收到来自应用程序的进一步请求时停止。但是如何在我的 backends_handler.py 中编写代码以提示 appengine 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:19:37.747

您稍微误解了`start`选项的意义。这是 AppEngine 命中时自动调用的脚本`/_ah/start`- 它不负责调用它，它负责响应该调用。大多数时候你不需要这个：它真的是为了你的后端需要在启动时设置特定的东西。事实上，完全不处理`/_ah/start`呼叫是完全可以的，让它以 404 响应——这足以触发后端启动。

如果您对如何在后端实际运行代码感到困惑，最好的办法是使用`target`参数配置一个任务队列以在该后端运行，然后让您的前端代码触发该队列上的任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T13:36:07.600

有关如何使用 Google App Engine 后端的一个很好的示例，您可以查看[Google App Engine 教程 - 代码实验室练习 8：队列和后端](http://googcloudlabs.appspot.com/codelabexercise8.html)。

本教程提供了一个有关如何使用任务队列和后端的示例。

希望这可以帮助！

# mysql - 合并或分离表格

> ID：13204690
> 
> 赞同：1
> 
> 时间：2012-11-03T00:03:39.817
> 
> 标签：mysql, sql, database, schema, normalization

我对是否应该合并两张表或将它们分开感到困惑。ff 只是我的一个问题：

```
tblPhone(Phone_ID, Phone_Number, Phone_Type_ID, Person_ID)
tblPhone(Phone_Type_ID, Phone_Type_Name) 
```

或者

我应该简单地把它当作：

```
tblPhone(Phone_ID, Phone_Number, Phone_Type_Name, Person_ID) 
```

**一个比另一个有优势吗？**是否有创建表的**标准指南或实践？**例如，我记得有人告诉我，如果一张桌子不是 3 或更多，只需将它与另一张桌子合并，类似这样的......这是真的吗？我记得一些规范化规则......但有时可能会非常混乱。我认为这属于第三个规范化规则，这就是为什么它们应该分开，我弄错了吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:09:03.407

你是对的，这说明了第三范式。

您正在规范`Phone_Type_Name`out of `tblPhone`（我们假设您的意思是调用 second `tblPhoneType`）。这是正确的，也是常见的做法。即使您现在只有两列`tblPhoneType`，最终您可能需要扩展它以包含与电话类型相关的其他属性，这是说明为什么应该对其进行规范化的最简单方法。

### 可能的未来情景（需要更多列）：

通过现在对其进行规范化，您可以保护自己免受以下情况的影响：

```
tblPhone(Phone_Type_ID, Phone_Type_Name, Phone_Type_Min_Price, Phone_Type_Max_Price) 
```

# zend-framework - 在 SocialEngine 中访问 _users 表？

> ID：13204691
> 
> 赞同：2
> 
> 时间：2012-11-03T00:03:40.567
> 
> 标签：zend-framework, social, socialengine

我在访问 SocialEngine 中的 _users 表时遇到了一个（简单的？）问题。要访问 SE4 中的表，我使用以下命令：

```
$table = Engine_Api::_()->getDbTable(tablename,tablegroup); 
```

这适用于 _user_online （*->getDbTable('online','user')*）等，但我不知道如何访问 _users 表（没有表组前缀）。

我试过：

*   ->getDbTable('用户')
*   ->getDbTable('','用户')
*   ->getDbTable(null,'用户')
*   ->getDbTable('foo','what_a')

没门。

有什么帮助吗？：/

泰！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T02:40:24.083

`Engine_Api::_()->getItemTable('user');`

我建议您阅读 SocialEngine 工厂代码以找出此类问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:01:35.210

你少了逗号

试试这个

$table = Engine_Api::_()->getDbTable('users','user');

它会给你用户表对象。希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T07:40:30.147

You can use below 2 methods to get the "engine4_users" table object:

1) $userTable = Engine_Api::_()->getItemTable('user);

2) $userTable = Engine_Api::_()->getDbTable('users', 'user');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:31:11.397

试试这个。

```
$query=Engine_Db_Table::getDefaultAdapter()->select()
              ->from('engine4_yourtablename')
              ->where("your_field_name = ?", $variable)->limit(1);

              $query= $query->query()->fetch(); 
```

希望这会有所帮助。

# c# - 成功登录后的ajax重定向

> ID：13204696
> 
> 赞同：1
> 
> 时间：2012-11-03T00:05:29.333
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-ajax

我一直在互联网上试图弄清楚这一点。我正在尝试添加一个 jquery 对话窗口，该窗口将调用一个操作来登录用户，然后在成功登录后将用户重定向到他们的个人资料页面，否则保持对话窗口打开并用适当的错误消息提示用户。到目前为止，登录部分似乎可以工作，但是当操作返回时，它会使用户保持在同一页面上。我需要进行哪些更改才能确定成功登录并正确重定向？这是我的代码：

```
"Javascript code"
$.validator.unobtrusive.parse('#LogOnForm');
$('#LogOnDialog').dialog({
    autoOpen: false, width: 450, height: 300, modal: true,
     buttons: {
        'Log On': function () {
            if ($('#LogOnForm').validate().form()){
                $.ajax({
                    url: '@Url.Action("LogOnPartial", "Account")',
                        type: 'POST',
                        data: $('form').serialize(),
                        datatype: 'json',
                        success: function (result) {
                            $('#LogOnDialog').html(result).dialog('open');
                        }
                    });
                }
            },
            Cancel: function () { 
                $(this).dialog('close'); 
            }
        }
    });

    $('#linkSignIn').live('click', function () {
        $('#LogOnDialog').html('')
        .dialog('option', 'title', 'Sign In')
        .load('@Url.Action("LogOnPartial", "Account")', function () { $('#LogOnDialog').dialog('open'); });
    });

    "Controller Action"
    [HttpPost]
    public ActionResult LogOnPartial(LogOnModel model)
    {
        if (ModelState.IsValid)
        {
            UserPrincipal principal = new UserPrincipal(model.EmailAddress, model.Password);
            HttpContext.User = principal;
            FormsAuthentication.SetAuthCookie(model.EmailAddress, true);
            return PartialView("LogOnPartial", model);
        }

        return PartialView("LogOnPartial", model);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T01:09:50.800

我不确定你想如何实现这一点，但在你的结果中你很可能想要返回你想要登录的配置文件的用户的 ID。

```
 success: function (result) {
                           if(result=='')/// no result show the dialog again 
                            {
                             $('#LogOnDialog').html(result).dialog('open');
                            }
                            else // redirect to profile page 
                            {
                                 window.location = 'profile/'+result;   
                            }
                    }
                }); 
```

你的行为可能是这样的

```
 public ActionResult ProvinceFilter(LogOnModel model)
    {
      string result=="";    
      UserPrincipal principal = new UserPrincipal(model.EmailAddress, model.Password); //in order to retorn exact error you must modify the principle to check if the user is valid or not and return specific error
     if(principal==null) //or not valid 
      {
         result="Your Username or Password is not correct";
      }
      else
       {
        HttpContext.User = principal;
        FormsAuthentication.SetAuthCookie(model.EmailAddress, true);
        result=principal.UserID.ToString();
       }
        return Json(result);
    } 
```

# extjs - ExtJS4 太优雅了... 需要帮助 ie8 组件渲染

> ID：13204698
> 
> 赞同：2
> 
> 时间：2012-11-03T00:05:40.767
> 
> 标签：extjs, extjs4, sass

我正在开发一个 ExtJS4 应用程序 - 自定义报告应用程序。

ExtJS4 通过自动回退所有带有图像和表格（修改标记）的 css3 来使用可怕的优雅降级原则。正因为如此，它使已经膨胀的标记变得非常膨胀，并用默认图像改变了所有的渐变/边框。

我不确定它除了 css3 元素还有什么变化，但这里是应用程序截图。

**这是 IE8：** ![坏 - IE8](../Images/00e7082c19bc4752d3d7fc3c6a333467.png)

**这是谷歌浏览器：** ![好 - 铬](../Images/99b3cc1d38e22a9bc2929449f4f7951a.png)

...

1.  除了必须检查所有标记并撤消这些糟糕的设计决策
2.  除了必须重新创建所有图像以匹配现有设计
3.  除了必须修改核心文件以强制不支持 x-nlg、x-nbr 等的浏览器发生优雅降级**之外**。

**2012-11-23 更新**

**煎茶片：** ![坏 - IE8](../Images/faed54537c1dd91b19f08649972ac3b3.png)

**ExtJS 核心覆盖：** ![好 - IE8](../Images/c5638a2230d488f4eb4223dca2bc2123.png)

是否有任何其他方法或设置（javascript 或 sass）可以更轻松地处理所有这些兼容性问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:40:35.993

因此，在没有答案的情况下，我将提供我采用的实现。

正如您在上面看到的，这个复杂的 ExtJS 4.1 应用程序具有复杂的设计。sencha slice 工具没有任何作用（但是，如果您想保留所有 sencha 默认值并只是更改应用程序的基本颜色，可能是基本 SASS 变量，它确实可以工作？）。

另一方面，您可以看到 Ext 覆盖效果如何。一个相当稳固的过渡，看起来 95% 相同（或者正如 Chris Coyier 所说的，“嗯，足够好”）。

下面是我的实现：

```
Ext.application({
    ...
    init: function () {
        // Override CSS3BorderRadius value which caused render problems in <IE9 when false.
        Ext.supports['CSS3BorderRadius'] = true;

        // Hack-ish remove class sniffers from Ext.EventManager (which attaches modrnizer type classes onto the body)
        Ext.getBody().removeCls('x-nbr x-nlg');
    }
    ...
}); 
```

这个实现很优雅，因为：

1.  “我”将编写可以工作的跨浏览器 CSS。我不需要 sencha 用它的“更聪明”、更糟糕的 CSS 来覆盖我的 CSS。
2.  我知道旧版浏览器无法处理圆角——我不想要它们。
3.  我知道 IE 无法处理线性渐变——默认情况下我不想要图像。我想使用过滤器：程序。
4.  我不希望 Sencha 用数十个自定义图像、数十个嵌套容器和大量表格来膨胀我的标记

gg 希望这对某人有帮助

# r - 你如何在R中将double转换为整数？

> ID：13204699
> 
> 赞同：16
> 
> 时间：2012-11-03T00:05:45.790
> 
> 标签：r

我的问题是：假设您已经计算了一个给出迭代次数的算法，并且您想打印出迭代次数。但输出总是有很多小数位，如下所示：

```
64.00000000 
```

是否可以通过在 R 中进行类型转换来获得整数？你会怎么做？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-03T01:15:14.530

强制转换为整数模式存在一些问题。大概你在某种结构中有各种各样的数字。如果您正在使用矩阵，则打印例程将以相同的精度显示所有数字。如果您使用算术过程计算了此结果，则实际上可能小于 64 位显示为该值。

```
> 64.00000000-.00000099999
[1] 64
> 64.00000000-.0000099999
[1] 63.99999 
```

因此，假设您希望它所属的任何结构中的所有值都显示为整数，最安全的方法是：

```
round(64.000000, 0) 
```

...因为这可能会发生，否则。

```
> as.integer(64.00000000-.00000000009)
[1] 63 
```

另一个问题是整数的值范围远小于浮点数的范围。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-03T01:57:03.700

与其尝试将输出转换为整数，不如先找出为什么它不是整数，然后修复它。

您是否将其初始化为整数，例如`num.iterations <- 0L`，或者`num.iterations <- integer(1)`您是否错误地将其设置为`0`（数字）？

当你增加它时，你是添加`1`（一个数字）还是`1L`（一个整数）？

如果您不确定，请检查您的代码并使用该`class`函数检查变量的类型。

从根本上解决问题可以为您节省很多麻烦。它还可以使您的代码更高效，因为整数上的许多操作比数字更快（[例如](https://stackoverflow.com/questions/11623865/faster-modulo-or-equality-checking-in-r-or-good-ways-to-vectorize/11624093#11624093)）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-24T22:49:09.793

该函数`as.integer()`将数字截断为 0 阶，因此您必须添加 0.5 才能获得适当的近似值

```
dd<-64.00000000
as.integer(dd+0.5) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-18T20:22:28.537

如果您有一个希望强制转换为整数矩阵的数字矩阵（例如，您正在从一个因子创建一组虚拟变量），`as.integer(matrix_object)`则会将矩阵强制转换为一个向量，这不是您想要的。相反，您可以使用`storage.mode(matrix_object) <- "integer"`矩阵形式来维护。

# jquery - Grails g：链接到调用jquery函数

> ID：13204701
> 
> 赞同：2
> 
> 时间：2012-11-03T00:05:56.087
> 
> 标签：jquery, grails, gsp

我正在尝试使用 g:link 从 Grails .gsp 页面调用 jquery 函数。这可能吗？目前，我正在使用常规按钮（调用成功`$( "#opener" )`：

```
<li><button id="opener">Export</button></li> 
```

但我希望使用以下内容：

```
<div id="dialog" title="Export">
    <p>This is a sample dialog...</p>
</div>
<li><g:link class="export">
    <g:message code="default.new.label" args="[entityName]" />
</g:link></li> 
```

这是我的功能：

```
<link rel="stylesheet"
href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<style>
    .ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset { text-align: center; float: none; }
</style>
<script>

// increase the default animation speed to exaggerate the effect
$.fx.speeds._default = 1000;
$(function() {
    $( "#dialog" ).dialog({
        resizable: false,
        autoOpen: false,
        show: "blind",
        hide: "explode",
        buttons: {
            "OK!": function() {
                $( this ).dialog( "close" );
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });

    $( "#opener" ).click(function() {
        $( "#dialog" ).dialog( "open" );
        return false;
    });
});
</script> 
```

我将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-01T14:03:28.583

在 Grails 2.5 中，您可以这样做：

```
<g:link onclick="alert('hello world')"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:21:57.153

上次我需要这样做（Grails 1.3）时，我最终只使用了标准的 HTML`<a></a>`链接和`onclick`. 例如：

```
<a href="#" class="export" onclick="some_function();"><g:message code="default.new.label" args="[entityName]" /></a> 
```

现在可能有一种方法可以使用 2.1.x 的 Grails taglib 来做到这一点，但如果我不知道的话。

# prolog - 序言：简单的家庭关系

> ID：13204704
> 
> 赞同：0
> 
> 时间：2012-11-03T00:06:08.897
> 
> 标签：prolog, logic, family-tree

我正在学习 Prolog，我想要的是对一个简单的家庭成员进行简单的“计算”（我不知道它在 Prolog 中是如何调用的）。

例如我有：

```
 1)father of steve is petter
 2)brother steve is john
 3)A person is a son to a Father when the brother of the person has  as father the Father 
```

（当它不在我的脑海里时，它看起来很有趣并且完全不合逻辑:)）

```
father(steve,petter).
brother(john,steve).
father(X,Y):-brother(X,Z),father(Z,Y)). 
```

我的问题是约翰的父亲是谁（正确的遮阳篷应该是皮特）

```
?-father(john,X). 
```

但它总是给我虚假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:17:21.230

**解决了：**

```
father(steve,petter).
brother(john,steve).
whoisfather(X,Y):-brother(X,Z),father(Z,Y).
?- whoisfather(john,X).
X = petter. 
```

代替

```
father(steve,petter).
brother(john,steve).
father(X,Y):-brother(X,Z),father(Z,Y)).
?- father(john,X).
false. 
```

看评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:13:44.727

当你进入`father(john, X).`时，它首先试图找到一个`Z`这样的，这`brother(john, Z)`是真的。不`Z`存在这样的，所以它返回false。

请注意，除非您告诉 Prolog 它应该这样做，否则这`brother(steve, john)`并不意味着。`brother(john, steve)`

# jquery - 使用 replacewith 替换 div 元素后，colorbox 停止工作

> ID：13204709
> 
> 赞同：1
> 
> 时间：2012-11-03T00:06:35.680
> 
> 标签：jquery, colorbox, replacewith

实现替换代码后，我遇到了颜色框问题。

我有两个元素正在使用 replacewith 进行替换。单击时，这两个元素都会显示所需内容的颜色框。但是，如果我使用 replacewith 来更改这些元素的内容，它将不允许 colorbox 加载正确的 div 内容。

彩盒脚本

```
$(document).ready(function(){
$(".inline").colorbox({inline:true, width:"50%"});
}) 
```

Jquery Replacewith 脚本

```
$("div.en").click(function(){
$('div.lang').replaceWith('<div class="lang"><div class="DE">German</div></div>');
$('div.pagetitle').replaceWith('<h1 id="page-title" class="title">Online Store Coming Soon</h1>');
$('div.view-cat').replaceWith('<div class="view-cat"><a class="inline" href="#inline_catalog">See Our Products</a></div>');
$('div.splash-order').replaceWith('<div class="splash-order"><a class="inline" href="#inline_order">Order/Contact Us</a></div>');
}); 
```

我确实注意到这两个 a.class 都是内联的，但是一旦加载页面，它的“内联 cboxelement”即使使用它也不允许我加载正确的内容

我也尝试将数据添加到 replacewith 所做的更改中，但这会使元素与以前保持一致

```
$('div.splash-order').replaceWith($('<div class="splash-order"><a class="inline" href="#inline_order">Order/Contact Us</a></div>', $(data))); 
```

任何帮助都将不胜感激。谢谢

# c++ - 如何将 cout/cins 翻译成 printf/scanfs？

> ID：13204712
> 
> 赞同：3
> 
> 时间：2012-11-03T00:07:20.453
> 
> 标签：c++, io

我编写了一个简单的游戏。我知道如何使用 cout/cin，但遇到 printf/scanf 问题。下面的代码适用于 cout/cin。问题是，如何将它们转换为 printf/scanf？为什么评论中的代码不起作用？

编辑：我的意思是如果我删除 cout/cin 行，而当我使用 printf/scanf 时，它就不能正常工作。

```
#include <iostream>
#include <time.h>

using namespace std;

int main()
{
    srand(time(NULL));
    int min=0, max=1000, guess, counter=0;
    bool winner=false;
    char answer;

    while(counter<10){
        guess = rand()%(max-min)+min;
        // printf("Did you pick %d? \t", guess);
        // scanf("%c", &answer);
        cout << "Did you pick " << guess << "?\t";
        cin >> answer;
        if(answer=='y'){ // yes
            winner=true;
            // printf("Computer wins.\n");
            // printf("You picked: %d", guess);
            cout << "Computer wins." << endl;
            cout << "You picked: " << guess;
            break;
        }
        else if(answer=='m'){ // more
            min=guess;
            counter++;
        }
        else if(answer=='l'){ // less
            max=guess;
            counter++;
        }
    }
    if(winner==false){
        // printf("User wins.\n");
        cout << "User wins." << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:21:19.213

问题是 scanf() 不会从 stdin 中删除换行符 '\n' 字符，因此在下一次迭代中，下一个 scanf() 会读取它并尝试处理它，似乎忽略了输入。
试试这个：

```
scanf("\n%c", &answer); 
```

这样，您期望换行符和 scanf() 消耗它。

# php - PHP - $_SERVER["REMOTE_ADDR"] 不一致

> ID：13204713
> 
> 赞同：0
> 
> 时间：2012-11-03T00:07:38.753
> 
> 标签：php, xampp

`$_SERVER["REMOTE_ADDR"]`在同一会话期间，有时返回 10.0.0.2，有时返回 fe80::d7c:2a15:b162:81c1 之类的十六进制值。为什么会这样？我正在使用 XAMPP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:15:08.537

您似乎使用 DNS 名称来访问您的服务器。因此，您可能会获得 DNS 名称的 A 或 AAAA 记录。这意味着，一次通过 IPv4 访问，另一次通过 IPv6 访问（fe80::d7c:2a15:b162:81c1 是 IPv6 地址）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:49:38.083

如前所述，这些十六进制值是 ipv6 地址。如果取决于`$_SERVER["REMOTE_ADDR"]`

# javascript - JavaScript 游戏循环在 chrome/浏览器中追赶/模糊/重影

> ID：13204714
> 
> 赞同：1
> 
> 时间：2012-11-03T00:07:59.157
> 
> 标签：javascript, html, canvas

我一直在尝试设置一个 javascript 游戏循环，但遇到了两个问题。我发现在 chrome 中，当我失去浏览器窗口的焦点然后单击返回我正在运行的动画时，它会快速运行它应该在后台渲染的帧。我还注意到，当以我拥有的当前速度移动时，动画是模糊的，但其他人已经能够让他们的画布绘图快速移动并且看起来仍然清晰。我知道他们似乎对此有很多了解，但我无法理解我的问题到底是什么。我认为这是创建游戏循环的推荐方式。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>Frame Test</title>
    <link href="/css/bootstrap.css" media="all" rel="stylesheet" type="text/css" />
    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"
        type="text/javascript">
    </script>
    <script language="javascript" src="js/jquery.hotkeys.js" type="text/javascript"></script>
    <script language="javascript" src="js/key_status.js" type="text/javascript"></script>
    <script language="javascript" src="js/util.js" type="text/javascript"></script>
    <script language="javascript" src="js/sprite.js" type="text/javascript"></script>
</head>
<body>
    <button id="button1">
        Toggle Loop</button>
    <h1 id="frameCount">
        Game Loop Test</h1>
    <canvas id="gameCanvas" width="800" height="500">
<p>Your browser doesn't support canvas.</p>
</canvas>
    <script type='text/javascript'>

        // demo code used for playing around with javascript-canvas animations
        var frameCount = 0;
        var drawingCanvas = document.getElementById('gameCanvas');
        // Check the element is in the DOM and the browser supports canvas
        if (drawingCanvas.getContext) {
            var context = drawingCanvas.getContext('2d');
            var x = 100;
            var y = 100;
            var right = true;
            context.strokeStyle = "#000000";
            context.fillStyle = "Green";
            context.beginPath();
            context.arc(x, y, 50, 0, Math.PI * 2, true);
            context.closePath();
            context.stroke();
            context.fill();

        }

        function Timer(settings) {
            this.settings = settings;
            this.timer = null;
            this.on = false;  //Bool that represents if the timer is running or stoped
            this.fps = settings.fps || 30;  //Target frames per second value
            this.interval = Math.floor(1000 / 30);
            this.timeInit = null;  //Initial time taken when start is called

            return this;
        }

        Timer.prototype =
            {
                run: function () {
                    var $this = this;

                    this.settings.run();
                    this.timeInit += this.interval;

                    this.timer = setTimeout(
                function () { $this.run() },
                this.timeInit - (new Date).getTime()
            );
                },

                start: function () {
                    if (this.timer == null) {
                        this.timeInit = (new Date).getTime();
                        this.run();
                        this.on = true;
                    }
                },

                stop: function () {
                    clearTimeout(this.timer);
                    this.timer = null;
                    this.on = false;
                },

                toggle: function () {

                    if (this.on) { this.stop(); }
                    else { this.start(); }
                }
            }

        var timer = new Timer({
            fps: 30,
            run: function () {
                //---------------------------------------------run game code here------------------------------------------------------
                //Currently Chorme is playing a catch up game with the frames to be drawn when the user leaves the browser window and then returns
                //A simple canvas animation is drawn here to try and figure out how to solve this issue.  (Most likely related to the timer implimentation)
                //Once figured out probably the only code in this loop should be something like
                //updateGameLogic();
                //updateGameCanvas();

                frameCount++;
                if (drawingCanvas.getContext) {
                    // Initaliase a 2-dimensional drawing context

                    //Canvas commands go here
                    context.clearRect((x - 52), 48, (x + 52), 104);

                    // Create the yellow face
                    context.strokeStyle = "#000000";
                    context.fillStyle = "Green";
                    context.beginPath();
                    if (right) {
                        x = x + 6;
                        if (x > 500)
                            right = false;
                    } else {
                        x = x - 6;
                        if (x < 100)
                            right = true;
                    }
                    context.arc(x, 100, 50, 0, Math.PI * 2, true);
                    context.closePath();
                    context.stroke();
                    context.fill();
                }
                document.getElementById("frameCount").innerHTML = frameCount;
                //---------------------------------------------end of game loop--------------------------------------------------------
            }
        });
        document.getElementById("button1").onclick = function () { timer.toggle(); };
        frameCount++;
        document.getElementById("frameCount").innerHTML = frameCount;

    </script>
</body>
</html> 
```

- - - - - - -更新 - - - - - - - - - - -

我使用了 requestanimation 帧，这已经解决了帧速率问题，但是当动画运行时我仍然会得到奇怪的重影/模糊。知道我应该怎么画这个东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:05:44.573

好的，您的部分问题是，当您切换标签时，Chrome 会降低其性能。

基本上，当您离开时，Chrome 会将页面上的所有计算速度减慢到 1 或 2 fps（电池节电，并且当前选项卡的性能更高）。
以您拥有的方式使用 setTimeout 基本上是安排所有这些调用，这些调用坐下来等待用户回来（或最多仅以 1fps 运行）。

当用户回来时，你有数百个这样的堆叠调用，等待处理，因为它们***都***被提前安排好了，它们都已经过了“等待”时间，所以它们都将执行尽可能快（快进），直到堆栈被清空到您必须开始等待下一次调用的 32 毫秒。

解决此问题的方法是在有人离开时停止计时器——暂停游戏。
在一些以有意义的方式支持画布游戏的浏览器上，还支持 PageVisibility API。你应该调查一下。对于其他浏览器，它会不那么简单，但是您可以将`window`例如绑定到模糊事件。

请确保当您重新启动时，您还清除了更新的间隔。

最终，我建议转到`requestAnimationFrame，因为它会智能地处理帧速率，并且还会处理由于堆栈调用而看到的节流，但是你的计时器看起来像是一个不错的替代浏览器的浏览器还没有它。

至于模糊性，这需要更多的洞察力。
如果你在谈论图像，我脑海中浮现的原因是你的画布的宽度/高度是在 CSS 中设置的，或者你的精灵没有以 1:1 的比例使用图像他们被拉出来了。

它也可以归结为图像的亚像素定位或旋转。

希望能有所帮助。

...实际上，在再次查看您的代码后，尝试从 HTML 中的画布中删除“宽度”和“高度”，然后`canvas.width = 800; canvas.height = 500;`在 JS 中进行更改，看看是否有帮助。

# c# - 获取类的完全限定名？

> ID：13204720
> 
> 赞同：13
> 
> 时间：2012-11-03T00:09:12.600
> 
> 标签：c#, .net, asp.net-mvc-4, log4net

所有，我有一个 log4net 实现，我正在尝试使用`AdoNetAppender`，但`appender`配置的子元素之一是`connectionType`，它需要一个完全限定的类名，例如`System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089`（从文档中获取作为示例）。

但是，它不能加载那个，因为这是一个 .NET4 MVC 应用程序。有人可以告诉我如何获得该完全限定名称，以便加载类型并连接到数据库吗？我已经尝试了我能诚实想到的一切。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-03T01:35:11.230

我不确定您需要什么类型，但您可以在代码中使用它来获取类型的完全限定名称。

```
string fullyQualifiedName = typeof(MyType).AssemblyQualifiedName; 
```

# c# - 检查字符串是否包含通用列表中的值并替换它

> ID：13204721
> 
> 赞同：3
> 
> 时间：2012-11-03T00:09:31.687
> 
> 标签：c#, string, c#-4.0

我有一个带有消息的字符串，其中包含一些我想换成实际值的字段

```
var message = "Hi [CustomerName]. Its [TODAY], nice to see you were born on the [DOB]!";
var mappingCodes = new List<string> {"[CUSTOMER_NAME]","[DOB]",[TODAY]};
var customEmails = new Dictionary<string, string>();
var today = DateTime.Now;
var customers = new List<Customer>()
{
    new Customer()
        {
            FirstName = "Jo",
            LastName = "Bloggs",
            Email = "jo@bloggs.com",
            DOB = "10/12/1960"
        }
};
foreach (var customer in customers)
{
    var emailMessage = "";
    customEmails.Add(customer.Email,emailMessage);
} 
```

我正在尝试做的是遍历每个客户并将消息替换为实际代码中的任何映射代码。
例如 [Today] 将是今天并且`CustomerName`将是`Customer.FirstName + Customer.LastName`

可能有 1000 名客户，所以我需要一些强大的东西。我只是不确定如何首先检查字符串是否包含任何一个`mappingCodes`，然后用所需的值替换它们。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:37:46.173

你可以试试这样的。String.Format 相当有效。如果需要，它还允许您格式化 Date.Today。

```
var customers = new List<Customer>()
{
    new Customer()
    {
        FirstName = "Jo",
        LastName = "Bloggs",
        Email = "jo@bloggs.com",
        DOB = "10/12/1960"
    }
};
foreach (var customer in customers)
{
    var emailMessage = String.Format("Hi {0}. Its {1}, nice to see you were born on the {2}!", customer.FirstName, DateTime.Today, customer.DOB);
    customEmails.Add(customer.Email,emailMessage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:36:42.857

您可以使用[`Regex.Replace(string, MatchEvaluator)`](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)：

```
var customers = new[] {
    new {
        Name = "Fred Flintstone",
        City = "Bedrock"
    },
    new {
        Name = "George Jetson",
        City = "Orbit City"
    }
};

string template = "Hello, [NAME] from [CITY]!";
var re = new Regex(@"\[\w+\]"); // look for all "words" in square brackets

foreach (var customer in customers)
{
    Trace.WriteLine(
        re.Replace(template, m => {
            // determine the replacement string
            switch (m.Value) // m.Value is the substring that matches the RE.
            {
                // Handle getting and formatting the properties here
                case "[NAME]":
                    return customer.Name;
                case "[CITY]":
                    return customer.City;
                default:
                    // The "mapping code" is not supported, I just return the 
                    // original substring
                    return m.Value;
            }
        }));
} 
```

显然以上只是一般方法，您必须对其进行修改以支持您的映射代码和数据结构。

# rspec - 为什么“rake rspec”不会在规范中输出“puts”？

> ID：13204726
> 
> 赞同：0
> 
> 时间：2012-11-03T00:09:49.940
> 
> 标签：rspec

我正在尝试在规范中输出一些内部内容，但我无法`rake spec`从`puts`.

关于为什么会发生这种情况的任何想法？

例如`puts 'hello'`，然后`rake spec`我的终端中的任何内容都不会输出“你好”

# c# - 当输入某些数据或错误答案时，让程序完全不做任何事情

> ID：13204730
> 
> 赞同：0
> 
> 时间：2012-11-03T00:10:53.593
> 
> 标签：c#, console-application

我有一个疯狂的想法，如果将错误的数据放入控制台，我希望程序不执行任何操作。比如字母表，奇怪的字符。我想要的只是十进制数字和一个可以接受的句点。如果输入了错误的数据，我希望程序停留在那里，并且在您按 Enter 后什么也不做。

我的心态认为：

```
if (sum != decimal)
{
   // Don't do anything, just leave it as is. 
    code I have no clue about. 

} 
```

现在，您一定在想，您不能将数据类型用于 if 语句！也许你可以，但它不适合我。对不起，我是个大菜鸟。

```
try
{

    Console.WriteLine("Put in the price of the product");

    string input = Console.ReadLine();
    decimal sum = Convert.ToDecimal(input);

    if (sum <= 100)
    {
        decimal totalprice = sum * .90m;
        Console.WriteLine("Your final price is {0:0:00}", totalprice);

    }

}

catch
{

} 
```

我也在想，也许 try and catch 语句也可以，但同样，我也不知道该放什么。

如果您的答案可能是菜鸟安全和解释。（因为我想了解这些东西如何工作的概念）那会很好。

一个视觉示例：

![堆栈溢出图像](../Images/5b1f7f325901beb5fa07f731cb497ecc.png)

当你按下回车键时，什么也没有发生，但是当你输入正确的数据类型时，程序将继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:15:30.370

数据类型不会写入控制台。只能从控制台输入中检索字符串。什么类型有字符串`"2"`- 十进制、整数、字节、字符串？您所能做的就是尝试从输入字符串中解析某种类型：

```
Int32.TryParse("2", out value) 
```

对于您的情况：

```
Console.WriteLine("Put in the price of the product");
string input = Console.ReadLine();
decimal sum;
if (!Decimal.TryParse(input, out sum))
{
    Console.WriteLine("Decimal number cannot be parsed from your input.");
    return;
}

if (sum <= 100)
    Console.WriteLine("Your final price is {0:0:00}", sum * 0.90M); 
```

*更新*

*   [Decimal.TryParse](http://msdn.microsoft.com/en-us/library/9zbda557.aspx) - 将数字的字符串表示形式转换为其`Decimal`等效形式。返回值指示转换是成功还是失败。如果转换失败，它不会抛出异常。
*   [！运算符](http://msdn.microsoft.com/en-us/library/f2kd6eb2%28v=vs.80%29.aspx)- 它不是运算符。逻辑否定运算符 (!) 是一个对其操作数取反的一元运算符。当且仅当其操作数为 时，它才被定义`bool`并返回。`true``false`

因此`if (!Decimal.TryParse(input, out sum))`验证转换是否不成功。然后我为用户放置了一条*示例*消息并从方法中退出（如果它是您的`Main`方法，那么程序将终止。但这一切都超出了您关于解析字符串的最初问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T00:25:07.717

试试这个（注意 while/break 配对）：

```
while (true)
{
    string input = Console.ReadLine();
    decimal sum;

    if (Decimal.TryParse(input, out sum) == true)
    {
        if (sum <= 100)
        {
            decimal totalprice = sum * .90m;
            Console.WriteLine("Your final price is {0:0:00}", totalprice);
            break;  // break out of while
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T00:33:34.543

如果您使用的转换函数无法将传递的字符串转换为请求的类型，我相信它会引发异常。一般来说，应该避免异常来控制程序流程，并为真正的意外情况保留。相反，您应该考虑使用一种不会引发异常，而是返回一个值来指示成功或失败的方法。有了这个 ind 你可以尝试：

```
 try
    {
        Console.WriteLine("Put in the price of the product");
        decimal sum;
        // Repeat forever (we'll break the loop once the user enters acceptable data)
        while (true)
        {
            string input = Console.ReadLine();
            // Try to parse the input, if it succeeds, TryParse returns true, and we'll exit the loop to process the data.
            // Otherwise we'll loop to fetch another line of input and try again
            if (decimal.TryParse(input, out sum)) break;
        }

        if (sum <= 100)
        {
            decimal totalprice = sum * .90m;
            Console.WriteLine("Your final price is {0:0:00}", totalprice);
        }
    }
    catch
    {

    } 
```

# c# - C# ASP.NET 列表视图

> ID：13204735
> 
> 赞同：2
> 
> 时间：2012-11-03T00:11:59.640
> 
> 标签：c#, asp.net

我正在尝试创建一个包含多个产品列表的视图。下面是一个示例，说明产品列表的外观。我不确定是否应该使用表格并为每个新产品创建一个新表格或什么。我不是一个很好的 ASP.NET 开发人员，我不知道如何解决这个问题。

基本上，如果我有 10 个结果，我需要在列表中显示其中的 10 个，并且每个按钮和图像根据每个产品结果而有所不同。

数据源来自为每个产品构建并通过 foreach 运行的另一个类。对此的任何指导都会有所帮助。我只是认为我需要指出正确的方向，因为我在桌子上尝试过，但效果不佳。

![产品列表样本](../Images/c3ab4bbfd6128590bb54e4376bc618b5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:20:52.773

也许您可以尝试使用 asp.net 表，并在迭代结果后动态添加带有图像的行。在此处查看控件：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)

在这里你有一个动态添加行的例子：

[http://msdn.microsoft.com/en-us/library/7bewx260%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/7bewx260%28v=vs.100%29.aspx)

在每一行中，您可以放置​​您想要的控件...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:17:06.277

使用[网格视图](http://msdn.microsoft.com/en-us/library/aa479350.aspx)

```
 <asp:GridView runat="server" ID="myGrid" 
    OnRowCommand="MyGrid_RowCommand">
 <Columns>
    <asp:TemplateField>
    <ItemTemplate>
        <img src='<%# Eval("SmallImageUrl") %>' />
    </ItemTemplate>
    </asp:TemplateField>

    <asp:TemplateField>
    <ItemTemplate>
        <div>Title: <%# Eval("Title") %>  </div>
        <div>Weight: <%# Eval("Weight") %>  </div>
        <asp:Button runat="server" ID="GetOfferButton" CommandArgument='<%# Eval("OfferID") %>'></asp:Button>
    </ItemTemplate>
    </asp:TemplateField>
 </Columns>
 </asp:GridView> 
```

假设您有一个产品集合，例如列表或产品数据表等，并且您的集合具有这些字段

```
class Product
{
   //property Title
   //property SmallImageUrl
   //property Weight
} 
```

你可以有

```
myGrid.DataSource = <Replace with List of Products collection>;
myGrid.DataBind(); 
```

# search - Solr 在字典文件中搜索

> ID：13204736
> 
> 赞同：0
> 
> 时间：2012-11-03T00:12:01.037
> 
> 标签：search, dictionary, solr

我想知道 Solr 是否有现成的东西可以让我在字典文件（包含单词和短语）中搜索以返回包含我的搜索词的所有短语。

例如，我的字典文件可能有：

```
red car
blue bike
big bike tires 
```

当我搜索“自行车”时，我希望看到

```
blue bike
big bike tires 
```

当我搜索“大轮胎”时，我希望看到

```
big bike tires 
```

Solr 有什么可以支持这一点的吗？我正在研究 SpellCheckComponent 但它只支持前缀搜索。

基本上，我想实现 solr 搜索（令牌搜索），但要针对字典文件（同样的文件也将用于自动建议）。

任何建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T18:33:07.613

为什么不将这些短语存储在索引本身中呢？架构可以是：

```
type: suggest_phrase #other types are product or review_article
phrase: big bike tires 
```

因此，您的搜索`big tires`将是：

```
..fq=type:suggest_phrase&q=phrase:big tires 
```

# c - 组装内在做一个掩蔽的负载

> ID：13204737
> 
> 赞同：2
> 
> 时间：2012-11-03T00:12:01.747
> 
> 标签：c, assembly, sse, simd, intrinsics

```
int main()
{
    const int STRIDE=2,SIZE=8192;
    int i=0;
    double u[SIZE][STRIDE]; 
    #pragma vector aligned
    for(i=0;i<SIZE;i++)
    {
        u[i][STRIDE-1]= i;
    }
    printf("%lf\n",u[7][STRIDE-1]);
    return 0;
} 
```

编译器在这里使用 xmm 寄存器。有步幅 2 访问，我想让编译器忽略这一点并定期加载内存，然后屏蔽备用位，这样我将使用 50% 的 SIMD 寄存器。我需要可用于加载然后按位屏蔽寄存器的内在函数，然后再存储回内存

PS：我以前从未做过汇编编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:38:23.913

`0xAA`掩码值为(10101010)的掩码存储

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:00:04.197

您不能进行屏蔽加载（仅屏蔽存储）。最简单的选择是进行加载，然后自己屏蔽它（例如使用内在函数）。

一个可能更好的选择是将您的数组更改为“double u[STRIDE][SIZE];” 这样您就不需要屏蔽任何东西，也不会浪费/屏蔽一半 XMM 寄存器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:55:27.043

如果没有 AVX，半个 SIMD 寄存器无论如何只有一个 double，因此常规 64 位存储似乎没有什么问题。

如果您想使用掩码存储 (MASKMOVDQU/MASKMOVQ)，请注意它们直接写入 DRAM，就像 MOVNTPS 等非临时存储一样。这可能是也可能不是您想要的。如果数据适合缓存并且您打算很快读取它，最好不要使用它们。

某些 AMD 处理器可以使用 MOVNTSD 从 XMM 寄存器执行 64 位非临时存储；与 MASKMOVDQU 相比，这可能会稍微简化一些事情）。

# .net - JSON 序列化电子邮件格式

> ID：13204739
> 
> 赞同：1
> 
> 时间：2012-11-03T00:12:18.860
> 
> 标签：.net, json, email, serialization, format

我打算将电子邮件存储在与 JSON 一起使用的文档存储中。最初，我处理的电子邮件采用 MS System.Net.Mail.MailMessage 格式，但将来我可能会从各种不同的电子邮件服务器获取电子邮件，甚至可能不使用 .NET 将它们放入商店。

我想要一种我可以使用并坚持使用的综合格式，它将记录我可以从电子邮件中获得的每一条信息。此外，MailMessage 不容易 jsonSerialize，所以无论如何我都会有某种 DTO。

我的问题是，这里有没有人必须以通用格式存储电子邮件，如果是，他们发现什么最有效？他们遇到的任何特定类会以易于序列化的方式存储尽可能多的信息吗？有没有人在他们选择的格式中犯了一些我可以避免的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:16:51.303

经过一番折腾，我意识到我有点傻。我见过的代表电子邮件的各种类中包含的大多数字段实际上都是从标题派生的。作为一种存储机制，只需删除标头中的任何内容并存储原始标头本身就很有意义。这使对象成为非常基本的东西。

# objective-c - didActivateNotification 没有响应 NSUserNotification

> ID：13204746
> 
> 赞同：1
> 
> 时间：2012-11-03T00:13:05.740
> 
> 标签：objective-c, ios, macos, cocoa

我正在努力让 osx 本机通知正常工作。我能够创建通知，但无法使 didActivateNotification 正常工作。我希望 didActivateNotification 允许我聚焦窗口并从通知中心删除通知。

这是我的代码：`notice.m`

```
#import "Notice.h"

@implementation Notice

- (void) notify:(NSDictionary *)message {

    NSLog(@"Notification - Show it");

    NSUserNotification *notification = [[NSUserNotification alloc] init];
    [notification setTitle:[message valueForKey:@"title"]];
    [notification setInformativeText:[message valueForKey:@"content"]];
    [notification setDeliveryDate:[NSDate dateWithTimeInterval:0 sinceDate:[NSDate date]]];
    [notification setSoundName:NSUserNotificationDefaultSoundName];
    NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter];
    [center scheduleNotification:notification];
}

- (void) userNotificationCenter:(NSUserNotificationCenter *)center didActivateNotification:(NSUserNotification *)notification
{

    NSLog(@"Notification - Clicked");

    notification=nil;
    [center removeDeliveredNotification: notification];
} 
```

这是正确射击：

```
NSLog(@"Notification - Show it"); 
```

但这不是：

```
NSLog(@"Notification - Clicked"); 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T00:21:33.757

您可能必须将委托设置为`NSUserNotificationCenter`：

```
NSUserNotificationCenter *center = [NSUserNotificationCenter defaultUserNotificationCenter];
center.delegate = self; 
```

你还应该确保你的`Notice`类实现了`NSUserNotificationCenterDelegate`协议。

# ios - 在应用程序中购买 - 允许完全控制从个人服务器添加产品的方法 = 允许？

> ID：13204747
> 
> 赞同：1
> 
> 时间：2012-11-03T00:13:19.857
> 
> 标签：ios, in-app-purchase, subscriptions

我有一个非常棘手的问题（是的，我查看了苹果文档，看看是否有答案，但没有运气......我可能不小心错过了它）

这是我的计划：

我一直试图寻找解决方法的问题是，如果管理员想要添加产品，他必须登录 iTunes 连接才能添加它，并将其添加到自定义控制面板中。显然，我们不想让他受苦，所以我一直在寻找解决方案，但我需要你们告诉我苹果是否允许这样做。基本上，我将接管我们服务器上的大部分产品处理，并且只会将交易交给苹果。这意味着苹果不会为所有产品设置应用内购买……每个订阅期限（1 个月、3 个月……等）只有一个，以及针对各种产品的一些消耗性应用内购买发行/单曲的价格

旁注：我将在每月的每一天销售包含多个单曲的月刊。如果他们愿意，用户将能够一次下载整月或一天。

消耗品购买的定义 - 每次用户需要该物品时都必须购买产品。例如，一次性服务通常被实现为消耗品。

因此，我会将有关产品的所有信息存储在我们的服务器中，如果有人选择购买设置为 4.99 的单月问题（在我们的服务器上，而不是苹果上），那么该应用程序将运行与苹果的应用内购买，即为 4.99 层列出。每当一个人第一次打开应用程序时，他们的应用程序都会向我们的服务器发送一些信息，他们会为他们留出一行，记录有关他们购买的所有信息，以便他们在切换时可以恢复它们到另一台设备。

如果你们认为我这样做是安全的，请告诉我，以便我继续。另外，如果此方法对任何人有帮助，请随时使用！

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:23:36.220

我认为您的恢复过程可能存在缺陷。您谈到应用程序将一些信息发送到您的服务器，但这些信息是什么？没有*可靠的*方法可以在不同的设备上唯一地识别用户。

如果您想继续走这条路，您需要确保您的恢复和故障转移过程非常可靠。尝试每一个可以想象的场景。从应用商店提交的角度来看，您需要考虑基于令牌/硬币的方法。当然，Apple 的指导方针相当宽松，并且可能会发生变化，因此您总是有可能被拒绝，但令牌肯定比简单地使用相同的通用应用内购买更可靠。

在代币系统中，您将为不同数量的代币设置应用内购买，用户可以购买这些代币作为一种仅在您的应用程序中有效的虚拟货币。然后用户可以将这些代币用于您动态创建的任何项目。

在服务器端，这意味着您需要某种方法来存储用户当前拥有的令牌数量以及跨设备唯一标识用户的方法，这是一个相当不确定的提议。您可以实现某种散列算法，从应用内购买收据生成散列，然后将其发送到您的服务器，而不是存储每个用户拥有的令牌数量。如果应用程序在购买后但在发送散列之前崩溃或网络中断，下次他们打开应用程序时，您可以重新计算所有散列，发送它们，如果服务器无法识别散列，它只是添加它到数据库。然后，如果用户想要恢复他们的购买，您只需使用您的应用内购买收据重新计算设备上的哈希值 将接收然后将它们发送到您的服务器，并要求服务器找出每个哈希值，用户还剩下多少令牌。你可以把它想象成一个礼品卡系统，其中每个哈希都是一张礼品卡。

同样，应用商店规则会发生变化，如果苹果认为你在试图玩弄系统而不提供有用的体验，他们有权拒绝你。打开开发人员技术支持请求并查看 Apple 工程师是否可以为您提供更好的解决方案或告诉您审阅者是否可能接受您的申请可能是值得的。

# css - Chrome 警告：资源解释为字体但使用 MIME 类型字体/svg 传输

> ID：13204752
> 
> 赞同：2
> 
> 时间：2012-11-03T00:14:27.127
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, font-face, mime-types

我在 Chrome 开发工具中收到以下关于 base64 编码字体的警告，该字体嵌入在我正在处理的网站的一个 CSS 文件中。

```
Resource interpreted as Font but transferred with MIME type font/svg: "data:font/svg;charset=utf-8;base64,PD94bWwgd -- big base64 encoded string -- 2RlZnM+PC9zdmc+" 
```

在 CSS 中，字体是这样插入的：

```
@font-face {
  font-family: 'PrintBelt';
  src: url('data:font/svg;charset=utf-8;base64,PD94bWwgd -- big base64 encoded string -- 2RlZnM+PC9zdmc+") format('svg'), url('data:font/ttf;charset=utf-8;base64,AAEAAAANAIAA -- other big base64 encoded string -- AAAAzLVVtw==') format('truetype');
} 
```

我四处搜索，发现了一些旨在解释如何解决此问题的博客文章和 SO 问题。然而，它们似乎都没有处理嵌入在 CSS 中的字体。

1.  [字体的正确 mime 类型](https://stackoverflow.com/questions/2871655/proper-mime-type-for-fonts)
2.  [哈！在你的字体中](http://danhunter.co.uk/articles/3-ha-in-your-font-face)

为了消除此警告，我可以在 Rails (3.2.8) 或 CSS 中进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:35:07.937

链接的 SO 问题说没有`font/`主要的内容类型轴（可能应该有，但没有）并且 SVG 字体的内容类型是`image/svg+xml`; 剩下的就是在`data:`URL 中正确编码。这*有点*棘手，因为`+`解码后您需要 a 在其中，因此您必须对其进行编码（因为 a`+`通常用作代表空格的标记）：

```
数据：图像/svg%2Bxml;charset=utf-8;base64,PD94bWwgd...
```

Truetype 字体使用 content type `application/x-font-ttf`，这是没有问题的。

# casting - TypeScript 或 JavaScript 类型转换

> ID：13204759
> 
> 赞同：254
> 
> 时间：2012-11-03T00:17:05.083
> 
> 标签：casting, typescript

如何处理 TypeScript 或 Javascript 中的类型转换？

假设我有以下 TypeScript 代码：

```
module Symbology { 

    export class SymbolFactory { 

        createStyle( symbolInfo : SymbolInfo) : any { 
            if (symbolInfo == null)
            {
                 return null;
            }

            if (symbolInfo.symbolShapeType === "marker") {      

                // how to cast to MarkerSymbolInfo          
                return this.createMarkerStyle((MarkerSymbolInfo) symbolInfo);
            }                                  
        }

        createMarkerStyle(markerSymbol : MarkerSymbolInfo ): any { 
            throw "createMarkerStyle not implemented";
        }              

    }
} 
```

`SymbolInfo`基类在哪里。如何在 TypeScript 或 Javascript 中处理从`SymbolInfo`to的类型转换？`MarkerSymbolInfo`

* * *

## 回答 #1

> 赞同：379
> 
> 时间：2012-11-03T05:53:07.247

你可以像这样投射：

```
return this.createMarkerStyle(<MarkerSymbolInfo> symbolInfo); 
```

或者如果你想与 tsx 模式兼容，可以这样：

```
return this.createMarkerStyle(symbolInfo as MarkerSymbolInfo); 
```

请记住，这是编译时强制转换，而不是运行时强制转换。

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2016-02-12T12:10:54.627

这在 TypeScript 中称为[类型断言](https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions)，从 TypeScript 1.6 开始，有两种表达方式：

```
// Original syntax
var markerSymbolInfo = <MarkerSymbolInfo> symbolInfo;

// Newer additional syntax
var markerSymbolInfo = symbolInfo as MarkerSymbolInfo; 
```

两种选择在**功能上是相同**的。引入`as`-syntax 的原因是原始语法与[JSX冲突，请参阅](https://facebook.github.io/react/docs/jsx-in-depth.html)[此处](https://github.com/Microsoft/TypeScript/issues/296)的设计讨论。

如果您可以选择，请使用您觉得更舒服的语法。我个人更喜欢`as`-syntax，因为它读起来感觉更流畅。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-13T12:18:24.217

在打字稿中，可以`instanceof`在 if 语句中进行检查，您将可以访问具有`Typed`属性的相同变量。

因此，假设其上`MarkerSymbolInfo`有一个名为`marker`. 您可以执行以下操作：

```
if (symbolInfo instanceof MarkerSymbol) {
    // access .marker here
    const marker = symbolInfo.marker
} 
```

这是一个很好的小技巧，可以使用相同的变量来获取变量的实例，而无需将其重新分配给不同的变量名。

查看这两个资源以获取更多信息：

[TypeScript instanceof](https://www.typescriptlang.org/docs/handbook/advanced-types.html) & [JavaScript instanceof](https://javascript.info/instanceof)

# python - python gnuplot 从文件中读取

> ID：13204764
> 
> 赞同：1
> 
> 时间：2012-11-03T00:17:57.133
> 
> 标签：python, linux, gnuplot

我有一个包含以下数据的文件，第一个字段是 UNIXTimestamp，

```
1351734672.095 25
1351734674.449 52
1351734676.638 612
1351734680.669 44
1351734681.121 16
1351734684.182 15
1351734684.386 17
1351734686.823 16
1351734689.807 22
1351734689.807 28 
```

我如何从这个文件加载 x,y 到 python？

```
#!/usr/bin/env python

from numpy import *
import Gnuplot

g = Gnuplot.Gnuplot()
g.title('My Systems Plot')
g.xlabel('Date')
g.ylabel('Value')
g('set term png')
g('set out "output.png"')
proc = open("response","r")
databuff = Gnuplot.Data(proc.read(), title="test")
g.plot(databuff) 
```

目前这不起作用......有什么想法吗？

**更新：**

```
#!/usr/bin/env python
from numpy import *
import Gnuplot

g = Gnuplot.Gnuplot()
g.title('My Systems Plot')
g.xlabel('Date')
g.ylabel('Response')
g('set auto x')
g('set term png')
g('set out "output.png"')
g('set timefmt "%s"')
g('set xdata time')
g('set xtic rotate by 45 scale 1 font ",2"')
g('set key noenhanced')
g('set format x "%H:%M:%S"')
g('set grid')

databuff = Gnuplot.File("repo", using='1:2',title="test")
g.plot(databuff) 
```

![在此处输入图像描述](../Images/392c35f4f7ed0dff27990226c9aaef06.png)

xaxis 上的时间值与图表重叠..有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:34:56.120

使用`Gnuplot.File`而不是`Gnuplot.Data`，可以获得以下图：

![输出.png](../Images/da05e733ceb9e2d0187eb5aa56efb2f5.png)

```
#!/usr/bin/env python

#from numpy import *
import Gnuplot

g = Gnuplot.Gnuplot()
g.title('My Systems Plot')
g.xlabel('Date')
g.ylabel('Value')
g('set term png')
g('set out "output.png"')
#proc = open("response","r")
#databuff = Gnuplot.Data(proc.read(), title="test")

databuff = Gnuplot.File("response", using='1:2',with_='line', title="test")
g.plot(databuff) 
```

* * *

**更新：**

对于重叠，您可以更改`45`为`-45`：

```
#g('set xtic rotate by 45 scale 1 font ",2"')
g('set xtic rotate by -45 scale 1 font ",2"') 
```

![在此处输入图像描述](../Images/2a84983e710dc295639318767cb5549d.png)

# loops - Append 导致的无限循环？

> ID：13204768
> 
> 赞同：2
> 
> 时间：2012-11-03T00:19:10.480
> 
> 标签：loops, recursion, prolog, infinite

*关于为什么*我的代码在运行时似乎挂起，我有一点疑问。该代码是针对我在课堂上的一个项目，但我们花了一节课时间研究 Prolog，所以我学到的很多东西都是我四处寻找并自学的东西。如果我的代码包含可怕的文体错误，我深表歉意，但同样，由于我们从未正式了解过如何“应该”使用 Prolog，这主要是基于我自己的实验。

我正在编写的代码段的目标或多或少是形成一条链，通过他们参与的一系列电影将一个演员与另一个演员联系起来。

我有一个我正在调用的函数，该函数旨在在起始演员、所有可能的链接演员结束演员以及连接它们的电影列表之间建立联系。这可能是一种非常低效的方法，但是以这种方式实现它可以用一段代码解决分配的两个部分。

调用该函数的代码有效，为了使代码更易于阅读，除非要求分享，否则我将省略它。简而言之，它断言 a `globalStartingActor`，并将两个空列表 ( `ActorList = []`and `MovieList = []`) 传递给 function `doActorAssertions`。

反过来，我们有`doActorAssertions`. 这是它的修订版，它应该被简化并且更易于阅读，但缺少以前的大量评论。

```
doActorAssertions(ActorsName,ActorList,MovieList) :-
    isNotInList(ActorsName,ActorList) ->
    (
        findMoviesIn(ActorsName,MoviesIn),%finds all movies ActorsName is in
        howLong(MoviesIn,LenMoviesIn),%Sees how many movies there are.
        (
            LenMoviesIn ==0;
            (
                append(ActorsName,ActorList,UpdatedActorList),%this causes errors!
                globalStartingActor(GSAName),%asserted starting actor
                assert(connectedActors(GSAName,ActorsName,MovieList)), %says that the GSAName is connected to ActorsName by a list of movies MovieList.
                write(actorAsserted),               
                addAndTraverse(MoviesIn,UpdatedActorList,MovieList) %Goes to propegate all movies the actor is in, then actors in those movies, then recursively calls this function again.     
            )
        )
    ),
    true. 
```

正如我之前所说，`append`标签似乎是错误的根源！当我将代码简化为上面的代码时，情况确实如此。我只是将附加的注释注释掉，代码体就可以工作了。

那么，为什么 append 会阻止代码正常工作呢？我需要在代码的那部分添加（或类似的功能）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:03:08.557

是`ActorsName`列表吗？变量的名称表明它是，以及 append/3 中的用法，但那是什么`isNotInList(ActorsName,ActorList)`意思呢？部分或全部析取？这可能是无限循环的原因，也许您应该使用这些集合的差异来增加 ActorList。

您应该尽量避免使用 assert/1，而是在变量中传递状态。请参阅[this other answer](https://stackoverflow.com/a/13204498/874024)以获取与您在此处尝试的非常相似的模式。

这没用，可能是错字，但是我不明白`->`

```
 ...
  ),
  true. 
```

我认为应该读

```
 ...
  );     % note the semicolon!
  true. 
```

# java - 手动反转整数数组

> ID：13204772
> 
> 赞同：0
> 
> 时间：2012-11-03T00:19:40.577
> 
> 标签：java

```
public static ArrayList<Integer> reverse (ArrayList<Integer> n) {
    ArrayList<Integer> result = new ArrayList<Integer>();

    for(int i = 0; i < n.size(); i++) {
        int j = n.size() - i - 1; 
        result.add(i, n.get(j));
    }

    return result;
} 
```

但是如果我输入一个数组`1,2,3,4,5,6,7,8,9,10` ，结果是`10,9,8,7,6,5,4,3,2,10`

我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:31:14.257

实际上，您所拥有的一切都很好。但是您可以`for`通过“向后”迭代来简化 -loop：

```
for(int i = n.size() - 1 ; i >= 0 ; i--)
    result.add(n.get(i)); 
```

* * *

哦，还有一件事我应该提到。当您声明 list`result`时，您可能想要指定它的容量，因为您知道它将是什么。IE：

```
ArrayList<Integer> result = new ArrayList<Integer>(n.size()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T00:42:02.977

使用`n.size() / 2`交换（尽可能少）并以线性时间运行。

```
public static ArrayList<Integer> reverse (ArrayList<Integer> n)
{
    for (int i = 0, j = n.size() - 1, t; i <= size / 2; ++i, --j)
    {
        t = n.get(i);
        n.set(i, n.get(j));
        n.set(j, t);
    }
    return n;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T00:26:17.140

> Collections.reverse(arrayList);

如果你还想买手动的，

```
 public ArrayList<Integer> reverse(ArrayList<Integer> arrayList) {
        ArrayList<Integer> result = (ArrayList<Integer>)list.clone();
        for (int start=0,end=result.size()-1;start<end;start++,end--) {
           swap(result,start,end) ;
        }
        return result;
     }
     public void swap(ArrayList<Integer> temp, int front, int back) {
        Integer i = temp.set(front,temp.get(back)) ;
        temp.set(back, i) ;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-15T07:51:55.187

它不适用于具有偶数个项目的列表

# xml - 扩展现有 XSD 并允许向后验证

> ID：13204775
> 
> 赞同：2
> 
> 时间：2012-11-03T00:20:08.863
> 
> 标签：xml, xsd

目标是创建一个扩展现有 XML 模式的 XML 模式，以便可以使用基本 XSD 或扩展 XSD 验证生成的实例文档。

这是一个基本 XSD 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:dx="dataxsd/1"
    targetNamespace="dataxsd/1"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">

    <xs:complexType name="DataType">
        <xs:sequence>
            <xs:element name="Start" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="End" type="xs:dateTime" minOccurs="0"/>
            <xs:element name="Value" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
            <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute name="type" type="xs:integer"/>
        <xs:anyAttribute namespace="##other" processContents="lax"/>
    </xs:complexType>

    <xs:element name="Data" type="dx:DataType"></xs:element>
</xs:schema> 
```

我想扩展它来做一个超集。我最初的方法是使用类似于以下的 xs:redefine 功能：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:dx="dataxsd/1"
    targetNamespace="dataxsd/1"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified">

    <xs:redefine schemaLocation="data.xsd">
        <xs:complexType name="DataType">
            <xs:complexContent>
                <xs:extension base="dx:DataType">
                    <xs:sequence>
                        <xs:element name="Status" type="xs:string" minOccurs="0"/>
                    </xs:sequence>
                </xs:extension>
            </xs:complexContent>
        </xs:complexType>
    </xs:redefine>
</xs:schema> 
```

使用 oXygen 14.1，这两种模式都可以成功验证。

由于 xs:any 命名空间仅允许“##other”，因此包含扩展架构的实例文档将不会针对非扩展架构进行验证，xs:redefine 要求扩展位于同一命名空间中。

更改基本架构是不可取的，但我尝试更改它以将 xs:any 命名空间限制设置为“##any”，XSD 本身不会验证，Xerces 投诉是：

```
cos-nonambig: "dataxsd/1":Start and WC[##any] (or elements from their substitution group) violate "Unique Particle Attribution". During validation against this schema, ambiguity would be created for those two particles. 
```

我还尝试了 XML Schema 1.1 xs:override 功能，因为 xs:redefine 现在在 1.1 中被指定为弃用，但我永远无法正确验证它，而且支持似乎处于非常早期的阶段。

有没有办法实现扩展原始基本模式并允许包含扩展的实例文档使用基本非扩展模式进行验证的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:48:19.080

`<xd:Start>`放宽命名空间限制会在将元素匹配为`<xs:element name="Start"/>`-rule 或将它们全部跳过并将其匹配为`<xs:any />`规则之间产生歧义。对于其他预定义元素也是如此。

在 Regex 中，在这种情况下您将使用贪婪量词，但 XSD 语言不区分[greedy 和 lazy](http://en.wikipedia.org/wiki/Regex#Lazy_quantification)。

就目前而言，有两种方法可以解决它：

*   在第二个文件中选择另一个命名空间。
*   使第一个文件中最后定义的元素成为必需且不可重复的：`minOccurs="1" maxOccurs="1"`. 也许将值包装在`<xd:Values>`-element 中。

* * *

**阅读更多：**

*   [创建可扩展的内容模型](http://www.xfront.com/ExtensibleContentModels.html)

# python - 机械化 br.click_link() 和 br.follow_link() 之间的区别

> ID：13204781
> 
> 赞同：3
> 
> 时间：2012-11-03T00:20:52.413
> 
> 标签：python, forms, mechanize

我正在使用机械化来自动化一些表单提交。

为此，我需要转到某个网站的主页，单击带有特定文本的链接，该链接会将我重定向到另一个页面并在新页面中填写表格。

我尝试使用

```
 response = br.follow_link(text_regex="sometext")

  for f in response.forms()
      print f.name 
```

我收到的错误消息是 AttributeError: closeable_response instance has no attribute 'forms'

当我尝试

```
for f in br.forms()
    print f.name 
```

它打印主页中的表单名称，而不是我重定向到的新页面。

如何在新页面中找到表格的名称？

“响应”包含什么？

click_link() 和 follow_link() 有什么区别。机械化文档没有清楚地解释这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-09T21:19:00.637

关于 click_link() 和 follow_link() 的区别：

这两种方法都采用相同的关键字作为参数。

*   click_link() 是一个方法，它将返回一个 Request 对象，然后可用于创建请求：

    ```
    req = br.click_link(text='Sample Text')
    br.open(req) 
    ```

*   follow_link() 将执行与 .open() 相同的操作，直接打开链接。

此信息取自以下文档：http: [//joesourcecode.com/Documentation/mechanize0.2.5/mechanize._mechanize.Browser-class.html#click_link](http://joesourcecode.com/Documentation/mechanize0.2.5/mechanize._mechanize.Browser-class.html#click_link)

在 wwwsearch 给出的示例中可以观察到 Follow_link() 行为： [http ://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)

# javascript - 是否可以使用 javascript 读取 DOM 中未使用的 css 类的样式？

> ID：13204785
> 
> 赞同：1
> 
> 时间：2012-11-03T00:21:21.010
> 
> 标签：javascript, jquery, css

我需要能够读取已加载网页的可用 css 类。不是分配给 DOM 元素的类，而是在 CSS 中定义的类。这可以用javascript，或者特别是jQuery吗？

我正在尝试一种骇人听闻的方式来覆盖我正在使用的 CMS 中内置的列（concrete5），所以请耐心等待。在加载时，会有许多具有特定内联百分比宽度的 div，例如`style="width: 27%;"`. 在我的 css 中，有许多网格系统类，例如`.one`、`.two`、`.three`等，我想与这些 div 匹配。

例如，我在这里有 3 个 css 类：

```
.one { width: 8.3333%; }
.two { width: 16.6667%; }
.three { width: 25%; } 
```

我的一个 div 的内联样式为`width: 22%;`. 我想为它分配最匹配的类，`.three`在这种情况下，并以编程方式删除内联样式。有没有办法让我阅读`.one, .two, .three, etc`它们没有附加到元素时的样式是什么，换句话说，直接从 css 中读取它们？我想避免对这些值进行硬编码，因为它们可能会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:39:17.637

CSS 类的宽度可以这样获得：

```
function getClassWidth(className) {
    var classes = document.styleSheets[0].rules || document.styleSheets[0].cssRules;
    for (var i = 0; i < classes.length; i++) {
        if (classes[i].selectorText == className) {
            return classes[i].style.getPropertyValue("width");
        }
    }
}

getClassWidth('.one'); // Would return the string "8.3333%" 
```

基于[此答案](https://stackoverflow.com/questions/324486/how-do-you-read-css-rule-values-with-javascript)的解决方案。

# jquery - 同位素脚本删除了一些 CSS 规则？

> ID：13204789
> 
> 赞同：0
> 
> 时间：2012-11-03T00:21:50.010
> 
> 标签：jquery, jquery-isotope

我正在开发一个网站并使用非常好的[同位素](http://isotope.metafizzy.co/index.html)脚本来创建一个带有项目的可过滤区域。

我已经设置，当你将它们悬停时，项目的背景会变成红色，但奇怪的是，同位素在一些过滤后会删除其中**一些**效果`hover`。

 **您可以在这里看到我的意思的示例：http: [//paragraphe.org/henpier/isotope_test/archive.html](http://paragraphe.org/henpier/isotope_test/archive.html)

尝试将它们悬停：一切似乎都很好。然后尝试过滤它们几次，突然有些`hover`效果停止工作......

请问各位大神，能帮我解答一下为什么会这样吗？非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:25:08.417

同位素会在脚本中引起冒泡 - 参考您的悬停效果，使用 ON 将它们绑定。[http://api.jquery.com/on/](http://api.jquery.com/on/)

 `````
$("p").on("hover", function(){
alert( $(this).text() );
}); 
````  `虽然 - 我看到你是通过 css 设置它。- 您可以循环遍历同位素元素并专门附加该类以确保其正常工作。或者您可以使用上面的悬停功能来附加或删除类。

[http://isotope.metafizzy.co/docs/extending-isotope.html](http://isotope.metafizzy.co/docs/extending-isotope.html)

 `````
$('#container').isotope({
  itemSelector: '.element',
  itemPositionDataEnabled: true
})
// log position of each item
.find('.element').each(function(){
  var position = $(this).data('isotope-item-position');

//APPEND required class here. ensure its on the elements

  console.log('item position is x: ' + position.x + ', y: ' + position.y  );
}); 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:33:05.207

我完全错过了 Isotope 需要的重要 CSS 规则，特别`z-index`是过滤部分的一些规则：

[http://isotope.metafizzy.co/docs/introduction.html#css](http://isotope.metafizzy.co/docs/introduction.html#css)

感谢大卫指出这一点......````**

# c++ - VC++2010 似乎只在一个固定数组中分配一个 std::string

> ID：13204792
> 
> 赞同：1
> 
> 时间：2012-11-03T00:22:14.690
> 
> 标签：c++, arrays, visual-studio-2010, stdstring, declare

这对我来说似乎很简单，但实际上我很难找到任何明确说明这一点的东西。

不创建对象数组，`std::string stringArray[3]` *那样*会吗？实际数量无关紧要；我随便挑了3个。`std::string``SomeType typeArray[3]`

在 Visual Studio 2010 调试器中，它似乎创建了单个字符串，而不是字符串数组。为什么？

疯狂猜测：它是调用默认`std::string`构造函数，然后调用索引 3 的未使用访问吗？如果是这样，为什么这不会导致空字符串出现越界异常？

这与`[]`运算符重载有关吗？

有很多方法可以编写相同的代码，而无需专门使用`std::string`没有问题的数组，但是这种行为的解释/理由是什么？这对我来说似乎违反直觉。

编辑：我发现这个线程[std::string Array Element Access](https://stackoverflow.com/questions/10019911/stdstring-array-element-access)在其中对答案的评论似乎观察到相同的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T00:31:47.627

Visual Studio 的调试器通常只会向您显示数组或指针指向的第一件事。您必须使用`stringArray[1]` `stringArray[2]`etc 才能看得更远。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T00:38:46.293

OP并没有失去理智。但是 Visual Studio 的集成调试器肯定是。我相信这是检测运算符 [] for 的`std::string`失败，这很可悲但是，它确实可以正常工作`std::vector<std::string>`

[可以在此先前发布的问题](https://stackoverflow.com/questions/972511/view-array-in-visual-studio-debugger)中找到有关如何使用监视窗口（无法使用 Auto 或 Locals 窗口 afaik 来解决此问题）的[**出色**](http://support.microsoft.com/kb/198953)参考。这对于查看基于指针的动态数组（用 分配的数组）也是一种非常有用的方法。提示：用“ ”表示变量（指针或固定数组），“ ”表示要展开的元素个数。`Type *p = new Type[n];``varname,n``varname``n`

演示是为了显示声明的 C 数组`std::string`和 OP 正在观察的内容，并`std::vector<std::string>`显示事情应该是什么样子：

```
int main(int argc, char *argv[])
{
    std::string stringArray[3];
    std::vector<std::string> vecStrings(3);
    return 0; // set bp *here*
} 
```

![在此处输入图像描述](../Images/c883e5373504ed8c89ad6e633e2301e5.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T00:29:33.673

它创建一个数组。要么你编译了一些不同的东西，要么你误解了结果。

它不会在这些上下文中创建数组：

```
void function(std::string stringArray[3]) { } 
```

这个函数参数是一个指针`std::string`，你不能有数组类型的函数参数。

```
extern std::string strnigArray[3]; 
```

这声明但不*定义*数组。它告诉编译器在程序调用的某个地方有一个由三个字符串组成的数组，`stringArray`但实际上并没有创建它。

否则，它会创建一个包含三个字符串的数组。

您可以通过以下方式检查：

```
assert( sizeof(stringArray) == 3*sizeof(std::string) ); 
```

或在 C++11 中

```
static_assert( sizeof(stringArray) == 3*sizeof(std::string), "three strings" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T10:32:40.230

是的，VS 2010 中的调试器在这里做得并不好，但正如其他人所说，这只是调试器中的一个显示问题，它确实可以按您的预期工作。

在 VS 2012 中，他们做得更好：-

![在此处输入图像描述](../Images/d261bd9cda75a7761036dce85cdf256a.png)

# css - CSS 对我来说似乎没有级联

> ID：13204797
> 
> 赞同：0
> 
> 时间：2012-11-03T00:23:28.247
> 
> 标签：css, wordpress, typography

我有一些用于 Wordpress 博客的 CSS。我希望段落缩进，但代码块左对齐到边距。这是我拥有的代码——所有这些元素都带有`<div class="postContent"`标签，Wordpress 会自动将帖子文本块包装在`<p>`标签中。

首先，我将 div 标签中的所有段落都设置为缩进：

`.postContent p { font-size: 1.2em; text-indent: 2.5em; text-align: justify; line-height: 1.6em; margin: 1em; }`

然后，Wordpress 将第一段留作`.lead`段落。我希望它缩进，前提是它不是代码：

`.postContent p.lead code { margin: 0; text-indent: 0; }`

这工作得很好。但是，所有其他代码段仍在缩进，因此我将其添加到样式表中：

`.postContent p code { text-indent: 0; padding: 0; padding-top: 2em; padding-bottom: 2em; }`

没有骰子。代码块仍然按照`.postContent p`规则缩进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:29:29.303

如果没有看到 html 的源代码和实际的 css 代码，真的很难说，但我猜你的样式正在被更具体的样式所覆盖。

最好的办法是在 Firefox 中安装 Firebug（真的，最好的浏览器开发工具，恕我直言）并检查目标元素。检查器应显示应用于元素的所有样式。被覆盖的样式将带有删除线。如果您发现它们被覆盖，请让您的样式更具体。否则，如果您没有看到列出的样式，则说明您没有正确定位它。

希望有帮助。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T07:47:39.673

`text-indent`对`code`元素内部的元素进行设置`p`不会影响元素的缩进`p`。实际上，它不会影响任何事情，因为[`text-indent`](http://www.w3.org/TR/CSS21/text.html#propdef-text-indent)仅适用于块容器。

如果标记`<p><code>...</code></p>`使得 只`p`包含`code`，您可以添加

```
.postContent p code { display: block; } 
```

然后再考虑垂直间距怎么处理，加起来可能有点过大（即 的`p`加边距`code`）。

# python - 在 QTableView 中显示和编辑日期

> ID：13204800
> 
> 赞同：1
> 
> 时间：2012-11-03T00:23:49.293
> 
> 标签：python, qt, pyqt, pyside

我有一个简单的应用程序，它在 QTableView 中显示来自 sqlite 数据库的表。表格的一列用于存储日期。我想为用户提供简单的方法来修改此列中的日期。我重新实现了将类型更改为的`data`方法：`QtSql.QSqlTableModel``QVariant``QDate`

```
class Model(QtSql.QSqlTableModel):
    [...]

    def data(self, index, role=QtCore.Qt.DisplayRole):
        if index.column() == 3:
            return super(Model, self).data(index, role).toDate()
        return super(Model, self).data(index, role)

    [...] 
```

进行此更改后，我得到了专栏：

![日期栏](../Images/7579e88aeb9547a439ce68bca0bfd2db.png)

但用户不可能有空日期。我该如何解决？

是否可以弹出日历而不是此日期编辑？我应该使用委托还是有其他方法？如果委托是最好的方法，如何为单个 QTableView 列设置委托？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:24:24.403

您应该使用委托来提供自定义编辑器小部件。`QTableView::setItemDelegateForColumn`方法可以帮助你[qdoc](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setItemDelegateForColumn)

# javascript - 如何使用 Phonegap 让我的应用程序运行“始终在最前面”？

> ID：13204802
> 
> 赞同：1
> 
> 时间：2012-11-03T00:24:05.907
> 
> 标签：javascript, android, jquery, cordova, always-on-top

我需要始终在 android 系统之上运行我的应用程序，而用户只能使用自己的密码退出应用程序。有人告诉我，为了做到这一点，我需要设置并运行我自己的服务。

我的问题是可以以及它是如何使用 Phonegap 和 Jquery 完成的。我如何定义和运行我自己的服务？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:36:22.530

首先，不要那样做。我知道这听起来不像是答案，但相信我，这实际上就是答案。我的意思是，不，您不希望您的应用程序“始终位于 android 系统之上”。使用实际的 Android 生命周期并作为一个好公民参与，不要滥用它，并尝试让您的应用程序始终运行。我知道你可能有一个用例让你认为你需要这样做，但你很可能不需要。

其次，你可以编写一个原生服务（不是 JS）并让它在后台运行。这是一个标准的 Android 服务。您需要创建一个PhoneGap 插件以通过该服务连接到您的应用程序（或者您可以在PhoneGap 之外自己创建它，无论哪种方式）。然后你可以在后台工作，或者通过服务将你的应用程序带到前台。

这个答案可能会有所帮助：[Creating an Android Service with Phonegap? （即使关闭也可以运行phonegap应用程序）](https://stackoverflow.com/questions/10343828/creating-an-android-service-with-phonegap-have-phonegap-app-run-even-when-clos)

第三，再次，不要那样做。大多数长期运行的服务都是一个坏主意（并非所有人都介意，一些用例需要它，音乐播放器等，但大多数不需要）。如果您只需要偶尔做一些后台工作（获取数据等），创建一个 IntentService 并安排一个警报（通过 AlarmManager）在后台定期启动它是一个更好的主意。不管用例如何，长时间运行的后台服务都会消耗大量资源，并使用户对您的应用程序保持警惕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:29:03.860

我认为Phonegap 不会让您仅在javascript 中创建服务。为了能够提供服务，您必须至少编写一些本机代码。请参阅[https://stackoverflow.com/a/10427975/1721527](https://stackoverflow.com/a/10427975/1721527)。

我从未使用过Phonegap，但我认为您可以创建一个本机插件来与javascript 对话。请参阅[http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html)。

[请参阅http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)上有关服务的 Android 文档。

# sql-server - SQL Server：当基础表数据类型改变时，视图列数据类型不会改变？

> ID：13204803
> 
> 赞同：2
> 
> 时间：2012-11-03T00:24:35.943
> 
> 标签：sql-server

如果我有这样的表`MyTable`：

```
Value1 decimal 
```

然后我有一个看法`MyView`：

```
Select SUM(Value1) as SumValue1 from MyTable 
```

当我在视图的列部分下查看 SSMS 中视图的列数据类型时，它是小数。

现在，如果我将表修改为：

```
Value1 real 
```

如果我在 SSMS 中刷新视图的列部分，则数据类型仍然是小数。现在，如果我打开视图并重新保存它，数据类型将变为浮点数。

这是应该的吗？在我重新保存之前，视图似乎不会改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T01:23:35.003

是的，这是意料之中的。可以以使视图[完全无效](https://stackoverflow.com/questions/6616245/how-do-i-identify-views-with-broken-dependencies-in-sql-server)的方式更改表。如果您想防止这种情况发生，您可以在创建视图时使用[WITH SCHEMABINDING](http://msdn.microsoft.com/en-us/library/ms187956.aspx)选项。从链接的文章：

*将视图绑定到基础表的架构。指定 SCHEMABINDING 时，不能以会影响视图定义的方式修改一个或多个基表。必须首先修改或删除视图定义本身，以删除对要修改的表的依赖关系。*

# android - Android中的最大文件名长度

> ID：13204807
> 
> 赞同：30
> 
> 时间：2012-11-03T00:25:25.033
> 
> 标签：android

我正在尝试为我正在创建的文件命名。我只想知道 Android 中的最大文件名长度是多少？

是否有文件名规范？我可以使用`-`or之类的字符`>`吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-10T13:57:32.590

在 Android 上使用超过 127 字节的标签显然是不安全的。AFAIK，255 限制是一个目标，但它是一个 WIP。上周，当音乐同步软件生成了一些大约 160 个字符的文件名时，我破坏了我的 Galaxy Tab 10.1 的 sdcard 文件系统。将文件名限制为 127 解决了这个问题。安全起见，除非您确定您的特定版本...坚持 127 的限制。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-03T01:21:40.853

关于字符： 读到[这里](https://stackoverflow.com/questions/2679699/what-characters-allowed-in-file-names-on-android)，貌似`-`不是保留字符，所以可以使用。`>`但是，已保留，因此可能无法使用。

关于最大长度：由于我找不到任何特定于 Android 的内容，并且由于 java 不限制它使用的文件名的长度（如您[在此处](https://stackoverflow.com/questions/4512742/does-java-io-have-a-maximum-file-name-length)看到的），我想说最大长度是最广泛使用的限制，即 255 字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-06T07:40:03.977

在资源名称的特定情况下，如图像，我发现最大长度为 100 个字符，包括扩展名。我已经在 Android Studio 1.2 beta 中检查过了。我确信在 Android 文档中一定有一些关于此的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-27T00:04:59.853

我发现“-”（句号）是命名的标准。您经常会看到特殊字符以提高可读性，例如“。” 然而，句点是一个常数，用于将文件名与文件类型命名法分开，而与操作系统无关。这条规则可以追溯到最早的计算时代。年轻用户没有意识到的是，这些规则在早期是多么严格。另一方面，现代协议更多地使用假设来缩短代码，因此占用的空间更少。正如您的智能手机比旧的 IBM360 小一样，现代指令集也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-17T20:29:59.843

Android中的最大文件大小是

## 255

# javascript - ajax 没有检索到新的 geoJSON 数据

> ID：13204808
> 
> 赞同：0
> 
> 时间：2012-11-03T00:25:36.457
> 
> 标签：javascript, ajax, google-maps-api-3, geojson

> **可能重复：**
> [谷歌地图API实时更新新geojson文件](https://stackoverflow.com/questions/13149836/google-maps-api-real-time-updates-with-new-geojson-files)

由于某种原因，当多边形重新生成时，它们仍在使用 json_template.json。我想用 json_template1.json 刷新。我认为这与我的ajax有关。

任何帮助是极大的赞赏。

谢谢

```
 var map;

    function initialize() { 
        var kansas_city = new google.maps.LatLng(39.316858,-94.963194);
        var mapOptions = {
        zoom: 13,
        center: kansas_city,
        mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

        google.maps.event.addListener(map, 'tilesloaded', function() {
            setTimeout(function() { removeSectors() }, 1000);
            setTimeout(function() { updateMap() }, 2000);
            });     
    }

    function removeSectors() {
        if ( allPolygons ) {
            for ( i = 0; i < allPolygons.length; i++ ) {
                allPolygons[i].setMap(null);
            }
        allPolygons.length = 0;
        }
    }

    var data;
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'json_template.json', true);
    xhr.onload = function() {
        data = JSON.parse(xhr.responseText)
        sector_callback(data);
    };
    xhr.send();

    function updateMap() {
        var data;
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'json_template1.json', true);
        xhr.onload = function(response) {
            data = JSON.parse(response.responseText)
            sector_callback(data);
        };
        xhr.send();
    }

    function createClickablePoly(poly, html) {
    google.maps.event.addListener(poly, 'click', function(evt) {
        infowindow.setContent(html);
        infowindow.setPosition(evt.latLng);
        infowindow.open(map);
        });
    }
    var infowindow = new google.maps.InfoWindow({});        

    function sector_callback() {
        var bounds = new google.maps.LatLngBounds();        
        for (var i = 0, len = data.features.length; i < len; i++) {
            var coords = data.features[i].geometry.coordinates[0];
            siteNames = data.features[i].properties.Name; // added for site names
            var path = [];
        for ( var j = 0, len2 = coords.length; j < len2; j++ ){ // pull out each     set of coords and create a map object
            var pt = new google.maps.LatLng(coords[j][1], coords[j][0])
            bounds.extend(pt);
            path.push(pt);

        }

        var polygons = new google.maps.Polygon({
        path: path,
            strokeColor: "#000000",
            strokeOpacity: 0.8,
            strokeWeight: 1,
            fillColor: "#000000",
            fillOpacity: 0.35,
        map: map
        });
        createClickablePoly(polygons, siteNames);
        //console.debug(siteNames);

        google.maps.event.addListener(polygons, 'mouseover', function() {
        var currentPolygon = this;

        currentPolygon.setOptions({ 
            fillOpacity: 0.45,
            fillColor: "#FF0000"
            })
        });

        google.maps.event.addListener(polygons, 'mouseout', function() {
        var currentPolygon = this;
        currentPolygon.setOptions({ 
            fillOpacity: 0.35,
            fillColor: "#000000"
            })
        });

        allPolygons.push(polygons);
        }
    }
    var allPolygons = []; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:59:38.820

`xhr.onload = function()`必须接收一个参数，例如：

```
function updateMap() {
        var data;
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'json_template1.json', true);
        xhr.onload = function(request) {
            data = JSON.parse(request.responseText)
            sector_callback(data);
        };
        xhr.send();
    } 
```

**编辑：**

您还可以使用此 AJAX 功能，它是跨浏览器兼容的：

```
function ajaxLoad(url,callback,plain) {
    var http_request = false;

    if (window.XMLHttpRequest) { // Mozilla, Safari, ...
        http_request = new XMLHttpRequest();
        if (http_request.overrideMimeType && plain) {
            http_request.overrideMimeType('text/plain');
        }
    } else if (window.ActiveXObject) { // IE
        try {
            http_request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                http_request = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    }
    if (!http_request) {
        alert('Giving up :( Cannot create an XMLHTTP instance');
        return false;
    }
    http_request.onreadystatechange =  function() {
        if (http_request.readyState == 4) {
            if (http_request.status == 200) {
                eval(callback(http_request));
            }
            else {
                alert('Request Failed: ' + http_request.status);
            }
        }
    };
    http_request.open('GET', url, true);
    http_request.send(null);
} 
```

并这样称呼它：

```
ajaxLoad('json_template1.json',processAjaxResult, true); 
```

进而

```
function processAjaxResult(request) {
    alert(request.responseText); //<---- your data is now here!
    //...etc
} 
```

# citrix - 从不同的机器重新连接到相同的已发布应用程序

> ID：13204810
> 
> 赞同：1
> 
> 时间：2012-11-03T00:25:48.593
> 
> 标签：citrix, xen, xenapp

从不同的机器重新连接到相同的已发布应用程序。

使用 XENAPP，假设我发布了一个自定义 .net 应用程序 (test.exe)，并假设它提供了一些类似 mspaint 的功能，例如从磁盘加载图像并使用 test.exe 中提供的工具进行修改。让我们假设它驻留在服务器 A 上。

客户端通过 citrix ICA Session 连接到服务器 A，启动 test.exe 并开始使用该应用程序。

如果用户决定从另一台机器登录，是否可以连接到同一个会话（知道我知道登录同一个会话的用户名、密码等），这样我就可以开始使用应用程序了我在哪里停下来？而不是再次启动 test.exe ？

简而言之，我想重新连接到从其他机器中断的已发布应用程序。

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T10:21:29.140

是的，这是 Citrix XenApp 中的默认功能。它被称为[工作区控制](http://support.citrix.com/article/CTX116633)。（链接描述的是 Presentation Server 4.0/4.5，但功能相同）

# mysql - OperationalError，Django 无法连接到 MySQL 数据库

> ID：13204811
> 
> 赞同：3
> 
> 时间：2012-11-03T00:25:49.883
> 
> 标签：mysql, django, database-connection

我正在编写 Django 教程，我想将我的项目连接到 MySQL 数据库。我按照 djangoproject 教程的说明做了所有事情来连接数据库。但是，在运行`python manage.py syncdb`时，我收到以下错误：

```
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

什么看起来有问题？我已经下载了 XAMMP，并且之前通过 XAMMP 创建了数据库，但我不知道这会如何影响与 Django 的连接。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T02:37:14.593

实际上在 settings.py 下，我设置`HOST`为“127.0.0.1”并设置`PORT`为 3306，填写了 DATABASE 部分的其余部分，它工作了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T02:08:33.347

如果您使用的是 Windows 7，如果您的 MySQL 配置为使用命名管道，您可能会遇到问题。将您的 MySQL 配置设置为使用 TCP。

 一旦你重新配置的 MySQL 允许本地网络连接，你的 MySQLdb 应该通过 TCP 工作。  

尽管“mysql”命令行客户端可以，但它似乎无法使用 Windows 7 命名管道。可能有一个错误。除非 MySQL 配置为没有网络连接，否则不会注意到这一点，这很少见。我在具有本地 MySQL 实例的开发机器上以这种方式设置 MySQL。

此处的详细文章 - [http://interconnectit.com/764/using-mysql-workbench-with-xampp/](http://interconnectit.com/764/using-mysql-workbench-with-xampp/) - 向您展示了可以将**连接方法**从命名管道（本地套接字/管道）切换到 TCP/IP的屏幕通过 Xampp。

![在此处输入图像描述](../Images/1f215ab3731d3834e3ec92333e62ed90.png)

或者，如果您的 python/django 应用程序使用命名管道 (windows) 或套接字 (linux/mac) 连接到 MySQL 对您很重要，并且您不想将连接方法更改为 TCP/IP，您应该尝试*设置服务器名称为“。”* 在你的 xampp 的 my.conf 配置文件中；而不是“本地主机”或“127.0.0.1”。使用管道/套接字绕过 TCP/IP 网络协议，性能稍好一些。

# html-email - Outlook 2007 / 2013 不呈现 CSS 字体系列声明

> ID：13204812
> 
> 赞同：6
> 
> 时间：2012-11-03T00:25:53.443
> 
> 标签：html-email, outlook-2007

我正在使用 Litmus 测试电子邮件设计，我终生无法在 Outlook 2007 / 2010 / 2013 中正确设置我的字体。每一个 HTML / CSS 技巧 / hack 都会继续在 Times New Roman 中呈现：

`![来自 Litmus 的 Outlook 2010 屏幕截图](../Images/07812200de716afb4a9884018f600ac1.png)

我主要使用简单的表格进行布局，因此所有内容最终都在 TD 元素中。

以下是我尝试设置字体的各种技术。

**我的 STYLE 声明：**在 HEAD 和 BODY 标签中都试过这个，但都不起作用。

```
<style>
@font-face {
    font-family: proxima-nova;
    src: url('assets/ProximaNova-Reg.otf');
}
@font-face {
    font-family: proxima-nova-blk;
    src: url('http://assets/ProximaNova-Black.otf');
}
body *, td, p, li {
    font-family: font-family:proxima-nova,'Proxima Nova Regular','Proxima Nova',verdana,sans-serif;
}
</style> 
```

**在 TD 元素上设置的 CSS STYLE 属性：**

```
 <td style="font-family:proxima-nova,'Proxima Nova Regular','Proxima Nova',verdana,sans-serif; color:#FFFFFF; font-weight:300;font-size:18px;"> 
```

**设置了 FACE 和 STYLE 属性的 FONT 标签：**

```
<font face="proxima-nova,Proxima Nova Regular,Proxima Nova,verdana,sans-serif"  
    style="font-size:28px; 
    font-family:proxima-nova,'Proxima Nova Regular','Proxima Nova',verdana,sans-serif;"> 
```

**所有内部文本元素（P、LI、A）的内联 CSS STYLE 属性：**

我完全感到困惑。在所有其他相关客户端上，一切都正常工作（即字体正在渲染，因为我期望考虑到各种错误和渲染怪异），包括 iOS、Gmail、Outlook 2003 / Express 等：

![在此处输入图像描述](../Images/599154de6d17f962ed94f12e58d26057.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T19:44:36.487

我将问题追溯到我的 STYLE 声明，该声明使用@font-face 拉入自定义字体文件以支持客户端（即 Apple）。显然，在 Outlook 2007 - 20013 中，这种使用 @font-face 声明的方法中断了。

```
<style>
@font-face {
    font-family: proxima-nova;
    src: url('http://assets/ProximaNova-Reg.otf');
}
@font-face {
    font-family: proxima-nova-blk;
    src: url('http://assets/ProximaNova-Black.otf');
}
</style> 
```

我需要让 MS Outlook 忽略这个 STYLE 标签，所以我用标签包裹了整个块`[if !mso]`：

```
<!--[if !mso]><!-->
<style>
@font-face {
...  
}
</style>
<!--<![endif]--> 
```

哇，这让我快疯了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:52:50.290

我已经使用 [if !mso] 标签尝试了您的解决方案，但由于某种原因它不起作用。我最终找到了一个不同的解决方案：

您可以使用带有 face-attribute 的 font-tag 在 Outlook 2007/2010/2013 等客户端中强制使用正确的备用字体。例如：

```
<td style="color:#FFFFFF; font-weight:300;font-size:18px;">
    <font face="proxima-nova,'Proxima Nova Regular','Proxima Nova',verdana,sans-serif"
</td> 
```

我在 Litmus 和 Outlook 2007/2010/2013 中对此进行了测试，它会回退到 Verdana，在支持自定义字体的客户端中，它会显示 proxima-nova。

我希望这有帮助。

# jquery - rails 3.2.1 上的 morris.js 无法从 html 获取 json

> ID：13204813
> 
> 赞同：2
> 
> 时间：2012-11-03T00:25:54.050
> 
> 标签：jquery, ruby-on-rails-3.2, morris.js

我在 morris.js 图形库上有一个奇怪的错误

这适用于graphs.js

```
$(document).ready(function() { 
  Morris.Line({
  element: 'annual',
    data: [
    {y: '2012', a: 100},
    {y: '2011', a: 75},
    {y: '2010', a: 50},
    {y: '2009', a: 75},
    {y: '2008', a: 50},
    {y: '2007', a: 75},
    {y: '2006', a: 100}
  ],
    xkey: 'y',
  ykeys: ['a'],
  labels: ['Series A']
});
}) 
```

这不是 graphs.js

```
$(document).ready(function() { 
  Morris.Line({
  element: 'annual',
    data: $('#logs_chart').data('logs'),
    xkey: 'y',
  ykeys: ['a'],
  labels: ['Series A']
});
}) 
```

在相应的html中

```
<div data-logs="[
    {y: '2012', a: 100},
    {y: '2011', a: 75},
    {y: '2010', a: 50},
    {y: '2009', a: 75},
    {y: '2008', a: 50},
    {y: '2007', a: 75},
    {y: '2006', a: 100}
  ]" id="logs_chart"></div> 
```

我明白了

```
Uncaught TypeError: Cannot call method 'match' of undefined  morris.js:316

Morris.parseDate = function(date) {
    var isecs, m, msecs, n, o, offsetmins, p, q, r, ret, secs;
    if (typeof date === 'number') {
      return date;
    }
    m = date.match(/^(\d+) Q(\d)$/);
Uncaught TypeError: Cannot call method 'match' of undefined
    n = date.match(/^(\d+)-(\d+)$/); 
```

有人遇到过这种情况并找到解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:01:36.260

在数据日志中填充图形数据不起作用，因为它是一个字符串。您需要使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)、[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)或类似方法解析数据。

还值得注意的是，您在示例中获得的数据不是严格有效的 JSON，您需要转义密钥，例如：

```
<div data-logs='[
    {"y": "2012", "a": 100},
    {"y": "2011", "a": 75},
    {"y": "2010", "a": 50},
    {"y": "2009", "a": 75},
    {"y": "2008", "a": 50},
    {"y": "2007", "a": 75},
    {"y": "2006", "a": 100}
  ]' id="logs_chart"></div> 
```

以及相应的 HTML：

```
$(document).ready(function() { 
  Morris.Line({
    element: 'annual',
    data: $.parseJSON($('#logs_chart').data('logs')),
    xkey: 'y',
    ykeys: ['a'],
    labels: ['Series A']
  });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T16:42:03.993

对我来说，解决方案是将 json 输出放在 HTML 末尾的脚本标记中的变量中。

像这样

```
<script> 

 var json_data = [
    {y: '2012', a: 100},
    {y: '2011', a: 75},
    {y: '2010', a: 50},
    {y: '2009', a: 75},
    {y: '2008', a: 50},
    {y: '2007', a: 75},
    {y: '2006', a: 100}
  ]

</script> 
```

并在 graphs.js 文件中调用此变量

```
$(document).ready(function() { 
  Morris.Line({
  element: 'annual',
    data: json_data,
    xkey: 'y',
  ykeys: ['a'],
  labels: ['Series A']
});
}) 
```

# c# - 为什么在字节数组和字符串之间转换时 Environment.NewLine 不起作用

> ID：13204815
> 
> 赞同：2
> 
> 时间：2012-11-03T00:26:17.903
> 
> 标签：c#, string, sockets, type-conversion

我正在使用 TCP 在服务器和客户端之间发送数据。我发送一个字节流，所以我将字符串转换为字节数组，发送到客户端，然后将其转换回字符串。然后我将此字符串插入到一个多行文本框中，每个文本框`Environment.NewLine`后面都有。但是，没有出现新行。

我尝试了多种将字符串转换为数组并返回字符串的方法，结果都相同。`Environment.NewLine`不起作用。`\n\r`不起作用。

我尝试使用以下技术进行转换：

1.  `Encoding.ASCII.GetString()`和`Encoding.ASCII.GetBytes()`
2.  `Encoding.Unicode.GetString()`和`Encoding.Unicode.GetBytes()`
3.  我还使用了以下网站上的代码：

    `System.Text.UTF8Encoding encoding=new System.Text.UTF8Encoding();`
    [C# 和 VB.NET（以及返回）中的字符串到字节数组转换](http://www.chilkatsoft.com/faq/dotnetstrtobytes.html)

我应该如何来回转换这些字符串以使其正常工作？我的客户目前是 C#，但将是生产中的 java。

编辑：

```
 AttachMessage(ByteArrayToStr(messageInByteArray)); // Doesn't work
    AttachMessage("TEST"); // works

    public void AttachMessage(string data)
    {
        textBox2.Text += data + Environment.NewLine;
    }

    public static string ByteArrayToStr(byte[] arr)
    {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        return encoding.GetString(arr);
    }

    public static byte[] StrToByteArray(string str)
    {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        return encoding.GetBytes(str);
    } 
```

这是一个转换问题，因为它适用于未转换的字符串。

编辑2：

```
public partial class Form1 : Form
{
    public volatile List<TcpClient> connectedClients;
    public volatile bool ServerOn;
    public volatile TcpListener server;
    public delegate void txtBoxDelegate(string data);
    public delegate void tcpCommand(string ipAddress);
    public delegate void chatMessageDelegate(byte[] message);

    public Form1()
    {
        InitializeComponent();
        connectedClients = new List<TcpClient>();
        ServerOn = false;
        server = new TcpListener(System.Net.IPAddress.Parse("127.0.0.1"), 6789);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (!ServerOn)
        {
            Thread serverThread = new Thread(new ThreadStart(TcpServer));
            serverThread.IsBackground = true;
            serverThread.Start();
            lblServerStatus.Text = "The server is On.";
            lblServerStatus.ForeColor = Color.Green;
            lstServerUpdates.Text = String.Empty;
            button1.Text = "Turn server Off";
            ServerOn = true;
        }
        else
        {
            ServerOn = false;
            lstServerUpdates.Text = "Server has been turned off.";
            lblServerStatus.Text = "The server is Off.";
            lblServerStatus.ForeColor = Color.Red;
        }
    }

    public static string ByteArrayToStr(byte[] arr)
    {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        return encoding.GetString(arr);
    }

    public static byte[] StrToByteArray(string str)
    {
        System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
        return encoding.GetBytes(str);
    }

    private void TcpServer()
    {
        printToTextBox("Starting TCP Server.");

        server.Start();
        while (ServerOn)
        {
            if (!server.Pending())
            {
                Thread.Sleep(10);
                continue;
            }
            TcpClient clientSocket = server.AcceptTcpClient();

            NetworkStream stream = clientSocket.GetStream();

            connectedClients.Add(clientSocket);

            Thread clientThread = new Thread(new ParameterizedThreadStart(ClientThreads));
            clientThread.Start(clientSocket);

            byte[] bytes = StrToByteArray("Successfully connected to the server.");

            stream.Write(bytes, 0, bytes.Length);
            printToTextBox("Client successfully connected to server.");
        }

        server.Stop();
    }

    public void ClientThreads(object tcpClient)
    {
        TcpClient clientSocket = (TcpClient)tcpClient;
        NetworkStream clientStream = clientSocket.GetStream();

        byte[] clientMessage = new byte[100];

        while (ServerOn)
        {
            clientStream.Read(clientMessage, 0, clientMessage.Length);
            string message = ByteArrayToStr(clientMessage);
            if (message.Contains("!chat"))
            {
                SendChatMessage(StrToByteArray(message.Substring(5) + Environment.NewLine));
            }
            else if (message.Contains("!start")) 
            {
                StartWebcam(((IPEndPoint)clientSocket.Client.RemoteEndPoint).Address.ToString());
            }
            else if (message.Contains("!stop"))
            {
                StopWebcam(((IPEndPoint)clientSocket.Client.RemoteEndPoint).Address.ToString());
            }
        }
        clientSocket.Close();
        connectedClients.Clear();
    }

    public void printToTextBox(string data)
    {
        if (this.InvokeRequired)
        {
            this.BeginInvoke(new txtBoxDelegate(printToTextBox), data);
            return;
        }
        lstServerUpdates.Text += data + Environment.NewLine;
    }

    public void SendChatMessage(byte[] message)
    {
        foreach (TcpClient client in connectedClients)
        {
            NetworkStream stream = client.GetStream();
            stream.Write(message, 0, message.Length);
            printToTextBox(ByteArrayToStr(message));
        }
    }

    public void StartWebcam(string IPAddress)
    {
        if (this.InvokeRequired)
        {
            this.BeginInvoke(new tcpCommand(StartWebcam), IPAddress);
            return;
        }

        //code to stop webcam for the specified client
        printToTextBox("Starting webcam for IP: " + IPAddress);
    }

    public void StopWebcam(string IPAddress)
    {
        if (this.InvokeRequired)
        {
            this.BeginInvoke(new tcpCommand(StopWebcam), IPAddress);
            return;
        }

        //code to stop webcam for specified client
        printToTextBox("Stopping webcam for IP: " + IPAddress);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:49:53.460

> 我发送字节流

没错，TCP是一个流。它不支持“数据包”之类的东西。就像一行文字。除了在客户端关闭连接之前接收*所有内容*之外，没有明显的方法可以将流转换为 byte[] 。这当然意味着您将显示*所有内容*，然后显示**单个**Environment.NewLine。

重新考虑你的方法。就像实际发送数据中的行尾一样，因此您不必将它们添加到接收器中。通过首先发送对数据包长度进行编码的 4 个字节来人工创建数据包是另一种方法。

# jetty - 使用 Gradle 运行 Eclipse Jetty 9

> ID：13204819
> 
> 赞同：5
> 
> 时间：2012-11-03T00:27:16.933
> 
> 标签：jetty, gradle

使用 Gradle 帮助运行 Jetty 9

我已经看到在[how-to-run-jetty-7-with-specified-war-with-groovy-gradle](https://stackoverflow.com/questions/8266311/how-to-run-jetty-7-with-specified-war-with-groovy-gradle)和[setting_up_embedded_jetty_8_and_spring_mvc_with_maven上运行 Jetty 的参考资料](http://steveliles.github.com/setting_up_embedded_jetty_8_and_spring_mvc_with_maven.html)

但我想在 Gradle 中运行新的 Eclipse Jetty 9。

我试过这个：

```
task jetty8Run(type: JavaExec, dependsOn: assemble) {
    main = "org.eclipse.jetty.server.Server"
    args = ["--port", 8080, "--stop-port", 9876, "--stop-key", 'shutterdown', war.archivePath]
    classpath configurations.jetty8
} 
```

我将其用作依赖项：

```
jettyEclipse "org.eclipse.jetty:jetty-server:$jetty9Version"
jettyEclipse "org.eclipse.jetty:jetty-servlet:$jetty9Version"
jettyEclipse "org.eclipse.jetty:jetty-webapp:$jetty9Version"
jettyEclipse "org.eclipse.jetty:jetty-servlets:$jetty9Version"
jettyEclipse "org.eclipse.jetty:jetty-jsp:$jetty9Version"
jettyEclipse "javax.servlet:jstl:1.2" 
```

在我的 gradle.properties 中：

```
jetty9Version: 9.0.0.M0 
```

但是当我运行时，我收到以下消息

```
An attempt to initialize for well behaving parent process finished. 
```

这是完整的调试堆栈跟踪：

```
 14:22:16.699 [INFO] [org.gradle.process.internal.DefaultExecHandle] Starting process 'command 'C:\usr\bin\Java\jdk1.7\bin\java.exe''. Working directory: C:\usr\git_workspaces\oxygen\code_wash Command: C:\usr\bin\Java\jdk1.7\bin\java.exe -Dfile.encoding=windows-1252 -cp C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.mortbay.jetty\jetty-runner\8.1.5.v20120716\jar\2f8a590e1dcdf75e40cabfc0803c3712b7f04360\jetty-runner-8.1.5.v20120716.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-server\9.0.0.M0\jar\7c6ea0dc0230fba0fe0e2a37490558477b9833c6\jetty-server-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-servlet\9.0.0.M0\jar\5bfecce207651c0f7861255061df32204e1f4ba0\jetty-servlet-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-webapp\9.0.0.M0\jar\b67fc43d6949e1bf66eb479fba3a9b335fa9dd0e\jetty-webapp-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-servlets\9.0.0.M0\jar\1cb5a7222ebec54e5c5b089d5c757ec6ac6506a0\jetty-servlets-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-jsp\9.0.0.M0\jar\5120a9a20405a286d158825257d50812d63493d4\jetty-jsp-9.0.0.M0.jar;C:\Users\mknuts6173c\.m2\repository\javax\servlet\jstl\1.2\jstl-1.2.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.mortbay.jetty\servlet-api\3.0.pre4\jar\d5611e63cefe84a858bb46a4cb1249dcb7ddb830\servlet-api-3.0.pre4.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.servlet\3.0.0.v201112011016\orbit\aaaa85845fb5c59da00193f06b8e5278d8bf3f8\javax.servlet-3.0.0.v201112011016.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.servlet.jsp\2.2.0.v201112011158\orbit\80b4ffe7c26ee97313bea2ddda5835fd38812ee4\javax.servlet.jsp-2.2.0.v201112011158.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\org.apache.jasper.glassfish\2.2.2.v201112011158\orbit\3945afe6a042228a92da320aec3fa1bc1308183b\org.apache.jasper.glassfish-2.2.2.v201112011158.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.servlet.jsp.jstl\1.2.0.v201105211821\orbit\db594f1c8fc00d536f6d135bd7f8a9a99a6b8eea\javax.servlet.jsp.jstl-1.2.0.v201105211821.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.el\2.2.0.v201108011116\orbit\ec8944c11833d84b0283a5afbad0fafb264f86a9\javax.el-2.2.0.v201108011116.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\com.sun.el\2.2.0.v201108011116\orbit\15f7774c3fa514835a371f47c152317704ea411a\com.sun.el-2.2.0.v201108011116.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\org.eclipse.jdt.core\3.7.1\orbit\5b79bfee0852ca685e33cab74496fa3400271b5b\org.eclipse.jdt.core-3.7.1.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-continuation\9.0.0.M0\jar\3031a06840cee834b640ae3d145044fb07aebdc4\jetty-continuation-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-util\9.0.0.M0\jar\7149f92459b45f91b5a0487a5edc300764392ee7\jetty-util-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-io\9.0.0.M0\jar\8dcc24862d1832e0035f893e227d38b656ecef49\jetty-io-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-http\9.0.0.M0\jar\c0a5dc125b94ebc049f60f66b5ce8b17a0d9d917\jetty-http-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-security\9.0.0.M0\jar\b18d3938499c88109283007657e4d89ffcc8aff3\jetty-security-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-xml\9.0.0.M0\jar\5421375311559e23bc77d1e65624f13406018467\jetty-xml-9.0.0.M0.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.activation\1.1.0.v201105071233\orbit\b394a9fbf664ca835452b3ced452710bcf79fd81\javax.activation-1.1.0.v201105071233.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.mail.glassfish\1.4.1.v201005082020\orbit\b707c39fc080529c4a9ffc1df4eac58421133aaf\javax.mail.glassfish-1.4.1.v201005082020.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-jndi\8.1.5.v20120716\jar\f0c40a2e62bf4b78a8c3a34cd8c0a8250b8321c0\jetty-jndi-8.1.5.v20120716.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.transaction\1.1.1.v201105210645\orbit\68e61aa115bbff4e1e2ae4b16feb27d9f805eb6\javax.transaction-1.1.1.v201105210645.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-plus\8.1.5.v20120716\jar\d901ed553709d53b2fa72ade6a06f8bef82f29f5\jetty-plus-8.1.5.v20120716.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\javax.annotation\1.1.0.v201108011116\orbit\964b4bd5e4f40d6497fd302e2e66c4a4257138b3\javax.annotation-1.1.0.v201108011116.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\org.objectweb.asm\3.1.0.v200803061910\orbit\bf952ae43613f460f11ce5f8727cc9e4a7f8d33d\org.objectweb.asm-3.1.0.v200803061910.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty\jetty-annotations\8.1.5.v20120716\jar\aee87dde17b6d6fe18a3bab3f3fc4ae40356ae94\jetty-annotations-8.1.5.v20120716.jar;C:\Users\mknuts6173c\.gradle\caches\artifacts-14\filestore\org.eclipse.jetty.orbit\org.apache.taglibs.standard.glassfish\1.2.0.v201112081803\orbit\2c4baa72af1d3aae3a1e029d4f8ca07498dabbe0\org.apache.taglibs.standard.glassfish-1.2.0.v201112081803.jar org.eclipse.jetty.server.Server --port 8080 --stop-port 9876 --stop-key shutterdown C:\usr\git_workspaces\oxygen\code_wash\target\libs\code_wash.war
    14:22:16.706 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Environment for process 'command 'C:\usr\bin\Java\jdk1.7\bin\java.exe'': {TERM=cygwin, USERPROFILE=C:\Users\mknuts6173c, HISTFILE=C:\usr\configs\scripts/.bash_history, LS_OPTS=--color=auto, JAVA_HOME=C:\usr\bin\Java\jdk1.7, HSTART_HOME=C:\usr\bin\utils\Hstart_4.1-bin, PROGRAMDATA=C:\ProgramData, PROGRAMPATH=C:\usr\bin\CONSOLES\Git, JAVA7_HOME=C:\usr\bin\Java\jdk1.7, GNUPGHOME=c:/Users/mknuts6173c/.gnupg, COMMONPROGRAMFILES=C:\Program Files\Common Files, USR_HOME=C:\usr, PWD=c:/usr/git_workspaces/oxygen/code_wash, JRUBY_HOME=C:\usr\bin\SDK\jruby\jruby-1.6.8, PROCESSOR_REVISION=2a07, LS_OPTIONS=--color=auto, USERDOMAIN=CABLE, GREP_COLOR=7, ALLUSERSPROFILE=C:\ProgramData, PROGRAMW6432=C:\Program Files, JAVA6_HOME=C:\usr\bin\Java\jdk1.6, !::=::\, CONFIGS_HOME=C:\usr\configs, INPUTRC=C:/usr/bin/CONSOLES/Git/etc/inputrc, SESSIONNAME=Console, M2_REPO=C:\usr\repository, PLINK_PROTOCOL=ssh, IDEA_JDK=C:\usr\bin\Java\jdk1.7, HISTSIZE=100, EDITOR=~/AppData/Roaming/GitPad/GitPad.exe, TMP=C:/Users/MKNUTS~1/AppData/Local/Temp, SCALA_HOME=C:\usr\bin\SDK\scala, PSMODULEPATH=C:\Windows\system32\WindowsPowerShell\v1.0\Modules\, LOGONSERVER=\\PAOAKADDCCB02, PATH=/c/Users/mknuts6173c/bin:.:/usr/local/bin:/mingw/bin:/bin:/usr/bin:/c/usr/bin/Java/jdk1.7/bin:/c/usr/bin/SDK/jruby/jruby-1.6.8/bin:/c/usr/bin/SDK/jruby/jruby-1.6.8/lib/ruby/gems/1.8/gems:/c/usr/bin/SDK/gradle/bin:/c/usr/bin/groovy-1.8.6/bin:/c/usr/bin/SDK/maven/bin:/c/usr/bin/SDK/ant/bin:/c/usr/bin/SDK/scala/bin:/c/usr/bin/mobile/android-sdk-windows/platform-tools/:/c/usr/bin/mobile/android-sdk-windows/tools/:/c/usr/bin/CONSOLES/ansicon/x86:/c/usr/bin/utils/Hstart_4.1-bin:/c/usr/configs/scripts:/c/usr/configs/scripts/shell:/c/usr/configs/scripts/cmd:/c/Program Files/Dell/DW WLAN Card:/c/Program Files (x86)/RSA SecurID Token Common:/c/Windows/system32:/c/Windows:/c/Windows/System32/Wbem:/c/Program Files/TortoiseSVN/bin:.:/c/Program Files/TortoiseSVN/bin:/c/Program Files (x86)/Graphviz 2.28/bin
    :/usr/bin/MOBILE/android-sdk-windows/platform-tools, SHELL_HOME=C:\usr\configs\scripts\shell, GRADLE_HOME=C:\usr\bin\SDK\gradle, PROMPT=$P$G, COMMONPROGRAMW6432=C:\Program Files\Common Files, PROCESSOR_LEVEL=6, LESS=-FRSX, LOCALAPPDATA=C:\Users\mknuts6173c\AppData\Local, SCRIPTS_HOME=C:\usr\configs\scripts, COMPUTERNAME=PAGWKL-D5CDBS1, ANSICON_HOME=C:\usr\bin\CONSOLES\ansicon\x86, CORP_PATH=C:\Program Files\Dell\DW WLAN Card;C:\Program Files (x86)\RSA SecurID Token Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Program Files\TortoiseSVN\bin;, LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx, USERNAME=MKnuts6173c, HISTFILESIZE=100, WINDIR=C:\Windows, APPDATA=C:\Users\mknuts6173c\AppData\Roaming, USERDNSDOMAIN=CABLE.COMCAST.COM, PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC, SHLVL=1, MAVEN_HOME=C:\usr\bin\SDK\maven, PROGRAMFILES(X86)=C:\Program Files (x86), CMD_HOME=C:\usr\configs\scripts\cmd, JREBEL_HOME=C:\usr\bin\SERVERS\jrebel, GROOVY_HOME=C:\usr\bin\groovy-1.8.6, DELLCLIENTSYSTEMUPDATEPATH=C:\Program Files (x86)\Dell\ClientSystemUpdate\, TEMP=C:/Users/MKNUTS~1/AppData/Local/Temp, PROMPT_COMMAND=history -n; history -w; history -c; history -r; lastcmd; , HOMEDRIVE=C:, JAVA_OPTS=-ea -Xmx512m -XX:MaxPermSize=512m -Dd2.config.location=file:///C:/xivr/d2/override.properties, TERM_DRIVE=c:/, SYSTEMDRIVE=C:, LOGNAME=MKnuts6173c, =C:=C:\usr\git_workspaces\xivr, JRUBY_GEMS=C:\usr\bin\SDK\jruby\jruby-1.6.8\lib\ruby\gems\1.8\gems, COMMONPROGRAMFILES(X86)=C:\Program Files (x86)\Common Files, PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 42 Stepping 7, GenuineIntel, OLDPWD=c:/usr/bin/SDK/gradle, SHELL=C:/usr/bin/CONSOLES/Git/bin/bash, MAKE_MODE=unix, GLASSFISH_HOME=C:\usr\bin\SERVERS\glassfish3, PROCESSOR_ARCHITECTURE=AMD64, JMETER_HOME=C:\usr\bin\TESTING\apache-jmeter-2.7, OS=MINGW, FP_NO_HOST_CHECK=NO, HOMEPATH=\Users\mknuts6173c, COMSPEC=C:\Windows\system32\cmd.exe, MSYSTEM=MINGW32, ANT_HOME=C:\usr\bin\SDK\ant, GRADLE_OPTS=-Xmx1024M -XX:MaxPermSize=512m, PROGRAMFILES=C:\Program Files, HISTCONTROL=ignoredups:erasedups, HOME=c:/Users/mknuts6173c, CYGWIN_HOME=C:\usr\bin\CONSOLES\cygwin, NUMBER_OF_PROCESSORS=4, SYSTEMROOT=C:\Windows, PUBLIC=C:\Users\Public, ANDROID_HOME=C:\usr\bin\mobile\android-sdk-windows, LESSCHARSET=utf-8}
    14:22:16.722 [DEBUG] [org.gradle.internal.nativeplatform.jna.WindowsHandlesManipulator] Invalid parameter attempting to uninherit stream - child process may remain attached.
    14:22:16.732 [DEBUG] [org.gradle.internal.nativeplatform.jna.WindowsHandlesManipulator] Invalid parameter attempting to uninherit stream - child process may remain attached.
    14:22:16.737 [DEBUG] [org.gradle.internal.nativeplatform.jna.WindowsHandlesManipulator] Invalid parameter attempting to uninherit stream - child process may remain attached.
    14:22:16.744 [INFO] [org.gradle.process.internal.ProcessParentingInitializer] An attempt to initialize for well behaving parent process finished.
    14:22:16.750 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: STARTING
    14:22:16.758 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Waiting until process started: command 'C:\usr\bin\Java\jdk1.7\bin\java.exe'.
    14:22:16.768 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: STARTED
    14:22:16.778 [INFO] [org.gradle.process.internal.DefaultExecHandle] Successfully started process 'command 'C:\usr\bin\Java\jdk1.7\bin\java.exe''
    14:22:16.778 [DEBUG] [org.gradle.process.internal.ExecHandleRunner] waiting until streams are handled...
    14:22:16.987 [ERROR] [system.err] 8.y.z-SNAPSHOT
    14:22:16.999 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: SUCCEEDED
    14:22:17.008 [INFO] [org.gradle.process.internal.DefaultExecHandle] Process 'command 'C:\usr\bin\Java\jdk1.7\bin\java.exe'' finished with exit value 0 (state: SUCCEEDED)
    14:22:17.016 [DEBUG] [org.gradle.logging.internal.DefaultLoggingConfigurer] Finished configuring with level: DEBUG, configurers: [org.gradle.logging.internal.OutputEventRenderer@1398c0b5, org.gradle.logging.internal.logback.LogbackLoggingConfigurer@1193b520, org.gradle.logging.internal.JavaUtilLoggingConfigurer@785850e3]
    14:22:17.023 [DEBUG] [org.gradle.logging.internal.DefaultLoggingConfigurer] Finished configuring with level: DEBUG, configurers: [org.gradle.logging.internal.OutputEventRenderer@1398c0b5, org.gradle.logging.internal.logback.LogbackLoggingConfigurer@1193b520, org.gradle.logging.internal.JavaUtilLoggingConfigurer@785850e3]
    14:22:17.031 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':jetty8Run'
    14:22:17.036 [DEBUG] [org.gradle.execution.taskgraph.DefaultTaskGraphExecuter] Timing: Executing the DAG took 1 mins 17.814 secs
    14:22:17.044 [LIFECYCLE] [org.gradle.BuildResultLogger]
    14:22:17.051 [LIFECYCLE] [org.gradle.BuildResultLogger] BUILD SUCCESSFUL
    14:22:17.062 [LIFECYCLE] [org.gradle.BuildResultLogger]
    14:22:17.069 [LIFECYCLE] [org.gradle.BuildResultLogger] Total time: 1 mins 22.869 secs
    14:22:17.083 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on no_buildscript class cache for build file 'C:\usr\git_workspaces\oxygen\code_wash\build.gradle' (C:\Users\mknuts6173c\.gradle\caches\1.2\scripts\build_6pds00nsngb1qkefk395em9gdo\ProjectScript\no_buildscript).
    14:22:17.102 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on buildscript class cache for build file 'C:\usr\git_workspaces\oxygen\code_wash\build.gradle' (C:\Users\mknuts6173c\.gradle\caches\1.2\scripts\build_6pds00nsngb1qkefk395em9gdo\ProjectScript\buildscript).
    14:22:17.118 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on no_buildscript class cache for settings file 'C:\usr\git_workspaces\oxygen\code_wash\settings.gradle' (C:\Users\mknuts6173c\.gradle\caches\1.2\scripts\settings_6mc489vb6gkj8h6rl06dj51vmb\SettingsScript\no_buildscript).
    14:22:17.131 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on buildscript class cache for settings file 'C:\usr\git_workspaces\oxygen\code_wash\settings.gradle' (C:\Users\mknuts6173c\.gradle\caches\1.2\scripts\settings_6mc489vb6gkj8h6rl06dj51vmb\SettingsScript\buildscript).
    14:22:17.153 [DEBUG] [org.gradle.logging.internal.DefaultLoggingConfigurer] Finished configuring with level: DEBUG, configurers: [org.gradle.logging.internal.OutputEventRenderer@1398c0b5, org.gradle.logging.internal.logback.LogbackLoggingConfigurer@1193b520, org.gradle.logging.internal.JavaUtilLoggingConfigurer@785850e3] 
```

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-28T19:28:37.023

**Gretty** gradle 插件解决问题：[https ://github.com/akhikhl](https://github.com/akhikhl)

它支持开箱即用的 jetty 版本 7、8 和 9。

披露：我是 Gretty 插件的作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T14:42:32.400

你可以试试这个
[https://github.com/Khoulaiz/gradle-jetty-eclipse-plugin](https://github.com/Khoulaiz/gradle-jetty-eclipse-plugin)
它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T22:32:23.550

我对 Gradle JavaExec 任务没有任何建议，但如果您遇到困难并想尝试替代方案 - 您可以尝试使用 Ant 任务启动，并为 fork/spawn 设置适当的设置。

# java - 如何在 Selenium WebDriver 中获取本机记录器

> ID：13204820
> 
> 赞同：21
> 
> 时间：2012-11-03T00:27:18.713
> 
> 标签：java, logging, selenium, webdriver, selenium-webdriver

是否有可能以某种方式获得 Selenium WebDriver 使用的记录器？我想捕获所有发出的命令的记录（例如：打开、等待、单击等）。特别是我正在寻找一个java解决方案，因为我正在将测试导出到junit。

我在他们的网站上找到了这段代码，但是在标准输出上没有显示任何内容

```
 DesiredCapabilities caps = DesiredCapabilities.firefox(); 
    LoggingPreferences logs = new LoggingPreferences(); 
    logs.enable(LogType.DRIVER, Level.FINEST); 
    caps.setCapability(CapabilityType.LOGGING_PREFS, logs); 
    driver = new FirefoxDriver(caps); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-05-07T08:58:26.093

在您使用的驱动程序中启用日志记录，选择您感兴趣的日志类型和日志级别（我使用的是 FirefoxDriver，启用所有类型的日志并收集所有日志消息）

```
LoggingPreferences logs = new LoggingPreferences();
logs.enable(LogType.BROWSER, Level.ALL);
logs.enable(LogType.CLIENT, Level.ALL);
logs.enable(LogType.DRIVER, Level.ALL);
logs.enable(LogType.PERFORMANCE, Level.ALL);
logs.enable(LogType.PROFILER, Level.ALL);
logs.enable(LogType.SERVER, Level.ALL);

DesiredCapabilities desiredCapabilities = DesiredCapabilities.firefox();
desiredCapabilities.setCapability(CapabilityType.LOGGING_PREFS, logs);

WebDriver driver = new FirefoxDriver(desiredCapabilities); 
```

然后，运行测试后，您可以收集日志（我只收集 DRIVER 日志，但您可以对任何类型的日志执行相同操作）

```
Logs logs = driver.manage().logs();
LogEntries logEntries = logs.get(LogType.DRIVER);

for (LogEntry logEntry : logEntries) {
    System.out.println(logEntry.getMessage());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T20:36:55.533

尝试

```
driver.manage().logs() 
```

您将获得 Logs 接口，该接口具有获取日志和日志类型的方法。请参阅[日志接口文档](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/logging/Logs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T00:45:37.090

尝试这个 -

```
import logging
logging.basicConfig(filename = log_filename, level = logging.DEBUG) 
```

参考 - [Python 中的 Selenium 单元测试 - 我的日志文件在哪里？](https://stackoverflow.com/questions/13999581/selenium-unit-tests-in-python-where-is-my-log-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T15:44:36.540

我正在使用 log4j 进行日志记录，因为 utils logger 是最简单、最直接的一种，可以使用（恕我直言）。

POM 依赖项：

```
<dependency>
          <groupId> org.apache.cassandra</groupId>
          <artifactId>cassandra-all</artifactId>
          <version>0.8.1</version>
      </dependency>

      <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-api</artifactId>
          <version>1.6.6</version>
      </dependency>
      <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>jcl-over-slf4j</artifactId>
          <version>1.6.6</version>
          <scope>runtime</scope>
      </dependency>
      <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>jul-to-slf4j</artifactId>
          <version>1.6.6</version>
          <scope>runtime</scope>
      </dependency>
      <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>log4j-over-slf4j</artifactId>
          <version>1.6.6</version>
          <scope>runtime</scope>
      </dependency> 
```

进口如下：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory; 
```

用法：

```
private static Logger log = LoggerFactory.getLogger(classname.class); 
```

然后就这样使用它：

```
logger.info ("butonCLick");
driver.findElement(By.id("blablabla")).click(); 
```

希望这对你有用。

# objective-c - didUpdateToLocation 停止调用

> ID：13204823
> 
> 赞同：0
> 
> 时间：2012-11-03T00:27:45.157
> 
> 标签：objective-c, ios, ios4, core-location

下面的方法

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation; 
```

打了 1 或 2 次就再也没有了……为什么？

```
 -(void) startLocation {
 if (locationManager == nil)
    locationManager = [[CLLocationManager alloc] init];

locationManager.delegate = self;
locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
locationManager.distanceFilter = 10;

[locationManager startUpdatingLocation];
  } 
```

和 ：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
contadorSegundos++;
float diferencaLatitude = 0;
float diferencaLongitude = 0;
NSLog(@"old latitude: %f", oldLocation.coordinate.latitude);
NSLog(@"old longitude: %f", oldLocation.coordinate.longitude);

NSLog(@"new longitude: %f", newLocation.coordinate.longitude);
NSLog(@"old latitude: %f", newLocation.coordinate.latitude);

if(oldLocation) {
if(oldLocation.coordinate.latitude > newLocation.coordinate.latitude)
    diferencaLatitude = oldLocation.coordinate.latitude - newLocation.coordinate.latitude;
else if(newLocation.coordinate.latitude > oldLocation.coordinate.latitude)
    diferencaLatitude = newLocation.coordinate.latitude - oldLocation.coordinate.latitude;
}

if (oldLocation) {

if(oldLocation.coordinate.longitude > newLocation.coordinate.longitude)
    diferencaLongitude = oldLocation.coordinate.longitude - newLocation.coordinate.longitude;
else if(newLocation.coordinate.longitude > oldLocation.coordinate.longitude)
    diferencaLongitude = newLocation.coordinate.longitude - oldLocation.coordinate.longitude;
}

//NSLog(@"dif lat %f", diferencaLatitude); 
```

// NSLog(@"dif long %f", diferencaLongitude);

```
CLLocationCoordinate2D coord;
if ((diferencaLatitude > 1) || (diferencaLongitude > 1)) {
    _emMovimento = YES;
    NSLog(@"em movimento");
}
else {
    if(contadorSegundos > 10) {
    _emMovimento = NO;
    contadorSegundos = 0;
        NSLog(@"parado");
    }
}

coord.longitude = newLocation.coordinate.longitude;
coord.latitude = newLocation.coordinate.latitude;
_latitude = coord.latitude;
_longitude = coord.longitude;

NSLog(@"latitude: %f", _latitude);
NSLog(@"longitude: %f", _longitude);
MKReverseGeocoder *geocoder = [[MKReverseGeocoder alloc] initWithCoordinate:coord];
[geocoder setDelegate:self];
[geocoder start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:17:42.397

这个问题是因为 ARC 自动释放对象 LocationManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:39:37.867

此方法不再使用。您必须使用以下方法：

*   (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations

它返回一个位置数组，你得到最后一个。

[地点 lastObject]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T02:29:46.563

当您使用下面的过滤器时，您是在告诉代表仅更新位置案例用户将其位置更改至少 10 米。不是，将desiredAccuracy`t that what you want? If it`更改为最佳，将距离过滤器更改为none。

`locationManager.delegate = self; locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters; locationManager.distanceFilter = 10;`

# c# - 如何在 Visual Studio 2010 中包含 JScript 或 VBScript 引擎？

> ID：13204825
> 
> 赞同：0
> 
> 时间：2012-11-03T00:27:58.320
> 
> 标签：c#

那么用 C# 和 Jscript 或 Javascript 编写的脚本能否在 Visual Studio 2010 中构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:26:00.337

你想看看[TypeScript](http://www.typescriptlang.org/)。

# android - 设置文本宽度 - Andengine gles 2

> ID：13204827
> 
> 赞同：0
> 
> 时间：2012-11-03T00:28:01.520
> 
> 标签：android, opengl-es-2.0, andengine

我有代码：

```
Text infoText = new Text(560, 10, mFont, "this text is too long to be in one line",  activity.getVertexBufferObjectManager()); 
```

如何设置此文本宽度（例如 200 像素）。当文本比这个宽度长时，它应该换行并在下一行写更多。

我找不到这方面的任何例子。在 Andengine gles 2 中可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:56:57.000

我在 AndEngine 的代码中四处寻找您的问题的解决方案，我想我已经找到了。[FontUtils](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/opengl/font/FontUtils.java)`splitLines`类中的方法似乎正是您所需要的。

它的参数是：您要拆分的文本，用于测量宽度的字体（您将用于文本的字体），一个扩展`List<CharSequence>`以保存新行的对象，拆分的类型（`AutoWrap.WORDS`拆分为字）和每行的最大宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T18:26:23.113

这是 AndEngine 示例中的示例链接

[https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/TextBreakExample.java](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/TextBreakExample.java)

那应该为你做

# scala - scala中的派生订单？

> ID：13204828
> 
> 赞同：2
> 
> 时间：2012-11-03T00:28:33.347
> 
> 标签：scala

我偶尔会发现自己想要一个非常简单的 Ordering[A] 用于一个还没有排序的类。通常是一个元组或一个类的一个字段的投影。以下课程似乎通常这样做

```
case object Ord { 
  case class DerivedOrdering[A,B](fn : B=>A)(implicit o : Ordering[A]) extends Ordering[B] { 
      def compare(a:B, b:B) = o.compare(fn(a), fn(b)) 
  }
} 
```

我还没有在 scala 库中看到它。它在某个地方吗？

用法

```
Ord.DerivedOrdering[Int, (Int, List[Int])]( _._1) 
```

按整数对 (Int, List[Int]) 进行排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T01:23:26.907

您可以做一些事情，这是标准库中的一种方法

```
def by[T, S](f: T => S)(implicit ord: Ordering[S]): Ordering[T] 
```

例如，您可以执行以下操作：

```
implicit val tupleOrdering = Ordering.by[(Int, List[Int]), Int] {
  _._1
} 
```

鲁本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:20:21.700

本身不是，但您可以在呼叫站点这样做。而不是说

```
foo.sorted() 
```

根据您描述的顺序，您可以说

```
foo.sortBy(_._1) 
```

使用您希望的任何投影或更复杂的表达方式，例如

```
foo.sortBy(_._1.toLowercase) 
```

# python - Graphviz：如何插入两个新的链接节点并最小化边缘交叉？

> ID：13204836
> 
> 赞同：5
> 
> 时间：2012-11-03T00:29:42.207
> 
> 标签：python, graph-theory, graphviz, pygraphviz

我有以下图表![图形](../Images/f6f8148766ecc7a03483ac778ce235f6.png)：

如您所见，有两个自然集群。我想找出一种方法将这些集群分成两个图表。

当然，关键步骤是计算正确的拆分。我想插入两个节点 n1 和 n2，链接它们 e(n1，n2)，然后移动它们，最大限度地减少边缘交叉的数量（当然将所有节点/边缘固定在它们所在的位置）。

任何人都可以在这里提供任何帮助吗？我认为graphviz 没有任何东西可以让我做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:16:08.593

我认为您在这里混合了两个不同的任务：一个是图表**分析**，另一个是相同的**可视化**。

Graphviz，顾名思义，是一种图形可视化工具。可视化可以采取多种形式，通常是通过让这些节点彼此靠近并相互连接来“让它看起来不错”，从而减少*视觉*边缘长度。可以利用一些弹簧或重力模型来计算所有节点的最佳位置。其他选项包括圆形或外壳布局。

某种可视化不应该是分析图表的基础。图属性，如平均最短路径长度或聚类系数，独立于任何可视化。

你说你想“最小化边缘交叉的数量”。边缘交叉的数量是可视化的属性，而不是图形的属性！每次让 graphviz 计算布局时，它可能会发生变化，即使图形没有变化。谁说 2d 是您的图形的唯一可能表示形式？只添加一个维度，您将不会有任何边缘交叉。

我建议专注于图形分析。我不知道你是否知道[NetworkX](http://networkx.github.com/)。他们有几十种[算法](http://networkx.github.com/documentation/latest/reference/algorithms.html)来分析你的图表。也许您对 *聚类*和*集团*部分感兴趣。

# jquery - Ajax only IE9 不会提交，没有错误

> ID：13204839
> 
> 赞同：1
> 
> 时间：2012-11-03T00:30:34.743
> 
> 标签：jquery, ajax, internet-explorer, post

这适用于所有浏览器，我见过类似的“IE 9 无法正常工作”。我想这有点不同，因为我正在做一些非常基本的事情。

除了 IE 9 甚至没有将数据发送到我的 mail.php 页面之外，所有浏览器都运行良好。

非常感谢您的帮助。

提交代码：

```
$(function() {  
  $(".submit").click(function() {  
    var name = $("input#name").val();
    var email = $("input#email").val();
    var topic = $("select#topic").val();
    var message = $("textarea#message").val();
    var dataString = 'name='+ name + '&email=' + email + '&topic=' + topic + '&message=' + message;
    $.ajax({  
        type: "POST",  
        url: "http://***.***/***/mail.php",  
        data: dataString,  
        success: function() {
            $('.holder').hide();
            $('#callback').show().append("Your feedback is appreciated, thank you!");
        },
        error:function(){
            alert(dataString);
            $('.holder').hide();
            $('#callback').show().append("There was an error processing your     request, we're very sorry please try again later.");
        }
});  
return false; 

  });  
}); 
```

这是 HTML（我用***来隐藏数据）：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<link rel="stylesheet" href="contactable.css" type="text/css" />
<script src="jquery.js"></script>
</head>

<body>
<div id="contactable">
<div id="contactable_inner"></div>
<div id="carFeedbackForm">
<div id="close"><u>Close</u></div>
<form id="contactForm" action="">
<div id="loading"></div>
<div id="callback"></div>
<div class="holder">

<p><label for="name">Name<span class="red"> * </span></label><br />
<input id="name" class="contact" name="name"/></p>

<p><label for="email">Email <span class="red"> * </span></label><br />
<input id="email" class="contact" name="email" /></p>

<p><label for="topic">Topic&nbsp</label><select id="topic" class="contact" name="topic">
<option>I Like</option>
<option>I Dislike</option>
<option>Cannot login</option>
<option>***(R)</option>
<option>Broken Link</option>
<option>Other</option></select></p><br />

<p><label for="message">Message <span class="red"> * </span></label><br />
<textarea id="message" name="message" class="message" rows="4" cols="30" ></textarea></p><br>

<p class="disclaimer">We are always interested in hearing from you. 
Your feedback will help us improve your online experience.</p>
<p><input class="submit" type="submit" value="Send"/></p>
</div></div></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:56:14.820

尝试为您的帖子参数使用对象表示法：

```
var data = {
    name: $("input#name").val(),
    email: $("input#email").val(),
    topic: $("select#topic").val(),
    message: $("textarea#message").val()
};
$.ajax({  
    ...
    data: data,  
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:34:42.997

我很确定这是您的问题，并且已经看到其他有相同问题的人通过为 url 正确编码数据来解决它。参见[encodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

你的代码

```
 var dataString = 'name='+ name + '&email=' + email + '&topic=' + topic + '&message=' + message; 
```

如果 name 是 "my name" 怎么办，这将在 IE9 中中断，其他浏览器编码字符串会在发送数据之前自动尝试

# android - 线性布局中的图像视图

> ID：13204841
> 
> 赞同：1
> 
> 时间：2012-11-03T00:31:23.593
> 
> 标签：android, android-layout

我正在尝试将 4 个 imageViews 添加到垂直对齐的 LinearLayout 中。我希望四个图像完美堆叠，没有间距。问题是图像上方和下方都有空白区域。也许这与图像缩放的方式有关？

这是我的来源：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.ads.AdView
         xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
         android:id="@+id/add1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         ads:adSize="BANNER"
         ads:adUnitId=""
         ads:loadAdOnCreate="true"
         ads:testDevices="" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/add1" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/menu_graphic_1"/>

             <ImageView
                 android:id="@+id/imageView2"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:src="@drawable/menu_graphic_2" />
            <ImageView
                 android:id="@+id/imageView1"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:src="@drawable/menu_graphic_3" />

             <ImageView
                 android:id="@+id/imageView2"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:src="@drawable/menu_graphic_4" />

        </LinearLayout>

     </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:50:36.637

阿索克是对的。将 android:adjustViewBounds="true" 添加到我的 ImageView 解决了问题:)

# vb.net - 如何制作逆时针时钟

> ID：13204842
> 
> 赞同：-7
> 
> 时间：2012-11-03T00:31:28.447
> 
> 标签：vb.net

我正在尝试使用 Visual Basic 制作一个逆时针时钟。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T04:38:20.813

![在此处输入图像描述](../Images/b35e76f277dbae7c5f442710d470feb2.png)

说明在这里：[反向时钟应用](http://www.abovetopsecret.com/forum/thread61591/pg1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:07:11.627

首先尝试构建一个顺时针时钟，让我们知道您的进度。

# python - 一个 Numpy 错误，看似与抛出它的脚本无关，但不会出现在调试器上

> ID：13204843
> 
> 赞同：2
> 
> 时间：2012-11-03T00:31:33.967
> 
> 标签：python

所以我有`foo`一个普通浮点数的普通元组。在我的脚本中调用 map 会莫名其妙地引发所有事情的 Numpy 错误，即使代码没有任何问题。进入调试器并执行完全相同的代码不会产生预期的错误。有谁知道会发生什么？我完全不知所措。这怎么可能？

此外，对于那些要求使用最小脚本来重现问题的人：我无法使用简短的片段来重现它，而且我无法发布整个脚本，因为它是用于家庭作业的。

```
Traceback (most recent call last):
  File "py_code\ps4-code.py", line 240, in <module>
    doPairMatch(transA, transB, tapoints, tbpoints, 1, ransacTranslate)
  File "py_code\ps4-code.py", line 217, in doPairMatch
    print map(int, foo)
TypeError: expected a single-segment buffer object
>>> import pdb;pdb.pm()
> c:\homework\cs4495\ps4\py_code\ps4-code.py(217)doPairMatch()
-> print map(int, foo)
(Pdb) print foo
(603.0, 437.0)
(Pdb) print map(int, foo)
[603, 437]
(Pdb) print type(foo)
<type 'tuple'>
(Pdb) print int, map, type
<type 'int'> <built-in function map> <type 'type'>
(Pdb) map(type, foo)
[<type 'float'>, <type 'float'>]
(Pdb) 
```

编辑：好吧，至少我知道这是怎么可能的。问题似乎是在垃圾收集期间发生的，这就是为什么错误随机出现在不相关的代码部分中的原因。据推测，gc 在 OpenCV 的某个地方触发了一个错误，导致一切崩溃。

```
Exception TypeError: 'expected a single-segment buffer object' in 'garbage colle
ction' ignored
Fatal Python error: unexpected exception during garbage collection

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T00:06:18.207

我从不同的原因知道这种异常：一个有问题的 C 扩展模块（OpenCV？）。如果在执行此模块的某些 C 函数期间引发了 TypeError，但该模块缺少检测它的代码，则在执行 C 函数之后它可以保持未被检测到。稍后它会突然出现。

我无法知道我是否正确，但一个很好的指标是在“map(int, foo)”之前的几行是否调用了这样的 C 扩展模块。确定的一种方法是在“map(int, foo)”之前放置另一行来检测遗留异常。事实证明，它可以是例如“all([])”。如果你在 "all([])" 行得到 TypeError，那么显然它是一个遗留异常。

# php - 如何在 HTML 标签中打印 php 代码？

> ID：13204848
> 
> 赞同：0
> 
> 时间：2012-11-03T00:32:22.193
> 
> 标签：php, html, echo

你好我有这个变量是字符串。

> $this->product_output_html = <<< HTML
> 
> 一些 HTML 代码
> 
>   HTML;

我希望在他的类测试中添加一个像这样的 php for 循环

> if ($admin->errors) { foreach ($admin->errors as $error) { echo ''.$error.''; } }

我试图添加但不工作。我在 class="test"> 之后和测试之前添加了 '' 但仍然无法正常工作。我做错了什么？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:39:24.797

代替

```
echo ".$error."; 
```

和

```
echo $error; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:43:11.790

尝试类似的东西

```
$this->product_output_html = 'Start of html code as a string';
if ($admin->errors) {
  foreach ($admin->errors as $error) {
    $this->product_output_html .= '<br />'.$error;
  }
}
$this->product_output_html .= '<br />End of html code as a string';
echo $this->product_output_html; 
```

# android - 当您在 Android 上调用 exit 时会发生什么？

> ID：13204855
> 
> 赞同：1
> 
> 时间：2012-11-03T00:34:23.607
> 
> 标签：android, android-lifecycle

[这个](https://gamedev.stackexchange.com/questions/42059/android-loading-screens-blocking-good-practice)讨论（在评论中）提出了一个有趣的问题：

在 Android 应用程序中调用的结果是什么`exit`（关于 android 生命周期），这会损坏操作系统吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:58:10.910

> 在 Android 应用程序中调用 exit 的结果是什么（关于 android 生命周期）

System.exit()的[Android 文档](http://developer.android.com/reference/java/lang/System.html#exit%28int%29)说它“导致 VM 停止运行并且程序退出”。我刚刚尝试过，它似乎杀死了调用 System.exit() 的应用程序的进程。

在[名为 Activity.finish() x System.exit 的 Android 开发者线程](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Y96KnN_6RqM)中，有人证实“System.exit() 会杀死你的整个进程”。

Dianne Hackborn aka hackbod 更进一步“明确一点：强烈建议不要使用 System.exit()，这可能会导致与系统的交互不佳。请不要将您的应用程序设计为需要它。”

> 那会损坏操作系统吗？

它不应该损坏操作系统。Android 只会让您的应用程序终止其进程，而不是系统上的任何其他进程。当您的应用程序结束时，它将保持系统的其余部分运行。

我还通过运行两个应用程序并让其中一个调用 System.exit() 来验证这一点。另一个不受影响。

# c++ - 用于 OpenSceneGraph 的 MiniMap/PIP

> ID：13204861
> 
> 赞同：2
> 
> 时间：2012-11-03T00:35:12.107
> 
> 标签：c++, openscenegraph

所以我正在尝试创建一个迷你地图/PIP。我有一个在 Qt Widget 中运行的现有程序。我有一个类 NetworkViewer，它扩展了 CompositeViewer。在 NetworkViewer 的构造函数中，我调用了以下函数。请注意，根是在其他地方填充的场景。

```
 void NetworkViewer::init() {
  root = new osg::Group() ;

  viewer = new osgViewer::View( );
  viewer->setSceneData( root ) ;

  osg::Camera* camera ;
  camera = createCamera(0,0,100,100) ;
  viewer->setCamera( camera );
  viewer->addEventHandler( new NetworkGUIHandler( (GUI*)view ) ) ;
  viewer->setCameraManipulator(new osgGA::TrackballManipulator) ;
  viewer->getCamera()->setClearColor(
    osg::Vec4( LIGHT_CLOUD_BLUE_F,0.0f));
  addView( viewer );

  osgQt::GraphicsWindowQt* gw =
    dynamic_cast( camera->getGraphicsContext() );
  QWidget* widget = gw ? gw->getGLWidget() : NULL;

  QGridLayout* grid = new QGridLayout( ) ;
  grid->addWidget( widget );
  grid->setSpacing(1);
  grid->setMargin(1);
  setLayout( grid );

  initHUD( ) ;
} 
```

创建相机功能如下：

```
osg::Camera* createCamera( int x, int y, int w, int h ) {
  osg::DisplaySettings* ds = osg::DisplaySettings::instance().get();
  osg::ref_ptr traits
    = new osg::GraphicsContext::Traits;
  traits->windowName = "" ;
  traits->windowDecoration = false ;
  traits->x = x;
  traits->y = y;
  traits->width = w;
  traits->height = h;
  traits->doubleBuffer = true;
  traits->alpha = ds->getMinimumNumAlphaBits();
  traits->stencil = ds->getMinimumNumStencilBits();
  traits->sampleBuffers = ds->getMultiSamples();
  traits->samples = ds->getNumMultiSamples();

  osg::ref_ptr camera = new osg::Camera;
  camera->setGraphicsContext( new osgQt::GraphicsWindowQt(traits.get()) );

  camera->setViewport( new osg::Viewport(0, 0, traits->width, traits->height) );
  camera->setViewMatrix(osg::Matrix::translate(-10.0f,-10.0f,-30.0f));
  camera->setProjectionMatrixAsPerspective(
    20.0f,
    static_cast(traits->width)/static_cast(traits->height),
    1.0f, 10000.0f );
  return camera.release();
} 
```

我一直在查看几个相机示例并寻找解决方案一段时间但无济于事。我真正想要的是作为我的主摄像头的背景，它占据了大部分屏幕并显示场景图，而我的小地图出现在右下角。它具有与主摄像机相同的场景，但覆盖在其之上，并且具有自己的一组用于选择等的控件，因为它具有不同的功能。

我在想，也许通过添加另一台相机作为奴隶我可以做到这一点：

```
 camera = createCamera(40,40,50,50) ;
      viewer->addSlave(camera) ;
```

但这似乎不起作用。如果我禁用另一台相机，我确实会看到一个清晰的区域，表明该相机应该在（其视口）中渲染，但这无济于事。我玩过渲染顺序，认为这可能无济于事。

有任何想法吗？制作这种小地图的最佳方法是什么？我究竟做错了什么？无论如何也要使小地图的渲染为圆形而不是矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:47:19.730

我个人没有使用 OpenSceneGraph，所以我无法就您的代码向您提供建议。我认为最好是在官方论坛中询问。但我对小地图有一些想法：

首先，您必须指定小地图的基本特征。您是希望它强调场景的某些元素，还是只显示场景（即类似 RTS 的小地图与场景的简单顶部显示）？

我假设您不想强调场景的某些元素。我还假设您的主摄像头并不是真正的“小地图友好”。因此，最简单的方法是创建具有以下属性的相机：

*   方向 = (0,-1,0)（Y 为纵轴）
*   模式 = 正交
*   位置 = 由您想要的控制，例如您的主摄像头

现在，对于图像的整合。你可以：

*   如果您的小地图是矩形的，请将小地图相机的视口设置为您想要的。
*   将小地图渲染为纹理 (RTT)，然后通过额外的渲染通道将其混合。

您还可以搜索其他引擎论坛（如 Irrlicht 和 Ogre），看看他们是如何制作小地图的。

# javascript - 关闭混乱

> ID：13204863
> 
> 赞同：2
> 
> 时间：2012-11-03T00:35:28.233
> 
> 标签：javascript

我对这个 Closure 事情有些困惑。我在下面有两个单独的代码，它们看起来相似，但它们的输出不同。

```
function setup(x) {
var array = [];
for(var i=0;i<arguments.length;i++){
    array[i]= arguments[i];
}
return array;
}
console.log(setup('a','b'));  // will output ["a","b"] 

--------------
function f() {
var i, array = [];
for(i = 0; i < 3; i++) {
    array[i] = function(){
        return i;
    }
}
return array;
}

var a = f();                 
console.log(a());       //output: [function(),function(),function()]
console.log(a[0]());    //output: 3 //same output in a[1]() and a[2]() calls as well 
```

现在我的问题是，为什么输出不同？上面的两个代码都返回一个数组。在第一个代码中，它正确打印数组中的所有元素，而在第二个代码中，为什么不打印 [1,2,3]？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:43:02.673

在您的第二个示例中，您正在`3`循环中创建函数，但所有函数都在同一个变量范围内创建，因此它们都引用并返回同一个`i`变量的值。

因此，`i`函数返回的值代表函数被调用时的值。因为您在循环*之后*`i`调用它们，所以值为is `3`，所以这就是返回的值。

这就是闭包的意思。这些函数“关闭”了存在于创建它们的变量范围中的变量。它们不会关闭变量的*值*，而是关闭变量本身，因此它们始终获取变量的当前状态。

对于要引用 的不同值的`i`每个函数，需要在具有自己唯一性的单独变量范围中创建每个函数`i`。

因为在 JavaScript 中创建新变量范围的唯一方法是调用函数，所以您需要在新函数调用中创建每个函数。

```
function makeFunction(j) {
    return function(){
        return j;
    };
}

function f() {
    var i, array = [];
    for(i = 0; i < 3; i++) {
        array[i] = makeFunction(i);
    }
    return array;
} 
```

所以在这里我做了一个新的函数，叫做`makeFunction`. 它接收一个参数，并返回一个引用并返回该参数的新函数。

因为每次调用`makeFunction`都会创建一个新的唯一变量范围，所以返回的每个函数都将引用其自己的唯一`j`变量，因此将返回被调用`j`时存在的值*（除非您的函数修改**了 ，如果您愿意，它可以这样做）*。`makeFunction`*`j`*

请注意，`j`为了清楚起见，我使用了变量名称。您也可以使用`i`，或其他名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:50:40.027

在 JavaScript 中，您有函数*语句*和函数*表达式*。第一个声明命名函数，后者评估为命名或匿名函数。您正在使用函数表达式。

我认为您想要做的是*调用*表达式。您所要做的就是立即调用返回的函数`i`。

```
function f() {
    var i, array = [];
    for (i = 0; i < 3; i++) {
        // The extra parentheses around the function are unnecessary here.
        // But this is more idiomatic, as it shares syntax with how function
        // expressions are introduced in statements.
        // I.e. you could just copy-paste it anywhere.
        array[i] = (function () {
            return i;
        })(); // don't rely on automatic semicolon insertion
    }
    return array;
} 
```

另请注意，在您有问题的示例中，所有闭包都返回`3`，因为它们都捕获相同的 variable `i`。

编辑：为了使上一段更清楚，如果你真的想要有 3 个不同的闭包，你必须为每个闭包创建一个新的范围。与其他语言不同，Javascript 不会仅仅通过打开一个块来创建范围。它只在函数中创建范围。这里有两种方法：

```
function f() {
    var i, array = [];
    for (i = 0; i < 3; i++) {
        // With a parameter in an inner function
        array[i] = (function (n) {
            return function () {
                // A new n is captured every time
                return n;
            };
        })(i);
    }
    return array;
}

function f() {
    var i, array = [];
    for (i = 0; i < 3; i++) {
        array[i] = (function () {
            // With a variable in an inner function
            var n = i;
            return function () {
                // A new n is captured every time
                return n;
            };
        })();
    }
    return array;
} 
```

然而，下一个例子是**错误**的，因为即使`n`在`for`块中声明，它也好像它已在函数顶部声明并且仅在`for`块中初始化。请记住，这是 JavaScript，不是 Java，不是 C，不是 C#，不是 <whatever 括号内的语言>：

```
function f() {
    var i, array = [];
    for (i = 0; i < 3; i++) {
        var n = i;
        array[i] = function () {
            return n;
        };
    }
    return array;
} 
```

等效代码：

```
function f() {
    var i, array = [];
    var n;
    for (i = 0; i < 3; i++) {
        n = i;
        array[i] = function () {
            return n;
        };
    }
    return array;
} 
```

# java - 为什么普通 servlet 和 Jersey servlet 的输出缓冲行为不同？

> ID：13204865
> 
> 赞同：1
> 
> 时间：2012-11-03T00:35:31.390
> 
> 标签：java, servlets, jetty, jersey, embedded-jetty

响应期间使用的输出缓冲行为和块数会根据响应是来自普通 servlet 还是来自 Jersey 容器 servlet 的资源而变化。

我正在使用一个虚拟 servlet 和一个虚拟 Jersey 资源进行测试。两者都打印了 256 个字符的倍数（255 个“a”和 1 个“\n”，这些并不重要，只是随机选择）。

Jetty 有一个 32kB 的默认输出缓冲区，当输出内容超过该大小并且没有明确设置 Content-Length 时，Jetty 将使用分块传输编码。

但是，当从 Jersey 资源进行相同的测试时，无论输出大小如何，Jetty 总是使用分块传输编码，并且块被拆分为 16kB 而不是 32kB。

我浏览了两者的来源，但找不到原因。如果有人能分享他们对此的见解，我真的很高兴。

**Servlet 测试代码**

```
public class Test extends HttpServlet {
    private static final long serialVersionUID = 1L;

    private String baseString;

    public Test() {
        super();
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 255 ; i++)
            sb.append("a");
        sb.append("\n");
        baseString = sb.toString();
     }

     private void writeOutput(int count, PrintWriter writer) {
        for (int i = 0; i<count; i++) {
            writer.print(baseString);
        }
     }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        response.setCharacterEncoding("UTF-8");
        writeOutput(Integer.parseInt(request.getParameter("count")),response.getWriter());
     }

} 
```

**泽西资源测试代码**

```
@Path("/")
public class JerseyTest {

private String baseString;

public JerseyTest() {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < 255 ; i++)
        sb.append("a");
    sb.append("\n");
    baseString = sb.toString();
}

@GET
@Produces("text/html;charset=UTF-8")
public String get(@Context HttpServletResponse response,@QueryParam("count")int count) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i<count; i++) {
        sb.append(baseString);
    }
    return sb.toString();
}   
} 
```

**设置**

*   嵌入式泽西岛 8.1.7.v20120910
*   Jersey 1.14（使用 Jersey Servlet 容器）

**count=1 的响应（即输出大小 256 字节）**

*   Servlet：内容长度集
*   Jersey：未设置 Content-Length，使用分块编码，1 个块

**count=128 的响应（即输出大小 32kB）**

*   Servlet：未设置 Content-Length，使用分块编码，1 个块
*   Jersey：未设置 Content-Length，使用分块编码，2 个块（拆分为 16kB）

**count=256 的响应（即输出大小 64kB）**

*   Servlet：未设置 Content-Length，使用分块编码，2 个块
*   Jersey：未设置 Content-Length，使用分块编码，4 个块

有人对这种差异的原因有任何想法吗？

**更新 1：** Jersey 设置了 8kB 的内部缓冲区大小，但这仍然不能解释我看到的 16kB 行为。如果 Jersey 每 8kB 刷新，那么我应该看到 8kB 块而不是 16kB（这种行为存在于普通 servlet 案例中）

# java - 应用程序不会从 PHP 网络服务中检索 JSON 数据。网络服务工作正常

> ID：13204867
> 
> 赞同：0
> 
> 时间：2012-11-03T00:36:08.063
> 
> 标签：java, android

我的应用似乎没有正确地从 PHP 网络服务中提取 JSON 数据。

访问 web 服务的函数以从数据库中获取所有数据记录会正确生成 JSON，但我的应用程序无法获取该数据并且似乎以`NullPointerException`.

**LogCat 向**我发出这个问题：

**更新：**

注意到在以下错误之前发生的黄色错误：

> W/System.err(835): org.apache.http.conn.HttpHostConnectException: 连接到 http:// localhost 被拒绝

如果我无法连接到本地主机上的 Web 服务，那么我不会将 JSON 传送到我的应用程序。但是为什么它会拒绝连接到本地主机呢？

> W/System.err(1159)：在 com.example.myfirstapp.MainActivity$LoadAllCars.doInBackground(MainActivity.java:113) W/System.err(1159)：在 com.example.myfirstapp.MainActivity$LoadAllCars.doInBackground( MainActivity.java:1) E/AndroidRuntime(1159)：在 com.example.myfirstapp.MainActivity$LoadAllCars.doInBackground(MainActivity.java:116) E/AndroidRuntime(1159)：在 com.example.myfirstapp.MainActivity$LoadAllCars。 doInBackground(MainActivity.java:1) E/WindowManager(1159): 在 com.example.myfirstapp.MainActivity$LoadAllCars.onPreExecute(MainActivity.java:103)

*第 113 行：* `JSONObject json = jParser.makeHttpRequest(url_all_cars, "GET", params);` *第 116 行：* `Log.d("All Cars: ", json.toString());`

**主要活动**

```
package com.example.myfirstproject;

//imports

public class MainActivity extends ListActivity implements OnItemClickListener {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> carsList;

    // url to get all products list
    private static String url_all_cars = "http://localhost/webservice/get_all_cars.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CARS = "cars";
    private static final String TAG_NAME = "name";

    // products JSONArray
    JSONArray cars = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Hashmap for ListView
        carsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllcars().execute();

        // Get listview
        ListView lv = getListView();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllcars extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Loading cars. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_cars, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All cars: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    cars = json.getJSONArray(TAG_CARS);

                    // looping through All Products
                    for (int i = 0; i < cars.length(); i++) {
                        JSONObject c = cars.getJSONObject(i);

                        // Storing each json item in variable
                        String title = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        carsList.add(map);
                    }
                } else {
                    // no products found
                    pDialog = new ProgressDialog(MainActivity.this);
                    pDialog.setMessage("No cars found");
                    pDialog.setIndeterminate(false);
                    pDialog.setCancelable(false);
                    pDialog.show();
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            MainActivity.this, carsList,
                            android.R.id.list, new String[] {TAG_NAME},
                            new int[] { R.id.title });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }
    }
} 
```

**编辑**

**JSON解析器：**

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:12:59.993

好吧，如果你在这一行得到一个空指针异常

JSONObject json = jParser.makeHttpRequest(url_all_cars, "GET", params);

那么其中 1 个或多个东西必须为空。jParser 被实例化，url 字符串也是，参数是一个列表，但是列表中没有任何内容。查看 jParser 内部，看看该参数列表发生了什么。你需要它们吗？它需要它们吗？

**编辑**

因此，jParser 正在将您的列表（为空）转换为带有字符串生成器的字符串。这是返回一个空的刺痛。

所以当它发送到你的服务器时你的 url 看起来像这样

```
http://localhost/webservice/get_all_cars.php? 
```

所以正常的网址，但上面有一个问号。那是对的吗？

从您的 httpresponse 记录状态码和状态原因是有意义的，这样您就可以看到服务器正在响应什么，您会这样做......

```
Log.d("Class Name", "Status code: " + httpResponse.getStatusLine().getStatusCode() + " Status Phrase: " + httpResponse.getStatusLine().getReasonPhrase()); 
```

**编辑**

url 设置为“localhost”，所以我认为它是在设备内部而不是在您的服务器上查找。改为输入服务器的ip

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T02:24:45.817

我认为你的问题可能是你从来没有把任何东西放进去`params`。它只是一个空的`List`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T18:22:14.523

问题在这里：

`private static String url_all_cars = "http://localhost/webservice/get_all_cars.php";`

无法使用`localhost`，因为模拟手机本身是`localhost`/`127.0.0.1`

您需要更改`localhost`为`10.0.2.2`：

`private static String url_all_cars = "http://10.0.2.2/webservice/get_all_cars.php";`

# android - RemoteViews 未使用 getDrawingCache 正确保存到位图

> ID：13204868
> 
> 赞同：2
> 
> 时间：2012-11-03T00:36:14.090
> 
> 标签：android, image, view, bitmap, remoteview

我想将作为 RemoteViews 的 Notification contentview 绘制到位图中。

我正在使用这段代码：

```
private Bitmap getImageOfRemoteViews(RemoteViews rv) {
  try {
        View view = rv.apply(mContext, null);
        view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
        view.setDrawingCacheEnabled(true);
        view.buildDrawingCache(true);
        Bitmap screenshot = view.getDrawingCache(true);
        return screenshot;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

视图被构建到位图中，但不是整个视图，缺少正确的部分。

应该是：http: [//imgur.com/vyFdy](http://imgur.com/vyFdy)

原样：http: [//imgur.com/DnTsC](http://imgur.com/DnTsC)

通过手动设置布局，如：

```
view.layout(0, 0, 720, 250); 
```

仅添加背景颜色，但不添加 2 个文本视图（此处：“1:12”和“信息”）

有人知道如何解决这个问题吗？

# jquery - jquery可排序保持在容器边界内

> ID：13204871
> 
> 赞同：9
> 
> 时间：2012-11-03T00:36:41.720
> 
> 标签：jquery, html, css, jquery-ui-sortable

请看下面的小提琴：

[http://jsfiddle.net/ujdsu/](http://jsfiddle.net/ujdsu/)

HTML，简单的无序列表：

```
<ul class="sortable">
    <li>first item</li>
    <li>second item</li>
    <li>third item</li>
    <li>fourth item</li>
    <li>fifth item</li>
</ul> 
```

jQuery：

```
$(function() {      
   $( ".sortable" ).sortable({
       axis: 'y' 
   }).disableSelection();
});​ 
```

CSS：

```
ul{
    margin:20px 0 0 20px;
    border:1px solid #000;
    width:70%;
    overflow:hidden;
    position:relative;
}
li{
    background:#ccc;
    border-top:1px solid #000;
    padding:10px 5px;
    cursor:move;
}   
li:first-child{
    border-top:0;
} 
```

​</p>

默认情况下，您可以将项目拖到其容器之外。我已经通过在容器中添加“溢出：隐藏”来解决这个问题，但是，您仍然可以将一个项目拖到容器外，您只是看不到外面的部分。请看下面的屏幕截图：

![在此处输入图像描述](../Images/af4e8892f397711cd2bd89b5afe90ea3.png)

我想要实现的是，用户一旦碰到容器的顶部或底部边缘就无法进一步移动该项目，因此您不会看到上面屏幕截图中显示的结果。理想情况下，“第三项”会碰到顶部边缘并且不会进一步移动。

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-03T01:00:37.020

您需要传递[遏制](http://api.jqueryui.com/sortable/#option-containment)选项：

```
$(function() {      
    $( ".sortable" ).sortable({
       axis: 'y',
       containment: "parent" 
    }).disableSelection();
});​ 
```

这是一个带有代码的工作示例：http: [//jsfiddle.net/VzpBq/](http://jsfiddle.net/VzpBq/)

[Sortable jQueryUI API](http://api.jqueryui.com/sortable)`containment`中的选项定义：

> 定义可排序项目在拖动时被约束的边界框。

# objective-c - 你如何检查一个 NSInteger 是否大于另一个 NSInteger？

> ID：13204875
> 
> 赞同：0
> 
> 时间：2012-11-03T00:37:01.477
> 
> 标签：objective-c, c, cocoa, nsstring, nsinteger

我正在尝试编写代码来检测一个整数是否大于另一个整数。这可能吗？

这是我到目前为止所做的。

```
if (NumCorrect >> NumWrong) {
    btnCool.title = @"Awww";
}

else {
    btnCool.title = @"Cool!";
} 
```

它所做的一切都是为了其他

**编辑：**

```
NSString *numCorrect = [NSString stringWithFormat:@"%d",NumCorrect];
NSString *numWrong = [NSString stringWithFormat:@"%d", NumWrong];
lblWrong.text = numWrong;
lblCorrect.text = numCorrect;
if (NumCorrect > NumWrong) { 
    btnCool.title = @"Awww"; 
} else { 
    btnCool.title = @"Cool!"; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:37:49.573

使用单`>`

```
if (NumCorrect > NumWrong) {
    btnCool.title = @"Awww";
} else {
    btnCool.title = @"Cool!";
} 
```

Double`>>`是移位操作。您将变量 N​​umCorrect NumWrong 字节数的二进制表示中的每一位都向右移动。在几乎所有情况下，这将返回一个非 0 的数字，然后将其视为一个`false`值，因此执行 else 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:41:32.143

几乎完美 - 只需取下其中一个`>`。 `>>`并且`<<`用于“位移”，这是编程早期的一种奇怪的保留。你不会经常使用它们。你真正想要的是`>`and `<`，它用于测试数字是大于彼此还是小于彼此。

此外，您可能还记得在数学课上 ≥ 和 ≤（大于或等于和小于或等于）也是有用的运算。因为大多数键盘上没有符号，所以 C 和 Xcode 使用`>=`and`<=`代替。

最后，您可能已经知道这一点，但是要检查两个数字是否完全相等，您可以使用`==`（因为`=`用于设置变量的内容）。

希望这会有所帮助！

# c - 将逗号分隔的字符串转换为双精度

> ID：13204876
> 
> 赞同：0
> 
> 时间：2012-11-03T00:37:06.633
> 
> 标签：c, arrays, string, comma

我想知道是否可以将像“102.33, 220.44”这样的字符串转换为C中的double[]，如果可以，它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:59:57.027

一种方法是使用带有and作为分隔符的[strtok ，并使用](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)[strtod](http://www.cplusplus.com/reference/clibrary/cstdlib/strtod/)将每个标记转换为双精度，然后可以将其存储在数组中。您应该能够通过对 strtok 的示例代码进行一些小的修改来做到这一点：`' '``','`

```
int main ()
{
  char str[] ="- This, a sample string.";
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.-");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, " ,.-");
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T02:08:16.233

您可以使用`sscanf`或`strtod`（`strtok`不是必需的）。如果您想获取字符串中的下一个数字（即示例中的 220.44），您最好使用`strtod`获取第一个数字，然后跳过逗号并重复。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    char *p;
    double val;
    char str[] = "  102.33, 220.44";

    int n = sscanf(str, "%lf", &val);
    printf ("Value = %lf  sscanf returned %d\n", val, n);

    val = strtod(str, &p);
    printf ("Value = %lf  p points to: '%s'\n", val, p);

    return 0;
} 
```

# iphone - 通过网络应用获取 iPhone ID？

> ID：13204883
> 
> 赞同：0
> 
> 时间：2012-11-03T00:38:01.890
> 
> 标签：iphone, web

我正在为 iPhone 制作一个网络应用程序。我有一些用户可以设置的设置，但我不确定如何保存该 iPhone 的设置。我不希望用户必须注册一个帐户。有没有办法获得 iPhone 的唯一标识符（序列号等）。所以基本上，什么是唯一标识符，我如何使用 HTML5 网络应用程序检索它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:03:50.257

这是一种将 UUID（通用唯一 ID）放入 iPhone 应用程序中的 NSString 的方法：

```
CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);
CFStringRef uuidStr = CFUUIDCreateString(kCFAllocatorDefault,uuid);
NSString* uniqueIdentifier = (__bridge NSString*)uuidStr; 
```

来自 Apple 的文档：

> UUID（通用唯一标识符），也称为 GUID（全局唯一标识符）或 IID（接口标识符），是保证唯一的 128 位值。UUID 在空间和时间上都是唯一的，方法是结合生成它的计算机的唯一值（通常是以太网硬件地址）和表示自 1582 年 10 月 15 日 00:00 以来 100 纳秒间隔数的值:00。

至于将字符串发送到您的服务器，那么在 HTTP POST 中发送它怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:09:55.353

看看[http://whatismyudid.com](http://whatismyudid.com) ，如果您的网站提供用户接受的配置文件，那么网站甚至可以读取 UDID ...

# c++ - 面试——C++（如何输出五个“20”）

> ID：13204890
> 
> 赞同：0
> 
> 时间：2012-11-03T00:38:56.523
> 
> 标签：c++

> **可能重复：**
> [通过仅更改一个字符来修复损坏的循环](https://stackoverflow.com/questions/2503376/fixing-a-broken-loop-by-changing-exactly-one-character)

这是一道面试题。我有下面的代码。如何通过更改或添加代码的*一个*字符来输出五个“20”？

我可以想到一种解决方案，即“-i < n”。还有其他解决方案吗？

```
 int i , n = 5;
    for (i = 0; i < n; i--)
    {
        cout << "20" << endl;
    } 
```

# coffeescript - AngularUI Datepicker 重置 ngModel 上的时间

> ID：13204891
> 
> 赞同：0
> 
> 时间：2012-11-03T00:39:14.077
> 
> 标签：coffeescript, angularjs, jquery-ui-datepicker

我已经连接了 AngularUI Datepicker，它工作得很好，除了当您在日历上选择不同的日期时，它会重置通过 ngModel 属性附加到它的 ISO 日期的时间部分。我该如何设置它以保持时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:38:57.313

我通过在指令中充实它来解决我的问题。

```
input(ng-model="event.date_started", j-datepicker)
div(ng-model="event.date_started", j-datepicker) 
```

* * *

```
.directive 'jDatepicker', ->
    require: 'ngModel'
    link: (scope, elem, attrs, ngModel) ->
        # check if elem is an input so when the input
        # gains focus it doesn't spawn another calender
        if not elem.is('input')
            elem.datepicker
                onSelect: (dateText) ->
                    # get the original ISO date and new date
                    oldDate = new Date ngModel.$modelValue
                    newDate = new Date dateText

                    # set the new month and day onto the original ISO date
                    oldDate.setUTCMonth newDate.getUTCMonth()
                    oldDate.setUTCDate newDate.getUTCDate()

                    scope.$apply () ->
                        # update the model with the new info
                        ngModel.$setViewValue oldDate.toISOString()

        ngModel.$render = () ->
            date = new Date ngModel.$viewValue

            # set the default highlighted date on the calender
            elem.datepicker 'setDate', date

            # this renders the date value on the 
            # input element in the format I want
            elem.val date.toDateString() 
```

# mongoid - 没有embedded_in关系的Mongoid保存静默失败

> ID：13204896
> 
> 赞同：4
> 
> 时间：2012-11-03T00:40:05.733
> 
> 标签：mongoid, embed

我在 Mongoid 中嵌入了一个文档。

```
class A < B
  include Mongoid::Document
  embeds_one :shipping_address, class_name: 'Address' 
```

就我而言，我省略了反比关系：

```
class Address
   # embedded_in :A 
```

为什么会这样，尽管 API 工作正常且完全符合预期：

```
 address = A.address
 address.zip = 1234

 a.changed? #true

 address.save

 a.changed? #false 
```

**文件实际上没有保存**？

如果我返回`embedded_in`语句，则保存实际上可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:10:58.847

我对 Mongoid 来源的理解不是最好的，所以不要把我踢得太硬。

我假设 Mongoid 在这方面类似于 ActiveRecord。使用 ActiveRecord，定义 a`:has_many`不会更改父对象，但包含访问子对象的方法。`belongs_to`另一方面，提取管理外键的方法。

查看 Mongoid 的源代码，似乎持久性是从嵌入式类调用到父类，而不是相反（[源](https://github.com/mongoid/mongoid/blob/master/lib/mongoid/persistence/operations/embedded/insert.rb)）。删除`embedded_in`将删除将子项插入父项的其他方法。

如果我离题了，请随时纠正我:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:02:20.183

虽然当您选择在 MongoDB 中嵌入文档时可以获得很多好处，但您确实放弃了查询父上下文之外的所有内容的能力。如果您希望能够在父文档的上下文之外独立使用地址文档，您应该将文档链接到`has_many`而不是嵌入`embeds_many`。这有它自己的一套优点和缺点。

如果您选择嵌入文档，请`embedded_in`在模型中指定并访问嵌入的文档，如下所示：

```
a = A.new     # Parent document
a.addresses   # Embedded Address documents 
```

（[文档参考](http://mongoid.org/en/mongoid/docs/relations.html)）

# java - 如何使用 SAX 解析器读取包含在其他标记中的 XML 标记

> ID：13204897
> 
> 赞同：2
> 
> 时间：2012-11-03T00:40:25.290
> 
> 标签：java, xml, xml-parsing, sax

这是我的第一篇文章，所以如果我没有说清楚，我很乐意提供更多细节。我正在使用 Java 编写路由 API。文件的大部分内容都在正确解析一部分。我感兴趣的 XML 部分如下所示：

```
<way id="30184957" user="Central America" uid="69853" visible="true" version="2" changeset="4961491" timestamp="2010-06-11T10:52:19Z">
  <nd ref="332597303"/>
  <nd ref="332597551"/>
  <nd ref="332597552"/>
  <tag k="highway" v="residential"/>
  <tag k="name" v="Rae's Court"/>
</way>
</b> 
```

我的代码的相关部分如下所示：

```
public void startElement(String uri, String localName, String qName, Attributes attributes) 
{
    if (qName == "node") //if the tag value is node
    {   
        Node currentNode = new Node(0, 0, 0); //new node with all 0 values
        currentNode.nodeID = Integer.parseInt(attributes.getValue(0)); //set the ID to the id of the node
        currentNode.nodeLat = Double.parseDouble(attributes.getValue(1)); //set the Lat to the Lat of the node
        currentNode.nodeLong = Double.parseDouble(attributes.getValue(2)); //set the Long to the Long of the node
        allNodes.add(currentNode);
    }       

    if (qName == "way") //if tag value is way
    {
        currentWay = new Way(0, null); //create a new way with 0 values
        currentWay.wayID = Integer.parseInt(attributes.getValue(0)); //set the way id to the id of the way
    //  
    }

    if (qName == "nd") //if tag value is nd
    {
        Node searchNode = getNodeByID(Integer.parseInt(attributes.getValue(0))); //use getNodeByID method to check if
        currentWay.containedNodes.add(searchNode);
    }
} 
```

**我的问题：**

我正在尝试创建一个包含 ID 和它包含的节点列表（nd 标签）的方式对象，nd 标签只是对之前成功创建的节点对象的引用。目前我正在使用 2 个 ArrayList，一个用于节点，另一个用于方式。但是，该`getNodeByID()`方法每次遇到 nd 时都必须在列表中进行搜索，并且对于较大的 XML 文件大大减慢了我的速度。

我似乎无法找到一种方法来读取 nd，而是必须在不同的 if 语句中搜索它们。

有什么办法我可以找到一种方法，然后在同一个语句中，所有与它相关的 nd ？如果是这样，它将使创建我的对象变得更加容易，因为我正计划将这些数组列表更改为哈希图。

抱歉，如果我不清楚...我不太擅长用文字描述这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:44:16.810

不要将要搜索的节点存储在 a 中`List`，而是使用 a `Map<Integer,Node>`。这样搜索将是 O(1) 而不是 O(n)。如果您需要按输入顺序排列它们，那么也将它们添加到 a`List`以供以后使用，但使用`Map`搜索。

代替

```
allNodes.add(currentNode); 
```

你会有

```
allNodes.put(currentNode.nodeId, currentNode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:21:43.257

`(qname=="nd")`在 endElement 方法中而不是在 startElement 方法中插入代码。

# ruby-on-rails - Rails - 将关系更改为多态

> ID：13204898
> 
> 赞同：0
> 
> 时间：2012-11-03T00:40:40.267
> 
> 标签：ruby-on-rails, polymorphic-associations

我有一个现有的关系

`Artwork has_many :photos`和 `Photo belongs_to :artwork`

我一直在尝试将这些关系更改为：

`Artwork has_many :photos, as: :attached_photo`和`Photo belongs_to :attached_photo, polymorphic: true`

我正在从 Artwork 表单中创建 Photo 对象，但它们不是嵌套资源。

型号如下：

```
class Artwork < ActiveRecord::Base
  attr_accessible :photos_attributes
  has_many :photos, as: attached_photo
  accepts_nested_attributes_for :photos, allow_destroy: true
end

class Photo < ActiveRecord::Base
  attr_accessible :photo, :artwork_id, :attached_photo_id, :attached_photo_type
  belongs_to :attached_photo, polymorphic: true
  has_attached_file :photo,
                    path: ":rails_root/assets/:class/:id_partition/:style/:basename.:extension",
                    url: "/:class/:id/:style/:basename.:extension"
end 
```

出于测试目的，我在 Photo 模型中留下了单一关系和多态关系字段。我已经填写了数据库中的两组字段，因此它们应该指向相同的资源。

当我用多态关联所需的版本替换两个模型之间的关系时，我的视图中的所有图像都停止显示。我显示照片的查看代码是

```
<%= image_tag(@artwork.photos.first.photo.url(:medium)) %> 
```

在关系类型之间进行更改时，添加多态关联后，url 仍然正确显示在页面上，但由于某种原因，图像显示为损坏。在尝试直接浏览到其中一张图片时，我收到的错误消息是：

```
undefined method `artwork' for #<Photo:0xb3fc2b74> 
```

我无法理解 Photo 模型期望的艺术作品方法来自哪里。谁能为我澄清一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:01:20.857

请参阅此视频了解多态关系 - 这可能对您有所帮助

[http://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)

# python - 具有浅连接的 Python 类实例的问题

> ID：13204899
> 
> 赞同：1
> 
> 时间：2012-11-03T00:40:56.910
> 
> 标签：python, python-2.7, deep-copy, shallow-copy

我正在尝试用 Python 编写遗传算法框架，并且遇到了浅/深复制的问题。我的背景主要是 C/C++，我很难理解这些联系是如何持续存在的。

我看到的是子类中属性列表长度的爆炸式增长。我的代码在下面...我会指出问题。

这是单个基因的类别。本质上，它应该有一个名称、值和布尔标志。在我的班级中`Gene`填充一个列表的实例。`Individual`

```
# gene class
class Gene():
  # constructor
  def __init__(self, name, is_float):
    self.name_     = name
    self.is_float_ = is_float
    self.value_    = self.randomize_gene()

  # create a random gene
  def randomize_gene(self):
    return random.random() 
```

这是我的`Individual`课。每一代，都会创建一个种群（我将在类声明之后显示创建代码）并应用典型的遗传算法操作。值得注意的是`print len(self.Genes_)`调用，每次实例化此类时都会增长。

```
# individual class
class Individual():
  # genome definition
  Genes_      = []    # genes list
  evaluated_  = False # prevent re-evaluation
  fitness_    = 0.0   # fitness value (from evaluation)
  trace_      = ""    # path to trace file
  generation_ = 0     # generation to which this individual belonged
  indiv_      = 0     # identify this individual by number

  # constructor
  def __init__(self, gen, indv):
    # assign indices
    self.generation_ = gen
    self.indiv_      = indv
    self.fitness_    = random.random()

    # populate genome
    for lp in cfg.params_:
      g = Gene(lp[0], lp[1])
      self.Genes_.append(g)

    print len(self.Genes_)

> python ga.py
> 24
> 48
> 72
> 96
> 120
> 144
...... 
```

正如你所看到的，每个个体应该有 24 个基因，但是这个群体爆炸得非常快。我创建了一个新个体的初始群体，如下所示：

```
# create a randomized initial population
def createPopulation(self, gen):
  loc_population = []
  for i in range(0, cfg.population_size_):
    indv = Individual(gen, i)
    loc_population.append(indv)
  return loc_population 
```

后来在我的主循环中（为整个转储道歉，但觉得有必要 - 如果需要我的二次调用（突变/交叉），请告诉我））

```
for i in range(0, cfg.generations_):
      # evaluate current population
      self.evaluate(i)

      # sort population on fitness
      loc_pop = sorted(self.population_, key=operator.attrgetter('fitness_'), reverse=True)

      # create next population & preserve elite individual
      next_population = []
      elitist = copy.deepcopy(loc_pop[0])
      elitist.generation_ = i
      next_population.append(elitist)

      # perform selection
      selection_pool = []
      selection_pool = self.selection(elitist)

      # perform crossover on selection
      new_children = []
      new_children = self.crossover(selection_pool, i)

      # perform mutation on selection
      muties = []
      muties = self.mutation(selection_pool, i)

      # add members to next population
      next_population = next_population + new_children + muties

      # fill out the rest with random
      for j in xrange(len(next_population)-1, cfg.population_size_ - 1):
        next_population.append(Individual(i, j))

      # copy next population over old population
      self.population_ = copy.deepcopy(next_population)

      # clear old lists
      selection_pool[:]  = []
      new_children[:]    = []
      muties[:]          = []
      next_population[:] = [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T01:39:31.720

我不完全确定我是否理解您的问题，但我怀疑您的问题是您的 Individual() 类中的 Genes_ 变量是在类命名空间中声明的。该命名空间可供该类的所有成员使用。换句话说，Individual() 的每个实例都将共享相同的变量 Genes_。

考虑以下两个片段：

```
class Individual():
  # genome definition
  genes = []
  def __init__(self):
      for i in xrange(10):
              self.genes.append(i)

ind_1 = Individual()
print ind_1.genes
ind_2 = Individual()
print ind_1.genes
print ind_2.genes 
```

和

```
class Individual():
  # genome definition
  def __init__(self):
      self.genes = []
      for i in xrange(10):
              self.genes.append(i)

ind_1 = Individual()
print ind_1.genes
ind_2 = Individual()
print ind_1.genes
print ind_2.genes 
```

第一个片段输出

```
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

而第二个片段输出

```
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

在第一个场景中，当第二个 Individual() 被实例化时，基因列表变量已经存在，并且来自第二个个体的基因被添加到这个现有列表中。

而不是像这样创建 Individual() 类，

```
# individual class
class Individual():
  # genome definition
  Genes_      = []    # genes list

  # constructor
  def __init__(self, gen, indv):
    # assign indices
    self.generation_ = gen
    self.indiv_      = indv
    self.fitness_    = random.random() 
```

**您应该考虑在init**中声明 Genes_ 变量，以便每个 Individual() 实例都有自己的基因集

```
# individual class
class Individual():

  # constructor
  def __init__(self, gen, indv):
    # genome definition
    self.Genes_      = []    # genes list
    # assign indices
    self.generation_ = gen
    self.indiv_      = indv
    self.fitness_    = random.random() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T05:06:04.193

当您创建一个类时，您实际上是在创建一个“类对象”。这些对象就像 Python 中的任何其他对象一样；Python 中的一切都是一个对象，这些对象的作用是由它们的方法定义的，而不是它们的类！这就是鸭子打字的魔力。在 Python 中，您甚至可以动态创建新类。

无论如何，您正在将一个列表对象添加到唯一的“个人”类对象的“Genes_”属性中。结果是“Individual”类对象的每个实例对象都在访问相同的“Genes_”列表对象。

考虑这个

```
 # In 2.2 <= Python < 3.0 you should ALWAYS inherit from 'object'.
    class Foobar(object):
        doodah = []

    a = Foobar()
    b = Foobar()
    assert id(a.doodah) == id(b.doodah) # True 
```

在这种情况下，如您所见，“a.doodah”和“b.doodah”是同一个对象！

```
 class Foobar(object):
        def __init__(self):
            self.doodah = []

    a = Foobar()
    b = Foobar()
    assert id(a.doodah) != id(b.doodah) # True 
```

在这种情况下，它们是不同的对象。

有你的蛋糕也可以吃。考虑这个

```
 class Foobar(object):
        doodah = []

    a = Foobar()
    b = Foobar()
    a.doodah = 'hlaghalgh'
    assert id(a.doodah) != id(b.doodah) # True 
```

在这种情况下，“doodah”属性被添加到“a”对象中，它覆盖了类属性。

希望这可以帮助！

# c# - 如何在 C# .NET 中反映泛型类型参数

> ID：13204901
> 
> 赞同：4
> 
> 时间：2012-11-03T00:41:23.550
> 
> 标签：c#, .net, generics, reflection, parameters

考虑以下泛型类

```
Dictionary<TKey, TValue>

List<T>

CustomHashMap<K, V> 
```

是否可以反映给泛型类型参数的名称？

例如

```
"TKey", "TValue"

"T"

"K", "V" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:53:01.790

这似乎可以解决问题：

```
class Program
{
    static IEnumerable<string> GetGenericArgumentNames(Type type)
    {
        if (!type.IsGenericTypeDefinition)
        {
            type = type.GetGenericTypeDefinition();
        }

        foreach (var typeArg in type.GetGenericArguments())
        {
            yield return typeArg.Name;
        }
    }

    static void Main(string[] args)
    {
        // For a raw type
        Trace.WriteLine(string.Join(" ", GetGenericArgumentNames(typeof(Foo<>))));
        Trace.WriteLine(string.Join(" ", GetGenericArgumentNames(typeof(Foo<Quux>))));
    }

}

class Foo<TBar> {}

class Quux {} 
```

# mysql - MySQL 从字段中删除所有文本，但模式除外

> ID：13204905
> 
> 赞同：0
> 
> 时间：2012-11-03T00:42:09.937
> 
> 标签：mysql, regex

我正在开发一个 WordPress 数据库，我需要一些帮助来清理 post_content 字段。

大约有 5,000 个帖子包含以下内容：
`RANDOM JUNK<img src="http://domain.tld/randomString.jpg" />MORE RANDOM JUNK`

或者

`RANDOM JUNK<img src="http://domain.tld/randomString.png" />MORE RANDOM JUNK`

或者

`RANDOM JUNK<img src="https://domain.tld/randomString.jpg" />MORE RANDOM JUNK`

或者

`RANDOM JUNK<img src="https://domain.tld/randomString.png" />MORE RANDOM JUNK`

我需要删除除图像之外的所有内容，并且某些字段中可能还有其他 HTML 标记。

SQL初学者应该从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:48:33.130

用 sql 是不可能的。sql 只能找到一个正则表达式并在那里告诉它，但不能捕获它的一部分并再次插入它。

您需要先查询所有图像，然后匹配您的地址，然后再次插入...

```
$sql = "SELECT postid, image FROM posts";
$result = mysql_query($sql) OR die(mysql_error());

while($row = mysql_fetch_assoc($result)) {
    preg_match('/<img[^>]+>/i', $row['image'], $matches);
    $sql = "UPDATE posts SET image = '".$matches[0]."'
            WHERE postid = ".$row['postid'];
    mysql_query($sq) OR die(mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T17:48:49.063

您可以这样做，假设您要保留的“img”标签有些独特。使用 SUBSTRING_INDEX

```
update posts set post_content = 
concat(
    SUBSTRING_INDEX(post_content,'<img src="http://domain.tld/',1) ,
    SUBSTRING_INDEX(post_content,'.jpg" />',-1) 
) 
```

仅保留您想要的“img”标签。

# python - 您可以从 Pyramid 提供静态 HTML 页面吗？

> ID：13204907
> 
> 赞同：1
> 
> 时间：2012-11-03T00:42:27.643
> 
> 标签：python, html, pyramid

我有一个使用 Mako 模板的 Pyramid 应用程序，我想知道是否可以在应用程序中提供静态 HTML 页面？

对于我正在处理的项目，我们希望为公共“正面”位提供相对静态的页面，然后应用程序将动态地为网站提供服务。我们希望我们的一位内部用户能够编辑这些页面的一些 HTML 内容以更新它们。

我有我的静态文件夹，我从中提供 CSS 和脚本，但这似乎并不真正适合我想做的事情。我可以为页面创建视图，并且基本上在 mako 模板本身中有静态内容，但我认为如果有人要更新模板以显示更改，则需要重新启动应用程序？也许不是这样？

从长远来看，我可能会做一些事情，比如将内容存储在数据库中并动态提供服务，但目前这超出了范围。

有没有一种合理的方法来实现这一点，或者我什至不应该费心将公共页面设置为一个普通的静态 HTML 网站，而只是完全链接到我的应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:06:09.003

您可以使用返回预制响应的视图从 Pyramid 提供静态 html。如果你的网络服务器找到静态 html，你会玩得更开心，否则将请求代理到你的 Pyramid 应用程序。

# ios - 如何在 FBDialog 中预定义消息？

> ID：13204908
> 
> 赞同：0
> 
> 时间：2012-11-03T00:42:36.067
> 
> 标签：ios, facebook

我正在将 Facebook 集成到我的应用程序中，并且我希望 FBDialog 使用我的文本进行预定义。所以我试过这个参数：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
@"Some message text", @"message",
nil];
[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

但是评论区还是空的，可以预填吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:08:44.750

无法预先填写消息并且违反 Facebook 政策，因此您的消息输入将被忽略。

# git - GIT 拉取或克隆存储库仅获取 Master 分支

> ID：13204910
> 
> 赞同：47
> 
> 时间：2012-11-03T00:42:41.717
> 
> 标签：git, clone, bitbucket, pull

我在`git clone`存储库或使用时托管在 BitBucket 上`git pull origin master`，`git pull origin myBranch`它确实第二次拉动，但是当我列出分支时，`git branch -v`我只看到**master**。做事`git status`也没有任何表现。

如何将所有分支从网络仓库拉到我的本地仓库？

难道是因为我更改了计算机并且 git 设置上的名称发生了更改，所以它只能让我获取`master`，因为它是默认分支，而另一个只能由创建它的人访问？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-03T00:54:46.500

### 树枝确实存在，但你看不到它们

尝试使用这个：

```
git branch -a 
```

您现在将看到远程分支的列表，`origin`例如

输出：

```
remotes/origin/tk_removes_call_centers
remotes/origin/tk_warm_transfer_fix
remotes/origin/update_README 
```

然后你可以

```
git checkout [any_individual_branch_name] 
```

您还可以获得`git branch -v --all`包含最新提交信息的相同列表，即

```
git branch -v --all 
```

输出：

```
remotes/origin/tk_removes_call_centers     1478b14 re-adding call feedback workers
remotes/origin/tk_warm_transfer_fix        94720c5 handling blank auto policy
remotes/origin/update_README               a769b82 Update README 
```

`git branch -v`（不带`--all`）仅显示您处理过的分支。使用时，`--all`您会看到*所有*跟踪分支`origin/`

有关的：

*   [如何克隆 Git 中的所有远程分支？](https://stackoverflow.com/q/67699/631619)
*   [如何创建远程 Git 分支？](https://stackoverflow.com/questions/1519006/how-do-you-create-a-remote-git-branch?rq=1)
*   [Git 获取远程分支](https://stackoverflow.com/q/9537392/631619)
*   [如何签出远程 Git 分支？](https://stackoverflow.com/q/1783405/631619)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-18T14:27:20.757

执行此命令列表：

**git 分支 -a**：

你会看到远程分支的列表

**git远程显示起源**

它将显示本地存储库已知的所有分支。如果您要使用的分支不在列表中，请运行命令

**git远程更新**

它会更新本地存储库跟踪的远程分支的整个列表，然后运行

**获取**

更新所有跟踪的分支。

然后，您可以使用以下 checkout 命令创建分支：

**git checkout -b your_branch_local_name origin/your_branch_remote_name**

# java - JPF 配置错误：找不到类 gov.nasa.jpf.symbc.SymbolicInstructionFactory

> ID：13204912
> 
> 赞同：3
> 
> 时间：2012-11-03T00:43:04.070
> 
> 标签：java

我正在尝试运行 Symbolic Java Path finder，但出现以下错误：严重的 JPF 配置错误：类加载器找不到 gov.nasa.jpf.symbc.SymbolicInstructionFactory：gov.nasa.jpf.JP​​FClassLoader@aa470b8

> 在类 gov.nasa.jpf.jvm.JVM 的“vm.class”实例化中使用 SEVERE JPF 终止

# sony - 智能手表电池统计数据？

> ID：13204914
> 
> 赞同：1
> 
> 时间：2012-11-03T00:43:08.763
> 
> 标签：sony, sony-smartwatch

如何读取 SmartWatch 的电池状态？（不是主机，而是手表本身！）这是必需的，因为应用程序可以始终打开屏幕并耗尽电池，所以我想至少显示某种警告。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:20:01.063

不幸的是，此功能不可用。

# cocoa - 有什么方法可以检测 SDK 中支持的选项

> ID：13204921
> 
> 赞同：1
> 
> 时间：2012-11-03T00:44:20.077
> 
> 标签：cocoa, osx-mountain-lion

“<strong>使用基于 SDK 的开发”解释了如何使用弱链接的类、方法和函数......

我用过这个，例如

```
if ([NSByteCountFormatter class]) {
    ...
} 
```

有什么方法可以检测支持的选项，例如

```
NSRegularExpressionSearch
The search string is treated as an ICU-compatible regular expression.
If set, no other options can apply except NSCaseInsensitiveSearch and NSAnchoredSearch.
You can use this option only with the rangeOfString:... methods and stringByReplacingOccurrencesOfString:withString:options:range:.

Available in OS X v10.7 and later. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:13:08.830

为了测试一个类，例如`NSUserNotificationCenter`，是否存在，做

```
if(NSClassFromString(@"NSUserNotificationCenter"))
{
    //...
} 
```

为了测试一个常量，例如 NSWindowDidChangeBackingPropertiesNotification，是否存在，做

```
BOOL NSWindowDidChangeBackingPropertiesNotificationIsAvailable = (&NSWindowDidChangeBackingPropertiesNotification != NULL);
if (NSWindowDidChangeBackingPropertiesNotificationIsAvailable) 
{
    //...
} 
```

还请查看此答案：[检查是否在运行时在 Obj-C 中定义了常量](https://stackoverflow.com/questions/3122177/check-if-constant-is-defined-at-runtime-in-obj-c/5268545#5268545)

在你的情况下，这看起来像

```
BOOL NSRegularExpressionSearchIsAvailable = (&NSRegularExpressionSearch != NULL);
if (NSRegularExpressionSearchIsAvailable)
{
    //...
} 
```

# java - 将对象强制转换为其父类以避免其在 Java 中的属性

> ID：13204925
> 
> 赞同：0
> 
> 时间：2012-11-03T00:44:53.547
> 
> 标签：java, casting, polymorphism, serializable

我的 SuperYo 类扩展了 Persona 类，如下所示：

```
public class SuperYo extends Persona {

   private NotSerializableObj obj1
   private NotSerializableObj obj2
   private NotSerializableObj obj3

}

public class Persona {

   private SerializableObj sObj1
   private SerializableObj sObj2
   private SerializableObj sObj3

} 
```

问题是，我将 SuperYo 的 Persona 实例添加到 LinkedList：

```
LinkedList<Persona> list = new LinkedList<Persona>();
list.add((Persona) superYo); 
```

它将它添加为 SuperYo 对象！上面有所有 NonSerializableObjs ......因此，不能从 Socket 发送:(。

所以，问题是......有没有办法将一个对象“向下转换”到它的父类，所以它的属性不存在？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:50:50.917

铸造是多态性的问题。当您将 type1 的对象转换为 type2 时，实例不会改变，但您只是从新的角度看待实例！

如果要通过网络发送子类，可以将 SuperYo 成员设置为瞬态，并在实例化时填充它们。或者您可以将 writeObject() 和 readObject() 方法添加到您的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:55:10.900

实施如下：`readObject`_`writeObject``SuperYo`

```
 private void writeObject(ObjectOutputStream outStream) throws IOException {
    //write attributes from PersonYo only
    outStream.defaultWriteObject();
    outStream.writeObject(sObj1);
    outStream.writeObject(sObj2);
    outStream.writeObject(sObj2);
 }

private void readObject(ObjectInputStream inStream) throws IOException,
                                                          ClassNotFoundException {
    //read attributes from PersonYo only
    inStream.defaultReadObject();
    sObj1= (SerializableObj)inStream.readObject();
    sObj2= (SerializableObj)inStream.readObject();
    sObj3= (SerializableObj)inStream.readObject();
} 
```

一旦你这样做了，就不需要向下转换了。此外，您可能可以更好地控制对象中的其他不可序列化属性。

# ios - 不同版本的 XCode 兼容性问题

> ID：13204937
> 
> 赞同：1
> 
> 时间：2012-11-03T00:46:57.720
> 
> 标签：ios, xcode

我最近在 iOS 10.8 上使用 XCode 4.5.1 做了一个项目。

我想在 iOS 10.7.5 上使用 XCode 4.4.1 在另一台计算机上运行这个项目。

它目前给了我错误：

XCode 无法使用所选设备运行。没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

有没有办法在另一台计算机上打开项目而不必重做所有委托等？

我尝试关闭 AutoLayout 并在 iOS 10.7.5 计算机上运行它，但它仍然给出相同的错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:57:29.683

将部署目标更改为要在其上运行项目的 ios 版本。

![在此处输入图像描述](../Images/4f68aaebbf0dbeb02c5f16fd2f96553c.png)

# php - 如何使用多维数组？

> ID：13204938
> 
> 赞同：1
> 
> 时间：2012-11-03T00:47:07.353
> 
> 标签：php, arrays, codeigniter, foreach, mysqli

这是从我的模型返回的 var_dump 或数组：

```
array (size=5)
  0 => 
    array (size=3)
      0 => 
        object(stdClass)[19]
          public 'X_SIZE' => string '1.75x3' (length=6)
      1 => 
        object(stdClass)[20]
          public 'X_SIZE' => string '1.75x3.5(slim)' (length=14)
      2 => 
        object(stdClass)[21]
          public 'X_SIZE' => string '2x3' (length=3)
  1 => 
    array (size=3)
      0 => 
        object(stdClass)[17]
          public 'X_PAPER' => string '14ptGlossCoatedCoverwithUV(C2S)' (length=31)
      1 => 
        object(stdClass)[18]
          public 'X_PAPER' => string '14ptPremiumUncoatedCover' (length=24)
      2 => 
        object(stdClass)[24]
          public 'X_PAPER' => string '16ptDullCoverwithMatteFinish' (length=28)
  2 => 
    array (size=2)
      0 => 
        object(stdClass)[23]
          public 'X_COLOR' => string '1000' (length=4)
      1 => 
        object(stdClass)[22]
          public 'X_COLOR' => string '1002' (length=4)
  3 => 
    array (size=4)
      0 => 
        object(stdClass)[26]
          public 'X_QTY' => string '100' (length=3)
      1 => 
        object(stdClass)[25]
          public 'X_QTY' => string '250' (length=3)
      2 => 
        object(stdClass)[29]
          public 'X_QTY' => string '500' (length=3)
      3 => 
        object(stdClass)[30]
          public 'X_QTY' => string '1000' (length=4)
  4 => 
    array (size=3)
      0 => 
        object(stdClass)[28]
          public 'O_RC' => string 'YES' (length=3)
      1 => 
        object(stdClass)[27]
          public 'O_RC' => string 'NO' (length=2)
      2 => 
        object(stdClass)[33]
          public 'O_RC' => string 'NA' (length=2) 
```

我的控制器正在发送到我的视图，在我看来，上面的转储是：`var_dump($printerOptions)`

好的，所以我需要为每个数组和数组的单选按钮创建一个下拉菜单`O_RC`。

我正在使用 codeigniter 并`form_dropdown('',$val);`在 foreach 循环内部使用会导致数组中每个键和元素的多个下拉列表。

```
foreach ($printerOptions as $Options) 
{
//var_dump($Options);
    foreach ($Options as $Specs) 
    {
        echo $Specs->X_SIZE;
        echo $Specs->X_PAPER;
        echo $Specs->X_COLOR;
        echo $Specs->X_QTY;
        echo $Specs->O_RC;
    }
} 
```

此 ^ 代码将回显相应数组的预期值，但由于某种原因，输出出现 LOOPING 错误：

```
Undefined property: stdClass::$X_PAPER
Undefined property: stdClass::$X_COLOR
Undefined property: stdClass::$X_QTY
Undefined property: stdClass::$O_RC 
```

查看我的数组如何分别为每个数组创建一个下拉菜单？

谢谢您的帮助。

# 模型 /// 更新 ///

```
class M_Pricing extends CI_Model {

    function get_prices() 
    {
        $table_by_product = 'printer_businesscards'; //replace with URI Segment

        //Get all the columns in the table set by the page URI of $table_by_product variable 
        $get_all_col_names = $this->db->list_fields($table_by_product);

        //Loop through the column names. All names starting with 'O_' are optional fields for the 
        //current product. Get all Distinct values and create a radio button list in form.
        $resultArray = array();

        foreach ($get_all_col_names as $key => $value) {
            //get all o_types for the product by column name
            if (preg_match('/O_/', $value)) 
                {
                $v = (array('Specs' => $value));
                foreach ($v as $vals) {
                    $this->db->select($vals);
                    $this->db->distinct();
                    $qX = $this->db->get($table_by_product);
                    $resultArray[] = $qX->result();
                    }
                } 

            //Get all x_types for the product by column name. All 'X_' types are specific product options.
            //Create a dropdown menu with all DISTINCT product options. 
            if (preg_match('/X_/', $value)) 
                {
                $v = (array('Type' => $value));
                foreach ($v as $vals) {
                    $this->db->select($vals);
                    $this->db->distinct();
                    $qX = $this->db->get($table_by_product);
                    $resultArray[] = $qX->result();
                    }
                }       
        }
        //return $resultArray
        //var_dump($resultArray); die;
        return $resultArray;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:22:17.953

据我了解，您的结果数组应该是对象或哈希，如下所示：

```
array('Type'=>array(
   'X_SIZE'=>array('1.75x3','1.75x3.5(slim)','2x3'),
   'X_PAPER'=>array('14ptGlossCoatedCoverwithUV(C2S)','14ptPremiumUncoatedCover'),
///...),
'Specs'=>array( 
```

//...) );

循环通过这样的结构：

```
//Types
echo 'Types';
foreach ($Options['Types'] as $type=>$values) {
echo $type;
echo "<select>";
foreach ($values as $value) {
echo "<option value="$value">$value</option>";
}
echo "</select>";
}

//Specs
echo 'Specs';
foreach ($Options['Specs'] as $type=>$values) {
 echo $type;
 echo "<select>";
 foreach ($values as $value) {
   echo "<option value="$value">$value</option>";
 }
 echo "</select>";
} 
```

模型：

```
<?php
class M_Pricing extends CI_Model {

    function get_prices() 
    {
        $table_by_product = 'printer_businesscards'; //replace with URI Segment

        //Get all the columns in the table set by the page URI of $table_by_product variable 
        $get_all_col_names = $this->db->list_fields($table_by_product);

        //Loop through the column names. All names starting with 'O_' are optional fields for the 
        //current product. Get all Distinct values and create a radio button list in form.

        $resultArray=array();
        $resultArray['Options']=array();
        $resultArray['Specs']=array();

        foreach ($get_all_col_names as $key => $value) {
            //get all o_types for the product by column name
            $opt_type="";
            if (preg_match('/O_/', $value)) {$opt_type="Options";} elseif
               (preg_match('/X_/', $value)) {$opt_type="Specs";} else {continue;}
               if (!isset($resultArray[$opt_type][$value])) {$resultArray[$opt_type][$value]=array();}
                    $this->db->select($value);
                    $this->db->distinct();
                    $qX = $this->db->get($table_by_product);
                    foreach ($qX->result() as $v) {
                     $resultArray[$opt_type][$value][]=$v->$value;
                    }
           }      

        //return $resultArray
        //var_dump($resultArray); die;
        return $resultArray;
    }
} 
```

# c# - 使用 iTextSharp 5.3.3 和 USB 令牌签署 PDF

> ID：13204940
> 
> 赞同：7
> 
> 时间：2012-11-03T00:47:30.933
> 
> 标签：c#, pdf, usb, itextsharp, sign

我是 iTextSharp（和 StackOverFlow）的新手。我正在尝试使用外部 USB 令牌在 C# 中签署 PDF。我尝试使用从互联网上挖掘的以下代码。

```
Org.BouncyCastle.X509.X509CertificateParser cp = new Org.BouncyCastle.X509.X509CertificateParser();

//Get Sertifiacte
X509Certificate2 certClient = null;
X509Store st = new X509Store(StoreName.My, StoreLocation.CurrentUser);
st.Open(OpenFlags.MaxAllowed);
X509Certificate2Collection collection = X509Certificate2UI.SelectFromCollection(st.Certificates, "Please choose certificate:", "", X509SelectionFlag.SingleSelection);
if (collection.Count > 0){
   certClient = collection[0];
}
st.Close();
//Get Cert Chain
IList<Org.BouncyCastle.X509.X509Certificate> chain = new List<Org.BouncyCastle.X509.X509Certificate>();
X509Chain x509chain = new X509Chain();
x509chain.Build(certClient );
foreach (X509ChainElement x509ChainElement in x509chain.ChainElements){
    chain.Add(DotNetUtilities.FromX509Certificate(x509ChainElement.Certificate));
}

PdfReader reader = new PdfReader(sourceDocument);
FileStream resStream = new FileStream(resultDocument, FileMode.Create, FileAccess.ReadWrite);

PdfStamper stamper = PdfStamper.CreateSignature(reader, resStream , '\0', null, true);

PdfSignatureAppearance appearance = stamper.SignatureAppearance;
appearance.Reason = reason;
appearance.Location = location;
appearance.SetVisibleSignature(new iTextSharp.text.Rectangle(20, 10, 170, 60), 1, "Signed");

X509Certificate2Signature es = new X509Certificate2Signature(certClient, "SHA-1");
MakeSignature.SignDetached(appearance, es, chain, null, null, null, 0, CryptoStandard.CMS); 
```

问题是我收到一个异常：

```
System.Security.Cryptography.CryptographicException was unhandled
  Message=Invalid type specified.

  Source=mscorlib
  StackTrace:
       at System.Security.Cryptography.CryptographicException.ThrowCryptographicException(Int32 hr)
       at System.Security.Cryptography.Utils._GetKeyParameter(SafeKeyHandle hKey, UInt32 paramID)
       at System.Security.Cryptography.Utils.GetKeyPairHelper(CspAlgorithmType keyType, CspParameters parameters, Boolean randomKeyContainer, Int32 dwKeySize, SafeProvHandle& safeProvHandle, SafeKeyHandle& safeKeyHandle)
       at System.Security.Cryptography.RSACryptoServiceProvider.GetKeyPair()
       at System.Security.Cryptography.RSACryptoServiceProvider..ctor(Int32 dwKeySize, CspParameters parameters, Boolean useDefaultKeySize)
       at System.Security.Cryptography.X509Certificates.X509Certificate2.get_PrivateKey()
       at iTextSharp.text.pdf.security.X509Certificate2Signature..ctor(X509Certificate2 certificate, String hashAlgorithm)
       at WindowsFormsApplication1.PDFSignerHelper.signPdfFile(String sourceDocument, String resultDocument, X509Certificate2 certClient, String reason, String location)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T13:33:47.963

这种方法对我们很有效（iTextSharp 5.3.3）。我们使用智能卡和 USB 令牌（供应商 - [www.author.kiev.ua](http://www.author.kiev.ua)）：

```
 X509Store store = new X509Store(StoreLocation.CurrentUser);
            store.Open(OpenFlags.ReadOnly);
            X509Certificate2Collection sel = X509Certificate2UI.SelectFromCollection(store.Certificates, null, null, X509SelectionFlag.SingleSelection);

            X509Certificate2 cert = sel[0];

            Org.BouncyCastle.X509.X509CertificateParser cp = new Org.BouncyCastle.X509.X509CertificateParser();
            Org.BouncyCastle.X509.X509Certificate[] chain = new Org.BouncyCastle.X509.X509Certificate[] {
            cp.ReadCertificate(cert.RawData)};

            IExternalSignature externalSignature = new X509Certificate2Signature(cert, "SHA-1");

            PdfReader pdfReader = new PdfReader(pathToBasePdf);

            signedPdf = new FileStream(pathToBasePdf, FileMode.Create);

            pdfStamper = PdfStamper.CreateSignature(pdfReader, signedPdf, '\0');
            PdfSignatureAppearance signatureAppearance = pdfStamper.SignatureAppearance;

            signatureAppearance.SignatureGraphic = Image.GetInstance(pathToSignatureImage);
            signatureAppearance.SetVisibleSignature(new Rectangle(100, 100, 250, 150), pdfReader.NumberOfPages, "Signature");
            signatureAppearance.SignatureRenderingMode = PdfSignatureAppearance.RenderingMode.GRAPHIC_AND_DESCRIPTION;

            MakeSignature.SignDetached(signatureAppearance, externalSignature, chain, null, null, null, 0, CryptoStandard.CMS); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-12T10:29:42.450

我已经制作了 ac# 项目，可以从 Windows 商店、SmartCard 或 Pfx/P12 文件签署 PDF 可能对你有四个用处

```
using System;
using System.Windows.Forms;
using System.IO;

using System.Security;
using System.Security.Cryptography;
using System.Security.Cryptography.X509Certificates;

using iTextSharp.text.pdf;
using iTextSharp.text.pdf.security;

namespace SignPdf
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        private  SecureString GetSecurePin(string PinCode)
        {
            SecureString pwd = new SecureString();
            foreach (var c in PinCode.ToCharArray()) pwd.AppendChar(c);
            return pwd;
        }
        private  void button1_Click(object sender, EventArgs e)
        {
            //Sign from SmartCard
            //note : ProviderName and KeyContainerName can be found with the dos command : CertUtil -ScInfo
            string ProviderName = textBox2.Text;
            string KeyContainerName = textBox3.Text;
            string PinCode = textBox4.Text;
            if (PinCode != "")
            {
                //if pin code is set then no windows form will popup to ask it
                SecureString pwd = GetSecurePin(PinCode);
                CspParameters csp = new CspParameters(1,
                                                        ProviderName,
                                                        KeyContainerName,
                                                        new System.Security.AccessControl.CryptoKeySecurity(),
                                                        pwd);
                try
                {
                    RSACryptoServiceProvider rsaCsp = new RSACryptoServiceProvider(csp);
                    // the pin code will be cached for next access to the smart card
                }
                catch (Exception ex)
                {
                    MessageBox.Show("Crypto error: " + ex.Message);
                    return;
                }
            }           
            X509Store store = new X509Store(StoreLocation.CurrentUser);
            store.Open(OpenFlags.ReadOnly);
            X509Certificate2 cert = null;
            if ((ProviderName == "") || (KeyContainerName == ""))
            {
                MessageBox.Show("You must set Provider Name and Key Container Name");
                return;
            }
            foreach (X509Certificate2 cert2 in store.Certificates)
            {
                if (cert2.HasPrivateKey)
                {
                    RSACryptoServiceProvider rsa = (RSACryptoServiceProvider)cert2.PrivateKey;
                    if (rsa == null) continue; // not smart card cert again
                    if (rsa.CspKeyContainerInfo.HardwareDevice) // sure - smartcard
                    {
                        if ((rsa.CspKeyContainerInfo.KeyContainerName == KeyContainerName) && (rsa.CspKeyContainerInfo.ProviderName == ProviderName))
                        {
                            //we find it
                            cert = cert2;
                            break;
                        }
                    }
                }
            }
            if (cert == null)
            {
                MessageBox.Show("Certificate not found");
                return;
            }
            SignWithThisCert(cert);
        }

        private void button2_Click(object sender, EventArgs e)
        {
            //Sign with certificate selection in the windows certificate store
            X509Store store = new X509Store(StoreLocation.CurrentUser);
            store.Open(OpenFlags.ReadOnly);
            X509Certificate2 cert = null;
            //manually chose the certificate in the store
            X509Certificate2Collection sel = X509Certificate2UI.SelectFromCollection(store.Certificates, null, null, X509SelectionFlag.SingleSelection);
            if (sel.Count > 0)
                cert = sel[0];
            else
            {
                MessageBox.Show("Certificate not found");
                return;
            }
            SignWithThisCert(cert);
        }

        private void button3_Click(object sender, EventArgs e)
        {
            //Sign from certificate in a pfx or a p12 file
            string PfxFileName = textBox5.Text;
            string PfxPassword = textBox6.Text;
            X509Certificate2 cert = new X509Certificate2(PfxFileName, PfxPassword);
            SignWithThisCert(cert);
        }

        private void SignWithThisCert(X509Certificate2 cert)
        {
            string SourcePdfFileName = textBox1.Text;
            string DestPdfFileName = textBox1.Text + "-Signed.pdf";
            Org.BouncyCastle.X509.X509CertificateParser cp = new Org.BouncyCastle.X509.X509CertificateParser();
            Org.BouncyCastle.X509.X509Certificate[] chain = new Org.BouncyCastle.X509.X509Certificate[] { cp.ReadCertificate(cert.RawData) };
            IExternalSignature externalSignature = new X509Certificate2Signature(cert, "SHA-1");
            PdfReader pdfReader = new PdfReader(SourcePdfFileName);
            FileStream signedPdf = new FileStream(DestPdfFileName, FileMode.Create);  //the output pdf file
            PdfStamper pdfStamper = PdfStamper.CreateSignature(pdfReader, signedPdf, '\0');
            PdfSignatureAppearance signatureAppearance = pdfStamper.SignatureAppearance;
            //here set signatureAppearance at your will
            signatureAppearance.Reason = "Because I can";
            signatureAppearance.Location = "My location";
            signatureAppearance.SignatureRenderingMode = PdfSignatureAppearance.RenderingMode.DESCRIPTION;
            MakeSignature.SignDetached(signatureAppearance, externalSignature, chain, null, null, null, 0, CryptoStandard.CMS);
            //MakeSignature.SignDetached(signatureAppearance, externalSignature, chain, null, null, null, 0, CryptoStandard.CADES);
            MessageBox.Show("Done");
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T11:08:47.157

与上面相同的代码，但使用证书文件而不是存储在最后一页上签署 PDF 文档。

```
 X509Certificate2 cert = new X509Certificate2("C:\\mycert.p12");

 Org.BouncyCastle.X509.X509CertificateParser cp = new Org.BouncyCastle.X509.X509CertificateParser();
 Org.BouncyCastle.X509.X509Certificate[] chain = new Org.BouncyCastle.X509.X509Certificate[] {
 cp.ReadCertificate(cert.RawData)};

 IExternalSignature externalSignature = new X509Certificate2Signature(cert, "SHA-1");

 PdfReader pdfReader = new PdfReader("C:\\multi-page-pdf.pdf");

 var signedPdf = new FileStream("C:\\multi-page-pdf-signed.pdf", FileMode.Create);

 var pdfStamper = PdfStamper.CreateSignature(pdfReader, signedPdf, '\0');
 PdfSignatureAppearance signatureAppearance = pdfStamper.SignatureAppearance;

 signatureAppearance.SignatureGraphic = Image.GetInstance("C:\\logo.png");
 signatureAppearance.Reason = "Because I can";
 signatureAppearance.Location = "My location";
 signatureAppearance.SetVisibleSignature(new Rectangle(100, 100, 250, 150), pdfReader.NumberOfPages, "Signature");
 signatureAppearance.SignatureRenderingMode = PdfSignatureAppearance.RenderingMode.GRAPHIC_AND_DESCRIPTION;

 MakeSignature.SignDetached(signatureAppearance, externalSignature, chain, null, null, null, 0, CryptoStandard.CMS); 
```

复制、粘贴、导入所需的库，然后去做其他事情。

# objective-c - 编译器和/或 Xcode 错误未知类型和预期标识符。导入循环？

> ID：13204941
> 
> 赞同：0
> 
> 时间：2012-11-03T00:47:54.757
> 
> 标签：objective-c, xcode, compiler-construction, types, import

**Edit2：**我重组了所有标题以使用@class 而不是#import 语言。所有 .m 文件现在都有#import。此处发布的问题似乎已解决。现在有一些 BAD ACCESS 错误，但虽然可能都是同一个根本问题，但这种表现已得到解决

**编辑：**我刚刚发现了一个叫做“导入循环”的东西。我正在调查这是否存在问题。如果有人对此有任何信息，请告诉我。

不相关的更改会导致不可能的错误-我认为程序中的其他地方存在更深层次的错误或错误，但我只想确认是这种情况。我有 3 个错误，并且已经在不同的 Xcode 项目中重建了程序。我有一些代码示例，但别担心——它们（大部分）是头文件

**错误 1**

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "PixelSprite.h"
#import "HUDLayer.h"
#import "PixelCharacter.h"

/*typedef enum
{
    GameSceneLayerTagGame = 1,
    GameSceneLayerTagHUD
}GameSceneLayerTags;*/

@interface GameLayer : CCLayer {

}
@property (assign,readwrite) CGPoint heroStartPoint;
@property (nonatomic, retain) CCTMXTiledMap *tileMap;
@property (nonatomic, retain) CCTMXLayer *background;
@property (assign, readwrite) NSInteger scrollSpeed;
@property (assign, readwrite) PixelCharacter *heroCharacter; 
```

上面的行包含一个编译器错误：未知类型名称“PixelCharacter”。我知道没有拼写错误。我什至甚至复制粘贴类和头文件的名称只是为了确保

```
+(GameLayer *) sharedGameLayer;

-(id) init;

@end 
```

**错误 2**

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "HUDButton.h"

@interface HUDLayer : CCLayer {

}

@property (readwrite,assign) CCArray* buttonsArray;

// Working with the buttons
-(void) addHUDButtonOfType:(NSString*)type inSlot:(int)slot;
-(void) addHUDButtonOfType:(NSString*)type;
-(void) removeHUDButton:(HUDButton*)button; 
```

上面的行包含一个编译器错误： Expected a type 这没有意义，因为明确发布了一个类型

```
-(void) removeHUDButtonOfType:(NSString*)type;
-(void) removeAllButtons;

-(void) buttonsQuery;

@end 
```

**错误 3**

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    // Get touch location
    CGPoint location = [touch locationInView:[touch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    // Verify that touch is on button
    BOOL isTouchHandled = CGRectContainsPoint([buttonSprite boundingBox], location);
    if (isTouchHandled) {
        [buttonSprite setColor:ccRED];
        SEL selector = NSSelectorFromString(actionMessage);
        GameLayer* layer = [GameLayer sharedGameLayer];
        PixelCharacter* heroCharacter = [layer heroCharacter]; 
```

上面的行包含一个编译器警告：incompatible pointer types initializing 'PixelCharacter*' with and expression of type 'int *'

```
 [heroCharacter addToDoQueue:selector];

    }

    return isTouchHandled;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:48:52.543

问题是循环导入依赖。

显然，.h 文件中的#import 有时可以通过让编译器认为所有必要的头文件都被导入而实际上它取决于编译顺序来“掩盖”问题。修复和最佳实践是使用

```
@class MyClass 
```

在标题和

```
#import "MyClass.h" 
```

在他们中

# android - 如何导入vcf文件

> ID：13204947
> 
> 赞同：-4
> 
> 时间：2012-11-03T00:48:41.977
> 
> 标签：android, vcf-vcard

我已将我的联系人导出到 SDCard 上的 VCF 文件。现在，我想导入回来，但我不知道该怎么做。请给我一些代码或建议。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:51:26.827

请参阅下面的代码以从 .vcf 文件中导入联系人。

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
int rawContactInsertIndex = ops.size();
ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
        .withValue(RawContacts.ACCOUNT_TYPE,null)
        .withValue(RawContacts.ACCOUNT_NAME, null)
        .withValue(RawContacts.STARRED, Starred)
        .withValue(RawContacts.CUSTOM_RINGTONE, CustRingTone)
        .build());

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
        .withValueBackReference(Data.RAW_CONTACT_ID, rawContactInsertIndex)
        .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
        .withValue(StructuredName.DISPLAY_NAME, displayName)
        .withValue(StructuredName.PHONETIC_GIVEN_NAME, PhoneticName_First)
        .withValue(StructuredName.PHONETIC_MIDDLE_NAME, PhoneticName_Middle)
        .withValue(StructuredName.PHONETIC_FAMILY_NAME, PhoneticName_Last)
        .build());

for (RowData phone : phones) {
    ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI).withValueBackReference(Data.RAW_CONTACT_ID, rawContactInsertIndex).withValue(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE).withValue(Phone.NUMBER, phone.data).withValue(Phone.TYPE, phone.type).withValue(Phone.LABEL, phone.customLabel).build());
} 
```

有关更多信息，请参见下面的链接。

[如何使用代码从 VCF 文件中导入联系人](https://stackoverflow.com/a/11312507/1466188)

# symfony - Symfony2 Sonata 管理员数据转换器

> ID：13204948
> 
> 赞同：5
> 
> 时间：2012-11-03T00:49:16.040
> 
> 标签：symfony, symfony-sonata

我正在尝试设置表单类型“sonata_type_immutable_array”，如下所示：

```
->add('metadatos', 'sonata_type_immutable_array', array(
    'keys' => array(
                    array('Test', 'text', array('required' => false)),
                    array('URL', 'url',  array('required' => false)),
                )
            )) 
```

并像这样保存：

```
public function setMetadatos(\Portal\EntradasBundle\Entity\EntradaMeta $metadatos = null)
{
    $this->metadatos = $metadatos;

    return $this;
} 
```

但总是得到错误：

可捕获的致命错误：传递给 Portal\EntradasBundle\Entity\Entrada::setMetadatos() 的参数 1 必须是 Portal\EntradasBundle\Entity\EntradaMeta 的实例，给定数组

我不知道如何设置数据转换器（ArrayToModelTransformer）来实现这一点。

任何人都可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:04:41.597

数据转换器非常简单，看这个： [http ://symfony.com/doc/current/cookbook/form/data_transformers.html](http://symfony.com/doc/current/cookbook/form/data_transformers.html)

数据转换器的使用如下：

```
 /**
     * @var ObjectManager
     */
    private $om;

    /**
     * @param ObjectManager $om
     */
    public function __construct($om)
    {
        $this->om = $om;
    }

[..]
$yourTransformer = new YourDataTransformer($this->om);

And then ->addModelTransformer($yourTransformer)) 
```

它用于获取对象的 id，和/或从 id 获取对象。

# spring - AspectJ AJC 使用 aspectj-maven-plugin 但不使用 Gradle

> ID：13204954
> 
> 赞同：1
> 
> 时间：2012-11-03T00:51:06.783
> 
> 标签：spring, maven, aspectj, gradle

我一直在尝试将 spring-aspects 编译到 Gradle 应用程序中。

我首先试图让 Vaadin Spring 集成工作并复制 vaadin-6-spring-3-integration-2/] [1](https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration)和[Vaadin Spring Integration](https://vaadin.com/wiki/-/wiki/Main/Spring%20Integration)，当我从 Gradle 运行应用程序时，使用来自[https://github的确切任务.com/SpringSource/spring-framework/blob/master/spring-aspects/aspects.gradle](https://github.com/SpringSource/spring-framework/blob/master/spring-aspects/aspects.gradle)没有任何东西被自动装配（一切都是空的）。我也试过这个版本：' [https://raw.github.com/breskeby/gradleplugins/0.9-upgrade/aspectjPlugin/aspectJ.gradle](https://raw.github.com/breskeby/gradleplugins/0.9-upgrade/aspectjPlugin/aspectJ.gradle) '我还使用了[gradle-1-0-spring-aspectj-上的更新版本构建问题](https://stackoverflow.com/questions/11550393/gradle-1-0-spring-aspectj-build-problems)，但除了 Maven 插件之外，似乎没有任何东西可以与 spring-aspects 编译时间编织一起使用。这是我上次使用的 Gradle 任务：

```
task compileJava(dependsOn: JavaPlugin.PROCESS_RESOURCES_TASK_NAME, overwrite: true)  {
    dependsOn configurations.ajc.getTaskDependencyFromProjectDependency(true, "compileJava")

    doLast{
        ant.taskdef( resource:"org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties", classpath: configurations.ajc.asPath)
        ant.iajc(source:sourceCompatibility, target:targetCompatibility, destDir:sourceSets.main.output.classesDir.absolutePath, maxmem:"512m", fork:"true",
                aspectPath:configurations.aspects.asPath, inpath:configurations.ajInpath.asPath, sourceRootCopyFilter:"**/.svn/*,**/*.java",classpath:configurations.compile.asPath){
            sourceroots{
                sourceSets.main.java.srcDirs.each{
                    pathelement(location:it.absolutePath)
                }
            }
        }
    }
} 
```

然后当我创建一个 Maven pom 来使用以下插件时：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>${aspectj-maven-plugin.version}</version>
            <configuration>
                <!-- Required as the plugin does not resolve this by default -->
                <source>${maven.compiler.source}</source>
                <target>${maven.compiler.target}</target>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

该应用程序是自动装配好的。

任何人都可以帮助 Gradle 工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:09:28.227

您的代码在某处可用吗？我认为这不是 aspectj 任务本身的问题。

# sql - Rails / SQL：查找具有相同值但大小写不同的属性

> ID：13204957
> 
> 赞同：2
> 
> 时间：2012-11-03T00:51:59.737
> 
> 标签：sql, ruby-on-rails, case-insensitive

这可能是非常基本的，但我想不出如何编写一个 SQL 查询来查找具有相同字符但大小写不同的字符串。

我正在处理的上下文是 Rails 3.2 应用程序。我有一个带有 Name 属性的简单 Tag 模型。我继承了这个模型的数据，它不区分大小写存储值，所以一些用户输入诸如“树”之类的内容，而其他用户输入“树”，现在我们有两个真正应该是一个的标签。

所以，我想做一个查询来找到所有这些对，以便我可以合并它们。

到目前为止，我唯一能想到的就是编写一个 rake 任务，循环遍历它们并检查匹配的值......比如：

```
pairs = []
Tag.all.each do |t|
  other = Tag.where( 'name LIKE ?', t.name )
  pairs << [t, other] if other
end 
```

但是，我不确定上述方法是否可行，或者在性能方面是否有意义。有没有更好的方法来编写可以找到这些匹配对的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:01:11.397

这里有一个类似的[问题](https://stackoverflow.com/questions/2220423/case-insensitive-search-in-rails-model#answer-2220595)

您可以做的是在您的模型中创建一个方法来执行不区分大小写的搜索。然而，从我的经验来看，ActiveRecord 已经进行了不区分大小写的搜索，但以防万一：

```
def self.insensitive_find_by_tag_name(name)
    Tag.where("lower(name) = ? ", name.downcase)
end 
```

然后删除重复的条目，你可以做这样的事情

```
Tag.transaction! do
    tags = Tag.insensitive_find_by_tag_name(name)

    tags.last(tags.length() - 1).each do |tag|
        tag.destroy        
    end
end 
```

调用事务以防万一发生任何故障，以便数据库回滚。抓取所有具有相同名称的标签，然后删除任何额外的条目。如果您希望剩余的标签条目为小写，那么您可以这样做

```
tag = tags.first
tag.name = tag.name.downcase
tag.save! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:07:22.127

我不太擅长 SQL，但我对此进行了一些研究，发现使用 COLLATE 子句可以使 SQL 中的字符串操作区分大小写。（通常选择不同的操作不区分大小写。）

所以也许你可以尝试：

```
select distinct (name) COLLATE sql_latin1_general_cp1_cs_as
    FROM (
    ... blah blah blah 
```

以下是有关整理的一些文档： [http ://dev.mysql.com/doc/refman/5.0/en/charset-collat​​e.html](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)

（假设你使用的是 mysql 我猜）

或者，您也可以通过整理将数据库重新配置为区分大小写。那么您当前的查询可能不会改变

（假设您具有管理权限和重新配置的能力）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:53:13.467

您应该使用 upper() 或 lower() 函数将名称全部转换为小写或大写。

```
SELECT DISTINCT upper(name) 
```

或者：

```
SELECT DISTINCT lower(name) 
```

来源：[http ://www.postgresql.org/docs/9.1/static/functions-string.html](http://www.postgresql.org/docs/9.1/static/functions-string.html)

**另一种选择**（更好的代码可维护性）是使用 CITEXT 类型，但要这样做，您必须修改表结构：[http ://www.postgresql.org/docs/9.1/static/citext.html](http://www.postgresql.org/docs/9.1/static/citext.html)

# grep - 需要对多个字符串的第一次出现进行 grep

> ID：13204958
> 
> 赞同：6
> 
> 时间：2012-11-03T00:52:01.477
> 
> 标签：grep

我试图返回多个字符串的第一次出现，即，我想从以下文本中选择第一次出现 1259、3009 和 1589 的行。

```
ADWN    1259    11:00   B23

ADWN    3009    12:00   B19

DDWN     723    11:30   B04

ADWN    1589    14:20   B12

ADWN    1259    11:10   B23

DDWN    2534    13:00   B16

ADWN    3009    11:50   B14 
```

这给了我所有的比赛：

```
grep '1259\|3009\|1589'  somelog.log 
```

这只给了我第一场比赛

```
grep -m 1  '1259\|3009\|1589'  somelog.log 
```

我想返回以下内容：

```
ADWN    1259    11:00   B23

ADWN    3009    12:00   B19

ADWN    1589    14:20   B12 
```

我认为创建具有所需值的文件，然后遍历文件，将每个数字单独传递给 grep 命令会给我我正在寻找的东西，但我还没有找到这样的例子。有没有一个简单的解决方案，循环是处理这个问题的最佳方法，还是这个例子已经在其他地方得到了回答？

提前感谢您的想法和建议-

克莱德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T00:58:33.067

一种使用方式`awk`：

```
awk '!array[$2]++ && $2 ~ /^1259$|^3009$|^1589$/' file.txt 
```

结果：

```
ADWN    1259    11:00   B23
ADWN    3009    12:00   B19
ADWN    1589    14:20   B12 
```

***编辑：***

我真的应该养成先阅读整个问题的习惯。我看到您正在考虑使用您希望第一次出现的值创建一个文件。将它们放在一个名为的文件中`values.txt`，每行一个值。例如; 这是以下内容`values.txt`：

```
1259
3009
1589 
```

然后运行这个：

```
awk 'FNR==NR { array[$0]++; next } $2 in array { print; delete array[$2] }' values.txt file.txt 
```

结果：

```
ADWN    1259    11:00   B23
ADWN    3009    12:00   B19
ADWN    1589    14:20   B12 
```

* * *

第一条命令解释：

如果第二列 ( `$2`) 等于列出的这三个值之一，则将其添加到数组中（如果它尚不存在）。`awk`默认打印整行。

第二条命令解释：

`FNR`是相对于当前输入文件的记录数。
`NR`是记录的总数。

该`FNR==NR { ... }`构造仅适用于第一个输入文件。因此，对于 中的每一行`values.txt`，我们将整行 ( `$0`) 添加到一个数组中（我称它为数组，但您可以给它另一个名称）。`next`强制`awk`读取下一行`values.txt`（并跳过处理命令的其余部分）。当`FNR==NR`不再为真时，将读取参数列表中的第二个文件。然后我们检查`$2`数组中的第二列 ( )，如果它在那里，打印它并将其从数组中删除。通过使用`delete`，我们基本上将最大计数设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T00:58:52.410

试试这个。根据您的 grep 版本，它可能不起作用：

```
 grep -m 1 -e pattern1 -e pattern2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T01:01:02.830

您可以使用每个（请参阅[Linux Shell Script For Each File in a Directory Grab the filename and execute a program](https://stackoverflow.com/questions/2297510/linux-shell-script-for-each-file-in-a-directory-grab-the-filename-and-execute-a)）对于要匹配的每个模式，执行一个单独的 grep 连接到输出文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-19T04:16:23.313

这个也可以。

```
for i in $(cut -d " " -f1 somelog.log | sort -u); do LC_ALL=C fgrep -m1 "$i" somelog.log; done 
```

# actionscript-3 - 将 xml 文件中的 href 获取到 flash 按钮中

> ID：13204959
> 
> 赞同：0
> 
> 时间：2012-11-03T00:52:11.510
> 
> 标签：actionscript-3, flash-cs5

我有一个 flash 文件，我试图根据单击的图像更改同一个按钮的值，但我不能让它使用不同的值（我只能让它使用静态值）。

作为：

```
var weblinkXML:XML = new XML();
weblinkXML.ignoreWhite = true;
weblinkXML.load("xml/main.xml");
weblinkXML.onLoad = function(success) {
    trace("success = "+success);
for (var i:Number = 0; i< weblinkXML.childNodes.length; i++) {
PPTBUTTON.addEventListener(MouseEvent.CLICK, fl_ClickToGoToWebPage_1);
        function fl_ClickToGoToWebPage_1(event:MouseEvent):void
        {
            navigateToURL(new URLRequest("test/test.html"), "_blank");
        }
    }
} 
```

我的 XML：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<content>
    <!-- general vars -->
    <settings>
        <item name="copyright"><![CDATA[<font letterspacing="0.5">© 2012 | <a href="event:privacy,0">PRIVACY POLICY</a></font>]]></item>
        <item name="companyName"><![CDATA[<font letterspacing="-2"><b>TANITA</b></font>]]></item>
        <item name="companySlogan"><![CDATA[<font letterspacing="1">PHOTO PORTFOLIO</font>]]></item>
        <!--mp3Url srcUrl="music.mp3"/-->
        <imagesPage>
            <image imageUrl="images/tfile_splash_pic_main.jpg" />
        </imagesPage>
    </settings>

    <!-- menu -->
        <menu>
            <button><![CDATA[PORTFOLIO]]></button>  
            <button><![CDATA[ABOUT]]></button>  
            <button><![CDATA[NEWS]]></button>   
            <button><![CDATA[CONTACTS]]></button>   
        </menu>

        <gallery gallName="Crystal Cabin Awards 2012">
            <image imageUrl="gallery/tfile_gall_small_01.jpg" imagesBig="gallery/tfile_gall_big_01.jpg" buttonName="PPTBUTTON" targ="_self" href="http://www.google.com"/>
        <image imageUrl="gallery/tfile_gall_small_02.jpg" imagesBig="gallery/tfile_gall_big_02.jpg" buttonName="PPTBUTTON" targ="_self" href="http://www.youtube.com"/>
        <image imageUrl="gallery/tfile_gall_small_03.jpg" imagesBig="gallery/tfile_gall_big_03.jpg" buttonName="PPTBUTTON" targ="_self" href="http://www.yahoo.com"/>
            <image imageUrl="gallery/tfile_gall_small_04.jpg" imagesBig="gallery/tfile_gall_big_04.jpg"/>
            <image imageUrl="gallery/tfile_gall_small_05.jpg" imagesBig="gallery/tfile_gall_big_05.jpg"/>
            <image imageUrl="gallery/tfile_gall_small_06.jpg" imagesBig="gallery/tfile_gall_big_06.jpg"/>
            <image imageUrl="gallery/tfile_gall_small_07.jpg" imagesBig="gallery/tfile_gall_big_07.jpg"/>
            <image imageUrl="gallery/tfile_gall_small_08.jpg" imagesBig="gallery/tfile_gall_big_08.jpg"/>
        </gallery> 
```

我意识到我的 xml 很复杂，但它正在整个闪存中使用。也许我可以将它简化为一个独立的 xml，就像：

```
<image imageUrl="gallery/tfile_gall_small_02.jpg" imagesBig="gallery/tfile_gall_big_02.jpg" buttonName="PPTBUTTON" targ="_self" href="http://www.youtube.com"/> 
```

我的问题是我试图将href放入一个变量并使用它而不是“test/test.html”，但它永远不会起作用。

我也意识到我在 for 中有一个方法，但此时我已经对这段代码进行了很多迭代，以至于我不确定如何继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:42:08.147

以下是我将如何检索`href`属性列表：

```
var loader:URLLoader = new URLLoader();
var request:URLRequest = new URLRequest("xml/main.xml");
loader.addEventListener(IOErrorEvent.IO_ERROR, function errorHandler(event:IOErrorEvent):void {
    trace("Error loading XML" + event.type);
});
loader.addEventListener(Event.COMPLETE, function(event:Event):void {
    trace("success = " + event);
    var xml:XML = new XML(loader.data);
    var xmllist:XMLList = xml.gallery.children();
    for (var i:Number = 0; i < xmllist.length(); i++) {
        trace(XML(xmllist[i]).attribute("href"));
    }
});
loader.load(request); 
```

我有以下输出：

```
success = [Event type="complete" bubbles=false cancelable=false eventPhase=2]
http://www.google.com
http://www.youtube.com
http://www.yahoo.com 
```

我希望这会有所帮助。

# ruby-on-rails - Rspec 期望 link_to 没有找到任何东西

> ID：13204965
> 
> 赞同：3
> 
> 时间：2012-11-03T00:53:45.423
> 
> 标签：ruby-on-rails, railstutorial.org

![在此处输入图像描述][1]我一直在阅读 Michael Hartl 的 RoR 教程书，但我在 Rspec 上遇到了 7 次失败。我一直在寻找 3 个小时来找到错误，但我就是找不到它。错误表明我没有 link_to 注销（一个来自用户页面，一个来自编辑页面）、link_to 更改和一堆 have_selector 错误。这是 rspec user_pages_spec.rb。我几乎肯定 edit.html.erb 和 header.html 很好，但如果没有人发现这个 rspec 有什么问题，那就把它贴出来

```
 describe "edit" do
    let(:user) { FactoryGirl.create(:user) }
    before do
        sign_in user
        visit edit_user_path(user)
    end

    describe "page" do
        it { should have_selector('h1',    text: "Update your profile") }
        it { should have_selector('title', text: "Edit user") }
        it { should have_link('change', href: 'http://gravatar.com/emails') }
    end

    describe "with valid information" do
        let(:new_name) { "New Name" }
        let(:new_email) { "new@example.com" }
        before do
            fill_in "Name",             with: new_name
            fill_in "Email",            with: new_email
            fill_in "Password",         with: user.password
            fill_in "Confirm Password", with: user.password
            click_button "Save changes"
        end

        it { should have_selector('title', text: new_name) }
        it { should have_selector('div.alert.alert-success') }
        it { should have_link('Sign out', href: signout_path) }
        specify { user.reload.name.should == new_name }
        specify { user.reload.email.should == new_email }
    end 
```

结尾

这是错误以及与之相关的其余文件

```
Failures:

  1) User pages signup with valid information after saving the user
     ←[31mFailure/Error:←[0m ←[31mit { should have_link('Sign out') }←[0m
       ←[31mexpected link "Sign out" to return something←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:30:in `block (5 levels) in <top (
required)>'←[0m

  2) User pages edit page
     ←[31mFailure/Error:←[0m ←[31mit { should have_link('change', href: 'http://
gravatar.com/emails') }←[0m
       ←[31mexpected link "change" to return something←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:134:in `block (4 levels) in <top
(required)>'←[0m

  3) User pages edit page
     ←[31mFailure/Error:←[0m ←[31mit { should have_selector('title', text: "Edit
 user") }←[0m
       ←[31mexpected css "title" with text "Edit user" to return something←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:133:in `block (4 levels) in <top
(required)>'←[0m

  4) User pages edit page
     ←[31mFailure/Error:←[0m ←[31mit { should have_selector('h1',    text: "Upda
te your profile") }←[0m
       ←[31mexpected css "h1" with text "Update your profile" to return somethin
g←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:132:in `block (4 levels) in <top
(required)>'←[0m

  5) User pages edit with valid information
     ←[31mFailure/Error:←[0m ←[31mit { should have_selector('div.alert.alert-suc
cess') }←[0m
       ←[31mexpected css "div.alert.alert-success" to return something←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:149:in `block (4 levels) in <top
(required)>'←[0m

  6) User pages edit with valid information
     ←[31mFailure/Error:←[0m ←[31mit { should have_selector('title', text: new_n
ame) }←[0m
       ←[31mexpected css "title" with text "New Name" to return something←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:148:in `block (4 levels) in <top
(required)>'←[0m

  7) User pages edit with valid information
     ←[31mFailure/Error:←[0m ←[31mit { should have_link('Sign out', href: signou
t_path) }←[0m
       ←[31mexpected link "Sign out" to return something←[0m
←[36m     # ./spec/requests/user_pages_spec.rb:150:in `block (4 levels) in <top
(required)>'←[0m

<% provide(:title, "Edit user") %>
<h1>Update your profile</h1>
<div class="row">
    <div class="span6 offset3">
        <%= form_for(@user) do |f| %>
            <% render 'shared/error_messages' %>

            <%= f.label :name %>
            <%= f.text_field :name %>

            <%= f.label :email %>
            <%= f.text_field :email %>

            <%= f.label :password %>
            <%= f.password_field :password %>

            <%= f.label :password_confirmation, "Confirm Password" %>
            <%= f.password_field :password_confirmation %>
        <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
        <% end %>

        <%= gravatar_for @user %>
       <a href="http://gravatar.com/emails">change</a>
    </div>
</div>

<header class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <%= link_to "Anime Ranting", root_path, id: "logo" %>
            <nav>
                <ul class="nav pull-right">
                    <li><%= link_to "Home", root_path %></li>
                    <li><%= link_to "Help", help_path %></li>
                    <% if signed_in? %>
                        <li><%= link_to "Users", '#' %></li>
                        <li id="fat-menu" class="dropdown">
                            <a href-"#" class="dropdown-toggle" data-toggle="dropdown">
                                Account <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><%= link_to "Profile", current_user %></li>
                                <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                                <li class="divier"></li>
                                <li><%= link_to "Sign out", signout_path, method: "delete" %></li>
                            </ul>
                        </li>
                    <% else %>
                        <li><%= link_to "Sign in", signin_path %></li>
                    <% end %>
                </ul>
            </nav>
        </div>
    </div>
</header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:19:36.953

你失踪`subject { page }`了`describe "edit" do`。这使您可以使用语法`it { should ...`。

# django - 组织 Django 项目的正确方法是什么？

> ID：13204967
> 
> 赞同：1
> 
> 时间：2012-11-03T00:54:18.077
> 
> 标签：django, django-templates, django-views

我是 Django 的新手，我正在努力思考这些应用程序应该如何组织。我有以下问题：

1.  像`divs`这样的应用程序是单独生成的吗？

2.  我们可以在应用程序中拥有应用程序吗？

3.  我们可以让应用程序在点击时使用 javascript 更改其他应用程序吗？

4.  现在我只有一个`views.py`文件，它通过不同的函数调用加载其所有内容。

    所以现在我面临着是否应该将我的应用程序分解`views.py`成更小的应用程序。我是否以正确的方式处理 Django？

5.  应用程序是像下图那样定义的，还是应该更像一个页面？

6.  如果我想要所有页面的页眉、面包屑和页脚怎么办？我超级困惑@.@

![在此处输入图像描述](../Images/2a6411cef23232ec98eb1a742d999ed5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:41:33.820

应用程序与 div 无关。Django 不是 CMS（尽管它可用于创建 CMS），并且不规定模板的布局。

处理页面上需要不同逻辑来填充它们的不同块的常用方法是通过[自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)。James Bennett 对此有一篇[很好](http://www.b-list.org/weblog/2006/jun/07/django-tips-write-better-template-tags/)的文章，尽管语法已经过时，所以请参阅第一个链接。

# objective-c - 每个 Tile / CCSprite 的 CCTMXTiledMap 锚点

> ID：13204968
> 
> 赞同：0
> 
> 时间：2012-11-03T00:54:32.770
> 
> 标签：objective-c, cocos2d-iphone

有没有办法将每个精灵的锚点设置为精灵的中心（所以 0.5f,0.5f），所以当您使用 CCTMXLayer 的 positionAt 方法时，它实际上会返回 CGPoint 在图块的中间？

我意识到我可以手动完成（这就是我现在要做的），方法是将一半的 x tilesize 和一半的 y tilesize 添加到该点，但我想知道是否可以将它设置为任何方式与他们的 API。

我所做的尝试是遍历每个精灵并将锚点设置为 0.5,0.5 ：

```
for (int i = 0; i < [layer layerSize].width; i++){
   for (int j = 0; j < [layer layerSize].height; j++){
      [[hey tileAt:ccp(i,j)] setAnchorPoint:ccp(0.5f, 0.5f)];
   }
} 
```

这（obvs）改变了每个瓷砖精灵的锚点，但是当我使用 positionAt 获得位置时，仍然考虑锚点 0,0。

同样，我可以解决这个问题并为每个图块计算我自己的中心点，但我想知道如果没有它是否可以做到这一点。

一个简单的解决方法是：

```
CCTMXLayer *layer = [map layerNamed:@...];

-(CGPoint) positionAtFix: (float) x :(float) y {
   CGPoint *abc = ccp([layer positionAt:ccp(x,y)] + [map tileSize].width / 2 ,
                              [layer positionAt:ccp(x,y)] + [map tileSize].height / 2 );
   return abc;
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:50:55.927

不更改 CCTMXTiledMap 源代码是不可能的。它专门用于渲染锚点为 0,0 的图块。

# ruby-on-rails - 使用 Carrierwave 的 CDN (Cloudfront) 缓存失效

> ID：13204978
> 
> 赞同：7
> 
> 时间：2012-11-03T00:56:22.277
> 
> 标签：ruby-on-rails, carrierwave, amazon-cloudfront

我正在使用carrierwave允许用户上传能够在上传后裁剪的图像，问题是版本被创建并且CDN立即捕获它们，当用户裁剪时他们看不到更改，因为必须使Cloudfront缓存失效并且需要相当长的时间才能自行刷新。

我认为将版本号放在文件名上可能是一种使缓存无效的好方法，如何使用 Carrierwave 来实现？

那是最好的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T23:31:46.303

我对 cloudflare 有同样的问题

这是我的 hackish 解决方案：将 updated_at 时间戳放在参数中。应该适用于所有 CDN

```
class AssetUploader < CarrierWave::Uploader::Base

  def url(options={})
    super.split("?v=")[0]+"?v=#{model.updated_at.to_time.to_i}" rescue super
  end

end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T10:03:02.017

要使 url 技巧在 Amazon CloudFront CDN 上起作用，只需记住在您的分配中启用查询字符串。转到行为选项卡并启用“转发查询字符串”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-10T06:50:29.173

您可以在carrierwave wiki上找到有关如何执行此操作的详细信息：

[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Create-random-and-unique-filenames-for-all-versioned-files](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Create-random-and-unique-filenames-for-all-versioned-files)

# objective-c - UIView 动画随机

> ID：13204980
> 
> 赞同：0
> 
> 时间：2012-11-03T00:56:28.670
> 
> 标签：objective-c, ios, xcode

我想用随机持续时间和随机延迟为我的图像制作动画。请帮帮我。我是初学者。这是代码：

```
-(void)up
{
    [UIView animateWithDuration:0.3 animations:^{
        mole.center = CGPointMake(63, 210);
    }];

    [self performSelector:@selector(down) withObject:nil afterDelay:1.0];
 } 
```

所以，我需要持续时间的“0.3”和延迟的 1.0 是随机的。比如，在 0.0 和 1.0 之间。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:04:58.303

这是一个函数：

```
- (float)randomFloatBetween:(float)smallNumber and:(float)bigNumber {
    float diff = bigNumber - smallNumber;
    return (((float) (arc4random() % ((unsigned)RAND_MAX + 1)) / RAND_MAX) * diff) + smallNumber;
} 
```

我在[这里](https://stackoverflow.com/questions/3410070/how-to-create-a-random-float-in-objective-c)找到了。

你可以这样称呼它：

```
[self randomFloatBetween:0.0 and:1.0]; 
```

# php - Jquery表单插件在iframe中调用php echo

> ID：13204991
> 
> 赞同：1
> 
> 时间：2012-11-03T00:59:47.673
> 
> 标签：php, jquery, file, upload

> **可能重复：**
> [将 html 放入 iframe（使用 javascript）](https://stackoverflow.com/questions/620881/putting-html-inside-an-iframe-using-javascript)

我正在使用下面的代码，我想要做的基本上（我是 jquery 的新手）是提交这个表单，然后在 uploadpic.php 页面上通常输出的内容 - 出现在表单所在的这个页面上，在 iframe 中。我只是不知道该怎么做。我添加了 Jquery 表单插件 - [http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/) 所以我浏览了代码并评论了它现在的作用。但我不知道如何添加 iframe 交换。基本上uploadpic.php 是这样做的：

```
$add_one = $membership->add_photo($_POST['photo'], $_POST['caption']); 
```

如果全部提交成功，或者失败，它会回显“对不起您的文件没有上传”或“文件上传成功。

我将如何停止必须转到新页面或诉诸烦人的弹出窗口？我认为临时 iframe 会是一个好主意 - 但根本不知道如何实现这样的事情。

```
<div id="uploadform">
            <form id = "uploadpicform" enctype="multipart/form-data" action="uploadpic.php" method="POST"> 
            <p>Photo: </p><input type="file" name="photo"><br />
            <p>Caption:</p> My <input type="text" name="caption"><br />
                   <input type="submit" class="large blue button" value="Add"> 
            </form>
            <script>
            // wait for the DOM to be loaded
            $(document).ready(function() {
                // bind 'myForm' and provide a simple callback function
                $('#uploadpicform').ajaxForm(function() {
                $("#hideuploadbutton").hide();
                $("#uploadbutton").show();
                $("#uploadform").hide();
                });
            });             
            </script>
        </div> 
```

目前所做的是提交表单，没有通知，隐藏上传按钮并显示一个打开的上传按钮以再次启动该过程。我认为必须有某种“添加 iframe”或“从另一页打印 php 变量”选项之类的。

我会很感激任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T03:07:46.873

**已编辑** *添加了用于填充 iframe 的代码*

**HTML**

```
<form id="uploadpicform">

    <p>Photo:</p>
    <input type="file" name="photo"><br />
    <p>Caption:</p>
    <input type="text" name="caption"><br />

</form>

<div id="uploadpicbutton" class="bluebutton">Upload</div> 
```

**jQuery**

```
// **ADDED** Populate the iframe 
function iframeresults() {  

    var content = phpresults;
    var tFrame = document.getElementById("iframeid");
    var doc = tFrame.contentDocument;
    if (doc == undefined || doc == null)
        doc = tFrame.contentWindow.document;
    doc.open();
    doc.write(content);
    doc.close();

}

//Submit Upload Ajax Call Function

function submit_upload() {

    $('#status').html('Uploading, Please Wait').fadeIn(500);

    $.ajax({
        type: "POST",
        url: "/uploadpic.php",
        cache: false,
        data: $('#uploadpicform').serialize(), //This adds the variable name and input values automatically
        dataType: "script", // Returns Javascript outputted from PHP page and Launches the Script
        success: function(){

        iframeresults();

    });        

}

// Bind the upload function to the button    
$('#uploadpicbutton').on('click', submit_upload); 
```

**PHP**

```
 //Use this echo in your PHP after your PHP Successful validation
 echo "var phpresults = 'Upload Succesful'; ";

 //Use this echo in your PHP after your PHP Failure validation
 echo "var phpresults = 'Upload Failed'; "; 
```

# function - 匿名函数简写

> ID：13204993
> 
> 赞同：85
> 
> 时间：2012-11-03T01:00:11.927
> 
> 标签：function, clojure, anonymous-function

关于使用简写 #(..) 的匿名函数，我有些不理解

以下作品：

```
REPL>  ((fn [s] s) "Eh")
"Eh" 
```

但这不会：

```
REPL>  (#(%) "Eh") 
```

这有效：

```
REPL> (#(str %) "Eh")
"Eh" 
```

我不明白的是为什么*(#(%) "Eh")*不起作用，同时我不需要在*((fn [s] s) "Eh")中使用**str*

 *它们都是匿名函数，并且都采用一个参数。为什么速记符号需要一个函数而其他符号不需要？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-03T01:33:10.913

```
#(...) 
```

是简写

```
(fn [arg1 arg2 ...] (...)) 
```

（其中 argN 的数量取决于您体内有多少 %N）。所以当你写：

```
#(%) 
```

它被翻译成：

```
(fn [arg1] (arg1)) 
```

请注意，这与您的第一个匿名函数不同，它类似于：

```
(fn [arg1] arg1) 
```

您的版本将 arg1 作为值返回，扩展速记的版本尝试将其作为函数调用。由于字符串不是有效的函数，您会收到错误消息。

由于简写在主体周围提供了一组括号，因此它只能用于执行单个函数调用或特殊形式。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-11-03T05:30:46.007

正如其他答案已经很好地指出的那样，`#(%)`您发布的内容实际上扩展为类似于`(fn [arg1] (arg1))`，这与`(fn [arg1] arg1)`.

@John Flatness 指出您可以只使用`identity`，但如果您正在寻找一种`identity`使用`#(...)`调度宏编写的方法，您可以这样做：

```
#(-> %) 
```

通过将`#(...)`dispatch 宏与[`->`threading 宏](http://clojuredocs.org/clojure_core/clojure.core/-%3E)结合起来，它会扩展为类似 的东西`(fn [arg1] (-> arg1))`，然后再扩展为`(fn [arg1] arg1)`，这正是您想要的。我还发现`->`and`#(...)`宏组合有助于编写返回向量的简单函数，例如：

```
#(-> [%2 %1]) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-11-03T01:33:01.710

当你使用 时`#(...)`，你可以想象你在写`(fn [args] (...))`，*包括*你在英镑之后开始的括号。

因此，您的非工作示例转换为：

```
((fn [s] (s)) "Eh") 
```

这显然不起作用，因为您试图*调用*字符串“Eh”。您的示例`str`有效，因为现在您的功能是`(str s)`而不是`(s)`. `(identity s)`将更接近于您的第一个示例，因为它不会强制 str.

如果您考虑一下，这是有道理的，因为除了这个完全最小的示例之外，每个匿名函数都会调用*something*，因此需要另一个嵌套的括号集来实际进行调用有点愚蠢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T15:20:19.280

如果您不确定匿名函数将转换为什么，您可以使用该`macroexpand`过程来获取表示。请记住在将表达式传递给macroexpand 之前引用它。在这种情况下，我们可以这样做：

```
(macroexpand '#(%))
# => (fn* [p1__281#] (p1__281#)) 
```

这可能会打印出`p1__281#`代表变量的不同名称`%`。

您也可以`macroexpand`完全调用。

```
(macroexpand '(#(%) "Eh"))
# => ((fn* [p1__331#] (p1__331#)) "Eh") 
```

通过用短名称替换神秘的变量名称，转换为更易于阅读。我们得到了接受的答案所报告的内容。

```
# => ((fn* [s] (s)) "Eh") 
```

资源：

*   [https://clojure.org/guides/weird_characters#_n_anonymous_function_arguments](https://clojure.org/guides/weird_characters#_n_anonymous_function_arguments)
*   [https://clojuredocs.org/clojure.core/macroexpand](https://clojuredocs.org/clojure.core/macroexpand)*

# android - 如何点击适合所有手机的某个位置？

> ID：13204999
> 
> 赞同：0
> 
> 时间：2012-11-03T01:01:02.290
> 
> 标签：android

![在此处输入图像描述](../Images/17bd0b3910d7836d44a696aa194b1113.png)

我怎样才能做到这一点，以便我可以单击每个小图像，例如狂欢节、公园等，然后会发生一些事情，但它适用于所有手机尺寸？