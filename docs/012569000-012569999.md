# StackOverflow 问答 12569000-12569999

# jquery - 在 -webkit-transform:scale() 之后定位项目

> ID：12569000
> 
> 赞同：3
> 
> 时间：2012-09-24T16:18:48.287
> 
> 标签：jquery, css, webkit, dock

我正在尝试使用 jQuery 自动化 css 设置，我有类似的功能

```
$(".footer").css(foot_css)//pre-defined css object
//AND
$(".footer").hover(function(){
$(this).css("-webkit-transform", "scale(2)"); 
}); 
```

页脚设置为底部= 0（使用foot_css），但是当我缩放页脚时，它不会停留在底部= 0，一些文本位于屏幕下方，因此不可读。编辑：这也发生在左边，“.footer”类的左下角不在屏幕上。

那么如何将页脚“停靠”到底部？也许是一种更好的扩展方式（比 webkit 和 moz）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:03:06.613

当你使用`transform:scale`时，默认情况下它会在你重新缩放的元素中间重新缩放。如果您想定义转换的来源，只需在您的 css 中添加：`transform-origin: horizontal vertical;` 例如

```
.myScaledObj{
   -webkit-transform: scale(0.5);
   -webkit-transform-origin: 50% 0%; 
} 
```

这将重新缩放您的对象，变换的原点位于其顶部

# .htaccess - 如何为单个文件对另一个文件夹进行 htaccess 重写？

> ID：12569007
> 
> 赞同：0
> 
> 时间：2012-09-24T16:19:33.237
> 
> 标签：.htaccess

我们将网站的一部分从一个子文件夹移动到另一个子文件夹。我想将此文件夹中的文件的永久重定向（301）放入 htaccess 中（有些也更改了文件名，所以我不能只为整个文件夹设置一个规则）。这就是我正在尝试的

```
RewriteRule ^search/tutorial-search.html$ db/tutorial.php [R=301] 
```

但这不起作用，我现在输入旧 URL 时收到 404 响应。我觉得这很奇怪，因为我有一个适用于年龄的规则，它看起来像这样：

```
RewriteRule ^search/tutorial-search.html$ search/tutorial-search.php 
```

我真的看不出有什么大的区别。我也尝试了以下（除其他外），但它也不起作用

```
RewriteRule ^search/tutorial-search.html$ db/tutorial.php 
```

究竟是什么导致这个失败？只是为了确保我将所有这些都放在 htaccess 文件的完全相同的行中。是因为我正在重写到另一个文件夹吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:27:41.670

尝试在重写目标中添加前导斜杠，因为在重定向时，apache 可能会将 URL 路径与文件路径混淆。

```
RewriteRule ^search/tutorial-search.html$ /db/tutorial.php [R=301] 
```

# php - json_decode 在 php

> ID：12569008
> 
> 赞同：0
> 
> 时间：2012-09-24T16:19:47.143
> 
> 标签：php, json

我想对这个 json 文件使用 json_decode，但是出了点问题。几天前它工作正常，但现在返回 NULL。

```
<?php 

$url = 'http://opendata.diavgeia.gov.gr/api/decisions?org=eot&output=json'; 

function works2($url) 
{ 
   $opts = array( 
     'http'=>array( 
       'method'=>"GET", 
       'header'=>"Connection:Keep-Alive\r\nAccept:*/*\r\n" 
     ) 
   ); 

   $context = stream_context_create($opts); 
   $retstr = file_get_contents($url,false,$context); 
   return $retstr; 
} 

var_dump(json_decode(works2($url)));
?> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:27:45.153

我使用了 JSON 验证器，并且 url 似乎提供了 INVALID JSON

尝试使用 jsonList 在此处验证 URL [http://jsonlint.com/](http://jsonlint.com/)

我明白了

```
 Parse error on line 822:
 ...         "subject": "Ματαίωση του πρόχει
 -----------------------^
 Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

如果 URL 提供了正确的 JSON 字符串，您的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:12:14.440

works2 结果还可以。也许 json 编码的内容太大或（可能）包含不需要的字符或格式错误的序列。看看默认的 opendata 输出。它是xml格式，但下载时间很长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:24:53.363

我不认为`json_decode`停止为你工作。而是服务器响应。您是否打印了 $retstr 以确保它不是空的或损坏的？

# jquery - jquery悬停/鼠标悬停错误

> ID：12569012
> 
> 赞同：0
> 
> 时间：2012-09-24T16:20:08.377
> 
> 标签：jquery, hover, mouseover, mouseout

我试图在鼠标悬停时显示工具提示并在鼠标悬停时隐藏它。

我用了 ：

```
var keepTab = false;
            var sC = $('#SwitchContent')
             $('#navbar img').mouseenter(function(){
                sC.show("slow");
                LoadPage($(this).attr('alt'));
                keepTab = false;
                sC.removeClass("selected");
            }).mouseout(function(){
                if (!keepTab){
                    sC.fadeOut("slow");
                }
            });

            $('#navbar img').click(function(){
                keepTab = true;
                sC.addClass("selected");
            }); 
```

和html

```
<div id="navbar" style="margin-top: <?= $navBar_margintop ?>px">
  <img src="images/tab9.gif" alt="tab9" style="margin-right: <?= $margintab9 ?>px" height="<?= $navbarH[8] ?>" width="<?= $navbarW[8] ?>"/>
  <div class="clear"></div>
  <img src="images/tab1.gif" alt="tab1" style="margin-right: <?= $margintab1 ?>px" height="<?= $navbarH[0] ?>" width="<?= $navbarW[0] ?>"/>
   <div class="clear"></div>
  <img src="images/tab2.gif" alt="tab2" style="margin-right: <?= $margintab2 ?>px" height="<?= $navbarH[1] ?>" width="<?= $navbarW[1] ?>"/>
  <div class="clear"></div>
  ....
  <img src="images/tab8.gif" alt="tab8" style="margin-right: <?= $margintab8 ?>px" height="<?= $navbarH[7] ?>" width="<?= $navbarW[7] ?>"/> 
```

我也试过悬停。但他们都有一个错误，即显示和隐藏动作陷入循环（仅部分时间）。这发生在所有浏览器中。

一个活生生的例子可以在 [这里查看](http://www.s-maof.com/LandingPages/PRO/)

谢谢。

编辑：

也试过mouseenter ..

# azure-sql-database - Atlassian Crowd 与 SQL Server Azure，有人遇到性能问题吗？

> ID：12569013
> 
> 赞同：1
> 
> 时间：2012-09-24T16:20:12.267
> 
> 标签：azure-sql-database, atlassian-crowd

几天来，我一直在尝试使用 SQL Server Azure 作为本地 Atlassian Crowd 的数据存储，但遇到了巨大的性能问题。

例如，人群管理应用程序非常慢，几乎无法使用。

我想知道成功建立这种解决方案的人是否可以给我一些建议。

到目前为止我做了什么：

1.  在本地 SQL2008R2 数据库上设置本地 Atlassian Crowd 2.4.2
2.  编写数据库脚本并在 azure 数据库上运行脚本（无法直接在 azure 上设置，因为设置脚本错过了表 hibernate_unique_key 上的 azure 强制聚集索引）
3.  将强制聚集索引添加到 azure hibernate_unique_key 表
4.  使用 ssl 设置 jdbc 连接

我将人群连接到数据库没有问题，但一切都很慢。人群启动需要大约 5 分钟，而使用本地 sql 服务器需要大约 20 秒。到人群管理 Web 控制台的每次往返都需要大约 30 秒。

我的数据库小于 1Mb。azure 中的查询执行摘要不显示任何有问题的查询。

我忘了提到 SQL Azure Db 对 SQL Server Manager 或本地 .Net Web App 的反应性很强

我尝试了 jtds jdbc 驱动程序和 MS JDBC 驱动程序 4.0，两者都具有数据加密功能。我尝试了人群提供的两种sqlDialect。它保持非常缓慢。

我尝试按照 MS JDBC 4.0 驱动程序（HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\KeepAliveTime、KeepAliveInterval、TcpMaxDataRetransmission）的说明为 Azure 设置特殊注册表项

也许它来自：

*   我不是从 Azure 上的人群完成的干净设置开始的事实（因为聚集索引问题）
*   Sql Azure 使用 UTC 时间，使“某事”每次都过期。

如果有人对这个问题有建议，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:49:59.047

抱歉 - 我没有直接使用 Crowd 的经验。

我在这里可能会遇到麻烦，但是十分之九的情况下，远程安装的客户端应用程序在针对 SQL 数据库的基本性能测试（这就是现在所说的方式）失败时，应用程序层非常健谈（或非常笨重），有几十个或每个屏幕/功能的往返次数更差，或者一直返回所有记录。这通常发挥作用的原因是由于 SQL 数据库通过一个通常比本地网络慢的网络链接很远，而且在它之上的流量总是加密的（意味着有更多的数据包要转移）。

除了使用更好的设计重写应用程序之外，解决此类问题的唯一方法是尝试将 Crowd 控制台部署在云中的 VM 中，与 SQL 数据库实例位于同一数据中心。那时，您的控制台将与您的数据库在同一个网络上，如果我的理论成立，它应该会快得多。

# python - 将值从字典分配给对象

> ID：12569014
> 
> 赞同：3
> 
> 时间：2012-09-24T16:20:29.583
> 
> 标签：python

我经常需要做这样的事情：

```
"Some dictionary with values obtained somehow (e.g. submitted form values)"
my_dict = {
    'name': 'John',
    'surname': 'Doe',
    'age': 27,
    'hair_color': 'green',
}

"object person is some instance of class representing person"
person.name = my_dict['name']
person.surname = my_dict['surname']
person.age = my_dict['age']
person.hair_color = my_dict['hair_color'] 
```

我认为这是很多重复。你用什么方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T16:23:33.420

```
for attr, val in my_dict.items():
    setattr(person, attr, val) 
```

如果`my_dict`可能包含您不想复制到的任何键，请`person`创建一个您想要复制的键列表并执行以下操作：

```
key_list = ['name', 'surname', 'age', 'hair_color']
for attr in key_list:
    setattr(person, attr, my_dict[attr]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:24:27.530

由于可以通过字典访问实例的属性，因此请使用`instance.__dict__`：

```
>>> for item in my_dict:
        person.__dict__[item]=my_dict[item] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:29:59.477

已经有一个很好的问答：[How to create objects on the fly in python?](https://stackoverflow.com/questions/8575895/how-to-create-objects-on-the-fly-in-python)

在你的情况下：

```
person = type('Person', (object,), my_dict)
print person.name 
```

# iphone - 使用 iOS 的 ExtAudioFileWrite 将音频样本的缓冲区写入 aac 文件

> ID：12569015
> 
> 赞同：6
> 
> 时间：2012-09-24T16:20:35.397
> 
> 标签：iphone, c++, objective-c, ios, extaudiofile

更新：我已经弄清楚了，并将我的解决方案发布为我自己问题的答案（如下）

我正在尝试使用 AAC 格式的 ExtAudioFileWrite 将音频样本的简单缓冲区写入文件。

我已经使用下面的代码将单声道缓冲区写入 .wav 文件来实现这一点 - 但是，我不能为立体声或 AAC 文件执行此操作，这是我想要做的。

这是我到目前为止...

```
CFStringRef fPath;
fPath = CFStringCreateWithCString(kCFAllocatorDefault,
                                  "/path/to/my/audiofile/audiofile.wav",
                                  kCFStringEncodingMacRoman);

OSStatus err;

int mChannels = 1;
UInt32 totalFramesInFile = 100000;

Float32 *outputBuffer = (Float32 *)malloc(sizeof(Float32) * (totalFramesInFile*mChannels)); 

////////////// Set up Audio Buffer List ////////////

AudioBufferList outputData; 
outputData.mNumberBuffers = 1;
outputData.mBuffers[0].mNumberChannels = mChannels; 
outputData.mBuffers[0].mDataByteSize = 4 * totalFramesInFile * mChannels;
outputData.mBuffers[0].mData = outputBuffer;

Float32 audioFile[totalFramesInFile*mChannels];

for (int i = 0;i < totalFramesInFile*mChannels;i++)
{
    audioFile[i] = ((Float32)(rand() % 100))/100.0;
    audioFile[i] = audioFile[i]*0.2;
}

outputData.mBuffers[0].mData = &audioFile;

CFURLRef fileURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault,fPath,kCFURLPOSIXPathStyle,false);

ExtAudioFileRef audiofileRef;

// WAVE FILES

AudioFileTypeID fileType = kAudioFileWAVEType;
AudioStreamBasicDescription clientFormat;
clientFormat.mSampleRate = 44100.0;
clientFormat.mFormatID = kAudioFormatLinearPCM;
clientFormat.mFormatFlags = 12;
clientFormat.mBitsPerChannel = 16;
clientFormat.mChannelsPerFrame = mChannels;
clientFormat.mBytesPerFrame = 2*clientFormat.mChannelsPerFrame;
clientFormat.mFramesPerPacket = 1;
clientFormat.mBytesPerPacket = 2*clientFormat.mChannelsPerFrame;

// open the file for writing
err = ExtAudioFileCreateWithURL((CFURLRef)fileURL, fileType, &clientFormat, NULL, kAudioFileFlags_EraseFile, &audiofileRef);

if (err != noErr)
{
    cout << "Problem when creating audio file: " << err << "\n";
}

// tell the ExtAudioFile API what format we'll be sending samples in
err = ExtAudioFileSetProperty(audiofileRef, kExtAudioFileProperty_ClientDataFormat, sizeof(clientFormat), &clientFormat);

if (err != noErr)
{
    cout << "Problem setting audio format: " << err << "\n";
}

UInt32 rFrames = (UInt32)totalFramesInFile;
// write the data
err = ExtAudioFileWrite(audiofileRef, rFrames, &outputData);

if (err != noErr)
{
    cout << "Problem writing audio file: " << err << "\n";
}

// close the file
ExtAudioFileDispose(audiofileRef);

NSLog(@"Done!"); 
```

我的具体问题是：

*   如何为 AAC 设置 AudioStreamBasicDescription？
*   为什么我不能让立体声在这里正常工作？如果我将通道数（'mChannels'）设置为 2，那么我会正确获得左通道并在右通道中失真。

我非常感谢任何帮助 - 我想我已经阅读了几乎所有我能找到的页面并且我并不明智，因为虽然有类似的问题，但他们通常从一些输入音频文件中派生 AudioStreamBasicDescription 参数，我看不到结果。Apple 文档也无济于事。

提前谢谢了，

亚当

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T17:05:12.283

好的，经过一番探索，我已经弄清楚了。我将它包装成一个将随机噪声写入文件的函数。具体来说，它可以：

*   写入 .wav 或 .m4a 文件
*   以任一格式编写单声道或立体声
*   将文件写入指定路径

函数参数是：

*   要创建的音频文件的路径
*   通道数（最多 2 个）
*   布尔值：使用 m4a 压缩（如果为 false，则使用 pcm）

对于立体声 M4A 文件，该函数应调用为：

```
writeNoiseToAudioFile("/path/to/my/audiofile.m4a",2,true); 
```

函数的来源如下。我试图尽可能多地评论它——我希望它是正确的，它肯定对我有用，但是如果我遗漏了什么，请说“亚当，你做的有点不对”。祝你好运！这是代码：

```
void writeNoiseToAudioFile(char *fName,int mChannels,bool compress_with_m4a)
{
OSStatus err; // to record errors from ExtAudioFile API functions

// create file path as CStringRef
CFStringRef fPath;
fPath = CFStringCreateWithCString(kCFAllocatorDefault,
                                  fName,
                                  kCFStringEncodingMacRoman);

// specify total number of samples per channel
UInt32 totalFramesInFile = 100000;      

/////////////////////////////////////////////////////////////////////////////
////////////// Set up Audio Buffer List For Interleaved Audio ///////////////
/////////////////////////////////////////////////////////////////////////////

AudioBufferList outputData; 
outputData.mNumberBuffers = 1;
outputData.mBuffers[0].mNumberChannels = mChannels;    
outputData.mBuffers[0].mDataByteSize = sizeof(AudioUnitSampleType)*totalFramesInFile*mChannels;

/////////////////////////////////////////////////////////////////////////////
//////// Synthesise Noise and Put It In The AudioBufferList /////////////////
/////////////////////////////////////////////////////////////////////////////

// create an array to hold our audio
AudioUnitSampleType audioFile[totalFramesInFile*mChannels];

// fill the array with random numbers (white noise)
for (int i = 0;i < totalFramesInFile*mChannels;i++)
{
    audioFile[i] = ((AudioUnitSampleType)(rand() % 100))/100.0;
    audioFile[i] = audioFile[i]*0.2;
    // (yes, I know this noise has a DC offset, bad)
}

// set the AudioBuffer to point to the array containing the noise
outputData.mBuffers[0].mData = &audioFile;

/////////////////////////////////////////////////////////////////////////////
////////////////// Specify The Output Audio File Format /////////////////////
/////////////////////////////////////////////////////////////////////////////

// the client format will describe the output audio file
AudioStreamBasicDescription clientFormat;

// the file type identifier tells the ExtAudioFile API what kind of file we want created
AudioFileTypeID fileType;

// if compress_with_m4a is tru then set up for m4a file format
if (compress_with_m4a)
{
    // the file type identifier tells the ExtAudioFile API what kind of file we want created
    // this creates a m4a file type
    fileType = kAudioFileM4AType;

    // Here we specify the M4A format
    clientFormat.mSampleRate         = 44100.0;
    clientFormat.mFormatID           = kAudioFormatMPEG4AAC;
    clientFormat.mFormatFlags        = kMPEG4Object_AAC_Main;
    clientFormat.mChannelsPerFrame   = mChannels;
    clientFormat.mBytesPerPacket     = 0;
    clientFormat.mBytesPerFrame      = 0;
    clientFormat.mFramesPerPacket    = 1024;
    clientFormat.mBitsPerChannel     = 0;
    clientFormat.mReserved           = 0;
}
else // else encode as PCM
{
    // this creates a wav file type
    fileType = kAudioFileWAVEType;

    // This function audiomatically generates the audio format according to certain arguments
    FillOutASBDForLPCM(clientFormat,44100.0,mChannels,32,32,true,false,false);
}

/////////////////////////////////////////////////////////////////////////////
///////////////// Specify The Format of Our Audio Samples ///////////////////
/////////////////////////////////////////////////////////////////////////////

// the local format describes the format the samples we will give to the ExtAudioFile API
AudioStreamBasicDescription localFormat;
FillOutASBDForLPCM (localFormat,44100.0,mChannels,32,32,true,false,false);

/////////////////////////////////////////////////////////////////////////////
///////////////// Create the Audio File and Open It /////////////////////////
/////////////////////////////////////////////////////////////////////////////

// create the audio file reference
ExtAudioFileRef audiofileRef;

// create a fileURL from our path
CFURLRef fileURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault,fPath,kCFURLPOSIXPathStyle,false);

// open the file for writing
err = ExtAudioFileCreateWithURL((CFURLRef)fileURL, fileType, &clientFormat, NULL, kAudioFileFlags_EraseFile, &audiofileRef);

if (err != noErr)
{
    cout << "Problem when creating audio file: " << err << "\n";
}

/////////////////////////////////////////////////////////////////////////////
///// Tell the ExtAudioFile API what format we'll be sending samples in /////
/////////////////////////////////////////////////////////////////////////////

// Tell the ExtAudioFile API what format we'll be sending samples in 
err = ExtAudioFileSetProperty(audiofileRef, kExtAudioFileProperty_ClientDataFormat, sizeof(localFormat), &localFormat);

if (err != noErr)
{
    cout << "Problem setting audio format: " << err << "\n";
}

/////////////////////////////////////////////////////////////////////////////
///////// Write the Contents of the AudioBufferList to the AudioFile ////////
/////////////////////////////////////////////////////////////////////////////

UInt32 rFrames = (UInt32)totalFramesInFile;
// write the data
err = ExtAudioFileWrite(audiofileRef, rFrames, &outputData);

if (err != noErr)
{
    cout << "Problem writing audio file: " << err << "\n";
}

/////////////////////////////////////////////////////////////////////////////
////////////// Close the Audio File and Get Rid Of The Reference ////////////
/////////////////////////////////////////////////////////////////////////////

// close the file
ExtAudioFileDispose(audiofileRef);

NSLog(@"Done!");
} 
```

不要忘记导入 AudioToolbox 框架并包含头文件：

```
#import <AudioToolbox/AudioToolbox.h> 
```

# python - 为什么允许向已经实例化的对象添加属性？

> ID：12569018
> 
> 赞同：67
> 
> 时间：2012-09-24T16:20:51.980
> 
> 标签：python, attributes, python-3.x, declaration

我正在研究python，虽然我认为我了解了Python的整个概念和概念，但今天我偶然发现了一段我没有完全理解的代码：

假设我有一个应该定义 Circles 但缺少主体的类：

```
class Circle():
    pass 
```

由于我没有定义任何属性，我该怎么做：

```
my_circle = Circle()
my_circle.radius = 12 
```

奇怪的是 Python 接受了上述声明。我不明白为什么 Python 不提出`undefined name error`. 我确实明白，通过*动态类型*，我只是在需要时将变量绑定到对象，但是类中不应该`radius`存在一个属性`Circle`来允许我这样做吗？

**编辑**：您的答案中有很多精彩的信息！**谢谢大家所有这些精彩的答案！**很遗憾，我只能将一个标记为答案。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-24T16:28:41.113

一个主要原则是*没有声明这样的东西*。也就是说，你永远不会声明“这个类有一个方法 foo”或“这个类的实例有一个属性 bar”，更不用说声明要存储在那里的对象的类型了。您只需定义一个方法、属性、类等，它就会被添加。正如 JBernardo 指出的那样，任何`__init__`方法都做同样的事情。将新属性的创建任意限制为 name 的方法没有多大意义`__init__`。有时存储一个`__init__`实际上没有该名称的函数（例如装饰器）很有用，而这样的限制会破坏这一点。

现在，这并非普遍正确。内置类型省略了此功能作为优化。通过[`__slots__`](http://docs.python.org/reference/datamodel.html#slots)，您还可以在用户定义的类上防止这种情况。但这仅仅是空间优化（不需要每个对象都有字典），而不是正确性。

如果你想要一个安全网，那么，太糟糕了。Python 没有提供一个，而且你不能合理地添加一个，最重要的是，拥抱该语言的 Python 程序员会避开它（阅读：几乎所有你想与之合作的人）。测试和纪律，对于确保正确性还有很长的路要走。`__init__` *如果可以避免*的话，不要随意编造属性，做自动化测试。由于这样的诡计，我很少`AttributeError`遇到逻辑错误，而且在发生的那些错误中，几乎所有错误都被测试捕获了。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-09-24T17:02:08.747

只是为了澄清这里讨论中的一些误解。这段代码：

```
class Foo(object):
    def __init__(self, bar):
        self.bar = bar

foo = Foo(5) 
```

而这段代码：

```
class Foo(object):
    pass

foo = Foo()
foo.bar = 5 
```

完全*等价*。真的没有区别。它做同样的事情。这种区别在于，在第一种情况下，它被封装了，很明显 bar 属性是 Foo 类型对象的正常部分。在第二种情况下，情况是否如此尚不清楚。

在第一种情况下，您不能创建没有 bar 属性的 Foo 对象（嗯，您可能可以，但不容易），在第二种情况下，除非您设置，否则 Foo 对象将没有 bar 属性。

因此，尽管代码在编程上是等效的，但它在不同的情况下使用。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-24T16:27:14.137

Python 允许您在几乎任何实例（或类）上存储任何名称的属性。可以通过在 C 中编写类（如内置类型）或使用`__slots__`仅允许某些名称来阻止这种情况。

它起作用的原因是大多数实例将它们的属性存储在字典中。是的，一个普通的 Python 字典，就像你用`{}`. 字典存储在一个名为 的实例属性中`__dict__`。事实上，有人说“类只是字典的语法糖”。也就是说，你可以用字典做你能做的一切；课程只是让它更容易。

您习惯于必须在编译时定义所有属性的静态语言。在 Python 中，类定义是*执行*的，而不是编译的；类和其他对象一样是对象；添加属性就像在字典中添加项目一样简单。这就是为什么 Python 被认为是一种*动态*语言的原因。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-09-24T16:22:31.473

不，python 就是这样灵活的，它不强制您可以在用户定义的类中存储哪些属性。

但是有一个技巧，在类定义上使用[`__slots__`属性](http://docs.python.org/reference/datamodel.html#slots)`__slots__`会阻止您创建序列中未定义的其他属性：

```
>>> class Foo(object):
...     __slots__ = ()
... 
>>> f = Foo()
>>> f.bar = 'spam'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Foo' object has no attribute 'bar'
>>> class Foo(object):
...     __slots__ = ('bar',)
... 
>>> f = Foo()
>>> f.bar
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: bar
>>> f.bar = 'spam' 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-24T16:24:16.633

它创建 的`radius`数据成员`my_circle`。

如果您要求它，`my_circle.radius`它将引发异常：

```
>>> print my_circle.radius # AttributeError 
```

有趣的是，这并没有改变类；仅此一例。所以：

```
>>> my_circle = Circle()
>>> my_circle.radius = 5
>>> my_other_circle = Circle()
>>> print my_other_circle.radius # AttributeError 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-24T16:34:27.953

Python 中有两种类型的属性 -`Class Data Attributes`和`Instance Data Attributes`.

Python 为您提供了动态创建`Data Attributes`的灵活性。

由于实例数据属性与实例相关，因此您也可以在`__init__`方法中执行此操作，也可以在创建实例后执行此操作。

```
class Demo(object):
    classAttr = 30
    def __init__(self):
         self.inInit = 10

demo = Demo()
demo.outInit = 20
Demo.new_class_attr = 45; # You can also create class attribute here.

print demo.classAttr  # Can access it 

del demo.classAttr         # Cannot do this.. Should delete only through class

demo.classAttr = 67  # creates an instance attribute for this instance.
del demo.classAttr   # Now OK.
print Demo.classAttr 
```

所以，你看到我们创建了两个实例属性，一个在内部`__init__`，一个在外部，在创建实例之后..

但不同的是，内部创建的实例属性`__init__`将被设置为所有实例，而如果在外部创建，则可以为不同的实例设置不同的实例属性。

这与 Java 不同，在 Java 中，类的每个实例都有相同的实例变量集。

*   注意： - 虽然您可以通过实例访问类属性，但不能删除它。此外，如果您尝试通过实例修改类属性，您实际上会创建一个隐藏类属性的实例属性。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-13T06:59:13.767

# 如何防止创建新属性？

## 使用类

要控制新属性的创建，您可以覆盖该`__setattr__`方法。每次调用都会`my_obj.x = 123`调用它。

请参阅[文档](https://docs.python.org/3/reference/datamodel.html#object.__setattr__)：

```
class A:
  def __init__(self):
    # Call object.__setattr__ to bypass the attribute checking
    super().__setattr__('x', 123)

  def __setattr__(self, name, value):
    # Cannot create new attributes
    if not hasattr(self, name):
      raise AttributeError('Cannot set new attributes')
    # Can update existing attributes
    super().__setattr__(name, value)

a = A()
a.x = 123  # Allowed
a.y = 456  # raise AttributeError 
```

请注意，如果用户直接调用，仍然可以绕过检查`object.__setattr__(a, 'attr_name', attr_value)`。

## 使用数据类

使用`dataclasses`，您可以使用 禁止创建新属性`frozen=True`。它还将阻止更新现有属性。

```
@dataclasses.dataclass(frozen=True)
class A:
  x: int

a = A(x=123)
a.y = 123  # Raise FrozenInstanceError
a.x = 123  # Raise FrozenInstanceError 
```

注意：`dataclasses.FrozenInstanceError`是 AttributeError 的子类

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-07T13:07:10.880

`__slots__`正如delnan所说，您可以使用该属性获得此行为。但是它是一种节省内存空间和访问类型的方法这一事实并没有放弃它（也）是禁用动态属性的手段这一事实。

禁用动态属性是一个合理的做法，即使只是为了防止由于拼写错误导致的细微错误。“测试和纪律”很好，但依赖自动验证当然也没有错——也不一定是不合逻辑的。

此外，由于该`attrs`库在 2016 年达到了第 16 版（显然在最初的问题和答案之后），创建一个带有插槽的封闭类从未如此简单。

```
>>> import attr
...
... @attr.s(slots=True)
... class Circle:
...   radius = attr.ib()
...
... f = Circle(radius=2)
... f.color = 'red'
AttributeError: 'Circle' object has no attribute 'color' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-10T16:25:09.480

为了添加到[Conchylicultor 的答案](https://stackoverflow.com/a/59711821/1719931)，Python 3.10 添加了一个新参数到`dataclass`.

该`slots`参数将`__slots__`在类中创建属性，防止在 之外创建新属性`__init__`，但允许分配给现有属性。

如果`slots=True`，分配给未定义的属性将抛出`AttributeError`.

这是一个带有`slots`和的示例`frozen`：

```
from dataclasses import dataclass

@dataclass
class Data:
    x:float=0
    y:float=0

@dataclass(frozen=True)
class DataFrozen:
    x:float=0
    y:float=0

@dataclass(slots=True)
class DataSlots:
    x:float=0
    y:float=0

p = Data(1,2)
p.x = 5 # ok
p.z = 8 # ok

p = DataFrozen(1,2)
p.x = 5 # FrozenInstanceError
p.z = 8 # FrozenInstanceError

p = DataSlots(1,2)
p.x = 5 # ok
p.z = 8 # AttributeError 
```

# javascript - 在 HTML 表格的单元格中插入多行

> ID：12569020
> 
> 赞同：6
> 
> 时间：2012-09-24T16:20:58.717
> 
> 标签：javascript, jquery, html-table

我正在尝试使用 jquery 在 HTML 表的单元格中插入行，我想要这样的东西：

```
--------------
ID | Sec | Div
--------------
1  | S1  | D1
   | S2  | D2
   | S3  | D3
--------------
2  | S3  | D3
   | S4  | D4
   | S5  | D5
-------------- 
```

这是我到目前为止所拥有的：

```
function insertRows(this){

var Rows1 = '<tr><td> S1 </td></tr><tr><td> S2 </td></tr><tr><td> S3 </td></tr>'
var Rows2 = '<tr><td> S3 </td></tr><tr><td> S4 </td></tr><tr><td> S5 </td></tr>'

this.srcElement.parentElement.nextSibling.outerHTML = Rows1
this.srcElement.parentElement.nextSibling.nextSibling.outerHTML = Rows2

} 
```

所做的是，它将所有内容插入同一行，如下所示：

```
---------------------
ID | Sec     | Div
---------------------
1  | S1S2S3  | D1D2D3
---------------------
2  | S3S4S5  | D3D4D5
--------------------- 
```

我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T10:41:03.470

您可以在不使用 jquery 的情况下满足您的要求，只需将此代码粘贴到 body 标记中

```
 <table>
 <tr>
 <td >ID</td>
 <td>SEC</td>
 <td>DIV</td>

 </tr>
 <tr>
 <td rowspan="3">1</td>
 <td>S1</td>
 <td>D1</td>

 </tr>
 <tr>

 <td>S2</td>
<td>D2</td>

</tr>
<tr>

<td>S3</td>
<td>D3</td>

</tr>
<tr><td colspan="3">---------------------</td></tr>
<tr>
<td>ID</td>
<td>SEC</td>
<td>DIV</td>

</tr>
<tr>
<td rowspan="3">2</td>
<td>S1</td>
<td>D1</td>

</tr>
<tr>

<td>S2</td>
<td>D2</td>

</tr>
<tr>

<td>S3</td>
<td>D3</td>

</tr>
</table> 
```

在这里您可以找到实时示例[http://jsfiddle.net/Anujyadav123/AdQy3/](http://jsfiddle.net/Anujyadav123/AdQy3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:22:25.760

看看这里[在表上动态添加 colspan 和 rowspan](https://stackoverflow.com/questions/9109247/add-colspan-and-rowspan-on-table-on-the-fly)

***或者***

添加行是否重要，如果不是，您可以将值添加到单元格中

***例子：***

```
function showP(){
     txt1 = $($('#myTable').find('TR').find('TD')[1]).html()+'</br>S1'
     txt3 = $($('#myTable').find('TR').find('TD')[3]).html()+'</br>D1'

     $($('#myTable').find('TR').find('TD')[1]).html(txt1 )
     $($('#myTable').find('TR').find('TD')[3]).html(txt3 )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:38:34.117

`.innerHTML`在处理表格时相当破碎，至少在 IE 下是这样。

您的选择是：

1.  限制使用`.innerHTML`仅更改元素的内容`td`。
2.  用于`.innerHTML`替换整个表结构
3.  使用`DOM`方法来操作表格行和表格单元格。
    [https://developer.mozilla.org/en-US/docs/Traversing_an_HTML_table_with_JavaScript_and_DOM_Interfaces](https://developer.mozilla.org/en-US/docs/Traversing_an_HTML_table_with_JavaScript_and_DOM_Interfaces)

# sql-server - 如何自行加入表格以获取更多信息

> ID：12569021
> 
> 赞同：0
> 
> 时间：2012-09-24T16:21:01.270
> 
> 标签：sql-server, self-join

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)
> [如何使用 GROUP BY 在 SQL Server 中连接字符串？](https://stackoverflow.com/questions/273238/how-to-use-group-by-to-concatenate-strings-in-sql-server)

我有一个表客户（id、person_id、帐号），id 是主键。例如

```
id   person_id    account number
1    0001         acc00011
2    0001         acc00012
3    0002         acc00021 
```

现在我想编写一个查询来自我加入表以获取每个人的所有帐号。结果表应该是

```
person_id    account
0001         acc00011, acc00012
0002         acc00021 
```

如何编写查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:47:12.307

使用[FOR XML PATH](http://msdn.microsoft.com/en-us/library/ms189885.aspx)和[GROUP BY的](http://msdn.microsoft.com/en-us/library/ms177673.aspx)[相关子查询](http://msdn.microsoft.com/en-us/library/ms187638%28v=SQL.105%29.aspx)进行连接。使用[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)从结果中删除前面的逗号。

请参阅此处的示例：[http ://sqlfiddle.com/#!3/e5bd0/5](http://sqlfiddle.com/#!3/e5bd0/5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:31:43.470

除非您希望通过 person_id 将帐户连接在单个字符串中，否则您不能这样做。看到这个问题：

*   [如何创建 SQL Server 函数以将子查询中的多行“加入”到单个分隔字段中？](https://stackoverflow.com/questions/6899/is-there-a-way-to-create-a-sql-server-function-to-join-multiple-rows-from-a-su)
*   [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)
*   [如何使用 GROUP BY 在 SQL Server 中连接字符串？](https://stackoverflow.com/questions/273238/how-to-use-group-by-to-concatenate-strings-in-sql-server)

# javascript - Modernizr 在 IE8 中导致错误（异常处理？）

> ID：12569030
> 
> 赞同：4
> 
> 时间：2012-09-24T16:21:37.370
> 
> 标签：javascript, internet-explorer, internet-explorer-8, modernizr

我在 Internet Explorer 8 中使用 Modernizr 2.6.2 的网站之一出现错误。如果抛出异常但未捕获异常，似乎 IE <=8 会发疯，因此它到达这一行并完全失败：

```
 if (typeof target != "function") {
        throw new TypeError();
    } 
```

错误是：“抛出异常但未捕获”

如果这是我执行 Modernizr.something() 调用的结果，我可以将其包围在 try/catch 块中以修复错误，但在我未缩小的 Modernizr 构建中只有 149 行，并且没有更改源看起来我无法捕捉到异常……这是真的吗？

还有其他人有这个问题吗？我在任何地方都找不到它的记录。有什么建议么？

# python - 使用 cx_freeze 时如何从一个 Eclipse 项目引用到另一个项目

> ID：12569033
> 
> 赞同：1
> 
> 时间：2012-09-24T16:21:50.347
> 
> 标签：python, eclipse, cx-freeze

我有个问题

我有 Eclipse 工作空间，它包含来自另一个项目的 4project 每个项目引用。当我需要使用 cx_Freeze 制作可执行文件时，它无法将其他引用的项目导入其中？

谢谢

我试过这段代码：

```
base = None
from cx_Freeze import setup, Executable
if sys.platform == "win32":
    base = "Win32GUI"
exe = Executable(
    script="MyForm.py",
     base="Win32GUI",packages=['QtCore', 'QtGui',     'QtSvg','tkinter','time','os','cls_MyForm','threading','sys','DAL','FS_Watch_Collection'],
     compress=False, copyDependentFiles=False)    

setup(
    name = "First Version of File Watcher",
    version = "1",
    description = "File Watcher Program",
    executables = [exe]) 
```

这个代码：

```
from cx_Freeze import setup, Executable
#http://www.youtube.com/watch?v=XHcDHSWRCRQ
#http://www.python-forum.org/pythonforum/viewtopic.php?f=4&t=34501&hilit=cxfreeze
includefiles = ['README.txt', 'CHANGELOG.txt']
includes = []
excludes = ['tkinter']
packages = ['pk_LocalStore','QtCore', 'QtGui', 'QtSvg','time','os','threading','sys']

setup(
    name = 'First Version of File Watcher',
    version = '0.1',
    description = 'File Watcher Program',
    author = 'ITE CO',
    author_email = 'info@from-masr.com',
    options = {'build_exe': {'excludes':excludes,'packages':packages,'include_files':includefiles}}, 
    executables = [Executable('MyForm.py')]
) 
```

但它不能正常工作

# mysql - MYSQL：将 von 内部（Intranet）推送到外部服务器的一种方式

> ID：12569037
> 
> 赞同：1
> 
> 时间：2012-09-24T16:22:04.303
> 
> 标签：mysql, replication, sync

我遇到了麻烦`MYSQL SYNC`。
**情况：**
在公司内部工作的数据库。现在应该可以在外部服务器上访问该副本。
**问题：**
我们可以从内部-> 外部进行连接，但不能从外部到内部。所以MYSQL复制不起作用。我可以设置一个从内部到外部服务器的 SSH 隧道，这是可行的。

有人有想法吗？

谢谢！埃利亚斯

# wix - 要包含在补丁 msp 文件中的自定义表

> ID：12569038
> 
> 赞同：0
> 
> 时间：2012-09-24T16:22:04.780
> 
> 标签：wix, msp

我们有一个 CustomTable 在创建时添加到我们的 msi 中。此自定义表包含一些二进制数据（xml 文件），当 msi 上传到我们的部署服务器时，我们的部署软件会读取这些数据。

我们现在有支持部署 msp 文件的需求。这意味着如果用户将 msp 文件上传到我们的部署服务器，我们的软件应该仍然能够读取 CustomTable 中的二进制数据。但是我一直无法找到一种方法来确保我们创建的 msp 文件包含相同的 CustomTable。

我知道 msp 包含更新的 xml，因为我使用 ORCA 查看更新的表和文件。不幸的是，我似乎无法以编程方式从我们的 CustomTable 读取数据，因为它（显然）不存在于补丁中。有谁知道从 msp 文件访问 CustomTable 的方法？

谢谢 - 如果需要澄清，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:00:11.183

补丁 (msp) 应该只包含对先前 MSI 软件包的更改。如果您没有在较新版本的 MSI 软件包中更改自定义表，则补丁中不会提及它。这是意料之中的。

应用补丁后，它会更改初始 MSI 软件包（实际上是对其进行修补）并运行重新安装。这意味着如果您读取自定义表的自定义操作未明确安排在重新安装时不运行，那么它将运行并找到自定义表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:55:49.123

好的，所以终于解决了我的问题。

由于我们没有原始 msi，我们可以在临时目录中创建一个空白 msi，然后使用 ApplyTransform 在此之上应用 msp。假设我们创建了预期的表，并用虚拟数据填充它（幸运的是，我们事先知道该表中预期的行），在我们的虚拟 msi 上应用补丁的过程允许我们成功查询 _Storages 表并访问包含新 xml 的更新流。然后可以在我们的 msp 上传期间进行处理。

不漂亮，但它有效。

# sql - 需要根据表 3 中的产品分别对两个表中的两列求和

> ID：12569040
> 
> 赞同：1
> 
> 时间：2012-09-24T16:22:08.060
> 
> 标签：sql, oracle11g, oracle-apex

我有三张桌子。
表 1：产品映射表，
表 2：FY12 销售额，
表 3：FY13 销售额。

基本上，我希望最终结果是三列：产品、FY12 数量、FY13 数量。

现在我将产品映射表加入到两个销售表中。如果我一次做一张销售表，我会得到正确的数字。一旦我尝试从另一张表中得到总和，数字就全部关闭了。

这是用于从一个表中获取数量的代码，但我无法弄清楚如何在结果中获取另一列，该列对另一个表中的相同产品分组求和。

```
select PRODUCT_MAPPING.PRODUCT_FAMILY as PRODUCT_FAMILY,
    PRODUCT_MAPPING.PRODUCT_CONFIG as PRODUCT_CONFIG,
    sum(CURRENTWEEK_PIPE.FY13_QUANTITY) as FY13_QUANTITY 
 from PRODUCT_MAPPING PRODUCT_MAPPING,
    CURRENTWEEK_PIPE CURRENTWEEK_PIPE 
 where CURRENTWEEK_PIPE.PRODUCT_ITEM=PRODUCT_MAPPING.PRODUCT_ITEM
    and PRODUCT_MAPPING.PRODUCT_CONFIG is not null
 group by PRODUCT_MAPPING.PRODUCT_FAMILY, PRODUCT_MAPPING.PRODUCT_CONFIG
 order by PRODUCT_MAPPING.PRODUCT_FAMILY ASC, PRODUCT_MAPPING.PRODUCT_CONFIG ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:25:24.260

你尝试使用子查询吗？

> 选择总和（CURRENTWEEK_PIPE.FY13_QUANTITY），总和（CURRENTWEEK_PIPE.FY12_QUANTITY）来自.....
> 
> 选择 PRODUCT_MAPPING.PRODUCT_FAMILY 作为 PRODUCT_FAMILY, PRODUCT_MAPPING.PRODUCT_CONFIG 作为 PRODUCT_CONFIG, (SELECT sum(CURRENTWEEK_PIPE.FY13_QUANTITY), sum(CURRENTWEEK_PIPE.FY12_QUANTITY) 来自....... PRODUCT_MAPPING.PRODUCT_ITEM 和 PRODUCT_MAPPING.PRODUCT_CONFIG 不是空组，按 PRODUCT_MAPPING.PRODUCT_FAMILY、PRODUCT_MAPPING.PRODUCT_CONFIG 顺序按 PRODUCT_MAPPING.PRODUCT_FAMILY ASC、PRODUCT_MAPPING.PRODUCT_CONFIG ASC

# javascript - 在 JVM 中运行 node.js 模块（更具体地说是 YUIDoc）

> ID：12569042
> 
> 赞同：1
> 
> 时间：2012-09-24T16:22:14.717
> 
> 标签：javascript, node.js, maven, jvm, ringojs

我想在 JVM 中运行 node.js 模块 YUIDoc。这样做的原因是 YUIDoc 是我选择的 JavaScript 文档生成器，我希望能够从 maven-plugin 运行它，而无需预先安装 node.js、npm 等。

我看过[SprintStack](http://sprintstack.com/)，但到目前为止它似乎有点不成熟。
还有另一种方法可以做到这一点吗？

# java - 如何为语言添加 messagebundlefile。java中的属性

> ID：12569048
> 
> 赞同：0
> 
> 时间：2012-09-24T16:22:32.970
> 
> 标签：java

我很可能将英语单词转换成印地语……通过使用……

**java.util.Locale；**

**java.util.ResourceBundle；**

或文本文件中的关键字文件（所有单词都已分配）

像这样

loginform.userid=प्रयोक्ता आईडी

loginform.password=पासवर्ड</p>

loginform.submit=प्रस्तुत करना

loginform.reset=रीसेटकरें

并将其用作消息包 en_hi.properties......

我如何使用或将文本文件转换为 .properties？

并在我的程序中使用....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:28:54.907

将此文件另存为`messagebundle_hi.properties`

```
 ResourceBundle labels =
     ResourceBundle.getBundle("messagebundle",new Locale("hi", "IN")); 
```

[你可以在这里](http://docs.oracle.com/javase/tutorial/i18n/resbundle/propfile.html)找到更多信息

# java - java.lang.ArrayIndexOutOfBoundsException：2

> ID：12569049
> 
> 赞同：-1
> 
> 时间：2012-09-24T16:22:36.580
> 
> 标签：java

我正在尝试将 java 连接到 sql。虽然我是 javam 的新手，但我似乎无法找出原因。

```
java.lang.ArrayIndexOutOfBoundsException: 2 
```

你能帮助我并告诉我如何解决这个问题吗？

```
try{
       Connection con = dbConnection();

       String lname = this.last.getText();
       String fname = this.first.getText();
       String mname = this.mid.getText();
       String ad = this.add.getText();
       String bd = this.bday.getText();
       String ag = this.edad.getText();
       String nom = this.no.getText();
       String per = this.person.getText();

       String query = "INSERT INTO Personal Category    (Lastname,Firstname,Middle,Address,Birthday,Age,No,Person) VALUES (?,?)"; //to insert to database

       PreparedStatement pre;

       pre = con.prepareStatement(query);

       pre.setString(1, lname);
       pre.setString(2, fname);
       pre.setString(3, mname);
       pre.setString(4, ad);
       pre.setString(5, bd);
       pre.setString(6, ag);
       pre.setString(7, nom);
       pre.setString(8, per);

       pre.execute();//execute

       con.close();

    }catch (Exception e){

        System.out.println(e);

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:23:46.870

您不能设置比“？”更多的准备好的语句属性。在您的查询中。

"ArrayIndexOutOfBoundsException: 2" 表示它在第三个 setString 处失败（内部数组与所有 java 数组一样从零开始），这很正常，因为您只有两个 '?' 在查询中。

编辑 ：

由于表名中的空格，您可能会遇到错误。尝试

```
INSERT INTO [Personal Category]    (Lastname, ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:24:08.677

`?`您的声明中只有两个`VALUES()`。您需要拥有与列名一样多的名称。

尝试

```
String query = "INSERT INTO Personal Category    (Lastname,Firstname,Middle,Address,Birthday,Age,No,Person) VALUES (?,?,?,?,?,?,?,?)"; //to insert to database 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:24:11.303

你需要更多的问号——准确地说，还有六个。

```
String query = "INSERT INTO Personal Category    (Lastname,Firstname,Middle,Address,Birthday,Age,No,Person) VALUES (?,?,?,?,?,?,?,?)"; 
```

JDBC 将每个问号解释为参数的占位符，即您的程序承诺在准备好语句后提供一个值。当您在准备好的语句上调用`setString`, `setInt`,`setLong`等时，必须存在相应的编号占位符。否则，`java.lang.ArrayIndexOutOfBoundsException`被抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:31:58.270

你已经得到了“ArrayIndexOutOfBound”问题的答案。我将回答您的第二个问题“SQLException”并提供一些建议以改进您的代码。

那个 SQLException 正在发生，因为我猜你的表名。您的表名中有 2 个单词，这可能会使编译器感到困惑。

**建议**

1.  您正在执行preparedStatement 而不捕获其输出值。它会给你一个布尔值作为输出。然后只有你才能找到执行了什么样的事情。

2.  在这里，您似乎只是在插入数据，并且您确定您只是在插入数据。因此，如果是，请使用 executeUpdate() 而不是 execute() 方法。

3.  始终关闭 final() 块内的连接。这样，无论代码是否失败，您都可以始终确保连接已关闭。通过这样做，数据库高峰将得到顺利管理，不会保持不必要的连接打开。

让我们保持良好的软件工程概念:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T16:26:38.703

您应该拥有与`?`传递给该 INSERT 语句的参数数量一样多的占位符 ( )。

```
String query = "INSERT INTO PersonalCategory (Lastname, Firstname, Middle, " + 
"Address, Birthday, Age, No, Person) VALUES (?, ?, ?, ?, ?, ?, ?, ?)" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T16:28:46.040

`String query = "INSERT INTO Personal Category (Lastname,Firstname,Middle,Address,Birthday,Age,No,Person) VALUES (?,?)";`

问题在于**要在 VALUES 中传递的参数数量**，您只传递了 2 个**需要 8 个的参数。**

# visual-studio-2010 - 一种在控制台中查看预构建步骤输出的方法？

> ID：12569051
> 
> 赞同：2
> 
> 时间：2012-09-24T16:22:51.143
> 
> 标签：visual-studio-2010, console, pre-build-event

我在预构建步骤中编译了另一个需要时间的项目 - 在控制台中看不到任何输出，我只是在等待。有没有办法将它输出到控制台？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:26:02.567

您将需要更改 MS Build 的详细程度（我认为）。

转到**工具**、**选项...**、**项目和解决方案**、**构建和运行**并更改**MSBuild 项目构建输出详细程度**

![选项](../Images/933f3876002900ae3f84fb5380364bf5.png)

# java - 使用复选框在 Android 中共享首选项

> ID：12569054
> 
> 赞同：1
> 
> 时间：2012-09-24T16:23:03.040
> 
> 标签：java, android

我有一个使用复选框的首选项文件，我想用它来确定它何时被选中。但是在代码本身中，已经有一个布尔语句。请检查：

```
String key = LocationManager.KEY_PROXIMITY_ENTERING;

    Boolean enteringRegion = intent.getBooleanExtra(key, false);

    if (enteringRegion){
        Log.d(getClass().getSimpleName(), "entering");
    }
    else{
        Log.d(getClass().getSimpleName(), "exiting");
    }

boolean enteringRegions = prefs.getBoolean("alarm_entering", true);
     boolean exitRegion = prefs.getBoolean("alarm_exiting", false); 
```

# javascript - 我是否需要更改 JavaScript 代码以包含数值？

> ID：12569059
> 
> 赞同：0
> 
> 时间：2012-09-24T16:23:21.847
> 
> 标签：javascript, jquery

我有一个 ajax 文件上传器插件（[Max's File Uploader](http://www.phpf1.com/product/file-upload-script.html)），我在其中复制并粘贴了代码并进行了一些更改。

下面是一个 jQuery 代码，它测量文件是成功、不成功还是取消：

```
function stopImageUpload(success, imagefilename){

  var result = '';
  imagecounter++;

  var replaceForm = function(result) { 
    $(sourceImageForm).find('.imagef1_upload_form').html(result + '<label>Image File: <input name="fileImage" class="fileImage" type="file"/></label><br/><br/><label><input type="submit" name="submitImageBtn" class="sbtnimage" value="Upload" /></label><label><input type="button" name="imageClear" class="imageClear" value="Clear File"/></label>');
  } 

  var updateForm = function(result) { 
    $(sourceImageForm).find('.imagef1_upload_form').find('.display_content_image').html(result);
  } 

  var displayInfo;

  if (success === 1){
    result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span><br/><br/>';      
    $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
    displayInfo = replaceForm;      
  }
  else if (success === 2){
    result = '<span class="imagemsg'+imagecounter+'"> The file upload was canceled</span><br/><br/>';
    displayInfo = updateForm;    
  }
  else {
    result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span><br/><br/>';
    displayInfo = updateForm;  
  }
  displayInfo(result); 

)}; 
```

但我有一个 JavaScript 函数，它在 PHP 脚本中输出以下内容：

```
<script language="javascript" type="text/javascript">
    window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');
</script> 
```

不过，我的问题是，在上面说“真”或“假”的地方，应该是 1 : 2，因为我使用数值而不是字符串值来衡量文件的成功吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:26:52.953

您可以使用 1 和 2而不是使用`true`and 。`false`

```
 <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result ? 1 : 2; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');</script> 
```

# c - 需要解释输出

> ID：12569060
> 
> 赞同：3
> 
> 时间：2012-09-24T16:23:25.983
> 
> 标签：c, logical-operators, operator-precedence

代码：

```
#include<stdio.h>
int main()
{
    int j = 7, i = 4;
    j = j || ++i && printf("you can");
    printf("%d %d",i,j);
    return 0;
} 
```

输出：4 1

[代码链接][1]

1.  前缀运算符的优先级高于逻辑运算符。2.Logical`&&`的优先级高于logical `||`。
2.  在逻辑与（`&&`）中，如果第一个操作数的计算结果为假，则不会计算第二个，而在逻辑或（`||)`如果第一个操作数的计算结果为`true`，则不会计算第二个。
3.  完整的表达式计算结果为`true`，因此 j 为 1 。

疑点：

1.  为什么这里不遵循第一条规则？不应该是正确的吗？

    ```
    j=(j||((++i) &&printf("you can"))); 
    ```

`i`因此，在`printf`语句中的值变为 5。

为什么这里违反了一般优先规则？当两个运算符的优先级相同时，关联性就会起作用。编译器不应该先看看是评估`||`还是`&&`？

如果`||`首先评估，这不应该据我所知，那么结果是正确的。但是，如果它没有先被评估，那么你应该打印 can51。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:47:40.683

在这个表达式中：

```
j = j || ++i && printf("you can"); 
```

之后有一个序列点`||`，它从左到右进行评估。由于 j 不为零，因此不计算表达式的其余部分。因此，`j || (....)`变为真，即 1。由于`++i`未评估 i，因此 i 保持为 4。因此，输出为`4, 1`。

来自 C 标准：

> **附件 C**
> 
> — 以下运算符的第一个操作数的结尾：逻辑 AND && (6.5.13)；逻辑或 || （6.5.14）；有条件的？（6.5.15）；逗号 , (6.5.17)。

如果你`j`是零，那么`++i && printf("you can")`将被评估并`i`成为 5 并且`you can`也将被打印。您对 ++ 的优先级大于 || 是正确的，但由于存在序列点，`j||`因此首先进行评估。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:38:13.820

`j || ++i && printf("you can")`计算结果为真，由 表示`1`。因为它是一个 OR，并且因为 j 不为零，所以只计算 OR 的左手，所以不计算the`++i`和 the 。`printf`因此`j`为 1 并`i`保持为 4。

当然，真正的代码不应该每个人都做这样的事情。您应该始终以操作顺序显而易见的方式编写代码，并且您几乎不应该在 OR 语句中使用带有副作用的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T17:08:48.783

你在这里有什么：

```
j = j || ++i && printf("you can"); 
```

是一个逻辑表达式（没有数学发生）。让我们分解一下：

```
++i                // as a mathematical expression this is i=i+1 (5 in your case)
printf("you can"); // printf returns the number of chars written, (7) 
```

所以你会期望这是：

```
j = 7 || 5 && 7; 
```

上面表达式的输出只是 1。所以即使执行了这个，你也应该看到`j=1`. 那么为什么看不到`printf()`输出呢？原因是整个表达式**没有运行**。它不必。考虑：

```
result = TRUE || (anything else); 
```

任何“真实”的东西或与其他任何东西一起使用的东西都会返回真实的。编译器知道这一点，一旦它看到`7 ||`它等同于`true ||`并说“我知道的足够多，将 j 设置为 true 并继续前进”。

这就是表达式不增加 i 以及不打印“you can”的原因。现在，如果您要翻转表达式：

```
j = ++i && printf("you can") || j; 
```

逻辑保持不变，但编译器看不到 || 直到它评估了其他所有内容，所以 i 将被递增并且 printf 将被显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T17:29:32.967

我以两种方式运行该程序：

```
j = j || ++i && printf("you can"); 
```

然后，像这样：

```
j = j || (++i && printf("you can")); 
```

两者的输出都是`4 1`. 在我运行它们之前，由于逻辑或的从左到右的关联性，我希望从两者中得到完全相同的结果。无论如何，整个表达式将从左到右进行评估。括号的作用是确保一个表达式作为一个表达式被计算，并不一定意味着它将是第一个被计算的表达式。如果您想要更多证据，请尝试一些简单的方法：

```
j = 1 || (++i); 
```

即使`(++i)`在括号中，它也不会被评估。同样，因为从左到右的关联性。

# python - Python - 保持命令窗口打开以查看结果

> ID：12569063
> 
> 赞同：0
> 
> 时间：2012-09-24T16:23:57.137
> 
> 标签：python, python-2.7

我有一个文本文件（test.txt），其中包含

```
text1 text2 text text text 
```

下面是我的代码：

```
import codecs
BOM = codecs.BOM_UTF8.decode('utf8')
name = (raw_input("Please enter the name of the file: "))

with codecs.open(name, encoding='utf-8') as f:
    words=[]            #define words here
    for line in f:
        line = line.lstrip(BOM)
        words.extend(line.split())        #append words from each line to words  

if len(words) > 2:
    print 'There are more than two words'
    firstrow = words[:2]
    print firstrow                #indentation problem here
elif len(words) <2:                    #use if
    print 'There are under 2 words, no words will be shown'

raw_input("Press return to close this window...") 
```

当我运行 .py 文件时，我想保持命令窗口打开，这样我就可以看到所有的打印，但是由于某种原因它会立即关闭，当我在 shell 中运行它时它可以工作。由于某种原因， raw_input 不像我通常那样工作。这是我在 python 的第二天，所以我还是个新手！

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:23:27.403

您应该至少将文件读取代码放在 try/except 块中，这样您就可以看到发生了什么错误；

```
import codecs

BOM = codecs.BOM_UTF8.decode('utf8')
name = raw_input("Please enter the name of the file: ")

try:
  with codecs.open(name, encoding='utf-8') as f:
    words=[]            #define words here
    for line in f:
        line = line.lstrip(BOM)
        words.extend(line.split())
except Exception as details:
  print "Unexpected error:", details
  raw_input("Press return to close this window...")
  exit(1)

if len(words) > 2:
    print 'There are more than two words'
    firstrow = words[:2]
    print firstrow
elif len(words) <2:                    #use if
    print 'There are under 2 words, no words will be shown'

raw_input("Press return to close this window...") 
```

如果我尝试使用不存在的文件名：

```
Please enter the name of the file: bla
Unexpected error: [Errno 2] No such file or directory: 'bla'
Press return to close this window... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:27:29.570

新手问题，新手回答！！

我的 .py 目录中没有我的文本文件，仅在我的 shell 路径中，这就是它在那里工作的原因。

# php - 使用 curl PHP 登录 AOL 邮件

> ID：12569068
> 
> 赞同：1
> 
> 时间：2012-09-24T16:24:21.490
> 
> 标签：php, curl

研究了很久，结果不好，老是返回登录页面。我已经设置了帖子参数、标题、代理......

我使用 FireFox 的 Live HTTP Headers 插件来查看 POST 内容包含什么，然后将其设置为我的代码，但它仍然无法正常工作。这是我的代码：

```
function show($content)
{
    echo "<textarea>$content</textarea>";
}
function aol($mail,$pass, $_sock){
    $url="http://mail.aol.com";     
    $ch = curl_init();      
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, true);
    curl_setopt($ch, CURLOPT_PROXY, $_sock);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

    $content=curl_exec ($ch);
    $this->show($content);
    //Get SNS_SC
    $SNS_SC=explode('SNS_SC=', $content);
    $SNS_SC=explode(';', $SNS_SC[1]);
    $SNS_SC=$SNS_SC[0];     
    //  //Get Site State
    $siteState=explode('siteState" value="', $content);
    $siteState=explode('"', $siteState[1]);
    $siteState=$siteState[0];

    //Get usrd
    $usrd=explode('usrd" value="', $content);
    $usrd=explode('"', $usrd[1]);
    $usrd=$usrd[0];

    $url="https://my.screenname.aol.com/_cqr/login/login.psp";
    $post="sitedomain=sns.webmail.aol.com&siteId=&lang=en&locale=us&authLev=0&siteState=$siteState&isSiteStateEncoded=true&mcState=initialized&uitype=std&use_aam=0&offerId=newmail-en-us-v2&seamless=novl&regPromoCode=&usrd=$usrd&doSSL=&redirType=&xchk=false&tab=&lsoDP=&loginId=$mail&password=$pass";
    //ref
    $ref="https://my.screenname.aol.com/_cqr/login/login.psp?sitedomain=sns.webmail.aol.com&lang=en&seamless=novl&offerId=newmail-en-us-v2&authLev=0&siteState=$siteState&locale=us";

    //

    $arr[] = "Host: my.screenname.aol.com";
    $arr[] = "User-Agent: Mozilla/5.0 (Windows NT 6.2) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1";
    $arr[] = "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
    $arr[] = "Accept-Language: en-us,en;q=0.5";
    $arr[]="Accept-Encoding: gzip, deflate";
    $arr[]="Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
    $arr[] = "Keep-Alive: 300";
    $arr[] = "Connection: keep-alive";
    $arr[] = "Referer: ".$ref;
    $arr[] = "Cookie: SNS_SC=" . $SNS_SC ;
    $arr[] = "Content-Type: application/x-www-form-urlencoded";
    $arr[] = "Content-Length: " . strlen($post);
    //$arr[] = $post;
    //
    curl_setopt($ch, CURLOPT_HEADER, $arr);
    curl_setopt($ch, CURLOPT_POST ,1);
    curl_setopt ($ch, CURLOPT_POSTFIELDS, $post);       
    curl_setopt($ch, CURLOPT_URL, $url);                
    curl_setopt($ch, CURLOPT_REFERER, $ref);        

    $result=curl_exec ($ch);

    curl_close ($ch);
    //$this->show($result);
    echo $result;       
    return 0;
} 
```

任何想法？谢谢 ：）

# javascript - Google 地图 - 从 SQL 数据库（XML、PHP）放置标记

> ID：12569071
> 
> 赞同：0
> 
> 时间：2012-09-24T16:24:33.440
> 
> 标签：javascript, google-maps-api-3, xml-parsing

我正在通过 Google [https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)完成本教程，以将其用于我自己的 Web 应用程序，但遇到了一些问题。

首先，我创建了一个访问 PHP 文件以写入我的 SQL 数据库的表单，它表明一切运行顺利。它正确连接并按预期填写表格。

其次，使用上面的教程，我设法创建了一个生成正确 XML 的 PHP 文件。

第三，我创建了一个带有按钮的空白表单，该按钮在单击时运行 mapload() 函数。它应该执行以下操作：初始化地图，运行 xml 文件，并绘制点。

单击按钮时地图已正确初始化，但由于某种原因它没有绘制点。所以，我收集到我的 javascript 某处有错误。任何人都可以诊断并解决问题吗？这是来源：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>My Application</title>
<link href="styles.css" rel="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://maps.googleapis.com/maps/api/js?key=my-  key&sensor=false"
            type="text/javascript"></script>

<script>

$(document).ready(function(){
    $("#map").click(function(){
    $("#mapcontainer").slideToggle("slow");
    });  
});

//<![CDATA[

function mapload() {

var mapstyle = [{featureType: "administrative",stylers: [{ visibility: "off" }]},
    {featureType: "poi",stylers: [{ visibility: "off" }]},
    {featureType: "transit",stylers: [{ visibility: "off" }]},
    {featureType: "water",elementType: "geometry",stylers: [{ visibility: "simplified" },{ hue: "#1c252f" },{ saturation: "-55" },{lightness: "0" }]},
    {featureType: "water",elementType: "labels",stylers: [{ visibility: "off" }]},
    {featureType: "poi.park",elementType: "geometry",stylers: [{ visibility: "simplified" },{ hue: "1c2f22" },{ saturation: "-55" },{ lightness: "15" }]},
    {featureType: "poi.park",elementType: "labels",stylers: [{ visibility: "off" }]},
    {featureType: "road",elementType: "geometry",stylers: [{ visibility: "simplified" },{ saturation: 42 },{ hue: "#ffa200" },{ lightness: 33 }]},
    {featureType: "road",elementType: "labels",stylers: [{ hue: "#0019ff" },{ lightness: 51 },{ saturation: -88 }]}
]

var map = new google.maps.Map(document.getElementById("mapcontainer"), {
    center: new google.maps.LatLng(20,0),
    zoom: 3,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    navigationControl: false,
    streetViewControl: false,
    styles: mapstyle
});

var InfoWindow = new google.maps.InfoWindow;

downloadUrl ("mapexpand.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var id = markers[i] .getAttribute("id");
        var name = markers[i] .getAttribute("marker");
        var point = new google.maps.LatLng(
            parseFloat(markers[i] .getAttribute("Lat")),
            parseFloat(markers[i] .getAttribute("Lng")));
        var html = "<b>" + name + "</b> </br/>" + address;
        var markericon ='images/markericon.png';
        var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: markericon
        });
    bindInfoWindow(marker, map, InfoWindow, html);
    }
});
}

function bindInfoWindow(marker, map, wishWindow, html){
    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
    });
}

function downloadUrl (url, callback) {
    var request = window.ActiveXObject ?
    new ActiveXObject ('Microsoft.XMLHTTP') :
    new XMLHttpRequest;

    request.onreadystatechange = function() {
        if (request.readyState == 4) {
            request.onreadystatechange = doNothing;
            callback(request, request.status);
        }
    };

    request.open('GET', url, true);
    request.sent(null);

}

function doNothing() {}

//]]>

</script>

</head>

<body onload='getLocation()'>

<div id="graphic"></div>
<div id="textbox"></div>

     <form action="store.php" method="post">

            <textarea cols="37" rows="7" autofocus maxlength="255" name="text"></textarea>
            <input type="hidden" id="lat" name="latitude">
            <input type="hidden" id="long" name="longitude">
            <input type="submit" id ="sub" name="submit">

     </form>

<div id="mapcontainer">

</div>

    <form>

        <input type="button" id="map" class="mapexpand" onClick="mapload()"></input>

    </form>

     <script>

     var lat=document.getElementById("lat");
     var long=document.getElementById("long");

     function getLocation() {

         if (navigator.geolocation){
         navigator.geolocation.getCurrentPosition(showPosition);
         }
    }

     function showPosition(position) {
         lat.value=+position.coords.latitude;
         long.value=+position.coords.longitude;
     }

 </script>

</body>
</html> 
```

XML：输出 - 为保护隐私，删除了经纬度，但输出了正确的数据。

```
<markers>
<marker marker="sweettttt" latitude="(lat removed)" longitude="(lng removed)"/>
</markers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:57:48.420

确保路径`images/markericon.png`正确。因为如果路径错误，则不会显示任何标记。

# java - AspectJ - 构建和编译项目时出现 NullPointerException

> ID：12569074
> 
> 赞同：2
> 
> 时间：2012-09-24T16:24:46.793
> 
> 标签：java, eclipse, eclipse-plugin, aspectj, ajdt

**编辑：我通过启动一个全新的工作区并创建新项目来解决这个问题。现在一切都编译和构建。我还不能回答我自己的问题，所以我就把这个放在这里！我不会删除这篇文章，因为它可能对其他人有用。**

我不得不从头开始重新安装 Eclipse。我决定使用最新版本。我还从 Eclipse Marketplace 安装了 AspectJ 插件，因为我的项目使用了 AspectJ。现在，我之前已经做过几次了，但我通常会遇到 AspectJ 的问题。在清理、重建和读取项目几次之后，构建错误通常会消失。

但现在我无法超越它。每当我尝试构建我的项目时，都会收到以下错误：

```
java.lang.NullPointerException
    at org.aspectj.org.eclipse.jdt.internal.compiler.problem.ProblemReporter.unnecessaryCast(ProblemReporter.java:7066)
    at org.aspectj.org.eclipse.jdt.internal.compiler.ast.CastExpression.resolveType(CastExpression.java:512)
    at org.aspectj.org.eclipse.jdt.internal.compiler.ast.Assignment.resolveType(Assignment.java:150)
    at org.aspectj.org.eclipse.jdt.internal.compiler.ast.Expression.resolve(Expression.java:947) ... oBuildJob.run(AutoBuildJob.java:241)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)

Compile error: NullPointerException thrown: null 
```

那时构建失败。

我尝试过将 Indigo 版本的 Eclipse 与 Indigo 版本的 AJDT 一起使用。没运气。

我已经尝试恢复到 GIT 中的稳定分支并重建。再次，同样的错误。我试过在网上搜索，但没有找到任何东西。

我能够使用使用 Java 1.6 和 AspectJ 1.6 的 ant 脚本编译程序。

我不确定下一步该去哪里解决这个问题。我也想知道是否有人遇到过类似的问题。

谢谢！

# python - WingIDE——Python 2 和 Python 3

> ID：12569076
> 
> 赞同：2
> 
> 时间：2012-09-24T16:24:51.737
> 
> 标签：python

假设我同时安装了 Python 2 和 Python 3。在 WingIDE 101 中，如何选择使用 Python 2 还是 Python 3？

例如，我目前正在使用 python 3，现在我需要使用仅在 python 2 中支持的图像模块。如何更改它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T12:11:43.093

界面上有一个python图标。点击更改

# javascript - 通过复选框添加和删除 css 类

> ID：12569084
> 
> 赞同：0
> 
> 时间：2012-09-24T16:25:11.143
> 
> 标签：javascript, switch-statement, checkbox, addclass, removeclass

我正在使用这个切换器： [http](http://widowmaker.kiev.ua/checkbox/) ://widowmaker.kiev.ua/checkbox/ 我想添加一些自定义代码来更改一个在开关关闭后装饰容器（边框颜色）的 css 类。

CSS（萨斯方式）

```
.box {
    background: none repeat scroll 0 0 rgba(246, 246, 248, 0.7);
    padding: 4px;
    @include rounded_borders(#ccc, 0px, 6px);

    & .box-border {         
    background: #FFFFFF no-repeat scroll left top;      
        @include rounded_borders(#E0E5E9, 1px, 3px);
    }
} 
```

.JS：

```
(function($){
    /* Little trick to remove event bubbling that causes events recursion */
    var CB = function(e)
    {
        if (!e) var e = window.event;
        e.cancelBubble = true;
        if (e.stopPropagation) e.stopPropagation();
    };

    $.fn.checkbox = function(options) {
        /* IE6 background flicker fix */
        try { document.execCommand('BackgroundImageCache', false, true);    } catch (e) {}

        /* Default settings */
        var settings = {
            cls: 'jquery-checkbox',  /* checkbox  */
            empty: 'images/empty.png'  /* checkbox  */
        };

        /* Processing settings */
        settings = $.extend(settings, options || {});

        /* Adds check/uncheck & disable/enable events */
        var addEvents = function(object)
        {
            var checked = object.checked;
            var disabled = object.disabled;
            var $object = $(object);

            if ( object.stateInterval )
                clearInterval(object.stateInterval);

            object.stateInterval = setInterval(
                function() 
                {
                    if ( object.disabled != disabled )
                        $object.trigger( (disabled = !!object.disabled) ? 'disable' : 'enable');
                    if ( object.checked != checked )
                        $object.trigger( (checked = !!object.checked) ? 'check' : 'uncheck')
                }, 
                10 /* in miliseconds. Low numbers this can decrease performance on slow computers, high will increase responce time */
            );
            return $object;
        };
        //try { console.log(this); } catch(e) {}

        /* Wrapping all passed elements */
        return this.each(function() 
        {
            var ch = this; /* Reference to DOM Element*/
            var $ch = addEvents(ch); /* Adds custom events and returns, jQuery enclosed object */

            /* Removing wrapper if already applied  */
            if (ch.wrapper) ch.wrapper.remove();

            /* Creating wrapper for checkbox and assigning "hover" event */
            ch.wrapper = $('<span class="' + settings.cls + '"><span class="mark"><img src="' + settings.empty + '" /></span></span>');
            ch.wrapperInner = ch.wrapper.children('span:eq(0)');
            ch.wrapper.hover(
                function(e) { ch.wrapperInner.addClass(settings.cls + '-hover');CB(e); },
                function(e) { ch.wrapperInner.removeClass(settings.cls + '-hover');CB(e); }
            );

            /* Wrapping checkbox */
            $ch.css({position: 'absolute', zIndex: -1, visibility: 'hidden'}).after(ch.wrapper);

            /* Ttying to find "our" label */
            var label = false;
            if ($ch.attr('id'))
            {
                label = $('label[for='+$ch.attr('id')+']');
                if (!label.length) label = false;
            }
            if (!label)
            {
                /* Trying to utilize "closest()" from jQuery 1.3+ */
                label = $ch.closest ? $ch.closest('label') : $ch.parents('label:eq(0)');
                if (!label.length) label = false;
            }
            /* Labe found, applying event hanlers */
            if (label)
            {
                label.hover(
                    function(e) { ch.wrapper.trigger('mouseover', [e]); },
                    function(e) { ch.wrapper.trigger('mouseout', [e]); }
                );
                label.click(function(e) { $ch.trigger('click',[e]); CB(e); return false;});
            }
            ch.wrapper.click(function(e) { $ch.trigger('click',[e]); CB(e); return false;});
            $ch.click(function(e) { CB(e); });
            $ch.bind('disable', function() { ch.wrapperInner.addClass(settings.cls+'-disabled');}).bind('enable', function() { ch.wrapperInner.removeClass(settings.cls+'-disabled');});
            $ch.bind('check', function() { ch.wrapper.addClass(settings.cls+'-checked' );}).bind('uncheck', function() { ch.wrapper.removeClass(settings.cls+'-checked' );});

            /* Disable image drag-n-drop for IE */
            $('img', ch.wrapper).bind('dragstart', function () {return false;}).bind('mousedown', function () {return false;});

            /* Firefox antiselection hack */
            if ( window.getSelection )
                ch.wrapper.css('MozUserSelect', 'none');

            /* Applying checkbox state */
            if ( ch.checked )
                ch.wrapper.addClass(settings.cls + '-checked');

            if ( ch.disabled )
                ch.wrapperInner.addClass(settings.cls + '-disabled');           
        });
    }
})(jQuery); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:50:42.497

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>    
<script src="jquery-ui-1.8.24.custom.min.js" type="text/javascript"></script>
<!--This has the Effects Core and all four boxes checked in the UI Core-->
<style type="text/css">    
.menu {
    height: 35px;
    padding: 15px 20px 5px 20px;
    font-family: 'Open Sans Condensed', sans-serif;
    font-size: 1.3em;
    font-weight: bold;
    display: inline;
    float: right;
    background: none;
}
.menu-hover {
    height: 35px;
    padding: 15px 20px 5px 20px;
    font-family: 'Open Sans Condensed', sans-serif;
    font-size: 1.3em;
    font-weight: bold;
    display: inline;
    float: right;
    background: url(../img/header-bg2.png) repeat-x;
}
</style>
<script>
    $(document).ready(function () {
        $('.menu').hover(function () {
            setTimeout($(this).addClass("menu-hover"), 1000);
        }, function () {
            setTimeout($(this).removeClass("menu-hover"), 1000);
        });
    });
</script>

<a href="#"><div class="menu">Contact</div></a>
<a href="#"><div class="menu">Services</div></a>
<a href="#"><div class="menu">About</div></a>
<a href="index.html"><div class="menu">Home</div></a> 
```

# android - getStreamVolume 给出空指针异常

> ID：12569091
> 
> 赞同：-1
> 
> 时间：2012-09-24T16:25:38.650
> 
> 标签：android, audio

我在 5 个不同的应用程序中使用了相同的命令，没有问题（作为我的 SoundManager 的一部分）：

```
float streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); 
```

但现在它根据我的日志命令给了我一个空点异常。为什么？？？？？？

唯一改变的是声音。我已经使用日志命令来查看它正在尝试播放什么声音，并检查声音是否在声音管理器中并且它们是否存在，但这是否重要，因为所有这些命令都试图让手机设置播放音量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:07:41.750

谢谢韦斯利，就是这样。我补充说：

```
SoundManager.initSounds(getApplicationContext());
SoundManager.loadSounds(); 
```

现在工作正常。

# c# - 如何使这个单元可测试

> ID：12569099
> 
> 赞同：1
> 
> 时间：2012-09-24T16:25:57.150
> 
> 标签：c#, unit-testing, mstest

下面我有一些我无法进行单元测试的代码，因为它试图从 IIS7 读取设置，不幸的是我们的夜间构建机器没有 IIS7。我唯一能想到的是将 ServerManager 传递给该方法，但是在调用者中我将再次拥有一个 ServerManager ，这将使该方法无法进行单元测试。我们将 MOQ 用于我们的 Mock 库。

```
 public ISection GetCurrentSettings(string location, Action<string> status)
    {
        #region Sanity Checks

        if (string.IsNullOrEmpty(location))
        {
            throw new ArgumentNullException("location");
        }
        if (status == null)
        {
            throw new ArgumentNullException("status");
        }
        #endregion

        ISection section = null;

        _logger.Debug(string.Format("Retrieving current IIS settings for app at {0}.", location));
        status("Getting current IIS settings.");
        using (ServerManager manager = new ServerManager())
        {
            var data = (from site in manager.Sites
                        from app in site.Applications
                        from vdir in app.VirtualDirectories
                        where vdir.PhysicalPath.Equals(location, StringComparison.CurrentCultureIgnoreCase)
                        select new {Website = site, App = app}).SingleOrDefault();

            if (data == null)
            {
                _logger.Debug(string.Format("Could not find an application at {0} in IIS. Going to load the defaults instead.", location));
                //ToDo possibly load defaults
            }
            else
            {
               _logger.Debug(string.Format("Application found in IIS with website: {0} and a path of {1}", data.Website.Name, data.App.Path));
                int port =
                    data.Website.Bindings.Where(b => b.EndPoint != null).Select(b => b.EndPoint.Port).Single();

                section = new IISSection
                    {
                        ApplicationPoolName = data.App.ApplicationPoolName,
                        VirtualDirectoryAlias = data.App.Path,
                        WebsiteName = data.Website.Name,
                        WebsiteRoot = data.App.VirtualDirectories[0].PhysicalPath,
                        Port = port.ToString(CultureInfo.InvariantCulture),
                        WillApply = true,
                        AnonymousUser = _userService.GetUserByType(UserType.Anonymous)
                    };
            }

            return section;

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:28:07.257

在不完全重写代码的情况下，一般的想法是传入一个 ISettingReader*（实现为 IisSettingReader），这将公开从 IIS 获取所需数据的方法。然后，您可以通过将 ISettingReader 传递给方法/类来存根 ISettingReader 以返回您需要的内容

*或者，IServerManager 似乎是当前名称，但我不确定这是否特定于 IIS

**更新**

更具体地说，正如 Darin Dimitrov 所阐述的，您需要将所有依赖项拉到方法之外，并通过参数/构造函数/属性注入传递它们。这将需要重写处于当前状态的代码。

如果没有（并且我确实建议重写），那么您可以使用 TypeMock 之类的东西，据说它可以伪造类内部的依赖关系，但我自己没有使用过它，只知道我读过的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:27:55.820

使用[起订量](http://code.google.com/p/moq/)。

这将允许您创建 ISettings 的模拟版本，而不必创建真实版本。它还具有允许您指定自己的功能的额外优势。

# twitter-bootstrap - Ember.js 与 Twitter 引导模式

> ID：12569101
> 
> 赞同：7
> 
> 时间：2012-09-24T16:26:00.240
> 
> 标签：twitter-bootstrap, ember.js, ember-old-router

我已将我的应用程序设置为使用 ember 路由架构。我的索引页面看起来像这样（为简单起见）

```
script(type='text/x-handlebars', data-template-name='application')
    div.container
        {{outlet}} 
```

和我这样的 ember 应用程序

```
window.App = Em.Application.create({
    ApplicationController: Em.Controller.extend(),
    ApplicationView: Ember.View.extend({
    templateName: 'application'
    }),
    Router: Em.Router.extend({
        root: Em.Route.extend({
        doHome: (router, event) ->
            router.transitionTo('home')
        doInbox: (router, event) ->
            router.transitionTo('inbox')
        doInboxModal: (router, event) ->
            $("#inbox").modal "show"
        home: Em.Route.extend({
            route: '/',
            connectOutlets: (router, event) ->
                router.get('applicationController').connectOutlet('home')   
        }),
        inbox:Em.Route.extend({
            route: '/inbox',
            connectOutlets: (router, event) ->
                router.get('applicationController').connectOutlet('inbox')  
        })
    })  
}) 
```

我的主页和收件箱工作正常，但首先，我在我的 doInboxModal 中执行 jquery 以显示模式收件箱。如果我想在模态收件箱上有一个按钮以转到实际的收件箱页面，它将无法正常工作。

所以，问题是，如何正确使用带有 ember 路由的 Twitter Bootstrap 模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T10:31:08.650

当您路由到一个视图时，在 didInsertElement 中调用模态，这将加载模态。假设您希望模态加载到收件箱视图

```
App.InboxView = Ember.View.extend({
  didInsertElement: function(){
    $("#my-modal").modal("show");
  }
}) 
```

您更新的路由器：

```
window.App = Em.Application.create({
  ApplicationController: Em.Controller.extend(),
  ApplicationView: Ember.View.extend({
    templateName: 'application'
  }),
  Router: Em.Router.extend({
    root: Em.Route.extend({
      doHome: (router, event) ->
        router.transitionTo('home')
      doInbox: (router, event) ->
        router.transitionTo('inbox')
      home: Em.Route.extend({
        route: '/',
        connectOutlets: (router, event) ->
          router.get('applicationController').connectOutlet('home')   
      }),
      inbox:Em.Route.extend({
        route: '/inbox',
        connectOutlets: (router, event) ->
          router.get('applicationController').connectOutlet('inbox')  
      })
  })  
}) 
```

希望这可以帮助...

```
更新的答案
```

```
App.InboxView = Ember.View.extend({
  templateName: "inbox",
  addNewEmail: function(){
    $("#my-modal").modal("show");
  },
  cancelNewEmail: function(){
    $("#my-modal").modal("hide");
  }
}) 
```

**收件箱.handlebars**

```
<div id="inbox-container">
  <!-- 
    YOUR INBOX CONTENT
    The modal declared below wont show up unless invoked
  -->
  <a {{action addNewEmail}}>New Email</a>
  <a {{action cancelNewEmail}}>Cancel</a>
  <div class="modal hide fade in" id="my-modal">
    <!--
      Put your modal content
    -->
  </div>
</div> 
```

这边走：

*   模态将在按钮单击时显示
*   后面的景色不会消失
*   模态将隐藏在取消按钮上

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T22:48:44.730

如果有人想进一步参考，我已经发布了使用 Ember.js 的 Twitter Bootstrap 模态：

[http://generali.st/en/site/topics/show/82-modal-forms-in-emberjs](http://generali.st/en/site/topics/show/82-modal-forms-in-emberjs)

包括完整源代码的工作 JSBin。还有一些干燥表格的策略。IMO，事物的命名也更传统一些。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-14T13:07:29.583

我花了一些时间剖析 Discourse 来了解他们是如何做到的。基本上它们有一个单例模式，路由器处理事件以显示和隐藏模式。

以下是有趣的部分：

话语/app/assets/javascripts/discourse/routes/discourse_route.js

```
 showModal: function(router, name, model) {
    router.controllerFor('modal').set('modalClass', null);
    router.render(name, {into: 'modal', outlet: 'modalBody'});
    var controller = router.controllerFor(name);
    if (controller) {
      if (model) {
        controller.set('model', model);
      }
      controller.set('flashMessage', null);
    }
  } 
```

话语/应用程序/资产/javascripts/话语/路由/application_route.js

```
 events: {
    editCategory: function(category) {
      Discourse.Route.showModal(router, 'editCategory', category);
      router.controllerFor('editCategory').set('selectedTab', 'general');
  } 
```

话语/app/assets/javascripts/discourse/views/modal/modal_body_view.js

```
 Discourse.ModalBodyView = Discourse.View.extend({

  // Focus on first element
  didInsertElement: function() {
    $('#discourse-modal').modal('show');

    var controller = this.get('controller');
    $('#discourse-modal').on('hide.discourse', function() {
      controller.send('closeModal');
    });

    $('#modal-alert').hide();

    var modalBodyView = this;
    Em.run.schedule('afterRender', function() {
      modalBodyView.$('input:first').focus();
    });

    var title = this.get('title');
    if (title) {
      this.set('controller.controllers.modal.title', title);
    }
  },

  willDestroyElement: function() {
    $('#discourse-modal').off('hide.discourse');
  }

 }); 
```

话语/应用程序/资产/javascripts/话语/mixins/modal_functionality.js

```
 Discourse.ModalFunctionality = Em.Mixin.create({
  needs: ['modal'],

  /**
    Flash a message at the top of the modal

    @method blank
    @param {String} name the name of the property we want to check
    @return {Boolean}
  **/
  flash: function(message, messageClass) {
    this.set('flashMessage', Em.Object.create({
      message: message,
      messageClass: messageClass
    }));
  }

 }); 
```

app/assets/javascripts/discourse/templates/modal/modal.js.handlebars

```
 <div class="modal-header">
   <a class="close" {{action closeModal}}><i class='icon-remove icon'></i></a>
   <h3>{{title}}</h3>
 </div>
 <div id='modal-alert'></div>

 {{outlet modalBody}}

 {{#each errors}}
   <div class="alert alert-error">
     <button class="close" data-dismiss="alert">×</button>
     {{this}}
   </div>
 {{/each}} 
```

在他们的 application.js.handlebars 中：`{{render modal}}`

# java - javacv 网络摄像头流服务器

> ID：12569103
> 
> 赞同：0
> 
> 时间：2012-09-24T16:26:09.583
> 
> 标签：java, opencv, javacv

我想知道如何使用 javacv 在 tcp 服务器上流式传输视频。到目前为止，我从 usbwebcam 捕捉到这方面的任何教程。但我需要设置一个服务器才能从我的 android 中获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:29:03.213

我还没有尝试过，但是这样的东西应该适用于简单的 RTP“服务器”：

```
FrameRecorder recorder = new FFmpegFrameRecorder("rtp://0.0.0.0:port", imageWidth, imageHeight, audioChannels);
recorder.setFormat("rtp");
recorder.setAudioCodec(...);
recorder.setVideoCodec(...);
// etc.
recorder.start();
while (...) {
    recorder.record(image);
    recorder.record(ShortBuffer.wrap(audioSamples));
} 
```

# vb6 - 是否可以在 VB6 中创建 POSIX 应用程序

> ID：12569106
> 
> 赞同：2
> 
> 时间：2012-09-24T16:26:17.830
> 
> 标签：vb6, posix

是否可以在 VB6 中创建 POSIX 应用程序？
如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:29:06.457

不它不是。VB6 只生成 Win32 可执行文件。没有任何版本的 Visual Basic 曾经创建过`POSIX`应用程序。

（请注意，我说`Visual Basic`的是 Microsoft 的特定产品；我并没有说“没有`BASIC`一般版本”，以阻止那些拒绝投票或评论“但是等等！`Frob BASIC`或`Widget BASIC`其他一些晦涩难懂的版本BASIC 可以创建`POSIX`应用程序。你错了！”）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-26T13:24:06.000

好的。这一切意味着 Visual Basic 基本上使用为 Windows 制作的库，因此它无法为其他平台（例如 POSIX 子系统）创建应用程序。

# android - 如果列表太大，Android 双可扩展列表视图会隐藏项目

> ID：12569109
> 
> 赞同：5
> 
> 时间：2012-09-24T16:26:27.383
> 
> 标签：android, expandablelistview

我创建了一个树作为双可扩展列表视图，其中一个具有太多子项 (15) 的项比其他项多，并没有显示他的所有子项。

```
 _ ______
+|_______| 
    _______
  +|_______|
         _______
        |_______|
         _______
        |_______|
           ...
           ...
         _______
        |_______|   // 11-th item
         _______    // 12-th item can be seen a little and it-s clickable 
    _______
  +|_______|
    _______
  +|_______|
   ...
   ...
    _______
  +|_______| 
```

在第 12 项之后，列表被剪切。我没有对列表的大小施加任何限制。知道为什么会这样吗？谢谢！

**编辑** 这是第一个可扩展列表的代码。

```
<ExpandableListView android:layout_width="fill_parent" android:id="@+id/ParentLevel" 
               android:groupIndicator="@null" android:choiceMode="singleChoice" 
               android:layout_height="fill_parent" 
               android:layout_above="@id/button_layout" 
               android:paddingRight="5dp"> 
```

另一个子列表被添加到适配器的 getView() 方法中。

**代码示例**

```
//MainActivity.java
public class MainActivity extends Activity implements OnChildClickListener {

ExpandableListView elv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // QUI SOTTO
    Tree root = new Tree("root", 123);

    for (int i = 0; i < 3; i++) {
        Tree firstLevel = new Tree(("firstLevel" + i), i);

        for (int j = 0; j < 6; j++) {
            Tree secondLevel = new Tree("secondLevel" + j, j);

            for (int z = 0; z < 27; z++) {
                Tree thirdLevel = new Tree("thirdLevel" + z, z);

                secondLevel.addChild(thirdLevel);
            }

            firstLevel.addChild(secondlevel);
        }

        root.addChild(firstLevel);
    }

    elv = new ExpandableListView(this);
    final TreeAdapter treeAdapter = new TreeAdapter(this, root, this);
    elv.setAdapter(treeAdapter);
    elv.setChoiceMode(ExpandableListView.CHOICE_MODE_SINGLE);

    elv.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {

        @Override
        public boolean onGroupClick(ExpandableListView parent, View v,
                int groupPosition, long id) {

            for (int i = 0; i < treeAdapter.getGroupCount(); i++) {
                elv.collapseGroup(i);
            }

            elv.expandGroup(groupPosition);
            return true;
        }
    });

    setContentView(elv);
    elv.expandGroup(0);

    Entry e = treeAdapter.lsfirst[0];

    e.cls.expandGroup(1);

    treeAdapter.selectedClass = 33;

} 
```

树适配器.java

```
public class TreeAdapter extends BaseExpandableListAdapter {

final static String TAG = TreeAdapter.class.getSimpleName();

static public Integer selectedClass = null;

static int CHILD_PADDING;
static float TEXT_SIZE;

private Tree tree;

private OnChildClickListener lst;

final private Context context;

class Entry{
    final CustExpListview cls;
    final SecondLevelAdapter sadtp;
    public Entry(CustExpListview cls, SecondLevelAdapter sadtp) {
        this.cls = cls;
        this.sadtp = sadtp;
    }
}

Entry[] lsfirst;

public TreeAdapter(MainActivity ctx, Tree tree, OnChildClickListener lst){
    this.context = ctx;
    this.tree = tree;       
    this.lst = lst;
    TEXT_SIZE = 35;
    CHILD_PADDING = 40;

    lsfirst = new Entry[tree.getChilds().size()];

    for(int i=0; i<tree.getChilds().size();i++){
           CustExpListview SecondLevelexplv = new CustExpListview(context);
           SecondLevelAdapter adp = new     
                       SecondLevelAdapter(tree.getChilds().get(i));
           SecondLevelexplv.setAdapter(adp);
           SecondLevelexplv.setGroupIndicator(null);
           SecondLevelexplv.setOnChildClickListener(lst);// add listener

           lsfirst[i] = new Entry(SecondLevelexplv, adp);

    }

}

  @Override
  public Object getChild(int arg0, int arg1){             
          return arg1;
  }

  @Override
  public long getChildId(int groupPosition, int childPosition){
      return childPosition;
  }

  @Override
  public View getChildView(int groupPosition, int childPosition,
                            boolean isLastChild, View convertView, ViewGroup parent){
      //LISTA DI secondlevel           
       return lsfirst[groupPosition].cls;
  }

  @Override
  public int getChildrenCount(int groupPosition){   
    return 1;
  }

  @Override
  public Object getGroup(int groupPosition) {
   return groupPosition;
  }

  @Override
  public int getGroupCount() {   
    return tree.getChilds().size();
  }

  @Override
  public long getGroupId(int groupPosition) {   

   return tree.getChilds().get(groupPosition).getId();
  }

  @Override
  public View getGroupView(int groupPosition, boolean isExpanded,
                            View convertView, ViewGroup parent){

      //firstlevel

   TextView tv = new TextView(context); 
   tv.setText(tree.getChilds().get(groupPosition).getName());
   tv.setPadding(3, 7, 7, 7); 

   return tv;
  }

  @Override
  public boolean hasStableIds(){
   return true;
  }

  @Override
  public boolean isChildSelectable(int groupPosition, int childPosition) {
    return true;
  }     

  /////////////////////////////////////////////////////////////////////////////

  //_____________-------------________----------________---------_______-----//

  /////////////////////////////////////////////////////////////////////////////

  public class CustExpListview extends ExpandableListView{

          int intGroupPosition, intChildPosition, intGroupid;

          public CustExpListview(Context context) 
          {
           super(context); 

           this.setSelector(R.drawable.divider_gray);

          }

          protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
          {
           widthMeasureSpec = MeasureSpec.makeMeasureSpec(960, MeasureSpec.AT_MOST);
           heightMeasureSpec = MeasureSpec.makeMeasureSpec(600, MeasureSpec.AT_MOST);
           super.onMeasure(widthMeasureSpec, heightMeasureSpec);
          }  
            }

            public class SecondLevelAdapter extends BaseExpandableListAdapter{

                Tree tree2;
                public SecondLevelAdapter(Tree tr) {
                    this.tree2 = tr;
                }

                    //Returns the id of the selected class
                  @Override
                  public Object getChild(int groupPosition, int childPosition) {                
    return tree2.getChilds().get(groupPosition).getChilds().get(childPosition).getId();
                  }

                  @Override
                  public long getChildId(int groupPosition, int childPosition) {   
                      return tree2.getChilds().get(groupPosition).getChilds().get(childPosition).getId();
                  }

                  @Override
                  public View getChildView(int groupPosition, int childPosition,
                                            boolean isLastChild, View convertView, ViewGroup parent) {
                      //thirdlevel
                       TextView tv = new TextView(context); 
                       tv.setText(tree2.getChilds().get(groupPosition).getChilds().get(childPosition).getName());

                       if(selectedClass!=null && selectedClass ==tree2.getChilds().get(groupPosition).getChilds().get(childPosition).getId()){
                           tv.setBackgroundResource(R.drawable.divider_gray);

                       }
                       tv.setPadding(2*CHILD_PADDING, 5, 300, 5);

                   return tv;
                  }

                  @Override
                  public int getChildrenCount(int groupPosition){
                    return tree2.getChilds().get(groupPosition).getChilds().size();
                  }

                  @Override
                  public Object getGroup(int groupPosition) {   
                   return groupPosition;
                  }

                  @Override
                  public int getGroupCount() {
                    return tree2.getChilds().size();
                  }

                  @Override
                  public long getGroupId(int groupPosition) {
                    return groupPosition;
                  }

                  @Override
                  public View getGroupView(int groupPosition, boolean isExpanded,
                    View convertView, ViewGroup parent) 
                  {// secondlevel
                   TextView tv = new TextView(context); 
                   tv.setText(tree2.getChilds().get(groupPosition).getName());
                   tv.setPadding(CHILD_PADDING, 7, 200, 7);

                   return tv;
                  }

                  @Override
                  public boolean hasStableIds() {
                   return true;
                  }

                  @Override
                  public boolean isChildSelectable(int groupPosition, int childPosition) {
                    return true;
                  }               

    }

} 
```

树.java

```
public final class Tree {

final static String TAG=Tree.class.getSimpleName();

final private String name;
final private int id;

private Tree parent;
private LinkedList<Tree> childs = new LinkedList<Tree>();

public Tree(String name, int id) {
    parent = null;
    this.name = name;
    this.id = id;
}

public void addChild(Tree child){
    child.parent = this;
    childs.add(child);
}

public int getId() {
    return id;
}

public String getName() {
    return name;
}

public Tree getParent() {
    return parent;
}

public LinkedList<Tree> getChilds() {
    return childs;
}

@Override
public String toString() {
    Iterator<Tree> iter = childs.iterator();
    String childs = "[";
    while(iter.hasNext()){
        Tree ch = iter.next();
        childs = childs.concat(ch+",");
    }
    childs = childs.concat("]");
    return name + " "+ id + childs;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:38:36.637

我没有测试过你的代码，但是看看`onMeasure()`你的方法`CustExpListview`，我发现你已经指定了最大宽度和高度。如果您删除最大高度，那么它应该能够适合所有孩子。

# c# - C# Socket 应用程序中的内存泄漏

> ID：12569113
> 
> 赞同：3
> 
> 时间：2012-09-24T16:26:44.700
> 
> 标签：c#, multithreading, sockets, memory, memory-leaks

我正在尝试编写一个服务器应用程序，它正在侦听特定端口并等待设备访问该端口。设备每 30 秒连接一次设备连接后，设备将发送其 MAC 地址。但问题是内存不断增加并且永远不会释放。

```
class Server
{
    Object threadLock = new Object();
    bool stopListening = false;
    Socket clientSocket = null;

    private  void StartDeviceListener()
    {

        try
        {
            // create the socket
            clientSocket = new Socket(AddressFamily.InterNetwork,
                                             SocketType.Stream,
                                             ProtocolType.Tcp);

            // bind the listening socket to the port
            IPEndPoint ep1 = new IPEndPoint(IPAddress.Any, 60000);
            clientSocket.LingerState = new LingerOption(false, 0);

            clientSocket.Bind(ep1);
            clientSocket.Listen(10); //Waiting for Devices to connect.

            do
            {
                // start listening
                Console.WriteLine("Waiting for device connection on {0}....", 60000);
                Socket deviceSocket = clientSocket.Accept();
                //Console.WriteLine(deviceSocket.
                #region ThreadPool

                // ThreadPool.QueueUserWorkItem(ProcessRequest, (Object)deviceSocket);
                Thread ts = new Thread(ProcessRequest);
                ts.IsBackground = true;
                ts.Start((Object)deviceSocket);
                ts.Join();
                #endregion
            } while (!stopListening);

        }
        catch (Exception ex)
        {
            Console.WriteLine("exception... : " + ex.Message);
            StartDeviceListener();
        }

        finally
        {
            if (clientSocket != null) { clientSocket.Close(); clientSocket = null; }
        }

    }

    public void Stop()
    {
        try
        {
            stopListening = true;
            if (clientSocket != null)
            {
                clientSocket.Disconnect(false);
                clientSocket = null;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("exception : " + ex.Message);
        }
    }

    void ProcessRequest(Object args)
    {
        using (Socket deviceSocket = args as Socket)
        {
            try
            {

                //lock the thread while we are creating the client IO Interface Manager
                lock (threadLock)
                {
                    byte[] readBuffer = new byte[1024];
                    // Read from buffer
                    int count = deviceSocket.Receive(readBuffer, 0, readBuffer.Length, SocketFlags.None);
                    String macAddress = "";//mac address sent by the device:
                    if (count > 0)
                    {
                        Encoding encoder = Encoding.ASCII;
                        int size = 0;
                        while (count > 0)
                        {
                            size += count;
                            // get string
                            macAddress += encoder.GetString(readBuffer, 0, count).Trim();
                            // Read from buffer
                            count = 0;
                        }
                        Console.WriteLine(string.Format("{0} trying to connect....", macAddress));
                    }
                    deviceSocket.Close();
                    readBuffer = null;
                }
                //threadLock = null;

            }
            catch (Exception ex)
            {
                Console.WriteLine("exception : " + ex.Message);
            }
        }
        args = null;
    }

  public  void Start()
    {
        StartDeviceListener();
    }
}` 
```

![初始服务器运行](../Images/6572f48e6009c6dce4c8bdf8e39419f1.png)

![初始内存消耗](../Images/055eb1dc68d0d2c7013c9593f59d4f09.png)

![设备连接](../Images/f8cbf0935cab1bafc780673ea8fd4aae.png) ![初始连接后的内存消耗](../Images/be2c57961167d5d5618ef32455013d25.png)

![设备连接](../Images/85e6267603072d5c37983ae2288362e8.png)

![多次连接后的内存消耗](../Images/351c727b66023fc0c6d7c48cca599557.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:36:30.200

> 但问题是内存不断增加并且永远不会释放。

这与内存泄漏相去甚远。您可能正在寻找一个不存在的问题。

在最后一个镜头中，您仍然有一个 10MB 的工作集，这实际上是零。
当您真的想查找/解决内存问题时，请使用分析器。

# android - Android：触发 AJAX 功能不起作用

> ID：12569117
> 
> 赞同：1
> 
> 时间：2012-09-24T16:26:50.833
> 
> 标签：android, ajax, jquery

我正在构建一个 AJAX 函数，它可以调用`scroll`或`click/touchtstart`将一些内容附加到我的 HTML。在桌面环境中，点击和滚动事件对我来说一切都很好。但是，它们都不适用于我的 Android 2.3.7 HTC EVO 或我的 Android 4.1.1 上的 Nexus 7。

这是我的点击 JavaScript 事件处理程序：

```
$('.loadMore').each(function() {

  //Set URL and start on the first page
  var self = this;
  var path2root = ".";
  var loc = window.location.origin;
  var url = loc + "/process.php";
  var subcategoryId = $(this).parent().attr('data-subcategoryId');
  var page = 1;

  // Build the updated URL
  $(self).bind('touchstart', function(e) {
    e.preventDefault();

    page++;

    // AJAX function for processing JSON
    $.ajax({
      url: url + "?subcategoryId=" + subcategoryId + "&page=" + page,
      type: "GET",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      async: false,
      success: function (data) {
        var i = 0;
        for(i = 0 ; i < data.length; i++) {
          var articleId = data[i].articleResult.articleId;
          var title = data[i].articleResult.title;
          var subhead = data[i].articleResult.subhead;
          var image = data[i].articleResult.image;
          var response = "<td><div class='articleResult'><a href='" + path2root + "/article/article.php?articleId=" + articleId + "'><img src='" + image + "' width='120'/></a><br><h3><a href='" + path2root + "/article/article.php?articleId=" + articleId + "'>" + title.substring(0,25) + "</a></h3></div></td>";
          $("table tr td:nth-last-child(2)").after(response);
        };
      }
    });
  });
}); 
```

我的滚动功能非常相似，只是我将事件绑定到不同的元素，并且在滚动时：

```
// Collecting scroll info
    $('.overthrow').each(function() {

     // SAME VARIABLES

      $(this).scroll(function () { 
        if ($(self).scrollLeft() >= parseInt($(document).width() - 50)) {    
            if (finished == 1) {
              page++;
              finished = 0;

              // SAME AJAX FUNCTION

            };
          };
      });
    }); 
```

请记住，这是一个针对移动设备优化的网页，而不是本机 PhoneGap 应用程序，而且我使用的是常规 jQuery 1.8.0，而不是 jQuery Mobile 或 PhoneGap。

我在 Google Code 上发现了关于 Android 2.3 没有非常有效地接收 touchstart 事件的这个问题，这导致我开始构建 on scroll 功能[。](http://code.google.com/p/android/issues/detail?id=19827)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:08:27.017

根据您来自[Google Code](http://code.google.com/p/android/issues/detail?id=19827)的链接，解决方法是`e.preventDefault()`在您的活动开始时包含一个，`touchstart`如下所示：

```
$(self).bind('touchstart', function(e) { // include e as a reference to the event
    e.preventDefault(); // prevents the default behaviour on this element
    ....
}); 
```

以上适用于我的 Android 2.X 设备；我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:09:47.547

所以我能够让 AJAX 调用在滚动事件中正常运行。我已经`click/touchstart`一起放弃了这个活动，因为这在 Android 中似乎有问题。

无论出于何种原因，Android 在上传到网络服务器时都没有正确读取动态 URL：

```
var loc = window.location.origin;
var url = loc + "/process.php"; 
```

因此，当我使用编译后的 URL 构建我的 ajax 调用时：

```
$.ajax({
  url: url + "?subcategoryId=" + subcategoryId + "&page=" + page, 
```

`window.origin.location`被误解了。相反，我需要对`process.php`文件的位置进行硬编码：

```
url: "process.php?subcategoryId=" + subcategoryId + "&page=" + page, 
```

我通过另一个 SO 帖子在[这里发现了我的解决方案](https://stackoverflow.com/questions/5577298/jquery-ajax-post-not-working-on-iphone-and-android)

唯一的问题是我的代码可以在 iPhone 上运行，但不能在 Android 上运行。如果有人知道这背后的原因，那将是很好的信息。

# powershell - Powershell 中导入/导出的对象类型更改

> ID：12569119
> 
> 赞同：1
> 
> 时间：2012-09-24T16:26:56.463
> 
> 标签：powershell, powershell-2.0

我已经反对这个几个小时了，我希望有人能帮助我指出正确的方向。

我正在开发一些自定义 PowerShell cmdlet，其中一个支持类是 User 对象。我的几个 cmdlet 要么发出要么使用 List。

到目前为止，这工作得很好，但是当我尝试序列化其中一个列表时遇到了严重的障碍。出口似乎工作正常；我查看了文件（csv、clixml 等），它看起来与我期望的用户类型相同。但是，当我重新导入它时，类型似乎更改为 CSV:Class.User 或 Deserialized.Class.User。显然，当它被输入到需要标准 User 类的 cmdlet 时，这会导致问题。

如果有解决这个问题的好方法？我怀疑将我的 cmdlet 更改为期望一些接口而不是列表可能会成功，但我无法弄清楚应该是什么接口。而且我找不到指定类名的导入方法的切换。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:05:15.633

欢迎使用 PowerShell 的扩展类型系统。:-) 顺便说一句，当您的对象通过远程会话传递时，您还将返回仅状态的反序列化对象。您可以查询 PSObject 的 TypeNames 集合以查找 Deserialized.Class.User 以确定您是否具有类型的反序列化版本。同样适用于 CSV 版本。您可以在您的 User 类上创建几个工厂方法或克隆样式构造函数，这些构造函数采用某种类型的用户（CSV 或反序列化）的 PSObject，然后创建一个常规 Class.User 对象。请注意，某些操作在反序列化情况下可能没有意义。例如，使用 Process 对象作为示例，您可以在 Process 对象上调用 Kill，如果该对象来自可以工作的同一台机器（假设正确的 privs）。然而，`deserialized`主要只是数据（属性）容器的对象。

# regex - 正则表达式在bash中的冒号后提取字符串

> ID：12569123
> 
> 赞同：7
> 
> 时间：2012-09-24T16:27:13.347
> 
> 标签：regex, bash

我需要`:`在下面的示例中提取字符串：

`package:project.abc.def`

结果我会在哪里`project.abc.def`。

我正在 bash 中尝试这个，我相信我有一个可以工作的正则表达式`:([^:]*)$`。

在我的 bash 脚本中，我有`package:project.abc.def`一个名为`apk`. 现在我如何为使用正则表达式找到的子字符串分配相同的变量？

结果`package:project.abc.def`将在`apk`变量中。并且`package:project.abc.def`最初在`apk`变量中？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T16:33:09.493

这里不需要正则表达式，只需简单的前缀替换：

```
$ apk="package:project.abc.def"
$ apk=${apk##package:}
project.abc.def 
```

## 语法是 bash 的参数扩展之一。可以使用 % 代替 # 来修剪结尾。有关详细信息，请参阅bash 手册页的[这一部分。](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)

一些替代方案：

```
$ apk=$(echo $apk | awk -F'package:' '{print $2}')
$ apk=$(echo $apk | sed 's/^package://')
$ apk=$(echo $apk | cut -d':' -f2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T18:25:00.570

```
$ string="package:project.abc.def"
$ apk=$(echo $string | sed 's/.*\://') 
```

".*:" 匹配之前和包括 ':' 的所有内容，然后将其从字符串中删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T16:43:18.010

从正则表达式捕获组可以在`BASH_REMATCH`数组中找到。

```
[[ $str =~ :([^:]*)$ ]]
# 0 is the substring that matches the entire regex
# n > 1: the nth parenthesized group
apk=${BASH_REMATCH[1]} 
```

# iphone - 在 iOS 6 中与 Facebook 一起使用 SLRequest

> ID：12569124
> 
> 赞同：2
> 
> 时间：2012-09-24T16:27:21.933
> 
> 标签：iphone, objective-c, facebook, acaccount, social-framework

我目前正在尝试使用 SLRequest 在 facebook 上发布状态这是我拥有的代码：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSLog(@"0");
    [accountStore requestAccessToAccountsWithType:accountType options:@{ACFacebookAppIdKey : @"00000000000", ACFacebookPermissionsKey : @"publish_stream", ACFacebookAudienceKey : ACFacebookAudienceFriends} completion:^(BOOL granted, NSError *error) {
        if(granted) {
            NSLog(@"1");
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];
            NSLog(@"2");
            if ([accountsArray count] > 0) {
                NSLog(@"3");
                ACAccount *facebookAccount = [accountsArray objectAtIndex:0];
                NSLog(@"4");
                SLRequest *facebookRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                                requestMethod:SLRequestMethodPOST
                                                                          URL:[NSURL URLWithString:@"https://graph.facebook.com/me/feed"]
                                                                   parameters:[NSDictionary dictionaryWithObject:post forKey:@"message"]];
                NSLog(@"5");

                [facebookRequest setAccount:facebookAccount];
                NSLog(@"6");

                [facebookRequest performRequestWithHandler:^(NSData* responseData, NSHTTPURLResponse* urlResponse, NSError* error) {
                    NSLog(@"%@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
                }];

            }
        }
    }]; 
```

但是我的代码不想过去`if(granted){`，但我不知道为什么我所做的不起作用。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:45:12.683

就我而言，为了解决这个问题，我在 facebook 上我的 APP 的属性中注册了 Bundle ID。

在 facebook 上编辑您的 APP 并查找“选择您的应用程序如何与 Facebook 集成”并在“Native iOS App”中的“iOS Bundle ID”上注册您的项目的 Bundle ID。

如果不是您的情况，请尝试阅读错误消息：

```
if(granted) {
    ...
}
else {
    NSLog([NSString stringWithFormat:@"%@", error.localizedDescription]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T12:11:45.410

如果 error.code == 6，那么这是如果用户没有从设置应用程序登录 Facebook 时将出现的错误消息。

# javascript - 更新 knockoutjs 中的特定子对象

> ID：12569130
> 
> 赞同：0
> 
> 时间：2012-09-24T16:27:45.963
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin

我有一个嵌套对象，例如：

```
Album
-- Track 1
----Clip
--Track 2
----(None)
Album
--Track x
----Clip 
```

我已经使用淘汰映射插件创建了 viewModel。一切都按预期工作（事实上，在这个线程的帮助下，[无法解决带有嵌套对象的淘汰赛 js](https://stackoverflow.com/questions/12418740/cant-resolve-knockout-js-with-nested-objects)）

现在的问题是 Track 2 的 Clip 对象最初不存在。在界面中，用户创建了它，我从服务器（ajax 调用）获得了有关此剪辑对象的正确 JSON。现在，我如何更新我的 viewModel（viewModel.albums 是映射的对象）以将此剪辑信息从我的 Ajax 回调推送到 Track 2？我对 ajax 回调中的 Track 上下文没有任何线索。如果我有，那会更容易，我想。

如果这个问题没有意义，我会尝试在 jsfiddle 中添加一些更直观的东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:56:57.600

听起来你想要这样的东西：

```
viewModel.albums()[i].tracks()[j].clip = ko.mapping.fromJS(data); 
```

其中*i*是您要将其推送到哪个专辑，*j*是您要将其推送到该专辑中的哪个曲目。

# yql - YQL Google 搜索结果不一致

> ID：12569134
> 
> 赞同：1
> 
> 时间：2012-09-24T16:27:53.877
> 
> 标签：yql

我正在使用 YQL 来检索特定于站点的结果（我不需要仅针对我自己的站点而是针对各种站点的 Google 结果。

但是，我得到的结果不一致。使用 YQL 控制台进行我的查询：

*   多次对同一查询执行测试，有时会返回结果，但通常不会给出任何结果而不会产生错误。
*   当有结果时，结果的数量通常比在 google.com 上手动执行 Google 查询要少得多

显示此行为的示例查询是 select * from google.search where q = 'site:www.freelas.net'

对此有何建议？

亲切的问候，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:29:52.767

YQL 表使用的旧版 Google 搜索 API`google.search`已被 Google 弃用。它仍在运行，但我认为有 100 个查询/天的限制。当您在 YQL 控制台中看不到任何结果时，可能意味着它受到速率限制。

作为替代方案，您可以尝试使用较新的[Google Custom Search API](https://developers.google.com/custom-search/v1/overview)。请注意，它每天最多只能免费查询 100 个查询，但他们提供了高于此的付费计划。

# c# - 如何通过属性获取要引用当前对象的父对象类型

> ID：12569139
> 
> 赞同：-2
> 
> 时间：2012-09-24T16:28:15.183
> 
> 标签：c#, .net

假设我有三个 classes `A`，如下所示，并且`B`具有属性和Type ：`C``A``B``Pro1``Pro2``C`

```
class A
{
    public C Pro1 {get; set; }
}

class B
{
    public C Pro2 { get; set; }
}

public class C
{
    public void Do()
    {
        //How to get Type of object to reference to current object C
        //Example: Either type A or B
    }
} 
```

`Do`在类的方法中，`C`我想获取要引用当前对象 C 的当前父对象（通过`Pro1`和`Pro2`）。在此示例中，A 或 B，但一般来说，它可能是非常动态的：

```
var a = new A() { Pro1 = new C() };
a.Pro1.Do(); //will get Type A in Do

var b = new B() { Pro2 = new C() };
b.Pro2.Do(); //with get Type B in Do 
```

我可以通过哪种方法实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:32:39.047

您可以将“父”对象作为参数传递给 C 构造函数：

```
public class C
{
    private readonly object _parent;
    public C(object parent)
    {
        _parent;
    }

    public void Do()
    {
        Type type = _parent != null ? _parent.GetType() : null;
        // Do something with type...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:54:22.813

```
var a = new A() { Pro1 = new C() };
a.Pro1.Do(); //will get Type A in Do

var b = new B() { Pro2 = new C() };
b.Pro2.Do(); //with get Type B in Do 
```

这样，您就已经知道哪个对象在进行调用（a 或 b）；那么你正在做的事情可能没有意义。如果是这样，您总是可以通过简单的继承来解决这个问题

```
C a=new A();
C b=new B(); 
```

并且可以在 ctors A 或 B 中插入调用者的身份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T18:04:01.990

Thomas Levesque 提供了一种添加更多信息`C`以实现此目的的方法。如果它是您要存储的类型而不是特定实例`C`，则可以将`C`其设为泛型，如下所示：

```
class A
{
  public C<A> Pro1 { get; set; }
}

class B
{
  public C<B> Pro2 { get; set; }
}

public class C<T> where T : class   // maybe you want to add other "where" constraints on T
{
  public void Do()
  {
    // you can use T in here
  }
} 
```

# php - PHP 中的 RFC1123 和 RFC2822 日期时间格式有什么区别？

> ID：12569141
> 
> 赞同：9
> 
> 时间：2012-09-24T16:28:31.683
> 
> 标签：php, datetime, rfc2822, rfc1123

这是出于好奇，而不是因为我现在需要知道它，但是在 PHP 手册中，它们是相同的；我看不出同一事物有两种不同数据格式的原因。

[http://php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

```
const string RFC1123 = "D, d M Y H:i:s O" ;
const string RFC2822 = "D, d M Y H:i:s O" ; 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-24T16:35:02.840

**[RFC1123](http://www.rfc-editor.org/rfc/rfc1123.txt)**是“Internet 主机要求 - 应用程序和支持”，1989 年 10 月

**[RFC2822](http://www.rfc-editor.org/rfc/rfc2822.txt)**是“Internet 消息格式”，2001 年 4 月

将**RFC1123**视为 RFC2822 的父**级**。它引用**RFC2822**作为日期/时间的适当规范，如下所示：

> 3.3\. 日期和时间规范
> 
> 日期和时间出现在几个标题字段中。本节指定完整日期和时间规范的语法。尽管在整个日期时间规范中允许折叠空格，但建议在 FWS 出现的每个位置使用单个空格（无论是必需的还是可选的）；一些较旧的实现可能无法正确解释其他出现的折叠空白。
> 
> date-time = [ day-of-week "," ] 日期 FWS 时间 [CFWS]
> 
> day-of-week = ([FWS] day-name) / obs-day-of-week
> 
> 日期名称 = “周一”/“周二”/“周三”/“周四”/“周五”/“周六”/“周日”
> 
> 日期 = 日月年
> 
> 年 = 4*DIGIT / obs-年
> 
> 月份 = (FWS 月份名称 FWS) / obs 月份
> 
> 月份名称=“一月”/“二月”/“三月”/“四月”/“五月”/“六月”/“七月”/“八月”/“九月”/“十月”/“十一月”/“十二月” "
> 
> day = ([FWS] 1*2DIGIT) / obs-day
> 
> 时间 = 一天中的时间 FWS 区域
> 
> 时间 = 小时 ":" 分钟 [ ":" 秒 ]
> 
> 小时 = 2DIGIT / obs-小时
> 
> 分钟 = 2DIGIT / obs-分钟
> 
> 秒 = 2DIGIT / obs-秒
> 
> zone = (( "+" / "-" ) 4DIGIT) / obs-zone

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:34:39.047

我认为原因是文档。日期格式可能相同，但它们在不同的文档中独立定义。老实说

```
const string COMMON_DATE_FORMAT_FOR_RFC1123_AND_2822 = "D, d M Y H:i:s O" ; 
```

不会那么有用。

# java - 列表的子类化如何工作？

> ID：12569142
> 
> 赞同：0
> 
> 时间：2012-09-24T16:28:33.980
> 
> 标签：java, generics

我 10 分钟前问了一个类似的问题，但粘贴了错误的代码片段。我真的很抱歉。

我目前面临基类和子类的问题。

虽然将单个对象作为参数（方法单一），但编译器不会抱怨。

但是，如果涉及到列表，编译器会强制我将列表声明为`<? extends Base>`

之后，我不再被允许将基本类型的对象添加到该列表中。

错误消息：“Generics.C 类型中的方法列表（List<Generics.Base>）不适用于参数（List<Generics.Sub>）”

```
public class Generics {

    class Base {    }

    class Sub extends Base{     }

    interface I {
        public void list( List<Base> list );
        public void single( Base list );
    }

    class C implements I {
        public void list( List<Base> b) {       }
        public void single( Base p) {       }
    }

    void test() {
        C c = new C();
        c.single( new Sub() );
        List<Sub> b = new ArrayList<Sub>(); 
        c.list( b );                    // error message as above
    }

    public static void main( String[] args) {
        Generics g = new Generics();
        g.test();
    }
} 
```

除了将 list-methods 参数声明为 type 之外，还有其他方法 `<? extends Base>`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:30:28.097

**以下是2种方法来做到这一点......**

```
public void list(List<? extends Base> list){

} 
```

或者

```
public <T extends Base> void list(List<T> list){

} 
```

# c# - 未处理的异常 c# dll

> ID：12569144
> 
> 赞同：0
> 
> 时间：2012-09-24T16:28:42.530
> 
> 标签：c#, dll, nullreferenceexception

我试图测试我为 c# 构建的新 dll

```
private void button1_Click(object sender, EventArgs e)
        {
            String [] first = UserQuery.Get_All_Users();
            //MessageBox.Show(first);
        } 
```

但我收到以下错误`String [] first = UserQuery.Get_All_Users();`

User_Query.dll 中出现“System.NullReferenceException”类型的未处理异常

附加信息：对象引用未设置为对象的实例。

我一直想弄清楚这个几个小时，但找不到任何空变量

我发布我的 dll 以防 dll 错误

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.DirectoryServices;

namespace User_Query
{
    public class UserQuery
    {
        public static string[] Get_All_Users()
        {
            string[] names = new string[10];

            var path = string.Format("WinNT://{0},computer", Environment.MachineName);

            using (var computerEntry = new DirectoryEntry(path))
            {
                var userNames = from DirectoryEntry childEntry in computerEntry.Children
                                where childEntry.SchemaClassName == "User"
                                select childEntry.Name;
                byte i = 0;
                foreach (var name in userNames)
                {
                    Console.WriteLine(name);
                    names[i] = name;
                    i++;
                }
                return names;
            }           
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:57:44.577

你的有问题。路径变量...因为应该有`\\`而不是`//`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:31:14.130

这里的问题原来不是代码，而是VS2010没有加载dll。发生这种情况是因为我决定将程序从使用 dll 从调试版本更改为发布版本，但在执行此操作后我没有清理项目，因此程序没有正确加载 dll。需要做的就是清理项目

# java - 蚂蚁构建的问题

> ID：12569150
> 
> 赞同：0
> 
> 时间：2012-09-24T16:29:04.740
> 
> 标签：java, ant

> **可能重复：**
> [ant build 无效目标版本中的问题](https://stackoverflow.com/questions/4956209/problem-in-ant-build-invalid-target-release)

使用 ant 构建我的项目时遇到以下问题：

```
[echo] Using Java version 1.6.
build-java-lib:
make-jar:
clean:
   [delete] Deleting directory C:\xxx\bin
compile-src:
    [mkdir] Created dir: C:\xxx\bin
    [javac] Compiling 102 source files to C:\Users\xxx\Work\AndroidProjects\xxxx\bin
    [javac] javac: invalid target release: 1.6
    [javac] Usage: javac <options> <source files>
    [javac] where possible options include:
    [javac]   -g                         Generate all debugging info
    [javac]   -g:none                    Generate no debugging info
    [javac]   -g:{lines,vars,source}     Generate only some debugging info
    [javac]   -nowarn                    Generate no warnings
    [javac]   -verbose                   Output messages about what the compiler is doing
    [javac]   -deprecation               Output source locations where deprecated APIs are used
    [javac]   -classpath <path>          Specify where to find user class files
    [javac]   -cp <path>                 Specify where to find user class files
    [javac]   -sourcepath <path>         Specify where to find input source files
    [javac]   -bootclasspath <path>      Override location of bootstrap class files
    [javac]   -extdirs <dirs>            Override location of installed extensions
    [javac]   -endorseddirs <dirs>       Override location of endorsed standards path
    [javac]   -d <directory>             Specify where to place generated class files
    [javac]   -encoding <encoding>       Specify character encoding used by source files
    [javac]   -source <release>          Provide source compatibility with specified release
    [javac]   -target <release>          Generate class files for specific VM version
    [javac]   -version                   Version information
    [javac]   -help                      Print a synopsis of standard options
    [javac]   -X                         Print a synopsis of nonstandard options
    [javac]   -J<flag>                   Pass <flag> directly to the runtime system

BUILD FAILED 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:34:53.277

看起来像是[ant build invalid target release 中的一个问题](https://stackoverflow.com/questions/4956209/problem-in-ant-build-invalid-target-release)。确保 javac 本身（不仅仅是 Ant）使用的是 Java 1.6。

# ios - Xcode 4.5 (iOS) - 链接项目（库和应用程序）

> ID：12569154
> 
> 赞同：1
> 
> 时间：2012-09-24T16:29:23.440
> 
> 标签：ios, xcode, ios5, dependencies, xcode4.3

我在同一个工作区中有 2 个项目。一个是 iOS 库，另一个是 iOS 应用程序。

有没有一种简单的方法可以让应用程序项目使用库 proejct？我有一个要求：每当我在库项目中进行更改时，我希望它们自动影响应用程序项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:33:46.787

不要将库项目复制到您的应用项目中。而是将库项目引用到应用程序项目中。

每当您将库项目导入应用程序项目时，或者您只是拖放它...然后使用库的引用而不是将资源复制到应用程序项目中...

这样，每当您在库项目中进行更改时......它都会自动反映在应用程序项目中。

**编辑**

每当你在 Xcode 项目中拖放一个文件时......你会被问到 2 个选项......

1.  将项目复制到目标组的文件夹中。
2.  文件夹的选项。

对于选项 1。**取消选中**该复选框。这将为该文件创建一个引用。

对于选项 2\. 你可以做任何你想做的事......

# msbuild - 使用 msbuild xmlupdate 设置 customErrors 模式

> ID：12569165
> 
> 赞同：1
> 
> 时间：2012-09-24T16:30:02.293
> 
> 标签：msbuild, custom-errors, xmlupdate

我们使用 xmlupdate 在我们的测试环境中对我们的 web.config 进行更改。当我们只是更新节点的值时，这会成功。我们想在我们的测试环境中关闭 customErrors 并且不确定如何使用 xmlupdate 来做到这一点，因为它不仅仅是节点中的一个值；它在关键标签内。

```
<customErrors mode="RemoteOnly" redirectMode="ResponseRewrite"> 
```

需要成为

```
<customErrors mode="Off" redirectMode="ResponseRewrite"> 
```

-----------------这是我们成功使用的一个例子。

```
<XmlUpdate
   XmlFileName="%(Codebase.Path)\imod.net_fw2\Web.config"
   Xpath="//configuration/appSettings/add[@key='TrackingConnString']/@value"
   Value="$(TrackingConnStr)"
   Condition ="'%(Codebase.Path)'!=''"
   /> 
```

谢谢！

# c - 如何使用信号处理在 Linux 上的应用程序崩溃/挂起时强制重启？

> ID：12569172
> 
> 赞同：0
> 
> 时间：2012-09-24T16:30:24.620
> 
> 标签：c, embedded-linux

我有一个用 C 语言编写的应用程序，在 Linux 设备服务器上运行。如果应用程序崩溃或挂起，我希望系统重新启动。设备服务器附带了一个我认为实现此功能的示例应用程序，但我不确定。通过从中获取似乎实现此功能的东西，我有以下骨架：

```
int terminate=0;

int main () {

  struct sigaction     sigact;

  sigact.sa_handler = sighandler;
  sigemptyset(&sigact.sa_mask);
  sigact.sa_flags = 0;
  sigaction(SIGTERM,&sigact,0); 

  while (terminate == 0) 
  {
    // my main application functions
  }

  SDK_reboot();  // reboots my device server

}

void sighandler(int sig)
{
  if (sig == SIGTERM)
    terminate = 1;
} 
```

我基本上想了解上面代码中发生了什么，如果有必要，改变它以满足我的需要。是 'sigaction(SIGTERM,&sigact,0);' 导致 SIGTERM 响应我的应用程序挂起或崩溃的行？如果不是，那么正确的代码是什么？另外，一般来说，以上是在应用程序崩溃/挂起时实现重启的好方法吗？还是我偏离了轨道？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:35:43.227

不，不是 SIGTERM，而是 SIGCHLD。换句话说，当 main 的分叉子进程之一退出时，循环终止。

这看起来像是应用程序的一部分，它派生出实际的“工作进程”并在它退出时重新启动。注意：*挂起*不会退出。这不会检测到无限循环或其他挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:46:55.653

重启电路板最可靠的方法是使用硬件看门狗定时器。此解决方案将有效地检测应用程序崩溃和挂起。

嵌入式 linux 内核通常包含看门狗驱动程序（/dev/watchdog）。在启用看门狗支持的情况下重建内核。

在应用程序内部打开 /dev/watchdog，并经常写入它以防止内核重置，至少每分钟一次。每次写入都会将重启时间延迟一分钟。在一分钟不活动后，看门狗硬件将导致复位。（见[http://linux.die.net/man/8/watchdog](http://linux.die.net/man/8/watchdog)）

参考您的代码，您可以在应用程序启动后立即打开 /dev/watchog，然后在 while 循环中写入它。如果应用程序只有一个线程，这将是正确的。如果线程更多，您需要想出一些更棘手的东西。

还有一种方法可以检测应用程序崩溃。主要思想与该解决方案中的相同：[https://superuser.com/questions/223449/auto-restart-process-on-crash](https://superuser.com/questions/223449/auto-restart-process-on-crash)。该脚本可以用 C 重写。它涉及到使用 fork()、execve()、waitpid()。

# jquery - 验证后的jquery datepicker打开问题

> ID：12569175
> 
> 赞同：1
> 
> 时间：2012-09-24T16:30:34.823
> 
> 标签：jquery, datepicker

当 daptepicker 字段出现验证错误时，我的 jquery datepicker 会自动打开。这是代码

```
a("#da-ex-validate1").validate(
{

rules:{"jourferie.nombrejours":{required:true,digits:true,max:40},
       "jourferie.date":{required:true,date:true},
       "jourferie.occasion":{required:true}
       },
invalidHandler:function(e,c){var f=c.numberOfInvalids();if(f){var d=f==1?"Vous avez manqué 1 champ.  Il a été mis en évidence":"Vous avez manqué "+f+" champs. Ils ont été mis en évidence";a("#da-ex-val1-error").html(d).show();}else{a("#da-ex-val1-error").hide();}}

});

a("#da-ex-datepicker").datepicker({showOtherMonths:true,onSelect: function() { a(this).valid(); }}); 
```

所以我想要的是禁用这种行为。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:23:32.900

您可以在“invalidHandler”处理程序回调中隐藏日期选择器。

**例子 ：**

```
a("#da-ex-validate1").validate(
{
   //exisiting rules 
   invalidHandler:function(e,c){
        // exisiting stuff
        a("#da-ex-datepicker").datepicker("hide");
   }
}); 
```

或者，您可以将“focusInvalid”选项设置为 false 以防止聚焦无效元素。

```
a("#da-ex-validate1").validate(
{
   focusInvalid : false,
   //exisiting stuff 
}); 
```

希望这会有所帮助！

# unix - awk：用包含标题的部分修改 csv

> ID：12569177
> 
> 赞同：3
> 
> 时间：2012-09-24T16:30:50.747
> 
> 标签：unix, sed, awk, tr

我有一个看起来像这样的文件：

```
Downtown
3/1/2013, 6A, 1 convertible to 2 bedroom apartment, tile bath, air conditioning, $3800
4/1/2013, 4C, One bedroom living room eat-in-kitchen, $3850
East Village
5/17/2013, 9M, STUDIO K'ETTE air conditioner TILE BATH, $2300
6/1/2013, 6H, Studio with tile bath and kitchenette with stone counters tops, $2600
SoHo
6/1/2013, 10B ,STUDIO KETTE air conditioner TILE BATH, $2400 
```

（ETC。）

我希望它转换成这样的东西：

```
Downtown, 3/1/2013, 6A, 1 convertible to 2 bedroom apartment, tile bath, air conditioning, $3800
Downtown, 4/1/2013, 4C, One bedroom living room eat-in-kitchen, $3850
East Village, 5/17/2013, 9M, STUDIO K'ETTE air conditioner TILE BATH, $2300
East Village, 6/1/2013, 6H, Studio with tile bath and kitchenette with stone counters tops, $2600
SoHo, 6/1/2013, 10B ,STUDIO KETTE air conditioner TILE BATH, $2400 
```

我不知道如何获取这些部分标题并将它们移动为列，以便我有一个完全描述性的表格......我相信使用 awk 最容易，但有人可以提供代码片段，或解释如何这可以用 awk （或任何最合适的命令）来完成？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:39:48.963

给定一个名为“test.txt”的文件，其中包含您在下面描述的数据。您可以使用以下 AWK 行获取它：

```
awk -F"," 'NF == 1 {header = $0;} NF > 1 {print header", "$0;}' test.txt 
```

如果 Num Fields 为 1，则它是标题，因此我将其保存在“标题”变量中。如果 Num Fields 大于 1，则它是“数据行”，因此我打印“标题”的最后一个值和整个“数据行”。

它对我有用：

```
Downtown, 3/1/2013, 6A, 1 convertible to 2 bedroom apartment, tile bath, air conditioning, $3800
Downtown, 4/1/2013, 4C, One bedroom living room eat-in-kitchen, $3850
East Village, 5/17/2013, 9M, STUDIO K'ETTE air conditioner TILE BATH, $2300
East Village, 6/1/2013, 6H, Studio with tile bath and kitchenette with stone counters tops, $2600
SoHo, 6/1/2013, 10B ,STUDIO KETTE air conditioner TILE BATH, $2400 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:07:03.287

这可能对您有用（GNU sed）：

```
sed -i '/,/!{h;d};G;s/\(.*\)\n\(.*\)/\2, \1/' file 
```

# sql-server - 为什么 tempdb 抛出错误但数据库仍然有大约 5gb 空间

> ID：12569180
> 
> 赞同：0
> 
> 时间：2012-09-24T16:31:21.560
> 
> 标签：sql-server, sql-server-2008, tempdb

![在此处输入图像描述](../Images/2c00b6e9f6a27d489d4933b2ed0bdd51.png)

当我们在处理应用程序时，突然出现上面屏幕截图中粘贴的错误，我们无法执行任何操作，但如果我查看数据库仍然有 5 GB 以上的可用空间，可能是什么原因？好心劝告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:00:59.320

您是否执行过重创 TempDB 的大规模 IO 密集型操作。这可能包括在 TempDB = ON 的情况下对非常大的索引进行索引重建。顾名思义，TempDB 中的所有内容都是临时的，仅仅因为您现在有 5gb 空闲并不意味着发生错误时您有 5gb 空闲。

如果问题仍然存在，那么我建议您在 TempDB 中有损坏，您应该重新启动实例。这将删除 TempDB 并重新创建它，从而修复损坏

# xml - Erlang xmerl_sax_parser 抛出错误

> ID：12569182
> 
> 赞同：0
> 
> 时间：2012-09-24T16:31:26.053
> 
> 标签：xml, parsing, erlang

我正在使用 xmerl_sax_parser:file() 解析一个非常大的文件，并在中途遇到异常。

```
exception throw: {'EXIT',{undef,[{xmerl_sax_parser_utf8,cf,
                                                       [<<"Ä">>,
                                                        {xmerl_sax_parser_state}]}]}} 
```

我查看了数据，它不包含任何奇怪的字符，如果有，我该如何处理。文档没有告诉我任何事情。

代码如下所示：

```
run(FileName) ->
{ok, Xml, _Rest} =
   xmerl_sax_parser:file(FileName,  [{event_fun, fun event/3},
                                      {event_state, {[], ""}},
                                    {encoding, utf8},
                                    {file_type, normal},
                                    skip_external_dtd]),
Xml.

event(_Ev = {startElement, _, "product", _, _}, _Loc, _State = {Xml, _}) ->
{[[]|Xml], ""};
event(_Event = {characters, Chars}, _Location, _State = {Quotes, _}) ->
{Quotes, Chars};
event(_Ev = {endElement,_,"stock",_},_L,_State = {[Data|Rest],Chars}) ->
           Element = list_to_atom("name"),
           Updated = [{Element, Chars}|Data],
           {[Updated|Rest], undefined};
event(_Ev = {endElement,_,"date",_},_L,_State = {[Data|Rest],Chars}) ->
           Element = list_to_atom("brand"),
           Updated = [{Element, Chars}|Data],
           {[Updated|Rest], undefined};
event(_Ev = {endElement,_,"open",_},_L,_State = {[Data|Rest],Chars}) ->
           Element = list_to_atom("price"),
           Updated = [{Element, Chars}|Data],
           {[Updated|Rest], undefined};
event(_Ev = {endElement,_,"low",_},_L,_State = {[Data|Rest],Chars}) ->
           Element = list_to_atom("url"),
           Updated = [{Element, Chars}|Data],
           {[Updated|Rest], undefined};
event(_Ev = {endElement,_,"stats",_},_L,_State = {[Data|Rest],Chars}) ->
           Element = list_to_atom("category"),
           Updated = [{Element, Chars}|Data],
           {[Updated|Rest], undefined};
event(_Event, _Location, State) ->
State. 
```

关于如何正确修复或处理的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:03:05.797

我发现库的`SAX`解析器非常易于使用。与 xmerl 相比，我建议使用它。 [`erlsom`](http://erlsom.sourceforge.net/erlsom.htm#sax_mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T04:27:55.930

**这部分是错误的，对不起:o(**

> 可能是您正在阅读的文件未以 utf8 编码。我检查了扩展的 ASCII 表，显示的奇怪字符的值 142 (2#10001110) 不是有效的 utf8 代码：

![UTF8 编码 - 来自维基百科](../Images/4612f616c273ffecee8d2140187eb12d.png)

根据这个表，它是一个延续代码。因此，您可以使用十六进制编辑器检查您的输入文件，查找字节 142 (16#8E)。

**编辑：**我意识到我不知道使用哪种字符编码来打印异常消息。我在控制台中做了一些测试，我得到了这个：

```
(exec@WXFRB1824L)1> L = <<"Ä">>.
<<"Ä">>
(exec@WXFRB1824L)2> size(L).  
1
(exec@WXFRB1824L)3> <<L1:4,L2:4>> = L.
<<"Ä">>
(exec@WXFRB1824L)4> L1.
12
(exec@WXFRB1824L)5> L2.
4
(exec@WXFRB1824L)6> L = <<2#11000100>>.
<<"Ä">>
(exec@WXFRB1824L)7> 2#11000100.
196 
```

这不是打印为 UTF8 而是 ASCII （我犯了一个错误，我找不到我在哪里得到这个值 142...）这改变了事情，因为 196 是根据下表的 2 字节数据的有效 UT8 第一个字节： ![在此处输入图像描述](../Images/b14a7489752819083544430e5c2091b7.png)

# vb.net - 如何使用配置文件连接到用户设置的数据库

> ID：12569183
> 
> 赞同：0
> 
> 时间：2012-09-24T16:31:38.890
> 
> 标签：vb.net, app-config, configuration-files

我有一个程序可以运行查询，并在报表查看器中返回结果。问题是我们有 10 个地点，都有自己的本地数据库。我想做的是让每个位置都使用该程序并利用 App.config 文件来指定要连接到哪个数据库，具体取决于您所在的位置。这将使我不必创建 10 个具有单独数据库连接的单独程序。我在想我可以在 app.config 文件“数据库”“登录”“密码”中有 3 个值一般来说数据库位于 .30 地址上......所以能够让他们设置配置会很好文件到数据库服务器IP...

例如：

位置：1 数据库IP：10.0.1.30 登录名：sa 密码：databasepassword

是否可以使用 app.config 文件设置类似的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:35:28.363

转到您的项目属性，然后从下拉列表中设置应用程序设置 --> 类型（连接字符串）。这将在您的输出目录中生成一个 xlm 配置文件，您可以在其中修改连接字符串后编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:24:25.810

您应该查看资源文件。最初，它们用于本地化，但它们也应该为您工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T22:18:41.783

我最终使用了一个简单的 XML 文件来执行此操作。我用这个[网站](http://forum.codecall.net/topic/69450-writing-and-reading-xml-files-vbnet-part-ii/)来完成它。我首先使用表单加载编写 XML，然后将其切换为读取。

# asp.net-mvc-3 - 需要帮助才能从任何好的 MVC3 框架开始构建 Web 应用程序

> ID：12569185
> 
> 赞同：-1
> 
> 时间：2012-09-24T16:31:47.723
> 
> 标签：asp.net-mvc-3, .net-4.0

我需要在 asp.net mvc3 平台上构建一个自定义 Web 应用程序。

我需要以下主要模块：

1.  使用身份验证和角色进行用户管理
2.  活动记录和错误记录
3.  用于管理页面内容的 CMS
4.  模块化 - 可插拔架构
5.  用于管理电子邮件通知等的模块。
6.  能够通过添加新插件的方式添加新模块

我基本上是在为 MVC3 寻找一种框架，基于它我可以构建我的应用程序。即使它没有内置 CMS，我也很好。

你们能帮我找到最适合这种目的的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:54:27.897

您可以检查以下内容

1.  [http://www.mvccms.com/](http://www.mvccms.com/)
2.  [http://cmsmvc.codeplex.com/](http://cmsmvc.codeplex.com/)
3.  [http://atomiccms.codeplex.com/](http://atomiccms.codeplex.com/)
4.  [http://mytripmvc.codeplex.com/](http://mytripmvc.codeplex.com/)

# ruby-on-rails - 如何测试发布请求并使用水豚跟踪重定向？

> ID：12569188
> 
> 赞同：0
> 
> 时间：2012-09-24T16:32:02.153
> 
> 标签：ruby-on-rails, cucumber, rake, capybara

我正在尝试使用水豚和黄瓜测试发布请求。我无法访问页面并按下链接来发送请求，因为它有一个确认对话框并且我没有让它与 javascript 一起工作，所以我尝试使用 post 方法，然后测试它是否重定向到适当的网址，但我得到：

```
No response yet. Request a page first. (Rack::Test::Error) 
```

我的代码是：

```
page.driver.post url
page.driver.status_code.should be 302
follow_redirect! 
```

它工作正常，直到`follow_redirect!`. 我已经尝试过`page.driver.follow_redirects!`，但它也不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-13T04:22:35.770

```
Capybara::Rails::TestCase.class_eval do
  def post(url)
    page.driver.post url
    visit page.driver.response.location
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:54:44.330

我建议您通过以下方式关闭确认对话：

[https://stackoverflow.com/a/2609244/560123](https://stackoverflow.com/a/2609244/560123)

这样您就不会关心自己发布帖子，而是信任您的应用程序代码来执行发布请求。

问候

# iphone - iPhone 5 TabBar 无法在正确位置运行

> ID：12569189
> 
> 赞同：15
> 
> 时间：2012-09-24T16:32:06.583
> 
> 标签：iphone, ios6, iphone-5

我正在更新我们的应用程序并添加了新的默认图像，但我的标签栏在 iPhone 5 上不起作用。我做了一些研究并创建了一个 if 语句检查显示器的大小，然后将标签栏放在正确的位置地点。问题是当 if 语句达到 iPhone 5 的屏幕尺寸并将标签栏放置在正确的位置时，按钮不起作用......如果我将垂直位置更改为较小的值，按钮就会起作用。这是代码：

```
UITabBar *tabBar = self.tabBarController.tabBar;

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        tabBar.frame=CGRectMake(0,431,320,49);
    }
    if(result.height == 568)
    {
        tabBar.frame=CGRectMake(0,519,320,49);
    }
} 
```

现在，如果我将“519”垂直对齐更改为“450”，标签栏在屏幕上较高，但按钮确实有效。任何想法——它让我发疯！这是我需要为启动更新而工作的最后一件事。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-27T17:40:04.307

如果您的窗口是在较旧的笔尖中创建的，则很可能需要在标题为**“启动时全屏”的窗口属性上选中一个复选框**

更多信息[在这里](http://anthonyprato.com/2012/09/20/iphone-5-problem-with-touches-at-the-bottom-of-the-screen/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-02T22:28:30.487

在 Interface Builder 中检查主窗口的“启动时全屏”选项。

![在此处输入图像描述](../Images/d7b69b0fb6965042b3d1277bee043273.png)

如果您想在[没有 Interface Builder](http://tapadoo.com/2012/uitabbar-not-seeing-touch-events-when-you-build-for-iphone-5-try-this/)的情况下执行此操作，请添加

```
window.frame = [UIScreen mainScreen].bounds; 
```

在您的开始`applicationDidFinishLaunching:`或`application:didFinishLaunchingWithOptions:`在应用程序委托中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T06:15:31.353

这是由于 iPhone 5 和 iPhone 4 之间的屏幕高度问题造成的。在 AppDelegate 文件中添加以下代码段。这解决了我的问题。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];    
} 
```

# html - 将 HTML 包含到同一站点的另一个页面中？

> ID：12569190
> 
> 赞同：0
> 
> 时间：2012-09-24T16:32:13.930
> 
> 标签：html, dependency-injection

我有一个具有特殊用途的 HTML 网页。但是，我还有一个 HTML 页面，其中包含在我的站点/应用程序中其他地方使用的一组通用操作。

**特定页面**

```
<html>
  <head><title>Specific Page</title></head>
  <body>
    <h1>My Specific Action</h1>

    <div id="NameAction">
      <!-- Action HTML goes here... -->
    </div>
  </body>
</html> 
```

**通用动作**

```
<html>
  <body>
    Please tell me your name...
    <input id="NameText" type="text" size="50" />
    <input id="NameSubmit" type="submit" />
  </body>
</html> 
```

问题是，我想将通用操作 HTML 注入特定页面的 NameAction div。我会采取哪些方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:37:28.627

使用 iframe

```
<html>
  <head><title>Specific Page</title></head>
  <body>
    <h1>My Specific Action</h1>

    <div id="NameAction">
      <iframe src="Path-to-generic-html" />
    </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:38:18.327

您可以使用 iframe，这是一种将一个 html 文档嵌入到另一个文档中的方法，但是这使得两个 html 片段很难在前端（Javascript 等）进行交互。根据您使用的模板引擎（jsp、php、asp），您应该能够将 html 片段包含到页面中，如下所示（服务器端包含）：

**通用动作片段**

```
Please tell me your name...
<input id="NameText" type="text" size="50" />
<input id="NameSubmit" type="submit" /> 
```

**特定页面**

```
<html>
  <head><title>Specific Page</title></head>
  <body>
    <h1>My Specific Action</h1>

    <div id="NameAction">
      <% include generic action fragment here using engine specific code %>
    </div>
  </body>
</html> 
```

# django - 如何从公共存储库中排除南迁移？

> ID：12569191
> 
> 赞同：2
> 
> 时间：2012-09-24T16:32:19.283
> 
> 标签：django, git, version-control, django-south

我正在使用 South 在我的开发和生产环境中管理模式和数据迁移。因此，我将迁移保存在我的 git 存储库中，因此我在开发中所做的更改可以在生产中正确迁移。

我正在开发的应用程序和项目目前是私有的，仅由我开发。在某个时候，我想发布/分发我的应用程序。我假设到那时，我将有一个“最终”模式，因此不会“需要”南方。由于这些应用程序以前没有分发过（除了在我的环境中），公共版本不需要我在开发应用程序时使用的迁移。

我有一个两部分的问题：

1.  根据我的假设删除或至少“清理”迁移是好的（或可接受的）吗？

4.  这样做的最佳方法是什么？我想为公共/分布式基地保留一个分支可能会起作用，但我对 git 还很陌生，所以我不知道我的选择是什么。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:02:18.213

对于处理 South 和版本控制的人来说，这是一个常见的混淆点。当然，您应该在您的项目中提交迁移，因为其他人需要自己运行相同的迁移。但是，您应该在提交迁移之前清理它们，这实际上看起来很容易。

如果它是一个全新的应用程序或一个全新的项目：

1.  将应用回滚到“零”：

    ```
    python manage.py migrate myapp zero 
    ```

2.  删除应用程序的所有迁移（“迁移”目录中的所有内容，除了`__init__.py`）。

3.  生成新的初始迁移：

    ```
    python manage.py schemamigration --initial myapp 
    ```

如果它是一个现有的应用程序，那么过程大致相同，但您只会回滚到您创建的第一个*新*迁移*之前。*然后，您将简单地生成一个新的自动迁移而不是初始迁移。例如，如果应用程序已经处于迁移 0005 并且您创建迁移 0006、0007 和 0008：

 *1.  回滚到您创建的第一个迁移 (0006) 之前：

    ```
    python manage.py migrate myapp 0005 
    ```

2.  删除您创建的所有*新*迁移（0006、0007 和 0008）

3.  生成新的自动迁移：

    ```
    python manage.py schemamigration --auto myapp 
    ```

无论哪种方式，您最终都会得到一个包含所有更改的文件，而不是多个文件。然后，您将其提交给您的源代码管理。*

# java - Facebook服务器端登录，不起作用

> ID：12569194
> 
> 赞同：0
> 
> 时间：2012-09-24T16:32:33.633
> 
> 标签：java, php, ajax, facebook

您好，关于 facebook php 服务器端登录。 [http://developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

在那里面

```
$code = $_REQUEST["code"]; 
```

这是什么意思...，这个代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:47:51.537

$code 就像您交换访问令牌的授权令牌，稍后您将使用它来调用 facebook api。在用户登录到 facebook 并授权您的应用程序访问他们的信息后，您正在查看的部分处理从 facebook 重定向。此时 facebook 将用户重定向回您的站点并将代码作为 get 参数传递，该行从 $_REQUEST 获取该代码，在此上下文中与 $_GET['code'] 相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:37:54.770

> 用户授权您的应用程序后，您应该发出服务器端请求以将上面返回的代码交换为用户访问令牌。

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &client_secret=YOUR_APP_SECRET
   &code=CODE_GENERATED_BY_FACEBOOK 
```

请注意“CODE_GENERATED_BY_FACEBOOK”注释。

$_REQUEST['code'] 很可能是防止[CSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的令牌。Facebook 将创建它并通过 $_REQUEST['code'] （可以是 POST、GET 或其他）将其提供给您的应用程序。

如果您不确定 $_REQUEST 是什么，您应该阅读它的[PHP 手册条目](http://php.net/manual/en/reserved.variables.request.php)。

# javascript - (function eval () {}) 如果函数体处于严格模式，会引发语法错误？

> ID：12569195
> 
> 赞同：14
> 
> 时间：2012-09-24T16:32:35.120
> 
> 标签：javascript, theory

为什么这段代码会抛出错误？

```
// global non-strict code
(function eval () { 'use strict'; }); 
```

**现场演示：http:** [//jsfiddle.net/SE3eX/1/](http://jsfiddle.net/SE3eX/1/)

所以，我们这里有一个命名函数表达式。我想明确指出这个函数表达式出现在非严格代码中。如您所见，它的函数体是严格的代码。

严格模式规则在这里：[http ://ecma-international.org/ecma-262/5.1/#sec-C](http://ecma-international.org/ecma-262/5.1/#sec-C)

相关的项目符号是这个（它是列表中的最后一个）：

> 在严格模式代码中使用标识符 eval 或 arguments 作为 FunctionDeclaration 或 FunctionExpression 的标识符或形式参数名称 (13.1) 是 SyntaxError。尝试使用 Function 构造函数 (15.3.2) 动态定义此类严格模式函数将引发 SyntaxError 异常。

请注意，仅当函数声明/表达式本身出现在严格的代码中时，此规则才适用，而在我上面的示例中则*没有。*

但它仍然会抛出错误？为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T16:58:49.740

[§13.1](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)概述了在您的情况下应该发生的情况：

> *   如果任何 Identifier 值在严格模式 FunctionDeclaration 或 FunctionExpression 的 FormalParameterList 中出现多次，则为 SyntaxError。
> *   如果标识符“eval”或标识符“arguments”出现在严格模式 FunctionDeclaration 或 FunctionExpression 的 FormalParameterList 中，则为 SyntaxError。
> *   **如果标识符“eval”或标识符“arguments”作为严格模式 FunctionDeclaration 或 FunctionExpression 的标识符出现，则为 SyntaxError。**

强调我的。您的严格模式函数的*标识符*是`eval`，因此，它是`SyntaxError`. 游戏结束。

* * *

要了解上述为什么是“严格模式函数表达式”，请查看第 13 节（函数定义）中的语义定义：

> 产生式
> *FunctionExpression* : `function` *Identifier* [opt] `(` *FormalParameterList* [opt] `) {` *FunctionBody* `}` 的评估如下：
> 
> 1.  返回创建一个新的函数对象的结果，如 13.2 中指定的，参数由 FormalParameterListopt 指定，主体由 FunctionBody 指定。传入正在运行的执行上下文的 LexicalEnvironment 作为 Scope。**如果 FunctionExpression 包含在严格代码中或其 FunctionBody 是严格代码，则传入 true 作为 Strict 标志。**

强调我的。上面显示了函数表达式（或声明）如何变得严格。它所说的（用简单的英语）是*FunctionExpression*在`strict`两种情况下：

1.  它是从`use strict`上下文中调用的。
2.  它的函数体以`use strict`.

您的困惑源于认为只有**函数体**是`strict`，而实际上整个**函数表达式**是`strict`。您的逻辑虽然直观，但不是 JS 的工作方式。

* * *

如果您想知道为什么 ECMAscript 以这种方式工作，那很简单。假设我们有这个：

```
// look ma, I'm not strict
(function eval() {
     "use strict";
     // evil stuff
     eval(); // this is a perfectly legal recursive call, and oh look...
             // ... I implicitly redefined eval() in a strict block
     // evil stuff
})(); 
```

值得庆幸的是，上面的代码会抛出，因为整个*函数表达式*被标记为`strict`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:59:36.063

好问题！

因此，要找到您的问题的答案，您实际上需要查看[声明函数的过程](http://ecma-international.org/ecma-262/5.1/#sec-13)（特别是步骤 3-5 - 添加了重点）：

> 1.  *...*
> 2.  *...*
> 3.  *调用envRec*的 CreateImmutableBinding 具体方法，传入*Identifier*的 String 值作为参数。
> 4.  让*闭包*是创建一个新的函数对象的结果，如 13.2 中指定的，其参数由*FormalParameterList [opt]*指定，主体由*FunctionBody*指定。*传入 funcEnv*作为Scope *。* 如果*FunctionExpression*包含在严格代码中或其**FunctionBody是严格代码，则传入****true 作为*Strict*标志*****。***
> ***   **调用 envRec 的 InitializeImmutableBinding 具体方法，传递 Identifier 的 String 值和闭包作为参数。****

 **因此，当绑定在第 3 步中创建时，您对 eval 的使用不是问题，但是一旦到达第 5 步，它就会尝试`eval`在严格的词法环境中初始化绑定（即，将某些内容分配给`eval`），这是不允许的，因为我们在第 4 步之后处于严格的上下文中。

请记住，限制不在于初始化新`eval`变量。它将它用作赋值运算符的*LeftHandSideExpression*，这就是函数声明过程的第 5 步中发生的事情。

**更新：**

正如@DavidTitarenco 指出的那样，这在第[13.1](http://ecma-international.org/ecma-262/5.1/#sec-13.1)节中明确涵盖（除了第[13](http://ecma-international.org/ecma-262/5.1/#sec-13)节中的隐式限制）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:56:36.813

我猜它会引发错误，因为函数 eval 内部会指向现在违反严格模式的函数本身。**

# algorithm - 了解维特比算法

> ID：12569198
> 
> 赞同：2
> 
> 时间：2012-09-24T16:32:51.963
> 
> 标签：algorithm, nlp, viterbi

我一直在寻找维特比算法的精确逐步示例。

考虑使用输入句子的句子标记为：

```
The cat saw the angry dog jump 
```

从这里我想生成最可能的输出：

```
D N V T A N V 
```

我们如何使用 Viterbi 算法使用 trigram-HMM 获得上述输出？

*（PS：我正在寻找精确的逐步解释，而不是一段代码或数学表示。假设所有概率都是数字。）*

万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:00:18.897

我建议您在其中一本书中查找它，例如 Chris Bishop "Pattern Recognition and Machine Learning"。维特比算法是一个非常基本的东西，并且在文献中已经进行了各种详细程度的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-09T21:19:01.003

对于维特比算法和隐马尔可夫模型，首先需要转移概率和发射概率。

在您的示例中，转换概率为 P(D->N)，P(N->V)，发射概率（假设二元模型）为 P(D|the)，P(N|cat)。

当然，在现实世界的例子中，单词比 cat、saw 等要多得多。你必须遍历所有训练数据才能估计 P(D|the)、P(N|cat)、 P(N|汽车)。然后我们使用维特比算法找到最可能的标签序列，例如

```
D N V T A N V 
```

鉴于你的观察。

这是我对维特比的实现。

```
def viterbi(vocab, vocab_tag, words, tags, t_bigram_count, t_unigram_count, e_bigram_count, e_unigram_count, ADD_K):
    vocab_size = len(vocab)
    V = [{}]

    for t in vocab_tag:
        # Prob of very first word
        prob = np.log2(float(e_bigram_count.get((words[0],t),0)+ADD_K))-np.log2(float(e_unigram_count[t]+vocab_size*ADD_K))
        # trigram V[0][0]
        V[0][t] = {"prob": prob, "prev": None}

    for i in range(1,len(words)):
        V.append({})
        for t in vocab_tag:
            V[i][t] =  {"prob": np.log2(0), "prev": None}
        for t in vocab_tag:
            max_trans_prob = np.log2(0);
            for prev_tag in vocab_tag:
                trans_prob = np.log2(float(t_bigram_count.get((t, prev_tag),0)+ADD_K))-np.log2(float(t_unigram_count[prev_tag]+vocab_size*ADD_K))   
                if V[i-1][prev_tag]["prob"]+trans_prob > max_trans_prob:
                    max_trans_prob = V[i-1][prev_tag]["prob"]+trans_prob 
                    max_prob = max_trans_prob+np.log2(e_bigram_count.get((words[i],t),0)+ADD_K)-np.log2(float(e_unigram_count[t]+vocab_size*ADD_K))
                    V[i][t] = {"prob": max_prob, "prev": prev_tag}
    opt = []
    previous = None 
    max_prob = max(value["prob"] for value in V[-1].values())
    # Get most probable state and its backtrack
    for st, data in V[-1].items():
        if data["prob"] == max_prob:
            opt.append(st)
            previous = st
            break
    for t in range(len(V) - 2, -1, -1):
        opt.insert(0, V[t + 1][previous]["prev"])
        previous = V[t][previous]["prev"]
    return opt 
```

# android - 移动应用程序的签到流程（fb、4sq、g+）

> ID：12569200
> 
> 赞同：3
> 
> 时间：2012-09-24T16:32:53.323
> 
> 标签：android, objective-c, facebook, foursquare, google-plus

我想制作一个应用程序，允许用户在一个地方一次将签到发布到他们所有的社交网络。

我可以通过后端服务器而不是直接从应用程序签入用户吗？

我的意思是， - 用户在应用程序中注册她的社交网络凭据（fb、4sq、g+）=> 获取身份验证令牌并将其发送到服务器。- 用户点击应用程序中的签到按钮。- 应用程序将用户的位置详细信息和签到请求发送到后端服务器，服务器代表用户在用户注册的所有社交网络上发布签到。这些应该是准确的签到，而不仅仅是墙上的帖子。

对不起，如果这是一个愚蠢的问题。我自己不是开发人员，我只是在写 TOR。我已经广泛搜索，但无法得到明确的答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:27:32.797

是的，可以从您的服务器签入用户。如果用户已授权您的应用，您可以使用他们的 OAuth 令牌代表他们执行操作（例如签入）。有关通过 API 执行操作的更多信息，请参阅[http://developer.foursquare.com](http://developer.foursquare.com)。

# java - 选择性地抑制错误消息 - 在 Android 中禁用消息：2114

> ID：12569203
> 
> 赞同：1
> 
> 时间：2012-09-24T16:33:11.780
> 
> 标签：java, android, android-intent, error-handling

有谁知道我们是否可以选择性地抑制运营商发送的 SMS 错误消息？

我们有一个自动回复用户的应用程序。只有在 Sprint 网络上，当应用自动回复带有 SMS 消息的电话时，我们会收到一条短信：2114。

该线程详细描述了我们的问题：http: [//community.sprint.com/baw/thread/82947](http://community.sprint.com/baw/thread/82947)

提前致谢 ..

# iphone - 告诉 ViewController UIManagedDocument 准备好使用了吗？

> ID：12569204
> 
> 赞同：0
> 
> 时间：2012-09-24T16:33:17.300
> 
> 标签：iphone, objective-c, cocoa-touch, uiviewcontroller, uimanageddocument

我正在`UIManagedDocument`我的 AppDelegate 中创建或打开一个，使用完成处理程序块在文档准备好使用时通知我。

```
 // CHECK TO SEE IF MANAGED DOCUMENT ALREADY EXISTS ON DISK
    if([fileManager fileExistsAtPath:[documentLocation path]]) {

        // EXISTS BUT CLOSED, NEEDS OPENING
        [[self managedDocument] openWithCompletionHandler:^(BOOL success) {
            NSLog(@"DOCUMENT: Opened ...");
            // TODO: Things to do when open.
        }];
    } else {
        //DOES NOT EXIST, NEEDS CREATING AND OPENING
        [[self managedDocument] saveToURL:documentLocation forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"DOCUMENT: Created & Opened ...");
            // TODO: Things to do when open.
        }];
    } 
```

我的问题是我想`NSFetchedResultsController`在我的 ViewController 上设置一个，但目前控制器视图在创建或打开文档（来自 AppDelegate）之前加载。我只是好奇我如何通知控制器文档已打开并可以使用。我的猜测是我会使用 a `NSNotification`，但我只是想检查一下我不会以错误的方式处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:42:33.600

如果您有 in 的实例，则在您的`ViewController`中`appDelegate`编写一个公共方法`ViewController`并在块完成处理程序中调用此方法。

# java - 无法在 TFS 位置构建 ant 目标

> ID：12569205
> 
> 赞同：0
> 
> 时间：2012-09-24T16:33:29.423
> 
> 标签：java, web-applications, ant, tfs

我的 TFS 项目文件夹中有一个 ant 目标，xml 文件。项目文件夹与 TFS（Team Foundation Server）绑定。我的问题是，当我尝试通过在该 TFS 绑定位置运行 ant 目标来构建项目时，它会失败。它给出了以下失败。

```
> ria_ant_build.xml:435: Error running C:\Program Files\Java\jdk1.6.0_20\bin\javac.exe  compiler
        at org.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(DefaultCompilerAdapter.
java:508)
        at org.apache.tools.ant.taskdefs.compilers.JavacExternal.execute(JavacExternal.java:61)
        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1153)
        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:930)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:811)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.io.IOException: Cannot run program "C:\Program Files\Java\jdk1.6.0_20\bin\javac.exe": CreateProcess erro
r=87, The parameter is incorrect
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
        at java.lang.Runtime.exec(Runtime.java:593)
        at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:862)
        at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:481)
        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:495)
        at org.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(DefaultCompilerAdapter.
java:505)
        ... 19 more
Caused by: java.io.IOException: CreateProcess error=87, The parameter is incorrect
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
        at java.lang.ProcessImpl.start(ProcessImpl.java:30)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
        ... 24 more 
```

**但是当我将项目复制到不同的位置并从文件夹中删除只读属性时，ant 目标运行时没有任何错误，并且我得到了一个可部署的工件。**但即使我从 TFS 文件夹中删除只读属性，我也无法构建 ant 目标。似乎问题存在于它自己的 TFS 位置。:(

有人可以建议我解决这个问题的方法吗？我必须留在 TFS 位置你们知道我假设的原因:)

——感谢和问候，兰加纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:19:18.030

从你的问题很难弄清楚是什么真正导致了你的问题。

也许，您的 ant 调用长度太长，甚至比最大命令提示行（在最新版本的 Windows 中为 8191 个字符）还要长。作为问题[Fail to launch application (CreateProcess error=87), can't use short classpath workaround](https://stackoverflow.com/questions/2893970/fail-to-launch-application-createprocess-error-87-cant-use-shorten-classpath)说您可以考虑“缩短文件夹名称，减少文件夹树的深度，使用参数文件等”。

尝试使用**-debug选项运行****ant** ，以查看 TFS 工作空间内构建调用的特定命令行参数。通过这种方式，您可以估计通话的总长度。

# javafx-2 - 如何设置 JavaFX 2 全屏消息的样式？

> ID：12569206
> 
> 赞同：11
> 
> 时间：2012-09-24T16:33:33.167
> 
> 标签：javafx-2

在 JavaFX 中进入全屏模式会导致一条巨大的消息告诉用户他可以按 离开此模式`ESC`。这不仅使我的应用程序失去了“桌面化”的感觉，而且看起来也很丑陋。

我想这个信息不会被压制，所以我希望我至少可以给它打上烙印。那么，我该如何设计呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-20T16:48:59.623

JavaFX 8 有办法抑制此消息：

```
stage.setFullScreenExitKeyCombination(KeyCombination.NO_MATCH); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T20:02:03.577

请求[允许受信任的应用程序禁用全屏覆盖警告并禁用“退出 ESC”行为](http://javafx-jira.kenai.com/browse/RT-15314)和[仅触摸屏 - 按 ESC 退出全屏模式。不适用。](http://javafx-jira.kenai.com/browse/RT-25018)从 JavaFX 2.2 开始，这两个请求都没有实现。

没有要求我可以找到允许对消息进行样式设置的请求。您可以[在 JavaFX Runtime project 下创建一个](http://javafx-jira.kenai.com)，但我认为由于潜在的安全问题，它会被拒绝。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-23T08:27:37.663

您可以完全禁用该消息：

```
primaryStage.setFullScreenExitHint(""); 
```

# backbone.js - 一页有 2 个分页 - 主干路由

> ID：12569207
> 
> 赞同：0
> 
> 时间：2012-09-24T16:33:37.843
> 
> 标签：backbone.js, backbone-routing

我需要在一页上处理 2 个单独的分页。

目前我只有一个分页，锚只包含简单的主题标签，这些标签由 Route 对象解析，如下所示

**HTML**

```
<a href="#1"></a> 
```

**骨干路由器**

```
routes: {
        ":number": "paginate"
    } 
```

我将如何一次处理两个分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:35:55.377

我最终做的是我编写了一个函数，它解析哈希查询字符串并通过聚合器触发事件​​，然后被需要对分页做出反应的人拾取。在我的情况下，它是一个清除其项目并添加下一页的集合......

这是路由器以防万一：

```
define(
    function(){

    var r_Paginate = Backbone.Router.extend({

    /* Initialise Object */
        initialize: function(options){
            Backbone.history.start();
        },
    /* Events */
        routes: {
            ":any" : "query",
        },

    /* Object Methods */
        query: function(a){
            if(a.indexOf('&') > -1){
                var queries = a.split('&');
                for (x in queries){
                    var query = queries[x].split('=');
                    Z.events.trigger('paginate:' + query[0], {'page' : query[1]});
                }
            }
        }

    });
    return r_Paginate
}); 
```

# regex - 带有负前瞻的正则表达式

> ID：12569210
> 
> 赞同：0
> 
> 时间：2012-09-24T16:33:53.680
> 
> 标签：regex

我正在尝试解析带有负前瞻的行，但我无法理解它。

所以，如果我有一条线，例如`int a = sincos(a, &a);`

我如何使用正则表达式来解析上面的行，使其匹配`a`除带有的行之外的所有行`&`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:39:32.743

我认为您实际上对这里的负面回顾感兴趣。您希望其实例`a`前面没有`&`.

```
\b(?<!&)a\b 
```

此模式查找`a`由单词边界分隔`\b`且前面没有紧跟 & 符号的实例`(?<!&)`。

包括单词边界可以防止`a`在其他单词中间进行匹配，否则您将有 5 个匹配项，如下所示：

```
var a = calculate(a, &a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:41:40.247

这是[你](http://rubular.com/r/cXQSCqWgd2)要找的东西吗？

除了 & 之外的任何东西上的非捕获组，并且有一个单独的“a”组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:36:57.067

这个会做你想做的：

`/(?<!&)a/i`

# android - android上的lastfm艺术家信息

> ID：12569215
> 
> 赞同：1
> 
> 时间：2012-09-24T16:34:12.900
> 
> 标签：android, android-layout, android-xml

嘿，伙计们，我想在 android 上显示艺术家信息，所以我尝试解析 xml，但是在艺术家摘要之前有像这样“CDATA”这样的奇怪标签，所以当我运行我的代码时，我得到空白文本视图，我尝试使用 Json，但它超出了我的编写json解析的能力

这是我的代码

```
 String URL = "http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=Cher&api_key=b25b959554ed76058ac220b7b2e0a026&limit=" + 1 + "&page=" + 1;
        XmlParser parser = new XmlParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element
                            NodeList nl = doc.getElementsByTagName("artist");
             for (i = 0; i < nl.getLength(); i++) 
             {
                    Element e = (Element) nl.item(i);
                     name = parser.getValue(e, KEY_NAME);// name child value
                        image = parser.getValue(e, KEY_IMAGE);
                        summary = parser.getValue(e, KEY_Summary);
                                            return summary;
        } 
            return null;
    }
            @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
                    URL thumb_u;
            try {
                thumb_u = new URL(result);
                  Drawable thumb_d = Drawable.createFromStream(thumb_u.openStream(), "src");
                  tv.setText(result);//textview text set
                    icon.setImageDrawable(thumb_d); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:57:54.013

从哪里来`XmlParser`？我用谷歌搜索，我猜它来自[这里](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)？如果是这样，改变

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
```

将此行添加到`getDomElement`：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setCoalescing(true); 
```

文档：[setCoalescing](http://developer.android.com/reference/javax/xml/parsers/DocumentBuilderFactory.html#setCoalescing%28boolean%29)

# regex - 如何使用 grep 提取子字符串？

> ID：12569216
> 
> 赞同：5
> 
> 时间：2012-09-24T16:34:15.960
> 
> 标签：regex, grep

> **可能重复：**
> [从字符串中提取正则表达式结果并将其写入变量](https://stackoverflow.com/questions/3148558/extract-regexp-result-from-string-and-write-it-to-a-variable)

这是我的命令：

> grep -E '\*[[:space:]]+FIN[[:space:]]+([^)]+?)') myfile

它输出：

> *   鳍（成功）

我希望它只输出：

> 成功

我`grep`该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T16:42:46.243

您可以将 grep 命令的输出通过管道传输到 awk 命令。

```
grep -E '*[[:space:]]+FIN[[:space:]]+([^)]+?)') myfile | awk '{print $2}' 
```

我不确定如何单独使用 grep 来做到这一点，因为它并不是真正针对那个确切的用例量身定制的。由于您在 grep 所在的平台上，因此当您可以让一个命令解决部分问题而另一个命令解决另一部分问题时，请使用管道对您有利。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T16:55:22.933

`grep`无法输出单个捕获组，但您可以使用`sed`它来代替：

```
sed 's/\*[[:space:]]\+FIN[[:space:]]\+(\([^)]\+\))/\1/g' file 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T17:15:34.190

如果您使用[ack](http://betterthangrep.com)那么您可以使用匹配组和`--output`开关：

```
ack '\*\s+FIN\((.+?)\)' --output='$1' myfile 
```

# php - php 注册表 $_SESSION['username'] 应该是全局的吗？

> ID：12569217
> 
> 赞同：0
> 
> 时间：2012-09-24T16:34:24.103
> 
> 标签：php, registration

我认为这不是一个难题，但我陷入了困境。目前我使用php建立了一个登录和注册（注册）界面。我的想法很直接：index.php显示“登录”和“注册”，如果您在数据库中没有帐户，您将被引导到“注册”页面，填写完所有需要的信息后，我想将用户引导至显示“您已注册为”的页面。问题出在这里，我尝试使用 $_SESSION['username'] 来对应用户是谁。但不幸的是，没有打印出用户名。我在registered.php 中使用了isset() 来检查是否设置了$_SESSION['username']。它表明它没有设置，但它应该在那里！

流程是signup.php -> register.php -> registered.php。我的问题是 $_SESSION['username'] 应该在声明 session_start() 之后在 php 文件中传递。下面是我的代码，有人会指出我哪里出错了。

非常感谢。

**注册.php**

```
<?php
session_start(); // attention add session_start() again, am I wrong?
$title = "Sign up";
print_r($_SESSION);
?>

<html>
    <head>
        <title><?= $title ?></title>        
        <!--
        <link href="index.css" type="text/css" rel="stylesheet"></link>
        -->
        <link href="signup.css" type="text/css" rel="stylesheet"></link>

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="index.js"></script>

    </head>

    <body>
        <div id="main-content">

            <form method="post" action="register.php">

                <label><input class="defaultText" title="username" name="username" type="text"></label><br/>
                <label><input class="defaultText" title="email" name="email" type="text"></label><br/>
                <label><input class="defaultText" title="company" name="company" type="text"></label><br/>

                <label class = "password">password:<input name="pass1" type="password" /></label><br/>
                <label class = "password">password (again):<input name="pass2" type="password"/></label><br/>

                <input type="submit" value="Sign up!">
            </form>
            <div style="clear: both;"></div>
        </div>
    </body>
</html> 
```

**注册.php**

```
<?php

    if(isset($_REQUEST['username']) && isset($_REQUEST['email']) && isset($_REQUEST['company']) && isset($_REQUEST['pass1']) && isset($_REQUEST['pass2'])){

     $username = $_REQUEST['username']; 
     $email = $_REQUEST['email'];
     $company = $_REQUEST['company'];
     $pass1 = $_REQUEST['pass1'];
     $pass2 = $_REQUEST['pass2'];

     if(strlen($username) <= 0) {      
       die("Username must be greater than 0 characters\n");
     }
     if(strlen($email) <= 0) {
       die("Email must be greater than 0 characters\n");
     } 
     if(strlen($company) <= 0) {
       die("Company name must be greater than 0 characters\n");
     }
     if($pass1 != $pass2 && $pass1 <= 0) {
       die("Passwords are not the same.");
     }

     $hash = hash('sha256', $pass1);

     # connect to world database on local computer                                                                                                
     check(mysql_connect("localhost", "root", "123456"), "connect");

     $connect = mysql_connect("localhost", "root", "123456");
        # in order to insert data into database tables, database is already there built via mySQL command from terminal
        # connect with the database

     check(mysql_select_db("product"), "selecting db"); 

     # mysql_real_escape_string() This function must always (with few exceptions) be used to make data safe before sending a query to MySQL. 
     $username = mysql_real_escape_string($username);
     $email = mysql_real_escape_string($email);
     $company = mysql_real_escape_string($company); 

     # this $query query is to send the "insert values" query into a table
     $query = "INSERT INTO admins ( username, hash, email, company ) VALUES ( '$username', '$hash', '$email', '$company' );";
     $results = mysql_query($query);

     check($results, "adding user"); // if not pass show error message

     header("Location: registered.php");
    }

    function check($result, $message) { 
      if (!$result) {
        die("SQL error in $message: " . mysql_error());
      }

      $_SESSION['username'] = $_REQUEST['username'];
      $_SESSION['email'] = $_REQUEST['email'];
      $_SESSION['company'] = $_REQUEST['company'];     

    }
?> 
```

**注册.php**

```
<?php
$title = "Registered!";
?>

<html>

    <head>
        <title><?= $title ?></title>

        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="index.js"></script>

    </head>

    <body>

<?php

print_r($_SESSION);
if(isset($_SESSION['username']))
    print "hello";
print $_SESSION['username'];
echo $_SESSION['company'];

?>  
        <div id="main-content">

            <h3>You have registered in administration system as <?= $_SESSION['username'] ?></h3>
            <table border="1">
                <tr>
                <th>Name</th>
                <th>Company</th>
                <th>Email</th>
                </tr>

                <tr>

                    <td><?= $_SESSION['username'] ?></td>
                    <td><?= $_SESSION['email'] ?></td>
                    <td><?= $_SESSION['company'] ?></td>

                </tr>

                <h3>please log in into the administration system</h3>
                <h4><a href = "index.php">Log In</a></h4>

            </table> 

        <div style="clear: both;"></div>        

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:35:17.643

您需要`session_start();`在任何内容之前添加每个页面。

`register.php`并且`registered.php`缺少会话启动器，他们都使用`$_SESSION`

编辑：就像[迈克布兰特](https://stackoverflow.com/users/1529853/mike-brant)所说，制作一个启动会话的全局文件，并将其包含在任何内容之前的每个文件中。这样，您可以将所有公共变量和会话放在一个文件中。

# python - Python Fabric：跳过需要密码的登录

> ID：12569225
> 
> 赞同：2
> 
> 时间：2012-09-24T16:35:07.583
> 
> 标签：python, ssh, passwords, fabric

我有一个类似的问题： [如何跳过要求密码的 Fabric 连接？](https://stackoverflow.com/questions/11938324/how-can-i-skip-fabric-connections-that-ask-for-a-password) 没有答案。我正在寻找一种方法让 Fabric 认为任何要求输入密码而不是 SSH 密钥登录的主机都是错误的，因为这意味着我正在连接的用户在服务器上没有帐户（而且我遍历大量主机）。我试过设置

```
env.password = None 
```

和

```
env.password = 'none' 
```

也

```
with setting(warn_only=True): 
```

但是 Fabric 一直在询问密码。有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T18:13:41.230

我相信[env.abort_on_prompts](http://docs.fabfile.org/en/1.4.3/usage/env.html#abort-on-prompts)将实现您所需要的，即如果需要任何类型的用户交互则失败，同时在可以进行公钥身份验证时工作。

根据文档，此选项调用[abort()](http://docs.fabfile.org/en/1.4.3/api/core/utils.html#fabric.utils.abort)，而后者又使用[sys.exit](http://docs.python.org/library/sys.html#sys.exit)，这会引发[SystemExit](http://docs.python.org/library/exceptions.html#exceptions.SystemExit)，从而可以检测到内部调用并从`abort`使用`except SystemExit`或类似调用中恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T17:46:55.770

我刚刚修补了 fabric 中的 utils.py 以返回 raise 而不是 sys.exit(1)。让你干净利落地处理它，而不是让它自己胡扯。

```
(about line 34)
    else:
        #sys.exit(1)
        raise("I broke") 
```

# php - 在jquery代码之后调用PHP函数

> ID：12569226
> 
> 赞同：0
> 
> 时间：2012-09-24T16:35:07.190
> 
> 标签：php, jquery

亲爱的朋友们，我在一个网页上有大量表单，它们都调用一个 PHP 函数。但是我想要的是表单应该调用一个 jquery 函数，如果有需要，那么 jquery 应该让它调用 PHP 函数。

我不想使用 Ajax 只是想创建一个 PHP 函数调用，如果问题无法通过 jquery 解决。

每个表单都与一些数据相关联。然而，页面上显示的所有数据并非始终可用。所以我想要的是

```
 if (data == available)   { call PHP}
 elseif (data != available) { jquery alert('sory bro');} 
```

如果现在看不到数据，只需使用 jquery 说声抱歉（无需从服务器检查）。加载页面时，我们知道哪些数据是看不到的，并以不同的颜色显示。

这些表单是使用 PHP 循环生成的，每个表单显示不同的数据但类型相同（每个表单都与一种文章相关联）。

我看到的所有问题都是关于 Ajax 的。我当前的 PHP 代码运行良好。如果数据不可用，我希望在访问服务器之前 jquery 应该这样说。我们已经知道到目前为止哪些数据不可用。

我希望我已经解释过了

非常感谢

**我想我的观点没有说清楚..当页面加载时已经知道哪些数据不可显示并且它被标记为单独的颜色并且div有不同的arrtibute ...*有什么办法吗那我不为那些表格调用PHP函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:38:07.750

PHP 在服务器端执行。Javascript (jQuery) 在客户端执行。所以 PHP 在 Javascript 开始执行之前就已经完全执行完毕。

这就是为什么每个人都说你需要使用 AJAX。AJAX 是一种回调服务器以执行 PHP 代码的方法。PHP 代码**仅**在服务器上执行。因此，为了执行 PHP，您**必须对**服务器进行回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:38:08.203

根据您的逻辑，数据存在于服务器上。如果您想知道数据是否可用，那么您必须联系服务器。如果是这种情况，如何在不发送ajax请求的情况下解决它..

您需要发出请求，因为 jQuery 是客户端代码，无法直接联系服务器。您需要服务器端脚本来执行它，在您的情况下是 PHP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:38:28.453

最简单的解决方案：

```
 if (data == available)   { $("form").trigger('submit') }
 elseif (data != available) { jquery alert('sory bro');} 
```

显然，您需要根据您的特定形式/要求调整选择器。

只需通过在函数中添加类似的内容来确保您的表单不会在您按下提交时意外提交`event.preventDefault();`。

# sql - SQL Server：存储过程 IFNULL 检查

> ID：12569229
> 
> 赞同：2
> 
> 时间：2012-09-24T16:35:27.627
> 
> 标签：sql, sql-server-2008, sql-server-2005, stored-procedures

```
Solution_id (Primary key, Int)
Col1 (varchar)
Col2 (varchar)
Col3 (varchar)
Col4 (varchar)
Col5 (varchar) 
```

我正在编写一个存储过程来更新这个表。以上 6 列有 6 个输入参数。

```
@Attached_File1 VARCHAR(MAX),
@Attached_File2 VARCHAR(MAX),
@Attached_File3 VARCHAR(MAX),
@Attached_File4 VARCHAR(MAX),
@Attached_File5 VARCHAR(MAX),
@Ticket_ID BIGINT 
```

我想编写一个 SQL 查询，它将使用输入参数中指定的值更新表。但我不能用 null 覆盖附件列。我的意思是我只需要使用那些包含数据的参数。

例如，如果表有一行

```
[10, "aaa", "bbb", "efg", null, null] 
```

输入参数是

```
(10, null, null, "mno", "ddd", null) 
```

然后在更新后该行将变为

```
[10, "aaa", "bbb", "mno", "ddd", null] 
```

如何检查空/空字符串并相应地生成更新查询以实现此目的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:38:39.617

这是你想要的吗？

```
UPDATE mytable
SET Col1 = ISNULL(@Attached_File1, Col1),
    Col2 = ISNULL(@Attached_File2, Col2),
    Col3 = ISNULL(@Attached_File3, Col3),
    Col4 = ISNULL(@Attached_File4, Col4),
    Col5 = ISNULL(@Attached_File5, Col5)
WHERE Solution_id = @Ticket_ID 
```

`ISNULL`取两个值，如果第一个不为空，则使用它，否则使用第二个值。

[有关更多信息，请参阅 MSDN`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

* * *

**更新**

我刚刚注意到你最后的评论，它谈到了空字符串......

> 如何检查空/空字符串并相应地生成更新查询以实现此目的？

在这种情况下，您可以执行以下操作...

```
UPDATE mytable
SET Col1 = ISNULL(NULLIF(@Attached_File1,''), Col1),
    Col2 = ISNULL(NULLIF(@Attached_File2,''), Col2),
    Col3 = ISNULL(NULLIF(@Attached_File3,''), Col3),
    Col4 = ISNULL(NULLIF(@Attached_File4,''), Col4),
    Col5 = ISNULL(NULLIF(@Attached_File5,''), Col5)
WHERE Solution_id = @Ticket_ID 
```

这使用了`NULLIF`接受两个值的语句，如果第一个值与第二个值相同，则返回 NULL，否则返回第一个值。

[有关更多信息，请参阅 MSDN`NULLIF`](http://msdn.microsoft.com/en-us/library/ms177562.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:38:30.677

```
update  YourTable
set     col1 = isnull(@Attached_File1, col1)
,       col2 = isnull(@Attached_File2, col2)
,       col3 = isnull(@Attached_File3, col3)
,       ...
where   Solution_ID = @Ticket_ID 
```

如果参数可以包含空字符串，请考虑@freefaller 的答案。如果它可以包含 whitepsace，请尝试：

```
set     col1 = case 
               when @Attached_File1 like '%[^ \t\r\n]%' then @Attached_File1 
               else col1 
               end
,       col2 = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:38:35.380

仅检查 Null，而不检查空字符串：

```
UPDATE 
    tableX
SET
    Col1 = COALESCE(@Attached_File1, Col1),
    ...
    Col5 = COALESCE(@Attached_File5, Col5)
WHERE
    Solution_id = @Ticket_ID ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:40:21.667

我会试试这个：

```
UPDATE Table
SET
    Col1 = ISNULL(@Attached_File1, Col1),
    Col2 = ISNULL(@Attached_File1, Col2),
    Col3 = ISNULL(@Attached_File1, Col3),
    Col4 = ISNULL(@Attached_File1, Col4),
    Col5 = ISNULL(@Attached_File1, Col5),
WHERE
    Solution_Id = @Ticket_ID 
```

# jquery - JQuery：更改href链接，但仅在下次单击时

> ID：12569231
> 
> 赞同：-1
> 
> 时间：2012-09-24T16:35:57.367
> 
> 标签：jquery, href, attr

好的，所以需要通过 jquery 更改链接。下面的代码工作正常，但它会立即起作用。我需要该链接仅在下一次单击时变为活动状态，而不是在当前单击时变为活动状态。希望这有意义吗？

任何帮助表示赞赏。

```
 $("#m-menu").click(function(){
$("#menu").animate({right: 0}, 500, "easeInOutCirc");
$(this).text($(this).text() == 'HOME' ? 'HOME' : 'HOME');
$(this).attr('href', 'http://backtohomepage.com');
 }); 
```

* * *

* * *

编辑：感谢所有的答案家伙 - 它不像每隔一个点击解决方案那么简单，并且非常抱歉第一次没有更清楚。这是源页面（为了更好地说明我的要求，我没有应用上面的 .attr 代码）：http: [//joinersart.co.uk/mtest](http://joinersart.co.uk/mtest)

基本上，当用户单击左/右箭头来导航图库时，您会看到菜单栏缩小。为了取回它，您单击“菜单”。再次退出后，“MENU”文本变为“HOME”并具有新功能 - 链接到主页。当然，如果您再次单击左/右箭头，它会切换回“MENU”并将其功能更改回扩展菜单栏。所以基本上这个链接有两个功能（或者作为主页链接 - “HOME”，或者作为菜单栏扩展器 - “MENU”），具体取决于菜单栏是突出还是隐藏。

当我尝试应用上述 .attr 代码时，会发生这种情况 - 用户单击“菜单”链接，而不是菜单栏展开，他们立即被带到主页。所以它太快激活链接 .click 功能被执行。我需要它做的是展开菜单栏并首先将文本从“MENU”更改为“HOME”。只有当用户单击它时，他们才会进入主页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:39:08.203

```
$('#m-menu').click(function () {
    // Do the work here
    $(this).unbind('click');
    $(this).click(function () {
          $(this).attr('href', 'http://backtohomepage.com');
    })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:39:21.440

你可以这样做：

```
$("#m-menu").one('click', function (){
    $("#m-menu").click(function(){
        $("#menu").animate({right: 0}, 500, "easeInOutCirc");
        $(this).text($(this).text() == 'HOME' ? 'HOME' : 'HOME');
        $(this).attr('href', 'http://backtohomepage.com');
    });
}); 
```

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:42:12.863

您是否希望每次点击都发生一次点击？

如果是这种情况，那么你可以这样做

```
$(function() {
    var counter = 0;
    $("#m-menu").click(function(){
        counter ++;
        if( counter % 2 == 0){
            $("#menu").animate({right: 0}, 500, "easeInOutCirc");
            $(this).text($(this).text() == 'HOME' ? 'HOME' : 'HOME');
            $(this).attr('href', 'http://backtohomepage.com');
        }
     }); 

 }); 
```

这将确保您的代码在每次点击时都被执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:38:01.760

你是这个意思 ？

```
var nbclicks = 0;
$("#m-menu").click(function(){
     $("#menu").animate({right: 0}, 500, "easeInOutCirc");
     if (nbclicks++==1) {
          $(this).text($(this).text() == 'HOME' ? 'HOME' : 'HOME');
          $(this).attr('href', 'http://backtohomepage.com');
     }
 }); 
```

# php - 当从php中获取值并且html不能用php编写时，如何在html的下拉列表中显示选择

> ID：12569232
> 
> 赞同：0
> 
> 时间：2012-09-24T16:36:02.837
> 
> 标签：php, html

我在 html 中有这段代码 -

```
<select name="uyear">

 <option value="0">YEAR</option>
<option value="1980">1980</option>
<option value="1981">1981</option>
<option value="1982">1982</option>
<option value="1983">1983</option>
<option value="1984">1984</option>
<option value="1985">1985</option>
<option value="1986">1986</option>
<option value="1987">1987</option>
<option value="1988">1988</option>
<option value="1989">1989</option>
<option value="1990">1990</option>
<option value="1991">1991</option>
<option value="1992">1992</option>
<option value="1993">1993</option>
<option value="1994">1994</option>
<option value="1995">1995</option>
<option value="1996">1996</option>
<option value="1997">1997</option>
<option value="1998">1998</option>
<option value="1999">1999</option>
<option value="2000">2000</option>
<option value="2001">2001</option>
<option value="2002">2002</option>
<option value="2003">2003</option>
<option value="2004">2004</option>
<option value="2005">2005</option>
<option value="2006">2006</option>
<option value="2007">2007</option>
<option value="2008">2008</option>
<option value="2009">2009</option>
</select> 
```

现在我有某些值存储在数据库中，我必须从数据库中获取值，然后将存储的年份显示为选中但我无法在 php 中写入今年的下拉列表。现在我如何在上面的下拉列表中显示选定的值而不用 php 代码编写它？

编辑：它只是我在这里展示的一个下拉列表..我有大量用 html 编写的下拉列表，如果我在 php 中更改它们，则需要 3-4 天，因为有 rn 下拉列表页。这就是为什么我需要一个解决方案，我不需要更改选择标签 in php 代码 ans 仍然可以根据 DB 值显示选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:41:29.790

让 PHP 在另一个地方写：

```
<body onload="document.getElementsByName('uyear')[0].selectedIndex=$myDearIndex"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:22:38.783

未经测试：

```
<body onload="setDefaultSelections()">

<script>
function setDefaultSelection(selectName, default) {
    var select = document.getElementsByName(selectName)[0];
    for (i = 0; i < select.length; i++) {
        if (select[i].value == default) {
            select.selectedIndex = i;
            break;
        }
    }
}
function setDefaultSelections() {
    setDefaultSelection('uyear', '<? $uyear ?>');
    setDefaultSelection('ucountry', '<? $country ?>');
    ...
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:01:32.850

如果 PHP 退出了，您将不得不在 JavaScript 中做一些事情......并且您可能需要进行值搜索以选择正确的索引。我认为执行一个函数然后为每个选择编写脚本可能会很痛苦，因为它只是在 PHP 中重写您的选择输出循环。

# ruby - 自制 - 找不到 dyld

> ID：12569235
> 
> 赞同：2
> 
> 时间：2012-09-24T16:36:17.783
> 
> 标签：ruby, homebrew

我`brew`在全新安装后运行，这就是我得到的：

```
dyld: Library not loaded: /usr/local/Cellar/ruby/1.9.3-p194/lib/libruby.1.9.1.dylib
    Referenced from: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    Reason: image not found 
```

我已经尝试了大多数常见的修复方法。一切都是最新的，我使用的是 1.9.3。对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:25:27.383

安装 rvm 然后在 Mac OSX 上运行 brew 后出现此错误。似乎 brew 脚本在脚本中针对系统版本的 ruby​​，它不是由 rvm 挂载的。我所做的只是改变这一行：

```
#!/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby -W0 
```

在我的`/usr/local/bin/brew`文件中：

```
#!/Users/<my user name>/.rvm/rubies/ruby-1.9.3-p385/bin/ruby -W0 
```

rvm 安装我正在使用的 ruby​​ 版本的位置（注意：我在上面的代码段中省略了我的用户名，路径应该是在您的系统上有效安装 ruby​​）

brew 在那之后开始很开心。

# c# - 显示 Html 字符串

> ID：12569236
> 
> 赞同：2
> 
> 时间：2012-09-24T16:36:22.930
> 
> 标签：c#, asp.net, html

我是 C# 新手，我想将 html 字符串（从 ckEditor 保存在数据库中）作为 html 显示到页面

```
<div class="descriptionText">
 <% 
     Response.Write(dynamicHtml);
 %>
</div> 
```

它显示为：

```
<p> test &nbsp;ht<u>ml test </u>html<strong> test html&nbsp;</strong></p> 
```

但应该是：

测试 html 测试 html**测试 html **

**注意：**请建议我可以做 Response.Write 字符串的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:38:24.880

试试这个：

```
<div class="descriptionText">
 <asp:Literal runat="server" id="lit"/>
</div> 
```

在您的代码隐藏中，将您的 HTML 绑定到文字：

```
lit.Text = dynamicHtml; 
```

我假设您通过一些查询从数据库中获取 HTML 文本，您基本上必须将结果绑定到文字。

更新：这似乎对我也有效：

在您的 ASPX 页面中：

```
 <%= dynamicHtml %> 
```

在你后面的代码中：

```
protected string dynamicHtml { get; set; } 
```

页面加载：

```
 dynamicHtml = "your HTML"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:40:01.413

您可能需要此脚本，阅读更多关于 Response.Write[的信息](http://msdn.microsoft.com/en-us/library/ms525585%28v=vs.90%29.aspx)

```
<%=  Response.Write(dynamicHtml); %> 
```

如果您有可能有代码，那么通过添加使 div 服务器可访问`runat="server"`并为其分配一些`id`

**html**

```
<div id="divMessage" class="descriptionText" runat="server">

</div> 
```

**代码背后**

```
divMessage.InnerHTML = dynamicHtml 
```

# android - Android OpenGL ES 环境中的插值

> ID：12569240
> 
> 赞同：1
> 
> 时间：2012-09-24T16:36:30.060
> 
> 标签：android, multithreading, opengl-es, interpolation, frame-rate

尝试为测试动画设置游戏循环线程时，我遇到了一些问题。启动过程中显示错误，Android 程序通过启动屏幕运行，但随后终止。这是红色突出显示的 Logcat 错误。

```
09-24 16:09:18.731: E/AndroidRuntime(569): FATAL EXCEPTION: GLThread 76
09-24 16:09:18.731: E/AndroidRuntime(569): java.lang.NullPointerException
09-24 16:09:18.731: E/AndroidRuntime(569):  at 
com.spacewrecksoftware.iceward.GLrenderer.onSurfaceCreated(GLrenderer.java:22)
09-24 16:09:18.731: E/AndroidRuntime(569):  at 
android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1446)
09-24 16:09:18.731: E/AndroidRuntime(569):  at 
android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216) 
```

该程序创建一个在横向屏幕上来回移动的纹理，并通过插值渲染的测试实现以更高的帧速率实现更流畅的动画。这是按顺序排列的游戏循环、渲染器、菜单、对象和状态文件。

游戏循环：

```
import android.os.SystemClock;

public class GameLoop extends Thread {
public static int deltaTime;
boolean gameRunning = true;
public void setRunning(boolean running) {
    this.gameRunning = running;
}
public ObjectState previous= new ObjectState(0, 0, 10/1000, 0);
public ObjectState current= new ObjectState(0, 0, 10/1000, 0);
public Globject button= new Globject(previous, current);
public void run() {

    int ticksPerSec = 30;
    int skipTicks = 1000 / ticksPerSec;
    int maxFrameskip = 5;
    long nextGameTick = SystemClock.uptimeMillis();
    int loops;
    long interpolation;
    long oldTimeSinceStart = 0;

    while (gameRunning) {

        loops = 0;
        while( SystemClock.uptimeMillis() > nextGameTick & loops < maxFrameskip){
            long timeSinceStart = SystemClock.uptimeMillis();
              deltaTime = (int) (timeSinceStart - oldTimeSinceStart);
             oldTimeSinceStart = timeSinceStart;
            updateGame();
             nextGameTick += skipTicks;
                loops++;
            }
        interpolation = SystemClock.uptimeMillis() + skipTicks - nextGameTick 
                /  skipTicks ;
        drawGame(interpolation);
    }
}
int switchit = 1;
private void updateGame() {
    if (switchit==1){   
        if (button.now.position_x<=-10){        
             switchit=0;
             button.past.velocity_x=0-button.past.velocity_x;
        }
        else{
    button.past=button.now.copy(button.now);
    button.now=button.past.addDt(button.past, deltaTime);
        }
    }
    else if(switchit==0){   
        if (button.now.position_x>=10){     
             switchit=1;
             button.past.velocity_x=0-button.past.velocity_x;
        }
        else{
            button.past=button.now.copy(button.now);
            button.now=button.past.addDt(button.past, deltaTime);
        }
    }

}
private void drawGame(float interpolation) {
    button.past=button.past.interpolate(button.past, button.now, interpolation);
    Menu.menuSurface.requestRender();

}
} 
```

渲染器：

```
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.GLU;

public class GLrenderer implements Renderer {

private Globject object1;   
private Context context;
long startTime;
public GLrenderer(Context context) {
    this.context = context;
    object1 = new Globject(null, null);
}
public void onSurfaceCreated(GL10 gl, EGLConfig config) {       
    //Load the texture for the cube once during Surface creation
    object1.now.position_x=0;
    object1.past.position_x=0;
    object1.loadGLTexture(gl, this.context);
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping
    gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
    gl.glClearColor(0.0f, 0.666f, 0.831f, 1f); 
    gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
    gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
    gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do

    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); 
}
/**
 * Here we do our drawing
 */
public void onDrawFrame(GL10 gl) {
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);    
    gl.glLoadIdentity();        

    gl.glTranslatef(0.0f, 0.0f, -20f);  
    gl.glPushMatrix();
    gl.glTranslatef( object1.past.position_x, 0, 0);    
    object1.draw(gl);
    gl.glPopMatrix();

}

/**
 * If the surface changes, reset the view
 */
public void onSurfaceChanged(GL10 gl, int width, int height) {
    if(height == 0) {                       //Prevent A Divide By Zero By
        height = 1;                         //Making Height Equal One
    }

    gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
    gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
    gl.glLoadIdentity();                    //Reset The Projection Matrix

    //Calculate The Aspect Ratio Of The Window
    GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
    gl.glLoadIdentity();                    //Reset The Modelview Matrix
}
} 
```

菜单：

```
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

public class Menu extends Activity
{
static GLSurfaceView menuSurface;
private GameLoop thread;
@Override
public void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    menuSurface = new GLSurfaceView(this);
        menuSurface.setRenderer(new GLrenderer(this));
        menuSurface.setRenderMode(0);
    setContentView(menuSurface);
    thread = new GameLoop();
    thread.setRunning(true);
    thread.start();
}

@Override
protected void onResume() 
{
    super.onResume();
    menuSurface.onResume();
}

@Override
protected void onPause() 
{   
    super.onPause();
    menuSurface.onPause();
}   
public boolean onTouchEvent(MotionEvent event) {
            return super.onTouchEvent(event);   
}
public void surfaceDestroyed(SurfaceHolder holder) {
boolean retry = true;
while (retry) {
    try {
        thread.join();
        retry = false;
    } catch (InterruptedException e) {
        // try again shutting down the thread
    }
}
}
} 
```

对象：注意-图像是 2 的幂，四乘一纹理。

```
import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;

import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.opengl.GLUtils;

public class Globject {

private FloatBuffer vertexBuffer;

private FloatBuffer textureBuffer;

private ByteBuffer indexBuffer;

private int[] textures = new int[1];
public ObjectState past;
public ObjectState now;

private float vertices[] = {
                    //Vertices according to faces
                    -4.0f, 1.0f,  //Vertex 0
                    -4.0f, -1.0f,  //v1
                    4.0f, 1.0f,   //v2
                    4.0f, -1.0f   //v3

                                        };

/** The initial texture coordinates (u, v) */   
private float texture[] = {         
                    //Mapping coordinates for the vertices  
                    0.0f, 0.0f,
                    0.0f, 1.0f,             
                    1f, 0.0f,
                    1f, 1.0f

                                        };

/** The initial indices definition */   
private byte indices[] = {

        0,1,2,3             
                                        };

public Globject(ObjectState past2,ObjectState now2) {

    now=now2;
    past=past2;

    ByteBuffer byteBuf = ByteBuffer.allocateDirect(vertices.length * 4);
    byteBuf.order(ByteOrder.nativeOrder());
    vertexBuffer = byteBuf.asFloatBuffer();
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);

    //
    byteBuf = ByteBuffer.allocateDirect(texture.length * 4);
    byteBuf.order(ByteOrder.nativeOrder());
    textureBuffer = byteBuf.asFloatBuffer();
    textureBuffer.put(texture);
    textureBuffer.position(0);

    //
    indexBuffer = ByteBuffer.allocateDirect(indices.length);
    indexBuffer.put(indices);
    indexBuffer.position(0);
}

public void draw(GL10 gl) {
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    //Point to our buffers
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    //Set the face rotation
    gl.glFrontFace(GL10.GL_CW);

    //Enable the vertex and texture state
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    //Draw the vertices as triangles, based on the Index Buffer information
    gl.glDrawElements(GL10.GL_TRIANGLE_STRIP, indices.length, GL10.GL_UNSIGNED_BYTE, indexBuffer);

    //Disable the client state before leaving
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
}

public void loadGLTexture(GL10 gl, Context context) {
    //Get the texture from the Android resource directory
    InputStream is = context.getResources().openRawResource(R.drawable.custom_button1);
    Bitmap bitmap = null;
    try {
        bitmap = BitmapFactory.decodeStream(is);

    } finally {
        //Always clear and close
        try {
            is.close();
            is = null;
        } catch (IOException e) {
        }
    }

    //Generate one texture pointer...
    gl.glGenTextures(1, textures, 0);
    //...and bind it to our array
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    //Create Nearest Filtered Texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    //Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    //Use the Android GLUtils to specify a two-dimensional texture image from our bitmap
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    //Clean up
    bitmap.recycle();
}   
} 
```

状态：

```
public class ObjectState {
public float position_x;
public float position_y;
public float velocity_x;
public float velocity_y;
public ObjectState(float position_x2, float position_y2, float velocity_x2, float velocity_y2) {
    position_x = position_x2;
    position_y = position_y2;
    velocity_x = velocity_x2;
    velocity_y = velocity_y2;
}
public ObjectState copy(ObjectState state0) {
ObjectState state1= new ObjectState(state0.position_x, state0.position_y,
        state0.velocity_x, state0.velocity_y);
return state1;
}  
public ObjectState subtract(ObjectState state, ObjectState state1){
    ObjectState  state2=state.copy(state);
    state2.position_x=(state1.position_x-state.position_x);
    state2.position_y=(state1.position_y-state.position_y);
    state2.velocity_x=(state1.velocity_x-state.velocity_x);
    state2.velocity_y=(state1.velocity_y-state.velocity_y);
return state2;
}
public ObjectState addDt(ObjectState state, int deltaTime){
    ObjectState  state1=state.copy(state);
    state1.position_x=(state1.velocity_x*deltaTime)+state1.position_x;
    state1.position_y=(state1.velocity_y*deltaTime)+state1.position_y;
return state1;
}
public ObjectState interpolate(ObjectState state, ObjectState state2,float interpolate){
    ObjectState  state1=state.copy(state);
    state1.position_x=(state1.subtract(state2, state).position_x*interpolate)+state.position_x;
    state1.position_y=(state1.subtract(state2, state).position_y*interpolate)+state.position_y;
    state1.velocity_x=(state1.subtract(state2, state).velocity_x*interpolate)+state.velocity_x;
    state1.velocity_y=(state1.subtract(state2, state).velocity_y*interpolate)+state.velocity_y;
return state1;
}
} 
```

我一直无法找到问题，非常感谢帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:50:15.827

这是一个空指针异常。

在您的`GLrenderer`构造函数中，您具有以下内容：

```
object1 = new Globject(null, null); 
```

在您的`GLobject`代码中：

```
public Globject(ObjectState past2,ObjectState now2) {

    now=now2;
    past=past2;
    //... 
```

然后回到`GLRenderer`你有：

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) {       
    //Load the texture for the cube once during Surface creation
    object1.now.position_x=0;
    object1.past.position_x=0; 
```

`now`，并且`past`仍然为空。它们需要在被访问之前被分配。

# php - 如何在 PHP/HTML 中将特定的类名传递给特定的标签

> ID：12569241
> 
> 赞同：1
> 
> 时间：2012-09-24T16:36:29.250
> 
> 标签：php, html, class

我还是前端开发的新手，并且在我的第一个非常大的网站/wordpress 博客上工作。

所以我的问题是，我有一个在网站上的所有页面上都相同的菜单。但是，每个部分的名称都会在菜单导航中突出显示。

当前的 Nav_Bar 标记：

```
<div id="nav_bar">

    <ul class="nav">
        <li class="nav_li"><a href="../index.html">Home</a></li>
        <li class="nav_li"><a href="#">About</a></li>
        <li class="nav_li selected"><a href="#blog_content">Blog</a></li>
        <li class="nav_li"><a href="#">Book</a></li>
        <li class="nav_li"><a href="#">Media</a></li>
        <li class="nav_li"><a href="#">Events</a></li>
        <li class="nav_li"><a href="#">Services</a></li>
        <li class="nav_li"><a href="#">Contact</a></li>

        <li class="search">
            <input type="text" onfocus="if(this.value == 'Search') { this.value = ''; }" value="Search" />

        </li>

        <li class="search_btn">
            <a href="#" title="Lets find it!"><div class="search_button">Go</div></a>
        </li>

    </ul>

</div><!-- nav_bar --> 
```

现在我在使用这个简单的 PHP 代码之前构建了页面：`<?php include("menu.php"); ?>`

但是，你们将如何 1st：组织此菜单以接受和传入值，例如 menu.php+select="home" 和 2nd 您将如何传递该值以向其中一个菜单项添加一个 selected 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:41:52.367

我假设您想要您的“传入值”来突出显示菜单项（而不是显示特定页面）？这是不必要的，因为浏览器已经知道它在哪个页面上。

这是在 jQuery 中突出显示当前页面的一种方法：

```
$('.nav li a').each(function(){
  var link = $(this).attr('href'),
    current_page = location.href;
  if(current_page.indexOf(link) != -1) {
      $(this).addClass('current-page');
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:20:26.437

首先，您在 li "nav_li" 上的课程是多余的，可以删除。使用 .nav li 以更少的代码行来引用这些列表项。这既可以用作 JQuery 选择器，也可以用作 CSS 选择器。第二，回答你的实际问题；我将按如下方式使用活动类：

```
// Assuming the following html. <ul class="nav"><li><a href="/about.php">About</a></li></ul>    

$('.nav li').click(function() {
    $('.nav li.active').removeClass('.active');
    $(this).addClass('.active');
    window.location = $(this).children('a').attr('href');
    return;
}); 
```

现在，在您保留导航栏的区域中，您可以通过以下方式检查当前 url 是否处于活动状态：

```
<?php    
$currentUri = $_SERVER['REQUEST_URI'];
<ul class="nav">
    <li class="<?php if($currentUri == '/about.php') {echo 'active';} ?>"><a href="/about.php">About</a></li>
</ul> 
```

将 php 脚本中的条件添加到每个列表项。

真诚的，凯文

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T16:46:02.527

在包含之前，在某个参数中设置一个值，例如`$page = 'blog'`然后在 menu.php 中

```
<li class="nav_li<?php echo $page === 'blog' ? " selected='selected'" : "" ?>"><a href="#blog_content">Blog</a></li> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T16:42:46.740

这可以使用javascript完成

```
var url=document.location.toString();
if(url=="http://www.something.com/some.php")
{
//code to add class to specific link
}
else if(url=="http://www.something.com/someelse.php")
{
//code to add class to specific link
} 
```

您也可以在 menu.php 中的服务器端执行此操作

```
$url=$_SERVER['REQUEST_URI'] 
```

然后检查 url 并相应地添加类名

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T17:32:23.577

如果我理解你的追求，也许是这样的：

**索引.php**：

```
<?php
  $page = 'home';
  // page code ...
?> 
```

**关于.php**：

```
<?php
  $page = 'about';
  // page code ...
?> 
```

等等等等……

然后**menu.php 稍作**调整：

```
<div id="nav_bar">

  <ul class="nav">
    <li class="nav_li home"><a href="../index.html">Home</a></li>
    <li class="nav_li about"><a href="#">About</a></li>
    <li class="nav_li blog"><a href="#blog_content">Blog</a></li>
    <li class="nav_li book"><a href="#">Book</a></li>
    <li class="nav_li media"><a href="#">Media</a></li>
    <li class="nav_li events"><a href="#">Events</a></li>
    <li class="nav_li services"><a href="#">Services</a></li>
    <li class="nav_li contact"><a href="#">Contact</a></li>

    <li class="search">
        <input type="text" onfocus="if(this.value == 'Search') { this.value = ''; }" value="Search" />

    </li>

    <li class="search_btn">
        <a href="#" title="Lets find it!"><div class="search_button">Go</div></a>
    </li>

  </ul>

</div><!-- nav_bar --> 
```

最后是一些javascript：

```
<script>
  $(function () {
   $('#nav_bar li.<?=$page?>').addClass('selected');
  });
</script> 
```

假设正在使用 jQuery，但显然没有必要，同样可以使用直接的 javascript 来完成。

# asp.net-mvc - 如何在布局页面中使用模型

> ID：12569242
> 
> 赞同：1
> 
> 时间：2012-09-24T16:36:33.520
> 
> 标签：asp.net-mvc

我正在尝试创建一个在用户登录时显示的菜单。代码是这样的：

```
<html>
<body>
     @if(Model.IsUserLogged){
     //some html
     }

     @RenderBody()

     @if(Model.IsUserLogged){
     //some html again
     }
</body>
</html> 
```

但是在布局页面中我不能使用模型，那么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:45:16.287

如果您要查找的是授权或身份验证信息，为什么不从请求或 cookie 中读取。例如上面：

```
@Request.IsAuthenticated 
```

其他少量用户数据可以存储在 cookie 中并使用帮助程序读取。或者，如果您的受众浏览器支持，您可以在本地存储中拥有更多用户数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:04:49.710

有一种方法可以使用局部视图，尽管您需要将逻辑移到那里并移出布局。创建一个局部视图（例如“_MyMenu”或其他），将您的渲染逻辑放在那里，为其创建一个控制器方法：

```
public PartialViewResult MenuView() {
    SomeObject model = GetSomeObject()
    return PartialView("_MyMenu", model);
} 
```

然后在您的布局页面中，使用以下命令调用它`RenderAction`：

```
@{Html.RenderAction("MenuView", "MyController");} 
```

有人已经提到如何获取用户的身份验证状态，所以我不确定这对你来说是否足够。

# c++ - 获取指定端口的进程名

> ID：12569243
> 
> 赞同：0
> 
> 时间：2012-09-24T16:36:51.387
> 
> 标签：c++, linux

> **可能重复：**
> [Linux API 列出正在运行的进程？](https://stackoverflow.com/questions/939778/linux-api-to-list-running-processes)

我有问题。我用c++在linux下制作小程序。我想获取正在侦听某个端口的进程名称。该进程正在服务器上运行。我使用套接字创建连接并连接到指定的端口。是否可以在端口上侦听进程名称？示例：./myapp www.example.com -p 100

感谢帮助

# xml - 我可以在同一个 XML 文件中使用 xinclude 和实体吗？

> ID：12569247
> 
> 赞同：3
> 
> 时间：2012-09-24T16:37:10.577
> 
> 标签：xml, xslt, entity, docbook, xinclude

我正在使用 DocBook 5.0，创建一个写作/编辑/生产环境。我根据 DB5 的 RNG 模式版本验证我的 XML。

为了使我的环境更易于使用，我喜欢将我的书籍分成多个文件，使用 xinclude 将书籍的章节拉入书籍文件中。在我的 XSLT 中效果很好。

我喜欢使用系统实体来让我的非技术作家/编辑更容易使用一些特殊字符。我为一些常见的特殊字符设置了一个带有易于使用的名称的实体文件（例如：&emDash; for —）。

我以为我在某处读到过，您不能在同一个 XML 文件中同时使用实体和 xinclude。不过，我只是尝试过，它验证并转换正常。这个可以吗？我没有看到这里有问题吗？以下是我在本书文件顶部声明所有内容的方式：

```
<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbookxi.rng" type="xml"?>
<!DOCTYPE book [
<!ENTITY % entities SYSTEM "utilities/entities/entities.ent">
%entities;
]>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:opf="http://www.idpf.org/2007/opf" version="5.0" xml:id="book"> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:51:52.977

你写“我想我在某处读到你不能在同一个 XML 文件中同时使用实体和 xinclude。”

首先，语言学究的回答：

XInclude 规范不禁止使用实体；不清楚它是否可以连贯地这样做，因为它被定义为在信息集级别上操作，而不是在 XML 字符流级别上操作。并且 XML 规范并没有禁止在使用实体时使用 XInclude。因此，您关心的两个功能的定义规范都没有禁止它。

其他一些试图定义使用配置文件的规范可能会禁止同时使用实体和 XInclude；我不知道，但这并不意味着什么。但是，如果有任何此类配置文件适用于您，我希望您会了解它们。

由于 XInclude 有时被视为使实体变得不必要的一种方式（嗯，至少是外部实体），一些 XInclude 爱好者可能会认为将实体与 XInclude 一起使用是不好的。如果您碰巧与任何有这种感觉并关心他们想法的人一起工作，这对您来说很重要，但否则您可以自由地向他们挥手致意并继续您的工作。（我怀疑如果你读到你记得的那种东西，那是关于作者认为是好的做法或好的品味的陈述；它当然不是关于什么是合法的或技术上可能的事实陈述。）

其次，一个实用的答案：一些处理器和工具链支持使用在外部 DTD 子集中声明的实体，一些支持 XInclude，一些支持两者。检查您关心的工具；如果他们都按照您的意愿使用数据，那么您就不用担心了。

# c++ - 我的自定义迭代器有什么问题

> ID：12569254
> 
> 赞同：-1
> 
> 时间：2012-09-24T16:37:49.327
> 
> 标签：c++, visual-c++, iterator

所以，我一直在试图弄清楚自定义迭代器是如何工作的，在投入了这么多时间但仍然不够用之后，我决定问问整个社区：我做错了什么？请帮助，解释会很好，但如果它是“次要的”，则没有必要。

作为一个附带问题，有谁知道要让“显示为集合关联”在 MSVS 的类图中工作的要求是什么？它只是不适用于c ++吗？就它而言，甚至我的 bar2 也不是整数的集合。

这是我的代码，它应该编译，但显然我的迭代器坏了......

编辑：由于人们在问，问题是我实现的迭代器没有迭代 Bar

```
#include <vector>
#include <iostream>

using namespace std;

template<class T> 
class Foo
{
public:
    template<class T>

    class FooIterator : std::iterator<std::forward_iterator_tag, T, ptrdiff_t, T*, T&>
    {
    public:
        Foo<T>* arrayPtr;
        int index, size;
        FooIterator(Foo<T>* arrayPtr, int size, int index) : arrayPtr(arrayPtr), size(size), index(index) {}

        T& operator*() {return *(arrayPtr->operator[](index));}
        T* operator->() {return &(operator*());}

        FooIterator &operator++(){++index; return *this;}
        FooIterator operator++(int){FooIterator tmp(*this); ++(*this); return tmp;}
        bool operator!=(const FooIterator &other) const {return other.index == index;}
    };

    T** ts;
    int size;
    int index;

    typedef FooIterator<T> fooiterator;
    fooiterator begin(){return fooiterator(this, size, 0);}
    fooiterator end(){return fooiterator(this, size, size);}

    ~Foo();

    void init(int size);
    void insert(T* item);
    T* operator[](int index);

    typedef T          value_type;
    typedef T*         pointer;
    typedef const T*   const_pointer;
    typedef T&         reference;
    typedef const T&   const_reference;
    typedef int        size_type;
    typedef ptrdiff_t  difference_type;
};

template<class T>
void Foo<T>::init(int size)
{
    ts = new T*[size];
    index = 0;
}

template<class T>
Foo<T>::~Foo()
{
    for(int i = 0; i < index; i++)
        delete ts[i];
    delete ts;
}

template<class T>
void Foo<T>::insert(T* item)
{
    ts[index++] = item;
}

template<class T>
T* Foo<T>::operator[](int index)
{
    return ts[index];
}

struct Bar
{
public:
    Foo<int> nums;
    Bar()
    {
        nums.init(3);
        int val = 1;
        nums.insert(new int(1));
        nums.insert(new int(2));
        nums.insert(new int(3));

        for each (int var in nums)
        {
            cout << var << endl;
        }
    }
};

struct Bar2
{
    vector<int> nums;
    Bar2()
    {

        nums.push_back(4);
        nums.push_back(5);
        nums.push_back(6);
        for each (int var in nums)
        {
            cout << var << endl;
        }
    }
};

int main ()
{
    Bar bar;
    /*for (int i = 0; i < bar.nums.index; i++)
    {
        cout << *bar.nums[i] << endl;
    }*/
    Bar2 bar2;
    cin.get();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:55:44.853

一个明显的问题是`operator!=`实际测试是否相等。

# asp.net-mvc-4 - ASP.NET MVC 4 ScriptBundle 返回空

> ID：12569259
> 
> 赞同：10
> 
> 时间：2012-09-24T16:37:59.577
> 
> 标签：asp.net-mvc-4, bundling-and-minification

具体来说，我正在尝试使用已经缩小的脚本在 MVC 4 中创建一个 ScriptBundle，并返回这个相同的 Bundle，无论项目是否处于调试状态。

我的 Web 项目引用了 MVC Telerik Grid NuGet 包。在那个包中，Telerik 只提供了缩小的 JS 文件。捆绑代码如下。

```
 // telerik scripts
        bundles.Add(new ScriptBundle("~/scripts/bundles/telerik").Include(
            "~/Scripts/2012.1.214/telerik.common.min.js",
            "~/Scripts/2012.1.214/telerik.textbox.min.js",
            "~/Scripts/2012.1.214/telerik.calendar.min.js",
            "~/Scripts/2012.1.214/telerik.datepicker.min.js",
            "~/Scripts/2012.1.214/telerik.grid.min.js",
            "~/Scripts/2012.1.214/telerik.grid.filtering.min.js")); 
```

其他 ScriptBundle 运行良好，但是当我的项目尝试引用此捆绑包时，请求显示为：`scripts/bundles/telerik?v=` Returning nothing。

如果我设置`BundleTable.EnableOptimizations = true`，那么它会返回 ScriptBundle 并引用特定版本，但是这种解决方案是不可接受的。

我不想强制设置`BundleTable.EnableOptimizations = true`，因为我希望所有其他 Bundles 在适当的时候返回非缩小版本。

任何人都有类似的经历，如果是这样，解决方案是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T17:26:24.693

我想你也有同样的问题，请看这个链接：[mvc4 bundler not include .min files](https://stackoverflow.com/questions/11980458/mvc4-bundler-not-including-min-files)

将 .min.js 重命名为 .js 或执行以下操作：

```
 public static void AddDefaultIgnorePatterns(IgnoreList ignoreList)
    {
        if (ignoreList == null)
            throw new ArgumentNullException("ignoreList");

        ignoreList.Clear();

        ignoreList.Ignore("*.intellisense.js");
        ignoreList.Ignore("*-vsdoc.js");
        ignoreList.Ignore("*.debug.js", OptimizationMode.WhenEnabled);
        //ignoreList.Ignore("*.min.js", OptimizationMode.WhenDisabled);
        ignoreList.Ignore("*.min.css", OptimizationMode.WhenDisabled);
    } 
```

# python - 如何为 Python 中的跑步者指定输入文件？

> ID：12569261
> 
> 赞同：6
> 
> 时间：2012-09-24T16:38:02.320
> 
> 标签：python, mapreduce, mrjob

我正在编写一个外部脚本，以通过我笔记本电脑上的 Python mrjob 模块（不在 Amazon Elastic Compute Cloud 或任何大型集群上）运行 mapreduce 作业。

我从[mrjob 文档](http://packages.python.org/mrjob/job.html)中阅读，我应该使用该文档`MRJob.make_runner()`从单独的 python 脚本运行 mapreduce 作业，如下所示。

```
mr_job = MRYourJob(args=['-r', 'emr'])
with mr_job.make_runner() as runner:
    ... 
```

但是，如何指定要使用的输入文件？我想在与我的 mapreduce 脚本和其他运行 map reduce 的 python 脚本相同的目录中使用文件“datalines.txt”。此外，如何指定输出？

我在 mrjob 文档中找不到允许我指定这些参数的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T16:52:42.133

[入门指南](http://packages.python.org/mrjob/writing-and-running.html)建议从标准输入或命令行提供的文件中读取输入：

```
mr_job = MRYourJob(args=["datalines.txt"]) 
```

# java - 如何从 ScheduledThreadPoolExecutor 取消挂起的项目？

> ID：12569267
> 
> 赞同：10
> 
> 时间：2012-09-24T16:38:16.270
> 
> 标签：java, multithreading, executors

我有一项任务需要我安排任务并在发生特定事件时将其删除。我正在使用 ScheduledThreadPoolExecutor 来安排任务，这非常简单。但是，我找到了两种取消挂起项目的方法，它们看起来都有些奇怪。

我很好奇它们中的任何一个是否符合生产质量。如果两者都不是，那你有什么建议？

这是我所做的工作的骨架：

```
private final ScheduledThreadPoolExecutor scheduler = new ScheduledThreadPoolExecutor(1);

public void doStuff() {
    //...
    scheduler.schedule(new Runnable() {/*...*/}, 10, TimeUnit.MILISECONDS)
}

public void actOnEvent() {
    cancelPendingItems();
    doMoreStuff();
}

public void cancelPendnigItems() {
    // TODO implement me
} 
```

这是候选人1：

```
public void cancelPendingItems() {
    scheduler.getQueue().clear();
} 
```

这是候选人2：

```
public void cancelPendingItems() {
    for (Runnable task : scheduler.getQueue()) {
        scheduler.remove(task);
    }
} 
```

两者对我来说都像是 hack，因为它们依赖于 ScheduledExecutor 接口中未指定的 ScheduledThreadPoolExecutor.queue 属性。我有点担心我可能会违反 ScheduledThreadPoolExecutor 的不变量，我会发现它太晚了。

那么，这些片段会做我想让他们做的事情吗？有没有更好/更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T16:42:05.660

请注意，[`ScheduledExecutorService.schedule`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)返回一个[`ScheduledFuture`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledFuture.html). 只需存储这些，当您的取消方法被调用时，使用`cancel`存储的期货上的方法来取消它们未来的迭代。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T16:42:41.977

我会使用一个`List<Future>`：

```
private final List<Future> futures = ...

public void doStuff() {
    futures.add(scheduler.schedule(new Runnable() {/*...*/}, 10,
        TimeUnit.MILISECONDS));
}

public void cancelPendingItems() {
    for(Future future: futures)
        future.cancel(true);
    futures.clear();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T16:48:09.723

[Future.cancel(boolean mayInterruptIfRunning)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)

> 尝试取消此任务的执行。如果任务已完成、已被取消或由于其他原因无法取消，则此尝试将失败。如果成功，并且在调用取消时此任务尚未启动，则此任务不应该运行。如果任务已经开始，则 mayInterruptIfRunning 参数确定是否应该中断执行该任务的线程以尝试停止该任务。

或者你也可以使用[ScheduledThreadPoolExecutor#shutdownNow](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#shutdownNow%28%29)

> 尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表。
> 
> 除了尽最大努力停止处理正在执行的任务之外，没有任何保证。此实现通过 Thread.interrupt() 取消任务，因此任何未能响应中断的任务可能永远不会终止。

因此，您需要处理`InterruptedException`以允许安全退出正在取消的线程。

# sql-server-2008 - SQL DataTime 受服务器新时间影响

> ID：12569282
> 
> 赞同：0
> 
> 时间：2012-09-24T16:39:09.780
> 
> 标签：sql-server-2008, timezone, windows-server-2008-r2

我有一个生产服务器，这就是为什么我想在实验之前问一下，即设置 tu -6 GMT。我需要将其配置为 -5GMT 夏令时。（我认为这会自动使格林威治标准时间在夏季变为-4）。

当我的服务器为-6（仍然是）时，我插入了数百万条记录。我记得你在 SQL 中的时间是使用 UTC 插入的（我的理解是你工作的任何时区都是标准的。SQL 会根据你的控制台管理时间为你计算）。如果我错了，请纠正我。

更改我的服务器时间会以任何方式影响我在 sql 中的日期时间吗？

非常感谢。

# javascript - 是否可以使用书签来加载和运行 Google 地图？

> ID：12569292
> 
> 赞同：0
> 
> 时间：2012-09-24T16:39:36.813
> 
> 标签：javascript, google-maps-api-3, cross-domain, bookmarklet

我正在尝试创建一个动态加载 Google 地图并将其显示在对话框叠加层中的书签。当我在加载小书签 JavaScript 的同一个站点（在本例中为 localhost）上运行它时，它运行良好，但当我转到像 NYTimes.com 这样的第三方站点时，它就不行了。我在 Firebug 中看不到任何 HTTP 错误，但是当小书签代码尝试实例化新的 google.maps 对象时，控制台会显示以下消息：

```
TypeError: google.maps is undefined 
```

是我在尝试非法的跨域调用还是我的实现有问题？

这是从我的书签引导加载程序加载地图脚本的代码：

```
var mapsScript = document.createElement("script");
mapsScript.type = "text/javascript";
mapsScript.src = "http://maps.googleapis.com/maps/api/js?libraries=places&key=KEY&sensor=true&callback=CALLBACK";
document.body.appendChild(mapsScript); 
```

稍后，回调有以下行：

```
var center = new google.maps.LatLng(la, ln); 
```

# c# - 存储库和数据访问代码之间的抽象层

> ID：12569294
> 
> 赞同：1
> 
> 时间：2012-09-24T16:39:47.820
> 
> 标签：c#, ddd-repositories

我尝试将存储库与实际的数据存储实现隔离开来。用这个抽象创建一些简单的查询我没有什么问题。

示例我需要按顺序列出订单行数的订单列表。

Repository 方法返回 OrderInfo 对象的列表。

```
class OrderInfo
{
    string Title { get; set; }
    int NumberOfLines { get; set; }
} 
```

数据存储不包含任何直接包含订单行计数的字段，因此必须即时计算。

当查询直接写入存储库方法时，可以使用简单的 sql 查询（count + group by）轻松存档。

如果我尝试创建某种抽象层，我会迷失如何“定义查询而不使用任何依赖于存储的东西，包括它应该返回每个订单的订单行数”。

还是我完全走错了方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:47:33.523

如果您想允许在 BLL 中使用 IQueryable（我认为应该这样做），那么您可以根据需要定义查询。然后，您的 DAL 应该通过的标准之一是它可以与您的 BLL 一起使用，它应该能够采用 IQueryable，并使用它来读取一些数据。这样你就可以在你的 BLL 中“变得聪明”，并且 DAL 将被抽象。

例子：

*   BLL - 使用接口定义它。生成的上下文界面为您提供系统中的所有实体（=表）。这些实体将与`IQueryable<entityType>`. 实体是使用实体框架 POCO 定义的。
*   DAL - 一个实体框架上下文，其中上下文实现了您在 BLL 中定义的接口。

每一层都在它们自己的组件中。DAL 是使用一些依赖注入连接起来的。

请记住，这只是一个示例。

## 更新

阅读[这篇](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)关于洋葱架构的文章，这正是您想要做的。

# background - 升级到 iOS 6 影响外观代理

> ID：12569300
> 
> 赞同：2
> 
> 时间：2012-09-24T16:39:55.467
> 
> 标签：background, ios6, uisegmentedcontrol, uiappearance

我的应用程序使用以下方法实现了自定义分段控件背景图像：

```
// customise the segmented controls
    UIImage *segmentSelected = [[UIImage imageNamed:@"segcontrol_sel.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
    UIImage *segmentUnselected = [[UIImage imageNamed:@"segcontrol_uns.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
    UIImage *segmentSelectedUnselected = [UIImage imageNamed:@"segcontrol_sel-uns.png"];
    UIImage *segUnselectedSelected = [UIImage imageNamed:@"segcontrol_uns-sel.png"];
    UIImage *segmentUnselectedUnselected = [UIImage imageNamed:@"segcontrol_uns-uns.png"];

    [[UISegmentedControl appearance] setBackgroundImage:segmentUnselected forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
        [[UISegmentedControl appearance] setBackgroundImage:segmentUnselected forState:UIControlStateDisabled barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setBackgroundImage:segmentSelected forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

    [[UISegmentedControl appearance] setDividerImage:segmentUnselectedUnselected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];    
    [[UISegmentedControl appearance] setDividerImage:segmentSelectedUnselected forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UISegmentedControl appearance] setDividerImage:segUnselectedSelected forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault]; 
```

在我更新到 XCode 4.5 和 iOS6 之前，它运行良好。现在是这样的： ![在此处输入图像描述](../Images/e407116e0284f2f418db6c5eec3d0e07.png) 您可以看到背景图像的大小已更改。有没有人有同样的问题？此外，某些屏幕的某些背景图像看起来更短。例如，在其中一个中，我有一个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:49:56.000

如果图像处于该分辨率，请确保使用 @2x 命名图像。

我有一个类似的问题，当我添加它时已解决。

# spring - Spring：关于路径的 /** 和 /* 的区别

> ID：12569308
> 
> 赞同：87
> 
> 时间：2012-09-24T16:40:24.113
> 
> 标签：spring, web, resources, url-pattern

当我们提到路径时，两个星号而不是一个星号有什么区别？

早些时候我正在调试我的 Spring 3 项目。我试图添加一个 .swf 使用

`<spring:url var="flashy" value="/resources/images/flash.swf"/>`

我的 web.xml 的 ResourceServlet 看起来像

```
<servlet-name>Resource Servlet </servlet-name>
<url-pattern>/resources/*</url-pattern> 
```

但不幸的是，我收到了这个错误：

`WARN org.springframework.js.resources.ResourceServlet - An attempt to access a protected resource at /images/flash.swf was disallowed.`

我发现这很奇怪，因为我在`images`文件夹中的所有图像都被访问了，但是我的 .swf 怎么会被“保护”呢？

之后，我决定将其更改`/resources/*`为`/resources/**`，它终于奏效了。我的问题是……为什么？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-03-02T14:24:15.053

这是在`Apache ant`Spring 团队中使用的路径模式，并在整个框架中实现并使用它。

作为参考，请参阅[AntPathMatcher](http://docs.spring.io/spring/docs/3.0.x/javadoc-api/org/springframework/util/AntPathMatcher.html)的 javadoc （[最新](http://docs.spring.io/spring/docs/4.0.2.RELEASE/javadoc-api/org/springframework/util/AntPathMatcher.html)的javadoc 似乎有问题，所以我链接一个旧的）。

回到你的问题，根据文档，它只有 3 条规则：

1.  `?`匹配一个字符
2.  `*`匹配零个或多个字符
3.  `**`匹配路径中的零个或多个“目录”

# node.js - 新贵重生健康过程

> ID：12569315
> 
> 赞同：0
> 
> 时间：2012-09-24T16:40:56.940
> 
> 标签：node.js, ubuntu, ubuntu-11.10, upstart

我遇到了一个问题，新贵正在重新生成一个完全健康的 Node.js (v0.8.8) 进程。我在 Ubunut 11.10。当我从命令行运行程序时，它完全稳定并且不会崩溃。但是，当我使用 upstart 运行它时，它每隔几秒钟就会非常一致地重新生成。我不确定发生了什么，并且没有任何日志似乎有帮助。事实上，该作业的任何新贵日志都没有产生错误消息。下面是我的暴发户脚本：

```
#!upstart
description "server.js"

start on (local-filesystems and net-device-up IFACE=eth0)
stop on shutdown

# Automtically respawn
respawn                 # restart when job dies
respawn limit 99 5      # give up restart after 99 respawns in 5 seconds

script
    export HOME="/home/www-data"

    exec sudo -u www-data NODE_ENV="production" /usr/local/bin/node /var/www/server/current/server.js >> /var/log/node.log 2>> /var/log/node.error.log
end script

post-start script
    echo "server-2 has started!"
end script 
```

奇怪的是 server-1 工作得很好，并且设置方式相同。

系统日志消息如下所示：

9 月 24 日 15:40:28 domU-xx-xx-xx-xx-xx-xx 内核：[5272182.027977] init：server-2 主进程 (3638) 以状态 1 终止

9 月 24 日 15:40:35 domU-xx-xx-xx-xx-xx-xx 内核：[5272189.039308] init：server-2 主进程 (3647) 以状态 1 终止

9 月 24 日 15:40:42 domU-xx-xx-xx-xx-xx-xx 内核：[5272196.050805] init：server-2 主进程 (3656) 以状态 1 终止

9 月 24 日 15:40:49 domU-xx-xx-xx-xx-xx-xx 内核：[5272203.064022] init：server-2 主进程 (3665) 以状态 1 终止

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:53:02.537

好的，似乎实际上是 monit 正在重新启动它。问题已解决。谢谢。

# interface-builder - 有谁知道使用 Xcode 4.5 编辑情节提要时新的退出图标是做什么用的？

> ID：12569316
> 
> 赞同：100
> 
> 时间：2012-09-24T16:40:59.247
> 
> 标签：interface-builder, ios6, uistoryboard, uistoryboardsegue, xcode4.5

右键单击退出图标会产生一个空窗口。无法按住 Ctrl 并拖动连接到任何 IB 元素或相应的源文件。医生没有爱。不会出现在 nib 文件中，只会出现在故事​​板中。我的假设是它是 segues 的必然结果，但我没有看到任何新的方法来支持它。任何人？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-11-18T02:59:01.597

我很难遵循接受的答案，所以这里有更多细节。

鉴于下面视图控制器 C 上的照片，您可以“退出”回到 segue 路径中的任何视图控制器。

![在此处输入图像描述](../Images/0d044962d6844fcaeeb6f9aff105a4f7.png)

ViewController **A**你可以写：

```
- (IBAction)done:(UIStoryboardSegue *)segue {
    // Optional place to read data from closing controller
} 
```

ViewController **B**你可以写：

```
- (IBAction)back:(UIStoryboardSegue *)segue {
    // Optional place to read data from closing controller
} 
```

ViewController **C**您控制从**“返回”**按钮拖动到绿色退出选项并选择**返回：** ViewController **C**您控制从**“完成”**按钮拖动到绿色退出选项并选择**完成：** ![在此处输入图像描述](../Images/45edb0c1b45e7fede04c7b2292824717.png)

注意：即使这些方法在其他视图控制器上，它们也会在 ViewController **C**的退出中显示。**控件拖动和选择方法定义了要展开到哪个 ViewController。**

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2012-09-25T00:50:15.903

WWDC 视频“Session 407 - Adopting Storyboards in your App”中有很多信息。

假设您有两个由 segue 链接的视图控制器。在第一个视图控制器上实现以下退出操作：

```
- (IBAction)done:(UIStoryboardSegue *)segue {
    NSLog(@"Popping back to this view controller!");
    // reset UI elements etc here
} 
```

然后，在第二个视图控制器的 Storyboard 场景中，按住 Ctrl 键从 UI 元素（例如按钮）拖动到该视图控制器底部的退出图标。`done:`您添加到第一个控制器代码中的操作将显示为一个选项。现在，激活您按住 Ctrl 并拖动到退出图标的按钮将弹回第一个视图控制器并保持其原始状态（即，文本输入等 UI 元素应该仍然完好无损）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-11-11T15:12:26.013

除了[Eric](https://stackoverflow.com/users/1052616/eric)的回答之外，这里还有它如何与[swift](/questions/tagged/swift "显示标记为“迅速”的问题")一起工作：

添加到目标控制器的函数如下所示：

```
@IBAction func backFromOtherController(segue: UIStoryboardSegue) {
    NSLog("I'm back from other controller!")
} 
```

# c# - 如何获取下拉列表中的所有记录？

> ID：12569319
> 
> 赞同：0
> 
> 时间：2012-09-24T16:41:07.497
> 
> 标签：c#, .net, drop-down-menu

我有一个按类别过滤记录的下拉列表，但我需要“-- 按类别过滤--”选项充当“查看全部”，从而返回所有记录。

这是在 C# .NET 中。我不认为这太难了，但它现在只是难倒我。

这是该方法的代码隐藏：

```
protected void PopulateCategories()
{
    category myCategory = new category();
    category[] myCategoryList = myCategory.Listing("title ASC");

    ddlCategories.Items.Add("-- Filter by category --");

    foreach (category category in myCategoryList)
    {
        ListItem item = new ListItem(category.title, category.category_id);
        ddlCategories.Items.Add(item);            
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:43:17.233

根据您的数据源是什么以及它对值的反应`category.category_id`，您应该将值作为“--按类别过滤-”条目的一部分...

```
ddlCategories.Items.Add(New ListItem("-- Filter by category --", "-1")); 
```

然后，当您使用`ddlCategories.SelectedValue`（或无论如何使用它）时，请确保如果该值是`-1`则返回所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:08:07.313

为了使您的表单更直观，您可能需要填充下拉列表，如下所示：

```
ddlCategories.Items.Add(new ListItem("- View all categories -", "-1"));

foreach (category category in myCategoryList)
{
    ListItem item = new ListItem("View category: " + category.title, category.category_id);
    ddlCategories.Items.Add(item);            
} 
```

**然后，为了回答您的问题，创建 2 种数据访问方法：#1 用于检索所有行，#2 用于检索按所选类别过滤的行。**

```
public DataTable GetData(int categoryId)
{
  if(categoryId <= 0)
  {
    // #1
    return CatProvider.FindAll(); // Ex. SELECT * FROM table_cats;
  }
  else
  {
    // #2
    return CatProvider.FindByCategoryId(categoryId); // Ex. SELECT * from table_cats where id_category = @id_category;
  }
} 
```

*但是，我会考虑改用复选框（每个类别 1 个），因此用户可以选择所有类别的任何排列、仅 1 个类别或多个类别的任意组合。*

（根据您提供的信息，这就是我现在可以建议的全部内容。）

# rabbitmq - Rabbitmq + 带有 rpc 的 web stomp 插件 - 回复

> ID：12569324
> 
> 赞同：3
> 
> 时间：2012-09-24T16:41:43.583
> 
> 标签：rabbitmq, rpc, stomp

我正在尝试使用 RabbitMQ 的 STOMP 适配器执行 RPC。作为客户端库，我使用 STOMP over WebSocket (https://github.com/jmesnil/stomp-websocket/) 库。

从文档（http://www.rabbitmq.com/stomp.html#d.tqd）我看到我必须设置回复标题。我已经通过指定类似“reply-to：/temp-queue/foo”之类的东西来做到这一点，并且我在服务器端客户端（node-amqp）中看到replyTo标头设置正确（例如：replyTo：'/reply -queue/amq.gen-w2jykNGp4DNDBADm3C4Cdx'）。仍然在我的服务器端客户端中，我可以通过将消息发布到“/reply-queue/amq.gen-w2jykNGp4DNDBADm3C4Cdx”来回复消息。

但是，如何在发起 RPC 调用的客户端代码中得到这个回复？文档指出“SEND 和 SUBSCRIBE 帧不得包含 /temp-queue 目标 (...) 对回复队列的订阅是自动创建的。”

那么，如何订阅回复队列呢？如何获得 RPC 调用的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T21:58:28.790

答案是：

当您在服务器工作人员中收到 rpc 调用时，您将获得标头 replyTo。该标题如下：

```
replyTo: '/reply-queue/[queue_name]' 
```

例如：`replyTo:'/reply-queue/amqp.fe43gggr5g54g54ggfd_'`

诀窍是：

*   你必须解析它并且只回答 queue_name [例如：`amqp.fe43gggr5g54g54ggfd_`]
*   您必须回答默认交换而不是任何其他交换

nodejs中的答案示例：

```
function onRpcReceived(message, headers, deliveryInfo, m) {
    var reply_to = m.replyTo.toString().substr(13, m.replyTo.toString().length);

    connection.publish(reply_to, {response:"OK", reply:"The time is 13h35m"}, {
                contentType:'application/json',
                contentEncoding:'utf-8',
                correlationId:m. correlationId
    });
} 
```

现在我只是想知道为什么 web-stomp-plugin 将 /reply-queue/ 字符串添加到标题上的属性“replyTo”而不是只添加队列名称......！如果有人知道我想知道的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T21:47:37.420

原始问题的答案：

> 但是，如何在发起 RPC 调用的客户端代码中得到这个回复？文档指出“SEND 和 SUBSCRIBE 帧不得包含 /temp-queue 目标 (...) 对回复队列的订阅是自动创建的。”
> 
> 那么，如何订阅回复队列呢？如何获得 RPC 调用的结果？

Rabbit 自动将当前的 STOMP 会话订阅到临时队列。客户端不知道临时队列名称并且无法订阅它。然而，当 Rabbit 发送一个 STOMP MESSAGE 帧时，它会将订阅标头设置为“reply-to”值（例如“/temp-queue/foo”）。虽然 STOMP over WebSocket 客户端没有考虑到这一点，但订阅可以注册如下：

```
stompClient.subscriptions['/temp-queue/foo'] = function(message) {
  // ...
}; 
```

我很高兴听到是否有其他解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T12:21:50.573

**注意：**自 RabbitMQ 3.0.0 以来，replyTo 中不再有“/reply-queue/”
我花了大约 4 个小时来找出问题所在。使用 .replace('/reply-queue/', '') 代替 .substring(13)！

# email - IMAP - 通过 Yahoo X-YMailISG 检索邮件

> ID：12569325
> 
> 赞同：0
> 
> 时间：2012-09-24T16:41:43.913
> 
> 标签：email, imap, yahoo, mime, yahoo-mail

对于所有传入的 Yahoo 邮件，X-YMailISG 是一个可以检索到的传入邮件 ID 邮件。我想知道这在 IMAP 中是否可行，或者该字段是否完全用于其他用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T22:44:27.053

从[RFC 3501](https://www.rfc-editor.org/rfc/rfc3501#section-6.4.4)的第 6.4.4 节，您可以使用`SEARCH`or`UID SEARCH`与`HEADER`限定符一起查找该消息的标识符。

引：

```
HEADER <field-name> <string>
         Messages that have a header with the specified field-name (as
         defined in [RFC-2822]) and that contains the specified string
         in the text of the header (what comes after the colon).  If the
         string to search is zero-length, this matches all messages that
         have a header line with the specified field-name regardless of
         the contents. 
```

# android - 如何检查进程是应用程序还是服务？

> ID：12569326
> 
> 赞同：2
> 
> 时间：2012-09-24T16:41:44.863
> 
> 标签：android

在 android 4.0.4 中没有与 android 2.2 相同的任务管理器小部件。

这就是为什么我想自己做。

我有列出所有当前进程的代码，但是，如果我可以像在 android 2.2 的旧任务管理器中那样仅列出活动的应用程序，那就更酷了。

否则，如果我根我的 Android 2.2 手机，我可以获取我正在谈论的小部件并将其安装在我的 Android 4.0.4 设备上吗？

谢谢！

# ruby-on-rails - nil:NilClass 的未定义方法 `>=' -- 不知道这意味着什么

> ID：12569329
> 
> 赞同：0
> 
> 时间：2012-09-24T16:41:53.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当用户登录时，主页操作会将用户重定向到 new_status_update_path，他们将在其中看到提交新 status_update 的表单。

```
def home
 if user_signed_in?
  redirect_to new_status_update_path
 end 
end 
```

然后 status_update_controller 中的新操作应该简单地将 status_update 对象传递给视图表单，以便可以对其进行操作。

状态更新控制器：

```
def new
  @status_update = current_user.status_update.build if user_signed_in?
end 
```

看法：

```
<div class="row">
<div class="span6 offset3">
<%= form_for(@status_update) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>

  <%= f.label :weight %>
  <%= f.text_field :weight %>

  <%= f.label :bf_pct %>
  <%= f.text_field :bf_pct %>

  <%= f.submit "Post", class:"btn btn-large btn-primary" %> 
<% end %> 
```

渲染错误：

```
NoMethodError in StatusUpdatesController#new

 undefined method `>=' for nil:NilClass

app/models/status_update.rb:36:in `default_values'
app/controllers/status_updates_controller.rb:10:in `new' 
```

状态更新.rb

```
class StatusUpdate < ActiveRecord::Base
   belongs_to :user

   after_initialize :default_values

   attr_accessible :current_weight,
               :current_bf_pct,
               :current_lbm,
               :current_fat_weight,
               :change_in_weight,
               :change_in_bf_pct,
               :change_in_lbm,
               :change_in_fat_weight,
               :total_weight_change,
               :total_bf_pct_change,
               :total_lbm_change,
               :total_fat_change,
               :previous_weight,
               :previous_bf_pct,
               :previous_lbm,
               :previous_fat_weight,
               :created_at

   validates :user_id, presence: true
   validates :current_bf_pct, presence: true,
                          numericality: true,
                          length: { minimum: 2, maximum:5 }  
   validates :current_weight, presence: true,
                          numericality: true,
                          length: { minimum: 2, maximum:5 } 
   validates :current_lbm, presence: true
   validates :current_fat_weight, presence: true                   

   def default_values      
     if self.current_bf_pct >= 0.5
       self.current_bf_pct /= 100
        if self.current_bf_pct <= 0.04
          self.current_fb_pct *= 100
        end 
     end
     self.current_fat_weight = self.current_weight * self.current_bf_pct
     self.current_lbm = self.current_weight - self.current_fat_weight
   end  

   def previous_status_update
     previous_status_update = user.status_update.where( "created_at < ? ", self.created_at ).first   
     if previous_status_update == nil
       return self
     else
       previous_status_update
     end
   end 

    default_scope order: 'status_updates.created_at DESC'

 end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:53:00.847

看起来问题可能与您使用`after_initialize`. 如果我没记错的话，`after_initialize`在创建新对象后调用。那时，您对象上的所有属性都将为 nil，因此，您将无法使用`>=`.

**编辑：**

您可以尝试使用`||=`惯用语设置值，这将仅在属性为 nil 时设置属性的默认值。因此，如果属性为 nil，则类似的东西`self.current_bf_pct ||= 0.5`会将其设置`current_bf_pct`为 0.5，否则它将使用其当前值。

换句话说，您似乎正在尝试比较尚未设置的属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:43:17.517

```
undefined method `>=' for nil:NilClass 
```

这意味着您正在尝试在 status_update 文件第 36 行内`>=`的对象实例上使用运算符`nil`。根据错误。

检查以确保您正确调用了状态更新控制器，并且数据按照您的预期流动。

# sql - SQL 有条件地对数据进行分级

> ID：12569334
> 
> 赞同：0
> 
> 时间：2012-09-24T16:42:09.790
> 
> 标签：sql, pivot

我有以下难题要解决（确切地说是一项紧急业务任务）SQL SERVER 2008

我有一张这种表格的表格

```
ID    Market      SubMarket     Value
1       1          1              3
2       1          2              6
3       1          3              2
4       2          23             1
5       2          24             9 
```

我有特定的 MarketID，每个 MarketID 都有特定的 SubMarketID（最多 5 个 - 我知道每个可能如何）例如 MarketID 1 有 SubMarketIDs 1,2,3 MarketID 2 有 SubMarketIDs 23,24 等，每个 SubMarketID 都有一个变量值

我必须在这种类型的固定表中转换我的数据

```
MarketID  SubMarketAvalue   SubMarketBValue   SubMarketCValue....SubMarketEValue

   1              3                 6                2                  null

   2              1                 9               null                null 
```

SubMarketAValue 必须包含较小的 SubMarketID 的值

SubMarketBValue 必须包含下一个更大的 SubMarketID 的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:59:49.763

您没有指定 RDBMS，但您可以在 SQL Server 2005+、Oracle 和 PostgreSQL 中使用以下内容：

```
select market,
  max(case when rn = 1 then value end) as SubMarketAvalue,
  max(case when rn = 2 then value end) as SubMarketBvalue,
  max(case when rn = 3 then value end) as SubMarketCvalue,
  max(case when rn = 4 then value end) as SubMarketDvalue,
  max(case when rn = 5 then value end) as SubMarketEvalue
from 
(
  select id, market, submarket, value,
    row_number() over(partition by market 
                      order by market, submarket) rn
  from yourtable
) x
group by market 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3570a/7)

# ios - 什么是armv7s？

> ID：12569339
> 
> 赞同：55
> 
> 时间：2012-09-24T16:42:38.307
> 
> 标签：ios, xcode

这似乎是较新 XCode 中的一个新选项——而不是在有效架构下的“armv6 armv7”，我现在看到“armv7 armv7s”。什么是 armv7s，我需要像 armv7 一样构建它吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-24T16:51:08.430

iPhone 5 将附带并仅运行 iOS 6.0。为配合 iOS 6.0 的发布，Apple 为开发人员提供了更新版本的开发工具。Xcode 4.5 进行了两个重大更改：它放弃了对 ARMv6 ISA（由 iPhone 2G 和 iPhone 3G 中的 ARM11 内核使用）的支持，保留对 ARMv7（由现代 ARM 内核使用）的支持，并增加了对设计的新架构目标的支持支持新的 A6 SoC：armv7s。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-25T19:13:15.923

您不必为 armv7s 构建以添加对 iPhone 5 的支持。iPhone 5 也可以运行 armv7 编译的代码。我的应用程序刚刚提交到商店，它仅基于 armv7 构建并且运行完美！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T16:48:49.920

armv7s 是 iPhone 5 中 A6 处理器的架构。是的，你也需要包含它。在最新版本的 Xcode 中，不再支持 armv6。

# php - php domdocument 解析嵌套表

> ID：12569341
> 
> 赞同：2
> 
> 时间：2012-09-24T16:42:39.393
> 
> 标签：php, domdocument

我有一个看起来像这样的表：http: [//pastebin.com/jjZxeNHF](http://pastebin.com/jjZxeNHF)

我把它作为一个 PHP-DOMDocument。

现在我想“解析”这张表。

如果我是正确的，那么类似下面的东西是行不通的，因为 `$superTable->getElementsByTagName('tr')`不仅会得到外部 tr，还会得到内部 tr。

```
foreach ($superTable->getElementsByTagName('tr') as $superRow) {
    foreach ($superRow->getElementsByTagName('td') as $superCol) {
        foreach ($superCol->getElementsByTagName('table') as $table) {
            foreach ($table->getElementsByTagName('tr') as $row) {
                foreach ($row->getElementsByTagName('td') as $col) {
                }
            }
        }
    }
} 
```

如第二个片段中所述，我如何逐个字段地浏览所有表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:54:52.967

您可以使用 XPath 来消除许多明显的低级迭代并降低所有这些明显的复杂性......

```
$xpath = new DOMXPath($document);
foreach ($xpath->query('//selector/for/superTable//table') as $table) {
    // in case you really wanted them...
    $superCol = $table->parentNode;
    $superRow = $superCol->parentNode;

    foreach ($table->getElementsByTagName('td') as $col) {
        $row = $td->parentNode;
        // do your thing with each cell here
    }
} 
```

如果你愿意，你可以比这更深入——如果你只想要内部表格中的每个单元格，你可以将它减少到一个循环`//selector/for/superTable//table//td`。

当然，如果您正在处理有效的 HTML，那么您也可以遍历每个元素的子元素。这完全取决于 HTML 的外观，以及您需要的内容。

**编辑：**如果由于某种原因你不能使用 XPath，你可以做类似的事情

```
// I assume you've found $superTable already
foreach ($superTable->getElementsByTagName('table') as $table) {
    $superCol = $table->parentNode;
    $superRow = $superCol->parentNode;
    foreach ($table->getElementsByTagName('td') as $col) {
        $row = $col->parentNode;
        // do your thing here
    }
} 
```

请注意，这两种解决方案都不需要遍历行等。这是避免仅获取当前表中的行的重要部分。您只是在表中查找*表*，根据定义（1）将是子表，（2）将在主表中的一行内的列内，您可以从中获取父行和列表格元素本身。

当然，这两种解决方案都假设您只嵌套了一层深的表。如果不止于此，您将需要查看递归解决方案和 DOMElement 的`childNodes`属性。或者，更集中的 XPath 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:39:30.027

这是我的解决方案：

```
foreach ($raumplan->getElementsByTagName('tr') as $superRow) {
    if ($superRow->getElementsByTagName('table')->length > 0) {
        foreach ($superRow->getElementsByTagName('td') as $superCol) {
            if ($superCol->getElementsByTagName('table')->length > 0) {
                foreach ($superCol->getElementsByTagName('table') as $table) {
                    foreach ($table->getElementsByTagName('tr') as $row) {
                        foreach ($row->getElementsByTagName('td') as $col) {
                        }
                    }
                }
            }
        }
    }
} 
```

它通过查看元素中是否包含表来检查您是否在外部表中。

# php - 从数组中提取需要的项目

> ID：12569343
> 
> 赞同：0
> 
> 时间：2012-09-24T16:42:43.810
> 
> 标签：php, filtering

如果我有一个结构如下的数组：

```
[0] => bad
[1] => good
[2] => bad
[3] => bad
[4] => good
[5] => bad
[6] => bad
[7] => good
[8] => bad
[9] => bad
[10] => good
[11] => bad 
```

我需要一个只有好的项目的数组，比如：

```
[0] => good
[1] => good
[2] => good
[3] => good
[4] => good 
```

我能怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:46:12.010

你可以使用[array_filter](http://php.net/manual/function.array-filter.php)函数：

```
$good_value ="good";
$new_array = array_filter($old_array,function($value)use($good_value){
                                 return $value === $good_value;
                                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:48:39.867

您还可以使用一种利用[`foreach`](http://php.net/manual/en/control-structures.foreach.php)and的方法[`array_push`](http://php.net/manual/en/function.array-push.php)：

```
$goodArray = array();
foreach($array as $value) {
    if $value = "good" {
        array_push($goodArray, $value);
    }
} 
```

或者，如果您想维护原始索引：

```
$goodArray = array();
foreach($array as $key => $value) {
    if ($value = "good") {
        $goodArray[$key] = $value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:48:41.600

你可以只使用一个循环

```
$newArray = array();
foreach($oldArray as $value) {
  if($value == 'good')
    $newArray[] = $value
} 
```

是否需要保留密钥

```
$newArray = array();
foreach($oldArray as $key=>$value) {
  if($value == 'good')
    $newArray[$key] = $value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:52:07.360

使用 PHP 的[array_filter()](http://php.net/manual/en/function.array-filter.php)函数。

```
function good($var)
{
    return($var == "good");
}
$ary = array_filter($ary, "good");
print_r($ary); 
```

如果您需要重新索引数组，只需添加以下内容：

```
$ary = array_values($ary); 
```

**[键盘示例](http://codepad.org/9vUks3J9)**

# image-processing - OpenCV - 找到最接近图像中心的斑点

> ID：12569349
> 
> 赞同：1
> 
> 时间：2012-09-24T16:43:08.670
> 
> 标签：image-processing, opencv

给定一个带有少量（1-3）斑点的阈值图像，我想选择最靠近中心的斑点，我希望它是一个数字：

![前](../Images/1c2afe412def64e222e83e2c64346073.png) ![后](../Images/d45408a3752998b480c28a6f834bbfb6.png)

我想将红色矩形提取为单独的 Mat，因为它最靠近中心（绿点）。我的第一个想法是遍历图像中的所有斑点，并从其质心到图像中心的像素距离最小的斑点。但是，我不熟悉绝大多数 OpenCV 函数（而且有很多！）所以我想知道是否有更好的方法。

不过，我已经看到了一些问题：

1.  如果外面的盒子覆盖了 3 或 4 条边，即使盒子本身并不靠近中心，质心也可能靠近中心。也许我应该使用更高阶的时刻来赋予远离中心的点更多的权重？
2.  据我所知，OpenCV 没有集成的 blob 查找（或连接组件标记）库。我可以使用查找轮廓，但这对于像 6、8 或 9 这样带有内部部分的数字可能不准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:18:13.700

1.  使用 findContours 查找 blob
2.  使用 boundingRect 获取他们的边界矩形
3.  此时，你可以做你想做的事

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:00:48.600

在您的示例图像中，质心将不起作用，因为其他区域的质心比 6 的质心更靠近图像中心。相反，您应该寻找包含离图像中心最近的像素的区域。

我将其分解为：

1.  做区域标注。[使用快速联合查找数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)和Wikipedia 上描述[的两遍算法](http://en.wikipedia.org/wiki/Connected-component_labeling)手动编码很容易（也很有趣！） 。您可以通过 OpenCV`Mat`界面访问图像。
2.  找到离中心最近的非零像素的位置。从一个简单的详尽搜索开始……只有在太慢时才考虑优化。
3.  在您的区域标记图像中查找此像素的区域。

如果这还不够好，您可以查看某种加权质心，其中靠近图像中心的像素具有更高的权重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:49:02.150

没有 OpenCV 函数可以找到质心最接近特定点的 blob。无论如何，对于 1-3 个 blob，循环遍历所有这些将是一个快速操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T00:59:42.343

1.  使用以下任一 blob 计数库... [cvBlobslib](http://opencv.willowgarage.com/wiki/cvBlobsLib) 或使用[cvBlob](http://code.google.com/p/cvblob/) ...两者都基于单扫描标记算法..
2.  除了组件标签之外，您还可以获得边界框、轮廓、椭圆拟合、斑点过滤，具体取决于斑点的大小以及斑点的加法和减法....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T21:38:05.513

您可以使用包含孔的区域的 findContour/drawContour 提取连接的组件并计算标签图像。文档中有一个代码示例[可以做到这一点](http://docs.opencv.org/modules/core/doc/drawing_functions.html?#void%20cvDrawContours%28CvArr%20%2a%20img,%20CvSeq%2a%20contour,%20CvScalar%20external_color,%20CvScalar%20hole_color,%20int%20max_level,%20int%20thickness,%20int%20line_type,%20CvPoint%20offset%29)，尽管如果速度是一个问题，您可以实现一个专用方法。

要找到最接近图像中心的 CC，您不应依赖质心，因为您的区域具有复杂的形状。您可以从中心开始以越来越远的距离扫描标签图像，并查看您首先落在哪个连接组件上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T06:38:25.100

1.  编写一个类来进行连通分量标注。[这是它的wiki链接](http://en.wikipedia.org/wiki/Connected-component_labeling)。您需要创建一个[Disjoint Set](http://web.eecs.utk.edu/courses/fall2012/cs302/Notes/Disjoint/)类才能使其工作
2.  不是找到斑点的质心，而是找到从像素到图像中心的距离的平均总和。总和（pixel_i - 中心）/total_num_pixel_in_the_blob。

# matlab - 为什么 Octave 比 MATLAB 慢？

> ID：12569351
> 
> 赞同：42
> 
> 时间：2012-09-24T16:43:11.707
> 
> 标签：matlab, octave

我一直在使用 Octave 和 MATLAB 进行一些项目，并且遇到了一些问题。这个问题[为什么/什么时候我应该更喜欢 MATLAB 而不是 Octave？](https://stackoverflow.com/questions/3534867/why-when-should-i-prefer-matlab-over-octave)) 回答了好几个，但还有一个挥之不去……

我已经阅读了许多比较 Octave 和 MATLAB 性能的帖子/其他来源，并且我已经在标准脚本上运行了一些我自己的测试，这些测试证实了普遍的共识，即 Octave 通常比 MATLAB 的标准操作慢得多（迭代，当然，这样比较才有意义）。

共识似乎还表明，MATLAB 的大部分性能提升归功于其 JIT 编译器，该编译器在运行时编译大型循环。这是有道理的，最大的性能差异似乎出现在这些情况下（例如[Mathworks Matlab 与 Gnu Octave](http://thatcadguy.blogspot.fr/2011/01/mathworks-matlab-vs-gnu-octave.html)）

我的问题如下：为什么向量化代码在 Octave 中也运行得更慢？在这种情况下，似乎应该在循环之前留出内存，并且一些本机 C/C++ 循环应该执行该操作，这将等同于 Octave 和 MATLAB 对于矢量化代码的性能。此外，这是否具有更广泛的含义，即 Octave 对复杂操作的性能可能会更差，即使编写代码时不需要/未使用 JIT 编译器？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-24T19:14:01.137

Matlab 代码有四种加速方式：

*   JIT：根据我的轶事观察，在运行时编译有助于循环，但似乎也可以加速（或至少与代码的其他部分交互）。

*   在 C/C++ 中实现函数：有一堆在 Matlab/Octave 中实现的 Matlab/Octave 函数。在每个版本中，都会有更多的它们被制作成内置插件。

*   多线程：有[一个具有多线程实现的函数列表](http://www.mathworks.com/support/solutions/en/data/1-4PG4AN/?solution=1-4PG4AN)，这将加速函数调用。

*   通常更有效的实现。例如，中值滤波器在几个版本前为整数输入获得了巨大的速度提升。

所有这些方法都需要致力于使代码更快的开发人员。据我所知，Octave 开发人员的一个主要关注点是确保（Matlab）功能完全存在，而性能提升似乎是过去几年 Matlab 开发的重点。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-30T18:11:24.357

Matlab 在内部使用英特尔数学核心函数库 (英特尔 MKL) 进行向量和矩阵运算。这使 Matlab 比 Octave 具有显着的优势。

在您的 Matlab 中尝试命令 'version -lapack' 和 'version -blas' 来检查您的 Matlab 使用的 MKL 版本。

讨论 Matlab 使用 MKL 的快速链接是[http://stanford.edu/~echu508/matlab.html](http://stanford.edu/~echu508/matlab.html)。

英特尔 MKL 是专有的。软件.intel.com/en-us/intel-mkl。但是，对于非商业用途，Linux 版本是免费的。如果 Octave 能以某种方式使用我们机器上安装的 MKL，它应该会显着加快 Octave。

# google-tv - C++如何在google tv配对协议下实现DoPair方法

> ID：12569352
> 
> 赞同：0
> 
> 时间：2012-09-24T16:43:14.427
> 
> 标签：google-tv

有两种程序语言可以实现 Google 电视配对协议库：

1.  JAVA版本<--我的参考样例
2.  C++ 版本 <-- 我的目标

我正在执行我的配对程序的连接任务。我找到了一些 JAVA 示例代码来调用配对库，就像[这里](http://code.google.com/p/googletv-android-samples/source/search?q=PairingContext&origq=PairingContext&btnG=Search+Trunk)一样。

上述链接代码中“attemptToPair”方法下的定义：

```
PoloWireInterface protocol = 
              WireFormat.PROTOCOL_BUFFERS.getWireInterface(context); 
```

我不知道如何通过调用 C++ 版本库来实现这个定义。

因为'PoloWireInterface'类只是C++版本库下的一个抽象类。

此外，没有任何其他类扩展此库下的 PoloWireInterface。（检查[这里](http://code.google.com/p/google-tv-pairing-protocol/source/browse/#hg%2Fcpp%2Fsrc%2Fpolo%2Fpairing)）

如果没有 PoloWireInterface 实例，我无法建立“ClientPairingSession”实例。

* * *

我的客户端部分配对任务如下代码，但它不起作用:'(

```
using namespace polo::pairing;

using namespace polo::wire;

using namespace polo::encoding;

X509* peer_cert = // peer side certificate, load by openssl

X509* local_cert = // local side certificate,  generate by openssl

PairingContext* context;

context = new PairingContext(local_cert,peer_cert,false);

// CPoloWireInterface extends abstract class PoloWireInterface
PoloWireInterface* protocol = new CPoloWireInterface(); 

PoloWireAdapter* wire = new protobuf::ProtobufWireAdapter(protocol);

PoloChallengeResponse* challenge;

challenge = new PoloChallengeResponse(local_cert,peer_cert);

ClientPairingSession* mClientPairingSession;

mClientPairingSession = new ClientPairingSession
    (wire, context, challenge, service_name, "AnyMote");

EncodingOption hexEnc(EncodingOption::kHexadecimal, 4);

mClientPairingSession->AddInputEncoding(hexEnc);

mClientPairingSession->AddOutputEncoding(hexEnc);

// CPairingListener extends abstract class PairingListener
PairingListener* listener = new CPairingListener(); 

mClientPairingSession->DoPair(listener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:00:44.180

您不会在 java 和 c++ 库之间找到完全匹配的内容。您应该尝试使用本教程来使用 c++ 库：

[https://google-tv-chrome-extensions.googlecode.com/git/LearningExerciseInstructions/instructions.html](https://google-tv-chrome-extensions.googlecode.com/git/LearningExerciseInstructions/instructions.html)

# python - 创建一个可以序列化为嵌套 JSON 对象的 Python 类

> ID：12569356
> 
> 赞同：3
> 
> 时间：2012-09-24T16:43:30.077
> 
> 标签：python, json

我是 Python 类和 JSON 的初学者，我不确定我是否朝着正确的方向前进。

基本上，我有一个 Web 服务，它在 POST 正文中接受 JSON 请求，如下所示：

```
{ "item" : 
     {
     "thing" : "foo",
     "flag" : true,
     "language" : "en_us"
     },
   "numresults" : 3
} 
```

我开始沿着这样的路线为“项目”创建一个类：

```
class Item(object):
    def __init__:
        self.name = "item"

    @property
    def thing(self):
        return self.thing

    @thing.setter
    def thing(self, value):
        self.thing = value

    ... 
```

所以，我的问题是：

1.  我是否朝着正确的方向前进？
2.  如何将 Python 对象转换为 JSON 字符串？

我在 python 中找到了很多关于 JSON 的信息，我查看了 jsonpickle，但我似乎无法创建一个最终输出所需嵌套字典的类。

编辑：感谢 Joran 的建议，我坚持使用属性的类并添加了这样的方法：

```
 def jsonify(self):
        return json.dumps({ "item" :  self.__dict__ }, indent=4) 
```

这非常有效。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:46:07.887

看看[`colander`项目](http://docs.pylonsproject.org/projects/colander/en/latest/)；它让您定义一个面向对象的“模式”，可以轻松地序列化到 JSON 和从 JSON 序列化。

```
import colander

class Item(colander.MappingSchema):
    thing = colander.SchemaNode(colander.String(),
                                validator=colander.OneOf(['foo', 'bar']))
    flag = colander.SchemaNode(colander.Boolean())
    language = colander.SchemaNode(colander.String()
                                   validator=colander.OneOf(supported_languages)

class Items(colander.SequenceSchema):
    item = Item() 
```

然后从 JSON 加载这些：

```
items = Items().deserialize(json.loads(jsondata)) 
```

并`colander`为您验证数据，返回一组 Python 对象，然后可以对其进行操作。

或者，您必须创建特定的每个对象处理才能将 Python 对象转换为 JSON 结构，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:47:08.480

只需向您的类添加一个返回字典的方法

```
def jsonify(self):
    return { 'Class Whatever':{
              'data1':self.data1,
               'data2':self.data2,
               ...
                               }

     } 
```

并在结果上调用你的 tojson 函数......或者在你返回之前调用它只返回一个 json 结果......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:11:42.773

滤锅和 dict 建议都很棒。

我只想补充一点，您应该退后一步并决定如何使用这些对象。
这种通用方法的一个潜在问题是您需要一个列表或函数或一些其他映射来决定导出哪些属性。（您可以在滤锅定义和 jsonify 定义中看到这一点）。

您可能想要这种行为 - 或者您可能不想要。

例如，sqlalchemy 项目具有使用字段名称定义的类，例如离子滤锅。 *但*对象本身存储了大量与数据库和数据库连接相关的辅助数据。

为了获取您关心的基础字段数据，您需要访问包装数据的私有内部字典，或查询映射列的类：

```
def columns_as_dict(self):
    return dict((col.name, getattr(self, col.name)) for col in sqlalchemy_orm.class_mapper(self.__class__).mapped_table.c) 
```

我并不是要使这一点变得过于复杂——我只是想建议您仔细考虑一下您可能如何使用这些对象。如果您只想从您放入的对象中获取相同的信息 - 那么一个简单的解决方案就可以了。但如果这些对象将包含其他类型的“私有”数据，您可能需要在不同类型的信息之间保持一些区别。

# ios - SPSession 是否会超时？

> ID：12569357
> 
> 赞同：0
> 
> 时间：2012-09-24T16:43:31.650
> 
> 标签：ios, spotify, cocoalibspotify-2.0

登录 Spotify 并进行`SPSession`初始化时；它会超时吗？即当用户再次加载应用程序时，我是否必须（尝试）再次重新登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:39:12.787

"when the user loads the app again"?

Not sure what you mean by that. If your application gets backgrounded, suspended and then killed then yes, you will since the entire process gets nuked.

If your application gets backgrounded and you don't open a background task, you'll get suspended and killed anyway, so the above applies.

If you get backgrounded and you *do* open a background task, things will carry on as normal until you run out of time and get suspended and killed.

# c# - 添加到 CHAR 列末尾的一系列空格

> ID：12569358
> 
> 赞同：1
> 
> 时间：2012-09-24T16:43:34.003
> 
> 标签：c#, linq, sql-server-2008, tsql, whitespace

今天我遇到了一个奇怪的问题。我在 SQL Server 中有一个数据库，其中填充了 Linq 数据访问层。现在我有一些数据类型`CHAR(100)`的列，例如。

当我插入时，一切似乎都工作正常，但是当我检索这些值时，在每个值的末尾添加了一些空格序列。

有人有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T16:45:20.027

这是预期的行为。[`char [(n)]`](http://msdn.microsoft.com/en-us/library/ms176089.aspx)是一个：

> **固定长度**、非 Unicode 字符串数据。n 定义字符串长度，并且必须是 1 到 8,000 之间的值。存储大小为 n 字节。char 的 ISO 同义词是 character。

也许你的意思是使用[`varchar [(n | max)]`](http://msdn.microsoft.com/en-us/library/ms176089.aspx)？

> **可变长度**，非 Unicode 字符串数据。n 定义字符串长度，可以是 1 到 8,000 之间的值。max 表示最大存储大小为 2^31-1 字节（2 GB）。存储大小是输入数据的实际长度 + 2 个字节。varchar 的 ISO 同义词是 char 变化或字符变化。

# php - 在url php中检索包含特定字符串的href标题

> ID：12569359
> 
> 赞同：2
> 
> 时间：2012-09-24T16:43:34.817
> 
> 标签：php

我有以下代码。我只想检索在 url 中有 /movie/ 的 a href 标题。

```
 function get_a_contentmovies(){
          $h1count = preg_match_all("/(<a.*>)(\w.*)(<.*>)/ismU",$this->DataFromSite,$patterns);
        return $patterns[2];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:56:55.947

你可以像这样使用 DOMXpath：

```
$dom = new DomDocument();
$dom->loadHTML($string);
$xpath = new DOMXpath($dom);
$elements = $xpath->query("//a[contains(@href, '/movie/')]");

foreach($elements as $el) {
    var_dump($el->getAttribute('title'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:48:46.170

使用 Regex 解析 (x)HTML 是个坏主意。您应该使用 DOM 解析器，例如[DomDocument](http://php.net/manual/en/intro.dom.php)。看看[这个话题](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

# testing - 如何仅在詹金斯上运行相关测试？

> ID：12569360
> 
> 赞同：4
> 
> 时间：2012-09-24T16:43:39.137
> 
> 标签：testing, jenkins

免责声明：我根本不是熟练的 Jenkins 用户。

我一直在寻找一个插件，以允许我在 maven 构建的项目中仅运行受最新提交影响的测试，但既找不到足够聪明的 maven 插件，也无法再次运行所有测试，也找不到这样做的 jenkins 插件。有没有办法做到这一点？

比如说，我有一个由 A.java、testA.java、B.java 和 testB.java 组成的项目。我已将 jenkins 配置为为每个提交运行构建和测试。我刚刚对 A.java 进行了更改，但没有对 B.Java 进行更改，并且 testB.java 和 B.java 对 A.java 没有依赖关系。我不希望 Jenkins 在检查新资源时运行 testB.java。如果 ther3e 是从 B.java 或 testB.java 到 A.java 的依赖项，我希望 jenkins 弄清楚这一点，并运行 testB.java。

背景：在一个项目中运行所有测试太耗时了。只运行一组固定的测试会给错误留下漏洞。运行所有可能被手动更改破坏的测试很容易出错。

# javascript - 在不同浏览器上显示不同坐标的图像

> ID：12569362
> 
> 赞同：0
> 
> 时间：2012-09-24T16:43:53.503
> 
> 标签：javascript, html

我正在绘制固定宽度和高度的图像。我允许用户单击图像 - 并存储单击图像的位置（xy 坐标）。这是一个示例代码：

```
<script language="JavaScript" type="text/JavaScript">
    var posx; var posy;

 function showP(e) {
        // captures the mouse position
        posx = 0; posy = 0;
        if (!e) { var e = window.event; }
        if (e.pageX || e.pageY) {
            posx = e.pageX;
            posy = e.pageY;
        }
        else if (e.clientX || e.clientY) {
            posx = e.clientX;
            posy = e.clientY;
        }
        alert('X mouse is: ' + posx + ' Y mouse is: ' + posy );
    } 
</script> 
```

我注意到对于图像上的固定点，我在不同的浏览器上得到不同的 X 和 Y 坐标。

谁能说出为什么会这样。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:22:26.513

您可以检查您在活动中获得的所有数据

```
 var a = "";
 for (var key in e){ 
     if( typeof e[key]!='function' &&  typeof e[key] !='object' )
     a += key+'='+ e[key]+'\n' 
  }
  alert(a) 
```

此结构可帮助您比较浏览器中的边距和内边距

```
var padding = parseInt($("#imgId").css("padding-top")); 
```

我认为您需要调查您的代码和样式，也许您与影响结果的填充和边距有一些冲突。

希望这种方式对您有所帮助。

# unit-testing - 单元测试模板方法设计模式

> ID：12569363
> 
> 赞同：7
> 
> 时间：2012-09-24T16:44:03.693
> 
> 标签：unit-testing, language-agnostic, tdd

假设以下模板方法实现：

```
public abstract class Abs
  {
    void DoYourThing()
    {
      log.Info("Starting");
      try
      {
        DoYourThingInternal();
        log.Info("All done");
      }
      catch (MyException ex)
      {
        log.Error("Something went wrong here!");
        throw;
      }
    }

    protected abstract void DoYourThingInternal();

  } 
```

现在，有很多关于如何测试`Abs`类的信息，并确保它`DoYourThingInternal`被调用。
但是，假设我想测试我的`Conc`课程：

```
 public class Conc : Abs
  {
    protected override void DoYourThingInternal()
    {
      // Lots of awesome stuff here!
    }
  } 
```

我不想这样做`conc.DoYourThing()`，因为这将调用已经单独测试过的父方法。

我只想测试覆盖方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T17:38:24.413

您已将问题标记为“tdd”，但我怀疑您在遇到此“问题”时是否遵循了该原则。

如果您真正遵循 tdd，您的工作流程将类似于

1.  为一些尚未实现的逻辑写一个测试
2.  为这个测试实现最简单的实现，使其变为绿色（例如 Conc1 上的逻辑）
3.  重构
4.  为其他尚未实现的逻辑编写测试
5.  为这个测试实现最简单的实现，使其变为绿色（例如 Conc2 上的逻辑）
6.  重构

在“6”中，您可能认为实现模板方法是个好主意，因为 Conc1 和 Conc2 共享一些逻辑。只需执行此操作，然后运行测试以查看逻辑是否仍然有效。

编写测试来验证逻辑，不要将它们作为实现的基础（=从测试开始）。在这种情况下，开始编写测试以验证逻辑是否有效（稍后将逻辑放入您的具体类型中）。是的，这意味着某些代码行（抽象类中的代码行）要经过多次测试。但那又怎样？编写测试的要点之一是您应该能够重构代码，但仍然能够通过运行测试来验证它是否有效。如果您以后不想使用模板方法模式，那么在理想情况下，您不需要更改任何测试，而只需更改实现即可。

如果您开始考虑要测试哪些代码行，IMO 您将失去编写测试的大部分好处。您想确保您的逻辑有效 - 而是为此编写测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T17:45:30.200

我认为“问题”的一部分是无法从类外部调用受保护的方法。`Conc`一个派生自并提供新公共方法的模拟类怎么样：

```
public class MockConc: Conc
  {
    void MockYourThingInternal()
    {
      DoYourThingInternal()
    }
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:38:48.690

我不会考虑`DoYourThingInternal()`与`DoYourThing()`（例如，可以单独测试的两个单独的代码模块）分开，因为无论如何您都无法单独实例化您的抽象类，并且这两种方法将始终一起运行。此外，`DoYourThingInternal()`可以访问您的类的所有受保护成员并可以修改它们，对`DoYourThing()`. 所以我认为`DoYourThing()`完全独立于`DoYourThingInternal()`.

但是，这并不意味着您不能对 ' 的预期行为进行单独的测试`DoYourThing()`，这在 Abs 的所有实现和`DoYourThingInternal()`' 的预期行为中必须保持相同。

您可以使用（抽象）基础测试类，在其中定义预期的一般行为测试`DoYourThing()`。然后创建与 Abs 实现一样多的测试子类，并针对每个实现的细节进行单元测试。

来自基测试类的测试将被继承，并且当您运行任何子类的测试时，继承的测试`DoYourThing()`也将运行：

```
public abstract class AbsBaseTest
{
  public abstract Abs GetAbs();

  [Test]
  public void TestSharedBehavior() 
  {
    getAbs().DoYourThing();

    // Test shared behavior here...
  }
}

[TestFixture]
public class AbsImplTest : AbsBaseTest
{
  public override Abs GetAbs()
  {
    return new AbsImpl();
  }

  [Test]
  public void TestParticularBehavior()
  {
    getAbs().DoYourThing();

    // Test specific behavior here
  }
} 
```

见[http://hotgazpacho.org/2010/09/testing-pattern-factory-method-on-base-test-class/](http://hotgazpacho.org/2010/09/testing-pattern-factory-method-on-base-test-class/)

不知道是否所有单元测试框架都支持抽象测试类继承（我认为 NUnit 支持）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T16:48:40.637

在 Abs 上粘贴一个界面并模拟它怎么样？忽略电话，或对他们设定期望？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T03:22:11.907

您可以通过多种方式进行操作，其中许多已在此处记录。这是我通常采用的方法：让测试用例继承自具体类。

```
public ConcTest : Conc
{
    [Test]
    public void DoesItsThingRight()
    {
         var Result = DoItsThingInternal();
         // Assert the response
    }
} 
```

希望有帮助！

布兰登

# theory - 加法运算与乘法运算

> ID：12569367
> 
> 赞同：1
> 
> 时间：2012-09-24T16:44:24.240
> 
> 标签：theory, multiplication

我知道，加法运算比乘法运算更简单。`123456 * 3`但是和的执行时间会有什么不同`123456 + 123456 + 123456`吗？

乘法到底是如何工作的？

乘法算法在不同的编程语言中是否有所不同？

乘法在低级（即汇编代码）上的表现如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:09:29.327

在 x86 汇编语言中，加法和乘法运算如下所示：

ADD [operand1], [operand2] 其中操作数 1 可以是寄存器，操作数 2 可以是寄存器、常量或内存地址 根据处理器型号和操作数 2 类型，需要 1 到 7 个时钟

MUL [operand] ;对于无符号乘法，将累加器寄存器（AL，AX，EAX）的内容与操作数相乘，操作数可以是寄存器或内存地址。同样，根据操作数的类型和处理器型号，它需要 12-38 个时钟。还有一个 MUL 版本可以进行有符号乘法。

这是核心汇编语言，没有现代 SIMD 扩展，如 SSE 等。如上所述，实际速度取决于编译器优化。

智能编译器很可能会用 3*123456 替换您的 123456 + 123456 + 123456

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:52:13.570

过早的优化是万恶之源:)

你给编译器的不是你在优化步骤之后得到的，所以虽然理论上加法更快，但在现实世界条件下你永远无法确定结果是什么（更不用说当你考虑到 SSE 或编译器可能使用的其他处理器指令）。

# php - 通过数组比较今天的日期和时间？

> ID：12569368
> 
> 赞同：0
> 
> 时间：2012-09-24T16:44:24.913
> 
> 标签：php, arrays, codeigniter, multidimensional-array

我有一个这样的数组：

大批 （

```
[0] => stdClass Object
    (
        [Start] => 08:00
        [dayName] => Tuesday
        [dayID] => 2
        [courseName] => Math

    )

[1] => stdClass Object
    (
        [Start] => 10:00
        [dayName] => Tuesday
        [dayID] => 2
        [courseName] => Geography
    )

[2] => stdClass Object
    (
        [Start] => 14:00
        [dayName] => Tuesday
        [dayID] => 2
        [courseName] => Science
    )

[3] => stdClass Object
    (
        [Start] => 10:00
        [dayName] => Thursday
        [dayID] => 4
        [courseName] => Math
    )

[4] => stdClass Object
    (
        [Start] => 18:00
        [dayName] => Friday
        [dayID] => 5
        [courseName] => History
    ) 
```

) 我想做的是，我想将现在的日期和时间与数组中的值进行比较。例如，假设现在是早上 7:00，现在是星期二。然后我想得到对象[0]。但如果是 11:00 点，那么我需要获取周二 14:00 开始的 Object[2]。现在是星期二和 16:00 点，那么我需要 Object[3] 。

如果是周末，那么我需要每周的开始时间，即周二 08:00 的数学课程。

我试图使用 key => value 来获得它，但我搞混了。我如何比较日期和时间，如果有关于该组合的课程，如果不继续检查，只需选择它。

关于小蓝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:54:22.923

```
function getObject($array){
    $timeNow = date('U'); // time now
    $oneHour = $timeNow+3600; // time now + 1 hour

    foreach($array as $num => $one){ // loop in each $array
        $date = strtotime($one->Start); // convert start time to timestamp
        if($date >= $timeNow && $date < $oneHour && date('l', $date) == $one->dayName){ // if all criteria met
            return $array[$num]; // return that object
        }
    }
    return array('no data'); // if no criteria is met return no data.
}

$course = getObject($yourArray);
echo $course->courseName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:53:36.197

您可以混合使用 DateTime 和简单的 min search ：

```
$myCourse = null;//initialisation
$myCourseDate =null;
$now = new DateTime;
foreach($array as $course){
   //get the date from the datas
   $date = DateTime::createFromFormat('l h:i',$course->dayName.' '.course->start);
   if($now < $date && ($myCourseDate === null || $myCourseDate > $date)){
      $myCourse = $course;
      $myCourseDate = $date;
   }
}
//at the end of the loop, you've got the expected course 
```

# c++ - 如何用 sscanf_s() 解析字符串？

> ID：12569370
> 
> 赞同：3
> 
> 时间：2012-09-24T16:44:30.400
> 
> 标签：c++, scanf

我有字符串（45 个字节）：

```
 String1        String2000000000001234 
```

我需要从此字符串中获取三个变量：

```
char * var1="String1";
char * var2="String2";
int var3=1234; 
```

这里有固定长度（15 个字节）的 3 部分。我需要将所有部分保存到变量中，字符串没有空格，整数没有前导零。

scanf() 可以做到这一点吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:54:06.080

sscanf 不可能。首先，您需要传递一个 char*数组*（如果您使用 _s 种类，还需要传递大小）而不仅仅是一个 char 指针（即它需要有与之关联的内存）。其次，sscanf 中的字符串以空格结尾，而在 String2 和 0000 之间没有空格。为此格式编写一个自定义解析器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T17:19:18.667

据此[，](http://beej.us/guide/bgc/output/html/multipage/scanf.html)您的问题应通过以下格式解决：

```
%*[^a-zA-Z]%s%*[^a-zA-Z]%[^0]s%*[^1-9]%d 
```

描述：

%*[^a-zA-Z] - 跳过（不存储）直到按字母顺序排列，即跳过前导空格

%s - 读取第一个字符串直到空格

%*[^a-zA-Z] - 跳过尾随空格直到下一个字符串

%[^0]s - 读取字符串 util zeros

%*[^1-9] - 跳到非零数字

%d - 最后，读取数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:17:30.650

最简单的可能是：

```
char var1_buffer[31] = "", var2_buffer[31] = "";
sscanf(string+30, "%d", &var3);
string[30] = '\0';
sscanf(string, "%s%s", var1_buffer, var2_buffer);
var1 = strdup(var1_buffer);
var2 = strdup(var2_buffer); 
```

这需要能够写入输入字符串。如果这不可能，您可以将第 3 行和第 4 行替换为：

```
int p1 = 0;
sscanf(string, "%30s %n%30s", var1_buffer, &p1, var2_buffer);
if (p1 > 30)
    p1 = 30;
var2_buffer[30-p1] = '\0'; 
```

在任何一种情况下，您都应该添加对 sscanf 的返回值的检查，以确保输入字符串的格式正确。

# android - 我的 Runnable 中的 Sqlite 交互导致 ANR

> ID：12569372
> 
> 赞同：1
> 
> 时间：2012-09-24T16:44:35.910
> 
> 标签：android, multithreading, android-sqlite

我有一个类，记录器，它捕获传感器数据并将其写入数据库。所有数据库处理都在 Recorder 中进行。在这里，我在一个新线程中运行它。mContext 来自 getApplicationContext()。

```
 Runnable startRunnable = new Runnable(){
            public void run() {
                Recorder recorder = new Recorder((SensorManager) getSystemService(SENSOR_SERVICE), mContext);
                recorder.start();
            }
        };
        recorderThread = new Thread(startRunnable);
        recorderThread.start(); 
```

以下是 Recorder 的相关位：

```
public Recorder(SensorManager sensorManager, Context context){
    mSensorManager = sensorManager;
    mContext = context;
}

void start(){               
    List <Sensor> sensorList = mSensorManager.getSensorList(Sensor.TYPE_ALL);
    for(Sensor sensor : sensorList){
        mSensorManager.registerListener(this, sensor, SensorManager.SENSOR_DELAY_GAME);
    }
}

public void onSensorChanged(SensorEvent event) {
    SensorDatabase dbHelper = new SensorDatabase(mContext);
    mDb = dbHelper.getWritableDatabase();

    if(mDb != null && mDb.isOpen()){
        ContentValues values = new ContentValues();
        values.put(DataColumns.ACCURACY, event.accuracy);
        // more values stuff ... 

        mDb.insert(SensorDatabase.TABLE_NAME, null, values);
        mDb.close();
    }
} 
```

应用程序记录数据，但出现 ANR 错误。如果我这样做是为了不在记录器中初始化数据库，则不会出现 ANR 错误。

这个 Runnable 怎么会在这里阻塞 UI 线程？没有回调，UI 线程从不尝试打开数据库连接，至少我不打算这样做。

我查看了 ANR 的 traces.txt，它说线程“main”正在执行：

```
 android.database.sqlite.SQLiteStatement.native_executeSql(Native Method) 
```

任何指针？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:08:06.677

我曾经（错误地，愚蠢地）假设从非 ui 线程注册事件侦听器会将侦听器置于所述非 ui 线程上。为了完成我想要的，我做了以下，并明确地给 registerListener 方法一个新的处理程序：

```
 mThread = new HandlerThread("RecorderThread");
    mThread.start();

    List <Sensor> sensorList = mSensorManager.getSensorList(Sensor.TYPE_ALL);
    for(Sensor sensor : sensorList){
        mSensorManager.registerListener(
                Recorder.this, 
                sensor, 
                SensorManager.SENSOR_DELAY_FASTEST, 
                new Handler(mThread.getLooper())
        );
    } 
```

这似乎运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:09:06.523

> 这个 Runnable 怎么会在这里阻塞 UI 线程？

不会阻塞主`Runnable`应用程序线程（又名“UI 线程”）。`onSensorChanged()`正在阻塞主应用程序线程，因为在`onSensorChanged()`主应用程序线程上被调用，因此您正在主应用程序线程上执行磁盘 I/O。

# sql-server - TSQL UNION 获取唯一值

> ID：12569373
> 
> 赞同：1
> 
> 时间：2012-09-24T16:44:37.800
> 
> 标签：sql-server, tsql, max, min, union-all

我正在尝试根据两个标准获取两个数据库之间的唯一记录。标准是：

1.  如果在数据库 1 中找到数据（在下面的示例中为@SCCM），则优先考虑
2.  获取所选数据库中的 MAX 资源 ID

这是一个例子，它是一半的工作。数据库首选项有效，但该数据库内的最大资源 ID 无效。现在它正在选择@SMS 和@SCCM 之间的最大值

```
 DECLARE @SMS TABLE (
    name0 varchar(100),
    resid int
)

DECLARE @SCCM TABLE (
    name0 varchar(100),
    resid int
)

INSERT INTO @SMS
SELECT 'TEST', 1000 UNION
SELECT 'TEST', 1500 UNION
SELECT 'TEST1', 2000 UNION
SELECT 'TEST2', 3000 UNION
SELECT 'TEST3', 4000

INSERT INTO @SCCM
SELECT 'TEST', 100 UNION
SELECT 'TEST', 150 UNION
SELECT 'TEST1', 200 UNION
SELECT 'TEST2', 300

SELECT MIN(SMSDB) as SMSDB, MAX(Resid), Name0 FROM
(
    SELECT name0, resid, 2 as SMSDB FROM @SMS
    UNION ALL
    SELECT name0, resid, 1 as SMSDB FROM @SCCM
) as tbl
GROUP BY NAME0 
```

预期成绩：

```
SMSDB | Resid | Name0
----------------------
1     | 150   | TEST
1     | 200   | TEST1
1     | 300   | TEST2
2     | 4000  | TEST3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:55:51.220

您可以使用[分区](http://msdn.microsoft.com/en-us/library/ms189461.aspx)：

```
;WITH tbl as
(
    SELECT name0, resid, 2 as SMSDB FROM SMS
    UNION ALL
    SELECT name0, resid, 1 as SMSDB FROM SCCM
),
t as (
    SELECT *, 
           ROW_NUMBER()  
           over (partition By name0 order by SMSDB, resid desc ) 
           as rn
    FROM tbl
)
SELECT * FROM t
WHERE rn = 1 
```

[结果](http://sqlfiddle.com/#!3/b4609/8)：

```
| NAME0 | RESID | SMSDB | RN |
------------------------------
|  TEST |   150 |     1 |  1 |
| TEST1 |   200 |     1 |  1 |
| TEST2 |   300 |     1 |  1 |
| TEST3 |  4000 |     2 |  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:37:45.620

分区解决方案实际上可能更好，但它伤害了我的大脑。如果它们存在于 SCCM 中，那么仅排除 SMS 中的值怎么样？

```
SELECT MIN(SMSDB) as SMSDB, MAX(Resid), Name0 FROM
(
    SELECT name0, resid, 2 as SMSDB FROM @SMS SMS
    WHERE NOT EXISTS (SELECT * FROM @SCCM WHERE name0 = SMS.name0)
    UNION ALL
    SELECT name0, resid, 1 as SMSDB FROM @SCCM
) as tbl
GROUP BY NAME0 
```

甚至

```
SELECT 1 as SMSDB, MAX(resid), name0  FROM @SCCM
GROUP BY name0
UNION ALL
SELECT 2 as SMSDB, MAX(resid), name0 FROM @SMS SMS
WHERE NOT EXISTS (SELECT * FROM @SCCM WHERE name0 = SMS.name0)
GROUP BY name0
ORDER BY name0 
```

# windows - 写一个windows脚本

> ID：12569374
> 
> 赞同：0
> 
> 时间：2012-09-24T16:44:43.163
> 
> 标签：windows, scripting, automation

我想编写一个脚本来自动执行 Windows 上的某个任务。

我使用显示器来扩展笔记本电脑的屏幕，但每次拔下插头并重新连接显示器时，我都必须进入桌面属性和显示设置以扩展显示器并设置分辨率。

好吧，我假设在 LINUX 上你可以使用 shell 脚本来做到这一点，但我不确定如何在 Windows 中做到这一点。

根据我在互联网上的研究，我发现 BASH 脚本可用于自动执行此任务。

请大家，我不需要软件来做到这一点我想自己编写脚本，这样我也可以学到一些东西。

我已经阅读了 bash 脚本，但我找不到访问 Windows 组件的方法，只是想让您知道我是一名中级 JAVA 程序员。我想我也可以使用 JAVA。

我希望我的问题很清楚。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:07:46.390

Bash 脚本用于 *nix 系统，Windows 上的等价物是批处理脚本。

一些快速的谷歌搜索表明这可以通过注册表编辑来完成，但它们在下次重新启动之前不会生效。

除此之外，看起来通过批处理脚本来做到这一点是不可能的。

如果您想查看另一种编程语言来执行此操作，请查看[此答案](https://stackoverflow.com/questions/215412/programmatically-change-screen-resolution)

# perl - Perl 中的 RSA 密钥

> ID：12569376
> 
> 赞同：10
> 
> 时间：2012-09-24T16:44:48.233
> 
> 标签：perl, encryption, cryptography, rsa, encryption-asymmetric

我有简单的 RSA 编码/解码脚本，例如：

```
use Crypt::RSA;

my $rsa = new Crypt::RSA;
my($public, $private) = $rsa->keygen( Size => 2048 )
                        or die $rsa->errstr();

my $email = '...';

my $em = $rsa->encrypt( Message => $email, Key => $public  );
my $dm = $rsa->decrypt( Ciphertext => $em, Key => $private );

print "$dm\n"; 
```

但是我想修改这个脚本以使用 RSA 密钥作为**e**、**d**和**n**值，例如：

```
e => 10001
d => 135b03530e94874283f0f0000ffff0001
n => 24000c6c9620886831124848640044901 
```

如何将这三个参数转换为**对象**`Crypt::RSA::Key`，反之亦然？

或者，如何使用这三个参数`Crypt::RSA`进行加密和解密？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T18:10:59.857

我建议您检查此模块：[Crypt::OpenSSL::RSA](http://search.cpan.org/~perler/Crypt-OpenSSL-RSA-0.28/RSA.pm)，[Crypt::OpenSSL::Bignum](http://search.cpan.org/~iroberts/Crypt-OpenSSL-Bignum-0.04/Bignum.pm)，或检查我如何在 github 中的存储库之一中使用它：[Perl backend for Jcryption](https://github.com/fxzuz/Perl-backend-for-Jcryption)

**通过参数 n,e,d 创建 RSA**

```
use strict;

use Crypt::OpenSSL::Bignum;
use Crypt::OpenSSL::Random;
use Crypt::OpenSSL::RSA;

my $param_ref = {
    n => 'C8F19E3A7C18A5FE6D1DE07926F4E6403EA6558EE4892D29155F2C52678E210FE5D61DBC9EC77F2DD39FC8D9F2717F23629B7E18BDB38AADF9FC5BF1CA968C67F4BF0F2D6657E1374A845048B6CDCB2B8B2B3F31BF7F134A11B9A063EB7C326B27C0027955637E6089293F5F4CD40F5B91142BBA61B8E473A8D14B447896B5FD',
    e => '010001',
    d => '574C612997703DED630A6FD3329182D6B6611D1A8F3EE957C7E9292043CD03A01C82013948E1F2E6BDE1D5289AA3A450832E7A81D528833F4233D8DE1ADD7CF1878CBACDE64DE4364F8B73093753D6E322732EAEC942281CE4AF55D212E77EC4A108708864D3F86A67C63FBE8206A543A42ABF45E56C1E41A2F2BA0CCC1C8001',
};

my $n = Crypt::OpenSSL::Bignum->new_from_hex($param_ref->{n});
my $e = Crypt::OpenSSL::Bignum->new_from_hex($param_ref->{e});
my $d = Crypt::OpenSSL::Bignum->new_from_hex($param_ref->{d});

my $rsa = Crypt::OpenSSL::RSA->new_key_from_parameters($n, $e, $d);

printf "private key is: %s\n", $rsa->get_private_key_string();
printf "public key (in PKCS1 format) is: %s\n", $rsa->get_public_key_string(); 
```

**从 RSA 对象获取关键参数**

```
use strict;

use Crypt::OpenSSL::Bignum;
use Crypt::OpenSSL::Random;
use Crypt::OpenSSL::RSA;

my $rsa = Crypt::OpenSSL::RSA->generate_key(2048);
my ($n, $e, $d, $p, $q) = $rsa->get_key_parameters();

printf "private key is: %s\n", $rsa->get_private_key_string();
printf "public key (in PKCS1 format) is: %s\n", $rsa->get_public_key_string(); 
```

# web - 在没有 IP 范围的静态站点开发的本地测试期间阻止 Google Analytics（尤其是在移动设备上）

> ID：12569379
> 
> 赞同：1
> 
> 时间：2012-09-24T16:45:08.437
> 
> 标签：web, google-analytics

我在 SO 上进行了搜索，发现了一些关于此问题的问题，但我遇到的大多数答案似乎都建议通过 IP 范围进行过滤或将条件代码引入为网站提供动力的引擎；这些选项对我来说都不可行。如果这确实是重复的，这是一个适合我的用例的答案，那么我提前道歉，但我似乎找不到任何东西。

我最初将自己从 Google Analytics 中过滤出来的方法是简单地将请求重定向到`google-analytics.com`我的主机文件中的 https 版本的 GA 到 localhost。这在我的桌面上工作得很好，但是在像 iPhone 这样的移动设备上测试时它是无用的（除非有人知道如何在不越狱的情况下修改 iPhone 的主机文件）。

我的本地测试设置是将[pow](http://pow.cx)与`.dev`域一起用于本地项目目录，然后当我需要在移动设备上查看站点的开发版本时，我将[Xip.io](http://xip.io)与[Adob​​e Shadow](http://labs.adobe.com/technologies/shadow/)结合使用。

我无法按 IP 范围过滤，因为我经常在家工作，而且我的 ISP 不提供住宅帐户的静态地址。

我尝试在我的 Google Analytics（分析）配置文件中设置自定义排除过滤器，以过滤掉来自这些域的流量，但它们要么不起作用，要么我对排除过滤器的工作方式有非常严重的误解（这完全有可能）。我将自定义过滤器设置为基于主机名排除，匹配模式`\.dev`，`.*xip\.io/.*`但这些过滤器绝对什么都不做。我相信这是因为从技术上讲，这个过滤器是在寻找原始域的主机名而不是请求的主机名，但我真的不确定，因为语言很模糊，并且根据您正在查看的帮助文档而有所不同.

在本地开发期间手动从站点中删除 GA 跟踪代码然后返回并重新添加它们，是否有人有任何建议或有人可以告诉我我的排除过滤器做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:45:29.757

我一直在使用分析跟踪代码的变体来防止在我们的登台服务器上跟踪页面浏览量——例如：

```
if (!/\.dev|xip\.io/.test(window.location.hostname)) _gaq.push(['_trackPageview']); 
```

或者，您可以将其应用于`_setAccount`呼叫。如果您这样做并查看跟踪请求，网络媒体资源 ID 将显示为“UA-XXXXX-X”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:52:31.043

你可以依靠

```
 window['ga-disable-UA-XXXXXX-Y'] = true; 
```

其中 UA-XXXXXX-Y 是帐户 ID。（[这里](https://stackoverflow.com/questions/10668292/is-there-a-setting-on-google-analytics-to-suppress-use-of-cookies-for-users-who)有详细信息）。

就像创建一个页面或 webserver 指令来设置一个 cookie（保留给开发人员以从 ga 中排除的页面），以及在加载 ga 的代码中：

```
if (hasDeveloperCookie()) {
     window['ga-disable-UA-XXXXXX-Y'] = true;
} 
```

# haskell - 不能使用 ghci 推断的类型签名来返回 Sing (d :: Symbol) 的函数

> ID：12569386
> 
> 赞同：5
> 
> 时间：2012-09-24T16:45:48.700
> 
> 标签：haskell

我正在尝试恢复`Symbol`使用的值类型：

```
{-# LANGUAGE GADTs #-}
{-# LANGUAGE KindSignatures #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE ScopedTypeVariables #-}
module Temp where

import GHC.TypeLits

data Temp (d :: Symbol) (a :: *) where 
  T :: a -> Temp d a

{-
description :: SingI Symbol d => Temp d a -> Sing Symbol d
-}
description (_ :: Temp d a) = (sing :: Sing d) 
```

`ghci`这在（版本 7.6.1）中加载良好：

```
% ghci
GHCi, version 7.6.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> :l Temp
[1 of 1] Compiling Temp             ( Temp.hs, interpreted )
Ok, modules loaded: Temp.
*Temp> :t description
description :: SingI Symbol d => Temp d a -> Sing Symbol d 
```

但是，如果我尝试使用`ghci`模块本身推断的类型（取消注释 Temp.hs 中的行），我会收到以下错误：

```
Temp.hs:14:16:
    `SingI' is applied to too many type arguments
    In the type signature for `description':
      description :: SingI Symbol d => Temp d a -> Sing Symbol d 
```

这对我来说很有意义，因为[`Sing`并且`SingI`似乎在文档中采用了一个参数](http://www.haskell.org/ghc//dist/current/docs/html/libraries/base-4.6.0.0/GHC-TypeLits.html#t%3aSing)。

什么是正确的类型签名`description`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:51:55.560

好的，通过一些捣蛋得到了它：

```
description :: SingI d => Temp d a -> Sing d 
```

看起来有一些时髦的重写正在进行，但现在已经足够了。

# forms - jquery mobile，浏览器后退按钮导航

> ID：12569389
> 
> 赞同：1
> 
> 时间：2012-09-24T16:46:02.710
> 
> 标签：forms, jquery-mobile, browser, back

我有一个带有#p1、#p2、#p3 的多页表单。提交表单后，当我尝试单击返回浏览器按钮时，它应该转到带有空表单字段的#p1。Jquery Mobile 有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:18:36.043

我会覆盖后退按钮并检查哪个页面是活动页面，然后根据该页面执行您需要的任何房屋清洁...

我向另一个与此非常相似的问题提交了一个示例：

[后退按钮处理程序](https://stackoverflow.com/questions/12548735/calling-default-phonegap-back-button-handler/12567829#12567829)

在我有选项、弹出窗口和主页的地方，您可能只需要 P3，当 activePage 等于 P3 时，清除您的表单并显示 P1。

```
 function pageinit() {
        document.addEventListener("deviceready", deviceInfo, true);
    }

    function deviceInfo() {
        document.addEventListener("backbutton", onBackButton, true);
    } 

    function onBackButton(e) {
        try{
            var activePage = $.mobile.activePage.attr('id');

            if(activePage == 'P3'){
                clearForm(); // <-- Calls your function to clear the form...
                window.location.href='index.html#P1';

            } else if(activePage == 'P1'){

                function checkButtonSelection(iValue){
                    if (iValue == 2){
                        navigator.app.exitApp();
                    }
                }

                e.preventDefault();
                navigator.notification.confirm(
                    "Are you sure you want to EXIT the program?",
                    checkButtonSelection,
                    'EXIT APP:',
                    'Cancel,OK');

            } else {
                navigator.app.backHistory();
            }
        } catch(e){ console.log('Exception: '+e,3); }
    } 
```

# python - 实现 alpha-beta 修剪算法时函数中的奇怪行为

> ID：12569392
> 
> 赞同：4
> 
> 时间：2012-09-24T16:46:11.917
> 
> 标签：python, artificial-intelligence, chess

我已经实现了一个带有 alpha-beta 修剪的 minimax 算法。为了得到最好的移动，我用`rootAlphaBeta`函数调用了 alpha-beta 算法。但是，在`rootAlphaBeta`函数中，我发现了一些非常奇怪的行为。当我`rootAlphaBeta`使用 a`ply`为 4 调用该函数时，它会进行大约 20 000 次调用，但是当我`alphaBeta`直接调用该函数时，它只会进行大约 2000 次调用。我似乎找不到问题所在，因为呼叫次数应该相同。

两种算法最终找到的移动应该是相同的，对吧？我想是的，至少这招的分数是一样的，`alphaBeta`当我没有直接叫它时，我无法知道选择的招式`rootAlphaBeta`。

```
def alphaBeta(self, board, rules, alpha, beta, ply, player):
    """Implements a minimax algorithm with alpha-beta pruning."""
    if ply == 0:
        return self.positionEvaluation(board, rules, player)

    move_list = board.generateMoves(rules, player)
    for move in move_list:
        board.makeMove(move, player)
        current_eval = -self.alphaBeta(board, rules, -beta, -alpha, ply - 1,
                                       board.getOtherPlayer(player))
        board.unmakeMove(move, player)

        if current_eval >= beta:
            return beta

        if current_eval > alpha:
            alpha = current_eval

    return alpha

def rootAlphaBeta(self, board, rules, ply, player):
    """Makes a call to the alphaBeta function. Returns the optimal move for a 
    player at given ply."""
    best_move = None
    max_eval = float('-infinity')

    move_list = board.generateMoves(rules, player)
    for move in move_list:
        board.makeMove(move, player)
        current_eval = -self.alphaBeta(board, rules, float('-infinity'),
                                       float('infinity'), ply - 1,
                                       board.getOtherPlayer(player))
        board.unmakeMove(move, player)

        if current_eval > max_eval:
            max_eval = current_eval
            best_move = move

    return best_move 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:04:33.073

您`rootAlphaBeta`不会更新`alpha`值。当它可以缩小除第一个之外的所有子节点的范围时，它会使用 (-inf, inf) 的完整范围调用其所有子节点。这将防止修剪一些对最终分数没有影响的分支，并增加节点数。

# git - 如何显示过去 24 小时内推送的 git 更改？

> ID：12569394
> 
> 赞同：2
> 
> 时间：2012-09-24T16:46:24.140
> 
> 标签：git, git-log

我熟悉显示过去 24 小时内（提交到作者本地存储库）的**更改**`git log --since="24 hours ago"`的语法。

 **我们有一个开发人员团队，他们不断地在本地提交，然后每两天左右才推送一次这些更改。如果这是真的，那么`git log --since="24 hours ago"`将永远不会列出这些更改。（我们将其用于每晚的摘要电子邮件）

我真正希望看到的是：在过去 24 小时内推送到 master 的更改，并且能够做到这一点，而无需手动记住我们的摘要脚本上次运行的提交哈希。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T16:59:44.210

您可以使用这样的命令，在开发人员推送的服务器上运行它：

```
git reflog master --since="24 hours ago" 
```

不幸的是，这些信息似乎并没有通过`git fetch`类似命令传输，并且在本地运行会检索从集线器*拉*`git reflog origin/master`取的历史记录。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:15:04.627

`git`当事物被推/拉时，它本身不会跟踪元数据。正如 user4815162342 的回答中所指出的，有些事情可以与猜测相关联（reflogs、文件时间戳等），但这不是一个完美的解决方案。如果您使用`git daemon`，则可以将其设置为记录每个连接，并且您的 Web 服务器可以为 http/https 连接执行相同的操作。您还可以设置一些挂钩（特别是接收前或接收后的挂钩）来为您捕获一些信息。***

# apache - 友好的 url 仅适用于 url

> ID：12569396
> 
> 赞同：0
> 
> 时间：2012-09-24T16:46:29.653
> 
> 标签：apache, mod-rewrite

抱歉标题名称不好...问题是我正在使用标准重写，例如：

```
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

但它也会重写所有包含 html 的文件（如 jquery、css 等）的路径...所以，当我尝试访问时`domain.com/templates/js/jquery.min.js`- 我的 php 脚本会抛出异常，因为它没有找到所需的参数。我也尝试添加 [az] 但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:52:11.193

尝试以下操作：

```
RewriteRule ^([a-z0-9]*)$ index.php?q=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:52:18.220

您需要添加一些条件来排除合法请求：

```
# if the request isn't for an existing file
RewriteCond %{REQUEST_FILENAME} !-f
# if the request isn't for an existing directory
RewriteCond %{REQUEST_FILENAME} !-d
# then rewrite the entire request to index.php
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

由于`/templates/js/jquery.min.js`是对现有文件的请求，因此第一个条件将失败并且请求不会被重写为 index.php。

# magento - Magento 中的缩放 FPC

> ID：12569398
> 
> 赞同：0
> 
> 时间：2012-09-24T16:46:33.393
> 
> 标签：magento, magento-1.7

我们使用来自 ezapps 的 Zoom Full Page Cache 用于 Magento。代码可以在这里找到：

[https://github.com/ezapps/Zoom-Magento-FPC](https://github.com/ezapps/Zoom-Magento-FPC)

尽管我们看到开发已经沉寂了一段时间，但我们仍然喜欢这个产品。我们现在只看到使用站点 A 加载到站点 B 的多存储。但它应该支持多存储。

我们的问题是：有没有人遇到过这个多站点问题并且知道如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:33:56.187

缩放寻找：

self::$STORE = isset($_SERVER['MAGE_RUN_CODE'])

问题是 ezzoom.php 是 index.php 中的第一行 PHP 代码

您需要做的是将用于商店选择的 IF ELSE 代码放置在索引 php 中对 ezzoom.php 的调用之上

然后它工作正常

现在代码就像

```
$call to ezzoom.php on first line

OTHER CODE HERE

switch($_SERVER['HTTP_HOST']) {
case 'winkel1.nl':
Mage::run('winkel2', 'website');
break;
case 'winkel2.nl':
Mage::run('winkel2', 'website');
break;
default:
Mage::run();
break;
} 
```

这需要

```
switch($_SERVER['HTTP_HOST']) {
    case 'winkel1.nl':
    Mage::run('winkel2', 'website');
    break;
    case 'winkel2.nl':
    Mage::run('winkel2', 'website');
    break;
    default:
    Mage::run();
    break;
    }

$call to ezzoom.php on first line

OTHER CODE HERE 
```

然后ezzoom知道环境变量

# android - 如何解决错误 - Proguard - Android

> ID：12569399
> 
> 赞同：1
> 
> 时间：2012-09-24T16:46:36.080
> 
> 标签：android, proguard

我对 Proguard (Eclipse for Windows) 有问题，当我为虚拟设备构建应用程序时，它运行良好（没有错误），但是当我尝试导出它时，它崩溃并报告一长串错误，谁能帮我解决这个问题？

问题列表：http: [//notepad.cc/share/lWMVb3xmZE](http://notepad.cc/share/lWMVb3xmZE)

proguard.cfg 文件： http: [//notepad.cc/share/chV9ADV23B](http://notepad.cc/share/chV9ADV23B)

安卓 2.2 (SDK 8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:01:41.420

将此添加到项目中的 proguard.cfg 文件中

``` -keepclassmembers 类 * 实现 android.os.Parcelable { static android.os.Parcelable$Creator CREATOR; }

**编辑：**

-keep class android.support.v4.app.** { *; - 保持界面 android.support.v4.app。*{ *; }```

**编辑：**

看到这个：[Android Application with android-support-v4.jar added to lib faces error while trying to sign in using progaurd in IntelliJ Idea](https://stackoverflow.com/questions/9949634/android-application-with-android-support-v4-jar-added-to-lib-facing-error-while)

# maps - 谷歌地图：给定经纬度坐标

> ID：12569401
> 
> 赞同：1
> 
> 时间：2012-09-24T16:46:51.990
> 
> 标签：maps

我有以下经纬度坐标（在 JS 数组中），我们如何在这些坐标上绘制带有标记的谷歌地图。

请举一个简单的例子，因为 API 文档中的例子并没有真正给出结论性的答案，或者对我来说太复杂了。

43.82846160000000000000, -79.53560419999997000000

43.65162010000000000000, -79.73558579999997000000

43.75846240000000000000, -79.22252100000003000000

43.71773540000000000000, -79.74897190000002000000

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:03:15.393

我使用过谷歌地图，如果您只需要放置一些标记（确保您使用的是 API v3），v2 已贬值并且会在某个时候脱落。接下来，您的纬度/经度坐标。它们需要缩减为 9 或 10 个字符。当我使用超长纬度/经度坐标值时，我很不走运。

谷歌有一个很好的工具，可以让你用它来构建地图。从这里开始：

[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

意识到您将需要您的虚拟主机域上的密钥。你可以在这里得到你的钥匙：

[https://developers.google.com/maps/signup](https://developers.google.com/maps/signup)

一长串演示，包含 65 个 v3 API 示例。

[https://developers.google.com/maps/documentation/javascript/demogallery](https://developers.google.com/maps/documentation/javascript/demogallery)

在演示中，我发现这个例子看起来很接近。通过查看源代码重用您找到的代码。您可以通过此链接查看纬度/经度坐标对及其调用方式。

[http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/js/data.js](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/js/data.js)

这是一个校园地图示例。

[http://beta.gr-3.net/map-api/](http://beta.gr-3.net/map-api/)

最后，这是一个最简单的例子。一个标记图。查看源代码并重用它。希望这足以让您入门。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple)

我希望这一切都会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:27:28.060

你可以试试这个

```
var map,
locations = [
    [43.82846160000000000000, -79.53560419999997000000],
    [43.65162010000000000000, -79.73558579999997000000],
    [43.75846240000000000000, -79.22252100000003000000],
    [43.71773540000000000000, -79.74897190000002000000]
];
var myOptions = {
    zoom: 6,
    center: new google.maps.LatLng(locations[0][0], locations[0][1]),
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map($('#map')[0], myOptions);
var infowindow = new google.maps.InfoWindow(), marker, i;
for (i = 0; i < locations.length; i++) {  
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][0], locations[i][1]),
        map: map
    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            infowindow.setContent('Current location is: '+ locations[i][0]+', '+locations[i][1]);
            infowindow.open(map, marker);
        }
    })(marker, i));
} 
```

[**演示**](http://jsfiddle.net/X5r8r/652/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:10:45.927

首先，您将创建 google maps 对象，在 head 标记内的某个位置，您将侦听 ready 事件，并且在处理程序中具有：

```
var mapOptions = 
    {
      zoom: 10,
      center: new google.maps.LatLng( <%= @drawings.first.latitude %>, <%= @drawings.first.longitude %> ),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions); 
```

这假设您的 html 中有一个 id 为 map_canvas 的 div。

您应该准备好向页面添加标记，您应该将坐标存储在一个数组中，这样您就可以遍历它和这些标记。

```
for( var i=0; i < coords.length; i++ )
{
     latlng = coords[i].latitude + ", " + coords[i].longitude;

     var marker = new google.maps.Marker({
      position: latlng, 
      map: map,
      title: '',
      icon: "http://maps.google.com/mapfiles/marker" + String.fromCharCode(coords.length + 65) + ".png"
    }); 
} 
```

# java - 何时在休眠中使用延迟加载/急切加载？

> ID：12569403
> 
> 赞同：7
> 
> 时间：2012-09-24T16:47:00.103
> 
> 标签：java, hibernate, lazy-loading

我相信只有两种使用 Hibernate 加载对象的方法，一种是延迟加载，一种是急切加载。延迟加载有其自身的优势，它不是加载大量对象，而是仅在需要时加载。我还了解到，如果你想强制加载一个对象的所有子对象，你可以简单地调用`parent.getChildren().size()`. 所以假设我们有以下对象

```
@Entity
public class Customer{
public Set<Order> order;
}

@Entity
public class Order{
} 
```

假设我们有客户在我们的系统中有订单，并且可能不止一个甚至为空。所以我的问题是在这种情况下总是使用急切加载不是更好吗？我们需要与客户相关的订单的尺寸或一些信息。在这种情况下使用延迟加载有什么好处，有什么好处吗？

我正在尝试了解在哪里使用延迟加载以及在哪里使用急切加载，非常感谢您的洞察力。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T16:56:55.510

> 我正在尝试了解在哪里使用延迟加载以及在哪里使用急切加载，非常感谢您的洞察力。

这里有一些想法：

1）如果你总是要使用某些东西（当然），你可以急切地加载它。
2）与 1 相关，如果您几乎从不使用某些东西，请延迟加载它。
3) 当涉及到大型集合时，延迟加载往往更有用。
4) 急切地加载东西将减少与会话相关的错误，但可能会降低性能。
5）对于复杂的数据模型和/或大型数据库，您将看到您的应用程序在负载下的表现如何调整您的策略。
6) 第一次很难做到正确。做自己认为正确的事，必要时不要害怕改变。
7) 对于大型数据集，您可能最终会编写自定义 hql/查询，其中默认映射可以被覆盖，因此惰性与急切并不重要。

如果你相信#6，那么不要被困在试图计划太远的时候，如果你不得不改变它。

WRT您的具体示例，我可能会编写一堆查询来访问数据（当然是由适当的业务需求驱动）

1) 一个加载客户的查询，并将订单留在数据库中（因此延迟加载），当我需要获取客户信息时我会调用它
2) 一个加载客户和所有订单信息的查询，用于我需要的情况它。所以这种情况下我会忽略默认映射。

有了这两个查询，在我的服务层中，我拥有了根据情况的上下文执行正确操作所需的工具。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T16:55:45.160

这个[链接](https://stackoverflow.com/questions/2990799/difference-between-fetchtype-lazy-and-eager-in-java-persistence)完美地回答了你的问题。

延迟加载用于相关实体大小很大并且不需要每次都获取的情况

EAGER 应该与适当的分析一起使用，因为它每次加载主实体时都会加载关系。

因此，如果关系对于业务逻辑计算是绝对必要的，您应该考虑使用 EAGER 加载；延迟加载将适用于大多数情况并提供较少的性能问题。

# spring-security - Spring 3.1：处理会话超时

> ID：12569417
> 
> 赞同：1
> 
> 时间：2012-09-24T16:47:50.457
> 
> 标签：spring-security, spring-3

我有一个与 Spring 3.1 身份验证连接的应用程序。我有一些页面发出 AJAX 请求以在对话框中显示一些信息。现在，如果用户的会话超时，Spring 会重定向到登录页面。我不想要基于 AJAX 的登录页面。我希望通过取消当前操作将用户完全导航到登录页面。用户登录后，将用户导航回他所在的最后一页（从那里发出 AJAX 请求）。

如果请求是从页面发出的，则重定向内容可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:28:17.127

执行重定向到登录页面的类是`LoginUrlAuthenticationEntryPoint`. 我会编写一个自定义`AuthenticationEntryPoint`实现来检测 Ajax 请求（例如，通过查看`Accept`标头），并发送错误代码而不是执行重定向。

不过，您仍然必须在客户端检测到这一点。Spring Security 无能为力，但您应该能够从 Javascript 重新加载当前页面，这将强制登录，然后重定向到原始页面（默认 Spring Security 行为）。

# mysql - 基于条件的混合左/右连接？

> ID：12569419
> 
> 赞同：2
> 
> 时间：2012-09-24T16:47:52.703
> 
> 标签：mysql, sql

我正在尝试编写一个 SQL 语句来从数据库中检索用户列表，以及他们的公司名称（如果他们有与他们关联的公司）。但是，有几个问题：

1.  并非所有用户都有公司，但我仍然需要在列表中显示这些人。
2.  即使用户拥有一家公司，该公司也可能被软删除（该记录仍在数据库中，但标记为 is_deleted = 1），并且我不想显示与“已删除”公司相关联的用户.

所以本质上我想从用户表中选择并左连接公司表，但如果他们被分配给 is_deleted 的公司，我根本不想包含用户记录。

我的第一个倾向是我必须使用 UNION 将两个查询合并在一起，但我希望有一种更清洁的方法来做到这一点？

使用 MySQL 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:31:06.647

```
SELECT U.name Username, C.name Company
FROM User U
LEFT OUTER JOIN Company C
ON U.companyid = C.id
WHERE C.id IS NULL OR C.is_deleted = 0 
```

C.id IS NULL 得到没有公司的用户，C.is_deleted = 0 得到没有被软删除的公司的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:51:28.363

尝试加入排除已删除公司的表：

```
SELECT U.Name, C.Name 
FROM User U LEFT OUTER JOIN 
    (SELECT CompanyId, CompanyName 
     FROM Company 
     WHERE is_deleted = 0) 
C ON U.CompanyId = C.CompanyId 
```

# bison - 转义字符语法

> ID：12569422
> 
> 赞同：2
> 
> 时间：2012-09-24T16:47:59.223
> 
> 标签：bison, flex-lexer, parser-generator, jison

我想为允许转义标记分隔符的标记语言创建 Jison (Bison) 语法。

这些将是有效的：

```
I like apples
I like [apples, oranges, pears]
I like [apples, oranges, pears] and [peanut butter, jelly]
I like [apples, oranges, pears] \[when they're in season\]
I like emoticons :-\] 
```

这些示例可能会被解释为以下内容（以 JSON 表示）：

```
["I like apples"]
["I like ", ["apples", "oranges", "pears"]]
["I like ", ["apples", "oranges", "pears"], " and ", ["peanut butter", "jelly"]]
["I like ", ["apples", "oranges", "pears"], " [when they're in season]"]
["I like emoticons :-]"] 
```

转义`[]\,`是最少的，但允许任何可打印字符转义可能是有意义的，即使转义是不必要的。

如果不支持转义不可打印的字符，那就太好了。也就是说，`\`一行末尾的 a 是非法的。正则表达式可能会免费提供，`.`因为它可能不包含换行符，但它也应该发生在其他不可打印的字符上。

很难用谷歌搜索，因为它与 Bison 定义等中转义文字字符的大量结果混在一起。

在 Bison 定义的语言中支持转义字符的最优雅方法是什么？

**编辑**

这是我到目前为止所拥有的[，可以在 Jison 上进行测试](http://zaach.github.com/jison/try/)，但它不起作用（`1`如果有的话，只是返回）而且我不希望文本会原封不动地到达 - 这需要第二遍。这是可以避免的吗？

```
/* description: markup */

/* lexical grammar */
%lex
%%

(\\.|[^\\\[])+            return 'TOPTEXT'
(\\.|[^\\\[\]\,])+        return 'TEXT'
\-?[0-9]+("."[0-9]+)?\b   return 'NUMBER'
".."|"-"                  return '..'
"["                       return '['
"]"                       return ']'
","                       return ','
<<EOF>>                   return 'EOF'

/lex

%start markup

%%

markup
    : template EOF
        { return $template; }
    ;

template
    : template TOPTEXT
        { $$ = $template.push($TOPTEXT); }
    | template dynamic
        { $$ = $template.push($dynamic); }
    | /* empty */
        { $$ = []; }
    ;

dynamic
    : '[' phraselist ']'
        { $$ = $phraselist; }
    ;

phraselist
    : phraselist ',' phrase
        { $$ = $phraselist.push($phrase); }
    | /* empty */
        { $$ = []; }
    ;

phrase
    : TEXT
        { $$ = $phrase.push($TEXT); }
    | phrase dynamic
        { $$ = $phrase.push($dynamic); }
    | /* empty */
        { $$ = []; }
    ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:05:21.697

我认为您的代码存在不止一个问题。

第一个（这解释了`1`输出）是`[].push`返回列表的新长度，所以你想要的可能是 push，*然后*定义值：

```
template
: template TOPTEXT
    { $template.push($TOPTEXT); $$ = $template; }
| template dynamic
    { $template.push($dynamic); $$ = $template; }
| /* empty */
    { $$ = []; }
; 
```

另一件事是，你似乎试图让太多的事情同时工作，而没有真正确定你想要它们，或者它们实际上是以他们应该的方式工作。

也许一个更好的策略是让你从小处着手，让它在当时成为一条规则，从基础开始。

例如，您可以首先确保您的词法分析器适用于每种情况，使用仅打印出标记的简单语法进行测试：

```
%lex
%%

(\\\\|\\\[|\\\]|\\\,|[^,\\\[\]])+   return 'TEXT'
\-?[0-9]+("."[0-9]+)?\b             return 'NUMBER'
".."|"-"                            return 'RANGE'
"["                                 return '['
"]"                                 return ']'
","                                 return ','

/lex

%start lexertest

%%

lexertest:
token lexertest
| /* empty */
;

token:
TEXT    { console.log("Token TEXT: |" + $TEXT +  "|"); }
|
NUMBER  { console.log("Token NUMBER: |" + $NUMBER +  "|"); }
|
'['     { console.log("Token ["); }
|
']'     { console.log("Token ]"); }
|
','     { console.log("Token ,"); }
|
'RANGE' { console.log("Token RANGE: |" + $1 +  "|"); }
; 
```

[**注意：**在浏览器中运行时，`console.log`输出只会在开发者工具中。您可能会发现在命令行中使用 Jison 和[这样的脚本（对于 Bash）](https://github.com/eliasdorneles/shell-utils/blob/master/run-jison.sh)可以更容易地通过多个输入进行测试。]

然后你完善它，直到你满意为止。在您对词法分析器感到满意之后，您就开始使语法起作用，同时再次测试一条规则。保留上述规则，以便在您想要调试词法分析器的输出时，只需更改`%start`规则即可。

最后，您很可能会发现`EOF`一开始就不需要，而且也许您根本不需要两个不同的规则来匹配自由文本。

希望能帮助到你。

# java - 如何使用 Dimension 类中的对象在 Java 中的画布上绘制边框？

> ID：12569427
> 
> 赞同：1
> 
> 时间：2012-09-24T16:48:20.667
> 
> 标签：java, canvas, border, dimension

对于一个作业，我需要在 500x600 的画布周围从两侧 20 像素处绘制一个边框，所以我手动完成了：

```
//upper line
myCanvas.drawLine(20, 20, 580, 20);

//bottom line
myCanvas.drawLine(20, 480, 580, 480);

//west line
myCanvas.drawLine(20, 20, 20, 480);

//east line
myCanvas.drawLine(580, 20, 580, 480); 
```

但是现在我必须使用 Dimension 类中的一个对象，这样每当画布大小发生变化时，边框也会发生变化。所以

```
myCanvas.drawLine(20, 20, (myCanvas.getHeight() - 20), 20) 
```

但是我该怎么做呢？每次我得到：找不到符号 - 方法 getHeight()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:41:24.277

您可以简单地使用多个[`Border`s](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/Border.html)（[如何使用 Borders](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)）。

就像是...

```
myCanvas.setBorder(new CompoundBorder(new EmptyBorder(20, 20, 20, 20), new LineBorder(Color.BLACK)); 
```

假设“画布”`JComponent`当然是从……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:55:01.967

作为`myCanvas`包含许多基于摆动的对象的自定义类，您可以使用以下方法进行绘制：

```
myCanvas.drawLine(20, 20, myCanvas.getSize().height - 20, 20); 
```

# c# - Creating a dialog for Word Addin

> ID：12569432
> 
> 赞同：5
> 
> 时间：2012-09-24T16:48:40.257
> 
> 标签：c#, dialog, visual-studio-2005, ms-word, vsto

How can I create a Settings dialog for a Word Addin.

I have already creating a `Windows Form` and I'm calling 'form.Show()`. But It's creating a new Window.

How can I pass the owner by `form.ShowDialog(owner)`?

I've solve my question creating a Helper for open the Dialog, but I don't know if is the best way

```
public static DialogResult ShowDialog(Form dialog)
{
    NativeWindow mainWindow = new NativeWindow();
    mainWindow.AssignHandle(Process.GetCurrentProcess().MainWindowHandle);
    DialogResult dialogResult = dialog.ShowDialog(mainWindow);
    mainWindow.ReleaseHandle();
    return dialogResult;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T17:04:41.780

I solve the question creating the code:

```
public static DialogResult ShowDialog(Form dialog)
{
    NativeWindow mainWindow = new NativeWindow();
    mainWindow.AssignHandle(Process.GetCurrentProcess().MainWindowHandle);
    DialogResult dialogResult = dialog.ShowDialog(mainWindow);
    mainWindow.ReleaseHandle();
    return dialogResult;
} 
```

# jquery - 在 CSS3 和 Webkit 中以编程方式缩放 Div

> ID：12569439
> 
> 赞同：0
> 
> 时间：2012-09-24T16:48:54.640
> 
> 标签：jquery, webkit

我正在尝试将正方形从 0 缩放到 1.5，但它似乎从 1.0 的比例开始。我怎样才能让它从0开始？

如果你在这里查看我的小提琴：http: [//jsfiddle.net/foreyez/eaPpT/](http://jsfiddle.net/foreyez/eaPpT/)

ps 请为此使用与 webkit 兼容的浏览器：chrome 或 safari。

*注意：我不想为此更改实际样式或 CSS，我想完全以编程方式完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:54:24.880

jQuery 1.8 为您添加了前缀，但您应该使用, 而不是带有方法`-webkit-transform`的 JS 版本。`.css()`

此外，为了确保它按预期工作，我在更改之前留出了一些时间：

[http://jsfiddle.net/eaPpT/3/](http://jsfiddle.net/eaPpT/3/)

# java - XML 转义码

> ID：12569441
> 
> 赞同：0
> 
> 时间：2012-09-24T16:48:58.963
> 
> 标签：java, xml, string

我已经编写了一个方法来检查我的 XML 字符串中的 &。

我需要修改该方法以包括以下内容：

`<`<

`>`>

`\`&guot

`&`&

`\`&apos

这是方法

```
private String xmlEscape(String s) {
    try {
        return s.replaceAll("&(?!amp;)", "&amp;");
    }
    catch (PatternSyntaxException pse) {
        return s;
    }
} // end xmlEscape() 
```

这是我使用它的方式

```
 sb.append("            <Host>" + xmlEscape(url.getHost()) + "</Host>\n"); 
```

如何修改我的方法以合并其余符号？

**编辑**

我想我一定不能正确地表达这个问题。在`xmlEscape()`我想检查以下字符的字符串的方法中 `<` `>` `'` `"` `&`，如果找到它们，我想用正确的字符替换找到的字符。

示例：如果有 char `&`，则 char 将替换为`&amp`; 在字符串中。

你能做一些简单的事情吗

```
try {
   s.replaceAll("&(?!amp;)", "&amp;");
   s.replaceAll("<", "&lt;");
   s.replaceAll(">", "&gt;");
   s.replaceAll("'", "&apos;");
   s.replaceAll("\"", "&quot;");
   return s;
}
catch (PatternSyntaxException pse) {
   return s;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:18:24.730

您可能需要考虑使用 Apache commons StringEscapeUtils.escapeXml 方法或其他许多 XML 转义实用程序之一。这使您可以正确转义到 XML 内容，而不必担心在需要转义除主机名之外的其他内容时丢失某些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T20:31:14.803

或者，您是否考虑过使用[StAX (JSR-173)](http://www.jcp.org/en/jsr/detail?id=173) API 来编写 XML 文档，而不是将字符串附加在一起（JDK/JRE 中包含一个实现）？这将为您处理所有必要的字符转义：

```
package forum12569441;

import java.io.*;
import javax.xml.stream.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        // WRITE THE XML
        XMLOutputFactory xof = XMLOutputFactory.newFactory();

        StringWriter sw = new StringWriter();
        XMLStreamWriter xsw = xof.createXMLStreamWriter(sw);
        xsw.writeStartDocument();
        xsw.writeStartElement("foo");
        xsw.writeCharacters("<>\"&'");
        xsw.writeEndDocument();

        String xml = sw.toString();
        System.out.println(xml);

        // READ THE XML
        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(new StringReader(xml));
        xsr.nextTag(); // Advance to "foo" element
        System.out.println(xsr.getElementText());
    }

} 
```

**输出**

```
<?xml version="1.0" ?><foo>&lt;&gt;"&amp;'</foo>
<>"&' 
```

# iphone - 在移动 Safari 中隐藏地址栏，阅读器按钮可见

> ID：12569443
> 
> 赞同：4
> 
> 时间：2012-09-24T16:49:10.303
> 
> 标签：iphone, mobile-safari, ios6

好的，所以我使用[了建议的 window-scrollTo 方法](https://stackoverflow.com/questions/7890003/how-to-remove-address-bar-in-safari-in-ios5)，它在任何地方都可以正常工作，除了一个小问题。

当 Safari 决定显示“阅读器”按钮，认为我可能想保存我的页面以供以后阅读时，它会将地址栏保持整整 5 秒钟，然后最终像我要求的那样将其隐藏。UX 时代的永恒。

这是 iOS 6 的事情还是在 iOS 5 中也这样做了？（我目前没有 5 设备来测试它。）另外，有什么办法可以绕过它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T00:35:01.733

我环顾四周，似乎没有任何方法可以禁用阅读器按钮。我找到的唯一可能的解决方案是让您的网站不那么“可读”，这样 Safari 就不会添加阅读器按钮。使网站“可读”的确切原因非常模糊。

这里有一些关于什么东西“可读”的研究：http: [//mathiasbynens.be/notes/safari-reader](http://mathiasbynens.be/notes/safari-reader)

这是一种通过将内容放在 CSS 中来降低可读性的方法：http: [//askmike.org/2012/12/a-hacky-way-to-remove-the-reader-button-in-ios-safari/](http://askmike.org/2012/12/a-hacky-way-to-remove-the-reader-button-in-ios-safari/)

底线似乎是没有解决方案。希望苹果会添加一个元标记来禁用它，或者至少让我们更快地隐藏地址栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T09:13:26.407

这对我有用：

我将所有内容放在一个 ol 标签内。

```
<ol style = "padding:0;margin:0"> 
   my content
</ol> 
```

从我在别处读到的内容来看，读者部分是由一页上的字数触发的，但不计算 ol 内的字数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T16:58:39.907

`button`您可以通过隐藏触发阅读器的内容来禁用阅读器。

然后在页面加载后 1 秒显示该内容。

例如，`<p>`如果它们触发了阅读器，则隐藏所有元素`button`。

# brainfuck - 用brainfuck打印一个数字？

> ID：12569444
> 
> 赞同：19
> 
> 时间：2012-09-24T16:49:13.050
> 
> 标签：brainfuck

我已经搜索了一段时间，但找不到任何可以帮助我的东西。

假设第一个单元格（或值等）等于 165。我如何打印“165”？

我的想法是将数字切割成单独的部分：1,6 和 5。打印它们就没有问题了。

注意：我不只是想打印“165”。我想打印第一个单元格的值。无论是 165、255、0、1 还是其他任何值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T06:15:28.173

使用著名的模程序（[http://esolangs.org/wiki/brainfuck_algorithms](http://esolangs.org/wiki/brainfuck_algorithms)会帮助你）

```
>+++++++++++[-<+++++++++++++++>] # initialize 165 at first cell
>++++++++++<<[->+>-[>+>>]>[+[-<+>]>+>>]<<<<<<]>>[-]>>>++++++++++<[->-[>+>>]>[+[-
<+>]>+>>]<<<<<]>[-]>>[>++++++[-<++++++++>]<.<<+>+>[-]]<[<[->-<]++++++[->++++++++
<]>.[-]]<<++++++[-<++++++++>]<.[-]<<[-<+>] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-27T11:49:45.987

我创建了一种可以编译为brainfuck 的简单语言，可以在这里找到：[http](http://code.google.com/p/brainfuck-compiler) ://code.google.com/p/brainfuck-compiler 。有一个用 java 实现的语言的编译器。

我使用该语言中的以下函数来输出一个数字。也许您可以分析生成的代码，看看它是否对您有用。一个警告虽然，它确实会产生一些冗余的单元格复制（从未有过优化这一点）。无论如何，这是一个示例程序及其生成的 BF 代码。（请注意，缩进必须是我的语言中的制表符）

```
declare n, 165
declare digits
while n
    push n % 10
    digits = digits + 1
    n = n / 10
if digits
    while digits
        out pop + 48
        digits = digits - 1
else
    outs "0" 
```

这是为此生成的代码：

```
>>>>>>>>>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++[<+>-]<[>>+>+<<<-]>>>[<<<+>>>-]<[[-]<<[>>>+>+<<<<-]>>>>[<<<<+>>>>-
]++++++++++<[>>+>+<<<-]>>>[<<<+>>>-]<[>+<-]>[<<[>>>+>+<<<<-]>>>>[<<<<+>>>>-]<[>+
<<-[>>[-]>+<<<-]>>>[<<<+>>>-]<[<-[<<->>[-]]+>-]<-]<<+>]<[>>+<<-]>>[<<<[>+>+<<-]>
>[<<+>>-]>-]<<[<<->>-]<[-]<[>>>>>>>>+<<<<<<<<-]>>>>>>>>>[>>]+[<<]>[>[>>]<+<[<<]>
-]<<<<<<<<<<[>>+>+<<<-]>>>[<<<+>>>-]+[<+>-]<<<[-]>>[<<+>>-]<<<[>>>+>+<<<<-]>>>>[
<<<<+>>>>-]++++++++++<[>>+<<-]>>[<[>>+>+<<<-]>>>[<<<+>>>-]<[>+<<-[>>[-]>+<<<-]>>
>[<<<+>>>-]<[<-[<<<->>>[-]]+>-]<-]<<<+>>]<[-]<<<<[-]>>>[<<<+>>>-]<<<[>>>+>+<<<<-
]>>>>[<<<<+>>>>-]<[<+>-]<]<[>+>+<<-]>>[<<+>>-]<[>+<[-]]+>[<[-]<[>>>+>+<<<<-]>>>>
[<<<<+>>>>-]<[[-]>>>>>>>>[>>]<[<[<<]<<<<<+>>>>>>>[>>]<-]<-<<[<<]<<<<<>++++++++++
++++++++++++++++++++++++++++++++++++++[<+>-]<.[-]<<<<[>>>>+>+<<<<<-]>>>>>[<<<<<+
>>>>>-]+[<->-]<<<<<[-]>>>>[<<<<+>>>>-]<<<<[>>>>+>+<<<<<-]>>>>>[<<<<<+>>>>>-]<[<+
>-]<]<[-]]<[>>++++++[<++++++++>-]<.[-]<[-]]<[-]<[-]>>>>>>>>>>>>[>[-]>]<<[-<<]<<<
<<<<<<<<<<<<<<[-]<[-] 
```

# azure - Azure 存储 CreateIfNotExist() 是否会导致额外的往返？

> ID：12569445
> 
> 赞同：6
> 
> 时间：2012-09-24T16:49:18.997
> 
> 标签：azure, azure-storage

大多数有关使用 Azure 存储的示例都包含`.CreateIfNotExist();`在程序流中。因此，如果我有一个放置 blob 的方法，但在执行 put 之前它执行`.CreateIfNotExist();`，这是否意味着对存储进行了额外的往返？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T17:02:16.407

是的。最好在角色启动 (WebRole.cs/WorkerRole.cs) 或应用程序启动 (Global.asax.cs) 时创建容器

# windows - 保持窗口的一部分始终可见

> ID：12569448
> 
> 赞同：0
> 
> 时间：2012-09-24T16:49:32.520
> 
> 标签：windows, winapi, user-interface

可以[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)在 Windows 上使用 API 来保持一个窗口始终位于其他窗口之上，并且 StackOverflow 上有很多问题可以解决这个问题。

可以只保持窗口的一部分始终可见吗？即在现有窗口内指定一个剪切区域，并只保持该部分可见？

一个用例如下（在 Windows 上）：

*   用户单击图标以运行应用程序。
*   用户突出显示要关注的屏幕部分（类似于 Windows 7 上的截图工具）
*   屏幕的高亮部分始终可见，即使其他窗口/程序移到所选区域上也是如此。

我知道其他应用程序也设置为最高会出现的问题。只是好奇这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:53:12.103

即使您将窗口的一部分更改为对下面的内容（带有剪辑区域）透明，它仍然会在透明部分上发生所有鼠标点击等。

您最好的选择是创建一个新的较小窗口，并在隐藏主窗口的同时使其位于最顶部。

# java - 使用 EclipseLink 将多个“选择案例”语句放入聚合命名查询

> ID：12569449
> 
> 赞同：3
> 
> 时间：2012-09-24T16:49:34.740
> 
> 标签：java, jpa, eclipselink, case, jpql

我正在使用 eclipselink v2.3 在我的 java 代码中编写一个简单的查询。这个查询必须简单地返回一个字符串和两个整数，我认为这没什么奇怪的，或者至少我认为，

我正在构建的查询如下：

```
q = entityManager.createQuery(
    "SELECT new com.myclass.CalculationQueryResult(transits.device.name,"
        + " SUM(case when transits.direction = 1 then 1 else 0 end) ,"
        + " SUM(case when transits.direction = 0 then 1 else 0 end)) from Transits_Log transits "
        + " where transits.device.name in :devices and transits.dateTime >= :startDate"
        + " and transits.dateTime < :endDate group by transits.device.name" + " order by transits.device.name",
    CalculationQueryResult.class); 
```

虽然它显然可以在 SQL Server（我们的本地对应物）中工作，但这在 JPQL 中不起作用。奇怪的是，这两个不同的`(SUM -> CASE)`子句（至少对我来说，我对 JPA 很陌生）彼此相等。所以，我决定从 JPQL 中取出原生 SQL 进行更深入的调查，问题就在那里。生成的 SQL 是这样的：

```
SELECT t0.Name, 
    **SUM(CASE  WHEN (t1.Direction = 1) THEN 1 ELSE 0 END)** , 
    **SUM(CASE WHEN (t1.Direction = 1) THEN 1 ELSE 0 END)** FROM dbo.ZZZ t0,
    YYYY t1 
    WHERE ((((t1.DeviceName IN ('XXXXX')) 
    AND (t1.DateTime >= {ts '2012-09-24 17:26:48.031'})) 
    AND (t1.DateTime < {ts '2012-09-24 18:26:48.031'})) 
    AND (t0.Name = t1.DeviceName)) GROUP BY t0.Name 
    ORDER BY t0.Name ASC 
```

如您所见，SQL 生成的语句在前两行是错误的，因为第一个 SUM 和第二个 SUM 应该是相反的，而它们不是。

我做错了什么吗？JPQL 是否支持多个嵌套的 CASE 和 SUM？有没有办法绕过错误（如果是这样的话）而不必直接编写本机 SQL 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:06:55.537

这很奇怪。您确定您的 JPQL 正确且已编译/部署吗？

你可以试试2.4版本吗？

如果仍然出现，请记录错误。

# android - Android 主题、全屏和操作栏

> ID：12569450
> 
> 赞同：2
> 
> 时间：2012-09-24T16:49:36.233
> 
> 标签：android, android-actionbar

我对具有操作栏的设备有一些问题。在手机上运行时，我想全屏显示，没有标题栏和状态栏。在平板电脑上，我想显示操作栏，但仍然没有标题栏。明斯克是 7 岁！当您切换全屏时，setTheme 方法不起作用，所以我不能有两个主题。有没有办法在全屏模式下显示操作栏？支持库不支持操作栏。

我首先要这样做的唯一原因是因为他们没有充分的理由通过将菜单键移动到操作栏来破坏向后兼容性。根据文档，简单的解决方案是将 android:showAsAction="ifRoom" 添加到菜单项中。但这绝对没有任何作用。

我还测试了我在谷歌上找到的许多可以切换全屏的解决方案。它们都不能在我的任何设备上运行，所以如果你自己没有使用过，请不要指向你读过的东西。

编辑：我解决了这个问题。问题似乎是您必须指定一个 Holo 主题才能恢复操作栏。否则不会显示。我在我的主要活动中添加了这个。

```
@Override
public void setTheme(int resid) {
    if(isTablet(this))
    {
        super.setTheme(android.R.style.Theme_Holo);
        return;
    }
    super.setTheme(resid);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:47:06.363

> 在平板电脑上我想显示操作栏但仍然没有标题栏

操作栏取代了标题栏。不存在具有操作栏*和*标题栏的活动的概念。

> 有没有办法在全屏模式下显示操作栏？

AFAIK，不，根据定义。

> 支持库不支持操作栏。

ActionBarSherlock 为 API 级别 7 和更高级别提供了操作栏的后向端口。

> 根据文档，简单的解决方案是将 android:showAsAction="ifRoom" 添加到菜单项中。但这绝对没有任何作用。

如果您没有操作栏，它肯定“什么都不做”。如果您想要全屏体验，则需要自行更换菜单。恕我直言，大多数全屏应用程序已经这样做了（例如，带有游戏风格“菜单”的游戏）。

# node.js - 意外的响应代码：将 socket.io 与 AppFog 一起使用时出现 502 错误

> ID：12569451
> 
> 赞同：18
> 
> 时间：2012-09-24T16:49:42.913
> 
> 标签：node.js, socket.io, appfog

# 错误

当用户打开[http://sync.aws.af.cm/](http://sync.aws.af.cm/)时，Google Chrome JavaScript 控制台会显示（几秒钟内）：

```
Unexpected response code: 502 error 
```

即使在用户刷新页面后，应用程序也应该记住文本区域的内容。该应用程序在本地运行，但当我将其上传到 AppFog 时无法运行，我怀疑问题是 502 错误。

您知道在这种情况下可能导致此错误的原因是什么吗？

# 我试过的

我尝试将`script src=<path_to_socket_io>`客户端中的路径从`/socket.io/socket.io.js`更改`node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js`为[此处](https://stackoverflow.com/questions/9446708/getting-the-basic-socket-io-sample-to-work)所述，但没有帮助。

我还尝试在 Heroku 而不是 AppFog 上提供应用程序，但在这种情况下，即使我指定了 socket.io 版本 0.9.6 ，我仍然遇到[这里描述的问题。](https://stackoverflow.com/questions/11674550/socket-io-node-js-on-heroku)

我还查看了以下问题，但到目前为止的评论似乎对我没有帮助。

[socket.io create 502 Bad Gateway on connect / websocket invalid](https://stackoverflow.com/questions/9908297/socket-io-creating-502-bad-gateway-on-connect-websocket-invalid)

[Socket.IO node.js websocket连接无效端口8081](https://stackoverflow.com/questions/12039690/socket-io-node-js-websocket-connection-invalid-port-8081)

[带有 node.js 的 socket.io 没有按预期工作](https://stackoverflow.com/questions/12016775/socket-io-with-node-js-not-working-as-expected)

# 相关服务器代码

这是相关的服务器代码：

```
var server = http.createServer(function (req, res) {
  ...
});

var io = require('socket.io').listen(server);

// Define events that can be triggered by the client
io.sockets.on('connection', function (socket) {
  socket.on('setServerVariable', function (value) {
    ...
  });
  ...
});

server.listen(process.env.VCAPP_APP_PORT || 3000); 
```

# 相关客户端代码

```
<script src="/socket.io/socket.io.js"></script>

<script>
  window.onload = function () {
    ...
    var socket = io.connect(window.location.hostname);
    socket.emit('getServerVariable');
    ...
  };
... 
```

# 服务器日志

```
$ af logs sync

====> /logs/stdout.log <====

info: socket.io started
debug: served static content /socket.io.js
debug: client authorized
info: handshake authorized veNnUVtoDTIz-oudG7Pa
debug: setting request GET /socket.io/1/websocket/veNnUVtoDTIz-oudG7Pa
debug: set heartbeat interval for client veNnUVtoDTIz-oudG7Pa
warn: websocket connection invalid
info: transport end (undefined)
debug: set close timeout for client veNnUVtoDTIz-oudG7Pa
debug: cleared close timeout for client veNnUVtoDTIz-oudG7Pa
debug: cleared heartbeat interval for client veNnUVtoDTIz-oudG7Pa
debug: served static content /socket.io.js
debug: client authorized
info: handshake authorized 6AKyhROUNjqujk_uG7Pb
debug: setting request GET /socket.io/1/websocket/6AKyhROUNjqujk_uG7Pb
debug: set heartbeat interval for client 6AKyhROUNjqujk_uG7Pb
warn: websocket connection invalid
info: transport end (undefined)
debug: set close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: cleared close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: cleared heartbeat interval for client 6AKyhROUNjqujk_uG7Pb
debug: setting request GET /socket.io/1/xhr-polling/6AKyhROUNjqujk_uG7Pb?t=1348504130465
debug: setting poll timeout
debug: client authorized for 
debug: clearing poll timeout
debug: xhr-polling writing 1::
debug: set close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: setting request GET /socket.io/1/xhr-polling/6AKyhROUNjqujk_uG7Pb?t=1348504130724
debug: setting poll timeout
debug: discarding transport
debug: cleared close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: xhr-polling received data packet 5:::{"name":"getServerVariable"}
debug: clearing poll timeout
debug: xhr-polling writing 5:::{"name":"printLog"}
debug: set close timeout for client 6AKyhROUNjqujk_uG7Pb
server.js: getServerVariable: 
debug: setting request GET /socket.io/1/xhr-polling/6AKyhROUNjqujk_uG7Pb?t=1348504130980
debug: setting poll timeout
debug: clearing poll timeout
debug: xhr-polling writing ���23���5:::{"name":"printLog"}���39���5:::{"name":"setItemValue","args":[""]}���23���5:::{"name":"printLog"}
debug: set close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: discarding transport
debug: cleared close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: setting request GET /socket.io/1/xhr-polling/6AKyhROUNjqujk_uG7Pb?t=1348504131261
debug: setting poll timeout
debug: discarding transport
debug: cleared close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: clearing poll timeout
debug: xhr-polling writing 8::
debug: set close timeout for client 6AKyhROUNjqujk_uG7Pb
debug: xhr-polling closed due to exceeded duration
debug: setting request GET /socket.io/1/xhr-polling/6AKyhROUNjqujk_uG7Pb?t=1348504151659
debug: setting poll timeout
debug: discarding transport
debug: cleared close timeout for client 6AKyhROUNjqujk_uG7Pb 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-24T23:27:33.630

AppFog 还不支持 websocket。在他们最近收购 Nodester 之后，他们宣布它将在几个月内推出。

通过添加`io.set('transports', ['xhr-polling']);`，您只是将传输设置为 ajax 长轮询。默认情况下，Socket.io 根据浏览器功能和当前连接确定最佳传输方式。Websockets 是理想的，当它可用时，但如果它不是，Socket.io 将在其他传输中回退到 xhr-polling。

我自己在使用 CloudFlare 时收到了同样的`502 unexpected response / bad gateway`错误，它也无法通过其基于 nginx 的基础设施代理 websocket 连接（请注意，截至 2014 年，如果您使用的是高级计划，Cloudflare 可以代理 websockets）。

# python - 如何识别python中的numpy类型？

> ID：12569452
> 
> 赞同：123
> 
> 时间：2012-09-24T16:49:46.857
> 
> 标签：python, numpy, duck-typing, dynamic-typing

如何可靠地确定对象是否具有 numpy 类型？

我意识到这个问题违背了鸭子类型的哲学，但想法是确保一个函数（使用 scipy 和 numpy）永远不会返回一个 numpy 类型，除非它被一个 numpy 类型调用。 [这出现在另一个问题的解决方案中，](https://stackoverflow.com/questions/12565735/scipy-function-always-returns-a-numpy-array)但我认为确定对象是否具有 numpy 类型的一般问题与应该将它们分开的原始问题相距甚远。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-09-24T17:36:59.283

使用内置`type`函数获取类型，然后您可以使用`__module__`属性找出它的定义位置：

```
>>> import numpy as np
a = np.array([1, 2, 3])
>>> type(a)
<type 'numpy.ndarray'>
>>> type(a).__module__
'numpy'
>>> type(a).__module__ == np.__name__
True 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-09-24T16:49:46.857

我想出的解决方案是：

```
isinstance(y, (np.ndarray, np.generic) ) 
```

但是，[并不是 100% 清楚](http://docs.scipy.org/doc/numpy/reference/generated/numpy.generic.html?highlight=generic#numpy.generic)所有 numpy 类型都保证是`np.ndarray`or `np.generic`，这可能不是版本健壮的。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-10-16T02:30:37.143

老问题，但我用一个例子想出了一个明确的答案。保持问题新鲜不会有什么坏处，因为我遇到了同样的问题并且没有找到明确的答案。关键是确保你已经`numpy`导入，然后运行`isinstance`bool。虽然这看起来很简单，但如果您正在对不同的数据类型进行一些计算，那么这个小检查可以在您开始一些 numpy 矢量化操作之前作为快速测试。

```
##################
# important part!
##################

import numpy as np

####################
# toy array for demo
####################

arr = np.asarray(range(1,100,2))

########################
# The instance check
######################## 

isinstance(arr,np.ndarray) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-24T18:20:19.877

这实际上取决于你在寻找什么。

*   如果你想测试一个序列是否真的是 a `ndarray`， a`isinstance(..., np.ndarray)`可能是最简单的。确保不要在后台重新加载 numpy，因为模块可能不同，否则，你应该没问题。`MaskedArrays`, `matrix`,`recarray`都是 的子类`ndarray`，所以应该设置。
*   如果你想测试一个标量是否是一个 numpy 标量，事情会变得有点复杂。你可以检查它是否有一个`shape`和一个`dtype`属性。您可以将其`dtype`与基本 dtypes 进行比较，您可以在 中找到其列表`np.core.numerictypes.genericTypeRank`。请注意，此列表的元素是字符串，因此您必须执行`tested.dtype is np.dtype(an_element_of_the_list)`...

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-09-24T17:04:47.733

要获取类型，请使用内置`type`函数。使用`in`运算符，您可以通过检查它是否包含字符串来测试该类型是否为 numpy 类型`numpy`；

```
In [1]: import numpy as np

In [2]: a = np.array([1, 2, 3])

In [3]: type(a)
Out[3]: <type 'numpy.ndarray'>

In [4]: 'numpy' in str(type(a))
Out[4]: True 
```

（顺便说一下，这个例子是在[IPython](http://ipython.org/)中运行的。对于交互式使用和快速测试来说非常方便。）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-01T02:16:16.107

请注意，它本身`type(numpy.ndarray)`是 a`type`并注意布尔和标量类型。如果它不直观或不简单，不要太沮丧，一开始会很痛苦。

另请参阅： - [https://docs.scipy.org/doc/numpy-1.15.1/reference/arrays.dtypes.html](https://docs.scipy.org/doc/numpy-1.15.1/reference/arrays.dtypes.html) - [https://github.com/machinalis/mypy-data/tree/master/numpy-我的](https://github.com/machinalis/mypy-data/tree/master/numpy-mypy)

```
>>> import numpy as np
>>> np.ndarray
<class 'numpy.ndarray'>
>>> type(np.ndarray)
<class 'type'>
>>> a = np.linspace(1,25)
>>> type(a)
<class 'numpy.ndarray'>
>>> type(a) == type(np.ndarray)
False
>>> type(a) == np.ndarray
True
>>> isinstance(a, np.ndarray)
True 
```

布尔值的乐趣：

```
>>> b = a.astype('int32') == 11
>>> b[0]
False
>>> isinstance(b[0], bool)
False
>>> isinstance(b[0], np.bool)
False
>>> isinstance(b[0], np.bool_)
True
>>> isinstance(b[0], np.bool8)
True
>>> b[0].dtype == np.bool
True
>>> b[0].dtype == bool  # python equivalent
True 
```

标量类型更有趣，请参阅： - [https://docs.scipy.org/doc/numpy-1.15.1/reference/arrays.scalars.html#arrays-scalars-built-in](https://docs.scipy.org/doc/numpy-1.15.1/reference/arrays.scalars.html#arrays-scalars-built-in)

```
>>> x = np.array([1,], dtype=np.uint64)
>>> x[0].dtype
dtype('uint64')
>>> isinstance(x[0], np.uint64)
True
>>> isinstance(x[0], np.integer)
True  # generic integer
>>> isinstance(x[0], int)
False  # but not a python int in this case

# Try matching the `kind` strings, e.g.
>>> np.dtype('bool').kind                                                                                           
'b'
>>> np.dtype('int64').kind                                                                                          
'i'
>>> np.dtype('float').kind                                                                                          
'f'
>>> np.dtype('half').kind                                                                                           
'f'

# But be weary of matching dtypes
>>> np.integer
<class 'numpy.integer'>
>>> np.dtype(np.integer)
dtype('int64')
>>> x[0].dtype == np.dtype(np.integer)
False

# Down these paths there be dragons:

# the .dtype attribute returns a kind of dtype, not a specific dtype
>>> isinstance(x[0].dtype, np.dtype)
True
>>> isinstance(x[0].dtype, np.uint64)
False  
>>> isinstance(x[0].dtype, np.dtype(np.uint64))
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: isinstance() arg 2 must be a type or tuple of types
# yea, don't go there
>>> isinstance(x[0].dtype, np.int_)
False  # again, confusing the .dtype with a specific dtype

# Inequalities can be tricky, although they might
# work sometimes, try to avoid these idioms:

>>> x[0].dtype <= np.dtype(np.uint64)
True
>>> x[0].dtype <= np.dtype(np.float)
True
>>> x[0].dtype <= np.dtype(np.half)
False  # just when things were going well
>>> x[0].dtype <= np.dtype(np.float16)
False  # oh boy
>>> x[0].dtype == np.int
False  # ya, no luck here either
>>> x[0].dtype == np.int_
False  # or here
>>> x[0].dtype == np.uint64
True  # have to end on a good note! 
```

# android - android异步数据发布

> ID：12569455
> 
> 赞同：1
> 
> 时间：2012-09-24T16:49:57.750
> 
> 标签：android, post, android-asynctask

我是android开发的新手。我正在尝试将数据异步发布到服务器。我有一个文本视图 message1，其数据被发布到 Web 服务。我的代码如下

```
public class Main extends Activity {

    ProgressDialog dialog;
    final EditText message1 = (EditText)  findViewById(R.id.editText1) ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

            //generate GCM id ended
              StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
              StrictMode.setThreadPolicy(policy); 
    }

        private class Submitdata extends AsyncTask<String, Void, String>
        {

            @Override
            protected String doInBackground(String... arg0) {

                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://xyz.com/imran/msg.php");
                try {
                    // Add your data
                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                    nameValuePairs.add(new BasicNameValuePair("message", message1.getText().toString()));

                   httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    // Execute HTTP Post Request
                   //Toast.makeText(this, resId, duration)
                    HttpResponse response = httpclient.execute(httppost);
//                  Intent intent = new Intent(Register.this,Emergency.class);
//                  Register.this.startActivity(intent);        

                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                }

                // TODO Auto-generated method stub
                return null;
            }

            protected void onPreExecute() {
                dialog = ProgressDialog.show(Main.this, null, "Loading", false);

            }
            @Override
            protected void onPostExecute(String result) {
             dialog.dismiss();
            }

        }

    //define function for doing in background like submit data

        public void add_data()
        {
            Submitdata task = new Submitdata();
            task.execute();
        } 
```

每次我尝试运行应用程序时，应用程序都会崩溃。我用谷歌搜索了这个问题，许多帖子说这是由于 onPostExecute() 方法上的空指针异常。任何人都可以帮助我更改我的代码以解决问题。提前致谢

我的 Logcat 输出：

```
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.os.Looper.loop(Looper.java:137)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.app.ActivityThread.main(ActivityThread.java:4424)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at java.lang.reflect.Method.invokeNative(Native Method)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at java.lang.reflect.Method.invoke(Method.java:511)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at dalvik.system.NativeStart.main(Native Method)
09-24 22:25:32.108: E/AndroidRuntime(18478): Caused by: java.lang.NullPointerException
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.app.Activity.findViewById(Activity.java:1794)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at com.mpidc2.management.Main.<init>(Main.java:34)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at java.lang.Class.newInstanceImpl(Native Method)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at java.lang.Class.newInstance(Class.java:1319)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
09-24 22:25:32.108: E/AndroidRuntime(18478):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
09-24 22:25:32.108: E/AndroidRuntime(18478):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:14:50.933

移动`EditText message1 = (EditText) findViewById(R.id.editText1);`下面的行`setContentView(R.layout.activity_main);`

它崩溃的原因是您试图在设置 Activity 的视图之前获取对 EditText 的引用。

# ios - AdMob ARMv7s 支持

> ID：12569457
> 
> 赞同：1
> 
> 时间：2012-09-24T16:50:05.927
> 
> 标签：armv7, armv7s 相关, ios, admob, armv7

请注意，虽然这个问题被标记为[armv7](/questions/tagged/armv7 "显示标记为“armv7”的问题")，但它与[armv7s 相关](/questions/tagged/armv7s "显示标记为“armv7s”的问题")。无法创建新标签。

我正在使用最新的 AdMob SDK (6.1.5)，但似乎 AdMob 还没有为 armv7s 构建

> 架构 armv7s 的未定义符号：“_OBJC_CLASS_$_GADBannerView”，引用自：libCompanyName.a(AdWhirlAdapterGoogleAdMobAds.o) 中的 objc-class-ref

如果有人让它工作，你能解释一下你的解决方法吗？

否则，是否有人知道任何官方文档解释何时更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:52:13.237

更新到 Admob 6.2.0 或更高版本。

请参阅这篇文章：http: [//googleadsdeveloper.blogspot.com/2012/09/migrating-to-admob-v62-for-ios.html](http://googleadsdeveloper.blogspot.com/2012/09/migrating-to-admob-v62-for-ios.html)。

此外，包括 AdSupport 框架并删除 -all_load 标志。但是，您必须使用 -ObjC 标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:53:46.303

我对 libspotify sdk 有这个问题。我最终要做的是项目/构建设置/架构并将构建活动架构切换为是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:50:12.937

在 Target / Build Settings 中，Xcode 4.5 的默认值应该为 Architecture 设置显示“Standard (armv7, armv7s)”。

将鼠标悬停并单击 + 以添加新条目：

"Any iOS SDK" => "armv7" //你需要手动输入。

在 iPhone 5 上构建应用程序时，这对我有用，只要包含 Default-568h@2x.png 文件，构建 4" iPhone 5 优化 UI 就足够了。

但是，我忽略了您是否可以提交仅 armv7 的构建以及 Apple 是否会将其视为“iPhone 5”应用程序。我也忽略了适当的 armv7s 编译会给您带来多少额外的优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T20:25:07.440

添加这些框架：

AdSupport.framework StoreKit.framework

# sql-server - Azure SQL 报告的本地化

> ID：12569462
> 
> 赞同：1
> 
> 时间：2012-09-24T16:50:38.717
> 
> 标签：sql-server, reporting-services, azure, azure-sql-database, azure-vm-role

本地化 Azure SQL 报告报告的推荐方法是什么？
我在单独的程序集中找到了一些带有资源文件的文章，例如： http: [//www.codeproject.com/Articles/294636/Localizing-SQL-Server-Reporting-Services-Reports](http://www.codeproject.com/Articles/294636/Localizing-SQL-Server-Reporting-Services-Reports)
但我认为我只能这样做运行我自己的服务器，因为我不知道如何将单独的程序集部署到 azure 报告服务器上。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:17:37.460

**SQL Azure 报告**是一个封闭系统。如果需要自定义报告服务器以进行本地化，则需要[运行 SQL Azure VM](https://www.windowsazure.com/en-us/manage/windows/common-tasks/install-sql-server/)并配置**Reporting Services**。配置完成后，您就可以完全访问服务器来部署所需的任何程序集。

# python - 在大型项目中选择 Scons 和 Waf

> ID：12569463
> 
> 赞同：16
> 
> 时间：2012-09-24T16:50:43.487
> 
> 标签：python, caching, scons, waf, build-tools

我们正在考虑将一个非常大的项目从使用 GNU Make 转换为一些更现代的构建工具。我目前的建议是使用 SCons 或 Waf。

目前：

*   构建时间约为 15 分钟。
*   大约 100 名开发人员。
*   大约 10% 的代码是 C/C++/Fortran 其余的是 Ada（使用 gnatmake）。

改进的潜在希望/收益是

*   共享编译器缓存以减少构建时间并需要磁盘空间
*   更容易维护

SCons 能否很好地完成这项任务？我已经看到关于它的评论没有像 Waf 那样缩放。然而，这些都是几年前的。scons 在过去几年的表现有进步吗？如果不是，那么与 Waf 相比，其性能不佳的原因是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T15:48:56.997

我一直在为我们公司开发一个围绕`waf`. 它针对 Fedora、Ubuntu、Arch、Windows、Mac OSX，并将推广到我们的嵌入式设备上，在各种主机上进行交叉编译。

我们已经找到了`waf`通过工具、功能和其他方法实现包含可扩展性的方法，这使得为我们的项目定制和扩展变得非常容易。

就个人而言，我认为它很棒，并且发现它很好地将接口抽象为集成的不同工具。

不幸的是，我对 Scons 没有深入的经验，但对 GNU Make/Autotools 有很多经验。在评估构建工具之后，我们决定采用的决定`waf`是，我们需要在任何地方都能正常工作的东西，这使得我们的构建工具得到了 python 的支持并且速度很快。我的决定是基于[这些结果](http://retropaganda.info/~bohan/work/psycle/branches/bohan/wonderbuild/benchmarks/time.xml)并从那里开始的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T17:15:55.737

过去，SCons 的性能不高，但从那时起已经添加了许多改进。

我喜欢这两种选择，并且不得不在大约 6 个月前做出同样的决定。我选择了 SCons，因为它似乎拥有更大的用户和支持基础。

[这](http://www.scons.org/wiki/SconsVsOtherBuildTools)是一个有用的链接，将 SCons 与其他构建工具进行比较。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-20T20:26:43.490

我个人更喜欢 Waf，因为它更灵活并且没有变体目录问题。

# 华夫

## 优点：

*   单独的变体目录；您不会将源文件夹与目标文件混在一起（SCons 也有此功能，但默认情况下未启用，需要尝试几次才能正常工作）
*   非常灵活
*   自动依赖排序
*   适用于许多 Python 版本（CPython 2、CPython 3、Jython 和 PyPy）
*   您将它与您的应用程序一起分发，因此用户只需要 Python

## 缺点：

*   扩展的***痛苦***
*   文档严重不足（尽管示例有所帮助）
*   不能很好地区分 GCC 和 Clang（不确定 SCons 是否也有这个问题）

# 缺点

## 优点：

*   比 Waf 简单得多
*   比 Waf 更容易扩展（见[这里](http://zerokspot.com/weblog/2007/11/29/extending-scons-the-short-way/)）
*   记录得更好一些

## 缺点：

*   [可扩展性问题](http://electric-cloud.com/blog/2010/03/how-scalable-is-scons/)（请注意，[SCons 实际上并没有那么糟糕](http://www.scons.org/wiki/WhySconsIsNotSlow)，购买它仍然会随着大小的增加而变慢）
*   丑陋（这是100％个人意见）

# 底线

这取决于你在寻找什么。总的来说，Waf 似乎非常擅长管理大型项目（不仅仅是因为速度），但是，如果您需要扩展它，请寻找其他地方。另一方面，SCons 更容易使用。

如果您决定使用 Waf，只需将您的问题发布到[邮件列表](https://groups.google.com/forum/#!forum/waf-users)即可。

# .net - 使用 youtube sdk 上传简历损坏

> ID：12569465
> 
> 赞同：0
> 
> 时间：2012-09-24T16:50:51.797
> 
> 标签：.net, youtube, youtube-api

是否可以使用 .net 的 Google 数据 API 恢复损坏的上传？我已经从[这里下载了 youtube sdk](https://code.google.com/p/google-gdata/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:00:13.227

[此代码示例](https://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/YouTubeUploader/YouTubeUploader/YouTubeUploader.cs)作为 .NET GData 客户端库的一部分打包，包括使用可恢复上传流的示例。

# jquery - jquery的data(key,val)和attr(data-key,data-val)有什么区别

> ID：12569466
> 
> 赞同：1
> 
> 时间：2012-09-24T16:50:52.913
> 
> 标签：jquery

如果您尝试使用方法更改数据属性值，`data()`则不会得到与方法相同的结果`attr(data-key, data-value)`。

例如，我`data-hovered=true`用来存储元素的一些状态。如果您对`element[data-hovered=true]`选择器有一些 css 样式，则使用`data()`方法来分配值`true`将`data-hovered`不会生效。只有使用`attr()`它才会有效果。

那么这两种方法有什么区别呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T16:52:54.857

.data() 用于在对象中存储数据，但在 HTML5 的“版本”中，它还可以访问元素的 data-* 属性。

但是，它不能改变这些，因为它主要用于将数据存储在对象等中，而不是物理上存储在元素上。

因此 attr() 是更改元素属性值的唯一方法，例如 data-* 属性。

看：

*   [jQuery 数据与属性？](https://stackoverflow.com/questions/7261619/jquery-data-vs-attr)
*   [http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)
*   [http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# ruby - 无法在 smartos64 上使用 zlib 编译 ruby 1.8.6

> ID：12569472
> 
> 赞同：0
> 
> 时间：2012-09-24T16:51:14.813
> 
> 标签：ruby, solaris, zlib, smartos

我正在尝试在 smartos 上使用 zlib 安装 ruby​​ 1.8.6，ruby 编译正常，但是当我运行位于 ext/zlib 文件夹中的 ruby​​ extraconf.rb 时，控制台显示：

```
[admin@7dabb5d6-09d4-42b3-bb40-36a7d0a0fabe ~/src/ruby-1.8.6/ext/zlib]$ ruby extconf.rb
checking for deflateReset() in -lz... no
checking for deflateReset() in -llibz... no
checking for deflateReset() in -lzlib... no
checking for deflateReset() in -lzdll... no

[admin@7dabb5d6-09d4-42b3-bb40-36a7d0a0fabe ~/src/ruby-1.8.6/ext/zlib]$ make
make: Nothing to be done for `all'.
[admin@7dabb5d6-09d4-42b3-bb40-36a7d0a0fabe ~/src/ruby-1.8.6/ext/zlib]$ 
```

如何在 smartos 上编译 zlib？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:33:49.113

好的，我解决了我的运行问题：

```
ruby extconf.rb  --with-zlib-include=/usr/local/include/ --with-zlib-lib=/usr/local/lib 
```

谢谢

# java - 如何从 eclipse/osgi 应用程序中包含对 jar 文件的依赖关系？

> ID：12569474
> 
> 赞同：9
> 
> 时间：2012-09-24T16:51:29.303
> 
> 标签：java, eclipse, plugins, eclipse-plugin, osgi

我创建了一个 Eclipse 4 应用程序，并且我需要`jar`提供一个功能作为我的应用程序的一部分（这可以是任何东西，例如`log4j`让它变得微不足道）。
我添加了`jar`作为我项目类路径（`Right Click->Configure Build Path`）的一部分，但在运行时我的服务因`ClassNotFound`错误而失败（我猜是来自 OSGI？）。
无论如何搜索结果，至少据我所知，我应该将 jar 添加为另一个 jar`Plugin`并创建从我的应用程序/服务到这个新插件的依赖项。
即我创建了一个`Plugin Project from Existing JAR archives`.
这次设置成功了。
因此，如果我理解这一点，在为 Eclipse/OSGi 开发时，我们不应该`jars`直接添加类路径，而是通过插件添加它们（为什么？）。
**问题：**如果到目前为止我是正确的，那么`jars`开发项目时要包括的标准做法是什么？
定义/创建一个`Plugin Project from existing JAR archives`并添加**所有**需要的第三方库，*或者*根据需要有一个不同的插件项目`jar` *或者*其他什么？
对不起，如果我的术语不准确。我是 OSGi 和 Eclipse 编程的新手

**注意：**在谈论时，`jars`我指的不是其他 OSGi 服务。我指的是使用应用程序的许多部分都需要的现成、可靠的第三方库的规范。例如`log4j`或一个 xml 解析库`apache commons`等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T06:52:19.917

对于运行时，它始终是 Manifest 和那里的标头，它们控制着你的包类路径中的内容。可以通过三种方式访问​​ jar：

1.  导入包标头。这是推荐的方式。您为每个需要的包定义一个导入。您要访问的 jar 必须作为包部署在运行时中。它还需要导出所有需要的包。

2.  要求捆绑。这是访问捆绑包的另一种方式。您定义所需捆绑包的 ID 并查看它导出的所有包。由于 Require-Bundle 将您更紧密地绑定到另一个捆绑包，因此应该首选 Import-Package 方式。

3.  捆绑类路径。这允许将 jar 添加到您嵌入到您自己的包中的类路径中。只有当其他方法不起作用时，这才应该是最后的手段。将其与其他方法混合时，您可能会遇到令人讨厌的类加载问题。

您可以在 maven Central 中找到许多预构建的捆绑包。今天的许多 jars 已经包含一个 OSGi 清单。对于不正确的情况，许多 jar 被 servicemix 重新打包为捆绑包。请参阅 groupId：org.apache.servicemix.bundles。还有 spring bundle 存储库，您可以在其中找到更多信息。

下面我列出了一些您可能想要阅读的资源：

[http://www.aqute.biz/Blog/2007-02-19](http://www.aqute.biz/Blog/2007-02-19)

[http://wiki.osgi.org/wiki/Import-Package](http://wiki.osgi.org/wiki/Import-Package)

[http://wiki.osgi.org/wiki/Require-Bundle](http://wiki.osgi.org/wiki/Require-Bundle)

[http://www.vogella.com/blog/2009/03/27/required-bundle-import-package/](http://www.vogella.com/blog/2009/03/27/required-bundle-import-package/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T17:09:36.220

您提到的示例可作为 OSGi 捆绑包提供，因此您无需自己将它们捆绑在一起。您通常不会在 OSGi 中使用直接的 jar 依赖项，而是通常使用包或捆绑包依赖项。在您所指的 log4j 示例中，您应该使用**导入包**，因为可以有多个捆绑提供程序（较新的 log4j jar、较旧的 log4j 的 springsource 捆绑版本、slf4j 实现......）。这将使您的代码依赖项与实际提供程序断开连接。

这些依赖项是通过您的清单维护的，而不是您的项目类路径。在 Eclipse 插件项目中，项目构建类路径派生自清单中的条目。

即使您不使用服务，所有代码依赖项仍然通过清单维护。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T06:23:44.747

我们在项目中遇到的问题完全相同。我们有一些不兼容 OSGi 的遗留 jar，我们创建与 BundleContent 平行的 lib 文件夹并将其添加到清单的类路径部分。

```
Bundle-ClassPath: .,

 /lib/<legacy jar>.jar 
```

如果只有一个捆绑包要使用它，则无需不必要地导出和导入包，

# c# - 使用 iTextSharp 将数据写入 PDF 效果很好，但 Acrobat Reader 在关闭文件时询问“是否要保存更改”

> ID：12569475
> 
> 赞同：6
> 
> 时间：2012-09-24T16:51:33.347
> 
> 标签：c#, pdf-generation, itextsharp

我正在使用 iTextSharp 5.3.2.0 将信息添加到包含 W-2 表单的现有 PDF 文件中。一切正常，PDF 文件在写入浏览器的响应流时看起来很棒；但是，当用户查看完 PDF 后，系统会询问他“是否要在关闭前保存对 'W2.pdf' 的更改？” 每次他从网页查看文档时。

在试图缩小问题范围时，我实际上已经删除了所有修改，但问题仍然存在。这是我的代码的简单版本，我的数据写入调用被注释掉了：

```
PdfReader pdfReader = new PdfReader(dataSource.ReportTemplate);

using(MemoryStream outputStream = new MemoryStream())
using (PdfStamper pdfStamper = new PdfStamper(pdfReader, outputStream))
{
   //dataSource.DrawDataFields(pdfStamper);
   pdfStamper.FormFlattening = true;
   return outputStream;
} 
```

在这种情况下，“空”PDF 被写入浏览器并且看起来不错，但是当我关闭 Acrobat 窗口时，仍然会被问到“是否要保存”。

在这一点上，我认为源 PDF 文件有问题。但是，当我将 PDF 文件的原始字节发送回浏览器时，在使用下面的代码时，不会询问我“是否要保存”的问题。

```
byte[] bytes = File.ReadAllBytes(dataSource.ReportTemplate);

using (MemoryStream outputStream = new MemoryStream())
{
    outputStream.Write(bytes, 0, bytes.Length);
    return outputStream;
} 
```

我的结论是 iTextSharp 在打开 PDF 并将字节写入流的过程中对 PDF 做了一些“坏事”，但我是 iTextSharp 的新手，很容易遗漏一些东西。

FWIW，这是我们正在谈论的 Acobat Reader 10.1.4。

编辑：用作模板的原始 PDF 大小约为 80K。如果我查看通过浏览器向下传输的临时文件，iTextSharp 编写的 PDF 文件大约为 150K。但是，当我对 Acrobat Reader 提出的“保存更改”问题回答“是”时，生成的文件再次约为 80K。iTextSharp 肯定对这个文件做了一些意想不到的事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T19:07:37.227

非工作：

```
public byte[] MergeDataByDrawing(int copies)
{
    PdfReader pdfReader = new PdfReader(reportTemplate);

    using (MemoryStream outputStream = new MemoryStream())
    using (PdfStamper pdfStamper = new PdfStamper(pdfReader, outputStream))
    {
        pdfStamper.FormFlattening = true;
        return outputStream.GetBuffer();
    }
} 
```

在职的：

```
public byte[] MergeDataByDrawing(int copies)
{
    PdfReader pdfReader = new PdfReader(reportTemplate);

    using (MemoryStream outputStream = new MemoryStream())
    using (PdfStamper pdfStamper = new PdfStamper(pdfReader, outputStream))
    {
        pdfStamper.FormFlattening = true;
        return outputStream.ToArray();
    }
} 
```

似乎 GetBuffer 方法有问题。我不明白为什么，但我会接受结果！

[支持 MKL 给我一个想法](http://thread.gmane.org/gmane.comp.java.lib.itext.general/63197)和[Fredrik 在正确的时间给出正确的例子](http://blog.tacticalnuclearstrike.com/2010/09/building-pdfs-in-asp-net-mvc-2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:00:36.923

见[http://itextpdf.com/history/?branch=52&node=521](http://itextpdf.com/history/?branch=52&node=521)

> 修正 AcroForms：在某些情况下，Adobe Reader X 会在您关闭扁平化的 PDF 表单后询问您是否要“保存更改”。这是由于 /AcroForm 字典中存在一些不必要的条目（例如在使用 OOo 创建表单时添加的）。

我是修复这个错误的布鲁诺。我记得它发生在 Adob​​e Reader 10 中，但不是在 Adob​​e Reader 9 中。我能够修复这个错误，因为报告它的人是一位客户，他向我发送了显示此行为的 PDF。

如果您愿意分享您的 PDF，我们可以查看并查看应该从`/AcroForm`字典中删除哪些其他条目。我只删除了使用 Open Office 创建表单时添加的那些。如果您不想共享 PDF，原因将始终是个谜。

# silverlight - 如何增加独立存储的大小？

> ID：12569476
> 
> 赞同：0
> 
> 时间：2012-09-24T16:51:46.107
> 
> 标签：silverlight, silverlight-5.0

我尝试使用以下代码增加 IsoLatedStorage 大小：

```
using (IsolatedStorageFile iso = IsolatedStorageFile.GetUserStoreForApplication())
{
   if (iso.FileExists(fileName))
     iso.DeleteFile(fileName);

   iso.IncreaseQuotaTo(iso.Quota + memoryStream.Length);
   //.....
} 
```

但我不能，我检查了iso.Quota之前和IncreaseQuotaTo调用之后，它没有改变。看起来像代码 iso.IncreaseQuotaTo(iso.Quota + memoryStream.Length); 不工作。然后我得到错误：没有足够的空间来执行操作。当我尝试将memoryStream 写入IsolatedStream 时。

不知道为什么。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:41:14.757

我不确定这是否是您的问题，也许没有增加，因为如果您想增加隔离存储配额，您必须询问用户（使用消息框或类似的东西），否则我认为不会去工作

# java - 从 Java 应用程序执行报告时如何指定子数据集查询

> ID：12569479
> 
> 赞同：1
> 
> 时间：2012-09-24T16:51:59.030
> 
> 标签：java, dataset, jasper-reports, report

我有一个主报告，其中有一个主查询和一个*表*（带有*subdataset*），其中有自己的*Query*。

我知道如何为主报告指定*查询*，但我不知道如何在我的创建报告的 Java 代码中为*子数据集指定**查询。*

 *有人可以帮忙吗？

我的代码：

```
public static java.sql.Connection cx = Connexion.SetConOn();

public static void Create report(String Query, String model, String title, String art) {
    try {
        JRDesignQuery jrd = new JRDesignQuery();
        JasperDesign design = JRXmlLoader.load(model);
        jrd.setText(Query);
        design.setQuery(jrd);
        Map map = new HashMap();
        JasperReport etat = JasperCompileManager.compileReport(design);
        JasperPrint print = JasperFillManager.fillReport(etat, map, cx);
        File f = new File("C:\\" + fdg);
        f.mkdir();
        JasperExportManager.exportReportToPdfFile(print, f.getPath() + "\\" + title + ".pdf");
        JasperViewer jv = new JasperViewer(print, false, Locale.FRENCH);

        try {
            java.awt.image.BufferedImage bi = javax.imageio.ImageIO.read(jv.getClass().getResource("/cycloplan/Images/Burn-icon1.png"));
            javax.swing.ImageIcon myImg = new javax.swing.ImageIcon(bi);
            jv.setIconImage(myImg.getImage());

        } catch (java.io.IOException ex) {
            ex.printStackTrace();
        }

        jv.setTitle(title);
        jv.setAlwaysOnTop(true);
        jv.setVisible(true);
    } catch (JRException ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:59:28.070

该类`JasperDesign`有几种不同的方式来访问子数据集；看看 javadoc [[链接]](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/design/JasperDesign.html)。我认为以下代码应该可以设置子数据集查询，`subQueryString`您要使用的查询在哪里，并且`datasetName`是 JRXML 中子数据集元素的名称。

```
JRDesignQuery subQuery = new JRDesignQuery();
subQuery.setText(subQueryString);
Map<String, JRDataset> datasetMap = design.getDatasetMap();
JRDesignDataset subDataset = (JRDesignDataset) datasetMap.get(datasetName);
subDataset.setQuery(subQuery); 
```

(* 我还没有实际测试过这段代码。YMMV)*

# spring - andOperator 的 Spring Mongo 标准问题

> ID：12569480
> 
> 赞同：1
> 
> 时间：2012-09-24T16:52:02.683
> 
> 标签：spring, mongodb

我正在尝试使用 spring Criteria 创建一个动态 mongoDB 查询。我的查询是：

```
Criteria.where(key1).is(value1).and(key2).is(value2) 
```

键/值的数量不是固定的，但可以改变。

我尝试使用`andOperator`，但不适合我的情况。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T13:36:57.833

[这篇文章解释了一个类似的问题： Spring Mongo criteria](https://stackoverflow.com/questions/11698689/spring-mongo-criteria-querying-twice-the-same-field) querying two same field

这就是你想要做的：

```
Criteria criteria = new Criteria().andOperator(
                                    Criteria.where("key1").is(value1),  
                                    Criteria.where("key2").is(value2));
// to print the mongodb query for debug purposes
// System.out.println(criteria.getCriteriaObject());

// execute with a mongoTemplate
List<YourClass> documents = mongoTemplate.find(new Query(criteria), YourClass.class); 
```

# java - NetBeans 平台两次捕获一个异常

> ID：12569481
> 
> 赞同：1
> 
> 时间：2012-09-24T16:52:05.410
> 
> 标签：java, hibernate, netbeans, platform

嗨，我是 Netbeans 平台的开发和应用程序，我无法捕捉到这个异常：

org.hibernate.exception.ConstraintViolationException

我使用以下行：

```
 try { 
           il.delete(lote);

       }
       catch (HibernateException he) {
           NotifyDescriptor error = new NotifyDescriptor.Message(ERROR+he.getMessage(), NotifyDescriptor.ERROR_MESSAGE);
           DialogDisplayer.getDefault().notify(error);
       } 
```

我的界面可能会抛出这个异常，这个异常可以在TopComponent中被捕获。问题是我收到了两次，一次是我的通知，另一次来自平台。我该如何解决这个问题？

![错误图像](../Images/5fb072129bc0566dd4847dac0ac98107.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:00:53.640

在上述代码的情况下，您不可能两次收到异常。因为只有一个方法调用返回异常。什么可能是您可能会请求它两次，以便您多次收到异常。

您可以做的是添加日志检查是否在单击时多次调用方法并修复该问题。

# c# - 如何将其转换为 ViewModel？

> ID：12569489
> 
> 赞同：-3
> 
> 时间：2012-09-24T16:52:37.907
> 
> 标签：c#, asp.net-mvc-3, viewmodel

伙计们。我有这个场景：

```
<ul>
    <li>
        <select>
            <option value="1">First Option</option>
            <option value="2">Second Option</option>
            <option value="3">Tirdth Option</option>
        </select>
        Name of Process 1
    </li>
    <li>
        <select>
            <option value="1">First Option</option>
            <option value="2">Second Option</option>
            <option value="3">Tirdth Option</option>
        </select>
        Name of Process 2
    </li>
    <li>
        <select>
            <option value="1">First Option</option>
            <option value="2">Second Option</option>
            <option value="3">Tirdth Option</option>
        </select>
        Name of Process 3
    </li>
</ul> 
```

选择块中的选项数量和进程都从数据库中检索。如何将其转换为 ViewModel 属性？诸如进程列表和选项列表之类的东西？但我想把它变成一个单一的财产。你能帮我解决这个问题吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:56:20.707

您可以创建一个包含名称和选项数组的包装器对象。所以这个类看起来像：

```
public class WrapperObject
{
   public String Name { get;set;}
   public List<Options> {get;set;}
}

public class Options
{
   public int Id { get; set;}
   public String DisplayName { get; set; }
} 
```

viewmodel 将是 WrapperObjects 的列表，您可以循环它们。

# wpf - 无法使用转换器加载资源字典

> ID：12569491
> 
> 赞同：0
> 
> 时间：2012-09-24T16:52:43.680
> 
> 标签：wpf, xaml, converter, resourcedictionary, buildaction

一切都发生在同一个 VS 项目中。我有一个独立的资源字典文件。当我尝试以编程方式加载它时，我收到错误

**“无法创建未知类型 '{clr-namespace:MyAssembly.Helpers}IsNullConverter”。**

这是我加载它的方式：

```
StreamResourceInfo stream = Application.GetResourceStream(new Uri(@"MyAssembly;component/Resources/Resources.xaml", UriKind.Relative));

this.dynamicResources = XamlReader.Load(stream.Stream) as ResourceDictionary; 
```

这是资源字典：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:helpers="clr-namespace:MyAssembly.Helpers">

<helpers:IsNullConverter x:Key="IsNullConverter" />

Styles go here... 
```

请注意，它与代码隐藏文件相关联，但其中没有任何内容。资源文件的 Build-Action 设置为“Resource”。从今天早上开始，这让我发疯了，仍然不知道到底发生了什么……

帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:24:47.740

哈利路亚，我猜出来了。我所要做的就是直接加载资源字典

Uri uri = new Uri(@MyAssembly;component/Resources/Resources.xaml", UriKind.Relative); this.dynamicResources.Source = uri;

并确保资源字典文件的 Build Action 设置为“Page”

\米/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:05:29.047

您的项目是否引用了程序集？如果不尝试添加引用 - 如果您不想要依赖项，您可以尝试加载程序集：

[http://www.dreamincode.net/forums/topic/78974-using-reflection-to-load-unreferenced-assemblies-at-runtime/](http://www.dreamincode.net/forums/topic/78974-using-reflection-to-load-unreferenced-assemblies-at-runtime/)

或者，您可以将 ax:Class 定义添加到资源字典，并从程序集中实例化类而不是加载 xaml，并记住从构造函数调用生成的 InitializeComponent()，它将加载。

[是否可以在 WPF 中的资源字典后面设置代码以进行事件处理？](https://stackoverflow.com/questions/92100/is-it-possible-to-set-code-behind-a-resource-dictionary-in-wpf-for-event-handlin)

据我所见，如果 ResourceDictionary 和转换器与您从中加载的程序集中在同一个程序集中，您的示例将可以正常工作:)

# android - 安卓的python脚本

> ID：12569492
> 
> 赞同：1
> 
> 时间：2012-09-24T16:52:46.720
> 
> 标签：android, python, eclipse, pydev, sl4a

我正在尝试使用 eclipse 和 sl4a 为我的平板电脑创建一个 android 应用程序。我正在遵循此博客中提到的程序。

[http://jokar-johnk.blogspot.com/2011/02/how-to-make-android-app-with-sl4a.html](http://jokar-johnk.blogspot.com/2011/02/how-to-make-android-app-with-sl4a.html)

1.  我已经编译了我的 python 脚本。

2.  我需要使用这些 python 脚本制作一个“.apk”文件，这样当我在 android 中运行应用程序时，它应该做它应该做的事情。

3.  要创建“.apk”文件，我使用 Eclipse 和 pydev 插件。

4.  我创建了 sl4a 存储库的克隆并导入到 Eclipse。

5.  当我为 android 应用程序开发创建一个新项目时，我不确定在哪里导入我的 python 脚本并嵌入它们，最后我有一个可执行的“.apk”文件。

6.  当我在 Eclipse 中创建一个新项目时，我看到几个文件夹，如 src、gen、res 和它们下的几个文件。我现在需要在哪里放置我的 python 脚本？我需要在项目下创建一个单独的文件夹并直接导入我的python脚本或将它们放在src/gen/res下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T02:51:33.347

正如该指南中所说，您无需创建新项目，而是制作*ScriptForAndroidTemplate*模板应用程序的副本，然后：

> “右键单击 your_script_name，然后使用文本编辑器打开。删除默认脚本，将其替换为您自己的脚本并保存。然后清理/构建/刷新您的项目并运行它。”

它应该工作！

如果您仍然卡住，请重新阅读（并遵循）本教程。祝你好运！

# module - Alfresco 4.0.3+ 的 Share Webscript 扩展的文件结构是什么

> ID：12569495
> 
> 赞同：1
> 
> 时间：2012-09-24T16:52:58.143
> 
> 标签：module, alfresco

我一直在阅读[David Drapers](http://blogs.alfresco.com/wp/ddraper/2012/05/22/customizing-share-javascript-widget-instantiation-part-1/)关于新功能的博客 - 共享 webscripts 的扩展，但我没有找到任何工作示例。什么是文件命名和结构约定？

从我收集的信息来看，我有一个模块配置文件，我不知道如何命名它或将它放在哪里（`share/WEB-INF/classes/alfresco`？）

此外，我了解到我的自定义客户端资源（.js 和 .css 文件）`META-INF/custom-dashlet/extension/`位于 JAR 文件中。它是否正确？最后，*.get.js 和 *.get.html.ftl 转到`webscripts/com/mycompany/mypackage/*`?

所以我现在有：

```
*share/WEB-INF/lib/mypackage.jar* 
```

并在其中：

```
*META-INF/mypackage/extension/myfile.js
webscripts/com/mycompany/mypackage/myfile.get.js
webscripts/com/mycompany/mypackage/myfile.get.html.ftl
* 
```

和

```
*share/WEB-INF/classes/alfresco/something.xml* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T06:42:35.417

这个问题也在这里发布到 Alfresco 论坛：[https ://forums.alfresco.com/en/viewtopic.php?f=48&t=46438](https://forums.alfresco.com/en/viewtopic.php?f=48&t=46438)

提供的答案如下：

扩展模块是一个 Surf 配置对象，因此您应该将包含模块配置的 XML 文件放在获取 Surf 配置的任何位置......例如`<web-server>/webapps/share/WEB-INF/classes/alfresco/site-data`（有很多地方可以获取 Surf 配置，但`alfresco/site-data`最`classpath`常见的）。扩展配置文件应放在`extensions`目录内的文件夹中。因此，您可以将扩展配置文件放在：`alfresco/site-data/extensions`或`alfresco/web-extension/site-data/extensions`中，例如。

您可以创建一个包含此文件夹结构的 JAR 文件。扩展引用的所有内容（例如 WebScript、其他 Surf 配置对象，例如页面、模板实例、组件等）都应该放在它们的正常位置。这些也可以构建到 JAR 文件中。

如果您想从 JAR 文件中访问资源（例如 CSS、图像、JS），请将它们放在 JAR 的 META-INF 文件夹中。您应该将 JAR 文件放在`<web-server>/webapps/share/WEB-INF/lib`目录中（显然您的服务器将需要重新启动以获取新的 JAR 内容）。

WebScripts 应该在（在类路径上）：

```
alfresco/site-webscripts
alfresco/web-extension/site-webscripts
webscripts 
```

您还可以在 Surf 配置中配置加载 Surf config 的其他位置`objects/WebScripts`。它几乎可以无限定制，但您可能应该坚持为共享配置的默认位置。

# php - 是否可以使用 php pdo 连接到 ec2 实例上的远程数据库？

> ID：12569499
> 
> 赞同：2
> 
> 时间：2012-09-24T16:53:23.167
> 
> 标签：php, mysql, pdo, amazon-ec2, amazon-web-services

我正在使用以下内容从本地主机连接到 mysql 数据库

```
<?php
function testdb_connect ()
{
   $dbh = new PDO("mysql:host=localhost;dbname=test", "testuser", "testpass");
   return ($dbh);
}
?> 
```

但是，当我尝试`ec2-12-34-56-78.compute-1.amazonaws.com`使用以下代码从另一台服务器连接到该数据库（数据库正在运行）时

```
$dbh = new PDO("mysql:host=ec2-12-34-56-78.compute-1.amazonaws.com;dbname=test", "testuser", "testpass"); 
```

我无法连接。

是否可以使用 php pdo 连接到 ec2 实例上的远程数据库？

我将如何传递身份验证参数（例如私钥）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:01:29.527

您可能应该考虑为您的数据库使用 RDS，而不是在 EC2 上实施，除非您有一个非常独特的数据库，需要高度自定义（即集群配置等）。在 EBS 支持的卷上运行（您需要这样做才能持久保存物理数据文件），这将使您遇到缓慢的磁盘 I/O。如果您没有在 EBS 支持的 EC2 上运行，那么您的数据是瞬态的，不能被视为在可靠的物理存储上。如果这适合您的设计（您只需要数据库中的临时信息），那么您可能会得到更好的服务，但只需将您的信息放入 Elasticache 或某种形式的内存缓存中。

RDS 使用 MySQL（当然，您也可以选择使用 Oracle）。您可以完全像访问自己的 MySQL 服务器一样访问它（相同的 PHP 抽象、相同的 SQL、几乎所有内容（您没有 root 访问权限，而是一种超级用户访问权限）。RDS 还为您提供了易于为多可用区（高可用性、同步更新的备用）、复制从属、数据库实例重新调整大小和数据快照实现（即按钮）配置。

无论哪种情况（对于 RDS 或 EC2），您都需要确保您的 EC2 或 RDS 安全组允许从托管您的应用程序的 EC2 实例（或其他服务器）进行访问。如果只有 EC2，您可以将服务器放在同一个安全组中，并在该组上提供端口 3306 访问权限，或者更好的是创建两个安全组（一个用于应用程序，一个用于 db）。在 db 安全组中，将端口 3306（或您正在使用的任何端口）提供给应用服务器所属的安全组。

对于 RDS，您需要应用服务器的 EC2 安全组和 RDS 实例的数据库安全组）。您需要在 RDS 安全配置中提供对应用服务器安全组的访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:33:39.580

我不知道这如何与 AWS 一起工作的细节，但我要做的第一件事是在机器之间运行一个 SSH 隧道。

然后 PHP/PDO 基本上只会认为您正在连接到本地数据库。根据我的经验，它还可以更快地建立连接，因为它不必进行 DNS 查找来查找远程服务器......当您认为每个 PHP 页面加载可能必须连接到远程数据库时，这很重要.

当应用程序需要管理存储在远程数据库上的数据并且它像冠军一样工作时，我在 Intranet 上使用它。

我发现 SSH 隧道非常稳定，但我使用一个名为[autossh](http://www.harding.motd.ca/autossh/)的程序尝试在 SSH 隧道出现故障时重新连接它们。

为了完整起见，这里是我用来启动 autossh 的命令，以便它建立并维护一个特定的 SSH 隧道。在此处添加是因为我发现 autossh 文档很难确定我想要的选项。

```
autossh -M 0 -f -L3307:127.0.0.1:3306 -p 22 -N -f username@xxx.xxx.xxx.xxx
```

这会将 Web 服务器上的端口 3307 转发到远程 DB 服务器上的 3306。因此，在 PHP 中，您将连接到 3307。如果您愿意，可以选择 3306，我选择本地端口 3307 以防万一您有本地 MySQL 和远程 MySQL。-p 开关是远程机器上运行 SSH 的端口。

您可以将此命令添加到`/etc/rc.local`（至少在 CentOS 上）以在服务器启动时建立 SSH 隧道。

希望这可以帮助！

# ios - 故事板中的自定义 UIView

> ID：12569501
> 
> 赞同：-2
> 
> 时间：2012-09-24T16:53:38.710
> 
> 标签：ios, uiview

我无法确定我是否在完全迟缓的情况下这样做。

我想在我的故事板中向我的视图控制器添加一个自定义视图。

我将视图对象拖到 VC 上并将类设置为我的自定义视图类。

然后我想有一个与这个类关联的 xib 文件，这样我就可以为这个类设计一个与故事板分开的用户界面。

似乎是堆栈溢出时引用的黑客解决方案（在 initwithCoder 中添加 xib 作为视图）对我不起作用，并且在拖放时以编程方式对齐大量图像和标签的前景会容易得多，真的令人沮丧我。

有没有我想念的更简单的方法，其他人在做什么？

谢谢，

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:35:49.033

使用情节提要没有 xib 文件将您的项目破解为 .h 按 ctrl 并将链接拖到 viewcontroller - 在情节提要中您的视图控制器底部，或将其链接到您的 .h 文件并命名

# android - 如何使用python在android中打开或关闭蓝牙

> ID：12569502
> 
> 赞同：0
> 
> 时间：2012-09-24T16:53:39.220
> 
> 标签：android, python

我想使用python代码打开或关闭android中蓝牙的可见性。你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:33:40.303

我认为您正在将 SL4A 与 python 一起使用，所以让我们开始吧。

```
import android #import android module
droid = android.Android() #class instantation
droid.bluethoothMakeDiscoverable() #make your device visible 
```

这很容易，无论如何您可能想要检查 sl4a 蓝牙 fecade，这里有您可能需要的所有蓝牙命令。

# centos - wso2 复制时无法安装 I/O 错误的功能

> ID：12569505
> 
> 赞同：0
> 
> 时间：2012-09-24T16:53:51.463
> 
> 标签：centos, wso2, p2, wso2carbon

我正在尝试在`wso2 Carbon version 4.0.1` 运行的 VMWare 虚拟机上安装新功能`CentOS 6.3`

我按照这些步骤

1.  下载二进制版本`wso2carbon-4.0.1 (wso2carbon-4.0.1)`
2.  在路径 /opt/wso2/ 下提取
3.  进入`/opt/wso2/wso2carbon-4.0.1/bin and edited wso2server.sh`添加这些行：

    ```
    JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/
    PATH=$JAVA_HOME/bin:$PATH
    export PATH
    export JAVA_HOME 
    ```

4.  使用 ./wso2server.sh 运行服务器

    服务器运行良好

5.  下载 4.0.1 版本的文件 p2-repo.zip 并在 /opt/wso2/ 中解压缩

6.  登录`https://localhost:9443/carbon`并在 features->Repository Management 中添加一个新的存储库，指向 file:///opt/wso2/p2-repo
7.  转到可用功能点击“查找功能”
8.  从列表中我选择了“API 管理器”，然后单击安装功能。

此时会出现一个窗口，告诉您发生了配置错误。正在运行的终端`wso2server.sh`说：

```
[2012-09-24 18:27:23,118] ERROR {org.wso2.carbon.feature.mgt.services.prov.ProvisioningAdminService} -  Error occured while performing provisioning action
org.wso2.carbon.feature.mgt.core.ProvisioningException: An error occurred while configuring the installed items
  session context was:(profile=WSO2CarbonProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Configure, operand=null --> [R]org.jaggeryjs.server.feature.group 0.9.0.ALPHA1, action=org.eclipse.equinox.internal.p2.touchpoint.natives.actions.CopyAction).
  I/O Error while copying /opt/wso2/wso2carbon-4.0.1/repository/components/features/org.jaggeryjs.server_0.9.0.ALPHA1/modules - see details.
    Source: /opt/wso2/wso2carbon-4.0.1/repository/components/features/org.jaggeryjs.server_0.9.0.ALPHA1/modulesdoes not exists
    at org.wso2.carbon.feature.mgt.core.util.ProvisioningUtils.performProvisioningAction(ProvisioningUtils.java:77)
    at org.wso2.carbon.feature.mgt.core.util.ProvisioningUtils.performProvisioningAction(ProvisioningUtils.java:86)
    at org.wso2.carbon.feature.mgt.services.prov.ProvisioningAdminService.performProvisioningAction(ProvisioningAdminService.java:278)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
    at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
    at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
    at org.apache.axis2.receivers.AbstractMessageReceiver$AsyncMessageReceiverWorker.run(AbstractMessageReceiver.java:271)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:14:32.187

我搬到了**Ubuntu 10.04 x64**和**openjdk**。

**OpenJDK 版本为：java 版本 "1.6.0_24" OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.10.04.1)**。**OpenJDK 64 位服务器 VM（构建 20.0-b12，混合模式）** ...现在使用与上述相同的 p2-repo.zip 可以正常安装功能！

感谢 Artemix 的建议！

# wpf - 列表框未虚拟化

> ID：12569506
> 
> 赞同：2
> 
> 时间：2012-09-24T16:53:53.377
> 
> 标签：wpf, mvvm, binding, blend

我有一个没有虚拟化的 ListBox。我显然错过了一些东西，但找不到它。

它实际上是 ListBox 中的 ListBox。外部 ListBox 有一个 ItemTemplate，其中包含一个 Expander。Expander 用于显示一组项目。Expander 的内容是显示项目的第二个 ListBox。第二个 ListBox 上的 ItemTemplate 绑定到要显示的实际 Item。我的项目的 ViewModel 类具有许多属性，这些属性在调用属性 Get 之前不会初始化数据。但是，WPF 会遍历每个项目并导致初始化逻辑，这是我试图避免的。

我发现使用 ListCollectionView.GroupDescription 会导致 ListBox 无法虚拟化。现在我在 ViewModel 中处理我自己的分组。我的外部 ListBox 绑定到 ObservableCollection(ItemGroupViewModel)，其中 ItemGroupViewModel 有一个 GroupName 和一个项目列表。第二个 ListBox 绑定到 ItemGroupViewModel 中的项目。这并没有解决问题。我还在调试时检查了 VirtualizingStackPanel.GetIsVirtualizing()，它返回 true，但 WPF 仍在遍历每个项目。我已经仔细检查以确保我的分组逻辑不会触发每个项目中的数据初始化逻辑，这是我试图避免的。

我认为 IsSharedSizeScope 可能会导致 ListBox 呈现所有项目以确定列大小。所以我关闭了 SharedSizeScope。仍然没有虚拟化。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:47:40.717

它不是虚拟化的，因为它在扩展器中，扩展器的模板是一个 headeredcontentcontrol（据我所知），它的模板包含一个堆栈面板。

stackpanel 的内容永远不会在其堆叠方向上对齐拉伸，因此您的列表框将始终拥有它要求的所有空间，然后您就没有虚拟化。您的内部列表框也不会获得任何垂直滚动条。

你有一个解决方案（至少:)

1：在您的内部列表框上设置 maxheight - 可能是最简单的。

希望能帮助到你 ：）

# iphone - 带有 CADisplayLink 和 Touch 事件的 runloop 事件的顺序？

> ID：12569509
> 
> 赞同：0
> 
> 时间：2012-09-24T16:53:58.597
> 
> 标签：iphone, ios, uitouch, nsrunloop, cadisplaylink

我想知道是否在同一运行循环周期中的 displayLink 之前调用了触摸事件。有谁知道这个问题的答案？

# php - MySQL 错误：准备好的语句协议尚不支持此命令

> ID：12569511
> 
> 赞同：2
> 
> 时间：2012-09-24T16:54:07.173
> 
> 标签：php, mysql, sql, pdo, laravel

当我使用MySQL 查询的开始和结束`START TRANSACTION`时，我收到以下错误。`COMMIT`

```
SQLSTATE[HY000]: General error: 2030 This command is not supported in the prepared statement protocol yet

SQL: START TRANSACTION

Bindings: array (
) 
```

在 Larvel，我做了：

```
DB::query('START TRANSACTION'); 
```

我正在使用 PHP 框架 Laravel，它使用 PDO 来访问 MySQL。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:02:04.930

Laravel 已经支持事务查询。

```
DB::transaction(function ()
{
    // query goes here.
    DB::table('foo')->insert(array('foo' => 'bar'));
}); 
```

# c# - 如何对 .cs 文件中的变量名执行批量重命名？

> ID：12569512
> 
> 赞同：-6
> 
> 时间：2012-09-24T16:54:08.367
> 
> 标签：c#

我有一个包含许多变量的 .cs 文件。我想对这些变量执行批量重命名操作 - 一次更改一大组。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:57:03.670

[这听起来像是Roslyn API](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)的一个很好的候选者，目前在社区技术预览中。这将允许您加载代码，查找所有变量（声明和引用），更改语法树以包含重命名变量的声明和引用，然后再次保存文件。

不过，我不希望它特别*容易*——我会首先考虑非程序化的替代方案。

（哦，很明显，如果它是一个部分类，或者变量不是私有的......）

# jquery - 在链接日期选择器中设置最大日期

> ID：12569513
> 
> 赞同：1
> 
> 时间：2012-09-24T16:54:09.927
> 
> 标签：jquery, datepicker, chain, maxdate

我用“从日期”和“到日期”制作了一个范围日期选择器。

这里代码：

```
From <input type="text" id="from" name="from" style="width: 80px" readonly>
To <input type="text" id="to" name="to" style="width: 80px" readonly>

<script>
$(function() {
    $( "#from" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.png",
        buttonImageOnly: true,
        minDate: 0,
        changeMonth: true,
        beforeShowDay: $.datepicker.noWeekends,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.png",
        buttonImageOnly: true,
        changeMonth: true,
        beforeShowDay: $.datepicker.noWeekends,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
});
</script> 
```

我想要做的是：当用户在 选择特定日期时`#from`，我想将最大日期设置为`#to`，例如 10 天，从 中的日期开始`#from`。

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T17:02:49.103

试试这个**[jsFiddle 例子](http://jsfiddle.net/j08691/kEsdR/15/)**

**jQuery**

```
$('#endDate').datepicker({
    onSelect: function() {},
    onClose: function() {
        $(this).focus();
    }
});
$('#startDate').datepicker({
    onSelect: function(dateText, inst) {
        var nyd = new Date(dateText);
        nyd.setDate(nyd.getDate() + 10);
        $('#endDate').datepicker("option", {
            minDate: new Date(dateText),
            maxDate: nyd
        });
    },
    onClose: function() {
        $(this).focus();
    }
});​ 
```

当您选择一个日期作为开始日期时，您设置了结束日期加上 10 天的 maxDate 选项。

# android - 操作栏选项卡中的多个地图片段

> ID：12569516
> 
> 赞同：0
> 
> 时间：2012-09-24T16:54:13.640
> 
> 标签：android, android-fragments, android-mapview, actionbarsherlock-map

基本上我要做的是 Tab1 -> 组织地图片段 Tab2 -> 城市地图

我该怎么做。我尝试遵循一些教程，但它给了我错误“您可以在 MapViewActivity 中拥有单个 MapView”。有人可以帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:27:35.610

这是不可能的。正如消息所说，每个活动只有一张地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:10:52.013

正如乔和错误消息所说，您只能在一个活动中拥有一个地图视图。

您可以做的（如果您仍想使用选项卡）只是在选项卡更改时不更改片段，而是使用不同的数据重新加载地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:54:51.020

Google 发布了[Map API 第 2 版](https://developers.google.com/maps/documentation/android/)。这最终允许使用 MapFragment 和[SupportMapFragment](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment)。这允许将地图添加到 ViewPagers 和不扩展 MapActivity 的活动。它还应该允许您在一个活动中拥有多个地图

# mongodb - MongoDB 使用错误的索引

> ID：12569522
> 
> 赞同：2
> 
> 时间：2012-09-24T16:54:27.390
> 
> 标签：mongodb, indexing, sharding, optimization

我无法理解这个问题 - 我有一个分片集群，其中一个分片（分片 2）似乎使用了错误的索引。我通过分片键查询，即 site id 和 first request time `{ site.id: 1, frt: 1 }`。我还有一个关于站点 ID 和上次请求时间的索引。

在这个查询中，我还试图通过我在文档中设置的几个布尔值来限制返回的文档。

阅读有关 Mongo 查询优化器如何工作的文档，这对我来说似乎特别奇怪，因为我查看了返回的解释。此处的文档：[查询优化器](http://www.mongodb.org/display/DOCS/Query+Optimizer "查询优化器")

我还包括了来自 Shard 1 的解释，其中查询按预期返回。最后，如果我使用的站点 ID 没有存储在 Shard 2 上的块，它会使用正确的索引，尽管它没有什么可扫描或返回的。为了完整起见，在末尾添加了对此的解释。

任何想法为什么会发生这种情况和/或如果这是一个错误？

**基本查询（坏索引）：**

```
shard2:PRIMARY> db.visit.find({ "site.id": 128, "frt": { $gte: new Date(2012, 8, 24 ) }, "ue": false, "bot": false }).explain()
{
    "cursor" : "BtreeCursor site.id_1_lrt_-1",
    "isMultiKey" : false,
    "n" : 198,
    "nscannedObjects" : 61204,
    "nscanned" : 61204,
    "nscannedObjectsAllPlans" : 61537,
    "nscannedAllPlans" : 61537,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 122,
    "nChunkSkips" : 0,
    "millis" : 727,
    "indexBounds" : {
        "site.id" : [
            [
                128,
                128
            ]
        ],
        "lrt" : [
            [
                {
                    "$maxElement" : 1
                },
                {
                    "$minElement" : 1
                }
            ]
        ]
    },
    "server" : "ip-10-4-211-107:2200"
} 
```

**提供提示：**

```
shard2:PRIMARY> db.visit.find({ "site.id": 128, "frt": { $gte: new Date(2012, 8, 24 ) }, "ue": false, "bot": false }).hint("site.id_1_frt_1").explain()
{
    "cursor" : "BtreeCursor site.id_1_frt_1",
    "isMultiKey" : false,
    "n" : 198,
    "nscannedObjects" : 486,
    "nscanned" : 486,
    "nscannedObjectsAllPlans" : 486,
    "nscannedAllPlans" : 486,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 5,
    "indexBounds" : {
        "site.id" : [
            [
                128,
                128
            ]
        ],
        "frt" : [
            [
                ISODate("2012-09-24T07:00:00Z"),
                ISODate("292278995-01--2147483647T07:12:56.808Z")
            ]
        ]
    },
    "server" : "ip-10-4-211-107:2200"
} 
```

**相同的查询没有额外的布尔约束（使用正确的索引）：**

```
shard2:PRIMARY> db.visit.find({ "site.id": 128, "frt": { $gte: new Date(2012, 8, 24 ) } }).explain()
{
    "cursor" : "BtreeCursor site.id_1_frt_1",
    "isMultiKey" : false,
    "n" : 486,
    "nscannedObjects" : 486,
    "nscanned" : 486,
    "nscannedObjectsAllPlans" : 486,
    "nscannedAllPlans" : 486,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 1,
    "indexBounds" : {
        "site.id" : [
            [
                128,
                128
            ]
        ],
        "frt" : [
            [
                ISODate("2012-09-24T07:00:00Z"),
                ISODate("292278995-01--2147483647T07:12:56.808Z")
            ]
        ]
    },
    "server" : "ip-10-4-211-107:2200"
} 
```

**在 Shard 1 上，原始查询使用预期索引：**

```
shard1:PRIMARY> db.visit.find({ "site.id": 253, "frt": { $gte: new Date(2012, 8, 24 ) }, "ue": false, "bot": false }).explain()
{
    "cursor" : "BtreeCursor site.id_1_frt_1",
    "isMultiKey" : false,
    "n" : 15615,
    "nscannedObjects" : 15950,
    "nscanned" : 15950,
    "nscannedObjectsAllPlans" : 16152,
    "nscannedAllPlans" : 16152,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 125,
    "nChunkSkips" : 0,
    "millis" : 237,
    "indexBounds" : {
        "site.id" : [
            [
                253,
                253
            ]
        ],
        "frt" : [
            [
                ISODate("2012-09-24T07:00:00Z"),
                ISODate("292278995-01--2147483647T07:12:56.808Z")
            ]
        ]
    },
    "server" : "ip-10-6-50-253:2100"
} 
```

**在 Shard 2 上查询此处没有块的站点（使用正确的索引）：**

```
shard2:PRIMARY> db.visit.find({ "site.id": 253, "frt": { $gte: new Date(2012, 8, 24 ), "ue": false, "bot": false } }).explain()
{
    "cursor" : "BtreeCursor site.id_1_frt_1",
    "isMultiKey" : false,
    "n" : 0,
    "nscannedObjects" : 0,
    "nscanned" : 0,
    "nscannedObjectsAllPlans" : 0,
    "nscannedAllPlans" : 0,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
        "site.id" : [
            [
                253,
                253
            ]
        ],
        "frt" : [
            [
                ISODate("2012-09-24T07:00:00Z"),
                ISODate("292278995-01--2147483647T07:12:56.808Z")
            ]
        ]
    },
    "server" : "ip-10-4-211-107:2200"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T23:29:09.933

您链接的文档中的几件事可能会解释这种行为，首先：

> 在 1,000 次操作之后以及在对集合进行某些操作（例如添加索引）之后重复查询测试。

因此，如果您没有足够的查询量对其进行评估，它将坚持首选。

第二：

> 为了解决这个问题，在测试新计划时，MongoDB 会并行执行多个查询计划。一旦完成，它就会终止其他执行，并且系统已经知道哪个计划是好的。

如果另一个索引已经在内存中，比如说因为它正在被另一个查询使用，或者正在发生的其他事情会减慢首选索引上的查询执行速度（或者它非常接近并且偶尔会在速度方面进行交换） ，然后您将再次返回“坏”索引。

优化器已在 2.2 中进行了调整和改进，因此如果您仍然遇到问题（并且在 2.0 或更低版本上），可能值得一看。或者，正如您在测试中所做的那样，如果您知道要使用的最佳索引，只需消除所有疑问并使用提示来指定它。

# ios - 如何在后台创建多个对象？

> ID：12569528
> 
> 赞同：10
> 
> 时间：2012-09-24T16:54:59.090
> 
> 标签：ios, multithreading, core-data, magicalrecord

我正在使用 MagicalRecord 2.0.3，但我真的不知道如何在后台保存数据。

根据文档，这样的事情应该可以工作：

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {
    // Do this hundreds of times
    [MyObject createInContext:localContext];
}]; 
```

但是，没有任何内容保存到数据库中。我见过很多人发布类似的解决方案：

```
[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext) {
    // Do this hundreds of times
    [MyObject createInContext:localContext];
} completion:^{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        [[NSManagedObjectContext defaultContext] saveNestedContexts];
    }];
}]; 
```

这确实将我的数据保存在数据库中，但是由于保存发生在主线程上，我的应用程序有一段时间没有响应（对于我的数据集，大约 3 秒，这太长了）。

我也试过这个，但它在保存时也会阻塞：

```
self.queue = [[NSOperationQueue alloc] init];

[self.queue addOperationWithBlock:^{
    NSManagedObjectContext *localContext = [NSManagedObjectContext contextForCurrentThread];

    // Do this hundreds of times
    [MyObject createInContext:localContext];

    [localContext saveNestedContexts];
}]; 
```

最后，此代码具有相同的阻塞效果：

```
dispatch_queue_t syncQueue = dispatch_queue_create("Sync queue", NULL);
dispatch_async(syncQueue, ^{
    NSManagedObjectContext *localContext = [NSManagedObjectContext contextForCurrentThread];

    // Do this hundreds of times
    [MyObject createInContext:localContext];

    [[NSManagedObjectContext contextForCurrentThread] saveNestedContexts];
}); 
```

那么，解决这个问题的最佳方法是什么？我需要在后台创建数百个对象，并且应用程序需要保持响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T19:32:57.213

MagicalRecord 在后台工作时使用子上下文。这适用于小的更改，但在导入大量数据时会造成过多的主线程阻塞。

这样做的方法是使用并行的 NSManagedObjectContext 并将自己与`NSManagedObjectContextDidSaveNotification`通知和`mergeChangesFromContextDidSaveNotification`方法合并。在此处查看性能测试：http: [//floriankugler.com/blog/2013/5/11/backstage-with-nested-managed-object-contexts](http://floriankugler.com/blog/2013/5/11/backstage-with-nested-managed-object-contexts)

保存嵌套上下文时，所有内容都必须复制到父上下文。与此相反，尚未提取的对象（在您要合并的上下文中）不会被`mergeChangesFromContextDidSaveNotification`. 这就是让它更快的原因。

如果您想在批量保存并使用 NSFetchResultsController 后立即显示这些结果，您可能会遇到问题。请参阅以下问题以获取解决方案： [带有谓词的 NSFetchedResultsController 忽略从不同 NSManagedObjectContext 合并的更改](https://stackoverflow.com/questions/3923826/nsfetchedresultscontroller-with-predicate-ignores-changes-merged-from-different)

有关更多性能提示，请查看以下问题：[Implementing Fast and Efficient Core Data Import on iOS 5](https://stackoverflow.com/questions/10542097/implementing-fast-and-efficient-core-data-import-on-ios-5)

创建自己的上下文。

```
NSManagedObjectContext *importContext = [[NSManagedObjectContext alloc] 
                          initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[importContext setPersistentStoreCoordinator:yourPersistentStoreCoordinator];
[importContext setUndoManager:nil]; // For importing you don't need undo: Faster

// do your importing with the new importContext
// …

NSError* error = nil;
if(importContext.hasChanges) {
  if(![importContext save:&error]) {
      NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
  } 
} 
```

确保您正在监听托管对象上下文的保存。

```
[[NSNotificationCenter defaultCenter] 
              addObserver:singleton 
                 selector:@selector(contextDidSave:)
                     name:NSManagedObjectContextDidSaveNotification object:nil]; 
```

在 contextDidSave: 你自己合并更改。

```
- (void) contextDidSave:(NSNotification*) notification
{
  if(![notification.object isEqual:self.mainContext]) {
    dispatch_async(dispatch_get_main_queue(), ^{
      [self.mainContext mergeChangesFromContextDidSaveNotification:notification];
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T15:03:07.203

托管对象上下文不是线程安全的，因此如果您需要对 Coredata 对象进行任何类型的后台工作（即长时间运行的导入/导出功能而不阻塞主 UI），您将希望在后台线程上执行此操作。

在这些情况下，您需要在后台线程上创建一个新的托管对象上下文，遍历您的 coredata 操作，然后通知主上下文您的更改。

你可以在这里找到一个如何工作的例子

[核心数据和线程/ Grand Central Dispatch](https://stackoverflow.com/questions/7540801/core-data-and-threads-grand-central-dispatch/7545514#7545514)

# java - 如何配置 XStream 以根据 XML 属性映射到不同的类？

> ID：12569530
> 
> 赞同：2
> 
> 时间：2012-09-24T16:55:17.097
> 
> 标签：java, xml, xstream, xmlmapper

我有以下 Java 对象层次结构：

```
public interface Function {
    public void calculate(long t);
}

public class ConstantFunction implements Function {
    private double constant;

    @Override
    public void calculate(long t) {
        // ...
    }
}

public class LinearFunction implements Function {
    private double slope;

    private double yIntercept;

    @Override
    public void calculate(long t) {
        // ...
    }
} 
```

用户可以通过在 XML 中定义它们来创建`ConstantFunction`和实例，如下所示：`LinearFunction`

```
<myapp>
    <function type="ConstantFunction>
        <!-- ... -->
    </function>
    <function type="LinearFunction>
        <!-- ... -->
    </function>
</myapp> 
```

我正在使用 XStream 将用户定义的 XML OX 映射到 Java POJO。我目前正在尝试`XStream`使用别名配置映射器，以便它知道要绑定到`function`元素的 Java 类：

```
XStream oxmapper = new XStream();
oxmapper.alias("myapp", MyApp.class);
oxmapper.alias("function", ???); 
```

问题是，我需要使用以下逻辑配置 XStream： *if `function/type`is `ConstantFunction`, then use `oxmapper.alias("function", ConstantFunction.class)`; 但如果它的值为`LinearFunction`，则使用`oxmapper.alias("function", LinearFunction.class)`。

问题是，我不认为 XStream API 提供了一种方法来按照我需要的方式检查 XML 以实现此逻辑。**如果我不正确，请指出正确的方向！**

如果我是正确的，那么我能想到的唯一解决方案就是有一个非常讨厌的“大杂烩”类，它形成了所有`Function`混凝土的联合，如下所示：

```
public class FunctionFactory implements Function {
    private double constant;
    private double slope;
    private double yIntercept;

    private Class<? extends Function> concreteClass;

    @Override
    public void calculate(long t) {
        // Do nothing. This class is a workaround to limitations with XStream.
        return;
    }
} 
```

在 OX-mapper 配置中：

```
oxampper.alias("function", FunctionFactory.class);
oxmapper.aliasField("function", "type", "concreteClass"); 
```

现在，每次我将 XML 实例读入`MyApp`实例时，我都需要更正转换：

```
XStream oxmapper = getConfiguredMapper();
MyApp app = oxmapper.fromXml("<myapp>...</myapp>");

FunctionFactory factory = app.getFunction();
Function concretion = factory.getConcreteClass();

app.setFunction(concretion); 
```

这是我能做的唯一解决方法，但感觉真的很讨厌，我必须相信有更好的方法来做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:34:42.207

当您想在 XStream 中拥有自定义行为时，您应该使用转换[器教程中描述的转换器](http://xstream.codehaus.org/converter-tutorial.html)。

# box-api - 使用 python 请求上传文件

> ID：12569545
> 
> 赞同：6
> 
> 时间：2012-09-24T16:56:31.900
> 
> 标签：box-api, python-requests

我一直在尝试使用带有请求的 box v2 api 上传文件。

到目前为止，我运气不佳。也许这里有人可以帮我看看我实际上做错了什么。

```
file_name = "%s%s" % (slugify(sync_file.description), file_suffix)
file_handle = open(settings.MEDIA_ROOT + str(sync_file.document), 'rb')
folder_id = str(sync_file.patient.box_patient_folder_id)

r = requests.post(
    files_url,
    headers=headers,
    files={
        file_name: file_handle,
        "folder_id": folder_id,
    },
) 
```

我的身份验证有效，因为我在此之前使用相同的数据创建了一个文件夹。

响应如下所示：

```
{
    u'status': 404, 
    u'code': u'not_found', 
    u'help_url': u'http://developers.box.com/docs/#errors', 
    u'request_id': u'77019510950608f791a0c1', 
    u'message': u'Not Found', 
    u'type': u'error'
} 
```

也许这里有人遇到了类似的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T18:32:38.163

您需要传递 2 个 Python 字典、文件和数据。文件是`{uniqFileName:openFileObj}`，数据是`{uniqFileName:filename}`。下面是我的盒子类的上传方法。并记住在数据中添加最后一个条目，`'folder_id': destination_id`.

```
def uploadFiles(self, ufiles, folid):
    '''uploads 1 or more files in the ufiles list of tuples containing
    (src fullpath, dest name). folid is the id of the folder to
    upload to.'''

    furl = URL2 + 'files/data'
    data, files = {}, {}
    for i, v in enumerate(ufiles):
        ff = v[0]
        fn = v[1]
        #copy to new, renamed file in tmp folder if necessary
        #can't find a way to do this with the api
        if os.path.basename(ff) != fn:
            dest = os.path.join(TMP, fn)
            shutil.copy2(ff, dest)
            ff = dest

        f = open(ff, 'rb')
        k = 'filename' + str(i)
        data[k] = fn
        files[k] = f

    data['folder_id'] = folid

    res = self.session.post(furl, files=files, data=data)

    for k in files:
        files[k].close()

    return res.status_code 
```

这是一个示例调用：

```
destFol = '406600304'

ret = box.uploadFile((('c:/1temp/hc.zip', 'hz.zip'),), destFol) 
```

就像我说的，上面的函数是一个类的方法，有一个实例 attr 保存一个请求会话。但是你可以使用`requests.post`代替`self.session.post`，它的工作原理是一样的。如果您在会话之外执行此操作，请记住使用您的 apikey 和令牌添加标头。

根据文档，您应该能够通过在数据字典中给它一个新名称来重命名文件。但我无法完成这项工作，除非将 src 文件复制到具有所需名称的临时目录并上传。这有点骇人听闻，但它确实有效。

祝你好运，迈克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T05:14:18.397

当有人要求我实现时，我想我会把它放在这里给任何试图实现类似目标的人。

```
files_url = "%s/files/content" % (settings.BOX_API_HOST)
headers = {"Authorization": "BoxAuth api_key=%s&auth_token=%s" % 
              (settings.BOX_API_KEY, self.doctor.box_auth_token)
          }

file_root, file_suffix = os.path.splitext(str(self.document))
filename = "%s%s" % (slugify(self.description), file_suffix)
files = {
        'filename1': open(settings.MEDIA_ROOT + str(self.document), 'rb'),
        }
data = {
        'filename1': filename,
        'folder_id': str(self.patient.get_box_folder()),
       }

r = requests.post(files_url,
                  headers=headers,
                  files=files,
                  data=data)

file_response = simplejson.loads(r.text)

try:
    if int(file_response['entries'][0]['id']) > 0:
        box_file_id = int(file_response['entries'][0]['id'])

        #Update the name of file
        file_update_url = "%s/files/%s" % (settings.BOX_API_HOST, box_file_id) 
        data_update = {"name":  filename}
        file_update = requests.put(file_update_url,
                                   data=simplejson.dumps(data_update),
                                   headers=headers)

        LocalDocument.objects.filter(id=self.id).update(box_file_id=box_file_id)
except:
    pass 
```

所以本质上，我需要发送文件并检索新更新文件的 ID，然后向 box 发送另一个请求。就个人而言，我也不喜欢它，但它对我有用，并且无法找到任何其他从一开始就进行正确命名的实现。

希望有人可以从这个片段中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T07:42:20.570

我的解决方案，使用请求：

```
def upload_to_box(folder_id, auth_token, file_out):
    headers = { 'Authorization' : BOX_AUTH.format(auth_token) }
    url = 'https://api.box.com/2.0/files/content'
    files = { 'filename': (new_file_name, open(file_out,'rb')) }
    data = { 'folder_id': folder_id }
    response = requests.post(url, params=data, files=files, headers=headers) 
```

如果您可以指定`new_copy`参数会很好，但没有任何文档记录它似乎不起作用。

# gnu - Automake flex 输出命名

> ID：12569547
> 
> 赞同：1
> 
> 时间：2012-09-24T16:56:40.660
> 
> 标签：gnu, lex, automake

如果如果使用，例如

foo_SOURCES = bar.l

然后，automake 通过 flex 文件生成`bar.c`。但是，如果我提供 prefix `AM_LFLAGS=-Psome_prefix`，它会生成`lex.some_prefix.c`，这是其他编译规则所不知道的，所以它会以 . 失败`bar.c: No such file or directory`。我的错误在哪里，我该如何解决？我真的需要前缀。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T20:14:28.260

我认为解决这个问题的唯一方法是为 .l->.c 翻译编写自己的规则。就像是：

```
x_SOURCES = lex.some_prefix.c
lex.some_prefix.c: lex.l
    ... rule here 
```

您可能还需要调整以确保分发 .l 文件。

# iphone - 如何为 iPhone 网络应用程序使用动画启动画面？

> ID：12569548
> 
> 赞同：0
> 
> 时间：2012-09-24T16:56:49.387
> 
> 标签：iphone, web, screen, animated, splash-screen

我正在为 iPhone 创建一个网络应用程序，并为它制作了一个启动画面。我想![在此处输入图像描述](../Images/57b0cc2c66440f89109f655cb1878c16.png)在启动画面的底部有一个动画加载符号（比如这个）。我用它制作了一个动画 gif，但网络应用程序只显示 gif 中的第一张图像。我怎样才能有一个动画启动画面？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:00:10.260

真正的飞溅只能是一个静态的 PNG 图像，但是您可以做的是将所有重资源的加载推迟到以后，并且在开始时仅加载与飞溅具有相同图像但底部有旋转轮的视图风景。

然后，您可以开始加载应用程序的其余部分，同时该视图正在制作动画并通知用户进度。

# c# - 在 Sitecore 中无法访问 WebMethod

> ID：12569554
> 
> 赞同：2
> 
> 时间：2012-09-24T16:57:40.830
> 
> 标签：c#, javascript, json, sitecore, webmethod

我正在处理的网站遇到问题。从 JavaScript 函数调用 WebMethod：

```
var ajaxOptions = {
    url: "/layouts/foobar/Foo.aspx/GetBar"
}
$.ajax(ajaxOptions).done(function(result) { 
    loadResult(result, a);
}); 
```

Foo.Aspx 中的 GetBar 方法如下所示：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static object GetBar()
{
    return FoobarManager.GetItems();
} 
```

该函数返回一个有效的 JSON 对象。Sitecore 在 FoobarManager 中使用。例子：

```
Context.Database.GetItem("/sitecore/content/foobar"); 
```

在开发和测试环境中，事情运行得非常顺利，从来没有出现过任何问题。部署到暂存环境后，我看到 GetBar 函数的响应是我们自定义的 404 页面。我认为这是因为 Sitecore 试图解析路径“/layouts/foobar/Foo.aspx/GetBar”但失败了。

既然是在D和T环境下工作的，那肯定是配置问题。我将 GetBar url 添加到 IgnoreUrlPrefixes 设置中。这导致 ajax 调用中的 500 响应：Sitecore.Context.Database 为空。我认为它与 ItemResolver 有关，但我不明白为什么它在 D 和 T 上有效，但在 A 上无效。

我该怎么做才能正确解析网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:22:53.650

你有两件相互矛盾的事情。如果您将`/layouts/foobar/Foo.aspx`路径添加到`IgnoreUrlPrefixes`您必须执行的设置（如您所做的那样），那么 Sitecore 将不会在其中运行其上下文。这意味着，您的代码`Context.Database...`无效。我建议您按名称获取数据库。您需要已发布的“网络”数据库吗？你需要弄清楚你需要哪一个，但是像这样：

```
var db = Sitecore.Configuration.Factory.GetDatabase("web"); // assumes you need the web DB
var foobar = db.GetItem("/sitecore/content/foobar"); 
```

**TL;DR**：没有上下文，因此您无法从中获取数据库。

# java - OAuth 协议/java- Scribe：存储令牌？

> ID：12569555
> 
> 赞同：3
> 
> 时间：2012-09-24T16:57:41.487
> 
> 标签：java, command-line, oauth, scribe

我一直在使用 [scribe API][1] 和一个基本示例，例如：

[https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/TwitterExample.java](https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/TwitterExample.java)

在面向命令行的界面中，要求用户打开网络浏览器并复制和粘贴“accessToken”。

一旦用户复制了“accessToken”，我想在以后调用该工具时避免这个“浏览器步骤”：我可以将“accessToken”存储在某个地方以便以后重新使用吗？它适用于任何服务器（Twitter？Flickr ...）吗？我应该如何更改代码以重用以前保存的“accessToken”？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:14:23.333

对于 Twitter API，您应该存储访问令牌，因为它代表用户允许您的应用程序访问他们的帐户。

但是，请记住，令牌可能会被用户撤销，因此请确保您的应用程序能够再次获得它。

要更改代码以使用以前保存的 accessToken，您只需查找当前用户的令牌 - 可能是从数据库中检索到的，然后开始发出请求。本质上，您只需跳过整个“获取请求令牌”代码块。

# wpf - 命名空间中不存在新的 WPF 自定义控件库名称

> ID：12569558
> 
> 赞同：12
> 
> 时间：2012-09-24T16:58:04.160
> 
> 标签：wpf, visual-studio, intellisense, visual-studio-2012, xaml-designer

我是 WPF 新手，我正在尝试解决错误。我正在尝试构建一个自定义控件库，我可以在其中制作自己的控件对象。当我转到文件 > 新项目 > WPF 自定义控件库 > [输入名称] > 保存时，立即出现错误：

```
The name "CustomControl1" does not exist in the namespace "clr-namespace:ProjectName" 
```

我没有编辑任何代码，但立即出错。作为参考，错误在 Generic.xaml 中。

```
<ResourceDictionary
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:local="clr-namespace:ProjectName">
       <Style TargetType="{x:Type local:CustomControl1}">  //<--Fails here
           <Setter Property="Template">
               <Setter.Value>
                   <ControlTemplate TargetType="{x:Type local:CustomControl1}">  // Fails here as well
                       <Border Background="{TemplateBinding Background}"
                               BorderBrush="{TemplateBinding BorderBrush}"
                               BorderThickness="{TemplateBinding BorderThickness}">

                       </Border>
                   </ControlTemplate>
               </Setter.Value>
            </Setter>
        </Style>
    </ResourceDictionary> 
```

我正在使用 Visual Studio 12 和 .NET 4。有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T17:09:10.423

这是一个 IntelliSense 错误，而不是构建错误，因此它不应影响构建项目。要解决此错误，要么

*   构建项目，或
*   编辑文档（例如，通过`>`从标签中删除 a，然后将其添加回来）。

打开文档时，XAML 设计器会在后台加载以提供 IntelliSense 信息。它异步加载未构建类型的信息（即，在当前解决方案中定义但尚未构建到程序集中的类型），并且此过程通常在设计者完成文档的初始解析后完成。

构建项目将导致构建未构建的类型（从而解决问题），对文档进行材料编辑将导致设计人员使用新可用的类型信息重新解析文档（理想情况下，文档应该在未构建的类型信息可用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-03T10:15:23.370

根据 James McNellis 的回答，在我的情况下，我必须注释掉导致错误的 XAML 部分（因为错误不允许重建），然后关闭文件本身，所以它不能在 VS 中打开，然后我可以成功构建。然后我取消了 XAML 部分的注释，VS 能够找到本地类......以防万一，有人会偶然发现这一点。适用于 Windows 桌面的 Visual Studio 2012 Express...BR,

丹尼尔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-03T10:40:14.140

如果您没有在`generic.xaml`. 它在 generic.xaml 中生成类似这样的内容：

```
<Style TargetType="{x:Type local:MyCustomControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyCustomControl}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

您可以找到这段代码并更改或删除它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-19T01:14:42.237

假设您的程序集称为*ProjectName*，并且您的目标**命名空间**也称为*ProjectName*

您必须更改以下内容：

```
xmlns:local="clr-namespace:ProjectName"> 
```

到

```
xmlns:local="clr-namespace:ProjectName;assembly=ProjectName"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:10:17.957

确保 CustomControl1 没有任何错误并检查您的命名空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-09T07:45:45.357

多次重建和清洁为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-15T00:47:34.297

将derivedclass.cs中的派生类修改为Abstract：

```
public abstract class CustomControl : Control 
```

然后在 .xaml 文件中使用它

```
<local:CustomControl>
...
</local:CustomControl> 
```

//另请参阅此主题：[从 WPF 中的 UserControl 继承](https://stackoverflow.com/questions/269106/inheriting-from-a-usercontrol-in-wpf)

# uitableview - 尝试调用 [UITableView panGestureRecognizer] 时获取 EXC_BAD_ACCESS

> ID：12569560
> 
> 赞同：0
> 
> 时间：2012-09-24T16:58:08.413
> 
> 标签：uitableview, memory-management, uiscrollview, uigesturerecognizer, ios6

刚刚将 xCode 升级到 4.5。iOS 5 仍然是我的部署目标，但 Base SDK 现在是 6.0。

应用程序现在在以前没有崩溃的地方崩溃。该项目使用ARC。

违规行是 UITableView 上的属性调用...要求 panGestureRecognizer（下面的第 3 行）。

```
-(void)viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];    
        UIPanGestureRecognizer* pgr = [imageTableView panGestureRecognizer];
        [pgr setMinimumNumberOfTouches:2];
        [pgr setMaximumNumberOfTouches:2];
} 
```

产生以下错误消息：

**-[UIScrollViewPanGestureRecognizer 保留]：消息发送到已释放实例 0x1ea38f70**

这怎么可能？僵尸分析说手势识别器已经发布了？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:02:11.383

原来这是一个 ARC 问题......对于那些感兴趣的人来说，有两种不同的解决方案。

```
@autoreleasepool {
    UIPanGestureRecognizer* pgr = [imageTableView panGestureRecognizer];
    [pgr setMinimumNumberOfTouches:2];
    [pgr setMaximumNumberOfTouches:2];    
} 
```

或者

```
[imageTableView.panGestureRecognizer setMinimumNumberOfTouches:2];
[imageTableView.panGestureRecognizer setMaximumNumberOfTouches:2]; 
```

吸取的教训，如果不可能的话....尝试将ARC作为罪魁祸首。

# css - 社交媒体按钮定位

> ID：12569561
> 
> 赞同：0
> 
> 时间：2012-09-24T16:58:10.830
> 
> 标签：css, css-position

您如何在内容 div 的一侧放置社交媒体按钮？
喜欢这里：[http ://adidasgolf.eu/home.aspx](http://adidasgolf.eu/home.aspx)

绝对定位？但是内容 div 也必须绝对定位，对吗？到目前为止，这就是我所拥有的……没有社交媒体按钮。

[http://www.swiftgeckotech.com/golf01.html](http://www.swiftgeckotech.com/golf01.html)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:02:04.633

内容 div 的定位不是绝对与社交图标一起使用。您可以自由地在内容 div 中保持正常布局，并将社交图标放在内容 div 之外，并绝对定位它们。您可能还需要进行一些 z-indexing 才能获得分层效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:31:54.153

您最有可能想要使用`position: relative;`的内容`DIV`。将内容设置`DIV`为`position: absolute;`或者`position: relative;`将为子元素的定位建立一个新的原点......请参阅this [fiddle](http://jsfiddle.net/NwQ3c/)以快速演示绝对定位元素在另一个定位元素中的行为。

但是，从文档流中删除的元素`position: absolute;`......它们在页面上推送其他内容方面没有“实质”。`DIV`由于`position: absolute;`这个原因，您很可能不想设置您的内容。如果您在那之后添加更多内容`DIV`，它不会像预期的那样位于页面底部，而是最终位于绝对定位的内容后面`DIV`。`position: relative;`然而，它将按预期工作，并将为您提供一个新的坐标系，以将您的社交媒体按钮绝对定位到它的一侧。

# database - 生产数据库中的 Flyway 集成

> ID：12569565
> 
> 赞同：7
> 
> 时间：2012-09-24T16:58:24.913
> 
> 标签：database, migration, flyway

我们有一个生产中的数据库，它在“用户”表中已经有很多行。考虑flyway网站上的以下声明：

> 如果您有一个尚未被 Flyway 填充的现有数据库，那么您可以这样做：
> 
> *   创建一个初始迁移脚本，该脚本将重新创建您的当前状态并为其提供低版本号。
> *   使用 flyway:init 创建元数据表并将此脚本设置为当前版本。

我想使用 flyway 来管理我的架构和数据库中的各种常量，但我不希望 V1__Base_version.sql 包含我们当前生产用户的帐户信息，特别是考虑到它存储在 SCM 中。如果我正确理解了这些说明，我需要能够使用 V1__Base_version.sql “重新创建 [我的] 当前状态”。

那么仅使用架构和常量创建初始迁移可以正常工作吗？还是我们工作站上的数据库需要 100% 匹配生产中的数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T09:49:57.450

你是对的。init 命令用于用版本标记生产数据库。

您创建的初始迁移（使用您的 PROD 数据库的结构）适用于其他环境。它永远不会在 PROD 上运行，因为它的版本将低于 init 版本。但是，它将对齐所有环境，以便后续迁移可以平等地应用于所有环境。

# c# - 拆分对象数组，然后批量处理

> ID：12569567
> 
> 赞同：0
> 
> 时间：2012-09-24T16:58:26.003
> 
> 标签：c#, arrays

什么是`Execute`批量调用该方法的好方法`rulesObjs`？假设该列表有超过 10,000 个对象，我想一次调用`Execute`不超过 500 个。

```
 public static List<object> ExecutePolicy()
    {
        Policy policy = new Policy();

        List<object> rules = GetRules();

        object[] rulesObjs = rules.ToArray();

        // Call this method with array of object, but in batches.
        policy.Execute(rulesObjs);

        return rulesObjs.ToList();
    }

    private static List<object> GetRules()
    {
        // get the rules via some process
        return new List<object>();
    }
}

public sealed class Policy
{
    public void Execute(params object[] rules)
    {
        // Process rules...
    }
} 
```

我无法控制`Execute()`方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:06:36.707

```
List<object> rules = GetRules();
int batchSize = 500;
int currentBatch = 0;

while (currentBatch * batchSize < rules.Count)
{
    object[] nextBatch = rules.Skip(currentBatch * batchSize)
        .Take(batchSize).ToArray();
    //use batch
    currentBatch++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:05:07.510

好吧，如果您可以控制该`Execute()`方法，那么最好的方法是将索引传递给该方法，以便它知道从数组的哪个索引开始。

```
public void Execute(int startIndex, /*optional*/ int endIndex, params object[] rules)
{
    // Process rules...
} 
```

不要担心一次传递太多数据。在幕后，你的数组只是一个指针，所以你只是传递一个引用。

如果您无法控制该`Execute()`方法，则可以使用[Array.Copy](http://msdn.microsoft.com/en-us/library/system.array.copy.aspx)为您的部分创建一个新数组，并处理该新数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T17:09:44.680

参考`System.Linq`您可以使用跳过和采取：

```
int total = 10000;
int chunkSize = 500;
for (int i = 0; i < total; i += chunkSize )
{
    var chunk = rulesObjs.Skip(i).Take(chunkSize).ToArray();

    policy.Execute(chunk);
} 
```

# php - 购物车持久性：$_SESSION 还是浏览器 cookie？

> ID：12569568
> 
> 赞同：35
> 
> 时间：2012-09-24T16:58:28.030
> 
> 标签：php, cookies, session-variables

在没有用户名/登录名来保存购物车数据的电子商务网站上，使用 PHP $_SESSION 变量或浏览器 cookie 来保存购物车中的商品会更好吗？我倾向于 $_SESSION，因为 cookie 可以被禁用，但想听听你的想法。

预先感谢您的考虑。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-24T17:17:02.020

## 两者都不

没有大型网站敢将用户的购物车存储在会话或 cookie 中——这些数据非常有价值。

客户在购买什么，他们何时选择商品，购买了多少，为什么他们没有完成结账等等。对您的业务*来说，这些都是非常非常*重要的。

使用数据库表存储此信息，然后将其链接到用户的会话。这样您就不会丢失信息，并且可以返回并根据用户购物车构建统计数据或解决结帐过程中的问题。

尽可能记录一切。

## 数据库模式

下面是一个简化的示例，说明这可能会如何看待数据库级别。

```
user {
    id
    email
}

product {
    id
    name
    price
}

cart {
    id
    product_id
    user_id
    quantity
    timestamp    (when was it created?)
    expired      (is this cart still active?)
} 
```

您可能还希望将购物车表拆分为更多表，以便跟踪对购物车的修订。

## 会话

正常的 PHP 会话由两部分组成

1.  数据（存储在服务器上的文件中）
2.  给用户代理（浏览器）的唯一标识符

因此，它不是`$_SESSION`vs `$_COOKIE`- 它是`$_SESSION` **+** `$_COOKIE` =“会话”。但是，您可以通过使用包含数据的单个加密 cookie 来修改它（因此您不需要标识符来查找数据）。另一种常见的方法是将数据存储在 memcached 或数据库中而不是文件系统中，以便多个服务器可以访问它。

@Travesty3 的意思是你可以有**两个**cookie - 一个用于会话，另一个是“让我保持登录”cookie（存在时间比会话 cookie 长），或者是单独 cookie 中的数据副本.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-06T06:32:20.837

正如 Xeoncross 所指出的，存储任何可能的信息以供分析是非常重要的。因此，不应完全依赖会话和 cookie。

一种可能的方法是-

**未登录时使用会话**

如果用户未登录，您可以使用`$_SESSION`PHP 从会话中存储和检索购物车项目和愿望清单项目

**登录时使用数据库**

如果用户已登录，那么您可以考虑以下两个选项之一 -

*   将购物车项目或愿望清单项目单独存储在数据库中
*   将购物车项目或愿望清单项目存储在数据库以及会话中（这将保存一些数据库查询）

**当用户登录时**

当用户登录时，从会话中获取所有购物车项目和愿望清单项目并将其存储在数据库中。

这将使数据持久化，即使用户注销或更改机器但直到用户没有登录，都无法永久存储信息，因此不会持久化。

**获取所需数据**

每当您尝试访问购物车或愿望清单时，请执行以下检查 -

*   如果用户未登录，则查看会话
*   如果用户已登录，如果您单独存储在数据库中，则查询数据库，否则如果您保持会话与数据库一起更新，则可以只查看会话

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-24T17:00:29.667

我会把它存储在一个会话中。我的愿望清单很长，我担心它不会适合COOKIE可能占用的4K存储空间。它会强制您将会话超时设置为更长的时间。

注意：有些国家（比如我所在的荷兰）对 cookie 有非常严格的政策，您可能会被立法强制使用 Sessions。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-24T17:08:25.807

一些帮助点：

**饼干：**

*   信息会一直保留到 cookie 过期（您可以配置什么）；
*   倾向于减慢服务器和客户端之间的通信，因为它必须在每个请求/响应中在两者之间进行交换；
*   它是一种不安全的数据存储形式，易于嗅探；
*   他们也有存储数据的限制。

**会议：**

*   所有信息都保存在服务器中，因此不与客户端交换。
*   因为它不是在网络上共享的，所以它更安全一些；
*   会话结束时所有信息都会丢失；
*   如果您在共享主机中托管，则由于托管在同一服务器上的任何站点对资源的推送，您可能会遇到会话在操作中间结束的问题。

我个人会参加会议，因为我假设是一个中小型受众页面。如果它增长，您最好使用简单的数据库结构来存储这些数据，并制定维护计划来获取不必要的数据（例如：选择某些产品但不进行结帐的客户）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-24T17:16:32.537

您可以考虑同时使用两者。

缺点`$_SESSION`是当浏览器关闭时会话被清除。

使用会话，但尝试从 cookie 填充 $_SESSION 数据（如果可用）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-24T17:14:04.923

我会使用会话。如果用户禁用了 cookie，则会话将无法启动，因为会话 ID 存储在用户计算机上的 cookie 中。

您可能需要查看一些设置，以便尝试将会话保持更长时间。

*   [`session_set_cookie_params()`](http://php.net/manual/en/function.session-set-cookie-params.php)通过使用`lifetime`参数集运行，防止在用户关闭浏览器时删除会话 cookie 。这个函数需要先运行[`session_start()`](http://php.net/manual/en/function.session-start.php)

*   您可能还希望通过修改[`session.gc_probability, session.gc_divisor, session.gc_maxlifetime`](http://php.net/manual/en/session.configuration.php)php.ini 中的会话垃圾收集设置或使用来扩展从服务器清除会话的频率[`ini_set()`](http://php.net/manual/en/function.ini-set.php)

*   如果您在服务器上运行其他网站并且您修改了上述垃圾收集设置，您将需要在 php.ini 中设置它们以便它们适用于所有网站，或者如果您正在使用，`ini_set()`那么您可能还会考虑将这些会话保存到不同的通过修改目录比其他网站[`session_save_path()`](http://php.net/manual/en/function.session-save-path.php)。这又是在之前运行的`session_start()`。这将防止其他网站的垃圾收集清除您对某个特定网站的扩展会话。

*   我还建议在 php.ini 中设置以下会话设置`session.entropy_file = /dev/urandom, session.entropy_length = 256, session.hash_function = sha512`。这应该会为您提供一个加密的强会话 ID，并且冲突的可能性非常小。

*   并确保您的站点上有 SSL 证书，以防止中间人攻击您的会话 ID。

显然，用户仍然可以决定手动清除他们的所有 cookie，这些 cookie 将带上会话 ID cookie，但这是我准备承担的风险。如果我在购物车系统中途没有结账，我就不会去清除我的 cookie。我仍然认为会话比仅使用普通 cookie 更好。

只要您是唯一可以访问您的会话目录并且您的会话 ID 很强大的网站，数据就足够安全。通过延长服务器的会话存储时间，您的数据可以保留在服务器上。

您可以采取进一步的措施来使您的会话更加强大。每 20 分钟重新生成一次会话 ID，复制数据。还要在数据库中根据 IP 地址记录会话 ID，并检查特定 IP 地址是否尝试在给定时间内发送超过 X 个会话 ID，以防止有人试图暴力破解会话 ID。

您还可以将数据存储在由会话 ID 链接的数据库中，而不是存储在服务器上的会话文件中。然而，这仍然依赖于存储在 cookie 中并且可能随时消失的会话 ID。真正确保用户不会丢失购物车的唯一方法是让他们先登录并存储在数据库中。

# perl - 命令“打印所有以开头的行”

> ID：12569570
> 
> 赞同：-8
> 
> 时间：2012-09-24T16:58:34.457
> 
> 标签：perl, unix, sed, awk, command

我正在寻找一个 perl 命令，其中打印以字符串开头的行。例如，如果我想打印以“1234”开头的所有行，该命令会是什么样子？赛德？啊？格力普？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T17:05:07.697

```
perl -ne 'print if /^1234/' 
```

或者

```
sed -ne '/^1234/p' 
```

或者

```
awk '/^1234/' 
```

或者

```
grep '^1234' 
```

或者

```
ruby -ne 'print if /^1234/' 
```

甚至

```
python -c 'import fileinput;print "\n".join([l for l in fileinput.input() if l.startswith("1234")])' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T16:59:32.297

```
perl -ne'print if /^1234/' file 
```

但大多数人会使用`grep`.

```
grep ^1234 file 
```

或者在 Windows 上

```
findstr /r ^1234 file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:05:52.970

完成：

```
sed -ne '/^1234/p' somefile
awk '/^1234/{print}' somefile
grep '^1234' somefile 
```

# jquery - jquery datepicker 双重使用（日和月）

> ID：12569574
> 
> 赞同：0
> 
> 时间：2012-09-24T16:58:44.350
> 
> 标签：jquery, datepicker

> **可能重复：**
> [jQuery UI DatePicker 仅显示月份年份](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)

我在这里使用 Jquery datepicker 是代码[http://jsfiddle.net/W2Vgs/1/](http://jsfiddle.net/W2Vgs/1/)。

第一个输入是**datepicker**而第二个应该是**monthpicker**。
我怎样才能使第二个输入只显示月份和年份（月份选择器）？
**我怎样才能删除第二个日历上的日子**。
是否可以在同一个 html 页面上对两个选项使用 datepicker？

# android - 带有 Android 的 Grape Rails API

> ID：12569577
> 
> 赞同：4
> 
> 时间：2012-09-24T16:58:51.980
> 
> 标签：android, ruby-on-rails, rest

我想用我的自定义 Grape API（Ruby on Rails）在 Android 上实现一个休息客户端，并且想知道从哪里开始（换句话说，如果有关于在 Android 操作系统上实现它的良好实践......或者任何好的和**最近**的例子关于它。）

*   到目前为止，我一直在通过 Google 演讲查看有关 Rest 的[视频。](http://www.youtube.com/watch?v=xHXn3Kg2IQE&feature=player_embedded#!)
*   我也遇到了休息客户的这段[代码](https://github.com/TylerSmithNet/RESTclient-Android)。
*   刚开始读[这个](http://neilgoodman.net/2011/12/26/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-1/)。

谢谢你。我很快就会发布我的解决方案。

所以基本上，我的rest API（在葡萄中）中有一个看起来像这样的方法。

“http://localhost:3000/api/signin/”

基本上，如果我执行此命令行，我可以访问/验证：

```
curl -H "Accept: application/vnd.lzgo-v1+json" -d email=myuser -d password=mypassword http://localhost:3000/api/signin/ 
```

现在，我正在尝试构建一种通用的方式来访问我的 API，显然是在 android 上。到目前为止，我一直在使用带有[RestService](https://github.com/posco2k8/rest_service_tutorial)的这个家伙。

```
Intent intent = new Intent(activity, com.android.lzgo.service.RESTService.class);
intent.setData(Uri.parse("http://localhost:3000/api/signin/"));

Bundle params = new Bundle();
params.putString("email", "myuser");
params.putString("password", "mypassword");

intent.putExtra(RESTService.EXTRA_HTTP_VERB, RESTService.POST);
intent.putExtra(RESTService.EXTRA_PARAMS, params);
intent.putExtra(RESTService.EXTRA_RESULT_RECEIVER, getResultReceiver()); 
```

然后，当我的案例是 POST 时，我对 RestService 实现有点困惑。

```
UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(paramsToList(params));

postRequest.setHeader("Accept", "application/vnd.lzgo.v1+json");

postRequest.setEntity(formEntity); 
```

如果您在顶部查看我的 URL，它似乎更像是参数，所以我可能会使用 postRequest.setParams()...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:57:10.820

我了解到，当您使用模拟器时，localhost 指的是设备自己的环回服务，而不是您可能期望的机器上的环回服务。

**我不得不使用 10.0.2.2 来访问你的实际机器，它是一个别名设置来帮助开发。**

# qt - Qt 中的高效网格

> ID：12569578
> 
> 赞同：1
> 
> 时间：2012-09-24T16:58:57.010
> 
> 标签：qt

我试图在 Qt 的 QGraphicsScene 中绘制一个 10 毫秒的网格。我对 Qt 不是很熟悉……这是我第一次使用它，只是因为应用程序需要在 Windows 和 Linux 之间移植。

我实际上没有绘制网格的问题，这只是网格变大时的性能。如果/当新数据加载到要显示的程序中时，网格必须能够更改大小以适应 SceneRect。

我现在就是这样做的，我讨厌这样做，但这是我能想到的唯一方法......

```
void Plotter::drawGrid() {
    unsigned int i;

    QGraphicsLineItem *line;
    QGraphicsTextItem *text;

    char num[11];
    QString label;

    unsigned int width = scene->sceneRect().width();
    unsigned int height = scene->sceneRect().height();

    removeGrid();

    for (i = 150; i < width; i+= 10) {
        line = new QGraphicsLineItem(i, 0, i, scene->sceneRect().height(), 0, scene);
        line->setPen(QPen(QColor(0xdd,0xdd,0xdd)));
        line->setZValue(0);

        _itoa_s(i - 150, num, 10);
        label = num;
        label += " ms";

        text = new QGraphicsTextItem(label, 0, scene);
        text->setDefaultTextColor(Qt::white);
        text->setX(i);
        text->setY(height - 10);
        text->setZValue(2);
        text->setScale(0.2);

        //pointers to items stored in list for removal later.
        gridList.append(line);
        gridList.append(text);
    }
    for (i = 0; i < height; i+= 10) {
        line = new QGraphicsLineItem(150, i, width, i, 0, scene);
        line->setPen(QPen(QColor(0xdd,0xdd,0xdd)));
        line->setZValue(0);
        gridList.append(line);
    }
} 
```

然而，当 scene->sceneRect().width() 变得太大时，应用程序变得非常缓慢。我曾尝试使用 QGLWidget，但速度上的改进充其量是微不足道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:37:07.067

我最终使用了一个 10x10 方形像素图并将其绘制为我的 QGraphicsView 上的 backgroundBrush，正如我最初问题下评论中的链接中所建议的那样。

# r - 修复 R 中用于 Ubuntu 的功能无法正常工作

> ID：12569579
> 
> 赞同：0
> 
> 时间：2012-09-24T16:59:02.850
> 
> 标签：r, function

我一直在 Ubuntu 的终端窗口中使用 R。最近我发现了`fix`R 中的函数，我可以用它来编辑我的函数。但是，每当我使用 fix 函数时，它都会打开一个编辑器 (VIM)，我可以使用它来编写我的函数。然后我输入“wq”来保存工作，但是当我输入函数的名称时，它显示没有对函数进行任何编辑。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:45:40.027

为了使用编辑功能，请确保您有

*   安装的默认编辑器（例如`grep EDITOR /etc/R/Renviron`）

*   或将`EDITOR`环境变量设置为您喜欢的其他编辑器，

*   或在运行时设置`options("editor"=....)`为您需要的。

现在，**`fix()`**特别是对于该功能，请在其手册页中注意以下提示：

> ```
>  ‘fix’ invokes ‘edit’ on ‘x’ and then assigns the new (edited)
>  version of ‘x’ in the user's workspace. 
> ```

因此，如果更改“消失”，也许您正在编辑一个不属于您的对象。从简单的东西开始，编辑它，看看它是否仍然存在。沿着

```
R> hw <- function() cat("Hello, world\n")
R> fix(hw)                 ## editing, adding 'new'
R> hw()
Hello, new world
R> 
```

# javascript - 为什么这个正则表达式/DOM 字符实体测试器返回“未定义”？

> ID：12569581
> 
> 赞同：1
> 
> 时间：2012-09-24T16:59:23.513
> 
> 标签：javascript, html, regex, dom, character-entities

```
var str = 'let us pretend that this is a blog about gardening&cooking; here&amp;apos;s an apostrophe &amp; ampersand just for fun.'; 
```

这是我正在操作的字符串。期望的最终结果是：`"let us pretend that this is a blog about gardening&cooking; here&apos;s an apostrophe &amp; ampersand just for fun."`

```
console.log('Before: ' + str);

str = str.replace(/&amp;(?:#x?)?[0-9a-z]+;?/gi, function(m){
  var d = document.createElement('div');
  console.log(m);
  d.innerHTML = m.replace(/&amp;/, '&');
  console.log(d.innerHTML + '|' + d.textContent);
  return !!d.textContent.match(m.replace(/&amp;/, '&')[0]) ? m : d.textContent;
});

console.log('After: ' + str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:41:21.753

问题是 HTML 不支持 XML`&apos;` 为了避免这个问题，你应该使用`&#39;`而不是`&apos;`

有关更多信息，请查看此帖子：

[为什么不`&apos;`应该用来转义单引号？](https://stackoverflow.com/questions/2083754/why-shouldnt-apos-be-used-to-escape-single-quotes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:55:13.800

这应该做你想要的：

```
str.replace(/&amp;([#x]\d+;|[a-z]+;)/g, "&$1") 
```

或者，具有积极的前瞻性：

```
str.replace(/&amp;(?=[#x]\d+;|[a-z]+;)/g, "&") 
```

我认为您不需要任何 HTML2text 编码/解码。

# java - 摆屏设计，哪个Layout？

> ID：12569587
> 
> 赞同：2
> 
> 时间：2012-09-24T17:00:10.597
> 
> 标签：java, swing, layout

我是摇摆新手，我想设计一个我所附类型的屏幕。右边的大面板使用卡片布局，在各种按钮点击时显示。我不知道如何排列组件，例如我有 6 列，并且随着我添加更多组件，行数会增加。如果有人能给我一个关于我需要使用哪种布局或如何完成它的伪代码的想法，我将不胜感激。

万分感谢 ！！！

![在此处输入图像描述](../Images/ada0e7089c840719e2f9c218b8dbfa60.png)

**更新：**伙计们，我现在已经将我的解决方案移动到每个使用 MigLayout。它非常简单，并且在动态组件放置的情况下非常易于使用。非常感谢您宝贵的时间和答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T17:09:39.637

[`GridLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)非常适合这个：[`GridLayout(int rows,int cols)`](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html#GridLayout%28int,%20int%29)。的值`0`将指定行/列可以随着您添加更多组件而增长。

来自 Oracle 的简短示例：

![在此处输入图像描述](../Images/c4c3d409914fd4de9a27f434209adc3e.png)

```
GridLayout experimentLayout = new GridLayout(0,2);//create grid any amount of rows and 2 coloumns

...

compsToExperiment.setLayout(experimentLayout);//add gridlayout to Component/JPanel

compsToExperiment.add(new JButton("Button 1"));
compsToExperiment.add(new JButton("Button 2"));
compsToExperiment.add(new JButton("Button 3"));
compsToExperiment.add(new JButton("Long-Named Button 4"));
compsToExperiment.add(new JButton("5")); 
```

**更新：**

但是，如果您需要更灵活的网格布局，请参阅[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)Guillaume Polet 建议：

![在此处输入图像描述](../Images/c060bc175026d9bb295afccd990ced75.png)

如您所见，它允许您使用每个组件超过 1 行/列：

![在此处输入图像描述](../Images/29e4e75cf88300a00733cb0f794e4ea6.png)

```
JButton button;
pane.setLayout(new GridBagLayout());
GridBagConstraints c = new GridBagConstraints();
if (shouldFill) {
                //natural height, maximum width
                c.fill = GridBagConstraints.HORIZONTAL;
}

button = new JButton("Button 1");
if (shouldWeightX) {
                   c.weightx = 0.5;
}
c.fill = GridBagConstraints.HORIZONTAL;
c.gridx = 0;
c.gridy = 0;
pane.add(button, c);

button = new JButton("Button 2");
c.fill = GridBagConstraints.HORIZONTAL;
c.weightx = 0.5;
c.gridx = 1;
c.gridy = 0;
pane.add(button, c);

button = new JButton("Button 3");
c.fill = GridBagConstraints.HORIZONTAL;
c.weightx = 0.5;
c.gridx = 2;
c.gridy = 0;
pane.add(button, c);

button = new JButton("Long-Named Button 4");
c.fill = GridBagConstraints.HORIZONTAL;
c.ipady = 40;      //make this component tall
c.weightx = 0.0;
c.gridwidth = 3;
c.gridx = 0;
c.gridy = 1;
pane.add(button, c);

button = new JButton("5");
c.fill = GridBagConstraints.HORIZONTAL;
c.ipady = 0;       //reset to default
c.weighty = 1.0;   //request any extra vertical space
c.anchor = GridBagConstraints.PAGE_END; //bottom of space
c.insets = new Insets(10,0,0,0);  //top padding
c.gridx = 1;       //aligned with button 2
c.gridwidth = 2;   //2 columns wide
c.gridy = 2;       //third row
pane.add(button, c); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:22:14.673

看看[GroupLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/GroupLayout.html)或[GridBagLayout](http://docs.oracle.com/javase/6/docs/api/java/awt/GridBagLayout.html)。前者可能比后者更容易使用。

# codeigniter - 如何使用 CodeIgniter 自动包含使用自己的类

> ID：12569588
> 
> 赞同：-2
> 
> 时间：2012-09-24T17:00:19.050
> 
> 标签：codeigniter, codeigniter-2

我正在使用 CodeIgniter。我想使用我自己的类在控制器函数中作为参数传递。

通常，我可以将此类放在一个文件夹中，并将其包含在`MY_Controller`其路径中。但我想了解在 CodeIgniter 中是否有办法做到这一点。我不能把它放在库文件夹中，也不能使用加载器类，因为它试图创建一个对象的实例，但我想随时创建实例。如果我自己的类需要构造函数参数，加载器类会出错。

最好的方法是什么？放哪个文件夹最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:19:31.957

这很容易。考虑这个例子

```
<?php
Class Home extends CI_Controller{

     public $arg1 = 1;
     public $arg2 = 2;

     function index($this->$arg1 , $this->$arg2){ //or function index()
      //Then inside function 
      //$vara = $this->$arg1 , $varb = $this->$arg2;

     }

} 
```

# python - Typeerror float 不可调用。我试图弄清楚为什么我的 elif 语句不可调用

> ID：12569592
> 
> 赞同：-3
> 
> 时间：2012-09-24T17:00:35.190
> 
> 标签：python, function, typeerror

```
from cisc106_32 import*

def BillAmount(mb):

    if mb <= 50:
        price=50

    elif 50<mb<=400:
        price=(66.50+(.05)(mb-50.00))

    elif 400<mb<=1000:
        price=(72.00+(.08)(mb-50.00))

    else:
        price=100.00

    return price

assertEqual(BillAmount(45),50)

assertEqual(BillAmount(400),84)

assertEqual(BillAmount(2000),100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:03:05.170

在大多数编程语言中，当将数字相乘时，您需要一个`*`. 例如：

```
result = (0.5) * (mb - 50.00) 
```

（不像你写的数学`result=(0.5)(y)(500)`和隐含的乘法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:03:34.517

您正在尝试将浮点数转换为函数：

```
(.05)(mb-50.00) 
```

如果您打算将这两个值相乘，请使用`*`：

```
(.05) * (mb-50.00) 
```

插图：

```
>>> mb=51
>>> (.05)(mb-50.00)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'float' object is not callable
>>> (.05)*(mb-50.00)
0.050000000000000003 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:06:53.443

在 Python 中，`()`被认为是`function operator`.. 所以，如果你在 Python 中的任何单词上加上括号，它就会变成一个函数调用（嗯，虽然有一些例外，但这不是这里关心的问题）..

所以，如果你这样做： - `(2)(5)`，你不是乘以 2 和 5，而是你试图调用一个`2`不存在的函数，参数`5`..

所以，`*`在这些括号之间添加一个`(2)*(5)`

# sqlite - Sqlite3 rowid 与 AUTOINCRENTENT

> ID：12569597
> 
> 赞同：3
> 
> 时间：2012-09-24T17:00:46.283
> 
> 标签：sqlite, auto-increment, rowid

我正在使用 sqlite3 进行我的第二个项目并且有一个问题。

使用 rowid 和/或使用自己的 AUTOINCREMENT INTEGER 值有什么区别？

两者中的一个是否比另一个更好/更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:49:19.657

根据[Sqlite 文档](http://www.sqlite.org/autoinc.html)，区别在于`rowid`可以重新分配，而`AUTOINCREMENT INTEGER`不能。

引用重要部分：

> (T) 使用 AUTOINCREMENT 需要在插入每一行时完成额外的工作，因此会导致 INSERT 运行速度稍慢。

# android - 本地主机 - 模拟器 - 缓存访问被拒绝

> ID：12569600
> 
> 赞同：0
> 
> 时间：2012-09-24T17:00:52.827
> 
> 标签：android, caching, localhost, emulation

这是我现在无关紧要的原始问题：

> 我正在尝试使用`SAXParser`. 该代码*在* 过去一周内有效。但是突然之间，我不断收到 `SAXException`：`Wrong XML file structure: expected: /meta read: head (position:END_ ... TAG </head>@109.8 in java.io.StringReader@41221168)`
> 
> 我为本地主机中的不同 xml 文件尝试了相同的代码。我不明白为什么在过去几天一直工作时会突然发生这种情况！

更新：我尝试打印存储的 xml 字符串。事实证明，根本没有读取所需的文件。本地主机的一些问题。相反，正在存储的字符串说我需要身份验证才能访问该文件。但是直到现在我还没有进行任何身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:13:14.410

从错误看来，您必须有一个开始标签`<meta>`，但该部分以`</head>`而不是结束`</meta>`。

# php - 从历史中隐藏页面

> ID：12569604
> 
> 赞同：1
> 
> 时间：2012-09-24T17:01:28.050
> 
> 标签：php, javascript, html

我遇到了一个问题：我有一个页面，我的客户每周会处理很多次，每次都会有一个不同的标识符示例

```
compshop.php?Shopid=2252&sub=s

compshop.php?Shopid=2520&sub=se

compshop.php?Shopid=3152&sub=n

etc.... 
```

问题是如果可能的话，我不希望所有这些都保存到个人历史记录中，所以每次他们开始输入我的网址时，这些显示为主要结果而不是我的主页。有没有办法阻止这个

我认为缓存元标记会处理这个问题，但似乎缓存标记仅用于 SE 索引

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:07:19.203

如果您添加一个随机生成的参数，任何页面都不太可能被多次访问，但您的页面仍然可以仅通过 URL 访问。

例如，

```
compshop.php?Shopid=2252&sub=s&t=69396872

compshop.php?Shopid=2520&sub=se&t=17094891

compshop.php?Shopid=3152&sub=n&t=79125863 
```

它不是从历史记录中隐藏页面，而是主要确保该页面只进入历史记录一次，因此您的主页仍应首先显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:09:53.353

我认为你很不走运，除非你可以通过 POST 而不是 GET 发送参数。正如@PWHite 刚刚提到的，您也可以在参数中附加一个随机值，以确保即使是相同的 Shopid/sub 也会在历史记录中显示为“不同”页面，从而将您的主页放在列表的顶部的访问次数。

# wordpress - wordpress get_post_custom，我想我可以更有效率

> ID：12569613
> 
> 赞同：0
> 
> 时间：2012-09-24T17:02:07.320
> 
> 标签：wordpress, custom-post-type

我为我的投资组合页面创建了一个自定义帖子类型。我有两个自定义字段：

1.  产品网址
2.  案例研究网址

我的问题是在我的主题中使用这些自定义字段的值。目前我通过运行这个来获取它们的值：

```
<?php 
$loop = new WP_Query(array('post_type' => 'portfolio', 'posts_per_page' => 3)); 
while ( $loop->have_posts() ) : $loop->the_post();

$custom = get_post_custom($post->ID);
$product_url = $custom['product_url'];
foreach ($product_url as $key => $value)
echo $key . " => " . $value . "<br />";

$custom = get_post_custom($post->ID);
$case_study_url = $custom['case_study_url'];
foreach ($case_study_url as $key => $value)
echo $key . " => " . $value . "<br />";

?>

// All my mark-up

<?php endwhile; ?> 
```

如果我的术语在这里有意义，我想知道，但有没有办法我可以运行 foreach 循环，以便它显示 product_url 和 case_study_url？

在此先感谢您的帮助。

真挚地。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:24:10.990

如果您只检索两个值，则没有理由使用 get_post_custom。考虑改用[Get Post Meta](http://codex.wordpress.org/Function_Reference/get_post_meta)：

```
<?php 
$loop = new WP_Query(array('post_type' => 'portfolio', 'posts_per_page' => 3)); 
while ( $loop->have_posts() ) : $loop->the_post();

$product_url = get_post_meta($post->ID, 'product_url', true);
$case_study_url = get_post_meta($post->ID, 'case_study_url', true);
echo "Product: $product_url, Case Study: $case_study_url";
?>

// All my mark-up

<?php endwhile; ?> 
```

**更新：**

`get_post_custom`在处理不是特定于模板结构的元字段时更好。因此，如果您想让用户能够添加自己的字段并让它们显示在页面上而无需自己实际指定任何键，您可以执行以下操作：

```
<?php 
$loop = new WP_Query(array('post_type' => 'portfolio', 'posts_per_page' => 3)); 
while ( $loop->have_posts() ) : $loop->the_post();

$all_meta = get_post_custom($post->ID);
foreach($all_meta as $meta_key => $meta_value)
    echo "$meta_key: $meta_value<br/>";

endwhile;
?> 
```

请记住，当设置使用相同键的值时，结果将是数组类型。

因此，假设您有一个名为“Foo”的自定义字段，并将其设置为“Bar”。然后你有另一个名为“Foo”的自定义字段并将其设置为“Baz”。当你这样做时：

```
<?php
$loop = new WP_Query(array('post_type' => 'portfolio', 'posts_per_page' => 3)); 
while ( $loop->have_posts() ) : $loop->the_post();
    $foo = get_post_meta($post->ID, 'Foo');
    print_r($foo);
endwhile;
?> 
```

您将获得一系列值，而不仅仅是一个简单的字符串，因为两个值使用相同的键。通过在 get_post_meta 中将第三个参数设置为“true”（如我们上面的示例所示），您指定返回值*必须*是字符串。

只要玩弄它，你就会明白我的意思。希望这可以帮助。

# c# - EF Context.SaveChanges() 什么都不做

> ID：12569618
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:02:21.167
> 
> 标签：c#, entity-framework

```
try 
{
    Context.SaveChanges();
}
catch(Exception e)
{
     Log(e);
}
finally
{
    Log("Complete");
} 
```

当调用 Context.SaveChanges() 时，它会静默失败。不会抛出异常，并且永远不会命中 finally 子句。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:58:16.387

最后我的问题是我的 POCO 文件与数据库不匹配:(我想知道为什么虽然没有抛出异常......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:49:18.683

您的 Log 方法应该有问题。

它是否具有适当的功能重载。

# c# - 正确的 SqlConnection 声明

> ID：12569623
> 
> 赞同：0
> 
> 时间：2012-09-24T17:03:02.800
> 
> 标签：c#, sql-server-2008, sqlconnection

问题是我将我的`SqlConnection`用作公共静态连接，认为这可能是导致表单不时出现错误的问题：

> *连接未打开或连接已打开

那么`SqlConnection`在静态类中使用一个语句可以吗？

这样我就可以只*声明*一次，我知道我可以`connectionString`使用`web.config`

```
ConfigurationManager.ConnectionStrings["conn"].ConnectionString ... 
```

但我喜欢它与`web.config`设置或服务器名称无关。

*   重新编辑：

因为它实际上是同一个类中的两个方法，所以该主类中还有另一个类，但这并不是重要的，而是对所有执行使用相同的连接！所以你说即使我用我的助手类的正确代码重新编辑这是错误的？

```
public static class myDBhelper
{
 public static SqlConnection Conn = new SqlConnection ("server=(local);Initial Catalog=dbName;Integrated Security=True");

        public static int ExecSQLint(string TblintSQL)
        {
            int anIntValue=0;
            SqlCommand TblintCMD = new SqlCommand(TblintSQL, Conn);
            try
            {
                Conn.Open();
                anIntValue = Convert.ToInt32(TblintCMD.ExecuteScalar());
            }
            catch (System.Data.SqlClient.SqlException ex)
            {
                throw new Exception("No Can Do: " + ex.Message);
            }
            finally
            {
                Conn.Close();
            }
          return anIntValue;
        }

        public static string ExecSQLstring(string TblStrSQL)
        {
          string strValue="";
          SqlCommand TblStrCMD = new SqlCommand(TblStrSQL, Conn);
            try
            {
                Conn.Open();
                strValue = TblStrCMD.ExecuteScalar().ToString();
            }
            catch (System.Data.SqlClient.SqlException ex)
            {
                throw new Exception("No Can Do: " + ex.Message);
            }
            finally
            {
                Conn.Close();
            }

            return strValue;
        }

} 
```

我怀疑的主要问题是这两个选项：

```
SqlConnection Conn = new SqlConnection("Data Source=(local);Integrated Security=True;database=dbName") 
```

在我的`DBhelper`课堂上，我使用了这个声明

```
SqlConnection Conn = new SqlConnection("server=(local);Initial Catalog=dbName;Integrated Security=True"); 
```

那会不稳定或容易出错吗？

ps：我正在通过try catch执行命令

```
 try
            {
                Conn.Open();
                cmd.ExecuteNonQuery();
            }
            catch (System.Data.SqlClient.SqlException ex)
            {
                throw new Exception("No Can Do: " + ex.Message);
            }
            finally
            {
                Conn.Close();
            } 
```

`Using`陈述更合适吗？虽然这不是我的问题，但我在想……如果我已经在尝试“按部就班”去做……

其中有什么方法实际上是**错误**的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:12:15.783

将连接保持为静态不是使用数据库连接的*常用方法*。当应用程序在 Web 或多线程环境中运行时，它可能会导致您提到的异常。

执行命令 1 的线程 1 与执行命令 2 的线程 2 的连接相同。您的前任：TblintCMD 和 TblStrCMD。当线程 1 完成后，它关闭了连接，同时线程 2 仍在执行*关闭连接的命令*

你的两个选项都不是问题。

最好的方法是`using`在需要时使用关键字并创建连接：

```
using (var connection = new SqlConnection("yourConnectionString"))
{
    connection.Open();
    ...
} 
```

`using`类似于：

```
var connection =  new SqlConnection("connectionString");
try
{
    connection.Open();
    ....
}
finally
{
    connection.Close();
} 
```

因此，您无需知道何时关闭 Connection。

在幕后，ADO.NET 使用[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)自动为您管理连接，因此您不必太在意打开了多少连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:43:41.463

```
using(var conn=new. SqlConnection( "server=(local);Initial Catalog=dbName;Integrated Security=True"))
{
    conn.Open();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-09T08:58:02.397

```
public SqlConnection GetSqlConnection()
{
    SqlConnection sql = new SqlConnection();
    sql.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["SchoolContext"].ToString();
    return sql;
} 
```

# php - 期望参数

> ID：12569625
> 
> 赞同：0
> 
> 时间：2012-09-24T17:03:12.283
> 
> 标签：php, mysql, html, css

在这里我的连接查询出现问题..我不知道我的查询是否错误或其他问题出在哪里，但它给出的错误是

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in     C:\xampp\htdocs\project\teacher\courses-list.php on line 46 
```

这是我的代码，请修改代码，我不会发现问题.. :( courses-list.php

```
<?php
 if ($_SESSION["isteacher"])
{

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con)
{
die('Could not connect: ' . mysql_error());

}
mysql_select_db($dbname, $con);
$result = mysql_query("SELECT courses.id AS cid, courses.title, courses.description,    courses.subjects-id, subjects.id AS sid, subjects.subjectname AS sname FROM courses,    subjects WHERE (courses.subjects-id==subjects.id)");
echo "<table border='1'> <br />
<tr>
<th>ID:</th>
<th>Course Name</th>
<th>Description</th>
<th>Subject-ID</th>
<th>EDIT</th>
<th>DELETE</th>
</tr>";

while($row = mysql_fetch_array($result)) // this is the error line
{
echo "<tr>";
echo "<td>" . $row['cid'] . "</td>";
echo "<td>" . $row['title'] . "</td>";
echo "<td>" . $row['description'] . "</td>";
echo "<td>" . $row['sname'] . "</td>";
echo "<td><a href='courses-edit.php?id=" . $row['id']."'>EDIT</a></td>";
echo "<td><a href='courses-delete.php?id=" . $row['id']."'>DELETE</a></td>";
echo "</tr>";
}
echo "</table>";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:07:01.887

这是错误

```
 $result = mysql_query("SELECT courses.id AS cid, courses.title, courses.description,    courses.subjects-id, subjects.id AS sid, subjects.subjectname AS sname FROM courses,    subjects WHERE (courses.subjects-id==subjects.id)"); 
```

应该

```
$result = mysql_query("SELECT courses.id AS cid, courses.title, courses.description,    courses.subjects-id, subjects.id AS sid, subjects.subjectname AS sname FROM courses,    subjects WHERE (courses.subjects-id=subjects.id)"); 
```

错误部分是

```
subjects WHERE (courses.subjects-id==subjects.id)");
        here is the error ---------^^--------sould be = 
```

也[**请避免甚至不使用`mysql_*`php 手册显示有关使用 mysqli 或 PDO 的消息**](http://php.net/manual/en/function.mysql-query.php)

# winforms - 是否 System.Windows.Forms.Application.Run(form); 需要 form.Dispose()？

> ID：12569630
> 
> 赞同：3
> 
> 时间：2012-09-24T17:03:33.963
> 
> 标签：winforms

根据[MSDN](http://msdn.microsoft.com/en-us/library/aw58wzka.aspx)

> 如果使用 Show 方法显示表单，则会自动调用 Dispose。如果使用了其他方法（如 ShowDialog），或者根本不显示表单，则必须在应用程序中自己调用 Dispose。

如果我通过启动表单会发生什么

`System.Windows.Forms.Application.Run(form);`?

关闭表单允许继续执行。如果我在块之后调用 form.ShowDialogue() 它会抛出一个`ObjectDisposedException`. `form.Dispose()`可以肯定的是，在通过启动表单时我是否需要打电话，`Application.Run()`或者这样做有什么好处或坏处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:35:05.173

ApplicationContext 类控制 UI 线程的生命周期。它的 ExitThread() 方法启动退出内部消息循环的关闭。当您使用 Application.Run(Form) 重载时，Winforms 会使用 ApplicationContext(Form) 构造函数创建一个 ApplicationContext。它订阅表单的 HandleDestroyed 事件，事件处理程序调用 ExitThread()。

所以生命周期完全取决于窗体的本机 Windows 窗口是否处于活动状态。销毁该窗口的两种常见方法是用户单击窗口的关闭按钮或您的应用程序调用 Close 或 Dispose 方法。无论哪种方式，表单都会自动处理。在此之后表单对象已死，试图恢复它会抛出 ODE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:06:51.013

发布后不久，我在[MSDN的另一个区域找到了答案](http://msdn.microsoft.com/en-us/library/ms157902.aspx)

> Form 类的 Dispose 方法将在该方法返回之前被调用。

# sql - 在日期时间字段上使用 T-SQL 中的 LEAST 之类的东西

> ID：12569633
> 
> 赞同：2
> 
> 时间：2012-09-24T17:03:46.053
> 
> 标签：sql, sql-server, tsql, datetime

> **可能重复：**
> [在 sql 中获取两个值中的最小值](https://stackoverflow.com/questions/1947753/getting-the-minimum-of-two-values-in-sql)

好的，我有一个包含两个日期时间字段的表，我想选择最早日期等于某个日期变量的行。我在某处看到了 LEAST 函数，但我不能在 T-SQL 中使用它

我需要这样的东西

```
SELECT LEAST(date1, date2) as theDate FROM theTable WHERE theDate = '2012-09-24' 
```

但这将在 T-SQL 中工作。date1 或 date2 有时也可能为空，因此了解这一点可能很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:23:40.600

其他人提供的 CASE 解决方案适用于两个值的情况（没有双关语）。为了将来参考，对于三个或更多值来说它变得有点笨拙，然后你可能想要做这样的事情：

```
SELECT (SELECT MIN(mydate) 
        FROM (VALUES(date1),(date2),(date3)) mylist(mydate)
       ) AS theDate
FROM theTable 
WHERE theDate = '2012-09-24' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T17:05:10.993

T-SQL 中没有这样的功能。尝试：

```
SELECT theDate = CASE WHEN date1 < date2 THEN date1 ELSE date2 END FROM ... ; 
```

要处理 NULL，您可能需要：

```
SELECT theDate = NULLIF(CASE WHEN date1 < date2 THEN date1 ELSE date2 END, '20301231')
FROM 
(
  SELECT 
    date1 = COALESCE(date1, '20301231'), 
    date2 = COALESCE(date2, '20301231')
  FROM ...
) AS x; 
```

此外，您不能`theDate`在`WHERE`子句中引用别名，它还不存在。你可能想说：

```
WHERE '20120924' IN (date1, date2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:25:04.050

虽然其他答案确实有效，但这里是 UDF 的形式，它更接近您的要求：

```
CREATE FUNCTION [dbo].[LeastDate] (@d1 datetime, @d2 datetime)
RETURNS datetime
AS
BEGIN
    DECLARE @least datetime

    IF @d1 is null or @d2 is null
        SET @least = null
    ELSE IF @d1 < @d2
        SET @least = @d1
    ELSE
        SET @least = @d2

    RETURN @least
END 
```

用法：

```
SELECT dbo.LeastDate(date1, date2) as theDate
FROM theTable
WHERE dbo.LeastDate(date1, date2) = '2012-09-24' 
```

或者您可以使用嵌套选择仅执行一次：

```
SELECT * FROM (
  SELECT dbo.LeastDate(date1, date2) as theDate FROM theTable
) t
WHERE theDate = '2012-09-24' 
```

请注意，在 where 子句中单独调用函数或使用嵌套选择的选择与任何 SQL 函数的选择相同，而不仅仅是这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T17:05:30.227

您可以使用 a `case`to mimic`least`和一个子查询，以便您可以在子句中引用`case`结果：`where`

```
select  *
from    (
        select  case 
                when date1 > date2 or date1 is null then date2
                else date1
                end as theDate
        ,       *
        from    TheTable
        )
where   theDate = '2012-09-24' 
```

# c - C中有序数组二分查找的实现

> ID：12569634
> 
> 赞同：2
> 
> 时间：2012-09-24T17:03:46.710
> 
> 标签：c, arrays, search, binary-search

我编写了以下程序来实现排序数组的二进制搜索：

```
 int flag=0;

    void binarysearch(int x, int a[], int m, int n)
    {
        int middle=(m+n)/2;
        if(a[middle]==x)
        {
            printf("%d has been found at postion %d!\n", x, middle+1);
            flag=1;
        }
        else
        if(x > a[middle])
            binarysearch(x, a, middle, n);
        else
        if(x < a[middle])
            binarysearch(x, a, m, middle);
    }

    main()
    {
        int i, size, x;
        int a[100];
        printf("Enter the size of the list : ");
        scanf("%d", &size);
        printf("Enter the list items in ascending order : \n");
        for (i=0; i<size; i++)
        scanf("%d", &a[i]);
        printf("Enter the element to be found : ");
        scanf("%d", &x);
        binarysearch(x, a, 0, size-1);
        if(flag != 1)
        printf("%d has not been found in the list!", x);
    } 
```

这个程序的问题是，`binarysearch`如果尝试搜索不在列表中的项目，该函数会一遍又一遍地递归调用自己。因此，`flag`变量变得完全没有意义。

程序是否有可能告诉用户他是否正在尝试执行这样的搜索（搜索不在数组中的东西）？

我假设这是不可能的，因为它是二进制搜索算法中的一个基本缺陷。请赐教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T17:08:09.433

`m == n`在开始时检查。

```
if(m == n)
{
    if(a[n] == x) { printf("found\n"); }

    return;
} 
```

如果没有`x`，你继续用`middle == n`and称呼自己`middle == m`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:10:56.037

您的函数应该使用返回值并返回在数组中找到它的索引

```
 int binarysearch(int x, int a[], int m, int n)
{
    int middle=(m+n)/2;
    if(a[middle]==x)
    {
        printf("%d has been found at postion %d!\n", x, middle+1);
        return middle;
    }
    else
    if(x > a[middle])
        return binarysearch(x, a, middle, n);
    else
    if(x < a[middle])
        return binarysearch(x, a, m, middle);

   //if it is not found in the whole array
   return -1;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:09:39.797

您需要一个简单的案例来打破递归，即`n == m`. 如果这成立 和`x != a[middle]`，那么这个元素不在数组中：

```
void binarysearch(int x, int a[], int m, int n)
    {
        int middle=(m+n)/2;
        if(n == m && x != a[middle])
        {
            printf("%d is not in the array", x);
            return;
        }
//... 
```

或者你的 if else 风格：

```
void binarysearch(int x, int a[], int m, int n)
    {
        int middle=(m+n)/2;
        if(n == m && x != a[middle])
        {
            printf("%d is not in the array", x);
        }
        else
        if(a[middle]==x)
//... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:10:02.807

我认为您对递归缺乏一些基本的了解。递归函数在达到其基本情况时应返回值。如果您知道我的意思，您的代码最终会导致“StackOverflow”:)

# android - 如何在 ActionBarSherlock 导航微调器中包装文本内容

> ID：12569635
> 
> 赞同：9
> 
> 时间：2012-09-24T17:03:48.497
> 
> 标签：android, android-layout, spinner, actionbarsherlock, android-spinner

我正在尝试包装我的 ActionBar 导航微调器的文本内容（我正在使用 ActionBar Sherlock）。似乎我的微调器采用了下拉列表中包含的项目的宽度。

如何使微调器中的选定项目根据其宽度“包裹”？可以在 GMaps 操作栏微调器中找到一个示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:49:58.383

实际上，android 会尝试为所有项目调用 getView()，并将微调器的宽度设置为最宽。请参考我在另一个线程中的解决方案。[https://stackoverflow.com/a/15356679/2159849](https://stackoverflow.com/a/15356679/2159849)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T12:14:42.260

**更新：**

*在此处下载我的示例项目：[微调器宽度测试（Dropbox 文件夹）](https://www.dropbox.com/sh/zri8pbftymh4rf9/dBFicjQzGc) （它包含此答案中提供的两种解决方案）。*

由于字符的字距调整（字母间距）因文本而异，微调器的宽度也改变了宽度我之前发布的答案（下）

所以不用子串标题，只需像这样设置 TextView 的宽度（以像素为单位）：

```
textView.setWidth(200); 
```

*   文本现在将被截断并以“..”结尾。

*   微调器的宽度保持不变。

*   您可以为下拉列表和微调器设置不同的宽度

*   您仍然需要自定义 SpinnerAdapter，但不需要自定义
    SpinnerItem 类，只需给适配器一个 String[] 数组即可。

> spinner.setAdapter(new TruncatedSpinnerAdapter(stringArray));//String[]

在 TruncatedSpinnerAdapter 中：

```
public class TruncatedSpinnerAdapter implements SpinnerAdapter {

    String[] spinnerItem;

    public TruncatedSpinnerAdapter(String[] spinnerItem) {
        this.spinnerItem = spinnerItem;
    }

//    ...more required interface callbacks here...

    /**
     * Returns the View that is shown when a spinner item is selected.
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = getLayoutInflater().inflate(
                android.R.layout.simple_spinner_item, null);
        TextView textView = (TextView) view.findViewById(android.R.id.text1);
        textView.setText(spinnerItem[position]);
        //Set the width of the TextView in pixel. 
        //the text will now get truncated and ending with ".."
        textView.setWidth(200);
        return textView;
    } 
```

**更新前的回答：**

您可以通过创建自定义 SpinnerAdapter 来包装文本，您可以在其中控制在微调器视图和微调器下拉视图中显示的文本的长度。

```
 /**
     * A SpinnerItemAdapter to handle SpinnerItem Objects, 
     * displays the ArrayList of SpinnerItem Objects.
     */
    public class SpinnerItemAdapter implements SpinnerAdapter{

        /**
         * The internal data, ArrayList of SpinnerItem Objects.
         */
        SparseArray<SpinnerItem> spinnerItem;

        public SpinnerItemAdapter(SparseArray<SpinnerItem> spinnerItem){
            this.spinnerItem = spinnerItem;
        }

        /**
         * Returns the Size
         */
        @Override
        public int getCount() {
            return spinnerItem.size();
        }
        /**
         * Returns a SpinnerItem Object at the specified position.
         */
        @Override
        public Object getItem(int position) {
            return spinnerItem.valueAt(position);
        }

//    ...more required interface callbacks here...

        /**
         * Views displayed when the Spinner is clicked, the drop 
         * down list of spinner items.
         */
        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            View view=getLayoutInflater().inflate(android.R.layout.simple_spinner_dropdown_item, null); 
            TextView v=(TextView)view.findViewById(android.R.id.text1);
            v.setText(spinnerItem.valueAt(position).getDropDownTitle());     
            return v;
        }
        /**
         * Returns the View that is shown when a spinner item is selected.
         */
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view=getLayoutInflater().inflate(android.R.layout.simple_spinner_item, null); 
            TextView v=(TextView)view.findViewById(android.R.id.text1);
            v.setText(spinnerItem.valueAt(position).getShortTitle());   
            return v;
        }

    } 
```

使用自定义 SpinnerItem 类填充适配器，该类可以保存并返回微调器视图的缩短标题。

```
class SpinnerItem {

    // SpinnerItem fields, including variable of type SpinnerItem
    public String title = "";
    // sets the width of the spinnerItem
    public int titleLength = 10;//default value
    public int titleDropDownLength = 20;

    public long id;

    // SpinnerItem methods()

    /**
     * Title with max characters displayed, set by titleLength;
     * 
     * @return title of the spinnerItem.
     */
    public CharSequence getShortTitle() {
        if (title.length() == 0)
            return "?";//
        else if (title.length() > 0 && title.length() <= titleLength) {
            return title;
        } else {
            String shortTile = title.substring(0, titleLength).trim() + "..";
            return shortTile;
        }
    }

    public CharSequence getDropDownTitle() {
        if (title.length() == 0)
            return "?";//
        else if (title.length() > 0 && title.length() <= titleDropDownLength) {
            return title;
        } else {
            String shortTile = title.substring(0, titleDropDownLength).trim() + "..";
            return shortTile;
        }
    }
} 
```

使用 SpinnerItem 类，您可以通过在创建 SpinnerItem 对象时设置 MAX 标题长度来控制微调器项目视图中显示的标题长度。

```
//Create an ArrayList for the Adapter with SpinnerItems
        SparseArray<SpinnerItem> spinnerItems = new SparseArray<SpinnerItem>();

        //Some dummy Cheese titles for the spinner items
        String[] sCheeseStrings = {
               "Abbaye de Belloc", "Abbaye du Mont des Cats", "Abertam", "Abondance", "Ackawi",
               "Acorn", "Adelost", "Affidelice au Chablis", "Afuega'l Pitu", "Airag", "Airedale"};

        for (int i = 0; i < sCheeseStrings.length; i++) {
            SpinnerItem spinnerItem= new SpinnerItem(); 
            spinnerItem.title=sCheeseStrings[i];
            spinnerItem.id=i;
            spinnerItem.titleLength=MAX_TITLE_LENGTH;
            spinnerItem.titleDropDownLength=MAX_DROP_DOWN_TITLE_LENGTH;
            spinnerItems.append(i, spinnerItem);
        }
        spinnerAdapter = new SpinnerItemAdapter(spinnerItems); 
```

然后将 spinnerAdapter 添加到 Spinner

```
spinner.setAdapter(spinnerAdapter); 
```

ActionBar：menu.xml 示例中的微调器

```
 // For API below 11 use ActionBar Sherlock with Android Support Library
//       getSupportMenuInflater().inflate(R.menu.activity_menu, menu);
        // For API above 11
        getMenuInflater().inflate(R.menu.activity_menu, menu);
        spinner_menu = (Spinner) menu.findItem(R.id.menu_spinner).getActionView();
        spinner_menu.setAdapter(spinnerAdapter); 
```

# jquery - 在移动网站上查看桌面版本？

> ID：12569637
> 
> 赞同：0
> 
> 时间：2012-09-24T17:04:07.700
> 
> 标签：jquery, redirect, mobile, jquery-mobile, browser-detection

如果您从移动设备查看我的主站点，我会将其重定向到移动版本，我想使用媒体查询，但这不是该站点的选项。在移动版本上，我想实现“查看桌面版本”。
但是我不确定这样做的正确/最佳方法。我正在使用来自
[http://detectmobilebrowsers.com](http://detectmobilebrowsers.com)的 Dectect 移动浏览器插件。
如果插件返回 true（意味着您正在从移动浏览器查看），则主站点会重定向您。如何添加`"View Desktop Version"`按钮并绕过检测插件？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:20:15.557

您可以使用 jQuery 设置一个 cookie 来记住当前状态。

在您的主站点中，您的代码可以更新为以下内容（伪代码）：

```
show_desktop_site = $.cookie('show_desktop_site') AND NOT IsMobileBrowser; 
```

`IsMobileBrowser`将是来自 detectmobilebrowsers.com 脚本的响应。

`$.cookie('show_desktop_site')`是当用户选择去查看桌面站点时在移动站点中设置的 jQuery Cookie。参见例如[http://archive.plugins.jquery.com/project/Cookie](http://archive.plugins.jquery.com/project/Cookie) - 许多选项都在那里。

您可以基于 重定向用户`show_desktop_site`。

# php - PHP 邮件程序 SMTP 错误

> ID：12569638
> 
> 赞同：0
> 
> 时间：2012-09-24T17:04:19.017
> 
> 标签：php, smtp, gmail, phpmailer

您好我正在使用 phpMailer 发送电子邮件。它在服务器上工作正常，但是当我尝试从本地机器（localhost）发送邮件时，它给了我错误。我正在使用 GMAIL smtp

```
<?
require("lib/class.phpmailer.php"); 
$mail = new PHPMailer();
$mail->IsSMTP(); 
$mail->SMTPAuth = true;
$mail->Mailer = "smtp";
$mail->Host = "ssl://smtp.gmail.com";
$mail->Port = 465; 
$mail->Username = "XXX@XXX.com";  // SMTP username
$mail->Password = "XXXXXXX"; // SMTP password
$mail->From = $email; 
$mail->AddAddress("XXXXXX@XXX.com", "XX XX XX");
$mail->WordWrap = 50;
$mail->IsHTML(true); 
$mail->Subject = "You have received feedback from your website!";
$mail->Body    = $message;
$mail->AltBody = $message; 
if(!$mail->Send())
 {
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
    exit;
 }

 }
 ?> 
```

错误是

```
SMTP Error: Could not connect to SMTP host. Message could not be sent.

Mailer Error: SMTP Error: Could not connect to SMTP host. 
```

它在我的服务器上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:10:43.790

好的，我在本地得到了它，这是我使用的代码

```
<?php
    require("phpmailer/class.phpmailer.php");
    $mail = new PHPMailer();
    $mail->IsSMTP(); // send via SMTP
    IsSMTP(); // send via SMTP
    $mail->SMTPAuth = true; // turn on SMTP authentication
    $mail->Username = "username@gmail.com"; // SMTP username
    $mail->Password = "password"; // SMTP password
    $webmaster_email = "username@doamin.com"; //Reply to this email ID
    $email="username@domain.com"; // Recipients email ID
    $name="name"; // Recipient's name
    $mail->From = $webmaster_email;
    $mail->FromName = "Webmaster";
    $mail->AddAddress($email,$name);
    $mail->AddReplyTo($webmaster_email,"Webmaster");
    $mail->WordWrap = 50; // set word wrap
    $mail->IsHTML(true); // send as HTML
    $mail->Subject = "This is the subject";
    $mail->Body = "This is the HTML BODY "; //HTML Body
    $mail->AltBody = "This is the body when user views in plain text format"; //Text Body
    if(!$mail->Send())
    {
    echo "Mailer Error: " . $mail->ErrorInfo;
    }
    else
    {
    echo "Message has been sent";
    }
    ?> 
```

# image - 在 Windows 8 Metro App 中将图像从“我的图片”文件夹保存到本地应用程序文件夹

> ID：12569642
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:04:36.663
> 
> 标签：image, binding, windows-8, microsoft-metro, windows-runtime

我正在使用一个按钮从图片文件夹中选择一个图像，我想要将所选图像保存到应用程序的本地存储中，以便能够使用 GridView 中的绑定显示该图像。这可能吗？我怎么能做到？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:38:53.290

你会这样做：

```
FileOpenPicker openPicker = new FileOpenPicker();
openPicker.ViewMode = PickerViewMode.Thumbnail;
openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
openPicker.FileTypeFilter.Add(".jpg");
openPicker.FileTypeFilter.Add(".jpeg");
openPicker.FileTypeFilter.Add(".png");

StorageFile file = await openPicker.PickSingleFileAsync();
if (file != null)
{
    await file.CopyAsync(Windows.Storage.ApplicationData.Current.LocalFolder);
} 
```

# android - 如何避免在我的 Android 应用上不必要地重新加载 Google Ads

> ID：12569650
> 
> 赞同：1
> 
> 时间：2012-09-24T17:05:11.747
> 
> 标签：android, android-activity, admob, adsense

我做了一个Andriod App，它是一个打字游戏，有几个级别。问题是每次播放器失败时我都会在屏幕底部显示广告（因为如果你输入错误，你就会失败）

所以问题是每次播放器失败时，活动都会重新加载以重新开始。因此，广告正在重新加载并执行另一个请求。

我尝试搜索是否有任何方法可以避免这种情况，但我无法做到。

所以我想做的，就是在游戏第一次加载的时候做 Adrequest，然后就让它可见或不可见。

顺便说一下，如果你想看看这个应用程序在 google play 中： [Doctor Key](https://play.google.com/store/apps/details?id=com.hardsoft.dockey)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:16:12.193

我会重新设计你的`Activity`，这样它就不必每次重新开始时都重新创建自己。也许 add`reset()`和`setLevel()`方法可以重新初始化所有内容并为您正在执行的任何级别设置状态。

或者，您可以考虑使用`Fragments`. `Fragment`然后您只需替换关卡片段，同时将广告部分保留在不会受到影响的单独部分中。

# c# - 如何在 Caliburn Micro 的单个窗口中使用多个 IEventAggregator？

> ID：12569651
> 
> 赞同：0
> 
> 时间：2012-09-24T17:05:12.203
> 
> 标签：c#, .net, wpf, caliburn.micro

我有一个 ShellWindow，它有一个 IEventAggregator，我所有的孩子都发布到这个 IEventAggregator?。

现在我有一个名为 JIMSMessage 的静态类，我在其中发布到 ShellViewModel 的 IEventAggregator。

```
public static class JIMSMessage
{
    public static bool Show(IEventAggregator _events, string message)
    {
        _events.Publish(new Message()
        {
            MessageValue = message
        });

        return true;
    }        
} 
```

我希望 Show 方法的返回值来自调用此方法的 ViewModel。

可以说...

我有一个名为 LedgerViewModel 的 ViewModel，它调用 JIMSMessage.Show 如下，

```
JIMSMessage.Show(_events,"Enter Ledger Name."); 
```

它的工作，但我的 MessageWindowViewModel 返回一些东西，我想返回到 JIMSMessage 类，我该怎么做。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:36:13.463

我不认为这`EventAggregator`真的是为了那样工作。它用于向关心接收这些事件的任何人发布事件，或者如果有兴趣收到有关事件的警报，则用于订阅事件。

它并不意味着用于在同一方法中进行调用并等待返回值。

您可以做的是发布类似`ShowMessage`事件的内容，然后订阅以接收`MessageShown`事件。

例如，您`ShellViewModel`可能订阅接收 MessageDisplayed 事件消息并像这样处理它们：

```
public ShellViewModel(IEventAggregator events)
{
    // Subscribe to MessageDisplayed events
    events.GetEvent<MessageDisplayedEvent>().Subscribe(HandleMessageDisplayed);
}

void HandleMessageDisplayed(MessageDisplayedEvent e)
{
    if (e.SomeBooleanProperty)
        // Do Work
} 
```

在您的应用程序的其他地方，您可以发布 ShowMessage 事件以显示消息

```
// Broadcast an Event
_events.GetEvent<ShowMessageEvent>().Publish(
    new ShowMessageEvent{ Message = "Enter Ledger Name." }); 
```

任何负责显示消息的类都会订阅接收`ShowMessageEvent`、显示消息、等待用户反馈，然后`MessageDisplayed`在完成时广播一个带有结果的事件。

此外，如果您有兴趣，我[为 EventAggregator 编写了一个静态类，](http://rachel53461.wordpress.com/2011/10/09/simplifying-prisms-eventaggregator/)它使处理 PRISM`EventAggregator`变得更加简单。您可能有兴趣检查一下。

# eclipse - 在eclipse中为“maven-scala-plugin”设置maven插件连接器

> ID：12569652
> 
> 赞同：0
> 
> 时间：2012-09-24T17:05:22.263
> 
> 标签：eclipse, scala, maven-2

我正在为 Scala 导入一个现有的 Maven 项目。Eclipse 提示我为插件“maven-scala-plugin”版本 2.13.1“设置 maven 插件连接器”，但有两个目标以红色突出显示，没有可供选择的选项支持。

哪些插件可用于支持 compile 和 testCompile 目标？

Eclipse 是 3.7.2，但我不喜欢这个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:59:22.360

您不需要支持 compile 和 testCompile 目标，编译由 scala-ide 完成。您需要在 pom.xml 中添加以下内容：

```
<pluginManagement>
  <plugins>
    <plugin>
      <groupId>org.eclipse.m2e</groupId>
      <artifactId>lifecycle-mapping</artifactId>
      <version>1.0.0</version>
      <configuration>
        <lifecycleMappingMetadata>
          <pluginExecutions>
            <pluginExecution>
              <pluginExecutionFilter>
                <groupId>net.alchim31.maven</groupId>
                <artifactId>scala-maven-plugin</artifactId>
                <versionRange>[3.1.0,)</versionRange>
                <goals>
                  <goal>add-source</goal>
                  <goal>compile</goal>
                  <goal>testCompile</goal>
                  <goal>doc</goal>
                  <goal>doc-jar</goal>
                </goals>
              </pluginExecutionFilter>
              <action>
                <ignore />
              </action>
            </pluginExecution>
          </pluginExecutions>
        </lifecycleMappingMetadata>
      </configuration>
    </plugin>
  </plugins>
</pluginManagement> 
```

这告诉您的 m2e（eclipse 的 maven 插件）忽略适用于您的`scala-maven-plugin`. 您还必须更改`groupId`& `versionRange`。

# exception - 为什么在 XPage 上双击链接时总是得到 Nullpointer？

> ID：12569656
> 
> 赞同：1
> 
> 时间：2012-09-24T17:05:41.083
> 
> 标签：exception, nullpointerexception, xpages, xpages-ssjs

我有一个难题：当我快速单击同一个链接时，我的 webpace 上总是出现 Nullpointer 异常。或者当我快速重新加载页面时。这是我得到的错误：

```
java.lang.NullPointerException
    com.ibm.xsp.webapp.FacesServlet.acquireSyncToken(FacesServlet.java:285)
    com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:161)
    com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:138)
    com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1265)
    com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653)
    com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:476)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272) 
```

问题：有人可以详细解释一下这个 acquireSyncToken 的作用吗？也许那时我可以找到错误...

在我的 XPages 中，我使用

```
sessionScope.get(key) // same with applicationScope
sessionScope.put(key, value) // same with applicationScope 
```

很多；）我非常努力，例如将我的查找包装在

```
synchronize(applicationScope){
// lookups and so on...
} 
```

和类似的东西，但这只会让情况变得更糟，所以我删除了同步的东西......

**环境**：

```
Domino Server 8.5.3 FP1
XPages
testing on modern Browsers like FF, Chrome
MacOS / Win7 
```

**架构**：我有一个 BIG xPage，我基本上在其中添加了一些 CustomControls，并且由于当前的 URL 嵌入了另一个 XPage。在 CustomControls 和 XPages 中，我有更多的自定义控件，我添加了一些视图作为数据源，并在计算字段中使用“重复控件”和 SSJS 做了最疯狂的事情。重量级的 DB-Lookups 缓存在 applicationScope 中。

欲了解更多信息，请询问！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:05:26.127

这是一个已知的问题。IBM 建议从 FP1 或 FP2 降级到 8.5.3 或 UP1。

请参阅[Dojo xhrGet with sync:false issue with xe:viewJsonLegacyService 和 Domino 8.5.3 SP1](https://stackoverflow.com/questions/12166601/dojo-xhrget-with-syncfalse-issue-with-xeviewjsonlegacyservice-and-domino-8-5-3)或[http://www-01.ibm.com/support/docview.wss?uid=swg1LO71603](http://www-01.ibm.com/support/docview.wss?uid=swg1LO71603)

# javascript - 当 ViewModel 与构造函数模式一起使用时，KoGrid 的第二次绑定失败

> ID：12569657
> 
> 赞同：1
> 
> 时间：2012-09-24T17:05:50.493
> 
> 标签：javascript, jquery, data-binding, knockout.js

我正在使用 KoGrid 进行数据绑定。下面的代码似乎工作得很好：

var ViewModel = { PrizeCollection : ko.observableArray; }

然后用 PrizeCollection(data); 在代码中的某个地方绑定它 当我在模板中使用它时，它工作得很好，如下所示：

```
 <div data-bind="koGrid: { data: PrizeFulfilmentStatuses  , columnDefs: [ { field: 'Description', width: 140 },
                                        { field: 'Order', width: 100, headerClass: 'specialHeader' },
                                        { field: 'ColorHex',  width: 150,cellTemplate: 'editTemplate' },
                                        { field: 'Editable', width: 180, cellClass: 'specialCell' },
                                        { field: 'ID', width: 170 }, { field: 'Who', width: 170 }],
                             autogenerateColumns: false,
                             isMultiSelect: false,
                             enablePaging: true
                             }  "></div> 
```

这一切都很棒。我可以绑定一次，当新数据来自服务器时，我可以多次绑定它，它似乎工作得很好。

现在，当我制作我的 ViewModel 时，如下所示：

ViewModel = function(){ var PrizeCollection = ko.observableArray(); }

并且配合HTMl上的同一个模板使用，第一次数据加载完全不是问题。但是第二次加载它时，浏览器挂起，当我查看 firebug 时，它给了我以下错误：

```
data.column is not defined. 
```

基本上 data.column 是空的。

我不确定为什么相同的数据有问题。我也试过解除绑定

```
 ko.cleanNode(document.getElementById("KoGridContainer")); 
```

那也不是很有帮助

有什么建议么？

# jquery - 使用 Codeigniter 的 jquery 中不允许的键字符

> ID：12569671
> 
> 赞同：1
> 
> 时间：2012-09-24T17:06:58.667
> 
> 标签：jquery, codeigniter, safari

当我想在 Codeigniter 框架中使用 jQuery 加载图片时，Safari 浏览器出现问题。装载机被阻塞。当我使用 Firebug 时，我发现错误：

```
[uploader] responseText = Disallowed Key Characters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:45:10.760

请编辑您的配置文件以允许自定义字符

例如：$config['permitted_uri_chars'] = 'az 0-9~%.:_-@&';

# python - 识别icmpv6类型

> ID：12569673
> 
> 赞同：1
> 
> 时间：2012-09-24T17:07:14.953
> 
> 标签：python, networking, network-programming, scapy

在 python-scapy 中，我如何根据 icmpv6 类型进行过滤。例如，如果 icmpv6 类型为 135（邻居请求），我如何使用这种类型的表达式进行过滤：

```
if(x == 135):  
    do this 
```

我想在上面的表达式中找到 x。scapy 中有 TCP、UDP、IPv6 的标签，但没有 ICMPv6 的标签。例如，要访问数据包 p 中 IPv6 标头中的源地址参数，我可以使用 p[IPv6].src，因为标签 IPv6 存在于 scapy 中。但是如何访问 ICMPv6 参数呢？

如果使用 scapy 或此方法无法完成，请提出替代方法。这个问题困扰了我很久。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:12:40.220

你应该使用`Packet.haslayer('ICMPv6ND_NS')`...

```
>>> from scapy.all import rdpcap
>>> paks = rdpcap('ipv6.pcap')
>>> for idx, pak in enumerate(paks):
...     if pak.haslayer('ICMPv6ND_NS'):
...         print "Index %s: %s" % (idx, repr(pak))
...
Index 3: <Ether  dst=00:21:a0:50:ce:00 src=00:02:55:7b:b2:f6 type=0x86dd |
<IPv6  version=6L tc=0L fl=0L plen=32 nh=ICMPv6 hlim=255 
src=fe80::202:55ff:fe7b:b2f6 dst=fe80::221:a0ff:fe50:ce00 |
<ICMPv6ND_NS  type=Neighbor Solicitation code=0 cksum=0x8b54 R=0L S=0L 
O=0L res=0x0L tgt=fe80::221:a0ff:fe50:ce00 |<ICMPv6NDOptSrcLLAddr  type=1 
len=1 lladdr=00:02:55:7b:b2:f6 |>>>>
>>> 
```

仅供参考，这些是 ipv6.pcap 中的数据包...

```
[mpenning@Bucksnort ~]$ tshark -r ipv6.pcap
  1   0.000000 2000:fc50:1000:100:202:55ff:fe7b:b2f6 -> 2001:420:1101:1::a ICMPv6 Echo request
  2   1.007475 2000:fc50:1000:100:202:55ff:fe7b:b2f6 -> 2001:420:1101:1::a ICMPv6 Echo request
  3   2.014461 2000:fc50:1000:100:202:55ff:fe7b:b2f6 -> 2001:420:1101:1::a ICMPv6 Echo request
  4   4.997348 fe80::202:55ff:fe7b:b2f6 -> fe80::221:a0ff:fe50:ce00 ICMPv6 Neighbor solicitation
  5   4.998613 fe80::221:a0ff:fe50:ce00 -> fe80::202:55ff:fe7b:b2f6 ICMPv6 Neighbor advertisement
[mpenning@Bucksnort ~]$ 
```

# javascript - 如何在没有 Ajax 的情况下发布自定义关联，或从 Ajax POST 执行 HTML 重定向？

> ID：12569676
> 
> 赞同：0
> 
> 时间：2012-09-24T17:07:30.890
> 
> 标签：javascript, jquery, coffeescript, ruby-on-rails-3.2

我有两个数据表，我使用 Javascript 和 jQuery 将它们合并在一起。我想将此数据发布到 Rails 控制器操作，但操作的结果需要显示在另一个视图中，我有点厌倦了弄清楚如何从 AJAX POST 重定向到另一个操作（它只是拒绝显示）。

所以现在我的问题是，如何更改此代码以实际发布并重定向到另一个操作？

我的原始代码是：

```
submithash = {}
submithash['standard_id'] = $("#app_standard_id").val()
submithash['apps'] = apps

hash = { type: "POST", url: "create_all", data: submithash }
$.ajax(hash) 
```

这很有效，因为它正确地提交到我的 Rails 控制器操作，但当然似乎没有一种干净的方法可以从 Ajax 提交重定向并实际向用户显示实际页面。

我试过：

```
$form = $("<form>").attr("method", "post").attr("action", "create_all")
$("<input type='hidden'>").attr("name", "standard_id").attr("value", $("#app_standard_id").val()).appendTo($form)
$("<input type='hidden'>").attr("name", "apps").attr("value", apps).appendTo($form)
$form.submit 
```

但当然，那是行不通的。它甚至什么都不做，这有点奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:41:23.460

如果我正确理解您的问题，您希望在您对“create_all”的 ajax 调用完成时将您的页面重定向到另一个 url。

所以你可以像这样使用成功回调函数：

```
hash = { type: "POST", 
         url: "create_all", 
         data: submithash, 
         success: function(data){
            //Here you can write your redirection code 
            //this function will be called when ajax completes successfully
            window.location = "url"//redirect url;
            //or you can also start another ajax
         }
       };
$.ajax(hash); 
```

还可以在[这里查看 jquery.ajax()的文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:03:00.303

我最终使用了这个 jQuery 插件：

```
(function($) {
$.extend({
    getGo: function(url, params) {
        document.location = url + '?' + $.param(params);
    },
    postGo: function(url, params) {
        var $form = $("<form>")
            .attr("method", "post")
            .attr("action", url);

        $.each(params, function(name, value) {
            $("<input type='hidden'>")
                .attr("name", name)
                .attr("value", value)
                .appendTo($form);
        });
        $form.appendTo("body");
        $form.submit();
    }
});
})(jQuery); 
```

它使用您传递的任何内容即时构建一个表单，然后将其附加到文档中。然后它会执行常规 POST（或 GET，具体取决于您调用的内容）。

# html - 使用诸如 page-left-column-container-box-element-header 之类的 CSS 类是否有技术原因？

> ID：12569679
> 
> 赞同：1
> 
> 时间：2012-09-24T17:08:02.373
> 
> 标签：html, css, xhtml

为什么人们使用这种 CSS 和 HTML 来设置页面样式？

```
<div class="page">
  <div class="page-left-column">
    <div class="page-left-column-container-box">
      <div class="page-left-column-container-box-element-header-wrapper">
         <h2>This is the header!</h2>
      </div>
    </div>
  </div>
</div> 
```

上面的标记将伴随着这样的 CSS 规则：

```
.page-left-column-container-box-element-header-wrapper {
  color: red;
} 
```

为什么不这样写：

```
<div class="page">
  <div class="left column">
    <div class="container-box">
      <div class="element header-wrapper">
         <h2>This is the header!</h2>
      </div>
    </div>
  </div>
</div> 
```

然后制定 CSS 规则（也许并非所有这些都是必需的）：

```
.page .left.column .container-box .element.header-wrapper {
  color: red;
} 
```

据我所知，后者比第一个要好得多。指定 CSS 规则更容易，而不必到处复制粘贴所有内容，因为您可以指定诸如`.container-box .element`和之类的规则`.column .header-wrapper`。在我看来，这也使规则、代码和一切都更易于维护。唯一的缺点是，如果你像这样编写 CSS 规则：`.page .left.column .container-box .element.header-wrapper`那么选择器将依赖于深层 HTML 层次结构。但是，`page-left-column-container-box-element-header-wrapper`可能对层次结构没有如此强烈的依赖关系，但显然改变层次结构会让人想要更新“假”类名，不是吗？

我可以想象使用类名的唯一原因`page-left-column-container-box-element-header-wrapper`是，可能使用稍微“复杂”的选择器在计算上很昂贵，并且会使浏览器变慢。这是真的吗？还有其他我没有看到的与编程相关的/技术优势吗？还是只是使用多个元素、类和 id 的规则很复杂？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:11:17.080

这两个都是 CSS 的糟糕例子。

CSS 喜欢：

```
.page .left.column .container-box .element.header-wrapper 
```

太具体了，这意味着它的可重用性很小。

CSS 喜欢：

```
.page-left-column-container-box-element-header-wrapper 
```

就是一个字太长了。您可以轻松地将名称缩短为：

```
header-wrapper 
```

这意味着它可以很容易地在代码的其他地方使用，并且您可以轻松识别元素的用途，它包装了一个标题。

CSS 特殊性：

*   [http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)
*   [http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)
*   [http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

*请注意，我不完全同意这些链接上的某些内容，例如“从不”使用 ID*

简而言之，人们使用这些方法是因为他们在一半的时间里都不知道更好。

命名约定是一个相当主观的话题，然而，我个人认为 CSS 类和 ID 应该始终低于 20 个字符，如果不是 10 个字符。**但是**，它们应该是可以理解的。例如：

```
.pg-fl-r 
```

很穷……而：

```
.float-right, .page-float-r 
```

等是一种更好的方式。（这只是一个例子，我不一定建议使用这样命名的类。）

# css - URL 片段（#stuff）如何与 CSS 交互？

> ID：12569685
> 
> 赞同：1
> 
> 时间：2012-09-24T17:08:26.257
> 
> 标签：css, url, firefox, chromium

URL 片段如何与 CSS 交互？我有一个页面，说：`http://example.boom/is_this_a_bug.html`。该页面的代码显示在[https://gist.github.com/3777018](https://gist.github.com/3777018)

当我用这样的 URL 加载页面时，`.tab-pane`元素没有显示，因为它们溢出了它们的容器，并且它有一个`overflow: hidden`属性。

但是，如果我通过将有效片段 ( `#00`) 附加到 URL 来加载页面，那么`.tab-pane`会变得可见，就像`left:100%`没有考虑到一样。按下按钮只是删除和重置`left:100%`，然后我得到溢出的选项卡窗格。

这发生在 Firefox 15.0.1 和 Chromium 18.0.1025.168（开发人员内部版本 134367 Linux）Ubuntu 12.04 中。

任何想法为什么会发生这种情况？这是一个错误，还是在其他地方记录？

最好的祝福，

曼努埃尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:27:21.620

当您在 URL 中加载带有片段标识符的页面时，如果该片段标识符与页面上元素的 ID 匹配，则浏览器将滚动页面以显示该元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T01:46:36.557

另一种方法是使用 javascript 应用样式。

```
(function hashStyle() {

    if (window.location.hash == '#COLOR') {
        var css = document.createElement('style'),
            s = document.getElementsByTagName('script')[0],
            styles = 'body { background-color: #b0c4de; }';

        css.type = 'text/css';

        if (css.styleSheet) {
            css.styleSheet.cssText = styles;
        } else {
            css.appendChild(document.createTextNode(styles));
        }
        s.parentNode.insertBefore(css, s);
    }
})(); 
```

# jquery - Jquery 文件不会为元素分配随机高度和宽度

> ID：12569687
> 
> 赞同：0
> 
> 时间：2012-09-24T17:08:45.070
> 
> 标签：jquery

正如标题所说：这行不通。该脚本确实移动了我想要移动的文章，如果我将选项放在选择器上，它也会对其进行动画处理，但它不会**随机化**元素的`height`and 。`width`所有元素的随机宽度为 127px，我无法理解。提取脚本的提到的 php 文件如下：

更新：

```
 <script type="text/javascript" src="<? bloginfo('stylesheet_directory'); ?>/js/jquery.freetile.min.js"></script>
    <script>
    jQuery(document).ready(function() {

    for (i=0;i<40;i++) {
        var w = 128 * (parseInt(Math.random() * 3) + 1) - 1,h = 128 * (parseInt(Math.random() * 3) + 1) - 1;
    jQuery('article').width(w).height(h);
    }

        jQuery('#content').freetile();
         selector: 'article';
         animate: true;
         elementDelay: 10
        });
    </script> 
```

这部分有什么问题吗？那会很奇怪，因为我从 github 存储库中复制并粘贴了它。

```
 for (i=0;i<40;i++) {
        var w = 128 * (parseInt(Math.random() * 3) + 1) - 1,h = 128 * (parseInt(Math.random() * 3) + 1) - 1;
    jQuery('article').width(w).height(h);
    } 
```

这是文件的链接： [https ://github.com/yconst/Freetile/blob/master/js/init.js](https://github.com/yconst/Freetile/blob/master/js/init.js)

谢谢ComputerArts，我已经接受了你的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:14:59.980

随机化哪些元素的宽度和高度？你的问题可能是你没有传递任何东西`jQuery()`

```
// What are you trying to set the width/height of?
jQuery('').width(w).height(h) 
```

可能应该是这样的

```
jQuery('#content .selector-for-tiled-divs').width(w).height(h)... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:50:19.250

让我们解释一下你的代码

```
for (i=0;i<40;i++) {
    var w = 64 * (parseInt(Math.random() * 3) + 1) - 1,
    h = 48 * (parseInt(Math.random() * 3) + 1) - 1;

    //this part here is where the error happens.
    //you're asking to set the width and height to every element <content> on each iteration.
    //so on the last iteration, all the elements have the same width/height
    jQuery('content').width(w).height(h).appendTo('article');
} 
```

我相信[这](http://jsfiddle.net/ypVbc/)就是你想要的。

```
jQuery(document).ready(function() {
    for (i=0;i<40;i++) {
        var w = 64 * (parseInt(Math.random() * 3) + 1) - 1,
            h = 48 * (parseInt(Math.random() * 3) + 1) - 1;
        $('<div class="content" />').width(w).height(h).appendTo('body');
    }
}); 
```

# ruby-on-rails - Rails 和 codekit - 如何禁用 rails coffescript 编译

> ID：12569691
> 
> 赞同：0
> 
> 时间：2012-09-24T17:09:09.997
> 
> 标签：ruby-on-rails, coffeescript, asset-pipeline

我正在使用 rails 3.2，但我正在使用 CodeKit 编译我的咖啡文件。

我仍然希望我的咖啡文件存在于“资产”中，但是每次我重新启动 rails 时，它都会在其中找到它们并尝试自行编译它们。

我的文件位于 /assets/cafe/myscript.coffee 中，codekit 将它们编译成 /assets/javascripts/myscript.js

coffee-rails gem 已经在我的 gemfile 中被注释掉了（当 rails 尝试（重新）编译它时，它会给出“抛出错误（“LoadError：没有这样的文件要加载——coffee_script）”——尽管我真的不希望它甚至尝试编译。

在 application.rb 中设置“config.assets.compile = false”会导致“application.js 未预编译”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:05:42.167

您可能应该只配置您的 sprockets 清单以不需要整个树。

编辑 app/assets/javascripts/application.js

通常它看起来像这样：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

将其更改为

```
//= require jquery
//= require jquery_ujs
//= require myscript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:35:01.800

一种（劣质的）解决方法是将我的咖啡脚本放在“应用程序”而不是“资产”中（所以在树上再分支一个。）

这很糟糕，因为这不是他们应该去的地方，但至少它确实将它置于 Rails 的跟踪者倾向之外，以便在资产中的任何位置找到咖啡脚本文件并尝试编译它们。

# c# - 使用命令行启动进程后从 cmd 窗口接收文本

> ID：12569692
> 
> 赞同：0
> 
> 时间：2012-09-24T17:09:11.403
> 
> 标签：c#

我正在构建运行 Wireshark 并开始嗅探的应用程序，Wireshark 有 dumpcap.exe 文件，它接收参数（接口号、输出文件等）并开始嗅探，同时我可以在 cmd 窗口中看到数据包的数量，并且这个数量不断增长时间。我的问题是我如何每隔几秒钟捕捉一次这个数字，以便在我的应用程序窗口上显示这个数字。

这是我开始这个嗅探的班级：

```
public class DumpPcap
{
    public int _interfaceNumber;
    public string _pcapPath;
    public string _dumPcapPath = @"C:\Program Files\Wireshark\dumpcap.exe";

    public DumpPcap(int interfaceNumber, string pcapPath)
    {
        _interfaceNumber = interfaceNumber;
        _pcapPath = pcapPath;
    }

    public void startTheCapture()
    {
        List<string> stList = new List<string>();
        ProcessStartInfo process = new ProcessStartInfo(_dumPcapPath);
        process.Arguments = string.Format("-i " + _interfaceNumber + " -s 65535 -w " + _pcapPath);
        process.WindowStyle = ProcessWindowStyle.Hidden;
        process.RedirectStandardOutput = true;
        process.RedirectStandardError = true;
        process.CreateNoWindow = true;
        process.UseShellExecute = false;
        process.ErrorDialog = false;
        Process dumpcap = Process.Start(process);
        StreamReader reader = dumpcap.StandardOutput;
        //dumpcap.WaitForExit(100000);

        while (!reader.EndOfStream)
        {
            stList.Add(reader.ReadLine());
        }
    }
} 
```

这是屏幕截图，我用红色标记了我想在我的应用程序中显示的字段：

[http://image.torrent-invites.com/images/641Untitled.jpg](http://image.torrent-invites.com/images/641Untitled.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:03:24.097

而不是尝试从 中捕获输出文本，并`ProcessStartInfo`通过事件处理程序`Process`拦截输出数据？`OutputDataReceived`

试试这个替换你的代码块：

```
List<string> stList = new List<string>();

var process = new Process();
process.StartInfo.FileName = _dumPcapPath;
process.StartInfo.Arguments = 
    string.Format("-i " + _interfaceNumber + " -s 65535 -w " + _pcapPath);
process.Startinfo.WindowStyle = ProcessWindowStyle.Hidden;
process.Startinfo.RedirectStandardOutput = true;
process.Startinfo.RedirectStandardError = true;
process.Startinfo.CreateNoWindow = true;
process.Startinfo.UseShellExecute = false;
process.Startinfo.ErrorDialog = false;

// capture the data received event here...
process.OutputDataReceived += 
    new DataReceivedEventHandler(process_OutputDataReceived);

process.Start();
process.BeginOutputReadLine();

private void process_OutputDataReceived(object sender, DataReceivedEventArgs arg)
{
    // arg.Data contains the output data from the process...
} 
```

注意：我只是在没有编译或任何认真验证的情况下输入了这个，所以请注意，大声笑......

# python - 稀疏 python 向量的范数

> ID：12569695
> 
> 赞同：1
> 
> 时间：2012-09-24T17:09:28.577
> 
> 标签：python, numpy, scipy, sparse-array

是否有可能在python中有效地获得稀疏向量的范数？

我尝试了以下方法：

```
from scipy import sparse
from numpy.linalg import norm

vector1 = sparse.csr_matrix([ 0 for i in xrange(4000000) ], dtype = float64)

#just to test I set a few points to a value higher than 0

vector1[ (0, 10) ] = 5
vector1[ (0, 1500) ] = 80
vector1[ (0, 2000000) ] = 6

n = norm(t1) 
```

但后来我得到了错误：

```
ValueError: dimension mismatch 
```

norm 函数仅适用于数组，因此可能这就是 csr_matrix 不起作用的原因，但后来我没有找到另一种有效计算范数的方法。一种可能的解决方案是计算：

```
norm(asarray(vector1.todense())) 
```

但随后它首先扼杀了使用稀疏向量的目的。作为最后一种方法，我可以遍历向量的每个元素并手动计算范数，但由于效率非常重要，我一直在寻找更快、更容易实现的东西。

提前感谢您的帮助！

编辑：我尝试了所有建议，最好的解决方案是：

```
(vector1.data ** 2).sum() 
```

来自杜格尔。但是 Cython 解决方案也非常好，并且随着向量在不同零元素数量上的增长，效果更好。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:53:54.900

1.  I hope you are not really initializing and setting elements like that, those warnings are raised for a reason, and a 4M temporary list proofs you have plenty of resources left ;).
2.  Calculating a norm by hand is very simple, by just using the underlying data `vector1.data` directly. You can also use things like `vector1.multiply(vector1)` plus `.sum` or `vector1.dot(vector1.T)` but as Dougal pointed out, that can be much slower for this simple case.
3.  I guess you want to do more, but if you only want vector norms, going through sparse matrices seems like a lot of unnecessary work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:51:19.807

我这里刚好遇到同样的问题，我在cython中实现了一个函数来提高这个简单操作的速度。我用 4M 稀疏向量和 100k 非零元素对其进行了测试。使用 sqrt(vector.multiply(vector).sum()) 的方法使用了 874us 和我的函数 205us。

```
# sparseLib.pyx
#cython: boundscheck=False
from cython.parallel cimport prange
from cython.view cimport array as cvarray

import numpy as np

from libc.math cimport sqrt

cpdef double sparseNorm2(double [:] data) nogil:
  cdef long i
  cdef double value = 0.0
  for i in xrange(data.shape[0]):
    value += data[i]*data[i]
  return sqrt(value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:30:40.877

我不认为你的初始化正在做你认为的那样。

要使规范正常工作，您需要有一个方阵。如果你想制作一个有 400 万个元素的方形数组，你想做

`csr_matrix( (2000,2000), dtype=float64)`

[scipy](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html)初始化的完整文档

# windows - 错误：无法运行 ssh：尝试在 Windows 上克隆时没有此类文件或目录

> ID：12569705
> 
> 赞同：51
> 
> 时间：2012-09-24T17:09:53.193
> 
> 标签：windows, git, git-clone

我正在尝试在 Windows 上克隆一个远程存储库，但是当我这样做时：

```
git clone git@github.com:organization/xxx.git 
```

我收到了这个错误：

```
error: cannot run ssh: No such file or directory
fatal: unable to fork 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2018-05-30T00:18:37.707

检查您是否安装了`ssh-client`. 这解决了 docker 机器上的问题，即使存在 ssh 密钥：

```
apt-get install ssh-client 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-24T17:11:54.693

您没有安装 ssh（或在您的搜索路径中没有安装它）。

您也可以通过 http 从 github 克隆：

```
git clone http://github.com/organization/xxx 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-28T06:17:53.960

您很可能`GIT_SSH_COMMAND`引用了不正确的公钥。

尝试：

```
export GIT_SSH_COMMAND="ssh -i /home/murphyslaw/.ssh/your-key.id_rsa 
```

然后

```
git clone git@github.com:organization/xxx.git 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-03-03T12:02:02.083

我知道这是一个老话题，但是最近遇到了这个问题，我想在这里解决我的问题。

* * *

在这些情况下，您可能会遇到此错误：

*   您使用这样的 URL：`git@github.com:organization/repo.git`
*   然后你直接运行这样的命令：`git clone git@github.com/xxxxx.git`而你没有 ssh 客户端（或者它不在路径上）
*   或者您安装了 ssh 客户端（并且`git clone xxx.git`在直接命令行上工作正常）但是当您通过 shell 脚本文件运行相同类型的命令时

* * *

在这里，我假设您不想将协议更改`ssh git@`为`http://` ( `git@github.com:organization/repo.git`-> `http://github.com/organization/repo.git`)，就像我的情况一样，因为我需要`ssh`格式。

* * *

所以，

*   如果你没有 ssh 客户端，首先你需要安装它
*   如果仅在通过脚本执行时出现此错误，则需要`GIT_SSH_COMMAND`在 git 命令前面使用公共 ssh 密钥设置变量，如下所示：

> `GIT_SSH_COMMAND="/usr/bin/ssh -i ~/.ssh/id_rsa" git pull`

（根据您的情况随意更改）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-28T11:43:57.017

在我的防病毒软件将 cygwin ssh 二进制文件移动到病毒库并在之后将其恢复后，我就遇到了这个问题。

症状：

*   SSH 似乎已正确安装
*   SSH 可以毫无问题地从命令行运行

在这种特殊情况下重新安装 ssh 之前的另一个选项：检查`ssh`命令权限

```
$ ls -al /usr/bin/ssh.exe
----rwxrwx+
$ chmod 770 /usr/bin/ssh.exe 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-03T08:36:26.450

你也可以试试这些

```
ssh-add ~/.ssh/identity_file
chmod 400 ~/.ssh/identity_file 
```

# kinect - 如何使用骨骼关节作为光标使用边界（无手势）

> ID：12569706
> 
> 赞同：0
> 
> 时间：2012-09-24T17:09:56.350
> 
> 标签：kinect, xna-4.0

当我的骨骼关节 (x,y,z) 坐标超过按钮的 x,y,z 坐标时，我只想能够做一些事情。. 我有以下代码，但不知何故它不能正常工作。.只要我的手一动，它就会在我的手没有到达按钮的情况下做某事

```
 if (skeletonFrame != null)
                {
                    //int skeletonSlot = 0;
                    Skeleton[] skeletonData = new Skeleton[skeletonFrame.SkeletonArrayLength];
                    skeletonFrame.CopySkeletonDataTo(skeletonData);

                    Skeleton playerSkeleton = (from s in skeletonData where s.TrackingState == SkeletonTrackingState.Tracked select s).FirstOrDefault();

                    if (playerSkeleton != null)
                    {
                        Joint rightHand = playerSkeleton.Joints[JointType.HandRight];

                        handPosition = new Vector2((((0.5f * rightHand.Position.X) + 0.5f) * (640)), (((-0.5f * rightHand.Position.Y) + 0.5f) * (480)));

                        var rightHands = playerSkeleton.Joints[JointType.HandRight];
                        var rightHandsX = rightHands.Position.X;
                        var rightHandsY = rightHands.Position.Y;
                        var rightHandsZ = rightHands.Position.Z;

                        if (Math.Sqrt(Math.Pow(rightHandsX - position.X, 2) + Math.Pow(rightHandsY - position.Y, 2)) < 20)
                        {

                           // Exit();
                        }

if (Math.Sqrt(Math.Pow(rightHandsX - start_bttn.Bounds.X, 1) + Math.Pow(rightHandsY - start_bttn.Bounds.Y, 1)) < 10)
                        {

                            currentGameState = GameState.Selection;
                            // Exit();
                        }

if ((rightHandsX < GraphicsDevice.Viewport.Width / 2 + 150 && rightHandsX > GraphicsDevice.Viewport.Width / 2 - 75) && (rightHandsY > GraphicsDevice.Viewport.Height / 2 && rightHandsY < GraphicsDevice.Viewport.Height / 2 + 50))
                        {
                            currentGameState = GameState.Selection;

                        } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:44:02.930

这是我的手部跟踪功能。看看它是否符合您的要求，或者让您更接近...

```
 private void TrackHandMovement(Skeleton skeleton)
    {
        Joint leftHand = skeleton.Joints[JointType.HandLeft];
        Joint rightHand = skeleton.Joints[JointType.HandRight];

        Joint leftShoulder = skeleton.Joints[JointType.ShoulderLeft];
        Joint rightShoulder = skeleton.Joints[JointType.ShoulderRight];

        Joint rightHip = skeleton.Joints[JointType.HipRight];

        // the right hand joint is being tracked
        if (rightHand.TrackingState == JointTrackingState.Tracked)
        {
            // the hand is sufficiently in front of the shoulder
            if (rightShoulder.Position.Z - rightHand.Position.Z > 0.4)
            {
                double xScaled = (rightHand.Position.X - leftShoulder.Position.X) / ((rightShoulder.Position.X - leftShoulder.Position.X) * 2) * SystemParameters.PrimaryScreenWidth;
                double yScaled = (rightHand.Position.Y - rightShoulder.Position.Y) / (rightHip.Position.Y - rightShoulder.Position.Y) * SystemParameters.PrimaryScreenHeight;

                // the hand has moved enough to update screen position (jitter control / smoothing)
                if (Math.Abs(rightHand.Position.X - xPrevious) > MoveThreshold || Math.Abs(rightHand.Position.Y - yPrevious) > MoveThreshold)
                {
                    RightHandX = xScaled;
                    RightHandY = yScaled;

                    xPrevious = rightHand.Position.X;
                    yPrevious = rightHand.Position.Y;

                    // reset the tracking timer
                    trackingTimerCounter = 10;
                }
            }
        }
    } 
```

那里有一些数学可以将手的位置转换为屏幕位置。不同的人有不同的笔触，但我的逻辑是：

```
Shoulders = top of screen
Hips = bottom of screen
Left Should = left most on screen 
```

为了获得最右边的屏幕位置，我取左右肩之间的距离并将其添加到右肩。

# objective-c - 得到 -[CFURL 保留] 崩溃？

> ID：12569707
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:09:58.577
> 
> 标签：objective-c, ios

我在控制台上崩溃了

-[CFURL 保留]：发送到已释放实例 0x691edc0 的消息

我将一个 videourl 发送到另一个视图以在 MPMovieplayer 中播放视频。任何想法..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:21:54.490

你的问题很高级。在类似的高级别：在 Instruments 中启用 Zombies 的情况下运行。当您重现错误时，找到僵尸对象，并查看其引用计数历史/操作以确定引入不平衡的位置。

# python - python中的现有文件

> ID：12569711
> 
> 赞同：-3
> 
> 时间：2012-09-24T17:10:20.717
> 
> 标签：python

> **可能重复：**
> [检查文件是否存在的 Pythonic 方法？](https://stackoverflow.com/questions/2259382/pythonic-way-to-check-if-a-file-exists)

我是编程新手，所以请耐心等待。

我想知道，你怎么知道python中是否存在文件？

例如。~/file.txt

而不是一个目录，我的目录中的实际文件本身？如果“file.txt”存在，则返回 True 语句？

感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:12:00.323

模块的检查`exists()`和`isfile()`功能`os.path`..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:11:03.317

该[`os.path`模块](http://docs.python.org/library/os.path.html)是您的朋友：

```
import os

os.path.exists(filename) 
```

另请参阅[os.path.isfile()](http://docs.python.org/library/os.path.html#os.path.isfile)以测试给定文件是常规文件还是目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:11:37.840

调查[`os.path.exists`](http://docs.python.org/library/os.path.html#os.path.exists)。当然，这是行不通的，`~/file`因为`~`它是由你的 shell 扩展的。为此，存在[`os.path.expanduser`](http://docs.python.org/library/os.path.html#os.path.expanduser)

# javascript - Meteor：在 Meteor.method 中调用异步函数并返回结果

> ID：12569712
> 
> 赞同：39
> 
> 时间：2012-09-24T17:10:21.107
> 
> 标签：javascript, meteor

我想在 Meteor 方法中调用一个异步函数，然后将该函数的结果返回给 Meteor.call。

（如何）这可能吗？

```
Meteor.methods({
  my_function: function(arg1, arg2) {
    //Call other asynchronous function and return result or throw error
  }
}); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-25T17:14:50.810

使用 Future 来做到这一点。像这样：

```
Meteor.methods({
  my_function: function(arg1, arg2) {

    // Set up a future
    var fut = new Future();

    // This should work for any async method
    setTimeout(function() {

      // Return the results
      fut.ret(message + " (delayed for 3 seconds)");

    }, 3 * 1000);

    // Wait for async to finish before returning
    // the result
    return fut.wait();
  }
}); 
```

**更新**：

要从 Meteor 0.5.1 开始使用 Future，您必须在 Meteor.startup 方法中运行以下代码：

```
Meteor.startup(function () {
  var require = __meteor_bootstrap__.require
  Future = require('fibers/future');

  // use Future here
}); 
```

  **更新 2**：

要从 Meteor 0.6 开始使用 Future，您必须在 Meteor.startup 方法中运行以下代码：

```
Meteor.startup(function () {
  Future = Npm.require('fibers/future');

  // use Future here
}); 
```

然后使用`return`方法而不是`ret`方法：

```
Meteor.methods({
  my_function: function(arg1, arg2) {

    // Set up a future
    var fut = new Future();

    // This should work for any async method
    setTimeout(function() {

      // Return the results
      fut['return'](message + " (delayed for 3 seconds)");

    }, 3 * 1000);

    // Wait for async to finish before returning
    // the result
    return fut.wait();
  }
}); 
```

请参阅[此要点](https://gist.github.com/joscha/4130605)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-04T03:21:37.333

最近版本的 Meteor 提供了未记录`Meteor._wrapAsync`的函数，它将带有标准`(err, res)`回调的函数转换为同步函数，这意味着当前的 Fiber 产生直到回调返回，然后使用 Meteor.bindEnvironment 来确保您保留当前的 ​​Meteor 环境变量（比如`Meteor.userId())`。

一个简单的用法如下：

```
asyncFunc = function(arg1, arg2, callback) {
  // callback has the form function (err, res) {}

};

Meteor.methods({
  "callFunc": function() {
     syncFunc = Meteor._wrapAsync(asyncFunc);

     res = syncFunc("foo", "bar"); // Errors will be thrown     
  }
}); 
```

您可能还需要使用`function#bind`确保`asyncFunc`在包装之前使用正确的上下文调用它。

有关更多信息，请参阅：[https ://www.eventedmind.com/tracks/feed-archive/meteor-meteor-wrapasync](https://www.eventedmind.com/tracks/feed-archive/meteor-meteor-wrapasync)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-01-07T06:56:53.583

安德鲁·毛是对的。Meteor 现在有[Meteor.wrapAsync()](http://docs.meteor.com/#/full/meteor_wrapasync)用于这种情况。

这是通过条带进行收费并传递回调函数的最简单方法：

```
var stripe = StripeAPI("key");    
Meteor.methods({

    yourMethod: function(callArg) {

        var charge = Meteor.wrapAsync(stripe.charges.create, stripe.charges);
        charge({
            amount: amount,
            currency: "usd",
            //I passed the stripe token in callArg
            card: callArg.stripeToken,
        }, function(err, charge) {
            if (err && err.type === 'StripeCardError') {
              // The card has been declined
              throw new Meteor.Error("stripe-charge-error", err.message);
            }

            //Insert your 'on success' code here

        });
    }
}); 
```

我发现这篇文章真的很有帮助： [Meteor: Proper use of Meteor.wrapAsync on server](https://stackoverflow.com/questions/26226583/meteor-proper-use-of-meteor-wrapasync-on-server)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-05T04:38:39.693

另一种选择是实现类似目标的这个[包。](https://github.com/meteorhacks/meteor-async)

```
meteor add meteorhacks:async 
```

从包自述文件中：

**异步包装（函数）**

*包装一个异步函数并允许它在 Meteor 中运行而无需回调。*

```
//declare a simple async function
function delayedMessge(delay, message, callback) {
  setTimeout(function() {
    callback(null, message);
  }, delay);
}

//wrapping
var wrappedDelayedMessage = Async.wrap(delayedMessge);

//usage
Meteor.methods({
  'delayedEcho': function(message) {
    var response = wrappedDelayedMessage(500, message);
    return response;
  }
}); 
```

# java - Jboss类冲突

> ID：12569715
> 
> 赞同：2
> 
> 时间：2012-09-24T17:10:24.630
> 
> 标签：java, jboss, classloader, java-6

这应该是常见的情况，对你们中的许多人来说很容易。

我有appA。此应用程序使用框架 fw1 和 fw2。

fw1 在此处使用 jar 中的 Logger.java

[http://anonsvn.jboss.org/repos/common/common-logging-spi/trunk/src/main/java/org/jboss/logging/](http://anonsvn.jboss.org/repos/common/common-logging-spi/trunk/src/main/java/org/jboss/logging/)

fw2 在此处使用 jar 中的 Logger.java

[http://anonsvn.jboss.org/repos/common/jboss-logging/trunk/src/main/java/org/jboss/logging/](http://anonsvn.jboss.org/repos/common/jboss-logging/trunk/src/main/java/org/jboss/logging/)

请注意 Logger.java 不可互换（即有不同的方法）。每个框架都需要使用自己选择的 Logger.java。

如何在 Jboss 中部署这样的应用程序？这不是我的确切情况，但如果有人能告诉我如何解决这个问题，那就太棒了。我可以从那里拿走它。原因是如果我必须解释我的情况，那将需要 3 页！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:25:55.340

我认为您的问题没有通用的解决方案。但我建议你继续发现如下。

通常你应该使用不同的类加载器来运行 fw1 和 fw2。如果你可以拦截这些框架的初始化，你可能可以这样做。

另一种方法是创建您自己的混合版本的`Logger`. 我不知道它有多复杂，但可能这更容易。例如 logger1 有方法`writeLog()`，而 Logger2 有方法`printLog()`。因此，请创建您自己的 Logger，它与原始记录器在同一包中。此记录器将使用单独的类加载器将调用委托给第一个或第二个版本，并将实现这两​​种方法。

不幸的是，您在没有 fw1、fw2 和记录器的具体名称的情况下非常笼统地描述了您的问题。如果您自己找不到解决方案，可能会尝试提交另一个包含更具体信息的问题。它可能会有所帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:46:39.283

您正在使用哪个版本的 JBoss？

JBoss 通过 jboss-deployment-structure.xml 提供了非常细粒度的类负载处理

使用它，您可以指定 fw1 使用 loggera.java 和 fw2 使用 loggerb.java

我觉得不需要重复，您可以在 jboss 文档中阅读有关 jboss-deployment-structure.xml 的信息。

希望这可以帮助。

# javascript - 函数调用后Ajax调用不成功

> ID：12569721
> 
> 赞同：0
> 
> 时间：2012-09-24T17:10:51.087
> 
> 标签：javascript, ajax, codeigniter

我正在尝试根据页面上的特定 URI 段加载动态数据。

这是我的Javascript：

```
$(document).ready(function() {
    $(function() {
        load_custom_topics();
    });

    $('#topics_form').submit(function() {
        var topic = document.getElementById('topics_filter').value
        $.ajax({
            type: "POST",
            url: 'ajax/update_session_topic',
            dataType: 'json', 
            data: { topic: topic },
                success: function(){
                    load_custom_topics()
                }
        });
        return false;
    });

    function load_custom_topics(){
        $.ajax({
        type: "POST",
        url: 'ajax/load_custom_topics',
        dataType: 'json',
        data: {},
                success: function (html) {
                    $('div.topics_filter').html(html['content']);
                    get_threads();
                }
        });
    }

    function get_threads(){
        var page = document.getElementById('page').value
        $.ajax({
        type: "POST",
        url: 'ajax/get_threads',
        dataType: 'json',
        data: {page: page},
            success: function (html) {
                $('div#thread_list').html(html['content']);
            }
        });
    }
}); 
```

因此，如您所见，在页面加载时，它会启动`load_custom_topics`，运行良好。然后它应该调用`get_threads()`。这就是事情停止的地方，我没有得到任何数据。

获取线程（）

```
public function get_threads()
{
    $session = $this->session->userdata('active_topic');
    if ($this->input->post('page') == '1')
    {
        $data['list'] = $this->right_model->thread_list_all();
        $data['test'] = "all";
    } else {
        $data['list'] = $this->right_model->thread_list_other($session);
        $data['test'] = "not all";
    }
    if ($data['list'] == FALSE)
    {
        $content = "no hits";
    } else {
    $content = $this->load->view('right/thread_list', $data, TRUE);
    }
    $data['content'] = $content;
    $this->output->set_content_type('application/json')->set_output(json_encode($data));
} 
```

当我动态创建“页面”时，HTML 输出到：

`<div name="page" value="1"></div>`

有什么理由`get_threads()`不运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:22:08.963

这没有身份证。它有一个名字。

```
<div name="page" value="1"></div> 
```

这意味着您的请求`getElementById`失败。所以这行代码应该在你的控制台中显示一个*TypeError 。*

```
var page = document.getElementById('page').value 
```

# asp.net - 代码获取图像文件流时的 System.ArgumentException - ASPX

> ID：12569729
> 
> 赞同：1
> 
> 时间：2012-09-24T17:11:45.923
> 
> 标签：asp.net, .net

我希望任何人在这段代码中帮助我，我不知道这个问题发生在哪里，什么以及为什么发生！

我有这段代码负责从目录中获取图像，为每个图像制作一个简单的水印，但是当代码到达以将图像作为流读取时出现异常..

**请看这段代码：**

```
DirectoryInfo[] dir = new DirectoryInfo[2];
dir[0] = new DirectoryInfo(Server.MapPath("Image/DB/Large/"));
dir[1] = new DirectoryInfo(Server.MapPath("Image/DB/Slide/"));

Image signature = Image.FromFile(Server.MapPath("Image/Design/signature.png"));

for (int i = 0; i < dir.Length; i++)
{
    FileInfo[] fs = dir[i].GetFiles("*.jpg");
    foreach (FileInfo s in fs)
    {
        FileStream strm = s.OpenRead();
        String name = s.Name;
        System.Drawing.Image img = System.Drawing.Image.FromStream(strm);

        Graphics g = Graphics.FromImage(img);
        g.SmoothingMode = SmoothingMode.HighQuality;
        g.DrawImage(signature, new Point(0, 0));
        g.Dispose();

        strm.Close();

        if (i == 0)
        {
            String v = Server.MapPath("Image/DB/Large/" + name);
            img.Save(v);
        }

        else if (i == 1)
        {
            String v = Server.MapPath("Image/DB/Slide/" + name);
            img.Save(v);
        }
    }
} 
```

**异常详情：**

```
[ArgumentException: .] System.Drawing.Image.FromStream(Stream stream, Boolean 
 useEmbeddedColorManagement, Boolean validateImageData) +1065883
 System.Drawing.Image.FromStream(Stream stream) +8 Developer.Page_Load(Object sender, 
 EventArgs e) in f:\.NET Programming\‫FaieqSahwish_V.2.0\Developer.aspx.cs:29
 System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t,
 EventArgs e) +14 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender,
 EventArgs e) +35 System.Web.UI.Control.OnLoad(EventArgs e) +99 
 System.Web.UI.Control.LoadRecursive() +50 System.Web.UI.Page.ProcessRequestMain(Boolean
 includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:18:32.093

根据[FromStream](http://msdn.microsoft.com/en-us/library/93z9ee4x.aspx)文档，如果流不是有效的图像格式或流为空，则会引发 ArgumentException。

您是否验证了传入 FromStream 的流不满足这些条件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:28:45.477

发生异常时，Visual Studio 可能会调出调试器。我要做的是检查以确保您的图像与您认为的一样，然后我将逐步检查您的代码并确保所有字段都与应有的一样。

正如肯·亨德森所说，一些东西（比如你的`FileStream`）可能是`null`

这是我自己整理的一个快速示例。它不会抛出异常。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Drawing;
using System.IO;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            DirectoryInfo dir = new DirectoryInfo(@".");

            FileInfo[] fi = dir.GetFiles("*.jpg");

            FileStream fs = fi[0].OpenRead();

            //FileStream fs = new FileStream("New Bitmap Image.jpg", FileMode.Open);
            System.Drawing.Image.FromStream(fs);
        }
    }
} 
```

# python - 使用 Python Pandas 使用通配符名称搜索对所有列求和

> ID：12569730
> 
> 赞同：42
> 
> 时间：2012-09-24T17:11:53.430
> 
> 标签：python, wildcard, pandas

我在 python pandas 中有一个数据框，其中几列取自 CSV 文件。

例如，数据 =：

```
Day P1S1 P1S2 P1S3 P2S1 P2S2 P2S3
1   1    2    2    3    1    2
2   2    2    3    5    4    2 
```

我需要的是获取名称以 P1 开头的所有列的总和...类似于 P1* 的通配符。

类似于以下内容的内容会出现错误：

> P1Sum = 数据["P1*"]

有什么理由用熊猫做这个吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-24T18:05:26.103

我找到了答案。

使用问题中的数据，数据框：

```
from pandas import *

P1Channels = data.filter(regex="P1")
P1Sum = P1Channels.sum(axis=1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-06T16:45:34.063

列上的列表推导允许`if`条件中的更多过滤器：

```
In [1]: df = pd.DataFrame(np.arange(15).reshape(5, 3), columns=['P1S1', 'P1S2', 'P2S1'])

In [2]: df
Out[2]: 
   P1S1  P1S2  P2S1
0     0     1     2
1     3     4     5
2     6     7     8
3     9    10    11
4    12    13    14

In [3]: df.loc[:, [x for x in df.columns if x.startswith('P1')]].sum(axis=1)
Out[3]: 
0     1
1     7
2    13
3    19
4    25
dtype: int64 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-01T18:18:53.340

感谢 jbssm 的提示，对于寻找总和的其他人，我最后添加`.sum()`了，所以：

```
P1Sum= P1Channels.sum(axis=1).sum() 
```

# python - 向 Python CSV 阅读器添加逻辑

> ID：12569738
> 
> 赞同：0
> 
> 时间：2012-09-24T17:12:45.503
> 
> 标签：python, csv

我正在尝试使用 python CSV 阅读器解析“伪 CSV”文件，并且对如何添加一些额外的逻辑有一些疑问。我将其称为“伪 CSV”文件的原因是，在实际 CSV 数据开始之前，输入文件中的***某些***行将包含文本（30-40 个字符）。我正在尝试找出删除此文本的最佳方法。

目前，我找到了 3 个删除上述文本的选项：

1.  从 Python 中，调用 grep 和 sed 并将输出通过管道传输到一个临时文件，然后可以将其提供给 csv 阅读器（呃，我想避免这个选项）

2.  创建一个 CSV 方言来删除不需要的文本（这个选项感觉不对）

3.  扩展 File 对象，实现 next() 函数以根据需要删除不需要的文本。

我无法控制输入文件的生成方式，因此它不是修改生成的选项。

这是我意识到输入文件问题时的相关代码。

```
with open('myFile', 'r') as csvfile:
theReader = csv.reader(csvfile)
for row in theReader:
     # my logic here 
```

如果我使用上面的选项 3，则解决方案非常简单，但是我将无法合并`with open()`语法。

所以，这是我的问题（实际上是 2 个）：选项 3 是解决这个问题的最佳方法吗？如果是这样，我怎样才能将它与`with open()`语法结合起来？

***编辑***：忘了提到我在 Linux 上使用 Python 2.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:23:30.820

`csv.reader`除了文件之外，还接受任意迭代：

```
with open('myFile', 'rb') as csvfile:
     reader = csv.reader(filter_line(line) for line in csvfile)
     for row in reader:
         # my logic here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:18:54.950

您可以只使用[contextlib](http://docs.python.org/library/contextlib.html)并创建自己的上下文管理器。

```
from contextlib import contextmanager

@contextmanager
def csv_factory(filename, mode="r"):
    # setup here
    fileobj = open(filename, mode)
    reader = mycsv.reader(fileobj)
    try:
        yield reader # return value for usage in with 
    finally:
        fileobj.close() # clean up here

with csv_factory("myFile") as csvfile:
    for line in csvfile:
        print(line) 
```

# multithreading - 多线程、阻塞和信号量

> ID：12569740
> 
> 赞同：0
> 
> 时间：2012-09-24T17:13:09.373
> 
> 标签：multithreading, operating-system, thread-safety, pthreads

(1) 在多线程进程中，如果一个线程忙于I/O，整个进程会被阻塞吗？

(2) 使用互斥体或二进制信号量哪个更好？什么时候应该使用互斥体，什么时候应该使用二进制信号量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:16:49.247

1）。好吧，在多线程应用程序中，一次只有一个线程分配了 CPU。如果您说您的线程经常忙于 I/O，那么实际上可能会发生所有其他线程一直在队列中等待以获取分配给它们的 CPU。这取决于使用的 CPU `allocation algorithm`。就像线程正在使用`Time-Sharing`算法一样，那么当然在时间完成时，当前线程将被发送到队列的后面。

2）。查看这篇文章： -[二进制信号量和互斥量之间的区别](https://stackoverflow.com/questions/62814/difference-between-binary-semaphore-and-mutex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:36:46.327

1) 在 SMP 环境中，多个线程可以并行运行（在不同的 cpu 上）。在单 CPU 环境中，一次只能运行一个线程。

2) 阅读这个[diff-binary-semaphore-and-mutex](https://stackoverflow.com/questions/62814/difference-between-binary-semaphore-and-mutex)

# ruby-on-rails - 使用 Playlist.new(params[:playlist]) 不好吗？

> ID：12569741
> 
> 赞同：1
> 
> 时间：2012-09-24T17:13:11.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, params

特别是在我的新/创建操作中。我有`@playlist = Playlist.new(params[:playlist])`。问题是我在 attr_accessible 中也有我不希望他们修改的敏感数据（播放列表上的收听次数，他们不应该能够更新）。

我试过`Playlist.new(:title => params[:title], :description => params[:description], etc)`了，但没有用。我假设是因为我需要这样做`params[:playlist][:title]`，但这看起来很混乱。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:26:20.677

在模型中，您可以编写一个名为 new_safe 的函数，它使用您想要的参数创建新对象，然后返回它

像这样：

```
def new_safe(params)
   playlist = Playlist.new
   playlist.title = params[:title]
   playlist.description = params[:description]
   playlist.save
   playlist
end 
```

只是想，类似地你可以这样写，这样更干净一些

控制器：

```
@playlist = Playlist.new
@playlist.input_params(params) 
```

模型：

```
def input_params(params)
   playlist.title = params[:title]
   playlist.description = params[:description]
   playlist.save
end 
```

# iphone - iPhone didSelectRowAtIndexPath 不为单元格编号 10、20、30 调用

> ID：12569743
> 
> 赞同：3
> 
> 时间：2012-09-24T17:13:18.470
> 
> 标签：iphone, objective-c, uitableview, didselectrowatindexpath

事情就是这样。我有`tableview`一个可变数量的`rows`. 当您点击其中一个时，会显示详细视图。

如果您从 0 到 9、11 到 19、21 到 29 等点按行，一切都很好……但它不适用于行号`10, 20, 30`等……即使在此行上检测到长按，所以`alert`显示，以便在必要时删除该行（我可以毫无问题地删除它），但从`didselectrowatindexpath`不调用。

我认为这是`tableview`唯一`10 rows`同时保持的东西。但是`cellForRowAtIndex`对于所有行，一切都正常。我将所有数据保存在一些中`NSMutableArray`，以访问我需要的数据`[indexPath row]`。

我已经花了一些时间寻找类似的帖子，但没有找到类似的东西。

任何帮助将不胜感激。谢谢！

一些代码：

```
//    in .h

#import <UIKit/UIKit.h>
#import "PullRefreshTableViewController.h"
#import "DetalleMailViewController.h"

@interface MensajesTableViewController : PullRefreshTableViewController <DetalleMailViewControllerDelegate>

@property (nonatomic, strong) NSMutableArray *mailAuthors;
@property (nonatomic) int row_tabla_delete;

- (IBAction)presentMenu:(id)sender;

@end

//in .m make the synthesize of mailAuthors and some relevant code:

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.allowsSelection = YES;
    //This gesture works fine
    UILongPressGestureRecognizer *lpgr = [[UILongPressGestureRecognizer alloc]
                                      initWithTarget:self action:@selector(presentMenu:)];
    lpgr.minimumPressDuration = 0.5; //seconds
    lpgr.numberOfTouchesRequired =1;
    lpgr.delegate = self;
    [self.tableView addGestureRecognizer:lpgr];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *idCell = @"mailTableCell";
    MailCell *celda = [tableView dequeueReusableCellWithIdentifier:idCell];
    if(celda == nil){
        celda = [[MailCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:idCell];
    }

    celda.mailAuthor.text = [self.mailAuthors objectAtIndex:[indexPath row]];
    return celda;
}

-(void) viewWillAppear:(BOOL)animated{
    [[self tableView] reloadData];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //I really use a segue here, but for the sake of simplicity, I just put a trace, never called for rows 10, 20, 30... The segue works fine the rest of the time...
    NSLog(@"tapped %d", [indexPath row]);
}

- (IBAction)presentMenu:(id)sender {

    if ([sender state] == UIGestureRecognizerStateBegan){
        CGPoint p = [sender locationInView:self.tableView];

        NSIndexPath * indexPath = [self.tableView indexPathForRowAtPoint:p];

        if (indexPath != nil){
            self.row_tabla_delete = [indexPath row];
        }

        //some code to delete the row

    }
} 
```

在`MailCell`.h `I have the`UILabel `for mailAuthor as a property, and linked in the storyboard with the UILabel inside the`UITableViewCell `. In the storyboard, I have a`TableView `Controller linked to my own class "`MensajeTableViewController `", the`UITableViewCell `to my "`MailCell`"中。如果有一些需要添加一些其他相关代码，或者别的什么，请帮帮我。

# django - 我如何将 count() 与 Q 对象一起使用？

> ID：12569746
> 
> 赞同：0
> 
> 时间：2012-09-24T17:13:47.983
> 
> 标签：django, django-q

我正在使用 Django，我应该如何使用 django.db.models 中的 Q 对象和 count() 来使用查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:32:20.320

鉴于使用过滤器将产生一个查询集对象，您应该只能在所述包含过滤器的末尾使用 count() 。喜欢：

```
count = MyModel.objects.filter(Q(my_field__startswith='Hello')).count() 
```

# java - BufferedReader 是否忽略了第一行？

> ID：12569747
> 
> 赞同：1
> 
> 时间：2012-09-24T17:13:48.780
> 
> 标签：java, telnet, bufferedreader

我目前正在编写一个服务，该服务应该采用明文命令，然后根据这些命令返回一些内容，这些命令也是明文形式。

我有这个奇怪的问题`BufferedReader`，或者，它可能是奇怪的 telnet，由于某种原因`BufferedReader`读取了第一个命令，但是无论我做什么，该命令都会被忽略，我可以通过发送第一个命令两次来解决这个问题，但是在我看来，这只是把它拉长了一点。

下面的代码在一个`run()`方法中。然后我设置`out`为 a`PrintWriter`和`in`a `BufferedReader`。该`runs`变量默认为`true`.

```
out = new PrintWriter(handle.getOutputStream(), true);
in = new BufferedReader(new InputStreamReader(handle.getInputStream()));
while (runs) {
    String msg;
    msg = in.readLine();
    String[] command;
    command = msg.split(" ", 3);
    /* do something with the command */
} 
```

所以我的问题是`BufferedReader`忽略第一行还是不与我合作的telnet？

如果是别的，请赐教。

**编辑** 我收到了这条调试消息：

调试：���� ����'������/nick halmark

所以我想这是关于所有问号的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:20:19.757

> 我实际上正在使用最新的腻子，因为我正在 Windows 盒子上开发......据我记得......那么它默认不存在

如果您使用 PuTTY，则需要选择**“原始”**连接类型。

Microsoft telnet 服务器喜欢在开始时进行一些内容/协议协商，因此 PuTTY 将[按照 RFC 854 规范](http://www.faqs.org/rfcs/rfc854.html)默认执行此操作。那就是你正在阅读的垃圾。

# html - Twitter Bootstrap 在 Internet Explorer 中无法正确显示

> ID：12569748
> 
> 赞同：3
> 
> 时间：2012-09-24T17:13:52.553
> 
> 标签：html, css, internet-explorer, twitter-bootstrap

在 Internet Explorer 中查看 twitter bootsrap 站点时遇到重大问题。 [http://warningweather.com/](http://warningweather.com/)是网站... 下面是 chrome 缩略图，然后是 IE 缩略图，然后是 HTML 代码。导航栏在 Internet Explorer 中显示为自上而下的列表，并且跨度在 Internet Explorer 中自上而下显示。我希望它看起来像在 Chrome 中一样。

**铬截图** ![铬截图](../Images/ea33db94403c5639eca0e0c6bc097141.png)

**Internet Explorer 屏幕截图** ![Internet Explorer 屏幕截图](../Images/58d48281368dee69eaf785919a367e3b.png)

```
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Severe Weather Warnings - Torando Warning, Thunderstorm Warning</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <link href="/css/bootstrap-responsive.css" rel="stylesheet\ type="text/css">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=182733995114522";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <meta property="og:image" content="http://warningweather.com/tornado.gif"/>
    <meta property="og:title" content="Severe Weather Warnings - Torando Warning, Thunderstorm Warning"/>
    <link rel="canonical" href="http://warningweather.com" />
    <meta property="og:url" content="http://warningweather.com"/>
    <meta property="og:site_name" content="Warning Weather"/>
    <meta property="og:description" content="The Latest Weather Warnings from the National Weather Service"/>
    <meta property="fb:app_id" content="182733995114522" />
    <meta name="description" content="The Latest Weather Warnings from the National Weather Service " />

</head>
 <body data-spy="scroll" data-target=".bs-docs-sidebar">
    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="brand" href="http://warningweather.com">Warning Weather</a>
                    <div class="nav-collapse collapse">
                         <ul class="nav"><li class="active">
                                    <a href="http://warningweather.com">Home</a>
                                </li>
                                <li><a href="http://warningweather.com/about/">About</a></li>
                                <li><a href="http://warningweather.com/recent">Recent</a></li><li><a href="http://warningweather.com/blog">Announcements</a></li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>
        <div class="container">
        <center>
            <p class="hidden-phone">
            <script type="text/javascript"><!-- 
            google_ad_client = "ca-pub-5504765881600837"; 
            /* WarnWeather Top Banner */
            google_ad_slot = "0759690849";
            google_ad_width = 728;
            google_ad_height = 90;
            //-->
            </script>
            <script type="text/javascript"
            src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script></center></p>

      <div class="hero-unit">
        <h1>Warning of the Latest Weather...</h1>
        <p>With Warning Weather you can keep your readers and viewers in the know with weather warnings from the national weather service automatically being posted to your facebook page, twitter feed, and even website!</p>
        <p><a class="btn btn-primary btn-large" href="http://warningweather.com/customer">Learn more &raquo;</a></p>
      </div>

<center><strong><a href="http://warningweather.com/day/September-24-2012">Warnings Today</a> | <a href="http://warningweather.com/day/September-23-2012">Warnings Yesterday</a></center></strong><BR />

      <div class="row">
        <div class="span4">
          <h2>Recently Issued</h2>
<ul><li><strong><a href="http://warningweather.com/view/2012-KLZK-SV-W-0456@Severe-Thunderstorm-Warning">Severe Thunderstorm Warning for  Independence AR, Jackson AR, White AR, Woodruff AR,</a> </strong><BR><i>Expired: 2012-09-24 13:00:00 UTC</i></li><li><strong><a href="http://warningweather.com/view/2012-KCRP-SV-W-0146@Severe-Thunderstorm-Warning">Severe Thunderstorm Warning for  La Salle TX,</a> </strong><BR><i>Expired: 2012-09-24 02:00:00 UTC</i></li><li><strong><a href="http://warningweather.com/view/2012-KPHI-SV-W-0237@Severe-Thunderstorm-Warning">Severe Thunderstorm Warning for  Kent DE, New Castle DE, Cumberland NJ, Salem NJ,</a> </strong><BR><i>Expired: 2012-09-23 01:45:00 UTC</i></li><li><strong><a href="http://warningweather.com/view/2012-KPHI-SV-W-0236@Severe-Thunderstorm-Warning">Severe Thunderstorm Warning for  Burlington NJ, Camden NJ, Gloucester NJ, Bucks PA, Delaware PA, Philadelphia PA,</a> </strong><BR><i>Expired: 2012-09-23 00:45:00 UTC</i></li><li><strong><a href="http://warningweather.com/view/2012-KPBZ-SV-W-0208@Severe-Thunderstorm-Warning">Severe Thunderstorm Warning for  Allegheny PA, Armstrong PA, Butler PA, Westmoreland PA,</a> </strong><BR><i>Expired: 2012-09-23 00:00:00 UTC</i></li></ul>          <p><a class="btn" href="http://warningweather.com/recent">More Weather Warnings &raquo;</a></p>
        </div>
        <div class="span4">
          <h2>Currently Valid</h2>
                     <p>The National Weather Service currently has 0 currently valid severe thunderstorm warnings and 0 Tornado Warnings.  Keep your viewers safe, and engaged by automatically putting these warnings on your facebook page, twitter feed and website!</p>
           <p>If your viewers and readers know they can come to you for the latest Weather Warnings to keep themselves and their loved ones safe they will, they will stay engaged and coming back for more... its that easy!</p><p><strong>Great for Television Stations, Local Governments, Newspapers, Weather Related Siets, and more!</strong></p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
       </div>
        <div class="span4">
          <h2></h2>
          <script type="text/javascript"><!--
google_ad_client = "ca-pub-5504765881600837";
/* WarnWeather Big Square */
google_ad_slot = "8412928525";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
        </div>
      </div>
    <hr>

      <footer>
        <p>&copy; 2012 Zesty Labs; Warning Data by National Weather Service</p>
        <p><a href="http://warningweather.com/recent/tornado">Recent Thunderstorm Warnings Warnings</a> | <a href="http://warningweather.com/recent/thunderstorm">Recent Thunderstorm Warnings</a> | <a href="http://warningweather.com/recent">Recent Weather Warnings</a></p>
      </footer>

    </div> 
    <!-- Twitter Bootstrap Stuff -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29669116-4']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

   <!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=7261892; 
var sc_invisible=1; 
var sc_security="d71e143e"; 
</script>
<script type="text/javascript"
src="http://www.statcounter.com/counter/counter.js"></script>
<noscript><div class="statcounter"><a title="tumblr hit
counter" href="http://statcounter.com/tumblr/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/7535508/0/7df33614/1/"
alt="tumblr hit counter"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:23:31.190

这是因为您的网站使 IE 进入 IE 中的怪癖模式。

1.  您忘记关闭第二个 CSS 链接的“”标记-> rel="stylesheet\
2.  我猜第二个错误是你在脚本和css链接之后有元标记。尝试更改它们的顺序，应首先放置元标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:25:34.917

使用 IE 开发者工具。我可以看到很多 IE 正在搜索的 js 文件都找不到。我在下面附上了一个屏幕截图，显示了 404 错误。

chrome/firefox 正确渲染其余部分，留下丢失的文件。然而，IE 在找不到某些文件时会中断，因此 IE 上的外观混乱

![在此处输入图像描述](../Images/4535a46e247f430b8ab78d6e6166853e.png)

# actionscript-3 - 在 Actionscript 3 中访问不同的类

> ID：12569749
> 
> 赞同：1
> 
> 时间：2012-09-24T17:13:55.427
> 
> 标签：actionscript-3, flash

我正在尝试编写一个小游戏，但偶然发现了一些问题。我有几节课。其中之一是墙类。击中玩家时应该从健康栏中移除一颗心。击中播放器效果很好，但我无法移除 UI 类中的心脏。

主文件

```
public class TwinRunner extends MovieClip
{
    private var _timer:Timer;
    private var _userInterface:UI = new UI();

    public function TwinRunner()
    {
        //Timer initialize
        _timer = new Timer(800, 1);
        _timer.addEventListener(TimerEvent.TIMER_COMPLETE, onUpdateTime);
        _timer.start();

        stage.addChild(_userInterface);

        mcButton.addEventListener(MouseEvent.CLICK, onButtonClick);
        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
    } 
```

在这里，我将 UI 类添加为实例。

墙体

```
 x += _vx;

        //Remove Wall when visible Sword hits
        if(MovieClip(parent).mcSword.isVisible)
        {
            if(this.hitTestObject(MovieClip(parent).mcSword))
            {
                trace("wall destroyed");
                parent.removeChild(this);
            }
        }

        //Remove Wall when Player hit
        else if(this.hitTestObject(MovieClip(parent).mcPlayer))
        {
            trace("player hit");
            parent.removeChild(this);
            MovieClip(parent)._userInterface.heartMeter = false;
        }

        //When the Wall is outside of the screen it gets removed
        if (x + width / 2 < 0)
        {
            parent.removeChild(this);
        }
    } 
```

电影剪辑（父）._userInterface.heartMeter = false; <- 这部分给了我一个错误...

最后是 UI.as

```
public class UI extends MovieClip
{
    private var heart1:heartFill = new heartFill();

    public function UI()
    {
        addChild(heart1);
        heart1.x = 200;
        heart1.y = 200;

        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
    }

    private function onAddedToStage(event:Event):void
    {
        addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
        addEventListener(Event.ENTER_FRAME, onEnterFrame);
    }

    private function onRemovedFromStage(event:Event):void
    {
        removeEventListener(Event.ENTER_FRAME, onEnterFrame);
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        removeEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
    }

    private function onEnterFrame(event:Event):void
    {

    }

    public function set heartMeter(visibility:Boolean):void
    {
        heart1.visible = false;
    }
} 
```

我可以从 Main 类访问 setter 函数，但不能从 wall.as 类访问。有没有办法这样做？我还在学习，所以我希望这不是一个愚蠢的问题：D

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:20:57.077

您的问题是您正在从父级中删除子级（墙），然后导致父级 var 为空 - 请参阅下面代码中的注释：

```
parent.removeChild(this);  //this will make parent null
MovieClip(parent)._userInterface.heartMeter = false;  //parent is now null because this has been removed 
```

简单地切换这两行应该可以解决您的主要问题。

此外，`_userInterface`在您的主类中声明为私有 var，因此如果您想在墙类中访问它（就像您尝试做的那样），您需要将其公开，否则您会收到另一个错误。

* * *

您可能想要考虑的事情是使用事件。这样，您的代码就不会直接引用 UI 等其他类。类依赖的分离使测试和故障排除更容易。

所以在你的墙类中是这样的：

```
else if(this.hitTestObject(MovieClip(parent).mcPlayer))
{
    trace("player hit");
    stage.dispatchEvent(new Event(PLAYER_HIT)); //PLAYER_HIT would be a public static constant in this class:  public static const PLAYER_HIT:String = "PlayerHit";
    parent.removeChild(this); //this needs to be last because after this line, stage and parent will be null
} 
```

然后在您的 UI 类中：

```
private function onAddedToStage(event:Event):void
{
    addEventListener(Event.REMOVED_FROM_STAGE, onRemovedFromStage);
    addEventListener(Event.ENTER_FRAME, onEnterFrame);

    stage.addEventListener(Wall.PLAYER_HIT,playerHitHandler);
}

private function playerHitHandler(e:Event):void {
    heartMeter = false;
} 
```

# python - 如何在没有选择的情况下启动 wxPython 单选框？

> ID：12569754
> 
> 赞同：0
> 
> 时间：2012-09-24T17:14:18.250
> 
> 标签：python, wxpython, radio-button, wxwidgets

> **可能重复：**
> [如何删除初始 wx.RadioBox 选择？](https://stackoverflow.com/questions/3691897/how-to-remove-initial-wx-radiobox-selection)

我正在开发一个应用程序，该应用程序向用户询问一系列问题，并在单选框中为每个问题提供答案。在您回答当前问题之前，下一个问题不会出现，因为它可能取决于您的回答。

我的问题是每个自动显示的问题都默认选择第一个答案。我想让它从没有选择任何内容开始。

我怎样才能做到这一点？

这是我目前用于解决其中一个问题的代码：

```
import wx

hardBackOptions = ['Paperback','Hardback'];

class OptionsPanel1(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        mainpanel = wx.Panel(self)

        self.cover1 = wx.RadioBox(self, label="Hardback or Paperback?",  pos=(20, 140), choices=hardBackOptions,  majorDimension=1, style=wx.RA_SPECIFY_COLS )

app = wx.App(False)
frame = wx.Frame(None, title="Book Pricing & Options", size=(1000,900))
nb = wx.Notebook(frame)

nb.AddPage(OptionsPanel1(nb), "Book Options")
frame.Show()
app.MainLoop() 
```

**编辑：**为了它的价值，我最终改用 wxChoice。在下拉菜单前面有一个空白选项比在单选按钮上有一个空白选项更适合我想要完成的任务。这是我为任何感兴趣的人所做的更改：

```
import wx

hardBackOptions = ['','Paperback','Hardback'];

class OptionsPanel1(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        mainpanel = wx.Panel(self)
        self.coverLabel = wx.StaticText(self, label="Paperback or Hardback?", pos=(20,115))
        self.cover = wx.Choice(self, pos=(20, 140), choices=hardBackOptions)

app = wx.App(False)
frame = wx.Frame(None, title="Book Pricing & Options", size=(1000,900))
nb = wx.Notebook(frame)

nb.AddPage(OptionsPanel1(nb), "Book Options")
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:14:29.967

我不认为你应该这样做。单选按钮集应始终选择一个值。我只会添加一个设置的默认值，例如标记为“无”的默认值。

# android - 网络线程在服务中休眠

> ID：12569756
> 
> 赞同：0
> 
> 时间：2012-09-24T17:14:27.683
> 
> 标签：android, network-programming, android-service, android-networking

我从事的应用程序不断将从设备获取的一些数据发送到服务器 API。我有一个服务一直在后台工作并收集数据，然后这个服务中有一个网络线程负责与服务器建立连接并发送数据。

我遇到的问题是，虽然我在服务启动时获得了唤醒和 WiFi 锁定，但在某些时候，当设备在连接不良的 3g 网络上时，套接字写入方法似乎只是挂起：我从每次操作后输出的日志中看到这一点

网络线程非常简单，可以描述为

```
while(true) {
     if(!connectedToServer) {
         connectToServer();
     }
     acquireData();
     sendData();
} 
```

sendData 非常简单——它将数据写入套接字输出流。从我在日志中看到的内容看来，OutputStream.write() 调用只是在连接不良时无限期地阻塞。

有没有人遇到过类似的问题？

谢谢，

# javascript - 你如何提取依赖于 Javascript 中局部变量的常用方法？

> ID：12569760
> 
> 赞同：0
> 
> 时间：2012-09-24T17:14:54.360
> 
> 标签：javascript, node.js, refactoring

我正在使用 Node.js 并为我的不同对象创建一些模型。这是它们目前外观的简化版本。

```
var Foo = module.exports = function () {

    var values = { type: 'foo', prop1: '', prop2: '' };

    function model() {}

    model.init = function(val) {
        _.extend(values, val);
        return model;
    }

    model.store = function(cb) {
        db.insert(values.type, values, cb);
    }

    model.prop1 = function(val) {
        if(!arguments.length) return values.prop1;
        values.prop1 = val;
        return model;
    }

    return model;
} 
```

然后我可以这样做：

```
var foo = Foo();
foo.init({prop1: 'a', prop2: 'b'}).store(function(err) { ... }); 
```

很多函数，比如`model.init`和`model.store`对于每个模型都是相同的，但是它们依赖于闭包中的局部变量，比如`values`.

有没有办法将这些函数拉到一个基类中，然后我可以扩展每个模型而不是复制所有这些代码？我想得到这样的结果，但我不确定这个`base`类应该是什么样子或使用它来扩展的正确方法`Foo`。

```
var Foo = module.exports = function () {

    var values = { type: 'foo', prop1: '', prop2: '' };

    function model() { this.extend(base); }

    model.prop1 = function(val) {
        if(!arguments.length) return values.prop1;
        values.prop1 = val;
        return model;
    }

    return model;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:38:45.157

是的，你可以做这样的事情；

模型.js

```
/** require your db and underscore varialbles etc.. **/

module.exports = function(values, base) {
    var model = typeof base == 'function' ? base : function() {};

    model.init = function(val) {
        _.extend(values, val);
        return model;
    }

    model.store = function(cb) {
       db.insert(values.type, values, cb);
    }

    return model;
} 
```

那么用法将类似于；

```
var Foo = module.exports = function () {

    var values = { type: 'foo', prop1: '', prop2: '' };

    var model = require('/path/to/model.js')(values);

    model.prop1 = function(val) {
        if(!arguments.length) return values.prop1;
        values.prop1 = val;
        return model;
    }

    return model;
} 
```

如果需要扩展构造函数

```
var Foo = module.exports = function () {

    var values = { type: 'foo', prop1: '', prop2: '' },
        model  = function() { ...something here... };

    require('/path/to/model.js')(values, model);

    model.prop1 = function(val) {
        if(!arguments.length) return values.prop1;
        values.prop1 = val;
        return model;
    }

    return model;
} 
```

# c - C中的条件和数组（初学者）

> ID：12569765
> 
> 赞同：1
> 
> 时间：2012-09-24T17:15:30.167
> 
> 标签：c, arrays, io, conditional

> **可能重复：**
> [如何正确比较 C 中的字符串？](https://stackoverflow.com/questions/8004237/how-do-i-properly-compare-strings-in-c)

尽管我已经讨论这个话题好几个月了，但我对 C 语言还是比较陌生。我正在尝试编写一个简单的问题/响应程序。我知道它与 if else 条件有关（其他一切都有效），但我已经搜索过，似乎找不到问题所在。最后还有重复程序的递归。我放入其中的函数调用可能是错误的。

```
#include <stdio.h>

main()
{
    char line[100];
    char decision[100];
    printf("Are you gonna throw it?\n");
    printf("Type yes or no.\n");

    scanf("%s", line);
    printf("%s \n", line);

    if (line == "yes") {
        printf("Thanks.\n");
    } else if (line == "no") {
        printf("Why not?\n");
    }

    printf("Do you want to do this again?\n");
    scanf("%s", decision);
    if (decision == "yes") {
        main();
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:17:31.767

像这样的比较是`line == "yes"`行不通的。您需要使用 strcmp 比较您的字符串，例如

```
if (strcmp(line, "yes") == 0) {
    printf("Thanks.\n");
} else if (strcmp(line, "no") == 0) {
    printf("Why not?\n");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:18:05.153

要比较字符串，您必须使用string.h中的`strcmp`或函数`strncmp`

另一个问题是：

`main`应该返回`int`。

`int main()`

或者

`int main(int argc, char *argv[])`

或等价的是 C 中 main 的正确签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:22:25.593

在这种情况下，递归不是必需的，并且在程序的每次迭代中不必要地在堆栈上建立数据。而是将整个代码包含在一个`do {...} while (strcmp(decision, "yes") == 0)`循环中。也将`line == "yes"`and更改`line == "no"`为`strcmp(line, "yes") == 0`and `strcmp(line, "no") == 0`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:26:48.867

首先要知道：字符串字面量`"yes"`和`"no"`是*数组表达式*；该*表达式* `"yes"`的类型为“4 元素数组`char`”（0 终止符额外增加 1 个）。

第二件事要知道：在大多数情况下，“N-element array of `T`”类型的表达式将被转换为“pointer to `T`”类型的表达式，其值将是数组第一个元素的地址。

当你写的时候`if (line == "yes")`，两个表达式`line`都`"yes"`从“array of `char`”类型转换为“pointer to `char`”，它们的值是它们的第一个元素的地址，*这将是不同*的（即使是的内容，*字符串字面*`line`量仍然存在在与 ) 不同的地址。因此，无论 的内容如何，​​比较总是失败。 `"yes"` *`"yes"``line``line`*

 *为了比较两个数组表达式的*内容*，您需要使用标准库函数`strcmp`：

```
if (strcmp(line, "yes") == 0) { ... } 
```

`strcmp`如果两个字符串相等，则返回 0，如果按*字典顺序*小于，`line`则返回 < 0，如果按字典顺序大于，则返回> 0 。 *`"yes"``line``"yes"`*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:27:12.823

1）在这里删除分号：

```
if (decision == "yes")
{
     main();
 }; //<-- if you want to keep this code at all 
```

2）您不能使用 == 比较字符串

```
strcmp(decision, "yes"); //returns 0 if they are equil 
```

3) 为什么递归调用 main()？为什么不把整个事情放在一个循环中：

```
main() { 
  char line[100];
  char decision[100] = "yes";
  while(!strcmp(decision, "yes")){
    printf("Are you gonna throw it?\n"); 
    printf("Type yes or no.\n");
    scanf("%s", line);  
    printf("%s \n", line);  
    if (!strcmp(line, "yes"))
      printf("Thanks.\n");   
    else if (!strcmp(line, "no"))     
      printf("Why not?\n");   

    printf("Do you want to do this again?\n");
    scanf("%s", decision); 
  } //end while
} //end main 
```**

# c++ - 在 Windows Mobile 上使用 WideCharToMultiByte

> ID：12569766
> 
> 赞同：1
> 
> 时间：2012-09-24T17:15:31.243
> 
> 标签：c++, unicode, windows-mobile

我有为 Win32（XP 和更高版本）设计的代码，我要移植到 Windows Mobile 6。它包含以下行：

```
int count = ::WideCharToMultiByte( CP_ACP, WC_NO_BEST_FIT_CHARS, ..., 0, 0 ); 
```

在 Windows XP 上，这可以正常工作，但在 Windows Mobile 上，它返回 0 并且 GetLastError() 返回错误 1004“无效标志”。`WC_NO_BEST_FIT_CHARS`在 Windows Mobile 6 SDK 的 winnls.h 中定义。

`::wcstombs`如果我将调用替换为 0或替换为 0 ，则此代码将在我的有限测试中工作`WC_NO_BEST_FIT_CHARS`。

我想知道进行这些更改的后果是什么。如果我在中文版或俄文版 Windows Mobile 上运行我的程序，这仍然有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:27:55.700

Windows Mobile 基于 Windows CE，根据文档，[WideCharToMultiByte 不支持 Windows CE 中的标志 WC_NO_BEST_FIT_CHARS](http://msdn.microsoft.com/en-us/library/aa450989.aspx)。

根据该页面，支持的标志是：

```
WC_COMPOSITECHECK 将复合字符转换为预组合字符。
WC_DISCARDNS 在转换过程中丢弃非空格字符。
WC_SEPCHARS 在转换期间生成单独的字符。
                    （这是默认的转换行为）。
WC_DEFAULTCHAR 在转换期间用默认字符替换异常。

```

# javascript - 无法打印出 Javascript 信息

> ID：12569772
> 
> 赞同：0
> 
> 时间：2012-09-24T17:15:58.170
> 
> 标签：javascript, ajax, soundcloud

下面是我拥有的代码，而不是自动将信息添加到 ID 为 #userid 的 div，我需要实际打印出用户 ID（目前，它只是将其添加到 div，但我需要能够只需在我想要的任何地方打印它，而不是自动添加到 div 包装中）。

我的最终目标是获取用户 ID，然后将其放入 WordPress 查询中（用户 ID 目前被用作帖子标签，我需要从该特定用户那里提取所有帖子，所以我想按标签查询帖子）

```
<script src="http://connect.soundcloud.com/sdk.js"></script>  
<script>
  SC.initialize({
    client_id: "a808af7fabb53ad7971c6c9675f392b3",
    redirect_uri: "http://madebyguerrilla.com/clients/2012/theappreciationengine/wordpress/wp-content/themes/TheAppreciationEngine_WP/callback.html"
  });

  $("#connect").live("click", function(){
    SC.connect(function(){
      SC.get("/me", function(me){
        $("#username").text(me.username);
        $("#userid").text(me.id);
      });
    });
  });

  $("#update").live("click", function(){
    SC.put("/me", {user: {description: $("#description").val()}}, function(response, error){
      if(error){
        alert("Some error occured: " + error.message);
      }else{
        alert("Profile description updated!");
      }
    });
  });
</script> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:27:24.400

你有机会成为 JS 的新手吗？只是在开玩笑。

在`SC.get()`通话中，您可以通过以下方式访问 ID `me.id`：

```
var userId;

SC.get("/me", function(me){
    $("#username").text(me.username);
    $("#userid").text(me.id); // <-- This is the user id, you can store it in a variable
    userId = me.id; //           <-- like this
}); 
```

# expressionengine - 表达式引擎 - 将循环变量传递到嵌入模板

> ID：12569779
> 
> 赞同：1
> 
> 时间：2012-09-24T17:16:22.970
> 
> 标签：expressionengine

在模板中传递表达式引擎变量时遇到一些问题。

有一段代码：

// 询问：

```
{exp:channel:entries
  channel="static"
} 
```

// 在循环中重复字段

```
{content_matrix}
   <div>
      {text_cell}
   </div>    
   {image}
{/content_matrix} 
```

//

```
{/exp:channel:entries} 
```

我想将具有大内部 HTML（示例较短）结构的 content_matrix 字段移动到单独的嵌入模板中，以便在其他模板中重用。

试图构建这样的嵌入，但它不起作用：

```
{embed="incl/content_matrix" matrix="{content_matrix}"} 
```

和较小模板的主体：

```
 {embed:matrix}
   <div>
      {text_cell}
   </div>    
   {image}
 {/embed:matrix} 
```

这样，如果您传递单个元素（如 ID），它就可以工作，但不能传递多个元素。也许它需要通过整个条目。

怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T18:19:13.517

您是否考虑过使用[Stash 插件](http://devot-ee.com/add-ons/stash)？

我想您可以使用某种分隔符将矩阵内容分隔在 html 的不同部分之间，然后在嵌入的模板中使用正确的 html 在抓取的存储周围包装分隔符[的搜索/替换](http://devot-ee.com/add-ons/phpstringfun)。

不过，编写一个快速的自定义插件可能不会那么痛苦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:52:50.917

[嵌入变量](http://expressionengine.com/user_guide/templates/embedding.html#embed-variables-for-the-embedded-template)传递解析的输出，而不是标签。所以在你的例子中：

```
{embed="incl/content_matrix" matrix="{content_matrix}"} 
```

您实际传递的`matrix`参数是该特定条目中数据的完整 HTML 表格输出（因为 Matrix 字段在用作单个标记时输出表格）。

我认为您真正想要用来防止重复自己的是[Snippet](http://expressionengine.com/user_guide/templates/globals/snippets.html)。所以只需制作一个包含以下内容的片段：

```
{content_matrix}
   <div>
      {text_cell}
   </div>    
   {image}
{/content_matrix} 
```

并将其另存为**matrix_loop**。然后将其包含在您的 Channel Entries 循环中，如下所示：

```
{matrix_loop} 
```

# c - 使用 fork() 和 IPC 在 C 中最有效的矩阵乘法

> ID：12569785
> 
> 赞同：1
> 
> 时间：2012-09-24T17:16:54.143
> 
> 标签：c, concurrency, ipc, fork, matrix-multiplication

我需要使用多个进程在 C 中实现并发矩阵乘法。我知道因为每个进程都有自己的私有地址空间，我将不得不使用某种形式的进程间通信 (IPC)。我环顾四周，找不到许多不使用线程的实现。我想知道是否有人知道解决此问题的最佳方法，无论是使用共享内存、消息传递还是管道？我不是在寻求解决方案，而是如果有人知道，这些方法中的哪一种对矩阵乘法更有效。或者，如果有一个通用的标准方法可以用多个进程来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:22:25.960

**我认为共享内存**将是解决这个问题的好方法。这些进程可以计算它们的解决方案并共享一个内存以将解决方案放在一起。

```
#include <sys/ipc.h>
#include <sys/shm.h>
int shmget(key_t key, int size, int shmflg); 
```

是共享内存的 C 函数之一（您`shmat()`可能`shmdt()`也需要`shmctl()`）。

此外，您还必须关心同步，以便进程不会相互操纵计算。

我会为此使用**信号量**：请参阅[C 中的](http://openbook.galileocomputing.de/unix_guru/node394.html)信号量和[信号量维基百科](http://en.wikipedia.org/wiki/Semaphore_%28programming%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:23:56.477

并发处理矩阵乘法的最有效方法是共享内存。这样，您不必通过管道/消息序列化矩阵，并且可以直接将乘法应用到共享内存空间上。

# php - IE8 在点击后退按钮后用错误的数据填充表单字段

> ID：12569789
> 
> 赞同：1
> 
> 时间：2012-09-24T17:17:11.270
> 
> 标签：php, html, forms, internet-explorer-8

我需要的是这个：

*   用户加载页面（输入为空）
*   用户提供一些输入并提交
*   输入有它们的新值
*   用户导航回来
*   输入有它们以前的值

我的 php 文件如下所示：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
    <form id="formTest" name="formTest" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" autocomplete="off">
        <select id="selectTest" name="selectTest">
            <option value=0 <?php if(isset($_POST['selectTest']) && $_POST['selectTest']==0){echo 'selected=\'selected\'';} ?>>Select an option...</option>
            <option value=1 <?php if(isset($_POST['selectTest']) && $_POST['selectTest']==1){echo 'selected=\'selected\'';} ?>>Option 1</option>
            <option value=2 <?php if(isset($_POST['selectTest']) && $_POST['selectTest']==2){echo 'selected=\'selected\'';} ?>>Option 2</option>        
        </select>
        <br/>
        <input id="inputTest" name="inputTest" type="text" value="<?php if(isset($_POST['inputTest'])){echo htmlentities($_POST['inputTest']);} ?>" />          
        <br/>
        <input type="submit" value="OK" />
    </form>
    <?php
        print_r($_POST);
    ?>
</body>
</html> 
```

如您所见，表单在提交后“记住”其数据。当用户点击浏览器的后退按钮时，就会出现问题。尽管 POST 数组具有前一个状态的值，但浏览器会用下一个状态的数据（提交后的数据）填充字段。

**虽然我可以通过关闭表单的自动完成属性**在 Chrome 和 Firefox 中解决这个问题，但这在 IE8 中没有结果。

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:26:57.793

听起来您希望表单始终显示您在 PHP 中回显的值？一个快速而肮脏的解决方法是在页面加载时重置表单：

```
<body onload="document.forms[0].reset();"> 
```

您可能需要为不同的页面结构更新 onload 属性，或者如果您的实际应用程序使用 jQuery 并且您为表单提供 ID，您可以更优雅地完成此操作。

我相信也有一种方法可以在 IE 中关闭每个字段的自动完成/历史记录。我必须用谷歌搜索。编辑：好的，我做了......看起来你有 IE 正在寻找的表单属性。我不认为这实际上是一个自动完成问题，因为后退按钮试图重新创建页面的最后状态......包括用户所做的更改，特别是填写字段。

这是在文档准备好时重置表单的 jQuery 方法（包括后退按钮）......奇怪的是，jQuery 没有实现表单的 reset() 方法，因此 [0] 为您获取原始 DOM 元素。将这些行添加到您的脑海中；如果可用且首选，请在您的服务器上替换本地 jquery：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
$(function(){$("#formTest")[0].reset();});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:24:46.373

如果您通过某种持久结构（想到会话范围）运行它们，则可以将其设置为表单的条件。因此，如果它没有看到表单变量（这是用于传递和询问表单内容的帖子）。因此，该语句将替换 post isset，而是检查结构“会话”（或其他范围）是否存在以及是否存在。有道理？我希望这有帮助。

# mysql - 使用多连接的长 sql 查询获取记录

> ID：12569801
> 
> 赞同：0
> 
> 时间：2012-09-24T17:18:20.177
> 
> 标签：mysql, sql

我会尽可能多地解释事情。我有以下查询来从不同的表中获取记录。

```
SELECT 
  p.p_name,
  p.id,
  cat.cat_name,
  p.property_type,
  p.p_type,
  p.address,
  c.client_name,
  p.price,
  GROUP_CONCAT(pr.price) AS c_price,
  pd.land_area,
  pd.land_area_rp,
  p.tagline,
  p.map_location,
  r.id,
  p.status,
  co.country_name,
  p.`show`,
  u.name,
  p.created_date,
  p.updated_dt,
  o.type_id,
  p.furnished,
  p.expiry_date 
FROM
  property p 
  LEFT OUTER JOIN region AS r 
    ON p.district_id = r.id 
  LEFT OUTER JOIN country AS co 
    ON p.country_id = co.country_id 
  LEFT OUTER JOIN property_category AS cat 
    ON p.cat_id = cat.id 
  LEFT OUTER JOIN property_area_details AS pd 
    ON p.id = pd.property_id 
  LEFT OUTER JOIN sc_clients AS c 
    ON p.client_id = c.client_id 
  LEFT OUTER JOIN admin AS u 
    ON p.adminid = u.id 
  LEFT OUTER JOIN sc_property_orientation_type AS o 
    ON p.orientation_type = o.type_id 
  LEFT OUTER JOIN property_amenities_details AS pad 
    ON p.id = pad.property_id 
  LEFT OUTER JOIN sc_commercial_property_price AS pr 
    ON p.id = pr.property_id 
WHERE p.id > 0 
  AND (
    p.created_date > DATE_SUB(NOW(), INTERVAL 1 YEAR) 
    OR p.updated_dt > DATE_SUB(NOW(), INTERVAL 1 YEAR)
  ) 
  AND p.p_type = 'sale' 
```

`GROUP_CONCAT(pr.price) AS c_price,`如果我从上述查询中排除，一切正常。但是当我把它包括在内时，它只会给出一个结果。我在上面使用 group concat 的意图是从`sc_commercial_property_price`在这种情况下与属性 id 匹配的表中获取逗号分隔的价格`p.id`。如果属性记录存在，`sc_commercial_property_price`则以逗号分隔的形式与其他记录一起获取它们。如果不是，它应该返回空白。我在这里做错了什么？

如果我的问题不清楚，我会尝试再次解释。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:21:17.513

添加`GROUP BY`子句枚举您打算为其设置单独的行的任何内容。现在发生的是它为每个结果列和s every选择*一些*值。`group_concat``pr.price`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:03:15.917

是`GROUP_CONCAT`一个聚合函数。包含它时，您是在告诉 SQL 存在聚合。如果没有 a `GROUP BY`，则只返回一行，如下所示：

```
select count(*)
from table 
```

您拥有的查询在 MySQL 中是可接受的语法，但在任何其他数据库中都不是。查询不会自动按没有函数的列分组。相反，它返回一个任意值。你可以想象一个 function `ANY`，所以你查询的是：

```
select any(p.p_name) as p_num, any(p.tagline) as tagline, . . . 
```

要解决此问题，请将所有当前变量放在 group by 子句中：

```
GROUP BY
  p.p_name,
  p.id,
  cat.cat_name,
  p.property_type,
  p.p_type,
  p.address,
  c.client_name,
  p.price,
  pd.land_area,
  pd.land_area_rp,
  p.tagline,
  p.map_location,
  r.id,
  p.status,
  co.country_name,
  p.`show`,
  u.name,
  p.created_date,
  p.updated_dt,
  o.type_id,
  p.furnished,
  p.expiry_date 
```

大多数编写 SQL 的人认为在`group by`子句中包含所有 group by 变量是一种很好的形式，尽管 MySQL 不一定要求这样做。

# events - 停止在电晕中听“x”秒

> ID：12569803
> 
> 赞同：0
> 
> 时间：2012-09-24T17:18:26.390
> 
> 标签：events, lua, coronasdk, listen

我有一个基于摇动事件的淡入/淡出功能，但是如果您在功能期间再次摇动它，它会堆叠功能。我想要的是让它等到功能结束（5 秒）然后再次收听。代码是什么？

这是我目前拥有的：

```
function fadeOut ( event )
    transition.to(yes1, {time=2000, alpha=0})
    transition.to(yes2, {time=2000, alpha=0})
    ...
    transition.to(funny3, {time=2000, alpha=0})
    transition.to(funny4, {time=2000, alpha=0})
    timer.performWithDelay(2000, onShakeComplete)
end

responses = {yes1, yes2, yes3, yes4, yes5, yes6, yes7, yes8, yes9, yes10,
no1, no2, no3, no4, no5, maybe1, maybe2, maybe3, maybe4, maybe5,
funny1, funny2, funny3, funny4}

local shaking = false

-- reset shaking flag after a shake is completed
local function onShakeComplete()
    shaking = false
end

local function onShake (event)
        if event.isShake and not shaking then
        shaking = true
        local object = responses[math.random(1,20)]
        transition.to(object, {time=2000, alpha=1})
        timer.performWithDelay(4000, fadeOut)
    end
end
Runtime:addEventListener("accelerometer", onShake) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:34:30.273

```
-- true if we have a shake happening right now
local shaking = false

-- reset shaking flag after a shake is completed
local function onShakeComplete()
    shaking = false
end

local function onShake (event)
    if event.isShake and not shaking then
        local object = responses[math.random(1,20)]
        transition.to(object, {time=2000, alpha=1})
        timer.performWithDelay(4000, fadeOut)
        timer.performWithDelay(4000, onShakeComplete)
        shaking = true
    end
end 
```

# cuda - 如何避免使用超过 GPU 允许的最大线程数？

> ID：12569804
> 
> 赞同：0
> 
> 时间：2012-09-24T17:18:26.373
> 
> 标签：cuda

如上一篇文章所述： [如何找到 CUDA 中的最大可用线程数？](https://stackoverflow.com/questions/12568991/how-to-find-the-number-of-maximum-available-threads-in-cuda) 我发现我的 GPU 卡上的最大线程数是 21504。但是，当我为内核分配的线程数超过这个数时，一切运行顺利。

```
#include <stdio.h>
#include <cuda_runtime.h>

__global__ void dummy()
{
}

int main()
{
    //int N=21504;
    int N=21504*40;
    dummy<<<1,N>>>();
    return 0;
} 
```

我不知道发生了什么，但我相信我们应该避免这种情况，并且不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:26:14.700

您的示例运行不正确。它只是看起来运行正确，因为您没有在内核启动后检查 CUDA 错误状态。

我对您的其他问题的评论也适用于这里：

> 每个多处理器的最大线程数是同时“正在运行”的线程数的上限。其他限制因素通常会进一步限制数量。此值不会影响可以同时启动的线程数，并且对于找出最佳性能所需的线程数不是很有用。

您的卡是计算能力 2.0 设备。`Features and Technical Specifications`有关设备限制的详细信息，请参阅 CUDA 编程指南中的部分。特别是，您的设备在 X、Y 和 Z 维度中的每个网格大小都被限制为 65535。您尝试使用 X = 21504*40、Y = 1、Z = 1 的网格大小启动。

您的设备限制为每个块 1024 个线程。因此，理论上，您最多可以启动 65535 * 65535 * 65535 个块，每个块同时具有 1024 个线程。

启动具有比设备支持的最大常驻线程数更多的线程的内核没有性能损失。

# facebook - 开放图 - 需要 XMLNS？

> ID：12569807
> 
> 赞同：2
> 
> 时间：2012-09-24T17:19:00.303
> 
> 标签：facebook, facebook-opengraph

我将在我的网站上使用 Open Graph Meta 与 Facebook 共享。我有点困惑。要使 og 标记起作用，它必须具有以下内容：`xmlns:og="http://ogp.me/ns#"`正确吗？

所以归结为两个问题：

1.  我必须有 xmlns 吗？
2.  如果使用 HTML5 文档类型，它会正常工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T05:54:20.607

您不必使用此 xmlns 语法。您可以使用 HTML5 的前缀：

```
<head prefix='og: http://ogp.me/ns#'> 
```

无论如何，这实际上只是一个简写，而不是在每个属性中都有整个命名空间。

例如：

```
<head prefix='og: http://ogp.me/ns#'>
    <title>Dom Perignon 1993</title>
    <meta property='og:site_name' content='Wine Site' />
    ... 
```

在语义上与

```
<head>
    <title>Dom Perignon 1993</title>
    <meta property='http://ogp.me/ns#site_name' content='Wine Site' />
    ... 
```

# html - CSS：右下角的相对定位

> ID：12569808
> 
> 赞同：1
> 
> 时间：2012-09-24T17:19:08.170
> 
> 标签：html, css, css-position

浮动元素具有以下结构：

```
<a>The_button</a>
<div style="position:absolute">
    <div style="position:relative" class="inner-box">
       Content
       Content
       Content
       Content
       Content
    </div>
</div> 
```

多个内框控件的内容长度可变，因此内框的高度可变。我想定义 CSS 类 .inner-box （不带 JavaScript），以便**内框的****右下角**相对于链接**的左上角**定位。这可能吗？

 ****目标浏览器是 IE8+、Firefox、Chrome、Opera、Safari。

链接始终具有相同的高度和宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:28:10.160

~~到目前为止，我能想到的唯一解决方案是：~~

[http://jsfiddle.net/fmVz6/](http://jsfiddle.net/fmVz6/) - 这需要在“外盒”上定义高度和宽度，而不是内盒（内盒也必须绝对定位）。

目前正在制作第二个...

~~[http://jsfiddle.net/fmVz6/1/](http://jsfiddle.net/fmVz6/1/) - 这个不需要指定高度或宽度，它只需要在父 div 内的东西（例如空格）来查看效果，否则背景不会出现。~~

好的，让它出现在链接的左上角，[http://jsfiddle.net/H5G8r/1/](http://jsfiddle.net/H5G8r/1/)（需要对您的 HTML 进行一些重新排列）。

这个不需要定义宽度，并且不会将单词分成多行：http: [//jsfiddle.net/H5G8r/2/](http://jsfiddle.net/H5G8r/2/)

随你挑:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:24:04.167

你有正确的想法，但倒退。父元素需要`position: relative`和内部元素，因为内部元素*相对于*其父`position: absolute`元素是绝对定位的（从技术上讲，它的. 在父元素上指定使其成为其所有子元素的一部分）。*`offsetParent``position: relative``offsetParent`*

 *下一步：要将父元素的左上角与绝对定位的子元素的右下角对齐，请在子元素`right: 100%; bottom: 100%`的 CSS 中指定。这使子 <100% of parent's width> 远离父级的右边缘，而 <100% of parent's height> 远离底部。

### HTML

```
<div class=outer-box>
    The Button
    <div class=inner-box>
    </div>
</div>​ 
```

### CSS

```
.outer-box {
    position: relative;
}

.inner-box {
    position: absolute;
    /* align bottom-right with offsetParent's top-left */
    bottom: 100%;
    right: 100%;
    width: 100px; /* fixed width, else contents will shrink */
} 
```

*同样在 jsFiddle：http: [//jsfiddle.net/ryanartecona/g344W/2/](http://jsfiddle.net/ryanartecona/g344W/2/)*

当你把它们对齐时，你可能想在里面放另一个盒子`.inner-box`，让它`position: relative`进行任何位置调整，比如在按钮上滑动固定距离等。*****

# reporting-services - 当每列小于其大小时，标题换行到新行

> ID：12569810
> 
> 赞同：0
> 
> 时间：2012-09-24T17:19:11.287
> 
> 标签：reporting-services

我有一个分栏，它的标题相当长。突破总是有不止一列（通常是 12 列，每个月一列）。

我的标题是：“2012 Forecasts”，所以我希望它看起来像这样：

```
|                              2012 Forecasts
|Jan | Feb | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov | Dec | 
```

问题是，当我预览报告时，它看起来像这样：

```
|                              2012 Forecasts
|
|Jan | Feb | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov | Dec | 
```

对于此表，这是不可接受的格式，因为有许多嵌套行，这使得表头非常大。

在尝试解决方案时，我注意到使列的长度足够大以适合字符串“2012 Forecasts”，从而减小了行大小。但是，这样做我的列太宽了。

有没有一种方法可以强制列标题不以这种方式换行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:18:31.867

在标题的属性中，我将**CanGrow**设置为 false，它抑制了新行

# javascript - Javascript 表单操作

> ID：12569812
> 
> 赞同：0
> 
> 时间：2012-09-24T17:19:26.747
> 
> 标签：javascript, html, forms, autocomplete

我的页面上有一个文本字段，其中包含数据库中的项目的自动完成功能。选中后，使用 jquery 将页面滚动到该结果在页面上的位置。我希望表单滚动到提交按钮上的结果，而不必再次单击文本字段。我将如何编辑我的代码以使其在提交时发生，而不是在文本字段单击时发生

表格代码 -

```
<form autocomplete="off">
<form name="search-highlight" id="search-highlight" method="post" action="#">
<p>
Film Name <label>:</label>
<input type="text" name="scroll" id="scroll" class="scroll"/>
                       <!--input type="button" value="Get Value" /-->
 </p>
<input type="submit" value="find" />
</form> 
```

和 javascript

```
$("#scroll").autocomplete("get_film_list.php", {
    width: 260,
    matchContains: true,
    //mustMatch: true,
    //minChars: 0,
    //multiple: true,
    //highlight: false,
    //multipleSeparator: ",",
    selectFirst: false
});

$("#scroll").click(function(){  

    // start variables as empty  
    var scroll = "";  
    var n = "0";  

    // hide the results at first  
    $("p.results").hide().empty();  
    // grab the input value and store in variable  
    scroll = $('#scroll').attr('value');  
    console.log("The value of film is: "+scroll);  

    $('span.highlight').each(function(){  
        $(this).after($(this).html()).remove();  
    });  

    if($('#scroll').val() == ""){  
        $("p.results").fadeIn().append("Enter film in field above");  
        $('#scroll').fadeIn().addClass("error");  
        return false;  
    }else{  
       $('div.timeline :contains("'+scroll+'")').each(function(){ 
           $(this).html($(this).html().replace(new RegExp(scroll,'g'), '<span class="highlight">'+scroll+'</span>'));  
           $(this).find('span.highlight').fadeIn("slow"); 
           var offset = $(this).offset().top
           $('html,body').animate({scrollTop: offset}, 2000);
           return false;

        });  

        // how many did it find?  
        n = $("span.highlight").length;  
        console.log("There is a total of: "+n);  

        if(n == 0){  
            $("p.results").fadeIn().append("No results were returned");  
        }else{  
            $("p.results").fadeIn().append("<strong>Returned:</strong> "+n+" result(s) for: <em><strong>"+scroll+"</strong></em>.");  
        }  
        return false;  
    }  
});  
}); 
```

我希望你能理解我的问题——如果不是演示（未优化）www.ignitethatdesign.com/CheckFilm/index.php

方面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:43:22.400

如果您将 更改`$("#scroll").click(`为目标提交按钮（类似`$("#search-highlight input[type='submit'].click`）应该会得到您的行为。

您可能应该扩展单击回调的签名以包含事件参数，如

`.click(function(event)){`所以稍后您可以调用`event.stopPropagation()`, 向浏览器指示您输入的点击事件已被处理（并且它不会尝试将表单发回）。

# php - 记录 PHP 致命错误

> ID：12569813
> 
> 赞同：0
> 
> 时间：2012-09-24T17:19:35.550
> 
> 标签：php, logging

我的网站在托管服务器上，因为我无权访问 php.ini，所以我无法配置任何 php 错误

我面临的问题是我的服务器提供商没有记录 php 错误。我能够（通过异常）捕获其他错误，例如通知，但无法捕获致命错误。

由于我无权访问错误日志，我不知道我的一些访问者是否在我的网站上面临致命错误......

我已经问过我的提供商，但他们只是告诉我他们不会记录错误，以后也不会这样做。出于维护原因，我真的想保留我的托管服务器。

是否有任何其他可能性来跟踪或记录致命错误，以便我没有更改配置中的任何内容？

此致，

弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:23:52.427

在`set_error_handler()`和之间，`register_shutdown_function()`您应该能够定义自定义逻辑来处理您的所有错误、异常、致命错误等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:21:35.653

您可以使用 PHP 的[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)函数来处理这个问题。抛出错误时，您可以将错误记录到您自己的文本文件中，或者通过电子邮件发送给您，或者您想做的任何事情。

# objective-c - 创建一个简单的单视图 Quartz 应用程序

> ID：12569818
> 
> 赞同：0
> 
> 时间：2012-09-24T17:20:02.300
> 
> 标签：objective-c, macos, quartz-graphics, quartz-2d

我是一个 Objective-C 新手。我的大部分经验都是在 Java 中。此外，我以前从未真正使用过 Xcode，所以我对此也很陌生。

我正在尝试创建一个简单的单视图 Quartz OS X 应用程序（不是 iOS）来显示代理建模模拟。图形非常简单；只是彩色的正方形和网格。我一直在看 Quartz 教程，我可以看到我是如何做到这一点的（就绘图而言）。我找不到的是一个例子，它告诉我如何将它们联系在一起。我放`AppDelegate`什么？我需要一个`WindowController`吗？我如何将其与 联系起来`AppDelegate`？我已经在 Interface Builder 中为我的应用程序创建了一个 Quartz Composer 视图，但我不知道从那里去哪里。

正如我之前提到的，我已经寻找了大量的教程，但是我找不到任何可以为我提供将所有内容链接在一起的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:50:48.123

在您做任何其他事情之前，您应该访问[此网页。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/AddingBehaviortoaCocoaProgram/AddingBehaviorCocoa.html)它将向您展示 Cocoa 应用程序的结构以及放置代码的适当入口点的位置。

虽然整篇文章都值得阅读，但请访问“入口和出口点”部分，它最能解决您的特定问题。

# objective-c - 为 iphone 5 和 iphone 4 制作应用程序

> ID：12569819
> 
> 赞同：-8
> 
> 时间：2012-09-24T17:20:06.437
> 
> 标签：objective-c, ios, xcode, iphone-4, iphone-5

嗨，我有下一个问题，我为 iphone 5 和 iphone 4 屏幕尺寸开发 iOS`4.3 ++`支持，我是否必须 `2 UI`为**屏幕尺寸 3.4**和其他**为 4**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:30:55.683

如果您在更新您的应用程序以适应新的 iPhone 5 配置时遇到任何问题，请考虑至少阅读以下内容：[https](https://developer.apple.com/devcenter/ios/checklist/) ://developer.apple.com/devcenter/ios/checklist/并且您可以在 StackOverflow 上更具体地询问关于您遇到的任何问题的问题。

# java - 在模拟器中运行android应用程序时没有布局

> ID：12569825
> 
> 赞同：0
> 
> 时间：2012-09-24T17:20:42.350
> 
> 标签：java, android, layout, emulation

所以，我有这个代码：

```
package com.example.ponto_2d;

import android.app.Activity;
import android.view.Menu;
import android.view.MotionEvent;
import android.widget.TextView;

public class MainActivity extends Activity {
pontos p1=new pontos();
pontos p2=new pontos();

            @Override
            public boolean onTouchEvent(MotionEvent event) {

                TextView tv1 = (TextView) findViewById(R.id.textView2);

                   int eventaction= event.getAction();

                   switch (eventaction){
                   case MotionEvent.ACTION_DOWN:
                       p1.x=event.getX();
                       break;   

                   }

                   tv1.setText(""+p1.x);

                   return true;
            }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这节课：

```
package com.example.ponto_2d;

public class pontos {
        public double x,y;

        public double distancia(pontos p2){

            return Math.sqrt((p2.x-x)*(p2.x-x) + (p2.y-y)*(p2.y-y));
        }
} 
```

这个 xml 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="38dp"
        android:text="@string/titulo_app"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="30dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/valor"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView2"
        android:layout_alignBottom="@+id/textView2"
        android:layout_alignRight="@+id/textView1"
        android:text="@string/distancia_1"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

我认为没关系，但是当我运行模拟器时，我什么也得不到，甚至没有一个按钮。关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:23:45.637

您没有 onCreate() 方法，因此没有真正启动。onCreate() 是 Java 中 main() 的 android 等价物。尝试使用：

```
public class MainActivity extends Activity {
pontos p1=new pontos();
pontos p2=new pontos();

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.<yourXMLFile>);
    }
            @Override
            public boolean onTouchEvent(MotionEvent event) {

                TextView tv1 = (TextView) findViewById(R.id.textView2);

                   int eventaction= event.getAction();

                   switch (eventaction){
                   case MotionEvent.ACTION_DOWN:
                       p1.x=event.getX();
                       break;   

                   }

                   tv1.setText(""+p1.x);

                   return true;
            }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

替换为您的 xml 布局文件的名称，减去扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:23:35.247

您的活动中没有`onCreate()`方法。在该方法中，您需要调用`setContentView()`并传入 xml 布局的资源 ID。 [这个链接](http://developer.android.com/training/basics/activity-lifecycle/starting.html)应该让你开始。

# node.js - Node.js 代码加载到 mongodb 不一致

> ID：12569830
> 
> 赞同：0
> 
> 时间：2012-09-24T17:20:57.537
> 
> 标签：node.js, mongodb

以下代码尝试从 csv 文件加载到在 localhost 上运行的 mongodb 实例。

**问题**- 它在每次运行时加载不同数量的文档（总是少于 csv 中的记录总数）。

```
var csv = require('csv');

var server = new Server('localhost', 27017, {auto_reconnect: true, poolSize: 1});
var db = new Db('test', server);

db.open(function(err, db, onemore) {
  if(!err) {
    //Database connection is established.
    db.collection('teststocks', function(err, collection) {
      if(!err) {
        // Stocks collection is connected, open the file and insert the doc
        console.log("Trying to load from " + process.argv[2]);
        csv()
          .fromPath(process.argv[2], {
            columns: true
          })
          .on('data', function(data, index) {
            //data.stock = process.argv[2].substring(process.argv[2].lastIndexOf('/') + 1, process.argv[2].lastIndexOf('.'));
            collection.insert(data, {safe: true}, function(error, collection){
                    if ( error ) { console.log("Error inserting record : " + error); }
            });
            console.log("Inserted data for " + index);
          })
          .on('error', function(error) {
            db.close();
            console.log("Error: " + error);
          })
          .on('end', function(count) {
            console.log("Finished all writing.");
            db.close();
          });
      }
  });
  }
}); 
```

*PS：我可以使用 mongoimport 实用程序加载数据，但我是 node.js 和 mongodb 的新手；我想了解我在上面的代码中犯的错误。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:01:09.897

这可能是因为您在`csv()`完成阅读后关闭了数据库连接。但是，与`collection.insert`异步一样，不能保证每次调用都在`csv`完成并被`db.close()`调用之前完成。

一种选择是将 收集`csv` `data`到 中`Array`，然后`insert`一次收集所有这些：

```
var docs = [];

csv()
  // ...
  .on('data', function (data, index) {
    docs.push(data); // or possibly: docs[index] = data;
  })
  // ...
  .on('end', function () {
    console.log("Finished reading CSV.");    

    collection.insert(docs, { safe: true }, function (error, inserted) {
      console.log("Finished all writing.");
      db.close();
    });
  }); 
```

# java - 在进行广度优先搜索时，访问节点是否重要？

> ID：12569831
> 
> 赞同：1
> 
> 时间：2012-09-24T17:21:06.810
> 
> 标签：java, graph, tree, breadth-first-search

我用 Java 为树编写了以下 BFS：

```
public class Node
{
    public int value;
    public ArrayList<Node> myChildren = new ArrayList<Node>();

    public Node(int v)
    {
        value = v;
    }
}

public Node breadthFirstSearch(Node root, int value)
{
    if(root == null) return null;
    Queue<Node> nodesToVisit = new LinkedList<Node>();
    nodesToVisit.add(root);
    while(nodesToVisit.size() > 0)
    {
        Node currentNode = nodesToVisit.remove();
        if(currentNode.value == value) return currentNode;
        nodesToVisit.addAll(currentNode.myChildren);
    }

    return null;
} 
```

我的问题是，当我“访问”节点时（就运行时复杂性或其他因素而言）是否重要`if(currentNode.value == value)`。我可以在将节点从队列中弹出之后访问该节点，也可以在将其放入队列之前访问该节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:25:44.990

有关系吗？这取决于你在做什么。

如果树中有多个节点满足您的搜索条件，则在子节点之前访问父节点，而不是在父节点之前访问子节点，可能会更改搜索返回的节点。这真的会发生吗？这取决于您的应用程序的详细信息。

无论哪种方式，big-O 复杂度都是相同的。根据树和搜索的特性，可能需要以一种或另一种方式进行更多操作。（例如，如果 50% 的搜索是针对存储在根节点中的值，那么通过首先访问父节点，您的代码将运行得更快。）

当搜索“失败”（在树中找不到该值）时，无论您访问节点的顺序如何，执行的操作数都是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:00:06.343

不，没关系（很多）。

您基本上是在谈论这两行的顺序：

```
if (currentNode.value == value) return currentNode;
nodesToVisit.addAll(currentNode.myChildren); 
```

为了性能和代码清晰，早点返回总是一件好事，所以我会让你的代码保持原样。

如果您颠倒这些行的顺序，您将产生调用的额外费用，`addAll()`但是这可以忽略不计。

# java - 最小化控制器责任

> ID：12569832
> 
> 赞同：4
> 
> 时间：2012-09-24T17:21:08.683
> 
> 标签：java, spring-mvc

理想情况下，Spring MVC 应用程序中的控制器必须接收请求，将请求发送到 API，将（调用的）结果加载到模型（以便视图随后呈现它）并转发到视图。他们不应该再做。

我的控制器今天做的远不止这些，我想将某些职责从控制器转移到其他 API。我今天的应用程序设计（非常典型）：

```
controller <-> Service API <-> DAO <-> DB 
```

今天，控制器填补了 Web 应用程序需要的内容和服务 API 提供的内容之间的差异。我想在控制器和服务 API 之间放置额外的层/层，以消除这个增量。我的问题是这些应该是什么层，这些新层的职责应该是什么？

我目前的想法如下

```
controller <-> controller helper <-> Business API <-> Service API <-> DAO <-> DB 
```

控制器助手（Web 上下文感知 - 将依赖于 Model、HttpServlet 和其他 Web 上下文类）：

1.  将实体转换为 DTO 对象（2 种方式）
2.  将 ID 解析为实体。例如，控制器查找学生 ID（使用密钥）并将其转换为学生实体。

业务 API（无 Web 上下文依赖 - 可以进行 JUnit 测试）：

1.  充当门面。调用多个服务 API 来实现一个业务请求。
2.  提供专门为 Web 应用程序定制的 API。

你会用不同的方式解决这个问题吗？是否有与此特定问题相关的任何资源（书籍、文章等）？

之前的一些讨论没有*回答*我的问题：

[设计mvc控制器层](https://stackoverflow.com/questions/1873698/designing-mvc-controller-layer)

[服务层 = 应用层 = GRASP 控制器层](https://stackoverflow.com/questions/5368085/service-layer-application-layer-grasp-controller-layer)

[将验证、Html 助手移动到 MVC 中的服务层](https://stackoverflow.com/questions/8254688/moving-validation-html-helpers-to-service-layer-in-mvc)

谢谢，维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:24:34.523

服务包含应用程序的一般业务逻辑。它们几乎是控制器和 DAO/DB 之间的任何东西。

您的“业务层”和“控制器助手”只是更多的服务。为了简单起见，我会保留经典设计：

```
Controllers <-> possible Services <-> possible DAOs <-> DB 
```

如果我有很多服务（我通常不会）碰巧执行相同类型的逻辑，我自然会将它们拆分为子包。例如 ：

*   services.facade 或 services.business
*   services.adapter 用于 DTO（除非您使用简单的类来完成这项工作）

外观服务由控制器调用，如下所示：`someFacade.someMethod(SomeDTO someDto)`。然后外观处理 DTO <-> 实体转换，这要归功于其他服务（或简单的类）。

这就是我在你的情况下会做的事情。在一个理想的世界中（没有遗留系统，或者在一个从头开始的项目中），我会直接使用实体作为表单对象（而不是 DTO），并且我的大部分服务都是门面（如果可能的话，其余的都是简单的类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T20:59:15.253

我是 Spring MVC 的新手，也面临着这个困境。尽管 Spring 对我来说是新事物，但我已经使用 MVC 工作了好几年了。我同意控制器应该只接受请求、分派它们并以正确的格式呈现结果。我认为服务不一定是帮助抽象存在的最佳场所。我相信一个服务应该封装一个特定的 API 并且什么都不做。我觉得创建许多“类型”的服务会使这种模式复杂化，并不清楚责任落在哪里。

我相信帮助者更适合作为服务的兄弟姐妹；它们应该用@Component 而不是@Service 装饰。它们的作用是充当底层 API 的外观，这些 API 需要在通过端点公开的模型上转换状态。Controller->Helper->[Services] 模式促进了关注点的清晰分离、代码可重用性和高度可测试性。这种模式的本质是防止控制器膨胀，所以你最终会得到超薄的控制器，它实际上只做分派请求和呈现响应。

# java - 返回动态对象类型的通用方法

> ID：12569833
> 
> 赞同：27
> 
> 时间：2012-09-24T17:21:15.220
> 
> 标签：java, generics, methods, casting

可能是一个以前被问过的问题，但像往常一样，当你提到泛型这个词时，你会得到一千个解释类型擦除的答案。我很久以前就经历过那个阶段，现在对泛型及其使用有了很多了解，但这种情况稍微微妙一些。

我有一个容器，它表示电子表格中的一个数据单元格，它实际上以两种格式存储数据：作为用于显示的字符串，但也以另一种格式，取决于数据（存储为对象）。该单元还拥有一个在类型之间转换的转换器，并且还对类型进行有效性检查（例如，一个 IntegerTransformer 检查字符串是否为有效整数，如果它返回一个整数来存储，反之亦然）。

单元格本身没有输入，因为我希望能够更改格式（例如，将辅助格式更改为浮点而不是整数，或更改为原始字符串），而无需使用新类型重建单元格对象。之前的尝试确实使用了泛型类型，但是一旦定义了就无法更改类型，编码变得非常庞大，需要大量反射。

问题是：如何以键入的方式从 Cell 中获取数据？我进行了实验，发现即使没有定义约束，也可以使用方法来使用泛型类型

```
public class Cell {
    private String stringVal;
    private Object valVal;
    private Transformer<?> trans;
    private Class<?> valClass;

    public String getStringVal(){
        return stringVal;
    }

    public boolean setStringVal(){
        //this not only set the value, but checks it with the transformer that it meets constraints and updates valVal too
    }

    public <T> T getValVal(){
        return (T) valVal;
        //This works, but I don't understand why
    }
} 
```

让我失望的是：那是？它不能投射任何东西，没有 T 类型的输入限制它匹配任何东西，实际上它并没有在任何地方说任何东西。有一个 Object 的返回类型除了在任何地方都给转换带来复杂性之外什么也没做。

在我的测试中，我设置了一个 Double 值，它存储了 Double （作为一个对象），当我执行 Double testdou = testCell.getValVal(); 它立即起作用，甚至没有未经检查的演员警告。但是，当我执行 String teststr = testCell.getValVal() 时，我得到了 ClassCastException。真的不足为奇。

我对此有两种看法：

一：使用未定义的 Cast to 似乎只不过是在方法返回后将强制转换放在方法内部而不是外部的一种笨拙方式。从用户的角度来看，它非常简洁，但该方法的用户必须担心使用正确的调用：所做的只是隐藏复杂的警告和检查，直到运行时，但似乎有效。

第二种观点是：我不喜欢这段代码：它不干净，它不是我通常以编写为荣的那种代码质量。代码应该是正确的，而不仅仅是工作。错误应该被捕获和处理，并且可以预见，即使唯一的预期用户是我自己，接口也应该是万无一失的，我总是更喜欢一种灵活的通用和可重用的技术，而不是笨拙的技术。问题是：有没有正常的方法可以做到这一点？这是实现无类型，所有接受 ArrayList 的一种偷偷摸摸的方式，它返回你想要的任何东西而不进行强制转换？或者我在这里缺少什么。有些东西告诉我我不应该相信这段代码！

也许比我想象的更多的是一个哲学问题，但我想这就是我要问的。

编辑：进一步测试。

我尝试了以下两个有趣的片段：

```
public <T> T getTypedElem() {
    T output = (T) this.typedElem;
    System.out.println(output.getClass());
    return output;
}

public <T> T getTypedElem() {
    T output = null;
    try {
        output = (T) this.typedElem;
        System.out.println(output.getClass());
    } catch (ClassCastException e) {
        System.out.println("class cast caught");
        return null;
    }
    return output;
} 
```

当将 double 分配给 typedElem 并尝试将其放入 String 时，我得到一个异常，不是在强制转换为 ，而是在返回时，并且第二个片段不保护。getClass 的输出是 java.lang.Double，表明它是从 typedElem 动态推断的，但是编译器级别的类型检查只是被强制排除在外。

作为辩论的注释：还有一个获取 valClass 的函数，这意味着可以在运行时进行可分配性检查。

编辑2：结果

在考虑了选项后，我采用了两种解决方案：一种是轻量级解决方案，但将函数注释为@depreciated，其次是您将要尝试将其转换为的类传递给它的解决方案。这种方式是根据情况选择的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-24T17:37:34.667

您可以尝试键入令牌：

```
public <T> T getValue(Class<T> cls) {
    if (valVal == null) return null;
    else {
        if (cls.isInstance(valVal)) return cls.cast(valVal);
        return null;
    }
} 
```

请注意，这不会进行任何转换（即，您不能使用此方法提取 a `Double`，如果`valVal`是`Float`or的实例`Integer`）。

顺便说一句，你应该得到一个关于你的定义的编译器警告`getValVal`。这是因为无法在运行时检查强制转换（Java 泛型通过“擦除”工作，这本质上意味着泛型类型参数在编译后被遗忘），所以生成的代码更像：

```
public Object getValVal() {
    return valVal;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T17:44:00.423

正如您所发现的，使用 Java 的类型系统可以表达的内容是有限的，即使使用泛型也是如此。有时，您希望使用类型声明来断言某些值的类型之间存在关系，但您不能（或者也许您可以，但代价是过度复杂和冗长冗长的代码）。我认为这篇文章中的示例代码（问题和答案）很好地说明了这一点。

在这种情况下，如果您将对象/字符串表示形式存储在“转换器”中，Java 编译器可以进行更多类型检查。（也许您必须重新考虑它是什么：也许它不仅仅是一个“变压器”。）在您的基`Transformer`类上放置一个通用绑定，并将相同的绑定设置为“对象”的类型。

至于*从*单元格中获取值，编译器类型检查无法帮助您，因为值可以是不同的类型（并且您在编译时不知道什么类型的对象将存储在给定单元格）。

我相信你也可以做类似的事情：

```
public <T> void setObject(Transformer<T> transformer, T object) {} 
```

如果设置转换器和对象的唯一方法是通过该方法，编译器对参数的类型检查将防止不兼容的转换器/对象对进入单元格。

如果我了解您在做什么，那么`Transformer`您使用的类型完全取决于单元格所持有的对象的类型，对吗？如果是这样，我不会将转换器/对象设置在一起，而是只为对象提供一个设置器，并进行哈希查找以找到合适的转换器（使用对象类型作为键）。每次设置值或将其转换为字符串时都可以进行哈希查找。无论哪种方式都会奏效。

这样自然就不可能`Transformer`传入错误的类型了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:39:13.363

我认为你是一个静态类型的人，但让我试试：你有没有想过使用像 groovy 这样的动态语言来做这部分？

根据您的描述，在我看来，类型更像是阻碍而不是帮助任何事情。

在 groovy 中，您可以让`Cell.valVal`动态类型化并轻松转换：

```
class Cell {
  String val
  def valVal
}

def cell = new Cell(val:"10.0")
cell.valVal = cell.val as BigDecimal
BigDecimal valVal = cell.valVal
assert valVal.class == BigDecimal
assert valVal == 10.0

cell.val = "20"
cell.valVal = cell.val as Integer
Integer valVal2 = cell.valVal
assert valVal2.class == Integer
assert valVal2 == 20 
```

它`as`是最常见的转换所需的一切。你也可以添加你的。

如果需要转换其他代码块，请注意 java 的语法是有效的 groovy 语法，除了`do { ... } while()`块

# macos - 为什么即使屏幕上显示一个对话框等待用户输入，bash 脚本仍会继续运行？

> ID：12569839
> 
> 赞同：1
> 
> 时间：2012-09-24T17:21:39.173
> 
> 标签：macos, bash, dialog, osascript

我有一个在 Mac OS X（X.5 到 X.8）机器上使用的 bash 脚本。在它是一个对话框情况，要求通过按“确定”继续脚本或通过按“打盹”让脚本打盹。那部分正在工作。

但是，我正在测试脚本并且无法立即按下任一按钮，并且在一两分钟后（我没有计时），脚本继续执行其余过程，让对话框留在屏幕上。

我的印象是脚本必须等待用户输入？

部分有问题的脚本：

osascript -e '告诉应用程序“Finder”激活'

返回=`osascript -e 'tell app "Finder" to display dialog "Text goes here. Please select OK or Snooze" buttons {"OK", "Snooze"} default button 1 with title "Text Here" with icon caution'`

```
 ############  BEGIN LOOP HERE  ############## 
```

while [ "$return" == "按钮返回：贪睡"]

```
 do
        Runs every 4 hours
        sleep 14400
        osascript -e 'tell app "Finder" to activate'
        return=`osascript -e 'tell app "Finder" to display dialog "Text goes here. Please select OK or Snooze" buttons {"OK", "Snooze"} default button 1 with title "Text Here" with icon 2'` 
```

完毕

###### 在这里结束循环

```
 if [ "$return" == "button returned:OK" ]
        then
                    run the installer script here
            fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:25:42.617

尝试将 return 语句的整个右侧放在反引号中，这将执行 osascript 并将“return”设置为该程序返回的字符串：

```
return=`osascript -e 'tell app "Finder" to display dialog "Text goes here. Please select OK or Snooze" buttons {"OK", "Snooze"} default button 1 with title "Text Here" with icon caution'` 
```

否则，您只是将返回设置为“=”右侧的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T14:27:50.237

要忽略超时错误，您可以试试这个。我们需要一个脚本来提示用户在密码到期前 14 天或更短的时间内更改密码。如果他们忽略提示，则脚本将因退出 0 而终止。您可以根据需要编辑此行为，但重点是，如果除了我的条件测试之外还返回**任何**`"button returned:OK"`其他内容，则脚本将跳过我不知道的内容不想让它运行

```
if [ $daysRemaining -lt $daysBeforeExpire ]
    then
        echo "$userName has $daysRemaining day(s) remaining to change their password"
        echo "Informing User..."
        return=`osascript -e "tell application \"System Events\" to display dialog \"You have $daysRemaining day(s) to change your password... Logout and change password now?\" buttons {\"Later\",\"OK\"}"`
        if [[ "button returned:OK" = $return ]]
            then 
            echo "Returned OK"
            echo "Asking to log out."
            osascript -e "tell application \"System Events\" to log out"
        else
            echo "Returned Later - Skipping user log out"
            exit 0
        fi
    else
        echo "$daysRemaining day(s) remaining to change password"
fi 
```

所以在你的情况下，这应该有效

```
 if [[ "button returned:OK" = $return ]]
        then
             run the installer script here
        else 
             sleep 100 #sleep the script OR
             exit 0    #end it
        fi 
```

# xpages - 针对 PATCH 的 Domino 数据访问响应挂起

> ID：12569842
> 
> 赞同：0
> 
> 时间：2012-09-24T17:21:57.697
> 
> 标签：xpages, xpages-extlib

我正在使用 Domino 数据访问（通过 RESTClient）来更新数据库中的文档。我正在使用 PATCH 和 PUT。在这两种情况下（PATCH 是一个标头覆盖），我都没有从 Domino 服务器得到响应。RESTClient 给了我一个“处理数据”，就是这样。如果我中止，我可以看到替换或更新已完成。所以 DDA 正在工作，除了我没有收到 200 或其他回复。Default 和 Anonymous 可以创建/编辑（数据库仍在测试中），我尝试过使用和不使用 form 和 computewithform 参数。我在服务器日志中没有看到任何内容。

有人可以告诉我在哪里看吗？似乎有什么东西阻止了完整的确认被发送，但我不知道那会是什么。其他测试，对于 GET，响应良好。

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:44:26.770

结果发现这是 RESTClient 的问题，而不是 DDA/DDS。感谢 Fotios Hatzis 的发现。我尝试使用 Chrome 扩展程序，响应显示为已执行。——</p>

# android - 捕获列表视图屏幕

> ID：12569843
> 
> 赞同：3
> 
> 时间：2012-09-24T17:22:00.273
> 
> 标签：android, android-listview

我在android中捕获屏幕时遇到了一个小问题。我正在使用一个包含很少项目的列表视图。当项目适合屏幕时，捕获屏幕没有问题。但是当列表项有滚动视图时（即列表视图中有更多数量的项目，因此它无法安装在屏幕中），我无法捕获屏幕。屏幕的捕获只为我提供了列表视图的可见项目，并且没有捕获不可见的项目。

我正在使用[链接](https://stackoverflow.com/questions/2661536/screenshot-android)来捕获屏幕。如果有任何方法可以捕获列表视图屏幕，任何人都可以建议我。

我的屏幕上有来自 az 的所有字母，但是当我尝试使用[此处](https://stackoverflow.com/questions/2801116/converting-a-view-to-bitmap-without-displaying-it-in-android)捕获时，我只得到了下面的屏幕截图。

![在此处输入图像描述](../Images/b5bb51b89192864f36caf81cd18ef124.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:28:28.303

这与这里的问题/答案[有关](https://stackoverflow.com/questions/2801116/converting-a-view-to-bitmap-without-displaying-it-in-android "这里")。基本上，您需要将视图呈现到由位图支持的画布上。该位图现在包含您的整个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:49:50.057

我们需要通过捕获列表视图中的每个列表项来捕获列表视图。在捕获列表视图中的每个项目后，我们需要添加所有捕获的列表项目并制作位图图像。这样我们可以捕获一个列表视图，即使它的所有项目都不可见

# java - JPA Criteria API 中的简单 CriteriaQuery 对于菜鸟来说太多了

> ID：12569849
> 
> 赞同：1
> 
> 时间：2012-09-24T17:22:24.483
> 
> 标签：java, hibernate, jpa, criteria-api

我正在尝试使用 JPA Criteria API 编写以下 SQL 查询

```
SELECT * FROM roles WHERE roles.name IN (SELECT users.role FROM users where name="somename"); 
```

这对我来说有点过分（我刚刚开始学习 Criteria API）。我得到了这样的东西：

```
 CriteriaBuilder criteriaBuilder = manager.getCriteriaBuilder();
    CriteriaQuery<RoleEntity> criteriaQuery = criteriaBuilder.createQuery(RoleEntity.class);
    Root<RoleEntity> root = criteriaQuery.from(RoleEntity.class);

    Subquery<UserEntity> subquery = criteriaQuery.subquery(UserEntity.class);
    Root<UserEntity> subqueryRoot = subquery.from(UserEntity.class);
    subquery.where(criteriaBuilder.equal(subqueryRoot.get(UserEntity_.username), username));
    subquery.select(subqueryRoot); 
```

我不知道如何把它们放在一起。

最好的问候， 巴特克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:30:23.150

这里是 JPA 学习者。这是我设置它的尝试：

```
// Get the criteria builder from the entity manager
CriteriaBuilder cb = manager.getCriteriaBuilder();

// Create a new criteria instance for the main query, the generic type indicates overall query results
CriteriaQuery<RoleEntity> c = cb.createQuery(RoleEntity.class);
// Root is the first from entity in the main query
Root<RoleEntity> role = criteriaQuery.from(RoleEntity.class);

// Now setup the subquery (type here is RETURN type of subquery, should match the users.role)
Subquery<RoleEntity> sq = cb.subquery(RoleEntity.class);
// Subquery selects from users
Root<UserEntity> userSQ = sq.from(UserEntity.class);
// Subquery selects users.role path, NOT the root, which is users
sq.select(userSQ.get(UserEntity_.role))
  .where(cb.equal(userSQ.get(UserEntity_.username), username)); // test for name="somename"

// Now set the select list on the criteria, and add the in condition for the non-correlated subquery
c.select(role)
  .where(cb.in(role).value(sq));  // can compare entities directly, this compares primary key identities automatically 
```

希望这会有所帮助！

# java - 使用 Jena 插入实例

> ID：12569850
> 
> 赞同：1
> 
> 时间：2012-09-24T17:22:24.907
> 
> 标签：java, insert, jena, ontology

我需要一些帮助，我想在我的本体中插入一个实例

```
$ public static JenaOWLModel owlModel; 
    public static void main( String[] args ) {

    try{
    owlModel = ProtegeOWL.createJenaOWLModelFromURI("file:///C:/Project/Krs1.owl");
    } catch (Exception e) { 
    e.printStackTrace();}
    RDFSNamedClass personClass = owlModel.getRDFSNamedClass("Concept");
    RDFProperty ageProperty = owlModel.getRDFProperty("hasnameactivite");
    RDFIndividual individual = personClass.getRDFIndividual(String Book);

    individual.setPropertyValue(ageProperty,new Integer(11).toString());
    Collection errors = new ArrayList();
    owlModel.save(URI.create("file:///C:/Project/Krs1.owl"), FileUtils.langXMLAbbrev, errors);
    System.out.println("File saved with " + errors.size() + " errors.");

    }

    } 
```

结果是

```
$ Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    String cannot be resolved
    Syntax error on token "Book", delete this token
    at conn.AEssaie2.main(AEssaie2.java:24). 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:10:33.460

> personClass.getRDFIndividual(String Book);

非法Java。使用 IDE（例如 Eclipse）。

# mysql - 专用网络上的 PHP MySQL 连接超时

> ID：12569856
> 
> 赞同：2
> 
> 时间：2012-09-24T17:22:36.777
> 
> 标签：mysql, nginx, php

当我的 Web 服务器上的 php 脚本通过专用网络连接到 MySQL 数据库服务器时，我收到间歇性的“连接超时”错误。但是，如果我告诉脚本使用公网连接，则不会出现这些错误。

我的连接脚本已设置，因此每当我尝试连接到 mysql 时，它都会检查错误，如果有错误，它会向我发送一封电子邮件，然后自动切换到公共网络以尝试该连接。如果公共连接失败，它会向我发送另一封电子邮件并向用户显示自定义网页。

我每小时会收到大约 5 到 10 个连接错误。每分钟有数百个成功的连接。

这些机器是专用机器。我联系了我们的托管公司，他们测试了路由器和电缆，说一切都很好。我尝试以两种方式 ping 服务器，并且在一个多小时的测试期间完全没有错误。

我正在使用最新的 Nginx 和最新的 PHP 和 PHP-FPM。mysql是5.5.27。这些是具有最新更新的 Centos 6 64 位系统。

我尝试了许多网络配置选项，调整 php-fpm 和 mysql 配置文件，无论我做什么或更改，都无法修复它。

奇怪的是，在公共网络上一切正常，而在两台机器之间的专用网络上，ping 和文件传输都很好。

有任何想法吗？

** 更新 **

我对 PHP-FPM 配置文件和 MySQL 配置文件进行了一些更改，现在错误大约为每小时 2 到 3 个，但仍未解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:38:55.407

我不确定这是你的情况，但仍然值得一提，因为它在类似的情况下帮助了我。基本上，linux内核中的最大连接数有一个上限：[https ://serverfault.com/questions/10852/what-limits-the-maximum-number-of-connections-on-a-linux-server](https://serverfault.com/questions/10852/what-limits-the-maximum-number-of-connections-on-a-linux-server)

不确定它是否在所有网络之间共享，但如果您认为值得检查，我只需将这些变量值提高两次，看看它是否对错误发生的频率有任何影响。

# java - Java数组二进制搜索对象与另一个类中的比较器

> ID：12569860
> 
> 赞同：1
> 
> 时间：2012-09-24T17:22:55.203
> 
> 标签：java, arrays, search, binary

我仍然很擅长编程，并且在 Java 中的数组上遇到了二进制搜索语法的问题。我正在尝试调用一个比较器方法（重载的“比较”方法），它存在于与我使用二进制搜索的类不同的类中。基本上我的目标是仅在数组中搜索存储的变量之一组成数组的对象。如果没有比较器，我无法成功执行此操作，因为我创建了一个“虚拟”对象来仅保存搜索所需的标准作为键。

这是我的二进制搜索代码：

```
Song searchSong = new Song(artistInput, artistInput, artistInput);
int search = Arrays.binarySearch(songs, searchSong, new compare<Song>()); 
```

这是我在一个单独的类中的重载比较器代码：

```
public int compare (Song firstSong, Song secondSong) {
  return firstSong.getArtist().compareTo(secondSong.getArtist());
} 
```

我确定这只是我缺少的一些简单的东西，但我还没有找到答案。我感谢任何帮助，如果需要更多细节，请告诉我。我知道二进制搜索的代码不能以当前的形式工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T17:35:04.900

尝试

```
 Song searchSong = new Song(artistInput, artistInput, artistInput);
 int search = Arrays.binarySearch(songs, searchSong, new Comparator<Song>(){
    @Override
    public int compare(Song s1, Song s2) {
      return s1.getArtist().compareTo(s2.getArtist());
    }
 }); 
```

Java 8 的更新：

```
 int search = Arrays.binarySearch(songs, searchSong, 
   (Song s1, Song s2) -> s1.getArtist().compareTo(s2.getArtist())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:30:09.743

您的班级名称是否实现了 Comparator `compare`？

如果您有这样的比较器类：-

```
public class MyComparator implements Comparator<Song> {
     /** Your compare method ***/
} 
```

您的调用`Arrays.binarySearch()`应`new MyComparator()`作为参数..

# php - PHP Mysqli 语句返回单行，-1 行受影响，并且没有错误

> ID：12569862
> 
> 赞同：4
> 
> 时间：2012-09-24T17:22:59.260
> 
> 标签：php, mysqli

这太令人费解了，我一定错过了一些简单的东西。我有一个查询来检查我插入的事务是否已经存在，以防止重复。这是代码：

```
function isaDupe($portableDB, $transactArray)
{
    $ref = $transactArray["reference"];
    $date = $transactArray["qdate"];
    $time =  $transactArray["time"];

  //prints the query so I can run by hand to test
    print "SELECT `counter` FROM transactions WHERE (`reference` = '$ref' AND `qdate` = '$date' AND `time` = '$time') ";

    if ($dupeSelectStmt = $portableDB->prepare("SELECT `counter` FROM transactions WHERE (`reference` = ? AND `qdate` = ? AND `time` = ?)"))
    {
        $dupeSelectStmt->bind_param('sss',$ref, $date, $time);
        $dupeSelectStmt->bind_result($counter);
        $dupeSelectStmt->execute();

        while ($dupeSelectStmt->fetch())
        {
            break;
        }

        $numRows = $portableDB->affected_rows;

        if ($numRows > 0)
            return TRUE;
        else if ($numRows == -1)
        {
            print " ERROR: ";
            print_r($portableDB->error);
            print_r($dupeSelectStmt->error);
            return FALSE;
        }
        else
            return FALSE;
    }
} 
```

- 如果我在同一台服务器上通过 Workbench 手动运行查询，我会返回 24 行。

-- 如果我手动准备、设置和执行语句，这也是一样的。

-affected_rows 返回 -1

--如果我对语句执行 num_rows 也是一样

-Statement 或 MySQLi 对象上没有存储错误。

- 如果我在 fetch() 语句中打印，它会打印一行的数据

- 如果我将获取的行存储到一个数组中并计算结果，它是 1

- 我试过分别用每个变量运行它，同样的事情。

- 同一台服务器上的其他查询（哎呀，在同一个 MySQLi 对象上）工作正常。选择、更新和插入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:59:40.370

答案是我忘记在 mysqlistmt::execute() 之后调用 mysqlistmt::store_result。

一旦我添加了 $dupSelectStmt->store_result(); 我能够调用 $dupSelectStmt->num_rows 和 $portableDB->affected_rows 并且它们都显示了我知道我应该看到的 24。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:34:17.433

您需要使用`$dupeSelectStmt->num_rows()`来获取 SELECT 的结果集中的行数。您需要调用`affected_rows`（对于 INSERT、DELETE、UPDATE）或不在数据库句柄 ( )`num_rows()`上的对象，就像您当前正在做的那样。`mysqli_stmt``$portableDB`

# sip - 如何使用 sip 或 voip 隔离来电者音频？

> ID：12569863
> 
> 赞同：1
> 
> 时间：2012-09-24T17:23:06.073
> 
> 标签：sip, voip, asterisk, twilio, freeswitch

我有一个想实施的方案，但不知道从哪里开始。

我想让 3 位参与者通话：A、B 和 C。

A 和 C 应该能够互相交谈和听到对方的声音。

B 应该能听到 A，但不能听到 C。B 不需要和任何人说话

有没有一种方法可以让我使用 SIP 服务器、freeswitch、星号或在线服务（如 twilio/tropo）来实现这一点？

在电话中是否有这样一种场景的名称，您可以隔离一个或多个呼叫者的声音？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:39:42.750

在 FreeSWITCH 中，[窃听](http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_eavesdrop)适用于整个对话。但由于它是一个开源工具，您可能可以根据需要修改源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:14:47.060

[您可以使用呼叫控制 XML (CCXML)](http://www.w3.org/TR/ccxml/)开发会议应用程序。当您将呼叫者带入会议时，您使用“[加入”元素](http://www.w3.org/TR/ccxml/#Join)。当您“加入”呼叫者时，您可以在“双工”标签中指定它是完整的还是一半。如果是一半，则呼叫者只能听到正在发生的事情而不能说话。

[Voxeo's Prophecy](https://evolution.voxeo.com/)是免费试用此功能的绝佳平台。他们有一个出色的 CCXML 实现（他们的 CTO 是这个 W3C 标准的主编），你可以免费试用这个托管平台。您只需在投入生产时付费。它支持 SIP、Skype 和普通电话线路。您甚至可以使用他们的[Phono 插件](http://phono.com/)在网络浏览器中创建电话，用户可以使用它来加入会议。他们还有一个本地解决方案，易于安装在笔记本电脑或服务器上，并且免费为您提供两个端口。额外的端口价格合理。[在他们的文档](http://docs.voxeo.com/ccxml/1.0-final/)中有很多关于开发 CCXML 会议应用程序的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T06:55:00.733

它被称为呼叫插入，用于监控呼叫中心代理。

您可以使用星号 ChanSpy 命令执行此操作：
[http ://www.voip-info.org/wiki/view/Asterisk+cmd+ChanSpy](http://www.voip-info.org/wiki/view/Asterisk+cmd+ChanSpy)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T11:13:21.383

试试ivrworx，

你可以先创建freeswitch会议。

Thean 制作将召集会议的脚本，但 C 将发送带有 rcvonly 属性的 SDP

# objective-c - 使用新的 Facebook api 邀请朋友

> ID：12569864
> 
> 赞同：2
> 
> 时间：2012-09-24T17:23:13.533
> 
> 标签：objective-c, ios, facebook, showdialog

我刚刚更新了 Facebook 框架，邀请朋友的旧代码不起作用（现在没有 Facebook 类对象。）。我使用了以下代码：

```
 NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
     @"1", @"frictionless",
     @"My message", @"message",
     @"Notification", @"notification_text",nil];
     [self.facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

是否可以在最新框架上显示相同的对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T06:05:18.723

是的。示例 iOS 游戏 Friend Smash (https://github.com/fbsamples/ios-friend-smash) 使用了这种技术。等效代码在这里：

[https://github.com/fbsamples/ios-friend-smash/blob/master/friendsmash/friendSmasher/Game/GameController_FacebookIntegration.cpp#L365](https://github.com/fbsamples/ios-friend-smash/blob/master/friendsmash/friendSmasher/Game/GameController_FacebookIntegration.cpp#L365)

# xml - XSL 仅转换特定命名空间中的元素

> ID：12569871
> 
> 赞同：0
> 
> 时间：2012-09-24T17:23:35.217
> 
> 标签：xml, xslt, xml-namespaces, xalan

我有一个结构有点像这样的 xml 文档：-

```
<catalog xmlns="format_old" xmlns:final="format_new">
  <final:book>
    <final:title>blah</final:title>
    <final:author>more blah</final:author>
  </final:book>
  <book>
    <description title="blah2"/>
    <writer name="more blah2"/>
  </book>
</catalog> 
```

显然，这是问题的简化版本。我想要做的是将它转换成类似的东西： -

```
<catalog xmlns="format_new">
  <book>
    <title>blah</title>
    <author>more blah</author>
  </book>
  <book>
    <title>blah2</title>
    <author>more blah2</author>
  </book>
</catalog> 
```

我现在拥有的样式表是这样的：-

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:orig="format_old"
  xmlns="format_new"/>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="//orig:book">
  <xsl:element name="title">
    <xsl:value-of select="./orig:description/@title" />
  </xsl:element>
  <xsl:element name="author">
    <xsl:value-of select="./orig:writer/@name" />
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

这给了我这样的输出：-

```
<catalog xmlns="format_old">
  <book xmlns="format_new">
    <title>blah</title>
    <author>more blah</author>
  </book>
  <book xmlns:orig="format_old" xmlns="format_new">
    <title>blah2</title>
    </author>more blah2</author>
  </book>
</catalog> 
```

这个样式表有两个问题：-

1.）（主要问题）根元素被复制而不是更改根元素的默认命名空间。所以基本上目录元素仍然在命名空间 format_old 中。

2.）（小问题）这会将元素转换为：-

```
<book xmlns:orig="format_old" xmlns="format_new">
  ...
</book> 
```

而不是从根元素中获取命名空间，因为它保持不变

```
<book>
  ...
</book> 
```

我在这里想念什么？我正在使用 Xalan-C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:47:04.587

我认为以下应该做：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns="format_new"
    xmlns:ns1="format_old"
    exclude-result-prefixes="ns1"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@* | text() | comment() | processing-instruction()">
  <xsl:copy/>
</xsl:template>

<xsl:template match="*">
  <xsl:element name="{local-name()}">
    <xsl:apply-templates select="@* | node()"/>
  </xsl:element>
</xsl:template>

<xsl:template match="ns1:book/ns1:description[@title]">
  <title>
    <xsl:value-of select="@title"/>
  </title>
</xsl:template>

<xsl:template match="ns1:book/ns1:writer[@name]">
  <author>
    <xsl:value-of select="@name"/>
  </author>
</xsl:template>

</xsl:stylesheet> 
```

Saxon 6.5.5 将您的输入转换为

```
<?xml version="1.0" encoding="utf-8"?><catalog xmlns="format_new">
  <book>
    <title>blah</title>
    <author>more blah</author>
  </book>
  <book>
    <title>blah2</title>
    <author>more blah2</author>
  </book>
</catalog> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:57:26.713

你很近。您的默认模板正在挑选您没有其他模板的所有内容。

您的第一个问题是他们正在拾取 orig:catalog 元素并将其写出原样，结果证明这不是您想要的。简单的修复：为它添加一个模板。

您的第二个问题是管理输出中的命名空间声明。在这里，几种技术可能会有所帮助：

*   仔细阅读规范或您最喜欢的 XSLT 参考中的 xsl:exclude-result-prefixes 文档；用它来告诉你的处理器你不需要为旧的命名空间声明命名空间。

*   如果您想利用文字结果元素的输出总是带有样式表中 LRE 上的所有范围内命名空间前缀这一事实，请使用 xsl:element 构造函数而不是文字结果元素。有关更多详细信息，请参阅[此 SO question](https://stackoverflow.com/questions/12568962/what-is-the-difference-between-using-xslt-xslelement-and-declaring-elements-l)。

*   在 SAX 或您最喜欢的编辑器中编写一个简单的过滤器，让您自己完全控制命名空间的声明位置以及声明方式。（XSLT 的设计认为您应该非常担心名称空间声明，因此很难很好地控制它们。）

*   训练自己不要太在意你的输出是否有一些无关的命名空间声明，并编写你的下游消费者做正确的事情，只要一切都正确绑定，这样他们就不会被无关的命名空间声明所困扰。

不同的人使用这些不同的技术取得不同程度的成功；我自己，我发现最后一个特别有效，我只担心其他的当它坏了我。

# ruby-on-rails - 选择具有多个标签的帖子

> ID：12569873
> 
> 赞同：2
> 
> 时间：2012-09-24T17:23:44.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在博客应用程序上实现标记系统。这个应用程序有帖子，帖子通过标签有很多标签。或多或少像 RailCasts #382 [http://railscasts.com/episodes/382-tagging](http://railscasts.com/episodes/382-tagging)

我将使用复选框来选择具有多个标签的帖子，如下所示：

```
Post.joins(:tags).where(:tags => { :id => [tag_ids] } ) 
```

但是，如果我想加入具有所有必需标签的帖子而不是只满足一个要求的帖子怎么办？

例如：

Post1 有标签“foo、bar、baz”

Post2 有标签 "bar, baz"

Post3 有标签“酒吧”

如果我搜索 ["bar", "baz"]，我的方法会返回帖子 1、2 和 3。如果我只想返回帖子 1 和 2，该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T01:22:20.653

在 SQL 中，你会做类似的事情

```
GROUP BY posts.id
HAVING count(tags.name) = 2 
```

在 Rails 中，它转换为

```
Post.joins(:tags).select('posts.id').where(:tags => { :id => [tag_ids] }
).having("count(tags.name) = ?", tag_ids.count).group('posts.id') 
```

上面的代码假定这`tag_ids`是一个 id 数组。此外，它只加载返回的 ActiveRecord Post 对象集的 id。

如果要加载更多字段，请将它们添加到`select`调用中，或者删除`select`调用以加载所有 Post 字段。请记住，对于在结果 SQL 查询中检索到的 Post 中的每个列/字段，您需要将该字段添加到`group`调用中。

# javascript - 创建动画序列循环jquery

> ID：12569879
> 
> 赞同：5
> 
> 时间：2012-09-24T17:24:01.907
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个连续的循环动画，其中一个 div img 淡入，然后下一个淡出最后一个，这就是我到目前为止所拥有的。

**JavaScript：**

```
function fadeLoop() {
    $(".circle img").each(function(index) {
        $(this).delay(1000*index).fadeIn(500);
    });
};

$('.circle').delay(2000).fadeIn(2000,function() {        
    fadeLoop();
}); 
```

**HTML：**

```
<div class="circle" id="first-circle">
    <img src="test.jpg"/>
    <a href="">ART</a>
</div>
<div class="circle" id="second-circle">
    <img src="test.jpg"/>
    <a href="">FASHION</a>
</div>
<div class="circle" id="third-circle">
    <img src="test.jpg"/>
    <a href="">DECOR</a>
</div> 
```

**CSS：**

```
.circle { border-radius:300px; width:300px; border:5px solid #ccc; height:300px;margin:10px; padding:0px; float:left; display:none; position:relative; }
.circle a { position:relative; z-index:999; margin:0 auto; line-height:300px; display:block; width:300px; text-align:center; font-family: sans-serif; font-weight:normal; text-transform:capitalize; color:#fff; font-size:60px; text-decoration:none; }
#first-circle img, #second-circle img, #third-circle img { display:none; }
#first-circle { background:#803131; }
#second-circle { background:#751c20; }
#third-circle { background:#803131; }
#first-circle img { border-radius:300px; width:300px; height:300px; position:absolute; top:0px; left:0px;}
#second-circle img { border-radius:300px; width:300px; height:300px; position:absolute; top:0px; left:0px;}
#third-circle img { border-radius:300px; width:300px; height:300px; position:absolute; top:0px; left:0px;} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/9h9x3/)**

我敢肯定这不会那么遥远，我需要做的就是淡出最后一个，在下一个中我有一个序列，但需要扩展它并使其循环。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:54:51.113

这可能会帮助你

```
$(function(){
    (function(){
        var circles=$('.circle'), i=0;
        function shuffle()
        {
            $(circles[i]).fadeIn(2000, function(){
                i=(i < circles.length-1) ? (i+1) : 0;
                setTimeout(function(){
                    $('.circle').fadeOut(2000);
                    shuffle();
                }, 2000);
            });
        }
        shuffle();
    })();
});​ 
```

[**演示**](http://jsfiddle.net/VStJ5/)。

# java - 在 Java 中播放音频文件的一部分

> ID：12569880
> 
> 赞同：1
> 
> 时间：2012-09-24T17:24:02.603
> 
> 标签：java, audio

是否可以在 Java 中播放音频文件的一部分？我知道开始时间和结束时间，我想玩这两者之间的时间。搜索了一下，但没有得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:34:58.270

使用 Java 媒体框架 (JMF)。查看此链接以查看简单示例：[http ://www.dzone.com/snippets/java-example-very-simple](http://www.dzone.com/snippets/java-example-very-simple)

然后看看Player的API：http: [//docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Player.html](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/javax/media/Player.html)

它有方法`addController()`。可用的控制器之一是时钟：

[http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/j](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/media/jmf/2.1.1/apidocs/j) avax/media/Clock.html#setMediaTime(javax.media.Time)

它有`setMediaTime()`你`setStopTime()`需要的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:01:26.533

我喜欢[Java Sound 包](http://docs.oracle.com/javase/1.4.2/docs/guide/sound/)，因为它是 Java 发行版的一部分，而且我发现它比 JMF 更易于使用。[Java Sound 信息页面](https://stackoverflow.com/tags/javasound/info)提供了一个很好的示例，可以帮助您入门。

# python - 预期 gevent TypeError 缓冲区对象

> ID：12569885
> 
> 赞同：0
> 
> 时间：2012-09-24T17:24:17.157
> 
> 标签：python, django, web

这个问题的故事从这里开始：[Cannot make memory view because object does not have the buffer interface](https://stackoverflow.com/questions/12567938/cannot-make-memory-view-because-object-does-not-have-the-buffer-interface)

我正在使用 Django 1.3.1 和 Python 2.7。现在新错误说：`TypeError: buffer object expected`，它指向 gevent/socket.py

其他库中是否有任何错误？这是 Django 给我的回溯：

```
Environment:

Request Method: GET
Request URL: http://dev.muccacompany.com/promo-racao/?code=<my code>

Django Version: 1.3.1
Python Version: 2.7.1
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.admin',
 'south',
 'mucca_apps.social',
 'djcelery',
 'mailing',
 'muitter',
 'customer',
 'finance',
 'blogs',
 'web',
 'social',
 'gunicorn',
 'so_desconto',
 'djcelery',
 'partner',
 'tracking']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'tracking.middleware.TrackingMiddleware')

Traceback:
File "/usr/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/mucca/git/deploy/muccadev/app/views.py" in home
  24\.         return participar(request, code)
File "/home/mucca/git/deploy/muccadev/app/views.py" in participar
  33\.         fb_profile = get_or_create_fbprofile(request, redirect_url)
File "/home/mucca/git/deploy/muccadev/app/helpers.py" in get_or_create_fbprofile
  16\.     token = fb_auth.app_auth(request)
File "/home/mucca/git/deploy/muccadev/mucca_apps/social/helpers.py" in app_auth
  52\.             response = urllib2.urlopen(req)
File "/usr/lib/python2.7/urllib2.py" in urlopen
  126\.     return _opener.open(url, data, timeout)
File "/usr/lib/python2.7/urllib2.py" in open
  392\.         response = self._open(req, data)
File "/usr/lib/python2.7/urllib2.py" in _open
  410\.                                   '_open', req)
File "/usr/lib/python2.7/urllib2.py" in _call_chain
  370\.             result = func(*args)
File "/usr/lib/python2.7/site-packages/poster/streaminghttp.py" in https_open
  170\.             return self.do_open(StreamingHTTPSConnection, req)
File "/usr/lib/python2.7/urllib2.py" in do_open
  1155\.             h.request(req.get_method(), req.get_selector(), req.data, headers)
File "/usr/lib/python2.7/httplib.py" in request
  941\.         self._send_request(method, url, body, headers)
File "/usr/lib/python2.7/httplib.py" in _send_request
  975\.         self.endheaders(body)
File "/usr/lib/python2.7/httplib.py" in endheaders
  937\.         self._send_output(message_body)
File "/usr/lib/python2.7/httplib.py" in _send_output
  801\.             self.send(message_body)
File "/usr/lib/python2.7/site-packages/poster/streaminghttp.py" in send
  81\.                 self.sock.sendall(value)
File "/usr/lib/python2.7/site-packages/gevent/socket.py" in sendall
  515\.                 data_sent += self.send(_get_memory(data, data_sent), flags, timeout=timeleft)
File "/usr/lib/python2.7/site-packages/gevent/socket.py" in _get_memory
  263\.             return buffer(string, offset)

Exception Type: TypeError at /promo-racao/
Exception Value: buffer object expected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T12:00:18.833

无法准确找到问题，但我使用 python 请求而不是 urllib2 并且问题消失了。

我认为它解决了。

# html - 如何使具有可变宽度的元素始终突出特定宽度？

> ID：12569886
> 
> 赞同：0
> 
> 时间：2012-09-24T17:24:17.377
> 
> 标签：html, css

我有一个宽度可变的 div，具体取决于其内容。我想将它用于当用户单击它时从页面一侧滑入的菜单栏，因此它必须伸出。我希望它准确地伸出 16 像素（因为箭头图像具有那个大小），无论它实际上有多宽。如果不使用 JavaScript，我怎么能意识到这一点？

**编辑**：感谢您的回答！但我想到我可以像在那个网站上使用导航栏那样做 – 修改宽度而不是滑动它。见这里：[http ://dev.mezgrman.de/tagwall/](http://dev.mezgrman.de/tagwall/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:56:58.913

[http://jsfiddle.net/LruWn/](http://jsfiddle.net/LruWn/)

No matter how long the .box is, it will always overlap the .container only by exactly 16px:

### html:

```
<div class="container"><div class="box">text</div></div>​ 
```

### css:

```
.container {
    position: relative;
    outline: 1px solid red;
    width: 100px;
    height: 100px;
}
.box {
    width: 70px;
    position: absolute;
    left: 100%;
    margin-left: -16px;
    outline: 1px solid black;
}​ 
```

Add `overflow: hidden;` to `.container` to see how it might look like in action.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:45:15.893

最简单的方法是在折叠时向菜单项添加另一个类，并在那里设置另一个宽度和文本缩进（而不是在新类中再次编写所有 CSS）

```
.collapsed {
    width: 16px;
    text-indent: -9999px;
    background: url("/images/arrow_left.png") no-repeat scroll right center rgba(0, 0, 0, 0.85);
} 
```

现在，您在 javascript 中唯一需要做的就是根据用户的点击添加和删除该类。（你不会摆脱javascript。因为css不知道你什么时候点击一个元素）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:58:16.143

我现在通过修改元素的宽度解决了我的问题。傻我。

# backbone.js - Backbone 0.9.2 视图初始化未被调用

> ID：12569888
> 
> 赞同：1
> 
> 时间：2012-09-24T17:24:36.267
> 
> 标签：backbone.js, coffeescript

我是 Backbone.js 的新手。我在 v0.9.2 应用程序上使用 CoffeScript。该应用程序工作“正常”，但`initialize()`没有调用视图的方法。事件也没有被正确绑定。我试图弄清楚为什么不是这样。我正在使用其他（手动）方法将事件绑定到元素，但事实并非如此。

该应用程序是这样实例化的：

```
window.Site =
  Models: {}
  Collections: {}
  Views: {}
  Routers: {}
  init: -> 
    new Site.Routers.MyRouter()
    Backbone.history.start()

$(document).ready ->
  Site.init() 
```

路由器：

```
class Site.Routers.MyRouter extends Backbone.Router
    routes:
        '': 'index'

    initialize: ->
        # some code here (this IS being called)

    index: =>
        # this is also being called since I am trying mysite.com/
        view = new Site.Views.MyView()
        $('#someId').html(view.render().el) 
```

风景：

```
class Site.Views.MyView extends Backbone.View

    template: JST['views/index']

    events:
        'click .someElement': 'someMethod'

    inititalize: ->
        console.log "hello" # NOT CALLED
        _.bindAll @
        @

    render: =>
        # draw stuff (this works)
        @ 
```

视图绘制得很好。为什么`initialize`不被调用？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T17:48:28.780

你必须拼写`initialize`正确=p

```
inititalize: -> # should be `initialize: ->`
  console.log "hello" # NOT CALLED 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T11:43:05.610

对于未来的读者，还要检查你没有两个初始化函数。

```
Backbone.View.extend({
  initialize: function () {
    // not called 
  },

  // stuff

  initialize: function () {
    // overwrites previous
  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:37:23.207

我不写 CoffeeScript，但我看到你的视图实例的唯一地方是在路由器中：

```
index: =>
     view = new Site.Views.MyView() 
```

我怀疑路由器的索引没有被调用，因此你的视图的初始化没有被调用。扩展视图不会创建视图的实例，而是创建视图的自定义定义。

HTH。

# c# - 如何在 ASP .NET 中的 Web 表单上的控件中实现 CSS 类？

> ID：12569892
> 
> 赞同：0
> 
> 时间：2012-09-24T17:24:46.840
> 
> 标签：c#, asp.net, css

我的项目中有一个名为 StyleSheet.css 的文件。

在这里，我的 Web 表单上的每个元素都有类。

例如：

```
.selectEnvironment
{
    background-color: #FF0000;
} 
```

然后我转到我的 Web 表单（下拉列表）上的控件，并向其中添加 CSS 类：

```
 <div>
    <asp:DropDownList ID="ddlEnvironment" runat="server" AutoPostBack="True" 
    OnSelectedIndexChanged="ddlEnvironment_SelectedIndexChanged" CssClass="selectEnvironment">
            <asp:ListItem>Select Environment</asp:ListItem>
            <asp:ListItem>Development</asp:ListItem>
            <asp:ListItem>Staging</asp:ListItem>
            <asp:ListItem>Production</asp:ListItem>
        </asp:DropDownList>
    </div> 
```

这是行不通的。它的背景颜色不会变为红色。

我究竟做错了什么？我对前端 Web 开发完全陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:27:09.493

你必须注册你的风格

```
 <head runat="server">

      <style type="text/css">
      ...
      </style>
    </head> 
```

你也可以使用这条线

```
<link href="MyStyles.css" rel="stylesheet" type="text/css" /> 
```

你也可以在你的代码后面注册

```
protected override void OnInit( EventArgs e )
{
    this.Header.InnerHtml += "<link type=\"text/css\" rel=\"Stylesheet\" href=\"styleSheet.css\" />";
    base.OnInit(e);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:37:58.537

1.  将您的样式添加到 MASTER PAGE 的头部。或链接CSS。

2.  然后将 CSSCLASS 添加到下拉菜单中。

3.  跑，看看魔术。它会起作用的。

检查下面。![在此处输入图像描述](../Images/405fd390032496c9333e1e694f44f60d.png)

让我知道这是否有帮助。

问候，

普拉迪

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:31:54.557

将样式表从解决方案资源管理器拖到设计视图中的页面或母版页标题中。这是确保样式表**路径**正确的最简单方法；-)

# css - Firefox 与导航栏的样式差异

> ID：12569898
> 
> 赞同：0
> 
> 时间：2012-09-24T17:25:21.653
> 
> 标签：css, cross-browser

我在 Chrome/Safari 和 Firefox 之间遇到了 CSS 样式问题。在 Chrome 和 Safari 中，隐藏的下拉菜单位置正确，但在 Firefox 中，子导航菜单偏离了几个像素。在使用两种浏览器的检查工具调查问题后，似乎 Firefox 使 #main_nav_bar ul 比 Chrome 宽 10px。我遇到的问题是我不确定如何在不弄乱导航栏外观的情况下进行更改。

链接是[http://www.tamidgroup.org](http://www.tamidgroup.org)。

非常感谢任何有关修复的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:54:34.760

一定要`doctype`在里面加一个。您还可以使用媒体查询定位这些浏览器。

chrome 和 safari 的示例

```
@media screen and (-webkit-min-device-pixel-ratio:0){
   //add your browser specific code here
} 
```

这样，您就可以针对从一个浏览器到另一个浏览器看到的特定问题。

# c# - Web Service(asmx) 错误 - 底层连接已关闭：接收时发生意外错误

> ID：12569906
> 
> 赞同：0
> 
> 时间：2012-09-24T17:26:20.687
> 
> 标签：c#, web-services

我在尝试发送/接收大型请求/响应时遇到 Web 服务 (asmx) 问题...我不断收到错误消息“底层连接已关闭：接收时发生意外错误”

```
HttpWebRequest request = HttpWebRequest.Create("https://test.smth.cin:443/ws/1.0") as HttpWebRequest;
request.KeepAlive = true;
request.Method = "POST";
request.ContentType = "text/xml; charset=utf-8";
request.ClientCertificates.Add(Cert);
request.Headers.Add("SOAPAction", @"https://test.smth.cin:443/ws/1.0" + p_SOAPAction);
request.Timeout = 2200000;
StreamWriter requestWriter = new StreamWriter(request.GetRequestStream(),System.Text.Encoding.UTF8);
requestWriter.Write(str_SOAP);
requestWriter.Flush();
requestWriter.Close(); 

   HttpWebResponse response = request.GetResponse() as HttpWebResponse;
    Stream responsedata = response.GetResponseStream();
    StreamReader responsereader = new StreamReader(responsedata);

    WS_Response ws_r = new WS_Response();
    XmlDocument WS_XML_Response = new XmlDocument();

    byte[] encodedString = Encoding.UTF8.GetBytes(str_SOAP);

    // Put the byte array into a stream and rewind it to the beginning
    MemoryStream ms = new MemoryStream(encodedString);
    ms.Flush();
    ms.Position = 0;
    WS_XML_Response.Load(ms); 
```

我也在`<httpRuntime maxRequestLength="200000" executionTimeout="360000" />`webconfig 中进行了设置，但仍然出现错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:12:04.320

当我过去看到这个错误时，这是​​一个问题，响应 XML 无效并且连接由于在处理无效 XML 期间发生的异常而关闭。我会尝试保存原始 XML 请求数据，然后根据您的 Web 服务的架构验证 XML 数据。您可能会发现响应 XML 中有一些无效的内容导致连接被强制关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:32:16.367

请更改您的 maxRequestLenght=Int32.MaxValue();

这将是某处= 2,147,481,263

# php - 无法使用 PHP 将大型数组传递给 mySQL 数据库

> ID：12569909
> 
> 赞同：2
> 
> 时间：2012-09-24T17:26:28.433
> 
> 标签：php, mysql

我目前有一个相对较大的 HTML 表单（100 多个字段）。当使用点击提交时，我想从该表单中获取数据并将其上传到 mySQL 数据库。我已经创建了下面的PHP代码，并且一直在慢慢添加字段并测试以查看连接是否成功。一切都通过 $skilled_nursing 工作，但是当我添加下一组值时，我不再成功地创建数据库条目。显示了我的所有回显命令，并且我的错误日志中没有失败，但是数据库中没有接收到数据。

谁能看到出了什么问题？我多次检查拼写错误，但我没有看到任何错误。我想知道我是否以某种方式超时连接，或者我是否试图将太多值粘贴到执行命令中。

```
<?php

echo 'started ok';
// configuration
$dbtype     = "mysql";
$dbhost     = "localhost";
$dbname     = "dbname";
$dbuser     = "dbuser";
$dbpass     = "userpass";
echo 'variables assigned ok';
// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
echo 'connection established';
// new data
$facility_name = $_POST['facility_name'];
$facility_street = $_POST['facility_street'];
$facility_county = $_POST['facility_county'];
$facility_city = $_POST['facility_city'];
$facility_state = $_POST['facility_state'];
$facility_zipcode = $_POST['facility_zipcode'];
$facility_phone = $_POST['facility_phone'];
$facility_fax = $_POST['facility_fax'];
$facility_licensetype = $_POST['facility_licensetype'];
$facility_licensenumber = $_POST['facility_licensenumber'];
$facility_email = $_POST['facility_email'];
$facility_administrator = $_POST['facility_administrator'];
$skilled_nursing = $_POST['skilled_nursing'];
$independent_living = $_POST['independent_living'];
$assisted_living = $_POST['assisted_living'];
$memory_care = $_POST['memory_care'];
$facility_type_other = $_POST['facility_type_other'];
$care_ratio = $_POST['care_ratio'];
$nurse_ratio = $_POST['nurse_ratio'];

// query
$sql = "INSERT INTO Facilities (facility_name, facility_street, facility_county, facility_city, facility_state, facility_zipcode, facility_phone, facility_fax, facility_licensetype, facility_licensenumber, facility_email, facility_administrator, skilled_nursing, independent_living, assisted_living, memory_care, facility_type_other, care_ratio, nurse_ratio) VALUES (:facility_name, :facility_street, :facility_county, :facility_city, :facility_state, :facility_zipcode, :facility_phone, :facility_fax, :facility_licensetype, :facility_licensenumber, :facility_email, :facility_administrator, :skilled_nursing, :independent_living, :assisted_living, :memory_care, :facility_type_other, :care_ratio, :nurse_ratio)";
$q = $conn->prepare($sql);
$q->execute(array(':facility_state'=>$facility_name,
':facility_street'=>$facility_street,
':facility_county'=>$facility_county,
':facility_city'=>$facility_city,
':facility_state'=>$facility_state,
':facility_name'=>$facility_name,
':facility_zipcode'=>$facility_zipcode,
':facility_phone'=>$facility_phone,
':facility_fax'=>$facility_fax,
':facility_licensetype'=>$facility_licensetype,
':facility_licensenumber'=>$facility_licensenumber,
':facility_email'=>$facility_email,
':facility_administrator'=>$facility_administrator,
':skilled_nursing'=>$skilled_nursing,
':independent_living'=>$independent_living,
':assisted_living'=>$assisted_living,
':memory_care'=>$memory_care,
':facility_type_other'=>$facility_type_other,
':care_ratio'=>$care_ratio,
':nurse_ratio'=>$nurse_ratio));

echo 'query parsed';

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:52:38.013

这并不能完全回答您的代码出了什么问题，但它可能有助于解决它。

我会做一些不同的事情。你说你有很多领域。您的代码可能会变得非常冗长且重复。由于看起来您的表单字段名称已经与您的表格列对应，我会做更多这样的事情（未经测试）：

```
// get a list of column names that exist in the table
$sql = "SELECT column_name FROM information_schema.columns WHERE table_name = 'Facilities'";
$q = $conn->prepare($sql);
$q->execute();
$columns = $q->fetchAll(PDO::FETCH_COLUMN, 0);

$cols = array();
foreach ($_POST as $key=>$value)
{
    // if a field is passed in that doesn't exist in the table, remove it
    if (!in_array($key, $columns)) {
        unset($_POST[$key]);
    }
}

$cols = array_keys($_POST);
$sql = "INSERT INTO Facilities(". implode(", ", $cols) .") VALUES (:". implode(", :", $cols) .")";
$q = $conn->prepare($sql);
array_walk($_POST, "addColons");
$q->execute($_POST);

function addColons($value, &$key)
{
    $key = ":{$key}";
} 
```

这样，您可以拥有 10、100 或 1000 个字段，而此代码根本不需要更改。您还可以减少出现拼写错误的机会，因为只有一个地方指定了列名。您不必担心列名上的 SQL 注入，因为您在允许在查询中使用之前检查以确保该列存在。

当然，这确实假设通过的所有字段都`$_POST`与表中的列名相对应。如果不是这种情况，将那些不是列的特定字段值存储在单独的变量中并将`unset()`它们从`$_POST`数组中存储可能是最简单的。

# javascript - 在模块模式中创建“统一”变量

> ID：12569911
> 
> 赞同：0
> 
> 时间：2012-09-24T17:26:31.903
> 
> 标签：javascript, design-patterns, module

我对模块模式的概念很陌生。我设法实现了我的 HTML5 游戏的核心功能，但我想不出一种让某些变量可用于该游戏的每个功能的好方法。

这是一个简短的伪示例，应该更清楚：

```
var Game = {};

Game.player = (function() {

    //...

    return {
        update : update,
        draw : draw        
    };
});

Game.main = (function() {

    var player = new Game.player();

    // needed by player
    var gravity = 1.0,
        loop,
        canvas,
        ctx,
        key_inputs;

    //...

    return {
        init : init,
        pause : pause,
        play : play        
    };
});

var game = new Game.main();
game.init();
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:34:07.827

您可以在`Game.main`. 您应该将 的实例传递`Game.main`给`Game.player`构造函数。然后`Game.player`可以在其实例上使用 getter/setter 方法`Game.main`来访问这些变量。

确保你的架构是健全的，并且你只分享你需要分享的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:36:23.980

如果作用于你的`Player`函数的代码需要使用在你的`Game`函数中声明的一些变量，你有三个选择：

*   将它们移动到更高的范围（在这种情况下将是全局的，因此不推荐）
*   将它们作为参数传递给播放器（不是很好，因为`Player`如果它们更改，它们将不会被更新`Game`）
*   创建一个`getter`函数`Game`，将变量的当前状态返回给`Player`函数。

您还需要将 的实例传递`Game`给 ，`Player`以便它知道`Game`从哪个获取数据。

这是＃3的一个例子（我会尝试的那个）：

```
Game.main = (function() {
    var player = new Game.player(this);

    // needed by player
    var gravity = 1.0,
        loop,
        canvas,
        key_inputs;

    var getSettings = function () {
        return {
            gravity: gravity,
            loop: loop,
            canvas: canvas,
            key_inputs: key_inputs
        };
    };

    return {
        init : init,
        pause : pause,
        play : play,
        getSettings: getSettings        
    };
}); 
```

# plugins - 未找到自定义 Gradle 插件 ID

> ID：12569916
> 
> 赞同：34
> 
> 时间：2012-09-24T17:27:03.080
> 
> 标签：plugins, build, gradle

我正在编写一个 Gradle 插件，但无法让`apply plugin:`命令在使用该插件的 Gradle 脚本中工作。我正在使用 Gradle 1.1。

我已经用它构建了插件，`clean build`我现在正试图通过一个平面 repo 将它添加到 Gradle 构建中。这似乎有效，但 Gradle 没有发现有 ID 的插件`test-plugin`。插件中的项目名`settings.gradle`is`test-plugin`和属性文件中`META-INF/gradle-plugins`的也是`test-plugin.properties`. 我不确定在哪里可以指定插件 ID。

`build.gradle`项目中使用的文件`test-plugin`：

```
repositories {
  flatDir name: 'libs', dirs: "../build/libs"
}

dependencies {
  compile 'test:test-plugin:0.1'
}

apply plugin: 'test-plugin' 
```

来自 Gradle 的错误：

```
What went wrong:
A problem occurred evaluating root project 'tmp'.
Plugin with id 'test-plugin' not found. 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-24T17:33:36.017

插件 Jar 必须作为*构建脚本依赖*项添加：

```
buildscript {
    repositories { flatDir name: 'libs', dirs: "../build/libs" }
    dependencies { classpath 'test:test-plugin:0.1' }
}

apply plugin: "test-plugin" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-11-23T20:43:18.043

如果你想在你的构建脚本中实现一个插件，那么你有两个选择。

**选项1**
`apply plugin: YourCustomPluginClassName`

**选项 2**

```
plugins {
    id 'your.custom.plugin.id'
} 
```

`apply plugin:`在通过类名指定插件时使用（例如`apply plugin: JavaPlugin`）
`plugins { }`在通过 id 指定插件时使用（例如`plugins { id 'java' }`）
参见[教程点的 Gradle 插件以](https://www.tutorialspoint.com/gradle/gradle_plugins.htm)获取参考

如果您选择选项 1，您的自定义插件将需要通过 3 种方式中的一种方式引入您的构建脚本。

1.  您可以直接在 Gradle 构建脚本中对其进行编码。
2.  您可以将其放在**buildSrc**下（例如**buildSrc/src/main/groovy/MyCustomPlugin**）。
3.  您可以在`buildscript`方法中将自定义插件作为 jar 导入。有关该方法的信息，
    请参阅[Haki 先生的 Gradle Goodness 。](http://mrhaki.blogspot.com/2016/01/gradle-goodness-getting-information.html)`buildscript`

如果您选择选项 2，那么您需要创建一个插件 ID。创建以下文件**buildSrc/src/main/resources/META-INF/gradle-plugins/[desired.plugin.id].properties**。

复制并粘贴`implementation-class=package.namespace.YourCustomPluginClassName`到新创建的**.properties**文件中。替换`package.namespace.YourCustomPluginClassName`为所需插件类的完全限定类名。

有关更多信息，请参阅[Gradle 的自定义插件。](https://docs.gradle.org/current/userguide/custom_plugins.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-27T19:11:56.193

我也遇到了同样的问题，没有找到自定义插件 ID。就我而言，我只是忘记添加“src/main/resources/META-INF/gradle-plugins”属性文件。属性文件的名称必须与带有“.properties”扩展名的插件 ID 的名称相匹配。

该文件必须包含以下行：

```
implementation-class=(your fully qualified plugin classpath) 
```

这就是插件 id 如何解析为类名的完整机制。

此外，插件需要添加为上一个答案中指出的依赖项。android 文档声明您应该使用与您的唯一域名相关联的名称。即：'test-plugin' 这个名字并不是很好的形式，但是像 'com.foo.gradle.test-plugin' 这样的 id 会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-30T16:53:26.743

确保您的顶层`build.gradle`使用正确`classpath`的来引用构建**`*.jar`**文件的路径。

一些插件，比如[maven-publish](https://blog.codefx.org/tools/snapshots-gradle-maven-publish-plugin/)，会构建 jar 并将其保存到 中的特定位置`mavenLocal`，但路径可能看不清楚。

**您应该查看 jar 文件的文件路径，并确保它与您的. 匹配`classpath`，但映射不是很明显：**

```
buildscript {
  dependencies {
    // This *MUST* match the local file path of the jar file in mavenLocal, which is:
    // ~/.m2/repository/com/company/product/plugin/product-gradle-plugin/1.0/product-gradle-plugin-1.0.jar
    classpath 'com.company.product.plugin:product-gradle-plugin:1.0'
  }
} 
```

**注意不要使用错误的类路径，它可以引用一个*目录*而不是实际的 jar 文件；像这样：**

```
buildscript {
  dependencies {
    // This is wrong, because it refers to the mavenLocal FOLDER "product-gradle-plugin",
    // instead of the jar FILE "product-gradle-plugin-1.0.jar"
    // However, a gradle sync will still resolve it as a valid classpath!!
    classpath 'com.company.product:product-gradle-plugin:1.0'
  }
} 
```

更多信息：

*   [https://discuss.gradle.org/t/what-is-the-preferred-gradle-approach-to-locally-install-an-artifact-equivalent-to-mavens-install/5592](https://discuss.gradle.org/t/what-is-the-preferred-gradle-approach-to-locally-install-an-artifact-equivalent-to-mavens-install/5592)
*   [https://docs.gradle.org/current/userguide/publishing_maven.html](https://docs.gradle.org/current/userguide/publishing_maven.html)
*   [https://blog.codefx.org/tools/snapshots-gradle-maven-publish-plugin/](https://blog.codefx.org/tools/snapshots-gradle-maven-publish-plugin/)
*   [https://docs.gradle.org/current/userguide/custom_plugins.html#sec:custom_plugins_standalone_project](https://docs.gradle.org/current/userguide/custom_plugins.html#sec:custom_plugins_standalone_project)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-17T01:09:38.577

除了@Bonifacio2 写的内容之外，这是一条路径`META-INF/gradle-plugins`，并在 IntelliJ 中显示为`META-INF.gradle-plugins`. 不惜一切代价不要犯我直接将其创建为目录的愚蠢错误，`META-INF.gradle-plugins`因为您基于另一个示例，并且永远不会工作。另一个技巧是也从另一个 intelliJ 项目复制，因为这是添加的：`gradle-plugins`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-06T22:37:16.067

嗯，也许试试；

```
 configure <org.jsonschema2pojo.gradle.JsonSchemaExtension> {
     this.sourceFiles = files("${project.rootDir}/schemas")
    } 
```

# authentication - 登录失败：未知用户名或密码错误

> ID：12569922
> 
> 赞同：7
> 
> 时间：2012-09-24T17:27:24.780
> 
> 标签：authentication, tfs, error-handling, visual-studio-2012

我们正在运行 Visual Studio 2012 和 Team Foundation Server 2012。在 Team Explorer 窗口中，我能够成功连接到我们的 TFS 环境。但是，当我选择 Team Project 或 Team Project Collection 下的 Security 链接时，我会收到一条消息“Team Foundation Server：登录失败：未知用户名或密码错误”。

我没有在任何事件查看器文件中找到有助于调试此问题的日志文件或任何内容。

*   是否有一个我可以搜索的日志文件，其中包含一些关于连接问题的“提示”？
*   您的凭据存储在用于连接团队基础的区域机器上的什么位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T19:00:39.430

我们意识到此问题的根本原因是 Visual Studio 试图使用用于连接到 TFS 的相同凭据打开浏览器。如果不允许这些凭据在您的计算机上运行进程（我怀疑在您的情况下它是客户端域不信任的不同域上的域用户），那么打开浏览器将失败。这就解释了为什么您可以使用使用您自己的凭据打开的浏览器实例来访问这些 URL。这将在 Visual Studio 的未来版本中得到修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:51:04.330

我也有同样的问题。要更正它（临时），您必须使用以下命令运行 VS 2012：

```
C:\Windows\System32\runas.exe /netonly /user:{domain\loginname} "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe" 
```

通过您的 tfs 域帐户的域和登录名更改 {domain\loginname}。控制台将询问您的密码，一切正常！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T05:42:22.573

在 TFS 2012 中，权限和项目设置的管理界面已在很大程度上转移到**Team Web Access**。

单击 Team Explorer 2012 中的任何以下设置将产生“登录失败：未知用户名或密码错误”错误：

•团队项目集合>安全

•团队项目集合 > 组成员

•团队项目>安全

•团队项目>团体成员

•团队项目 > 工作项目领域

•团队项目>工作项迭代

•团队项目>项目警报

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-07T08:15:47.917

我在 TFS 上也遇到了同样的问题。我找到了解决方案。您必须在您的 PC 或远程服务器中重新映射您的工作区。如果您的项目中有任何未提交的更改，您必须保留备份，否则您将丢失更改。

脚步 -

*   转到 Visual Studio 中的工作区

    文件-> 源代码管理-> 高级-> 工作区

*   删除当前工作区。

*   再次重新映射项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T01:58:06.093

我在使用 TFS Express 2012 时遇到了同样的问题。我不知道我的情况是否适用于您，但事实如下：

*   我的 TFS 实例在远程服务器上运行。
*   该服务器或我的本地计算机都不在域中。
*   我在两台机器上使用相同的用户帐户名，但密码不同。
*   将密码设置为相同可以解决问题。

不起作用的功能是启动项目网站的功能，无论如何我都可以直接导航到该网站。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-11T09:47:08.370

通过将驱动器映射到 TFS 似乎有缓存所在的区域，我自己设法解决了这个问题 - 但后来我有 2 个独立的工作区跨越 2 个独立的域

# playorm - playOrm 基本设置 + playOrm 成熟度

> ID：12569925
> 
> 赞同：2
> 
> 时间：2012-09-24T17:27:29.460
> 
> 标签：playorm

1.  我想做一个 POC，我想要一个使用 playOrm 的基本示例。如何使用 eclipse 创建基本项目以及如何配置与 Cassandra 的连接？

2.  playOrm 今天有多成熟？您是否建议将其用于生产，知道我将在三个月后进入生产的基本设置？

# php - 带验证的图片上传器

> ID：12569928
> 
> 赞同：0
> 
> 时间：2012-09-24T17:27:43.970
> 
> 标签：php, image, validation, upload

我想使用 PHP 上传图像，并进行适当的验证，例如检查宽度并在文件名中用 - 或 _ 替换空格。

这是我的代码：

```
function ubimg($fileName, $fileType, $fileTmpName, $pathToSaveIn) {
    $flagUpload  = false;
    $rndFileName = "";
    $rndNum      = rand(10000000, 9899999999);
    if (($fileType == "image/gif") || ($fileType == "image/jpeg") || ($fileType == "image/png") && imagesx < 600) {
        $nameFile         = $rndNum . "_" . $fileName;
        $cfile            = preg_replace('/\s\s+/', "_", $nameFile);
        $_SESSION['bimg'] = $cfile;
        if (!file_exists($pathToSaveIn . "/" . $nameFile)) {
            move_uploaded_file($fileTmpName, $pathToSaveIn . "/" . $nameFile);
            $flagUpload = true;
        }
    }
    else {
        msgbox("error", $php_errormsg);
    }
    return $flagUpload; //may be return true or false
} 
```

我用过`preg_replace`，但它不能从文件名中删除空格？？？？任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:30:12.890

您可以使用它来删除字符串中的额外空格

```
$str= preg_replace( '/\s+/', ' ', $str); 
```

或者

```
$str = str_replace(' ','',$str); 
```

# properties - 获取VB元素的属性

> ID：12569931
> 
> 赞同：5
> 
> 时间：2012-09-24T17:27:56.057
> 
> 标签：properties, vbscript, element

如何查看元素在 VB 脚本中的属性？例子：

```
Dim list : Set list = CreateObject( "Scripting.Dictionary" )
' ... Fill List ...
WriteListElements list
...

Sub WriteListElements ( list )
    Dim e, le
    For Each e In list
        Set le = list(e)                  ' what properties does le have?
        le.name_of_user_defined_attribut  ' I want to access a property but dont know the exact name
    Next
End Sub 
```

我使用带有 VBScript API 的工具。在该 API 中，我可以从该工具中读取（用户定义的）属性。但是在运行脚本时，我收到一个错误，告诉我它不知道该用户定义的属性的名称。但我在工具中使用它。现在我想知道上面的数组中有哪些属性可用，以查看用户定义的属性是否被具体命名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T02:20:18.273

真的不可能。VBScript 运行时中只有非常基本的类型信息可用。理想情况下，您可以创建一个适配器，将您的工具对象转换为标准 Dictionary 对象并迭代 Keys。如果这不可能，您能做的最好的事情是在调用其成员之前检查每个对象的类型名称。例子：

```
<html>
<body>

<script type="text/vbscript">

    Class Human
        Private m_name

        Public Property Get Name
            Name = m_name
        End Property

        Public Property Let Name(newName)
            m_name = newName
        End Property
    End Class

    Dim joe 
    Set joe = new Human
    joe.Name = "Joe Coder"

    Dim list
    Set list = CreateObject( "Scripting.Dictionary" )
    list.Add "a", 5
    list.Add "b", joe
    list.Add "c", "apples"

    WriteListElements list

    Sub WriteListElements ( list )
        Dim e
        For Each e In list
            If (TypeName(list.Item(e)) = "Human") Then
                document.write("We have found a Human: " &_
                    "<b>" & list.Item(e).Name & "</b>")
            End If
        Next
    End Sub

</script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T09:21:59.947

```
Dim list : Set list = CreateObject( "Scripting.Dictionary" )
' ... Fill List ...
WriteListElements list
...

Sub WriteListElements ( list )
    Dim e, le     
    For Each e In list
        Set le = e.Items                
        Response.Write le(name_of_user_defined_attribut)
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:18:49.317

你能从这样的脚本中获取属性列表吗？

[http://www.vbsedit.com/scripts/misc/wmi/scr_1332.asp](http://www.vbsedit.com/scripts/misc/wmi/scr_1332.asp)

然后，您可以使用 eval() 或执行来获取这些属性的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T04:35:53.473

It is easy - use a pseudo reflection:

```
 class Developer

      Public reflection
     '=============================
     'Private properties
      private mId

      private  mFirstName
      private  mLastName

      private sub Class_Initialize()
        reflection = Array("Id","FirstName","LastName")
      end sub

      private sub Class_Terminate()
      end sub

     '=============================
     'public properties

       public property get Id()
          Id = mId
       end property

       public property let Id(val)
          mId = val
       end property

       public property get FirstName()
          FirstName = mFirstName
       end property  

       public property let FirstName(val)
          mFirstName = val
       end property  

       public property get LastName()
          LastName = mLastName
       end property  

       public property let LastName(val)
          mLastName = val
       end property  

    end class

    For each property in obj.reflection 
     document.write(property)
     document.write( Eval ("obj." & property) )
    Next 
```

# xml - xpath 读取根元素

> ID：12569933
> 
> 赞同：1
> 
> 时间：2012-09-24T17:28:09.517
> 
> 标签：xml, xpath

我想读取我的 xml 文件中的根元素。当我从 XPath 读取它时 `"beans/bean/......"`，它工作正常。XML 输入文件开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- The file defines all the configurations of the SemanticServer -->
<beans>
  <bean class="org.spr 
```

但是当我用作根元素时

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans    
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"> 
```

而不是`<beans>`它不起作用。

当根元素为空`<beans>`而不是 `<beans xmlns="http`......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:18:19.257

`/beans`在 XPath 1.0 中，*总是*意味着一个名为“beans”的元素，它没有与任何命名空间显式关联。如果是

```
<beans xmlns="http://www.springframework.org/schema/beans"> 
```

该元素位于`http://www.springframework.org/schema/beans`命名空间中，因此您需要将该命名空间 URI 映射到前缀，然后在路径表达式中使用该前缀。您如何进行前缀映射取决于您用于解释 xpath 的工具。例如，在 XSLT 中，`xmlns:b="http://www.springframework.org/schema/beans"`向样式表的根元素（不是输入文档）添加一个就足够了，然后您可以执行以下操作

```
<xsl:apply-templates select="/b:beans/b:bean"/> 
```

# c# - 读取 StandardInput 会停止代码执行而不破坏应用程序

> ID：12569937
> 
> 赞同：1
> 
> 时间：2012-09-24T17:28:31.810
> 
> 标签：c#, multithreading

我使用[Stockfish](http://stockfishchess.org/)游戏引擎为 Human Vs Computer 游戏提供动力。这是代码的第一部分：

```
Process _proc= new Process();
_proc.StartInfo = new ProcessStartInfo(path);
_proc.StartInfo.RedirectStandardInput = true;
_proc.StartInfo.RedirectStandardOutput = true;
_proc.StartInfo.UseShellExecute = false;
_proc.StartInfo.CreateNoWindow = true;
_proc.Start();
_proc.StandardInput.WriteLine("uci");
_proc.StandardInput.WriteLine("ucinewgame"); 
```

此时一切正常，但是当我尝试阅读 StandardOutput 时，发生了一些奇怪的事情。

```
string result = _proc.StandardOutput.ReadToEnd(); 
```

Stockfish.exe 程序弹出我的应用程序正在运行，但该行之后的代码没有执行。当我按下暂停时，它指向这一行：

> ![在此处输入图像描述](../Images/f37bf666c93926c49e5c3fdea73c66fb.png)

如果我使用：

```
while (!_proc.StandardOutput.EndOfStream)
{
    result += _proc.StandardOutput.ReadLine();
} 
```

同样的事情只发生在 while 语句中。结果在那里有其全部价值，所有文本都写入其中。

**有没有办法在没有异步读取的情况下克服这个问题？**

侧面问题：

由于这是在整个 ASP.NET 应用程序中使用的单例类的所有部分，所以我不想使用异步读取，因为我不确定如何保护（锁定）写入它的多个线程。另外，我不知道如何停止当前线程，因为命令的处理可以持续长达 10 秒。

*我不想使用 Thread.Sleep() 不断检查读取输出的结束，这不优雅。*

**考虑到侧面问题，如果异步只是解决方案，我怎么能避免多线程问题？**

我的线程知识很薄弱，所以在给出线程相关的答案时请记住这一点。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:01:27.523

[对StandardOutput.ReadToEnd](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)的调用将阻塞，直到此过程结束。这里的目标是读取、处理和响应您在接收到它们时生成的进程中的各种文本命令吗？
您必须通过异步读取来解决此问题。

例如，您可以为[Process.OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)设置一个侦听器。然后调用[Process.BeginOutputReadLine](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)开始阅读。您的代码将继续执行。同时，.NET Framework 将在单独的线程上处理传入的文本消息。

# android - 如何从 ArrayList 填充 ListView ?

> ID：12569938
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:28:37.290
> 
> 标签：android, android-listview, populate, rss-reader

我正在编写一个 android RSS 提要阅读器。

当我的程序最后读取提要时，返回给我一个 ArrayList

项目是我的班级：

```
public class Item implements Serializable {

    private String title;
    private String description;
    private String link;

    public Item() {
        setTitle(null);
        setDescription(null);
        setLink(null);
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getTitle() {
        return title;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getLink() {
        return link;
    }

    public void setLink(String link) {
        this.link = link;
    }

} 
```

现在如何填充一个自定义 ListView，其中包含 3 个TextView`Title`和？`description``link`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:58:37.773

您不需要编写自定义 ListView。您应该使用个性化布局和自定义适配器。

**首先，**编写一个布局来定义每一行的外观。这是一个基本示例：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:padding="5dp" />

    <TextView
        android:id="@+id/description"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:padding="5dp" />

    <TextView
        android:id="@+id/link"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:padding="5dp" />

</LinearLayout> 
```

（将其保存`list_item.xml`在您的`res/layout`文件夹中。）
**接下来，**我建议您创建一个自定义适配器以有效地显示您的布局：

```
public class ItemAdapter extends BaseAdapter {
    private LayoutInflater inflater;
    private List<Item> objects;

    public ItemAdapter(Context context, List<Item> objects) {
        this.objects = objects;
        inflater = (LayoutInflater) context.getSystemService(LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if(convertView == null) {
            convertView = inflater.inflate(R.layout.list_item, parent, false);
            holder = new ViewHolder();
            holder.title = (TextView) convertView.findViewById(R.id.title);
            // Do the same for description and link
            convertView.setTag(holder);
        }
        else
            holder = (ViewHolder) convertView.getTag();

        Item item = objects.get(position);
        holder.title.setText(item.getTitle());
        // Same for description and link
        return convertView;
    }

    // Override the other required methods for BaseAdapter

    public class ViewHolder {
        TextView title;
        TextView description;
        TextView link;
    }
} 
```

要了解有关自定义适配器、ViewHolders 和效率的更多信息，请观看 Android 的 Romain Guy[关于此主题](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)的演讲。

希望有帮助！

# jsp - struts2 jsp动态请求属性

> ID：12569941
> 
> 赞同：1
> 
> 时间：2012-09-24T17:29:10.187
> 
> 标签：jsp, struts2, attributes, request

我想知道如何获取动态请求属性。我将尝试解释：

我的操作从数据库中为表单创建了一些动态字段的列表。此 List 由 jsp 文件中的以下代码迭代：

```
<s:iterator value="category.categoryFields">
 <s:textfield name="%{name}" label="%{name}" value="" />
</s:iterator> 
```

这样，所有需要的字段都显示在页面上。

我现在想要的是请求属性，其名称与文本字段值中的 %{name} 的值相同。我以为是这样的：

```
<s:iterator value="category.categoryFields">
 <s:textfield name="%{name}" label="%{name}" value="%{#request.name}" />
</s:iterator> 
```

但这不起作用。

我不知道如何将 %{name} 变量放在 .name 的位置。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:03:40.103

需要使用

```
 <s:textfield name="%{name}" label="%{name}" value="%{#request[name]}" /> 
```

代替

```
 <s:textfield name="%{name}" label="%{name}" value="%{#request.name}" /> 
```

# android - 在构建大 ui 时显示进度对话框

> ID：12569943
> 
> 赞同：1
> 
> 时间：2012-09-24T17:29:30.223
> 
> 标签：android, multithreading, android-asynctask, progress-bar

我知道这是一个常见的问题.. 我读了这个网站和很多教程很多次但没有机会做工作。

那么代码是这样的：

```
public class mostraRisultatiActivity extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mostra_risultati);

    int cnt = 0;
    final TableLayout tl = (TableLayout) findViewById(R.id.tabellaRisultati);

    for (Esame e : Db.risposteDate){
        TableRow tr = new TableRow(this);

        TextView lbl1 = new TextView(this);
        TextView lbl2 = new TextView(this);
        TextView lbl3 = new TextView(this);
        tr.setGravity(Gravity.CENTER);
        lbl1.setGravity(Gravity.CENTER_VERTICAL);
        lbl3.setGravity(Gravity.CENTER);

        lbl1.setTextColor(android.graphics.Color.RED);
        lbl2.setTextColor(android.graphics.Color.RED);
        lbl3.setTextColor(android.graphics.Color.RED);

        lbl1.setLayoutParams( new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 1 ) );
        lbl2.setLayoutParams( new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 7 ) );
        lbl3.setLayoutParams( new TableRow.LayoutParams( 0, android.view.ViewGroup.LayoutParams.WRAP_CONTENT, 1 ) );

        lbl1.setText(e.getDomandaNum()+"");
        lbl2.setText(Html.fromHtml(e.getTesto()+"<br />"));
        lbl3.setText(e.getRispostaData());

        tr.addView(lbl1);
        tr.addView(lbl2);
        tr.addView(lbl3);
        tl.addView(tr);
        if (e.getRispostaData() != null && e.getRispostaData().equals(e.getRispostaReale())){
            cnt++;
            lbl1.setTextColor(android.graphics.Color.GREEN);
            lbl2.setTextColor(android.graphics.Color.GREEN);
            lbl3.setTextColor(android.graphics.Color.GREEN);
        }
    }
    double percentualeSucceso = (cnt*100)/Db.risposteDate.size();

    final TextView risposteTotTV = (TextView) findViewById(R.id.risultatiTot);
    final TextView riassuntorisTV = (TextView) findViewById(R.id.risRiassunto);
    final TextView esitoTV = (TextView) findViewById(R.id.esito);

    risposteTotTV.setText(Html.fromHtml("<b><big>TOT</big></b>" +  "<br />" + 
            Db.risposteDate.size()));
    riassuntorisTV.setText(Html.fromHtml("<b>Risposte corrette: </b>" +cnt+  "<br />" + 
            "Percentuale: "+percentualeSucceso+"%"));
    if (percentualeSucceso >= 90) {
        esitoTV.setText(Html.fromHtml("<b><big>Esito</big></b>  <br />" + 
                                      "<small>PROMOSSO</small>"));
    } else {
        esitoTV.setText(Html.fromHtml("<b><big>Esito</big></b>  <br />" + 
                                      "<small>BOCCIATO</small>"));
    }

} 
```

}

我在加载 ui 时想要一个进度条（特别是 for 循环）

我尝试了一个线程：所有工作，但没有进度显示，直到加载 ui（无用）我尝试使用 asyncTask 并且我总是异常崩溃。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:39:14.953

答案是你不能！要查看 ProgressDialog 的进度，它必须在 UI 线程上运行。并且创建您的 UI 已经在 UI 线程上运行，这就是您的进度对话框出现无响应的原因。你也不能使用 AsyncTask 来创建 UI，你总是会得到“从错误的线程调用”异常。这意味着您必须在 UI 线程上构建您的 UI。

我通常做的是在加载 UI 时显示启动画面，并在其他一切准备就绪时将其删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:09:39.777

好吧，我只用一个非常基本的方法测试了这个解决方案`Button`，但它确实有效，所以这里是：

您可以`Views`使用`AsyncTask`. `View`我尝试了一个按钮，以及在 AsyncTask中修改/创建一个没有问题的工作的任何调用，直到您将视图添加到布局中。*添加后，必须*在 UI 线程上进行任何修改。因此，您的所有设置都将在 中进行`doInBackground()`，所有`addView()`调用都将在`onPostExecute()`. 之后`onPostExecute()`，必须在 AsyncTask 中对视图进行更多更改。

# objective-c - Property anchorPoint cannot be found in forwar class object CALayer

> ID：12569963
> 
> 赞同：1
> 
> 时间：2012-09-24T17:31:33.207
> 
> 标签：objective-c, c, calayer, gesture-recognition

I downloaded this sample: [https://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435](https://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007435) If I start the sample app everything is working fine.

I made my own app and copied most of the code into it. There is a method called adjustAnchorPointForGestureRecognizer: But in this method there is a error but only in my app (see screenshot): "Property anchorPoint cannot be found in forwar class object CALayer". I am wondering how I can solve this issue, I don't know what I did wrong. It is exactly the same code from the sample. Anyone can help? Thanks! ![enter image description here](../Images/4de0ce2b5ff9e76c3c5ed53b83b06b44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:34:09.720

Did you import the **QuartzCore** framework into your project? Maybe that's why it can find the `CALayer` class

This error is thrown by XCode when it can't find a definition for `CALayer`. You should add the framework to your project and add `#import <QuartzCore/QuartzCore.h>` to wherever you are using the class

# css - @font-face - 嵌入的字体未加载

> ID：12569964
> 
> 赞同：0
> 
> 时间：2012-09-24T17:31:36.227
> 
> 标签：css, fonts, embed

我似乎无法让@font-face 拉下这些嵌入的字体。

页面在这里：[http ://clubs.speareducation.com/resources/](http://clubs.speareducation.com/resources/)

标题“下载数字资源”应该是 gotham_htfregular。

看看我的 global.css 样式表（字体在顶部）。尝试过双引号，单引号......我以前从来没有遇到过这个问题......我在这里遗漏了什么吗？

这是我的CSS。

```
@font-face {
font-family: "gotham_htfregular";
src: url("gothahtfregular-webfont-webfont.eot");
src: url("gothahtfregular-webfont-webfont.eot?#iefix") format("embedded-opentype"),
     url("gothahtfregular-webfont-webfont.woff") format("woff"),
     url("gothahtfregular-webfont-webfont.ttf") format("truetype"),
     url("gothahtfregular-webfont-webfont.svg#gotham_htfregular") format("svg");
font-weight: normal;
font-style: normal;

 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:37:39.497

字体文件的 URL 设置不正确。去看一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:37:50.640

我看到 gothahtfbol-webfont-webfont、gothahtfboo-webfont-webfont 和 gothahtfmed-webfont-webfont，都加载为“gotham_htfregular”；那么告诉我，您要导入的这些文件中的哪些包含“gotham_htfregular”？看起来有粗体、中等和其他东西，但它们看起来都不像是常规的。

# oracle - 在 Oracle 上将结果排序为 ASCII

> ID：12569966
> 
> 赞同：4
> 
> 时间：2012-09-24T17:31:46.647
> 
> 标签：oracle, sorting, ascii

我正在做一个返回 VARCHAR2 和其他一些字段的查询。正如我在 Oracle 文档中发现的那样，我正在通过这个 VARCHAR2 对我的结果进行排序，并且遇到了一些与语言排序相关的问题。例如：

```
SELECT id, my_varchar2 from my_table ORDER BY MY_VARCHAR2; 
```

将返回：

```
ID     MY_VARCHAR2
------ -----------
 3648  A
 3649  B
 6504  C
 7317  D
 3647  0 
```

我需要它返回字符串“0”作为该序列的第一个元素，因为它将比较 ASCII 值。该字符串可以包含多个字符，因此我不能使用 ascii 函数，因为它会忽略除第一个字符之外的任何字符。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:42:29.843

在这种情况下，您应该能够按`BINARY`角色的价值进行排序；

```
SELECT id, my_varchar2 
FROM my_table 
ORDER BY NLSSORT(MY_VARCHAR2, 'NLS_SORT = BINARY') 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!4/4f234/1)。

# jquery - 扩展 div - 只希望点击的 div 在 php echo 中扩展

> ID：12569967
> 
> 赞同：0
> 
> 时间：2012-09-24T17:31:46.557
> 
> 标签：jquery, html, echo

我有从数据库回显的结果，我已经包含了 jquery 扩展代码以在单击标题时展开 div，但是当前当单击一个结果的标题时，所有其他回显的 div 都会展开。

有人可以帮我做到这一点，以便只有点击的 div 展开。感谢您的任何帮助或建议！

这是脚本：

```
<script type="text/javascript">
$(document).ready(function(){
$(".expanderHead").click(function(){
    $("#expanderContent").slideToggle();
    if ($("#expanderSign").text() == "+"){
        $("#expanderSign").html("−")
    }
    else {
        $("#expanderSign").text("+")
    }
});
});
</script> 
```

这是回声语句：

```
 echo "<table width='50%' style='border-bottom:1px solid #000000;'";
echo "<tr>";
echo "<td>";
echo "<div id='page-wrap'>";
echo "<div class='discounted-item freeshipping'>";

echo "<a href='./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "' rel='lightbox'><img src=\"./img/users/" . $row['category'] . "/" . $row['username'] . "/" . $row['filename'] . "\" alt=\"\" width='15%' height='80%' /></a>";

echo "<div id='expanderHead'>";
echo "<div class='reasonbar'><div class='prod-title' style='width: 70%;'>" .$row['fname'] . "</div><div class='reason' style='width: 29%;'><b>". $row['firstname'] . " " . $row['surname'] ."</b></div></div>";

echo "<div id='expanderContent' style='display:none'><div class='reasonbar'><div class='prod-title1' style='width: 70%;'>" . $row['lname'] . "</div><div class='reason1' style='width: 29%;'>Category:<br /> ". $row['category'] . "</div></div></div>";

echo "<div class='reasonbar'><div class='prod-title2' style='width: 70%;'><a href='#' data-reveal-id='myModal".$count."'>Click here For more info</a></div><div class='reason2' style='width: 29%;'>Price: &pound;". $row['price'] . "</div></div>";

echo "</div>";
echo "</td>";
echo "</tr>";
echo "</td>";
echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:34:03.677

可能是因为您正在扩展整体而不是clicked`.class`的唯一。`#id``div`

关于你的评论

> 好的，谢谢你清除这个问题，你知道我如何在 div id 名称中添加一个计数函数以便它可以工作吗？

看看这是否可以帮助您：

动态 id 与 php
[http://perishablepress.com/dynamic-body-class-id-php-wordpress/](http://perishablepress.com/dynamic-body-class-id-php-wordpress/)

带有 jquery 的动态 id
[带有动态 id 的 jQuery 选择](https://stackoverflow.com/questions/408265/jquery-selection-with-dynamic-ids)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:53:48.370

您可以尝试在内部使用 $(this) 来仅查找相对于当前单击的元素

```
$(document).ready(function(){    
    $(".expanderHead").click(function(){
        var $exsign = $("#expanderSign");
        $(this).find("#expanderContent").slideToggle();
        $exsign.html($exsign.text() == '+' ? '-': '+');   
        // simplify your if/else into one line using ternary operator
        // if  $exsign.text() == "+" then use "-" else "+"
    });    
}); 
```

# javascript - 在 IE 7 中禁用导致 Javascript 错误的表单中的输入字段（在 Firefox 中工作正常）

> ID：12569971
> 
> 赞同：0
> 
> 时间：2012-09-24T17:31:59.247
> 
> 标签：javascript, jquery, internet-explorer, jquery-plugins

我有一个表单，我在其中禁用了所有未隐藏在 jQuery(document).ready(function()) 上的输入字段

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core" lang="en" xml:lang="en" style="padding-bottom: 8px;">
    <script>
        jQuery(document).ready(function()
        {
            jQuery('div#formBuilderPreviewEnrollmentData input[type!="hidden"]').prop('disabled', true);
        });
    </script>
    <h:form id="previewMarketingProgramForm">
        <div class="modal-content">
            <br /> <br /> <br />
            <div>
                <h4>Enrollment Form</h4>
            </div>
            <table cellpadding="0" cellspacing="0" border="1" width="100%" class="results-table">
                <tr>
                    <td>
                        <div id="formBuilderPreviewEnrollmentData">
                            <h:outputText value="#{previewMarketingProgramBean.enrollmentFormBean.enrollmentFormContent}" escape="false" />
                        </div>
                    </td>
                </tr>
            </table>
            <br /> <br /> <br />
        </div>
    </h:form>
</div> 
```

这是Javascript错误：

无法将焦点移至控件，因为它不可见、未启用或属于不接受焦点的类型。

请告诉我可能导致此错误的原因。我正在使用 jQuery-1.7.2-min.js

以下是此表单的 HTML 生成源代码，供您参考：

```
<!DOCTYPE html> 
<html class="ltr" dir="ltr" lang="en-US"> <head> <title>View Article - Liferay</title> 
    <script src="http://xx:8001/vcc-theme/js/jquery-1.7.2.min.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/javascript.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/jquery.tablesorter.min.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/jquery.tablesorter.pager.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/jquery.autocomplete.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/jquery.simplemodal.1.4.2.min.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/jquery.scrollTo.js"></script> 
    <script src="http://xx:8001/vcc-theme/js/ui.datepicker.js"></script> 
    <script>
    /*<![CDATA[*/jQuery(document).ready(function()
    {
        jQuery('div#formBuilderPreviewEnrollmentData input[type!="hidden"]').prop("disabled",true)});
    /*]]>*/
     </script> 
     <form id="_jpfcpncuivr_A0169_j_id1:previewMarketingProgramForm" name="_jpfcpncuivr_A0169_j_id1:previewMarketingProgramForm" method="post" 
     action="http://xxx/yyy.do">
         <div class="modal-content"> 
            <br /> <br /> <br /> 
            <div> <h4>Enrollment Form</h4> </div> 
            <table cellpadding="0" cellspacing="0" border="1" width="100%" class="results-table"> 
                <tr> 
                    <td> 
                        <div id="formBuilderPreviewEnrollmentData">
                            <p> NAME: <input class="required" name="NAME" type="text" /></p> <p> &#160;</p> 
                            <p> AGE: <input name="AGE" type="text" /></p> <p> &#160;</p> 
                            <p> ADDRESS:<textarea name="ADDRESS"></textarea></p> 
                        </div> 
                    </td> 
                </tr> 
            </table> 
            <br /> <br /> <br />
         </div>
    </form>
</html> 
```

我在 IE 7 中收到此 JS 错误（在 Firefox 中运行良好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:59:23.903

试试[这个](http://jsfiddle.net/fab6e/1/)

```
<script>
        jQuery(document).ready(function()
        {
            jQuery('div#formBuilderPreviewEnrollmentData input[type!="hidden"]').attr("disabled", true)
        });
</script> 
```

只是为了确保，您想要禁用不是 type="hidden" 的输入，或者您想要禁用在屏幕上不可见的输入（css 样式显示：无）。两者之间有很大的不同，jquery 选择器会有所不同。

# javascript - 指向一个域名

> ID：12569975
> 
> 赞同：0
> 
> 时间：2012-09-24T17:32:25.087
> 
> 标签：javascript, url

我刚刚将一个域名 ( [www.MyNewDomainName.com](http://www.MyNewDomainName.com) ) 指向一个网站 ( [www.blabla.com/something](http://www.blabla.com/something) )。问题是，如果我从[www.MyNewDomain.com](http://www.MyNewDomain.com)进入网站，用 JavaScript 编写的事件侦听器（按键盘上的某些键）在我用鼠标或按键按下屏幕之前不起作用`tab`。相反，从[www.blabla.com/something](http://www.blabla.com/something)进入网站，一切都会立即生效。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:35:18.620

由于您没有发布任何细节，我会说尝试设置字段的焦点或模拟点击事件 onload，如果您使用的是 JQuery，例如：

```
$(document).ready(function(){
    $('body').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:40:03.690

您可能做了 url cloak 而不是正确配置的域指针。

URL 隐藏是指您的网站域名保留在浏览器的地址栏中，“隐藏”所有访问者眼中的目标 URL（网址）。网络浏览者根本不会在他们的浏览器中看到“转发到”的网址。

有时网站加载在一个框架中，这就是为什么你必须先点击的原因。你能给我们（www.MyNewDomainName.com）的来源吗？

# c# - 如何从 CSV 文件中获取数据以在 C# 中的 NumericUpdown 控件上形成

> ID：12569976
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:32:24.743
> 
> 标签：c#

我想在我的 C# 表单控件中获取 CSV 文件值。（TextBox、NumericUpDown、ListBox）我有一个列表说名称和一个按钮加载当我单击 CSV 中的加载按钮值时，例如 Name、Age、RollNo。应添加到具有名称字段的列表框中，并单击列表框中的名称，名称、年龄、卷号的值应显示在 TextBox 和 NumericUpdown 中。请帮助我是 C# 的新手......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:12:34.517

由于您是 C# 的新手（顺便说一下您提出问题的方式，对一般编程来说都是新手），我认为自己编写一个 CSV 解析器可能要求太多 - 幸运的是，有一些库可以为您做到这一点。只需阅读这篇文章：[http](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader) ://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader ，其中包含指向您可以下载并包含在项目中的代码的链接。

`NumericUpDown`不是“数据”控件——它只是让用户从一系列数字中选择一个值。我看不出如何在 CSV 文件中的数据上下文中使用该控件（当然，除非该控件是在 CSV 文件的单行中编辑单个字段值）。

您描述的所有其他内容听起来都像是简单的基于事件的编程。只需为`ListBox.SelectedIndexChanged`事件连接一个处理程序并从那里填充您的表单。

# python - Python大迭代次数失败

> ID：12569977
> 
> 赞同：13
> 
> 时间：2012-09-24T17:32:27.117
> 
> 标签：python, parallel-processing, iteration, montecarlo, pi

我使用多处理模块在 Python 中编写了简单[的蒙特卡罗 π 计算程序。](http://math.fullerton.edu/mathews/n2003/montecarlopimod.html)它工作得很好，但是当我为每个工人通过 1E+10 次迭代时，出现了一些问题，结果是错误的。我不明白是什么问题，因为在 1E+9 次迭代中一切都很好！

```
import sys
from multiprocessing import Pool
from random import random

def calculate_pi(iters):
    """ Worker function """

    points = 0  # points inside circle

    for i in iters:
        x = random()
        y = random()

        if x ** 2 + y ** 2 <= 1:
            points += 1

    return points

if __name__ == "__main__":

    if len(sys.argv) != 3:
        print "Usage: python pi.py workers_number iterations_per_worker"
        exit()

    procs = int(sys.argv[1])
    iters = float(sys.argv[2])  # 1E+8 is cool

    p = Pool(processes=procs)

    total = iters * procs
    total_in = 0

    for points in p.map(calculate_pi, [xrange(int(iters))] * procs):
        total_in += points

    print "Total: ", total, "In: ", total_in
    print "Pi: ", 4.0 * total_in / total 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T18:06:02.140

问题似乎是多处理对它可以传递给 xrange 内的子进程的最大 int 有限制。这是一个快速测试：

```
import sys
from multiprocessing import Pool
def doit(n):
  print n
if __name__ == "__main__":
  procs = int(sys.argv[1])
  iters = int(float(sys.argv[2]))
  p = Pool(processes=procs)
  for points in p.map(doit, [xrange(int(iters))] * procs):
    pass 
```

现在：

```
$ ./multitest.py 2 1E8
xrange(100000000)
xrange(100000000)
$ ./multitest.py 2 1E9
xrange(1000000000)
xrange(1000000000)
$ ./multitest.py 2 1E10
xrange(1410065408)
xrange(1410065408) 
```

这是多处理的一个更普遍的问题的一部分：它依赖于标准的 Python 酸洗，并带有一些小的（并且没有很好的文档记录）扩展来传递值。每当出现问题时，首先要检查的是值是否以您期望的方式到达。

事实上，你可以通过玩 来看到这个问题`pickle`，甚至不接触`multiprocessing`（由于那些小的扩展，情况并非总是如此，但通常是）：

```
>>> pickle.dumps(xrange(int(1E9)))
'c__builtin__\nxrange\np0\n(I0\nI1000000000\nI1\ntp1\nRp2\n.'
>>> pickle.dumps(xrange(int(1E10)))
'c__builtin__\nxrange\np0\n(I0\nI1410065408\nI1\ntp1\nRp2\n.' 
```

即使不了解 pickle 协议的所有细节，很明显`I1000000000`第一种情况下的 int 是 1E9，而下一种情况的等效块大约是 1.41E9，而不是 1E10，作为 int。你可以实验

一个明显的尝试解决方案是传递`int(iters)`而不是`xrange(int(iters))`，并让从它的参数`calculate_pi`创建。`xrange`（注意：在某些情况下，像这样的明显转换可能会损害性能，可能会很严重。但在这种情况下，如果有什么可能会稍微好一点——传递一个更简单的对象，并且你正在并行化`xrange`构造——当然区别是这么小可能没关系。盲目改造之前一定要三思。）

快速测试表明这现在有效：

```
import sys
from multiprocessing import Pool

def doit(n):
  print xrange(n)

if __name__ == "__main__":
    procs = int(sys.argv[1])
    iters = int(float(sys.argv[2]))
    p = Pool(processes=procs)
    for points in p.map(doit, [iters] * procs):
      pass 
```

然后：

```
$ ./multitest.py 2 1E10
xrange(10000000000)
xrange(10000000000) 
```

但是，您仍然会遇到更大的限制：

```
$ ./multitest.py 2 1E100
OverflowError: Python int too large to convert to C long 
```

同样，这是同样的基本问题。解决此问题的一种方法是将 arg 作为字符串一直向下传递，并在子进程内执行 int(float(a)) 。

作为旁注：我这样做`iters = int(float(sys.argv[2]))`而不是稍后`iters = float(sys.argv[2])`使用的原因`int(iters)`是为了避免以后意外使用浮点`iters`值（就像OP的版本一样，在计算中`total`，因此`total_in / total`）。

请记住，如果你得到足够大的数字，你就会遇到 C 双精度类型的限制：`1E23`通常是 99999999999999991611392，而不是 100000000000000000000000。

# php - jQuery阻止所有表单一次提交

> ID：12569978
> 
> 赞同：1
> 
> 时间：2012-09-24T17:32:29.510
> 
> 标签：php, jquery, ajax

我有一组 HTML 表单链接，我在点击时提交，其 ID 为“ajaxForm”

```
 for ($year = 2008; $year <= intval(date('Y')); $year++) {
    if ($year == $currentYear)
        continue;
    echo '<div style="float:right;padding-right:20px;"><form name="year' . $year . 'Form1" id= "ajaxForm" action="/managementDashboard#visibleTab-5" method="post"><input name="getRecordsFor" type="hidden" value="' . $year . '"><a id="buttonRed" href="javascript:document.year' . $year . 'Form1.submit();">' . $year . '</a></form></div>' . chr(10);
} 
```

但是，我使用 jQuery 而不是默认提交，而是使用以下方法发布数据：

```
 jQuery("form#ajaxForm").click(function(event) {

        /* stop form from submitting normally */
        event.preventDefault(); 

        /* Send the data using post and put the results in a div */
        jQuery.post( '/ajaxFunctions?mgmtDbrdPge=5', jQuery("#ajaxForm").serialize(),
        function( data ) {
            jQuery( "#visibleTab-5" ).empty().append( data );

        }
    );
    }); 
```

问题是它提交的是所有表单，而不是我单击的单个表单。有没有办法可以防止这种情况，而不必为每个单独的表单编写 jQuery 链接？

更新 - 我接受了一个答案，因为他的方法是合法的，但我意识到我的问题是什么。而不是 jQuery("#ajaxForm").serialize()，我应该把它写成 jQuery(this).serialize() 只调用通过点击提交的数据，而不是所有具有该 ID 的表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:36:40.897

看起来您有多个具有相同 id 的表单`ajaxForm`。确保它是唯一的

如果您知道页面中 Ajax 表单的 id .. 那么您可以这样做

```
jQuery("form#ajaxForm ,form#myForm , form#myFormThird ").click(function(event) { 
```

这将确保多个元素附加到同一个事件处理程序..

**更新的代码** 如果您不知道 id，那么您可以使用 for 循环进行迭代并附加事件..

```
$('form').each(function() {

    $(this).click(function(event) {

       // Your Function
    }
}); 
```

还要确保你使用 .on() 来附加你的事件.. 而不是仅仅单击以便委托事件..

```
jQuery("form#ajaxForm").on('click',function(event) { 
```

# css - 如何垂直对齐 div 中的两个或多个（并排）元素？

> ID：12569980
> 
> 赞同：21
> 
> 时间：2012-09-24T17:32:47.543
> 
> 标签：css, html, vertical-alignment

我正在尝试垂直对齐 div 中具有不同高度的两个元素：

```
<div class="footer-icons">
    <div id="footer-twitter">
         <img src="images/twitter.png" width="40" alt="">    
    </div>
    <div id="footer-fb">
         <div class="fb-like" data-href="http://facebook.com/user" data-send="false" data-layout="button_count" data-width="160" data-show-faces="false" data-font="arial"></div>
    </div>
</div> 
```

twitter div 的高度为 40px，fb div 的高度为 20px。目前正在发生的是 fb div 与 twitter 图像的底部边缘垂直居中。这是CSS：

```
.footer-icons {
    padding-top:40px;
    width:300px;
    margin:auto;
    text-align:center;
    vertical-align:middle;
}

#footer-twitter {
    display:inline-block;
}

#footer-fb {
    display:inline-block;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-24T17:35:54.457

将垂直对齐放在内部 div 上

```
#footer-twitter{
  display:inline-block;
  vertical-align:middle;
}

#footer-fb{
  display:inline-block;
  vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-03-28T17:18:33.373

`display: flex`是您工具带中的一个非常酷的工具。[这里](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)有一些有用的文档可以帮助您开始使用它。

特别是在您的情况下，这些属性将很有用：

`align-items:center`- 这将垂直对齐所有子元素的中心

`justify-content:center`- 这将在父容器中水平居中子元素（不确定你是否想要这个，但也可能有帮助）

```
.footer-icons {
    border: 1px solid #000;
    padding-top:40px;
    width:300px;
    margin: auto;

    display:flex;
    align-items:center;
    justify-content:center;
}
```

```
<div class="footer-icons">
    <div id="footer-twitter">
        Center me  
    </div>
    <div id="footer-fb">
         <img src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Facebook_logo_%28square%29.png" width="40" alt="">   
    </div>
</div>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-28T17:32:21.103

只需添加**CSS 即可**解决您的问题`display: flex; align-items: center;`。谢谢`.footer-icons`

 **```
.footer-icons {
    padding-top:40px;
    width:300px;
    margin:auto;
    text-align:center;
    vertical-align:middle;
    display: flex;
    align-items: center;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T17:42:52.250

定义一个`line-height`等于或大于更大的图标：

```
.footer-icons {
    ...
    line-height: 32px;
} 
```**

# jquery-mobile - 使用 jquery mobile 获取页面加载中的图像大小

> ID：12569981
> 
> 赞同：0
> 
> 时间：2012-09-24T17:32:47.620
> 
> 标签：jquery-mobile

我想在我的 DOM 中获取和更改图像加载的大小，但父元素 .ui-page 在 display:none; 在页面初始化之后。我正在使用[jqm 分页](http://filamentgroup.com/lab/jquery_mobile_pagination_plugin/)，但我认为我不知道 jQuery Mobile 中的某些内容是否正确。

# uinavigationcontroller - 在 iPhone iOS 6 上颠倒？

> ID：12569984
> 
> 赞同：3
> 
> 时间：2012-09-24T17:33:03.817
> 
> 标签：uinavigationcontroller, ios6, autorotate

> **可能重复：**
> [iOS6 上的旋转行为不同](https://stackoverflow.com/questions/12536645/rotation-behaving-differently-on-ios6)

我希望我的应用程序支持 iPhone 上的倒置方向。这适用于 iOS 5，但我很难让它在 iOS 6 上运行。

Apple 的文档提到默认支持的方向是 iPad 上的所有内容，以及iPhone 上*除了*颠倒之外的所有内容。我想支持两者的一切；我个人遇到过在标准纵向模式下电线阻碍的情况，并且不想随意决定我的用户如果遇到类似问题就不能颠倒使用该应用程序。

这是我到目前为止所做的：

1.  根据 iOS 5 的要求，我的视图控制器`shouldAutorotateToInterfaceOrientation;`返回`YES`所有方向。（我也尝试过注释掉这个视图控制器`shouldAutorotateToInterfaceOrientation:`，因为 iOS 6 根据它的存在做出决定。它没有帮助。）
2.  我的视图控制器的`supportedInterfaceOrientations`回报`UIInterfaceOrientationMaskAll`。
3.  我的应用程序代表的`application:supportedInterfaceOrientationsForWindow:`回报`UIInterfaceOrientationMaskAll`。
4.  在目标的摘要页面中选择所有方向模式。

我错过了什么？

# azure - 如何在 Azure 角色上使用 BCP.exe？

> ID：12569988
> 
> 赞同：2
> 
> 时间：2012-09-24T17:33:26.850
> 
> 标签：azure, bcp

我想在 Azure Web（或工作人员）角色上使用 BCP.exe 从 SQL Azure 下载数据。要在 Azure 上执行 BCP.exe，我还应该复制什么样的 DLL？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:45:38.687

如果你想定期启动 BCP.EXE，你可以做一个非常小的启动程序（只需使用它依赖于一个 conf 文件来启动 BCP.EXE。你可以将这些文件放在一起作为[启动任务](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)在后台运行所以不会影响角色执行过程。

可以有另一个选项来设置调度程序以启动 BCP.EXE，您可以使用启动任务来配置调度程序。此选项不需要启动程序，但您需要在启动任务中运行配置脚本才能实现。

关于BCP.EXE：（组件安装位置在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=16177)）

*   BCP.EXE 是一个命令链接实用程序，它是**Microsoft SQL Server 2008 命令行实用程序**包的一部分，可以从上面特定于您的处理器类型的链接下载。
*   BCP.EXE 依赖于**Windows Installer 4.5**和**Microsoft SQL Server Native Client** ，后者是上述相同下载位置提供的另一个组件。

由于我没有在 Azure VM 中使用 BCP.EXE，所以您真正需要的是验证上述两个安装程序（x64 的 MSI）是否首先在 Azure VM 上工作，如果它对您有用，您只需创建一个启动任务即可直接下载并安装这些文件。

# r - 在 Rcpp 中构造 3D 数组

> ID：12569992
> 
> 赞同：12
> 
> 时间：2012-09-24T17:33:48.623
> 
> 标签：r, rcpp

我正在尝试使用提供的维度列表将 1D 数组映射到 3D 数组。

这是我的组件：

```
SEXP data; // my 1D array
// I can initialise new 3D vector in the following way:
NumericVector vector(Dimension(2, 2, 2);
// or the following:
NumericVector vector(data.begin(), data.end()); 
```

我没有想到的是如何创建一个同时包含我的数据和所需尺寸的 NumericVector。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-11T07:00:47.683

有一个更短的解决方案。您可以使用 重塑数据`.attr`。数据可以被创建或作为输入给出——没关系。见下文：

```
library("Rcpp")

cppFunction(code='
NumericVector arrayC(NumericVector input, IntegerVector dim) { 
  input.attr("dim") = dim;
  return input;
}
')
x = 1:8
arrayC(x, c(2,2,2))
## , , 1
## 
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    5    7
## [2,]    6    8 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T18:42:15.413

这是可行的，但有点痛苦。我想对新的构造函数或辅助函数的体面（和测试）贡献将不胜感激。

同时，您可以执行以下示例的操作。但要小心 row-major 和 col-major 等。另一个选择是[RcppArmadillo](http://dirk.eddelbuettel.com/code/rcpp.armadillo.html)，它有一个适当的 'Cube' 类型将矩阵泛化到 3-d。

```
R> library(inline)
R> fx <- cxxfunction(signature(vs="numeric", ds="integer"), plugin="Rcpp", body='
+    Rcpp::NumericVector v(vs);            // get the data
+    Rcpp::Dimension d(ds);                // get the dim object
+    Rcpp::NumericVector r(d);             // create vec. with correct dims
+    std::copy(v.begin(), v.end(), r.begin());  // and copy
+    return Rcpp::List::create(v, d, r);
+ ')
R> fx(1:8, c(2,2,2))
[[1]]
[1] 1 2 3 4 5 6 7 8

[[2]]
[1] 2 2 2

[[3]]
, , 1

     [,1] [,2]
[1,]    1    3
[2,]    2    4

, , 2

     [,1] [,2]
[1,]    5    7
[2,]    6    8

R> 
```

# php - 如果在 sql 上存在，则生成随机的新随机字符串

> ID：12569995
> 
> 赞同：0
> 
> 时间：2012-09-24T17:34:03.767
> 
> 标签：php, sql

我有一个问题，如何在 PHP 中创建一个随机字符串并检查 SQL 字符串是否存在，如果存在，则创建一个新字符串，但如果不存在则使用它

我有这个代码来创建随机字符串：

```
$original_string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
$random_string = get_random_string($original_string, 14);
echo $random_string; 
```

我想检查随机字符串是否已被使用的 MySQL 是这个：

```
CREATE TABLE `en_videos` (
  `id` int(11) NOT NULL auto_increment,
  `name` text,
  `code` text,
  `description` text,
  `hits` int(11) default NULL,
  `program` int(11) default NULL,
  `lenght` int(11) default NULL,
  `hd` int(11) NOT NULL default '1',
  `subtitles` int(11) NOT NULL default '1',
  `type` text NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

我想检查**代码**字段上是否存在随机字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:36:51.497

尝试：

```
$original_string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
$random_string = '';

do {
    $random_string = get_random_string($original_string, 14);
} while ($mysqli->query('SELECT 1 FROM `en_videos`
             WHERE `code` = "' . $random_string . '"')->fetch_row());

echo $random_string; 
```

这假设您正在使用该`mysqli`库。如果没有，请使用获取行的任何内容作为条件处理程序。

假设您正在使用这些`mysql_*`函数（在这种情况下，我建议您查看其他[mysql 库](http://php.net/manual/en/book.mysqli.php)）：

```
$original_string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
$random_string = '';

do {
    $random_string = get_random_string($original_string, 14);
} while ($mysql_num_rows(mysql_query('SELECT 1 FROM `en_videos`
             WHERE `code` = "' . $random_string . '"')));

echo $random_string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:35:51.903

```
select count(*) as found_num
from en_videos
where `code` = '$random_string' 
```

`0`如果未找到该字符串，则返回`> 0`。

# xcode - 滚动视图不滚动

> ID：12569999
> 
> 赞同：0
> 
> 时间：2012-09-24T17:34:11.400
> 
> 标签：xcode, uiscrollview, master-detail

我将 XCode 的 Master-Detail 应用程序与 UISplitView 一起使用。在我的 detailView 中，我有一个 scrollView。滚动视图适用于 iPhone，但拒绝在 iPad 上滚动。滚动视图在 iPad 和 iPhone XIB 文件中具有完全相同的设置。我没有使用故事板。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:12:32.220

看看[UIScrollView 的](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html) `@property(nonatomic) CGSize contentSize`属性。它定义是否需要滚动。