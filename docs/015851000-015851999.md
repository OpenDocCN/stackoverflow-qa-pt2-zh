# StackOverflow 问答 15851000-15851999

# c++ - C ++按条件为堆栈对象选择重载构造函数

> ID：15851002
> 
> 赞同：1
> 
> 时间：2013-04-06T12:34:34.440
> 
> 标签：c++, constructor, overloading

我想要这样的东西：

```
if (customLocation.isEmpty())
{
    KUrl url;
}
else
{
    KUrl url(customLocation);
}
/* use url */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:38:17.493

任何你做不到的理由

```
KUrl url;
if (!customLocation.isEmpty())
{
    url = KUrl(customLocation);
}
/* use url */ 
```

或者

```
KUrl url = customLocation.isEmpty() ? KUrl() : KUrl(customLocation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:52:02.470

通常的 C++ 构造有意在分配和初始化之间创建非常紧密的耦合。因此，通常您需要使用动态分配来动态指定要使用的构造函数。动态分配的效率可能比您试图避免的轻微开销低几个数量级......

但是，使用 C++11，您*可以*使用对齐的存储和放置新。

问题是`KUrl`该类很可能在内部使用动态分配，然后优化完成的所有工作都是浪费程序员的时间：包括您最初的时间，以及以后维护代码的任何人的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:37:56.063

在这里你没有`KUrl`完成的副本

```
boost::optional<KUrl> ourl;
if(customLocation.isEmpty()) {
  ourl = boost::in_place();
} else {
  ourl = boost::in_place(customLocation);
}

KUrl &url = *ourl; 
```

除了有趣之外，我会推荐 Jacks 解决方案（如果它适用于您的类型）:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:38:58.913

为什么这不起作用？

```
KUrl url;
if (!customLocation.isEmpty())
    url = customLocation; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T12:39:03.030

```
KUrl url;

if (!cusomLocation.isEmpty())
{
    url = KUrl( customLocation );
} 
```

# php - 刷新页面后名称为空

> ID：15851003
> 
> 赞同：0
> 
> 时间：2013-04-06T12:34:34.477
> 
> 标签：php, jquery, mysql

我有一个[网站](http://jessecsmagazine.coolpage.biz "网站")并不能真正按照我想要的方式工作。如果您输入名称和评论，它将正确地写在评论部分下方。但是当您刷新时，名称变为空。

Github： [https ://github.com/thebestbestman123/my_magazine](https://github.com/thebestbestman123/my_magazine)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:43:31.747

我认为您的表格行标题是“名称”而不是“评论者” [https://github.com/thebestbestman123/my_magazine/blob/master/php/get_comments.php](https://github.com/thebestbestman123/my_magazine/blob/master/php/get_comments.php)

```
$rowarray["name"] = $row["commenter"]; 
```

基于您的保存行名称： [https ://github.com/thebestbestman123/my_magazine/blob/master/php/add_comment.php](https://github.com/thebestbestman123/my_magazine/blob/master/php/add_comment.php)

> sprintf("INSERT INTO comments (id, **name** , comment, timestamp) VALUES (null, '%s', '%s', null)"

# css - 手机和平板电脑的导航中断

> ID：15851014
> 
> 赞同：2
> 
> 时间：2013-04-06T12:35:22.317
> 
> 标签：css

我使用的是固定布局，但是当我在 android 平板电脑和手机中看到我的布局时，布局由于某种原因而中断。

请访问[http://www.iamvishal.com/pureecn/](http://www.iamvishal.com/pureecn/)

并注意顶部导航“开户、客户支持和选择语言”

在桌面上它看起来不错，但顶部导航在移动浏览器中中断。

我怀疑这是他们的利润。

```
#main_links_list_1,#main_links_list_2,#main_links_list_3
{

 margin-right: 65px;
 position: relative;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T04:44:21.050

几乎所有事情都在破坏，因为您的布局有一半是“固定的”，另一半是“流动的”。例如：

```
div.section {
margin-left: auto;
margin-right: auto;
width: 960px;          /*fixed*/
position: relative;
}

#main_links_container {
    float: left;
    width: 80%;       /*fluid*/
} 
```

另请注意，当没有为元素设置宽度时，默认值为自动。

在桌面上打开您的网站并尝试调整浏览器窗口的大小，您可能会看到与在手机和平​​板电脑上看到的相同的问题。

如果你真的想避免使用媒体选择器，你可以尝试改变这个 -

```
html, body, #page {
height: 100%;
} 
```

对于这样的事情-

```
html, body, #page {
width: 1200px;
margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:43:09.953

在 CSS 中使用媒体查询以更好地控制移动设备 -

```
@media screen and (max-width: 767px) {
    #main_links_list_1,#main_links_list_2,#main_links_list_3
    {
    margin-right: 15px; // reduced amount for mobile devices and tablets
    position: relative;
    }
} 
```

确保它低于当前的 CSS，否则它将被覆盖

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T14:46:21.770

您的问题可能是部分**`Professional Solutions`**中的最后一个链接很长，这会破坏布局。

在你的 css 文件中试试这个：

```
#professional_solutions_list {
  max-width: 180px;
  width: 100%;
} 
```

请参阅以下屏幕以了解我的意思（红线是您的菜单应该到达的位置，蓝线是它的实际位置）：

![在此处输入图像描述](https://i.stack.imgur.com/FDWKZ.png)

### 更新

以下状态为默认状态，如平板电脑出现问题，请注意应用规则：

![在此处输入图像描述](https://i.stack.imgur.com/MSrBo.png)

而这个添加后`max-width: 180px`，问题就**解决**了：

![在此处输入图像描述](https://i.stack.imgur.com/UbkI8.png)

> [我使用FireBug](http://getfirebug.com/)实时编辑 css 规则

## 编辑：

根据您的评论，我再次检查了该网站，请删除：

> 宽度：94%；

来自带有 id 的 div：`secondary_links`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T03:42:57.963

您的网站在移动设备/平板电脑中关闭的原因有很多。

1 ==> 为非桌面创建流畅的布局
2 ==> 确保您的元视口正确（包括视网膜显示和 Android dpi）
3 ==> 为移动设备优化您的图像
4 ==> 小心位置：固定较旧的 iO 和 Android 设备。不能按预期工作。

你能更好地解释一下什么是破坏吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T11:47:40.133

你假设错了。你需要响应式布局而不是固定的！我建议你看看 zurb Foundation v4。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T14:10:07.280

尽管像 zurb 这样的响应式布局是可取的 - 快速解决方案在于应用

`min-width:`到您的**页面包装**元素

# php - 列表框 - 在 PHP 中使用保存的值进行初始化

> ID：15851015
> 
> 赞同：-1
> 
> 时间：2013-04-06T12:35:32.950
> 
> 标签：php, listbox

如何使用数据库中表中的值初始化列表框？
当我发布页面而不在列表框中进行更改时，应用程序将列表框的第一个值保存到表中。

```
<?php 
   $cpquery = "Select distinct(operater) from operater where dept='$dept' order by operater"; 
   $cpresult = mysql_query($cpquery) or die(mysql_error()); 
?> 
<select name="operater" value="operater"> <!-- Drop down --> 

<?php 
   if($cpresult) { 
       while($row = mysql_fetch_array($cpresult)) { 
          echo '<option value="' .$row['operater']. '">'. $row['operater']. '</option>' ; 
       } 
   } 
   echo "<option value='operater' ></option>"; 
 echo "</select>"; <!-- end of block --> – 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:40:02.463

也许您可以使用带有“回退”值的隐藏表单输入，因此在 PHP 中您可以检查您的列表框是否已更改。如果不是，您可以使用此隐藏值。

但我不确定我是否理解你的问题。

# mysql - Mysql存储过程调用成功但没有显示输出记录

> ID：15851016
> 
> 赞同：0
> 
> 时间：2013-04-06T12:35:35.103
> 
> 标签：mysql, phpmyadmin, call, wamp, procedures

我使用以下代码创建了一个过程：

```
DELIMITER //
CREATE procedure GetBooksbyBorrowerID (IN Bor_id VARCHAR(10))
BEGIN
SELECT borrower_details.Borrower_ID ,borrower_details.Book_ID, book_mst.book_Title,book_mst.LANGUAGE, borrower_details.borrowed_from_date 
FROM borrower_details 
JOIN book_mst
ON borrower_details.BOOK_ID = book_mst.ISBN
WHERE (borrower_details.borrower_id = 'Bor_id');
END // 
```

当我调用这个过程时，它说 Mysql 查询执行成功，但不显示输出记录。并且数据库中有符合查询条件的记录。我使用以下语句调用：

```
CALL GetBooksbyBorrowerID ('BOR001'); 
```

如何查看输出记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:42:14.853

您正在将**borrower_details.borrower_id**与字符串**'Bor_id'**进行比较，而不是参数。

采用`WHERE (borrower_details.borrower_id = Bor_id);`

# c# - 使用 C# 找出 IP 地址的域名

> ID：15851021
> 
> 赞同：-4
> 
> 时间：2013-04-06T12:36:07.987
> 
> 标签：c#, nslookup

在我的应用程序中，我应该获取我提供的几个 IP 地址的域名作为输入。我猜这个过程叫做NSLOOKUP。但是，我想确认我是否正确。我正在寻找实现这一点并显示 MessageBox 输出的简单程序。

请投稿...

谢谢你的期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:10:16.217

```
IPAddress address = IPAddress.Parse("127.0.0.1");
IPHostEntry entry = Dns.GetHostEntry(address );
Console.WriteLine(entry.HostName); 
```

# c++ - 如何在 Qt 中的不同对话框中存储变量

> ID：15851022
> 
> 赞同：0
> 
> 时间：2013-04-06T12:36:17.377
> 
> 标签：c++, qt, user-interface, parameter-passing

我有 2 个对话框。对话框 A 接受来自用户的一些数据并将其存储在一个变量中。现在我想在对话框 B 中使用这个变量。有什么简单的方法可以做到这一点？对话框 B 是从对话框 A 本身实例化的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:18:45.480

Qt 最强大的功能是信号槽系统。
所以用信号和插槽来做。当您创建一个对话框时，给他一个显示此对话框并接受此对话框所需值的插槽。当编辑的值更改或此值被批准时，对话框还应触发信号。

这种方法使代码的每个部分彼此非常独立，使其可扩展且易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:35:54.910

您可以使用外部变量。

在您的对话框中声明全局变量（在任何方法/函数之外），例如 int Number。现在在您的对话框 B 中声明 extern 变量，例如：extern int Number。现在，您存储在 Number 中的任何数据都将在您的 extern 变量中可用。

# node.js - 如何在 WebStorm 中重新格式化 JavaScript 代码？

> ID：15851023
> 
> 赞同：37
> 
> 时间：2013-04-06T12:36:17.380
> 
> 标签：node.js, ide, webstorm

我正在使用 JetBrains WebStorm IDE。但我认为自动格式化（美化）代码没有捷径。在 Netbeans 中，它的`Ctrl``Shift``F`命令格式化整个文件。有什么命令吗？我是否需要安装任何插件或其他东西才能启用此功能？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-06T13:17:10.590

`Code`| `Reformat Code...`( `Ctrl`+ `Alt`+ `L`):

![在此处输入图像描述](https://i.stack.imgur.com/GgIwX.png)

可以在`File`|中更改键盘快捷键 `Settings`| `Keymap`：

![在此处输入图像描述](https://i.stack.imgur.com/7LVVr.png)

如果您还不熟悉 IDE 功能，请使用`Help`| `Find Action`：

![在此处输入图像描述](https://i.stack.imgur.com/qRnXa.png)

此[功能也已记录在案](http://www.jetbrains.com/webstorm/webhelp/reformatting-source-code.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-06T12:38:47.577

是的。

Opt+Cmd+L（Mac 或任何您的平台组合）

或代码 > 重新格式化代码...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-31T20:52:17.957

在 Windows 中使用 WebStorm 8.0.4 的热键是（已成为？）Alt-F8。

# vim - 为什么我的 Vim 键盘快捷键这么慢？

> ID：15851031
> 
> 赞同：2
> 
> 时间：2013-04-06T12:37:20.313
> 
> 标签：vim

我为自己创建了以下 vim 快捷方式：`map <Leader>c magg=G'a<CR>`

当我使用它时，在我的文件实际缩进之前发生了相当明显的 2 秒延迟。如果我手动输入`magg=G'a`，问题就不会发生。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:50:35.267

您可能还有其他以 开头的映射`<Leader>c`，因此 Vim 必须等待解决歧义；`:verbose map <Leader>c`会告诉你。然后，只需为一个键选择不同的键即可立即响应。

此外，[您应该使用`:noremap`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html); 它使映射不受重新映射和递归的影响。

# jquery-waypoints - 滚动到视频时使用 JQuery Waypoints 播放视频

> ID：15851033
> 
> 赞同：1
> 
> 时间：2013-04-06T12:37:38.493
> 
> 标签：jquery-waypoints

当用户使用 jQuery 的航点插件滚动到 HTML5 视频时，我正在尝试播放它。

这是我的代码：

```
$(document).ready(function() { videoSetup(); });
function videoSetup() {

    var video = $("#video");

    video.waypoint(function(direction) {
        video.get(0).play();
    });   

} 
```

当视频滚动到什么都没有发生时放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T14:11:26.573

HTML 标记看起来像：

```
<div class="video-test">
  <video id="video1" width="960">
    <source src="video-folder/video.mp4" type="video/mp4"> 
  </video>
</div> 
```

`video-test`然后，您在容器航点加载视频的 javascript将是：

```
$(document).ready(function() { 
      var myVideo=document.getElementById("video1");

      $('.video-test').waypoint(function() {                
        myVideo.play(); 
        }, {
              offset: '50%',  // middle of the page
              triggerOnce: true // just my preference...
      });
}); 
```

# c# - json反序列化错误

> ID：15851037
> 
> 赞同：1
> 
> 时间：2013-04-06T12:37:56.243
> 
> 标签：c#, .net, json, serialization, deserialization

我在尝试将 JSON 字符串反序列化为对象时遇到此错误：

```
 "System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> Newtonsoft.Json.JsonSerializationException: Error converting value "{"Admin":false,"Id":1,"Password":"heslo","Nick":"jozifek"}" to type 'Entities.dbo.User'. Path 'Frontman', line 1, position 105\. ---> System.ArgumentException: Could not cast or convert from System.String to Entities.dbo.User.
   at Newtonsoft.Json.Utilities.ConvertUtils.EnsureTypeAssignable(Object value, Type initialType, Type targetType)
   at Newtonsoft.Json.Utilities.ConvertUtils.ConvertOrCast(Object initialValue, CultureInfo culture, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.EnsureType(JsonReader reader, Object value, CultureInfo culture, JsonContract contract, Type targetType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type)
   at BussinessLogic.helpers.Serializer.Deserialize[T](String obj) in C:\Users\Ondra\documents\visual studio 2010\Projects\webServiceTestApp\BussinessLogic\helpers\Serializer.cs:line 14
   at webServiceTestApp.Service1.GetSongs(String band) in C:\Users\Ondra\documents\visual studio 2010\Projects\webServiceTestApp\webServiceTestApp\Service1.asmx.cs:line 142
   --- End of inner exception stack trace ---" 
```

User.cs 看起来像这样：

```
namespace Entities.dbo
{
    [TableName("tbl_user")]
    public class User : AbstractEntity
    {
        [MapField("nick")]
        public string Nick { get; set; }

        [MapField("password")]
        public string Password { get; set; }

        [MapField("admin")]
        public bool Admin { get; set; }
    }
} 
```

Band.cs 看起来像这样：

```
namespace Entities.dbo
{
    [TableName("tbl_band")]
    public class Band : AbstractEntity
    {
        [MapField("name")]
        public string Name { get; set; }

        [MapField("frontman")]
        public int FrontmanId { get; set; }

        [Association(CanBeNull = false, ThisKey = "FrontmanId", OtherKey = "Id")]
        public User Frontman { get; set; } 
```

抽象实体：

```
namespace Entities.helpers
{
    public abstract class AbstractEntity
    {
        [PrimaryKey, Identity, MapField("id")]
        public int Id { get; set; }

        public string Serialize()
        {
            return JsonConvert.SerializeObject(this);
        }
    }
} 
```

当我发送字符串以反序列化为包含 Frontman 属性中的用户对象的 Band 时，会弹出此错误。

知道我哪里出错了吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:04:40.240

很难说，几年前我用过一次 Jonson，但是

1.  在 jonson 你有属性“密码”，但在对象中你有 MapField(“密码”) - 小写

2.  是否在 AbstractEntity 类“Id”属性中？

# highcharts - 从 highcharts 导出 powerpoint

> ID：15851044
> 
> 赞同：0
> 
> 时间：2013-04-06T12:38:26.260
> 
> 标签：highcharts, phppowerpoint

是否有可能导出在 powerpoint 中使用 hightcharts 完成的图表？否则有人可以帮我找到解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:00:11.183

只需将其导出为图像（PNG 或 JPG）并将该图像添加到 PowerPoint 幻灯片中？大多数 highcharts 图表在图表的右上角都有一个下载（导出）按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T11:36:16.360

我知道这很旧，但我目前正在尝试实现同样的目标。如果您乐于使用 png 或 jpg，那么我会使用 phantonJS (OpenQA.Selenium.PhantomJS) 来提取 svg，然后使用任何转换机制来转换为 png/jpg

```
public IList<string> ExtractSVGs(string htmlFilePath)
    {
        IList<string> SVGs = new List<string>();
        foreach (string chart in getChartIds(htmlFilePath))
        {
            SVGs.Add(ExtractSVG(htmlFilePath, chart));
        }
        return SVGs;
    }

    private IList<string> getChartIds(string htmlFilePath)
    {
        IList<string> chartIds = new List<string>();
        string whatToFind = @"  ""renderTo"": """;
        foreach (string line in (System.IO.File.ReadLines(htmlFilePath)))
        {
            if (line.StartsWith(whatToFind))
                chartIds.Add("chart" + line.Substring(line.IndexOf(whatToFind) + whatToFind.Length, 32));
        }
        return chartIds;
    }

    private string ExtractSVG(string htmlFilePath, string chartId)
    {
        var driverService = PhantomJSDriverService.CreateDefaultService();
        driverService.HideCommandPromptWindow = true;
        driverService.LoadImages = true;
        driverService.ProxyType = "none";
        driverService.LocalToRemoteUrlAccess = true;
        driverService.WebSecurity = false; // may not be necessary

        using (var driver = new PhantomJSDriver(driverService))
        {
            driver.Navigate().GoToUrl(new Uri("file:///" + htmlFilePath));
            string svg = (string)driver.ExecuteScript(String.Format("return {0}.getSVG();", chartId), null);
            driver.Close();
            return svg;
        }
    } 
```

您可以将 JS 更改为直接导出为 png，但这需要链接到导出服务器（或让该代码在本地运行）。

附带说明一下，您可能需要根据构建 html 文件的方式更改要查找的内容。

# objective-c - iOS6 UIStoryboard 如何将 UICollectionReusableView 添加到 UICollectionView 对象？

> ID：15851054
> 
> 赞同：0
> 
> 时间：2013-04-06T12:39:01.233
> 
> 标签：objective-c, ipad, ios6, uicollectionview, uicollectionreusableview

我在使用 a 时遇到了一个愚蠢的问题`UICollectionView`- 我添加了一个 " `UICollectionReusableView`" 通过将它拖到`UICollectionView`顶部位置内。我期待这是一种可见的标题（类似于`UITableView`）。但是，当我运行该应用程序时，我看到一个高度等于单元格上可重用视图**的空白空间，但没有显示其他任何内容。**

**我还需要采取哪些其他步骤来确保在应用程序运行时显示在故事板中定义的可重用视图？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:00:44.030

您需要继承 UICollectionResusableView 并实现 -(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath{

# c - 尝试实现 LinkedList 时出现 C 分段错误

> ID：15851057
> 
> 赞同：1
> 
> 时间：2013-04-06T12:39:06.757
> 
> 标签：c, pointers, segmentation-fault

我有以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#define MAXN 100
typedef int key;
typedef int data;
struct list * createElement(key k, data info);

struct list{
    key k;
    data info;
    struct list *next;
};
struct list *L;
void init(key k, data info)
{
    L = createElement(k, info);
}
struct list * createElement(key k, data info)
{
    struct list *temp;
    temp = (struct list *) malloc(sizeof(*temp));
    temp->k = k;
    temp->info = info;
    return temp;
}
void insert(struct list * element)
{
    element->next = L;
    L = element;
}
void insertBefore(struct list * element, key k)
{
    struct list * currentElement = L;
    while(currentElement != NULL)
    {
        if(currentElement->k == k)
        {
            struct list *temp = currentElement;
            currentElement = element;
            currentElement->next = temp;
            return;
        }
        currentElement = currentElement->next;
    }

}
void insertAfter(struct list * element, key k)
{
    struct list * currentElement = L;
    while(currentElement != NULL)
    {
        if(currentElement->k == k)
        {
            struct list *temp = currentElement->next;
            currentElement->next = element;
            element->next = temp;
            return;
        }
        currentElement = currentElement->next;
    }
}
void deleteElement(struct list * element)
{
    struct list * currentElement = L;
    while(currentElement != NULL)
    {
        if(currentElement == element)
        {
            struct list * temp = currentElement;
            currentElement = currentElement->next;
            free(temp);
            return;
        }
        currentElement = currentElement->next;
    }
}
struct list * getElementByKey(key k) {
    printf("\n1");
    struct list *currentElement = L;
    printf("2");
    while(currentElement != NULL)
    {
        printf("3");
        if(currentElement->k == k)
        {
            printf("4");
            return currentElement;
        }
        printf("5");
        currentElement = currentElement->next;
        printf("6");
    }
    printf("There is no such element in the list");
}
struct list * pop()
{
    struct list *element = L;
    L = L->next;
    return element;
}
int main()
{
    init(0, 13);
    struct list * element = createElement(5, 155);
    insert(element);
    struct list * k = createElement(7, 243);
    insert(k);
    //insertBefore(createElement(3, 100), 5);
    printf("The first element value is: %d", pop()->info);
    printf("The second element value is: %d", pop()->info);
    printf("The  element value is: %d", getElementByKey(5)->info);

    return 0;
} 
```

因此，当我执行它时，调试器`if(currentElement->k == k)`在方法 getElementByKey 上的第 84 行给了我分段错误。我知道我正在尝试访问一个不存在的元素（因为我使用 pop 方法并且它删除了列表中的第一个元素）但它应该给我打印一条警告消息。似乎前一个元素的键有问题或者我没有注意到的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:13:20.503

在您的`createElement`函数中，您忘记将`next`指针初始化为 NULL。

```
struct list * createElement(key k, data info)
{
    struct list *temp;
    temp = (struct list *) malloc(sizeof(*temp));
    temp->k = k;
    temp->info = info;
    temp->next = NULL;
    return temp;
} 
```

因此，当您浏览列表时，它永远不会找到列表的最后一个元素，因为下一个指针永远不会等于 NULL，并且会进入内存中的某个随机位置，试图访问不允许这样做的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:51:37.447

删除元素（使用`deleteElement()`）时，您会错过重新初始化`L`。

* * *

`if(currentElement->k == k)`最有可能是由于`currentElement`引用了无效的内存地址而导致的段违规。当您测试是否针对`NULL`第 84 行之前的某些行时，只能是`currentElement`明确分配了无效地址或它指向的地址已被释放的情况。

从显示的代码中， `deleteElement()`我假设是后者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:18:57.887

两个问题

1）在创建元素（）

需要

`temp->next = NULL;`

2) 在 insertBefore()

不改变列表的指针

`currentElement = element;`

例如）

```
void insertBefore(struct list * element, key k)
{
    struct list * currentElement = L; //add case of L->k
    while(currentElement != NULL)
    {
        if(currentElement->next && currentElement->next->k == k)
        {
            element->next = currentElement->next;
            currentElement->next = element;
            return;
        }
        currentElement = currentElement->next;
    }
} 
```

# java - 如何按第二个字符排序？

> ID：15851059
> 
> 赞同：-6
> 
> 时间：2013-04-06T12:39:29.577
> 
> 标签：java, sorting, char

我是 Java 的新手，我必须为研究所完成这项任务

我有一个代码，它必须按字母按第二个字符对输入字符串中的单词进行排序。那么，谁能告诉我如何进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:48:33.563

如果您只想按秒排序*，*则`char`只需使用自定义比较器：

```
public static void main(String[] args) throws IOException, ClassNotFoundException {
    final List<String> strings = new ArrayList<>();
    strings.add("adaaa");
    strings.add("bbaaa");
    strings.add("dcaaaa");
    strings.add("zaaaaa");
    Collections.sort(strings, new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            return Character.compare(o1.charAt(1), o2.charAt(1));
        }
    });
    System.out.println(strings);
} 
```

输出：

```
[zaaaaa, bbaaa, dcaaaa, adaaa] 
```

# haskell - GHC -ddump-splices 选项——Haskell 模板

> ID：15851060
> 
> 赞同：18
> 
> 时间：2013-04-06T12:39:53.450
> 
> 标签：haskell, ghc, template-haskell

我正在关注 Yesod 的书，其中指出：

> 但是通过使用 -ddump-splices GHC 选项，我们可以立即查看生成的代码。它的一个非常干净的版本是：

我该怎么做？我试过用 编译我的文件`ghc -XTemplateHaskell -ddump-splices Page.hs`，它留下的目录如下：

`Page Page.hi Page.hs Page.hs~ Page.o`

然而，这些文件都不包含由 Template Haskell 生成的中间代码。

[http://www.yesodweb.com/book/basics](http://www.yesodweb.com/book/basics)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T12:59:05.550

同时，行为发生了变化，`-ddump-to-file`除了标志之外的`-ddump-splices`标志会导致将拼接写入文件，有关更多详细信息，请参阅当前（GHC 8.2.1）文档的[第 9.26 节。](https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/glasgow_exts.html#template-haskell)

* * *

在旧版本的 GHC 上（我没有检查行为改变的确切版本），`-ddump-splices`工作方式不同：

该`-ddump-splices`选项使 GHC 将拼接转储到 stderr。不幸的是，该`-ddump-to-file`标志不会影响拼接（我不知道这是有更深层次的原因还是只是疏忽），因此您需要捕获 stderr 输出以保存拼接以供以后调查，

```
ghc -XTemplateHaskell -ddump-splices Page.hs 2> Page.dump-splices 
```

在足够类似 bash 的外壳上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-06-16T12:39:00.050

在大型项目中，对所有模块都这样做是有问题的。幸运的是，您可以按模块转储。这也适用于 ghci。

您可以将此行添加到模块的顶部

```
{-# OPTIONS_GHC -ddump-splices #-} 
```

它将它转储到stderr。

# php - 将更多键和值放入现有数组

> ID：15851068
> 
> 赞同：0
> 
> 时间：2013-04-06T12:40:43.310
> 
> 标签：php

我有一个像这样的数组：

```
$json = array('error'=>true); 
```

但我想稍后可能会为此添加更多键和值。我微弱的知识尝试了这个：

```
$json .= array('something'=>'else'); 
```

这是行不通的。我发现`array_push`了，但这似乎只是为了推入新的值——而不是键。这是如何实现的，以便通过 2 个单独的声明，我最终得到相当于：

```
$json .= array('error'=>true,'something'=>'else'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:42:58.387

有很多方法可以做到这一点：

1.  `$json['keyname'] = 'something`

2.  `$json[] = 'something'`<- 数字递增键

3.  `array_push($json, 'value')`<- 同上

4.  `$json = array_merge($json, $some_other_array)`<- 将两个数组混合在一起

请记住，数组不是字符串

# objective-c - setSelectionFrom: to: anchor: highlight:? 的工作

> ID：15851069
> 
> 赞同：0
> 
> 时间：2013-04-06T12:41:02.710
> 
> 标签：objective-c, macos, cocoa

我想知道以下 NSMatrix 方法的工作原理。
我实际上并没有得到以下链接中提到的内容：

[NSMatrix - 以编程方式选择多个单元格](http://www.cocoabuilder.com/archive/cocoa/14308-nsmatrix-selecting-multiple-cells-programmatically.html)

```
[aButtonMatrix setSelectionFrom:2 to:3 anchor:2 highlight:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:50:35.810

`setSelectionFrom:to:anchor:highlight:`以编程方式选择一系列单元格。

一般来说，您应该首先检查 Apple 文档，而不是某些在您阅读时可能（并且经常）已经过时的第 3 方内容。

从文档：

*startPos、endPos 和 anchorPos 是单元格位置，从接收器左上角单元格的 0 开始，按行顺序排列。例如，顶行中的第三个单元格将是数字 2。*

*要模拟没有修饰键的拖动，取消选择之前选择的任何内容，请在调用此方法之前调用 deselectAllCells。*

# sql - 无法将意味着每组最大 N 的 SQL 转换为 HQL

> ID：15851072
> 
> 赞同：0
> 
> 时间：2013-04-06T12:41:13.490
> 
> 标签：sql, hibernate, hql, greatest-n-per-group

我在 Oracle 中有两个表，即`product`和`product_image`. `product`顾名思义，它们具有从到的一对多关系`product_image.`

`product`实体：

```
@Entity
@Table(name = "PRODUCT", catalog = "", schema = "WAGAFASHIONDB")
public class Product  implements java.io.Serializable
{
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "PROD_ID", nullable = false, precision = 35, scale = 0)
    @SequenceGenerator(name = "productIdSequence", sequenceName = "PRODUCT_SEQ", allocationSize=1, initialValue=1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "productIdSequence")
    private Long prodId;
    @Column(name = "PROD_NAME", length = 50)
    private String prodName;
    @Column(name = "PROD_CODE", length = 50)
    private String prodCode;
    @Lob
    @Column(name = "PROD_DESC")
    private String prodDesc;
    @Basic(optional = false)
    @Column(name = "MARKET_PRICE", nullable = true, precision = 35, scale = 2)
    private BigDecimal marketPrice;
    @Basic(optional = false)
    @Column(name = "SALE_PRICE", nullable = true, precision = 35, scale = 2)
    private BigDecimal salePrice;
    @Column(name = "PROD_FEATURED")
    private Short prodFeatured;
    @Column(name = "EXPRESS_DELIVERY")
    private Short expressDelivery;
    @Basic(optional = false)
    @Column(name = "PROD_WEIGHT", nullable = true, precision = 35, scale = 2)
    private BigDecimal prodWeight;
    @Column(name = "PROD_OCCASSION", length = 50)
    private String prodOccassion;
    @Basic(optional = false)
    @Column(name = "QTY_AVAILABLE", nullable = true)
    private BigInteger qtyAvailable;
    @Column(name = "LATEST")
    private Short latest;
    @Column(name = "VISIBLE")
    private Short visible;
    @JoinTable(name = "PRODUCT_SIZE", joinColumns = {
        @JoinColumn(name = "PROD_ID", referencedColumnName = "PROD_ID")}, inverseJoinColumns = {
        @JoinColumn(name = "SIZE_ID", referencedColumnName = "SIZE_ID")})
    @ManyToMany(fetch = FetchType.LAZY)
    private Set<SizeTable> sizeTableSet;
    @ManyToMany(mappedBy = "productSet", fetch = FetchType.LAZY)
    private Set<Colour> colourSet;
    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<Measurement> measurementSet;
    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<Wish> wishSet;
    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<Cart> cartSet;

    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<ProductImage> productImageSet;             //<--------

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "product", fetch = FetchType.LAZY)
    private Set<OrderItem> orderItemSet;
    @JoinColumn(name = "SUB_CAT_ID", referencedColumnName = "SUB_CAT_ID")
    @ManyToOne(fetch = FetchType.LAZY)
    private Subcategory subCatId;
    @JoinColumn(name = "FABRIC_ID", referencedColumnName = "FABRIC_ID", nullable = false)
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private Fabric fabricId;
    @JoinColumn(name = "BRAND_ID", referencedColumnName = "BRAND_ID")
    @ManyToOne(fetch = FetchType.LAZY)
    private Brand brandId;
    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<Inquiry> inquirySet;
    @OneToMany(mappedBy = "prodId", fetch = FetchType.LAZY)
    private Set<Rating> ratingSet;
} 
```

`ProductImage`实体：

```
@Entity
@Table(name = "PRODUCT_IMAGE", catalog = "", schema = "WAGAFASHIONDB")
public class ProductImage  implements java.io.Serializable
{
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "PROD_IMAGE_ID", nullable = false, precision = 35, scale = 0)
    @SequenceGenerator(name = "productIdSequence", sequenceName = "PRODUCT_IMAGE_SEQ", allocationSize=1, initialValue=1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "productIdSequence")
    private Long prodImageId;
    @Lob
    @Column(name = "PROD_IMAGE")
    private String prodImage;
    @JoinColumn(name = "PROD_ID", referencedColumnName = "PROD_ID")

    @ManyToOne(fetch = FetchType.LAZY)
    private Product prodId;           //<--------------
} 
```

我只需要获取`prodId`每组行（实际上是每组产品）的最大值的行，`ProductImage`即每组最大的 N 行。

Oracle 原生 SQL 可以如下构造。

```
SELECT pi.prod_image_id, pi.prod_id, pi.prod_image 
FROM product_image pi 
INNER JOIN (select max(pi.prod_image_id) AS prod_image_id, pi.prod_id FROM product_image pi GROUP BY pi.prod_id) prod_image 
ON pi.prod_image_id=prod_image.prod_image_id 
```

这完全符合预期，但我无法将此 SQL 转换为 HQL。尝试在`createQuery()`方法中直接作为 HQL 执行会导致`QuerySyntexException`在第一个左括号中出现意外的标记。你能给我一个将这个 SQL 转换为 HQL 的提示吗？

* * *

**编辑：**

像下面这样的一些问题还没有回答，因为它实际上意味着：

*   [将休眠用于复杂查询的最佳方式，例如每组前 n 个](https://stackoverflow.com/q/618951)
*   [hql 查询从每个组中检索前 n 个](https://stackoverflow.com/q/4264528)
*   [将 HQL 与 MySQL 一起使用，如何在 group by 之前对结果集进行排序，以便选择正确的记录？](https://stackoverflow.com/q/7561868)

我认为，没有办法通过 HQL 在 Hibernate 中实现这一点。我可能需要使用一些 DTO 类来打破这个 SQL 以适应两个或多个 HQL 语句。如果可以像上面的SQL那样通过单个HQL语句，那么请不要忘记这里的答案，因为我的应用程序中有**太多**地方有这样的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:46:23.887

看看这个：

```
select 
    pi.prodImageId, 
    pi.prodId 
from 
    ProductImage pi 
where 
    pi.prodImageId in (
    select max(pis.prodImageId)
    from Product p
        inner join p.productImageSet pis
    group by p.prodId
) 
```

翻译为：

```
select
   productima0_.prodImageId as col_0_0_,
   productima0_.prodId_prodId as col_1_0_,
   product1_.prodId as prodId18_,
   product1_.name as name18_ 
from
   ProductImage productima0_ 
inner join
   Product product1_ on productima0_.prodId_prodId=product1_.prodId 
where
   productima0_.prodImageId in (
      select max(productima3_.prodImageId) 
      from 
         Product product2_ inner join ProductImage productima3_ on product2_.prodId=productima3_.prodId_prodId 
      group by product2_.prodId
   ) 
```

我猜这就是你想要的？

# google-drive-api - Google Drive Realtime API 是否有问题跟踪器？

> ID：15851074
> 
> 赞同：3
> 
> 时间：2013-04-06T12:41:27.893
> 
> 标签：google-drive-api, google-drive-realtime-api

我遇到[了 Google Drive SDK 的实时 API 的](https://developers.google.com/drive/realtime/)错误，我想知道是否有问题跟踪器，我可以在其中检查该问题是否已注册并最终填写一个新问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:45:56.777

Google Drive 服务没有官方的错误跟踪器。

有这个页面，它列出了使用 Google Drive 遇到的已知问题：

```
http://support.google.com/drive/bin/static.py?hl=en&page=known_issues.cs 
```

还有另一个链接到 Google Drive 服务论坛的链接，您可以在其中实际*报告*问题（查看建议的类别）：

```
https://productforums.google.com/forum/m/#!forum/drive 
```

# google-maps - Drupal7 GMAP 模块，显示和隐藏某些标记

> ID：15851077
> 
> 赞同：1
> 
> 时间：2013-04-06T12:41:37.407
> 
> 标签：google-maps, drupal-7, views, google-maps-markers

我在 Drupal7 上为谷歌地图使用 GMAP 模块。我将它与 Views 模块一起使用。已使用内容类型的标记创建地图视图。一切正常。

现在，我希望能够基于某些类别或任何节点字段显示和隐藏一些标记（不是全部）。如何在视图之外操作（仅显示和隐藏其中一些）标记？或者也许有可能在视野范围内做到这一点？

谢谢。

# android - 让 MediaPlayer 反应更快？

> ID：15851079
> 
> 赞同：0
> 
> 时间：2013-04-06T12:41:42.227
> 
> 标签：android, media-player

我制作了一个播放某些声音的 Android 应用程序。我想停止一个声音，如果下一个正在播放并且我成功地做到了

```
 public     void w1() throws IllegalArgumentException, SecurityException, IllegalStateException, IOException{
         mediaPlayerW.reset();
mediaPlayerW.setDataSource(MainActivity.this, Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.w1));
 mediaPlayerW.prepare();
mediaPlayerW.start();}

    public void onClick(View f) {

if(f == button1) 
            {w1();}} 
```

[其他方法称为w2；w3; w4 (...)] 但让我们只处理一种声音。

到目前为止，这有效，每个按钮声音都会“窒息”自己（并从头开始再次播放）并且他阻止其他人，所以总是只播放“新”声音。

我现在遇到的问题是，如果我按下一个按钮，我会有一点中断（约 100 毫秒）。对于音乐应用程序来说，即使是 40 毫秒也太高了。是否可以在缓存中预加载声音或其他东西？我认为 .reset() 花费了大部分时间..

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:27:53.053

好的，我发现这个延迟问题对于旧版本无法解决，但是从 Android 4.1 开始，有另一个音频驱动程序效果更好。我尝试使用我的 gTab 2.0，反馈非常快。

您不必设置任何不同的东西，4.1 中的新音频内容与之前的一样，但要快得多

# android - 无法更新我的数据库表

> ID：15851081
> 
> 赞同：0
> 
> 时间：2013-04-06T12:41:53.977
> 
> 标签：android, database, sql-update

如果用户想要更改密码，我需要更新我的密码表......我该怎么做......我自己尝试过，但应用程序意外停止......

这是**changepassword.java**

```
public void insertvalues()
{
    prefEditor.putString("Oldpin", Oldpin);
    prefEditor.putString("Newpin", Newpin);
    prefEditor.putString("Confirm", Confirm);

    prefEditor.commit();

    try
    {

        WayDataBase way=new WayDataBase(getApplicationContext());

        way.updatePin(Newpin,Oldpin);

    } 
```

这是**updatePin**函数

```
public void updatePin(String newpin,String oldpin)
{
    openOrCreateDatabase();
    db.execSQL("UPDATE"+pinTable+"set Pin="+newpin+"where Pin="+oldpin+");");

    closeDatabase();
} 
```

我在这里做错了什么？请解释一下..我似乎无法弄清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:57:06.073

您下面的代码似乎缺少空格

```
public void updatePin(String newpin,String oldpin)
{
   openOrCreateDatabase();
   db.execSQL("UPDATE"+pinTable+"set Pin="+newpin+"where Pin="+oldpin+");");

   closeDatabase();
} 
```

如果你有这样的情况会更好吗？

```
public void updatePin(String newpin,String oldpin)
{
   openOrCreateDatabase();
   db.execSQL("UPDATE "+pinTable+" SET Pin='"+newpin+"' where Pin='"+oldpin+"'");

   closeDatabase();
} 
```

如果您还观察到除了我添加的空格之外，如果您的数据库中的 Pin 字段/列是字符串或文本数据类型，我还会添加单引号。否则，如果它是一个数字，比如一个整数，那么只需再次删除单引号，如下所示。

```
public void updatePin(String newpin,String oldpin)
{
   openOrCreateDatabase();
   db.execSQL("UPDATE "+pinTable+" SET Pin= "+newpin+" where Pin="+oldpin);

   closeDatabase();

} 
```

另外，我不知道这是否是您的错误输入。但是是否需要加“）；” 在 oldpin+ 之后？顺便说一句，建议将 sql 字符串分隔在一个单独的变量中。通过这种方式，您可以轻松地调试字符串本身的任何错误，如下面的错误。

```
public void updatePin(String newpin,String oldpin)
{
   String sql = "UPDATE "+pinTable+" SET Pin= "+newpin+" where Pin="+oldpin;
   openOrCreateDatabase();
   db.execSQL(sql);

   closeDatabase();

} 
```

# c++ - 启动和停止包含内核线程的守护进程

> ID：15851082
> 
> 赞同：2
> 
> 时间：2013-04-06T12:41:59.990
> 
> 标签：c++, service, pthreads, init.d, daemons

我想运行一个在 openSUSE 12 上使用 POSIX 线程作为守护进程的 c++ 程序，并且能够使用基于此模板的普通 init.d 脚本作为服务启动、停止和重新启动它：[http://www.novell .com/coolsolutions/feature/15380.html](http://www.novell.com/coolsolutions/feature/15380.html)。

然而事实证明 startproc 和 killproc 不适合处理内核线程（显然是 POSIX 线程）。我设法用 startproc 启动程序，但它没有被 killproc 识别和杀死。rc_status 在运行 startproc 时返回红色“failed”，即使程序实际已启动，并且在运行 killproc 时返回绿色“done”，即使它没有杀死进程。

有没有在 openSUSE 12 上使用 startproc/killproc 的替代方法？如果一个人用一个简单的 nohup 启动服务，那么它是如何正常停止的呢？只是杀了它？在那种情况下，获取“kill”所需的pid的好方法是什么？

# objective-c - 从应用委托推送视图控制器

> ID：15851083
> 
> 赞同：0
> 
> 时间：2013-04-06T12:42:01.620
> 
> 标签：objective-c, xcode, apple-push-notifications

基本上，我正在使用推送通知，并且正在接收带有警报字符串和通道字符串的自定义 JSON 有效负载。该通道将告诉我的应用程序在打开通知时加载哪个视图。

唯一的问题是，这只是理论...

我不知道打开通知时处理视图推送的选项是什么。

我可以在读取 JSON 的同时从我的应用程序委托中执行此操作吗？

否则，我能做什么？

这是唯一的问题，其他一切都已排序，我只需要根据频道处理视图加载。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:05:00.707

然后使用以下代码以 ViewController 的匿名名称加载您的视图控制器

第 1 步：使用 JSON 中的匿名名称创建 ViewController

```
UIViewController* object = (UIViewController*)[[NSClassFromString(@"ViewController") alloc] initWithNibName:@"ViewControllerNibName" bundle:nil]; 
```

第 2 步：使用 ViewController 创建导航控制器

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:object]; 
```

第 3 步：将导航控制器添加到窗口

```
self.window.rootViewController = self.navController; 
```

# php - 使用 CakePHP 进行 MySQL LIKE 搜索

> ID：15851089
> 
> 赞同：1
> 
> 时间：2013-04-06T12:42:42.183
> 
> 标签：php, cakephp, search, model, relationships

我正在尝试为我的 CakePHP 应用程序实现简单的搜索功能。我希望用户能够根据成员的名字、姓氏和成员拥有的技能进行搜索。

我的模型是这样关联的：

```
User ---hasOne---> Profile ---HABTM---> Skill 
```

所以一个用户有一个配置文件，一个配置文件可以有很多技能，一个技能可以属于多个配置文件。这些关系设置正确。

通过这样做，我设法使基本的名字搜索工作：

```
public function memberList() {
    if(isset($this->request->data['User']['query'])) {
        // The user is searching, change the conditions of the retrieval
        $q = $this->request->data['User']['query'];

        $this->paginate = array(
            'conditions' => array('Profile.firstname LIKE' => "%$q%")
        );
    }

    // Retrieve member list
    $this->set('users', $this->paginate('User'));
} 
```

但是，有两件事我需要帮助。一个是如何`OR`在查询中做一个。因为我想搜索名字和姓氏，所以我需要做`Profile.firstname LIKE %$q% OR Profile.lastname LIKE %$q%`. 如何使用`conditions`分页调用的参数来实现这一点？

第二个问题是按用户技能搜索。因为与而不是`Skill`有关系，所以我没有得到任何由我的模型的 find 调用返回的技能。有没有办法可以改变这一点，以便返回用户的个人资料的技能？如果我走得那么远，我将如何将它与名字和姓氏搜索结合起来而不需要调用两次？`Profile``User``User``$this->paginate`

感谢您的任何帮助！

# android - 为什么我的 android 微调器是透明的？

> ID：15851095
> 
> 赞同：0
> 
> 时间：2013-04-06T12:43:11.243
> 
> 标签：android, android-layout

我是 Android 新手……我的微调器有问题。我有一个以图像为背景的活动和一个带有项目（年份列表）的微调器，该项目由代码使用适配器加载。问题是当微调器关闭时，它是透明的，除了文本和右下角三角形（黑色）。如果我设置微调器背景颜色，右下角消失，微调器变得非常类似于 textView（对用户来说太困惑了！）。

如果我更改活动样式（例如“黑色”），在图形视图中，微调器会变成我想要的：浅灰色和右下角。

但是在运行阶段，它又变得透明了。

[截屏](http://www.flickr.com/photos/27924376@N06/8624765886/)

为什么？建议？

AndroidManifest.xml

```
 <uses-sdk
       android:minSdkVersion="8"
       android:targetSdkVersion="17" /> 
```

Spinner 活动中的 XML

```
 <Spinner
            android:id="@+id/spnYear"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/btnScan"
            android:layout_marginBottom="92dp"
            android:layout_marginRight="22dp"
            android:layout_toLeftOf="@+id/btnScan"
            android:alpha="1"
            android:drawSelectorOnTop="true"/> 
```

Spinner 初始化的 Java 活动代码

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, Years);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spnYear.setAdapter(adapter);
spnYear.setSelection(spnYear.getCount() - 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:41:49.543

将此添加`android:cacheColorHint="#00000000"`到您的微调器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:47:27.233

您可以使用您的`custome xml`布局文件并在您的`Adapter`

```
myfile.xml

<?xml version="1.0" encoding="utf-8"?>
<TextView  
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textname"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:textSize="16sp"
    android:gravity="left"  
    android:textStyle="bold"
    android:textColor="#449def"         
    android:padding="5dip"/>

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.myfile, Anni2); 
```

# c - 从外部改变变量

> ID：15851097
> 
> 赞同：2
> 
> 时间：2013-04-06T12:43:17.923
> 
> 标签：c

在`main()`函数中，我初始化了几个变量（`int`和`int*`数组）。然后我打印出一些东西并从控制台读取它们`scanf`。

我想将此功能放入一些外部函数中，以便主函数如下所示：

```
int main()
{
    int n = 0, x = 0;
    int *arr = NULL;    
    load(&n, &x, &arr);
} 
```

在`load()`函数调用之后，我希望变量与在函数内部设置的完全一样`load()`。我怎样才能做到这一点？

第二个问题，只是出于好奇：

```
/**
 * Description of the function
 *
 * @param int n Foo
 * @param int x Bar
 * @param int *arr Does something
 */
void load(int n, int x, int *arr)
{
    // something
} 
```

该文档在 C 编码中有用吗？这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:48:16.063

您正在传递两个 int 和一个指针（第三个参数）的地址，您应该在指向 int 的指针（一个`*`）中接收前两个参数，并在指向 int 的指针（两个`**`）的指针中接收第三个参数：

```
void load(int* n, int* x, int **arr){
//           ^       ^ one*     ^ two **
    *n = 10;
    *x = 9;
} 
```

在 load 函数中，您可以将值分配给`*n`and`*x`因为两者都指向有效的内存地址，但您**不能`**arr = 10`**仅仅因为`arr`不指向任何内存（*指向 NULL*）所以首先您必须首先为 分配内存`*arr`，喜欢：

```
void load(int* n, int* x, int **arr){
    *n = 10;
    *x = 9;
    *arr = malloc(sizeof(int));
    **arr = 10;
} 
```

> **该文档在 C 编码中有用吗？这是一个好习惯吗？**

是的

但有时我会通过以下方式记录我的函数参数：

```
void load(int n,     // is  a Foo
         int x,      // is a  Bar
         int **arr){ // do some thing 
    // something
} 
```

参考资料：[供文档练习](https://softwareengineering.stackexchange.com/questions/40666/help-finding-good-documentation-for-c-c)

**编辑**正如您评论的那样，请像下面我写的那样，它不会给出任何错误/因为`malloc()`.

```
#include<stdio.h>
#include<stdlib.h>
void load(int* n, int* x, int **arr){
    *n = 10;
    *x = 9;
    *arr = malloc(sizeof(int));
    **arr = 10;
    printf("\n Enter Three numbers: ");
    scanf("%d%d%d",n,x,*arr);
}
int main(){
    int n = 0, x = 0;
    int *arr = NULL;    
    load(&n, &x, &arr);
    printf("%d %d %d\n", n, x, *arr);
    free(arr);
    return EXIT_SUCCESS;
} 
```

编译并运行如下：

```
~$ gcc ss.c -Wall
:~$ ./a.out 

 Enter Three numbers: 12 13 -3
12 13 -3 
```

正如 OP 评论的那样：

> “从 void* 到 int* 的无效转换”当我将其更改为*arr = malloc(sizeof(int)* (*n));

[malloc() 的语法：](http://wiki.answers.com/Q/What_is_SYNTAX_of_malloc_and_calloc_in_C_language)

```
void *malloc(size_t size); 
```

malloc() 返回`void*`和`*arr`类型是`int*`编译器消息的原因，因为类型不同：`"Invalid convertion from void* to int*"`

但是我避免在 malloc() 时进行强制转换，因为：[我会强制转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858)（*阅读 Unwind 的回答*）

# c# - 多系列 MSChart

> ID：15851098
> 
> 赞同：1
> 
> 时间：2013-04-06T12:43:24.340
> 
> 标签：c#, winforms, mschart

我是 MSChart 的新手，下面的代码适用于多系列专栏。但我知道应该有一种更短的方法来显示多系列，而无需创建两个数据表，或者使用很少的代码（如使用 DataBindTable 或 DataBindCrossTable）更好。

有没有更短的方法来做我在下面做的事情？顺便说一句，我想做的是显示给定学年有多少学生注册。

```
String sql, sql2;

sql = @"SELECT Major, SchoolYear,  COUNT(*) as TotalStudents 
                FROM StudentList 
                WHERE Major='AFT' 
                GROUP BY Major, Schoolyear";

sql2 = @"SELECT Major, SchoolYear,  COUNT(*) as TotalStudents 
                FROM StudentList 
                WHERE Major='AFT' 
                GROUP BY Major, Schoolyear";

        SqlConnection con = new SqlConnection(connString);

        con.Open();
        SqlDataAdapter dta = new SqlDataAdapter(sql, con);
        DataSet dst = new DataSet();
        DataTable dt;
        dta.Fill(dst);
        dt = dst.Tables[0];

        chart1.Width = 900;
        chart1.ChartAreas[0].AxisX.Title = "School Year";
        chart1.ChartAreas[0].AxisY.Title = "Enrollment";

        chart1.Series[0].Name = dt.Rows[0][0].ToString();
        chart1.Series[0].XValueMember = "SchoolYear";
        chart1.Series[0].YValueMembers = "TotalStudents";
        chart1.Series[0].Points.DataBindXY(dt.CreateDataReader(),"SchoolYear", dt.CreateDataReader(), "TotalStudents");

        dta = new SqlDataAdapter(sql2, con);
        dst = new DataSet();
        dta.Fill(dst);
        dt = dst.Tables[0];
        chart1.Series.Add(dt.Rows[0][0].ToString());
        chart1.Series[1].XValueMember = "SchoolYear";
        chart1.Series[1].YValueMembers = "TotalStudents";
        chart1.Series[1].Points.DataBindXY(dt.CreateDataReader(), "SchoolYear", dt.CreateDataReader(), "TotalStudents"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T08:05:08.703

你会在下面试试吗？

```
String sql, sql2;

sql = @"SELECT Major, SchoolYear,  COUNT(*) as TotalStudents 
                FROM StudentList 
                WHERE Major='AFT' 
                GROUP BY Major, Schoolyear";

        SqlConnection con = new SqlConnection(connString);

        con.Open();
        SqlDataAdapter dta = new SqlDataAdapter(sql, con);
        DataSet dst = new DataSet();
        DataTable dt;
        dta.Fill(dst);
        dt = dst.Tables[0];

        chart1.DataSource = dt;

        chart1.Width = 900;
        chart1.ChartAreas["abc"].AxisX.Title = "School Year";
        chart1.ChartAreas["abc"].AxisY.Title = "Enrollment";

        chart1.Series["xyz"].Name = dt.Rows[0][0].ToString();
        chart1.Series["xyz"].XValueMember = "SchoolYear";
        chart1.Series["xyz"].YValueMembers = "TotalStudents";

        chart1.DataBind(); 
```

HTML：

```
 <asp:Chart ID="chart1" runat="server" ImageStorageMode="UseImageLocation" ImageLocation="ChartPic_#SEQ(300,3)">
                <ChartAreas>
                    <asp:ChartArea Name="abc">
                    </asp:ChartArea>
                </ChartAreas>
            </asp:Chart> 
```

# wordpress - 如何获取当前博客的ID

> ID：15851099
> 
> 赞同：1
> 
> 时间：2013-04-06T12:43:30.980
> 
> 标签：wordpress

我有一个页面名称“博客”，它包含一个帖子列表。

在设置->阅读->“帖子页面：”我选择了“博客”。

如何从模板中获取博客的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:35:37.397

要获取在设置->阅读->“帖子页面：”中选择的页面的 ID，请尝试以下代码行：

```
$frontpost_id = get_option('page_for_posts'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:02:21.457

如果您必须选择“博客”作为帖子页面，则它必须是您之前在“页面”部分中创建的页面。

要获取当前页面的 ID，您只需在进入页面模板中的帖子循环之前执行 $post->ID 即可。首先你做一个`global $post`。像这样：

```
<?php
global $post;
$current_page_id = $post->ID;
// Whatever else you're going to do
?> 
```

# c++ - 如何打印这种类型的map的值 map<map< set< int > ,int >, int> mymap[2]

> ID：15851101
> 
> 赞同：-2
> 
> 时间：2013-04-06T12:43:40.393
> 
> 标签：c++, map, stl, iterator, set

我声明了一个这样的stl地图

```
 map< map< set< int > ,int >, int> mymap[2] 
```

我声明了这样的迭代器

```
 set < int > ::iterator it3;
         map< map< set< int > ,int >, int> :: iterator it1;
         map< set< int > ,int > :: iterator it2; 
```

我写了一些这样的东西

```
 for(it1=mymap[0].begin();it1!=mymap[0].end();it1++)
    {
            for(it2=(it1->first).begin();it2!=(it1->first).end();it2++)
            {
                  for(it3=(it2->first).begin();it3!=(it2->first).end();it3++)
                  {
                    cout<<*it3<<" "<<it1->second<<endl;
                  }
            }           
    }
} 
```

我遇到了一些奇怪的错误，任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:03:29.853

您的代码中有很多问题。最微不足道的：在声明地图后您缺少分号；此外，最后还有一个额外的支架。

最后，map 的键是`const`值，当调用`begin()`容器时`const`，你得到的是 a `const_iterator`，而不是`iterator`。以下是您应该如何修复程序：

```
#include <map>
#include <set>
#include <iostream>

using std::map;
using std::set;
using std::cout;
using std::endl;

int main()
{
    map< map< set< int > ,int >, int> mymap[2];
    //                                        ^ MISSING SEMICOLON HERE

    map< map< set< int > ,int >, int> :: iterator it1;

    map< set< int > ,int > ::const_iterator it2;
    //                       ^^^^^^^^^^^^^^ <== MAP KEYS ARE CONST VALUES!
    set < int > ::const_iterator it3;
    //            ^^^^^^^^^^^^^^ <== MAP KEYS ARE CONST VALUES!

    for(it1=mymap[0].begin();it1!=mymap[0].end();it1++)
    {
        for(it2=(it1->first).begin();it2!=(it1->first).end();it2++)
        {
              for(it3=(it2->first).begin();it3!=(it2->first).end();it3++)
              {
                std::cout<<*it3<<" "<<it1->second<<endl;
              }
        }
    }
    // } <== EXTRA BRACE HERE
} 
```

另请注意，在 C++11 中，您可以使用 来简化事情`auto`，这样可以避免您遇到这种麻烦：

```
int main()
{
    map< map< set< int > ,int >, int> mymap[2];
    for (auto it1 = mymap[0].begin(); it1 != mymap[0].end(); it1++)
    //   ^^^^
    {
        for (auto it2 = (it1->first).begin(); it2 != (it1->first).end(); it2++)
        //   ^^^^
        {
              for (auto it3=(it2->first).begin(); it3!=(it2->first).end(); it3++)
              //   ^^^^
              {
                  std::cout<<*it3<<" "<<it1->second<<endl;
              }
        }
    }
} 
```

基于范围的`for`循环使这更加简单：

```
int main()
{
    map< map< set< int >, int >, int> mymap[2];
    for (auto const& m : mymap[0])
    {
        for (auto const& s : m.first)
        {
            for (auto const& e : s.first)
            {
                std::cout << e << " " << m.second << endl;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-12-23T11:44:23.867

<int name="ModChaSendBKColor" value="-4003595"/>

# xcode - xcconfig 文件——设置一个带有前导空格的变量值？

> ID：15851102
> 
> 赞同：3
> 
> 时间：2013-04-06T12:43:45.410
> 
> 标签：xcode, unix, xcconfig

假设我想将环境变量 BAR 的值定义为“foo”，不带引号。如果我的 .xcconfig 文件有该行

```
BAR = foo 
```

这会将其设置为“foo”。如果它有线也一样

```
BAR =  foo 
```

有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T01:52:36.723

我找到了一种方法：

```
EMPTY_STRING =
BAR = $(EMPTY_STRING) foo // the empty string protects leading space. 
```

# iphone - NSRangeException 随机崩溃应用程序

> ID：15851103
> 
> 赞同：0
> 
> 时间：2013-04-06T12:43:47.143
> 
> 标签：iphone, ios, xml, nsrangeexception

1.  我的应用程序在`_storeArray`.
2.  在 viewDidLoad 中，有一个`[self loadUrl]`解析 xml 文件然后添加字典的方法`[_storeArray addObject:dictionary]`；
3.  当轮播 reusingView 以某种方式首先调用时，就会发生崩溃`[self loadUrl]`。
4.  我已经添加了，`if(_storeArray)`但它仍然崩溃。

这是一个例外：

```
2013-04-06 09:33:35.254 Semhora[7347:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array' 
```

这是代码：

```
- (void)loadURL:(NSString *)newURL{

    // Create a success block to be called when the asyn request completes
    TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
        // If TBXML found a root node, process element and iterate all children
        if (tbxmlDocument.rootXMLElement)
        {
            // Obtain root element
            TBXMLElement * root = tbxml.rootXMLElement;
            if (root)
            {
                [_storeArray removeAllObjects];
                TBXMLElement * elem_PLANT = [TBXML childElementNamed:@"principal" parentElement:root];
                while (elem_PLANT !=nil)
                {
                    TBXMLElement * elem_title = [TBXML childElementNamed:@"title" parentElement:elem_PLANT];
                    NSString *titleName = [TBXML textForElement:elem_title];

//                    TBXMLElement * elem_artist = [TBXML childElementNamed:@"text" parentElement:elem_PLANT];
//                    NSString *artistName = [TBXML textForElement:elem_artist];

                    TBXMLElement * elem_thumb = [TBXML childElementNamed:@"thumb_url" parentElement:elem_PLANT];
                    NSString *thumbName = [TBXML textForElement:elem_thumb];

                    TBXMLElement * elem_photo1 = [TBXML childElementNamed:@"photo1" parentElement:elem_PLANT];
                    NSString *photo1Name = [TBXML textForElement:elem_photo1];

                    TBXMLElement * elem_photo2 = [TBXML childElementNamed:@"photo2" parentElement:elem_PLANT];
                    NSString *photo2Name = [TBXML textForElement:elem_photo2];

                    TBXMLElement * elem_photo3 = [TBXML childElementNamed:@"photo3" parentElement:elem_PLANT];
                    NSString *photo3Name = [TBXML textForElement:elem_photo3];

                    TBXMLElement * elem_photo4 = [TBXML childElementNamed:@"photo4" parentElement:elem_PLANT];
                    NSString *photo4Name = [TBXML textForElement:elem_photo4];

                    TBXMLElement * elem_photo5 = [TBXML childElementNamed:@"photo5" parentElement:elem_PLANT];
                    NSString *photo5Name = [TBXML textForElement:elem_photo5];

                    NSDictionary *dictionary = [[NSDictionary alloc]initWithObjects:@[titleName, thumbName, photo1Name, photo2Name, photo3Name, photo4Name, photo5Name] forKeys:@[@"title", @"thumb_url", @"photo1", @"photo2", @"photo3", @"photo4", @"photo5",]];
                    elem_PLANT = [TBXML nextSiblingNamed:@"principal" searchFromElement:elem_PLANT];
                    [_storeArray addObject:dictionary];
                   [self startLoading:dictionary];
                     [[NSOperationQueue mainQueue] addOperationWithBlock:^{ [_carousel reloadData]; }];
                }

            }

        }

    };

    // Create a failure block that gets called if something goes wrong
    TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
        NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
    };

    // Initialize TBXML with the URL of an XML doc. TBXML asynchronously loads and parses the file.
    tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:newURL]
                               success:successBlock
                               failure:failureBlock];

}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    //create new view if no view is available for recycling
    if (view == nil)
    {
        FXImageView *imageView = [[FXImageView alloc] initWithFrame:CGRectMake(0, 0, 200.0f, 200.0f)];
        imageView.contentMode = UIViewContentModeScaleAspectFit;
        imageView.asynchronous = YES;
        imageView.reflectionScale = 0.5f;
        imageView.reflectionAlpha = 0.25f;
        imageView.reflectionGap = 10.0f;
        imageView.shadowOffset = CGSizeMake(0.0f, 2.0f);
        imageView.shadowBlur = 5.0f;
        imageView.cornerRadius = 10.0f;
        view = imageView;
    }

    //show placeholder
    ((FXImageView *)view).processedImage = [UIImage imageNamed:@"placeholder.png"];

    //set image

    NSLog(@"%@", _storeArray);
    if (_storeArray) {

        NSDictionary *tempdic = [_storeArray objectAtIndex:0];

        switch (index) {
            case 0:
                [(FXImageView *)view setImageWithContentsOfURL:[NSURL URLWithString:[tempdic objectForKey:@"photo1"]]];
                break;
            case 1:
                [(FXImageView *)view setImageWithContentsOfURL:[NSURL URLWithString:[tempdic objectForKey:@"photo2"]]];
                break;
            case 2:
                [(FXImageView *)view setImageWithContentsOfURL:[NSURL URLWithString:[tempdic objectForKey:@"photo3"]]];
                break;
            case 3:
               [(FXImageView *)view setImageWithContentsOfURL:[NSURL URLWithString:[tempdic objectForKey:@"photo4"]]];
                break;
            case 4:
                [(FXImageView *)view setImageWithContentsOfURL:[NSURL URLWithString:[tempdic objectForKey:@"photo5"]]];
                break;
            default:
                break;
        }
    }

    return view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:06:49.373

1.  当前的检查`_storeArray`仅检查变量是否存在，而不检查其中是否实际存在任何元素。但是在检查之后，您只是假设数组中有 1 个元素，而之前没有检查是否为真。

    所以改变这个

    ```
    if (_storeArray) { 
    ```

    对此：

    ```
    if (_storeArray && [_storeArray count] > 0) { 
    ```

2.  此外，您假设字典将具有`photo1`etc 的键。但如果没有，生成的 URL 将为空，因此视图也可能获得 nil URL。

    我会改变如下：

    ```
    NSDictionary *tempdic = [_storeArray objectAtIndex:0];
    NSString *tempObjKey = nil;

    switch (index) {
        case 0:
            tempObjKey = @"photo1";
            break;
        case 1:
            tempObjKey = @"photo2";
            break;
        case 2:
            tempObjKey = @"photo3";
            break;
        case 3:
            tempObjKey = @"photo4";
            break;
        case 4:
            tempObjKey = @"photo5";
            break;
        default:
            break;
    }

    if (tempObjKey && [tempdic objectForKey:tempObjKey])
        [(FXImageView *)view setImageWithContentsOfURL:[NSURL URLWithString:[tempdic objectForKey:tempObjKey]]];
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:07:28.410

我需要知道一件事，您的解析是否发生在这一切之前并成功返回一个数组（NSLog it），因为数组似乎是这里的问题。你不能直接取出第一个物体，你必须保持防御，所以做这样的事情。

```
 if (_storeArray) {

    if(_storeArray.count >0) {

    NSDictionary *tempdic = [_storeArray objectAtIndex:0];

    switch (index) { // all ur stmts }
    }} 
```

# ios - XPath 在 iOS 中使用 libxml2 提取具有多个标签的文本

> ID：15851104
> 
> 赞同：0
> 
> 时间：2013-04-06T12:44:00.560
> 
> 标签：ios, xpath, libxml2

在带有 libxml2 的 iOS 应用程序中，在解析这个 HTML 片段（它是大页面的一部分）时 -

```
...
<span class="ingredient">
    <span class="amount">
        <span class="value">500 </span> 
        <span class="type">g</span>
    </span>    
    <a href="...">bread flour</a> 
    or 
    <span class="ingredient">
        <span class="amount">
            <span class="value">500 </span> 
            <span class="type">g</span>
        </span>  
        <span class="name">
            <a href="...">all-purpose flour</a>
        </span>
    </span>
</span>
... 
```

我只需要提取文本：“500 克面包粉或 500 克通用面粉”。

`//span[@class="ingredient"]`XPath 查询的解析 NSDictionary 结果返回 -

```
{
    nodeAttributeArray =     (
                {
            attributeName = class;
            nodeContent = ingredient;
        }
    );
    nodeChildArray =     (
                {
            nodeAttributeArray =             (
                                {
                    attributeName = class;
                    nodeContent = amount;
                }
            );
            nodeChildArray =             (
                                {
                    nodeAttributeArray =                     (
                                                {
                            attributeName = class;
                            nodeContent = value;
                        }
                    );
                    nodeContent = 500;
                    nodeName = span;
                },
                                {
                    nodeAttributeArray =                     (
                                                {
                            attributeName = class;
                            nodeContent = type;
                        }
                    );
                    nodeContent = g;
                    nodeName = span;
                }
            );
            nodeContent = "";
            nodeName = span;
        },
                {
            nodeAttributeArray =             (
                                {
                    attributeName = href;
                    nodeContent = "http://www.food.com/library/flour-64";
                }
            );
            nodeContent = "bread flour";
            nodeName = a;
        },
                {
            nodeAttributeArray =             (
                                {
                    attributeName = class;
                    nodeContent = ingredient;
                }
            );
            nodeChildArray =             (
                                {
                    nodeAttributeArray =                     (
                                                {
                            attributeName = class;
                            nodeContent = amount;
                        }
                    );
                    nodeChildArray =                     (
                                                {
                            nodeAttributeArray =                             (
                                                                {
                                    attributeName = class;
                                    nodeContent = value;
                                }
                            );
                            nodeContent = 500;
                            nodeName = span;
                        },
                                                {
                            nodeAttributeArray =                             (
                                                                {
                                    attributeName = class;
                                    nodeContent = type;
                                }
                            );
                            nodeContent = g;
                            nodeName = span;
                        }
                    );
                    nodeContent = "";
                    nodeName = span;
                },
                                {
                    nodeAttributeArray =                     (
                                                {
                            attributeName = class;
                            nodeContent = name;
                        }
                    );
                    nodeChildArray =                     (
                                                {
                            nodeAttributeArray =                             (
                                                                {
                                    attributeName = href;
                                    nodeContent = "http://www.food.com/library/flour-64";
                                }
                            );
                            nodeContent = "all-purpose flour";
                            nodeName = a;
                        }
                    );
                    nodeContent = "";
                    nodeName = span;
                }
            );
            nodeContent = "";
            nodeName = span;
        }
    );
    nodeContent = or;
    nodeName = span;
} 
```

问题是字典根的“nodeContent”是文本“或”，并且所有标签都作为根节点的子节点，所以片段的顺序丢失了 - 我不能说或者实际上在中间在连接所有文本时，我得到以下字符串：“或 500 克面包粉 500 克通用面粉”。

任何人都可以想出一种方法来在 1 个 XPath 查询中提取纯文本，或者使用 XPath 引擎来读取元素的有序列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:56:58.567

由于您需要*所有文本节点*，因此可以使用以下方法轻松完成

```
//text() 
```

这将返回所有节点。您的内容中的空白存在一些问题，您可以使用以下方式省略所有仅空白节点

```
//text()[not(matches(., '$[\s]+$', 'm'))] 
```

之后您仍然需要在 Objective C 中进行一些修整（例如“g”），但是您应该获得包含可打印字符的所有文本节点的有序结果集。

# php - 如何回显字符串并从php中的同一函数返回值

> ID：15851105
> 
> 赞同：-3
> 
> 时间：2013-04-06T12:44:00.687
> 
> 标签：php, function

我有这样的情况：

```
function getData($key,$value){
   if($key==$value){
     echo 'Key-Value Matched';
       if($value=='foo'){
         $result = 'value is foo';
       }else{
         $result = 'value is bar';
       }
    }
return $result; 
}

 getData('bar','foo');
 echo $result;
 getData('foo','foo'); // Key-Value Matched
 echo $result; 
```

如上面的代码，您可以看到我想要一个 php 函数的回显和返回值。但是从上述函数的执行来看， echo 部分正在正确执行，但 $result 不是来自该函数。如何实现上述函数的回声和返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:46:16.760

您错过了在`$key != $value`. 您必须添加一个 else 块。像这样：

```
function getData($key,$value){
   if($key==$value){
     echo 'Key-Value Matched';
       if($value=='foo'){
         $result = 'value is foo';
       }else{
         $result = 'value is bar';
       }
    } else {
         $result = 'value is undefined';
    }
    return $result; 
} 
```

此外，您还必须`getData()`在使用它之前存储它的返回值（如提到的@bwoebi）：

```
$result = getData('bar','foo');
echo $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:49:02.783

您的函数中有一个局部变量：`$result`，但这`$result`不是您的全局变量。

你必须这样做：

```
echo getdata('bar', 'foo');
echo getData('sss', 'sss'); 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:49:21.740

```
function getData($key,$value){
    if($key===$value){
       echo 'Key-Value Matched';
       if($value=='foo'){
         $result = 'value is foo';
       }else{
         $result = 'value is bar';
       }
       return $result; 
    }else {
       echo 'Key-Value not matched';
    }
}

 echo getData('bar','foo');
 echo getData('foo','foo'); 
```

*   必须使用“===”比较相同的字符串以获得最佳实践
*   您的 $result 变量仅限于函数之外的函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:58:44.413

如果您真的希望`getData`函数更新`$result`变量（我不推荐），您可以使用`global`关键字将其声明为函数内部的全局变量

```
function getData($key, $value){
  global $result;

  if ($key == $value) {
    $result = 'Key-Value Matched';
    if ($value == 'foo') {
      $result = 'value is foo';
    } else {
      $result = 'value is bar';
    }
  }
  return $result; 
}

getData('bar','foo');
echo $result;         // Will print "value is foo"
getData('foo','foo');
echo $result;         // Will print "Key-Value matched" 
```

但是，再一次，您不应该这样做（您的代码可能会变得非常混乱）。您只需要使用`getData`return 并使用`echo`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T12:46:26.937

您必须先存储返回值：

```
 $result = getData('bar','foo'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-06T12:50:11.477

你不应该在函数中产生回声。更好的是将所有输出放在一个数组中，然后在浏览器上显示如下：

```
function getData($key,$value){
   $result = array();
   if($key==$value){
     $result[] = 'Key-Value Matched';
       if($value=='foo'){
         $result[] = 'value is foo';
       }else{
         $result[] = 'value is bar';
       }
    }
return $result; 
}

 $result = getData('bar','foo');
 foreach($result as $entry)
 {
   echo $entry."<br />"
 }
 $result = getData('foo','foo'); // Key-Value Matched
 foreach($result as $entry)
 {
   echo $entry."<br />"
 } 
```

# asp.net-mvc-3 - 降级 mvc 项目时出现剃刀版本错误

> ID：15851112
> 
> 赞同：0
> 
> 时间：2013-04-06T12:44:25.960
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我正在使用visual studio express 2012在mvc4中的一个站点上工作。由于我不会费心进入这里的原因，我必须将项目移回mvc3 vs 2010。我已经将所有代码移过来并编译但是当我运行项目我得到以下错误。我不知道在这里做什么。有人猜吗？谢谢。

> [A]System.Web.WebPages.Razor.Configuration.HostSection 无法转换为 [B]System.Web.WebPages.Razor.Configuration.HostSection。类型 A 源自 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。类型 B 源自 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidCastException：[A]System.Web.WebPages.Razor.Configuration.HostSection 无法转换为 [B]System.Web.WebPages.Razor.Configuration.HostSection。类型 A 源自 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。类型 B 源自 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。

在我的根 web.config 我有以下...

```
<appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

然后在我有的views文件夹中的web.config中......

```
<appSettings>
   <add key="webpages:Enabled" value="false" />
</appSettings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:55:26.377

Penfold，感谢您的帮助。尽管您的解决方案都不是解决方案，但它们为我指明了正确的方向。我的视图的 web.config 文件中有几个块是原始 mvc4 遗留下来的，需要更新到 mvc3。我开始了一个新的 mvc3 项目并复制了默认值，它工作正常。这是我改变的。

```
<configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

我把上面的改成了这个。

```
<configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:17:06.247

没有看到您的 web.config 我不确定这是否正确。但是此错误消息表明`webpages:config`设置不正确。因此，请尝试以下操作：

在您的 web.config 中更改以下内容

```
<appSettings>
    ...
    <add key="webpages:Version" value="2.0.0.0" />
    ....
</appSettings> 
```

至

```
<appSettings>
    ....
    <add key="webpages:Version" value="1.0.0.0" />
    ....
</appSettings> 
```

## 更新

此错误的另一个可能原因是 MVC4 默认添加的绑定重定向，即

```
<dependentAssembly>
  <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
  <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
</dependentAssembly>
<dependentAssembly>
  <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
  <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
</dependentAssembly>
<dependentAssembly>
  <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
  <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
</dependentAssembly> 
```

请从您的 web.config 中删除上述内容并将其替换为

```
<dependentAssembly>
  <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
  <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
</dependentAssembly> 
```

# ruby-on-rails - 与轮胎/弹性搜索远程服务器的连接错误

> ID：15851113
> 
> 赞同：2
> 
> 时间：2013-04-06T12:44:27.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, elasticsearch, tire

我已经安装了一个带有 elasticsearch 的 ubuntu 12.04 远程服务器。

我已经安装了弹性搜索：

```
sudo apt-get update
sudo apt-get install openjdk-7-jre-headless -y
wget https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.20.6.deb
sudo dpkg -i elasticsearch-0.20.6.deb
sudo service elasticsearch start 
```

我得到`sudo elasticsearch status`：

```
* ElasticSearch Server is running with pid 2483 
```

我的 elasticsearch 远程服务器工作正常：

```
ubuntu12@juan:~/Escritorio/myapp$ curl http:/111.111.111.111:9200
{
  "ok" : true,
  "status" : 200,
  "name" : "Hogan, Harold \"Happy\"",
  "version" : {
    "number" : "0.20.6",
    "snapshot_build" : false
  },
  "tagline" : "You Know, for Search"
} 
```

或使用我的子域：

```
ubuntu12@juan:~/Escritorio/myapp$ curl http://elasticsearchserver.mydomain.com:9200
{
  "ok" : true,
  "status" : 200,
  "name" : "Hogan, Harold \"Happy\"",
  "version" : {
    "number" : "0.20.6",
    "snapshot_build" : false
  },
 "tagline" : "You Know, for Search"
} 
```

我可以重新启动、启动和停止 elasticsearhc 服务器。

```
sudo service elasticsearch restart
 * Stopping ElasticSearch Server                                                                                                                                                                      [ OK ] 
 * Starting ElasticSearch Server                                                                                                                                                                      [ OK ] 
```

我`tire.rb`在文件夹中有一个文件，`config/initializer/`其中包含下一个代码：

```
if Rails.env == 'production'
  Tire.configure do
    url "http://elasticsearchserver.mydomain.com:9200"
  end
end 
```

这是我重新索引的 capistrano 任务：

```
after "deploy:finalize_update", "deploy:elasticsearch:index_classes"
namespace :deploy do
  namespace :elasticsearch do
   desc 'run elasticsearch indexing via tire'
    task :index_classes do
      run "cd #{deploy_to}/current && bundle exec rake environment tire:import CLASS=Object FORCE=true "
    end
  end
 end 
```

我使用 mongodb 作为数据库，所以在重新索引之前我没有进行迁移。

这是 capistrano 错误：

```
2013-04-06 14:25:50 executing `deploy:elasticsearch:index_classes'
 #
 #
 ** [out :: 111.111.111.111] Skipping index creation, cannot connect to Elasticsearch
 ** [out :: 111.111.111.111] 
 ** [out :: 111.111.111.111] (The original exception was: #<Errno::ECONNREFUSED: Connection refused - connect(2)>)
 ** [out :: 111.111.111.111] 
 ** [out :: 111.111.111.111] [IMPORT] Deleting index 'cvs'
 ** [out :: 111.111.111.111] 
 ** [out :: 111.111.111.111] rake aborted!
 ** [out :: 111.111.111.111] Connection refused - connect(2)
 ** [out :: 111.111.111.111]
 #
 # 
```

我已将轮胎.rb 文件上传到生产服务器，我尝试过：

```
bundle exec rake environment tire:import CLASS=Object FORCE=true 
```

我得到相同的结果：

```
Skipping index creation, cannot connect to Elasticsearch
(The original exception was: #<Errno::ECONNREFUSED: Connection refused - connect(2)>)
[IMPORT] Deleting index objects'
rake aborted!
Connection refused - connect(2) 
```

**我究竟做错了什么？如何修复轮胎/导轨应用程序和我的弹性搜索服务器之间的连接？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:44:16.613

我认为您的 config/initializers/tire.rb 中的语法错误，见下文

```
Tire.configure do
  url "http://localhost:9200"
  #you can uncomment the next line if you want to see the elasticsearch queries in their own seperate log
  #logger "#{Rails.root}/log/es.log" 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:41:20.877

这是它在`tire.rb`文件中对我来说工作正常的语法

```
require 'tire'
Tire.configure { url "http://myremoteserver.com:9200" } 
```

现在它工作正常！

谢谢！

# debugging - XSLT 在主要浏览器中的支持

> ID：15851114
> 
> 赞同：1
> 
> 时间：2013-04-06T12:44:35.110
> 
> 标签：debugging, xslt, browser, xml-serialization, xhtml-1.0-strict

我想通过 XSLT 将输入的 XML 文档转换为 XHTML。在我的样式表中，我使用具有以下属性的 xsl:output：

```
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"
doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN" /> 
```

当我在 XML Copy Editor 或 Editix 等编辑器中使用 XSLT 处理器时，向 XTHML 1.0 Strict 的转换工作正常。当我使用命令行 xsltproc 时，它也按预期工作。

但是当我将样式表（“myfile.xsl”）链接到原始 XML 文档（“myfile.xml”）中时，如下所示：

```
<?xml-stylesheet type="text/xsl" href="myfile.xsl"?> 
```

如果我现在尝试在主要浏览器（Chrome、IE 或 Mozilla）中观看“myfile.xml”，它们都无法将 XML 文档转换为预期的 XHTML。但是，使用 Opera，它可以完美运行。

我的 XSLT 是否有问题（即 xsl:output 中）或者这是主要浏览器（IE、Chrome、Mozilla）的 XSLT 实现中的缺陷？

仅当我在 . 如果我使用 method="html"，它适用于所有浏览器。但我需要生成 XHTML，而不是 HTML，这就是为什么我在 xsl:output 中使用 method="xml" 以及 doctype-system 和 doctype-public 属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:09:35.793

我相信大多数浏览器在使用 xml-stylesheet PI 运行转换时不会序列化输出。他们只是创建一个结果树然后渲染它。如果他们没有序列化结果树，他们应该完全正确地忽略 xsl:output 声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:15:20.720

好吧，您还没有真正告诉我们浏览器以何种方式失败。如果要创建 XHTML 输出，请确保为结果元素使用 XHTML 命名空间，即 put

```
<xsl:stylesheet
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"
doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN" />

<xsl:template match="/">
  <html>...<xsl:apply-templates/>...</html>
</xsl:template>

</xsl:stylesheet> 
```

在您的代码中确保结果元素是 XHTML 元素（而不是没有命名空间中的 XML 元素，这些元素恰好具有像 'html' 这样的本地名称但无法识别为 XHTML）。

我很确定带有输出方法`xml`的 Firefox/Mozilla 浏览器可以识别 XHTML 元素。我认为还有 IE 9 和 10，我不确定具有有限 XHTML 支持的旧版 IE 是否可以工作。

举个例子，XML 输入[http://home.arcor.de/martin.honnen/xslt/test2013040601.xml通过](http://home.arcor.de/martin.honnen/xslt/test2013040601.xml)[http://home.arcor.de/martin.honnen/xslt/test2013040601](http://home.arcor.de/martin.honnen/xslt/test2013040601.xsl)转换为`xml`输出[.xsl](http://home.arcor.de/martin.honnen/xslt/test2013040601.xsl)并且适用于 IE 10 和 Windows 8 上当前版本的 Firefox 和 Chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T00:01:29.683

客户端 XSLT 存在一些潜在问题：

*   XHTML doctype URL在 IE中[被 W3C 阻止](http://www.w3.org/blog/systeam/2008/02/08/w3c_s_excessive_dtd_traffic/)，因此需要[打补丁](http://support.microsoft.com/kb/973687)
*   Firefox 中的[XML 序列化](https://bugzilla.mozilla.org/show_bug.cgi?id=422403)器用于输出 XHTML，因此如果不使用 XHTML 命名空间，它将回退到文本
*   该`media-type`属性需要定义`text/html`为 Chrome

这是一个自引用样式表，在另存为时可以使用`html5.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="html5.xml"?>
<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml"
            >
<xsl:output method="xml" encoding="utf-8" version="" indent="yes" standalone="no" media-type="text/html" omit-xml-declaration="no" doctype-system="about:legacy-compat" />

<xsl:template match="xsl:stylesheet">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="/">
  <html>
    <head>
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    </head>
    <body>
      <xsl:text>hi</xsl:text>
    </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

以下是一些不相关的问题，可以解释其他跨浏览器问题：

*   [在 Firefox 和 IE 中使用 XSLT 将 XML 转换为 XML](https://stackoverflow.com/questions/13659802/)
*   [对 XML 文件使用内联 XSLT](https://stackoverflow.com/questions/7132106/)

**参考**

*   [XSLT 安全性](http://msdn.microsoft.com/en-us/library/ms763800)
*   [Transformiix 测试用例](http://www-archive.mozilla.org/projects/xslt/test.xsl)
*   [XML 一致性](https://www.oasis-open.org/committees/xml-conformance/suite-v1se/xmltest/xmltest.xml)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T12:50:31.780

大多数浏览器只支持 XSLT 1.0，你应该看看[SaxonCE 添加对 XSLT 2.0 的支持](http://www.saxonica.com/ce/index.xml)

> Saxon-CE（客户端版）是 Saxonica 的 XSLT 2.0 实现，用于 Web 浏览器。

### 特征

注意[XPath 2.0 支持](http://en.wikipedia.org/wiki/Saxon_XSLT#Features)。

# drools - 新创建和加载的 StatefulKnowledgeSession - JBPM 5

> ID：15851115
> 
> 赞同：0
> 
> 时间：2013-04-06T12:44:42.237
> 
> 标签：drools, jbpm

**强文本**如果任务完成的事件没有被分派到 StatefulKnowledgeSession 会出现什么问题？

对于一个新的流程实例，我做

*   创建一个新会话

    注册人工任务本地 GenericHTWorkItemHandler

    注册自定义事件监听器

    称呼`startProcess(processDefinitionId,parameters);`

它启动一个新实例，通过注册的人工任务处理程序创建第一个人工任务。

当我想完成人工任务时，我会

*   恢复 KnowledgeSession `JPAKnowledgeService.loadStatefulKnowledgeSession(lastSessionId,kBase,null, env);`

    再次注册人工任务本地 GenericHTWorkItemHandler

    再次注册自定义事件监听器

然后调用taskService.completeTask，但任务完成并没有分派到KnowledgeSession。并且流程没有发生

我不应该再次注册事件侦听器吗？我不应该再次注册工作项处理程序吗？

**更新 1** 异常跟踪：

```
07:52:09,618 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/workflow-console].[rsservlet]] (http--0.0.0.0-8280-15) Servlet.service() for servlet rsservlet threw exception: java.lang.IllegalStateException: EntityManager is closed
        at org.hibernate.ejb.AbstractEntityManagerImpl.joinTransaction(AbstractEntityManagerImpl.java:1158) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
        at org.drools.container.spring.beans.persistence.DroolsSpringJpaManager.getApplicationScopedPersistenceContext(DroolsSpringJpaManager.java:89) [drools-spring-5.5.0.Final.jar:5.5.0.Final]
        at org.drools.persistence.SingleSessionCommandService.execute(SingleSessionCommandService.java:350) [drools-persistence-jpa-5.5.0.Final.jar:5.5.0.Final]
        at org.drools.command.impl.CommandBasedStatefulKnowledgeSession.getEnvironment(CommandBasedStatefulKnowledgeSession.java:478) [drools-core-5.5.0.Final.jar:5.5.0.Final]
        at org.jbpm.process.workitem.wsht.GenericHTWorkItemHandler$TaskCompletedHandler.handleCompletedTask(GenericHTWorkItemHandler.java:260) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final]
        at org.jbpm.process.workitem.wsht.GenericHTWorkItemHandler$TaskCompletedHandler.execute(GenericHTWorkItemHandler.java:234) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final]
        at org.jbpm.task.service.local.LocalTaskService$SimpleEventTransport.trigger(LocalTaskService.java:329) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 
```

重新加载会话时，我正在注册新的 HumanTaskWorkItemhandlers。它继续向 TaskService 注册事件处理程序。

当我连接 workItemHandlers 时，它们会向 taskService 注册 eventHandlers。这个 eventHandlers 什么时候会从 taskService 中注销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:37:20.907

如果您使用的是任务服务，默认情况下它将向所有侦听器分派事件。所以这意味着多个 ksession 可以接收事件（但一个任务完成事件应该只由一个 ksession 处理）。正如您所提到的，使用 owningKSessionOnly 可用于确保只有一个 ksession 会对完成事件做出反应。

您可以通过在处理程序上调用 dispose 来取消注册处理程序的侦听器。

# php - 领域驱动设计，实体懒加载

> ID：15851122
> 
> 赞同：3
> 
> 时间：2013-04-06T12:45:08.277
> 
> 标签：php, domain-driven-design

我对领域驱动设计（DDD）相当陌生，但我的理解是您与应用程序服务交谈，这是您的“模型”的入口。该服务可以与使用源（文件、数据库等）获取数据的存储库通信。存储库返回一个实体。

这就是我得到的全球理念。该服务知道存储库但不知道实体等。

现在我有以下问题。

我有一个实体用户，类似于以下内容（只是一个示例）

```
<?php    
class User
{
    protected $name;
    protected $city_id;

    public function getCity()
    {
         // return $city_entity;
    }
} 
```

getCity() 函数返回城市实体。我希望此函数使用延迟加载，因此在使用用户存储库时注入 CityEntity 并不是真正的延迟加载。

我为这个问题提供了两种解决方案。但我觉得两者都反对 DDD 原则。

我想出的第一个解决方案是在用户实体中注入城市存储库，它有缺点：如果您需要更多存储库，则必须将它们全部加载到实体中。它看起来像[答案](https://stackoverflow.com/questions/2563473/oop-app-architecture-which-layer-does-a-lazy-loader-sit-in#answer-2587511)，但对我来说只是存储库的包装器。那么为什么不直接注入存储库呢？

第二种解决方案，您给实体一个服务定位器。这样做的缺点是，除非您阅读代码，否则您不再知道需要哪些存储库。

那么现在的问题是，在保持 DDD 主体完整的同时，提供延迟加载灵活性的最佳方式是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T14:23:08.093

DDD 的要点之一是您的领域模型应该只表达有界上下文的普遍语言来处理业务规则。

因此，在 DDD 实体中，**延迟加载是一种反模式**。有一些原因：

1.  如果聚合仅包含确保业务不变性所需的数据，则它需要所有数据并且它们很少，因此[预加载](https://stackoverflow.com/questions/1299374/what-is-eager-loading)效果更好。
2.  如果您延迟加载数据，您的客户必须处理比[业务相关的更多异常路径](http://epic.tesio.it/2012/12/05/exceptions-are-the-norm.html)
3.  您可以使用[共享标识符](http://epic.tesio.it/doc/manual/shared_identifiers.html)来处理聚合之间的引用
4.  将专用查询用于投影目的很便宜（通常称为[read-model](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)）

恕我直言，您永远不应该将 DDD 实体用作数据访问技术：为此使用 DTO。

有关更多信息，您可以查看 Vaughn Vernon 的[Effective Aggregate Design](https://vaughnvernon.co/?p=139)。

# java - 接近警报教程

> ID：15851127
> 
> 赞同：0
> 
> 时间：2013-04-06T12:46:12.727
> 
> 标签：java, android

我遵循了有关如何使用接近警报以及如何注册它的教程。但是下面给出的这部分代码是什么意思

```
private static final String PROX_ALERT_INTENT = "com.javacodegeeks.android.lbs.ProximityAlert"; 
```

代码已运行，但未出现通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:29:51.227

根据我在网上找到的有关该主题的几个教程，这是将作为接近警报触发的自定义 Intent 操作。您的应用程序应该使用该意图过滤器实现接收器，以便做出正确反应。

# c# - 带有 SQLite 数据库的 ADO.NET POCO - 更改表而不是删除表

> ID：15851132
> 
> 赞同：0
> 
> 时间：2013-04-06T12:46:43.803
> 
> 标签：c#, .net, entity-framework, sqlite, ado.net

与此[msdn 示例](http://code.msdn.microsoft.com/Demo-of-ADONET-POCO-with-140ad3ad)相关，我构建了一个从模型生成数据库的应用程序。现在我想到了一个事实，即我有一个已填充的数据库并且不想因为丢失数据而删除所有表。是否有可能生成查询的“更改表”版本而不是“删除表”版本？

问候克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:09:35.863

如果您对模型进行了更改并希望这些更改反映在您的数据库中而不会丢失数据，您应该考虑使用[Entity Framework Code First Migrations](http://msdn.microsoft.com/en-gb/data/jj591621)。

链接中的教程提供了一个很好的演练。

* * *

[在实体框架中使用模型优先方法进行迁移](https://stackoverflow.com/questions/11920491/migration-using-model-first-approach-in-entity-framework)

# java - Java.Security.Key.getEncoded() OpenSSL DH 等效项

> ID：15851134
> 
> 赞同：1
> 
> 时间：2013-04-06T12:46:44.523
> 
> 标签：java, c, openssl, diffie-hellman

如何使用 OpenSSL 在 C 中实现与 getEncoded() 方法产生的结果相同的结果？这是 Diffie-Hellman 密钥协议所必需的，我必须将我的公钥发送到 java 服务器（但我认为 getEncoded() 方法不仅对公钥进行编码，而且对我的情况也应该需要的参数进行编码）

我目前的状态是我有一个 OpenSSL DH 对象，其中包含 PublicKey 和 p&g 作为 BigNums。

如果有人知道如何做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:59:08.767

如果编码的 DH 对象意味着 DER 编码，那么 i2d_DHParams 可以帮助您。它在[这里](http://www.openssl.org/docs/crypto/dh.html)给出。

# javascript - 这是backbonejs设置功能的错误吗

> ID：15851135
> 
> 赞同：0
> 
> 时间：2013-04-06T12:46:48.157
> 
> 标签：javascript, backbone.js

嗨，我是新来的backbonejs，

我在尝试[http://addyosmani.github.com/backbone-fundamentals/#validation的示例时遇到了问题](http://addyosmani.github.com/backbone-fundamentals/#validation)

我创建了 2 个模型对象，myTodo 和 myTodo1，

如果我像这样调用 set 函数，由于验证错误，它返回完成：false

```
    var myTodo = new Todo();
    myTodo.set('完成', true, {validate: true});
    console.log("完成："+myTodo.get('完成'));
    /*
    上面的代码返回以下日志：
    该模型已初始化。
    记得为你的待办事项设置一个标题。
    完成：假
    */

```

**购买为什么在执行以下代码时未执行验证**

```
    var myTodo1 = new Todo();
    myTodo1.set('完成',true);
    console.log("完成："+myTodo1.get('完成'));
    myTodo1.set({validate:true})
    console.log("完成："+myTodo1.get('完成'));
    /*
    上面的代码返回以下日志：
    该模型已初始化。下划线-test2.js:11
    完成：真正的下划线-test2.js:28
    完成：真
    */

```

虽然两组代码都做同样的工作，但在第一种情况下验证执行但在第二种情况下不执行

为什么？？？？？

下面是完整的示例代码。

```
    var Todo = Backbone.Model.extend({
      默认值：{
        完成：假，
      },
      验证：函数（属性）{
        如果（attribs.title === 未定义）{
            return "记得为你的待办事项设置一个标题。";
        }
      },
      初始化：函数（）{
        console.log('此模型已初始化。');
        this.on（“无效”，函数（模型，错误）{
            控制台日志（错误）；
        });
        this.on('change:title', function(){
            console.log('- 标题的值已经改变。');
        });
      }
    });

    **var myTodo = new Todo();
    myTodo.set('完成', true, {validate: true});
    console.log("完成："+myTodo.get('完成'));**

    **var myTodo1 = new Todo();
    myTodo1.set('完成',true);
    console.log("完成："+myTodo1.get('完成'));
    myTodo1.set({validate:true})
    console.log("完成："+myTodo1.get('完成'));**

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:11:33.127

它们完全不同。

```
myTodo1.set({validate:true}) 
```

在这里，您没有运行验证。您只是将模型的属性“验证”设置为 true。所以基本上，在第二个示例中，您设置了 2 个属性而不进行验证。

在任何情况下，您都不能希望在之后进行验证，因为您的属性已经设置好了。

**编辑：**
虽然我不知道为 validate 属性设置新值时的行为。但是您肯定会用布尔值覆盖您的验证功能。这肯定会导致意想不到的行为。

**编辑2：**

好吧，我想这将是我最后一次尝试。

```
myTodo1.set({completed:true});
myTodo1.set({validate:true}); 
```

也相当于：

```
myTodo1.set({completed: true}).set({validate: true}); 
```

**但在任何情况下都不等同于：**

```
myTodo1.set({completed: true}, {validate: true}); 
```

在最新版本中，`{validate: true}`告诉 Backbone 在模型上应用验证功能。

在前者中，您只需将*completed 属性*设置为 true**而不告诉模型进行 validate**。**然后**您**再次将***validate 属性*设置为 true ，而不告诉模型进行 validate 。所以基本上**你永远不会告诉模型 validate**。

# javascript - Greensock 嵌套时间线未按预期运行

> ID：15851136
> 
> 赞同：0
> 
> 时间：2013-04-06T12:46:52.463
> 
> 标签：javascript, gsap

我有以下代码：

```
var mainTimeLine = new TimelineLite({paused:true});

var whiteGlow = "0px 0px 30px rgba(255,255,255,0.5), 0px 0px 30px rgba(255,255,255,0.5), 0px 0px 30px rgba(255,255,255,0.5), 0px 0px 30px rgba(255,255,255,0.5)";

var slide1 = document.getElementById("slide1"); //or use jQuery's $("#photo")
var circle11 = document.getElementById("circle1-1"); //or use jQuery's $("#photo")
var circle12 = document.getElementById("circle1-2"); //or use jQuery's $("#photo")
var backgroundLines1 = document.getElementById("backgroundLines1"); //or use jQuery's $("#photo")
//TweenMax.to(backgroundLines1, 2, {right:"100px", repeat:-1, ease:Linear.easeNone});

var text11 = document.getElementById("text1-1"); //or use jQuery's $("#photo")
var text12 = document.getElementById("text1-2"); //or use jQuery's $("#photo")
var text13 = document.getElementById("text1-3"); //or use jQuery's $("#photo")
var man1 = document.getElementById("man1"); //or use jQuery's $("#photo")
var idgLogo = document.getElementById("idg-logo"); //or use jQuery's $("#photo")

var slide2 = document.getElementById("slide2"); //or use jQuery's $("#photo")

var slide3 = document.getElementById("slide3"); //or use jQuery's $("#photo")

//slide1.style.display = 'block';

//slide1.style.display = 'block';
var slide11Timeline = new TimelineLite();
var slide12Timeline = new TimelineLite();

var slide1Timeline = new TimelineLite({paused:false});

slide11Timeline.add([
        TweenLite.to(slide1, 0, {left:"0"}),
        TweenMax.to(circle11, 60, {rotation:360, repeat:-1, ease:Linear.easeNone}),
        TweenMax.to(circle12, 60, {rotation:-360, repeat:-1, ease:Linear.easeNone}),
        TweenLite.from(circle11, 10, {opacity:"0.0"}),
        TweenLite.from(circle12, 10, {opacity:"0.0"}),
        TweenLite.from(text11, 1, {opacity:"0.0"})
    ]);

slide12Timeline
    .from(text11, 1, {top:"-40px", ease:Expo.easeOut,delay:2})
    .to(text11, 2, {
        textShadow:whiteGlow
        //color:"#91ff00"
    })
    .from(text12, 1, {opacity:"0.0"})
    .from(text13, 1, {opacity:"0.0"})
    .from([idgLogo, man1], 1, {opacity:"0.0"})
    .to(slide1, 2, {left:"-10000", delay:2});

slide1Timeline.add([slide11Timeline,slide12Timeline]);

var slide21Timeline = new TimelineLite({paused:false});
slide21Timeline.to(slide2, 1, {left:"0"});

mainTimeLine.add(slide1Timeline);
mainTimeLine.add(slide21Timeline);

mainTimeLine.play(); 
```

目前 slide1Timeline 播放但 slide21Timeline 没有。我试图让他们一个接一个地玩……我尝试了各种方法，但都失败了……有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:06:52.320

我相信问题在于您在 slide11Timeline 中有一些无限重复的补间，所以它的 totalDuration() 基本上是无穷大。您正在使用 add() 将它们放入 mainTimeLine，但请记住，默认情况下，add() 将使用时间线的末尾作为插入点对子项进行排序。

由于第一个嵌套时间线的持续时间非常长，因此您永远看不到后续的 slide21Timeline 动画，因为它在 mainTimeLine 上的位置**将来会**关闭。

但不用担心——您可以完全控制插入点的位置——只需使用 add() 的第二个参数。以下是一些选项：

```
//to make them both start at 0 (run concurrently):    
mainTimeLine.add(slide1Timeline, 0);
mainTimeLine.add(slide21Timeline, 0);

//or to make slide21Timeline run at the 60-second spot of mainTimeLine:
mainTimeLine.add(slide21Timeline, 60); 
```

另请注意，如果您想

# windows-phone-7 - 如何通过使用 windows phone 7 中的动画类将图像控件移动到特定的 xy 坐标

> ID：15851138
> 
> 赞同：0
> 
> 时间：2013-04-06T12:47:03.823
> 
> 标签：windows-phone-7, animation

请帮助我如何通过使用 windows phone 7 中的动画类将图像自动移动到特定的 xy 位置，我已经尝试过 Point 动画类，但这不适用于图像控制但适用于对象，所以请告诉我哪种我应该将动画类用于 Windows Phone 7 中的移动图像吗

我的代码是

XAML

```
 </PointAnimation>
            </Storyboard>
        </Canvas.Resources>
        <Image  Source="qq.jpg" Width="200" Height="100" x:Name="MyImage" Canvas.Left="10" Canvas.Top="10" />

    </Canvas>
</Grid> 
```

C＃

```
 private void canvas1_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            Point mypoint = new Point();
            mypoint.X = 10;
            mypoint.Y = 200;

            MyPointAnimation.To = mypoint;
            myStoryboard.Begin();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:03:51.380

你可以做这样的事情：

```
 <Image x:Name="myImage"
                   Canvas.Left="10"
                   Canvas.Top="10"
                   Width="200"
                   Height="100"
                   Source="/Assets/qq.jpg">
                    <Image.RenderTransform>
                        <TranslateTransform />
                    </Image.RenderTransform>
                </Image> 
```

然后在后面的代码中：

```
 TranslateTransform trans = myImage.RenderTransform as TranslateTransform;
            DoubleAnimation anima1 = new DoubleAnimation();
            anima1.To = 150;

            Storyboard.SetTarget(anima1, trans);
            Storyboard.SetTargetProperty(anima1, new
            PropertyPath(TranslateTransform.XProperty));
            // Create storyboard, add animation, and fire it up!
            Storyboard storyboard = new Storyboard();
            storyboard.Children.Add(anima1);
            storyboard.Begin(); 
```

# html - 将文本保持在同一位置

> ID：15851140
> 
> 赞同：-2
> 
> 时间：2013-04-06T12:47:25.097
> 
> 标签：html, css

我的 html 页面中有一个容器，其中有一个 javascript 幻灯片和下面的一些文本。即使图片大小不同，是否有任何属性可以将按钮和文本保持在同一位置？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:49:45.090

在你的 CSS 中使用`poistion:fixed;`你想要修复的元素

# r - ggplot2：分层两种不同的绘图类型，在同一面板上具有不同的轴。

> ID：15851144
> 
> 赞同：0
> 
> 时间：2013-04-06T12:47:57.203
> 
> 标签：r, ggplot2

我如何才能在同一个地块上将以下两个地块叠放在一起？

此外，我想在图的左侧有第一个图的 y 轴单位，在右手边有第二个图的 y 轴单位。我还希望将 x 轴分别放在绘图的顶部和底部。

```
ggplot(data=diamonds, aes(price)) + geom_density()

ggplot(diamonds, aes(y=price, x = clarity)) + geom_bar(stat="identity") 
```

# python - 检查变量的多个值

> ID：15851146
> 
> 赞同：7
> 
> 时间：2013-04-06T12:48:12.983
> 
> 标签：python, variables

```
original = raw_input('Enter a word:')

if len(original) > 0 and original.isalpha():
    word = original.lower()
    first = str(word)[0]
    print first
    if str(first) == "a" or "e" or "i" or "u" or "o":
        print "vowel"
else:
    print "consonant" 
```

我想检查一个单词是否以元音或辅音开头。但是，这部分不起作用：如果`str(first) == "a" or "e" or "i" or "u" or "o"`

那么如何检查第一个字母是“a”或“e”或“i”或“u”或“o”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T12:55:16.527

利用`in`

```
if len(original) and original.isalpha():
    word = original.lower()
    first = word[0]
    print first
    if first in ('a','e','i','o','u'):
        print "vowel"
    else:
        print "consonant" 
```

如果您尝试使用 OR 子句，则必须像这样使用，但这不是更好的 pythonic 方式：

```
if first =='a' or first =='e' or first =='i' or first =='o' or first =='u': 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T12:57:13.357

```
if str(first) == "a" or "e" or "i" or "u" or "o": 
```

应该修改为

```
if str(first) in ("a", "e", "i", "o", "u"): 
```

Python 对缩进有明确的要求。确保你有一个正确的缩进。

```
original = raw_input('Enter a word:')

if len(original) > 0 and original.isalpha():
    word = original.lower()
    first = str(word)[0]
    print first
    if str(first) in ("a", "e", "i", "o", "u"):
        print "vowel"
    else:
        print "consonant" 
```

# makefile - 带有红线经济标签的 Contiki：制作：*** 没有规则可以制作目标“hello-world.upload”。停止

> ID：15851150
> 
> 赞同：1
> 
> 时间：2013-04-06T12:48:32.563
> 
> 标签：makefile, contiki

我买了一些 redwire econotags r3 以便将它们与 Instant Contiki 一起使用。作为一个新手，我遵循了手册： http: [//www.contiki-os.org/start.html](http://www.contiki-os.org/start.html)。但是，当我尝试将程序上传到 motes 时，我收到一个错误。例如对于你好世界：

```
cd contiki/examples/hello-world
make TARGET=redbee-econotag hello-world
make TARGET=redbee-econotag hello-world.upload 
```

我收到：

```
make: *** No rule to make target `hello-world.upload'.  Stop. 
```

我正在搜索过去两天，但我不明白是什么问题。我可以通过 VMWare Player 中的虚拟机菜单看到 mote 已正确连接到 USB 端口。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:27:25.660

加载 econotags 的工具当前未与 Contiki 的“make upload”命令集成。

要将代码加载到 econotags，请参阅[libmc1322x 文档](https://github.com/malvira/libmc1322x/wiki)。具体来说：

```
https://github.com/malvira/libmc1322x/wiki/libmc1322x 
```

通常，您使用`mc1322x-load`通过 UART 1 引导加载程序（通常是 /dev/ttyUSB1）将代码加载到 RAM 中。如：

```
mc1322x-load -f rftest-tx_redbee-econotag.bin -t /dev/ttyUSB1 
```

然后重置 econotag 以激活引导加载程序。

要对闪存进行编程，您[需要](https://github.com/malvira/libmc1322x/)`flasher.bin`libmc1322x 。然后你做：

```
mc1322x-load -f flasher_redbee-econotag.bin -s blink-red_redbee-econotag.bin -t /dev/ttyUSB1 
```

您还可以使用`bbmc`命令行来重置和擦除 econotag。见[https://github.com/malvira/libmc1322x/wiki/bbmc](https://github.com/malvira/libmc1322x/wiki/bbmc)

# php - json_encode 如何获取原始数组 [stdClass Object]

> ID：15851162
> 
> 赞同：0
> 
> 时间：2013-04-06T12:49:23.243
> 
> 标签：php, json

你好我有这个json：

```
 [{"org_src":"img\/base\/logo.png","src":"\/cache\/300-logo.png"},

    {"org_src":"\/img\/l2.JPG","src":"\/cache\/6l-2.JPG"},

    {"org_src":"\/img\/studio\/desk.JPG","src":"\/cache\/desk.JPG"}, 

    ... 
```

数组在解码之前看起来如何？如果我对此使用 Json_encode，我会得到这个：

```
 Array
(
    [0] => stdClass Object
        (
            [og_src] => img/base/logo.png
            [src] => /cache/300-logo.png
        )

    [1] => stdClass Object
        (
            [og_src] => /img/l2.JPG
            [src] => /cache/6l-2.JPG
        )... 
```

什么是 stdClass 对象？感谢您提前提供任何帮助。

使用 json_decode($test,true); 我会得到这个：

```
Array
(
    [0] => Array
        (
            [og_src] => img/base/logo.png
            [src] => /cache/logo.png
        )

    [1] => Array
        (
            [og_src] => /img/studio/l2.JPG
            [src] => /cache/6l-2.JPG
... 
```

这无助于我查看原始数组的外观。

这是答案。那就是我要找的。感谢您的任何建议。

```
$stack[0][org_src]= "Hallo";
$stack[0][src] = "scrkjh";

$stack[1][org_src] = "Halfgfglo";
$stack[1][src] = "scrkjh";
json_encode($stack); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:54:05.357

你可能是说[`json_decode`](http://php.net/manual/en/function.json-decode.php)

如果您查看文档，您会注意到`assoc`如果要获取关联数组而不是对象，则有参数。

所以你应该做

```
$data = json_decode($data, true); 
```

如果你不想要对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:52:53.003

[`stdClass`](http://www.php.net/manual/en/reserved.classes.php)是 PHP 中所有对象的基类。如果`json_decode()`创建不属于特殊类类型或其他数据类型的对象之类的函数将被强制转换为对象，则使用 stdClass 作为数据类型。

您可以将其与`Object`Java 中的数据类型进行比较。

* * *

您询问了一个示例，如何访问 stdClass 的属性，或者一般来说，PHP 中的对象属性。使用`->`运算符，如下所示：

```
$result = json_decode($json);

// access 'src' property of first result:
$src = $result[0]->src; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T12:55:54.037

stdClass 是 php 的通用空类，有点像 Java 中的 Object 或 Python 中的对象

它对匿名对象、动态属性等很有用，Stdclass Object 是它的对象

例如，请参阅 PHP 和 StdClass 中的动态属性

另外.. 正如 Marko D 所说，您可以使用`json_decode($data, true);`true 来获取关联数组而不是对象。

# xcode - xcode 中的 cocos2d 通过名为 socket.io 的 Objective-C 库与 node.js 服务器服务通信

> ID：15851165
> 
> 赞同：2
> 
> 时间：2013-04-06T12:49:39.603
> 
> 标签：xcode, node.js, cocos2d-iphone, socket.io

我使用 xcode 4.6.1 cocos2d 2.x、ios sdk 6.1、iphone 6.1 模拟器。

我想通过node.js和socket.io从objective-c到服务器通信。

所以，我尝试了名为 socket.io “socket.IO-objc”的objective-c库

[https://github.com/pkyeck/socket.IO-objc](https://github.com/pkyeck/socket.IO-objc)

我在 socket.IO-objc 中成功了一个示例“SocketTesterARC”，以与服务器“node.js with socket.io”进行通信。

SocketTesterARC：

```
(void) viewDidLoad {
   [super viewDidLoad];
   socketIO = [[SocketIO alloc] initWithDelegate:self];
   [socketIO connectToHost:@"localhost" onPort:8888];
   [socketIO sendEvent:@"join" withData:@"first room"];
   [socketIO sendMessage:@"hihihi"];
} 
```

所以，我将“socket.io”库应用于新的 cocos2d 项目。我从示例“SocketTesterARC”的代码复制到新的 cocos2d 项目。

但是，错误而不是处理！

```
Connecting to socket with URL: http://localhost:8888/socket.io/1/?t=16807
2013-04-06 21:26:35.129 cocos2dSocketioTest[4311:c07] send()
2013-04-06 21:26:35.130 cocos2dSocketioTest[4311:c07] queue >>> 5:::{"args":["first room"],"name":"join"}
2013-04-06 21:26:35.131 cocos2dSocketioTest[4311:c07] send()
2013-04-06 21:26:35.133 cocos2dSocketioTest[4311:c07] queue >>> 3:::hihihi
2013-04-06 21:26:35.154 cocos2dSocketioTest[4311:1b03] ADDRESPONSE - ADDING TO MEMORY ONLY: http://localhost:8888/socket.io/1/?t=16807
2013-04-06 21:26:35.325 cocos2dSocketioTest[4311:c07] didReceiveResponse() 200 
```

服务器错误日志：

```
info  - handshake authorized brKX0Zfj9Vge80rxJfig
info  - handshake authorized JsDnUP2nPXUJh83UJfih
info  - handshake authorized pqoc5KS5hD2GsXcsJfii
info  - handshake authorized tX3OQfsgbs-pdWFIJfij 
```

服务器代码：

```
io.sockets.on('connection', function (socket) {
console.log("connection");
//join event
socket.on('join', function(data) {
    console.log('join : ' + data);
    socket.join(data);
    socket.set('room', data);
});

//meesage event
socket.on( 'message', function(data) {
    console.log('room : ' + data ); 
    socket.get( 'room', function(error, room) {
        io.sockets['in'](room).emit('message', data);
    });
});
}); 
```

请回答

添加，成功客户端日志：

```
2013-04-07 13:47:37.417 SocketTesterARC[1274:c07] Connecting to socket with URL: 
http://localhost:8888/socket.io/1/?t=16807
2013-04-07 13:47:37.424 SocketTesterARC[1274:c07] send()
2013-04-07 13:47:37.424 SocketTesterARC[1274:c07] queue >>> 5:::{"args":["first room"],"name":"join"}
2013-04-07 13:47:37.425 SocketTesterARC[1274:c07] send()
2013-04-07 13:47:37.425 SocketTesterARC[1274:c07] queue >>> 3:::hihihi
2013-04-07 13:47:37.430 SocketTesterARC[1274:1b03] ADDRESPONSE - ADDING TO MEMORY ONLY: http://localhost:8888/socket.io/1/?t=16807
2013-04-07 13:47:37.436 SocketTesterARC[1274:c07] didReceiveResponse() 200
2013-04-07 13:47:37.436 SocketTesterARC[1274:c07] connectionDidFinishLoading() nTOwJjgvumKn_kNM0alf:60:60:websocket,htmlfile,xhr-polling,jsonp-polling
2013-04-07 13:47:37.436 SocketTesterARC[1274:c07] sid: nTOwJjgvumKn_kNM0alf
2013-04-07 13:47:37.448 SocketTesterARC[1274:c07] heartbeatTimeout: 67.000000
2013-04-07 13:47:37.449 SocketTesterARC[1274:c07] transports: (
   websocket,
   htmlfile,
  "xhr-polling",
"jsonp-polling") 
```

服务器日志：

```
info  - handshake authorized nTOwJjgvumKn_kNM0alf
connection
join : first room
room : hihihi
info  - transport end (socket end) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:11:06.707

我发现，

cocos2d 禁用了 ARC，因此不使用 SRWebSocket。

解决ARC enable的方法是使用。

在 cocos2d 中使用 arc [http://www.raywenderlich.com/23854/arc-and-cocos2d-v2-x](http://www.raywenderlich.com/23854/arc-and-cocos2d-v2-x)

# c# - 在 C# 中使用分组依据

> ID：15851169
> 
> 赞同：1
> 
> 时间：2013-04-06T12:50:14.163
> 
> 标签：c#, linq

谁能解释这个代码示例在做什么？我不太明白字符串是如何分组的。它是否以每个单词的第一个字母并以某种方式对它们进行分组？

```
// Create a data source. 
        string[] words = { "apples", "blueberries", "oranges", "bananas", "apricots" };

        // Create the query. 
        var wordGroups1 =
            from w in words
            group w by w[0] into fruitGroup
            where fruitGroup.Count() >= 2
            select new { FirstLetter = fruitGroup.Key, Words = fruitGroup.Count() }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:53:01.657

LINQ 查询按第一个字符对所有单词进行分组。然后它会删除所有仅包含一个元素的组（=保留所有包含两个或更多元素的组）。最后，这些组被填充到新的匿名对象中，其中包含第一个字母和以该字母开头的单词数。

[LINQ 文档](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)和[示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)应该让您开始阅读和编写这样的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:01:22.670

```
// Create a data source. 
string[] words = { "apples", "blueberries", "oranges", "bananas", "apricots" };

// Create the query. 
var wordGroups1 =
    from w in words                  //w is every single string in words
    group w by w[0] into fruitGroup  //group based on first character of w
    where fruitGroup.Count() >= 2    //select those groups which have 2 or more members
                                     //having the result so far, it makes what is needed with select
    select new { FirstLetter = fruitGroup.Key, Words = fruitGroup.Count() }; 
```

另一个例子。在数组中显示字符串长度的频率：

```
var wordGroups1 =
    from w in words                  
    group w by w.Length into myGroup  
    select new { StringLength = myGroup.Key, Freq = myGroup.Count() };

//result: 1 6-length string
//        1 11-length string
//        2 7-length string
//        1 8-length string 
```

# python - hg log：如何获取特定用户的最新提交？

> ID：15851171
> 
> 赞同：2
> 
> 时间：2013-04-06T12:50:21.247
> 
> 标签：python, mercurial, commit

我有一个包含多个用户的仓库。我需要制作一个 python 脚本来检索特定用户的最新提交。我如何用 mercurial 做到这一点？

我正在考虑`hg log`通过 Python 的`subprocess`调用来调用命令。问题是我应该如何调用`hg log`命令，以便它告诉我用户的最新日志。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T14:44:55.607

简单（但不是高效或优雅的方式）

*   `hg log -u USERNAME`

或（带修订）

*   `hg log -r "author(USERNAME)"`

具有附加价值

> 如果字符串以“re:”开头，则字符串的其余部分被视为正则表达式。要匹配实际包含“re:”的用户，请使用前缀“literal:”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:02:20.043

我认为您应该能够通过使用系统调用调用类似的东西来获得单个用户的最新提交。（命令行版本如下。）

```
$ hg log -u your-user-name | head -5 
```

为您提供您的用户名的最新变更集`head -5`的完整缩写`hg log`输出，其中包括五行：变更集、标记、用户、日期和摘要。如果你只想要变更集，你可以使用这些方面的东西。（命令行版本，再次。）

```
$ hg log -u mike@fontling.com | head -1 | awk '{print $2}' 
```

评论表明，这对输出格式做出了毫无根据的假设。我同意。

* * *

根据评论，这似乎是从用户那里获得最后一次提交的*最佳表达方式。*

```
hg log -r "last(author('email@domain.com'))" 
hg log -r "last(author('Fred Flintstone'))" 
```

拿到最后三个。. .

```
hg log -r "last(author('email@domain.com'), 3)" 
hg log -r "last(author('Fred Flintstone'), 3)" 
```

# r - R：多次复制循环或函数并将结果添加到数据帧中

> ID：15851177
> 
> 赞同：1
> 
> 时间：2013-04-06T12:50:57.923
> 
> 标签：r, for-loop, user-defined-functions, random-sample, replicate

我编写了一个 R 循环并将其转换为一个接收数据帧的函数，原始代码和数据帧如下。目标是重复这个函数或循环 1000 次，最终得到一个数据框，该数据框有 1000 列代表每个 row.name 的行和。

我的目标是看起来像这样的数据框

```
row.names   rsum_s1  rsum_s2  rsum_s3  rsum_s4.....rsum_s1000 
kc231       40       57       15       34
kc25498     34       39       567      23
kc087398    28       3747     25       1938 
```

x 是原始数据框，它看起来像这样：

```
row.names   val2        val4        val3        val4
kc231       1.62E-08    3.29E-37    1.36E-14    0.29692426
kc25498     4.93E-01    4.93E-01    4.93E-01    0.49330053
kc087398    3.50E-01    1.18E-22    1.71E-08    0.35011743 
```

循环我第一次写作品给我 rsum_s 作为一个列表。

```
 for(k in 1:length(colnames(x))) {  
        as.numeric(x[,k])
        sample(x[,k])
        x[,k]<-rank(x[,k],ties.method="min")
        rsum_s<-rowSums(x) 
```

LOOP 的输出是每行的排名和。每行中的名称 id：rsum_s

```
structure(c(47, 142, 82), .Names = c("kc231", "kc25498", "kc087398")) 
```

LOOP 转换为 FUNCTION

```
sim<-function(x) { #takes a data.frame
  for(k in 1:length(colnames(x))) {  #each column set as numeric
    as.numeric(x[,k])
    sample(x[,k])  #randomly shuffle values in each column
    x[,k]<-rank(x[,k],ties.method="min") #rank each randomly shuffled columns
    rsum_s<-rowSums(x) #take the sum of the rows
    return(rsum_s)
    }
} 
```

函数的结果是整数而不是整数。

```
sim(dataframe1)
kc231   kc25498 kc087398
18.24   37.47   32.350117 
```

我不确定我在这里做错了什么。我需要执行 1000 次循环，并在每次循环运行到数据帧或复制函数 sim 1000 次时附加秩和列，并将所有结果转换为可以工作的数据帧。因此，如果有人可以帮助我完成这项任务，那就太好了

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:13:38.807

我想这就是你要写的：

```
sim <- function(x) { #takes a data.frame
  for(k in 1:ncol(x)) {  #each column set as numeric
    x[,k] <- as.numeric(x[, k])
    x[,k] <- sample(x[, k])  #randomly shuffle values in each column
    x[,k] <- rank(x[, k], ties.method = "min") #rank each randomly shuffled columns
  }
  rsum_s <- rowSums(x) #take the sum of the rows
  return(rsum_s)  
} 
```

你做错的一些事情：

1.  `as.numeric`除非你分配结果，`sample`否则没有效果，但最重要的是
2.  和必须移到循环外的末尾，`rowSums`否则函数将在处理完第一列后退出。`return``for`

`x`上面的代码仍然不是很有效，因为在每次迭代中，您都要多次替换整个代码。我建议您查看`apply`功能系列，执行以下操作：

```
sim <- function(x) {
    fun <- function(z) rank(sample(as.numeric(z)), ties.method = "min")
    y   <- as.data.frame(lapply(x, process.one.col))
    rownames(y) <- rownames(x)
    rowSums(y)
} 
```

# java - 警告：表单令牌与会话令牌不匹配 null

> ID：15851178
> 
> 赞同：0
> 
> 时间：2013-04-06T12:51:02.277
> 
> 标签：java, jsp, struts2, double-submit-problem, struts2-interceptors

这个警告的原因是什么？

```
WARNING: Form token PR78LAIFZJQRTL66GGAJDT61511L6YHN does not match the session token null 
```

**JSP：**

```
<s:form method="post" action="test">
     <s:token></s:token>
     Email:<input name="email" />
</s:form> 
```

**Struts.xml：**

```
<action name="test" class="test.RegisterAction">
    <interceptor-ref name="defaultStack" />
    <interceptor-ref name="token" /> 
    <result name="invalid.token">/error.jsp</result> 
    <result>/user/success.jsp</result>
    <result name="error">/error.jsp</result>
</action> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:24:19.703

拦截器的顺序`token`应该是第一位的。例如

```
<interceptor-ref name="token" />
<interceptor-ref name="defaultStack" /> 
```

您的会话令牌的原因`null`可能是会话已过期或关闭。

# iphone - 无法使用 uitapgesturerecognizer 关闭 uidatepicker

> ID：15851179
> 
> 赞同：0
> 
> 时间：2013-04-06T12:51:08.440
> 
> 标签：iphone, ios6, uidatepicker

我想使用 uidatepicker 输入日期。我已将 UITextField 的输入视图更改为 UIDatePicker 对象。**DatePicker 正在显示，没问题。**但是后来我添加了一个 UITapGestureRecognizer 以便当用户在日期选择器之外点击时，日期选择器将隐藏。在这里，我遇到了一个例外。**我无法隐藏日期选择器**。

接口文件：

```
@interface ViewController : UIViewController <UITextFieldDelegate>

{
    UIDatePicker *anewPicker;
    UITapGestureRecognizer *tapGestureRecognizer;
}

@property (weak, nonatomic) IBOutlet UILabel *labelOutlet;

@property (weak, nonatomic) IBOutlet UITextField *startTimeTxtOutlet;

@property (weak, nonatomic) IBOutlet UITextField *endTimeTxtOutlet;

@property UIDatePicker *anewPicker;

@property UITapGestureRecognizer *tapGestureRecognizer;

@end 
```

实现文件：

```
@implementation ViewController

@synthesize anewPicker;
@synthesize tapGestureRecognizer;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.anewPicker = [[UIDatePicker alloc] initWithFrame:[self.view bounds]];
    [anewPicker addTarget:self action:@selector(enteredStartDate:)     forControlEvents:UIControlEventValueChanged];
    self.startTimeTxtOutlet.inputView = self.anewPicker;
    self.endTimeTxtOutlet.inputView = self.anewPicker;

    self.tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self.view     action:@selector(dismissDatePicker:)];
    self.tapGestureRecognizer.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:self.tapGestureRecognizer];

}

-(void)enteredStartDate:(id)sender
{
    NSLog(@"start date %@",[sender date]);

}

-(void)enteredEndDate:(id)sender
{
    NSLog(@"end date %@",[sender date]);
}

-(void)dismissDatePicker:(UIGestureRecognizer*)gestureRecognizer
{
    //in this function i get the exception
    //other functions are ok

    NSLog(@"tap");

    self.anewPicker.hidden = YES;
}

@end 
```

**例外：**发送到实例的无法识别的选择器

**平台详情：**

XCode 4.5.2

部署目标：6.0

基础 SDK：6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:49:05.803

写`self.tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDatePicker:)];`而不是您为此手势`self.tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self.view action:@selector(dismissDatePicker:)];`添加了目标，但您应该将其更改为.`self.view``self`

```
 self.tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDatePicker:)];
    self.tapGestureRecognizer.delegate =self;
    self.tapGestureRecognizer.numberOfTapsRequired = 1;
    [self.view addGestureRecognizer:self.tapGestureRecognizer]; 
```

我想这会对你有所帮助。

# map - 注释不拖动

> ID：15851181
> 
> 赞同：1
> 
> 时间：2013-04-06T12:51:22.107
> 
> 标签：map, drag-and-drop, annotations, mapkit, viewcontroller

MapPin.h：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapPin : NSObject<MKAnnotation> {
CLLocationCoordinate2D coordinate;
NSString *title;
NSString *subtitle;
}
@property (nonatomic,readwrite,assign)CLLocationCoordinate2D coordinate;
- (id)initWithCoordinates:(CLLocationCoordinate2D)location placeName:(NSString  *)placeName description:(NSString *)description;
-(void)setCoordinate:(CLLocationCoordinate2D)newCoordinate;
@end 
```

这是 MapPin.m

```
#import "MapPin.h"

@implementation MapPin
@synthesize coordinate;

-(NSString *)subtitle{
return nil;
}
-(NSString *)title{
     return nil;
    }
-(id)initWithCoordinates:(CLLocationCoordinate2D)location placeName:(NSString *)placeName description:(NSString *)description{
    coordinate=location;
    return self;

}
-(CLLocationCoordinate2D)location{
    return coordinate;
}
-(void)setCoordinate:(CLLocationCoordinate2D)newCoordinate{
     coordinate=newCoordinate;
}

@end 
```

在 ViewController.h 我采用了 MKMapViewDelegate 协议。这是 ViewController.m ：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
    MKPinAnnotationView *pin = (MKPinAnnotationView *)[self.MyMap dequeueReusableAnnotationViewWithIdentifier:@"myPin"];
    if(pin == nil){
        pin=[[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@"myPin"];

    }
     else{
        pin.annotation=annotation;
    }
    pin.draggable=YES;
return  pin;
}
//Add Location button
 - (IBAction)AddPin:(id)sender {
    CLLocationCoordinate2D center;
    center.latitude=Locate.location.coordinate.latitude;
    center.longitude=Locate.location.coordinate.longitude;
    MKCoordinateRegion region;
    region.center=center;
    region.span.latitudeDelta=0.2f;
    region.span.longitudeDelta=0.2f;
    MapPin *myPin = [[MapPin alloc]initWithCoordinates:self.MyMap.centerCoordinate placeName:@"LoMinder!" description:@"Set Location for LoMinder!"];
    [_MyMap addAnnotation:myPin];
 }
 //Dropping the pin:
    - (void)mapView:(MKMapView *)mapView
 annotationView:(MKAnnotationView *)annotationView
 didChangeDragState:(MKAnnotationViewDragState)newState
   fromOldState:(MKAnnotationViewDragState)oldState
{
    //Region
    MKCoordinateRegion myRegion;
    //Center
    CLLocationCoordinate2D center;
    if (newState == MKAnnotationViewDragStateStarting)
    {
         [_MyMap setRegion:myRegion animated:YES];
    }
    if(newState == MKAnnotationViewDragStateDragging)
    {
        myRegion.center=annotationView.annotation.coordinate;
        myRegion.span.latitudeDelta=0.2f;
        myRegion.span.longitudeDelta=0.2f;
        [_MyMap setRegion:myRegion animated:YES];
    }
    if(newState==MKAnnotationViewDragStateEnding)
    {
        arrived=self.MyMap.centerCoordinate;
        center=annotationView.annotation.coordinate;
        myRegion.center=center;
        myRegion.span.latitudeDelta=0.2f;
        myRegion.span.longitudeDelta=0.2f;
        [_MyMap setRegion:myRegion animated:YES];
     }
  } 
```

///// 我还将 MapPin.h 导入到 ViewController 中。当我运行我的应用程序时，我应该按添加位置按钮以获取注释图钉，我按下按钮，注释图钉出现在地图上，但问题是当我尝试拖动它时，它似乎不可拖动。请人们帮忙。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:29:45.477

通过更改 MapPin.m 中的 title 方法解决 使其返回除 nil 以外的任何内容。

# java - 使用执行程序运行多个线程时如何立即捕获错误？

> ID：15851182
> 
> 赞同：0
> 
> 时间：2013-04-06T12:51:24.290
> 
> 标签：java, multithreading, exception, executorservice

我的代码中的第二个线程将抛出除以 0 异常，但我只会在第一个线程完成后捕获它。第一个线程可以运行几天，这意味着我只会在它发生几天后才捕获我的异常。我可以在不继承 ThreadPoolExecutor 并覆盖 afterExecute 的情况下以某种方式解决这个问题吗？

这是我的代码：

```
 ExecutorService executor = Executors.newCachedThreadPool();

    Future<Integer> future = executor.submit(new MyTestC(4000));
    Future<Integer> future2 = executor.submit(new MyTestC(0));

    ArrayList<Future<Integer>> futures = new ArrayList<>();
    futures.add(future); futures.add(future2);

    for(Future<Integer> f: futures)
    {
        try {
            int result = f.get();
            System.out.println(result);
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }
    }

class MyTestC implements Callable<Integer> {

int sleep;

public MyTestC(int sleep)
{
    this.sleep = sleep;
}

@Override
public Integer call() throws Exception {
    if(sleep > 0)
        Thread.sleep(sleep);

    //If 0 will throw exception:
    int tmp = 4/sleep;

    return sleep;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:57:53.453

你可以使用[ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)来解决这个问题。它将按照完成的顺序返回 Futures。

# python - python未定义变量

> ID：15851185
> 
> 赞同：3
> 
> 时间：2013-04-06T12:51:34.330
> 
> 标签：python, debugging

为什么方法更新中没有定义变量freq？我在 init 上调用方法蜡烛，这个方法包含频率？

```
class candle:
    def __init__(self):
        self.freq = None
        self.open_price = None
        self.high_price = None
        self.low_price = None
        self.last_price = None
        self.volume = 0

    def addTick(self,tick):
        if self.open_price is None:
            self.open_price = tick.price
        if self.high_price is None or tick.price >self.high_price:
            self.high_price = tick.price
        if self.low_price is None or tick.price <self.low_price:
            self.low_price = tick.price   
        self.last_price = tick.price
        self.volume = self.volume +1

    def update(self,tick):
        self.candle.addTick(tick)
        if keyfunc(current_time,freq) != reference_timestamp[freq]:
            self.notify(self.candle)
            self.candle = candle() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:58:12.783

Python中没有隐`self`式，访问成员变量时必须显式。

```
if keyfunc(current_time,freq) != reference_timestamp[freq]: 
```

应该

```
if keyfunc(current_time, self.freq) != reference_timestamp[self.freq]: 
```

不确定在哪里`reference_timestamp`定义，假设它是全局的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:59:01.127

您正在尝试访问局部变量（未在该范围内定义）而不是类实例属性。尝试使用 self.freq 而不是 freq。

# android - 使用 GSon 解析嵌套的 Json

> ID：15851190
> 
> 赞同：1
> 
> 时间：2013-04-06T12:52:04.707
> 
> 标签：android, json, list, parsing, gson

如何使用谷歌 Gson 解析下面的 Json 响应。？

```
{
   "rootobject":[
      {
         "id":"7",
         "name":"PP-1",
         "subtitle":"name-I",
         "key1":"punjab",
         "key12":"2013",
         "location":"",
         "key13":"0",
         "key14":"0",
         "key15":"0",
         "result_status":null
      },
      {
         "id":"7",
         "name":"PP-1",
         "subtitle":"name-I",
         "key1":"punjab",
         "key12":"2013",
         "location":"",
         "key13":"0",
         "key14":"0",
         "key15":"0",
         "result_status":null
      },
      {
         "id":"7",
         "name":"PP-1",
         "subtitle":"name-I",
         "key1":"punjab",
         "key12":"2013",
         "location":"",
         "key13":"0",
         "key14":"0",
         "key15":"0",
         "result_status":null
      },
      {
         "id":"7",
         "name":"PP-1",
         "subtitle":"name-I",
         "key1":"punjab",
         "key12":"2013",
         "location":"",
         "key13":"0",
         "key14":"0",
         "key15":"0",
         "result_status":null
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T13:10:49.937

我会创建对象来“包装”响应，例如：

```
public class Response {

  @SerializedName("root_object")
  private List<YourObject> rootObject;

  //getter and setter
}

public class YourObject {

  @SerializedName("id")
  private String id;
  @SerializedName("name")
  private String name;
  @SerializedName("subtitle")
  private String subtitle;
  //... other fields

  //getters and setters
} 
```

注意：使用 @SerializedName 注释来遵循 Java 属性中的命名约定，同时匹配 JSON 数据中的名称。

然后，您只需使用您的`Reponse`对象解析 JSON，如下所示：

```
String jsonString = "your json data...";
Gson gson = new Gson();
Response response = gson.fromJson(jsonString, Response.class); 
```

现在您可以`Response`使用 getter 和 setter 访问对象中的所有数据。

注意：您的`Response`对象可用于解析不同的 JSON 响应。例如，您可能有不包含`id`or`subtitle`字段的 JSON 响应，但您的`Reponse`对象也会解析响应，并且只需`null`在此字段中放入 a。这样你就可以只使用一个`Response`类来解析所有可能的响应......

编辑：我没有意识到Android标签，我在一个普通的Java程序中使用这种方法，我不确定它是否对Android有效......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:19:59.547

你可以试试这个希望这会奏效

```
 // Getting Array 
JSONArray contacts = json.getJSONArray("rootobject");
SampleClass[] sample=new SampleClass[contacts.length]();

    // looping through All 
    for(int i = 0; i < contacts.length(); i++){
        JSONObject c = contacts.getJSONObject(i);

        // Storing each json item in variable
        sample[i].id = c.getString("id");
        sample[i].name = c.getString("name");
        sample[i].email = c.getString("subtitle");
        sample[i].address = c.getString("key1");
        sample[i].gender = c.getString("key12");
        sample[i].gender = c.getString("location");
        sample[i].gender = c.getString("key13");
        sample[i].gender = c.getString("key14");
        sample[i].gender = c.getString("key15");
        sample[i].gender = c.getString("result_status");
       } 
```

# silverlight - silverlight 5：通过 writeablebitmap 在屏幕捕获之前强制网格同步

> ID：15851191
> 
> 赞同：1
> 
> 时间：2013-04-06T12:52:19.117
> 
> 标签：silverlight, user-interface, redraw, writeablebitmap

**在 silverlight 5 中：**我构建了一个产品配置器，它还通过图像和矩形、椭圆、多边形结构的组合来构建绘图。

配置器工作正常，绘图也很好。当产品准备好时，它会被放置在画廊（列表框）中，并且会显示绘图的缩略图以及一些主要信息。到现在为止还挺好。

我还可以将库中的配置保存到光盘 (xml) 并稍后加载它们以继续并完成。这是问题所在。我将产品一一读给配置器，然后所有业务规则都到位，然后进行绘图。但在我将产品保存到画廊的那一刻，绘图的快照保持空白。

我确信所有步骤都很好，因为当我在将产品放入画廊之前中断时，绘图显示正确。然而，在画廊中，这幅画是空白的。所以我假设存在同步/定时/更新问题，但找不到强制重绘包含图像和绘图的网格的方法。

## 在 axml 中，列表框：

```
<ListBox x:Name="lbTiles" Loaded="lbTiles_Loaded" HorizontalAlignment="left" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" Margin="2,2,0,0" Height="233" Width="892" d:LayoutOverrides="HorizontalAlignment" Background="Gainsboro" BorderThickness="2" BorderBrush="#FF606060">
<ListBox.ItemsPanel>
  <ItemsPanelTemplate>
      <StackPanel Orientation="Horizontal"/>
   </ItemsPanelTemplate>
  </ListBox.ItemsPanel>
  <ListBox.ItemTemplate>
      <DataTemplate >
         <StackPanel Orientation="Vertical" Background="Gainsboro">
            <Border BorderThickness="1" BorderBrush="#4F000000" >
              <Grid >
                 <Image Margin="0,0,0,0" Source="{Binding mImage, Mode=OneWay}" Stretch="Uniform" Height="110" ></Image>
              </Grid>
              </Border>
                <TextBox  TextAlignment="Center" IsReadOnly="True" Width="120" Height="23" Text="{Binding mName, Mode=OneWay}" IsHitTestVisible="False" IsTabStop="False" FontSize="11" />
                <TextBox  TextAlignment="Center" IsReadOnly="True" Width="120" Height="23" Text="{Binding mPrice, Mode=OneWay}" IsTabStop="False" IsHitTestVisible="False" FontSize="11" />
                 <TextBox  TextAlignment="Center" IsReadOnly="True" Width="120" Height="23" Text="{Binding mTotal, Mode=OneWay}" IsHitTestVisible="False" IsTabStop="False" FontSize="11" />
                  <TextBox  TextAlignment="Center" IsReadOnly="True" Width="120" Height="23" Text="{Binding mFreight, Mode=OneWay}" IsHitTestVisible="False" IsTabStop="False" FontSize="11" />
                  </StackPanel>
               </DataTemplate>
          </ListBox.ItemTemplate>
      </ListBox> 
```

## 网格：

```
 <Grid Name="myDrawing" Background="Gainsboro" Height="437" Width="486">
    <Rectangle Name="clrFrame" Visibility="Collapsed" Margin="27,5,32,5" StrokeThickness="0" IsHitTestVisible="False" ></Rectangle>
       <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL1" VerticalAlignment="Top" Width="429" IsHitTestVisible="False" />
       <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL0" VerticalAlignment="Top" Width="429" IsHitTestVisible="False" />
        <Rectangle Name="clrWindow_1" Visibility="Collapsed" StrokeThickness="0" IsHitTestVisible="False" ></Rectangle>
         <Rectangle Name="clrWindow_2" Visibility="Collapsed" StrokeThickness="0" IsHitTestVisible="False" ></Rectangle>
         <Rectangle Name="clrWindow_3" Visibility="Collapsed" StrokeThickness="0" IsHitTestVisible="False" ></Rectangle>
         <Ellipse Name="clrWindow_4" Visibility="Collapsed" StrokeThickness="0" IsHitTestVisible="False" />
          <Polygon Name="clrWindow_5" Visibility="Collapsed" StrokeThickness="18" IsHitTestVisible="False"></Polygon>
          <Rectangle Name="clrDoor" Visibility="Collapsed" Margin="136,196,162,122" StrokeThickness="0" IsHitTestVisible="False" ></Rectangle>
          <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL2" VerticalAlignment="Top" Width="429" IsHitTestVisible="False"/>
          <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL3" VerticalAlignment="Top" Width="429" IsHitTestVisible="False" />
          <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL4" VerticalAlignment="Top" Width="429" IsHitTestVisible="False" />
          <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL5" VerticalAlignment="Top" Width="429" IsHitTestVisible="False" />
           <Image Height="429" HorizontalAlignment="Left" Margin="25.5,4,0,0" Name="imDrawingL6" VerticalAlignment="Top" Width="429" IsHitTestVisible="False" />
      </Grid> 
```

**C# 代码**

```
for( int i = 0; i < count i++ )
{
xmlread al values to currentCasingComposition.....

writeToScreen(); // apply businessrules and do the drawing
myDrawing.InvalidateMeasure();
myDrawing.InvalidateArrange();
myDrawing.UpdateLayout();
// an exit here leaves me with the product in de confugurator and the drawing is fine
WriteableBitmap bmp = new WriteableBitmap(myDrawing, null); // capture drawing
currentCasingComposition.mImage = bmp;
currentCasingComposition.mImage.Invalidate();
currentCasingComposition.calculatePrice();
    ocCasingCompositions.Add(currentCasingComposition); to gallery via ObservableCollection
} 
```

谁知道解决方法？

BR，吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:53:57.940

UpdateLayout() 在 UI 线程上是异步的，因此您应该在调用块的其余部分之前等待它完成。不幸的是，我找不到关于如何在 UpdateLayout() 完成时获得通知的信息。所有引用它的示例都使用 DispatcherTimer 在继续之前等待一秒钟左右。所以我要做的是创建一个一次性调度程序计时器，将其间隔设置为 1000 毫秒（或更少，根据需要），然后在 Tick 事件上执行其余代码。

# python - BeautifulSoup 将正则表达式作为参数传递

> ID：15851193
> 
> 赞同：0
> 
> 时间：2013-04-06T12:52:40.383
> 
> 标签：python, regex, python-2.7, beautifulsoup

我有这个html：

```
title="Keeper: Michal Buchalik" class="pos_text">Buchalik</a></span>                
                                            <span class="pos_text pos3_l_5"> 
```

我尝试匹配`Buchalik`。

我想出了这段代码：

```
for gk in soup.find_all(re.compile("pos_text pos3_l_\d{1,2}")):
    print gk.previous_element.previous_element, 
```

它不匹配任何东西，并且正则表达式一定有问题，因为当我输入某个数字代替它时，`\d{1,2}`它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:40:41.163

由于它是 python，因此您需要将 r 用于“原始文本”或转义 '\' 字符：

```
re.compile(r"pos_text pos3_l_\d{1,2}")

OR

re.compile("pos_text pos3_l_\\d{1,2}") 
```

看看有没有帮助。

干杯。

# java - 对空结果集的非法操作 - 如何检查它是否为空？

> ID：15851198
> 
> 赞同：0
> 
> 时间：2013-04-06T12:53:21.470
> 
> 标签：java, mysql, resultset

我的 Java 插件有问题 - 当没有找到结果时，它说结果集是空的。有人能告诉我如何检测结果集是否为空吗？

```
String url = "jdbc:mysql://" + host + ":" + port + "/" + database + "";

Connection conn = DriverManager.getConnection(url, username, password);
Statement stmt = conn.createStatement();

ResultSet rs;
String p = pp.getName();
rs = stmt.executeQuery("SELECT * FROM " + table + " WHERE username='"
        + p + "' AND recieved=0 ORDER BY id DESC");
rs = stmt.getResultSet(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:35:37.070

标准方法是尝试使用该`next()`方法获取下一行，并检查它是否返回`false`（意味着没有下一行，所以它是空的）。像这样：

```
ResultSet rs;
// run query on database
if (!rs.next()) {
    // no row(s) found from database
} else {
    // row(s) found from database OK
} 
```

`do...while`编写一个循环可以很方便：

```
if (!rs.next()) {
    // handle no rows found
} else {
    // process all rows
    do {
        // process row
    } while (rs.next());
} 
```

# javascript - javascript 正则表达式在 Firefox 中失败

> ID：15851199
> 
> 赞同：0
> 
> 时间：2013-04-06T12:53:26.413
> 
> 标签：javascript, css, regex, background-image

我正在用 chrome 开发正则表达式，一切正常......然后我在 Firefox 中尝试了相同的网页（对于 ubuntu v 20）并看到了这个：`TypeError: imageName is null`.
我找不到原因。这是我的代码：
bg 类似于`http://localhost:3000/images/gallery/905/thumb/905.jpg`

```
 bg =  $('div.image',Clicked).css('background-image')
    bg = bg.replace('url(','').replace(')','');
    console.log('bg')
    console.log(bg)
    var imageNameRegexp = /\/([0-9]+)(\.[a-z]{3,4})$/i
    var imageName =  bg.match(imageNameRegexp)
    var imageLocation = '/images/gallery/'+imageName[1]+'/large_croped/'+imageName[1]+imageName[2];
       console.log(imageLocation);
    $('#big_project_image').css('background-image','url("' + imageLocation+'")'); 
```

它的作用：
它获取一个 div 的 background-image 属性，解析它，获取图像名称和扩展名。分配给该图像的另一个 div 更大版本。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:53:26.413

更改正则表达式以在末尾包含引号`"?'?`。Firefox 在属性值中包含引号
`var imageNameRegexp = /\/([0-9]+)(\.[a-z]{3,4})"?'?$/i`

# cakephp - 如何为自定义路由设置 cakephp 分页器 url

> ID：15851210
> 
> 赞同：0
> 
> 时间：2013-04-06T12:54:52.783
> 
> 标签：cakephp, routing, paginator

我正在制作博客和 url 路由是这样的-

```
Router::connect('/blog/c/:catid/*', 
array('controller' => 'blogarticles', 'action' => 'index')); 
```

它适用于 url as-/blog/c/3/other-articles

但是当我在视图中使用分页器时

```
 echo $this->Paginator->numbers(); 
```

它生成网址为- /blogarticles/index/other-articles/page:2

应该在分页器中进行哪些更改以生成正确的 url。

请提出可能的解决方案，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-02T17:47:41.037

这应该可以解决您的问题：

```
$this->Paginator->options(
    array(
        'controller' => 'blog',
        'action' => 'c',
        $catid,
        $title
    )
); 
```

诀窍是依次传递 blog 作为控制器和 c 作为动作，以及所有其他变量（不限于 $catid 和 $title）作为附加参数，顺序！

注意：我在这里假设你已经从你的控制器“设置”了 $catid 和 $title，到当前的“类别 id”和“标题”。我还假设您的 URL 始终采用以下格式：/blog/c/:catid/:title

您可能还想查看我对类似问题的回答：[https ://stackoverflow.com/a/25097693/2862423](https://stackoverflow.com/a/25097693/2862423)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:00:56.463

您想要的是为该视图设置 PaginatorHelper 的选项：

`<?php $this->Paginator->options(array('url' => '/blog/c/3/other-articles')); ?>`

关于 PaginatorHelper 选项功能的 CakePHP 书籍部分：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#modifying-the-options-paginatorhelper-uses](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#modifying-the-options-paginatorhelper-uses)

# java - java局部变量不可用

> ID：15851215
> 
> 赞同：2
> 
> 时间：2013-04-06T12:55:24.783
> 
> 标签：java, variables, scope

我从 Eclipse 调试器中收到以下错误：局部变量不可用。试图尽可能地修剪代码。问题很简单，我必须使用 Divise 类中的 DivisiveUI UpdateLog() 方法，使用 Cluster 类中的变量。Divise 有一个包含所有集群的列表。Divisive 和 DivisiveUI 相互引用。如何访问 Divisive 类中的变量：sumDistance、avgDistance？尝试在 Divisive 类中编写方法，仍然无法访问所需的变量：| 谢谢！

在 log.append(text+"\n"); 未找到源。

分裂：

```
 package clusters;

        import java.util.LinkedList;

        public class Divisive implements Runnable
        {
            LinkedList<Record> mainTable;
            LinkedList<Cluster> clusterList;
            int meassureType;
        DivisiveUI parent;
        int clusterCount;

        Divisive(LinkedList<Record> mainTable, DivisiveUI parent)
        {
            this.parent=parent;
            this.mainTable=new LinkedList<Record>(mainTable);
            setMeassureType(0);
        }

    } 
```

分裂UI：

```
 package clusters;

@SuppressWarnings("serial")
public class DivisiveUI extends JPanel implements Runnable{

    ClusteringSelection parent;
    Divisive divisive;
    JTextField clusterCount;
    JTextArea log;

    public void UpdateLog(String text)
    {
        log.append(text+"\n");
        log.setCaretPosition(log.getDocument().getLength());
    }
} 
```

簇：

```
 package clusters;

public class Cluster 
{
    LinkedList<Record> table;
    LinkedList<MatrixRow> matrix;

    LinkedList<Double> center;
    double sumDistance;
    double avgDistance;

    int meassureType;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T13:52:24.987

如果调试器无法访问局部变量，则意味着代码尚未使用从字节码中添加局部变量调试信息的选项进行编译。

检查你是如何编译类的，并确保这些信息在编译的类中。如果使用 javac，则添加`-g`选项以显示所有调试信息。

# jquery - 在 Python 中使用 jquery 获取 json 数据并显示

> ID：15851217
> 
> 赞同：0
> 
> 时间：2013-04-06T12:55:32.713
> 
> 标签：jquery, python, django, json, django-views

json 文件，其中包含一些数据。使用 jQuery 我需要显示到页面中。

.json 文件是

```
{
"p1":{
      "item1":"apple",
      "item2":"orange",
      "item3":"banana",
      },
"p2":{
      "item1":"water",
      "item2":"milk",
      "item3":"alcohol",
     }
} 
```

我的模板是

```
<html>
    <head>
    <body>
    <ul></ul>
    <button></button>
    <script src="script/jquery-1.9.1,min.js" type="text/javascript"></script>
    <script src="script/myscript.js" type="text/javascript"></script>
    </body>
    </head>
</html> 
```

myscript.js 文件是

```
$("button").click(function(){
    $.getJSON("item.json",function(obj){
       $.each(obj,function(key,value){
          $("ul").append("<li>+value.item1+"</li>");
          $("ul").append("<li>+value.item2+"</li>");
          $("ul").append("<li>+value.item3+"</li>");
       });
    });
}); 
```

当按下页面中的“getjson”按钮时，Json 数据被加载到页面中，但页面正在刷新，没有加载任何数据。如何做到这一点，我认为上面的代码中有一些错误，或者我是否需要在视图中编写任何函数。 py 使用 python。

请帮助我做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:25:44.910

首先，您应该考虑使用 JQuery on-ready 功能（[http://api.jquery.com/ready/](http://api.jquery.com/ready/)）：

```
$(function() {
   ...
}); 
```

这样，一旦加载了所有 html，您的代码就会执行并且您不会遇到问题，因为您切换了`<script>`-Tag 的顺序（例如进入头部）并且突然找不到您的按钮。

其次，正如凯瑟琳在评论中提到的，你应该给你的按钮一个 id 或类，以识别它。没有它它也应该工作，但我刚刚检查过，这似乎不起作用。然后你可以使用 CSS-Selector 作为 id`$("#MyButton")`

```
<button id="MyButton">My Button</button>
<script type="text/javascript">
    $(function() {
        $("#MyButton").click(function() { 
        });
    });
</script> 
```

接下来你有 JSON 部分。`$.getJSON(url, data, success)`. 所以首先你需要 json 文件的 url。如何获取 url 取决于您的文件在哪里。如果是视图，请包含指向视图（`{% url "project.app.views.get_json" %}`例如）或静态文件（`{{STATIC_URL}}/js/data/file.json`例如）的链接。如果文件在您的fixtures-dir中，那么您必须创建一个视图，加载该文件并将内容作为响应返回，或者将文件复制到静态文件夹之一，具体取决于您想要的内容。期望 Javascript（客户端）在您的服务器（服务器端）上找到文件是行不通的，因为服务器上没有提供文件的某些部分。（出于类似目的，我有一个小装饰器，它将视图的返回值 - python-dict、数组、值 - 呈现为 json 并创建一个适当的 HttpResponse-Object）

该`data`参数可能会被跳过，所以最后一个参数是success-callback：

```
<button id="MyButton">My Button</button>
<script type="text/javascript">
    $(function() {
        $("#MyButton").click(function() { 
            $.getJSON("your url here", function(data) {
                console.log(data); #Print the data to console
            }).fail(function() {
                console.log("Something went wrong with the request!");
            });
        });
    });
</script> 
```

从那里您应该能够访问数据。有关更多回调，如`fail()`查看 API：[http](http://api.jquery.com/jQuery.getJSON/) ://api.jquery.com/jQuery.getJSON/ 请注意，在将数据添加到 ul 的代码段中，引号有错误，您还可以链接调用追加，以避免一遍又一遍地查找相同的标签：

```
$("#myList")
    .append("<li>" + value.item1 + "</li>")
    .append("<li>" + value.item2 + "</li>")
    .append("<li>" + value.item3 + "</li>"); 
```

# php - TCPDF 自定义页脚 (HTML!)

> ID：15851222
> 
> 赞同：0
> 
> 时间：2013-04-06T12:55:52.260
> 
> 标签：php, html, tcpdf

我找到了如何使用 TCPDF 创建自定义页脚，但这仅适用于文本。有没有可能使用html？有一个名为“writeHTMLCell”的函数，但它需要 x 和 - 坐标，我认为这是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:58:49.143

您可以使用 TCPDF 类的 getX() 和 getY() 函数获取 X 和 Y 坐标。

# linux-kernel - 物理/逻辑/虚拟内存地址之间的区别

> ID：15851225
> 
> 赞同：37
> 
> 时间：2013-04-06T12:56:01.820
> 
> 标签：linux-kernel, operating-system, virtual-memory

我对操作系统中的物理/逻辑/虚拟地址这些术语有点困惑（我使用 Linux-open SU​​SE）

这是我的理解：

1.  物理地址 - 当处理器处于系统模式时，处理器使用的地址是物理地址。

2.  逻辑地址——当处理器处于用户模式时，使用的地址是逻辑地址。这些无论如何都通过添加带有偏移值的基址寄存器映射到某个物理地址。它以某种方式提供了一种内存保护。

3.  我遇到过关于虚拟地址和逻辑地址/地址空间相同的讨论。这是真的吗？

任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-06T13:21:51.653

*对于在现代 Linux 系统上运行的 Intel CPU，我的回答是正确的，我说的是用户级进程，而不是内核代码。不过，我认为它会给你一些足够的洞察力来思考其他可能性*

### 地址类型

关于问题3：

> 我遇到过关于虚拟地址和逻辑地址/地址空间相同的讨论。这是真的吗？

据我所知，它们是相同的，至少在运行在英特尔处理器之上的现代操作系统中。

在我解释更多之前，让我尝试定义两个概念：

*   **物理地址**：RAM 芯片中物理位置的地址。
*   **逻辑/虚拟地址**：你的程序用来访问它的东西的地址。它通常稍后由硬件芯片转换为物理地址（大多数情况下，甚至 CPU 都没有真正意识到这种转换）。

### 虚拟/逻辑地址

虚拟地址很好，一个虚拟地址，操作系统连同一个称为 MMU（内存管理单元）的硬件电路欺骗你的程序，它在系统中单独运行，它拥有整个地址空间（拥有 32 位系统意味着你程序会认为它有 4 GB 的 RAM；粗略地说）。

显然，如果您同时运行多个程序（您总是这样做，GUI、Init 进程、Shell、时钟应用程序、日历等），这将不起作用。

将会发生的情况是操作系统会将您的大部分程序内存放在硬盘中，它使用最多的部分将出现在 RAM 中，但是嘿，这并不意味着它们将拥有您和您的程序的地址知道。

**示例：**您的进程可能有一个名为 (counter) 的变量，其虚拟地址为 0xff（可以想象...），另一个名为 (oftenNotUsed) 的变量为虚拟地址 (0xaa)。

如果您在所有链接发生后阅读编译代码的程序集，您将使用这些地址访问它们，但是（通常未使用的）变量不会真正存在于 RAM 中的 0xaa，它会在硬盘中因为进程没有使用它。

此外，变量（计数器）可能不会在物理上位于（0xff），它将位于 RAM 中的其他位置，当您的 CPU 尝试获取 0xff 中的内容时，MMU 和操作系统的一部分将进行映射并从 RAM 中真正可用的位置获取该变量，CPU 甚至不会注意到它不在 0xff 中。

现在，如果您的程序要求 (oftenNotUsed) 变量会发生什么？MMU+OS 会注意到这个“未命中”并将其从硬盘中提取到 RAM 中供 CPU 使用，然后将其交给 CPU，就好像它在地址 (0xaa) 中一样；此获取意味着 RAM 中存在的一些数据将被发送回硬盘。

现在想象一下，这对系统中的每个进程都运行。每个进程都认为他们有 4GB 的 RAM，实际上没有人拥有，但一切正常，因为每个人的程序的某些部分在 RAM 中物理可用，但大部分程序驻留在硬盘中。不要将这部分以 HD 格式放入的程序存储器与您可以通过文件操作访问的程序数据相混淆。

### 概括

**虚拟地址**：您在程序中使用的地址，您的 CPU 用于获取数据的地址，不是真实的，而是通过 MMU 转换为某个物理地址；每个人都有一个，它的大小取决于你的系统（运行 32 位的 Linux 有 4GB 地址空间）

**物理地址**：如果您在操作系统之上运行，您将永远无法到达的地址。它是您的数据（无论其虚拟地址如何）驻留在 RAM 中的位置。如果您的数据来回发送到硬盘以容纳更多空间用于其他进程，这将改变。

我上面提到的所有内容，虽然是整个概念的简化版本，但就是所谓的计算机系统的内存管理部分。

### 该系统的后果

*   进程无法访问彼此的内存，每个人都有各自的虚拟地址，并且每个进程都会获得不同的翻译到不同的区域，即使有时您可能会发现两个进程试图访问相同的虚拟地址。
*   该系统作为缓存系统运行良好，您通常不会使用可用的全部 4GB，那么为什么要浪费它呢？让其他人分享它，让他们也使用它；当您的进程需要更多时，操作系统将从 HD 中获取您的数据并替换其他进程的数据，当然这是有代价的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-06T13:10:27.280

> 物理地址 - 当处理器处于系统模式时，处理器使用的地址是物理地址。

不一定是真的。这取决于特定的 CPU。在 x86 CPU 上，一旦启用了页面转换，所有代码将停止使用物理地址或可简单转换为物理地址的地址（SMM、AFAIK 除外，但这在这里并不重要）。

> 逻辑地址——当处理器处于用户模式时，使用的地址是逻辑地址。这些无论如何都通过添加带有偏移值的基址寄存器映射到某个物理地址。

逻辑地址不一定适用于用户模式。在 x86 CPU 上，它们也存在于内核模式中。

> 我遇到过关于虚拟地址和逻辑地址/地址空间相同的讨论。这是真的吗？

这取决于特定的 CPU。x86 CPU 可以配置为不显式使用段。它们被隐式使用，并且它们的基数始终为 0（线程本地存储段除外）。当您从逻辑地址中删除段选择器时，剩下的是一个 32 位（或 64 位）偏移量，其值与 32 位（或 64 位）虚拟地址一致。在这个简化的设置中，您可能会认为两者相同或逻辑地址不存在。这不是真的，但对于大多数实际目的来说，这已经足够近似了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-12T09:05:42.040

**我指的是基于intel x86 CPU的以下答案**

逻辑地址与虚拟地址之间的区别

每当您的程序正在执行时，CPU 都会为包含（16 位段选择器和 32 位偏移量）的指令生成逻辑地址。基本上，虚拟（线性地址）是使用逻辑地址字段生成的。

段选择器是 16 位字段，其中前 13 位是索引（这是指向驻留在 GDT 中的段描述符的指针，如下所述），1 位 TI 字段（TI = 1，请参阅 LDT，TI=0 请参阅 GDT）

现在段选择器或说段标识符是指代码段或数据段或堆栈段等。Linux 包含一个 GDT/LDT（全局/本地描述符表），其中包含每个段的 8 字节描述符并保存基（虚拟）地址分割。

因此，对于每个逻辑地址，使用以下步骤计算虚拟地址。

1) 检查段选择器的 TI 字段以确定哪个描述符表存储段描述符。该字段指示描述符位于 GDT 中（在这种情况下，分段单元从 gdtr 寄存器中获取 GDT 的基线性地址）或在活动 LDT 中（在这种情况下，分段单元获取该 GDT 的基线性地址） LDT 来自 ldtr 寄存器）。

2) 根据段选择器的索引字段计算段描述符的地址。索引字段乘以 8（段描述符的大小），并将结果添加到 gdtr 或 ldtr 寄存器的内容中。

3）将逻辑地址的偏移量添加到段描述符的Base域，从而得到线性（虚拟）地址。

现在，分页单元的工作是从虚拟地址转换物理地址。

参考：了解 linux 内核，第 2 章内存寻址

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-01T09:50:44.890

通常发出的每个地址（对于 x86 架构）都是一个逻辑地址，它通过段表转换为线性地址。转换成线性地址后，再通过页表转换成物理地址。
一篇很好的文章深入解释了这一点：http:
[//duartes.org/gustavo/blog/post/memory-translation-and-segmentation/](http://duartes.org/gustavo/blog/post/memory-translation-and-segmentation/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-28T12:23:18.950

**用户虚拟地址** 这些是用户空间程序看到的常规地址。用户地址的长度为 32 位或 64 位，具体取决于底层硬件架构，并且每个进程都有自己的虚拟地址空间。

**物理地址** 处理器和系统内存之间使用的地址。物理地址是 32 位或 64 位的数量；在某些情况下，甚至 32 位系统也可以使用 64 位物理地址。

**总线地址** 外围总线和内存之间使用的地址。通常它们与处理器使用的物理地址相同，但不一定如此。当然，总线地址高度依赖于体系结构。

**内核逻辑地址** 这些构成了内核的正常地址空间。这些地址映射大部分或全部主存储器，并且通常被视为物理地址。在大多数架构上，逻辑地址及其相关的物理地址仅相差一个恒定的偏移量。逻辑地址使用硬件的本机指针大小，因此可能无法寻址大量配备的 32 位系统上的所有物理内存。逻辑地址通常存储在 unsigned long 或 void * 类型的变量中。从 kmalloc 返回的内存有一个逻辑地址。

**内核虚拟地址** 这些与逻辑地址的不同之处在于它们不必直接映射到物理地址。所有逻辑地址都是内核虚拟地址；vmalloc 分配的内存也有一个虚拟地址（但没有直接的物理映射）。函数 kmap 返回虚拟地址。虚拟地址通常存储在指针变量中。

如果您有逻辑地址，宏 __pa()（定义在 中）将返回其关联的物理地址。物理地址可以使用 __va() 映射回逻辑地址，但仅限于低内存页面。

[参考](https://www.xml.com/ldd/chapter/book/ch13.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-02T14:17:52.250

物理地址是内存单元看到的地址，即加载到内存地址寄存器中的地址。逻辑地址是 CPU 生成的地址。用户程序永远看不到真实的物理地址。内存映射单元将逻辑地址转换为物理地址。用户进程生成的逻辑地址在使用前必须映射到物理内存。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-30T17:43:40.067

逻辑内存相对于相应的程序，即（程序的起点+偏移量）

虚拟内存使用映射到内存和磁盘的页表。通过这种方式，每个进程都可以为每个单独的进程承诺更多的内存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-06T13:23:50.017

在用户模式或用户空间中，程序看到的所有地址都是虚拟地址。在内核模式下，内核看到的地址仍然是虚拟的，但被称为逻辑地址，因为它们等于物理 + pageoffset。物理地址是 RAM 可以看到的地址。使用虚拟内存，程序中的每个地址都通过页表。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-08T21:19:17.030

当你写一个小程序时，例如：

```
int a=10;
int main()
{
 printf("%d",a);
}   

compile: >gcc -c fname.c
>ls 
fname.o //fname.o is generated
>readelf -a fname.o >readelf_obj.txt 
```

/ *readelf 是一个用于理解目标文件和可执行文件的命令，它们将在 0 和 1 中。输出写入 readelf_onj.txt 文件*/

```
`>vim readelf_obj.txt` 
```

/* 在“部分标题”下，您将看到目标文件的 .data .text .rodata 部分。每个起始地址或基地址都从 0000 开始并增长到相应的大小，直到达到标题“大小”下的大小---->这些是逻辑地址。*/

```
>gcc fname.c
>ls
a.out //your executabe
>readelf -a a.out>readelf_exe.txt
>vim readelf_exe.txt 
```

/* 这里所有节的基地址都不为零。它将从特定地址开始并结束于特定地址。链接器会给所有的节提供连续的地址（在 readelf_exe.txt 文件中观察。观察每个节的基地址和大小。它们连续启动）所以只有基地址不同。---> 这称为虚拟地址空间。*/

物理地址->内存将具有物理地址。当您的可执行文件加载到内存中时，它将具有物理地址。实际上，虚拟地址被映射到物理地址以供执行。

# list - 与 Scheme 中的更多列表相交

> ID：15851228
> 
> 赞同：2
> 
> 时间：2013-04-06T12:56:15.103
> 
> 标签：list, scheme, racket, intersection

我正在尝试与 Scheme 中的更多列表相交，我需要一些帮助。列表如下所示：

前两个：

```
(((?x john) (?city new-york))  
 ((?x mike) (?city chicago))  
 ((?x mary) (?city london))) 
```

和

```
(((?city chicago))     
 ((?city new-york))) 
```

我需要查看第一个列表中的每个列表（比如 A），看看第二个列表中是否有一个列表（比如 B），以便 A 至少有一个与 B 相同的元素。如果没有这样的元素，结果列表将不包含 A。上述两个列表的结果将是：

```
(((?x john) (?city new-york))  
 ((?x mike) (?city chicago))) 
```

因为该列表`((?x mary) (?city london))`与来自`(((?city chicago) ((?city new-york)))`.

现在结果列表必须与下一个列表相交：

```
(((?x mike) (?game tennis))  
 ((?x john) (?game air-hockey))) 
```

结果列表中的第一个列表`((?x john) (?city new-york))`将与我的新结果列表中的第一个列表`(?x john)`相同`((?x john) (?game air-hockey))`，因此在我的新结果列表中，第一个列表将如下所示`((?x john) (?city new-york) (?game air-hockey))`：按照第二个列表的这种模式，我将得到`((?x mike) (?city chicago) (?game tennis))`，我的新结果列表将是：

```
(((?x john) (?city new-york) (?game air-hockey))  
 ((?x mike) (?city chicago) (?game tennis))) 
```

这意味着，对于每两个至少有一个共同元素的列表，我必须重新组合并将其添加到新的结果列表中。

现在我的问题是，你能帮我在 Scheme 中实现这个吗？我不想要代码，只想要一些关于我应该使用哪些功能的想法:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:26:04.523

我知道你必须用列表来解决这个问题，我不会写一个列表实现，因为它会很麻烦（它不是工作的最佳数据结构），相反我会告诉你如何解决这个问题Racket 的集合操作，因此您可以将其转换为使用列表。首先，数据的表示：

```
(define s1 (set (set '(?x john) '(?city new-york))
                (set '(?x mike) '(?city chicago))
                (set '(?x mary) '(?city london))))

(define s2 (set (set '(?city chicago))
                (set '(?city new-york))))

(define s3 (set (set '(?x mike) '(?game tennis))
                (set '(?x john) '(?game air-hockey)))) 
```

有了表示，我们需要一个给定单个数据的过程，如果它与数据列表共享某些元素，它会找到一个匹配项，如果它没有找到任何匹配项，它会返回数据的并集返回`#f`：

```
(define (find-match one-set set-of-sets)
  (cond ((set-empty? set-of-sets)
         #f)
        ((not (set-empty? (set-intersect one-set (set-first set-of-sets))))
         (set-union one-set (set-first set-of-sets)))
        (else
         (find-match one-set (set-rest set-of-sets))))) 
```

例如：

```
(find-match (set '(?x mike) '(?city chicago))
            (set (set '(?x mike) '(?game tennis))
                 (set '(?x john) '(?game air-hockey))))

=> (set '(?x mike) '(?city chicago) '(?game tennis)) 
```

现在很容易编写一个重复匹配一组数据中的所有元素与另一组数据的过程：

```
(define (join s1 s2)
  (let loop ((s1 s1)
             (result (set)))
    (if (set-empty? s1)
        result
        (let ((match (find-match (set-first s1) s2)))
          (if match
              (loop (set-rest s1) (set-add result match))
              (loop (set-rest s1) result)))))) 
```

例如，`s1`和`s2`（如上定义）之间的第一个匹配项如下所示：

```
(join s1 s2)

=> (set (set '(?x mike) '(?city chicago))
        (set '(?x john) '(?city new-york))) 
```

要在多组数据中查找连续匹配，只需`join`根据需要多次调用，每组数据累积结果：

```
(define (join-all . data)
  (if (empty? data)
      (set)
      (foldr join (first data) (rest data))))

(join-all s1 s2 s3) ; equivalent to (join (join s1 s2) s3)

=> (set
     (set '(?x john) '(?city new-york) '(?game air-hockey))
     (set '(?x mike) '(?city chicago)  '(?game tennis))) 
```

如您所见，最终结果是我们预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:22:51.687

我将从改善您的描述开始。`(?x john)`不是一个`list`它是一个`query`。并且`((?x john) (?city new-york))`不是列表列表，它是`proposition`（？？）。和

```
(((?x john) (?city new-york))  
 ((?x mike) (?city chicago))  
 ((?x mary) (?city london))) 
```

不是列表列表的列表，它是一个`set of propositions`.

一旦你开始明确地描述事物，你就可以开始在实体上定义一些操作：

```
query_match
query_has_variable
proposition_has_query
proposition_extend
etc 
```

# java - 如何加载和更新实体以增加 Hibernate @Version 属性？

> ID：15851229
> 
> 赞同：1
> 
> 时间：2013-04-06T12:56:24.587
> 
> 标签：java, hibernate

我想更新我的实体的@Version 属性，而不对实体进行任何更改。该实体具有另一个实体的子集合。我想用 @Version 属性更新基本实体，以在 Hibernate 控制下获取该实体版本的新值。我有类似的东西（`attribute`不是带有@Version注释的属性）：

```
MyEntity entity = (MyEntity) getSession().load(Entity.class, id);
entity.setAttribute(new String(entity.getAttribute()));
getSession().update(entity); 
```

但这不起作用。仅当我为其属性之一设置新值时，实体才具有新版本值。在这种情况下，如何加载和更新实体以增加 Hibernate @Version 属性而不进行任何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:03:05.743

实际上，您应该通过使用以下命令锁定您的实体来增加版本`LockMode.FORCE`：

```
Session session = getSessionFactory().openSession();
Transaction tx = session.beginTransaction();
MyEntity u = (MyEntity) session.get(MyEntity.class, id);
session.lock(u, LockMode.FORCE);
tx.commit();
session.close(); 
```

# size - 编写 ATA 驱动程序 LBA28 与 LBA48 混淆

> ID：15851231
> 
> 赞同：2
> 
> 时间：2013-04-06T12:56:47.900
> 
> 标签：size, driver, hardware, hard-drive, ata

我目前正在尝试让 LBA 为我的 ATA 驱动程序工作，但我遇到了问题。

我的`identify`函数返回 OK 并`word 83;bit 10`设置了返回的标识数据，所以我的设备支持 LBA48。但是当我尝试获取 LBA48 扇区的总数（配置字 100-103）时，它给了我的零。在虚拟机中我有 1GB 磁盘集，但这个字段仍然为零。我还尝试获取 LBA28 扇区的数量 => 这是正确的扇区。

有趣的是，当我打印出来时`heads * cylinders * sectors_per_track`，该值几乎与位于字 60-61 上的总 LBA28 扇区的值相同。它是`2097152`总 LBA28 和 2096640 的`h * c * s`. 这两个值的差是`512`。

有人知道我在做什么错吗？有没有其他方法可以获取硬盘的大小？

# image - Bootstrap 和图像：对于使用 Bootstrap 实现的设计，预调整图像大小的最佳尺寸是多少？

> ID：15851237
> 
> 赞同：0
> 
> 时间：2013-04-06T12:57:30.170
> 
> 标签：image, wordpress, twitter-bootstrap, wordpress-theming

我正在使用 CMS（阅读：WordPress）。虽然我意识到 Bootstrap 会即时调整 img 大小，但我是否应该（例如）让 WP 为每个 BS span# 宽度创建一个图像版本？或者你认为拥有 span2、span4、span6 等是否足够接近，只是下一个跨度的稍微大一点的图像。例如，如果您需要 span1 中的图像，您会简单地使用 span2 图像吗？

我试图在图像大小与实用和合理之间取得平衡。

也许这不是 StackoverFlow 问题？我的道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:21:07.120

好吧，没有这样的限制或理想的尺寸。人们可以使用宽度大于 1000 像素或小于 50 像素的图像。这是引导程序的美妙之处，如果跨度宽度小于图像宽度，它会自动调整图像大小。

因此，在开发主题时，这不应该真正打扰我们。您可以注意的一件事是，测量 Web 开发人员工具中最常用的跨度宽度，并将理想的图像尺寸设置为比跨度宽度小一点。

您不需要其他功能来调整图像大小。这将是一个矫枉过正。

# python - (python) 我的变量应该是本地的还是全局的？（最佳实践）

> ID：15851238
> 
> 赞同：6
> 
> 时间：2013-04-06T12:57:31.263
> 
> 标签：python, variables, coding-style, global-variables, local-variables

当声明一个仅用于一个函数的常量时，该变量应该在本地声明，因为它只由该函数使用，还是全局声明，因为它永远不会改变？

IE哪个更好：

```
CONSTANT = (1, 3, 5, 8)

##SOME OTHER CODE HERE

def function1(arg):
    if arg in CONSTANT:
        do something 
```

或者：

```
def function1(arg):
    CONSTANT = (1, 3, 5, 8)
    if arg in CONSTANT:
        do something 
```

我知道这两者之间没有太大区别，但我只是想知道这两种做法中哪一种更受欢迎，因为我刚刚开始并想养成良好的习惯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:01:37.377

我会把它放在本地。如果需要，您可以随时将其移动到全局，或者通过在类中使它们成为方法并将常量转换为类变量来在函数之间共享它。在这些情况下，一般来说，越本地越好，最好将实现信息隐藏在您的函数中，如您的第二个示例所示。它在这里并没有太大的不同，但是随着您的项目变得更大，可维护性和模块化将保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:11:45.097

我会将它们放在全球范围内，因为：

1.  你的*变量*是*常量*
2.  在 Python 中，*全局作用域*被封装在模块命名空间中，这意味着您的变量实际上只是模块内部的全局变量。
3.  如果你多次调用你的函数，并将你的常量放在本地，它会在你每次调用函数时重新分配它们。
4.  然后你可以在不同的函数之间共享你的常量。

但是，如果您转向面向对象编程，那么我会将常量作为类变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:34:16.523

我想说什么是最好*的取决于情况*。

**如果执行时间不是问题**，那么每次将常量加载到新变量中不会浪费太多时间。这具有显式显示代码中使用常量的位置的明显优势。

否则，全局很好，但我只会出于优化目的这样做。如果我想到它，*优化*是我问自己和你一样的问题的唯一原因。

使用全局变量可能还有其他充分的理由：

*   如果您的程序的用户经常需要在代码中更改其值并且您不想解析程序参数，
*   如果其他程序需要访问它，
*   等等

总之，我想说：做你认为最好的事情，但尽可能合理地将事物封装在它们所属的地方（本地人比全局人更受欢迎）。

# ajax - HighStocks 不更新 URL

> ID：15851243
> 
> 赞同：0
> 
> 时间：2013-04-06T12:58:04.733
> 
> 标签：ajax, json, highcharts, jsonp, highstock

我发布了这个问题[AJAX URL update](https://stackoverflow.com/questions/15838447/ajax-url-update)因为我认为我的代码问题出在 AJAX 上，但我认为这可能是 HighStocks 的问题。

我有一个具有以下功能的外部 .js 文件：

```
 //uses AJAX call to retrieve data and then creates the chart with the data
    function createChart(ticker) {

        $.ajax({
            type: 'post',
            url: 'http://...' + ticker + '....com',
            success: function (data, status) {
            //chart is rendered in here
            }

    //gets the user inputted ticker symbol from a HTML input box
    // and passes to chart function
    function getTicker() {
        var ticker = document.getElementById('userInput').value;
        createChart(ticker);
    } 
```

我的 HTML 文件只有一个简单的表单，其中包含一个输入框和一个按钮，单击该按钮会调用 getTicker 函数。由于某种原因，未创建图表，并且 AJAX 调用似乎不起作用。

这可能是 HighStocks 的东西吗？任何建议，将不胜感激。

**更新**感谢您的建议，我尝试使用 JSONP，但图表仍然无法加载。谁能看到我做错了什么？

```
 var closePrices = new Array();
    var dateArray = new Array();
    var timeStampArray = new Array();
    var timeClose = new Array();

function jsonCallback(data, ticker) {

            console.log( data );

            //Put all the closing prices into an array and convert to floats
            for(var i=0; i < data.query.results.quote.length; i++)
            {
                closePrices[i] = parseFloat( data.query.results.quote[i].Close );
            }

            //displays the values in the closePrices array
            console.log( closePrices );

            //Put all the dates into an array
            for(var i=0; i < data.query.results.quote.length; i++)
            {
                dateArray[i] = data.query.results.quote[i].date;
            }

            //Convert all the dates into JS Timestamps
            for(var i=0; i < dateArray.length; i++)
            {
                timeStampArray[i] = new Date( dateArray[i] ).getTime();
            }

            for(var i=0; i<data.query.results.quote.length; i++)
            {
                   timeClose.push( [timeStampArray[i], closePrices[i]] );
            }

            timeClose = timeClose.reverse();
            console.log ( timeClose );

            //displays the dateArray
            console.log( dateArray );
            console.log( timeStampArray );

            // Create the chart
        $('#container').highcharts('StockChart', {

            rangeSelector : {
                selected : 1
            },

            title : {
                text : ticker + ' Stock Price'
            },

            series : [{
                name : ticker,
                data: timeClose,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
}

function createChart() {  

    var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22' + ticker +'%22%20and%20startDate%20%3D%20%222013-01-01%22%20and%20endDate%20%3D%20%222013-02-25%22&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=?';
    //Ajax call retrieves the data from Yahoo! Finance API
    $.ajax( url, {
        dataType: "jsonp",  
        success: function(data, status){
            console.log(status);
            jsonCallback(data, ticker);
        },
        error: function( jqXHR, status, error ) {
            console.log( 'Error: ' + error );
        }
    });
}

//Function to get ticker symbol from input box.
function getTicker() {
        var ticker = document.getElementById('userInput').value;
        createChart(ticker);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:39:55.393

感谢 Jeffrey Blake 和 Pawel Fus 的建议。使用 JSONP，我能够让我的程序正常运行 :)

# php - CodeIgniter CSRF 在 IE 而非 chrome 或 Firefox 中工作

> ID：15851246
> 
> 赞同：0
> 
> 时间：2013-04-06T12:58:23.550
> 
> 标签：php, codeigniter, csrf

我已尽力解决此问题，但无法使其跨浏览器工作。这是 CodeIgniter 文档页面[http://goo.gl/YCKU7](http://goo.gl/YCKU7)的链接，向下滚动到底部以查看*跨站点请求伪造 (CSRF)*部分。

这是我从几个论坛帖子中删除的步骤。

1.  设置配置

    ```
    $config['csrf_protection'] = TRUE; 
    ```

2.  从 cookie 名称中删除“_”

    ```
    $config['sess_cookie_name']     = 'sfe';
    $config['sess_expiration']      = 7200;
    $config['sess_expire_on_close'] = TRUE;
    $config['sess_encrypt_cookie']  = FALSE;
    $config['sess_use_database']    = TRUE;
    $config['sess_table_name']      = 'ci_sessions';
    $config['sess_match_ip']        = FALSE;
    $config['sess_match_useragent'] = TRUE;
    $config['sess_time_to_update']  = 300;

    $config['csrf_protection']      = TRUE;
    $config['csrf_token_name']      = 'csrftestname';
    $config['csrf_cookie_name']     = 'csrfcookiename';
    $config['csrf_expire']          = 7200; 
    ```

3.  Cookie 相关变量

    ```
    $config['cookie_prefix']    = "";
    $config['cookie_domain']    = "";
    $config['cookie_path']      = "/";
    $config['cookie_secure']    = FALSE; 
    ```

4.  创建表单`form_open()`

来自的日志`code_application/logs/`

```
DEBUG - 2013-04-04 18:33:10 --> Config Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Hooks Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Utf8 Class Initialized
DEBUG - 2013-04-04 18:33:10 --> UTF-8 Support Enabled
DEBUG - 2013-04-04 18:33:10 --> URI Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Router Class Initialized
DEBUG - 2013-04-04 18:33:10 --> No URI present. Default controller set.
DEBUG - 2013-04-04 18:33:10 --> Output Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Security Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Input Class Initialized
DEBUG - 2013-04-04 18:33:10 --> XSS Filtering completed
DEBUG - 2013-04-04 18:33:10 --> XSS Filtering completed
DEBUG - 2013-04-04 18:33:10 --> XSS Filtering completed
DEBUG - 2013-04-04 18:33:10 --> CRSF cookie Set
DEBUG - 2013-04-04 18:33:10 --> Global POST and COOKIE data sanitized
DEBUG - 2013-04-04 18:33:10 --> Language Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Loader Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Helper loaded: form_helper
DEBUG - 2013-04-04 18:33:10 --> Helper loaded: url_helper
DEBUG - 2013-04-04 18:33:10 --> Database Driver Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Form Validation Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Session Class Initialized
DEBUG - 2013-04-04 18:33:10 --> Helper loaded: string_helper
DEBUG - 2013-04-04 18:33:10 --> A session cookie was not found.
DEBUG - 2013-04-04 18:33:13 --> Session routines successfully run
DEBUG - 2013-04-04 18:33:13 --> Controller Class Initialized
DEBUG - 2013-04-04 18:33:13 --> File loaded:     /home/rpowell/codeigniter/sfe/code_application/views/view_home.php
DEBUG - 2013-04-04 18:33:13 --> Final output sent to browser
DEBUG - 2013-04-04 18:33:13 --> Total execution time: 2.4202
DEBUG - 2013-04-04 19:25:32 --> Config Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Hooks Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Utf8 Class Initialized
DEBUG - 2013-04-04 19:25:32 --> UTF-8 Support Enabled
DEBUG - 2013-04-04 19:25:32 --> URI Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Router Class Initialized
DEBUG - 2013-04-04 19:25:32 --> No URI present. Default controller set.
DEBUG - 2013-04-04 19:25:32 --> Output Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Security Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Input Class Initialized
DEBUG - 2013-04-04 19:25:32 --> XSS Filtering completed
DEBUG - 2013-04-04 19:25:32 --> XSS Filtering completed
DEBUG - 2013-04-04 19:25:32 --> XSS Filtering completed
DEBUG - 2013-04-04 19:25:32 --> XSS Filtering completed
DEBUG - 2013-04-04 19:25:32 --> XSS Filtering completed
DEBUG - 2013-04-04 19:25:32 --> CRSF cookie Set
DEBUG - 2013-04-04 19:25:32 --> Global POST and COOKIE data sanitized
DEBUG - 2013-04-04 19:25:32 --> Language Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Loader Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Helper loaded: form_helper
DEBUG - 2013-04-04 19:25:32 --> Helper loaded: url_helper
DEBUG - 2013-04-04 19:25:32 --> Database Driver Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Form Validation Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Session Class Initialized
DEBUG - 2013-04-04 19:25:32 --> Helper loaded: string_helper
DEBUG - 2013-04-04 19:25:32 --> Session routines successfully run
DEBUG - 2013-04-04 19:25:32 --> Controller Class Initialized
DEBUG - 2013-04-04 19:25:32 --> File loaded:     /home/rpowell/codeigniter/sfe/code_application/views/view_home.php
DEBUG - 2013-04-04 19:25:32 --> Final output sent to browser
DEBUG - 2013-04-04 19:25:32 --> Total execution time: 0.0520 
```

我只是偶然发现了这篇文章： http: [//goo.gl/n63tC](http://goo.gl/n63tC)并会看看它是否与我的服务器时间有关。

# ios - 放松赛格不起作用

> ID：15851247
> 
> 赞同：16
> 
> 时间：2013-04-06T12:58:28.050
> 
> 标签：ios, cocoa-touch

我添加了一个操作方法来查看控制器并在情节提要中按住Ctrl-Drag按钮退出图标，并且成功创建了展开segue。但是当我触摸按钮时，展开segue不起作用（当前场景没有导航到原始场景）并且没有触发动作方法。我不知道为什么。

这是动作方法

```
@interface HMCViewController2 : UIViewController
-(IBAction)return:(UIStoryboardSegue *)segue;
@end

@implementation HMCViewController2
...
-(IBAction)return:(UIStoryboardSegue *)segue{

}

@end 
```

我将[项目](https://docs.google.com/file/d/0B0Ygk57VnimYQ3JoWW9RVUk2dlk/edit?usp=sharing)上传到谷歌驱动器。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-06T14:48:47.660

您将展开 segue 代码放在错误的 viewController 中。它应该位于您希望展开的控制器中，而不是您要返回的控制器中。

# sql-server-2008 - 如何使用数据库部署 c# windows 应用程序？

> ID：15851249
> 
> 赞同：0
> 
> 时间：2013-04-06T12:58:32.627
> 
> 标签：sql-server-2008, c#-4.0, deployment, crystal-reports

我在 c# 中创建了一个使用 SQL Server 数据库的 Windows 应用程序，现在我想将它安装在客户端计算机上。我已经在客户端机器上安装了 SQL Server 2008，现在我创建了一个设置并添加了所有 dll 和 exe 文件以及`app.config`文件。

当我在客户端机器上安装它时，我`app.config`从安装文件夹的程序文件中更改了路径。但是当我运行应用程序时，它无法连接到数据库。

请提出一些方法..用数据库和水晶报表部署这种类型的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-11T15:31:14.577

您是否将身份验证方法设置为 Windows 身份验证？您确定您在开发环境中使用应用程序配置吗？

尝试在您的开发环境中输入错误的密码，看看它是否真的失败了

# c - Linux 上的 C 套接字编程

> ID：15851252
> 
> 赞同：1
> 
> 时间：2013-04-06T12:58:41.020
> 
> 标签：c, linux, sockets

我是套接字编程和 linux 的新手 我可以找到一些关于套接字编程的代码 我想使用此代码连接到打印机，此代码使用负责获取 hostent 的 gethostbyname 函数我认为一切都很好，除了我没有主机名我只有一个IP地址（打印机），那么我应该使用什么功能通过IP连接到打印机？

这是代码

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 

void error(const char *msg)
{
perror(msg);
exit(0);
}

int main(int argc, char *argv[])
{
int sockfd, portno, n;
struct sockaddr_in serv_addr;
struct hostent *server;

char buffer[256];
if (argc < 3) {
   fprintf(stderr,"usage %s hostname port\n", argv[0]);
   exit(0);
}
portno = atoi(argv[2]);
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");
server = gethostbyname(argv[1]);
if (server == NULL) {
    fprintf(stderr,"ERROR, no such host\n");
    exit(0);
}
bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
bcopy((char *)server->h_addr, 
     (char *)&serv_addr.sin_addr.s_addr,
     server->h_length);
serv_addr.sin_port = htons(portno);
if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
    error("ERROR connecting");
printf("Please enter the message: ");
bzero(buffer,256);
fgets(buffer,255,stdin);
n = write(sockfd,buffer,strlen(buffer));
if (n < 0) 
     error("ERROR writing to socket");
bzero(buffer,256);
n = read(sockfd,buffer,255);
if (n < 0) 
     error("ERROR reading from socket");
printf("%s\n",buffer);
close(sockfd);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T13:07:40.737

使用[`getaddrinfo`](http://pubs.opengroup.org/onlinepubs/009695399/functions/getaddrinfo.html)而不是`gethostbyname`. 只要它使用标准表示法，它就应该透明地接受主机名以及 IPv4 和 IPv6 地址。

做这样的事情：

```
int connect_to(char const *host, char const *port)
{
    int sock = -1;
    struct addrinfo hints;
    memset(&hints, 0, sizeof(hints));
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;

    struct addrinfo *servinfo;
    if (getaddrinfo(host, port, &hints, &servinfo) != 0) {
        return sock;
    }

    for (struct addrinfo *serv = servinfo; NULL != serv; serv = serv->ai_next) {
        int tmp = socket(serv->ai_family, serv->ai_socktype, serv->ai_protocol);
        if (tmp == -1) {
            continue;
        }

        if (connect(tmp, serv->ai_addr, serv->ai_addrlen) == -1) {
            close(tmp);
            continue;
        }

        sock = tmp;
        break;
    }

    freeaddrinfo(servinfo);
    return sock;
} 
```

# java - weka 数据库中的文本格式

> ID：15851253
> 
> 赞同：0
> 
> 时间：2013-04-06T12:58:44.207
> 
> 标签：java, database, weka

用于提供`weka.core.Instances`对象的数据库中的文本是否需要符合某种格式？当我尝试使用`weka.core.Instances`仅包含未格式化文本（通过数据库从数据库提供`weka.experiment.InstanceQuery.query.retrieveInstances()`）作为其非类属性的对象构建分类器时，我得到以下异常：

```
Exception in thread "main"
weka.core.UnsupportedAttributeTypeException:
    weka.classifiers.functions.SMO: Cannot handle numeric class!    at
    weka.core.Capabilities.test(Unknown Source)     at
    weka.core.Capabilities.test(Unknown Source)     at
    weka.core.Capabilities.test(Unknown Source)     at
    weka.core.Capabilities.testWithFail(Unknown Source)     at
    weka.classifiers.functions.SMO.buildClassifier(Unknown Source)  at
    Test.main(Test.java:135) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:19:03.243

你确定这个数字属性不应该是类属性吗？你的例外在谷歌搜索中给出了[第一个命中](https://list.scms.waikato.ac.nz/pipermail/wekalist/2009-September/045483.html)。你能给出以下代码的输出吗？

```
 Instances data = null;

    try {
        DatabaseUtils utils = new DatabaseUtils();

        InstanceQuery query = new InstanceQuery();

        query.setUsername(username);
        query.setPassword(password);
        query.setQuery(pSql);

        data = query.retrieveInstances();
        data.setRelationName(pInstanceRelationName);

        if (data.classIndex() == -1)
        {
             data.setClassIndex(data.numAttributes() - 1);
        }
                    // this line will print out your header + data. 
                    // add your header information to your question.
        System.out.println(data)
    } 

        catch (Exception e) {
        throw new RuntimeException(e);
    } 
```

# javascript - 为函数添加方法

> ID：15851258
> 
> 赞同：-1
> 
> 时间：2013-04-06T12:58:58.333
> 
> 标签：javascript, jquery

我想向函数添加方法，以便我可以在链中调用它们

我想做的事：

如果您使用过 jQuery ，那么您一定看过类似的语法

```
$("#ID"); 
```

返回元素

```
$("#ID").css("property") 
```

返回元素属性的 css 值

我如何通过定义具有相同语法的自定义方法而不使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:02:21.747

这是一个简单的：

```
function Get( element_id ) {
    this.node = document.querySelector(element_id);
    this.css = function(prop, val) {};
}

var get = function( element_id )
{
    return new Get( element_id );
};

get('#ID').css("property"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:06:04.483

我不确定你的意思，但我会试一试。

方法链接通常是通过`this`从原型的方法返回对象来执行的：

```
function MyClass(...) {
    ...
}

MyClass.prototype = {
    methodOne: function(...) {
        ...
        return this;
    },
    methodTwo: function(...) {
        ...
        return this;
    },
    ...
}; 
```

所以你可以这样做：

```
var obj = new MyClass(...);

obj.methodOne(...).methodTwo(...); 
```

当您实际上并不期望返回值或无法应用它时，这可能很有用。例如：

```
function MyClass(name) {
    this.name = name;
}
MyClass.prototype.greet = function(greeting) {
    return greeting + " " + this.name;
}

var obj = new MyClass("John");
alert(obj.greet("Hello")); // It alerts "Hello John". 
```

在这种情况下，您*需要*方法中的值`greet`。

# vb.net - 属性“项目”是“只读”

> ID：15851261
> 
> 赞同：3
> 
> 时间：2013-04-06T12:59:21.053
> 
> 标签：vb.net

我想知道是否有人可以帮助我。我对编程和开发非常陌生（因此，如果这是一个愚蠢的问题，我深表歉意），但我非常坚持我目前正在从事的项目。

我正在编写一个 WinForms 应用程序，该应用程序每天运行一次以从数据库中检索信息。由此，如果满足特定标准，它将自动向建筑物中的个人发送电子邮件。消息正文将包含带入数据网格的各种详细信息。

目前，我的应用程序在尝试将详细信息传输到负责生成电子邮件的子程序时崩溃（因为某些变量返回为“Null”，因此无法转换为字符串）。我正在尝试实现一个 If 语句，如果它返回为 Null，则将一个字符串分配给变量，如下所示：

```
Private Sub Timer1_Tick(sender As Object, e As EventArgs) Handles RunTimer.Tick

    years = My.Settings.Years.Split(",")

    If TimeOfDay = "09:00:00" Then
        Using cn As New SqlClient.SqlConnection
            cn.ConnectionString = constr
            cn.Open()

            SQLstr = "long SQL string that works as have run it in WinSQL"

            Using command As New SqlClient.SqlCommand(SQLstr, cn)
                command.CommandTimeout = 0
                command.CommandText = SQLstr
                Using drd As SqlClient.SqlDataReader = command.ExecuteReader
                    While drd.Read

                        If Not drd("Joined Date") Is DBNull.Value Then
                            Dim memberyears As Integer = DateDiff(DateInterval.Year, drd("Joined Date"), Now)
                            Dim element As Integer

                            For element = 0 To years.GetUpperBound(0)
                                If years(element) = memberyears Then
                                    Label1.Text = "Sending email"
                                End If
                                If Not drd("City") Is DBNull.Value Then
                                    drd("City") = "Bleh"
                                End If
                                SendEmail(years(element), drd("Shop Name"), drd("Contact Name"), drd("Shop ID"), drd("Business Name"), drd("Address 1"), drd("Address 2"), drd("Address 3"), drd("District"), drd("City"), drd("County"), drd("Shop Postal Code"), drd("ASM"))
                            Next
                        End If
                    End While
                End Using
            End Using
        End Using

    Else
        Label1.Text = "Skipped"
        Exit Sub
    End If

End Sub 
```

`If`我正在处理的声明是这样的：

```
If Not drd("City") Is DBNull.Value Then
    drd("City") = "Bleh"
End If 
```

但是它只是返回，因为属性“项目”是只读的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:12:15.397

您不能更改 a 记录的字段`SqlDataReader`。`DataReader`仅用于读取数据。如果要修改它，可以使用`DataTable`/`DataRow`并使用它的[`IsNull`](http://msdn.microsoft.com/en-us/library/system.data.datarow.isnull.aspx)方法来检查字段的值是否为空：

```
Using cn As New SqlClient.SqlConnection(constr)
    Using da = New SqlClient.SqlDataAdapter("long SQL string that works as have run it in WinSQL", cn)
        da.SelectCommand.CommandTimeout = 0
        Dim table = New DataTable()
        da.Fill(table)
        For Each row As DataRow In table.Rows
            If Not row.IsNull("Joined Date") Then
                Dim joined = row.Field(Of Date)("Joined Date")
                Dim memberyears As Long = DateDiff(DateInterval.Year, joined, Date.Now)
                For i As Int32 = 0 To years.Length - 1
                    If memberyears.ToString = years(i) Then
                        Label1.Text = "Sending email"
                        If Not row.IsNull("City") Then
                            row("City") = "Bleh"
                        End If
                        SendEmail(years(i), row("Shop Name"), row("Contact Name"), row("Shop ID"), row("Business Name"), row("Address 1"), row("Address 2"), row("Address 3"), row("District"), row("City"), row("County"), row("Shop Postal Code"), row("ASM"))
                    End If
                Next
            End If
        Next
    End Using
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:06:25.703

是的。它是一种`read only`财产，

对此的解决方案是让 a`variable`保存来自 的值`database`。但是，请注意这一点，在分配给 that 之前`variable`，我们必须检查它是否`DbNull`存在。

```
 Dim xCity as string = string.empty

       ....................
       ....................
       ....................

       xCity = if(IsDbNull(drd("City")),"some text","some other text") 
```

然后将该变量`xCity`用于您将来的使用。

**编辑：**

如果假设你想避免那个额外的变量，那么你可以直接检查那个值并像这样传递一个有效的字符串，

```
SendEmail(**,**, if(IsDbNull(drd("City")),"some text","some other text"), **, **, **) 
```

# python - 用于调整图像大小的独立 Python 脚本

> ID：15851269
> 
> 赞同：1
> 
> 时间：2013-04-06T13:00:14.023
> 
> 标签：python, image, resize, crop

我正在寻找一个可以执行 2 个简单图像编辑任务的独立 python 脚本：

*   调整大小
*   裁剪

我今天早上浏览了一些网站，发现了 2 个有趣的模块：

*   [http://wiki.python.org/moin/PythonMagick](http://wiki.python.org/moin/PythonMagick)
*   [http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)

不幸的是，这些对我的需求来说太复杂了，需要在服务器上安装。

你们知道是否有任何（非常）基本的 Python 脚本可以嵌入到单个文件（独立）中吗？

如果不是，在 Python 中编写我自己的图像大小调整/裁剪脚本会很复杂吗？

## 更新

我已经为 python 3x 安装了 PIL

对于那些感兴趣的人，这里有一个很好的安装教程：

[在 Ubuntu 12.04 Python 2.7 和 Python 3.2 中安装 PIL](https://stackoverflow.com/questions/15002538/install-pil-in-ubuntu-12-04-python-2-7-and-python-3-2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:35:53.363

实现自己的快速准确的裁剪和调整代码是不可行的。（PIL 为 50% **C**）。

实现算法是可行的（[最近邻](http://jankristanto.com/info/nearest-neighbor-interpolation-for-resize-image/)，[双线性插值](https://gis.stackexchange.com/questions/7611/bilinear-interpolation-of-point-data-on-a-raster-in-python)）
**但是**通过加载和保存处理不同的图像格式是一项艰巨的任务。

# gwt - 在gwt中为celltable的单元格添加动态样式名称

> ID：15851270
> 
> 赞同：1
> 
> 时间：2013-04-06T13:00:26.260
> 
> 标签：gwt

我有一个包含 3 列的单元格表，其中一列用于名称，一列用于类型，一列用于图像。

我有另一个列表框指定单元格表的类型列中存在的类型。

在单元格表中，多行的类型可能相同。当我在列表框中选择一种类型时，单元格表中不具有相同类型的所有行都应该在图像单元格中添加一个图标。

到目前为止，我可以根据在该单元格本身中输入的值动态搜索添加样式名称。但现在我的意图是根据另一个小部件的值来拥有动态样式名称。

请给我一个答案。下面是提供的代码

```
public class CellTableExample implements EntryPoint, ChangeHandler {

  CellTable<NameType> ct = new CellTable<NameType>();
  TextColumn<NameType> nameColumn;
  ListBox typeListBox = new ListBox();

  public void onModuleLoad() {
    typeListBox.addChangeHandler(this);
    nameColumn = new TextColumn<NameType>() {
      @Override
      public String getValue(NameType object) {
        return object.getName();
      }
    };
    ct.addColumn(nameColumn, "Name");

    TextColumn<NameType> name1Column = new TextColumn<NameType>() {
      @Override
      public String getValue(NameType object) {
        return object.getType();
      }
    };
    ct.addColumn(name1Column, "Name1");

    List<NameType> values = new ArrayList<NameType>();

    NameType nameType1 = new NameType("name1", "type1");

    NameType nameType2 = new NameType("name2", "type2");

    values.add(nameType1);
    values.add(nameType2);
    ct.setRowData(values);

    ct.setLoadingIndicator(null);
    typeListBox.addItem("type1");
    typeListBox.addItem("type2");
    HorizontalPanel hp = new HorizontalPanel();
    hp.add(typeListBox);
    hp .add(ct);

    RootPanel.get().add(hp);
  }

  @Override
  public void onChange(ChangeEvent event) {
    String type = typeListBox.getValue(typeListBox.getSelectedIndex());
    int rowCount = ct.getRowCount();

    for(int i=0;i < rowCount; i++) {
      String value = ct.getRowElement(i).getCells().getItem(1).getInnerText();

      if(type.equals(value)) {
        Window.alert("came here");
        TableCellElement cellElement = ct.getRowElement(i).getCells().getItem(0);
        cellElement.addClassName("information icon");
      }
    }
  }
} 
```

在`onChange()`方法中，我认为根据列表框中的选择添加类名的逻辑。但我正在寻找更通用的解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:01:05.987

在表格呈现单元格后，我不知道有任何方法可以操纵单元格的内容。但是我有一个想法，虽然不是很好但可行：将一些 id 或自定义 HTML 属性渲染到您的单元格中，以便您以后可以通过标准但非常非 GWT DOM 操作访问它们：

```
<td><img src=".." id="icon-of-entity-123" /></td> 
```

如果您实现了这样的目标，那么稍后在您的业务逻辑中，即使在渲染之后，您也可以在低级别对其进行操作：

```
Element e = DOM.getElementById("icon-of-entity-" + getId());
e.setAttribute("class", "someclassname"); 
```

我希望有人给你一个更好的解决方案！

# performance - 从类实体中获取类型为 T 的项目列表

> ID：15851277
> 
> 赞同：0
> 
> 时间：2013-04-06T13:01:02.623
> 
> 标签：performance, list, c#-4.0

我有以下结构的A类

```
 public class A
  {
   public list<B> Items // where B is a class entity
  }

  public class B{
    public List<B> OwnItems;
    public List<C> Items // where C is a class entity
   }

  public class C
  {
   public string name;
   public string Address;
   public int Age;
   public double Salary;
  } 
```

如何使用 c# 从实体 A 获取 C 类实体列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:11:50.507

**[您可以在SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)**的帮助下使用 LINQ ：

```
A a = new A();
// Populate a's `Items` property...
....

var allC = a.Items.SelectMany(b => b.Items.Select( c => c)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:18:43.040

```
var a = new A();
var bList = a.Items;
var cList = new List<C>();
while(bList != null && bList.Count > 0)
{
    foreach(var b in bList)
        cList.AddRange(b.Items);

    bList = bList.SelectMany(b => b.OwnItems)
                 .Where(b => !bList.Contains(b))
                 .Distinct().ToList();
} 
```

对我来说不是最好的，但会起作用

# ios - ios6中的自动布局

> ID：15851281
> 
> 赞同：0
> 
> 时间：2013-04-06T13:01:36.530
> 
> 标签：ios

我正在测试添加自动布局约束以编程方式查看。但它隐藏了我的观点。我在写代码...

```
UIView *testView = [[UIView alloc] initWithFrame:CGRectMake(50.0, 200.0, 600.0, 200.0)];
[testView setBackgroundColor:[UIColor grayColor]];

[self.view addSubview:testView];

[testView setTranslatesAutoresizingMaskIntoConstraints:NO];

NSDictionary *views = NSDictionaryOfVariableBindings(testView);

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-50-[testView(>=600)]-50-|" options:0 metrics:nil views:views]]; 
```

为什么这隐藏了我的观点？请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:04:42.943

您没有在垂直方向上给它任何约束，因此 0 点的高度满足您给它的所有约束。如果您允许，自动布局喜欢跳到 0。

# mysql - 使用 1M+ 行表更新查询性能

> ID：15851283
> 
> 赞同：3
> 
> 时间：2013-04-06T13:01:42.563
> 
> 标签：mysql, sql

我有 2 张桌子

`stock_details`（1M+ 记录）与字段

```
billid

itemid

groupid

qty 
```

`stock_details`索引`index1`( `itemid`, `billid`) 和`index2`( `itemid`)

`itemmaster`（10K+ 记录）与字段

```
itemid

groupid 
```

`itemmaster`有索引`index1`( `itemid`) 和`index2`( `groupid`)

下面的查询需要几分钟才能完成。我不认为这是正常的。可能只有很少的记录或零记录实际得到更新。我想我已经为查询准备了所有索引

```
UPDATE Stock_details A,Db2.ItemMaster B 
SET A.Groupid=B.Groupid
WHERE A.Itemid=B.itemID AND A.Groupid<>B.GroupId 
```

在选择查询上运行解释

```
EXPLAIN SELECT A.groupid FROM Stock_details A,db2.ItemMaster B 
WHERE A.Itemid=B.itemID AND A.Groupid<>B.GroupId 
```

结果在这里 [http://i.imgur.com/IR5iWX7.png](http://i.imgur.com/IR5iWX7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:30:25.490

我不确定..但试试这个看看...

1) itemid 和 group id 上的索引 togethewr 可能会有所帮助

2)

更新（从 Stock_details A，Db2.ItemMaster B 中选择 A.Groupid，B.Groupid 作为 Groupids，其中 A.Itemid=B.itemID AND A.Groupid<>B.GroupId）k 设置 k.Groupid=k.Groupids

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:19:49.183

查询的“非”部分无法有效索引，因此必须扫描每一行。

我想这是你必须定期运行的东西（否则你不会关心它花了多长时间）。您可以做的一件事是跟踪上次运行的时间，并且只考虑从那时起更新的行。

# verilog - 如何在时序电路中减去 2 个数字？

> ID：15851285
> 
> 赞同：-3
> 
> 时间：2013-04-06T13:01:48.073
> 
> 标签：verilog, sequential, circuit, subtraction

我需要做一个减去 2 个数字的电路。我相信我需要使用 SUM 和一个符号位，以及一些掩码，但我不知道如何将它们组合在一起。

[稍后编辑]

我试着做“15-3”。

二进制 15 是 1111 二进制 3 是 0011

我为 + 的符号 0 和 - 的符号添加了一点

所以现在我有：0 1111 + 1 0011 = 100010 并且对此我使用符号掩码 1 0000 进行 XOR。这就是我卡住的地方。

[甚至后来编辑]

我想我找到了另一种看待问题的方法。我将使用 2 个移位寄存器来加载 2 个数字。每个移位寄存器的输出将是 NOR 门的输入，它执行 0 的 NOR。（这是将 0101 转换为 1010）然后这些门的 2 个输出将连接到 SUM 的输入。我的问题是如何在输入 SUM 之前将 1 位数据转换回 8 位数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:12:00.973

如果您了解[二进制补](http://en.wikipedia.org/wiki/Two%27s_complement)码是一种反转（否定）数字的方法，问题会变得简单得多。

有几种方法可以表示负数。

1）符号幅度（添加符号位）

```
0 0011 =>  3
1 0011 => -3 
```

2）补码（按位反转）

```
0011 =>  3
1100 => -3 
```

3）二进制补码（一个补码+1）

```
0011             =>  3
1100 + 1 => 1101 => -3 
```

Two's Complement 提高了效率，因为它删除了 One 的补码具有的重复 0 代码（0000=>0 和 1111=>-0）。

二进制补码还具有数字可以正常相加的特性。
对于`15 - 3`实际执行`15 + (-3)`。

要了解如何添加二进制数，请快速查看[波纹加法器](http://en.wikipedia.org/wiki/Adder_%28electronics%29)。

首先创建一个半加器，将 2 位相加，生成一个和和一个进位。使用您的半加器 + XOR 门构建一个全加器，A+B+进位，生成 SUM 和进位（均为 1 位）。然后，您可以将它们链接在一起，形成一个 X 宽度的全加器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T12:50:36.390

半加器是由两个逻辑门构成的简单功能数字电路的一个示例。半加器加到一位二进制数 (AB)。输出是两位 (S) 和进位 (C) 的总和。请注意相同的两个输入如何被定向到两个不同的门。 [在此处输入图像描述](http://i.stack.imgur.com/9GAe6.png)

# php - PHP中curl的奇怪返回结果

> ID：15851296
> 
> 赞同：0
> 
> 时间：2013-04-06T13:02:58.017
> 
> 标签：php, curl

我正在尝试使用 cURL 获取页面内容，但我得到了一个奇怪的结果.. 我应该得到一个 html..

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_URL, "http://mypagehere.com"); //replaced the link with the original here
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
echo curl_exec($ch); 
```

但我得到的结果如下：

```
‹Í]}sÛ8Îÿ;ù\í5q¶¶dç­‰»“¦/×½¾äiÒÝ»ét<²$ÛjdI'ÉI|Ý|÷ç”)ÇN²m7³Ý^-Q$H€‚ îð§çïÏþsòBŒŠqÔ]=¤úëßAü2ÉKDn<ìXAÜøxj  ?Ì:Ö›³–ð"7Ï;ÖÉ¤…žx“‡ÿ~RˆwÉiè}7³ÄÕ8Šóö ß±FE‘¶çòòÒ¸^ÐO’sÛKÆÎf³¹çúãÈ¢®×ï®®®ŽƒÂÞÈÍò èX“bÐØ³„CŸVWVûnˆQ*`ÃaÌû‰›ù¹ÃõQ9÷²0-ºh·ráf¢×á'ÞdÄ…=ŠQ@ù³é™;|çŽƒÚ:Á_ßøÔü\Gõ¢¾9úùnr85@^[C›F&~êPÛò_©î¡SŽˆ0-Â"
º/²,ÉÄâõ«wâÿÐ‘_ãÃ8QmóbŠêö¯ùû8šŠ¯˜<Üi[ÄIˆŸÂqšd…âqåC§lPQŸ‹,ˆ:ÍGAPXŠ˜^žÛé(}ŠßÎ ÉÆõ”§¶~ÄxMÖ¸E§µF,Xó;­­Ýæfk{»)É}ðŠêyàfÞ¨né²õsôRw¬¹ãô@÷HÏºW~žïdâ¿jºEžyËq<?¶“´Çáÿ‚hÊìñ%w6÷w¶šÍ-ûKnugÓAs#É,[+ŽM¦yá¡gcxáx˜3€wUüòßIMÕO£eïØ›ö8Œ«ëb¾±Ý›úè§½‹Îns§¹»?4š»›ÍÍfk³ŠPe¾Ý¨²Ø-KÓ4èXnšBp[;Yž?†°âñcÇúpz*AàL¼Á•šSiž“ÔŸŒs§á„±\Ù€+9³£Q—½ÁUá|q/\Iˆ¿˜ûCâZ¸©[¸Ñy/LGàðÞ8’&lt;žÂœ†6‹‘›7@†ÇžP=”ø"<I|q–L¼ÑOâ˜ž‹÷ÿE""°\,ÆI†jý
ëLub[÷Ä$‹¥“8Èm¢fÀÌ1É¼8zè 
```

html 应该在 retun 中回显，但不是......该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T11:33:31.527

好吧，我解决了.. 刚刚添加：

```
curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate,sdch'); 
```

# android - 带有标题的Android LazyLoading Gridview图像？

> ID：15851299
> 
> 赞同：-2
> 
> 时间：2013-04-06T13:03:25.860
> 
> 标签：android, gridview, android-image

我目前正在创建一个应用程序，我想将数据列表从数据库加载到其中，然后在 GridView 中显示该数据。我已经创建了与数据库的连接，并成功撤回并填充了 GridView。我遇到的问题是，在我的列表行布局中，我希望能够 setLayoutParams 以便可以裁剪图像并且所有图像都具有相同的尺寸，这样就不会在其他设备尺寸上造成问题。

我拥有的文件如下：

**list_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="15dp"
    android:orientation="vertical">

    <ImageView
        android:id="@+id/list_image"
        android:layout_width="110dp"
        android:layout_height="110dp"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

**ListAdapter.java**

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;

public class DressesAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public DressesAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
        //thumb_image.setLayoutParams(new ImageView.LayoutParams(70, 70));

        HashMap<String, String> dress = new HashMap<String, String>();
        dress = data.get(position);

        imageLoader.DisplayImage(dress.get(DressListActivity.TAG_IMAGE), thumb_image);
        return vi;
    }
} 
```

**ListActivity.java**

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/grid_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:columnWidth="90dp"
    android:horizontalSpacing="5dp"
    android:verticalSpacing="5dp"
    android:gravity="center"
    android:stretchMode="columnWidth" >  

</GridView> 
```

运行时我得到的错误如下：

```
04-06 14:02:18.260: E/AndroidRuntime(12798): java.lang.ClassCastException: android.widget.AbsListView$LayoutParams cannot be cast to android.widget.LinearLayout$LayoutParams 
```

我希望有人可以帮助我纠正这个问题，因为它真的很烦人，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:08:03.127

这`Exception`是由`import`错误的`LayoutParams`子类引起的。也许最容易`new LinearLayout.LayoutParams(`明确地写出来。

不相关但也`scaleType`可能`ImageView`派上用场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:52:19.740

这是我用来显示包含 3 张图片的网格的方法，这些图片适合整个设备，每张图片的标题为 TextView。

它可以在所有设备上正确格式化。

我所有的照片都是纵横比为 1.5 的肖像，例如 300 像素高 x 200 像素宽。（这是您在大小调整功能中看到的 3.0 和 1.5，并根据需要进行更改）。

我为我的布局使用肖像。

希望你能让它工作，它很棘手。这对我来说非常有效。

设置您的 GridView 及其适配器，例如：

```
// create grid and adapter
gridAdapter = new SET UP YOUR ADAPTER HERE; 
    grid = (GridView) findViewById(R.id.grid);
    grid.setAdapter(YOUR ADAPTER);
    grid.setFadingEdgeLength(0);
    int picHeight = Utils.getGridPicHeight(MainActivity.this);
    int picLength = (int) ((float)picHeight / 1.5);
    grid.setColumnWidth(picLength); 
```

还有 Utils.getGridPicHeight：

```
 public static int getGridPicHeight (Activity activity) { 
        DisplayMetrics dMetrics = new DisplayMetrics();
        activity.getWindowManager().getDefaultDisplay().getMetrics(dMetrics);
        // give back a % of the screen width for the height
        final float WIDE = activity.getResources().getDisplayMetrics().widthPixels;
        int value = (int)(WIDE / 3.0f * 1.5f);
        return value;
} 
```

非常重要的是，在您的适配器中，您必须像这样设置图像：

```
 LinearLayout.LayoutParams params;

        int picHeight = Utils.getGridPicHeight(activity);
        int picLength = (int) ((float)picHeight / 1.5);
        params = new LinearLayout.LayoutParams(picLength,picHeight);
        params.gravity=Gravity.CENTER;
        params.height=picHeight;
        params.width=picLength;
        image.setLayoutParams(params); 
```

grid_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical">
    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
    />
    <TextView 
        android:id="@+id/imgTit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:typeface="sans"
        android:textStyle="normal"
        android:maxLines="1" 
        android:gravity="center" 
        android:layout_gravity="center">
    </TextView> 
</LinearLayout> 
```

然后在 LinearLayout 内的 GridView

```
<LinearLayout
        android:orientation="horizontal" 
        android:layout_width="wrap_content" 
        android:layout_height="fill_parent"
        android:layout_marginTop="2dip"
        android:layout_gravity="center"
    android:gravity="center">   
        <GridView
            android:id="@+id/grid"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:numColumns="3"
            android:horizontalSpacing="4dp"
            android:verticalSpacing="4dp"
            android:stretchMode="spacingWidthUniform"/>
</LinearLayout> 
```

# delphi - 以编程方式突出显示字符串网格行

> ID：15851307
> 
> 赞同：4
> 
> 时间：2013-04-06T13:04:05.883
> 
> 标签：delphi, delphi-7, tstringgrid

我在 Delphi 7 中有一个字符串网格，有 0..N 行。如果用户单击列表框编号中的任意数字，则列表框的编号为 0..N，则应在字符串网格上选择该行号。

所以我有这个

```
 MystringGrid.Col :=0;
   MystringGrid.Row :=Listbox.itemindex;
   MystringGrid.Selection:=TGridRect(Rect(0,1 ,1 ,1));
   MystringGrid.SetFocus; 
```

这将很好地选择网格上的行（突出显示它）但问题是如果

```
 listbox.itemindex=MystringGrid.rowcount; 
```

那个时候我得到

```
 Grid Index out of range error 
```

如grids.pas

```
 if (ACol < 0) or (ARow < 0) or (ACol >= ColCount) or (ARow >= RowCount) then
  InvalidOp(SIndexOutOfRange) 
```

`(ARow >= RowCount)`是真的，所以错误

我如何选择最后一行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T13:06:34.903

如果有`3`行，则调用它们

```
0,  1,  2. 
```

请注意，没有名为 的行`3`。

更一般地说，如果有`N`行，那么它们被称为

```
0,  1,  2, ..., N - 1. 
```

请注意，没有名为 的行`N`。

因此，您的问题已经在问题的第一行中找到：

> 我 [原文如此！] 在 Delphi 7 中有一个字符串网格，有 N 行。有一个列表框，其编号为 0..N

如果有`N`行，则列表框应包含数字`0..N-1`。事实上，如果你让它包含数字`0..N`，那么列表框中的行数将等于`N+1`，即比字符串网格中的项目数多一。

另外：我会做的简单

```
StringGrid1.Selection := TGridRect(Rect(0, 3, 4, 3)) 
```

选择具有索引的行`3`，假设列数是`4+1`

# android - android编辑文本如何在左上角开始输入？

> ID：15851310
> 
> 赞同：11
> 
> 时间：2013-04-06T13:04:10.957
> 
> 标签：android, android-layout, android-edittext

我有这个`EditText`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="textMultiLine"
        android:lines="5"
        android:singleLine="false"
        android:text="@string/app_name" />

</LinearLayout> 
```

我的问题是打字从 EditText 的中间开始。

**我的问题是如何在 EditText 的左上角开始输入？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-06T13:05:15.260

尝试`android:gravity="top"` 使您的代码为：

```
<EditText
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:gravity="top"
     android:inputType="textMultiLine"
     android:lines="5"
     android:singleLine="false"
     android:text="@string/app_name" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T13:08:33.037

我认为它应该工作。

```
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textMultiLine"
    android:lines="5"
    android:singleLine="false"
    android:gravity="top|left"
    android:text="@string/app_name" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T18:29:23.337

`top|left`会起作用，但对于从右到左的语言环境`android:gravity="top|start"`更好。

IDE 中的警告描述片段：

> 在文本从右向左流动的区域中呈现布局时，使用 Gravity#LEFT 和 Gravity#RIGHT 可能会导致问题。请改用 Gravity#START 和 Gravity#END。同样，在 XML 重力和 layout_gravity 属性中，使用 start 而不是 left。

# ruby-on-rails - Rails：国际电子商务应用程序的数据库处理

> ID：15851311
> 
> 赞同：0
> 
> 时间：2013-04-06T13:04:14.553
> 
> 标签：ruby-on-rails, database, internationalization

**编辑** 简而言之问题：Rails 中有没有办法（宝石？）将两个相同方案的数据库绑定到一个应用程序，Rails 决定在顶级域上使用哪个数据库？

例如：如果用户输入 example.de，则站点上的数据从名为 de_example_production 的数据库加载，如果是 example.com，则数据从 us_example_production 加载。

详细信息（旧问题）：

我有一个为某个特定国家开发的电子商务 Rails 应用程序。现在我正试图将其扩展到另一个国家。

主要要求是它应该是在同一台服务器上运行的同一个应用程序（以便代码更新适用于所有国家/地区），但由于这些国家/地区有不同的数据——城市、商店、产品——我希望它们位于不同的数据库中. 实现这一目标的最佳方法是什么？

作为替代方案，我想继续使用当前数据库，在我已经拥有的模型层次结构之上添加一个国家模型，但在我看来，这种方法会给系统增加很多复杂性和冗余。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:32:51.603

正如 Thomas 所指出的，我正在寻找的范式称为**multitenancy**。我决定继续使用[Apartment](https://github.com/influitive/apartment) gem，因为它完全符合我的要求。

这些专业的 railscast 帮助我实现了： [Multitenancy with Scopes](http://railscasts.com/episodes/388-multitenancy-with-scopes) 和 Multitenancy with PostgreSQL。

# javascript - 如何使用 JavaScript 函数获取 Content Page Control 的原始 ID？

> ID：15851313
> 
> 赞同：0
> 
> 时间：2013-04-06T13:04:38.730
> 
> 标签：javascript, asp.net, master-pages

在我的 asp.net Web 应用程序中，我`Texbox`使用 JavaScript 获取 ID，如下所示

```
<script language="javascript" type="text/javascript">
function clearTextBox(textBoxID)
{
    document.getElementById('<% =RVTable.ClientID %>').value = textBoxID;
    alert(textBoxID.toString());
} 
```

我将该 ID 存储在 HiddenField

```
 <asp:HiddenField ID="RVTable" runat="server" /> 
```

然后我`TextBox`在代码隐藏中使用以下代码检索 id

```
 TextBox txtbox = (TextBox)FindControl(RVTable.Value.ToString());
  if (txtbox != null)
  {
      if (txtbox.ID.ToString() == RVTable.Value.ToString())
          txtbox.Text = (string)CheckBoxString.ToString();
  } 
```

*供您参考，我在内容页面中执行所有这些操作*

实际上我的要求是我的项目中有几个复选框和几个文本框以及一个添加按钮。我将检查一些 CheckBox，然后单击必须显示所选复选框值的文本框。现在，如果我单击“添加”按钮，所选 CheckBox 的值将显示在该 TextBox 中。我将单击的文本框的 ID 存储在隐藏字段中。

这是我的 pageLoad 代码，将 OnClick 属性添加到文本框

```
txtRasi1.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi2.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi3.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi4.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi5.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi6.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi7.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi8.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi9.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi10.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi11.Attributes["onclick"] = "clearTextBox(this.id)";
txtRasi12.Attributes["onclick"] = "clearTextBox(this.id)"; 
```

我已经通过在一个简单的 asp.net Web 应用程序中使用上述代码（不使用 MasterPage 时）实现了解决方案。

但是当我尝试在内容页面中使用相同的代码时，单击的文本框的 id 就像文本框的原始 ID一样`ctl00_ChildPageContents_txtRasi3`来代替。`txtRasi3`

正如我在上面的代码隐藏代码中提到的，`FindControl()`没有找到点击的文本框，因为它获得了不同的 ID `ctl00_ChildPageContents_txtRasi3`，. 我怎样才能得到原来的身份证`txtRasi3`？

我还发现了一个问题...![在此处输入图像描述](https://i.stack.imgur.com/IqQvb.jpg)

即使我在`FindControl()`方法中直接提到了我的 TexBox 的控件 ID，txtbox 对象仍然为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:33:25.647

将文本框客户端 ID 模式设置为静态......

```
 <asp:TextBox ID="TextBox1" runat="server" ClientIDMode="Static"></asp:TextBox> 
```

# php - 将视频上传到 youtube api 并更改默认标题

> ID：15851315
> 
> 赞同：1
> 
> 时间：2013-04-06T13:04:52.613
> 
> 标签：php, zend-framework, yii

我正在使用 YII 和 ZEND 框架，我正在尝试从使用 zend 框架上传的 youtube 视频中更改标题，但使用 $_POST['title'] 无法正常工作...如何使用已发布的内容进行设置由用户设置的标题。

```
$video->setVideoTitle('Your video title');
$video->setVideoDescription('Description of the video');

$video->setVideoCategory('People'); 
$video->SetVideoTags('apps');
$handler_url     = 'http://gdata.youtube.com/action/GetUploadToken';
$token_array     = $yt->getFormUploadToken($video, $handler_url);
$token          = $token_array['token'];
$post_url     = $token_array['url'];
$next_url      ='http;//my-next-url/'; 
```

形式是：

```
<form name="catveh4" action="<?php echo $post_url ?>?nexturl=<?php echo $next_url ?>" method="post" enctype="multipart/form-data">
    <label>Title</label><input type="text" name="title" />
    <label>Description</label><textarea name="desc"></textarea>
    <label>Tags</label><input type="text" name="tags" />
    <label>Category</label><input type="text" name="cat" />
    <input name="file" type="file" class="CS"/> <br />
    <input name="token" type="hidden" value="<?php echo $token ?>" />
    <input name="flag4" type="hidden" value="1">
</form> 
```

# c# - 专利局 uspto 对 storage.google.com 或 commondatastorage.google.com 上的 PAIR 数据

> ID：15851323
> 
> 赞同：0
> 
> 时间：2013-04-06T13:05:35.833
> 
> 标签：c#, http

美国专利局在 Google Cloud 上提供 PUBLIC 数据。

谁能提供见解为什么请求失败？授权标头是否真的需要这样做？

我的应用程序发送以下对 tsv 文件的请求：

```
 GET /uspto-pair/applications/12394128-transaction_history.tsv HTTP/1.1
 Host: commondatastorage.googleapis.com 
 Authorization: GOOG1
 GOOGLES3EYEOH7Y5DJQS:0�;ס��6a��b��7� 
 Content-Length: 0
 x-goog-api-version: 1 
 Date: Sat, 06 Apr 2013 12:41:43 GMT 
```

以下是谷歌的回复：

```
HTTP/1.1 503 Service Unavailable 
Server: HTTP Upload Server Built on Apr 1 2013 16:36:58 (1364859418) 
Date: Sat, 06 Apr 2013 12:41:53 GMT
Expires: Sat, 06 Apr 2013 12:41:53 GMT 
Cache-Control: private, max-age=0 
Content-Length: 0 
Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:01:23.070

503 表示

> 服务器当前不可用（因为它超载或停机维护）。通常，这是一种临时状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T13:38:04.560

单个 .tsv 文件不可下载。如果您将路径更改为 /uspto-pair/applications/12394128.zip 它应该可以工作。

# c# - Gridview过滤器在分页时重置

> ID：15851330
> 
> 赞同：0
> 
> 时间：2013-04-06T13:06:22.670
> 
> 标签：c#, asp.net, gridview

我有一个网格视图，我在我的 onload 方法中从我的数据库绑定。

如图所示：

```
 if (!IsPostBack)
        {
           SqlConnection sqlcon = new SqlConnection(connstring);
           SqlCommand sqlcmd = new SqlCommand("select * from Coffees ORDER BY coffeeName ASC", sqlcon);
           SqlDataAdapter adp = new SqlDataAdapter(sqlcmd);
           DataSet ds = new DataSet();
           adp.Fill(ds);
           GridView1.DataSource = ds.Tables[0];
           GridView1.DataBind();

        } 
```

我允许我的用户根据他们的搜索词过滤 gridview。我目前关注的问题是，当我更改页面时，过滤器会丢失。

我读过我每次都需要重新绑定过滤器，这就是我卡住的地方。

这是我的过滤器：

```
 private void setGrid(string searchTerm)
    {
        if (IsPostBack)
        {
            string item = DropDownList2.SelectedValue;
            SqlConnection sqlcon = new SqlConnection(connstring);
            SqlCommand sqlcmdd = new SqlCommand("SELECT * FROM Coffees WHERE " + searchTerm + " = '" + item + "'", sqlcon);
            SqlDataAdapter adpp = new SqlDataAdapter(sqlcmdd);
            DataSet dss = new DataSet();
            adpp.Fill(dss);
            GridView1.DataSource = dss.Tables[0];
            GridView1.DataBind();

        }

    } 
```

如上所示，我有一个处理回发的 if 语句。回发是我仍然必须尝试解决的问题，但我相信这样做是在重新加载网格（如果它是回发）。我试图改变这个，所以如果它是一个回发它不受影响，但这只是忽略了过滤器。

希望有人能给我一个想法，我哪里出错了。以及如何在所有 y 页上应用过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:54:34.963

我将搜索词保存为视图状态变量，然后在我的页面索引更改方法中应用 if 来检查它是否为空。然后我要么在搜索词上重新绑定网格，要么使用标准绑定来显示所有结果。

# c++ - 我的初始化有什么问题？

> ID：15851332
> 
> 赞同：1
> 
> 时间：2013-04-06T13:06:31.593
> 
> 标签：c++, optimization, linear-programming, cplex

这行代码是我的 c++ cplex 库优化函数定义的一部分。

```
IloArray<IloArray<IloExpr> > weightedSumBR = IloArray<IloArray<IloExpr> >(env, r);

for(int i=0; i<r; i++) {
    weightedSumBR[i] = IloArray<IloExpr>(env, r);
    for(int j=0; j<color; j++) {
        for(int k=i*n; k<(i+1)*n; k++) {
            for(int l=0; l<N; l++) {
                 weightedSumBR[i][j] += m[k][l]*x[k][l][j];
            }
        }
    }
}

IloArray<IloArray<IloRange> > range_weightedSumBR(env, r);

for(int i=0; i<r; i++) {
    IloArray<IloRange> range_weightedSumBR[i] = IloArray<IloRange>(env, r);
    for(int j=0; j<color; j++) {
        IloRange range_weightedSum_BR[i][j] = IloRange(env, 0, weightedSum_BR[i][j], addupto);
    }
} 
```

但我收到以下错误：

```
g.cpp:120:78: error: variable-sized object ‘range_weightedSumBR’ may not be initialized
g.cpp:122:68: error: ‘weightedSum_BR’ was not declared in this scope
g.cpp:122:97: error: variable-sized object ‘range_weightedSum_BR’ may not be initialized 
```

为什么会这样？我应该如何改变这个？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:25:06.550

扩展我的评论：

```
IloArray<IloRange> range_weightedSumBR[i] = IloArray<IloRange>(env, r); 
```

看起来像是试图声明一个数组（这将隐藏在外部范围内声明的 range_weightedSumBR。

这同样适用于

```
IloRange range_weightedSum_BR[i][j] = IloRange(env, 0, weightedSum_BR[i][j], addupto); 
```

我假设你的意思是那些

```
range_weightedSumBR[i] = IloArray<IloRange>(env, r); 
```

和

```
range_weightedSumBR[i][j] = IloRange(env, 0, weightedSumBR[i][j], addupto); 
```

（还删除了一些额外的下划线）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:14:21.120

根据编译错误：

```
 IloArray<IloRange> range_weightedSumBR[i] = IloArray<IloRange>(env, r); 
```

看起来很奇怪，`IloArray<IloRange>`似乎是多余的。同时：

```
weightedSum_BR 
```

应该

```
weightedSumBR  //you may have typos in your code on variable names 
```

和

```
range_weightedSum_BR 
```

应该

```
range_weightedSumBR. 
```

编辑：

# vector - ocaml 向量空间

> ID：15851341
> 
> 赞同：1
> 
> 时间：2013-04-06T13:07:37.053
> 
> 标签：vector, geometry, ocaml, space

我有一个 R3 空间，我正在尝试用 OCAML 函数解决一些数学“问题”。

定义函数“move”，它根据plane_name（例如plane1）和向量（x，y，z）移动平面：

例子：

```
plane1 = [(1,2,-3); (10,5,2); (-2,3,7)]
move plane1 (1,2,-3);;
- : (int * int * int) list = [(2, 4, -6); (11, 7, -1); (-1, 5, 4)] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:41:29.927

我将限制我对问题 3 的回答。

我不知道您对 OCaml 的了解以及对您的回答施加了哪些限制。（请原谅我，但我假设这是一个家庭作业问题。）让我们假设练习的重点是开始递归思考。那么你想写一个这样的函数：

```
let move plane (x, y, z) = (( code goes here )) 
```

对于递归思考，基本见解是平面是点列表，您希望对所有点执行相同的操作。因此，该函数的较低级别视图将如下所示：

```
let rec move point_list (x, y, z) = (( code goes here )) 
```

现在，一个列表要么是空的，要么不是。你只需要弄清楚在每种情况下该怎么做。此外，当列表不为空时，只要您使用较小的列表调用它，您就可以递归地使用您自己的函数。

事实上，如果这个练习的目的*不是*学习递归思维，那么答案将完全不同。特别是，`List`模块中有一个功能可以很容易地解决问题。

**更新**

显然你想以非递归方式解决问题。为了说明这是如何工作的，这里有一个函数，它接受两个点并将两个点的 x、y 和 z 坐标加 1：

```
let add1 [(x1, y1, z1); (x2, y2, z2)] =
    [(x1 + 1, y1 + 1, z1 + 1); (x2 + 1, y2 + 1, z2 + 1)] 
```

这将导致编译器警告，因为它对于许多可能的输入都失败了。特别是，当列表中的点数不是 2 时，它就会失败。为了消除警告，我们需要决定要为这些情况返回什么。假设在这些情况下我们总是返回未更改的列表。然后我们得到以下信息：

```
let add1 = function
    | [(x1, y1, z1); (x2, y2, z2)] ->
        [(x1 + 1, y1 + 1, z1 + 1); (x2 + 1, y2 + 1, z2 + 1)]
    | pts -> pts 
```

我想你知道你想要什么，但这并不是特别惯用的 OCaml。

另一种非递归（没有`rec`）解决问题的方法是使用`List`模块中的函数。那会更惯用，实际上这可能是我在现实世界中会做的事情。

# vb.net - 使用命令行参数自动运行 vb.net 程序不起作用

> ID：15851343
> 
> 赞同：0
> 
> 时间：2013-04-06T13:07:43.513
> 
> 标签：vb.net, command, arguments, autostart

我正在编写一个需要管理员权限才能在 VB.NET（VS2012，框架 4）中运行的应用程序，它是一个保护 Hosts 文件不被修改的应用程序。我希望应用程序使用带有命令行参数“autorun”的 Windows 自动启动。

所以我用以下代码制作了一个复选框：

```
Private Sub CheckBox_autoupdate_Click(sender As Object, e As EventArgs) Handles CheckBox_autoupdate.Click
        Dim oreg As RegistryKey = Registry.CurrentUser
        Dim okey As RegistryKey = oreg.OpenSubKey("Software\Microsoft\Windows\CurrentVersion\Run", True)
        If CheckBox_autoupdate.Checked = True Then
            okey.SetValue("HostProtect", Application.ExecutablePath & " /autoupdate")
        Else
            okey.DeleteValue("HostProtect")
        End If
        My.Settings.Save()
    End Sub 
```

当我打开 regedit 时，该值存在，但是当我重新启动系统时，程序根本没有执行！

是因为应用程序需要管理员权限吗？如何让它启动并正确传递命令行参数？

期待你的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:32:27.160

`Application.ExecutablePath`将获得`.exe`链接，而不是路径，所以它应该是：

```
Application.StartupPath & " \autoupdate.exe" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:10:15.120

Windows 启动时不会运行 HKey_CurrentUser 条目。它们在用户登录并加载用户的注册表配置单元时运行。如果您希望它在 Windows 启动时运行，则需要使用 HKey_LocalMachine。或者更好的是，将其编写为 Windows 服务。

# actionscript-3 - 3D Flash 中的实例顺序

> ID：15851345
> 
> 赞同：0
> 
> 时间：2013-04-06T13:07:47.637
> 
> 标签：actionscript-3, flash, 3d

我在 Flash As3 中制作 9 个立方体的立方体。但是，由于索引整体添加到舞台的顺序，我无法正确旋转它。首先我创建了 6 个正方形的立方体，然后是 9 个立方体的墙，最后是 3 个墙的立方体。一切都很好，但是当我将它向左旋转时，立方体的顺序被颠倒了，它破坏了整个构图。我知道我可以根据轮换动态更改索引，但这将是一项非常麻烦的工作。有什么想法我怎么能做得更好？

这是实际模型： [http ://test.mrowa.topdivision.pl/kostka/3DTest.html](http://test.mrowa.topdivision.pl/kostka/3DTest.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:37:41.230

如果您使用 Flash 的显示列表，则必须根据精灵的 z 对精灵进行排序。

这是一些代码，可以`DisplayObjectContainer`根据 z 位置对 a 的子项进行排序，每当某个对象更改其位置时调用它。

```
public function sortChildren(container:DisplayObjectContainer):void
{
    var objects:Vector.<DisplayObject> = new Vector.<DisplayObject>;

    for (var i:int = 0; i < container.numChildren; i++) 
    {
        objects.push(container.getChildAt(i));
    }

    objects.sort(sortCompare);

    var index:int = 0;
    for (var j:int = 0; j < objects.length; j++) 
    {
            index = container.getChildIndex(objects[j]);
            if (index != j)
                container.setChildIndex(objects[j], j);         
    }
}

private function sortCompare(a:DisplayObject, b:DisplayObject):int
{
    return (a.z - b.z);
} 
```

您可以将`objects`成员移动为类成员，并在向舞台添加/删除项目时向其添加/删除项目，这样您就不必在每次调用此函数时填充整个数组。

# variables - 使用自动变量 $^ 的 Makefile 规则，没有依赖关系

> ID：15851349
> 
> 赞同：4
> 
> 时间：2013-04-06T13:08:09.717
> 
> 标签：variables, makefile, prerequisites

我从 GNU Make 手册中了解到，符号 `$^` 是一个自动变量，它代表所有先决条件的名称。但是我遇到了一个像这样的makefile：

```
SVR_OBJECT_FILES =      server.o\
                        server_func.o

CLT_OBJECT_FILES =      client.o

CFLAGS =                -Wall -Werror -W

CC =                    gcc

all:                   client/client server/serveur

client/client:         $(CLT_OBJECT_FILES)

server/serveur:        $(SVR_OBJECT_FILES)

client/client server/serveur:
    @mkdir -p $(dir $@)
    $(CC) $(CFLAGS) $^ -o $@

%.o: %.c
    $(CC) -c $<

clean:
    rm -f client/client server/serveur *.o 
```

哪个工作正常，所以我的问题是：下面的命令如何链接正确的目标文件，而 $^ 变量根本没有引用任何先决条件。（规则没有先决条件）

```
 $(CC) $(CFLAGS) $^ -o $@ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T13:35:33.297

`$^`包含目标的所有先决条件，而不仅仅是规则本身提到的先决条件。同一个文件可以在没有命令的规则中多次作为目标出现：

```
sometarget: dependency1
…
sometarget: dependency2
        assemble -o $@ $^
…
sometarget: dependency3 
```

的依赖关系`sometarget`是和`dependency1`，当命令被 调用时，它将接收所有三个作为参数。`dependency2``dependency3``assemble``make sometarget`

在这里，`$^`将包含所有`$(CLT_OBJECT_FILES)`或`$(SRV_OBJECT_FILES)`取决于执行命令的目标。

# symfony - LiipImagineBundle 缩略图不起作用

> ID：15851350
> 
> 赞同：5
> 
> 时间：2013-04-06T13:08:21.833
> 
> 标签：symfony, liipimaginebundle

我只是想让 LiipImagineBundle 工作。

好的，到目前为止我得到的一切：

*   使用作曲家安装
    *   $ php composer.phar 需要“liip/imagine-bundle:dev-master”
*   在 AppKernel.php 中启用的包
    *   新的 Liip\ImagineBundle\LiipImagineBundle(),
*   添加到 routing.yml
    *   _想象路径
*   在 config.yml 中添加了 liip_imagine 过滤器

    使用 php app/console 路由器检查：调试和路径 _imagine_my_thumb 存在。

但使用后：

```
<img src="{{ '/relative/path/to/image.jpg' | imagine_filter('my_thumb') }}" /> 
```

图像未呈现，根本找不到路径错误。

prod.log 说 Route _imagine_my_thumb 不存在，尽管它存在，因为它在两种环境中都使用 router:debug 显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T11:26:32.123

你知道你应该`'/relative/path/to/image.jpg'`用你的图像路径替换吗？确保您的文件存在。

一个工作示例

配置：

```
liip_imagine:
    driver:               gd
    web_root:             %kernel.root_dir%/../web
    data_root:            %kernel.root_dir%/../app
    cache_mkdir_mode:     0777
    cache_prefix:         /media/cache
    cache:                web_path
    cache_clearer:        true
    data_loader:          filesystem
    controller_action:    liip_imagine.controller:filterAction
    formats:              []
    filter_sets:
        avatar:
            filters:
                thumbnail: { size: [40, 40], mode: outbound }
        profile:
            filters:
                relative_resize: { widen: 500 } 
```

html:

```
<img src="{{ 'uploads/images/filename.jpg' | imagine_filter('avatar') }}" alt="image">
enter code here 
```

路由.yml：

```
_imagine:
    resource: .
    type:     imagine 
```

**备注**：我的源文件夹在 app 文件夹中（参见：data_root）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-23T10:44:30.517

我有类似的问题，在 php.ini 渲染中启用 php_fileinfo 扩展后开始工作。

# entity-framework-5 - 使用流利的 API 到字符串的实体框架代码优先关系

> ID：15851353
> 
> 赞同：0
> 
> 时间：2013-04-06T13:08:37.257
> 
> 标签：entity-framework-5

我有以下课程

```
public pratial class Address
{
    public Guid AddressID{ get; set; }
    public AddressType AddressType{ get; set; }
}

public partial class AddressType
{
    public string TypeName{ get; set; }
} 
```

在我派生的 DBContext 类中，我已经覆盖了 OnModelCreating

```
protected override OnModelCreating(DBModelBuilder modelBuilder)
{
    modelBuilder.Entity<Address>().HasKey( p => p.AddressID );
    modelBuilder.Entity<Address>().Property ( p => p.AddressID)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    modelBuilder.Entity<Address>().HasRequired( p => p.AddressType);
    modelBuilder.Entity<AddrssType>().HasKey( p => p.TypeName );

    ...
} 
```

这很好，我在数据库中填写了一条记录

我在数据库中的表最终看起来像这样

```
Addresses Table
AddressID (PK, uniqueidentified, not null)
AddressType_TypeName(FK, nvarchar(32), not null)

AddressTypes Table
TypeName (PK, uniqueidentifies, not null) 
```

现在我把一些数据放在表中

AddressTypes Record TypeName 我放在 Business

在我放入业务的地址记录 AddressType_TypeName

当我对此进行单元测试时，我希望能重新记录下来

```
List<Address> addresses = context.Addresses.ToList()
Assert.AreEqual(addresses[0].AddressType.TypeName, "Business"); 
```

但这无法告诉我 AddressType 为空

如何设置 Address 和 AddressType 之间的关系，以便我取回已连接的 AddressType？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:35:16.427

要加载相关实体，您必须告诉它 Entity Framework，或者使用*急切加载*：

```
using System.Data.Entity;

//...

var addresses = context.Addresses.Include(a => a.AddressType).ToList() 
```

...或者通过默认启用的*延迟加载*，如果您将导航属性标记为`virtual`：

```
public virtual AddressType AddressType { get; set; } 
```

急切加载将父数据和相关数据一起加载到单个数据库往返中。延迟加载需要两次往返，第二次发生在 convers 下，当您访问该行中的导航属性时`addresses[0].AddressType.TypeName`。

**编辑**

测试项目以显示此示例中的延迟加载有效（EF 5.0、.NET 4.0、SQL Server Express 2008 R2 作为数据库）。我只放在`virtual`前面`AddressType`。其余的与您的模型相同：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations.Schema;
using System.Data.Entity;
using System.Linq;

namespace EFLazyLoading
{
    public partial class Address
    {
        public Guid AddressID{ get; set; }
        public virtual AddressType AddressType{ get; set; }
    }

    public partial class AddressType
    {
        public string TypeName{ get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<Address> Addresses { get; set; }
        public DbSet<AddressType> AddressTypes { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Address>().HasKey( p => p.AddressID );
            modelBuilder.Entity<Address>().Property ( p => p.AddressID)
                .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
            modelBuilder.Entity<Address>().HasRequired( p => p.AddressType);
            modelBuilder.Entity<AddressType>().HasKey( p => p.TypeName );
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());
            using (var ctx = new MyContext())
            {
                var address = new Address
                {
                    AddressType = new AddressType { TypeName = "Business" }
                };
                ctx.Addresses.Add(address);
                ctx.SaveChanges();
            }

            using (var ctx = new MyContext())
            {
                List<Address> addresses = ctx.Addresses.ToList();

                string typeName = addresses[0].AddressType.TypeName;
            }
        }
    }
} 
```

最后一行的结果`typeName`符合预期：

![延迟加载](https://i.stack.imgur.com/qNyse.png)

# java - java.io.IOException：无法解密安全内容条目：javax.crypto.BadPaddingException：给定最终块未正确填充

> ID：15851358
> 
> 赞同：10
> 
> 时间：2013-04-06T13:09:09.430
> 
> 标签：java, tomcat, ssl, jks

我运行以下命令从 PFX 文件创建 JKS 文件以在 Tomcat 中使用：

```
keytool -importkeystore -srckeystore PFX_P12_FILE_NAME -srcstoretype pkcs12 -srcstorepass PFX_P12_FILE -srcalias SOURCE_ALIAS -destkeystore KEYSTORE_FILE -deststoretype jks -deststorepass PASSWORD -destalias ALIAS_NAME 
```

但我收到以下错误：

> keytool 错误：java.io.IOException：无法解密安全内容条目：javax.crypto.BadPaddingException：给定最终块未正确填充

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-08T21:17:51.250

我遇到了同样的问题，发现答案很简单。见下文：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6974037](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6974037)

显然，当密码不匹配或您输入的新密码不符合条件时，可能会引发此错误。就我而言，是后者。

# java - 用分母拆分字符串不起作用

> ID：15851360
> 
> 赞同：1
> 
> 时间：2013-04-06T13:09:22.003
> 
> 标签：java, netbeans, split, assign

快速提问：我想使用句点 (.) 作为分隔符来拆分 IP 地址（例如 192.168.0.1）。我似乎无法正确处理。我尝试运行不同的场景以查看是否是我的大脑功能障碍，但是当在数字而不是句点之间放置空格时，一切似乎都很好。我如何成功地做到这一点？

这是我用来运行它的一段脚本。

```
String ipAddress = "10.0.0.2";
String[] split = ipAddress.split(".");
//It's supposed to split into four parts and each part needs to be assigned to a var
String Part1 = split[0];
String Part2 = split[1];
String Part3 = split[2];
String Part4 = split[3];
//Just to make sure that it worked...
System.out.println(Part1 + " " + Part2 + " " + Part3 + " " + Part4); 
```

在您质疑我的知识之前，我正在学习新的 Java 函数，但有时我无法使其工作。

保持好状况！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:10:47.980

尝试

```
String[] split = ipAddress.split("\\."); 
```

[split()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)方法接受正则表达式，而不是字符串，并且DOT**在**正则表达式中具有特殊含义。所以你需要用双斜杠转义它。

或者你可以使用[Pattern.quote](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)

```
String[] split = ipAddress.split(Pattern.quote(".")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:11:11.017

试试这个

```
 String parts[] = ipAddress.split("\\.")    //this is double back slash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:17:27.087

在 Java 中有一个处理 IP 地址的类，让您无需尝试自己解析字符串即可获得正确的表示：

```
InetAddress a = InetAddress.getByName("10.0.0.2");
byte[] b = a.getAddress();
System.out.println(b[0]+" "+b[1]+" "+b[2]+" "+b[3]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T13:19:12.830

采用 `String parts[] = ipAddress.split("\\.")`

# c - 从文件填充动态数组

> ID：15851366
> 
> 赞同：0
> 
> 时间：2013-04-06T13:10:18.093
> 
> 标签：c

您好，我在从文件中填充数组时遇到问题。我第一次运行我的 nacitaj 函数时效果很好。但是在我再次调用它之后，输出值很疯狂。有没有办法告诉程序在多次调用 nacitaj 函数后覆盖 suma[] 中的值？

```
int nacitaj(float *suma, int *k) {
FILE *fr;
int i=0;
int j=1;
int o=1;
char p[30];
j=*k;

if ((fr = fopen("FILE.TXT","r")) == NULL){
    printf("NULL\n");
}
else {
    while(feof(fr) == 0){
        fgets(p,30,fr);
        fgets(p,30,fr);
        fgets(p,30,fr);
        fgets(p,30,fr);
        fgets(p,30,fr);
        i++;
    }

    suma=((float*)malloc(i*sizeof (float))); 
    rewind(fr);

    while(feof(fr) == 0){
        fgets(p,30,fr);
        fgets(p,30,fr);
        fgets(p,30,fr);
        fscanf(fr,"%f\n", &suma[j]);
        fgets(p,30,fr);
        fgets(p,30,fr);
        j++;

    }

}
*k=j;
fclose(fr);
return suma;
} 
```

主要的

```
if(c=='N'){
            suma=nacitaj(suma,&k);
        } 
```

我试着做

```
suma=((float*)malloc(0*sizeof (float))); 
```

在开始，但它使情况变得更糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T12:57:25.073

> 在第二次调用我的函数时，我仍然必须弄清楚如何重新分配我的数组。

再次调用该函数时，您已经使用相同的语句重新分配数组（此外，它还有许多不可爱的括号和类型转换）。

```
 suma=((float*)malloc(i*sizeof (float))); 
```

您可能正在寻找的是如何在不再需要数组时取消分配。

```
 free(suma); 
```

# javascript - 下划线查找对象值的最小值和最大值

> ID：15851369
> 
> 赞同：24
> 
> 时间：2013-04-06T13:10:26.853
> 
> 标签：javascript, underscore.js

按照[这里](http://net.tutsplus.com/tutorials/javascript-ajax/getting-cozy-with-underscore-js/)的教程，

> 集合可以是数组也可以是对象，JavaScript 中的关联数组

这是否意味着下面的所有函数`collection`都同样适用于对象文字。例如，我想根据条件选择值。说，

```
var obj = {
"1": {id: 1, val: 2},
"2": {id: 2, val: 5},
"3": {id: 3, val: 8},
"4": {id: 4, val: 1}
} 
```

我想找到 val 字段的最大值和最小值。看着 API，我在想用来`pluck`获取数组`val`，然后做`min`和`max`。

*   我可以将 pluck 应用于对象吗（如 api 示例显示在对象数组中的使用）
*   有没有更好的办法？

谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-06T13:28:38.123

> 这是否意味着集合下的所有函数都同样适用于对象文字？

[是](http://underscorejs.org/#collections)的。

> 我可以将 pluck 应用于对象吗（如 api 示例显示在对象数组中的使用）

你试过了吗？是的，你可以，但你会得到一个数组。

> 有没有更好的办法？

`Math.min.apply(null, _.pluck(obj, "val"))`（或`_.min(_.pluck(obj, "val"))`）获得最小值*就*可以了。但是，如果您想获取整个对象（带有 id），您还可以使用min/max[`iterator`参数](http://underscorejs.org/#max)：

```
var lowest = _.min(obj, function(o){return o.val;}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T15:22:48.690

这样做的另一种方法，如果你想返回多行都具有很高的价值，那就太好了，是这样的：

```
_.where(obj, {score: _.max(_.pluck(obj, 'value'))}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-04-05T02:31:27.697

没必要花哨。只需使用该函数创建一个目标值数组`map`并使用它`_min`来查找最小值。

**标准**

```
var minimum = _.min(data.map(function(rec) {return rec.val})) 
```

**ES6**

```
let minimum = _.min(data.map((rec) => {return rec.val})) 
```

# ios - 将控制器添加到 UITabBarController 而不在标签栏中出现新项目

> ID：15851376
> 
> 赞同：5
> 
> 时间：2013-04-06T13:11:12.987
> 
> 标签：ios, cocoa-touch, uitabbarcontroller, uitabbaritem

我有一个以 UITabBarController 作为其主控制器的应用程序。

当用户点击一个按钮（不在标签栏中，只是其他按钮）时，我想在我的 UITabBarController 中添加新的 UIViewController 并显示它，但我不希望新的 UITabBarItem 出现在标签栏中。如何实现这种行为？

我试图将`tabBarController.selectedViewController`属性设置为不在`tabBarController.viewControllers`数组中的视图控制器，但没有任何反应。如果我将视图控制器添加到`tabBarController.viewControllers`数组中，新项目会自动出现在选项卡栏中。

**更新**

感谢 Levi，我扩展了我的标签栏控制器来处理不存在于`.viewControllers`.

```
@interface MainTabBarController : UITabBarController

/** 
 * By setting this property, tab bar controller will display
 * given controller as it was added to the viewControllers and activated
 * but icon will not appear in the tab bar.
 */
@property (strong, nonatomic) UIViewController *foreignController;

@end

#import "MainTabBarController.h"

@implementation MainTabBarController

- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
  self.foreignController = nil;
}

- (void)setForeignController:(UIViewController *)foreignController
{
  if (foreignController) {
    CGFloat reducedHeight = foreignController.view.frame.size.height - self.tabBar.frame.size.height;
    foreignController.view.frame = CGRectMake(0.0f, 0.0f, 320.0f, reducedHeight);

    [self addChildViewController:foreignController];
    [self.view addSubview:foreignController.view];
  } else {
    [_foreignController.view removeFromSuperview];
    [_foreignController removeFromParentViewController];
  }

  _foreignController = foreignController;
}

@end 
```

当用户在标签栏中选择项目时，代码将正确设置“外部”控制器的视图大小并将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:11:51.050

您可以推送它（如果您有导航控制器）或将其视图添加到可见视图控制器的视图中，并将其添加为子视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:16:50.573

您可以通过以下方式呈现新的视图控制器：

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion; 
```

或者，如果您`UIViewControllers`的其中一个在 a 内`UINavigationController`，您可以：

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated; 
```

# visual-studio-2012 - Visual Studio 2012 中的搁置错误

> ID：15851377
> 
> 赞同：0
> 
> 时间：2013-04-06T13:11:15.830
> 
> 标签：visual-studio-2012

我们正在使用连接到 TFS2012 的 Team explorer 2012。我正在通过创建一些工作区来工作。我试图通过在工作区列表中间选择一个工作区来取消搁置搁置集。但似乎更改未搁置到工作区列表中首先列出的工作区。为什么会发生这种情况？解决方案是什么？

编辑：

似乎对列表中的随机工作区的更改不仅针对第一个工作区

# email - 如何在服务器上收听 C# 中的电子邮件回复

> ID：15851381
> 
> 赞同：0
> 
> 时间：2013-04-06T13:11:46.643
> 
> 标签：email

我们正在尝试提供响应电子邮件回复的服务。（类似于“回复此电子邮件以取消订阅”服务）

**我们如何收听指定电子邮件地址的回复？**

我们需要安装整个邮件服务器吗？

我们可以使用一些简单的组件吗？还是服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:20:04.347

如果您已经为该域设置了电子邮件服务器，则可以直接使用它。为可以接收电子邮件的电子邮件地址设置一个帐户，然后使用 IMAP 或 POP 阅读电子邮件并完成工作。

您必须找到一个组件来执行 IMAP 或 POP，但那里有很多：

*   [https://github.com/andyedinborough/aenetmail](https://github.com/andyedinborough/aenetmail)
*   [http://mailsystem.codeplex.com/](http://mailsystem.codeplex.com/)
*   [https://github.com/smiley22/S22.Imap](https://github.com/smiley22/S22.Imap)
*   [http://www.limlabs.com/mail](http://www.limilabs.com/mail)

# php - 处理mysql数据库中数据最安全的方法是什么

> ID：15851384
> 
> 赞同：-3
> 
> 时间：2013-04-06T13:12:07.910
> 
> 标签：php, mysql, database, security, pdo

使用 PDO 是否比普通的经典“mysql_query”更安全？还是有其他更安全的方法可以从 mysql db 导入和导出数据

我听说使用 PDO 可能会给您带来问题，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:18:53.873

我会使用带有参数绑定的 PDO，而不是简单的 mysql_query。这将确保您不必处理项目的 SQL 注入问题

这是我从 php.net 文档中获取的一个简单示例：

```
<?php
/* Execute a prepared statement by binding PHP variables */
$calories = 150;
$colour = 'red';
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour');
$sth->bindParam(':calories', $calories, PDO::PARAM_INT);
$sth->bindParam(':colour', $colour, PDO::PARAM_STR, 12);
$sth->execute();
?> 
```

以这种方式使用 pdo 肯定更安全。它还将处理变量转换。我在所有当前的 php 项目中都使用 PDO（在具有附加抽象级别的低级别），我从来没有遇到过任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:19:11.873

一般来说，如果您使用`mysql_query`PDO 包装器而不是 PDO 包装器，那么从数据库导入/导出数据并不会更加安全。您需要注意的重要事项是保护不安全的数据源。一般来说 - 不要相信来自用户的任何东西，例如 GET、POST、COOKIE 等，并用作代码的参数 - 将其视为所有恶意数据并首先验证为您期望的格式。

PDO 在某种意义上“更安全”，因为它很容易参数化您的 SQL 查询并避免通常是最常见的 Web 攻击类型的 SQL 注入类型的攻击。例如：

```
<?php
$id = (isset(_$GET['id']))? _$GET['id'] : ''; // Possibly unsafe data from user
$dbh = new PDO('mysql:host='.$host.';dbname='.$name, $user, $pass);
$sth = $dbh->prepare("SELECT * FROM `table` WHERE `id`=?");
$sth->execute(array($id));
?> 
```

通过使用像上面这样的参数化查询，其中占位符`?`被预期的特定数据查询替换，您可以有效地防止 SQL 注入发生，因为 PDO 然后将您从中获得的数据`_$GET['id']`视为“数据”，而不是可能是查询字符串的一部分（这可能会导致 SQL 注入）。

例如，如果您将通过将`GET`数据附加到查询来直接插入数据，例如：

```
$query = "SELECT * FROM `table` WHERE `id`=".$_GET['id']; 
```

这很容易导致 SQL 注入。永远不要那样做。`_$GET`如果变量未经过验证或过滤，SQL 的最后一部分可以以各种方式注入您从未打算执行的额外 SQL 。如果在上面的示例中用户提供了以下字符串`_$GET['id']`-`"1;DROP TABLE table;"`这将有效地删除您的用户表 - 这是您从未打算做的事情，那么结果查询将如下所示：

```
"SELECT * FROM `table` WHERE `id`=1;DROP TABLE table;" 
```

首先，您应该尽一切可能防止获取无效数据，例如，如果您期望整数，您可能会这样做：

```
$id = (isset(_$GET['id']))? _$GET['id'] : ''; // Possibly unsafe data from user
$id = intval($id);  // Make sure the data is integer at all times
if ($id < 0) $id = 0; // Make sure it is positive integer at all times 
```

这样你就可以确保数据是预期的格式。

通过首先验证数据，然后使用参数化查询插入数据库，您可以确保多层安全性，帮助您摆脱数据库中的无效条目以及无效代码行为。正如下面评论中的“您的常识”所建议的那样，它并不能使其对所有类型的攻击都绝对安全，但它确实大大降低了它们的可能性。

`intval`不是唯一可以帮助您的功能，您还可以检查：

[http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

您指的是关于 PDO 的哪些问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:20:51.283

您正在使用的函数名称中没有什么本质上是安全的。

这是使用它们*的方式*可能是安全的（或不安全）。可以使 mysql_query 的安全性不亚于 PDO。相反，如果使用不当，PDO 很容易“给您带来麻烦”。

因此，在 mysql 查询（不是数据库）中处理数据的最安全方法是：

1.  每个动态文字都应仅通过*占位符添加到查询中*
2.  如果不能使用 plcaceholder - 值必须针对硬编码的允许值列表列入白名单

由于 PDO 提供了开箱即用的占位符支持，因此它通常优于 mysql_query。但是这种支持非常有限，想要得到全面的保护，就得自己创建解决方案，或者使用一些现成的库，比如[SafeMySql](https://github.com/colshrapnel/safemysql#safemysql)

# objective-c - 如何使用 NSFileHandle 的 readabilityHandler 检查文件结尾？

> ID：15851391
> 
> 赞同：13
> 
> 时间：2013-04-06T13:12:52.897
> 
> 标签：objective-c, macos, cocoa, nsfilehandle

我正在使用块从 a `NSFileHandle`（来自 a ）读取数据：`NSPipe``readabilityHandler`

```
fileHandle.readabilityHandler = ^( NSFileHandle *handle ) {
     [self processData: [handle availableData]];
} 
```

这很好用，我得到了我期望提供给我的`processData`方法的所有数据。问题是我需要知道读取最后一块数据的时间。`availableData`如果它到达文件末尾，则应该返回一个空`NSData`实例，但问题是在 EOF 上不会再次调用可达性处理程序。

我找不到任何关于如何在 EOF 上获得某种通知或回调的信息。那么我错过了什么？Apple 真的提供了没有 EOF 回调的异步读取 API 吗？

顺便说一句，我不能使用基于 runloop 的`readInBackgroundAndNotify`方法，因为我没有可用的 runloop。如果我不能让它与`NSFileHandle`API 一起工作，我可能会直接使用调度源来执行 IO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-29T03:56:47.540

我个人将当前文件偏移量与当前文件位置进行比较并停止阅读。

```
extension FileHandle {
    func stopReadingIfPassedEOF() {
        let pos = offsetInFile
        let len = seekToEndOfFile()
        if pos < len {
            // Resume reading.
            seek(toFileOffset: pos)
        }
        else {
            // Stop.
            // File offset pointer stays at the EOF.
            readabilityHandler = nil
        }
    }
} 
```

很长时间以来我都无法理解为什么它是这样设计的，但现在我认为这可能是故意的。

在我看来，Apple 基本上定义`FileHandle`为无限流，因此，除非您关闭文件，否则 EOF 的定义并不明确。`FileHandle`似乎更像是一个“渠道”。

如果另一个进程在您读取文件时向/从文件中追加/删除一些数据，也不清楚会发生什么。在这种情况下，EOF 是什么？据我所知，Apple 文档中没有提及此案例。据我所知，macOS 中没有像其他类 Unix 系统那样真正的独占文件 I/O 锁。

在我看来，`availableData`如果 I/O 不够快，可以随时返回空数据，而`readabilityHandler`不必关心 EOF。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-22T21:12:53.350

我相信接受的答案实际上是不正确的。到达 EOF 时确实会调用 readabilityHandler。这是通过将 availableData 的大小设为 0 来表示的。

这是一个简单的游乐场，可以证明这一点。

```
import Foundation
import PlaygroundSupport

let pipe = Pipe()
pipe.fileHandleForReading.readabilityHandler = { fh in 
    let d = fh.availableData
    print("Data length: \(d.count)")
    if (d.count == 0) {
        fh.readabilityHandler = nil
    }
}
pipe.fileHandleForWriting.write("Hello".data(using: .utf8)!)
pipe.fileHandleForWriting.closeFile()

PlaygroundPage.current.needsIndefiniteExecution = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T09:18:23.960

如果您`NSFileHandle`不能使用`readInBackgroundAndNotify`.

我看到的两个解决方案：

1.  创建一个运行循环，然后使用`readInBackgroundAndNotify`.
2.  使用滚动您自己的实现`dispatch_io_*`

# javascript - jQuery 多个 parent() 调用

> ID：15851393
> 
> 赞同：0
> 
> 时间：2013-04-06T13:12:56.443
> 
> 标签：javascript, jquery

我有这个获取父元素的 id 和文本的**for 循环**：

```
for (var i = 1; i < parents_num; i++) 
{
  var prev_parent_text = jQuery(id).parent().parent().find('> .myclass').text();     
  var prev_parent_id = jQuery(id).parent('ul').parent('li').attr('id');
} 
```

我想要做的是在每个循环中将 parent() 的数量增加**2**：例如，

对于 i = 1：

```
var prev_parent_text = jQuery(id).parent().parent().find('> .myclass').text();  
var prev_parent_id = jQuery(id).parent('ul').parent('li').attr('id'); 
```

对于 i = 2：

```
var prev_parent_text = jQuery(id).parent().parent().parent().parent().find('> .myclass').text();  
var prev_parent_id = jQuery(id).parent('ul').parent('li').parent('ul').parent('li').attr('id'); 
```

对于 i = 3：

```
var prev_parent_text = jQuery(id).parent().parent().parent().parent().parent().parent().find('> .myclass').text();  
var prev_parent_id = jQuery(id).parent('ul').parent('li').parent('ul').parent('li').parent('ul').parent('li').attr('id'); 
```

等等..

我没有成功使用 eq() 函数：

```
var num = (i*2) - 2
var prev_parent_text = jQuery(id).parent().eq(num).find('> .myclass').text();  
var prev_parent_id = jQuery(id).parent('ul').parent('li').eq(num).attr('id'); 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:19:32.880

为每个步骤保留一个参考，并更新每个步骤的参考：

```
var $id = jQuery(id);
var $li = jQuery(id);

for (var i = 1; i < parents_num; i++) {
  $id = $id.parent().parent();
  $li = $li.parent('ul').parent('li');
  var prev_parent_text = $id.find('> .myclass').text();     
  var prev_parent_id = $li.attr('id');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:21:57.433

您可以为此添加自定义 jquery 函数，如下所示：

```
$.fn.nparent = function(n) { 
    var elem = $(this);
    for (var i=0;i<n;i++) {
       elem = elem.parent();
    }
    return elem;
} 
```

并像这样使用它：

```
var id = $('#element').nparents(4).attr('id'); 
```

# c# - 进入网站时如何督促用户更新浏览器

> ID：15851394
> 
> 赞同：2
> 
> 时间：2013-04-06T13:12:58.100
> 
> 标签：c#, asp.net, browser, cross-browser, updates

我想知道是否有某种方法可以“强制”用户更新用户的网络浏览器。

例如，如果用户进入我的网站并且他或她使用的是旧版本的浏览器，则通常隐藏的页面区域将被显示出来。该显示区域将包含浏览器更新建议和指向外部页面的超链接，用户可以在其中下载用户浏览器的新版本或更新当前版本。

具体来说，以下是我需要指导的目标的两个方面：

1.  如何识别浏览器及其版本，以及
2.  如何显示特定于用户当前使用的浏览器的隐藏区域。（也许每种常见的浏览器都会有一个区域，所以问题是如何显示相关区域。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T17:46:47.550

在我的研究中，我遇到了这个网站，它提供了一个基于 JavaScript 的小型通知组件：

[http://browser-update.org/index.html](http://browser-update.org/index.html)

这正是我一直在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:24:55.853

例如，您可以在 ActionFilterAttribute 中执行此操作。例如，它可能如下所示：

```
public class WarnAboutOldBrowserAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var request = filterContext.HttpContext.Request;

        //check if it browser warning was already checked
        if (request.Cookies["checked"] != null)
        {
             return;
        }
        //exmaple is for IE 6
        if (request.Browser.Browser.Trim().ToUpperInvariant().EqualsExact("IE") && request.Browser.MajorVersion <= 6)
        {
          filterContext.Controller.ViewData["RequestedUrl"] = request.Url.ToString();

          filterContext.Result = new ViewResult { ViewName = "OldBrowserWarning" };
        }
        //add cookie for caching
        filterContext.HttpContext.Response.AppendCookie(new HttpCookie("checked", "true"));
        }

    }
} 
```

当然，您还必须添加一个名为“OldBrowserWarning”的视图来向用户显示信息。

其他方法是在 _Layout.cshtml 中添加警告，并在上面的代码中在 ViewBag 中设置正确的标志

# c# - 使用基类 IEqualityComparer 执行 Distinct()，仍然返回子类类型？

> ID：15851399
> 
> 赞同：7
> 
> 时间：2013-04-06T13:13:26.600
> 
> 标签：c#, linq, distinct, iequalitycomparer

`BaseClass`我有许多类派生自一个`BaseClass`只有 `Id 属性的类。

我现在需要对其中一些对象的集合进行区分。对于每个子类，我一遍又一遍地使用以下代码：

```
public class PositionComparer : IEqualityComparer<Position>
{
    public bool Equals(Position x, Position y)
    {
        return (x.Id == y.Id);
    }

    public int GetHashCode(Position obj)
    {
        return obj.Id.GetHashCode();
    }
} 
```

鉴于逻辑只是基于`Id`，我想创建一个比较器来减少重复：

```
public class BaseClassComparer : IEqualityComparer<BaseClass>
{
    public bool Equals(BaseClass x, BaseClass y)
    {
        return (x.Id == y.Id);
    }

    public int GetHashCode(BaseClass obj)
    {
        return obj.Id.GetHashCode();
    }
} 
```

但这似乎无法编译：

```
 IEnumerable<Position> positions = GetAllPositions();
  positions = allPositions.Distinct(new BaseClassComparer()) 
```

...因为它说它不能从转换`BaseClass`为`Position`. 为什么比较器强制此`Distinct()`调用的返回值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T14:18:31.997

更新：这个问题是[我 2013 年 7 月博客的主题](http://ericlippert.com/2013/07/29/a-contravariance-conundrum/)。谢谢你的好问题！

* * *

您在泛型方法类型推断算法中发现了一个不幸的边缘情况。我们有：

```
Distinct<X>(IEnumerable<X>, IEqualityComparer<X>) 
```

接口在哪里：

```
IEnumerable<out T> -- covariant 
```

和

```
IEqualityComparer<in T> -- contravariant 
```

当我们从`allPositions`to进行推断时，`IEnumerable<X>`我们说 "`IEnumerable<T>`在 T 中是协变的，因此我们可以接受`Position` *或任何更大的类型*。（基本类型比派生类型“更大”；世界上的动物比长颈鹿还多。）

当我们从比较器进行推断时，我们说“`IEqualityComparer<T>`在 T 中是逆变的，所以我们可以接受`BaseClass` *或任何更小的类型*。”

那么当需要实际推断类型参数时会发生什么？我们有两个候选人：`Position`和`BaseClass`。**两者都满足规定的界限**。`Position`满足第一个界限，因为它与第一个界限相同，并且满足第二个界限，因为它小于第二个界限。`BaseClass`满足第一个界限，因为它大于第一个界限，并且与第二个界限相同。

我们有两个赢家。我们需要一个决胜局。在这种情况下我们该怎么办？

这是一些争论的焦点，并且存在三个方面的争论：选择更具体的类型，选择更一般的类型，或者类型推断失败。我不会重复整个论点，但足以说“选择更一般”的一方赢得了胜利。

（更糟糕的是，规范中有一个错字说“选择更具体的”是正确的做法！这是设计过程中编辑错误的结果，从未更正。编译器实现“选择更通用的”。我已经提醒 Mads 这个错误，希望这会在 C# 5 规范中得到修复。）

所以你去。在这种情况下，类型推断会选择更通用的类型并推断出调用的意思`Distinct<BaseClass>`。类型推断从不考虑*返回类型*，当然也不考虑*表达式被分配的内容*，因此它选择与分配给变量不兼容的类型这一事实不是它的业务。

我的建议是在这种情况下明确说明类型参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T13:18:21.353

如果您查看[Distinct](http://msdn.microsoft.com/en-us/library/bb338049.aspx)的定义，则只涉及一个泛型类型参数（而不是一个 TCollection 用于输入和输出集合，一个 TComparison 用于比较器）。这意味着您的 BaseClassComparer 将结果类型限制为基类，并且无法在分配时进行转换。

您可能会创建一个带有泛型参数的 GenericComparer，该参数被限制为至少是基类，这可能会让您更接近您正在尝试做的事情。这看起来像

```
public class GenericComparer<T> : IEqualityComparer<T> where T : BaseClass
{
    public bool Equals(T x, T y)
    {
        return x.Id == y.Id;
    }

    public int GetHashCode(T obj)
    {
        return obj.Id.GetHashCode();
    }
} 
```

因为您需要一个实例而不仅仅是一个方法调用，所以您不能让编译器推断泛型类型（[参见此讨论](https://stackoverflow.com/questions/3570167/why-cant-the-c-sharp-constructor-infer-type)），但在创建实例时必须这样做：

```
IEnumerable<Position> positions;
positions = allPositions.Distinct(new GenericComparer<Position>()); 
```

[Eric 的回答](https://stackoverflow.com/a/15852015/468244)解释了整个问题的根本原因（就协变和逆变而言）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:20:53.787

想象一下，如果你有：

```
var positions = allPositions.Distinct(new BaseClassComparer()); 
```

你期望的类型`positions`是什么？`Distinct`正如编译器从给定的实现参数推断出`IEqualityComparer<BaseClass>`的，表达式的类型是`IEnumerable<BaseClass>`。

该类型无法自动转换为，`IEnumerable<Position>`因此编译器会产生错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T13:41:54.053

由于`IEqualityComparer<T>`在类型中是逆变的`T`，如果您将泛型参数指定为，则可以使用具有 distinct 的基类比较器`Distinct`：

```
IEnumerable<Position> distinct = positions.Distinct<Position>(new BaseClassComparer()); 
```

如果你没有指定这个，编译器会推断出的类型`T`是`BaseClass`因为`BaseClassComparer`implements `IEqualityComparer<BaseClass>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T13:46:07.747

您需要对代码进行小的更改。波纹管工作示例：

```
public class BaseClass
{
    public int Id{get;set;}
}

public class Position : BaseClass
{
    public string Name {get;set;}
}
public class Comaprer<T> : IEqualityComparer<T>
    where T:BaseClass
{

    public bool Equals(T x, T y)
    {
        return (x.Id == y.Id);
    }

    public int GetHashCode(T obj)
    {
        return obj.Id.GetHashCode();
    }
}
class Program
{
    static void Main(string[] args)
    {
        List<Position> all = new List<Position> { new Position { Id = 1, Name = "name 1" }, new Position { Id = 2, Name = "name 2" }, new Position { Id = 1, Name = "also 1" } };
        var distinct = all.Distinct(new Comaprer<Position>());

        foreach(var d in distinct)
        {
            Console.WriteLine(d.Name);
        }
        Console.ReadKey();
    }
} 
```

# emacs - Emacs 24.3 for windows，Cedet 无法与 ECB 一起使用，错误：Recursive `require' for feature `speedbar'

> ID：15851406
> 
> 赞同：1
> 
> 时间：2013-04-06T13:14:17.650
> 
> 标签：emacs, cedet, emacs-ecb

目前我正在努力使用**Windows 的 Emacs (emacs-24.3-bin-i386.zip 形式[http://ftp.gnu.org/gnu/emacs/windows/](http://ftp.gnu.org/gnu/emacs/windows/) )**。在我通过**MELPA**站点通过package-intall-package ecb安装**ECB（版本- 20130202.1459）**，并在“.emacs”文件中添加（需要'ecb）后，运行emacs会导致以下错误：

 ****错误：递归`require' for feature`速度条'**

当我使用 `--debug-init' 选项启动 Emacs 以检查错误回溯时，我收到以下消息：

ECB 2.40 使用 CEDET 2.0（包含语义 2.2、eieio 1.4、speedbar）。要求：自动加载未能定义功能调试

任何人都可以知道这有什么问题以及如何解决吗？提前致谢。**

# java - 是否可以将 FragmentActivity 放在片段容器中？

> ID：15851408
> 
> 赞同：1
> 
> 时间：2013-04-06T13:14:25.893
> 
> 标签：java, android, android-actionbar, android-listfragment, android-fragmentactivity

我有一个托管片段列表的片段活动。片段活动还有几个文本视图，用于汇总片段列表中的数据。

*   FragmentActivity = 包含片段容器、文本视图和按钮的布局。

*   ListFragment = 进入 FragmentActivity 的片段容器，是一个数据列表

这可以作为一项活动正常工作，但现在我试图将全部内容放入另一个片段容器中，以将其显示在另一个活动的操作栏选项卡中。我只能让它与 ListFragment 一起工作（显然这是因为 FragmentActivity 不能进入片段容器内部），但这意味着摘要文本视图和按钮丢失了，我也确实需要它们。

我想知道是否有人对实现这一点的最佳方法提出建议？我对解决方案的一些想法：

*   如果单击此特定选项卡，则更改包含选项卡的活动的布局

*   如果单击此选项卡，则以编程方式将文本视图和按钮添加到片段容器

*   将另一个片段添加到片段活动中，在列表片段下方

无论哪种方式，我都很难过，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:16:37.787

创建一个`Fragment`类似于您的布局`FragmentActivity`并添加它。您不能简单地添加`FragmentActivity`as ，`Fragment`因为它不是添加了对旧版本的支持，`Fragment`而是`Activity`添加了`Fragments`对旧版本的支持。

因此，不要将您的按钮`TextViews`直接添加到`FragmentActivity`布局中。使用相同的组件创建一个`Fragment`并将其添加到`Activity`布局中。

如果需要，这种方式可以在应用程序的另一个位置重用这组组件，使用相同的`Fragment`.

# ios - GTMOauth2 iOS 刷新令牌

> ID：15851409
> 
> 赞同：0
> 
> 时间：2013-04-06T13:14:50.053
> 
> 标签：ios, xcode, oauth, token

我从这个例子开始一个演示应用程序

[https://github.com/Christian-Hansen/simple-oauth2](https://github.com/Christian-Hansen/simple-oauth2)

我可以验证 ti google 并取回 AUTH 对象。如果我 NSLog 身份验证对象，我可以看到 access_token、过期日期和代码，但没有刷新令牌。这正常吗？因为一段时间后我无法请求导致我的访问令牌已过期..我还添加了：

-(void)awakeFromNib 方法与 auth.canAuthorize

我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:01:13.777

谢谢@grobbins。关键是我需要在请求中添加这些参数：

```
 viewController.signIn.additionalAuthorizationParameters = 
    [NSDictionary dictionaryWithObjects:[NSArray 
arrayWithObjects:@"offline",@"force", nil] forKeys:[NSArray arrayWithObjects:@"access_type",@"approval_prompt", nil]]; 
```

希望对外面的人有用！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:16:52.003

使用 authenticationWithServiceProvider：登录到 Google 以外的服务时，但对于那些服务，不要使用 Google 的令牌 URL；使用服务提供者的令牌 URL。

登录 Google 时，不要创建 auth 对象；只需调用 GTMOAuth2ViewControllerTouch +controllerWithScope:。如果用户登录成功，回调中包含 auth 对象。

比较示例应用登录 Google 服务和非 Google 服务的方式，以了解不同的方法。

# c# - 在关系表中插入值

> ID：15851410
> 
> 赞同：1
> 
> 时间：2013-04-06T13:14:57.097
> 
> 标签：c#, asp.net

表：

1.  董事会（BID（PK），董事会名称，日期，状态）
2.  介质（MID（PK）、介质名称、日期、状态）
3.  BoardMedium(BMID(PK), BID(FK), MID(FK))

上面是我的表结构。我想从下拉列表中获取董事会名称和媒体名称（已经填写）并插入到 BoardMedium 表中只有 BID 和 MID.user 将根据这两个值提供 Boardname 和 Mediumname 我必须检查它是否在 BoardMedium 表中可用，如果没有，则仅将 BID 和 MID 插入 BoardMedium 表中。任何可以帮助我实现相同的目标。在此先感谢...

# r - 用于交叉制表的重量箱，带有平均值

> ID：15851415
> 
> 赞同：1
> 
> 时间：2013-04-06T13:15:21.437
> 
> 标签：r, weighted

我喜欢加权案例以在 ggplot 中绘制图表。对于每种情况，我都有一个特定的权重因子，例如：

```
value weight
2     0.34
5     0.75
6     2.31 
```

等等...绘制简单的分组条（“交叉表”）很容易，我可以使用 xtabs 函数：

```
ftab <- round(xtabs(weightBy ~ varCount + varGroup),0) 
```

当我想用加权案例绘制直方图、简单条形图或单箱图时，我想保持分布，所以我使用以下函数来加权案例：

```
weightby <- function(var, weight) {
  items <- unique(var)
  newvar <- c()
  for (i in 1:length(items)) {
    newcount = round(sum(weight[which(var==items[i])]))
    newvar <- c(newvar, rep(items[i], newcount))
  }
  return (newvar)
}
if (!is.null(weightBy)) {
  variable <- weightby(variable, weightBy)
} 
```

但是，此功能忽略了原来的案例顺序，“案例”现在根据相关类别升序编号。但是...如果我想绘制分组箱线图，我需要 a) 具有加权计数的加权变量 b) 具有加权组的加权变量 c) 每个组内的加权平均值、中位数和分位数

我该怎么做？我有正确的加权交叉表，但每个子组没有加权平均值，因为我不能使用上面显示的函数来创建表格（因为丢失了正确的案例顺序）。

任何提示都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:55:06.823

非常不清楚你在这里问什么。但是问题底部的评论表明您想从加权数据中计算平均值和中值。最简单的方法是通过调查包。您需要使用 svydesign 创建一个调查设计对象 - 您可以忽略所有分层和聚类信息，只包含权重 - 然后使用 svyby() 或 svyquantile() 等函数来计算您需要的任何内容。

如果问题只是关于 ggplot2()，你可能可以通过使用 weight= 美学来解决，除非它没有做我认为它做的事情。

# css - Ajax 加载程序无法正常工作

> ID：15851416
> 
> 赞同：2
> 
> 时间：2013-04-06T13:15:24.627
> 
> 标签：css, jquery, jquery-mobile

我正在尝试使用 jquery-mobile 微调器，但它似乎不起作用

从官方文档（[http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html](http://jquerymobile.com/demos/1.2.0/docs/pages/loader.html)）中，我尝试在 chrome 控制台中运行它并且它可以工作

```
$.mobile.loading( 'show', {
    text: 'foo',
    textVisible: true,
    theme: 'z',
    html:  "<i class='icon-spinner icon-4x'></i>"
}); 
```

但如果我尝试从 application.html.haml 或控制台运行它，似乎不起作用

```
$( document ).bind( 'mobileinit', function(){
  $.mobile.loader.prototype.options.text = "loading";
  $.mobile.loader.prototype.options.textVisible = false;
  $.mobile.loader.prototype.options.theme = "a";
  $.mobile.loader.prototype.options.html = "<i class='icon-spinner icon-4x'></i>";
}); 
```

它显示一个阴影而不是我的微调器：-？.

我在这里想念什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:50:22.273

**解决方案**：

工作 jsFiddle：http: [//jsfiddle.net/Gajotres/vdgB5/](http://jsfiddle.net/Gajotres/vdgB5/)

`Mobileinit`事件必须在 jQuery Mobile 初始化之前和 jQuery 之后初始化。还必须对 css 进行一些额外的更改才能使其正常工作。

首先，我们需要覆盖默认`ui-loader-default`类，因为它的不透明度很低，而且最终的微调器很难看到。随心所欲地更改不透明度值。

```
.ui-loader-default {
    opacity: 1 !important;      
} 
```

这是我们的微调器。因为您使用的是我们需要使用的自定义 i 标签`display: block`，所以没有它，微调器将被隐藏。

```
.custom-spinner {
    width: 37px !important;
    height: 37px !important;
    background-image:url('http://pictures.reuters.com/ClientFiles/RTR/Images/ajax-loader.gif');
    display: block;
} 
```

这是一个工作示例：

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQM Complex Demo</title>
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <style>

            .ui-loader-default {
                opacity: 1 !important;      
            }

            .custom-spinner {
                width: 37px !important;
                height: 37px !important;
                background-image:url('http://pictures.reuters.com/ClientFiles/RTR/Images/ajax-loader.gif');
                opacity: 1 !important;
                display: block;
            }
        </style>
        <script type="text/javascript" src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>
        <script>
            $( document ).bind( 'mobileinit', function(){
                $.mobile.loader.prototype.options.text = "loading";
                $.mobile.loader.prototype.options.textVisible = false;
                $.mobile.loader.prototype.options.theme = "a";
                $.mobile.loader.prototype.options.html = "<i class='custom-spinner'></i>";
            }); 
        </script>       
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
        <script>
            $(document).on('pageshow', '#index', function(){        
                $.mobile.loading( 'show');          
            }); 
        </script>
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-theme="a" data-role="header">
                <h3>
                    First Page
                </h3>
                <a href="#second" class="ui-btn-right">Next</a>
            </div>

            <div data-role="content">

            </div>

            <div data-theme="a" data-role="footer" data-position="fixed">

            </div>
        </div> 
    </body>
</html> 
```

# c# - 如何使用 LINQ 过滤以各种子字符串开头的字符串？

> ID：15851417
> 
> 赞同：3
> 
> 时间：2013-04-06T13:15:29.740
> 
> 标签：c#, .net, linq

假设我有`var lines = IEnumerable<string>`, 并`lines`包含各种行，其前 1..n 个字符将它们排除在进程之外。例如，以“*”、“Eg”、“Sample”等开头的行。

排除标记列表是可变的，并且仅在运行时才知道，因此

```
lines.Where(l => !l.StartsWith("*") && !l.StartsWith("E.g.") && ... 
```

变得有些问题。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T13:21:07.397

使用 LINQ：

```
 List<string> exceptions = new List<string>() { "AA", "EE" };

 List<string> lines = new List<string>() { "Hello", "AAHello", "BHello", "EEHello" };

 var result = lines.Where(x => !exceptions.Any(e => x.StartsWith(e))).ToList();
 // Returns only "Hello", "BHello" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:21:15.463

试试这个：

```
List<string> lines = new List<string>();    //add some values
List<string> exclusion=new List<string>();  //add some values

var result = lines.Except(exclusion, new MyComparer()); 
```

在哪里：

```
public class MyComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y) { return x.StartsWith(y); }

    public int GetHashCode(string obj) { //some code }
} 
```

# jquery - 使用 ul li 生成 Jquery 多级菜单列表

> ID：15851418
> 
> 赞同：3
> 
> 时间：2013-04-06T13:15:35.390
> 
> 标签：jquery, html-lists, multi-level

```
...images
......|vertical
......|horizontal
...Jquery
......|UI
......|include
...quickfox 
```

**要处理的数组：** 我有类似上面的文件夹结构。它存储在数组目录中。见下文

```
var dirs = [ 
        "images",
        "images/vertical",
        "images/horizontal",
        "Jquery",
        "Jquery/UI",
        "Jquery/include",
        "quickfox"
        ]; 
```

**目标：**如何制作嵌套的 ul li，如下所示。

```
<ul id="categorymenu">
    <li>images </li>
    <ul>
        <li>vertical</li>
        <li>horizontal</li>
    </ul>
    <li>Jquery</li>
    <ul>
        <li>UI</li>
        <li>include</li>
    </ul>
    <li>quickfox</li>
</ul> 
```

**更新：XML 结构**

```
<directory name="images">
   <file path="BBB.gif" width="500" height="282">BBB.gif</file>
   <file path="AAA.jpg" width="964" height="525">AAA.jpg</file>
   <directory name="images/vertical">
      <file path="CCC.jpg" width="964" height="525">CCC.jpg</file>
   </directory>
   <directory name="images/horizontal">
      <file path="DDD.jpg" width="964" height="525">DDD.jpg</file>      
   </directory>
</directory> 
```

这是我从 xml 制作数组的地方。

```
$(document).ready(function () {
    //------ READ XML -----------
    $.ajax({
        type: "GET",
        url: "___deck.xml",
        dataType: "xml",
        success: function (data) {
            my_xml = data;
            xmlDirParser(my_xml);
        }
    });
    //------ Get Files on List Change  -----------
    $("#dirlist").change(function () {
        var folder = $(this).find('option:selected').text();
        xmlFileParser(folder, my_xml);
    });
});

function xmlDirParser(my_xml) {
    $(my_xml).find('directory').each(function () {
        var dirname = $(this).attr('name');
        // $('#dirlist').append('<option value="1">'+dirname+'</option>');
        //This is where I get dirs array
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:37:50.523

数组的结构对于创建元素没有用，您可以基于数组创建一个对象并改用该对象。

```
var o = {}; 

// Creating an object based on the array elements
$.each(dirs, function (_, value) {
    if (value.indexOf('/') === -1) {
        o[value] = [];
    } else {
        var arr = value.split('/');
        o[arr[0]].push(arr[1]);
    }
});

// Creating elements

var html = '<ul id="categorymenu">';
for (key in o) {
    html += '<li>' + key + '</li>';
    if (o[key].length) {
        html += '<ul><li>' + o[key].join('</li><li>') + '</li></ul>';
    }
}
html += '</ul>'; 
```

[http://jsfiddle.net/5DuDp/](http://jsfiddle.net/5DuDp/)

**更新**：

我没有注意到预期的标记是无效的，一个`ul`元素应该只有`li`子元素，你应该将后代`ul`元素添加到`li`元素中：

```
for (key in o) {
    html += '<li>' + key ;
    if (o[key].length) {
        html += '<ul><li>' + o[key].join('</li><li>') + '</li></ul>';
    }
    html += '</li>';
}
html += '</ul>'; 
```

[http://jsfiddle.net/642pr/](http://jsfiddle.net/642pr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:42:41.553

**原始答案**

如果将数据结构更改为多维数组/对象，则可以使用递归函数循环遍历无限嵌套级别，如下所示：

```
var dirs = [{
    name: "images",
    subdir: [{
        name: "vertical"
    }, {
        name: "horizontal"
    }]
}, {
    name: "Jquery",
    subdir: [{
        name: "UI", subdir: [{name:'Nested 1',subdir: [{name:'Nested 2',subdir: [{name:'Nested 3'}]}]}]
    }, {
        name: "include"
    }]
}, {
    name: "quickfox"
}];

function createList( array){
    var html='<ul>';
    $.each( array, function(k, item){
        html+='<li>'+item.name;
        if( item.subdir){
            html+=createList(item.subdir);
        }
        html+='</li>';
    });
     html+='</ul>';
    return html;
}

$('body').html( createList( dirs)) 
```

演示：http: [//jsfiddle.net/AA6yb/1](http://jsfiddle.net/AA6yb/1)

**修改后的答案**

根据 xml 已经嵌套的更新信息，问题是如何解析 xml 而不是平面数组。

以下递归循环遍历 xml 中的所有目录`children`。通过使用`find()`您创建了一个平面数组，因为它会`find()`查找所有后代

```
function createList($xml) {
    var html = '';

    $xml.children('directory').each(function () {
        var $dir = $(this);
        var name= $dir.attr('name');
        html += '<li class="dir">' + parseName($dir.attr('name'));
        if ($dir.children().length) {
            html += '<ul>';
            $dir.children('file').each(function () {
                html += '<li class="file">' + $(this).attr('path') + '</li>';
            });
            /* recursively loop through children directories of this directory*/
            if( $dir.children('directory').length){
                html+=createList($dir);
            }
            html += '</ul>';
        }
    });
    html += '</li>';
    return html;
}
function parseName( name){
    if( name.indexOf('/')>-1){
        return name.split('/').pop();
    }else{
        return name;
    }
}

$('#directory_list').html(createList($(xmlData))) 
```

HTML

```
<ul id="directory_list"></ul> 
```

演示：http: [//jsfiddle.net/AA6yb/2/](http://jsfiddle.net/AA6yb/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:47:14.600

如果你必须有这个数据结构，你可以使用这个：

```
$(function () {
    var dirs = [
        "images",
        "images/vertical",
        "images/horizontal",
        "Jquery",
        "Jquery/UI",
        "Jquery/include",
        "quickfox"];

    var rootList = $("<ul id='categorymenu'>").appendTo("body");
    var elements = {};

    $.each(dirs, function () {
        var parent = elements[this.substr(0, this.lastIndexOf("/"))];
        var list = parent ? parent.next("ul") : rootList;
        var textMenu= parent ? this.split("/")[1] : this;
        if (!list.length) {
            list = $("<ul>").insertAfter(parent);
        }
        var item = $("<li>").appendTo(list);
        $("<a>").text(textMenu).appendTo(item);
        elements[this] = item;
    });
}); 
```

这是一个小提琴：http: [//jsfiddle.net/K8SZk/3/](http://jsfiddle.net/K8SZk/3/)

# html - Safari 6 - 影响整个表单的自动完成

> ID：15851421
> 
> 赞同：6
> 
> 时间：2013-04-06T13:16:08.407
> 
> 标签：html, safari

在密码输入上使用 autocomplete="off" 会对整个表单产生这种影响，而不仅仅是密码字段。

在 Safari 5 中情况并非如此。

即使在不工作的情况下将 autocomplete="on" 添加到其他字段。

```
<form name="login" method="post" action="login.html" >
E-mail<br/>
<input name="email" type="text" ><br/>
Password<br/>
<input name="password" type="password" autocomplete="off" >
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T11:03:35.640

尝试在 Safari 5.1.7 上复制相同的内容。

我已将表单的自动完成设置为“打开”，并且没有对密码字段进行任何添加（未明确设置密码字段的自动完成“关闭”）。密码字段不显示自动完成的建议，而其他字段工作正常并显示自动完成的建议。

如果您需要更多解释，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T10:09:47.637

尝试在密码输入标签的末尾添加“/”

```
 <input name="password" type="password" autocomplete="off"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T16:40:09.850

跟进我的评论：

您是否在禁用密码时在表单级别明确设置了 autocomplete="on" ？（来自[w3schools.com：http://www.w3schools.com/tags/att_input_autocomplete.asp](http://www.w3schools.com/tags/att_input_autocomplete.asp)）

```
<form name="login" method="post" action="login.html" autocomplete="on">
    E-mail<br/>
    <input name="email" type="text" ><br/>
    Password<br/>
    <input name="password" type="password" autocomplete="off" >
</form> 
```

还要确认它不是浏览器存储的用户名作为自动填充的密码？（即“您希望 Safari 记住这些凭据吗？” - 不是 Safari 的大用户，所以不确定它如何提示/管理凭据存储。

# highcharts - highstock - 控制工具提示出现的时间

> ID：15851423
> 
> 赞同：0
> 
> 时间：2013-04-06T13:16:31.303
> 
> 标签：highcharts, highstock

默认情况下，只要光标进入图表，工具提示就会出现。我想控制它何时以两种方式之一首次出现：

1.  等待用户将鼠标悬停在图表上的数据点上（周围）。这样，用户可以查看整个图表，而不会分散工具提示的注意力。

2.  mousedown - 有没有办法禁用默认的 mousedown 功能并使用它来显示工具提示？而且因为工具提示和十字准线似乎是连接在一起的，也许相同的 mousedown 事件会触发十字准线出现？

2号最好；任何建议/解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:17:10.400

2 号可以通过以下方式实现：

1.  禁用默认的 Highcharts 工具提示
2.  创建`point.click`事件处理程序
3.  在上面的处理程序中，创建自己的工具提示（它是带有一些 CSS 的简单 div）
4.  为工具提示设置适当的位置（通过`this.point.plotX`和访问`this.point.plotY`

# wordpress - TinyMCE 可视化编辑器超链接按钮在 WordPress 3.5 中不起作用

> ID：15851427
> 
> 赞同：3
> 
> 时间：2013-04-06T13:16:59.940
> 
> 标签：wordpress, hyperlink, tinymce

当我在可视化编辑器中单击插入超链接按钮时，它实际上什么都不做。我在 IE 中运行控制台以查看我在下面列出的任何错误...

```
SCRIPT438: Object doesn't support property or method 'wpdialog'

editor_plugin.js?ver=358-23224, line 1 character 471 
```

有谁知道这是为什么以及如何解决？

任何帮助最受赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:04:54.103

我发现这个[WordPress 论坛帖子](http://wordpress.org/support/topic/wp-31-problem-insertedit-link-button?replies=30)似乎可以解决您遇到的类似问题。

其中很少有建议的解决方案，因此您可能会发现它很有用。

您可以检查的另一件事是 jQuery 是否被引用了两次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-26T19:19:14.633

为了使链接正常工作，请在 TinyMCE 中加载的插件列表中包含“wordpress”。例如在设置或 tinymce.init({...}) 初始化对象中，您将添加： plugins : "paste wplink media wordpress"

每当您选择一些文本然后单击链接图标时，都会打开一个小弹出窗口，让您在文本框中输入 URL。

# php - PHP：Preg_match_all 转义圆括号

> ID：15851428
> 
> 赞同：1
> 
> 时间：2013-04-06T13:17:00.433
> 
> 标签：php, preg-match

我有这样的动态字符串：

```
$string1 = '<a style="background-image: url(&quot;http://someurl.com/image.jpg&quot;);" class="thumb" title="title goes here" href="http://www.someurl.com/"></a>'; 
```

我的 preg_match_all 代码：

```
preg_match('/<a style="background-image: url((.*?));" class="thumb" title="(.*?)" href="(.*?)"><\/a>/', $string1, $matches);

echo $matches['1'];
echo $matches['2'];
echo $matches['3']; 
```

url() 括号不起作用，知道如何逃脱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:21:21.707

你需要逃避`(`, ：`)``\`

```
preg_match('/<a style="background-image: url\((.*?)\);" class="thumb" title="(.*?)" href=" (.*?)"><\/a>/', $string1, $matches); 
```

作为一般规则，使用正则表达式解析 HTML 页面不是可行的方法。请参阅[Parsing Html The Cthulhu Way](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。这里有很多关于 SO 的示例以获得更好的解决方案。

# linux - linux内核的最大中断频率是Hz、kHz、MHz还是GHz？

> ID：15851430
> 
> 赞同：4
> 
> 时间：2013-04-06T13:17:07.940
> 
> 标签：linux, linux-kernel, interrupt

在我开始之前：是的，我知道答案是[依赖于架构](https://stackoverflow.com/questions/12658263/how-quick-can-the-processor-handle-the-interrupts)的——我只是对一个大概的数字感兴趣，就数量级而言。

linux内核对中断频率有上限吗？

背景：我想与 Linux 中的相机模块进行交互。该模块有一个时钟并行数据输出（8 位，约 650kHz），我想从中读取数据并将其存储在缓冲区中，以便通过例如 /dev/camera 进行访问。

我编写了一个基本驱动程序，它正在监视适当的中断线。如果我将一根电线挂在中断引脚上，我会因白噪声而中断。但是，如果我连接更高频率的信号（来自 555 定时器的 atm ~250kHz），则不会触发中断。（我已经通过 /proc/interrupts 确认了这一点）

我的想法是，这可能是由于处理器上的 GPIO 模块无法处理如此高的频率（这很愚蠢 - 这不是特别高），也可能是内核问题。人们怎么想？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:48:16.360

这样看。现代 CPU 每秒执行大约 10 ⁹条指令。

为了处理中断，您需要执行大约 100-1000 条指令（保存上下文、执行 I/O、中断处理结束信号、恢复上下文）。这会给你大约每秒 10 ⁶ - 10 ⁷次中断。

如果您将所有时间都花在处理中断上，那么系统和程序的其余部分将一无所获。

因此，考虑大约 10 ⁵次中断/秒 (100 KHz) 是最大实际中断率。

电路可能还有其他限制，我对这方面不太熟悉。但是内核不太可能以某种方式明确限制中断率。我认为没有充分的理由，我认为这也不是一件容易做到的事情。

现在，像 DMA 这样的东西可以让你在输入/输出数据的每个字节上都没有中断，而是在几千字节甚至兆字节的缓冲区上。例如，您准备数据以在内存缓冲区中输出，并告诉 DMA 控制器它现在可以将其从缓冲区中发送出去。完成后，它将触发一个中断信号传输完成，您将能够启动另一个。它在另一个传输方向上的工作方式相同。当整个缓冲区填满输入数据时，您会收到一个中断。

如果您只能以较低的速率接收中断，我认为您可能会面临硬件限制。

# arrays - onSync 事件及其属性

> ID：15851433
> 
> 赞同：0
> 
> 时间：2013-04-06T13:17:27.183
> 
> 标签：arrays, actionscript-3, methods

您好 Stackoverflow 的人们，我正在使用 Adob​​e Media Server 的持久 SharedObject 来为多个客户端实时存储和共享日期。我正在使用 SyncEvent 来调度任何已更新的事件。通读文档，SyncEvent 包含许多属性。我想要实现的是使用远程共享对象来存储在线人员列表，当一个客户端断开连接时，列出的所有其他客户端将更新断开连接。遗憾的是，Adobe 文档没有提供任何示例如何执行此操作。最好的方法是创建一个包含所有成员属性的 changeList 数组，然后执行一个循环吗？或者任何人都可以建议任何其他方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:06:45.390

事件的 changelist 属性仅包含已更改的属性。因此，如果您的共享对象包含 id 列表，您应该能够获得您所取得的成果。

请注意，通知是针对存储在共享对象中的顶级属性完成的。所以，你想要的可能看起来像：

```
idSo.setProperty("1", true); 
```

添加时。要删除用户，您应该使用：

```
idSo.setProperty("1", null); 
```

重申，有

```
idSo.setProperty("ids", <array of ids>) 
```

更新时会发送整个数组。所以，这将是一个不好的方法

此同步事件将发送到所有连接的共享对象。

# javascript - Box2D web 动态实体不相互交互

> ID：15851447
> 
> 赞同：2
> 
> 时间：2013-04-06T13:19:02.750
> 
> 标签：javascript, box2d

![在此处输入图像描述](https://i.stack.imgur.com/0ipKB.png)我有一个很难解决的问题：

在图像中，您可以看到我的场景的调试视图。这两个活跃的动态物体并没有相互推开！我没有在场景中设置任何碰撞位，所以一切都应该正常地相互碰撞......

当动态物体撞击静态物体时不会出现此问题。以前有没有人遇到过这个问题，我不知道我做错了什么设置让动态物体像这样互相忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:31:46.283

好的，我想我找到了问题...我在每一帧都使用 b2Body.GetPosition() 来更新与身体相关的图像。并且因为在 JS 中每个对象都作为参考传递，所以当缩放回像素时，我覆盖了 Box2Ds 的位置！

# php - $.post() 没有按预期工作 jQuery

> ID：15851450
> 
> 赞同：1
> 
> 时间：2013-04-06T13:19:16.113
> 
> 标签：php, jquery, post, html-lists

这是我在 in 之前添加 a的`<li>`代码。`<li>``<ul>`

```
$.post("page.php", data,function(data,success)
{
        var s=data.split("|");
        var sl=s.length-1;
        for(var i=0;i<sl;i++)
        {
            var sep='<li class="atItem" id="atItem'+i+'">'+s[i]+'</li>';
            $('ul.pageCont').children('li#atItemLast').before(sep);
        }
}); 
```

**Page.php 返回：** `name|` on`echo $name`

但我的问题是两个`<li>`被添加到`<ul>`. 我在做什么错？

我检查了`sl`它的值 alerts `1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:27:57.227

似乎没有理由为了获得第一个值而迭代数组，只需使用`[0]`?

```
$.post("page.php", data, function(data) {
    var s   = data.split("|")[0], // first instance
        sep = $('<li />', {'class':'atItem0', id:'s0'});

    $('#atItemLast').before(sep);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:47:18.873

原因“名称|” 拆分为“名称”和“”（空字符串）

见下文。

```
var str = "name|";
var arr = str.split("|");

console.log(arr.length); // 2
console.log(arr[0]); // "name"
console.log(arr[1]); // "" 
```

# c# - 通过参数计数动态获取泛型 Action<> 类型的更优雅的方法？

> ID：15851452
> 
> 赞同：8
> 
> 时间：2013-04-06T13:19:18.847
> 
> 标签：c#, reflection

目前我正在这样做（//编辑：这完全是愚蠢的，因为有一个数组以与我昨天做我的字典相同的方式对其项目进行编号）：

```
 Dictionary<int, Type> genericMap = new Dictionary<int, Type>
        {
            { 0, typeof(Action) },
            { 1, typeof(Action<>) },
            { 2, typeof(Action<,>) },
            { 3, typeof(Action<,,>) },
            { 4, typeof(Action<,,,>) },
            { 5, typeof(Action<,,,,>) },
            { 6, typeof(Action<,,,,,>) },
            { 7, typeof(Action<,,,,,,>) },
            { 8, typeof(Action<,,,,,,,>) },
        }; 
```

还有别的地方...

```
var parms = meth.GetParameters();
dType = genericMap[parms.Length].MakeGenericType(parms.Select(p => p.ParameterType).ToArray()); 
```

其中 meth 是 MethodInfo。

有没有更优雅的方法来做到这一点？或者我是否必须定义这样的映射才能动态获取与参数计数相对应的正确 Action<> 类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T13:31:55.263

**编辑**：

顺便说一句，你知道[`Expression.GetActionType`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.getactiontype.aspx)吗？

> 创建一个表示具有特定类型参数的泛型 System.Action 委托类型的 Type 对象。

使用该方法，您可以执行以下操作：

```
dType = Expression.GetActionType( parms.Select(p => p.ParameterType).ToArray() ); 
```

* * *

其他方法：

```
var parms = meth.GetParameters();

int numArgs = parms.Length;

if(numArgs == 0)
{
    dType = typeof(Action);
}    
else 
{
   var rawType = Type.GetType("System.Action`" + numArgs);
   dType = rawType.MakeGenericType(parms.Select(p => p.ParameterType).ToArray());
} 
```

但是你的方法真的没有错。在反思方面，尽可能明确通常是更好的选择。

此外，这是构建地图的另一种奇特方式：

```
typeof(Action).Assembly
              .GetExportedTypes()
              .Where(type => type.FullName.StartsWith("System.Action") 
                                  && type.IsSubclassOf(typeof(Delegate)))
              .ToDictionary(type => type.GetGenericArguments().Length) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:58:34.370

您可以使用数组而不是字典，它实际上从 0 到 8 编号，只需使用类型数组并使用索引访问它们。

# javascript - 发送到 Outlook 时 Javascript 换行不起作用

> ID：15851461
> 
> 赞同：0
> 
> 时间：2013-04-06T13:20:26.787
> 
> 标签：javascript

我有这个小问题。我的 html 页面中有这个 javascript：

```
function myfunction(form)
            {
                var name = document.details.txtName.value + "\n";
                var street = document.details.txtStreet.value + "\n";
                var city = document.details.txtCity.value + "\n";
                var stateProvince = document.details.txtStateProvince.value + "\n";
                var postalCode = document.details.txtPostalCode.value + "\n";
                var country = document.details.txtCountry.value + "\n";
                var homeTel = document.details.txtHomeTel.value + "\n";
                var workTel = document.details.txtWorkTel.value + "\n";
                var fax = document.details.txtFax.value + "\n";
                var mobile = document.details.txtMobile.value + "\n";
                var email = document.details.txtEmail.value + "\n";
                var enquiry = document.details.txtEnquiry.value + "\n";

                var message = (name +
                               street + 
                               city + 
                               stateProvince + 
                               postalCode + 
                               country + 
                               homeTel + 
                               workTel + 
                               fax + 
                               mobile + 
                               email +
                               enquiry);
                alert(message);
                location='mailto:somecrazyassemail@gmail.com?subject=Message From Redec Website&body=' + message;
                return false; //So that the page can stay at its current location. 
```

在弹出的消息框中，它显示了我想要的字符串。

但是当这打开前景时，一切都是一长串。我怎样才能解决这个问题？}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:36:42.160

mailto 是特殊属性。您必须使用`escape`函数对字符串进行编码。

但是对于新行，您可以使用**%0D%0A**。
有关更多信息，请参阅[此站点](http://www.webreference.com/js/tips/001023.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:21:50.103

您将文本作为 HTML 插入，因此换行符`'\n'`被简单地解析为`'n'`. 要插入换行符，请使用相应的 HTML 元素`<br>`。

例如：

```
var name = document.details.txtName.value + "<br>";
//                                           ^^^^ 
```

# objective-c - 移动通用 UIView 的顶点

> ID：15851468
> 
> 赞同：1
> 
> 时间：2013-04-06T13:21:10.283
> 
> 标签：objective-c

有没有办法像图像一样移动 UIView 的顶点？
![图像一](https://i.stack.imgur.com/g8Xhu.png)
![图像二](https://i.stack.imgur.com/8zvBV.png)

*作为一个非英语本地人，我真的不知道这些点的名称，所以我使用这个词`external point`，但如果你建议真实姓名，我肯定会编辑它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:11:12.663

如果您正在尝试创建 3D 效果，您可以将 3D 变换应用到`CALayer`如下`UIView`所示：

```
CATransform3D   perspectiveMtx = CATransform3DIdentity;
perspectiveMtx.m34 = -1.0f / 100.0f;
CATransform3D   rotMtx = CATransform3DRotate(perspectiveMtx, angle, 1.0f, 0.0f, 0.0f);
someView.layer.transform = rotMtx; 
```

您也许可以使用 3D 变换来模拟您想要的变形，但如果您真的想要纯 2D 变形，那么您可能必须直接使用 OpenGL 来指定自定义顶点位置。

# dicom - 我怎么知道标签在 DICOM 中的具体含义？

> ID：15851478
> 
> 赞同：0
> 
> 时间：2013-04-06T13:22:38.950
> 
> 标签：dicom, medical

我在 dicom 上做一个项目，发现 DICOM 标准文档（[http://medical.nema.org/standard.html](http://medical.nema.org/standard.html)）对程序员来说真的是一团糟。例如当我遇到一个 Tag(0008, 0060) ，我查看了 11_03pu.pdf（[http://medical.nema.org/Dicom/2011/11_03pu.pdf](http://medical.nema.org/Dicom/2011/11_03pu.pdf)）。据说它是一种具有某种价值的模态（GM，SM）。我在哪里可以找到关于标签和值 (GM, SM ...) 的更具体的含义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:49:19.710

第 3 部分的索引包含从标签到页面的映射。在那里，您可以找到对您的标签的任何引用。查看引用的页面将向您展示标签的使用方式，在什么情况下它意味着什么等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T15:43:50.097

好吧，dicom 标准是你的朋友。但通常情况下，任何 dicom 解析器都包含一个将标签键（两个短数字）映射到标签名称和类型的字典。如果没有这样的字典，就不可能解析隐式编码的 dicom 数据。

您可以查看的另一件事是 dicom 模块（也在标准中定义）。模块是按某种全局意义（例如患者数据、研究数据、设备、图像）组装的标签组。然后您知道，例如，对于 CR 图像，必须将患者、研究、系列、曝光、图像平面等模块放在一起，以获得有效的数据集。

在阅读 dicom 标准之前，我会向您推荐[《医学中的数字成像和通信》](https://rads.stackoverflow.com/amzn/click/com/3642108490)一书，这将减轻您的痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T11:23:47.577

您还可以在[标签信息中找到有关 Dicom PS 3 的更多信息](http://www.dicomtags.com/iods/search)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T17:43:20.890

DICOM 标签列表位于 DICOM 标准 PS 3.6 的第 6 章或第 6 部分。此列表包括标签值的 DICOM 元素名称、标签编号、值表示 (VR) 和值多重性 (VM)。此外，标签值编码规则位于 PS 3.5 的第 6 节或第 5 部分下。参见表 6.2-1。[您可以从http://medical.nema.org/standard.html](http://medical.nema.org/standard.html)下载 DICOM 标准

# macos - 从另一个 Cocoa 进程在 Lion/ML 上打开 OS X 应用程序而不恢复窗口

> ID：15851481
> 
> 赞同：1
> 
> 时间：2013-04-06T13:23:10.753
> 
> 标签：macos, cocoa

我希望在 Cocoa 应用程序中复制“open”命令的“--fresh”选项的行为。此选项“以全新方式启动应用程序，即不恢复窗口”。

我已经创建了一个启动 Xcode 的示例应用程序，但还没有弄清楚哪个 API 公开了这个控件。

```
NSURL *executableURL = [[NSWorkspace sharedWorkspace] URLForApplicationWithBundleIdentifier:@"com.apple.dt.Xcode"];
NSError *error = nil;
[[NSWorkspace sharedWorkspace] launchApplicationAtURL:executableURL
                                              options:NSWorkspaceLaunchDefault
                                        configuration:nil
                                                error:&error];
if (error) {
    NSLog(@"Error launching Xcode: %@", error);
} 
```

查看 NSWorkspaceLaunchOptions 列表，我没有看到任何暗示影响状态恢复的内容。只有几个配置选项可用，例如传递参数、修改环境或将 Apple 事件传递给启动的应用程序。

可以使用 Apple 事件阻止状态恢复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:02:36.823

应用程序状态存储在 ~/Library/Saved Application State 中。Xcodes 状态位于名为 com.apple.dt.Xcode.savedState 的子文件夹中。一种选择是在启动之前重命名此文件夹，然后将其重命名。通过争论可能是更好的方法，但我认为没有普遍的论据。

# java - HtmlUnit获取页面源码实现显示异常

> ID：15851484
> 
> 赞同：0
> 
> 时间：2013-04-06T13:23:24.230
> 
> 标签：java, html, exception, selenium-webdriver, htmlunit

我尝试从 URL 获取动态页面。我在 Java 中工作。我已经使用 Selenium 完成了这项工作，但这需要很多时间。因为调用 Selenium 的驱动程序需要时间。这就是我转向 HtmlUnit 的原因，因为它是无 GUI 浏览器。但是我的 HtmlUnit 实现显示了一些异常。

**问题**：-

1.  如何更正我的 HtmlUnit 实现。
2.  Selenium 生成的页面是否与 HtmlUnit 生成的页面相似？[ 两者都是动态的吗？]

我的硒代码是：-

```
 public static void main(String[] args) throws IOException {

 // Selenium
 WebDriver driver = new FirefoxDriver();
 driver.get("ANY URL HERE");  
 String html_content = driver.getPageSource();
 driver.close();

 // Jsoup makes DOM here by parsing HTML content
 Document doc = Jsoup.parse(html_content);

 // OPERATIONS USING DOM TREE 
```

}

**HtmlUnit 代码：-**

```
package XXX.YYY.ZZZ.Template_Matching;

import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import org.junit.Assert;
import org.junit.Test;

public class HtmlUnit {

    public static void main(String[] args) throws Exception {
        //HtmlUnit htmlUnit = new  HtmlUnit();
        //htmlUnit.homePage();
        WebClient webClient = new WebClient();
        HtmlPage currentPage = webClient.getPage("http://www.jabong.com/women/clothing/womens-tops/?source=women-leftnav");
        String textSource = currentPage.asText();
        System.out.println(textSource);
    }
} 
```

**它显示异常**：-

![在此处输入图像描述](https://i.stack.imgur.com/Czd2p.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:30:43.143

> 1：如何纠正我的 HtmlUnit 实施。

查看堆栈跟踪，似乎是说 javascript 引擎执行了一些尝试访问 Javascript“未定义”值的属性的 javascript。如果正确，那将是您正在测试的 javascript 中的错误，而不是 HtmlUnit 代码中的错误。

> 2：Selenium 生成的页面是否与HtmlUnit 生成的页面类似？

那没有意义。Selenium 或 HtmlUnit 都不会“生成”页面。该页面由您正在测试的服务代码生成。

如果您询问 HtmlUnit 是否能够处理嵌入了 Javascript 的代码......堆栈跟踪中有明确的证据表明它正在*尝试*执行 Javascript。

# ios - 重用单元格 UICollectionView - 某些单元格没有被选中

> ID：15851485
> 
> 赞同：3
> 
> 时间：2013-04-06T13:23:26.513
> 
> 标签：ios, objective-c, cocoa-touch, uicollectionview, uicollectionviewcell

在 中`UICollectionView`，我有一个 custom `UICollectionViewCellClass`，其中**prepareForReuse**被默认格式化人员覆盖。

我有一个`NSMutableArray`来自`NSIndexPaths`didSelectItemAtIndexPath **:**的内容。

在**cellForItemAtIndexPath:**我重新格式化选定的单元格，使它们看起来被选中。

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

ButtonCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ButtonCell" forIndexPath:indexPath];

NSString *title = self.ingredientsBook.names[indexPath.item];

cell.label.text = title;

if ([self isSelectedIndexPath:indexPath]){

    cell.backgroundColor = [UIColor whiteColor];
    cell.label.textColor = [UIColor blueColor];
}
return cell;

}

-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{

self.searchButton.enabled = YES;

ButtonCell *cell = (ButtonCell *)[collectionView cellForItemAtIndexPath:indexPath];
[selectedCellIndexPaths addObject:indexPath];
NSLog(@"%@", selectedCellIndexPaths);
cell.backgroundColor = [UIColor whiteColor];
cell.label.textColor = [UIColor blueColor];

NSString *name = self.ingredientsBook.names[indexPath.item];
[self.selectedIngredientNames addObject:name];

} 
```

问题是当我点击第一个单元格时，无法选择第 16 个或第 17 个单元格。或者，如果我点击前三个，则无法选择最后三个。我`didSelectItemAtIndexPath`想没有被称为。

我觉得它必须是非常简单的东西，但我现在看不到它。

我试图理解是否调用了`NSLogs`该`shouldSelectItemAtIndexPath`方法并且根本没有调用该方法。当所选单元格和有问题的单元格之间有 16 个单元格时，就会发生这种情况。

以下是其他数据源方法和 isSelectedIndexPath：

```
-(BOOL)isSelectedIndexPath:(NSIndexPath *)indexPath{

for (NSIndexPath *test in selectedCellIndexPaths){
    if (test == indexPath){
        return YES;
    }
}

return NO;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{

return [self.ingredientsBook.names count];
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{

return 1;
}

-(BOOL)collectionView:(UICollectionView *)collectionView shouldSelectItemAtIndexPath:(NSIndexPath *)indexPath{

NSLog(@"%@", indexPath);

return YES;
}

-(void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath{

self.searchButton.enabled = ([[collectionView indexPathsForSelectedItems] count] > 0);

ButtonCell *cell = (ButtonCell *)[collectionView cellForItemAtIndexPath:indexPath];
cell.backgroundColor = [UIColor blackColor];
cell.label.textColor = [UIColor whiteColor];

[selectedCellIndexPaths removeObject:indexPath];
NSString *name = self.ingredientsBook.names[indexPath.item];
[self.selectedIngredientNames removeObject:name];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T20:25:44.760

我发现了两个问题。prepareForReuse 方法似乎搞砸了，所以我把它删除了。不过，主要问题是您实现 isSelectedIndexPath: 的方式。一旦在您遍历项目时找到第一个选定项目，它就会返回 YES 并退出循环。您想要做的只是检查 indexPath 是否包含在 selectedCellIndexPaths 数组中：

```
-(BOOL)isSelectedIndexPath:(NSIndexPath *)indexPath{

    if ([selectedCellIndexPaths containsObject:indexPath]) {
        return YES;
    }else{
        return NO;
    }
} 
```

或者，如果您更喜欢使用更简洁的语法，可以将 if-else 块替换为：

```
return  ([selectedCellIndexPaths containsObject:indexPath])? YES : NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T15:30:00.820

我最近在我的应用程序中遇到了完全相同的问题。UICollectionViewCell 选择在 iOS 8.3 之前正常工作，随后我开始看到一些奇怪的行为。实际未选择的单元格将显示为已选中，而其他单元格似乎随机无法选择。

我在 UICollectionViewCell 子类上实现了自定义`setSelected`和 方法，如下所示：`prepareForResuse`

```
 -(void)setSelected:(BOOL)selected
{
     [super setSelected:selected];

    if (selected)
    {
        [[self selectedIndicator] setHidden:NO];
    }
    else
    {
        [[self selectedIndicator] setHidden:YES];
    }
}

-(void)prepareForReuse
{
    [[self imageView] setImage:nil];
} 
```

该`prepareForReuse`方法只需重置自定义单元格中的图像视图。

在我的`prepareForReuse`方法中，我没有调用`[super prepareForReuse]`（根据文档，默认情况下它什么都不做）。当我将调用添加到`[super prepareForReuse]`所有选择时，都按预期工作。尽管 Apple 声明默认实现什么都不做，但他们也建议应该调用 super。遵循此建议解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T04:26:42.243

在 iOS 10 中，我发现在启用预取时以编程方式清除启用了多选的 UICollectionView 是错误的。当然，预取在 iOS 10 中是默认开启的。

# html - 使用标签宽度排列表单元素时遇到问题

> ID：15851486
> 
> 赞同：0
> 
> 时间：2013-04-06T13:23:40.940
> 
> 标签：html, css, forms, input, label

我正在尝试使用标签上的固定宽度垂直对齐所有输入元素，但没有得到我期望的结果。

```
 label {
    width: 75px;
    } 
```

这是我用一个例子创建的小提琴：http:

[//jsfiddle.net/xRmHj/](http://jsfiddle.net/xRmHj/)

有 什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:28:32.437

```
label {
   width: 75px;
   display: inline-block;
} 
```

[http://jsfiddle.net/xRmHj/2/](http://jsfiddle.net/xRmHj/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:28:41.217

尝试：

`display:inline-block;`

在你的标签上。

[http://jsfiddle.net/xRmHj/1/](http://jsfiddle.net/xRmHj/1/)

# c# - 将点击事件添加到以编程方式添加的菜单项

> ID：15851489
> 
> 赞同：3
> 
> 时间：2013-04-06T13:23:50.353
> 
> 标签：c#, wpf, menu, menuitem

我正在开发一个 C# WPF 项目，我将一些项目存储在 SQLite 数据库中，当程序加载时，它会从数据库中检索项目并将这些项目添加到菜单中。然后我需要做的是允许用户单击添加的菜单项之一，并根据单击的内容完成某些操作。我找不到有关如何执行此操作的任何内容，以下是有关如何以编程方式将菜单项添加到菜单的代码。

```
StoredDBConnectionManager storedDbConnectionManager = new StoredDBConnectionManager(Properties.Settings.Default.app_dbPassword);
List<string> connections = storedDbConnectionManager.getStoredConnections();

foreach (string connection in connections)
{
      mnuFileDBConnections.Items.Add(connection);
} 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T13:32:55.503

这是一个例子：

XAML：

```
<Menu Height="23" HorizontalAlignment="Left" Name="menu1" VerticalAlignment="Top" Width="200" /> 
```

后面的代码：

```
public MainWindow() {
    InitializeComponent();

    MenuItem item = new MenuItem { Header = "test" };
    item.Click += new RoutedEventHandler(item_Click);
    menu1.Items.Add(item);
}

public void item_Click(Object sender, RoutedEventArgs e) {
    MessageBox.Show("Hello!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:26:55.523

应该有一个`MenuItem`控件可以实例化并`connection`用作它的`Header`or `Content`。

`MenuItem`然后将有一个`Click`针对它的事件处理程序，或者您可以设置命令。

但是，理想情况下，您应该检索`connections`集合，将其设置为您的属性`model`，然后`menu`绑定到该集合，这样只需使用`ItemTemplate`菜单即可。

例如

```
 StoredDBConnectionManager storedDbConnectionManager = new StoredDBConnectionManager(Properties.Settings.Default.app_dbPassword);
        List<string> connections = storedDbConnectionManager.getStoredConnections();

        foreach (string connection in connections)
        {
            var mi = new MenuItem()
            {
                Header = connection,
            };

            mi.Click += ConnectionMenuItemClicked;

            mnuFileDBConnections.Items.Add(mi);
        } 
```

或绑定：

```
 <Menu ItemsSource="{Binding Connections}">
        <Menu.ItemTemplate>
            <DataTemplate>
                <MenuItem Header="{Binding}" Click="ConnectionsMenuItem_Clicked">

                </MenuItem>
            </DataTemplate>
        </Menu.ItemTemplate>
    </Menu> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:34:09.993

```
foreach(string menuCaption from ...)
{
    MenuItem mi=new MenuItem();
    mi.Header = meniCaption;
    mi.Click += (s,e) =>
        {
             ...
        }
} 
```

# ruby-on-rails - 将 Rails 应用程序更新到 Rails 4

> ID：15851490
> 
> 赞同：1
> 
> 时间：2013-04-06T13:23:50.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-4

我有一个 Rails 3 应用程序，我想将它更新到 Rails 4。

目前，这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'sqlite3'
gem 'devise'
gem 'pygments.rb'
gem 'redcarpet'
gem "jquery-rails"
gem 'will_paginate'
gem 'binding_of_caller'
gem 'lazybox'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem "compass-rails"
end

group :development do
  gem "app_reset"
  gem "letter_opener"
end 
```

Rails 4 会升级一些东西吗？该应用程序是一个简单的博客应用程序，允许用户创建帖子并具有用户身份验证。

我想更新它的原因是使用 Turbolinks 和任何其他可能使我受益的酷新功能。

是否像将宝石导轨更改为一样简单`gem 'rails', '4.0.0'`？

如果我错过了任何重要信息，请告诉我，我会编辑这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:44:43.963

该文档不是最终的，仍在进行中，但我建议您先查看：

[http://edgeguides.rubyonrails.org/4_0_release_notes.html](http://edgeguides.rubyonrails.org/4_0_release_notes.html)

它为您概述了从 3.2 到 4.0 的更改，然后阅读：

[http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0](http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0)

它为您提供了升级说明，它比仅更改 gemfile 中的版本要复杂一些。

您还应该检查以确保您使用的 gem 与 Rails 4.0 没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T03:57:16.690

来自 Rails 博客：

> 如果您要将现有应用程序升级到 Rails 4，请查看升级指南或 Railscast 截屏视频。与往常一样，使用`gem install rails --version 4.0.0 --no-ri --no-rdoc`或依赖于`v4.0.0`标签安装最新版本。如果您还没有，那么现在也是升级到 Ruby 2.0 的好时机。Rails 5+ 将需要 Ruby 2.0，因此您不妨先行一步。

提到的资源：[railscast #415 - 升级到 rails 4.0](http://railscasts.com/episodes/415-upgrading-to-rails-4)

官方升级指南：[升级到 Rails 4.0 指南](http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0)

# css - CSS悬停导致不必要的div移动

> ID：15851492
> 
> 赞同：0
> 
> 时间：2013-04-06T13:24:12.707
> 
> 标签：css, hover

在开发[此](http://chrismepham.com/sites/newmjbox/index.php#)网页的过程中，我设法使`#mainWrap`包含顶部导航菜单下方所有内容的 div 发生了一些不必要的移动。当您将鼠标悬停在“类别”链接上并出现子菜单时，它会导致`#mainWrap`div 向下移动几个像素。当您将光标移开时，它会向上移动回其原始位置。

什么可能导致这种转变？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:32:11.737

CSS盒子模型在这里发挥作用，在这个代码块中：

```
 #cssmenu ul li.has-sub:hover > a {
  background: #3f3f3f;
  border-color: #3f3f3f;
  padding-bottom: 13px;
  padding-top: 13px;
  top: -1px;
  z-index: 999;
  } 
```

悬停`13px top-bottom margin`增加了高度，如果您删除填充，则它不会移动。尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:33:50.173

将高度更改`header`为`height: 167px;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:50:42.990

首先我会修复类别悬停事件，从那里开始......

# cssmenu ul li.has-sub:hover > a

删除这个“顶部：1px；”

如果你必须向上移动它

# php - 如何创建一个提交带有参数的表单的方法

> ID：15851495
> 
> 赞同：0
> 
> 时间：2013-04-06T13:24:21.750
> 
> 标签：php, symfony

我有一个[页面](http://nbp.pl/home.aspx?c=/ascx/archa.ascx) 在这个页面上是带有两个选择年份和月份的表格。我想创造类似的东西

```
getTable($year, $month)
{
} 
```

执行此方法后，它可以访问特定的表。如果我在方法中选择 2013 和 kwiecien，那么我会得到带有表格的指定页面。我不知道如何使用代码将数据发送到表单，我用的是什么？我使用 Symfony2

编辑：解决方案

```
 $urltopost = "http://nbp.pl/transfer.aspx?c=
   /ascx/listaabch.ascx&Typ=a&p=rok;mies&navid=archa";
            $datatopost = array (
            "mies" => "05",
            "rok" => "12"                
            );

            $ch = curl_init ($urltopost);
            curl_setopt ($ch, CURLOPT_POST, true);
            curl_setopt ($ch, CURLOPT_POSTFIELDS, $datatopost);
            curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
            $returndata = curl_exec ($ch);
            curl_close($ch);
            // var_dump($returndata);
            print_r($returndata); 
```

解决了我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:06:45.753

让我假设您的网站是基于 PHP 语言..

假设您的网络域是“www.example.com”，我们需要使用 GET 过程“/home.php?year=2013”​​或“/home.php?year=2013&month=12”通过

让我们初始化**home.php**，其中**year**等于**2013**，**month=12**是 12 月

**在您的 php 代码中：**

```
<?php
    function getTable($year,$month)
    {
        //Initializing global var
        $year = 0;
        $month = 0;
        $result = "";
        //check if GET process "year" is set, and must not empty
        if(isset($year) && $year != "")
        {
            //anti sql injection, and passing $_GET process to variables
            $year = mysql_real_escape_string($year);
            $result = mysql_query("SELECT * FROM data WHERE year=$year & month=$month") or die(mysql_error());

            //check if GET process "month" is set as well, and must not empty
            if(isset($month) && $month != "")
            {
                //anti sql injection, and passing $_GET process to variables
                $month = mysql_real_escape_string($month);
                $result = mysql_query("SELECT * FROM data WHERE year=$year") or die(mysql_error());
            }
        }

        //check if $result doesnt have an error,security purposes
        if($result) {
            //loop the datas
            while($row = mysql_fetch_array($result))
            {
                if($month == 0) {
                    echo $row['year'];
                }else {
                    echo $row['year']." ".$row['month'];
                }
            }
        }
    }

    getTable($_GET['year'], $_GET['month']);
?> 
```

这只是一个示例，它取决于您如何使用它...选择语句只是示例，需要更改...没有您需要的任何示例，您必须在需要之前更改**getTable 函数**.. .

# mysql - 将文本文件加载到数据库中合并重复项

> ID：15851497
> 
> 赞同：1
> 
> 时间：2013-04-06T13:24:24.597
> 
> 标签：mysql, load, duplicates, sum, text-files

我有一个 MySQL 表和大型文本文件，其中的值由制表符分隔。此文件可能包含重复项。这是一个例子：

```
foo \t 5
bar \t 42
etc \t 22
bar \t 50
oth \t 12 
```

此外，每个文件可能包含根据另一个文件的重复项。例如：

```
abc \t 33
foo \t 10 
```

我想将这些文件加载​​到表中，以便合并重复项（对数字求和）。导入两个文件后，数据库应如下所示：

```
| text | num |
+------+-----+
| foo  |  15 |
| bar  |  92 |
| etc  |  22 |
| oth  |  12 |
| abc  |  33 | 
```

这些是我已经知道的命令：

*   加载文本文件：

    LOAD DATA INFILE "file.txt" INTO TABLE `table` FIELDS TERMINATED BY '\t';

*   选择有重复的行：

    SELECT * FROM `table` GROUP BY `text` HAVING COUNT(*) > 1;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:17:24.507

所以，我找到了一种方法来实现这一点。

创建主表：

```
CREATE TABLE IF NOT EXISTS `test`
(`text` VARCHAR(255) NOT NULL, `num` INT(11) NOT NULL); 
```

将文件加载到表中：

```
LOAD DATA LOCAL INFILE 'local/path/to/file.txt'
INTO TABLE `test` FIELDS TERMINATED BY '\t'; 
```

创建一个包含重复求和数字的临时表：

```
CREATE TEMPORARY TABLE `test_tmp`
SELECT `text`,SUM(`num`) FROM `test`
GROUP BY `text` HAVING COUNT(*) > 1; 
```

从主表中删除重复项：

```
DELETE FROM `test` WHERE `text`
IN (SELECT `text` FROM `test_tmp`); 
```

将数据复制到主表中：

```
INSERT INTO `test` SELECT * FROM `test_tmp`; 
```

删除临时表：

```
DROP TEMPORARY TABLE `test_tmp`; 
```

**有没有更好的方法来做到这一点？**

# php - PHP：访问嵌套数组元素的有效方法？

> ID：15851499
> 
> 赞同：3
> 
> 时间：2013-04-06T13:24:41.627
> 
> 标签：php, arrays, nested-attributes, multidimensional-array

我正在整理我在工作中遇到的一些旧代码，包括我想组合成嵌套数组的各种数组，并且想知道一种循环嵌套数组内容的简单方法（可能有一个首先存储数据的方法比嵌套数组更好，如果是这样，欢迎提出建议）。

下面的代码只是原始代码结构的一个示例，其行为方式与广义输出相同。

$someArray 元素过去是单独定义的，这似乎非常耗时，因此我要更改它：

```
$fruit['fruit']['apple']['size'] = 'small';
$fruit['fruit']['apple']['colour'] = 'red';
$fruit['fruit']['apple']['taste'] = 'bitter';
$fruit['fruit']['pear']['size'] = 'big';
$fruit['fruit']['pear']['colour'] = 'green';
$fruit['fruit']['pear']['taste'] = 'sweet'; 
```

这是我正在构建的嵌套数组的示例：

```
class someEntity 
{
    public function someFunction()
    {       

    $someArray = array
    (
    'apple' => array(
            'size' => 'small',
            'colour' => 'red',
            'taste' => 'bitter'
            ),
    'pear' => array(
            'size' => 'big',
            'colour' => 'green',
            'taste' => 'sweet'
            )
    );
    return($someArray);
    }

    public function anotherFunction()
    {
    # some other stuff
    }

} 
```

通过 foreach 循环调用：

```
$someArray= someEntity::someFunction();
var_dump($someArray);

foreach($someArray as $key)
{   
    foreach($key as $key => $value)
    {
    print($key.': '.$value.'<br>');
    }
}

array (size=2)
  'apple' => 
    array (size=3)
      'size' => string 'small' (length=5)
      'colour' => string 'red' (length=3)
      'taste' => string 'bitter' (length=6)
  'pear' => 
    array (size=3)
      'size' => string 'big' (length=3)
      'colour' => string 'green' (length=5)
      'taste' => string 'sweet' (length=5) 
```

**输出**：

大小：小 颜色：红色 味道：苦 大小：大 颜色：绿色 味道：甜

**问题**：

1.  压缩 $fruits 数组的最佳方法是什么？我的 $someArray 方法不正确吗？
2.  有没有更好的方法在没有嵌套 foreach 循环的情况下调用 $someArray 数据？

**考虑**：

1.  嵌套数组可能会变得更复杂，可能会更深一层
2.  不想在这种情况下使用数据库

先感谢您

**更新**

我使用对象进行了如下修改。

```
class fruit 
{
    private  $_type;
    private  $_size;            
    private  $_colour;
    private  $_taste;

    public function __construct($type,$size,$colour,$taste)
    {
    $this->_type = $type;
    $this->_size = $size;   
    $this->_colour = $colour;
    $this->_taste = $taste;             
    }

    public function displayFruitData()
    {

           echo'<br>'.$this->_type.'<br>'.$this->_size.'<br>'.$this->_colour.'<br>'.$this->_taste.'<br><br>';       
    }       
}   
    $fruit1 = new fruit("apple","small","red","bitter");
    $fruit2 = new fruit("pear","medium","yellow","sweet");
    $fruit3 = new fruit("pineapple","large","brown","sweet");       

    $output = $fruit1->displayFruitData();  
    $output = $fruit2->displayFruitData();  
    $output = $fruit3->displayFruitData();  

    exit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:01:20.477

你可以像这样简单地做到这一点

```
<?php
  $fruits = array('apple', 'pear');
  $size = array('apple' => 'small', 'pear' => 'big');
  $colour = array('apple' => 'red', 'pear' => 'green');
  $taste = array('apple' => 'bitter', 'pear' => 'sweet');

  foreach($fruits as $fruit)
  {
    echo "$fruit Size is {$size[$fruit]}<br />";
    echo "$fruit Colour is {$colour[$fruit]}<br />";
    echo "$fruit Taste is {$taste[$fruit]}<br />";
    echo '<br />';
  }
?> 
```

输出

```
apple Size is small
apple Colour is red
apple Taste is bitter

pear Size is big
pear Colour is green
pear Taste is sweet 
```

# jquery - 如何在 jQuery 1.9 中使用链接切换隐藏的单选按钮？

> ID：15851501
> 
> 赞同：1
> 
> 时间：2013-04-06T13:24:45.303
> 
> 标签：jquery

我尝试搜索这个，但通常人们想用单选按钮切换“div”，但是我想用链接切换隐藏的单选按钮。

我有一个像这样的单选按钮组：

```
<label class="radio inline hidden"><input class="radio_buttons" id="orderDirectionASC" name="orderDirection" type="radio" value="1" /> ASC</label>

<label class="radio inline hidden"><input class="radio_buttons" id="orderDirectionDESC" name="orderDirection" type="radio" value="0" /> DESC</label> 
```

所以，为了让我的表单更漂亮，而不是让用户点击单选按钮，我想要一个向上箭头或向下箭头的图像，可以在点击时切换。像这样的东西：

```
<a href="##" class="directiontoggle">
<i class="icon-chevron-up"></i>
<i class="icon-chevron-down"></i>
</a> 
```

当然，一次只会显示其中一个，因此当单选按钮切换时，这些图像也会显示。因此，如果收音机设置为 1，它会显示向上箭头，反之亦然。

哦，我还应该提到，我根据我的 ColdFusion 代码中页面加载的 URL 变量将单选按钮设置为向上或向下。我不知道这是否有帮助...

感谢您的任何帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:37:53.367

好吧，我想我明白了。这可能不是最优雅的方法，但它确实有效。欢迎提出改进建议:)

页面加载的第一个我要么隐藏向上或向下箭头，具体取决于初始选择是什么。

```
<cfif orderDirection eq 1>
    $('.directiontoggleDOWN').hide();
<cfelse>
    $('.directiontoggleUP').hide();
</cfif> 
```

然后我有这个jQuery代码：

```
 $('.directiontoggleUP').on('click', function(e) {
            e.preventDefault();
            $("##orderDirectionDESC").prop("checked", true); 
            $('.directiontoggleUP').hide();
            $('.directiontoggleDOWN').show();
        });
        $('.directiontoggleDOWN').on('click', function(e) {
            e.preventDefault();
            $("##orderDirectionASC").prop("checked", true); 
            $('.directiontoggleDOWN').hide();
            $('.directiontoggleUP').show();
        }); 
```

我的 HTML 看起来像这样：

```
 <a href="##" class="directiontoggleUP">   
                    <i class="icon-chevron-up"></i>
                </a>
                <a href="##" class="directiontoggleDOWN">
                    <i class="icon-chevron-down"></i>
                </a> 
```

所以是的，它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:33:49.197

```
$('.directiontoggle').on('click', function(e) {
    e.preventDefault();

    var radio  = $('#orderDirectionASC'), //radio button to toggle
        _check = radio.is(':checked');    //is it checked ?

    $('i', this).toggle(); // toggle both i elements, one should be hidden by CSS

    radio.prop('checked', !_check); // toggle radio button
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:37:20.947

也许这样的例子对你有好处。它使用纯 HTML + CSS 工作：http: [//jsfiddle.net/t6kBQ/5/](http://jsfiddle.net/t6kBQ/5/)

HTML 如下

```
<div id="sites">
    <input type="radio" name="arrows" id="so" value="stackoverflow" /><label for="so"><img src="http://sstatic.net/stackoverflow/img/favicon.ico" alt="Stack Overflow" />ASC</label>
    <br/>
     <input type="radio" name="arrows" id="sf" value="serverfault" /><label for="sf"><img src="http://sstatic.net/serverfault/img/favicon.ico" alt="Server Fault" />DESC</label>
</div> 
```

CSS如下：

```
.input_hidden {
    position: absolute;
    left: -9999px;
}

.selected {
    background-color: #ccc;
}

#sites label {
    display: inline-block;
    cursor: pointer;
}

#sites label:hover {
    background-color: #efefef;
}

#sites label img {
    padding: 3px;

} 
```

ps对不起愚蠢的图标:)

# ruby - 为什么我不能在这里使用 splat 运算符而不是 self？

> ID：15851503
> 
> 赞同：-2
> 
> 时间：2013-04-06T13:25:02.583
> 
> 标签：ruby

这是有效的：

```
def sum
  result = 0
  self.each { |num| result += num }
  result
end 
```

为什么这不起作用？

```
def sum(*numbers)
  result = 0
  numbers.each { |num| result += num }
  result
end 
```

测试：传入[4,6,9]，应该得到总和。顶部功能有效，底部功能不添加它们。

搞砸了，结果证明`self.`没有必要保持测试通过。它只是好的形式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:33:57.743

该`numbers`参数将所有传递给此方法的参数作为一个数组。

但是然后你传递了一个参数 - 数组，所以你有一个嵌套数组。

要解决这种情况，您可以使用 flatten 方法将嵌套数组转换为平面数组。

```
def sum(*numbers)
  result = 0
  numbers.flatten.each { |num| result += num }
  result
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:28:45.577

```
 def sum(*numbers)
    result = 0
    numbers.each { |num| result += num }
    result
  end
  p sum(1,2,3) 
```

或者

```
class Array
def sum
    result = 0
    self.each { |num| result += num }
    result
end
end
p ([1,2,3].sum) 
```

输出：

```
6 
```

请勿执行以下操作：

```
 def sum(*numbers)
    p numbers
    result = 0
    numbers.each { |num| result += num }
    result
  end
  p sum([1,2,3]) 
```

输出：

```
[[1, 2, 3]]
true.rb:255:in `+': Array can't be coerced into Fixnum (TypeError)
    from true.rb:255:in `block in sum'
    from true.rb:255:in `each'
    from true.rb:255:in `sum'
    from true.rb:258:in `<main>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:10:27.610

## 问题

当您使用 splat 收集参数时，您正在将它们收集到一个数组中。如果将数组传递给 splat，您将得到一个嵌套数组。例如：

```
def sum(*numbers)
  numbers.inspect
end
#=> [[4, 6, 9]] 
```

在这种情况下，[Array#each](http://www.ruby-doc.org/core-2.0/Array.html#method-i-each)将`[4, 6, 9]`作为其唯一成员返回。

## 解决方案

如果你知道你要传入一个数组，你可以使用[Enumerable#reduce](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-reduce)代替。例如：

```
def sum array
  array.reduce :+
end

sum [4, 6, 9]
#=> 19 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T18:40:34.727

或者你可以试试这个：

```
def sum(*numbers)
  numbers.flatten.reduce(:+)
end 
```

这样你就可以调用它作为`sum(1,2,3)`或`sum([1,2,3])`。

# iphone - 使用 Google Analytics 跟踪 Web 应用访问者

> ID：15851507
> 
> 赞同：0
> 
> 时间：2013-04-06T13:25:44.863
> 
> 标签：iphone, ios, ipad, analytics

我正在尝试通过我的 iPhone/iPad 网络应用程序（全屏模式）跟踪访问我网站的访问者。

我添加了这段代码（在原生谷歌分析跟踪器之上）：

```
<script type="text/javascript">
           if (window.navigator.standalone == true) {
        _gaq.push(['_setCustomVar',
            5,
            'Full Screen Mode visitors',
            'full-screen-mode-visitors',
            3
            ]);
            _gaq.push(['_trackPageview']);
            }
</script> 
```

但是 Google Analytics 中没有出现自定义变量...我的代码有问题吗？我的网络应用程序在全屏模式下加载正常，但 Google Analytics 中没有记录自定义变量。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:45:20.387

你的代码对我来说看起来不错。但也许你可以尝试添加一个 if else 语句来跟踪那些不在网络应用程序模式下？当然有不同的价值。如果他们显示，Google Analytics 中缺少的自定义变量必须与 window.navigator.standalone 属性有关，而不是与 setCustomVar 本身有关。

# html - HTML 表单中的 get URL 是如何生成的？

> ID：15851509
> 
> 赞同：2
> 
> 时间：2013-04-06T13:26:02.910
> 
> 标签：html, forms, get

我一直在阅读有关`get`提交表单数据的方法。

因此，表单中的数据将作为分隔符附加到表单的`action`属性值中。`?`

我不明白的是，我如何正确预测表单提交的 URL 将是什么。

我的意思是，假设一个表单如下所示：

```
<form method="get" action="foobar.com/search">
  User Name : <input type="text" name="uname"></input><br/>
  Name : <input type="text" name="name"></input><br/>
  <input type="submit" value="Submit"></input>
</form> 
```

单击提交按钮时，生成的 URL 是什么？这将是 ：`foobar.com/search?[data encoded here]`

但是什么协议定义了它的编码方式？该名称可能出现在用户名之前或之后。

是否可以编写一个脚本来为任何表单创建一个模板 URL，以便在`%s`用字符串数据替换相应的 URL 时，它会创建正确的 URL？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:38:25.577

给定一个`application/x-www-form-urlencoded`编码（默认）和 GET 的使用，简单来说，这个过程是：

对于每个控件，按照它们在表单中出现的顺序，如果它是一个成功的控件：

1.  如果不是第一项，请添加`&`
2.  URL 编码字段的名称
3.  添加一个`=`
4.  URL 编码字段的值

[HTML 5 规范](http://www.w3.org/TR/html5/forms.html#form-submission-0)中描述了构建表单数据提交的完整过程（具体在[The application/x-www-form-urlencoded encoding algorithm 中](http://www.w3.org/TR/html5/forms.html#application/x-www-form-urlencoded-encoding-algorithm)）。

> 是否可以编写一个脚本来为任何表单创建一个模板 URL，以便在用字符串数据替换相应的 %s 时，它会创建正确的 URL？

由于在提交表单之前并不总是可以预测哪些控件会成功，所以不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:30:37.673

参数的顺序完全没有区别，因为它是一个关联数组。

也就是说，我相当确定所有浏览器都会按照它们在源代码中出现的顺序发送变量。所以在你的情况下`?uname=[input]&name=[input]`

# android - OnNetworkError (#282) 需要扩展权限共享项

> ID：15851512
> 
> 赞同：1
> 
> 时间：2013-04-06T13:26:17.933
> 
> 标签：android, facebook, cordova, extjs

我正在使用 Sencha Touch 2 + Android + PhoneGap + GetSocialize SDK。我尝试使用 getsocialize sdk 在 Facebook 上分享一些东西。我已经在没有PhoneGap的android上做了一个例子，它工作得很好，没有错误。当我使用 PhoneGap + sencha 时，我收到此错误：

```
282 Requires extended permission share item 
```

我知道我已授予`publish_stream share_item`我的 Facebook 应用程序的权限。

# javascript - 在线游乐场测试和编译下划线模板？

> ID：15851516
> 
> 赞同：4
> 
> 时间：2013-04-06T13:26:43.817
> 
> 标签：javascript, underscore.js, handlebars.js, web-testing

是否有任何在线网站，我们可以在线使用 Underscore 或 Handlebar 模板而无需下载任何内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-18T07:54:52.613

如果下划线模板足以满足您的需求：[http ://rowno.github.io/architect/](http://rowno.github.io/architect/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-24T13:59:22.807

个人认为 npm runkit 更简单，更易于使用。你可以在上面测试任何 npm 包。

由于*Underscore*和 *Handlebars*都在 npm 上，因此它们每个都有一个 runkit，[Underscore](https://npm.runkit.com/underscore)和[Handlerbars](https://npm.runkit.com/handlebars)。

否则，您可以使用[jsfiddle](https://jsfiddle.net/)或[CodePen](https://codepen.io/)等在线代码编辑器并添加所需的库。

如果你想更好地控制你的文件和代码，你可以使用类似[glitch](https://glitch.com/)的东西，它提供了非常适合测试的免费 Node 环境，例如，你的服务器端脚本。如果你需要一个数据库，你仍然可以使用[MongoDB Atlas](https://www.mongodb.com/cloud/atlas)和[glitch](https://glitch.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:28:04.590

[Cloud9 IDE](https://c9.io)有一个 node.js 环境，您可以使用它来安装模板模块并运行它们，所有这些都来自浏览器。

# c++ - Qt C++ QTextEdit在打字时计算字数

> ID：15851524
> 
> 赞同：5
> 
> 时间：2013-04-06T13:28:07.917
> 
> 标签：c++, qt

我需要在 Qt C++ 中实现方法，该方法在用户键入时计算 QTextEdit 中的字数。此外，当用户键入多个空格时，它们不应被视为单词。我知道如何在已经输入的文本上执行此操作，但我需要一直更新单词总数。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:39:11.710

我建议你连接`void QTextEdit::textChanged () [signal]`并使用这样的东西：

```
void onTextChanged()
{
    int wordCount = textEdit->toPlainText().split(QRegExp("(\\s|\\n|\\r)+")
                                                  , QString::SkipEmptyParts).count();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:40:42.413

您几乎必须自己解析它，使用单个拆分器拆分字符串并不是生产的好解决方案。这是我前段时间写的一个简单的解析器，它就是这样做的：

```
void processChar(const QChar &ch)
{
    // if char is not separator
    if (!sp[ch.unicode()]){
        if (!isWord){ // set where word begins
            wordBegin = counter;
            isWord = 1;
        }
        ++textChar;
    }
    // if char is separator
    else{
        // if there is a current word
        if (isWord){
            QString tempWord(text.mid(wordBegin, counter - wordBegin));
            tempWord = tempWord.toLower();
            // if word does not exist add with value one
            if (!words.contains(tempWord)){
                words.insert(tempWord, 1);
                ++uniqueWords;
            }
            // if word exists find its value and increment by one
            else {
                words.insert(tempWord, words.value(tempWord) + 1);
            }
            ++totalWords;
            isWord = 0;
        }
        // else skip
        ++sepChar;
    }
} 
```

您调用`processChar()`文本的每个字符。

它非常快，它使用一个查找表（字符数组）`sp`，其中包含所有字符并标记那些是分隔符的。这是从所有分隔符的 QString 填充表格的方法。

```
void indexChars()
{
    // zero everything
    for (unsigned i = 0; i < 65536; ++i) sp[i] = 0;

    // set every separator index to 1
    for (int i = 0; i < separators.length(); ++i) {
        sp[separators.at(i).unicode()] = 1;
    }
} 
```

该表很大，因为我也希望能够处理 16 位字符。

它有多快 - 尽管做了额外的工作，但它比 MS Word 的字数快 20 倍，而且它实际上创建了一个列表，其中包含文本中每个唯一单词加上出现次数的列表，存储在 QMap 中`words`。它跟踪文本字符`textChar`、分隔符`sepChar`、总单词和唯一单词。

功能可能有点矫枉过正，但如果你不需要所有额外的东西，你可以把它去掉。如果您删除不需要的内容，它会变得更快。

您可以使用这些片段，如果文本自上次计数后发生更改，则可以使用计时器定期计数单词，这是比替代方案更好的解决方案 - 计数文本字段的每个键入的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:28:30.983

编辑：
我想我记得很清楚 QTextDocument 是如何工作的（我认为这`contentsChange(int position, int charsRemoved, int charsAdded)`是在实际更改之前调用的）。我错了，或者新版本中的行为已经改变。无论如何，对于当前版本（5.0.1），我看不到如何计算对字数的校正。看起来这是不可能的。至少我看不到一种方法来计算删除了多少单词。

~~听来自[QTextDocument](http://qt-project.org/doc/qt-4.8/qtextdocument.html) :`contentsChange(int position, int charsRemoved, int charsAdded)`和的两个信号`contentsChanged()`。第一个在文档修改之前触发，第二个在修改之后触发。使用此信息：位置、charsRemoved、charsAdded；计算对总字数的修正。~~

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T17:41:51.690

如果要计算文档从一开始就包含多少个单词，最好的解决方案是：

```
void MainWindow::docChanged()
{
    QTextDocument *doc = qobject_cast<QTextDocument *>(sender());
    QRegExp re("\\b\\w+\\b");
    int wordCount = 0;
    QTextCursor c = doc->find(re);
    while (!c.isNull()) {
        wordCount++;
        c = doc->find(re, c);
    }
    ui->labelWordCount->setText(QString::number(wordCount));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T21:32:50.817

我就是这样做的，我从这个线程上的一些答案中进行了组合。我注意到这个解决方案非常快，如果不需要，它不会浪费资源。它在您键入时仅检查部分文本，只有在您粘贴文本时才会检查整个文本。我希望有人检查此代码并发布一些反馈。这是代码：

```
size = 0;
counter = 0;
start = 0;
end = 0;
void MainWindow::count()
{
    text = ui->textEdit->toPlainText();
    if(text.length()-size == 1){
    if(text.length() == 1){
    if(!text.at(0).isSpace()){
        counter++;
        ui->label_2->setText(QString::number(counter));
    }}

    if(text.length()>2){
    start = text.length()-1;
    end = text.length();
    if(text.at(start-1).isSpace() && !text.at(end-1).isSpace()){
        counter++;
        ui->label_2->setText(QString::number(counter));
    }}}
    else if(text.length()-size > 1){
    counter = 0;
    if(!text.at(0).isSpace()) counter++;
        for(int i = 1; i<text.length();i++){
            if(!text.at(i).isSpace() && text.at(i-1).isSpace())
                counter++;

        }
        ui->label_2->setText(QString::number(counter));
    }
    size = text.length();
} 
```

# ruby-on-rails - 序列化字段无法保存轨道

> ID：15851525
> 
> 赞同：0
> 
> 时间：2013-04-06T13:28:12.700
> 
> 标签：ruby-on-rails, ruby

我在我的数据库中添加了一个序列化列...

```
class AddRegQuestionsColumnToUsers < ActiveRecord::Migration
   def change
   add_column :users, :reg_questions, :text
  end
end  

class User < ActiveRecord::Base
     attr_accessible :reg_questions
     serialize :reg_questions, hash
end 
```

运行 rake db:migrate

然后尝试将哈希传递给rails控制台中的字段...

```
[1] pry(main)> a=User.new
 => #<User:0x3ffa10aef3e0>

[2] pry(main)> a.reg_questions={"9"=>"Yes", "10"=>"Yes", "11"=>"Yes", "12"=>"Yes", "13"=>"Yes", "14"=>"Yes", "15"=>"Yes", "16"=>"Yes"}
=> {"9"=>"Yes",
   "10"=>"Yes",
   "11"=>"Yes",
   "12"=>"Yes",
   "13"=>"Yes",
   "14"=>"Yes",
   "15"=>"Yes",
   "16"=>"Yes"}

[3] pry(main)> a.save
(0.1ms)  begin transaction
(0.1ms)  rollback transaction
 => false` 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:12:13.553

这个问题的解决方案是我没有完成保存所需的验证。它与我添加的序列化字段无关。

```
a.save provided...

@messages=
{ :email=>["can't be blank", 
           "can't be blank"],
 :password=>["can't be blank"]} 
```

Rossta 提供了一种使用 .errors 解决保存错误的好方法。

Dana，我在有无哈希的情况下进行了测试，它似乎在两种情况下都有效。感谢您的反馈意见。

谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:40:31.210

好吧，你肯定需要序列化`Hash`​​.

# java - 如何从命令行运行具有多个类和包的java程序？

> ID：15851530
> 
> 赞同：-1
> 
> 时间：2013-04-06T13:28:37.437
> 
> 标签：java

目前，我正在寻找另一种从命令行运行 Java 程序的方法，而不是将其添加到 JAR 文件中。我的程序有以下数量的类：

程序文件名 - MyProgram
主类 - Server1
第二类 - Client Handler
包名 - Items
3rd class - User1
4th class - User2

主类和客户端处理程序必须首先运行才能让用户 1 和用户 2 运行，因为它们是客户端类并且依赖于主类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:38:47.077

运行 java 类名。只要所有 .class 文件都在那里，java 就会找到它们。请注意使用包时，您应该从包根目录运行 java 并键入以正确包为前缀的类名。

如果你有需要的 jar 文件，你应该在运行 java 时用 -classpath 指定它们。

# c#-4.0 - C# 控制台应用程序中的正确文件路径

> ID：15851535
> 
> 赞同：20
> 
> 时间：2013-04-06T13:29:09.623
> 
> 标签：c#-4.0, console-application, relative-path, filepath

有人可以告诉我如何获得文件 data.xml 的正确文件路径吗？这是文件所在的位置：

![在此处输入图像描述](https://i.stack.imgur.com/Imsxt.jpg)

这是我的 C# 代码，它正在检查文件是否存在于提供的路径中：

```
public class Parser
{
    static void Main(string[] args)
    {
        Console.WriteLine(File.Exists("App_Data/data.xml"));
        Console.Read();
    }
} 
```

我不断得到 False，这意味着这样的文件不存在。所以到目前为止我尝试过的文件路径包括：

```
"~/App_Data/data.xml"
"/App_Data/data.xml"
"App_Data/data.xml" 
```

如果这是一个 Web 应用程序，我会知道该怎么做，通过使用 HttpContext 并获取文件。但由于这是一个控制台应用程序，我不知道。

在相关说明中，控制台应用程序和可执行应用程序之间有什么区别？我是否正确，没有区别，因为如果控制台应用程序具有 Main 方法，它可以是可执行应用程序？

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-06T13:43:57.600

您还可以将 data.xml 添加到输出构建目录。您需要右键单击该文件并选择`Copy if newer`或`Copy always`。`Copy to output directory option`

然后，您可以使用以下内容：

```
Console.WriteLine(File.Exists("App_Data/data.xml")); // Should print True 
```

但是，如果您希望 data.xml 发生更改，那么只需指向项目外部某处的完整路径（假设 App_Data/data.xml 被复制到 C:/Temp）然后：

```
Console.WriteLine(File.Exists("C:/Temp/App_Data/data.xml")); // Prints True 
```

此外，对于与控制台和可执行应用程序相关的其他问题，exe 可以是不同的应用程序类型，例如控制台或 wpf 或 winforms（这就是 Visual Studio 对这些应用程序进行分组的方式）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-06T13:33:56.493

获取当前工作目录：

```
Directory.GetCurrentDirectory() + "/App_Data/data.xml"; 
```

重要提示：`App_Data`必须与您的应用程序位于同一目录中。

获取`data.xml`文件的最佳方式是将其与应用程序一起携带或保存在用户的“主”目录中（或在 Windows 8 下调用的任何目录）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:01:43.863

您可以嵌入文件并使用反射来获取它。

```
Stream s = Assembly.GetExecutingAssembly().GetManifestResourceStream("file name");
XmlDocument d = new XmlDocument();
steamReader sr = new StreamReader(s);
d.LoadXml(sr.ReadToEnd());
r.Close(); 
```

看看这篇文章。它展示了如何使用反射嵌入和获取文件：[https ://docs.microsoft.com/en-us/dotnet/api/system.reflection.assembly.getmanifestresourcestream?view=netframework-4.8](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.assembly.getmanifestresourcestream?view=netframework-4.8)

# c# - .Wav Speex 标头内容问题

> ID：15851537
> 
> 赞同：2
> 
> 时间：2013-04-06T13:29:12.593
> 
> 标签：c#, speex, wav, riff

我已经安装了 Speex Voice ACM Codec 1.0.1.1 编解码器，它们似乎有不同的 .wav 标头，然后是此 NSpeex(C#) 包中的 C# 代码中描述的标头。

我可以读取使用“Speex Voice ACM Codec 1.0.1.1”创建的 .wav 文件，并成功解码它们，但是当我创建 .wav 文件时，“Speex Voice ACM Codec 1.0.1.1”无法识别我的标题。我检查了十六进制编辑器，“Speex Voice ACM Codec 1.0.1.1”创建的 .wav 标头中有一些字节，我没有创建，它们与 NSpeex.PcmWaveWriter 类中的不同。

所以，我同意这部分：

```
raf.Write(WAVE_FORMAT_SPEEX); // Format tag: Speex   
raf.Write((short)channels); // Number of channels    
raf.Write(sampleRate); // Sampling frequency    
raf.Write((CalculateEffectiveBitrate(mode, channels, quality) + 7) >> 3); // Average bytes per second       
raf.Write((short)CalculateBlockSize(mode, channels, quality)); // Blocksize of data    
raf.Write((short)quality); // Bits per sample 
```

但是，其余的不是 NSpeex.PcmWaveWriter 类的代码。

在十六进制编辑器中，我在“Speex Voice ACM Codec 1.0.1.1”创建的 .wav 文件中看到（在上述部分之后）：

```
//byte[] speexSpecific ={   
//   0x00, 0x01, 0x02, 0x00,0x0a, 0x00,   
//   0x00, 0x00, 0xf4, 0x01,    
//   0x03, 0x00, 0x00, 0x00}; 
```

但我不知道那是什么以及如何创建 .wav 标头以与“Speex Voice ACM Codec 1.0.1.1”兼容。同样，我可以解码他们的 .wav 文件，并创建我可以解码的 .wav 文件，但该编解码器似乎无法识别我的 .wav 标头。

Speex 应该是“开源”的，有人可以透露 .wav (speex) 标头中的秘密字节吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:49:26.010

我找到了！这正好解释了我丢失的 14 个字节（检查 SPEEX_WFX_EXTRA_BYTES=14）

```
//typedef struct tWAVEFORMATEX
//{
//    WORD        wFormatTag;         /* format type */
//    WORD        nChannels;          /* number of channels (i.e. mono, stereo...) */
//    DWORD       nSamplesPerSec;     /* sample rate */
//    DWORD       nAvgBytesPerSec;    /* for buffer estimation */
//    WORD        nBlockAlign;        /* block size of data */
//    WORD        wBitsPerSample;     /* number of bits per sample of mono data */
//    WORD        cbSize;             /* the count in bytes of the size of */
//                                    /* extra information (after cbSize) */
//} WAVEFORMATEX, *PWAVEFORMATEX, NEAR *NPWAVEFORMATEX, FAR *LPWAVEFORMATEX;

//#define WAVE_FORMAT_SPEEX                           0xa109  
//#define SPEEXWAVEFORMAT_VERSION 0x0100    // 1.0 
//#define SPEEX_WFX_EXTRA_BYTES   14 

///* 
//    wfx.wFormatTag = WAVE_FORMAT_SPEEX 
//    wfx.nChannels = 1,2 
//    wfx.nSamplesPerSec = 8000,16000,32000 
//    wfx.nAvgBytesPerSec = ... 
//    wfx.nBlockAlign = CBR? ... : 1 
//    wfx.wBitsPerSample = 16 
//    wfx.cbSize = SPEEX_WFX_EXTRA_BYTES 

//    For VBR: 
//    wfx.nAvgBytesPerSec = SPEEX_BITRATE_24600; 
//*/ 

//typedef struct speexwaveformat_tag 
//{ 
//    WAVEFORMATEX    wfx; 

//    WORD nVersion;        // SPEEXWAVEFORMAT_VERSION 
//    WORD nFramesPerBlock;// 1.. 
//    WORD nQuality;        // 0..10 
//    WORD nMode;           // SPEEX_MODE_... 
//    WORD nVbrQuality; // 0..1000 ,float [0.00 , 10.00] 
//    WORD nComplexity; // 1..10 
//    WORD nFlags;      // SPEEX_FLAG_... 
//} SPEEXWAVEFORMAT;            
// CBR,ABR,VBR 

//#define SPEEX_MODE_CBR            0 
//#define SPEEX_MODE_ABR            1 
//#define SPEEX_MODE_VBR            2 

//// flags 
//#define SPEEX_FLAG_VAD            0x0001 
//#define SPEEX_FLAG_DTX            0x0002 

//#define SPEEX_DEF_QUALITY 3 
//#define SPEEX_DEF_COMPLEXITY 3 
//#define SPEEX_DEF_VBR_QUALITY 500 
```

# javascript - 无法获取同一参数的多个实例的问题列表

> ID：15851542
> 
> 赞同：1
> 
> 时间：2013-04-06T13:29:22.807
> 
> 标签：javascript, api, oauth, bitbucket

我正在尝试使用 OAuth.js ( [http://oauth.googlecode.com/svn/code/javascript/](http://oauth.googlecode.com/svn/code/javascript/) ) 通过 REST API 从 Bit Bucket 获取问题列表。我正在签署每个请求

```
OAuth.completeRequest(message, accessor); 
```

消息在哪里

```
message: {
  action: "https://api.bitbucket.org/1.0/repositories/owner/reponame/issues",
  method: "GET",
  parameters: p;
}; 
```

当**p**包含不同名称的参数时，一切正常：

```
p = [['status','open'],['priority','high']] 
```

但是当**p**包含同名参数时

```
p = [['status','open'],['status','resolved']] 
```

，服务器响应**401 UNAUTHORIZED**。Bitbucket API 支持同一参数的多个实例：

> 您可以查询同一参数的多个实例。系统将同一参数的多个实例视为整个过滤器查询的 OR。例如，以下过滤器查找标题中带有 for 单词的未解决和已解决的错误：

```
status=open&kind=!bug&status=resolved&title=~for 
```

我认为这个问题存在于 OAuth.js 库的签名方法中，但找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T09:57:54.480

这是 bitbucket 方面的一个错误： [https ://bitbucket.org/site/master/issue/7009/you-cannot-use-multiple-identical-query](https://bitbucket.org/site/master/issue/7009/you-cannot-use-multiple-identical-query)

# java - 如何获得通用列表的类类型？

> ID：15851544
> 
> 赞同：0
> 
> 时间：2013-04-06T13:29:47.747
> 
> 标签：java, generics

我有这个方法

```
public <T> T PostQuery(String url, Object graph, Class<T> returnType) 
```

我想这样称呼它

```
List<User> users = PostQuery("blabla", SomeObj, List<User>.class); 
```

但是我在最后一个参数上出错了。它只允许我写`List.class`，这使它成为一个字符串列表，而不是我想要的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:35:58.447

由于泛型的 Java 实现（类型擦除），因此`List<User>.class`不仅有`List.class`. 因此，要么只使用 List.class，要么您可以创建第二个方法，该方法已经返回这样的列表

```
public List<T> T PostQueryList(String url, Object graph, Class<T> returnType)
List<User> users = PostQueryList("blabla", SomeObj, User.class); 
```

如果您真的需要访问，您可能需要查看来自 Guava [https://code.google.com/p/guava-libraries/wiki/ReflectionExplained](https://code.google.com/p/guava-libraries/wiki/ReflectionExplained)`List<User>`的 TypeTokens

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:33:29.407

仅用`User.class`作参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T13:39:10.440

据此： [https](https://stackoverflow.com/a/2226038/1264582) ://stackoverflow.com/a/2226038/1264582 有一种解决方法。只需使用泛型类的子类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T13:38:53.377

可以使用`public <T> T PostQuery(String url, Object graph){}`，因为您在声明时已为此方法声明了一个泛型类型`<T>`：

```
public <T> T PostQuery(String url, Object graph){
    Object obj = null;
    //...
    return (T)obj;
} 
```

# vim - Vim ma`a 转到下一行

> ID：15851546
> 
> 赞同：0
> 
> 时间：2013-04-06T13:29:48.170
> 
> 标签：vim

我在 vim 中遇到了标记问题。我写了以下快捷方式：

```
noremap <Leader>i magg=G`a<CR> 
```

问题是当我使用它时，光标会跳到下一行，有时还会跳到左边的几个字符。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:47:18.717

因为您通过在末尾添加 <CR> 来告诉它。

# java - 在 Struts 1.2 中为 bean 变量设置值

> ID：15851549
> 
> 赞同：1
> 
> 时间：2013-04-06T13:29:49.807
> 
> 标签：java, struts-1

我正在为我的应用程序使用 Struts 1.2。我已经使用 Struts taglib 声明了一个变量，如下所示：

```
<bean:define id="stringVar" type="java.lang.String" value="someValue" /> 
```

现在我想根据某些条件为这个变量“stringVar”分配一些其他值。我不确定如何为这个变量赋值。

请问有什么帮助吗？

问候，

# iphone - 在 iOS 应用程序中写入 Sqlite

> ID：15851551
> 
> 赞同：0
> 
> 时间：2013-04-06T13:30:07.580
> 
> 标签：iphone, ios, objective-c, xcode, sqlite

我在写入 Sqlite DB 时遇到问题，并且对最近一个问题的回答提供了关于为什么我无法更新/插入的线索。我从主包中获取对文件的引用并尝试插入记录。这不起作用，因为正如我发现的那样，主捆绑包是只读的。我需要能够对我的 Sqlite 数据库进行读/写访问。有人可以指出我在 iOS 应用程序中执行 Sqlite 插入的简单解释吗？谢谢，维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:31:25.080

您需要创建您在主包中的数据库的副本以获得写访问权限。像这样：

```
// Path to db
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString* path = [paths objectAtIndex:0];
// Name of DB:
NSString* fullPath = [path stringByAppendingString:@"/original.db"];
// FileManager, to open db:
NSFileManager* fm = [NSFileManager defaultManager];
// do we already have a local copy?
if (![fm fileExistsAtPath:fullPath]) {
    NSString* pathForNewDB = [[NSBundle mainBundle] pathForResource:@"database" ofType:@"db"];
    // create local copy:
    [fm copyItemAtPath:pathForNewDB toPath:fullPath error:NULL];
} 
```

# jquery - jquery 仅在单击 li 而不是嵌套 li 时切换

> ID：15851555
> 
> 赞同：0
> 
> 时间：2013-04-06T13:30:35.567
> 
> 标签：jquery, nested, toggle

我遇到了以下情况：

[http://jsfiddle.net/7XrUM/](http://jsfiddle.net/7XrUM/)

使用此 js 进行切换：

```
$("ul > li.closed").click(function() {
    var li = $(this).closest('li');
    li.find(' > ul').slideToggle('fast');
    $(this).toggleClass("closed open");
}); 
```

单击“标题”时，会显示 ul。但是当我然后单击图像或它们之间时，它们会切换回来并再次被隐藏。所以我只想在单击“标题”时切换，而不是在单击某些嵌套元素时切换，但我无法让这个工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:38:05.123

只需检查它是否真的是`LI`被点击的，而不是刚刚冒泡的事件：

```
$("ul > li.closed").click(function(e) {
    if (e.target === this) {
        var li = $(this).closest('li');
        li.find(' > ul').slideToggle('fast');
        $(this).toggleClass("closed open");
    }
}); 
```

[**小提琴**](http://jsfiddle.net/7XrUM/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:39:10.217

尝试这个：

```
$(function () {
    $("li.closed > ul").hide();

    $("ul > li.closed").click(function () {
        var li = $(this).closest('li');
        li.find(' > ul').slideToggle('fast');
        $(this).toggleClass("closed open");
    });

    $("li.fl, li.fl > a").click(function (e) {
        e.stopPropagation();
    });
}); 
```

[**在这里演示**](http://jsfiddle.net/7XrUM/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:26:30.357

对您来说最好的做法是将 action 元素包装在 HTML 标记中以获得更多控制：

```
<ul>
    <li class="closed"><a href="javascript:void(0)">Headline 1</a>
        <ul>
            <li class="fl"><a href="#"><img src="#"></a></li>
            <li class="fl"><a href="#"><img src="#"></a></li>
        </ul>
    </li>

    ...       
</ul> 
```

这样，如果您单击 UL 内会关闭显示区域的任何内容，您将无需担心。

```
$("ul > li.closed a").click(function() {
    var li = $(this).closest('li');
    li.find(' > ul').slideToggle('fast');
    $(this).toggleClass("closed open");
}); 
```

# dynamics-crm - 如何将查找值设置为 N:1 关系记录然后创建它

> ID：15851556
> 
> 赞同：1
> 
> 时间：2013-04-06T13:30:36.047
> 
> 标签：dynamics-crm, crm, dynamics-crm-4, workflow-activity

联系人 (contact) 和汽车详细信息 (cir_cardetails) 之间曾经存在 1:N 关系 - 我现在传递了联系人的参数作为汽车详细信息的查找，如下所示

```
public static DependencyProperty ContactProperty =   
DependencyProperty.Register("Contact", typeof(Lookup), typeof(CreateCardetails));

 [CrmInput("Contact ID")]
    [CrmReferenceTarget("contact")]
    public Lookup Contact
    {
        get
        {
            return (Lookup)base.GetValue(ContactProperty);
        }
        set
        {

            base.SetValue(ContactProperty, value);
        }
    }

protected override ActivityExecutionStatus Execute(ActivityExecutionContext  
executionContext)
    {

    ----------------------

     ---------------------

      ---------------------

       Guid contactId = ((Lookup)base.GetValue(ContactProperty)).Value;

    Lookup lookup = new Lookup();
            lookup.Value = contactId;
            lookup.type = "contact";

            //Create an car details record which will be linked to the contact record
            DynamicEntity cardetails = new DynamicEntity("cir_cardetails");

            cardetails["cir_carsdetailsid"] = lookup;

            //Setting the picklist value of Model

             Picklist modelPickList = new Picklist();
             modelPickList.Value = model.Value;
          cardetails.Properties.Add(new PicklistProperty("cir_model",modelPickList));

           //Creating the car details record
            Guid carkey = crmService.Create(cardetails);

} 
```

但现在我想将此 GUID 值（查找）设置为汽车详细信息记录，然后创建汽车详细信息记录。我在上面的代码中做的对吗

```
Lookup lookup = new Lookup();
lookup.Value = contactId;
lookup.type = "contact";

DynamicEntity cardetails = new DynamicEntity("cir_cardetails");

cardetails["cir_carsdetailsid"] = lookup; 
```

请帮助我如何设置查找值。

# hsqldb - 如何限制多个嵌入式 HSLQDB 数据库实例整体使用的 RAM？

> ID：15851561
> 
> 赞同：0
> 
> 时间：2013-04-06T13:31:43.497
> 
> 标签：hsqldb

鉴于：

1.  HSQLDB 嵌入式
2.  50 个不同的数据库（我有 50 个不同的数据源）
3.  所有的数据库都是`file:/`这样的
4.  所有表都已缓存
5.  所有嵌入式数据库实例组合允许使用的 RAM 量是有限的，并在 java 进程启动时给出。
6.  LOG文件被禁用（崩溃时无需恢复）

我的理解是单个数据库实例使用的 RAM 由以下几部分组成：

*   所有表的缓存（我所有的表都被缓存了）
*   数据库实例内部状态

此外，据我所见，我有这两个属性来控制单个数据库实例的缓存的总大小：

*   设置文件缓存大小
*   设置文件缓存行

但是，它们仅控制数据库实例使用的 RAM 的缓存部分。另外，它们是每个数据库实例，而我想限制所有实例作为一个整体。

所以，我想知道是否可以指示 HSQLDB 保持在指定的 RAM 总量内，包括所有数据库实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:42:36.267

您只能限制每个数据库实例的 CACHE 内存使用。每个实例相互独立。

您可以减少每个数据库的 CACHE SIZE 和 CACHE ROWS 以适应您的应用程序。

HSQLDB 不使用很多其他内存，但是当它使用时，它会使用 JVM 的内存，这些内存在不同的数据库实例之间共享。

# java - Java SWT 和无效的线程访问

> ID：15851562
> 
> 赞同：4
> 
> 时间：2013-04-06T13:31:48.367
> 
> 标签：java, multithreading, swt

我见过[这个](https://stackoverflow.com/questions/5980316/invalid-thread-access-error-with-java-swt)，但它不适用于我的代码。这是我独特的课程：

```
public static void main(String[] args) {
        try {
            Main window = new Main();
            window.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

public void open() {
        Display display = Display.getDefault();
        createContents();
        shell.open();
        shell.layout();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
    }

protected void createContents() {
        shell = new Shell(SWT.CLOSE | SWT.MIN | SWT.TITLE | SWT.ON_TOP);
        shell.setSize(301, 212);
        shell.setText("MyShell");
        // ...Other contents... 
        btn = new Button(shell, SWT.NONE);
        btn.setBounds(114, 151, 76, 25);
        btn.setText("BUTTON!");
        btn.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                doSomething();
            }
        });
} 
```

该方法`doSomething()`是另一个方法的调用者，如下所示：

```
private void doSomething()
{
    Thread th = new Thread() {
        public void run() {
        threadMethod();
        }
    };
    th.start();
} 
```

当我点击我的按钮时，一个“无效的线程访问”从 Thread-0 引发，它指向`threadMethod()`(wich**不访问**UI 小部件) 的第一条指令。我试图用我的按钮监听器包围

```
Display.getDefault().asyncExec(new Runnable() {
    public void run() {
        // ...
    }
}); 
```

但它也不起作用。我需要该`doSomething()`方法，因为它在创建线程之前会检查一些代码。这是线程方法（）

```
private void threadMethod() 
    {
        String[] listItems = list.getItems();
        String fileName;
        Path source, target;
        File folder = new File(dir + File.separator);
        if (!folder.exists()) {
            folder.mkdir();
        }
        try
        {
            for(int i = 0; i < list.getItemCount(); i++) 
            {

                // do something with non UI widgets
            }

            list.removeAll();

        }
        catch(IOException | InterruptedException e)
        {
            //print error

        }
    } 
```

为什么我有无效的线程访问？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T19:35:10.743

List 是一个 SWT 小部件，如果您在 UI 线程（在本例中为您的主线程）之外调用它的 getItems() 方法，则会收到 ERROR_THREAD_INVALID_ACCESS SWTException。这在[List API](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/List.html)中定义： ERROR_THREAD_INVALID_ACCESS - 如果没有从创建接收器的线程调用

创建接收者的线程，是创建显示的线程。如果 Display 不存在，第一次调用 Display.getDefault() 会创建一个。因此，调用 open() 方法的主线程是 UI 线程。如果您包装 threadMethod() 的内容，您的代码将起作用：

```
private void threadMethod() {
    Display.getDefault().asyncExec(new Runnable() {
        public void run() {
            // threadMethod contents
        }
    });
} 
```

然后它将在 UI 线程中执行。

# sql-server - T-SQL - 使用了非最优计划 - WHERE 子句应该被短路

> ID：15851567
> 
> 赞同：5
> 
> 时间：2013-04-06T13:32:13.813
> 
> 标签：sql-server, tsql, sql-execution-plan

我们有许多“搜索存储过程”，它们采用多个可为空的参数来搜索不同表中的数据行。它们通常是这样构建的：

```
SELECT      *
 FROM       Table1 T1
 INNER JOIN Table2 T2
     ON     T2.something = T1.something
 WHERE      (@parameter1 IS NULL OR T1.Column1 = @parameter1)
        AND (@parameter2 IS NULL OR T2.Column2 = @parameter2)
        AND (@parameter3 IS NULL OR T1.Column3 LIKE '%' + @parameter3 + '%')
        AND (@parameter4 IS NULL OR T2.Column4 LIKE '%' + @parameter4 + '%')       
        AND (@parameter5 IS NULL OR T1.Column5 = @parameter5) 
```

这最多可以处理 30-40 个参数，我们注意到，即使只提供了 parameter1，执行计划也会对其他表进行索引扫描，这会显着降低查询速度（几秒钟）。测试告诉我们，只保留 WHERE 语句的第一行可以使查询即时。

1.  我已经读到shortcuiting 是不可能的，但是是否有解决方法或方法来构建可能更有效的查询？

2.  我们目前通过使用相同 SELECT/FROM/JOINS 的不同版本但在 WHERE 子句中使用不同的参数集来解决这个问题，并且根据传递的参数，我们选择要执行的正确选择语句。这是漫长、混乱且难以维护的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:26:41.110

SQL Server 中的查询计划经过编译和存储以供重复使用。即使 SQL Server 看到您的参数是`null`它，它也必须提出一个查询计划，该计划将适用于它们所在的情况`not null`。

查询提示`option (recompile)`是在 SQL Server 2005 中引入的，但直到 SQL Server 2008 才真正对您在此处的查询类型产生影响。

每次重新编译查询时，它都不会存储在查询计划缓存中，因此 SQL Server 可以自由优化针对`null`.

在此处阅读有关它的更多信息[T-SQL 中的动态搜索条件](http://www.sommarskog.se/dyn-search.html)

您可以测试一些示例代码以查看查询计划的差异。对 SP 的第一次调用将执行索引查找，第二次将执行聚集索引扫描。

```
create table T
(
  ID int identity primary key,
  Col1 int,
  Col2 int
);

go

create index IX_T on T(Col1);

go

create procedure GetT
  @Col1 int,
  @Col2 int
as

select ID
from T
where (Col1 = @Col1 or @Col1 is null) and
      (Col2 = @Col2 or @Col2 is null)
option (recompile);

go

exec GetT 1, null
exec GetT 1, 1 
```

# python - 如何在某个字符之前获取字符串的最后一部分？

> ID：15851568
> 
> 赞同：68
> 
> 时间：2013-04-06T13:32:20.497
> 
> 标签：python, string, python-2.7, split, slice

我正在尝试在某个字符之前打印字符串的最后一部分。

我不太确定是否使用字符串 .split() 方法或字符串切片或其他方法。

这是一些不起作用的代码，但我认为显示了逻辑：

```
x = 'http://test.com/lalala-134'
print x['-':0] # beginning at the end of the string, return everything before '-' 
```

请注意，末尾的数字大小会有所不同，因此我无法从字符串末尾设置确切的计数。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-04-06T13:47:57.423

您正在寻找[`str.rsplit()`](http://docs.python.org/2/library/stdtypes.html#str.rsplit)，有一个限制：

```
print x.rsplit('-', 1)[0] 
```

`.rsplit()`从输入字符串的末尾搜索拆分字符串，第二个参数将拆分的次数限制为一次。

另一种选择是使用[`str.rpartition()`](https://docs.python.org/2/library/stdtypes.html#str.rpartition)，它只会分裂一次：

```
print x.rpartition('-')[0] 
```

对于只拆分一次，`str.rpartition()`也是更快的方法；如果您需要多次拆分，则只能使用`str.rsplit()`.

演示：

```
>>> x = 'http://test.com/lalala-134'
>>> print x.rsplit('-', 1)[0]
http://test.com/lalala
>>> 'something-with-a-lot-of-dashes'.rsplit('-', 1)[0]
'something-with-a-lot-of' 
```

和同样的`str.rpartition()`

```
>>> print x.rpartition('-')[0]
http://test.com/lalala
>>> 'something-with-a-lot-of-dashes'.rpartition('-')[0]
'something-with-a-lot-of' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-18T14:24:41.477

***split***和***partition***之间的区别是 split 返回**没有**分隔符的列表，并将在字符串中得到分隔符的地方进行拆分，即

```
x = 'http://test.com/lalala-134-431'

a,b,c = x.split(-)
print(a)
"http://test.com/lalala"
print(b)
"134"
print(c)
"431" 
```

并且***partition*****将仅使用第一个**分隔符划分字符串，并且仅在列表中返回 3 个值

```
x = 'http://test.com/lalala-134-431'
a,b,c = x.partition('-')
print(a)
"http://test.com/lalala"
print(b)
"-"
print(c)
"134-431" 
```

因此，当您想要最后一个值时，您可以使用***rpartition***它以相同的方式工作，但它会从字符串末尾找到分隔符

```
x = 'http://test.com/lalala-134-431'
a,b,c = x.rpartition('-')
print(a)
"http://test.com/lalala-134"
print(b)
"-"
print(c)
"431" 
```

# java - 将字符串数组作为 POST 传递给 PHP

> ID：15851574
> 
> 赞同：8
> 
> 时间：2013-04-06T13:32:42.690
> 
> 标签：java, php, json, post, google-cloud-messaging

我正在尝试将字符串数组作为 POST 数据传递给 PHP 脚本，但不确定该怎么做。

到目前为止，这是我执行 PHP 脚本的代码：

我试图传递数组的地方：

```
nameValuePairs.add(new BasicNameValuePair("message",message));
String [] devices = {device1,device2,device3};
nameValuePairs.add(new BasicNameValuePair("devices", devices));// <-- Can't pass String[] to BasicNameValuePair
callPHPScript("notify_devices", nameValuePairs); 
```

调用 PHP 脚本：

```
public String callPHPScript(String scriptName, List<NameValuePair> parameters) {
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("http://localhost/" + scriptName);
    String line = "";
    StringBuilder stringBuilder = new StringBuilder();
    try {
        post.setEntity(new UrlEncodedFormEntity(parameters));

        HttpResponse response = client.execute(post);
        if (response.getStatusLine().getStatusCode() != 200)
        {
            System.out.println("DB: Error executing script !");
        }
        else {
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent()));
            line = "";
            while ((line = rd.readLine()) != null) {
                stringBuilder.append(line);
            }
        }

    } catch (IOException e) {
        e.printStackTrace();
    }
    System.out.println("DB: Result: " + stringBuilder.toString());
    return stringBuilder.toString();
} 
```

和有问题的 PHP 脚本：

```
<?php
include('tools.php');
// Replace with real BROWSER API key from Google APIs
$apiKey = "123456";

// Replace with real client registration IDs 
$registrationIDs = array($_POST[devices]); <-- Where I want to pass array to script

// Message to be sent
$message = $_POST['message'];

// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';

$fields = array(
                'registration_ids'  => $registrationIDs,
                'data'              => array( "message" => $message ),
                );

$headers = array( 
                    'Authorization: key=' . $apiKey,
                    'Content-Type: application/json'
                );

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);

print_as_json($result);
?> 
```

有任何想法吗？谢谢 ！

**编辑**

我正在尝试以下但仍然没有快乐：

```
public void notifyDevices(Message message) {

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    List<String> deviceIDsList = new ArrayList<String>();
    String [] deviceIDArray;

    //Get devices to notify
    List<JSONDeviceProfile> deviceList = getDevicesToNotify();

    for(JSONDeviceProfile device : deviceList) {
        deviceIDsList.add(device.getDeviceId());
    }

    //Array of device IDs
    deviceIDArray = deviceIDsList.toArray(new String[deviceIDsList.size()]);
    for(String deviceID : deviceIDArray) {

        nameValuePairs.add(new BasicNameValuePair("devices[]", deviceID));

    }

    //Call script
    callPHPScript("GCM.php", nameValuePairs);
} 
```

这就是我所有的“错误报告”......

```
 HttpResponse response = client.execute(post);
        if (response.getStatusLine().getStatusCode() != 200)
        {
            System.out.println("DB: Error executing script !");
        } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-06T13:51:08.833

要在查询字符串中将数组传递给 php，您应该添加`[]`到标识符并将每个项目添加为单独的条目，所以这样的事情应该可以工作：

```
nameValuePairs.add(new BasicNameValuePair("devices[]", device1));
nameValuePairs.add(new BasicNameValuePair("devices[]", device2));
nameValuePairs.add(new BasicNameValuePair("devices[]", device3)); 
```

现在，`$_POST['devices']`在 php 端将包含一个数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T13:41:59.583

我认为您应该对您的设备数组进行 json 编码，以便获得一个可以将其传递给 BasicNameValuePair(...) 的字符串。在您的 php 代码中，您只需要使用 json_decode 来取回一个数组。

```
JSONArray devices = new JSONArray();
devices.put(device1);
devices.put(device2);
devices.put(device3);

String json = devices.toString();
nameValuePairs.add(new BasicNameValuePair("devices", devices)); 
```

在您的 php 代码中：

```
$devices = $_POST['devices'];
$devices = json_decode($devices); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T13:35:03.543

`$_POST`首先，在 PHP 中访问数组时缺少单引号。换行

```
$registrationIDs = array($_POST[devices]); 
```

到：

```
$registrationIDs = array($_POST['devices']); 
```

您应该使用 ini 值启用错误日志记录或 PHP 错误消息的输出以进行调试，`display_errors`以便注意到此类错误。`log_errors``error_reporting`

* * *

但甚至`array($_POST['devices'])`不会做预期的事情。`array(...)`是 php 中的数组初始化构造。这意味着您只需将 ($_POST['devices']) 包装到另一个数组中。

...想看看`var_dump($_POST);`. 这将使我有机会进一步提供帮助..

# c# - 将数据网格值绑定到另一个数据网格

> ID：15851576
> 
> 赞同：2
> 
> 时间：2013-04-06T13:32:50.817
> 
> 标签：c#, wpf, data-binding, datagrid, datagridview

我有两个数据网格。第一个包含列：

```
name, price, rank, rating, groupNumber ..... and many other columns 
```

第二个包含：

```
name, rating, groupNumber 
```

假设我在第一个数据网格中选择了一行，并且该行`GroupNumber`是`6`，有没有办法使用第二个数据网格中的数据绑定显示所有 groupNumer=6 的行？

做这种事情的最好方法是什么？

现在我通过选择与第一个网格中的选定行具有相同组号的所有行然后将这些行复制到另一个数据表然后将其设置为第二个网格的源来做到这一点。

这是我现在在为第一个网格更改行选择时所做的事情：

```
int gnum = //get the selected row gnum value
secondgrid.ItemsSource = firstgrid.Select(String.Format("gnum={0}", gnum)).CopyToDataTable().DefaultView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:36:36.983

您可以将相同的源绑定到两个 DataGrid，但在第二个中使用基于第一个 DataGrid 中当前行的[过滤器](http://msdn.microsoft.com/en-us/library/ms752348.aspx)

# scrum - Scrum 估计单元

> ID：15851578
> 
> 赞同：-1
> 
> 时间：2013-04-06T13:33:03.037
> 
> 标签：scrum

我的团队用小时来估计任务，这与 TFS SCRUM 模板命名法有关，但是我最近听说任务应该在某个抽象单元中估计，并且使用小时是邪恶的，推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:45:36.857

如果您的团队速度也基于小时，您*可以*以小时为单位进行估算，因为这是您决定在一个 sprint 中可能交付多少积压项目的方式。

但是没有*必要*使用小时，它有时会给出一种错误的精确感。

如果您使用抽象单位来进行估算和速度，您（或者更准确地说，利益相关者和其他不了解敏捷的人）不会误以为时间是一个精确的衡量标准。

混淆源于这样一个事实，即速度是每个冲刺的工作单位，如果您的冲刺始终是固定大小（例如，四个星期，这将始终被预期），那么“每个冲刺的小时数”将不会改变4 周乘以 40 小时，按一定数量的工人计算）。

但是，随着团队变得更加熟练，或者经验丰富的人被经验较少的人取代，或者一半的团队在假期休假一个月，您的速度实际上*会随着时间的推移而改变。*

这就是故事点的整个概念存在的原因。他们提供了这样一个抽象的度量，以避免这种混淆。您只需在故事点中估算您的积压项目，并记录团队在每个 sprint 中交付的点数（速度）。

# algorithm - 是否有用于字符串列表模糊重复数据删除的有效算法？

> ID：15851582
> 
> 赞同：4
> 
> 时间：2013-04-06T13:33:31.907
> 
> 标签：algorithm, duplicates

例如，我有一个很长的字符串列表，每个字符串大约有 30-50 个字符，我想删除与该列表中的其他字符串相似的字符串（只留下一个重复项）。

我查看了[各种字符串相似性算法](http://en.wikipedia.org/wiki/Category:String_similarity_measures)，例如 Levenstein 距离和[本文](http://www.catalysoft.com/articles/StrikeAMatch.html)中介绍的方法。它们确实有效，但速度慢得令人痛苦——我想出的最佳算法具有 O(n^2) 复杂性，并且需要约 1.5 秒来处理包含 3000 个字符串的列表。

有没有一些快速的方法来删除这些列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:40:31.087

如果您的相似性度量很强（例如 Levenshtein 距离 1），那么您可以按顺序处理您的字符串列表，为当前字符串生成所有可能的“关闭”字符串并在哈希表中查找该关闭字符串。如果存在，请跳过原始字符串。如果没有，则将其输出并将其添加到哈希表中。

该算法依赖于能够生成所有与字符串相近的字符串，并且不会太多。（这就是我上面所说的“强”的意思。）

作为一种可能的优化，您可以在哈希表中存储的不仅仅是原始字符串。例如，如果您想要 Levenshtein 距离 3，您可以将距离输出字符串的所有字符串距离 1 存储在哈希表中，然后在检查新字符串时查找距离 2 的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T19:18:34.117

在匹配 DNA 字符串（或重新组装片段）时，经常会出现此问题。第一种方法是将字符串拆分为`kmer`s 子字符串，*例如*4 个相邻的字母。所以

```
abcdefgh 
```

会成为：

```
abcd + bcde + cdef + defg + efgh 
```

对于完整的*字典*，这些子字符串可以输入到哈希表中，每个子字符串作为*有效负载*携带包含它们的原始字符串（它们的数字）的列表（可能还有可以找到它们的偏移量）

*要进行搜索，请将待测字符串与**字典*一样对待，并在哈希表中查找其片段。现在，一次*命中*将导致找到所有五个片段，并具有正确的偏移量。部分命中将产生少于五个片段，但具有正确的偏移量。

当然，搜索会导致很多假阴性命中，但是通过组合（逻辑与）*倒排索引*列表，并且仅选择*大约*正确索引处的命中，事情会很快变得独特。

对于 OP 问题中的问题大小，运行时间可能是几（几十）毫秒。

顺便说一句：作为这种方法的副作用，替换的行为几乎与 indels 相同。在该示例中，他们将 1 个（在末端）到 4 个（在中间）kmer 匹配。对于较大的字符串，这不是问题，对于小字符串（就像在示例中一样（您可以使用较小的片段）

更新：我刚刚阅读了链接，看来他们也使用了 2-mers（并在其中提供了一些统计数据）

# android - 通过 Wifi 将某些设备连接到 Android 或 Iphone 智能手机是否可行？

> ID：15851583
> 
> 赞同：0
> 
> 时间：2013-04-06T13:33:39.160
> 
> 标签：android, iphone, wifi

我正在做一项研究，因为我想开发一个可以连接不同设备的应用程序。

该应用程序可以是 Android 或 iPhone 智能手机。它将用于山地设备设备和传感器，因此没有可用的 wifi 路由器。它需要长距离，所以蓝牙不是一个选择。

我正在考虑在智能手机中创建一个热点并将设备连接到这个热点。在这种情况下，我正在考虑这样做的方式：

*   以编程方式在智能手机中创建热点。在 Android 中，像这样： http: [//www.whitebyte.info/android/android-wifi-hotspot-manager-class](http://www.whitebyte.info/android/android-wifi-hotspot-manager-class)
*   在设备中设置热点的名称，以便他们知道在哪里连接。按下按钮，他们连接到热点。
*   android 设备广播它的 IP，所以设备知道在哪里连接。
*   设备连接并发送数据。

我认为这可能是一个真实的场景，但我担心：

*   也许我的场景中存在我没有看到的设计缺陷。
*   设备上的电池：电池在“密集”使用 WIFI 时的表现如何？（例如，每五分钟发送少量字节的数据）。
*   在 iPhone 上复制此场景的能力。可以做到吗，还是应该用户手动创建热点来做到这一点？
*   任何其他我想不到的反馈。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:50:35.937

是的，在 Android 上，所有这些都可以完成并且应该可以正常工作。

是的，您可以在客户端中以编程方式配置热点信息。

建立连接的另一种方法（除了热点广播其IP）是热点读取它的ARP缓存，即解析缓存以找到所有连接的客户端的IP。

电池可能是个问题。这听起来不像是“密集”使用 wifi，但它仍然会消耗相当多的电池（我发现即使只是启用热点也会消耗电池）。

我不知道 iPhone 的答案。

# php - 致命错误：调用未定义的方法 mysqli_result::fetch_all() 以任何方式使其与 php 5.2 向后兼容

> ID：15851587
> 
> 赞同：0
> 
> 时间：2013-04-06T13:33:54.470
> 
> 标签：php, mysqli

我将代码从测试服务器移动到 hostgator 并收到此错误：

```
Fatal error: Call to undefined method mysqli_result::fetch_all() 
```

我已经用 fetch_all 编写了这么多行，要全部改变它会很烦人。

解决此问题的最简单方法是什么？

示例 php：

```
function get_all_map_users() {
        $mysqli = new mysqli(DB_HOST,DB_USER,DB_PASSWORD,DB_NAME);
        if ($mysqli->connect_error) {
            //Failed to connect
            die('Could not connect: ' . $mysqli->connect_error . ' - ' . $mysqli->connect_errno);
        }
        //Success
                            $result = $mysqli->query("SELECT * FROM names");
                            $rows = $result->fetch_all(MYSQLI_ASSOC);

                            //Clear result set
                            $result->free();
        //End mysql query
        //Close mysqli connection
        $mysqli->close();

        return $rows;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:36:31.923

在 Hostgator 上启用 PHP 5.3：http: [//support.hostgator.com/articles/hosting-guide/hardware-software/php-5-3](http://support.hostgator.com/articles/hosting-guide/hardware-software/php-5-3)。

# html - 间距表格框

> ID：15851591
> 
> 赞同：1
> 
> 时间：2013-04-06T13:34:01.587
> 
> 标签：html, forms, css

我的页面上有一个表格，我试图在文本框之间留出更多空间。

我以各种方式尝试了“填充”，但它们似乎组合在一起，无论我尝试什么都会影响所有 4 个。

*   [这页纸](http://tranceil.co.il/blu4dance/presign/)

如果我没记错的话，这是表单的 CSS 框：

```
.form-inner
{
    /*background:url('../img/content-bg-top.png') no-repeat left top;*/
    min-height:278px;
    margin:-40px 0 0 0;
    padding:72px 72px 21px 36px;
    position:relative;
    z-index:1;
    font-size:14px;

    -webkit-text-shadow:0 1px 0 rgba(255,255,255,0.4);
    -moz-text-shadow:0 1px 0 rgba(255,255,255,0.4);
    text-shadow:0 1px 0 rgba(255,255,255,0.4);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:40:07.147

`padding`值是对象本身与内部内容之间的距离。

您应该`margin`为内容中的每个文本框使用 key，这些文本框被归类为 form-inner。

```
.form-inner input[type=text]
{
    margin: 10px 20px;
} 
```

边距定义了对象本身与其旁边的其他对象之间的距离。

```
margin: [top] [right] [bottom] [left] 
```

![一个很好的示意图示例](https://i.stack.imgur.com/Co86R.gif)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:40:22.477

来自 styl.css（第 317 行） `.form-field { ... margin: 0 0 3px }`（仅下边距...3px）

`.form-field`所有 4 个输入框都在带有类的容器内。

一个修复：

```
.form-field { margin:0 10px 3px }
.form-field:first-child { margin-left:0 } 
```

（这可能需要右边距。我从未使用过从右到左的文本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T13:41:02.777

您可以在类上添加`margin-right`属性`.form-field`，但请记住在表单上设置更大的宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T13:41:36.457

我认为`.form-inner`是您表格周围的框。如果您想在文本框之间留出更多空间，您应该为`.form-field`类设置样式。

例如：

```
.form-field {
    padding-right:10px;
} 
```

# c++ - 从 boost::phoenix::lambda 中调用函数

> ID：15851598
> 
> 赞同：4
> 
> 时间：2013-04-06T13:34:37.643
> 
> 标签：c++, boost, c++11, boost-phoenix

我正在尝试在`boost::phoenix`缺乏 C++11 支持的旧编译器上模拟 C++ lambda 表达式，并且我无法从 lambda 表达式中调用简单函数。

C++11 版本：

```
[](unsigned a) { foo( a ); }( 12678u );   // calls foo( 12678u ) 
```

我的 Phoenix Lambda 代码如下：

```
#include <cstdint>
#include <iostream>
#include <boost/phoenix.hpp>

namespace ph = boost::phoenix;
using ph::local_names::_a;
using ph::placeholders::arg1;

void foo( uint32_t val )
{
   std::cout << "\t" << __func__ << "( " << val << " ) called...\n";
}

int main()
{
   auto myLambda = ph::lambda( _a = arg1 )
      [
          foo( _a )
          //std::cout << ph::val( "Called with: " ) << _a << ph::val( "\n" )
      ]( 567u );

   myLambda();

    return 0;
} 
```

这会产生以下编译器错误：

```
lambda-ex.cpp: In function ‘int main()’:
lambda-ex.cpp:18:19: error: cannot convert ‘const _a_type {aka const boost::phoenix::actor<boost::proto::exprns_::basic_expr<boost::proto::tag::terminal, boost::proto::argsns_::term<boost::phoenix::detail::local<boost::phoenix::local_names::_a_key> >, 0l> >}’ to ‘uint32_t {aka unsigned int}’ for argument ‘1’ to ‘void foo(uint32_t)’ lambda-ex.cpp:20:15: error: unable to deduce ‘auto’ from ‘&lt;expression error>’ 
```

**如何从 Phoenix lambda 表达式中调用函数？**

我希望能够以`phoneix::lambdas`与过去使用 C++11 lambda 相同的方式使用，例如：

```
auto lambda1 = [&]( uint32_t arg )
              {
                  func1( "Some Stuff", arg );
                  func2( "Some More Stuff", aValueFromLocalScope, arg );
                  func3( "Some Stuff", anotherValueFromLocalScope, arg );
              };

someFuncImpl( aParam, lambda1 ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T14:17:13.827

`ph::lambda`是这个工作的错误工具（`ph::lambda`是一个在凤凰表达式中创建嵌套 lambda 表达式的工具）。Phoenix表达式*已经*是函数，所以你需要做的就是找到一种使用phoenix表达式调用函数的方法（bind），找到一种方法可以顺序执行多个操作（operator，），并找到一种引入局部变量的方法（让）。把这一切放在一起给出：

```
#include <cstdint>
#include <iostream>
#include <boost/phoenix.hpp>

namespace ph = boost::phoenix;
using ph::local_names::_a;
using ph::placeholders::arg1;

#define FOO(name) void name( uint32_t val ) {\
    std::cout << "\t" << __func__ << "( " << val << " ) called...\n";\
}
FOO(foo)
FOO(bar)
FOO(baz)

int main()
{
    auto&& myLambda = ph::let(_a = arg1)
      [
          ph::bind(foo, _a),
          ph::bind(bar, _a),
          ph::bind(baz, _a)
      ];

    myLambda(342);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T13:57:19.093

你的例子是否微不足道并不重要。调用非 Phoenix 函数需要使用`phoenix::bind`. 时期。

Phoenix 风格的 lambda 最有效地用于基于运算符重载的简单表达式。调用任意函数看起来很难看。

C++11 没有添加 lambdas 作为语言特性，因为它很有趣。他们这样做是因为各种图书馆解决方案在某种程度上都不够充分。您已经发现了 Phoenix 的不足之处之一。

# python - 制表符分隔的列文件中的 Python 搜索功能

> ID：15851600
> 
> 赞同：0
> 
> 时间：2013-04-06T13:34:56.777
> 
> 标签：python, input, raw-input, function

```
while True:
    try:
        OpenFile=raw_input(str("Please enter a file name: ")) 
        infile=open(OpenFile,"r")
        contents=infile.readlines()
        infile.close()

        user_input = raw_input(str("Enter A=<animal> for animal search or B=<where lives?> for place of living search: \n")) 
        if user_input.startswith("A="):
            def find_animal(user_input,column):
                return next(("\t".join(line) for line in contents
                             if line[column-1]==user_input),None)
            find_animal(user_input[1:]) 
            print str((find_animal(user_input[1:], "WHO?"))) #"Who?" is the name of the first column.

        else:
            print "Unknown option!"

    except IOError:
        print "File with this name does not exist!" 
```

1.输入动物的名字。

2.Program 在第一列中搜索具有此特定名称的行。

3.Program 在第一列中打印具有此名称的行。

我的功能在这里似乎无法正常工作。你能帮我找出错误吗？谢谢！

**编辑**

```
 def ask_for_filename():
         filename=str(raw_input("Please enter file name: "))
         return filename

      def read_data(filename): 
         contents=open(filename,"r")
         data=contents.read()
         return data

      def  column_matches(line, substring, which_column):  
         for line in data:
             if column_matches(line, substring, 0):
                print line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:57:37.080

大块代码很难阅读和调试，尝试将代码拆分为更小的函数，例如：

```
def ask_for_filename():
    #left as an exercise
    return filename

def read_data(filename):
    #left as an exercise
    return data

def column_matches(line, substring, which_column):
    #left as an exercise

def show_by_name(name, data):
    for line in data:
        if column_matches(line, name, 0):
            print line

def do_search(data):
    propmt = "Enter A=<animal> for animal search or B=<where lives?> for place of living search: \n"
    user_input = raw_input(prompt)
    if user_input.startswith('A='):
        show_by_name(user_input[2:], data)

# main program

filename = ask_for_filename()
data = read_data(filename)
while True:
    do_search(data) 
```

分别测试和调试这些功能，直到您确定它们可以正常工作。然后编写并测试主程序。

`column_matches()``which_column`如果a 中的某些列 ( )`line`等于 ，则应该返回 true `substring`。例如，`column_matches("foo\tbar\tbaz", "bar", 1)`是`True`。为了实现这一点

*   用分隔符分割一行 - 这给了我们一个值列表
*   获取列表的第 n 个元素
*   将其与替代品进行比较
*   如果它们相等则返回 True 否则返回 False

把它们放在一起：

```
def column_matches(line, substring, which_column):
    delimiter = '\t'
    columns = line.split(delimiter)
    value = columns[which_column]
    if value == substring:
        return True
    else:
        return False 
```

或者，以更简洁和“pythonic”的形式：

```
def column_matches(line, substring, which_column):
    return line.split('\t')[which_column] == substring 
```

# php - 从 PHP Foreach 语句中的数组中获取一个键

> ID：15851603
> 
> 赞同：2
> 
> 时间：2013-04-06T13:35:15.390
> 
> 标签：php, joomla2.5, virtuemart

我不明白我的代码有什么问题。我正在 Joomla 下制作一个网站模板！2.5.9 和 VirtueMart 2.0.20b。

我正在处理**Category page**`tplname/html/com_virtuemart/category/default.php`和**Product page**`tplname/html/com_virtuemart/productdetails/default.php`。

在这两个页面上，我需要以百分比显示税：即：20% 税。

对于产品页面，它是：

```
$product->prices['Tax']; 
```

对于类别页面，它是：

```
<?php foreach ($products as $product):?>
    <li>
        <?php echo $product->prices['Tax'];?>
    </li>
<?php endforeach;?> 
```

`var_dump()`对这两个都做一个它给了我这个输出：

```
array
  204 => // <- Remember this number as FIRST ARRAY
    array
      0 => string 'TAXNAME_TITLE' (length=12)
      1 => string '10.0000' (length=7)  // <- I need this value!
      2 => string '+%' (length=2)
      3 => string '1' (length=1)
      4 => string '47' (length=2)
      5 => string '' (length=0)
      6 => string '1' (length=1)
      7 => string '204' (length=3) 
```

为了获得我需要的价值，我这样做：

```
$productPriceTaxUnit = reset($product->prices['Tax']);
$productPriceTaxUnit = $productPriceTaxUnit['1'];
$productPriceTaxUnit = JText::_('COM_VIRTUEMART_PRODUCT_BASEPRICE_WITHTAX') . ' ' .number_format($productPriceTaxUnit, '2', '.', '') . '%';
echo $productPriceTaxUnit; 
```

它工作正常，但在`FIRST ARRAY`等于的类别页面上给`204`了我一个错误，但如果它等于，`1`那么一切都很好。

有人看到我在这里做错了一步吗？

提前致谢

====== ** 第一次更新** ========

这是一个 SQL 调试：

```
SELECT SQL_CALC_FOUND_ROWS l.`virtuemart_product_id`
  FROM `ar9hu_virtuemart_products_sk_sk` as l JOIN `ar9hu_virtuemart_products` AS p using (`virtuemart_product_id`)
  LEFT JOIN `ar9hu_virtuemart_product_categories` as pc
  ON p.`virtuemart_product_id` = `pc`.`virtuemart_product_id`
  LEFT JOIN `ar9hu_virtuemart_categories_sk_sk` as c
  ON c.`virtuemart_category_id` = `pc`.`virtuemart_category_id`
  LEFT JOIN `ar9hu_virtuemart_product_shoppergroups`
  ON p.`virtuemart_product_id` = `ar9hu_virtuemart_product_shoppergroups`.`virtuemart_product_id`
  LEFT
  OUTER JOIN `ar9hu_virtuemart_shoppergroups` as s
  ON s.`virtuemart_shoppergroup_id` = `ar9hu_virtuemart_product_shoppergroups`.`virtuemart_shoppergroup_id`
  WHERE ( p.`published`="1"
  AND `pc`.`virtuemart_category_id` = 9
  AND `pc`.`virtuemart_category_id` > 0
  AND ( s.`virtuemart_shoppergroup_id`= "1" OR s.`virtuemart_shoppergroup_id` IS NULL ) )
  group by p.`virtuemart_product_id`
  ORDER BY `p`.product_sku ASC
  LIMIT 0, 10 
```

====== ** 第二次更新** ========

这是我在类别页面上遇到的错误：

```
 Notice: Trying to get property of non-object in D:\wamp\www\baranik\templates\baranik\html\com_virtuemart\category\default.php on line 119
Call Stack
#   Time    Memory  Function    Location
1   0.0002  652096  {main}( )   ..\index.php:0
2   0.0714  9131016 JSite->dispatch( )  ..\index.php:42
3   0.0749  9542784 JComponentHelper::renderComponent( )    ..\application.php:197
4   0.0785  9691392 JComponentHelper::executeComponent( )   ..\helper.php:351
5   0.0789  9787480 require_once( 'D:\wamp\www\baranik\components\com_virtuemart\virtuemart.php' )  ..\helper.php:383
6   0.0980  12819808    JController->execute( ) ..\virtuemart.php:99
7   0.0980  12819888    VirtueMartControllerCategory->display( )    ..\controller.php:761
8   0.0980  12821880    JController->display( ) ..\category.php:60
9   0.1006  13209152    VirtuemartViewCategory->display( )  ..\controller.php:722
10  0.2021  19796592    JView->display( )   ..\view.html.php:244
11  0.2021  19796592    JView->loadTemplate( )  ..\view.php:205
12  0.2031  19910088    include( 'D:\wamp\www\baranik\templates\baranik\html\com_virtuemart\category\default.php' ) ..\view.php:649 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:51:12.803

我不确定我是否正确理解了您的问题，但我可以回答您问题的标题。

'从 PHP Foreach 语句中的数组中获取一个键'

您可以遍历数组并使用以下方法获取键和值：

```
foreach($array as $key => $value){
    echo "$key has a value of $value<br>";
} 
```

# python - 在 Python 中为位运算符添加 '=' 有什么作用？（即 '<<=' 而不是 '<<'）

> ID：15851609
> 
> 赞同：4
> 
> 时间：2013-04-06T13:35:51.063
> 
> 标签：python, bitwise-operators

`<<=`和运算符是什么`|=`意思 Python？我猜他们是按位运算符。我知道运算符`|`（按位或）和`<<`（位移位），但我不知道它们与`=`.

我在[这段](http://learn.adafruit.com/reading-a-analog-in-and-controlling-audio-volume-with-the-raspberry-pi/script)代码中找到了它。下面的代码属于该代码。

```
commandout = adcnum
commandout |= 0x18  # start bit + single-ended bit
commandout <<= 3    # we only need to send 5 bits here
for i in range(5):
    if (commandout & 0x80):
        GPIO.output(mosipin, True)
    else:
        GPIO.output(mosipin, False)
    commandout <<= 1
    GPIO.output(clockpin, True)
    GPIO.output(clockpin, False) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T13:36:49.400

两者都是*就地*分配；它们有效地为您`name = name op right-hand-expression`提供公正的空间`name op= right-hand-expression`。

因此，对于您的示例，您可以将其解读为：

```
commandout = commandout | 0x18
commandout = commandout << 3 
```

这有点过于简单化了，因为这些操作有专门的钩子，左边的对象可以选择做一些特别的事情；`list += rhs`真的`list.extend(rhs)`是例如，不是`list = list + rhs`。就地运算符为可变对象提供了应用更改`self`而不是创建新对象的机会。

但是，对于您的示例，我假设`commandout`是一个 int，您有不可变的值，并且就地操作*必须*返回一个新值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:37:02.463

这些是*到位的*位算术运算符。他们使用与 C 相同的样式运算符修改 LH 值（如果 lh 是不可变的，则将 lh 值重新分配为新的计算值）。

Python 称它们为[移位运算符](http://docs.python.org/2/reference/expressions.html#shifting-operations)( `<<`and `>>`) 和[二进制位运算符](http://docs.python.org/2/reference/expressions.html#binary-bitwise-operations)( `&`, `^`and `|`)。

添加`=`after 运算符后，赋值返回到原来的 LH 名称，`|=`原地左移`or`和`<<=`原地左移也是如此。

所以`x<<=3`等于`x=x<<3`或将 x 位左移 3 位的值。

位移：

```
>>> b=0x1
>>> b<<=3
>>> bin(b)
'0b1000'

>>> b>>=2
>>> bin(b)
'0b10' 
```

位或：

```
>>> bin(b)
'0b1'
>>> bin(c)
'0b100'
>>> c|=b
>>> bin(c)
'0b101' 
```

从技术上讲，如果 LH 值是不可变的，则结果将反弹到 LH 名称，而不是值的实际就地转换。

这可以通过检查项目的地址来显示：

```
>>> id(i)
4298178680       # original address (in CPython, id is the address)
>>> i<<=3
>>> id(i)
4298178512       # New id; new int object created 
```

与使用 C 不同（在本例中为[ctypes](http://docs.python.org/2/library/ctypes.html)）：

```
>>> import ctypes
>>> i=ctypes.c_int(1)
>>> ctypes.addressof(i)
4299577040
>>> i.value<<=3
>>> ctypes.addressof(i)
4299577040 
```

由于 C 整数是可变的，因此位移是在没有 C int 的新地址的情况下完成的。

# c# - 单击“浏览”后如何使 FileUpload 控件上传文件？

> ID：15851619
> 
> 赞同：5
> 
> 时间：2013-04-06T13:36:32.927
> 
> 标签：c#, asp.net, file-upload

到目前为止，我一直在使用 2 个控件（文件上传和附加按钮）。在 fileUpload 控件中选择文件后，用户必须通过按保存按钮来接受他的选择。

这是按钮的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {
            FileUpload1.SaveAs(Server.MapPath("~/file.jpg"));
            Label1.Text = Server.MapPath("~/file.jpg");
            Image1.ImageUrl = "file.jpg";
        }
    } 
```

我想知道是否有办法避免使用该按钮，因此 FileUpload 控件的按钮将完成附加按钮的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:40:40.327

该控件在浏览器中`FileUpload`呈现一个。`<input type="file>`您可以使用 javascript[`change`](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)事件来触发上传。

首先确保您在页面`load`中注册了一个事件处理程序`body`：

```
<body onload="body_onload()"> 
```

并在您的事件处理程序中添加此代码：

```
<script type="text/javascript">
    function body_onload()
    {
        ...

        $get('<%=FileUpload.ClientID%>').onchange = function() { 
            $get('<%=this.Page.Form.ClientID%>').submit(); 
        };
    }
</script> 
```

* * *

或者使用纯 jQuery 来做到这一点，把它放在`head`你的页面中（如果你还没有包含 jQuery）：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

然后使用此代码绑定到事件（分别用您的和元素的 id替换`#fileUpload1`和）：`#form1``FileUpload``Form`

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#fileUpload1").change(function() {
            $("#form1").submit();
        });
    });
</script> 
```

# jquery - 用 jquery 和 json ASP.Net MVC 填充 DropDownList

> ID：15851627
> 
> 赞同：1
> 
> 时间：2013-04-06T13:37:39.247
> 
> 标签：jquery, asp.net-mvc, json

我认为我有这段代码：

```
<script>
    var isChanged = false;
    $(function () {
        $('#stageOne').change(function () {
                $.ajax({
                    url: "/Shop/ChangeStageTwo/",
                    data: { item: $("#stageOne option:selected").text() },
                    type: 'post',
                    success: function (myJSONdata) {
                        $("#stageTwo").html("");      
                        var items = myJSONdata;
                        for (var i = 0; i < items.length; i++) {
                            var item = items[i];
                            var optionhtml = '<option value="' + item.text + '">' + items[i] + '</option>';
                            $("#stageTwo").append(optionhtml);
                        }
                 }
            });

        });
    });
</script> 
```

这是我的 ChangeStageTwo 函数：

```
 public JsonResult ChangeStageTwo(string item)
    {
        // Do something...          

        var query = from f in db.Stages
                    where f.Code.Contains(tempDelivCod) && f.Code.Length > 4
                    select f.Name;
        var sItems = new SelectList(query);
        return Json(sItems, JsonRequestBehavior.AllowGet); 
    } 
```

但是在运行时，我在 DropDownList 中得到 [object Object]，而不是确切的值。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:27:31.827

我认为这个功能会起作用：

```
var items = myJSONdata;//somethink like ["aa", "bb"]...
$(items).each(function(index, optionText) {
    $("#stageTwo").append($('<option />').attr('value', optionText).text(optionText));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:44:05.733

这一行：

```
var optionhtml = '<option value="' + item.text + '">' + items[i] + '</option>'; 
```

应该是这样的：

```
var optionhtml = '<option value="' + item.text + '">' + item.text + '</option>'; 
```

或者

```
var optionhtml = '<option value="' + item.id + '">' + item.text + '</option>'; 
```

如果您提供 JSON 输出，我可以更具体。

# c++ - C++初始化类成员对象

> ID：15851630
> 
> 赞同：0
> 
> 时间：2013-04-06T13:37:55.673
> 
> 标签：c++

我是 C++ 新手，但在 Java 方面有一些经验。我会在 Java 中这样做：

```
public Class SymbolTable{
   private DynHashtable<String> hst;
   public SymbolTable(){
      hst = new DynHashtable<String>();
   }
} 
```

但是我不知道如何在 C++ 中做到这一点，我应该保留指向 DynHashtable 的指针还是应该保留它的 Object，或者没有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:40:08.520

在这种情况下，我想您不需要保留任何指针。给您的数据成员*自动存储期限*。它将在`SymbolTable`包含它的对象被构​​造时被构造，在`SymbolTable`对象被破坏时被破坏。

换句话说，`SymbolTable`完全封装并拥有`DynHashtable<string>`对象，拥有控制其生命周期的专有责任。

此外，在 C++ 中，您应该使用它`std::string`来表示字符串（您必须包含`<string>`标准标头才能导入其定义：

```
#include <string>

class SymbolTable {
private:
    DynHashtable<std::string> hst;

public:
    SymbolTable() {
        // ...
    }
}; 
```

**更新：**

从评论来看，这似乎`DynHastable`不是默认可构造的，它的构造函数接受 an`int`作为其参数。在这种情况下，你必须在构造函数的初始化列表中构造你的对象：

```
class SymbolTable {
private:
    DynHashtable<std::string> hst;

public:
    SymbolTable() : hst(42) {
    //            ^^^^^^^^^
        // ...
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:41:26.230

在 C++ 中，您通常将变量直接嵌入值语义，或者将变量`std::shared_ptr`用于引用语义。这是价值语义：

```
#include <string>
#include <unordered_set> // the equivalent of DynHashtable AFAICT

class SymbolTable
{
private:
    std::unordered_set<std::string> hst;
public:
    SymbolTable() // automatically calls the default ctor for hst
    {
    }
}; 
```

这是参考语义：

```
#include <string>
#include <unordered_set> // the equivalent of DynHashtable AFAICT
#include <memory>        // for std::shared_ptr / std::make_shared

class SymbolTable
{
private:
    std::shared_ptr<std::unordered_set<std::string>> hst;
public:
    SymbolTable()
      : hst(std::make_shared<std::unordered_set<std::string>>())
    {
    }
}; 
```

但是您通常需要定义更多的方法，例如复制操作符、赋值运算符等。

# c++ - 为什么我的 std::pow 整数数学给出了错误的答案？

> ID：15851636
> 
> 赞同：26
> 
> 时间：2013-04-06T13:38:57.937
> 
> 标签：c++, floating-point, g++

考虑以下代码：

```
#include <iostream>
#include <cmath>

int main() {
    int i = 23;
    int j = 1;
    int base = 10;
    int k = 2;
    i += j * pow(base, k);
    std::cout << i << std::endl;
} 
```

它输出“122”而不是“123”。它是 g++ 4.7.2（MinGW，Windows XP）中的错误吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T13:47:51.930

[`std::pow()`](http://en.cppreference.com/w/cpp/numeric/math/pow)适用于没有无限精度的浮点数，并且可能您正在使用的标准库的实现`pow()`以一种（较差的）方式实现，这使得这种缺乏无限精度变得相关。

但是，您可以轻松定义自己的整数版本。在 C++11 中，您甚至可以制作它`constexpr`（以便尽可能在编译时计算结果）：

```
constexpr int int_pow(int b, int e)
{
    return (e == 0) ? 1 : b * int_pow(b, e - 1);
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/3SRz1U$142)。

* * *

尾递归形式（归功于[Dan Nissenbaum](https://stackoverflow.com/users/368896/dan-nissenbaum)）：

```
constexpr int int_pow(int b, int e, int res = 1)
{
    return (e == 0) ? res : int_pow(b, e - 1, b * res);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T21:00:21.027

到目前为止，所有其他答案都会错过或围绕问题中唯一的问题：

您的`pow`C++ 实现中的质量很差。它在不需要时返回不准确的答案。

获得更好的 C++ 实现，或者至少替换其中的数学函数。[Pascal Cuoq 指出的](http://lipforge.ens-lyon.fr/www/crlibm/)那个很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T13:56:58.553

如果你只是写

```
#include <iostream>
#include <cmath>

int main() {
    int i = 23;
    int j = 1;
    int base = 10;
    int k = 2;
    i += j * pow(base, k);
    std::cout << i << std::endl;
} 
```

你认为`pow`应该指的是什么？C++ 标准甚至不保证在包含 cmath 之后您将在全局范围内拥有一个 pow 函数。

请记住，所有重载都至少在`std`命名空间中。有些`pow`函数采用整数指数，有些`pow`函数采用浮点指数。您的 C++ 实现很可能只在全局范围内声明 C pow 函数。此函数采用浮点指数。问题是这个函数可能有一些近似和舍入误差。例如，实现该功能的一种可能方式是：

```
double pow(double base, double power)
{
    return exp(log(base)*power);
} 
```

由于舍入和近似误差，pow(10.0,2.0) 很可能会产生类似 99.99999999992543453265 的结果。结合浮点到整数转换产生小数点前的数字这一事实，这解释了您的结果 122，因为 99+3=122。

尝试使用采用整数指数的 pow 重载和/或从浮点数到整数进行一些适当的舍入。采用整数指数的重载可能会为您提供 10 的 2 次方的确切结果。

编辑：

正如您所指出的，尝试使用 std::pow(double,int) 重载似乎也产生了一个略小于 100 的值。我花时间检查了 ISO 标准和 libstdc++ 实现，看看从 C++ 开始在图11中，作为解决[缺陷报告550](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#550)的结果，采用整数指数的过载已被丢弃。启用 C++0x/C++11 支持实际上消除了 libstdc++ 实现中的重载，这可以解释为什么您没有看到任何改进。

无论如何，依赖这种函数的准确性可能是一个坏主意，尤其是在涉及到整数的转换时。如果您期望浮点值是整数（如 100），然后将其转换为 int 类型的值，那么朝向零的轻微错误显然会产生很大的不同。因此，我的建议是编写您自己的 pow 函数，该函数采用所有整数，或者使用您自己的 round 函数特别注意 double->int 转换，以便零的轻微错误不会改变结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-06T13:51:33.210

您的问题不是 gcc 中的错误，这是绝对肯定的。这可能是 的实现中的一个错误`pow`，但我认为您的问题实际上只是您正在使用的事实，`pow`它给出了一个不精确的浮点结果（因为它被实现为类似的东西`exp(power * log(base));`并且`log(base)`永远不会是绝对准确的 [除非 base是 e] 的幂。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-06T13:40:54.087

至少不是我的：

```
$ g++ --version | head -1
g++ (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2)

$ ./a.out 
123 
```

[IDEone](http://ideone.com/NNbFxC)也在运行 4.7.2 版并提供`123`.

* * *

`pow()`来自[http://www.cplusplus.com/reference/cmath/pow/](http://www.cplusplus.com/reference/cmath/pow/)的签名

```
 double pow (      double base,      double exponent );
long double pow ( long double base, long double exponent );
      float pow (       float base,       float exponent );
     double pow (      double base,         int exponent );
long double pow ( long double base,         int exponent ); 
```

你应该设置`double base = 10.0;`和`double i = 23.0`。

# silverstripe - 创建文章分页

> ID：15851641
> 
> 赞同：1
> 
> 时间：2013-04-06T13:39:45.003
> 
> 标签：silverstripe

嗨，我正在使用 silverstripe 2.4.7，我很难让分页工作。我在 page.php 中创建了一个函数来获取像这样的最新文章

```
function AllNewsPosts($num=1) { 
$news = DataObject::get_one("NewsHolder"); 
return ($news) ? DataObject::get("NewsEntry", "ParentID > 0", "Date DESC", "", $num) : false; 
} 
```

然后，当我将此功能放入控制和分页标签时，会显示一篇文章，但是指向并发文章的链接不起作用 - 基本上分页不起作用，我不知道如何修复它

```
<% if AllNewsPosts %>
        <% control AllNewsPosts %>
          <div class="event">
           <h2>$MenuTitle |<span class="date"> $Date.Time $Date.Long</span></h2>
           <p>$Content.FirstParagraph</p>
            <a href="$Link">See more about this event</a>
          </div>
        <% end_control %> 
        <% else %>
        <div class="no-entry">'There are no entries'</div>
        <% end_if %>

        <% if AllNewsPosts.MoreThanOnePage %>
  <div id="PageNumbers">
    <p>
      <% if AllNewsPosts.NotFirstPage %>
        <a class="prev" href="$AllNewsPosts.PrevLink" title="View the previous page"><span class="yellow-background">Prev</span></a>
      <% end_if %>

      <span>
          <% control AllNewsPosts.PaginationSummary(0) %>
          <% if CurrentBool %>
            <span class="current">$PageNum</span>
          <% else %>
            <% if Link %>
              <a href="$Link" class="numbers" title="View page number $PageNum">$PageNum</a>
            <% else %>
              &hellip;
            <% end_if %>
          <% end_if %>
        <% end_control %>
      </span>

      <% if AllNewsPosts.NotLastPage %>
        <a class="next" href="$AllNewsPosts.NextLink" title="View the next page"><span class="yellow-background">Next</span></a>
      <% end_if %>
    </p>
  </div>
<% end_if %> 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:50:25.510

注意：以下答案适用于 Silverstripe 2.4。这不应该用于 Silverstripe 3.0+ 网站。从 3.0 起，[PaginatedList](http://api.silverstripe.org/master/class-PaginatedList.html)对象使[分页变得更加容易](http://doc.silverstripe.org/framework/en/howto/pagination)。

您没有对在查询中检索多少条目或从哪里开始设置限制。

以下教程解释了如何完全按照您的尝试将分页应用于一组数据对象： [http ://www.ssbits.com/tutorials/2010/paginating-a-filtered-dataobjectset/](http://www.ssbits.com/tutorials/2010/paginating-a-filtered-dataobjectset/)

这是尝试更改您的功能以根据分页需要包含限制和开始：

**PHP**

```
function AllNewsPosts() {
    if(!isset($_GET['start']) || !is_numeric($_GET['start']) || (int)$_GET['start'] < 1) 
    {
        $_GET['start'] = 0;
    }

    $SQL_start = (int)$_GET['start'];

    $newsEntries = DataObject::get('NewsEntry', '', 'Date DESC');
    $doSet = new DataObjectSet();
    foreach ($newsEntries as $newsEntry) {
        if ($newsEntry->canView()) {
            $doSet->push($newsEntry);
        }
    }
    $doSet->setPageLimits($SQL_start, 10, $doSet->Count());
    return $doSet;
} 
```

请注意，上面将每页显示 10 个项目。您可以将其更改为每页所需的任何内容。

# css - 无法让绝对 div 在 IE 中水平居中

> ID：15851651
> 
> 赞同：1
> 
> 时间：2013-04-06T13:40:49.917
> 
> 标签：css, internet-explorer, centering, css-position

我正在尝试构建一个具有 220px 固定左侧边栏和填充屏幕其余部分的固定页面的站点。我正在尝试用图像填充页面部分并在顶部显示信息。该代码在 Chrome 和 Firefox 中运行良好，但无法在 IE 中运行。

在不使用绝对 div 的情况下，任何人都可以为我想象的更好的替代方案提供任何建议吗？

HTML

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
</head>
    <body>
    <div id="wrap"> 
    <div id="sidebar"> 
        <div class="logo">
        <a id="logo"> <img src="LOGO.png"/></a> 
        </div>
    <ul class="navigation red" id="red">
      <li><a href="#" class="active">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Contact</a></li>
      <li><a href="#">Gallery</a></li>
      <li><a href="#">Shop</a></li>
    </ul>
    </div>

    <div id="page" style="padding:0 !important;">
    <img src="images/back.jpg" class="back" alt=""/>

    <div id="center">
        <div class="header">
        <center> <h3 class="page_title">Website Title</h3></center>
        </div>
        <!-- services -->
        <div class="section group">
            <div class="one_half first">
            <div class="column_content">
                <h4> Title</h4>
                <img src="images/2.png"/>
                <p> <small>Text text text text text text text text text text text text text text text text text text . </small></p>
            </div>
        </div>

<div class="one_half first">
            <div class="column_content">
                <h4> Title</h4>
                <img src="images/2.png"/>
                <p> <small>Text text text text text text text text text text text text text text text text text text . </small></p>
            </div>
        </div>

        <div class="one_half first">
            <div class="column_content">
                <h4> Title</h4>
                <img src="images/2.png"/>
                <p> <small>Text text text text text text text text text text text text text text text text text text . </small></p>
            </div>
        </div>
    <div class="one_half first">
            <div class="column_content">
                <h4> Title</h4>
                <img src="images/2.png"/>
                <p> <small>Text text text text text text text text text text text text text text text text text text . </small></p>
            </div>
        </div>

        </div>
</div>
</div>
</div>
</body>
</html> 
```

CSS

```
body {
    background:#FFF;
    font-size:14px;
    height:100%;
    width: 100%;
}
div#wrap {
    width:100%;
    max-width:100%;
    overflow:hidden;
    margin:0 auto!important
}
div#sidebar {
    width:220px;
    height:100%;
    float:left;
    background: #FFF;
    border-right:1px solid #2e2f2f;
    position:fixed
}
div#page {
    height:100%;
    left:220px;
    right:0px;
    background: #FFF;
    position:absolute;
    padding:2% 5%;
}
div#center{
    margin:0 auto !important;
    width:100%;
    height:auto;
    z-index:1000;
    background:rgba(255,255,255,0.5);
}
.group {
    padding: 0 20px 0 20px !important;  
    position:absolute;
    z-index:10;
    bottom: 20px !important;
    left:0;
    right:0;
    max-width:850px;
    margin:0 auto !important;
    display:inline-table;
}
.header {
    padding:0 20px 0 20px !important; 
    position:absolute;
    z-index:10;
    top: 8% !important;
    left:0;
    right:0;
    max-width:850px;
    margin-left:auto !important;
    margin-right:auto !important;
}
img.back{
    min-height:100%;
    min-width:1024px;
    width:100%;
    height:auto;
}
.one_half {
    font-size: 17px;
    float:left;
    width:50%;
    overflow:hidden;
} 
```

一段时间以来一直在努力解决这个问题，但没有取得任何进展，任何帮助将不胜感激。

谢谢！

- - 编辑 - -

不要以为我说清楚了我要居中的组和标题 div 不在 IE 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:37:51.533

如果这不是您想要的，我需要您更好地解释您的要求。 [http://jsfiddle.net/HhddF/](http://jsfiddle.net/HhddF/)

```
.back {
    background-color:#3D6AA2;
    height:100%;
    width:100%;
} 
```

# android - Android：单击时更改 ClickableSpan 的背景颜色

> ID：15851655
> 
> 赞同：26
> 
> 时间：2013-04-06T13:41:22.777
> 
> 标签：android

我有一个带有 ClickableSpan 的 SpannableString，如下所示

```
for (int i = 0; i < items.size(); i++) {
            final SpannableString span = new SpannableString(items.get(i));
            final int index=i;

            span.setSpan(new ClickableSpan() {

                @Override
                public void onClick(View widget) {

                }

                @Override
                public void updateDrawState(TextPaint ds) {
                    ds.setColor(Color.LTGRAY);
                    ds.setUnderlineText(false);

                }
            }, 0, span.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

            builder.append(span);
        }

//my text view
txt.setText(builder);
txt.setMovementMethod(LinkMovementMethod.getInstance()); 
```

我想要做的是在单击时更改跨度的前景色。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-02-11T19:34:04.500

如果您想摆脱选择时的绿色突出显示，这就是您想知道的：

显然，`public void updateDrawState(TextPaint ds)`在您的自定义类中覆盖不会影响突出显示颜色。它仅用于设置下划线颜色（或隐藏/显示它）。

您需要做的就是： `textView.setHighlightColor(Color.TRANSPARENT);` 其中 textView 是包含 ClickableSpan 的内容。

希望它对你们所有人都有效。随时提出任何相关问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-26T18:52:29.827

我扩展了 clickableSpan 类并传递了一个标志，让我知道我应该突出显示它。

```
SpannableStringBuilder tag;
.... tag.setSpan(new WordSpan(i, tokens[i], wordtohighlitedID) { 
```

......

```
import android.graphics.Color;
import android.text.TextPaint;
import android.text.style.ClickableSpan;
import android.view.View;

public class WordSpan extends ClickableSpan 
{

    private int id;
    private TextPaint textpaint;
    public boolean shouldHilightWord = false;
    public WordSpan(int anID, String txt, int selected) {
        id =anID;
        // if the word selected is the same as the ID set the highlight flag
        if(selected == id)  {
            shouldHilightWord = true;

        }

    }

    @Override
    public void updateDrawState(TextPaint ds) {
        textpaint = ds;
        ds.setColor(ds.linkColor);
        if(shouldHilightWord){
            textpaint.bgColor = Color.GRAY;         
            textpaint.setARGB(255, 255, 255, 255);

        }
        //Remove default underline associated with spans
        ds.setUnderlineText(false);

    }

    public void changeSpanBgColor(View widget){
        shouldHilightWord = true;
        updateDrawState(textpaint);
        widget.invalidate();

    }
    @Override
    public void onClick(View widget) {

        // TODO Auto-generated method stub

    }

    /**
     * This function sets the span to record the word number, as the span ID
     * @param spanID
     */
    public void setSpanTextID(int spanID){
        id = spanID;
    }

    /**
     * Return the wordId of this span
     * @return id
     */
    public int getSpanTextID(){
        return id;
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-22T12:03:31.300

用这个：

```
view.setSelector(new ColorDrawable(Color.BLUE)); 
```

# cuda - CUDA：“名称”在目标位置没有值

> ID：15851663
> 
> 赞同：1
> 
> 时间：2013-04-06T13:41:50.410
> 
> 标签：cuda

在我的代码中，当我调用 findMax 函数时，索引变量无法定义，但 max，我可以定义并工作。我因此尝试使用不同的名称，但不起作用。什么是问题？

![在此处输入图像描述](https://i.stack.imgur.com/zkHqn.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:46:30.513

即使您禁用所有优化，CUDA 编译器也会执行一些优化。`index`在设备函数 findMax 中没有副作用，因此编译器消除了该变量。

# mvvm - MVVM 视图模型和模型问题

> ID：15851665
> 
> 赞同：1
> 
> 时间：2013-04-06T13:41:56.560
> 
> 标签：mvvm

我正在尝试学习 MVVM，并且在区分模型和视图模型方面有点挣扎。

如果有人能回答这两个问题，那对我来说会很有帮助：

假设我有一个`Objects`类，它是一个包含多个 ObservableCollections 的视图模型`Object`。该类`Object`包含显示在 GUI 上的字符串的 ObservableCollection。

类是`Object`模型还是视图模型？

如果`Object`类只包含一个字符串和一个整数（名称和值），它是模型还是视图模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:47:58.703

`Model`是保存您的*数据*的类。数据可以是字符串/整数或其他。`Model`也可以是这些对象的列表*/集合*。例如，`Person`对象列表仍然可以是您的`Model`.

这是您的模型和视图*之间*`ViewModel`的层。它应该用于对数据执行您需要的任何任务（例如，如果您的模型是对象列表，但您只想在视图中显示年龄超过 18 岁的人，则此逻辑在 中完成）*`Person``ViewModel`*

 *所以回答你的问题：

如果您有一个包含*数据*的对象（在您的示例中为字符串列表），则它是`Model`. 即使对象稍微复杂一点（与它拥有的属性数量有关），它也可能仍然是模型。
业务逻辑应该与模型分开。另一方面，*可以将*[验证](http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM) 添加到模型中（例如，确保一个人的属性是非负的），因为这仍然是关于*数据*应该如何表现的规则*`Age`**

# matlab - 为什么 sprank(A) 和 A\b 在 matlab 中报告不同的排名？

> ID：15851667
> 
> 赞同：0
> 
> 时间：2013-04-06T13:42:08.623
> 
> 标签：matlab

我有一个点集 P，我通过 k-最近邻构造它的相邻矩阵 A。A的每一行是[...+1...-1...]，表示一对相邻点。A 的大小是 48348 x 8058，sprank(A) 是 8058。但是当我执行以下操作时，它会给我一个警告：“警告：等级不足，等级 = 8055，tol = 8.307912e-10。”

a=A*b；c=A\a;

norm(cb) 相当大。相邻矩阵A似乎有问题，但我无法弄清楚。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:25:38.013

`sprank`仅告诉您矩阵的多少行/列具有非零元素，同时`A\b`报告矩阵的实际等级，这表明矩阵的多少行是*线性无关*的。例如，对于以下矩阵：

```
A = [-1  1  0  0;
      0  1 -1  0;
      1  0 -1  0; 
      0  0  1 -1] 
```

`sprank(A)`是 4 但`rank(A)`只有 3，因为您可以将第三行写为其他行的线性组合，特别是`A(2,:) - A(1,:)`.

您需要解决的问题是您的计算方式`A`（如果您希望生成一个线性独立方程组），或者您需要找到一种`A`不需要分解秩亏矩阵的使用方法。

# jquery - 带有 iframe 跨域的 Fancybox，部分使用 Explorer10 兼容模式渲染

> ID：15851668
> 
> 赞同：0
> 
> 时间：2013-04-06T13:42:11.453
> 
> 标签：jquery, asp.net, iframe, fancybox, internet-explorer-10

打开fancybox iframe 的站点，在i-frame 中有一个aspx - 其他域的ajax 页面。仅在兼容模式下使用 IE10（其他浏览器没有问题），页面只是部分呈现，当我单击按钮（更改包颜色的示例）时，页面被正确呈现。

首先渲染：

![首次渲染](https://i.stack.imgur.com/L8kx0.jpg)

点击橙色后：

![点击后](https://i.stack.imgur.com/3KDoO.jpg)

更新：

1）在单独的 iframe（没有 fancybox）上，页面运行良好。

2）这不是跨域问题，我的电脑也存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:05:27.450

尝试禁用`iframe preload`喜欢

```
$(".fancybox").fancybox({
    width: 800, // or whatever
    height: 570,
    type: 'iframe',
    // solve issues with iframes and IE
    iframe : {
        preload: false
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:08:22.517

好的，这是一个 jQuery 版本问题。在主网页中，版本为1.9.1 在i-frame中，我使用1.4.4版本（由于页面中使用了旧插件） 我将i-frame中的版本升级到1.9.1问题消失了。谢谢大家！

# asp.net - asp.net 中的用户输入清理

> ID：15851669
> 
> 赞同：3
> 
> 时间：2013-04-06T13:42:19.233
> 
> 标签：asp.net, asp.net-mvc

我需要为正在开发的 Web 应用程序清理用户输入（或输出）。用户输入只是纯文本，我想防止 HTML 或其他“有害”字符串。*但是，应该*允许使用小于、大于、撇号、与号、引号等字符。

我想第一步是禁用请求验证以防止通用的“检测到潜在危险值”消息，但我还需要做什么？例如，我不能简单地对输出进行 htmlencode 编码，否则我最终会显示 < 来代替小于字符。

有什么工具可以提供帮助吗？我快速浏览了 AntiXSS 库，但据我所知，它只是一个美化的 htmlencoder，还是我遗漏了什么？MVC 怎么样 - 这有什么内置的吗？

我从来没有找到一篇关于这种事情的像样的文章。有人说要清理输入，而其他人说要清理输出，示例通常过于简单化，使用 htmlencoding 之类的技术，它将重新格式化完全有效的字符，例如小于。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:56:47.077

[Anti-XSS 库](http://wpl.codeplex.com/)是目前ASP.Net WebForms 中的标准库。虽然它是次优的。最新版本 ( [4.2](http://www.microsoft.com/en-us/download/details.aspx?id=28589) ) 有[几个](http://wpl.codeplex.com/releases/view/80289#ReviewsAnchor)暂时未修复的重大错误。

另请参阅 MSDN 文章[信息安全 - 反跨站点脚本](http://msdn.microsoft.com/en-us/security/aa973814.aspx)。

请参阅[我应该在 ASP.NET MVC 中使用 Anti-XSS 安全运行时引擎吗？](https://stackoverflow.com/q/1003736/2291)关于 MVC 的回答。从那个答案：

> Phil Haack 在这里有一篇有趣的博客文章 [http://haacked.com/archive/2009/02/07/take-charge-of-your-security.aspx](http://haacked.com/archive/2009/02/07/take-charge-of-your-security.aspx)。他建议将 Anti-XSS 与 CAT.NET 结合使用。

# haskell - 真随机数生成器 (TRNG)、Haskell 和经验/形式方法

> ID：15851670
> 
> 赞同：1
> 
> 时间：2013-04-06T13:42:30.060
> 
> 标签：haskell, random, arduino, serial-port, trng

我想对特定硬件生成的真随机数生成器 (TRNG) 数字进行验证，但我不习惯这样做。

首先，我想通过经验方法测试真随机数生成器（TRNG）的一致性（[AKA](http://en.wiktionary.org/wiki/AKA)，我想检查它们是否真的是真随机数（TRN））；我不知道我是否可以用正式的方法来检查这个。

有没有关于这个主题的具体讲座？一些提示呢？是否有用于这种经验方法测试的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:28:08.177

我建议您不要尝试复制现有工具，因为这将是很多工作。Marsaglia 的[Diehard 测试](http://en.wikipedia.org/wiki/Diehard_tests)应该可以工作，或者您可以使用[dieharder](http://www.phy.duke.edu/~rgb/General/dieharder.php)，它是 GPL 的重新实现。从网页：

> 顽固派（就像之前的顽固派）的主要目的是让时间和测试（伪）随机数生成器变得容易，包括软件和硬件，用于研究和密码学中的各种目的。该工具完全建立在 GSL 的随机数生成器接口之上，并在其操作中使用各种其他 GSL 工具（例如排序、erfc、不完全伽玛、分布生成器）。

# javascript - 从远程数据绑定剑道树视图不起作用

> ID：15851673
> 
> 赞同：0
> 
> 时间：2013-04-06T13:42:33.390
> 
> 标签：javascript, c#-4.0, kendo-ui, kendo-treeview

我正在尝试从远程数据绑定剑道树视图，但数据未绑定。

```
var homogeneous = new kendo.data.HierarchicalDataSource({
            transport: {
                read: {
                    url: App.toRestUrl('/ServerController'),
                    type: 'GET',
                    contentType: 'application/json',
                    dataType: 'json'
                }
            },
            schema: {
                model: {
                    id: "id",                        
                    objname: "objname"
                    hasChildren:false,
                }
            }
        });

$("#treeview").kendoTreeView({
            dataSource: homogeneous,
            dataTextField: "objname"
        }); 
```

这就是我在 javascript 文件中所做的。

我从服务器端（c#）返回数据作为列表

请让我知道我做错了什么

提前致谢

拉古

# java - 是否可以通过数据 URL 在 Android 上共享图像？

> ID：15851681
> 
> 赞同：4
> 
> 时间：2013-04-06T13:43:04.803
> 
> 标签：java, android, android-intent, graphics

是否可以使用类似这样的代码共享图像？

```
Intent share = new Intent(Intent.ACTION_SEND);
share.setData(Uri.parse("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACx"
    + "jwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGoSURBVDhPlVM9SEJRGD2DkL+QmoiKYNggToJL"
    + "4KKLNDiKW4NCoENQkzS1uboILoKjW61NSZOjo1uOBlHPgjJsuN3jvc+naVQHPt79vu+cc9/37n34"
    + "BQkd/0Jibw+3Ozt4j0TwwuCaNfYU5Qe43Tg5OMDD9TWEYUAIoYJr1mIxPEmjc01fh8uF03wer6vC"
    + "7zGbQZRKmPp8uNCyJWKhEAwSTDJ3NNc07fUsE76J1FjjcL5VQb0O4XBAVCoqj0ZV3u2qvN+H8Psx"
    + "1HLAZsPn6u6pFIQsi3AYYjKBcDpVXiyqPrl2O2ayZqc+FY9jaooZuZwSJBJL8iKv1SwONdTSIJtO"
    + "w1g1GA4h9vfVk3mjod5mPLY4ySQMqT2kgZ0jsMjZBgOL9D1omM2qtfwmH1K7SwN4vbhnkzuQ0G5v"
    + "imnOHjkMjwePC7HGUSajxuDM1aqa/+wM4vJSCRnmHSkU8CwNjrVWIRDAVauFubnjaATRbCoD7m7W"
    + "Ox3Mg0HcaNkaduV9GPCmbbuNrLEnxXeSuzi+reD/wJ+Hx1Qu443BNWvsadqfwDOu6lic9yaAL2uK"
    + "Y4RMd4E2AAAAAElFTkSuQmCC"));
startActivity(Intent.createChooser(share, getString(R.id.menu_share))); 
```

我的目标是让我的应用程序不需要写入存储的权限，而是能够共享它动态创建的图像。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:49:48.230

> 是否可以使用类似这样的代码共享图像？

不，因为`ACTION_SEND`不使用`Uri`. 它使用`EXTRA_TEXT`或`EXTRA_STREAM`。

> 我的目标是让我的应用程序不需要写入存储的权限，而是能够共享它动态创建的图像。有没有办法做到这一点？

创建一个`ContentProvider`来提供文件，然后将`Uri`指向您的文件的指向您的提供程序中的`EXTRA_STREAM`. 您*可以*使用自定义权限来保护提供者，并允许发送活动通过 临时访问它`FLAG_GRANT_READ_URI_PERMISSION`，尽管我只尝试过`Intent`使用实际`Uri`（例如`setData()`）而不是通过额外的类似的结构`EXTRA_STREAM`。

[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/GrantUriPermissions)演示了使用此技术`ACTION_VIEW`（注意：需要安装了 PDF 查看器的设备才能真正工作）。

# android-ndk - 交叉编译 libxml2 for android 有构建错误

> ID：15851682
> 
> 赞同：3
> 
> 时间：2013-04-06T13:43:12.777
> 
> 标签：android-ndk, libxml2, icu

我正在尝试为 android 交叉编译 libxml2，因为 libxml 需要 icu4c 标头，从链接[https://github.com/android/platform_external_icu4c](https://github.com/android/platform_external_icu4c)下载 并包含 unicode 标头并尝试使用 ndk-build 编译，，。
但得到以下错误。

```
 obj/local/armeabi/objs/xsml2/encoding.o: In function `xmlUconvWrapper':
      jni/encoding.c:1870: undefined reference to `ucnv_convertEx'
      jni/encoding.c:1865: undefined reference to `ucnv_convertEx'
      obj/local/armeabi/objs/xsml2/encoding.o: In function `closeIcuConverter':
      jni/encoding.c:141: undefined reference to `ucnv_close'
      jni/encoding.c:142: undefined reference to `ucnv_close'
      obj/local/armeabi/objs/xsml2/encoding.o: In function `openIcuConverter':
      jni/encoding.c:109: undefined reference to `ucnv_open'
      jni/encoding.c:119: undefined reference to `ucnv_setFromUCallBack'
      jni/encoding.c:126: undefined reference to `ucnv_open'
      jni/encoding.c:132: undefined reference to `ucnv_close'
      jni/encoding.c:115: undefined reference to `ucnv_setToUCallBack'
      jni/encoding.c:115: undefined reference to `UCNV_FROM_U_CALLBACK_STOP'
      jni/encoding.c:115: undefined reference to `UCNV_TO_U_CALLBACK_STOP' 
```

对于这个错误，我在 Android make 文件中包含了 -L/Android/android-ndk-r8/external/libs -licui18n -licuuc 但我得到了上述错误。有人可以建议哪个版本的 icu4c 库具有所有这些功能。

我的最终目标是为 android 编译 libxml2 。

请有人通过一些光线进一步进行。

# ios - 将 C 浮点数组存储在 NSDictionary 中

> ID：15851684
> 
> 赞同：5
> 
> 时间：2013-04-06T13:43:22.347
> 
> 标签：ios, objective-c, xcode, opengl-es

我正在尝试将 a 存储`c-float array`在一个`NSDictionary`以供以后使用。
我最初使用 an`NSArray`来存储 C 数据，但`NSArray`为了我的意图而放慢了速度。

**我正在使用以下代码将数组包装在 NSDictionary 中：**

```
[self.m_morphPositions setObject:[NSValue valueWithBytes:&positionBuff objCType:@encode(float[(self.m_countVertices * 3)])] forKey:fourCC]; 
```

**并使用以下方法检索 C-Float 数组：**

```
float posMorphs[(self.m_countVertices*3)];

NSValue *posValues = [self.m_morphPositions objectForKey:name];

[posValues getValue:&posMorphs]; 
```

当我退出数组时，每个索引的值都设置为 0.0，这是错误的。

*我怎样才能解决这个问题？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:23:40.087

我也认为这`NSData`可能是最好的解决方案。但如果有人感兴趣：你不能使用`@encode`可变大小的数组，因为它是一个*编译器指令*。所以

```
@encode(float[(self.m_countVertices * 3)]) 
```

不能工作。实际上，编译器在这里为大小为零的浮点数组创建了编码，这解释了为什么在读取`NSValue`.

但是您可以在运行时创建类型编码字符串。对于浮点数组，编码是`[<count>^f]`（请参阅[Type Encodings](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)），因此以下内容将起作用：

```
const char *enc = [[NSString stringWithFormat:@"[%d^f]", (self.m_countVertices * 3)] UTF8String];
NSValue *val = [NSValue valueWithBytes:positionBuff objCType:enc]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T13:55:04.463

`NSValue`可能是针对标量值的，而不是针对它们的数组。在这种情况下，使用`NSData`应该会容易得多

```
NSData* data = [NSData dataWithBytes:&positionBuff length:(self.m_countVertices * 3 * sizeof(float))];
```

```
[data getBytes:posMorphs length:(self.m_countVertices * 3 * sizeof(float))];
```

另一种解决方案是在堆上分配数组并用于`NSValue`存储指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T14:12:26.180

如果将字节包装在 NSData 中，则可以将它们提供给 NSDictionary。

如果你想跳过它，你可以使用一个`NSMapTable`和`NSPointerFunctionsOpaqueMemory`（或`MallocMemory`）作为值指针函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T14:10:58.550

我不确定这是否是您编码值的方式，但它可能有助于将您的数组封装到结构中。

```
// Put this typedef in a header
typedef struct
{
    float values[3];
} PosValues; 
```

在您的代码中：

```
// store to NSValue
PosValues p1 = { { 1.0, 2.0, 3.0 } };
NSValue *val = [NSValue valueWithBytes:&p1 objCType:@encode(PosValues)];

// retrieve from NSValue
PosValues p2;
[val getValue:&p2];

NSLog(@"%f, %f, %f", p2.values[0], p2.values[1]. p2.values[2]); 
```

这种方法的好处是您的数组被保存为*数组类型*。此外，即使原始数组不是，这些结构也是可分配的：

```
PosValues p1 = { { 1.0, 2.0, 3.0 } };
PosValues p2;

p2 = p1; 
```

# php - Laravel 在视图中显示错误

> ID：15851685
> 
> 赞同：3
> 
> 时间：2013-04-06T13:43:26.610
> 
> 标签：php, error-handling, laravel, laravel-4

如果我的验证失败，我会这样做：

```
return Redirect::back()->with('validation', $validation->errors->all()); 
```

我也在使用：

```
$restful = true; 
```

所以当我打开时`get_edit()`- 我收到一个错误，即生成我的视图时没有 $validation 变量，当我进入时`post_edit()`- 一切正常，因为它返回一个带有错误的重定向......

这是我的观点：

```
<? foreach($validation as $e): ?>

<div><?= $e; ?></div>

<? endforeach; ?> 
```

未定义的变量 $validation，现在我正试图把它放在 Router::before

```
Route::filter('before', function()
{
    View::share('validation', array());
}); 
```

所以变量存在但为空，但现在出现了一个新问题，每次执行此过滤器后，它都会覆盖那些`$validation`生成 my的变量，而且我在我的视图中`post_edit()`看到了一个变量`$errors`但一直是空的，我不知道如何使用它， 你能帮助我吗？

所以很快我的问题是：

```
public function get_edit($id)
{
   //generate my view with all nessesary data, but i can't generate here an error variable
   // or its better to put it in one place to globally share it in the views, otherwise i am     //getting an error
}

public function post_edit($id)
{

  //validating $_POST data, if there is an error redirect it back to the get_edit() WITH a        //variable containing errors

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T20:35:24.863

你读过文档吗？[http://laravel.com/docs/5.0/validation#error-messages-and-views](http://laravel.com/docs/5.0/validation#error-messages-and-views)

您可以使用`return Redirect::back()->withErrors($validation);` 在您的视图中，您始终可以使用 redirect('register')->withErrors($validator) `$errors`，而无需将它们绑定到视图。

# java - 错误“'JDK版本'javac'不被识别为内部或外部命令，”尝试运行简单的钛项目时？

> ID：15851688
> 
> 赞同：0
> 
> 时间：2013-04-06T13:43:49.950
> 
> 标签：java, titanium, titanium-mobile, javac

我是钛新手，我安装了 Titanium 和 andriod SDK，我导入了 Titanium Site 提供的示例并尝试运行它，但我遇到了问题**“JDK 版本 'javac' 未被识别为内部或外部命令，** "

我真的很努力地通过在环境变量中给出路径来解决问题，但可能是我在给出路径时做错了，或者我会错过任何东西？？

**请帮帮我:-**

1）我该如何解决这个问题？

2）我需要提供环境变量的各种路径是什么？

3）给出路径的确切方法是什么？

请让我知道如何解决此问题。

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T20:03:32.040

看来你没有设置 JAVA_HOME。对于 Titanium 开发，您应该设置环境变量

*   JAVA_HOME
*   将 JAVA_HOME\bin 添加到 PATH
*   ANDROID_SDK

如何设置它们取决于你的机器，我猜不出来，因为 Titanium 运行在所有市长平台上。但是您可以在[设置 Titanium Studio](http://docs.appcelerator.com/titanium/latest/#!/guide/Setting_up_Titanium_Studio)、[安装故障排除](http://docs.appcelerator.com/titanium/latest/#!/guide/Installation_Troubleshooting)、[***环境变量***](http://docs.appcelerator.com/titanium/latest/#!/guide/Software_Locations_and_Environment_Variables)以及包含所需版本[的兼容性矩阵中找到所有相关信息。](http://docs.appcelerator.com/titanium/latest/#!/guide/Titanium_Compatibility_Matrix)

如果没有任何帮助，请打开 Titanium Studio 并转到帮助 -> Titanium Studio -> 运行诊断测试并使用此测试的结果更新您的问题。

# winapi - 如何在 win32 sdk 中使用 SetSuspendState() api 进行休眠或挂起？

> ID：15851692
> 
> 赞同：0
> 
> 时间：2013-04-06T13:44:30.790
> 
> 标签：winapi

我在 win32 sdk 编程中遇到问题。我的按钮单击应该在 Windows 中启动休眠模式。我在 msdn 中搜索 **了 SetSuspendState()** API，它需要三个布尔参数。

但在 Visual Studio 8 for win32 项目中使用此 API 会导致以下错误

```
 Error 1 error LNK2019: unresolved external symbol _SetSuspendState@12 referenced in function "long stdcall WndProc(struct HWND *,unsigned int,unsigned int,long)" (?WndProc@@YGJPAUHWND__@@IIJ@Z) button.obj sandy_win32_progs

    Error 2 fatal error LNK1120: 1 unresolved externals E:\Win32 SDK Progs sandy\sandy_win32_progs\Debug\sandy_win32_progs.exe sandy_win32_progs 
```

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:46:41.870

根据[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa373201.aspx)，您需要与`powrprof.lib`库链接。将其添加到项目属性中链接器选项卡上的库列表中。

# c# - 我的表单中的 OpenFileDialog 不是 windows 浏览器弹出表单

> ID：15851698
> 
> 赞同：1
> 
> 时间：2013-04-06T13:45:15.847
> 
> 标签：c#, winforms

我不知道 OpenFiledialog 是否是正确的控件，但我想在我的主表单控件中打开一个已添加书签的文件路径。我有一个实现这个的程序，但我不知道如何去做。

当用户点击一个按钮时，下图左侧的一栏会显示最后打开的文件路径所在的文件夹。如何去创造这个。我已经有了要显示的文件夹的路径，我应该使用哪些控件，任何代码都将受到高度赞赏 ![样本](https://i.stack.imgur.com/uVl0T.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:39:29.300

如果我理解你想在某个路径打开 Windows 资源管理器的问题。那么它很简单，你不用控制就这样做：

```
Process.Start("Your path here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:22:07.800

您可以使用 SetParent 函数来完成。以下是仅用于教育目的的示例！

```
using System;
using System.Diagnostics;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Forms;
using System.Drawing;

namespace WindowsFormsApplication4
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            this.Size = new System.Drawing.Size(800, 600);
            this.TopMost = true;
            this.FormBorderStyle = FormBorderStyle.FixedToolWindow;
            Func<bool> run = () =>
                Window.Find(hwnd =>
                {
                    var cn = Window.GetClassName(hwnd);
                    var res = (cn == "CabinetWClass");
                    if (res)
                    {
                        this.Controls.Clear();
                        Window.SetParent(hwnd, this.Handle);
                        Window.SetWindowPos(hwnd, new IntPtr(0), -8, -30, this.Width + 10, this.Height + 37, 0x0040);
                    }
                    return res;
                });

            new Button { Parent = this, Text = "Start" }
                .Click += (s, e) =>
                    {
                        if (run() == false)
                            MessageBox.Show("Open Explorer");
                    };
        }
    }

    public static class Window
    {
        public static bool Find(Func<IntPtr, bool> fn)
        {
            return EnumWindows((hwnd, lp) => !fn(hwnd), 0) == 0;
        }
        public static string GetClassName(IntPtr hwnd)
        {
            var sb = new StringBuilder(1024);
            GetClassName(hwnd, sb, sb.Capacity);
            return sb.ToString();
        }
        public static uint GetProcessId(IntPtr hwnd)     // {0:X8}
        {
            uint pid;
            GetWindowThreadProcessId(hwnd, out pid);
            return pid;
        }
        public static string GetText(IntPtr hwnd)
        {
            var sb = new StringBuilder(1024);
            GetWindowText(hwnd, sb, sb.Capacity);
            return sb.ToString();
        }

        delegate bool CallBackPtr(IntPtr hwnd, int lParam);

        [DllImport("user32.dll")]
        static extern int EnumWindows(CallBackPtr callPtr, int lPar);

        [DllImport("user32.dll")]
        static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

        [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);

        [DllImport("User32", CharSet = CharSet.Auto, ExactSpelling = true)]
        public static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndParent);

        [DllImport("user32.dll", SetLastError = true)]
        public static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int W, int H, uint uFlags);
    }
} 
```

# c - 没有任何效果 - 引用、指针

> ID：15851699
> 
> 赞同：0
> 
> 时间：2013-04-06T13:45:21.043
> 
> 标签：c

```
void load(int *n, int *x, int **arr)
{   
    arr = (int**)malloc(sizeof(int*)*(*n));
    for(int i = *n; i >= 0; i--)
    {
        scanf("%d", &arr[i]);
    }
}

int main()
{
    int n = 0, x = 0;
    int *arr;

    load(&n, &x, &arr);

    printf("%d", arr[1]);

    return EXIT_SUCCESS;
} 
```

该程序可以正确编译，但在`printf()`in main 函数期间会引发 windows 错误。仅显示“arr”会给出随机的大数字。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:48:31.480

```
arr = (int**)malloc(sizeof(int*)*(*n)); 
```

不会更改 main 中的任何内容，它只会覆盖接收到的指针（`arr`in的地址`main`）的副本`load`。

该函数应该做的是改变`arr`，`main`为此，您必须取消引用参数，

```
*arr = (int*)malloc(sizeof(int)*(*n)); // cast for C++ compiler left in 
```

更改`arr`in的值`main`。（ 的参数指向的对象，即`arr`in ，需要更改，因此您需要修改in 。）`load``arr``main``*arr``load`

然后扫描应该是

```
scanf("%d", &(*arr)[i]); 
```

或同等学历）

```
scanf("%d", *arr + i); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T14:03:58.347

```
#include <stdio.h>
#include <stdlib.h>
void load(int *n, int *x, int **arr)
{   
    int i = 0;
    *arr = (int*) malloc(*n * sizeof(int));
    if(!*arr) {
        perror("Can not allocate memory!");
        return;
    }
    for(i = *n; i >= 0; i--)
    {
        scanf("%d", *arr + i);
    }
    return;
}

int main()
{
    int n = 0, x = 0;
    int *arr;
    int i;

    /* You probably need to initialize n */
    n = 5;
    load(&n, &x, &arr);

    for(i = n; i >= 0; i--)
    {
        printf("%d - %d\n", i, arr[i]);
    }
    return EXIT_SUCCESS;
} 
```

# java - 从网页解析 XML

> ID：15851700
> 
> 赞同：2
> 
> 时间：2013-04-06T13:45:25.887
> 
> 标签：java, xml, parsing

如果我将此站点的 xml 复制并粘贴到 xml 文件中，我可以用 java 解析它

[http://api.indeed.com/ads/apisearch?publisher=8397709210207872&q=java&l=austin%2C+tx&sort&radius&st&jt&start&limit&fromage&filter&latlong=1&chnl&userip=1.2.3.4&v=2](http://api.indeed.com/ads/apisearch?publisher=8397709210207872&q=java&l=austin%2C+tx&sort&radius&st&jt&start&limit&fromage&filter&latlong=1&chnl&userip=1.2.3.4&v=2)

但是，如果可能的话，我想直接从网页解析它！

这是我当前的代码：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder; 
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import org.xml.sax.SAXException;

import java.io.File;
import java.io.IOException;

  public class XMLParser {

public void readXML(String parse) {
    File xml = new File(parse);
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder;
    try {
        dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(xml);
 //         System.out.println("Root element :"
 //                 + doc.getDocumentElement().getNodeName());

        NodeList nList = doc.getElementsByTagName("result");

        System.out.println("----------------------------");

        for (int temp = 0; temp < nList.getLength(); temp++) {

            Node nNode = nList.item(temp);

 //             System.out.println("\nCurrent Element :" + 
     nNode.getNodeName());

            if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                Element eElement = (Element) nNode;

                System.out.println("job title : "
                        + 
 eElement.getElementsByTagName("jobtitle").item(0)
                        .getTextContent());;
                System.out.println("Company: "
                        + 
  eElement.getElementsByTagName("company")

 .item(0).getTextContent());
                System.out.println("City : "
                        + 
  eElement.getElementsByTagName("city").item(0)
                                .getTextContent());
                System.out.println("State : "
                        + 
eElement.getElementsByTagName("state").item(0)
                                .getTextContent());
                System.out.println("Country : "
                        + 
eElement.getElementsByTagName("country").item(0)
                                .getTextContent());
                System.out.println("Date posted : "
                        + 
     eElement.getElementsByTagName("date").item(0)
                                .getTextContent());
                System.out.println("Job summary : "
                        + 
    eElement.getElementsByTagName("snippet").item(0)
                                .getTextContent());
                System.out.println("Latitude : "
                        +      
 eElement.getElementsByTagName("latitude").item(0).getTextContent());
                System.out.println("longitude : "
                        +     
eElement.getElementsByTagName("longitude").item(0).getTextContent());

            }
        }

    } catch (ParserConfigurationException | SAXException | IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public static void main(String[] args) {
    new XMLParser().readXML("test.xml");
}
 } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:48:59.390

给它 URI 而不是 XML。它会为你下载。

文档 doc = dBuilder.parse(uriString)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:54:39.903

请找到这样的代码片段

```
String url = "http://api.indeed.com/ads/apisearch?publisher=8397709210207872&q=java&l=austin%2C+tx&sort&radius&st&jt&start&limit&fromage&filter&latlong=1&chnl&userip=1.2.3.4&v=2";

try
{
  DocumentBuilderFactory f = DocumentBuilderFactory.newInstance();
  DocumentBuilder b = f.newDocumentBuilder();
  Document doc = b.parse(url);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T08:47:19.377

您需要在 for 循环中包含所需的元素/节点。因此它可以扫描 xml 文件，并找到您正在搜索的正确节点。

```
reads the xml file as a string, and creates a xml structure

        builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(connection.getInputStream());
        NodeList nodes = doc.getElementsByTagName("mode");

        for (int i = 0; i < nodes.getLength(); i++)

        Element element = (Element) nodes.item(i);

            //Gets tag from XML and it´s content
            NodeList nodeMode = element.getElementsByTagName("mode");
            Element elemMode = (Element) nodeMode.item(0); 
```

之后，如果您想选择一个值并解析为 int 或您想要的内容，请执行以下操作：

```
int currentMode = Integer.parseInt(elemMode.getFirstChild().getTextContent()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T13:49:27.693

这就是我直接从 url [http://www.nbp.pl/kursy/xml/+something解析数据的方式](http://www.nbp.pl/kursy/xml/+something)

```
static class Kurs {
    public float kurs_sprzedazy;
    public float kurs_kupna;
}

private static DocumentBuilder dBuilder;

private static Kurs getData(String filename, String currency) throws Exception {
    Document doc = dBuilder.parse("http://www.nbp.pl/kursy/xml/"+filename+".xml");

    doc.getDocumentElement().normalize();
    NodeList nList = doc.getElementsByTagName("pozycja");

    for(int i = 0; i < nList.getLength(); i++) {
        Element nNode = (Element)nList.item(i);
        if(nNode.getElementsByTagName("kod_waluty").item(0).getTextContent().equals(currency)) {
            Kurs kurs = new Kurs();
            String data = nNode.getElementsByTagName("kurs_sprzedazy").item(0).getTextContent();
            data = data.replace(',', '.'); 
            kurs.kurs_sprzedazy = Float.parseFloat(data);
            data = nNode.getElementsByTagName("kurs_kupna").item(0).getTextContent();
            data = data.replace(',', '.');
            kurs.kurs_kupna = Float.parseFloat(data);
            return kurs;
        }
    }
    return null;
} 
```

# actionscript-3 - Actionscript：从另一个类的函数中找不到变量

> ID：15851704
> 
> 赞同：0
> 
> 时间：2013-04-06T13:46:13.407
> 
> 标签：actionscript-3, class, variables, actionscript, global-variables

我试着做

```
trace(classname.functionname.variablename);
//or
trace(classname.functionname().variablename); 
```

没用..任何想法，从classname.as变量中获取，这是在函数内部吗？顺便说一句，我尝试使功能静态，仍然没有工作任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:55:32.280

没有办法，因为那些在函数内部定义的变量只有在函数执行时才存在，并且一旦`return`函数体的 a 或 end 就消失了。为了从函数中获取您想要的任何值，请在函数外部创建一个类变量，在该函数中为其分配您想要的值，然后从其他地方对其进行寻址。

```
class test {
public static var foo:Number;
function bar():void {
    // ... some code
    foo=baz*2.54;
    // ... more code
}
}
class elsewhere {
    ...
    trace(test.foo);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:53:50.090

在函数内部创建的变量仅在该函数的范围内可用。如果变量是类成员变量（在类上声明为公共）；

```
public class x {
 public var varName:String="";
} 
```

您将能够以

```
classInstanceRef.varName 
```

不用说，您需要从该类实例化一个实例。

除非您的变量在类上声明为静态

```
public static varName:String=""; 
```

在这种情况下，您可以使用

```
className.varName; 
```

# google-app-engine - 使用带有 JPA 和云 sql 的谷歌应用引擎不使用端点返回任何记录

> ID：15851705
> 
> 赞同：0
> 
> 时间：2013-04-06T13:46:23.553
> 
> 标签：google-app-engine, jpa, google-cloud-sql

我有一个 Android 项目和一个应用引擎连接项目。我正在使用以下产品：JPA v2、App Engine 1.7.6、Java 1.7 编译器、Eclipse 4.2 Juno、EclipseLink 2.4.x

我正在使用云 sql 数据库。我能够在 JPA 和 DB Persective 窗口中成功连接并正常查询数据。我已经设置了我的应用程序引擎，以便将 SQL 开发连接到我的 CLOUD Sql 数据库。

我有一个表定义如下：

```
CREATE Table Test(codeid varchar(3) NOT NULL,codedesc varchar(20) NOT NULL,PRIMARY KEY (codeid)); 
```

实体类如下：

```
 import java.io.Serializable;
    import javax.persistence.*;

    @Entity
    public class Test implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    private String codeid;

    private String codedesc;

    public Test() {
    }

    public String getCodeid() {
    return this.codeid;
    }

    public void setCodeid(String codeid) {
this.codeid = codeid;
    }

    public String getCodedesc() {
        return this.codedesc;
    }

    public void setCodedesc(String codedesc) {
        this.codedesc = codedesc;
    }
    } 
```

端点类如下：

```
 @Api(name = "testendpoint" , version = "v1")
    public class TestEndpoint {

    /**
     * This method lists all the entities inserted in datastore.
     * It uses HTTP GET method and paging support.
     *
     * @return A CollectionResponse class containing the list of all entities
     * persisted and a cursor to the next page.
     */
    @ApiMethod(    httpMethod = "GET",    name = "listtest.list",     path = "ch/list")
    @SuppressWarnings({ "unchecked", "unused" })
    public CollectionResponse<Test> listTest(
            @Nullable @Named("cursor") String cursorString,
            @Nullable @Named("limit") Integer limit) {

        EntityManager mgr = null;
        Cursor cursor = null;
        List<Test> execute = null;

        try {
            mgr = getEntityManager();
            Query query = mgr.createQuery("select x from Test x");
            if (cursorString != null && cursorString != "") {
                cursor = Cursor.fromWebSafeString(cursorString);
                query.setHint(JPACursorHelper.CURSOR_HINT, cursor);
            }

            if (limit != null) {
                query.setFirstResult(0);
                query.setMaxResults(limit);
            }

            execute = (List<Test>) query.getResultList();
            cursor = JPACursorHelper.getCursor(execute);
            if (cursor != null)
                cursorString = cursor.toWebSafeString();

            // Tight loop for fetching all entities from datastore and accomodate
            // for lazy fetch.
            for (Test obj : execute);
        } 
        finally 
        {
            mgr.close();
        }

            return CollectionResponse.<Test> builder().setItems(execute).setNextPageToken       (cursorString).build();
    }

    private boolean containsCodeheader(Test test) {
        EntityManager mgr = getEntityManager();
        boolean contains = true;
        try {
            Test item = mgr
                    .find(Test.class, test.getCodeid());
            if (item == null) {
                contains = false;
            }
        } finally {
            mgr.close();
        }
        return contains;
    }

        private static EntityManager getEntityManager() {
        return EMF.get().createEntityManager();
    }

    } 
```

persistence.xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
  <persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

    <persistence-unit name="transactions-optional" transaction-type="RESOURCE_LOCAL">
        <provider></provider>
        <class>com.testApp.Test</class>
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/> 
```

我想要做的是运行我的端点以获取记录列表。我当我运行以下命令时，控制台中没有任何错误。

本地主机：8888/_ah/api/testendpoint/v1/ch/list

当我知道我的表中有记录时，我会在 Google Chrome 中得到以下信息。

```
 {
    "items" : [ ]
  } 
```

如果您需要更多信息，请告诉我。

我进行了进一步的测试，发现上面的示例适用于我之前从头开始创建的另一个测试应用程序引擎项目。我发现的一个区别是，当我在本地运行损坏的应用程序引擎时，我在控制台窗口中收到以下警告，而我在工作测试应用程序中没有：

后备存储 \war\WEB-INF\appengine-generated\local_db.bin 不存在。它将被创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:18:25.860

好吧，我很高兴地报告我找到了这个问题的答案。事实证明我做的一切都是正确的。我唯一要做的就是从 persistence.xml 文件中取出以下行：

```
<property name="datanucleus.ConnectionURL" value="appengine"/> 
```

我已经在文件中设置了以下内容：

```
<property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver"/>
<property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://Your db connection/databasename"/>. 
```

# mysql - 如果值已更改，则使用触发器插入行

> ID：15851706
> 
> 赞同：1
> 
> 时间：2013-04-06T13:46:25.337
> 
> 标签：mysql, sql, triggers

我有以下“狗”表。

```
+----+------+-------+--------+-------+-----+
| id | Name | Color |  Size  | Hair  | Age |
+----+------+-------+--------+-------+-----+
|  1 | Fido | Red   | Big    | Long  |   4 |
|  2 | Bud  | Red   | Small  | Short |   7 |
|  3 | Sox  | Blue  | Medium | Short |   3 |
+----+------+-------+--------+-------+-----+ 
```

如果更改了一个或多个值，例如`UPDATE dogs SET Name="Bud", Color="redish", Age=8 WHERE id=2;`，我想在另外两个表中插入几行：

```
INSERT INTO audits(id,auditTable,auditPK,dateTime) VALUES (0,'dogs',2,NOW());
INSERT INTO auditFields(id,auditsId,changeField,oldValue,newValue) VALUES (0,123,'Color','Red','Redish');
INSERT INTO auditFields(id,auditsId,changeField,oldValue,newValue) VALUES (0,123,'Age',7,8); 
```

auditsId 是第一个插入的自动增量 ID。请注意，名称更改没有插入，因为它仍然是“芽”。我正在考虑规范化 auditTable 和 changeField，但不确定是否应该。

这可能与触发器有关吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:14:55.767

试试这个

```
DELIMITER $$
CREATE TRIGGER tg_dogs_upd AFTER UPDATE ON dogs
FOR EACH ROW 
BEGIN
    SET @AID = 0;
    IF NEW.name <> OLD.name THEN
        IF @AID = 0 THEN
            INSERT INTO audits(auditTable,auditPK,`dateTime`) VALUES ('dogs', NEW.id, NOW());
            SELECT LAST_INSERT_ID() INTO @AID;
        END IF;
        INSERT INTO auditFields(auditsId,changeField,oldValue,newValue) VALUES (@AID,'Name',OLD.`name`,NEW.`name`);
    END IF;
    IF NEW.color <> OLD.color THEN
        IF @AID = 0 THEN
            INSERT INTO audits(auditTable,auditPK,`dateTime`) VALUES ('dogs', NEW.id, NOW());
            SELECT LAST_INSERT_ID() INTO @AID;
        END IF;
        INSERT INTO auditFields(auditsId,changeField,oldValue,newValue) VALUES (@AID,'Color',OLD.color,NEW.color);
    END IF;
    IF NEW.size <> OLD.size THEN
        IF @AID = 0 THEN
            INSERT INTO audits(auditTable,auditPK,`dateTime`) VALUES ('dogs', NEW.id, NOW());
            SELECT LAST_INSERT_ID() INTO @AID;
        END IF;
        INSERT INTO auditFields(auditsId,changeField,oldValue,newValue) VALUES (@AID,'Size',OLD.size,NEW.size);
    END IF;
    IF NEW.hair <> OLD.hair THEN
        IF @AID = 0 THEN
            INSERT INTO audits(auditTable,auditPK,`dateTime`) VALUES ('dogs', NEW.id, NOW());
            SELECT LAST_INSERT_ID() INTO @AID;
        END IF;
        INSERT INTO auditFields(auditsId,changeField,oldValue,newValue) VALUES (@AID,'Hair',OLD.hair,NEW.hair);
    END IF;
    IF NEW.age <> OLD.age THEN
        IF @AID = 0 THEN
            INSERT INTO audits(auditTable,auditPK,`dateTime`) VALUES ('dogs', NEW.id, NOW());
            SELECT LAST_INSERT_ID() INTO @AID;
        END IF;
        INSERT INTO auditFields(auditsId,changeField,oldValue,newValue) VALUES (@AID,'Age',OLD.age,NEW.age);
    END IF;
END$$

DELIMITER ; 
```

**更新：**使用临时表的更简洁的版本

```
DELIMITER $$
CREATE TRIGGER tg_dogs_upd AFTER UPDATE ON dogs
FOR EACH ROW 
BEGIN
    DROP TEMPORARY TABLE IF EXISTS tempAuditFields;
    CREATE TEMPORARY TABLE tempAuditFields(changeField VARCHAR(256),oldValue VARCHAR(256),newValue VARCHAR(256));
    IF NEW.name <> OLD.name THEN
        INSERT INTO tempAuditFields VALUES ('Name',OLD.`name`,NEW.`name`);
    END IF;
    IF NEW.color <> OLD.color THEN
        INSERT INTO tempAuditFields VALUES ('Color',OLD.color,NEW.color);
    END IF;
    IF NEW.size <> OLD.size THEN
        INSERT INTO tempAuditFields VALUES ('Size',OLD.size,NEW.size);
    END IF;
    IF NEW.hair <> OLD.hair THEN
        INSERT INTO tempAuditFields VALUES ('Hair',OLD.hair,NEW.hair);
    END IF;
    IF NEW.age <> OLD.age THEN
        INSERT INTO tempAuditFields VALUES ('Age',OLD.age,NEW.age);
    END IF;

    IF (SELECT COUNT(*) FROM tempAuditFields) > 0 THEN
        INSERT INTO audits(auditTable,auditPK,`dateTime`) VALUES ('dogs', NEW.id, NOW());
        SELECT LAST_INSERT_ID() INTO @AID;
        INSERT INTO auditFields(auditsId,changeField,oldValue,newValue)
        SELECT @AID,changeField,oldValue,newValue FROM tempAuditFields;
        DROP TEMPORARY TABLE tempAuditFields;
    END IF;
END$$

DELIMITER ; 
```

# c# - 安装我的应用程序后，添加/删除程序中没有条目（我使用了安装项目）

> ID：15851708
> 
> 赞同：1
> 
> 时间：2013-04-06T13:46:53.400
> 
> 标签：c#, visual-studio-2010, visual-studio, setup-project, setup-deployment

我对 Visual Studio 中的安装项目非常陌生，我刚刚尝试创建一个，它按照我在安装项目中的配置部署了我的文件。但是在测试安装文件（.msi）之后，有一些我无法理解的东西：

1.  控制面板的添加/删除程序列表中没有条目，但我尝试重新运行安装程序，它显示一个对话框说我无法安装，因为目标计算机中已经安装了另一个版本，我应该先卸载那个版本，但是我在添加/删除程序中找不到条目，​​也没有uninstall.exe文件。我尝试在注册表中搜索包含我的应用程序可执行文件名的所有条目并删除了这些条目，但它仍然向我显示该对话框。（必须有某种方法可以检测目标机器上安装的另一个版本）。

2.  如何在安装项目中为我部署的应用程序创建uninstall.exe？？？我认为它应该在我构建我的安装项目时自动为我创建。

您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:49:15.630

使用 msi 包安装应用程序时，没有uninstall.exe。如果您双击已安装应用程序的 msi，您可以选择进行修复或卸载。

你给你的安装包起什么名字？也许您留下了默认名称，或者给了它一些与您的应用程序不同的“奇怪”名称，这就是您找不到它的原因。在7中，您可以按安装日期对已安装的程序进行排序并检查最后安装的内容，不记得在XP中是否可以。

# c# - 从 .jar 文件中捕获非标准输出

> ID：15851710
> 
> 赞同：1
> 
> 时间：2013-04-06T13:46:58.590
> 
> 标签：c#, java, user-interface, jar, minecraft

我正在尝试制作一个用于在 C# 中托管 Minecraft CraftBukkit 服务器的 GUI。CraftBukkit 服务器使用 .jar 托管，其源代码可在此处找到：[https](https://github.com/Bukkit/CraftBukkit/) ://github.com/Bukkit/CraftBukkit/ 。

到目前为止，我能够从它接收输出并像这样给它输入：

```
var serverProcInfo = new ProcessStartInfo("javaw",
                                                  "-jar -Xms" + Ram + "M -Xmx" + Ram + "M \"" +
                                                  JarFileLocation + "\" -nojline " + AdditionalParams)
            {
                RedirectStandardInput = true,
                RedirectStandardOutput = true,
                RedirectStandardError = true,
                UseShellExecute = false
            };

        serverProc = new Process {StartInfo = serverProcInfo };

        serverProc.OutputDataReceived += ServerOutputDataReceived;
        serverProc.ErrorDataReceived += ServerOutputDataReceived;

        serverProc.BeginOutputReadLine();
        serverProc.BeginErrorReadLine();
        serverProc.WaitForExit(); 
```

**我想创建一个当前在线玩家的列表。**

当玩家加入时，会输出这样的消息`player < playername > has joined the server`。我知道我可以拆分此字符串并获取玩家姓名，但我认为这不是很好，因为有人可能会在聊天中说类似的话，而我的程序可以将其解释为好像有人加入了服务器。

我看到其他程序这样做（“BukkitGUI”），但我不确定我该怎么做。**.jar 文件是否输出播放器列表？我应该在它的源代码中寻找什么来查看它的输出？**

我对 C# 比较陌生，从未学习过 Java。任何帮助，将不胜感激。

**EDIT1：** 我发现 CraftBukkit.jar 有一个这样的类：

```
@SuppressWarnings("unchecked")
public Player[] getOnlinePlayers() {
    List<EntityPlayer> online = playerList.players;
    Player[] players = new Player[online.size()];

    for (int i = 0; i < players.length; i++) {
        players[i] = online.get(i).playerConnection.getPlayer();
    }
    return players;
} 
```

有什么办法可以调用这个类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T12:48:49.480

不幸的是，java 和 C# 之间的跨进程通信并不是那么简单。您最好的选择是将 list 命令发送到服务器并解析输出，或者如果您愿意编写一些 java，您可以为 minecraft 服务器创建一个插件，该插件打开一个套接字并来回发送信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T17:16:19.950

我找到了解决方案。这实际上很容易。

首先，我创建一个将启动 .jar 文件的进程。然后我执行以下操作：

```
Process.OutputDataReceived += ServerOutputHandler.ServerOutputReceived;
Process.ErrorDataReceived += ServerOutputHandler.ServerOutputReceived; 
```

在我开始这个过程之后（`Process.Start`）：

```
Process.BeginOutputReadLine();
Process.BeginErrorReadLine(); 
```

如果您想了解有关处理 .jar 文件的更多信息，请随时查看我的开源项目（我不久前放弃了）[ServerCrafter](https://servercrafter.codeplex.com/)。对于我上面提到的代码部分，请看这里：[Server Crafter source code: ServerCrafter\ServerCrafter.ClassLibrary\ClassLibrary\Server\Server.cs](https://servercrafter.codeplex.com/SourceControl/latest#ServerCrafter/ServerCrafter.ClassLibrary/ClassLibrary/Server/Server.cs)

# javascript - 如何强制网站的视图从页面底部开始（以便用户必须向上滚动）

> ID：15851715
> 
> 赞同：1
> 
> 时间：2013-04-06T13:47:21.997
> 
> 标签：javascript, css, scroll, footer

我想建立一个新颖的以豆茎为主题的网站，其中内容是自下而上而不是自上而下构建的。想象一个 10,000 像素高的页面。有没有办法：

1.  堆叠内容，从页面底部的 div 开始，每个额外添加的 div 都堆叠在其前身之上？
2.  强制用户查看页面，以便他们在访问页面时从底部开始并且必须向上滚动才能访问其他内容？

我意识到这并不能提供直观的用户体验，所以请忽略我为什么要这样做，并专注于如何做到这一点的技术细节。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:49:42.713

要滚动到底部，请尝试以下操作：

```
x = 0;  //horizontal coord
y = document.height; //vertical coord
window.scroll(x,y); 
```

要以相反的顺序构建您的内容，请尝试使用 jQuery[前置](http://api.jquery.com/prepend/)功能。

# google-drive-api - Google Drive 的 appdata 大小限制

> ID：15851716
> 
> 赞同：0
> 
> 时间：2013-04-06T13:47:34.563
> 
> 标签：google-drive-api, appdata

我想知道新的 appdata 文件夹是否支持子文件夹。它只是一个别名为“appdata”且对用户隐藏的文件夹吗？

appdata 文件夹中的文件也可以与使用同一应用程序的其他用户共享，例如 Google Drive 中的常规文件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:42:55.813

除了用户的配额可用性之外，目前对 App Data 没有限制。如果用户有 100Mb 的空间，那么您可以在其中创建 100Mb 的数据。

您不能在用户之间共享 App Data 文件夹。这是一个不太可能受到限制的硬限制。如果您有用例，请列出它们，因为 Google 始终由社区请求驱动。

# arrays - 对元胞数组的每个元素执行算术运算的最快方法是什么？

> ID：15851718
> 
> 赞同：5
> 
> 时间：2013-04-06T13:47:44.797
> 
> 标签：arrays, performance, matlab, loops

假设我想将单元格数组的每个元素`A`与一个系数相乘`k`。我可以这样做：

```
A = cellfun(@(x) k*x, A, 'UniformOutput', false) 
```

但这非常慢。有没有更快更好的方法？元胞数组元素是可变长度向量，因此`cell2num`不适用。

**编辑：**基于*fpe*对 for 循环的建议，这里是一个示例基准。从这个数据开始

```
A = arrayfun(@(n) rand(n,1), randi(5,1000,1000), 'UniformOutput',false); 
```

上面的`cellfun`调用需要`9.45 seconds`一个 for 循环：

```
A2 = cell(size(A));
for i = 1:size(A,1), for j = 1:size(A,2), A2{i,j} = A{i,j}*k; end; end
A = A2; 
```

，`1.67 seconds`这是一个显着的改进。我仍然更喜欢快几个数量级的东西。（我也不明白为什么 Matlab 解释器无法像 for 循环一样快速调用 cellfun。它们在语义上是相同的。）

**编辑 2：** Amro 建议制作一个单独的 for 循环要快得多：

```
for i = 1:numel(A), A{i} = A{i}*k; end 
```

需要`1.11 seconds`，如果我`pack`在它之前运行它来对齐内存就好了`0.88 seconds`。

实现一个 MEX 函数来做到这一点实际上并没有好多少：`0.73 seconds`, ( `0.53 seconds`after `pack`)，这表明在 Matlab 中分配许多小矩阵很慢。

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) {
    if (nrhs != 2)
        mexErrMsgTxt("need 2 arguments (Cell, Coefficient)");

    mwSize const* size = mxGetDimensions(prhs[0]);
    int N = mxGetNumberOfDimensions(prhs[0]);

    if (mxGetNumberOfElements(prhs[1]) != 1)
        mexErrMsgTxt("second argument to multcell must be a scalar");

    double coefficient = *mxGetPr(prhs[1]);

    plhs[0] = mxCreateCellArray(N, size);

    int M = mxGetNumberOfElements(prhs[0]);

    for (int i = 0; i < M; i++) {
        mxArray *r = mxGetCell(prhs[0], i);
        mxArray *l = mxCreateNumericArray(mxGetNumberOfDimensions(r),
                                          mxGetDimensions(r),
                                          mxDOUBLE_CLASS,
                                          mxREAL);
        double *rp = mxGetPr(r);
        double *lp = mxGetPr(l);
        int num_elements = mxGetNumberOfElements(r);
        for (int i = 0; i < num_elements; i++)
            lp[i] = rp[i] * coefficient;
        mxSetCell(plhs[0], i, l);
    }
} 
```

然而，作弊一点，并实现一个实际编辑内存的 MEX 函数*似乎*是从操作中获得合理性能的唯一方法：`0.030 seconds`. `mxUnshareArray`这使用了Amro 建议的无证文件。

```
#include "mex.h"

extern "C" bool mxUnshareArray(mxArray *array_ptr, bool noDeepCopy);

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) {
    if (nrhs != 2)
        mexErrMsgTxt("need 2 arguments (Cell, Coefficient)");

    mwSize const* size = mxGetDimensions(prhs[0]);
    int N = mxGetNumberOfDimensions(prhs[0]);

    if (mxGetNumberOfElements(prhs[1]) != 1)
        mexErrMsgTxt("second argument to multcell must be a scalar");

    double coefficient = *mxGetPr(prhs[1]);

    mxUnshareArray(const_cast<mxArray *>(prhs[0]), false);
    plhs[0] = const_cast<mxArray *>(prhs[0]);

    int M = mxGetNumberOfElements(prhs[0]);

    for (int i = 0; i < M; i++) {
        mxArray *r = mxGetCell(prhs[0], i);
        double *rp = mxGetPr(r);
        int num_elements = mxGetNumberOfElements(r);
        for (int i = 0; i < num_elements; i++)
            rp[i] = rp[i] * coefficient;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:47:28.220

不完全是答案，但这是一种查看 JIT 编译器和加速器在两种方法（cellfun 与 for-loop）中的影响的方法：

```
feature('jit', 'off'); feature('accel', 'off');
tic, A = cellfun(@(x) k*x, A, 'UniformOutput', false); toc
tic, for i=1:numel(A), A{i} = A{i}*k; end, toc

feature('jit', 'on'); feature('accel', 'on');
tic, A = cellfun(@(x) k*x, A, 'UniformOutput', false); toc
tic, for i=1:numel(A), A{i} = A{i}*k; end, toc 
```

我得到以下

```
Elapsed time is 25.913995 seconds.
Elapsed time is 13.050288 seconds. 
```

对比

```
Elapsed time is 10.053347 seconds.
Elapsed time is 1.978974 seconds. 
```

在第二个打开优化。

顺便说一句，并行`parfor`性能要差得多（至少在我的本地测试机器上，池大小为 2 个进程）。

看到您发布的结果，MEX 功能是要走的路:)

# php - 当优先级不是整数时，SplPriorityQueue 如何工作？

> ID：15851726
> 
> 赞同：2
> 
> 时间：2013-04-06T13:48:16.267
> 
> 标签：php, spl

我想知道`SplPriorityQueue`当优先级为`string`or时如何工作`int`。快速示例：

```
 $queue = new \SplPriorityQueue();

    $queue->insert('b', 5);
    $queue->insert('c', 5);
    $queue->insert('d', 1);
    $queue->insert('a', 10);
    $queue->insert('1', 'a');
    $queue->insert('2', 'b');

    print_r($queue); 
```

输出：

```
Array
(
    [5] => a
    [4] => b
    [3] => c
    [2] => d
    [1] => 2
    [0] => 1
) 
```

**问题**：为什么`int`优先列出优先项（即abcd）？当优先级为`string`（项目 1 2）时，被`b`认为大于`a`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:10:28.407

这是由 决定的[`SplPriorityQueue::compare()`](http://www.php.net/manual/en/splpriorityqueue.compare.php)。文档说明了它的返回值：

> ***比较结果，如果priority1***大于***priority2***则为正整数，如果相等则为 0，否则为负整数。
> 
> > **笔记：**
> > 
> > 具有相同优先级的多个元素将不按特定顺序出队。

请注意，参数***priority1***和***priority2***被声明为`mixed`并且没有提到转换为int。

这意味着，应用的通常规则`>`（[请参阅比较运算符文档](http://www.php.net/manual/en/language.operators.comparison.php)）：

*   字符串与字符串比较：词法比较（如果两个字符串都是数字，则为数字）
*   int 与 int 比较：数值比较
*   string 与 int 比较：字符串转换为数字，数值比较

`(int)'a'`并`(int)'b'`解析为`0`，这就是为什么这些项目在所有数字之后都排在最后的原因。

**这些是您的示例的相关比较：**

```
php > var_dump(1 > 'a');
bool(true)
php > var_dump(1 > 'b');
bool(true)
php > var_dump('b' > 'a');
bool(true) 
```

# entity-framework - 在实体框架中更改表名（代码优先）

> ID：15851728
> 
> 赞同：2
> 
> 时间：2013-04-06T13:48:19.087
> 
> 标签：entity-framework, ef-code-first, tablename

上下文如下：

一个人可能属于一个组（他将是一个成员）并且可能是一个组的管理员。这在代码优先中是这样建模的：

```
class Group
{
     [InverseProperty("GroupsWhereIamAdmin")]
     public virtual ICollection<Person> Admins {get; set;}
     [InverseProperty("GroupsWhereIamMember")]
     public virtual ICollection<Person> Members {get; set;}
}

class Person
{
     [InverseProperty("Members")]
     public virtual ICollection<Group> GroupsWhereIamMember {get; set;}
     [InverseProperty("Admins")]
     public virtual ICollection<Group> GroupsWhereIamAdmin {get; set;}
} 
```

问题是生成的表的名称是这些：

GroupPersons
GroupPersons1

我希望他们是：

GroupAdmins
GroupMembers

**我怎样才能以简单的方式实现这一目标？（即：使用属性）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:55:18.287

所以我想这必须用 Fluent API 来完成，所以我删除了数据注释，即：[InverseProperty(...)]'s，然后这样做：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Many to many: A group has members, and a person has groups.
        modelBuilder.Entity<Group>()
            .HasMany(e => e.Members)
            .WithMany(m => m.GroupsWhereIAmMember)
            .Map(mc =>
            {
                mc.ToTable("GroupMembers");
                mc.MapLeftKey("GroupId");
                mc.MapRightKey("MemberId");
            });

        // Many to many: A group has admins, and a person has groups where he is admin
        modelBuilder.Entity<Group>()
            .HasMany(e => e.Admins)
            .WithMany(m => m.GroupsWhereIAmAdmin)
            .Map(mc =>
            {
                mc.ToTable("GroupAdmins");
                mc.MapLeftKey("GroupId");
                mc.MapRightKey("AdminId");
            });
    } 
```

# c# - 在 C# 中向字符串添加空格

> ID：15851730
> 
> 赞同：25
> 
> 时间：2013-04-06T13:48:42.333
> 
> 标签：c#, string

我得到一个`string`作为参数。

每个字符串应该包含 30 个字符，在我检查它的长度后，我想在字符串的末尾添加空格。
例如，如果传递的字符串是 25 个字符长，我想再添加 5 个空格。

问题是，如何在字符串中添加空格？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-06T13:50:06.540

您可以为此使用[String.PadRight](http://msdn.microsoft.com/en-us/library/34d75d7s%28v=vs.100%29.aspx)。

> 返回一个新字符串，该字符串通过在右侧用空格填充字符来左对齐该字符串中的字符，达到指定的总长度。

例如：

```
string paddedParam = param.PadRight(30); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-06T13:52:50.977

您可以[`String.PadRight`](http://msdn.microsoft.com/en-us/library/system.string.padright%28v=vs.110%29.aspx)为此使用方法；

> 返回一个指定长度的新字符串，其中当前字符串的末尾用空格或指定的 Unicode 字符填充。

```
string s = "cat".PadRight(10);
string s2 = "poodle".PadRight(10);

Console.Write(s);
Console.WriteLine("feline");
Console.Write(s2);
Console.WriteLine("canine"); 
```

输出将是；

```
cat       feline
poodle    canine 
```

这是一个[`DEMO`](http://ideone.com/z0oy0E).

> PadRight 在字符串右侧添加空格。它使文本更易于阅读或存储在数据库中。填充字符串会在开头或结尾添加空格或其他字符。PadRight 支持任何字符进行填充，而不仅仅是空格。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-06T13:51:39.940

使用[`String.PadRight`](http://msdn.microsoft.com/en-us/library/34d75d7s.aspx)which 将分隔一个字符串，使其与`int`提供的一样长。

```
var str = "hello world";
var padded = str.PadRight(30);
// padded = "hello world                   " 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-06T14:04:24.907

您可以在 C# 中使用填充

例如

```
 string s = "Example";
  s=s.PadRight(30); 
```

我希望它能解决你的问题。

# ruby - 一个文件中的多个 'exec' 和 'print' 命令

> ID：15851732
> 
> 赞同：1
> 
> 时间：2013-04-06T13:48:50.063
> 
> 标签：ruby

`exec`混合命令和命令时使用分号不起作用`print`。最好的方法是什么？

```
print "Initializing tests...\n"
print 'Testing 00_hello\n'
exec  'cd 00_hello; rspec hello_spec.rb; cd ..'
print 'Testing 01_temperature\n'
exec  'cd 01_temperature; rspec temperature_spec.rb; cd ..' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T13:54:08.003

你混在一起`exec`了`system`。`exec` *用运行参数的命令替换*当前进程。如果要运行文件并等待它并重新获得控制权，则需要使用`system`：

```
print "Initializing tests...\n"
print 'Testing 00_hello\n'
system  'cd 00_hello; rspec hello_spec.rb; cd ..'
print 'Testing 01_temperature\n'
system  'cd 01_temperature; rspec temperature_spec.rb; cd ..' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T13:53:23.197

如果您问为什么文件的最后两行不会执行，那与您使用分号无关。`exec`替换当前进程。调用后的任何代码`exec`都不会执行，因为进程一旦`exec`被调用就停止执行。大多数情况下你想使用`system`，而不是`exec`。

我还应该指出，没有必要`cd ..`在给`exec`or的命令结束时做`system`。`cd`仅影响执行它的 shell 以及从该 shell 产生的任何进程——它不影响父进程。因此，如果您`cd`在 shell 命令中，您的 ruby​​ 进程将不会受此影响，因此无需`cd`返回。

哦，您不能像`\n`在单引号字符串中那样使​​用转义序列，它们只会显示为反斜杠，后跟字母 n。如果你想使用，你需要使用双引号字符串`\n`。如果你使用`puts`而不是`print`，它会在最后自动插入一个换行符，所以你根本不需要`\n`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T18:49:53.137

将字符串放在反引号（`）之间会将字符串作为系统命令执行。

例如试试这个。

```
print "Initializing tests...\n"
print 'Testing 00_hello\n'
`cd 00_hello; rspec hello_spec.rb; cd ..`
print 'Testing 01_temperature\n'
`cd 01_temperature; rspec temperature_spec.rb; cd ..` 
```

# javascript - jQuery简单插件冲突

> ID：15851737
> 
> 赞同：0
> 
> 时间：2013-04-06T13:49:09.757
> 
> 标签：javascript, jquery, html, css, slider

我正在开发简单的网站，在这个网站上我有使用 jQuery 的菜单和使用 jQuery 的图像滑块。这是我导入脚本和 css 的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">    </script>
<link rel="stylesheet" type="text/css" href="css/jquery.slider.css" />
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.slider.min.js"></script>

<!--[if IE 6]>
<link rel="stylesheet" type="text/css" href="js/slider/themes/carbono/jquery.slider.ie6.css" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function ($) {
   $(".slider").slideshow({
      width: 794,
      height: 294,
      transition: 'bar'
   });
});

$(document).ready(function () {
   $('#menu a').mouseover(function () {
      $(this).switchClass('normal', 'active', 50, 'easeOutBounce', function () {});
   });
});
$(document).ready(function () {
   $('#menu a').mouseleave(function () {
      $(this).switchClass('active', 'normal', 50, 'easeOutBounce', function () {});
   });
});
</script> 
```

在这种情况下，只有滑块在工作。此脚本不起作用：

```
$(document).ready(function () {
   $('#menu a').mouseover(function () {
      $(this).switchClass('normal', 'active', 50, 'easeOutBounce', function () {});
   });
});
$(document).ready(function () {
   $('#menu a').mouseleave(function () {
      $(this).switchClass('active', 'normal', 50, 'easeOutBounce', function () {});
   });
}); 
```

是什么原因，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:56:03.443

我遇到了同样的问题

我的代码如下

```
...
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="jcobb-slider/js/bjqs-1.3.min.js"></script>
<link rel="stylesheet" href="jcobb-slider/bjqs.css" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
... 
```

我想在同一页面上使用 jQuery 图像滑块或 jqueryUI 选项卡式内容。

我所做的是在这里：

```
<script type="text/javascript" language="javascript" class="secret-source">

                $.noConflict();

                jQuery(document).ready(function ($) {

                    $('#banner-fade').bjqs({
                        height: 280,
                        width: 570,
                        responsive: true
                    });

                    $("#tabs").tabs(); //jQuery UI Tabs

                });

            </script> 
```

然后它现在可以工作了。

# jquery - .fadeIn() / .hide() 上的 Safari jQuery 重影效果

> ID：15851738
> 
> 赞同：1
> 
> 时间：2013-04-06T13:49:12.270
> 
> 标签：jquery, safari

在 Safari 中，我注意到反复使用时出现错误的重影`fadeIn()`效果`hide()`。

隐藏时，它仍然会在元素曾经所在的位置显示某种~~边框轮廓。~~

这是一个 jsFiddle：http: [//jsfiddle.net/jlmmns/7rxvf/8/](http://jsfiddle.net/jlmmns/7rxvf/8/)

我在 OS X 10.8.3 上使用 Safari 版本 6.0.3 (8536.28.10)。

**更新：**正如[烤](https://stackoverflow.com/questions/15851738/safari-jquery-ghosting-effect-on-fadein-hide?noredirect=1#comment22558795_15851738)的建议，设置`outline: 1px solid transparent;`元素，成功了。

# objective-c - UIScrollView，pagingEnabled，滚动惯性，以及UIView宽度的子部分

> ID：15851740
> 
> 赞同：1
> 
> 时间：2013-04-06T13:49:29.127
> 
> 标签：objective-c, uiview, uiscrollview, custom-scrolling

在我的应用程序中，我使用的是由相同大小的单元格组成的滚动画布。行数不受限制，但列数固定为 13。在任何时候，我都有 7 个单元格适合视图的宽度。

我编写了自己的平铺 UIScrollView，一切都很好并且工作正常，除了一件事：我想在单元格边界上启用“分页”，而不是在“页面”边界上。

换句话说，我希望水平滚动移动不超过“一次一个单元格”。这是一个可用性问题。

在 pagingEnabled=YES 的标准 UIScrollView 中，从一页移动到下一页时存在一些惯性，但随后页面被定义为具有视图的完整宽度。我想将页面的概念定义为视图宽度的 1/7，以便在将显示从单元格 1-7 移动到单元格 2-8、单元格 3-9 等时获得相同的惯性。 .

我该怎么做呢？

我发现[了这个](https://stackoverflow.com/questions/11966914/uiscrollview-setting-page-size-dynamically)和[这个，但这是一个相关但不同的问题](https://stackoverflow.com/questions/6945964/uiscrollview-custom-paging)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:23:04.247

“尝试让你的滚动视图小于屏幕的大小（宽度方向），但取消选中 IB 中的‘剪辑子视图’复选框。”

更多信息[在这里](https://stackoverflow.com/a/1677400/427083)。

# ios - 使用 AVCaptureDevice 时重置 UI 开关

> ID：15851742
> 
> 赞同：1
> 
> 时间：2013-04-06T13:49:31.977
> 
> 标签：ios, objective-c, cocoa-touch

我有一个`UISWitch`默认位置设置为`off`

开关可选地`on`由用户设置，我如何将该开关从另一个按钮/动作转回关闭。

```
- (IBAction)switchToggled:(id)sender {

if (_toggle.on){

  AVCaptureDevice *backCamera = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if ( [backCamera isTorchAvailable] && [backCamera isTorchModeSupported:AVCaptureTorchModeOn]  )
{
    BOOL success = [backCamera lockForConfiguration:nil];
    if ( success )
    {
        [backCamera setTorchMode:AVCaptureTorchModeOn];
        [backCamera unlockForConfiguration];
      }
    }
}

else {

    AVCaptureDevice *backCamera = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    if ( [backCamera isTorchAvailable] && [backCamera isTorchModeSupported:AVCaptureTorchModeOn]  )
    {
        BOOL success = [backCamera lockForConfiguration:nil];
        if ( success )
        {
            [backCamera setTorchMode:AVCaptureTorchModeOff];
            [backCamera unlockForConfiguration];
        }
    }

} 
```

从 ui 按钮重置开关状态：

```
 - (IBAction)toggledOffSwitch:(id)sender {
     _toggle.on = NO; 
    } 
```

或者

```
 - (IBAction)toggledOffSwitch:(id)sender {
  [_toggle setOn:NO];
  [_toggle setEnabled: NO];
   _torch.enabled = NO;
   _torch.on = NO;

  } 
```

似乎没有这样做

更新了更多代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:18:40.780

你确定你`- (IBAction)toggledOffSwitch:(id)sender`在 Xcode 中绑定了你的动作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:19:06.690

你试过这个方法吗？

```
- (void)setOn:(BOOL)on animated:(BOOL)animated 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:23:51.777

好的，想通了这个

```
 - (IBAction)toggledOffSwitch:(id)sender {

AVCaptureDevice *backCamera = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
if ( [backCamera isTorchAvailable] && [backCamera isTorchModeSupported:AVCaptureTorchModeOn]  )
{
    BOOL success = [backCamera lockForConfiguration:nil];
    if ( success )
    {
        [backCamera setTorchMode:AVCaptureTorchModeOff];
        [backCamera unlockForConfiguration];

        _torch.on = NO;
    }

    }

} 
```

# android - 对切 换按钮使用不同的 sql 查询

> ID：15851744
> 
> 赞同：0
> 
> 时间：2013-04-06T13:49:33.893
> 
> 标签：android, sql

我正在数据库中搜索用户输入。这是一个字典应用程序。我有一个切换按钮，允许用户在两​​种语言之间切换。它可以工作，但是当我切换到其他语言时它不起作用。基本上我想在按钮切换到另一种语言时应用不同的 sql 查询。

这是我的代码：

```
try {

        Cursor cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT * FROM fr_definition JOIN fr_adresse_definition ON fr_definition.data_id = fr_adresse_definition.definition WHERE index_nom_adresse='"+word[0].toLowerCase().trim()+"'", null);

        cursor.moveToFirst();
        if (cursor.getCount() != 0) {

            if (word[1] == null || word[1].equals("English")) {
                translatedWord = cursor.getString(2);
            } else {

                 //dictionary.getDictionaryDatabase().rawQuery("SELECT * FROM en_definition JOIN en_adresse_definition ON en_definition.data_id = en_adresse_definition.definition WHERE index_nom_adresse='"+word[0].toLowerCase().trim()+"'", null);
                translatedWord = cursor.getString(1);
            }
        } else {
            translatedWord = "The word is not in database";
        }
        cursor.close();
    } catch (SQLiteException sqle) {
        translatedWord = "The word is not in database";
    }

    dictionary.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:30:31.170

这样的事情不会让您使用其他查询吗？

```
try {
    Cursor cursor;

    if (word[1] == null || word[1].equals("English")) {
         cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT * FROM fr_definition JOIN fr_adresse_definition ON fr_definition.data_id = fr_adresse_definition.definition WHERE index_nom_adresse='"+word[0].toLowerCase().trim()+"'", null);
         cursor.moveToFirst();
         if (cursor.getCount() != 0) {
             translatedWord = cursor.getString(2);
         }
    } else {
         cursor = dictionary.getDictionaryDatabase().rawQuery("SELECT * FROM en_definition JOIN en_adresse_definition ON en_definition.data_id = en_adresse_definition.definition WHERE index_nom_adresse='"+word[0].toLowerCase().trim()+"'", null);
         cursor.moveToFirst();
         if (cursor.getCount() != 0) {
              translatedWord = cursor.getString(1);
         } 
    }

    cursor.close();
} catch (SQLiteException sqle) {
    translatedWord = "The word is not in database";
}

dictionary.close(); 
```

# android - 相对布局，图像在不同手机上的错误定位

> ID：15851750
> 
> 赞同：0
> 
> 时间：2013-04-06T13:50:09.163
> 
> 标签：android, drag-and-drop, android-relativelayout, drag

我正在使用相对布局开发一个拖放图像的 android 项目。

这里的问题是，当我在 Galaxy Grand 手机上测试图像时，图像按预期放置，但如果我在 Galaxy Nexus 上测试相同的项目，图像在屏幕上的位置似乎有误。请查看下面的屏幕截图：1）galaxy nexus
2）galaxy 大屏幕截图并帮助我。

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#3B5998" >

    <Chronometer
        android:id="@+id/chronometer"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:textSize="20sp"
        android:textStyle="bold"
        android:typeface="sans"
        android:visibility="gone" />

    <ImageView
        android:id="@+id/imagebackgroundofearth"
        android:layout_width="100dp"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:layout_height="100dp"
        android:src="@drawable/imagered" />

    <ImageView
        android:id="@+id/imageviewunderleft"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="150dp"
        android:layout_marginLeft="30dp"
        android:src="@drawable/imagered" />

    <ImageView
        android:id="@+id/imageviewunderright"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="150dp"
        android:layout_marginLeft="190dp"
        android:src="@drawable/imageorange" />

    <ImageView
        android:id="@+id/imageviewabove"
        android:layout_width="100sp"
        android:layout_height="100sp"
        android:layout_marginTop="15dp"
        android:layout_marginLeft="110dp"
        android:src="@drawable/earth" />

    <Button
        android:id="@+id/reload"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="30dp"
        android:layout_marginLeft="100dp"
        android:layout_marginRight="100dp"
        android:text="Reload" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T02:23:11.810

像这样的一些小变化可能是您正在寻找的：

```
<Chronometer
        android:id="@+id/chronometer"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:textSize="20sp"
        android:textStyle="bold"
        android:typeface="sans"
        android:visibility="gone" />

<ImageView
        android:id="@+id/imagebackgroundofearth"
        android:layout_width="100dp"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:layout_height="100dp"
        android:src="@drawable/imagered" />

<ImageView
        android:id="@+id/imageviewunderleft"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="150dp"
        android:layout_marginLeft="30dp"
        android:src="@drawable/imagered" />

<ImageView
        android:id="@+id/imageviewunderright"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="150dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="30dp"
        android:src="@drawable/imageorange" />

<ImageView
        android:id="@+id/imageviewabove"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_marginTop="15dp"
        android:layout_centerHorizontal="true"
        android:src="@drawable/earth" />

<Button
        android:id="@+id/reload"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="30dp"
        android:layout_marginLeft="100dp"
        android:layout_marginRight="100dp"
        android:text="Reload" /> 
```

如果你让两个底部视图都从它们各自的侧面测量，它们将始终相互匹配——有时更近一些，有时更远一些。如果您愿意，也可以使它们相对于中心。

我不确定你想对地球做什么。如果您希望它们对齐，则最好使它们具有相同的对齐方式。此外，您在我认为您的意思是 dp 的地方使用了一些 sp。

我希望这个对你有用。

# html - 在 HTML5 [多个] 文件输入中选择的最大文件数是多少？

> ID：15851751
> 
> 赞同：12
> 
> 时间：2013-04-06T13:50:16.217
> 
> 标签：html, file-upload, fileapi, html-input

我有 64000 张小图像要上传到我的网站（使用现有验证，所以没有 FTP 等）。我已经为此创建了一个 HTML5 [multiple] type=file 输入，用于一百或数百个图像。几百不是问题。图像被批处理并发送到服务器。

但是当我选择一个包含 ~ 16000 张图像的文件夹时，文件输入的 FileList 为空...... onchange 事件触发，但文件列表为空。浏览器（或文件系统或操作系统？）似乎在选择这么多文件时遇到问题。

我创建了一个非常小的工具来帮助确定最大值：http: [//jsfiddle.net/rudiedirkx/Ehhk5/1/show/](http://jsfiddle.net/rudiedirkx/Ehhk5/1/show/)

```
$inp.onchange = function(e) {
    var l = 0, b = 0;
    for (var i=0, F=this.files, L=F.length; i<L; i++) {
        l += F[i].name.length;
        b += F[i].size;
    }
    $nf.innerHTML += this.files.length + ' files: ' + (b/1000/1000) + ' MB / ' + l + ' chars of filename<br>';
}; 
```

它所做的只是计数：

*   文件数
*   所有文件名组合的字符数
*   总文件大小的 MB 数

当我尝试这个时，我得到的最多：

> 1272 个文件：176.053987 MB / 31469 个字符的文件名

（在 32 和 64 位 Win7、Chrome 26-52 上）

下一个图像（失败）将是：

*   1273张图片，没有明显的截断
*   文件大小在 176 到 177 MB 之间，也不是明显的界限
*   少于 32000 个字符的文件名，也不是一个明显的截断，虽然它可能看起来像 32k ......

在我的计算中，1 MB = 1000^2 字节，而不是 1024^2。（那将是一个 MiB，但也许我的操作系统/文件系统/浏览器不同意。）

我的问题是：为什么有这么多文件？为什么这个最大值？它是依赖于操作系统还是依赖于浏览器？我在哪里可以找到它的规格？是JS的错吗？搜索“文件输入最大文件”等只会导致 [max] 属性，这是无关紧要的。

更多测试结果：

*   在 Firefox 中，最大值似乎要高得多。至少“2343 个文件：310.66553999999996 MB / 60748 个文件名字符”（这就是我在这里拥有的所有文件）
*   在 Firefox 中：“16686 个文件：55.144415 MB / 146224 个文件名字符”（小得多，但文件更多）

**更新**

*   Chrome 52 canary Windows 还是 32k 的文件名
*   Firefox (44+) Windows 仍然是无限的

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-02T05:44:04.270

> 为什么有这么多文件？

文件的数量取决于所有文件名组合的字符数。

> 为什么这个最大值？

在 Windows API 中，最大路径长度限制为 256 个字符，Unicode 版本 API 为 32,767 个字符。

Chrome 只是设置了 Unicode 版本 API 的最大路径长度，因此您观察到它大约是 32k 字符。
检查此修复：[https ://code.google.com/p/chromium/issues/detail?id=44068](https://code.google.com/p/chromium/issues/detail?id=44068)

Firefox 动态分配一个足够大的缓冲区来容纳多个选定文件的大小，这可以处理更大的路径长度。
检查此修复：[https ://bugzilla.mozilla.org/show_bug.cgi?id=660833](https://bugzilla.mozilla.org/show_bug.cgi?id=660833)

> 它是依赖于操作系统还是依赖于浏览器？

两个都。

> 我在哪里可以找到它的规格？

对于 Windows API 的使用和参考： http:
[//msdn.microsoft.com/en-us/library/aa365247.aspx](http://msdn.microsoft.com/en-us/library/aa365247.aspx)（最大路径长度限制）
[http://msdn.microsoft.com/en-us/library/ms646839( VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms646839(VS.85).aspx)

> 是JS的错吗？

不。

# matlab - 在 Matlab 中继续之前多次重新绘制相同的数据点

> ID：15851756
> 
> 赞同：0
> 
> 时间：2013-04-06T13:50:38.457
> 
> 标签：matlab, plot, interpolation

如果我有以下代码：

```
for t=1:length(s)  % s is a struct with over 1000 entries
  if s(t).BOX==0
    a(t,:)=0;
    elseif s(t).BOX==1
    a(t,:)=100;
  end
  if s(t).BOX==2
    b(t,:)=150;
    elseif s(t).BOX==3
    b(t,:)=170;
  end
  .
  .
  .

end
plot(a)
plot(b)
plot(c) 
```

我想要完成的事情：

```
for n=1:length(s)

Plot the data point of a(n) at t=0, t=1, t=2
then
Plot the data point of b(n) at t=3, t=4, t=5
.
.
.
etc 
```

`t`所以基本上，在移动到下一个点之前 ，每个数据点将被绘制为 3 个值。

我怎样才能做到这一点？

**编辑**

像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/RssAT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:34:54.050

如果我正确理解你，并假设`a`是一个向量，你可以做类似的事情

```
% Your for loop comes before this

nVarsToPlot = 4;
nRepeatsPerPoint = 3;
t = repmat(linspace(1, nRepeatsPerPoint * length(s), nRepeatsPerPoint * length(s))', 1, nVarsToPlot);
genMat = @(x)repmat(x(:)', nRepeatsPerPoint, 1);
aMat = genMat(a); bMat = genMat(b); cMat = genMat(c); dMat = genMat(d);
abcPlot = [aMat(:) bMat(:) cMat(:) dMat(:)];
plot(t, abcPlot); 
```

我有点不清楚您希望`t`包含哪些值，但您基本上需要一个 3 倍长度的向量`s`。然后，您可以通过将`[Nx1]`向量 ( `a, b, c, etc.`) 复制 3 次（将它们转换为行向量之后）并将全部堆叠到矩阵中，然后将其转换为`(:)`应该以正确顺序出现的向量来生成正确的数据矩阵只要因为矩阵构造正确。

# sql-server-2008 - 游标内 select 和 groupby 中的局部变量

> ID：15851765
> 
> 赞同：0
> 
> 时间：2013-04-06T13:51:27.877
> 
> 标签：sql-server-2008

我对 db 和 Sqlserver 比较陌生，并且遇到了一些问题。所以，我有一个使用游标的过程，每次下一次获取游标时，我都会提供许多要在游标中使用的局部变量。

```
DECLARE @tempTotalValue TABLE (Id int, IT float, Total float,  PlannedDate smalldatetime, PeriodStart smalldatetime)

DECLARE curs CURSOR FOR 

SELECT 
 ...,
 ...,  
 ...,
 ...,
 ...

FROM 
Order 
```

现在，在光标内我正在执行另一个过程（这个过程的设计是固定的，不能改变）。该过程返回一些值，我将其插入到某个表变量中，我在我的过程中进一步使用它来计算一些值并返回它。

```
OPEN curs

FETCH NEXT FROM curs INTO @Id, @IP ,@FromDate, @ToDate, @Length, @Amount 

WHILE @@FETCH_STATUS = 0

    BEGIN 

        DECLARE @tempIT TABLE(TI nvarchar(20), PlannedDate smalldatetime, PeriodStart smalldatetime, PeriodLength smallint, PeriodAmount float)

        INSERT INTO @tempIT EXEC IPDates @IP, @FromDate, @ToDate, @Length, @Amount //cannot change this procedure

        DELETE FROM @tempIT WHERE (YEAR(PlannedDate) < YEAR(DATEADD(YY, DATEDIFF(yy, 0, GETDATE()), 0))) OR YEAR(PlannedDate) > YEAR(DATEADD(YY, DATEDIFF(yy, 0, GETDATE()), 1));

        INSERT INTO @tempTotalValue 

        SELECT   
            @Id, // *this is the problem*
            0,
            PeriodAmount, 
            PlannedDate,
            PeriodStart
        FROM 
            @tempIT
        GROUP BY 
            --@Id // Not possible but i want to do it 

    FETCH NEXT FROM curs INTO @Id, @IP, @FromDate, @ToDate, @Length, @Amount

    DELETE FROM @tempIT

END 
CLOSE curs
DEALLOCATE curs

Select * from @tempTotalValue
END 
```

我面临的问题是名为“Id”的局部变量之一在我的光标中，我直接在我为我的过程返回的表中使用该变量。现在，我想根据这个 ID 按我的结果分组。但那是不可能的。例如，在下图中，我想按第 4 行和第 5 行进行分组，因为它们具有相同的 id，并且将来当我在第二（IT）列中有一些值时。我想多次显示一个 id 而不是相同的 id，并且在 IT 列中想要显示所有相同 id 的添加。

![桌子](https://i.stack.imgur.com/6sKS8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:54:46.980

如果你框架一个动态 sql，你将能够在之后“执行”它。到那时，您将在 GROUP BY 子句中设置您的 Id 值，并且 sql 像任何普通的 sql 插入一样执行。

# javascript - 如果在一个页面上单击链接，则在另一页面上取消隐藏/显示 div？

> ID：15851768
> 
> 赞同：0
> 
> 时间：2013-04-06T13:51:44.890
> 
> 标签：javascript, hyperlink

我在我的网站的主页（home.php）上有一个用户列表，我试图找出一种方法，当用户单击其他用户时，我可以在他们的个人资料页面（profile.php）上取消隐藏/显示 div主页上的个人资料链接，因此他们的个人资料页面上的这个 div 只有在他们点击主页上的链接后才会显示，否则会保持隐藏状态。

这可能吗，有人可以告诉我如何做到这一点：

如果我单击链接并且 div 与链接在同一页面上，则此代码有效，但如果我单击主页上的链接并且 div 位于我想要的个人资料页面上，则此代码无效。

主页.php

```
<a id="myLink" href="javascript:void(0)" onclick="javascript:myLinkButtonClick();">click here</a>

<script>
function myLinkButtonClick()
{
    var $element = $('.nswp-frame2');
    if($element.is(':visible')){
        $element.hide();
    } else {
        $element.show();
    }
}

</script> 
```

配置文件.php

```
<hidden div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:56:36.753

为了实现这一点，您需要将关闭状态的一些概念传递给辅助页面。这可以通过很多方式来完成。最简单的（也是最容易出现问题的）是当用户在页面之间移动时将其作为查询字符串的一部分传递。

更好的选择是使用 cookie 或会话变量。使用数据库表支持这一点是一种选择，但可能有点矫枉过正（取决于您是否需要此首选项以在多个访问/会话中持续存在）。

此外，如果您想要已经打开的页面（例如，在另一个浏览器选项卡中），那么您将需要实现某种 Javascript（可能是 AJAX）轮询解决方案，以根据数据库的状态定期更新可见性/ cookie/会话变量。

# php - Arduino 和 PHP 网页

> ID：15851776
> 
> 赞同：2
> 
> 时间：2013-04-06T13:52:47.450
> 
> 标签：php, arduino

我正在尝试获取一个 PHP 网页，以通过 Apache Web 服务器从带有以太网屏蔽的[Arduino Uno获取温度读数。](http://arduino.cc/en/Main/ArduinoBoardUno)我正在将温度读数写入一个文本文件，然后使用两个 PHP 文件将其从那里带到[PHP](http://en.wikipedia.org/wiki/PHP)网页上。

但是，我无法将温度读数写入文本文件。我不确定 Arduino 代码是否不正确并且没有发送温度读数，或者 PHP 代码是否不正确并且没有接收温度读数。当我从网页读回串行监视器时，我知道 Arduino 和网页正在通信。

### Arduino代码

```
#include <Ethernet.h>  //Library for Ethernet functions
#include <SPI.h>
#include <Client.h>    //Library for client functions

byte MACaddress[] = {0x90, 0xA2, 0xDA, 0x0D, 0x8B, 0xB3};  //Replace with your Ethernet shield MAC address
byte IPaddress[] = { 192,168,1,102};  //The Arduino device IP address
byte subnet[] = { 255,255,255,0};
byte gateway[] = { 192,168,0,1};
IPAddress server(192,168,1,100);      // IP address of server the Arduino sends data to
EthernetClient client;
bool connected = false;

int sensorInPin = 0;
float temperature = 0;

void setup(void)
{

    Serial.begin(9600);
    Serial.println("Initializing Ethernet.");
    delay(1000);
    Ethernet.begin(MACaddress);

    Serial.println("LM35 Sensor ");
    analogReference(INTERNAL);
}

void printTenths(int value)
{
    // Prints a value of 123 as 12.3
    Serial.print(value / 100);
    Serial.print(".");
    Serial.println(value % 10);
}

void loop(void)
{
    int span = 20;
    int aRead = 0;
    for (int i = 0; i < span; i++)
    {
        aRead = aRead + analogRead(sensorInPin);
    }
    aRead = aRead / 20;
    temperature = ((100 * 1.1 * aRead)/99) * 10;

    if (!connected)
    {
        Serial.println("Not connected");
        if (client.connect(server,80))
        {
            connected = true;
            //int temp = analogRead(A1);
            Serial.print("Temp is ");
            Serial.println(temperature);
            Serial.println();
            Serial.println("Sending to Server: ");

            client.print("GET /arduino.php?t0=\n");
            Serial.print("GET /arduino.php?t0=\n");
            client.print(temperature);
            Serial.print(temperature);
            Serial.println();
            client.println();
            client.println("HTTP/1.1\r\n");
            Serial.println();
            Serial.println("HTTP/1.1\r\n");
            client.println("Host: localhost\r\n");
            Serial.println("Host: localhost\r\n");
            client.println();
            client.println("User-Agent: Arduino\r\n");
            Serial.println("User-Agent: Arduino\r\n");
            client.println("Accept: text/html\r\n");
            Serial.println("Accept: text/html\r\n");
            client.println();
            Serial.println();
            delay(1000);
        }
        else
        {
            Serial.println("Cannot connect to Server");
        }
    }
    else
    {
        delay(1000);
        while (client.connected() && client.available())
        {
            char c = client.read();
            Serial.print(c);
        }
        Serial.println();
        client.stop();
        connected = false;
    }
 } 
```

## Arduino.php 代码

```
<?php
    echo date("d.m.Y-H:i:s");
    file_put_contents("C:\Folder\Mechatronics Application\Semester 2\Project               \Hello.txt",$_GET['t0']);
?> 
```

### index.php 代码

```
<?php
    echo date("d.m.Y-H:i:s");
    $string1 = file_get_contents("C:\Folder\Mechatronics Application\Semester 2\Project\Hello.txt");
    echo $string1;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:22:03.327

一般系统理论的原则之一是“从零开始设计的复杂系统永远不会工作，也无法通过修补使其工作。你必须重新开始，从一个工作简单的系统开始。”

在您的情况下，这意味着“分而治之”。

除了文本文件的路径之外，您的服务器/ [PHP](http://en.wikipedia.org/wiki/PHP)子系统不需要知道任何内容。该文本文件与您的微控制器没有任何关系*。*只需在编辑器中创建一个包含虚拟数据的文本文件。将其置于版本控制之下。让您的服务器/PHP 子系统使用它。现在该文本文件是您的回归测试的一部分。

使用运行 shell 脚本或简短的 PHP、[Ruby](http://en.wikipedia.org/wiki/Ruby_%28programming_language%29)或[Python程序的](http://en.wikipedia.org/wiki/Python_%28programming_language%29)[cron](http://en.wikipedia.org/wiki/Cron)作业以定期编写合理的随机数据来增强这一点。当它起作用时，您的网页应该显示随时间变化的数据。

一旦成功*，*您就可以开始研究 Arduino 子系统，知道服务器/PHP 端是好的。

# iphone - 使用不同的标识符上传应用更新

> ID：15851779
> 
> 赞同：2
> 
> 时间：2013-04-06T13:52:51.023
> 
> 标签：iphone, ios, app-store, push-notification, cfbundleidentifier

我正在开发使用推送通知的应用程序更新。当我尝试启用对应用程序 ID 的推送通知时，我发现：

> 注意：只有显式 App ID 才能用于访问 Apple 推送通知服务。请使用具有特定 Bundle Identifier 的现有 App ID 或创建一个新的。

所以我创建了一个新的应用程序 ID，但由于 ID 不同，它拒绝将其作为更新上传

无论如何上传带有推送通知的应用程序更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:56:19.020

首次上传应用后，您将无法再更改应用 ID！您的问题是您正在使用通配符应用程序 ID 配置文件。您不需要更改应用程序 ID，您需要为其更改配置文件（在 iOS 配置门户上创建）。

当您在 Xcode 中设置的应用程序 ID 类似于`com.example.MyAppName`并且您在 iOS Provisioning Portal 上创建了一个应用程序 ID 配置文件时`ABCD123400.*`（ABCD123400 是您的开发人员 ID），或者`ABCD123400.com.example.*`您创建了一个通配符应用程序 ID 配置文件。

要使用推送通知或游戏中心，您需要使用明确的应用程序 ID 配置文件。要获得这个，您需要为`ABCD123400.com.example.MyAppName`（确切的应用程序 ID，但不要更改它，只需替换 *-char！）创建一个应用程序 ID 配置文件。

# weka - WEKA WordTokenizer 的分隔符选项

> ID：15851780
> 
> 赞同：1
> 
> 时间：2013-04-06T13:52:58.337
> 
> 标签：weka

我正在尝试`StringToWordVector`使用`WordTokenizer`. 这是我的代码：

```
StringToWordVector filter = new StringToWordVector();

//Tokenizer option (letter only)
String tokenizerOption[] = new String[2];
tokenizerOption[0] = "-tokenizer";
tokenizerOption[1] = "weka.core.tokenizers.WordTokenizer -delimiters \r\t\n .,;:\'\"()?!-><#$%&*+/@^_=[]{}|\\`~0123456789";
filter.setOptions(tokenizerOption);
filter.setInputFormat(data); 
```

然后我将过滤后的实例保存到 ARFF。我得到这个 ARFF：

```
@attribute '\n' numeric
@attribute ' ' numeric
@attribute ' a ' numeric 
```

如您所见，`\n`分隔符中不包含空格。如何获得它包括它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:53:19.400

我找到了答案，请参阅下面的代码：

```
//Make a filter
StringToWordVector filter = new StringToWordVector();

//Make a tokenizer
WordTokenizer wt = new WordTokenizer();
String delimiters = " \r\t\n.,;:\'\"()?!-><#$\\%&*+/@^_=[]{}|`~0123456789";
wt.setDelimiters(delimiters);
filter.setTokenizer(wt);

//Inform filter about dataset
filter.setInputFormat(data); 
```

# android - 在不同的文本视图中设置数据库值

> ID：15851784
> 
> 赞同：0
> 
> 时间：2013-04-06T13:53:44.320
> 
> 标签：android

我有两个 class.add 和 addmark。在添加类中，我将 ID、姓名和电话号码提交到数据库中。在 addmark 类中，当我从自动完成文本视图（从我通过添加类提交的数据库）中选择一个名称时，我想在两个不同的文本视图中设置 ID 和电话号码？

```
package as.d.d;

import java.util.List;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class add extends Activity implements OnClickListener{

    Button b1,b2;
    EditText e2,e3;
    TextView t1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add);

        b1=(Button)findViewById(R.id.button1);
        b2=(Button)findViewById(R.id.button2);
        e2=(EditText)findViewById(R.id.editText2);
        e3=(EditText)findViewById(R.id.editText3);
        t1=(TextView)findViewById(R.id.AtextView1);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);

        DatabaseHandler db = new DatabaseHandler(this);
        List<StudentInfo> studentInfo = db.getAllStudentInfo();

        for (StudentInfo cn : studentInfo){

            t1.setText("Id:"+(cn.getID()+1));
        }
   }

    @Override
    public void onClick(View v) {

        if(v==b2){
            startActivity(new Intent(add.this, FdActivity.class));
        }
        else if(v==b1){

            String s2=e2.getText().toString();
            String s3=e3.getText().toString();

            if(s2.trim().equals("")||s3.trim().equals("")){

                Toast.makeText(getApplicationContext(), "Please Submit Student Information",Toast.LENGTH_SHORT).show();

                }   

            else{
                DatabaseHandler db = new DatabaseHandler(this);
                Log.d("Insert: ", "Inserting ..");
                db.addContact(new StudentInfo(s2,s3));
                Log.d("Reading: ", "Reading all contacts..");
                List<StudentInfo> studentInfo = db.getAllStudentInfo();
                for (StudentInfo cn : studentInfo){
                    t1.setText("Id:"+(cn.getID()+1));
            }}}}} 
```

......

```
package as.d.d;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.TextView;
import android.widget.Toast;

public class addmark extends Activity{

    AutoCompleteTextView a1;
    TextView t1,t2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addmark);

        a1=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        t1=(TextView)findViewById(R.id.amtextView1);
        t2=(TextView)findViewById(R.id.amtextView2);

        DatabaseHandler db = new DatabaseHandler(this);

        final List<StudentInfo> studentInfo = db.getAllStudentInfo();

        final ArrayList<String> s1 = new ArrayList<String>();

        for (StudentInfo cn : studentInfo) {
            s1.add(cn.getName());

        }
        ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line,s1); 

        a1.setThreshold(1); 
        a1.setAdapter(adapter);

        a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
}
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:27:44.710

我认为这段代码会做到这一点

```
a1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                String id =  studentInfo.get(arg2).getId();
                String phone = studentInfo.get(arg2).getPhone();
                t1.setText(id);
                t2.setText(phone);
           }
        }); 
```

# java - 在 R 中实现类似数据结构的 Java“ArrayList”，以允许快速逐一添加 ReferenceClasses 对象（可能使用 rJava）

> ID：15851785
> 
> 赞同：3
> 
> 时间：2013-04-06T13:53:48.913
> 
> 标签：java, r, data-structures, arraylist, rjava

我需要在 R 中执行涉及大量一般线性回归的离散事件模拟，因此需要将大量 R 对象一一附加到列表或数组中。现在一切都已经实现并且模拟器运行了。但是，我意识到整个过程的性能瓶颈实际上是在列表追加（模拟6000个事件大约需要15分钟）。我注意到当 R 列表、向量或数组中的对象数量变大时，插入变得非常慢。我需要一个可重用的列表数据结构，因为它在模拟代码的许多部分中一次又一次地使用。这是我用 R 编写的简单 ArrayList 的实现：

```
ArrayListX = setRefClass(
  Class = "ArrayListX",
  fields = list(
    ol = "array",
    len = "integer",
    cap = "integer",
    expandNum = "integer"),
  methods = list(
    initialize = function(){
      len <<- 0L
      expandNum <<- 100000L
      #TODO: The preallocation here made the performance worse.
      ol <<- array(dim = expandNum)
      cap <<- expandNum
    },
    expand = function(){
      ol <<- c(ol, array(list(), dim = expandNum))
      cap <<- cap + expandNum
    },
    get = function(i){
      return(ol[i])
    },
    remove = function(i){
      ol[i] <<- NULL
      len <<- len - 1L
    },
    add = function(obj){
      if(cap <= len)
      {
        expand()
      }
      len <<- len + 1L
      ol[len] <<- obj
      return(len)
    },
    size = function(){
      return(len)
    },
    set = function(i, obj){
      ol[i] <<- obj
    },
    insert = function(before, obj){
      if(before < 1 || before > len + 1)
        throw(paste("Subscript out of bound. before = ", before))

      if(len == 0)
      {
        ol[1] <<- obj
      }  else
      {
        head = ol[1:before - 1]
        head[before] = obj
      {
        if(before <= len)
          ol <<- c(head, ol[before:len])
        else
          ol <<- head
      }
      }
      len <<- len + 1L
    }
  )
) 
```

请注意，我尝试初始化列表并预分配一定数量的行，这也没有提高性能，实际上它甚至比没有预分配还要慢。（这可能是因为我使用了引用类。根据我的经验，在不使用引用类时，预分配通常会提高 R 中的性能）这就是为什么我考虑使用 Java ArrayList 作为列表的后端数据结构的原因。我尝试了 rJava。

```
ArrayListJ = setRefClass(
  Class = "ArrayListJ",
  contains = "ArrayList",
  fields = list(
    jal = "ANY"),
  methods = list(
    initialize = function(){
      jal <<- .jnew("java.util.ArrayList")
    },
    get = function(i){
      rObj = .jcall(jal, returnSig="Ljava/lang/Object;", method = "get", as.integer(i))
      return(rObj)
    },
    remove = function(i){
    },
    add = function(obj){
      jRef = toJava(x = obj, engine = NULL)
      .jcall(obj = jal, returnSig = "Z", method = "add", .jcast(jRef, new.class = "java/lang/Object"))
    },
    size = function(){
      s = .jcall(obj = jal, returnSig = "I", method = "size")
      return (s)
    },
set = function(i, obj){
    #Not implemented yet.
    },
insert = function(before, obj){
    #Not implemented yet.
    }    
    )
  ) 
```

我现在正在努力使用“get”功能，因为我无法让它工作。它总是返回一个我不能在 R 中使用的 REXPReference 对象。我希望它返回的实际上是添加到 ArrayListJ 的原始 R 对象 obj。它必须是最初引用的对象，因为插入的 R 对象在插入 ArrayListJ 后可能已被其他逻辑更新。有人可以帮我实现 ArrayListX 或 ArrayListJ 吗？它基本上需要能够以恒定的时间将大量的R referenceclasses对象一个一个地追加到一个列表中（当列表变大时性能不应该变慢）。对于 ArrayListJ 实现，如何使用“get”方法取回最初引用的 R 对象？谢谢。

# jquery - 传递参数来改变css

> ID：15851787
> 
> 赞同：0
> 
> 时间：2013-04-06T13:54:02.913
> 
> 标签：jquery, css, parameters

我不让这个工作。我想通过 changeCSS 函数解决这个问题，这样我就可以传递不同的属性和值。

```
$("div").on("mouseover", changeCSS("opacity","0.5"));

function changeCSS(prop,val) {
$(this).css(prop, val);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:56:36.507

它不起作用，因为当在里面时`changeCSS`，`this === window`. 您也应该传入元素。`.on()`如果您想提供自定义参数，您还需要提供一个函数。

```
$("div").on("mouseover", function () {
    changeCSS(this, "opacity", "0.5"));
});

function changeCSS(elem, prop, val) {
    $(elem).css(prop, val);
} 
```

您可能已经这样做了，但您可能还应该有一个 mouseleave 事件来恢复不透明度。

```
$("div").on("mouseleave", function () {
    changeCSS(this, "opacity", "1"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:08:47.980

我不相信可以那样使用鼠标悬停，只是一个功能。我假设您只希望在鼠标结束时更改 css，并在鼠标离开后更改回来.. 如果不是，您可以删除 mouseleave 功能：

```
$("div").bind("mouseenter",function(){
  changeCSS(this, "opacity", "0.5");
}).bind("mouseleave",function(){
  changeCSS(this, "opacity", "1");
});
function changeCSS(ele, prop,val) {
  $(ele).css(prop, val);
} 
```

[http://jsfiddle.net/x2vhN/](http://jsfiddle.net/x2vhN/)

# django - 无法解析 django {% for 子句中的剩余部分

> ID：15851788
> 
> 赞同：2
> 
> 时间：2013-04-06T13:54:07.393
> 
> 标签：django

在 HTML 中，我尝试执行双重处理，第二个从父亲那里继承数据，如下所示：

```
{% for category in categories %}
            <li><a href="/categories/{{ category.id }}/">{{ category.name }}</a>
            {% for cat in category.objects.filter(parent=category.id) %}
                {% if forloop.first %} 
                <ul class="noJS">
                {% endif %}
                    <li><a href="/categories/{{ cat.id }}">{{cat.name}}</a></li> 
                </ul>
            {% endfor %}

            {% endfor %} 
```

问题是我收到错误：

```
TemplateSyntaxError at /
Could not parse the remainder: '(parent=category.id))' from 'ca

tegory.objects.filter(parent=category.id))'
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4.3
Exception Type: TemplateSyntaxError
Exception Value:    
Could not parse the remainder: '(parent=category.id))' from 'category.objects.filter(parent=category.id))' 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:14:53.363

主意：

模型.py

```
class Category(models.Model):
    .........

    def data(self):
        return Category.objects.filter(id=self.id) 
```

模板

```
{% for category in categories %}
<li><a href="/categories/{{ category.id }}/">{{ category.name }}</a>
    {% for cat in category.data %}
        {% if forloop.first %} 
        <ul class="noJS">
        {% endif %}
            <li><a href="/categories/{{ cat.id }}">{{cat.name}}</a></li> 
        </ul>
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:00:06.243

因为你有一个关系，甚至是一个自引用的关系，你得到一个反向关系的访问器。如果你还没有设置`related_name`，那就是`category_set`。所以你可以这样做：

```
{% for cat in category.category_set.all %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T01:04:21.290

我正在使用 MPTT，所以我只为子节点调用一个方法：

```
 {% for cat in category.get_children %} 
```

可从 MPTT 获得

# struct - MATLAB：从结构中绘制数据

> ID：15851793
> 
> 赞同：0
> 
> 时间：2013-04-06T13:54:21.330
> 
> 标签：struct, plot, matlab

我有一个数据结构，其中包含数据值、时间、单位和每个数据的一些描述。我想绘制数据值与时间的关系。以下是数据的样子：

![在此处输入图像描述](https://i.stack.imgur.com/vIff5.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/cd6FW.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/ERCWW.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/Q5EjP.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/diZji.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/XYnPd.jpg)

有什么想法可以绘制数据和时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-11T11:13:47.130

您无需打开整个读数，然后绘制这些读数的图表。相反，您可以通过以下命令直接访问结构并绘制图形：

*   `plot(data.(data.arrayOfTimestamp),data.arrayOfValue)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:12:30.900

快速示例：

```
%# date strings and values
dates = {'02.11.2012 00:02:15'; '02.11.2012 00:07:12'};
values = [5.8; 5.7];

%# convert to serial date numbers
t = datenum(dates, 'mm.dd.yyyy HH:MM:SS');

%# plot and format x-ticks as datetime
plot(t,values)
datetick('x') 
```

# c# - 反转文件中字节的顺序

> ID：15851797
> 
> 赞同：2
> 
> 时间：2013-04-06T13:54:42.377
> 
> 标签：c#

嗨，我正在尝试在不将整个文件加载到内存的情况下反转文件的字节。到目前为止，我只设法从头到尾读取文件的字节，但我不确定我是否正确地这样做了。这个是我到目前为止：

```
 FileStream fileStream = new FileStream("file.txt", FileMode.Open, FileAccess.ReadWrite);
        fileStream.Seek(1024, SeekOrigin.End);
        byte[] buffer = new byte[1024];
        int count;
        while (fileStream.Position != 0)
        {
            count = fileStream.Read(buffer, 0, 1024);

        } 
```

现在如何反转文件的字节顺序并以相反的顺序保存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:56:38.983

我认为你最好从块中读取文件，从最后一个块开始，读取每个块并以相反的顺序写入这些字节。

一个例子：

```
MemoryStream output = new MemoryStream();
FileStream fs = new FileStream("D:\\file.txt", FileMode.Open);
long pos = fs.Length;
fs.Seek(0, SeekOrigin.End);
byte[] buffer = new byte[blockSize];
int length = blockSize;
while(pos > 0) {

    length = (int)(pos < blockSize ? pos : blockSize);
    pos -= length;
    fs.Seek(pos, SeekOrigin.Begin);

    int read = fs.Read(buffer,0, length);
    byte[] reversed = buffer.Take(read).Reverse().ToArray();
    output.Write(reversed,0, read);

} 
```

为了使示例简单，假设 Stream`length`在请求时实际上正在读取字节。`FileStream`这样做 - 但在其他`Stream`实现的情况下，他们可能不会（网络流等）。

正如另一个答案中所建议的，您也可以为此使用[内存映射文件。](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)我不知道在 .NET 中使用内存映射文件的确切开销，所以如果这对您很重要，请尝试使用您需要处理的实际文件大小来衡量这两种方法。如果文件很大而缓冲区很小，则逐块方法涉及大量文件查找。另一方面，在设置内存映射文件时会有开销。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T14:19:17.237

您可以像这样使用内存映射文件：

```
using System.IO.MemoryMappedFiles;
using System.IO;

...

string filename = @"filename";

long length = new FileInfo(filename).Length;

using (var file = MemoryMappedFile.CreateFromFile(filename, FileMode.Open))
using (var accessor = file.CreateViewAccessor()) {
    // Reverse
    long i = 0;
    long j = length - 1;
    byte tmp;
    while (j > i)
    {
        tmp = accessor.ReadByte(j);
        accessor.Write(j, accessor.ReadByte(i));
        accessor.Write(i, tmp);
        j--;
        i++;
    }
} 
```

这样做的性能应该很快，但请在您的机器上进行测试以确保。

# javascript - 通过 Flickr Api、Javascript 选择多个随机图像

> ID：15851801
> 
> 赞同：0
> 
> 时间：2013-04-06T13:55:24.863
> 
> 标签：javascript, jquery, json, flickr

我想显示 flickr 用户最近 200 张照片中的 4 张随机（和不同）照片。代码有 3 个部分

1.  对 Flickr 的 Json 请求 [作品]
2.  Javascript 随机数生成器 [几乎可以工作]
3.  Json的解析[作品]

我从 flickr 请求了 200 张图片，我得到了一个 Json 返回，我将它保存在一个变量 myArray 中。我在这个 var 上运行一个生成随机数（0-200）的函数。使用 splice，我将与随机数对应的项目保存在新变量 selArray 中。这也会从 myArray 中删除该项目，防止它再次被随机选择。这个函数运行 x 次，x 是你想要的随机数的数量。这个功能并没有完全做到我想要它做的事情。代码的最后一部分解析 Json。当我在 myArray 上使用它时，最后一部分本身可以工作，但不能在 selArray 上工作。

这就是问题。函数 getRandoms 完成后，selArray 包含 4 个数组，每个数组都保存一个对象，而不是简单地保存 4 个对象。这是控制台显示的内容：

```
0 [Object { id="...}] 
```

但我想要这个：（这是 myArray 显示的）

```
0 Object { id="...} 
```

所以，这是我的问题：我该如何解决这个问题？我究竟做错了什么？备注：我能够通过在代码的 $.each 部分中将 item 替换为 item[0] 来使此代码工作。

第二个问题。这是好代码吗？我对性能和速度特别感兴趣。

```
<script>
$(document).ready(function(){

    var apikey = '[set api here]';
    var userid = '[set id here]';

    $.getJSON('http://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key='+apikey+'&user_id='+userid+'&per_page=200&format=json&jsoncallback=?',
        function(data){

        // flickr request ok
        if(data.stat == 'ok'){

            var myArray = data.photos.photo;
            var selArray = new Array;

            function getRandoms(number){
                for(var i=0; i < number; i++){
                    var randomNumber = Math.floor(Math.random()*myArray.length);
                    selArray.push(myArray.splice(randomNumber,1));
                }
            }

            // get random numbers 
            getRandoms(4);

            //look at selArray in console
            console.dir(selArray);

            //parse json, this works
            $.each(selArray, function(i,item){
                var purl = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.secret + '_s.jpg';
                var container = '<a target="_blank" href="http://www.flickr.com/photos/'+userid+'/'+item.id+'/"><img class="span4" alt="'+item.title+'" src="' + purl + '"/>';
                $(container).appendTo('#images');
            });

        // flickr request problem
        }else{
            console.log(" The request to get the array was not good ");
        }
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:40:31.927

看起来您想要的是以下内容：

```
selArray.push(myArray[randomNumber]); 
```

# ios - 从数据库中删除行时崩溃

> ID：15851805
> 
> 赞同：0
> 
> 时间：2013-04-06T13:55:33.830
> 
> 标签：ios, sqlite

我用这个代码做这件事

这是标题

```
#import "SQLAppDelegate.h"
#import "RootViewController.h"
#import "Coffee.h"

static sqlite3 *database = nil;
static sqlite3_stmt *deleteStmt = nil;

@implementation SQLAppDelegate 
```

这是删除的方法

```
- (void) removeCoffee:(NSNumber *)coffeeObj {

  NSLog(@"coffeeObj%@",coffeeObj);
    NSInteger myInteger = [coffeeObj integerValue];
    int i = [coffeeObj integerValue];
    NSLog(@"myInteger%d",myInteger);
    NSLog(@"i%d",i);
  // this print index number of the row which was selected 
    if(deleteStmt == nil) {

        const char *sql = "delete from Coffee where coffeeID = ?";
    //coffeeID is primary key it will be like 0,1,2,3,4...

        if(sqlite3_prepare_v2(database, sql, -1, &deleteStmt, NULL) != SQLITE_OK) 
```

//在下面的行中，它会因问题结束时出现错误而崩溃

```
 NSAssert1(0, @"Error while creating delete statement. '%s'", sqlite3_errmsg(database));
    }

    //When binding parameters, index starts from 1 and not zero.
    sqlite3_bind_int(deleteStmt, 1, myInteger);

    if (SQLITE_DONE != sqlite3_step(deleteStmt)) 
        NSAssert1(0, @"Error while deleting. '%s'", sqlite3_errmsg(database));

    sqlite3_reset(deleteStmt);

    [coffeeArray removeObjectAtIndex:myInteger];
} 
```

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“创建删除语句时出错。'在......之外

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:10:15.117

假设您的意思是说错误是“内存不足”，那么这通常意味着您实际上还没有打开数据库。确保您的`database`变量引用的是实际打开的数据库连接。

# android - 无法在 Android 中获取新的 GPS 位置

> ID：15851810
> 
> 赞同：1
> 
> 时间：2013-04-06T13:56:00.343
> 
> 标签：android, android-maps-v2

我正在开发一个使用带有 GPS 的 Google Map V2 的应用程序。该代码显示了一个部分，它获取用户位置的纬度和经度。

```
map.setMyLocationEnabled(true); //Locate the user's current location

LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria crit = new Criteria();
String provider = service.getBestProvider(criteria, false);
Location location = service.getLastKnownLocation(provider);
LatLng locationOfUser = new LatLng(location.getLatitude(),location.getLongitude()); 
```

该应用程序基本上使用 locationOfUser 中的值，并且可以在用户选择的标记处画一条线。但是，当我从其他位置尝试应用程序时，这可行，蓝色标记指示用户的当前位置发生变化，但 locationOfUser 中的值没有，并且从最后一个位置而不是当前位置绘制线。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:38:16.190

你需要`requestLocationUpdate`

```
service.requestLocationUpdates(provider, updateInterval, updateDistance, new LocationListener()
    {

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras)
        {

        }

        @Override
        public void onProviderEnabled(String provider)
        {

        }

        @Override
        public void onProviderDisabled(String provider)
        {

        }

        @Override
        public void onLocationChanged(Location location)
        {
            LatLng locationOfUser = new LatLng(location.getLatitude(),location.getLongitude()); 
        }
    }); 
```

哪里`updateInterval`是期望的最小距离间隔并且`updateDistance`是期望的最小距离间隔。例如，您可以设置 updateInterval = 1000 和 updateDistance = 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:47:37.227

`LocationManager`从现在该`OnMyLocationChangeListener`接口已添加到 API 中，无需手动请求位置更新。

您只需要启用 my-location 层 ( `map.setMyLocationEnabled(true)`)、设置侦听器 ( `map.setOnMyLocationChangeListener(this)`) 并使用在相应回调中传回给您的当前位置（通过实现该接口提供）做任何您想做的事情。

# php - 字符串到日期格式

> ID：15851821
> 
> 赞同：0
> 
> 时间：2013-04-06T13:56:51.467
> 
> 标签：php, mysql

PHP Mysql 我想从 mysql 转换日期格式...请帮助我。像

```
SELECT * FROM agentcommission where AgentId='AC-1363717254' AND Date between STR_TO_DATE('24-Mar-2013','%d-%M-%Y') and R_TOST_DATE('31-Apr-2013','%d-%M-%Y'); 
```

但它显示零行。就像 18-Apr-2013 是我的日期格式，我想将其转换为 18-04-2013 表示字符串到日期格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:07:02.020

你`%b`不需要`%M`

> %b 缩写月份名称（Jan..Dec）

```
SELECT STR_TO_DATE('24-Mar-2013','%d-%b-%Y') 
```

退货

```
2013 年 3 月 24 日 00:00:00+0000
```

如果您的`date`列是一种`date`类型，那么您需要一种`YYYY-MM-DD`格式。您不能使用`BETWEEN`运算符来比较***自定义***日期格式的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:40:56.067

您可以使用[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function%5Fdate-format)函数将日期从一种形式转换为另一种形式。

```
select DATE_FORMAT(STR_TO_DATE('24-Mar-2013','%d-%M-%Y'),'%d-%m-%Y'); 
```

此语句将为您提供所需的格式化日期，如`24-03-2013`.

但如上所述，您需要一种`YYYY-MM-DD`格式来使用`BETWEEN`运算符来比较自定义日期格式中的日期。

# css - 将页面分成两部分

> ID：15851822
> 
> 赞同：1
> 
> 时间：2013-04-06T13:56:53.813
> 
> 标签：css, html, position

![我想要达到的目标](https://i.stack.imgur.com/kBs8a.jpg)我有一个 facebook 应用程序，我现在正在前端工作。我刚刚开始使用 css 和 html，所以这可能是一个愚蠢的问题 - 抱歉。我想要做的是将页面分为两部分。我为此创建了两个`div`s，但问题在于它们的定位方式。我的代码如下：

```
<style>
.choose_div{
  width: 20%;
  height: auto;
  padding: 1px;
  left: 0px;
  border: 2px;
}
.frame_div{
  right:0px;
  height: auto;
  width: 80%;
  border: 2px 2px 2px 2px;
  position: relative;
}
</style>
  <div id="choose_div">
    <ul>
      <li class="li_choose">
        <div class="li_div">
          <p>Save</p>
            <img src="arrow.jpg" id="arrow_save" style="width:10%;height:10%">
           <hr>
        </div>
      </li>
    </ul>
  </div>
<div id="frame_div">
  <iframe id="frame_opened">
</div> 
```

我认为`right:0px;`对于一个和`left:0px;`另一个会正确定位它们，但它们只是另一个底部的一个。
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:58:56.640

对于要显示的 div 写：

```
float:left 
```

对于正确的：

```
float:right

<style>
#choose_div{
  width: 20%;
  height: auto;
  padding: 1px;
  left: 0px;
  border: 2px;
  float:left;

}
#frame_div{
  float:right;
  right:0px;
  height: auto;
  width: 80%;
  border: 2px 2px 2px 2px;
  position: relative;
}
</style> 
```

如果添加边框，则必须缩小 div 的宽度。或者它们溢出父部分并从上到下看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:00:29.583

这是使用`float:left;`. 不过，您的样式还有其他一些问题：

*   您的目标`.choose_div`是类 ( `.`)，而不是 id ( `#`)
*   `box-sizing:border-box`执行此操作时需要使用`padding`and ，否则会在宽度大于 20% 的`border`基础上添加。`width:20%`

[jsFiddle](http://jsfiddle.net/Tyriar/SB9Y2/1/)

```
#choose_div {
    width: 20%;
    height: auto;
    padding: 1px;
    border: 2px;
    float:left;
    box-sizing:border-box;
}
#frame_div {
    height: auto;
    width: 80%;
    border: 2px 2px 2px 2px;
    float:left;
    box-sizing:border-box;
} 
```

至于`left`和`right`，如果使用 ，它们可用于对齐屏幕的特定一侧`position:absolute`。`position:relative`只是将元素移动特定的量，例如`left:2px`将元素向左移动 2 个像素。

`position:absolute`将元素定位在其最近的具有`position`非静态的祖先上。然后///`left`可以用来表示祖先的边`right`。`top``bottom`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:12:49.453

```
 <style>
html,body{margin:0;}
#choose_div{
  display:block;
  float:left;
  width: auto;
  height: 100%;
  padding: 1px;
  }
#frame_div{
 float:right;
 height: auto;
  width: 80%;
  height: 100%;
  border: 2px 2px 2px 2px;
  border-left:solid 2px #000000;
  padding:10px;
  overflow:hidden;
}
    </style>
    <body>

      <div id="choose_div">
        <ul>
          <li class="li_choose">
            <div class="li_div">
              <p>Save</p>
                <img src="arrow.jpg" id="arrow_save" style="width:10%;height:10%">
                 </div>
          </li>
        </ul>
      </div>

    <div id="frame_div">
      <iframe id="frame_opened">
    </div> 
```

# variant - 变体类型如何以及何时转换为常规数据类型

> ID：15851824
> 
> 赞同：0
> 
> 时间：2013-04-06T13:57:09.420
> 
> 标签：variant

什么时候会决定一个变量的实际数据类型？
例如：
x=10 这里 x 将保存整数
x="Hello" 这里 x 将保存字符串

我的基本问题是`msgbox "2"+"3"`23，因为这些是字符串，而 + 用于连接，所以结果是 23

那么结果如何`msgbox "2"*"3"`变成6呢？其中字符串将被转换为整数并返回 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T01:52:37.393

如果您正在谈论使用 Visual Basic（您没有指定语言），那么我认为正在发生的事情是：

MsgBox 函数期望一个和对象变成一个字符串。（或者至少它试图在显示之前转换字符串）。由于“+”是一个合法的连接运算符，所以第一个例子可以直接转换为String并返回。

在第二个示例中，星号不是合法的字符串运算符，因此它必须尝试将您的字符串段转换为整数。它确实如此，然后将它们相乘，然后 MsgBox 将数值表达式转换回字符串并显示它。

# routes - 接受 Laravel 4 路由中的编码 URL

> ID：15851825
> 
> 赞同：3
> 
> 时间：2013-04-06T13:57:14.063
> 
> 标签：routes, laravel, laravel-4

我正在用 Laravel 4 Beta 5 开发一个网站，我正在尝试将编码的 URL 传递给路由器。问题是，一个编码的 URL 中有百分比等，所以它被 Laravel 阻止了。URL 是用 Javascript 函数编码的`encodeURIComponent()`。

**有没有办法覆盖 Laravel，以便我可以在路线中使用任何字符？**

这是我当前的代码：

```
Route::get('add/{encoded_url}', function($encoded_url)
{
    return 'The URL is: '.rawurldecode($encoded_url);
}); 
```

我试图通过附加来覆盖 Laravel `where('encoded_url', '*reg-ex*');`，但它没有用（我对 reg-ex 不是很好，顺便说一句）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T11:54:09.177

试试这个正则表达式，它将匹配*任何字符*......

```
Route::get('add/{encoded_url}', function($encoded_url)
{
    return 'The URL is: '.rawurldecode($encoded_url);
})->where('encoded_url', '.*'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-24T10:27:47.317

Phill 的回答是正确的，但我还必须更改我的 apache 设置才能使其正常工作。

我必须将以下内容添加到我的 httpd.conf 文件中：

```
AllowEncodedSlashes NoDecode 
```

如果您看到的是 Apache 404 not found 页面而不是 Laravel NotFoundHttpException 错误页面，您将需要这个。

很明显的解释，但没有这个 Apache 正在解码编码的斜杠，以便

```
http://localhost/add/http%2F%2Fwww.google.co.uk 
```

被路由到

```
http://localhost/add/http://www.google.co.uk 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-04T01:41:27.817

由于我认为是一个错误，urlencoded 斜杠在 Laravel 中不起作用。

[https://github.com/laravel/framework/pull/4323](https://github.com/laravel/framework/pull/4323)

此拉取请求将解决该错误。

# symfony - Symfony2 MopaBootstrapBundle 没有“less”过滤器错误

> ID：15851828
> 
> 赞同：3
> 
> 时间：2013-04-06T13:57:24.530
> 
> 标签：symfony, twitter-bootstrap, less

我的页面上出现（“没有“更少”过滤器。”）错误，但我似乎无法解决它。我的mac上安装的较少。我如何告诉 symfony 使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:07:43.820

通过运行找到节点模块路径：

```
find / -name node_modules -type d 
```

然后设置为`node_paths`选项：

```
assetic:
    filters:
        less:
            node_paths: /usr/lib/node_modules
            compress:   true
            apply_to:   "\.less$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T13:11:37.117

您必须安装节点（apt-get install node），创建链接（ln -s /usr/bin/nodejs /usr/local/bin/node），一切都应该没问题。

# java - 复制数组元素

> ID：15851829
> 
> 赞同：0
> 
> 时间：2013-04-06T13:57:28.147
> 
> 标签：java, arrays

我不明白为什么代码不将唯一元素复制到另一个数组。这是我的代码。我虽然`==`是复制元素，但我得到了一个错误，所以我改用了`=`。

```
 public static void main(String[] args) {
    // TODO Auto-generated method stub
    int[] B = new int[15];
    B[2] = 2;
    B[3] = 3;
    B[4] = 4;
    B[5] = 5;
    B[6] = 6;
    B[7] = 7;
    B[8] = 8;
    B[9] = 9;
    B[10] = 10;

    int[] check = new int[B.length];
    for (int i = 0; i < B.length; i++) {
        for (int x = 0; x < check.length; x++) {
            if (B[i] != check[x]) {
                check[x] = B[i];
            }
        }
    }

    for (int i = 0; i < check.length; i++) {
        System.out.println(check[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:08:26.917

您将所有内容循环两次，而应该只循环一次。

目前它看起来像这样：

```
for (int i = 0; i < B.length; i++) {
    for (int x = 0; x < B.length; x++) {
        if (B[i] != check[x]) {
            check[x] = B[i];
        }
    }
} 
```

这意味着`when i = 0 , then x=0, 1, 2, 3, 4, etc.. .`那么`when i = 1, x=0,1,2,3.... , etc.`

所以最后一次运行将在`i=14`哪里`B[i] = 0`。
所以对于每个`check[x]`，它都不等于`0`。

你想要做的是在一条线上处理它。`i`因此，`x`您可以`i`像这样使用外循环而不是 2 个变量。这意味着您只是在比较`B[1] to check[1] and B[2] to check[2]`，依此类推。

像这样：

```
for (int i = 0; i < B.length; i++) {
    if (B[i] != check[i]) {
        check[i] = B[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:00:01.380

`==`用于相等测试，`=`用于赋值，

顺便说一句，用于`System.arraycopy(xxx)`复制数组。

```
public int[] findUnique(int[] data) {
    int[] unique = new int[data.length];
    int x = 0;
    for (int i = 0; i < data.length; i++) {
        boolean uni = true;
        for (int j = i + 1; j < data.length; j++) {
            if (data[i] == data[j]) {
                uni = false;
                break;
            }
        }
        if (uni) {
            unique[x++] = data[i];
        }
    }
    return unique;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:01:04.947

[System.arrayCopy()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)更快

# ios - 需要将 iOS 5.0 App 转换为 iOS 4.3.3

> ID：15851830
> 
> 赞同：2
> 
> 时间：2013-04-06T13:57:29.973
> 
> 标签：ios, ios5, ios4, xcode4.2

我正在 iOS 5.0 中开发我的应用程序，但我也想将其转换为 iOS 4.3.3。

我的问题是，当我在 iPhone 3GS（iOS 4.3.3）中安装我的应用程序时，我没有收到编译器警告或错误。但是，当调用 iOS 5.0 及更高版本支持的功能时，应用程序会崩溃。目前我正在通过检查这样的条件来管理它： -

```
if ([[[UIDevice currentDevice] systemVersion] floatValue]>4.4)
 {
     //Call iOS 5.0 and later function.
     //For example.
     [myTabBar setTintColor:maroonColor];
 }
 else
 {
     //Otherwise not do anything.
 } 
```

有没有办法轻松地将 iOS 5.0 应用程序转换为 iOS 4.3.3。或与最大部署目标相关的任何设置。所以我可以将它设置为 4.3.3 并立即获取所有错误 iOS 5.0 支持的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:04:29.963

您可能想查看[DeployMate](http://www.deploymateapp.com)，它应该列出所有可能的不兼容性。我会使用`if ([myTabBar respondsToSelector:@selector(setTintColor)])`而不是你的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T14:04:59.930

苹果指南：[https ://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Configuring/configuring.html](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Configuring/configuring.html)

> “选择一个基础 SDK。您的软件可以使用操作系统版本中可用的功能，包括与基础 SDK 对应的版本。默认情况下，Xcode 将其设置为 Xcode 支持的最新操作系统。”

...所以：将您的基础 SDK 设置为 iOS 4.3.3（要求您安装 4.3.3），然后尝试构建。

编辑：如果您还没有 SDK 4.3.3 的副本，您可以通过 Apple 的 hidden 获得它（他们不会从 iOS 开发中心链接它：（）下载页面：[https ://developer.apple .com/downloads/index.action?name=ios](https://developer.apple.com/downloads/index.action?name=ios)

# linux - 如何检查 BLAS 和 ATLAS 是否已安装

> ID：15851831
> 
> 赞同：18
> 
> 时间：2013-04-06T13:57:30.867
> 
> 标签：linux, lapack, blas, armadillo, atlas

我正在尝试将犰狳库安装到我的 linux 系统（ubuntu 12.04）上。安装时首先需要 BOOST BLAS ATLAS 和 LAPACK。有没有办法检查这些库是否已经安装？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T16:19:20.820

所有这些库都在默认存储库中，因此您可以通过以下方式轻松获取它们

```
sudo apt-get install liblapack3 
```

等等。我知道这不能完全回答您的问题，但无论如何这可能是您必须要做的。如果您仍然想检查是否安装了包（任何，不仅仅是上面列出的库），只需运行

```
apt-cache policy liblapack3 
```

# asp.net-mvc - 我可以在具有添加/删除功能的 MVC 4 视图中显示复杂对象的列表吗？

> ID：15851832
> 
> 赞同：3
> 
> 时间：2013-04-06T13:57:58.043
> 
> 标签：asp.net-mvc, asp.net-mvc-4, partial-views, nested, mvc-editor-templates

几天来我一直在努力解决这个问题，但无法弄清楚。我需要创建一个视图，允许用户添加和删除复杂的分层对象。假的例子：

**楷模**

```
public class ParentModel
{
    public int ParentId { get; set; }
    public string ParentText { get; set; }
    public IList<ChildModel> Children { get; set; } 
}
public class ChildModel
{
    public int ChildId { get; set; }
    public string ChildText { get; set; }
    public IList<GrandChildModel> GrandChildren { get; set; }
}
public class GrandChildModel
{
    public int GrandChildId { get; set; }
    public string GrandChildText { get; set; }
} 
```

现在，假设我有一个填充 a`ParentModel`及其子属性的操作，一个简单的视图可能如下所示：

```
@model EditorTemplateCollectiosns.Models.ParentModel
@using (@Html.BeginForm())
{
    <div>
        @Html.TextBoxFor(m => m.ParentId)
        @Html.TextBoxFor(m => m.ParentText)<br/>
        Children:<br/>
        @for (var i = 0; i < Model.Children.Count; i++)
        {
            @Html.TextBoxFor(m => Model.Children[i].ChildId)
            @Html.TextBoxFor(m => Model.Children[i].ChildText)
            <div>
                Grandchildren:<br/>
                <table id="grandChildren">
                    <tbody>
                        @for (var j = 0; j < Model.Children[i].GrandChildren.Count; j++)
                        {
                            <tr>
                                <td>@Html.TextBoxFor(m => @Model.Children[i].GrandChildren[j].GrandChildId)</td>
                                <td>@Html.TextBoxFor(m => @Model.Children[i].GrandChildren[j].GrandChildText)</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
    <button type="button" id="addGrandchild">Add Grandchild</button>
    <input type="submit" value="submit"/>
}
<script type="text/javascript">
    $(document).ready(function() {
        $("#addGrandchild").click(function() {
            $("#grandChildren tbody:last").append('<tr><td><input type="text" name="grandChildId" /></td><td><input type="text" name="grandChildText" /></td></tr>');
        });
    });
</script> 
```

除非我添加孙子并提交表单，否则此视图工作正常，在这种情况下，它不会绑定到`GrandChildModel`. POST的小提琴：

![添加孙子后发布](https://i.stack.imgur.com/BrU5u.png)

所以我尝试使用编辑器模板`GrandChildModel`，看看它是否可以工作。这很适合简单地显示对象，但我不知道如何将孙子添加到列表中并将其显示在编辑器模板中。我还尝试嵌套加载`$.ajax`调用的局部视图，但这变成了后勤方面的噩梦。

在实际应用中，层次结构比这个例子更深，每个后续的子对象都需要有这个添加/删除能力。每次用户想要添加或删除对象时，如果没有完整的表单帖子，这是否可能？使用上面示例中的方法，是否可以让新添加的孙子绑定到`IList`on POST？或者，有没有一种方法可以在客户端添加一个对象并将其显示在编辑器模板中**并**绑定到`IList`on POST？如果这两种选择都不是正确的方法，那是什么？

**更新**
我已经想出了一些可能有用的hacky，但我仍然很想知道是否有更简单的方法来做到这一点。我将上面的视图代码更改为：

```
@model EditorTemplateCollectiosns.Models.ParentModel
@using (@Html.BeginForm())
{
    <div>
        @Html.TextBoxFor(m => m.ParentId)
        @Html.TextBoxFor(m => m.ParentText)<br/>
        Children:<br/>
        <button type="button" id="addChild" onclick="addChildRow()">Add Child</button>
        <table id="children">
            <tbody class="childTableBody">
                @for (var i = 0; i < Model.Children.Count; i++)
                {
                    <tr>
                        <td colspan="3">Child @i</td>
                    </tr>
                    <tr class="childInfoRow">
                        <td>
                            @Html.TextBoxFor(m => Model.Children[i].ChildId)
                        </td>
                        <td>
                            @Html.TextBoxFor(m => Model.Children[i].ChildText)                            
                        </td>
                        <td>
                            <button type="button" id="removeChild@(i)" onclick="removeChildRow(this)">Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            Grandchildren:<br/>
                            <button type="button" id="addGrandchild@(i)" onclick="addGrandchildRow(this)">Add Grandchild</button>
                            <table id="grandChildren@(i)">
                                <tbody>
                                    @for (var j = 0; j < Model.Children[i].GrandChildren.Count; j++)
                                    {
                                        <tr>
                                            <td>@Html.TextBoxFor(m => @Model.Children[i].GrandChildren[j].GrandChildId)</td>
                                            <td>@Html.TextBoxFor(m => @Model.Children[i].GrandChildren[j].GrandChildText)</td>
                                            <td><button type="button" id="removeGrandchild@(i)_@(j)" onclick="removeGrandchildRow(this)">Delete</button></td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <input type="submit" value="submit"/>
} 
```

然后，我添加了以下 javascript。在每次添加/删除似乎无法正常工作后，我无法使用类和 jQuery click 事件处理程序作为重新绑定处理程序：

```
<script type="text/javascript">
    function addChildRow() {
        var newRowIndex = $("#children tr.childInfoRow").length;
        var newRow = '<tr><td colspan="3">Child ' + newRowIndex + '</td></tr><tr class="childInfoRow"><td><input type="text" name="Children[' + newRowIndex + '].ChildId" /></td>' +
            '<td><input type="text" name="Children[' + newRowIndex + '].ChildText" /></td>' +
            '<td><button type="button" id="removeChild' + newRowIndex + '" onclick="removeChildRow(this)">Delete</button></td></tr>' +
            '<td colspan="3">Grandchildren: <br/><button type="button" id="addGrandchild' + newRowIndex + '" onclick="addGrandchildRow(this)">Add Grandchild</button>' +
            '<table id="grandChildren' + newRowIndex + '"><tbody></tbody></table></td></tr>';
        $("#children tbody.childTableBody:last").append(newRow);
    }
    function addGrandchildRow(elem) {
        var childIndex = $(elem).attr('id').replace('addGrandchild', '');
        var newRowIndex = $("#grandChildren" + childIndex + " tr").length;
        var newRow = '<tr><td><input type="text" name="Children[' + childIndex + '].GrandChildren[' + newRowIndex + '].GrandChildId" /></td>' +
            '<td><input type="text" name="Children[' + childIndex + '].GrandChildren[' + newRowIndex + '].GrandChildText" /></td>' +
            '<td><button type="button" id="removeGrandchild' + childIndex + '_' + newRowIndex + '" onclick="removeGrandchildRow(this)">Delete</button></td></tr>';
        $("#grandChildren" + childIndex + " tbody:last").append(newRow);
    }
    function removeChildRow(elem) {
        $(elem).closest('tr').prev().remove();
        $(elem).closest('tr').next().remove();
        $(elem).closest('tr').remove();
    }
    function removeGrandchildRow(elem) {
        $(elem).closest('tr').remove();
    }
</script> 
```

到目前为止，这是有效的，并且数组值似乎正确绑定。但是，我不喜欢在任一表中添加一行所需的大量内容。有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:09:49.463

如果您只坚持一种模型，这将更容易实现。而不是 ParentModel，ChildModel 和 GrandChildModel 只有一个 HierarchichalPersonModel。

这样，您只需要一个视图和一个自定义编辑器模板。Ajax 会更难一些，但不是你描述的后勤噩梦。

**更新：添加示例**

人物模型：

```
public class Person
{
    public int Id { get; set; }
    public string Text { get; set; }
    public List<Person> Children { get; set; }
} 
```

假仓库：

```
public static List<Person> PersonCollection { get; set; }

public static Person FindById(int id, List<Person> list = null)
{
    if (list == null)
        list = PersonCollection;

    foreach (var person in list)
    {
        if (person.Id == id)
            return person;

        if (person.Children != null)
            return FindById(id, person.Children);
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:59:18.250

我最终在编辑我的原始帖子时使用了该解决方案。这是**大量**的 javascript 并且需要很长时间来测试，但它有效并且是我能找到的唯一方法。如果有人对完整的解决方案感兴趣，请在此处发表评论，我将发布它。

# math - 将整数分解为两个字节

> ID：15851834
> 
> 赞同：5
> 
> 时间：2013-04-06T13:58:17.057
> 
> 标签：math, language-agnostic, embedded

我正在做一个嵌入式项目，我必须将超时值写入一些微芯片的两个字节寄存器中。

超时定义为：

```
 timeout = REG_a * (REG_b +1) 
```

我想使用 256 到 60000 范围内的整数对这些寄存器进行编程。我正在寻找一种算法，该算法在给定超时值的情况下计算 REG_a 和 REG_b。

如果不可能找到精确的解决方案，我想获得下一个可能更大的超时值。

**到目前为止我做了什么：**

我目前的解决方案计算：

```
 temp = integer_square_root (timeout) +1;
   REG_a = temp;
   REG_b = temp-1; 
```

这导致在实践中运行良好的值。但是，我想看看你们是否可以提出更优化的解决方案。

哦，我的内存有限，所以大表是不可能的。运行时间也很重要，所以我不能简单地暴力破解解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:21:56.017

您可以使用该答案[算法中使用的代码来查找给定数字的因子。最短方法？](https://stackoverflow.com/questions/2844703/algorithm-to-find-the-factors-of-a-given-number-shortest-method)找到一个超时因素。

```
n = timeout 
initial_n = n
num_factors = 1;
for (i = 2; i * i <= initial_n; ++i) // for each number i up until the square root of the given number
{
    power = 0; // suppose the power i appears at is 0
    while (n % i == 0) // while we can divide n by i
    {
        n = n / i // divide it, thus ensuring we'll only check prime factors
        ++power // increase the power i appears at
    }
    num_factors = num_factors * (power + 1) // apply the formula
}

if (n > 1) // will happen for example for 14 = 2 * 7
{
    num_factors = num_factors * 2 // n is prime, and its power can only be 1, so multiply the number of factors by 2
}
REG_A = num_factor 
```

第一个因素将是您的 REG_A，因此您需要找到另一个乘以等于超时的值。

```
for (i=2; i*num_factors != timeout;i++);
REG_B = i-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T17:29:18.400

有趣的问题，尼尔斯！

假设您首先固定其中一个值，例如 Reg_a，然后通过除法计算 Reg_b 并使用 roundup: `Reg_b = ((timeout + Reg_a-1) / Reg_a) -1`。

然后你知道你很接近，但有多接近？那么错误的上限是Reg_a，对吗？因为错误是除法的余数。

如果你使一个因素**尽可能小**，然后计算另一个因素，你就会使误差的上限尽可能小。

另一方面，通过使这两个因子接近平方根，您可以使除数尽可能大，从而使误差**尽可能大**！

所以：

首先，Reg_a 的最小值是多少？ `(timeout + 255) / 256`;

然后如上所述计算 Reg_b。

这不会是所有情况下的绝对最小组合，但它应该比使用平方根更好，而且速度也更快。

# javascript - 带有附加 SDK 的 Firefox 中的自定义上下文菜单？

> ID：15851835
> 
> 赞同：4
> 
> 时间：2013-04-06T13:58:28.403
> 
> 标签：javascript, firefox-addon-sdk

我希望向 Firefox 上下文菜单中添加一个菜单项，该菜单项仅在用户右键单击特定 url 时才会显示。我有一个测试网址的功能。我曾经通过订阅“popupshowing”事件来做到这一点，并且：

```
var item = document.getElementById("custom-menu-id");
if (item) // show only for specific links
    item.hidden = gContextMenu.onLink && acceptableURL(gContextMenu.linkURL); 
```

我现在正在尝试使用附加 SDK，但我不再可以访问 gContextMenu。文档中的这个片段对我不起作用：

```
var cm = require("sdk/context-menu");
cm.Item({
    label: "Copy name to clipboard",
    context: cm.URLContext("http://scholar.google*"), 
    contentScript: 'self.on("context", function(node) {return true; });'
}); 
```

在这里，我认为应该可以获得类似 node.URL 的东西并对其进行测试，但它不起作用。也许有人可以建议如何从 sdk 访问 gContextMenu 或如何从节点或其他东西获取 URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T04:27:15.343

此代码仅应在右键单击指向*stackoverflow.com*的链接时显示菜单项：

在您的主模块*main.js 中*：

```
exports.main = function() {
    require("sdk/context-menu").Item({
        label: "stack overflow link",
        context:  require("sdk/context-menu").SelectorContext("a[href]"), 
        contentScriptFile: require("sdk/self").data.url("check-node.js"),
        onMessage: function(msg){},
    });
}; 
```

在您的内容脚本（或内容脚本文件；在本例中为*check-node.js*）中：

```
self.on("click",function(node,data){
    self.postMessage("click");
});
self.on("context", function(node){
    if(node.href && node.href.match(/^https?:\/\/(\w+\.)*stackoverflow\.com(\/.*)?$/))return true;  //show in context menu if return value is true.
}); 
```

回复：您的示例代码。您`URLContext`可以确定菜单项显示在哪些页面上，并且此代码段`self.on("context", function(node) {return true; });`会导致菜单项在`URLContext`满足条件时始终显示。改为使用`SelectorContext`。并如上所示测试 node.href，仅当您希望显示菜单项时才返回 true。

# android - Eclipse 创建失败。导出为未签名的应用程序时的apk文件？

> ID：15851836
> 
> 赞同：0
> 
> 时间：2013-04-06T13:58:29.613
> 
> 标签：android, eclipse, export

我是一个新手自学android开发

我已经设置并安装了 Eclipse/android sdk 和 ADT 插件包

一切正常，包括我的第一个测试“Hello world”程序，当您选择 new->Android 应用程序时，该程序已经预先安装：

当将应用程序导出为未签名的应用程序时，Eclipse 成功地将这个“Hello world”应用程序转换为 .apk 文件。

在指导我的 Android 教程的帮助下 - 我想向我的应用程序添加一个简单的文本框，我通过添加和更改以下文件来完成此操作：

首先：我将activity_main.xml 文件更改为以下内容：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="horizontal">

 <EditText
  android:id="@+id/editText1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentLeft="true"
  android:layout_alignParentTop="true"
  android:layout_marginTop="16dp"
  android:ems="10"
  android:hint="@string/edit_message" />

  </LinearLayout> 
```

其次：我在 strings.xml 文件中添加了一个字符串“名称”和硬编码文本“输入消息” - 所以现在可以解析文本框对象 ID 名称。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Gizmodo2</string>
    <string name="action_settings">Settings</string>
    <string name="edit_message">Enter a message</string>
</resources> 
```

我的新简单应用程序可以使用添加的文本框编译，一切都已解决。

但是现在的问题是，当我现在尝试将应用程序导出为未签名的 android 应用程序时，Eclipse 不会生成 .apk 文件，它只会生成扩展名为 .file 的文件！！！- 为什么？以及如何从这个应用程序生成我需要的 .apk 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:17:09.050

你`EditText`的定义看起来不错，这不是你的问题的原因。还有别的东西。尝试将这些文件移动到一个新项目并在模拟器上再次运行它以在该项目的文件夹中生成一个新`.apk`文件。`bin`

顺便说一句，当您在模拟器中运行此代码时会发生什么？

# gnuplot - Gnuplot 和复指数

> ID：15851842
> 
> 赞同：6
> 
> 时间：2013-04-06T13:59:36.370
> 
> 标签：gnuplot

谁能告诉我如何使用 gnuplot 绘制复杂的指数。我尝试使用此脚本绘制它们，但`i`无法识别参数。

```
set terminal epslatex color colortext size 9cm,5cm
set size 1.5,1.0
set output "eulerjeva_identiteta_1.tex"

set style line 1 linetype 1 linewidth 3 linecolor rgb "#FF0055"
set style line 2 linetype 2 linewidth 1 linecolor rgb "#FF0055"
set style line 3 linetype 1 linewidth 3 linecolor rgb "#2C397D"
set style line 4 linetype 2 linewidth 1 linecolor rgb "#2C397D"
set style line 5 linetype 1 linewidth 3 linecolor rgb "#793715"
set style line 6 linetype 2 linewidth 1 linecolor rgb "#793715"
set style line 7 linetype 1 linewidth 3 linecolor rgb "#b1b1b1"
set style line 8 linetype 3 linewidth 1 linecolor rgb "#b1b1b1"

set grid

set samples 7000

set key at graph .95, 0.4
set key samplen 2
set key spacing 0.8

f(x) = exp(i*x)
g(x) = exp(-i*x)
h(x) = exp(i*x)+exp(-i*x)

set xrange [-2*pi:2*pi]
set yrange [-1.2:1.2]

set xtics ("$0$" 0, "$\\pi$" pi, "$-\\pi$" -pi)
set ytics ("$1$" 1, "$-1$" -1)

set xlabel "$x$"

plot [-2*pi:2*pi] f(x) ls 1 title "$\\e^{ix}$", g(x) ls 3 title "$\\e^{-ix}$", h(x) ls 5 title "$\\e^{ix} + \\e^{-ix}$" 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T19:06:02.567

Gnuplot 不理解`i`是`sqrt(-1)`因为 gnuplot 没有为该变量`i`赋值——就它而言，它只是另一个变量名称。Gnuplot 可以使用以下格式理解和操作复数

```
z = {a,b} 
```

它以书面形式表示复数`z = (a + ib)`。所以，我可以定义

```
i = {0.0,1.0} 
```

当你绘制图表时，仍然存在你会得到什么的问题

```
plot exp(i*x) 
```

所有的点都是“未定义的”，因为它们有一个虚构的分量。（虽然，`h(x) = exp(i*x)+exp(-i*x)`因为它是纯真实的，所以可以很好地绘制。）问题是 gnuplot 只能绘制真实的数量。你可以试试

```
plot real(exp(i*x)), imag(exp(i*x)) 
```

分别可视化组件，或者您可以制作参数图：

```
set parametric
plot real(exp(i*t)), imag(exp(i*t)) 
```

# c# - 尝试读取 mdf 时出现问题

> ID：15851845
> 
> 赞同：1
> 
> 时间：2013-04-06T14:00:15.233
> 
> 标签：c#, sql, sql-server-2008

我很难从我的 mdf 中获取存储的值。我可以看到他们在那里，一切都在按预期工作，直到我想抓住他们，我就是不能。我已经尝试了将近 48 小时，但我无法让它工作。我在这里阅读了大量指南和其他主题，但似乎对我没有任何帮助。我想我只是对这种访问和 mdf SQL 数据库的方式有所了解。我只是希望它放弃存储在指定行上的秘密。

我正在尝试访问存储在名为 Table1 的 mdf 文件中编号行（指定为 int 行）中的三个值并将它们返回给调用者。

我最近几个小时一直在战斗的代码是这样的：

```
 public static void loadAnimalData(int row, out string stringId, out string name, out double age)
    {
        int antal = AnimalsDBCount();
        String connString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|path.to.db|DBList.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection con = new SqlConnection(connString);
        con.Open();

        using (SqlCommand command = new SqlCommand("SELECT ID WHERE ID = " + row, con))
        {
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                m_stringId = reader.GetString(0);    
                m_name = reader.GetString(1); 
                m_age = reader.GetDouble(2); 

            }
        }
        con.Close();
        stringId = m_stringId;
        name = m_name;
        age = m_age;

    } 
```

我在这里迷路了，我似乎无法访问指定的行或值，我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:01:49.350

~~您可能想要的是；~~

 ~~```
m_stringId = reader[0].ToString();    
m_name = reader[1].ToString();  
m_age = reader[2].ToString(); 
```~~  ~~[`SqlDataReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)read *rows*，因为你选择了一个，所以你不能访问其他的。

> 提供一种从 SQL Server 数据库中读取只进的行流的方法。

你应该选择其他列也喜欢;

```
using (SqlCommand command = new SqlCommand("SELECT ID, NAME, AGE WHERE ID = " + row, con))
{

    SqlDataReader reader = command.ExecuteReader();
    while (reader.Read())
    {
       m_stringId = reader.GetInt32(0);   
       m_name = reader.GetString(1); 
       m_age = reader.GetString(2); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:02:41.920

您只选择`ID`（已知的），而不是任何其他列。

尝试改变：

```
"SELECT ID WHERE ID = " + row 
```

到

```
"SELECT ID, NAME, AGE WHERE ID = " + row 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T14:03:11.630

您可能希望在您的选择语句中选择您的列

```
using (SqlCommand command = new SqlCommand("SELECT ID, name, age from TableOfInterest WHERE ID = " + row, con)) 
```

然后你可以在你的阅读器中使用它们~~

# phpexcel - phpExcel 分块读取太慢和内存错误

> ID：15851847
> 
> 赞同：0
> 
> 时间：2013-04-06T14:00:18.770
> 
> 标签：phpexcel

我正在尝试读取大约 20mb 的大 excel 文件以导入 mysql。

我已经在互联网上搜索并找到了“块阅读”解决方案，但是它不起作用......或者对我来说太慢了，我不知道为什么。

这就是我正在做的事情：

```
// .....
// into MyReadFilter class.. this is the most important function:
public function readCell($column, $row, $worksheetName = '') {
        //  Only read the rows and columns that were configured
        if (($row == 1) || ($row >= $this->_startRow && $row < $this->_endRow)) {
            if (in_array($column,$this->_columns)) {
                return true;
            }
        }
        return false;
    }
// .....

$filter = new MyReadFilter(1, 22000); 
$chunkSize = 10;

$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objReader->setReadFilter($filter);
$objReader->setReadDataOnly(false); //not sure if this should be true

for ($startRow = 2; $startRow <= 65536; $startRow += $chunkSize) {

  echo "Reading";
  $filterSubset->setRows($startRow, $chunkSize);
  $objPHPExcel = $objReader->load($inputFileName); // this line takes like 40 seconds... for 10 rows?
  echo "chunk done! ";
} 
```

但是，在 for 内部，$objReader->load() 大约需要 40 秒，事实上，在 2 次循环之后，我遇到了内存错误。

如果我在 for 中取消设置 $objReader，我可以让它在 for... 中运行大约 20 次（尽管需要大约 10 分钟）和.. 内存错误。

我想知道如果我使用过滤器，为什么加载函数似乎读取了所有文件，过滤器策略似乎解析所有行并为所有不需要的行返回 false ......不可能中止读取或真的只阅读所需的吗？

我已经尝试了几个 FilterClass 和代码片段，但得到了相同的结果......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:38:23.427

如果您正在使用过滤器，则阅读器仍在读取整个文件，但仅填充过滤器定义的 PHPExcel 对象单元格；并且 Reader 仍然需要在每次过滤过程中读取整个文件，这就是它变慢的原因。

由于原始电子表格文件的结构，Reader 需要读取整个文件。单元格数据不以单元格格式存储，单元格内容也可以单独存储。读者需要将所有这些放在一起。您不能在满足过滤条件时简单地中止阅读器，因为阅读器无法知道它已经完成......如果您有一个过滤器将负载限制在单元格 A1:C3，那么您可以'在读取 B3 后不中止，因为您不知道文件中的单元格 B2 是否在该单元格之后，或者文件中可能有与单元格 A1 相关联的注释。在整个文件被加载和解析之前，你不能开始过滤。

PHPExcel 中的主要内存使用是 PHPExcel 对象，特别是单元格（在 32 位 PHP 上通常约为 1k/单元格）......这里提供的减少内存的主要解决方案是单元格缓存。这可以（使用 SQLite 缓存）将单元内存使用量减少到 0k/单元，但以速度为代价。

Reader 使用的内存并不比 Excel 文件（解压缩）本身的大小多多少，因此通常内存问题要小得多；但这正在通过从 SimpleXML 切换到 XMLReader 来解决（对于基于 XML 的电子表格格式）。但这取决于正在加载的文件的格式；xls 格式文件与 xlsx 文件非常不同（xlsx 会从中受益，xls 不会）并且还取决于开发人员能够找到时间来执行此操作 - 但它在来年的路线图上，并且可以工作已经开始了。

# ruby-on-rails - 出生日期存储在数据库中时按年龄过滤的问题

> ID：15851849
> 
> 赞同：0
> 
> 时间：2013-04-06T14:00:30.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我做了很多研究，没有发现任何相关的东西。问题是我的用户表有一个 DOB 列。我的用户模型有一个计算用户年龄的年龄方法。我能够按如下方式显示用户年龄：`current_user.age`它工作得很好。但我不能在查询中使用年龄，因为它不是用户模型中的属性。其他网站（例如约会网站）如何提供按年龄过滤的选项？我无法想象他们在数据库中有一个年龄列，因为不断更新它会很痛苦。简而言之，如何根据用户提供的年龄范围过滤结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:15:27.210

假设您想查找年龄在 18 到 20 岁之间（包括今天）的用户，并且您将 DOB 存储在名为`dob`.

今天正好 18 岁的人将在 1995 年 4 月 6 日出生。而明天将满 21 岁的人将在 1993 年 4 月 7 日出生。

因此，您希望用户的出生日期介于 1993 年 4 月 5 日和 1995 年 4 月 6 日之间。

```
18.years.ago.to_date
=> Thu, 06 Apr 1995
(20.years.ago + 1.day).to_date
=> Mon, 07 Apr 1993 
```

您现在可以使用它

```
User.where("dob >= ? AND dob <= ?", 20.years.ago + 1.day, 18.years.ago) 
```

# javascript - 如何在 JSP 中访问 JavaScript 数组

> ID：15851852
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:00:52.563
> 
> 标签：javascript, jsp, jstl

我想在 JSP 中访问 AJAX 值。我可以通过使用来自后端的 ajax 来获取需要在 JSP 页面中使用的值。

我想要达到的目标如下所述：

1.  当用户单击任何类别时，AJAX 调用将默认为，在我想加载类别中接收到的子`<div>`类别之后；
2.  我尝试使用 AJAX 来获取值，然后在 JavaScript 中我能够获取数组中的值。我试图将该数组存储在一个 JSTL 标记中，`<c:set var="subCatIds">subCategoryIds</c:set>`但我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:13:19.863

正如你所理解的，事态的转变是错误的。我可以从您的帖子中得到以下信息：

1.  最初由 servlet 加载视图。它没有任何子类别。但所有第一级目录都已填充；
2.  您想填充某些事件的子目录，即按钮单击、悬停等。为此，您正在发送 ajax 请求，指定父目录作为请求参数，例如 by `$.get()`，在 servlet 中拦截该请求，并获取响应来自该 servlet 的子目录，例如 JSON；
3.  在回调函数中，您拥有一个包含所需数据的 JSON。迭代它，您将创建所需的 HTML 结构，最后您将使用该内容设置名为 div 的初始的内部 HTML。

如果我的理解是正确的，那就继续吧，一步一步做，你就会得到想要的结果。

# ajaxcontroltoolkit - AjaxControlToolkit 7.0123 打破 VS2012 Web 应用程序项目

> ID：15851857
> 
> 赞同：8
> 
> 时间：2013-04-06T14:01:24.110
> 
> 标签：ajaxcontroltoolkit, asp.net-4.5

我有一个现有的 VS2012 Web 应用程序，它一直运行良好，直到我添加了最新的 AjaxControlToolkit (7.0123)。最初，我发现安装破坏了 UpdatePanel 的行为 - 而在我可以在异步回发之后刷新页面而不重复操作之前，我发现安装后刷新会重复之前的操作（我猜回发不再是异步的）。

然后我注意到，在过去的某个时候，我已经注释掉了一些添加到新 ASP.NET Web 窗体应用程序中的默认 JavaScript 文件，因此我尝试将它们重新添加。这导致了一个异常：

> “MsAjaxBundle”不是有效的脚本名称。名称必须以“.js”结尾。

然后我尝试用这个替换默认值`<asp:ScriptManager .../>`导致`<ajaxControlToolkit:ToolkitScriptManager .../>`一个新的异常

> 无法加载文件或程序集“System.Web”或其依赖项之一。该系统找不到指定的文件。

为了理智，我创建了一个新的 ASP.NET Web 窗体应用程序（VS2012，更新 2）并运行它。没有错误。然后，我使用“nuget”添加了 AjaxControlToolkit v7.0123（最新版本）。再次运行应用程序，我再次得到原始异常：

> “MsAjaxBundle”不是有效的脚本名称。名称必须以“.js”结尾。

再一次，我替换 `<asp:ScriptManager .../>`为`<ajaxControlToolkit:ToolkitScriptManager .../>`并再次导致

> 无法加载文件或程序集“System.Web”或其依赖项之一。该系统找不到指定的文件。

任何人都可以阐明我还需要做些什么来解决这个问题吗？添加工具包时，我找不到任何文档说明需要手动更改任何内容。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T14:12:59.353

[在http://stephenwalther.com/archive/2012/09/20/september-2012-release-of-the-ajax-control-toolkit.aspx](http://stephenwalther.com/archive/2012/09/20/september-2012-release-of-the-ajax-control-toolkit.aspx)找到答案（总是在发布问题后哈）

*   替换`<asp:ScriptManager .../>`为`<ajaxControlToolkit:ToolkitScriptManager .../>`正确
*   需要删除对 MsAjaxBundle 的引用
*   需要从脚本引用中删除 Assembly="System.Web"

这修复了异常（在新项目和原始项目中）。

但是，它不能解决 UpdatePanel 不再异步回发的问题。我将把它作为一个新问题提出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T14:24:32.587

如果您使用的是 2013 年 4 月发布的 Ajax 控制工具包，请参阅 Stephen Walther 的最新博文：

[http://stephenwalther.com/archive/2013/04/30/april-2013-release-of-the-ajax-control-toolkit.aspx](http://stephenwalther.com/archive/2013/04/30/april-2013-release-of-the-ajax-control-toolkit.aspx)

我错过了允许 AjaxFileUpload 控件在新版本中工作的新 web.config 设置

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" maxRequestLength="42949672" />
    <httpHandlers>
      <add verb="*" path="AjaxFileUploadHandler.axd" type="AjaxControlToolkit.AjaxFileUploadHandler, AjaxControlToolkit"/>
    </httpHandlers>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <add name="AjaxFileUploadHandler" verb="*" path="AjaxFileUploadHandler.axd" type="AjaxControlToolkit.AjaxFileUploadHandler, AjaxControlToolkit"/>
    </handlers>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="4294967295"/>
      </requestFiltering>
    </security>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T11:51:50.387

当您看到此“'MsAjaxBundle' 不是有效的脚本名称。名称必须以 '.js' 结尾。”

你能做的最好的事情是：

1.  转到网站大师（双击它）
2.  搜索“MsAjaxBundle”或“”
3.  评论这一行，例如。<%----%>
4.  保存或编译您的程序，然后运行它

感谢上帝现在正在工作

# json - 使用字符串或流解析的区别（Poco c++）

> ID：15851867
> 
> 赞同：2
> 
> 时间：2013-04-06T14:02:41.517
> 
> 标签：json, saxparser, poco-libraries

我使用 POCO JSON 编写了一个简单的分层 json 解析器，用作 sax 解析器。如果我使用字符串或流作为解析方法的输入，它们的结果是否有任何差异，请参见下面的调用，或者不同的构造函数是否等效？

```
Parser parser;
DefaultHandler handler;
parser.setHandler(&handler);
parser.parse(input); 
```

在内存消耗，速度等方面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:34:52.457

std::string 版本只是代表您创建流的[包装器](https://github.com/pocoproject/poco/blob/develop/JSON/include/Poco/JSON/Parser.h#L107)，因此最终总数将大致相同，字符串对用户来说更方便。

[编辑]

1.5.2 对此进行了更改-删除了包装，因此现在（流和字符串）版本都可以迭代。[基准示例](https://github.com/pocoproject/poco/blob/develop/JSON/samples/Benchmark/src/Benchmark.cpp#L98)可用于确定流比字符串慢多少。

[/编辑]

请注意，1.5.2 中有一些[重大更改](https://github.com/pocoproject/poco/commit/25311c7eed80068b6abeb872582a8a216bb0b3f8#L0L28)- DefaultHandler 名称已删除，内部处理程序已转换为自动创建的智能指针（这是我们必须废弃 DefaultHandler 以便现有代码不会传递堆栈创建的处理程序的主要原因对于智能指针，这不是一个好的设计）。因此，在 1.5.2 中，默认解析不再需要显式创建处理程序：

```
std::string json = "{ \"test\" : null }";
Parser parser;
Var result = parser.parse(json); 
```

如果您关心性能，还要注意 Poco::JSON 解析器的速度，就目前而言，很差，我们将使用[Poco::Web::JSON的](https://github.com/pocoproject/poco/blob/json-benchmark/Web/include/Poco/Web/JSONParser.h#L78)[非常快](https://github.com/pocoproject/poco/blob/json-benchmark/JSON/samples/Benchmark/src/Benchmark.cpp#L59)的解析器或更快的解析器（如果我们能找到/写下来）。底线，1.5.x 仍然是 WIP

希望这可以帮助。

编辑：

Windows 和 Mac 上的[基准测试（~15MB JSON 文件）：](https://github.com/pocoproject/poco/blob/json-benchmark/JSON/samples/Benchmark/src/Benchmark.cpp#L59)

**视窗**

> Poco::JSON: 1 195 313 [us]
> Poco::Web::JSON: 403 320 [us]
> json-parser: 321 289 [us]
> libjson: 610 352 [us]

**MAC（叮当声）**

> Poco::JSON: 480 965 [我们]
> Poco::Web::JSON: 176 297 [我们]
> json-parser: 220 172 [我们]

# python - 使用python的主成分分析（PCA）计算平均值

> ID：15851869
> 
> 赞同：0
> 
> 时间：2013-04-06T14:02:45.927
> 
> 标签：python, numpy, face-recognition, mean, pca

我是 python 的初学者，我正在使用 python 实现主成分分析 (PCA)，但我在计算平均值时遇到了问题。这是我的代码：

```
import Image
import os
from PIL import Image
from numpy import *
import numpy as np

#import images
dirname = "C:\\Users\\Karim\\Downloads\\att_faces\\New folder"
X = [np.asarray(Image.open(os.path.join(dirname, fn))) for fn in os.listdir(dirname)]

#get number of images and dimentions
path, dirs, files = os.walk(dirname).next()
num_images = len(files)
image_file = "C:\\Users\\Karim\\Downloads\\att_faces\\New folder\\2.pgm"
img = Image.open(image_file)
width, height = img.size

print width
print height
print num_images

M = (X-mean(X.T,axis=1)).T # subtract the mean (along columns) 
```

我得到错误：

```
AttributeError: 'list' object has no attribute 'T' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:03:22.957

问题`X.T`出在你的最后一行，因为`X`它是一个 python 列表，而不是一个`numpy.ndarray`. 目前尚不清楚您要在这里做什么，但是如果您想将所有图像数组组合成一个 numpy 数组，您可以`X = np.array(X)`在最后一行之前进行转换。

`np.cov`此外，除非您特别想推出自己的 PCA 实现，否则您可以通过使用（用于协方差计算）和`np.linalg.eig`（计算协方差矩阵的特征值和特征向量）更轻松地使用 numpy 完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:43:06.837

`images -= np.mean(images, axis=0)`

# google-api - 如何在 freebase 搜索建议中排除位置？

> ID：15851872
> 
> 赞同：1
> 
> 时间：2013-04-06T14:03:12.967
> 
> 标签：google-api, freebase

如何在选择位置时从搜索建议中排除一个大陆和国家，以便我可以使用剩余的位置（我想排除除印度以外的亚洲大陆和国家）？

我使用下面的代码：

```
$(function() {

$("#myinput")
  .suggest({
    "key": "abc",
  filter: '(all type:/location/)'
  })
 .bind("fb-select", function(e, data) {
   alert(data.name + ", " + data.id + " (" + data['n:type'].name + ")");
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:50:48.153

Freebase Search 有一个非常强大的过滤器语言，包括 AND（“all”）、OR（“any”）和 NOT（“not”）运算符。文档分为开发者网站和邮件列表，但您可以在此处找到基础知识：[https ://developers.google.com/freebase/v1/search-overview](https://developers.google.com/freebase/v1/search-overview)

# java - 来自 JCalander 组合框的空指针异常

> ID：15851873
> 
> 赞同：1
> 
> 时间：2013-04-06T14:03:32.277
> 
> 标签：java, date, calendar, datepicker

我的 Java 应用程序从 JCalander Combobox 产生空指针异常。我试图抓住错误。但这没有用。有人可以帮我解决这个问题。请。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at java.util.Calendar.setTime(Calendar.java:1106)
at java.text.SimpleDateFormat.format(SimpleDateFormat.java:955)
at java.text.SimpleDateFormat.format(SimpleDateFormat.java:948)
at java.text.DateFormat.format(DateFormat.java:336)
at org.freixas.jcalendar.JCalendarCombo.paramString(JCalendarCombo.java:780)
at java.awt.Component.toString(Component.java:8095)

 tbmodel = (DefaultTableModel)tblItmQty.getModel();
        System.out.println(calRecvDate.getDate());
        try{
        if(calRecvDate.getDate()==null){ // Error
            JOptionPane.showMessageDialog(null, "Please Select Shippment Received Date");  
            calRecvDate.requestFocus();

        }else if(txtShipSs.getText().isEmpty()){ 
```

///////////////////////////////////////// //////////////

```
 if (inputValidate() == true) {

              try {
                    String shipId = txtShipId.getText();
                    String invID = txtInvoice.getText();
                    String shipSs = txtShipSs.getText();
                    String address = txtNtfAddress.getText();
                    String sipper = txtAShipper.getText();
                    String vessal = txtVessal.getText();
                    Date rcvDate = calRecvDate.getDate(); // Jcalander
                    String consignee = txtConsigne.getText();

                    ArrayList<ShippmentItems> shipItems = new ArrayList<ShippmentItems>();
                    tbmodel = (DefaultTableModel) tblItmQty.getModel();

                    for (int i = 0; i < tbmodel.getRowCount(); i++) {
                          String itmcode = (String) tbmodel.getValueAt(i, 0);
                          String itmName = (String) tbmodel.getValueAt(i, 1);
                          int qty = (int) tbmodel.getValueAt(i, 2);
                          ShippmentItems shpItems = new ShippmentItems(shipId, itmcode, itmName, qty);
                          shipItems.add(shpItems);
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:18:48.313

由于这会引发 NPE：

```
calRecvDate.getDate()==null 
```

该`calRecvDate`变量为空，您需要在使用它之前检查它是否为空，或者通过在代码中回溯到您认为已初始化它的位置并修复问题来确保它不为空（因为它未初始化）。

要检查它是否为空，您可以执行以下操作：

```
if (calRecvDate != null) {
  // use the calRecvDate variable here
} else {
  // initialize the calRecvDate variable here

  // or perhaps better, display a JOptionPane error message to the user
  // that the date hasn't been selected, and exit this method by calling return:

  return;
} 
```

同样，不要使用 try/catch 块来处理 NullPointerExceptions。

# javascript - .net 中的日期与 javascript 中的日期

> ID：15851877
> 
> 赞同：2
> 
> 时间：2013-04-06T14:03:53.080
> 
> 标签：javascript, json, date, asp.net-web-api

我有一个 ASP.NET WEB.API 4 和一个返回以下 json 的控制器：

```
{   date: "2013-03-14T00:00:00"   } 
```

我在客户端（JavaScript）上解析它：

```
date = new Date(json.date); // json.date being "2013-03-14T00:00:00" 
```

后来我做了一个 POST 并且在正文中日期已更改为

```
{   date: "2013-03-13T23:00:00.000Z"   } 
```

我的猜测是 JavaScript 或浏览器添加了一些时区内容？

由于数据库将日期存储为 int (yyyymmdd)，因此我进行了以下转换：

```
public static int ToInt(DateTime date)
{
    return date.Year * 10000 + date.Month * 100 + date.Day;
} 
```

然后得到的 int 休息一天 :(

但是，如果我这样做

```
date.ToLocalTime() 
```

在调用 ToInt 方法之前，它看起来不错。

我是否正确理解了这一点并且 ToLocalTime() 是一个足够的解决方案，还是我需要花一天时间阅读 .NET 和 JavaScript 中的 UTC 日期？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:35:24.530

> ```
> date = new Date(json.date); // json.date being "2013-03-14T00:00:00" 
> ```

那是哪个时区`json.date`？如果没有关于此的信息，[JS`Date`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)将假定它是客户端的本地时区（这是非常随机的）。如果您希望它是 UTC，只需`"Z"`在您的 ISO 日期字符串之后添加：

```
date = new Date(json.date+"Z"); 
```

也总是使用这些`[gs]etUTC(FullYear|Month|Date|…)`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:09:54.810

在我看来，如果您的控制器将以 ZULU 格式返回日期，您将获得更好的结果。所以在发送之前使用： ToUniversalTime ( [http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx) ) 结果也将是 ZULU 格式，所以你不必转换它到本地时间

# c# - 给定窗口句柄，监听 Handle Rect Change 事件

> ID：15851885
> 
> 赞同：0
> 
> 时间：2013-04-06T14:04:53.560
> 
> 标签：c#, winapi, window-handles, window-messages

我有一个窗口的句柄（HWND），我想监听边界矩形的变化。我可以[`GetWindowRect(HWND hWnd, LPRECT lpRect);`](http://msdn.microsoft.com/en-us/library/ms633519%28VS.85%29.aspx)每隔 n 毫秒检查一次，但这似乎真的很浪费。

*是否有我可以收听的 Windows 消息？*

窗口句柄不是我拥有的窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:13:34.500

我认为如果你使用[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990%28VS.85%29.aspx)安装一个钩子函数，然后监听[WM_SIZE](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms632646%28v=vs.85%29.aspx)消息，你可以做到这一点。

# c# - 从字符串中删除子字符串，拆分结果并将其存储在数组中

> ID：15851886
> 
> 赞同：0
> 
> 时间：2013-04-06T14:04:55.343
> 
> 标签：c#, arrays, string, c#-4.0, split

我的代码是：

```
public void processData(string data)
{
       string com = data.Split(' ')[0];
       string[] val = data.Remove(0,com.Length).Split(' ');
} 
```

我想使用这段代码实现的是，当存储变量中`com`的第一个单词时，数组应该存储变量的剩余单词。在第 4 行代码中，我首先将字符从 0 索引删除到第一个单词的长度。这将删除第一个单词，然后根据空格将其拆分，然后将结果存储在数组中。问题是这没有发生。正在存储第一个单词，但始终显示为空。请有人告诉我该怎么做？我可以使用循环或其他技术来实现这一点。但由于性能问题，我不想要太多代码。`data``val``data``com``val``foreach`

我的示例字符串是这样的：

```
begin main
timesteps 1750
weeks 250
campaigns 6
scenario 10
epsilon 0.01
powerplant1 11
powerplant2 10
constraint13 46
constraint14 7
constraint15 0
constraint16 1
constraint17 3
constraint18 0
constraint19 1
constraint20 1
constraint21 1
durations 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 
```

左侧有字段，右侧有值。我想单独存储它们。

示例：字段是`timesteps`，值是`1750`

**解决方案：**

这是一个非常愚蠢的解决方案，但我刚刚重新启动了我的 Visual Studio，它运行良好。

感谢大家的好评。我 +1 所有答案并标记了 Blachshma 答案，因为重新启动或重新创建项目的建议来自他。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:08:48.277

使用 LINQ 的**[Skip()](http://msdn.microsoft.com/en-us/library/bb358985.aspx)**

```
string[] val = data.Split(' ').Skip(1).ToArray(); 
```

要强调示例中的字符串：

```
string data = "timesteps 1750";
string com = data.Split(' ')[0]; // Returns timesteps
string[] val = data.Split(' ').Skip(1).ToArray(); // Returns 1750 
```

你的另一个例子：

```
string data = "durations 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24 24"; 
```

`com`将有“持续时间”，`val`并将有一个由 16 个元素组成的数组，每个元素的值为“24”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T14:13:19.963

```
string[] val = data.Remove(0, data.IndexOf(' ') + 1).Split(' '); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T14:15:04.223

我假设它`val`没有显示`null`，但第一个单词是空的，因为你已经从字符串中删除了第一个单词的子字符串，但你没有删除分隔符（空格）。

所以这应该有效（如果你只想删除第一个单词）：

```
string[] val = data.Split().Skip(1).ToArray(); 
```

# c++ - 为什么 std::vector::get_allocator() 按值返回？

> ID：15851888
> 
> 赞同：10
> 
> 时间：2013-04-06T14:05:01.797
> 
> 标签：c++, allocator

令我惊讶的是，在尝试使用`std::vector::get_allocator()`不可复制的分配器时出现错误。为什么`std::vector::get_allocator()`按值返回而不是按引用返回？

```
template<typename T>
class nc_allocator {
public:
    using value_type = T;

    nc_allocator(nc_allocator const&) = delete;
    nc_allocator& operator=(nc_allocator const&) = delete;

    // Other required members.
};

std::vector<int, nc_allocator<int>> v;
// boom: use of deleted function
//           'nc_allocator<T>::nc_allocator(const nc_allocator<T>&) [with T = int]'
v.get_allocator(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T14:12:53.980

> `std::vector::get_allocator()`尝试与不可复制的分配器一起使用时出现错误。

该标准禁止您这样做。分配器要求规定`17.6.3.5`分配器应是可复制的。

```
X a1(a);         Shall not exit via an exception.
                 post: a1 == a
X a1(move(a));   Shall not exit via an exception.
                 post: a1 equals the prior value
                 of a. 
```

因此，按值返回是返回分配器的正确方式，涉及标准定义的分配器要求。

我不确定*为什么*这是一个要求，但如果允许不可复制的分配器，空基优化将不再起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:15:30.790

标准只是这样规定：

> `[C++11: 23.2.1/7]:` *[..]*在本条款中定义的所有容器类型中，成员 get_allocator() 返回用于构造容器的分配器的副本，或者，如果该分配器已被替换，则返回最近替换的副本*[..]*

我怀疑@Vaughn 的假设是正确的，即分配器应该用作“句柄”。

通过*非常*松散的类比，您会编写一个不可复制的仿函数以用于标准算法吗？

# optimization - 优化 .ssh/config

> ID：15851889
> 
> 赞同：0
> 
> 时间：2013-04-06T14:05:10.263
> 
> 标签：optimization, ssh, config

我的 .ssh/配置：

```
Host *.gnu.org
  Compression yes 

Host bixeon
  User root
  ProxyCommand ssh newton nc -w 1 %h 22

Host freebsd.polarhome.com freebsd
  Port 715
  Protocol 2,1
  Hostname gate.polarhome.com

Host solaris.polarhome.com solaris
  Port 725
  Protocol 2,1
  Hostname gate.polarhome.com

Host openbsd.polarhome.com openbsd
  Port 735
  Protocol 2,1
  Hostname gate.polarhome.com

Host netbsd.polarhome.com netbsd
  Port 745  
  Protocol 2,1
  Hostname gate.polarhome.com

Host debian.polarhome.com debian
  Port 755
  Protocol 2,1
  Hostname gate.polarhome.com

Host alpha.polarhome.com alpha
  Port 765
  Protocol 2,1
  Hostname gate.polarhome.com

Host aix.polarhome.com aix
  Port 775
  Protocol 2,1
  Hostname gate.polarhome.com

Host hpux.polarhome.com hpux
  Port 785
  Protocol 2,1
  Hostname gate.polarhome.com

Host redhat.polarhome.com redhat
  Port 795
  Protocol 2,1
  Hostname gate.polarhome.com

Host ultrix.polarhome.com ultrix
  Port 805
  Protocol 2,1
  Hostname gate.polarhome.com

Host qnx.polarhome.com qnx
  Port 815
  Protocol 2,1
  Hostname gate.polarhome.com

Host irix.polarhome.com irix
  Port 825
  Protocol 2,1
  Hostname gate.polarhome.com

Host tru64.polarhome.com tru64
  Port 835
  Protocol 2,1
  Hostname gate.polarhome.com

Host openindiana.polarhome.com openindiana
  Port 845
  Protocol 2,1
  Hostname gate.polarhome.com

Host suse.polarhome.com suse
  Port 855
  Protocol 2,1
  Hostname gate.polarhome.com

Host openstep.polarhome.com openstep
  Port 865
  Protocol 2,1
  Hostname gate.polarhome.com

Host mandriva.polarhome.com mandriva
  Port 875
  Protocol 2,1
  Hostname gate.polarhome.com

Host ubuntu.polarhome.com ubuntu
  Port 885
  Protocol 2,1
  Hostname gate.polarhome.com

Host scosysv.polarhome.com scosysv
  Port 895
  Protocol 2,1
  Hostname gate.polarhome.com

Host unixware.polarhome.com unixware
  Port 905
  Protocol 2,1
  Hostname gate.polarhome.com

Host unknown1.polarhome.com unknown1
  Port 915
  Protocol 2,1
  Hostname gate.polarhome.com

Host centos.polarhome.com centos
  Port 925
  Protocol 2,1
  Hostname gate.polarhome.com

Host miros.polarhome.com miros
  Port 935
  Protocol 2,1
  Hostname gate.polarhome.com

Host hurd.polarhome.com hurd
  Port 945
  # Hurd fails with compression
  Compression no
  Protocol 2,1
  Hostname gate.polarhome.com 
```

我有一种感觉，它可以写得更短。如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:24:59.503

虽然我喜欢速记主机名方法，但我发现使用速记“域”来更好地控制哪些东西适用于何处是值得的。此外，正如手册页所建议的那样，将特定于主机的内容放在前面，以覆盖您最后想要的更通用的默认值。我添加了一个虚拟条目来说明我的意思（例如，虚拟必须通过不同的主机名或使用与默认值不同的用户或身份）。

```
Host freebsd.polarhome.com freebsd.ph
  Port 715

Host solaris.polarhome.com solaris.ph
  Port 725

...

Host dummy.polarhome.com dummy.ph
  Hostname dummy.polarhome.com
...

Host *.polarhome.com *.ph
  Protocol 2,1
  Hostname gate.polarhome.com 
```

# ruby - 在 linux mint 上的 ruby 1.8.7 中安装 libxml

> ID：15851893
> 
> 赞同：1
> 
> 时间：2013-04-06T14:06:24.943
> 
> 标签：ruby, gem, linux-mint, libxml-ruby

这是尝试安装时的结果-> extconf 失败：需要 libm

```
virtualrails@jay ~ $ sudo gem install libxml-ruby
Building native extensions.  This could take a while...
ERROR:  Error installing libxml-ruby:
    ERROR: Failed to build gem native extension.

/opt/rubystack-2.0-0/ruby/bin/ruby extconf.rb
checking for socket() in -lsocket... no
checking for gethostbyname() in -lnsl... no
checking for atan() in -lm... no
checking for atan() in -lm... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/opt/rubystack-2.0-0/ruby/bin/ruby
    --with-iconv-dir
    --without-iconv-dir
    --with-iconv-include
    --without-iconv-include=${iconv-dir}/include
    --with-iconv-lib
    --without-iconv-lib=${iconv-dir}/lib
    --with-zlib-dir
    --without-zlib-dir
    --with-zlib-include
    --without-zlib-include=${zlib-dir}/include
    --with-zlib-lib
    --without-zlib-lib=${zlib-dir}/lib
    --with-socketlib
    --without-socketlib
    --with-nsllib
    --without-nsllib
    --with-mlib
    --without-mlib
    --with-mlib
    --without-mlib
 extconf failure: need libm

Gem files will remain installed in /opt/rubystack-2.0-0/ruby/lib/ruby/gems/1.8/gems/libxml-ruby-2.6.0 for inspection.
Results logged to /opt/rubystack-2.0-0/ruby/lib/ruby/gems/1.8/gems/libxml-ruby-2.6.0/ext/libxml/gem_make.out 
```

这是 mkmf.log 的输出：

* * *

```
have_library: checking for atan() in -lm... -------------------- no

"gcc -o conftest -I. -I/opt/rubystack-2.0-0/ruby/lib/ruby/1.8/i686-linux -I. -DAI_ADDRCONFIG=0 -I/opt/rubystack-2.0-0/common/include  -D_FILE_OFFSET_BITS=64 -DAI_ADDRCONFIG=0 -I/opt/rubystack-2.0-0/common/include  -g -Os -fno-strict-aliasing -L/opt/rubystack-2.0-0/common/lib   -fno-builtin conftest.c  -L. -L/opt/rubystack-2.0-0/ruby/lib -Wl,-R/opt/rubystack-2.0-0/ruby/lib -L/opt/rubystack-2.0-0/ruby/lib -Wl,-R/opt/rubystack-2.0-0/ruby/lib -L. -L/opt/rubystack-2.0-0/common/lib -ltcmalloc_minimal -rdynamic -Wl,-export-dynamic     -lruby-static -lm  -lpthread -lrt -ldl -lcrypt -lm   -lc"
conftest.c: In function ‘t’:
conftest.c:3: error: ‘atan’ undeclared (first use in this function)
conftest.c:3: error: (Each undeclared identifier is reported only once
conftest.c:3: error: for each function it appears in.)
checked program was:
/* begin */
1: /*top*/
2: int main() { return 0; }
3: int t() { void ((*volatile p)()); p = (void ((*)()))atan; return 0; }
/* end */

"gcc -o conftest -I. -I/opt/rubystack-2.0-0/ruby/lib/ruby/1.8/i686-linux -I. -DAI_ADDRCONFIG=0 -I/opt/rubystack-2.0-0/common/include  -D_FILE_OFFSET_BITS=64 -DAI_ADDRCONFIG=0 -I/opt/rubystack-2.0-0/common/include  -g -Os -fno-strict-aliasing -L/opt/rubystack-2.0-0/common/lib   -fno-builtin conftest.c  -L. -L/opt/rubystack-2.0-0/ruby/lib -Wl,-R/opt/rubystack-2.0-0/ruby/lib -L/opt/rubystack-2.0-0/ruby/lib -Wl,-R/opt/rubystack-2.0-0/ruby/lib -L. -L/opt/rubystack-2.0-0/common/lib -ltcmalloc_minimal -rdynamic -Wl,-export-dynamic     -lruby-static -lm  -lpthread -lrt -ldl -lcrypt -lm   -lc"
/usr/bin/ld: cannot find -lruby-static
collect2: ld returned 1 exit status
checked program was:
/* begin */
1: /*top*/
2: int main() { return 0; }
3: int t() { atan(); return 0; }
/* end */ 
```

* * *

我在 virtualbox 4.2.8 中使用[http://sourceforge.net/projects/virtualrails/](http://sourceforge.net/projects/virtualrails/)

使用宝石 1.3.5

它包含两个错误：

*   conftest.c:3: error: 'atan' undeclared (第一次在这个函数中使用)

*   /usr/bin/ld: 找不到 -lruby-static

第一个错误“atan”很容易解决，但第二个错误并不确定是否缺少一个库或者这是一个更大的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T12:35:26.000

```
sudo apt-get install libxslt-dev libxml2-dev

sudo gem install libxml-ruby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:29:05.557

[https://github.com/xml4r/libxml-ruby#requirements](https://github.com/xml4r/libxml-ruby#requirements)：

> libxml-ruby 需要 Ruby 1.8.4 或更高版本。它依赖于以下库才能正常运行：
> - libm（数学例程：非常标准）
> - libz (zlib)
> - libiconv
> - libxml2
> 如果您运行的是 Linux 或 Unix，您将需要一个 C 编译器，以便可以在何时编译扩展它已安装。

在构建 gem 之前确保你拥有所有这些

# javascript - 捕捉复选框更改和索引以切换 LED

> ID：15851894
> 
> 赞同：2
> 
> 时间：2013-04-06T14:06:28.583
> 
> 标签：javascript, jquery, checkbox

我想捕捉复选框更改并捕捉选中或未选中复选框的索引。我想知道这是否可以。

```
$("input[type='checkbox']").change(function () {
  $("input[type='checkbox']").each(function (i) {
    //my code here
    switch (i) {
      case 0:
        break;
      case 1:
        break;
          .
          .
    }
  });
}); 
```

**我的html是这样的：**

```
<table>
<tr>
<td id='led' bgcolor=#cccccc>OFF</td>
<td><input type='checkbox' name='' value='' ></td>
</tr>
<tr>
<td id='led' bgcolor=#cccccc>OFF</td>
<td><input type='checkbox' name='' value='' ></td>
</tr>
<tr>
<td id='led' bgcolor=#cccccc>OFF</td>
<td><input type='checkbox' name='' value='' ></td>
</tr>
<tr>
</table> 
```

所以我想检测选择了哪个框，然后将 LED 更改为 ON 和红色背景颜色。另一方面，如果未选中该框，我想将 LED 返回到 OFF 并将颜色更改为`#cccccc`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:17:26.963

没有更多细节，这是我能提供的最通用的代码（有更多信息很好，嗯，答案）：

```
$('input:checkbox').change(function(){
    // caching the $(this) jQuery object, since we're using it more than once:
    var that = $(this),
         // index of element with regard to its sibling elements:
        index = that.index(),
        // index with regard to other checkbox elements:
        checkboxIndex = that.index('input:checkbox');

        if (this.checked){ // this.checked evaluates to a Boolean (true/false)
            // this block executed only if the checkbox *is* checked
        } else {
            // this block executed only if the checkbox is *not* checked
        }
}); 
```

**编辑**以解决（编辑/澄清）问题中的要求：

```
$('input:checkbox').change(function () {
    var that = this,
        $that = $(that),
        led = $that.closest('tr').find('td:first-child');
    led.removeClass('on off').addClass(function(){
        return that.checked ? 'on' : 'off';
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xZeTh/1/)。

将上面的 jQuery 与下面的 CSS 结合起来：

```
.led,
.led.off {
    background-color: #ccc;
}

.led.on {
    color: #000;
    background-color: #f00;
} 
```

和 HTML：

```
<table>
    <tr>
        <td class='led'>OFF</td>
        <td>
            <input type='checkbox' name='' value='' />
        </td>
    </tr>
    <tr>
        <td class='led'>OFF</td>
        <td>
            <input type='checkbox' name='' value='' />
        </td>
    </tr>
    <tr>
        <td class='led'>OFF</td>
        <td>
            <input type='checkbox' name='' value='' />
        </td>
    </tr>
</table> 
```

请注意，我已经替换了`id="led"`wtih `class="led"`，因为 an`id` ***在文档中必须是唯一的。***当涉及到 JavaScript 和 HTML 有效性时，这一点很重要。

参考：

*   [`:checkbox`选择器](http://api.jquery.com/checkbox-selector/)。
*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`index()`](http://api.jquery.com/index/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:09:47.373

如果选中或未在每个功能代码中使用此复选框，您可以执行以下操作：

```
if ( $(this).is(':checked') ) {
  // ...
} else {
  // ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T14:21:51.340

```
$('input:checkbox').change(function() {
   if (this.checked) {
      // your code here
      alert(this.value);
   }
}); 
```

# php - 具有关系表的数据库中的重复行

> ID：15851895
> 
> 赞同：0
> 
> 时间：2013-04-06T14:06:42.717
> 
> 标签：php, mysql

我正在尝试复制数据库中的页面和所有相关行。

我遇到的问题是因为这`page_group_id`是两个表的标识符。有没有办法在不循环每个新的“page_groups”记录的情况下做到这一点？

*   **页面**（page_id、page_name 等）
*   **page_groups** （page_group_id、page_id 等）
*   **page_group_items** （page_group_id、item_id 等）

**更新**：

```
--
-- Table structure for table `pages`
--

CREATE TABLE IF NOT EXISTS `pages` (
  `page_id` int(11) NOT NULL AUTO_INCREMENT,
  `page_name` varchar(255) NOT NULL,
  PRIMARY KEY (`page_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `pages`
--

INSERT INTO `pages` (`page_id`, `page_name`) VALUES
(1, 'My Page'),
(2, 'My other page');

-- --------------------------------------------------------

--
-- Table structure for table `page_groups`
--

CREATE TABLE IF NOT EXISTS `page_groups` (
  `page_group_id` int(11) NOT NULL AUTO_INCREMENT,
  `page_group_name` varchar(255) NOT NULL,
  `page_id` int(11) NOT NULL,
  PRIMARY KEY (`page_group_id`),
  KEY `page_id` (`page_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `page_groups`
--

INSERT INTO `page_groups` (`page_group_id`, `page_group_name`, `page_id`) VALUES
(1, 'My Group', 1),
(2, 'My Group', 2);

-- --------------------------------------------------------

--
-- Table structure for table `page_group_items`
--

CREATE TABLE IF NOT EXISTS `page_group_items` (
  `page_group_id` int(11) NOT NULL,
  `item_id` int(11) NOT NULL,
  KEY `item_id` (`item_id`),
  KEY `page_group_id` (`page_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `page_group_items`
--

INSERT INTO `page_group_items` (`page_group_id`, `item_id`) VALUES
(1, 1),
(1, 2),
(1, 3),
(2, 1),
(2, 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:43:47.320

由于您在复制时替换了每个表中唯一的唯一标识符（主键），因此如果不向表中添加临时锚列，我看不到这样做的方法，请进行复制并再次删除它们。像这样的东西；

```
ALTER TABLE pages ADD originalpageid INT;
UPDATE pages set originalpageid=page_id;
ALTER TABLE page_groups ADD originalpagegroupid INT;
UPDATE page_groups SET originalpagegroupid=page_group_id;

INSERT INTO pages (page_name,originalpageid)  
  SELECT page_name,originalpageid FROM pages;

INSERT INTO page_groups (page_group_name,page_id,originalpagegroupid) 
  SELECT page_group_name,MAX(pages.page_id),originalpagegroupid
  FROM page_groups
  JOIN pages 
    ON page_groups.page_id=originalpageid
  GROUP BY originalpageid,page_group_name,originalpagegroupid;

INSERT INTO page_group_items(page_group_id,item_id)
  SELECT MAX(page_groups.page_group_id),item_id
  FROM page_group_items
  JOIN page_groups
    ON page_group_items.page_group_id=originalpagegroupid
  GROUP BY originalpagegroupid,item_id;

ALTER TABLE pages DROP COLUMN originalpageid;
ALTER TABLE page_groups DROP COLUMN originalpagegroupid; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/f920c/1)

如果用例一直在系统中执行此操作，则它可能不是您正在寻找的解决方案，但对于手动干预，它应该可以正常工作。

与往常一样，在从 Internet 上随机陌生人处运行 SQL 之前，请务必备份您的数据库 :)

# php - 通过两个模型关系检索数据

> ID：15851898
> 
> 赞同：0
> 
> 时间：2013-04-06T14:06:56.243
> 
> 标签：php, cakephp, model, has-and-belongs-to-many

我试图通过与 CakePHP 的两个模型关系来检索一些数据。模型及其关联如下：

```
User hasOne Profile HABTM Skill 
```

我希望`find()`在对 User 模型进行操作时返回用户的技能，现在它没有返回。这是我对`User`模型执行的 find 调用：

```
$this->paginate = array(
    'conditions' => array(
        'OR' => array(
            'Profile.firstname LIKE' => "%$q%",
            'Profile.lastname LIKE' => "%$q%"
        )
    )
); 
```

它返回用户数据和个人资料数据，但不返回任何技能数据。我尝试设置`recursive`为`2`or `3`，但这也无济于事。我可以获得技能数据的唯一方法是，如果我`find()`对`Profile`模型运行，但我不能那样做。为了澄清，这里是相关模型及其关系：

```
// app/Model/User.php
class User extends AppModel {
    public $hasOne = 'Profile';
}

// app/Model/Profile.php
class Profile extends AppModel {
    public $belongsTo = 'User';
    public $hasAndBelongsToMany = 'Skill';

// app/Model/Skill.php
class Skill extends AppModel {
    public $hasAndBelongsToMany = 'Profile'; 
```

在检索用户数据时，任何人都可以帮助我获得用户技能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:55:03.427

使用[CakePHP 的 Containable Behavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)。然后您的查找将如下所示：

```
$this->User->find('all',array(
    'conditions' => array(
        'OR' => array(
            'Profile.firstname LIKE' => "%$q%",
            'Profile.lastname LIKE' => "%$q%"
        )
    ),
    'contain' => array(
        'Profile' => array(
            'Skill'
        )
    )
)); 
```

更简单，更容易阅读，瞧——你得到你想要的数据，而不需要使用可怕的“递归”。

# java - 如何禁用另一个活动中的按钮？

> ID：15851899
> 
> 赞同：0
> 
> 时间：2013-04-06T14:06:58.050
> 
> 标签：java, android

我有一个游戏活动，当它结束时它会进入主菜单，现在我需要禁用启动刚刚结束的游戏的按钮。让我们称我的游戏类为 classGame 和我的菜单 classMenu。我试过：

在我的课堂游戏中：

```
classMenu obj = new classMenu(); 
```

然后在合适的时候在同一个班级我打电话：

```
obj.myButtonToBeDisabled.setEnabled(false); 
```

但是，一旦我的菜单活动开始，我就在创建我的 obj 的地方收到 stactOverflow 错误。这该怎么做？

编辑：我也在我的gameClass中尝试过这个：

```
public void disableButton(){
        button.setEnabled(false);
    } 
```

然后调用它：

```
obj.disableButton 
```

但是同样的错误。

日志猫：

```
04-06 16:30:48.709: I/dalvikvm(25015): threadid=1: stack overflow on call to Ljava/lang/VMThread;.currentThread:L
04-06 16:30:48.709: I/dalvikvm(25015):   method requires 0+20+0=20 bytes, fp is 0x4214d300 (0 left)
04-06 16:30:48.709: I/dalvikvm(25015):   expanding stack end (0x4214d300 to 0x4214d000)
04-06 16:30:48.769: I/dalvikvm(25015): Shrank stack (to 0x4214d300, curFrame is 0x4214fcb0)
04-06 16:30:48.899: D/AndroidRuntime(25015): Shutting down VM
04-06 16:30:48.899: W/dalvikvm(25015): threadid=1: thread exiting with uncaught exception (group=0x40018560)
04-06 16:30:49.369: D/dalvikvm(25015): GC_CONCURRENT freed 325K, 50% free 2850K/5639K, external 0K/0K, paused 5ms+24ms
04-06 16:30:49.459: E/AndroidRuntime(25015): FATAL EXCEPTION: main
04-06 16:30:49.459: E/AndroidRuntime(25015): java.lang.StackOverflowError
04-06 16:30:49.459: E/AndroidRuntime(25015):    at java.lang.Thread.currentThread(Thread.)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at java.lang.ThreadLocal.get(ThreadLocal.java:59)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at android.os.Looper.myLooper(Looper.)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at android.os.Handler.<init>(Handler.)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at android.app.Activity.<init>(Activity.)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:17)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Izbor.<init>(Izbor.java:19)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.androidaplikacije.toplo_hladno.Asocijacije.<init>(Asocijacije.java:32)
04-06 16:30:49.459: E/AndroidRuntime(25015):    at rs.android
04-06 16:30:49.659: D/dalvikvm(25015): GC_CONCURRENT freed 522K, 51% free 2899K/5895K, external 0K/0K, paused 7ms+5ms 
```

Asocijacije 是我的游戏类，而 Izbor 在我的 menuClass 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:34:33.903

你不需要在你的游戏中调用任何东西。如果您的菜单是首先启动游戏的菜单，那么它会在游戏`Activity`结束时收到通知。

像这样开始你的游戏`startActivityForResult`：

```
Intent intent = new Intent ();
intent.setClassName ("com.your.package.name", "com.your.package.name.YourGameActivity");
startActivityForResult (intent, 0); 
```

然后，在你的游戏类中，当你的游戏结束时，在你的游戏`setResult (int result)`之前调用你`finish`的游戏，`Activity`如下所示：

```
setResult (123);   // or something like Menu.GAME1_FINISHED
finish (); 
```

回到你的菜单活动，你必须像这样实现`onActivityResult`回调：

```
public void onActivityResult (int requestCode, int resultCode, Intent intent) {
    super.onActivityResult (requestCode, resultCode, intent);

    switch (resultCode)
    case 123:
        // hide button 1
    case 234:
        // hide button 2
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:11:01.693

你可以试试`.setClickable(false)`，看看我问的关于它们之间区别的问题：

[setEnabled() 与 setClickable() 有什么区别？](https://stackoverflow.com/questions/15615823/setenabled-vs-setclickable-what-is-the-difference)

如果没有错误日志，我们无法为您提供更多帮助，请发布它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:12:59.463

我相信您在调用代码以禁用按钮的方法方面遇到问题，告诉菜单类禁用按钮的安全方法可以通过 LocalBroadcastManager 进行，如此处[所述](http://www.intertech.com/Blog/Post/Using-LocalBroadcastManager-in-Service-to-Activity-Communications.aspx)。

基本上，您可以将您的菜单对象注册为在游戏结束时发送的特定广播消息的侦听器，该消息将执行禁用所需按钮的方法。

# wpf - WPF 画布中数千个矩形（带有笔划！！！）的速度

> ID：15851901
> 
> 赞同：1
> 
> 时间：2013-04-06T14:07:30.490
> 
> 标签：wpf, performance, canvas, treemap, stroke

这是我的第一个问题，

但我没有找到我的问题的真正答案。

我从事可视化程序并使用 C# 和 WPF。

我需要画一个树状图。我实际上创建了 Rectangle 对象，然后将它们添加到 Canvas 中，效果非常好并且非常有用，因为我还向这些矩形添加了事件处理程序（鼠标单击）。

不过我的性能有问题。当我添加矩形并设置 Stroke 属性 (SolidColorBrush) 时，整个过程非常缓慢。如果没有这些笔画设置，速度还可以。

我已经通过将 Rectangle 对象添加到新创建的 Canvas 对象，然后将这个新的 Canvas 对象添加到原始 Canvas 对象来稍微提高了性能（因此并非所有矩形都是原始 Canvas 的直接子级，这应该有助于加快速度）。

所以我的问题是如何在不破坏速度的情况下向所有这些矩形添加 Stroke。

您可以在链接中找到“无描边”和“描边”树形图版本的比较。

[没有描边的树形图](http://i.stack.imgur.com/Q2Jaz.jpg)

[带有笔划的树状图](http://i.stack.imgur.com/Xyksl.jpg)

非常感谢您的帮助！

***编辑：***

好的，我找到了解决方案！

很抱歉先写在这里，但我已经搜索了几个小时来找到解决方案，但现在我发现问题出在我使用的 SolidColorBrush 上！

我有这样的事情：

```
public static SolidColorBrush TreeMapBorderBrush; 
```

我使用这个 Brush 来设置应该添加到 Canvas 的每个 Rectangle 的 Stroke 属性。但这正是问题所在。

之前的代码是这样的：

```
rect.Stroke = Visualization_Helper.TreeMapBorderBrush; 
```

我现在将其更改为：

```
rect.Stroke = Visualization_Helper.TreeMapBorderBrush.Clone(); 
```

所以我现在只在每个 Rectangle 上使用该 Brush 的副本，这样可以加快处理速度，就像没有 Stroke 一样（就像我的问题一样）！

仅供您参考！诡异的！

# assembly - 简单操作系统中的程序加载器如何工作？

> ID：15851907
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:07:59.887
> 
> 标签：assembly, theory, bytecode, opcode

简单操作系统（如 DOS）的程序加载器，从软盘或硬盘读取程序代码，并将其字节代码移动到 RAM。

**问题 1**：字节码具体移动到哪里？到堆、堆栈或 RAM 的其他区域？

让我们看看这个 asm 代码：`mov eax, 5`​​. “5”是一个值，它也被移动到 RAM 中。

**问题2**：如何将值移入`eax`？是否存在 mov 操作码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:37:50.203

> 问题一：字节码到底移到哪里去了？到堆、堆栈或 RAM 的其他区域？

确切的位置通常取决于：

*   操作系统
*   安装的内存量
*   该程序
*   内存分配的历史

程序很少在其他程序内部运行或彼此共享堆栈和堆，并且它们通常有自己的。

DOS 只是简单地找到一块空闲的内存块，程序可以在其中放置并加载它，可能会将块一分为二。AFAIR，有一种方法可以选择更低或更高的地址，但仅此而已。居民项目和司机显然会影响位置。

> 问题2：如何将值移动到eax中？是否存在 mov 操作码？

这一定是一个单独的问题。是的，有`mov eax, 5`关于 i80386+ CPU 的指令。

# c# - 编译后 Intellisense 停止工作（并且引用中断）

> ID：15851909
> 
> 赞同：1
> 
> 时间：2013-04-06T14:08:24.223
> 
> 标签：c#, class

我的解决方案中有一个带有几个 c# 类的 Web 应用程序。我已将 win 应用程序添加到同一解决方案中，并且确实在 Win 应用程序应用程序中添加了对 Web 应用程序的引用。

当我在 Win 应用程序中编码时，Intellisense 会为我提供 Web 应用程序类和属性和参数。如果参数类型不正确，它甚至会抱怨。没问题。

但是，一旦我构建了我的 Win 应用程序，我就会收到一个编译错误，即“名称 'MyWebClass' 在当前上下文中不存在”。如果它不存在，为什么 Intellisense 足够聪明来捡起它。也许这就是它被称为 INTELLIsense 的原因。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:26:43.433

当一个程序集以某个框架版本（例如 .NET 4.0）为目标，而另一个程序集以不同版本（例如 .NET 4.5）为目标时，这是常见的行为。检查您的项目的属性，看看它们是否不同。如果它们是，使它们相同。

![在此处输入图像描述](https://i.stack.imgur.com/YfPXl.png)

# entity-framework-4 - 避免在代码中写连接字符串

> ID：15851912
> 
> 赞同：0
> 
> 时间：2013-04-06T14:08:45.573
> 
> 标签：entity-framework-4

我已经完成了我的第一个 c# 应用程序，它管理 sql server 2005 上的一些表，但我想修改它，以便它可以从文本文件中读取连接字符串。通过这样做，我可以通过仅更改文本文件中的连接字符串并将我的应用程序移动到另一台 PC 并避免代码本身的任何更改。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:13:11.843

您可以从文件中的**专用** *配置部分*`App.config`管理连接字符串。[在这里](http://msdn.microsoft.com/en-us/library/ms254494%28v=vs.80%29.aspx)查看更多信息。

与其在非标准解决方案上使用纯文本文件，不如看看 .NET**已经提供了**什么。您可以在移动应用程序时更改配置文件中的值，**而无需重新编译它**，因为配置是在运行时读取的。

这是一个例子：

```
<configuration>
    <connectionStrings>
        <add name="MyConnectionString" 
             connectionString="Data Source=.;Initial Catalog=MyDatabaseName;IntegratedSecurity=True" 
             providerName="System.Data.SqlClient" />
    </connectionStrings>
</configuration> 
```

使用 . 从代码中访问它`ConfigurationManager.ConnectionStrings["MyConnectionString"]`。

* * *

如果您确实必须使用文本文件，那么您应该采取稍微不同的方法。

*   首先，您必须在文件系统上为连接字符串文件使用固定路径。您可以在您的应用程序中对其进行*硬编码*- 一个**BAD PRACTICE**，或者使用 Settings 或 App.config 文件来定义文本文件路径。
*   您必须以编程方式读取文件。如果是纯文本，可以使用`System.IO.File.ReadAllText(filePath);`where`filePath`参数是文件的绝对路径。为了在编译应用程序时需要更改路径，您可以使用配置/设置方法来定义文件的物理路径，因为更改它们不需要重新编译（如前文所述的连接字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:13:15.820

您应该使用`connectionStrings`app/web.config 文件中的部分：

```
 <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-EditorTemplateCollectiosns-20130404170435;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-EditorTemplateCollectiosns-20130404170435.mdf" />
  </connectionStrings> 
```

然后，当您想在代码中访问它时，请执行以下操作：

```
var connectionString = ConfigurationManager.ConnectionStrings["DefaultConnection"]; 
```

有关 ConfigurationManager 的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/vstudio/system.configuration.aspx)[的](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:48:28.550

如果您正在开发桌面应用程序，则首选位置是 app.config

```
<connectionStrings>
    <add name="TailorShop.Properties.Settings.TailorShopConnectionString" connectionString="Data Source=.\sqlexpress;Initial Catalog=TailorShop;Integrated Security=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

注意这里的连接名称，因为它是在属性中定义的（双击项目解决方案资源管理器中的属性节点并转到设置）然后您可以在那里添加连接字符串。之后你会看到如上图所示；
现在，为了访问它，您可以在代码中执行此操作；

```
Settings.Default.TailorShopConnectionString 
```

为了使用此代码，您必须添加一个引用，例如 yourprojectname.properties；

```
using TailorShop.Properties; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T14:12:16.273

看看 System.Configuration ( [http://msdn.microsoft.com/en-us/library/system.configuration.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.aspx) )。有一些读取配置文件的内置方法（App.Config）

# android - 如何向我的菜单组添加标题

> ID：15851920
> 
> 赞同：35
> 
> 时间：2013-04-06T14:09:28.357
> 
> 标签：android

我想通过给它们一个标题或分隔符来区分这些组，但我找不到组元素的标题选项。

有没有办法添加标题或分隔符？

```
<group android:id="@+id/menu_group_sort" >
        <item
            android:id="@+id/menu_sort_relevance"
            android:showAsAction="never"
            android:title="@string/sort_relevance"/>
        <item
            android:id="@+id/menu_sort_rating"
            android:showAsAction="never"
            android:title="@string/sort_rating"/>

    </group> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-06T15:17:50.487

我将此代码用于我的项目，看看：

```
<item
    android:title="Search Option"
    android:id="@+id/menu_search_option"
    android:showAsAction="ifRoom|withText">
    <menu>
        <group>
            <item
                android:id="@+id/menuSearchFilmEpisode"
                android:title="Episode"/>
            <item
                android:id="@+id/menuSearchActor"
                android:title="Actor"/>
            <item
                android:id="@+id/menuSearchDirector"
                android:title="Director"/>
        </group>
    </menu>
</item> 
```

结果是我的操作栏上有一个带有文本图标的组。希望能帮助到你。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-12-01T14:29:04.413

也许为时已晚两年，但认为它可能对偶然发现这个问题的人有用......

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<group
    android:id="@+id/group_one">
    <item android:title="Group Title">
        <menu>
            <item
                android:id="@+id/group_item_one"
                android:title="Item one"/>
            <item
                android:id="@+id/group_item_two"
                android:title="Item two"/>
            <item
                android:id="@+id/group_item_three"
                android:title="Item three"/>
        </menu>
    </item>
</group>
<group
    android:id="@+id/group_two">
    <item
        android:id="@+id/group_two_item_one"
        android:title="Item one"/>
</group> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-09T01:52:09.840

尽管这可能不是最好的方法，但我相信它可能会对您有所帮助。您如何在组内添加额外的禁用项目作为“标题”，您也可以为这些项目创建样式，以便它们可以显示您想要的颜色。

```
 <?xml version="1.0" encoding="utf-8"?>
    <menu
        xmlns:android="http://schemas.android.com/apk/res/android">
        <group>
            <item
                android:title="menu1"
                android:enabled="false"
                android:checkable="false">
            </item>
            <item
                android:title="opt1">
            </item>
            <item
                android:title="opt2">
            </item>
            <item
                android:title="opt3">
            </item>
        </group>
        <group>
            <item
                android:title="menu2"
                android:enabled="false"
                android:checkable="false">
            </item>

            <item
                android:title="opt4">
            </item>
            <item
                android:title="opt5">
            </item>
        </group>
    </menu> 
```

你也可以尝试类似的东西，使用java。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {

        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        menu.addSubMenu(Menu.NONE, 1, 1, "SubMenu");
        menu.add(1, 2, 2, "Item");
        menu.add(1, 3, 3, "Item");

        menu.addSubMenu(Menu.NONE, Menu.NONE, 4, "SubMenu");
        menu.add(4, 5, 5, "Item");
        menu.add(4, 6, 6, "Item");
        menu.add(4, 7, 7, "Item");

        return true;
    } 
```

参数

*   **groupId** 此项目应属于的组标识符。这也可用于定义批次状态更改的项目组。如果一个项目不应该在一个组中，通常使用 NONE。
*   **itemId** 唯一的项目 ID。如果您不需要唯一 ID，请使用 NONE。
*   **order** 项目的顺序。如果您不关心订单，请使用 NONE。请参阅 getOrder()。
*   **标题** 要为项目显示的文本。

然而，我相信两者应该有相同的结果。

我希望它对你有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-31T10:27:15.603

只需给每个组一个唯一的 id。它将自动创建一个分隔符。

```
 <?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android">
<group
    android:id="@+id/group_items"
    android:checkableBehavior="single">
    <item
        android:id="@+id/nav_profile"
        android:icon="@drawable/ic_profile"
        android:title="@string/title_profile" />

    <item
        android:id="@+id/nav_notifications"
        android:icon="@drawable/ic_notifcation"
        android:title="@string/title_notifications" />

</group>

<group
    android:id="@+id/group_settings"
    android:checkableBehavior="single">
    <item
        android:id="@+id/nav_privacy_policy"
        android:title="@string/privacy_policy" />
    <item
        android:id="@+id/nav_about_us"
        android:title="@string/nav_about_us" />
</group> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-10T10:32:28.710

众所周知，item-node可以有title，item-node可以是menu-node的child，menu-node可以是item-node的child，group-node可以是a菜单节点的子节点。

所以我们需要做的就是将组保持在 rootMenu-itemWithTitle-menu 的层次结构中。

像这样，被用作 NavigationView 菜单：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  tools:context=".activity.MainActivity">`

    <item android:title="@string/drawer_group_book">
        <menu>
            <group android:id="@+id/nav_group_book"
                android:checkableBehavior="single">
                <item
                    android:id="@+id/nav_book_in_stock"
                    android:icon="@drawable/vector_in_stock"
                    android:title="@string/drawer_menu_in_stock"/>
                <item
                    android:id="@+id/nav_book_wish_list"
                    android:icon="@drawable/vector_wish"
                    android:title="@string/drawer_menu_wish_list"/>
                <item
                    android:id="@+id/nav_book_lent_out"
                    android:icon="@drawable/vector_out"
                    android:title="@string/drawer_menu_lent_out"/>
                <item
                    android:id="@+id/nav_book_borrowed"
                    android:icon="@drawable/vector_in"
                    android:title="@string/drawer_menu_borrowed"/>
            </group>
        </menu>
    </item>

    <item android:title="Communicate">
        <menu>
            <item
                android:id="@+id/nav_share"
                android:icon="@drawable/ic_menu_share"
                android:title="Share"/>
            <item
                android:id="@+id/nav_send"
                android:icon="@drawable/ic_menu_send"
                android:title="Send"/>
        </menu>
    </item>

</menu> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-03T17:23:18.940

> 这可能有点晚了，但它可能对谁有帮助，下面的菜单代码将标题添加到菜单组，并在其下方有 2 个可供选择的可检查选项。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:android="http://schemas.android.com/apk/res/android">    
<group
    android:id="@+id/gp_hour_view"
    android:checkableBehavior="single">
    <item
        android:checkable="false"
        android:title="Display">
        <menu>
            <group
                android:id="@+id/gp_hour_sel"
                android:checkableBehavior="single">
                <item
                    android:id="@+id/action_pinched_view"
                    android:checked="true"
                    android:orderInCategory="201"
                    android:title="Pinched"
                    app:showAsAction="never" />
                <item
                    android:id="@+id/action_zoomed_view"
                    android:orderInCategory="201"
                    android:title="Zoomed"
                    app:showAsAction="never" />
            </group>
        </menu>
    </item>
  </group>
</menu> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-25T08:50:03.040

这是我的想法：

```
<menu> 
    <group> 
        <item android:title="grouptitle"/> 
        <item android:title="item1" android:id="@id+/item1"/>
    </group>
</menu> 
```

# java - DB2 错误 SQLCODE=-103，SQLSTATE=42604

> ID：15851921
> 
> 赞同：0
> 
> 时间：2013-04-06T14:09:42.830
> 
> 标签：java, sql, jdbc, db2

我正在尝试更新一个表，但它不工作并给出了这个 sql 错误。

```
//Updating Buy Table
Integer stkbid = Integer.parseInt(request.getParameter("stockBid"));
System.out.println("stock buy id : " + stkbid);
//get buy details
PreparedStatement stmtbuy = conn.prepareStatement(
        "SELECT \"StockSymbol\", \"Unit\", \"Price\", \"ClearingFee\", \"StampDuty\", \"BrokerFee\""  + 
        "FROM SPM.\"StockBuy\" WHERE \"StockBuyId\" = '"+ stkbid + "'");

System.out.println("Got stock buy details");

ResultSet rs=stmtbuy.executeQuery();
rs.next();
//String stkcode = rs.getString("StockSymbol");
Integer stkunit =  Integer.parseInt(rs.getString("Unit"));
stkunit -= stock.getStockUnit();
Double stkprice = Double.parseDouble(rs.getString("Price"));
Double stkclear = Double.parseDouble(rs.getString("ClearingFee"));
Double stksd = Double.parseDouble(rs.getString("StampDuty"));
Double stkbfee = Double.parseDouble(rs.getString("BrokerFee"));
Double stkval = stkunit * stkprice;
Double stknv = stkval + stkval * (stkclear + stksd + stkbfee);

System.out.println(stknv);

PreparedStatement stmtbuy1 = conn.prepareStatement(
        "UPDATE SPM.\"StockBuy\" SET \"Unit\" = " + stkunit + ", \"Value\" = " + stkval + ", \"NetValue\" = " + stknv + 
        "WHERE \"StockBuyId\" = "+ stkbid); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:18:28.407

您在`WHERE`子句之前缺少一个空格，这弄乱了您的`stknv`.

```
" WHERE \"StockBuyId\" = "+ stkbid); 
```

我认为任何海报都有义务提醒您应该使用参数化查询。所以我也会这样做。

"**请使用参数化查询！** "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:53:04.050

有效的查询最后有一个引号：

```
" WHERE \"StockBuyId\" = '"+ stkbid + "'"); 
```

失败的不

```
 "WHERE \"StockBuyId\" = "+ stkbid); 
```

这可能与它有关。

# meteor - 更新后无法安装、更新或运行 Meteor

> ID：15851923
> 
> 赞同：8
> 
> 时间：2013-04-06T14:09:46.360
> 
> 标签：meteor

我已经使用 Meteor 应用程序工作了几个月。第一次，每当我尝试运行流星应用程序，通过 (curl [https://install.meteor.com](https://install.meteor.com) | /bin/sh) 安装或运行流星更新时，我都会收到此错误：

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'fibers'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/usr/local/meteor/app/meteor/meteor.js:1:75)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

过去我会遇到随机的 js 错误，重新安装会修复，但现在我什至无法运行安装程序或更新。也许和0.6有关。感谢您的任何见解！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-16T21:04:08.630

这个解决方案对我有用：

1.  ~~[通过http://nodejs.org/](http://nodejs.org/)~~~~上的图形安装程序安装最新的节点~~编辑：应该不是必需的。
2.  ~~`sudo npm install fibers@1.0.1 -g`通过@Akshat编辑安装 Fibers~~：应该没有必要。
3.  删除文件`/usr/local/bin/meteor`
4.  删除文件夹`~/.meteor`
5.  `curl https://install.meteor.com/ | sh`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-23T21:33:31.063

我（再次）发生了这种情况并进行了更多研究。我最终做了这两个步骤来解决它：

移除流星：

```
rm -rf /usr/local/meteor /usr/local/bin/meteor 
```

安装流星：

```
curl https://install.meteor.com | /bin/sh 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T16:17:49.113

我最终去了我的工作计算机，获取 usr/local/bin 文件并将其复制/粘贴到非工作计算机。可能并不理想，但它完成了工作，我又在两台机器上编码。非常感谢 Akshat 在这个问题上的努力！

保罗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T14:15:15.980

尝试重新启动计算机/重新加载终端，因为新流星也安装在新位置（看起来你的仍然在`/usr/local`而不是`~/.meteor`）

如果这不起作用，请使用`npm install fibers@1.0.0 -g`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-20T02:45:18.670

我也遇到过这个问题。事实证明，以 root 身份安装在我的 mac 上的流星存在权限问题。我以登录用户的身份重新安装了流星（文件位于 ~/.meteor 中）。然后一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-30T18:47:03.487

当您在一个环境（即 OS X）上捆绑/构建流星然后尝试在不同的环境（即 Ubuntu）上部署时，流星似乎包含错误的库。

我可能是错的，无论如何我发现卸载和重新安装 bcrypt 库对我有用（至少它让我到了出现其他错误的地步）

找到`npm list bcrypt`存在的目录，然后键入`npm remove bcrypt`，然后`npm install bcrypt`.

在 Meteor V1.2 中，这很容易找到。在 Meteor V1.3 中，我认为它在`.../bundle/programs/server/npm/node_modules/meteor/npm-bcrypt`

# sql - INSERT 触发器没有触发更新？

> ID：15851927
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:10:04.580
> 
> 标签：sql, tsql, triggers

好的，所以我有一个相当基本的触发器：

换句话说，在插入之后，获取 IP 信息并使用新数据更新插入的行

```
CREATE TRIGGER [BasicData.IPInfo.Gather]
ON [BasicData]
AFTER INSERT
AS
BEGIN
    DECLARE @City VARCHAR(1000),
        @Country VARCHAR(1000),
        @IP VARCHAR(1000),
        @ROWID UNIQUEIDENTIFIER

    SELECT @IP=[IP],@ROWID=[ID] FROM [inserted]

    SELECT @Country = [Country], @City= [City]
    FROM [IPInfo] WHERE [IP] = @IP

    IF (@City IS NOT NULL) AND (@Country IS NOT NULL)
        BEGIN -- Never seems to fire
            UPDATE [BasicData]
            SET [IPCountry]=@Country,[IPCity]=@City
            WHERE [ID] = @ROWID
        END
    ELSE
        BEGIN -- Fired correctly
            INSERT INTO [IPInfo.Missing] VALUES (@IP)
        END
END 
```

现在的问题是，它正确添加了丢失的 IP 信息（仅在丢失时），但是，它似乎并没有更新表，我错过了什么？

我已经以我能想到的所有可能方式对其进行了调整......（我的触发知识相当糟糕）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:21:55.197

有几个问题：

1.  INSERTED 可以包含许多行。您的触发器只允许一个。
2.  触发器是在插入之后，我猜这可能会排除更新。尝试`AFTER INSERT, UPDATE`
3.  您的 IF 语句没有检查 UPDATE - 如果列被 UPDATED 为 NULL 怎么办？即使它是更新，它也不会捕获它。如果有东西插入了 NON NULL 数据怎么办？它会认为这是一个更新。

据我所知，识别 UPDATE 的唯一方法是加入 `INSERTED`并在 PK 上删除。如果有匹配，则已更新。

也许你可以这样重写它：

```
CREATE TRIGGER [BasicData.IPInfo.Gather]
ON [BasicData]
AFTER INSERT, UPDATE
AS
BEGIN

-- Save UPDATES to BasicData
UPDATE [BasicData]
SET [IPCountry]=I.Country,[IPCity]=I.City
FROM [BasicData] UT
INNER JOIN
[inserted] I
ON I.ID = UT.ID
INNER JOIN
Deleted D
ON D.ID = I.ID
INNER JOIN
[IPInfo] IP
ON I.ID = IP.ID

-- Save inserts to Missing
INSERT INTO [IPInfo.Missing] (IP)
SELECT IP FROM
INSERTED I
WHERE NOT EXISTS (SELECT 1 FROM DELETED D WHERE D.ID = I.ID)

END 
```

# highcharts - 如何获取悬停散点的路径元素

> ID：15851928
> 
> 赞同：0
> 
> 时间：2013-04-06T14:10:32.113
> 
> 标签：highcharts

当我在散点图中悬停一个散点时，mouseOver 回调会收到一个事件对象，但我无法在该对象中找到当前点或 clientX/clientY。

我怎么才能得到它？

我正在使用版本 v2.3.5 的 highcharts

```
chart = new Highcharts.Chart({
    [...]
    plotOptions: {
        scatter: {
            [...]
            events: {
                click: function(ev) {
                    [...]
                    scatterClick(ev);
                }, 
                mouseOver: function(ev) {
                    [...]
                    scatterHover(ev);
                }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T17:01:46.723

您正在处理错误的事件。如果您想要点信息，请在点`mouseOver`事件上设置回调。

[在这里](http://jsfiddle.net/tQuqq/)拉小提琴。

```
 series: [{
        type: 'scatter',
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
        point: {
                events: {
                    mouseOver: function() {
                        x = this;
                        alert ('x: '+ this.x +', y: '+ this.y);
                    }
                }
            }
    }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:54:16.797

在 series.data 回调上的 mouseOver 事件中，'this' 指的是点，所以你可以使用

```
this.x;
this.y; 
```

例如

```
chart = new Highcharts.Chart({
[...]
series: {
    data: {
        [...]
        events: {
            click: function(ev) {
                alert (this.y);

            }, 
            mouseOver: function(ev) {
                alert(this.x);

            }, 
```

# c# - 对话框不继承主窗口的 Metro 风格（Elysium SDK）

> ID：15851929
> 
> 赞同：2
> 
> 时间：2013-04-06T14:10:35.253
> 
> 标签：c#, visual-studio-2010, microsoft-metro

我在使用 Elysium SDK 进行 Metro 风格设计的 WPF 应用程序中创建了一个对话框。我使用 MessageBox 实用程序类来显示对话框，但与默认情况下为 Metro 风格的主窗口（以及其中的所有其他控件）不同，该对话框作为一个丑陋的默认窗口对话框出现，看起来确实不合适在应用程序中。如何让 Elysium 默认设置我的对话框的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:53:25.383

对话框只是操作系统对话窗口的包装。如果您想控制外观，请创建您自己的窗口并以模态方式显示它。

如果您需要从对话框中返回结果，请按此处所示设置对话框结果。

[从 WPF 窗口获取对话框结果](http://blog.wpfwonderland.com/2010/03/22/getting-a-dialogresult-from-a-wpf-window/)

# .htaccess - 不区分大小写的 htaccess 301

> ID：15851932
> 
> 赞同：9
> 
> 时间：2013-04-06T14:11:04.787
> 
> 标签：.htaccess, http-status-code-301

我有大约 300 个以下格式的重定向

`Redirect 301 /post/My-Blog-Post.aspx https://www.example.com/blog/a-new-post/`

这很好用，除了重定向区分大小写并且`/post/my-blog-post.aspx`不会重定向。

旧 URL 到新 URL 没有模式，因此这可能必须是每个重定向的标志。

**无论如何，如何获取要重定向的 URL？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T16:22:24.460

不要认为有办法使`Redirect`指令（mod_alias 的一部分）不区分大小写，但是您可以使用 mod_rewrite 标志。您需要从此更改所有重定向：

```
 Redirect 301 /post/My-Blog-Post.aspx https://www.example.com/blog/a-new-post/ 
```

至：

```
 RewriteRule ^/?post/My-Blog-Post.aspx$ https://www.example.com/blog/a-new-post/ [L,R=301,NC] 
```

注意`NC`标志，意思是“没有案例”。这将匹配任何看起来像`/post/my-blog-post.aspx`并忽略大小写的 URI，并将其重定向到`https://www.example.com/blog/a-new-post/`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:50:53.703

但是，如果您想让*"My-Blog-Post"成为**"a-new-post"*的变量，我的意思是如果您希望*/post/My-Blog-Post.aspx*被重定向到*/blog/a-new -post/*要么*/post/ **this** .aspx* into */blog/ **this** /*要么*/post/ **that** .aspx* into */blog/ **that** /*甚至*/post/**任何东西**.aspx*到*/blog/ **any** /*，你可以尝试使用这个`.htaccess`隐藏文件中的代码：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^post/([a-z0-9-_]+).aspx$ /blog/$1/ [R=301,NC] 
```

# php - htaccess 查询重写第一次

> ID：15851938
> 
> 赞同：1
> 
> 时间：2013-04-06T14:11:56.700
> 
> 标签：php, .htaccess

我已经尝试了许多来自谷歌和堆栈溢出的查询/答案，但找不到适合我的。

我有一个文件 users.php，当我发送 users.php?user=username 时，我希望它是 users/user/username。我已经在我的 .htaccess 中删除了 php 扩展名。

最好的方法是什么？此外，有关所需的正确文件结构的帮助也会有所帮助。

编辑：这是我到目前为止所拥有的：

```
Options +FollowSymlinks -MultiViews
RewriteEngine on

# to make `/path/index.php` to /path/
RewriteCond %{THE_REQUEST} ^GET\s(.*/)index\.php [NC]
RewriteRule . %1 [NE,R=301,L]

RewriteCond %{THE_REQUEST} ^GET\s.+\.php [NC]
RewriteRule ^(.+)\.php$ /$1 [NE,R=301,L,NC]

RewriteCond %{REQUEST_URI} !\.php$ [NC]
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule . %{REQUEST_URI}.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:18:32.127

试试这个 htaccess 代码

```
RewriteEngine On 
RewriteRule ^users/user/(.*)/$ users.php?user=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:53:00.430

呵呵..我们都有相同的答案！尝试删除*.htaccess*文件中的所有代码，然后单独检查它本身：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^users/user/([a-z0-9-_]+) /users.php?user=$1 [NC] 
```

在规则的最后使用`[NC]`标志以不区分大小写的方式匹配它。这意味着，该规则不关心字母是大写还是小写。

* * *

现在，如果包含您的*/users.php*的文件夹以**/html**命名，试试这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^users/user/([a-z0-9-_]+) /html/users.php?user=$1 [NC] 
```

只需将**“html”**更改为包含您的*users.php*的文件夹的名称。

* * *

好的，让我们检查一下这个规则：

```
RewriteRule ^users/user/([a-z0-9-_]+) /beta/users.php?user=$1 [NC] 
```

但请始终不要忘记`RewriteEngine on`并评论正在发生的事情。您必须检查的 URL 是我们正在尝试重新映射的不存在的 URL。*（例如：domain.com/users/user/name 最后没有斜线。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:21:20.550

```
RewriteEngine On     
RewriteRule    ^users/user/$    users.php?user=$1    [NC,L] 
```

# javascript - 如何在 Vim 中对 Ruby 或 JavaScript 进行内容辅助？

> ID：15851945
> 
> 赞同：0
> 
> 时间：2013-04-06T14:12:40.077
> 
> 标签：javascript, ruby, vim, content-assist

我想知道是否可以在**Vim**中对 Ruby 或 JavaScript 等脚本语言进行内容辅助。

如果有可能，我该怎么做？

我是否必须编译 vim 源代码才能打开 'rubyinterp' 选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T15:39:37.437

您所说的“内容辅助”（Eclipse 背景？）在 Vim 中称为“Omni 完成”。它是一个更大的完成系列的一部分，简称为“插入模式完成”，您可以在`:h ins-completion`.

不过，大多数 IDE 的完成机制有两个很大的不同：

*   Vim 的内置补全机制不能是*自动*的：您需要按特定的快捷键才能出现补全菜单。如果你想要*自动*完成，你需要一个插件：[NeoComplCache](http://www.vim.org/scripts/script.php?script_id=2620)、[SuperTab](http://www.vim.org/scripts/script.php?script_id=1643)、[AutoComplPop](http://www.vim.org/scripts/script.php?script_id=1879)或更年轻的[YouCompleteMe](https://github.com/Valloric/YouCompleteMe)。还有其他的，所以试试[vim.org](http://www.vim.org/scripts/script_search_results.php?order_by=creation_date&direction=descending)。

*   Vim 不像 IDE 那样“理解”你的语言。Vim 是一个面向编程的通用文本编辑器，但它无法解析您的代码并真正理解您的意思或遵循您的范围或依赖关系树。因此，完成可能有点模糊。所以不要对你的期望太高。

你不需要任何特殊的东西来完成 JavaScript，但是，AFAIK，Vim 必须使用 Ruby 支持编译以提供 Ruby 完成。如何获得正确的 Vim 版本取决于您的平台，我们不知道。

在这两种语言中，点击`<C-x><C-o>`（在插入模式下）之后`method_name.`应该会打开一个完成菜单，该菜单或多或少类似于其他编辑器/IDE 中的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:34:14.220

是的，至少在某种程度上。

启用 ruby​​interp 将需要重新编译，除非您可以找到包含它的二进制文件。[您将在此处](https://stackoverflow.com/questions/3794895/installing-vim-with-ruby-support-ruby)找到有关该主题的更多信息。

代码辅助可以通过使用插件和 vim 的称为 (omni-)completion 的本机功能来实现。这项工作有很多插件，但我最喜欢的插件之一是[Neocachecomplete](https://github.com/Shougo/neocomplcache)。或者尝试使用其中一种 vim '发行版'，例如[Steve's Francia 制作的](http://vim.spf13.com/)发行版。

您还可以添加自定义语法文件，以扩展对您选择的语言的支持。您还可以找到检查语法的插件，例如。[句法的](https://github.com/scrooloose/syntastic)。

# delphi - 如何通过 msbuild 将指令传递给 dcc32？

> ID：15851954
> 
> 赞同：0
> 
> 时间：2013-04-06T14:13:15.087
> 
> 标签：delphi

在 Delphi XE3 中，如果我从命令行编译，如何将附加指令传递给调用的 dcc32.exe？

这是我的工作流程：

1.  打开命令提示符
2.  调用 xe3\bin\rsvars.bat
3.  cd 到我的项目文件夹
4.  msbuild.exe /target:Clean,Build /property:Config=Release;Platform=Win32 /verbosity:normal "C:\proj_xyz\xyz.dproj"

除了我需要生成一个详细的地图文件之外，一切都编译得很好。请注意，从 IDE 编译会生成映射文件。

如何在生成的 dcc32 命令中添加 -GD 开关以强制创建映射文件？

谢谢

* * *

# 编辑：

感谢我收到的答案，我进一步调查：问题是我正在使用 Release 配置进行构建。切换到调试配置并在其中启用 IDE 中的详细映射文件生成，产生了预期的效果。我研究了更改后的 .dproj 文件，发现其中添加了一个新属性 DCC_MapFile=3。此时，我在 ide 中再次禁用了映射文件生成，并在 msbuild 命令行中添加了这个属性：

/属性：DCC_MapFile=3

所以这就是我的问题的答案（如何将参数传递给 msbuid 以传递给 dcc32.exe ;-)

# php - 如果两个不同的会话在一个浏览器中处于活动状态会发生什么？

> ID：15851958
> 
> 赞同：1
> 
> 时间：2013-04-06T14:13:22.563
> 
> 标签：php, session-state

如果在一个浏览器中同时打开两个不同的应用程序并且都使用会话会发生什么？其他应用程序是否能够访问其他应用程序的会话变量？如果是这样如何解决这个问题。也许这个问题看起来毫无意义，但它是从这么多天来的狩猎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:16:57.377

会话通常通过将会话 ID 存储在与给定主机名关联的 cookie 中来处理（尽管可以在同一域上的多个主机名之间共享）。Cookie 也可以限制在子目录中。

会话数据存储在服务器上。

如果这两个应用程序在同一台服务器上运行在同一个域名上，那么它们就有可能通过共享会话存储共享数据。

# javascript - 如何在子字符串之后或两个子字符串之间查找子字符串

> ID：15851961
> 
> 赞同：1
> 
> 时间：2013-04-06T14:13:44.610
> 
> 标签：javascript, regex

我有这个字符串：

**带有两个子字符串的字符串：**

```
srt=60389052 - OLGA YANETH PARRA PINILLA8390507 - VICENTE ARROYAVE ARANGO 
```

所以，我知道如何找到第一个子字符串（数字+单词）和第二个：

```
w1 = srt.match (/^\d+\D+)/);  //matches =  60389052 - OLGA YANETH PARRA PINILLA

w2 = srt.match (/\d+\D+$/);   //matches = 8390507 - VICENTE ARROYAVE ARANGO 
```

没关系，但是如果字符串更长，我无法匹配第二个子字符串，例如：

**具有三个子字符串的字符串：**

```
srt=60389052 - OLGA YANETH PARRA PINILLA8390507 - VICENTE ARROYAVE ARANGO777777 GERMAN CASTRO 
```

我想找到这个：

8390507 - 维森特·阿罗亚夫·阿朗戈

字符串有时只有两个子字符串，有时只有三个子字符串，所以无论字符串有 2 个还是 3 个子字符串，我都必须始终找到第二个，我的意思是如果我在较大的字符串中使用 w2 与我的子字符串不匹配想要，因为会找到最后一个子字符串为三个而不是第二个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:21:28.073

进行全局匹配并通过索引获取您需要的子字符串（从 开始`0`）：

```
var matches = str.match(/\d+\D+/g);
console.log(matches[1]);  // "8390507 - VICENTE ARROYAVE ARANGO" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:21:06.523

我知道正则表达式不是最优雅的，但由于 Javascript 不支持后视，这可能还不错：

```
str.match(/^\d+\D+\d+\D+/)[0].replace(/^\d+\D+/,''); 
```

此外，如果您不打算使用 'match()' - 这也比上面更好：

```
str.replace(/\d+\D+(\d+\D+).*/,'$1'); 
```

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:25:41.050

您可以简单地使用[全局标志](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)：

```
console.log(srt.match(/\d+\D+/g)) 
```

# android - 在 Android 中连接到 wifi

> ID：15851962
> 
> 赞同：2
> 
> 时间：2013-04-06T14:13:47.677
> 
> 标签：android, wifi, android-wifi, wifimanager, access-point

我正在开发一个 android 应用程序，该应用程序涉及在范围内连接到特定的 wifi。一旦我完成了一些事情，我就会尝试连接回我原来的 wifi。出于某种奇怪的原因，它按照我的意愿连接到我原来的 wifi，但大约 30 秒后，它断开了连接。当我检查设备上的 wifi 设置时，它显示 wifi 已禁用。

总结一下：
1.连接Wifi W1。
2.当Wifi W2在范围内时，连接到那个（使用SSID），但请记住W1的SSID以备后用。
3\. 断开与 W2 的连接并在 wifi 配置列表中查找 W1（使用 SSID）。找到后，连接到那个。

所有三个步骤都在工作，但由于某种原因，在第 3 步成功后不久（< 1 分钟），与 W1 的连接被设备断开并禁用。这只发生在我通过代码更改 wifi 连接时。这是我的代码的样子：“net”变量包含原始 wifi 连接的 SSID (W1) 的 SSID 值。有谁知道为什么我会在重新连接到原始 Wifi 后不久断开连接？

```
if(net!=""){
    List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
    for( WifiConfiguration i : list ) {
        if(i.SSID != null && i.SSID.contains(net)) {            
             wifiManager.disconnect();                          

             wifiManager.enableNetwork(i.networkId, true);

             wifiManager.setWifiEnabled(true);                  
             break;
        }           
     }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:21:35.663

我有一个建议，我不确定这是否能解决问题，但值得一试

如果您放置在下面的代码中

```
if(net!=""){
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for( WifiConfiguration i : list ) {
    if(i.SSID != null && i.SSID.contains(net)) {            
         wifiManager.disconnect();      

         //place a sleep on thread so that the underlying hardware gets some time to disconnect
        Thread.sleep(10000);
        //Now trying connecting to the previous network. Also try increasing the time to wait if 5 seconds is not working.   

         wifiManager.enableNetwork(i.networkId, true);

         wifiManager.setWifiEnabled(true);                  
         break;
    }           
 }
} 
```

**编辑：**

它似乎与超过 10 秒的间隔一起工作。我认为这个时间间隔取决于设备的 WiFi 芯片组，它需要一些时间来断开与当前网络的连接并连接到其他网络。此外，如果设备具有低质量的芯片组，则可能需要更长的时间另外我认为如果设备具有高质量的芯片组，那么它会快得多..

# php - 从 smarty 模板文件中读取使用的变量

> ID：15851963
> 
> 赞同：0
> 
> 时间：2013-04-06T14:13:49.467
> 
> 标签：php, variables, smarty3

在将变量分配给 smarty 对象之前，有没有办法从 smarty (3) 模板文件中获取所有使用的变量？

例如我有以下模板文件：

```
Hello {$user.firstname},<br />
You are active in the following groups:<br />
{foreach from=$user.groups item=group}
   - {$group.name}<br />
{/foreach}
<br />
The city you live in is: {$city} 
```

现在我问的原因是因为我不想获取所有用户信息，而是想根据 smarty 中使用的变量创建一个查询。

反正有没有做如下的事情：

```
$smarty = new smarty;

$result = $smarty->getVariablesFromTemplate('index.tpl');

print_r($result);

/* outputs:
array(
   'user' => array(
      'firstname' => true,
      'groups' => array(
         'name' => true
      ),
      'city' => true
   )
);
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:17:17.407

我不确定您的情况，但您可以通过以下代码 `SQL`访问分配给 smarty 的模板变量（使用）`$smarty->assign('var', 'value')`

```
$tpl_vars = $smarty->_tpl_vars; 
```

# c# - C# 的 LINEST 函数模拟

> ID：15851964
> 
> 赞同：4
> 
> 时间：2013-04-06T14:14:00.287
> 
> 标签：c#, windows, excel, dll

我需要从 LINEST Excel 函数中获取信息。我想知道是否有具有类似功能的库，或者是否可以以某种方式在 C# 中使用本机 Excel 函数？我在 MVS 2010 中工作并使用 Windows 窗体可能很重要。我写了一个最小二乘估计函数，它只为 2 因子模型计算参数，但我需要为超过 2 个因子的模型计算参数。

PS 实际上我用谷歌搜索答案，我看到有人使用包 Microsoft.Office.Excel 来计算必要的信息，但我的 IDE 中没有这样的导入。我不想发明轮子，所以我非常感谢任何信息。谢谢你。

**更新**：最后我向我的项目添加了 Microsoft.Office.Excel 引用并解决了我的问题。下面附上源代码。结果是类似 Excel 的二维数组。代码写的很匆忙，所以不是很好，需要修改。我只希望它对其他人有所帮助。 */w 我如果你需要帮助*

```
 Microsoft.Office.Interop.Excel.Application xl = new Microsoft.Office.Interop.Excel.Application();
        Microsoft.Office.Interop.Excel.WorksheetFunction wsf = xl.WorksheetFunction;

        List<double> x = new List<double> { 107, 109, 110, 113, 120, 122, 123, 128, 136, 140, 145, 150 };
        List<double> y = new List<double> { 102, 105, 108, 110, 115, 117, 119, 125, 132, 130, 141, 144 };

        object result = wsf.LinEst(y.ToArray(), x.ToArray(), true, true);

        Array resArray = (Array)result;

        double[,] linest = new double[5, 2];
        int i = 0, j = 0;
        Console.WriteLine("{0,15:f10}", resArray.Length);
        foreach (var element in resArray)
        {
            if (i == 0 || i == 2 || i == 4 || i == 6 || i == 8)
            {
                linest[j, 0] = (double)element;                    
            }
            else
            {
                linest[j, 1] = (double)element;
                j++;
            }
            i++;                
        }

        Console.WriteLine();
        for (i = 0; i < linest.GetLength(0); i++)
        {
            for (j = 0; j < linest.GetLength(1); j++)
                Console.Write("{0,25:f13}", linest[i, j]);
            Console.WriteLine();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:22:17.957

试试 Math net numerics 中的线性代数库，完全避免使用 excel。

# javascript - 如何将变量传递到全局范围

> ID：15851965
> 
> 赞同：1
> 
> 时间：2013-04-06T14:14:04.413
> 
> 标签：javascript, google-chrome, google-chrome-extension

问题 - 如何将变量传递给全局范围？：

var global_variable;

```
chrome.storage.local.get('ABC',function(result){
            global_variable = result; //pass result to global var.
});

console.log(global_variable); //outputs undefined, why!!!? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:16:51.013

这只是因为在设置全局变量`console.log()`之前启动。 因为是异步启动的。`'ABC',function(result){`
`chrome.storage.local.get`

要验证它，请测试此代码：

```
var global_variable;
chrome.storage.local.get('ABC',function(result){
        global_variable = result; //pass result to global var.
        test();
});
function test() {
    console.log(global_variable);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:17:37.150

您正在异步函数回调中设置变量。回调在 get 操作完成后运行。

您的代码将按以下顺序执行：

```
chrome.storage.local.get("ABC",callback); 
```

然后

```
console.log(); 
```

然后

```
callback() 
```

您可以通过在回调中放置一个 console.log 语句并查看它在当前语句之后运行来验证这一点。

Javascript 函数在运行任何异步回调调用之前运行完成。

像这样写可能更有意义，这相当于你现在所拥有的。

```
//define the callback
function callbackFunction(result){
      global_variable = result; //pass result to global var.
}

//run the get.  When it is complete the callback will be added to a queue 
//to run next after current operations have completed
chrome.storage.local.get('ABC',callback);

// this will run immediately after the get call
console.log(global_variable); 
```

如果要使用变量，则必须将逻辑放在回调中（或回调调用的单独函数中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-08T04:26:30.677

我假设，不知道“结果”的返回值是什么，您希望将一个值传递给全局范围的一个尚未预定义的变量。以下回调更改将定义一个具有全局范围的新变量，并将“结果”的值分配给它。请记住，该范围与窗口对象中的层次结构有关，而不是与脚本有关。

```
function callbackFunction(result){
    window.global_variable = result;
}
console.log(global_variable); 
```

您还可以动态注入脚本标签，其中 src 属性是您的全局值。

```
function callbackFunction(result){
    var js = document.createElement('script');
    js.src = 'var global_variable = ' + result + ';';
    var first = document.getElementsByTagName('script')[0];
    first.parentNode.insertBefore(js, first);
} 
```

尽管我认为这对于实现相同的结果似乎有点冗长。

# c# - UltraExplorerBar Infragistics 的手动滚动

> ID：15851968
> 
> 赞同：0
> 
> 时间：2013-04-06T14:14:26.663
> 
> 标签：c#, infragistics

我正在开发具有触摸屏的信息亭系统，因此我需要能够手动滚动 Infragistics 的 UltraExplorerBar 控件。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T17:40:01.217

我知道这已经几个月了，但是 infragistics 的 ultraexplorer 栏不直接支持手动滚动。有关更多信息，请参阅以下链接。

[http://www.infragistics.com/community/forums/t/32632.aspx](http://www.infragistics.com/community/forums/t/32632.aspx)

# html - 如何在 Firefox 上将网页加载到 iframe 中？

> ID：15851971
> 
> 赞同：0
> 
> 时间：2013-04-06T14:14:55.367
> 
> 标签：html, http

```
<head>
<style>
    iframe#hiddenframe {
        display: none;
    }
</style>
</head>
<body>
<iframe src="" id="hiddenframe"></iframe>
<img src="portait.jpg">
<a href="/?action=launch_rocket" target="hiddenframe"> Launch! </a>
</body> 
```

所以当我点击链接时，火箭发射了，但我停留在页面上，眼睛盯着肖像。至少这是它在 Chrome 上的工作方式。Firefox 仍然显示我使用“/?action=launch_rocket”加载的空白页面。我不想看到空白页。我想继续看肖像。我们的设施强制使用 Firefox。有没有更聪明的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:18:41.117

您需要设置 iframe 的名称。

...

```
<iframe src="" id="hiddenframe" name="hiddenframe"></iframe> 
```

...

# r - Y ~ X 和 Y ~ X+1 有什么区别？

> ID：15851981
> 
> 赞同：1
> 
> 时间：2013-04-06T14:16:03.807
> 
> 标签：r

R中的Y~X和Y~X+1有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T14:23:42.220

在 的上下文中`lm()`，它们完全相同。两种模型都包括截距。

要删除截距，您可以编写`Y ~ X - 1`or `Y ~ X + 0`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T15:51:57.527

你的问题的背景是什么？

如前所述，in`lm`和其他在内部使用的函数`model.matrix`是相同的。但在其他情况下它们有所不同，请考虑以下代码：

```
plot.new()
text( .5, .1, y ~ x )
text( .5, .3, y ~ x + 1 ) 
```

在这里它们是不同的（并且运行代码显示了差异）。

对于任何其他功能或上下文，它将取决于实现。

这 2 行给出了相同的结果：

```
plot( Petal.Length ~ Species, data=iris )
plot( Petal.Length ~ Species + 1, data=iris ) 
```

但这些不会：

```
library(lattice)
bwplot( Petal.Length ~ Species, data=iris )
bwplot( Petal.Length ~ Species + 1, data=iris ) 
```

我记得有一次（尽管它可能在 S-Plus 而不是 R 中，并且在 R 中可能不可能）看到一个公式，它在公式的开头和后面包含 a`0+`或a 。它构建了没有截距的主效应（第一因子的每个水平的拟合平均值），但在正确的位置改变了交互编码的方式。`-1``+1``+1`

从理论上讲，可能有建模函数（我想不出，但它们可能存在或将来编写）采用公式但默认情况下不包括截距，因此`+1`需要指定截距。

那么，您在什么背景下提出问题？

# windows-8 - WinJS翻转视图控件和项目模板

> ID：15851983
> 
> 赞同：0
> 
> 时间：2013-04-06T14:16:09.463
> 
> 标签：windows-8, winjs, itemtemplate, flipview

尝试在 WinJS 中使用 FlipView 控件并遇到一些问题。我能够将它绑定到数据源并在翻转视图控件内容窗格中显示 URL/图片属性，但它无法加载图片 - 任何建议:(

我已经确保图像标签的 src 属性指向 URL/picture 属性。我可以通过普通的 img 标签加载图像。

下面列出的是模板定义和数据源 - 一如既往，感谢任何指针:)

数据源：

```
var dataArray = [
 { type: "item", title: "Hole 1", picture: "/images/IMG_0550.jpg" },
 { type: "item", title: "Hole 2", picture: "/images/IMG_0564.jpg" },
 { type: "item", title: "Hole 3", picture: "/images/IMG_0572.jpg" },
 { type: "item", title: "Hole 4", picture: "/images/IMG_0594.jpg" },
 { type: "item", title: "Hole 5", picture: "/images/IMG_0605.jpg" }
 ];

var dataList = new WinJS.Binding.List(dataArray);
// Create a namespace to make the data publicly
// accessible. 
WinJS.Namespace.define("ImageData", {
    bindingList: dataList,
    array: dataArray
}); 
```

翻转视图绑定：

画廊内容在这里。

```
 <div id="simple_ItemTemplate" data-win-control="WinJS.Binding.Template">
        <div>
            <img src="#" data-win-bind="src: picture; alt: title" />
            <div>
                <h2 data-win-bind="innerText: title"></h2>
            </div>
        </div>
     </div>    

    <div id="basicFlipView" 
         data-win-control="WinJS.UI.FlipView"
         data-win-options="{ itemDataSource : ImageData.bindingList.dataSource, itemTemplate : simple_ItemTemplate }">
    </div>
  </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:22:29.397

使用`itemTemplate : select('#simple_ItemTemplate')`而不是`itemTemplate：simple_ItemTemplate'

最好在代码中设置模板和数据源，以避免拼写错误，代码也可以调试。

```
basicFlipView.winControl.itemTemplate = simple_ItemTemplate;
basicFlipView.winControl.itemDataSource = dataList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T07:17:59.907

我不同意 ankur 的评论，从我的 POV 来看，数据绑定和 MVVM 是要走的路。关于您的问题，运行项目并使用 DOM 资源管理器查看生成的内容，还使用类而不是 id 作为模板标识符（因为它会生成多次）

# iphone - NSMutableDictionary 的排序

> ID：15851990
> 
> 赞同：2
> 
> 时间：2013-04-06T14:16:50.963
> 
> 标签：iphone, ios, sorting, nsmutablearray, nsmutabledictionary

令人困惑！

我有一个`NSMutableDictionary`叫`tempDict`，具有相关*值的**键* **Freight、Fuel、Discount**（以及更多）。

 *我正在使用此代码生成两个不同的`NSMutableArrays`调用`arrTVBuyCharge`和：`arrTVBuyCost``tempDict`

```
[arrTVBuyCharge addObjectsFromArray:[(NSArray *)[tempDict allKeys]]];
[arrTVBuyCost addObjectsFromArray:[(NSArray *)[tempDict allValues]]]; 
```

**问题：**我希望上述数组中的**Freight、Fuel 和 Discount**以相同的顺序排列（当然，使用 Ordering of *Values*）。

**实现这一目标的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:11:02.220

乍一看似乎很棘手，但仔细想想就很简单。您要做的就是获取一个排序的键列表，并在将它们添加到数组时查找每个键的值。

要获取带有排序键列表的数组：

```
NSArray *sortedKeys = [[tempDict allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

然后遍历这些并将它们添加到 NSMutableArrays：

```
NSMutableArray *arrTVBuyCharge = [[NSMutableArray alloc] init];
NSMutableArray *arrTVBuyCost = [[NSMutableArray alloc] init];
for (NSString *key in sortedKeys) {
   [arrTVBuyCharge addObject:key];
   [arrTVBuyCost addObject:[tempDict objectForKey:key]];
} 
```

为了获得更好的性能，请使用`initWithCapacity`NSMutableArrays 的方法，因为您知道大小。

这是执行此操作的标准方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:27:25.607

伙计，NSMutableDictionary 总是以无序的方式返回键，如果你真的想保持顺序，那么你可以按字母顺序对其进行排序，或者你可以在你的值之前添加 01, 02,03 序列号，以便按照它们放置的顺序对它们进行排序，稍后修剪字符串的前两个字符并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T14:39:46.970

**1）分别获取三个对象：**

```
NSArray *mainKeys = @[@"Freight", @"Fuel", @"Discount"];
NSArray *mainValues = @[[tempDict valueForKey:@"Freight"],
        [tempDict valueForKey:@"Fuel"],
        [tempDict valueForKey:@"Discount"]
        ];
[arrTVBuyCharge addObjectsFromArray:mainKeys];
[arrTVBuyCost addObjectsFromArray:mainValues]; 
```

**2）从 tempDict 中删除它们：**

```
[tempDict removeObjectsForKeys:mainKeys]; 
```

**3）从更新的 tempDict 添加对象：**

```
[arrTVBuyCharge addObjectsFromArray:(NSArray *)[tempDict allKeys]];
[arrTVBuyCost addObjectsFromArray:(NSArray *)[tempDict allValues]]; 
```

这将使**Freight、Fuel 和 Discount**位于新数组中的索引**0、1 和 2 。***

# java - Spring MVC应用程序中jsp文件中的粉碎形式

> ID：15851997
> 
> 赞同：1
> 
> 时间：2013-04-06T14:17:09.390
> 
> 标签：java, forms, jsp, spring-mvc

我的应用程序有问题。我有一个表单，我正在其中编辑数据库中的一些字段。并且“时间”字段始终与其他字段“不一致”。问题在于 'form:input path="time"' 标记。当我将“时间”更改为“日期”或“描述”时，一切都很好。这是它的样子：

[![](https://i.stack.imgur.com/MvqlL.png)](https://i.stack.imgur.com/MvqlL.png)

这是我的jsp文件的一部分：

```
 <form:form method="post" commandName="note" action="update_note">
    <form:hidden path="note_id"/>
    <div id="vertical">
        <div id="edit">
            Date
            <form:input path="date"/>
        </div>
        <div id="edit">
            Time
            <form:input path="time"/>
        </div>
        <div id="edit">
            Description
            <form:input size="30" path="description"/>
        </div>
    </div>
   </div> 
```

数据库中的时间是 TIME 类型，在 java 类中我将它映射到 java.sql.Time 对象。任何想法在输入路径中的这个“时间”可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:27:20.780

将`size`属性放在输入字段上`time`并`date`

```
<form:input size="20" path="date"/>
<form:input size="20" path="time"/> 
```

# ios - 如何将工具栏实现为 UICollectionView 的标题

> ID：15851999
> 
> 赞同：0
> 
> 时间：2013-04-06T14:17:14.453
> 
> 标签：ios, uicollectionview

我想要做的是一个工具栏，就像 Apple 的 Podcasts 应用程序一样工作：

![苹果的播客应用截图](https://i.stack.imgur.com/4JKim.png)

我尝试使用自定义 UICollectionReusableView 并将其用作补充视图，但我不断发现新的错误，这让我想知道这是否是正确的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:06:47.047

使用 UICollectionElementKindSectionHeader 是实现 UICollectionView 标头的正确方法。UICollectionView 中存在一个错误，当重新加载具有非零补充视图的部分时，可能会使应用程序崩溃。除非您提供更多信息，否则很难判断这是否是问题所在。

如果是，解决方法是将工具栏放入 UICollectionViewCell 而不是 UICollectionReusableView。