# StackOverflow 问答 14961000-14961999

# tinymce - 如何更改tinymce textarea文本颜色

> ID：14961001
> 
> 赞同：1
> 
> 时间：2013-02-19T15:21:51.783
> 
> 标签：tinymce

我正在尝试更改 tinymce 文本编辑器的文本颜色，当我在其中键入文本时，默认情况下显示为灰色，我希望文本显示为红色。我想我将不得不覆盖它的默认 css 不确定它，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:30:13.640

如果可能的话，不要摆弄tinymce皮肤的细节。最佳实践是使用 tinymce 配置参数[content_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)。

```
content_css : "http://path_to_css/custom_content.css", 
```

# alfresco - Alfresco的activiti在表单中添加html文件元素

> ID：14961002
> 
> 赞同：0
> 
> 时间：2013-02-19T15:21:53.953
> 
> 标签：alfresco, activiti

我想在我的流程定义开始时添加一个文件上传 html 元素，即使是在表单中。

```
<startEvent id="start" name="Start">
        <extensionElements>
            <activiti:formProperty id="name" name="Name"
                type="string" required="true" />
            <activiti:formProperty id="emailAddress" name="Email Address"
                type="string" required="true" />
            <activiti:formProperty id="income" name="Income"
                type="long" required="true" />
            <activiti:formProperty id="loanAmount" name="Loan Amount"
                type="long" required="true" />
        </extensionElements>
    </startEvent> 
```

我想在最后添加一个文件上传器以从用户那里获取文件并进一步处理它。我尝试使用文件数据类型但没有用。请指导如何在此处添加文件元素。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-03T08:28:05.270

将此附加到上传字段：

```
<activiti:formProperty id="attachfile" name="Atatch File"
                type="upload" required="true" /> 
```

# javascript - 标头中的 Javascript 函数显示为未定义

> ID：14961003
> 
> 赞同：1
> 
> 时间：2013-02-19T15:22:05.983
> 
> 标签：javascript, html, function, centering

```
 <script type="text/javascript">
function centerItem(id,size)
{
    var pad = (window.innerWidth - size)/2;
    document.getElementById(id).style.marginLeft = pad+"px";
    document.getElementById(id).style.marginRight = pad+"px";
}

function login()
{
    document.getElementById('box').innerHTML="<img src="img/pleasewait.gif" />";
    var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById('box').innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("POST","http://[lan ip]/Athena/lib/ajax/login.php",true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("email="+email+"&pass="+pass);
}
</script> 
```

那在我的`<head>`部分，我用这个来称呼它。

```
<script type="text/javascript">centerItem('login',210);</script> 
```

但是，我收到一条错误消息：“未捕获的 ReferenceError：未定义 centerItem（匿名函数）”

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:56:01.957

`document.getElementById('box').innerHTML="<img src="img/pleasewait.gif" />";`
真的应该是：
`document.getElementById('box').innerHTML="<img src=\"img/pleasewait.gif\" />"`

创建图像标签时需要转义双引号。

你应该缓存你选择的元素。结果将是这样的：

```
function centerItem(id, size) {
    var pad = (window.innerWidth - size)/2,
        elem = document.getElementById(id);
    elem.style.marginLeft = pad+"px";
    elem.style.marginRight = pad+"px";
}

function login() {
    var xmlhttp;
    var box = document.getElementById('box');
    box.innerHTML="<img src=\"img/pleasewait.gif\" />";

    if (window.XMLHttpRequest){
      // code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
    } else {
      // code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            box.innerHTML=xmlhttp.responseText;
        }
    };
    xmlhttp.open("POST","http://[lan ip]/Athena/lib/ajax/login.php",true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("email="+email+"&pass="+pass);
} 
```

# forms - 使用jQuery发送具有相同名称的表单元素数组的表单数据

> ID：14961006
> 
> 赞同：2
> 
> 时间：2013-02-19T15:22:10.957
> 
> 标签：forms, jquery, serialization

我有这个表格：

```
...
        <td><input type="text" name="code[]" value="" /></td>
        <td>
              <select class="selectProductOrders" name="selectProductOrders[]">
                  <option value="default" disabled selected>Select a product</option> 
              </select>
        </td>
        <td><input type="number" pattern="[0-9]*" name="rsp[]" value="" /></td>
        <td><input type="number" pattern="[0-9]*" name="trade[]" value="" /></td>
        <td><input type="number" pattern="[0-9]*" name="discount[]" value="0" /></td>
        <td><input type="number" pattern="[0-9]*" name="qty[]" value="" /></td>
        <td><input type="number" pattern="[0-9]*" name="cost[]" value="" /></td>
... 
```

上面和下面还有更多，但这是重要的部分。表中的这一行根据订单中有多少产品重复，所以我认为在服务器端解析每个订单项目元素的数组会更容易。而且由于表格很大，我决定使用`jQuery.serialize()`json 格式发送数据。

它发送表单的其余部分正常，但不发送上述每个输入元素的数组，它只发送最后一行。

任何想法解决这个问题？我想我可以手动将表单中的值输入为 json 格式，但我想解决序列化问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:37:57.537

`jQuery.serialize()`我认为如果输入的名称都相同，则不能使用。

要将数组发送到服务器，我建议您对输入进行编号：

```
<td><input type="text" name="code[0]" value="" /></td>
    <td>
          <select class="selectProductOrders" name="selectProductOrders[0]">
              <option value="default" disabled selected>Select a product</option> 
          </select>
    </td>
    <td><input type="number" pattern="[0-9]*" name="rsp[0]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="trade[0]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="discount[0]" value="0" /></td>
    <td><input type="number" pattern="[0-9]*" name="qty[0]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="cost[0]" value="" /></td>

<td><input type="text" name="code[1]" value="" /></td>
    <td>
          <select class="selectProductOrders" name="selectProductOrders[1]">
              <option value="default" disabled selected>Select a product</option> 
          </select>
    </td>
    <td><input type="number" pattern="[0-9]*" name="rsp[1]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="trade[1]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="discount[1]" value="0" /></td>
    <td><input type="number" pattern="[0-9]*" name="qty[1]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="cost[1]" value="" /></td> 
```

这可确保您的所有值都发送到服务器。

# android - 阅读器应用程序 - 使用 WebView 或 Canvas？

> ID：14961007
> 
> 赞同：0
> 
> 时间：2013-02-19T15:22:12.103
> 
> 标签：android, android-webview, android-canvas

我正在编写其中一个阅读器应用程序。我想知道您是否对使用`WebView`and `Canvas`(with `drawText()`) 来实现它有意见和反对意见。

有什么要求：

*   **根据几个 html 标签格式化文本：`<p>`, `<strong>`, `<h3>`, `<br/>`, `<a>`,**
*   **在文本中显示图像（它们在`<img>`标签中），**
*   在平板设备上以两列显示文本，
*   分页文本（谷歌潮流风格）

粗体字是绝对需要的。后者是非常需要的，但我可以放弃它们。

* * *

所以据我所知：

**`WebView`**在显示 html 格式的文本时会很棒。我也不必照顾加载图像，它们会自动加载`<img>`标签（它们会不会，即使我使用`loadData()`而不是`loadUrl()`？）。如果我尝试对文本进行分页，问题就开始了。**是否有可能计算 a 中文本的大小`WebView`**并将其重新排列到多个页面中（使用`ViewPager`）？

**`Canvas`**在计算文本大小、将其放入列和页面时非常有用。但是我必须自己处理所有的 HTML 标签，自己格式化文本。更糟糕的是，我将不得不提取图像的 url，处理下载并将它们放回文本（每次加载时重新排列整个文本）。**我对吗？**

* * *

你能指出使用它们的其他一些优点和缺点吗？你会选择哪个？或者也许是别的什么？或者是否有一些库至少为我做了一些工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:27:25.783

为什么不使用 Textview 结合跨区文本和 viewpagers 进行分页。

# c++ - 规范赋值运算符必须需要复制构造函数

> ID：14961008
> 
> 赞同：-2
> 
> 时间：2013-02-19T15:22:13.087
> 
> 标签：c++, class

我创建了两个类，并在另一个类中声明了一个类的对象，如下所示，但我收到一个警告，该类必须声明一个规范的赋值运算符并且需要一个复制构造函数。

```
class Base {
public:
    int value;
    virtual int getData() { retun 0; };
}

class test {
public:
    int data;
}

class B : public Base {
    test *var;
} 
```

如何解决此警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:38:58.830

这是基本的 C++：每当您将指针放入类时，该类都需要显式的复制构造函数和赋值运算符。

否则，您最终*会*遇到类及其副本都试图删除同一个对象的情况。或者一些副本指向前一段时间被删除的对象。

如果您正在使用对象生命周期和原始指针做一些棘手的事情，那么*无论如何*都要声明复制构造函数并编写注释来解释正在发生的事情。

# macos - 如何在 OSX 上将 KDE Marble 安装为库？

> ID：14961012
> 
> 赞同：3
> 
> 时间：2013-02-19T15:22:14.420
> 
> 标签：macos, qt, kde

我一直在研究`KDE's` `MarbleWidget`在`OSX`. 但是，此处的说明：http: [//marble.kde.org/sources.php](http://marble.kde.org/sources.php)似乎只是构建`marble.app`和安装它。我无法弄清楚如何获取安装在下的包含和库`/usr/local.`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:35:32.480

我只能对 Linux 版本给出建议，但我想它是相似的。

安装过程还应该创建可以在自己的应用程序中使用的库文件。要将它们复制到文件夹 /usr/local，您可以执行以下操作：

[http://code.google.com/p/tonatiuh/wiki/InstallingMarbleForLinux](http://code.google.com/p/tonatiuh/wiki/InstallingMarbleForLinux)

然后您可以按照以下步骤设置基本应用程序： http: [//techbase.kde.org/Projects/Marble/MarbleCPlusPlus](http://techbase.kde.org/Projects/Marble/MarbleCPlusPlus)

基本上你必须找到库文件并复制并粘贴到正确的目录。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T04:24:11.053

**编辑**您最初应该按照以下位置的 cmake 说明进行操作：http: [//techbase.kde.org/Projects/Marble/MacCompiling](http://techbase.kde.org/Projects/Marble/MacCompiling)

您可能需要修改 CMakeLists.txt：确保设置 CMAKE_OSX_ARCHITECTURES 的两行。无论如何，我必须这样做：将此变量设置为对您的 OSX 平台有意义的值也可以，但似乎 cmake 足够聪明，可以默认猜测适当的架构。并且在命令行上传递 -DCMAKE_OSX_ARCHITECTURES 似乎不起作用。

然后运行make，make install。

这里有关于哪些文件需要复制到哪里的说明：

[https://code.google.com/p/tonatiuh/wiki/InstallingMarbleForMac](https://code.google.com/p/tonatiuh/wiki/InstallingMarbleForMac)

之后你需要做一些事情。需要修复文件 libmarblewidget.15.dylib（您将复制到 /usr/local/lib/marble），以便它知道它在哪里。关于为 OSX 部署应用程序的 Qt 页面（[http://qt-project.org/doc/qt-4.8/deployment-mac.html](http://qt-project.org/doc/qt-4.8/deployment-mac.html)）有一个关于如何做到这一点的更广泛的指南，但基本上你只需要使用 install_name_tool告诉图书馆它现在住在哪里。如果你使用 otool 检查它的状态，你会得到类似的东西：

```
 kagutsuchi$ otool -L /usr/local/lib/libmarblewidget.15.dylib
    /usr/local/lib/marble/libmarblewidget.15.dylib:
        /marble/build/dir/src/lib/marble/libmarblewidget.15.dylib (compatibility version 15.0.0, current version 0.15.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtDBus.framework/Versions/4/QtDBus (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtXml.framework/Versions/4/QtXml (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtSvg.framework/Versions/4/QtSvg (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtScript.framework/Versions/4/QtScript (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtWebKit.framework/Versions/4/QtWebKit (compatibility version 4.8.0, current version 4.8.0)
        /Developer/QtSDK/Desktop/Qt/4.8.0/gcc/lib/QtDeclarative.framework/Versions/4/QtDeclarative (compatibility version 4.8.0, current version 4.8.0)
        /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices (compatibility version 1.0.0, current version 41.0.0)
        /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 52.0.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0)
        /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 635.15.0) 
```

第二行 (/marble/build/dir/src/lib/marble/libmarblewidget.15.dylib ...) 是个问题，因为这不是库的当前位置。你可以改变它：

```
 kagutsuchi$ sudo install_name_tool -id /usr/local/lib/marble/libmarblewidget.15.dylib /usr/local/lib/marble/libmarblewidget.15.dylib 
```

-id 之后的参数是新的标识符。下一个参数是您正在修改的文件，因此您也可以这样做：

```
 kagutsuchi$ cd /usr/local/lib/marble
    kagutsuchi$ sudo install_name_tool -id /usr/local/lib/marble/libmarblewidget.15.dylib libmarblewidget.15.dylib 
```

将插件复制到 /usr/local/bin/marble 后，您还需要修改它们，以便他们知道在哪里查找 libmarblewidget.15.dylib，再次使用 install_name_tool：

```
 kagutsuchi$ cd /usr/local/lib/marble
    kagutsuchi$ for sofile in `ls *.so`; do sudo install_name_tool -change /marble/build/dir/src/marble/build/src/lib/libmarblewidget.15.dylib /usr/local/lib/marble/libmarblewidget.15.dylib $sofile; done 
```

您应该能够对 /marble/build/dir 使用与修复 libmarblewidget.15.dylib 相同的值。

这应该都有效。如果您使用 otool -L 检查这些文件，它们现在应该在正确的位置查找库。您还应该能够编译您的 Qt 代码，前提是您的 .pro 文件中有正确的 INCLUDEPATH 和 LIBS 内容。

但是......我被困在这一点上。我已经编译了我的代码，但是当我尝试让它运行我创建的 MarbleWidget 时，并没有在正确的位置寻找插件。我将在插件主题上发布一个问题，看看是否可以获得一些帮助。

# android - Android：利用 ListFragments 显示预制数据库

> ID：14961013
> 
> 赞同：1
> 
> 时间：2013-02-19T15:22:13.890
> 
> 标签：android, database, android-listfragment, slidingmenu

我是初学者，刚开始了解android编程。

我正在使用 SlidingMenu 库，并尝试在片段中列出项目，如图所示。（显示的项目只是字符串）

[http://imageshack.us/photo/my-images/46/screenshot2013021419134.png/](http://imageshack.us/photo/my-images/46/screenshot2013021419134.png/)

但是，当我尝试从预制数据库中提取数据并列出所提到的项目时，我遇到了永无止境的加载。

[http://imageshack.us/photo/my-images/577/screenshot2013021923094.png/](http://imageshack.us/photo/my-images/577/screenshot2013021923094.png/)

这是我的代码..

```
public class MainActivity extends SlidingFragmentActivity {

public static int THEME = R.style.Theme_Sherlock;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // All related with slidingMenu
    setContentView(R.layout.activity_main);

    setBehindContentView(R.layout.primary_view);
    getFragmentManager().beginTransaction()
    .replace(R.id.primary_view, new FragList())
    .commit();

    SlidingMenu sm = getSlidingMenu();
    sm.setMode(SlidingMenu.LEFT_RIGHT);
    sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
    sm.setShadowWidthRes(R.dimen.shadow_width);
    sm.setShadowDrawable(R.drawable.shadow);
    sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    sm.setFadeDegree(0.35f);

    sm.setSecondaryMenu(R.layout.secondary_view);
    getFragmentManager().beginTransaction()
    .replace(R.id.secondary_view, new WorshipFragList())
    .commit();
    sm.setSecondaryShadowDrawable(R.drawable.shadowright);

    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    setSlidingActionBarEnabled(false);
}

public boolean onCreateOptionsMenu(Menu menu)
{
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    if (null != searchView )
    {
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false);   
    }
    return super.onCreateOptionsMenu(menu);
} 
```

}

```
class SongHelper extends SQLiteOpenHelper {

private static String DATABASE_PATH = "";
private static final String DATABASE_NAME = "DataDB";
public static final String TABLE_NAME = "song";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_TITLE = "title";

public SQLiteDatabase dbSqlite;

private final Context myContext;
Cursor cursor;

public SongHelper(Context context) {
    super(context, DATABASE_NAME, null, 1);
    DATABASE_PATH = "/data/data/" + context.getPackageName() + "/databases/";
    this.myContext = context;
}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public void createDatabase() {
    createDB();
}

private void createDB() {

    boolean dbExist = DBExists();

    if(!dbExist) {
        this.getReadableDatabase();
        copyDBFromResource();
    }
}

private boolean DBExists() {

    SQLiteDatabase db = null;

    try {
        String databasePath = DATABASE_PATH + DATABASE_NAME;
        db = SQLiteDatabase.openDatabase(databasePath, null, SQLiteDatabase.OPEN_READWRITE);
        db.setLocale(Locale.getDefault());
        db.setLockingEnabled(true);
        db.setVersion(1);
    } catch (SQLiteException e) {

        Log.e("SqlHelper", "Database not found");

    }

    if (db!=null) {
        db.close();
    }

    return db!= null ? true : false;
}

private void copyDBFromResource() {

    InputStream inputStream = null;
    OutputStream outputStream = null;
    String dbFilePath = DATABASE_PATH + DATABASE_NAME;

    try {

        inputStream = myContext.getAssets().open(DATABASE_NAME);
        outputStream = new FileOutputStream(dbFilePath);

        byte[] buffer = new byte[1024];
        int length;
        while((length = inputStream.read(buffer)) > 0) {
            outputStream.write(buffer, 0, length);
        }

        outputStream.flush();
        outputStream.close();
        inputStream.close();
    } catch(IOException e) {
        throw new Error("Problem copying database from resource file.");
    }
}

public void openDatabase() throws SQLException {

    String myPath = DATABASE_PATH + DATABASE_NAME;
    dbSqlite = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

}

@Override
public synchronized void close() {

    if (dbSqlite != null)
    {
        dbSqlite.close();
    }
    super.close();
}

public ArrayList<String> getTableColumn(String TABLE_NAME, String[] column){

    ArrayList<String> aL = new ArrayList<String>();

    cursor = dbSqlite.query(TABLE_NAME, column, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
      aL.add(cursor.getString(0));
      cursor.moveToNext();
    }

    System.out.println(aL);
    cursor.close();
    return aL;
}

public String getName(Cursor c) {

    return(c.getString(1));

} 
```

}

```
 public class FragList extends ListFragment {

SongHelper dbSongHelper = null;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    dbSongHelper = new SongHelper(getActivity());
} 
```

}

非常感谢帮助找到解决此问题的方法..

谢谢 ：）

# python - 从 Python 中的未命名列表中删除项目

> ID：14961014
> 
> 赞同：4
> 
> 时间：2013-02-19T15:22:17.923
> 
> 标签：python

为什么以下语句`'item'`在 Python 中不返回列表？

```
list(something_convertible_to_list).remove('item') 
```

?

我想使用上面的结构来避免显式命名一个列表以将其传递给一个函数，即：

```
operate_on_list(list(something_convertible_to_list).remove('item'))

def operate_on_list(my_list):
    # do_something
    print my_list
    return 
```

这在 Python 中可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T15:24:12.610

在 python 中，就地操作的内置方法返回`None`以**绝对清楚地**表明它们改变了一个对象。

当然，您可以随意忽略此约定并编写自己的包装器：

```
def my_remove(lst,what):
   lst.remove(what)
   return lst 
```

但我不会推荐它。

作为旁注，如果你想做类似的事情：

```
list(something_convertible_to_list).remove('item') 
```

但取回列表，以下内容可能非常相似，很有用：

```
[x for x in something_iterable if x != 'item'] 
```

这*确实*返回了一个列表，但是`list.remove`只带走了 1 `'item'`，这将构造一个没有其中的新列表`'item'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:27:52.677

您可以尝试以下方法：

```
my_list[:my_list.index('item')]+my_list[my_list.index('item')+1:] 
```

尽管您确实在这里进行了两次搜索。

或者

```
[item for item in my_sequence if item != 'item'] 
```

第一个将从`'item'`列表中删除第一个，而第二个将删除每个`'item'`.

# silverlight - NSIS 更改 XAP 文件中存在的配置文件，即 silverlight 组件构建

> ID：14961017
> 
> 赞同：0
> 
> 时间：2013-02-19T15:22:28.347
> 
> 标签：silverlight, installation, nsis, xap

我正在创建一个安装程序，它需要更改我的一个 silverlight 组件的配置文件。该组件的配置文件位于 XAP 文件中。有什么办法可以更改该配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:40:39.510

将配置文件与 XAP 文件并排托管。

*   ../YourProject.XAP
*   ../YourProjectSettings.XML

以下代码将下载一个名为“Settings.xml”的文件，该文件与 XAP 位于同一目录中，并将其放置在独立存储中。然后，您可以稍后根据需要打开/关闭/解析它。

```
 private void DownloadFile()
    {
        Uri downloadPath = new Uri(Application.Current.Host.Source, "Settings.xml");
        WebClient webClient = new WebClient();
        webClient.OpenReadCompleted += OnDownloadComplete;
        webClient.OpenReadAsync(downloadPath);
    }

    private void OnDownloadComplete(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error != null) throw e.Error;

        using (var isoStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            IsolatedStorageFileStream isoStream = isoStorage.CreateFile("CachedSettings.xml");

            const int size = 4096;
            byte[] bytes = new byte[4096];
            int numBytes;

            while ((numBytes = e.Result.Read(bytes, 0, size)) > 0)
                isoStream.Write(bytes, 0, numBytes);

            isoStream.Flush();
            isoStream.Close();
        }
    } 
```

这样，您的安装程序可以通过条件文件复制将必要的设置文件与您的 XAP 并排添加。破解 XAP 是一种 hack；它会使您的安装程序代码复杂化，并使已签名的 XAP 无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:19:17.053

我用 C# 编写了控制台应用程序，它在 XAP 构建中进行了这些更改。我只是从我的安装程序中调用该应用程序，因为我在 NSIS 中找不到任何方法。

# java - Nimbus 外观更改 JButton 的颜色

> ID：14961027
> 
> 赞同：1
> 
> 时间：2013-02-19T15:22:50.490
> 
> 标签：java, swing, jbutton, look-and-feel, nimbus

我有一个带有图标的 JButton。我希望 JButton 的背景颜色与图标相同。

以下代码在标准外观中运行良好：

```
button.setBackground(new Color(212,208,199)); 
```

但是，当我将外观更改为 Nimbus 时，JButton 的背景颜色会变浅。

当我在 button.setBackground() 中更改颜色时，JButton 仍会更改其背景颜色，但我不知道在 Nimbus 中需要什么颜色才能获得与 JButton 的背景颜色相同的颜色。当然，我可以尝试通过尝试所有值来通过视觉找到颜色，但应该有更简单的方法。

我还尝试通过以下代码更改背景颜色，但结果相同：

```
UIDefaults defaults = UIManager.getLookAndFeelDefaults();
defaults.put("Button.background",new Color(212,208,199)); 
```

如何更改 Nimbus 中 JButton 的背景颜色，使其与包含图标的背景颜色合并？

下面是一些带有默认 LaF、nimbus LaF（相同代码）和 nimbus LaF（红色）的按钮的图片：

默认 LaF，使用`button.setBackground(new Color(212,208,199))`：

![在此处输入图像描述](../Images/f7f8a6a434536c4f6151007a23934322.png)

Nimbus LaF，使用`button.setBackground(new Color(212,208,199))`：

![在此处输入图像描述](../Images/04be1bae8302fe4a899bf958fbd140bf.png)

Nimbus LaF，使用`button.setBackground(Color.red)`：

![在此处输入图像描述](../Images/dce31e9dc5b0eb65a009c2c1537fed87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:06:34.063

1.  请为什么`Table.background`改用`Button.background`

2.  有关更多键以查看[Nimbus 默认值](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

3.  更多关于[Nimbus 中 JButton 的背景](https://stackoverflow.com/a/10686898/714968)

4.  [也许？？？（从你的描述中不知道）](https://stackoverflow.com/a/7944388/714968)，也许没有理由改变背景，必须[看看 JButtons API](http://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html)

方法

```
 JButton.setBorderPainted(false);
 JButton.setBorder(null);
 JButton.setFocusable(false);
 JButton.setMargin(new Insets(0, 0, 0, 0));
 JButton.setContentAreaFilled(false);
 JButton.setIcon(someIcon);
 JButton.setRolloverIcon(someIcon);
 JButton.setPressedIcon(someIcon);
 JButton.setDisabledIcon(someIcon); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:04:08.137

使用没有透明度的图像，“背景”将是图像 BG 中的任何颜色。

> 图标是 jpg 文件（没有透明度），但只填充了整个按钮的一部分。

有关如何获取与图标精确大小的按钮的提示，请参阅[此问题。](https://stackoverflow.com/a/10862262/418556)下图由 4 个按钮和 5 个标签组成，其中的图标是从单个图像中剪下的。

![](../Images/3dc90ceea9490208da0a4059c2068b99.png)

> ..图标下方的文本仍将显示按钮背景颜色..

啊对。文字亦然。

在这种情况下，最好的策略是从现有图像创建一个具有**透明 BG**的图像，然后在它提供的任何按钮（具有任何 GB 颜色）中使用它。

为此，请获取图像的 PNG（PNG 不像 JPG 那样有损），并使用专用的图像编辑器将其保存为透明的 BG。但是如果我们被迫在运行时这样做，考虑使用这样的东西：

![图像背景清洁器](../Images/4438d3e2637591686b4c17792f7b57c5.png)

这张图片实际上展示了 JPG 的有损特性。我们必须与基本 BG 颜色越来越“远离”，以尝试拾取原始图标之外的所有像素。即使在对相似颜色的最宽松的解释中，我仍然看到一些我希望删除的斑点。

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.imageio.ImageIO;
import java.net.URL;

class ImageBackgroundCleaner {

    public static BufferedImage clearImageBackground(BufferedImage solidBG, int distance) {
        int w = solidBG.getWidth();
        int h = solidBG.getHeight();
        BufferedImage transparentBG = new BufferedImage(
                w,
                h,
                BufferedImage.TYPE_INT_ARGB);
        int c = solidBG.getRGB(0, 0);
        for (int xx=0; xx<w; xx++) {
            for(int yy=0; yy<h; yy++) {
                int s = solidBG.getRGB(xx, yy);
                if (getColorDistance(s,c)>=distance) {
                    transparentBG.setRGB(xx, yy, s);
                }
            }
        }
        return transparentBG;
    }

    public static int getColorDistance(int color1, int color2) {
        Color c1 = new Color(color1);
        Color c2 = new Color(color2);
        int r1 = c1.getRed();
        int g1 = c1.getGreen();
        int b1 = c1.getBlue();
        int r2 = c2.getRed();
        int g2 = c2.getGreen();
        int b2 = c2.getBlue();

        return Math.abs(r1-r2) + Math.abs(g1-g2) + Math.abs(b1-b2);
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://i.stack.imgur.com/Yzfbk.png");
        BufferedImage bi = ImageIO.read(url);
        final BufferedImage img = bi.getSubimage(39, 21, 40, 40);
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new GridLayout(3,0,5,5));
                gui.setBackground(Color.RED);

                JLabel original = new JLabel(new ImageIcon(img));
                gui.add(original);

                int start = 12;
                int inc = 3;
                for (int ii=start; ii<start+(8*inc); ii+=inc) {
                    gui.add(new JLabel(new ImageIcon(clearImageBackground(img, ii))));
                }

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T06:57:42.883

这个问题仍然困扰着我，因为我想知道为什么 nimbus 会改变 setBackground() 的结果......我假设 nimbus 应用了某种颜色蒙版，它会稍微改变颜色？

但是：在我的项目中，按钮都在一个单独的 JPanel 中，需要 nimbus LaF 的 Jpanel 没有任何按钮，所以我通过使用按钮 JPanel 的默认 LaF 解决了这个问题，并且只使用了 nimbus LaF在我需要它的 JPanel 中。

抱歉，我之前没有想到这一点（我不知何故认为 LaF 必须适用于整个项目）。

所以问题解决了，但仍然对关于 nimbus 颜色处理的答案感到好奇....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-21T04:05:21.863

```
// you can always try this, it worked for me 
button.setContentAreaFilled(false);
button.setOpaque(true); 
```

# c++ - 如何获取 C++ json 帖子的 json 有效负载

> ID：14961038
> 
> 赞同：0
> 
> 时间：2013-02-19T15:23:27.560
> 
> 标签：c++, json, http, cgi

我需要创建一个接受发布数据的 c++ cgi 应用程序。我将接受一个 json 对象。我如何获得有效载荷？

我可以使用以下方法获取获取数据

```
int main() {
    bool DEBUG = true;

    cout << "content-type: text/html" << endl << endl;

    //WHAT GOES HERE FOR POST
    json=?????

    //THIS IS A GET
    query_string = getenv("QUERY_STRING");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:51:02.067

如果方法类型是*POST*（您可能还想检查一下），那么 POST 数据将写入标准输入。因此，您可以使用如下标准方法：

```
// Do not skip whitespace, more configuration may also be needed.
cin >> noskipws;

// Copy all data from cin, using iterators.
istream_iterator<char> begin(cin);
istream_iterator<char> end;
string json(begin, end);

// Use the JSON data somehow.
cout << "JSON was " << json << endl; 
```

这会将所有数据从*cin*读取到*json*中，直到发生 EOF。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:54:51.113

假设阿帕奇：

该[文档可在此处找到](http://httpd.apache.org/docs/2.2/howto/cgi.html)：

您会在底部附近找到它，但发布数据是通过标准输入提供的。

```
#include <iostream>
#include <string>
#include <sstream>

int main() 
{   
    bool DEBUG = true;

    std::cout << "content-type: text/html\n\n"; // prefer \n\n to std::endl
                                                // you probably don't want to flush immediately.

    std::stringstream post;
    post << std::cin.rdbuf();

    std::cout << "Got: " << post.str() << "\n";
} 
```

# sql - 多对多关系中额外表的目的是什么？

> ID：14961039
> 
> 赞同：0
> 
> 时间：2013-02-19T15:23:34.813
> 
> 标签：sql, many-to-many

我试图了解在多对多关系中对“额外”表的需求。

例如，如果我的 ERD 具有：`Product m----- <makes> ----n Factory`，则表的以下代码可能如下所示：

```
 CREATE TABLE factory(

        factory_id      INTEGER         NOT NULL,
        address         VARCHAR(30)     NOT NULL,
CONSTRAINT PK_factory_factory_id PRIMARY KEY(factory_id)
);

 CREATE TABLE product(

        prod_id         INTEGER         NOT NULL,
        prod_name       VARCHAR(30)     NOT NULL,
        price           FLOAT           NOT NULL,
CONSTRAINT PK_product_prod_id PRIMARY KEY(prod_id)
);

CREATE TABLE makes(

        prod_id         INTEGER         NOT NULL,
        factory_id      INTEGER         NOT NULL,
CONSTRAINT PK_makes_prod_id_factory_id PRIMARY KEY(prod_id, factory_id),
CONSTRAINT FK_product_prod_id FOREIGN KEY(prod_id) REFERENCES product(prod_id),
CONSTRAINT FK_factory_factory_id FOREIGN KEY(factory_id) REFERENCES factory(factory_id)
); 
```

制作表的目的是什么？我想不出您何时可以使用它或为什么需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:28:27.710

如果没有 N 个工厂，每个工厂都可以生产一个产品，你如何记录这一事实？

*   您不能在产品表中存储单个工厂编号；有很多可能的值。
*   您不能在工厂表中存储单个产品编号；有很多可能的值。

因此，您需要第三张表来准确存储信息。

> 您能否提供一个示例，说明您将如何创建查询以查看可以生产单一产品的多个工厂？

```
SELECT f.*
  FROM Factory AS f
  JOIN Makes   AS m ON m.factory_id = f.factory_id
 WHERE f.prod_id = 123456; 
```

或者：

```
SELECT f.*
  FROM Factory AS f
  JOIN Makes   AS m ON m.factory_id = f.factory_id
  JOIN Product AS p ON m.prod_id    = p.prod_id
 WHERE p.prod_name = "HyperCubic Widget" 
```

您使用哪个取决于您是否知道产品 ID 或是否需要查看产品名称或其他属性。

如果您需要知道工厂可以生产哪些产品，这些查询几乎是对称的：

```
SELECT p.*
  FROM Product AS p
  JOIN Makes   AS m ON m.prod_id = f.prod_id
 WHERE f.factory_id = 321; 
```

或者：

```
SELECT p.*
  FROM Product AS p
  JOIN Makes   AS m ON m.prod_id    = p.prod_id
  JOIN Product AS p ON m.factory_id = f.factory_id
 WHERE f.address = "123 North St, Bigtown" 
```

请注意，因为您将对表有参照完整性约束，所以您可以使用内部联接而不是外部联接，这通常更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:29:54.987

拥有并属于多的关系意味着双方可以属于彼此的倍数。

在这种情况下：

*   多个工厂可以生产一个产品
*   一家工厂可以生产多种产品

表示这一点的唯一方法是有一个“连接”表，因为工厂表和产品表中的每个项目只代表一个不同的产品或工厂，如果没有这样的表，就无法将其链接到多个其他项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:41:41.323

以下是您将用它回答的一些问题：

```
What products does a single factory make?

What factories make a particular product?

What factories make the same product as factory F?

What factories can be used to fulfill an order that that has products P1, P2, and P3?

Where is the closest factory to the customer who wants production P?

Where is the next closest factory? 
```

等等。

# c++ - 将 std::string 转换为整数时如何处理溢出/下溢？

> ID：14961042
> 
> 赞同：2
> 
> 时间：2013-02-19T15:23:41.803
> 
> 标签：c++, types, overflow

我正在尝试使用将数字std **::string**转换为**整数**`std::istringstream`

```
std::istringstream convertor;

convertor.str(mystring);
convertor >> myint; 
```

如果数字字符串超过（或低于）整数的限制，我想抛出异常，但我不知道最好的方法是什么。我想知道是否有特定于 std::istringstream 的东西或专门为此目的制作的其他东西，还是我必须使用脏（至少看起来脏:)）方式`numeric_limits`？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:27:35.763

```
std::istringstream convertor;
convertor.str(mystring);
if(!(convertor >> myint)) {
    thow std::invalid_argument();
} 
```

应该注意的是，标准库中已经提供了这样的功能。(C++11)

```
it=std::stoi(my_string); 
```

[http://en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)

此外，可以说这是异常滥用，因为函数的前提条件是`mystring`应该表示一个整数值，如果这不是前提条件，那么它是函数正常流控制的一部分来处理它不是的情况。

我可能会写：

```
std::pair<bool, int> try_to_int(const std::string& str); 
```

或者 boost::optional 在这里也可以很好地工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:38:20.223

如果您有权访问 C++11 功能，请尝试`std::stoi(my_string);`

如果您没有，但可以访问 boost 库，请尝试：

```
std::string str("112211"); 
int x = 0;
try
{
    x = boost::lexical_cast<int>(str);
}
(catch boost::bad_lexical_cast&)
{
} 
```

定义了 boost::lexical 转换（至少对于一般情况），以在`istringstream`内部使用（如果您覆盖`std::istream& operator>>`for `your_type`，您将能够使用 读取您的类型`lexical_cast<your_type>(string)`）；

如果您也无权访问 boost，请自行开发（此线程中的其他人已经指出如何设置 iostream 以引发异常）。

编辑：滚动你自己的：

```
template<typename T>
T lexical_cast<T>(const std::string & str)
{
    std::istringstream buffer(str);
    buffer.exceptions(std::istringstream::failbit);
    T retval;
    buffer >> retval;
    return retval;
} 
```

对于不支持 iostream io 的值类型，您可以具体说明这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:00:16.797

感谢您的回答，我在问题的评论中找到了解决方案：

```
std::istringstream convertor;

convertor.str("16");
convertor >> myint;
if (convertor.fail())
    std::cerr << "error" << std::endl; 
```

或者，抛出异常：

```
std::istringstream convertor;

convertor.exceptions(std::istringstream::failbit);
convertor.str("16");
convertor >> myint; 
```

# javascript - 使用 jquery 或 javascript 解析 cdata 中的 html

> ID：14961044
> 
> 赞同：13
> 
> 时间：2013-02-19T15:23:50.990
> 
> 标签：javascript, jquery, cdata

我得到一个看起来像这样的网站提要

```
<rss...>
    <title> some title </title>
    <content>
         <![CDATA[ <div>this tag is ignored<div> who took the cookie in the cookie jar!?  ]]>
    </content>
</rss> 
```

我需要将 cdata 的全部内容显示在 html 中。我正在使用 jquery 1.9.1，当我使用 获取内容部分时 `$(xml).find('rss content').text()`，它实际上忽略了整个`<div>this tag is ignored<div>`部分。有什么方法可以使用 javascript 或 jquery 获取 CDATA 中的所有内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:29:00.203

jQuery 可能不会将您的标记解析为 XML。尝试显式调用[$.parseXML()](http://api.jquery.com/jQuery.parseXML/)：

```
var contentText = $($.parseXML(xml)).find("rss content").text(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-06T16:14:43.470

底线：

```
xmlDoc.getElementsByTagName("content")[0].childNodes[0].nodeValue 
```

工作代码中的这个片段使用 jquery 加载 xml，然后获取第 4 次出现的内容标记（包含 CDATA）

```
var req = new AjaxRequest(); 
req.setMethod("POST"); 
...
req.loadXMLDoc(linkString, paramString);
var htmlContent = req.getResponse().responseXML.getElementsByTagName('content').item(3).childNodes[0].nodeValue; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T15:32:04.460

jQuery在从字符串解析 XML 文档方面并不是*最好的。*最好使用浏览器的原生 DOM Parser。jQuery 可以更好地处理已解析的 XML 文档；否则我相信它会尝试像 XML 一样使用它，这会产生奇怪的结果。

```
$xml = $((new DOMParser).parseFromString(xml, "text/xml")); 
```

[http://jsfiddle.net/ExplosionPIlls/2MJt9/](http://jsfiddle.net/ExplosionPIlls/2MJt9/)

编辑：基于另一个答案，`$.parseXML`可能是一个更好的选择，因为它应该与其他浏览器一起使用，但是您必须以与上述类似的方式使用它，因为结果是 XML 文档而不是 jQuery 对象。

```
$xml = $($.parseXML(xml)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-30T14:55:28.017

可以通过获取第一个 childNodes 数据来检索 jQuery 中 CDATA 中的文本：

```
!$.ajax(YOUR_URL,{
dataType: 'xml',
success: function (dataR, textStatus, jqXHR){ 
var rrsobj = $(dataR).find('rss');
if(rrsobj ){
  desc = $(rrsobj [0]).children('content');  
  if(desc)
    var txt = desc[0].childNodes[0].data; }
}}); 
```

其中 dataR 是从 YOUR_URL 读取的，而 txt 包含来自 CDATA 的信息

# c# - 如何解析像 Environment.GetCommandLineArgs() 这样的命令行参数？

> ID：14961045
> 
> 赞同：4
> 
> 时间：2013-02-19T15:23:56.573
> 
> 标签：c#, .net, regex

我正在阅读使用 COM“Windows 脚本宿主对象模型”IWshRuntimeLibrary 的快捷方式，如下所示：

```
IWshShell wsh = new WshShellClass();
IWshShortcut sc = (IWshShortcut)wsh.CreateShortcut(shortcutFile);
string arguments = sc.Arguments; 
```

这给了我快捷方式的参数，说它看起来像：

```
-a "c:\temp\a 1.txt" -b "b.exe -c \"c:\temp\c -2.txt\" -d d.txt" -e test 
```

这并不像您想象的那样是一个人为的例子......我怎样才能做与 GetCommandLineArgs 相同的事情并得到：

```
args {string[6]}
[0] = "-a"
[1] = "c:\\temp\\a 1.txt"
[2] = "-b"
[3] = "b.exe -c \"c:\\temp\\c -2.txt\" -d d.txt"
[4] = "-e"
[5] = "test" 
```

我在想正则表达式，但这超出了我的范围。

[编辑] 我更喜欢正则表达式，但我会看看提到的代码和类。

规则似乎是：

*   按空格分割，
*   除非空格在双引号 (") 内。
*   双引号内的字符串可能包含用反斜杠 (\") 转义的双引号。
*   其他反斜杠可能会单独出现，但应视为普通字符

前两个代码部分中的参数和数组将是适当的测试。

[编辑] [https://stackoverflow.com/a/749653/350188](https://stackoverflow.com/a/749653/350188)已经回答了我的问题。它调用本机系统函数并给我与 GetCommandLineArgs() 完全相同的结果：

```
string[] splitArguments = CommandLineToArgs(arguments); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:29:22.717

这没有什么棘手的。您可以使用基本的 C# 语法来检查单个字符是否解析出您需要的内容。

例如，您可以`String.IndexOf()`找到您正在寻找的特定字符。您可以使用它`String.Substring()`来提取字符串的一部分。

我已经在文章[AC# Command-Line Parser](http://www.blackbeltcoder.com/Articles/strings/a-c-command-line-parser)中发布了解析命令行的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:48:13.233

最简单和健壮的解决方案是使用解析器的一些实现，例如，[这个](http://www.codeproject.com/Articles/3111/C-NET-Command-Line-Arguments-Parser)或像[命令行解析器库这样的库](http://commandline.codeplex.com/)取决于您在应用程序中究竟需要什么。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-19T15:51:55.637

如果您只是想要像 GetCommandLineArgs 产生的数组中的参数，您可以使用 string.Split：

```
string[] args = arguments.Split(' '); 
```

# java - 如何测试基于 ajax 的网站？

> ID：14961046
> 
> 赞同：2
> 
> 时间：2013-02-19T15:23:59.790
> 
> 标签：java, javascript, unit-testing, selenium

我想为我的网站创建基于 ajax 的自动化测试。是使用 Spring MVC/Java 开发的。我对 Selenium 有一些了解，并且我还使用 Selnium 创建了一些测试。

这里的问题是，由于站点纯粹基于 ajax，因此很难通过 Selenium 跟踪/测试后端 Java 代码中的所有内容。

我怎样才能让这样的项目生活更轻松？我可以使用 javascript 创建测试并从后端通过 Selenium 运行吗？

一些问题——通过ajax调用加载了很多弹出窗口，我需要点击弹出窗口上的按钮......错误：无法点击隐藏按钮——很多表格通过ajax调用在内部加载页面明智的数据......遍历下一页从 Java 的 selenium 代码很难管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:36:43.767

Selenium 提供了多种语言的网络驱动程序来从后端执行这些测试。[http://docs.seleniumhq.org/projects/webdriver/](http://docs.seleniumhq.org/projects/webdriver/)

或者：

查看[http://qunitjs.com/](http://qunitjs.com/)我最喜欢的 javascript 测试框架，id 建议 2 你

# razor - Razor，用于 ICollection 属性的 TextBoxFor

> ID：14961047
> 
> 赞同：1
> 
> 时间：2013-02-19T15:24:03.563
> 
> 标签：razor, asp.net-mvc-4

//产品

```
public class Product
{
    [Key]
    public int ID {get; set;}
    public string PK {get; set;}

    [Required(ErrorMessage="Category is required field.")]
    public int CategoryID { get; set; }

    [Required]
    public string Title {get; set;}

    public virtual ICollection<Pricing> Pricing { get; set; }
} 
```

// 价钱

```
public class Pricing
{
    [Key]
    public int ID {get; set;}
    public int ProductID {get; set;}
    public decimal Price {get; set;}
    public int OrderQty {get; set;}
    public string PK { get; set; }
} 
```

我喜欢上面的实体表，我想在更新产品页面中**为 ICollection 绘制 5 个文本框。**但我不知道，我该怎么做。

```
@model BrownieDAL.Entities.Product

<th> Price / Order Qty</th>
<td>
    @{int priceCnt = 0;}
    @foreach(var price in Model.Pricing){
        priceCnt++;
        @Html.TextBoxFor(model => price.Price)
        @Html.TextBoxFor(model => price.OrderQty)
        <br />
    }
    @if (priceCnt < 5)
    {
        // ??? 
        @Html.TextBoxFor(Model.Pricing => Model.Pricing.Price)
        priceCnt++;
    }
</td> 
```

当我尝试使用“@Html.TextBoxFor(Model.Pricing => Model.Pricing.Price)”时，我收到一条错误消息：

```
Error   1   'System.Collections.Generic.ICollection<PJ.Entities.Pricing>' does not contain a definition for 'Price' and no extension method 'Price' accepting a first argument of type 'System.Collections.Generic.ICollection<PJ.Entities.Pricing>' could be found (are you missing a using directive or an assembly reference?) 
```

有人知道，我应该如何为 ICollection<> 属性绘制文本框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:33:10.057

我建议您使用编辑器模板。

因此，只需在控制器中初始化`Pricing`集合，然后将其完成为 5 个元素：

```
model.Pricing = ... go get the pricing collection from wherever you were getting it previously
int count = model.Pricing.Count();
if (count < 5)
{
    // we have less than 5 elements in the collection => let's complete it
    // with empty Pricing elements:
    var emptyItems = Enumerable.Range(1, 5 - count).Select(x => new Pricing());
    model.Pricing = model.Pricing.Concat(emptyItems).ToList();
}
return View(model); 
```

然后在您的视图中简单地：

```
@model BrownieDAL.Entities.Product
<table>
    <thead>
        <tr>
            <th>Price / Order Qty</th>
        </tr>
    </thead>
    <tbody>
        @Html.EditorFor(model => model.Pricing)
    </tbody>
</table> 
```

然后简单地为`Pricing`模型定义一个自定义编辑器模板（`~/Views/Shared/EditorTemplates/Pricing.cshtml`）：

```
@model BrownieDAL.Entities.Pricing
<tr>
    <td>
        @Html.TextBoxFor(model => model.Price)
        @Html.TextBoxFor(model => model.OrderQty)
    </td>
</tr> 
```

很简单。无需担心循环，无需担心索引，ASP.NET MVC 框架会处理所有事情。您需要做的就是简单地遵循内置的约定。

# php - 在字符串中一次找到一个模式的每个出现

> ID：14961056
> 
> 赞同：0
> 
> 时间：2013-02-19T15:24:14.777
> 
> 标签：php, string, file, preg-match

我想找到一个 preg_match 结果并检索信息。在那场比赛之后，我需要找到在下一场比赛之前有多少个 hmtl 标记“a”。我将那些 html 'A' 标记和 preg_match 的数量放在一个数组中。所有这些都在一个文件中，我不能修改该文件。

这样做的目的是识别每个 html 'a' 标签并给他一个类别（匹配）。唯一的问题是我验证文件的每一行并且我想查看一个简单的字符串。这是我的代码和文件。

功能

```
function retrieveCatAndNumber($filepath){

$nbTag = array();
$lines = file($filepath);

//print_r($lines);
$i = 0;
$countA = 0;
$lineNumber = 1;
$nbLines = count($lines);

// Loop through our array, show HTML source as HTML source; and line numbers too.
foreach ($lines as $line_num => $line) {

 // echo htmlspecialchars($line)."<br>";
  if(preg_match("/<a(.*?)<\/a>/s", $line, $matcheA)){
    $countA++;
  }//if A
 // echo "/<td class=pp bgcolor='#0051AB'>(.*?)<\/td>";
 $result = preg_match_all("/<td class=pp bgcolor='#0051AB'>(.*?)<\/td>/s", trim($line), $matcheTD);

  if($result == 1){
    //echo $result;
    $prev = $i - 1;
     //echo htmlspecialchars($line)."<BR>";
     $nbTag[$i][0] = preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $matcheTD[0]);                                   

             print_r($matcheTD);
    echo "<br>";
     if($i != 0){
       $nbTag[$prev][1] = $countA;
       $countA = 0;
     }

     $i++;
  }//if TD

  if($lineNumber == $nbLines){
    $nbTag[$i - 1][1] = $countA;
    $countA = 0;
  }
  $lineNumber++;
}//Foreach line of file

echo "\t\t The category and number of links : ok<BR>";

return $nbTag; 
```

}//检索NbTag

文件内容

```
<is_links><!-- !!!!!! Project General Info !!!!!! --> <tr> <td class=pp bgcolor='#0051AB'>��Project Info</td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif">� <?php $filename = './'.$mnem.'_proj_def.htm'; if ( file_exists ($filename) ){ ?> <a href="http://caevgl03.caecorp.cae.com/projects/<?= $mnem ?>/<?= $filename ?>">Project Definition</a> <?php } else { ?> <font color="#A0A0A0">Project Definition</font> <?php } ?> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif">� <?php $filename = './'.$mnem.'_kickoff.pdf'; if ( file_exists ($filename) ) { ?> <a href="http://caevgl03.caecorp.cae.com/projects/<?= $mnem ?>/<?= $filename ?>">Project Kickoff</a> <?php } else { ?> <font color="#A0A0A0">Project Kickoff</font> <?php } ?> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/projects/pages_v1/logbook/logbook.is?mnem=<?= $mnem ?>">Logbook</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/projects/pages_v1/schedule/schedule.is?mnem=<?= $mnem ?>">Site Schedule</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/projects/pages_v1/assignee/assignee.is?mnem=<?=$mnem?>">Assignee</a> </td> </tr> <tr> <td class=pp> <img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> <a HREF=http://wss.cae.ca/montreal/departments/PMO/PM/2TLM/default.aspx> Sharepoint Site</A></TD></TR> <!-- !!!!!! IS Links !!!!!! --> <tr> <td class=pp bgcolor='#0051AB'> I/S Links</td> </tr> <TR><TD class='pp'><A HREF=../../usr2/html/proj_docs/2tlm/ARJ21_FFS_update_S0W.pdf>Project ARJ21_FFS_update_S0W</A></TD></TR><TR><TD class='pp'> <TR><TD class='pp'><A HREF=../../usr2/html/proj_docs/2tlm/ARJ21_Update_Schedule_rev4_2Oct2012.pdf>ARJ21_Update_Schedule_rev4_2Oct2012</A></TD></TR> <TR><TD class='pp'><A HREF=../../usr2/html/proj_docs/2tlm/2T3F_COMAC_ILC_MOC8_PedestalUpdate_PM_KO.pdf>2T3F COMAC ILC MOC8 PedestalUpdate PM KO</A></TD></TR> <TR><TD class='pp'><A HREF=../../usr2/html/proj_docs/2tlm/FAA_evaluation_S0W.pdf>FAA evaluation S0W</A></TD></TR> <!-- !!!!!! Technical Info !!!!!! --> <tr> <td class=pp bgcolor='#0051AB'>��Technical Info</td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="doors://caedrs01.cae.ca:36691/?version=2&prodID=0&urn=urn:telelogic::1-49ac26073662317a-F-000078c5">Requirements </a> </td> <td class=pp> <TR><TD class='pp'><A HREF=/proj_docs/2tlm/BP1122_R2.pdf>Tech Spec</A></TD></TR> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif">� <?php $filename = './'.$mnem.'_tpd.pdf'; if ( file_exists ($filename) ) { ?> <TR><TD class='pp'><A HREF=/proj_docs/2tlm/BP1122_R2.pdf>Tech Spec</A></TD></TR> <font color="#A0A0A0">Tech Spec</font> <?php } ?> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif">� <?php $filename = './'.$mnem.'_sbdr.pdf'; if ( file_exists ($filename) ) { ?> <a href="http://caevgl03.caecorp.cae.com/projects/<?= $mnem ?>/<?= $filename ?>">SBDR</a> <?php } else { ?> <font color="#A0A0A0">SBDR</font> <?php } ?> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif">� <?php $filename = './'.$mnem.'_pdr.pdf'; if ( file_exists ($filename) ) { ?> <a href="http://caevgl03.caecorp.cae.com/projects/<?= $mnem ?>/<?= $filename?>">PDR</a> <?php } else { ?> <font color="#A0A0A0">PDR</font> <?php } ?> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif">� <?php $filename = './'.$mnem.'_cdr.pdf'; if ( file_exists ($filename) ) { ?> <a href="http://caevgl03.caecorp.cae.com/projects/<?= $mnem?>/<?= $filename ?>">CDR</a> <?php } else { ?> <font color="#A0A0A0">CDR</font> <?php } ?> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://wss.cae.ca/sites/cpm/System%20Engineering/Public/Forms/AllItems.aspx?RootFolder=%2fsites%2fcpm%2fSystem%20Engineering%2fPublic%2fArchitectures&FolderCTID=&View=%7b5136364F%2d69EF%2d4EC4%2dB754%2d9C4D8C60D8C8%7d/Projects/<?=$mnem?>">Architecture Dwg</a> </td> </tr> <!-- !!!!!! Test And Eval !!!!!! --> <tr> <td class=pp bgcolor='#0051AB'>��Test & Eval</td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/elog/elog.asp?PROJECT=<?=$mnem?>">eLOG</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://testeval.cae.ca/d75/eqtg2/eqtg2_main.asp?PROJ=<?=$mnem?>">eQTG</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/edocs/edocs.asp?PROJECT=<?=$mnem?>&DOC_TYPE=ATM">eATM</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/edocs/edocs.asp?PROJECT=<?=$mnem?>&DOC_TYPE=ITM">eITM</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/edocs/edocs.asp?PROJECT=<?=$mnem?>&DOC_TYPE=OTM">eOTM</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/edocs/edocs.asp?PROJECT=<?=$mnem?>&DOC_TYPE=MCD">eMCD</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://testeval.cae.ca/d75/edocs/etp_main.asp?PROJECT=<?=$mnem?>&TEST_PHASE=IHA">eTP</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/edocs/edocs.asp?PROJECT=<?=$mnem?>&DOC_TYPE=CHKL">eCHKL</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://testeval.cae.ca/d75/First_Flight/prerequ.asp?mnem=<?= $mnem ?>">FF Pre-requiFites</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com:8080/esnag/">eSnag</a> </td> </tr> <!-- !!!!!! Quick Links !!!!!! --> <tr> <td class=pp bgcolor='#0051AB'>��Quick Links</td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://web.cae.ca/dept-sites/dept48/Life_Cycle/Version%201.6/CAELC.htm">ISO</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/templates/Site_Etiquette.ppt">Site Etiquette</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://wss.cae.ca/montreal/departments/ProdAndTech/SIM%20XX1%20Support/Forms/AllItems.aspx?RootFolder=%2fmontreal%2fdepartments%2fProdAndTech%2fSIM%20XX1%20Support%2fCAELIB%20User%20Guides&FolderCTID=&View=%7bBFB10722%2d49AE%2d41DA%2dB20B%2d8A5899366423%7d">CAELib</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://d21app01.cae.ca/webfiles/scm/StarTeamWebPage/index.htm">Starteam Info</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://step1.cae.ca/kb_asp/step1_edt/step1_kb.htm">STEP 1</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://d21app01.cae.ca/webfiles/matrixxweb/mtrx_home.html">MATRIXx</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/templates/Site_code.doc">Field Site Code of ethics</a> </td> </tr> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/templates/Cultures.doc">Customer Etiquette</a> </td> </TR> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com">I/S Home</a> </td> </TR> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://caevgl03.caecorp.cae.com/dept62/pm/html/index.html">PM Home</a> </td> </TR> <tr> <td class=pp> �&lt;img src="http://caevgl03.caecorp.cae.com/pc/images/bluedot.gif"> �&lt;a href="http://web.cae.ca">CAE Web</a> </td> </TR> </is_links> 
```

我得到的结果（`$nbTag`数组）我只得到一个！

```
Array ( [0] => ��Project Info [1] => ��Project Info ) 
```

感谢您的建议，请随时问我任何问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:30:27.393

不要尝试使用正则表达式解析 html 文件！使用库来解析 html。

You could use [http://www.php.net/manual/en/domdocument.loadhtml.php](http://www.php.net/manual/en/domdocument.loadhtml.php) or some other library...

# android - 在 ThreadPoolExecutor 中运行 AsyncTask<> 效率高吗？

> ID：14961063
> 
> 赞同：0
> 
> 时间：2013-02-19T15:24:43.787
> 
> 标签：android, android-asynctask, threadpoolexecutor

我想实现这样的任务：在后台（当应用程序在后台时）为用户寻找新数据并发出通知。我必须定期执行此操作（每 2-3 秒）。有不同的数据，因此我为此使用不同的方法（FetchImages、FetchMessages、FetchNewConversations 等）据我所知，在 Android 4 中，所有网络操作都必须在背景线程，所以我将所有这些操作实现为从 AsyncTask 继承的类，然后调用它们我只写`FetchImages.execute ()`但是活动只执行一次，所以我决定通过 `ScheduledExecutorService`这样的方式调用它们：

```
.scheduleAtFixedRate(new Runnable() {
  public void run() 
   {
  FetchImages.execute(); //...
    } 
```

那么问题是这是一个好主意还是存在更好，更有效的解决方案？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:26:06.737

由于`ScheduledExecutorService`已经使用了后台线程，因此您无需通过添加*另一个*后台线程`AsyncTask`。事实上，您的代码应该会崩溃，因为您只能`AsyncTask`在主应用程序线程上创建一个。

# batch-file - 我应该如何执行此文件/文件夹分发任务；SSIS 还是命令脚本？

> ID：14961064
> 
> 赞同：3
> 
> 时间：2013-02-19T15:24:51.123
> 
> 标签：batch-file, ssis

我需要执行以下概述的任务，但不确定如何继续。使用 Windows Server 2003，我可以在命令脚本或 SSIS 中的脚本任务中执行此操作吗？我一直在使用 SSIS 2005 并且知道有一个文件系统任务，但我以前从未使用过它。

*   我在本地有一个文件'target.file'。
*   网络服务器上有一个“目标”文件夹。
*   “目标”下有数百个文件夹。
*   其中一些文件夹下有“备份”文件夹。
*   我需要将“target.file”复制到“target”文件夹下的那些文件夹中。
    *   但只有在已经存在“target.file”时才复制/替换。
    *   如果“target.file”存在，如果备份文件夹存在，则将文件复制并替换到备份文件夹。
    *   如果没有，请先创建备份文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:54:39.737

## 使用 C# 和 VB.NET 在 SSIS 2012 中编写的示例包

这是一个用 SSIS 2012 编写的示例包，它使用脚本任务完成您正在寻找的工作。您不需要使用 SSIS。您甚至可以使用简单的 C# 或 VB.NET 控制台应用程序来做到这一点，但 SSIS 提供了记录信息和安排作业的灵活性。

### 文件夹结构（初始）

假设文件夹的结构如下所示：

有一个您要复制的源文件。

```
Source
    |- Sample_File.txt 
```

这是目标文件夹结构。

```
Target
    |- Target_1
    |    |- Archive
    |    |- Sample_File.txt
    |- Target_2
    |- Target_3
        |- Sample_File.txt 
```

创建一个 SSIS 包并创建文件夹变量：

```
Variable name       Data type  Value
------------------ ---------- ----------------------
Backup_FolderName  String      Archive
Source_FileName    String      Sample_File.txt
Source_FilePath    String
Source_Folder      String      D:\SSIS\Files\Source\
Target_Folder      String      D:\SSIS\Files\Target\ 
```

选择变量*`Source_FilePath`*并单击**`F4`**以查看属性。将属性更改*`EvaluateAsExpression`*为 true。单击属性旁边的省略号按钮*`Expression`*以打开*Expression Builder*。将表达式设置为`@[User::Source_Folder] + "\\" + @[User::Source_FileName]`。

您可以只有一个变量来存储源文件路径。我通常更喜欢将源文件夹和文件名分开。

将脚本任务拖放到控制流选项卡上。双击脚本任务以打开脚本任务编辑器。在脚本标签页，点击旁边的省略号按钮`ReadOnlyVariables`，选择以下变量，因为我们将在脚本任务代码中使用这些变量。

```
User::Source_FilePath
User::Target_Folder
User::Backup_FolderName 
```

单击*Edit Script...*按钮并输入代码，如下所示。

### C# 中的脚本任务代码仅适用于 SSIS 2008 及更高版本：

脚本任务代码执行以下操作：

*   它将检查源文件路径是否有效。如果无效，它将抛出一条消息并退出该过程。

*   它将检查目标文件夹是否有效。如果无效，它将抛出一条消息并退出该过程。

*   如果源文件路径和目标文件夹有效，则逻辑将遍历目标文件夹中子文件夹中源文件名的所有匹配位置。如果有匹配的文件，它会将目标文件复制到备份文件夹，然后用源文件覆盖目标文件。

*   脚本任务将发出适当的信息，以便您可以在 SSIS 2012 中的 SQL Server Data Tools (SSDT) 或 SSIS 2005 - SSIS 2008 R2 中的商业智能开发工作室 (BIDS) 上的进度/执行结果选项卡中跟踪状态。

    # 区域命名空间

    使用系统；使用 System.Data；使用 Microsoft.SqlServer.Dts.Runtime；使用 System.Windows.Forms；使用 System.IO；

    # 端区

    命名空间 ST_523853dfbc0d4123be43383671f8a6c6 { [Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute] 公共部分类 ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase { public void Main() { try { bool fireAgain = false; 字符串备份文件夹 = string.Empty; 字符串备份文件路径 = string.Empty;

    ```
     string sourcFilePath = Dts.Variables["User::Source_FilePath"].Value.ToString();
                string targetFolder = Dts.Variables["User::Target_Folder"].Value.ToString();
                string backupFolderName = Dts.Variables["User::Backup_FolderName"].Value.ToString();

                if (String.IsNullOrEmpty(sourcFilePath) || !File.Exists(sourcFilePath))
                {
                    // Check if a valid source file path was specified on the package variable
                    Dts.Events.FireError(101, "Source path error", String.Format("You need to set a valid source file path in the package variable 'Source_FilePath'. Invalid path: '{0}'", sourcFilePath), string.Empty, 0);
                    Dts.TaskResult = (int)ScriptResults.Failure;
                }
                else if (String.IsNullOrEmpty(targetFolder) || !Directory.Exists(targetFolder))
                {
                    // Check if a valid target folder was specified on the package variable
                    Dts.Events.FireError(102, "Target folder error", String.Format("You need to set a valid target folder location in the package variable 'Target_Folder'. Invalid folder: '{0}'", targetFolder), string.Empty, 0);
                    Dts.TaskResult = (int)ScriptResults.Failure;
                }
                else
                {
                    FileInfo sourceInfo = new FileInfo(sourcFilePath);

                    // Loop through each file that matches the name of the source file
                    foreach (string targetFilePath in Directory.EnumerateFiles(targetFolder, sourceInfo.Name, SearchOption.AllDirectories))
                    {
                        FileInfo targetInfo = new FileInfo(targetFilePath);
                        backupFolder = Path.Combine(targetInfo.Directory.FullName, backupFolderName);
                        backupFilePath = Path.Combine(backupFolder, backupFolderName);

                        // If the backup folder does not exist in the folder within root target folder, create the backup folder.
                        if (!Directory.Exists(backupFolder))
                        {
                            Directory.CreateDirectory(backupFolder);
                            Dts.Events.FireInformation(401, "Backup folder created", String.Format("Backup folder '{0}' was created.", backupFolder), string.Empty, 0, ref fireAgain);
                        }

                        // Archive the target file to the backup folder.
                        File.Copy(targetFilePath, backupFilePath, true);
                        Dts.Events.FireInformation(402, "Target file archived", String.Format("Target file '{0}' was archived to the backup folder '{1}'.", targetFilePath, backupFolder), string.Empty, 0, ref fireAgain);

                        // Overwrite the target file with the source file.
                        File.Copy(sourcFilePath, targetFilePath, true);
                        Dts.Events.FireInformation(403, "Target file overwritten", String.Format("Target file '{0}' was overwritten with the source file '{1}'.", sourcFilePath, targetFilePath), string.Empty, 0, ref fireAgain);
                    }

                    Dts.TaskResult = (int)ScriptResults.Success;
                }
            }
            catch (Exception ex)
            {
                Dts.Events.FireError(100, "Unhandled exception", ex.ToString(), string.Empty, 0);
            }
        }

        #region ScriptResults declaration
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion
    } 
    ```

    }

### SSIS 2005 及更高版本的 VB.NET 中的脚本任务代码：

```
#Region "Imports"
Imports System
Imports System.Data
Imports System.Math
Imports System.IO
Imports Microsoft.SqlServer.Dts.Runtime
#End Region

<Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute()> _
<System.CLSCompliantAttribute(False)> _
Partial Public Class ScriptMain
    Inherits Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase

    Public Sub Main()

        Try
            Dim fireAgain As Boolean = False
            Dim backupFolder As String = String.Empty
            Dim backupFilePath As String = String.Empty

            Dim sourcFilePath As String = Dts.Variables("User::Source_FilePath").Value.ToString()
            Dim targetFolder As String = Dts.Variables("User::Target_Folder").Value.ToString()
            Dim backupFolderName As String = Dts.Variables("User::Backup_FolderName").Value.ToString()

            If String.IsNullOrEmpty(sourcFilePath) OrElse Not File.Exists(sourcFilePath) Then
                ' Check if a valid source file path was specified on the package variable
                Dts.Events.FireError(101, "Source path error", String.Format("You need to set a valid source file path in the package variable 'Source_FilePath'. Invalid path: '{0}'", sourcFilePath), String.Empty, 0)
                Dts.TaskResult = ScriptResults.Failure

            ElseIf String.IsNullOrEmpty(targetFolder) OrElse Not Directory.Exists(targetFolder) Then
                ' Check if a valid target folder was specified on the package variable
                Dts.Events.FireError(102, "Target folder error", String.Format("You need to set a valid target folder location in the package variable 'Target_Folder'. Invalid folder: '{0}'", targetFolder), String.Empty, 0)
                Dts.TaskResult = ScriptResults.Failure

            Else
                Dim sourceInfo As FileInfo = New FileInfo(sourcFilePath)

                ' Loop through each file that matches the name of the source file
                For Each targetFilePath As String In Directory.EnumerateFiles(targetFolder, sourceInfo.Name, SearchOption.AllDirectories)

                    Dim targetInfo As FileInfo = New FileInfo(targetFilePath)
                    backupFolder = Path.Combine(targetInfo.Directory.FullName, backupFolderName)
                    backupFilePath = Path.Combine(backupFolder, backupFolderName)

                    ' If the backup folder does not exist in the folder within root target folder, create the backup folder.
                    If Not Directory.Exists(backupFolder) Then
                        Directory.CreateDirectory(backupFolder)
                        Dts.Events.FireInformation(401, "Backup folder created", String.Format("Backup folder '{0}' was created.", backupFolder), String.Empty, 0, fireAgain)
                    End If

                    ' Archive the target file to the backup folder.
                    File.Copy(targetFilePath, backupFilePath, True)
                    Dts.Events.FireInformation(402, "Target file archived", String.Format("Target file '{0}' was archived to the backup folder '{1}'.", targetFilePath, backupFolder), String.Empty, 0, fireAgain)

                    ' Overwrite the target file with the source file.
                    File.Copy(sourcFilePath, targetFilePath, True)
                    Dts.Events.FireInformation(403, "Target file overwritten", String.Format("Target file '{0}' was overwritten with the source file '{1}'.", sourcFilePath, targetFilePath), String.Empty, 0, fireAgain)

                Next

                Dts.TaskResult = ScriptResults.Success

            End If

        Catch ex As Exception
            Dts.Events.FireError(100, "Unhandled exception", ex.ToString(), String.Empty, 0)
            Dts.TaskResult = ScriptResults.Failure
        End Try

    End Sub

#Region "ScriptResults declaration"
    Enum ScriptResults
        Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success
        Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
    End Enum

#End Region

End Class 
```

当提供了无效的源文件路径时，包将抛出以下错误消息：

![源文件错误](../Images/6428cef2c203ca4c048e267274af5183.png)

当提供无效的目标文件夹时，包将抛出以下错误消息：

![目标文件错误](../Images/b0b98bc01080cd5725d8085c5de21148.png)

当源位置和目标位置有效时，包将成功执行。在这个例子中，

*   下有一个备份文件夹*`Target_1`*，因此没有创建文件夹，但文件已复制到备份文件夹。
*   中没有匹配的文件*`Target_2`*，因此未采取任何措施。
*   备份文件夹在 中创建*`Target_3`*，文件被复制到目标位置，然后被源文件覆盖。

![成功的](../Images/d49a4876786d2cbb5cfe7d11bd3f71c3.png)

### 文件夹结构（最终）

包执行后目标位置如下图所示。

```
Target
    |- Target_1
    |    |- Archive
    |        |- Sample_File.txt
    |    |- Sample_File.txt
    |- Target_2
    |- Target_3
        |- Archive
            |- Sample_File.txt
        |- Sample_File.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:13:38.160

显然@Siva 为回答您的问题[做了大量工作。](https://stackoverflow.com/a/14963015/297408)但是，我想知道以下内容是否会使工作变得更糟（尽管很可能我没有花这么长时间来想出这个脚本）：

```
@ECHO OFF

SET "srcname=target.file"
SET "srcpath=D:\path\to\source"
SET "tgtpath=\\remotehost\shared\folder"
SET "bakname=Backup"

FOR /D %%D IN ("%tgtpath%\*") DO (
  IF EXIST "%%D\%srcname%" (
    IF NOT EXIST "%%D\%bakname%" MKDIR "%%D\%bakname%"
    COPY /Y "%%D\%srcname%" "%%D\%bakname%"
    COPY /Y "%srcpath%\%srcname%" "%%D"
  )
) 
```

# cocos2d-iphone - Cocos2D -[CCSpriteFrame delayUnits]：无法识别的选择器发送到实例

> ID：14961076
> 
> 赞同：0
> 
> 时间：2013-02-19T15:25:32.470
> 
> 标签：cocos2d-iphone

我遵循了在线指南（[如何使用 Cocos2D 创建鼹鼠游戏](http://www.raywenderlich.com/2593/how-to-create-a-mole-whacking-game-with-cocos2d-part-2)），但我的应用程序在运行时崩溃并出现此错误：

```
2013-02-19 16:03:23.028 WhackAMole[3616:907] -[CCSpriteFrame
delayUnits]: unrecognized selector sent to instance 0x1f548ce0 
```

如果我添加一个异常断点，Xcode 将暂停此函数（Cocos2D）中的代码执行：

```
-(id) initWithAnimationFrames:(NSArray*)arrayOfAnimationFrames delayPerUnit:(float)delayPerUnit loops:(NSUInteger)loops
{
    if( ( self=[super init]) )
    {
        delayPerUnit_ = delayPerUnit;
        loops_ = loops;

        self.frames = [NSMutableArray arrayWithArray:arrayOfAnimationFrames];

        for( CCAnimationFrame *animFrame in frames_ )
            totalDelayUnits_ += animFrame.delayUnits;  //Crash here
    }
    return self;
} 
```

顺便说一句，这是代码：

```
#import "GameScene.h"

@implementation GameScene

+ (id)scene
{
    // the usual ... create the scene and add our layer straight to it
    CCScene *scene = [CCScene node];
    CCLayer* layer = [GameScene node];
    [scene addChild:layer];
    return scene;
}

#pragma mark - Life Cycle

- (id)init
{
    // Determine names of sprite sheets and plists to load
    NSString *bgSheet = @"background.pvr.ccz";
    NSString *bgPlist = @"background.plist";
    NSString *fgSheet = @"foreground.pvr.ccz";
    NSString *fgPlist = @"foreground.plist";
    NSString *sSheet = @"sprites.pvr.ccz";
    NSString *sPlist = @"sprites.plist";
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        bgSheet = @"background-hd.pvr.ccz";
        bgPlist = @"background-hd.plist";
        fgSheet = @"foreground-hd.pvr.ccz";
        fgPlist = @"foreground-hd.plist";
        sSheet = @"sprites-hd.pvr.ccz";
        sPlist = @"sprites-hd.plist";
    }

    if ((self = [super init]))
    {
        [self setScreenSaverEnabled:NO];     

        // Load background and foreground
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:bgPlist];
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:fgPlist];

        // Add background
        CGSize winSize = [CCDirector sharedDirector].winSize;
        CCSprite *dirt = [CCSprite spriteWithSpriteFrameName:@"bg_dirt.png"];
        dirt.scale = 2.0;
        dirt.position = ccp(winSize.width/2, winSize.height/2);
        [self addChild:dirt z:-2];

        // Add foreground
        CCSprite *lower = [CCSprite spriteWithSpriteFrameName:@"grass_lower.png"];
        lower.anchorPoint = ccp(0.5, 1);
        lower.position = ccp(winSize.width/2, winSize.height/2);
        [self addChild:lower z:1];

        CCSprite *upper = [CCSprite spriteWithSpriteFrameName:@"grass_upper.png"];
        upper.anchorPoint = ccp(0.5, 0);
        upper.position = ccp(winSize.width/2, winSize.height/2);
        [self addChild:upper z:-1];

        CCSpriteBatchNode *spriteNode = [CCSpriteBatchNode batchNodeWithFile:sSheet];
        [self addChild:spriteNode z:0];
        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:sPlist];

        moles = [[NSMutableArray alloc] init];

        CCSprite *mole1 = [CCSprite spriteWithSpriteFrameName:@"mole_1.png"];
        mole1.position = CGPointMake(85, 85);
        [spriteNode addChild:mole1];
        [moles addObject:mole1];

        CCSprite *mole2 = [CCSprite spriteWithSpriteFrameName:@"mole_1.png"];
        mole2.position = CGPointMake(240, 85);
        [spriteNode addChild:mole2];
        [moles addObject:mole2];

        CCSprite *mole3 = [CCSprite spriteWithSpriteFrameName:@"mole_1.png"];
        mole3.position = CGPointMake(395, 85);
        [spriteNode addChild:mole3];
        [moles addObject:mole3];

        [self schedule:@selector(tryPopMoles:) interval:0.5];

        laughAnim = [self animationFromPlist:@"laughAnim" delay:0.1];
        hitAnim = [self animationFromPlist:@"hitAnim" delay:0.02];
        [[CCAnimationCache sharedAnimationCache] addAnimation:laughAnim name:@"laughAnim"];
        [[CCAnimationCache sharedAnimationCache] addAnimation:hitAnim name:@"hitAnim"];
    }

    return self;
}

-(void) dealloc
{
    [moles release];
    moles = nil;

    [super dealloc];
}

#pragma mark - Mole Managment

- (void)tryPopMoles:(ccTime)dt
{
    for (CCSprite *mole in moles)
    {
        if (arc4random() % 3 == 0)
        {
            if (mole.numberOfRunningActions == 0)
            {
                [self popMole:mole];
            }
        }
    }
}

- (void) popMole:(CCSprite *)mole
{
    CCMoveBy *moveUp = [CCMoveBy actionWithDuration:0.2 position:CGPointMake(0, mole.contentSize.height)];
    CCEaseInOut *easeMoveUp = [CCEaseInOut actionWithAction:moveUp rate:3.0];
    CCAction *easeMoveDown = [easeMoveUp reverse];
    CCAnimate *laugh = [CCAnimate actionWithAnimation:laughAnim];
    laughAnim.restoreOriginalFrame = YES;

    [mole runAction:[CCSequence actions:easeMoveUp, laugh, easeMoveDown, nil]];
}

- (CCAnimation *)animationFromPlist:(NSString *)animPlist delay:(float)delay
{

    //NSString *plistPath = [[NSBundle mainBundle] pathForResource:animPlist ofType:@"plist"];
    //NSArray *animImages = [NSArray arrayWithContentsOfFile:plistPath];
    NSMutableArray *animFrames = [NSMutableArray array];
    /*
    for(NSString *animImage in animImages)
    {        
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:animImage]];
    }
    */

    if ([animPlist isEqual: @"hitAnim"])
    {
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump1.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump2.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump3.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump4.png"]];

        return [CCAnimation animationWithAnimationFrames:animFrames delayPerUnit:delay loops:6];
    }

    else
    {
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh1.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh2.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh3.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh2.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh3.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh1.png"]];

        return [CCAnimation animationWithAnimationFrames:animFrames delayPerUnit:delay loops:6];
    }
}

#pragma mark - Misc

-(void) setScreenSaverEnabled:(bool)enabled
{
    UIApplication *thisApp = [UIApplication sharedApplication];
    thisApp.idleTimerDisabled = !enabled;
}

@end 
```

有人能帮我吗？

提前致谢...

**解决了**

而不是使用：`return [CCAnimation animationWithAnimationFrames:animFrames delayPerUnit:delay loops:6];`

```
 NSMutableArray *animFrames = [NSMutableArray array];

    if ([animPlist isEqual: @"hitAnim"])
    {
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump1.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump2.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump3.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_thump4.png"]];

        return [CCAnimation animationWithAnimationFrames:animFrames delayPerUnit:delay loops:6];
    }

    else
    {
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh1.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh2.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh3.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh2.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh3.png"]];
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"mole_laugh1.png"]];

        return [CCAnimation animationWithAnimationFrames:animFrames delayPerUnit:delay loops:6];
    } 
```

我决定使用：`[CCAnimation animationWithSpriteFrames:animFrames delay:delay]`

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:animPlist ofType:@"plist"];
    NSArray *animImages = [NSArray arrayWithContentsOfFile:plistPath];
    NSMutableArray *animFrames = [NSMutableArray array];

    for(NSString *animImage in animImages)
    {        
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:animImage]];
    }

    return [CCAnimation animationWithSpriteFrames:animFrames delay:delay]; //Here's the
                                                                           //main
                                                                           //difference 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:37:13.763

`arrayOfAnimationFrames`至少包含一个对象，`CCSpriteFrame`但它应该只包含`CCAnimationFrame`对象。

由于您没有显示您填写的代码，`arrayOfAnimationFrames`我无法说明为什么会发生这种情况，但您绝对应该查看该代码。这可能就像在调用中意外使用了错误的变量一样简单`addObject`。

# android - 覆盖默认软键盘

> ID：14961080
> 
> 赞同：0
> 
> 时间：2013-02-19T15:25:43.010
> 
> 标签：android, overriding, android-softkeyboard

在我的应用程序中，用户需要输入车牌（这是停车警卫的私人应用程序）。但是，默认的 Android 键盘执行此操作的效率极低。我的客户要求我覆盖默认键盘以使其更容易。

有人告诉我这是一种危险的方法，但这是一个只有 3 个人会使用的私人应用程序，因此安全风险并不那么重要。

我只需要在一个 EditText 中覆盖它，因此也欢迎使用其他方法。

如何覆盖默认键盘布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:27:47.190

> 我的客户要求我覆盖默认键盘以使其更容易。

这是不可能的。

> 我被告知这是一种危险的方法

这是一种不可能的方法。

> 我只需要在一个 EditText 中覆盖它，因此也欢迎使用其他方法。

不要使用`EditText`. 使用您自己的一组`Button`小部件和一个`TextView`.

> 如何覆盖默认键盘布局？

你不能。欢迎您编写自己的输入法编辑器（又名软键盘）。然而，*用户*必须决定使用它——你不能强加给他们。这对于您的场景可能就足够了。

# opengl - 精确控制 GLSL 中的纹理位

> ID：14961098
> 
> 赞同：9
> 
> 时间：2013-02-19T15:26:37.963
> 
> 标签：opengl, glsl, shader, bit-manipulation, textures

我正在尝试使用 OpenGL 和 GLSL 实现八叉树遍历方案，并希望将数据保存在纹理中。虽然纹理数据有多种格式可供选择（浮点数和不同大小的整数），但我很难确定是否有一种方法可以更精确地控制位，从而实现更高的效率和紧凑的存储。这可能是一个普遍的问题，不仅适用于 OpenGL 和 GLSL。

作为一个简单的玩具示例，假设我有一个包含 16 位整数的纹素。我想将两个每个 1 位的布尔值、一个 10 位整数值和一个 4 位整数值编码到这个纹素中。是否有一种技术可以在创建纹理时对其进行编码，然后在使用 GLSL 着色器对纹理进行采样时解码这些组件？

编辑：看起来我实际上正在寻找位操作技术。由于它们似乎受到支持，因此经过更多研究后我应该会没事的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:05:44.337

自 OpenGL 3 起支持 GLSL 着色器中的整数和位操作（因此存在于 DX10 类硬件上，如果这能告诉您更多信息）。所以你可以在着色器中自己做这个位维护。

但是使用整数是一回事，让它们脱离纹理是另一回事。标准的 OpenGL 纹理格式（您可能习惯于）要么直接存储浮点数（如`GL_R16F`）或标准化的定点值（如`GL_R16`，对于未启动的有效整数；）），但从它们中读取（使用`texture`，`texelFetch`或其他）将净您在着色器中浮动值，您无法轻松或可靠地从中推断出内部存储整数的原始位模式。

所以你真正需要使用的是一个整数纹理，它也需要 OpenGL 3（或者可能是`GL_EXT_texture_integer`扩展，但支持它的硬件可能无论如何都会有 GL3）。因此，对于您的纹理，您需要使用实际的整数内部格式，例如`GL_R16UI`（对于 1 分量 16 位无符号整数），以对比通常的定点格式（例如`GL_R16`，对于标准化的 [0,1]-color 16 位精度）。

然后在着色器中，您需要使用整数采样器类型，例如`usampler2D`对于无符号整数 2D 纹理（同样适用于有符号变体），以便从您的or调用`isampler...`中实际获取无符号整数：`texture``texelFetch`

中央处理器：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_R16UI, ..., GL_R, GL_UNSIGNED_SHORT, data); 
```

显卡：

```
uniform usampler2D tex;

...
uint value = texture(tex, ...).r;
bool b1 = (value&0x8000) == 0x8000, 
     b2 = (value&0x4000) == 0x4000;
uint i1 = (value>>4) & 0x3FF, 
     i2 = value & 0xF; 
```

# android - Android View 显示 Z 排序

> ID：14961099
> 
> 赞同：0
> 
> 时间：2013-02-19T15:26:48.763
> 
> 标签：android, android-view

我对android开发很陌生..

看起来 ImageView 在 VideoView 之上，因此 VideoView 不显示。这是真的？当我想显示视频视图时，我是否需要更改视图的顺序？又何时 imageView 必须显示图像？

*我遍历图像和视频列表并显示图像 x 秒，然后转到下一个元素，可能是视频或图像。*

这是我的布局：

```
<LinearLayout 
   android:id="@+id/LinearLayout01"
   android:layout_height="fill_parent"     
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:orientation="horizontal">
    <ImageView
        android:contentDescription="@raw/image"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:scaleType="fitCenter"
        android:id="@+id/imageView" />  
    <VideoView 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:scaleType="fitCenter"
        android:id="@+id/videoView" />

<!--     <SurfaceView 
          android:layout_height="fill_parent"
          android:layout_width="fill_parent"
          android:id="@+id/surface" />    -->

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:30:36.363

你的问题不是 Z 排序。你有`LinearLayout`两个视图。它设置为`horizontal`，因此它希望将它们彼此相邻绘制。但是，您使用`fill_parent`的是宽度，因此第一个视图占用了所有空间，而下一个视图从屏幕上绘制（向右）。

一个简单的解决方案是在您想要显示一个或另一个时翻转`visibility`视图的状态。我敢肯定，有更优雅的方法可以做到这一点，但这是一种简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:31:55.607

由于 imageView 和 videoView 在同一个 LinearLayout 中，所以它们彼此相邻显示；不在另一层。

我猜 VideoView 没有显示，因为您没有将任何内容链接到它。至少那是我的日食所显示的。

# java - 从 URL java 读取 JSON

> ID：14961100
> 
> 赞同：1
> 
> 时间：2013-02-19T15:26:48.640
> 
> 标签：java, json, gson, wunderground

我在解析来自 URL 的 JSON 时遇到问题。下面，是代码。

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.List;
import com.google.gson.Gson;

public class Test_Application {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub
        Gson gson = new Gson();

        String json = readUrl("http://api.wunderground.com/api/57dd9039b81a9c21/conditions/q/CA/San_Francisco.json");

        Page page = gson.fromJson(json, Page.class);

        System.out.println(page.description);
        System.out.println(page.language);
        System.out.println(page.link);
        System.out.println(page.title);

    }

    private static String readUrl(String urlString) throws Exception {
        BufferedReader reader = null;
        try {
            URL url = new URL(urlString);
            reader = new BufferedReader(new InputStreamReader(url.openStream()));
            StringBuffer buffer = new StringBuffer();
            int read;
            char[] chars = new char[1024];
            while ((read = reader.read(chars)) != -1)
                buffer.append(chars, 0, read); 

            return buffer.toString();
        } finally {
            if (reader != null)
                reader.close();
        }

    }

    static class Page {
        String title;
        String link;
        String description;
        String language;
        List<Item> items;
    }

    static class Item {
        String title;
        String link;
        String description;
    }

} 
```

输出是：

```
null
null
null
null 
```

我认为问题在于，我有一个不合适的类来读取数据。那会是正确的吗？

谢谢

**编辑**

该网站返回以下内容：

```
{
  "response": {
    "version": "0.1",
    "termsofService": "http://www.wunderground.com/weather/api/d/terms.html",
    "features": {
      "conditions": 1
    }
  },
  "current_observation": {
    "image": {
      "url": "http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png",
      "title": "Weather Underground",
      "link": "http://www.wunderground.com"
    },
    "display_location": {
      "full": "San Francisco, CA",
      "city": "San Francisco",
      "state": "CA",
      "state_name": "California",
      "country": "US",
      "country_iso3166": "US",
      "zip": "94101",
      "latitude": "37.77500916",
      "longitude": "-122.41825867",
      "elevation": "47.00000000"
    },
    "observation_location": {
      "full": "SOMA - Near Van Ness, San Francisco, California",
      "city": "SOMA - Near Van Ness, San Francisco",
      "state": "California",
      "country": "US",
      "country_iso3166": "US",
      "latitude": "37.773285",
      "longitude": "-122.417725",
      "elevation": "49 ft"
    },
    "estimated": {

    },
    "station_id": "KCASANFR58",
    "observation_time": "Last Updated on February 19, 7:08 AM PST",
    "observation_time_rfc822": "Tue, 19 Feb 2013 07:08:18 -0800",
    "observation_epoch": "1361286498",
    "local_time_rfc822": "Tue, 19 Feb 2013 07:08:31 -0800",
    "local_epoch": "1361286511",
    "local_tz_short": "PST",
    "local_tz_long": "America/Los_Angeles",
    "local_tz_offset": "-0800",
    "weather": "Mostly Cloudy",
    "temperature_string": "47.9 F (8.8 C)",
    "temp_f": 47.9,
    "temp_c": 8.8,
    "relative_humidity": "87%",
    "wind_string": "From the SW at 4.0 MPH Gusting to 13.0 MPH",
    "wind_dir": "SW",
    "wind_degrees": 225,
    "wind_mph": 4.0,
    "wind_gust_mph": "13.0",
    "wind_kph": 6.4,
    "wind_gust_kph": "20.9",
    "pressure_mb": "1012",
    "pressure_in": "29.90",
    "pressure_trend": "-",
    "dewpoint_string": "44 F (7 C)",
    "dewpoint_f": 44,
    "dewpoint_c": 7,
    "heat_index_string": "NA",
    "heat_index_f": "NA",
    "heat_index_c": "NA",
    "windchill_string": "46 F (8 C)",
    "windchill_f": "46",
    "windchill_c": "8",
    "feelslike_string": "46 F (8 C)",
    "feelslike_f": "46",
    "feelslike_c": "8",
    "visibility_mi": "10.0",
    "visibility_km": "16.1",
    "solarradiation": "",
    "UV": "0",
    "precip_1hr_string": "0.00 in ( 0 mm)",
    "precip_1hr_in": "0.00",
    "precip_1hr_metric": " 0",
    "precip_today_string": "0.02 in (1 mm)",
    "precip_today_in": "0.02",
    "precip_today_metric": "1",
    "icon": "mostlycloudy",
    "icon_url": "http://icons-ak.wxug.com/i/c/k/mostlycloudy.gif",
    "forecast_url": "http://www.wunderground.com/US/CA/San_Francisco.html",
    "history_url": "http://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=KCASANFR58",
    "ob_url": "http://www.wunderground.com/cgi-bin/findweather/getForecast?query=37.773285,-122.417725"
  }
} 
```

**更新代码**

```
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.util.List;
import com.google.gson.Gson;

public class Test_Application {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub
        Gson gson = new Gson();

        String json = readUrl("http://api.wunderground.com/api/57dd9039b81a9c21/conditions/q/CA/San_Francisco.json");

        // Page page = gson.fromJson(json, Page.class);
        Response response = gson.fromJson(json, Response.class);

        System.out.println(response.termsOfService);
        System.out.println(response.version);

    }

    private static String readUrl(String urlString) throws Exception {
        BufferedReader reader = null;
        try {
            URL url = new URL(urlString);
            reader = new BufferedReader(new InputStreamReader(url.openStream()));
            StringBuffer buffer = new StringBuffer();
            int read;
            char[] chars = new char[1024];
            while ((read = reader.read(chars)) != -1)
                buffer.append(chars, 0, read); 

            return buffer.toString();
        } finally {
            if (reader != null)
                reader.close();
        }

    }

    static class Response{
        String version;
        String termsOfService;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:47:40.193

存在 GSON 的替代方案：

*   [将 Json 转换为地图](https://stackoverflow.com/questions/443499/json-to-map)
*   [http://code.google.com/p/google-gson/issues/detail?id=45](http://code.google.com/p/google-gson/issues/detail?id=45)。

这个片段可能有助于做一个**通用**解码器：

```
Map< String, Object > decoded =
   gson.fromJson(data, new TypeToken< Map< String, Object>>() {}.getType()); 
```

以下代码是**特定**解码器的开头：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;

import com.google.gson.Gson;

public class Test_Application
{
   public static void main(
      String[] args ) throws Exception
   {
      Gson gson = new Gson();
      String json = readUrl(
         "http://api.wunderground.com/api/57dd9039b81a9c21/" +
         "conditions/q/CA/San_Francisco.json" );
      System.out.println( json );

      Map< String, Object > decoded =
         gson.fromJson(
            json,
            new TypeToken< Map< String, Object>>() {}.getType());
      System.out.println( decoded );

      Answer answer = gson.fromJson( json, Answer.class );
      System.out.println( answer.response.version );
      System.out.println( answer.response.termsofService );
      System.out.println( answer.response.features.get( "conditions" ));
      System.out.println( answer.current_observation.image );
      System.out.println( answer.current_observation.display_location );
   }

   static class Response
   {
      String                version;
      URL                   termsofService;
      Map< String, String > features;
   }

   static class Observation
   {
      Map< String, String > image;
      Map< String, String > display_location;
      // TODO: complete me
   }

   static class Location
   {
      // TODO: complete me
   }

   static class Answer
   {
      Response    response;
      Observation current_observation;
      Location    display_location;
      // TODO: complete me
   } 
```

在这种发展状态下，它返回：

```
{response={version=0.1, termsofService=http://www.wunderground.com/weather/api/d/terms.html, features={conditions=1.0}}, current_observation={image={url=http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png, title=Weather Underground, link=http://www.wunderground.com}, display_location={full=San Francisco, CA, city=San Francisco, state=CA, state_name=California, country=US, country_iso3166=US, zip=94101, latitude=37.77500916, longitude=-122.41825867, elevation=47.00000000}, observation_location={full=SOMA - Near Van Ness, San Francisco, California, city=SOMA - Near Van Ness, San Francisco, state=California, country=US, country_iso3166=US, latitude=37.773285, longitude=-122.417725, elevation=49 ft}, estimated={}, station_id=KCASANFR58, observation_time=Last Updated on February 19, 8:16 AM PST, observation_time_rfc822=Tue, 19 Feb 2013 08:16:18 -0800, observation_epoch=1361290578, local_time_rfc822=Tue, 19 Feb 2013 08:16:18 -0800, local_epoch=1361290578, local_tz_short=PST, local_tz_long=America/Los_Angeles, local_tz_offset=-0800, weather=Mostly Cloudy, temperature_string=48.7 F (9.3 C), temp_f=48.7, temp_c=9.3, relative_humidity=83%, wind_string=From the ESE at 1.0 MPH, wind_dir=ESE, wind_degrees=109.0, wind_mph=1.0, wind_gust_mph=0.0, wind_kph=1.6, wind_gust_kph=0.0, pressure_mb=1012, pressure_in=29.88, pressure_trend=-, dewpoint_string=44 F (7 C), dewpoint_f=44.0, dewpoint_c=7.0, heat_index_string=NA, heat_index_f=NA, heat_index_c=NA, windchill_string=49 F (9 C), windchill_f=49, windchill_c=9, feelslike_string=49 F (9 C), feelslike_f=49, feelslike_c=9, visibility_mi=10.0, visibility_km=16.1, solarradiation=, UV=0, precip_1hr_string=0.00 in ( 0 mm), precip_1hr_in=0.00, precip_1hr_metric= 0, precip_today_string=0.02 in (1 mm), precip_today_in=0.02, precip_today_metric=1, icon=mostlycloudy, icon_url=http://icons-ak.wxug.com/i/c/k/mostlycloudy.gif, forecast_url=http://www.wunderground.com/US/CA/San_Francisco.html, history_url=http://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=KCASANFR58, ob_url=http://www.wunderground.com/cgi-bin/findweather/getForecast?query=37.773285,-122.417725}}

0.1
http://www.wunderground.com/weather/api/d/terms.html
1
{url=http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png, title=Weather Underground, link=http://www.wunderground.com}
{full=San Francisco, CA, city=San Francisco, state=CA, state_name=California, country=US, country_iso3166=US, zip=94101, latitude=37.77500916, longitude=-122.41825867, elevation=47.00000000} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:47:28.343

您的问题是您的 POJO 与您的 JSON 不匹配。

JSON 代表一个对象，你的 POJO 需要与之匹配。这是一个看起来像的开始（所有字段都是公共的，没有 getter/setter 只是为了使这个例子变小）：

```
class MyWUPojo {
    public Response response;
    // more after this that match the JSON
}

class Response {
    public String version;
    public String termsofservice;
    public Map<String, Integer> features;
} 
```

请注意，需要注意的是，如果您只对*部分*JSON 响应感兴趣，那么您只需实现这些。Gson 将默默地忽略您未包含在 POJO 中的 JSON 的任何部分。

# sas - 如何在给定库的数据集上创建 SAS 代码循环并列出表格以及每个数据集中有多少个 obs？

> ID：14961105
> 
> 赞同：2
> 
> 时间：2013-02-19T15:27:22.187
> 
> 标签：sas, sas-macro

我正在尝试创建一个以库名称作为输入的宏，该宏在该库中的所有数据集上循环，并列出每个数据集中的数据集名称和 obs 数......有没有办法通过查询字典来获得这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:40:59.230

不能保证 obs 的数量是准确的，但通常是在您没有处理 SQL 删除或其他可能不会更新元数据的事情的情况下。

```
proc sql;
create table mycols as select * from dictionary.tables where libname="LIBRARYNAME";
quit; 
```

你可能想要 NOBS，MEMNAME。

# image - 如何运行我在 Internet 上找到的这个 Java 文件？我已经导入了 ImageJ，但我似乎无法让代码运行

> ID：14961106
> 
> 赞同：1
> 
> 时间：2013-02-19T15:27:21.530
> 
> 标签：image, geometry, imagej

这是代码的链接：[http ://rsbweb.nih.gov/ij/plugins/download/Hough_Circles.java](http://rsbweb.nih.gov/ij/plugins/download/Hough_Circles.java)

我已经导入了 ImageJ 但我似乎无法让代码运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:05:14.377

Hough_Circles.java is an ImageJ plugin that needs to be run from within ImageJ.

I recommend reading about ImageJ plugins in the [ImageJ User Guide](http://rsbweb.nih.gov/ij/docs/guide/146-16.html#toc-Section-16). From within ImageJ, you can compile and run the plugin by choosing `Plugins > Compile and Run...` from the menu.

If you want to run the code without a GUI, I suggest using the [**Fiji**](http://fiji.sc) distribution of ImageJ, because it allows to run the code in **headless mode** (see [here](http://fiji.sc/Headless)). In Fiji, there's also a very useful [Script Editor](http://fiji.sc/Script_Editor) that allows development of Java plugins as well as scripts in many [scripting languages](http://fiji.sc/Scripting_comparisons).

# php - 在浮动div下放置全宽页脚？

> ID：14961107
> 
> 赞同：1
> 
> 时间：2013-02-19T15:27:23.377
> 
> 标签：php, html, css

我正在制作一个需要全宽页脚的网站。但它目前看起来像这样：![在此处输入图像描述](../Images/1bfe35d0ff1973efe6e2f065150ee511.png)

虽然我希望它看起来像这样：

![在此处输入图像描述](../Images/04df0bd6f1e4db6ed30ee6b4dcec8e11.png)

我不确定我使用的 CSS 是否是：

你可以在这里看到完整的 css 和 html：http: [//jsfiddle.net/Mzmtv/](http://jsfiddle.net/Mzmtv/)

如需完整网站版本：lrch.harisonbh.com

```
/*I'm not sure if this is possible or not, with using the floating divs*/ 
```

基本上我需要存在的页脚 div 类似于第二张图片中的页脚 div。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:01:26.987

**注意：**下面的演示和代码仅根据您的要求提供页脚。

代码：http: [//jsfiddle.net/Mzmtv/3/](http://jsfiddle.net/Mzmtv/3/)

演示：http: [//jsfiddle.net/Mzmtv/3/embedded/result](http://jsfiddle.net/Mzmtv/3/embedded/result)

插入以下html结构

```
<div class="body">
    <div class="footer">
        &copy;<!--?php echo date("Y") ?--> Little Rock Central High     <a href="#top"><p>Back To Top</p></a>
    </div>
</div> 
```

**你应该使用这个：**

```
<div id="footer_container">
    <div class="footer">
        &copy;<!--?php echo date("Y") ?--> Little Rock Central High     <a href="#top"><p>Back To Top</p></a>
    </div>
</div> 
```

**CSS：**

```
#footer_container {
    clear: both; 
    margin-top: 194px; 
    z-index: 1; 
    width: 100%; 
    background: #333333;
}

.footer {
  padding: 10px;
  color: #ffffff;
} 
```

**截屏：** ![在此处输入图像描述](../Images/1d09c21a4e1467df37b7553f98302dbf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:39:08.330

代替

```
<div class="body">
    <div class="footer">
        &copy;Little Rock Central High<a href="#top"><p>Back To Top</p></a>
    </div>
</div> 
```

和：

```
<div class="clear"></div>
<div class="footer">
    &copy;Little Rock Central High<a href="#top"><p>Back To Top</p></a>
</div> 
```

在哪里

```
.clear {
 clear: both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:34:12.243

您提供的地址无效。我会根据最可能的问题给你一个答案：

你说你有一个页脚“th”，当你说你正在使用 DIV 时，这让我感到困惑。我将假设您正在使用 div 并相应地回答。

1.  将 div 放在主包装 div 之外（在所有内容下方和最有可能的标签中
2.  在代码中放置一个样式设置为 的元素`clear:both`。例如，您可以使用：

    `<br style="clear:both;" />`

3.  在页脚 div 上放置 100% 宽度`width:100%;`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-19T15:33:24.077

使用 moar 嵌套 div

```
<body>
    <header>
        <div id="head-inner" style="width: 920px;">
            <a href="#">Little Rock High School</a>
        </div>
    </header>
    <div class="body-inner" style="width: 100%; background-color: #ccc">
        <div class="container" style="width: 920px; background-color: #fff; margin: 0 auto;">
            <p>Content</p>
        </div>
    </div>
    <footer>
        <div class="footer" style="width 100%; background-color: #222;">
          <p>Footer stuff</p>
        </div>
    </footer>
</body> 
```

# ios - UILocalNotification 设置为警报而不是横幅

> ID：14961109
> 
> 赞同：2
> 
> 时间：2013-02-19T15:27:33.027
> 
> 标签：ios, push-notification, apple-push-notifications, uilocalnotification

我正在触发显示为横幅的本地推送通知。如何使通知显示为警报？这是我目前使用的：

```
UILocalNotification *localNotification = [[UILocalNotification alloc] init];

localNotification.fireDate = date;
localNotification.alertBody = @"some notice";
localNotification.soundName = UILocalNotificationDefaultSoundName;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
[localNotification release]; 
```

我知道您可以进入电话设置并将它们设置为警报类型，但是您如何从应用程序中指定默认警报？

任何指导将不胜感激。

干杯

# git - 简单地为所有 git 子模块递归 git pull

> ID：14961116
> 
> 赞同：5
> 
> 时间：2013-02-19T15:27:48.737
> 
> 标签：git, git-submodules

我的个人存储库有一些存储库作为子模块。以及以下命令

```
$ git submodule foreach git pull origin master 
```

进入 ruby​​ 存储库后立即面临以下结果，因为 ruby​​ 存储库似乎没有 master 分支并且“git pull”停止了。

```
Entering 'rails'
From git://github.com/rails/rails
 * branch            master     -> FETCH_HEAD
Already up-to-date.
Entering 'roo'
From git://github.com/hmcgowan/roo
 * branch            master     -> FETCH_HEAD
Already up-to-date.
Entering 'ruby'
fatal: Couldn't find remote ref master
Stopping at 'ruby'; script returned non-zero status. 
```

所以我的问题是**`what should I do to git pull for all of submodules only by git command?`**我应该为此编写脚本吗？我希望 git 提供的一个命令行就能做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-19T16:32:51.243

只需添加`|| true`到您的子模块命令：

```
git submodule foreach 'git commit -m "my commit message" || true' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T16:40:26.843

`git`子模块通常处于 detached-HEAD 状态，因此`git pull`在它们上无法弄清楚您在合并阶段的意思。如果您要做的只是将最新的更改放入存储库，请尝试`git submodule foreach git fetch`。如果你想让每个子模块`master`更新到各自的`origin/master`，那么你可以跟进`git submodule foreach git checkout master; git submodule foreach git merge origin/master`.

然后，当然，您需要决定您希望主存储库使用的每个子模块的版本（我不建议`origin/master`一直盲目使用 - 它可能不稳定 - 最好选择已知良好的标签或其他东西），在子模块中检查这些版本，并在您的主存储库中跟进适当`git add`的 s 。`git commit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-03T22:57:02.940

Git 2.18（2018 年第二季度）可能会通过改进`git submodule update`影响`git submodule pull`.

" `git submodule update`" 尝试两种不同类型的 " `git fetch`" 针对上游存储库来获取子模块路径上的提交绑定，但如果第一种（即正常获取）失败，它会错误地放弃，使第二种“最后手段”成为一种（即通过对象名称获取确切的提交对象）无效。
这已得到纠正。

请参阅[Stefan Beller ( ) 的](https://github.com/stefanbeller)[提交 e30d833](https://github.com/git/git/commit/e30d833671d634ea6455fd49596ac7339a4915b1)（2018 年 5 月 15 日[）](https://github.com/stefanbeller)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a173ddd](https://github.com/git/git/commit/a173dddf4483ed11b228077078becc8b65174b46))^(中，2018 年 5 月 30 日）)[`stefanbeller`](https://github.com/stefanbeller)
^([`gitster`](https://github.com/gitster))

> ## `git-submodule.sh`: 努力获取子模块

> 这是[fb43e31](https://github.com/git/git/commit/fb43e31f2b43076e7a30c9cd00d0241cb8cf97eb)的逻辑连续体（子模块：通过直接获取 sha1，2016-02-23，Git 2.8.0 更加努力地获取所需的 sha1）并修复它，因为某些假设不正确。
> 
> 提交状态：
> 
> > If `$sha1`was not part of the default fetch ... fail 我们这里假设`fetch_in_submodule`只有当服务器端不支持 sha1 获取时才会失败。
> 
> 还有其他的失败，为什么这样的fetch可能会失败，比如
> 
> ```
> fatal: Couldn't find remote ref HEAD 
> ```
> 
> 如果远程端没有发布 HEAD 并且我们没有本地 fetch refspec，则可能会发生这种情况。
> 
> 协议规范允许不发布 HEAD 并且会发生，例如，如果 HEAD 指向未出生的分支。
> 
> 当子模块被浅层提取时，可能会发生没有本地提取参考规范，因为 git-clone 不会设置提取参考规范。
> 
> **因此，通过忽略第一次提取的退出代码，更努力地尝试子模块，而不是依靠以下内容`is_tip_reachable`来查看我们是否再次尝试提取**。

* * *

注意：子模块获取的错误消息已在 Git 2.22（2019 年第二季度）中得到改进

请参阅[Jonathan Tan ( ) 的](https://github.com/jhowtan)[提交 bd5e567](https://github.com/git/git/commit/bd5e567dc75abae58cb364d1e55cbaf67edb8c98)（2019 年 3 月 13 日[）](https://github.com/jhowtan)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 32414ce](https://github.com/git/git/commit/32414ceb854de44a9b4b74c975ae410713a17c99))^(中，2019 年 4 月 9 日）)[`jhowtan`](https://github.com/jhowtan)
^([`gitster`](https://github.com/gitster))

> ## 子模块：清楚地解释第一次尝试失败

> 当使用`--recurse-submodules`具有至少一个子模块且 HEAD 指向未生成分支的超级项目进行克隆时，克隆过程如下所示：
> 
> ```
> Cloning into 'test'...
> <messages about cloning of superproject>
> Submodule '<name>' (<uri>) registered for path '<submodule path>'
> Cloning into '<submodule path>'...
> fatal: Couldn't find remote ref HEAD
> Unable to fetch in submodule path '<submodule path>'
> <messages about fetching with SHA-1>
> From <uri>
>     * branch            <hash> -> FETCH_HEAD
> Submodule path '<submodule path>': checked out '<hash>' 
> ```
> 
> 换句话说，首先，在没有散列参数的情况下进行提取（即 HEAD 的提取），从而导致“ `Couldn't find remote ref HEAD`”错误；然后，在给定哈希的情况下完成提取，该哈希成功。
> 
> 此提交改进了我们正在重试 fetch 的通知，并且之前的消息（特别是 fetch 的致命错误）并不一定表明整个命令失败。

* * *

请注意，在 Git 2.34（2021 年第四季度）中，继续用 C重新实现“ [`git submodule`](https://github.com/git/git/blob/e78db9d3037eba812591857e7b44e69b97b329f4/Documentation/git-submodule.txt)” ^(（[man](https://git-scm.com/docs/git-submodule)）的部分内容。)

请参阅[Atharva Raykar ( ) 的](https://github.com/tfidfwastaken)[提交 c51f8f9](https://github.com/git/git/commit/c51f8f94e5b3d6a8d190d9901ea0c5b83e30c3aa)（2021 年 8 月 24 日[）](https://github.com/tfidfwastaken)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 e78db9d](https://github.com/git/git/commit/e78db9d3037eba812591857e7b44e69b97b329f4))^(中，2021 年 9 月 20 日）)[`tfidfwastaken`](https://github.com/tfidfwastaken)
^([`gitster`](https://github.com/gitster))

> ## [`submodule--helper`](https://github.com/git/git/commit/c51f8f94e5b3d6a8d190d9901ea0c5b83e30c3aa): 从 C 运行更新程序
> 
> ^(指导者：Christian Couder)
> ^(指导者：Shourya Shukla)
> ^(签署者：Atharva Raykar)

> `run-update-procedure`如果子模块的 SHA1 与超级项目的预期不匹配，则添加一个新的子模块 --helper 子命令，该命令将运行更新过程。

这意味着`is_tip_reachable`上面提到的shell方法不再存在。

# c# - Reporting Services：获取报告服务路径

> ID：14961126
> 
> 赞同：2
> 
> 时间：2013-02-19T15:28:30.077
> 
> 标签：c#, vb.net, reporting-services

我有一个使用程序集进行本地化的报告列表。这些程序集应放置在报告服务的安装路径上。部署任务之一是将这些程序集从 .Net (vb.net) 复制到正确的路径中。

现在我们正在使用硬代码路径来添加程序集（带有翻译）。那么，有没有办法从 Vb.Net 获取服务器中运行的 sql 报告服务的路径？

IE 报告服务的有效路径是：

> C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin

我期望得到的是：

> C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:48:18.467

假设您的实例始终命名为 ( `MSRS10_50.MSSQLSERVER`)，请检查`SQLPath`此注册表位置中的键：

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Setup`

![在此处输入图像描述](../Images/2b6edcf414569d733f8c9296d2d95813.png)

如果需要，请查看[此 SO 帖子](https://stackoverflow.com/questions/1675864/read-a-registry-key)以获取有关阅读注册表的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:55:33.390

好的，我将粘贴我的代码以共享它:)（控制台 VB.Net 应用程序）

```
Private Const INSTANCES As String = "SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\RS"
Private PathToReplace As String = "SOFTWARE\Microsoft\Microsoft SQL Server\{textToReplace}\Setup"

Sub Main()

    'For now we must be sure we have only one instance of sql reporting service
    Dim reportingInstances As List(Of String) = GetSQLReportingServicesInstances()

    Dim InstanceName As String = GetKeyValue(INSTANCES, reportingInstances.Item(0))

    Dim registryPathOfSqlReportingServices As String = PathToReplace.Replace("{textToReplace}", InstanceName)

    Dim pathOfSqlReportingServices As String = GetKeyValue(registryPathOfSqlReportingServices, "SQLPath")

    Console.WriteLine(pathOfSqlReportingServices)

    Console.ReadLine()
End Sub

Public Function GetKeyValue(ByVal RegistryPath As String, ByVal key As String) As String

    Dim localMachine As RegistryKey = GetRegistryParentKey()

    Dim windowsNTKey As RegistryKey = localMachine.OpenSubKey(RegistryPath)

    Return windowsNTKey.GetValue(key).ToString()

End Function

Public Function GetSQLReportingServicesInstances() As List(Of String)

    Dim listOfInstances As New List(Of String)

    Dim localMachine As RegistryKey = GetRegistryParentKey()

    Dim InstancesKey As RegistryKey = localMachine.OpenSubKey(INSTANCES)

    For Each InstanceKey As String In InstancesKey.GetValueNames
        listOfInstances.Add(InstanceKey)
    Next

    Return listOfInstances

End Function

Public Function GetRegistryParentKey() As RegistryKey

    Dim localMachine As RegistryKey = Nothing

    If (Environment.Is64BitOperatingSystem) Then
        localMachine = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry64)
    Else
        localMachine = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.LocalMachine, RegistryView.Registry32)
    End If
    Return localMachine

End Function 
```

# jboss - 什么是独立应用程序或独立服务器？

> ID：14961137
> 
> 赞同：1
> 
> 时间：2013-02-19T15:29:12.890
> 
> 标签：jboss, jboss7.x

我正在使用 jboss-as-7.1，它有两种类型的服务器选项 Standalone 和 domain 。但是那些是什么意思？请举一些简单的真实例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:37:24.433

通常独立意味着服务器不需要其他任何东西来运行它，或者只有一台服务器。Jboss Standalone 用于一台服务器，而 domain 用于运行多台服务器。见：[https ://community.jboss.org/wiki/JBossAS7UserGuide](https://community.jboss.org/wiki/JBossAS7UserGuide)

如果应用程序不需要服务器来运行它或其他任何东西来运行它，那么它就是独立的。所以一个 webapp 不会是独立的。

# java - 这是在 ZK 和 JSF 中使用 Innerclass 进行组件变量绑定的好方法吗？

> ID：14961139
> 
> 赞同：0
> 
> 时间：2013-02-19T15:29:16.793
> 
> 标签：java, jsf, inner-classes, zk

我在**ZK 架构**和**JSF 架构**中有不同的项目，在我的应用程序中，我正在创建内部类来绑定来自**ZUL**（*在 ZK 的情况下*）和**Xhtml**（*在 Jsf 的情况下*）的数据。所以每个**ViewModel**（*在 ZK 的情况下*）和**Managedbean**（*在 JSF 的情况下*）有一个内部类，用于绑定特定**ZUL**和**XHTML**页面的组件的值。这种方法是好的还是我必须为组件值绑定创建一个单独的 POJO 类。

# database - 从多列表切换到多行辅助表

> ID：14961140
> 
> 赞同：0
> 
> 时间：2013-02-19T15:29:17.600
> 
> 标签：database, postgresql

我们有一个 Postgres 数据库，其中包含一个表“foo”和辅助表“bar_1”...“bar_k”，它们保存特定类型 foo 的附加数据。基本上，我们可以将“foo”视为具有公共属性的父类，而每个“bar_i”表都是“foo”的子类，它添加了额外的属性。

我们正在考虑重新设计模式，以便我们有一个“foo_metadata”表来代替几个“bar”表，它列出了每种“bar”表中的不同列，以及一个“foo_attributes”表通常在“条形”表中的值。

这样一个系统的优点是它非常通用：我们基本上会将每个类的元数据放入数据库中，这样就不需要为每个更改或添加的类更新应用程序和编写测试。

我想这会影响性能：我们不是从“foo”表中读取一行，从“bar”表中读取一行，而是从“foo_metadata”和“foo_attributes”表中读取几行。更新也是如此（尽管我们只会更新未编入索引的值和时间戳。）

我的问题是：我们会得到多少性能影响？有没有办法将性能影响降到最低？在投入*大量*开发人员时间重新设计系统*之前*，我们可以使用哪些指标来估计性能损失。

 *（我们不关心 Postgres 对值强制执行类型，因为它们通常是字符串，并且应用程序需要在将值插入数据库之前检查它们......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:38:47.707

您描述的模型是通用 EAV 模型（实体-属性-值模型）。

互联网上已经有大量关于它的信息。只是谷歌`EAV`。您甚至可以从[`this`](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)wiki 中的文章开始。

EAV的最大问题：

1.  编写查询可能很困难。（多个连接到同一个值表，而不是单个表中的多个列）
2.  您不能轻松地将数据库约束应用于此模型（因此没有引用完整性和检查）。*

# windows-8 - Windows 8 显示所有后台任务

> ID：14961145
> 
> 赞同：2
> 
> 时间：2013-02-19T15:29:21.967
> 
> 标签：windows-8

有没有办法（手动、手动）列出当前在我的机器上注册的所有后台任务，以及它们的详细信息，例如它们响应的触发器、它们源自的应用程序等等？

另外，当我卸载一个应用程序时，该应用程序注册的所有后台任务是否也会被删除（即未注册）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:14:18.363

您可以在注册表中查看...

> HKEY_CLASSES_ROOT\Extensions\ContractId\Windows.BackgroundTasks

每个与后台任务关联的包都会有一个`ActivatableClassId`（但不幸的是，似乎所有包都列出了）。此外，您可以查看...

> HKEY_CLASSES_ROOT\ActivatableClasses\Package

对于具有`ExePath`of 的包`backgroundTaskHost.exe`。是的，卸载软件包时会删除后台任务。

# python - 学习 Django 单元测试

> ID：14961151
> 
> 赞同：2
> 
> 时间：2013-02-19T15:29:44.957
> 
> 标签：python, django, unit-testing

我正在努力学习单元测试，并且我查看了几本书 - Debugging Django, Web Dev。使用 Django 和官方文档，但似乎没有一个对我来说足够彻底地涵盖单元测试。我也不是 Python Web 开发方面的专家，所以也许这就是原因。

我正在寻找的是从 Python 技能/知识的中级水平开始并从头开始涵盖 Django 单元测试的东西，并提供了一些很好的真实示例。

对这些资源有什么建议吗？非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T15:47:37.897

## 阅读

*   [Test-Driven Django (by Harry Percival)](http://www.obeythetestinggoat.com/)似乎很棒。
*   [测试django信号](http://blog.yourlabs.org/post/33004908819/testing-django-signals-properly)的文章也很有用，很多人一直在做信号测试错误。

## 代码

*   [从django-rules-light](http://django-rules-light.rtfd.org)为 TDD 制作的[简单单元测试](https://github.com/yourlabs/django-rules-light/tree/master/rules_light/tests)，
*   来自[django-autocomplete-light 的](http://django-autocomplete-light.rtfd.org)[丑陋的硒测试](https://github.com/yourlabs/django-autocomplete-light/blob/master/autocomplete_light/tests/widget.py)，如果你的硒测试看起来像这样，那么你做错了（哦，我会重做它们，[总有一天](https://github.com/yourlabs/django-autocomplete-light/issues/27)......）
*   django-autocomplete-light 中有趣的模式：看看[AutocompleteTestCase](https://github.com/yourlabs/django-autocomplete-light/blob/master/autocomplete_light/tests/autocomplete/case.py)如何是[其他测试](https://github.com/yourlabs/django-autocomplete-light/blob/master/autocomplete_light/tests/autocomplete/)的父级，即。[这个](https://github.com/yourlabs/django-autocomplete-light/blob/master/autocomplete_light/tests/autocomplete/model.py)没有实际的测试代码，它只是为 AutocompleteTestCase 生成数据。
*   来自[django-session-security 的](http://django-session-security.rtfd.org)[良好硒测试](https://github.com/yourlabs/django-session-security/blob/master/session_security/tests/script.py)。我对这个很满意，不仅它可读，而且那里使用的模式允许测试即使在非常慢的机器上也能正确运行（即[travis-ci](http://travis-ci.org)免费计划）。特别注意[这个变化](https://github.com/yourlabs/django-session-security/commit/cf2aa92525c6e394bb7b5736aae0c46eac0295e5)，这是关键，从*等待 X 秒开始，然后查看 Y 是否发生*模式，以*确保 Y 发生在 X 秒*模式内。这个恕我直言，进行了更好的硒测试。
*   [ghost.py 测试示例](https://gist.github.com/jpic/074a1a54181f50d578dc)，但我认为我的设置中有一些错误，所以我最终没有使用它，无论如何听起来都值得尝试。

我相信您可以在 google/github/bitbucket/etc 上找到更多信息...

## 有用的应用程序

[djangopackages](https://www.djangopackages.com/grids/g/testing/)有一些非常有用的“测试工具”应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T15:36:31.250

我已经阅读了很多 Django 书籍和 Python 书籍，你是对的，它们都没有真正完成工作。迄今为止我遇到的最好的材料是 Carl Meyer 的关于[测试和 Django](https://pycon-2012-notes.readthedocs.org/en/latest/testing_and_django.html)的演讲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:06:57.433

您是否尝试过核心开发人员 Karen Tracy 的书*Django 1.1 测试和调试*？尽管标题暗示它已过时，但大多数建议仍然适用。

# angularjs - angular-bootstrap (tabs)：数据绑定只能单向工作

> ID：14961155
> 
> 赞同：11
> 
> 时间：2013-02-19T15:29:50.523
> 
> 标签：angularjs, angular-ui, angularjs-scope

我准备了一个小提琴并将其煮沸到最低限度：

[http://jsfiddle.net/lpeterse/NdhjD/4/](http://jsfiddle.net/lpeterse/NdhjD/4/)

```
<script type="text/javascript">
    angular.module('app', ['ui.bootstrap']);

    function Ctrl($scope) {
      $scope.foo = "42";
}
</script>

<div ng-app="app" ng-controller="Ctrl">
    1: {{foo}}<br />
    2: <input ng-model="foo" />
    <tabs>
        <pane heading="tab">
            3: {{foo}}<br />
            4: <input ng-model="foo" />
        </pane>
    </tabs>    
</div> 
```

一开始，所有视图都引用了模型`Ctrl.foo`。

如果您更改输入中的某些内容，`2:`它会正确更新模型，并且此更改会传播到所有视图。

更改输入内容`4:`只会影响同一窗格中包含的视图。它的行为就像以某种方式分叉的范围。之后的更改`2:`不再反映在选项卡中。

我阅读了有关指令、范围和嵌入的角度文档，但找不到对这种不良行为的解释。

我将不胜感激任何提示:-)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T16:18:07.177

当您编辑原语时，问题与 ng-repeat 中的问题相同 - 该`<pane>`指令创建一个从父级继承的新范围。

现在，鉴于 Javascript 继承的工作方式，该`<pane>`指令有自己的`foo`字符串原语副本，当您编辑它时，您只是在窗格子范围内编辑它。

一个简单的解决方案是`foo`在父 Ctrl 上放置一个对象：

```
function Ctrl($scope) {
  $scope.data = { foo: 42 };
} 
```

然后您可以在 HTML 中执行此操作：

```
<tabs><pane><input ng-model="data.foo"></pane></tabs> 
```

为什么它适用于对象？因为当`<pane>`继承父级的作用域时，其对的引用`data`将指向与父级Ctrl上相同的内存对象。像字符串和数字这样的原语在继承中被复制，而对象只是创建一个指向同一个对象的新指针。

TL;DR:`<pane>`的新作用域继承了`foo`字符串原语作为新副本，`foo`其在编辑时不会在父 Ctrl 上更改。`<pane>`的新作用域**将**继承一个对象，就像`data`对同一对象的引用一样，并且在作用域上编辑时，`<pane>`将在父作用域上引用同一对象。

有用的文章：[https ://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T17:27:28.570

和指令各自创建一个新的嵌入子作用域（因为它们都有） `<tabs>`，它在原型上继承自父作用域，以及一个隔离子作用域，它在原型上不从父作用域继承。内部使用嵌入的子范围。`<pane>``transclude: true,``<input...>``<pane>`

当第一次渲染`input`内部时`<pane>`，它会填充 的值`$scope.foo`。普通的 JavaScript 原型继承在这里开始发挥作用......最初`foo`没有在转入的子范围上定义（原型继承**不**复制原语），因此 JavaScript 遵循原型链并查看父对象/$scope，并在那里找到它。 `42`被放入文本框中。嵌入的子范围不受影响/更改（尚未）。

如果您编辑第一个文本框，则第二个文本框会更新，因为 JavaScript 仍在使用原型继承来查找`$scope.foo`.

如果您编辑第二个文本框，比如`429`，Angular 会将值写入`$scope.foo`，但请注意 $scope 是嵌入的子范围。由于`foo`它是一个原语，它会在该子作用域上创建一个新属性——这就是 JavaScript 的工作方式，无论好坏。这个新属性将隐藏/隐藏同名的父范围属性。原型继承在这里不起作用。（Andy 在他的帖子中提到的文章（也在[SO 上](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)）也详细解释了这一点，并配有图片。）由于嵌入的子范围现在有一个`foo`属性，它现在将使用该本地属性进行读写，所以它出现了从父范围“断开”。

使用对象（而不是原语）解决了这个问题，因为原型继承总是在起作用。被嵌入的子作用域获得对父作用域中对象的引用。写入`data.foo`写入`data`父对象上的对象，而不是嵌入的子范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:10:43.223

问题在于 tabs 指令。我认为在[ui-bootstrap-tpls-0.1.0.js 的第 1044 行](https://github.com/angular-ui/bootstrap/blob/gh-pages/ui-bootstrap-0.1.0.js#L1042)。

如果你改变`scope: {}`它`scope: { foo: '='}`应该给你一个双向数据绑定。

来自[Angular 文档](http://docs.angularjs.org/guide/directive)：

> = 或 =attr - 在本地范围属性和通过 attr 属性值定义的 name 的父范围属性之间建立双向绑定。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定范围的widget定义：{localModel:'=myAttr'}，那么widget范围属性localModel将在父范围上反映parentModel的值。对 parentModel 的任何更改都将反映在 localModel 中，而对 localModel 的任何更改都将反映在 parentModel 中。

# c++ - 如何对具有两个变量的向量进行排序？

> ID：14961157
> 
> 赞同：2
> 
> 时间：2013-02-19T15:29:55.130
> 
> 标签：c++, sorting, vector, parameters

这可能有点像菜鸟问题，但这是我的问题；我有一个具有两个不同 int 值的类 Card，看起来像这样。

```
#pragma once
class Card
{
public:
int value;
int suite;

Card(int v, int s);
~Card(void);

void printCard();
int getScore();
}; 
```

现在我想按价值对 5 张卡片进行排序。我尝试将它们放入向量中，然后使用 std::sort 但我无法让它工作。所以我的问题是最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:32:09.263

您将需要重载`operator<`：

```
bool operator<(const Card& lhs, const Card& rhs){
.... logic here ... 
} 
```

然后使用`std::sort`. 您可能需要将此接线员作为您班级的朋友。或者在类定义中，您可以实现：

```
class Card {
 ....
 public:
  bool operator<(const Card& other) const {
  .... logic here...
  }
}; // end of class Card 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:41:09.767

您有两种使用`std::sort`. `operator <`一种是为您的班级重载：

```
bool operator< (const Card &lhs, const Card &rhs) {
  return lhs.value < rhs.value;
} 
```

但是，只有在总是比较这样的对象确实有意义时才这样做`Card`。如果您只需要它进行特定排序，则可以使用`sort`接受自定义比较器的版本。

有多种方法可以定义谓词。对于可重用但简单的标准，可以使用类中的静态函数：

```
class Card
{
public:
  // ... as before
  static bool lesserValue(const Card &lhs, const Card &rhs) {
    return lhs.value < rhs.value;
  }
}; 
```

用法：

```
std::sort(from, to, &Card::lesserValue); 
```

对于一次性事物（或需要保留内部状态的复杂标准），使用派生自的类`std::binary_function`并在其`operator()`. 在 C++11 中，您还可以为此使用 lambda 函数：

```
std::sort(from, to, [](const Card &lhs, const Card &rhs) { return lhs.value < rhs.value; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:31:40.663

我想出了这个答案，它使用比较类，这也使得比较套件变得非常容易。我还改进了您班级中的公共和私人成员，因为某些值不应该是公开的。而且你的班级目前不需要析构函数。

```
#include<iostream> 
#include<algorithm> 
#include<vector> 

class Card {

    public:

        Card(int v, int s)
            :
                value(v),
                suite(s)
        {
        }

        /*No need for destructor*/

        int getValue(void) const { return value;}

        int getSuite(void) const { return suite;}

        void printCard(void) const {
            std::cout << "Value = " << value << "\tSuite = " << suite << std::endl;
        }

    private:
        /*these shouldn't be public*/
        int value;
        int suite;
};

class CompareCardValue {

    public:

        bool operator() ( const Card& c1, const Card& c2)
        {
            return c1.getValue() < c2.getValue();
        }
};

class CompareCardSuite{

    public:

        bool operator() ( const Card& c1, const Card& c2)
        {
            return c1.getSuite() < c2.getSuite();
        }
};

int main( ){

    std::vector<Card> deck;
    deck.push_back( Card(2,4) );
    deck.push_back( Card(1,3) );
    deck.push_back( Card(12,3) );
    deck.push_back( Card(8,2) );

    CompareCardSuite comp_suite; //compares for suite
    CompareCardValue comp_value; //compares for value

    /*We would like to use a const iterator since we are
     *not interested in changing the Card intances
     */
    std::vector<Card>::const_iterator it;
    for ( it = deck.begin(); it < deck.end(); it++){
        it->printCard();
    }
    std::cout << std::endl;

    /*sorting on value*/
    std::sort( deck.begin(), deck.end(), comp_value );

    for ( it = deck.begin(); it < deck.end(); it++){
        it->printCard();
    }

    std::cout << std::endl;
    /*sorting on suite*/
    std::sort( deck.begin(), deck.end(), comp_suite );

    for ( it = deck.begin(); it < deck.end(); it++){
        it->printCard();
    }
} 
```

# c# - 将文本框的文本设置为粗体和蓝色

> ID：14961176
> 
> 赞同：-2
> 
> 时间：2013-02-19T15:30:46.683
> 
> 标签：c#, textbox

我想在同一行将文本框（或标签）的文本设置为粗体并将其颜色更改为蓝色。

目前我正在使用这个。

```
label1.Font = new Font(textBox1.Font, FontStyle.Bold);
label1.ForeColor = Color.Blue; 
```

是否有一个单行代码可以做到这一点。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:32:53.043

当然：

```
label1.Font = new Font(textBox1.Font, FontStyle.Bold); label1.ForeColor = Color.Blue; 
```

这就是你所能做的。

换句话说，没有。字体和渲染它的颜色是完全独立的，这就是为什么`Font`类中没有与颜色相关的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:38:13.143

我认为你能做的最好的就是创建一个扩展方法。在引擎盖下它仍然是多行的，但是如果您希望代码成为实际进行更改的单行代码，那么语法糖就足够了。就像是，

```
public static class LabelHelper
{
    public static Label ChangeFormatting(this Label label, Font font, Color color, Color color)
    {
        if (label == null)
        {
            return;
        }

        label.Font = font;
        label.ForeColor = color;
    }
} 
```

然后这样称呼它：

```
label1.ChangeFormatting(new Font(textBox1.Font, FontStyle.Bold), Color.Blue); 
```

# php - Android 和 Web 服务的会话

> ID：14961179
> 
> 赞同：0
> 
> 时间：2013-02-19T15:31:03.187
> 
> 标签：php, android, web-services, session

我有一个用 php 编写的 android 和 web 服务。android 有一个身份验证系统，应用程序从该系统将“用户名”和“密码”发送到 web 服务，并将返回用户 ID。然后，我使用用户 ID 通过 Web 服务请求其他信息。

就良好实践而言，上述方法并不安全，我想到了使用会话。但我不知道如何使用它们？你们能给我一些让从android到网络服务的请求更安全的例子吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:34:19.730

您有两个主要选择：

1-`SSL`在这种情况下与您的网络服务通信，您可以将用户名/密码作为纯文本发送，因为它们无论如何都会被加密

2-用服务器加密用户名/密码，`public key`所以除了网络服务之外没有人（谁`private key`可以解密消息）

如果您希望整个通信是安全的（不仅仅是发送用户名/密码），您可以使用`symmetric cipher`算法（例如`AES`），因为`asymmetric cipher`算法（例如`RSA`）要慢得多并且消耗更多资源。

此外，并不是说您需要将格式转换为`public key`从`DER`android 使用它，您可以使用`openssl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:47:50.713

你可以试试这个

如果您使用 HttpClient 进行发送，则可以将其存储在应用程序对象中并用于将来的请求

```
import android.app.Application;
import org.apache.http.impl.client.DefaultHttpClient;

public class AppObj extends Application
{
  public static DefaultHttpClient davisimperialclient;

} 
```

在您的登录屏幕中，您必须创建一个 HttpClient

```
AppObj.davisimperialclient = new DefaultHttpClient();
      HttpPost localHttpPost = new HttpPost(ApplicationLinks.login);
      try
      {
        ArrayList localArrayList = new ArrayList(2);
        localArrayList.add(new BasicNameValuePair("username", this.name));
        localArrayList.add(new BasicNameValuePair("password", this.pass));
        localHttpPost.setEntity(new UrlEncodedFormEntity(localArrayList));
        String  str = EntityUtils.toString(DavisImperialApp.davisimperialclient.execute(localHttpPost).getEntity());
        Log.e("error", str);
        return str;
      }
      catch (Exception localException)
      {

      } 
```

如果登录成功，您可以使用

```
AppObj.davisimperialclient 
```

用于提出其他要求

该对象将一直存在，直到我们退出应用程序

# html - Do I still need woff or eot if I'm using fonts.com?

> ID：14961183
> 
> 赞同：0
> 
> 时间：2013-02-19T15:31:11.113
> 
> 标签：html, fonts

I'm not sure if I mis-understood how services like fonts.com or google fonts work. Basically I created a website. In the html, I embedded javascript snippet like so:

```
<script type="text/javascript" src="http://fast.fonts.com/jsapi/somelongapiekey"></script> 
```

Once I did that, I could reference new font families in my css like so `font-family:'Some new font from font.com';`.

Just recently, the client's backend developer asked me to give him the woff and eot files for the fonts I'm using. I told him that i dont have them because i'm using fonts.com. Then he responded by asking, "Then how are you able to get the fonts to work in all the other browsers? Don't you need the woff and eot files to make it work on all the major browsers?"

Did I mis-understand something? I assumed fonts.com takes care of cross browser compliance and any other issues i haven't considered. Does the client's developer need the eot/woff files for other reasons I haven't considered?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T13:56:07.007

The developer didn't realize how these services worked. So i explained it to him.

# c# - 使用 RIA 服务更新实体时出现奇怪的 InvalidOperationException

> ID：14961185
> 
> 赞同：0
> 
> 时间：2013-02-19T15:31:12.790
> 
> 标签：c#, .net, silverlight, entity-framework, wcf-ria-services

我正在使用 EF4.1、RIA 服务和 Silverlight。我在更新场景中遇到了一个有点奇怪的问题。

领域模型非常简单；它处理**Requests**和**Persons**。他们是一对一的关系。所以一个公民可以有多个请求，尽管实际上这永远不会发生，因为*应用程序根本不提供这样做的功能。*

**Request**有一个名为“Urgent”的属性，我将其更改为**true**，然后尝试保存。一切顺利，直到通过此方法开始实际持久化：

```
 public void UpdateRequest(Request currentRequest)
    {
        Request original = ChangeSet.GetOriginal(currentRequest);
        try
        {
            ObjectContext.Requests.AttachAsModified(currentRequest, original);
        }
        catch (Exception ex)
        {
            // weirdness here!
        }
    } 
```

这几乎是 RIA 服务生成的标准方法（除了我为调试目的添加的 try/catch 处理程序。）然后我收到以下错误：

当我检查ChangeSet时，没有添加*任何*请求，所以我确定我没有偶然添加它。

```
An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key. 
```

我不明白... ObjectStateManager 中实际上**没有**添加对象，ChangeSet**没有**添加对象；这是从哪里来的？我跟踪了哪些属性正在被更改，所以我确定密钥没有被覆盖，也没有被添加或其他一些时髦的东西。

任何人都可以在这里阐明一下吗？到目前为止让我发疯了好几天......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-25T10:57:22.100

我设法使用以下逻辑修复它，基本上我们正在检查实体是否已经附加。如果是，我们不会重新附加它，而只是更新值。否则，我们附上它。

```
 ObjectStateEntry entry;
        // Track whether we need to perform an attach
        bool attach;
        if (ObjectContext.ObjectStateManager.TryGetObjectStateEntry(ObjectContext.CreateEntityKey("Requests", currentRequest), out entry))
        {
            // Re-attach if necessary
            attach = entry.State == EntityState.Detached;
        }
        else
        {
            // Attach for the first time
            attach = true;
        }
        if (attach)
        {
            ObjectContext.DocumentRequests.AttachAsModified(currentRequest, original);
        }
        else
        {
            ObjectContext.Requests.ApplyCurrentValues(currentRequest);
        } 
```

# vector - 带大小、角度的向量与带 x、y 的向量之间的差异

> ID：14961190
> 
> 赞同：0
> 
> 时间：2013-02-19T15:31:28.273
> 
> 标签：vector, coordinate-systems, polar-coordinates, cartesian-coordinates

用大小和角度描述的向量与用 x 和 y 描述的向量有什么区别？还是它们是一样的，只是表达方式不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:39:31.967

这两种表示存在双射，您可以使用它：

```
x = r*cos(alpha);
y = r*sin(alpha); 
```

所以这两种表示有效地做同样的事情。对于某些任务，仍然优先于另一个。例如，如果使用幅度和角度来表示矢量，则旋转会更容易。另一方面，使用坐标 x 和 y 更容易计算点积。

# php - 为什么我的 PHP 没有检测到我的提交按钮按下，因此没有执行我的函数？

> ID：14961194
> 
> 赞同：0
> 
> 时间：2013-02-19T15:31:52.617
> 
> 标签：php

我在 index.php 页面的中途有以下 HTML：

```
<form action="" method="post"><input type="submit" value="Reset Game" class="reset-button" title="Admitting defeat?"></form> 
```

在我的页面顶部，我有以下检查：

```
if (isset($_POST["submit"]) {
    if ($_POST["submit"] === "Reset Game"] {
        $_SESSION["word"] = generate_word("dictionary.txt");
        $_SESSION["word-progress"] = turn_to_underscores($_SESSION["word"]);
    }
} 
```

它为我的刽子手游戏生成了单词，以及带下划线的版本。以下是这些功能：

```
 /**
     * Generate a random word from the given dictionary file
     * @param $filename Name of the dictionary file
     * @return Random word
     */
    function generate_word($filename) {
        $dictionary_file = new SplFileObject($filename);
        $dictionary_file->seek(rand(0, 80367));

        return trim($dictionary_file->current());
    }

    /**
     * Accepts a word and returns it as underscores for obfuscation
     * @param $word A given word
     * @return Returns the word as underscores
     */
    function turn_to_underscores($word) {
        $underscored_word = "";

        for ($i = 0; $i < strlen($word); $i++) {
            $underscored_word .= "_";
        }

        return $underscored_word;
    } 
```

我打电话带来的`require "functions.php";`。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T15:33:26.273

你的提交按钮没有 name 属性，所以它不会是一个成功的控件，也不会出现在提交的数据中（当然不是 as `$_POST["submit"]`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:34:17.063

给表单输入`name="submit"`一个。`submit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:37:46.010

检查您的 php_error.log 文件。它应该说明您如何尝试访问未定义的索引“提交”。

问题是没有提交键，因为您没有为提交输入提供“名称”值。

# ruby - Ruby：无法让捆绑程序在 Mountain Lion 上工作

> ID：14961199
> 
> 赞同：0
> 
> 时间：2013-02-19T15:32:00.647
> 
> 标签：ruby, bundler

我正在尝试通过安装捆绑程序`gem install bundler`，一切正常，但是当我这样做时`bundle install`：

> 错误：未安装 Gem 捆绑器，`gem install bundler`请先运行。

我在 Mountain Lion 上使用 ruby​​ 1.9.3p385。

我尝试按照 Stack Overflow 上的提示重新安装很多次，但没有运气。

你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:34:56.060

确保您的 PATH 变量中有捆绑程序，检查与`echo $PATH`

如果包含捆绑器的目录不存在，请添加它`PATH=$PATH:/path/to/bundler`

# ios - Popover 自行解散

> ID：14961201
> 
> 赞同：0
> 
> 时间：2013-02-19T15:32:07.063
> 
> 标签：ios, uialertview, uipopovercontroller

我有选项卡式应用程序，在我的一个选项卡中，我有一个表格视图，并且在选择任何行时，弹出框将出现在屏幕上。用户将在弹出框字段中输入数据，并且我已经输入了验证码来检查数据现在如果用户输入了一些错误的数据，那么我已经调用了`Alert View`但是当警报视图出现时它会自动禁用我的弹出框。

我希望在取消警报视图时，我的 Popover 窗口将在输入的值中保持可见。

下面提到了警报视图的代码

```
- (IBAction)addTankMixProduct:(id)sender
{
   if (totalPercentage==0 || [self.txtTankmixName.text isEqualToString:@""])
   {
       UIAlertView *myalertview = [
             [UIAlertView alloc]initWithTitle:@"warning"
                                  message:@"kindly enter details properly "
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
       [myalertview show];
       [myalertview release];

    }
    else 
    {
       // SOME CODE TO ENTER DATA 
    }
} 
```

我做错了什么？提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:47:27.770

来自 Apple 的文档：“当显示时，在弹出窗口之外的点击会导致弹出窗口自动关闭。为了允许用户与指定的视图交互而不关闭弹出窗口，您可以将一个或多个视图分配给 passthroughViews 属性。 "

您需要将警报视图分配给弹出框控制器的 passthroughViews 属性。

# bash - 如何将多个 pdf（或 png）合并到一个页面中

> ID：14961205
> 
> 赞同：2
> 
> 时间：2013-02-19T15:32:23.503
> 
> 标签：bash, pdf, pdf-generation

是否有一个命令行工具可以将多个图形（pdf 或 png 格式）合并到一个页面 pdf，可能每个都适合该页面的 2x2 表格中的一个单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:39:02.803

我找到了答案 --- 使用 pdfjam

例如

pdfnup --nup 2x2 frag.dat_*pdf

# jquery - jQuery：只请求一次 Ajax 调用

> ID：14961207
> 
> 赞同：1
> 
> 时间：2013-02-19T15:32:25.750
> 
> 标签：jquery, ajax, twitter-bootstrap

我正在使用以下代码在我的产品上显示“弹出”效果。弹出框的内容来自 Ajax。这是使用[Twitter Bootstrap 弹出框](http://twitter.github.com/bootstrap/javascript.html#popovers)。是否可以只进行一次 Ajax 调用？现在，每次我将鼠标悬停在产品上时，都会再次发送请求。我想调整这段代码，所以如果内容已经被获取，使用它并且不要发出另一个请求。

谢谢

```
$(document).ready(function(){
    //Quick view boxes
    var overPopup = false;

    $("a[rel=popover]", '.favorites').popover({
        trigger: 'manual',
        placement: 'bottom',
        html: true,
        content: function(){
            var div_id =  "div-id-" + $.now();
            return details_in_popup(div_id, $(this).data('product-id'));
        }

    }).mouseover(function (e) {
        // when hovering over an element which has a popover, hide
        // them all except the current one being hovered upon
        $('[rel=popover]').not('[data-unique="' + $(this).data('unique') + '"]').popover('hide');
        var $popover = $(this);
        $popover.popover('show');

        $popover.data('popover').tip().mouseenter(function () {
            overPopup = true;
        }).mouseleave(function () {
            overPopup = false;
            $popover.popover('hide');
        });

    }).mouseout(function (e) {
        // on mouse out of button, close the related popover
        // in 200 milliseconds if you're not hovering over the popover
        var $popover = $(this);
        setTimeout(function () {
            if (!overPopup) {
                $popover.popover('hide');
            }
        }, 200);
    });
});

function details_in_popup(div_id, product_id){
    $.ajax({
        url: 'index.php?route=product/product/get_product_ajax',
        type: 'post',
        data: 'product_id=' + product_id,
        dataType: 'json',
        success: function(json){
            if (json['success']) {
                $('#' + div_id).html(json['success']);
            }

        }
    });
    return '<div id="'+ div_id +'">Loading...</div>';
} 
```

这是我的 html 结构的样子：

```
<div class="image">
    <a data-unique="unique-3" data-product-id="39" rel="popover" href="link to product">
        <img src="path to image" />
    </a>
</div> 
```

**更新：**

感谢大家的帮助和意见。这是我修复它的方法：

```
function details_in_popup(div_id, product_id){

    //I added this block
    if ( $("#popover_content_for_prod_" + product_id).length ) {
        return $("#popover_content_for_prod_" + product_id).html();
    }

    $.ajax({
        url: 'index.php?route=product/product/get_product_ajax',
        type: 'post',
        data: 'product_id=' + product_id,
        dataType: 'json',
        success: function(json){
            if (json['success']) {
                $('#' + div_id).html(json['success']);

                //Also added this line
                $('body').append('<div style="display:none;" id="popover_content_for_prod_' + product_id + '">' + json['success'] + '</div>');
            }

        }
    });

    return '<div id="'+ div_id +'">Loading...</div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:37:34.353

您总是可以只修改 ajax 函数以将检索到的数据存储在元素上`data()`，并在执行 ajax 调用之前检查是否存储了任何此类数据等。有点像“缓存”函数：

```
function details_in_popup(div_id, product_id){
    var data = $('#' + div_id).data(product_id);
    if ( data ) {
        $('#' + div_id).html(data);
    }else{
        $.ajax({
            url: 'index.php?route=product/product/get_product_ajax',
            type: 'post',
            data: 'product_id=' + product_id,
            dataType: 'json',
            success: function(json){
                if (json['success']) {
                    $('#' + div_id).html(json['success'])
                                   .data(product_id, json['success']);
                }

            }
        });
        return '<div id="'+ div_id +'">Loading...</div>';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:38:19.547

只需使用全局布尔变量`isFetched`。在 Ajax 请求之前检查，并且仅当为 false`isFetched`时才执行请求。`isFetched`

```
var overPopup = false;
var isFetched = false;
var data = '';
$("a[rel=popover]", '.favorites').popover({
    trigger: 'manual',
    placement: 'bottom',
    html: true,
    content: function(){
        var div_id =  "div-id-" + $.now();
        if(!isFetched){
            data = details_in_popup(div_id, $(this).data('product-id'));
        }
        isFetched = true;
        return data;
    }

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:41:55.307

使用隐藏元素存储 的值`boolean`并在 AJAX 调用之前获取它，然后在完成时设置它。

HTML：

```
<div id="hiddenElement" value="true" style="display:none; visibility:hidden;"></div> 
```

JS：

```
var once = $("hiddenElement").val();

if (once) {
    $.ajax({
        type: "POST", 
        url: "ajax.php?action=add_driver", 
        dataType: "json",
        date:  $("form#addDriver").serializeArray(),
        beforeSend: function() {
            $('.error, .success, .notice').remove();
        }
    }).done(function() {
        $("#hiddenElement").val("false");
    });
} 
```

# asp.net - 带有 recaptcha asp.net 的验证组

> ID：14961211
> 
> 赞同：1
> 
> 时间：2013-02-19T15:32:51.063
> 
> 标签：asp.net, validation, recaptcha

我在我的联系页面上有一个验证组，带有recaptcha。我知道这是一个众所周知的问题，我按照说明进行操作，但是每当我将验证组提交按钮时，RecaptchaControl_ServerValidate 都不会触发

```
 <asp:CustomValidator ID="RecaptchaValidator" runat="server" 
                OnServerValidate="RecaptchaValidator_ServerValidate" 
                ErrorMessage="Recaptcha input invalid." ValidationGroup="Uyelik" 
                EnableClientScript="False" />

      <recaptcha:Recaptchacontrol ID="RecaptchaControl" theme="custom" runat="server" publickey="6Lfr........."
                customthemewidget="recaptcha_widget" privatekey="6Lfr.........." />

      <asp:Button ID="btnSubmit" runat="server" Text="JOIN GOBLEN SANAT" 
        OnClick="btnSubmit_Click" ValidationGroup="Uyelik"/> 
```

代码背后

```
protected void RecaptchaValidator_ServerValidate(object source, ServerValidateEventArgs e)
    {
      this.RecaptchaControl.Validate();
      e.IsValid = this.RecaptchaControl.IsValid;
    }

 protected void btnSubmit_Click(object sender, EventArgs e)
    {

      if (Page.IsValid && RecaptchaControl.IsValid)
      {
        // do something
      }
      }
      else
      {

        lblResult.Visible = true;
        lblResult.Text = "Incorrect";

      }
    } 
```

注意：经过 15 小时的尝试，我设法让它工作，

关键是 CustomValidator、RequiredFieldValidator、CompareValidator 和 validationSummary 将所有验证器的 EnableClientScript 设置为 False 即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:44:21.403

尝试这个：

```
<recaptcha:RecaptchaControl ID="RecaptchaControl" runat="server" />

<asp:CustomValidator ID="RecaptchaValidator" runat="server" OnServerValidate="RecaptchaValidator_ServerValidate" ErrorMessage="Recaptcha input invalid." ValidationGroup="SomeValidationGroup" /> 
```

代码隐藏：

```
protected void RecaptchaValidator_ServerValidate(object sender, ServerValidateEventArgs e)
{
    this.RecaptchaControl.Validate();
    e.IsValid = this.RecaptchaControl.IsValid;
} 
```

# c# - Visual Studio 的 C# 自动事件处理程序生成。为什么它会创建一个新的委托？

> ID：14961213
> 
> 赞同：2
> 
> 时间：2013-02-19T15:32:57.647
> 
> 标签：c#, visual-studio-2010, visual-studio

当我编写时`_exporter.csvRowProcessed +=`，Visual Studio 2010 让我创建一个方法来处理所述事件，然后继续执行此操作：
`_exporter.csvRowProcessed += new CsvRowProcessedHandler(RowProcessedHandler);`

我想知道的是，为什么它会创建一个新的委托，然后为其分配一个处理程序方法，而不是像这样直接将处理程序方法分配给事件？

```
exporter.csvRowProcessed += RowProcessedHandler; 
```

这是整个代码以防万一。

```
 private void bg_DoWork(object sender, DoWorkEventArgs e)
    {
        object[][] data = _grid.AsMatrix();
        _exporter.csvRowProcessed += new CsvRowProcessedHandler(RowProcessedHandler);
        string csv = _exporter.CreateCSVString(data);

        StreamWriter writer = new StreamWriter(_path, false);
        writer.Write(csv);
        writer.Close();
    }

    void RowProcessedHandler(object o, int currentRow)
    {
        radProgressBarElement.Text = "Procesando linea " + currentRow;
        radProgressBarElement.Value1 = currentRow;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:34:13.427

两种形式都创建了一个新的委托*实例*。据我所知，它们在生成的代码中是等价的。

虽然我也更喜欢方法组转换，但我怀疑这并没有改变（在 VS 2012 之前，如评论中所述）只是因为这样做没有足够的好处。事实上，有些人甚至可能更喜欢显示正在创建的委托类型的更明确的形式。

# excel - Vlookup 将值从工作表 1 填充到工作表 2

> ID：14961215
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:33:05.783
> 
> 标签：excel, vba

我正在寻找将使用 Vlookup 函数的 VBA 代码，如下所示：

1.  在“数据”表中查找名为 Hot Data Campaign ID 的列，在它的所有单元格中，它将实现 vlookup 公式

2.  Vlookup 公式应包括：

    a) 因为`Lookup_value`它会在“数据”表中搜索名为 Source Code 的列并获取位于那里的值

    b) 因为`Table_array`它将转到“Vlookup”表并将前 4 列标记为表格数组

    C）`Col_index_num = 2`

    d)`Range_lookup = False`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:59:39.130

更改工作表（“数据”）。选择包含您的数据的工作表的实际名称

```
Sub VLookupMacro()
    Dim FormulaCol As Long
    Dim LookupCol As Long
    Dim TotalRows As Long
    Dim TotalCols As Long
    Dim i As Long

    Sheets("Data").Select
    TotalRows = ActiveSheet.UsedRange.Rows.Count
    TotalCols = ActiveSheet.UsedRange.Columns.Count

    For i = 1 To TotalCols
        If Cells(1, i).Value = "Hot Data Campaign ID" Then FormulaCol = i
        If Cells(1, i).Value = "Source Code" Then LookupCol = i
    Next

    Cells(2, FormulaCol).Formula = "=VLOOKUP(" & Cells(2, LookupCol).Address(False, False) & ",Vlookup!A:D,2,FALSE)"
    Cells(2, FormulaCol).AutoFill Destination:=Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
    With Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
        .Value = .Value
    End With
End Sub 
```

# mysql - 如何加入具有相同表但不同条件的另一个表

> ID：14961219
> 
> 赞同：1
> 
> 时间：2013-02-19T15:33:13.677
> 
> 标签：mysql, sql, inner-join

我想显示学生毕业的学校。我有一张学校名称表和一张学生资料表。这是我的代码：

**school_db**

```
shc_id       shc_title
1            School A
2            School B
3            School C
4            School D
5            School E 
```

**学生数据库**

```
stu_id       stu_school1         stu_school2           stu_school3
1                 1                   2                     2
2                 1                   2                     4
3                 2                   2                     4 
```

所以我写：

```
select school_db.sch_title as school from school_db
inner join student_db on student_db.stu_school1=school_db.shc_id
inner join student_db on student_db.stu_school2=school_db.shc_id
inner join student_db on student_db.stu_school3=school_db.shc_id
where student_db.stu_id='1' 
```

但是我没有得到正确的结果。那么您能否建议在这种情况下如何使用正确的连接。

我希望结果是这样的：

```
stu_id        stu_school1         stu_school2           stu_school3
1             School A            School B              School B
2             School A            School B              School D
3             School B            School B              School D 
```

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:37:42.643

您应该在 table`school_db`上三次加入 table，`student_db`以便您可以获得 table 上每一列的值`student_db`。

还有一件事，您应该在表上唯一定义别名，`school_db`以便服务器可以识别表和列已连接到哪些。

```
SELECT  a.stu_id,
        b.shc_title sc1,
        c.shc_title sc2,
        d.shc_title sc3
FROM    student_db a
        INNER JOIN school_db b
            ON a.stu_school1 = b.shc_id
        INNER JOIN school_db c
            ON a.stu_school2 = c.shc_id
        INNER JOIN school_db d
            ON a.stu_school3 = d.shc_id
WHERE   a.stu_id = '1' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/980f6/5)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:35:56.370

每个重新加入都必须有一个唯一的别名：

```
INNER JOIN student_db AS db1 ON school_db.shc_id = db1.stu_school1
                      ^^^^^^                       ^^^
INNER JOIN student_db AS db2 etc... 
```

至于您的结果，您想要的称为数据透视查询，MySQL 不直接支持该查询。有解决方法，但它们非常丑陋且难以维护。您最好执行常规查询，然后在客户端中进行表格格式化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T15:38:31.787

您的错误是与一张学校表的表学生加入 3 次，而您的问题是关于一名学生拥有 3 所学校：

```
SELECT 
    student_db.stu_id, 
    s1.sch_title as school1, 
    s2.sch_title as school2, 
    s3.sch_title as school3
FROM 
    student_db
        INNER JOIN school_db s1 ON student_db.stu_school1=s1.shc_id
        INNER JOIN school_db s2 ON student_db.stu_school2=s2.shc_id
        INNER JOIN school_db s3 ON student_db.stu_school3=s3.shc_id
WHERE student_db.stu_id='1' 
```

但是当并不总是有 3 所学校时，您应该展示：

```
SELECT 
    student_db.stu_id, 
    s1.sch_title as school1, 
    IFNULL(s2.sch_title, 'No school selected') as school2, 
    IFNULL(s3.sch_title, 'No school selected') as school3
FROM 
    student_db
        INNER JOIN school_db s1 ON student_db.stu_school1=s1.shc_id
        LEFT JOIN school_db s2 ON student_db.stu_school2=s2.shc_id
        LEFT JOIN school_db s3 ON student_db.stu_school3=s3.shc_id
WHERE student_db.stu_id='1' 
```

# javascript - Javascript数组声明

> ID：14961224
> 
> 赞同：0
> 
> 时间：2013-02-19T15:33:22.003
> 
> 标签：javascript, arrays

这将创建什么对象？我以前从未见过这个声明，所以我只是想知道。

```
`myArray([]);
 for(someValue = 0; someValue < someOtherValue; i++)
     myArray.push(something[i]);
` 
```

感谢您能给我的任何见解。

编辑：我更新了一些代码以提供更多信息。myArray 在代码中对我来说似乎不是一个函数。这在 AjaxCall 中使用。它之后的一些行是这样使用的

因此，除非我错过了某些东西，否则我认为它不是功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:34:56.213

`[]`是一个空数组文字，它被传递给一个`myArray`接受数组作为参数的函数。这不是一个声明，它只是一个函数调用。可以这样定义：

```
function myArray(array) {
    for (var i = 0; i < 5; i++) {
        array[i] = i;
    }
}

var array = []; // empty array to be filled later

myArray(array); 
```

这会用 0 到 4 的数字填充数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:35:03.443

您正在调用该函数`myArray`并传入任何空数组文字，这些文字由以下内容定义：`[]`。功能是什么`myArray`样的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:35:07.420

如果`myArray`是您正在调用的函数，`[]`则将一个空数组作为第一个参数传递给它

和做的一样

```
var arr = new Array();
myArray(arr); 
```

# android - Android - 在一个地方的 android mapView 中绘制一个弹出窗口

> ID：14961227
> 
> 赞同：0
> 
> 时间：2013-02-19T15:33:37.850
> 
> 标签：android, dictionary, popupwindow

我想`popup`在`mapView`. 我在网上看过一些代码，但它们太复杂而无法理解。我只想`popup`在一个地方创建一个窗口。

如果您有此代码或链接，请与我分享。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:40:39.610

如果您愿意使用 Maps V2，那么您可以在 android-sdk 目录 > extras > google > google_play_service > samples > maps 中找到一些示例代码

我相信你会在那里找到你需要的东西

# java - BufferedReader 在最后一行没有返回 null

> ID：14961232
> 
> 赞同：3
> 
> 时间：2013-02-19T15:33:47.313
> 
> 标签：java

最后一行不包含任何内容，但它不返回`null`。代码如下

使用调试时`Eclipse`，我`line= ""`在调试模式下看到，如何防止这种情况发生

```
BufferedReader br = new BufferedReader(new FileReader(file));
String line;
while ((line = br.readLine()) != null) {
   // process the line.
}
br.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:36:28.143

您不阻止它发生，空行是一行，因此它将按原样返回。

您可以做的是在处理之前检查该行是否为空：

```
BufferedReader br = new BufferedReader(new FileReader(file));
String line;
while ((line = br.readLine()) != null) {
   if (!line.isEmpty()) {
       // process the line.
   }
}
br.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T15:36:14.117

BufferedReader.readLine() 方法在到达文件末尾时返回 null。

您的程序似乎在到达文件末尾之前正在读取文件中的行。终止的条件是该行为空，空字符串不为空，因此它循环并且不会终止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T15:40:58.210

nulll = 没有。"" = 空。如果最后一行为空，则应为“”。以下行应为空。

从那里您可以测试是否为空（我喜欢 appache StringUtils isEmpty）或在处理之前从文件中删除最后一个 \n。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T15:36:22.667

如果该行由单个换行符组成，`line`将为空`String`，但`readLine`不会返回 null。`readLine`仅在到达文件末尾时才返回 null 。

# c# - 如何在后面的代码中访问资源文件的值

> ID：14961238
> 
> 赞同：1
> 
> 时间：2013-02-19T15:34:18.127
> 
> 标签：c#, .net, wpf, silverlight

在`xml`我可以通过提供相应的键来访问资源文件的值。首先，我添加了如下命名空间

```
xmlns:res="clr-namespace:WpfApplication3.Properties" 
```

然后使用以下方式绑定文本

```
Text="{x:Static res:Resources.city}" 
```

但是在我的同一个应用程序中，我必须在后面的代码中使用它。我应该怎么做才能访问我的资源文件？

当我计算资源文件的键时，我发现它`0`没有任何意义，因为我的资源文件中有很多键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:49:55.943

这应该很简单：

```
var cityName = Properties.Resources.city; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-02T02:30:01.833

如果资源文件是`UserControl`/的本地文件，`Window`那么试试这个......

在顶部的 usings 后面的代码中...

`using Resx = NameSpace.Resources`......在这里称它为你喜欢的名字。

呜`NameSpace`？- 在资源文件中查找它，`.Designer.cs`即代码所在的命名空间。

然后在后面的代码中......

`string actualText = Resx.Class.propertyNameOfResource`

呜`Class`？- 这个你现在在（双关语） Wut `propertyNameOfResource`- 那是资源密钥。VS Intellisense 应该在那里工作。

[https://github.com/mrlacey/StringResourceVisualizer](https://github.com/mrlacey/StringResourceVisualizer)也很方便，它显示了 Visual Studio 中的实际字符串

但是，如果您将它分配给 UI 控件的内容，那么您只是破坏了以前拥有的任何绑定。

# iphone - 使用 NSJSONSerializer iOS 发布 http JSON 请求

> ID：14961239
> 
> 赞同：2
> 
> 时间：2013-02-19T15:34:19.460
> 
> 标签：iphone, ios, objective-c, json, nsjsonserialization

这是我的代码：

在我的.m

```
NSArray *keys = [NSArray arrayWithObjects:@"Training_Code", @"Training_Duration",@"Training_Startdate",@"Training_Enddate",@"Trainer_ID",@"Training_Location",@"Comments",@"Keyword",@"NumberofDays", nil];
NSArray *objects = [NSArray arrayWithObjects:@"Training_Code", @"Training_Duration",@"Training_Startdate",@"Training_Enddate",@"Trainer_ID",@"Training_Location",@"Comments",@"Keyword",@"NumberofDays", nil];
NSData *jsonData;
NSString *jsonString;
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

if([NSJSONSerialization isValidJSONObject:jsonDictionary])
{
    jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:nil];
    jsonString = [[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding];
}

// Be sure to properly escape your url string.
NSURL *url1 = [NSURL URLWithString:@"http://xx.xx.xx.xxx/DeployiOSCalender/service1.asmx"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url1];
[request setHTTPMethod:@"POST"];
[request setHTTPBody: jsonData];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];

NSError *errorReturned = nil;
NSURLResponse *theResponse =[[NSURLResponse alloc]init];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];

if (errorReturned) {
    // Handle error.
}
else
{
    NSError *jsonParsingError = nil;
    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments error:&jsonParsingError];
} 
```

这将返回我的数据：

```
{
d = "[{\"Training_Code\":\"1234      \",\"Training_Duration\":\"2hrs      \",\"Training_Startdate\":\"14/02/2013 15:00:00\",\"Training_Enddate\":\"14/02/2013 17:00:00\",\"Trainer_ID\":1,\"Training_Location\":\"B-Wing Training room-4\",\"Comments\":\"C# training\",\"Keyword\":\"C#1234\",\"NumberofDays\":1},{\"Training_Code\":\"4321      \",\"Training_Duration\":\"16        \",\"Training_Startdate\":\"17/02/2013 10:30:00\",\"Training_Enddate\":\"17/02/2013 17:30:00\",\"Trainer_ID\":2,\"Training_Location\":\"A-Wing Training Room-6\",\"Comments\":\"Objective-C\",\"Keyword\":\"Obj-C4321\",\"NumberofDays\":2}]";
} 
```

这不是正确的格式。我想让它像这样：

```
[{"Training_Code":"1234      ","Training_Duration":"2hrs      ","Training_Startdate":"14/02/2013 15:00:00","Training_Enddate":"14/02/2013 17:00:00","Trainer_ID":1,"Training_Location":"B-Wing Training room-4","Comments":"C# training","Keyword":"C#1234","NumberofDays":1},{"Training_Code":"4321      ","Training_Duration":"16        ","Training_Startdate":"17/02/2013 10:30:00","Training_Enddate":"17/02/2013 17:30:00","Trainer_ID":2,"Training_Location":"A-Wing Training Room-6","Comments":"Objective-C","Keyword":"Obj-C4321","NumberofDays":2} 
```

注意：我的网络服务返回正确的 json 格式。

我需要做些什么来实现这一点。请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:55:29.970

您说您的 Web 服务正在返回正确的 JSON，*但显然不是*. 您应该与您的 Web 服务开发人员交谈并找出他们返回格式错误的 JSON 的原因。简而言之，您从 Web 服务返回的内容不能被解析为 JSON——除非您进行一些字符串提取（呃）。

考虑您的响应数据，格式更好：

```
{

d = "
    [
        {
            \"Training_Code\":\"1234      \",
            \"Training_Duration\":\"2hrs      \",
            \"Training_Startdate\":\"14/02/2013 15:00:00\",
            \"Training_Enddate\":\"14/02/2013 17:00:00\",
            \"Trainer_ID\":1,
            \"Training_Location\":\"B-Wing Training room-4\",
            \"Comments\":\"C# training\",
            \"Keyword\":\"C#1234\",
            \"NumberofDays\":1
        },
        {
            \"Training_Code\":\"4321      \",
            \"Training_Duration\":\"16        \",
            \"Training_Startdate\":\"17/02/2013 10:30:00\",
            \"Training_Enddate\":\"17/02/2013 17:30:00\",
            \"Trainer_ID\":2,
            \"Training_Location\":\"A-Wing Training Room-6\",
            \"Comments\":\"Objective-C\",
            \"Keyword\":\"Obj-C4321\",
            \"NumberofDays\":2
        }
    ]
    ";

} 
```

首先，将您的数据响应转换为字符串：

```
NSString *json = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

然后你需要把它从顶部剥离：

```
{
    d = " 
```

这是从底部开始的

```
 ";

} 
```

然后，您可以使用以下代码替换所有转义引号：

```
json = [json stringByReplacingOccurrencesOfString:@"\\\"" withString:@"\""]; 
```

此时，您的字符串应该是可解析的 JSON，如下所示：

```
[
 {
   "Training_Code":"1234      ",
   "Training_Duration":"2hrs      ",
   "Training_Startdate":"14/02/2013 15:00:00",
   "Training_Enddate":"14/02/2013 17:00:00",
   "Trainer_ID":1,
   "Training_Location":"B-Wing Training room-4",
   "Comments":"C# training",
   "Keyword":"C#1234",
   "NumberofDays":1
 },
 {
   "Training_Code":"4321      ",
   "Training_Duration":"16        ",
   "Training_Startdate":"17/02/2013 10:30:00",
   "Training_Enddate":"17/02/2013 17:30:00",
   "Trainer_ID":2,
   "Training_Location":"A-Wing Training Room-6",
   "Comments":"Objective-C",
   "Keyword":"Obj-C4321",
   "NumberofDays":2
 }
] 
```

所以你可以这样做：

```
id object = [NSJSONSerialization JSONObjectWithData:[json dataUsingEncoding:NSUTF8StringEncoding] options:0 error:&error]; 
```

现在`object`应该将包含您的两条记录的数组保存为字典。

不过，如果是我，我会回到 Web 服务开发人员那里，要求他们修复发送给您的响应。您不必处理所有这些字符串提取废话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:56:31.623

Trainer_ID 和 NumberofDays 是原始的。您不能按原样将 then 添加到 NSArray 中。您应该将它们包装到 NSNumber 中：

```
NSArray *objects = [NSArray arrayWithObjects:Training_Code, Training_Duration,Training_Startdate,Training_Enddate,[NSNumber numberWithInt:Trainer_ID],Training_Location,Comments,Keyword,[NSNumber numberWithInt:NumberofDays], nil]; 
```

# panel - 添加控件，如 appBar

> ID：14961242
> 
> 赞同：1
> 
> 时间：2013-02-19T15:34:29.567
> 
> 标签：panel, windows-phone, application-bar

我需要你的帮助。

我需要在我的项目中，在我的页面末尾添加一个控件（可以在堆栈面板中或不在堆栈面板中），例如应用程序栏，

意思是，如果我在所有页面上都有一个列表框，并且我在页面末尾添加了一个控件，那么现在我需要列表框从页面的开头开始，但直到控件和不要继续在所有页面上的控制下。

我需要动态地（在代码中）进行。

有人知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T03:48:23.737

您正在考虑`Grid`行分配，就像我看到的那样。[屏幕方向快速入门](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207002%28v=vs.105%29.aspx)中简要介绍的内容。如果你有三排，让中间的占据所有空间，而顶部和底部占据固定数量的空间。

# c# - 使用 OpenXML SDK 将所有单元格值作为字符串抓取

> ID：14961243
> 
> 赞同：2
> 
> 时间：2013-02-19T15:34:30.823
> 
> 标签：c#, excel, openxml-sdk

我想以类似 SAX 的方式使用 OpenXML SDK v2.0 读取 Excel 2007+ 文档。我使用这篇博文作为粗略指南：http: [//blogs.msdn.com/b/brian_jones/archive/2010/05/27/parsing-and-reading-large-excel-files-with-the-open -xml-sdk.aspx](http://blogs.msdn.com/b/brian_jones/archive/2010/05/27/parsing-and-reading-large-excel-files-with-the-open-xml-sdk.aspx)

但是，在我的文档中，我混合了字符串和数值。因此，字符串值被存储为 SharedString，因此当为这样的单元格读取 CellValue 时，我得到一个数字，我读到的是索引（因此需要获取 InnerText）。这似乎增加了太多的复杂性。无论如何，我是否可以简单地将工作表中的所有单元格视为文本/字符串，并以类似于博客文章示例的方式遍历所有获取值的单元格？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T13:28:33.203

以下内容会有帮助吗？

```
List<string> listShared = new List<string>();
using (SpreadsheetDocument xl = SpreadsheetDocument.Open("YourFile.xlsx", false))
{
    SharedStringItem ssi;
    using (OpenXmlReader oxrShared = OpenXmlReader.Create(xl.WorkbookPart.SharedStringTablePart))
    {
        while (oxrShared.Read())
        {
            if (oxrShared.ElementType == typeof(SharedStringItem))
            {
                ssi = (SharedStringItem)oxrShared.LoadCurrentElement();
                // this assumes the shared string is a simple text format, instead of rich text.
                listShared.Add(ssi.Text.Text);
            }
        }
    }

    WorksheetPart wsp = xl.WorkbookPart.WorksheetParts.First();
    Cell c;
    using (OpenXmlReader oxrCells = OpenXmlReader.Create(wsp))
    {
        while (oxrCells.Read())
        {
            if (oxrCells.ElementType == typeof(Cell))
            {
                c = (Cell)oxrCells.LoadCurrentElement();
                // c.CellReference holds a string such as "A1"
                if (c.DataType != null)
                {
                    if (c.DataType == CellValues.SharedString)
                    {
                        // use whichever from-string-to-number conversion
                        // you like.
                        //listShared[Convert.ToInt32(c.CellValue.Text)];
                    }
                    else if (c.DataType == CellValues.Number)
                    {
                        // "normal" value
                        //c.CellValue.Text;
                    }
                    // there's also boolean, which you might be interested
                    // as well as other types
                }
                else
                {
                    // is by default a Number. Use this:
                    //c.CellValue.Text;
                }
            }
        }
    }
} 
```

注意：没有错误绑定检查或无效检查。它旨在说明如何以最简单的最小方式获取共享字符串。

此外，共享字符串列表被假定为“简单”共享字符串，这意味着没有富文本。

逻辑是您将工作表中的共享字符串列表加载到您可以轻松操作的列表中。然后，当您遍历单元格时，如果您看到数据类型为 SharedString 的单元格，则可以再次检查列表。如果单元格的数据类型为数字，则照常进行。

# css - CSS 'content' 属性可以获取内联样式的值吗？

> ID：14961245
> 
> 赞同：0
> 
> 时间：2013-02-19T15:34:35.133
> 
> 标签：css, pseudo-element

我想做类似以下的事情：

```
<div style="background-image: url(http://some_url.com);"></div>

div:after {
    content: attr(style[background-image]);
} 
```

这里的目标是我想从内联应用于 html 元素的内容中获取内容的值。这是可能的，如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:36:50.233

`attr()`仅适用于 HTML 属性，不适用于 CSS 属性。即使您可以获得`attr(style)`（您实际上*可以获得*），您也只会获得该属性的文本值，即以下字符串：

```
"background-image: url(http://some_url.com);" 
```

但是，您将无法对这个文本值做任何有意义的事情（除了打印它`content`可能）。

如果您希望您的伪元素具有与您的元素相同的背景图像，请使用：

```
div:after {
    background-image: inherit;
} 
```

同样，这本身并不是很有意义。您必须指定其他样式，例如其他`background`属性值，并为其指定尺寸。

如果您想获取背景图片的 URL 并将其作为内容打印出来，那么 CSS 无法做到这一点。您需要使用 JavaScript 查看计算`background-image`值、解析该值并将其作为内容插入，而不是使用`:after`伪元素。

# youtube-api - 如何在 YouTube Data API v3 中获取当前用户的个人资料信息

> ID：14961246
> 
> 赞同：10
> 
> 时间：2013-02-19T15:34:37.113
> 
> 标签：youtube-api

在 V2 中，您可以点击`/api/users/default`路径来获取信息，例如用户的用户名。这记录在这里：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_profiles](https://developers.google.com/youtube/2.0/developers_guide_protocol_profiles)

在我们向 V3 的迁移中，我还需要能够提取用户的用户名，但找不到任何说明如何这样做的文档。这个功能是在 V3 中复制的，还是有另一种方法来完成这个任务？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T15:47:02.023

在 v3 中，用户信息基本上是频道信息。通过执行频道->列表“ [https://developers.google.com/youtube/v3/docs/channels/list](https://developers.google.com/youtube/v3/docs/channels/list) ”，您将获得“snippet.channelId”下的信息“ [https://developers.google.com /youtube/v3/docs/channels#snippet.channelId](https://developers.google.com/youtube/v3/docs/channels#snippet.channelId) "

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-05T05:56:31.200

Youtube API v3 不再支持用户信息。使用用户信息 API。

设置范围：（范围`https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/userinfo.profile` 之间的空格）

并得到：`https://www.googleapis.com/oauth2/v1/userinfo?access_token={access_token}`

# git - 'git merge' 是如何详细工作的？

> ID：14961255
> 
> 赞同：117
> 
> 时间：2013-02-19T15:35:13.520
> 
> 标签：git, merge, conflict

我想知道“git merge”背后的确切算法（或接近该算法）。至少对这些子问题的答案会有所帮助：

*   git 如何检测特定非冲突更改的上下文？
*   git 如何发现这些确切的行中存在冲突？
*   git 会自动合并哪些东西？
*   当没有合并分支的共同基础时，git如何执行？
*   当合并分支有多个公共基础时，git如何执行？
*   当我一次合并多个分支时会发生什么？
*   合并策略有什么区别？

但是对整个算法的描述会好很多。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-19T16:33:24.483

您最好寻找 3 路合并算法的描述。高层次的描述会是这样的：

1.  找到一个合适的合并基础`B`- 文件的一个版本，它是两个新版本 (`X`和`Y`) 的祖先，通常是最近的此类基础（尽管在某些情况下它必须更进一步，这是`git`s 默认`recursive`合并的特点）
2.  执行`X`with`B`和`Y`with的差异`B`。
3.  浏览两个差异中标识的更改块。如果双方在同一地点引入相同的更改，则接受其中一个；如果一个人引入了变化而另一个人不理会该区域，则在决赛中引入变化；如果两者都在某个位置引入了更改，但它们不匹配，则将冲突标记为手动解决。

完整的算法更详细地处理了这个问题，甚至还有一些文档（[https://github.com/git/git/blob/master/Documentation/technical/trivial-merge.txt](https://github.com/git/git/blob/master/Documentation/technical/trivial-merge.txt)一个，以及`git help XXX`页面，其中 XXX 是`merge-base`、`merge-file`、`merge`和`merge-one-file`可能的其他几个之一）。如果这还不够深，总有源代码......

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-17T15:46:55.597

**当合并分支有多个公共基础时，git如何执行？**

这篇文章很有帮助：[http](http://codicesoftware.blogspot.com/2011/09/merge-recursive-strategy.html) ://codicesoftware.blogspot.com/2011/09/merge-recursive-strategy.html （这里是[第 2 部分](http://blog.plasticscm.com/2012/01/more-on-recursive-merge-strategy.html)）。

Recursive 递归地使用 diff3 来生成一个虚拟分支，该分支将用作祖先。

例如：

```
(A)----(B)----(C)-----(F)
        |      |       |
        |      |   +---+
        |      |   |
        |      +-------+
        |          |   |
        |      +---+   |
        |      |       |
        +-----(D)-----(E) 
```

然后：

```
git checkout E
git merge F 
```

有 2 个最好的共同祖先（不是任何其他祖先的共同祖先），`C`和`D`. Git 将它们合并为一个新的虚拟分支`V`，然后`V`用作基础。

```
(A)----(B)----(C)--------(F)
        |      |          |
        |      |      +---+
        |      |      |
        |      +----------+
        |      |      |   |
        |      +--(V) |   |
        |          |  |   |
        |      +---+  |   |
        |      |      |   |
        |      +------+   |
        |      |          |
        +-----(D)--------(E) 
```

我想如果有更多最好的共同祖先，Git 会继续下去，`V`与下一个合并。

文章说，如果在生成虚拟分支时发生合并冲突，Git 只会将冲突标记留在原处并继续。

**当我一次合并多个分支时会发生什么？**

正如@Nevik Rehnel 解释的那样，这取决于策略，在`man git-merge` `MERGE STRATEGIES`章节中有很好的解释。

仅`octopus`和`ours`/`theirs`支持一次合并多个分支，`recursive`例如不支持。

`octopus`如果存在冲突，则拒绝合并，并且`ours`是微不足道的合并，因此不会发生冲突。

这些命令生成一个新的提交将有两个以上的父级。

我`merge -X octopus`在 Git 1.8.5 上做了一个，没有冲突，看看它是怎么回事。

初始状态：

```
 +--B
   |
A--+--C
   |
   +--D 
```

行动：

```
git checkout B
git merge -Xoctopus C D 
```

新状态：

```
 +--B--+
   |     |
A--+--C--+--E
   |     |
   +--D--+ 
```

正如所料，`E`有3个父母。

TODO：章鱼如何对单个文件修改进行操作。递归二乘二三路合并？

**当没有合并分支的共同基础时，git如何执行？**

@Torek 提到，从 2.9 开始，没有`--allow-unrelated-histories`.

我在 Git 1.8.5 上根据经验进行了尝试：

```
git init
printf 'a\nc\n' > a
git add .
git commit -m a

git checkout --orphan b
printf 'a\nb\nc\n' > a
git add .
git commit -m b
git merge master 
```

`a`包含：

```
a
<<<<<<< ours
b
=======
>>>>>>> theirs
c 
```

然后：

```
git checkout --conflict=diff3 -- . 
```

`a`包含：

```
<<<<<<< ours
a
b
c
||||||| base
=======
a
c
>>>>>>> theirs 
```

解释：

*   基地是空的
*   当 base 为空时，无法解析对单个文件的任何修改；只能解决诸如添加新文件之类的问题。上述冲突将通过与 base 的 3 路合并`a\nc\n`作为单行添加来解决
*   我*认为*没有基础文件的3路合并称为2路合并，这只是一个差异

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-30T17:57:36.083

我也很感兴趣。我不知道答案，但是...

> 一个有效的复杂系统总是被发现是从一个有效的简单系统演变而来的

我认为 git 的合并非常复杂，而且很难理解——但解决这个问题的一种方法是从它的前身出发，并专注于你关注的核心。也就是说，给定两个没有共同祖先的文件， git merge 如何计算出如何合并它们，以及冲突在哪里？

让我们试着找到一些前兆。来自`git help merge-file`：

```
git merge-file is designed to be a minimal clone of RCS merge; that is,
       it implements all of RCS merge's functionality which is needed by
       git(1). 
```

来自维基百科：[http](http://en.wikipedia.org/wiki/Three-way_merge#Three-way_merge) ://en.wikipedia.org/wiki/Git_%28software%29 -> [http://en.wikipedia.org/wiki/Three-way_merge#Three-way_merge](http://en.wikipedia.org/wiki/Git_%28software%29) -> [http://en.wikipedia .org/wiki/Diff3](http://en.wikipedia.org/wiki/Diff3) -> [http://www.cis.upenn.edu/~bcpierce/papers/diff3-short.pdf](http://www.cis.upenn.edu/~bcpierce/papers/diff3-short.pdf)

`diff3`最后一个链接是详细描述该算法的论文的 pdf 。这是一个[google pdf-viewer 版本](https://docs.google.com/viewer?url=http://www.cis.upenn.edu/~bcpierce/papers/diff3-short.pdf)。它只有 12 页长，算法只有几页——但它是一个全面的数学处理。这可能看起来有点过于正式，但如果你想了解 git 的合并，你需要先了解更简单的版本。我还没有检查过，但是对于类似 的名称`diff3`，您可能还需要了解 diff（它使用[*最长的公共子序列*](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)算法）。`diff3`但是，如果您有谷歌，可能会有更直观的解释......

* * *

现在，我只是做了一个比较`diff3`和的实验`git merge-file`。它们采用相同的三个输入文件*version1 oldversion version2*并以相同的方式标记冲突，用`<<<<<<< version1`, `=======`, `>>>>>>> version2`（`diff3`也有`||||||| oldversion`），显示它们的共同遗产。

*我为oldversion*使用了一个空文件，为*version1*和*version2*使用了几乎相同的文件，只在*version2*中添加了一行。

结果：`git merge-file`将单个更改的行识别为冲突；但`diff3`将整个两个文件视为冲突。因此，与 diff3 一样复杂，git 的合并更加复杂，即使对于这种最简单的情况也是如此。

这是实际结果（我使用了@twalberg 对文本的回答）。请注意所需的选项（请参阅相应的联机帮助页）。

**`$ git merge-file -p fun1.txt fun0.txt fun2.txt`**

```
You might be best off looking for a description of a 3-way merge algorithm. A
high-level description would go something like this:

    Find a suitable merge base B - a version of the file that is an ancestor of
both of the new versions (X and Y), and usually the most recent such base
(although there are cases where it will have to go back further, which is one
of the features of gits default recursive merge) Perform diffs of X with B and
Y with B.  Walk through the change blocks identified in the two diffs. If both
sides introduce the same change in the same spot, accept either one; if one
introduces a change and the other leaves that region alone, introduce the
change in the final; if both introduce changes in a spot, but they don't match,
mark a conflict to be resolved manually.
<<<<<<< fun1.txt
=======
THIS IS A BIT DIFFERENT
>>>>>>> fun2.txt

The full algorithm deals with this in a lot more detail, and even has some
documentation (/usr/share/doc/git-doc/technical/trivial-merge.txt for one,
along with the git help XXX pages, where XXX is one of merge-base, merge-file,
merge, merge-one-file and possibly a few others). If that's not deep enough,
there's always source code... 
```

**`$ diff3 -m fun1.txt fun0.txt fun2.txt`**

```
<<<<<<< fun1.txt
You might be best off looking for a description of a 3-way merge algorithm. A
high-level description would go something like this:

    Find a suitable merge base B - a version of the file that is an ancestor of
both of the new versions (X and Y), and usually the most recent such base
(although there are cases where it will have to go back further, which is one
of the features of gits default recursive merge) Perform diffs of X with B and
Y with B.  Walk through the change blocks identified in the two diffs. If both
sides introduce the same change in the same spot, accept either one; if one
introduces a change and the other leaves that region alone, introduce the
change in the final; if both introduce changes in a spot, but they don't match,
mark a conflict to be resolved manually.

The full algorithm deals with this in a lot more detail, and even has some
documentation (/usr/share/doc/git-doc/technical/trivial-merge.txt for one,
along with the git help XXX pages, where XXX is one of merge-base, merge-file,
merge, merge-one-file and possibly a few others). If that's not deep enough,
there's always source code...
||||||| fun0.txt
=======
You might be best off looking for a description of a 3-way merge algorithm. A
high-level description would go something like this:

    Find a suitable merge base B - a version of the file that is an ancestor of
both of the new versions (X and Y), and usually the most recent such base
(although there are cases where it will have to go back further, which is one
of the features of gits default recursive merge) Perform diffs of X with B and
Y with B.  Walk through the change blocks identified in the two diffs. If both
sides introduce the same change in the same spot, accept either one; if one
introduces a change and the other leaves that region alone, introduce the
change in the final; if both introduce changes in a spot, but they don't match,
mark a conflict to be resolved manually.
THIS IS A BIT DIFFERENT

The full algorithm deals with this in a lot more detail, and even has some
documentation (/usr/share/doc/git-doc/technical/trivial-merge.txt for one,
along with the git help XXX pages, where XXX is one of merge-base, merge-file,
merge, merge-one-file and possibly a few others). If that's not deep enough,
there's always source code...
>>>>>>> fun2.txt 
```

如果你真的对此感兴趣，那就有点像兔子洞了。对我来说，它似乎和正则表达式、diff 的*最长公共子序列*算法、上下文无关文法或关系代数一样深。如果你想深入了解它，我认为你可以，但这需要一些坚定的研究。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T15:50:42.660

> git 如何检测特定非冲突更改的上下文？
> git 如何发现这些确切的行中存在冲突？

如果同一行在合并的两边都发生了变化，那就是冲突；如果他们没有，则接受来自一侧的更改（如果存在）。

> git 会自动合并哪些东西？

不冲突的更改（见上文）

> 当合并分支有多个公共基础时，git如何执行？

根据[Git merge-base](http://git-scm.com/docs/git-merge-base)的定义，只有一个（最新的共同祖先）。

> 当我一次合并多个分支时会发生什么？

这取决于合并策略（只有`octopus`和`ours`/`theirs`策略支持合并两个以上的分支）。

> 合并策略有什么区别？

这在[`git merge`手册页](http://git-scm.com/docs/git-merge)中有解释。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-23T21:17:17.953

这是原始实现

[http://git.kaarsemaker.net/git/blob/857f26d2f41e16170e48076758d974820af685ff/git-merge-recursive.py](http://git.kaarsemaker.net/git/blob/857f26d2f41e16170e48076758d974820af685ff/git-merge-recursive.py)

基本上，您为两个提交创建一个共同祖先列表，然后递归地合并它们，或者快速转发它们，或者创建用于文件三向合并基础的虚拟提交。

# vb.net - VB.NET 中的 'List(Of Byte())' 到 'Byte()'

> ID：14961261
> 
> 赞同：2
> 
> 时间：2013-02-19T15:35:34.090
> 
> 标签：vb.net

我有一个字节列表：

```
Public Function GenPackets()
    Dim Stream As NetworkStream = ConnectionSocket.GetStream()
    Dim DataList As New List(Of Byte())
    Dim Data As Byte()
    DataList.Add(IntegerToByte(My.Settings.BotUID))

    ' TO DO       Stream.Write(Data, 0, 3)
    Return Data
End Function 
```

如何将`DataList`其所有字节转换为单个 Byte() 以用于`Stream.Write`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T15:38:46.113

无需转换您的数据，只需遍历列表：

```
For Each buffer As Byte() In Datalist
    yourStream.Write(buffer)
Next 
```

这比首先连接所有单独的数组以创建一个大数组要有效得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T15:47:36.307

正如 Konrad Rudolph 已经写的那样，您不需要为了将其写入流中而将数据展平。

为了完整起见，您可以像这样展平数据列表

```
Dim dataList As New List(Of Byte())
Dim data As Byte()

data = dataList.SelectMany(Function(x) x).ToArray() 
```

或者使用 LINQ 语法

```
data = (From bytes In dataList From x In bytes Select x).ToArray() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:43:33.617

你可以做`List`Bytes 而不是数组：

```
Dim DataList As New List(Of Byte)
DataList.AddRange(IntegerToByte(My.Settings.BotUID))

Data = DataList.ToArray() 
```

# javascript - DOJO 中 getElementsByTagName() 的等价物是什么

> ID：14961262
> 
> 赞同：1
> 
> 时间：2013-02-19T15:35:37.877
> 
> 标签：javascript, dojo

DOJO 中的 getElementsByTagName() 等价物是什么？

例如：

```
<input id="inserviceInputId" type="text" value="09/05/2003" name="inserviceInput" style="width:7em"> 
```

因此，为此，我试图通过 name="inserviceInput" 获取元素。

如何才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:39:40.223

在我看来`.query`，这是一种表面上包装`document.querySelector`或可能发出嘶嘶声的方法。您可以在查询中使用任何属性，包括`name`. 如果您想使用`getElementsByTagName`它，您也可以随时使用它，因为它仍然可用。

```
require(["dojo/query"], function(query){
  console.log(query("[name=inserviceInput]"));
}); 
```

[文档](http://dojotoolkit.org/reference-guide/1.8/dojo/query.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:36:55.153

Dojo 是建立在 JavaScript 之上的框架，而不是一种语言。`getElementsByTagName`是一个原生 JavaScript 函数。

所以 Dojo 的等价物`getElementsByTagName`是 ... `getElementsByTagName`。

# ios - 如何在没有开发者帐户的情况下在越狱的 iDevice 上安装和测试我的应用程序？

> ID：14961264
> 
> 赞同：0
> 
> 时间：2013-02-19T15:35:42.467
> 
> 标签：ios, installation, jailbreak

我想在真实设备上测试我的应用程序（越狱）。
但是，我没有开发者帐户。
如何在设备上安装和测试我的应用程序？
请给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:37:09.253

越狱设备不需要开发者帐户。

只需从您的 Mac 下载到您的设备并测试您的应用程序。

欲了解更多[信息](http://www.alexwhittemore.com/developing-jailbroken-iphone-iphone-312/)。

# python - reportlab：flowable 中的 flowables

> ID：14961268
> 
> 赞同：2
> 
> 时间：2013-02-19T15:35:55.900
> 
> 标签：python, reportlab

我想要一个可流动的，它只是一个具有固定宽度和高度但可以将多个可流动作为其内容的盒子。所以这个盒子里的flowables应该认为盒子的结尾就是页面的结尾（例如，如果盒子的宽度不够，段落应该换行）。

我的第一次尝试如下所示：

```
from reportlab.platypus import Flowable

class Box(Flowable):

    def __init__(self, width, height, flowables=[]):
        self.width = width
        self.height = height
        self.flowables = flowables

    def draw(self):
        self.canv.rect(0, 0, self.width, self.height)

        for flowable in self.flowables:
           # how to handle flowables that they 
           # match into this flowable? 
```

经过一番研究，我发现我必须实现两种方法：`wrapOn()`和`drawOn()`. 但我不知道该怎么做。

# r - 如何强制y轴在R中的最小和最大范围？

> ID：14961271
> 
> 赞同：21
> 
> 时间：2013-02-19T15:35:57.833
> 
> 标签：r, ggplot2, histogram

如果您查看下面的图表（y 轴），您会注意到比例是从`0`到`0.20`。我还有其他直方图，范围从`0`到`0.4`。我想让所有这些从 to 保持一致`0`并`1`显示从to的`y`轴。`0``1`

```
conne <- file("C:Aisdefined.bin","rb")
sd    <- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE)
y     <- t(matrix((data=sd), ncol=1440, nrow=720))
r     <- raster(y)
f     <- hist(y, breaks=10,main="sm")

f$counts <- f$counts/sum(f$counts)
dat <- data.frame(counts= f$counts,breaks = f$mids)
ggplot(dat, aes(x = breaks, y = counts, fill =counts)) + 
   geom_bar(stat = "identity",alpha = 0.8) +
   xlab("Pearson correlation")+ ylab("Frequency") + 
   scale_x_continuous(breaks = seq(-1,1,0.250), labels = seq(-1,1,0.250)) +
   ggtitle("2011") + theme(axis.title.x = element_text(size = 20)) + 
   theme(axis.title.y = element_text(size = 20)) + 
   theme(text = element_text(size=20), 
   axis.text.x = element_text(angle = 90, vjust=1,colour="black"), 
   axis.text.y = element_text(colour="black")) + 
   theme(plot.title = element_text(size = rel(2.5))) + 
   scale_fill_gradientn(colours = "black") 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-19T15:39:33.433

只需添加：

```
+ coord_cartesian(ylim=c(0,1)) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-19T15:39:27.783

试试这个：

```
scale_y_continuous( limits = c(0,1), expand = c(0,0) ) 
```

# rotation - IE 9 中的文本区域旋转

> ID：14961273
> 
> 赞同：0
> 
> 时间：2013-02-19T15:36:03.547
> 
> 标签：rotation, internet-explorer-9, transform

一个例子：

```
<textarea name="" id="" cols="30" rows="10"  style="-ms-transform:rotate(90deg);zoom:1;">sdfjksdfhj</textarea> 
```

文本存在，但未选中时不可见。在 IE8 和 IE7 中，它使用过滤器很好地旋转。如果我在 IE9 上尝试过滤（删除了变换旋转），文本区域全是黑色的。我错过了什么吗

# linq - 使用 LINQ to EF 进行高级搜索

> ID：14961274
> 
> 赞同：1
> 
> 时间：2013-02-19T15:36:11.403
> 
> 标签：linq, search

我最多有 4 个值：字符串 firstName、字符串 lastName、字符串 ssn、DateTime dateOfInjury。用户可以输入其中任何一种或任何组合。如果他们输入多个，我想使用 AND 返回结果。例如，如果 firstName 匹配（如果他们输入的就是这些），或者如果 firstName AND lastName 匹配，如果他们同时输入，等等。使用 LINQ 执行此操作的最佳方法是什么？我希望有比巨大的 switch 语句更优雅的东西。

我正计划动态构建 where 子句，但它似乎不起作用：[Building dynamic where clauses in LINQ to EF queries](https://stackoverflow.com/questions/14901430/building-dynamic-where-clauses-in-linq-to-ef-queries)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:41:32.230

只需建立您的查询。如果您有一系列 Where 调用，则这些调用是 AND 在一起的。

```
IQueryable<Customer> query = source.Customers;

if (firstName != null)
{
  query = query.Where(c => c.FirstName == firstName);
}
if (lastName != null)
{
  query = query.Where(c => c.LastName == lastName);
} 
```

# jquery - jQuery 1.8 触发器

> ID：14961278
> 
> 赞同：3
> 
> 时间：2013-02-19T15:36:22.090
> 
> 标签：jquery, events, triggers

我正在为客户做一个项目。该站点使用 jQuery 1.8.2。在以前的项目（jQuery 1.9.1）中，我使用：

```
$("select#testbuecher").trigger("add", [$item]); 
```

对于自定义事件。这不适用于 1.8.2。

Firebug中的错误：

> NS_ERROR_XPC_NOT_ENOUGH_ARGS：参数不足

这里有谁知道代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:00:27.197

我刚刚找到了解决方案。而不是只使用“触发器”，“触发器处理程序”来完成这项工作。

```
$("select#testbuecher").triggerHandler("add", [$item]); 
```

# soapui - 如何使用soapUi在枚举字段中发送多个值

> ID：14961282
> 
> 赞同：3
> 
> 时间：2013-02-19T15:36:40.813
> 
> 标签：soapui

我正在使用 SoapUI 测试 Web 服务请求。

我有一个字符串，它在我的请求中充当按位过滤器。该字段是 SoapUI 的枚举。在 XSD 中，我拥有所有枚举值。

我需要能够在字段中发送 2 个或更多枚举值，但 SoapUI 只接受文本，例如“All”或“testvalue2”。例如，我想发送 testvalue 和 testvalue2 。

谢谢你的帮助

XSD 提取物：

```
<xs:enumeration value="None">
          <xs:annotation>
            <xs:appinfo>
              <EnumerationValue xmlns="http://schemas.microsoft.com/2003/10/Serialization/">0</EnumerationValue>
            </xs:appinfo>
          </xs:annotation>
        </xs:enumeration>
        <xs:enumeration value="Testvalue">
          <xs:annotation>
            <xs:appinfo>
              <EnumerationValue xmlns="http://schemas.microsoft.com/2003/10/Serialization/">1</EnumerationValue>
            </xs:appinfo>
          </xs:annotation>
        </xs:enumeration>
        <xs:enumeration value="Testvalue2">
          <xs:annotation>
            <xs:appinfo>
              <EnumerationValue xmlns="http://schemas.microsoft.com/2003/10/Serialization/">2</EnumerationValue>
            </xs:appinfo>
          </xs:annotation>
        </xs:enumeration>
        <xs:enumeration value="All">
          <xs:annotation>
            <xs:appinfo>
              <EnumerationValue xmlns="http://schemas.microsoft.com/2003/10/Serialization/">255</EnumerationValue>
            </xs:appinfo>
          </xs:annotation>
        </xs:enumeration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T18:13:22.893

解决方案是复制该字段，而不是在该字段中输入所有值。

```
 <tem:RequestExtendedInfo>
     <!--Optional:-->
  <rxas:ExtendedInfo>testvalue1</rxas:ExtendedInfo>
  <rxas:ExtendedInfo>testvalue2</rxas:ExtendedInfo>
  </tem:RequestExtendedInfo> 
```

感谢 Abhishek Asthana 的帮助

# excel - Excel宏查找文本值剪切和粘贴然后向上移动单元格

> ID：14961287
> 
> 赞同：0
> 
> 时间：2013-02-19T15:36:51.217
> 
> 标签：excel, paste, shift

我有一个噩梦般的任务，要从一个会计包迁移到另一个。

我在 A、B 和 G 列中有 9340 行，需要以某种方式排序，然后才能被新系统导入。

**前：** ![在此处输入图像描述](../Images/1a4db5fd6764cb1e2f8bc132789413db.png)

**后：** ![在此处输入图像描述](../Images/9ee65ff95b4b9f1ac73336f672bd7904.png)

我运行了一个宏，它可以满足我的需求，但仅适用于选定的范围。如何使宏适用于整个工作表？

```
Sub Macro1()

  Range("B206").Select
  Selection.Cut
  Range("A207").Select
  ActiveSheet.Paste
  Rows("206:206").Select
  Selection.Delete Shift:=xlUp
  Range("A206").Select
  Selection.Copy
  Range("A206:A216").Select
  ActiveSheet.Paste
  Range("C216").Select
  Application.CutCopyMode = False
  Selection.Cut
  Range("G216").Select
  ActiveSheet.Paste
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:19:51.680

这可能会在某些方面失败。您的设置比我有时间重新创建更复杂。请在您的数据**副本**上运行此代码。它基本上移动了东西，然后删除了 B 列中所有有空格的行。您应该删除第一个“Opening”行上方的标题垃圾：

```
Sub test()
Dim ws As Excel.Worksheet
Dim LastRow As Long
Dim cell As Excel.Range

Set ws = ActiveSheet
With ws
LastRow = .Range("B" & .Rows.Count).End(xlUp).Row
For Each cell In .Range("B1:B" & LastRow)
    If Left(cell.Value, Len("Opening")) = "Opening" Then
        cell.Offset(1, -1).Value = cell.Value
        cell.ClearContents
    Else
        cell.Offset(0, -1) = cell.Offset(-1, -1).Value
    End If
    If Left(cell.Value, Len("Closing")) = "Closing" Then
        cell.Offset(0, 6).Value = cell.Offset(0, 1).Value
        cell.Offset(0, 1).ClearContents
    End If
Next cell
    .Range("B" & .Rows.Count).SpecialCells(xlCellTypeBlanks).EntireRow.Delete
End With
End Sub 
```

# asp.net-mvc - 为什么 ASP.NET MVC 默认的 Model Binder 很慢？它需要很长时间才能完成它的工作

> ID：14961290
> 
> 赞同：20
> 
> 时间：2013-02-19T15:36:58.627
> 
> 标签：asp.net-mvc, performance, post, data-binding, ienumerable

在当前的一个项目中，客户要求以两种方式回答问卷的可能性：以单一形式使用`Wizard`（一次一个问题）和（一次所有问题）。`Listing`这两种方式都已经实现。

这些问题是使用 AJAX 根据手册的章节从数据库中加载的（这非常快）。目前最大的章节有`230`问题（每个都有 4 个 HTML 输入字段 - 输入/文本、选择等）。如果用户选择这样的章节以`Listing`格式回答，`<form>`则将包含`920`要发布到服务器的关于字段。

我正在做一个 AJAX POST 请求，使用 jQuery 的`serialize`方法传递数据：

```
data: $("#questions :input").serialize() 
```

这个序列化需要`207.143ms`完成。我在 Firefox 中使用 Firebug 调试了这个值：

```
console.profile();
$("#questions :input").serialize();
console.profileEnd(); 
```

再次，这是超级快...

当对以下操作方法接收到的数据进行水合时，问题就出现了：

```
public async Task<ActionResult> ListSaveAsync(IEnumerable<AnswerViewModel> questions) 
```

如您所见，发布的数据是绑定到`IEnumerable<AnswerViewModel> questions`. `AnswerViewModel`只有 4 个字段来存储每个答案。

问题是，在单击 Save 按钮后，需要相当长的时间（精确 10 秒）才能在此操作方法上命中断点，也就是说，这 10 秒大概是在模型绑定器中花费的。

需要提及的重要一点是，当从 HTTP POST 实现 ViewModel 集合属性时，我正在使用 Steve Sanderson 的[@Html.BeginCollectionItem 助手来提供帮助。](http://blog.stevensanderson.com/2008/12/22/editing-a-variable-length-list-of-items-in-aspnet-mvc/)查看数据如何进入 ViewModel（键）：

![在此处输入图像描述](../Images/846f7add05b0f71343ca7af3688e4af4.png)

你知道我可以尝试做些什么来优化它吗？

我想到了4个解决方法：

1.  只保存修改后的问题。为此，我需要在加载列表时将每个答案值存储在数据属性中，并在提交时将其与实际值进行比较，`<form>`正如这个人[在这里](https://stackoverflow.com/a/8043489/114029)建议的那样。

2.  在客户端创建`AnswerViewModel`JavaScript 对象并将它们传递给 action 方法。这会减轻 Model Binder 的负担吗？

3.  滚动我自己的模型绑定器......但我真的不知道它是否会比 ASP.NET MVC 附带的默认模型更快。从我读到的默认模型绑定器做了很多反思来设置值/水合动作的模型参数，这可能是瓶颈。

4.  使用并枚举发布的数据，通过键获取每个值并手动执行验证，如此[处](http://stack247.wordpress.com/2011/03/20/iterate-through-system-web-mvc-formcollection/)`FormCollection`所示。

你还有什么建议？

* * *

**更新 1**

我选择了选项 3 并实现了一个自定义模型绑定器：`AnswerModelBinder : IModelBinder`并在该特定操作方法中使用它：

```
public async Task<ActionResult> ListSaveAsync(
             [ModelBinder(typeof(AnswerModelBinder))]List<AnswerViewModel> questions) 
```

现在`10 seconds`完成的只需要`2 seconds`.

*   看起来默认模型绑定器验证检查 [ `ModelState`] 对性能有很大影响。

**更新 2**

我刚刚再次体验到它：将 a`List<Guid>`作为操作参数并仅`59 strings`通过`$.getJson`调用需要大约 3 秒才能在操作方法的第一行遇到断点。更改参数类型以`List<string>`使整个事情在眨眼之间工作。

一个有趣的事实是，在 action 方法中我这样做了：

```
List<Guid> userIds = resources.Select(Guid.Parse).ToList(); 
```

并将资源`List<string>`转换为`List<Guid>`瞬间。

ASP.NET 模型绑定器肯定有一些问题。我只是想知道它是什么...... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-21T09:11:16.607

您可以使用 ServiceStack JsonSerializer，它在基准测试结果中非常快，这里是文档 [http://mono.servicestack.net/docs/text-serializers/json-serializer](http://mono.servicestack.net/docs/text-serializers/json-serializer) ，这里是基准测试 [http://mono.servicestack.net/benchmarks /](http://mono.servicestack.net/benchmarks/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T12:26:01.963

这可能不是您正在寻找的答案，但它可能会有所帮助。尝试让控制器方法接受签名中的模型并使用 Ajax.BeginForm()，而不是使用 FormCollection。这将消除对序列化的需要，并允许 MVC 完成它的工作。此外，拥有一个具有问题类型列表的模型可能值得研究。这种方法似乎也消除了对帖子上的值进行迭代的需要，因为它们已经在模型中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T10:25:55.150

I haven't tried this but when I use integer indices the binder had no problems in binding to the IEnumerable. Since you are not actually using these Guids I'd replace them with integers. (0,1,2...)

I guess you could do this easily on the page that renders the form or using JS.

# php - 从MYSQL数据库中选择按天分组的记录

> ID：14961291
> 
> 赞同：0
> 
> 时间：2013-02-19T15:36:59.480
> 
> 标签：php, mysql, codeigniter, timestamp

我有一个带有时间戳的记录数据库。我想从数据库中提取按天分组的记录，所以如果有相同日期（24 小时跨度）的其他记录，我希望将它们组合在一起。这可以用 MYSQL 完成，还是我必须使用 PHP 提取记录并将它们组织成数组？

这是我的桌子的截图：

![在此处输入图像描述](../Images/eeb998c35ed9a991848fe0598e6d8a11.png)

到目前为止，这是我的模型函数：

```
public function getUsersMoves($options) {   
        $query = "SELECT * FROM myzone_user_hr_records";
        if(isset($options['GUID'])) {
            $query .= " WHERE GUID = '" . $options['GUID'] . "'";
        }
        if((isset($options['minHR'])) &&  isset($options['maxHR'])) {
            $query .= " AND (hr BETWEEN '" . (int)$options['minHR'] . "' AND '" . (int)$options['maxHR'] . "')";
        } else if (isset($options['zone'])) {
            $query .= " AND zone = '" . (int)$options['zone'] . "'";
        }
        if(isset($options['activity'])) {
            $query .= " AND title = '" . $options['activity'] . "'";
        }

        $query .= " ORDER BY time DESC";

        $query = $this->db->query($query);
        return $query->result_array();
    } 
```

我的控制器代码：

```
$moves = $this->myzone_model->getUsersMoves($options); 
```

我希望对数据进行排序，以便如果这些记录在时间戳中具有相同的日期，则将它们组合在一起，例如（2012-11-20）。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:40:38.297

试试这个 ：

```
SELECT *, DATE(time) AS date FROM [whatever you want] GROUP BY date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:46:25.930

```
select * from TABLE where `time` like '2012-11-20%' 
```

我建议的选项有效，因为 WHERE 中的 LIKE 条件从时间字段中选择以 开头的所有日期`2012-11-20`。这意味着一天中的时间无关紧要，它将返回当天的所有结果。

要完成这项工作，您必须记住使用 LIKE，然后在末尾添加通配符 - `%`。如果需要，您还可以在开头添加通配符。返回多年所有天数（12 月 11 日）的示例如下：

```
SELECT * FROM TABLE WHERE `time` like '%-12-11%' 
```

# asp.net-mvc-4 - 将数据源添加到报表查看器时，Visual Studio 2012 崩溃

> ID：14961293
> 
> 赞同：3
> 
> 时间：2013-02-19T15:37:02.620
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我正在尝试在 vs 2012 Ultimate 中创建 rdlc 报告。报告在 vs 2010 上运行良好。现在的问题是：当我尝试在报告查看器中添加数据源时，Visual Studio 崩溃（关闭）。

解决此问题的任何建议。这是 vs 2012 Ultimate 中的已知错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T20:35:44.333

不幸的是，这是 Visual Studio 2012 和 Visual Studio 2013 中的一个已知问题，[此 Microsoft Connect 错误中提到了它。](http://connect.microsoft.com/VisualStudio/feedback/details/812807/visual-studio-crashes-when-selecting-a-report-viewers-datasource)

[此 MSDN 博客上](http://blogs.msdn.com/b/selvar/archive/2014/01/16/visual-studio-2012-and-2013-crashes-when-you-bind-datasource-to-rdlc-from-report-viewer-web-control.aspx)已发布了一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T17:45:20.523

我遇到了同样的错误，然后我从项目中删除了 PdfSharp 和 MigraDoc 库。

没有错误了。

编辑：

实际上，错误出在源代码管理中。

PdfSharp.Charting 已被删除，但该项目仍然是参考它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T20:00:15.163

我也有这个问题。我能够向新项目添加报告，因此我知道我的项目存在问题。经过多次试验和错误后，我确定我有一些不必要的参考，这些参考是从旧项目中遗留下来的。引用不正确，并且缺少一些依赖项。删除这些引用后，我的问题得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T01:12:41.100

我最近将一个项目从 VS2010 迁移到 VS2012 后遇到了这个错误。

对我有用的解决方法是在文本编辑器中打开 .rdlc，并查找包含报告中使用的数据集路径的标签。他们看起来像这样：

```
<rd:SchemaPath>.......some path.....</rd:SchemaPath> 
```

在我的情况下，路径是我在 VS2010 中工作时之前保存源的旧路径。我在我的电脑上更改了项目的位置，这个路径现在无效。

所以我更新了正确位置的路径，保存了 RDLC，一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-09T17:42:15.010

我调试发现如果你下载VS-Command问题就解决了

# android - 在 android 的按钮上绘制多个文本，内阴影

> ID：14961294
> 
> 赞同：0
> 
> 时间：2013-02-19T15:37:02.700
> 
> 标签：android, draw

我需要一种为android中的按钮绘制多个文本的方法。我想简单地扩展默认的android按钮，并有可能有一个应该被另一个文本重叠的附加文本以创建一种非常“强烈”内阴影效果。

如上所述的想法是简单地扩展默认按钮并覆盖 onDraw 函数，然后在与按钮的“默认文本”相同的位置绘制一个新文本。问题是我不知道我是如何应该获得按钮的“默认文本”的位置..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:40:49.177

您不必使用多个视图来创建此效果。不久前我写了一篇关于使用`EmbossMaskFilter`将此效果应用于`TextView`. `Button`只是一个美化的`TextView`，所以你可以使用相同的方法通过一个简单的子类来修改它的显示文本：

[http://wiresareobsolete.com/wordpress/2012/04/textview-inner-shadows/](http://wiresareobsolete.com/wordpress/2012/04/textview-inner-shadows/)

要记住的一件事是硬件加速尚不支持此过滤器，因此如果您的应用程序的其余部分利用较新设备上的加速（如果您不知道），您可能需要在软件层上绘制此视图不管它是否是，默认情况下它可能是）。

# responsive-design - Foundation Zurb 3 轨道计数器编号？

> ID：14961295
> 
> 赞同：1
> 
> 时间：2013-02-19T15:37:03.143
> 
> 标签：responsive-design, zurb-foundation, orbit

我在 Foundation 3 站点中有一个 Orbit 滑块，我需要能够显示幻灯片编号，如“幻灯片 3 of 8”中所示。

我在文档中没有看到任何选项，但是查看 _settings.scss 文件我看到了这些项目：

```
$orbitSlideNumBgColor: rgba(0,0,0,0.7);
$orbitSlideNumFontColor: #fff;
$orbitSlideNumPadding: 5px; 
```

但是没有说明如何使用它们。取消注释它们不会做任何事情。如何与给定的滑块集成，或者我是否需要进行 oen 编码来创建数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:14:42.207

看一下 jquery.foundation.orbit.js 文件...这里列出了所有选项。你想要：

```
$("#slider").orbit({ slideNumber: true }); 
```

同意应该记录在案:)

# javascript - 简单的动态形式

> ID：14961300
> 
> 赞同：0
> 
> 时间：2013-02-19T15:37:17.010
> 
> 标签：javascript, forms, dynamic, input, textinput

我需要通过 .onblur 验证输入，这样每当文本输入失去焦点时，它就会被同一个 JS 函数验证。

我的问题是 JS 函数。我想抓住失去焦点的项目的价值。

```
function valid(){
if (isNaN("this should be the value of the text item??")){

} 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:41:32.480

要在模糊时获取项目的值，您应该将`onBlur`触发器添加到 DOM 元素，如下所示：

```
<input type="text" name="validate_me" onBlur="valid(this);" /> 
```

这样您就可以访问触发`onBlur`事件的 DOM 元素并可以访问其属性（例如`value`或`innerHTML`在`textarea`元素的情况下）。

你的`valid`功能可以是这样的：

```
function valid(element) {
  if (element.value != '' && isNaN(element.value))
    alert('This field is not valid!');
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:02:39.090

这个javascript应该做你要求的：

```
(function(){
    var after = function(existing,after) {
        if ( existing == null || typeof existing !== 'function' ) {
            return after;
        }
        else {
            return function() { existing(arguments); after(arguments); }
        }
    }

    var validate = function(input) {
        alert('validating ' + input.name);
    }

    window.onload = after(window.onload, function() {
        var inputs = document.getElementsByTagName('input');
        for (var i = 0; i < inputs.length; i++) {
            if ( inputs[i].type === 'text' ) {
                inputs[i].onblur = after(inputs[i].onblur, function() {
                    validate(this);
                });
            }
        }
    });
}()); 
```

显然，您必须用您的验证逻辑替换 validate 函数中的警报，但这应该满足您的要求。

需要注意的是，立即调用的函数是为了确保您不会破坏任何全局变量，并且该`after`函数是为了确保如果您已经有一个附加的侦听器，那么您的新验证侦听器将在现有侦听器之后被调用。

# jquery-mobile - 使用 jQuery-mobile 弹出菜单作为上下文菜单

> ID：14961301
> 
> 赞同：0
> 
> 时间：2013-02-19T15:37:18.737
> 
> 标签：jquery-mobile

我正在使用 jQuery 移动弹出窗口作为右键单击桌面和点击移动设备时触发的上下文菜单。

我的问题：当我右键单击时，会出现弹出窗口 - 它工作正常。但是当弹出窗口打开并且我在弹出窗口之外单击鼠标右键时，弹出窗口将关闭，并且会出现标准浏览器上下文菜单而不是新弹出窗口。

弹出窗口在其自身下创建一个新层（其类为 ".ui-popup-screen" ）以捕获事件，但类似于

```
$(".ui-popup-screen").on("click", function(event) {
    event.preventDefault();
    $('#myElementWithPopupContextMenu').contextmenu();
    return false;
}); 
```

不起作用。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:50:55.807

我喜欢像跟随模式一样写。

```
// prevent default contextmenu and trigger as 'custom-contextmenu'
$(".ui-popup-screen")
    .bind("contextmenu",function(e) {
        e.preventDefault();

        // create and show menu
        $("#myElementWithPopupContextMenu").trigger( "custom-contextmenu" );
    });

// context menu handler
$("#myElementWithPopupContextMenu").bind( "custom-contextmenu", function(e) {
    // my context menu
} 
```

# c# - SerialPort.Open() 抛出 IOException - 系统资源不足，无法完成请求的服务

> ID：14961303
> 
> 赞同：5
> 
> 时间：2013-02-19T15:37:33.233
> 
> 标签：c#, .net, serial-port, ioexception

我有一个我编写的 .NET 4 Windows 服务，它定期（通常每天一次）通过串行端口与外部设备通信。总而言之，该服务运行良好，但对于一位客户来说，时不时地调用 会`SerialPort.Open()`引发以下异常：

```
System.IO.IOException：系统资源不足，无法完成请求的服务。
在 System.IO.Ports.InternalResources.WinIOError（Int32 错误代码，字符串 str）
在 System.IO.Ports.SerialStream..ctor （字符串端口名，Int32 波特率，奇偶校验，Int32 数据位，StopBits stopBits，Int32 读取超时，Int32 写入超时，握手握手，布尔 dtrEnable，布尔 rtsEnable，布尔丢弃空，字节奇偶校验替换）
在 System.IO.Ports.SerialPort.Open()

```

基于异常，会认为服务器资源不足，但似乎并非如此。CPU 或多或少处于空闲状态，并且有足够的内存和磁盘。

网上有很多提到`SerialPort.Open()`抛出其他 IOExceptions 并且我已经实现了[Zach Saw 的 SerialPortFixer](http://zachsaw.blogspot.se/2010/07/net-serialport-woes.html)，但它似乎解决了一个不同的问题。

这是我正在做的一个例子（非常简化）。该类的几个实例（使用不同的串行端口名称）始终在内存中，然后每个实例大约每天调用一次 Run() 方法。

```
public class Collector
{
    private SerialPort _port;
    private string _portName;

    public void Run()
    {
        try
        {
            // Run Zach Saw's IOException workaround
            SerialPortFixer.Execute(_portName);

            using (_port = new SerialPort(_portName, 9600, Parity.None, 8, StopBits.One))
            {
                _port.DataReceived += PortDataReceived;
                _port.ErrorReceived += PortErrorReceived;
                _port.Handshake = Handshake.None;
                _port.DtrEnable = true;
                _port.RtsEnable = true;

                _port.Open();
                // Do the stuff
                _port.Close();
            }
        }
        catch (Exception e)
        {
            // Handle exception
        }
    }

    private void PortDataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        // Do other stuff
    }

    private void PortErrorReceived(object sender, SerialErrorReceivedEventArgs e)
    {
        // Log error
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T08:36:55.453

这个问题的答案是客户端使用的串口服务器是wi-fi版本（Moxa NPort W2150 Plus），当串口服务器出现wi-fi连接问题时会出现异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T10:20:52.047

NPort 5150 也有同样的问题。增加网络超时（在 NPort Administrator 中）解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T19:49:11.690

我最近遇到了同样的问题，我的解决方案是我不小心将直通 DB9 电缆与需要零调制解调器 DB9 电缆的设备一起使用。一旦我换成零调制解调器电缆，错误就消失了，并且设备运行正常。

当我打电话给 Moxa 时，他们建议尝试一些其他可能导致此问题的方法：

*   防病毒软件可能会干扰通信
*   在设置 COM 端口（在 Windows 机器上）时，尝试使用 Driver Manager Utility 而不是 Nport Administrator

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T10:02:20.930

我遇到了这个错误，我的问题是 NPort 管理找到并编程了串行端口，但网卡的 IP4 地址设置为 DHCP。我认为这发生在系统更新期间。

从中恢复：

1.  在网络接口的子网中添加 TCP/IP 地址
2.  在 NPort 管理中重新分配串行端口

# c# - 1+ 数据库的 SQL 通知程序

> ID：14961305
> 
> 赞同：1
> 
> 时间：2013-02-19T15:37:42.607
> 
> 标签：c#, sql, wpf, notifications

我需要从几个数据库中获取更改到我的 1 个数据库中，所以我猜 sql 通知程序将是最好的方法。我发现了有趣的应用程序： http: [//www.codeproject.com/Articles/144344/Query-Notification-using-SqlDependency-and-SqlCach](http://www.codeproject.com/Articles/144344/Query-Notification-using-SqlDependency-and-SqlCach) 有效，但仅在一个数据库中。

我不是要求完整的解决方案，也许只是你们中的一些人使用这样的项目，并且知道如何使用 sqlnotifier 从不同的数据库中读取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:35:44.980

作为替代方案，您可能想要调查**Microsoft Sync Framework**以实现您想要的，因为看起来您确实需要一个同步解决方案。

使用它，您可以在两个或多个 sql server 数据库之间进行同步。由于您可以定义同步范围，因此您可以将其限制为您感兴趣的表。

以下是一些链接，您可以在其中阅读更多相关信息：

[MSDN - 如何选择数据同步技术](http://msdn.microsoft.com/en-us/data/cc470041.aspx)

[MSDN - 微软同步框架](http://msdn.microsoft.com/en-us/sync)

[维基百科 - Microsoft 同步框架](http://en.wikipedia.org/wiki/Microsoft_Sync_Framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:53:03.037

根据您要跟踪的信息，SQL Server 2008 开发人员认证建议使用 CDC（变更数据捕获）或 CT（变更跟踪）。

[在这里](http://msdn.microsoft.com/en-us/library/bb933994.aspx)查看详细信息。

您也可以考虑使用内置的[审核功能。](http://www.bradmcgehee.com/2010/03/an-introduction-to-sql-server-2008-audit/)

# javascript - console.error 抛出异常

> ID：14961307
> 
> 赞同：2
> 
> 时间：2013-02-19T15:37:44.417
> 
> 标签：javascript, jasmine

我有一个 JavaScript 文件（Angular，但我不认为这与它有任何关系）。

`console.log`工作正常，但`console.error`抛出`* TypeError: Cannot find function error in object [object Object].`

```
console.log('An error occurred while searching. Status code was ' + status);
console.error('An error occurred while searching. Status code was ' + status); 
```

我正在使用 Jasmine 运行测试，也许 Jasmine 模拟\注入它自己的控制台？

**更新** 这是通过使用 Jasmine 的 mvn 构建运行的，因此没有浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:59:36.067

问题是我们默认的控制台的无操作实现没有存根错误方法。

例如：

```
/**
 * Defines a console object if missing
 */
if (typeof console !== "object") {
    console = {};
    console.log = function() {};
    console.error=function() {};  // Added this to fix
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T06:09:55.790

```
var console = (function () {
    function log(msg) {
    }
    function error(msg) {
    }
    function info(msg) {
    }
    return {
        log: log,
        error: error,
        info: info
    };
})(); 
```

将此内容包含在项目的 pom.xml 中的“Mocks.js”（或提供任何文件名）中

# php - array_intersect() 参数不是数组

> ID：14961313
> 
> 赞同：-2
> 
> 时间：2013-02-19T15:38:00.390
> 
> 标签：php, mysql

我开发了这个小代码来检查 2 个文本是否有共同词，一个来自数据库，另一个来自外部输入。问题是我收到一条消息“参数不是数组”。我看不出问题出在哪里。我还需要检查 2 条消息是否应该有相同的单词在相同的序列中。请帮助了解错误在哪里。谢谢

```
$checkMsg=strip_tags($_POST['checkMsg']); // message from input form
$message // message from database
$MsgWords = preg_split("/[\s,]+/", $checkMsg);
if(!empty($checkMsg)){
         foreach ($MsgWords as $Neword)
      {           $Neword = trim($Neword);

          echo " $Neword";
      }
          $word = preg_split("/[\s,]+/", $message);

      foreach ($word as $currentWord)
             {
                                      $currentWord = trim($currentWord);

                 echo "  $currentWord"; 
            }

            $intersect=array_intersect( $Neword ,
                                        $currentWord);
                    echo" Your common words are: $intersect";}else{echo "No common words";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:51:32.903

正如其他人所说，您正在比较字符串而不是数组。你的代码应该是这样的（你可能不得不稍微改变一下它只是一个例子）

```
$checkMsg=strip_tags($_POST['checkMsg']); // message from input form
$message // message from database
$MsgWords = preg_split("/[\s,]+/", $checkMsg);
if(!empty($checkMsg)){
     $intersect=array_intersect($message,$MsgWords);
     if (count($intersect)>1) {
     //only show output if there are matches
       echo "Words in common are:<br />";
       foreach ($intersect as $Neword) { 
          $Neword = trim($Neword);
          echo $Neword."<br />";
       }
     } else {
       echo "There are no words in common";
     }      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:52:06.167

好的，首先您要遍历两个数组并更改值，但是按照您的方式，您只是更改值的临时副本，而不是数组中的值。为此，您需要使用 中的`&`符号`foreach()`来告诉它在循环中使用引用变量，如下所示：

```
foreach ($MsgWords as &$Neword) {  //added the & sign here.
    $Neword = trim($Neword);
} 
```

对另一个`foreach()`循环也做同样的事情。

其次，您的`array_intersect()`电话正在查看单个字符串，而不是整个数组。您需要它来查看数组：

```
//your incorrect version:
$intersect=array_intersect( $Neword, $currentWord);

//corrected version, using your variable names.
$intersect=array_intersect( $MsgWords, $word); 
```

那应该可以解决您的问题。

[编辑]

另外，请注意`array_intersect()`输出一个数组（即两个输入数组之间的交集数组）。您不能使用`echo()`直接打印数组。如果您尝试，它只会显示“数组”一词。您需要先将其转换为字符串：

```
//your incorrect code.
echo "Your common words are: $intersect";

//corrected code:
echo "Your common words are: ".implode(',',$intersect); 
```

我还要注意，您的编码风格*非常*混乱且难以阅读。我强烈建议尝试整理一下；遵循某种缩进和变量命名规则。否则将很难维护。

# android - 订阅的 Android IABv3 getSkuDetails 不返回结果

> ID：14961315
> 
> 赞同：1
> 
> 时间：2013-02-19T15:38:09.907
> 
> 标签：android, in-app-purchase

我刚刚从 IABv2 升级到 IABv3（实际上支持订阅）。

当我对 inapp 产品使用 getSkuDetails 方法时效果很好，如果我将它用于订阅（具有已在市场上发布的真实 ID），它将返回一个空的订阅数组。

有人知道这是否是一个错误？

我实际上正在使用示例应用程序测试 IABv3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:01:12.173

好的，所以我刚刚发现问题出在列表中，如果 productID 要求您有重复项。

要解决此问题，您可以更改 querySkuDetails 方法：[https ://gist.github.com/StErMi/4987164](https://gist.github.com/StErMi/4987164)

# mysql - mysql 根据下一行的数据更新行

> ID：14961317
> 
> 赞同：1
> 
> 时间：2013-02-19T15:38:11.047
> 
> 标签：mysql, insert, sql-update

我在mysql中有这个表：

```
name         ID
B1            1
B2            1
B3            1
B4            2
B5            2
B6            2
A1            3
A2            3
A3            3 
```

我想将数据添加到列中，通知 id 将在下一行更改。像这样的东西：

```
name       beforeChange     ID
 B1          NO               1
 B2          NO               1
 B3          YES              1
 B4          NO               2
 B5          NO               2
 B6          YES              2
 A1          NO               3
 A2          NO               3
 A3          NO               3
 A4          NO               3 
```

有没有办法在sql中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:22:09.887

丑陋的罪恶，从效率的角度来看可能远非理想，但似乎有效：

```
create table myTable (id int(10) unsigned not null,name varchar(10));

insert into myTable (id,name) values (1,'B1');
insert into myTable (id,name) values (1,'B2');
insert into myTable (id,name) values (1,'B3');
insert into myTable (id,name) values (2,'B4');
insert into myTable (id,name) values (2,'B5');
insert into myTable (id,name) values (2,'B6');
insert into myTable (id,name) values (3,'A1');
insert into myTable (id,name) values (3,'A2');
insert into myTable (id,name) values (3,'A3');
insert into myTable (id,name) values (3,'A4');

select a.id,
case 
when b.id is null then 'NO' 
when b.id = (select max(id) from myTable) then 'NO' -- < handle last line of results set
else 'YES' end as beforeChange,a.name
from
-- rank within id
(
select mt.id,mt.name,
case mt.id when @curId then @curRow := @curRow + 1 
          else @curRow := 1 and @curId := mt.id END as rank
from myTable mt
join (select @curRow := 0, @curId := -1) r
order by id,name asc
) a
left outer join
-- max rank by id
(
select t.id,max(t.rank) as maxRank
from (
select mt.*,
case mt.id
        when @curId 
        then @curRow := @curRow + 1 
        else @curRow := 1 and @curId := mt.id END
      as rank
from myTable mt
join (select @curRow := 0, @curId := -1) r
order by id,name asc
) t 
group by t.id
) b on a.id = b.id and b.maxRank = a.rank; 
```

# java - Java : 关于服务器日志异常报告的帮助

> ID：14961318
> 
> 赞同：0
> 
> 时间：2013-02-19T15:38:13.230
> 
> 标签：java, jsp, tomcat, jboss5.x, struts-1

我在 java 中相当新，目前在 Struts 1.3 中工作。我的问题与java更相关。

以下是场景，我不确定要遵循的最佳方法。

我想在我的项目中创建一个错误报告功能，其中我正在复制堆栈跟踪并将其插入数据库的表中，例如“错误日志”表，其中包含异常类型、日期、用户等和其他字段。但是现在我要做的是：我必须借助发生异常时拥有的服务器日志来识别发生异常的包名称、文件、方法和行号。但问题是日志为您提供了异常、文件和行号，但它还包含我的包中没有的错误，如下面的 HttpServlet.service(HttpServlet.java:710) 等：

```
java.lang.NullPointerException 
com.candidate.query.CandSearchAction.execute(CandSearchAction.java:34) 
org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484) 
org.apache.struts.action.RequestProcessor.proc ess(RequestProcessor.java:274) 
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482) 
org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:710) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

在上述情况下，我的 CandSearchAction.java 第 34 行出现空指针异常。现在我想知道如何区分或仅提取指向我的 java/jsp 文件的行，以便我可以相应地过滤它们。

任何人都可以就这种情况或如何解决这个问题提供帮助。有没有我可以使用的库或任何可以帮助我的库。等待对我有帮助的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:07:53.907

如果您的代码遵循您在示例中使用的相同基本结构，您可以解析堆栈跟踪以查找以 1 个包名称开头的任何内容，并且只使用这些行。

# c++ - 向上转换函数指针是否安全？

> ID：14961322
> 
> 赞同：3
> 
> 时间：2013-02-19T15:38:16.100
> 
> 标签：c++, member-function-pointers, upcasting

我有基类`Object`和一个`Event`

```
class Object
{
//...
};

class Event
{
}; 
```

以及函数指针的 typedef

```
typedef void (Object::*PF) (Event*); 
```

还有一个不相关的类，它存储两个指针

```
class Dispatcher
{
public:
    Dispatcher (Object* obj, PF pf) : _obj (obj), _pf (pf)

    void call (Event* event)
    {
        _obj->*pf (event);
    }

    Object* _obj;
    PF _pf;
}; 
```

然后我有一个具体的对象和一个具体的事件

```
class ConcreteEvent : public Event
{
};

class ConcreteObject : public Object
{
public:
   void handle (ConcreteEvent* event)
   {
      // Do something specific for ConcreteEvent
   }
}; 
```

然后像这样称呼它

```
ConcreteObject* obj = new ConcreteObject();
Dispatcher dispatcher (obj, static_cast<PF>(&ConcreteObject::handle));

ConcreteEvent* event = new ConcreteEvent ();
dispatcher.call (event); 
```

`ConcreteEvent`我保证将始终使用正确的事件调用调度程序，即当它封装的函数指针实际上占用时，我不会调用调度程序并传递它`SomeOtherConcreteEvent`

问题是：这能保证有效吗？在 linux 和 mingw 上的 gcc 4.7 中肯定可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:52:40.550

从 C++11 标准，第 4.11.2 节：

> “指向类型为 cv T 的 B 的成员的指针”类型的纯右值，其中 B 是类类型，可以转换为类型为“指向类型为 cv T 的 D 的成员的指针”类型的纯右值，其中 D 是派生类 ( B 的第 10 条）。如果 B 是 D 的不可访问（第 11 条）、模棱两可（10.2）或虚拟（10.1）基类，或 D 的虚拟基类的基类，则需要进行此转换的程序是格式不正确。转换的结果与发生转换之前的成员指针引用相同的成员，但它引用基类成员，就好像它是派生类的成员一样。

所以是的，这应该是安全的。

编辑：所以如果你真的意味着**向下转换：**这也是合法的，根据 C++11 5.2.9.12：

> “指向 cv1 T 的成员的指针”类型的纯右值可以转换为 cv2 T 类型的“指向 B 的成员的指针”类型的纯右值，其中 B 是 D 的基类（第 10 条），如果存在从“指向 T 类型 B 成员的指针”到“指向 T 类型 D 成员的指针”的有效标准转换 (4.11)，并且 cv2 与 cv1 具有相同的 cv 限定或大于 cv1 的 cv 限定。69

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:14:28.230

我认为这是*不安全*的，有两个原因。

首先是指向成员函数的指针只能安全地*向下*传播（因为您的`Derived`类必须从基类继承该函数，而反之则不然）。

```
class Base {
public:
   void foo();
}; // class Base

class Derived: public Base {
public:
   void bar();
};

using PBase = void (Base::*)();
using PDerived = void (Derived::*)();

int main() {
   PBase pb = &Base::foo;
   PDerived pd = &Derived::bar;

   pb = pd; // error: cannot convert 'PDerived {aka void (Derived::*)()}'
            //                    to 'PBase {aka void (Base::*)()}' in assignment
   pd = pb;
} 
```

（如此[处所示](http://liveworkspace.org/code/228cv0%241)）

第二个是你不能*像那样*改变参数的类型。为了说明这个问题，使用`ConcreteObject: public virtual Object`它，你会发现它并没有像你希望的那样工作。

* * *

现在，这并不意味着你想做的事情是不可能的，只是它需要*更多一点*。

理想情况下，您只需将签名*修复*`Object`为同时采用 an和 an `Event`，而不是使用成员函数，然后在必要时让它处理手动转换：

```
using Function = std::function<void(Object*,Event*)>;

void handle(Object* o, Event* e) {
    ConcreteObject* co = dynamic_cast<ConcreteObject*>(o);
    ConcreteEvent* ce = dynamic_cast<ConcreteEvent*>(e);

    if (co and ce) { co->handle(ce); }
} 
```

或者任何你喜欢的演员/检查。

*注意：使用`std::function`是为了与 lambdas/functors 兼容。*

# android - 是否可以在没有游戏引擎的情况下创建一个有关卡的测验应用程序？

> ID：14961324
> 
> 赞同：0
> 
> 时间：2013-02-19T15:38:18.383
> 
> 标签：android, sqlite, android-sqlite

问这个问题的主要原因是找到一种方法来做到这一点，而不必为 50 个级别创建 50 个类/布局。

我查看了一些不使用关卡的测验应用程序的源代码，并且对它是如何完成的有了更好的理解。他们使用 SQLite 数据库从 70 个表中随机抽取 10 个问题，然后在最后给你一个分数。

我可以以类似的方式实现 SQLite 数据库，但每个问题都有自己的级别吗？然后当然完成一个级别会打开下一个级别，依此类推。

这是我第一次涉足 Android 的游戏方面，我已经发布了其他应用程序，所以我有相当多的一般 Android 知识。如果我需要 50 个类，那么我不妨将问题存储在 strings.xml 中。

整个 SQLite 看起来很复杂，但如果我遇到麻烦，我可以参考源代码，所以希望这是可以完成的。

当然，如果我确实需要一个游戏引擎，那么我总是可以从 AndEngine 开始，只需要了解要采取的方向。

非常感谢您对此提出一些建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:44:00.623

只需在问题表中添加一个级别列并以此过滤您的查询结果。让您的按钮 onClick 设置您想要的问题的级别。如果用户单击按钮 27，则您在加载问题时传递 level=27 作为查询的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T07:01:00.937

有很多方法，但最简单的方法是在按钮单击时创建每个新级别。制作一个包含级别按钮的屏幕，并在清除所有其他级别时，用户只需单击一下即可切换到新级别。

# node.js - 等到所有回调都执行完毕，然后退出

> ID：14961327
> 
> 赞同：0
> 
> 时间：2013-02-19T15:38:22.497
> 
> 标签：node.js

**编辑：**这似乎是不可能的，因为`createWriteStream()`和其他错误发射器不一定会在下一个滴答声中发出错误，所以这个等待不能完成。实际上，如果我`shutdown()`这意味着我想立即完成该过程，那么如果我没有收到任何错误就可以了。

* * *

```
var fs = require ("fs");
var s;

var init = function (cb){
    cb ();
};

var shutdown = function (cb){
    cb (wait);
};

var wait = function (){
    //Some kind of wait
    process.exit ();
};

init (function (){
    s = fs.createWriteStream ("?invalid").on ("error", console.error); //This emits an error
});

shutdown (function (cb){
    s.on ("close", function (error){
        if (error) console.error (error);
        cb ();
    });
    s.end ();
    cb ();
}); 
```

如果您执行此代码，您将不会收到任何错误，因为该过程在打印错误之前完成。如果您将`wait()`功能更改为此，

```
var wait = function (){
    //Some kind of wait
    setTimeout (function (){
        process.exit ();
    }, 1000);
}; 
```

打印错误并在 1 秒后完成该过程。我想等待错误回调，然后在不设置计时器的情况下退出。我试过了，`nextTick()`但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:14:54.820

这是您要实现的目标的简化版本：

```
var fs = require ("fs");
var s;

var init = function (cb){
    cb ();
};

var shutdown = function(error){
    console.log(error);
    process.exit();
};

init(function (){

    s = fs.createWriteStream("?invalid");
    s.on("error", shutdown);
    s.on ("close", shutdown);

}); 
```

# node.js - WebSockets 加 RESTful 接口，如何在 Node.js 中编写 DRY 代码？

> ID：14961329
> 
> 赞同：5
> 
> 时间：2013-02-19T15:38:24.073
> 
> 标签：node.js, express, socket.io, dry

我的 Node.js 应用程序提供**了 WebSockets 和 RESTful**接口。我写了一个小替代品`Backbone.synch`来使用 Socket.IO 作为传输。

**DRY 问题**：在客户端事件上执行的回调包含与 RESTul 路径的回调几乎相同的逻辑。客户端发出的事件和数据之间的示例映射，以及相应的操作：

```
+----------------+---------------------------------+--------------------+
| event emitted  | data emitted                    | RESTful URL        |
+----------------+---------------------------------+--------------------+
|     read:users | empty string                    |  GET /users        |
|     read:users | id of the model                 |  GET /users/:id    |
|   create:users | full model as JSON              |  POST /users       |
|  destroy:users | id of the model                 |  DELETE /users/:id |
|   update:users | full model as JSON (with id)    |  PUT /users/:id    |
|    patch:users | partial model as JSON (with id) |  PUT /users/:id    |
+----------------+---------------------------------+--------------------+ 
```

示例（99% 的重复逻辑/代码）：

```
var UserModel = require('./models/user'); // Mongoose model

// Express path
app.get('/users/:id?', function (req, res)) {
    var query = !id ? {} : { _id: id };

    UserModel.find(query, function (err, doc) {
        return err ? res.send(404, null) : res.send(200, doc);
    });
};

// SocketIO listening to the read:users event
socket.on('read:users', function(id, cb) {
    var query = !id ? {} : { _id: id }

    UserModel.find(query, function (err, doc) {
        return err ? cb(err.message, null) : cb(null, doc);
    });
}); 
```

因为我玩了几天 Node.JS 和事件编程（和 JavaScript），所以我正在寻找一个关于如何设计“控制器”的好建议，比如可以轻松处理重复代码的通用对象。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:32:48.473

如果你真的想混合这两个函数的逻辑，那么你的客户端代码将参数传递给你的`socket.on`回调函数的方式将不得不改变。您可以像这样使用当前设置来处理它：

```
var veryGenericCallback = function(p1, p2) {
   // Note: Not sure what to name the arguments because they are wildly different
   // in your two different cases.

   var query = typeof p1 === "object" : {} : { _id: p1 };

   UserModel.find(query, function (err, doc) {
     var result;

     if (typeof p2 === "function") {
        return err ? p2(err.message, null) : p2(null, doc);
     } else {
        return err ? p2.send(404, null) : p2.send(200, dox);
     }

   });

} 
```

但是正如您所看到的，在某些时候您仍然需要重复您试图避免的逻辑。但是，如果您`socket`发出事件的客户端代码传入一个对象，该对象在第一个参数上具有“id”属性，并为您的第二个参数传递了一个带有`send`函数的对象，您可以将其简化为：

```
var veryGenericCallback = function(info, action) {

   var query = info.id ? { _id: info.id } : {};

   UserModel.find(query, function (err, doc) {

     return err ? action.send(404, null) : action.send(200, doc);

   });

} 
```

但是，在这种情况下，您需要更改服务器端的代码以处理您的伪发送方法所做的任何事情（并且您需要首先在客户端可以访问它的地方定义它）。这也严重限制了您可以在回调中执行的操作，因为您想要在实际请求/响应对象上调用的任何函数都必须在套接字客户端代码中进行模仿。在我看来，这会混淆代码的可读性和可扩展性，但它肯定是可以实现的。

# python - 将 Python 正则表达式转换为 Perl

> ID：14961330
> 
> 赞同：-4
> 
> 时间：2013-02-19T15:38:29.923
> 
> 标签：python, regex, perl

我不是最擅长正则表达式的人，所以将它们从一种语言翻译成另一种语言可能是一项艰巨的任务。

```
tre = re.compile("///--STRING TEXT ONE. Ends with the word EDIT.(?:.*)--///(?:(?:.*\n))*///--END is the first word in STRING TEXT TWO--///")
result = tre.sub(motionBlur_text, configContents) 
```

如果你们能帮我把它移到 perl（我听说它更适合 reg 表达式），那将非常酷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:45:23.487

Perl 中的正则表达式是相同的：

```
my $re = qr#///--STRING TEXT ONE. Ends with the word EDIT.(?:.*)--///(?:(?:.*\n))*///--END is the first word in STRING TEXT TWO--///#; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:39:16.207

编译是通过`qr//`操作员完成的。您可以使用（大多数情况下）字符而不是“/”。我将使用大括号，因为这是 Perl 最佳实践推荐的：

```
my $tre = qr{///--STRING TEXT ONE. Ends with the word EDIT.(?:.*)--///(?:(?:.*\n))*///--END is the first word in STRING TEXT TWO--///}; 
```

要就地执行替换（请参阅[Regexp Quote-Like Operators](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)）：

```
$motionBlur_text =~ s/$tre/$configContents/g; 
```

对字符串的副本执行替换并返回它（Perl 5.14+）

```
my $result = $motionBlur_text =~ s/$tre/$configContents/gr; 
```

# mono - 在unity3d中创建表格边框

> ID：14961331
> 
> 赞同：1
> 
> 时间：2013-02-19T15:38:30.637
> 
> 标签：mono, unity3d

我正在做一个各种各样的台球游戏。为了创建一个表格，我使用立方体作为边。我想使用内置的物理引擎让这些边与球互动。可悲的是我无法让它工作。

这是我所做的。我创建了立方体作为侧面，并创建了一个球体作为球体。为了移动球体，我使用了刚体.MovePosition 函数。立方体和球体都附加了碰撞器和刚体，并关闭了重力。

球体运动很好，但是当它与立方体碰撞时，它会使立方体飞起来。由于立方体应该是一堵不可移​​动的墙，我限制了所有轴的旋转和移动。但是，使用约束会导致物理引擎变得疯狂。它没有停止球体或向相反方向移动，而是简单地穿过立方体。显然，出了点问题，我需要帮助找出问题所在。

提前致谢。

这是用于移动球体的代码。

```
public float movePower = 10.0f;

// Update is called once per frame
void Update () 
{
    if(Input.GetKey(KeyCode.LeftArrow))
    {
        rigidbody.MovePosition(transform.position + Vector3.left* movePower * Time.deltaTime);
    }
    if(Input.GetKey(KeyCode.RightArrow))
    {
        rigidbody.MovePosition(transform.position + Vector3.right* movePower * Time.deltaTime);
    }
    if(Input.GetKey(KeyCode.DownArrow))
    {
        rigidbody.MovePosition(transform.position + Vector3.down* movePower * Time.deltaTime);
    }
    if(Input.GetKey(KeyCode.UpArrow))
    {
        rigidbody.MovePosition(transform.position + Vector3.up* movePower * Time.deltaTime);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:11:39.037

最简单的方法是`Rigidbody`从所有立方体中删除它们，因为它们应该是固定的。另一种方法是将立方体的`Rigidbody`组件标记为`Kinematic`，但这意味着用于移动对象，例如应该参与物理但不应该被引擎移动的玩家角色。

我建议阅读[Unity Physics](http://docs.unity3d.com/Documentation/Manual/Physics.html)手册页。

* * *

**更新：**

更多需要考虑的事项：

*   不要检查`Is Trigger`
*   检查您`Layer Collision Matrix`的设置是否正确（菜单编辑/项目设置/物理）
*   如果速度非常高，物理引擎可能会混淆并且无法检测到碰撞
*   确保模型不会过度缩小或放大（最好是比例 = 1）
*   最佳质量为`Rigidbody.mass`1
*   `PhysicsManager`玩设置时要小心，例如`Min Penetration For Penalty`或`Solver Iteration Count`
*   尽可能使用重力
*   切勿通过`Transform`直接操作来移动。改用`Rigidbody`方法
*   `rigidbody.MovePosition`如果它是恒定的线性运动，请避免调用每次更新。做一次，保持不变
*   请记住使用 FixedUpdate 进行调用`rigidbody.MovePosition`等。

# linux - 如何在 wget 的主机名中跟踪重定向？

> ID：14961334
> 
> 赞同：0
> 
> 时间：2013-02-19T15:38:33.340
> 
> 标签：linux, bash, redirect, download, wget

我需要`wget`在递归时遵循重定向，例如从 host.com 到 www.host.com。通常它不会递归到子域，并且`-H`它会尝试下载整个 Internet。如何使其仅进入所需站点的子域（或至少进入 www. 子域）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:12:13.237

这个怎么样？

```
-D "foo.com,b.foo.com" -H 
```

# android - 将文件保存到 windows-viewable 文件夹而不是 emulated/0/[文件夹名]

> ID：14961339
> 
> 赞同：2
> 
> 时间：2013-02-19T15:38:52.027
> 
> 标签：android, save, storage, local-storage

我正在做一些 android 开发工作，并且一直在使用以下代码将文件保存到 sdcard：

```
Environment.getExternalStorageDirectory() 
```

这很好用，但问题是，当手机作为 USB 记忆棒连接到 Windows PC 时，我的应用程序创建了很多我希望能够抓取的图像，所以我想要数据而不是进入存储/模拟/0/进入 windows-viewable 文件夹（DCIM 等的父级）

这样做最安全的方法是什么？（因此它可以在许多设备上运行而无需数百万次黑客攻击）

谢谢你的时间，

雨披

# c# - 是否可以在程序集中没有静态引用的类型上调用 Activator.CreateInstance？

> ID：14961341
> 
> 赞同：2
> 
> 时间：2013-02-19T15:38:57.010
> 
> 标签：c#, .net, dependency-injection, instantiation, activator

即使程序集没有被执行程序集引用，用户是否可以`Activator.CreateInstance()`实例化给定的类型`Type.FullName`？`Assembly Name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:34:35.997

是的，首先您必须加载程序集。

假设您有一个“插件”文件夹要查看：

```
 foreach (FileInfo f in new DirectoryInfo("c:\\plugins").GetFiles("*.dll"))
            {
                System.Reflection.Assembly.LoadFrom(f.FullName);
            } 
```

现在程序集已加载，您可以使用 Activator.CreateInstance 创建类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:40:35.167

是的。这就是反射之美。您可以通过知道它的名称来加载程序集，然后您可以创建在该程序集中声明的类型。

# java - 如何更改默认的“验证错误：值无效”消息？

> ID：14961342
> 
> 赞同：1
> 
> 时间：2013-02-19T15:38:58.283
> 
> 标签：java, jsf, validation, message, default-value

以下是我可以在 Stack Overflow 上找到的 4 篇相关帖子：

*   [验证错误：值无效](https://stackoverflow.com/q/9069379/1225328)
*   [验证错误值无效](https://stackoverflow.com/q/7096632/1225328)
*   [Jsf：验证错误值对 SelectOneMenu 无效](https://stackoverflow.com/q/4566587/1225328)
*   [带有枚举“验证错误：值无效”的 JSF](https://stackoverflow.com/q/2548879/1225328)

在这些帖子中，发帖者不知道他们为什么会收到此错误消息。就我而言，我确实知道为什么会出现此错误，并且我想将默认的*“验证错误：值无效”*消息更改为*“这是我的消息”*。我怎么能做到这一点？

PS1：我已经尝试过`requiredMessage`,`validatorMessage`和`converterMessage`属性，但是在这种特殊情况下它们都没有被调用。

PS2：我使用的是 RichFaces 4.1.0，所以我使用的下拉列表就是`rich:select`其中之一。

* * *

**设想：**

1.  我有两个实体，例如雇主和雇员。
2.  我创建了员工`employee1`。
3.  我想创建雇主`employer1`，并`employee1`通过下拉列表将其链接到。
4.  **在提交雇主创建表格之前**`employee1`，我从数据库中删除了。
5.  然后，我提交雇主创建表格：所述消息出现在下拉列表旁边，因为`employee1`不再可用。

这种行为是我所期望的，但我只是想将默认消息更改为另一个更*用户友好*的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:58:22.983

所有库存 JSF 消息都在`javax.faces`您的 JSF 分发包中。您正在寻找的那个是钥匙`javax.faces.component.UISelectone.INVALID`（或`UISelectMany`）。修改这个属性得到你想要的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:14:39.123

提供一个自定义转换器并将其作为转换器异常抛出`getAsObject()`.

基本上，

```
@Override
public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
    if (submittedValue == null || submittedValue.isEmpty()) {
        return null;
    }

    Employee employee = findEmployeeInDatabase(submittedValue);

    if (employee == null) {
        throw new ConverterException("Sorry, unknown employee.");
    }
    else {
        return employee;
    }
} 
```

请注意，这也使您能够使用`converterMessage`.

# mysql - 为什么这个 mysql 查询在没有正确的 ON 条件的情况下仍然运行

> ID：14961345
> 
> 赞同：0
> 
> 时间：2013-02-19T15:39:04.493
> 
> 标签：mysql

在调试某人的代码时，我发现其中一个查询导致 mysql 的临时表内存不足。我发现查询正在执行，即使“ON”条件没有与字段匹配的等号。我在想...

这实际上会做什么，因为这似乎会导致可怕的性能滞后？

（我运行了似乎没有帮助的解释命令）

作为一个非常基本的示例，它看起来像这样的查询：

```
"SELECT testfield
FROM foo f
LEFT JOIN bar b ON b.testid 
WHERE testid = 40365"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:41:47.057

这是因为您在条件 TRUE 上加入，这意味着此操作有点像笛卡尔积。

我猜你的表足够大，会导致这个内存问题。

# drupal - 如何在 Drupal 上创建创建关注用户活动流的规则？

> ID：14961348
> 
> 赞同：0
> 
> 时间：2013-02-19T15:39:19.490
> 
> 标签：drupal

我正在使用 Flags、Commons follow、Message 和 Rules 模块来创建用户相互关注的能力。

我使用 commons 自动生成的 commons_follow_user 标志来创建关注按钮。我通过每个节点上的视图生成该按钮。如果用户 A 按下用户 B 提交的节点上的按钮，则用户 A 开始关注用户 B。默认情况下，commons follow user 模块在用户 A 帐户页面上显示用户 B 名称。我还需要让用户 A 看到用户 B 的活动流，更具体地说是查看用户 B 何时添加新节点。我知道我必须使用规则和消息模块。我创建了一个规则，在创建新节点时触发消息实体创建，但是如何使此流仅对创建这些节点的用户之后的用户可见？有规则条件的方法吗？或者我应该转向另一个方向来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:21:14.080

看起来您正在尝试创建某种社交网络。

我非常喜欢我们的一个模块[Statuses 模块](http://drupal.org/project/statuses)

如果您只是在寻找可以发布活动的内容，那么还有[心跳模块](http://drupal.org/project/heartbeat)

我希望这会有所帮助。

# ruby-on-rails - rspec不保存到数据库

> ID：14961356
> 
> 赞同：1
> 
> 时间：2013-02-19T15:39:33.033
> 
> 标签：ruby-on-rails, ruby, rspec

我正在尝试测试下面的登录方法，但它似乎没有将 data_provider_user 保存到数据库中。我已经使用调试器进行了检查，它运行良好，直到它离开方法并返回到 rspec 代码，如下所示。我还检查了对象在使用 .valid 保存后是否有效？所以我有点迷路了！

```
def login
 require 'TwitterOauth'
 @data_provider_user = DataProviderUser.find(params[:id])

 if @data_provider_user.twitter?

  @request_token = TwitterOauth.request_url

  @data_provider_user.access_token = @request_token.token
  @data_provider_user.oauth_token_secret = @request_token.secret

  if @data_provider_user.save
    debugger
    redirect_to @request_token.authorize_url              
  end      

 end
end 
```

测试：

```
it "should update the tokens" do
    require 'TwitterOauth'
    TwitterOauth.stub(:request_url).and_return(@token)
    debugger
    get :login, {id: @data_provider_user.id}
    debugger
    @data_provider_user.access_token.should_not eq(nil)
    @data_provider_user.oauth_token_secret.should_not eq(nil)
  end 
```

调试器输出：

```
#<DataProviderUser id: 84, user_id: 63, data_provider_id: 63, username: nil, password: nil, created_at: "2013-02-19 15:21:59", updated_at: "2013-02-19 15:21:59", access_token: nil, update_frequency: nil, oauth_token_secret: nil>

#<DataProviderUser id: 84, user_id: 63, data_provider_id: 63, username: nil, password: nil, created_at: "2013-02-19 15:21:59", updated_at: "2013-02-19 15:22:12", access_token: "186553918-sEAEO2fcvtyO1x99eH4Q4XwVcOYatODCQ5f1TwqD", update_frequency: nil, oauth_token_secret: "gLw2PtUyTZfxIan1gJBnbP7icboXbi98KlUoOn7ycVs">

#<DataProviderUser id: 84, user_id: 63, data_provider_id: 63, username: nil, password: nil, created_at: "2013-02-19 15:21:59", updated_at: "2013-02-19 15:21:59", access_token: nil, update_frequency: nil, oauth_token_secret: nil> 
```

任何帮助将不胜感激！！

- - - 更新 - - - -

代码实际上没有任何问题，问题是 rspec 没有及时重新加载它。解决此问题的一种方法是使用：

```
@data_provider_user.reload 
```

在刷新对象之前，相应地更新值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:01:19.690

代码实际上没有任何问题，问题是 rspec 没有及时重新加载它。解决此问题的一种方法是使用：

```
@data_provider_user.reload 
```

在刷新对象之前，相应地更新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:23:12.330

您确定您正在查看正确的数据库吗？当您进行测试时，它可能会`myapp_test`（myapp 是您所谓的应用程序）。您可能正在查看您的`myapp_development`数据库。

如果您通过`rails db`机会访问数据库，那么您将进入您的开发数据库。您可以检查`select database();`是否使用 MySQL。如果要检查测试数据库，请使用`RAILS_ENV=test rails db`. 同样，您可以使用 select 语句来验证您是否在正确的数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-17T04:51:08.593

在规范/rails_helper.rb

将**false**设置为**use_transactional_fixtures**：

```
# If you're not using ActiveRecord, or you'd prefer not to run each of your
# examples within a transaction, remove the following line or assign false
# instead of true.
config.use_transactional_fixtures = false 
```

# c# - 慢读数百个文件

> ID：14961361
> 
> 赞同：2
> 
> 时间：2013-02-19T15:39:43.777
> 
> 标签：c#, performance, file, binary

我在处理更多二进制文件时遇到问题。我有很多很多文件夹，每个文件夹大约有 200 个 bin 文件。

我选择其中 2 个目录，然后将这 2 个目录中的所有 bin 文件（它们的路径）保存到 List，并使用此列表进行一些过滤。最后，列表中大约有 200 个 bin 文件。

然后我遍历所有过滤的文件，并从每个读取的前 4x8 字节（我试过`FileStream`or `BinaryReader`）。所有这些操作大约需要 2-6 秒，但只是第一次。下一次就够快了。如果文件长时间（大约 30 分钟）没有任何反应，则问题再次出现。

所以可能是关于缓存的东西还是什么？

有人能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:43:52.990

文件的句柄很可能已被处理，这就是为什么在一段时间后 GC 会删除它们，并且需要更长的时间或只是操作系统将文件加载到 RAM 中，然后从那里为您提供它们，这就是为什么它更快，但这不是问题，过程运行缓慢是因为它很慢，第二次更快并不重要，因为你不能依赖它。

我的建议是尽可能多地并行处理这些文件，以便能够充分利用手头硬件的全部功能。

首先隔离处理文件的代码，然后在 a 中运行代码`Parallel.ForEach`，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:32:07.430

一种可能性是您的驱动器将进入睡眠状态（通常，驱动器将被配置为在 15-30 分钟后关闭）。这会增加一个显着的延迟（5 秒是一个典型的数字），因为硬盘驱动器正在恢复速度。

幸运的是，这是一件容易测试的事情。只需将断电时间设置为 6 小时，然后测试行为是否发生了变化。

# php - 使用 PHP 提交时如何获取按钮元素的值？

> ID：14961362
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:39:51.247
> 
> 标签：php

这`<input type="submit">`很容易，它只是价值属性。但是对于一个`<button>Value</button>`值在中间（这允许我在按钮标签中有一个很重要的图标）。

我如何在 PHP 中获得它？如果我的按钮看起来像`<button type="submit">Text <i class="icon-remove"></i></button>`我包含的`<i></i>`部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:43:31.133

只需使用您要传递的数据为您的按钮元素命名和值。

```
<button type="submit" name="button" value="whatever">Text <i class="icon-remove"></i></button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:47:21.430

假设您的表单使用 POST 方法：

```
<form method="POST" action=""> 
```

你可以这样定义你的按钮：

```
<button value="value_button" type="submit" name="name_button">Submit</button> 
```

并像这样获得他的价值：

```
$valueButton = $_POST['name_button']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:43:41.167

```
<button name="name_of_button" value="some_value">Some Value</button> 
```

假设您的表单是`POST`ed 然后使用该值`$_POST['name_of_button']`

# iphone - 如何在此代码上实现快速枚举

> ID：14961363
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:39:56.647
> 
> 标签：iphone, ios, xcode

我想`enumeration`在这段代码上快速实现，请帮助我。

```
int xx;
int b=0;

for (xx=0 ; xx<(distancearray.count); xx++) {
    if ([NSNull null]!=[distancearray objectAtIndex:xx]&& 0 !=[[[distancearray objectAtIndex:xx] description] intValue] ) {
        b++;
        latitudeLabel.text=[NSString stringWithFormat:@" %d",b*100];
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:41:51.540

试试这个 ：

```
for( id object in distancearray){
    if ([NSNull null]!=object && 0 !=[[object description] intValue] ) {
        b++;
        latitudeLabel.text=[NSString stringWithFormat:@" %d",b*100];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:50:18.930

为简单起见：

```
for( id object in distancearray){
    if (object && [[object description] intValue] != 0) {
        b++;
        latitudeLabel.text=[NSString stringWithFormat:@" %d",b*100];
    }
} 
```

要了解迭代数组：[如何迭代 NSArray？](https://stackoverflow.com/questions/992901/how-do-i-iterate-over-an-nsarray)

# sql - 无法绑定多部分标识符

> ID：14961365
> 
> 赞同：0
> 
> 时间：2013-02-19T15:40:05.817
> 
> 标签：sql

```
SELECT     
   TOP (100) PERCENT 
   dbo.bARCM.CustGroup, dbo.bARCM.Customer, 
   CASE WHEN udJobType IN ('Scheduled Maintenance', 'Unscheduled Emergency', 
                      'Unscheduled Call Out') THEN 'Maintenance' 
        WHEN udJobType IN ('Scheduled Special Projects', 'UPS Internal Capital Exp') 
                      THEN 'Capital' 
        WHEN udJobType LIKE '%Turnaround%' THEN 'T/A' 
   END AS JobType, 
   CASE WHEN Factor = 1.0 THEN 'ST' 
        WHEN Factor = 1.5 THEN 'OT' 
        WHEN Factor = 2.0 THEN 'OT' 
   END AS STOT, 
   SUM(dbo.bJBID.Hours) AS Hours,
   DATEADD(MONTH, DATEDIFF(MONTH, 0, dbo.bJBID.JCDate), 0) as SortMonth
FROM         
   dbo.bJBID 
INNER JOIN
   dbo.bJBIN ON dbo.bJBID.JBCo = dbo.bJBIN.JBCo AND dbo.bJBID.BillMonth = dbo.bJBIN.BillMonth AND dbo.bJBID.BillNumber = dbo.bJBIN.BillNumber 
INNER JOIN
   dbo.bARCM 
INNER JOIN
   dbo.bJCCM ON dbo.bARCM.CustGroup = dbo.bJCCM.CustGroup AND dbo.bARCM.Customer = dbo.bJCCM.Customer 
INNER JOIN
   dbo.JCJMPM ON dbo.bJCCM.JCCo = dbo.JCJMPM.JCCo AND dbo.bJCCM.Contract = dbo.JCJMPM.Contract ON dbo.bJBIN.JBCo = dbo.JCJMPM.JCCo AND 
                      dbo.bJBIN.Contract = dbo.JCJMPM.Contract 
INNER JOIN
    dbo.bJCCT ON dbo.bJBID.CostType = dbo.bJCCT.CostType AND dbo.bJBID.PhaseGroup = dbo.bJCCT.PhaseGroup 
INNER JOIN
    dbo.budAcctMonths ON dbo.budAcctMonths.Month = dbo.bJBIN.BillMonth
WHERE     
    (dbo.bJCCM.JCCo = 1) 
    AND (dbo.bJBID.CostType IN (1, 41, 42, 43, 44, 45, 46)) 
    AND (dbo.bJBID.CostTypeCategory = 'L') 
    AND (dbo.JCJMPM.udPlantLocation LIKE 'Deer%') 
    AND (dbo.bARCM.Name LIKE 'Dow%' OR dbo.bARCM.Name LIKE 'Rohm%')
GROUP BY 
    dbo.bARCM.CustGroup, dbo.bARCM.Customer, 
    dbo.JCJMPM.udJobType, dbo.bJBID.Factor, dbo.SortMonth
HAVING      
    (dbo.bARCM.CustGroup = 1) AND (SUM(dbo.bJBID.Hours) <> 0) 
```

当我执行此查询时，我得到

> *无法绑定多部分标识符“dbo.SortMonth”*

错误信息。我是 SQL 新手，需要一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:44:52.963

您正在为以下内容`SELECT`分配别名，但除非在子查询中命名，否则您不能使用别名。`SortMonth``DATEADD(MONTH, DATEDIFF(MONTH, 0, dbo.bJBID.JCDate), 0)``GROUP BY`

您需要将代码更改为：

```
GROUP BY dbo.bARCM.CustGroup, 
    dbo.bARCM.Customer, 
    dbo.JCJMPM.udJobType, 
    dbo.bJBID.Factor,
    DATEADD(MONTH, DATEDIFF(MONTH, 0, dbo.bJBID.JCDate), 0)  -- use the DATEADD code here not the alias 
```

# java - 无法在 jsoup 中使用 Document

> ID：14961366
> 
> 赞同：0
> 
> 时间：2013-02-19T15:40:06.480
> 
> 标签：java, android, jsoup

我正在尝试使用 jsoup 将 HTML 解析为我的 android 应用程序。但似乎错误发生在 Document.

“无法将文档解析为类型”

“Jsoup 无法解决”

谁能帮我解决这个问题？因为我还没有找到解决它的方法。

```
import java.net.URL;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

URL url = new URL("http://google.com");
Document document = Jsoup.parse(url, 5000); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:56:00.987

> “Jsoup 无法解决”

因为您没有正确导入库。您必须创建一个 lib 文件夹，然后将 .jar 放入该文件夹中，然后添加构建路径。

# ios - 将不透明子视图添加到 UITextField

> ID：14961367
> 
> 赞同：0
> 
> 时间：2013-02-19T15:40:21.403
> 
> 标签：ios, objective-c, uiview, uitextfield, opacity

我有一个子类，`UITextField`我正在尝试向它添加一个不透明的子视图。但是，当我输入 时`UITextField`，它看起来是透明的，我可以看到视图后面的文本。如何使视图完全不透明？这是初始化子类并添加视图的代码。

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
       _dropdownIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"ab- dropdown-on"]];     
        dropdownIcon.backgroundColor = [UIColor blackColor];
       _dropdownIcon.frame = CGRectMake(self.frame.size.width-DROPDOWN_ICON_SIZE,0,DROPDOWN_ICON_SIZE,DROPDOWN_ICON_SIZE);
       [self addSubview:_dropdownIcon];
   }
    return self;
} 
```

![这就是我得到的](../Images/e1488b127dfb65163dfd15c4071a3b86.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:49:36.540

您的子类需要覆盖该`-textRectForBounds:`方法以返回您希望文本绘制的实际区域，例如

```
- (CGRect)textRectForBounds:(CGRect)bounds
{
    CGRect textRect = [super textRectForBounds:bounds];
    textRect.size.width -= 30; // or however wide your control is—play with this value
    return textRect;
} 
```

你看到的并不是图标是不透明的——文本只是被绘制在它上面，因为文本字段并不“知道”图标在那里。

您还可以查看[rightView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instp/UITextField/rightView)属性和相关的[-rightViewRectForBounds:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instm/UITextField/rightViewRectForBounds%3a)方法，尽管如果您希望文本字段自动显示和隐藏附件视图，这些方法最有用。

# c++ - C++ 中的一个成员枚举

> ID：14961368
> 
> 赞同：4
> 
> 时间：2013-02-19T15:40:23.823
> 
> 标签：c++, enums

我偶然发现了这个关于 c++ 中整数幂的问题的答案：[https ://stackoverflow.com/a/1506856/5363](https://stackoverflow.com/a/1506856/5363)

我非常喜欢它，但我不太明白为什么作者使用一个元素枚举而不是某些整数类型。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:45:34.947

AFAIK 这与旧的编译器有关，不允许您定义编译时常量成员数据。使用 C++11 你可以做

```
template<int X, int P>
struct Pow
{
    static constexpr int result = X*Pow<X,P-1>::result;
};
template<int X>
struct Pow<X,0>
{
    static constexpr int result = 1;
};
template<int X>
struct Pow<X,1>
{
    static constexpr int result = X;
};

int main()
{
    std::cout << "pow(3,7) is " << Pow<3,7>::result << std::endl;
    return 0;   
} 
```

# jquery - 如何从codeigniter视图中的json ajax调用获得响应？

> ID：14961371
> 
> 赞同：0
> 
> 时间：2013-02-19T15:40:35.963
> 
> 标签：jquery, ajax, json, codeigniter

在我看来，我试图从 codeigniter 控制器获得响应，但没有成功。这是我的 javascript 文件中的代码：

```
 // user enter his e-mail so check him against the database.
   $("#formSendPassword").submit(function(e){     

       e.preventDefault();

        var email = $(this).find("#checkemail").val();

        var obj = {email: email};
        var url = $(this).attr("action");
        var data =  {email: email};

        $.post(url, obj,data, function(jsonResp){
           console.log(success);
            if(jsonResp.success) {
                     alert(jsonResp['success']);
                    $('#successMailMessage').fadeIn();

          }  else {
                    alert("Fail");
                    $('#errorMailMessage').fadeIn();
                    }

        }, 'json');
    }) 
```

我的控制器中的代码如下：

```
 public function checkEmail()
    {     
        // set the validation rules
        $this->form_validation->set_rules('checkemail', 'E-Mail', 'valid_email|required|trim|encode_php_tags');

        $this->form_validation->set_error_delimiters('<br /><p class=jsdiserr>', '</p><br />');
        // if validation is passed
        if ($this->form_validation->run() != FALSE) 
        {
            $ids=array();
            $ids[0]=$this->db->where('email', $this->input->post('checkemail'));

            $query = $this->backOfficeUsersModel->get();
            if($query)
            {

                $data = array(
                    'userid'       => $query[0]['userid'],
                    'username'       => $query[0]['username'],
                    'password'       => $query[0]['password'],
                    'firstname'       => $query[0]['firstname'],
                    'lastname'       => $query[0]['lastname'],
                    'email'       => $query[0]['email']
                ); 

                $jsonResp['success'] = "Ok";
                $jsonResp = array();
        } else {   
               // echo json_encode(array("success" => false, "error" => "Wrong email"));
                $jsonResp['success'] = "Fail";
        }
        //  form validation has failed 
        } else {     
            $errorMessage = "Please enter valid e-mail";
        }
    }   // end of function checkEmail 
```

如您所见，我试图在我的 js 文件中 console.log 成功，但没有成功。谁能告诉我我做错了什么？

问候，佐兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:02:00.883

您应该使用 $data 数组元素来存储您的 json 响应，然后再将其传递给视图。此视图是您的 javascript 回调正在寻找的 json 响应。我的猜测是您的控制台日志调用永远不会触发。

尝试以下操作：

在您的控制器代码中，例如：

```
 $data['json'] = json_encode(array("success" => false, "error" => "Wrong email"));
 $this->load->view('json_response', $data); 
```

定义一个视图如下：

```
<?php
    $this->output->set_header('Content-Type: application/json; charset=utf-8');
    echo $json;
?> 
```

您还应该在 jQuery 调用中定义一个数据类型（dataType：“json”）。

编辑：所以你的 jQuery post call 应该如下所示：

```
$.post(url, data, function(data) {
    console.log(data.sucess);
}, "json"); 
```

您也不需要传递 obj 。此外，您需要记录 data.success，而不仅仅是成功。让我知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:06:51.970

您的控制器正在设置最终数据，但您没有将其打印出来。我没有发现您的数组使用 json_encode 转换为 json 然后打印出来。

试试看。另外，您正在填充数组，然后为什么要再次执行 = array() ？

```
$jsonResp['success'] = "Ok";
$jsonResp = array(); 
```

看看这个链接是否对你有帮助： http: [//amitavroy.com/justread/content/articles/getting-ajax-data-using-views-codeigniter](http://amitavroy.com/justread/content/articles/getting-ajax-data-using-views-codeigniter)

# python - 保存后更新 FK 模型 DateField

> ID：14961374
> 
> 赞同：0
> 
> 时间：2013-02-19T15:40:41.187
> 
> 标签：python, mysql, django

我有一个人模型和一个组模型，如下图：

```
class Person (models.Model):
  name = models.CharField(max_length=75)
  group = models.ForeignKey('Group', blank=True, null=True)

class Group (models.Model):
  name = models.CharField(max_length=100)
  last_join = models.DateField(auto_now = True) 
```

我想要的是当我将一个新人添加到一个组时，该组的 last_join 会更新为当前时间。我可以在模型中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:47:13.643

当然，只需在您的 Person 模型上使用[post_save 信号](https://docs.djangoproject.com/en/1.4/topics/signals/)来更新 Group 的时间。Auto_now 非常适合更新上次修改日期，但这仅适用于包含它的模型。它不知道其他相关模型的状态变化。

# sql-server - 来自 Powershell 的 Powershell DBCC CheckDB

> ID：14961380
> 
> 赞同：2
> 
> 时间：2013-02-19T15:40:55.273
> 
> 标签：sql-server, powershell, sql-server-2005

我想知道是否有人可以帮助显示以下代码。如果可能的话，我基本上是在尝试重新散列此代码，以允许我针对名为“servers.txt”的文本文件中提供的一组服务器名称运行它。

DBCC 应该由 PS 脚本运行并针对该服务器名的所有 DB 运行。我对 PS 的了解不够快，无法理解如何为这个脚本执行此操作。

如何更改它允许插入值而不是为每个服务器名硬编码？

我已经阅读了一些相关内容，并查看了`Invoke-Sql`我认为是 PS 的 SQL 2008 扩展的命令。

不幸的是，PS 环境来自 SQL 2005 盒子，我没有能力移动它，所以不要认为我不能使用调用

请查看原始代码，然后查看我的实验以尝试使用调用运行它。

```
$ScriptName = $myInvocation.MyCommand.Name
[void][reflection.assembly]::LoadWithPartialName("System.Data.SqlClient")
$ConnString = "Server=DB-OCC05;Integrated Security=SSPI;Database=master;Application Name=$ScriptName"
$MasterConn = new-object ('System.Data.SqlClient.SqlConnection') $ConnString
$MasterCmd = new-object System.Data.SqlClient.SqlCommand 
$MasterCmd.Connection = $MasterConn
$SqlDBCC = "DBCC CHECKDB(master) WITH TABLERESULTS"
$MasterCmd.CommandText = $SqlDBCC
$MasterConn.Open()
$Rset = $MasterCmd.ExecuteReader()
If ($Rset.HasRows -eq $true) {
    While ($Rset.Read()) {
        $line = $Rset["MessageText"]
        If ($Rset["Level"] -gt 10) {
            Write-Host $line -backgroundcolor Yellow -foregroundcolor Red
        } else {
            Write-Host $line 
        }
    }
    $Rset.Close()
}
$MasterConn.Close() 
```

然后我的测试从 SQL 2005 环境运行：

```
Invoke-Sqlcmd -Query "SELECT GETDATE() AS TimeOfQuery;" -ServerInstance "MyComputer\MyInstance" 
```

并且还尝试了这个测试：

```
gc "C:\Powershell\Servers.txt" | foreach-object {Invoke-Sqlcmd "DBCC checkdb;" -ServerInstance "$_\MyInstance"} 
```

但是上面的测试运行没有起作用，原因是：

> 术语“Invoke-Sqlcmd”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者是否是路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:43:18.163

对您的脚本进行一些修改。除了连接字符串和底部的几行用于加载 servers.txt 文件（每个实例一行的文本文件）并枚举其内容之外，一切基本相同：

```
function Execute-DBCC
{
    param (
        [parameter(Mandatory = $true)][string]$serverInstance
    )

    $connString = "Server=$serverInstance;Integrated Security=SSPI;Database=master;Application Name=$ScriptName"
    $masterConn = new-object ('System.Data.SqlClient.SqlConnection') $connString
    $masterCmd = new-object System.Data.SqlClient.SqlCommand 
    $masterCmd.Connection = $masterConn

    $masterCmd.CommandText = "EXECUTE master.sys.sp_MSforeachdb 'DBCC CHECKDB([?]) WITH TABLERESULTS'"
    $masterConn.Open()
    $reader = $masterCmd.ExecuteReader()

    if ($reader.HasRows -eq $true) 
    {
        while ($reader.Read()) 
        {
            $messageText = $reader["MessageText"]

            if ($reader["Level"] -gt 10) 
                { Write-Host $messageText -backgroundcolor Yellow -foregroundcolor Red  } 
            else 
                { Write-Host $messageText  }
        }

        $reader.Close()
    }

    $masterConn.Close() 
}

[void][reflection.assembly]::LoadWithPartialName("System.Data.SqlClient")

$servers = @(Get-Content ".\servers.txt")

$servers | %{
    Execute-DBCC $_
} 
```

# java - 使用 Java 类反射的通用“准 toString()”

> ID：14961383
> 
> 赞同：1
> 
> 时间：2013-02-19T15:41:00.763
> 
> 标签：java, reflection

我一直在尝试创建一个健壮的代码，可以打印出任何 Java 类进行调试。为此，我使用反射。为了防止诸如“布尔包含静态最终布尔真”之类的递归定义，我忽略了等于其父项的字段。我使用 String += 只是出于懒惰。它不一定是有效的。

然而，有没有更好的方法来递归描述具有反射的对象？

```
public String reflectionShowFields(Object parentObject) {
    String stringData = "";

    for (Field field:parentObject.getClass().getFields()) {
        try {
            Class<?> type = field.getType();
            String typeSimpleName = type.getSimpleName();
            Object fieldValue = field.get(parentObject);
            String fieldName = field.getName();
            if (type.isPrimitive() || type.isEnum() || CharSequence.class.isAssignableFrom(type)) {
                stringData += String.format("%s: %s\n", fieldName, fieldValue);
            } else if (Iterable.class.isAssignableFrom(type)) {
                stringData += String.format(">>> %s[%s]: \n", fieldName, typeSimpleName);
                for (Object item:(Iterable)fieldValue) {
                    stringData += reflectionShowFields(item);
                }
                stringData += String.format("<<< %s[%s]: \n", fieldName, typeSimpleName);
            } else if (!fieldValue.equals(parentObject)) {
                stringData += String.format(">>> %s[%s]: %s \n--------\n", fieldName, typeSimpleName, fieldValue.toString());
                stringData+= reflectionShowFields(fieldValue);
                stringData += String.format("<<< %s[%s]: \n", fieldName, typeSimpleName);
            }
        } catch (IllegalAccessException ignored) {}
    }
    return stringData;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:48:49.570

您可以使用 Apache commons-lang ReflectionToStringBuilder [https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/ReflectionToStringBuilder.html](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/ReflectionToStringBuilder.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:58:17.807

我认为这行不通。

*   忽略“与其父母相同”的字段是行不通的。如果你有一个`A`引用 a 的`B`那个引用回`A`.

*   您*想*了解循环以及 DAG 中的共享节点。

*   迭代一个`Iterable`可以有副作用，或者它可能永远不会终止，或者它可能会抛出异常。

*   生成任意图形的可读渲染可能真的很难。

*   这将比手工构建的`toString()`方法慢一个数量级。

但是这样想。如果这是一个好主意，那么会有高调的 3rd 方库来做这种事情。我们都已经在使用它们了。事实证明有 3rd-party 库，但你很难称它们为高调。

* * *

顺便说一句，您可以使用 JAXB 或 JSON 绑定将 POJO 呈现为文本。这达到了同样的目的......

* * *

最后，您的 Boolean 示例具有 Boolean 类型的静态字段并不合适。您不想在显示实例时呈现静态字段。

# android - SQL 语法错误 Android

> ID：14961395
> 
> 赞同：1
> 
> 时间：2013-02-19T15:41:36.333
> 
> 标签：android, sql, syntax

我收到一个 SQL 语法错误，但我不太清楚为什么。这是我得到的错误代码；

```
android.database.sqlite.SQLiteException: near "GCSE": syntax error (code 1): , while compiling: SELECT foreign_word,english_meaning,correct FROM vocab_words WHERE name = AQA GCSE Spanish Higher 
```

有什么建议可以解决这个问题 - 我不知道错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:42:42.220

当列的数据类型是字符串时，它的值应该用单引号括起来。

```
SELECT foreign_word,english_meaning,correct 
FROM vocab_words 
WHERE name = 'AQA GCSE Spanish Higher' 
```

# c# - 无限循环等待线程变为活动状态 { while !thread.isAlive ; }

> ID：14961404
> 
> 赞同：-1
> 
> 时间：2013-02-19T15:42:01.970
> 
> 标签：c#, multithreading

我正在创建一个应用程序，需要在新线程中做一些工作并将结果保存到静态列表，然后线程自然死亡。一次只能执行这个附加线程的一个实例，因此当负责创建线程的函数发现线程已经工作时，它应该返回。

创建我的应用程序时，我在 msdn 上使用了本指南：http: [//msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.80%29.aspx)

本指南说：

```
// Create the thread object. This does not start the thread.
Worker workerObject = new Worker();
Thread workerThread = new Thread(workerObject.DoWork);

// Start the worker thread.
workerThread.Start();
Console.WriteLine("main thread: Starting worker thread...");

// Loop until worker thread activates.
while (!workerThread.IsAlive);

// Put the main thread to sleep for 1 millisecond to
// allow the worker thread to do some work:
Thread.Sleep(1); 
```

所以我在我的应用程序中使用了这段代码：

```
if (TibiaControl.PathFinder.PathFinderThread != null && TibiaControl.PathFinder.PathFinderThread.IsAlive)
    return false;

TibiaControl.PathFinder Finder = new TibiaControl.PathFinder(targetX, targetY);
TibiaControl.PathFinder.PathFinderThread = new Thread(new ThreadStart(Finder.FindPath));
TibiaControl.PathFinder.PathFinderThread.Start();
SystemControl.DebugMessage(0, "_findPath -- 1");
while (!TibiaControl.PathFinder.PathFinderThread.IsAlive) ;
Thread.Sleep(1);
SystemControl.DebugMessage(0, "_findPath -- 2"); 
```

但是当以高频率执行此功能时（例如每 20-30 毫秒一次），我的应用程序会卡住

```
while (!TibiaControl.PathFinder.PathFinderThread.IsAlive) ; 
```

行和主线程陷入无限循环（好像线程在while循环发生之前已经完成了它的工作）。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:03:38.587

我认为您可能从示例中盲目地复制了一些您不需要的代码：

```
while (!TibiaControl.PathFinder.PathFinderThread.IsAlive) ;
Thread.Sleep(1); 
```

他们这样做的原因是为了展示他们的 RequestStop 方法的有用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:01:57.660

我不会将该代码用作任何有用应用程序的源代码。首先，线程等待有更好的方法。例如，`ManualResetEventSlim`。其次，很难从您发布的代码中判断是否`IsAlive`是`volatile`. 那么，即使是在一个真正不使用特殊代码做任何事情的 x86 系统中。我建议使用更安全、更明确的线程安全值读取形式。例如：

```
while (0 == Interlocked.Read(ref workerThread.IsAlive)); 
```

这意味着~~将~~创建一个新变量 IsAlive~~更改~~为 long。但是，在单个 CPU 系统中，您只是使唯一的 CPU 忙碌，而其他线程几乎没有机会使用它。您应该将控制权交给其他线程：

```
while (0 == Interlocked.Read(ref workerThread.IsAlive)) Thread.Sleep(1); 
```

但是，我认为从*该*示例代码开始是一个坏主意。试着弄清楚*你*需要做什么并详细说明......

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/magazine/jj863136.aspx](http://msdn.microsoft.com/en-us/magazine/jj863136.aspx)和[http://msdn.microsoft.com/en-us/magazine/jj883956.aspx](http://msdn.microsoft.com/en-us/magazine/jj883956.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T08:53:13.737

将 IsAlive 循环与查询 ThreadState 结合起来：

```
while (!myThread.IsAlive 
    && myThread.ThreadState != ThreadState.Stopped
    && myThread.ThreadState != ThreadState.Aborted)
{} 
```

这避免了线程在启动后立即停止的情况下的无限循环

# php - WP 替换自定义元框中的简码

> ID：14961405
> 
> 赞同：0
> 
> 时间：2013-02-19T15:42:01.983
> 
> 标签：php, wordpress, formbuilder, meta-boxes

我想弄清楚如何在自定义 Meta Box 中替换 FormBuilder 的简码 [formbuilder:#]。这是我获取元数据的方式：

```
$meta = get_post_meta( get_the_ID() );
foreach($meta as $key => $value){
    $post_meta = get_post_meta($post->ID, $key, true);
} 
```

我尝试做 the_content() 没有运气。任何帮助将不胜感激。或者，如果有人知道那里有任何教程。

这是formbuilder插件的网站： [formbuilder](http://wordpress.org/extend/plugins/formbuilder/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:08:25.727

**使用这个技巧；**

```
$t = get_post_meta($post->ID, "CUSTUM_META_KEY", true);
$trep = str_replace('[formbuilder:#]', '' , $t);
echo $trep; 
```

# java - 编写我自己的 Android 序列化类

> ID：14961408
> 
> 赞同：0
> 
> 时间：2013-02-19T15:42:06.970
> 
> 标签：java, android, xml, serialization, xml-serialization

我正在编写自己的 android 序列化类来将对象转换为 xml。我创建了一个 Bar 类，它由条形的颜色、矩形和除法组成。

```
public class Bar {

    String colour;
    int Rect;
    int Division;

    public Bar(String colour, int Rect, int Division) {

        this.colour = colour;
        this.Rect = Rect;
        this.Division = Division;

    }

    public String getColour() {

        return colour;
    }

    public int getRect() {

        return Rect;
    }

    public int getDivision() {

        return Division;
    }

} 
```

在我的主要活动中，我创建了两个条并将它们添加到一个数组中。我想遍历数组并获取每个条的颜色并将其写入 xml 文件。但是，一旦创建了文件，写入 xml 文件的唯一内容就是我的 xml 标头。下面是我的代码：

```
public class MainActivity extends Activity {

    private String header = "[xmlDoc setVersion:@" + "\" 1.0 \"" + "]" + "\n";
    private String barModel = "<barModel>" + "\n";
    private String bars = "<bars>" + "\n";
    private String bar = "<bar>" + "\n";
    private String rect1 = "<rect>";
    private String rect2 = "</rect>" + "\n";
    private String divisions = "<divisions>";
    private String divisions2 = "</divisions>" + "\n";
    private String colorId = "<colorId>";
    private String colorId2 = "</colorId>" + "\n";
    ArrayList<Bar> barList;
    Bar David;
    Bar Perrine;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addtoArray();
        saveModel();
        setContentView(R.layout.activity_main);

    }

    public void addtoArray() {

        List<Bar> barList = new ArrayList<Bar>();

        barList.add(new Bar("Blue", 33, 8898));
        barList.add(new Bar("Red", 6876, 65));

    }

    protected void saveModel() { // creat directory and file to write to File

        File xmlFile = new File(Environment.getExternalStorageDirectory()
                .getPath() + "/serializeObject");
        xmlFile.mkdirs();
        File file = new File(xmlFile, "personmodel.xml");

        try {

            FileWriter writer = new FileWriter(file);
            writer.append(header);
            writer.flush();

            // iterate through bars
            for (Bar array : barList) {

                String colour = array.getColour();
                writer.append(colorId);
                writer.append(colour);
                writer.append(colorId2);
                writer.flush();
                writer.close();

            }

        } catch (Exception e) {
            // Log.d("Downloader", e.getMessage());
        }

    }
} 
```

谁能帮助我并告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:46:42.547

写出 XML 数据的最简单方法是`XmlSerializer`在 SDK 中使用（[文档链接](https://developer.android.com/reference/org/xmlpull/v1/XmlSerializer.html)）。这使您无需提供所有样板文件，如标题和所有括号语法，您只需专注于开始和结束标签以及在其间添加数据元素和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:54:45.167

我宁愿使用 JSON。

序列化：

```
try {
    JSONObject bar = new JSONObject();
    bar.put("color", yourBarObject.getColor());
    bar.put("rect", yourBarObject.getRect());
    bar.put("division", yourBarObject.getDivision());
    // Here you are
    String representation = bar.toString();

} catch (JSONException ex){
    ex.printStackTrace();
    throw new RuntimeException(ex);
} 
```

反序列化：

```
try {
    JSONObject bar = new JSONObject(representation);
    String color = bar.getString("color");
    int division = bar.getInt("division");
    int rect = bar.getInt("rect");
    Bar bar = new Bar(color, rect, division);
} catch (JSONException ex){
    ex.printStackTrace();
    throw new RuntimeException(ex);
} 
```

顺便说一句：尽量坚持骆驼案例表示法：`ThisIsAClassName`和`thisIsAnObjectName`。

# wcf - 客户端中不存在自定义 EndpointBehavior

> ID：14961409
> 
> 赞同：1
> 
> 时间：2013-02-19T15:42:08.707
> 
> 标签：wcf, endpointbehavior

我想将自定义消息头添加到 myService 并且我已经点击了链接：

[http://trycatch.me/adding-custom-message-headers-to-a-wcf-service-using-inspectors-behaviors/](http://trycatch.me/adding-custom-message-headers-to-a-wcf-service-using-inspectors-behaviors/)

我已经很好地配置了它，并且在服务器端 IServiceBehavior.ApplyDispatchBehavior 正在通过调试运行，我可以在 ServiceDescription.Endpoints[0].Behaviors 中看到我的自定义行为，但是当我运行 ServiceEndpointCollection endpoints = MetadataResolver.Resolve(descriptions, address, MetadataExchangeClientMode.MetadataExchange，客户端）；行为集合是空的，所以没有调用 IEndpointBehavior.ApplyDispatchBehavior 和 IEndpointBehavior.ApplyClientBehavior 函数 - 有人知道吗？这是我的配置文件：

```
<configuration>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="DefaultBehavior" name="MyService">
        <endpoint address="DatabaseService" behaviorConfiguration="MyCustomBehavior"
          binding="customBinding" bindingConfiguration="DefaultBindingConfig"
          contract="IMyService" />
        <endpoint address="mex" binding="netTcpBinding"
          bindingConfiguration="MexBindingConfig" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost/Services/SomeService" />
          </baseAddresses>
        </host>
      </service>      
    </services>    
    <bindings>
      <netTcpBinding>
        <binding name="MexBindingConfig" maxReceivedMessageSize="25000000" listenBacklog="30" maxConnections="30" portSharingEnabled="true">
          <readerQuotas maxArrayLength="25000000" maxStringContentLength="25000000" maxBytesPerRead="25000000" />
          <security mode="None">
          </security>
        </binding>
      </netTcpBinding>
      <customBinding>
        <binding name="DefaultBindingConfig" openTimeout="00:11:01" receiveTimeout="Infinite" sendTimeout="00:11:01" closeTimeout="00:11:01">
          <binaryMessageEncoding>
            <readerQuotas maxArrayLength="25000000" maxDepth="25000000" maxNameTableCharCount="25000000" maxStringContentLength="25000000" maxBytesPerRead="25000000" />
          </binaryMessageEncoding>
          <ImposedQuotas />
          <tcpTransport portSharingEnabled="true" maxBufferPoolSize="25000000" maxReceivedMessageSize="25000000" maxBufferSize="25000000">
          </tcpTransport>
        </binding>        
      </customBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="MyCustomBehavior">
          <MyCustomBehaviorExtension />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="DefaultBehavior">
          <serviceMetadata />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceThrottling maxConcurrentCalls="1000" maxConcurrentSessions="1000" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <MyCustomBehaviorExtension />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <extensions>
      <behaviorExtensions>
        <add name="MyCustomBehaviorExtension" type="Namespace.MyCustomBehaviorExtension, MyDllName, Version=0.0.0.1, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>      
    </extensions>
    <diagnostics performanceCounters="Off" />
  </system.serviceModel>
</configuration> 
```

# java - 单元测试图形

> ID：14961412
> 
> 赞同：6
> 
> 时间：2013-02-19T15:42:26.330
> 
> 标签：java, unit-testing, graphics, junit

是否有生成图形的单元测试代码的标准最佳实践？我专门使用 Java 和 jUnit，但我认为这个概念也适用于其他语言。

到目前为止，我能想到的最好的方法是使用 Mockito 来模拟`Graphics`对象并断言预先计算的东西，例如（伪代码）：

```
assert that graphics.drawString was called with ("abc", 50, 100)
assert that graphics.setBackgroundColor was called with Color.RED 
```

虽然这一切都很好，但我想知道这是否是正确的方法，或者是否有更成熟的实践来测试图形代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:03:09.010

我不知道这是否是既定做法，但我会考虑使用Batik 项目中的[SVGGraphics2D来模拟图形并比较生成的](http://xmlgraphics.apache.org/batik/javadoc/org/apache/batik/svggen/SVGGraphics2D.html)[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)文件。

对比二进制文件的优势在于 SVG 文件是相对可读的 XML 文件，所以如果两个文件不相等，你不仅知道有问题，而且可以很好地提示问题的确切位置。

与您的解决方案相比，优势在于可以查看这些 SVG 文件（例如在浏览器中），因此测试场景是自记录的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:11:02.640

正如您所提到的，您可以测试您的计算并调用图形 api。这很容易。但是检查您是否正确使用了图形 API（并生成了正确的图片），可能真的很困难。我知道有些公司会对生成的图形（例如网页）进行截图，并使用许多复杂的指标将其与预期结果进行比较。但通常这不是降低成本的方法，而是一些经理的年度目标（比如说“流程自动化”）。所以在你走这条路之前要三思而后行——通常这不值得痛苦

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T16:05:16.807

您可以使用 Mockito 之类的东西，并模拟您的图形对象。然后您可以验证是否调用了方法 drawString 和 setBackgroundColor。从[这里举一些例子](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#1)

就像是：

```
import static org.mockito.Mockito.*;

Graphics graphics= mock(Graphics.class);
//Run you code .... 

//verification that the methods were called 

verify(mockedList).drawString ("abc", 50, 100); 
```

# ios - UIView 转换到同一个视图

> ID：14961415
> 
> 赞同：4
> 
> 时间：2013-02-19T15:42:30.080
> 
> 标签：ios, uitableview, uiview, transition, uiviewanimationtransition

我有一个`UITableView`显示 static 的控制器`tableview`。我必须更新项目以提供辅助模式，该模式`tableview`应该翻转并显示不同的数据。我的方法是将两种模式的所有静态单元格放在一个大的 static`tableview`中，执行翻转并隐藏在特定时刻不需要的单元格。翻转应仅在 上执行`tableviewcontrollerview`，因此不影响`navigationbar`主或主`tabbar`。到目前为止，我一直在尝试使用的代码来实现这个简单的魔术技巧是：

```
// Transition using a page flip.
    [UIView transitionFromView:self.tableview
                        toView:self.tableview
                      duration:0.7
                       options:UIViewAnimationOptionTransitionFlipFromLeft
                    completion:^(BOOL finished) {
                        if (finished) {
                           /* HIDE NOT REQUIRED CELL */

                        }
                }]; 
```

不幸的是，结果是黑屏。知道如何解决吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T16:01:06.787

尝试使用以下代码：

```
[UIView transitionWithView:self.tableView 
                   duration:0.7
                   options:UIViewAnimationOptionTransitionFlipFromLeft 
                   animations:^{
                          /* any other animation you want */
                  } completion:^(BOOL finished) {
                          /* hide/show the required cells*/
                  }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:53:10.600

我认为主要问题是，视图最多可以有一个超级视图。这意味着一个视图不能同时出现在两个地方。我会尝试将视图捕获为图像并将其添加到动画之前的超级视图中，并从其超级视图中删除真实的表格视图。然后您可以在两个不同的视图（图像视图和表格视图）之间制作动画。在完成块中，只需删除图像视图。

如何捕获视图：[如何捕获当前视图屏幕截图并在代码中重用？(iPhone SDK)](https://stackoverflow.com/questions/879064/how-to-capture-current-view-screenshot-and-reuse-in-code-iphone-sdk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:58:27.227

我已经使用稍微不同的技术完成了这一点。也许它对你有用。基本结构是有一个 MainContainerView ，里面是一个 MapView （在你的情况下是一个表格视图）。当我做翻转动画时，我抓取一个单独的视图控制器（列表视图）的视图并将其作为子视图添加到 MainContainerView 并从子视图中删除 MapView。当我想向后翻转时，我会做相反的事情。

```
-(void)listViewButtonHandler:(id)sender
{
    if (_isMap) { //transition to view 2

        self.listViewController.view.frame = self.mainContainerView.bounds; //grab the view of a separate VC

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                               forView:self.mainContainerView
                                 cache:YES];
        [self.mapContainerView removeFromSuperview];
        [self.mainContainerView addSubview:self.listViewController.view];

        [UIView commitAnimations];
        self.navigationItem.leftBarButtonItem = [UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"mapButton"] target:self action:@selector(listViewButtonHandler:)]; //change the button to another title

        _isMap = NO;
    } else {
        //transition to view 1
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                               forView:self.mainContainerView
                                 cache:YES];
        [self.listViewController.view removeFromSuperview];
        [self.mainContainerView addSubview:self.mapContainerView];

        [UIView commitAnimations];
        _isMap = YES;
        self.navigationItem.leftBarButtonItem = [UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"actualListButton"] target:self action:@selector(listViewButtonHandler:)]; //change the button back

    }
} 
```

我希望这会有所帮助，并且可以适用于您的情况！

# .net - 无法从 WCF 自托管服务读取元数据

> ID：14961417
> 
> 赞同：1
> 
> 时间：2013-02-19T15:42:32.290
> 
> 标签：.net, wcf

我有一些自托管服务，需要在客户端使用元数据。当我使用 WcfTestClient 打开服务时，它会失败并显示消息“错误：无法从`https://localhost:8000/`”获取元数据我应该修复什么？

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="PrinterServiceBehavior">
                <serviceMetadata httpGetEnabled="false" httpsGetEnabled="True"/>
                <serviceDebug includeExceptionDetailInFaults="False" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <wsHttpBinding>
            <binding name="TransportSecurity">
                <security mode="Transport">
                    <transport clientCredentialType="Basic"/>
                </security>
            </binding>
            <binding name="NoSecurity">
                <security mode="None" />
            </binding>
        </wsHttpBinding>
    </bindings>
    <services>
        <service behaviorConfiguration="PrinterServiceBehavior" name="App.PrinterService">
            <host>
                <baseAddresses>
                    <add baseAddress="https://localhost:8000/" />
                </baseAddresses>
            </host>
            <endpoint address="printer" binding="wsHttpBinding" bindingConfiguration="TransportSecurity" contract="App.IPrinterService" />
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
        </service>
    </services>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:50:12.427

您是否已使用 HTTP.SYS 配置 SSL 证书以使 SSL 与自主机工作？[这](http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service)是一篇很好的博客文章，解释了如何使用 selfhost 配置 SSL。

# javascript - 在对象的数组中访问对象的属性

> ID：14961425
> 
> 赞同：0
> 
> 时间：2013-02-19T15:43:03.247
> 
> 标签：javascript, arrays, object

我正在尝试访问另一个对象（在数组中）内的数组中的对象的属性。主对象的结构如下所示（`readings`传入“week”构造函数的已构建对象数组在哪里）：

```
function week(weektitle,readings){
this.weektitle=weektitle;
this.readings=readings;
} 
```

我可以创建读数数组，并且可以在将属性传递给构造函数之前访问属性（例如`readingsArray[0].readingtitle`）（我正在这样做`weekArray[x]=new week(title,readingsArray)`）。

`readingsArray`但是，一旦将 传递给构造函数，我似乎无法访问相同的属性。从关于访问数组中对象属性的论坛问题中，我可以拼凑起来，似乎如果我的目标是在第二周获得第一次阅读的标题，我将不得不将这样的东西链接在一起：

```
weekArray[1].readingsArray[0].readingtitle 
```

但是，这是行不通的。

我是 javascript 和 jQuery 的相对新手，所以我很感谢您提供的任何信息！此外，如果有一种更优雅的方式来构建一系列周，每个周都具有属性并包含一系列具有属性的读数，我也很高兴听到这个消息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:21:35.003

是的，我是个傻瓜 - 在编辑我的问题以使其更清楚时，我意识到我正在使用`readingsArray`（数组在传递到构造函数之前的名称）来尝试访问属性，而不是`readings`（构造函数中的数组）。

改变了这一点，它工作得很好。

猜猜“大声说出来”的想法有时确实有回报！

# mysql - 从最后一项中选择信息并加入总金额

> ID：14961426
> 
> 赞同：1
> 
> 时间：2013-02-19T15:43:04.337
> 
> 标签：mysql, sql, select, join

假设我有一个这样的表：

> 编号 | 日期 | 客户 | 销售

并希望为每个客户选择：

*   购买次数
*   上次购买价值
*   购买总量，当它具有正值时

使用此表定义：

```
CREATE TABLE sales (
    id int auto_increment primary key, 
    dates date,
    customer int,
    sale int
); 
```

而这个数据：

```
INSERT INTO sales
    (dates, customer, sale)
VALUES
    ('2012-01-01', 1, 2),
    ('2012-02-01', 1, 8),
    ('2012-03-01', 2, 1),
    ('2012-04-01', 2, 7),
    ('2012-05-01', 2, -5),
    ('2012-06-01', 1, 5) 
```

我的结果应该是：

```
客户 | 销售 | 最后销售
1 3 5
2 3 7

```

我无法弄清楚如何获得它。我已经达到了这个：

```
SELECT s.customer, COUNT(s.sale) total_sales, last_sale FROM sales AS s
JOIN
  (SELECT customer, sale last_sale FROM sales GROUP BY customer ORDER BY dates DESC) AS t
  ON t.customer=s.customer
GROUP BY s.customer 
```

但它不起作用。关于如何获取这些数据的任何想法？

所有代码都在[SQL 小提琴中](http://www.sqlfiddle.com/#!2/b8561/15)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:59:06.103

试试这个

```
SELECT a.customer, count(a.sale), max_sale
FROM sales a
INNER JOIN (SELECT customer, sale max_sale 
            from sales x where dates = (select max(dates) 
                                        from sales y 
                                        where x.customer = y.customer
                                        and y.sale > 0
                                       )

           )b
ON a.customer = b.customer
GROUP BY a.customer, max_sale; 
```

[SQL 演示](http://www.sqlfiddle.com/#!2/b8561/44)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:59:59.490

```
SELECT a.customer, 
       COUNT(a.sale) total_sales,
       c.sale
FROM   sales a
       INNER JOIN
        (
          SELECT  a.*
          FROM    sales a
                  INNER JOIN
                  (
                    SELECT  Customer, MAX(Dates) max_date
                    FROM    sales
                    WHERE   sale > 0
                    GROUP   BY Customer
                  ) b ON a.customer = b.customer AND
                          a.dates = b.max_date
        ) c ON a.customer = c.customer
GROUP  BY a.customer, c.sale 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b8561/53)

# python - 替换问题 - 熊猫数据框

> ID：14961427
> 
> 赞同：1
> 
> 时间：2013-02-19T15:43:09.550
> 
> 标签：python, pandas

我有一个df

```
df:
  date     shares  symbol  date2
0 20120614  1100   AAT.N   NaN
1 20120615  1100   AAT.N   NaN
2 20120616  1100   AAT.N   NaN
3 20120617  1100   AAT.N   NaN
4 20030405  800    ABT.N   NaN
5 20030406  800    ABT.N   NaN
6 20030407  800    ABT.N   NaN
...

#This is what I want:
df:
  date     shares  symbol  date2
0 20120614  1100   AAT.N   20120615
1 20120615  1100   AAT.N   20120616
2 20120616  1100   AAT.N   20120617
3 20120617  1100   AAT.N   NaN
4 20030405  800    ABT.N   20030406
5 20030406  800    ABT.N   20030407
6 20030407  800    ABT.N   NaN
... 
```

我想用 df.ix[1]['date2'] 替换每个符号的 df.ix[0]['date2'] - 符号在数据帧中发生变化，所以我不能只在整个数据帧中应用它.

我要循环遍历，如果 i 和 i+1 的符号匹配：

```
df.ix[i]['symbol'] == df.ix[i+1]['symbol'] 
```

我打算用日期替换 NaN。

我试过：

```
df.ix[i]['date2'] = df.ix[i+1]['date']  ##This failed. 
```

然后我尝试了：

```
a = df.ix[i+1]['date']
df.replace({'date2': i}, a)
###This failed as well 
```

这里有任何建议

1) 完成此任务的最佳过程？

2) 基本问题：如何在 pandas DF 中替换 NaN（甚至是另一个数字）？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:56:33.867

这是一个可能是最“流行”的单线解决方案：

```
In [8]: df['date2'] = df.groupby('symbol').apply(lambda x: x['date'].shift(-1))

In [9]: df
Out[9]:
       date  shares symbol     date2
0  20120614    1100  AAT.N  20120615
1  20120615    1100  AAT.N  20120616
2  20120616    1100  AAT.N  20120617
3  20120617    1100  AAT.N       NaN
4  20030405     800  ABT.N  20030406
5  20030406     800  ABT.N  20030407
6  20030407     800  ABT.N       NaN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:09:24.140

为了与 DSM 的布尔解决方案进行比较，这里是快速无痛的 groupby 解决方案！

```
grouped = df.groupby('symbol')
for _, group in grouped:
    df1['date2'][group.index] = group.shift(-1)['date'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:05:55.307

我可能会做这样的事情：

```
>>> df
       date  shares symbol  date2
0  20120614    1100  AAT.N    NaN
1  20120615    1100  AAT.N    NaN
2  20120616    1100  AAT.N    NaN
3  20120617    1100  AAT.N    NaN
4  20030405     800  ABT.N    NaN
5  20030406     800  ABT.N    NaN
6  20030407     800  ABT.N    NaN
>>> same_symbols = df['symbol'] == df['symbol'].shift(-1)
>>> df['date2'][same_symbols] = df['date'].shift(-1)
>>> df
       date  shares symbol     date2
0  20120614    1100  AAT.N  20120615
1  20120615    1100  AAT.N  20120616
2  20120616    1100  AAT.N  20120617
3  20120617    1100  AAT.N       NaN
4  20030405     800  ABT.N  20030406
5  20030406     800  ABT.N  20030407
6  20030407     800  ABT.N       NaN 
```

这会找到从一行到下一行的符号相同的位置：

```
>>> same_symbols
0     True
1     True
2     True
3    False
4     True
5     True
6    False
Name: symbol, Dtype: bool 
```

然后在那里应用移位的日期：

```
>>> df['date'].shift(-1)
0    20120615
1    20120616
2    20120617
3    20030405
4    20030406
5    20030407
6         NaN
Name: date, Dtype: float64 
```

这假设符号数据是连续的并且已经排序（如果不是这样的话，很容易强加。）

或者，您可以使用`groupby`然后对每个组采取行动，最后重新组装。

# mysql - 用一个查询选择记录

> ID：14961430
> 
> 赞同：0
> 
> 时间：2013-02-19T15:43:16.717
> 
> 标签：mysql, sql, join, count

这些是我的表格结构：

数据 ：

```
id   | name
-----+-------
1    | d1
2    | d2
3    | d3 
```

供应商 ：

```
id   |  data_id    |  name
-----+-------------+----------
1    | 1           | Microsot
2    | 1           | Google
3    | 1           | Yahoo
4    | 2           | Apple 
```

连接器 ：

```
id   |  supplier_id   |  name
-----+----------------+-----------
1    | 2              | Test 1
2    | 1              | Test 2
3    | 4              | Test 3 
```

现在我想选择所有`data`记录列和表中与表中相同的`COUNT()`记录列。`connector``data_id``supplier``id``data`

结果应该是这样的：

```
id    |   name    | COUNT()
------+-----------+---------
1     | d1        | 2
2     | d2        | 1
3     | d3        | 0 
```

如何使用 mySQL 中的一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:46:41.587

```
select data.id, data.name, count(*)
  from data 
  join supplier on supplier.data_id = data.id
  join connector on connector.supplier_id  = supplier.id
  group by data.id, data.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:46:20.687

```
SELECT
   data.id,
   data.name,
   COUNT(DISTINCT connector.id)
FROM
   data
   LEFT JOIN supplier ON (data.id = supplier.data_id)
   LEFT JOIN connector ON (supplier.id = connector.supplier_id)
GROUP BY
   data.id, data.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:48:04.993

像这样的东西？

`SELECT data.id, data.name, COUNT(data.id) FROM data LEFT OUTER JOIN supplier ON(data.id == supplier.data_id) LEFT OUTER JOIN JOIN connector ON (supplier.id == connector.supplier_id)`

# c# - DirectoryInfo.GetFiles，如何在 C# 中获取不同类型的文件

> ID：14961437
> 
> 赞同：8
> 
> 时间：2013-02-19T15:43:43.183
> 
> 标签：c#, file, search, filter, directory

如何使用`DirectoryInfo.GetFiles`C# 中的函数找到 *.gif 和 *.jpg 两种文件类型？

当我尝试这段代码时：

```
string pattern = "*.gif|*.jpg";
FileInfo[] files = dir.GetFiles(pattern); 
```

例外“路径中的非法字符”。被抛出。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T15:50:10.160

没有办法组合成一个字符串模式，您必须将模式存储在列表中：

```
var extensions = new[] { "*.gif", "*.jpg" };
var files = extensions.SelectMany(ext => dir.GetFiles(ext)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T15:48:53.750

你不能那样做。您需要使用`GetFiles()`它们中的每一个方法。或者您可以为您的扩展使用一个数组，然后检查每个扩展，但您仍然需要多次使用此方法。

看看这些问题；

*   [具有多个扩展名的 GetFiles](https://stackoverflow.com/questions/3527203/getfiles-with-multiple-extentions)
*   [您可以使用多个过滤器调用 Directory.GetFiles() 吗？](https://stackoverflow.com/questions/163162/can-you-call-directory-getfiles-with-multiple-filters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:45:40.007

您不能在查询中指定多个模式，您需要有一个扩展列表并`GetFiles`为每个模式调用。例如...

```
var exts = new string[] { "*.gif", "*.jpg" };
foreach (var ext in exts) {
  var files = dir.GetFiles(ext);
} 
```

您可以使用完整的通配符`*.*`来一次获取所有文件并手动过滤它们，但是根据目录及其内容，这可能是一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-03T09:57:46.623

> 您可以在以下代码的 where 子句中添加任意数量的扩展。

```
DirectoryInfo directoryInfo = new DirectoryInfo(filePath);
FileInfo[] files = directoryInfo.GetFiles().Where(f => f.Extension == ".gif" || f.Extension == ".jpg").ToArray(); 
```

# c# - 自定义 GenderEnum 类型单选按钮所需的消息

> ID：14961438
> 
> 赞同：1
> 
> 时间：2013-02-19T15:43:43.490
> 
> 标签：c#, asp.net-mvc, enums, required-field

当客人不检查性别收音机时，我正在尝试显示此消息“O campo sexo é obrigatório”，但我得到的只是显示：“模型字段是必需的。”

代码在这里：

```
// GenderEnum.cs
namespace Diorama.Site.Models
{
    public enum GenderEnum
    {
        Male,
        Female
    }
}

// RegisterViewModel.cs
[Required(ErrorMessage = "O campo sexo é obrigatório")]
[Name("Moça ou rapaz?")]
public GenderEnum Gender { get; set; }

public static void Map()
{
    Mapper.CreateMap<RegisterViewModel, User>()
        .ForMember(u => u.Gender,
                    opt => opt.MapFrom(r => r.Gender.ToString()[0]));
    Mapper.CreateMap<User, RegisterViewModel>()
        .ForMember(r => r.Gender,
                    o => o.MapFrom(u =>
                                    u.Gender.ToLower() == "M"
                                        ? GenderEnum.Male
                                        : GenderEnum.Female));
}

//_RegisterForm.cshtml
<div class="controls">
@Html.EditorFor(model => model.Gender)
@Html.ValidationMessageFor(model => model.Gender, ""
                                    , new { @class = "help-block" })
</div> 
```

# c# - 使用 GDI+ DrawArc 时出错没有意义“ArgumentException 未被用户代码处理”

> ID：14961442
> 
> 赞同：0
> 
> 时间：2013-02-19T15:44:09.687
> 
> 标签：c#, gdi+, indexer

有关生成错误的代码，请参见图片。我试过重新订购东西，它总是发生在第二次调用`DrawArc`. 我只是复制粘贴的行

```
g.DrawArc(SystemPens.ButtonFace, outerCircle[-1], 115, 220); 
```

连续两次以说明错误不是由于拼写错误或计算错误而发生的。第一次运行正常，第二次出错。![代码生成错误和错误消息](../Images/e59902e01d2c8f2191e48bd5e94be973.png)

调用的代码`ReLayout()`：

```
 public ButtonFan()
    {
        InitializeComponent();
        for (int i = 0; i < buttonLabels.Count(); i++)
        {
            buttonLabels[i] = new System.Windows.Forms.Label();
            this.buttonLabels[i].Name = "label"+i.ToString();
            this.buttonLabels[i].Size = new System.Drawing.Size(50, 23);
            this.buttonLabels[i].TabIndex = i;
            this.buttonLabels[i].Text = "label"+i.ToString();
        }
        ReLayout();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:32:19.670

原来错误是在 FIRST 中产生的

```
g.DrawArc(SystemPens.ButtonFace, outerCircle[-1], 115, 220); 
```

陈述。仍然不确定为什么它直到下一个才抱怨，但我发现它的方式是添加一行：

```
Console.WriteLine("Finished first arc"); 
```

在第一次弧线绘制之后。然后错误在`Console.WriteLine`. 当然`Console.WriteLine`没有出错，所以这意味着它必须从上一个试图将矩形调整为负大小并在其中绘制弧线的语句翻转过来。

更改`[-1]`以`[150]`解决问题。

# joomla - 我可以从模板文件夹或其 language.ini 文件中覆盖 Joomla 的日期格式吗？

> ID：14961444
> 
> 赞同：0
> 
> 时间：2013-02-19T15:44:12.263
> 
> 标签：joomla, joomla2.5

我知道您可以通过编辑语言文件夹中的 en-GB.ini 文件来更改 Joomla 的默认日期格式。

有没有办法通过使用我的模板语言文件来覆盖它？

我试过粘贴

```
DATE_FORMAT_LC="l, d F Y"
DATE_FORMAT_LC1="l, d F Y"
DATE_FORMAT_LC2="l, d F Y"
DATE_FORMAT_LC3="d F Y"
DATE_FORMAT_LC4="Y-m-d"
DATE_FORMAT_JS1="y-m-d" 
```

进入我的模板的语言文件。使用语言 bebug 显示文件正在加载。但是，我的前端页面中的日期格式仍然保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:53:16.150

Joomla! 的日期格式信息！存储在文件中`/language/<your_language>/<your_language>.ini`

对于`en-GB.ini`，在第 224 行附近（在 Joomla! 2.5 中）。

您可以在本地覆盖它（如果您喜欢使用 GUI）：

**扩展 -> 语言管理器 -> 覆盖**

或在`language/overrides/en-GB.override.ini`

* * *

**现在，如果您想将覆盖放在您的模板**中，请尝试以下操作：

您创建文件夹：

`<your_template>/language/overrides`

放入带有覆盖的文件（例如）`en-GB.override.ini`

在 templateDetails.xml 中，您需要添加：

```
<languages>
    <language tag="overrides">language/overrides/en-GB.override.ini</language>
</languages> 
```

参考：

[如何更改日期格式？](http://docs.joomla.org/How_do_you_change_the_date_format?)

[模板语言覆盖 (COM_CONTENT_ARTICLE_INFO="")](http://forum.joomla.org/viewtopic.php?p=2566454)

# c# - [delegate].BeginInvoke 等 CLR 定义的方法记录在哪里？

> ID：14961450
> 
> 赞同：11
> 
> 时间：2013-02-19T15:44:48.517
> 
> 标签：c#, documentation, msdn, begininvoke

***[编辑，完全改写：] 似乎我的问题确实措辞不佳，也很糟糕。所以我希望这个完整的改写有助于......***

MSDN 明确规定： [Control.BeginInvoke()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)在创建控件句柄的线程上执行委托，通常这将是 GUI 线程。[Dispatcher.BeginInvoke()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)将在创建 Dispatcher 对象的线程上运行。这将是我创建的任何线程。

但是对于委托*，“ [CLR 自动定义](http://msdn.microsoft.com/en-us/library/2e08f6yc%28v=vs.110%29.aspx)BeginInvoke 和 EndInvoke”*，而这些调用在 ThreadPool 线程上运行。除了这种稍微令人惊讶的不同行为之外，我想知道如何找到自动实现的所有功能的规范。

例如：Intelli-sense 显示我的委托有一个 DynamicInvoke()。类[System.Delegate{}](http://msdn.microsoft.com/en-us/library/y22acf51.aspx)确实有一个 DynamicInvoke() 这可能意味着我的委托继承了它。但是 Delegate{} 没有 BeginInvoke()。而且 Delegate{} 有几个我的委托没有的功能。我的委托也获得了一个 GetObjectData() 方法。这似乎来自ISerializable。

所以总而言之，一个委托似乎从（1）CLR“自动”获取它的方法，（2）Delegate的某个子集{}可能是MulticastDelegate{}，可能是（3）ISerializble。**我在哪里可以找到委托获得的所有方法的全面规范？特别有趣的是 BeginInvoke()，它是精确的签名，**因为前面提到的具有该名称的两个方法具有不同的签名集。

[有人在编辑中建议“代表”是“代表”。我敢说，它不是。]

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-21T23:07:19.930

Control.Begin/End/Invoke() 和 Dispatcher.Begin/End/Invoke() 方法与委托的 Begin/End/Invoke() 方法具有相同的名称和类似的行为，但最好放弃他们的想法是相同的。最重要的区别是委托的方法是*类型安全*的，这在 Control 和 Dispatcher 版本中完全没有。运行时行为也非常不同。

CLI 规范[ECMA 335](http://www.ecma-international.org/publications/standards/Ecma-335.htm)第 II.14.6 章详细说明了管理委托的规则。最好读一章，我只给出一个概要。

委托声明被转换为继承自 MulticastDelegate 的类（不是 CLI 规范中指定的委托）。该类始终只有 4 个成员，它们的运行时实现由 CLR 提供：

*   一个接受一个对象和一个 IntPtr 的构造函数。对象是Delegate.Target，IntPtr是目标方法Delegate.Method的地址。这些成员稍后在您调用委托时使用，如果委托绑定到的方法是实例方法，则 Target 属性提供*this*引用，对于静态方法，则为 null。Method 属性确定调用哪个方法。您不直接指定这些参数，编译器会在您使用 new 运算符或使用 += 运算符订阅事件处理程序时提供它们。在事件的情况下有很多语法糖，您不必显式使用*new*运算符。

*   一个 Invoke() 方法。该方法的参数是动态生成的，并且与委托声明相匹配。调用 Invoke() 方法在同一线程上运行委托目标方法，即*同步*调用。您很少在 C# 中使用它，您只需使用允许通过仅使用对象名称和括号来调用委托对象的语法糖。

*   BeginInvoke() 方法，提供了一种进行*异步*调用的方法。该方法在目标方法忙于执行时快速完成，类似于 ThreadPool.QueueUserWorkItem 但具有类型安全的参数。返回类型始终为 System.IAsyncResult，用于找出异步调用何时完成并提供给 EndInvoke() 方法。第一个参数是一个可选的 System.AsyncCallback 委托对象，它的目标将在异步调用完成时自动调用。第二个参数是一个可选*对象*，它将按原样传递给回调，用于跟踪状态。附加参数是动态生成的，并与委托声明相匹配。

*   EndInvoke() 方法。它接受一个 IAsyncResult 类型的参数，您必须传递从 BeginInvoke() 获得的参数。它完成异步调用并释放资源。

您在委托对象上看到的任何其他方法都是从基类 MulticastDelegate 和 Delegate 继承的方法。像 DynamicInvoke() 和 GetObjectData()。

异步调用是棘手的，你很少需要使用它们。它们实际上在 .NETCore 目标（如 Silverlight）中不可用。委托目标方法在任意线程池线程上运行，就像 Threadpool.QueueUserWorkItem() 一样。它可能抛出的任何未处理的异常都会被捕获并终止线程，但不会终止您的程序。必须调用 EndInvoke()，*不*这样做会导致 10 分钟的资源泄漏。如果目标方法抛出异常，那么当您调用 EndInvoke() 时它将重新引发。您无法控制线程池线程，无法取消或中止它。Task 或 Thread 类是更好的选择。

MSDN 是相关的，委托类型的方法*没有*记录。它假设您从规范和委托声明中了解它们的作用以及它们的外观。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T17:14:09.953

根据您问题的主题，答案将是这些粗线。MSDN 可能不会更好，但它很好:)

**杰弗里·里希特（Jeffrey Richter）写过您在上面的问题中提出的问题。他在 MSDN 杂志上有这篇文章。 [http://msdn.microsoft.com/en-us/magazine/cc164139.aspx](http://msdn.microsoft.com/en-us/magazine/cc164139.aspx) 本文将向您展示实际（可能不是实际上但非常接近）BeginInvoke 和 EndInvoke 实际上是如何在 .NET 中实现的CLR。在本文中花一些时间，之后我认为您现在不需要提前阅读。** **Jeffrey Richter 在他的 CLR Via C# 一书中也很好地解释了这一点。**

**大多数 UI 应用程序都是单线程的。UI 上的控件只能使用创建它们的线程来访问。**

**为了实现这个 Control.Invoke 存在于 Winforms 中。它将自动在 UI 线程上调用您的代码。在 WPF 世界中，我们没有 Control.Invoke。在 WPF 中，我们使用 Dispatcher 而不是 Control。**

**现在委托与委托。** Hans Passant 提供了一个非常好的答案。

因此，为了深入了解它，我正在写这个答案。

MSDN 上提到的委托是一个类。让我们来看看这段代码（取自 msdn [http://msdn.microsoft.com/en-us/library/ms173171(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173171(v=vs.80).aspx)）

```
public delegate int PerformCalculation(int x, int y); 
```

正如您在此处看到的，我们有委托（注意带有小“d”）。这是定义委托的关键字，或者简单地说，这是定义变量 PerformCalculation 的关键字，该变量实际上包含对方法的引用。

我认为您已经意识到这一点，但只是为了完整性。

现在使用此变量并使用如下代码调用方法：

```
using System;
// Declare delegate -- defines required signature:
delegate void SampleDelegate(string message);

class TestDelegate
{
    private void CallMeUsingDelegate(string m_param)
    {
        Console.WriteLine("Called me using parameter - " + m_param);
    }

    public static void Main(string[] args)
    {
        // Here is the Code that uses the delegate defined above.
        SampleDelegate sd = new SampleDelegate(CallMeUsingDelegate);
        sd.Invoke("FromMain");
    }
} 
```

现在要调用一个方法，您需要编写一个完整的方法作为上面的 CallMeUsingDelegate 方法。C# 具有这种**匿名方法**，可用于调用方法而无需将其实际编写为方法。

所以上面的代码也可以写成

使用系统；// 声明委托——定义所需的签名：delegate void SampleDelegate(string message);

```
class TestDelegate
{
    public static void Main(string[] args)
    {
        // Here is the Code that uses the delegate defined above.
        SampleDelegate sd = delegate(param) {
                        Console.WriteLine("Called me using parameter - " + param);
                    };

        sd.Invoke("FromMain");
    }
} 
```

这与上面的代码做同样的工作。但是现在我们需要少写一些代码。编译器将为上述两个版本创建相同的 IL 代码。但在第 2 种情况下，新方法将具有编译器自动生成的名称。

对于 BeginInvoke 和 EndInvoke，它们用于异步调用方法。这是使用 CLR 提供的线程池完成的。

基本上会发生什么是你调用一个方法使用

```
IAsyncResult ar = sd.BeginInvoke(CallMeUsingDelegate, callMeOnCompletion, sd); 
```

这里 Delegate 是您正在调用的方法。将会发生的情况是，您的程序的 Thread 将调用 BeginInvoke 方法，该方法将在内部调用 CLR ThreadPool 线程上的 Delegate 参数中指定的方法。然后你的程序继续运行并返回一个实现 IAsyncResult 接口的对象。您可以使用此对象查询使用您的委托调用的任务的进度（注意作为 3 参数传递的委托 sd）。

CallMeUsingDelegate 方法在单独的线程（ThreadPool 的）上调用。当任务完成时，ThreadPool 将调用指定为 2 参数的 Callback 方法。

**看着这一切你可能会想，为什么我们需要 EndInvoke 呢？？？**

这是因为如果你不调用 EndInvoke，CLR ThreadPool 将持有对这个操作的引用，你会泄漏一些内存。因此，在指定的回调方法中调用 EndInvoke 始终是一个好习惯。

**我希望这现在可以清除（不是全部），而是一些想法。**

# android - 从不同的类文件调用 setListAdapter

> ID：14961455
> 
> 赞同：0
> 
> 时间：2013-02-19T15:45:02.540
> 
> 标签：android, android-asynctask, listadapter

我有一个这样的类文件：

```
public class Search_Results extends SherlockListActivity{

     String result = "";
     SearchView searchView;
     Context context = this;
     private Intent intent = null;
     private String searchThis = "";

      @Override
      protected void onCreate(Bundle savedInstanceState){
             super.onCreate(savedInstanceState);
             setTheme(R.style.Sherlock___Theme_DarkActionBar);
             setContentView(R.layout.search_results);
             ListView myList=(ListView)findViewById(android.R.id.list);
             ProgressBar progress = (ProgressBar)findViewById(R.id.progress_spin);
             intent = getIntent();
             searchThis = intent.getStringExtra(Home.SEARCH_SERVICE);
             new Retrieve(context, progress, searchThis, myList).execute("");
      }//onCreate
} 
```

这会调用`Retrieve()`另一个 java 文件上的 new 并扩展`AsyncTask`

```
public class Retrieve extends AsyncTask <String, Integer, ArrayList<String>>{

     private Context context;
     private String title = "";
     private ArrayList<String> list = null;
     private ArrayList<NameValuePair> nameValuePairs = null;
     private String result = "";
     private ProgressBar progress;
     private String searchThis;
     private ListView mylist;

     //constructor
     public Retrieve(Context context, ProgressBar progress, String searchThis, ListView myList) {
         this.context = context;
         this.progress = progress;
         this.searchThis = searchThis;
         this.mylist = myList;
     }
protected ArrayList<String> doInBackground(String... params){
            progress.setVisibility(View.VISIBLE);
            InputStream is = null;
            list = new ArrayList<String>();
            nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("searchThis", searchThis));
            try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(URL);
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            }
            catch(Exception e){
                Log.e("CONNECTION_ERROR", "Error in http connection "+e.toString());
            }
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null){
                    sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
            }
            catch(Exception e){
                Log.e("BUFFER_ERROR", "Error converting result "+e.toString());
            }
            if(result.equalsIgnoreCase("null\n")){
                list.add("empty");
            }
            else{
                try{
                    JSONArray jArray = new JSONArray(result);
                    for(int i=0;i<jArray.length();i++){
                        JSONObject json_data = jArray.getJSONObject(i);
                        title = json_data.getString("title");
                        list.add(title);
                    }
                }
                catch(JSONException e){
                    Log.e("DATA_PARSING_ERROR", "Error parsing data "+e.toString());
                }
            }
            return list;
        }

     @Override
     protected void onPostExecute(ArrayList<String> list){
         progress.setVisibility(View.GONE);
         ArrayAdapter<String> mArrayAdapter = new ArrayAdapter<String>(context, R.layout.list_display, list);
         //PROBLEM
         mylist.setAdapter(mArrayAdapter);
     }

 }//Retrieve 
```

我首先尝试了`setListAdapter(mArrayAdapter)`，但显然 java 不知道要更新的列表，然后我尝试将列表传递给构造函数

```
ListView myList=(ListView)findViewById(android.R.id.list); 
```

我得到这个错误：

```
android.view.ViewRootImpl$CalledFromWrongThreadException: 
Only the original thread that created a view hierarchy can touch its views. 
```

也许是因为我试图改变另一个班级的观点？我该如何解决这个问题？函数应该`onPostExecute`返回`mArrayAdapter`? 如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:53:52.343

你得到`Only the original thread that created a view hierarchy can touch its views.`是因为你试图从 doInBackground 访问 UI 元素。所以只需将它从 doInBackground 移到外面，然后将它移到 onPreExecute 里面：

```
 @Override
    protected void onPreExecute() {
        super.onPreExecute();
         progress.setVisibility(View.VISIBLE); //<< set here
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:07:00.537

您可能希望创建适配器并将其设置在 Search_Results 活动中。列表的适配器应该是列表所在的 Activity 的组件。您要避免将 UI 与这样的 AsyncTask 紧密耦合，即您的`Retrieve`类只需要工作并返回，不知道发生了什么的详细信息它得到的数据。

我会在 Search_Results 中创建一个公共方法（例如`updateAdapter`），您可以从该`onPostExecute`方法中调用它。您可以从类的`context`成员变量中调用它`Retrieve`：

```
public void updateAdapter(ArrayList<String> list) {
    ArrayAdapter<String> mArrayAdapter = new ArrayAdapter<String>(Search_Results.this, R.layout.list_display, list);
    setListAdapter(mArrayAdapter);
} 
```

并在`onPostExecute`：

```
@Override
protected void onPostExecute(ArrayList<String> list){
    progress.setVisibility(View.GONE);
    context.updateAdapter(list);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:07:25.297

您可以将`ListActivity`对象传递`ListView`给您的`Retrieve`构造函数。

# mysql - mysql 正则表达式有一个数字但不是以负数开头

> ID：14961456
> 
> 赞同：0
> 
> 时间：2013-02-19T15:45:05.117
> 
> 标签：mysql, regex

我有像`-4,3,2,1`和`3,2,1`或`3`或这样的值的行`2`

我需要选择任何具有值`2`的行，包括具有值的行，`3,2,1`但不是具有值的行 - 在开始时。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:49:28.017

为什么是正则表达式？

```
SELECT ..
WHERE LEFT(yourfield, 1) <> '-'
  AND (
    (yourfield = 2) OR
    (yourfield LIKE '2,%') OR
    (yourfield LIKE '%,2,%') OR
    (yourfield LIKE '%,2')
 ) 
```

然后当您试图弄清楚为什么 WHERE 如此复杂时，您应该阅读有关[数据库规范化的信息](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:52:25.330

我倾向于这样做`like`：

```
select *
from t
where concat(',', col, ',') like '%,2,%' and
      col not like '-%' 
```

如果您正在寻找“2”，但没有用逗号分隔，那么：

```
select *
from t
where instr(col, '2') > 0 and col not like '-%' 
```

要获取不以减号开头且包含“2”的列：

```
where col regexp '^[^-]*2*' 
```

如果逗号很重要，则以下内容应该有效：

```
where concat(',', col, ',') regexp ',^[^-]*,2,*' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:05:57.997

我能找到的最好和最简单的解决方案：

```
where sponsored regexp '^[^-]*[1-2]' 
```

# javascript - 将 .txt 文件中的文本放入 使用 JavaScript 的标签

> ID：14961457
> 
> 赞同：0
> 
> 时间：2013-02-19T15:45:07.433
> 
> 标签：javascript, html, xcode, cordova

我有一个正在使用`PhoneGap`. 我现在想将它读入指定的标签，但是当我尝试一种我知道从它读取文件时可以工作的技术时，它不起作用。这是代码；`HTML``JavaScript``console.log``<p>``LocalFileSystem`

```
 function downloadfile() {
        var fileTransfer = new FileTransfer();
        var uri = encodeURI("http://dl.dropbox.com/u/97184921/readme.txt");

        fileTransfer.download(
                uri,
                '/Users/administrator/Library/Application Support/iPhone Simulator/6.1/Applications/AF96D141-0CE5-4D60-9FA8-8A8F9A999C81/Documents/readme.txt',
                function(entry) {
                    console.log("download complete: " + entry.fullPath);
                },
                function(error) {
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code" + error.code);
                }
        );
    }

    function readDownloadedFile() {
        myFileSystem.root.getFile("readme.txt", {create: false, exclusive: false}, gotDownloadFileEntry, fail);
            var myDownload = document.getElementById("mytext");
            myDownload.innerText = text;
    }

    function gotDownloadFileEntry(fileEntry) {
        console.log(fileEntry);
        fileEntry.file(gotFile, fail);
    } 
```

该函数`readDownloadFile()`应该将 .txt 文件中的文本读`readme.txt`入`<p>`带有 id 的标签中`mytext`。但是，当我尝试运行它时，什么也没有发生。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:52:40.867

我会推荐你​​，使用一个简单的 ajax 调用

[http://dl.dropbox.com/u/97184921/readme.txt](http://dl.dropbox.com/u/97184921/readme.txt)

并将其传递到您的 p 标签中。

像

```
$('#mytext').load('http://dl.dropbox.com/u/97184921/readme.txt', function(){
   alert("i am done")
}); 
```

检查[http://api.jquery.com/load/](http://api.jquery.com/load/)

这需要通过点击事件或其他东西来调用。（在你的例子中它没有被调用）

# javascript - 我们真的需要一个函数对象来在 javascript 中应用原型方法吗？如果是，为什么？

> ID：14961458
> 
> 赞同：0
> 
> 时间：2013-02-19T15:45:14.620
> 
> 标签：javascript, dynamic, prototype

正如我在[“JavaScript .prototype 如何工作？”这个问题中看到的那样。](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)使用该`prototype`属性的正确方法是使用功能对象。但我无法理解为什么我们需要使用功能对象`prototype`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:02:06.113

如您提到的问题中所述

```
var obj = new Object(); // not a functional object
obj.prototype.test = function() { alert('Hello?'); }; // this is wrong! 
```

那是因为`Object`它是所有人的基类。

```
function MyClass() {

}
var obj = new MyClass();

// it returns true even though its an instance of MyClass
console.log(obj instanceof Object); 
```

如果将原型函数添加到`Object`类中，则需要确保其不可枚举。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:07:36.027

当你在 JavaScript 中创建一个函数时，解释器会自动为它创建一个原型对象。这是因为函数可以用作构造函数。

**只有函数而不是其他对象可以用作构造函数。**

这就是只有函数才有`prototype`属性的原因。函数的`prototype`性质非常特殊。`__proto__`该函数的实例将在其链中具有该函数的原型。

阅读此答案以获取更多详细信息：[https ://stackoverflow.com/a/8096017/783743](https://stackoverflow.com/a/8096017/783743)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T16:18:44.580

> 为什么我们需要原型的功能对象？

在早期的 JS 版本中，这是一个奇怪的（？）语言设计决定。然而，这在 EcmaScript 5 中得到了修复：[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)允许我们在没有构造函数的情况下进行原型继承。因此，如果您[不需要初始化函数](https://stackoverflow.com/q/11253717/1048572)（例如作为闭包），您可以愉快地[使用 "Object.create" 而不是 "new"](https://stackoverflow.com/q/2709612/1048572)。

# android - Android - 应用程序在第二次启动时崩溃（FragmentManager 问题）

> ID：14961461
> 
> 赞同：0
> 
> 时间：2013-02-19T15:45:21.827
> 
> 标签：android, android-fragments

我第一次启动我的应用程序，一切正常。我使用完成我的活动`finish().`

在此之后，我再次启动我的应用程序，它与此日志崩溃：

```
02-19 15:33:16.652: E/AndroidRuntime(1859): FATAL EXCEPTION: main
02-19 15:33:16.652: E/AndroidRuntime(1859): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fileexplorermanager/com.landa.fileexplorermanager.MainActivity}: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.os.Looper.loop(Looper.java:137)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at java.lang.reflect.Method.invokeNative(Native Method)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at java.lang.reflect.Method.invoke(Method.java:511)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at dalvik.system.NativeStart.main(Native Method)
02-19 15:33:16.652: E/AndroidRuntime(1859): Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1327)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1338)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at com.landa.features.BrowseHandler.populateContent(BrowseHandler.java:137)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at com.landa.features.BrowseHandler.openFile(BrowseHandler.java:98)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at com.landa.fileexplorermanager.MainActivity.onCreate(MainActivity.java:33)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.Activity.performCreate(Activity.java:5104)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-19 15:33:16.652: E/AndroidRuntime(1859):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-19 15:33:16.652: E/AndroidRuntime(1859):     ... 11 more 
```

看来问题是调用 FragmentManager 提交的 populateContent() 函数 - 这是它失败的行：

```
public void populateContent(File f)
{
    FragmentTransaction transaction = ac.getSupportFragmentManager().beginTransaction();
    ContentFragment cf = new ContentFragment(ctx, ac, this, f);

    transaction.replace(R.id.contentFragment, cf);
    transaction.addToBackStack(null);

    updateShownPath(f.getPath());
    transaction.commit();
} 
```

现在，我不知道为什么应用程序第一次运行良好，然后完成（），然后在第二次启动时崩溃。

有什么提示吗？

注意：在完成应用程序之前，我在 FragmentManager 中确实有一个片段（总是） - 那是主片段。

这是 onCreate()：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    initialiseApplication();

    browseHandler.openFile(new File(BrowseHandler.current_path));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:31:45.917

似乎您`commit`在已经被破坏的上下文中调用此错误的原因，即完成的活动。

确保您的`ctx`变量引用一个活动的`Activity`. 或者，您可能希望将其保留`Activity`在后台而不是手动完成它。

# actionscript-3 - 如果 ( [array] 中的 [instance] ) 在 ActionScript3.0 中可行吗？

> ID：14961465
> 
> 赞同：1
> 
> 时间：2013-02-19T15:45:32.310
> 
> 标签：actionscript-3, flash, if-statement

是否可以查看实例是否在这样的数组变量中？

```
var list=[];
var instance= new SomeClass();
list.push(instance);
if( instance in list){ trace("nice"); ] 
```

或者您是否必须运行“for 循环”来查看实例是否在数组中？像

```
for(var i=0; i<list.length; i++){
  if(list[i]==instance){ trace("ok"); }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:47:16.873

您可以使用

```
list.indexOf(instance) ; 
```

它必须返回数组中元素的索引。如果返回`-1`，则表示未找到该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:50:48.413

如果要检查数组是否包含特定项，请使用以下[`indexOf`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#indexOf%28%29)方法：

```
if (list.indexOf(instance) > -1) {
    //do stuff
} 
```

或者，一个常见的简写`Array.contains`是：

```
if (~list.indexOf(instance)) {
    //do stuff
} 
```

`~`操作员会将值`-1`变为( falsey `0`) 并将所有其他值变为真值。

# c++ - 双倍的溢出到负值吗？

> ID：14961466
> 
> 赞同：3
> 
> 时间：2013-02-19T15:45:32.977
> 
> 标签：c++, double, ieee-754, underflow, boost-ublas

嗨，我正在使用 g++ 编译器并且正在经历（我认为）是双打下溢，这可能吗？如果是的话，行为是如何定义的

我在这里上传了协方差矩阵 (51x51) 的 csv 格式：http: [//pastebin.com/r0fx1qsx](http://pastebin.com/r0fx1qsx)

这是我用来计算行列式的代码（在 c++ 中需要提升）（我已经切换到长双精度并且没有效果）：

```
int determinant_sign(const boost::numeric::ublas::permutation_matrix<std ::size_t>& pm)
{
    int pm_sign=1;
    std::size_t size = pm.size();
    for (std::size_t i = 0; i < size; ++i)
        if (i != pm(i))
            pm_sign *= -1.0; // swap_rows would swap a pair of rows here, so we change sign
    return pm_sign;
}

long double determinant( boost::numeric::ublas::matrix<long double>& m ) {
    boost::numeric::ublas::permutation_matrix<std ::size_t> pm(m.size1());
    long double det = 1.0;

    if( boost::numeric::ublas::lu_factorize(m,pm) ) {
        det = 0.0;
    } else {
        for(int i = 0; i < (int)m.size1(); i++)
            det *= m(i,i); // multiply by elements on diagonal
        det = det * determinant_sign( pm );
    }
    return det;
} 
```

我为数据给出的结果是`-3.59916e-183`。

当我运行以下`matlab`代码时：

```
M = csvread('path/to/csv');
det(M)
the result I get is:

4.2014e-173 
```

如您所见，一个是（略微）积极的，而一个是（略微）消极的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:51:42.437

假设浮点单元正确运行，它不会溢出到负值 - 如果值超出有效范围，结果将是“+INF”（正无穷大）。这只会发生在有符号整数上。

当然，完全有可能在计算中出现各种错误，在预期得到肯定答案时给出否定答案。

# twitter-bootstrap - 如何使用“li”标签和 Twitter Bootstrap 创建表结构

> ID：14961472
> 
> 赞同：0
> 
> 时间：2013-02-19T15:45:42.260
> 
> 标签：twitter-bootstrap

我正在使用 twitter bootstrap 创建一个表结构

```
 <div class="hero-unit span8 pull-right">
       <h5><span class="label label-info">General Account Settings</span></h5>
          <ul class="nav nav-list">
             <c:forEach items="${personUI}" var="entry">
                  <li id="${entry.key}">
                    <div class="span2 pull-left">
                       <span class="label">${entry.key}</span>
                    </div> 
                    <div class="span2">
                       <font size="2"><span><strong>${entry.value}</strong></span></font>
                    </div>
                    <div class="span2 pull-right">
                       <font size="2">
                          <span>
                             <a href="#" class="${entry.key}">
                             <span class="add-on">
                               <i class="icon-pencil"></i>
                             </span>Edit

                               </a>
                          </span>
                      </font>
                    </div>
                  </li>
                <li class="divider"></li>
             </c:forEach>
          </ul>
   </div> 
```

但我试图在每个 li 之后放置一条水平线。根据 twitter bootstrap，它说创建一个带有类分隔符的 li 以拥有这条线。我这样做，但比桌子的整个结构![在此处输入图像描述](../Images/767f0d9a3cfb48d0e4c0fa00dccde391.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:13:38.290

要显示表单控件，您不应使用列表或表格。

简单地说，您应该使用 <form> <fieldset> 和表单控件。为了正确对齐和显示控件，Bootstrap 提供了 css 类：“control-group”、“control-label”、“controls”、“input-prepend”

对于水平线，您应该使用 < hr >

```
 <form class="form-horizontal">
    <fielset>
        <div class="well">
            <legend>General Account Settings</legend>
            <div class="control-group">
                <label class="control-label" for="name">Name</label>
                <div class="controls">
                    <div class="input-prepend">
                        <input id="name" type="text" /> <a href=""> 
                        <span class="add-on"><i class="icon-edit"></i> Edit</span>
                    </a>

                    </div>
                </div>
            </div>
            <hr class="divider"></hr>
            <div class="control-group">
                <label class="control-label" for="email">Email</label>
                <div class="controls">
                    <div class="input-prepend">
                        <input id="email" type="text" /> <a href=""> 
                        <span class="add-on"><i class="icon-edit"></i> Edit</span>
                    </a>

                    </div>
                </div>
            </div>
            <hr class="divider"></hr>
        </div> 
```

![在此处输入图像描述](../Images/e863767140d07dfe02bb8f7103918ec7.png)

查看实时示例：

[http://jsfiddle.net/udNYq/](http://jsfiddle.net/udNYq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:51:42.150

如果要显示网格，应该使用Boostrap表格样式和<table><thead><tbody><th><tr>和<td>
代替<div><lu>和<li>

[http://twitter.github.com/bootstrap/base-css.html#tables](http://twitter.github.com/bootstrap/base-css.html#tables)

```
<table>
  <caption>...</caption>
  <thead>
    <tr>
      <th>...</th>
      <th>...</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
</table> 
```

# cordova - phonegap 脸书插件

> ID：14961475
> 
> 赞同：2
> 
> 时间：2013-02-19T15:45:47.687
> 
> 标签：cordova, facebook-javascript-sdk, phonegap-plugins

我正在使用 phonegap 2.4 和最新的 facebook 插件做一个项目

[https://github.com/phonegap/phonegap-facebook-plugin](https://github.com/phonegap/phonegap-facebook-plugin)

我的问题是发布到用户墙提要，我能够对用户进行身份验证，获取所有适当的事件等等，但是当我尝试发布到提要时（我正在请​​求阅读首先，然后在 ios6 中写入权限序列，并拥有用户的发布权限，并且我已经在设置中设置了我的 facebook 帐户，啊，而且我正在使用 facebook sdk 3.1）控制台只是低谷和错误

***** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[__NSCFDictionary removeObjectForKey:]: mutating method sent to immutable object”**

正在尝试从不可变字典中删除和对象，但为什么呢？在哪里？如何解决这个问题？

这就是我的 js 方法正在尝试做的事情

```
var params = {
             method: 'feed',
             name: 'Facebook Dialogs',
             link: 'https://developers.facebook.com/docs/reference/dialogs/',
             picture: 'http://fbrell.com/f8.jpg',
             caption: 'Reference Documentation',
             description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
   };

  FB.ui(params, function(obj) { console.log(obj); }); 
```

错误是何时调用**FB.ui()**

![这是线程堆栈的屏幕截图，很有帮助！](../Images/dd7d840235a1ea50a1d4a55d232112b2.png)

我真的不知道该怎么做，或者我可以从哪里开始寻找，谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:58:49.430

这是由 Cordova 2.4.0 版本之后的 FacebookConnect 插件中的一个错误引起的（它使用 NSJSONSerialization，因此返回的对象现在是不可变的）。

在 Github 上提出了一个拉取请求，其中包含修复： [https ://github.com/phonegap/phonegap-facebook-plugin/pull/251](https://github.com/phonegap/phonegap-facebook-plugin/pull/251)

同时，您可以手动对 FacebookConnectPlugin.m 进行以下更改：

替换第 284 行：

```
NSMutableDictionary *options = [[command.arguments lastObject] mutableCopy]; 
```

在第 310 行之后添加以下内容：

```
[options release]; 
```

# magento - config.xml 全局部分中助手的 Magento 别名

> ID：14961478
> 
> 赞同：0
> 
> 时间：2013-02-19T15:46:04.197
> 
> 标签：magento, config, helper

我正在制作一个应该在后端有一个部分的模块。因为我很新，所以我查看了另一个模块 config.xml 并以同样的方式制作了我的模块。在该部分中，帮助类使用大写的模块名称别名声明，模型和块别名是小写的模块名称。我在我的模块中做了同样的事情。这就是它现在的样子：

```
<global>
    <models>
        <module><class>Namespace_Module_Model</class></module>   
    </models>
    <helpers>
        <Module><class>Namespace_Module_Helper</class></Module>
    </helpers>
    <blocks>
        <module><class>Namespace_Module_Block</class></module>
    </blocks>
</global> 
```

在 system.xml 中，我用属性声明了选项卡和部分`module="Module"`。使用这些设置一切正常，但现在我应该用大写“M”来称呼我的助手。所以，我决定解决这个问题并将大写字母改为小写。在此更改系统/配置后抛出`Fatal error: Class Mage_Module_Helper_Data not found in some/path/here`. 更改/删除 system.xml 中的属性模块、清理缓存、重新记录都无济于事。我想，这个大写的别名存储在某个地方，但我没有运气在 xml 或数据库中找到它。顺便说一句，可以用作此别名吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:04:08.970

好吧，在玩了一些模块文件之后，我想通了。我的问题出在我在自定义设置中使用的源模型中。他们实际上是通过`Mage::helper('Module')`. 我改成现在它可以工作了`Module`。`module`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-28T15:49:30.530

您必须在 system.xml 中更改属性：“模块”为“模块”

```
<menu1 translate="title" module="Module"> 
```

到

```
<menu1 translate="title" module="module"> 
```

不要使用大写“M”，更改后也必须更改 config.xml

```
<helpers><Module> 
```

到

```
<helpers><module> 
```

按照惯例，我们将模块的名称写成小写

# git - 两个 git 存储库相互作为远程

> ID：14961481
> 
> 赞同：3
> 
> 时间：2013-02-19T15:46:11.687
> 
> 标签：git, git-remote

我正在探索管理团队数据的选项。目前它们存在于两个不同的位置，不受版本控制。我正在寻求经验丰富的 git 用户的智慧，因为我对 git 还很陌生。

我想将每个位置设置为 git 存储库，并将另一个位置作为远程指向。这可能吗？如果数据在一个地方而不是另一个地方发生变化，那么在尝试协调差异时是否会引起问题？我想简单地创建两个 git 存储库并将彼此设置为远程，但我怀疑（我希望我错了）他们将无法知道数据是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:02:25.163

你当然可以这样做。毕竟，这就是分布式 VCS 的全部意义所在。但是，有一些问题您必须注意。例如[，推送到非裸存储库不是一个好主意](https://stackoverflow.com/a/11117928/912144)。相反，您可以让每个团队发送一个请求（例如通过电子邮件），让其他团队从他们的存储库中提取。

但是，*通常*所做的是拥有一个或多个中央裸存储库以更轻松地管理同步。例如，一个中央开发存储库将允许每个人从它推送和拉取，而无需考虑从不同的存储库中提取单个提交。例如，另一个存储库（或第一个存储库的分支）可以包含发布分支。

这种策略有点反对分布式 VCS 的想法，但另一方面简化了这些复杂工具的使用，而不会妨碍它们强大的功能。

简而言之，您所要求的非常有可能。它是否适合您的开发模型是您必须决定的（并且可能进行一些试验和错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:53:28.480

我不会以这种方式设置存储库，归根结底，一个存储库应该仍然是您的主人。如果可能，我会将存储库合并在一起并摆脱另一个，或者将另一个用作您稍后将合并回来的分叉。

# mysql - Coldfusion存储过程错误

> ID：14961485
> 
> 赞同：0
> 
> 时间：2013-02-19T15:46:33.040
> 
> 标签：mysql, coldfusion, coldfusion-7

CF：版本 7.02

平台：视窗

DB：MySQL 5.1.45-社区

在 CF 中执行简单的存储过程时出现错误。

```
<CFSTOREDPROC DATASOURCE="datasource" PROCEDURE="deletePosition"> 
     <CFPROCPARAM CFSQLTYPE="cf_sql_integer" DBVARNAME="varID" VALUE="#varID#"> 
</CFSTOREDPROC> 
```

存储过程：

```
 DROP PROCEDURE deletePosition 
   CREATE DEFINER= PROCEDURE deletePosition(in varID int) 
   BEGIN 
        UPDATE positions SET pos_active = 0 WHERE pos_id = varID; 
        UPDATE tour SET tour_active = 0 WHERE pos_id = varID; 
   END 
```

`VarID`正在传入，这是它产生的错误：

```
Error Executing Database Query.

Parameter index of 2 is out of range (1, 1)
SQL   {call deletePosition( (param 1) , (param 2) )}
SQLSTATE      S1009 
```

据我的网络人员说，驱动器已接近最新状态。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:56:50.673

查看您的 SQL，您似乎只有一个 varID？您的 SP 接受 1 个参数还是 2 个参数？如果只有一个，那么这应该有效：

```
call deletePosition (1) 
```

我有一段时间没有使用 Cold Fusion，但这是我记得调用 SP 的一种方式：

```
<CFQUERY dataSource="datasource">
deletePosition #varID#
</CFQUERY> 
```

那样有用吗？

# mysql - MySQL 错误代码：1411。不正确的日期时间值：函数 str_to_date 的“”

> ID：14961490
> 
> 赞同：3
> 
> 时间：2013-02-19T15:46:44.223
> 
> 标签：mysql

我被要求对目前仅部署到 Linux 生产服务器的现有应用程序进行更改。我已经继续，并且该应用程序大部分时间都在我的本地 Windows PC 上运行。我`MySQL`在本地 PC 上安装了来自 Production 的数据库的完整副本。生产数据库`MySQL v5.0.95`在 Linux 上，我的本地数据库`MySQL v5.5`在 Windows 上。两者都处于 InnoDB 模式。

我的问题在于如下声明。为方便其他想要帮助的人使用而通用。

```
update atable 
set adate=DATE_ADD(str_to_date('','%m/%d/%Y'), INTERVAL 0 DAY)
where anum='1' 
```

在某些情况下，传递一个空字符串，在生产中不会导致任何问题，并允许保存/更新记录，但在本地它会抛出一个`SQLException`. `SQL`因此，我直接针对我的本地数据库尝试了该语句，并且在这两种情况下都收到以下错误消息。

> 错误代码：1411。日期时间值不正确：函数 str_to_date 的“”

我已经查看了生产`my.cnf`和本地`my.ini`寻找任何主要差异，并且我还尝试在`ALLOW_INVALID_DATES`本地使用 sql-mode " " 但它并没有改变最终结果。

我知道我可以更改代码以不传入这些空字符串，但是有很多这样的语句，此时我不希望尽可能更改所有这些语句。该客户的预算和时间框架有限，我想专注于他们的新要求。如果可能的话，我正在寻找有关如何让我的本地环境像在生产中一样工作的输入。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T16:20:06.580

`SQLException`不是直接来自 MySQL，它可能是由您的客户端语言触发的。MySQL 只会生成一个您通常可以忽略的警告。不管怎样，`ALLOW_INVALID_DATES`SQL 模式实际上*应该可以解决问题：*

警告：

```
mysql> SET @@SESSION.sql_mode='NO_ZERO_DATE,NO_ZERO_IN_DATE';
Query OK, 0 rows affected (0.00 sec)

mysql> insert into test (date_created) VALUES (str_to_date('','%m/%d/%Y'));
Query OK, 1 row affected, 1 warning (0.01 sec)

mysql> show warnings;
+---------+------+-------------------------------------------------------+
| Level   | Code | Message                                               |
+---------+------+-------------------------------------------------------+
| Warning | 1411 | Incorrect datetime value: '' for function str_to_date |
+---------+------+-------------------------------------------------------+
1 row in set (0.00 sec) 
```

无警告：

```
mysql> SET @@SESSION.sql_mode='ALLOW_INVALID_DATES';
Query OK, 0 rows affected (0.00 sec)

mysql> insert into test (date_created) VALUES (str_to_date('','%m/%d/%Y'));
Query OK, 1 row affected (0.03 sec) 
```

**编辑：**如果您正在寻找一种重写查询的方法，您可以尝试这样的事情：

```
update atable 
set adate=NULL
where anum='1' 
```

当然，这要求它`adate`可以为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-06T18:12:27.253

尝试加载具有一些空白日期值的数据时，我遇到了相同的 1411 错误：

```
CLM_FROM_DT is a DATE

LOAD DATA INFILE 'Sample_1.csv'
INTO TABLE INPATIENT
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'
IGNORE 1 LINES
(DESYNPUF_ID,
@CLM_FROM_DT)
SET CLM_FROM_DT = STR_TO_DATE(@CLM_FROM_DT, '%Y%m%d') 
```

不久前，我尝试过`ALLOW_INVALID_DATES`使用 MySQL v.5 左右，但我认为它不起作用。现在我在 MySQL 8.0 上，当我`ALLOW_INVALID_DATES`在 mysql 终端会话中设置时，它可以工作。所以，它似乎`ALLOW_INVALID_DATES`很敏感。我正在运行 Mac OS 10.11.6

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-26T17:40:24.947

我在使用 MySQL 服务器版本 8.0.28-0ubuntu0.20.04.3 (Ubuntu) 时遇到了同样的问题，代码如下：

`insert into documents (data) values (IF((@d := STR_TO_DATE("", "%Y-%m-%d")) IS NULL, null, @d));`

但是使用 SELECT 并没有出现问题：

`select IF((@d := STR_TO_DATE("", "%Y-%m-%d")) IS NULL, null, @d);`

解决方案是从 MySQL 更改为 MariaDb 10.3.31。不再出现错误代码 1411。

我猜 MySQL 8.0.28 存在一些错误，因为我在两个版本中使用了完全相同的脚本。

# intellij-idea - 您正在运行后台任务。您确定要取消它们并退出 IntelliJ IDEA 吗？

> ID：14961491
> 
> 赞同：1
> 
> 时间：2013-02-19T15:46:47.077
> 
> 标签：intellij-idea

关闭 IntelliJ 10 时，如果我有任务在后台运行，则会提示我以下问题：

![在此处输入图像描述](../Images/a467c520c9fd9198eebc016d03a75373.png)

因此，如果我单击“退出”是否意味着 IntelliJ 将退出而不取消后台任务，如果我单击“取消”IntelliJ 将取消任务然后退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:52:03.680

退出取消后台任务并退出intellij。

取消退出，它取消了退出，一切都在继续。

（不完全是最好的问题，投票结束顺便说一句）

# django - Django Userena 扩展

> ID：14961494
> 
> 赞同：2
> 
> 时间：2013-02-19T15:47:00.090
> 
> 标签：django, django-models, django-users

当用户注册我的网站时，我正在尝试实施“计划”（免费、专业、企业等）的概念。

我开始`Python`& `Django`。我已经`django-userena`安装并工作了。现在，我正在尝试扩展行为以允许用户在注册网站时选择“计划”。

我相信该计划将存储在 的子类中`UserenaBaseProfile`，但不确定......也许计划选择不应该是配置文件的一部分。

在使用（或不使用！）的`Django`应用程序中实现“计划”概念的最佳方法是什么。`Userena``Userena`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:51:42.363

您可以创建一个`Plan`包含所有计划详细信息的模型。之后创建一个`UserPlan`具有以下字段的模型。

```
user = models.OneToOneField(UserenaBaseProfile)
plan = models.ForeignKey(Plan)
// other fields like validity and audit related fields 
```

更容易将用户的计划细节与核心模型分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T15:58:37.463

我会将计划级别设置为权限。

如果需要将它们分配给特定对象，您可以使用 django-guardian 将它们添加到该对象的类中：

```
class Whatever(ExtendedGuardedModel, BaseModel):

    name = models.CharField(max_length=200)

    class Meta(BaseModel.Meta):
        permissions = (
            ("free", "Free level of access"),
            ("pro", "Pro level of access"),
            ("enterprise", "Enterprise level of access"),
        ) 
```

那么当你需要查看一个账户的套餐级别时，你只需使用典型的查看权限的方式，除了寻找“免费”、“专业”等。

# python - 如何让 BeautifulSoup 4 尊重自闭标签？

> ID：14961497
> 
> 赞同：12
> 
> 时间：2013-02-19T15:47:04.643
> 
> 标签：python, xml, xml-parsing, beautifulsoup

这个问题是[BeautifulSoup4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)特有的，这使得它与前面的问题不同：

[为什么 BeautifulSoup 会修改我的自闭合元素？](https://stackoverflow.com/questions/1567402/why-is-beautifulsoup-modifying-my-self-closing-elements)

[BeautifulSoup 中的 selfClosingTags](https://stackoverflow.com/questions/2211589/selfclosingtags-in-beautifulsoup)

既然`BeautifulStoneSoup`不见了（以前的 xml 解析器），我怎样才能`bs4`尊重一个新的自闭标签？例如：

```
import bs4   
S = '''<foo> <bar a="3"/> </foo>'''
soup = bs4.BeautifulSoup(S, selfClosingTags=['bar'])

print soup.prettify() 
```

不会自动关闭`bar`标签，但会给出提示。bs4 所指的这个树生成器是什么以及如何自我关闭标签？

```
/usr/local/lib/python2.7/dist-packages/bs4/__init__.py:112: UserWarning: BS4 does not respect the selfClosingTags argument to the BeautifulSoup constructor. The tree builder is responsible for understanding self-closing tags.
  "BS4 does not respect the selfClosingTags argument to the "
<html>
 <body>
  <foo>
   <bar a="3">
   </bar>
  </foo>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T15:51:11.243

[要解析 XML，您将“xml”作为第二个参数传递给 BeautifulSoup 构造函数。](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#xml)

```
soup = bs4.BeautifulSoup(S, 'xml') 
```

[您需要安装 lxml。](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#parsing-xml)

您不再需要通过`selfClosingTags`：

```
In [1]: import bs4
In [2]: S = '''<foo> <bar a="3"/> </foo>'''
In [3]: soup = bs4.BeautifulSoup(S, 'xml')
In [4]: print soup.prettify()
<?xml version="1.0" encoding="utf-8"?>
<foo>
 <bar a="3"/>
</foo> 
```

# angularjs - 缺少 Angular ui 引导指令模板

> ID：14961498
> 
> 赞同：55
> 
> 时间：2013-02-19T15:47:04.313
> 
> 标签：angularjs, angular-ui

我目前正在`bootstrap-UI`我的机器上本地测试角度。当我尝试重新创建手风琴和对话框的示例时。我在控制台中收到此错误消息，提示缺少模板。

> 错误示例：404 Not Found - localhost/angular/template/message.html

当我查看`ui-bootstrap-0.1.0.js`指令时有一个模板`URL`。

`templateURL`指令的目的是什么？

当我下载整个 angular `bootstrap-UI`zip 文件时，是否应该包含这些模板？

我是否遗漏了应该包含在标题中的其他文件？

```
<link rel="stylesheet" href="includes/css/bootstrap.css">
<script src="includes/js/angular.js"></script>
<script src="includes/js/ui-bootstrap-0.1.0.js"></script> 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-02-19T16:10:59.613

你有两个选择：

1.  如果您不想制作自己的模板并想要内置模板，则应下载该`ui-bootstrap-tpls-0.1.0.js`文件 - 这会注入所有模板，以便将它们预缓存到您的应用程序中：[https ://github.com/angular-ui /bootstrap/blob/gh-pages/ui-bootstrap-tpls-0.1.0.js#L1322](https://github.com/angular-ui/bootstrap/blob/gh-pages/ui-bootstrap-tpls-0.1.0.js#L1322)

2.  如果您确实想制作一些自己的模板，`templates`请在您的应用程序中创建一个文件夹，然后从 angular-ui/bootstrap 项目下载模板。然后覆盖您想要自己自定义的那些。

在此处阅读更多信息：[https ://github.com/angular-ui/bootstrap/tree/gh-pages#build-files](https://github.com/angular-ui/bootstrap/tree/gh-pages#build-files)

**编辑**：

您还可以下载 bootstrap-tpls.js 并仍然用您自己的覆盖指令的一些 templateUrls，使用 AngularJS 装饰器来更改指令的 templateUrl。这是一个更改 datepicker 的 templateUrl 的示例：

[http://docs.angularjs.org/api/AUTO.$provide#methods_decorator](http://docs.angularjs.org/api/AUTO.%24provide#methods_decorator)

```
myApp.config(function($provide) {
  $provide.decorator('datepickerDirective', function($delegate) {
    //we now get an array of all the datepickerDirectives, 
    //and use the first one
    $delegate[0].templateUrl = 'my/template/url.html';
    return $delegate;
  });
}); 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2014-06-13T16:24:00.240

在这个问题上浪费了 2 个小时后，我的 5 美分。你应该：

1.  转到[http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/)。单击创建自定义构建并选择您使用的功能。（没有必要为 1 项拉 60k）。
2.  包括`custom.tpls.js`在我的情况下`ui-bootstrap-custom-0.10.0.min.js`
3.  在我的情况下，在您的 Angular 模块`'ui.bootstrap.yourfeature'`中，它是`'ui.bootstrap.modal'`
4.  **并且还包括** `'ui.bootstrap.tpls'`. 所以我的模块完整依赖如下所示：

    `var profile = angular.module("profile",[ 'ui.bootstrap.modal', 'ui.bootstrap.tpls' ]);`

5.  节省 2 小时，快乐:-)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-25T17:30:23.543

此错误消息似乎也出现在另一种情况下，如下所示：http: [//plnkr.co/edit/aix6PZ ?p=preview](http://plnkr.co/edit/aix6PZ?p=preview)

如果您声明您的模块依赖项仅为“ui.bootstrap.dialog”而不是“ui.bootstrap”，则角度会产生模板未找到错误。

这是“为什么”的官方解释： [https ://github.com/angular-ui/bootstrap/issues/266](https://github.com/angular-ui/bootstrap/issues/266)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-09-13T16:01:39.723

尽管在我的 index.html 中定义了两个必需的脚本，但我遇到了同样的错误。最后，我通过设置首先加载*ui-bootstrap.js*脚本和之后的*ui-bootstrap-tpls.js*来更改加载顺序。这解决了问题。但是，后来我注意到（如上所述）只需要一个库。所以我删除了*ui-bootstrap.js*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-15T19:17:53.763

我的问题是我仍然在 HTML 中包含模板 URL，如下所示：

```
<div uib-accordion-group class="panel-default" heading="Custom template" template-url="group-template.html"> 
```

这导致我的浏览器挂起 - 这很奇怪，但就是这样。

总之，我做了什么：

```
bower install bootstrap --save
bower install angular-bootstrap --save 
```

在我的 index.html 中（注意“-tpls”）：

```
<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script> 
```

然后在我的 Angular 应用程序中：

```
angular
  .module('myApp', ['ui.bootstrap']) 
```

然后只需删除 HTML 中的模板 URL：

```
<div uib-accordion-group class="panel-default" heading="Custom template"> 
```

繁荣，工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-02T00:39:18.647

此问题的可能原因是已接受的答案，但此问题的另一个可能原因是我遇到的问题，我想发布以防其他人遇到与问题相同的次要原因。

症状完全相同，引导模板上的 404 但在我的情况下，我实际上包含了 'ui-bootstrap-tpls.min.js' javascript 文件。问题是我还包含了非模板版本“ui-bootstrap.min.js”。一旦两者都包括在内，我怀疑顺序很重要，一个会取代另一个。就我而言，非模板版本取代了导致 404 问题的模板版本。

一旦我确保只包含“ui-bootstrap-tpls.min.js”，一切都按预期工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-18T09:29:53.697

我不得不说阅读评论并添加我昨晚 10 小时的经验。避免 UI Bootstrap 似乎比它的价值要付出更多的努力。

同样在阅读了他们的回购问题和评论后，该项目的整个实施方式似乎与一个简单易用的工具不一致。虽然我确信它一开始是出于好意，但如果可能的话，也许这是一个要避免的模块。

当然有一个警告，这是一种观点，也许我们会发现其他人是否有同样的感觉。

# ruby-on-rails - RoR：为 JSON 响应渲染多个项目

> ID：14961499
> 
> 赞同：0
> 
> 时间：2013-02-19T15:47:11.530
> 
> 标签：ruby-on-rails, ajax

我知道我不能`render`在一个动作中多次调用，但也许有人可以建议一个替代方法来更新 AJAX 响应中多个 DOM 元素的内容。

我打算这样做：

```
render :json => {:updates => {'#a' => '<p>newContentA</p>', '#b' => '<p>newContentB</p>'}} 
```

...然后让前端的 js 执行替换（从而将 javascript 排除在我的实际视图文件之外）。但是使用上述解决方案，如果我想从视图文件构建任何 DOM 内容，我将不得不再次调用 render：

```
render :json => {:updates => {'#a' => render(a), '#b' => '<p>newContentB</p>'}} 
```

执行此操作的正确方法是什么？

# java - 图形矩形上的鼠标侦听器java

> ID：14961516
> 
> 赞同：2
> 
> 时间：2013-02-19T15:47:48.903
> 
> 标签：java, swing

我想向矩形添加鼠标侦听器，以便当用户单击一个矩形并将鼠标拖动到下一个矩形时，会绘制一条线来跟踪用户的移动，并且用户所在的当前矩形必须更改颜色。我是java新手，因此您的帮助将不胜感激。

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Rectangle;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.BorderFactory;
import javax.swing.JPanel;

public class SundayPanel extends JPanel implements MouseListener{

 private Rectangle rec;
 private JPanel p = new JPanel();
 private Graphics graphic;
 public SundayPanel()
 {
  setSize(1000, 150);
  setBackground(Color.white);
  setBorder(BorderFactory.createEtchedBorder(Color.orange, Color.red));

  rec = new Rectangle(0, 0, 130, 100);
 }

 public void paint(Graphics g)
 {
  Font font = new Font("Times New Roman", Font.PLAIN, 72);

     g.setFont(font);
  g.setColor(Color.black);
  //g.draw(rec);
  g.draw3DRect(0, 0, 130, 100, true);
  g.drawString("1", 50, 65);
  g.draw3DRect(130, 0, 130, 100, true);
  g.drawString("2", 180, 65);
  g.draw3DRect(260, 0, 130, 100, true);
  g.drawString("3", 300, 65);
  g.draw3DRect(390, 0, 130, 100, true);
  g.drawString("4", 430, 65);
  g.draw3DRect(520, 0, 130, 100, true);
  g.drawString("5", 550, 65);
  g.draw3DRect(650, 0, 130, 100, true);
  g.drawString("6", 700, 65);
  g.draw3DRect(780, 0, 130, 100, true);
  g.drawString("7", 820, 65);
  g.draw3DRect(910, 0, 130, 100, true);
  g.drawString("8", 950, 65);
  g.draw3DRect(1040, 0, 130, 100, true);
  g.drawString("9", 1080, 65);
  g.draw3DRect(1170, 0, 130, 100, true);
  g.drawString("10", 1200, 65);
 }
}

import javax.swing.JFrame;

public class SundayMain extends JFrame{

 /**
  * @param args
  */
 public static void main(String[] args) {
  JFrame sunFrame = new SundayFrame("Sunday Today");
  sunFrame.setVisible(true);
  sunFrame.setSize(1330, 150);
  sunFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

 }

}

import java.awt.BorderLayout;

import javax.swing.JFrame;

public class SundayFrame extends JFrame{

 private SundayPanel sunPanel;

 public SundayFrame(String title)
 {
  super(title);
  sunPanel = new SundayPanel();
  add(sunPanel, BorderLayout.CENTER);

 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:01:52.073

我修改了您的示例以绘制线条（按下按钮、移动鼠标​​、释放按钮）。代码是可编译的，可以在一个`SundayPanel.java`文件中执行。可能它会帮助您实现您的确切目标：

注意：小心 - 代码非常难看。

```
public class SundayPanel extends JPanel implements MouseMotionListener, MouseListener {

    public SundayPanel() {
        setSize(1000, 150);
        setBackground(Color.white);
        setBorder(BorderFactory.createEtchedBorder(Color.orange, Color.red));
    }

    String[] values = new String[]{"1", "2", "3", "4", "5", "6", "7", "8", "9", "10"};

    public void paint(Graphics g) {
        Font font = new Font("Times New Roman", Font.PLAIN, 72);
        g.setFont(font);
        for (int i = 0; i < 10; i++) {
            int step = 130 * i;
            if ((start != null) && ((int) (end.getX() / 130) == i)) {
                g.setColor(Color.orange);
            } else {
                g.setColor(Color.gray);
            }
            g.fill3DRect(step, 0, 130, 100, true);
            g.setColor(Color.black);
            g.drawString(values[i], 50 + step, 65);
        }
        if ((start != null) && (end != null)) {
            g.drawLine((int) start.getX(), (int) start.getY(), (int) end.getX(), (int) end.getY());
        }
    }

    Point start;

    Point end;

    @Override
    public void mouseClicked(MouseEvent e) {
    }

    @Override
    public void mousePressed(MouseEvent e) {
        start = e.getPoint();
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        end = e.getPoint();
        e.getComponent().repaint();
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        int from = (int) (start.getX() / 130);
        int to = (int) (end.getX() / 130);
        String tmp = values[from];
        values[from] = values[to];
        values[to] = tmp;
        start = end = null;
        e.getComponent().repaint();
    }

    @Override
    public void mouseEntered(MouseEvent e) {
    }

    @Override
    public void mouseExited(MouseEvent e) {
    }

    @Override
    public void mouseMoved(MouseEvent e) {
    }
}

class SundayMain extends JFrame {

    /**
     * @param args
     */
    public static void main(String[] args) {
        JFrame sunFrame = new SundayFrame("Sunday Today");
        sunFrame.setVisible(true);
        sunFrame.setSize(1330, 150);
        sunFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

}

class SundayFrame extends JFrame {

    private SundayPanel sunPanel;

    public SundayFrame(String title) {
        super(title);
        sunPanel = new SundayPanel();
        sunPanel.addMouseListener(sunPanel);
        sunPanel.addMouseMotionListener(sunPanel);
        add(sunPanel, BorderLayout.CENTER);

    }

} 
```

# c++ - c++ stringstream转换错误：分段错误

> ID：14961518
> 
> 赞同：0
> 
> 时间：2013-02-19T15:47:52.617
> 
> 标签：c++, string, stringstream

我在尝试将整数转换为字符串的简单函数时遇到了一些问题。这是代码：

```
string Problem::indexB(int i, int j, int k){    
    stringstream ss;

    if(i < 10)
        ss << "00";
    else if(i<100)
        ss << "0";
    ss << i;

    if(j < 10)
        ss << "00";
    else if(j<100)
        ss << "0";
    ss << j;

    if(k < 10)
        ss << "00";
    else if(k<100)
        ss << "0";
    ss << k;

    return ss.str();
} 
```

该函数工作正常，但是当进行多次调用时，它会在某些时候给我一个分段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:59:58.390

它对我来说很好：http: [//ideone.com/lNOfFZ](http://ideone.com/lNOfFZ)

完整的工作程序：

```
#include <string>
#include <sstream>
#include <iostream>

using std::string;
using std::stringstream;

class Problem {
public:
    static string indexB(int i, int j, int k);
};

string Problem::indexB(int i, int j, int k){

    stringstream ss;

    if(i < 10)
        ss << "00";
    else if(i<100)
        ss << "0";
    ss << i;

    if(j < 10)
        ss << "00";
    else if(j<100)
        ss << "0";
    ss << j;

    if(k < 10)
        ss << "00";
    else if(k<100)
        ss << "0";
    ss << k;

    return ss.str();
}

int main() {
    std::cout << Problem::indexB(1, 2, 3) << "\n";
    std::cout << Problem::indexB(400, 50, 6) << "\n";
    std::cout << Problem::indexB(987, 65, 432) << std::endl;
} 
```

分段错误通常发生在程序遇到未定义行为之后的一段时间，因此检测到错误时的堆栈跟踪不一定与错误代码在同一个函数中。

# c# - 执行 Linq 查询时时间距离的条件计算

> ID：14961521
> 
> 赞同：0
> 
> 时间：2013-02-19T15:47:59.413
> 
> 标签：c#, linq

我想对具有`StartTime`属性的对象列表执行以下查询。问题是有时`null`可以建立价值观。

那么，如何检查该值是否为`null`以及是否在 2 个值之间执行随机数？

```
 var myOtherQuery = db.Table.Select(e=> e );

var myQuery = myOtherQuery.Select(e => new { e, TimeDistance = ((DateTime) e.StartTime - DateTimeNow).TotalMinutes }); 
```

**这是 L2SQL** **某些对象在 StartTime 中具有空值，这会在尝试确定 TimeDistance 时导致异常 **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:52:45.747

你的意思是这样的？

```
var myQuery = myOtherQuery.Select(e => 
    new { E = e, 
          TimeDistance = ((e.StarTime.HasValue ? e.StartTime.Value : someOtherValue) - DateTime.Now).TotalMinutes 
    }
); 
```

或者：

```
var myQuery = myOtherQuery.Select(e => 
    new { E = e, 
          TimeDistance = (e.StarTime.HasValue ? (e.StartTime.Value - DateTime.Now) : someOtherValue).TotalMinutes 
    }
); 
```

# android - 安卓拖动图片

> ID：14961523
> 
> 赞同：0
> 
> 时间：2013-02-19T15:48:18.963
> 
> 标签：android, touch, imageview, drag

我的布局中有一个 imageview 和一个 textview，我想通过触摸移动这个 imageview。它的工作，但问题是 textview 也移动，你能告诉我如何解决它吗？

这是我的代码

```
private ImageView img;
private int status=0;
TextView tv;
RelativeLayout.LayoutParams params;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     img=(ImageView)findViewById(R.id.imageView1);
     img.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
            // TODO Auto-generated method stub

            status=1;

        return false;
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);

    return false;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
// TODO Auto-generated method stub

    if( status==1)
    {
        LayoutParams lp = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        lp.topMargin=(int)event.getRawY();
        lp.leftMargin=(int)event.getRawX();
        img.setLayoutParams(lp);
    }
    if(event.getAction()==MotionEvent.ACTION_UP){
    status=0;
    }
return super.onTouchEvent(event); 
```

} }

这是我的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinerLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="84dp"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/imageView1"
    android:layout_alignParentTop="true"
    android:layout_marginTop="119dp"
    android:text="TextView" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:57:34.823

案例关闭，天哪，我忘记了，因为我使用相对布局并且 textview 与 imageview1 对齐 感谢您的帮助

# java - 有什么方法可以通过防火墙启用网络抓取？

> ID：14961524
> 
> 赞同：1
> 
> 时间：2013-02-19T15:48:24.567
> 
> 标签：java, sockets, web-scraping, jsoup

我在一个公司网络上试图用 Java 编写一个 JSoup 网络爬虫，但我似乎无法连接。

为了进行测试，当我运行以下代码时，它给了我一个 java.netConnectException: Connection denied。

```
 Socket socket = null;
    try {
        socket = new Socket("google.com", 80)
        System.out.println("it works!");
    } finally {            
        if (socket != null) try { socket.close(); } catch(IOException e) {}
    } 
```

作为记录，我的 JSoup 代码如下所示：

```
 Connection con = Jsoup.connect("http://en.wikipedia.org/wiki/Main_Page");
    Document doc = con.get(); 
```

当我单独运行它时，它给了我一个 TimeOut 异常（即使在给它一个慷慨的超时之后）。我应该怎么做才能让它在我的网络中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:05:05.527

我找到了一个解决方案：[我必须简单地找到我的代理并将其设置在我的代码中。](https://stackoverflow.com/questions/13288471/jsoup-over-vpn-proxy)

```
// if you use https, set it here too
System.setProperty("http.proxyHost", "<proxyip>"); // set proxy server
System.setProperty("http.proxyPort", "<proxyport>"); // set proxy port

Document doc = Jsoup.connect("http://your.url.here").get(); // Jsoup now connects via proxy 
```

此外，您可能需要[设置用户代理](https://stackoverflow.com/questions/6581655/jsoup-useragent-how-to-set-it-right)。我在那里留下了“推荐人”代码，尽管我认为在大多数情况下没有必要。请注意，userAgent 是在您访问的 Web 服务器歧视机器的情况下组成的。

```
doc = Jsoup.connect("https://www.facebook.com/")
  .userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6")
  .referrer("http://www.google.com")
  .get(); 
```

# ruby-on-rails - 运行 rake 资产时未定义的方法“sub”：在 Windows 上预编译

> ID：14961526
> 
> 赞同：0
> 
> 时间：2013-02-19T15:48:38.303
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, rails-activerecord

当我尝试运行 rake assets:precompile 时，我遇到了一个似乎与我的 database.yml 相关的奇怪问题。但是，直接访问该网站可以正常工作（如果我将环境更改为使用资产管道）。

Rails 3.2.12，红宝石 1.9.3p385，Windows Server 2008。

我的 database.yml 文件（主机、用户名和密码已删除）：

```
生产：
  适配器：mysql2
  编码：utf8
  重新连接：真
  数据库：图像
  游泳池：5
  用户名：用户名
  密码：密码
  主持人：主持人

```

错误顶部的片段：

```
D:\inetpub\wwwroot\images>rake assets:precompile
C:/Ruby19/bin/ruby.exe C:/Ruby19/bin/rake assets:precompile:all RAILS_ENV=assets:precompile RAILS_GROUPS=assets
耙中止！
nil:NilClass 的未定义方法“sub”
D:/inetpub/wwwroot/images/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:68:in `co
nnection_url_to_hash'
D:/inetpub/wwwroot/images/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:36:in `bl
锁定 resolve_string_connection'
D:/inetpub/wwwroot/images/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:35:in `fe
切'

```

**编辑：**

这是connection_specification.rb的内容，它在这一行被炸毁了 `:database => config.path.sub(%r{^/},""),`：：

```
       def connection_url_to_hash(url) # :nodoc:
          config = URI.parse 网址
          适配器 = config.scheme
          适配器 = “postgresql” 如果适配器 == “postgres”
          规格 = { :适配器 => 适配器，
                   :username => config.user,
                   :password => config.password,
                   :port => config.port,
                   :database => config.path.sub(%r{^/},""),
                   :host => config.host }
          spec.reject!{ |_,value| 值.空白？}
          spec.map { |键，值| spec[key] = URI.unescape(value) if value.is_a?(String) }
          如果 config.query
            options = Hash[config.query.split("&").map{ |pair| pair.split("=") }].symbolize_keys
            规范合并！（选项）
          结尾
          规格
        结尾
      结尾
    结尾

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:56:30.070

您的输出会生成：RAILS_ENV=assets:precompile

但是我认为您没有声明资产环境。

尝试`$:. rake assets:precompile RAILS_ENV='production' RAILS_GROUPS='assets'`

PS：Windows 是.. 假设在 Rails 支持方面未开发，因此您可能需要考虑切换到另一个操作系统。我个人最喜欢的是 Debian sqeeze

# ruby-on-rails - 无法使用 ActiveRecord 从存储过程中获取结果集

> ID：14961528
> 
> 赞同：1
> 
> 时间：2013-02-19T15:48:40.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我的 Ruby 程序只是想调用一个存储过程（它将进行一些计算）并返回一个我想使用 Ruby 代码通过电子邮件发送的结果集。请注意，我没有使用 Rails，只是使用普通的 Ruby 和 mysql2 gems。

```
require 'active_record'

ActiveRecord::Base.establish_connection(
  :adapter => "mysql2",
  :host  => "localhost",
  :database => "<mydb>",
  :username => "<myusername>",
  :password => "<mypassword>"
)

class Rubyist < ActiveRecord::Base  
end

rubyist = Rubyist.new
puts rubyist.connection.execute("CALL ruby_routine") 
```

返回以下错误

```
 Mysql2::Error: PROCEDURE students.ruby_routine can't return a result set in the given context: CALL ruby_routine (ActiveRecord::StatementInvalid) 
```

现在我用谷歌搜索了这个并找到了链接，但它们是针对 Rails 应用程序的。我如何在纯 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:07:01.107

我认为问题来自 ActiveRecord 中使用的 mysql2 连接器。正如 mysql2 的人在他们的文档中所说：

> 您还可以检索多个结果集。为此，您需要连接标志 Mysql2::Client::MULTI_STATEMENTS。当调用返回多个结果集的存储过程时，通常使用多个结果集

因此，默认情况下未设置。对，所以理想情况下，如果你直接使用 mysql2 适配器（没有 ActiveRecord），你会像这样传递标志：

```
client = Mysql2::Client.new(:host => "localhost", :username => "root", :flags => Mysql2::Client::MULTI_STATEMENTS ) 
```

但是，由于您使用的是 ActiveRecord，因此您需要覆盖 mysql2 连接器。像这样的东西可以解决问题。

```
module ActiveRecord
  class Base
    # Establishes a connection to the database that's used by all Active Record objects.
    def self.mysql2_connection(config)
      config[:username] = 'root' if config[:username].nil?

      if Mysql2::Client.const_defined? :FOUND_ROWS
        config[:flags] = Mysql2::Client::FOUND_ROWS | Mysql2::Client::MULTI_STATEMENTS
      end

      client = Mysql2::Client.new(config.symbolize_keys)
      options = [config[:host], config[:username], config[:password], config[:database], config[:port], config[:socket], 0]
      ConnectionAdapters::Mysql2Adapter.new(client, logger, options, config)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-19T16:08:09.300

你的问题是语法。尝试在“rubyist”类中​​移动“建立连接”方法。

# azure - 在 Azure 中的 Web 角色和辅助角色之间共享代码

> ID：14961532
> 
> 赞同：2
> 
> 时间：2013-02-19T15:48:53.110
> 
> 标签：azure, communication, webrole

不确定这在 Azure 服务中是否可行，以及它是否是最好的方法。

我有一个从我的数据库中提取数据并构建 xml 输出的类。在正常情况下，由于它是以工作者角色运行的，它会在必要时运行并将 XML 推送到外部 Web 服务。但是，我还需要能够将该功能公开为服务，以便不同的外部 Web 服务可以对我的系统进行 Web 服务调用并获得相同的 XML 响应。我可以在工作角色中设置一个 RESTful Web 服务并构建与我的工作角色中存在的相同的功能 - 问题是我现在有重复的代码。

我该如何设置它，以便我的代码从数据库中获取额外数据，执行一些计算，生成 xml 都位于一个位置，该位置可从 webrole（由外部 Web 服务调用触发）和工作角色（定期运行时间表）。

我已经查看了有关 TCP 内部端点和工作人员 webrole 通信的所有问题，但似乎没有一个涉及允许 webrole 调用 workerrole 上的方法并将该数据传递给调用者的情况。

如果有人可以帮助我，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T05:31:42.210

好吧，从技术上讲，解决方案是创建一个包含所有共享代码的类库（.NET 程序集），并从两个角色项目中使用它。您必须在每个角色项目中对该程序集的引用上将“复制本地”设置为“真”，以便将程序集打包到角色包中。

但是，在您的情况下，可能会有更好的解决方案。您可能只是将网络角色用于这两个目的。我的意思是一个网络角色就像一个工人角色，只是安装了一个额外的 IIS。除非你真的（真的——真的）需要单独扩展和更新它们，否则你可以节省很多管理和部署的痛苦，也可以节省一些钱，只是使用 Web 角色来处理所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:42:28.807

如果我是你，我会将其设置为 Web 角色，然后会向 Worker Role 发送一条消息，并根据此消息触发 Worker 角色上的事件以启动所需的流程。

您可以使用队列存储或 WCF 服务来执行此操作。

# php - 稍后在页面中获取代码

> ID：14961534
> 
> 赞同：0
> 
> 时间：2013-02-19T15:49:00.617
> 
> 标签：php, javascript

我有一个动态页面，它在我想要插入页面标题的内容中生成一个变量。

从页面内容中获取此变量并将其放入标题的最佳方法是什么？我更喜欢 PHP 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:51:22.400

如果您想在 php 中执行此操作，那么最好的答案是将您的逻辑（生成变量值的内容）和视图渲染（打印出所有 html 的内容）分开，这样所有变量在您输出任何内容之前都已准备好，因此您可以在多个地方使用相同的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:00:47.983

如果您的变量依赖于客户端信息，则您必须捕获该信息并在 php.ini 中使用它。不幸的是，这意味着您无法拥有纯 PHP 解决方案，您必须在客户端拥有一些东西（javascript：get/post）。

如果您的变量客户端独立，那么您可能可以在页面加载之前计算它并使用 php 将它放在您喜欢的任何地方。

但是，如果您想在不重新加载页面的情况下执行此操作，那么 php 不是一个选项，您必须使用 javascript/AJAX 从正文中获取变量并将其移动到标题中。

# salesforce - Apex 更新触发器 - 更新查找字段

> ID：14961536
> 
> 赞同：1
> 
> 时间：2013-02-19T15:49:09.990
> 
> 标签：salesforce, apex-code

我正在尝试编写我的第一个 Apex 更新触发器，并且在尝试设置自定义查找字段的值时略有挣扎。

我有一个名为的对象`Deployment__c`，它是与一个名为`Service__c`（名称简化！）

该`Service__c`字段在 Salesforce 中没有`Owner`，因为它是主-详细信息关系中的子/详细信息。因此，我们创建了一个在此对象上调用的伪所有者字段，它是在 Salesforce 中`Owner__c`查找对象的查找字段。`User`

触发器的目的是将 的值设置`Service__c.Owner__c`为 的所有者用户的值`Deployment__c`（如果`Owner__c`尚未设置 on ）`Service__c`。

我的代码如下：

```
trigger AfterServiceUpdate on Service__c (before update) {
    for (Service__c oldService : Trigger.new) {
        if (oldService.Owner__c == null) {
            User defaultUser = [Select Id FROM User WHERE User.Id = :oldService.Deployment__r.OwnerId];
            oldService.Owner__c = defaultUser.Id;
        }
    }
} 
```

但是，当我尝试保存此触发器时出现错误：

> 错误：编译错误：SObject ASE_Deployment__c 在第 5 行第 13 列的字段 Owner__c 无效

我已验证我的字段名称正确，但无法使其正常工作。欢迎任何指点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:39:02.363

我刚刚重新创建了您在测试组织中描述的对象结构，但无法重现您遇到的错误。另一方面，我能够让您描述的触发器与以下代码一起工作，这些代码已为您批量化：

```
trigger AfterServiceUpdate on Service__c (before update) 
{
    //instantiate set to hold unique deployment record ids
    Set<Id> deplomentIds = new Set<Id>();
    for(Service__c s : Trigger.new)
    {
        deplomentIds.add(s.Deployment__c);
    }

    //instantiate map to hold deployment record ids to their corresponding ownerids
    Map<Id, Deployment__c> deploymentOwnerMap = new Map<Id, Deployment__c>([SELECT Id, OwnerId FROM Deployment__c WHERE Id IN: deplomentIds]);

    for (Service__c s : Trigger.new) 
    {
        if (s.Owner__c == null && deploymentOwnerMap.containsKey(s.Deployment__c)) 
        {
            s.Owner__c = deploymentOwnerMap.get(s.Deployment__c).OwnerId;
        }
    }
} 
```

我还为您创建了一个测试类来测试结果：

```
@isTest
private class AfterServiceUpdateTest {

    @isTest static void test_method_one() {
        Deployment__c d = new Deployment__c();
        insert d;

        Service__c s = new Service__c();
        s.Deployment__c = d.Id;
        insert s;

        Id deploymentOwnerId = [SELECT Id, OwnerId FROM Deployment__c WHERE Id=:d.Id].OwnerId;

        test.startTest();

        update s;

        Service__c updatedService = [SELECT Id, Owner__c FROM Service__c WHERE Id=:s.Id];

        system.assertEquals(deploymentOwnerId, updatedService.Owner__c);

        test.stopTest();
    }

} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:32:38.353

尝试更改`owner__c`为`Ownerld`

# php - PHP 中的 XML-RPC 服务器实现 - 最小，最简单的可能

> ID：14961537
> 
> 赞同：2
> 
> 时间：2013-02-19T15:49:17.513
> 
> 标签：php, xml-rpc

我试图用 PHP 编写简单的 XMLRPC 服务器。

我已经阅读了一些文档，发现了最小的实现，类似于：

```
// /xmlrpc.php file

include "lib/xmlrpc.inc";
include "lib/xmlrpcs.inc";

// function that handles example.add XML-RPC method
function add ($xmlrpcmsg) 
{

    // ???

    $sumResult = $a + $b;

    // ???

    return new xmlrpcresp($some_xmlrpc_val);
}

// creating XML-RPC server object that handles 1 method
$s = new xmlrpc_server(
    array(
      "example.add" => array("function" => "add")
    )); 
```

**如何创建响应？**

假设我想要一个整数作为响应，它是通过 XML-RPC 调用传递给 XMLRPC 服务器的参数的`sumResult`总和。`a``b`

我使用[PHP XML-RPC](http://phpxmlrpc.sourceforge.net/) 3.0.0beta（我也可以使用 2.2.2，但我决定使用 3.0.0beta，因为它被标记为稳定）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T18:33:12.463

我知道了。

这是基于 phpxmlrpc 库的完整、最简单的 XML-RPC 服务器。

```
<?php

// Complete, simplest possible XMLRPC Server implementation
// file: domain.com/xmlrpc.php

include "lib/xmlrpc.inc";     // from http://phpxmlrpc.sourceforge.net/
include "lib/xmlrpcs.inc";    // from http://phpxmlrpc.sourceforge.net/

// function that handles example.add XML-RPC method 
// (function "mapping" is defined in  `new xmlrpc_server` constructor parameter.
function add ($xmlrpcmsg) 
{
    $a = $xmlrpcmsg->getParam(0)->scalarval(); // first parameter becomes variable $a
    $b = $xmlrpcmsg->getParam(1)->scalarval(); // second parameter becomes variable $b

    $result = $a+$b; // calculating result

    $xmlrpcretval = new xmlrpcval($result, "int"); // creating value object
    $xmlrpcresponse = new xmlrpcresp($xmlrpcretval); // creating response object

    return $xmlrpcresponse; // returning response
}

// creating XML-RPC server object that handles 1 method
$s = new xmlrpc_server(
            array(
                "example.add" =>  array( // xml-rpc function/method name
                    "function" => "add", // php function name to use when "example.add" is called
                    "signature" => array(array($xmlrpcInt, $xmlrpcInt, $xmlrpcInt)), // signature with defined IN and OUT parameter types
                    "docstring" =>  'Returns a+b.' // description of method
                    )          
            )
        );

?> 
```

我不完全了解`scalarval()`方法对参数的作用，我认为它只是将对象转换为常规变量/值，并且可以与字符串一起使用。

# django - Django - 在其他函数中使用输入变量

> ID：14961541
> 
> 赞同：0
> 
> 时间：2013-02-19T15:49:23.057
> 
> 标签：django, django-models, django-forms

我正在尝试找到一种稍后使用用户提供的变量的好方法。我已将其简化为这个最小的示例：

模型.py

```
class Input(models.Model):
    x = models.IntegerField()

class InputForm(ModelForm):
    class Meta:
        model = Input 
```

视图.py

```
def input(request):
    if request.method == 'POST':
        form = InputForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/results')
    else:
        form = InputForm()

    return render_to_response('input.html', 
        {'form':form}, context_instance=RequestContext(request))

def result(request):
    # Here I would like to get the input from the form, e.g.
    #
    # x = request.GET["x"]
    #
    # or
    #
    # inp = InputForm(request.GET)
    # x = inp.x
    #
    # Something like this, so that I can be able to write the line below:
    return HttpResponse("x = %f" % x) 
```

推荐的方法是什么？

编辑：

主要问题似乎是results函数中的request.GET dict是空的，即

```
def results(request):
    return HttpResponse(request.GET) 
```

只显示一个空白页面。然后当然 request.GET['x'] 给出了异常“Key 'x' not found in QueryDict: {}”。我的 input.html 看起来像这样：

```
<form method="post" action="">{% csrf_token %}
    {{ form }}
    <input type="submit" value="Compute" />
</form> 
```

理想情况下，我希望能够将 request.GET 发送回 InputForm，就像在 FallenAngel 的原始答案中一样，但它不起作用，因为 request.GET 是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:51:57.647

您可以使用[会话](https://docs.djangoproject.com/en/1.4/topics/http/sessions/)来保存从一个视图到下一个视图的值。会话有许多数据存储方式的后端，因此请选择最适合您的架构的后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:16:11.777

如果我没有误解你，你想使用已发布表单的字段值而不保存。您可以使用`commit=False`，因此，它只会使用元模型创建一个对象，但不会将其保存到您的数据库中：

```
def result(request):
    inp = InputForm(request.GET)
    if inp.is_valid():
        my_obj = inp.save(commit=False) # do not save it to database
        return HttpResponse("x = %f" % my_obj.x) 
```

更新：如果您不需要表单验证（出于某些原因），您可以使用字典方法，因为`request.POST`并且`request.GET`是类似字典的对象。（[在 Django 中请求 GET 和 POST 对象](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.GET)）。所以：

```
request.GET['x'] 
```

或者

```
request.GET.get('x') 
```

会为你工作。

# php - php获取记录转换为二维数组

> ID：14961542
> 
> 赞同：0
> 
> 时间：2013-02-19T15:49:26.087
> 
> 标签：php, arrays, multidimensional-array

我想从数据库中获取记录而不是转换为二维数组。

```
Example:

$data = array(
        1 => array ('Name', 'Surname','sex','address','web'),
        array('Schwarz', 'Oliver','M','KP','222.dddd'),
        array('Test', 'Peter','F','KK','wwww.fsadfs')
        ); 
```

如上例所示，如何格式化数据库中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:57:51.170

尝试这样的事情：

```
$i = 0;

foreach( $results as $result )
{
    $array[$i]['field1'] = $results['field1'];
    $array[$i]['field2'] = $results['field2'];

    $i++;
} 
```

根据您用于访问数据库的库，它可能会略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:56:33.767

[这](http://codepad.viper-7.com/3S7Nnp)是一个示例，使用 PDO 和在粘贴本身内部创建的内存 SQLite 数据库；必须在线创建数据库使脚本比严格必要的要冗长一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T08:20:17.037

这是您创建函数的答案，返回多个数组

```
public static function getRecords($query){  // Gets multiple records and    returns associative array
    $db = db::open();
    $result = $db->query($query);
    if(!$result){
        die('There was an error running the query [' . $db->error . ']');
    }
    if($result->num_rows>0){
        $i=0;
        while ($row = $result->fetch_assoc()){
            $recordset[$i] = $row;
            $i++;
            }
        }else{
            $recordset = false;
        }
    db::close($db);
    return ($recordset);
} 
```

你只需像这样传递查询

```
 $QUERY="select * FROM USERS";

AND CREATE class db to open the connection and also add function in this class and your function is ready 

    class db{
    public static function open(){ // opens the db connection. Specify different databases for local and live server and it will automatically select the correct one

       $servers = array('localhost', '127.0.0.1', 'warrior');
        if(in_array($_SERVER['HTTP_HOST'], $servers)){ //for localhost
            $dbuser = 'root';
            $dbpwd = '';
            $dbname = 'database name';
            $dbserver = 'localhost';
        }
        $db = mysqli_connect($dbserver,$dbuser,$dbpwd,$dbname);
        if ($db->connect_errno > 0){
          echo "Failed to connect to MySQL: " . $db->connect_error;
          }
         return $db;
        }

    public static function close(&$db){
        $db->close();
    } //also add your Get_record function here
} 
```

包含文件并测试它谢谢

# java - 运行多个线程并在一个停止后停止

> ID：14961548
> 
> 赞同：0
> 
> 时间：2013-02-19T15:49:42.960
> 
> 标签：java, android, multithreading

我想启动几个线程来尝试连接到服务器。

```
ArrayList<Thread> stack = new ArrayList<Thread>();
stack.add(new Thread() {
    public void run()
    {
        // Do something

        // Success
        // Thread is finished
    }
});
stack.add(new Thread() {
    public void run()
    {
        // Do something

        // Success
        // Thread is finished
    }
});

for (int i=0; i<stack.size(); i++)
{
    stack.get(i).start();
} 
```

当一个线程完成时，我想杀死其他线程。我怎样才能做到这一点 ？这适用于 Android 应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:54:23.357

[ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)在 javadoc 中有这个例子。

# arrays - 指针算术（指向数组）

> ID：14961549
> 
> 赞同：0
> 
> 时间：2013-02-19T15:49:44.050
> 
> 标签：arrays, pointers

我对指针有一点疑问，请帮助我..

```
void main()
{
    int x[10],*px=x,*py;
    int i;
    py = &x[5], i = py - (px);

    cout << "\nThe value of px=x is:" << (int)px << "\n";
    cout << "x[0]\t" << (int)x << "\n";
    cout << "x[5]\t" << (int)&x[5] << "\n";
    cout << "\nThe value of i=py-px is\n";
    cout << i;
} 
```

在上面的程序中，你得到'i'的值作为数组（内存）的整数等价除以2（10/2 = 5）的差。为什么不仅仅是差，即10？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:19:31.247

如果您尝试使用指针获取两个数组元素之间的差异，则需要取消引用指针：

```
i = *py - *px; 
```

您编写它的方式是计算两个地址之间的差异，应该是 5，除非您将指针转换为`void *`，在这种情况下它将是`5 * sizeof(int)`（不确定您是在 32 位还是 64 位系统 - 答案会有所不同）。

哦，`x[]`无论如何你都没有初始化，所以你的结果可能有点......随机......

# objective-c - -[UIDeviceRGBColor red]：发送到实例的无法识别的选择器

> ID：14961552
> 
> 赞同：0
> 
> 时间：2013-02-19T15:49:56.637
> 
> 标签：objective-c, uicolor, unrecognized-selector

`CGFloat colorR = color.red;`

它适用于一些构建，但随后我修改了一些与此无关的代码，`color`并且每次我尝试运行它时突然该行使我的应用程序崩溃，即使在撤消这些更改之后也是如此。

```
NSLog(@"%@", color.CGColor);
    //<CGColor %p> [<CGColorSpace %p> (kCGColorSpaceDeviceRGB)] ( 0.2 0.5 0.7 1 )
NSLog(@"%f", color.red);
    //-[UIDeviceRGBColor red]: unrecognized selector sent to instance 
```

错误的可用性和（罕见的）正确功能`color.red`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:54:08.387

-red 不是 UIColor 的公共实例方法。UIColors 可以在任何颜色空间中表示，并且可能涉及一些转换。要从 UIColor 对象读取原始 RGB 组件，您必须使用以下方法： `- (BOOL)getRed:(CGFloat *)red green:(CGFloat *)green blue:(CGFloat *)blue alpha:(CGFloat *)alpha`

我不知道为什么 color.red 有时会起作用 - 可能是某些颜色在内部使用该方法的一个类集群实例，而其他时候它们以另一种格式存储。

# c++ - 在 Windows 上使用 system() 时出现问题

> ID：14961553
> 
> 赞同：3
> 
> 时间：2013-02-19T15:50:03.003
> 
> 标签：c++, exe, quotes

我有一个 C++ 程序试图用两个参数调用一个可执行文件。该代码在 Mac 上运行良好，但在 Windows 上存在一些问题。我相信这个问题与参数中的空格有关，因为当我使用没有空格的路径时，它工作得很好。

此外，我打印出我要发送的内容`system()`，然后在命令行上运行该打印输出，它工作得很好，这很简单。

我这样打电话：`ret = system(cmd.c_str());`

如果我这样做：`cout << cmd << endl;`我会得到这样的东西：

```
"C:\Program Files (x86)\MyProgram\some_executable.exe" "C:\Users\me\Desktop\files" 
```

我不确定为什么引号没有帮助，我在`system()`通话中的路径周围加上引号。cmd 的打印输出正是我想要运行的，但它不起作用。但是，如果该路径中没有空格，它将执行得很好。

关于将带有空格的参数传递给`system()`调用的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:20:40.533

经过更多研究，这个问题与 Windows 愚蠢有关。系统调用删除了第一个和最后一个引号，因此我不得不将整个内容用另一组引号括起来......我在这里找到了我的解决方案：[C++ system() not working when there are space in two different parameters](https://stackoverflow.com/questions/9964865/c-system-not-working-when-there-are-spaces-in-two-different-parameters)

# php - 使用php从服务器中的文件夹中删除图像文件

> ID：14961554
> 
> 赞同：1
> 
> 时间：2013-02-19T15:50:03.190
> 
> 标签：php

如何使用 php 删除名为 (images) 的服务器文件夹中的图像文件我正在尝试以下代码

```
<a href="delete.php? id=<?php echo $row_DetailRS1['id'];?>">Delete</a> 
```

这带我去 delete.php 页面

```
$id=$_GET['id'];            
$select = mysql_query("SELECT `file_name` FROM `flie_record WHERE `file_records`.`id` = '$id'");
$image  =mysql_fetch_array($select);
@unlink('images/'.$image); 
```

什么也没发生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:54:30.813

`$image`是一个数组，您需要添加键：

```
$id = (int)$_GET['id'];            
$select = mysql_query("SELECT `file_name` FROM `file_records` WHERE `file_records`.`id` = '$id'");
$image  =mysql_fetch_array($select);
@unlink('images/'.$image['file_name']); 
```

和`(int)`to `$_GET['id']`- MySQL 注入孔的整数。

# php - 将一维数组转换为多维数组

> ID：14961556
> 
> 赞同：1
> 
> 时间：2013-02-19T15:50:08.587
> 
> 标签：php, arrays, multidimensional-array

假设我有这个数组：

```
Array
(
  [0] => Array
  (
    [name] => ELECTRONICS
    [depth] => 0
  )

  [1] => Array
  (
    [name] => TELEVISIONS
    [depth] => 1
  )

  [2] => Array
  (
    [name] => TUBE
    [depth] => 2
  )

  [3] => Array
  (
    [name] => LCD
    [depth] => 2
  )

  [4] => Array
  (
    [name] => PLASMA
    [depth] => 2
  )

  [5] => Array
  (
    [name] => PORTABLE ELECTRONICS
    [depth] => 1
  )
) 
```

我希望将其转换为多维数组，以便深度高于前一个元素的直接元素将进入前一个元素的内部，键为“children”。像这样：

```
Array
(
  [0] => Array
  (
    [name] => ELECTRONICS
    [depth] => 0
    [children] => Array
    (
      [0] => Array
      (
        [name] => TELEVISIONS
        [depth] => 1
        [children] => Array
        (
          [0] => Array
          (
            [name] => TUBE
            [depth] => 2
          )

          [1] => Array
          (
            [name] => LCD
            [depth] => 2
          )

          [2] => Array
          (
            [name] => PLASMA
            [depth] => 2
          )
        )
      )

      [1] => Array
      (
        [name] => PORTABLE ELECTRONICS
        [depth] => 1
      )
    )
  )
) 
```

非常感谢您的帮助。谢谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:54:43.847

那是一个棘手的问题。我不确定这是否是实现这一目标的最佳方式，但它有效：

```
function flat_to_tree($array, $depth = 0)
{
  $out = array();
  $inCurrentDepth = true;

  foreach ($array as $key => $value) {
    if ($value['depth'] < $depth) {
      return $out;
    }

    if ($value['depth'] === $depth) {
      $inCurrentDepth = true;
      $out[] = $value;
    }

    if ($inCurrentDepth && $value['depth'] > $depth) {
      $inCurrentDepth = false;
      $out[$key - 1]['children'] = flat_to_tree(array_slice($array, $key), $value['depth']);
    }
  }

  return $out;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:05:58.633

这是我的破解... 使用一个 foreach 循环和一个指针数组来跟踪一堆不同的父指针。

```
$multi_dimensional = array();
$last_depth = 0;
$parent = &$multi_dimensional;
$parents[$last_depth] = &$parent;

foreach ($start as $idx => $data) {
  // same/increasing depth
  if ($last_depth <= $data['depth']) {
    $parent['children'][] = $data;  
  } 

  // increasing depth
  if ($last_depth < $data['depth']) {
    $parents[$last_depth] = &$parent;
  }

  // decreasing depth
  if ($last_depth > $data['depth']) {
    $parent = &$parents[$data['depth']-1];
    $parent['children'][] = $data;  
  }

  // look ahead and prepare parent in increasing
  if (isset($start[$idx+1]) && $start[$idx+1]['depth'] > $data['depth']) {
    $last_insert_idx = count($parent['children'])-1;
    $parent = &$parent['children'][$last_insert_idx];
  }
  $last_depth = $data['depth'];
}

// initial values are in child "children" array
$result = $multi_dimensional['children']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T16:31:25.770

我为它的名称和递归性质道歉。另外，请注意，此函数将“破坏”您的原始数组，因此如果您想保留它，请使用克隆

```
function multiDimensionate(&$arr, $currentLevel = 0) {
  $root = array();

  foreach ($arr as &$elem){
    if ($elem["depth"] == $currentLevel) {
      $root[] = $elem;
      unset($elem);
    } else if ($elem["depth"] == $currentLevel + 1) {
      $root[count($root)-1]["children"] = multiDimensionate($arr,$elem["depth"]);      
    }
  }

  return $root;
} 
```

编辑：正如评论中指出的，以前的功能不能正常工作，这应该没问题，仍然有破坏原始数组的副作用。

# java - 无法在 Eclipse 中运行 Android 项目：.aidl 错误

> ID：14961560
> 
> 赞同：0
> 
> 时间：2013-02-19T15:50:19.530
> 
> 标签：java, android, android-emulator, nullpointerexception, aidl

我正在尝试在 Eclipse 4.2.1(Juno) 中运行特定的 Android 项目。当我尝试编译它时，它会给出以下错误。

```
Failed to run com.android.ide.eclipse.adt.internal.build.AidlProcessor. Check workspace log for detail.

java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.build.AidlProcessor.doCompileFiles(AidlProcessor.java:116)
    at com.android.ide.eclipse.adt.internal.build.SourceProcessor.compileFiles(SourceProcessor.java:245)
    at com.android.ide.eclipse.adt.internal.build.builders.PreCompilerBuilder.build(PreCompilerBuilder.java:679)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
    at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
    at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
    at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

我的项目中没有使用任何aidl文件。

我已经安装了最新的 SDK 和最新的 ADT。

注意：我可以在这个 Eclipse 中完美地运行其他项目，除了这个。我还检查了以下链接，但没有成功：

[无法运行 com.android.ide.eclipse.adt.internal.build.AidlProcessor](https://stackoverflow.com/q/11690543/480346)

[AIDL 文件不在 Eclipse 中随机项目中构建？](https://stackoverflow.com/q/10261781/480346)

你能告诉我们可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:00:44.260

尝试清理你的 Eclipse C:\path\to\eclipse\eclipse -clean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:29:28.740

最后通过创建一个新项目并复制其中的所有文件来解决这个问题。然后它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T13:18:11.750

它对我有用，希望它也对你有用。

1.  从eclipse中删除项目，进入你的项目目录，删除.settings和.classpath。
2.  刷新目录，在eclipse中再次导入项目。

# python - 如何将一串十六进制值转换为整数列表？

> ID：14961562
> 
> 赞同：10
> 
> 时间：2013-02-19T15:50:24.677
> 
> 标签：python, audio, hex, signal-processing, waveform

我有一长串十六进制值，看起来都类似于：

```
'\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00' 
```

实际的字符串是 1024 帧的波形。我想将这些十六进制值转换为整数值列表，例如：

```
[0, 0, 0, 1, 0, 0, 0, 255, 255, 0, 0] 
```

如何将这些十六进制值转换为整数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T15:51:28.567

使用[`struct.unpack`](http://docs.python.org/2/library/struct.html#struct.unpack)：

```
>>> import struct
>>> s = '\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00'
>>> struct.unpack('11B',s)
(0, 0, 0, 1, 0, 0, 0, 255, 255, 0, 0) 
```

这为您提供 a`tuple`而不是 a `list`，但我相信您可以根据需要进行转换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T15:53:02.190

您可以[`ord()`](http://docs.python.org/2/library/functions.html#ord)结合使用[`map()`](http://docs.python.org/2/library/functions.html#map)：

```
>>> s = '\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00'
>>> map(ord, s)
[0, 0, 0, 1, 0, 0, 0, 255, 255, 0, 0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T15:54:26.680

```
In [11]: a
Out[11]: '\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00'

In [12]: import array

In [13]: array.array('B', a)
Out[13]: array('B', [0, 0, 0, 1, 0, 0, 0, 255, 255, 0, 0]) 
```

一些时间；

```
$ python -m timeit -s 'text = "\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00";' ' map(ord, text)'
1000000 loops, best of 3: 0.775 usec per loop

$ python -m timeit -s 'import array;text = "\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00"' 'array.array("B", text)'
1000000 loops, best of 3: 0.29 usec per loop

$ python -m timeit -s 'import struct; text = "\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00"'  'struct.unpack("11B",text)'
10000000 loops, best of 3: 0.165 usec per loop 
```

# scala - Scala SortedMap：获取大于给定键的所有键

> ID：14961566
> 
> 赞同：3
> 
> 时间：2013-02-19T15:50:47.787
> 
> 标签：scala, scala-collections

给定一个 Scala`collection.SortedMap`和一个 key ，让所有键（甚至更好，所有*键值对*）大于存储在排序映射中的*最有效方法*`k`是什么。返回的键集应保留键的顺序。当然，我想避免仔细阅读整个数据结构（即使用），并利用地图已排序的事实。**`k``filterKeys`**

 **我想做类似的事情：

```
val m = collection.SortedMap((1,1) -> "somevalue", (1,2) -> "somevalue", 
  (1,3) -> "somevalue", (2,1) -> "somevalue", (3,1) -> "somevalue")
m.getKeysGreaterThan((2,1))
// res0: scala.collection.SortedSet[(Int, Int)] = TreeSet((2,1), (3,1)) 
```

如果您能想到更合适的类似地图的数据结构，请提出建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T15:59:14.583

[从 API 文档试试这个](http://www.scala-lang.org/api/current/index.html#scala.collection.SortedMap)：

```
m.from((2,1)) 
```

请注意，结果*包括*键值。

我刚刚检查了 Scala 2.10，`TreeMap.from`调用`from`on `RedBlackTree`，这似乎是一个有效的实现（基于树的数据结构的通常 O(log n) ）。**

# php - stripslashes、utf8_decode、mysql_real_escape_string 之间的最佳顺序？

> ID：14961572
> 
> 赞同：0
> 
> 时间：2013-02-19T15:51:08.513
> 
> 标签：php, mysql-real-escape-string, utf8-decode, stripslashes

如果我需要在 PHP 中使用这些函数，最好的顺序是什么：stripslashes、utf8_decode 和 mysql_real_escape_string。

实际上somme \\ 出现例如：Francois\'s Farm。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:54:38.853

简单的

*   必须在脚本的最顶部，[在所有超全局数组上应用stripslashes，**只有**当魔术引号打开时](http://www.php.net/manual/en/security.magicquotes.disabling.php)
*   utf8_decode - 从不
*   mysql_real_escape_string仅适用于您要插入查询**的字符串，****就在**此插入之前。
    如果您不打算在查询中插入任何字符串文字 - 您也不需要此函数。

> 其实somme\出现例如：Francois\'s Farm。

所以，这里是问题#1。
如上面的链接所示，关闭魔术引号或运行stripslashes。

# c# - 在 MVC 中丢失名为 action 的路由值

> ID：14961573
> 
> 赞同：0
> 
> 时间：2013-02-19T15:51:08.197
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

当我使用 MVC 创建链接时发生了一些奇怪的事情：aspx 视图：

```
<%= Url.Action("ActionName", "Controller", new { action = "add" }) %> 
```

虽然我期望：`"/Controller/ActionName?action=add"`，但我得到了：`"/Controller/ActionName"`。

我猜这是因为“行动”路线图？

有什么办法可以强制吗？任何文档？因为我想知道还有什么被剥夺了。

**路线配置：**

```
routes.MapRoute("Default", 
  "{controller}/{action}/{id}", 
  new { controller = "Home", action = "Index", id = "" }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:53:34.327

`action`（或任何外壳）是保留的路由数据，对 ASP.NET MVC 至关重要。我建议将其重命名为其他名称。

在幕后，`Url.Action`助手可能会用参数的值覆盖它`actionName`。

其他保留的路线数据名称包括`controller`和`area`。这些也是不区分大小写的。

# c++ - QListView 显示空白行？(Qt)

> ID：14961575
> 
> 赞同：1
> 
> 时间：2013-02-19T15:51:09.270
> 
> 标签：c++, qt, qlistview, qabstractlistmodel

我刚刚开始尝试使用 Qt 的 AbstractListModel，作为一个实践应用程序，我正在尝试制作一个存储自定义对象的模型。这些类是`testperson`、`personlistmodel`类和`mainwindow`. 我遇到的问题是我的视图没有显示正确的数据，如果我添加两个“测试人员”，那么我的 listView 会显示两个空行。那么有人可以指导我查看模型的数据格式实际上是如何工作的吗？？？我现在做错了什么？

人物类.cpp

```
testPerson::testPerson(const QString &name, QObject *parent):QObject (parent)
{
  this->fName = name;
  connect(this,SIGNAL(pesonAdd()),this,SLOT(personConfirm()));
  emit pesonAdd();
}

void testPerson::setPerson(QString setTo)
{
  fName = setTo;
}

QString testPerson::getPerson() const
{
  return fName;
}

void testPerson::personConfirm()
{
qDebug() << fName << QTime::currentTime().toString();
} 
```

个人列表模型.h

```
class personListModel : public QAbstractListModel
{
  Q_OBJECT

public:
  explicit personListModel(QObject *parent = 0);
  int rowCount(const QModelIndex &parent = QModelIndex()) const;
  QVariant data(const QModelIndex &index, int role) const;
  bool setData(const QModelIndex &index, const QVariant &value, int role = Qt::EditRole);
  Qt::ItemFlags flags(const QModelIndex &index) const;
  //Custom functions
  void addPerson(testPerson &person);
private:
  QList<testPerson*> dataStore;
}; 
```

个人列表模型.cpp

```
personListModel::personListModel(QObject *parent): QAbstractListModel (parent)
{
}

int personListModel::rowCount(const QModelIndex &parent) const
{
  return dataStore.count();
}

QVariant personListModel::data(const QModelIndex &index, int role) const
{
  if(role != Qt::DisplayRole || role != Qt::EditRole){
    return QVariant();
  }

  if(index.column() == 0 && index.row() < dataStore.count() ){
    return QVariant(dataStore[index.row()]->getPerson());
  }else{
    return QVariant();
  }

}

bool personListModel::setData(const QModelIndex &index, const QVariant &value, int role)
{
  if (index.isValid() && role == Qt::EditRole) {

    testPerson *item = dataStore[index.row()];
    item->setPerson(value.toString());

    dataStore.at(index.row())->setPerson(value.toString());
    emit dataChanged(index,index);
    return true;
 }
 return false;
}

Qt::ItemFlags personListModel::flags(const QModelIndex &index) const
{
  if(!index.isValid()){
    return Qt::ItemIsEnabled;
  }
  return Qt::ItemIsSelectable | Qt::ItemIsEditable | Qt::ItemIsEnabled;
}

void personListModel::addPerson(testPerson &person)
{
  beginInsertRows(QModelIndex(),dataStore.count(), dataStore.count());
  dataStore.append(&person);
  endInsertRows();
} 
```

下面是 mainWindow.cpp 中的一些测试代码

```
// Inc needed files 

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
  ui->setupUi(this);

  //Test model
  personListModel *model = new personListModel(this);
  testPerson one("Adam Smith",this);
  testPerson two("John Smith",this);
  model->addPerson(one);
  model->addPerson(two);
  ui->listView->setModel(model);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:11:19.067

如果您提供的代码是正确的，那么您就是`testPerson`在堆栈上声明您的对象，然后将它们作为指针存储在模型中。令人惊讶的是，这并没有导致崩溃。

# jsp - 如何在 textarea 或 jsp 上打印 Stringbuffer 内容？

> ID：14961578
> 
> 赞同：0
> 
> 时间：2013-02-19T15:51:10.823
> 
> 标签：jsp

setvlet 中的代码：

request.setAttribute("数据", sb); request.getRequestDispatcher("/viewLogs.jsp").forward(request, response); 这里 sb 是字符串缓冲区。当我用来在控​​制台上打印 sb 时，它的打印效果很好。但是当我尝试在 viewLogs.jsp 中使用 ${data} 打印相同的内容时，它没有正确打印（字符串缓冲区也有 XML 数据。jsp 页面上没有打印标签） .但是相同的字符串缓冲区在控制台上完美打印。请建议我如何向用户正确显示字符串缓冲区内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:59:22.133

在 JSP 中打印：

`<% out.append( sb.toString() ); %>`

但首先您必须将 sb 中的内容转换为正确的 HTML：

*   ">" 变成 ">"；

*   “<”变成“<”；

    ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:24:28.123

它已成功打印。右键单击并*查看源代码*。都在里面！它只是无法识别为有效的 HTML，因此浏览器在演示过程中会忽略它。

如果您的意图是将 XML 内容显示为纯文本，那么您应该使用 XML 转义字符，否则这些字符将被解释为 HTML，例如`<`并`>`指示 HTML 标记的开始和结束。

规范的解决方案是为此使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:out>`。

```
<c:out value="${data}" /> 
```

如果您想保留格式（空格等），请将其放入`<pre>`.

```
<pre><c:out value="${data}" /></pre> 
```

`white-space:pre`或者，在父元素上应用 CSS 。

```
<div class="preformatted"><c:out value="${data}" /></div> 
```

和

```
.preformatted {
    white-space: pre;
} 
```

# android - 使用 TextWatcher 侦听器显示已编辑的文本

> ID：14961579
> 
> 赞同：1
> 
> 时间：2013-02-19T15:51:14.193
> 
> 标签：android, textview, android-edittext, textwatcher

我是 Android 开发的新手（我正在上课），所以请耐心等待。

我必须使用 TextWatcher 将 EditText 小部件中的已编辑文本显示到 TextView 小部件中。

例如，如果最初输入的内容被编辑（例如，如果用户输入“Hoozledoofer”，然后突出显示“zledoof”，最后在其位置输入“v”），我必须首先以以下格式输出更改：

```
'zledoof' => 'v' 
```

这显示在 TextView 的第一行。然后，第二行将显示现在存在于 EditText 小部件中的全文：

```
Hoover 
```

我不知道该怎么做。我知道我需要在 afterTextChanged 方法中输出结果。如何保存已完成的内容，并且仍然保持输出输入的内容？有什么建议吗？

下面是课堂上给出的 TextWatcher 示例：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    txtEdit = (EditText) findViewById(R.id.editText1);
    viewText = (TextView) findViewById(R.id.text);

     txtEdit.addTextChangedListener (new TextWatcher() {

          public void beforeTextChanged(CharSequence s, int start, int count, int after) {
              Log.i("TC", "beforeTC " + s.toString() + " "
                      + s.subSequence(start, start + count).toString());
          }

          public void onTextChanged(CharSequence s, int start, int before, int count) {
              Log.i("TC", "onTC " + s.toString() + " "
                      + s.subSequence(start, start + count).toString());
          }

          public void afterTextChanged(Editable s) {
              Log.i("TC", "afterTC " + s.toString());
          }
     });
} 
```

这是我尝试过的提供预期最终结果的方法，但它确实会继续显示所做的每一个小编辑。这可能不是问题，可能对教授有用：

```
 txtEdit.addTextChangedListener (new TextWatcher() {

         String changed, newStr, edit;

          public void beforeTextChanged(CharSequence s, int start, int count, int after) {
              changed = s.subSequence(start, start + count).toString();

              //Log.i("TC", "beforeTC " + s.toString() + " "
                      //+ s.subSequence(start, start + count).toString());
          }

          public void onTextChanged(CharSequence s, int start, int before, int count) {
              newStr = s.toString();
              edit = s.subSequence(start, start + count).toString();

              //Log.i("TC", "onTC " + s.toString() + " "
                      //+ s.subSequence(start, start + count).toString());
          }

          public void afterTextChanged(Editable s) {
              viewText.setText(changed + " => " + edit + "\n" + newStr);

              //Log.i("TC", "afterTC " + s.toString());

          }
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:32:46.693

由于这是作业，我不会给你答案。（你的老师做了很多忙碌的工作，给你一个很好的例子。）但我会给你一个提示：

> 例如，如果最初输入的内容被编辑（例如，如果用户输入“Hoozledoofer”，然后突出显示“zledoof”，最后在其位置输入“v”），我必须首先以格式输出更改：`'zledoof' => 'v'`这是显示在 TextView 的第一行。

注意`before`和`after`相对`count`。这将帮助您了解用户何时添加或减少文本。

第二部分很简单，您似乎已经有了答案：

> 然后，第二行将显示现在存在于 EditText 小部件中的全文：`Hoover`
> 我知道我需要在 afterTextChanged 方法中输出结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:27:21.977

另一件需要非常小心的事情是不要更改 beforeTextChanged 或 onTextChanged 回调中的 CharSequence，并注意如果在 afterTextChanged 回调中更改 CharSequence 将导致对一系列回调的再次调用（无限递归是如果不小心可能）。

TextWatcher 文档：http: [//developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

编辑：我认为您不必担心这一点，以为您最初将其写入 EditText，但我现在看到您正在将更改写入 TextView，保留在后面仍然没有什么坏处你的想法。

# profile - OCL 约束 UML Profile Rational Software Architect

> ID：14961580
> 
> 赞同：0
> 
> 时间：2013-02-19T15:51:16.667
> 
> 标签：profile, ocl, stereotype

我有一个 UML 配置文件，我需要向我的 ModeBehaviour 原型添加一个约束，它是 StateMachine 的扩展。

约束：OwnedStates 必须定型为 Mode，Owned Transitions 必须定型为 ModeTransition

对于约束的第一部分，我认为它可能以：self.submachine 开头，因为这将引用 ModeBehaviour 的拥有状态？从那里我不知道如何查看这些状态是否是模式的刻板印象。

任何方向都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:15:56.183

要找出元素是否附加了特定的构造型，只需使用该`getAppliedStereotype`函数。例如，如果您想从*MyProfile配置文件中找出***self**元素是否具有*MyStereotype 构造*型，请使用

 *`self.getAppliedStereotype("MyProfile::MyStereotype") <> null`

使其适应您的特定用途留作练习:)*

# ios - CADisplayLink 在 iOS5.1 上运行较低的帧率

> ID：14961581
> 
> 赞同：6
> 
> 时间：2013-02-19T15:51:19.163
> 
> 标签：ios, objective-c, cadisplaylink

我`CADisplayLink`在我的 iPhone 应用程序中使用。

以下是相关代码：

```
SMPTELink = [CADisplayLink displayLinkWithTarget:self selector:@selector(onTick)];
SMPTELink.frameInterval = 2;//30fps 60/n = fps
[SMPTELink addToRunLoop:[NSRunLoop mainRunLoop]
                    forMode:NSDefaultRunLoopMode]; 
```

`30FPS`因此每帧（1/30 秒）调用 onTick 。这在`iOS6`+ 上效果很好 - 正是我需要的。但是，当我在运行 iOS5.1 的 iPhone 4s 上运行我的应用程序时，onTick 方法的运行速度比 iOS6 对应的方法稍慢。几乎就像它正在运行它一样`29FPS`。一点点之后，就和iOS6 iPhone 5不同步了。

onTick 方法中的代码并不耗时（这是我的想法之一……），它不是 iPhone，因为该应用程序在运行 iOS6 的 iPhone 4s 上运行良好。

中的功能是否`CADisplayLink`不同`iOS5.1`？任何可能的解决方法/解决方案？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T16:28:45.497

我无法谈论 iOS 5.xv 6.x 的差异，但是当我使用 时`CADisplayLink`，我从来没有在每次迭代时对诸如“移动 x 像素/点”之类的东西进行硬编码，而是查看`timestamp`（或更准确地说，增量在我的初始值`timestamp`和当前值之间`timestamp`）并根据经过的时间而不是经过的帧数来计算位置。这样，帧速率不会影响运动的速度，而只会影响运动的平滑度。（而且 30 和 29 之间的差异可能无法区分。）

引用[CADisplayLink 类参考](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)：

> 一旦显示链接与运行循环相关联，当屏幕内容需要更新时，就会调用目标上的选择器。目标可以读取显示链接的[时间戳](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html#//apple_ref/occ/instp/CADisplayLink/timestamp)属性来检索上一帧的显示时间。例如，显示电影的应用程序可能会使用时间戳来计算接下来将显示哪个视频帧。执行自己的动画的应用程序可能会使用时间戳来确定显示的对象在即将到来的帧中出现的位置和方式。持续[时间](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html#//apple_ref/occ/instp/CADisplayLink/duration)属性提供帧之间的时间量。您可以在应用程序中使用此值来计算显示的帧速率、显示下一帧的大致时间，并调整绘图行为以便及时准备好下一帧以显示。

* * *

作为一个随机示例，[这里](https://stackoverflow.com/questions/14571148/ios-animate-transformation-from-a-line-to-a-bezier-curve/14571854#14571854)我`UIBezierPath`使用经过的秒数作为参数来制作动画。

或者，如果您正在处理一系列`UIImage`帧，则可以按如下方式计算帧号：

```
@property (nonatomic) CFTimeInterval firstTimestamp;

- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    if (!self.firstTimestamp)
        self.firstTimestamp = displayLink.timestamp;

    CFTimeInterval elapsed = (displayLink.timestamp - self.firstTimestamp);

    NSInteger frameNumber = (NSInteger)(elapsed * kFramesPerSecond) % kMaxNumberOfFrames;

    // now do whatever you want with this frame number
} 
```

或者，更好的是，为了避免丢失帧的风险，继续让它以 60 fps 运行，然后确定帧是否需要更新，这样你就可以降低丢帧的风险。

```
- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    if (!self.firstTimestamp)
        self.firstTimestamp = displayLink.timestamp;

    CFTimeInterval elapsed = (displayLink.timestamp - self.firstTimestamp);

    NSInteger frameNumber = (NSInteger)(elapsed * kFramesPerSecond) % kMaxNumberOfFrames;

    if (frameNumber != self.lastFrame)
    {
        // do whatever you want with this frame number

        ... 

        // now update the "lastFrame" number property

        self.lastFrame = frameNumber;
    }
} 
```

* * *

但通常，根本不需要帧号。例如，要将 a 移动`UIView`一个圆圈，您可以执行以下操作：

```
- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    if (!self.firstTimestamp)
        self.firstTimestamp = displayLink.timestamp;

    CFTimeInterval elapsed = (displayLink.timestamp - self.firstTimestamp);

    self.animatedView.center = [self centerAtElapsed:elapsed];
}

- (CGPoint)centerAtElapsed:(CFTimeInterval)elapsed
{
    CGFloat radius = self.view.bounds.size.width / 2.0;

    return CGPointMake(radius + sin(elapsed) * radius,
                       radius + cos(elapsed) * radius);
} 
```

* * *

顺便说一句，如果您使用 Instruments 来测量帧速率，它看起来可能比在设备上实际运行时要慢。对于马特的评论，为了获得准确的帧速率，您应该在具有发布版本的实际设备上以编程方式对其进行测量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T19:14:06.357

Rob's answer is exactly right. You've no business worrying about the frame rate of CADisplayLink; in fact, you mustn't even expect that the timer will fire with anything like regularity. Your job is to divide up the desired animation in accordance with the desired time scale, and draw the frame you actually get each time the timer fires by adding up the accumulated timestamps.

Here is sample code from my book:

```
if (self->_timestamp < 0.01) { // pick up and store first timestamp
    self->_timestamp = sender.timestamp;
    self->_frame = 0.0;
} else { // calculate frame
    self->_frame = sender.timestamp - self->_timestamp;
}
sender.paused = YES; // defend against frame loss

[_tran setValue:@(self->_frame) forKey:@"inputTime"];
CGImageRef moi3 = [self->_con createCGImage:_tran.outputImage
                                   fromRect:_moiextent];
self->_iv.image = [UIImage imageWithCGImage:moi3];
CGImageRelease(moi3);

if (self->_frame > 1.0) {
    [sender invalidate];
    self->_frame = 0.0;
    self->_timestamp = 0.0;
}
sender.paused = NO; 
```

In that code, the `_frame` value runs between 0 (we are just starting the animation) and 1 (we have finished the animation), and in the middle I just do whatever this particular situation requires to draw that frame. To make the animation take longer or shorter, just multiply a scale factor when setting the `_frame` ivar.

Also note that you must never test in the Simulator, as the results are utterly meaningless. Only the device runs CADisplayLink properly.

(Example comes from here: [http://www.apeth.com/iOSBook/ch17.html#_cifilter_transitions](http://www.apeth.com/iOSBook/ch17.html#_cifilter_transitions))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-14T07:47:34.480

**其他答案的基本 Swift 版本（减去动画代码）**

```
class BasicStopwatch {

    var timer: CADisplayLink!
    var firstTimestamp: CFTimeInterval!
    var elapsedTime: TimeInterval = 0

    let formatter: DateFormatter = {
        let df = DateFormatter()
        df.dateFormat = "mm:ss.SS"
        return df
    }()

    func begin() {
        timer = CADisplayLink(target: self, selector: #selector(tick))
        timer.preferredFramesPerSecond = 10 // adjust as needed
        timer.add(to: .main, forMode: .common)
    }

    @objc func tick() {
        if (self.firstTimestamp == nil) {
            print("Set first timestamp")
            self.firstTimestamp = timer!.timestamp
            return
        }

        elapsedTime = timer.timestamp - firstTimestamp
        /// Print raw elapsed time
        // print(elapsedTime)

        /// print elapsed time
        print(elapsedTimeAsString())

        /// If need to track frames
        // let totalFrames: Double = 20
        // let frameNumber = (elapsedTime * Double(timer!.preferredFramesPerSecond)).truncatingRemainder(dividingBy: totalFrames)
        // print("Frame ", frameNumber)
    }

    func elapsedTimeAsString() -> String {
        return formatter.string(from: Date(timeIntervalSinceReferenceDate: elapsedTime))
    }
} 
```

**用法**

```
let watch = BasicStopwatch()
watch.begin() 
```

# jquery - 奇怪的 JQuery $.post 行为

> ID：14961586
> 
> 赞同：0
> 
> 时间：2013-02-19T15:51:34.317
> 
> 标签：jquery, post, .post

我在 jquery 中学习 $.post，经过几个小时后，我很高兴它起作用了。

问题是它只适用于页面的第一次执行，或者如果我手动刷新页面。

是否有可能 location.reload(); 工作不正常，或者 location.reload() 在这里不正确？

任何帮助表示赞赏。我死定了。

这是我的代码：

```
<script type="application/x-javascript">

    $("a#edit").click(function(e){
        e.preventDefault();
        var id;
        id = $(this).attr('sid');
        $.modal.prompt('Editing Source ID: ' + id,
            function(){
                $.post("<?php echo $_SERVER['PHP_SELF']; ?>", { 
                                        up: $('#prompt-value').attr('value'),
                                        sid: id                                         
                                        })
                notify('Notification', 'Source ' + id + ' changed to: ' + $('#prompt-value').attr('value'), {
                    system: true,
                    icon: 'img/demo/icon.png',
                    iconOutside: false
                });
                location.reload();
             });
    });

</script> 
```

我完全不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:04:59.943

在附加点击事件之前尝试添加一个 console.log($("a#edit")) 。

此代码令人困惑，因为您似乎将 AJAX 发布到当前文件，然后刷新，有点使 ajax 发布无用，还不如发布到自己。

大多数 jquery 函数是异步的，如果通知应该只在成功时执行，则使用成功回调或延迟完成。

```
$.post("<?php echo $_SERVER['PHP_SELF']; ?>", 
    { 
        up: $('#prompt-value').attr('value'),
        sid: id                                         
    }        
).done(function (data) {
    // Success, read response data, send notification if applicable and use 
    // the response data to change the current page without having to refresh
}).fail(function () {
    // Failure on the request, handle it
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:53:57.043

采用

```
 $("a#edit").live('click',function(e){
 ...
 }); 
```

jQuery 1.4.+ 我认为

# jquery - 单击提交时清除输入

> ID：14961595
> 
> 赞同：0
> 
> 时间：2013-02-19T15:51:58.663
> 
> 标签：jquery

我有一个输入字段和一个按钮。当我单击按钮时，输入字段应自行清除。我的 HTML 是：

```
<input type="text" id="search_number" />
<button id="submit">Submit</button> 
```

js是：

```
$('#submit').click(function(){
     $('#search_number').value = '';
}); 
```

它不起作用..谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:53:09.197

你必须这样做：

```
$('#search_number').val(""); 
```

1.  您的选择器没有 # 作为 id
2.  您不能`.value`与 jQuery 一起使用，但是`.val()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T15:53:15.967

您需要正确地指定选择器为`search_number`标识符（通过以`#`(hash) 为前缀），并`val()`改为使用（如果未指定值，则将*获取值，并将值**设置*为 one is）：

```
$("#search_number").val(""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T15:53:37.400

使用[val](http://api.jquery.com/val/)函数设置值。传入一个空字符串将清除该值：

```
$('#submit').click(function(){
     $('#search_number').val('');
}); 
```

此外，search_number 的选择器中缺少哈希 (#)

工作示例 - [http://jsbin.com/ilutar/1/](http://jsbin.com/ilutar/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T15:53:26.163

它的

```
$('#search_number').val(''); 
```

# python - isinstance(x, list) 迭代包含字符串和列表的列表时

> ID：14961601
> 
> 赞同：5
> 
> 时间：2013-02-19T15:52:09.020
> 
> 标签：python, collections, iterable

在[Itating nested list inside-out 中](https://stackoverflow.com/questions/14960380/iterating-nested-list-inside-out/14960687#comment21002419_14960687)，有人告诉我“类型检查不是 Pythonic”。一般来说，这是真的：我们只想查看界面（duck-typing）而不是特定类型。

该问题询问表单的嵌套列表`['a', ['c', ['e'], 'd'], 'b']`，我们特别考虑字符串原子（不可迭代）。所以，我们不能使用毯子`collections.Iterable`，但另一方面`isinstance(x, list)`看起来确实有点老套。

我的回答是

```
def traverse(l):
    for x in l:
        if isinstance(x, list):
            traverse(x)
    callback(l) 
```

有什么更好的方法？或者`isinstance`这里可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T16:00:03.513

我认为您的答案在这里还可以-尽管我可能会将其更改为

```
if not isinstance(x,basestring):
   ... 
```

根据预期的输入使其更容易接受。最终，您需要一些问题，`isinstance`这就是它仍然存在于语言中的原因。

话虽如此，关于这个问题的非pythonic是数据结构。在python中，如果一个问题看起来真的很难，这可能意味着你以错误的方式存储数据......（当然，我意识到你无法控制另一个问题的数据结构的原始海报是什么； -)。

基本上，我想我的观点是，`isinstance`当你的同事/某个图书馆作家给你柠檬时，你需要制作柠檬水——否则你会尽可能避免**。**

# meteor - 在服务器端捕获用户断开连接

> ID：14961602
> 
> 赞同：2
> 
> 时间：2013-02-19T15:52:13.773
> 
> 标签：meteor

是否有可能在服务器端捕获非活动用户会话？我构建了一个具有两个间隔的解决方案，但这使我的页面每 20 秒更新一次，因为客户端每 20 秒推送他的在线状态。我知道 Meteor.logout([callback]) 功能，但我也必须检测客户端关闭浏览器窗口而不注销的天气。我找到了[流星客户端用户会话演示](https://github.com/possibilities/meteor-client-sessions)，但这没有我需要的功能。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T22:53:22.380

我想出了一种使用 websocket 捕获断开连接的方法。这也不使用轮询来保持状态在线。基本上，您制作任意发布并在客户端订阅它：

```
Meteor.publish "statusWatcher", ->
  id = @_session.userId
  @_session.socket.on "close", Meteor.bindEnvironment( ->
    Meteor.users.update id,
      $set: {'profile.online': false} 
```

与往常一样，这会受到 Meteor API 更改的影响，但您可以将其安装为智能包，并且社区可以使其保持最新：

[https://github.com/mizzao/meteor-user-status](https://github.com/mizzao/meteor-user-status)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:12:14.687

查看[`meteor-profile-online`](https://github.com/erundook/meteor-profile-online)软件包（您需要为此安装[meteorite](https://github.com/oortcloud/meteorite/)）：

> Profile.online 是一个流星智能包，提供一种方便的方式来公开帐户在线状态。

它将`profile.online`属性添加到用户对象，该对象由您可以配置的 keepalive 切换。

它使用您在问题（轮询）中提到的相同方法，但这确实是唯一的方法。至少这个包将它很好地集成到了 Meteor 中`Meteor.keepalive`。

# php - 将 mysql 隧道传输到 appfog

> ID：14961603
> 
> 赞同：0
> 
> 时间：2013-02-19T15:52:14.750
> 
> 标签：php, mysql, tunnel, appfog

我正在使用开发本地网站；PHP 5.4.6 阿帕奇 2.4.2 MySQL 5.5.27

目前我正在实现一个简单的登录脚本，带有一个小型数据库。在本地它工作正常。当我

> af 更新 kirka “%webdev%”
> 
> 隧道

， 接着

> 源mysql_dump.sql；

一切似乎都没有错误。

然后我挂钩我的环境变量以使用在网络服务器上建立连接`getenv("VCAP_SERVICES")`

然后我在 appfog 上托管的网站开始显示与数据库的连接，但它好像数据库是空的，或者无法从中选择任何内容。当我重做时`source mysql_dump.sql;`，它告诉我它必须删除 7 行，然后重新添加它们。意味着数据库不为空。

为什么我的应用程序的 appfog 实例无法从数据库中获取信息？有人有这方面的经验吗？

本地主机上的图片；[http://img811.imageshack.us/img811/7818/55079155.png](http://img811.imageshack.us/img811/7818/55079155.png)

图片在appfog；[http://img707.imageshack.us/img707/2983/94724810.png](http://img707.imageshack.us/img707/2983/94724810.png)

github上的源代码；[https://github.com/kirka121/CST8285_Webdev](https://github.com/kirka121/CST8285_Webdev)

期待回复的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:45:46.420

我想出了答案。

我在用

```
 define("TBL_USERS", "users");
 define("TBL_ACTIVE_USERS",  "active_users");
 define("TBL_ACTIVE_GUESTS", "active_guests");
 define("TBL_BANNED_USERS",  "banned_users");
 define("TBL_SETTINGS",  "settings"); 
```

在数据库中选择我的表。

我的开发（本地）在 Windows 上，我的测试（网络主机）在 unix 上。并且 unix 区分大小写。我在实际数据库中的表以大写字母开头。因此它在unix上无法识别它们，但在windows上却可以。问题已解决。

# eclipse - 获取 IFile 的行分隔符

> ID：14961604
> 
> 赞同：2
> 
> 时间：2013-02-19T15:52:15.923
> 
> 标签：eclipse, newline, separator

我正在寻找一种方法来获取 IFile 对象的行分隔符。我当前的实现弄乱了在其他系统上编写的文件的换行符，但我严重依赖正确的偏移量和行号。

```
Scanner scanner = new Scanner(file.getContents());
StringBuilder stringBuilder = new StringBuilder();

while (scanner.hasNextLine()) {
   final String nextLine = scanner.nextLine();
   stringBuilder.append(nextLine + System.lineSeparator());
}
scanner.close();

Document document = new Document();
document.set(stringBuilder.toString(), document.getModificationStamp()); 
```

任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:25:24.533

见`org.eclipse.core.filebuffers.manipulation.ConvertLineDelimitersOperation.computeTextEdit(ITextFileBuffer, IProgressMonitor)`。它使用该`IDocument.getLineDelimiter(int)`方法来计算文件中的行分隔符。

您可能正在查看以下内容：

```
ITextFileBufferManager manager = FileBuffersPlugin.getFileBufferManager();
ITextFileBuffer buffer = manager.getTextFileBuffer(file.getLocation());
IDocument document = buffer.getDocument();
int lineCount = document.getNumberOfLines();
for(int i = 0; i < lineCount; i++) {
    String delimiter = document.getLineDelimiter(i);
    // your work here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:11:38.450

我想分享一个我偶然发现的解决方案：

```
InputStream stream = file.getContents();
Scanner s = new Scanner(stream);
s.useDelimiter("\\A");

String content = s.hasNext() ? s.next() : null;

try {
    stream.close();
s.close();
 } catch (IOException e) {      
 }

 if (content == null) {
return null;
 }

 IDocument document = new Document();
 document.set(content); 
```

# java - 使用 MySQL 的 NetBeans 中的 SQL 语法错误

> ID：14961605
> 
> 赞同：3
> 
> 时间：2013-02-19T15:52:17.027
> 
> 标签：java, mysql, netbeans

我正在浏览 NetBeans 电子商务教程，但遇到了以下问题。

这是[教程部分](http://netbeans.org/kb/docs/javaee/ecommerce/connect-db.html)。我具体是在**将示例数据添加到数据库**中。当我执行这个简单的命令时：**select * from category;** 我得到错误

```
Error code 1064, SQL state 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OPTION SQL_SELECT_LIMIT=DEFAULT' at line 1
Line 1, column 1 
```

尽管表不是空集，但不显示此选择的值。

我正在使用执行命令选项在数据库资源管理器模块内的 NetBeans IDE 7.3 RC2 中执行此命令。

我在想问题是否出在我在数据库中使用的编码中。我使用了 utf8 - utf8_unicode_ci 然后我将其更改为 utf8 默认排序规则，但没有任何更改。

我使用 MySQL 5.6.10 并通过 MySQL Workbench 管理它。

非常感谢您的回答:)

**编辑和部分解决方案：** 完成我的答案并部分回答。我不知道为什么 netbeans 中的 SQL 脚本编辑器不起作用。但最后我成功创建了连接池和数据源。通过 JSP 页面中的数据源进行的所有查询都可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:16:46.113

看起来 netbeans 连接器正在使用已在 MySQL 5.6 中删除的已弃用命令。找到了这个讨论，他们似乎找到了答案：

[http://netbeans.org/bugzilla/show_bug.cgi?id=224260](http://netbeans.org/bugzilla/show_bug.cgi?id=224260)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:30:06.103

这是 mysql 驱动程序的错误。在 netbeans 中，将 mysql 驱动程序的 jar 更改为最新版本。例如，对于 mysql-connector-java-5.1.24，NetBeans 中的“查看数据”命令可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T15:06:17.503

netbeans 在 mysql cmd 中以不同的方式评估该字段，如果您键入此语法说插入用户（'username'，'password'）值（'xyz'，'abc'）；它可以很好地工作，但在 netbeans 中，表和字段名称不是用单引号而是用 `` 这种类型的引号表示，所以这在 netbeans 中插入`user`( `username`, `password`) 值（'xyz'，'abc'）非常好；其中像 xyz 和 abc 这样的字符串用单引号表示......

# vhdl - ghdl 浮点异常 8

> ID：14961607
> 
> 赞同：0
> 
> 时间：2013-02-19T15:52:21.580
> 
> 标签：vhdl, floating-point-exceptions, ghdl

我正在尝试编写具有 32 位地址的 SRAM，并启用字节通道写入。但是，当我尝试访问（读取或写入）大于 x1F 的地址时，在使用 GHDL 编译时出现“浮点异常 8”。以下是一些代码片段：

```
entity data_mem is

port(addr : in std_logic_vector(31 downto 0);
   enable : in std_logic;
   rd : in std_logic;
   wr : in std_logic;
   we : in std_logic_vector( 3 downto 0);
   din : in std_logic_vector( 31 downto 0);
   -- outputs 
   dout : out std_logic_vector(31 downto 0);
   ack : out std_logic
   );
end data_mem;

architecture structure of data_mem is

type mem_type is array (31 downto 0) of std_logic_vector(31 downto 0);
signal mem : mem_type := ((others => (others => '0'))); -- initialize to zero

begin

mem_write : process(addr,enable, wr, we, din)
begin
  if (enable = '1') then
    if (wr = '1') then
      if (we(0) = '1') then
        mem(to_integer(signed(addr)))(7 downto 0) <= din(7 downto 0) after 2 ns;
      end if; ... 
```

因此，当我在测试台中将地址设置为 x0000_001F 或更低时，它会编译，但当我输入 x0000_0020 或更高时则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:14:06.833

您正在使用`signed`地址转换。相当奇怪的地址类型。因为您有 32 个位置在内存中存储数据，所以您只使用 6 位 (2^5=32) 作为地址。保留 时`signed`，第 5 位是符号位。0x1ff -> 正地址：好的。0x20 -> 负地址：错误...

我想改变`signed`to `unsigned`(from ieee.numeric_std) 将解决问题。

# windows-7 - 无法在 Visual Studio 2012 中创建 Windows Azure 项目

> ID：14961617
> 
> 赞同：0
> 
> 时间：2013-02-19T15:52:38.723
> 
> 标签：windows-7, azure, visual-studio-2012, .net-4.5

在 VS 2012 中创建云项目时，我得到一个包含 HTML 页面的项目，提示我安装适用于 .NET 的 Windows Azure SDK。按下按钮将我发送到此页面：

[http://go.microsoft.com/fwlink/?LinkID=254364&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=254364&clcid=0x409)

我按照在那里找到的链接安装了适用于 Visual Studio 2012 的 SDK。

之后我回到 Visual Studio 2012 并创建了另一个云项目并得到了完全相同的结果......另一个页面提示安装 SDK......

我已经安装、重新安装、卸载并重新安装了适用于 .NET 的 Windows Azure SDK，但没有任何区别。

任何人都知道如何使 Visual Studio 2012 与 Azure 一起工作？

这是在装有 Visual Studio 2012 和 11.0.50727 版本的 Windows Azure SDK for .NET (VS2012) 的 Windows 7 机器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:25:50.610

Visual Studio 2012 与 Azure 一起工作。我们有同样的问题。对我们有用的是这个

1.  卸载所有 Windows Azure 工具和库（以及任何旧版本）。
2.  卸载 Visual Studio 2012
3.  重新安装 Visual Studio 2012
4.  安装 Azure 工具和库

# javascript - 无法使用 GMapPanel 加载谷歌地图 - EXTJS 4

> ID：14961620
> 
> 赞同：1
> 
> 时间：2013-02-19T15:52:42.173
> 
> 标签：javascript, ajax, google-maps, extjs, extjs4

```
Ext.Loader.setPath('Ext.ux', '../ux');
Ext.require([
    'Ext.tree.*',
    'Ext.data.*',
    'Ext.window.MessageBox',
    'Ext.window.*',
    'Ext.ux.GMapPanel'
]);

var map = new Ext.ux.GMapPanel({
            xtype: 'gmappanel',
            region: 'center',
            id:  'mygooglemap',
            zoomLevel: 3,
            gmapType: 'map',
            setCenter: {
                'lat': 37.4419,
                'lng': -122.1419
            }
        });

    var layout = Ext.create('Ext.panel.Panel', {
            //renderTo: 'layout',
            width: window.innerWidth,
            height: window.innerHeight,
            //title: 'Border Layout', //no title will be blank
            layout: 'border',
            items: [{
                title: 'Message List',
                region: 'south',     // position for region
                xtype: 'panel',
                height: 100,
                split: true,         // enable resizing
                collapsible: true,
                margins: '0 5 5 5',
                collapsed: true
            },tree,map],
            renderTo: Ext.getBody() //get the body and display Layout at there
        }); 
```

## 问题

全部加载成功，带有名称树的树形面板也加载成功，只是地图 GMapPanel 无法显示谷歌地图，为什么？请帮助我，谢谢。我不知道

更新我截取的截图，页面应该加载谷歌地图，但是是空白的 ![在此处输入图像描述](../Images/f40e2e04b56a53fd9ac9ce06fda2f417.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T15:08:20.113

确保您已添加

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&sensor=false"></script> 
```

在你的 index.html 上，如果你已经完成了，如果你使用调试浏览器工具来查找是否有一些你没有发布的错误将会很有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:54:06.567

在创建地图时，您可能希望在侧 setCenter 中添加标记对象。

修改您的地图代码如下

```
var map = new Ext.ux.GMapPanel({
        xtype: 'gmappanel',
        region: 'center',
        id:  'mygooglemap',
        zoomLevel: 3,
        gmapType: 'map',
        mapConfOpts:['enableScrollWheelZoom','enableDoubleClickZoom','enableDragging'],
        mapControls: ['GSmallMapControl','GMapTypeControl','NonExistantControl'],   
        setCenter: {
            'lat': 37.4419,
            'lng': -122.1419,
            marker:{ title: 'Palo Alto'}
        }
    }); 
```

# c# - 如何使用 c# Word Interop 清除 MS Office 剪贴板

> ID：14961621
> 
> 赞同：5
> 
> 时间：2013-02-19T15:52:43.160
> 
> 标签：c#, ms-word, clipboard, office-interop

我正在使用 Word Interop 来复制整个文档以执行一些逻辑。完成后，我想清除 MS Office 剪贴板。这似乎是一项简单的任务......但我不知道该怎么做。

```
var that = document.ActiveWindow.Selection;
that.WholeStory();
that.Copy();
// Do some logic with the selection
...
// Now I want to clear the MS Office clipboard. 
```

**注 1：** Clipboard.Clear() 只清除系统范围的剪贴板，但不清除 MS Office 的剪贴板。

**注意 2：**我意识到复制文档并不是使用 Document 对象的最佳方式，一旦我弄清楚*这个*问题，我将致力于更好的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-16T06:25:47.457

Office 剪贴板不向开发人员公开 - 无法清除它，或在其上专门放置任何内容，或“读取”其中包含的内容。

复制 Word 文档是否有“更好的方法”在很大程度上取决于您想要/需要对内容做什么......

# c# - 将 IQueryable 列表转换为通用列表？

> ID：14961622
> 
> 赞同：3
> 
> 时间：2013-02-19T15:52:44.300
> 
> 标签：c#, asp.net-mvc, linq-to-entities

我正在尝试调用`GetScanningLogOnSettings()`，它查询`ScanningDepartments`表以获取部门，然后创建 的实例`ApplicationLogOnModel`，将查询的结果分配给 中的变量`ApplicationLogOnModel`，并返回结果。

```
private ApplicationLogOnModel GetScanningLogOnSettings()
   {
       var mesEntity = new MESEntities();
       var departments = from dept in mesEntity.ScanningDepartments
                         select dept.Department.ToList();

       ApplicationLogOnModel depts = new ApplicationLogOnModel()
       {
           Department = departments
       };

       return depts;
   } 
```

它给了我：

> “不能将类型隐式转换 `'System.Linq.IQueryable<System.Collections.Generic.List<char>>`为 `'System.Collections.Generic.List<Models.Department>'`

尝试转换为列表，但遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T15:53:48.363

您缺少一些括号：

```
var departments = (from dept in mesEntity.ScanningDepartments
                   select dept.Department).ToList(); 
```

您的代码调用`ToList()`而`dept.Department`不是整个查询。

# sql-server - 用于屏蔽字符集的 mssql 优雅方式

> ID：14961633
> 
> 赞同：3
> 
> 时间：2013-02-19T15:53:25.183
> 
> 标签：sql-server, tsql

我想要一个固定数量的字符，比如说 10（xxxxxxxxxx），输入可能是一些 varchar，比如说（abcd）。在这种情况下，想要的输出是 xxxxxxabcd。

有什么优雅的方法可以避免循环 10 - len(abcd)？

**编辑**：

如果通过接受的答案而不是通过提出问题的方式观察到这个问题，则它可能是重复的。否则我将能够找到现有问题并且不会创建重复项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:57:32.733

诀窍是在输入前加上固定模式，然后抓住最右边的`n`字符：

```
RIGHT('xxxxxxxxxx' + 'abcd', 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:57:25.950

我过去用 SQL Server 做过类似的事情。希望能帮助到你。

```
select SUBSTRING('000000', 1,6-LEN('ABCD')) + 'ABCD' 
```

# iphone - 将对象的 NSMutableArray 保存到 pList

> ID：14961636
> 
> 赞同：1
> 
> 时间：2013-02-19T15:53:27.617
> 
> 标签：iphone, nsmutablearray, plist

当退出主页按钮或程序时，我试图将一组对象保存到 pList ，但没有任何反应，而且文件似乎永远不会被创建。

我究竟做错了什么？？？？

//ViewController.h

```
@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UIAlertViewDelegate>

@property (weak, nonatomic) IBOutlet UITableView *myTableView;
@property (strong, nonatomic) NSMutableArray *fieldBooks;

- (NSString *)pathOfFile;
- (void)applicationWillTerminate:(NSNotification *)notification;

@end 
```

//ViewController.m

```
#import "ViewController.h"

@interface ViewController ()
- (void)viewDidLoad
{
    NSString *filePath = [self pathOfFile];
    if ([[NSFileManager defaultManager]fileExistsAtPath:filePath])
    {
        NSArray *array = [[NSArray alloc]initWithContentsOfFile:filePath];
        fieldBooks = [array objectAtIndex:0];
    }

    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:app];

    [super viewDidLoad];

    //Instantiate our NSMutableArray

    //Set title
    self.title = @"FieldBooks";

    //Add edit button
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    //Add the add button
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject)];

    self.navigationItem.rightBarButtonItem = addButton;
}

- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];
    [myTableView setEditing:editing animated:animated];
}

- (void)insertNewObject
{
    UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Enter name" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];

    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [alert show];
}

- (NSString *)pathOfFile
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSString *documentsFolder = [paths objectAtIndex:0];

    return [documentsFolder stringByAppendingFormat:@"myFile.plist"];
}

- (void)applicationWillTerminate:(NSNotification *)notification
{
    NSMutableArray *array = [[NSMutableArray alloc]init];
    [array addObject:fieldBooks];
    [array writeToFile:[self pathOfFile] atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:58:31.223

```
NSDocumentationDirectory 
```

嗯。我确定你的意思是

```
NSDocumentDirectory 
```

反而。

# ruby-on-rails - 在助手内截断

> ID：14961638
> 
> 赞同：0
> 
> 时间：2013-02-19T15:53:31.470
> 
> 标签：ruby-on-rails

我在 Rails 3 中有以下助手：

```
def other_contact_info(shop = false)
  shop = shop ? shop : @shop
  email = mail_to(shop.email, "Email", :encode => "javascript") if shop.web.present?
  web = link_to(shop.web, truncate(shop.web), :target => "_blank") if shop.web.present?
  raw [shop.contact, email, web].select(&:present?).join(" · ")
end 
```

`truncate`什么都不做。我怎样才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:28:44.907

link_to 中的第二个参数是 URL。我认为您希望 truncate 位于第一个参数上，即显示给用户的链接文本：

```
link_to(truncate(shop.web), __URL__, :target => "_blank") 
```

# svn - 分析SVN磁盘空间

> ID：14961642
> 
> 赞同：4
> 
> 时间：2013-02-19T15:53:47.573
> 
> 标签：svn, analyzer, diskspace

我正在寻找一种工具，它可以帮助我分析存储库中不同文件的磁盘空间需求。

在我的存储库中有更大的二进制文件，有几个修订版。

因此，例如，我对存储库中单个二进制文件的所有这些修订使用多少空间感兴趣。AFAIK 无法通过“list”命令轻松获得此信息，因为我不知道 svn 的 deltification 的工作效率如何。

或者哪些是使用最多磁盘空间的文件/文件夹（不仅在头版本中，而且在所有版本中）

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T01:04:09.170

How much storage a node uses in Subversion is not as straightforward as it may seem. I'm going to talk about FSFS (and provide a hack of an answer for FSFS only) since that's almost certainly the filesystem implementation you're using. If you're using BDB things are a little different.

A node can use up storage 4 ways. The actual text or body of the node, properties, and by the nature of existing they use storage in the directory node noting their existence (directory nodes have a body that consists of a dictionary of their children and the representation of the child), and finally the overhead of the file system (when you commit to a file it bubbles up new representations of the directories up to the root, so in my opinion that use of storage should belong to the files that caused it to be needed to be stored).

The space taken by the file text and properties is relatively easy to come up with, the directory storage and the overhead and much harder. Yet, even for the relatively easy question of the file text, due to representation sharing, it's still slightly complicated. Representation sharing happens when two files are identical (the files could have the same name, or not it doesn't matter, the only thing that matters is their text is the same), we avoid storing it again.

**The following one-liner should answer the file text question for a single file.**

```
REPO=~/my-repo; FILE=/somebigfile; grep --recursive --no-filename --text --before-context 3 "cpath: $FILE" "$REPO/db/revs/"* | grep 'text:' | cut -d' ' -f 1-7 | sort -u | awk '{ DISK+=$4; if ($5 == 0) { FULL += $4 } else { FULL += $5 } } END { print DISK, FULL, FULL-DISK}' 
```

You'll need to change REPO to be set to the path to your repository and FILE to be the absolute path inside the repository to the file you want. This may not work perfectly since I may have forgotten some detail or another. But let me walk through how this works.

It greps every revision file for the the file you're looking for, asking for the preceding 3 lines as well as the match line. Then it removes everything except for the lines with text: on them (the lines detailing the text representation). We then exclude the last field (the uniqueifier; which is used to distinguish between shared representations). This allows us to limit it to unique representations we actually stored. We then sum the 5th and the 4th fields (which are the full text size and the representation size respectively). The full text size can be zero which means it's the same as the representation size (we stored the full text not a delta). Finally we print out the following fields: the size if we actually stored, the size of all versions of the file in full text, and finally the difference (negative number means we were less efficient than storing plaintext, positive means we saved that much space).

The fields of the text data are as follows:

```
revision offset_in_rev_file size_of_rep size_of_full_text md5 sha1 uniquifier 
```

Older repositories may not have all of these fields, that's fine.

Because I'm depending on the text field to be within 3 lines of the cpath field in the rev file (hey this is a quick hack) it may not work perfectly. You may want to run the first two grep commands without all the rest and then look at the revisions provided (they'll be the first set of numbers from the left). Compare that with the outout of `svn log` for the file. If all the revs are there then it should be accurate.

If I find the time I'll try to writeup a utility that does this the right way (using the SVN libraries) and that is more useful. Probably will include the storage used by properties and maybe include some of the other storage I mentioned above.

**TL;DR** It's not an easy question to answer. Use the shell script above to answer the storage of a file text. It'll give you output that is the space we used on disk, the space of the full text of all revisions, and then how much we saved (negative means we lost space due to delta overhead).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:40:13.003

可以转储存储库并过滤掉不需要的旧版本的二进制文件，然后将转储加载回同名的存储库。

您的工具/构建是什么样的？

要记住的另一件事 - 如果您曾经迁移到 git 或 hg，每次克隆时都会拉下这些二进制文件的整个历史记录......因此磁盘空间也成为客户端的问题。

# tiles - 有没有一种简单的方法来混合 spring-mobile 和 apache-tiles 来帮助使用公共元素？

> ID：14961648
> 
> 赞同：1
> 
> 时间：2013-02-19T15:54:01.220
> 
> 标签：tiles, spring-mobile

我刚刚使用 spring-mobile 和 apache-tiles 设置了一个新应用程序，我打算使用 tile 描述符来帮助我在目标平台之间重用视图组件。我想知道是否有人已经这样做了，以及构建应用程序的最佳方式。在过去使用瓷砖时，瓷砖描述符加起来非常快，将手机和平板电脑添加到混合中，我可以轻松地拥有两倍。

到目前为止，我`WEB-INF/layout/tiles.xml`在该区域有一个包含三种布局的主图块定义：

```
<tiles-definitions>
    <definition name="layoutStandard" template="/WEB-INF/layout/standard.jsp"/>
    <definition name="layoutMobile" template="/WEB-INF/layout/mobile.jsp"/>
    <definition name="layoutTablet" template="/WEB-INF/layout/tablet.jsp"/>
</tiles-definitions> 
```

然后查看定义。

```
<tiles-definitions>
    <definition name="home" extends="layoutStandard">
        <put-attribute name="body" value="/WEB-INF/views/home.jsp" />
    </definition>
    <definition name="home.mob" extends="layoutMobile">
        <put-attribute name="body" value="/WEB-INF/views/home.mob.jsp" />
    </definition>
    <definition name="home.tab" extends="layoutTablet">
        <put-attribute name="body" value="/WEB-INF/views/home.tab.jsp" />
    </definition>
</tiles-definitions> 
```

我已经进行了配置`mobileSuffix`和`tabletSuffix`反对`LiteDeviceDelegatingViewResolver`，所以我的控制器没有太多令人头疼的问题，`enableFallback`如果我不提供移动视图定义，它也可以很好地工作。

有没有办法可以对瓷砖配置做类似的事情？即如果视图名称以`.mob`然后使用`layoutMobile`而不是必须多次定义它结束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:32:23.910

我只是做了以下事情：

**添加到 applicationContext.xml**

```
<mvc:interceptors>
    <bean class="org.springframework.mobile.device.mvc.DeviceResolvingHandlerInterceptor" />
</mvc:interceptors> 
```

**添加到tilesDefinition.xml**

*nb 需要tiles.el.jar*

```
<definition name="store" templateExpression="/jsp/home${layout}.jsp">
...
<definition name="page" extends="store">
... 
```

**添加到控制器**

我为所有控制器使用一个方法，为我的所有页面类型获取默认数据。

```
if (!device.isNormal() || sitePreference.isMobile()) {
  if (!sitePreference.isNormal()) {
    layout = "-mobile";     
  }
} 
```

我只使用手机，但你应该可以调整它以适用于手机或平板电脑。

我希望这有帮助。

# matlab - matlab：我想将 cellarray 转换为数组？

> ID：14961651
> 
> 赞同：0
> 
> 时间：2013-02-19T15:54:12.950
> 
> 标签：matlab

转换？

```
array(1:3) = cellArray{1:3}; 
% this fails:  "Subscripted assignment dimension mismatch." 
```

## 注意：我知道如何循环执行此操作。寻找matlab直接路线。

%% cellArray 的内容 %%

```
K>> cellArray{1:3}

ans =

11

ans =

f0

ans =

05 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:58:30.620

使用[细胞垫。](http://www.mathworks.com/help/matlab/ref/cell2mat.html)

> `A = cell2mat(C)`将具有相同数据类型内容的元胞数组转换`C`为单个数组，`A`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:58:50.427

如果所有单元格都属于同一类型，并且共享相似的第一维，则

```
array = [cellArray{:}]; 
```

应该管用

# sql - Coldfusion SQL Server 给出的十六进制字符串无效

> ID：14961659
> 
> 赞同：1
> 
> 时间：2013-02-19T15:54:39.457
> 
> 标签：sql, sql-server, sql-server-2008, coldfusion, coldfusion-9

我收到此错误 -

```
[Macromedia][SQLServer JDBC Driver]The hexadecimal string is invalid 
```

当我运行以下查询时 -

```
<cfquery datasource="#getDatasource()#" name="qryAdminActivity">
    select * from v2_admin_activity
      where adminId = <cfqueryparam cfsqltype="cf_sql_numeric" value="#arguments.adminId#"> 
</cfquery> 
```

数据库中有问题的行看起来像这样

![在此处输入图像描述](../Images/81181974d71ab91cf5f8503cef2f0d51.png)

有人知道这里有什么问题吗？

：：：：编辑：：：：

我发现问题出在数据库中的这个字符串上 -

```
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;activities&gt;&lt;activity&gt;&lt;date&gt;{ts &apos;2013-02-19 16:36:43&apos;}&lt;/date&gt;&lt;query&gt;Test,,,1,2013-02-19 16:36:43.625,1&lt;/query&gt;&lt;className&gt;moduleDAO&lt;/className&gt;&lt;functionName&gt;addNewSubModule&lt;/functionName&gt;&lt;type&gt;Add&lt;/type&gt;&lt;/activity&gt;&lt;/activities&gt; 
```

现在谁能告诉我这有什么问题？

数据库中的列类型是 varchar(max)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T16:06:33.657

刚刚面临同样的问题。这对我来说是一个 CF 查询缓存（虽然没有使用 cachedwithin）。

## 原因

就我而言，这是由于 SQL 表字段类型发生了变化。我错误地将字段设置为 varbinary，并继续处理 CFC（SQL 查询）和调用的方法，直到我遇到该错误 - 即使在将字段类型更改为 varchar 之后也是如此。

## 解析度

只需在 cfquery 中输入任何内容，我将愚蠢的 1=1 添加到 where 语句中，刷新了我的课程，瞧！我现在要从我的查询中删除多余的文本。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:05:52.873

这个错误是发生在查询上还是结果显示上？您如何显示该查询的输出？它是否试图解析结果中的 XML？该 XML 有效吗？我发现在 SQL Server 中将 XML 存储为 XML 数据类型以外的任何数据类型有时会在尝试再次将其视为 XML 时导致问题。我想这将取决于您最终如何使用该 XML 字符串。

我建议您处理每个动态 CF 变量并用有效的硬编码值替换它们，直到您可以将其缩小到导致问题的那个。并尝试用另一个值替换数据库中的那个 xml。看起来它可能正在尝试将 varchar(max) 解析为 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:25:55.193

事实证明，从查询中删除 cfqueryparam 标记后，它开始工作 -

```
<cfqueryparam cfsqltype="cf_sql_numeric" value="#arguments.adminId#"> 
```

到

```
adminId = #arguments.adminId# 
```

奇怪但有效。

感谢大家的回答。

# android - 如何知道模拟器android的端口号？

> ID：14961661
> 
> 赞同：0
> 
> 时间：2013-02-19T15:54:47.003
> 
> 标签：android, ajax, restful-url

我有宁静的网络服务。一个应用 android 客户端通过 ajax 调用 restful web 服务。我不知道模拟器android的IP地址和端口，所以注册一个客户端地址访问restful web服务。请帮助我。

应用程序android中的代码ajax

```
function Get() {
        $.ajax({
            url: "http://<web service domain>:31132/api/Customer",
            type: "GET",
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            success: function (data) {

                $('#d').append("success");
            },
            error:function(){
                $('#d').append("Errorrr");
            }
        });
    } 
```

代码在restful web服务中注册客户端地址

公共静态无效RegisterCors（HttpConfiguration httpConfig）{

```
 WebApiCorsConfiguration corsConfig = new WebApiCorsConfiguration();

        corsConfig.RegisterGlobal(httpConfig);

        corsConfig

          .ForResources("Customer")

          .ForOrigins("?????")// we need to register a client address access to webservice.This is my problem.

          .AllowAll();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:26:02.883

```
adb shell ifconfig tiwlan0 
```

tiwlan0 是设备上 wi-fi 网络接口的名称

# java - Servlet java.lang.NumberFormatException

> ID：14961662
> 
> 赞同：0
> 
> 时间：2013-02-19T15:54:48.193
> 
> 标签：java, servlets

我在 servlet 上收到两个参数，我需要将它们作为字符串放入，以便`PreparedStatement`在`setInt(1, parameter)`.

```
public class rate extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException
    {
        response.setContentType("text/html;charset=UTF-8");
        PreparedStatement pstmt = null;
        Connection con = null;
       //FileItem f1;
        String id = request.getParameter("idbook");
        String opcoes = request.getParameter("voto");
        int idlivro=Integer.parseInt(id);
        int opcao = Integer.parseInt(opcoes);
        String updateString = "Update rating set livros_rate = ? where productId = ?";
        if (idlivro != 0)
     {

          try {
         //connect to DB 
         con = login.ConnectionManager.getConnection();
         pstmt = con.prepareStatement(updateString);
         pstmt.setInt(1, opcao);
         pstmt.setInt(2, idlivro);
         pstmt.executeUpdate();
      }
          catch (Exception e){
      }finally{
             try {
                 pstmt.close();
                 con.close();
             } catch (SQLException ex) {
                 Logger.getLogger(rate.class.getName()).log(Level.SEVERE, null, ex);
             }

          }
     }
} 
```

但是，它会引发以下异常：

```
java.lang.NumberFormatException: null
    at java.lang.Integer.parseInt(Integer.java:454)
    at java.lang.Integer.parseInt(Integer.java:527)
    at counter.rate.doPost(rate.java:45)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728 
```

这是如何引起的，我该如何解决？

编辑：我将把发送参数的表单代码。

```
<div id="templatemo_content_right">
    <div class="templatemo_product_box">
            <h1><%=rs.getString(3)%>  <span>(<%=rs.getString(7)%>)</span></h1>
        <img src="<%=rs.getString(13)%>"/>
            <div class="product_info">
                <p><%=rs.getString(10)%></p>
                   <div><form action="rate"  method="POST">
                            <imput type="hidden" name="idbook" value="<%=rs.getString(1)%>"/>
                            <select name="voto">
                                <option value="0">Did not like</option>
                                <option value="1">Ok</option>
                                <option value="2" selected="selected">Liked</option>
                                <option value="3">Loved!</option>
                            </select>
                            <input type="submit" value="Votar!"/>
                    </form></div> 
```

是导致问题的形式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T15:57:37.987

异常非常具有描述性，您正在尝试将 null 解析为 int。在调用之前进行空检查`parseInt()`

```
String id = request.getParameter("idbook");
    String opcoes = request.getParameter("voto");
int idlivro=0;    
if(id!=null)
   idlivro =Integer.parseInt(id);
    int opcao =0;
if(opcoes!=null)
 opcao=Integer.parseInt(opcoes); 
```

**单线：**

```
int idlivro  = (id!=null) ? Integer.parseInt(id) : 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:06:14.437

A `NumberFormatException` is thrown to indicate that an application tried to convert a `String` to a numeric type, but failed due to an incorrect format of the parsed `String`.

In your code, the possible offending lines are this ones:

```
int idlivro=Integer.parseInt(id);
int opcao = Integer.parseInt(opcoes); 
```

The two of them are parameters, obtained directly from the request:

```
String id = request.getParameter("idbook");
String opcoes = request.getParameter("voto"); 
```

Please check the format of those parameters (in particular, check if they're not `null` or `"null"`) or, if you have no control over them, catch that `NumberFormatException` with a `try-catch` block:

```
//Code
try {
    //More Code
    int idlivro=Integer.parseInt(id);
    int opcao = Integer.parseInt(opcoes);
    //More Code
} catch(NumberFormatException nfe) {
    //Logic that should be executed if the book or the option are invalid.
} 
```

Of course, you can also try and catch each individual parse if it suits you. Alternatively (and if you know you're not fetching any `null` parameter) you can use a regular expression to validate the string before trying to parse it (a cleaner approach, IMHO), like this:

```
String id = request.getParameter("idbook");
String opcoes = request.getParameter("voto");
//...
if(Pattern.matches("/^\d+$/", id)) {
    //Safe parse here.
} 
```

Build your code the way you need it, but by adding this check before parsing you avoid having to deal with a `NUmberFormatException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:59:13.907

```
int idlivro=Integer.parseInt(id);
int opcao = Integer.parseInt(opcoes); 
```

可能是 id 或 opcao 为空或其中有空格。所以你得到了 java.lang.NumberFormatException。

可能的情况：

```
id ="";
id = "  123";
id=null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T16:03:56.543

我怀疑您没有得到您期望的参数（如 request.getParameter("idbook"); 为空）。

这是一个快速测试类：

```
public class IntProb {

public static final String SOME_STRING = "888";
public static final String NULL_STRING = null;

public static void main(String[] argv) {

    System.out.println("-------- Testing parseInt ------------");

    System.out.println("converting SOME_STRING: ");
    try{
        int intSomeInt = Integer.parseInt(SOME_STRING);

    } catch(Exception e){
        e.printStackTrace();
    }

    System.out.println("converting NULL_STRING: ");
    try{
        int intSomeInt = Integer.parseInt(NULL_STRING);

    } catch(Exception e){
        e.printStackTrace();
    }

    System.out.println("-------- End of parseInt Test ------------");

}

} 
```

$ javac IntProb.java $ java IntProb

产量：

```
-------- Testing parseInt ------------
converting SOME_STRING: 
converting NULL_STRING: 
java.lang.NumberFormatException: null
at java.lang.Integer.parseInt(Integer.java:417)
at java.lang.Integer.parseInt(Integer.java:499)
at IntProb.main(IntProb.java:20)
-------- End of parseInt Test ------------ 
```

试图将 null 传递给 parseInt 很糟糕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-09T04:23:47.107

在表单的第 8 行，您有一个语法错误，可能会导致 getRequest 出现问题

见：< **imput** type="hidden" name="idbook" value="<%=rs.getString(1)%>"/>

***输入***！=**输入**

# sql-server - SQL Server 查询从远程网站执行缓慢

> ID：14961666
> 
> 赞同：0
> 
> 时间：2013-02-19T15:54:53.420
> 
> 标签：sql-server, sql-server-2008

我和我的团队正在经历一些谜团，我们所有的调查都没有结果。我希望 SO 上的某个人可以为我们提供更多探索的途径。

我有一个执行查询并显示结果的网站。当这个网站在我的开发机器或测试服务器上时，它非常缓慢，以至于它经常超时。

当我将网站发布到数据库服务器时，查询执行时间很快。

查询的有效负载只有大约 10-15k，因此结果集的大小不应该像这样影响性能。

我们的网络管理员表示数据库服务器和测试服务器在公司局域网上，它可以对局域网上的所有内容进行广泛的访问。

有没有人对可能影响查询性能的因素有任何建议？我们都有些不知所措。我可以很好地打开连接，但是一旦我尝试用我的适配器填充数据表，事情就会停止：

```
using (SqlConnection cnSource = new SqlConnection(ConfigurationManager.ConnectionStrings["cn"].ToString()))
        {
            cnSource.Open();                

            using (SqlDataAdapter adapter = new SqlDataAdapter(sql, cnSource))
            {
                adapter.Fill(records); /*** THIS LINE IS SLOW REMOTELY ***/
            } 
```

*   编辑：大约 100 条左右的记录，4 列

*   查询，fwiw，是：

查询是：

```
SELECT ef.Name AS EventFrame, ef.StartTime, efa.Name AS EventFrameAttribute, 
    CAST(efs.Value as String) as AttrValue 
FROM [Reporting].[EventFrame].[EventFrame] ef
    INNER JOIN [Reporting].[EventFrame].[EventFrameAttribute] efa ON efa.EventFrameID = ef.ID 
    INNER JOIN [Reporting].[Data].[EventFrameSnapshot] efs ON efs.EventFrameAttributeID = efa.ID
WHERE ef.StartTime >= N'{0}'
    AND (efa.Name =N'ProductCategory' or efa.Name =N'ActualCases' or efa.Name=N'Target') 
    AND ef.EventFrameTemplateID=N'9b616c78-7ad3-47a1-a5ae-26d299beb50c'
ORDER BY ef.Name, ef.StartTime, ef.EndTime, efa.Path, efa.Name", 
             start.ToString(new CultureInfo("en-CA")) 
```

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:29:03.480

尝试在连接字符串中使用不同的服务器地址。我有一个例子，当引用为（本地）时，sql 语句执行非常慢，但在我使用 IP 地址 127.0.0.1 时执行正常

# c# - Goblin XNA：仅向一个 GeometryNode 添加颜色

> ID：14961667
> 
> 赞同：1
> 
> 时间：2013-02-19T15:54:54.013
> 
> 标签：c#, xna, xna-4.0, 3d-model

我有一个 GoblinXNA 项目，其中包含几个带有材料的导入 (.fbx) 模型。

当用户单击一个节点时，我想向该节点添加一个颜色掩码以指示选择。我想我可能需要 BasicEffect 或 Effect，但我不确定如何将它们应用于单个节点。

任何指导将不胜感激。谢谢！

（我正在使用 XNA 4）

# javascript - Javascript自动解码编码字符串？

> ID：14961669
> 
> 赞同：1
> 
> 时间：2013-02-19T15:55:02.423
> 
> 标签：javascript, jquery, asp.net-mvc

我一直在阅读一篇博客文章，我看到了一些说 JS Encoding Vulnerability 的内容。在下面的示例代码中，如果用户输入如下内容：

`\x3cscript\x3e%20alert(\x27pwnd\x27)%20\x3c/script\x3e`，它说 JS 会将其呈现为 HTML，这对我来说看起来很奇怪。我试过了，他是对的。

```
@{
    ViewBag.Title = "Home Page";
}

<h2 id="welcome-message">Welcome to our website</h2>

@if(!string.IsNullOrWhiteSpace(ViewBag.UserName)) {
<script type="text/javascript">
    $(function () {
        //ViewBag.Username value comes from Controller.
        var message = 'Welcome, @ViewBag.UserName!';
        $("#welcome-message").html(message).hide().show('slow');
    });
</script>
} 
```

我的问题是，为什么 Javascript 会自动解码已经编码的字符串？或者它确实有 jQuery 的`html()`功能可以做到这一点？OP说使用`Ajax.EncodeJavascriptString()`方法来解决这个问题。但是为什么我需要对已经编码的字符串进行编码呢？我检查了 jQuery 的网站，它没有提到任何类似的[`html()`](http://api.jquery.com/html/)方法。

如果您想查看整个博文，请访问此地址[http://weblogs.asp.net/jgalloway/archive/2011/04/28/preventing-javascript-encoding-xss-attacks-in-asp-net- mvc.aspx](http://weblogs.asp.net/jgalloway/archive/2011/04/28/preventing-javascript-encoding-xss-attacks-in-asp-net-mvc.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:13:30.590

看一下 HTML 结果：

```
<script type="text/javascript">
    $(function () {
        var message = 'Welcome, \x3cscript\x3e alert(\x27pwnd\x27) \x3c/script\x3e!';
        $("#welcome-message").html(message).hide().show('slow');
    });
</script> 
```

然而，该 JS 字符串包含一些[字符转义序列](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Unicode_escape_sequences)并且等于

```
'Welcome, <script> alert("pwnd") </script>!' 
```

所以，我们想转义这些转义序列（包括简单的东西，如`\n`or `\t`）以及 JS 字符串分隔符`'`和`"`- 通过使用`@Encoder.JavaScriptEncode`.

# javascript - 非 SPA 的 JavaScript 架构

> ID：14961676
> 
> 赞同：0
> 
> 时间：2013-02-19T15:55:20.907
> 
> 标签：javascript, backbone.js, knockout.js, frontend

我想知道在不将整个应用程序重写为单页应用程序的情况下，使用 Backbone.js（或其他 MV* JS 框架）的最佳方法是什么。我只想用 JS 和我的 API 处理我的 CRUD 操作，但保留我的旧导航链接。

如果用户导航到 /venues，他可以在不离开页面的情况下执行与场所相关的 CRUD。

我想这就像有很多SPA。

我如何模块化 Backbone（或任何其他 JS 框架），以便在每个页面上只触发我需要的模块。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:30:40.813

我在很多不同的情况下都使用这样的骨干。我最终：

*   **忽略路由器**
*   **视图和模块只是带有一些内置有用方法的 JS 字典**
*   **集合是增强的数组**

之后，只需编写一些javascript！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:19:34.530

我使用了类似于@dormisher 的方法。

### 选项1

为您的模型、视图等创建一个`MyApplication`带有占位符对象的对象：

```
var MyApplication = {
  Models: {},
  Views: {},
  Collections: {},
  Routers: {},
  initFirstApp: function() {
    new MyApplication.Routers.FirstRouter();
    Backbone.history.start();
  },
  initSecondApp: function() {
    // similar to above...
  }
}; 
```

`MyApplication`通过扩展对象来定义您的模型、视图等：

```
var MyApplication.Routers.FirstRouter = Backbone.Router.extend({ ... }); 
```

然后，假设您有一个仅在您希望 FirstApp 运行时加载的 js 文件，只需调用`MyApplication.initFirstApp()`.

（当然，您也可以按应用程序组织 Backbone 构造，如 @dormisher 的代码示例所示，并为每个构造提供`init`or`start`方法。）

### 选项 2

另一种选择是拥有一个通用路由器，您可以在每个 Backbone 驱动的页面上实例化它，如果当前 url 与定义的路由匹配，Backbone 将自动接管。如果每个页面只有一个路由（即每个应用程序都是一个 SPA 并且没有子路由），我建议您只使用这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:15:28.620

我在一些应用程序中使用了这种方法，目前我正在重写网站的一部分，并为网站的每个主要导航部分创建许多小型骨干应用程序。

这似乎很明显，但我所做的只是每个部分都有一个脚本文件。因此，对于站点的用户部分，我简单地有一个名为 的 js 文件`users.js`，其中包含我用于此部分的所有视图/模型/路由器等。共享的任何内容，例如基本视图或与文件一起包含在共享 js 文件中的任何内容`users.js`。这样，所有内容都保存在一起并且易于查找，并且您只需在页面加载时向服务器发出几个请求。

为了改进组织，我还将所有内容存储在类似名称空间的 JSON 对象中，因此我创建了一个全局 JSON 对象，如下所示：

```
var MyApplication = {
  Users: {
    Views: {}, // all backbone views go in here
    Models: {} // all models go here
    // routers etc
  }
} 
```

真的很简单，但你知道古老的格言：保持简单愚蠢！

# c# - 为 ActionLink 设置样式以使其成为按钮

> ID：14961678
> 
> 赞同：0
> 
> 时间：2013-02-19T15:55:26.730
> 
> 标签：c#, asp.net-mvc, razor

我有动作链接：

```
@Html.ActionLink("Delete", "Delete", "Code", new { id = Model.CodeID }, null) 
```

我正在尝试为它分配一个类，以便我可以设置它的样式；到目前为止我的尝试：

```
<a href="@Html.ActionLink("Delete", "Delete", "Code", new { id = Model.CodeID }, null)"  type="submit" class="button">Delete</a> 
```

我在我的页面上得到的结果是：

```
<a href="<a href="/Code/Delete/1">Delete</a>"  type="submit" class="button">Delete</a> 
```

如果有人能指出我最有帮助的正确方向，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:01:12.100

试试这个 -*您可以像这样将 css 类直接应用于 Action 链接*

```
 @Html.ActionLink("Delete", "Delete", "Code", new { id = Model.CodeID }, new { @class = "button"} ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:58:53.597

最后一个参数用于 html 属性。请注意，您必须使用`@class`而不是，`class`因为后者是保留字。

```
@Html.ActionLink("Delete", "Delete", "Code", new { id = Model.CodeID }, new { @class = "button" }) 
```

# c++ - 将特定变量传递给函数，然后编辑该变量的值

> ID：14961679
> 
> 赞同：1
> 
> 时间：2013-02-19T15:55:30.487
> 
> 标签：c++, pointers

好吧，就像我的标题所说，我想将一个变量传递给一个函数，然后这些值将以特定方式编辑并再次保存在变量中。我不想让函数返回计算值，我想要某事。像这样：

```
 void function(variable_name, double computing_value)
    {
     variable_name *= computing_value;
    } 
```

例如。这样对我来说会更舒服。（我想用它为游戏编写关卡）。我可以做某事吗？用指针得到这个？比如，传递一个指向函数的指针，然后引用指针指向的变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:56:26.777

你想要一个引用类型：

```
void function(double& variable_name, double computing_value)
{
  variable_name *= computing_value;
} 
```

在这里，我假设`variable_name`应该是`double`. 引用类型允许您将参数传递给函数，而无需开始复制。也就是说，`variable_name`将是对传入对象的*引用。*

注意：不要`&`将类型中的 误认为是“地址”运算符。它不是。它们`&`在 C++ 中是两种不同的含义。在这里，我们将它用作引用类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:57:11.407

在 C++ 中，您不再需要指针来修改参数。您可以改用*参考*：

```
void function(T &t, T y) { // Where T is the type of your argument.
     t *= y;
} 
```

在这种情况下，参数`y`将被复制，但不会被复制`t`。由于它是通过引用传递的，因此不需要副本；您正在对对象本身进行操作。

# php - 检索两个标签之间的“a”标签的数量

> ID：14961680
> 
> 赞同：0
> 
> 时间：2013-02-19T15:55:31.503
> 
> 标签：php, dom, tags

我想要的是检索`<a>`特定标签之间的 HTML 标签的数量`<td>`。

该示例是我所拥有的，但我不知道如何将其余部分放入代码中。

```
 $dom = new DOMDocument();
 $dom->loadHTML($text);
 $i = 0;
 foreach($dom->getElementsByTagName("td") as $node){
 //Retrieve every TD tag that have the attribute bgcolor = #0051AB
//<td bgcolor=#0051AB> NODEVALUE </td>
   if($node->getAttribute("bgcolor") == "#0051AB"){
     $cat[]= $node->nodeValue;
   }
//HERE identify every 'a' html tag that are between the $node and the next one!!
//<a href="path">nodeValue</a>

 } 
```

例子

```
<table><tr><td bgcolor=#0051AB>Project 1</td></tr></table>
<a>link1</a>
other tags and text..
<a>Link 2</a>
enter code here
<table><tr><td bgcolor=#0051AB>Project 2</td></tr></table>
codecodecode
<a>link3</a>
codecodecode 
```

我需要的结果：（0 = td nodeValue 的名称，1 = 下一个节点之前的标签数）

```
Array => (
   Array[0] => ([0] => Project1, [1] => 2 ),
   Array[1] => ([0] => Project2, [1] => 1 )
) 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:30:39.943

对于这个需求，我更喜欢[QueryPath ，而不是 PHP DOM；](http://querypath.org/)为什么？这是不同的讨论。

以下是您的问题的解决方案。

下载 QueryPath 并将其包含在您的 PHP 文件中。

```
require("../../QueryPath\QueryPath.php"); 
```

以下是用于解析的示例 HTML

```
$text="<body>
<table><tr><td bgcolor=#0051AB>Project 1</td></tr></table>
<a>link1</a>
 other tags and text..
<a>Link 2</a>
enter code here
<table><tr><td >Project 2</td></tr></table>
codecodecode
<a> Should Not Be Included</a>
codecodecode
<table><tr><td bgcolor=#0051AB>Project 2</td></tr></table>
codecodecode
<a>link3</a>
codecodecode</body>"; 
```

解析 HTML 的代码

```
 $tags=htmlqp($text,'body')->children();
 $isRequiredTag=false;
 $i=0;
 foreach($tags as $pr)
 {
 $tag= $pr->tag();
 if($tag=='table'){
 $isRequiredTag= (htmlqp($text,$tag)->eq($i)->find('td')-  >attr('bgcolor')=='#0051AB')?"TRUE":"FALSE";
 $i++;
 }

 if ($isRequiredTag=="TRUE" && $tag=='a') echo $pr->text();

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:52:55.340

简单的 HTML DOM 易于使用。

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

```
foreach($html->find('td') as $td) {
       $td_value = $td->plaintext;
      foreach($td->find('a') as $anchor) {
            ...
      }
} 
```

# git - “警告：这里有多个分支变更集”是什么意思？

> ID：14961684
> 
> 赞同：11
> 
> 时间：2013-02-19T15:55:40.737
> 
> 标签：git, jenkins

我们使用 Jenkins 作为我们的 CI 引擎，它知道如何监控 git 存储库。出于某种原因，我通常会看到

```
Started by user anonymous
Building in workspace /var/lib/jenkins/jobs/X/workspace
Checkout:workspace / /var/lib/jenkins/jobs/X/workspace - hudson.remoting.LocalChannel@844d88
Using strategy: Default
Last Built Revision: Revision 8422864a9745535d808435bd33ece764fd250358 (origin/HEAD, origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from gitosis@...
Seen branch in repository origin/HEAD
Seen branch in repository origin/master
Commencing build of Revision c1e71af117df3cd63da972f361ad260af6f16bf5 (origin/HEAD, origin/master)
Checking out Revision c1e71af117df3cd63da972f361ad260af6f16bf5 (origin/HEAD, origin/master)
Warning : There are multiple branch changesets here
Parsing POMs
Modules changed, recalculating dependency graph 
```

我的问题是，“警告：这里有多个分支变更集”行实际上是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T16:25:51.963

我不是 Jenkins 专家，但我发现这个问题似乎可以解释警告：

[https://issues.jenkins-ci.org/browse/JENKINS-6856](https://issues.jenkins-ci.org/browse/JENKINS-6856)

詹金斯似乎建立在分离的头状态，当它检查一个远程分支（在这种情况下是源/主）时会发生这种情况，我猜这个警告是由于 HEAD 没有指向本地分支。所以詹金斯实际上创建了一个匿名分支。

编辑：在 Github 上进行了代码搜索，并在 Jenkins 的 GitSCM 插件中找到了生成此警告的方法。看[这里](https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/GitSCM.java#L1300-1353)

如果[修订版](https://github.com/jenkinsci/git-client-plugin/blob/master/src/main/java/hudson/plugins/git/Revision.java)（您可以在另一个名为 git-client-plugin 的 Jenkins 插件中看到）有多个指向它的分支，则 GitSCM 插件会警告存在多个分支。修订版是正在构建的 git 提交，在 git 中完全有可能有多个分支指向同一个提交。

修订类的注释解释了它：

> 修订是对象树中的 SHA1，以及共享此 ID 的分支集合。*与其他 SCM 不同，git 在同一个*提交中可以有 >1 个分支点 。

# forms - Selenium 验证随机生成的电子邮件

> ID：14961686
> 
> 赞同：0
> 
> 时间：2013-02-19T15:55:49.410
> 
> 标签：forms, selenium, random, automation

我正在为特定网站构建测试用例，我需要 Selenium 填写注册表单，我已经设置好了，但是我唯一的问题是让它“验证”它在原始“电子邮件”中输入的随机电子邮件场地。

我有其他一切工作，但由于我在这一切方面有点菜鸟（我只是需要在某些网站测试用例上工作的游戏自动化 QA）我有点不知所措

```
javascript{'Username+'+Math.floor(Math.random()*100000)+'@gmail.com'} 
```

这是我用来生成随机电子邮件（和用户名）的代码

因此，我几乎想知道是否可以存储该电子邮件以在我需要填写的表单的另一个字段中使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:07:34.360

You can use the Selenium `store` method to store that email address and then use it later.

```
store    javascript{'Username+'+Math.floor(Math.random()*100000)+'@gmail.com'}    random_email 
```

And then you can later use it like this

```
verifyText    //span[@id=email]    ${random_email} 
```

Here is the selenium reference about variables: [http://docs.seleniumhq.org/docs/02_selenium_ide.jsp#store-commands-and-selenium-variables](http://docs.seleniumhq.org/docs/02_selenium_ide.jsp#store-commands-and-selenium-variables)

# c# - 在 CI 机器上构建 WCF 库

> ID：14961689
> 
> 赞同：4
> 
> 时间：2013-02-19T15:55:56.417
> 
> 标签：c#, visual-studio-2010, wcf, msbuild, visual-studio-2012

更新：

只是一个更新，因为我们终于修复了我们的许可并在我们的构建代理上安装了 Visual Studio 2012。一旦我们完成安装，一切都完美无缺。

谢谢大家的回答和帮助。我接受的答案将此选项列为第四个尝试，我们确实尝试了其他所有方法，这就是它构建的全部。

当我尝试在我的 Windows Server 2008 R2 构建机器上构建 WCF 库项目时提供帮助，我收到此错误：

```
C:\BuildAgent\work\e8ce1d5b0f26c529\Configuration\ECUWeb\EcuWeb.ServiceLib\EcuWeb.ServiceLib.csproj(90, 3): error MSB4019: The imported project "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\WCF\Microsoft.VisualStudio.ServiceModel.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk. 
```

> 项目配置\ECUWeb\EcuWeb.ServiceLib\EcuWeb.ServiceLib.csproj 失败。

构建代理安装了 Visual Studio 2010 和 .net4.5，但是我在我的机器上使用 VS2012。有我可以安装的 SDK 还是必须安装 VS2012？这也是一个仅在解决方案文件上运行 MSBuild 的 teamcity 任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:08:42.117

当CI环境没有“必需品”时，我找到了一些解决方案：

一：安装SDK（如前所述）。

二：每隔一段时间，您可以从安装了 VS20xx 的机器上手动复制“.targets”文件。这实际上是一个很好的方案，因为它很容易解决。

此处的示例： [在构建服务器上未找到 Microsoft.WebApplication.targets。你的解决方案是什么？](https://stackoverflow.com/questions/3980909/microsoft-webapplication-targets-was-not-found-on-the-build-server-whats-your)

三：类似于 SDK 安装的东西。这里或那里有一个额外的包裹。这是一个例子：

[使用数据库项目在 tfsbuild 中构建错误](https://stackoverflow.com/questions/13205117/build-error-in-tfsbuild-with-database-project)

四：每隔一段时间，微软就会搞砸你。您唯一的办法是安装完整的 Visual Studio。我讨厌，因为 CI 机器不应该需要 Visual Studio。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-08T23:20:55.330

要检查的一件事 - 确定是否需要引用。

我有一个 2012 解决方案，其中包含一个 .csproj 文件，其中包含对 Microsoft.VisualStudio.ServiceModel.targets 的引用。我正在从 VS 2012 升级到 VS 2013。我有两台机器，我将它们称为 DESKTOP 和 LAPTOP。DESKTOP 上面有 VS 2012，我也安装了 VS 2013。因此存在以下文件，我能够编译我的解决方案：

```
$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\WCF\Microsoft.VisualStudio.ServiceModel.targets 
```

在笔记本电脑上，我没有 VS 2012。我从头开始安装 2013，并试图让我的解决方案（在 TFS 源代码控制下）工作。我收到了上述错误（VisualStudio.ServiceModel.targets 不存在......验证声明是否正确）。

事实证明，我什至不需要这个文件——在 DESKTOP 上的 .csproj 文件中，我只是注释掉了该元素，并且解决方案重新编译成功（包括通过单元测试）。所以我从 DESKTOP 将它签入到 TFS，在 LAPTOP 上获得了最新代码，并且它也在那里编译（并通过了单元测试）：

```
<!-- Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\WCF\Microsoft.VisualStudio.ServiceModel.targets" / --> 
```

# python-2.7 - Python While 循环 CPU 要求高

> ID：14961690
> 
> 赞同：0
> 
> 时间：2013-02-19T15:55:56.193
> 
> 标签：python-2.7, while-loop

我不想用一个简单的问题来打扰这里的人，也不想告诉我我用谷歌搜索了信息，但我想从面临同样问题的人那里获得意见。据说python中的while循环会减慢（[http://wiki.python.org/moin/WhileLoop](http://wiki.python.org/moin/WhileLoop)）。我有一个脚本，它只使用一个循环，但这非常重要，实际上它真的变慢了。我的第一个程序是使用 100% CPU（双核！！！）。我在循环中引入了一个 sleep() 函数，CPU 使用率下降到 50%。我不能一直增加睡眠时间，实际上我想减少它。无论如何，有什么“技巧”可以让这个 while 循环更快吗？

（条件是在 pyQt4 上构建的用户界面上是否按下按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:30:24.187

您链接到的参考具有误导性。如果在循环内进行任何实际工作，两个样本之间的速度差异将非常小，通常甚至不明显。

*任何*循环的本质都是在完成之前将使用 100% 的分配时间。循环是非常有效还是非常低效都没有关系。解决此问题的唯一方法是调用一些使其等待的操作系统函数，例如`sleep`您尝试过的。

现代操作系统 GUI 是事件驱动的原因是，您不必在循环中等待事件 - 您调用单个函数来等待消息，并且操作系统将 CPU 交给其他人，直到消息到达. 对于像 Qt 这样的框架，这将隐藏在所谓的消息循环中，您需要提供适当的框架挂钩来将事件路由到您自己的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:34:52.290

我会研究你给我的信息。但是为了在这里继续讨论，代码的一部分正在放慢速度：

```
while self.startButton.isChecked():
    self.widget.canvas.ax2.clear()                                                 
    self.widget.canvas.ax2.set_xlabel('Sensor #')
    self.widget.canvas.ax2.set_yscale('log', basey = 10)                                   
    self.widget.canvas.ax2.set_xlim(0, num_sensors + 1) 
    self.widget.canvas.ax2.set_xticks(range(1, num_sensors + 1)) 
    self.widget.canvas.ax2.set_xticklabels(sensorLabel, fontsize = 10)
    measure, read_s = [], []                       
    t = round((time() - initialTime), 1)           
    for i in range(num_sensors):
        read = self.ser.readline().strip()  
        measure.append(read)
        read = float(read) 
        read_s.append(read) 
        self.widget.canvas.ax.plot(t, read, plot_array[i])
    self.widget.canvas.ax2.scatter(range(1, num_sensors + 1), read_s, c = log10(read_s), s = 100) 
    self.widget.canvas.ax2.set_ylim(bottom = .8 * min(read_s))                            
    f.write(str(t) + '\t' + '\t'.join(measure) + '\n')  
    self.widget.canvas.ax.legend(loc = 'center left', bbox_to_anchor = (2.2, 0.5), ncol = 1, fontsize = 10)
    self.widget.canvas.draw()                                                       
    QtCore.QCoreApplication.processEvents()                              
    sleep(.5)   # HERE IS THE SLEEP INTRODUCED
else:
    global last_read     
    last_read = measure   
    self.statusbar.showMessage('Idle')  
    f.close()          
    self.ser.write('C')  
    try:                          
        for i in range(1000):
            self.ser.timeout = .1
            a = self.ser.readline()
            self.statusbar.showMessage('Deleting reads in the serial buffer')  
            if a == 'Last':
                break 
    except:
        self.ser.close() 
```

GUI 运行得很好（使用少于 2% 的 CPU），直到我在按下 startButton 时调用这部分代码（在我再次按下它之前一直处于选中状态）。

# ruby-on-rails - 写入 Rails 控制台

> ID：14961691
> 
> 赞同：70
> 
> 时间：2013-02-19T15:55:57.160
> 
> 标签：ruby-on-rails, ruby, debugging, development-environment, rails-console

当我想尝试或调试一些东西时，我会在那里运行`rails console`并做一些事情。我可以通过引发异常来从代码中打印一些文本或变量`raise "blablabla"`。 **问题：**我怎样才能像简单的那样写到*rails 控制台*而不会引发异常（以及明显的破坏代码执行）`logger.info "blah"`？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-02-19T16:25:45.897

正如其他人所说，您想使用`puts`or `p`。为什么？那是魔法吗？

其实并不是。rails 控制台本质上是一个[IRB](http://en.wikipedia.org/wiki/Interactive_Ruby_Shell)，因此您可以在 IRB 中执行的所有操作都可以在 rails 控制台中执行。因为在 IRB 中打印我们使用`puts`，所以我们使用相同的命令在 rails 控制台中打印。

您实际上可以查看 rails 源代码中的控制台[代码](https://github.com/rails/rails/blob/master/tools/console)。看到irb的要求了吗？:)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-19T16:10:38.627

[`puts`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-puts)或者[`p`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-p)是一个好的开始。

```
p "asd"       # => "asd"
puts "asd"    # => asd 
```

这里有更多信息：[http ://www.ruby-doc.org/core-1.9.3/ARGF.html](http://www.ruby-doc.org/core-1.9.3/ARGF.html)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-12-07T03:26:38.550

我认为您应该使用 Rails 调试选项：

```
logger.debug "Person attributes hash: #{@person.attributes.inspect}"
logger.info "Processing the request..."
logger.fatal "Terminating application, raised unrecoverable error!!!" 
```

[https://guides.rubyonrails.org/debugging_rails_applications.html](https://guides.rubyonrails.org/debugging_rails_applications.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-19T16:47:42.563

除了已经建议的`p`和`puts`——好吧，实际上在大多数情况下，你确实可以`logger.info "blah"`按照你自己的建议来写。它也可以在控制台中工作，而不仅仅是在服务器模式下。

但是，如果你想要的只是控制台调试，`puts`而且`p`写起来要短得多，无论如何。

# html - 覆盖文本对齐属性

> ID：14961695
> 
> 赞同：4
> 
> 时间：2013-02-19T15:56:01.687
> 
> 标签：html, css

我想覆盖`text-align`我的代码中的一个属性。我有这个 HTML 代码：

```
<style>
    table { text-align: center; }
    .align_left { text-align: left; }
</style>
<table>
    <tr>
        <td class="align_left">Align left ?</td>
        <td>Align center ?</td>
    </tr>
</table> 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T16:01:04.200

我认为您不必覆盖您提供给我们的代码示例中的任何内容。看起来非常好。

但是，如果您需要覆盖 CSS 规则，您有多种方法可以做到：

*   通过设置具有更高[特异性的规则](http://css-tricks.com/specifics-on-css-specificity/)

    表 td.align-left { text-align:left }
    vs
    td { text-align:left }

*   通过在样式表中设置具有相同级别特异性的规则

    table td { text-align:left }
    table td { text-align:center } /* 这一行覆盖上面的行 */

*   通过设置`!important`

    表 td { text-align:left !important }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:00:41.863

```
td {text-align:center;}
td.align_left { text-align:left;} 
```

如果您只针对现代浏览器，您还可以使用 :first-of-type 来定位第一个 td。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T16:01:26.377

您是要同时覆盖`table`and`.align_left`样式，还是`.align_left`您已经尝试过？该类应覆盖元素：

```
table td { text-align:center; }
table td.align_left { text-align:right; } 
```

# excel - 创建数据透视表时日期值的排序问题

> ID：14961701
> 
> 赞同：11
> 
> 时间：2013-02-19T15:56:13.137
> 
> 标签：excel, date, formatting, pivot-table

我有一个包含**日期**和**销售**数据的 2 列电子表格，如下所示：

![在此处输入图像描述](../Images/37ac74598cca670afaeb4f7f1d5f0403.png)

执行**右键单击-> 格式化单元格时，****日期**列中的值正确显示为**日期**（`M/D/YYYY`格式）。这适用于除标题之外的所有日期单元格（我使用 Ctrl+Shirt+Down 进行了检查）。

但是，当我从 2 列创建数据透视表时，**日期**被识别为文本并进行相应排序（即第一次按月排序，然后按天排序，然后按年排序），这会弄乱我的数据：

![在此处输入图像描述](../Images/5f0a0e204ec23cca72d5e62ccb7e38a8.png)

我定期使用这种类型的数据创建数据透视表，以前从未遇到过这个问题，我真的看不出有什么问题。

**创建数据透视表时如何强制日期值被识别？**

PS：我已经上传了[`pivot_table_date_porder_issue.xlsx`](http://ge.tt/83D38tY/v/0?c)显示问题的文件，任何人都想看到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T18:47:42.823

您的问题是 excel 无法将您的“mm/dd/yyyy”文本字符串识别为其内部存储器中的日期对象。因此，当您创建数据透视表时，它不会将这些字符串视为日期。

在创建数据透视表之前，您需要先将日期转换为实际日期值。这是一个很好的资源：http: [//office.microsoft.com/en-us/excel-help/convert-dates-stored-as-text-to-dates-HP001162867.aspx](http://office.microsoft.com/en-us/excel-help/convert-dates-stored-as-text-to-dates-HP001162867.aspx)

在您的电子表格中，我使用公式在 B 中创建了第二个日期列`=DATEVALUE(A2)`。使用此新日期列创建数据透视表，`Count of Sales`然后在数据透视表中正确排序（选项变为`Sort Oldest to Newest`而不是`Sort A to Z`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-04-20T21:35:36.750

2017 年 4 月 20 日

我已经阅读了之前发布的所有答案，它们需要做很多额外的工作。我找到的快速简单的解决方案如下：

1）取消分组数据透视表中的日期字段。2) 转到数据透视字段列表 UI。3) 重新排列您的字段，以便日期字段首先列在 ROWS 部分。4) 在设计菜单下，选择报表布局/以表格形式显示。

默认情况下，Excel 按数据透视表中的第一个字段排序。您可能不希望日期字段排在第一位，但这是一种折衷方案，可以节省您的时间和大量工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-16T14:33:51.027

进入选项。您很可能已打开“手动排序”。您需要将单选按钮更改为“升序>日期”。您也可以右键单击行/列，“更多排序选项”。我花了很长时间才找到这个解决方案...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-24T10:43:10.497

如果您想在您的 Pivot 中使用 24/11/15（2015 年 11 月 24 日）的列将正确排序，您可以通过执行以下操作确保其格式正确 - 突出显示该列，转到 Data – Text to列 – 单击下一步两次，然后选择“日期”并使用默认的 DMY（或选择适用于您的数据）并单击确定

当您现在进行旋转时，您应该会看到它正确排序，因为我们已将该列正确格式化为日期字段，以便 Excel 可以使用它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-23T09:23:00.237

我遇到的问题是，尽管源数据的格式正确为“日期”dd/mm/yyyy，但数据透视表（例如）在 2019 年 5 月 16 日和 2019 年 5 月 17 日之间放置了（例如）22/05/2019。此数据在数据透视表中可见，但位置错误。此外，数据透视图拒绝显示该日期的数据，即使“日期”过滤器允许选择它。

就我而言，我必须：

1.  从数据透视图中，打开“日期”过滤器菜单。

2.  选择“从最旧到最新排序”选项。

3.  答对了！数据透视图现在显示缺失的日期数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-21T19:08:17.420

尝试创建一个新的数据透视表，而不仅仅是刷新。

我有一个案例，我忘记添加几个日期。添加它们后，我更新了数据透视表范围并点击刷新。它们出现在数据透视表的末尾，无序。然后我尝试简单地创建一个新的数据透视表和所有日期。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-17T19:16:53.157

您需要选择包含日期的整个列，因此单击“文本到列”按钮，然后选择分隔>取消选中所有框，然后继续单击按钮完成。

这将使单元格格式，然后值将被读取为日期。

希望它会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-07T01:52:41.407

右键单击并在日期区域取消组合对我来说非常有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-26T13:47:22.197

我在别的地方看到了这个。我正在使用 2016 Excel。对我有用的是使用 YYYY Quarters（我正在寻找季度数据）。因此，我将源数据排序为 YYYY xQ。2016 年 1 季度、2016 年 2 季度、2016 年 3 季度、2016 年、4 季度、2017 年 1 季度、2017 年 2 季度……你明白了。

# c# - 创建代码区域

> ID：14961703
> 
> 赞同：0
> 
> 时间：2013-02-19T15:56:22.500
> 
> 标签：c#, groovy, intellij-idea, region

我来自 C#，我们可以在其中创建代码区域（我喜欢），例如

```
#region MyCodeIsHere
//code
#endregion 
```

所以我可以隐藏大量有效的代码。在 groovy 中是否有等效的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:06:57.570

感谢ofstream，我似乎可以在我正在使用的intellij中做到这一点：http: [//blogs.jetbrains.com/idea/2012/03/custom-code-folding-regions-in-intellij-idea-111/](http://blogs.jetbrains.com/idea/2012/03/custom-code-folding-regions-in-intellij-idea-111/)

# windows-phone-8 - Windows Phone：解析 VCard 字符串

> ID：14961704
> 
> 赞同：0
> 
> 时间：2013-02-19T15:56:22.593
> 
> 标签：windows-phone-8, windows-phone, vcf-vcard

我有一个 VCard 字符串，我想解析并插入到手机的联系人存储中。我检查了这个链接[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207024(v=vs.105).aspx#BKMK_UsingtheRemoteIdHelperclass](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207024(v=vs.105).aspx#BKMK_UsingtheRemoteIdHelperclass)

并找到了以下方法

```
ContactInformation info = await ContactInformation.ParseVcardAsync(IInputStream vcard); 
```

如何将我的 VCard 字符串转换为 IInputStream 以便我可以解析它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:51:43.113

我用过这门课

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Collections.Specialized;
using System.Collections.ObjectModel;
using System.Text.RegularExpressions;

namespace aaa
{
    /// <summary>
    /// Container class for vCard properties of vCard 2.1.
    /// Considering current implementation of vCard support in MS Outlook, MS Outlook Express, Yahoo Mail and Eudora etc.,
    /// the following properties and attributes are not supported:
    /// * Photo
    /// * Address labels
    /// * Delivery address types
    /// * Mailer
    /// * Timezone
    /// * EMail types
    /// * Sound
    /// * Public key
    /// * Extensions
    /// * Geo
    /// 
    /// So this vCard implementation is expected to be compatible with standard vCard fields of the vCard generated by these programs.
    /// </summary>
    public class VCard
    {
        readonly char[] lineBreak = { '\n', '\r' };
        #region Singlar Properties

        private string formattedName;

        public string FormattedName
        {
            get { return formattedName; }
            set { formattedName = value.TrimEnd(lineBreak); }
        }

        string surname;
        public string Surname
        {
            get { return surname; }
            set { surname = value.TrimEnd(lineBreak); }
        }

        private string givenName;

        public string GivenName
        {
            get { return givenName; }
            set { givenName = value.TrimEnd(lineBreak); }
        }
        private string middleName;

        public string MiddleName
        {
            get { return middleName; }
            set { middleName = value.TrimEnd(lineBreak); }
        }

        private string prefix;

        public string Prefix
        {
            get { return prefix; }
            set { prefix = value.TrimEnd(lineBreak); }
        }
        private string suffix;

        public string Suffix
        {
            get { return suffix; }
            set { suffix = value.TrimEnd(lineBreak); }
        }

        private string title;

        public string Title
        {
            get { return title; }
            set { title = value.TrimEnd(lineBreak); }
        }

        private DateTime bday;

        public DateTime Birthday
        {
            get { return bday; }
            set { bday = value; }
        }

        private DateTime rev = DateTime.MinValue;
        /// <summary>
        /// If Rev in vCard is UTC, Rev will convert utc to local datetime.
        /// </summary>
        public DateTime Rev
        {
            get { return rev; }
            set { rev = value; }
        }

        private string org;

        public string Org
        {
            get { return org; }
            set { org = value.TrimEnd(lineBreak); }
        }

        private string department;

        public string Department
        {
            get { return department; }
            set { department = value.TrimEnd(lineBreak); }
        }

        private string note;

        public string Note
        {
            get { return note; }
            set { note = value.TrimEnd(lineBreak); }
        }

        private string role;

        public string Role
        {
            get { return role; }
            set { role = value.TrimEnd(lineBreak); }
        }

        #endregion

        #region Property Collections with attribute

        private Collection<Address> addresses = new Collection<Address>();

        public Collection<Address> Addresses
        {
            get { return addresses; }
            set { addresses = value; }
        }

        private Collection<PhoneNumber> phones = new Collection<PhoneNumber>();

        public Collection<PhoneNumber> Phones
        {
            get { return phones; }
            set { phones = value; }
        }

        private Collection<EmailAddress> emails = new Collection<EmailAddress>();

        public Collection<EmailAddress> Emails
        {
            get { return emails; }
            set { emails = value; }
        }

        private Collection<URL> urls = new Collection<URL>();

        public Collection<URL> URLs
        {
            get { return urls; }
            set { urls = value; }
        }

        #endregion

    }
    /// <summary>
    /// Read text and create data fields of collections.
    /// 
    /// When testing, please be aware the following facts:
    /// vCard standard has been around for more than 10 years, and widely accpeted by the industries. However,
    /// the implementations from different vendors are a bit buggy, resulting data corruption during data exchanges.
    /// For example
    /// 1\. MS Outlook 2003 can handle Unicode. When exporting to vCard, non-ASCII characters are encoded into QuotedPrintable over UTF8,
    /// however, when importing, Outlook will fail to import those characters.
    /// 2\. Yahoo has similar problem. In additon, Rev in Yahoo vCard is not DateTime, a bit doggy.
    /// 
    /// These applications just can not eat their own dog food. So when you are testing the exchanges of vCard, keep these facts in mind.
    /// </summary>
    public class VCardReader
    {
        const string regxLine = @"((?<strElement>[^\;^:]*) ((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8)|(;[\w]*))*  (:(?<strValue> (([^\n\r]*=[\n\r]+)*[^\n\r]*[^=][\n\r]*) )))";
        const string regxN = @"(?<strElement>(N)) ((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8))* (:(?<strSurname>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))(;(?<strGivenName>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))? (;(?<strMidName>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))? (;(?<strPrefix>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))? (;(?<strSuffix>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))?";
        const string regxFN = @"(?<strElement>(FN))((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8))* (:(?<strFN>(([^\n\r]*=[\n\r]+)*[^\n\r]*[^=][\n\r]*) ))";
        const string regxTitle = @"(?<strElement>(TITLE))((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8))* (:(?<strTITLE>[^\n\r]*))";
        const string regxOrg = @"(?<strElement>(ORG)) ((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8))*  (:(?<strORG>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))(;(?<strDept>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))?";
        const string regxAdr = @"(?<strElement>(ADR)) (;(?<strAttr>(HOME|WORK)))?((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8))*(:(?<strPo>([^;]*)))  (;(?<strBlock>([^;]*)))  (;(?<strStreet>([^;]*)))  (;(?<strCity>([^;]*))) (;(?<strRegion>([^;]*))) (;(?<strPostcode>([^;]*)))(;(?<strNation>(([^;^\n\r]*(=\n\r)?)*[^;^\n\r]*[^;]*(\n\r)?) ))";
        const string regxNote = @"((?<strElement>(NOTE)) ((;CHARSET=UTF-?8)|(;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE))))*   (:(?<strValue> (([^\n\r]*=[\n\r]+)*[^\n\r]*[^=][\n\r]*) )))";
        const string regxRole = @"(?<strElement>(ROLE)) ((;(ENCODING=)?(?<strAttr>(QUOTED-PRINTABLE)))|(;CHARSET=UTF-?8))*  (:(?<strROLE>(([^\n\r]*=[\n\r]+)*[^\n\r]*[^=][\n\r]*) ))";
        /// <summary>
        /// Analyze vCard text into vCard properties.
        /// </summary>
        /// <param name="vCardText">vCard text.</param>
        /// <returns>vCard object.</returns>
        public static VCard ParseText(string vCardText)
        {
            VCard v = new VCard();
            RegexOptions options = RegexOptions.IgnoreCase | RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace;

            Regex regex;
            Match m;
            MatchCollection mc;

          //  NameValueCollection vCardLines = new NameValueCollection();
            regex = new Regex(regxLine, options);
            MatchCollection matches = regex.Matches(vCardText);

            foreach (Match match in matches)
            {
                string ss;

                string vCardLine = match.Value;
                switch (match.Groups["strElement"].Value)
                {
                    case "FN":
                        regex = new Regex(regxFN, options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            if (m.Groups["strAttr"].Value == "QUOTED-PRINTABLE")
                                v.FormattedName = QuotedPrintable.Decode(m.Groups["strFN"].Value);
                            else
                                v.FormattedName = m.Groups["strFN"].Value;
                        }
                        break;
                    case "N":
                        regex = new Regex(regxN, options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            if (m.Groups["strAttr"].Value == "QUOTED-PRINTABLE")
                            {
                                v.Surname = QuotedPrintable.Decode(m.Groups["strSurname"].Value);
                                v.GivenName = QuotedPrintable.Decode(m.Groups["strGivenName"].Value);
                                v.MiddleName = QuotedPrintable.Decode(m.Groups["strMidName"].Value);
                                v.Prefix = QuotedPrintable.Decode(m.Groups["strPrefix"].Value);
                                v.Suffix = QuotedPrintable.Decode(m.Groups["strSuffix"].Value);
                            }
                            else
                            {
                                v.Surname = m.Groups["strSurname"].Value;
                                v.GivenName = m.Groups["strGivenName"].Value;
                                v.MiddleName = m.Groups["strMidName"].Value;
                                v.Prefix = m.Groups["strPrefix"].Value;
                                v.Suffix = m.Groups["strSuffix"].Value;
                            }

                        }
                        break;
                    case "TITLE":
                        regex = new Regex(regxTitle, options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            if (m.Groups["strAttr"].Value == "QUOTED-PRINTABLE")
                                v.Title = QuotedPrintable.Decode(m.Groups["strTITLE"].Value);
                            else
                                v.Title = m.Groups["strTITLE"].Value;
                        }
                        break;
                    case "ORG":
                        regex = new Regex(regxOrg, options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            if (m.Groups["strAttr"].Value == "QUOTED-PRINTABLE")
                            {
                                v.Org = QuotedPrintable.Decode(m.Groups["strORG"].Value);
                                v.Department = QuotedPrintable.Decode(m.Groups["strDept"].Value);
                            }
                            else
                            {
                                v.Org = m.Groups["strORG"].Value;
                                v.Department = m.Groups["strDept"].Value;
                            }

                        }
                        break;
                    case "BDAY":
                        regex = new Regex(@"(?<strElement>(BDAY))   (:(?<strBDAY>[^\n\r]*))", options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            string bdayStr = m.Groups["strBDAY"].Value;
                            if (!String.IsNullOrEmpty(bdayStr))
                            {
                                string[] expectedFormats = { "yyyyMMdd", "yyMMdd", "yyyy-MM-dd" };
                                v.Birthday = DateTime.ParseExact(bdayStr, expectedFormats, null, System.Globalization.DateTimeStyles.AllowWhiteSpaces);
                            }
                        }
                        break;
                    case "REV":
                        regex = new Regex(@"(?<strElement>(REV)) (;CHARSET=utf-8)?  (:(?<strREV>[^\n\r]*))", options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            string revStr = m.Groups["strREV"].Value;
                            if (!String.IsNullOrEmpty(revStr))
                            {
                                string[] expectedFormats = { "yyyyMMddHHmmss", "yyyyMMddTHHmmssZ" };
                                v.Rev = DateTime.ParseExact(revStr, expectedFormats, null, System.Globalization.DateTimeStyles.AllowWhiteSpaces);
                            }
                        }
                        break;
                    case "EMAIL":
                        regex = new Regex(@"((?<strElement>(EMAIL)) ((;(?<strPref>(PREF))))* (;[^:]*)*  (:(?<strValue>[^\n\r]*)))", options);
                        mc = regex.Matches(vCardLine);
                        if (mc.Count > 0)
                        {
                            for (int i = 0; i < mc.Count; i++)
                            {
                                EmailAddress email = new EmailAddress();
                                v.Emails.Add(email);
                                m = mc[i];
                                email.Address = m.Groups["strValue"].Value;

                                if (m.Groups["strPref"].Value == "PREF")
                                    email.Pref = true;
                            }
                        }

                        break;
                    case "TEL":
                        regex = new Regex(@"((?<strElement>(TEL))  ((;(?<strType>(VOICE|CELL|PAGER|MSG|FAX)))| (;(?<strAttr>(HOME|WORK)))| (;(?<strPref>(PREF)))?)*  (:(?<strValue>[^\n\r]*)))", options);
                        mc = regex.Matches(vCardLine);
                        if (mc.Count > 0)
                        {
                            for (int i = 0; i < mc.Count; i++)
                            {
                                PhoneNumber phone = new PhoneNumber();
                                v.Phones.Add(phone);
                                m = mc[i];
                                phone.Number = m.Groups["strValue"].Value;
                                ss = m.Groups["strAttr"].Value;
                                if (ss == "HOME")
                                    phone.HomeWorkTypes = HomeWorkTypes.HOME;
                                else if (ss == "WORK")
                                    phone.HomeWorkTypes = HomeWorkTypes.WORK;

                                if (m.Groups["strPref"].Value == "PREF")
                                    phone.Pref = true;

                                CaptureCollection types = m.Groups["strType"].Captures;
                                foreach (Capture capture in types)
                                {
                                    switch (capture.Value)
                                    {
                                        case "VOICE":
                                            phone.PhoneTypes |= PhoneTypes.VOICE;
                                            break;
                                        case "CELL": phone.PhoneTypes |= PhoneTypes.CELL;
                                            break;
                                        case "PAGER": phone.PhoneTypes |= PhoneTypes.PAGER;
                                            break;
                                        case "MSG": phone.PhoneTypes |= PhoneTypes.MSG;
                                            break;
                                        case "FAX": phone.PhoneTypes |= PhoneTypes.FAX;
                                            break;
                                    }
                                }

                            }
                        }
                        break;
                    case "ADR":
                        regex = new Regex(regxAdr, options);
                        mc = regex.Matches(vCardLine);
                        if (mc.Count > 0)
                        {
                            for (int i = 0; i < mc.Count; i++)
                            {
                                Address address = new Address();
                                v.Addresses.Add(address);
                                m = mc[i];
                                ss = m.Groups["strAttr"].Value;
                                if (ss == "HOME")
                                    address.HomeWorkType = HomeWorkTypes.HOME;
                                else if (ss == "WORK")
                                    address.HomeWorkType = HomeWorkTypes.WORK;

                                if (m.Groups["strAttr"].Value == "QUOTED-PRINTABLE")
                                {
                                    address.POBox = QuotedPrintable.Decode(m.Groups["strPo"].Value);
                                    address.Ext = QuotedPrintable.Decode(m.Groups["strBlock"].Value);
                                    address.Street = QuotedPrintable.Decode(m.Groups["strStreet"].Value);
                                    address.Locality = QuotedPrintable.Decode(m.Groups["strCity"].Value);
                                    address.Region = QuotedPrintable.Decode(m.Groups["strRegion"].Value);
                                    address.Postcode = QuotedPrintable.Decode(m.Groups["strPostcode"].Value);
                                    address.Country = QuotedPrintable.Decode(m.Groups["strNation"].Value);
                                }
                                else
                                {
                                    address.POBox = m.Groups["strPo"].Value;
                                    address.Ext = m.Groups["strBlock"].Value;
                                    address.Street = m.Groups["strStreet"].Value;
                                    address.Locality = m.Groups["strCity"].Value;
                                    address.Region = m.Groups["strRegion"].Value;
                                    address.Postcode = m.Groups["strPostcode"].Value;
                                    address.Country = m.Groups["strNation"].Value;
                                }

                            }
                        }
                        break;
                    case "NOTE":
                        regex = new Regex(regxNote, options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                        {
                            if (m.Groups["strAttr"].Value == "QUOTED-PRINTABLE")
                                v.Note = QuotedPrintable.Decode(m.Groups["strValue"].Value);
                            else
                                v.Note = m.Groups["strValue"].Value;
                        }
                        break;
                    case "URL":
                        regex = new Regex(@"((?<strElement>(URL)) (;*(?<strAttr>(HOME|WORK)))?   (:(?<strValue>[^\n\r]*)))", options);
                        mc = regex.Matches(vCardLine);
                        if (mc.Count > 0)
                        {
                            for (int i = 0; i < mc.Count; i++)
                            {
                                URL url = new URL();
                                v.URLs.Add(url);
                                m = mc[i];
                                url.Address = m.Groups["strValue"].Value;
                                ss = m.Groups["strAttr"].Value;
                                if (ss == "HOME")
                                    url.HomeWorkTypes = HomeWorkTypes.HOME;
                                else if (ss == "WORK")
                                    url.HomeWorkTypes = HomeWorkTypes.WORK;
                            }
                        }

                        break;
                    case "ROLE":
                        regex = new Regex(regxRole, options);
                        m = regex.Match(vCardLine);
                        if (m.Success)
                            v.Role = m.Groups["strROLE"].Value;
                        break;

                }
            }

            return v;
        }

    }
} 
```

使用此代码

```
 using Microsoft.Phone.Controls;
using Microsoft.Phone.Shell;
using Microsoft.Phone.Tasks;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Navigation;

namespace aaa
{

    public partial class SaveContactPage : PhoneApplicationPage
    {
        string vcard = "";

        SaveContactTask saveContactTask = new SaveContactTask();

        public SaveContactPage()
        {
            InitializeComponent();
            saveContactTask.Completed += new EventHandler<SaveContactResult>(saveContactTask_Completed);
        }

        protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            if (NavigationContext.QueryString.TryGetValue("vcard", out vcard))
            {

                TextBox.Text = "";
                VCard vc = VCardReader.ParseText(vcard);

                saveContactTask.FirstName = vc.GivenName;
                saveContactTask.LastName = vc.Surname;

                TextBox.Text += "FullName: ";
                TextBox.Text += saveContactTask.FirstName + saveContactTask.LastName;
                TextBox.Text += Environment.NewLine;

                for (int i = 0; i < vc.Phones.Count; i++)
                {
                    //TextBox.Text += "Phone " + vc.Phones[i].PhoneTypes.ToString("G") + " " + vc.Phones[i].HomeWorkTypes.ToString() + (vc.Phones[i].Pref ? "Preferred" : "") + "=" + vc.Phones[i].Number + Environment.NewLine;

                    if (vc.Phones[i].HomeWorkTypes.ToString() == "None")
                    {
                        TextBox.Text += "Mobile Phone: ";
                        saveContactTask.MobilePhone = vc.Phones[i].Number;
                        TextBox.Text += saveContactTask.MobilePhone;
                        TextBox.Text += Environment.NewLine;
                    }
                    if (vc.Phones[i].HomeWorkTypes.ToString() == "WORK")
                    {
                        TextBox.Text += "Work Phone: ";
                        saveContactTask.WorkPhone = vc.Phones[i].Number;
                        TextBox.Text += saveContactTask.WorkPhone;
                        TextBox.Text += Environment.NewLine;
                    }
                    if (vc.Phones[i].HomeWorkTypes.ToString() == "HOME")
                    {
                        TextBox.Text += "Home Phone: ";
                        saveContactTask.HomePhone = vc.Phones[i].Number;
                        TextBox.Text += saveContactTask.HomePhone;
                        TextBox.Text += Environment.NewLine;
                    }
                }

                for (int i = 0; i < vc.Emails.Count; i++)
                {
                    //TextBox.Text += "Email " + " " + (vc.Emails[i].Pref ? "Preferred" : "") + "=" + vc.Emails[i].Address + Environment.NewLine;
                    saveContactTask.PersonalEmail = vc.Emails[i].Address;
                    TextBox.Text += saveContactTask.PersonalEmail;
                    TextBox.Text += Environment.NewLine;
                }

                /*
                if (!String.IsNullOrEmpty(vc.Prefix))
                    TextBox.Text += "Prefix=" + vc.Prefix + Environment.NewLine;
                if (!String.IsNullOrEmpty(vc.Prefix))
                     TextBox.Text += "Suffix=" + vc.Suffix+ Environment.NewLine;

                if (vc.Birthday > DateTime.MinValue)
                     TextBox.Text += "Birthday=" + vc.Birthday.ToLongDateString() + Environment.NewLine;
                if (vc.Rev != null)
                     TextBox.Text += "Rev=" + vc.Rev.ToLongDateString()+" "+vc.Rev.ToLongTimeString() + Environment.NewLine;

                if (!String.IsNullOrEmpty(vc.Org))
                     TextBox.Text += "Org=" + vc.Org + Environment.NewLine;            

                for (int i = 0; i < vc.URLs.Count; i++)
                {
                     TextBox.Text += "URL " + vc.URLs[i].HomeWorkTypes.ToString() + " " + "=" + vc.URLs[i].Address + Environment.NewLine;
                }

                for (int i = 0; i < vc.Addresses.Count; i++)
                {
                     TextBox.Text += "Address " + vc.Addresses[i].HomeWorkType.ToString() + "=" + vc.Addresses[i].POBox + ","
                    + vc.Addresses[i].Ext + ", "
                    + vc.Addresses[i].Street + ", "
                    + vc.Addresses[i].Locality + ", "
                    + vc.Addresses[i].Region + ", "
                    + vc.Addresses[i].Postcode + ", "
                    + vc.Addresses[i].Country + Environment.NewLine;
                }

                if (!String.IsNullOrEmpty(vc.Note))
                     TextBox.Text += "Note="+vc.Note;

                 TextBox.Text += "=============================" + Environment.NewLine;
                 */
                }
            }

        void saveContactTask_Completed(object sender, SaveContactResult e)
        {
            switch (e.TaskResult)
            {
                //Logic for when the contact was saved successfully
                case TaskResult.OK:
                    MessageBox.Show("Contact saved.");
                    break;

                //Logic for when the task was cancelled by the user
                case TaskResult.Cancel:
                    MessageBox.Show("Save cancelled.");
                    break;

                //Logic for when the contact could not be saved
                case TaskResult.None:
                    MessageBox.Show("Contact could not be saved.");
                    break;
            }
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            try
            {
                saveContactTask.Show();
            }
            catch (System.InvalidOperationException ex)
            {
                MessageBox.Show("An error occurred.");
            }
        }

    }

} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:56:14.277

好的，我发现了这个：

我们将使用**WindowsRuntimeStreamExtensions**类将**System.IO Streams**转换为**Windows.Storage.Streams**对象：

```
System.IO.MemoryStream ms = new System.IO.MemoryStream(System.Text.Encoding.UTF8.GetBytes(VCardDataString));
IInputStream input= System.IO.WindowsRuntimeStreamExtensions.AsInputStream(ms);
                    ContactInformation info = await ContactInformation.ParseVcardAsync(input);
                    StoredContact phoneContact = new StoredContact(store, info); 
```

# scala - Play Framework 2.1 - 找不到隐式 ExecutionContext

> ID：14961708
> 
> 赞同：50
> 
> 时间：2013-02-19T15:56:27.057
> 
> 标签：scala, playframework, playframework-2.0

我正在调用这样的网络服务：

```
WS
  .url(url)
  .get
  .map { response => // error occurs on this line
    response.status match {
      case 200 => Right(response.json)
      case status => Left(s"Problem accessing api, status '$status'")
  }
} 
```

完整的错误：`Error: Cannot find an implicit ExecutionContext, either require one yourself or import ExecutionContext.Implicits.global`

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-02-19T15:56:27.057

根据[这个问题](http://web.archive.org/web/20140222113140/http://play.lighthouseapp.com/projects/82401/tickets/899-error-cannot-find-an-implicit-executioncontext-either-require-one-yourself-or-import-executioncontextimplicitsglobal)，它在文档中得到了修复。我需要添加以下导入：

```
import play.api.libs.concurrent.Execution.Implicits._ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-16T23:25:17.713

从 Play 2.6 开始，建议对`execution context`.

**默认执行上下文注入：**

*Foo.scala*

```
class Foo @Inject()()(implicit ec:ExecutionContext) {

def bar() = {
   WS.url(url)
     .get
     .map { response => // error occurs on this line
       response.status match {
         case 200 => Right(response.json)
         case status => Left(s"Problem accessing api, status '$status'")
     }
   }
} 
```

**自定义执行上下文注入：**

*应用程序.conf*

```
# db connections = ((physical_core_count * 2) + effective_spindle_count)
fixedConnectionPool = 9

database.dispatcher {
  executor = "thread-pool-executor"
  throughput = 1
  thread-pool-executor {
    fixed-pool-size = ${fixedConnectionPool}
  }
} 
```

*DatabaseExecutionContext.scala*

```
@Singleton 
class DatabaseExecutionContext @Inject()(system: ActorSystem) extends CustomExecutionContext(system,"database.dispatcher") 
```

*Foo.scala*

```
class Foo @Inject()(implicit executionContext: DatabaseExecutionContext ) {   ...    } 
```

**更多信息在：**

[https://www.playframework.com/documentation/2.6.x/Migration26#play.api.libs.concurrent.Execution-is-deprecated](https://www.playframework.com/documentation/2.6.x/Migration26#play.api.libs.concurrent.Execution-is-deprecated) [https://www.playframework.com/documentation/2.6.x/Highlights26#CustomExecutionContext -and-Thread-Pool-Sizing](https://www.playframework.com/documentation/2.6.x/Highlights26#CustomExecutionContext-and-Thread-Pool-Sizing)

# mono - Monotouch 绑定类别（使用类别属性）

> ID：14961716
> 
> 赞同：2
> 
> 时间：2013-02-19T15:56:35.290
> 
> 标签：mono, xamarin.ios, monodevelop

我正在尝试绑定 lib XYOrigami，但似乎遇到了一些问题。[Xamarin.com docs](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c_libraries/binding_types_reference_guide)上的当前文档建议使用 Category 属性，我收到一条错误消息，提示找不到此属性，并且解析引用会向 System.ComponentModel 添加使用。绑定项目构建没有问题，但是这两种方法在任何 UIView 对象上都不可用。

任何帮助，将不胜感激。

```
namespace XYOrigami
{
  delegate void OrigamiAnimationCompleted (bool finished);

  [BaseType (typeof(UIView))]
  [Category]
  interface Origami{

      [Export ("showOrigamiTransitionWith:NumberOfFolds:Duration:Direction:completion:")]
      void ShowOrigamiTransition (UIView view, int folds, float duration, XYOrigamiDirection direction, OrigamiAnimationCompleted completed);

      [Export ("hideOrigamiTransitionWith:NumberOfFolds:Duration:Direction:completion:")]
      void HideOrigamiTransition (UIView view, int folds, float duration, XYOrigamiDirection direction, OrigamiAnimationCompleted completed);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:34:49.007

看起来文档在那里有点超前。这将被添加到 MonoTouch 的未来版本中，但目前尚未发布（因此它找不到正确的 Category 属性）

# code-snippets - Modx Evo 日期差异片段

> ID：14961717
> 
> 赞同：0
> 
> 时间：2013-02-19T15:56:38.330
> 
> 标签：code-snippets, modx

使用 Modx evo，我尝试使用以下代码段来显示发布日期和当前日期（以天为单位）之间的日期差异，但得到奇怪的输出。我究竟做错了什么？

```
<?php
$date2=$modx->documentObject['createdon'];
$date1=time();
$dateDiff = $date1 - $date2;
$daysOld = floor($dateDiff/(60*60*24));
return $daysOld;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:55:25.100

问题是日期存储为 SQL 日期，而不是时间戳。

阅读文档：[http ://rtfm.modx.com/display/revolution20/Date+Formats](http://rtfm.modx.com/display/revolution20/Date+Formats)

所以，这应该工作：

```
$dateDiff = $time() - strtotime($modx->documentObject['createdon']);
$daysOld = floor($dateDiff/(60*60*24));
return $daysOld; 
```

# ajax - twitter bootstrap 动态轮播

> ID：14961719
> 
> 赞同：12
> 
> 时间：2013-02-19T15:56:42.093
> 
> 标签：ajax, twitter-bootstrap, carousel

我想使用引导程序的轮播来动态滚动内容（例如，搜索结果）。所以，我不知道会有多少页内容，并且我不想获取后续页面，除非用户单击下一步按钮。

我看了这个问题：[Carousel with dynamic content](https://stackoverflow.com/questions/10232618/carousel-with-dynamic-content)，但我认为答案并不适用，因为它似乎建议从数据库服务器端加载所有内容（在这种情况下为图像）并将所有内容作为静态内容返回。

我最好的猜测是在按钮按下时拦截点击事件，为搜索结果的下一页进行ajax调用，当ajax调用返回时动态更新页面，然后为轮播生成滑动事件。但是这些都没有在引导页面上真正讨论或记录。欢迎任何想法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-01T00:48:21.903

如果您（或其他任何人）仍在寻找解决方案，我将分享我发现的通过 AJAX 将内容加载到 Bootstrap Carousel 的解决方案。

这个解决方案有点棘手，因为没有办法轻松确定轮播的当前幻灯片。使用一些数据属性，我能够处理`.slid`事件（如您所建议的），然后使用 jQuery 从另一个 url 加载内容`$.load()`..

```
$('#myCarousel').carousel({
  interval:false // remove interval for manual sliding
});

// when the carousel slides, load the ajax content
$('#myCarousel').on('slid', function (e) {

    // get index of currently active item
    var idx = $('#myCarousel .item.active').index();
    var url = $('.item.active').data('url');

    // ajax load from data-url
    $('.item').html("wait...");
    $('.item').load(url,function(result){
        $('#myCarousel').carousel(idx);  
    });

});

// load first slide
$('[data-slide-number=0]').load($('[data-slide-number=0]').data('url'),function(result){    
    $('#myCarousel').carousel(0);
}); 
```

`[**Demo on Bootply**](http://bootply.com/62742)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-16T11:25:21.037

我将@Zim 的答案与 Bootstrap 4 结合起来。我希望它会对某人有所帮助。

首先，仅加载图像的路径：

```
<div id="carousel" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item" data-url="/image/1.png"></div>
        <div class="carousel-item" data-url="/image/2.png"></div>
        <div class="carousel-item" data-url="/image/3.png"></div>
    </div>
</div> 
```

然后在 JavaScript 中：

```
$('document').ready(function () {
    const loadCarouselImage = function ($el) {
        let url = $el.data('url');

        $el.html(function () {
            let $img = $('<img />', {
                'src': url
            });
            $img.addClass('d-block w-100');

            return $img;
        });
    );

    const init = function () {
        let $firstCarousel = $('#carousel .carousel-item:first');
        loadCarouselImage($firstCarousel);
        $firstCarousel.addClass('active');

        $('#productsCarousel').carousel({
            interval: 5000
        });
     };

     $('#carousel').on('slid.bs.carousel', function () {
         loadCarouselImage($('#carousel .carousel-item.active'));
     });

     init();
}); 
```

# entity-framework - Azure 数据同步 + EF 自动迁移

> ID：14961721
> 
> 赞同：1
> 
> 时间：2013-02-19T15:56:43.777
> 
> 标签：entity-framework, azure-sql-database, entity-framework-migrations, azure-data-sync

Azure 数据同步如何处理 EF 自动迁移？有没有办法在允许同步之前指定匹配迁移级别的前提条件？

[这个问题是相关的，但仅询问 EF Automatic Migrations 如何使用单个 SQL 实例处理多个 Web 角色的一致性](https://stackoverflow.com/questions/12023803/how-does-azure-websites-with-ef-migrations-ensure-integrity-when-updating)；它不涉及方程式中的数据同步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:02:57.163

Azure 数据同步不知道 EF 或任何其他应用程序。并且没有 API 或钩子可以拦截和影响它的行为。

# sql - 访问记录集产生名称？

> ID：14961727
> 
> 赞同：2
> 
> 时间：2013-02-19T15:57:12.543
> 
> 标签：sql, ms-access, vba, adodb, recordset

我有一个通过 ADODB 连接到 SQL 数据库的访问数据库。访问表视图的记录集是通过以下方法中的记录集属性设置的。该方法是从 Form_Load 函数中调用的，用于查看它的表单。通过主表单上的选项卡访问该表单。

不幸的是，记录集似乎没有在机器之间正确更新。在一台机器（Access 2010）上它可以正常加载。在第二个（Access 2010）上，它仅将第一行加载为 Name?。有时，如果我自己打开表单，然后打开选项卡，我可以让它加载到第二台机器上。

任何帮助，将不胜感激。提前致谢！

```
Function LoadTblEmployeesADOtoForm()

Dim sqlStr As String

 Dim cn As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim p As ADODB.Property
    Const ConnStr = "PROVIDER=SQLOLEDB;Server=SERVER;Database=DB;User ID=ID;Password=PWD;"
    Set cn = New ADODB.Connection
    cn.Open ConnStr

    Set rs = New ADODB.Recordset
    With rs
        .CursorLocation = adUseClient
        .CursorType = adOpenKeyset
        .LockType = adLockPessimistic

        'SELECT
        sqlStr = "SELECT * FROM tblEmployees ORDER BY NetworkID"

        Debug.Print sqlStr

        .Source = sqlStr

        Set .ActiveConnection = cn
        .Properties("Preserve on Abort") = True
        .Properties("Preserve on Commit") = True
    End With
    'cn.BeginTrans
    rs.Open

    Debug.Print rs.RecordCount
    Dim temp As Integer

     Set Form_frmManagetblEmployees.Recordset = rs

    cn.Close

    Set rs = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:10:46.940

当表单用作子表单时，不能引用：

```
 Set Form_frmManagetblEmployees.Recordset = rs 
```

但是，Me 将同时适用于表单和子表单，因此：

```
 Set Me.Recordset = rs 
```

# mysql - 在 MySQL Query 中加入表而不是多个查询

> ID：14961728
> 
> 赞同：0
> 
> 时间：2013-02-19T15:57:15.260
> 
> 标签：mysql, join

我有这个查询

```
$query = "SELECT * FROM items WHERE itemStatus = '1' AND itemAdded > '$timestamp'"; 
```

一旦此查询返回结果，我将遍历结果

结果数组为 itemID、itemLocationID、categoryParentID、categoryID、itemName、itemDetails

在循环期间，我然后通过调用同一类中的函数来运行其他三个查询

```
$locationName = $this->getLocationByName($locationID);
$categoryParentName = $this->getCategoryByName($categoryParentID);
$categoryName = $this->getCategoryByName($categoryID); 
```

函数 getLocationByName 执行此查询；

```
$q = mysql_query("SELECT * FROM locations WHERE locationID = '$locationID'"); 
```

这将返回一个包含 locationID、locationName、locationLink 的数组

函数 getCategoryByName 执行此查询；

```
$q = mysql_query("SELECT * FROM categories WHERE categoryID = '$categoryID'"); 
```

这将返回 categoryID、categoryName、categoryLink 的数组

有人可以帮我优化这个查询，也许加入他们以节省做这么多查询。

提前致谢。

我现在使用这个查询

```
$q = mysql_query("SELECT 
i.itemID, 
i.locationID,
i.categoryParentID,
i.categoryID, 
i.itemName,
i.itemDetails,
l.*,
c.* 
```

FROM items i 内部连接位置 l on i.locationID = l.locationID 内部连接类别 c on i.categoryID = c.categoryID WHERE itemStatus = '1' AND itemAdded > '$timestamp'") or die(mysql_error());

结果是

```
Array 
```

（ [itemID] => 81300 [locationID] => 17 [categoryParentID] => 21 [categoryID] => 183 [itemName] => blah [itemDetails] => blah [locationName] => 精彩，它按预期拉入位置. [locationLink] => blah [categoryName] => 精彩，它按预期拉入类别。[categoryLink] => blah )

```
[categoryName] => //these are missing for categoryParentID
[categoryLink] => //these are missing for categoryParentID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:06:33.690

I think should be something similar to below query. I do not see where are you using $categoryParentName .

Using your queries and data:

```
SELECT * FROM items WHERE itemStatus = '1' AND itemAdded > '$timestamp'
SELECT * FROM locations WHERE locationID = '$locationID'
SELECT * FROM categories WHERE categoryID = '$categoryID'

$locationName = $this->getLocationByName($locationID);
$categoryParentName = $this->getCategoryByName($categoryParentID);
$categoryName = $this->getCategoryByName($categoryID); 
```

Please let me know if this returns expected result set. Hope this helps

```
SELECT 
    it.itemID, it.itemLocationID, it.categoryParentID, it.categoryID, it.itemName, it.itemDetails,
    l.locationID, l.locationName, l.locationLink, 
    c.categoryID, c.categoryName, c.categoryLink
FROM items it 
LEFT JOIN locations l ON l.locationID = it.itemLocationID 
LEFT JOIN categories c ON c.categoryID = it.categoryID 
WHERE 
    it.itemStatus = '1' 
    AND it.itemAdded > '$timestamp' 
```

Update query using categoryParentID - i am not saying is efficient but you can test and optimize as needed.

One option is to update above query - not sure that will work - and for large result sets using OR is not efficient:

```
LEFT JOIN categories c ON (c.categoryID = it.categoryID OR c.categoryID = it.categoryParentID) 
```

The other option that i see is to get 2 result sets (see below) - one for categId = categId and second for categId = categParentId and combine the result set in one big result set.

```
SELECT 
    t.itemID, t.itemLocationID, t.categoryParentID, t.categoryID, t.itemName, t.itemDetails,
    l.locationID, l.locationName, l.locationLink, 
    t.categoryID, t.categoryName, t.categoryLink 
FROM 
(
SELECT 
    it.itemID, it.itemLocationID, it.categoryParentID, it.categoryID, it.itemName, it.itemDetails,
    c.categoryID, c.categoryName, c.categoryLink
FROM items it 
INNER JOIN categories c ON c.categoryID = it.categoryID 
WHERE 
    it.itemStatus = '1' 
    AND it.itemAdded > '$timestamp'

UNION -- [ALL]

SELECT 
    it.itemID, it.itemLocationID, it.categoryParentID, it.categoryID, it.itemName, it.itemDetails,
    c.categoryID, c.categoryName, c.categoryLink
FROM items it 
INNER JOIN categories c ON c.categoryID = it.categoryParentID 
WHERE 
    it.itemStatus = '1' AND 
    it.itemAdded > '$timestamp'
) AS t 
LEFT JOIN locations l ON l.locationID = t.itemLocationID 
```

Other idea - not tested and assuming that id are int - will have to cast as string / char. There are a few options how you can write this query - if you post a structure table and some dummy data i am sure that someone will create a demo / sqlfiddle.

```
SELECT 
    it.itemID, it.itemLocationID, it.categoryParentID, it.categoryID, it.itemName, it.itemDetails,
    l.locationID, l.locationName, l.locationLink, 
    c.categoryID, c.categoryName, c.categoryLink
FROM items it 
LEFT JOIN locations l ON l.locationID = it.itemLocationID 
WHERE 
    it.itemStatus = '1' 
    AND it.itemAdded > '$timestamp' 
    AND c.category ID IN ( SELECT GROUP_CONCAT(categs) FROM (SELECT CONCAT(categoryID, ",", categoryParentID) AS categs FROM items )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:08:40.170

我不会在选择语句中使用 * 带有连接的查询可能是

```
SELECT 
    i.itemID, 
    i.itemLocationID,
    i.categoryParentID,
    i.categoryID, 
    i.itemName,
    i.itemDetails,
    l.*,
    c.*        
FROM 
    items i
    inner join locations l on i.itemLocationID = l.locationID
    inner join categories c on i.categoryID = c.categoryID
WHERE
    itemStatus = '1'
    AND itemAdded > '$timestamp' 
```

我希望它对你有用。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:01:30.730

除非我遗漏了一些明显的东西，否则我可能会建议这样的事情作为第一个开始：

```
select *
  from items i
  join locations l 
    on i.location_id=l.location_id
  join categories c
    on i.category_id=c.category_id
 where item_status='1'
   and itemAdded > '$timestamp' 
```

# ios - 重新加载 UITableView 的内容

> ID：14961729
> 
> 赞同：2
> 
> 时间：2013-02-19T15:57:14.497
> 
> 标签：ios, uitableview

我在刷新`UITableView`. 我正在尝试在`UITableView`. 在此列表上方，我有一些用于组选择的下拉菜单。因此，如果我更改在下拉菜单中选择的组，我想更改它下面的 UITableView 的内容。它实际上无法正常工作。我第一次加载`ViewController`包含 的`UITableView`时，它会显示默认组中的正确成员列表。现在，当我更改组时，它应该显示我的新成员列表，但它没有。似乎`UITableView`甚至不会重新加载其表格内容。这是我的代码`TableViewController`：

成员表视图控制器.m

```
- (void)viewDidLoad {
  [super viewDidLoad];

  self.members = [NSMutableArray new];
  self.selectedRows = [NSMutableArray new];
  self.groupManager = [GroupManager new];

  int *number;
  if (nil != [self gruppeId]) {
      number = [[self gruppeId] intValue]; // Here will be the id of the new selected group
  } else {
    number = 4010292; // This is just for testing. It's the id of my default group
  }

  for (Group *group in [self.groupManager findGroupWithID:[NSNumber numberWithInt:number]]) {

    for (Member *member in group.member) {
        [self.members addObject:member];
    }
  }

  NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)];
  [self.gruppenMitglieder sortUsingDescriptors:[NSArray arrayWithObject:sort]];
  [self.tableView setAllowsMultipleSelection:YES];
  [self.tableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return  [[self members] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    GreenTexturedCell *cell = nil;
    Member *member = [self members][indexPath.row];
    NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"GreenTexturedCell" owner:nil    options:nil];

    for (UIView *view in views) {
        if([view isKindOfClass:[UITableViewCell class]]) {
            cell = (GreenTexturedCell*)view;
        }
    }

    cell.textLabel.text = member.name;
    cell.textLabel.font = [UIFont fontWithName:@"JandaCloserToFree" size:14.0];
    cell.textLabel.textColor = [UIColor whiteColor];

    return cell;
} 
```

现在我有另一个`ViewController`，`MemberListViewController`它包含`MemberTableViewController`（我知道，命名不是最好的......）。`MemberListViewController`实现`GroupSelectionTableViewController`了. 当所选组更改时，将调用其委托函数。这是代码`MemberListViewController`：MemberListViewController.h

```
@interface MemberListViewController : UIViewController <GroupSelectionDelegate>
@property (weak, nonatomic) IBOutlet UIButton *groupSelection;
@property (nonatomic, strong) GroupSelectionTableViewController *groupTableView;
- (IBAction)groupSelectionPressed:(id)sender;
@end 
```

成员列表视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setGroupTableView:[GroupSelectionTableViewController new]];
    [[self groupTableView] setDelegate:self];
}

- (IBAction)gruppeAuswahlPressed:(id)sender {

    if ([self groupListShown]) {
        [[[self groupTableView] view] removeFromSuperview];
        [self setGroupListShown:NO];
    } else {
        [self.view addSubview:[[self groupTableView] view]];
        [self setGroupListShown:YES];
    }
}

- (void) groupSelectionController:(GroupSelectionTableViewController *)groupSelection DidSelectGroupWithId:(NSString *) groupId {
    [[self groupSelection] setTitle:name forState:UIControlStateNormal];
    [[[self groupTableView] view] removeFromSuperview];
    [self setGroupListShown:NO];
    MemberTableViewController *memberTableView = [self.storyboard instantiateViewControllerWithIdentifier:@"memberTable"];
    [memberTableView setGroupId:[NSNumber numberWithInt:4017411]]; // Id for testing
    [memberTableView refreshControl]; 
```

}

现在，如果我更改组选择，`-groupSelectionController:DidSelectGroupWithId:`则调用 Method 并且`[memberTableView refreshControl]`我能够再次进入`viewDidLoad`Method`MemberTableViewController`并将 groupId 设置为我的测试 ID。现在我希望 TableView 重新加载其内容以获取所选组的成员。使用该语句`[self.tableView reloadData]`，我将进入`tableView:NumberOfRowsInSection:`Method 但未进入 tableView:CellForRowAtIndexPath: Method 并且不会重绘 TableView 内容。

我究竟做错了什么 ？这个问题把我逼疯了，所以我希望有人能帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:53:14.617

随着`instantiateViewControllerWithIdentifier`您创建 的新实例`MemberTableViewController`，这不是您在屏幕上显示的实例。因此，您不会看到应该通过调用 reloadData 显示的更改。

为了能够重新加载表数据，您可以在 MemberListViewController 中添加表的链接。将 .h 的代码更改为：

```
#import "MemberTableViewController.h"
@interface MemberListViewController : UIViewController <GroupSelectionDelegate>
{
    IBOutlet MemberTableViewController *memberTableView;
}
@property (weak, nonatomic) IBOutlet UIButton *groupSelection;
@property (nonatomic, strong) GroupSelectionTableViewController *groupTableView;
- (IBAction)groupSelectionPressed:(id)sender;
@end 
```

然后，在 .m 中，您可以调用 [memberTableView reloadData];

不要忘记`memberTableView`在情节提要文件中设置为“新引用出口”。

# php - MySQL 数据库中的 TinyMCE 格式文本

> ID：14961732
> 
> 赞同：0
> 
> 时间：2013-02-19T15:57:28.423
> 
> 标签：php, mysql, formatting, tinymce

我一直在寻找这个问题的答案已经有一段时间了，但我还没有找到一个合乎逻辑的答案。

我想使用 TinyMCE 来允许用户发布格式化的博客。我不想强迫用户在 textarea 中使用 HTML 标签来放置一个新段落，他们应该能够按回车键来获取新行，按下按钮来获取粗体文本，等等......我的问题是，如果我将这些博客文章存储在 mysql 数据库中，如何安全地保留数据库中的格式，然后在格式完整的情况下显示数据库中的博客文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:02:18.840

使用[`getContent`](http://www.tinymce.com/wiki.php/API3%3amethod.tinymce.Editor.getContent)：

```
tinyMCE.activeEditor.getContent(); 
```

它将返回您当前tinymce 编辑器的HTML，您可以将其发送到您的服务器。

# visual-studio - Visual Studio：如何插入选项卡而不是代码片段

> ID：14961733
> 
> 赞同：1
> 
> 时间：2013-02-19T15:57:30.423
> 
> 标签：visual-studio, tabs, code-snippets

每当我在来自代码片段列表的关键字后按下键时，Visual Studio 总是插入代码片段。

但是，当我想在现有代码中添加一行注释时，这非常令人不安。例如，我不能在`else`关键字后添加 TAB 字符。

我必须按什么键盘组合才能在此处插入 TAB 字符？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:10:01.667

您的方案的一个简单解决方法`else`是插入一个空格，然后是制表符，然后删除空格。

如果您想更改片段，您可以通过转到工具 -> 代码片段管理器（Ctrl-K、Ctrl-B）并选择要修改的片段来完成此操作。将显示 .snippet 文件的路径。您可以在文本编辑器中打开文件并对其进行修改以执行您想要的操作。

# c# - 数据集上的sql select语句

> ID：14961737
> 
> 赞同：0
> 
> 时间：2013-02-19T15:57:36.197
> 
> 标签：c#, sql-server, xml, linq, xml-parsing

我有一个`DataSet`包含不同`DataTable`的存储来自用户的数据。我将其写入`DataSet`用户`xml`计算机本身。

```
//after filling both DataTable

 dt1.TableName = "tbl1";
 dt2.TableName = "tbl2";    
 DataSet ds = new DataSet();
 ds.Tables.Add(dt1);
 ds.Tables.Add(dt2);    
 ds.WriteXml("MyData.XML", XmlWriteMode.WriteSchema); 
```

现在，我有一个 sql select 语句（它将是动态的），它包含一个 join 语句，也像这样。有什么办法过滤这些数据。

```
DataSet dstbl = new DataSet();
dstbl.ReadXml("MyDataL.XML"); 
```

如果我实现**LINQ**，那么我将如何根据 select 语句创建动态**LINQ**`SQL`语句，或者将select 语句（动态）转换为`xml query`以便我可以在`xml`文件中过滤任何类型的帮助或建议的方法将不胜感激。

# image - Flex 图像未动态加载

> ID：14961741
> 
> 赞同：0
> 
> 时间：2013-02-19T15:57:48.380
> 
> 标签：image, apache-flex

我正在制作一个向用户显示图像的移动应用程序。图像出现没有这个代码的问题：

```
<s:Image id="img" width="100%" source="assets/images/2.jpg"/> 
```

但是当我尝试像这样设置 Image 的源属性时：

```
function button1_clickHandler(event:MouseEvent):void
{
    img.source = "assets/images/2.jpg";
}

<s:Image id="img" width="100%" /> 
```

图像没有出现没有错误。我不知道我做错了什么，我只想在运行时更改图像的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:03:41.983

重启 Flash Builder 后问题解决

# regex - 使用 Notepad++ 从 xml 中提取特定数据

> ID：14961746
> 
> 赞同：0
> 
> 时间：2013-02-19T15:57:58.027
> 
> 标签：regex, xml, notepad++

我有一个带有结构的 xml 响应（例如组 > 子组 > 子记录），并且重复数千次，每个值都有不同的值。

我只想抓取 9 位序列号字段与我提供的内容匹配的子组，并将它们提取到自己的文件中。在提取子组时，它也会带上组。我希望这样的任务可以使用 notepad++ 并且可能通过使用正则表达式来完成，但不确定我将如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:16:22.010

我不熟悉记事本++。为了使我的解决方案正常工作，它需要支持多行正则表达式和高级正则表达式语法（非贪婪匹配）。并非所有支持正则表达式的文本编辑器都可以。

我将以您想要`\<subgroup\>\<\/subgroup\>`转义特殊字符的外部标签开始和结束。为了捕捉介于两者之间的内容，我会使用非贪婪匹配`\<subgroup\>\.*?<\/subgroup\>`。然后我会添加您感兴趣的特定序列号`\<subgroup\>\.*?123456789.*?<\/subgroup\>`。

如果您想在这里找到多个序列号中的一些，请使用类似

```
\<subgroup\>\.*?(123456789|987654321|678912345).*?<\/subgroup\> 
```

# r - R中的有符号距离矩阵

> ID：14961747
> 
> 赞同：1
> 
> 时间：2013-02-19T15:57:58.610
> 
> 标签：r, matrix, distance

[注意，我写了这个问题，然后找到了答案。我想也许其他人想知道它，所以我发布答案以防万一。我不确定这是否是“完成的事情”]。

假设我想要一个向量的有符号距离矩阵，即距离并不总是正数，但可以是负数。你不能使用

> 距离（）

因为它返回绝对值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:57:58.610

使用适用：

```
y<-seq(1:10)
distmat<-as.data.frame(apply(as.matrix(y),1,function(x) y-x))
distmat[upper.tri(distmat,diag=TRUE)]<-NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:55:18.523

这是另一种方法，它更快并且需要更少的内存：

```
y <- sample (1 : 4)
distmat <- outer (y, y, `-`) 
```

产量：

```
> distmat
     [,1] [,2] [,3] [,4]  
[1,]    0    1    3    2  
[2,]   -1    0    2    1  
[3,]   -3   -2    0   -1  
[4,]   -2   -1    1    0

## not sure why you want the upper triangular NA
distmat[upper.tri(distmat,diag=TRUE)]<-NA 
```

但你可能想要：

```
> as.dist (distmat)
   1  2  3
2 -1      
3 -3 -2   
4 -2 -1  1 
```

# android - Android：在图像中创建许多按钮

> ID：14961752
> 
> 赞同：-2
> 
> 时间：2013-02-19T15:58:06.597
> 
> 标签：android, image, button

我有一张图片，我想创建可点击的部分。我曾想过制作几个透明按钮，但我不确定它们是否以不同的屏幕分辨率对齐。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:15:43.310

一个好方法是使用**OnTouchListener**而不是**OnClickListener**：

这是一个示例代码：

```
 ImageView myView = (ImageView) findViewById(R.id.image_view);
    myView.setOnTouchListener(new OnTouchListener(){

        @Override
        public boolean onTouch(View view, MotionEvent event) {
            // TODO Auto-generated method stub
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                float x = event.getX();
                float y = event.getY();
                float xRef = view.getX();
                float yRef = view.getY();
                // calcualte position inside view
                x = x - xRef;
                y = y - yRef;
                //decode (x, y) to parts

                return true;
            }
            return false;
        }

    }); 
```

# c++ - C++中空指针的缺点

> ID：14961755
> 
> 赞同：3
> 
> 时间：2013-02-19T15:58:25.170
> 
> 标签：c++, pointers, void

据我所知，C++ 中的 void 指针`void*`可以指向任何东西。如果我想在不使用某种继承的情况下开发解决方案，这可能非常有用（对我来说）。但我想知道的问题是这种方法是否存在任何性能缺陷？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T16:05:09.883

最大的缺点是使用 void 指针会阻止编译器执行类型检查。尤其是在支持面向对象原则的语言中，我认为大量使用 void 指针会很奇怪。

您更有可能在 C 中找到 void 指针来模仿一些多态行为，但存在相同的类型安全问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T16:22:22.700

有两个严重的性能缺陷`void*`。首先是它使程序的理解和维护变得更加困难，这对维护程序员的性能和运行时产生了严重影响，因为当分析器显示你在哪里时，它会使重新设计软件变得更加困难。有性能问题。最快的程序是首先编写好的程序，因为这样就可以在关键位置进行局部优化，而无需重写整个程序。

第二个性能影响是 a`void*`可以给任何东西起别名。正确的别名分析是编译器优化的重要组成部分，任何使这变得更加困难的事情都会阻碍优化器，并可能导致代码变慢。（`char*`并且`unsigned char*`有类似的效果。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T16:07:05.587

`void*`除了编译器无法对其指向的类型做出假设之外，使用 a 时没有性能缺陷。它仍然像其他指针一样。

A`void*`在 C 中对于指向任意类型很有用，因为任何指向对象类型的指针都可以转换为 a `void*`。然而，用它做几乎任何事情都会导致未定义的行为。您只能安全地将其转换回原始指针类型。

但是，在 C++ 中，我们有一种更好的方法来存储指向任意类型的指针——模板。对于某些模板参数`T`，我们可以有一个`T*`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T16:05:49.490

> `void*`可以指向任何东西。如果我想在不使用某种继承的情况下开发解决方案，这可能非常有用（对我来说）

如果您正在考虑将`void*`指针传递给某个函数，请考虑一下它的使用方式。为了调用该对象的方法或访问其成员，无论如何您都需要知道该对象的类型。

`void*`仅在确实需要时使用。如果您正在寻找一种如何以更通用的方式处理对象的方法，那么只需进行适当的 OO 设计。当你有一个`void*`指针时，你唯一知道的就是*“内存中这个地址有东西”*，仅此而已。

使用`void*`指针的性能与任何其他指针相同。**代码的安全**性、**可理解**性以及与之相关的**可扩展性**和**可维护性**应该是您关心的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T16:06:59.100

可能仍然存在 a`void*`大于其他类型的指针的平台，或者具有不同的格式，因此转换为或`void*`转换为实际的转换代码。在常见的（x86，ARM）硬件上，情况并非如此，所以没有性能问题`void*`——你只是放弃了类型安全。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T16:26:32.857

是的 - 您可能会有一些性能缺陷。通过使用`void *`，您可以禁用基于严格混叠假设的优化。

例子

```
void fun(void * param1, int & param2)
{
    param2 = 7; // 1
    // do something with param1, param2 not used
    param2 += 1; // 2
} 
```

如果没有`void *`变量，编译器可能会删除赋值 1 并在 2 中只生成`param2 = 8`。但现在它不能，因为`param1`可能指向`param2`，如果你调用了`fun(&i, i)`。

[有关严格混叠的更多信息](http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T16:03:41.440

我不明白为什么在使用 void 指针而不是任何其他类型的指针时会出现任何性能问题。我会更关心安全性，你放弃了一个 void 指针。

# c# - 使用 HTMLAgilityPack 加载 HTML 字符串

> ID：14961759
> 
> 赞同：1
> 
> 时间：2013-02-19T15:58:32.550
> 
> 标签：c#, html-agility-pack

我正在将作为字符串传递的 HTML 加载到 HTMLAgilityPack 文档中，如下所示。

```
 HtmlDocument html = new HtmlDocument();
 html.OptionOutputAsXml = true;
 html.LoadHtml(htmlText);
 HtmlNode document = html.DocumentNode; 
```

加载文档后。InnerHtml 显示所有引号的 "(sample below)。我怎样才能避免这种情况？

```
<span style=\"\\&quot;MARGIN-LEFT:\" class=\"\\&quot;form_title\\&quot;\" _20px5c_22_=\"\">MyText</span> 
```

我希望示例显示如下。

```
<span class=\"form_title\" style=\"MARGIN-LEFT: 20px\">MyText</span> 
```

从获得的“文档”中，我必须循环并查找元素（使用 fizzler 组件）。但是随着“＆”的出现，我无法这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:24:21.950

添加后问题解决

```
HtmlAgilityPack.HtmlNode.ElementsFlags.Remove("form"); 
HtmlDocument html = new HtmlDocument();
html.OptionAutoCloseOnEnd = true; 
```

# facebook - Facebook 是否为其移动应用程序使用 HTML5 框架？

> ID：14961760
> 
> 赞同：0
> 
> 时间：2013-02-19T15:58:33.720
> 
> 标签：facebook, html, mobile

Facebook iOS 应用程序、Android 应用程序和移动网站都非常相似，这让我觉得它们都是使用相同的 HTML5 框架构建的。我对左上角菜单按钮的 UI 特别感兴趣，当单击该按钮时，窗口向右滑动以显示菜单。我也见过其他应用程序也这样做，所以我认为他们可能使用的是通用框架。我研究过 JQuery Mobile 和 Sencha Touch，但他们没有那个菜单 UI。有谁知道他们在用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:26:04.950

Facebook 不再使用 HTML5。这是一个 Sencha Touch 插件，据我所知，这是目前 ST 可用的最接近的插件：
[Sencha Market 上的 Slide Navigation Menu](https://market.sencha.com/extensions/collapsible-slide-navigation-menu)

# c# - 我可以为此目的使用 File.Encrypt 吗？

> ID：14961762
> 
> 赞同：0
> 
> 时间：2013-02-19T15:58:35.173
> 
> 标签：c#, .net

我有一个应用程序，它的名称和徽标可以直接从同一目录中的 TXT 和 PNG 文件更改。

我想让用户能够从执行以下操作的另一个应用程序更改徽标和文本文件：

`Takes the Logo.png , Name.txt file paths and the directory of my Software then encrypt these two files and put them in the Directory of the Software`

另一方面。该软件将解密这两个文件并将它们写入硬盘到临时目录，然后使用它们显示名称和徽标。

我搜索了加密文件的最简单和最简单的方法，我发现：

从 MSDN ：

文件.加密（）： `Encrypts a file so that only the account used to encrypt the file can decrypt it.`

谁能告诉我“**只有用于加密文件的帐户才能解密它**”是什么意思？

Application1加密来自**Computer1**的**应用程序**，然后该文件将由**Application2**中的**Computer2解密**

 **加密会正常工作吗？

**编辑：**
我需要加密这两个文件的目的是避免用户直接从目录中更改徽标和应用程序名称

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:07:47.167

这将加密文件，但不会像您期望的那样 - 几乎可以肯定它不会被另一台计算机上的另一个应用程序/用户解密。

该`Encrypt`方法基本上只是切换底层 NTFS 驱动程序的一个功能来加密文件系统本身上的指定文件。不错的功能是它（通常）为用户提供无缝文件加密，但它并不是真正的可移植加密。这与打开文件属性，单击高级按钮并选择“加密”复选框相同。

有关 NTFS 加密功能的更多信息，请访问：[http ://technet.microsoft.com/en-us/library/bb457116.aspx](http://technet.microsoft.com/en-us/library/bb457116.aspx)

![高级文件属性](../Images/158eaea4d8139ae4ed769707878f0e15.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:02:47.353

不可以。您应该使用适当的加密方法，例如 System.Security.Cryptography 命名空间中的加密方法。也有一个流实现，称为 CryptoStream，你可以用它包装一个 FileStream 来加密文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T16:03:13.867

这与 Windows 的 EFS 有关。

您可以在 Windows 资源管理器中通过右键单击文件、属性、高级、加密内容来尝试它。当您的应用程序访问文件数据时，它会即时自动解密/加密。但是，如果另一个用户登录机器并复制文件，它将显示为已加密，因为加密是基于用户令牌的。

这可能是也可能不是您想要的，这取决于您对该功能的预期用途。如果您不希望用户能够修改您的应用程序之外的数据，这还不够。**

# c# - Azman 使用本地 xml 或 SQL Server 进行存储时出现相同的错误

> ID：14961764
> 
> 赞同：0
> 
> 时间：2013-02-19T15:58:46.590
> 
> 标签：c#, azman

最近，我们系统中的两个用户在尝试将他们添加到角色时开始收到此错误。

> *System.Runtime.InteropServices.COMException：当该文件已存在时无法创建该文件。（来自 HRESULT 的异常：0x800700B7）*

有趣的是，无论配置如何，都会发生相同的错误，在本地运行我们使用 XML 存储，而在测试环境中它使用 SQL Server。

这是爆炸的代码`AddMemberName()`--正如您所看到的，这是非常简单的东西，并且在一段时间内运行良好，突然之间只有这两个用户

```
public void AddUserToRole(string roleName, string userName, bool upn)
{
   string uName = userName;

   if (upn)
      uName = getAltUserNames(userName).First();

   AzAuthorizationStore store = new AzAuthorizationStoreClass();
   store.Initialize(2, _provider.StoreLocation, null);
   IAzApplication app = store.OpenApplication(_provider.ApplicationName, null);
   IAzRole role = app.OpenRole(roleName, null);
   role.AddMemberName(uName, null);
   role.Submit(0, null);
   Marshal.FinalReleaseComObject(role);
} 
```

我尝试在谷歌上搜索各种不同的术语，但找不到任何关于此的内容。我确实读过[这篇文章](http://blogs.msdn.com/b/pedram/archive/2007/10/04/azman-data-store-through-com-interop.aspx)，但这似乎不是问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:07:31.203

尤其要检查 Active Directory 用户名和基础 OU 名称。检查重复和不匹配。我曾经遇到一个问题，用户结婚并且她的名字改变了。

# java - 自定义 Lombok 扩展需要 Lombok 包吗？

> ID：14961765
> 
> 赞同：5
> 
> 时间：2013-02-19T15:58:46.703
> 
> 标签：java, eclipse, lombok

我一直在尝试向 Lombok 添加自定义注释。我的出发点是 GitHub 上源代码的一个分支。

我添加了一个可以正常工作的注释。我可以使用包含的 Eclipse 启动（或构建一个 jar 并将其交换到我的 eclipse.ini 中）来测试并查看结果：我已经成功地将一个方法插入到一个类中。

现在，这只有在我将额外的处理程序类放在`lombok`包下时才有效。如果我把它们放在另一个包下，它们根本就行不通。我可以创建一个新的物理源目录，调整构建脚本以适当地包含它，并让我的新类存在于其中，只要它在 lombok 下逻辑打包新类。

为什么是这样？反正周围有吗？我想将我写的任何添加分开到一个新的顶级包中，以使它们与官方的龙目岛扩展区分开来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:32:14.717

由于 Eclipse 中的类加载器问题，Lombok 修补 Equinox 类加载器以从不同位置加载 lombok 包中的类。这是硬编码的。所以你的扩展也必须在 lombok 包中，或者你需要修改[EclipsePatcher 中的代码，使其](https://github.com/rzwitserloot/lombok/blob/v0.11.6/src/eclipseAgent/lombok/eclipse/agent/EclipsePatcher.java#L79)也包含你自己的包。

完全披露：我是 Project Lombok 的开发人员之一。

# python - 检测是否勾选了复选框？

> ID：14961768
> 
> 赞同：1
> 
> 时间：2013-02-19T15:58:59.733
> 
> 标签：python, django

在 django 中，我执行以下操作来获取文本框的值，例如：

在我的 HTML 页面上：

```
<input type="text" name="inputBox" id="inputBox" /> 
```

在 views.py 页面上：

```
valueOfTextBox= request.POST.get('inputBox', False) 
```

如何获取复选框是否“已选中”？

```
<input type="checkbox" id="selectAll"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:06:39.183

If the inputBox is included in request.POST it has been checked. Therefore you could do the following.

```
 if request.POST.get('selectAll', False):
     ...do stuff... 
```

See [this](https://stackoverflow.com/a/6223247/237690) answer for details.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:06:50.923

It's exactly the same, just write:

```
request.POST.get('selectAll', False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:18:40.290

您的复选框上没有 value="" 属性，因此如果选中它，您的 POST 变量将具有值“on”，如果未选中，该变量将不在您的 POST 字典中。所以你可以像以前的答案中描述的那样检查它。

PS：get() 方法的第二个参数不需要写 False，它会自动返回 None 和 False 一样的布尔值。

# c - 在调用另一个函数时如何传递函数的参数？

> ID：14961771
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:05.027
> 
> 标签：c, multithreading, pthreads

如何访问 runner 函数的 main () 中动态声明的变量和矩阵。我将它们作为参数传递给 runner 但我不确定它是否正确，因为我必须在 pthread_create 函数调用中传递 runner。在将其传递给 runner 时，我是否必须提供我在 runner 中传递的所有参数？我该怎么做 ？

```
main() {
        int  m, n, p, q
        int **a, **b, **c;
    ... // dynamically allocating first, second and multiply matrices and taking values    
           // m , n , p , q from user or a file.
    ...
r= pthread_create(threads[i], NULL, runner, (void*) &rows[i]);} // should I specify the                
  // parameters of runner in it ?

 void *runner (int **a, int **b, int **c, int m, int n, int p ) // is it right ???
 { 
        .... using all parameters
pthread_exit(NULL);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:00:57.213

线程函数仅从 pthreads 获取单个参数，a `void *`：

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                      void *(*start_routine) (void *), void *arg); 
```

解决此问题的方法是定义 a `struct`，对其进行实例化并使用所需值对其进行初始化，然后将指向结构的指针传递给[`pthread_create()`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html).

这个指针`void *arg`在上面的原型中。手册页说：

> 新线程通过调用`start_routine()`;开始执行 `arg`作为 的唯一参数传递`start_routine()`。

# java - 流 - ObjectOutputStream 给出 NULL

> ID：14961776
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:13.843
> 
> 标签：java, ioexception, objectoutputstream, objectinputstream

我有两个可以相互配合使用的应用程序。一个是“服务器”类型的应用程序，它没有任何 GUI 界面并处理对数据库的查询并处理来自客户端的请求。另一个是“客户端”，主要是一个 GUI，供用户以结构化方式与数据库信息进行交互。

**问题/麻烦/需要帮助**

我遇到的问题是我可以成功地将一个对象（一个字符串 []）发送到服务器并且没有任何问题。客户端应用程序发送它，服务器应用程序接收它并成功处理它。

如果我尝试发送第二个 String[]，则客户端编译数组并认为它已发送，但服务器从未收到 is（仅获取 null）并产生 IOException。

即使是包含完全相同数量的位置和完全相同格式和位置的完全相同文本的数组也是如此。

printStackTrace() 产生的错误是：

```
Java.io.OptionalDataException
at java.io.ObjectInputStream.readObject0 (ObjectInputStream.java:1367)
at java.io.ObjectInputStream.readObject (ObjectInputStream.java:369)
at server.ConnectionThread.processClientRequests(ConnectionThread:204)
at server.ConnectionThread.processClientRequests(ConnectionThread:50)
at javalang.Thread.run(Thread.java:722) 
```

第 204 行的代码是读取 ObjectStream 的点：

```
String[] addArray = (String[]) ois.readObject(); 
```

ois 是一个 ObjectInputStream，初始化如下：

```
private ObjectInputStream ois = new ObjectInputStream(socket.getInputStream()); 
```

**客户代码**

用于将这些对象发送到服务器应用程序的客户端代码是：

```
ObjectToServer.writeObject(String[] var);
ObjectToServer.flush();
ObjectToServer.reset(); 
```

**评论**

对我来说没有意义的是，这种完全相同的代码格式用于通过 objectOutputStream 从 SERVER 成功发送多个 String[] 到 CLIENT 应用程序，而无需发送“null”

我已经谷歌搜索了这个，一切都无济于事。

如果可以的话，请有人帮忙！！

```
 ADDITIONAL CODE

// CONNECTION THREAD IS ON SERVER APP, SETS UP STREAMS AND WAITS FOR MESSAGES FROM CLIENT
// HANDLES COMMUNICATION FROM CLIENT AND REST OF SERVER

public class ConnectionThread implements Runnable
{

    private Socket socket;
    private SystemCore core;
    //Streams for connections
    private InputStream is;
    private OutputStream os;
    //Writers and readers for communication of Strings
    private PrintWriter toClient;
    private BufferedReader fromClient;
    // Writers and readers for sending and receiving Objects between server and client.
    private ObjectInputStream ois = null;
    private ObjectOutputStream oos = null;
    //Protocol
    static final String CLIENT_QUITTING = "Exit";

    public ConnectionThread(Socket s, SystemCore aSysCore)
    {
        socket = s;

        // State of the SystemCore as taken from HelloServer
        core = aSysCore;
    }

    public void run()
    {
        try
        {
            openStreams();
            toClient.println(MESSAGE_TO_CLIENT);
            processClientRequests();
            closeStreams();
            this.socket.close();
        }
        catch (OptionalDataException ode )
        {
            System.out.println("OptionalDataException: ");
            System.out.println("length is: " + ode.length);
        }
        catch (IOException ioe)
        {
            System.out.println("IO trouble with a connection in ConnectionThread run() " + ioe.getMessage());
            ioe.printStackTrace();
        }
       catch (ClassNotFoundException cnf)
        {
            System.out.println("Class trouble with a connection in ConnectionThread run() " + cnf.getMessage());
            cnf.printStackTrace();
        }
        catch(ParseException pe)
        {
            System.out.println("Parse trouble with a connection in ConnectionThread run() " + pe.getMessage());
            pe.printStackTrace();
        } 
    }

    /**
     * Opens streams between the server and the client.
     *
     * @throws IOException
     */
    private void openStreams() throws IOException
    {
        final boolean AUTO_FLUSH = true;
        this.is = this.socket.getInputStream();
        this.fromClient = new BufferedReader(new InputStreamReader(is));
        this.os = this.socket.getOutputStream();
        this.toClient = new PrintWriter(os, AUTO_FLUSH);

        //Object streams.
        oos = new ObjectOutputStream(socket.getOutputStream());
        ois = new ObjectInputStream(socket.getInputStream());

        System.out.println("...Streams set up");
    }

    /**
     * Private method that accepts arguments from a client and executes the related
     * commands in the systemcore as long as the command passed from the client
     * is not CLIENT_QUITTING.
     *
     * @throws IOException
     * @throws ClassNotFoundException
     */
    private void processClientRequests() throws IOException, ClassNotFoundException, ParseException
    {
        String commandFromClient;
        commandFromClient = fromClient.readLine();
        while (!(commandFromClient.equals(CLIENT_QUITTING)))
        {
            if (commandFromClient.equals("addProjectPrepare"))
            {
                String[] addArray = (String[]) ois.readObject();
                core.addProjectPrepare(addArray);
            }
            if (commandFromClient.equals("editProjectPrepareDetails"))
            {
                String[] editArray = (String[]) ois.readObject();
                recruit.editProjectPrepareDetails(editArray);               
            }
        }
           commandFromClient = fromClient.readLine();
    }

**// CLIENT SIDE (User GUI) CODE THAT SENDS STRING[] TO THE SERVER**

public void saveAction()
    {
        // TEST TO SEE IF THE DATE ENTERED IS CORRECT FORMAT, IF NOT NO SAVE OCCURRS

    boolean parsedOk = false;

    if (this.arrivalDateTextField.getText().isEmpty() == false)
    {
        try
        {
            // Check if date is correct format. Nothing will be done with 
            // the testDate object

            MyDate testDate = new MyDate(
                    this.arrivalDateTextField.getText());

            //Allow write to server to occur.
            parsedOk = true;
            //If date is okay, send form data to server.
        }
        catch (ParseException pe)
        {
            this.arrivalDateTextField.setText(""); // Set text field to blank
            int messageIcon = javax.swing.JOptionPane.ERROR_MESSAGE;
            JOptionPane.showMessageDialog(this, "Invalid date",
                    "Warning", messageIcon);
        }
    }
    else
    {
        parsedOk = true; // No date entered so allow blank. 
    }
    if (parsedOk == true)
    {
        // WRITE DATA TO SERVER OCCURS HERE: 

        try
        {

            **//getPersonDetails() returns a String[]**

            ManageClientConnections.toServer.println("addNewData");                 
       ManageClientConnections.objectToServer.writeObject(this.getPersonDetails());
            ManageClientConnections.objectToServer.flush();
            ManageClientConnections.objectToServer.reset();
        }
        catch (IOException ioe)
        {
            System.out.println(
                    "While writing new person to server, there was an error: " + ioe.getMessage());
        }

        // And dispose of the GUI, inside the parseok if clause
        this.dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:00:24.060

You can't create *multiple* input/output streams over the same socket input/output streams. that doesn't work. you need to pick one type of stream and stick with it. Since you need to send structured data, you should use *only* the Object streams and ditch the Print streams. if you need to send different types of messages from client to server, then you should consider using a wrapping Serializable object type (e.g. Message) which can contain different types of messages.

# javascript - 使用 JS 高亮单选按钮

> ID：14961778
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:16.907
> 
> 标签：javascript, radio-button, highlight

这是我的单选按钮：

```
<label>
  <input type="radio" id="chk1" name="chooseSupp" onclick="change(this);">
    Chosen Supplier
</label> 
```

这是我突出显示单元格的Javascript：

```
<script type="text/javascript">
  function change(obj) {
    var tr=obj.parentNode.parentNode;
    tr.style.backgroundColor=(obj.checked)? 'red' : 'transparent';
  }
</script> 
```

问题是，当我单击一个单选按钮时，它会突出显示，但是当我单击另一个单选按钮时，它也会突出显示，但第一个按钮上的突出显示并没有消失。

我的单选按钮处于循环状态，不确定这是否与任何可能的解决方案相关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:04:31.333

```
 function change(obj) {
      var tr=obj.parentNode.parentNode.parentNode;
      var tbl = tr.parentNode;
      var inputs = tbl.getElementsByTagName("input");
      for(var i = 0;i<inputs.length;i++)
          inputs[i].parentNode.parentNode.parentNode.style.backgroundColor='transparent';
      tr.style.backgroundColor=(obj.checked)? 'red' : 'transparent';
    } 
```

首先使所有其他输入透明。然后将您的样式应用于新样式。

您也可以检查是否检查了其他输入，就像您检查当前输入一样。如果您使用复选框，那将很有用。

# safari - 在哪里下载最新的 Safari？

> ID：14961779
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:20.277
> 
> 标签：safari

有谁知道在 apple.com 上哪里可以获得最新的 Safari？IE、Chrome 和 Firefox 都有“最新”版本，但我找不到 Safari 的类似版本。

我会在这里猜到，但没有去。

[http://support.apple.com/downloads/](http://support.apple.com/downloads/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:16:12.260

您不能简单地为 OS X 下载 Safari。您可以通过普通的 Apple 软件更新或通过 APP Store（我猜是从 10.8 开始）获得在已安装的 OS X 上运行的 Safari 更新。

Safari 6 仅适用于 Mountain Lion 和 Lion。

PC 的最新版本是`Safari 5.1.7`. 没有适用于 PC 的版本 6。您可以在此处下载：[Safari 5.1.7 for Windows](http://support.apple.com/kb/dl1531)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T11:41:45.877

不再开发 Windows 版 Safari。由于现有答案中的所有链接都已失效，或者未提供预期信息。我想在这里提供一个工作链接-> [SafariSetup](http://appldnld.apple.com/Safari5/041-5487.20120509.INU8B/SafariSetup.exe)

# highcharts - 自定义绘图

> ID：14961783
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:31.420
> 
> 标签：highcharts

我必须根据从 db 调用中获得的对象创建控件。对象可以是任何东西，因此必须动态创建图表。为了说明我的问题，可以说对象看起来像

```
var obj = [{name:"int",data:[2,5,8,11,12]},
           {name:"double",data:[1.1,4.1,7.1,10.1,11]}] 
```

解析 obj 后，用户可以选择他们想要绘制的内容。无论他们想看`int`还是`double`在 x/y 轴上。然后绘制他们想看的系列。我的问题是，每次我绘制系列时，无论我如何格式化它都会用 yAxis 和 xAxis 上的值的数组索引来绘制系列。我怎样才能做到这一点，以便用户可以使用任一系列绘制 ​​int/double 关系？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:35:49.423

因此，您可以使用 select html obejct，然后捕获选择事件和即 addSeries() 函数来绘制图表。 [http://api.highcharts.com/highcharts#Chart.addSeries()](http://api.highcharts.com/highcharts#Chart.addSeries())

# matlab - 插值上的任意采样

> ID：14961784
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:35.040
> 
> 标签：matlab, interpolation, spline, cubic

我有任意点（8192,4678,1087.2,600,230.4 等），我想在其他定义点（100,500.3,802,2045,4399.5125 等）进行插值和重新采样。

我尝试了三次样条插值，但它使用的是稳定的步进采样，并且根据步进采样，它可能无法生成我需要的值。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:09:45.083

这一切都取决于潜在的物理现象。插值和只是弥补东西之间有一条细线。

*   我可能会首先上[采样](http://en.wikipedia.org/wiki/Upsampling)和[过滤](http://en.wikipedia.org/wiki/Low-pass_filter)，直到我以固定采样率获得有意义的信号。

*   然后我会使用一些插值方法来估计目标点的信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:18:34.290

如果您的观点是`x1=[...]`并且`y1=[...]`您想评估样条曲线的新基础，`x2=[...]`那么您

```
y2 = spline(x1,y1,x2) 
```

** 例子 **

```
x1 = [0,2,4,6,8].'
y1 = [24,25,22,14,6].'

x2 = [2,2.5,3,3.5,4].'
y2 = spline(x1,y1,x2)

    y2 =

       25.0000
       24.7227
       24.1563
       23.2617
       22.0000 
```

![阴谋](../Images/0736766f4871419feda9f5cb34d6cb74.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:28:03.333

我建议你考虑倒着做。

与其生成很多点并希望您需要的点在那里，不如计算插值公式（可能是分段线性或更复杂的）并在所需点处评估函数。

假设您有`x = [1 2 3 4 10]`并且`y = [11 22 13 24 11]`您在第 6 点的线性插值将是：

```
24+(6-4) * (11-24) / (10-4) 
```

概括这一点应该不难。

# c# - 运行dll方法隐藏

> ID：14961785
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:35.553
> 
> 标签：c#, dll, process, hidden

我正在使用第 3 方 dll (jlink.dll)，一切都很好。唯一的问题是 jlink.dll 有时会显示一个窗口。我不想显示那些窗口。换句话说，假设 dll 的代码有方法：

```
// some method on jlink dll
public bool OppenConnection(string connectionString)
{
     if(string.IsNullOrEmpty(connectionString)){
        MessageBox.Show("SomeError"); // <-----------------------------
        return false;
     }

     // some logic
     return true;
} 
```

当我从我的程序中调用该方法时，如果出现错误，jlink.dll 将显示一个窗口，我不希望这样。如果该方法返回 false，我可以自己显示一个窗口。**所以我的问题是如何隐藏这些窗口？**

* * *

这是我现在的解决方案：

我发现如果我从隐藏进程执行该方法（OppenConnection），则从 dll 显示的窗口也将被隐藏。这种方法的问题是现在我需要一个更多的过程。一个不是隐藏的（我的 gui），另一个是隐藏的调用 jlink.dll。我使用 namedPipes 在这两个进程之间交换消息。事情变得越来越复杂，如果我可以使用一个过程而不是两个过程会很好。此外，我必须有一个单独的线程来关闭 jlink.dll 创建的所有隐藏窗口。**如果我可以像隐藏进程一样从非隐藏进程执行 jlink.dll 方法，那就太好了**。这样我可以有一个进程而不是两个，删除所有命名管道，事情会简单得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:13:06.817

你想调用一个你无法控制的 DLL 来调用方法的特定部分，而不是方法中的所有逻辑。您有几个选择：1）使用它，2）根据您想要的功能滚动您自己的代码（使用反射器之类的东西），或 3）使用反射器之类的东西来查看是否有任何方法可以暴露内部结构你确实想要这样你就可以做 1 和 2 的组合。

如果我遗漏了什么，请告诉我 ;-)

# sql - SQL Server 2005：将一对多（1 Order-Many Charges）结果插入@table

> ID：14961787
> 
> 赞同：1
> 
> 时间：2013-02-19T15:59:36.703
> 
> 标签：sql, sql-server-2005

我有一个订单列表

**订单**

```
OrderID     CustomerID      ProductID
-------------------------------------
1           32              15
2           16              28
3           7               20
4           32              16 
```

以及需要适用于这些订单的费用清单

**收费**

```
ChargeID    CustomerID      ProductID   Charge  Desc
--------------------------------------------------------------------
1           32              0           8.99    Basic Cost Per Order
2           32              15          10.05   Subcharge: Delivery
3           16              28          8.99    Basic Cost Per Order
4           16              0           16.05   Subcharge: Delivery
5           7               20          17.99   Basic Cost Per Order 
```

笔记：

在`charges`中，如果是`ProductID = 0`，则表示该费用将适用于所有产品。

例如

*   费用 1 -`8.99`将适用于所有`Products`客户 32
*   费用 2 -`10.05`仅适用`ID=15`于客户 32 的产品

因此：由于未找到*客户 32的**ProductID*
`OrderID = 4` ，因此不会进行*Subcharge Delivery*

 **问题是：
如何在`@tempQuote`表格中填写这些订单的报价？

因此，在这种情况下所需的结果集将是：

```
OrderID ChargeID
--------------------
1       1
1       2   
2       3           
2       4
3       5
4       1 
```

问题是我不能简单地将*OrderID*插入`@tempQuotes`表中，然后收取费用，因为可能有多次费用，然后我得到错误

> *子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、> >、>= 或子查询用作表达式时，这是不允许的*

如果有一些方法，金牌显然会是：如果有多次收费，那么对于每个多次收费，将*orderid/chargeID*插入`@tempQuotes`表中，例如，`@tempQuotes`如果只有 1 行，或者如果有多次收费，则更新表插入每个订单/费用或将所有适用的*ChargeID*保存到`@tempQuotes`附加列中，例如

 *```
OrderID, ChargeID
1        1,2 
```

而不是更新费用，例如

```
 Insert into @tempQuotes(OrderID)
select OrderID from #Orders

Update  t
set ChargeID = (Select #Charges.ChargeID from @tempQuotes t
inner join #Orders on t.OrderID = #Orders.OrderID
inner join #Charges on #Orders.CustomerID = #Orders.CustomerID)
from @tempQuotes t

select * from @tempQuotes 
```

表的设置：

```
IF OBJECT_ID('tempdb..#Orders') IS NOT NULL
BEGIN
drop table #Orders
END

IF OBJECT_ID('tempdb..#Charges') IS NOT NULL
BEGIN
drop table #Charges
END

create table #Orders(
OrderID int identity(1,1),
CustomerID int,
ProductID int,
)
Insert into #Orders(CustomerID,ProductID) values (32,15)
Insert into #Orders(CustomerID,ProductID) values (16,28)
Insert into #Orders(CustomerID,ProductID) values (7,20)
Insert into #Orders(CustomerID,ProductID) values (32,16)

create table #Charges(
ChargeID int identity(1,1),
CustomerID int,
ProductID int,
Charge     decimal(10,2),
[Desc]     nvarchar(50),
) 
Insert into #Charges(CustomerID,ProductID,Charge,[Desc]) values (32,    0,  8.99,   'Basic Cost Per Order')
Insert into #Charges(CustomerID,ProductID,Charge,[Desc]) values (32,    15, 10.05,  'Subcharge: Delivery')
Insert into #Charges(CustomerID,ProductID,Charge,[Desc]) values (16,    28, 8.99,   'Basic Cost Per Order')
Insert into #Charges(CustomerID,ProductID,Charge,[Desc]) values (16,    0,  16.05,  'Subcharge: Delivery')
Insert into #Charges(CustomerID,ProductID,Charge,[Desc]) values (7, 20, 17.99, 'Basic Cost Per Order')

declare @tempQuote table(
OrderID int,
ChargeID int 
```

)

```
declare @tempQuote table(
OrderID int,
ChargeID int
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:10:10.987

这应该有效：

```
SELECT O.OrderId, C.ChargeId
FROM Orders O
  JOIN Charges C ON O.CustomerId = C.CustomerId AND
    (C.ProductId = O.ProductId OR C.ProductId = 0)
ORDER BY O.OrderId, C.ChargeId 
```

这是示例[Fiddle](http://sqlfiddle.com/#!3/88339/1)。

它会产生以下结果：

```
ORDERID   CHARGEID
1         1
1         2
2         3
2         4
3         5
4         1 
```***

# sql-server-2008 - 从关系中选择最后一条记录

> ID：14961792
> 
> 赞同：1
> 
> 时间：2013-02-19T15:59:49.513
> 
> 标签：sql-server-2008, tsql

我有这种情况。我有一张`Orders`与`OrderStatus`.

`OrderStatus`

`id | orderId | created`

我需要检索`Orders`其**最后**状态。我试过这个查询，我不知道它是否有效。我需要知道是否有更好的解决方案。

```
select Orders.id, OrderStatus.status from Orders
inner join OrderStatus on OrderStatus.id = 
    (select top 1 id from OrderStatus where orderId = Order.id order by created desc) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:05:32.083

您可以使用以下[`Row_Number`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)功能：

```
WITH CTE AS
(
   SELECT Orders.id, OrderStatus.status,
      RN = ROW_NUMBER() OVER (
                        PARTITION BY OrderStatus.OrderId 
                        ORDER BY created DESC) 
   FROM Orders
   INNER JOIN OrderStatus ON  OrderStatus.OrderId = Orders.id
)
SELECT id, status
FROM CTE WHERE RN = 1 
```

我使用了一个[common-table-expression](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)，因为它可以直接过滤并且它也非常易读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T16:05:37.367

相关子查询通常是坏消息（有时 SQL Server 可以优化它，有时它就像一个非常慢的循环）。也不确定为什么你认为你`DISTINCT`只需要最新状态时需要，除非你没有任何主键......

```
;WITH x AS 
(
  SELECT o.id, os.status, 
    rn = ROW_NUMBER() OVER (PARTITION BY os.orderId ORDER BY created DESC)
    FROM dbo.Orders AS o
    INNER JOIN dbo.OrderStatus AS os
    ON o.id = os.orderId
)
SELECT id, status
  FROM x
  WHERE rn = 1; 
```

# c# - 在 azure 容器中获取最后一个 blobitem

> ID：14961793
> 
> 赞同：4
> 
> 时间：2013-02-19T15:59:50.423
> 
> 标签：c#, asp.net, azure, blobstorage

我的应用程序使用 Microsoft Azure 云 blob 存储，我正在寻找一种替代方法来获取容器中文件夹中的最后一项。

现在是这样的：

```
CloudBlobClient blobClient = new CloudBlobClient("http://ferryjongmans.blob.core.windows.net/", new StorageCredentialsSharedAccessSignature(signature.Text));
CloudBlobContainer container = blobClient.GetContainerReference(cameraList.Items[Convert.ToInt32(Label1.Text)].ToString());

//Maak mooie datum notatie zoals : 01-01-2013 (standaard methode geeft in dit geval: 1-1-2013)
string dag = DateTime.Now.Day.ToString();
if (dag.Length == 1)
{
    string temp = dag;
    dag = "0" + temp;
}
string maand = DateTime.Now.Month.ToString();
if (maand.Length == 1)
{
    string temp = maand;
    maand = "0" + temp;
}
//Complete datum (DD-MM-YYYY)
string datum = dag + "-" + maand + "-" + DateTime.Now.Year.ToString();

CloudBlobDirectory direct = container.GetDirectoryReference(cameraList.Items[Convert.ToInt32(Label1.Text)].ToString());
CloudBlobDirectory subdir = direct.GetSubdirectory(datum);

BlobRequestOptions options = new BlobRequestOptions();
options.UseFlatBlobListing = true;
options.BlobListingDetails = BlobListingDetails.Snapshots;
//maak string voor het tijdelijk oplaan van de uri
string uri="";
//Ken steeds een waarde aan 'uri' toe om vervolgens wanneer de for loop klaar is
//de laatste uri te krijgen.
foreach (var blobItem in subdir.ListBlobs(options))
{
    uri = blobItem.Uri.ToString();
}
string url = uri + signature.Text;
if (url != pictureBox2.ImageUrl)
{
    loadImage(url);
} 
```

所以我循环遍历这些项目，每次都使用相同的字符串来分配 blob 的 URI。循环完成后，我的字符串具有目录中最后一项的 URI。

我想我可以以更有效的方式做到这一点。该目录中有很多 blob。(+- 30000)

这段代码将在一秒钟内运行一次，因此它以有效的方式运行很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:35:26.453

如果您将列表转换为 hashSet 会怎样？为此改变你的foreach，看看发生了什么

```
 var hashSet = new HashSet<IListBlobItem>(subdir.ListBlobs(options).ToList());

 string url = uri = hashSet.Last().Uri.ToString() + signature.Text; 
```

hashSet 的搜索和查找速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:27:29.217

我在我的上传应用程序中创建了一个函数，每次都会在文本文件 (txt) 中写入最新图像的完整 URI

```
 CloudBlobClient blobClient = new CloudBlobClient(sUrl, new StorageCredentialsSharedAccessSignature(signature));
                CloudBlobContainer container = blobClient.GetContainerReference(container1);
                CloudBlobDirectory dir = container.GetDirectoryReference(cameranaam);
                CloudBlob cloudBlob = dir.GetBlobReference(cameranaam+".txt");
                cloudBlob.UploadText(blobSAS.Uri.ToString()); 
```

这是我的另一个项目的计时器，它正在加载服务器的最后一个图像：

```
 blobClient = new CloudBlobClient(blobstoreurl, new StorageCredentialsSharedAccessSignature(signature));
            container = blobClient.GetContainerReference(containerName);
            CloudBlobDirectory dir = container.GetDirectoryReference(comboBoxCameras.SelectedItem.ToString());
            CloudBlob cloudBlob = dir.GetBlobReference(comboBoxCameras.SelectedItem.ToString().Replace(" ","")+".txt");
            pictureBoxLiveViewer.ImageLocation = cloudBlob.DownloadText()+signature; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T17:10:03.503

我发现接受的答案令人困惑且解释不清。我的偏好如下：

要创建一个临时文件（即：它的名称给出了上下文），我使用 Azure Blob 存储虚拟目录并使用**Seconds since Epoch**专门命名该 blob 。

一个例子，假设你有一个路径为“SomeContainer/SomeFolder/”的目录。该目录中有一个或多个文件，使用上面提到的**自纪元以来的秒数**命名。要获取“最后一个”或最新文件，请使用以下命令：

```
StorageCredentials cred = new StorageCredentials("{{YOUR ACCOUNT NAME}}", ""{{YOUR ACCOUNT KEY}}");
CloudStorageAccount storageAccount = new CloudStorageAccount(cred, true);
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient(); //invoke the blob client
CloudBlobContainer container = blobClient.GetContainerReference("SomeContainer"); //get your container reference
CloudBlobDirectory directory = container.GetDirectoryReference("SomeFolder"); //resolve the directory
IListBlobItem latestBlobItem = directory.ListBlobs(true, BlobListingDetails.All).LastOrDefault(); //get the latest blobItem
CloudBlockBlob blockBlob = null;

if(latestBlobItem != null && !String.IsNullOrWhiteSpace(latestBlobItem.Uri.LocalPath))
{
    //get the blob's local path
    string fullLocalPath = latestBlobItem.Uri.LocalPath;
    //remove container and leading slash
    string localPath = fullLocalPath.Substring(fullLocalPath.IndexOf('/', 1) + 1);

    //get your blob reference 
    blockBlob = container.GetBlockBlobReference(localPath);
} 
```

从那里按照您的意愿使用块 blob 参考（下载等）

快乐滴！

# ios - 如何创建模式视图，用于在 iOS 中启动应用程序？

> ID：14961794
> 
> 赞同：0
> 
> 时间：2013-02-19T15:59:51.417
> 
> 标签：ios, modal-dialog, modalviewcontroller

我怎样才能创建一个模态视图，也许是从委托来检查它是否是第一次启动应用程序并显示一个带有关闭按钮的模态视图，以便通知用户一些重要的事情？

我需要该视图仅在应用程序第一次启动时显示，并且不再显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:14:16.490

**首先：**在这里查看我的早期答案：[https ://stackoverflow.com/a/13563490/1359306](https://stackoverflow.com/a/13563490/1359306)

这是一个密码保护模式视图，我每次打开应用程序时都会使用它。答案应该有助于解决实施解决方案时可能出现的一些问题。它`performSegueWithIdentifier`就像我使用故事板一样使用，但您也可以`presentViewController:animated:completion:`用来展示您的视图。

**然后：**请注意，有一个`if`声明可以用来检查是否需要呈现视图。就我而言，我检查用户是否离开应用程序超过 5 分钟。我通过在`NSUserDefaults`每次`applicationWillResignActive`调用时设置一个日期来做到这一点 - 并检查该日期与当前日期/时间之间的差异）。

在您的情况下，您可以执行以下操作：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"firsttime"] == nil) {
    //display modal view
    [defaults setObject:@"YES" forKey:@"firsttime"];
    [defaults synchronize];
} 
```

这将检查`NSUserDefaults`应用程序的。如果 'firsttime' 为 nil（即首次下载应用程序时），我们将显示视图。然后我们将键设置为“YES”，这意味着它永远不会再等于 nil - 所以视图永远不会显示。

这对于在应用首次加载时显示说明很有用。或者，您可以存储日期或数字，以使代码在未来更具适应性。

的文档`NSUserDefaults`可以在[这里](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:13:43.877

您可以使用`NSUserDefaults`.

在 delegate.h 文件中

```
NSString * firstTime; 
```

在 .m 文件中

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *myStr = [defaults objectForKey:@"str"];
    firstTime =myStr;

    if (firstTime.length==0) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"hi" message:@"You have open this app first time" delegate:self cancelButtonTitle:@"ok" otherButtonTitles: nil];
        [alert show];
        [self firstTime];
    }

    return YES;
}

-(void)firstTime
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *myStr = @"first";
    [defaults setObject:myStr forKey:@"str"];
    [defaults synchronize];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T16:15:05.267

在您的`AppDelegate`使用方法中`didFinishLaunchingWithOptions`检查您的应用程序是第一次启动还是第二次像这样启动

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"firstTime"])
    {
        // show your main view controller
    }
    else
    { // your app is launching first time ....

      // show your modalview controller here and dismiss it & go to main view controller

      // don't forget to update the key so that next time user don't hang in else statement...

        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"firstTime"];
        [[NSUserDefaults standardUserDefaults] synchronize];

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T16:06:19.783

You can use the `presentViewController:animated:completion:` in the UIViewController class.

So here is what I'd do:

1.  Load your main view controller
2.  Check your user preferences to see if your "firsttime" key exists (in your view did load most likely)
3.  If it doesn't display your one-time view
4.  When it completes (which you can know by having a delegate call back to your main view controller), save the "firsttime" key to your user preferences

no source, code (my Mac is at home), but if you follow these simple steps it should work fine for you.

# bash - 用于浏览作为参数传递的一个或多个目录的 Shell 脚本

> ID：14961799
> 
> 赞同：0
> 
> 时间：2013-02-19T16:00:02.320
> 
> 标签：bash, shell

我做了这个脚本，应该接收一个或多个参数，这些参数都是目录，它必须浏览这些目录（一个接一个）并做一些操作。如果参数是`1`（只有一个目录），则操作工作正常，如果传递了多个参数，我应该如何修改我的脚本以使其工作`1`如果我希望它同时在`2`或`3`目录中执行相同的操作示例？谢谢

```
#!/bin/sh
cd $1
for file in ./* # */
do    
  if [[ -d $file ]]
  then
    ext=dir
  else
    ext="${file##*.}"
  fi
  mv "${file}" "${file}.$ext"
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:10:31.100

```
#!/bin/sh

for dir in "$@"; do                     
  for file in "$dir"/*; do
    echo "Doing something with '$file'"
  done
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:04:35.983

首先，如果您使用 bash，请使用 bash shebang (#!/bin/bash)。然后使用

```
#! /bin/bash

for d in "$@"
do
   echo "Do something with $d"
done 
```

迭代命令行参数（在您的情况下为目录）

# objective-c - NSArrays 的 NSmutableArray 异常

> ID：14961803
> 
> 赞同：0
> 
> 时间：2013-02-19T16:00:26.983
> 
> 标签：objective-c, cocoa-touch

我正在尝试列出列表...但是当我使用 [listaCidades count] 时...我抛出异常（对不起，问题很长，但我的意思是所有这些方法都与问题相关）

```
 -(void) preencherCidades  {
for (int iCnt = 0; iCnt < [listaEstados count]; iCnt++) {
    NSString *estado = [listaEstados objectAtIndex:iCnt];
    NSArray *listaNomeCidades = nil;
    NSMutableArray *_listaCidades = [[NSMutableArray alloc]init];
    NSString *path = [[NSBundle mainBundle] pathForResource:estado ofType:@"txt"];
    NSString *file = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];
    listaNomeCidades = [[file componentsSeparatedByString:@"\n"]retain];

    for (int iCnt2 = 0; iCnt2 < [listaNomeCidades count]; iCnt2++) {
        NSArray *listaNomesPrefeitos = nil;
        NSArray *listaPartidosPrefeitos = nil;
        NSArray *listaVereadores = nil;

        NSString *pathNomePrefeitos = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"prefeito-nome-%@",[listaNomeCidades objectAtIndex:iCnt2]] ofType:@"txt"];
        NSString *fileNomePrefeitos = [NSString stringWithContentsOfFile:pathNomePrefeitos encoding:NSUTF8StringEncoding error:NULL];
        listaNomesPrefeitos = [[fileNomePrefeitos componentsSeparatedByString:@"\n"]retain];

        NSString *pathPartidoPrefeitos = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"prefeito-partido-%@",[listaNomeCidades objectAtIndex:iCnt2]] ofType:@"txt"];
        NSString *filePartidoPrefeitos = [NSString stringWithContentsOfFile:pathPartidoPrefeitos encoding:NSUTF8StringEncoding error:NULL];
        listaPartidosPrefeitos = [[filePartidoPrefeitos componentsSeparatedByString:@"\n"]retain];

        NSString *pathVereadores = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"vereadores-%@",[listaNomeCidades objectAtIndex:iCnt2]] ofType:@"txt"];

        NSString *fileVereadores = [NSString stringWithContentsOfFile:pathVereadores encoding:NSUTF8StringEncoding error:NULL];
        listaVereadores = [[fileVereadores componentsSeparatedByString:@"\n"]retain];
        Prefeito *prefeito = nil;
        if([listaNomesPrefeitos count] > 0 && [listaPartidosPrefeitos count]>0)
            prefeito = [[Prefeito alloc]initWithNome:[listaNomesPrefeitos objectAtIndex:0] partido:[listaPartidosPrefeitos objectAtIndex:0] id:iCnt2];
        Cidade *cidade = [[Cidade alloc]initWithNome:[listaNomeCidades objectAtIndex:iCnt2] prefeito:prefeito listaVereadores:listaVereadores id:iCnt2];

        [_listaCidades addObject:cidade];

    }
    [listaCidades addObject:_listaCidades];

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:20:54.907

通过查看您的答案 [Cidade isEqualToString:]:unrecognized selector to instance 0x1cec00。我开始知道这是唯一需要字符串的地方，但您正在返回 Object。你解决问题很好。快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:15:15.177

我解决了这个问题

```
NSMutableArray *listaCidades2 = (NSMutableArray *)[listaCidades objectAtIndex:indiceEstado];  
Cidade *cidade = (Cidade *)[listaCidades2 objectAtIndex:row];
 return cidade.nome; 
```

代替：

```
 - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

    NSMutableArray *listaCidades2 = (NSMutableArray *)[listaCidades objectAtIndex:indiceEstado]; 
return [listaCidades2 objectAtIndex:row];
 } 
```

# visual-studio-2012 - 在 Visual Studio express 2012 for Windows desktop (windows 7) 中结合 c++ 和 c# 项目

> ID：14961808
> 
> 赞同：1
> 
> 时间：2013-02-19T16:00:37.970
> 
> 标签：visual-studio-2012, express

一直在用VS2010 express。我认为用 C# 编写是迈向面向对象语言的一个很好的中间步骤。使我的代码有些重复的一件事是无法在 C# 中使用多类继承。即我不能说A类继承自B类*和*C类。

c# 很棒，因为您可以快速轻松地获得带有按钮文本框和拨号的窗口并运行。由于不包含 MFC 库，因此这在 Express 版本的 C++ 中不可用。

现在，我想设计一个 C# 前端，它将参数保存到文件中，然后执行一个 c++，它读取文件、运行然后保存一个文件，我用另一个（或相同的）c# 后端 exec 打开来读取和播放ard 与结果。但是，如果您想更改某些内容，那么总是再次执行整个序列会变得很麻烦。更不用说调试，可能需要实例运行。

阅读 Visual Studio 2012 Express for desktop 公告时，它表示“您还可以将 C++、C# 和 Visual Basic 项目组合到一个解决方案中，从而可以轻松地使用任何可用语言编写单个应用程序。” [http://blogs.msdn.com/b/visualstudio/archive/2012/09/12/visual-studio-express-2012-for-windows-desktop-is-here.aspx?PageIndex=3](http://blogs.msdn.com/b/visualstudio/archive/2012/09/12/visual-studio-express-2012-for-windows-desktop-is-here.aspx?PageIndex=3)

现在我会很高兴，毕竟我不期望也不需要在这个阶段做任何 wizbank 的东西，即特殊的按钮功能/设计，它更容易并由 C++ 中的 MFC 提供。

我的问题是：有没有人在 Visual Studio 2012 的 Express for Windows 7 桌面版中尝试过这个？即，您可以将交互的 c++ 和 ac# 项目结合起来，例如在调试时将代码从一个项目跟踪到另一个项目吗？有什么特别的限制吗？我的意思是，如果它只组合可执行文件，它没有多大用处，但我希望它不止于此，但还有多少？例如，一个用 C# 设计的对象是否可以实例化一个用 C++ 设计的对象，将它传递给其他对象的引用，例如保存输入和输出的类或在 C++ 类中处理并且仍然可以在 C# 代码中访问以显示结果的数据等？

我在下载新的快速版本之前问这个问题，因为我希望它会让我倒退几个月，因为从 C# 到 C++ 我认为就像从 Visual Basic 到 C。我不想陷入所有麻烦（我真的不介意，但这将是一个巨大的退步）发现我不能“似乎”将 ac# 前端与 C++ proccesing 解决方案集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:29:27.913

您可以通过三种方式将 C++ 与 C# 连接起来：

1.  pinvoke：您在 C# 中指定函数签名并为它们提供一个属性，指定它们驻留在哪个 DLL 中。如果您需要传递任何复杂的类型，这样做是相当痛苦的。

2.  COM：C++ DLL 将实现由 C# 代码调用的 COM 对象。

3.  C++/CLI：允许在单个 C++ 项目中混合托管和非托管 C++ 代码。它非常适合与其他库交互，但至少在 VS 2010 中，它缺少一些有用的功能，例如智能感知。如果你真的想走这条路，我会写三个项目：作为静态库的核心 C++ 代码、用于包装它的 C++/CLI DLL 以及 C# 应用程序。

# c++ - 使用统一初始化语法从函数返回元组

> ID：14961809
> 
> 赞同：23
> 
> 时间：2013-02-19T16:00:38.217
> 
> 标签：c++, gcc, c++11, tuples

以下代码使用 clang (libc++) 编译并使用 gcc (libstdc++) 失败。为什么 gcc (libstdc++) 抱怨初始化列表？我认为返回参数使用统一的初始化语法。

```
std::tuple<double,double> dummy() {
  return {2.0, 3.0};
}

int main() {   
  std::tuple<double,double> a = dummy();   
  return 0;
} 
```

> 错误：第 22 行：从初始化程序 \ list 转换为 'std::tuple' 将使用显式构造函数 'constexpr std::tuple<_T1, _T2>::tuple(_U1&\ &, _U2&&) [with _U1 = double; _U2 = 双倍；=无效；_T\ 1 = 双倍；_T2 = 双]'

**注意：** GCC (libstdc++) (和 clang (libc++)) 接受

```
std::tuple<double,double> dummy {1.0, 2.0}; 
```

不是同一种情况吗？

**更新：**这是一个 libc++ 扩展，请参阅[http://llvm.org/bugs/show_bug.cgi?id=15299](http://llvm.org/bugs/show_bug.cgi?id=15299)并在下面由 Howard Hinnant 回答。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-19T16:02:04.123

与 for 不同`pair<>`，不幸的是，a 的隐式构造`tuple<>`是不可能的。你必须使用`make_tuple()`：

```
#include <tuple>

std::tuple<double,double> dummy()
{
    return std::make_tuple(2.0, 3.0); // OK
}

int main() 
{   
    std::tuple<double,double> a = dummy();   
    return 0;
} 
```

[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple/tuple)有一个可变参数构造函数，但它被标记为`explicit`. 因此，它不能在这种情况下使用，在这种情况下，临时变量必须是隐式可构造的。根据 C++11 标准的第 20.4.2 段：

```
namespace std {
    template <class... Types>
    class tuple {
    public:

        [...]
        explicit tuple(const Types&...); // Marked as explicit!

        template <class... UTypes>
        explicit tuple(UTypes&&...);     // Marked as explicit! 
```

出于同样的原因，使用复制初始化语法来初始化元组是非法的：

```
std::tuple<double, double> a = {1.0, 2.0}; // ERROR!
std::tuple<double, double> a{1.0, 2.0}; // OK 
```

或者在将元组作为参数传递给函数时隐式构造一个元组：

```
void f(std::tuple<double, double> t) { ... }
...
f({1.0, 2.0}); // ERROR!
f(make_tuple(1.0, 2.0)); // OK 
```

因此，如果`std::tuple`在返回时显式构造 your ，则`dummy()`不会发生编译错误：

```
#include <tuple>

std::tuple<double,double> dummy()
{
    return std::tuple<double, double>{2.0, 3.0}; // OK
}

int main() 
{   
    std::tuple<double,double> a = dummy();   
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-19T16:54:36.917

Andy Prowl 给出的答案是正确的。我想对 libc++ 的实现发表评论，而评论格式不允许我有足够的空间或格式选择。

大约一年前，Daniel Krügler 和我就这个主题进行了一次对话，他让我相信这个问题值得在 libc++ 中进行扩展以获得现场经验。到目前为止，反馈是积极的。但是我想澄清一下：这并不像`explicit`从 ctor中删除那么简单`explicit constexpr tuple(UTypes&&...)`。

Daniel 的计划是提供`tuple`一个完全尊重每个元素的隐式/显式构造的构造函数。如果每个元素都将从初始化列表中的每个参数隐式构造，**那么****元**组构造是隐式的，否则它将是显式的。

 **例如：

鉴于：

```
#include <tuple>

struct A
{
};

struct B
{
    B() = default;
    B(A);
};

struct C
{
    C() = default;
    explicit C(A);
}; 
```

然后：

```
std::tuple<>
test0()
{
    return {};  // ok
} 
```

关于那个没什么好说的。但这也没关系：

```
std::tuple<B>
test1B()
{
    return {A()};  // ok B(A) implicit
} 
```

因为从`A`to的转换`B`是隐式的。但是，以下是编译时错误：

```
std::tuple<C>
test1C()
{
    return {A()};  // error, C(A) is explicit
} 
```

因为从`A`to的转换`C`是明确的。对于多元素元组，此逻辑继续。为了发生隐式转换，每个元素都必须从参数列表中进行隐式转换：

```
std::tuple<A, B>
test2B()
{
    return {A(), A()};  // ok each element has implicit ctor
}

std::tuple<A, C>
test2C()
{
    return {A(), A()};  // error, C(A) is explicit
} 
```

我要强调：此时这是一个 libc++ 扩展。

**更新**

chico 提出了一个很好的建议，我更新了这个答案：

自从给出了这个答案，Daniel Krügler 写了[一篇论文](http://open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3680.html)，并于今年四月提交给了布里斯托尔的 C++ 委员会。尽管这篇论文很受欢迎，但它在一周内被审查得太晚，无法将其投票纳入当前的工作草案。

**更新**

丹尼尔的提议现在是[当前工作草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4527.pdf)的一部分。在这方面，libc++ 实现将成为下一个 C++ 标准（我们希望是 C++17）的标准。**

# ios - 如何判断 iOS 项目是否在使用 ARC 而无需在 Xcode 中打开它？

> ID：14961812
> 
> 赞同：2
> 
> 时间：2013-02-19T16:00:45.380
> 
> 标签：ios, xcode, automatic-ref-counting

我无权访问 Xcode，并想确保项目正在使用 ARC。哪个文件包含显示 ARC 已启用的设置？

`AppDelegate.h`在我的文件中有相当多的行看起来像这样。

```
@property (nonatomic, strong) Test * test; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:09:55.833

搜索该`MyProject.xcodeproj/project.pbxproj`文件，然后使用文本编辑器打开它以查看它是否包含`CLANG_ENABLE_OBJC_ARC`. 如果您看到`= YES`，则为项目中的一个或多个目标启用了 ARC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:10:30.870

打开 .xcodeproj 文件的内容：鼠标右键单击 -> 显示内容（或类似内容）。使用 TextEdit 或任何其他文本编辑器打开 project.pbxproj 并搜索

```
CLANG_ENABLE_OBJC_ARC = YES; 
```

或者

```
CLANG_ENABLE_OBJC_ARC = NO; 
```

# java - 无法实例化类：org.apache.naming.java.javaURLContextFactory

> ID：14961815
> 
> 赞同：10
> 
> 时间：2013-02-19T16:00:46.907
> 
> 标签：java, junit

我正在研究加载 SQL 文件并将其加载到 Oracle 中的 Junit 测试文件：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Statement;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;
import oracle.jdbc.pool.OracleConnectionPoolDataSource;
import org.junit.BeforeClass;
import org.junit.Test;

public class OracleCreateScheme1
{

    public OracleCreateScheme1()
    {
    }

    @BeforeClass
    public static void setUpClass() throws Exception
    {
        // rcarver - setup the jndi context and the datasource
        try
        {
            // Create initial context
            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                    "org.apache.naming.java.javaURLContextFactory");
            System.setProperty(Context.URL_PKG_PREFIXES,
                    "org.apache.naming");
            InitialContext ic = new InitialContext();

            ic.createSubcontext("java:");
            ic.createSubcontext("java:/comp");
            ic.createSubcontext("java:/comp/env");
            ic.createSubcontext("java:/comp/env/jdbc");

            // Construct DataSource
            OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();
            ds.setURL("jdbc:oracle:thin:@192.168.1.104:1521:oracle");
            ds.setUser("admin");
            ds.setPassword("qwerty");

            ic.bind("java:/comp/env/jdbc/oracle", ds);
        }
        catch (NamingException ex)
        {
            //Logger.getLogger(MyDAOTest.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    @Test
    public void createOracleScheme() throws SQLException, NamingException
    {

        Context initContext = new InitialContext();
        Context webContext = (Context) initContext.lookup("java:/comp/env");

        DataSource ds = (DataSource) webContext.lookup("jdbc/Oracle");

        // Read File ------------------------------------------------------------------

        String s = new String();
        StringBuffer sb = new StringBuffer();

        try
        {
            FileReader fr = new FileReader(new File("OracleScheme.sql"));

            BufferedReader br = new BufferedReader(fr);

            while ((s = br.readLine()) != null)
            {
                sb.append(s);
            }
            br.close();

            // here is our splitter ! We use ";" as a delimiter for each request
            // then we are sure to have well formed statements
            String[] inst = sb.toString().split(";");

            Connection c = ds.getConnection();
            Statement st = c.createStatement();

            for (int i = 0; i < inst.length; i++)
            {
                // we ensure that there is no spaces before or after the request string
                // in order to not execute empty statements
                if (!inst[i].trim().equals(""))
                {
                    st.executeUpdate(inst[i]);
                    System.out.println(">>" + inst[i]);
                }
            }

        }
        catch (Exception e)
        {
            System.out.println("*** Error : " + e.toString());
            System.out.println("*** ");
            System.out.println("*** Error : ");
            e.printStackTrace();
            System.out.println("################################################");
            System.out.println(sb.toString());
        }

    }
} 
```

当我测试文件时，我遇到了这个问题：

`Cannot instantiate class: org.apache.naming.java.javaURLContextFactory`

你能告诉我如何解决这个问题吗？而且你发现这个Java代码有什么问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-09T10:15:59.950

我通过将 Apache Tomcat 中的库添加到运行时测试库来解决此问题。

在 Netbeans 中：

```
Project Properties -> Libraries -> Run Tests

Add JAR/Folder 
```

我需要的两个库是`catalina.jar`和`tomcat-juli.jar`。您的里程可能会有所不同。

我在 Tomcat 的安装目录下找到了它们。例如：

```
apache-tomcat-7.0.34/bin/tomcat-juli.jar
apache-tomcat-7.0.34/lib/catalina.jar 
```

注意其中一个 jar 在`bin`目录中，另一个在`lib`目录中

这可能不是解决问题的最佳方法。最好有不同的方式来注入`DataSource`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-30T10:00:14.387

我收到此错误，因为具有此类的 jar 未添加到我的类路径中。例外是

```
Exception in thread "main" javax.naming.NoInitialContextException: Cannot instantiate
class: org.apache.naming.java.javaURLContextFactory [Root exception is java.lang.Class
NotFoundException: org.apache.naming.java.javaURLContextFactory]
        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:657)
        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
        at javax.naming.InitialContext.init(InitialContext.java:223)
        at javax.naming.InitialContext.<init>(InitialContext.java:175)
        at ContextLoaderTest.setDataSourceInformation(ContextLoaderTest.java:51)
        at ContextLoaderTest.main(ContextLoaderTest.java:34)
Caused by: java.lang.ClassNotFoundException: org.apache.naming.java.javaURLContextFact
ory 
```

您需要添加`catalina`jar 文件。为此，在您的 Maven 依赖项中添加以下内容 -

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>catalina</artifactId>
    <version>6.0.43</version>
</dependency> 
```

注意工件名称现在已更改。工件名称`tomcat-catalina`而不是“catalina”

```
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-catalina</artifactId>
    <version>8.0.15</version>
</dependency> 
```

. 所以使用最新版本

[http://mvnrepository.com/artifact/org.apache.tomcat/tomcat-catalina](http://mvnrepository.com/artifact/org.apache.tomcat/tomcat-catalina)

比

[http://mvnrepository.com/artifact/org.apache.tomcat/catalina](http://mvnrepository.com/artifact/org.apache.tomcat/catalina)

# api - 重新验证 API 密钥

> ID：14961820
> 
> 赞同：0
> 
> 时间：2013-02-19T16:00:49.857
> 
> 标签：api, security, api-key

[这篇文章（什么是 API 密钥？](https://stackoverflow.com/questions/1453073/what-is-an-api-key) ）中已经提到了使用 API 密钥的原因，如下所示：

> “通常情况下，如果您可以肯定地识别请求的来源，它就可以作为一种身份验证形式，从而导致访问控制。例如，您可以根据执行请求的人员来限制对某些 API 操作的访问。**对于那些“通过销售此类服务赚钱**，这也是一种跟踪谁在使用该东西进行计费的方式。此外，通过阻止密钥，您可以部分防止在请求量过高的情况下滥用。”

上述答案与商业服务有关，但是像 google recaptcha 这样的免费服务呢？在这种情况下，拥有 API 密钥有什么意义？为什么要提供公钥和私钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:56:14.690

有效点。我希望答案是这样，您可以查看每个站点的分析以及正在显示、尝试、通过、失败等的验证码数量。这对于网站管理员来说将是有意义的信息。但是，我不相信 Google 目前不会为 recaptcha 提供该信息。在这种情况下，我认为答案是让 Google 可以跟踪这些信息以供自己使用，而使用私钥的原因可能是，试图测试破坏 recaptcha 的程序的人必须使用他们自己的密钥，这让 Google 更容易检测和隔离它，因此采取措施改变验证码以防止这些类型的裂缝。

# iphone - 如何在不更改声音指示器的情况下在 iOS 中以最大音量播放声音文件

> ID：14961821
> 
> 赞同：8
> 
> 时间：2013-02-19T16:00:51.033
> 
> 标签：iphone, ios, audio, volume, max

在我的应用程序中，我需要播放从 0 到最大系统音量的声音（这是一个警报应用程序）。

我目前`AVAudioPlayer`用来播放声音并`MPMusicPlayerController`在警报期间最大化设备的音量

```
MPMusicPlayerController.applicationMusicPlayer.volume = 1.0;

NSString *fileName = [NSString stringWithFormat:alarm.sound];
fileName = [fileName stringByDeletingPathExtension];

NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:fileName ofType:@"aifc"];
NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
audioPlayer.volume = 0.0;
audioPlayer.numberOfLoops = -1;

[audioPlayer prepareToPlay];

audioPlayer.play; 
```

然后我安排一个计时器来增加音量

```
timer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                         target:self
                                       selector:@selector(pollTimeForGradualVolumeIncrease)
                                       userInfo:nil repeats:YES]; 
```

//逐渐增大音量

```
- (void)pollTimeForGradualVolumeIncrease
{
    timerSecond += 1;

    if (audioPlayer.volume < 1.0 && timerSecond % 1 == 0)
    {
        [audioPlayer setVolume:audioPlayer.volume + 0.02];
        UISlider *slider = volumeSliderView.subviews[0];
        [slider setValue:1.0 animated:NO];
    }
    else if (audioPlayer.volume >= 1.0)
    {
        timerSecond = 0;
        timer.invalidate;
        timer = nil;
    }
} 
```

这样做的问题是设置时会出现iOS音量指示器`MPMusicPlayerController.applicationMusicPlayer.volume`

有没有办法在不显示 iOS 音量更改指示器的情况下以最大设备音量播放声音文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T23:04:09.383

8 个月前我正在尝试相关的东西，据我所知，如果 MPVolumeView 存在，iOS 则不会显示系统音量更改指示器。

如果您实际上不想看到 MPVolumeView，我想您可以将其隐藏在另一个视图后面。

# python - 在python中使用google帐户登录google plus

> ID：14961824
> 
> 赞同：0
> 
> 时间：2013-02-19T16:01:03.680
> 
> 标签：python

我希望能够将 urllib2.urlopen() 或 requests.get() 与[http://plus.google.com/](http://plus.google.com/) * url 一起使用。

使用python，我将如何去做呢？我需要先登录，但如何？

以下代码返回类似于以下内容的内容：

```
"Your browser's cookie functionality is turned off. Please turn it on." 
```

好吧，cookie 本身已创建，并且我测试了 robots.txt，没有任何拨号...我也尝试过切换用户代理，但没有运气。

```
 cookie_filename =  "google.cookie"
    email = raw_input("Enter your Google username: ")
    password = getpass.getpass("Enter your password: ")

    self.cj = cookielib.MozillaCookieJar(cookie_filename)
    self.cj.load()

    self.opener = urllib2.build_opener(
        urllib2.HTTPRedirectHandler(),
        urllib2.HTTPHandler(debuglevel = 0),
        urllib2.HTTPSHandler(debuglevel = 0),
        urllib2.HTTPCookieProcessor(self.cj)
    )

    urllib2.install_opener(self.opener)

    login_page_url = 'https://www.google.com/accounts/ServiceLogin?passive=true&service=grandcentral'
    authenticate_url = 'https://www.google.com/accounts/ServiceLoginAuth?service=grandcentral'
    gv_home_page_url = 'https://www.google.com/voice/#inbox'

    # Load sign in page
    login_page_contents = self.opener.open(login_page_url).read()

    # Find GALX value
    galx_match_obj = re.search(r'name="GALX"\s*value="([^"]+)"', login_page_contents, re.IGNORECASE)       
    galx_value = galx_match_obj.group(1) if galx_match_obj.group(1) is not None else ''

    # Set up login credentials
    login_params = urllib.urlencode( {
       'Email' : email,
       'Passwd' : password,
       'continue' : 'https://www.google.com/voice/account/signin',
       'GALX': galx_value
    })

    # Login
    resp = self.opener.open(authenticate_url, login_params).readlines()
    print resp
    self.opener.open(authenticate_url, login_params).readlines()

    self.cj.save()
    # Open GV home page
    gv_home_page_contents = self.opener.open(gv_home_page_url).read()
    print gv_home_page_contents 
```

# excel - 为什么此代码会影响 C 列中的单元格？

> ID：14961831
> 
> 赞同：2
> 
> 时间：2013-02-19T16:01:18.767
> 
> 标签：excel, range, target, vba

此代码在 C 列中放置复选标记或 X，并将字体更改为 Marlett：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

    If Not Intersect(Target, Range("B5:B25", "D5:D25")) Is Nothing Then

     Cancel = True 'Prevent going into Edit Mode

        Target.Font.Name = "Marlett"

        If Target = vbNullString Then

           Target = "a"

        Else

           Target = vbNullString

        End If

    End If

End Sub
Private Sub Worksheet_BeforeRightClick(ByVal Target As Range, Cancel As Boolean)

If Not Intersect(Target, Range("B5:B25", "D5:D25")) Is Nothing Then

     Cancel = True 'Prevent going into Edit Mode

        Target.Font.Name = "Marlett"

        If Target = vbNullString Then

           Target = "r"

        Else

           Target = vbNullString

        End If

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:07:37.780

如果您在“立即”窗口中键入此内容（请参阅屏幕截图）

```
?Range("B5:B25", "D5:D25").Address 
```

然后你会看到地址是`$B$5:$D$25`，因此它会这样做。如果您不想`C`被包括在内，请替换

```
Range("B5:B25", "D5:D25") 
```

和

```
Range("B5:B25,D5:D25") 
```

![在此处输入图像描述](../Images/3819fda5f4536575cd37ce7062bb689f.png)

# c - 如何将 R 字符向量转换为 C 字符指针？

> ID：14961832
> 
> 赞同：12
> 
> 时间：2013-02-19T16:01:22.983
> 
> 标签：c, r

我正在尝试将字符向量从 R 传递到 C 并通过 C 字符指针引用它。但是，我不知道要使用哪个类型转换宏。下面是一个说明我的问题的小测试。

文件 test.c：

```
#include <Rinternals.h>

SEXP test(SEXP chars)
{
   char *s;

   s = CHAR(chars);
   return R_NilValue;
} 
```

文件测试.R：

```
dyn.load("test.so")

chars <- c("A", "B")

.Call("test", chars) 
```

R的输出：

```
> source("test.R")
Error in eval(expr, envir, enclos) : 
  CHAR() can only be applied to a 'CHARSXP', not a 'character' 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T16:17:51.573

字符向量是`STRSXP`。每个单独的元素都是`CHARSXP`，所以你需要类似（未经测试）的东西：

```
const char *s;
s = CHAR(STRING_ELT(chars, 0)); 
```

请参阅[*编写 R 扩展*](http://cran.r-project.org/doc/manuals/R-exts.html#Handling-character-data)[的处理字符数据部分](http://cran.r-project.org/doc/manuals/R-exts.html#Handling-character-data)*。Dirk 很快就会告诉你，如果你只使用 C++ 和 Rcpp，这一切会变得更容易。:)*

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T09:58:26.650

*chars*中的字符串可以通过指针获取每个字符`CHAR(STRING_ELT(chars, i))`，其中 0 <= *i* < length(chars)，并将其存储在`s[i]`.

```
#include <stdlib.h>
#include <Rinternals.h>

SEXP test(SEXP chars)
{
   int n, i;
   char *s;

   n = length(chars);
   s = malloc(n + 1);
   if (s != NULL) {
      for (i = 0; i < n; i++) {
         s[i] = *CHAR(STRING_ELT(chars, i));
      }
      s[n] = '\0';
   } else {
      /*handle malloc failure*/
   }
   return R_NilValue;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T16:52:46.803

根据乔希的要求：

```
R> pickString <- cppFunction('std::string pickString(std::vector<std::string> invec, int pos) { return invec[pos]; } ')
R> pickString(c("The", "quick", "brown", "fox"), 1)
[1] "quick"
R> 
```

C 向量是零偏移量，因此 1 选择第二个元素。*

# export - 如何仅将 Photoshop 中的选定图层导出为单独的 png 图像

> ID：14961837
> 
> 赞同：7
> 
> 时间：2013-02-19T16:01:41.070
> 
> 标签：export, photoshop, layer

我希望能够仅将 Photoshop 中的选定图层导出为单独的 png 图像（正确修剪）。我看到脚本在 PSD 中执行所有图层，但我只想执行我选择的图层。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T18:14:51.553

这样做的一种解决方法是：1）隐藏您不想导出的图层 2）使用通常的文件 > 脚本 > 将图层导出到文件并勾选“仅可见图层”选项

希望有帮助:)

# jquery - 将 jQuery Ajax 与 XML 结合使用时出现错误请求 (400) 错误

> ID：14961844
> 
> 赞同：0
> 
> 时间：2013-02-19T16:01:59.117
> 
> 标签：jquery, xml, ajax

谁能告诉我在下面的代码中我做错了什么。我想将一个 xml（文本/xml 或应用程序/xml）Ajax 到我的 REST 服务（相同的应用程序服务器）中。

这样做时，我收到错误代码 400 Bad Request。

```
$.ajax({ type: 'POST',
     url: '<url>',
     data: '<?xml version="1.0" encoding="UTF-8"?><test>Hello World</test>',
     contentType: 'text/xml',
     dataType: 'xml',
     processData: false,
     cache: false,
     error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status +' '+thrownError);
     },
     success: function(xml) {
        alert('it works: '+xml);
     }
}); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:08:31.037

您实际上是在使用相对 URL 调用您的服务器`url: '<url>',`吗？那可能是个大问题。这是一个非常糟糕的请求..

```
http://yourserver.com/<url> 
```

您的代码应该是：

```
url: '/myrestservicepath', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:43:13.257

400 错误不会通过 Javascript 发生，它会发生在服务器上。您应该指定您正在使用的服务器端技术并发布相关代码。Robert Fricke 的回答可能会对服务器端问题有所启发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:11:17.477

您提供给 .ajax 调用的 URL 是相对路径，因此您需要小心并确保您传入正确的值

# linux - 如何将 sd/mmc 分区格式化为 cramfs

> ID：14961845
> 
> 赞同：1
> 
> 时间：2013-02-19T16:02:00.863
> 
> 标签：linux, filesystems

首先，是否可以将 sd/mmc 分区格式化为 cramfs 文件系统？如果答案是肯定的，请告诉我如何执行该操作。

注意：我不是在问如何创建 cramfs 映像，我已经为 Ramdisk 创建了这样的映像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T17:31:04.823

关于 cramfs**图像**的创建方式似乎有些混乱。人们通常不会创建 cramfs**文件系统**，因为 cramfs 是只读文件系统，因此整个映像（文件系统结构和内容）都是一次性创建的。

如果 OP 询问如何复制 cramfs 映像以使其驻留在 ext2 文件系统中，您将使用 mkfs.cramfs 以通常的方式创建映像，然后将生成的映像文件复制到 ext2 文件系统中的某个目录中，然后使用“mount -t cramfs /path/to/cramfs/image /mount/point”挂载该映像。该图像只是 ext2 文件系统中的另一个文件。

cramfs 更常见的用途是将映像存储到一个分区中，作为该分区中唯一的文件系统。在这种情况下，您将以与以前相同的方式创建 cramfs 映像，然后使用适当的工具将整个映像复制到分区。无需先格式化分区，因为 cramfs 映像将覆盖之前写入的任何内容。这里也使用相同的“mount -t cramfs /path/to/image /mount/point”方法，但需要注意的是没有 cramfs 分区类型，因为 ext2 和其他分区类型和*/path/to/image*是通常会驻留在*/dev*中。

# javascript - Coldfusion Ajax 无法通过电子邮件

> ID：14961852
> 
> 赞同：1
> 
> 时间：2013-02-19T16:02:12.337
> 
> 标签：javascript, ajax, coldfusion

我正在使用 AJAX 和 Coldfusion 提交表单。在表单中，我有一个调用 js 函数 login() 的按钮。该函数是设置coldfusion组件实例，调用cfc组件中的loginUser()方法。

当我将名字和姓氏从 javascript 传递给 loginUser 函数时，一切正常。loginUser(firstname,lastname) 但是每当我尝试将实际的电子邮件地址传递给表单时，CF 都会抱怨。所以为了简单起见， loginUser("one","two","three") 会起作用，但 loginUser("one","two", "three@") 不起作用，CF 会显示消息：

调用 CFC /ATCdev/JanuszChudzynski/MobileWeb/ajax.cfc 时出错：未找到 [通过在 URL 参数中添加“cfdebug”来启用调试以查看更多信息]

所以我有两个问题。

1 我怎样才能让它工作？

2 如果我正在使用如何添加 CFDebug

```
<cfajaxproxy cfc="ajax" jsclassname="proxy" /> 
```

设置 cfc 代理。

提前致谢！

我在下面粘贴代码：

氟氯化碳

```
<cffunction name="loginUser" access = "remote" returntype="string">
        <cfargument name="firstname" type="string" required="true" />
        <cfargument name="lastname" type="string" required="true" />
        <cfargument name="useremail" type="any" required="true" default=""/>
        <cfargument name="license" type="string" required="false" />
        <cfargument name="workshopid" type="string" required="false" />

        <cfreturn "#firstname##lastname##useremail#">

    </cffunction> 
```

JS

```
function validatelogin(){
        var check = $("#loginForm").valid();
        console.log("check "+check);
        if(check)
        {
            login();    
        }
    }

    function login(){
        var instance = new proxy();
        instance.setCallbackHandler(loginCallback);
        var id = $("input[name='workshop']:checked").val();

        var firstname = $("#firstname").val();
        var lastname = $("#lastname").val();
        var email = $("#email").val();
        var licensenumber = $("#licensenumber").val();
        console.log(id + " " + firstname + " " + lastname + " " + email + " " + licensenumber);

        if(id&&firstname&&lastname&&email&&licensenumber){
            //instance.loginUser(firstname,lastname,email,licensenumber,id);
            console.log(" Email:  "+email);
            instance.loginUser(firstname,lastname,"jchudzynski@");

//          instance.loginU();
        }
        else{
            console.log("Javascript Error. Not all fields are valid."); 
        }
    } 
```

HTML

```
 <form name="loginForm" id="loginForm" action="loginform.cfm">
    <fieldset data-role="controlgroup">
    <legend>Select your workshop from options below </legend>
    <input type="radio" name="workshop" id="workshop1" class="custom" data-mini="true" value="workshop1" checked/>
    <label for="workshop1">Workshop 1.</label>

    <input type="radio" name="workshop" id="workshop2" class="custom" data-mini="true" value="workshop2"/>
    <label for="workshop2">Workshop 2.</label>

    </fieldset>

<div data-role="fieldcontain">
<label for="firstname" >First Name:</label>
<input type="text" name="firstname" id="firstname" value="" placeholder="First Name" data-mini="true" class="required" />
</div>
<div data-role="fieldcontain">
<label for="lastname" >Last Name:</label>
<input type="text" name="lastname" id="lastname" value="" placeholder="Last Name" data-mini="true" class="required" />
</div>

<div data-role="fieldcontain">
<label for="email" >Email:</label>
<input type="text" name="email" id="email" value="" placeholder="email" data-mini="true" class="required email" />
</div>

<div data-role="fieldcontain">
<label for="licensenumber" >License Number:</label>
<input type="text" name="licensenumber" id="licensenumber" value="" placeholder="License Number" data-mini="true" class="required" />
</div>

<input type="button" value="Login" onclick="validatelogin()"/>
</form> 
```

# php - 当我点击我的重置游戏提交按钮时，之前的猜测仍然是 URL 的一部分，并且作为 get 请求提交，我该如何摆脱它？

> ID：14961856
> 
> 赞同：0
> 
> 时间：2013-02-19T16:02:27.343
> 
> 标签：php

我正在做一个刽子手游戏。当用户单击一个字母时，它会附加到 url，`guess=G`但是如果我单击重置按钮（提交按钮），猜测仍然会在 URL 中，并且会触发以下函数。

```
 function reset_game() {
        $_SESSION["word"] = generate_word("dictionary.txt");
        $_SESSION["word-progress"] = turn_to_underscores($_SESSION["word"]);
        $_SESSION["chances-left"] = 9;
        $_SESSION["guesses"] = array();
        $_SESSION["incorrect-guesses"] = array();

        header('Location: index.php');
    } 
```

这很好，除了因为 GET 请求仍在 URL 中，它将作为猜测提交，直到我再次单击该按钮。

这是因为在我的代码的更下方，我检查是否有 GET 请求，如果有则对其采取行动。有没有一种方法可以在单击重置按钮时清除 GET 请求（无 JavaScript，PHP 更是如此），而不是在检查猜测是否正确时使用 if 语句？后一种解决方案听起来......变通了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:06:08.333

给每个提交按钮一个不同的`name`属性值，并根据您在`$_GET`. 例如，如果您有名称为“guess”和“reset”的提交按钮，那么您可以测试`isset($_GET['guess'])`是否单击了“guess”按钮，并`isset($_GET['reset'])`查看是否单击了“reset”按钮。

有关此方法的进一步阅读，请参阅[此问题和答案](https://stackoverflow.com/q/2129346/501250)。

或者，将两个按钮放在不同的`<form>`元素中，这将使它们各自的`<input>`元素彼此隔离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:32:20.710

弄清楚了。确保我的表单使用属性`action="index.php"`而不是简单地提交`action=""`，这将 GET 请求保留在 URL 中。

# nsis - NSIS 功能 - 退出安装程序

> ID：14961857
> 
> 赞同：3
> 
> 时间：2013-02-19T16:02:32.883
> 
> 标签：nsis

在我的 NSIS 安装程序中，我有一个自定义功能，其中用户有 2 个单选按钮。选择第一个并单击“下一步”安装软件。选择第二个（浏览）并单击“下一步”会显示安装介质上的 HTML 文件。

一切正常，但是当用户选择浏览选项并显示 HTML 页面时，我想实际退出安装程序。知道怎么做吗？

在我的自定义页面中，我有这个：

```
 ${NSD_CreateRadioButton} 70 95 40% 6% "Install the Manuals to your PC"
        Pop $hwnd
        ${NSD_AddStyle} $hwnd ${WS_GROUP}
        ${NSD_SetUserData} $hwnd "true"
        ${NSD_OnClick} $hwnd RadioClick
    ${NSD_CreateRadioButton} 70 175 40% 6% "Browse the $MEDIUM content"
        Pop $hwnd
        ${NSD_SetUserData} $hwnd "false"
        ${NSD_OnClick} $hwnd RadioClick 
```

我有一个获取数据的函数：

```
Function RadioClick
    Pop $hwnd
    ${NSD_GetUserData} $hwnd $inst
FunctionEnd 
```

最后，使用该数据执行操作的函数（开始安装或浏览）：

```
Function post
    ${If} $inst == ""
        MessageBox MB_OK "Please specify an option"
        Abort
    ${ElseIf} $inst == false
        ExecShell "open" "$EXEDIR\TechPubList_ForPC\$START_PUB"
        Abort    
    ${EndIf}
FunctionEnd 
```

在实际退出安装程序的“中止”之后，我需要在最后一个函数中添加一些东西。

欢迎任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T16:38:22.343

[Quit](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.17)指令不做你想做的事吗？手册指出：

> 使安装程序尽快退出。调用 Quit 后，安装程序将退出（没有回调函数有机会运行）。

# ios - Xcode 4.6，尽管未选中“调试时显示反汇编”，但为什么显示汇编程序

> ID：14961858
> 
> 赞同：2
> 
> 时间：2013-02-19T16:02:39.610
> 
> 标签：ios, xcode

我正在使用 XCODE4.6，“调试时显示反汇编”未选中。但有时它仍然向我显示汇编程序。

![在此处输入图像描述](../Images/2b72b7643da36b0800ac0ca0d439d17a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:06:31.657

该选项用于显示已编译代码的汇编程序（请参阅[指南](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode_User_Guide/060-Debug_and_Tune_Your_App/debug_app)）。您看到一些汇编程序的原因是您正在进入没有可用源代码的库代码。

# python - 转换短网址

> ID：14961859
> 
> 赞同：4
> 
> 时间：2013-02-19T16:02:45.737
> 
> 标签：python, web, web-scraping

两天大的 Python（和编程）新手，所以请温柔一点。

我从 Twitter 上抓取了大约 1500 个缩短的 URL。它们都采用以下格式：[http](http://t.co/) ://t.co/ ...

使用它来扩展短 URL：

```
import urllib2  
a = urllib2.urlopen('http://t.co/..')  
print a.url 
```

最后两行使用不同的 URL 重复了大约 1500 次不同的时间。

只要 URL 指向的页面存在，它就可以正常工作，但是当它不存在错误消息时，它会在该点停止。我要在代码中添加什么，以便它返回“找不到页面”并继续到下一个 URL 并在不停止的情况下遍历整个列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:09:09.657

假设您使用的是 python 2（python 3 的异常处理语法稍有不同）

```
for url in urls:
    try:
        a = urllib2.urlopen(url)  
    except urllib2.HTTPError, e:
        print "Error", e
        continue

..... do something with a 
```

# recommendation-engine - 基于相似性标准的推荐系统评估

> ID：14961865
> 
> 赞同：0
> 
> 时间：2013-02-19T16:03:03.577
> 
> 标签：recommendation-engine, evaluation, precision-recall

我已经建立了一个推荐系统，它根据一组加权指标推荐与一个项目相似的前 10 个项目。现在可以做的就是选择一个项目，系统会显示与所选项目相似的前 10 个项目。我对可用于评估此类系统的评估技术感到困惑。在没有用户参与的情况下，Precision/recall 估计是否有意义？任何有关此类系统评估技术的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:21:34.223

为了评估精度和召回率，您需要以某种方式获得某些输入的正确答案。在这种情况下，正确答案可能意味着最相似的项目，或 10 个相似项目的确切排序列表。然后，您可以将算法的输出与正确答案进行比较。鉴于这些信息，您还需要一种学习方法，即调整您的算法以更接近正确答案。当您使用真实用户运行系统时，也可以使用算法的此更新部分：如果您向真实用户显示 10 个相关项目并且用户选择其中之一，那么您应该更新权重，以便由用户下次排名更高。如果您对用户进行概要分析并对其进行聚类，这可能会更深入，因此来自不同类别的用户将不得不看到与给定项目相关的不同相关项目。

# spring-mvc - 从 spring MVC @ExceptionHandler 方法执行重定向

> ID：14961869
> 
> 赞同：15
> 
> 时间：2013-02-19T16:03:14.200
> 
> 标签：spring-mvc, post-redirect-get

我想要以下方法：

```
@ExceptionHandler(MyRuntimeException.class)
public String myRuntimeException(MyRuntimeException e, RedirectAttributes redirectAttrs){//does not work
    redirectAttrs.addFlashAttribute("error", e);
    return "redirect:someView";
} 
```

我得到一个：

```
java.lang.IllegalStateException: No suitable resolver for argument [1] type=org.springframework.web.servlet.mvc.support.RedirectAttributes] 
```

有没有办法从一个执行重定向`@ExceptionHandler`？或者也许有某种方法可以规避这个限制？

**编辑：**

我修改了我的异常处理程序如下：

```
@ExceptionHandler(InvalidTokenException.class)
public ModelAndView invalidTokenException(InvalidTokenException e, HttpServletRequest request) {
RedirectView redirectView = new RedirectView("signin");
return new ModelAndView(redirectView , "message", "invalid token/member not found");//TODO:i18n
} 
```

这是可能引发异常的方法：

```
@RequestMapping(value = "/activateMember/{token}", method = RequestMethod.GET, produces = "text/html")
public String activateMember(@PathVariable("token") String token) {
    signupService.activateMember(token);
    return "redirect:memberArea/index";
} 
```

我修改的异常处理程序的问题在于它系统地将我重定向到以下 URL：

```
http://localhost:8080/bignibou/activateMember/signin?message=invalid+token%2Fmember+not+found 
```

代替：

```
http://localhost:8080/bignibou/signin?message=invalid+token%2Fmember+not+found 
```

**编辑 2**：

这是我修改后的处理程序方法：

```
@ExceptionHandler(InvalidTokenException.class)
public String invalidTokenException(InvalidTokenException e, HttpSession session) {
session.setAttribute("message", "invalid token/member not found");// TODO:i18n
return "redirect:../signin";
} 
```

我现在遇到的问题是消息卡在会话中...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-10T17:18:36.860

请注意，Spring 4.3.5+ 实际上支持开箱即用（有关更多详细信息，请参阅[SPR-14651](https://jira.spring.io/browse/SPR-14651)）。

我已经设法使用 RequestContextUtils 类让它工作。我的代码看起来像这样

```
@ExceptionHandler(MyException.class)
public RedirectView handleMyException(MyException ex,
                             HttpServletRequest request,
                             HttpServletResponse response) throws IOException {
    String redirect = getRedirectUrl(currentHomepageId);

    RedirectView rw = new RedirectView(redirect);
    rw.setStatusCode(HttpStatus.MOVED_PERMANENTLY); // you might not need this
    FlashMap outputFlashMap = RequestContextUtils.getOutputFlashMap(request);
    if (outputFlashMap != null){
        outputFlashMap.put("myAttribute", true);
    }
    return rw;
} 
```

然后在jsp页面中我只需访问属性

```
<c:if test="${myAttribute}">
    <script type="text/javascript">
      // other stuff here
    </script>
</c:if> 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-12T22:13:34.143

您总是可以转发然后重定向（或重定向两次）。首先到您可以正常访问 RedirectAttributes 的另一个请求映射，然后再次到您的最终目的地。

```
 @ExceptionHandler(Exception.class)
    public String handleException(final Exception e) {

        return "forward:/n/error";
    }

    @RequestMapping(value = "/n/error", method = RequestMethod.GET)
    public String error(final RedirectAttributes redirectAttributes) {

        redirectAttributes.addAttribute("foo", "baz");
        return "redirect:/final-destination";
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T18:26:04.927

我正在查看[JavaDoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)，但看不到 RedirectAttributes 在哪里是可以接受的有效类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-29T11:47:25.613

从 Spring 4.3.5 ( [SPR-14651](https://jira.spring.io/browse/SPR-14651) ) 开始，您可以立即使用您的第一个方法：

```
@ExceptionHandler(MyRuntimeException.class)
public String myRuntimeException(MyRuntimeException e, RedirectAttributes redirectAttrs){
    redirectAttrs.addFlashAttribute("error", e);
    return "redirect:someView";
} 
```

# c++ - 为什么 std::basic_ostream 的 'char' 部分特化存在 'operator<<' 的重载？

> ID：14961871
> 
> 赞同：2
> 
> 时间：2013-02-19T16:03:19.697
> 
> 标签：c++, integer, char, operator-overloading, ostream

我想知道*为什么*' 的部分专业化存在以下`operator<<`重载：`basic_ostream``char`

```
template< class Traits >
basic_ostream<char,Traits>& operator<<( basic_ostream<char,Traits>& os,
                                        char ch );
template< class Traits >
basic_ostream<char,Traits>& operator<<( basic_ostream<char,Traits>& os,
                                        signed char ch );
template< class Traits >
basic_ostream<char,Traits>& operator<<( basic_ostream<char,Traits>& os,
                                        unsigned char ch );
template< class Traits >
basic_ostream<char,Traits>& operator<<( basic_ostream<char,Traits>& os,  
                                        const char* s );
template< class Traits >
basic_ostream<char,Traits>& operator<<( basic_ostream<char,Traits>& os,
                                        const signed char* s );
template< class Traits >
basic_ostream<char,Traits>& operator<<( basic_ostream<char,traits>& os,
                                        const unsigned char* s ); 
```

* * *

**为什么我想知道**：

我发现重载充其量是多余的，而且通常很麻烦：

1.  以下非专用模板类型的重载已经存在，并提供了`char`and`char*`功能：

    ```
    template< class CharT, class Traits>
    basic_ostream<CharT,Traits>& operator<<( basic_ostream<CharT,Traits>& os,
                                             CharT ch );
    template< class CharT, class Traits>
    basic_ostream<CharT,Traits>& operator<<( basic_ostream<CharT,Traits>& os,
                                             char ch );
    template< class CharT, class Traits >
    basic_ostream<CharT,Traits>& operator<<( basic_ostream<CharT,Traits>& os,
                                             const CharT* s );
    template< class CharT, class Traits >
    basic_ostream<CharT,Traits>& operator<<( basic_ostream<CharT,Traits>& os,
                                             const char* s ); 
    ```

2.  `signed char`并且`unsigned char`不是字符类型，（它们没有`char_traits`，）并且它们应该可以用作整数值，（尤其是在 , 等的上下文`stdint.h`中）但是这些重载与这两个点形成对比；一个人必须玩游戏来解决这些烦恼，例如：`int8_t``uint8_t`

    *   为每个用例 显式`signed char`转换为`signed short`、`unsigned char`to`unsigned short`和`signed char*`or `unsigned char*`to 。`void*`
        *   这需要用户代码中的解决方法功能重载或模板部分专业化。
    *   使用`wchar_t`等价物`basic_ostream`来避免这些不希望的函数重载。
        *   这可能会降低用户代码的性能。

    在这两种情况下，用户代码看起来都比实际需要的更难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:23:05.627

char 特征和各种 char 重载不相关。

char 特征与*输出流*的 char 类型和处理有关，而 char 重载与*插入*的 char 类型有关。例如，想想`basic_ostream<wchar_t>`与`operator<<(basic_ostream, char)`。

您还必须考虑它是实现定义的，无论普通 char 是`signed`还是`unsigned`. 还

> **3.9.1 基本类型 [basic.fundamental]**
> 1 ...普通字符、有符号字符和无符号字符是三种不同的类型。

因此，过载只是`char`或`const char*`不涵盖所有可能性。我想，定义这些重载只是为了完整并涵盖所有基本类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:15:33.660

重载对于允许在不指定所有模板类型的情况下使用运算符是必要的。如果类型匹配，编译器只使用正确的重载。如果它们不匹配，它要么必须进行隐式转换（不受欢迎），要么你必须明确指定所有模板类型，我什至不确定是否有语法可以让你这样做。

# oracle - 在oracle中插入数据时可以指定顺序吗？

> ID：14961872
> 
> 赞同：1
> 
> 时间：2013-02-19T16:03:25.777
> 
> 标签：oracle, insert, rowid

我想以与 unique1 表中存在的顺序相同的顺序将数据从 unique1 表插入到 unique2 表中。

```
insert /*+ append */ into unique2 
        select * from unique1 A where not exists (select 1 from match1 B where A.  promolog_key = B. promolog_key) order by rowid asc; 
```

上述查询是否按照其在 unique1 中存在的相同顺序插入合格数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:00:26.027

是的，通常物理行排序是相同的。

插入的行排序依赖于使用直接路径，这在数据仓库或其他依赖它的系统中是一种相当常见的技术，以在特定索引上获得有利的压缩率和/或低聚类因子（这可能是减少位图索引大小）。

然而，在功能上，按 rowid 排序似乎有点可疑。如果源表已经以所需的方式排序，那么促进对 origin1 的全表扫描就可以完成这项工作。否则，我会订购您想要改进聚类/压缩的列。

尽管按索引排序的表或散列集群在集群因子方面会产生类似的效果，但它们具有可能无用的限制。在 IOT 的情况下，大型插入通常有助于将行排序为选择的一部分，以便更有效地维护目标表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:45:58.853

Oracle 允许您在语句中指定一个`ORDER BY`子句，[文档说明](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9014.htm#SQLRF55069)：`INSERT`

> *   关于`ORDER BY`中子查询的子句，`DML_table_expression_clause`仅对插入的行保证排序，并且仅在表的每个范围内保证排序。不保证新行相对于现有行的排序。

因此，**新**行将按照您在`ORDER BY`子句中指定的顺序插入到您的副本表中。这显然不会影响表中已经存在的旧行。

对范围的限制可能与您无关，因为您正在使用`/*+ append */`提示，因此只会在水印上方插入（如果不是并行插入，则按顺序插入）。

# android - RemoteViews setInt setImageResource 在 ImageButton 中不起作用

> ID：14961880
> 
> 赞同：1
> 
> 时间：2013-02-19T16:03:43.893
> 
> 标签：android, widget, imagebutton

我正在开发一个按钮小部件，当用户单击我想更改资源图像的按钮时，它不起作用，有我的代码：

小部件.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="72dp"
            android:layout_height="72dp"
            android:layout_gravity="center" >

        <ImageButton
            android:id="@+id/widgetButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@android:color/transparent"
            android:src="@drawable/android_widget"
            android:clickable="true"
            android:contentDescription="@string/widget_image"
            />

</FrameLayout> 
```

MyWidgetActivity.java ：

```
public class MyWidgetActivity extends Activity implements ExceptionHandler {

    RemoteViews remoteViews;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        ... 

        // Get the remoteViews view
        remoteViews = new RemoteViews(this.getPackageName(), R.layout.widget);

        // Change the remoteViews button clicked style
        remoteViews.setInt(R.id.widgetButton, "setImageResource",
                R.drawable.android_widget2);

    }

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:15:24.340

我使用选择器解决了我的问题：

我在可绘制文件夹中添加了这个 widget_selector.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:state_enabled="true"
        android:drawable="@drawable/android_widget2" />
    <item android:state_focused="true" android:state_enabled="true"
        android:drawable="@drawable/android_widget2" />
    <item android:state_enabled="true" android:drawable="@drawable/android_widget" />

</selector> 
```

然后我在我的 ImageButton 背景属性中引用它，如下所示：

```
android:background="@drawable/widget_selector" 
```

它就像一个魅力，只有 0 行代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:16:36.627

```
// Get the remoteViews view
remoteViews = new RemoteViews(this.getPackageName(), R.layout.widget);
// Change the remoteViews button clicked style
remoteViews.setInt(R.id.widgetButton, "setImageResource", R.drawable.android_widget2);

//......For update AppWidget
appWidgetManager.updateAppWidget(widgetID, remoteViews); 
```

# javascript - 直接在grails中获取angular js app-in-app的数据json文件

> ID：14961888
> 
> 赞同：3
> 
> 时间：2013-02-19T16:04:24.297
> 
> 标签：javascript, grails, angularjs

嗨，我想在 grails 中的应用程序内访问我的 Angular 应用程序中的 json 数据文件。我找不到任何方法来解决 json 文件客户端的问题。在本教程中，数据绑定仅适用于 json 数据，因此这对我来说至关重要。

```
function ShitCtrl($scope, $http) {

  $http.get('http://localhost:8080/webapp/clients.json').success(function(data) {
    $scope.shits = data;
  });
}

function ShitDetailCtrl($scope, $routeParams) {
  $scope.shitId = $routeParams.shitId;

} 
```

这会报告 404 错误。我该如何解决这个问题？当我在 urlMappings 中解决它时，这不起作用，那么映射是绝对的。

关键是：grails 根据 urlMappings 映射所有内容，因此无法直接从 js 寻址文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:49:03.833

配置。时髦的：

```
grails.resources.adhoc.patterns = [
        '/images/*',
        '/css/*',
        '/js/*',
        '/plugins/*',
        **'/staticData/*',**
        '/assets/*' 
```

所以这就像一个魅力：

```
function ShitCtrl($scope, $http) {
  $http.get('../static/staticData/clients.json').success(function(data) {
    $scope.shits = data;
  });
} 
```

# java - Java：检测变量是字符串还是整数

> ID：14961890
> 
> 赞同：2
> 
> 时间：2013-02-19T16:04:26.403
> 
> 标签：java, string

我正在为我的一些家庭作业寻求帮助。我希望用户输入一个数字字符串，然后将其转换为整数。但是我想创建一个循环来检测用户是否输入了错误的值，例如与“100”相对的“一百”。

我在想的是做这样的事情：

```
 do{
        numStr = JOptionPane.showInputDialog("Please enter a year in numarical form:"
                        + "\n(Ex. 1995):");
        num = Integer.parseInt(numStr);
            if(num!=Integer){
            tryagainstr=JOptionPane.showInputDialog("Entered value is not acceptable."
                                  + "\nPress 1 to try again or Press 2 to exit.");
    tryagain=Integer.parseInt(tryagainstr);
            }
            else{
            *Rest of the code...*
            }
            }while (tryagain==1); 
```

但我不知道如何定义“整数”值。我本质上希望它查看它是否是一个数字，以防止它在用户输入错误的内容时崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T16:11:19.297

试试这个：

```
 try{
        Integer.valueOf(str);
    } catch (NumberFormatException e) {
        //not an integer
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-23T09:59:39.647

试试看`instanceof`，这个方法可以帮助你在多种类型之间进行检查

> 例子

```
if (s instanceof String ){
// s is String
}else if(s instanceof Integer){
// s is Integer value
} 
```

如果您只想检查整数和字符串，可以使用@NKukhar 代码

```
try{
        Integer.valueOf(str);
    } catch (NumberFormatException e) {
        //not an integer
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T21:05:37.977

试试这个

```
int num;
String s = JOptionPane.showInputDialog("Enter a number please");
while(true)
{
    if(s==null) 
        break; // if you press cancel it will exit
    try {
        num=Integer.parseInt(s);
        break;
    } catch(NumberFormatException ex)
    {
        s = JOptionPane.showInputDialog("Not a number , Try Again");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T16:23:23.630

使用正则表达式来验证字符串的格式，并且只接受其上的数值：

```
Pattern.matches("/^\d+$/", numStr) 
```

如果包含有效的数字序列，该`matches`方法将返回，但当然输入可以远高于的容量。在这种情况下，您可以考虑切换到 a或 a类型。`true``numString``Integer``long``BigInteger`

# javascript - 如何检查对象是否具有功能？(道乔)

> ID：14961891
> 
> 赞同：42
> 
> 时间：2013-02-19T16:04:27.073
> 
> 标签：javascript, dojo

```
var testObj = this.getView(); 
```

`callableFunction`如果 testObj在我实际尝试调用之前有，我如何检查 DoJo（或只是本机 JS）`callableFunction()`，如果它不存在则失败？我更喜欢原生 DoJo 解决方案，因为我需要它在所有浏览器上工作。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-19T16:06:14.153

You can call it like this:

```
testObj.callableFunction && testObj.callableFunction(); 
```

or in details:

```
if (typeof testObj.callableFunction == 'function') {
    testObj.callableFunction();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T16:32:35.537

dojo 具有可用于执行测试的功能。

```
require(["dojo/_base/lang"], function(lang){

  var testObj = this.getView();
  if(lang.isFunction(testObj.callableFunction)){
    testObj.callableFunction();
  }

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T16:09:30.630

您应该测试该属性是否存在并且是一个函数：

```
var returnFromCallable = typeof testObj.callableFunction === 'function' &&
    testObj.callableFunction(); 
```

# python - 设置python命令行位置

> ID：14961892
> 
> 赞同：0
> 
> 时间：2013-02-19T16:04:27.390
> 
> 标签：python, command-line, positioning, vpython

我想知道是否有办法设置命令行打开的位置。我将 python 2.7 与 VPython 一起用于我的 A-Level 计算项目。它目前在两个 VPython 窗口后面打开，但我更希望它在下面打开，所以只是想知道这是否可能。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:39:29.993

Python 并不“拥有”它运行的控制台。

对于特定于 Windows 的答案，您可以查看控制窗口焦点、大小和位置的 Win32 API。有关更多信息，请参阅此问题：[如何使窗口集中在 Windows 上并重新调整大小？](https://stackoverflow.com/questions/2335721/how-can-i-get-the-window-focused-on-windows-and-re-size-it)

# java - JAVA：为什么我在编译过程中返回错误？

> ID：14961897
> 
> 赞同：0
> 
> 时间：2013-02-19T16:04:42.657
> 
> 标签：java, return, try-catch

我继承了一些编译时出错的代码。我收到以下两个错误之一：一个是`return`声明丢失，另一个是我的//`throw`不匹配`try`。`catch`这个错误*似乎*与`return`声明的位置有关，我整个上午都在移动。它目前的位置让步`error: missing return statement`。被注释掉的任何一个返回都会产生一条消息，我必须`try`用`catch`我的`throw`.

考虑：

```
static private List<File> getFileListingNoSort(File aDirectory) throws FileNotFoundException {

try {
    List<File> result = new ArrayList<File>();
    File[] filesAndDirs = aDirectory.listFiles();
    List<File> filesDirs = Arrays.asList(filesAndDirs);
    for(File file : filesDirs) {
         result.add(file); //always add, even if directory
         if ( ! file.isFile() ) {
              List<File> deeperList = getFileListingNoSort(file);
              result.addAll(deeperList);
           // return result;
         } //close if
      // return result;
     } // close for
     } // close try for getFileListingNoSort
   // return result;
 catch (Exception exp) {
      System.err.println("Error: " + exp.getMessage());
 } //close catch getFileListingNoSort
 return result;
} //close method 
```

我*认为*返回会在尝试之后，但在捕获之前。但是，这对我不起作用。我不太确定为什么我会得到这些区域，除了误解程序如何与`try`/一起流动`catch`。谁能告诉我最合适的退货地点并解释原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:07:17.053

Instead of

```
try {
    List<File> result = new ArrayList<File>(); 
```

do

```
List<File> result = new ArrayList<File>();
try { 
```

this way the variable `result` will not be out of scope after the `try/catch` block.

The list will contain every element added up to until the exception occurred.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T16:08:25.797

你的方法必须总是返回，要么正常，要么发出异常。

如果您的`catch`子句没有抛出`Exception`，您需要一个`return`语句作为 catch 的最后一个语句，或者在 catch 之后。

当你想在你的 try 块之外返回一些东西时，它的值必须在你进入 try*之前定义。*

例如，如果你想在 try 中返回一些值（以防一切顺利），如果你得到一个异常返回 null，你的代码看起来像这样：

```
try{
   ... do loads of stuff
   return value;
} catch(Exception e) {
    e.printStackTrace(); //log it, whatever
    return null;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T16:07:20.273

You are defining `result` inside your try block, but (trying to) return it outside of the block. This won't work because the variable is then out of scope. The simplest way to fix this is to declare the result variable outside of the try block.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T16:07:22.497

`result` is in try block, and it could be not-initialized. Taking it outside of the try block will solve your problem.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T16:08:12.093

首先，您尝试访问`result`在块中声明的变量，`try`并且在其中不可见。

# .net - 引发另一个应用程序的 Button_Click() 事件

> ID：14961901
> 
> 赞同：1
> 
> 时间：2013-02-19T16:04:53.060
> 
> 标签：.net, windows, events, cross-process

这对我来说听起来难以置信，但我只是想我会问。

存在一个带有按钮的 .NET 应用程序。我无法编辑此应用程序源，它是一个预先存在的应用程序。

我希望从我的应用程序中以编程方式引发该按钮的单击事件。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:10:07.247

该进程需要运行才能执行事件，例如按钮单击。此时，您有几个选项可用于引发按钮单击事件。

一种方法是 IPC（进程间通信），在两个程序之间使用套接字或管道。如果您喜欢该选项，也可以使用共享内存。

您基本上必须让带有按钮的应用程序在套接字或管道上侦听以发送请求。一旦收到它，它就可以从那里调用自己的按钮单击事件。

关键是两个进程都必须运行，并且您必须以某种方式向另一个进程发送一个信号，告诉它启动其按钮单击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:28:56.970

嗯，也许..

曾经有一个名为 spy++ 的应用程序。它允许您检查窗口并查看属性、对象名称等。

spy++ 已移植到 .net（请参阅 [在此处输入链接描述][1]

[1]：http: [//msdn.microsoft.com/en-us/magazine/cc163617.aspx](http://msdn.microsoft.com/en-us/magazine/cc163617.aspx)）。你可以试一试。

如果您查看“其他 ControlProxy 方法”部分，它会说明：

> “在 ControlProxy 中还有一些其他方法值得一看。调用 SendMessage 方法向控件发送窗口消息。如果您想创建测试工具，这很有用。例如，您可以发送 WM_CLICK 或 WM_KEYDOWN 消息模拟输入”。

当然，这不是一种优雅或稳定的方法:)

# c# - xaml - 以编程方式更改 StandardStyles

> ID：14961909
> 
> 赞同：1
> 
> 时间：2013-02-19T16:05:10.727
> 
> 标签：c#, xaml, windows-8, windows-store-apps, windows-store

我正在使用 xaml/c# 开发 Windows 8 应用程序。我需要更改`PageHeaderTextStyle`（在 StandardStyles.xaml 中定义）。

这是我的`PageHeaderTextStyle`定义：

```
<Style x:Key="PageHeaderTextStyle" TargetType="TextBlock" BasedOn="{StaticResource HeaderTextStyle}">
    <Setter Property="TextWrapping" Value="NoWrap"/>
    <Setter Property="VerticalAlignment" Value="Bottom"/>
    <Setter Property="Margin" Value="0,0,30,40"/>
    <Setter Property="Foreground" Value="White"/>
</Style> 
```

您将如何以`Foreground`编程方式将属性更改为“黑色”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:50:36.620

您确定需要以编程方式更改它吗？

您可以通过在 XAML 中包含如下代码来正常加载样式。您可以通过更改“BasedOn”属性来扩展现有的 PageHeaderTextStyle 定义。现在“myPageHeaderTextStyle”将与 PageHeaderTextStyle 完全一样，只有您指定的更改。

```
<Style x:Key="myPageHeaderTextStyle" TargetType="TextBlock" BasedOn="{StaticResource PageHeaderTextStyle}">
    <Setter Property="Foreground" Value="Black"/>
</Style> 
```

如果您确实需要以编程方式更改它，您可以在[Style类上使用](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.style.aspx)[SetValue](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.dependencyobject.setvalue.aspx)（这就是您的“myPageHeaderTextStyle”对象）。

# sharepoint-2013 - 来自 Sharepoint 2013 的 Project Server 2013 PSI 调用

> ID：14961912
> 
> 赞同：1
> 
> 时间：2013-02-19T16:05:26.447
> 
> 标签：sharepoint-2013, psi, ms-project-server-2013

我正在将代码从 2010 年迁移到 2013 年。

我在 Sharepoint 中部署了一个调用 PSI 的用户控件。2010 年，它运作良好。现在在 2013 年和声明身份验证中，我总是得到：“HTTP 请求未经客户端身份验证方案'Ntlm' 的授权。从服务器收到的身份验证标头是'NTLM，Negotiate'。” 当我与任何用户（甚至项目管理员）调用任何 PSI（甚至 GetCurrentUserUid）时。

看起来凭据没有传递给 PSI，它称它们为匿名。任何人都可以帮忙吗？

我从 Sharepoint 执行的另一个代码示例：

```
ProjectContext projContext = new ProjectContext(PROJECT_SERVER_URL);
projContext.Load(projContext.EnterpriseResources);
projContext.ExecuteQuery(); 
```

我被拒绝访问。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T03:54:57.833

```
 public static ProjectContext GetContext()
    {
        ProjectContext projContext;
        using (projContext = new ProjectContext("pwaUrl"))
        {
            SecureString passWord = new SecureString();

            foreach (char c in "YourEmailPassword".ToCharArray()) passWord.AppendChar(c);

            projContext.Credentials = new SharePointOnlineCredentials("YourEmail", passWord);
        }
        return projContext;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T09:10:53.943

您是否尝试过使用设置凭据 `projContext.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-25T03:49:46.477

您需要先登录到 SharePoint。下面的内容将为您提供有效的上下文。

```
public static ProjectContext GetContext()
{
    ProjectContext projContext;
    using (projContext = new ProjectContext("pwaUrl"]))
    {
        SecureString passWord = new SecureString();

        foreach (char c in "yourPassword".ToCharArray()) passWord.AppendChar(c);

        projContext.Credentials = new SharePointOnlineCredentials("youremailaddress", passWord);
    }
    return projContext;
} 
```

# c#-4.0 - 无法调用以泛型枚举类型作为参数的方法

> ID：14961914
> 
> 赞同：0
> 
> 时间：2013-02-19T16:05:30.163
> 
> 标签：c#-4.0, generics, enums

我有一个辅助方法，它将空格放入枚举名称中，如下所示。

```
 public static string GetListItemString(Enum listItem)
        {
            string result = string.Empty;

#region ELegalStatus
            if (listItem is ELegalStatus)
            {
                switch ((ELegalStatus) listItem)
                {
                    case ELegalStatus.PrivateLimited:
                        result = "Private Limited";
                        break;
                    case ELegalStatus.PublicLimited:
                        result = "Public Limited";
                        break;
                   }
             }
#endregion

#region ERegion
            if (listItem is ERegion)
            {
                switch ((ERegion) listItem)
                {
                    case ERegion.EnglandandWales:
                        result = "England and Wales";
                        break;
                    case ERegion.NorthernIreland:
                        result = "Northern Ireland";
                        break;
                    case ERegion.Scotland:
                        result = "Scotland";
                        break;
                }
            }
            #endregion 

      return result;
    } 
```

我正在创建一种将枚举转换为列表的方法，如下所示。

```
public static object EnumToList<T>()
        {
            Type enumType = typeof (T);

            // Can't use type constraints on value types, so have to do check like this
            if (enumType.BaseType != typeof (Enum))
            {
                throw new ArgumentException("T must be of type System.Enum");
            }

            Array enumValArray = Enum.GetValues(enumType);

            foreach (var name in enumValArray)
            {
                var y = Enum.Parse(enumType, name.ToString().Trim(), true);                

               var x = ListHelper.GetListItemString(y);

            }

         return null;

        } 
```

在上述方法中，当通用枚举的所有名称/值都被读入数组时，我想遍历它们中的每一个并调用方法“GetListItemString”来获取名称的适当间隔版本。

但由于 'GetListItemString' 方法只接受 'Enum' 类型，它没有编译。

我不确定如何在遍历枚举的名称/值时传递此方法所需的参数。

有人可以帮忙吗？

**更新：**我已经尝试过使用 var x = ListHelper.GetListItemString((Enum) y);

但是当使用 EnumToList() 调用 'EnumToList' 方法时，x 的值始终为空；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:08:26.480

您只需要转换 from `object`to `Enum`，因为返回类型 of`Parse`是`object`出于某种原因。

```
var x = ListHelper.GetListItemString((Enum) y); 
```

您可能还想查看（并可能更改）我的[Unconstrained Melody 项目](https://code.google.com/p/unconstrained-melody/)，该项目为通用约束问题提供了一种解决方法。

# excel - 如何使用 VBA 代码插入一行单元格

> ID：14961917
> 
> 赞同：1
> 
> 时间：2013-02-19T16:05:33.457
> 
> 标签：excel, vba

我的代码如下。我`Rng`在循环宏中设置了一个范围，这是它的一个子集。如果满足某个条件，则调用以下 sub：

```
Sub FKCutandPaste(Rng As Range)

Rng.Resize(, 9).Cut
Rng.Offset(, 19).Insert Shift:=xlDown
Rng.Resize(, 9).Delete Shift:=xlUp 
```

我希望这可以删除一部分数据，然后将其粘贴到活动列之外。但是，宏似乎只是剪掉了所需的单元格，但没有移动到第二行。

我在这里错过了一些非常小的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:14:50.617

如果您有任何具体问题，我无法告诉您。这段代码对我来说很好，在 Excel 2010 中使用带有数据的任意表格（并作为其自己的子表格）：

```
Sub test()
Dim rng As Range
Set rng = Cells(6, 2)
rng.Resize(, 9).Cut
rng.Offset(, 19).Select
Selection.Insert Shift:=xlDown
rng.Resize(, 9).Delete Shift:=xlUp
End Sub 
```

我添加了“选择”位，因为这通常对测试很有帮助——在选择上放一个中断，运行到它，然后 F8 行；然后看看选择了什么。如果它在那里出错，那么 rng.offset(,19) 有问题。如果它成功并选择了（某些东西），那么您可以看到它认为应该在哪里插入数据。

编辑：注释掉 rng.Resize(,9).Delete 似乎可以解决问题 - 它正在删除新插入的单元格。当您使用 rng.cut，然后将单元格粘贴进去时，这似乎改变了 rng 的当前位置。看到这个：

```
Sub test()
Dim rng As Range
Set rng = Cells(6, 2)
MsgBox (rng.Address)
rng.Resize(, 9).Cut
MsgBox (rng.Address)
rng.Offset(, 19).Insert Shift:=xlDown
MsgBox (rng.Address)
rng.Resize(, 9).Delete Shift:=xlUp
End Sub 
```

将“剪切”更改为“复制”，行为就会发生变化。您可能只想这样做 - 将其更改为复制 - 因为无论如何您都删除了原始单元格。

# bash - parsing log file to get certain information

> ID：14961920
> 
> 赞同：-1
> 
> 时间：2013-02-19T16:05:38.223
> 
> 标签：bash, parsing, awk, grep

I have a log file with following information. I need to parse it get some information. How do i use grep to get those information or any other method?

```
connection= 5,size=262144,put=10 get=0
swift-bench 2013-02-14 16:29:34,913 INFO Auth version: 1.0
swift-bench 2013-02-14 16:29:36,580 INFO Auth version: 1.0
swift-bench 2013-02-14 16:29:36,909 INFO 10 PUTS **FINAL** [0 failures], 30.6/s
swift-bench 2013-02-14 16:29:36,910 INFO Auth version: 1.0
swift-bench 2013-02-14 16:29:37,028 INFO 10 DEL **FINAL** [0 failures], 86.3/s 
```

Desired output:

```
Connection,size,put,gets,operation,op/s
5,262144,10,0,PUTS,30.6
5,262144,10,0,DEL,86.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:40:00.567

好吧，如果您可以指望数据格式一致，如图所示，这将通过使用 IFS 玩技巧并将行切碎为位置参数来实现。假设日志文件的名称在命令行上。

```
#!/bin/bash

logfile=$1

echo "Connection,size,put,gets,operation,op/s"
tmpIFS="$IFS"  # In case we want to restore IFS later
IFS="$IFS,="
# Note that the read below isn't splitting up the line
# so the content of IFS isn't a problem
while read line ; do
    set -- $line
    case "$line" in
        connection*)
            conn="$2"  size="$4"   puts="$6"  gets="$8"
        ;;
        swift-bench*' PUTS '*|swift-bench*' DEL '*)
            shift 6
            case "$line" in
                *'**FINAL**'*) echo "$conn,$size,$puts,$gets,$1,$5" ;;
                *) echo "$conn,$size,$puts,$gets,$1,$4" ;;
            esac
        ;;
    esac

done < "$logfile"

IFS="$tmpIFS"  # Not needed if this is the end of the script 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:24:52.490

一种使用方式`perl`：

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;

my $nums;
while ( <> ) { 
    if ( $. == 1 ) { 
        my @fields = m/(\w+)=/g;
        push @fields, qw<operation op/s>;
        printf qq|%s\n|, join q|,|, @fields;

        $nums = join q|,|, m/=\s*(\d+)/g;

        next;
    }   

    my @f = split;
    if ( $f[5] !~ /(?i)version/ and @f > 7 ) { 
        printf qq|%s\n|, join q|,|, $nums, $f[5], substr( $f[ $#f ], 0, length( $f[ $#f ] ) - 2 );
    }   
} 
```

并结合`infile`问题中发布的数据，运行它：

```
perl script.pl infile 
```

这会产生：

```
connection,size,put,get,operation,op/s
5,262144,10,0,PUTS,30.6
5,262144,10,0,DEL,86.3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:26:33.430

```
#!/bin/bash
conn=`grep -P -o -e '\d+(?=,size)' logfile`
size=`grep -P -o -e '(?<=size\=)\d+' logfile`
put=`grep -P -o -e '(?<=put\=)\d+' logfile`
get=`grep -P -o -e '(?<=get\=)\d+' logfile`
for i in `grep -P -e 'INFO \d' logfile | awk '{print $6","$10}' | tr -d '/s'`; do
echo $conn,$size,$put,$get,$i
done 
```

# python - Python中的十六进制转换错误

> ID：14961930
> 
> 赞同：0
> 
> 时间：2013-02-19T16:06:06.867
> 
> 标签：python, json, tornado, hex

我有个问题。

我有一个向传感器网络发送命令的页面。

当我点击这部分代码时

```
<a href='javascript:void(send_command_to_network("{{net.id}}", "restartnwk"));'>Restart Network <i class="icon-repeat"></i> </a> 
```

我调用一个js函数，这个：

```
function send_command_to_network(net, command) {
    $.ajax({url: "/networks/" + net + "/send?command=" + command,
    type: "GET",
    async: true,
    dataType: "json",
    success: function(json_response) { 
         var err = json_response['error'];
     if (err) {
       show_alert('error', err);
       return;
     }
     var success = json_response['success'];
     if (success) {
       show_alert('success', success);
       return;
     }
     show_alert('alert', "This should not happen!");
       }
     }); 
    } 
```

此函数构建一个 url，用于调用用 python 编写的 Tornado Web 服务器中的处理程序。处理程序是这样的：

```
class NetworkSendHandler(BaseHandler):
    # Requires authentication 
    @tornado.web.authenticated
    def get(self, nid):
        # Get the command 
        command = self.get_argument('command').upper(); 

        # The dictionary to return
        ret = {}

        #Check if the command is available
        if command not in ['RESTARTNWK']:
            raise tornado.web.HTTPError(404, "Unknown command: " + str(command))

        #Command ZDP-RestartNwk.Request
        if command == 'RESTARTNWK':
            op_group = "A3"
            op_code = "E0"
            packet_meta = "*%s;%s;%s;#"
            pkt_len = hextransform(16, 2)

            packet = packet_meta % (op_group, op_code, pkt_len)
            packet = packet.upper()

            op_group_hex=0xA3
            op_code_hex=0xE0

            cmdjson = packet2json(op_group_hex,op_code_hex, packet)

        self.finish() 
```

我在 Tornado 调试控制台中收到此错误：

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 988, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/tornado/web.py", line 1739, in wrapper
    return method(self, *args, **kwargs)
  File "./wsn.py", line 859, in get
    cmdjson = packet2json(op_group_hex,op_code_hex, packet)
  File "./wsn.py", line 188, in packet2json
    fcs = fcs ^ int('0x' + payload[(i - 1):(i + 1)], 16)
ValueError: invalid literal for int() with base 16: '0x*A' 
```

我认为错误是在调用 packet2json 之后。而且我认为错误在于函数内部的转换，因为错误表明'0x * A'不是有效的int。我认为'*'是错误....我该如何解决这个问题？

**编辑**

对不起，我忘记了函数：

```
# Transform an integer into a string with HEX symbols in the format that is
# understandable by Quantaservd
def hextransform(data, length):
    data = hex(data).lstrip('0x').rstrip('L')
    assert(len(data) <= length)
    # zero-padding
    data = ('0' * (length - len(data))) + data
    print data
    # Swap 'bytes' in the network ID
    data = list(data)
    for i in range(0, length, 2):
        tmp = data[i]
        data[i] = data[i + 1]
        data[i + 1] = tmp
    # Reverse the whole string (TODO: CHECK) 
    data.reverse()
    data = "".join(data)
    return data

def packet2json(op_group, op_code, payload): 
    #op_group =
    #op_code =
    #payload=""    # stringa ascii 2 char per byte, senza checksum 
    lun = len(payload) / 2
    fcs = op_group ^ op_code ^ lun #fcs = XOR of op_groip, op_code, lenght and  payload
    for i in range(len(payload)):
    if ((i % 2) == 1):
        fcs = fcs ^ int('0x' + payload[(i - 1):(i + 1)], 16)
        print int('0x' + payload[(i - 1):(i + 1)], 16)
    s=cmd_payload(op_group,op_code, lun, payload, fcs)
    #p = r '{"data": "' + s + r '"}'
    p=r'{"data": "'+s+r'"}'
    return p 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:14:08.413

问题在于`packet2json()`功能：

```
for i in range(len(payload)):
    if ((i % 2) == 1):
        fcs = fcs ^ int('0x' + payload[(i - 1):(i + 1)], 16) 
```

在你的程序中，你这样调用这个函数：

```
packet2json(0xa3, 0xe0, '*A3;E0;10;#') 
```

现在上面的循环将从第一个字符（索引 0）开始，忽略它，因为它的索引不是奇数，然后转到索引为奇数（1%2 == 1）的第二个字符（索引 1）。`if`语句的主体，使用`int('0x' + payload[(i-1):(i+1)], 16)`，即`int('0x' + payload[0:2], 16)`，即`int('0x*A',16)`，它总是会崩溃...

您应重写此`packet2json()`函数以使用正确的字符串索引，或者在有效负载中不带前导`*`的情况下正确调用它。

# twitter-bootstrap - 如何将 Twitter 引导模式分为两部分

> ID：14961932
> 
> 赞同：20
> 
> 时间：2013-02-19T16:06:07.850
> 
> 标签：twitter-bootstrap, twitter-bootstrap-2

![在此处输入图像描述](../Images/82a39fda7741d0eb6600dcaff8351bdf.png)

我有以下html

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog"
aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-body">
        <table>
            <tbody>
                <tr>
                    <td>
                        <div class="span2 fileupload fileupload-new pull-left" data-provides="fileupload">
                            <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
                            <div> <span class="btn btn-file"><span class="fileupload-new">Select image</span>
                                <span
                                class="fileupload-exists">Change</span>
                                    <input type="file" />
                                    </span> <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>

                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="progress">
                            <div class="bar" style="width: 60%;"></div>
                        </div>
                        <button class="btn btn-mini" type="button">Upload</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-10-27T06:13:23.353

如果您使用的是 bootstrap 3.0，只需在此处添加答案。在 bootstrap 3.0 中，被`row-fluid`替换为(full changed log [here](http://getbootstrap.com/getting-started/#migration) )`row``span``col-md`

所以 Eduardo Grajeda 的回答变成了

```
<div class="modal-body row">
  <div class="col-md-6">
    <!-- Your first column here -->
  </div>
  <div class="col-md-6">
    <!-- Your second column here -->
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-10T00:49:42.523

只是想补充一点，我设法使用 Bootstrap 提供的 CSS 做到了这一点。以下代码对我有用：

```
<div class="modal-body row-fluid">
  <div class="span6">
    <!-- Your first column here -->
  </div>
  <div class="span6">
    <!-- Your second column here -->
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-19T16:41:28.010

*编辑：*这只是**一个纯 CSS**解决方案，如果您想要更多*引导程序*，请查看下面的答案。

* * *

您可以使用一点 css 将模态体分成两部分，就像您进行两列的页面布局一样简单。

```
...
<div class="modal-body>
   <div class="first-column">
       <!-- Your first column here -->
   </div>
   <div class="second-column">
       <!-- Your second column here -->
   </div>
</div>
... 
```

和 CSS

```
.first-column {
  width: 40%;
  float: left;
}

.second-column {
  width: 40%;
  float: right;
} 
```

不需要在模态中使用网格系统，如果您尝试将其与跨度匹配，结果可能会更糟。

# java - What is the type parameter V in parboiled used for

> ID：14961939
> 
> 赞同：1
> 
> 时间：2013-02-19T16:06:19.020
> 
> 标签：java, parboiled

Some classes in the parboiled framework have a generic type parameter. E.g. the class [`BaseParser`](https://github.com/sirthias/parboiled/blob/master/parboiled-java/src/main/java/org/parboiled/BaseParser.java). In it's documentation it says:

```
Type Parameters:
    V - the type of the parser values 
```

which I really not find a sufficient documentation. The documentation in the other classes is similiar or missing. Even in the wiki I didn't find information on that. They are just using `Object`.

Can anyone explain to me what this parameter is used for and what are valid types to hand over?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-25T21:51:45.507

解析值的类型，如“999”的整数。请参阅计算示例： [CalculatorParser0.java](https://github.com/sirthias/parboiled/blob/master/examples-java/src/main/java/org/parboiled/examples/calculators/CalculatorParser0.java)

# python - Python 日期时间与无值比较（Landscape API）

> ID：14961941
> 
> 赞同：1
> 
> 时间：2013-02-19T16:06:20.837
> 
> 标签：python, api

我正在从 Web 服务中删除一些数据，其中一个参数是 last_ping_time 女巫可以在某个时候没有值。我正在将当前日期与 last_ping_time 进行比较以检查与机器的通信。所以我得到

*ValueError：时间数据“无”与格式“%Y-%m-%dT%H:%M:%SZ”不匹配*

如果我得到 None 我试图设置虚拟值

```
 if ping=="None":

   ping="2013-01-01T00:00:00 
```

也试过 break 或 continue nut 他们似乎没有工作这个错误仍然存​​在。如果为空，我需要循环继续到下一个值或放置一些虚拟值并继续。我没有想法，请帮助。

```
with open(filename, 'wb') as csvfile:   #Creating report file
    spamwriter = csv.writer(csvfile, delimiter='    ')
    for computer in computers:

        ping=computer["last_ping_time"]
        ping=str(ping)
        ping.split('T')
        if ping=="None":
        #break
        ping="2013-01-01T00:00:00"  
        else

                ping=datetime.datetime.strptime(ping, '%Y-%m-%dT%H:%M:%SZ') # Convert string to data

                if ping<Current_Date: 
                        #toremove=count+1
                        os.system('zenity --info --text="Computers not contacting more than 30 days:%s "' % (computer["hostname"]))
                        #print "Needs to be deleted" #Control Variable

                        spamwriter.writerow((computer["id"], computer["hostname"], computer["title"], computer["last_ping_time"], "30 Days from last contact machine will be be removed"))
                else:
                        network=str(computer) #list to string
                        ip=network.split("u'ip_address': u'")[1] #1 shows what is after parameters
                        ip=ip.split("'")[0] #0 shows what is before parameters
                        mac=network.split("u'mac_address': u'")[1]
                        mac=mac.split("'")[0] 
                        print mac
                        print ip
                        spamwriter.writerow((computer["id"], computer["hostname"], computer["title"], computer["last_ping_time"], mac, ip)) 
os.system('zenity --info --text="Report is created with name:%s "' % (filename)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:25:47.573

删除`ping = str(ping)`行并使用：

```
if ping is None:
   # no last ping time 
```

# javascript - Restrict URL access in javascript server side

> ID：14961942
> 
> 赞同：-3
> 
> 时间：2013-02-19T16:06:21.707
> 
> 标签：javascript

I have a website I'm building using Parse as the backend and I want to restrict access to particular URLs (technically URIs) to users that don't have administrator access. As of right now, when users try to log in, their password is checked against the hashed password in the server.

However, if I only want administrators to have access to [http://mywebsite.com/secret.html](http://mywebsite.com/secret.html) and only once they've logged in, how I do that? Right now anyone can just go to that url, authenticated or not.

Edit: This site has no accounts other than the administrator ones. It's supposed to be anonymous.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:25:58.577

您无法使用 JavaScript 或 HTML 以安全的方式实现此目的，因为它是客户端的。您最好将 PHP 用于这种或其他一些服务器端 Web 语言。

使用 PHP，您可以通过这种方式轻松登录（在您的登录页面上）：

```
if($_POST['username'] == "admin" && $_POST['password'] == "adminpass"){
    $_SESSION['authed'] = true;
} 
```

在您希望保护的所有页面上，在文件顶部使用它：

```
if(!isset($_SESSION['authed']) || $_SESSION['authed'] != true){
    echo "You are not logged in";
    die(); //Kill the page so the secured content is not viewable
}else{
    echo "You are logged in";
}

// your secured content here 
```

# iphone - iCloud NSMetadata query results empty

> ID：14961943
> 
> 赞同：1
> 
> 时间：2013-02-19T16:06:24.990
> 
> 标签：iphone, icloud, nsmetadataquery

Hi friend i have got NSMetaDataQuery results are blank and i analyzed this [link](https://stackoverflow.com/questions/14114193/icloud-nsmetadata-query-results-are-blank?rq=1). i am confused.Please help me, here i add my source code of meta query

```
- (NSMetadataQuery *)documentQuery {

NSMetadataQuery * query = [[NSMetadataQuery alloc] init];
if (query) {

    // Search documents subdir only
    [query setSearchScopes:[NSArray arrayWithObject:NSMetadataQueryUbiquitousDataScope]];

    // Add a predicate for finding the documents
    NSString * filePattern = [NSString stringWithFormat:@"*.%@", PTK_EXTENSION];
    [query setPredicate:[NSPredicate predicateWithFormat:@"%K LIKE %@",
                         NSMetadataItemFSNameKey, filePattern]];

}
return query;

 }

   - (void)stopQuery {

if (_query) {

    NSLog(@"No longer watching iCloud dir...");

    [[NSNotificationCenter defaultCenter] removeObserver:self name:NSMetadataQueryDidFinishGatheringNotification object:nil];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:NSMetadataQueryDidUpdateNotification object:nil];
    [_query stopQuery];
    _query = nil;
}

}

 - (void)startQuery {

[self stopQuery];

NSLog(@"Starting to watch iCloud dir...");

_query = [self documentQuery];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(processiCloudFiles:)
                                             name:NSMetadataQueryDidFinishGatheringNotification
                                           object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(processiCloudFiles:)
                                             name:NSMetadataQueryDidUpdateNotification
                                           object:nil];

[_query startQuery];
 }

    - (void)processiCloudFiles:(NSNotification *)notification {

// Always disable updates while processing results
[_query disableUpdates];

[_iCloudURLs removeAllObjects];

// The query reports all files found, every time.

for (NSMetadataItem *result in _query.results) {

    NSURL * fileURL = [result valueForAttribute:NSMetadataItemURLKey];

    NSNumber * aBool = nil;

    // Don't include hidden files
    [fileURL getResourceValue:&aBool forKey:NSURLIsHiddenKey error:nil];

    if (aBool && ![aBool boolValue]) {

        [_iCloudURLs addObject:fileURL];

    }

}

NSLog(@"Found  iCloud URL: %@ .", _iCloudURLs);
NSLog(@"Found %d iCloud files.", _iCloudURLs.count);

_iCloudURLsReady = YES;

if ([self iCloudOn]) {

    // Remove deleted files
    // Iterate backwards because we need to remove items form the array

    for (int i = _objects.count -1; i >= 0; --i) {

        PTKEntry * entry = [_objects objectAtIndex:i];

        if (![_iCloudURLs containsObject:entry.fileURL]) {

            [self removeEntryWithURL:entry.fileURL];
        }
    }
    // Add new files
    for (NSURL * fileURL in _iCloudURLs) {

        [self loadDocAtURL:fileURL];
    }

    self.navigationItem.rightBarButtonItem.enabled = YES;

}

if (_moveLocalToiCloud) {

    _moveLocalToiCloud = NO;
    [self localToiCloudImpl];

}
else if (_copyiCloudToLocal) {

    _copyiCloudToLocal = NO;
    [self iCloudToLocalImpl];

}

[_query enableUpdates];

} 
```

please help me how can i solve this issue if i did wrong code please how can i approach correct way.

# jqgrid-asp.net - Documentation for ASP.NET Webforms jqGrid control?

> ID：14961954
> 
> 赞同：1
> 
> 时间：2013-02-19T16:06:52.200
> 
> 标签：jqgrid-asp.net

NOTE: I posted this question to the Trirand jqgrid support forum, but got no response. So I'm posting here:

I can't for the life of me find the documentation of all the options available when configuring the `<trirand:JQGrid>` object.

Visual Studio iterates through the options with the Intellisense feature, but this doesn't tell me much, beyond giving me a super-long list of available config settings.

Am I missing something? Most of my questions have to do with how to implement the config settings that I used to specify (without the ASP.NET Webforms control) when initializing the grid:

*   Where do I configure things like altRows, altclass, etc.?
*   Where do I configure rowNum, loadonce, pager settings, virtual scrolling, etc.?
*   Where do I specify all the edit settings?
*   What are the syntax options for specifying data formats, such as using DataFormatString="{0:d}" for dates...?

Note that I'm not posting to the forum seeking answers to these specific questions. I'm trying to find where all these things are documented. The Documentation section on the Trirand.net web site is very limited, and doesn't answer many of the lower-level-detail questions. Particularly as compared to the documentation for the pure-javascript jqgrid widget, which is very thoroughly documented.

Maybe this level of detail is only available when you purchase the control? That's fine, but I'll be a little gun-shy on purchasing if it's not clear that the product comes with thorough documentation...

Please advise...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T09:39:22.713

这是你要找的吗？

[http://www.trirand.net/documentation/aspnet/index.htm](http://www.trirand.net/documentation/aspnet/index.htm)

抱歉，我看到你已经提到了他们的网站——不过我会留下上面的 URL 以供参考。

# windows - Windows 8 Pro Tablet Com Ports

> ID：14961958
> 
> 赞同：1
> 
> 时间：2013-02-19T16:06:57.683
> 
> 标签：windows, windows-8, serial-port

We have recently purchased a Windows 8 Pro Tablet for development. However some of our applications interface to a GSM or 3G modem by the COM port.

However in from looking in device manager it seems that Windows 8 doesn't list the COM ports?

Is there a new way to interface to COM ports?

# .net - 寻找 Windows 屏幕保护程序测试启动程序

> ID：14961961
> 
> 赞同：0
> 
> 时间：2013-02-19T16:07:01.190
> 
> 标签：.net, windows, screensaver

我正在开发一个 Windows 屏幕保护程序，在开发它时，我想通过从某种模拟 Windows“屏幕保护程序设置”对话框完成的启动的小测试程序启动它来测试它。这样我就可以避免一次又一次地将我的屏幕保护程序和各种支持 DLL 复制到 Windows\System32。

特别是，它是使用“/p”选项和窗口句柄作为文本字符串的启动，我希望看到一个示例。最好用 C# 编写，但另一种语言的测试启动程序也很有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:34:26.180

Vimal Raj 在此线程上的回答中的信息是一个主要帮助： [如何在一个 Windows 窗体面板中的一个 Csharp 面板中使用多个表单？](https://stackoverflow.com/questions/5594971/how-to-use-multiple-forms-in-one-csharp-panel-in-one-windows-form-panel)

这是我的整个屏幕保护程序测试程序，忽略了 Visual Studio 设计器的东西：

```
 public partial class FormTest : Form
   {
      private readonly Form _formTinyView;

      // Constructor
      public FormTest()
      {
         InitializeComponent();

         // Create a tiny preview form and place it inside the Panel control
         _formTinyView = new Form();
         _formTinyView.FormBorderStyle = FormBorderStyle.None;
         _formTinyView.TopLevel = false;
         _formTinyView.Size = panelTinyView.Size;
         panelTinyView.Controls.Add(_formTinyView);
         _formTinyView.Visible = true;
      }

      // Display settings dialog
      private void Settings_Click(object sender, EventArgs e)
      {
         LaunchScreensaver("/c");
      }

      // Preview in tiny window
      private void TinyView_Click(object sender, EventArgs e)
      {
         LaunchScreensaver("/p " + _formTinyView.Handle);
      }

      // Standard preview
      private void Preview_Click(object sender, EventArgs e)
      {
         LaunchScreensaver("/s");
      }

      // Launch screensaver as a new process
      private static void LaunchScreensaver(string argumentString)
      {
         Process.Start(@"..\..\OutBackScreensaver\bin\Merlinia.OutBackScreensaver.exe", 
                       argumentString);
      }
   } 
```

# solr - 复合查询的 Solrnet q 参数问题

> ID：14961975
> 
> 赞同：0
> 
> 时间：2013-02-19T16:07:35.437
> 
> 标签：solr, solrnet

我们使用 Solrnet 根据用户可以选择的一组选项向 Solr 发出复合查询，例如短语、精确短语。排除、接近等。我们基于使用 SolrQueryByField API 选择的选项创建单独的查询，并使用 SolrMultipleCriteriaQuery 与 AND 运算符组合组合。但是当我们向 Solr 提交查询时，提交的 q 参数在所有术语中都添加了 + 号：

```
q=(ContentSearch:(roman)+AND+ContentSearch:("test+case")+AND+-ContentSearch:(wine)+AND+(ContentSearch:(A)+OR+ContentSearch:(B))+AND+ContentSearch:("catacombs+wine"~5)+AND+ContentSearch:([10+TO+20]))} 
```

+AND+ 或 "test+case" 或 +AND+- 或 10+TO+20 弄乱了查询解析器。有没有人遇到过这个？solrnet 向 solr 发送请求时，是否与 url 编码有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:20:01.197

如果您使用 SolrNet 0.4.0，您可以在 SolrQueryByField 上设置一个可选参数，`Quoted=false`这将停止 QueryByField 的默认行为以转义特殊字符。

# parsing - Windows Batch：如何将一个命令的输出设置为变量并在另一个命令中使用它？

> ID：14961978
> 
> 赞同：0
> 
> 时间：2013-02-19T16:07:42.193
> 
> 标签：parsing, batch-file

我正在尝试解析一个变量。说 NAMELIST = "AAA BBB CCC" 并将每一个存储为一个变量。然后，这些新变量必须在另一个命令中使用。例如：

```
perl.exe C:\action.pl <VAR1>
perl.exe C:\action.pl <VAR2>
perl.exe C:\action.pl <VAR3> 
```

我是 Windows Batch 的新手，因此我们将不胜感激。

我知道这个线程，但不完全理解解决方案

[Windows 批处理文件：如何使用命令的结果设置变量？](https://stackoverflow.com/questions/889518/windows-batch-files-how-to-set-a-variable-with-the-result-of-a-command)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:20:36.793

当您提到“将每个存储在一个变量中”时，这里涉及的概念是*数组*。您可以通过这种方式将 NAMELIST 变量的单词拆分为 3 个数组元素：

```
setlocal EnableDelayedExpansion
set i=0
for %%a in (%namelist%) do (
   set /A i=i+1
   set VAR!i!=%%a
) 
```

这样，您可以直接使用每个数组元素：

```
perl.exe C:\action.pl %VAR1%
perl.exe C:\action.pl %VAR2%
perl.exe C:\action.pl %VAR3% 
```

或者，以更简单的方式使用循环：

```
for /L %%i in (1,1,3) do perl.exe C:\action.pl !VAR%%i! 
```

**编辑**：您可以使用此方法在 NAMELIST 变量中使用无限数量的值，只需使用 %i% 的先前值而不是 3（更好的是，将其更改为“n”）。我还建议您以这种方式使用标准数组表示法`VAR[%%i]`：

```
setlocal EnableDelayedExpansion
set namelist=AAA BBB CCC DDD EEE FFF
set n=0
for %%a in (%namelist%) do (
   set /A n+=1
   set VAR[!n!]=%%a
)
for /L %%i in (1,1,%n%) do perl.exe C:\action.pl !VAR[%%i]! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:51:34.367

可以使用 for 循环设置批量变量。我将尝试解释链接中给出的示例。

> 对于 /f "delims=" %%a in ( `command`) 执行 @set theValue=%%a

这里 For /F 用于将输出分解为标记。“delims=” 表示没有给出明确的分隔符，因此假定为“空格”。%%a 类似于循环的索引变量，但是在编程语言中，索引变量具有数值的索引变量可以存储标记，即命令的输出，而不是传统的索引变量。set 命令然后将变量“theValue”设置为 %%a，它保存命令的输出/令牌。因此，如果语句是：

```
 for /f "delims=" %%a in (`echo Hi everyone!`) do @set theValue=%%a

theValue will then hold "Hi" as it is the first token seprated by space. 
```

您可以根据需要指定自己的分隔符。希望这可以帮助！

# apache-flex - 在 mxml 中操作组件添加需要覆盖什么

> ID：14961981
> 
> 赞同：1
> 
> 时间：2013-02-19T16:07:52.517
> 
> 标签：apache-flex

我有以下 mxml 代码：（MDI 类扩展组）

```
<uiframe:MDI id="mdi" >
    <s:DataGrid />
    <s:DataGrid x="200" />
</uiframe:MDI> 
```

基本上**我想**用一个面板替换 DataGrids，它包含 DataGrid。

我认为这会有所帮助：（在 MDI 中）

```
public override function addElement(element:IVisualElement):IVisualElement{
    replace(element); //replace does not get called
    return element;
} 
```

但是在通过 MXML 添加时它不会被调用。

**更新**：这现在有效，但我认为它不是最好的解决方案。

```
override protected function createChildren():void
{
    for(var i:int = 0; i < super.numElements; i++){
        var e:IVisualElement = removeElementAt(0);
        addMyType(e); //converts to what I want..
    }
    super.createChildren();         
} 
```

# android - 在 Android 上使用 Parse API：应用程序被错误配置为 Facebook 登录

> ID：14961985
> 
> 赞同：1
> 
> 时间：2013-02-19T16:08:00.273
> 
> 标签：android, facebook, parse-platform

我正在使用 Parse.com API 将我的应用程序连接到 Facebook 并共享一些数据。

我在我的代码中检查了 Parse.initialize，它有正确的键。我在我的代码中检查了 ParseFacebookUtils.initialize 并且它具有正确的 Facebook 应用程序 ID。我已经检查了我的解析帐户上的设置，并且启用了 facebook 身份验证，并且 facebook 应用程序 ID 设置正确。

不知道为什么我无法通过 Parse 连接到 facebook。

顺便说一句，如果我删除 Facebook 官方应用程序，问题就会得到解决，但如果它安装在我的设备上，我就会开始遇到这个问题。

我错过了要检查的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:34:05.617

我找到了我的问题的解决方案......

它与在 facebook 上注册的密钥哈希有关。对于遇到此问题的人，我建议检查您在开发 PC 上获得的密钥哈希，并检查该密钥哈希是否已在 Facebook 上为您的应用程序注册。

如果您像我一样是新手并且不知道如何处理与密钥哈希相关的内容，请查看此链接：

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

# html - PostgreSQL 替换 HTML 实体功能

> ID：14961992
> 
> 赞同：9
> 
> 时间：2013-02-19T16:08:12.410
> 
> 标签：html, postgresql, replace, html-entities, character-entities

我[在互联网上发现了这个非常有趣的功能](http://www.siafoo.net/snippet/148)：

```
CREATE OR REPLACE FUNCTION strip_tags(TEXT) RETURNS TEXT AS $$
    SELECT regexp_replace(regexp_replace($1, E'(?x)<[^>]*?(\s alt \s* = \s* ([\'"]) ([^>]*?) \2) [^>]*? >', E'\3'), E'(?x)(< [^>]*? >)', '', 'g')
$$ LANGUAGE SQL; 
```

但它不会删除 html 代码，例如：`&quot;` `&nbsp;` Is it possible to remove them using regexp_replace?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T17:18:22.177

是的，可以使用函数将 HTML 或其他字符实体替换为相应的字符。首先创建一个字符实体表：

```
create table character_entity(
    name text primary key,
    ch char(1) unique
);
insert into character_entity (ch, name) values
    (E'\u00C6','AElig'),(E'\u00C1','Aacute'),(E'\u00C2','Acirc'),(E'\u00C0','Agrave'),(E'\u0391','Alpha'),(E'\u00C5','Aring'),(E'\u00C3','Atilde'),(E'\u00C4','Auml'),(E'\u0392','Beta'),(E'\u00C7','Ccedil'),
    (E'\u03A7','Chi'),(E'\u2021','Dagger'),(E'\u0394','Delta'),(E'\u00D0','ETH'),(E'\u00C9','Eacute'),(E'\u00CA','Ecirc'),(E'\u00C8','Egrave'),(E'\u0395','Epsilon'),(E'\u0397','Eta'),(E'\u00CB','Euml'),
    (E'\u0393','Gamma'),(E'\u00CD','Iacute'),(E'\u00CE','Icirc'),(E'\u00CC','Igrave'),(E'\u0399','Iota'),(E'\u00CF','Iuml'),(E'\u039A','Kappa'),(E'\u039B','Lambda'),(E'\u039C','Mu'),(E'\u00D1','Ntilde'),
    (E'\u039D','Nu'),(E'\u0152','OElig'),(E'\u00D3','Oacute'),(E'\u00D4','Ocirc'),(E'\u00D2','Ograve'),(E'\u03A9','Omega'),(E'\u039F','Omicron'),(E'\u00D8','Oslash'),(E'\u00D5','Otilde'),(E'\u00D6','Ouml'),
    (E'\u03A6','Phi'),(E'\u03A0','Pi'),(E'\u2033','Prime'),(E'\u03A8','Psi'),(E'\u03A1','Rho'),(E'\u0160','Scaron'),(E'\u03A3','Sigma'),(E'\u00DE','THORN'),(E'\u03A4','Tau'),(E'\u0398','Theta'),
    (E'\u00DA','Uacute'),(E'\u00DB','Ucirc'),(E'\u00D9','Ugrave'),(E'\u03A5','Upsilon'),(E'\u00DC','Uuml'),(E'\u039E','Xi'),(E'\u00DD','Yacute'),(E'\u0178','Yuml'),(E'\u0396','Zeta'),(E'\u00E1','aacute'),
    (E'\u00E2','acirc'),(E'\u00B4','acute'),(E'\u00E6','aelig'),(E'\u00E0','agrave'),(E'\u2135','alefsym'),(E'\u03B1','alpha'),(E'\u0026','amp'),(E'\u2227','and'),(E'\u2220','ang'),(E'\u00E5','aring'),
    (E'\u2248','asymp'),(E'\u00E3','atilde'),(E'\u00E4','auml'),(E'\u201E','bdquo'),(E'\u03B2','beta'),(E'\u00A6','brvbar'),(E'\u2022','bull'),(E'\u2229','cap'),(E'\u00E7','ccedil'),(E'\u00B8','cedil'),
    (E'\u00A2','cent'),(E'\u03C7','chi'),(E'\u02C6','circ'),(E'\u2663','clubs'),(E'\u2245','cong'),(E'\u00A9','copy'),(E'\u21B5','crarr'),(E'\u222A','cup'),(E'\u00A4','curren'),(E'\u21D3','dArr'),
    (E'\u2020','dagger'),(E'\u2193','darr'),(E'\u00B0','deg'),(E'\u03B4','delta'),(E'\u2666','diams'),(E'\u00F7','divide'),(E'\u00E9','eacute'),(E'\u00EA','ecirc'),(E'\u00E8','egrave'),(E'\u2205','empty'),
    (E'\u2003','emsp'),(E'\u2002','ensp'),(E'\u03B5','epsilon'),(E'\u2261','equiv'),(E'\u03B7','eta'),(E'\u00F0','eth'),(E'\u00EB','euml'),(E'\u20AC','euro'),(E'\u2203','exist'),(E'\u0192','fnof'),
    (E'\u2200','forall'),(E'\u00BD','frac12'),(E'\u00BC','frac14'),(E'\u00BE','frac34'),(E'\u2044','frasl'),(E'\u03B3','gamma'),(E'\u2265','ge'),(E'\u003E','gt'),(E'\u21D4','hArr'),(E'\u2194','harr'),
    (E'\u2665','hearts'),(E'\u2026','hellip'),(E'\u00ED','iacute'),(E'\u00EE','icirc'),(E'\u00A1','iexcl'),(E'\u00EC','igrave'),(E'\u2111','image'),(E'\u221E','infin'),(E'\u222B','int'),(E'\u03B9','iota'),
    (E'\u00BF','iquest'),(E'\u2208','isin'),(E'\u00EF','iuml'),(E'\u03BA','kappa'),(E'\u21D0','lArr'),(E'\u03BB','lambda'),(E'\u2329','lang'),(E'\u00AB','laquo'),(E'\u2190','larr'),(E'\u2308','lceil'),
    (E'\u201C','ldquo'),(E'\u2264','le'),(E'\u230A','lfloor'),(E'\u2217','lowast'),(E'\u25CA','loz'),(E'\u200E','lrm'),(E'\u2039','lsaquo'),(E'\u2018','lsquo'),(E'\u003C','lt'),(E'\u00AF','macr'),
    (E'\u2014','mdash'),(E'\u00B5','micro'),(E'\u00B7','middot'),(E'\u2212','minus'),(E'\u03BC','mu'),(E'\u2207','nabla'),(E'\u00A0','nbsp'),(E'\u2013','ndash'),(E'\u2260','ne'),(E'\u220B','ni'),
    (E'\u00AC','not'),(E'\u2209','notin'),(E'\u2284','nsub'),(E'\u00F1','ntilde'),(E'\u03BD','nu'),(E'\u00F3','oacute'),(E'\u00F4','ocirc'),(E'\u0153','oelig'),(E'\u00F2','ograve'),(E'\u203E','oline'),
    (E'\u03C9','omega'),(E'\u03BF','omicron'),(E'\u2295','oplus'),(E'\u2228','or'),(E'\u00AA','ordf'),(E'\u00BA','ordm'),(E'\u00F8','oslash'),(E'\u00F5','otilde'),(E'\u2297','otimes'),(E'\u00F6','ouml'),
    (E'\u00B6','para'),(E'\u2202','part'),(E'\u2030','permil'),(E'\u22A5','perp'),(E'\u03C6','phi'),(E'\u03C0','pi'),(E'\u03D6','piv'),(E'\u00B1','plusmn'),(E'\u00A3','pound'),(E'\u2032','prime'),
    (E'\u220F','prod'),(E'\u221D','prop'),(E'\u03C8','psi'),(E'\u0022','quot'),(E'\u21D2','rArr'),(E'\u221A','radic'),(E'\u232A','rang'),(E'\u00BB','raquo'),(E'\u2192','rarr'),(E'\u2309','rceil'),
    (E'\u201D','rdquo'),(E'\u211C','real'),(E'\u00AE','reg'),(E'\u230B','rfloor'),(E'\u03C1','rho'),(E'\u200F','rlm'),(E'\u203A','rsaquo'),(E'\u2019','rsquo'),(E'\u201A','sbquo'),(E'\u0161','scaron'),
    (E'\u22C5','sdot'),(E'\u00A7','sect'),(E'\u00AD','shy'),(E'\u03C3','sigma'),(E'\u03C2','sigmaf'),(E'\u223C','sim'),(E'\u2660','spades'),(E'\u2282','sub'),(E'\u2286','sube'),(E'\u2211','sum'),
    (E'\u2283','sup'),(E'\u00B9','sup1'),(E'\u00B2','sup2'),(E'\u00B3','sup3'),(E'\u2287','supe'),(E'\u00DF','szlig'),(E'\u03C4','tau'),(E'\u2234','there4'),(E'\u03B8','theta'),(E'\u03D1','thetasym'),
    (E'\u2009','thinsp'),(E'\u00FE','thorn'),(E'\u02DC','tilde'),(E'\u00D7','times'),(E'\u2122','trade'),(E'\u21D1','uArr'),(E'\u00FA','uacute'),(E'\u2191','uarr'),(E'\u00FB','ucirc'),(E'\u00F9','ugrave'),
    (E'\u00A8','uml'),(E'\u03D2','upsih'),(E'\u03C5','upsilon'),(E'\u00FC','uuml'),(E'\u2118','weierp'),(E'\u03BE','xi'),(E'\u00FD','yacute'),(E'\u00A5','yen'),(E'\u00FF','yuml'),(E'\u03B6','zeta'),
    (E'\u200D','zwj'),(E'\u200C','zwnj')
; 
```

这是功能：

```
create or replace function entity2char(t text)
returns text as $body$
declare
    r record;
begin
    for r in
        select distinct ce.ch, ce.name
        from
            character_entity ce
            inner join (
                select name[1] "name"
                from regexp_matches(t, '&([A-Za-z]+?);', 'g') r(name)
            ) s on ce.name = s.name
    loop
        t := replace(t, '&' || r.name || ';', r.ch);
    end loop;

    for r in
        select distinct
            hex[1] hex,
            ('x' || repeat('0', 8 - length(hex[1])) || hex[1])::bit(32)::int codepoint
        from regexp_matches(t, '&#x([0-9a-f]{1,8}?);', 'gi') s(hex)
    loop
        t := regexp_replace(t, '&#x' || r.hex || ';', chr(r.codepoint), 'gi');
    end loop;

    for r in
        select distinct
            chr(codepoint[1]::int) ch,
            codepoint[1] codepoint
        from regexp_matches(t, '&#([0-9]{1,10}?);', 'g') s(codepoint)
    loop
        t := replace(t, '&#' || r.codepoint || ';', r.ch);
    end loop;

    return t;
end;
$body$
language plpgsql immutable; 
```

像这样使用它：

```
select entity2char('HH&#9632;XXX&AElig;YYY&times;ZZZ&#x25a0;UUU');
    entity2char     
--------------------
 HH■XXXÆYYY×ZZZ■UUU 
```

它仅适用于 UTF-8。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T23:18:03.703

这句经典名言可能适用于此：*有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。*正则表达式很有用，但 HTML 解析不是他们非常适合的工作。[Jeff Atwood 很好地解释了这一点](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。要正确地从 HTML 中剥离标签，需要进行某种解析。

我建议您使用更强大的 PL`PL/Perl`或`PL/Pythonu`调用成熟且经过良好测试的 HTML 剥离库。例如，您可以[`HTML::Strip`](http://search.cpan.org/dist/HTML-Strip/Strip.pm)通过一个接受和返回的`plperl`函数来使用 Perl 。`text``text`

处理这个问题的快速而肮脏的方法是使用另一层`regexp_replace`表达式来转换实体。不过，这将迅速引导您[走上 Igor 所暗示的道路](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)，最好使用现有的工具来避免。例如，如果您使用`HTML::Strip`它将`HTML::Entities`作为流程的一部分为您转换实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-17T12:44:25.077

我已经成功使用了一段时间 - 感谢您的解决方案。但是，我刚刚发现这似乎不适用于诸如 ²（上标 2 = ²）之类的 HTML 项目，并且我怀疑任何其他在结束“;”之前有数字的 HTML 项目。

我相信这条线

```
from regexp_matches(t, '&([A-Za-z]+?);', 'g') r(name) 
```

应该

```
from regexp_matches(t, '&([A-Za-z]+[0-9]?);', 'g') r(name) 
```

我已经尝试了几个例子，它似乎有效。

# highcharts - Highcharts - Stacked bar - 可能有与数据间隔相对应的标签间隔？

> ID：14961997
> 
> 赞同：1
> 
> 时间：2013-02-19T16:08:28.500
> 
> 标签：highcharts, bar-chart, intervals, labels, stacked

我用 Highcharts 生成了一个堆积条形图，但标签之间的间隔有问题。

我的数据间隔仅为 6，highchart 生成的标签间隔为 100，请参见此处的演示：http: [//jsfiddle.net/NjaEw/2/](http://jsfiddle.net/NjaEw/2/)

我想要一个与数据相对应的标签间隔。

这里的代码：

```
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<h1>Testing</h1>
<div id="conformity-by-page" style="width: 100%; height:250px; margin: 0 auto"></div>

        $(document).ready(function() {
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'conformity-by-page',
                    type: 'bar',
                    borderWidth: 1,
                    borderColor: '#000',
                    borderRadius: 0,
                    marginTop: 50
                },
                exporting: {
                    enabled: false
                },
                title: {
                    text: ''
                },
                xAxis: {
                    lineWidth:5,      
                    categories: ['Web site'],
                    //tickWidth: 0,
                    title: {
                        text: null
                    },
                    labels: {
                        style: {
                            color: '#000000',
                            fontWeight: 'bold',
                            fontSize: '14px'
                        }
                    }
                },
                yAxis: {
                    lineWidth:0,
                    title: {
                        text: 'Number of page',
                        align: 'high',
                        style: {
                            color: '#000000',
                            fontSize: '16px'
                        }
                    },
                    labels: {
                        overflow: 'justify',
                        style: {
                            color: '#000000',
                            fontWeight: 'bold',
                            fontSize: '14px'
                        }
                    }

                },
                tooltip: {
                    formatter: function() {
                        return ''+
                            this.series.name +': '+ this.y +' règles';
                    },
                    backgroundColor: '#FFFFFF',
                    style: {
                        color: '#000',
                        fontSize: '14px',
                        padding: '5px'
                    }
                },
                plotOptions: {
                    bar: {
                        borderColor: '#000000',
                        borderWidth: 1,
                        /*minPointLength: 10,*/
                        pointWidth: 25,
                        stacking: 'percent',
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    verticalAlign: 'top',
                    backgroundColor: '#FFFFFF',
                    reversed: true,
                    shadow: true,
                    symbolWidth: 50,
                    itemStyle: {
                        color: '#000000',
                        fontSize: '15px'
                    }
                },
                credits: {
                    enabled: false
                },      series: [{
                    name: 'Warning',data: [null], color: '#FFFF40',
                    dataLabels: {
                        style: {
                            fontSize: '15px',
                            color: '#000000'
                        }
                    }
                }, {
                    name: 'Error',data: [3], color: '#FF8080',
                    dataLabels: {
                        style: {
                            fontSize: '15px',
                            color: '#000000'
                        }
                    }
                }, {
                    name: 'N/A',data: [1], color: '#B5EBFB',
                    dataLabels: {
                        style: {
                            fontSize: '15px',
                            color: '#000000'
                        }
                    }
                }, {
                    name: 'OK',data: [2], color: '#80FF80',
                    dataLabels: {
                        style: {
                            fontSize: '15px',
                            color: '#000000'
                        }
                    }
                }]
            });
       }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:52:06.147

问题是您正在使用`stacking: 'percent'`.
将其更改为`'normal'`.

[**演示**](http://jsfiddle.net/NjaEw/4/)