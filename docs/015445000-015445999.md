# StackOverflow 问答 15445000-15445999

# memcached - phpinfo() 中列出的 php-fpm 扩展因“找不到类”而失败

> ID：15445004
> 
> 赞同：4
> 
> 时间：2013-03-16T02:44:01.037
> 
> 标签：memcached, php-extension, php

CentOS 上的 nginx + php-fpm，全部从源代码编译。添加 memcached 支持，我编译`libmemcached`和 php "memcached" 扩展，在 php-fpm 配置中添加一行 `php_admin_value[extension]=memcached.so' 并重新启动 php-fpm。

通过 web 服务器打开一个测试 php`phpinfo()`开始显示有关“memcached”扩展的部分（[截图](https://dl.dropbox.com/u/3533396/SO/ss.memcached.png)）。但是，实例化类的尝试失败并出现致命错误：`Class 'Memcached' not found`。

我还尝试以相同的方式安装 php“memcache”（*不带 'd'* ​​）扩展：下载`phpize`源文件、、、、、`configure`。都一样：[列](https://dl.dropbox.com/u/3533396/SO/ss.memcache.png)在“找不到类”的致命错误中。`make``make install``phpinfo();`

我做错了什么，**如何向 php-fpm 添加已编译的扩展？** `yum`/`pecl`包管理器目前不是一个选项，因为需要特定版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:13:11.257

你的设置似乎很好。我有相同的设置，除了我的 memcache/memcached 是由 yum 安装的。所以也许你的 memcache/memcached 没有正确安装。以下链接提到了对 zlib-devel 的依赖。

[致命错误：找不到类“Memcache”（与 pecl 一起安装）](https://stackoverflow.com/questions/10773524/fatal-error-class-memcache-not-found-installed-with-pecl)

# java - 2个和更多单向关系（onetoone）

> ID：15445011
> 
> 赞同：1
> 
> 时间：2013-03-16T02:46:18.820
> 
> 标签：java, entity, one-to-one

我有个问题。

我有 3 个实体：`member`, `contact`,`fine`

会员联系（一对一单向） 会员罚款（一对一单向）

在我声明的成员实体类中

```
@OneToOne(cascade={CascadeType.PERSIST})
   private ContactEntity contact; 
```

当我尝试运行我的应用程序时，一切正常。

但是当我尝试添加罚款时

```
@OneToOne(cascade={CascadeType.PERSIST})
   private FineEntity fine; 
```

有错误。

我尝试在线搜索并将其更改为 CascadeType.ALL 错误仍然存​​在。

我是否以正确的方式声明它？

# css - 居中的 CSS flexbox - 使用绝对位置时的 Firefox 错误？

> ID：15445015
> 
> 赞同：3
> 
> 时间：2013-03-16T02:47:21.870
> 
> 标签：css, firefox, css-position, flexbox

当绝对位置与居中的弹性框项目一起使用时，我遇到了这个问题。它在 Firefox 中不起作用。

这是[链接](http://jsfiddle.net/4qDUp/)。

**HTML**

```
<div>
    <p>Center me!</p>
</div> 
```

**CSS**

```
div
{
    width:350px;
    height:100px;
    border:1px solid black;

    position:absolute;
    left:0;
    top:0;

    /* Firefox */
    display:-moz-box;
    display:inline-flex;
    -moz-box-pack:center;
    -moz-box-align:center;

    /* Safari and Chrome */
    display:-webkit-box;
    -webkit-box-orient:horizontal;
    -webkit-box-pack:center;
    -webkit-box-align:center;

    /* W3C */
    display:box;
    box-orient:horizontal;
    box-pack:center;
    box-align:center;
} 
```

知道如何解决这个问题，因为我需要在 div 中使用绝对位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T20:33:11.347

我可以通过在绝对定位的元素中放置一个额外的 div 来解决这个问题，让它显示 flexbox，然后是 100% 的高度和宽度。

```
<div class='container'>
<div>Centered Text here</div>
</div> 
```

这是我的实现的一个小提琴：[我的解决方案（http://jsfiddle.net/pmvjb/）](http://jsfiddle.net/pmvjb/)

# sql - Oracle 中的 EXCEPT 关键字

> ID：15445019
> 
> 赞同：17
> 
> 时间：2013-03-16T02:48:10.263
> 
> 标签：sql, oracle, oracle10g, sql-except

我正在尝试在 Oracle 10.1.0.2.0 中使用 EXCEPT 关键字，但不断收到错误“未知命令”。我试过谷歌搜索，有人说关键字是 MINUS，所以我改用 MINUS，但我仍然遇到同样的错误。任何的想法？谢谢。

所以这是我的查询。我正在查找注册所有课程编号 > 500 的学生的姓名

```
SELECT s.name
FROM Students s
WHERE NOT EXISTS
  (
    SELECT c.id
    FROM Courses c
    WHERE c.number > 500

    MINUS

    SELECT e.course_id
    FROM Enrollment e
    WHERE e.student_id = s.id
  ); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-16T03:10:54.990

Oracle`MINUS`是运营商；它相当于`EXCEPT`在 SQL Server 中。 [这是以前的帖子](https://stackoverflow.com/q/5557991/1275871)，解释了差异。这是一个简单的例子：

```
SELECT a, b, c
FROM   table_a
MINUS
SELECT a, b, c
FROM   table_b 
```

如果您仍有问题，请将您正在使用的完整查询添加到您的问题中；这可能是一个简单的语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-20T18:16:54.623

Oracle 20c 将支持[`EXCEPT/EXCEPT ALL`](https://twitter.com/RoelH/status/1174455545631141888)关键字。

```
SELECT col1, col2
FROM t1
EXCEPT
SELECT col1, col2
FROM t2; 
```

或者`EXCEPT ALL`如果你想处理重复：

```
SELECT col1, col2
FROM t1
EXCEPT ALL
SELECT col1, col2
FROM t2; 
```

> [4.6 集合运算符](https://docs.oracle.com/en/database/oracle/oracle-database/20/sqlrf/Set-Operators.html#GUID-5CB549AF-5A4F-453E-B164-49CAC8F94CBF)
> 
> 集合运算符将两个组件查询的结果组合成一个结果。
> 
> **除了**第一个查询选择的所有不同行但不是第二个查询
> 
> **EXCEPT ALL**第一个查询选择的所有行，但不包括第二个查询，包括重复项

# makefile - MakeFile 在运行时设置变量

> ID：15445021
> 
> 赞同：0
> 
> 时间：2013-03-16T02:48:29.237
> 
> 标签：makefile, gnu-make

我有一个如下的makefile..在第一行说windows..然后在同一行，我尝试将变量设置为windows并将jmp设置为$(WinDIR)/$(WinOUT)

我怎样才能做到这一点？

```
windows: ObjDIR=Windows $(WinDIR)/$(WinOUT)
    @echo
    @echo "Finished Making windows.."

clean:
    @echo "    Cleaning Build Files."
    @rm -rf $(BinDIR) $(ObjDIR)

$(WinDIR)/$(WinOUT): $(ObjFiles)
    @echo
    @echo "Linking Object Files.." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:34:22.767

嗯...

```
windows: ObjDIR=Windows

windows: $(WinDIR)/$(WinOUT)
    @echo
    @echo "Finished Making windows.." 
```

但我不确定您是否了解 Make 的工作原理。它不会“跳转到” `$(WinDIR)/$(WinOUT)`，它会——也许——首先执行`$(WinDIR)/$(WinOUT)`规则。

# spring - 从 xml 或 html 生成 pdf

> ID：15445026
> 
> 赞同：1
> 
> 时间：2013-03-16T02:49:37.883
> 
> 标签：spring, pdf, itext

我们需要生成我们在屏幕上显示的 html 报告的 pdf。现在，此报告也将以 xml 或 pdf 格式存储在数据库中，以便将来查看。所以我正在考虑使用itext从后端生成pdf。但问题是我们是使用 html 使用 htmllworker 生成报告，还是使用服务器端的 xml 生成报告。使用 xml 似乎是更好的选择，因为它更可重用，但 xmlworker 应该更快地编写代码？

问题是你在这两种情况下看到任何缺点吗？使用 xml-pdf，如果前端需要任何更改，我们必须在 2 个地方进行更改。关于哪一个的任何建议。使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:05:07.663

是的，它会建议只使用一个更改点，那就是 HTML。如果您仅更改 HTML，则有许多工具可以转换：

*   wkhtmltopdf（基于 webkit，自己安装，CSS2 + 一些 CSS3）
*   dompdf (PHP CSS2.1 引擎)
*   一个外部 API（有几个 API，例如[htm2pdf.co.uk](http://htm2pdf.co.uk)）

通过仅更改 HTML，您不必担心源 (HTML) 和结果 (PDF) 的差异，而只需确保转换器处理您做得好的事情。注意您的样式要求，尤其是分页。

祝你好运

# javascript - 尝试在表中调用 Javascript 函数但无法使其工作

> ID：15445032
> 
> 赞同：0
> 
> 时间：2013-03-16T02:51:05.547
> 
> 标签：javascript, html, function, html-table

我正在编写一些 Javascript，该函数的目的是构建一个表格，调用函数并在某些单元格中显示结果。到目前为止，这是我的代码：

```
function buildproduct(prodName, prodID, prodDescription) {
var data = makeHeader()
data += "<TABLE style='width:100%' border=1 cellpadding=10>"
data += "<TR><TD rowspan=3 style='width:30%;text-align:center;verti…
data += "align:middle'>makeID(prodID)"
data += "</TD>"
data += "<TD>makeName(prodName)</TD>"
data += "<TD style='text-align:right'>makeID(prodID)<…
data += "</TR>"
data += "<TR><TD style='text-align:center' colspan=2>Shopping Cart Link Bar"
data += "</TD></TR>"
data += "<TR><TD colspan=2 >makeDescription(prodDescription)</TD></…
data += "</TABLE>"
data += makeFooter()
return document.writeln(data)
document.close()
} 
```

我一直在尝试调用`makeName(prodName)`里面的table里面的`<TD>`. 当我运行它时，我只是`makeName(prodName)`以文本而不是内容显示。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T02:55:17.633

您拥有 makeName 的方式，它是字符串本身的一部分。将其更改为以下内容：

```
data+="<TD>" + makeName(prodName) + "</TD>"; 
```

# javascript - in 语句的自定义

> ID：15445033
> 
> 赞同：0
> 
> 时间：2013-03-16T02:51:12.997
> 
> 标签：javascript

[此页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)有示例：

```
for (var name in buz) {
   if (buz.hasOwnProperty(name)) {}
} 
```

防止看到原型中的东西。这个 hack 使得“for in”语句在 JavaScript 中几乎毫无用处。目前的建议是不要使用“for in”。

问：是否可以编写一个自动包含 if (buz.hasOwnProperty(name)) {} 条件的自定义“for in”函数？

我在想类似的东西：

```
window.whatFor = function(variable,object) {
   for (var variable in object) [
      if (object.hasOwnProperty(variable) {
         do something here
      }
   }
} 
```

用法：

```
whatFor(name,buz) {
do something here 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T02:56:23.453

我想这就是你想要的

```
window.whatFor = function(obj,funct) {
   for (var v in obj) {
      if (obj.hasOwnProperty(v)) {
         funct(v);
      }
   }
} 
```

然后。

```
whatFor(sam, function (x) { alert(x); } ); 
```

[把它弄乱](http://jsfiddle.net/wTSmu/)- 因为，为什么不呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:26:14.637

我真的不明白你为什么要附加`whatFor`到`window`对象上。这样做将使您的代码浏览器特定。你甚至不能在网络工作者中使用它。

这就是我要做的：

```
var global = typeof global !== "undefined" ? global :
             typeof self !== "undefined" ? self : this;

global.whatFor = whatFor;

function whatFor(object, callback) {
    var hasOwn = {}.hasOwnProperty.bind(object);

    for (var property in object)
        if (hasOwn(property))
            callback(property);
} 
```

你可能已经注意到`object.hasOwnProperty(property)`我不是打电话`hasOwn(property)`而是打电话。这是因为该`hasOwnProperty`方法可能不存在于对象的原型链中。

# php - 重写url搜索结果和分页

> ID：15445034
> 
> 赞同：0
> 
> 时间：2013-03-16T02:51:14.837
> 
> 标签：php, mod-rewrite, url-rewriting

大家好，我尝试使用 mod rewrite 制作搜索结果 url

我的网址是这个

```
products/?categorie=2&subcategorie=&make=&p=2  (P is Page) 
```

我试过这个

```
RewriteRule ^products([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /? categorie=$1&subcategorie=$2&make=$3&p=$4 [L] 
```

在这个分页不起作用

我的 htaccess 看起来像这样

```
RewriteEngine On
# =========== Configuracoes Default =========== #
AddDefaultCharset UTF-8
RewriteCond %{REQUEST_FILENAME} !^(.+)\.(css|js|xml|swf|pdf|doc|rtf)$
RewriteCond %{REQUEST_FILENAME} !^(.+)\.(jpg|png|gif)$
RewriteCond %{REQUEST_FILENAME} !^(.+)\.(ttf|otf|woff|eot|svg)$
RewriteCond %{REQUEST_FILENAME} !/php/acoes.php
RewriteCond %{REQUEST_FILENAME} !favicon.ico
RewriteCond %{REQUEST_FILENAME} !apple-touch-icon.png
RewriteCond %{REQUEST_FILENAME} !robots.txt

RewriteRule ^(.+)\/?([0-9]*)\/?$ php/index.php
#RewriteRule ^products([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /? categorie=$1&subcategorie=$2&make=$3&p=$4 [L] 
```

我的 php 文件位于文件夹名称 php 中

我用于返回搜索结果的 php 文件是这样的

```
<?php
$Subcategorie_Id = mysql_real_escape_string($_REQUEST["subcategorie"]);
$Categorie_Id = mysql_real_escape_string($_REQUEST["categorie"]);
$Make_Id = mysql_real_escape_string($_REQUEST["make"]);

$SqlCount = "SELECT Product_Id FROM tabproducts WHERE Product_Status =1";
if($Categorie_Id) $SqlCount .= " AND tabproducts.Categorie_Id = '$Categorie_Id' ";
if($Subcategorie_Id) $SqlCount .= " AND tabproducts.Subcategorie_Id = '$Subcategorie_Id' ";
if($Make_Id) $SqlCount .= " AND tabproduct.Make_Id = '$Make_Id' ";
$QueryCount = mysql_query($SqlCount, $Conn) or die(mysql_error($Conn));
$RsCount = mysql_fetch_array($QueryCount);
$recordCount = mysql_num_rows($QueryCount);
if (!$_REQUEST["p"]) $p = 1;
else $p = $_REQUEST["p"];
$pageSize = 24;
$itemIni = ($pageSize*$p)-$pageSize;
$totalPage = ceil($recordCount/$pageSize);  
?> 
```

# python - rqworker 超时

> ID：15445036
> 
> 赞同：21
> 
> 时间：2013-03-16T02:51:46.660
> 
> 标签：python, django, redis

我正在使用 django-rq 来处理我的 django 站点上的一些长时间运行的任务。这些任务触发（我假设）rqworker 的 180 秒超时：

```
JobTimeoutException: Job exceeded maximum timeout value (180 seconds). 
```

如何增加此超时值？我尝试将 --timeout 360 添加到 rqworker 命令，但这无法识别。

在我的 python 代码中，我的长期工作是通过调用

```
 django_rq.enqueue(
            populate_trends,
            self,
        ) 
```

并尝试过

```
 django_rq.enqueue_call(
            func=populate_trends,
            args=(self,),
            timeout=3600,
        ) 
```

我在[rq 文档](http://python-rq.org/docs/)中注意到但 django-rq 似乎没有这样的方法。

**更新**

现在我分叉了 django-rq 并添加了一个[占位符修复](https://github.com/EATechnologies/django-rq/commit/fbf0c366fa094082f307a9688f058e582fb403c8)来增加超时。可能需要与项目合作以获得更长期的解决方案。我已经开始在那里讨论一个[问题。](https://github.com/ui/django-rq/issues/16)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-16T06:03:09.173

这似乎是解决问题的正确方法。

```
queue = django_rq.get_queue('default')
queue.enqueue(populate_trends, args=(self,), timeout=500) 
```

如果你需要通过 kwargs，

```
queue = django_rq.get_queue('default')
queue.enqueue(populate_trends, args=(self,), kwargs={'x': 1,}, timeout=500) 
```

感谢 django-rq 项目的 selwin 提供的帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-15T10:28:59.443

更新：您可以将 timeout 参数作为关键字参数传递给 django-rq 的 @job 装饰器。请注意，您必须首先传递队列名称参数。

```
@job("default", timeout=600)
def long_running_task():
    ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-04T12:55:21.013

使用**`job_timeout`**：

```
queue.enqueue(worker_func, *args, **kwargs, job_timeout=200) 
```

* * *

[正如斯蒂芬布莱尔](https://stackoverflow.com/users/680521/stephen-blair)所指出的，该`timeout`参数不适用于较新版本的 rq：

> `timeout`on 的论点`queue.enqueue()`已被弃用，取而代之的是`job_timeout`.

*[https://github.com/rq/rq/blob/master/CHANGES.md#10-2019-04-06](https://github.com/rq/rq/blob/master/CHANGES.md#10-2019-04-06)*

哪里`job_timeout`的效果和以前一样`timeout`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-02T06:43:17.753

为了让人们清楚地使用带参数的函数，您可以按如下方式传递超时

```
 string_to_print = "Hello World"

 queue = django_rq.get_queue('default')
 queue.enqueue(print_input, to_print=string_to_print, timeout=600) 
```

对于采用如下参数的函数

```
 @job
 def print_input(to_print):
     print "The input supplied is ", to_print 
```

# vb.net - DirectShow MP3 压缩

> ID：15445037
> 
> 赞同：0
> 
> 时间：2013-03-16T02:52:10.823
> 
> 标签：vb.net, mp3, directshow, wav, file-conversion

我一直在使用 DirectShow 过滤器将音频从一种格式转换和压缩到另一种格式。我使用 GraphStudio 和 GraphStudioNext 创建过滤器图，然后将其转换为 VB.Net 中的过滤器。直到现在，他们一直工作得很好。我正在尝试将 .wav 文件转换为 .mp3。使用 GraphStudio 和以下过滤器与默认连接链接在一起，我得到了压缩文件。FileSource-Async-->WaveParser-->MPEG Layer3--> WAV Dest --> Filewriter。

但是，当我在我的 VB.Net 程序中将相同的过滤器连接在一起时，我根本没有得到任何压缩。我什至尝试使用 IAMStreamConfig 接口设置压缩，但是当我枚举程序中的引脚时，GraphStudio 中显示的压缩不可用。功能（包括一些评论）如下。任何想法，建议非常感谢。

```
Private Function PlayInitMP3(ByVal path As String, ByVal dstPath As String) As Integer

    Dim asyncReader As DirectShowNET.IBaseFilter = Nothing
    Dim WaveParser As DirectShowNET.IBaseFilter = Nothing
    'Dim ACMWrapper As DirectShowNET.IBaseFilter = Nothing
    Dim MPEG3Wrapper As DirectShowNET.IBaseFilter = Nothing
    Dim WavDestWrapper As DirectShowNET.IBaseFilter = Nothing

    Dim fileSource As DirectShowNET.IFileSourceFilter = Nothing
    Dim fileDestination As DirectShowNET.IBaseFilter = Nothing

    Dim result As Integer = -1
    Dim srcFileInfo As System.IO.FileInfo = New FileInfo(path)

    Service1.nlog.LogError(0, "Starting Init", "", "")

    'Set to Null Renderer
    Try
        result = WaveParser.SetSyncSource(DBNull.Value)
        Marshal.ThrowExceptionForHR(result)
        Service1.nlog.LogError(0, "SetSyncSource-WaveParser", result.ToString, "")

        'result = ACMWrapper.SetSyncSource(DBNull.Value)
        'Marshal.ThrowExceptionForHR(result)
        'Service1.nlog.LogError(0, "SetSyncSource-ACMWrapper", result.ToString, "")

        result = MPEG3Wrapper.SetSyncSource(DBNull.Value)
        Marshal.ThrowExceptionForHR(result)
        Service1.nlog.LogError(0, "SetSyncSource-MPEG3Wrapper", result.ToString, "")

        result = WavDestWrapper.SetSyncSource(DBNull.Value)
        Marshal.ThrowExceptionForHR(result)
        Service1.nlog.LogError(0, "SetSyncSource-WavDestWrapper", result.ToString, "")

    Catch ex As Exception

    End Try

    Try

        If IsNothing(Me.graphBuilder) = False Then
            Marshal.ReleaseComObject(Me.mediaSeeking)
            Marshal.ReleaseComObject(Me.mediaControl)
            Marshal.ReleaseComObject(Me.graphBuilder)

            Me.mediaSeeking = Nothing
            Me.mediaControl = Nothing
            Me.graphBuilder = Nothing

        End If

        ' Create IGraphBuilder instance
        Me.graphBuilder = New DirectShowNET.FilterGraph()

        ' Create MediaControl

        ' File source filter addition
        asyncReader = New DirectShowNET.AsyncReader
        result = graphBuilder.AddFilter(asyncReader, System.IO.Path.GetFileName(path))
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "SourceFilter", result.ToString, "")

        ' Add Wave Parser
        WaveParser = New DirectShowNET.WaveParser
        result = Me.graphBuilder.AddFilter(WaveParser, "Wave Parser")
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "WaveParser", result.ToString, "")

        '' Add ACMWrapper
        'ACMWrapper = New DirectShowNET.ACMWrapper
        'result = Me.graphBuilder.AddFilter(ACMWrapper, "ACMWrapper Parser")
        'Marshal.ThrowExceptionForHR(result)

        'Service1.nlog.LogError(0, "ACMWrapper", result.ToString, "")

        ' Add MPEG3Wrapper
        MPEG3Wrapper = New DirectShowNET.MPEG3Layer
        result = Me.graphBuilder.AddFilter(MPEG3Wrapper, "MPEG3Layer Parser")
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "MPEG3Wrapper", result.ToString, "")

        ' Add WAVDest
        WavDestWrapper = New DirectShowNET.WaveDestination
        result = Me.graphBuilder.AddFilter(WavDestWrapper, "WaveDestination")
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "WaveDestination", result.ToString, "")

        ' FileWriter filter addition
        fileDestination = New DirectShowLib.FileWriter
        Dim fs As DirectShowLib.IFileSinkFilter = DirectCast(fileDestination, DirectShowLib.IFileSinkFilter)
        result = fs.SetFileName(dstPath, Nothing)
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "FileWriter", result.ToString, "")

        result = Me.graphBuilder.AddFilter(DirectCast(fileDestination, DirectShowNET.IBaseFilter), "Filewriter")
        Marshal.ThrowExceptionForHR(result)

        ' Set the Filename using the IFileSinkFilter interface

        ' The file is loaded. 
        fileSource = asyncReader
        result = fileSource.Load(path, Nothing)
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "SourceFileLoad", result.ToString, "")

        ' Wave Parser is connected with FileSourceFilter.
        Try
            result = ConnectFilters(Me.graphBuilder, asyncReader, WaveParser)
            Marshal.ThrowExceptionForHR(result)
        Catch ex As Exception
            Service1.nlog.LogError(0, "ConnectWaveParser", ex.Message, "")
        End Try

        Service1.nlog.LogError(0, "WaveParser Result", result.ToString, "")

        ' Wave Parser is connected with MPEG3.
        Try
            result = ConnectFilters(Me.graphBuilder, WaveParser, MPEG3Wrapper)
            Marshal.ThrowExceptionForHR(result)
        Catch ex As Exception
            Service1.nlog.LogError(0, "ConnectWaveParser", ex.Message, "")
        End Try

        Service1.nlog.LogError(0, "WaveParser Result", result.ToString, "")
        '' ACMParser is connected with WaveParser.
        'Try
        '    result = ConnectFilters(Me.graphBuilder, WaveParser, ACMWrapper)
        '    Marshal.ThrowExceptionForHR(result)
        'Catch ex As Exception
        '    Service1.nlog.LogError(0, "ConnectACMWrapper", ex.Message, "")
        'End Try

        'Service1.nlog.LogError(0, "ACMWrapper Result", result.ToString, "")

        ''COMPRESSION
        'Try
        '    'Configure the Compression Stream Variables
        '    Dim NewConfig As IAMStreamConfig
        '    Dim mp3Pin As IPin
        '    Dim ppEnum As IEnumPins
        '    Dim aPin(1) As IPin
        '    Dim dPin As PinDirection = PinDirection.Output
        '    Dim nPin As Integer

        '    Service1.nlog.LogError(0, "Beginning ACMWrapper Compression", "", "")
        '    ACMWrapper.EnumPins(ppEnum)
        '    While ppEnum.Next(1, aPin, nPin) = 0
        '        mp3Pin = aPin(0)
        '        mp3Pin.QueryDirection(dPin)
        '        If dPin = PinDirection.Output Then
        '            Exit While
        '        End If
        '    End While

        '    NewConfig = TryCast(mp3Pin, IAMStreamConfig)
        '    If NewConfig Is Nothing Then
        '        Service1.nlog.LogError(0, "NewConfig Is nothing", "", "")

        '    End If
        '    Service1.nlog.LogError(0, "After TryCast", "", "")

        '    Dim nCap As Integer
        '    Dim sCap As Integer
        '    Dim pmt As New DirectShowLib.AMMediaType
        '    Service1.nlog.LogError(0, "After pmt", "", "")

        '    NewConfig.GetNumberOfCapabilities(nCap, sCap)
        '    Dim i As Integer
        '    Dim sArray(sCap) As System.IntPtr
        '    Dim intPtr As IntPtr = Marshal.AllocCoTaskMem(sCap)

        '    Dim audioFormatACM As WaveFormatEx

        '    For i = 0 To nCap - 1
        '        NewConfig.GetStreamCaps(i, pmt, intPtr)

        '        audioFormatACM = New WaveFormatEx()

        '        Marshal.PtrToStructure(pmt.formatPtr, audioFormatACM)
        '        'Print Audio Format
        '        Service1.nlog.LogError(0, "Index:", i.ToString, "")
        '        Service1.nlog.LogError(0, "AudioFormat:BitsPerSample", audioFormatACM.wBitsPerSample.ToString, "")
        '        Service1.nlog.LogError(0, "AudioFormat:nSamplesPerSec", audioFormatACM.nSamplesPerSec.ToString, "")
        '        Service1.nlog.LogError(0, "AudioFormat:AvgBytesPerSec", audioFormatACM.nAvgBytesPerSec.ToString, "")

        '        ''Once find the proper format then save it and exit
        '        If audioFormatACM.nAvgBytesPerSec = 8000 AndAlso audioFormatACM.nSamplesPerSec = 8000 Then
        '            'audioFormatACM.nAvgBytesPerSec = 8000
        '            'audioFormatACM.wBitsPerSample = 8
        '            'audioFormatACM.nSamplesPerSec = 8000
        '            Marshal.StructureToPtr(audioFormatACM, pmt.formatPtr, True)
        '            Exit For
        '        End If
        '    Next

        '    'Use Selected format from enum to set

        '    If NewConfig.SetFormat(pmt) <> 0 Then
        '        Service1.nlog.LogError(0, "ACM Setformat Error", "", "")
        '    End If

        '    'See if Successfully Set

        '    audioFormatACM = New WaveFormatEx()

        '    Marshal.PtrToStructure(pmt.formatPtr, audioFormatACM)

        '    If NewConfig.GetFormat(pmt) <> 0 Then
        '        Service1.nlog.LogError(0, "ACM GetFormat Error", "", "")
        '    End If
        '    Service1.nlog.LogError(0, "ACM Updated AvgBytesPerSec", audioFormatACM.nAvgBytesPerSec.ToString, "")
        '    Service1.nlog.LogError(0, "ACM Updated SamplesPerSec", audioFormatACM.nSamplesPerSec.ToString, "")

        '    'Release Memory

        'Catch ex As Exception
        '    Service1.nlog.LogError(0, "Compression Error:", ex.Message, ex.Source)

        'End Try

        '' WaveParser is connected with MPEG3.
        'Try
        '    result = ConnectFilters(Me.graphBuilder, ACMWrapper, MPEG3Wrapper)
        '    Marshal.ThrowExceptionForHR(result)
        'Catch ex As Exception
        '    Service1.nlog.LogError(0, "Connect MPEG3Wrapper", ex.Message, "")
        'End Try

        'Service1.nlog.LogError(0, "MPEG3Wrapper Result", result.ToString, "")

        'COMPRESSION
        Try
            'Configure the Compression Stream Variables
            Dim NewConfig1 As IAMStreamConfig
            Dim mp3Pin1 As IPin
            Dim ppEnum1 As IEnumPins
            Dim aPin1(1) As IPin
            Dim dPin1 As PinDirection = PinDirection.Output
            Dim nPin1 As Integer

            MPEG3Wrapper.EnumPins(ppEnum1)
            While ppEnum1.Next(1, aPin1, nPin1) = 0
                mp3Pin1 = aPin1(0)
                mp3Pin1.QueryDirection(dPin1)
                If dPin1 = PinDirection.Output Then
                    Exit While
                End If
            End While

            NewConfig1 = TryCast(mp3Pin1, IAMStreamConfig)
            If NewConfig1 Is Nothing Then
                Service1.nlog.LogError(0, "NewConfig Is nothing", "", "")

            End If
            Service1.nlog.LogError(0, "After TryCast", "", "")

            Dim nCap1 As Integer
            Dim sCap1 As Integer
            Dim pmt1 As New DirectShowLib.AMMediaType
            Service1.nlog.LogError(0, "After pmt", "", "")

            NewConfig1.GetNumberOfCapabilities(nCap1, sCap1)
            Dim i As Integer
            Dim sArray1(sCap1) As System.IntPtr
            Dim intPtr1 As IntPtr = Marshal.AllocCoTaskMem(sCap1)

            Dim audioFormat As MPEGLAYER3WAVEFORMAT

            For i = 0 To nCap1 - 1
                NewConfig1.GetStreamCaps(i, pmt1, intPtr1)

                audioFormat = New MPEGLAYER3WAVEFORMAT()

                Marshal.PtrToStructure(pmt1.formatPtr, audioFormat)
                'Print Audio Format
                Service1.nlog.LogError(0, "Index:", i.ToString, "")
                Service1.nlog.LogError(0, "AudioFormat:BitsPerSample", audioFormat.wfx.wBitsPerSample.ToString, "")
                Service1.nlog.LogError(0, "AudioFormat:nSamplesPerSec", audioFormat.wfx.nSamplesPerSec.ToString, "")
                Service1.nlog.LogError(0, "AudioFormat:AvgBytesPerSec", audioFormat.wfx.nAvgBytesPerSec.ToString, "")

                'Once find the proper format then save it and exit
                'If audioFormat.wfx.nAvgBytesPerSec = 8000 AndAlso audioFormat.wfx.wBitsPerSample = 8 Then
                '    audioFormat.wfx.nAvgBytesPerSec = 8000
                '    'audioFormat.wfx.wBitsPerSample = 8
                '    'audioFormat.wfx.wFormatTag = 85
                '    'audioFormat.wfx.nSamplesPerSec = 1000
                '    Service1.nlog.LogError(0, "MP3 Selected Format AvgBytesPerSec", audioFormat.wfx.nSamplesPerSec.ToString, "")
                '    Marshal.StructureToPtr(audioFormat, pmt1.formatPtr, True)
                '    Exit For
                'End If
            Next

            'Use Selected format from enum to set

            'If NewConfig1.SetFormat(pmt1) <> 0 Then
            '    Service1.nlog.LogError(0, "Setformat Error:", NewConfig1.SetFormat(pmt1).ToString, "")
            'End If

            'See if Successfully Set

            audioFormat = New MPEGLAYER3WAVEFORMAT()
            pmt1 = New AMMediaType

            If NewConfig1.GetFormat(pmt1) <> 0 Then
                Service1.nlog.LogError(0, "GetFormat Error", "", "")
            End If

            Marshal.PtrToStructure(pmt1.formatPtr, audioFormat)
            Service1.nlog.LogError(0, "Updated AvgBytesPerSec", audioFormat.wfx.nAvgBytesPerSec.ToString, "")
            Service1.nlog.LogError(0, "Updated SamplesPerSec", audioFormat.wfx.nSamplesPerSec.ToString, "")
            Service1.nlog.LogError(0, "Updated FormatTag", audioFormat.wfx.wFormatTag.ToString, "")

        Catch ex As Exception
            Service1.nlog.LogError(0, "Compression Error:", ex.Message, ex.Source)

        End Try

        ' MPEG3 is connected with WavDest.
        Try
            result = ConnectFilters(Me.graphBuilder, MPEG3Wrapper, WavDestWrapper)
            Marshal.ThrowExceptionForHR(result)
        Catch ex As Exception
            Service1.nlog.LogError(0, "Connect WavDestWrapper", ex.Message, "")
        End Try

        Service1.nlog.LogError(0, "WaveDestWrapper Result", result.ToString, "")

        ' Connect to the File Writer 
        result = ConnectFilters(Me.graphBuilder, WavDestWrapper, fileDestination)
        Marshal.ThrowExceptionForHR(result)

        Service1.nlog.LogError(0, "ConnectFileWriter", result.ToString, "")

        'Actually Write The File

        ' The IMediaSeeking interface is acquired.
        Me.mediaSeeking = Me.graphBuilder
        Me.mediaSeeking.GetDuration(Me.duration)
        Me.duration /= DSS_MEDIA_TIME   ' MEDIA_TIME to Millisecond
        Service1.nlog.LogError(0, "Duration=", Me.duration.ToString, "")

    Catch ex As Exception

        Marshal.ReleaseComObject(Me.graphBuilder)
        Me.graphBuilder = Nothing
        Service1.nlog.LogError(0, "Exception MP3Convert", ex.Message, "")
    Finally

        asyncReader = Nothing
        WaveParser = Nothing
        'ACMWrapper = Nothing
        MPEG3Wrapper = Nothing
        WavDestWrapper = Nothing
        fileSource = Nothing
        fileDestination = Nothing

    End Try

        Service1.nlog.LogError(0, "Ending Init MP3", " Result:", result.ToString)

        Return result

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:28:08.513

经过大量研究，我无法像使用graphedit那样进行压缩。所以我决定完全改变项目并使用蹩脚的编码器进行转换。只需很少的代码即可完美运行。这是新代码：

```
Private Function PlayInitMP3(ByVal WaveFile As String, ByVal MP3File As String) As Integer
    Try
        'Convert WAV to MP3 using Lame
        Dim WaveFileInfo As New FileInfo(WaveFile)
        Dim MP3FileInfo As New FileInfo(MP3File)
        Dim strLameLine As String
        Dim LameExe As String = ConfigurationManager.AppSettings("LameExe") '"C:\scribe\lame\lame.exe -h"
        Dim sBlank As String = " "
        Dim waitTime As Integer = System.Convert.ToInt16(ConfigurationManager.AppSettings("LameWait")) '-1

        strLameLine = LameExe & sBlank & WaveFileInfo.FullName & sBlank & MP3FileInfo.FullName

        Shell(strLameLine, AppWinStyle.Hide, True, waitTime)

        'Debug
        Service1.nlog.LogError(0, WaveFileInfo.Name, strLameLine, "LAME MP3 Conversion Complete")

    Catch ex As Exception

    End Try

End Function 
```

# knockout.js - 淘汰赛中的绑定问题

> ID：15445039
> 
> 赞同：3
> 
> 时间：2013-03-16T02:52:41.943
> 
> 标签：knockout.js

我对knockoutjs 很陌生。我在不同的字段集下有一组按钮。我已将按钮绑定到单个 observable 以启用或禁用按钮。单击字段集下的按钮时，我只想禁用该字段集下的按钮集。我如何通过淘汰赛做到这一点。

我在[这里](http://jsfiddle.net/9G8sD/)为此创建了一个小提琴，试图解释我的问题

谢谢。

```
<div data-bind="foreach: items">
<fieldset>
    <ul data-bind="foreach: $data.item">
        <li class="list">
            <input type="button" data-bind="value: $data.title, enable: $root.isEnabled, click: $root.buttonClicked"
            />
        </li>
    </ul>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:14:36.883

看看这个[**工作小提琴**](http://jsfiddle.net/9G8sD/1/)。希望它能帮助您实现您想要实现的目标。

下面是 html 代码，注意这里我们使用`disable`绑定来禁用按钮。

```
 <ul data-bind="foreach: Buttons">
    <li class="list">
       <input type="button" data-bind="value: Title, 
                                       click: $root.SetSelectedButton, 
                                       disable: $root.SelectedButton() === $data"
        />
     </li>
   </ul> 
```

**编辑**

抱歉，我错过了您提到要禁用一组按钮的观点。这是另一个小提琴，它是前一个小提琴的下一个版本。在这个小提琴中，您可以启用或禁用一组按钮：

[**更新的工作小提琴**](http://jsfiddle.net/9G8sD/3/)

# javascript - 使用本地存储将更改保存到后台

> ID：15445040
> 
> 赞同：1
> 
> 时间：2013-03-16T02:53:03.140
> 
> 标签：javascript, html, local-storage

我正在尝试存储用户单击基于选择列表所做的最新样式选择。我曾尝试使用 localstorage 来做到这一点，但我很难让它工作。

任何帮助将不胜感激。谢谢！

这是我在看了几个例子后能想到的最好的方法——但它不起作用。

```
function initiate(){
    var styleButton = document.getElementById("selectStyleButton");
    if (styleButton){
        styleButton.addEventListener("click", saveStyle);
    }
    setStyle();
}

function saveStyle(){
    var select = document.getElementById("selectStyle");
    if (select){
        select[select.selectedIndex].value = localStorage.setItem("selectStyle"); //store value that was selected
    }
    setStyle(); //set the style that was selected based on the above
}

function setStyle(){
    var newstyle = localStorage.getItem("selectStyle"); //get value that was selected
    document.body.className = newstyle; //change body based on the class name of value that was selected
    }

window.addEventListener("load", initiate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:01:10.640

您在这里尝试做的是设置所选选项的值，而不是将其存储在本地存储中。试试吧

```
 localStorage.setItem("selectStyle",select[select.selectedIndex].value); 
```

[http://diveintohtml5.info/storage.html#methods](http://diveintohtml5.info/storage.html#methods)

# c++ - C++ 为模板类/结构设置自己的转换规则

> ID：15445041
> 
> 赞同：0
> 
> 时间：2013-03-16T02:53:12.200
> 
> 标签：c++, compiler-construction, casting

是否可以实现自己的强制转换规则并使编译器给出警告而不是错误？

我目前正在使用 SFML（如果你不知道也没关系），它有一个简单的 Vector2 结构，如下所示：

```
template <typename T>
struct Vector2 {
    Vector2<T>(T,T);
    T x,y;
} 
```

现在我经常使用它，并且想为此结构设置自定义转换规则，因为我无法修改源代码。我目前有一个需要 a 的函数`Vector2<int>`，但是我使用的函数返回 a`Vector2<unsigned int>`并且编译器似乎无法将一个转换为另一个，这有点奇怪。

我知道我可以使用演员表（和`static_cast`作品），但对于像这样的简单转换来说似乎有点过于复杂，而且有点愚蠢，因为这个我无法测试我的程序。所以我可能正在寻找的是可以设置此类强制转换规则的编译器命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:11:14.433

有两种方法可以做到这一点（两种方法都需要您修改 的定义`Vector2`）。您可以添加执行转换的非显式构造函数：

```
template <typename T>
struct Vector2 {
    template<typename U>
    Vector2(Vector2<U> const& u) : x(u.x), y(u.y){}
    Vector2(T x,T y) : x(x), y(y) {}
    T x,y;
}; 
```

或者您可以添加一个非显式类型转换运算符：

```
template <typename T>
struct Vector2 {
    template<typename U>
    operator Vector2<U>(){
        return Vector2<U>(x,y);
    }
    Vector2(T x,T y) : x(x), y(y) {}
    T x,y;
}; 
```

# ruby - 如何复制红宝石变量？

> ID：15445044
> 
> 赞同：8
> 
> 时间：2013-03-16T02:53:37.640
> 
> 标签：ruby, variables

也许我今天盯着屏幕太久了，但我认为应该非常基本的东西让我很难过。

我正在尝试制作一个变量的“副本”，这样我就可以在不修改原始变量的情况下对其进行操作。

```
# original var is set
foo = ["a","b","c"]

# i want a copy of the original var so i dont modify the original
bar = foo

# modify the copied var
bar.delete("b")

# output the values
puts bar # outputs: ["a","c"] - this is right
puts foo # outputs: ["a","c"] - why is this also getting modified? 
```

我不想`foo`被改变。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T02:56:24.310

`foo`并`bar`引用同一个对象。要`bar`引用不同的对象，您必须克隆`foo`：

```
bar = foo.clone 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T02:55:08.133

您可以使用 dup 方法：

```
bar = foo.dup 
```

这将返回 foo 的副本，因此您对 bar 所做的任何更改都不会影响 foo。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T12:09:47.037

在下面的代码中，您可以看到`foo`两者`bar`都具有相同的`object_id`. 因此更改为`foo`实例会导致相同的反射透过`bar`.

```
foo = ["a","b","c"]
#=> ["a", "b", "c"]

foo.object_id
#=> 16653048

bar = foo
#=> ["a", "b", "c"]

bar.object_id
#=> 16653048

bar.delete("b")
#=> "b"

puts bar
#a
#c
#=> nil

puts foo
#a
#c
#=> nil 
```

另请参阅此处，我冻结了`foo`实际上`bar`也已冻结。

```
foo.freeze
#=> ["a", "c"]
foo.frozen?
#=> true
bar.frozen?
#=> true 
```

因此正确的方法如下：

```
bar = foo.dup
#=> ["a", "b", "c"]

foo.object_id
#=> 16450548

bar.object_id
#=> 16765512

bar.delete("b")
#=> "b"

print bar
#["a", "c"]=> nil

print foo
#["a", "b", "c"]=> nil 
```

干杯！！

# url-routing - Rebol 3 方案中的用户/密码

> ID：15445046
> 
> 赞同：3
> 
> 时间：2013-03-16T02:53:49.553
> 
> 标签：url-routing, rebol, rebol3

在下面的端口规范中，我尝试解析 URL 以确定用户、通行证、主机和路径。用户/密码值是可选的，但如果不存在，我想为每个设置默认值。

但是，如果用户/通行证不存在，则`user`/`pass`会从`port/spec`对象中省略——这是为什么呢？

```
>> read sch://foo/bar.r
PORT/SPEC is an object of value: 
   title           string!   "Wee Scheme" 
   scheme          word!     sch 
   ref             url!      sch://foo/bar.r 
   path            string!   "/bar.r" 
   host            string!   "foo" 

>> read sch://foo:bar@foo/bar.r
PORT/SPEC is an object of value: 
   title           string!   "Wee Scheme" 
   scheme          word!     sch 
   ref             url!      sch://foo:bar@foo/bar.r 
   path            string!   "/bar.r" 
   pass            string!   "bar" 
   user            string!   "foo" 
   host            string!   "foo" 
```

另外，在起草这个问题时，我在方案中犯了一个错误，并将解析规则绑定到`port`，而不是——`port/spec`然后如何在`port/spec`对象中设置值？

规格：

```
sys/make-scheme [
    name: 'sch
    title: "Wee Scheme"
    actor: [
        read: func [port][
            parse port/spec/ref use [chars][
                chars: charset [#"a" - #"z" #"A" - #"Z" #"0" - #"9" "-_!+%.,"]

                bind [
                    "sch://" [
                        copy user some chars #":"
                        copy pass some chars #"@"
                        | (user: 'mince pass: 'tatties)
                    ]
                    copy host some chars
                    copy path [some [#"/" any chars]]
                    end
                ] port
            ]
            ? port/spec
        ]
    ]
] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T04:21:40.777

make-scheme [https://github.com/rebol/r3/blob/master/src/mezz/sys-ports.r#L254](https://github.com/rebol/r3/blob/master/src/mezz/sys-ports.r#L254)使用没有用户的默认规范 system/standard/port-spec-net经过。

```
>> system/standard/port-spec-net
== make object! [
    title: none
    scheme: none
    ref: none
    path: none
    host: none
    port-id: 80
] 
```

所以，如果你想要用户并且即使在规范中没有通过，你也必须像这样创建自己的规范[https://github.com/rebol/r3/blob/master/src/mezz/prot-http.r #L417](https://github.com/rebol/r3/blob/master/src/mezz/prot-http.r#L417)并将它们放在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T04:38:21.580

标准端口规范中没有`user`or`pass`字段，因为许多端口方案甚至没有用户或密码作为概念。如果您*需要*一个用户并且每次都通过，请在构建端口时使用您自己的端口规范原型，正如 Graham 建议的那样。

但是，您也可以考虑`select`在您的方案中使用端口规范。R3 中的`select`函数也适用于对象，并且仅`none`在您选择的单词当前未在对象中定义时返回。这是我们添加的一个有用的快捷方式，您可以在整个 R3 中使用它。

不要觉得你必须在你的规范对象原型中包含每个可选的词。您在规范原型中包含的每个单词都会添加到每个生成的规范中，无论它是否适用。如果您有缺失单词的默认值，您不妨将这些默认值添加到原型规范中，但要小心默认系列值，因为它们可能会被修改。但是对于真正可选的单词，例如`user`and `pass`，考虑将它们排除在原型之外以节省内存开销并直接使用`select`。

# html - 使用 html 子字符串加速 CsQuery 选择器

> ID：15445049
> 
> 赞同：2
> 
> 时间：2013-03-16T02:54:08.693
> 
> 标签：html, html-parsing, web-scraping, html-parser, csquery

我想解析一些复杂/繁重的 HTML 页面。我最近阅读了 CsQuery 并检查了[CsQuery Vs Html Agility Pack 和 Fizzler](http://blog.outsharked.com/2012/06/csquery-performance-vs-fizzler.html)的性能比较。根据这些测试，由于创建了索引，CsQuery 在创建 DOM 时变得更慢。

假设我想选择一个沉重的 html 页面的某个元素（没有 id），并且我知道它的祖先的 ID，我将使用它作为上下文元素。如果我将这个沉重的 html 加载到 DOM 中，它会很慢，因此我的选择会很慢。但是，如果我能以某种方式快速预处理 html 并获取包含上下文元素（我知道的 ID）的子字符串并将其加载到 DOM 中，它会更快。在那种情况下，我会摆脱许多不需要的 HTML，不会为其创建索引器。因此，我的选择会更快。

我使用 CsQuery 是因为我想要类似 JQuery 的东西。

我的问题是：

给定一个 HTML 文档字符串：是否有一种快速方法（例如：线性）来获取给定其 id 的 HTML 元素的 HTML 子字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:01:31.687

首先让我说，我认为您使用 CsQuery 做出了正确的选择，我不久前从 HAP 切换到它，我对切换感到非常满意。最新的 CsQuery 预发布版可让您完全关闭索引，或仅对代码进行部分索引。

来自问题跟踪器。

> 在当前的预发布代码中，您可以使用另一种索引策略，它可以大大加快 DOM 的构建速度，但代价是复杂的查询。（实际上有两种新策略，如果你真的想的话，你可以完全关闭索引 :) 这对于你正在处理的场景可能会更好。

如果您愿意从其[git-hub](https://github.com/jamietre/CsQuery)存储库下载代码并编译它，使用预发布版您将能够做到这一点。

DomIndexProviders类包含 3 个选项，[它们](https://github.com/jamietre/CsQuery/blob/master/source/CsQuery/Engine/DomIndexProviders.cs)`RangedDomIndexProvider`索引了很多选择器，并且非常聪明`SimpleDomIndexProvider`，它允许基本索引，`NoDomIndexProvider`而根本不做索引。[`SimpleDomIndexProvider`](https://github.com/jamietre/CsQuery/blob/master/source/CsQuery/Engine/DomIndexSimple.cs)非常简单，可能适用于您的情况，您也可以考虑[no indexing](https://github.com/jamietre/CsQuery/blob/master/source/CsQuery/Engine/DomIndexNone.cs)。

# java - 当主线程退出线程连接方法时

> ID：15445054
> 
> 赞同：1
> 
> 时间：2013-03-16T02:55:11.443
> 
> 标签：java, multithreading

我正在阅读java线程源代码，有一个小问题我不确定。有两个线程，主线程和工作线程，这是一个长时间消耗的线程，我希望主线程等到工作线程死亡，所以我在工作线程上调用 join 方法，在线程源代码中，主线程在工作线程时等待活：

```
 while (isAlive()) {
            wait(0);
        } 
```

当工作线程完成工作并死亡时，现在主线程会发生什么？它是否通过自动调用工作线程上的 notifyAll 方法由线程调度程序通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:12:23.790

`wait()`正如您在源代码中看到的那样，由于加入线程已调用，因此目标线程必须调用`notify()`或`notifyAll`唤醒它。

如果您在 Thread 源代码中的任何地方都看不到它，那么它可能发生在不同的类、本机代码或非公共 JVM 供应商实现代码中。

但这是一个实现细节：您可以确定它`join`会在目标线程完成时返回，如文档中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:06:42.537

你说的主线程是什么意思？您是在实现 Runnable 还是在类中创建多个线程？如果您提供更多代码，可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:08:53.857

`workerThread.join()`从主线程中调用将导致主线程暂停执行直到`workerThread`终止。然后，主线程在`join()`调用之后继续执行下一条语句。

这在 Java 教程的[SimpleThreads](http://docs.oracle.com/javase/tutorial/essential/concurrency/simple.html)示例中进行了演示。

# javascript - 更改“for in”语句

> ID：15445061
> 
> 赞同：-9
> 
> 时间：2013-03-16T02:56:38.933
> 
> 标签：javascript

我可以更改“for in”语句以包含以下条件吗？

```
if (object.hasOwnProperty(variable) {
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T02:58:35.820

把它放在循环中：

```
for (var i in o) {
    if (!o.hasOwnProperty(i)) continue;

    ...
} 
```

MDN 有[一个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty#Example%3a_Itarate_over_properties_not_considering_inherited_properties)类似的例子。

# java - 与 LibGdx 的先发制人冲突

> ID：15445066
> 
> 赞同：0
> 
> 时间：2013-03-16T02:57:09.687
> 
> 标签：java, collision-detection, libgdx, collision, quadtree

我当前的实体引擎使用四叉树循环遍历所有实体（一个数组），然后使用每个实体都有的 libgdx Rectangle 实例检查冲突。

[我的 QuadTree](https://gist.github.com/MATheCoder/5174704)（它很长，所以我认为 id 只是链接到它）

在 Entity 类中，我有一个 placeFree 方法：

```
public boolean placeFree(float px, float py){

    //the pre-emptive collision Rectangle
    preCollBox.set(px,py,hitBox.getWidth(),hitBox.getHeight());

    return screen.placeFree(preCollBox);

} 
```

screen.placeFree 方法：

```
Qtree = new Quadtree(0 , new Rectangle(0,0,Gdx.graphics.getWidth(),Gdx.graphics.getHeight()));

public boolean placeFree(Rectangle rect){

    boolean result = false;

    Qtree.clear();

    for (int i = 0; i < collideEnt.size; i++) {
          Qtree.insert(collideEnt.get(i));
    }

    for(int i  = 0; i < collideEnt.size;i++){
        returnEntity.clear();
        Qtree.retrieve(returnEntity, rect);
        for (int x = 0; x < returnEntity.size; x++) {
            Entity ec = returnEntity.get(x);
                result = !(ec.hitBox.overlaps(rect));
         }
    }

    return result;

} 
```

要检查先发制人的碰撞，我这样做：

```
if(Gdx.input.isKeyPressed(Keys.D) && placeFree(x+10,y)){
        x+=10;
    } 
```

基本上 placeFree() 实际上将当前命中框的副本放置在一个新位置，并检查那里是否发生任何碰撞。我想要做的是在向左移动之前检查我的玩家左侧的区域是否没有碰撞。

我当前的问题是，如果我添加 3 个“Solid”（实体的子类）实例，它仅适用于添加的第一个实体。为什么会发生这种情况，我该如何解决？

这就是我的意思（红色框是正常的hitbox，绿色是先发制人的hitbox）。

在这张图片中，您可以看到先发制人的 hitBox 刚刚通过： ![图片](../Images/8792ecf642e85c9e9d2dff39e1516de5.png)

但是在这个中它不能，因为我首先添加了那个块（顺便说一句，我使用 placeFree(x,y-100) 更清楚地显示绿色框）：

![图2](../Images/bc3fd61430aa631459b721202214b379.png)

# dictionary - dict.keys 不打印列表但打印列表视图的问题

> ID：15445067
> 
> 赞同：1
> 
> 时间：2013-03-16T02:57:25.143
> 
> 标签：dictionary, python-3.x, key

我一直试图通过使用 dict.keys 从我的 dict 中获取一个键列表，但它一直给我：

`def reverse(PB = {'l': 3, 'y':1, 'u':2}): print(PB.keys())`

印刷：

`dict_keys(['u', 'l', 'y'])`

在我拥有超过 2.7 的 python 版本之前，我从来没有遇到过这个问题......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T03:03:48.760

Python 3 返回[视图对象](http://docs.python.org/3/library/stdtypes.html#dict-views)：

> 和返回的对象`dict.keys()`是视图*对象*。它们提供字典条目的动态视图，这意味着当字典更改时，视图会反映这些更改。`dict.values()``dict.items()`

 *您可以将它们转换为列表（Python 2 行为），方法是将它们传递到`list()`：

```
>>> d = {'l': 3, 'y':1, 'u':2}
>>> d.keys()
dict_keys(['y', 'l', 'u'])
>>> list(d.keys())
['y', 'l', 'u'] 
```

[另外，在传递可变对象作为默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)时要小心：

```
>>> def reverse(PB={'l': 3, 'y':1, 'u':2}):
...     PB['l'] += 4
...     
...     print(PB)
... 
>>> reverse()
{'y': 1, 'l': 7, 'u': 2}
>>> reverse()
{'y': 1, 'l': 11, 'u': 2}
>>> reverse()
{'y': 1, 'l': 15, 'u': 2} 
```

我默认`None`改为：

```
def reverse(PB=None):
    if PB is None:
        PB = {'l': 3, 'y':1, 'u':2} 
```*

# html - 以干净的方式重叠元素？

> ID：15445068
> 
> 赞同：2
> 
> 时间：2013-03-16T02:57:37.013
> 
> 标签：html, css, twitter-bootstrap

我在 Bootstrap RowFluid 和 Span12 中放置了多个文本框。

左浮动，基于宽度，每行显示 4 个框。

我想做的是在每个框的右上角放置一个 X，以便有人可以单击 X 并删除该框。

我似乎无法弄清楚如何以干净的方式重叠。有人可以建议一种方法，我会破解它吗？

html

```
<div class="box-list">
    <div class="row-fluid">
        <div class="span12">
            <a href="/box/1">First box</a>
            <a href="/box/2">Second box</a>
            <a href="/box/3">Third box</a>
            <a href="/box/4">Fourth box</a>
            <a href="/box/5">Fifth box</a>
            ...etc
        </div>
    </div>
</div> 
```

CSS

```
 .box-list a{
     width:22%;
     height:100px;
     font-size:20px;
     line-height: 50px;
     padding:25px 0 25px 0;
     text-align: center;
     border: 1px dashed #333333;
     float:left;
     background-color:#EEE;
     margin: 5px 1% 5px 1%;
     color:#333;
     display:block;
 } 
```

我已经尝试了很多东西，但根本无法让它看起来正确。我尝试将链接放在容器中并将容器的 CSS 设置为上述 CSS。然后我添加了新的“删除”链接，其中文本只是一个 X 并放置`position:absolute`，但它会导致非常奇怪的结果。我尝试创建 2 个框，一个带有文本，一个没有，但是这些框似乎无法 100% 相互重叠。我不知所措，所以任何建议都会有所帮助

包括我尝试的一些更改的小提琴：http: [//jsfiddle.net/sX2BC/](http://jsfiddle.net/sX2BC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:38:00.477

首先，容器和盒子上有许多影响重叠的边距/填充。删除它们中的大部分将使盒子与容器很好地重叠。接下来，我删除了`float:left`盒子上的 ，因为它不是必需的，并将从常规流程中删除盒子。最后，为了使 a 标签显示为一个框，我将其显示更改为`display:inline-block`. 它应该接近你想要的：

更新小提琴：http: [//jsfiddle.net/sX2BC/3/](http://jsfiddle.net/sX2BC/3/)

# java - 无法安装 Netbeans 7.1.2

> ID：15445072
> 
> 赞同：0
> 
> 时间：2013-03-16T02:58:08.070
> 
> 标签：java, netbeans, classpath

当我打开 netbeans 安装程序时，它显示一个消息框

运行 java 进程异常时发生错误
：从线程“main”中的 UncaughtExceptionHandler 引发的 java.lang.NoClassDefFoundError。

我正在使用 jdk1.7.0
CLASSPATH: C:\Program Files\Java\jdk1.7.0\bin;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T11:14:08.963

对于 netbeans 7.4，PHP 版本，在 debian 上，它需要 java 7 jdk。

于是我安装了openjdk-7-jdk，还有openjdk-7-jre、openjdk-7-jre-headleass、openjdk-7-jre-lib；

并删除了他们对应的 6 版本（openjdk-6-jdk、openjdk-6-jre、openjdk-6-jre-headleass、openjdk-7-jre-lib）。

然后我偶然发现：

```
Exception: java.lang.NoClassDefFoundError thrown from the UncaughtExceptionHandler in thread "main" 
```

我删除了无用的包

```
apt-get autoremove 
```

最后，我使用 --silent 选项成功执行了安装程序。

```
./netbeans-7.4-php-linux.sh --silent 
```

它奏效了。

我希望它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:11:38.107

当您拥有多个版本的 IDE 时，就会出现这种问题。如果您拥有或卸载当前版本，我建议您删除旧版本，然后尝试重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:03:00.707

[每天每个班级的 java.lang.NoClassDefFoundError](https://stackoverflow.com/questions/6284976/java-lang-noclassdeffounderror-from-every-class-every-day)

这个线程有什么帮助吗？也许您以前的安装没有正确清除？

# android - 模拟器上的Android位置

> ID：15445074
> 
> 赞同：0
> 
> 时间：2013-03-16T02:58:41.010
> 
> 标签：android, android-emulator, gps, location

我正在尝试此代码用于 android 位置，但是当我运行模拟器时，它说“不幸的是位置已停止”......有什么想法吗？这是 MainAcivity 的代码（我按照本教程[http://www.vogella.com/articles/AndroidLocationAPI/article.html#locationapi_gpsenable](http://www.vogella.com/articles/AndroidLocationAPI/article.html#locationapi_gpsenable)）

```
 public class MainActivity extends Activity implements LocationListener {
      private TextView latituteField;
      private TextView longitudeField;
      private LocationManager locationManager;
      private String provider;

/** Called when the activity is first created. */

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);

// Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
// Define the criteria how to select the locatioin provider -> use
// default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

// Initialize the location fields
        if (location != null) {
          System.out.println("Provider " + provider + " has been selected.");
          onLocationChanged(location);
        } else {
          latituteField.setText("Location not available");
          longitudeField.setText("Location not available");
        }
      }

/* Request updates at startup */
      @Override
      protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
      }

/* Remove the locationlistener updates when Activity is paused */
      @Override
      protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
      }

      @Override
      public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
      }

      @Override
      public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

      }

      @Override
      public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

      }

      @Override
      public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:54:03.730

您必须手动输入模拟器的位置。有几种选择

**选项 1：使用 DDMS**

*   转到您的 android/tools 目录，然后启动 DDMS 工具

*   选择模拟器控制选项卡

*   用经度和纬度值填充位置控制字段

*   按发送按钮

**选项 2：使用远程登录**

*   打开命令外壳
*   使用以下命令连接到模拟器：telnet localhost
*   进入固定位置执行命令：

> geo fix <经度> <纬度> [<高度>]

**选项 3：使用 3rd 方应用程序**

您可以尝试[使用 android-gps-emulator](https://code.google.com/p/android-gps-emulator/)应用程序来设置位置。可能还有其他类似的应用

**资源**

*   [这个问题](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)
*   [这个链接](http://www.helloandroid.com/tutorials/how-set-location-emulator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:45:22.353

试试这个代码我可能对你有帮助..

[http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)

还设置地理位置 您可以使用 Eclipse 的“DDMS”透视图将您的地理位置发送到模拟器或连接的设备。要打开此 Perspective，请选择 Window → Open Perspective → Other... → DDMS。

在模拟器控制部分，您可以输入地理坐标并按发送按钮。

![在此处输入图像描述](../Images/c1525cacf6dbef0014c6dc026f3675ea.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-02T00:07:19.910

您可以使用 Genymotion 模拟器，在虚拟设备上设置位置非常容易。

# python - Scrapy 爬虫没有看到任何被抓取的项目。

> ID：15445087
> 
> 赞同：1
> 
> 时间：2013-03-16T03:01:18.107
> 
> 标签：python, sqlalchemy, scrapy, web-crawler

我有兴趣从我的数据库中提取一些 url，以便在下次重新抓取时首先抓取。

我为此编写了一个自定义中间件，但由于 JOBDIR 的一个错误，我无法使用自定义中间件实现我想要的（查看[这里](https://groups.google.com/forum/?fromgroups=#!topic/scrapy-users/UDJdXRwrQI4)的线程）

所以我决定编写自己的自定义调度程序，因为这是 scrapy 获取所有请求的地方。

这是我的自定义队列：

```
class GhostQ(object):
  """
  A Queue of Requests for ghost objects from our last crawl.
  -Can only be popped.
  -Basically a generator with length property
  -Does not include current ghost objects in the scheduler

  A "ghost" object is defined to be an object persisted into our db from crawling that has
  not yet been visited. They exist because we need to persist relationships and the only way
  we can do so is by persisting a blank object first.

  Entities that we have to check:
    -Looks, check if image_url is null
    -Clothing, check if name, brand, type is null
    -Model, check if name is null
  """
  def __init__(self, glooks_cursor, gclothing_cursor, gmodels_cursor, priority=5, yield_per=100):
    self._length = None
    self._generator = None

    self.PRIORITY = priority
    self.YIELD_PER = yield_per

    self.glooks_cursor = glooks_cursor
    self.gclothing_cursor = gclothing_cursor
    self.gmodels_cursor = gmodels_cursor

  def _init_length(self):
    total = self.glooks_cursor.count() + self.gmodels_cursor.count() \
        + self.gclothing_cursor.count()
    self._length = total
    log.msg("GhostQ has %d objects" % self._length)

  def __len__(self):
    if self._length is None:
      self._init_length()
    return self._length

  def _init_generator(self):
    """The use of all here allows us to retrieve everything at once.

    TODO (Somehow this is not breaking??!?)
      -yield_per should be breaking because we are also committing
      -Perhaps we need our our session here?
       i.e new_session = scoped_session(sessionmaker(autocommit=False, autoflush=True, bind=engine))
    """
    for look in self.glooks_cursor.yield_per(self.YIELD_PER):
      yield Request(look.url, priority=self.PRIORITY)

    for clothing in self.gclothing_cursor.yield_per(self.YIELD_PER):
      yield Request(clothing.look.url, priority=self.PRIORITY)

    for model in self.gmodels_cursor.yield_per(self.YIELD_PER):
      yield Request(model.url, priority=self.PRIORITY)

  def pop(self):
    if self._generator is None:
      self._generator = self._init_generator()
    try:
      request = self._generator.next()
      if self._length is None:
        self._init_length()
      self._length -= 1
      return request
    except StopIteration:
      return None 
```

这是我的自定义调度程序：

```
class GiordanoScheduler(Scheduler):
  """Custom scheduler with an additional queue for ghost objects.
  Queries the database for "ghosts" objects and schedules Scrapy to crawl these first.
  """
  def open(self, spider):
    self.ghostq = GhostQ(
        session.query(Look).filter(Look.image_url == None),
        session.query(Clothing).filter(and_(
            Clothing.name == None, Clothing.brand == None, Clothing.type == None)),
        session.query(Model).filter(Model.name == None))
    return Scheduler.open(self, spider)

  def __len__(self):
    if self.dqs:
      return len(self.ghostq) + len(self.dqs) + len(self.mqs)
    else:
      return len(self.ghostq) + len(self.mqs)

  def next_request(self):
    request = self.ghostq.pop()
    if request:
      log.msg("Popping from ghostq: " + request.url, level=log.DEBUG)
      self.stats.inc_value('scheduler/dequeued/ghost', spider=self.spider)
    else:
      request = self.mqs.pop()
      if request:
          log.msg("Popping from mqs: " + request.url, level=log.DEBUG)
          self.stats.inc_value('scheduler/dequeued/memory', spider=self.spider)
      else:
          request = self._dqpop()
          log.msg("Popping from dq: " + request.url, level=log.DEBUG)
          if request:
              self.stats.inc_value('scheduler/dequeued/disk', spider=self.spider)
    if request:
        self.stats.inc_value('scheduler/dequeued', spider=self.spider)
    return request 
```

当我运行这个调度程序时，我没有看到任何被刮掉的东西......

这是[日志](https://gist.github.com/vicngtor/b536f6d10e53ea3b4212)

但是，如果我禁用这条线：`request = self.ghostq.pop()`，我会看到东西再次被刮掉。

这是一个非常奇怪的错误。我似乎无法弄清楚为什么。我最初怀疑 dupefilter 是罪魁祸首，但我意识到 dupefilter 只会过滤请求而不是对象。

如果我禁用该行，这就是它的样子：[log](https://gist.github.com/vicngtor/0ecfb902389fcc06ec93)

# c++ - 如何创建将引发堆栈溢出异常的无限递归？

> ID：15445093
> 
> 赞同：2
> 
> 时间：2013-03-16T03:02:38.367
> 
> 标签：c++, exception, stack, stack-overflow, callstack

我正在尝试使用以下程序创建堆栈溢出运行时异常：

```
void f(int a) {
  cout << a << ", ";
  f(++a);
}

int main () {
  f(0);
  return 0;
} 
```

当我运行这个程序时，我的计算机运行大约 261824`call stack`然后`command terminated`发生运行时错误。现在我想知道：

1.  这是堆栈溢出的一个很好的例子吗？如果是，为什么`command terminated`会发生错误？
2.  我怎么能`try`，`catch`堆栈溢出异常？
3.  我有很多空闲内存；为什么我的堆栈没有使用我所有的内存？
4.  我怎样才能确定堆栈的大小对应于我的`call stack`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T03:23:47.870

这些都是实现细节。从技术上讲，C++ 实现不需要堆栈，它只需要自动存储。至少有一个 C 实现使用堆中的链表（嗯，有点——据我了解，这是一个奇怪的系统）来进行自动存储。

但是，通常，堆栈是内存地址空间的一个连续区域，进程保留该区域仅用于存储自动变量和调用帧。它必须在发生其他任何事情之前保留，因为它必须是连续的，并且如果为其他目的分配了一些内存块，则堆栈将无法增长。

如果您想将整个内存地址空间用于堆栈，那么堆（又名空闲存储）将没有空间。所以堆栈不会使用所有内存......

1 MB 是设置堆栈的传统值：很少有程序真的需要更多，甚至适度避免将大量数据放在堆栈上。在多线程环境中，每个线程最终都有自己的堆栈：因此保持较小的堆栈也会使线程更便宜。现代系统可能会将其设置得更大，因为它们为每个进程提供了大量的地址空间。

在 64 位系统上，为堆栈使用 50 位地址空间相对容易（这比您的计算机当前可以处理的要多：谷歌数据中心处理 PB）。但是这样做的缺点是，在整个系统的虚拟内存被那个进程抢占*之后，*您只会在调试时破坏堆栈。这样做的好处并不是那么大。

堆栈的大小是实现定义的，而不是由 C++ 标准公开的。有关如何确定它的大小以及如何更改其大小的信息，请参阅您的编译器文档。

C++ 标准并没有规定当你破坏堆栈时会发生什么。一般来说，当堆栈被炸毁时，您可能会遇到严重的麻烦：编写代码使其不会发生，而不是在它发生后才抓住它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T03:19:36.983

1.  是的，这是堆栈溢出。您收到的错误消息取决于平台——因此，如果您在不同类型的机器上运行它，您可能会看到“堆栈溢出”。
2.  没有像[这里看到](https://stackoverflow.com/questions/1578878/catching-stack-overflow-exceptions-in-recursive-c-functions)的那样好的便携方式。这是因为您没有抛出异常，而是让操作系统以它想要的任何方式杀死您的进程。
3.  您的堆栈限制远小于您的可用内存（堆栈通常为 8-20MB）。在特定的操作系统设置中，如果您确实需要更大的值，您可以重新配置此值（Solaris 上的 ulimit -s 100000 将其设置为 100MB）。但通常达到堆栈限制意味着你做错了什么。一个小的堆栈限制有助于操作系统使用虚拟内存分配方案，并且是堆栈溢出的早期错误捕获器（想象一个较慢的代码版本在一两个小时内消耗所有可用内存......对于其他运行的东西来说不是那么有趣）。
4.  这可能取决于操作系统或编译器，并且不是 C++ 固有的东西。试试这个关于确定堆栈大小的各种方法的[SO 链接。](https://stackoverflow.com/questions/1756285/stack-size-estimation)

# php - PHP用多个变量多次初始化一个类

> ID：15445095
> 
> 赞同：1
> 
> 时间：2013-03-16T03:03:32.943
> 
> 标签：php, mysql, oop, class

我正在尝试运行一个可以联系多个数据库的数据库类。我的设置是这样的：

```
$auth = new Auth($db['host'], $db['user'], $db['name']['api'], $db['pass']['api']);
$apiuser = new APIUser($db['host'], $db['user'], $db['name']['users'], $db['pass']['users']); 
```

所有这些 $db 数组变量都可以正常工作，但不能正常工作的是类。在每个类的 __construct 函数中，我有这个：

```
function __construct($dbh, $dbu, $dbn, $dbp) {

        $this->db = new DB($dbh, $dbu, $dbn, $dbp);
    } 
```

但是，当我尝试运行 $this->db->query("my query here"); （它包含一个带有输入变量的简单返回 mysql_query），它返回一个布尔值而不是资源 ID...这是因为该类正在恢复到用户数据库而不是 api 数据库，因为 $apiuser 在 $apiauth 之后......

如果这有任何意义，我真的可以在这方面提供一些帮助！谢谢！

编辑：部分 DB 类给出错误：

```
function __construct($host, $user, $name, $pass) {
        $this->error = new Error();
        if(!mysql_connect($host, $user, $pass)) {
            $this->error->db_connect_error($host, $user, $pass);
        }
        if(!mysql_select_db($name)) {
            $this->error->db_select_error($name);
        }
    }
    function query($input) {
        return mysql_query($input);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:19:29.690

> 但是，当我尝试运行 $this->db->query("my query here"); （它包含一个带有输入变量的简单返回 mysql_query），它返回一个布尔值而不是资源 ID...这是因为该类正在恢复到用户数据库而不是 api 数据库，因为 $apiuser 在 $apiauth 之后......

如果您使用多个数据库，那么您需要指定您使用的链接：

```
class DB {
   private $dbRsrc;

   function __construct($host, $user, $name, $pass) {
        $this->error = new Error();
        $this->dbRsrc = mysql_connect($host, $user, $pass);
        if(!$this->dbRsrc) {
            $this->error->db_connect_error($host, $user, $pass);
        }
        if(!mysql_select_db($name)) {
            $this->error->db_select_error($name);
        }
    }
    function query($input) {
        return mysql_query($input, $this->dbRsrc);
    }
} 
```

也就是说，您应该`DB`像@WaleedKahn 建议的那样将实例真正注入其他类。此外，您不应该使用这些`mysql_*`功能。使用[`Mysqli`](http://www.php.net/manual/en/book.mysqli.php)或[`PDO`](http://www.php.net/manual/en/book.pdo.php)代替。两者都已经有了面向对象的接口。

# sql - 在嵌套查询中创建和使用临时表

> ID：15445102
> 
> 赞同：1
> 
> 时间：2013-03-16T03:04:56.407
> 
> 标签：sql, oracle

我有这个查询，其中运算符的两个操作数`MINUS`被计算了两次。如何重写查询以便它们只创建一次？

（目的是检查两组是否相等）

```
SELECT DISTINCT t1.id
FROM t1
WHERE NOT EXISTS (SELECT t2.did FROM t1 AS t2
              WHERE t2.id = t1.id
              MINUS
              SELECT t3.did FROM t3
              WHERE t3.price > 500000)
AND NOT EXISTS (SELECT t3.did FROM t3
            WHERE t3.price > 500000
            MINUS
            SELECT t2.did FROM t1 AS t2
            WHERE t2.id = t1.id); 
```

为了澄清事情，以下两个 [子] 查询在查询中重复了两次：

```
SELECT t2.did FROM t1 AS t2
WHERE t2.id = t1.id 
```

和

```
SELECT t3.did FROM t3
WHERE t3.price > 500000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:07:33.930

```
with
   ALL_DID as (
      select did from t3
      where price > 500000
   ),
   PAIRS as (
      select
         id, t3.did
      from t1
         left join ALL_DID t3
         on t1.did = t3.did
   )
select id from PAIRS
   group by id
   having count(did) = (
      select count(0) from ALL_DID
   )
minus
select id from PAIRS
   where did is null 
```

[小提琴](http://sqlfiddle.com/#!4/2e2ae/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:50:45.643

如果您只想能够多次重用相同的查询，请考虑使用公用表表达式。或者您可以考虑创建视图。您可以通过这些方式快速“重用”相同的查询。

但是，我仍然不完全了解您想要的结果是什么。您是否想根据 did/eid 字段了解 t1 中的数据是否与 t3 中的数据相同？如果是这种情况，您似乎可以使用 LEFT JOIN 更轻松地解决这个问题。像这样的东西：

```
SELECT DISTINCT t1.id
FROM t1 
  LEFT JOIN t3 ON t1.did = t3.did AND t3.price > 500000
WHERE t3.id IS NULL 
```

这将告诉您 t1 中是否有任何不在 t3 中的记录（具有相同的做和价格 > 500000）。

*编辑——要查找所有销售价格大于 500000 的产品的所有人的 id，那么这应该有效：*

```
SELECT t1.id, COUNT(DISTINCT t1.did) productcnt
FROM t1
  JOIN t3 ON t1.did = t3.did
WHERE t3.Price > 500000
GROUP BY t1.id
HAVING COUNT(DISTINCT t1.did) = (
  SELECT COUNT(DISTINCT did) cnt
  FROM t3
  WHERE Price > 500000 ) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/8bcd2/3)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T04:14:42.477

这不是正常的内部连接查询吗？

```
SELECT t2.* 
from t1
INNER JOIN t3 as t3 on t1.did = t3.tid
INNER JOIN t1 as t2 on t2.did = t1.id
WHERE t3.price > 50000 
```

# java - 使用递归更改变量

> ID：15445103
> 
> 赞同：0
> 
> 时间：2013-03-16T03:05:08.670
> 
> 标签：java, variables, recursion

对于二叉搜索树，我只能访问根节点，而我正在尝试编写一个递归方法来挖掘它的左节点。

例如，

> root.left();

变成

> root.left().left();

接着，

> root.left().left();

你知道这是怎么回事..有没有一种递归的方式来改变/添加到变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:12:25.370

像这样的东西？

```
Node node = root;
while (someCondition) {
    node = node.left();
    // do something with the node
} 
```

# javascript - 页面滚动停止元素 我在滚动的页面上有一个标准的 <select multiple="">...</select> 选项列表。当滚动文档时，尤其是使用触控板时，一旦指针位于 <select>元素上，页面就会停止。我怀疑由于 multiple 属性，该元素控制了指针，因此可以滚动它的选项列表。但是，我有目的地显示所有可用选项，所以我想以某种方式阻止滚动覆盖行为。我注意到 -webkit-appearance: listbox; 用于多选， ID：15445107 赞同：4 时间：2013-03-16T03:05:47.233 标签：javascript, html, css, webkit, scroll 回答 #1 赞同：2 时间：2013-03-16T04:28:44.910 如何使用“大小”属性？ <select multiple size="8"> 检查这个小提琴http://jsfiddle.net/tv8ZT/2/ 回答 #2 赞同：1 时间：2013-03-17T17:43:13.297 我能够覆盖元素的默认鼠标滚轮行为select[multiple]以适当地滚动溢出的元素，而无需修改 DOM 结构。 加载 DOM 后： var selects = document.getElementsByTagName( 'select' ); for( var i = 0, len = selects.length; i < len; ++i ) { if( selects[ i ].hasAttribute( 'multiple' ) ) { selects[ i ].onmousewheel = function( event ) { event.preventDefault( ); this.form.scrollTop -= event.wheelDelta; }; } } 完全浏览器兼容性可能还有一些额外的要求——比如使用event.detail而不是——event.wheelDelta但就我的目的而言，这就足够了。</select>

# java - 随机不断吐出相同的数字

> ID：15445115
> 
> 赞同：-1
> 
> 时间：2013-03-16T03:06:43.097
> 
> 标签：java

我目前正在为我正在开发的一个小游戏制作一个简单的 2D 世界生成器。问题是我从随机得到的值都是一样的。另外，我不希望生成器创建两个方块高的方块，因为那样玩家就无法通过。这是我的代码：

```
private void generateWorld() {
    Random r = new Random(Sys.getTime() / System.currentTimeMillis() * System.nanoTime());
    int bh = r. nextInt(1) + 1;
    for(int x = 0; x < width; x+=32) {

        theWorld.addBlock(new Block(BlockType.Grass, x, bh * 32));
        //r = new Random(Sys.getTime() / System.currentTimeMillis() * System.nanoTime());
        bh = r.nextInt(1) + 1;
        System.out.println(bh);
    }
} 
```

编辑：`r.nextInt(2);`还创建了一块平坦的土地。EDIT2：修复了它，我很愚蠢，只是在 for 循环之前更改了 r.nextInt() 。忘记里面的那个了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:09:47.163

`r.nextInt(1)`总会回来`0`的。根据经验，`r.nextInt(x)`返回范围内的整数`0 to x-1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:10:10.560

正如@Blender 指出的那样，问题在于 nextInt(1) 将返回范围 [0, 1) 中的值，该值始终为 0。

增加`n`您传入的值以创建更大的块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:10:40.490

`nextInt(x)`返回一个介于 0 和包括 0 之间的随机整数`x-1`。所以`nextInt(1)`返回一个介于 0 和... 0 之间的整数。

试试`nextInt(2)`吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T03:11:36.993

nextInt(1) - 将始终返回 0，原因是该参数是随机选择的上限。尝试提高参数值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T03:13:05.027

`nextInt(maxInt)``0`从to返回一个 int `maxInt - 1`。`nextInt(1)`用类似的东西替换`nextint(100)`

# actionscript-3 - 如何让数组返回到它的第一个索引？

> ID：15445118
> 
> 赞同：0
> 
> 时间：2013-03-16T03:07:54.433
> 
> 标签：actionscript-3

我希望索引在处理完所有项目后立即返回到第一个。这段代码似乎不起作用。有人可以帮我解决这个问题吗？为什么会这样？

我的一个预感是因为`buttonArray.length`不等于`arrayPosition`它可能会导致问题。但我尝试手动放置 3 并做到了`(buttonArray.length-1)`。它仍然没有工作。

```
buttonArray.push (square,triangle,circle,hexagon);

    function clickon(clickTarget:MouseEvent){
        if (clickTarget.target == buttonArray[arrayPosition]){
        trace ("correct");
        trace (buttonArray.length);
        trace (arrayPosition);

        if (buttonArray[arrayPosition]== buttonArray.length)
        {
            arrayPosition = 0;
            trace ("this is working");
        }
        else
        {
            arrayPosition++;
        }
        // inside if loop end
        }
        else
        {
            trace ("not correct");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:44:36.880

尝试改变：

```
if (buttonArray[arrayPosition]== buttonArray.length)
{
          arrayPosition = 0;
          trace ("this is working");
} 
```

至：

```
if (arrayPosition == (buttonArray.length-1))
{
          arrayPosition = 0;
          trace ("this is working");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:46:01.627

您在检查位置时出错，您正在根据数组的长度检查元素，但您应该检查位置本身。

```
 if (arrayPosition == buttonArray.length) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:12:30.723

使“arrayPosition”从 0 循环到 buttonArray.length 的一种方法是：

```
arrayPosition++
arrayPosition = arrayPosition % buttonArray.length; 
```

循环中的示例：

```
var buttonArray:Array = new Array(14); // array is 14 elements long

var arrayPosition:int = 0;

for(var counter:int = 0; counter < 100; counter++){
    arrayPosition++
    arrayPosition = arrayPosition % buttonArray.length;
    trace(arrayPosition); // goes from 0 to 13, then back to 0 and repeats
} 
```

# python - 给定一个列表，如何计算该列表中的项目？

> ID：15445119
> 
> 赞同：3
> 
> 时间：2013-03-16T03:08:24.807
> 
> 标签：python, list, python-3.x, count

鉴于列表

```
List2 = ['Apple', 'Apple', 'Apple', 'Black', 'Black', 'Black', 'Green', 'Green', 'Red', 'Yellow'] 
```

我试图弄清楚如何计算列表中每个元素出现的次数。这必须非常简单，但我无法弄清楚。我在我的书中读到了 count 函数，我决定尝试实现它。我以为会..

```
for item in List2:
    newlist=[List2.count()] 
```

我认为这会导致我得到我想要的：

```
newlist=[3,3,2,1,1] 
```

但是我收到一个 TypeError 说 count 必须有一个参数。我对 python 非常陌生，所以如果可以的话，尽可能地把所有东西都搞砸。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T03:10:18.010

您可以使用[collections.Counter](http://docs.python.org/dev/library/collections#collections.Counter)，它为您提供了一个`dict`类似的对象（因为它还具有一些可用于类似*计数*目的的附加功能），该对象具有作为项目的键和作为出现次数的值。

```
from collections import Counter

>>> li = ['Apple', 'Apple', 'Apple', 'Black','Black','Black','Green','Green','Red','Yellow']    
>>> Counter(li)
Counter({'Black': 3, 'Apple': 3, 'Green': 2, 'Yellow': 1, 'Red': 1}) 
```

然后由你来决定你希望它如何呈现......

保存顺序的一种（低效）方法是计数，然后索引到原始列表中：

```
>>> counts = Counter(li)
>>> [counts[key] for key in sorted(counts, key=li.index)]
[3, 3, 2, 1, 1] 
```

另一种方法是使用`groupby`（但这依赖于连续的项目）：

```
>>> from itertools import groupby
>>> [len(list(g)) for k, g in groupby(li)]
[3, 3, 2, 1, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:37:39.380

如果您是 Python 新手，我认为编写解决方案比仅仅导入一些东西更好。这是一个简单易懂的方法：

```
counter = {}
for elem in List2:
    counter[elem] = counter.get(elem, 0) + 1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T03:33:21.467

你可以试试这个：

```
new_list = [List2.count(x) for x in set(List2)] 
```

这相当于：

```
new_list = []
for x in set(List2):
    new_list.append(List2.count(x)) 
```

或者对于字典：

```
new_dict = {x:List2.count(x) for x in set(List2)} 
```

# ruby-on-rails - 我是否需要或想要 Rails 3.0 中的 Mail gem？

> ID：15445126
> 
> 赞同：2
> 
> 时间：2013-03-16T03:09:21.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我很困惑。

我一直在为我的应用程序客户创建一些电子邮件。所以我使用**ActionMailer**发送电子邮件。我创建了一个带有附加视图的通知程序来保存我的每个电子邮件模板。

但是后来，我的系统发送了一些电子邮件，它们看起来真的很奇怪。所以我得出的结论是，他们一定有问题。我开始四处阅读，发现了有趣的输入。

我找到[了 premailer gem](https://github.com/fphilipe/premailer-rails)或roadie [gem](https://github.com/Mange/roadie)来帮助我将资源（如 css）嵌入到我的电子邮件中，以制作高质量的 html 电子邮件。但我还不相信这就足够了。

我进入了令人困惑的部分。我找到了[邮件宝石](https://github.com/mikel/mail)。这个 gem 可以帮助我还是只是**ActionMailer**的替代品？它说它将创建标准化的电子邮件 (RFC2822) 等等，但是作为 Rails/电子邮件业务的新手，我最好与更专业的人核实一下。我将通过 sendgrid（计划到）发送电子邮件，但我希望我的电子邮件看起来不错并尊重与普通浏览器 html 完全不同的 html 电子邮件原则。

任何指导将不胜感激。

几个 railcasts ：[在 rails 3 中](http://railscasts.com/episodes/206-action-mailer-in-rails-3)[发送 HTML 电子邮件](http://railscasts.com/episodes/312-sending-html-email)和操作邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:50:34.657

gem 邮件已经安装在您的应用程序中，因为它是 actionmailer 的依赖项。

如果您的电子邮件看起来很奇怪，也许您应该检查如何格式化它们。例如，您不能在电子邮件中导入 CSS，建议您的样式为内联样式等……此外，复杂的 div 结构可能会产生不需要的结果。有很多限制。

Roadie gem 肯定会帮助您生成正确的电子邮件格式。除了阅读文档和关于电子邮件中 ​​HTML 限制的最佳实践建议之外，我认为您不需要其他任何东西

# c# - 在 C# 中从另一个 A 类引用 B 类的数据

> ID：15445136
> 
> 赞同：-7
> 
> 时间：2013-03-16T03:11:15.873
> 
> 标签：c#

我知道如何从 A 类引用 B 类的方法，但我在引用数据时遇到了困难。例如

```
class A 
{
    int[] array1;
    method 1
    {
        //do something and ...
        array1 = something;
    }
} 
```

然后在B班

```
class B
{
    int[] array2 = new B.array;
} 
```

但是这里的 array2 只是新的空白数据结构，其中没有实际数据。在 B 类中，如何使用 A 类现有的 array1 数据？

例如，array1 可以是视频流数据。

谢谢你，肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:18:53.990

在 class 中公开数组`A`。`A`然后，您可以从, in的现有实例访问它`B`。

```
class B
{
    int[] array2;

    // constructor function for class B
    public B(A aInstance) {
        // set array2 to aInstance's array1
        array2 = aInstance.array1;
    }
}

A a = new A();
B b = new B(a); 
```

您也可以`array1`在`A`. 您可以从那里访问它`A.array1`。

**[访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.71%29.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:21:33.637

你有几点困惑。

首先，在 中`Class A`，成员变量`Array 1`默认为私有访问，因此您无法从 B 类“看到”它。

其次，好的设计需要您呈现`Array 1`以下*属性*`Class A`：

```
class A
{
int[] array1;

public int[] TheArray
  {
    get { return array1; }
    set { array1 = value; }
  }
} 
```

然后你可以写：

```
class B

void myMethod() {
 int[] array2 = A.TheArray;
} 
```

# php - 基于多列排序MySql

> ID：15445137
> 
> 赞同：2
> 
> 时间：2013-03-16T03:11:16.630
> 
> 标签：php, mysql

我正在尝试按几个不同的列对 mysql 表进行排序。这是表格：

```
+------------+------------+------------+------------+
|     id     |  parent_id |  ordering  |    level   |
+------------+------------+------------+------------+
|      1     |     0      |      0     |      0     |
+------------+------------+------------+------------+
|      2     |     0      |      2     |      0     |
+------------+------------+------------+------------+
|      3     |     0      |      3     |      0     |
+------------+------------+------------+------------+
|      4     |     0      |      4     |      0     |
+------------+------------+------------+------------+
|      5     |     2      |      0     |      1     |
+------------+------------+------------+------------+
|      6     |     0      |      1     |      0     |
+------------+------------+------------+------------+ 
```

这是我想要达到的结果：

```
+------------+------------+------------+------------+
|     id     |  parent_id |  ordering  |    level   |
+------------+------------+------------+------------+
|      1     |     0      |      0     |      0     |
+------------+------------+------------+------------+
|      6     |     0      |      1     |      0     |
+------------+------------+------------+------------+
|      2     |     0      |      2     |      0     |
+------------+------------+------------+------------+
|      5     |     2      |      0     |      1     |
+------------+------------+------------+------------+
|      3     |     0      |      3     |      0     |
+------------+------------+------------+------------+
|      4     |     0      |      4     |      0     |
+------------+------------+------------+------------+ 
```

如您所见（希望），我想通过 ordering 和 parent_id 对项目进行排序。如果可能的话，我更愿意使用单个查询。如果这不可能，我可以结合查询使用 PHP 循环。如果可能的话，我想远离多个查询。

我需要一种排序方法，以使带有`parent_id`例如行的行`id=5`位于其“父行”下方（带有 的行`id=2`）。“排序”基于“级别”。

我最接近的是通过以下排序：

`SELECT * FROM table ORDER BY ordering,id,parent_id`

返回：

```
+------------+------------+------------+------------+
|     id     |  parent_id |  ordering  |    level   |
+------------+------------+------------+------------+
|      1     |     0      |      0     |      0     |
+------------+------------+------------+------------+
|      5     |     2      |      0     |      1     |
+------------+------------+------------+------------+
|      6     |     0      |      1     |      0     |
+------------+------------+------------+------------+
|      2     |     0      |      2     |      0     |
+------------+------------+------------+------------+
|      3     |     0      |      3     |      0     |
+------------+------------+------------+------------+
|      4     |     0      |      4     |      0     |
+------------+------------+------------+------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T03:15:00.867

您是否尝试按`SUM`Ordering 和 Parent_Id 列的排序？假设它们都是数字数据类型，这应该有效：

```
SELECT *
FROM YourTable
ORDER BY Parent_Id + Ordering, Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:23:51.143

[**SQLFiddle 演示**](http://sqlfiddle.com/#!2/2b4da/7)

```
SELECT * FROM mytable ORDER BY parent_id + ordering, id 
```

# asp.net-mvc - MVC Trace.TraceInformation 日志记录

> ID：15445148
> 
> 赞同：0
> 
> 时间：2013-03-16T03:13:55.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我实现了 Trace.TraceInformation。这会将信息记录到哪里？VS 2010 中是否有显示此内容的窗口或是否有可写入的文件？

```
catch (DbEntityValidationException dbEx)
{
    foreach (var validationErrors in dbEx.EntityValidationErrors)
    {
        foreach (var validationError in validationErrors.ValidationErrors)
            Trace.TraceInformation("Property: {0} Error: {1}",
                validationError.PropertyName, validationError.ErrorMessage);            
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T08:10:53.343

此信息将传递给[Trace.Listeners](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.listeners.aspx)集合的元素，该集合默认包含[DefaultTraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.defaulttracelistener.aspx)

要启用跟踪，请在编译代码时将 /d:TRACE 标志添加到编译器命令行，或将#define TRACE 添加到文件顶部。

要指定跟踪输出文件，您可以`TextWriterTraceListener`在配置中添加到侦听器：

```
<configuration>
<system.diagnostics>
  <trace autoflush="false" indentsize="4">
    <listeners>
      <remove name="Default" />
      <add name="myListener"  type="System.Diagnostics.TextWriterTraceListener"    initializeData="c:\myListener.log" />
    </listeners>
  </trace>
</system.diagnostics>
</configuration> 
```

# c++ - 防止基准测试的空语句优化

> ID：15445149
> 
> 赞同：2
> 
> 时间：2013-03-16T03:14:06.087
> 
> 标签：c++, optimization, c++11, timer, benchmarking

考虑以下代码：[LWS](http://liveworkspace.org/code/1mHBI3%249)

```
#include <iostream>
#include <chrono>
#include <cmath>
#include <ctime>
#include <cstdlib>

template <class Counter, class Function, class... Args>
inline double benchmark(const Counter& counter, Function&& f, Args&&... args)
{
    const std::chrono::high_resolution_clock::time_point marker 
    = std::chrono::high_resolution_clock::now();

    for (Counter i = Counter(); i < counter; ++i) {
        f(args...);
    }

    return std::chrono::duration_cast<std::chrono::duration<double> >
    (std::chrono::high_resolution_clock::now()-marker).count();
}

int main(int argc, char* argv[])
{
   srand(time(nullptr));
   double y = rand()%10+1;
   std::cout<<benchmark(1000000, [](double x){return std::sin(x);}, y)<<"\n";
   return 0;
} 
```

该函数`benchmark`测量函数的执行时间。问题是函数在优化过程中被删除为空语句。有没有办法强制函数真正执行？

编辑：1）我正在寻找标准 C++ 中的解决方案（没有特定于编译器的指令） 2）如果`f`可以保持尽可能通用（例如 void 返回类型）会更好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T05:57:42.953

我使用 volatile 临时找到了这个解决方案：

```
#include <iostream>
#include <chrono>
#include <cmath>

template <class Clock = std::chrono::high_resolution_clock, class Counter, class Function, class... Args>
inline double benchmark(const Counter& counter, Function&& f, Args&&... args)
{
    volatile decltype(f(args...)) temporary = decltype(f(args...))();
    const typename Clock::time_point marker = Clock::now();
    for (Counter i = Counter(); i < counter; ++i) {
      temporary = f(args...);
    }
    return std::chrono::duration<double>(Clock::now()-marker).count();
}

int main(int argc, char* argv[])
{
   std::cout<<benchmark(1000000000, [](double x){return std::sin(x);}, 3.)<<"\n";
   return 0;
} 
```

如果您知道如何改进此代码，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:21:03.697

既然（匿名）函数返回一个值，为什么不捕获该值`benchmark`并用它做一些微不足道的事情，比如将它添加到通过引用传入的值中？像这样：

```
template <class Counter, class Function, class... Args>
inline double benchmark(double& sum, const Counter& counter, Function&& f, Args&&... args)
{
    const std::chrono::high_resolution_clock::time_point marker 
    = std::chrono::high_resolution_clock::now();

    for (Counter i = Counter(); i < counter; ++i) {
        sum += f(args...);
    }

    return std::chrono::duration_cast<std::chrono::duration<double> >
    (std::chrono::high_resolution_clock::now()-marker).count();
} 
```

我认为编译器现在将很难优化函数调用（假设您打印或以某种方式使用 sum in `main()`）。

# php - 您的 SQL 语法有错误；检查与您的 MySQL 服务器相对应的手册

> ID：15445152
> 
> 赞同：2
> 
> 时间：2013-03-16T03:14:23.243
> 
> 标签：php, mysql, sql

我编写了代码来尝试我的论坛上的用户活动，当我添加这一行时

```
$cat_id = $db->fetch("SELECT name FROM " . $prefix . "_categories WHERE id =" . mysql_real_escape_string($forum_data['cat_id']));
$page_title_pro = ' > ' . $system->present($cat_id['name']) . ' > ' . $system->present($forum_data['name']) . ''; 
```

我明白了

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 's Treasures > Contests' WHERE id = '2'' at line 1 
```

我假设 2 是我的用户 ID，在页脚中，我有这个：

```
$db->query("UPDATE accounts SET flocation = '$session_location', page = '$page_title_pro'  WHERE id = '$id';"); 
```

我似乎找不到错误，当我取出 cat_id 时，一切都恢复正常，但是我无法将当前活动用于配置文件。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T03:28:06.087

您的更新语法没有问题。问题在于您要在包含单引号的特定列上设置的值会导致您的更新语法中断。在将值传递给查询之前，您需要转义值中的单引号。一种可能的方法是使用

**mysql_real_escape_string**

```
$val1 = mysql_real_escape_string($session_location);
$val2 = mysql_real_escape_string($page_title_pro);
$val3 = mysql_real_escape_string($id);
$db->query("UPDATE accounts SET flocation = '$val1', page = '$val2'  WHERE id = '$val3'"); 
```

另一个（**首选**）是通过使用`PreparedStatements`（`PDO`或`MySQLi`扩展名），您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T03:22:28.097

mysql_real_escape_string 更新查询的输入值，它`$page_title_pro`来自上一个包含**'**的查询。

# ruby-on-rails - phusion 乘客 nginx 模块没有拿起我的 Rails 应用程序

> ID：15445154
> 
> 赞同：0
> 
> 时间：2013-03-16T03:14:49.397
> 
> 标签：ruby-on-rails, nginx, passenger, ruby-on-rails-2

**注意：**乘客独立与我的 rails 应用程序一起工作，因为我需要部署多个 rails 应用程序，所以我需要passenger-install-nginx-module

**操作系统** ubuntu 12.04 LTS 64 位

**Ruby** REE 1.8.7（通过 Brightbox 存储库安装）

**导轨**2.3.17

通过 **passenger-install-nginx-module安装的Nginx**

**乘客**3.0.19

**Nginx** 1.2.6

**我的 nginx.conf**

/opt/nginx/conf/nginx.conf

```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    passenger_root /usr/lib/ruby/gems/1.8/gems/passenger-3.0.19;
    passenger_ruby /usr/bin/ruby1.8;

    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    server {
        listen       80;
        server_name  localhost;
        root   /home/sampath/railsdemoapp/public;
        passenger_enabled on;  

}
} 
```

当我通过 sudo /opt/nginx/sbin/nginx 启动 nginx 时，当我访问 url 时它显示 403 Forbidden nginx/1.2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:57:15.293

那是因为 Nginx 以 www-data 或其他一些 www 用户身份运行。必须允许他访问“/home/sampath/railsdemoapp/public”。您需要修复您的权限。

# c++ - map.find() 和 map.end() 迭代器据说不兼容？

> ID：15445158
> 
> 赞同：0
> 
> 时间：2013-03-16T03:15:16.023
> 
> 标签：c++, iterator, unordered-map

我在 if 语句中使用 map.find(key) 和 map.end() 函数：

```
if( p_Repos->returnTypeMap().find(tc[0]) != p_Repos->returnTypeMap().end() ) 
```

但它不起作用，我收到一个 Microsoft Visual C++ 运行时库错误，告诉我“表达式：列表迭代器不兼容”。tc[0] 只是一个字符串，我的地图中的关键位置是一个字符串。

但是，它们应该是兼容的，对吧？

任何帮助是极大的赞赏。

谢谢，汤姆

编辑：根据此处找到的答案：[Finding value in unordered_map](https://stackoverflow.com/questions/4395050/finding-value-in-unordered-map/7840078#7840078)，我相信这应该可以正常工作。

第二次编辑：
这是 returnTypeMap() 函数：

```
std::unordered_map <std::string, std::pair<std::string, std::string>> returnTypeMap()
{
      return typeTable;
} 
```

这是我的地图的定义：

```
std::unordered_map <std::string, std::pair<std::string, std::string>> typeTable; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T03:26:11.157

您正在返回`map`by 值，因此每次调用都会评估为完全不同的`map`. 不同容器中的迭代器不兼容，并且尝试比较它们具有未定义的行为。

尝试更改您的代码以通过`const`引用返回：

```
std::unordered_map<std::string, std::pair<std::string, std::string>> const& 
returnTypeMap() const
{
    return typeTable;
} 
```

或制作地图的本地副本并在单个本地副本上调用`find`和：`end`

```
auto typeTable{p_Repos->returnTypeMap()};
if (typeTable.find(tc[0]) != typeTable.end()) {
    //...
} 
```

# ios - 如何与作为滚动视图子视图的水平滚动视图交互？

> ID：15445161
> 
> 赞同：0
> 
> 时间：2013-03-16T03:15:38.523
> 
> 标签：ios, cocoa-touch, uiscrollview, uigesturerecognizer

我有一个水平滚动视图，它是垂直滚动视图的子视图。看起来垂直滚动视图正在拦截所有用户交互。我希望能够水平滚动水平滚动视图。我该怎么做？

这是我的代码的一小段：

```
 UIScrollView *scrollView2 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0,     self.view.width, 100)];

  scrollView2.contentSize = CGSizeMake(self.view.bounds.size.width + 400, 100);

  _scrollView.contentSize = CGSizeMake(self.view.width, 400);

  _scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.height - 108)];

[self.view addSubview:_scrollView];

[_scrollView addSubview:scrollView2]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:01:13.430

您可以子类化父滚动视图并覆盖`touchesShouldCancelInContentView:`以在视图是子滚动视图时返回 NO。IE;

```
MyScrollView.h

@interface MyScrollView: UIScrollView
@end 
```

在 MyScrollView.m

```
@implementation MyScrollView

-(BOOL)touchesShouldCancelInContentView:(UIView *)touchedView{
      if(touchedView == _scrollView2){ //Get the reference of that child scroll view here
         return NO;
      }else{
         [super touchesShouldCancelInContentView:touchedView];
      }
} 
```

然后您发布的代码应如下所示：

```
UIScrollView *scrollView2 = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0,     self.view.width, 100)];

  scrollView2.contentSize = CGSizeMake(self.view.bounds.size.width + 400, 100);

  _myScrollView = [[MyScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.height - 108)];
  _myScrollView.contentSize = CGSizeMake(self.view.width, 400);

[_myScrollView addSubview:scrollView2];
[self.view addSubview:_myScrollView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:43:57.400

无法发表评论。因此在这里回答。

我之前遇到过这个问题。我不记得确切的解决方案。但我认为问题在于您试图在第二个视图控制器之后添加第二个视图控制器。我认为你应该尝试反过来。

```
[_scrollView addSubview:scrollView2];
[self.view addSubview:_scrollView]; 
```

# twitter-bootstrap - 使用导航栏时如何强制加载主选项卡？

> ID：15445162
> 
> 赞同：1
> 
> 时间：2013-03-16T03:15:44.560
> 
> 标签：twitter-bootstrap

我只是在学习 twitter bootstrap 的技巧。这是新手问题，所以请耐心等待。我的代码中没有任何 javascript，我要做的就是学习引导类。我正在创建简单的网页来学习标签控件。加载时的主页有站点名称和几个导航选项（请查看我的测试网站[http://www.13favs.com/static](http://www.13favs.com/static)）在页面加载时，它会正确显示菜单栏。当您单击菜单中的第一个选项时，内容会正确显示。现在选择第二个选项，它会正确显示内容。如果您现在选择主页名称（最左侧的菜单标题），它会显示我想在页面加载时显示的英雄内容。我有两部分的问题

*   是否可以在加载时显示英雄内容，因为它会显示主页标题，或者我们是否需要使用 javascript 强制将其作为活动选项卡使其显示？*   [我在http://jsfiddle.net/unni/8vBkC/](http://jsfiddle.net/unni/8vBkC/)创建了一个 jsFiddle来测试这个，但在此内容甚至不会在选择菜单选项时显示，即使我同时启用了 javascript 和 bootstrap js。这是我要测试的核心代码

    ```
    <nav class=navbar navbar-inverse>
    <div class="navbar-inner"> <a class="brand" href="#main">Main Page</a>

        <ul class="nav">
            <li><a href="#first" data-toggle="nav">First</a>
            </li>
            <li><a href="#second" data-toggle="nav">Second</a>
            </li>
        </ul>
    </div> 
    ```

    第一秒

    谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:39:24.680

`active`您可以通过将类添加到英雄选项卡来在加载时显示英雄内容，如下所示：

```
<div class="hero-unit tab-pane active" id="main">
    <h1>Welcome to 13 Favorties</h1>
    <p>Tell us if your favorite is missing.</p>
</div> 
```

在您的小提琴中，代码有两个问题。首先，您没有在“navbar navbar-inverse”周围加上引号，其次，链接说什么`data-toggle="nav"`时候应该说`data-toggle="tab"`

这是一个既有英雄展示又有链接工作的小提琴：http: [//jsfiddle.net/McVRw/2/](http://jsfiddle.net/McVRw/2/)

与代码无关，但如果你没有注意到，你在 hero 中有一个错字：Favorties

# html - How to force inline divs to stay on same line?

> ID：15445164
> 
> 赞同：50
> 
> 时间：2013-03-16T03:16:04.600
> 
> 标签：html, css, word-wrap

I'm trying to make a three-column layout. I'd like the width of the left and right columns to be only as wide as their children content. I'd like the center column to expand to fill the remaining space.

I'm trying the following (overview, jsfiddle link included below):

```
#colLeft {
  display: inline;
  float: left;
}
#colCenter {
  float: left;
  display: inline;
  overflow: none;
  white-space: nowrap;
}
#colRight {
  display: inline;
  float: right;
}

<div id="parent" style="width:100%">
  <div id="colLeft">left</div>
  <div id="colCenter">Some really long text in the center. Some really long text in the center.</div>
  <div id="colRight">right</div>
</div> 
```

fiddle: [http://jsfiddle.net/5kszQ/](http://jsfiddle.net/5kszQ/)

but the center column pushes the right column below it when its content is too long. I'd like all three columns to be inline, and have the center column shrink as necessary. This is what the above is giving me:

![enter image description here](../Images/d1f60ea8b058fefbbb74a5d7bb913d4e.png)

instead I would like:

![enter image description here](../Images/02778c1bc439ccdc287f75320aed022a.png)

Thanks for any help

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-16T03:45:53.273

Here's one method using `inline-block` for the left and middle and `position:absolute` for the right element.

![Example](../Images/3b9329ef650a04ed9ab0e2347b9a66a5.png)

[jsFiddle](http://jsfiddle.net/Tyriar/NMN5L/1/)

**HTML**

```
<div id="parent" style="width:100%">
    <div id="colLeft">left</div><!--
    --><div id="colCenter">Some really long text in the center. Some really long text in the center.</div>
    <div id="colRight">right</div>
</div> 
```

**CSS**

```
html, body {
    margin: 0px;
    padding: 0px;
}
#parent {
    background-color: #eee;
    height: 48px;
    position:relative;
    overflow:hidden;
    white-space: nowrap;
}
#colLeft {
    background-color: #ff8b8b;
    height: 48px;
    display: inline-block;
}
#colCenter {
    background-color: orange;
    height: 48px;
    display: inline-block;
    overflow: hidden;
}
#colRight {
    background-color: #c3d0ff;
    height: 48px;
    display: inline;
    float: right;
    position:absolute;
    top:0;
    right:0;
} 
```

Since it relys on `inline-block`, there is a comment in between the `<div>`s to get rid of the spacing illustrated in this image:

![Ugly spacing](../Images/8209542be65cf094e74d27691883ae26.png)

## text-overflow:ellipsis

To achieve this when using `text-overflow:ellipsis` you may need to fallback on JavaScript, here is a possible solution ([jsFiddle](http://jsfiddle.net/Tyriar/NMN5L/4/)).

![Ellipsis using JavaScript](../Images/2eca738faceb1faf6a164d58171eefa8.png)

```
window.onresize = updateDimensions;

function updateDimensions() {
    var parent = document.getElementById('parent');
    var left = document.getElementById('colLeft');
    var right = document.getElementById('colRight');
    var middle = document.getElementById('colCenter');

    middle.style.width = (parent.offsetWidth - right.offsetWidth - left.offsetWidth)  + 'px';
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-16T08:30:09.100

If you are open for some HTML changes, then this should give you exactly what you want:

```
<div id="parent" style="width:100%">  
  <div id="colLeft">left</div>
  <div id="colwrap">
      <div id="colRight">right</div>
      <div id="colCenter">Some really long text in the center. Some really long text in the center.</div>  
    </div>
</div> 
```

and css to be:

```
html, body {
  margin: 0px;
  padding: 0px;
}
#parent {
  background-color: #eee;
  height: 48px;
}
#colLeft {
  background-color: #ff8b8b;
  height: 48px;
  float: left;
}
#colwrap{
    overflow:hidden;
    background-color: orange;      
}
#colCenter {
  height: 48px;  
}
#colRight {
  background-color: #c3d0ff;
  height: 48px;
  float: right;
} 
```

jsFiddle: [http://jsfiddle.net/gajbhiye/ZX97K/](http://jsfiddle.net/gajbhiye/ZX97K/) Hope that helps.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T09:52:08.853

Fool the browser with saying that it all fits just well on a single line by adding some large margins to the center and right elements, and compensate for that with relative positioning. See **[updated fiddle](http://jsfiddle.net/NGLN/5kszQ/5/)**.

Markup: remains intact.

Style:

```
#parent {
  background-color: #eee;
  height: 48px;
  overflow: hidden;
}
#colLeft {
  background-color: #ff8b8b;
  height: 48px;
  float: left;
}
#colCenter {
  background-color: orange;
  height: 48px;
  float: left;
  margin-left: -2000px;
  position: relative;
  left: 2000px;
}
#colRight {
  background-color: #c3d0ff;
  height: 48px;
  float: right;
  margin-right: -2000px;
  position: relative;
  left: -2000px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T04:08:13.163

Just try this

```
<html>
<head>
    <style type="text/css">
        #parent {
          word-break:break-all;
        }
        #colLeft {
          float:left;
          max-width: 5%;
        }
        #colCenter {
          float:left;
          max-width: 90%;
        }
        #colRight {
          float: right;
          max-width: 5%;
        }
    </style>
</head>
<body>
    <div id="parent" style="width:100%">
      <div id="colLeft">leftawefawefawefawef</div>
      <div id="colCenter">Some really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjlSome really long text in the center. Some really long text in the center.khjjjjjjjjjjjjjjjjjjjjjjjkjhkjhklkjl</div>
      <div id="colRight">rightaewfaewfawefawef</div>
    </div>
</body> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-11-14T14:24:30.080

Just place child divs into the table cells, while the table into parent div. No styling will be needed

```
<div id="parent" style="width: 100%">
 <table>
  <tr>
   <td><div id="colLeft">left</div></td>
   <td><div id="colCenter">Some really long text in the center. Some really long text in the center.</div></td>
   <td><div id="colRight">right</div></td>
  </tr>
 </table>
</div> 
```

# uitableview - 带有换行符的自定义 UITableViewCell 高度

> ID：15445165
> 
> 赞同：1
> 
> 时间：2013-03-16T03:16:22.900
> 
> 标签：uitableview

动态设置自定义 UITableViewCell 高度。如果文本包含换行符，则计算出的高度不正确。

![在此处输入图像描述](../Images/24a266f3e590d1d33b5511c6701d5244.png)

![在此处输入图像描述](../Images/7a1f10d97f35f2df5c38b3d3cd818d24.png)

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{         
        CGSize constraintSize = {320.0, 20000};
        CGSize neededSize = [_beerDetails.notes sizeWithFont:[UIFont systemFontOfSize:10.0f] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];
        return neededSize.height + 50;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:55:47.437

'constraintSize' 中的宽度是否应不小于 320（因为这是 iPhone 屏幕的全宽）？您可以尝试 300 或 290 的宽度。

# javascript - 我已经创建了一个“onclick”事件处理程序，现在如何为“Enter”键创建一个事件处理程序？

> ID：15445168
> 
> 赞同：0
> 
> 时间：2013-03-16T03:17:14.840
> 
> 标签：javascript, events, handler, keycode, enter

我从 OREILLY 的“Head First HTML5 Programming”的第 3 章中获取了这个简单的代码。我做了“一些”调整，但没什么大不了的。如您所见，它只是一个简单的小播放列表管理器，具有一些功能和警报。网页按原样显示。单击“添加歌曲”按钮，它将歌曲添加到播放列表。一切正常，除非您在键盘上按“Enter”，播放列表中的所有歌曲都会消失。如何为“Enter”键创建事件处理程序？我所知道的是“Enter”键码是 13，我该如何将它应用到我的页面？“也”，如您所见，我试图让添加到播放列表中的任何歌曲都保存在本地存储中并在每次打开网页时加载，但“没有”效果。

这是代码：

```
<!doctype html>
<html lang="en">
<head>
<link rel="stylesheet" href="playlist.css">
<title>RTH</title>
<meta charset="utf-8">
<script>

loadPlaylist();

function handleButtonClick() {

    var textInput = document.getElementById("songTextInput");

    var songName = textInput.value;

    if (songName == "") {
        alert("Enter a track!");
    } else {
        alert("Congrats...track is now being added!");
    }

    var li = document.createElement("li");

    li.innerHTML = songName;

    var ul = document.getElementById("playlist");

    ul.appendChild(li);

    save(songName);

}

</script>
<body>

<Input type = "text" Id = "songTextInput" size = "40" placeholder = "Insert track here..."/>

<Input type = "button" id = "addButton" onclick ="handleButtonClick();" value = "Add Song"/>

<strong>

<ul id="playlist">

</ul>
</strong>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:28:33.013

由于您没有将表单数据提交到另一个 URL，因此您可以删除`form`标签。浏览器按回车键提交表单，但如果没有表单，`enter`则不会提交表单。然后您无需担心在 JavaScript 中处理它。

这假设您不想`enter`保存输入的歌曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:21:28.313

我认为您需要的是 onsubmit 事件处理程序

```
<form onsubmit="return validate()">
    <Input type = "text" Id = "songTextInput" size = "40" placeholder = "Insert track here..."/>
    <Input type = "submit" id = "addButton" value = "Add Song"/>
</form>

function validate(event) {
    var textInput = document.getElementById("songTextInput");
    var songName = textInput.value;

    if (songName) {
        alert("Enter a track!");
        return false;
    } else {
        alert("Congrats...track is now being added!");
    }

    var li = document.createElement("li");
    li.innerHTML = songName;
    var ul = document.getElementById("playlist");
    ul.appendChild(li);
    save(songName);    

    return false;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/aj6wX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:26:49.430

您可以将事件参数添加到您的函数中。

jQuery方法：

```
$(document).ready(function() {
   $('input').on('keyup', function(event) {
       if(event.keyCode == 13)
       {
           alert('Enter');
           event.preventDefault();
       }
   }); 
}); 
```

原始 Javascript 方法：

```
var Input = document.getElementByTagName('input');

Input.keyUp = function(event)
{
     if(event.keyCode == 13)
     {
        alert('Enter!');
        event.preventDefault();
     }
} 
```

# c# - Console.ReadLine 被跳过

> ID：15445175
> 
> 赞同：5
> 
> 时间：2013-03-16T03:18:34.430
> 
> 标签：c#, readline

当`Console.ReadLine()`我`mono filename.exe`在使用`gmcs filename.cs`. 会发生什么？即使我尝试运行下面的简单代码，它也会跳到最后，就好像它什么也没运行一样。

```
static void Main(string[] args) {
    string value = Console.ReadLine();
    Console.WriteLine("You entered: {0}", value);
    Console.WriteLine("Press ENTER to continue...");
    Console.ReadLine();   // Returns immediately.
    Console.WriteLine("Continuing....");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:57:33.837

这不太可能，但粘性返回键可能会导致此问题。顺便说一句，运行时尊重您的第一个`Console.ReadLine();`，但忽略第二个？如果是这样，并且您使用的是较旧的键盘，则返回键可能不会像您希望的那样快速返回到“未按下”状态。这将导致您看到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:50:59.317

我猜这是你的问题。

[C#为什么跳过我的console.readline()？](https://stackoverflow.com/questions/3800343/c-sharp-why-is-it-skipping-my-console-readline)

我以前在自己的东西中看到过这种情况，但不记得解决方案了。基本上，您让用户按下发送回车和换行符的回车，从而触发 readline。您可以使用 Read..Key(someCharacter);

# java - 处理 mule 流中的特定异常

> ID：15445181
> 
> 赞同：3
> 
> 时间：2013-03-16T03:19:34.087
> 
> 标签：java, rest, exception-handling, jax-rs, mule

我有一个包裹在 mule v3.2.1 流中的 JAX-RS 服务，它可能会触发我想要捕获和处理的异常。我更愿意将异常发送到另一个类并返回一个 HTTP 状态为 500 的 OutboundProperty。这是我到目前为止所得到的：

```
<flow name="someFlow">
    <...do some stuff...>
    <custom-exception-strategy class="com.myCustomExceptionHandler>
    </default-exception-strategy>
</flow> 
```

当我触发异常时，永远不会调用 myCustomExceptionHandler.handleException()。我不清楚如何重新打包 mule 消息以返回 http 响应。

谁能提供一些关于如何让它工作的想法？

- - 更新 - -

异常将是 org.mule.api.expression.RequiredValueException，当自定义消息处理器中的 MuleExpressionManager 实例调用 evaluate() 时会抛出该异常：

```
public class RequestCheckWithAppMessageProcessor
implements FlowConstructAware, MuleContextAware, Disposable, Initialisable, Startable, Stoppable, MessageProcessor 
```

myCustomExceptionHandler 类扩展了 AbstractMessagingExceptionStrategy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T17:44:39.183

尝试删除 default-exception-strategy 标签。我对 mule 3.2.1 不是很熟悉，但从测试中我了解到自定义异常策略不应嵌套在默认策略中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T07:45:28.753

使用 catch-exception-strategy 并编写自定义 Transformer 以根据 Excption 类型在 MuleMessage 中接收 DefaultExceptionStrategy 作为异常有效负载，映射错误代码

# android - 使用捆绑将数据从一个活动传递到另一个活动 - 不在第二个活动中显示

> ID：15445182
> 
> 赞同：18
> 
> 时间：2013-03-16T03:19:34.907
> 
> 标签：android, json

我目前正在尝试获取通过 REST API 调用获取的数据，将其解析为我需要的信息，然后将该信息传递给新活动。我将来自 loopj.com 的异步 HTTP 客户端用于 REST 客户端，然后分别将以下代码用于我的`onClick`以及`onCreate`当前和未来的活动。

Eclipse 没有为我的任何代码传递任何错误，但是当我尝试在模拟器中运行时，当新的活动/视图打开时，我什么也得不到（即空白屏幕）。我尝试在我的 REST CLIENT 中使用不同的 URL 进行编码，但我仍然什么也看不到。我什至通过注释掉 try/catch in`onClick`并更改`venueName`to`bundle.putString("VENUE_NAME", venueName);`来取消 API 调用`searchTerm`。尽管如此，新视图仍然出现，但没有显示任何内容。什么没有通过，或者我忘记让第二个活动显示`venueName`什么？

```
public void onClick(View view) {
    Intent i = new Intent(this, ResultsView.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String searchTerm = editText.getText().toString();

    //call the getFactualResults method
    try {
        getFactualResults(searchTerm);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    //Create the bundle
    Bundle bundle = new Bundle();
    //Add your data from getFactualResults method to bundle
    bundle.putString("VENUE_NAME", venueName);  
    //Add the bundle to the intent
    i.putExtras(bundle);

    //Fire the second activity
    startActivity(i);
} 
```

第二个活动中的方法应该接收意图并捆绑并显示它：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Get the message from the intent
    //Intent intent = getIntent();
    //String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    //Get the bundle
    Bundle bundle = getIntent().getExtras();

    //Extract the data…
    String venName = bundle.getString(MainActivity.VENUE_NAME);        

    //Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(venName);

    //set the text view as the activity layout
    setContentView(textView);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }
} 
```

谢谢你的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-16T03:31:40.323

您可以通过两种方式发送数据。这就是您目前发送它的方式。它没有任何问题。

```
//Create the bundle
Bundle bundle = new Bundle();
//Add your data from getFactualResults method to bundle
bundle.putString("VENUE_NAME", venueName);
//Add the bundle to the intent
i.putExtras(bundle);
startActivity(i); 
```

但是，在您的代码（第二个活动）中，您指的`key`是 Bundle 中的，`MainActivity.VENUE_NAME`但代码中没有任何内容表明您有一个类，该类将值作为`key`与 Bundle 一起发送的实际名称返回。将第二个 Activity 中的代码更改为：

```
Bundle bundle = getIntent().getExtras();

//Extract the data…
String venName = bundle.getString("VENUE_NAME");        

//Create the text view
TextView textView = new TextView(this);
textView.setTextSize(40);
textView.setText(venName); 
```

如果 Bundle 包含使用 this 的密钥，您可以签入您的第二个 Activity，并且您将知道`key`Bundle 中不存在 。但是，上面的更正将使它为您工作。

```
if (bundle.containsKey(MainActivity.VENUE_NAME))    {
    ....
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T05:35:50.377

我想如果你更换

```
String venName = bundle.getString(MainActivity.VENUE_NAME); 
```

和

```
String venName = bundle.getString("VENUE_NAME"); 
```

它应该工作。

以下是我如何处理从一项活动到另一项活动的数据传输：

将数据发送到名为“Projectviewoptions”的活动：

```
Bundle b = new Bundle();
          b.putString("id", str_projectid);
          Projectviewoptions pv = new Projectviewoptions(); 
```

接收数据：

```
idbundle = getArguments();
String myid = idbundle.getString("id"); 
```

两边的“钥匙”应该是一样的；在这种情况下，“id”。

**通过意图发送数据的另一种方式是：**

发送：

```
Intent intent = new Intent(getActivity(),ViewProjectDetails.class);
                            intent.putExtra("id", myid);
                            startActivity(intent); 
```

收到：

```
String id = getIntent().getExtras().getString("id"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-16T03:42:16.660

您错误地访问了您在捆绑包中添加的密钥。除了获取字符串之外，`MainActivity.VENUE_NAME`尝试直接传递您在捆绑包中添加的键名，如下所示：

除了得到如下字符串：

> ```
>  //Get the bundle
>      Bundle bundle = getIntent().getExtras();
>     //Extract the data…
>    String venName = bundle.getString(MainActivity.VENUE_NAME); 
> ```

尝试使用键名获取字符串，如下所示：

> ```
>  /Get the bundle
>      Bundle bundle = getIntent().getExtras();
>     //Extract the data…
>    String venName = bundle.getString("VENUE_NAME"); 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T03:31:08.553

发送捆绑包。

```
Bundle bundle = new Bundle();
bundle.putString("Name",Object); //This is for a String
i.setClass(CurrentClass.this, Class.class);
i.putExtras(bundle);
startActivity(i); 
```

接收捆绑

```
Bundle bundle = null;
bundle = this.getIntent().getExtras();
String myString = bundle.getString("Name");//this is for String 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T03:21:34.873

确保您用作将项目放入 Bundle 的密钥的字符串与用于提取它的密钥相同。在您的情况下，可能`MainActivity.VENUE_NAME`与“VENUE_NAME”不同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T06:03:12.767

```
Intent loginIntent = new Intent(LoginActivity.this, HomeActivity.class);

Bundle bundle = new Bundle(); 

bundle.putString("user_id", userId);

i.putExtras(bundle);

startActivity(loginIntent);

LoginActivity.this.finish(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-29T11:39:12.733

```
package com.example.mytest;

import androidx.annotation.MainThread;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import static com.example.mytest.MainActivity.STATIC_VARIABLE;

public class MainActivity2 extends AppCompatActivity {
   EditText editText1;
    Button button1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);
        editText1 = (EditText) findViewById(R.id.editText1);
        button1 = (Button) findViewById(R.id.button1);
        Bundle extras=null;
         extras=this.getIntent().getExtras();
        if(extras!=null) {
          String recieved =extras.getString("TAG");
          editText1.setText(String.valueOf(recieved));
        }
        button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
  Intent backIntent = new Intent(MainActivity2.this, MainActivity.class);
                String input= editText1.getText().toString();
                backIntent.putExtra("TAG2",input);
               STATIC_VARIABLE=3;
//    setResult(RESULT_OK,intent);
//                startActivityForResult(intent, 2);
                startActivity(backIntent);

            }
        });
    }

    } 
```

# php - PHP：表中有两个 mysql_fetch_array

> ID：15445186
> 
> 赞同：2
> 
> 时间：2013-03-16T03:20:03.823
> 
> 标签：php, mysql, while-loop, html-table

我正在使用来自两个查询的数据创建一个表，并尝试将它们连接到一个表中。尝试使用这样的东西：

```
$counter = 1; 

    echo '<table border="0"  cellpadding="0" cellspacing="3"><tr>
                <td width="10%">Miejsce</td>
                <td width="25%">Nick</td>
                <td width="20%">SteamID</td>
                <td width="20%">Punkty</td>
                </tr>';

                    while($row = mysql_fetch_array($skill_b) AND $row2 = mysql_fetch_array($sid_b))
                    {
                      echo '<tr class="select">';
                      echo '<td>'.$counter.'</td>';
                      echo '<td><center>'.$row['lastName'].'</center></td>';
                      echo '<td><center>'.$row2['uniqueId'].'</center></td>'; 
                      echo '<td><center>'.$row['skill'].'</center></td>';
                      echo '</tr>
                    $counter++; 
                    } 

    echo '</table>'; 
```

和

```
$counter = 1; 
    echo '<table border="0"  cellpadding="0" cellspacing="3"><tr>
                <td width="10%">Miejsce</td>
                <td width="25%">Nick</td>
                <td width="20%">SteamID</td>
                <td width="20%">Punkty</td>
                </tr>';
                                          echo '<tr class="select">';
                                          echo '<td>'.$counter.'</td>';
                    while($row = mysql_fetch_array($skill_b))
                    {
                      echo '<td>'.$row['lastName'].'</td>';
                    } 
                    while($row2 = mysql_fetch_array($sid_b))
                    {
                      echo '<td>'.$row2['uniqueId'].'</td>'; 
                    } 
                    while($row3 = mysql_fetch_array($skill_b))
                    {
                      echo '<td>'.$row3['skill'].'</td>';
                    } 
                    $counter++; 
    echo '</table>'; 
```

第二个几乎可以工作，尽管它使整个表崩溃，所以我看不到所有结果。

如果其中可以更改某些内容，则查询如下所示：

```
 $query_skill = sprintf(
  "SELECT skill, lastName
  From hlstats_Players
  ORDER BY skill DESC
  LIMIT 10");

$skill_b = mysql_query($query_skill);
$skill = mysql_result( $skill_b, -1 );

$query_sid = sprintf(
  "SELECT uniqueId
  From hlstats_PlayerUniqueIds
  WHERE playerId='$pid_b'"
  );

$sid_b = mysql_query($query_sid);
$sid = mysql_result( $sid_b, 0 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:23:06.163

您的第一次尝试几乎是正确的。唯一的问题是运算符优先级。

试试这个：

```
while(($row = mysql_fetch_array($skill_b)) && ($row2 = mysql_fetch_array($sid_b))) 
```

也就是说，您可能应该使用 a 来重构您的查询`JOIN`，~~但是如果没有看到您当前的查询，我将无法提供任何额外的帮助。~~请参阅下面的编辑。

另外，请注意，`<center>`不赞成使用 CSS。在这种情况下：

```
<td style="text-align:center"> 
```

* * *

编辑：试试这个查询：

```
SELECT a.skill, a.lastName, b.uniqueId
FROM hlstats_Players a
JOIN jlstats_PlayerUniqueIds b ON a.id = b.playerId
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:09:41.320

试试这个，这对我来说很好

```
<?php
mysql_connect('localhost','root','');
mysql_select_db('your_db');
$counter = 1; 
    echo '<table border="0" style="text-align:center;" cellpadding="0" cellspacing="3"><tr>
                <td width="10%">Miejsce</td>
                <td width="25%">Nick</td>
                <td width="20%">SteamID</td>
                <td width="20%">Punkty</td>
                </tr>';

$skill_b = mysql_query('select * from table_name limit 10');
$sid_b = mysql_query('select * from table_name limit 10');

                    while($row = mysql_fetch_array($skill_b) AND $row2 = mysql_fetch_array($sid_b))
                    {
                      echo '<tr class="select">';
                      echo '<td>'.$counter.'</td>';
                      echo '<td><center>'.$row['colu_name'].'</center></td>';
                      echo '<td><center>'.$row2['colu_name'].'</center></td>'; 
                      echo '<td><center>'.$row['colu_name'].'</center></td>';
                      echo '</tr>';
                    $counter++; 
                    } 

    echo '</table>';
    ?> 
```

如果有问题请评论，如果有任何错误请指出

谢谢

# batch-file - 合并文件名部分匹配的数据

> ID：15445187
> 
> 赞同：1
> 
> 时间：2013-03-16T03:20:19.430
> 
> 标签：batch-file, merge, match

我有很多文件名部分匹配的数据文件，例如

```
T70M1U1-cell.txt
T70M1U1-anode.txt
T80M5U1-cell.txt
T80M5U1-anode.txt
... 
```

“T70M1U1-cell.txt”包含

```
A
B
C 
```

和“T70M1U1-anode.txt”包含

```
1
2
3 
```

我想将两个数据集组合成一个“T70M1U1.txt”，其中包含：

```
A    1
B    2
C    3 
```

我将如何使用批处理或软件批量合并两个数据集“T70M1U1-cell.txt & T70M1U1-anode.txt”和其他类似的数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:35:16.803

```
@ECHO OFF
SETLOCAL
SET source=c:\sourcedir
SET dest=c:\destdir
FOR /f "delims=-" %%a IN (
 'dir /b/a-d "%source%\*-cell.txt"'
 ) DO IF EXIST "%source%\%%a-anode.txt"  (
 FOR /f "tokens=1*delims=:" %%p IN ('findstr /n /r "$" ^<"%source%\%%a-cell.txt"') DO (
   FOR /f "tokens=1*delims=:" %%s IN ('findstr /n /r "$" ^<"%source%\%%a-anode.txt"') DO (
   IF %%p==%%s >>"%dest%\%%a.txt" ECHO %%q %%t
   )
  )
 ) 
```

您似乎只需要修改源目录和目标目录以适应您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:40:26.173

```
@echo off
setlocal enabledelayedexpansion

cd "dir\containing\txtfiles"

for %%I in (*-cell.txt) do (
    set arr.length=0
    set file=%%~nxI
    set dest=!file:-cell.txt=.txt!
    if exist "!dest!" del "!dest!"
    for /f "usebackq" %%a in ("!file:cell.txt=anode.txt!") do (
        set "arr[!arr.length!]=%%a"
        set /a "arr.length+=1"
    )
    set idx=0
    for /f "usebackq" %%a in ("%%I") do (
        >>"!dest!" call :dump %%a !idx!
        set /a "idx+=1"
    )
)
goto :EOF

:dump
echo %1 !arr[%2]! 
```

在最后一行中，这应该是`echo %1`and之间的一个制表`!arr[%2]!`符，但您可以使用任何您认为合适的分隔符。

# javascript - 如何每两秒循环一次

> ID：15445188
> 
> 赞同：-1
> 
> 时间：2013-03-16T03:20:25.750
> 
> 标签：javascript, coldfusion

我的 ColdFusion 代码有问题。

我正在尝试编写一些仅每 2 秒循环一次的代码。我尝试`cfloop`在日期或时间范围内使用和循环。但这并不能解决我的问题。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:45:57.437

你也可以使用循环来解决这个问题。您需要做的只是编写一个带有适当步骤的索引循环，例如您可以参考此代码。

```
 <cfset startTime = CreateTimeSpan(0,0,5,10)>
  <cfset endTime = CreateTimeSpan(0,0,5,20)>
  <cfloop from="#startTime#" to="#endTime#" index="i" step="#CreateTimeSpan(0,0,0,2)#">
         Hello World! <br />
   </cfloop> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:06:09.960

您可能正在寻找该[`sleep`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6f29.html)功能。您可以在 CFML 中调用它：

```
 <!--- 2 second delay --->
  <cfset sleep(2000) /> 
```

或来自 CFScript（Ecmascript/Javascript 表示法）：

```
 sleep(2000); 
```

应该有很多可用的睡眠示例。

# linux - 如何在 Linux 中用我编译的 boost 替换默认 boost？

> ID：15445190
> 
> 赞同：0
> 
> 时间：2013-03-16T03:21:01.050
> 
> 标签：linux, boost

我编译了一个boost库。我设置了前缀'/home/lixiang/local'。我想使用我编译的 boost 库编译一些 C++ 应用程序。但是编译过程也会调用 Linux 中的默认 boost。如何用我自己的版本替换它并设置环境配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:17:51.117

当你编译你的应用程序时，使用 gcc 参数`-isystem /home/lixiang/local -L /home/lixiang/local`来构建和链接另一个版本的 boost。

如果您无法修改开源代码，或者根本不想修改，它可能会公开一个可以为您执行此操作的配置脚本：. `/configure --with-boost=/home/lixiang/local`可能工作。

# javascript - “$variable”和“variable”有什么区别 - JavaScript - jQuery

> ID：15445191
> 
> 赞同：8
> 
> 时间：2013-03-16T03:21:02.247
> 
> 标签：javascript, jquery

我已经初始化了 2 个变量，`var1`并且`$var2`在`$(document).ready(function()`jQuery 中。这两个变量之间的主要区别（或可能的区别）是什么？

```
var1 = "var1";
$var2 = "var2";
$('#click1').click(function() {
    alert(var1);
});
$('#click2').click(function() {
    alert($var2);
}); 
```

**[这](http://jsfiddle.net/TYHpJ/)**是工作小提琴。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-16T03:25:03.203

没有区别。Javascript 允许`$`在标识符中使用字符，例如变量和函数名称，就像它允许使用字母、数字和某些其他标点字符一样。它没有特别的意义。

jQuery 将全局`$`变量设置为具有许多特殊行为的对象，因此以 开头`$`的变量通常保留给与 jQuery 相关的变量或值。但是，这并未在任何级别强制执行。您可以随心所欲地随意使用`$`变量名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:39:35.757

其实他们是一样的。“$”符号用于表示该变量与 jQuery 一起使用。这是开发人员注意它的便捷方式。您可以在纯 javascript 和 jquery 中同时使用“var1”和“$var2”。

您应该考虑在 JavaScript 中声明变量的规则，您会看到可以在变量中使用“$”符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:27:19.327

我认为这两个变量的范围之间没有任何区别。只是 $var2 在其变量名中有一个 '$' 符号，并持有不同的字符串值。

我发现这个[线程](https://stackoverflow.com/questions/500431/javascript-variable-scope)很好地解释了 JavaScript 作用域。

# algorithm - 如果 L 和 M 是 Linked List ，在什么条件下是 LM = ML

> ID：15445195
> 
> 赞同：-3
> 
> 时间：2013-03-16T03:21:21.077
> 
> 标签：algorithm, language-agnostic, linked-list

这是 Ullman 的 List Data Model 中的一个问题

*   如果 L 和 M 是 Linked List ，在什么条件下是 LM = ML ？

我正在阅读计算机科学基础书籍。问题来自[http://i.stanford.edu/~ullman/focs/ch06.pdf](http://i.stanford.edu/~ullman/focs/ch06.pdf) 6.3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:01:56.457

我能想到两个条件：

其中一个列表是空的。

```
{}+{1,2,3} = {1,2,3}+{} = {1,2,3} 
```

一个列表是另一个列表的多个实例的串联。

```
{1,2,3}+{1,2,3,1,2,3} = {1,2,3,1,2,3}+{1,2,3} = {1,2,3,1,2,3,1,2,3} 
```

两个旁注：1）在第一个条件中，空列表`{}`是连接操作的标识。2）条件`M=L`实际上是条件二的特例。

**编辑**：感谢@jwpat7，这是另一个条件：

```
{2,3,2,3}+{2,3,2,3,2,3} = {2,3,2,3,2,3}+{2,3,2,3} 
```

两个列表都是同一列表的多个实例的串联，`{2,3}`如上例所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T04:36:34.610

不失一般性，我们可以假设 |L| <= |M|。（否则只需颠倒标签 L 和 M 的分配。）然后我们有 LM = ML = LAL，其中 M = LA = AL。请注意，我们现在有一个相同问题的新版本，用 LA 替换 LM。这说明我们可以给出一个递归条件：

```
LM = ML if and only if M = AL = LA for some list A 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T06:19:56.993

有一个鲜为人知的定理（最近在这里使用：[Detect if sequence is a multiple of a subsequence in Python](https://stackoverflow.com/questions/15332148/detect-whether-sequence-is-a-multiple-of-a-subsequence-in-python/15332925#15332925)）

根据该定理，假设 x 和 y 是字符串。则 xy = yx *if an 仅当*x 和 y 都是某个字符串 z 的幂，即两者都是同一字符串 z 的串联，即 x= zzz..z (k 次) 和 y = zz..z (l次）。

用“普通的旧”链表来谈论本质上是相同的。

我相信通过归纳证明其中一个字符串的长度是有效的。

（不幸的是，我曾经记得这个定理的名称，但我忘记了，所以找不到你的参考）。

# python - 使用 PRAW 帮助获取 Reddit 帖子链接到的 URL

> ID：15445199
> 
> 赞同：5
> 
> 时间：2013-03-16T03:21:35.827
> 
> 标签：python, api, reddit

使用 Praw，我试图将帖子链接到 Reddit 提交的标题中。例如此[图像的](http://i.qkme.me/3te2bn.jpg)[提交](http://www.reddit.com/r/AdviceAnimals/comments/1adu71/apparently_people_still_need_to_hear_this/)链接。我已经尝试找出一种从**PRAW中的****Submission**对象中提取此信息的方法，但是即使在浏览源时我也无法找到此信息。这似乎应该很容易，所以我可能会遗漏一些东西。

 ****非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T04:12:38.650

```
import praw

user_agent = praw.Reddit("my_cool_user_agent")
link = "http://www.reddit.com/r/AdviceAnimals/comments/" + \
        "1adu71/apparently_people_still_need_to_hear_this/"
submission = user_agent.get_submission(link)
print submission.url 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-15T14:44:15.307

```
import praw  

r = praw.Reddit(user_agent='Test Script')
submissions = r.get_subreddit('wtf').get_top(limit=10) 
for item in submissions:
    print item.url 
```****

# c# - 在 C# 中模仿 Fiddler 的 Compose->Raw 功能

> ID：15445202
> 
> 赞同：1
> 
> 时间：2013-03-16T03:22:30.833
> 
> 标签：c#, sockets, https, httpwebrequest

我正在寻找通过互联网发送**原始http 字符串的***最简单方法。*我不想摆弄标头、cookie 或内容属性、方法和所有“好”的东西。我希望它就像 Fiddler 一样：

 **![在此处输入图像描述](../Images/77ccb0a0ca7bbc6124874dac049a8124.png)

您将整个字符串写入文本框 (1)，然后单击“执行”(2)。你就完成了=利润。

**我只想输入一些文本，然后发送。不多也不少。**

如果`Socket`该类没有将我的消息发送到 HTTPS 服务器失败，那就太棒了，例如，Fiddler 可以毫无问题地完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:49:34.267

您是否尝试过使用[System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)？

示例来自：

```
using System;
using System.Net;
using System.IO;

public class Test
{
    public static void Main (string[] args)
    {
        if (args == null || args.Length == 0)
        {
            throw new ApplicationException ("Specify the URI of the resource to retrieve.");
        }
        WebClient client = new WebClient ();

        // Add a user agent header in case the  
        // requested URI contains a query.

        client.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");

        Stream data = client.OpenRead (args[0]);
        StreamReader reader = new StreamReader (data);
        string s = reader.ReadToEnd ();
        Console.WriteLine (s);
        data.Close ();
        reader.Close ();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:29:45.357

[如果您可以选择使用System.Net.Http.HttpClient Class](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx) ，您可以很好地控制请求/响应例程（.NET 4.5）：

```
string url = "https://site.com";
using (System.Net.Http.HttpClient client = new System.Net.Http.HttpClient())
{
  var request = new System.Net.Http.HttpRequestMessage(System.Net.Http.HttpMethod.Get, url);
  var response = await client.SendAsync(request, HttpCompletionOption.ResponseHeadersRead))
  ... 
```

**编辑：**

> ...一一设置字段....

查看[HttpClient Extensions](http://msdn.microsoft.com/en-us/library/hh944845%28v=vs.108%29.aspx)以获取可以帮助您“逐个设置字段”的助手

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:17:58.023

好的，经过很多麻烦，这是如何完成的：

```
var tcpClient = new TcpClient(hostName, port);
var stream = new SslStream(tcpClient.GetStream(), false, (sender, certificate, chain, errors) => true, null); //little hack
stream.AuthenticateAsClient(hostName);
//from now on you may write your usual stuff on the stream 
```

是的，就是这么简单。

[在http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)有更多示例**

# java - 仅当条件为真且多线程时才应调用函数

> ID：15445205
> 
> 赞同：1
> 
> 时间：2013-03-16T03:23:27.163
> 
> 标签：java, multithreading, concurrency

我遇到的问题是：在打印服务器的多线程模拟中，我需要做一些类似的事情：

```
// in client
if (printer.isAvailable() && printer.isFair(this)) // is fair checks if its fair to allow client to print now
    printer.requestToPrint(something)
else
    printer.requestToPrintNext() // something like go into queue 
```

问题是：`requestToPrint`不应该被调用 if`printer.isAvailable() == false`或者`printer.isFair(client) == false`（甚至在函数内）。我怎样才能确保这一点？简单的方法可能是将所有内容都包装在`synchronized (printer)`? 但这意味着我将只有 1 个客户在任何时候尝试打印，`requestToPrintNext`永远不会被调用？我该如何解决这个问题？

顺便说一句，所有这些功能都在`Interface`提供中定义，因此我认为我需要使用所有这些功能......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:34:07.340

通常处理打印机的方法是将打印作业组织成一个队列，具有单一接口功能，如果打印机空闲则立即开始打印，否则将作业放入队列中。如果提供的接口有这样的功能，请使用它。如果没有，请创建自己的。如果打印是同步的，即在打印完所有内容之前不返回，则从单独的线程中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T06:04:52.863

乍一看，您的客户似乎有太多的打印机逻辑。我认为客户的方法更像：

```
public void printMe() {
    printer.print(this);
} 
```

**打印机**将处理所有可用的检查、排队和调度：

```
public synchronized boolean print(Client c, Something something) {
    if(isFair(c) && isAvailable()) {
        requestToPrint(something);
    }
    else {
        // queue
        // Not sure what "requestToPrintNext" does, 
        // as it has no argument, like "something"
    }
} 
```

同步的打印方法将防止其他客户端相互跳过（下一个客户端将被阻止，直到当前客户端的方法完成）。正如其他海报所提到的，如果该`requestToPrint`方法需要很长时间，您可以将其线程化（只需确保它首先以某种方式将 isAvailable 设置为 false，以便下一个客户端将正确排队）。

上述`print`方法假设该`requestToPrint`方法只是简单地触发一个打印作业，并且**不会**阻塞整个打印操作。示例实现可能类似于：

```
public void requestToPrint(Client c) {

    setAvailable(false);

    Thread job = new Thread(new Runnable() {
        @Override
        public void run() {

            // The actual print work

            setAvailable(true);
        }
    });

    job.start();
} 
```

可能值得注意的是，此实现非常特定于该问题的约束。对于更通用的方法，具有单个工作线程来服务该队列的单个*打印队列*（如其他答案所引用）总体上会更干净。一个非常简单的骨架是：

```
public void print(Client c) {
    synchronized(queue) {
        queue.add(c);
    }
}

public class PrintWorker implements Runnable {
    @Override
    public void run() {
        while(true) {
            Client c = null;
            synchronized(queue) {
                if(!queue.isEmpty()) {
                    c = queue.remove(0);
                }
            }

            if(c != null) {
                // do print work
            }
            else {
                // maybe add sleep or wait here
                // to keep thread from spinning
                // too fast and burning CPU
            }
        }
    }
} 
```

# scala - 从内存中清除惰性值

> ID：15445206
> 
> 赞同：1
> 
> 时间：2013-03-16T03:23:30.943
> 
> 标签：scala, lazy-initialization

我现在正在编写一个 JRPG 风格的游戏，并在 YAML 文件中定义我的项目/敌人等。我决定将它们作为惰性值预编译到 Scala 对象中，而不是在运行时加载它们（这在 Scala 中被证明是一个痛苦，尤其是在 Android 上）。

我唯一担心的是，最终，当访问这些值时，对象将开始占用比实际需要更多的内存。

无论如何要重新初始化 Scala 对象或将惰性值清除回默认状态？或者，有没有更好的方法来完成我在这里尝试做的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T15:15:20.697

我发现软（不弱）引用对此非常方便。每次不需要它们的 GC 都会吃掉弱引用，如果重复访问它们会浪费很多精力。软引用仅在存在内存压力时才会被吃掉（这可能是每次 GC，但至少 JVM 可以行使一点自由裁量权）。无论如何，对于 Scala 使用，这非常方便：

```
class Soft[T,U](t: T)(gen: T => U) {
  private[this] var cache = new java.lang.ref.SoftReference(gen(t))
  def apply(): U = {
    var u = cache.get()
    if (u==null) {
      u = gen(t)
      cache = new java.lang.ref.SoftReference(u)
    }
    u
  }
}
object Soft {
  def apply[T,U](t: T)(gen: T => U) = new Soft(t)(gen)
} 
```

现在您将适量的东西包装在 a 中`Soft`，并在需要时使用它`()`来获取数据：

```
val soft = Soft(10)(n => Array.tabulate(n)(i => i*i*i))
soft()(3)   // 27 
```

获得软引用（通常等于创建几个对象）有一个不可完全忽略的惩罚，所以如果您要大量使用某些东西，请先抓住它，然后再做工作：

```
val arr = soft()
// Intensive operations with arr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T04:08:53.617

没有这样的机制。一旦`lazy val`访问 a 并评估其初始化程序，结果值将保存在实例的字段中，它与任何其他实例一样，只有该实例成为垃圾本身才会放弃对该“惰性”值的引用，并且（可能) 也允许它被回收。自然，如果有其他引用它，它们将阻止它被回收。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T06:19:06.093

我认为它没有内置机制，因此您需要自己实现它。最简单的解决方案是在经过一定时间后拥有某种形式的过期缓存 - 例如，如[Java time-based map/cache with expiring keys](https://stackoverflow.com/questions/3802370/java-time-based-map-cache-with-expiring-keys)中所述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T06:29:59.540

这取决于您是否拥有 - 我们称它们为“弱值” - 用于不同类型或一种类型但涉及许多对象的弱值。如果你有后者，我会选择 Rogach 使用地图/缓存的解决方案。

但是，如果您有第一个不同的类或一些大对象，那么一种方法肯定是使用[Wea​​kReference](http://www.scala-lang.org/api/current/index.html#scala.ref.WeakReference)。

这是我想出的一个解决方案——也许将来可以用宏来完成：

```
object UseWeakRef extends App {

  import scala.ref.WeakReference

  class WeakRefCreator[T <: AnyRef] {
    private var weakRef: WeakReference[T] = WeakReference(null.asInstanceOf[T])
    def apply(creator: => T): T = weakRef.get match {
      case None =>
        val newVal: T = creator
        weakRef = WeakReference(newVal); newVal
      case Some(value) => value
    }
  }

  private val expensiveRef = new WeakRefCreator[String]
  def expensiveVal = expensiveRef {
    println("creating expensive object")
    "This is expensive"
  }

  println(expensiveVal)
  println(expensiveVal)
} 
```

顺便说一句，输出是：

```
creating expensive object
This is expensive
This is expensive 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-20T18:22:43.080

通过使用代码生成方法，您将始终拥有至少一个以代码形式构建对象的对象副本，并且可能在对象本身中拥有另一个副本。构造数据的代码可能比实际对象使用更多的内存。

我建议你暂时完全忽略这个内存管理问题——不要使用惰性 vals 或软引用或任何其他释放方案。如果您的目标不是低内存环境（移动设备），那么您可以允许操作系统“交换”您在任何给定情况下都不使用的构造代码和大部分数据（字符串和原生类型数组中的数据）时间。

由于您仍然拥有原始 YAML 文件，因此如果您发现游戏的这一部分使用了太多内存，您可以在游戏制作的润色/优化阶段恢复从数据文件加载。

# c++ - 在 C Linux 中通过 Socket 发送图像（JPEG）

> ID：15445207
> 
> 赞同：13
> 
> 时间：2013-03-16T03:23:38.930
> 
> 标签：c++, image, file, sockets, networking

我正在编写一个小型 C 程序，以便能够使用 TCP/IP 套接字在两台计算机（从服务器到运行 linux 的客户端）之间传输图像文件，但似乎有一个错误，因为我的图片出现在另一侧损坏。

我的服务器的代码是这样的：

```
#include<stdio.h>
#include<string.h>
#include<sys/socket.h>
#include<arpa/inet.h>   
#include<unistd.h>  
#include<iostream>
#include<fstream>
#include<errno.h>

using namespace std;

int send_image(int socket){

FILE *picture;
int size, read_size;
char send_buffer[10240], verify;

picture = fopen("2.jpg", "r");
printf("Getting Picture Size\n");   

if(picture == NULL) {
   printf("Error Opening Image File");
} 

fseek(picture, 0, SEEK_END);
size = ftell(picture);
fseek(picture, 0, SEEK_SET);

//Send Picture Size
printf("Sending Picture Size\n");
write(socket, (void *)&size, sizeof(int));

if(read_size = read(socket, &verify , sizeof(char)) < 0) {
   puts("\nError Receiving Verification");
}

if(verify == '1'){
    printf("5\n");
    //Send Picture as Byte Array
    printf("Sending Picture as Byte Array\n");

    while(!feof(picture)) {

          //Read from the file into our send buffer
          read_size = fread(send_buffer, 1, sizeof(send_buffer)-1, picture);

          //Send data through our socket 
          write(socket, send_buffer, read_size);                        

          //Wait for the verify signal to be received 
          while(read(socket, &verify , sizeof(char)) < 0);

          if(verify != '1') {
             printf("Error Receiving the Handshake signal\n %s",&verify);
          }

          verify = '';

          //Zero out our send buffer
          bzero(send_buffer, sizeof(send_buffer));
   }
}
}

int main(int argc , char *argv[])
{
int socket_desc , new_socket , c, read_size,buffer = 0;
struct sockaddr_in server , client;
char *readin;

//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);
if (socket_desc == -1)
{
    printf("Could not create socket");
}

//Prepare the sockaddr_in structure
server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons( 8889 );

//Bind
if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
{
    puts("bind failed");
    return 1;
}

puts("bind done");

//Listen
listen(socket_desc , 3);

//Accept and incoming connection
puts("Waiting for incoming connections...");
c = sizeof(struct sockaddr_in);

if((new_socket = accept(socket_desc, (struct sockaddr *)&client, (socklen_t*)&c))){
    puts("Connection accepted");
}

fflush(stdout);

if (new_socket<0)
{
    perror("Accept Failed");
    return 1;
}

send_image(new_socket);

    close(socket_desc);
    fflush(stdout);
return 0;
} 
```

接收数据的客户端代码如下：

```
 #include<stdio.h>
 #include<string.h>    //strlen
 #include<sys/socket.h>
 #include<sys/ioctl.h>
 #include<arpa/inet.h>    
 #include<unistd.h>
 #include<iostream>
 #include<errno.h>
 using namespace std;

 //This function is to be used once we have confirmed that an image is to be sent
 //It should read and output an image file
 int receive_image(int socket){

int buffersize = 0, recv_size = 0,size = 0, read_size, write_size;
char imagearray[10241],verify = '1';
FILE *image;

//Find the size of the image
read(socket, &size, sizeof(int));

//Send our verification signal
write(socket, &verify, sizeof(char));
//Make sure that the size is bigger than 0
if(size <= 0 ){
    printf("Error has occurred. Size less than or equal to 0\n");
    return -1;
}

image = fopen("2.jpg", "w");

if( image == NULL) {
    printf("Error has occurred. Image file could not be opened\n");
    return -1;
}

//Loop while we have not received the entire file yet
while(recv_size < size) {
    ioctl(socket, FIONREAD, &buffersize); 

    //We check to see if there is data to be read from the socket    
    if(buffersize > 0 ) {

        if(read_size = read(socket,imagearray, buffersize) < 0){
            printf("%s", strerror(errno));
        }

        //Write the currently read data into our image file
        write_size = fwrite(imagearray,1,(buffersize), image);

        if(write_size != buffersize) {
          printf("write and buffersizes wrong");
        }

        if(read_size !=write_size) {
            printf("error in read write");
        }

        //Increment the total number of bytes read
        recv_size += read_size;

                    //Send our handshake verification info
        write(socket, &verify, sizeof(char));

    }
 }

fclose(image);
printf("Image successfully Received!\n");
return 1;
}

int main(int argc , char *argv[])
{

int socket_desc;
struct sockaddr_in server;
char *parray;

//Create socket
socket_desc = socket(AF_INET , SOCK_STREAM , 0);

if (socket_desc == -1) {
    printf("Could not create socket");
}

memset(&server,0,sizeof(server));
server.sin_addr.s_addr = inet_addr("10.42.0.1");
server.sin_family = AF_INET;
server.sin_port = htons( 8889 );

//Connect to remote server
if (connect(socket_desc , (struct sockaddr *)&server , sizeof(server)) < 0) {
    cout<<strerror(errno);
    close(socket_desc);
    puts("Connect Error");
    return 1;
}

puts("Connected\n");

receive_image(socket_desc);

close(socket_desc);

return 0;
} 
```

任何人都可以帮我解决这个问题吗？我无法为我的一生找出这个错误。

编辑：我已将 fwrites 和 freads 改回常规的写入和读取，但它仍然发送损坏的图像

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T04:30:59.077

你有很多问题：

*   您需要以二进制模式（`"rb"`读取、`"wb"`写入）打开文件，而不是默认的文本模式。在 Windows（以及任何其他进行行尾转换的系统）上，stdio 库在写入时将 LF（字节 0x0A）转换为 CRLF 对（两个字节 0x0D 0x0A），并在读取时进行反向转换。对于 JPEG 文件等非文本数据，这会损坏数据。
*   每次发送后无需发送“握手”字节。TCP/IP 已经处理确认/重新发送/流控制/等。您可以假设只要`send()`/`write()`返回一个正值，那么其他对等方就接收到了那么多字节。
*   `send()`/`write()`可能不会发送您要求的所有数据 - 他们可能会进行部分发送。如果发生这种情况，您需要继续尝试循环发送缓冲区的其余部分。
*   `sizeof(char)`由 C 语言标准保证为 1，很少需要说明什么`sizeof(char)`时候没有它你的代码会更清晰
*   在客户端代码中，无需使用它`ioctl`来确定可以在不阻塞的情况下读取多少数据，因为您只是再次循环——您的代码将在没有可用数据的情况下以 100% 的 CPU 旋转。只是让`read()`呼叫阻塞。如果您在笔记本电脑上运行此代码，您的电池会感谢您。
*   同样，客户端几乎肯定会获得部分读取，您不会在一次调用中收到整个文件。您需要写出您获得的任何数据，然后循环并再次接收。
*   当您在开始时通过套接字发送图像大小时，如果两个系统的字节序不同，您可能会在客户端获得不同的值。为了使您的代码防弹，您需要在发送数据时将数据转换为网络顺序（big-endian），然后在接收后将其转换回主机（本机）顺序。您可以使用[`ntohl(3)`和`htonl(3)`](http://linux.die.net/man/3/htonl)函数对 4 字节值进行这些转换。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-15T03:04:49.937

现在很好用。

最好的，

马里奥。

客户：

```
#include<stdio.h>
#include<string.h>
#include<sys/socket.h>
#include<arpa/inet.h>   
#include<sys/ioctl.h>
#include<unistd.h>  
#include<iostream>
#include<fstream>
#include<errno.h>
using namespace std;

//This function is to be used once we have confirmed that an image is to be sent
//It should read and output an image file

int receive_image(int socket)
{ // Start function 

int buffersize = 0, recv_size = 0,size = 0, read_size, write_size, packet_index =1,stat;

char imagearray[10241],verify = '1';
FILE *image;

//Find the size of the image
do{
stat = read(socket, &size, sizeof(int));
}while(stat<0);

printf("Packet received.\n");
printf("Packet size: %i\n",stat);
printf("Image size: %i\n",size);
printf(" \n");

char buffer[] = "Got it";

//Send our verification signal
do{
stat = write(socket, &buffer, sizeof(int));
}while(stat<0);

printf("Reply sent\n");
printf(" \n");

image = fopen("capture2.jpeg", "w");

if( image == NULL) {
printf("Error has occurred. Image file could not be opened\n");
return -1; }

//Loop while we have not received the entire file yet

int need_exit = 0;
struct timeval timeout = {10,0};

fd_set fds;
int buffer_fd, buffer_out;

while(recv_size < size) {
//while(packet_index < 2){

    FD_ZERO(&fds);
    FD_SET(socket,&fds);

    buffer_fd = select(FD_SETSIZE,&fds,NULL,NULL,&timeout);

    if (buffer_fd < 0)
       printf("error: bad file descriptor set.\n");

    if (buffer_fd == 0)
       printf("error: buffer read timeout expired.\n");

    if (buffer_fd > 0)
    {
        do{
               read_size = read(socket,imagearray, 10241);
            }while(read_size <0);

            printf("Packet number received: %i\n",packet_index);
        printf("Packet size: %i\n",read_size);

        //Write the currently read data into our image file
         write_size = fwrite(imagearray,1,read_size, image);
         printf("Written image size: %i\n",write_size); 

             if(read_size !=write_size) {
                 printf("error in read write\n");    }

             //Increment the total number of bytes read
             recv_size += read_size;
             packet_index++;
             printf("Total received image size: %i\n",recv_size);
             printf(" \n");
             printf(" \n");
    }

}

  fclose(image);
  printf("Image successfully Received!\n");
  return 1;
  }

  int main(int argc , char *argv[])
  {

  int socket_desc;
  struct sockaddr_in server;
  char *parray;

  //Create socket
  socket_desc = socket(AF_INET , SOCK_STREAM , 0);

  if (socket_desc == -1) {
  printf("Could not create socket");
  }

  memset(&server,0,sizeof(server));
  server.sin_addr.s_addr = inet_addr("10.0.0.30");
  server.sin_family = AF_INET;
  server.sin_port = htons( 8889 );

  //Connect to remote server
  if (connect(socket_desc , (struct sockaddr *)&server , sizeof(server)) < 0) {
  cout<<strerror(errno);
  close(socket_desc);
  puts("Connect Error");
  return 1;
  }

  puts("Connected\n");

  receive_image(socket_desc);

  close(socket_desc);

  return 0;
  } 
```

服务器：

```
 #include<stdio.h>
   #include<string.h>
   #include<sys/socket.h>
   #include<arpa/inet.h>   
   #include<unistd.h>  
   #include<iostream>
   #include<fstream>
   #include<errno.h>

   using namespace std;

   int send_image(int socket){

   FILE *picture;
   int size, read_size, stat, packet_index;
   char send_buffer[10240], read_buffer[256];
   packet_index = 1;

   picture = fopen("capture.jpeg", "r");
   printf("Getting Picture Size\n");   

   if(picture == NULL) {
        printf("Error Opening Image File"); } 

   fseek(picture, 0, SEEK_END);
   size = ftell(picture);
   fseek(picture, 0, SEEK_SET);
   printf("Total Picture size: %i\n",size);

   //Send Picture Size
   printf("Sending Picture Size\n");
   write(socket, (void *)&size, sizeof(int));

   //Send Picture as Byte Array
   printf("Sending Picture as Byte Array\n");

   do { //Read while we get errors that are due to signals.
      stat=read(socket, &read_buffer , 255);
      printf("Bytes read: %i\n",stat);
   } while (stat < 0);

   printf("Received data in socket\n");
   printf("Socket data: %c\n", read_buffer);

   while(!feof(picture)) {
   //while(packet_index = 1){
      //Read from the file into our send buffer
      read_size = fread(send_buffer, 1, sizeof(send_buffer)-1, picture);

      //Send data through our socket 
      do{
        stat = write(socket, send_buffer, read_size);  
      }while (stat < 0);

      printf("Packet Number: %i\n",packet_index);
      printf("Packet Size Sent: %i\n",read_size);     
      printf(" \n");
      printf(" \n");

      packet_index++;  

      //Zero out our send buffer
      bzero(send_buffer, sizeof(send_buffer));
     }
    }

    int main(int argc , char *argv[])
    {
      int socket_desc , new_socket , c, read_size,buffer = 0;
      struct sockaddr_in server , client;
      char *readin;

      //Create socket
      socket_desc = socket(AF_INET , SOCK_STREAM , 0);
      if (socket_desc == -1)
      {
         printf("Could not create socket");
      }

      //Prepare the sockaddr_in structure
      server.sin_family = AF_INET;
      server.sin_addr.s_addr = INADDR_ANY;
      server.sin_port = htons( 8889 );

      //Bind
     if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
     {
       puts("bind failed");
       return 1;
     }

     puts("bind done");

     //Listen
     listen(socket_desc , 3);

      //Accept and incoming connection
      puts("Waiting for incoming connections...");
      c = sizeof(struct sockaddr_in);

     if((new_socket = accept(socket_desc, (struct sockaddr *)&client,(socklen_t*)&c))){
puts("Connection accepted");
         }

    fflush(stdout);

    if (new_socket<0)
    {
      perror("Accept Failed");
      return 1;
    }

    send_image(new_socket);

    close(socket_desc);
    fflush(stdout);
    return 0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-12T14:34:24.957

我修改了@mmirand6 答案，以使服务器在客户端发送图像时接收图像（即，上述示例反之亦然）。此外，此示例使用 localhost。另一个区别是服务器永远不会退出并一直等待新的连接。

### 服务器.cpp

```
#include<stdio.h>
#include<string.h>
#include<sys/socket.h>
#include<arpa/inet.h>
#include<unistd.h>
#include<iostream>
#include<fstream>
#include<errno.h>

using namespace std;

int receive_image(int socket)
{ // Start function

int buffersize = 0, recv_size = 0,size = 0, read_size, write_size, packet_index =1,stat;

char imagearray[10241],verify = '1';
FILE *image;

//Find the size of the image
do{
stat = read(socket, &size, sizeof(int));
}while(stat<0);

/*printf("Packet received.\n");
printf("Packet size: %i\n",stat);
printf("Image size: %i\n",size);
printf(" \n");*/

char buffer[] = "Got it";

//Send our verification signal
do{
stat = write(socket, &buffer, sizeof(int));
}while(stat<0);

printf("Reply sent\n");
printf(" \n");

image = fopen("res.ppm", "w");

if( image == NULL) {
printf("Error has occurred. Image file could not be opened\n");
return -1; }

//Loop while we have not received the entire file yet

int need_exit = 0;
struct timeval timeout = {10,0};

fd_set fds;
int buffer_fd, buffer_out;

while(recv_size < size) {
//while(packet_index < 2){

    FD_ZERO(&fds);
    FD_SET(socket,&fds);

    buffer_fd = select(FD_SETSIZE,&fds,NULL,NULL,&timeout);

    if (buffer_fd < 0)
       printf("error: bad file descriptor set.\n");

    if (buffer_fd == 0)
       printf("error: buffer read timeout expired.\n");

    if (buffer_fd > 0)
    {
        do{
               read_size = read(socket,imagearray, 10241);
            }while(read_size <0);

            /*printf("Packet number received: %i\n",packet_index);
            printf("Packet size: %i\n",read_size);*/

        //Write the currently read data into our image file
         write_size = fwrite(imagearray,1,read_size, image);
         //printf("Written image size: %i\n",write_size);

             if(read_size !=write_size) {
                 printf("error in read write\n");    }

             //Increment the total number of bytes read
             recv_size += read_size;
             packet_index++;
             /*printf("Total received image size: %i\n",recv_size);
             printf(" \n");
             printf(" \n");*/
    }

}

  fclose(image);
  printf("Image successfully Received!\n");
  return 1;
  }

int main(int argc , char *argv[])
{
    int socket_desc , new_socket , c, read_size,buffer = 0;
    struct sockaddr_in server , client;
    char *readin;

    //Create socket
    socket_desc = socket(AF_INET , SOCK_STREAM , 0);
    if (socket_desc == -1)
    {
      printf("Could not create socket");
    }

    //Prepare the sockaddr_in structure
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons( 8889 );

    //Bind
    if( bind(socket_desc,(struct sockaddr *)&server , sizeof(server)) < 0)
    {
      puts("bind failed");
      return 1;
    }

    puts("bind done");
    //Listen
    listen(socket_desc , 3); // int listen(int s, int backlog); | `backlog` (3)
    //limits the number of outstanding connections in the socket's listen
    //queue to the value specified by the backlog argument.

    while(true)
    {
      //Accept and incoming connection
      puts("Waiting for incoming connections...");
      c = sizeof(struct sockaddr_in);
      // waits for a connection. returns -1 on failure, a positive val on success
      if((new_socket = accept(socket_desc, (struct sockaddr *)&client,(socklen_t*)&c)))
      {
          puts("Connection accepted");
          cout << "new_socket = " << new_socket << "\n";
      }
      fflush(stdout);
      if (new_socket<0)
      {
          perror("Accept Failed, trying again");
          continue;
      }

      // receive image
      receive_image(new_socket);
    }

    close(socket_desc);
    fflush(stdout);
    return 0;
} 
```

### 客户端.cpp

```
#include<stdio.h>
#include<string.h>
#include<sys/socket.h>
#include<arpa/inet.h>
#include<sys/ioctl.h>
#include<unistd.h>
#include<iostream>
#include<fstream>
#include<errno.h>
using namespace std;

//This function is to be used once we have confirmed that an image is to be sent
//It should read and output an image file

int send_image(int socket)
{
    FILE *picture;
    int size, read_size, stat, packet_index;
    char send_buffer[10240], read_buffer[256];
    packet_index = 1;

    picture = fopen("test.ppm", "r");
    printf("Getting Picture Size\n");

    if(picture == NULL) {
         printf("Error Opening Image File"); }

    fseek(picture, 0, SEEK_END);
    size = ftell(picture);
    fseek(picture, 0, SEEK_SET);
    printf("Total Picture size: %i\n",size);

    //Send Picture Size
    printf("Sending Picture Size\n");
    write(socket, (void *)&size, sizeof(int));

    //Send Picture as Byte Array
    printf("Sending Picture as Byte Array\n");

    do { //Read while we get errors that are due to signals.
       stat=read(socket, &read_buffer , 255);
       printf("Bytes read: %i\n",stat);
    } while (stat < 0);

    printf("Received data in socket\n");
    printf("Socket data: %c\n", read_buffer);

    while(!feof(picture)) {
    //while(packet_index = 1){
       //Read from the file into our send buffer
       read_size = fread(send_buffer, 1, sizeof(send_buffer)-1, picture);

       //Send data through our socket
       do{
         stat = write(socket, send_buffer, read_size);
       }while (stat < 0);

       printf("Packet Number: %i\n",packet_index);
       printf("Packet Size Sent: %i\n",read_size);
       printf(" \n");
       printf(" \n");

       packet_index++;

       //Zero out our send buffer
       bzero(send_buffer, sizeof(send_buffer));
      }
}

int main(int argc , char *argv[])
{

    int socket_desc;
    struct sockaddr_in server;
    char *parray;

    //Create socket
    socket_desc = socket(AF_INET , SOCK_STREAM , 0);

    if (socket_desc == -1) {
        printf("Could not create socket");
    }

    memset(&server,0,sizeof(server));
    server.sin_addr.s_addr = inet_addr("127.0.0.1");
    server.sin_family = AF_INET;
    server.sin_port = htons( 8889 );

    //Connect to remote server
    if (connect(socket_desc , (struct sockaddr *)&server , sizeof(server)) < 0) {
        cout<<strerror(errno);
        close(socket_desc);
        puts("Connect Error");
        return 1;
    }

    puts("Connected\n");

    send_image(socket_desc);

    //close(socket_desc);

    return 0;
} 
```

使用`$gcc client.cpp -lstdc++ -o client`.

# javascript - Javascript 使用按位或等于运算符 |= 创建 polyfill？

> ID：15445211
> 
> 赞同：-1
> 
> 时间：2013-03-16T03:23:51.963
> 
> 标签：javascript, cross-browser, operators, bit-manipulation, polyfills

[使用JavaScript 的按位¹](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators "MDN 上的位运算符")或等于运算符创建 polyfill 有什么问题`|=`吗？

```
Date.now |= function() {
    return +new Date;
}; 
```

[¹位运算符参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators "MDN 上的位运算符")
[²`Date.now()`参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now "MDN 上的 Date.now()")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T03:26:29.920

嗯，是吗？和之间有一个主要区别`|`，`||`polyfills 应该使用：

```
Date.now = Date.now || function() {return +new Date;}; 
```

毕竟，如果你使用这个：

```
Date.now = Date.now | function() {return +new Date;}; 
```

你会得到`0`覆盖函数的结果。

# delphi - Delphi TStringList 自由导致异常

> ID：15445213
> 
> 赞同：4
> 
> 时间：2013-03-16T03:24:38.630
> 
> 标签：delphi, delphi-3

考虑这个简短的 Delphi 过程：

```
procedure TfrmXQuery.FieldListFillFromDefault;
var
  field_list: TStringList;
begin
  try
    if x <> '' then begin
      field_list := TStringList.Create;
      {do some stuff with field_list}
    end;
  finally
    if field_list <> NIL then 
    begin
      field_list.Free;
    end;
  end;
end; 
```

当我在 Delphi 3 中使用 x = '' 运行它时，永远不会创建 field_list，

1.  为什么`field_list <> NIL`？
2.  对象没有初始化为`NIL`?
3.  如果不是`NIL`，那是什么？
4.  如果它没有分配而不是`NIL`我怎么知道`Free`它是否分配？`Assigned`函数没有告诉我：`if Assigned(an_object)`相当于`if an_object = NIL`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T03:31:34.003

问题是，`if x = ''`无论如何`finally`都会发生。由于`field_list`仅在 时初始化`x <> ''`，因此它是该点之前的随机内存位置，因为它是未初始化的局部变量。随机值允许`field_list.free`调用 ，因为它不等于`nil`。（Delphi 不初始化局部变量（那些在函数或过程中声明的变量）。）

```
var
  somevar: sometype;    
begin
  // at this point, somevar is just a chunk of memory that
  // holds whatever happens to be in that chunk
  somevar := nil;         // now somevar = a specific value you can test

  // other code
end; 
```

如果您正确构建代码，则不必测试`<> nil`（正如其他人在评论中指出的那样）。

```
procedure TfrmXQuery.FieldListFillFromDefault;
var
  field_list  : TStringList;
begin
  if x <> '' then 
  begin
    field_list := TStringList.Create;
    try
      {do some stuff with field_list}
    finally
      field_list.Free;
    end;
  end;
end; 
```

（如果您打开提示和警告，编译器会告诉您`field_list may not have been initialized`，这将帮助您自己解决这个问题。）

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-16T21:51:38.443

问题的答案：

1.  为什么`field_list <> NIL`？ ***Delphi 不初始化本地对象。有关更多详细信息，请参阅：[为什么对象不默认为零？](https://stackoverflow.com/questions/23116055/why-doesnt-object-default-to-nil)并且[默认情况下是否使用值初始化delphi变量？](https://stackoverflow.com/questions/132725/are-delphi-variables-initialized-with-a-value-by-default)***

2.  对象没有初始化为`NIL`? ***全局对象：是的。本地对象：没有。***

3.  如果不是`NIL`，那是什么？***无效的指针。***

4.  如果它没有分配而不是`NIL`我怎么知道`Free`它是否分配？***您需要重新组织您的代码（见下文）。*** 该`Assigned`函数没有告诉我：`if Assigned(an_object)`相当于`if an_object = NIL`. ***为 nil（未分配）指针或过程变量分配测试。<--来自 Delphi 3 文档。未初始化的本地对象未分配 NIL，因此`Assigned(an_object)`如果 an_object 是本地的并且从未使用过（分配 NIL 正在使用该对象），则返回 TRUE。***

因为过程的本地对象未初始化为 NIL，所以我修改了问题中的代码，将所有本地对象分配给 NIL。我在例程的一开始就进行这些分配，这样如果从未创建本地对象，Free 就不会出错。我还展示了原始问题中遗漏的错误跟踪代码：

```
procedure TfrmXQuery.FieldListFillFromDefault;
var
  field_list: TStringList;
  some_other_object: TAnotherObject;
begin
  try
    try
      field_list := NIL;
      some_other_object := NIL;
      if x <> '' then begin
        field_list := TStringList.Create;
        {do some stuff with field_list}
      end;
      {...}
      some_other_object := TSomeOtherObject.Create;
      {...}
    except
      On E : Exception do begin
        ErrorTrackingRoutine(unit_name, name, 'FieldListFillFromDefault', E.message);
      end;
    end;
  finaly
    field_list.Free;
    some_other_object.Free;
  end;
end; 
```

整个例程受保护`try...except`。如果`field_list`或`some_other_object`被创建，它将被释放。它们在一开始就被分配为 NIL，因此即使在创建它们之前存在运行时错误，在“try...finally”块中释放它们也不会引发错误。

# oracle - 如何从给定日期获取一个月的最后一天？

> ID：15445216
> 
> 赞同：20
> 
> 时间：2013-03-16T03:25:32.657
> 
> 标签：oracle, plsql

例如，给定日期是***04/04/1924***，我想找出 1924 年 2 月的最后一天。

我想出了 add_month 但如果我的给定月份与数据源不同，它似乎不灵活

有什么好主意吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-16T03:48:32.463

甲骨文有一个[`last_day()`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions077.htm)功能：

```
SELECT LAST_DAY(to_date('04/04/1924','MM/DD/YYYY')) from dual;

SELECT LAST_DAY(ADD_MONTHS(to_date('04/04/1924','MM/DD/YYYY'), -1)) from dual;

SELECT LAST_DAY(ADD_MONTHS(to_date('04/04/1924','MM/DD/YYYY'), -2)) from dual; 
```

结果：

```
April, 30 1924 00:00:00+0000

March, 31 1924 00:00:00+0000

February, 29 1924 00:00:00+0000 
```

在您的日期上使用[`Add_Months()`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions004.htm)以获得适当的月份，然后应用[`last_day()`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions077.htm).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T06:49:55.177

查询 inpl sql 以获取该月的第一天和最后一天：

第一天 ：

```
select to_date(to_char(LAST_DAY(sysdate),'YYYYMM'),'YYYYMM')  from dual; 
```

最后一天：

```
select LAST_DAY(to_date(to_char((sysdate),'YYYYMM'),'YYYYMM'))  from dual; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:56:50.900

这将显示每月的最后一天

```
SELECT  Max(LAST_DAY(ADD_MONTHS(SYSDATE, -2)) + level)
FROM    dual
CONNECT BY
    level <= LAST_DAY(ADD_MONTHS(SYSDATE, -1)) - LAST_DAY(ADD_MONTHS(SYSDATE, -2)) 
```

你可以用 to_date('04/04/1924','MM-DD-YYYY') 替换你想要的任何日期的系统日期

```
SELECT  Max(LAST_DAY(ADD_MONTHS(to_date('04/04/1924','MM-DD-YYYY'), -2)) + level)
FROM    dual
CONNECT BY
    level <= LAST_DAY(ADD_MONTHS(to_date('04/04/1924','MM-DD-YYYY'), -1)) - LAST_DAY(ADD_MONTHS(to_date('04/04/1924','MM-DD-YYYY'), -2)) 
```

或者干脆

```
select LAST_DAY(ADD_MONTHS(to_date('04/04/1924','MM-DD-YYYY'), -2)) from dual; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T08:47:01.243

获取所选月份和年份的最后一天：

从 DUAL 中选择 TO_CHAR(LAST_DAY(TO_DATE(:X_THE_MONTH ||'/01/' || :X_THE_YEAR,'MM/DD/YYYY')),'dd')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T11:43:27.857

如果您想知道您的日期是否是最终安装日期

```
SELECT
case when
TO_DATE('19240430','YYYYMMDD') = LAST_DAY(TO_DATE('04/04/1924','MM/DD/YYYY'))
THEN 1 ELSE 0 END LAST_MOUNTH_DAY FROM DUAL 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-24T07:19:08.603

获取当月的第一个和最后一个日期只需更改月份数​​字即可获取该月的第一个和最后一个日期

```
 select
  to_date('01/'|| '07/' || to_char(sysdate, 'YYYY'), 'dd/mm/yyyy') first,
  last_day(to_date('01/'|| '07/' || to_char(sysdate, 'YYYY'), 'dd/mm/yyyy')) last
  from  dual 
```

结果：

```
first         last
-------------------------- 
01/02/2017  28/02/2017 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-21T06:36:54.217

简单的方法是：

```
select first_name , last_day(hire_date) from employees; 
```

我正在使用 HR 模式...您可以获得上述月份的最后一天。

# c# - 重载运算符'*'时出现“错误：预期一元运算符”

> ID：15445217
> 
> 赞同：1
> 
> 时间：2013-03-16T03:25:37.163
> 
> 标签：c#, dll, struct, operator-overloading

我熟悉 C++，目前正在尝试学习一点 C#。话虽如此，我有 4 行代码。

```
[DllImport(@"Graphics.dll")]
public static extern vec2 operator * (vec2 a);

[DllImport(@"Graphics.dll")]
public static extern vec2 operator / (vec2 a);

[DllImport(@"Graphics.dll")]
public static extern vec3 operator * (vec3 a);

[DllImport(@"Graphics.dll")]
public static extern vec3 operator / (vec3 a); 
```

在 VCS Express 中，他们给了我`Overloadable unary operator expected`带有下划线`*`的错误。`/`根据[MSDN](http://msdn.microsoft.com/en-us/library/8edha89s%28v=vs.80%29.aspx) ，两者都是可重载的。尽管这两个运算符都列在二元下，而不是一元下。这是怎么回事？

只是为了完整起见，这里是整个类，就像我要包装的 DLL 一样：

```
class GraphicsDLL
{
    public struct vec2
    {
        float x, y;

        [DllImport(@"Graphics.dll")]
        vec2();

        [DllImport(@"Graphics.dll")]
        vec2(float ax, float ay);

        [DllImport(@"Graphics.dll")]
        public static extern vec2 operator + (vec2 a);

        [DllImport(@"Graphics.dll")]
        public static extern vec2 operator - (vec2 a);

        [DllImport(@"Graphics.dll")]
        public static extern vec2 operator * (vec2 a);

        [DllImport(@"Graphics.dll")]
        public static extern vec2 operator / (vec2 a);
    };

    public struct vec3
    {
        float x, y, z;

        [DllImport(@"Graphics.dll")]
        vec3();

        [DllImport(@"Graphics.dll")]
        vec3(float ax, float ay, float az);

        [DllImport(@"Graphics.dll")]
        public static extern vec3 operator + (vec3 a);

        [DllImport(@"Graphics.dll")]
        public static extern vec3 operator - (vec3 a);

        [DllImport(@"Graphics.dll")]
        public static extern vec3 operator * (vec3 a);

        [DllImport(@"Graphics.dll")]
        public static extern vec3 operator / (vec3 a);
    };
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T03:28:20.483

在 C# 中，两者`*`和`/`都只能作为二元运算符重载。它们不能以一元形式重载，因此您会收到该错误。`+`and版本有效，`-`因为您重载了一元版本而不是二进制版本（加法，减法）。

可以通过使用运算符的二进制形式来修复此错误

```
 [DllImport(@"Graphics.dll")]
    public static extern vec2 operator * (vec2 a, vec2 other);

    [DllImport(@"Graphics.dll")]
    public static extern vec2 operator / (vec2 a, vec2 other); 
```

我怀疑即使在执行时这段代码也不会为你工作。看起来您正试图通过此处的签名直接 PInvoke 进入 C++ 成员。如果是这样，那就行不通了。您需要定义一个简单的 C 入口点，该入口点调用 C++ 代码并将 PInvoke 调用到该函数中。

# c++ - std::threads 的向量

> ID：15445222
> 
> 赞同：15
> 
> 时间：2013-03-16T03:26:29.550
> 
> 标签：c++, multithreading, vector, c++11, stdthread

**C++11**

我正在尝试制作一个`vector`of `std::thread`s。结合以下三点说我可以。

1.) 根据[http://en.cppreference.com/w/cpp/thread/thread/thread](http://en.cppreference.com/w/cpp/thread/thread/thread)， `thread`的默认构造函数创建一个

> 不代表线程的线程对象。

2\. )根据[http://en.cppreference.com/w/cpp/thread/thread/operator%3D](http://en.cppreference.com/w/cpp/thread/thread/operator%3D)，`thread``operator=`

> 使用移动语义将 [参数，它是线程右值引用] 的状态分配给 [调用线程]。

3.) 根据 [http://en.cppreference.com/w/cpp/container/vector/vector](http://en.cppreference.com/w/cpp/container/vector/vector)，仅将大小类型变量传递给向量构造函数将构造

> 具有 T 的 [指定数量] 值初始化（默认构造，用于类）实例的容器。不制作副本。

**所以，我这样做了：**

```
#include <iostream>
#include <thread>
#include <vector>

void foo()
{
    std::cout << "Hello\n";
    return;
}

int main()
{
    std::vector<std::thread> vecThread(1);
    vecThread.at(0) = std::thread(foo);
    vecThread.at(0).join();
    return 0;
} 
```

这在 VC11 和[g++ 4.8.0（此处为在线编译器）](http://liveworkspace.org/code/4phwIB$0)中按预期运行，如下所示：

**控制台输出：**

```
Hello 
```

**然后我在clang 3.2中尝试了它，通过在同一网页上切换编译器菜单，它给出：**

```
stderr: 
pure virtual method called
terminate called without an active exception 
```

`join()`当代表线程的线程对象在被ed 或ed之前超出范围时`detach()`，程序将被强制终止。我已经`join()`编辑`vecThread.at(0)`了，所以唯一剩下的就是临时线程

`std::thread(foo);`

在里面

`vecThread.at(0) = std::thread(foo);`

任务。

但是，根据网络参考，线程只能通过移动线程右值引用来分配。我想不出任何方法`join()`或`detach()`临时线程对象。

所以如果 clang 的输出是正确的，那么`thread`'s有什么用`operator=`呢？或者这是一个clang编译器错误？

在 g++ 4.8.0 中，换行

`vecThread.at(0) = std::thread(foo)`

至

`vecThread.at(0) = std::thread{foo}`

（用大括号替换括号）仍然给出预期的`Hello`输出。

但是，将行更改为`vecThread.at(0) = {foo}`使其抱怨：

**g++ 4.8.0 对大括号的抱怨：**

> 错误：从初始化列表转换为 'std::thread' 将使用显式构造函数 'std::thread::thread(_Callable&&, _Args&& ...) [with _Callable = void (&)(); _Args = {}]' vecThread.at(0) = {foo};

这太高级了——我不知道这是什么意思。

在 clang 中进行相同的更改可以提供更高级的功能：

**clang 3.2 对大括号的抱怨：**

```
error: no viable overloaded '='
vecThread.at(0) = {foo};
...
note: candidate function not viable: cannot convert initializer list
argument to 'const std::thread'
thread& operator=(const thread&) = delete;
...
note: candidate function not viable: cannot convert initializer list
argument to 'std::thread'
thread& operator=(thread&& __t) noexcept 
```

我也不知道那是什么意思。

我无法使用 VC11 来证实上述内容

`vecThread.at(0) = {foo}`

问题是因为 VC11，截至 2012 年 11 月的 CTP 编译器，不支持标准库上的统一初始化语法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T06:49:56.907

你的第一个例子是正确的。当您将 clang 与 libstdc++ 一起使用时，抛出异常是一个已知[错误。](http://llvm.org/bugs/show_bug.cgi?id=12730)要解决它，您必须安装 libc++（llvm 版本的 c++ 库）。请参阅下面的使用 libc++ 编译的示例

```
#include <thread>

int main()
{
    std::thread t([] () {});
    t.join();
    return 0;
} 
```

`$ clang++ -std=c++11 -stdlib=libc++ main.cpp -o main -lc++ -lsupc++ -lpthread`

PS看到[这里](https://stackoverflow.com/questions/10297291/clang-3-1-libc-compile-error)，为什么也`-lsupc++`需要标志。

# ruby - 如何更改图像 URL 的显示？（carrierwave、amazon s3、rails 和 heroku）

> ID：15445224
> 
> 赞同：1
> 
> 时间：2013-03-16T03:26:36.560
> 
> 标签：ruby, heroku, amazon-s3, carrierwave

我正在使用carrierwave上传图片。根据从这里收到的建议，我开设了一个 Amazon S3 帐户来托管我的 heroku 图像。但是，这是我网站上显示的 image_url

[https://appname.s3.amazonaws.com/images/image/84/74e0f4dfca.jpg?AWSAccessKeyId=XXXXXXXXXXX2XXXXXXX&Signature=XxXXxXX2XXxXxXXXXXxxx&Expires=1363404606](https://appname.s3.amazonaws.com/images/image/84/74e0f4dfca.jpg?AWSAccessKeyId=XXXXXXXXXXX2XXXXXXX&Signature=XxXXxXX2XXxXxXXXXXxxx&Expires=1363404606)

我怎样才能显示一个非常简短的版本？最好只是“/image/84/74e0f4dfca.jpg”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:09:36.613

如果图像可以公开，也许您可​​以让[存储桶公开访问](https://stackoverflow.com/questions/2547046/make-a-bucket-public-in-amazon-s3)。听起来[有一些 GUI 工具](http://raventools.com/blog/how-to-make-files-publicly-accessible-on-amazon-s3/)可以让这更容易。如果存储桶是公开的，那么您可以从 URL 中删除身份验证。我没有使用过 S3，所以有更多经验的人肯定应该加入。

# ruby-on-rails - 拥有一个名为“Set”的模型会出现什么问题？

> ID：15445225
> 
> 赞同：1
> 
> 时间：2013-03-16T03:26:47.203
> 
> 标签：ruby-on-rails, model, naming, naming-conventions

我正在为我的一些模型想出名字，并且对“设置”这个词犹豫不决。

rails 应用程序主要关注管理交易卡，这些交易卡传统上按版本分组。

但是，我知道 set 一词被用作某些对象的方法名称（iirc，以原子方式将值分配给模型的字段）。

是否可以使用“设置”作为模型名称，或者我应该找到替代方法？有什么我应该注意的碰撞吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:42:15.793

`Set`实际上是[Ruby 的默认类](http://www.ruby-doc.org/stdlib-2.0/libdoc/set/rdoc/Set.html)之一的名称，足够明智地描述 Set。我会避免在此之后命名一个类，因为您将破坏某些库理论上可能会使用的默认 Set 实现。

不过，您仍然可以在 class 上命名方法`set`。我不认为这被任何东西所接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:46:09.993

作为一般经验法则，最好为您的类使用与保留名称或框架中定义的名称不同的名称。一开始它可能工作得很好，但几个月或几年后你可能会遇到问题（由于名称冲突，这将很难调试）并且很难重构你的类。

AMHA，您应该使用其他名称

# matlab - 使用matlab的网格函数

> ID：15445233
> 
> 赞同：0
> 
> 时间：2013-03-16T03:27:40.353
> 
> 标签：matlab

下面的编码是为了解决与热模型解耦的连续性方程我需要根据编码生成冰厚度的 3D 图 h_t=B+(D h_x)_x D=Gam |h_x|^(n-1) h^(n +2)

```
n=3;
L=750000; % meters
dtyear=10;
Nx=30;
type=1;
Mt=ceil(25000/dtyear);
dx=(2*L)/Nx; x=-L:dx:L; % x grid
xmid=-L+dx/2:dx:L-dx/2; % midpt grid
xplot=linspace(-L,L,400); % for plotting analytical soln
iceconstants; %Gam=2*(rho*g)^n*A;
% constants related to grid
dt=dtyear*SperA;
R0=dt/(dx*dx); % presumed related to stability for continuity eqn
Tend=dt*Mt; % final time
t=0:dt:Tend;
% use either steady state analytical soln or zero as initial condition
ic=hexact;
%ic=zeros(1,Nx+1);
% allocate space for solutions
hh=zeros(Nx+1,Mt+1); % hh(j,l) with j for x and l for t
D=zeros(Nx+1,1); %column vector
hh(:,1)=ic'; %insert initial condition
%enforce boundary conditions at start
hh(1,:)=0; hh(Nx+1,:)=0;
D(1)=0; D(Nx+1)=0; % see steady bdry

for l=1:Mt
delh=(hh(2:Nx+1,l)-hh(1:Nx,l))/dx; % Nx by 1 column vector
hav=(hh(2:Nx+1,l)+hh(1:Nx,l))/2; % Nx by 1 col vect
Dmid=(Gam/(n+2))*hav.^(n+2).*abs(delh).^(n-1); % Nx by 1 col vect
F=Dmid.*(hh(2:Nx+1,l)-hh(1:Nx,l));
hh(2:Nx,l+1)=hh(2:Nx,l)+B*dt+R0*(F(2:Nx)-F(1:Nx-1));
end;

tplot=t(tt);
hplot=hh(:,tt);
subplot(3,1,3), mesh(tplot/SperA,x/1000,hplot), view(37.5,30); <--problem in this line 
```

当我运行这个编码时，我得到了这个结果

```
the result shows like this : 

??? Error using ==> mesh at 80
Data dimensions must agree.

Error in ==> iceA at 144
subplot(3,1,3), mesh(tplot/SperA,x/1000,hplot), view(37.5,30); 
```

“数据维度必须一致”是什么意思？如果你能帮助我，我真的很感激：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:36:59.667

错误意味着`tplot`,`x`和`hplot`应该具有相同的维度，即`size()`所有三个的输出应该相同。

如果它们是彼此独立生成的，请注意使网格点的大小与网格值的大小相同，即在矩阵中进行二次采样或索引时。

`X`在分析形成函数时，如下所示，如果和`Y`具有不同的大小，MATLAB 将抛出错误。如果不是，将具有与网格点矩阵和`Z`相同的输出大小。`X``Y`

```
[X,Y] = meshgrid(-5:1:5);
Z = X.^2 + Y.^2;
mesh(X,Y,Z); 
```

# javascript - 在我的第一个 h5 画布游戏上工作，游戏循环有问题（蛇）

> ID：15445237
> 
> 赞同：0
> 
> 时间：2013-03-16T03:28:36.347
> 
> 标签：javascript, html, loops, canvas

所以这就是游戏循环的样子。我只是通过 setInterval() 设置它，它从清除屏幕和绘制 hud 开始。在计算出运动，然后绘制所有内容并检查碰撞（我没有遇到这些问题）之后，我希望一旦玩家输了，他们可以重新开始游戏。

目前它所做的只是调用 window.location.reload() 并返回开始菜单。当玩家撞到墙壁或与自己相撞时，他们就输了。

这是在 checkcollision() 函数中计算的，我尝试了 clearInterval(game); 这几乎行不通。我认为这与 checkcollision() 在游戏循环中有关，并尝试使用一系列返回语句。那没有用，我还尝试将游戏统计数据和功能（分数等）移动到游戏对象中，并尝试通过制作新的游戏对象来重新启动游戏。但所做的只是让它们重叠，即使有相同的参考。

我很困惑，想知道我是否在错误的道路上走得太远了。就像我的意思是它工作正常（在 chome/safari/ff 上，有没有办法让画布与 IE 一起工作？）但我只想获得一个体面的暂停/重启系统。

这是我的代码，但您也可以查看我到目前为止所做的工作并在[此处检查完整代码](http://web.ncf.ca/fw769/Templates/livetesting/snakehtml5.html)

```
var game=setInterval(function(){
                ctx.clearRect(0,0,c.width,c.height);
                if(score>localStorage.highscore){localStorage.highscore=score}
                hud();
                snakeMove();
                draw();
                checkCollision();
                },1000/60); 
```

# google-apps-script - HtmlService 无法从 doPost() 工作 - 需要可编写脚本的异步替代方案

> ID：15445244
> 
> 赞同：0
> 
> 时间：2013-03-16T03:30:26.850
> 
> 标签：google-apps-script

我想使用带有 HtmlService 的 doPost() 作为异步调度程序来调用其他函数。异步功能对性能很重要——不必同步等待电子表格操作完成，这就是 HtmlService 的用途。这是我在代码方面的内容：

```
 function doGet(e) {
      var app = UiApp.createApplication();
  var button = app.createButton('Click Me');
  app.add(button);
  var handler = app.createServerHandler('myClickHandler');
  button.addClickHandler(handler);
  return app;
}

function myClickHandler(){
  sendHttpPostSelf();
}
function doSomething() {
  Logger.log('I was called Now!');
  return;
}
function sendHttpPostSelf() {
  var payload = {
      "name" : "name",
      "comment" : "comment",
      "screenshot" : "screenshot"
  };
  var options = {
      "method" : "post",
      "payload" : payload
    };
var url="https://script.google.com/macros/s/AKfycbzlVoiDQMbLe4yliErDoNub6A0m3tijSfPAUMEBENgIikQnLQ_H/exec";
var resp=UrlFetchApp.fetch(url,options);
Logger.log(resp.getContentText());//.getContent());
} 
function doPost(e){
  var dbg;
  var dbg=true;
  if (dbg==true)for (var i in e.parameter)Logger.log("FormSubmit:doPost "+ i + ": " + e.parameter[i]);
  return HtmlService.createHtmlOutputFromFile("myFile.html");
}

//ANd HERE IS myFile.html
<script>
 function onFailure(error) {
   //alert('Error will Robinson!: '+error.message);
     Logger.log('Error will Robinson!: '+error.message);
  }
  function onSuccess(error) {
    //alert('Gotter Done');
    Logger.log("FormSubmit:doPost",'Gotter Done');
  }
  google.script.run.withSuccessHandler(onSuccess).withFailureHandler(onFailure).doSomething();
</script> 
```

httpPostSelf() 工作正常并且 doPost() 接收参数很好，但我的问题是 HtmlService.createHtmlOutputFromFile("myFile.html") 没有正确调用 doSomething() ？我只在 Logger.log 中看到很多神秘的 caja 解析
*--END OF ORIGINAL QUESTION --*

**问题补充**
亲爱的科里：

感谢您对 doPost() 不处理 HtmlService 和您提出的异步示例的反馈。你是对的，按钮点击事件是异步的..但我的问题仍然没有答案。为了澄清，请允许我进一步详细说明我的问题。我需要做的是对网络应用程序的异步脚本调用（我猜听起来像 AJAX）。除了异步之外，我的示例脚本中的所有内容都有效。然后在我之前的示例中使用替代 URL 来调用单独的 Web 应用程序而不是自发布：

```
var url="https://script.google.com/a/macros/commet.com/s/AKfycbwJ4WM3U5POEWF9XqFzjaV_9TiNLspKb7kePAih59vsWllA0og/exec"; 
```

异步对性能至关重要，因为我有 2000 多行电子表格代码来执行基本的工作表操作：插入、删除、更新、移动、排序……我将脚本很好地打包到带有方法的对象中。sheet ops 脚本目前与 Sites 中的 UiApp 脚本打包在一起，可以同步调用。经过多次痛苦的重写，一些更复杂的操作（排序和移动）仍然需要长达 7 秒才能完成。

我想将工作表操作脚本迁移到电子表格 Web 应用程序。工作表操作/Web 应用程序应该可以从我的站点 UiApp 异步调用。例如，当我的站点调用排序时，它会简单地向 Web 应用程序释放带有参数的 sendHttpPost，然后站点将继续完成其 GUI 业务（在客户端进行排序），而无需等待 7 秒的电子表格完成它的排序。哇啦！

具有正确传递参数的 Web 应用程序在我的示例脚本中工作，但不幸的是 UrlFetchApp.fetch（对我来说）是同步的。这就是我尝试异步 HtmlService-google.script.run 的原因。我尝试使用 HtmlService 作为 Web 应用程序调用 doGet()，但使用 UrlFetchApp.fetch 也不起作用。HtmlService 作为 Web 应用程序工作的唯一方法是从带有表单提交的按钮调用时......我需要一个可编写脚本的界面。

UrlFetchApp.fetch - HtmlService 的任何可编写脚本的替代方案？

**评论 HtmlService Web 应用程序访问**
以下是我的测试结果，当 HtmlService 从 Web 应用程序工作时：
doPost()
- 使用 FormPanel 中的提交按钮提交时
工作 - 使用 UrlFetchApp.fetch 提交时不起作用（脚本访问需要）
评论：任何方式让 doPost() 与 UrlFetchApp.fetch 一起工作对于编程表单来说非常好！

doGet()
- 从浏览器 url
工作 - 使用 UrlFetchApp.fetch 提交时不起作用（需要脚本访问）
如果有任何不准确，请回复脚本示例。我需要的是 UrlFetchApp.fetch 脚本访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:02:38.063

您正在尝试通过 doPost 从 UiApp 联系 HtmlService，但这不起作用。UiApp 的 doPost 只能接受 UiApp 响应，而 HtmlService 甚至不使用 doPost - 它只使用 google.script.run 语法。您看到的是客户端上的 UiApp 代码被 HtmlService 类型的响应完全混淆了。

但是我认为您可能对这两种服务的工作方式感到困惑，因为 UiApp ServerHandler 回调和 HtmlService google.script.run 都异步调用服务器脚本，而无需您执行任何自定义或棘手的操作。无需混合和匹配两者，也无需涉及 doPost - 它专门用于通过 UiApp 上传文件（这就是 HtmlService 不支持它的原因，因为它具有更简单的上传文件语法） .

这是 UiApp 中的异步调度程序：

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.createButton("run foo", app.createServerHandler("foo")));
  app.add(app.createButton("run bar", app.createServerHandler("bar")));
  return app;
}
function foo() { Logger.log("ran foo!");  }
function bar() { Logger.log("ran bar!");  } 
```

在 HtmlService 中也是如此：

```
function doGet() {
  return HtmlService.createHtmlOutput(
      "<button onclick='google.script.run.foo()'>run foo</button>" +
      "<button onclick='google.script.run.bar()'>run bar</button>"); 
}
function foo() { Logger.log("ran foo!");  }
function bar() { Logger.log("ran bar!");  } 
```

要回答下面的评论，在 UiApp 中，您可以通过 addCallbackElement 将值从客户端发送到服务器。在 HtmlService 中，您只需向服务器函数添加参数：

```
function doGet() {
  return HtmlService.createHtmlOutput(
      "<button onclick='var foo = document.getElementById(\'myTextBox\').value; google.script.run.foo(123, foo)'>run foo</button>"
}
function foo(x, y) { Logger.log("ran foo with params " + x + " and + "y");  } 
```

那应该记录“run foo with params 123 and *contents of myTextBox* ”。您应该能够从那里进行概括（我建议您也阅读用户指南。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T16:08:13.850

当您在您制作的 HtmlTemplates 中运行脚本时，它们无权访问 Apps 脚本库（但您可以调用您的 Apps 脚本函数）。例如，您不能`Logger.log()`从您的 Html 页面调用。你应该使用`console.log()`. 这将登录到您的 Web 控制台。（在 Chrome 中是`Ctrl`+ `Shift`+ ）。`J`

# jquery - 使用nestedSortable 使列表折叠问题

> ID：15445249
> 
> 赞同：1
> 
> 时间：2013-03-16T03:31:43.040
> 
> 标签：jquery, html, jquery-ui, nested-sortable

我似乎无法让可折叠部分与[nestedSortable](http://mjsarfatti.com/sandbox/nestedSortable/)一起使用。

[http://jsfiddle.net/meisam/vq9dD/](http://jsfiddle.net/meisam/vq9dD/)

这是我正在使用的javascript：

```
$('ol.sortable').nestedSortable({
    disableNesting: 'no-nest',
    forcePlaceholderSize: true,
    handle: 'div',
    helper: 'clone',
    items: 'li',
    opacity: .6,
    placeholder: 'placeholder',
    revert: 250,
    tabSize: 25,
    tolerance: 'pointer',
    toleranceElement: '> div',
    isTree: true,
    startCollapsed: true,
    update: function () {
        order = $('ol.sortable').nestedSortable('serialize');
        console.log(order); 
    }
});

$('.disclose').on('click', function() {
    $(this).closest('li').toggleClass('mjs-nestedSortable-collapsed').toggleClass('mjs-nestedSortable-expanded');
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:46:11.803

您使用的插件版本不工作。我升级了插件并将可折叠代码更改为以下内容：

```
$('.mjs-nestedSortable-collapsed').on('click', function () {
    $(this).toggleClass('mjs-nestedSortable-collapsed').toggleClass('mjs-nestedSortable-expanded');
}); 
```

[在这里](http://jsfiddle.net/vq9dD/2/)提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T06:42:53.270

新嵌套的展开/折叠按钮（如果我单击并将一行拖到另一行下）不起作用。只有那些在负载上显示的工作。

# java - 如何检索联系人的电话号码（Android）？

> ID：15445258
> 
> 赞同：1
> 
> 时间：2013-03-16T03:33:15.800
> 
> 标签：java, android, android-contacts

让我的联系人活动正常工作是我的噩梦——我知道这是一个常见问题，但我似乎无法将现有的解决方案应用于我的代码——我只是无法理解这一点。任何帮助将不胜感激，我在这里扯头发。

```
public class nominateContactsActivity extends ListActivity {
public String strName;
public String strLoginCode;
public String strTelNo;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.nominatecontactsactivitytest);

    this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);
    startManagingCursor(cursor);
    String[] contacts = new String[] {ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone.NUMBER};       
    String[] columns = new String[] { ContactsContract.Contacts.DISPLAY_NAME};
    int[] to = new int[] { android.R.id.text1 };

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
            android.R.layout.simple_list_item_multiple_choice, cursor, columns, to);
    this.setListAdapter(adapter);

    Button finishButton = (Button) this.findViewById(R.id.finishButton);
    finishButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            SimpleCursorAdapter adapter = (SimpleCursorAdapter) nominateContactsActivity.this.getListAdapter();
            Cursor cursor = adapter.getCursor();

            ListView lv = nominateContactsActivity.this.getListView();
            SparseBooleanArray selectedItems = lv.getCheckedItemPositions();
            for (int i = 0; i < selectedItems.size(); i++) {

                int selectedPosition = selectedItems.keyAt(i);
                cursor.moveToPosition(selectedPosition);
                Log.d("", cursor.getString(cursor.getColumnIndex(
                        ContactsContract.Contacts.DISPLAY_NAME))+" is checked");
                Log.d("", "row id: "+adapter.getItemId(selectedPosition));
                                }
        }
    }); 
```

我正在使用上面的代码返回联系人列表 - 这工作正常，在列表视图中显示联系人的姓名，如我所愿。但是，没有检索到电话号码，我只是不知道如何获取它们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:49:30.110

以下是读取您可以尝试的所有联系电话和姓名的代码。

> ```
>  Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
>    while (phones.moveToNext())
>     {
>       String name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
>       String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
>    }
>     phones.close(); 
> ```

# javascript - 固定长度的Javascript画布曲线

> ID：15445260
> 
> 赞同：6
> 
> 时间：2013-03-16T03:33:38.670
> 
> 标签：javascript, math, curve

我想绘制任何（随机）曲线，给定：

*   起点
*   终点
*   曲线长度

我怎么能做这种受画布边界限制的事情，加上曲线不能交叉。我试图找到一些解决方案，但我无法弄清楚。谢谢你的时间。

这是我想要完成的更详细的视图：

这是画在画布上的二次曲线。一切安好。问题是，如何在没有所有点的情况下绘制这个，只需以像素为单位的固定长度、随机点、受画布大小和不交叉的限制。

![在此处输入图像描述](../Images/3ddd898603344560529e10ee268b25eb.png)

代码可能如下所示：

```
function fixedCurve( A, B, length ){
    for(int i = A; i < B; i++){
        //Calculate random point with propper distance to get first base point, random direction could be calculated before loop.
        //Basicly this loop should calculate integrate of the curve and draw it each step.
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:54:35.537

试试这个（[小提琴](http://jsfiddle.net/naeL4/)）：

```
function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');

  ctx.fillStyle = "red";

  ctx.beginPath();
  var start = [20, 100];
  var end = [120, 100];
  var above = Math.random()*80+20;
  // find the mid point between the ends, and subtract distance above
  //   from y value (y increases downwards);
  var control = [0.5*(start[0]+end[0]), 0.5*(start[1]+end[1])-above];    
  ctx.moveTo(start[0], start[1]);

  ctx.quadraticCurveTo(control[0], control[1], end[0], end[1]); 
  ctx.stroke();
}

draw(); 
```

这是`quadraticCurveTo`用于绘制二次曲线，给定两个点并计算曲线中点上方 20 到 100 个像素的随机控制点。

* * *

如果您希望二次方具有特定的弧长（听起来您可能从问题中），那么我们可以[做一些数学运算](http://en.wikipedia.org/wiki/Curve_length)。二次（抛物线）的弧长为：

![x 的函数的弧长的一般积分关系](../Images/ac815b395e83b67574fc23ed0bb1d440.png)

我们有方程，所以求导数：

![二次导数](../Images/fc8e8e76e0c3ebd3c58a70ecb91f3513.png)

因此，如果我们将其定义为 u(x)，[Wolfram alpha 会给出](http://www.wolframalpha.com/input/?i=integrate+sqrt%281%2B%28u%29%5E2%29)：

![解决方案](../Images/c1f724101023dd88deb305033bf5d9bc.png)

所以对于一个特定的 x1 和 x2，我们可以计算出 u(x) 的等价值，然后是积分。

[如您在本教程页面](http://www.purplemath.com/modules/sqrvertx.htm)上所见，使用控制点绘制一般二次方程涉及将方程转换为顶点形式。明智的做法是从该方程式开始重复数学运算，并以正确的术语为“ u”获得一个新的方程式。

# php - 如何使用 php 正确解码亚洲字符

> ID：15445264
> 
> 赞同：0
> 
> 时间：2013-03-16T03:34:26.817
> 
> 标签：php, decode, encode

```
<?php

include('simple_html_dom.php');

$test = file_get_contents('http://translate.google.com/?langpair=en|ja&text=math');
//echo $test;

$URL = "http://translate.google.com/?langpair=en|ja&text=math";
$html = file_get_html($URL);

foreach($html->find('span.short_text') as $e)
echo  $e->innertext;

?> 
```

我正在尝试从谷歌翻译中抓取日文汉字并让亚洲字符正确显示，但我遇到了问题。照原样，此代码打印“Šw。当我取消注释“echo $test”时，它会打印正确的字符，数学（以及之前的一堆其他东西）。我尝试过编码/解码、htmlspecial 字符等。但这些都不起作用。我的第二个问题是，当我从计算机手动写入文本文件并尝试从我的 iPhone 中查看该文本时，它显示得很奇怪，这很奇怪，因为我知道 iPhone 可以很好地读取日文字符。我在chrome上，但知道我在firefox上。

我也可以让它输出字符为：%C3%A6%E2%80%A2%C2%B0%C3%A5%C2%AD%C2%A6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:19:20.230

您必须更改字符串的编码

```
mb_convert_encoding ( $str_to_conver , $to_encoding , $from_encoding ] ) 
```

将 str 的字符编码从可选的 from_encoding 转换为 to_encoding。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T16:39:42.657

这为我显示了编码的亚洲字符......

```
$url = html_entity_decode($string,ENT_COMPAT,"UTF-8"); 
```

# r - 无法在 x 轴上放置日期

> ID：15445267
> 
> 赞同：1
> 
> 时间：2013-03-16T03:35:17.337
> 
> 标签：r, plot

我的系列包括 755 个值。我试图通过使用轴和序列来定义刻度来在 x 轴上绘制日期。但问题是标签的长度不等于 H2S.time，所以没有绘制轴。如何以时尚的方式在轴上绘制日期？系列 H2S.time 包括以字符串形式存储的从 2/10/2011 到 3/5/2013 的 755 个日期。

```
#Import H2S Series
H2S.time<-read.table("H2S-time.txt")[1:755,1]
H2S.ts<-read.table("H2S.txt")[1:755,1]
H2S.time <- as.Date(H2S.time, format="%m/%d/%Y") 
plot(H2S.ts,col="blue",xlab="Day",)
axis(side=1, at=seq(1,755,by=20), labels=strftime(H2S.time, format="%d-%m-%Y"),cex.axis=0.8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:10:11.153

获取标签的子集：

```
plot(H2S.ts,col="blue",xlab="Day",xaxt='n') #no x-axis
axis(side=1, at=seq(1,755,by=20), labels=strftime(H2S.time, 
    format="%d-%m-%Y")[seq(1,755,by=20)],cex.axis=0.8) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:09:02.847

该`axis()`函数不是通用的，但有用于绘制时间相关数据的特殊替代函数。函数`axis.Date()`并 `axis.POSIXct()`获取包含日期的对象并生成带有适当标签的轴。这里有两个例子是在相应函数的帮助下改编的：

![在此处输入图像描述](../Images/588c95d531f5be71fcfe64bb3e800348.png)

```
## example with axis.Date
layout(matrix(c(1,2),nrow=2,byrow=TRUE))
random.dates <- as.Date("2001/1/1") + 70*sort(stats::runif(100))
plot(random.dates, 1:100, xaxt="n",main='pretty axes dates')
axis.Date(1, at=seq(as.Date("2001/1/1"), max(random.dates)+6, "weeks"))
### example with axis.POSIXct
with(beaver1, {
  time <- strptime(paste(1990, day, time %/% 100, time %% 100),
                   "%Y %j %H %M")
  # now label every hour on the time axis
  plot(time, temp, type="l", xaxt="n",main='pretty axes times')
  r <- as.POSIXct(round(range(time), "hours"))
  axis.POSIXct(1, at=seq(r[1], r[2], by="hour"), format="%H:%M")
}) 
```

# sublimetext2 - 如何制作一个底部有自定义显示区域的 Sublime Text 2 插件，比如控制台？

> ID：15445269
> 
> 赞同：9
> 
> 时间：2013-03-16T03:36:00.150
> 
> 标签：sublimetext2, sublimetext

我希望制作一个 Sublime Text 2 插件，它将在屏幕底部的一个区域中显示信息，就像控制台一样。但是在这个区域，我希望从我的插件中显示我自己的文本，与控制台无关。

这是打开控制台的窗口的屏幕截图。

![在此处输入图像描述](../Images/74c1b1f13546d7faf67b3a8dc4dd465b.png)

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-16T04:24:19.003

基本上，你需要的是

1.  创建输出面板：`self.window.get_output_panel("textarea")`
2.  显示此面板：`self.window.run_command("show_panel", {"panel": "output.textarea"})`

一个简单的例子如下所示。您可以参考默认包中的 exec 命令：`C:\Users\lhuang\AppData\Roaming\Sublime Text 2\Packages\Default\exec.py`.

```
class ShowTextAreaCommand(sublime_plugin.WindowCommand):
    def run(self):
        self.output_view = self.window.get_output_panel("textarea")
        self.window.run_command("show_panel", {"panel": "output.textarea"})

        self.output_view.set_read_only(False)
        edit = self.output_view.begin_edit()
        self.output_view.insert(edit, self.output_view.size(), "Hello, World!")
        self.output_view.end_edit(edit)
        self.output_view.set_read_only(True) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-22T06:32:56.827

而且，如果您要使用 Sublime Text 3，则 begin_edit() 和 end_edit() 已[贬值](http://www.sublimetext.com/docs/3/porting_guide.html)：

```
class ShowTextAreaCommand(sublime_plugin.WindowCommand):
    def run(self):
        self.output_view = self.window.get_output_panel("textarea")
        self.window.run_command("show_panel", {"panel": "output.textarea"})

        self.output_view.set_read_only(False)
        # edit = self.output_view.begin_edit()
        # self.output_view.insert(edit, self.output_view.size(), "Hello, World!")
        self.output_view.run_command("append", {"characters": "Hello, World!"})
        # self.output_view.end_edit(edit)
        self.output_view.set_read_only(True) 
```

# wpf - 将 MainWindow.Background 设置为外部资源

> ID：15445283
> 
> 赞同：1
> 
> 时间：2013-03-16T03:38:55.553
> 
> 标签：wpf, styles, themes, resourcedictionary, skinning

我有一个包含主题“引擎”的 .dll。我几乎用一个内置的组合框完成了这个引擎，该组合框处理通过 .dll 切换主题。简而言之，我想要完成的是一个独立的 .dll，我可以从任何项目中引用它并且（无需向托管应用程序添加任何代码）拥有我的主题、样式等......

到目前为止，这是可行的，但我遇到了一点困境。由于 .dll 在运行时使用 URI 语法加载必要的 xaml 文件，因此托管应用程序控件本身在加载应用程序之前不知道资源。现在这会生成一个编译时警告，但在运行应用程序时没有问题。

我的问题与这个编译时问题有关。如果在运行时之前无法查看 .dll 中可用的画笔，如何设置主窗口的背景颜色？

```
<Window x:Class="Check.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mycon="clr-namespace:ThemeLibrary.MyControls;assembly=ThemeLibrary"
    Title="MainWindow" Height="350" Width="525" WindowStyle="None" AllowsTransparency="True" 
Background="{***DynamicResource ResourceKey=TransparentColorBrush***}"> 
```

同样，尽管存在错误，但程序编译并运行良好，因为如果无法解析动态资源，则窗口只是默认设置，但是一旦 .dll 加载包含其键为 TransparentColorBrush 的画笔的资源字典，则窗口背景适当改变。但是，如果我将我的 .dll 交给公众玩，他们将不知道不同的刷子键是什么，因此将无法进行此 hack。

那么，如何在 .dll 中设置 Application.Current.MainWindow.Background =（来自 URI 加载的资源字典或字典本身的画笔），或者将画笔的键公开为公共属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:33:06.233

好的，这就是我发现的...

在我的 .dll 中，我可以通过简单地使用以下语法为应用程序窗口设置以下属性...

```
Application.Current.MainWindow.SetResourceReference(Window.BackgroundProperty, "MainWindowBackgroundBrush");
        Application.Current.MainWindow.SetResourceReference(Window.BorderBrushProperty, "BorderBrush");
        Application.Current.MainWindow.SetResourceReference(Window.BorderThicknessProperty, "MainBorderThickness");
        Application.Current.MainWindow.SetResourceReference(Window.AllowsTransparencyProperty, "MainAllowsTransparency"); 
```

在我创建的静态类中，以帮助控制皮肤变化的交互。我还声明了一个新的资源字典，如下所示：

```
xmlns:s="clr-namespace:System;assembly=mscorlib"
<Thickness x:Key="MainBorderThickness" >2</Thickness>
<s:Boolean x:Key="MainAllowsTransparency">True</s:Boolean> 
```

我超级兴奋！！！这正是我一直在寻找的。因此，现在我的自定义皮肤和将它们从一种更改为另一种的机制都封装在一个 .dll 中，该 dll 可以处理与皮肤有关的所有事情，而无需向托管应用程序添加单个代码字符。现在每个 File>New 都可以简单地有一个程序集引用和 xmlns 命名空间，并且 POOF 我所有的皮肤都可用。

# php - 如何在 PHP 中使用 cURL 连接到 Tor 隐藏服务？

> ID：15445285
> 
> 赞同：424
> 
> 时间：2013-03-16T03:39:25.977
> 
> 标签：php, curl, proxy, tor

我正在尝试使用以下 PHP 代码连接到 Tor 隐藏服务：

```
$url = 'http://jhiwjjlqpyawmpjx.onion/'
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_PROXY, "http://127.0.0.1:9050/");
curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
$output = curl_exec($ch);
$curl_error = curl_error($ch);
curl_close($ch);

print_r($output);
print_r($curl_error); 
```

当我运行它时，我收到以下错误：

> 无法解析主机名

但是，当我在 Ubuntu 的命令行中运行以下命令时：

```
curl -v --socks5-hostname localhost:9050 http://jhiwjjlqpyawmpjx.onion 
```

我得到了预期的回应。

PHP [cURL](http://en.wikipedia.org/wiki/CURL)文档是这样说的：

```
--socks5-hostname
Use  the  specified  SOCKS5 proxy (and let the proxy resolve the host name). 
```

我相信它从命令行运行的原因是因为 Tor（代理）正在解析它识别的 .onion 主机名。运行上面的 PHP 代码时，我的猜测是 cURL 或 PHP 正在尝试解析 .onion 主机名并且无法识别它。我已经寻找一种方法来告诉 cURL/PHP 让代理解析主机名，但我找不到方法。

有一个非常相似的 Stack Overflow 问题，*[使用 socks5 代理的 cURL 请求在使用 PHP 时失败，但它可以通过命令行工作](https://stackoverflow.com/questions/14944067)*。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-08-17T22:42:51.300

您需要将选项设置`CURLOPT_PROXYTYPE`为[`CURLPROXY_SOCKS5_HOSTNAME`](https://www.php.net/manual/en/curl.constants.php)，遗憾[的是在旧 PHP 版本中没有定义，大约在 5.6 之前](https://bugs.php.net/bug.php?id=69950)；如果您之前有，但您可以显式使用它的值，它等于`7`：

```
curl_setopt($ch, CURLOPT_PROXYTYPE, 7); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-27T00:19:38.583

我使用[Privoxy](https://en.wikipedia.org/wiki/Privoxy)和 cURL 来抓取 Tor 页面：

```
<?php
    $ch = curl_init('http://jhiwjjlqpyawmpjx.onion'); // Tormail URL
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 1);
    curl_setopt($ch, CURLOPT_PROXY, "localhost:8118"); // Default privoxy port
    curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_HTTP);
    curl_exec($ch);
    curl_close($ch);
?> 
```

安装 Privoxy 后，您需要将此行添加到配置文件 ( `/etc/privoxy/config`)。注意空格和'.' a 行尾。

```
forward-socks4a / localhost:9050 . 
```

然后重新启动 Privoxy。

```
/etc/init.d/privoxy restart 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-04T19:04:42.320

尝试添加这个：

```
curl_setopt($ch, CURLOPT_HEADER, 1); 
curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, 1); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-03-30T23:21:34.837

TL;DR：如果您有现代 PHP，则设置`CURLOPT_PROXYTYPE`为使用，否则设置该值，和/或更正该值。`CURLPROXY_SOCKS5_HOSTNAME``7``CURLOPT_PROXY`

正如您正确推断的那样，您无法`.onion`通过正常的 DNS 系统解析域，因为这是[一个保留的顶级域，专门供 Tor 使用，](https://en.wikipedia.org/wiki/.onion)并且此类域在设计上没有可映射的 IP 地址。

使用`CURLPROXY_SOCKS5`将指示 cURL 命令将其流量发送到代理，但*不会*对域名解析执行相同操作。*在 cURL 尝试与 Onion 站点建立实际连接之前*发出的 DNS 请求仍将发送到系统的正常 DNS 解析器。这些 DNS 请求肯定会失败，因为系统的普通 DNS 解析器不知道如何`.onion`处理地址，除非它也专门将此类查询转发给 Tor。

而不是`CURLPROXY_SOCKS5`，您必须使用[`CURLPROXY_SOCKS5_HOSTNAME`](https://curl.haxx.se/libcurl/c/CURLOPT_PROXYTYPE.html). 或者，您也可以使用`CURLPROXY_SOCKS4A`，但更喜欢 SOCKS5。这些代理类型中的任何一种都会通知 cURL 执行其 DNS 查找和通过代理进行的实际数据传输。这是成功解析任何`.onion`域所必需的。

原始问题的代码中还有两个额外的错误尚未被先前的评论者纠正。这些是：

*   第 1 行末尾缺少分号。
*   代理地址值设置为 HTTP URL，但其类型为 SOCKS；这些是不相容的。对于 SOCKS 代理，该值必须是 IP 或域名和端口号组合，没有方案/协议/前缀。

这是完整的正确代码，并带有注释以指示更改。

```
<?php
$url = 'http://jhiwjjlqpyawmpjx.onion/'; // Note the addition of a semicolon.
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_PROXY, "127.0.0.1:9050"); // Note the address here is just `IP:port`, not an HTTP URL.
curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5_HOSTNAME); // Note use of `CURLPROXY_SOCKS5_HOSTNAME`.
$output = curl_exec($ch);
$curl_error = curl_error($ch);
curl_close($ch);

print_r($output);
print_r($curl_error); 
```

您还可以`CURLOPT_PROXYTYPE`通过更改`CURLOPT_PROXY`值以包含`socks5h://`前缀来完全省略设置：

```
// Note no trailing slash, as this is a SOCKS address, not an HTTP URL.
curl_setopt(CURLOPT_PROXY, 'socks5h://127.0.0.1:9050'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-24T06:04:23.727

这是一个简单的功能来帮助你。首先要节省时间，您需要确保通过 fsocketopen() 进行简单检查来检查代理是否有效

```
 try {
            $fp = fsockopen($ip, $port, $errno, $errstr, 10);
            fclose($fp);
            return true;
        } catch (\Throwable $th) {
            return false;
        } 
```

如果套接字返回 true，则使用 requestUrl 函数

```
 private function requestUrl($url, $proxy)
    {
        $curl = curl_init();
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_PROXY, $proxy);
        curl_setopt($curl, CURLOPT_HEADER, 1); 
        curl_setopt($curl, CURLOPT_HTTPPROXYTUNNEL, 1); 
        curl_setopt($curl, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
        curl_setopt($curl, CURLOPT_TIMEOUT, 10);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE);
        curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE);
        $contents = curl_exec($curl);
        //Check for errors.
        // if (curl_errno($curl)) {
        //     return new \Exception(curl_error($curl));
        // }
        curl_close($curl);
        return $contents;
    } 
```

# java - 将 twitter 流 API 集成到 Java Web 应用程序中

> ID：15445286
> 
> 赞同：0
> 
> 时间：2013-03-16T03:39:28.043
> 
> 标签：java, twitter, jboss

我在 jboss 上部署了一个 java web 应用程序，这是一个生成和使用 json 数据的 war 文件。我想将 twitter 集成到应用程序中，它只需要使用来自 twitter 的数据，所以我认为最好的方法是创建一个 twitter 帐户并使用流 api 来使用数据。

我喜欢[twitter4j](http://twitter4j.org/en/index.html)的外观。

我应该如何构建这个？它应该作为我现有 webapp 的一部分并在我部署我的时启动它，`war`还是将其`ear`添加为 ejb 服务更合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:51:18.257

如果您可以利用 EJB 的优势，那么使用 EJB 是有意义的：支持自动管理的事务、集群、线程安全等。在“典型”Web 应用程序的情况下，这通常是多余的。

所以我会使用普通的 Web 应用程序，如果你想要更简单的数据库集成，你可以使用 Spring Framework 中的 db stack。

另一方面，如果您在兼容 Java EE 6 的服务器上工作，您可能会在 WAR 中打包 EJB 或使用 CDI bean 以使应用程序尽可能轻量级。

# javascript - 使用 KnockoutJS 捕获所有图像已加载（并执行某些操作）

> ID：15445287
> 
> 赞同：5
> 
> 时间：2013-03-16T03:39:28.003
> 
> 标签：javascript, knockout.js, jquery-deferred

我目前有一个基本实现，可以捕获所有图像何时加载，但我对代码、可伸缩性以及 UI 和 viewModel 之间的紧密耦合不满意。

我在 viewModel 和 bindingHandler 之外声明了一系列承诺，以便每个人都可以访问它。bindingHandler 会将每个未解析的 promise 推送到数组中，并且 init 函数将等待数组接收到所有已解析的 promise。一旦发生这种情况，就会调用一个为所有图像设置统一高度的函数。

这是用户界面：

```
<ul data-bind="foreach: movies">
    <li>
        <div class="image">
            <img data-bind="imageLoad: { src: posters.Detailed, alt: title }"/>
        </div>
    </li>
</ul> 
```

另一边：

```
function ViewModel() {
    var self = this;
    self.movies = ko.observableArray([]);

    self.init = function(data) {
        self.isLoading(true);

        self.movies = ko.utils.arrayMap(data, function(item) {
            return new robot.ko.models.Movie(item);
        });

        $.when.apply($, promises).done(function () {
            robot.utils.setThumbnailHeight($('.thumbnails li'), function () {
                self.isLoading(false);
            });
        });
    };
}

ko.bindingHandlers.imageLoad = {
    init: function(element, valueAccessor) {
        var options = valueAccessor() || {};
        var promise = $.Deferred();

        var loadHandler = function() { return promise.resolve; };
        promises.push(promise);

        ko.applyBindingsToNode(element, {
            event: { load: loadHandler },
            attr: { src: options.src, alt: options.alt }
        });     
    }
} 
```

在一个完美的世界中，我的 viewModel 只会将回调传递给我的 bindingHandler，但它会是动态的，它不需要了解有关 UI 的任何信息，并且 bindingHandler 将能够确定它需要调整哪个元素。我玩弄了某种 deferredObservable 的想法，但最后我只是不高兴在 viewModel 中有这个。我还考虑过`data-`在父元素上使用属性来知道实际设置高度的元素，但这似乎很草率。

我觉得我错过了什么。

**所以，我在问，有什么更好的方法来实现这一点，它允许松散耦合和可伸缩性，这样我就不必从我的 viewModel 中专门告诉 UI 做什么（尽可能多地）以及何时做什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:08:41.803

在处理它的 foreach 范围内使用自定义绑定。例如：

```
<ul data-bind="foreach: movies, uniformHeight: movies">
    <li>
        <div class="image">
            <img data-bind="imageLoad: { src: posters.Detailed, alt: title }"/>
        </div>
    </li>
</ul> 
```

### 基于数据的方法

根据 ViewModel 的形状做出假设 - 具体来说，假设 Promise 的状态反映了加载图像的实际状态。bindingHandler 可能看起来像这样：

```
ko.bindingHandlers.uniformHeight = {
  init: function(element, valueAccessor) {
      //assume valueAccessor contains an array of promises
      $.when.apply($, valueAccessor()()).done(function () {
            robot.utils.setThumbnailHeight($(element).find('.thumbnails li'), function () {
                self.isLoading(false);
            });
      });
  }
}; 
```

这可能需要围绕您如何处理逻辑进行更多的重组，`robot.ko.models.Movie`但根据您发布的内容，没有什么大不了的。

### 基于资源的方法

需要更多管道，但最终可能会更可靠。

您的外部`uniformHeight`绑定可以在 上注册`bindingContext`并等待子`imageLoad`绑定每次引发事件以通知图像已加载；当他们回来时积累高度，也许会反弹。

# c++ - 使用访问插件中的全局变量的宏

> ID：15445290
> 
> 赞同：0
> 
> 时间：2013-03-16T03:40:20.130
> 
> 标签：c++, macros, shared-libraries, extern

我正在编写一组库，其中一个充当**核心组件**，通过**插件**API 后期绑定其他组件。现在问题如下：

核心库包含一个日志类以及一组用于轻量级日志的宏。

```
/* File: Log.h */

namespace XYZ
{
    class XYZ_API Log
    {
        /* Logfile and console output management */
    };

    // Global log object
    extern XYZ_API Log logger;

    // Macros using aforementioned variable
    #ifndef XYZ_DISABLE_LOGGING
        #define LOG_DEBUG(msg) /* statements using logger object */
        #define LOG_INFO(msg) /* etc. */
    #else
        #define LOG_DEBUG(msg)
        #define LOG_INFO(msg)
    #endif
} 
```

logger 变量的定义非常简单：

```
/* File: Log.cpp */

namespace XYZ
{
    // Initialize the global log object
    Log logger;

    /* Log class implementation */
} 
```

现在，当从核心库本身或客户端应用程序中使用这些宏时，一切正常。但是一旦我尝试在其中一个插件中使用它们：

```
/* File: MyPlugin.cpp */

namespace XYZ
{
    MyPlugin::MyPlugin(/* ... */)
    {
        LOG_INFO("This won't link!");
        logger.
    }
} 
```

出现以下链接器错误（使用 MSVC 工具链 v110）：

```
LNK2001: unresolved external symbol "class XYZ::Log XYZ::logger" (?logger@XYZ@@3VLog@1@A) 
```

话虽如此，这个符号肯定是从插件库中导出的（它存在于 .lib 文件中）。该插件也被链接到核心库。其他符号（类及其方法）工作得很好。

我知道对于运行时加载，必须使用 GetProcAddress/dlsym（或其他等效项）查询加载的 DLL 中的符号。此外，我有一个接口，它可以通过一个纯虚拟类，使插件知道核心库中的任何对象。

现在是**实际问题**：有没有办法使上述计划生效，还是我必须避免在插件代码中使用日志记录宏？

**编辑：**

编译器命令行选项（核心库）是（去掉冗长的路径名）：

```
/GS /analyze- /W3 /Zc:wchar_t /I"[...]" /ZI /Gm /Od /Fd"[...]" /fp:precise /D "XYZ_EXPORT_SYMBOLS" /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D "_USRDLL" /D "_WINDLL" /D "_UNICODE" /D "UNICODE" /errorReport:prompt /WX- /Zc:forScope /RTC1 /Gd /Oy- /MDd /Fa"[...]" /EHsc /nologo /Fo"[...]" /Fp"[...]" 
```

对于链接器：

```
/OUT:"[...]" /MANIFEST /NXCOMPAT /PDB:"[...]" /DYNAMICBASE "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" /IMPLIB:"[...]" /DEBUG /DLL /MACHINE:X86 /INCREMENTAL /PGD:"[...]" /SUBSYSTEM:WINDOWS /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /ManifestFile:"[...]" /ERRORREPORT:PROMPT /NOLOGO /TLBID:1 
```

插件库也是如此；几乎完全相同的行，除了路径名：

```
/GS /analyze- /W3 /Zc:wchar_t /I"[...]" /ZI /Gm /Od /Fd"[...]" /fp:precise /D "XYZ_EXPORT_SYMBOLS" /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D "_USRDLL" /D "_WINDLL" /D "_UNICODE" /D "UNICODE" /errorReport:prompt /WX- /Zc:forScope /RTC1 /Gd /Oy- /MDd /Fa"[...]" /EHsc /nologo /Fo"[...]" /Fp"[...]" 
```

和插件链接；同样，除了指向核心库的链接之外，基本上是同一行：

```
/OUT:"[...]" /MANIFEST /NXCOMPAT /PDB:"[...]" /DYNAMICBASE "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" "[path to core lib]" /IMPLIB:"[...]" /DEBUG /DLL /MACHINE:X86 /INCREMENTAL /PGD:"[...]" /SUBSYSTEM:WINDOWS /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /ManifestFile:"[...]" /ERRORREPORT:PROMPT /NOLOGO /TLBID:1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:00:28.440

听起来你有一个循环依赖问题。我已经尝试复制您的问题，但是我在 Linux 中运行，它对我来说并没有失败。

我假设您正在为 Windows 编写，回复：LNK2001 错误。搜索该错误会提供微软帮助页面。他们可能应该有所帮助。

也就是说，您将编译标志设置为什么（编译器和链接器）？

# ms-access - MS Access 语法错误（缺少运算符）

> ID：15445296
> 
> 赞同：0
> 
> 时间：2013-03-16T03:41:47.050
> 
> 标签：ms-access

我正在使用以下代码从访问数据库中获取记录。现在我在查询表达式中收到以下错误语法错误（缺少运算符）。我无法理解这个问题。请帮我解决这个问题。

```
cmd = new OleDbCommand(@"Select * from tbl_men_schedule where fld_mem_id=" + 0 + " and  fld_startdate=" + Convert.ToDateTime(txt_startDate.Text) + " and fld_enddate=" + Convert.ToDateTime(txt_enddate.Text) + "", con);
 da = new OleDbDataAdapter(cmd);
 DataSet ds = new DataSet();
 da.Fill(ds);

Syntax error (missing operator) in query expression 'fld_mem_id=0 and  fld_startdate=1/4/2013 12:00:00 AM and fld_enddate=4/11/2013 12:00:00 AM'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:25:59.420

如果`fld_startdate`和是日期/时间数据类型，请用分隔符`fld_enddate`将这些日期值括起来。`#`

```
where
        fld_mem_id=0
    and fld_startdate=#1/4/2013 12:00:00 AM#
    and fld_enddate=#4/11/2013 12:00:00 AM# 
```

如果它们是文本数据类型，请用引号将它们括起来。

```
where
        fld_mem_id=0
    and fld_startdate='1/4/2013 12:00:00 AM'
    and fld_enddate='4/11/2013 12:00:00 AM' 
```

但是，如果您改用参数查询，则无需分隔这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:45:21.827

你的陈述应该是——

```
"Select * from tbl_men_schedule where fld_mem_id=" + 0 + " and  fld_startdate='" + Convert.ToDateTime(txt_startDate.Text) + "' and fld_enddate='" + Convert.ToDateTime(txt_enddate.Text) + "'" 
```

希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:52:52.130

如果您对“0”进行硬编码...并且您缺少单引号。

```
"Select * from tbl_men_schedule where fld_mem_id=0 and fld_startdate='" + 
txt_startDate.Text + "' and fld_enddate='" + 
txt_enddate.Text + "'" 
```

# java - 使用 java notes api 无法打开数据库

> ID：15445297
> 
> 赞同：3
> 
> 时间：2013-03-16T03:42:15.430
> 
> 标签：java, lotus-notes

我正在尝试使用 Java 程序在本地控制我的 Lotus Notes 以自动为我发送电子邮件。我在尝试获取数据库对象时遇到了以下问题。

```
try {
    NotesThread.sinitThread();
    Session s = NotesFactory.createSession();
    Database db = s.getDatabase("", "mail/xxxx.nsf")
} finally {
    NotesThread.stermThread();
} 
```

我得到以下异常：

```
NotesException: Database open failed (%1)
   at lotus.domino.local.Database.Nopen(Native Method)
   at lotus.domino.local.Database.open(Unknown Source) 
```

我已将我的 nsf 文件和 Notes.jar 复制到我的类路径中，有人知道这是什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T20:24:44.253

有几件事要检查。

第一个变化：

```
Session s = NotesFactory.createSession(); 
```

到：

```
Session s = NotesFactory.createSession((String) null, (String) null, password); 
```

如果仍然无法正常工作，请更改：

```
Database db = s.getDatabase("", "mail/xxxx.nsf") 
```

到：

```
Database db = s.getDatabase((String) null, "mail/xxxx.nsf") 
```

我还建议养成回收 Domino 对象的习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:54:27.187

您不需要关闭 Lotus Notes。您正在使用的类不驱动 Notes UI。它们与“后端”存储对象一起工作。他们正在使用 Note C API 来解决任何锁定问题。

运行 NotesFactory.createSession 时是否提示您输入用户名和密码？

您提到您将 NSF 文件复制到您的类路径中。为什么？？Lotus Notes 类通常应该在 Notes 数据根目录中查找 NSF 文件，该目录由您的 Notes 客户端安装创建。因此，您的 NSF 文件应该位于 Program Files (x86)\IBM\Lotus\Notes\Data\Mail\xxxx.NSF 之类的文件中。

# php - 当被多个用户访问时，php如何处理“需要”的文件？

> ID：15445301
> 
> 赞同：-1
> 
> 时间：2013-03-16T03:43:39.340
> 
> 标签：php, require, require-once

伙计们，如果我需要一个 php 脚本中的文件，并且它是一个有效文件，那么这个文件是否会只包含一次，无论用户访问该脚本多少次，还是只包含每次访问，但这似乎是一种资源浪费？顺便说一句，如果这很重要，我使用 apache2 作为服务器。而且，既然有require_once，为什么还要存在require呢？由于 require_once 已经完成了 require 的工作并且不会被重新包含。这是否有充分的理由，我的意思是在什么情况下需要比 require_once 更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:47:50.347

为了更好地理解，请阅读这些

require_once 语句与 require 相同，只是 PHP 会检查文件是否已被包含，如果是，则不再包含（要求）它。

[http://php.net/manual/en/function.require-once.php](http://php.net/manual/en/function.require-once.php)

Require 与 include 相同，但失败时也会产生致命的 E_COMPILE_ERROR 级别错误。换句话说，它将停止脚本，而 include 只发出一个警告（E_WARNING），允许脚本继续。

[http://www.php.net/manual/en/function.require.php](http://www.php.net/manual/en/function.require.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:56:31.590

简短的回答：将 PHP 脚本视为一个程序。每次用户访问它时都会运行您的脚本，并且每次都会加载任何包含或需要（ed）的文件。

因此，如果 100 个用户同时访问您的 PHP 页面并且该页面需要另一个脚本，那么这个另一个脚本将被加载 100 次（很可能来自磁盘缓存，所以还不错）。

至于require和require_once的区别，RTM。短版：require_once 将确保特定文件在脚本的生命周期内只被 require(d) 一次（这对于防止包含循环最有用），而 require 将允许您在以下位置包含相同的代码片段脚本中的多个位置（例如，在页面顶部和底部添加相同的广告横幅）。

有缓存机制（如[memcached](http://memcached.org/)）可以帮助减少资源的浪费（但不是以您对问题的期望的方式）。

# php - 不确定我是否正确地防止了 mysql db 上的重复数据

> ID：15445303
> 
> 赞同：0
> 
> 时间：2013-03-16T03:44:09.373
> 
> 标签：php, mysql

谁能告诉我在页面加载后如何防止 MYSQL 上的重复数据的最简单和最有用的方法，我们尝试刷新页面......

实际上，我有一个想法，即在插入部分完成后立即使用 header() 函数将另一个文件重定向到成功的 msg 文件，但不确定这是否是正确的做法......

我想听听其他人对此案的看法，因为这是 Web 开发人员必须考虑的事情之一......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:56:10.400

尝试在查询结束时使用[ON DUPLICATE KEY 。](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

例子：

```
INSERT INTO `table`
(`column`)
VALUES
('thevalue')
ON DUPLICATE KEY UPDATE `column` = `column` 
```

以上只是更新现有记录，防止插入重复记录。请记住，您必须有适当的索引才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:50:45.460

使用标题位置功能重定向同一页面上的这个你可以停止重复

例如。 `<?php header('location:http://google.com'); ?>`

希望对你有帮助...

# c++ - 为什么是二进制兼容性？

> ID：15445308
> 
> 赞同：4
> 
> 时间：2013-03-16T03:44:40.973
> 
> 标签：c++, pimpl-idiom, binary-compatibility

我正在学习 PIMPL 成语。它的优点之一是二进制兼容性。我想知道二进制兼容性的优点是什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:10:08.323

它避免了[脆弱的二进制接口问题](http://c2.com/cgi/wiki?FragileBinaryInterfaceProblem)。它是这样的：

1.  程序使用库。

2.  用户升级库。升级更改了库的二进制接口中的某些内容。

3.  程序现在在重新编译之前无法运行，因为它是根据旧的二进制接口构建的。

PIMPL 习惯用法的优点之一是它允许您将通常属于类的公共接口的一部分的东西移动到其私有接口中（实际上，移动到私有类的接口中）。您可以在不破坏二进制兼容性的情况下更改私有接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-08T21:40:45.133

**v1.0**

`libMagic`让我们考虑 v1.0库中的以下类

```
//MagicNumber.h
struct MagicNumber {
  MagicNumber();
  int get();
  int id;
}
//MagicNumber.cpp
int MagicNumber::get() {
  return 42;
} 
```

申请代码：

```
void foo() {
  MagicNumber m;
  int i = 27;
  std::cout << m.get() + i << '\n';
} 
```

上述应用程序代码通过动态链接编译时`libMagic.so`，`foo`函数编译如下

```
foo:
   Allocate 4 bytes space in stack for m
   Allocate 4 bytes space in stack for i and write 27 in it
   Call MagicNumber::get //This address is resolved on application startup.
   ... //Rest of processing 
```

* * *

**v1.0.1**

现在，当 libMagic 发布新版本 v1.0.1 时，实现方式有以下变化，但头文件没有变化

```
//MagicNumber.cpp
int MagicNumber::get() {
  return call_real_magic_number_fn();
} 
```

应用程序不必重新编译，因此不需要更新。它将自动调用具有新实现的更新版本。

* * *

**v1.1.0** - 二进制不兼容

可以说库（v1.1.0）还有以下更改。

```
//MagicNumber.h
struct MagicNumber {
  MagicNumber();
  int get();
  int id;
  int cache; //Note: New member
}
//MagicNumber.cpp
int MagicNumber::get() {
  if(cache != 0) return cache;
  cache = call_real_magic_number_fn();
  return cache;
} 
```

现在，编译后的`foo`函数不会为添加的新成员分配空间。该库破坏了二进制兼容性。

```
foo:
   Allocate 4 bytes space in stack for m //4 bytes is not enough for m
   Allocate 4 bytes space in stack for i and write 27 in it.
   Call MagicNumber::get //This address is resolved on application startup.
   ... //Rest of processing 
```

发生的是未定义的行为。可能`i=27`会写入缓存变量并`MagicNumber::get`返回 27。但任何事情都可能发生。

* * *

如果`libMagic`使用了 PIMPL 成语，所有成员变量都将属于`MagicNumberImpl`其大小不会暴露给应用程序代码的类。因此库作者可以在以后版本的库中添加新成员，而不会破坏二进制兼容性。

```
struct MagicNumberImpl;
struct MagicNumber {
  MagicNumber();
  private:
    MagicNumberImpl* impl;
} 
```

上面的类定义在新版本中不会改变，当新成员添加到类中时指针的大小不会改变。

注意：仅在以下情况下才需要考虑二进制兼容性

1.  该库使用动态链接（例如`.so`linux 中的文件）进行链接。
2.  该库无需重新编译应用程序代码即可更新到新版本。如果库和二进制文件在同一个项目中 - 您的构建系统将自动重新编译和更新两者。因此，无需为此或 PIMPL 烦恼。

注意 2：还有另一种方法可以在不使用 PIMPL - ABI 命名空间版本控制的情况下解决相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T04:11:25.740

PIMPL 习惯用法的优势与其说是二进制兼容性，不如说是在更改实现甚至类的布局时减少了重新编译的需要。例如，如果您向一个类添加一个新的数据成员，这会改变该类的布局，并且您通常需要重新编译该类的所有客户端，但如果您使用 PIMPL 习惯用法，则不需要。

二进制兼容性更多的是与多个编译器（和编译器版本）兼容，而在 C++ 中做到这一点的唯一方法是使用由不向客户端公开的类实现的接口（抽象类）。这是因为所有编译器都以相同的方式实现抽象类的 vtable 布局。许多 API，例如 DirectX API，都是以这种方式公开的，因此它们可以与任何编译器一起使用。

# command-line - $ROOT 在 Mac 终端中是什么意思？

> ID：15445313
> 
> 赞同：0
> 
> 时间：2013-03-16T03:45:52.347
> 
> 标签：command-line

我收到了一些命令行指令：

```
ROOT=`cmd1 | cmd2 | cmd3`
echo ROOT=$ROOT
... 
```

似乎这个 $ROOT 存储了三个流水线 cmd 的输出。但是什么是 $ROOT？是环境变量吗？是寄存器吗？我该怎么称呼它？我可以有其他类似的变量吗？例如 $APPLE？我希望更多地了解 $ROOT :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:48:49.487

`ROOT`是一个环境变量，简单明了。`$ROOT`只是`ROOT`环境变量的扩展/评估。

例如：

```
xyzzy=plugh
echo xyzzy     # gives xyzzy
echo $xyzzy    # gives plugh 
```

`ROOT`环境变量的用途*可能*很重要（或不重要），但它的实际*命名*是毫无疑问的 - 它是一个名为`ROOT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T03:50:07.557

Root 是一个[环境变量](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-5.html)。变量在执行过程中被扩展，所以当`echo`echo $ROOT 时，它被扩展为变量的内容。在这种情况下，反引号表示“执行命令”，因此`cmd1 | cmd2 | cmd3`发出 的输出。您的示例令人困惑的是该`echo`命令也使用变量名作为文本，也许这更有意义：

```
ROOT=`cmd1 | cmd2 | cmd3`
echo The ROOT variable is: $ROOT 
```

# java - 如何在java中获取登录到文件中的文本

> ID：15445321
> 
> 赞同：0
> 
> 时间：2013-03-16T03:47:21.783
> 
> 标签：java

这可能是一个奇怪的问题，但我真的不知道该怎么问。我想将任何信息记录到文件中并使其可访问（例如 - 程序登录到文件中，并且我在项目中将该值作为字符串获取）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:20:47.250

使用 java.util.Scanner，您可以读取 txt 文件并将其内容添加到字符串中。

```
public static void main(String[] args) throws FileNotFoundException {
  File source = new File("filename.txt");
  Scanner scanner = new Scanner(source);
  String myString = "";
  while(scanner.hasNext()) {
    myString = scanner.nextLine() + " ";
  }
    scanner.close()
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:21:24.987

请提供有关您想要做什么的更多详细信息？如果您只需要读取日志文件，那么您可以使用 Java 中的 Reader/Writer API 来读取/写入文本文件。

使用具有 readLine() 方法的 BufferedReader 类一次读取整行。[使用BufferedReader 类](http://www.mkyong.com/java/how-to-read-file-from-java-bufferedreader-example/)读取文件的示例程序

# ruby - 如何在ruby中调用成员变量的成员函数？

> ID：15445341
> 
> 赞同：1
> 
> 时间：2013-03-16T03:50:17.947
> 
> 标签：ruby

我对红宝石真的很陌生，我正在尝试做一个即将到期的项目。

我得到了错误`"undefined method 'new_round' for nil:NilClass"`，不知道发生了什么。希望有人能帮助我。非常感谢。

```
class Blackjack
  def initialize()
    @deck = Deck.new(gets.to_i())
    @dealer = Dealer.new()
    @players = []
  end

  def new_round()
  end
end

class Controller
  def initializer()
    @blackjack = Blackjack.new()
  end

  def run()
    loop do
      @blackjack.new_round()
    end 
  end
end

Controller.new().run() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T03:57:24.537

更改`initializer()`为`initialize()`:)

你得到`undefined method 'new_round' for nil:NilClass`因为`@blackjack`是`nil`。

`@blackjack`是`nil`因为`initializer()`没有调用该方法。

# xcode - 如何将“页面控制”应用于图像并制作自动幻灯片？

> ID：15445342
> 
> 赞同：-1
> 
> 时间：2013-03-16T03:50:22.440
> 
> 标签：xcode, imageview, uipagecontrol

我想在我的一个控制器中应用一个页面控制部分，并从中制作一个自动幻灯片。如果您想了解我的意思，请查看应用程序 - Goal.com 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:11:59.650

试试这样，希望对你有帮助

```
 UIScrollView *scrollView;
-(void)animation{    
[UIView animateWithDuration:0.4 delay:5 options:UIViewAnimationCurveLinear
                 animations:^{
                     [scrollView setContentOffset:CGPointMake(index*320, 0)];

                 }
                 completion:^(BOOL finished)
 {
     index++;
     [self animation];
 }];
} 
```

在上面的代码中 index 是一个整数值，用于更改滚动视图偏移量并给出`delay`你想要的时间。

# php - 在 CakePHP 中向主键添加输入字段

> ID：15445353
> 
> 赞同：1
> 
> 时间：2013-03-16T03:51:24.433
> 
> 标签：php, cakephp, primary-key

我是 CakePHP 的新手，仍然没有完全理解。如果我有一个只有一个主键字段的 mysql 数据库，我如何使用 cake bake 选项为其创建一个输入字段。烘烤后，我尝试将此行添加到生成的视图文件中

```
<fieldset>
<legend><?php echo __('Add Id'); ?></legend>
<?php
        **echo $this->Form->input('identity');**
?>
</fieldset> 
```

它不起作用......获取主键输入字段的正确方法是什么？

表id在数据库中只有一个名为identity的字段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T10:51:30.573

默认情况下，CakePHP 会将主键字段作为隐藏输入输出。您可以通过指定要使用的输入的“类型”来覆盖它，例如：

```
echo $this->Form->input('identity', array('type' => 'text')); 
```

然而，CakePHP 支持两种类型的主键；autoNumber 整数和 GUID/UUID 主键。手动设置主键（例如，使用“用户名”作为主键并尝试**插入**或**编辑**用户名）可能会导致问题，因为 CakePHP 假设如果表单中的主键不为空，则应该执行*更新。*

[http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:06:03.227

将您的声明更改为：

```
echo $this->Form->input('id', array ('type'=>'text')); 
```

您现在应该可以看到完整的 id。

CakePHP 使用`id`or 索引来确定表单条目是新条目（即 INSERT）还是对现有 extry 的更新（即 UPDATE）。

如果您使索引可编辑，您将不得不处理此问题，否则您最终可能会拥有多条记录，一条是原始记录，另一条记录是更改。

# django - Django Heroku 线程超时

> ID：15445356
> 
> 赞同：1
> 
> 时间：2013-03-16T03:52:10.857
> 
> 标签：django, heroku, timeout, gunicorn

我正在用 gunicorn 在 Heroku 上运行 Django。一天几次，我在日志中收到 desc="Connection closed without response"。这些请求始终针对作为上传到服务器的 slug 一部分的静态内容。在此错误之后，gunicorn 工作线程立即进入临界状态，超时并重新启动。

我不知道是什么原因造成的，因为我已经卸载了新的遗物，并且正在提供的文件都是服务器上 slug 的本地文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T15:48:21.663

我认为这可能与您的“积压”和 max_requests 设置有关...如果您的积压大于 1，那么当您的 gunicorn 线程在 max_requests 被命中后重新启动时，我认为积压中的所有请求都将被删除...。

在运行 blitz.io 测试时，我一直在我的 heroku 上看到这一点...我将积压工作减少到 1，现在我只看到一个连接关闭，每个 web dyno 没有响应错误...

我不知道为什么会出现这种情况，我认为积压将保留在父进程中，并在它启动时传递给重生的子进程......

# javascript - javascript如何|| （或）操作员工作

> ID：15445359
> 
> 赞同：2
> 
> 时间：2013-03-16T03:52:58.920
> 
> 标签：javascript, operators, conditional-statements, or-operator

在以下 JavaScript 语句中：

```
var a = true;
a = a || b; 
```

变量是否会`a`对其自身的值进行不必要的重新分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T03:56:15.580

是的，它将分配给`a`. 这种事情甚至可能不会在编译语言中进行优化。

但是，它不会浪费时间进行评估`b`，因为它已经知道结果。运行时会发生这样的事情`a = a || b`：

```
if a
    a = a
else
    a = b 
```

**编辑：**

为了跟进 icktoofay 所说的“它不会显着影响性能。”，它只是设置一个（布尔）变量，这是可能发生的最简单的操作之一。即使您分配给更重要的东西（例如函数或数组）也不会有什么不同，因为它将分配给项目的引用，而不是再次创建它。

感谢[@bfavaretto](https://stackoverflow.com/questions/15445359/how-javascript-or-operator-works#comment21851068_15445384)的设置，这是什么都不做与分配给自己（[jsPerf 链接）的性能比较。](http://jsperf.com/reassign-to-self)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:56:18.013

`a`当`a`或`b`为真时为真。所以是的，除非您在那些可能影响 值的行之间插入更多代码，否则`a`较低的语句将始终设置`a`为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T04:03:18.617

是的 - 它不会被优化掉，因为 JavaScript 不会优化。尽管可以想象底层解析器实现可以优化，但我非常怀疑在这种情况下它会优化，而且它会非常特定于平台实现。

# android - Android：单击图库元素时显示自定义对话框

> ID：15445360
> 
> 赞同：0
> 
> 时间：2013-03-16T03:53:18.983
> 
> 标签：android, android-alertdialog, android-gallery

祝大家好运

单击图库视图的元素时，我想显示一个具有自定义布局的对话框。我的画廊显示没有任何问题，但在选择元素时发生错误。

我的代码：

```
gallery.setAdapter(new ImageAdapter(this));
...

gallery.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View v,  int position, long id) {

        final Dialog dialog = new Dialog(mContext);
        dialog.setContentView(R.layout.show_capture);

        dialog.setTitle("my title");

        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.ic_launcher);

        Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show();

        }
}); 
```

我的日志文件：

```
03-16 03:43:10.387: E/AndroidRuntime(5226): FATAL EXCEPTION: main
03-16 03:43:10.387: E/AndroidRuntime(5226): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewRoot.setView(ViewRoot.java:531)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.app.Dialog.show(Dialog.java:241)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at com.xxx.activities.ActivityDetailsActivity$1.onItemClick(ActivityDetailsActivity.java:247)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.widget.Gallery.onSingleTapUp(Gallery.java:867)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.GestureDetector.onTouchEvent(GestureDetector.java:557)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.widget.Gallery.onTouchEvent(Gallery.java:842)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.View.dispatchTouchEvent(View.java:3885)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.os.Looper.loop(Looper.java:123)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at java.lang.reflect.Method.invokeNative(Native Method)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at java.lang.reflect.Method.invoke(Method.java:507)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-16 03:43:10.387: E/AndroidRuntime(5226):  at dalvik.system.NativeStart.main(Native Method) 
```

有没有大神知道怎么解决的。。。。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:03:04.213

改变这个：

```
final Dialog dialog = new Dialog(mContext); 
```

对此：

```
final Dialog dialog = new Dialog(ActivityDetailsActivity.this); 
```

# bash - 加速 Bash 脚本

> ID：15445361
> 
> 赞同：0
> 
> 时间：2013-03-16T03:53:22.060
> 
> 标签：bash, optimization

我正在编写一个半实时 bash 脚本，但它的运行速度不够快。据我了解，Bash 引用了某种表格来查找您提供给它的命令的完整路径。指定完整路径会显着加快循环运行的命令吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T03:57:21.393

不太可能。`bash`shell 实际上会缓存它找到的可执行文件，因此只有第一次搜索会很慢。

从`bash`手册页：

> 如果名称既不是 shell 函数也不是内置函数，并且不包含斜杠，bash 会在 PATH 的每个元素中搜索包含该名称的可执行文件的目录。Bash 使用哈希表来记住可执行文件的完整路径名（请参阅下面的 SHELL BUILTIN COMMANDS 下的哈希）。仅当在哈希表中找不到该命令时，才会对 PATH 中的目录进行完整搜索。

加速`bash`脚本通常采取以下两种形式：

*   使用 bash 内部的东西而不是产生工作量小的进程（如`cut`or ）；`sed`和
*   在必须生成外部进程的地方做出更好的选择。

* * *

作为第一个示例，提取字符串的第一个字符：

```
firstchar=$(echo $string | cut -c1-1) 
```

这是一个可怕的想法，因为它必须产生进程来完成这项工作。您可以通过以下方式快速执行完全相同的操作`bash`：

```
firstchar=${string:0:1} 
```

*没有*产生子进程的相对巨大的成本。

第二点只是确保您在运行子流程时为工作选择最佳工具。例如，当可以使用非常简单的单行代码完成时，不要使用包含多个`grep`,`cut`和命令的大量管道。`sed``awk`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-25T11:13:21.327

除了已经提到的关于优化`bash`脚本的内容之外，另一种选择是不使用`bash`，而是使用更轻量级的 shell（例如`sh`）：`bash`很大并且启动时间相对较长。如果你的脚本的执行时间很短，它实际上可能被`bash`启动所支配。

# javascript - 无法理解 handlebars.js 上下文

> ID：15445362
> 
> 赞同：0
> 
> 时间：2013-03-16T03:53:25.957
> 
> 标签：javascript, templates, handlebars.js, mustache

我无法理解上下文在 handlebars.js 中的工作方式，特别是“../”符号。我放在一起的 jsfiddle 最好地说明了这一点：

[http://jsfiddle.net/accelerate/AwChe/](http://jsfiddle.net/accelerate/AwChe/)

语境：

```
"rootvar": "hi",
"mydata": [{
    "renderme": true,
    "mytext": "bye"
}] 
```

模板：

```
rootvar = {{{rootvar}}} (should be "hi")<br/>
{{#each mydata}}
<br/>In mydata...<br/>
rootvar = {{{rootvar}}} (should be empty)<br/>
rootvar = {{{../rootvar}}} (should be "hi")<br/>
mytext = {{{mytext}}} (should be "bye")<br/>
{{#if renderme}}
<br/>In renderme...<br/>
rootvar = {{{rootvar}}} (should be empty)<br/>
rootvar = {{{../rootvar}}} (should be empty)<br/>
rootvar = {{{../../rootvar}}} (should be "hi")<br/>
mytext = {{{mytext}}} (should be empty!!)<br/>
mytext = {{{../mytext}}} (should be "bye")<br/>
{{/if}}
{{/each}} 
```

输出：

```
rootvar = hi (should be "hi")

In mydata...
rootvar = (should be empty)
rootvar = hi (should be "hi")
mytext = bye (should be "bye")

In renderme...
rootvar = (should be empty)
rootvar = (should be empty)
rootvar = hi (should be "hi")
mytext = bye (should be empty!!)
mytext = bye (should be "bye") 
```

所以换句话说，我有一个嵌套在#each 语句中的#if 语句。我明白为什么我需要使用“../../rootvar”来访问“rootvar”。我不明白为什么我不需要做一个“../”来访问当前 mydata 元素中的其他变量。我不应该像访问“rootvar”那样访问#if 的父上下文来访问“mytext”吗？如果我不这样做，那么为什么“../mytext”也有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:19:04.327

这对于助手来说是正常的，`#if`因为它保留了上下文。

```
//here context is:
//  "rootvar": "hi",
//  "mydata": [{
//  "renderme": true,
//  "mytext": "bye" }]
rootvar = {{{rootvar}}} (should be "hi")<br/>
{{#each mydata}}
// here `each` will change the context to each item in 'mydata' so it becomes
//   { "renderme": true,
//     "mytext": "bye" }
<br/>In mydata...<br/>
rootvar = {{{rootvar}}} (should be empty)<br/>
rootvar = {{{../rootvar}}} (should be "hi")<br/>
mytext = {{{mytext}}} (should be "bye")<br/>
{{#if renderme}}
// now `if` will create new context but it is the same as the parent context
//     { "renderme": true,
//     "mytext": "bye" }
<br/>In renderme...<br/>
rootvar = {{{rootvar}}} (should be empty)<br/>
rootvar = {{{../rootvar}}} (should be empty)<br/>
rootvar = {{{../../rootvar}}} (should be "hi")<br/>
mytext = {{{mytext}}} (should be "bye")<br/>
mytext = {{{../mytext}}} (should be "bye")<br/>
{{/if}}
{{/each}} 
```

有关更多详细信息，请参阅此[github 问题](https://github.com/wycats/handlebars.js/issues/196)。

# javascript - 将 clojurescript 集成到 javascript 框架中

> ID：15445364
> 
> 赞同：2
> 
> 时间：2013-03-16T03:53:38.720
> 
> 标签：javascript, jquery, constructor, prototype, clojurescript

我想使用 Clojurescript 在 Javascript 框架中编写组件，但我不知道如何创建构造函数并在对象中调用全局变量。

该框架通过从保存的 jason 文件中读取它们的状态并在 javascript 中具体化它们来创建视图（在它们自己的 .js 文件中）（视图是这样的代码）：

```
(function() {

  var Title = function(json) {
    view.View.call(this, json);  // view is defined in another js file - global namespace
    this.title = json.title;
    this.el.addClass("title");

  }

  view.inherit(view.View, Title);
  view.Title = Title;
  view.types.Title = Title;

  Title.prototype.json = function() {
    return $.extend(view.View.prototype.json.call(this), {
      type: 'Title',
      title: this.title
    });
  }

  Title.prototype.reflow = function() {
    this.h2.quickfit(opts);
  }
})(); 
```

我已经看到了如何使用 deftype 宏和对象创建 Javascript 对象：

```
(deftype Foo [a b c]
   Object
   (bar x (+ a b c x))) 
```

我是 javascript 和 clojurescript 的新手。我看到包装所有内容的匿名函数为视图提供了一个范围，但不确定如何（或如果我需要）因此在 clojurescript 中等效。

所以我的问题是：如何在这个模型中为 Title 创建构造函数？我应该如何处理对视图变量的调用，例如 view.inherit 等？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-18T01:54:16.777

这是一个有点笼统的答案，但您似乎希望在 ClojureScript 和 JavaScript 之间共享代码，所以这里有一个入门和一些关于[在 Clojure 中使用 JavaScript 库的](http://lukevanderhart.com/2011/09/30/using-javascript-and-clojurescript.html)精选花絮：

* * *

### 出口

保护您声明的符号免于重命名很容易；只需在任何 ClojureScript var 上定义`:export`元数据，ClojureScript 编译器就会确保它不会被修改。

例如，一个函数可以这样声明：

```
(ns example)
(defn ^:export hello [name]
  (js/alert (str "Hello," name "!"))) 
```

然后，它可以通过相同的名称在外部 JavaScript 上下文中使用：

```
<script>
    example.hello("Eustace")
</script> 
```

* * *

### 外部人员

为了走另一条路，并从代码中引用外部声明的变量，您必须为 Google Closure 编译器提供一个“外部文件”，一个 .js 文件，用于定义不会被修改的 javascript 变量。该文件被传递给 Google Closure 编译器，并且在编译时，它不会修改其中定义的任何名称。

例如，我可以尝试在没有外部文件的情况下以高级模式编译以下 ClojureScript（利用 Raphael.js 库）。

```
(defn test []
  (let [raphael (js/Raphael. 10 50 320 200)]
    (. raphael (circle 50 50 50)))) 
```

当我调用该`test`函数时，它会抛出一个`new Raphael(10, 50, 320, 200)).K is not a function`. `K`是 Raphael 的 circle 函数的名称，显然找不到，因为它没有在任何地方定义。我们需要告诉编译器保留名称 circle，而不是 munge。

我可以通过创建以下 externs.js 文件来做到这一点：

```
var Raphael = {};
Raphael.circle = function() {}; 
```

并在编译我的 ClojureScript 时使用它：

```
(closure/build "src/cljs" {:optimizations :advanced
                           :externs ["externs.js"]
                           :output-to "helloworld.js"}) 
```

# java - 尝试发送电子邮件时 JVM 冻结

> ID：15445370
> 
> 赞同：2
> 
> 时间：2013-03-16T03:54:25.943
> 
> 标签：java, email

我正在尝试使用以下方法从我的程序发送电子邮件：

```
 void sendEmails(Tutor t, Date date, Time time, String tuteeName, String tuteeEmail){
    System.out.println("sending emails");
    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "465");

            SimpleDateFormat timeFmt =  new SimpleDateFormat("hh:mm a");
            SimpleDateFormat dateFmt =  new SimpleDateFormat("EEE, MMMM dd");         
            String datePrint = dateFmt.format(date);
            String timePrint = timeFmt.format(time);                
            Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
                   @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

            try {

        Message tutorMessage = new MimeMessage(session);

        tutorMessage.setFrom(new InternetAddress("laneycodingclub@gmail.com"));

        tutorMessage.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse(t.getEmail()));

        tutorMessage.setSubject("Tutoring Appointment Scheduled");
        tutorMessage.setText("Hey " + t.getName() + 
                            "\n \t You have a new appointment scheduled on "  + datePrint + " at " + timePrint + 
                            "with " + tuteeName + ". \n If you cannot make this appointment, please contact club leadership immediately. "
                            + "\n Thanks for helping out!");

        Transport.send(tutorMessage);

        System.out.println("Done sending");

    } catch (MessagingException e) {
                    System.out.println("messagingerror");
                    e.printStackTrace();
    }
} 
```

但是当程序到达这个方法时，GUI 锁定并且程序冻结。这是我第一次尝试在 Java 程序中使用电子邮件，所以我不确定问题在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:58:20.273

想通了：465 是通过 SSL 使用 gmail 发送电子邮件时使用的正确端口。但是，使用 TLS 时，正确的端口是 587。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:22:14.200

您最好避免同步发送电子邮件。

通常它会减慢您的应用程序的工作，更糟糕的是 - 它可能会冻结它，例如如果邮件服务器无法访问或没有响应。

使用一些异步机制。

我确信在这种情况下你的邮件服务器有问题。

使用一些独立的 Java 程序来确保您可以使用这些服务器参数发送电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:58:29.807

如果您从 GUI 中的事件处理程序调用此方法，则只要该函数尚未完成，您就有效地阻塞了 Swing 工作线程。在 Swing 中（或在 SWT 中）的每个 GUI 处理都在一个线程中完成，因此当您阻塞线程时，GUI 无法更新，即冻结。

您永远不应该在 GUI 线程中运行长时间运行的作业。相反，您应该创建一个新线程并从中调用您的函数。

# iphone - iOS - UIImageView 动画内存泄漏？

> ID：15445372
> 
> 赞同：2
> 
> 时间：2013-03-16T03:54:36.160
> 
> 标签：iphone, ios, animation, memory, uiimageview

我目前正在使用 a`UIImageView`根据用户按下的按钮为一系列图像设置动画。我在 中创建了大约 5 组不同的图像，`NSArrays`例如：

```
-(void)initiateAnimations {

punchani = [NSArray arrayWithObjects:
           [UIImage imageNamed:@"punch0001.png"],
           [UIImage imageNamed:@"punch0002.png"],
           [UIImage imageNamed:@"punch0003.png"],
           [UIImage imageNamed:@"punch0004.png"],
           [UIImage imageNamed:@"punch0005.png"],
           [UIImage imageNamed:@"punch0006.png"],
           [UIImage imageNamed:@"punch0007.png"],
           [UIImage imageNamed:@"punch0008.png"],
           [UIImage imageNamed:@"punch0009.png"],
           [UIImage imageNamed:@"punch0010.png"],
           [UIImage imageNamed:@"punch0011.png"],
           [UIImage imageNamed:@"punch0012.png"],nil];
} 
```

然后我使用标准动画代码将它们循环一次：

```
player.animationImages = punchani;
player.animationDuration = 0.50;
player.animationRepeatCount = 1;
[player startAnimating]; 
```

但是，当我将越来越多/不同的图像加载到`UIImageView`.

```
 2013-03-15 20:52:23.065 AppName[2080:907] Received memory warning. 
```

我知道这可能会发生，但 ARC 禁止我释放这些数组。我该如何解决这个泄漏？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T04:06:33.307

UIImage imageNamed：缓存图片并按照自己的时间表释放内存。用于 `+ (UIImage *)imageWithContentsOfFile:(NSString *)path` 直接加载内存

[也试试这个答案。](https://stackoverflow.com/a/7750427/1357774)动画结束时删除图像数组

# html - 什么时候垂直对齐在表格单元格中起作用，什么时候不起作用？

> ID：15445373
> 
> 赞同：3
> 
> 时间：2013-03-16T03:54:39.760
> 
> 标签：html, css

从理论上讲，`vertical-align`应该在带有`display:table-cell`. 如果你添加一个包装器，它总是有效的`display:table`。但是当它没有包装器时，有时它会起作用，有时垂直对齐会被完全忽略，这似乎是随机的。您能否解释一下`table-cell`支持垂直对齐的要求是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:20:42.887

这有点投机，但在没有任何例子的情况下，我将在黑暗中试一试。也许你的意思是这样的：

```
<!DOCTYPE html>
<title>Test case</title>
<style>
  .wrapper { height: 80px; width:100%; }
  .percentage .wrapper { border: 1px solid red; }
  .fixed .wrapper { border: 1px solid blue; }
  .height-cells-test { margin-bottom: 20px; }

  .as-block { display: block; }
  .as-table { display: table; }

  .cell { display:table-cell; vertical-align:middle; } 

  .percentage .cell { height: 100%; }
  .fixed .cell { height: 80px; }
</style>
<div class="percentage height-cells-test"> 
    <div class="wrapper as-block">
        <div class="cell">
            test percentage height of cell in block
        </div>
    </div>
    <div class="wrapper as-table">
        <div class="cell">
            test percentage height of cell in table
        </div>
    </div>
</div>
<div class="fixed height-cells-test">    
    <div class="wrapper as-block">
        <div class="cell">
            test fixed height of cell in block
        </div>
    </div>
    <div class="wrapper as-table">
        <div class="cell">
            test fixed height of cell in table
        </div>
    </div>
</div> 
```

如果您在[jsfiddle](http://jsfiddle.net/EVwrF/1/)中查看这一点，您会看到四个`.wrapper`块中的那个，第二个、第三个和第四个块的文本垂直居中，第一个块中的文本显示在顶部。

这种情况是在`display:block`容器中使用单元格的百分比高度时。

要了解为什么会发生这种情况，请参阅[CSS 2.1 规范中的](http://www.w3.org/TR/CSS2/tables.html#anonymous-boxes)这段文字：

> HTML 以外的文档语言可能不包含 CSS 2.1 表格模型中的所有元素。在这些情况下，必须假设“缺失”元素才能使表模型正常工作。任何表格元素都会在其自身周围自动生成必要的匿名表格对象，由至少三个嵌套对象组成，分别对应一个 'table'/'inline-table' 元素、一个 'table-row' 元素和一个 'table-cell' 元素. 缺少元素会生成匿名对象...

这有点误导，因为它首先谈论将 CSS 与 HTML 以外的语言一起使用，但它的意思是使用 css 表格样式而不使用`<table>, <tr>, <td>`etc。所以它在这里也适用于`display:table-cell`正在使用的地方。

该规范继续提供有关如何创建这些匿名对象的详细规则（此处未复制）。结果是在块包装器内的表格单元的情况下，在表格单元周围生成了一个匿名表格和一个匿名表格行。

我们可以忽略匿名表行，因为这不会影响这里的情况。

匿名表很重要。这个对象有它自己的高度，作为一个表格只是它的内容需要的高度。当 table-cell 被告知为 100% 高度时，这意味着*匿名表*的 100% 高度，而不是 100% 的高度`.wrapper`。

所以表格很小，放在 的左上角，`.wrapper`表格单元位于其中。垂直对齐仍在发生，但在一个不比文本大的框内，因此文本无处可去。

当`.wrapper`块的样式为 时`display:table`，不需要匿名表对象，也不会生成一个。所以表格单元格与 ' 一样高，`.wrapper`并且`vertical-align:middle`可以在整个空间中生效。

# php - 插入文本时，CSS div 框会向下移动一点

> ID：15445374
> 
> 赞同：1
> 
> 时间：2013-03-16T03:55:00.887
> 
> 标签：php, html, css, positioning

这些是我的 div 的 css 代码，我首先制作一个 slothead 类 div，然后水平制作几个插槽。

```
div.slotshead{
    z-index:3;
    position:relative;
    border: 1px solid #5f92d2;
    width: 130px;
    height: 50px;
    color: #003366;
    font-size:15px;
    text-align:center;
    font-family:'arial';
}

div.slots{
    z-index:3;
    position:relative;
    border: 1px solid #d0d0fe;
    width: 45px;
    height: 50px;
    color: #003366;
    font-size:10px;
    text-align:center;
    font-family:'arial';
} 
```

这是其中的代码

```
echo '<h3>';
for ($i = 0; $i < 31; $i++) {
    echo "<div class=slotshead id=$i>";
    If($i==0){
        echo 'TIME';
    }
    echo "</div>";

    for ($j=0;$j < 23;$j++) {
        echo " <div class=slots>";
        If(($i==0)){
            $start = strtotime('8am');
            $k++;
            $tod = $start + ($k * 15 * 60);
            echo date('H:i A', $tod);
        }
        echo "</div>";
    }

    echo '<br>';

}
echo '</h3>'; 
```

这是示例[jsfiddle](http://jsfiddle.net/bZxT6/)

在这里，插槽工作正常，但**slothead(div with 'TIME') 向下移动了一点**，这是为什么呢？仅供参考，我试过`vertical-align=top;`但没有用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:13:57.417

好的，我觉得这就是您要问的

在 CSS 中添加

```
h3{margin:0;padding:0;} 
```

例子

[演示](http://jsfiddle.net/bZxT6/1/)

您仍然想减少均值，请参见以下内容

```
html,body,h3{margin:0;padding:0} 
```

[演示](http://jsfiddle.net/bZxT6/2/)

# java - 在运行时未找到类，但在编译时使用命令行

> ID：15445375
> 
> 赞同：1
> 
> 时间：2013-03-16T03:55:02.490
> 
> 标签：java, android, command-line, classpath, noclassdeffounderror

我知道我的源代码在 Eclipse 中编译得很好，但是为了更容易地一次又一次地使用相同的源代码进行生产，我选择设置一个 .bat 来为我处理大部分工作。好吧，简短而甜蜜，我的外部 jar 在编译时可用，但在运行时不可用，我收到强制关闭（Android ClassNotFoundDefError）。我确定问题出在我的命令是如何在我的 .bat 文件上设置的，并且在阅读了网站之后（我将列出我最后使用的一组参考资料）我来到了这段代码......

```
echo on
@REM %1 NOTUSED
@REM %2 SHORT NAME (DIR HIERARCHY POINTER)
@REM %3 SRCPATH (RECEIVES PACKAGE PATH)
@SET PREV_PATH=%CD%
@cd /d %0\..

@rmdir %2\bin /S /Q
@rmdir %2\gen /S /Q
@mkdir %2\bin || goto EXIT
@mkdir %2\gen || goto EXIT
@SET APP_NAME=%2
@SET ANDROID_REV=android-7

@SET ANDROID_AAPT_ADD="%ANDROID-SDK%\platform-tools\aapt.exe" add

@SET ANDROID_AAPT_PACK="%ANDROID-SDK%\platform-tools\aapt.exe" package -v -f -I "%ANDROID-SDK%\platforms\%ANDROID_REV%\android.jar" -j ".\usrsrc\libs\MobileSDK.jar" -j ".\usrsrc\libs\MobileSDK2.jar"

@SET ANDROID_DX="%ANDROID-SDK%\platform-tools\dx.bat" --dex

@SET JAVAC="%JAVABIN%\javac.exe" -classpath ".\%2;%ANDROID-SDK%\platforms\%ANDROID_REV%\android.jar;%2\libs\MobileSDK.jar;%2\libs\MobileSDK2.jar"

@SET JAVAC_BUILD=%JAVAC% -sourcepath "%2\src;%2\gen" -d "%2\bin" -jar "%2\libs\MobileSDK.jar;%2\libs\MobileSDK2.jar"

call %ANDROID_AAPT_PACK% -M "%2\AndroidManifest.xml" -A "%2\assets" -S "%2\res" -m -J "%2\gen" -F "%2\bin\resources.ap_" -j "%2\libs\MobileSDK.jar" -j "%2\libs\MobileSDK2.jar" || goto EXIT

call %JAVAC_BUILD% %2%3*.java || goto EXIT

call %ANDROID_DX% --output="%CD%\%2\bin\classes.dex" %CD%\%2\bin || goto EXIT

copy "%CD%\%2\bin\resources.ap_" "%CD%\%2\bin\%APP_NAME%.ap_" || goto EXIT

call %ANDROID_AAPT_ADD% "%CD%\%2\bin\%APP_NAME%.ap_" "%CD%\%2\bin\classes.dex" || goto EXIT

call "%JAVABIN%\jarsigner" -keystore "%CD%\keystore.keystore" -storepass "XXXXXXXXXX" - keypass "XXXXXXXX" -signedjar "%CD%\%2\%APP_NAME%.apk" "%CD%\%2\bin\%APP_NAME%.ap_" "XXXXXXXXX" || goto EXIT
del "%2\bin\%APP_NAME%.ap_"
:EXIT
cd "%PREV_PATH%"
ENDLOCAL
pause
exit /b %ERRORLEVEL% 
```

现在我知道，每当有人向我展示答案是多么痛苦显而易见时，我都会感到非常愚蠢。但是我已经在这件事上坚持了大约 24 小时了，我再也受不了了。我将不胜感激任何帮助。

仅供参考：输入这个 bat 的大多数变量都是从另一个程序输入的，该程序在我们进入 .bat 之前设置文件层次结构和其他所有内容。这就是我能真正描述的关于这个问题的全部内容。

参考：
[http ://www.herongyang.com/Android/Project-aapt-Android-Asset-Packaging-Tool.html](http://www.herongyang.com/Android/Project-aapt-Android-Asset-Packaging-Tool.html)
[http://www.apriorit.com/our-company/dev-blog/233-how-to -build-apk-file-from-command-line](http://www.apriorit.com/our-company/dev-blog/233-how-to-build-apk-file-from-command-line)
以及有关外部 jar 堆栈溢出的所有问题；还有一些；我目前找不到会像我一样更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:33:36.653

因为不像某些人；我确实想提供帮助，并且过去曾收到过潜伏堆栈溢出的答案，在我研究了答案后我回来了，因为我在堆栈溢出中多次看到这个问题，没有人对此给出正确答案：

“您必须在 dx.bat 中明确调用您的外部 jars”

```
call %ANDROID_DX% --output="%CD%\%2\bin\classes.dex" "%CD%\%2\bin" "C:\<dir>\mobileSDK.jar" "C:\<dir>\MobileSDK2.jar" || goto EXIT 
```

为了符合“java标准”，您必须提供一个没有空格的静态地址（请参阅我上面的问题参考资料）。这告诉 Android 构建内容将这两个 jar 包作为编译代码包含在内。

* * *

对他们的第一次召唤

```
@SET ANDROID_AAPT_PACK="%ANDROID-SDK%\platform-tools\aapt.exe" package -v -f -I "%ANDROID-SDK%\platforms\%ANDROID_REV%\android.jar" -j ".\usrsrc\libs\MobileSDK.jar" -j ".\usrsrc\libs\MobileSDK2.jar" 
```

对他们来说是唯一的，在 compileTime 期间是明显的，并且有可供编译器使用的类，以避免由于缺少更好的术语而引发错误。
将它们包含在 dx.bat 中也会告诉它在将其压缩成 APK 时包含这些 .jar 以及所有 .class 文件。但我希望这对将来的某人有所帮助。

# wpf - WPF将ViewModel作为多参数传递

> ID：15445378
> 
> 赞同：1
> 
> 时间：2013-03-16T03:55:43.063
> 
> 标签：wpf, data-binding, mvvm

我有一个列出年份的列表视图和另一个具有年份组的列表视图。在第一个列表视图的 selectchanged 上使用 ICollectionView 过滤器填充年份组列表视图。

我想向组中添加一条新记录，但我需要年列表视图中选定项的 ID 作为外键。

我在 XML 中声明了 2 个静态视图模型资源。一个列表和一个新的空组。

```
<local:YearGroupListViewModel x:Key="YearGroupList" />
<local:YearGroupViewModel x:Key="NewYearGroup" /> 
```

为了在其他页面上创建新记录，我成功地将新视图模型作为参数传递给 add 命令（年份示例）：

```
<Button x:Name="btnSettingsYearsSaveAdd" x:Uid="btnSettingsYearsSaveAdd" 
    Content="Submit" Margin="0,49,10,0" 
    Style="{DynamicResource ButtonStyle}"
    DataContext="{StaticResource ResourceKey=YearList}"
    CommandParameter="{StaticResource ResourceKey=NewYear}" 
    Command="{Binding Path=AddCommand}" /> 
```

这适用于不依赖于父列表视图 selecteditem id 用于外键目的的记录。

所以我试图[在 SO 上使用这个问题中提到的多参数传递](https://stackoverflow.com/questions/1350598/passing-two-command-parameters-using-a-wpf-binding)

我的问题是，如果只发送一个参数，我似乎无法将新组视图模型作为参数传递。

这就是我现在的位置：

XML

```
<Button x:Name="btnSettingsYearGroupsSaveAdd" x:Uid="btnSettingsYearGroupsSaveAdd"
    Content="Submit" Margin="0,49,10,0" 
    Style="{DynamicResource ButtonStyle}"
    DataContext="{StaticResource ResourceKey=YearGroupList}" 
    Command="{Binding Path=AddCommand}">
        <Button.CommandParameter>
            <MultiBinding Converter="{StaticResource paramConvert}">
                <Binding Path="YearGroup" 
                         ElementName="{StaticResource ResourceKey=NewYearGroup}"/>
                <Binding Path="SelectedItem" 
                         ElementName="lvwSettingsYears"/>
            </MultiBinding>
        </Button.CommandParameter>
    </Button> 
```

静态资源键绑定不起作用。我尝试了十几种不同的衍生产品，但都失败了。

命令

```
public void OnExecute(object parameter)
    {
        var values = (object[])parameter;
        YearGroupViewModel newYearGroup = values[0] as YearGroupViewModel;
        yearID = (Int32)values[1];
    } 
```

有没有人这样做过？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:55:21.787

好吧，我想应该`Source`不是`ElementName`，如果您尝试绑定一个`StaticResource`.

```
<Button x:Name="btnSettingsYearGroupsSaveAdd" x:Uid="btnSettingsYearGroupsSaveAdd"
        Content="Submit" Margin="0,49,10,0" 
        Style="{DynamicResource ButtonStyle}"
        DataContext="{StaticResource ResourceKey=YearGroupList}" 
        Command="{Binding Path=AddCommand}">
    <Button.CommandParameter>
        <MultiBinding Converter="{StaticResource paramConvert}">
            <Binding Path="YearGroup" 
                     Source="{StaticResource ResourceKey=NewYearGroup}"/>
            <Binding Path="SelectedItem" 
                     ElementName="lvwSettingsYears"/>
        </MultiBinding>
    </Button.CommandParameter>
</Button> 
```

# php - Twig 找不到我的目录

> ID：15445380
> 
> 赞同：0
> 
> 时间：2013-03-16T03:56:00.263
> 
> 标签：php, .htaccess, twig

我刚刚安装了 Twig 作为我自己的 MVC 框架的一部分。在设置加载程序时，我无法让它识别我的目录路径。我厌倦了以下三个版本：

```
$twigLoader = new Twig_Loader_Filesystem('../views/user');
$twigLoader = new Twig_Loader_Filesystem('http://AmColAn.loc/research/views/user');
$twigLoader = new Twig_Loader_Filesystem('/Volumes/Data RAID/htdocs/AmColAn/research/views/user'); 
```

前两个给出了找不到目录的错误，而第三个工作正常。显然，我无法在我的生产服务器（godaddy）上执行此操作。我怀疑我在做一些简单的错误。它在 OS X 10.8.2 上的 XAMPP 上运行。twig 目录位于代码所示的研究目录中。该代码位于研究/课程的文件中。

我还在研究目录中添加了一个 .htaccess 文件。它包含：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^([a-zA-Z]*)/?([a-zA-Z]*)?/?([a-zA-Z0-9]*)?/?$ index.php?controller=$1&action=$2&id=$3 [NC,L] 
```

这可能是问题吗？我可以在第 2 版中看到它。

更新：我尝试了以下方法：

```
$twigLoader = new Twig_Loader_Filesystem('views/user'); 
```

这也有效。文件或目录引用的起点似乎是研究。我总是不得不在我所有的其他 php 代码中使用 ../'s 退回到基本目录。在这种情况下，唯一的区别是有一个 .htaccess 文件。我想知道它是否对这种行为负责以及为什么。

# kineticjs - KineticJS：您如何相对于新原点定位组中的形状？

> ID：15445389
> 
> 赞同：0
> 
> 时间：2013-03-16T03:56:48.097
> 
> 标签：kineticjs

我希望能够相对于新原点定位组中的形状，并且我想将该新原点设置为组的坐标。本质上是创建类似于迷你画布的东西，其中组就是画布。

例如，假设我有一个 group `card`，其中我有`Kinetic.Text`对象。不必做诸如`Kinetic.Text({x: group_x + text_x, y: group_y + text_y})`计算将位于卡片顶部的文本的坐标之类的事情，如果根据它所在的组计算`text_x`和`text_y`in可能会很整洁。`Kinetic.Text({x: text_x, y: text_y})`

就像，这个组本身就是一个迷你画布，里面有一堆形状。KineticJS 是否本机支持这一点？或者除了制定位于形状顶部的形状的位置之外，没有其他选择吗？

我可能希望将一个形状保持在另一个形状的顶部，我想我需要一个简单的公式，但我宁愿使用 KineticJS 可能提供的功能。KineticJS 是否为此提供任何功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:51:28.377

您是否尝试过 .getPosition() 获取对象相对于其父对象的位置 - 对于分组对象，父对象应该是组容器：

```
myTextInGroup.getPosition().x
myTextInGroup.getPosition().y 
```

然后像这样设置子对象的位置：

```
myTextInGroup.setPosition(newX,newY); 
```

# javascript - 使用单个全局命名空间，如何从工具的方法访问命名空间的属性/方法？

> ID：15445391
> 
> 赞同：1
> 
> 时间：2013-03-16T03:56:59.213
> 
> 标签：javascript, inheritance, closures, prototypal-inheritance

在使用单个全局命名空间构建各种工具时，我们如何从工具的方法中访问命名空间对象的属性或方法，而不是在外部进行访问？

让`OT`“我们的工具”成为名称空间。

我们可以这样做：

```
var OT = function(){ // Closure
   var Turkey = 'Im a Turkey!';
   return this;
}(); 
```

**或者**

```
var OT = { // Object Literal
   Turkey:'Im a Turkey!'
}; 
```

无论哪种情况，我们都将我们的工具添加到`OT`对象中，例如：

```
OT.GridInterface = function (){
   // A Grid tool
   this.DoSomething();
}
OT.GridInterface.prototype = new OT.BaseInterface();

OT.GridInterface.prototype.DoSomething = function(){
   console.log(Turkey); // undefined
   console.log(OT.Turkey); // undefined with Closure, works with Obj Literal*
   console.log(this.Turkey); // undefined
}

// * This goes around the outside to get the property publicly rather than up through the inside. 
```

似乎每个工具在技术上都是一种方法，`OT`并且该方法的方法应该能够访问`Turkey`命名空间的属性，因为内部函数应该能够访问外部函数的属性？

我的目标是能够将共享配置变量以及一些实用方法添加到`OT`所有`OT`可以使用的工具中。理想情况下，这些工具和属性应该可以从工具中读取/使用，但它们是不可变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:08:25.240

你可以[在这里](http://www.crockford.com/javascript/private.html)阅读，它解释了更多关于 JavaScript 中私有成员的信息。

基本上，你问的是不可能的。

要么所有函数都必须在闭包中定义，要么`Turkey`必须是公共的。

# wordpress - 使用此附件 PHP 使目标 _Blank

> ID：15445396
> 
> 赞同：1
> 
> 时间：2013-03-16T03:57:31.773
> 
> 标签：wordpress, media, attachment

下面的这个 php 将像这样打印[http://example.com/wp-content/uploads/2013/01/imagename.jpg](http://example.com/wp-content/uploads/2013/01/imagename.jpg)带有锚文本“下载”

```
<?php  

if ( $attachments = get_children( array(  
'post_type' => 'attachment',  
'post_mime_type'=>'image',  
'numberposts' => 1,  
'post_status' => null,  
'post_parent' => $post->ID  
)));
foreach ($attachments as $attachment) {  
echo wp_get_attachment_link( $attachment->ID, '' , false, true, 'Download');  
}  
?> 
```

1.当用户点击此链接时，如何在_blank中定位或在新标签中打开。

2.这个短代码是否可以结合Javascript来制作强制下载链接？看起来像波纹管。

```
if ( $attachments = get_posts( array(
    'post_type' => 'attachment',
    'post_mime_type'=>'image',
    'numberposts' => -1,
    'post_status' => 'any',
    'post_parent' => $post->ID,
) ) );
foreach ( $attachments as $attachment ) {
    echo '<a href="javascript:void(0);"
        onclick="document.execCommand(\'SaveAs\', true, \'' . get_permalink( $attachment->ID ) . '\');">
        Download This Wallpaper</a>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:02:26.330

这就是我在下面的回复中的意思。

```
array(  
'post_type' => 'attachment',  
'post_mime_type'=>'image',  
'numberposts' => 1,  
'post_status' => null,  
'post_parent' => $post->ID ,
'target' => 'target="_blank"'; 
) 
```

看看它是否以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:20:18.157

amek teh chages 试试这个

```
 foreach ( $attachments as $attachment ) {
echo '<a href="javascript:void(0);"
    onclick="document.execCommand(\'SaveAs\', true, \'' . get_permalink( $attachment->ID ) . '\');" target="blank">
    Download This Wallpaper</a>'; 
```

}

希望这会对你有所帮助

# c++ - c++ unorderedmap向量下标超出范围

> ID：15445397
> 
> 赞同：0
> 
> 时间：2013-03-16T03:57:37.767
> 
> 标签：c++, vector, range, runtime-error, unordered-map

目前，当我一直在调用我的 getFunction 方法时，我遇到了严重的崩溃。我的程序编译得很好，但是当我运行并调用这个函数时，我得到“调试断言失败！”，“表达式：向量下标超出范围”。不知道如何处理这个问题，因为几年来我没有在 C++ 中做太多事情。

```
void* PluginMap::getFunction(char* pguid, char* fname){
    if(plugin_map.size()>0 && plugin_map.find(pguid)!=plugin_map.end())
    { 
        //plugin_map is an unorderedmap that is defined elsewhere.
        MicroMap* mm = &plugin_map[pguid];
        if((*mm).find(fname)!=(*mm).end())
        {
            //MicroMap is an unorderedmap that goes in plugin_map, and contains void*
            return (*mm)[fname];
        }
    }
    return 0;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:01:46.680

请避免 char* 与 std::unordered_map 使用正确的 std::string 应该没问题。char* 被视为指针类型，除非您为它定义了 std::hash，否则它可能会导致问题。

# ios - 如何在 iOS 上扩展 Activator 以识别新的输入手势？

> ID：15445399
> 
> 赞同：2
> 
> 时间：2013-03-16T03:58:18.240
> 
> 标签：ios, jailbreak, activator, cydia-substrate

我正在开发 iOS 上的自定义越狱解决方案。我正在尝试能够在 Activator 中添加新触发器。具体来说，我正在尝试为主页按钮定义一个轻按释放轻按并按住的行为，尽管这在理论上适用于任何设备输入。

现在我精通 MobileSubstrate，它可以让您在运行时对现有类进行[方法](http://cocoadev.com/wiki/MethodSwizzling)调配（有关更多信息，请参见此处：http: [//iphonedevwiki.net/index.php/MobileSubstrate](http://iphonedevwiki.net/index.php/MobileSubstrate)）以及提供其他功能和好处。但是，我不确定如何将其插入 Activator，因为我无法访问代码，虽然我可以使用 ClassDump 导出 Activator 的标头并筛选它们，但 Activator 是一个非常复杂的应用程序，它是为什么与其花一周时间浏览这一切，我希望其他人知道粗略的“注入点”（因为没有更好的术语），这可以让我朝着正确的方向前进。

请注意，虽然我可以简单地在系统级别监听我的操作，但这样做会使 Activator 短路，这会破坏我想要完成的目的，即添加一个可以*与*activator 一起使用的新操作：如果你愿意的话，激活器扩展。

那么有没有人有任何关于实现这一目标的信息或一个很好的起点？我希望有一点方向，所以我不必撕开代码的整个标头类转储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T06:50:46.990

看来您想做类似`LAEvent`. 以下是一些可以帮助您开始的信息：

1.  实施`LAEventDataSource`协议

    ```
    @protocol LAEventDataSource <NSObject>

    @required
    - (NSString *)localizedTitleForEventName:(NSString *)eventName;
    - (NSString *)localizedGroupForEventName:(NSString *)eventName;
    - (NSString *)localizedDescriptionForEventName:(NSString *)eventName;

    @optional
    - (BOOL)eventWithNameIsHidden:(NSString *)eventName;
    - (BOOL)eventWithName:(NSString *)eventName isCompatibleWithMode:(NSString *)eventMode;

    @end 
    ```

2.  注册事件数据源

    ```
    @interface LAActivator : NSObject
    - (void)registerEventDataSource:(id<LAEventDataSource>)dataSource forEventName:(NSString *)eventName;
    @end 
    ```

    现在您的活动`availableEventNames`在`LAActivator`

    ```
    @property (nonatomic, readonly) NSArray *availableEventNames; 
    ```

3.  发送事件

    ```
    @interface LAEvent : NSObject<NSCoding>
    + (id)eventWithName:(NSString *)name;
    + (id)eventWithName:(NSString *)name mode:(NSString *)mode;
    - (id)initWithName:(NSString *)name;
    - (id)initWithName:(NSString *)name mode:(NSString *)mode;
    @end

    @interface LAActivator : NSObject
    - (void)sendEventToListener:(LAEvent *)event;
    @end 
    ```

# c - 不确定在此处使用哪种数据类型

> ID：15445403
> 
> 赞同：1
> 
> 时间：2013-03-16T03:58:39.900
> 
> 标签：c, pointers

我必须使用一个如下所示的函数：

```
void pushNode (struct onode** head, struct onode* node) ; 
```

我试着用这个：

```
struct onode *head = NULL;
head=malloc(sizeof(struct onode));

struct onode *tempO;

pushNode(*head,tempO); 
```

我在终端中收到此错误：

```
expected ‘struct onode **’ but argument is of type ‘struct onode’ 
```

我不知道该放什么而不是`*head`. 您可以对此有所了解的任何信息将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T04:00:25.240

当您使用：

```
pushNode(*head, tempO); 
```

它*取消引用* `head`，将`struct onode *`变成`struct onode`.
你想*取它的地址*，这可以说是解引用的反面：

```
pushNode(&head, tempO); 
```

获取它的地址会使它从 a`struct onode *`变成 a `struct onode **`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:01:47.843

试着把`pushNode(&head,tempO);`

指针的地址，即指向指针的指针，即`struct node **`。

# android - 无法删除 AndroidManifest.xml 中的 activity_main.xml 和解析器异常。根元素之前的标记必须格式正确

> ID：15445404
> 
> 赞同：0
> 
> 时间：2013-03-16T03:59:28.000
> 
> 标签：android, eclipse-juno

然后显示：

1.  无法删除 /menu/activity_main.xml。
2.  AndroidManifest.xml 的解析器异常：尾部不允许有内容。
3.  AndroidManifest.xml 的解析器异常：根元素之前的文档中的标记必须格式正确。

我的 Xmls 文件是

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.school.feedback.app"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15"/>
     <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme">
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main">
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="MainActivity"/>      
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>        
        <activity
            android:name=".StudentActivity"
            android:label="@string/title_activity_student">
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.school.feedback.app.MainActivity"/>
        </activity>     
   </application>
</manifest> 
```

和activity_main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never" />
</menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:21:52.930

尝试清理你的项目。（在 Eclipse 中：项目->清理）

# core-data - 使用 ARC 将 iPhone 应用程序转换为 xcode 4.5.2 iOS6 后 CoreData NSPredicate 错误 NSInvalidArgumentException

> ID：15445408
> 
> 赞同：1
> 
> 时间：2013-03-16T04:01:26.933
> 
> 标签：core-data, ios6, nsdate

这是我在 stackoverflow 上的第一个问题。这个社区对我很有帮助，它为我的 iPhone 应用程序开发提供了很多解决方案。但是，我这周遇到了一个问题，花了两天时间没有任何进展。我在这里发布问题，希望能在你们的帮助下得到解决。

我正在使用 coredata 并且有两个表，Prayers 和 Schedules，具有多对多的关系。我想得到一份今天安排的祈祷清单。这是我的代码：

```
 NSPredicate *predicate;
    unsigned units = NSDayCalendarUnit | NSMonthCalendarUnit | NSWeekCalendarUnit | NSYearCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    [gregorian setTimeZone:[NSTimeZone localTimeZone]]; 
    [gregorian setFirstWeekday:1];
    NSDateComponents* comps = [gregorian components:units fromDate:[NSDate date]]; // Get necessary date components
    [comps setHour:0];
    [comps setMinute:0];
    [comps setSecond:1];

    //get beginning of today
    NSDate *startOfToday = [gregorian dateFromComponents:comps];
    //get the beginning of tomorrow
    [comps setDay:[comps day] + 1];
    NSDate *endOfDay = [gregorian dateFromComponents:comps];

    NSLog(@"%@ %@", startOfToday,endOfDay);

    predicate = [NSPredicate predicateWithFormat:@"ANY (schedules.nextEventDateTime >= %@ AND schedules.nextEventDateTime < %@) AND prayerType == 0 AND finished == YES AND answered == NO", startOfToday, endOfDay];

    [request setPredicate:predicate];
        NSError *error = nil;
    NSArray *fetchResults = [context executeFetchRequest:request error:&error]; 
```

在我升级到 xcode 4.5.2 和 ARC 之前，这段代码可以正常工作。在我使用 xcode 4.5.2 将应用程序转换为 ARC 之后。运行应用程序时，我在以下行出现错误（崩溃）（其他一切似乎都很好）：

```
 predicate = [NSPredicate predicateWithFormat:@"ANY (schedules.nextEventDateTime >= %@ AND schedules.nextEventDateTime < %@) AND prayerType == 0 AND finished == YES AND answered == NO", startOfToday, endOfDay]; 
```

控制台输出和错误是：

```
 2013-03-15 23:41:36.763 WePrayers[12121:c07] 2013-03-15 04:00:01 +0000 2013-03-16 04:00:01 +0000

     2013-03-15 23:41:37.837 WePrayers[12121:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unable to parse the format string "ANY (schedules.nextEventDateTime >= %@ AND schedules.nextEventDateTime < %@) AND prayerType == 0 AND finished == YES AND answered == NO"'
     *** First throw call stack:
     (0x29f2012 0x20ebe7e 0x1abc25 0x1aba43 0x1ab9f7 0x19ce5 0x186fb 0x61e8d5 0x61eb3d 0x190e83 0x29b1376 0x29b0e06 0x2998a82 0x2997f44 0x2997e1b 0x2f207e3 0x2f20668 0x56f65c 0x2ecd 0x2e05)
     libc++abi.dylib: terminate called throwing an exception 
```

我尝试将行更改为以下内容，并且没有任何问题：

```
 predicate = [NSPredicate predicateWithFormat:@"ANY schedules.nextEventDateTime >= %@ AND prayerType == 0 AND finished == YES AND answered == NO", startOfToday]; 
```

但是，我需要比较 schedules.nextEventDateTime >= startOfToday 和 < endOfDay 以获取仅适用于今天的时间表。

如果我将行更改为以下内容（删除括号）

```
 predicate = [NSPredicate predicateWithFormat:@"ANY schedules.nextEventDateTime >= %@ AND schedules.nextEventDateTime < %@ AND prayerType == 0 AND finished == YES AND answered == NO", startOfToday, endOfDay]; 
```

它将运行通过此行但在行上失败： NSArray *fetchResults = [context executeFetchRequest:request error:&error];

错误是：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“此处不允许多对多键”

谁能知道我的代码有什么问题？任何建议和意见都非常感谢。

谢谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:12:53.240

我认为在您的情况下`SUBQUERY`可能会对您有所帮助。

```
predicate = [NSPredicate predicateWithFormat:@"prayerType == 0 AND finished == YES AND answered == NO AND SUBQUERY(schedules, $sub, $sub.nextEventDateTime >= %@ AND $sub.nextEventDateTime <  %@).@count > 0", startOfToday, endOfDay]; 
```

并注意表达顺序。一般来说，连接（跨关系的查询）也是昂贵的操作，如果可以的话，你应该避免它们。除非第一个测试成功，否则避免进行连接。

# java - 使用空文件创建磁盘的“映像”

> ID：15445409
> 
> 赞同：0
> 
> 时间：2013-03-16T04:01:38.857
> 
> 标签：java, image, file, tree, iso

我正在尝试在java中创建类似于计算机硬盘驱动器的iso，但文件中没有数据。就像一个文件树，但是一个 iso。这发生在客户端A上。这样做的目的是通过GAE将此ISO文件树传输到另一个客户端（假设是客户端B），该客户端应该能够使用Windows资源管理器在他的计算机上安装iso。

以上是我想要实现的 - 我知道它非常具体，对此感到抱歉。但是，我只想知道如何创建文件中不包含任何数据的 ISO（或其他可安装的硬盘映像）。

文件中没有数据 = 文件仍然存在（我必须能够看到文件的名称），但它们是空的。你知道。用记事本打开它们，你得到的只是文件中的“”。或者一个空间。任何。关键是使iso的大小变小，这样我就可以传输到客户端B，而不是传输整个硬盘驱动器。在这个客户端 B 可以选择他想从另一台计算机获取的文件之后，那是另一回事了。

**问题：**

如何在Java中创建类似于计算机硬盘驱动器的ISO，但文件中没有数据？

随意推荐具有相同功能但采用不同方法的解决方案。

**更新：**

填充了 ISO 方法。创建了一个包含大量文件树的对象。如果你想这样做，请以某种方式与我联系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:41:09.497

只是用空文件复制整个文件结构：

```
// you may want to actually handle the IOException rather than just throwing it
public static void main(String[] args) throws IOException
{
  makeFileStructure(new File("someDirectory"), "someDestinationDirectory");
}

static void makeFileStructure(File src, String dest) throws IOException
{
  for (File f: src.listFiles())
  {
     String newPath = dest + File.separatorChar + f.getName();
     if (f.isDirectory())
     {
        if (!new File(newPath).mkdirs())
           // you may want to handle this better
           throw new IOException("Directory could not be created!");
        makeFileStructure(f, newPath);
     }
     else
        new File(newPath).createNewFile();
  }
} 
```

只要确保`"someDestinationDirectory"`不是 的子目录`"someDirectory"`，否则事情显然不会很顺利。

很确定您需要一个外部库来创建 ISO 映像（如果您想创建它）。尝试[谷歌搜索它](https://www.google.com/search?q=java+create+iso+file)。但是使用外部应用程序和[批处理文件](https://www.google.com/search?q=batch+file+create+iso)（在运行上述代码之后）可能会更容易。

# c# - 用户代码是否重新抛出 OperationCanceledException，从它自己的 try-catch 中捕获

> ID：15445418
> 
> 赞同：4
> 
> 时间：2013-03-16T04:02:22.603
> 
> 标签：c#, task-parallel-library

观察 cancelToken 取消请求的推荐方法似乎是 `ThrowIfCancellationRequested`.

但是如果它被用户 try-catch 捕获会发生什么？从[MSDN 的“如何：取消任务及其子项”](http://msdn.microsoft.com/en-us/library/dd537607.aspx)中添加了 try-catch 来说明问题：

```
snippet:

static void DoSomeWork(int taskNum, CancellationToken ct)
{
   try
   {
        for (int i = 0; i < maxIterations; i++)
        {
            // Do a bit of work. Not too much. 
            ...
            //ok not to do this check? most likely IsCancellationRequested does it already
            //if (ct.IsCancellationRequested)
            //{

                ct.ThrowIfCancellationRequested();

            //}
        }
    }
    catch(OperationCanceledException e1) // catching likely my own exception 
    {
       throw; // correct? anything else belongs here?
    }
    catch // ...
    {
        // do whatever else I might want to do here
    }
} 
```

我可以重新投掷吗？即我不会干扰任务 API 中的任何内容，是吗？

（我还将表达个人意见，有序取消-清理-返回的点似乎与例外是它的工具不一致；我认为还有其他方法可以实现这一点 - 我会继续挖掘）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:11:06.440

重新抛出应该没问题。但是不推荐使用无参数的 catch，因为它会吞下任何异常信息。您应该使用 catch (Exception) 并至少记录这些异常。

# jquery - JQuery appendto html被附加到错误的地方

> ID：15445423
> 
> 赞同：0
> 
> 时间：2013-03-16T04:03:21.103
> 
> 标签：jquery, html, appendto

我遇到了我认为可能是一个简单的 JQuery 问题，但这让我很头疼。首先，我只写了几个星期的 JQuery，所以我的代码很弱。

基于选择选项和按钮单击，我显示了一些 HTML。显示的 HTML 具有按钮，也可以单击这些按钮来显示其他 HTML。我遇到的问题是，当我两次显示相同的“父 HTML”并单击按钮以显示“子 HTML”时，如果在添加第二个“父 HTML” 来自第一个父级的“子 HTML”被添加到第二个父级的“子 HTML”。我试图增加我的 id/class 变量来解决我的问题，但没有成功。

```
\$('#productbtn').live('click', function(e) {
(comtrinc++);
(ctierinc++);
if (\$('#prodselect option:selected').text() == "Commercial Attachments"){
\$('#my_table > tbody > tr').eq(14).after('<tr id="comattach0'+(comtrinc)+'"><td colspan=4>&nbsp;</td></tr><tr name="commercial" id="comattach1'+(comtrinc)+'"><td ALIGN=left colspan=4><input id="buttonremc'+(comtrinc)+'" type="button" style="width: 110px; height: 22px;" value="Remove Product">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=4><b><font color="#ADD8E6">Product: &nbsp;Commercial Attachments</b></font></td></tr><tr id="comattach2'+(comtrinc)+'"><td colspan=4>&nbsp;</td></tr><TR id="comattach3'+(comtrinc)+'"><td align=left><font color="#ADD8E6">Activity Type:</td><td align=left><select name="caacttype'+ (cainc++) +'" style="width:87px;"><option></option><option value="send">Send</option><option value="rec">Receive</option><option value="view">View</option></select></td><TD ALIGN=left><font color="#ADD8E6">Monthly Commission Percentage:</TD><TD ALIGN=left><input type="text" name="mthcom" maxlength=3 size=10 value="00"></TD><tr id="comattach4'+(comtrinc)+'"><td colspan=4>&nbsp;</td></tr><TR id="comattach5'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Annual Flat Rate:</TD><TD ALIGN=left><input type="text" name="afr'+ (afrinc++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Monthly Flat Rate:</TD><TD ALIGN=left><input type="text" name="mfr'+ (mfrinc++) +'" size=10 value="00.00" ></TD><TR id="comattach6'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Monthly Flat Rate Attachment Limit:</TD><TD ALIGN=left><input type="text" name="mfral'+ (mfralinc++) +'" size=10 ></TD><TD ALIGN=left><font color="#ADD8E6">Excess Attachment Rate:</TD><TD ALIGN=left><input type="text" name="ear'+ (earinc++) +'" size=10 value="00.00" ></TD><tr id="comattach7'+(comtrinc)+'"><td colspan=4>&nbsp;</td></tr><TR id="comattach11'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Minimum Monthly Charge:</TD><TD ALIGN=left><input type="text" name="minmc'+ (minmcinc++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Maximum Monthly Charge:</TD><TD ALIGN=left><input type="text" name="maxmc'+ (maxmcinc++) +'" size=10 value="00.00" ></TD><tr id="comattach15'+(comtrinc)+'"><td colspan=4>&nbsp;</td></tr><TR id="comattach8'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Per Attachment Rate:</td><TD ALIGN=left><input type="text" name="par'+ (parinc++) +'" size=10 value="00.00" ></TD><td colspan=2>&nbsp;</td><TR id="comattach10'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Maximum Allowed Attachment Pages:</TD><TD ALIGN=left><input type="text" name="maap'+ (maapinc++) +'" size=10 ></TD><TD ALIGN=left><font color="#ADD8E6">Excess Page Rate:</TD><TD ALIGN=left><input type="text" name="epr'+ (eprinc++) +'" size=10 value="00.00" ></TD><tr id="comattach12'+(comtrinc)+'"><td colspan=4>&nbsp;</td></tr><tr id="comattach13'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Per Page Rate:</TD><TD ALIGN=left><input type="text" name="ppr'+ (pprinc++) +'" size=10 value="00.00" ></TD><td colspan=2>&nbsp;</td><TR id="comattach14'+(comtrinc)+'"><TD ALIGN=left><font color="#ADD8E6">Minimum Submission Charge:</TD><TD ALIGN=left><input type="text" name="minsc'+ (minscinc++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Maximum Submission Charge:</TD><TD ALIGN=left><input type="text" name="maxsc'+ (maxscinc++) +'" size=10 value="00.00" ></TD><tr class="comattach9'+(comtrinc)+'"><td colspan=4><input id="addtiercom'+(comtrinc)+'" type="button" style="width: 110px; height: 22px;" value="Add Tier"></td></tr>');

\$('#buttonremc').click(function() {
\$('#comattach0, #comattach1, #comattach2, #comattach3, #comattach4, #comattach5, #comattach6, #comattach7, #comattach8, .comattach9, #comattach10, #comattach11, #comattach12, #comattach13, #comattach14, #comattach15').remove();
})
var raisetierid = 1;
var rateplus = 1;
     var rangeplus = 1;
var catierrate = 1;
var rangemin = 1;
var rangemax = 1;

\$('#addtiercom'+(comtrinc)+'').live('click', function(e) {
\$('<tr id="commtier1'+(ctierinc)+'"><td colspan=4><input id="addnewtier'+(ctierinc)+'" type="button" style="width: 110px; height: 20px;" value="Add Tier" >&nbsp;&nbsp;<input id="removetiercom" type="button" style="width: 110px; height: 20px;" value="Remove Tier" ></td></tr><TR id="commtier2'+(ctierinc)+'"><TD ALIGN=left><font color="#ADD8E6">Tier Type</TD><TD ALIGN=left colspan=3>&nbsp;&nbsp;Attachments<input type="radio" name="brackettype" value="a">&nbsp;&nbsp;&nbsp;Pages<input type="radio" name="brackettype" value="p">&nbsp;&nbsp;&nbsp;Offices<input type="radio" name="brackettype" value="o"></TD><tr class="inctier'+(ctierinc) + (raisetierid++)+'"><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rateplus++) +' Rate</TD><TD ALIGN=left><input type="text" name="catierrate'+ (catierrate++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rangeplus++) +' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin'+ (rangemin++) +'" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax'+ (rangemax++) +'" size=10 value="" ></TD>').appendTo('.comattach9'+(comtrinc)+'');

\$('.comattach9'+(comtrinc)+'').hide();

\$('#addnewtier'+(ctierinc)+'').live('click', function(e) {
\$('<tr class="inctier'+(ctierinc) + (raisetierid++) +'"><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rateplus++) +' Rate</TD><TD ALIGN=left><input type="text" name="catierrate'+ (catierrate++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rangeplus++) +' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin'+ (rangemin++) +'" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax'+ (rangemax++) +'" size=10 value="" ></TD>').appendTo('.inctier'+(ctierinc)+'1');

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:56:32.880

我相信这是一个身份冲突问题。我切换到按钮上的类并添加了一些 if、if else 条件循环以确定附加到 tr id 的变量值。

[http://jsfiddle.net/JXeMS/30/](http://jsfiddle.net/JXeMS/30/)

```
$ 
```

# visual-studio-2008 - 注释引用枚举常量获取 C4638

> ID：15445425
> 
> 赞同：4
> 
> 时间：2013-03-16T04:03:30.623
> 
> 标签：visual-studio-2008, c++-cli, xml-documentation

我在标头中有以下内容（经过一些预处理以允许标头在 C++ 和 C++/CLI 中编译）：

```
namespace Fci
{

public enum class Key
{
    ...
    Alt,
    ...
};

...

/// <summary>
/// ...
/// </summary>
/// <remarks>
/// <para>
/// ... For instance, if <see cref="Fci::Key::Alt"/> is queried ...
/// </para>
/// </remarks>
[System::Flags] public enum class KeyStates
{
    ... 
```

该项目可以很好地构建代码，但包含此标头的所有 C++/CLI 源代码都得到以下信息：

> 警告 C4638：应用于“Fci.KeyStates”的 XML 文档注释：引用未知符号“Fci::Key::Alt”。

我试过 appending `F:`，我试过 absolute `::Fci::Key::Alt`，我试过用点代替 C++ 范围分隔符，还有其他一些东西。似乎没有任何效果。

我意识到在 C++/CLI 中前向引用 XML 可能会有很大的问题，但这甚至不是前向引用。

甚至可以在 XML 文档注释中引用枚举常量，尤其是在 C++/CLI 中？ECMA-372 并没有真正提到这一点。

如果有可能，我做错了什么？

# java - 我的 do-while 循环涉及字符位置有问题

> ID：15445427
> 
> 赞同：1
> 
> 时间：2013-03-16T04:03:44.393
> 
> 标签：java, loops, while-loop, do-while

当我运行程序时，输出只是连续的并且不会结束。这里的目标是尝试让 + 一直到左边或右边，然后打印哪一方获胜以及它花了多少圈。

代码现在正在执行，但它只从中间向左和向右移动一个空格，这让我认为它现在使用 for 循环

```
package test;

import java.util.Scanner;
import java.lang.Math;

public class Test {

    public static int MAX_LENGTH = 21;
    public static int MIN_LENGTH = 5;

    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.print("Enter the length of the rope: ");
        int ropeLength = keyboard.nextInt();
        while (ropeLength < MIN_LENGTH || ropeLength > MAX_LENGTH || ropeLength % 2 != 1) {
            System.out.println("Thats not a valid length (odd number between 5 and 21)");
            System.out.print("Enter the length of the rope: ");
            ropeLength = keyboard.nextInt();
        }
        char a;
        String flag = " ";
        for (int i = 0; i < ropeLength / 2; i += 1) {
            flag += "-";
        }
        flag += "+";

        for (int i = 0; i < ropeLength / 2; i += 1) {
            flag += "-";
        }
        System.out.println("");

        do {
            flag = "";
            double rand = Math.random();
            int i;
            if (rand > 0.5) {

                for (i = 0; i < (ropeLength / 2) - 1; i++) {
                    flag += "-";
                    }

                flag += "+";

                for (i = 0; i < (ropeLength / 2) + 1; i++) {
                    flag += "-";
                }
                System.out.println( flag );
            }
            if (rand < 0.5) {

                for (i = 0; i < (ropeLength / 2) + 1; i++) {
                    flag += "-";
                    }

                flag += "+";

                for (i = 0; i < (ropeLength / 2) - 1; i++) {
                    flag += "-";
                   }
                   System.out.println( flag );
                } 

        } while (flag.charAt(1) != '+' || flag.charAt(ropeLength) != '+');

        if (flag.charAt(0) == '+') {
            System.out.println("\nLeft side wins!");
        }
        else {
            System.out.println("\nRight side wins!");
        }    
        System.out.println("It took steps");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:27:10.460

您的代码中的逻辑存在多个问题。

1）在你的do-while循环中，你总是只是不断地附加到标志。这意味着对于每次迭代，您的标志只会变大，它实际上并没有移动`+`您在那里的标志。您可以有一个名为“nextState”的临时变量来生成下一个状态，然后在最后设置等于它的标志。

代码：

```
String nextState = "";
if (rand > 0.5) {
    for (i = 0; i < (ropeLength / 2) - 1; i++) {
        nextState += "-";
    }
    nextState += "+";
    for (i = 0; i < (ropeLength / 2) + 1; i++) {
        nextState += "-";
    }
    flag = nextState;
    System.out.println(flag);
} 
```

2）您正在检查是否`flag.charAt(1)=='+'`和`flag.charAt(ropeLength)=='+'`。由于数组有一个基于 0 的索引，这是不正确的，您实际上需要`0`和`ropeLength-1`。（我确实注意到您在 do-while 循环下正确地做到了）。

3) do-while 循环的问题是，如果您更正错误 1 ​​和 2，您肯定会将 + 向左和向右移动，但是您永远无法将它移动到位置`0`（一直向左) 或使用您当前的逻辑定位`ropeLength-1`（一直向右）。可以做这样的事情，你也可以为另一个 if 做类似的事情。

```
if (rand > 0.5) {
  i = 0;
  while (i + 1 < flag.length() && flag.charAt(i + 1) != '+') {
    nextState += "-";
    i++;
  }
  nextState += "+";
  i++;
  while (i < flag.length()) {
    nextState += "-";
    i++;
  }
  flag = nextState;
} 
```

4）您初始化`flag = " ";`但您只想要`flag = "";`（一个空字符串），因为标志只包含`-`'s 和 a `+`。

5)`while (flag.charAt(0) != '+' || flag.charAt(ropeLength - 1) != '+');`不正确。这应该是`&&`因为您的原始陈述总是正确的，并且循环永远不会结束。`+`只有在开头和结尾都有一个不可能的情况下，您的原始陈述才会是错误的。

6）不是真正的问题，但`if (rand > 0.5)`你可以使用 if-else 而不是 two `if`。如果 rand 正好等于 0.5，你的代码什么也不做。由于您必须计算步骤，因此您需要将其中一个更改为`rand <= 0.5`或`rand >= 0.5`仅使用 if-else。

一旦你解决了这些问题。你已准备好出发。很努力！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T04:17:35.887

您需要注意标志的位置。目前，您只将标志放在中心左侧或右侧的一个位置。您可能希望将标志打印方法拉入辅助方法中，以简化可读性并更清楚地了解您需要跟踪的内容。

一旦你用调用这个方法替换了你的三个打印方法，你应该更清楚你需要跟踪什么并作为参数传递，以使一切正常。

这样的事情应该让你开始：

```
public static void printFlag(int ropeLength, int flagPosition) {
    for (int i = 0; i < flagPosition; i += 1) {
        System.out.print("-");
    }
    System.out.print("+");

    for (int i = flagPosition + 1; i < ropeLength; i += 1) {
        System.out.print("-");
    }
    System.out.println();
} 
```

注意：使用 a`StringBuilder`而不是一堆`print()`调用可能是个好主意，但我将把它作为练习留给读者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T04:12:38.120

您需要更改最后一行，从：

`while (flag.charAt(1) != '+' || flag.charAt(ropeLength) != '+');`

至

`while (flag.charAt(0) != '+' && flag.charAt(ropeLength) != '+');`

使用`||`意味着只有一个条件必须为真，并且由于您使用的是 while 循环，因此您是说如果第一个位置不等于`+`或最后一个位置不等于，`+`那么您希望循环继续.

* * *

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T04:12:45.803

你永远不会在每次迭代开始时重置你的标志

正如 knoight 所说，你需要 && 运算符

你需要类似的东西：

```
do {
flag = "";
... your existing code

 } while ( (flag.charAt(1) != '+') && (flag.charAt(ropeLength) != '+') ); 
```

看起来你的旗帜会随着我上面提出的修复随机跳动。也许您只想在每次迭代中将标志向左或向右移动一个位置？

你可以这样做：

```
int flagpos = (ropeLength / 2)+1;
do {
    flag = "";
    double rand = Math.random();
    int i;
    if (rand > 0.5) {
        flagpos++;
    else
        flagpos--;
    for (i = 0; i < flagpos - 1; i++) 
        flag += "-";
    flag += "+";
    for (i = flagpos + 1; i < ropeLength ; i++) 
        flag += "-";

        System.out.println( flag );
    } while (flag.charAt(1) != '+' || flag.charAt(ropeLength) != '+'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T04:35:18.260

如前所述，以下将起作用。

```
 do {
       flag = "";
       //do stuff
    } while (flag.charAt(1) != '+' && flag.charAt(ropeLength-1) != '+'); 
```

问题是你掷硬币来移动绳子，绳子越长，你到达终点的机会就越小。

# html - 如何使我的导航栏在我的 html 中相同？

> ID：15445430
> 
> 赞同：31
> 
> 时间：2013-03-16T04:04:20.637
> 
> 标签：html

对于每个新页面，我都必须更新导航面板。这意味着我从一个页面到另一个页面复制和粘贴我的导航栏。我添加的页面越多，它就越难。现在我有不一致的导航栏。所以我正在寻找一种方法来制作一个只包含导航栏的 html 文件，然后将它嵌入到我的代码中，就像我对 CSS 和 JavaScript 所做的那样。这样，如果我编辑一个文件，所有其他页面都会更新。如果我使用 iframe 标签，会有很多问题，但我知道没有其他标签可以满足我的需要。所以我该怎么做？我做了一些研究，但我能找到的只是 iframe 标签。我该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-03T23:43:10.297

如果你的页面是严格的 HTML+JavaScript，你可以使用 HTML DOM 的 innerHTML 属性。这是一个例子：

**索引.html**

```
 <body>
  <nav id="navMenu"></nav>
  <div> rest of web page body here </div>
  <script src="script.js"></script>
 </body> 
```

**about.html**

```
 <body>
  <nav id="navMenu"></nav>
  <div> rest of web page body here </div>
  <script src="script.js"></script>
 </body> 
```

**脚本.js**

```
 document.getElementById("navMenu").innerHTML =
 '<ul>'+
  '<li><a href="index.html">Home</a></li>'+
  '<li><a href="services.html">Services</a></li>'+
  '<li><a href="about.html">About</a></li>'+
 '</ul>'; 
```

这里重要的一行是 nav 标签，你需要做的就是在这个示例 about.html 的其他页面中添加这一行。

我还推荐 PHP 或类似的东西来完成你所需要的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T04:11:08.327

如果您的页面是严格的 HTML，那么您只需进行复制和粘贴。如果您使用的是 PHP，那会好很多，然后您可以简单地执行**include**或**require**，但现在的情况是，您只需要为导航进行干净的 HTML 编码。缩进你的代码，然后你会更容易在所有页面上复制和翻页。

如果您可以使用简单的 PHP 代码，请阅读以下内容：[http ://www.w3schools.com/php/php_includes.asp](http://www.w3schools.com/php/php_includes.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T04:12:09.960

我**强烈**建议使用 PHP：

```
<?php include "header.html"; ?> 
```

* * *

但是，如果这不是一个选项，您可以使用[Server Side Includes](http://www.javascriptkit.com/howto/ssi2.shtml)：

在同一目录中的文件：

```
<!--#include file="header.html"--> 
```

文件在不同的目录：

```
<!--#include virtual="/header.html"--> 
```

你需要一个 Linux/Apache（不是 Windows）服务器才能工作。您还需要使用`.shtml`文件扩展名。

* * *

或者，如果您想保留`.html`扩展名，您可以让 Apache “认为”所有`.html`文件实际上都是`.php`：

在您网站的根目录创建一个 .htaccess 文件并添加以下行：

```
AddType application/x-httpd-php .html .htm 
```

如果您将 PHP 作为 CGI 运行（可能不是这种情况），您应该改为：

```
AddHandler application/x-httpd-php .html .htm 
```

（取自[这个答案](https://stackoverflow.com/a/4687217/1563422)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T04:22:06.860

如果你想用PHP来实现，这个，你可以做类似下面的代码。您将拥有 2 个“模板”文件，然后是您需要的许多“内容”文件。

*   `header.php`将在标题中包含内容（徽标、导航菜单等）
*   `footer.php`将包括页脚上的内容（底部导航、版权、免责声明等）
*   `content.php`将包括您希望显示的实际内容。您可以拥有无​​限数量的“内容”页面。

请注意，虽然这些文件具有`.php`扩展名，但 HTML 代码仍然可以正常工作。所以你可以为每个做这样的事情`content.php`：

**内容.php**

```
<?php include "header.php"; ?>

<div class="content">
Your page content will go here
</div>

<?php include "footer.php"; ?> 
```

**头文件.php**

```
<html>
<body>
<div class="header">
Header content such as nav bar here
</div> 
```

**页脚.php**

```
<div class="footer">
Footer content such as copyright here
</div>
</body>
</html> 
```

这样，您只需更改 和 的内容`header.php`一次`footer.php`，更改将反映在您包含文件的所有页面中。

如果您有任何其他问题或想再次解释某些内容，请随时发表评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-14T09:35:27.463

事实上，如果你像我一样只做前端的事情，使用 jQuery 的 load() 就绰绰有余了。就像 Skitty 和 fskirschbaum 所说的那样。

但我想补充几点，
1.根据@Skitty的评论，在服务器端加载你的navbar.html很重要，就像简单地将它托管在你的github.io网站上并通过它的URL引用它一样

```
 $(document).ready(function() {
   $('#nav-container').load('https://berlinali.github.io/test%20header%20template/header.html #nav');} 
```

2.如果你有css文件，把它放在你的html文件<header>部分的<style></style>里面。

如果您需要一些参考，我会将我的代码推送到 github 上。希望能帮助到你！ [https://github.com/BerlinaLI/berlinali.github.io/tree/master/test%20header%20template](https://github.com/BerlinaLI/berlinali.github.io/tree/master/test%20header%20template)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T04:33:29.170

在这种情况下，PHP 可能是最好的方法，但由于听起来您已经在纯 HTML 和 JavaScript 中设置了所有内容，因此您可以考虑使用 jQuery 将外部文件加载到 DOM 中。

```
jquery.load('header.html') 
```

这当然有它自己的一系列问题，但是您可以从一个简单的 .js 框架有效地控制一切，而无需使用 php 包含并且不需要 iFrame。

您仍然可能希望在没有打开 JavaScript 的情况下解决浏览器的后备问题，所以我只建议在不了解所有细节的情况下这样做，而且我仍然建议 php 仍然是一个更好的解决方案，因为您允许服务器这样做繁重的工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-16T04:07:27.317

您可以使用服务器端脚本语言，如 php 或 ruby​​。或者你可以创建一些说 menu.json 文件并在 javascript 中创建菜单。

1.  使用服务器端，您应该设置服务器，或者您可以使用[XAMPP](http://www.apachefriends.org/en/xampp.html)进行快速设置。

2.  使用所有菜单链接创建 header.html

3.  使用`<?php include 'header.html'; ?>`行包含菜单文件（您使用它的所有文件都应具有 .php 扩展名，或者您可以编辑 .html 扩展名的 php 配置文件）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T17:21:15.663

我自己想通了，你可以使用 JavaScript 文件并使用 document.write 然后把它放在你想要的地方：

```
<script type="text/javascript" src="/js/sidebar.js"/> 
```

这是我的js文件：

```
document.write("<div id='sidebartop'>");
document.write("<p>Navigation</p>");
document.write("</div>"); 
```

如果要在行内同时使用双引号和单引号，请注意这一点，我认为 < 和 > 符号必须用双引号引起来。这是我的完整代码：

```
 ----/js/sidebar.js----
document.write("<div id='sidebartop'>");
document.write("<p>Navigation</p>");
document.write("</div>");
document.write("<div id='sidebar'>");
if (page==1) { var p=" style='text-decoration: underline;'" } else { var p=" style='text-decoration: normal;'" }
if (page==2) { var pp=" style='text-decoration: underline;'" } else { var pp=" style='text-decoration: normal;'" }
if (page==3) { var ppp=" style='text-decoration: underline;'" } else { var ppp=" style='text-decoration: normal;'" }
if (page==4) { var pppp=" style='text-decoration: underline;'" } else { var pppp=" style='text-decoration: normal;'" }
if (page==5) { var ppppp=" style='text-decoration: underline;'" } else { var ppppp=" style='text-decoration: normal;'" }
document.write("<p><"+'a href="http://brandonc.handcraft.com/"'+p+">Home</a></p>");
document.write("<p><"+'a href="http://brandonc.handcraft.com/about"'+pp+">About The Author</a></p>");
document.write("<p><"+'a href="http://brandonc.handcraft.com/sevenmages"'+ppp+">The Seven Mages</a></p>");
document.write("<p><"+'a href="http://brandonc.handcraft.com/comment"'+pppp+">Leave A Comment</a></p>");
document.write("<p><"+'a href="http://brandonc.handcraft.com/calender"'+ppppp+">Calender</a></p>");
document.write("</div>");

     ----In place where you want code to go----
<script>var page=5</script>
<script type="text/javascript" src="/js/sidebar.js"/> 
```

可能不是最有效的，我强烈建议在其他答案中使用 PHP，但这对我有用，并且不需要在每个 url 后添加 .php 。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-14T13:01:15.323

只需使用 jQuery .load()。这是非常容易使用。这是一个例子

**导航栏.html**

```
<div>This is the navigation bar</div> 
```

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
<title>Home Page</title>
</head>
<body>

<!--HEADER-->
<div id="nav-container"></div>
<!--HEADER-->

<p>This is the homepage.</p>
<script type="text/javascript">
$(document).ready(function() {
$('#nav-container').load('header.html');
});
</script>
</body>
</html> 
```

**about.html**

```
<!DOCTYPE html>
<html>
<head>
<title>About Page</title>
</head>
<body>

<!--HEADER-->
<div id="nav-container"></div>
<!--HEADER-->

<p>This is the about page.</p>
<script type="text/javascript">
$(document).ready(function() {
$('#nav-container').load('header.html');
});
</script>
</body>
</html> 
```

# c# - 检查字典是否包含子字符串？

> ID：15445432
> 
> 赞同：6
> 
> 时间：2013-03-16T04:04:37.910
> 
> 标签：c#, string, dictionary, string-parsing

假设我有两个具有以下键值对的字典：

```
1, "Hello"
2, "Example" 
```

另一个字典如下：

```
1, "HelloWorld"
2, "Example2" 
```

我想知道这些字典中是否包含子字符串“hello”。
`dictionary.ContainsValue("Hello")`将适用于第一个示例，但不适用于第二个示例。如何检查字典中所有值中是否存在子字符串？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T04:07:22.243

只需使用`Any`to 检查包含“Hello”的第一个值

```
dictionary.Any(kvp=>kvp.Value.Contains("Hello")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:24:31.513

字典不允许搜索子字符串。要找到它，您需要枚举所有值并检查每个值的子字符串，如 juharr 所建议的那样。然而，这种方法效率极低。仅当您根本不关心搜索性能时才使用它。
如果您需要良好的性能，请使用后缀数组算法。[https://en.wikipedia.org/wiki/Suffix_array](https://en.wikipedia.org/wiki/Suffix_array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T04:08:13.150

```
dictionary.Values.Any(v => v.Contains("Hello")); 
```

Dictionary 本身不是 IEnumerable，因此它不会应用 LINQ 扩展。

# java - 与元素类型“ListView”关联的属性“android:id”的前缀“android”未绑定

> ID：15445435
> 
> 赞同：0
> 
> 时间：2013-03-16T04:05:05.590
> 
> 标签：java, apache-flex, flex4.5

我不断收到此错误

与元素类型“ListView”关联的属性“android:id”的前缀“android”未绑定。

错误所在的代码位

```
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:choiceMode="singleChoice">
</ListView> 
```

当此代码在 flex 中不处于第一个 veiw 状态时，它可以工作，因为如果我创建另一个组件，代码可以工作但我需要在 homeview 中显示 id 引用的项目列表，但一直说未定义状态

`

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <s:List
        android:id="@+id/Games"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </s:List>
    </LinearLayout> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:41:18.783

我认为您应该将 @android:id/list 更改为 @+id/list

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:choiceMode="singleChoice">
</ListView> 
```

这应该工作！

# ruby - 配置中的数组解析不同于本地和服务器

> ID：15445441
> 
> 赞同：0
> 
> 时间：2013-03-16T04:06:25.627
> 
> 标签：ruby, yaml, jekyll, github-pages

我有以下内容`_config.yml`：

```
slides: [1,2,3] 
```

然后我在我的视图上迭代它：

```
{% for i in site.slides %}
  // dummy slide
{% endfor %} 
```

它在我的本地开发机器上运行良好，虚拟幻灯片显示三次，但在 github 页面上只显示一次。你们知道为什么吗？这可能是版本问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:17:01.260

github 上有非常“严格”的 YAML 解析器版本。几乎同样的问题[已经被问到了](https://stackoverflow.com/questions/14916854/jekyll-liquid-does-not-parse-key-value-dicts-in-page-preamble-on-github-pages/14917463#14917463)。

我建议您对数组使用标准 YAML 表示法：

```
slides:
  - 1
  - 2
  - 3 
```

希望这可以帮助。

# r - 对数据框进行子集化和求和

> ID：15445451
> 
> 赞同：0
> 
> 时间：2013-03-16T04:07:41.957
> 
> 标签：r, partitioning, summary

我的目标是：给定一个二分响应的数据框（例如，0 和 1），我如何生成一个汇总矩阵：1）有两列（一列用于正确回答第一个问题，另一列用于错误回答）， 2) 具有与获得特定总分的个人数量有关的行。

例如，假设我有 50 个受访者和 5 个问题。这意味着有 6 种响应模式（全部不正确/0，然后是 1、2、3 和 4 正确，最后全部正确/1）。我希望得到的矩阵对象看起来像：

```
... INCORRECT ..... CORRECT   <-- pertaining to a 0 or 1 on the first item respectively

[1]... 10 ............ 0      <-- indicating people who, after responded 0 on the first question, responded 0 on all questions (5 zeroes)
[2]... 8  ............ 2      <-- indicating 12 people who got 1 correct (8 got the first question incorrect, 2 got the first question correct)
[3]... 4 ............. 8      <-- indicating 12 people who got 2 correct (4 got the first question incorrect but got 2 of the other questions correct, 8 got the first question and 1 other correct)
[4]... 6 ............. 3      <-- indicating 9 people who got 3 correct
[5]... 3 ............. 4      <-- indicating 7 people who got 4 correct
[6]... 0 ............. 8      <-- pertaining to the 8 people who answered all 5 questions correctly (necessarily indicating they got the first question correct). 
```

我的思路是，我需要按第一个问题的表现（一次工作一列）拆分数据框，并找到每一行（参与者）的总分，然后将它们列在第一列中；然后对第二个做同样的事情？

这将被构建到一个包中，所以我试图弄清楚如何只使用基本函数来做到这一点。

这是一个类似于我将使用的示例数据集：

```
n <- 50
z <- c(0, 1)
samp.fun <- function(x, n){
    sample(x, n, replace = TRUE)
}

data <- data.frame(0)
for (i in 1:5){
    data[1:n, i] <- samp.fun(z, n)
}
names(data)[1:5] <- c("x1", "x2", "x3", "x4", "x5") 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T08:26:18.143

使用@alexwhan 的数据，这是一个`data.table`解决方案：

```
require(data.table)
dt <- data.table(data)

dt[, list(x1.incorrect=sum(x1==0), x1.correct=sum(x1==1)), keyby=total]
#    total x1.incorrect x1.correct
# 1:     0            2          0
# 2:     1            7          1
# 3:     2            9          8
# 4:     3            7          6
# 5:     4            0          7
# 6:     5            0          3 
```

等效地，如果您不介意稍后设置列名，则可以更直接地获得结果，使用`table`with`as.list`如下：

```
dt[, as.list(table(factor(x1, levels=c(0,1)))), keyby=total]
#    total 0 1
# 1:     0 2 0
# 2:     1 7 1
# 3:     2 9 8
# 4:     3 7 6
# 5:     4 0 7
# 6:     5 0 3 
```

`as.list(.)`注意：你可以用这样的包装`setNames()`：

```
dt[, setNames(as.list(table(factor(x1, levels=c(0,1)))), 
           c("x1.incorrect", "x1.correct")), keyby = total] 
```

也可以一次性设置列名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T04:44:45.750

因为您在创建数据时没有使用`set.seed`，所以我无法根据您的示例检查此解决方案，但我认为这就是您所追求的。我正在使用函数 from`reshape2`和`plyr`来获取数据摘要。

```
library(reshape2)
library(plyr)
#create data
set.seed(1234)
n <- 50
z <- c(0, 1)
samp.fun <- function(x, n){
  sample(x, n, replace = TRUE)
}

data <- data.frame(0)
for (i in 1:5){
  data[1:n, i] <- samp.fun(z, n)
}
names(data)[1:5] <- c("x1", "x2", "x3", "x4", "x5")
data$id <- 1:50

#First get the long form to make summaries on
data.m <- melt(data, id.vars="id")

#Get summary to find total correct answers
data.sum <- ddply(data.m, .(id), summarise,
                  total = sum(value))

#merge back with original data to associate with id
data <- merge(data, data.sum)
data$total <- factor(data$total)

#summarise again to get difference between patterns
data.sum2 <- ddply(data, .(total), summarise,
               x1.incorrect = length(total) - sum(x1),
               x1.correct = sum(x1))
data.sum2
#   total x1.incorrect x1.correct
# 1     0            2          0
# 2     1            7          1
# 3     2            9          8
# 4     3            7          6
# 5     4            0          7
# 6     5            0          3 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T19:06:55.903

不错的谜题 - 如果我做对了，这也应该这样做：

```
table(rowSums(data),data[,1]) 
```

# php - 如何使用 php 将 .caf 文件转换为 .mp3 文件？

> ID：15445457
> 
> 赞同：1
> 
> 时间：2013-03-16T04:08:45.273
> 
> 标签：php

我使用 php 创建了一个 web 服务，它将音频文件从 IOS 设备上传到 server.audio 文件被上传为服务器不支持的 .caf 格式，所以有什么方法可以将 .caf 文件转换为 .mp3 或 .wav 文件？

我想创建将 .caf 文件转换为 .mp3 文件的 PHP 脚本，对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:35:39.073

[Core Audio Format (.caf)](http://en.wikipedia.org/wiki/Core_Audio_Format)是 Apple 为音频文件开发的音频文件容器。.caf 文件可以包含不同的音频文件格式，就像 .mov 容器用于不同的视频格式一样。

因此，通过 Program 将格式从 .CAF 更改为 .MP3 是一项艰巨的任务，但并非不可能。我认为您可以使用[FFMPEG](http://ffmpeg.zeranoe.com/builds/)将格式从 CAF 更改为 MP3，只需下载最新版本或创建自己的版本，请使用以下命令：

```
FFMPEG -i song.caf song.mp3 
```

我根本没有尝试过事情，但认为它会起作用。还有一个称为[PACPL](http://pacpl.sourceforge.net/)的 Perl 脚本可用，通过它可以完成：

```
shell_exec("pacpl input.caf -to mp3"); 
```

您可能需要也可能不需要重新配置权限或在其中使用 sudo，具体取决于主机服务器配置。

.caf 只是一种容器格式，里面的内容可能会有所不同，尽管绝大多数情况下它将是 PCM 未压缩的音频。这实际上可能是 Audacity 和其他程序的绊脚石，因为他们期待 PCM，而 .caf 中的内容是其他东西，比如 AAC。我已经看到 WAV 文件发生了类似的事情（这也是一种容器格式，但大多数时候都包含 PCM 音频）。

# class - 你如何在matlab中制作带有对象作为成员变量的类？

> ID：15445458
> 
> 赞同：3
> 
> 时间：2013-03-16T04:08:50.857
> 
> 标签：class, matlab, member-variables

我在 matlab 中有一个项目，其目录结构如下：

```
+namespace\
    @class1\
        class1.m
    @class2\
        class2.m
mainfile.m 
```

在 class1.m 我有类似以下的内容

```
classdef class1

    %readonly variables
    properties(GetAccess = 'public',SetAccess = 'private')
        forename;
        lastname;
        middlename;

    end

    properties(Constant = true)

        %in centipascals
        p1 = class2(param1,param2); %this is the part I need to work

    end

    methods(Access = public)

        function this = class1(fname,lname,mname)

            this.forename = fname;
            this.lastname = lname;
            this.middlename = mname;

        end
    end
end 
```

我似乎无法让这门课正常工作。Class1 无法识别 class2 的构造函数（可能是因为未正确导入某些内容）。如何导入 class2 或者我需要做什么才能将其他类实例作为成员变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:03:57.683

在 Matlab 中，您需要完全限定对命名空间中类的引用，即使来自同一命名空间中的其他类。像这样。

```
classdef class1
    properties (Constant = true)
        %in centipascals
        p1 = namespace.class2(param1,param2);
    end
end 
```

您可以`import`来自同一命名空间的其他类，但`import`s 仅在每个函数级别工作，并且在所有 AFAIK 中都不能在属性块中工作，因此它在这种特定情况下不起作用，并且可能比它更麻烦其他地方值得。

# spring - 带有所选项目的选择框

> ID：15445460
> 
> 赞同：0
> 
> 时间：2013-03-16T04:09:28.940
> 
> 标签：spring, spring-mvc, drop-down-menu

假设我在选择框中填充了一个国家列表，如下所示。

```
<form:select path="country">
    <form:option value="-" label="--Please Select"/>
    <form:options items="${countryList}" itemValue="countryId" itemLabel="countryName"/>
</form:select> 
```

在属性的`countryList`EL 中，一个-指的是一个 Hibernate 实体。`items``List<Country>``Country`

我需要根据`countryId`提供的情况选择一个合适的国家，以便生成的 HTML 大致如下所示。

```
<select name="country">
    <option value="">--Please Select</option>
    <option value="1">Austria</option>
    <option value="2" selected="selected">United Kingdom</option>
    <option value="3">United States</option>
</select> 
```

在这种情况下，英国是选定的国家。是否可以不使用`<c:foreach>`JSTL 的循环？

我正在使用 Spring 3.2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:21:45.760

您需要在动作类中声明一个变量`country` 。然后放入setter和getter，然后在动作类中设置您的值。但是选择框路径名和变量名必须相同。

例如[见这里](https://stackoverflow.com/questions/9616065/setting-a-selectbox-value-from-spring-mvc)

# php - php主机在局域网上没有正确重定向

> ID：15445469
> 
> 赞同：-1
> 
> 时间：2013-03-16T04:10:52.180
> 
> 标签：php, redirect, localhost

我有这段代码，保存在一个名为“functions.php”的文件中

```
$host = $_SERVER['HTTP_HOST'];
$folder = rtrim(dirname($_SERVER['PHP_SELF']),'/\\'); 

function redirect_to_home(){    /*function to redirect the user ot his profile page, or       admin page if he is an administrator*/
if(admin_class::isadmin()){    
header("Location:http://$host$folder//adminindex.php"); 
exit();
}
 else{
 header("Location:http://$host$folder/profile.php");
 exit();
 }     
}

function redirect_to_welcome(){
header("Location:http://$host$folder/index.php");
exit;
}

function redirect_to_loan(){
header("Location:http://$host$folder/loan.php");
exit;
} 
```

当浏览网站本身时，这些不能正常工作，我只能通过网站内的链接导航，不过我已经完成了整个事情（我只是使用了 header("Location:http:// `localhost`/YMMLS//pagename .php”）在我开发时）。

我在这里需要一些启发，我通过局域网启动这个网站，那些连接的人可以通过 xxx.xxx.xxx.x/YMMLS 访问它。但是，当然，当调用这些函数中的任何一个时，网站都无法正确重定向。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:26:20.847

NetBeans 警告您，因为变量是在函数*外部*声明的。它们不存在于函数的范围内。当然，你可以调用函数——从函数外部，这些变量*确实*存在——但那是不同的。:)

这里——试试这个；

```
class redirect {

    public $host = '';
    public $folder = '';

    public function __construct() {
        $this->host = $_SERVER['HTTP_HOST'];
        $this->folder = rtrim(dirname($_SERVER['PHP_SELF']),'/\\');
    }

    public function home() {    /*function to redirect the user ot his profile page, or admin page if he is an administrator*/
        if(admin_class::isadmin()){
            header("Location: http://$host$folder/adminindex.php");
        } else {
            header("Location: http://$host$folder/profile.php");
        }
        exit();
    }

    public function welcome() {
        header("Location: http://$host$folder/index.php");
        exit;
    }

    public function loan() {
        header("Location: http://$host$folder/loan.php");
        exit;
    }
} 
```

不是简单地`redirect_to_home();`调用 this 而是由`redirect::home();`.

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:26:23.900

尝试这个

```
host = $_SERVER['HTTP_HOST'];
$folder = rtrim(dirname($_SERVER['PHP_SELF']),'/\\'); 

function redirect_to_home(){  

 global $host, $folder;    

if(admin_class::isadmin()){    
  header("Location:http://$host$folder//adminindex.php"); 
  exit();
 }
 else{
 header("Location:http://$host$folder/profile.php");
exit();
}     
} 
```

如果这可行，那么在所有其他功能中更改它祝你好运！

文档[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# c# - LINQ 查询不以字符串为值

> ID：15445474
> 
> 赞同：0
> 
> 时间：2013-03-16T04:12:13.923
> 
> 标签：c#, asp.net, .net, linq

是否可以使用 LINQ 编写如下查询？给我错误

> “不能应用于 double 和 string 类型的操作数”

```
key = Request.QueryString["key"];

var query = from p in db.VERSIONs where p.vr_key == key select p; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:35:36.170

试试这个：

```
Double key = Convert.ToDouble(Request.QueryString["key"]);

var query = from p in db.VERSIONs where p.vr_key == key select p; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T04:41:50.517

使用 TryParse 方法确保您的字符串兼容/可转换，因为查询字符串可以是任何内容。否则，用户可以轻松地破坏您的代码，只需键入一些内容作为密钥。

```
double key;
if(Double.TryParse(Request.QueryString["key"], out key))
{
    var query = from p in db.VERSIONs 
                        where p.vr_key == key 
                        select p;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-16T04:14:45.847

使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd466166.aspx)进行转换`p.vr_key`。

试试这个：

```
key = Request.QueryString["key"];

var query = from p in db.VERSIONs where SqlFunctions.StringConvert(p.vr_key) == key select p; 
```

# ruby-on-rails - 尝试通过 heroku 上的 bootstrap-sass 导入引导程序但出现错误

> ID：15445480
> 
> 赞同：2
> 
> 时间：2013-03-16T04:13:13.397
> 
> 标签：ruby-on-rails, twitter-bootstrap, heroku, bootstrap-sass

我有一个 rails 应用程序，我正在尝试按照此处的说明使用 bootstrap-sass 在 heroku 上导入 bootstrap：[https ://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)

在我的 application.css 中，我有：

```
@import "bootstrap";
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 */

@import "overrides.css.scss"; 
```

但是当我`git push heroku master`.

```
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       File to import not found or unreadable: bootstrap.
       Load path: /tmp/build_8elam02dzb95
       (in /tmp/build_8elam02dzb95/app/assets/stylesheets/application.css)
       (sass):1
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/import_node.rb:67:in `rescue in import'
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/import_node.rb:45:in `import'
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/import_node.rb:28:in `imported_file'
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/import_node.rb:37:in `css_import?'
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/visitors/perform.rb:217:in `visit_import'
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/visitors/base.rb:37:in `visit'
       /tmp/build_8elam02dzb95/vendor/bundle/ruby/1.9.1/gems/sass-3.2.7/lib/sass/tree/visitors/perform.rb:100:in `visit' 
```

我究竟做错了什么？

**编辑 #1** 输出显示 bootstrap-sass 已安装

```
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       Using rake (10.0.3)
       Using i18n (0.6.4)
       Using multi_json (1.6.1)

       ....
       Using sass (3.2.7)
       Using bootstrap-sass (2.2.2.0)
       Using coffee-script-source (1.6.1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T15:45:20.827

已经有一段时间了，所以不确定这是否仍然相关。看来您的 application.css 应该被命名为 application.css.scss 以便由 Sass 处理。否则，普通的 CSS @import 指令将无法识别 Sass Bootstrap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T16:30:07.420

I would rather suggest not to rename the application.css but create a new file called custom.css.scss and and the

> @import "bootstrap";

there. Also make sure you have **sass-rails** gem in your gemfile.
The above configuration is working fine for me. And my application.css looks like this:

```
*
*= require_self
*= require_tree .
*/ 
```

# vim - 运行 tmux 时映射箭头键

> ID：15445481
> 
> 赞同：8
> 
> 时间：2013-03-16T04:13:18.777
> 
> 标签：vim, tmux

这些键映射在 tmux 中停止工作。在我的`.vimrc`，我有：

```
nmap <Space> i
map <C-Down> <C-w>j
map <C-Up> <C-w>k
map <C-Left> <C-w>h
map <C-Right> <C-w>l 
```

当我运行时`:map`，我看到：

```
 <C-Right>     <C-W>l
   <C-Left>      <C-W>h
   <C-Up>        <C-W>k
   <C-Down>      <C-W>j 
```

然而，当我同时按下控制键和箭头键时，它的行为就好像没有设置键绑定一样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T07:38:24.400

Vim 知道类似*xterm*的终端（由 TERM 以 开头`xterm`，或者对序列的特定响应`t_RV`，如果它已定义）支持某些修改键的扩展序列，但它不假设对`screen`TERM （你应该在*tmux*）。

但是，您可以告诉 Vim 这些序列并在 TMUX 存在时启用它们，并且 TERM 以`screen`（第一行在*tmux*下启用（更好）鼠标支持，您可能也喜欢）开始：

```
if &term =~ '^screen' && exists('$TMUX')
    set mouse+=a
    " tmux knows the extended mouse mode
    set ttymouse=xterm2
    " tmux will send xterm-style keys when xterm-keys is on
    execute "set <xUp>=\e[1;*A"
    execute "set <xDown>=\e[1;*B"
    execute "set <xRight>=\e[1;*C"
    execute "set <xLeft>=\e[1;*D"
    execute "set <xHome>=\e[1;*H"
    execute "set <xEnd>=\e[1;*F"
    execute "set <Insert>=\e[2;*~"
    execute "set <Delete>=\e[3;*~"
    execute "set <PageUp>=\e[5;*~"
    execute "set <PageDown>=\e[6;*~"
    execute "set <xF1>=\e[1;*P"
    execute "set <xF2>=\e[1;*Q"
    execute "set <xF3>=\e[1;*R"
    execute "set <xF4>=\e[1;*S"
    execute "set <F5>=\e[15;*~"
    execute "set <F6>=\e[17;*~"
    execute "set <F7>=\e[18;*~"
    execute "set <F8>=\e[19;*~"
    execute "set <F9>=\e[20;*~"
    execute "set <F10>=\e[21;*~"
    execute "set <F11>=\e[23;*~"
    execute "set <F12>=\e[24;*~"
endif 
```

正如评论所指出的，您还需要`xterm-keys`启用窗口的选项。您可以像这样对所有窗口执行此操作（在您的 中`~/.tmux.conf`）：

```
set-option -gw xterm-keys on 
```

（请记住，更改`~/.tmux.conf`不会自动加载。要生效，您需要手动运行此命令（在`tmux`shell 命令中，或在前缀`:`提示符下），或重新加载配置文件`source ~/.tmux.conf`（在`tmux`shell 命令中，或在前缀`:`提示符处），或重新启动服务器（退出所有会话并重新启动*tmux*））。

# vba - 在 PowerPoint 演示文稿之间复制形状的合理方法

> ID：15445482
> 
> 赞同：0
> 
> 时间：2013-03-16T04:13:39.710
> 
> 标签：vba, powerpoint, copy-paste

我在这里和那里看到了许多建议使用[`Copy()`](http://msdn.microsoft.com/en-us/library/office/ff744698.aspx)和[`Paste()`](http://msdn.microsoft.com/en-us/library/office/ff745532.aspx)方法在幻灯片、演示文稿和应用程序之间复制形状的答案：

*   [如何在 C# 中将形状从一张幻灯片复制到另一张幻灯片？](https://stackoverflow.com/questions/5740749/how-can-i-copy-shapes-from-one-slide-to-another-slide-in-c)
*   [Powerpoint 编辑如何将一个形状从一张幻灯片复制到另一张幻灯片](https://stackoverflow.com/questions/15043767/powerpoint-editing-how-to-copy-one-shape-from-one-slide-to-another)
*   [将笔记从 PowerPoint 导入 Word 的宏](http://codewala.wordpress.com/2011/01/05/macro-to-import-notes-from-powerpoint-into-word/)

这些方法工作正常但有副作用，因为它们在未经用户同意的情况下与剪贴板交互。当程序在后台运行一系列复制粘贴操作时，用户不可能使用剪贴板。

我一直在寻找备份和恢复剪贴板的可能性，但看起来这是一种错误的方式（[请参阅](https://stackoverflow.com/questions/2243241/how-do-i-save-a-copy-of-the-clipboard-and-then-revert-back-to-it) [这些](https://stackoverflow.com/questions/923323/how-to-preserve-the-contents-of-the-clipboard) [答案](https://stackoverflow.com/questions/2578900/how-do-i-backup-and-restore-the-system-clipboard-in-c)）。不使用剪贴板进行复制的另一个原因是，如果用户在我们调用之前将某些内容复制到剪贴板，我们`Paste()`最终会得到错误的结果。

有没有理智的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:35:41.053

您可以想象在形状上使用 .Export 方法将其导出为例如 EMF，然后将其作为图片插入到目标幻灯片中。但是，这不会给您与复制/粘贴形状相同的结果。

我不会太担心用户在您的程序复制/粘贴之间复制一些东西。即使 PPT 允许这样做（我不确定它会不会），您的复制/粘贴操作也几乎是瞬间完成的。

这仍然存在不删除用户可能放在剪贴板上的任何其他内容的问题。Office 维护自己的剪贴板，独立于 Windows 系统剪贴板，但除了一条评论之外，我找不到任何关于如何以编程方式控制它的信息。来自我信任的消息来源的一条评论说您不能，至少在 2000 年以后的 Office 版本中不能。但您可能需要进一步研究。

# php - 试图让 imagick 在 Windows x64 的 PHP 5.4.3 上运行

> ID：15445493
> 
> 赞同：6
> 
> 时间：2013-03-16T04:16:52.550
> 
> 标签：php, imagick, php-extension

我通过 WAMP 2.2 和 imagick ( ) 安装了 Windows 7 64 位、PHP 5.4.3 `ImageMagick-6.8.3-9-Q16-x64-dll.exe`。我尝试使用来自很多来源的 imagick 的 php dll，但它们都在 apache_error.log 中给出了这个错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.4.3/ext/php_imagick.dll' - %1 is not a valid Win32 application.\r\n in Unknown on line 0 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:35:30.273

也许这可以帮助你： [在 WAMP 上安装 IMAGEMAGICK 的分步说明？](https://stackoverflow.com/questions/2942523/step-by-step-instructions-for-installing-imagemagick-on-wamp) 和

[http://www.elxsy.com/2009/07/installing-imagemagick-on-windows-and-using-with-php-imagick/](http://www.elxsy.com/2009/07/installing-imagemagick-on-windows-and-using-with-php-imagick/)

“为了清楚起见，所有的 PHP dll 文件（库）都是 32 位的，所以如果你的系统是 64 位的，你仍然需要下载和运行 32 位的 ImageMagick、Apache 等。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-17T02:24:39.537

我经历了同样的痛苦。Win64+php-x86。它最终变得相对容易修复 - 都是关于路径的。

我首先安装了完整的 ImageMagic-x64，然后最终安装了扩展。后来我注意到安装程序在 PATH 的开头附加了 ImageMagic。以防万一我尝试使用 x86 版本并收到有关缺少 DLL 的不同错误。

所以，以防万一我完全卸载了 ImageMagic 并从环境中清除了所有对它的引用（它在 PATH 和 MAGICK_HOME 中）。

然后我只安装了扩展（在我的例子中来自[http://windows.php.net/downloads/pecl/releases/imagick/3.1.2/](http://windows.php.net/downloads/pecl/releases/imagick/3.1.2/)我得到了 php_imagick-3.1.2-5.4-nts-vc9-x86.zip ) 并将其解压缩到 ext 文件夹中。

在我尝试从命令提示符运行此命令后发现：*php -i*并得到一个错误，它找不到*CORE_RL_wand_.dll* - 但我确实在 ext 文件夹中看到了它！

**在 PATH 环境变量的末尾添加 C:\Progra~2\PHP\EXT 解决了它（在确保没有其他 DLL 干扰之后）。**

注意：我使用了“C:\Program Files (x86)\php\ext”的 8.3 路径——以防万一我看到 PHP 有时很挑剔，无法解析带有空格的路径。

另外-在弄乱了PATH之后，您可能必须重新启动PC-在我的情况下，它可以立即在命令提示符下运行，但是IIS具有缓存（较旧）路径。

总之：我怀疑 PHP 扩展依赖于一些 DLL（它作为 ZIP 的一部分提供），但相同的也是标准 ImageMagick 安装的一部分，除了两者不完全相同 - 如果你碰巧是加载错误的有趣的事情发生......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-08T10:30:28.947

对于 64 位 WAMP（在我的情况下是 PHP 5.4.x，PHP 5.4.12 线程安全），工作组合如下：

**ImageMagick-6.8.7-8-Q16-x64-dll.exe**或可能来自此处的最新 Q16/x64/DLL：[链接](https://www.imagemagick.org/script/download.php#windows)

和**php_imagick-svn20120508-5.4-VC9-x64**来自这里：[http ://www.mediafire.com/php-win64-extensions](http://www.mediafire.com/php-win64-extensions)

# ruby-on-rails - 更新了 Rails 测试套件设置？

> ID：15445496
> 
> 赞同：0
> 
> 时间：2013-03-16T04:17:11.593
> 
> 标签：ruby-on-rails, rspec, guard, growl

有人知道 Rails Rspec/Guard/Spork/Growl 测试套件设置的更新版本吗？

这些曾经很棒，但随着 Ruby、Rails 和 gems 的升级已经过时了。

[http://ygamretuta.me/2011/08/10/rails-3-setting-up-guard-with-rspec-and-spork-with-growl-notifications-in-osx/](http://ygamretuta.me/2011/08/10/rails-3-setting-up-guard-with-rspec-and-spork-with-growl-notifications-in-osx/)

[https://eq8scrapbook.heroku.com/equivalents_scrap/on_rspec_spork_guard_configuration](https://eq8scrapbook.heroku.com/equivalents_scrap/on_rspec_spork_guard_configuration)

即使是 M. Hartl Ruby on Rails 教程说明也会导致 Guard 抛出 ChildProcess 错误并且不会加载 DRb 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:14:29.963

这是我发现可以解决上述问题的方法：

`rails new app_name --skip-test-framework`

**宝石文件**

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'bootstrap-sass', '2.1'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  gem 'rspec', '2.11.0'
  gem 'guard', '1.6.2'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.4.2'  
  gem 'spork-rails', '3.2.1'
  gem 'spork', '1.0.0rc3'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
  gem 'database_cleaner', '0.7.0'
  gem 'launchy', '2.1.0'
  gem 'rb-fsevent', :require => false
  gem 'growl', '1.0.3'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

然后运行这个：

```
bundle update; bundle install; rails g rspec:install; guard init rspec; guard init spork; spork --bootstrap 
```

**保护文件**

将 boostrapped spork 块放在 rspec 块之前

**spec_helper.rb**

将以 "ENV["RAILS_ENV"] ||= 'test'" 开头的块放在 Spork.prefork 块中

**.rspec** 添加`--drb`

运行“守卫”，你应该一切准备就绪。

# c# - 在 RichTextBox 中选择 Word 并右键单击，然后在 ContextMenu C# 中显示

> ID：15445502
> 
> 赞同：-1
> 
> 时间：2013-03-16T04:18:33.340
> 
> 标签：c#, winforms, contextmenu, spell-checking

程序员，硕士。

请帮助我......让我通过你的例子来学习。

描述：当一个单词被选中并右键单击时，该单词会显示在一个弹出窗口中。例如，输入：“巴塞罗那是我最喜欢的足球俱乐部”。

在我选择了“**足球**”这个词后，然后右击，这个词出现在一个弹出菜单“这就是**足球**”中。

当我在弹出菜单中单击这些单词时，它会将 INPUT 中的单词替换为弹出菜单中的单词，就像这个例子一样。

输出：巴塞罗那是我最喜欢**的，这是足球**俱乐部。”

请帮我。

我真的对 ContextMenu 视而不见..

这是代码：

```
ContextMenu contextMenu = new ContextMenu();
private EventHandler menuHandler;

public Form1()
{
    InitializeComponent();
    menuHandler = new System.EventHandler(this.Menu_Click);// what's menu_click?
}

private void Menu_Click(object sender, EventArgs e)
{
    richTextBox1.SelectionFont = new Font("Times New Roman", 12);
    richTextBox1.SelectionColor = Color.Black;

    richTextBox1.SelectedText = ((MenuItem)sender).Text;
}

private void richTextBox1_MouseDown(object sender, MouseEventArgs e)
{
   try
   {
      if (e.Button == MouseButtons.Right)
      {
         Point point = new Point(e.X, e.Y);
         int index = richTextBox1.GetCharIndexFromPosition(point);
         textBox1.Text = Convert.ToString(index);

         int length = 1;

         if (!Char.IsWhiteSpace(richTextBox1.Text[index]))
         {
             while (index > 0 && !Char.IsWhiteSpace(richTextBox1.Text[index - 1]))
             { index--; length++; }

              while (index + length < richTextBox1.Text.Length &&
                  !Char.IsWhiteSpace(richTextBox1.Text[index + length]) &&
                  (!Char.IsPunctuation(richTextBox1.Text[index + length]) ||
                  richTextBox1.Text[index + length] == Char.Parse("'"))
              ) length++;

              richTextBox1.SelectionStart = index;
              richTextBox1.SelectionLength = length;
              contextMenu.MenuItems.Clear(); // error here
              contextMenu.MenuItems.Add("This is "+richTextBox1.SelectedText, menuHandler); //error here
              //What's next Sir?
             }
         }
     }
  } 
```

//下一个...，我真的不知道。

它不起作用。请帮忙 ：） ：） ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:28:37.930

你只是用下面的东西来显示菜单

```
contextMenu1.Show(richTextBox1, point); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:58:49.773

显示 contextMenu 添加

```
richTextBox1.ContextMenu = contextMenu ; 
```

重新初始化或在 Form1() 中

# css - 提醒系统模板

> ID：15445503
> 
> 赞同：0
> 
> 时间：2013-03-16T04:18:45.590
> 
> 标签：css, html, templates

这可能是一个错误的问题，但我真的不擅长设计。我正在寻找一个只有`3 text fields`一个`large button`基本上是提交按钮的网站模板。我一直在寻找很多，但没有成功。我想写一个`reminder`系统，所以一直在寻找一个模板。

如果有这样的模板可用，请提供一个链接，以便我可以下载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:22:48.483

具有这几个要求的布局似乎不像火箭科学。

[也许可以从http://todomvc.com/](http://todomvc.com/)上的代码示例中获得一些灵感。他们用几个 js 框架编写了一个待办事项应用程序。

认为布局可能对您有所帮助

# java - 复制 InputStream，如果大小超过限制则中止操作

> ID：15445504
> 
> 赞同：20
> 
> 时间：2013-03-16T04:18:51.013
> 
> 标签：java, inputstream

我尝试将 InputStream 复制到文件，如果 InputStream 的大小大于 1MB，则中止复制。在Java7中，我编写了如下代码：

```
public void copy(InputStream input, Path target) {
    OutputStream out = Files.newOutputStream(target,
            StandardOpenOption.CREATE_NEW, StandardOpenOption.WRITE);
    boolean isExceed = false;
    try {
        long nread = 0L;
        byte[] buf = new byte[BUFFER_SIZE];
        int n;
        while ((n = input.read(buf)) > 0) {
            out.write(buf, 0, n);
            nread += n;
            if (nread > 1024 * 1024) {// Exceed 1 MB
                isExceed = true;
                break;
            }
        }
    } catch (IOException ex) {
        throw ex;
    } finally {
        out.close();
        if (isExceed) {// Abort the copy
            Files.deleteIfExists(target);
            throw new IllegalArgumentException();
        }
    }} 
```

*   第一个问题：有没有更好的解决方案？
*   第二个问题：我的另一个解决方案——在复制操作之前，我计算了这个InputStream的大小。所以我复制 InputStream`ByteArrayOutputStream`然后得到`size()`. 但问题是 InputStream 可能不是`markSupported()`，因此 InputStream 不能在复制文件操作中重用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-05-06T09:02:45.057

我个人的选择是一个 InputStream 包装器，它在读取字节时对其进行计数：

```
public class LimitedSizeInputStream extends InputStream {

    private final InputStream original;
    private final long maxSize;
    private long total;

    public LimitedSizeInputStream(InputStream original, long maxSize) {
        this.original = original;
        this.maxSize = maxSize;
    }

    @Override
    public int read() throws IOException {
        int i = original.read();
        if (i>=0) incrementCounter(1);
        return i;
    }

    @Override
    public int read(byte b[]) throws IOException {
        return read(b, 0, b.length);
    }

    @Override
    public int read(byte b[], int off, int len) throws IOException {
        int i = original.read(b, off, len);
        if (i>=0) incrementCounter(i);
        return i;
    }

    private void incrementCounter(int size) throws IOException {
        total += size;
        if (total>maxSize) throw new IOException("InputStream exceeded maximum size in bytes.");
    }

} 
```

我喜欢这种方法，因为它是透明的，它可以在所有输入流中重复使用，并且可以很好地与其他库一起使用。例如，使用 Apache Commons 复制最大 4KB 的文件：

```
InputStream in = new LimitedSizeInputStream(new FileInputStream("from.txt"), 4096);
OutputStream out = new FileOutputStream("to.txt");
IOUtils.copy(in, out); 
```

PS：上面的实现与[BoundedInputStream](https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/input/BoundedInputStream.html)的主要区别在于 BoundedInputStream 在超过限制时不会抛出异常（它只是关闭流）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-18T12:23:36.190

有以下现成的解决方案：

*   来自 Guava 的[ByteStreams.limit()](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/io/ByteStreams.html#limit(java.io.InputStream,%20long))
*   来自 Apache Commons 的[BoundedInputStream](https://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/input/BoundedInputStream.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T04:34:03.130

> 第一个问题：有没有更好的解决方案？

并不真地。当然，并没有明显好转。

> 第二个问题：我的另一个解决方案 - 在复制操作之前，我计算了 InputStream 的大小。所以我将 InputStream 复制到 ByteArrayOutputStream 然后获取 size()。但问题是 InputStream 可能没有 markSupported()，所以 InputStream 不能在复制文件操作中重复使用。

[撇开以上是一个陈述而不是一个问题......]

如果您已将字节复制到`ByteArrayOutputStream`，则可以`ByteArrayInputStream`从`baos.toByteArray()`. 所以你不需要标记/重置原始流。

然而，这是一种非常丑陋的实现方式。尤其是因为无论如何您都在读取和缓冲*整个输入流。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-22T09:21:04.480

这是来自 Apache Tomcat 的实现：

```
package org.apache.tomcat.util.http.fileupload.util;

import java.io.FilterInputStream;
import java.io.IOException;
import java.io.InputStream;

/**
 * An input stream, which limits its data size. This stream is
 * used, if the content length is unknown.
 */
public abstract class LimitedInputStream extends FilterInputStream implements Closeable {

    /**
     * The maximum size of an item, in bytes.
     */
    private final long sizeMax;

    /**
     * The current number of bytes.
     */
    private long count;

    /**
     * Whether this stream is already closed.
     */
    private boolean closed;

    /**
     * Creates a new instance.
     *
     * @param inputStream The input stream, which shall be limited.
     * @param pSizeMax The limit; no more than this number of bytes
     *   shall be returned by the source stream.
     */
    public LimitedInputStream(InputStream inputStream, long pSizeMax) {
        super(inputStream);
        sizeMax = pSizeMax;
    }

    /**
     * Called to indicate, that the input streams limit has
     * been exceeded.
     *
     * @param pSizeMax The input streams limit, in bytes.
     * @param pCount The actual number of bytes.
     * @throws IOException The called method is expected
     *   to raise an IOException.
     */
    protected abstract void raiseError(long pSizeMax, long pCount)
            throws IOException;

    /**
     * Called to check, whether the input streams
     * limit is reached.
     *
     * @throws IOException The given limit is exceeded.
     */
    private void checkLimit() throws IOException {
        if (count > sizeMax) {
            raiseError(sizeMax, count);
        }
    }

    /**
     * Reads the next byte of data from this input stream. The value
     * byte is returned as an <code>int</code> in the range
     * <code>0</code> to <code>255</code>. If no byte is available
     * because the end of the stream has been reached, the value
     * <code>-1</code> is returned. This method blocks until input data
     * is available, the end of the stream is detected, or an exception
     * is thrown.
     * <p>
     * This method
     * simply performs <code>in.read()</code> and returns the result.
     *
     * @return     the next byte of data, or <code>-1</code> if the end of the
     *             stream is reached.
     * @throws  IOException  if an I/O error occurs.
     * @see        java.io.FilterInputStream#in
     */
    @Override
    public int read() throws IOException {
        int res = super.read();
        if (res != -1) {
            count++;
            checkLimit();
        }
        return res;
    }

    /**
     * Reads up to <code>len</code> bytes of data from this input stream
     * into an array of bytes. If <code>len</code> is not zero, the method
     * blocks until some input is available; otherwise, no
     * bytes are read and <code>0</code> is returned.
     * <p>
     * This method simply performs <code>in.read(b, off, len)</code>
     * and returns the result.
     *
     * @param      b     the buffer into which the data is read.
     * @param      off   The start offset in the destination array
     *                   <code>b</code>.
     * @param      len   the maximum number of bytes read.
     * @return     the total number of bytes read into the buffer, or
     *             <code>-1</code> if there is no more data because the end of
     *             the stream has been reached.
     * @throws  NullPointerException If <code>b</code> is <code>null</code>.
     * @throws  IndexOutOfBoundsException If <code>off</code> is negative,
     * <code>len</code> is negative, or <code>len</code> is greater than
     * <code>b.length - off</code>
     * @throws  IOException  if an I/O error occurs.
     * @see        java.io.FilterInputStream#in
     */
    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int res = super.read(b, off, len);
        if (res > 0) {
            count += res;
            checkLimit();
        }
        return res;
    }

    /**
     * Returns, whether this stream is already closed.
     *
     * @return True, if the stream is closed, otherwise false.
     * @throws IOException An I/O error occurred.
     */
    @Override
    public boolean isClosed() throws IOException {
        return closed;
    }

    /**
     * Closes this input stream and releases any system resources
     * associated with the stream.
     * This
     * method simply performs <code>in.close()</code>.
     *
     * @throws  IOException  if an I/O error occurs.
     * @see        java.io.FilterInputStream#in
     */
    @Override
    public void close() throws IOException {
        closed = true;
        super.close();
    }
} 
```

您应该继承它并覆盖该`raiseError`方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-19T11:13:47.040

检查输入流大小的更方便和更快的解决方案  

```
 FileChannel chanel = (FileChannel) Channels.newChannel(inputStream);
    MappedByteBuffer buffer = chanel.map(FileChannel.MapMode.READ_ONLY, 0, chanel.size());

    System.out.println(buffer.capacity()); // bytes 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T05:20:20.200

我喜欢基于 ByteArrayOutputStream 的解决方案，我不明白为什么它不能工作

```
public void copy(InputStream input, Path target) throws IOException {
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    BufferedInputStream bis = new BufferedInputStream(input);
    for (int b = 0; (b = bis.read()) != -1;) {
        if (bos.size() > BUFFER_SIZE) {
            throw new IOException();
        }
        bos.write(b);
    }
    Files.write(target, bos.toByteArray());
} 
```

# java - Java/Python 应用程序的源代码文件夹结构（bin、lib、src、config 等）

> ID：15445506
> 
> 赞同：4
> 
> 时间：2013-03-16T04:19:05.527
> 
> 标签：java

如何确定 Java 应用程序的源代码文件夹结构（bin、lib、src、config 等）？我主要想开发与数据挖掘和信息检索相关的应用程序。是否有资料或书籍可以让我了解更多相关信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T04:23:37.787

对于 Java 和 Python，情况就不一样了。

对于 Java，它取决于您使用的构建自动化工具。如果您决定使用 Maven，它会建议您使用源文件夹代码结构。请参阅[标准目录布局简介](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。Ant 使用另一种目录结构：[使用 Ant 构建：目录结构](http://www.developer.com/java/other/article.php/994991/Building-with-Ant-Directory-Structure.htm)。

至于 Python，请参阅这个问题：[Python 应用程序的最佳项目结构是什么？](https://stackoverflow.com/questions/193161/what-is-the-best-project-structure-for-a-python-application)

# jquery - $.post 成功 $.post

> ID：15445509
> 
> 赞同：0
> 
> 时间：2013-03-16T04:19:29.567
> 
> 标签：jquery, ajax

有没有办法在 $.post 的成功回调中再次拥有 $.post 。如果第一个 $.post 不成功，我会要求提示。如果确认它再次调用执行另一个 $.post

我的代码如下

```
postvars = {
                order_no:order_no,
                tracking_no:tracking_no,
                continue_submit: false
            };  

url =  '../shipment/shipment_submit_order_status_ajax';  

  $.post(url, postvars, function(data1) {
        if(data1.status == "success")
        {
            alert("Order submitted 1");
        }
        else if(data1.status != "success")
        {
            var r = confirm("The Order is NOT ready to be shipped. Please check the order again. Are you sure you want to continue to ship this?");
            if(r)
            {
                //Submit order
                postvars = {
                    order_no:order_no,
                    tracking_no:tracking_no,
                    continue_submit: true
                };  

                url =  '../shipment/shipment_submit_order_status_ajax';

                $.post(url, postvars, function(data) { 
                    if(data.status == "success")
                    {
                        alert("Order submitted 2");
                    }
                }, 'json');  
            }
        }

    }, 'json'); 
```

它正在执行两个调用，而不是在执行第二个 ajax 调用之前先提示确认对话框。任何人有任何解决方案？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:31:13.650

我建议你在 jQuery 中使用延迟对象：

```
function ajaxMe(data){
    var df = $.Deferred();
    $.post('my_const_url', data, function(resp){
        if(resp.status !== 'success'){
            df.resolve(other_data);
        }else{
            df.reject(other.data);
        }
    }, 'json');
    return df.promise();
}

ajaxMe(postvars).done(function(response_data){
    ajaxMe(whatever_you_want);
}).fail(function(){
    var r = confirm("Do you really want it ?");
    if(r){
       ajaxMe(some_data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-16T04:24:57.103

而不是 'if(r)' 使用 'if(true===r)'

因为在 javascript 中，'if(r)' 表示是否定义了变量 'r'。在这种情况下，定义了这个变量“r”，因此满足了“if”部分。

# c++ - 几乎相同的 C++ 和 Python 代码的执行时间差异很大

> ID：15445512
> 
> 赞同：1
> 
> 时间：2013-03-16T04:20:38.687
> 
> 标签：c++, python, execution-time

我试图用 Python编写[问题 12（Project Euler）的解决方案。](http://projecteuler.net/problem=12)解决方案太慢了，所以我尝试在互联网上检查其他人的解决方案。我发现[这段代码](http://www.staticallylinked.com/2010/03/finding-first-triangle-number-to-have.html)是用 C++ 编写的，它与我的 python 代码几乎完全相同，只有一些微不足道的差异。

Python：

```
def find_number_of_divisiors(n):
    if n == 1:
        return 1

    div = 2 # 1 and the number itself
    for i in range(2, n/2 + 1):
        if (n % i) == 0:
            div += 1
    return div

def tri_nums():
    n = 1
    t = 1
    while 1:
        yield t
        n += 1
        t += n

t = tri_nums()
m = 0
for n in t:
    d = find_number_of_divisiors(n)
    if m < d:
        print n, ' has ', d, ' divisors.'
        m = d

    if m == 320:
        exit(0) 
```

C++：

```
#include <iostream>

int main(int argc, char *argv[])
{
    unsigned int iteration = 1;
    unsigned int triangle_number = 0;
    unsigned int divisor_count = 0;
    unsigned int current_max_divisor_count = 0;
    while (true) {
        triangle_number += iteration;
        divisor_count = 0;
        for (int x = 2; x <= triangle_number / 2; x ++) {
            if (triangle_number % x == 0) {
                divisor_count++;
            }
        }
        if (divisor_count > current_max_divisor_count) {
            current_max_divisor_count = divisor_count;
            std::cout << triangle_number << " has " << divisor_count
                      << " divisors." << std::endl;
        }
        if (divisor_count == 318) {
            exit(0);
        }

        iteration++;
    }
    return 0;
} 
```

python 代码在我的机器上执行需要 1 分 25.83 秒。而 C++ 代码大约需要 4.628 秒。它的速度快了 18 倍。我曾预计 C++ 代码会更快，但不会有这么大的优势，而且这也只是一个简单的解决方案，它只包含 2 个循环和一堆增量和模块。

虽然我很想知道如何解决这个问题的答案，但我想问的主要问题是**为什么 C++ 代码这么快？我在 python 中使用/做错了什么吗？**

* * *

**用 xrange 替换范围：**

用 xrange 替换 range 后，python 代码大约需要 1 分 11.48 秒才能执行。（大约快 1.2 倍）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T04:44:23.243

与 Python 相比，这正是 C++ 将大放异彩的那种代码：一个相当紧凑的循环执行算术运算。（我将在这里忽略算法加速，因为您的 C++ 代码使用相同的算法，而且您似乎并没有明确要求这样做......）

C++ 将这种代码编译成相对较少数量的处理器指令（并且它所做的一切可能都适合 CPU 缓存的超快速级别），而 Python 有很多间接级别，它正在为每个手术。例如，每次增加一个数字时，它都会检查该数字是否溢出并且需要移动到更大的数据类型中。

也就是说，一切都不一定会丢失！[这也是像PyPy](http://pypy.org/)这样的即时编译器系统擅长的那种代码，因为一旦它通过循环几次，它就会将代码编译成类似于 C++ 代码开始的东西。在我的笔记本电脑上：

```
$ time python2.7 euler.py >/dev/null
python euler.py  72.23s user 0.10s system 97% cpu 1:13.86 total

$ time pypy euler.py >/dev/null                       
pypy euler.py > /dev/null  13.21s user 0.03s system 99% cpu 13.251 total

$ clang++ -o euler euler.cpp && time ./euler >/dev/null
./euler > /dev/null  2.71s user 0.00s system 99% cpu 2.717 total 
```

使用 Python 代码的版本`xrange`而不是`range`. 优化级别对我来说对 C++ 代码没有影响，使用 GCC 代替 Clang 也没有。

虽然我们正在这样做，但这也是[Cython](http://cython.org/)可以做得很好的情况，它将几乎 Python 代码编译为使用 Python API 的 C 代码，但在可能的情况下使用原始 C。如果我们通过添加一些类型声明来稍微更改您的代码，并删除迭代器，因为我不知道如何在 Cython 中有效地处理这些，得到

```
cdef int find_number_of_divisiors(int n):
    cdef int i, div
    if n == 1:
        return 1

    div = 2 # 1 and the number itself
    for i in xrange(2, n/2 + 1):
        if (n % i) == 0:
            div += 1
    return div

cdef int m, n, t, d
m = 0
n = 1
t = 1
while True:
    n += 1
    t += n
    d = find_number_of_divisiors(t)
    if m < d:
        print n, ' has ', d, ' divisors.'
        m = d

    if m == 320:
        exit(0) 
```

然后在我的笔记本电脑上我得到

```
$ time python -c 'import euler_cy' >/dev/null
python -c 'import euler_cy' > /dev/null  4.82s user 0.02s system 98% cpu 4.941 total 
```

（在 C++ 代码的 2 倍以内）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T05:46:27.723

重写除数计数算法以使用[除数函数](http://en.wikipedia.org/wiki/Divisor_function)使运行时间减少到不到 1 秒。仍然可以使其更快，但不是真正必要的。

这是为了表明：在你对语言特性和编译器进行任何优化之前，你应该检查你的算法是否是瓶颈。编译器/解释器的技巧确实非常强大，如 Dougal 的回答所示，Python 和 C++ 之间的差距对于等效代码是封闭的。但是，正如您所看到的，算法的更改立即带来了巨大的性能提升，并将运行时间降低到算法效率低下的 C++ 代码的水平（我没有测试 C++ 版本，而是在我 6 岁的计算机上测试，下面的代码在 ~0.6s 内完成运行）。

下面的代码是使用 Python 3.2.3 编写和测试的。

```
import math

def find_number_of_divisiors(n):
    if n == 1:
        return 1

    num = 1

    count = 1
    div = 2
    while (n % div == 0):
        n //= div
        count += 1

    num *= count

    div = 3
    while (div <= pow(n, 0.5)):
        count = 1
        while n % div == 0:
            n //= div
            count += 1

        num *= count
        div += 2

    if n > 1:
        num *= 2

    return num 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T06:07:18.143

这是我自己的变体，基于 nhahtdh 的因子计数优化加上我自己的素因子分解代码：

```
def prime_factors(x):
    def factor_this(x, factor):
        factors = []
        while x % factor == 0:
            x /= factor
            factors.append(factor)
        return x, factors
    x, factors = factor_this(x, 2)
    x, f = factor_this(x, 3)
    factors += f
    i = 5
    while i * i <= x:
        for j in (2, 4):
            x, f = factor_this(x, i)
            factors += f
            i += j
    if x > 1:
        factors.append(x)
    return factors

def product(series):
    from operator import mul
    return reduce(mul, series, 1)

def factor_count(n):
    from collections import Counter
    c = Counter(prime_factors(n))
    return product([cc + 1 for cc in c.values()])

def tri_nums():
    n, t = 1, 1
    while 1:
        yield t
        n += 1
        t += n

if __name__ == '__main__':
    m = 0
    for n in tri_nums():
        d = factor_count(n)
        if m < d:
            print n, ' has ', d, ' divisors.'
            m = d
            if m == 320:
                break 
```

# php - PHP 到 Javascript 数组？

> ID：15445515
> 
> 赞同：0
> 
> 时间：2013-03-16T04:20:54.307
> 
> 标签：php, javascript, arrays

我已经用谷歌搜索并查看了一段时间，但似乎无法弄清楚这一点。我试图满足的唯一要求是返回一个格式正确的 javascript 数组，其中包含 sql 语句的结果。

IE

给定一个查询：

```
SELECT NUMBERS FROM TABLE 
```

和结果：

```
NUMBERS
1
2
3 
```

我想最终得到一个像这样的数组

```
["1","2","3"] 
```

请帮助我了解我哪里出错了

这是我的php代码

```
<?php

$mysqli = new mysqli("local.host.com", "user", "pass", "db");

$sql = "SELECT DISTINCT NAME FROM table";

$result = $mysqli->query($sql);

while($row = $result->fetch_array())
{
    $rows[] = $row['NAME'];
}

echo(json_encode($rows));

$result->close();

/* close connection */
$mysqli->close();
?> 
```

这是我的javascript：

```
 function GetCards()
{
    var cardarray = new Array();

    //alert('test');
    $.getJSON('getcardlist.php', function(data)
    {
        for(var i=0;i<data.length;i++)
        {
            cardarray.push(data[i]);
        }

        //return cardarray;

    });

    return cardarray;
} 
```

编辑：

更多信息，我正在尝试为 jquery ui 设置一个自动完成列表，这是我为自动完成小部件设置的。

```
var list = GetCards();

$( "#name" ).autocomplete({
source: list,
minLength: 2 
```

这是我从 chrome 控制台得到的错误

```
Uncaught TypeError: Cannot read property 'label' of null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T22:26:43.887

`GetCards`正在返回一个空数组 - 这是您传递给 Autocomplete 小部件的内容 - 并导致小部件抛出`TypeError`异常。要传递填充的数组，请将实例化 Autocomplete 的代码移动到您的`getJSON`成功回调中（我不确定您是否需要循环`data`——除非您需要以某种方式实际转换其内容）：

```
$.getJSON( 'getcardlist.php', function( data ) {
    $( "#name" ).autocomplete( {
        source: data,
        minLength: 2
    } );
} ); 
```

或者，考虑使用 Autocomplete 的简写直接从数据馈送加载（请参阅[作为字符串](http://api.jqueryui.com/autocomplete/#option-source)[传递`source`](http://api.jqueryui.com/autocomplete/#option-source)）。但是，这种方法可能需要在服务器端进行一些额外的工作，以便在用户键入时过滤列表——如果您想要这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:26:09.423

你必须用来`$.each`获取数据

```
$.getJSON('getcardlist.php', function(data)
{
    $.each(data, function(key, val) {
       cardarray.push(val);
    });
    //return cardarray;
}); 
```

# rest - 自动生成 WebRequest

> ID：15445517
> 
> 赞同：1
> 
> 时间：2013-03-16T04:21:15.783
> 
> 标签：rest, web, client, servicestack

我正在尝试使用来自 ServiceStack 服务的二进制流，如下所述：

[如何使用 ServiceStack 客户端使用文件](https://stackoverflow.com/questions/14134667/how-to-consume-a-file-with-a-servicestack-client)

我意识到我必须使用自定义 WebClient，因为我想直接访问响应流。但是，我仍然想避免手工制作这个客户端。相反，我想写一些类似的东西，

```
var webClient = new JsonServiceClient(baseUrl)
                .ConfigureWebClient(new MyRequestDto { Foo = "bar" })); 
```

这样，我就不必手动组装 URL 和查询字符串；当我更改我的请求 DTO 时，我也不必记住更改我的自定义 WebClient 设置代码。

有没有办法以某种方式做到这一点？我看过`ServiceClientBase.PrepareWebRequest(...)`，它做了很多有用的东西，我不想复制/粘贴到我自己的代码中。我很想继承`ServiceClientBase`并直接调用该方法，但它是私有的，所以我不能。有人有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:56:36.727

所有[ServiceStack 的 C# 服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client)都有一个全局和本地请求过滤器，允许您初始化请求以及全局和本地响应过滤器，允许对返回的 HttpWebResponse 进行细粒度访问。

使用全局请求过滤器初始化所有 ServiceClients 的 WebRequest：

```
ServiceClientBase.HttpWebRequestFilter = httpReq => ConfigureWebClient(httpReq); 
```

使用本地请求过滤器：

```
var client = new JsonServiceClient(baseUrl) {
    LocalHttpWebRequestFilter = httpReq => ConfigureWebClient(httpReq)
}; 
```

尽管如果您只想要二进制响应，所有服务客户端都允许您指定 a `string`、`byte[]`或作为您的通用响应类型`Stream`，`HttpWebResponse`它会返回所请求的内容。有关这些示例的更多示例，请参见[Service Client wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client)。

以下是检索二进制响应的方法：

```
byte[] responseBytes = client.Get<byte[]>("/poco/World");
var dto = responseBytes.FromUtf8Bytes().FromJson<PocoResponse>(); 
```

或使用流：

```
using (Stream responseStream = client.Get<Stream>("/poco/World")) {
    var dto = responseStream.ReadFully().FromUtf8Bytes().FromJson<PocoResponse>();
} 
```

或者来自底层的 HttpWebResponse：

```
HttpWebResponse webResponse = client.Get<HttpWebResponse>("/poco/World");

using (var stream = webResponse.GetResponseStream())
using (var sr = new StreamReader(stream)) {
    var dto = sr.ReadToEnd().FromJson<PocoResponse>();
} 
```

### 您可以更改开源软件，而不必解决它

ServiceStack 是开源软件，无需寻找黑客或尝试解决无法访问或不可用的问题，发出拉取请求以更改您想要的内容，如果它是对常见用例的有效请求，它将很可能被接受。否则，请随意获取源代码的一个分支并根据需要对其进行自定义。

# jquery - jQuery+WebMethod+UrlRewriting：如何区分参数和服务器方法名

> ID：15445522
> 
> 赞同：0
> 
> 时间：2013-03-16T04:21:50.603
> 
> 标签：jquery, asp.net, webmethod

我的 ASP.NET 网站将[http://smth.com/player/1234](http://smth.com/player/1234)之类的 URL 转换为对参数 id=1234 的“播放器”页面的请求

在页面上，我需要对此页面上的“GetData”方法进行网络请求。我想使用 jQuery 来完成请求。我发现的所有教程（例如[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)）建议在 'url' 参数中传递 URL/方法名称'$.ajax'

```
$.ajax({
  type: "POST",
  url: "PageName.aspx/MethodName", // in my case that will be ... what?
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

问题是，如果我指定“player/1234/GetData”，那么将对“player”页面进行请求，但 ASP.NET 不会调用 GetData 方法...

我是否应该在此页面上实现自定义逻辑并调用“GetData”以执行 Web 请求？如果是，我如何确定对 WebMethod 的请求已完成？

或者我应该以[http://smth.com/player.aspx?Id=1234/GetData之类的方式提供“普通”网址](http://smth.com/player.aspx?Id=1234/GetData)

我可能想念什么？可能是 jquery 允许在单独的字段中指定“方法名称”吗？或者我应该配置我的网站以正确处理它？

请指教。欢迎任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T21:40:28.420

Budda，我在遇到同样问题时看到了您的问题。

我的解决方案，可能不是最好的，是在我的呼叫中添加一个假扩展，在我的例子中是“jq”，如下所示：

```
url: "<%: ResolveUrl("~/PagePath/PageName.aspx") %>/WebMethod.jq" 
```

因为我有一条规则来删除扩展名，而另一条规则是在我需要使用的 URL 末尾添加斜杠 `<%: ResolveUrl("~/PagePath/PageName.aspx") %>`。这是因为当我输入我的 URL 的页面时`http://hostname/PagePath/PageName/`，如果我通过 ajax 调用 WebMethod，则 url 最终会像`http://hostname/PagePath/PageName/PageName.aspx/WebMethod.jq`.

添加此假扩展后，您必须添加新的重写规则以在最终执行之前将其删除：

```
<rule name="Clean Page WebMethods">
   <match url="(.*)\.jq$" />
   <action type="Rewrite" url="{R:1}" redirectType="Permanent" />
</rule> 
```

如果您有任何其他规则，则必须使用条件跳过它们，例如，如果您使用一个来删除扩展名，则可能需要在规则的条件中添加如下内容：

```
<add input="{R:2}" negate="true" pattern="\.jq" /> 
```

我正在使用`{R:2}`，因为我发现如果 URL 重写模块找到扩展名`WebMethod.jq`，它不会将 url 作为 url 的一部分。`aspx`这`{R:2}`将适用于我的模式，但它可能会因您的规则模式而改变。

仅使用 Page WebMethod 听起来可能过于复杂，但在初始配置之后，您只需`.jq`在脚本中添加调用扩展。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T02:22:00.190

不知道如何解决这个问题..所以我正在向 Web 服务发出请求（URL 包含绕过 URL 重写的 .asmx）......

如果您知道如何解决原始问题 - 请告知！

# linux - 尝试在不使用 passwd 的情况下更改 Linux 密码

> ID：15445527
> 
> 赞同：0
> 
> 时间：2013-03-16T04:22:14.200
> 
> 标签：linux, security, passwords

我是一个 linux 菜鸟，我被困在课堂作业的一个小细节上。

我的意思是从根 shell 执行此操作：

```
useradd myname -g sudo -p 'openssl passwd -crypt abc123' 
```

为我创建一个`sudoer`帐户。

第一次搞砸了，所以现在它说用户已经存在。我想确保我在`sudoers`组中并且我知道我的 SSH 密码。

`passwd`命令不能用，命令也不能用`adduser`。我知道该`useradd`命令可用，但不确定我是否可以以某种方式使用它...

想法？

编辑：我怎么能仔细检查它是否有效？

Edit2：我无法使用 nano 或 vim 之类的编辑器：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:26:42.420

为什么不检查（或编辑，给定所需的权限）`/etc/passwd`、`/etc/shadow`和文件？`/etc/group``/etc/sudoers`

几乎所有与标准安全有关的东西都可以在那里找到

要仔细检查它是否有效，只需从另一个终端登录并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:56:53.297

找到了解决方法：

```
userdel myname
useradd -m -g sudo -p `openssl passwd -1 abc123` myname 
```

出于某种原因，我可以使用 sudo 但不在 /etc/sudoers @paxdiablo 中，谢谢您的帮助！

# forms - Cakephp 2.3.1 HABTM 编辑表单显示下拉框而不是多选框

> ID：15445529
> 
> 赞同：2
> 
> 时间：2013-03-16T04:22:30.730
> 
> 标签：forms, cakephp, edit, has-and-belongs-to-many, multi-select

我在舞者和舞者之间有 HABTM 关系。事情似乎按预期工作，除了在 edit.ctp 上编辑我的 Dances 时，CakePHP 显示的是一个下拉框，而不是我期望的多选框。对我来说疯狂的是，多选框与 edit.ctp 以另一种方式工作，用于编辑舞者！我不明白为什么它会以一种方式工作，但不能以另一种方式工作。

这是我定义舞蹈和舞者之间关系的舞蹈模型：

```
 public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasAndBelongsToMany associations
 *
 * @var array
 */
    public $hasAndBelongsToMany = array(
        'Dancer' => array(
            'className' => 'Dancer',
            'joinTable' => 'dancers_dances',
            'foreignKey' => 'dance_id',
            'associationForeignKey' => 'dancer_id',
            'unique' => 'keepExisting',
        )
    ); 
```

这是我的舞蹈控制器：

```
public function edit($id = null) {
    if (!$this->Dance->exists($id)) {
        throw new NotFoundException(__('Invalid dance'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        if ($this->Dance->save($this->request->data)) {
            $this->Session->setFlash(__('The dance has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The dance could not be saved. Please, try again.'));
        }
    } else {
        $options = array('conditions' => array('Dance.' . $this->Dance->primaryKey => $id));
        $this->request->data = $this->Dance->find('first', $options);
    }
    $users = $this->Dance->User->find('list');
    $dancers = $this->Dance->Dancer->find('list');
    $this->set(compact('users', 'dancers'));
} 
```

这是我的舞蹈视图的 edit.ctp

```
<div class="dances form">
<?php echo $this->Form->create('Dance'); ?>
    <fieldset>
        <legend><?php echo __('Edit Dance'); ?></legend>
    <?php
        echo $this->Form->input('id');
        echo $this->Form->input('dance_name');
        echo $this->Form->input('users_id');
        echo $this->Form->input('Dancers');
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit')); ?>
</div>
<div class="actions">
    <h3><?php echo __('Actions'); ?></h3>
    <ul>

        <li><?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $this->Form->value('Dance.id')), null, __('Are you sure you want to delete # %s?', $this->Form->value('Dance.id'))); ?></li>
        <li><?php echo $this->Html->link(__('List Dances'), array('action' => 'index')); ?></li>
        <li><?php echo $this->Html->link(__('List Dancers'), array('controller' => 'dancers', 'action' => 'index')); ?> </li>
        <li><?php echo $this->Html->link(__('New Dancers'), array('controller' => 'dancers', 'action' => 'add')); ?> </li>
    </ul>
</div> 
```

我认为相关的表格是：dancers, dancers_dances, dances

在 dancers_dances 表上，我有以下列： id, dancer_id, dance_id

让我知道更多信息是否会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T10:25:02.770

首先，您可以摆脱 HABTM 定义中的大多数设置，因为您已经在使用 Cake Conventions；

```
public $hasAndBelongsToMany = array(
    'Dancer' => array(
        'unique' => 'keepExisting',
    )
); 
```

但问题在于您在表单中输入的名称，它应该是**单数**的，并以其相关的模型命名；

```
echo $this->Form->input('Dancer'); 
```

您可以在此处查看手册中的一些示例（在本节中查找“标签”示例）：

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)

# javascript - JavaScript - 使用撇号或引号？

> ID：15445539
> 
> 赞同：6
> 
> 时间：2013-03-16T04:24:27.303
> 
> 标签：javascript, string, literals

对于字符串文字，使用撇号或使用引号之间有什么区别吗？我在考虑性能、功能、约定等。

澄清：

```
'Hello!' 
```

对比

```
"Hello!" 
```

（因为想要一个更有想象力的字符串）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T04:35:55.467

对我来说，我根据字符串的内容使用它 - 字符串本身会有双引号还是单引号？如果字符串有一种类型的引号，我将使用另一种，所以我不必转义它：例如：

我的字符串是： `<div class="someclass" >hello</div>`

对于上面我会使用单引号，所以我不必逃避单引号：

```
var str = '<div class="someclass" >hello</div>'; 
```

否则我需要

```
var str = "<div class=\"someclass\" >hello</div>"; 
```

两者都是完全有效的，但在编码器上更容易......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T04:32:17.187

我不会说有首选方法，您可以使用任何一种。但是，如果您在字符串中使用一种形式的引号，您可能希望将另一种用作文字。

```
alert('Say "Hello"');
alert("Say 'Hello'"); 
```

最可能的原因是程序员偏好/API 一致性。

不同之处在于您不需要在双引号中转义单引号，或者在单引号中转义双引号。这是唯一的区别，如果您不计算必须按住 Shift 键才能键入的事实`"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T04:32:51.600

我认为使用其中一个可能没有任何性能原因。只是有时您想在字符串中使用双引号，以便将字符串用单引号括起来，反之亦然。

`Eg : var new = 'Abraham "Lincoln"';`

# android - Android http客户端协议异常

> ID：15445541
> 
> 赞同：1
> 
> 时间：2013-03-16T04:24:31.037
> 
> 标签：android, image, http-headers, httpwebrequest

我正在开发小型 android 应用程序，在其中我试图将简单的图像发送到我的服务器。我的问题是，当我尝试添加标头内容长度时，它给了我错误 http 客户端协议异常。我的代码结构看起来像..

```
@Override
protected Void doInBackground(Void... unused) {

    HttpClient hc = new DefaultHttpClient();
    String message;
    HttpPut p = new HttpPut("https://abc.com");
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.JPEG, 100, bos);
    byte[] data = bos.toByteArray();

    try {
        int size = data.length;
        p.setEntity(new ByteArrayEntity(data));

        p.setHeader("Content-Length", Long.toString(data.length));
        //p.setHeader("Content-Length", "0");
        //p.setHeader("Content-type", "application/json");

        HttpResponse resp = hc.execute(p);
        if (resp != null)
        {
            if (resp.getStatusLine().getStatusCode() == 204)
            {

            }
        }

        Log.d("Status line", "" + resp.getStatusLine().getStatusCode());
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

@Override
protected void onProgressUpdate(Void... unsued) {

}

@Override
protected void onPostExecute(Void result) {
    try {
        if (dialog.isShowing())
            dialog.dismiss();
        Log.i("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@", "before exception "+result);

    } catch (Exception e) {
        Log.i("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@", "inside catch ");
        Toast.makeText(getApplicationContext(),"Error"+e,
                Toast.LENGTH_LONG).show();
        Log.e(e.getClass().getName(), e.getMessage(), e);
    }
} 
```

我在做正确的事吗？如何解决这个问题呢。需要帮忙。谢谢你。

我的错误跟踪看起来像

```
03-16 10:02:47.663: W/System.err(5804): org.apache.http.client.ClientProtocolException
03-16 10:02:47.687: W/System.err(5804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:557)
03-16 10:02:47.687: W/System.err(5804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-16 10:02:47.687: W/System.err(5804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-16 10:02:47.687: W/System.err(5804):     at com.example.profileimage.ImageUpload$ImageUploadTask.doInBackground(ImageUpload.java:243)
03-16 10:02:47.687: W/System.err(5804):     at com.example.profileimage.ImageUpload$ImageUploadTask.doInBackground(ImageUpload.java:1)
03-16 10:02:47.687: W/System.err(5804):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-16 10:02:47.687: W/System.err(5804):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
03-16 10:02:47.687: W/System.err(5804):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
03-16 10:02:47.687: W/System.err(5804):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
03-16 10:02:47.687: W/System.err(5804):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
03-16 10:02:47.687: W/System.err(5804):     at java.lang.Thread.run(Thread.java:1019)
03-16 10:02:47.687: W/System.err(5804): Caused by: org.apache.http.ProtocolException: Content-Length header already present
03-16 10:02:47.695: W/System.err(5804):     at org.apache.http.protocol.RequestContent.process(RequestContent.java:70)
03-16 10:02:47.695: W/System.err(5804):     at org.apache.http.protocol.BasicHttpProcessor.process(BasicHttpProcessor.java:290)
03-16 10:02:47.695: W/System.err(5804):     at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:160)
03-16 10:02:47.695: W/System.err(5804):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:401)
03-16 10:02:47.695: W/System.err(5804):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-16 10:02:47.695: W/System.err(5804):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-23T18:53:40.490

要将其从未回答的问题列表中删除：

* * *

错误是

> “引起：org.apache.http.ProtocolException：`Content-Length`标头已经存在”。

删除 setHeader()，您不需要它 - HttpPut 集`Content-Length`基于您包含的实体。没有理由用手来做。

# ruby - 简单的红宝石克里斯松闰年

> ID：15445543
> 
> 赞同：0
> 
> 时间：2013-03-16T04:24:37.333
> 
> 标签：ruby

嗨，我需要克里斯派恩斯书中的一个问题的帮助，该问题要求列出开始年份和结束年份之间的闰年。我已经看到它以其他方式完成，但我想知道是否有任何方法可以使这段代码工作？它出什么问题了？我是编程新手。谢谢！它给出了这个错误。

```
(eval):22: (eval):22: compile error (SyntaxError)
(eval):22: syntax error, unexpected $end, expecting kEND 
```

我的程序：

```
def years(starting, ending)
  while starting <= ending
    while (starting % 4 == 0) && (starting % 400 == 0)
      puts starting
    unless starting % 100 == 0
  end
  starting += 1
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:48:10.707

错误消息表明`while`您的代码中的循环缺少`end`语句。

在不检查逻辑的正确性的情况下，代码本身的结构如下：

```
def years(starting, ending)
  while starting <= ending
    while (starting % 4 == 0) && (starting % 400 == 0)
      puts starting unless starting % 100 == 0
    end
    starting += 1
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:43:12.583

你可以使用日期方法跳跃吗？它将返回 true 或 false

```
require 'date'
def leap_year?(year)
  Date.new(year).leap?
end 
```

[http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-c-leap-3F](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-c-leap-3F)

# python - 查找两个椭圆的交点（Python）

> ID：15445546
> 
> 赞同：8
> 
> 时间：2013-03-16T04:24:59.520
> 
> 标签：python, geometry, intersection, shapes, ellipse

我正在用 Python 编写一个基本的 2D 形状库（主要用于处理 SVG 绘图），我不知道如何有效地计算两个椭圆的交点。

每个椭圆由以下变量（所有浮点数）定义：

```
c: center point (x, y)
hradius: "horizontal" radius
vradius: "vertical" radius
phi: rotation from coordinate system's x-axis to ellipse's horizontal axis 
```

忽略椭圆相同时，可能有 0 到 4 个相交点（无相交、相切、部分重叠、部分重叠和内部相切以及完全重叠）。

我找到了一些潜在的解决方案：

*   [SymPy 几何模块](https://github.com/sympy/sympy/blob/master/sympy/geometry/ellipse.py#L967)- 这基本上只是将椭圆方程插入 SymPy 的求解器。如果没有求解器，我不确定这是否有意义。（顺便说一句，我会使用 SymPy 而不是自己滚动，但它在处理疯狂的浮动时表现得很糟糕）
*   [如何检测椭圆是否与圆相交（碰撞）](https://stackoverflow.com/questions/2945337) - 这可能适用于两个椭圆，但我对如何将其变成合理的代码有点模糊。
*   [椭圆如何与椭圆相交？](https://stackoverflow.com/a/6544688/602497)- 答案引用的库（CADEMIA）可能有一个很好的算法，但我什至不知道它是否是开源的。
*   [Wikipedia: Intersecting Two Conics](http://en.wikipedia.org/wiki/Conic_section#Intersecting_two_conics) - 我没有足够的线性代数来理解这个解决方案。

关于我应该如何计算交叉点的任何建议？速度（可能需要计算很多交叉点）和优雅是主要标准。代码会很棒，但即使是一个好的方向也会有所帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-16T06:56:25.537

在数学中，您需要将椭圆表示为二元二次方程，然后求解。我找到了一份[文件](http://maptools.home.comcast.net/~maptools/BivariateQuadratics.pdf)。所有的计算都在文档中，但是在 Python 中实现它可能需要一段时间。

所以另一种方法是将椭圆近似为折线，并使用 shapely 来找到交点，代码如下：

```
import numpy as np
from shapely.geometry.polygon import LinearRing

def ellipse_polyline(ellipses, n=100):
    t = linspace(0, 2*np.pi, n, endpoint=False)
    st = np.sin(t)
    ct = np.cos(t)
    result = []
    for x0, y0, a, b, angle in ellipses:
        angle = np.deg2rad(angle)
        sa = np.sin(angle)
        ca = np.cos(angle)
        p = np.empty((n, 2))
        p[:, 0] = x0 + a * ca * ct - b * sa * st
        p[:, 1] = y0 + a * sa * ct + b * ca * st
        result.append(p)
    return result

def intersections(a, b):
    ea = LinearRing(a)
    eb = LinearRing(b)
    mp = ea.intersection(eb)

    x = [p.x for p in mp]
    y = [p.y for p in mp]
    return x, y

ellipses = [(1, 1, 2, 1, 45), (2, 0.5, 5, 1.5, -30)]
a, b = ellipse_polyline(ellipses)
x, y = intersections(a, b)
plot(x, y, "o")
plot(a[:,0], a[:,1])
plot(b[:,0], b[:,1]) 
```

和输出：

![在此处输入图像描述](../Images/7eeb28bce112795fd53d2ec54b38b1f8.png)

在我的电脑上大约需要 1.5 毫秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T05:22:17.197

看着[sympy](http://docs.sympy.org/dev/index.html)我认为它有你需要的一切。（我试图为您提供示例代码；不幸的是，我在使用 gmpy2 而不是无用的 python 内置数学安装 sympy 时失败了）

你有 ：

*   一个带[旋转方法的](http://docs.sympy.org/dev/modules/geometry.html#sympy.geometry.ellipse.Ellipse.rotate)[椭圆](http://docs.sympy.org/dev/modules/geometry.html#module-sympy.geometry.ellipse)，可以与其他椭圆[相交](http://docs.sympy.org/dev/modules/geometry.html#sympy.geometry.ellipse.Ellipse.intersection)
*   或者一个[任意的交集](http://docs.sympy.org/dev/modules/geometry.html#sympy.geometry.util.intersection)函数，它采用可变数的......他们称之为“几何实体”。

从他们的例子中，我认为绝对有可能使两个椭圆相交：

```
>>> from sympy import Ellipse, Point, Line, sqrt
>>> e = Ellipse(Point(0, 0), 5, 7)
...
>>> e.intersection(Ellipse(Point(1, 0), 4, 3))
[Point(0, -3*sqrt(15)/4), Point(0, 3*sqrt(15)/4)]
>>> e.intersection(Ellipse(Point(5, 0), 4, 3))
[Point(2, -3*sqrt(7)/4), Point(2, 3*sqrt(7)/4)]
>>> e.intersection(Ellipse(Point(100500, 0), 4, 3))
[]
>>> e.intersection(Ellipse(Point(0, 0), 3, 4))
[Point(-363/175, -48*sqrt(111)/175), Point(-363/175, 48*sqrt(111)/175),
Point(3, 0)]
>>> e.intersection(Ellipse(Point(-1, 0), 3, 4))
[Point(-17/5, -12/5), Point(-17/5, 12/5), Point(7/5, -12/5),
Point(7/5, 12/5)] 
```

编辑：由于 sympy 不支持通用椭圆 (ax^2 + bx + cy^2 + dy + exy + f)，

您应该自己构建方程并对其进行转换，并使用它们的求解器来查找交点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T07:01:57.130

您可以使用此处显示的方法： [https ://math.stackexchange.com/questions/864070/how-to-determine-if-two-ellipse-have-at-least-one-intersection-point/864186#864186](https://math.stackexchange.com/questions/864070/how-to-determine-if-two-ellipse-have-at-least-one-intersection-point/864186#864186)

首先，您应该能够在一个方向上重新缩放椭圆。为此，您需要将椭圆的系数计算为圆锥截面，重新缩放，然后恢复椭圆的新几何参数：中心、轴、角度。

然后你的问题减少到找到从椭圆到原点的距离。要解决最后一个问题，您需要一些迭代。这是一个可能的自包含实现......

```
from math import *

def bisect(f,t_0,t_1,err=0.0001,max_iter=100):
    iter = 0
    ft_0 = f(t_0)
    ft_1 = f(t_1)
    assert ft_0*ft_1 <= 0.0
    while True:
        t = 0.5*(t_0+t_1)
        ft = f(t)
        if iter>=max_iter or ft<err:
            return t
        if ft * ft_0 <= 0.0:
            t_1 = t
            ft_1 = ft
        else:
            t_0 = t
            ft_0 = ft
        iter += 1

class Ellipse(object):
    def __init__(self,center,radius,angle=0.0):
        assert len(center) == 2
        assert len(radius) == 2
        self.center = center
        self.radius = radius
        self.angle = angle

    def distance_from_origin(self):
        """                                                                           
        Ellipse equation:                                                             
        (x-center_x)^2/radius_x^2 + (y-center_y)^2/radius_y^2 = 1                     
        x = center_x + radius_x * cos(t)                                              
        y = center_y + radius_y * sin(t)                                              
        """
        center = self.center
        radius = self.radius

        # rotate ellipse of -angle to become axis aligned                             

        c,s = cos(self.angle),sin(self.angle)
        center = (c * center[0] + s * center[1],
                  -s* center[0] + c * center[1])

        f = lambda t: (radius[1]*(center[1] + radius[1]*sin(t))*cos(t) -
                       radius[0]*(center[0] + radius[0]*cos(t))*sin(t))

        if center[0] > 0.0:
            if center[1] > 0.0:
                t_0, t_1 = -pi, -pi/2
            else:
                t_0, t_1 = pi/2, pi
        else:
            if center[1] > 0.0:
                t_0, t_1 = -pi/2, 0
            else:
                t_0, t_1 = 0, pi/2

        t = bisect(f,t_0,t_1)
        x = center[0] + radius[0]*cos(t)
        y = center[1] + radius[1]*sin(t)
        return sqrt(x**2 + y**2)

print Ellipse((1.0,-1.0),(2.0,0.5)).distance_from_origin() 
```

# android - 单击相机按钮，拍照后，应用程序已在我的设备中停止

> ID：15445548
> 
> 赞同：0
> 
> 时间：2013-03-16T04:25:20.163
> 
> 标签：android, android-camera

我有一个应用程序，有很多功能，在我的应用程序中添加相机功能后，如果我单击相机按钮，我的应用程序会意外停止。
`AndroidManifest.xml`

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.Ibetter.tdm"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="17"
            />    
        <uses-permission android:name="android.permission.WAKE_LOCK" ></uses-permission>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
        <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission>  
        <uses-permission android:name="android.permission.INTERNET" />
         <uses-feature android:name="android.hardware.camera" />
         <uses-permission android:name="android.permission.CAMERA"  />
         <uses-feature android:name="android.hardware.camera.autofocus" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/icon"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name="com.Ibetter.tdm.ProjectListActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity
                android:name="com.Ibetter.tdm.ActivityTab"
                android:label="@string/title_activity_tab_edit" 
                android:parentActivityName="com.Ibetter.tdm.ProjectListActivity">
            </activity>
      <activity
                android:name="com.Ibetter.tdm.ProjectEditActivity"
                android:label="@string/title_activity_project_edit" >
    </activity>
    <activity
        android:name="com.Ibetter.tdm.ReleaseEditActivity"
        android:label="@string/title_activity_release_edit" >
    </activity>
    <activity
        android:name="com.Ibetter.tdm.ReleaseListActivity"
        android:label="@string/title_activity_release_list" >
    </activity>
    <activity
        android:name="com.Ibetter.tdm.TestEditActivity"
        android:label="@string/title_activity_test_edit" >
    </activity>
    <activity
        android:name="com.Ibetter.tdm.TestListActivity"
        android:label="@string/title_activity_test_list" >
    </activity>
     <activity
        android:name="com.Ibetter.tdm.ReqListActivity"
        android:label="@string/title_activity_req_list" >
    </activity>
     <activity
        android:name="com.Ibetter.tdm.ReqEditActivity"
        android:label="@string/title_activity_req_edit" >
    </activity>
          </application>
    </manifest> 
```

这是相机功能的java文件..

```
 public  class ReqEditActivity extends Activity implements OnCompletionListener {
         private EditText mTitleText;
        private EditText mReqDescText;
        private EditText mReqStepsText;
        private Button mConfirmButton;
        private Long mRowId;
        private ProjectsDbAdapter mDbHelper;
        private String gprojectname ="";
        private String greleasename ="";
        private int modifyFormat; 
        private static final int IMAGE_CAPTURE = 1337;
        private Button startBtn;
        private Uri imageUri;
        private ImageView imageView;
      //private static int RESULT_LOAD_IMAGE = 1;
      private static final int REQUEST_CODE = 1;
        private Bitmap bitmap;
        //private ImageView imageView;
        private static final int SELECT_PICTURE = 1;
        //private String selectedImagePath;
        private ImageButton btnPlay;   
       // Media Player
        private  MediaPlayer mp;
        private String gfilename1 =""; 
       private static final String AUDIO_RECORDER_FILE_EXT_3GP = ".3gp";
        private static final String AUDIO_RECORDER_FILE_EXT_AMR = ".amr";
   private static final String AUDIO_RECORDER_FILE_EXT_MP4 = ".mp4";
   private static final String REQAUDIO_RECORDER_FOLDER = "ReqAudioRecorder";       
  private MediaRecorder recorder = null;
public static int  currentFormat = 0;
private int output_formats[] = { MediaRecorder.OutputFormat.MPEG_4, MediaRecorder.OutputFormat.THREE_GPP, MediaRecorder.OutputFormat.AMR_NB};
private String file_exts[] = { AUDIO_RECORDER_FILE_EXT_MP4, AUDIO_RECORDER_FILE_EXT_3GP,  AUDIO_RECORDER_FILE_EXT_AMR };
protected static final int RESULT_SPEECH_DESC = 1;  
protected static final int RESULT_SPEECH_STEPS = 2; 
      private ImageButton btnSpeakdesc;
     private ImageButton btnSpeaksteps;
    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
      mDbHelper = new ProjectsDbAdapter(this);
    setContentView(R.layout.activity_req_edit);
     mTitleText = (EditText) findViewById(R.id.title);
     mReqDescText = (EditText) findViewById(R.id.body);
     mReqStepsText = (EditText) findViewById(R.id.Steps);
     mConfirmButton = (Button) findViewById(R.id.confirm);
     Bundle extras = getIntent().getExtras();   
    gprojectname = extras.getString("project");
    greleasename = extras.getString("release");
     startBtn = (Button) findViewById(R.id.startBtn);
        startBtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                try {
                    startCamera();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
      //retrieve a reference to the ImageView
        //ImageView picView = (ImageView)findViewById(R.id.picture);
        //Bitmap thePic = null;
        //display the returned cropped image
       // picView.setImageBitmap(thePic);    
    mRowId = savedInstanceState != null ? savedInstanceState.getLong(ProjectsDbAdapter.KEY_ROWID_REQS): null;
   registerButtonListenersAndSetDefaultText();
   //for speech to text and recording purpose           
   setButtonHandlers();
   enableButtons(false);
   btnSpeakdesc = (ImageButton) findViewById(R.id.btnSpeakdesc);     
   btnSpeaksteps = (ImageButton) findViewById(R.id.btnSpeaksteps);  
   // All player buttons
   btnPlay = (ImageButton) findViewById(R.id.btnPlay);                
   // Mediaplayer
   mp = new MediaPlayer();      
   btnSpeakdesc.setOnClickListener(new View.OnClickListener()
   {                
    @Override
       public void onClick(View v) {
           Intent intent = new Intent(
                   RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
           intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");
           try {
               startActivityForResult(intent, RESULT_SPEECH_DESC);
               mReqDescText.setText("");
           } 
           catch (ActivityNotFoundException a) 
           {
               Toast t = Toast.makeText(getApplicationContext(),
                       "Opps! Your device doesn't support Speech to Text",
                       Toast.LENGTH_SHORT);
               t.show();
           }
       }
   });
   btnSpeaksteps.setOnClickListener(new View.OnClickListener()
   {                
    @Override
       public void onClick(View v) {
           Intent intent = new Intent(
                   RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
           intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");
           try {
               startActivityForResult(intent, RESULT_SPEECH_STEPS);
               mReqStepsText.setText("");
           } 
           catch (ActivityNotFoundException a) 
           {
               Toast t = Toast.makeText(getApplicationContext(),
                       "Opps! Your device doesn't support Speech to Text",
                       Toast.LENGTH_SHORT);
               t.show();
           }
       }
   });
   /**
    * Play button click event
    * plays a song and changes button to pause image
    * pauses a song and changes button to play image
    * */
   btnPlay.setOnClickListener(new View.OnClickListener() 
   {
       @Override
       public void onClick(View arg0) 
       {
           // check for already playing
           if(mp.isPlaying()){
               if(mp!=null){
                   mp.pause();
                   // Changing button image to play button
                   btnPlay.setImageResource(R.drawable.btn_play);
               }
           }else{
               // Resume song
               if(mp!=null){
                   mp.start();
                   // Changing button image to pause button
                   btnPlay.setImageResource(R.drawable.btn_pause);
                   // play selected song
                   Cursor filename = mDbHelper.fetchreqsFileName(mRowId);
                   startManagingCursor(filename);
                   gfilename1 = filename.getString(filename.getColumnIndexOrThrow(ProjectsDbAdapter.KEY_REQFILENAME));
                  playSong(gfilename1);
               }
           }
       }
   });
}
    public void startCamera() 
      throws IOException {
  Log.d("QAM_CAMERA", "Starting camera on the phone...");
  File photosDir = new File(Environment.getExternalStorageDirectory(), "photos");
  if (!photosDir.isDirectory()) {
      photosDir.mkdirs();
  }
  File imageFile = File.createTempFile("testphoto", ".jpg", photosDir);
  Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
  intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(imageFile));
  intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
  startActivityForResult(intent, IMAGE_CAPTURE);
}
     private void setRowIdFromIntent() {
  if (mRowId == null || mRowId.longValue() == 0) {
        Bundle extras = getIntent().getExtras();            
        gprojectname = extras.getString("project");
        greleasename = extras.getString("release");
        mRowId = extras != null ? extras.getLong(ProjectsDbAdapter.KEY_ROWID_REQS) : null;
   }
  }
      @Override
      protected void onPause() {
          super.onPause();
          mDbHelper.close(); 
      }
      @Override
      protected void onResume() {
          super.onResume();
          mDbHelper.open(); 
        setRowIdFromIntent();
    populateFields();
      }
      private void registerButtonListenersAndSetDefaultText() {
          mConfirmButton.setOnClickListener(new View.OnClickListener() {
            @Override
    public void onClick(View view) {
                saveState(); 
                setResult(RESULT_OK);
                Toast.makeText(ReqEditActivity.this, getString(R.string.task_saved_message), Toast.LENGTH_SHORT).show();
                finish(); 
            }
          });
      }
      private void populateFields()  {
  try
   {
      // Only populate the text boxes and change the calendar date
     // if the row is not null from the database. 
        if (mRowId != null) 
     {
               Cursor reqs = mDbHelper.fetchreqs(mRowId);
              startManagingCursor(reqs);
              mTitleText.setText(reqs.getString(
            reqs.getColumnIndexOrThrow(ProjectsDbAdapter.KEY_TITLE)));
      mReqDescText.setText(reqs.getString(
              reqs.getColumnIndexOrThrow(ProjectsDbAdapter.KEY_DESC)));
      mReqStepsText.setText(reqs.getString(
              reqs.getColumnIndexOrThrow(ProjectsDbAdapter.KEY_BODY)));
      reqs.close();
     } else {
            // This is a new task - add defaults from preferences if set. 
            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); 
            String defaultTitleKey = getString(R.string.pref_task_title_key);           
            String defaultTitle = prefs.getString(defaultTitleKey, null);       
          //if(defaultTitle != null)
        mTitleText.setText("Edit REQS"); 
          }
    }
  catch (Exception ex)
    {}
      }
      @Override
      protected void onSaveInstanceState(Bundle outState) {
          super.onSaveInstanceState(outState);
          outState.putLong(ProjectsDbAdapter.KEY_ROWID_REQS, mRowId);
      }
      private void saveState() {
          String title = mTitleText.getText().toString();
          String Desc = mReqDescText.getText().toString();
          String Body = mReqStepsText.getText().toString();
          if (mRowId == null || mRowId.longValue() == 0)
          {
            long id = mDbHelper.createreqs(title, Desc, Body,gprojectname,greleasename);
              if (id > 0) {
                  mRowId = id;
              }
          } else {
              mDbHelper.updatereqs(mRowId, title, Desc, Body);
          }
      }
    //for speech to text and audio recording
     public View.OnClickListener btnClick = new View.OnClickListener() 
      {
        @Override
    public void onClick(View v) {
        switch(v.getId()){
            case R.id.btnStart:{
                AppLog.logString("Start Recording");
                enableButtons(true);
                startRecording();
                break;
            }
            case R.id.btnStop:{
                AppLog.logString("Start Recording");
                enableButtons(false);
                stopRecording();
                                    break;
            }
            }
    }
    };
 public MediaRecorder.OnErrorListener errorListener = new MediaRecorder.OnErrorListener() {
    @Override
    public void onError(MediaRecorder mr, int what, int extra) {
        AppLog.logString("Error: " + what + ", " + extra);
    }
};
public MediaRecorder.OnInfoListener infoListener = new MediaRecorder.OnInfoListener() {
    @Override
    public void onInfo(MediaRecorder mr, int what, int extra) {
        AppLog.logString("Warning: " + what + ", " + extra);
    }
};
public void setButtonHandlers() {
    ((Button)findViewById(R.id.btnStart)).setOnClickListener(btnClick);
  ((Button)findViewById(R.id.btnStop)).setOnClickListener(btnClick);
}
public void enableButton(int id,boolean isEnable){
    ((Button)findViewById(id)).setEnabled(isEnable);
}
public void enableButtons(boolean isRecording) {
    enableButton(R.id.btnStart,!isRecording);           
    enableButton(R.id.btnStop,isRecording);
}
/*private void setStopButtonCaption(){
    ((Button)findViewById(R.id.btnStop)).setText(getString(R.string.audio_format) + " (" + file_exts[currentFormat] + ")");
}*/
@SuppressLint("NewApi")
private void startRecording(){
    //displayFormatDialog();
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    String formats[] = {"MPEG 4", "3GPP", "AMR"};
    builder.setTitle(getString(R.string.choose_format_title))
.setSingleChoiceItems(formats, currentFormat, new DialogInterface.OnClickListener()                  {

    @Override
    public void onClick(DialogInterface dialog, int which) {
    currentFormat = which;
    dialog.dismiss();
    recorder = new MediaRecorder();         
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC); 
    recorder.setOutputFormat(output_formats[currentFormat]);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(getFilename());          
    //recorder.setOnErrorListener(errorListener);
    //recorder.setOnInfoListener(infoListener);
    try {
        recorder.prepare();
        recorder.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
   }
  }).show();
}
private void stopRecording(){
    if(null != recorder)
    {
        mDbHelper.updatereqsFileName(mRowId, gfilename1); 
        recorder.stop();
        recorder.reset();
        recorder.release();             
        recorder = null;
        }
   }
  /*private int displayFormatDialog(){
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    String formats[] = {"MPEG 4", "3GPP", "AMR"};
    builder.setTitle(getString(R.string.choose_format_title))
           .setSingleChoiceItems(formats, currentFormat, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                currentFormat = which;
                dialog.dismiss();
            }
           }).show();
    return currentFormat;
}*/
public String getFilename(){
    String filepath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filepath,REQAUDIO_RECORDER_FOLDER);
    if(!file.exists()){
        file.mkdirs();
    }
    gfilename1 = (file.getAbsolutePath() + "/" + System.currentTimeMillis() + file_exts[currentFormat]);
    return (gfilename1 );
}
    /**
       * Receiving song index from playlist view
       * and play the song
       * */
      @Override
      protected void onActivityResult(int requestCode,
                               int resultCode, Intent data) {
          super.onActivityResult(requestCode, resultCode, data);
    //conversion and audio record
         switch (requestCode) 
          {
        case RESULT_SPEECH_DESC: {
            if (resultCode == RESULT_OK && null != data) {
                ArrayList<String> text = data
                        .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                mReqDescText.setText(text.get(0));
            }
            break;
        }
        case RESULT_SPEECH_STEPS: {
            if (resultCode == RESULT_OK && null != data) {
                ArrayList<String> text = data
                        .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
                mReqStepsText.setText(text.get(0));
            }
            break;
        }
  }
    if (requestCode == IMAGE_CAPTURE) {
      if (resultCode == RESULT_OK){
          Log.d("ANDRO_CAMERA","Picture taken!!!");
          imageView.setImageURI(imageUri);
      }
    }
 }
    @Override
public void onCompletion (MediaPlayer arg0) 
{               
}
      /**
       * Function to play a song
       * @param songIndex - index of song
       * */
      public void  playSong(String gfilename1){
          // Play song
             try
             {
              mp.reset();
              mp.setDataSource(gfilename1);
              mp.prepare();
              mp.start();
              // Changing Button Image to pause image
              btnPlay.setImageResource(R.drawable.btn_pause);
           } catch (IllegalArgumentException e) {
              e.printStackTrace();
          } catch (IllegalStateException e) {
              e.printStackTrace();
          } catch (IOException e) {
              e.printStackTrace();
         }
      }  
    @Override
       public void onDestroy(){
       super.onDestroy();
          mp.release();
       }
     public String getPath(Uri uri) {
          String[] projection = { MediaStore.Images.Media.DATA };
         Cursor cursor = managedQuery(uri, projection, null, null, null);
          int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
          cursor.moveToFirst();
          return cursor.getString(column_index);
      }
     } 
```

添加相机功能后，出现这些错误，你能看看我的java和manifest文件，是不是版本问题？

Logcat 错误

```
 03-16 04:48:06.826: E/AndroidRuntime(1239): FATAL EXCEPTION: main
    03-16 04:48:06.826: E/AndroidRuntime(1239): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.LoadedApk.makeApplication(LoadedApk.java:504)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4364)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.ActivityThread.access$1300(ActivityThread.java:141)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1294)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.os.Handler.dispatchMessage(Handler.java:99)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.os.Looper.loop(Looper.java:137)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.ActivityThread.main(ActivityThread.java:5039)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at java.lang.reflect.Method.invokeNative(Native Method)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at java.lang.reflect.Method.invoke(Method.java:511)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at dalvik.system.NativeStart.main(Native Method)
    03-16 04:48:06.826: E/AndroidRuntime(1239): Caused by: java.lang.NullPointerException
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:379)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.LoadedApk.getClassLoader(LoadedApk.java:322)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     at android.app.LoadedApk.makeApplication(LoadedApk.java:496)
    03-16 04:48:06.826: E/AndroidRuntime(1239):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:05:17.757

似乎您的包管理器没有得到它想要的信息。ADT/adb/eclipse 的已知错误。您可以执行以下操作来尝试一下。大多数情况下它会解决你的问题。

*   尝试清理您的项目 - >从设备/模拟器卸载应用程序 - >再次运行它。

*   如果您正在使用任何库，请在进入项目属性后尝试在项目中引用该库。

*   尝试使用另一个新创建的工作区。

希望它会有所帮助。

# ruby - 如何在 Rack 中处理 post 请求

> ID：15445551
> 
> 赞同：1
> 
> 时间：2013-03-16T04:25:50.767
> 
> 标签：ruby, rack

要在 Rack 中使用 json 响应进行响应，我可以执行以下操作。如何根据请求是 GET 请求还是 PUT 请求以及 PUT 请求附带的数据返回不同的响应？也就是说，检查来自`env`变量的请求并处理各种情况的惯用方法是什么？

```
require 'json'

class Greeter
  def call(env)
    [200, {"Content-Type" => "application/json"}, [{x:"Hello World!"}.to_json]]
  end
end

run Greeter.new 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:56:03.550

据我所知，在 Rack 中执行此操作的惯用方法是将您的对象包装`env`在一个[`Rack::Request`](http://rack.rubyforge.org/doc/classes/Rack/Request.html#M000274)对象中并调用`get?`,`post?`等。

这是一个简单的例子：

```
# config.ru
run(Proc.new do
  req = Rack::Request.new(env)
  response = <<-RESP
  get? #{req.get?}
  post? #{req.post?}
RESP
  [200, {"Content-Type" => "text/plain"}, [response]]
end) 
```

以下是如何在行动中检查它：

```
$ curl http://localhost:9292
    get? true
    post? false

$ curl --data "" http://localhost:9292
    get? false
    post? true 
```

# actionscript-3 - Flash/AS3 拒绝导入

> ID：15445552
> 
> 赞同：0
> 
> 时间：2013-03-16T04:25:57.893
> 
> 标签：actionscript-3, flash, audio, import

无论我尝试了什么，这段代码都拒绝编译。我经常收到这个编译错误。我正在尝试在我的 Flash 动画中制作音量滑块。据我所知，我正在导入所有正确的东西，而且我的代码与我看过的许多示例完全相同。为什么这不起作用？

```
 Layer 'Sounds AS', Frame 1, Line 50 1046: Type was not found or was not a compile-time constant: SliderEvent. 
```

```
 import flash.media.Sound;
    import fl.controls.Slider; 
    import fl.events.SliderEvent; 

    var curSound = 0;
    var lastSound = 0;

    var _A1:Sound = new A1();
    var _A2:Sound = new A2();
    var _A3:Sound = new A3();
    var _A4:Sound = new A4();
    var _A5:Sound = new A5();
    var _A6:Sound = new A6();
    var _A7:Sound = new A7();
    var _A8:Sound = new A8();
    var _A9:Sound = new A9();
    var _A10:Sound = new A10();
    var _A11:Sound = new A11();
    var _A12:Sound = new A12();

    var voiceVolume:SoundTransform = new SoundTransform();
    voiceVolume.volume = .4;

    var voiceChannel:SoundChannel = new SoundChannel();

    var volSlider:Slider = new Slider();
    volSlider.minimum = 0;
    volSlider.maximum = 1;
    volSlider.value = .5;
    volSlider.snapInterval = .1;
    volSlider.liveDragging = true;
    volSlider.addEventListener(SliderEvent.CHANGE, volChange);
    volSlider.move(10, 10);
    addChild(slider);

    function volChange(ev:SliderEvent):void{
        voiceVolume.volume = ev.value;
        voiceChannel.soundTransform = voiceVolume;
    } 
```

编辑：事实上，如果我将有问题的行注释掉，它就找不到我要导入的任何内容。有没有搞错？

```
Preloader, Layer 'Sounds AS', Frame 1, Line 2   1172: Definition fl.controls:Slider could not be found.
Preloader, Layer 'Sounds AS', Frame 1, Line 3   1172: Definition fl.events:SliderEvent could not be found.
Preloader, Layer 'Sounds AS', Frame 1, Line 2   1172: Definition fl.controls:Slider could not be found.
Preloader, Layer 'Sounds AS', Frame 1, Line 3   1172: Definition fl.events:SliderEvent could not be found.
Preloader, Layer 'Sounds AS', Frame 1, Line 26  1046: Type was not found or was not a compile-time constant: Slider.
Preloader, Layer 'Sounds AS', Frame 1, Line 26  1180: Call to a possibly undefined method Slider.
Preloader, Layer 'Sounds AS', Frame 1, Line 32  1120: Access of undefined property SliderEvent.
Preloader, Layer 'Sounds AS', Frame 1, Line 32  1120: Access of undefined property volChange.
Preloader, Layer 'Sounds AS', Frame 1, Line 34  1120: Access of undefined property slider. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T06:16:20.910

使用 Flash 组件 ( `fl.*`) 时，您需要将组件拖放到 Flash Professional 的库面板中。这样做会创建与您要使用的特定组件的链接。

`Slider`从面板中拖动一个组件`Components`并将其放入其中后，`Library`您将能够编译而不会出错。

![在此处输入图像描述](../Images/75e0a7fe7bd03df53db5052f15bf47f4.png)

# android - Android SQLite 聚合函数错误

> ID：15445557
> 
> 赞同：0
> 
> 时间：2013-03-16T04:26:24.980
> 
> 标签：android, sqlite, android-sqlite

我正在运行以下查询：

```
String q = "select " + MySQLiteHelper.COLUMN_ID + ", "
        + MySQLiteHelper.COLUMN_TASK + ", "
        + MySQLiteHelper.COLUMN_PARENT + ", count(*) from "
        + MySQLiteHelper.TABLE_TASKS + " where "
        + MySQLiteHelper.COLUMN_ID + " = " + insertId + " group by "
        + MySQLiteHelper.COLUMN_ID + ", " + MySQLiteHelper.COLUMN_TASK
        + ", " + MySQLiteHelper.COLUMN_PARENT;
Cursor cursor = database.rawQuery(q, null); 
```

当我像这样读取检索到的数据时：

```
task.setId(cursor.getLong(0));
task.setTask(cursor.getString(1));
task.setParent(cursor.getLong(2));
task.setChildren(cursor.getInt(3)); 
```

我收到以下错误：

```
03-15 22:15:06.078: E/AndroidRuntime(31426):
    java.lang.IllegalStateException:
    Couldn't read row 0, col 3 from CursorWindow.
    Make sure the Cursor is initialized correctly before accessing data from it. 
```

如果我删除线

```
task.setChildren(cursor.getInt(3)); 
```

它工作正常。

谁能告诉我这里出了什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:44:32.147

尝试替换此行

```
+ MySQLiteHelper.COLUMN_PARENT + ", count(*) from " 
```

经过

```
+ MySQLiteHelper.COLUMN_PARENT + ", count(*) as total from " 
```

**编辑：**也尝试更换

```
task.setChildren(cursor.getInt(3)); 
```

经过

```
task.setChildren((int)cursor.getLong(3)); 
```

或者可能

```
task.setChildren(Integer.parseInt(cursor.getString(3))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:49:14.997

您直接尝试从光标访问 3 列，但您的第三列是计数，并且您没有为该列指定别名，这就是您收到此错误的原因。只需尝试输入列名的别名，然后尝试按如下方式访问它：

替换此行

```
 + MySQLiteHelper.COLUMN_PARENT + ", count(*) from " 
```

经过

```
 + MySQLiteHelper.COLUMN_PARENT + ", count(*) as total from " 
```

# php - 使用 php 代码发送电子邮件

> ID：15445561
> 
> 赞同：0
> 
> 时间：2013-03-16T04:26:44.683
> 
> 标签：php, email

下面的代码将通过电子邮件发送到下面的帐户，但是当我在服务器上运行它时，发送电子邮件没有任何动作，代码也没有错误，感谢您的帮助。

```
<?php
    $to = "chivycambpp@gmail.com";
    $subject = "Test mail";
    $message = "Hello! This is a simple email message.";
    $from = "chivycambhm@hotmail.com";
    $headers = "From:" . $from;
    mail($to,$subject,$message,$headers);
    echo "Mail Sent.";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:30:44.760

试试这个

```
<?php 
   /* Setup your Subject and Message Body */ 
   $subject='Testing php Email'; 
   $body=' Put Your Text Message Here.'; 

  /* Specify your SMTP Server, Port and Valid From Address */ 
  ini_set("SMTP","mail.yourdomain.com"); 
  ini_set("smtp_port","25"); 
  ini_set("sendmail_from","fromYou@yourdomain.com"); 

  /* Additional Headers */ 
  $headers = "Cc:Real CC Name <ccUser@theirdomain.com>\r\n"; 
  $headers .= "Bcc:Real BCC Name <bccUser@theirdomain.com>\r\n"; 

  /* Try to send message and respond if it sends or fails. */ 
 if(mail ('ToPersonsName <toPerson@theirdomain.com>', $subject, $body, $headers )){ 
     echo "<h2>Your Message was sent!</h2>"; 
 } 
else{ 
     echo "<font color='red'><h2>Your Message Was Not Sent!</h2></font>"; 
} 
exit; 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:54:33.323

```
$toEmail="your email";
$sub="your subject";
$to=$toEmail;
$subject=$sub;
$from="info@mypropick.com"; 
$headers = "MIME-Version: 1.0\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\n";
$headers .= "From: <".$from.">\n";
$headers .= "X-Priority: 1\n";
$message='<div style=" width:700px; margin:0 auto; border:1px solid #e2e2e2;  padding:20px;">
<h3>MYPROPICK Services:</h3>'.$msg.'</div>';
$message .= "<br/>Regards <br />MYPROPICK.COM";
if(mail( $to, $subject, $message, $headers ))
echo "Mail Sent Successfully";
else
echo "Mail is not sent please set your smtp setting"; 
```

# c - 转义十六进制序列

> ID：15445562
> 
> 赞同：0
> 
> 时间：2013-03-16T04:26:45.280
> 
> 标签：c, hex, ascii

我正在尝试创建一个与实际十六进制值相对应的十六进制转义序列。

我从来没有真正使用过十六进制转义序列，但作为第一次尝试，我想创建十六进制值：0x12345678

我需要以下内容吗？：

```
hex_value = "\x30\x78\x31\x32\x33\x34\x35\x36\x37\x38" 
```

我在这里找到了字符的十六进制值：[http ://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:43:31.380

至少有两种方法可以创建十六进制值的字符串。

```
char a[] = { 0x12, 0x34, 0x56, 0x78, 0 };
char *aa = "\x12\x34\x56\x78"; 
```

请注意，您`0x`在裸数字和`\x`字符串中使用。

现在，`a`数组的前 4 个字节可能对应也可能不对应 32 位整数值 0x12345678。它将在“big-endian”系统上执行此操作，但不会在“little-endian”系统上执行（其中字节将被反转）。因为多字节整数在内存中的排列方式有不同的约定。甚至有一些奇怪的系统，其中两个单词使用一种约定排序，单词中的两个字节使用另一种排序（我忘记了哪个系统，也忘记了组合是什么）。

如果在目标系统上编译和运行，该程序将为给定整数输出适当的十六进制转义序列。

```
#include <stdio.h>

int main() {
    int i = 0x12345678;
    unsigned char *p = (void *)&i;
    printf("\\x%2x\\x%2x\\x%2x\\x%2x\n", p[0], p[1], p[2], p[3]);
    return 0;
} 
```

# azure - WAWS 和 WAVM 何时退出预览版并得到全面支持

> ID：15445566
> 
> 赞同：1
> 
> 时间：2013-03-16T04:27:09.730
> 
> 标签：azure

我认为 Windows Azure 网站 (WAWS) 和 Windows Azure 虚拟机 (WAVM) 仍然处于预览版中，所以有人知道它什么时候会从预览版中出来并得到完全支持吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:32:30.340

Arun，事实上如此重大的产品特定决策是在公司层面做出的，然后通过适当的渠道（即产品网站或博客）向公众公布。在论坛中，您不会得到如此多的产品特定答案。

到目前为止，Windows Azure 产品团队尚未就 WAVM、WAWS、WAVNet 通用可用性 (GA) 发布任何公告。

# jquery - 从字段值生成带有选项的数组

> ID：15445570
> 
> 赞同：0
> 
> 时间：2013-03-16T04:27:49.177
> 
> 标签：jquery, arrays

有没有办法从一系列包含输入字段的跨度中生成一个数组，格式如下：

```
[[1,100],[2,200],[3,300],[4,400]] 
```

HTML：

```
<div id="arrays">
<span>
<input type="text" value="1">
<input type="text" value="100">
</span>
<span>
<input type="text" value="2">
<input type="text" value="200">
</span>
<span>
<input type="text" value="3">
<input type="text" value="300">
</span>
</div> 
```

我已经像这样处理它但没有成功：

```
str = [];
$('#arrays').children("span").find('input').each(function(index) {
str[index] = $(this).val();
});

var string = [ str ]; 
```

然后数组将传递给 jqPlot，如下所示：

```
var plot1 = $.jqplot('chartdiv', [string]); 
```

如果不生成数组，代码将如下所示（示例）：

```
var plot1 = $.jqplot('chartdiv', [[[1,100],[2,200],[3,300]]]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:32:33.660

试试这个

```
str = [];

  $('#arrays span').each(function(){
    var value1 = $(this).find('input['input:first']')val();
    var value2 =  $(this).find('input['input:last']')val();
     var r = [value1 ,value2 ];
    str .push(r);

   }); 
```

# c++ - 静态函数输出与普通 fn 输出不同

> ID：15445572
> 
> 赞同：0
> 
> 时间：2013-03-16T04:27:55.257
> 
> 标签：c++, static-members

当我使用

```
static int CompareFunction(const void* _g1, const void* _g2); 
```

qsort 的输入是正确的

但使用

```
int CompareFunction(const void* _g1, const void* _g2); 
```

qsort 的输入是错误的。错误是： `error: argument of type 'int (<namespace>::<ClassName>::)(const void*, const void*)' does not match '__compar_fn_t {aka int (*)(const void*, const void*)}'`

静态如何以这种方式改变行为？我的意思是我所做的只是将类中的一个函数更改为静态的，这意味着它现在缺少这个指针。我没有再做任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:41:38.550

只能在对象的实例上调用非静态函数。没有对象的实例来调用内部的函数`qsort`（它只是具有它认为不透明的指针），因此它不能调用成员函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:30:20.077

静态成员函数是常规函数，但非静态成员函数是不同的。需要有额外隐藏的“this”参数才是区别所在。

# assembly - 如何处理 x86 ASM 中的未知长度输入？

> ID：15445579
> 
> 赞同：4
> 
> 时间：2013-03-16T04:29:14.077
> 
> 标签：assembly, x86, gnu

所以我的大部分代码都在工作，但我无法弄清楚如何准确处理输入句子长度未知的事实。我是组装新手，这有点令人困惑。

（现在我将它设置为好像已知长度为三个字符，但显然我需要更改它。）

```
.data       
input_msg:  .ascii "Enter a random sentence: "
input_msg_len:  .long 25
input_str:  .ascii  "???" # 3rd should get newline  
count:      .long 0 
newline:    .long 10    

.text               
.global _start          
_start:             

# prompt for input
    mov $4, %eax    # prompt for input
    mov $1, %ebx
    mov $input_msg, %ecx
    mov input_msg_len, %edx
    int $0x80
# get input
    mov $3, %eax    # 3 to request "read"
    mov $0, %ebx    # 0 is "console" (keyboard)
    mov $input_str, %ecx # input buffer addr
    mov $3, %edx    # number of symbols typed in
    int $0x80       # Go do the service!

again1:
    mov $input_str, %ecx    
    add count, %ecx # count is offset from input_str beginning

    mov $4, %eax    # to write
    mov $1, %ebx    # to console display
    mov $1, %edx    # 1 byte to write
    int $0x80   # Do it!

    push    %ecx        # push onto stack   

    incl    count   # increment count

    cmp $3, count   # compare lengths
    jnz again1     # jmp again if not 0 (no difference)

    mov $0, %edi    # use edi as loop counter

    mov $4, %eax    # print out msg
    mov $1, %ebx    # etc.
    mov $1, %edx    # length
    int $0x80       # OS, serve!

again2:     
    pop %ecx    

    mov $4, %eax    # print out msg
    mov $1, %ebx    # etc.
    mov $1, %edx    # length
    int $0x80       # OS, serve!        

    inc %edi    # increment edi 
    cmp count, %edi # compare lengths
    jnz again2  # jmp again if not 0 (no difference)

# print newline
    mov $4, %eax    # print out msg
    mov $1, %ebx    # etc.
    mov $newline, %ecx  # addr
    mov $1, %edx    # length
    int $0x80       # OS, serve!
# exit
    mov $1, %eax    # exit
    int $0x80       # OS, serve! 
```

基本上，我想知道的是如何让代码适用于任何句子，而不仅仅是一个 3 个字符长？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:39:58.057

您只需要分配一个更长的缓冲区`input_str`并读取有效读取的文本量，在 read 系统调用之后的 eax 中找到。

换句话说，您需要确定可以接受的最大长度并将代码更改为如下所示：
注意：可以*静态*分配这样的短字符串，当然如果您需要一个大缓冲区（比如说从文件中获取数据），您可以改为*动态*分配缓冲区）。同样，对于键盘输入，132 可能就足够了。

```
...
input_str:  db  132 dup(?)  # 132 bytes buffer for input string
input_str_len: .long        # length of the string effectively read from user
...
# get input
    mov $3, %eax    # 3 to request "read"
    mov $0, %ebx    # 0 is "console" (keyboard)
    mov $input_str, %ecx # input buffer addr
    mov $131, %edx    # _Max_ number of bytes accepted in input_str
    int $0x80       # Go do the service!

    move %eax, $input_str_len    # save nb of bytes effectively read
...
    #you can then use input_str_len to control when to exit processing loop etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:41:27.810

嗯......你可以用= 0做一个sys_brk。`%ebx`那是你原来的“休息” - 保存它。将 4k 的倍数添加到该值并再次 sys_brk。将您的 sys_read 放入该缓冲区。如果您阅读了完整的 4k（在`%eax`sys_read 之后），请在当前的“break”和 sys_brk 中添加更多内容，然后再阅读一些内容……直到完成。这个“应该”在一个连续的缓冲区中为您提供所有内容......

只是决定一些“最大值”并且不要让他们进入更多的东西，这要容易得多！您可能想要“刷新缓冲区”。如您所知，sys_read（从键盘）在看到换行符 (0xA) 之前不会返回。如果讨厌的用户输入了多个`%edx`字符，其余的将留在操作系统的缓冲区中。您可以在 3 字节缓冲区代码中看到这一点。键入“abcls”。我想你会发现退出后你的 shell 提示符会读取“ls”，并为你提供一个目录列表。没问题，但它可能是“rm”或有害的东西！当您的 sys_read 返回时，如果`%eax`小于`%edx`，您就完成了。如果`%eax`=`%edx`（不会更多），如果缓冲区中的最后一个字符是 LF (0xA)，那么你就完成了。如果没有，则 sys_read 进入一个虚拟缓冲区，直到你得到那个 LF。这会使您的代码复杂化很多，但它“更安全”......

我可以尝试 Nasm 语法中的示例，但我认为我最好不要尝试 AT&T ... :)

# android - Android模拟器没有显示软键盘？

> ID：15445583
> 
> 赞同：5
> 
> 时间：2013-03-16T04:30:00.997
> 
> 标签：android, keyboard

我的应用程序上有一个edittext，我想要模拟器上的软键盘。但问题是它没有显示键盘。我已经尝试了很多东西，但对我来说并没有用完：-

**第一的**

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(tee_tea_edit_text, InputMethodManager.SHOW_IMPLICIT); 
```

**第二**

已经点击这个

```
Edit your AVD, add "Keyboard Support" and change the value to no.

Restart your AVD making sure that you wipe user data. Your keyboard will popup now. 
```

有很多东西尝试但对我来说没有用完。

[如何让安卓模拟器显示软键盘？](https://stackoverflow.com/questions/10238769/how-can-i-make-the-android-emulator-show-the-soft-keyboard)

[模拟器中的Android 4.0键盘问题。？](https://stackoverflow.com/questions/7885563/android-4-0-keyboard-issue-in-emulator)

我的avd图片如下：-

![影音图片](../Images/665e0f6fcd4c3fb0b2bb5fa621625340.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T04:36:09.933

好吧，您可以尝试编辑您的 AVD 并设置两者：

`Keyboard Lid Support`并`Keyboard Support`_`YES`

然后重新启动您的 AVD。也许它会起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-02T23:31:08.920

转到Android虚拟设备，选择您的决定并取消选中显示：“硬件键盘存在”的复选框，然后重新启动您的AVD

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-13T18:45:30.750

确保你没有

```
 android:textIsSelectable="true" 
```

在布局中的标签中。

# javascript - 检测 div 高度并将其更改为等于背景图像高度

> ID：15445585
> 
> 赞同：0
> 
> 时间：2013-03-16T04:30:05.893
> 
> 标签：javascript, jquery, height, background-image

我需要一个 div 在特定窗口宽度和特定高度之后获取其动态背景图像的高度。

因此，当 div (.header-block-wrapper) >= 630px 并且窗口宽度 >= 978px 时，div 需要与其背景图像一样高。

我在这里得到的用于检测背景图像高度的代码脚本： [How do I get background image size in jQuery?](https://stackoverflow.com/questions/5106243/how-do-i-get-background-image-size-in-jquery)

整个脚本也必须在调整大小时触发，这就是我使用 ($(window).resize...) 的原因。

但它不工作......任何想法？

```
$(window).load(function() {
        $(function(){
            var innerHeight = $('.header-block-wrapper').height();
            var innerWidth = $('.header-block-wrapper').width();
            var backgroundHeight;

            $(image).load(function () {
                backgroundHeight = image.height;
            });

            image.src = $('.header-block-wrapper').css('background-image').replace(/url\(|\)$/ig, "");

            $(window).resize(function(){
                if( innerHeight >= 630px && innerWidth >= 978px) {
                    $('.header-block-wrapper').css("height",backgroundHeight);
                }else {
                    $('.header-block-wrapper').css("height","auto");
                }

            });
        });
    }); 
```

**编辑//我修复了它：**

好吧，我修复了它，而不是使用背景图像，而是使用 div 中的图像作为背景。此图像具有 100% 宽度、自动高度和绝对值。

获取图像的高度比获取背景图像更容易。

```
jQuery(window).load(function() {
    jQuery(window).resize(function(){
        var innerHeight = jQuery('.header-block-wrapper').height();
        var innerWidth = jQuery('.header-block-wrapper').width();
        var imageHeight = jQuery('.header-block-image').height();

            if( innerHeight >= 630 && innerWidth >= 978) {
                jQuery('.header-block-wrapper').css("height",imageHeight);
            }else {
                jQuery('.header-block-wrapper').css("height","auto");
            }

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:36:23.607

为什么不尝试使用 CSS 来实现这一点。

如果您的最小目标图像尺寸为“宽度 = 800 像素”和“高度 = 600 像素”，则其他图像将从指定的目标尺寸之上递增。做

```
.header-block-wrapper {
min-width:800px;
min-height:600px;
margin: auto;
} 
```

为它分配您需要的默认高度和宽度，然后当您转储任何更大的东西时，如果您的 CSS 中有高于此默认指定大小的图像，它将扩展以适应。

# javascript - 鼠标悬停消息显示在图像 jquery/js 的某些部分

> ID：15445591
> 
> 赞同：4
> 
> 时间：2013-03-16T04:31:05.017
> 
> 标签：javascript, jquery, hover, mouseover, jquery-hover

我在 html/php 页面尺寸为 500x500 像素上有这张图片。现在我希望它的部分被切片，当用户将鼠标放在图像不同部分的图像上时，应显示不同的消息..

假设图像被分成 20 个部分，或者我为每个切片选取起始和结束坐标。我怎样才能使一些 js 代码疼痛，以便在同一张图像上有不同的区域显示不同的消息（工具提示）。

各位大侠帮忙？？

我想过使用地图、区域和坐标方法进行编程。但是没有运气完成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:39:47.787

嗨，这是您要找的东西：

```
<html>
<head>
<script language="JavaScript">
function getDetails(obj){
clickX = window.event.x-obj.offsetLeft;
clickY = window.event.y-obj.offsetTop;
    if((clickX>=100&&clickX<=200)&&(clickY>=100&&clickY<=200))
    {
    alert(" You are between (100,100) And (200,200) of the Image");
    } 
}
</script>
</head>
<body>
<img src="image.jpg" onMousemove="getDetails(this)" id="myimg" height="500" width="500" />
</body>
</html> 
```

jQuery版本：

```
<head>
<script language="JavaScript">
 $(document).ready(function(){
 $("#myimg").bind("mousemove",function(e){
  var offset = $("#myimg").offset();
  var clickX=e.clientX - offset.left;
  var clickY=e.clientY - offset.top;
    if((clickX>=100&&clickX<=200)&&(clickY>=100&&clickY<=200))
    {
    alert(" You are between (100,100) And (200,200) of the Image");
    } 
});
});
</script>
</head>
<body>
<img src="image.jpg"  id="myimg" height="500" width="500" />
</body> 
```

this code will get the mouse co-ordinate relative to image after hovering the image and then will check if co-ordinates are of certain area are hovered ? and will give you the alert message if they are hovered.

Hope this'll be useful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:37:20.103

有几种方法：

1.  使用`map`和`area`标签查看它的描述它是为那个东西制作的

2.  使用 svg

但我认为第一个解决方案最适合你

# java - 自动设置 createdOn 和 UpdatedOn

> ID：15445592
> 
> 赞同：4
> 
> 时间：2013-03-16T04:31:08.817
> 
> 标签：java, spring, spring-data, spring-data-mongodb

我正在玩 spring-data 和 mongodb。我想要实现的是在创建和/或更新对象时自动设置 createdOn 和 updatedOn 日期。所以我基本上创建了一个包含 createdOn 和 updatedOn 日期属性的“BaseDocument”，并创建了一个 AbstractMongoDbListener 以便我可以在保存（onBeforeSave）之前拦截文档，然后设置这些日期。问题是，如果我不将这些日期添加到扩展 BaseDocument 的类的构造函数中，这些日期将不会保存到数据库中。子类需要在其构造函数上具有 createdOn 和 updatedOn 才能使这些持久化，这与自动创建这些日期的想法相混淆。实施它的好策略是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-17T14:08:22.027

审计支持已在 Spring Data MongoDB 1.2.0 中实现。为了使用你需要在你的类路径上有 joda-time 并将创建和修改日期的类型设置为 DateTime。所有必需的步骤

*   添加maven依赖

```
 <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>2.2</version>
    </dependency> 
```

*   在 Spring 配置中添加对审计的支持

```
 <mongo:auditing /> 
```

*   注释类中的属性，例如：

```
 @CreatedDate
    private DateTime created;

    @LastModifiedDate
    private DateTime modified; 
```

需要记住的一点：创建日期仅在您保存未设置 _id 字段的文档时设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:45:35.727

好的，通过使用 onBeforeConvert 而不是 onBeforeSave 让它工作。我正在设置源对象而不是 DBObject。在转换之前设置它可以解决问题。

# c++ - 多行注释和换行

> ID：15445593
> 
> 赞同：4
> 
> 时间：2013-03-16T04:31:11.883
> 
> 标签：c++, c++11, c-preprocessor

在 C++11 中，标准在 2.2.3 中说：

> 每个注释被一个空格字符替换。保留换行符。

1.  该短语是连续的，意味着保留以换行符结尾的换行符吗？

2.  如果 (1) 为真，那么为什么 Visual C++、gcc 和 clang 在多注释中为每一行保留空行。

这个问题很重要，因为我正在编写一个 c++ 预处理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:58:01.267

它所讨论的新行是在注释被单个空格字符替换后仍然存在的行。当在包含它的段落的更大上下文中查看片段时，这一点会更清楚。

所以特别是多行注释中的新行*不会*保留，也不会终止预处理指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:32:18.717

AC/C++ 预处理器会去除所有注释，但是当您查看预处理器输出时，通常会将源代码行保持在相同的行号处。

这样一来，读取预处理器输出的编译器就可以为错误消息和警告打印正确的行号。

预处理器通常也会保留所有空行。

您还必须严格区分从源中删除的多行宏以及何时扩展它们。它们总是*在保留所有换行符的同时*被删除。它们总是被*所有换行符*所取代。两者都是完全独立的操作，彼此无关。

在过去，C 预处理器总是在 stdout 上产生它的输出，而 C 编译器会从 stdin 中读取它。预处理器发出内部`#<N> "<FILE>"`语句，C 编译器将其解释为“行号 N 跟随”。所以理论上预处理器可以在输出中不产生空行。但在实践中，此`#<N> "<FILE>"`功能仅用于`#include`语句后面的行。

今天，为了提高性能，C 编译器中内置了预处理器，但如果明确要求，您仍然可以查看中间结果。

注意：另请参阅下面的好评论：该标准并未真正指定预处理器的文本输出在空格方面的外观。文本输出是特定于实现的。有很大的解释空间。定义的是至少一个空格字符必须在哪里，并且所有标记都保留在其原始行上（或用其原始行标记），以便错误消息有意义。

# java - Java - “安全”脚本

> ID：15445595
> 
> 赞同：0
> 
> 时间：2013-03-16T04:31:18.733
> 
> 标签：java, security, scripting, jsr223

有谁知道 Java 平台的任何脚本可以强制限制为提供的函数集（最好绝对没有函数，除非提供）？我已经尝试了几种与 JSR223 兼容的语言，但在所有情况下都能够危及安全性。

我的系统目前在做什么：

1.  从文件系统加载请求的脚本。
2.  创建一个上下文来运行脚本
3.  在新上下文中运行脚本

即使正确配置了安全管理器，什么会阻止恶意脚本内容访问（或更糟——变异）对象中的字段，否则它不应该访问这些字段？如果出现错误或故意为恶意行为定制脚本，这可能会造成一些损害。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:54:01.030

我想我会解决这个问题并尝试打破它。也许它会经得起考验。

[http://riven8192.blogspot.com/2010/07/java-rhino-fine-grained-classshutter.html](http://riven8192.blogspot.com/2010/07/java-rhino-fine-grained-classshutter.html)

# android - Facebook Android SDK：获得共同的朋友

> ID：15445600
> 
> 赞同：2
> 
> 时间：2013-03-16T04:33:03.507
> 
> 标签：android, facebook, request

我正在尝试使用 Android SDK 获得两个 Facebook 用户的共同朋友：

```
Request friendsInCommon = Request.newRestRequest(myFbSession, "me/mutualfriends/otherUserId", null, HttpMethod.GET); 
```

但是，这会返回以下错误：

```
03-16 04:24:39.652: D/ViewProfile(27121): My friends list: {Response:  responseCode: 200, graphObject: null, error: {HttpStatus: 200, errorCode: 3, errorType: null, errorMessage: Unknown method}, isFromCache:false} 
```

关于我做错了什么的任何线索？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:42:09.087

如果有人感兴趣，我最终通过将请求视为 Graph API 请求来解决这个问题：

```
Bundle params = new Bundle();
params.putString("fields", "id,name,picture");
Request req = new Request(myFbSession, "me/mutualfriends/otherUserId", params, HttpMethod.GET, new Callback(){
    @Override
    public void onCompleted(Response response) {
        // your callback code
    }
});
req.executeAsync(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-12T05:47:02.883

我知道回答这个问题为时已晚，但**我/mutualfriends/otherUserId**在 Facebook Graph API v2.0 及更高版本中已弃用，因此这是在 Graph API v2.0 及更高版本中获取共同朋友的正确方法

```
Bundle params = new Bundle();
            params.putString("fields", "context.fields(mutual_friends)");
            new GraphRequest(
                    AccessToken.getCurrentAccessToken(),
                    "/" + fbId,
                    params,
                    HttpMethod.GET,
                    new GraphRequest.Callback() {
                        @Override
                        public void onCompleted(GraphResponse graphResponse) {
                            try {
                                JSONObject jsonObject = new JSONObject(graphResponse.getRawResponse());
                                if (jsonObject.has("context")) {
                                   jsonObject = jsonObject.getJSONObject("context");
                                if (jsonObject.has("mutual_friends")) {
                                    JSONArray mutualFriendsJSONArray = jsonObject.getJSONObject("mutual_friends").getJSONArray("data");
                                  // this mutualFriendsJSONArray contains the id and name of the mutual friends.
                                }
                              }
                            } catch (JSONException e) {
                                e.printStackTrace();
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        }
                    }
            ).executeAsync(); 
```

有关官方文档，请参阅此[https://developers.facebook.com/docs/graph-api/reference/v2.3/user.context/mutual_friends](https://developers.facebook.com/docs/graph-api/reference/v2.3/user.context/mutual_friends)

# java - java程序并发访问一行（在数据库表中）？

> ID：15445609
> 
> 赞同：-1
> 
> 时间：2013-03-16T04:34:06.013
> 
> 标签：java, sql-server-2008

我的数据库中有一个包含一些行的表。在我的 Java 程序中，有一个使用一行的“消费者类”和一个将数据放入该行的“生产者类”。我如何确保生产者不能更改行，除非它得到消费者的许可？

我的数据库是 SQL Server 2008 r2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:12:34.543

不确定是否真的理解你的问题。

您可能可以在该行中放置一个标志列，只有当 Consumer 类更新标志时，才意味着授予 Producer 更新它的权限。

# jquery - 向上/向下滑动 div - 这段代码有什么问题？

> ID：15445612
> 
> 赞同：1
> 
> 时间：2013-03-16T04:34:18.483
> 
> 标签：jquery, jquery-animate, hide, toggle, show

我正在编写一个简单的脚本来`div (position: fixed)`在单击按钮时向上/向下滑动工具栏。但是当我单击按钮时没有任何反应，甚至没有`alert`。

脚本的动画部分似乎有问题，好像我把动画部分拿出来就会播放警报。

**JS：**

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#hidebutton").click(function () {
            alert('hide clicked');
            $("#toolbarcontainer").animate({
                bottom: '-50px' //slide toolbar down so it's hidden
            }, 500);
            $(".footer").animate({
                margin-bottom: '10px'  //slide footer back
            }, 500);
            $("#hidebutton").fadeOut();
            $("#showbutton").fadeIn();
        });
        $("#showbutton").click(function () {
            alert('show clicked');
            $("#toolbarcontainer").animate({
                bottom: '0'  //slide toolbar back up
            }, 500);
            $(".footer").animate({
                margin-bottom: '90px'  //slide footer up again
            }, 500);
            $("#showbutton").fadeOut();
            $("#hidebutton").fadeIn();
        });

    });
</script> 
```

**CSS：**

```
#toolbarcontainer {
position:fixed;
width:100%;
height:80px;
bottom:0;
background-color: rgba(255,255,255,0.7);
filter:alpha(opacity = 80);
}
#showbutton,#hidebutton {
position:absolute;
right:25px;
top:5px;
height:10px;
width:10px;
cursor:pointer;
}
#showbutton {
display:none;  //hide until toggled
} 
```

**HTML：**

```
<div id="toolbarcontainer">
    //contents of toolbar
    <div id="showbutton"><img src="../../site/pictures/showbutton.png"></div>
    <div id="hidebutton"><img src="../../site/pictures/hidebutton.png"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T04:45:36.453

将引号添加`margin-bottom`到`'margin-bottom'`

```
$(document).ready(function() {
    $("#hidebutton").click(function () {
        alert('hide clicked');
        $("#toolbarcontainer").animate({
            bottom: '-50px' //slide toolbar down so it's hidden
        }, 500);
        $(".footer").animate({
            'margin-bottom': '10px'  
        }, 500);
        $("#hidebutton").fadeOut();
        $("#showbutton").fadeIn();
    });
    $("#showbutton").click(function () {
        alert('show clicked');
        $("#toolbarcontainer").animate({
            bottom: '0'  
        }, 500);
        $(".footer").animate({
            'margin-bottom': '90px'  //slide footer up again
        }, 500);
        $("#showbutton").fadeOut();
        $("#hidebutton").fadeIn();
    });

}); 
```

# java - java - 在方法中创建的对象是否仅在方法执行的生命周期内存在？

> ID：15445613
> 
> 赞同：0
> 
> 时间：2013-03-16T04:34:19.623
> 
> 标签：java, oop

我正在编写一个 java 应用程序并尝试对自己进行内存管理方面的教育。如果在一个已经创建的对象的方法中实例化一个String对象，这个String对象在方法执行后会存在内存中吗？举这个例子。执行 myObject.setNewName() 后内存中是否存在 newString？或者如果它们不是实例变量，java会销毁这些对象吗？

```
public class MyObject(){

    private String name;
    private Integer id;

    public myObject(Integer id, String name){
        this.id   = id;
        this.name = name;
    }

    public void setNewName(){

        String newString = "This is a new name";
        this.name = newString;
    }
} 
```

另一个文件

```
MyObject myObject = new MyObject(4,"Bob");

myObject.setNewName(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:37:57.943

如果对对象的引用被保留在方法之外，例如分配给一个字段，那么当方法结束时，对象将不会被垃圾回收。

当方法结束时，仅分配给局部变量的对象将“不可访问”，因此将被标记为垃圾回收。

这一切都与范围有关。如果对对象的引用仍在范围内，它将保留在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:43:53.737

字符串实际上是在一个常量池中创建的，并且会贯穿整个 JVM 生命周期。您可以通过以下方式对其进行检查：

```
 public static void main(String[] args) {
    aMethod();
    String str1 = "This is a string";
    System.out.println(System.identityHashCode(str1)); 
}

public static void aMethod(){
    String str0 = "This is a string";
    System.out.println(System.identityHashCode(str0));
} 
```

str0 和 str1 实际上是相同的，因为它们的哈希码相等。

字符串是一种特定的对象，如果一个普通对象不再被任何人引用，它会在某个时候被 GC-ed 并且内存将被重新循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T04:39:04.563

由于字符串字面量（例如`"This is a new name"`）是实习的，因此即使在方法结束后，它们也会被缓存并保留在内存中。

但是，通常一旦引用对象的变量超出范围，对象就会被 gc'ed。

例如`String newString = new String("This is a new name");`，一旦方法返回，该对象将符合 gc 条件，因为`newString`持有该对象的引用的时间将更长。

注意：这并不意味着您应该使用`new String("This is a new name")`new `"This is a new name", because interning happens in both the cases. The difference is that with`String("This is a new name")` 而不是显式创建一个额外的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T04:40:23.253

当您声明一个对象时，它的易变性（以及对象内容）将具有声明它的方法/对象的生命周期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T04:45:14.793

只要您持有对它的引用，该对象仍将保留在内存中。一旦字符串没有被任何对象引用，它将成为可垃圾回收的，这意味着内存将在某个时候被回收。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-16T04:47:16.163

有趣的是，您所询问的场景与 Java 内存管理的两个方面重叠，这意味着您的答案是肯定的和否定的。

```
String newString = "This is a new name"; 
```

从第一次分配到程序结束，这一行将保存在内存中，因为它引用了一个静态的字符串文字。编译器这样做是因为它可以保证`"This is a new name"`永远不会改变，因此每次运行该方法时分配、重新分配和删除它都是无用的 CPU 周期。

另一方面，如果这条线是，例如

```
String newString = new Object().toString(); 
```

这不是文字，因此`String`在方法的每次新运行期间都会创建一个新对象（即 a ）。那么，这个对象什么时候被释放呢？您可以保证它将持续到方法结束，因为它被`newString`. 之后，它将一直存在到下次垃圾收集器运行时。但是，没有任何东西会再引用它，因此无论如何都无法访问。

# sql - 如果我有压缩，为什么我还需要维度

> ID：15445614
> 
> 赞同：1
> 
> 时间：2013-03-16T04:34:27.603
> 
> 标签：sql, sql-server-2008, ssas, data-warehouse, business-intelligence

最近有点疑惑，求解答。

通常，在设计数据仓库时，我们要么使用星型模型，要么使用雪花模型，要么使用混合模型，通常我们将主数据规范化为维度表（当然有时出于性能考虑，去规范化）。我的问题是，规范化成维度表，或者创建各种不同的维度表，有什么好处？

**如果是为了节省空间，那么 SQL Server 不同级别的压缩已经节省了空间。** 例如，在一个事实表中，有一个 varchar(max) 列，它只有 1% 的唯一值，然后将其归一化为维度表，并将 key 放入事实表中，这将有助于节省空间；但是，由于 SQL 行级压缩，理论上它的工作方式相同，而是通过您自己的设计进行规范化，SQL Server 会找到字符串模式并保存在某处，行内只是指针，因此空间使用量理论上就像钥匙。

**如果是为了提高查询性能，**那么对于维度表，无论维度上有什么索引，都需要至少先进行非集群索引扫描/索引查找维度表获取key，再使用key获取集群索引/或 RID，然后获取完整数据。那是 2 倍的 I/O。如果没有维度，您仍然有事实表上的索引，对应的列，由于压缩，您的索引表将与您在维度表上创建索引的大小相似。所以，当你查询时，可能也是一次非集群索引扫描/集群索引查找/然后全量数据，所以I/O可能会更小，加上没有join，查询性能可能会更快.

**那么，如果我已经进行了压缩，为什么还需要维度？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T16:49:20.057

维度模型不仅仅与数据库的物理设计有关。如果您发现在“视图层”中创建星型模式时性能更好，下面是 3NF 表，太好了！

星型模式是为了让报告编写者和最终用户能够访问来自多个来源的数据，然后可以通过多种不同的方式对其进行聚合和分析。如果我必须写一份报告显示“x 类产品销售额 > 10000 美元的客户的平均延迟发票数量”，规范化模型将要求我转到销售系统的每个子表，可能产生一个有 10 - 50 个连接的查询！

想象一下，我是一名报告编写者，当我想做一些不同的事情时，我必须记住所有这些连接......或者更糟的是，我是一个编写基本 SQL 的业务用户，我不知道如何做这么多的加入。

因此，识别数据中的业务关系的艰苦工作是预先完成的，并且构建了事实表，将我的发票数据与与之相关的描述性数据连接在一起。现在，我只需按产品事实查询客户总销售额，然后获取结果客户集，并加入发票事实（甚至是预构建的聚合）以获得平均延迟发票数。可能有 2-4 个表连接，而且对报告作者来说更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:26:07.510

我不明白你为什么要关联压缩和尺寸。仓库的全部意义在于忘记压缩和规范化，并为需要最少数量的表连接的东西建模，以便尽可能快地获取数据。

假设您在桌子上放置了您未来房屋的 3D 模型。您会希望从各个角度查看模型，以便对房子有更多了解。同样，我们有维度，以便我们可以从所有可能的角度查看数据。这就是米奇说“切片和切块”时的意思。

维杰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:45:07.123

您必须考虑尺寸值的变化。

如果您的一位客户结婚并且您需要按当前婚姻状况搜索您的数据，您是否希望：

1.  更新该客户的单个维度记录，或者...
2.  为该客户更新事实表中的每条历史记录？

规范化的关键原则之一是您将每项信息仅保存在一个位置，并且不会随着数据仓库的变化而改变。

# jsp - 如何将 JSP 语法高亮添加到 Komodo Edit？

> ID：15445619
> 
> 赞同：2
> 
> 时间：2013-03-16T04:35:53.567
> 
> 标签：jsp, configuration, syntax-highlighting, komodoedit

我正在使用 Komodo Edit 编辑 JSP。我需要帮助才能将 jsp(*.jsp) 添加到 Komodo Edit 的文件关联列表中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T01:30:16.660

这是添加语法突出显示的技巧：

*   关闭科莫多
*   在你的[安装目录](http://community.activestate.com/faq/komodo-file-locations)中找到[keywords.py](https://github.com/Komodo/KomodoEdit/blob/master/src/silvercity/PySilverCity/SilverCity/Keywords.py)
*   选择具有相似元素的受支持语言，然后用您自己的关键字替换其关键字。
*   重新启动 Komodo，打开该类型的文件，然后更新[颜色首选项](http://docs.activestate.com/komodo/7.0/prefs.html#colors)并[使用宏来调试](http://community.activestate.com/faq/debug-udl-language-styling)您的更改。

正式的流程是使用[Luddite语言](http://docs.activestate.com/komodo/8.0/udl.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T18:22:17.027

你们中的一些人可能会在最新的 8.5.3 版本（Komodo 编辑）中找到（或者实际上在这种情况下，没有找到）keywords.py。不管它在 GUI 中相当简单：

从顶部菜单转到：Komodo > Preferences > File Associations

在“新关联”下的“模式”框中添加您希望关联的“模式”（*.jsp），从下拉列表中选择您希望与该模式关联的语言，然后单击“添加...”将其添加到列表。

请注意，在您单击“首选项”对话框底部的“确定”之前，文件关联不会保存到您的模式中。

# javascript - 即使设置为“隐藏”，背面仍然可见

> ID：15445621
> 
> 赞同：3
> 
> 时间：2013-03-16T04:36:01.617
> 
> 标签：javascript, jquery, css

我在 CSS3 中创建了一个[简单的“翻转卡片”](http://jsfiddle.net/DerekL/yVut2/)，当用户将鼠标悬停在卡片上时，它会向下翻转并显示另一面。`backface-visibility`设置为，`hidden`因此背面将不会显示。但是，当我尝试翻转卡片时，背面仍然出现。

因此，我查看了我找到的[工作示例](http://desandro.github.com/3dtransforms/examples/card-01.html)，有趣的是，我的内容与他的几乎相同，而且他的确实有效，但我的无效。[^(（这怎么可能？！）)]在[这里回答](https://stackoverflow.com/a/8506148/283863)也不起作用[^(（因为我已经将所有内容都设置`backface-visibility`为`hidden`）)]。

这是我的一段代码：

```
$(".wrapper").hover(function () {
    $(".flip").stop().transition({
        perspective: '100px',
        rotateX: '-180deg'
    }).toggleClass("down");
}, function () {
    $(".flip").stop().transition({
        perspective: '100px',
        rotateX: '0deg'
    }).toggleClass("down");
}); 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:47:34.817

一个小的添加就可以了：

```
.flip {
  ...
  -webkit-transform-style: preserve-3d;
} 
```

非 webkit 浏览器是否不带或带另一个前缀，具体取决于它们的支持。

# php - 如何在php中将多维关联数组转换为一维数组？

> ID：15445624
> 
> 赞同：4
> 
> 时间：2013-03-16T04:36:13.040
> 
> 标签：php, mysql

**我有一个关于如何将多维数组转换为单维数组**的快速查询

 **```
$teachers=array(array('post_id' => "John Doe",'video_id' => array('Government','English')), array('post_id' => "Steven Lee",'video_id' => array("Math","Science", "PE")),array('post_id' => "Jean Perot", 'video_id' => array("French", "Literature"))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:54:43.637

尝试这个

```
function array_values_recursive($ary)  {
    $lst = array();
    foreach( array_keys($ary) as $k ) {
        $v = $ary[$k];
        if (is_scalar($v)) {
            $lst[] = $v;
        } elseif (is_array($v)) {
            $lst = array_merge($lst,array_values_recursive($v));
        }
    }
    return array_values(array_unique($lst)); // used array_value function for rekey
}

$teachers=array(
    array('post_id' => "John Doe",'video_id' => array('Government','English')), 
    array('post_id' => "Steven Lee",'video_id' => array("Math","Science", "PE")),
    array('post_id' => "Jean Perot", 'video_id' => array("French", "Literature")));

$flat = array_values_recursive($teachers);
print_r($flat); // OUTPUT : Array ( [0] => John Doe [1] => Government [2] => English [3] => Steven Lee [4] => Math [5] => Science [6] => PE [7] => Jean Perot [8] => French [9] => Literature ) 
```**

# mysql - MySQL 计算性别实例

> ID：15445628
> 
> 赞同：2
> 
> 时间：2013-03-16T04:36:46.260
> 
> 标签：mysql, sql, select, join

我有以下 MySQL 查询。

```
USE demo;
SELECT 
  loc.name,
  sum(case cr_sex when 'F' then 1 else 0 end) as 'F#', 
  sum(case cr_sex when 'M' then 1 else 0 end) as 'M#'
FROM case_report_main as cr 
JOIN location as loc on cr.cr_name = loc.name
GROUP BY loc.name 
```

这按我想要的方式工作，它计算每个性别的每次出现并按位置名称对其进行分组。但是当我尝试将它与另一张桌子加入时

```
USE demo;
SELECT 
  loc.name,
  sum(case cr_sex when 'F' then 1 else 0 end) as 'F#', 
  sum(case cr_sex when 'M' then 1 else 0 end) as 'M#'
FROM case_report_main as cr 
JOIN location as loc on cr.cr_name=loc.name
JOIN map_polygons as mp on mp.polygon_name=loc.name
GROUP BY loc.name 
```

这些值完全搞砸了，返回数千而不是预期的数十和数百。

我**想**我理解这个问题，附加表增加了行数。我不确定如何解决这个问题，或者这是否真的是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:41:43.800

因为可能有记录在表上有多个匹配`map_polygons`项导致对性别的计数无效，请尝试将第一个查询放在子查询中，

```
SELECT  mp.*,
        loc.name
        loc.`F#`
        loc.`M#`
FROM
        (
            SELECT  loc.name,
                    sum(case cr_sex when 'F' then 1 else 0 end) as 'F#', 
                    sum(case cr_sex when 'M' then 1 else 0 end) as 'M#'
            FROM case_report_main as cr 
            JOIN location as loc on cr.cr_name = loc.name
            GROUP BY loc.name
        ) loc
        INNER JOIN map_polygons mp on mp.polygon_name=loc.name 
```

顺便说一句，由于是mysql，所以可以总结布尔结果使其更短

```
SELECT  mp.*,
        loc.name
        loc.`F#`
        loc.`M#`
FROM
        (
            SELECT  loc.name,
                    sum(cr_sex = 'F') as 'F#', 
                    sum(cr_sex = 'M') as 'M#'
            FROM case_report_main as cr 
            JOIN location as loc on cr.cr_name = loc.name
            GROUP BY loc.name
        ) loc
        INNER JOIN map_polygons mp on mp.polygon_name=loc.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:13:13.473

在 map_polygon 表中，你的 polygon_name 是唯一的吗？那不是唯一的，您可能需要在选择字段中进行更改

```
SELECT 
  loc.name,
  count(distinct case cr_sex when 'F' then cr.id else null end) as 'F#', 
  count(distinct case cr_sex when 'M' then cr.id else null end) as 'M#'
FROM case_report_main as cr 
JOIN location as loc on cr.cr_name=loc.name
JOIN map_polygons as mp on mp.polygon_name=loc.name
GROUP BY loc.name 
```

# python - 动态更改 Django 小部件的 HTML 属性

> ID：15445629
> 
> 赞同：0
> 
> 时间：2013-03-16T04:36:54.177
> 
> 标签：python, html, django, forms

我在这里有一个 Django 表单，其中包含一个文本输入小部件。我希望能够更改文本输入的 HTML 值属性以反映用户的最后一次搜索（这样他们就可以快速更改输入错误的查询）。现在，下面的代码段不起作用，因为`{{ search_form_value }}`按字面意思在 HTML 中呈现。我在想我可以重新渲染 HTML，填写`{{ search_form_value }}`. 但是，我不确定这是否会以某种方式让我遇到与安全相关的问题（可能是 XSS？），或者其他任何不希望的问题。

如果有一种惯用/更好的方式来做我不想做的事情，我会全神贯注。

```
class SearchForm (forms.Form) :
    _search_attrs = {'class'       : 'some_css_class',
                     'title'       : 'a title',
                     'placeholder' : 'a placeholder',
                     'value'       : '{{ search_form_value }}'}

    search = forms.CharField(max_length=100, label='',
                             widget=forms.TextInput(attrs=_search_attrs)) 
```

当一切都说完了，我希望客户端看到的 HTML 看起来像这样：

`<input class="some_css_class" maxlength="100" placeholder="a placeholder" title="a title" type="text" value="the users last search">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:27:06.907

如何在[session data中保存最后一次搜索，然后在初始化表单时使用](https://docs.djangoproject.com/en/1.5/topics/http/sessions/)[初始参数](https://docs.djangoproject.com/en/1.5/ref/forms/api/#dynamic-initial-values)添加值？

所以你认为会是这样的 -

```
def your_view(request):
    if request.method == 'POST':
        # process form
        request.session['last_search'] = request.POST['search']
        return HttpResponse()
    else:
        form = SearchForm(initial={'search': request.session.get('last_search')
    return render(request, 'search_page.html', {'form': form}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:38:51.970

为了简单地得到它，值必须是：

```
'value'       : '{{ request.GET.search }}'} 
```

结果是：

```
 <input class="some_css_class" maxlength="100" placeholder="a placeholder" 
     title="a title" type="text" name="search" id="id_search" 
     value="{{ request.GET.search }}"> 
```

# php - 将子目录和后缀添加到检索到的图像路径

> ID：15445636
> 
> 赞同：0
> 
> 时间：2013-03-16T04:37:47.340
> 
> 标签：php, wordpress, echo, field

我目前正在使用以下命令：

```
<php echo get('external_photo'); ?> 
```

要从自定义字段中检索图像的完整路径，可以说：

```
http://www.mywebsite.com/images/test.jpg 
```

我希望将图像的路径更改为：

```
http://www.mywebsite.com/images/thumbs/test_thumb.jpg 
```

谁能告诉将子目录和后缀附加到图像路径的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:41:00.453

使用 php dirname() 函数参考： http: [//php.net/manual/en/function.dirname.php](http://php.net/manual/en/function.dirname.php)

然后只需使用“。” 在php中附加字符串的字符

```
<?php echo dirname(get('external_photo'))."/thunbs/test_thumb.jpg" ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:51:34.300

```
<?php 
$photoname = dirname(get('external_photo'))."/thumbs/".basename(get('external_photo'));
$photothumb = str_replace(".jpg", "_thumb.jpg", $photoname);
echo $photothumb;
} ?> 
```

# java - 如何启用/禁用 ToggleButton 的声音？

> ID：15445641
> 
> 赞同：1
> 
> 时间：2013-03-16T04:38:45.200
> 
> 标签：java, android, eclipse

我正在尝试在我的应用程序中实现它，如果用户进入我的设置活动，他可以单击 ToggleButton 并关闭应用内音频。我正在尝试使用复合按钮方法来完成此操作，但是从什么我发现是这个，

```
soundnotify.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if (isChecked) {
                // Sound Notifications is enabled
            } else {
                // Sound Notifications is disabled
            }
        }
    }); 
```

我到底应该在代码的 // 部分中添加什么？我在 android 网站上找到了这个，但它并没有完全解释我应该放什么来启用/禁用 ToggleButton 的声音。我已经在 XML 中指定了 OnClick、TextOff 和 TextON，所以我只是在问我应该在 Java 中做什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:44:56.113

试试这个代码：

```
soundnotify.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if (isChecked) {
                // Sound Notifications is enabled
                soundnotify.setSoundEffectsEnabled(true);
            } else {
                // Sound Notifications is disabled
                soundnotify.setSoundEffectsEnabled(false);
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:08:39.853

您可以存储一个布尔变量`SharedPreferences`并在每次需要播放声音时检查它。

# vb6 - 定义图片框的大小

> ID：15445642
> 
> 赞同：0
> 
> 时间：2013-03-16T04:38:45.513
> 
> 标签：vb6

我在 VB6 中使用这个项目的代码： [http ://www.vbforums.com/showthread.php?394360-VB-Showing-the-CPU-graph-like-in-Windows-Task-Manager](http://www.vbforums.com/showthread.php?394360-VB-Showing-the-CPU-graph-like-in-Windows-Task-Manager)

但是图片框变成了100%的表格，怎么定义它的大小呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:37:30.497

在 VB.NET 中，您的图片框对象应该有一个 SIZEMODE 属性，尝试更改它

在 VB6 中（我不记得了，但它可能被称为..）AUTOSIZE？尝试改变它

一旦您更改了该属性，它应该使用宽度/高度参数而不是自动调整大小，因此可能需要再次设置这些（宽度/高度）或在 form_resize 发生时调整它们的大小。

# 更新

查看您的代码示例后，我可以看到这行定义了 SIZE

```
picCPUGraph.Move(45, 45, Me.ScaleWidth - 90, Me.ScaleHeight - 90) 
```

因此，如果您将其更改为.... style-1

```
picCPUGraph.Move(45, 45, Me.ScaleWidth - 90, (Me.ScaleHeight - 90)/2) 
```

或样式 2

```
picCPUGraph.Move(45, 45, Me.ScaleWidth - 90, (Me.ScaleHeight - 90)/3) 
```

或样式 3

```
picCPUGraph.Move(45, 45, Me.ScaleWidth - 90, (Me.ScaleHeight - 90)/4) 
```

这将阻止您的图片框填写表单客户区。

样式 1 将使用一半的垂直空间 样式 2 将使用三分之一的垂直空间 样式 3 将使用四分之一的垂直空间

# c++ - 在 Makefiles 中包含用于单元测试文件的 gtest 库：

> ID：15445643
> 
> 赞同：5
> 
> 时间：2013-03-16T04:39:04.020
> 
> 标签：c++, makefile, codeblocks, googletest

我目前正在学习如何为 C++ 程序制作和使用 MakeFiles。我已经能够为普通的 .cpp 类创建和运行 Makefile，但我遇到了测试类的问题。为了进行测试，我在 Code::Blocks 中使用 Gtest，并在“链接器设置”的 Test_A.cpp 文件中添加：

```
 /usr/lib/libgtest.a
 /usr/lib/libgtest_main.a 
```

对于其他链接器选项，我放置了“-pthread”。我知道以某种方式需要将这些库添加到 makefile 中，但我不知道如何。我最初认为它们需要在第 3 行中添加，但我尝试的所有操作都会返回数千行类型的错误：

```
 undefined reference to `testing::Test::TearDown()
 undefined reference to `testing::Test::~Test()  etc.... 
```

我的生成文件：

```
1\. all: Test

2\. Test_A.o: Test_A B.h
3\.      g++ -c Test_A.cpp -o Test_A.o

4\. Test: Test_A.o
5\.      g++ -o Test Test_A.o

6\. clean:
7\.      rm -rf *o *~ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T04:42:32.800

在链接行上添加了库：

```
g++ -o Test Test_A.o /usr/lib/libgtest.a /usr/lib/libgtest_main.a -lpthread 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T04:42:47.357

在构建最终二进制文件时，您需要将库名称列表传递给链接器。`LDFLAGS`是 Makefiles 中用于指示传递给链接器的标志列表的变量。

*   要链接到库`libabc.a`或`libabc.so`，您需要将链接器标志作为`-labc`.

*   要指定库的位置，您需要使用`-L`标志。请注意，`LD_LIBRARY_PATH`除了在`/etc/ld.so.conf`.

尽管`-L/usr/lib`在您的情况下是可选的，（因为您的发行版应该已经配置 ld.so.conf 以从中获取库`/usr/lib`），但我在下面显示了它以防万一您想将其更改为其他位置。

```
LDFLAGS := -lpthread -lgtest -lgtest_main -L/usr/lib

all: Test

Test_A.o: Test_A B.h
     g++ -c Test_A.cpp -o Test_A.o

Test: Test_A.o
     g++ -o Test Test_A.o $(LDFLAGS)

clean:
     rm -rf *o *~ 
```

# java - HttpURLConnection 读取超时

> ID：15445647
> 
> 赞同：4
> 
> 时间：2013-03-16T04:40:05.667
> 
> 标签：java, httpurlconnection, socket-timeout-exception

我有以下代码来下载文件表单 URL

```
HttpURLConnection urlConn = (HttpURLConnection)urlOfFile.openConnection();
urlConn.setConnectTimeout(5000);
urlConn.setReadTimeout(10000);

StatusInfo.fileSizeTobeDownload = urlConn.getContentLength();

InputStream reader = urlConn.getInputStream();

FileOutputStream writer = new FileOutputStream(downloadFolder+fileName);
byte[] buffer = new byte[1024]; 
int bytesRead = 0;  
while ((bytesRead = reader.read(buffer)) > 0) {
    writer.write(buffer, 0, bytesRead);
    buffer = new byte[1024];
    StatusInfo.fileSizeDownloaded+=bytesRead;
}
writer.close();
reader.close(); 
```

此代码工作正常，但有时我收到以下错误：

```
java.net.SocketTimeoutException: Read timed out
 at java.net.SocketInputStream.socketRead0(Native Method)
 at java.net.SocketInputStream.read(SocketInputStream.java:146)
 at sun.security.ssl.InputRecord.readFully(InputRecord.java:442)
 at sun.security.ssl.InputRecord.readV3Record(InputRecord.java:554)
 at sun.security.ssl.InputRecord.read(InputRecord.java:509)
 at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:850)
 at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:807)
 at sun.security.ssl.AppInputStream.read(AppInputStream.java:94)
 at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
 at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
 at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
 at sun.net.www.MeteredStream.read(MeteredStream.java:134)
 at java.io.FilterInputStream.read(FilterInputStream.java:133)
 at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2582)
 at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2577) 
```

没有任何网络掉线。有没有其他方法来配置“ReadTimeout”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:58:43.173

这个问题没有意义。您设置了读取超时，您得到了读取超时。如果您比预期更快地得到它，请将其设置为更长。您需要的唯一“配置读取超时的其他方法”是更改超时值。那应该是什么，只有你知道，因为只有你知道为什么要设置它。十秒钟对我来说似乎太短了。

注意，您不需要继续重新创建读取缓冲区。你只是在制造大量的垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:52:10.620

这意味着服务器在ReadTimeout 没有响应，可能是服务器关闭或处理线程被阻塞或服务器太忙。

# php - Xampp 所有的 PHP 页面都是空白的

> ID：15445648
> 
> 赞同：0
> 
> 时间：2013-03-16T04:40:12.880
> 
> 标签：php, xampp

这是error.log 中的输出。我试图将它粘贴到 stackoverflow 中，但我无法让它“可读”出来

[http://pastebin.com/cpTgSw6R](http://pastebin.com/cpTgSw6R)

Apache 服务器加载，甚至 phpmyadmin 加载。但是我没有加载任何其他 php 脚本。

# java - 为服务器端存储创建 ID 的好方法？

> ID：15445650
> 
> 赞同：0
> 
> 时间：2013-03-16T04:40:30.833
> 
> 标签：java, json

我目前正在做一个项目，我们被要求从服务器存储和接收食谱。配方以 json 格式存储在服务器 ip + 一个 id 上。我一直在考虑一种创建 ID 的好方法，该 ID 保证不会在我们提交的两个食谱之间重叠。是否有创建这些 ID 的标准例外方法，或者只存储一个 int 跟踪最大 ID 并在有人想要存储配方服务器端时提取它是一个更好的主意？

在此先感谢，
优雅

```
public void addRecipe(Recipe recipe, String URL) throws IllegalStateException,     IOException{
    // TODO Implement the server-side ID tracking
    //int id = getID();
    //recipe.setId(id);
    HttpPost httpPost = new HttpPost(URL+recipe.getId());
    StringEntity stringEntity = null;
    try {
        stringEntity = new StringEntity(gson.toJson(recipe));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    httpPost.setHeader("Accept","application/json");

    httpPost.setEntity(stringEntity);
    HttpResponse response = null;
    response = httpclient.execute(httpPost);

    //      String status = response.getStatusLine().toString();
    //      System.out.println(status);
    HttpEntity entity = response.getEntity();

    try {
        // May need if statement, check isStreaming();
        entity.consumeContent();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //May possibly need to deallocate more resources here. No 4.0 implementation of releaseconnection();
} 
```

也许这段代码会有所帮助？这就是我将食谱存储到服务器上的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T08:25:03.243

所有数据库供应商都支持某种（代理）ID 生成机制。

如果您将对象存储在数据库中，则可以使用它。

如果您将对象存储在 LDAP 中，则可以为此目的使用节点 DN。

另一种选择是使用一些自然标识符，例如护照号码，社会保障（坏主意，但只是为了解释性质），汽车的车牌号，或它们的组合来唯一标识您的对象。

您不一定必须使用某种代理（实际上是数字类型）ID。

人们经常忘记自然主键，但它们确实很有帮助。

在您的情况下，它可能是发布配方时的服务器 ip + 时间戳。

但是两台服务器可以发布相同的配方。你将如何区分它们？

你会平等地对待他们吗？

您是为您的对象定义身份的人。

这取决于您的业务需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:35:11.753

如果您不介意使用 java 生成一个，则可以使用[UUID](http://java.sun.com/javase/6/docs/api/java/util/UUID.html)，如下所示：

```
UUID identifier = UUID.fromString(gson.toJson(recipe));
// use Strings as your id field
String uuidUniqueId = identifier.toString(); 
```

不过，我强烈建议让您的数据库处理 id 生成。毕竟，数据库比 StackOverflow 上的我们（或 Oracle 的好人）更了解如何优化对象的存储。

# ruby-on-rails - 创建方法寻找未调用的方法

> ID：15445651
> 
> 赞同：0
> 
> 时间：2013-03-16T04:40:40.970
> 
> 标签：ruby-on-rails, activerecord

当我尝试在控制台中创建 Collaborator 对象时，出现以下错误：

```
1.9.3p194 :001 > Collaboration.create(user_id: 14593, member2_id: 14594)
   (0.1ms)  SAVEPOINT active_record_1
   (0.2ms)  ROLLBACK TO SAVEPOINT active_record_1
NoMethodError: undefined method `member1_id' for #<Collaboration:0x000001031c4040> 
```

问题是，方法 member1_id 没有被 Collaboration 控制器的 create 方法调用（显然它也没有在函数调用中使用参数）。线

```
grep -r "member1" . 
```

仅返回迁移文件和开发日志，不返回 MVC 代码。

Rails 在哪里找到对“member1_id”方法的调用？

编辑：

简单的错误，看我的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:54:02.550

在这里简单的回答，我把下面这行放在我的协作模型中

validates_uniqueness_of :member1_id, 范围: :member2_id

重写它以用用户替换 member1

# php - 添加相互依赖的结帐字段

> ID：15445654
> 
> 赞同：0
> 
> 时间：2013-03-16T04:41:32.433
> 
> 标签：php, javascript, wordpress, woocommerce

我想在结帐表单中添加两个字段。我经营一个销售越野零件的网站。我想要一个文本框，客户可以在其中输入他们的车辆年份/品牌/型号。如果他们不希望我们验证该零件是否与他们的车辆兼容，我希望他们必须检查一个框，上面写着同样的内容。

[http://docs.woothemes.com/document/tutorial-customising-checkout-fields-using-actions-and-filters/](http://docs.woothemes.com/document/tutorial-customising-checkout-fields-using-actions-and-filters/) - 第 3 课非常适合添加字段......但我不知道如何制作仅当文本框为空时才需要该复选框。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:20:41.527

估计是昨晚很晚了。答案很简单。以下来自我在原始问题中发布的链接。

```
/**
 * Process the checkout
 **/
add_action('woocommerce_checkout_process', 'my_custom_checkout_field_process');

function my_custom_checkout_field_process() {
    global $woocommerce;

    // Check if set, if its not set add an error.
    if (!$_POST['my_field_name'])
        $woocommerce->add_error( __('Please enter something into this new shiny field.') );
} 
```

所要做的就是：

```
if (!$_POST['my_field_name'])
        $woocommerce->add_error( __('Please enter something into this new shiny field.') ); 
```

修改如下：

```
if (!($_POST['my_field_name'] || $_POST['my_checkbox']))
        $woocommerce->add_error( __('Please enter something into this new shiny field or check the box.') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:30:22.860

我对 woothemes 了解不多，但这里有一段基本的“如果填写表格，复选框将被禁用”。你没有用 PHP 标记你的查询，所以这都是基本的 javascript

```
<!DOCTYPE html>
<meta charset="UTF-8">
<title>test</title>

<input type="checkbox" id="myCheckBox"></input>
<input type="text" name="myTextBox" id="checking" onblur="myTextBox(this);" onmousedown="myTextBoxActive(this);" />

<script>  

function myTextBox(field) {
    if (field.value == '') {
        document.getElementById('myCheckBox').disabled=false;
    }
}

function myTextBoxActive(field) {
    if (field.value == '') {
        document.getElementById('myCheckBox').disabled=true;
    }
}

</script> 
```

# c# - 无法使用 .net 在 Blackberry 中发送推送通知

> ID：15445665
> 
> 赞同：1
> 
> 时间：2013-03-16T04:43:00.633
> 
> 标签：c#, blackberry

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Text;
using System.Net;
using System.IO;

namespace PushSharp.Blackberry
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            pushToWidget("Hi Anoop If You will Get Notifcation please miss call me 8130513899");

        }

       public bool pushToWidget(string pushedMessage)
        {
           // String BESAddress = "https://pushapi.eval.blackberry.com/mss/PD_pushRequest";
            //String BESWebserverListenPort = "pushPort";
            String widgetNotificationUrl = "https://pushapi.eval.blackberry.com/mss/PD_pushRequest";
            String pushUserName = "3457-
B730k4394m49rOr96r33M8t74303c51k728";
            String pushPassword = "smnBIWO3";

          //  String pushPort = "33215";
            string Boundary = "Boundary ";
            string DeliverBefore = DateTime.UtcNow.AddMinutes(5).ToString("s", System.Globalization.CultureInfo.InvariantCulture) + "Z";
            Response.Write(DeliverBefore);
            bool success = true;
            StringBuilder Data = new StringBuilder();
            Data.AppendLine("--" + Boundary);
            Data.AppendLine("Content-Type: application/xml; charset=utf-8");
            Data.AppendLine("");
            Data.AppendLine("<?xml version=\"1.0\"?>");
            Data.AppendLine("<!DOCTYPE pap PUBLIC \"-//WAPFORUM//DTD PAP 2.1//EN\">");
            Data.AppendLine("<pap>");
            Data.AppendLine("<push-message push-id=" + (char)34 + ID + (char)34 + " deliver-before-timestamp=" +

(char)34 + DeliverBefore + (char)34 + " source-reference=" + (char)34 + pushUserName + (char)34 + ">");
            Data.AppendLine("<address address-value=\"" + "push_all" + "\"/>");
            Data.AppendLine("<quality-of-service delivery-method=\"unconfirmed\"/>");
            Data.AppendLine("</push-message>");
            Data.AppendLine("</pap>");
            Data.AppendLine("--" + Boundary);
            Data.AppendLine("Content-Type: text/plain");
            Data.AppendLine("Push-Message-ID: " + ID);
            Data.AppendLine("");
            Data.AppendLine(pushedMessage);
            Data.AppendLine("--" + Boundary + "--");
            Data.AppendLine("");
            byte[] bytes = Encoding.ASCII.GetBytes(Data.ToString());

            Stream requestStream = null;
            HttpWebResponse HttpWRes = null;
            HttpWebRequest HttpWReq = null;

            try
            {
                //http://<BESName>:<BESPort>/push?DESTINATTION=<PIN/EMAIL>&PORT=<PushPort>&REQUESTURI=/
               // Build the URL to define our connection to the BES.

                String BESName = "cp3457.pushapi.eval.blackberry.com/mss/PD_pushRequest";

                string httpURL = "https://" + BESName + "/push?DESTINATION=2B838E45&PORT=33215&REQUESTURI=/";

             //   string httpURL = BESAddress + ":" + BESWebserverListenPort+ "/push?DESTINATION=" + pushPin + "&PORT=" + pushPort+ "&REQUESTURI=/";

                //make the connection
                HttpWReq = (HttpWebRequest)WebRequest.Create(httpURL);
                HttpWReq.Method = ("POST");
                //add the headers nessecary for the push
                HttpWReq.ContentType = "text/plain";
                HttpWReq.ContentLength = bytes.Length;
                // ******* Test this *******
                HttpWReq.Headers.Add("X-Rim-Push-Id", "push_all" + "~" + DateTime.Now); //"~" +pushedMessage +
                HttpWReq.Headers.Add("X-Rim-Push-Reliability", "application-preferred");
                HttpWReq.Headers.Add("X-Rim-Push-NotifyURL", (widgetNotificationUrl + "push_all" + "~" + pushedMessage + "~" + DateTime.Now).Replace(" ", ""));

                // *************************

               // HttpWReq.Credentials = new MDSCredentials(pushUserName, pushPassword);
                HttpWReq.Credentials = new NetworkCredential(pushUserName, pushPassword);

                Console.WriteLine(pushedMessage);
                requestStream = HttpWReq.GetRequestStream();
                //Write the data from the source
                requestStream.Write(bytes, 0, bytes.Length);
                requestStream.Close();
                //get the response
                HttpWRes = (HttpWebResponse)HttpWReq.GetResponse();

                //if the MDS received the push parameters correctly it will either respond with okay or accepted
                if (HttpWRes.StatusCode == HttpStatusCode.OK || HttpWRes.StatusCode == HttpStatusCode.Accepted)
                {
                    success = true;
                }
                else
                {
                    success = false;
                }
                //Close the streams

                HttpWRes.Close();
                requestStream.Close();
            }
            catch (System.Exception e)
            {
                success = false;
            }

            return success;
        }

    }
} 
```

请检查此代码，代码运行良好并获得响应成功，但当我使用此代码时无法发送

[在php中使用C#作为服务器端的黑莓推送通知](https://stackoverflow.com/questions/13488116/blackberry-push-notification-using-c-sharp-as-server-side) 它工作正常并收到通知我不知道我在哪里做错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T05:58:20.720

我设法解决了这个问题。您的代码中的主要问题是您用于发布`Push Message`. 据我了解，您实际上是在接收消息的设备中使用 BIS，而不是 BES。因此，`httpURL`您正在使用的 可以编辑为`String httpURL = "https://cpxxxx.pushapi.eval.blackberry.com/mss/PD_pushRequest";`. 完整的工作代码如下：

```
private void pushMessageSample(string pushedMessage)
{
String appid="xxxx-xxxxxxxxxxxxxxxxxxxxxxxxxx";
String password = "xxxxxx";
String deliverbefore = DateTime.UtcNow.AddMinutes(5).ToString("s",System.Globalization.CultureInfo.InvariantCulture) + "Z";
String pushPin = "xxxxxxxx";
String Boundary = "mPsbVQo0a68eIL3OAxnm";

StringBuilder dataToSend = new StringBuilder();

dataToSend.AppendLine("--" + Boundary);
dataToSend.AppendLine("Content-Type: application/xml; charset=UTF-8");
dataToSend.AppendLine("");
dataToSend.AppendLine("<?xml version=\"1.0\"?>");
dataToSend.AppendLine("<!DOCTYPE pap PUBLIC \"-//WAPFORUM//DTD PAP 2.1//EN\" \"http://www.openmobilealliance.org/tech/DTD/pap_2.1.dtd\">");
dataToSend.AppendLine("<pap>");
string myPushId = DateTime.Now.ToFileTime().ToString();
dataToSend.AppendLine("<push-message push-id=" + (char)34 + myPushId + (char)34 + " deliver-before-timestamp=" +
(char)34 + deliverbefore + (char)34 + " source-reference=" + (char)34 + appid + (char)34 + ">");
//dataToSend.AppendLine("<push-message push-id=\"" + myPushId + "\" source-reference=\"" + appid + "\">");
dataToSend.AppendLine("<address address-value=\"" + pushPin + "\"/>");
dataToSend.AppendLine("<quality-of-service delivery-method=\"unconfirmed\"/>");
dataToSend.AppendLine("</push-message>");
dataToSend.AppendLine("</pap>");
dataToSend.AppendLine("--" + Boundary);
dataToSend.AppendLine("Content-Type: text/plain");
dataToSend.AppendLine("Push-Message-ID: " + myPushId);
dataToSend.AppendLine("");
dataToSend.AppendLine(pushedMessage);
dataToSend.AppendLine("--" + Boundary + "--");
dataToSend.AppendLine("");

byte[] bytes = Encoding.ASCII.GetBytes(dataToSend.ToString());
String httpURL = "https://cpxxxx.pushapi.eval.blackberry.com/mss/PD_pushRequest";

WebRequest tRequest;
tRequest = WebRequest.Create(httpURL);
tRequest.Method = "POST";
tRequest.Credentials = new NetworkCredential(appid, password);
tRequest.PreAuthenticate = true;
tRequest.ContentType = "multipart/related; boundary=" + Boundary + "; type=application/xml";
tRequest.ContentLength = bytes.Length;
string rawCredentials = string.Format("{0}:{1}", appid, password);
tRequest.Headers.Add("Authorization",string.Format("Basic {0}",
Convert.ToBase64String(Encoding.UTF8.GetBytes(rawCredentials))));
SetBasicAuthHeader(tRequest, appid, password);

Stream dataStream = tRequest.GetRequestStream();
dataStream.Write(bytes, 0, bytes.Length);
dataStream.Close();

WebResponse tResponse = tRequest.GetResponse();
dataStream = tResponse.GetResponseStream();
StreamReader tReader = new StreamReader(dataStream);
String sResponseFromServer = tReader.ReadToEnd();

tReader.Close();
dataStream.Close();
tResponse.Close();
}

public static void SetBasicAuthHeader(WebRequest req, String appID, String userPassword)
{
string authInfo = appID + ":" + userPassword;
authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
req.Headers["Authorization"] = "Basic " + authInfo;
} 
```

该方法`SetBasicAuthHeader`是对用户的访问进行身份验证以发出`POST`请求。

# php - 检查一个数组值是从另一个数组值PHP设置的吗？

> ID：15445667
> 
> 赞同：0
> 
> 时间：2013-03-16T04:43:02.997
> 
> 标签：php, arrays, isset

我有一个这样的数组，它是自动构建的，并且**长度**是动态的。

```
$arr = array('k1','k2','k3','k4',); 
```

而且我有一个已经存在的数组`$exArr`，如何**动态**检查与下面的操作相同；

```
if($exArr[$arr[0]][$arr[1]][$arr[2]][$arr[3]]) echo 'IT EXISTS'; 
```

请记住，动态构建的数组可能只有一个或多达 10 个以上的顺序键要检查。

谢谢

**编辑**

更清楚地说，我有一个动态的数组，但只包含值。它可以是任何长度。

动态构建的数组与另一个数组的键对应，我需要一种方法来检查动态构建的数组中的所有值是否正确并指向一个值，例如；

```
$dynamic = array('one', 'two', 'three');

$existing = array('one' => array('two' => array('three' => array(true)))); 
```

以上将评估为真，因为以下陈述是正确的，

```
if($existing[$dynamic[0]][$dynamic[1]][$dynamic[2]]) echo 'WOO'; 
```

我遇到的麻烦是动态数组就是这样！它的长度可能是 1 或 50。因此，在这里使用普通的旧 if 语句是行不通的。

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:16:15.183

```
<?php
$dynamic = array('one', 'two', 'three');

$existing = array('one' => array('two' => array('three' => array(true))));

function check($dynamic, $existing) {
    foreach ($dynamic as $key ) {
        if (!isset ($existing [$key])) {
                    // return false;
            throw new Exception("{$key}");
        }
        $existing = $existing [$key];
    }
    return true;
}

try {
    check($dynamic, $existing);
} catch (exception $e) {
    echo "Invalid! On key: {$e->getMessage()}\n\n"; exit;
}

echo "Valid if it gets here!\n\n";

$dynamic = array('one', "invalid", 'two', 'three');

try {
    check($dynamic, $existing);
} catch (exception $e) {
    echo "Invalid! On key: {$e->getMessage()}\n\n"; exit;
}

echo "Valid if it gets here!\n\n"; 
```

测试：[http ://eval.in/12819](http://eval.in/12819)

您可以将 throw 替换为 return false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:16:38.930

这将在多维数组中搜索唯一数组 A 中的键。找到的键存储在数组 C 中。希望这会有所帮助。

```
<?php

$arrayA = array("a", "b", "c", "h", "p");

$arrayB = array("a" => array("g" => array("c" => array("d" => "x"))));
$arrayC = array();

function searchKeys($array) {
    global $arrayA;
    global $arrayC;

    foreach ($array as $key => $value) {

        if (in_array($key, $arrayA)) {
            $arrayC[] = $key;
        }

        if (is_array($value)) {
               searchKeys($value);
        }

    }
}

searchKeys($arrayB, $arrayA);
print_r($arrayC);
?> 
```

# qt - 为什么函数 setMinimumSize() 可以接受 QSize 作为其参数？

> ID：15445673
> 
> 赞同：0
> 
> 时间：2013-03-16T04:44:08.460
> 
> 标签：qt

```
primaryColumnCombo->setMinimumSize(
        secondaryColumnCombo->sizeHint()); 
```

以上代码可以正常运行。但在 Qt 的帮助下，setMinimumSize() 有 3 种类型。

```
QSize   minimumSize () const
void    setMinimumSize ( const QSize & )
void    setMinimumSize ( int minw, int minh ) 
```

在这里，我认为执行了第二种类型。但是它需要 a`QSize &`作为它的参数，为什么在代码中，它可以接受 a `QSize`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:04:39.643

我不确定我是否完全理解您的问题，如果您所要求的只是将参数作为**const SomeType &**传递给函数与只是**SomeType**之间的区别，那么有很多关于此的文档，但这里有一个简短的概要什么时候用哪个...

```
myFunction(const SomeType &) 
```

当**复制是一项昂贵的操作**时传递一个参数（我的意思是昂贵的......复制会消耗大量的 CPU 资源和处理能力）。

```
myFunction(type) 
```

当复制不是一项昂贵的操作时使用。通常这通常用于原始类型和写时复制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:07:18.347

实际上只有 2 种 setMinimumSize。`QSize minimumSize() const`是返回当前最小大小的访问器。它不允许您设置最小尺寸。

第一个`void setMinimumSize(const QSize&)`是 QSize，它本质上只是一个宽度和一个高度封装在一起的值。它通过 const 引用接受 QSize，因为这是 Qt 函数接受对象的标准方式。有关他们为什么会遵循这种做法的详细信息，请参阅[此答案](https://stackoverflow.com/a/270435/331041)。

第二个，`void setMinimumSize(int minw, int minh)`将宽度和高度作为一对参数。

两者没有区别。它们只是为了方便起见提供了两个函数，以防您已经有一个 QSize 可以传递给它，或者您已经有一对整数。您的示例是前者的情况，它应该完全按照您的预期工作。

# sql - 执行查询在调用 ROLLBACK TRANSACTION 后继续运行

> ID：15445677
> 
> 赞同：0
> 
> 时间：2013-03-16T04:44:40.273
> 
> 标签：sql, database, transactions, sql-server-2012

这是我尝试运行的查询。我正在测试 ROLLBACK，因为我们需要在作业中进行。

```
BEGIN TRANSACTION;

declare @var bit;
set @var = 0;

BEGIN TRY
    INSERT INTO Orders(ShippingAddress, BillingAddress, Status, Date, ID, CustomerID, Total, BillingInfo) 
    VALUES('10 King Road', '10 King Road', 'Pending', '2013-03-15 07:58:55.760', 16, 1, 145.95, 'Put it on my doorstep please.');
END TRY
BEGIN CATCH
    IF @var > 0
    ROLLBACK TRANSACTION;
END CATCH;

IF @var > 0
    COMMIT TRANSACTION; 
```

在我成功运行它之后，我尝试做一个`SELECT * FROM Orders`，现在 SQL Server 只是尝试`ExecuteQuery`永远运行......我的伙伴也有同样的问题，但我们所有的其他表都可以正常工作。有人知道这可能是什么原因吗？我正在使用 Microsoft SQL Server 2012。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:00:07.067

是什么`@var`，什么时候大于 0。如果`@var`没有更改为`1`Started `TRANSACTION`never`COMMIT`或`ROLLBACK`. 所以表将被锁定直到 TRANSACTION 结束。

# coldfusion - 找不到带有新查询（）的 ColdFusion 组件或接口查询

> ID：15445680
> 
> 赞同：1
> 
> 时间：2013-03-16T04:45:09.633
> 
> 标签：coldfusion

```
Could not find the ColdFusion component or interface query.
Ensure that the name is correct and that the component or interface exists.

The error occurred in D:/sites/xxxxx/mobile/resource/nodeRO.cfc: line 34
32 :    this.touch = 0;
33 : 
34 :    **variables.QueryService = new query();**
35 :    variables.QueryService.setName("qryResult"); 
```

我检查了映射。非新的查询驱动对象可以重新启动 CF 服务，但没有帮助

使用 CF 9.02

怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T05:19:39.803

在到处寻找之后，结果发现 CF 服务器已更新/升级到新目录。旧的 CF 根目录已重命名。

必须存在一个自定义映射，`new query()`其他映射才能正常工作。由于缺少该映射，因此无法找到`query.cfc`.

# c++ - 将简单的 python 方法转换为 C++

> ID：15445685
> 
> 赞同：0
> 
> 时间：2013-03-16T04:45:47.907
> 
> 标签：c++, python

我想为一个我必须做的CS项目创建一个RLE压缩和解压方法。问题不在于逻辑，而在于 C++ 的技术诀窍。我目前在学校学到的都是 Python，所以我尝试用 Python 做这个项目，这真的很容易......

我打算好好阅读 C++，但今晚没有足够的时间。我希望能得到帮助，因为如果我能理解等效的 C++ 代码，我可能会对这种语言感到更舒服。

**有人可以帮我将以下 python 代码转换为 C++ 等效代码吗？**

```
# compresses data using RLE compression
def compress(data):
    letter_counter = 1
    new_data = []
    for i in range(len(data)):
        try:
            # if the element is the same as the next one
            if data[i] == data[i + 1]:
                letter_counter += 1 
            # if different element than previous index                
            else:
                new_data.append(str(letter_counter) + data[i])
                letter_counter = 1  # reset the letter count
        except IndexError:  # when the index is out of range (no more elements)
            new_data.append(str(letter_counter) + data[i])
    return new_data
data = ['w', 'w', 'w', 'w', 'w', 'b', 'b', 'b', 'c', 'd', 'e', 'e']
data2 = ['w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w', 'w']
return compress(data)  # prints ['5w', '3b', '1c', '1d', '2e']
return compress(data2)  # prints ['14w'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:54:30.937

```
#include<iostream>
#include<string>
#include<sstream>

using namespace std;

string compress(string data) {
    int letter_counter = 1, i=0;
    ostringstream new_data;
    for (i; i<data.length()-1; i++) {
        if (data[i] == data[i+1]) {
            letter_counter += 1;
        } else {
            new_data<<letter_counter;
            new_data<<data[i];
            letter_counter = 1;
        }
    }
    new_data<<letter_counter;
    new_data<<data[i];

    return new_data.str();
}

int main() {
    string data = string("wwwwwbbbcdee");
    string data2 = string("wwwwwwwwwwwwww");
    cout << compress(data) <<endl;
    cout << compress(data2) <<endl;
} 
```

这是使用 C++ 执行此操作的简单方法。它将字符数组视为字符串，并使用 stringstream 轻松地将数字插入字符串。

但归根结底，其他海报是正确的。学习 C++ 的最好方法是自己尝试，遇到问题时请教别人。www.cplusplus.com 是一个很好的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:52:13.913

顺便说一句 - 你的 Python 可以大大改进：

```
from itertools import groupby
print ['{}{}'.format(len(list(g)), k) for k, g in groupby(data)] 
```

# squid - 以 '\n' 结尾的 squid 日志格式

> ID：15445687
> 
> 赞同：0
> 
> 时间：2013-03-16T04:45:58.743
> 
> 标签：squid

我需要用换行符终止 squid 日志。

我无法弄清楚阅读[http://www.squid-cache.org/Doc/config/logformat/](http://www.squid-cache.org/Doc/config/logformat/)

有人这样做吗？如果是这样，它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:05:27.610

默认情况下包含新行。无需任何改变

# jquery - 在 jquery jqgrid 中，是否有下拉延迟直到被选中？

> ID：15445688
> 
> 赞同：6
> 
> 时间：2013-03-16T04:46:13.193
> 
> 标签：jquery, ajax, jqgrid

我正在使用[jqgrid](http://www.trirand.com/blog/)，并且我有一个带有下拉列表的过滤器行，以允许人们从项目列表中进行选择。我认为加载所有下拉列表会浪费很多周期，因为人们可能不会选择其中任何一个。

无论如何都要推迟 ajax 调用以获取下拉列表，直到一个人实际单击下拉过滤器中的箭头。我看到其他一些网格库可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T21:41:38.917

看一下这个：

**标记**：

```
<select id="ddl">
    <option value="-1">Select One</option>
</select> 
```

**jQuery** :

```
$("body").delegate("#ddl", "focus",function(event){
    //ajax call here, and then append items
    $(this).append("<option value='1'>Option 1</option>");
    $(this).append("<option value='2'>Option 2</option>");
    $(this).append("<option value='3'>Option 3</option>");
    $(this).append("<option value='4'>Option 4</option>");
    $(this).append("<option value='5'>Option 5</option>");
}); 
```

**jsfiddle**：http: [//jsfiddle.net/9asfG/](http://jsfiddle.net/9asfG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:00:34.997

我认为您也可以在服务器端执行此操作，在代码中您可以添加一个 if 语句来检查 $_POST["_search"] 内部，如果这是真的，则在 $_POST 内部循环，查找下拉搜索条件已发布，如果否，则回显空白或任何内容以停止代码，如果是，则继续从数据库加载数据。

PS.：我个人的看法，“延迟”结果可能不是一个好主意，因为用户可能不知道他需要先选择下拉菜单，从用户体验的角度来看，这不是一个好的设计。

# php - 如何计算从 1 php 开始的键号

> ID：15445691
> 
> 赞同：1
> 
> 时间：2013-03-16T04:46:28.297
> 
> 标签：php, arrays, count

```
while(list($key,$val) = each($con_next)) {
    echo " $key $con_next[$key]\n";
} 
```

结果是

```
0 list item 1
1 list item 2
2 list item 3
3 list item 4 
```

但我想要结果

```
1 list item 1
2 list item 2
3 list item 3
4 list item 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:48:49.240

数组是默认开始的，`0`所以你必须添加`1`到它

```
echo ($key +1). " $con_next[$key]\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:55:11.143

不要忘记您的数组从 0 开始计数。一个简单的解决方案是增加您的计数器。不要让 $key 从 1 开始计数，而是向它添加 +1，它会计数 0 + 1, 1 + 1,.... 这样你就得到了你想要的。

while(list($key,$val) = each($con_next)) {

回声 ($key + 1) 。"$con_next[$key]\n";

}

# visual-studio-2008 - 使用 checkIn 命令时无法加载文件或程序集“Microsoft.TeamFoundation.VersionControl.Controls”错误

> ID：15445695
> 
> 赞同：3
> 
> 时间：2013-03-16T04:47:03.990
> 
> 标签：visual-studio-2008, checkin

我将 VS2008 连接到 TFS2012。我正在尝试从命令行签入。但是当我运行 tf checkIn 这个错误发生

“无法加载文件或程序集 'Microsoft.TeamFoundation.VersionControl.Control s, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 或其依赖项之一。系统找不到指定的文件。”

我在 C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies 中有 Microsoft.TeamFoundation.VersionControl.Controls dll。我试图为不同的工作区运行命令。谁能告诉我错误的原因是什么以及解决方案是什么？

# c++ - 为泛型数组重载 [] 和 = 运算符

> ID：15445698
> 
> 赞同：0
> 
> 时间：2013-03-16T04:47:19.010
> 
> 标签：c++, operator-overloading, operator-keyword

我在 c++ 中创建了一个通用数组类。使用它我想重载 [] 和 = 运算符。这样我就可以初始化数组元素，如数组 a1；a1[2]=77；如何才能做到这一点？这是我的代码：

```
tempate<class T>
class array
{
 T *data;
 int length;
 public:
 array()
 {
 length=0;
 }
 array(int data)
 {
 data=new T(data);
 length=data;
 }
 T operator[](int a)
 {
 return *(data+A);
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:55:39.577

您的运营商需要返回一个参考。最好也有一个不变的版本：

```
T & operator[](std::size_t i) { return data[i]; }
T const & operator[](std::size_t i) const { return data[i]; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T04:55:10.903

通常它是通过返回一个引用来完成的，即这样的：

```
T& operator[](int a)
{
    return *(data+a);
} 
```

此外，为了允许从 const 上下文访问，您还应该提供一个 const 版本：

```
const T& operator[](int a) const
{
    return *(data+a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:03:14.860

避免代码重复：

```
const T& operator[](std::size_t pos) const
{
    ...
    ...
    ...
    return data[pos];
}

T& operator[](std::size_t pos)
{
    return const_cast<T&>(static_cast<const T&>(*this)[pos]);
} 
```

# c# - 如何格式化 C# 字符串以换行以适合特定的列宽？

> ID：15445699
> 
> 赞同：1
> 
> 时间：2013-03-16T04:47:28.980
> 
> 标签：c#, string, word-wrap

我有一个长字符串要显示到控制台，并希望将字符串拆分为几行，以便它很好地围绕分词符并适合控制台宽度。

例子：

```
 try
  {
      ...
  }
  catch (Exception e)
  {
      // I'd like the output to wrap at Console.BufferWidth
      Console.WriteLine(e.Message);
  } 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T05:00:08.577

[Bryan Reynolds 在这里](http://web.archive.org/web/20160620132048/http://bryan.reynoldslive.com:80/post/Wrapping-string-data.aspx)（通过 WayBackMachine）发布了一个出色的辅助方法。

要使用：

```
 try
  {
      ...
  }
  catch (Exception e)
  {
      foreach(String s in StringExtension.Wrap(e.Message, Console.Out.BufferWidth))
      {
          Console.WriteLine(s);
      }
  } 
```

使用较新的 C# 扩展方法语法的增强功​​能：

编辑 Bryan 的代码，而不是：

```
public class StringExtension
{
    public static List<String> Wrap(string text, int maxLength)
    ... 
```

上面写着：

```
public static class StringExtension 
{
    public static List<String> Wrap(this string text, int maxLength)
    ... 
```

然后像这样使用：

```
 foreach(String s in e.Message.Wrap(Console.Out.BufferWidth))
    {
        Console.WriteLine(s);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:55:56.700

尝试这个

```
 int columnWidth= 8;
    string sentence = "How can I format a C# string to wrap to fit a particular column width?";
    string[] words = sentence.Split(' ');

StringBuilder newSentence = new StringBuilder();

string line = "";
foreach (string word in words)
{
    if ((line + word).Length > columnWidth)
    {
        newSentence.AppendLine(line);
        line = "";
    }

    line += string.Format("{0} ", word);
}

if (line.Length > 0)
    newSentence.AppendLine(line);

Console.WriteLine(newSentence.ToString()); 
```

# javascript - Rails 仅在 current_user logged_in 时执行 javascript

> ID：15445701
> 
> 赞同：1
> 
> 时间：2013-03-16T04:47:38.787
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, erb, helper

我有一个脚本在 35 分钟（从不活动状态）执行（显示模式），提醒用户他们即将注销。如果他们单击该模式中的一个按钮，他们可以保持登录状态或另一个按钮退出。问题是无论用户是否登录，脚本都在运行。如果有 current_user，如何将脚本限制为仅加载和运行。
我尝试将 erb 添加到我的咖啡脚本文件中，并且只使用 if logged_in? 块，但是在尝试将帮助程序包含在该文件中时出现错误。而且，这似乎是一种糟糕的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-22T09:11:11.013

在`application.html.erb`：

```
<%= javascript_include_tag "application" unless current_user.nil?  %> 
```

# c++ - GLUT 屏幕调整大小

> ID：15445702
> 
> 赞同：1
> 
> 时间：2013-03-16T04:47:49.137
> 
> 标签：c++, opengl, glut

我正在尝试编写一个函数，使屏幕全尺寸和正常尺寸，更重要的是，当我将屏幕尺寸调整为正常尺寸时，它会回到我全尺寸之前的位置..我该怎么做.. .

这是我所做的

```
//global Variables
int scr_pos_x = 100, scr_pos_y = 150;

//somewhere else in main method
glutInitWindowPosition(scr_pos_x, scr_pos_y);
....
glutKeyboardFunc(myKeyboard);

//myKeyBoardFunction
void myKeyboard(unsigned char key, int x, int y){
    if(key == 'f'){
        int scr_pos_x = glutGet((GLenum)GLUT_WINDOW_X);
        int scr_pos_y = glutGet((GLenum)GLUT_WINDOW_Y);
        cout << " while f press "<<scr_pos_x <<" "<<scr_pos_y << endl; // to check
        glutFullScreen();
    }else if(key=='x'){
        cout << " while x press "<<scr_pos_x <<" "<<scr_pos_y << endl; // to check
        glutPositionWindow(scr_pos_x, scr_pos_y);
        glutReshapeWindow(640, 480); 
    }
} 
```

当我按“f”时，我可以看到 scr_pos_x 和 scr_pos_y 设置为适当的值，但是当我按“x”时，这些值以某种方式变为 100 和 150。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:18:25.323

```
if(key == 'f'){
    int scr_pos_x = glutGet((GLenum)GLUT_WINDOW_X);
    int scr_pos_y = glutGet((GLenum)GLUT_WINDOW_Y);
    cout << " while f press "<<scr_pos_x <<" "<<scr_pos_y << endl; // to check
    glutFullScreen();
} 
```

在这里，您创建了两个名为的*全新*变量`scr_pos_x`，并`scr_pos_y`持续到该`if`块的末尾。它们覆盖全局。

删除`int`两个声明开头的 s 以便`glutGet()`s 覆盖*全局* `scr_pos_x`和`scr_pos_y`变量。

# javascript - 重新定位内容时调整 DIV 大小

> ID：15445707
> 
> 赞同：0
> 
> 时间：2013-03-16T04:48:56.267
> 
> 标签：javascript, jquery, html, dom

那么，问题是否可以在重新定位 DIV 的内容时自行调整其大小？

让我更好地解释一下自己：

我有一个容器`div`，里面有另一个容器`div`。最后一个可以通过`jQuery.append()`方法接收附加组件。

**HTML：**

```
<div id="container">
<div id="content"></div>

<div id="another">Hello World</div> 
```

**JS**

```
var a = $("#another");
$("#content").append(a); 
```

到目前为止一切顺利，但是，当我尝试调整大小时`div#another`，`div#content`它不会改变它的大小并且`div#another`会飞。

```
$("#another").position({left:100, top:100}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:26:08.470

尝试这个

```
var a = $ ("#another");
 $ ("#content").append(a).css('width',<new value>); 
```

追加后，将父 div 的宽度调整为所需值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:55:47.927

每当您附加子元素时，向父元素添加或删除 css 类，例如：

```
var a = $ ("#another");
var content = $ ("#content")
content.append(a); 
```

`condition>> ? content.addClass('scenario1') : content.addClass('scenario2')`

然后将必要的样式添加到方案 1 和方案 2，例如：

```
.scenario1 {
   left: 100;
   top: 100
}

.scenario2 {
   left: 50;
   top: 50
} 
```

# iphone - 等到 CCMoveTo 完成？

> ID：15445709
> 
> 赞同：4
> 
> 时间：2013-03-16T04:48:59.293
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我正在使用 cocos2d 制作 BlackJack 游戏，但有一个问题我似乎找不到解决方案。我正在尝试制作这样的初始交易屏幕：

*   第一张卡片精灵将从屏幕外移动到玩家的手上
*   第二张卡片精灵将从屏幕外移动到庄家手中
*   第三 -> 玩家
*   第四 -> 经销商

为此，我从 Player 和 Dealer 类中调用 drawCard 方法：

```
[self.player drawCard];
[self.dealer drawCard];
[self.player drawCard];
[self.dealer drawCard]; 
```

在drawCard方法中：

```
-(void) drawCard {
.......
id move = [CCMoveTo actionWithDuration:0.4 position:ccp(x, y)];
        [card.sprite runAction:move];
......
} 
```

我希望第一张卡在第二张卡开始移动之前完成移动到指定位置，但实际上所有 4 张卡几乎同时开始移动。请帮我解决这个问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:07:34.243

您可以通过 2 种方式做到这一点 1\. 使用`CCDelayTime`2\. 使用`CCCallBlock`

**1.使用`CCdelayTime`**

```
 [self.player drawCard:0]; 
   [self.dealer drawCard:0.5f]; 
   [self.player drawCard:1.0f]; 
   [self.dealer drawCard:1.5f];

    -(void) drawCard:(float)delay
    {
       if(!delay)
       {
          id move = [CCMoveTo actionWithDuration:0.4 position:ccp(x, y)];
          [card.sprite runAction:move];
       }
       else
       {
          id delay    = [CCDelayTime actionWithDuration:delay];
          id move     = [CCMoveTo actionWithDuration:0.4 position:ccp(x, y)];
          id sequence = [CCSequence actions:delay, move, nil];
          [card.sprite runAction:sequence];
       }

    } 
```

**2.使用`CCCallBlock`**

```
 -(void) drawCard:(id)inCard
    {
        mCardIndex++; //in init mCardIndex=0

        id move    = [CCMoveTo actionWithDuration:0.4 position:ccp(x, y)];
        id calBlk  = [CCCallBlock actionWithBlock:^{

                            if(mCardIndex <= TOTAL_CARD)
                            {
                                //here get rightCard
                                [self drawCard:newCard];
                            }
                    }];
        id sequence = [CCSequence actions: move, calBlk,  nil];

        [inCard.sprite runAction:sequence];    
    } 
```

# python - 从 json 数据结构中提取值

> ID：15445714
> 
> 赞同：0
> 
> 时间：2013-03-16T04:50:03.847
> 
> 标签：python, json

我正在调用 API 并获取以下数据结构：

```
{u'query': {u'pages': {u'120714': {u'ns': 0, u'pageid': 120714, u'revisions': [{u'size': 985}], u'title': u'Daniel Nannskog'}}, u'userinfo': {u'anon': u'', u'id': 0, u'name': u'2620:0:862:101:0:0:2:4'}}} 
```

我想要的是从这个数据结构中得到大小，我知道如何从这里提取数据，但问题是在提取时我不知道页面后的键（120714），例如：

```
lets assign this to a variable = d
>>> d
{u'query': {u'pages': {u'120714': {u'title': u'Daniel Nannskog', u'ns': 0, u'pageid': 120714, u'revisions': [{u'size': 985}]}}, u'userinfo': {u'anon': u'', u'id': 0, u'name': u'2620:0:862:101:0:0:2:4'}}}
>>> d['query']['pages']['120714']['revisions']
[{u'size': 985}]
>>> 
```

但是，在提取之前不知道二级键的值的情况下，如何确定大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:54:27.920

如果您说密钥`120714`未知，那么如果 下只有一个密钥`d['query']['pages']`，则执行以下操作：

```
e = d['query']['pages']
key = e.keys()[0]
print e[key]['revisions'] 
```

它看起来像这样：

```
>>> d = {u'query': {u'pages': {u'120714': {u'title': u'Daniel Nannskog', u'ns': 0, u'pageid': 120714, u'revisions': [{u'size': 985}]}}, u'userinfo': {u'anon': u'', u'id': 0, u'name': u'2620:0:862:101:0:0:2:4'}}}
>>> e = d['query']['pages']
>>> key = e.keys()[0]
>>> print e[key]['revisions']
[{u'size': 985}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T04:55:49.443

这个问题不是很清楚，但我会试着猜测你想要做什么，希望即使我猜错了它也会告诉你答案。

你不知道你有哪些页面。但是你知道，无论你有什么页面，你都想要它们的大小。换句话说，您想要访问 的所有值`pages`，无论这些值具有什么键。

这正是这样`dict.values`做的：

```
sizes = [page['revisions'][0]['size'] for page in d['query']['pages'].values()] 
```

如果你不理解列表理解，让我们分解一下：

```
pages = d['query']['pages']
# {u'120714': {u'ns': 0, u'pageid': 120714, 
#              u'revisions': [{u'size': 985}], u'title': u'Daniel Nannskog'}}
every_page = pages.values()
# [{u'ns': 0, u'pageid': 120714,
#   u'revisions': [{u'size': 985}], u'title': u'Daniel Nannskog'}]
sizes = []
for page in every_page:
    # {u'ns': 0, u'pageid': 120714,
    #  u'revisions': [{u'size': 985}], u'title': u'Daniel Nannskog'}
    sizes.append(page['revisions'][0]['size']) 
```

请注意，我只选择了第一个版本。如果你想要所有修订的大小，或者最大的，或者它们的总和，或者最新的，或者其他的，修改并不难。

同样的事情也适用于页面。如果您只想要第一页，或者最大的页面，或者页面大小的总和，或者其他任何内容，您也可以在那里进行更改。

例如，如果您知道只有一页只有一个修订版，那么整个事情就会简化为：

```
size = d['query']['pages'].values()[0]['revisions'][0]['size'] 
```

# c++ - 无正则表达式的字符串格式验证 (C++03)

> ID：15445715
> 
> 赞同：0
> 
> 时间：2013-03-16T04:50:13.677
> 
> 标签：c++, string, format, verification, c++03

有谁知道在不使用 C++11 正则表达式类的情况下验证 C++ 中的字符串格式的更好方法。基本上我有几个这种格式的字符串 TAG1:VALUE, TAG2:VALUE, TAG1:VALUE, TAG2:VALUE

TAG1 和 TAG2 是字符串，VALUE 是各种长度的整数值

示例字符串为：“PPS:112, FJ:543, PPS:76432, FJ:753”等等。

我需要一个函数来验证格式是否完全正确。

到目前为止，我正在逐个字符验证。这似乎充其量是乏味的。有没有更好的方法，我根本不知道。除非必须，否则我想再次避免使用 C++11 或任何第三方库中的正则表达式。我主要想知道是否有更好的方法可以只使用 C++ 和 STL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:24:32.510

根本不使用任何第三方库，不是真的。使用标准库组件可以做到的最好的事情如下：

```
#include <string>
#include <algorithm>

bool verify(const std::string& s)
{
    typedef std::string::size_type      size_type;
    typedef std::string::const_iterator cstr_it;

    size_type colon_index = s.find(":");

    if (colon_index == std::string::npos)
    {
        return false;
    }

    cstr_it letter_end = s.begin() + colon_index;
    bool valid_letter = std::all_of(s.begin(), letter_end, isupper);
    bool valid_number = std::all_of(letter_end, s.end(), isdigit);

    return valid_letter && valid_number;
} 
```

# rspec - 在 RSpec 中，before(:suite) 和 before(:all) 有什么区别？

> ID：15445716
> 
> 赞同：53
> 
> 时间：2013-03-16T04:50:17.820
> 
> 标签：rspec, rspec2

[Relish 上的 before 和 after 钩子文档](https://www.relishapp.com/rspec/rspec-core/v/2-13/docs/hooks/before-and-after-hooks)仅显示`before(:suite)`在`before(:all)`.

我什么时候应该使用其中一种？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2014-01-16T21:57:43.667

当 a`before(:all)`在块中定义时，`RSpec.configure`它在每个顶级示例组之前被调用，而`before(:suite)`代码块只被调用一次。

这是一个例子：

```
RSpec.configure do |config|
  config.before(:all) { puts 'Before :all' }
  config.after(:all) { puts 'After :all' }
  config.before(:suite) { puts 'Before :suite' }
  config.after(:suite) { puts 'After :suite' }
end

describe 'spec1' do
  example 'spec1' do
    puts 'spec1'
  end
end

describe 'spec2' do
  example 'spec2' do
    puts 'spec2'
  end
end 
```

输出：

```
Before :suite
Before :all
spec1
After :all
Before :all
spec2
After :all
After :suite 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:16:41.597

> 您还可以使用 before(:suite) 在运行任何示例组之前运行代码块。这应该在 RSpec.configure 中声明

[http://rubydoc.info/github/rspec/rspec-core/RSpec/Core/Hooks](http://rubydoc.info/github/rspec/rspec-core/RSpec/Core/Hooks)

# c# - 从 Javascript 的组合框中获取选定的枚举值

> ID：15445718
> 
> 赞同：0
> 
> 时间：2013-03-16T04:50:47.167
> 
> 标签：c#, javascript, asp.net-mvc, html, razor

我已经通过这段代码加载了一个组合框。

```
@Html.DropDownListFor(model => model.OEValue, new
SelectList(Enum.GetValues(typeof(ICS.Base.Client.Utility.EnumOperationFunctionality))),
new { id = "cboOEValue", style = "width: 225px;" }) 
```

`cboOEValue`现在我想要by的选定值`EnumOperationFunctionality`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:21:24.417

组合框中的所有项目共享相同的“名称”属性。如果您使用的是 jquery，则非常简单，只需使用以下内容即可获取选定项目。

```
$('input[name=OEValue]:checked') 
```

或者你可以使用基本的 javascript

```
var all = document.getElementsByName('OEValue');
var selected = [];
for(var i = 0; i < all.length; i++){ 
    if(all[i].checked) 
        selected.push(all[i].value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:21:20.967

[这](https://stackoverflow.com/questions/15224920/cant-pass-selected-value-dropdownlistfor-to-javascript-function)可以帮助你吗

并从 javascript 中的组合框中获取价值

```
var e = document.getElementById("cboOEValue "); 
```

# sockets - 阻塞“连接”系统调用被中断

> ID：15445720
> 
> 赞同：0
> 
> 时间：2013-03-16T04:51:12.600
> 
> 标签：sockets, unix

我正在阅读 W. Richard Stevens 的 Unix Network Programming。作者说，如果阻塞连接调用被中断，我可以使用“选择”作为非阻塞连接的选择。

我很困惑。如果我应该调用一个非阻塞连接然后在新的 socktfd 上进行选择，还是应该在传递给前一个阻塞连接调用的旧 socketfd 上进行选择？

我在一篇文章中看到，如果使用 SA_RESTART 标志传递信号操作，则说“连接”是可重新启动的。如果是这样，我可以完全忽略阻塞连接中断的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T04:57:38.257

如果您使用阻塞呼叫，您将必须检查错误代码并根据错误代码重试，如果中断，该代码将是 EINTR。否则使用由于中断而不会返回的选择。选择仅在超时、错误或读写信号的情况下返回。

# database - 在什么时候我应该使用标记来限制数据库表的数量

> ID：15445724
> 
> 赞同：1
> 
> 时间：2013-03-16T04:51:38.400
> 
> 标签：database, database-design, markup

我对数据库设计有点陌生，想知道我应该在表中存储什么，以及应该在文本字段中使用标记语言存储什么，然后服务器可以处理这些内容。我倾向于为基本上所有内容制作一个表格，但我注意到许多应用程序，例如 mediaWiki 使用标记将其数据存储在一个大文本字段中。这是否通过限制数据库查询的数量和表的大小来节省时间？还是服务器端处理占用更多时间？

* * *

我的页面结构如下：

```
Page contains:
id
page_image_id
user_id
title
path
deleted

Page has many Sections 
```

-

```
Section contains:
id
page_id
position

Section has many Paragraphs
Section has many Images
Section has many Page_Links 
```

-

```
Paragraph contains:
id
section_id
body_text
position 
```

-

```
Image contains:
id
section_id
user_id
image_path
description
position 
```

-

```
Page_link contains:
id
page_id
section_id
description
position 
```

* * *

我喜欢在设计数据库时考虑到达到 100 000+ 页的可能性。请注意，最后 3 个表可能会很快变得非常大。将所有这些信息存储在节表中的标记中然后使用服务器端代码处理信息会更有效吗？或者我是否低估了数据库查询的速度以及更高的效率，因为那里的数据准备好被操纵？有没有什么时候我应该停止制作表格并使用标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:59:09.297

因此，在这种情况下，恕我直言，没有正确或错误的答案。

通常你需要考虑的是你做了多少个连接——你应该索引什么列等等。

我通常 ndo 是采用标准化方式（您已经完成），运行某种分析以查看查询是可以接受的快还是慢 - 然后考虑更改您的设计。

索引的东西通常使数据库查询非常快。但是，您最终为查询加入的表越多，它就会变得越慢。这些只是广泛的指导方针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:03:38.513

整个问题归结为：从**数据管理的角度来看，什么是****原子**的？

 **换句话说，您是否需要在*数据库*中查询或修改单个段落或其他页面元素？

*   如果是，那么您走在正确的轨道上。数据库级别的精细粒度将允许您索引和检索每个单独的数据，并在不干扰其他数据的情况下修改一个数据。
*   如果不是，只需将整个页面存储在一个字段中（可能是 BLOB 或 CLOB）。*如果您在应用程序级别*处理（例如）单个段落并不重要- 如果您总是*从数据库中*获取整个页面（并且总是将整个页面写入数据库），那么它应该存储为一个原子片段数据库中的数据。**

# java - 成员变量可以从外部访问，但它的声明类在 Java 中是垃圾收集的？

> ID：15445728
> 
> 赞同：1
> 
> 时间：2013-03-16T04:52:19.613
> 
> 标签：java, garbage-collection

我对 java 成员变量及其在可达方面的声明类感到困惑。比方说，

1.  TestP 类有TestC 类型成员变量c1。
2.  主类引用了TestP p，也引用了p.c1；( `makeP()`)
3.  但是在 p1 引用被删除后（`clearP()`），

即使 p1.c1 可以访问，p1 也会被垃圾收集。

Intesting 事情是，如果 c1 覆盖某些方法（或者甚至只是打开和关闭括号） p1 不会被垃圾收集。我想这是因为 c1 使用了一些 TestP 区域......但一些明确的解释将不胜感激。

```
public class Main {
    TestP p;
    TestC c;
    void makeP { p = new TestP(); c = p.c1; }
    void clearP { p = null; }
}

public class TestP {
    public TestC c1;

    public TestP() {
        c1 = new TestC(); // TestP will be garbage-collected.
        // c1 = new TestC() {}; // TestP will not be garbage-collected.
    }
    ...
}

public class TestC {
    public TestC() {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:59:12.963

`TestP`只有在没有对它的引用时，才能对的实例进行垃圾收集。匿名内部类的实例——或任何内部类——有一个隐藏成员，它是对其封闭实例的引用；即，创建的对象

```
c1 = new TestC() {}; 
```

包含对`TestP`在其构造函数中执行此语句的对象的引用。换句话说，`c1`指向一个实际上看起来像这样的类的实例：

```
class TestP$1 extends Test {
    private TestP $outer;

    TestP$1(TestP outer) {
        this.$outer = $outer;
    }
} 
```

构造函数参数和成员变量被编译器隐藏，但它们就在那里。

在这种情况下，匿名子类的`Test`实例将阻止该实例`TestP`被收集。

# android - 反向地理编码中的异常

> ID：15445732
> 
> 赞同：1
> 
> 时间：2013-03-16T04:54:01.143
> 
> 标签：android, geocode

我正在尝试使用 htc hope c 反转地理编码，在运行应用程序时，它的抛出服务不可用异常。但是 GeoCoder.isPresent() 正在返回“真”。请帮助我找出问题所在。

这是我的代码：

```
public class MainActivity extends Activity {

LocationManager lManager;
String provider;
 Location location ;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    lManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();

    provider = lManager.getBestProvider(criteria, false);
    if(provider!=null && !provider.equals("")){

        // Get the location from the given provider
      location = lManager.getLastKnownLocation(provider);
    }

    boolean geoCoder = false;
    Geocoder geo = new Geocoder(this, Locale.getDefault());
     geoCoder = Geocoder.isPresent();
     System.out.println("GEO CODER : "+geoCoder);

     try {
        List<Address> address = geo.getFromLocation(location.getLatitude(), location.getLongitude(), 3);
        System.out.println("Size------------- "+address.size());

        /*Address addr = address.get(0);
        System.out.println("City "+addr.getLocality());*/
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("in here--------------");
        e.printStackTrace();
    }

} 
```

日志：

```
03-16 10:33:58.609: I/System.out(30398): GEO CODER : true
03-16 10:33:58.609: I/System.out(30398): in here--------------
03-16 10:33:58.609: W/System.err(30398): java.io.IOException: Service not Available
03-16 10:33:58.619: W/System.err(30398):    at  android.location.Geocoder.getFromLocation(Geocoder.java:136)
03-16 10:33:58.619: W/System.err(30398):    at   com.example.geocoder.MainActivity.onCreate(MainActivity.java:46)
03-16 10:33:58.619: W/System.err(30398):    at   android.app.Activity.performCreate(Activity.java:4538)
03-16 10:33:58.629: W/System.err(30398):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
03-16 10:33:58.629: W/System.err(30398):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2161)
03-16 10:33:58.629: W/System.err(30398):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2240)
03-16 10:33:58.629: W/System.err(30398):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
03-16 10:33:58.629: W/System.err(30398):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1262)
03-16 10:33:58.629: W/System.err(30398):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-16 10:33:58.629: W/System.err(30398):    at android.os.Looper.loop(Looper.java:156)
03-16 10:33:58.629: W/System.err(30398):    at android.app.ActivityThread.main(ActivityThread.java:4987)
03-16 10:33:58.639: W/System.err(30398):    at java.lang.reflect.Method.invokeNative(Native Method)
03-16 10:33:58.639: W/System.err(30398):    at java.lang.reflect.Method.invoke(Method.java:511)
03-16 10:33:58.639: W/System.err(30398):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-16 10:33:58.639: W/System.err(30398):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-16 10:33:58.649: W/System.err(30398):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:26:33.743

@smk 给了你一个有用的链接。为了使您免于进行大量研究，我将尝试简短地回答您。地理编码器并不总是返回一个值。您可以尝试在 for 循环中发送 3 次请求。我应该至少能回来一次。如果不是，那么它们可能是连接问题，也可能是服务器未回复您的请求等其他问题。

我也有一个while循环，但我曾经最多尝试10次。有时，即使它连接到互联网，它也不会返回任何东西。然后，我每次都使用[这种](https://developers.google.com/maps/documentation/geocoding/index)更可靠的方式来获取地址：

我曾经获取纬度和经度，然后请求谷歌服务器，回复一个 JSOn 对象，其中包含有关位置坐标的各种信息。这是功能：

```
public JSONObject getLocationInfo() {

        HttpGet httpGet = new HttpGet("http://maps.google.com/maps/api/geocode/json?latlng="+lat+","+lng+"&sensor=true");
        HttpClient client = new DefaultHttpClient();
        HttpResponse response;
        StringBuilder stringBuilder = new StringBuilder();

        try {
            response = client.execute(httpGet);
            HttpEntity entity = response.getEntity();
            InputStream stream = entity.getContent();
            int b;
            while ((b = stream.read()) != -1) {
                stringBuilder.append((char) b);
            }
        } catch (ClientProtocolException e) {
            } catch (IOException e) {
        }

        JSONObject jsonObject = new JSONObject();
        try {
            jsonObject = new JSONObject(stringBuilder.toString());
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return jsonObject;
    } 
```

我这样称呼它：

```
JSONObject ret = getLocationInfo(); 
JSONObject location;
String location_string;
try {
    location = ret.getJSONArray("results").getJSONObject(0);
    location_string = location.getString("formatted_address");
    Log.d("test", "formattted address:" + location_string);
} catch (JSONException e1) {
    e1.printStackTrace();

} 
```

希望这可以帮助。我也厌倦了依赖 Geocoder。这对我有用。虽然它可能比地理编码器慢。您只需将 URL 中的经纬度坐标替换为您拥有的坐标即可。尝试在 Web 浏览器中查看返回的 JSON 对象。您将看到如何提取地址字符串。尝试并阅读这些线程：

[Geocoder 并不总是返回值](https://stackoverflow.com/questions/4169189/geocoder-doesnt-always-return-a-value)，并且[geocoder.getFromLocationName 仅返回 null](https://stackoverflow.com/questions/4567216/geocoder-getfromlocationname-returns-only-null)

# java - 代码说明：枚举和渲染

> ID：15445734
> 
> 赞同：0
> 
> 时间：2013-03-16T04:54:03.903
> 
> 标签：java, enums, render, enum-map

所以我遇到了这段代码，作为一个初学者，我并没有真正理解代码。我想知道是否有人可以向我解释代码。谢谢！

```
private static final EnumMap<State, IRenderer> RENDERERS_MAP;
    static {
    RENDERERS_MAP= new EnumMap<State, IRenderer>(State.class);

   for (State state : State.values()) {
        RENDERERS_MAP.put(state, getRender());
   }
} 
```

我需要解释的主要是这段代码^代码，因为作为初学者，我从未使用过“<>”和“:”。另外我不确定 EnumMap 是什么。最好能详细解释这一点。什么是 IRenderer？

**编辑：** 我也想要什么 <> 和 : 被称为所以我可以在互联网上搜索并阅读它们。也欢迎链接:)

```
void render() {
    Renderer currentRenderer = RENDERERS_MAP.get(currentState);
    if (ren  != null) {
        currentRenderer.render();
     }
} 
```

这是我认为将代码呈现到屏幕上的一段代码。

```
public enum State {
    START_MENU() {
        @Override
        public Renderer getRenderer() {
            return new StartMenuRenderer();
        }
    },
    PLAYER_ONE_MENU() {
        @Override
        public Renderer getRenderer() {
            return new PlayerOneRenderer();
        }
    },
    PLAYER_TWO_MENU() {
        @Override
        public Renderer getRenderer() {
            return new PlayerTwoRenderer();
        }
    },
    WIN_SCREEN() {
        @Override
        public Renderer getRenderer() {
            return null;  //TODO: implement body
        }
    },
    LOSE_SCREEN() {
        @Override
        public Renderer getRenderer() {
            return null;  //TODO: implement body
        }
    },
    PLAY_SCREEN() {
        @Override
        public Renderer getRenderer() {
            return null;  //TODO: implement body
        }
    };

    public abstract Renderer getRenderer();
} 
```

这是用于组织游戏中所有状态的枚举状态。

感谢您的所有帮助和解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T04:59:48.907

1、EnumMap是一个Map，其key是一个Enum；

2、for(State state : State.values())... 是迭代State枚举中所有项的便捷形式；

3、<>在Java中是泛型类型，类似于C++中的模板，表示具体的类型将在运行时确定，

4、最后一段代码看起来像 [状态模式](http://en.wikipedia.org/wiki/State_pattern)：不同的状态，不同的实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:04:54.040

> 我需要解释的主要是这段代码^代码，因为作为初学者，我从未使用过“<>”和“:”。另外我不确定 EnumMap 是什么。最好能详细解释这一点。

这`<>`是泛型声明的一部分，它只是将您声明的类型与您正在使用的泛型类相关联。对于 a `Map`，有两种类型， the`Key`和 the `Value`，按照惯例，它们被声明为`EnumMap<K,V>`

所以当你说：

```
RENDERERS_MAP= new EnumMap<State, IRenderer>(State.class); 
```

你是说你希望创建一个`EnumMap`键`Map`是 a `State`，`Map`值是 an `IRenderer`。一旦你`EnumMap`用你想要的类型声明了你的特定类型，Java 然后在检索或设置`Map`.

所以你可以说：

```
IRenderer myRenderer = RENDERERS_MAP.get(myState); 
```

没有显式转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T05:09:47.107

EnumMap 是用于枚举类型键的专用 Map 实现。枚举映射中的所有键都必须来自明确或隐式指定的单个枚举类型。这里的枚举是状态。

现在，在这一行

```
RENDERERS_MAP= new EnumMap<State, IRenderer>(State.class); 
```

您创建一个 EnumMap 类型的对象，其中 State Enum 用作键。它包含在 <> 中，因为 State 也可以用任何其他 Enum 替换。<> 表明该类型是通用的。您可以使用任何其他枚举来代替 State。

下一个，

```
for (State state : State.values()) {
        RENDERERS_MAP.put(state, getRender());
   } 
```

这个 For 循环用于一个一个地迭代所有 EnumMap 值，就像我们一个一个地迭代数组元素一样。":" 用于在许多语言中进行迭代。它是 Java foreach 循环语法的一部分。在此循环中，使用 put 方法为 RENDERERS_MAP 的每个索引分配键和值。

# c# - 很长的存储过程状态

> ID：15445738
> 
> 赞同：7
> 
> 时间：2013-03-16T04:54:48.773
> 
> 标签：c#, asp.net, sql, sql-server, stored-procedures

我有一个存储过程，大约需要 5-8 分钟才能执行。用户只看到一条消息“正在生成报告时请稍候” 人们很可能认为它已经停止工作......或者出了什么问题......等等。

存储过程有什么方法可以在执行时保持返回状态..？

例如 ：

```
{logical block 1}
logical block 1 completed!
{logical block 2}
logical block 2 completed!
{logical block 3}
logical block 3 completed! 
```

如果是，还请告诉我如何在 c# 中捕获这些状态。

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T04:56:30.560

您可以使用该[`InfoMessage`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.infomessage%28v=vs.110%29.aspx)事件在客户端上接收`PRINT`和`RAISERROR`消息。

如果这不起作用，恐怕您必须将存储过程拆分为多个较小的过程才能在每个步骤中获取状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:10:35.383

有趣的！你看过非严重的 RAISERROR 吗？看看[这篇文章](http://weblogs.sqlteam.com/mladenp/archive/2007/10/01/SQL-Server-Notify-client-of-progress-in-a-long-running.aspx)

# syntax - F# 中的恒等函数 (fun x -> x) 是否有更短的表示法？

> ID：15445739
> 
> 赞同：19
> 
> 时间：2013-03-16T04:54:50.810
> 
> 标签：syntax, f#

除了定义你自己的身份函数（fun x -> x）之外，是否有更短的标识函数？写作

```
Seq.countBy (fun x -> x) 
```

看起来很罗嗦。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-16T04:55:20.627

有一个简短的版本`id`等于`fun x -> x`

另外，对于您的情况，您可以这样做`Seq.sort`

# c++ - gcc4.4.6-3编译的jmp to self指令

> ID：15445758
> 
> 赞同：1
> 
> 时间：2013-03-16T04:56:57.713
> 
> 标签：c++, gcc

我有一个 C++ 项目，由 gcc-4.1.2-46 和 gcc-4.4.5-6 正确编译

但是 gcc-4.4.6-3 使用 -O2 编译时出现异常死循环。

我在进程运行时使用gdb附加它，发现线程正在运行但堆栈没有改变。

objdump程序，发现它有3条指令jmp到self，像这样：

```
 432f6c:       48 89 c7                mov    %rax,%rdi 
   432f6f:       90                      nop 
   432f70:       e8 b3 e4 fd ff          callq  411428 <_Unwind_Resume@plt> 
   432f75:       eb fe                   jmp    432f75 <_ZN9oceanbase12updateserver11QueryEngine3getERKNS0_5TEKeyE+0x4d5> 
   432f77:       48 8d 7c 24 70          lea    0x70(%rsp),%rdi 
   432f7c:       48 89 c3                mov    %rax,%rbx 
   432f7f:       e8 9c 32 00 00          callq  436220 <_ZN9oceanbase12updateserver12BitLockGuardD1Ev> 
```

我没有在代码中使用“goto”。

当 gcc-4.4.6-3 使用 -O0 编译代码时，

jmp to self 指令消失了

所以我怀疑这是 gcc-4.4.6.3 的错误。

该代码是一个简单的多线程 Hashmap，使用 BitLock 来保护存储桶：

```
 #define ATOMIC_CAS(val, cmpv, newv) __sync_val_compare_and_swap((val), (cmpv), (newv))
      #define ATOMIC_ADD(val, addv) __sync_add_and_fetch((val), (addv))
      #define ATOMIC_SUB(val, subv) __sync_sub_and_fetch((val), (subv))

      template <typename Key,
                typename Value,
                typename BucketAllocator,
                typename NodeAllocator>
      class LightyHashMap
      {
        struct Node
        {
          Key key;
          Value value;
          union
          {
            Node *next;
            int64_t flag;
          };
        };
        static const int64_t EMPTY_FLAG = 0xffffffffffffffff;
        static const int64_t INIT_UNIT_SIZE = (64L * 1024L / sizeof(Node)) * sizeof(Node);
        typedef Hash<Key> HashFunc;
        typedef Equal<Key> EqualFunc;
        public:
          LightyHashMap(BucketAllocator &bucket_allocator, NodeAllocator &node_allocator);
          ~LightyHashMap();
        private:
          DISALLOW_COPY_AND_ASSIGN(LightyHashMap);
        public:
          int create(const int64_t bucket_num);
          void destroy();
          int clear();
        public:
          inline int insert(const Key &key, const Value &value);
          inline int get(const Key &key, Value &value);
          inline int erase(const Key &key, Value *value = NULL);
          inline int64_t uninit_unit_num() const;
          inline int64_t bucket_using() const;
          inline int64_t size() const;
        private:
          void init_bucket_unit_(const int64_t bucket_pos);
        private:
          BucketAllocator &bucket_allocator_;
          NodeAllocator &node_allocator_;
          int64_t bucket_num_;
          Node *buckets_;
          volatile int64_t uninit_unit_num_;
          uint8_t *init_units_;
          BitLock bit_lock_;
          int64_t bucket_using_;
          int64_t size_;
          HashFunc hash_func_;
          EqualFunc equal_func_;
      };

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::LightyHashMap(
        BucketAllocator &bucket_allocator,
        NodeAllocator &node_allocator) : bucket_allocator_(bucket_allocator),
                                         node_allocator_(node_allocator),
                                         bucket_num_(0),
                                         buckets_(NULL),
                                         uninit_unit_num_(0),
                                         init_units_(NULL),
                                         bucket_using_(0),
                                         size_(0),
                                         hash_func_(),
                                         equal_func_()
      {
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::~LightyHashMap()
      {
        destroy();
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::create(const int64_t bucket_num)
      {
        int ret = common::OB_SUCCESS;
        int64_t uninit_unit_num = (bucket_num * sizeof(Node) / INIT_UNIT_SIZE) \
                                  + ((0 == (bucket_num * sizeof(Node) % INIT_UNIT_SIZE)) ? 0 : 1);
        if (NULL != buckets_)
        {
          ret = common::OB_INIT_TWICE;
        }
        else if (0 >= bucket_num)
        {
          ret = common::OB_INVALID_ARGUMENT;
        }
        else if (NULL == (buckets_ = (Node*)bucket_allocator_.alloc(bucket_num * sizeof(Node))))
        {
          ret = common::OB_MEM_OVERFLOW;
        }
        else if (NULL == (init_units_ = (uint8_t*)bucket_allocator_.alloc(uninit_unit_num * sizeof(uint8_t))))
        {
          ret = common::OB_MEM_OVERFLOW;
        }
        else if (OB_SUCCESS != (ret = bit_lock_.init(bucket_num)))
        {
          // init bit lock fail
        }
        else
        {
          bucket_num_ = bucket_num;
          uninit_unit_num_ = uninit_unit_num;
          memset(init_units_, 0, uninit_unit_num_ * sizeof(uint8_t));
          bucket_using_ = 0;
          size_ = 0;
        }
        if (common::OB_SUCCESS != ret)
        {
          destroy();
        }
        return ret;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      void LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::destroy()
      {
        if (NULL != buckets_)
        {
          if (NULL != init_units_)
          {
            for (int64_t i = 0; i < bucket_num_; i++)
            {
              int64_t unit_pos = i * sizeof(Node) / INIT_UNIT_SIZE;
              uint8_t ov = init_units_[unit_pos];
              if (0 == (ov & 0x80))
              {
                continue;
              }
              Node *iter = buckets_[i].next;
              while (EMPTY_FLAG != buckets_[i].flag
                    && NULL != iter)
              {
                Node *tmp = iter;
                iter = iter->next;
                node_allocator_.free(tmp);
              }
              buckets_[i].flag = EMPTY_FLAG;
            }
          }
          bucket_allocator_.free(buckets_);
          buckets_ = NULL;
        }
        if (NULL != init_units_)
        {
          bucket_allocator_.free(init_units_);
          init_units_ = NULL;
        }
        bit_lock_.destroy();
        bucket_num_ = 0;
        uninit_unit_num_ = 0;
        bucket_using_ = 0;
        size_ = 0;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::clear()
      {
        int ret = common::OB_SUCCESS;
        if (NULL == buckets_
            || NULL == init_units_)
        {
          ret = common::OB_NOT_INIT;
        }
        else
        {
          for (int64_t i = 0; i < bucket_num_; i++)
          {
            int64_t unit_pos = i * sizeof(Node) / INIT_UNIT_SIZE;
            uint8_t ov = init_units_[unit_pos];
            if (0 == (ov & 0x80))
            {
              continue;
            }
            BitLockGuard guard(bit_lock_, i);
            Node *iter = buckets_[i].next;
            while (EMPTY_FLAG != buckets_[i].flag
                  && NULL != iter)
            {
              Node *tmp = iter;
              iter = iter->next;
              node_allocator_.free(tmp);
            }
            buckets_[i].flag = EMPTY_FLAG;
          }
          uninit_unit_num_ = (bucket_num_ * sizeof(Node) / INIT_UNIT_SIZE) \
                              + ((0 == (bucket_num_ * sizeof(Node) % INIT_UNIT_SIZE)) ? 0 : 1);
          memset(init_units_, 0, uninit_unit_num_ * sizeof(Node));
          bucket_using_ = 0;
          size_ = 0;
        }
        return ret;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::insert(const Key &key, const Value &value)
      {
        int ret = common::OB_SUCCESS;
        if (NULL == buckets_
            || NULL == init_units_)
        {
          ret = common::OB_NOT_INIT;
        }
        else
        {
          int64_t hash_value = hash_func_(key);
          int64_t bucket_pos = hash_value % bucket_num_;
          init_bucket_unit_(bucket_pos);
          BitLockGuard guard(bit_lock_, bucket_pos);
          if (EMPTY_FLAG == buckets_[bucket_pos].flag)
          {
            buckets_[bucket_pos].key = key;
            buckets_[bucket_pos].value = value;
            buckets_[bucket_pos].next = NULL;
            common::atomic_inc((uint64_t*)&bucket_using_);
            common::atomic_inc((uint64_t*)&size_);
          }
          else
          {
            Node *iter = &(buckets_[bucket_pos]);
            while (true)
            {
              if (equal_func_(iter->key, key))
              {
                ret = common::OB_ENTRY_EXIST;
                break;
              }
              if (NULL != iter->next)
              {
                iter = iter->next;
              }
              else
              {
                break;
              }
            }
            if (common::OB_SUCCESS == ret)
            {
              Node *node = (Node*)node_allocator_.alloc(sizeof(Node));
              if(NULL == node)
              {
                ret = common::OB_MEM_OVERFLOW;
              }
              else
              {
                node->key = key;
                node->value = value;
                node->next = NULL;
                iter->next = node;
                common::atomic_inc((uint64_t*)&size_);
              }
            }
          }
        }
        return ret;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::get(const Key &key, Value &value)
      {
        int ret = common::OB_SUCCESS;
        if (NULL == buckets_
            || NULL == init_units_)
        {
          ret = common::OB_NOT_INIT;
        }
        else
        {
          int64_t hash_value = hash_func_(key);
          int64_t bucket_pos = hash_value % bucket_num_;
          init_bucket_unit_(bucket_pos);
          BitLockGuard guard(bit_lock_, bucket_pos);
          ret = common::OB_ENTRY_NOT_EXIST;
          if (EMPTY_FLAG != buckets_[bucket_pos].flag)
          {
            Node *iter = &(buckets_[bucket_pos]);
            while (NULL != iter)
            {
              if (equal_func_(iter->key, key))
              {
                value = iter->value;
                ret = common::OB_SUCCESS;
                break;
              }
              iter = iter->next;
            }
          }
        }
        return ret;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::erase(const Key &key, Value *value)
      {
        int ret = common::OB_SUCCESS;
        if (NULL == buckets_
            || NULL == init_units_)
        {
          ret = common::OB_NOT_INIT;
        }
        else
        {
          int64_t hash_value = hash_func_(key);
          int64_t bucket_pos = hash_value % bucket_num_;
          init_bucket_unit_(bucket_pos);
          BitLockGuard guard(bit_lock_, bucket_pos);
          ret = common::OB_ENTRY_NOT_EXIST;
          if (EMPTY_FLAG != buckets_[bucket_pos].flag)
          {
            Node *iter = &(buckets_[bucket_pos]);
            Node *prev = NULL;
            while (NULL != iter)
            {
              if (equal_func_(iter->key, key))
              {
                if (NULL != value)
                {
                  *value = iter->value;
                }
                if (NULL == prev)
                {
                  buckets_[bucket_pos].flag = EMPTY_FLAG;
                }
                else
                {
                  // do not free deleted node
                  prev->next = iter->next;
                }
                ret = common::OB_SUCCESS;
                break;
              }
              prev = iter;
              iter = iter->next;
            }
          }
        }
        return ret;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int64_t LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::uninit_unit_num() const
      {
        return uninit_unit_num_;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int64_t LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::bucket_using() const
      {
        return bucket_using_;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      int64_t LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::size() const
      {
        return size_;
      }

      template <typename Key, typename Value, typename BucketAllocator, typename NodeAllocator>
      void LightyHashMap<Key, Value, BucketAllocator, NodeAllocator>::init_bucket_unit_(const int64_t bucket_pos)
      {
        while (0 < uninit_unit_num_)
        {
          int64_t unit_pos = bucket_pos * sizeof(Node) / INIT_UNIT_SIZE;
          uint8_t ov = init_units_[unit_pos];
          if (ov & 0x80)
          {
            break;
          }
          ov = 0;
          uint8_t nv = ov | 0x01;
          if (ov == ATOMIC_CAS(&(init_units_[unit_pos]), ov, nv))
          {
            int64_t ms_size = std::min((bucket_num_ - bucket_pos) * sizeof(Node), (uint64_t)INIT_UNIT_SIZE);
            memset((char*)buckets_ + unit_pos * INIT_UNIT_SIZE, -1, ms_size);
            ATOMIC_SUB(&uninit_unit_num_, 1);
            init_units_[unit_pos] = 0x80;
            break;
          }
        }
      } 
```

///////////////////////////////////////// //////////////////////////////////

```
static const uint8_t BIT_MASKS[8] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};

class BitLock
{
  public:
    BitLock() : size_(0),
                bits_(NULL)
    {
    };
    ~BitLock()
    {
      destroy();
    };
  public:
    inline int init(const int64_t size);
    inline void destroy();
    inline int lock(const int64_t index);
    inline int unlock(const int64_t index);
  private:
    int64_t size_;
    uint8_t *bits_;
};

class BitLockGuard
{
  public:
    BitLockGuard(BitLock &lock, const int64_t index) : lock_(lock),
                                                       index_(index)
    {
      lock_.lock(index_);
    };
    ~BitLockGuard()
    {
      lock_.unlock(index_);
    };
  private:
    BitLock &lock_;
    const int64_t index_;
};

int BitLock::init(const int64_t size)
{
  int ret = common::OB_SUCCESS;
  if (0 < size_
      || NULL != bits_)
  {
    ret = common::OB_INIT_TWICE;
  }
  else if (0 >= size)
  {
    ret = common::OB_INVALID_ARGUMENT;
  }
  else
  {
    int64_t byte_size = common::upper_align(size, 8) / 8;
    if (NULL == (bits_ = (uint8_t*)common::ob_malloc(byte_size)))
    {
      ret = common::OB_MEM_OVERFLOW;
    }
    else
    {
      memset(bits_, 0, byte_size);
      size_ = size;
    }
  }
  return ret;
}

void BitLock::destroy()
{
  if (NULL != bits_)
  {
    common::ob_free(bits_);
    bits_ = NULL;
  }
  size_ = 0;
}

int BitLock::lock(const int64_t index)
{
  int ret = common::OB_SUCCESS;
  if (0 >= size_
      || NULL == bits_)
  {
    ret = common::OB_NOT_INIT;
  }
  else if (index >= size_)
  {
    ret = common::OB_INVALID_ARGUMENT;
  }
  else
  {
    int64_t byte_index = index / 8;
    int64_t bit_index = index % 8;
    while (true)
    {
      uint8_t ov = bits_[byte_index];
      if (ov & BIT_MASKS[bit_index])
      {
        continue;
      }
      if (ov == ATOMIC_CAS(&(bits_[byte_index]), ov, ov | BIT_MASKS[bit_index]))
      {
        break;
      }
    }
  }
  return ret;
}

int BitLock::unlock(const int64_t index)
{
  int ret = common::OB_SUCCESS;
  if (0 >= size_
      || NULL == bits_)
  {
    ret = common::OB_NOT_INIT;
  }
  else if (index >= size_)
  {
    ret = common::OB_INVALID_ARGUMENT;
  }
  else
  {
    int64_t byte_index = index / 8;
    int64_t bit_index = index % 8;
    while (true)
    {
      uint8_t ov = bits_[byte_index];
      if (!(ov & BIT_MASKS[bit_index]))
      {
        // have not locked
        break;
      }
      if (ov == ATOMIC_CAS(&(bits_[byte_index]), ov, ov & ~BIT_MASKS[bit_index]))
      {
        break;
      }
    }
  }
  return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:49:17.143

**更新：**

该`_Unwind_Resume`功能将

> 恢复展开过程，在没有返回到正常执行线程的清理代码结束时调用（即，不是捕获）。

查看[C++ 的秘密生活：第 3 天：异常](http://www.mit.edu/~sipb-iap/2004/inside-c/day3/exceptions.html)

根据[这个](http://gcc.gnu.org/ml/gcc-help/2007-10/msg00263.html)

> pthread_cancel 需要它。它在清理后恢复展开。

所以似乎在一个线程中存在一个异常，没有`catch`......鉴于不同版本的 gcc 和不同优化级别的行为不同，我敢说你正在使用线程并且有一个[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T16:18:29.417

我怀疑问题出在你的循环中`BitLock::lock`：

```
 while (true)
    {
      uint8_t ov = bits_[byte_index];
      if (ov & BIT_MASKS[bit_index])
      {
        continue;
      }
      if (ov == ATOMIC_CAS(&(bits_[byte_index]), ov, ov | BIT_MASKS[bit_index]))
      {
        break;
      }
    } 
```

`__sync_val_compare_and_swap`宏中的将`ATOMIC_CAS`充当内存屏障，防止编译器/处理器推测通过它的负载，但它不会对之前的负载做任何事情，因此可以根据调用前的`ov & BIT_MASKS[bit_index]`值优化条件，从而导致在无限循环中。`bits_[byte_index]``__sync_val_compare_and_swap`

请尝试以下操作：

```
 while (true)
    {
      uint8_t ov = bits_[byte_index];
      if (ov & BIT_MASKS[bit_index])
      {
        __sync_synchronize();  // or define ATOMIC_SYNC if you prefer
        continue;
      }
      if (ov == ATOMIC_CAS(&(bits_[byte_index]), ov, ov | BIT_MASKS[bit_index]))
      {
        break;
      }
    } 
```

内存屏障将`__sync_synchronize`防止循环退化为微不足道的循环。

# ios - EGOTableViewPullRefresh 不显示背景

> ID：15445759
> 
> 赞同：0
> 
> 时间：2013-03-16T04:57:16.000
> 
> 标签：ios, uitableview, uiview

我正在使用这个库：[EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)我已经像示例一样设置了它并且它可以工作。当我开始自定义外观时，事情就出错了。我的代码：

```
EGORefreshTableHeaderView *view = [[EGORefreshTableHeaderView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.tableview.bounds.size.height, self.tableview.frame.size.width, self.tableview.bounds.size.height) arrowImageName:@"pull-refresh-arrow.png" textColor:[UIColor whiteColor] backgroundImage:[UIImage imageNamed:@"alternate-background"]];
//        view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"alternate-background"]];
    view.backgroundColor = [UIColor blackColor];
    view.delegate = self;
    [self.tableview addSubview:view]; 
```

它正确设置文本和箭头，但不设置背景颜色。实际上，我尝试从具有清晰背景的视图中修改它所附加的表，以查看是否有帮助，但这没有任何区别。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T12:37:23.927

如果你想自定义**PullRefresh**视图的背景颜色，你应该在“ **EGORefreshTableHeaderView.m** ”文件的第**47行找到你想要的代码**

```
self.backgroundColor = [UIColor colorWithRed:226.0/255.0 green:231.0/255.0 blue:237.0/255.0 alpha:1.0]; 
```

所以您可以轻松更改背景颜色，希望对您有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T17:09:29.207

我最终使用了[MSPullToRefreshController](https://github.com/bogardon/MSPullToRefreshController)，因为它更容易定制^^

# javascript - 获取由另一个函数调用的所有函数的列表

> ID：15445761
> 
> 赞同：7
> 
> 时间：2013-03-16T04:57:31.297
> 
> 标签：javascript, dependency-graph

在 JavaScript 中，是否可以获得由另一个函数调用的所有函数的列表？我想创建一个函数依赖树，以分析脚本中的函数如何相互关联（以及哪些函数需要哪些其他函数）。

例如：

```
getAllCalledFunctions(funcA); //this should return [funcB, funcC, funcD], since these are the functions that are required by funcA.

function getAllCalledFunctions(functionName){
    //how should I implement this?
}

function funcA(){
    funcB();
    funcC();
}

function funcB(){
    funcD();
}

function funcC(){
    funcD();
}

function funcD(){
    console.log("This function is called by funcC and funcD");
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T05:28:12.857

[Esprima](http://esprima.org/)可以帮助您。它是一个 Javascript 解析器，可以帮助您进行静态代码分析。

这是一个简单的示例（[http://jsfiddle.net/fyBvT/](http://jsfiddle.net/fyBvT/)）：

```
var code = 'function funcA() { funcB(); funcC(); } function funcB(){ funcD(); } function funcC() { funcD(); } function funcD(){ console.log("This function is called by funcC and funcD"); }';
var syntax = esprima.parse(code);

var funcs = [];
_.each(syntax.body, function(i) {
    if (i.type == 'FunctionDeclaration') {
        var func = {name: i.id.name};

        _.each(i.body.body, function(j) {
            if (j.type == 'ExpressionStatement' && j.expression.type == 'CallExpression') {
                func.calls = func.calls || [];
                func.calls.push(j.expression.callee.name);
            }
        });

        funcs.push(func);
    }
});

console.log(funcs); 
```

显然，这需要很多帮助才能提供更多价值，但它可能会让您对什么是可能的以及从哪里开始有所了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:21:37.177

*有趣的问题。我也质疑它背后的动机......希望它只是为了更好地调试或理解应用程序的结构。*

# 这是一个疯狂的想法：[只是把它扔在那里......]

如果您可以绑定到每个函数，您可以通过以下方式获取被调用者：

```
arguments.callee.name 
```

并将其写入全局变量（可能是一个对象，每个键是函数的名称，值是函数名称的数组）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T05:12:44.467

基本上，你不能。

除非您执行它们，否则对象/函数将不知道它们将执行什么，除非您对函数的 java 脚本代码本身执行正则表达式.. 充其量是不可靠的。

如果你想向后做，追溯堆栈，这样的问题有解决方案：[当我抛出异常时，如何获得 Javascript 堆栈跟踪？](https://stackoverflow.com/questions/591857/how-can-i-get-a-javascript-stack-trace-when-i-throw-an-exception)

为了实现您可能正在寻找的东西，您可以创建一个泛型类，您的函数从该类继承，并使用您自己实现的方法为它们分配函数调用。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-16T05:01:05.047

显而易见的答案如下所示：

```
var origCall = Function.prototype.call;
Function.prototype.call = function (thisArg) {
    console.log("calling a function");

    var args = Array.prototype.slice.call(arguments, 1);
    origCall.apply(thisArg, args);
}; 
```

但这实际上立即进入了一个无限循环，因为调用的行为`console.log`本身就执行了一个函数调用，它调用了console.log，它执行了一个函数调用，它调用`console.log`了……

或者

我假设您要过滤掉本机功能。在 Firefox 中，`Function.toString()`返回函数体，对于本机函数，它将采用以下形式：

```
function addEventListener() { 
    [native code] 
} 
```

您可以匹配`/\[native code\]/`循环中的模式并省略匹配的函数。

# mysql-workbench - 如何在mysql工作台中自动建立实体之间的关系？

> ID：15445763
> 
> 赞同：-1
> 
> 时间：2013-03-16T04:57:44.183
> 
> 标签：mysql-workbench

我用 Joomla 2.5.x 创建了一个网站，现在我正在研究数据库的 ER 图。

我找到了自动创建它的 MySQL Workbench。我试过了，但它只显示实体。

如何自动建立关系（因为我网站的数据库太复杂了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:39:22.483

关系只有在存在时才能在 Workbench (WB) 中显示，即定义了外键。WB 将选择任何外键并自动在图表中创建关系。

# django - Django 检索图片 ID

> ID：15445764
> 
> 赞同：0
> 
> 时间：2013-03-16T04:58:01.097
> 
> 标签：django

我试图实现当用户从白板上单击图片时，它会将图片 id 的参数发送到我的函数。

这是一个例子。这显示了我所有的用户板，当他点击板时，它将带有板 id 的用户重定向到我的功能

```
<h4>My WHiteBoards</h4>
{% if board %} 
<ul>  
    {% for b in board %}         
    <li><a href ="{% url world:Boat b.id %}">{{ b.name }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

我正在尝试通过图像来实现相同的目标。当用户单击图像时。我想将带有图像 id 参数的用户重定向到我的函数。我会知道它是否会发生，因为我的功能会将用户重定向到我的个人资料，但问题是当用户点击图片时，它不会重定向。我认为原因是超链接和图像彼此不相关。

如何修复此错误，以便当用户单击图片时，将使用图片 ID 的参数重定向他

```
<li><a href ="{% url world:Like pet.id %}"><img src= "{{ pet.image.url }}"> 
```

我的观点.py

```
def Boat(request ,animal_id):
        if not request.user.is_authenticated():
            return HttpResponseRedirect(reverse('world:LoginRequest'))

    picture = Picture.objects.filter(whiteboard=animal_id)
    return render(request,'boat.html',{'picture':picture}) 
```

URLconf.py

```
 ),
    url(
        r'^(?P<picture_id>\d+)/$',
        'pet.views.Like',
        name = 'Like'
    ), 
```

我的观点.py

```
def Like(request,picture_id):
    everyone = Person.objects.all()
    return render(request,'everyone.html',{'everyone':everyone,'follow':True,}) 
```

我希望这是有道理的，否则我会尝试重写它，直到它有意义为止。谢谢：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:53:59.693

您的`</li>`and`</a>`位置不正确，它必须是：

```
<li>
   <a href ="{% url world:Like pet.id %}">
       <img src= "{{ pet.image.url }}" style="cursor:pointer">
   </a>
</li> 
```

我`cursor:pointer`在你的图片中添加了

**更新：**

好的，我跟踪你的代码，问题为什么你的图片什么都不做，因为`like and boat has the same url address`. 为什么会是一样的？即使他们有不同的网址名称。请注意浏览器中上面的地址 url，它们都返回`http://localhost:8000/1/`.

就像网址是：

```
 url(
        r'^(?P<picture_id>\d+)/$',
        'pet.views.Like',
        name = 'Like'
    ),

    //which return http://localhost:8000/1/ --> 1 is just a sample id 
```

船的网址是：

```
 url(
        r'^(?P<animal_id>\d+)/$',
        'pet.views.Like',
        name = 'Like'
    ),

    //which return also http://localhost:8000/1/ --> 1 is just a sample id 
```

为了使其有效和修复，您必须更改其中之一的 url 地址，如下所示：

```
 url(
        r'^like/(?P<picture_id>\d+)/$',
        'pet.views.Like',
        name = 'Like'
    ),

    //which return now as http://localhost:8000/like/1/ 
```

# asp.net-mvc - 当数据具有 html 标签（如）时，jqGrid 添加功能不起作用

> ID：15445771
> 
> 赞同：1
> 
> 时间：2013-03-16T04:59:31.903
> 
> 标签：asp.net-mvc, jqgrid

当数据具有 html 标签时，jqGrid 添加和编辑功能不起作用。如果我给出自动编码，就像“br”“p”标签：真。然后编辑和添加功能工作正常。但它显示为一个字符串。

例如：Hi Ram“html br 标签”你好吗。我的 jqGrid 应该显示为

嗨，拉姆
，你好吗

如果我没有给出 autoencode: true 那么添加和编辑功能不起作用。

**我的代码是：**

```
<script type="text/javascript">

$(function () {

    $("#divId").jqGrid({
    colNames:['mailSub','mailBody'],
     colModel: [

                    { name: 'mailSub', index: 'mailSub', sortable: true, align: 'left', width: '150',
                        editable: true, edittype: 'text',search:true,searchoptions:{sopt:['eq']}

                    },
                    { name: 'mailBody', index: 'mailBody', sortable: true, align: 'left', width: '300',
                        editable: true, edittype: 'text',search:true,searchoptions:{sopt:['eq']}

                    } 

              ],

        pager: jQuery('#pager'),
        sortname: 'MessageKey',
        rowNum: 15,
        rowList: [15, 20, 25],
        sortorder: "desc",
        height: 340,
        viewrecords: true,
        rownumbers: true,
        caption: 'Messages',
        width: 660,
        url: "@Url.Content("url given")",
        editurl:"@Url.Content("EditUrl given")",
        datatype: 'json',
        mtype: 'GET'

    })
     jQuery("#divId").jqGrid('navGrid', '#pager', { edit:true, add: true, del: false, search: true, refresh: true },
        { closeOnEscape: true, reloadAfterSubmit: true, closeAfterEdit: true, left: 400, top: 300 },
        { closeOnEscape: true, reloadAfterSubmit: true, closeAfterAdd: true, left: 450, top: 300, width: 520 },
        { closeOnEscape: true, reloadAfterSubmit: true, left: 450, top: 300 },
        {closeAfterSearch:true,closeAfterReset:true,left: 450, top: 300});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:18:08.610

在 jqGrid 中给定的属性为

```
autoencode: true 
```

以上属性用于对数据进行编码。现在在控制器动作方法中解码现有的编码数据。

```
 String decodedText = HttpUtility.HtmlDecode(encoded_string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:25:52.607

试试 `autoencode: true,`你的网格选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T10:25:11.230

设置 colmodel 数据类型 = 'html'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T10:32:10.303

在 JQGrid 列中添加 html 标记，您希望将相应列的数据类型设置为 html。

数据类型 = 'html'

# ios - 仅在 UITableView 中为可用的 CellForRow 显示分隔符

> ID：15445775
> 
> 赞同：12
> 
> 时间：2013-03-16T04:59:59.470
> 
> 标签：ios, objective-c, uitableview, ios7, ios9

我正在使用带有自定义单元格的 UITableView。
它工作正常，但问题是 UITableView 中只有一两个单元格时。
它也为空单元格提供分隔符。
是否可以仅为使用我的自定义单元格加载的单元格显示分隔符？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-16T05:01:36.840

您需要添加一个空的页脚视图来隐藏表格中的空行。

**迅速：**

在你的`viewDidLoad()`

```
self.tblPeopleList.tableFooterView = UIView.init() 
```

**目标-C：**

**最简单的方法：**

在你的`viewDidLoad`方法中，

```
self.yourTableView.tableFooterView = [[UIView alloc] initWithFrame : CGRectZero]; 
```

**或者**

```
self.yourTableView.tableFooterView = [UIView new]; 
```

**或者**

如果你想自定义页脚视图的外观，你可以这样做。

```
UIView *view = [[UIView alloc] initWithFrame:self.view.bounds];
view.backgroundColor = [UIColor redColor];
self.yourTableView.tableFooterView = view;

//OR add an image in footer
//UIImageView *imageView = [[UIImageView alloc] initWithImage:footerImage.png]
//imageView.frame = table.frame;
//self.yourTableView.tableFooterView = imageView; 
```

**其他方式：**

实现一个表的数据源方法，

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    return [UIView new];
} 
```

这是同一件事，但如果表格有多个部分，您可以在此处为每个部分添加不同的视图。即使您可以使用此方法设置每个部分的不同高度，`- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {...}`.

^(**Objective-C 答案注意**：此答案针对 iOS7 及更高版本进行了测试，对于以前的版本，您必须测试每种情况。) ^(**Swift 回答注意**：这个答案是针对 iOS10.3 及更高版本进行测试的，对于以前的版本，您必须测试每种情况。)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-18T03:22:52.790

另一种解决方案：

```
UIView *v = [[UIView alloc] initWithFrame:CGRectZero];
v.backgroundColor = [UIColor clearColor];
[self.tableView setTableFooterView:v]; 
```

这也有效

```
self.tableView.tableFooterView = [UIView new]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-12T06:50:14.963

把这个和平的代码放在你的 viewDidLoad

```
self.tblTest.tableFooterView = [[UIView alloc] initWithFrame : CGRectZero]; 
```

# c# - 添加控制器错误无法检索元数据

> ID：15445786
> 
> 赞同：21
> 
> 时间：2013-03-16T05:03:07.113
> 
> 标签：c#, asp.net, .net, asp.net-mvc, visual-studio

我想在 VS2012 的 MVC 4 应用程序中添加控制器，如下图所示：

![添加控制器](../Images/9eb64e953221fb067a7f4d9a8119d108.png)

模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace MvcDemo.Models
{
    public class MovieDB
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public string Director { get; set; }
        public DateTime Date { get; set; }
    }
    public class MovieDBContext : DbContext
    {
        public DbSet<MovieDB> Movies { get; set; }
    }
} 
```

连接字符串：

```
<connectionStrings>

<add name="DefaultConnection" 
connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MvcDemo-20130315191956;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MvcDemo-20130315191956.mdf"
providerName="System.Data.SqlClient" />

<add name="MovieDBContext"
connectionString="Data Source=|DataDirectory|\Movies.sdf"
providerName="System.Data.SqlServerCe.4.0"/>

</connectionStrings> 
```

点击“添加”后，出现此错误：

```
unable to retrieve metadata for 'MvcDDemo.Models.MovieDB'.Using the
same DbCompiledModel to create contexts against different type of
database servers is not supported.instead,create a 
separate DbCompiledModel for each type of server being used. 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-16T07:43:37.223

在`Web.config`中，将 second 设置`providerName`为与 first 相同`providerName`，并在创建控制器后撤消该操作！

*来自：[这里](https://stackoverflow.com/questions/12546545/unable-to-retrieve-metadata)*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T20:30:40.987

更改 `providerName="System.Data.SqlServerCe.4.0` 为 `providerName="System.Data.SqlClient`修复此错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-21T04:53:32.970

如果有人遇到同样的问题，我的帖子可能会有所帮助。

我尝试在同一个项目中尝试使用 EF6 和 EF5，我注意到 <entityFramework> 标记搞砸了，并且遇到了上面同样的问题。

这是我所做的，它解决了问题：

1.  我从 Web.config 中删除了 <entityFramework> 标记
2.  使用 nuget 从我的 MVC 应用程序中卸载实体框架
3.  再次将实体框架安装到我的 MVC 应用程序

删除 <entityFramework> 标记并重新安装 EF5 后，它已修复，我可以再次搭建我的控制器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-19T00:07:41.750

在尝试搭建脚手架之前不要忘记清理和重建！那是我的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-17T10:57:59.983

在`web.config`中，删除该`AttachDBFilename=|DataDirectory|****.mdf`行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-07T19:53:53.243

用户关注`providerName = "System.Data.SqlServerCe.4.0"`

```
<add name="MovieDBContext" 
connectionString="Data Source=|DataDirectory|\Movies.sdf"
providerName="System.Data.SqlServerCe.4.0" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-20T21:56:15.693

我有同样的问题，下面是为我解决问题的更改。不得不将 localhost 更改为 . 并添加了初始目录=电影。

前

```
<add name="MovieDBContext" connectionString="Data Source= localhost\SQLEXPRESS;AttachDbFilename=|DataDirectory|\MoviesDB.mdf;Integrated Security=True" providerName="System.Data.SqlClient"/> 
```

之后（修复）

```
<add name="MovieDBContext" connectionString="Data Source= .\SQLEXPRESS;Initial Catalog=Movies; AttachDbFilename=|DataDirectory|\MoviesDB.mdf;Integrated Security=True" providerName="System.Data.SqlClient"/> 
```

参考：

[ASP .Net MVC 4，键“attachdbfilename”的值无效](https://stackoverflow.com/questions/19976725/asp-net-mvc-4-invalid-value-for-key-attachdbfilename)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-25T07:20:53.830

确保上下文部分可以访问在该类库中创建的上下文。例如： [![在此处输入图像描述](../Images/16b9fe7cf3e22b8b9da0c1b57f707505.png)](https://i.stack.imgur.com/AGDdn.jpg)

Persistence.DbContexts 不正确您必须使用此**Persistence.DbContexts.DataDbContext**

# actionscript-3 - 在 AS3 中添加和删除子项？

> ID：15445788
> 
> 赞同：0
> 
> 时间：2013-03-16T05:03:27.430
> 
> 标签：actionscript-3, removechild, addchild

所以，我正在尝试做这样的事情，如果 Cosmo.hitTestObject，Asteroid 5 应该被删除，但是我希望它立即添加回不同的位置，所以命中测试不会自动触发。我该怎么做呢？

```
var nCount1:Number = 0;
timer_Text1.text = nCount1.toString();
addEventListener(Event.ENTER_FRAME,massCollect);

function massCollect(e:Event) {
    if (Cosmo.hitTestObject(Asteroid5)) {
        removeChild(Asteroid5);
        nCount1++;
        timer_Text1.text = nCount1.toString();
    }
    if (nCount1 == 5) {
        gotoAndStop(351, "Scene 1");
        removeEventListener(Event.ENTER_FRAME,massCollect);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:45:02.590

我会用这样的东西：

```
var nCount1:Number = 0;
timer_Text1.text = nCount1.toString();
addEventListener(Event.ENTER_FRAME, massCollect);

function massCollect(e:Event) {
    if (Cosmo.hitTestObject(Asteroid5)) {
        while (Cosmo.hitTestObject(Asteroid5) {
            Asteroid5.x = Math.floor(MAX_WIDTH * Math.random());
            Asteroid5.y = Math.floor(MAX_HEIGHT * Math.random());
        }
        removeChild(Asteroid5);
        nCount1++;
        timer_Text1.text = nCount1.toString();
    }
    if (nCount1 == 5) {
        gotoAndStop(351, "Scene 1");
        removeEventListener(Event.ENTER_FRAME, massCollect);
    }
} 
```

# xliff - XLIFF 文件中经常使用的 `tek` 命名空间是什么？

> ID：15445790
> 
> 赞同：0
> 
> 时间：2013-03-16T05:04:52.037
> 
> 标签：xliff

我正在调查 XLIFF，首先，想对 HTML 文件进行一些测试。我在 OASIS 找到了一个 XSL 转换，它从 HTML 文件生成 XLIFF 文件。但生成的 XLIFF 文件包含属于`tek`名称空间的元素和属性，OpenLanguageTools XLIFF Editor 似乎不喜欢这些元素和属性。我自己在尝试根据`xliff-core-1.2-strict.xsd`架构验证它时遇到问题。

我想知道那个`tek`名称空间是什么，它的标识符是`http://www.tektronix.com/TC`. 我在网上搜索，但找不到任何相关内容。

这是 XLIFF 的标​​准扩展吗？这是遗产还是现实？

**更新 #1**：让我很困扰的是，该 URL 似乎不再有效，并且现在重定向到 www.tek.com，而似乎仍然有许多示例 XLIFF 文档包含来自该名称空间的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:35:47.447

`tek`确实代表[泰克。](http://www.w3.org/International/multilingualweb/dublin/slides/23-schnabel.pdf)虽然您没有提供生成的 Xliff，但我猜您无法针对 Xliff 核心模式验证它的原因是您的文档有两个命名空间；原始的 Xliff 命名空间和一个名为的自定义命名空间`tek`，用于将自定义词汇表添加到文件中。

这是一个`foo`例子：

```
<xliff xmlns="urn:oasis:names:tc:xliff:document:1.2" 
       xmlns:foo="http://www.foobar.com"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2         
       xliff-core-1.2-strict.xsd http://www.foobar.com foo.xsd" 
       version="1.2"> 
```

然后你可以拥有：

```
 <trans-unit id="0" restype="button" resname="big_red_button">
       <foo:serious-note>Srsly!</foo:serious-note>
       <source xml:lang="en-US">Don't push here!</source>
       <target state="needs-translation></target>
   </trans-unit> 
```

只要您将此自定义标签添加到您的架构中，您就可以使用 Xliff 架构和您的自定义架构来验证*文件*：

```
<xsd:element name="serious-note">
    <xsd:complexType>
        <xsd:simpleContent>
            <xsd:extension base="xsd:string">
                <xsd:attribute ref="xml:lang" use="optional"/>
                <xsd:attribute name="foobar" type="xsd:string" use="optional"/>
            </xsd:extension>
        </xsd:simpleContent>
    </xsd:complexType>
</xsd:element> 
```

# javascript - 函数范围 - 定义的 jquery 函数在 html 表单中不起作用（jquery）

> ID：15445792
> 
> 赞同：-4
> 
> 时间：2013-03-16T05:04:58.753
> 
> 标签：javascript, jquery

我正在尝试在 HTML 表单上调用 jquery 函数。它不起作用，我想检查'key'字段长度是否不应小于 10。但看起来，函数 checkError 根本没有被调用。

```
<form action="/search" method="get" onsubmit="if (document.getElementById('key').value.length < 10) checkError();"> 
```

完整代码在这里：http: [//jsfiddle.net/7UwsN/](http://jsfiddle.net/7UwsN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:14:08.230

问题是您的表单是在调用 return false 之前提交的。如果您使用 onsubmit 内联，则必须为 false；这样它就不会提交表单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:15:13.970

你并没有真正正确地解决这个问题。您说您正在尝试在 HTML 代码中调用 jquery 函数，但实际上您正在执行 if 条件，然后可能会调用函数。

如果你将所有的处理都转移到一个 javascript 函数中，它会更好，而且干扰更少。如果您使用 jQuery，请查看设置`submit()`事件函数，然后在那里进行处理。在此函数中返回`true`然后提交表单，返回`false`停止处理表单。

这也可能会以某种方式格式化事物，从而使调试任何类型的错误也变得更加容易......

例如：

**jQuery：**

```
$(document).ready(function() {
    $("#formID").submit(function() {
        //do some processing, call other functions, whatever
        if(error)
            return false;
        else
            return true;
    });
}); 
```

**HTML：**

```
<form action="/search" method="get" id="formID"> 
```

# php - PHP文件上传安全

> ID：15445796
> 
> 赞同：3
> 
> 时间：2013-03-16T05:05:49.903
> 
> 标签：php

我有一个将文件上传到我的服务器的脚本这是我的代码

当用户将文件上传到服务器时

1.  我的脚本重命名文件并将详细信息保存在数据库中。

2.  我将文件放在网络根目录之外。

那么我的方法安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:08:34.840

是的，您的方法是安全的。因为所有文件都将在 Web 根目录之外上传。没有人可以通过 URL 直接访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:08:49.533

您应该对您的文件进行进一步的输入验证，例如：

*   检查文件大小

*   使用“文件类型识别器”检查文件类型

*   检查内容标题

您还可以在此处查看文件上传的最佳实践： [https ://www.owasp.org/index.php/Unrestricted_File_Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload)

永远不要在您的服务器上运行该文件。

要检查内容类型（顺便说一句，我自己从来没有这样做过），您可以尝试以下操作：

```
$file = "path2file";
$finfo = new finfo(FILEINFO_MIME);
$type = $finfo->file($file);
if(in_array($type,array("application/zip", "application/x-zip", .. whatever content types are ok...)))
  //you passed 
```

# ios - 如何以编程方式从 iOS 中的 plist 中检索数据？

> ID：15445805
> 
> 赞同：-2
> 
> 时间：2013-03-16T05:07:00.967
> 
> 标签：ios, date, compare, plist

我想在我的 plist 中比较两个日期，当前日期和日期。如果我的 plist 中的当前日期和日期相等，那么我想显示一些东西。可能吗？

plist 中的层次结构是 Array->Dictionary->（对象是被视为一个数组的联系人，所有对象的键应该相同，并且它是一个字符串）。我想将密钥与当前日期进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:08:52.677

您可以使用以下代码。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"EventAddress" ofType:@"plist"]; 
NSMutableDictionary *myDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:path];

NSArray* allmyKeys = [myDictionary  allValues];
NSLog(@"%@", allmyKeys);
NSLog(@"%@", [[allmyKeys objectAtIndex:0] objectAtIndex:0]); 
```

要从 plis 获取日期，您的 plist 日期应包含以下内容：

```
<date>2011-12-13T00:00:00Z</date> 
```

并从 NSDictionary 使用获取日期：

```
NSDate *eventDate = [myDictionary objectForKey:@"date"]; 
```

并比较两个日期使用：

```
switch ([[NSDate date] compare:eventDate]){
 case NSOrderedAscending:
      NSLog(@"NSOrderedAscending");
break;
case NSOrderedSame:
      NSLog(@"NSOrderedSame");
break;
case NSOrderedDescending:
     NSLog(@"NSOrderedDescending");
break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:35:36.973

为了满足这个“plist中的层次结构是Array->Dictionary->（对象将被视为一个数组的联系人，并且所有对象的键都应该相同，并且它是一个字符串）。我想将键与当前日期”，您需要按照以下步骤操作

1.  从 .plist 文件中获取所有数组
2.  获取当前数组对象中的所有字典
3.  获取当前字典对象中的所有键
4.  使用比较您的 KEY 和 Current Date`NSComparisonResult`

    ```
    NSDate *date1 = < YOUR CURRENT DATE HERE > ;
    NSString *plistFilePath  = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"SyncAuditMainScreen.plist"];

    NSArray *array = [NSArray arrayWithContentsOfFile:plistFilePath];
    for(int i=0;i<[array count];i++)
    {
        NSMutableDictionary *details=[array objectAtIndex:i];
        NSArray *allmyKeys = [details allKeys];
        for(NSString *key in allmyKeys)
        {
            NSLog(@"KEY: %@",key);
            NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
            [formatter setDateFormat:< YOUR FORMAT OF DATE >];
            NSDate *date2 = [formatter dateFromString:key];
            NSComparisonResult result = [date1 compare:date2];
            if(result==NSOrderedSame)
                NSLog(@"Key and current date are same");
        }
    } 
    ```

# java - 如何将 JPanel 从不同的类添加到容器？

> ID：15445815
> 
> 赞同：1
> 
> 时间：2013-03-16T05:08:48.870
> 
> 标签：java, swing, jframe, jpanel

基本上我有一个充当容器的类。它`JFrame`有一个构造函数，它接受一个`JPanel`. 现在，我在容器类之外构建了各种 JPanel。出于特定原因，我让它们以这种方式设计，主要与 MVC 设计模式有关。

我遇到的问题是，每当我将它添加`JPanel`到容器中时，它从容器类中显示为空白。没有编译错误。我不明白为什么它不会添加我要求的内容。我会发布一些代码，这是容器：

```
public class MainFrame {

    private JFrame mainContainer = new JFrame("Frog Checkers");

    private JPanel frame = new testFrame();

    public void start() {
        mainContainer(frame);
    }

    private JFrame mainContainer(JPanel frame) {
        mainContainer.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        mainContainer.setSize(925, 608);
        mainContainer.setVisible(true);
        Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
        mainContainer.setLocation(dim.width / 2 - mainContainer.getSize().width
            / 2, dim.height / 2 - mainContainer.getSize().height / 2);
        mainContainer.setResizable(false);

        mainContainer.add(frame);

        return mainContainer;
    }
} 
```

这是我要添加的一个 JPanel 的示例：

```
public class testFrame extends JPanel {
    private JPanel testPanel = new JPanel()
    private JButton testButton, anotherButton;

    public testFrame() {
        testPanel.setLayout(new GridBagLayout());
        GridBagConstraints constraints = new GridBagConstraints();

        testButton = new JButton("New Button");
        constraints.gridx = 0; // Location on grid
        constraints.gridy = 3; // Location on grid
        constraints.gridwidth = 2; // How many grids the width will consume
        constraints.gridheight = 1; // How many grids the length will consume
        constraints.weightx = 1.0; // for resizing
        constraints.weighty = 1.0; // for resizing
        constraints.anchor = GridBagConstraints.SOUTHWEST; // Where it will be anchored
        constraints.ipadx = 20; // Internal padding
        constraints.ipady = 20; // Inernal padding
        constraints.insets = new Insets(50,50,50,50);
        testPanel.add(testButton, constraints);

        anotherButton = new JButton("another Button");
        constraints.gridx = 0; // Location on grid
        constraints.gridy = 3; // Location on grid
        constraints.gridwidth = 2; // How many grids the width will consume
        constraints.gridheight = 1; // How many grids the length will consume
        constraints.weightx = 1.0; // for resizing
        constraints.weighty = 1.0; // for resizing
        constraints.anchor = GridBagConstraints.SOUTHWEST; // Where it will be anchored
        constraints.ipadx = 20; // Internal padding
        constraints.ipady = 20; // Inernal padding
        constraints.insets = new Insets(50, 50, 120, 80);
        testPanel.add(anotherButton, constraints);
    }
} 
```

我使用 GridBagLayout 是因为我多次被告知不要使用空布局。但是，如果有人知道使用空布局的方法，请分享。为了更清楚一点，如果我将所有这些代码都作为容器类中的一个方法，那么所有这些代码都可以工作，但我不希望这样。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:19:38.883

问题出在你的`testFrame`课上。它**延伸** `JPanel`并在里面你拿了另一个`JPanel`没有必要的东西。如果非要取，就得把它加到构造函数末尾的`testFrame`using语句`add(testPanel);`中`testFrame`。

**类名应以大写字母开头**。我建议将您的课程重命名为`TestFrame`而不是`testFrame`.

```
public class testFrame extends JPanel {
    private JButton testButton, anotherButton;

    public testFrame() {
        setLayout(new GridBagLayout());
        GridBagConstraints constraints = new GridBagConstraints();

        testButton = new JButton("New Button");
        constraints.gridx = 0; // Location on grid
        constraints.gridy = 3; // Location on grid
        constraints.gridwidth = 2; // How many grids the width will consume
        constraints.gridheight = 1; // How many grids the length will consume
        constraints.weightx = 1.0; // for resizing
        constraints.weighty = 1.0; // for resizing
        constraints.anchor = GridBagConstraints.SOUTHWEST; // Where it will be anchored
        constraints.ipadx = 20; // Internal padding
        constraints.ipady = 20; // Inernal padding
        constraints.insets = new Insets(50,50,50,50);
        add(testButton, constraints);

        anotherButton = new JButton("another Button");
        constraints.gridx = 0; // Location on grid
        constraints.gridy = 3; // Location on grid
        constraints.gridwidth = 2; // How many grids the width will consume
        constraints.gridheight = 1; // How many grids the length will consume
        constraints.weightx = 1.0; // for resizing
        constraints.weighty = 1.0; // for resizing
        constraints.anchor = GridBagConstraints.SOUTHWEST; // Where it will be anchored
        constraints.ipadx = 20; // Internal padding
        constraints.ipady = 20; // Inernal padding
        constraints.insets = new Insets(50, 50, 120, 80);
        add(anotherButton, constraints);
    }
} 
```

在 中`MainFrame`，使用

`getContentPane().add([testFrame object]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:34:36.863

同意 Ravindra，直接使用 JFrame.getContentPane() 是最佳实践。您可能应该做的另一件事是给 ContentPane 一个明确的布局（类似于您对 JPanel 所做的）。就像是：

```
mainContainer.getContentPane().setLayout(new BorderLayout());
mainContainer.getContentPane().add(yourPanel, BorderLayout.CENTER); 
```

你可以选择任何你想要的布局，但我经常为我的主框架选择 BorderLayout，因为 CENTER 区域是“贪婪的”（无论你放在哪里都会自动尝试填充空间），这通常是所需的行为。

其他可能有帮助的事情包括使用`fill`GridBagConstraints 中的属性来通知它尝试填充您的整个面板区域，并覆盖您的面板`getPreferredSize()`以给您的布局提供大小提示。

# mysql - codeigniter，标准html与表单助手中的utf8（希腊）字符输出的差异

> ID：15445819
> 
> 赞同：2
> 
> 时间：2013-03-16T05:09:39.183
> 
> 标签：mysql, codeigniter, encoding, codeigniter-form-helper

这：

```
<td><?php echo form_input('post_title',set_value('post_title',$post->post_title)); ?></td> 
```

将在页面上显示希腊字符（或拉丁字符以外的任何字符），如 &#xxx。

这：

```
<p>Title: <input name="post_title" type="text" value="<?php echo $post->post_title ?>"/></p> 
```

会正确显示。

![网页](../Images/639e1840aec2491166f498d55a63776b.png)

我的 MySQL 类型是 MyISAM 和 utf8_latin_ci 排序规则。

尝试从 phpMyAdmin 浏览也给了我 &#xxx 中的希腊语...

![phpMyAdmin](../Images/22ef04eae656ac99e07cb3bdb54ed120.png)

错误在哪里？

PS来自codeigniter手册关于表单帮助方法

> 并且将始终根据配置文件中的字符集值添加属性 accept-charset。

我的配置文件设置为

```
$config['charset'] = 'UTF-8'; 
```

更新：我的页眉：

```
GET /posts/editpost/23 HTTP/1.1
Host: my.xxx.com
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Referer: http://my.xxx.com/posts
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:37:41.383

这是字符集的一般问题。请在每个地方保持相同的字符集编码，例如 HTML 文件、CI 配置文件和数据库中最重要的地方。在创建数据库时，选择 UTF-8 或任何其他适合您的语言（对于大多数语言 UTF-8 有效）。或者您也可以为单个表格更改它。请进行这些更改，您将获得正确的希腊语版本。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:51:45.727

尝试使用这三个 Text 辅助函数：

```
ascii_to_entities() 
```

或者

```
entities_to_ascii() 
```

或者

```
convert_accented_characters() 
```

取决于您如何将其保存在数据库中

它们来自 CI 的 **文本助手**：

[http://ellislab.com/codeigniter/user-guide/helpers/text_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/text_helper.html)

并且**不要忘记加载这个助手**;）

# android - Android中的字符集检测

> ID：15445820
> 
> 赞同：3
> 
> 时间：2013-03-16T05:09:46.840
> 
> 标签：android, character-encoding, metadata

我的 Android 应用程序检索 SHOUTcast 元数据并显示它。我遇到了非英语字符集的问题。基本上，元数据显示为乱码。我将如何执行字符编码检测并正确显示文本？抱歉，如果这是一个重要的问题，我对这个话题并不精通。

有问题的流是：[http ://skully.hopto.org:8000](http://skully.hopto.org:8000)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T23:25:16.260

正如*vorrtex*在上面的评论中指出的那样，如果您的数据来自格式良好的 HTML 代码，您可以从标签中知道它的编码`<meta content="...">`，这是最好的情况。您可以使用以下代码将其转换为 Android（或其他 Java 实现）字符串：

```
// assume you have your input data as byte array buf, and encoding
// something like "windows-1252", "UTF-8" or whatever
String str = new String(buf, encoding);
// now your string will display correctly 
```

如果你不知道编码——你收到的数据是未知格式的原始文本——你仍然可以使用统计语言模型尝试算法来猜测它。我刚刚在[http://site.icu-project.org/上找到了 IBM 的](http://site.icu-project.org/)*ICU - International Components for Unicode*项目，具有自由开源许可（商业用途可以）

它们提供 Java 和 C++ 库。我刚刚添加了他们的 Java JAR 版本。51.2 到我的 Android 项目，它就像一个魅力。我用来从文本文件中识别字符编码的代码是：

```
public static String readFileAsStringGuessEncoding(String filePath)
{
    String s = null;
    try {
        File file = new File(filePath);
        byte [] fileData = new byte[(int)file.length()];
        DataInputStream dis = new DataInputStream(new FileInputStream(file));
        dis.readFully(fileData);
        dis.close();

        CharsetMatch match = new CharsetDetector().setText(fileData).detect();

        if (match != null) try {
            Lt.d("For file: " + filePath + " guessed enc: " + match.getName() + " conf: " + match.getConfidence());
            s = new String(fileData, match.getName());
        } catch (UnsupportedEncodingException ue) {
            s = null;
        }
        if (s == null)
            s = new String(fileData);
    } catch (Exception e) {
        Lt.e("Exception in readFileAsStringGuessEncoding(): " + e);
        e.printStackTrace();
    }
    return s;
} 
```

*上面的Lt.d*和*Lt.e*只是我对*Log.d(TAG, "blah...")*的快捷方式。在我能想出的所有测试文件上工作得很好。我只是有点担心 APK 文件的大小——icu4j-51_2.jar 超过 9 MB 长，而我的整个包在添加之前只有 2.5 MB。但是很容易隔离 CharsetDetector 及其依赖项，所以我最终添加的大小不超过 50 kB。我需要从 ICU 源复制到我的项目的 Java 类都在 core/src/com/ibm/icu/text 目录下，并且是：

```
CharsetDetector
CharsetMatch
CharsetRecog_2022
CharsetRecog_mbcs
CharsetRecog_sbcs
CharsetRecog_Unicode
CharsetRecog_UTF8
CharsetRecognizer 
```

此外，在 CharsetRecog_sbcs.java 中有一个受保护的“ArabicShaping as;” 成员，它想拉更多的类，但事实证明它不需要字符集识别，所以我把它注释掉了。就这样。希望能帮助到你。

格雷格

# c# - 如何使用 iTextSharp 从 PDF 中检测换行符

> ID：15445823
> 
> 赞同：0
> 
> 时间：2013-03-16T05:10:29.747
> 
> 标签：c#, itextsharp

我已经用于`getbaseline[vector.I2]`计算下标和上标。通过这样做，我无法从 PDF 中提取换行符。您能否向我建议如何使用 iTextSharp 从 PDF 中获取换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:28:12.773

您提供的代码并不完全不言自明。因此，我做了一些假设，首先您的代码是实现`RenderText(TextRenderInfo)`方法的一些摘录`RenderListener`，可能是`SimpleTextExtractionStrategy`添加了成员​​变量`lastBaseLine`、`firstcharacter_baseline`、`lastFontSize`和`lastFont`.

这意味着您似乎只对内容流中以阅读顺序出现文本的文档感兴趣；否则您将基于您的代码`LocationTextExtractionStrategy`或类似的基本算法。

此外，我不理解您的某些`if`陈述要么总是错误的，要么总是正确的，或者代码体为空。也不清楚什么`text_second`是好的，或者为什么你`difference = curBaseline[Vector.I2] - curBaseline[Vector.I2]`在一个地方计算。

说了这么多，你最初的`if`陈述似乎是在测试新文本的垂直基线位置是否与之前的文本不同。因此，您还可以在此处发现新行的开始。

我建议您不仅开始存储最后一个基线，而且还存储最后一个下降线，根据文档，它是*代表当前字体字符串可能具有的最底部范围的线，*并将其与当前字体进行比较上升线（由文档*表示当前字体的字符串可能具有的最高范围的线*）。

如果当前文本的上升线低于上一个文本的下降线，这应该意味着我们有一个新行，它对于下标来说太低了。因此，在代码中：

```
[...]
else if (curBaseline[Vector.I2] < lastBaseLine[Vector.I2])
{
    if (curAscentLine[Vector.I2] < lastDescentLine[Vector.I2])
    {
        firstcharacter_baseline = character_baseline;
        this.result.Append("<br/>");
    }
    else
    {
        difference = firstcharacter_baseline - curBaseline[Vector.I2];
        text_second.SetTextRise(difference);

        if (difference == 0)
        {
        }
        else
        {
            SupSubFlag = 2;
        }
    }
}
[...] 
```

`Vector.I1`由于您期望内容流中的文本按阅读顺序出现，您也可以通过比较最后一个文本的基线结束点和新文本的基线开始点的坐标来尝试识别新行. 如果新的比旧的少一个相关的数量，这看起来像一个回车提示一个新的行。

当然，代码在多种情况下会遇到麻烦：

*   每当您对内容流中的文本按阅读顺序出现的期望没有得到满足时，您就会到处都是垃圾。

*   当您有多列文本时，上面的测试不会捕获一列底部和下一列顶部之间的换行符。为了也抓住这一点，您可能想要检查（类似于建议的检查是否向下跳线）新文本是否在最后一个文本之上，将最后一个上升线与新下降线进行比较。

*   如果您获得的 PDF 文本包含非常密集的文本，则行可能会与周围行的上标和下标重叠。在这种情况下，您将不得不微调比较。但是在这里，您有时肯定会遇到错误检测到的中断。

*   如果你得到带有旋转文本的 PDF，你会得到 garbabr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:46:38.547

您可以使用

```
Document.Add(new Phrase(Environment.NewLine)); 
```

或者

```
 // add line below title
  LineSeparator line = new LineSeparator(1f, 100f, BaseColor.BLACK, Element.ALIGN_CENTER, -1);
  document.Add(new Chunk(line)); 
```

# php - php jquery 致命错误：require()：需要打开失败

> ID：15445826
> 
> 赞同：1
> 
> 时间：2013-03-16T05:11:00.290
> 
> 标签：php, jquery, ajax, class

我想使用基于 groupId 的数据库创建网格。目前，我所有的东西都在调用同一个查询。我的问题是当我选择一个组并用于`jQuery`发布到我的`Gateway.php`文件时。我创建了一个`psuedo-MVC`设置。我在 Controller、Models 和 Views 中分离了 3 个目录。从这个 php 文件中，我不断收到这些错误消息：

> 警告：require(Membership/Controllers/Members.php)：无法打开流：第 11 行的 H:\xampp\htdocs\HelloWorld\Membership\Includes\Gateway.php 中没有这样的文件或目录
> 
> 致命错误：require()：在 H:\xampp\htdocs\HelloWorld\Membership\Includes\Gateway 中打开所需的 'Membership/Controllers/Members.php' (include_path='.;H:\xampp\php\PEAR') 失败.php 在第 11 行

所以，我尝试了几件事。一，我将调用移至 index.php 并且效果很好。但是从`jQuery`电话中，它给了我错误。

我创建了另一个带有函数的 php 文件。我从模型和视图中移动了我的代码。我让它返回带有结果的表格的 html。有用。

`jQuery`有人可以指出一个对类函数进行 ajax 调用的示例吗？或者给点方向。

* * *

成员.js

```
var Members = {
Display: function(groupId) {
    var pData = {
        action: 'GetMembers',
        groupId: groupId 
    };
    $("#crGroups").empty();
    $("#crGroups").append("Getting Members..." );  
    $.ajax({
        url: "Membership/Includes/Gateway.php",  
        type: "POST",        
        data: pData,     
        cache: false,
        success: function (data, status, xhr) {
            try {
                var members = $.parseJSON(data);
                if (members !== undefined) {
                    $("#crGroups").empty();
                    $("#crGroups").append(members.html);       
                } else {
                    $("#crGroups").empty();
                    $("#crGroups").append(data);                   
                } 
            } catch (err){
               $("#crGroups").empty();
               $("#crGroups").append(data + "<br><br>Error description: " + err.message);                   
            }
        }       
    }); 
} 
```

}

网关.php

```
<?php

$action = $_POST['action'];
$groupId = $_POST['groupId'];

$data = array();

// Gateway for processing
switch($action)  {
    case 'GetMembers' :   
        require  'Membership/Controllers/Members.php';
        $member = new MembersController();
        //include 'Members.php';
        $data["status"] = "success";
        $data["html"] = $member->GetMembers();
        //$data["html"] = getMembers();
        break;
    case 'AddMember' : 
        $page = 'Add Member'; 
        break;
    case 'page3' : 
        $data["status"] = "success"; 
        break;
    case 'page4' : 
        $data["status"] = "success"; 
        break;
    default :
        $data["status"] = "failure";
}

echo json_encode($data);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:40:18.300

只是改变

```
require  'Membership/Controllers/Members.php'; 
```

到

```
require  $_SERVER['DOCUMENT_ROOT'].'HelloWorld/Membership/Controllers/Members.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:49:46.613

谢谢两位的建议。有效。我确实把它放在我的其他文件中，但它解决了这个问题。我想我将定义我可以在所有文件中使用的位置，并更改一次。再次感谢。

# java - ensureCapacity 无法识别

> ID：15445827
> 
> 赞同：3
> 
> 时间：2013-03-16T05:11:18.407
> 
> 标签：java, list

```
import java.util.*;
class A{
    public static void main(String[] args){
    }
    private List <B> bList;
    private Random generator = new Random();
    A(List<B> initialList){
        bList = new ArrayList<B> ();
        int listSize = initialList.size();
        bList.ensureCapacity(listSize);
             for (B b : initialList) {
             int bIndex = generator.nextInt(listSize);
             bList.add(bIndex , b);
        }
    }
}
class B{
} 
```

我一直在阅读错误

> 线程“主”java.lang.RuntimeException 中的异常：无法编译的源代码 - 错误的符号类型：java.util.List.ensureCapacity

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:12:47.770

ensureCapacity 不是 List 类型的方法。

是的，它是 ArrayList 的一个方法，但是引用 bList 是一个 List，您应该将其转换为 ArrayList 以使用该方法，如下所示：

```
((ArrayList<B>) bList).ensureCapacity(listSize);
         for (B b : initialList) {
         int bIndex = generator.nextInt(listSize);
         bList.add(bIndex , b);
    } 
```

顺便说一句，在我的整个程序生命周期中，我从未直接调用 ArrayList 的方法 ensureCapacity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:48:42.270

IDE 总是很好，如果您使用任何 IDE 进行编程，时间是宝贵`bList.ensureCapacity(listSize);`的`ensureCapacity(int)`界面。

```
The method ensureCapacity(int) is undefined for the type List<B> 
```

所以`ensureCapacity(int)`方法在List接口的实现中是可用的，即ArrayList，将你的这条线（bList）`bList.ensureCapacity(listSize)`转换为`((ArrayList<B>) bList).ensureCapacity(listSize);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T05:19:45.437

`List<T>`是一个接口，但它不包含`ensureCapacity`. 这在`ArrayList`and `LinkedList<T>`- 中可用，因此您必须将 to 强制`bList`转换`ArrayList`为 call `ensureCapacity`。

```
((ArrayList<B>) bList).ensureCapacity(listSize); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T06:23:15.653

如果要在 List 上调用 ensureCapacity，则应将其声明为 ArrayList 而不是 List。

一般来说，如果可以避免，则永远不应该进行铸造。您应该将变量声明为尽可能通用，而无需求助于强制转换。这并不总是可能的，但在这种特殊情况下，没有理由不这样做。

# c - 平方根近似 (C)

> ID：15445828
> 
> 赞同：-2
> 
> 时间：2013-03-16T05:11:23.037
> 
> 标签：c

```
float squareRoot(float value, float error){

    float estimate;
    float quotient;
    estimate = 1;
    float difference = abs(value - estimate * estimate);
        while (difference > error){
            quotient = value/estimate;
            estimate = (estimate + quotient)/2;
            difference = abs(value - estimate * estimate);
        }
        return difference;
} 
```

我的函数无法编译，因为它在主函数中一直说“x 未声明”（无法修改），我做错了什么？

```
int main(){
  printf("\nsquare root test 1: enter a number\n");
  scanf("%f",&x);
  printf("root(%.2f) = %.4f\n", x, squareRoot(x, .001));

  getchar();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:12:59.127

首先声明 x 以在主函数中使用它

```
float x; 
```

像这样在范围内，或者您可以全局声明

```
int main(){
  float x;
  printf("\nsquare root test 1: enter a number\n");
  scanf("%f",&x);
  printf("root(%.2f) = %.4f\n", x, squareRoot(x, .001));

  getchar();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T07:56:47.950

如果 x 不能在主函数中声明，则在全局范围内声明，

```
float x;

int main( ) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T08:02:01.670

```
int main(){
  float x ; /* You missed this :-D */
  printf("\nsquare root test 1: enter a number\n");
  scanf("%f",&x);
  printf("root(%.2f) = %.4f\n", x, squareRoot(x, .001));

  getchar();
  return 0;
} 
```

# javascript - 向左滑动内容横幅

> ID：15445830
> 
> 赞同：-4
> 
> 时间：2013-03-16T05:11:54.297
> 
> 标签：javascript, jquery, slider

我想创建一个翻转内容横幅。我设法找到一个与我想要的几乎相似但仍然有我想要的东西。是否可以在没有播放按钮的情况下使其自动播放，并且在到达最后一张幻灯片时保持向左滑动的效果回到第一张。有没有人可以帮忙？我 [http://jsfiddle.net/4q3GZ/342/](http://jsfiddle.net/4q3GZ/342/)

```
$(document).ready(function () {
    var height = 300,
        width = 600,
        tabs = 3,
        $tabs = $('.tab'),
        contentNum = 1,
        delay = 2000, // time in milliseconds to pause between tabs
        timer;
    $('.play').click(function () {
        var $t = $(this);
        if($t.hasClass('playing')) {
            // stop
            clearTimeout(timer);
            $t.removeClass('playing').html('play');
        } else {
            // play
            timer = setInterval(function () {
                contentNum++; // change to contentNum--; to go left
                if(contentNum > tabs) {
                    contentNum = 1;
                } // loop right
                if(contentNum < 1) {
                    contentNum = tabs;
                } // loop left
                $tabs.eq(contentNum - 1).find('a').trigger('click');
            }, delay);
            $t.addClass('playing').html('stop');
        }
    });
    $('.main_inner').css({
        width: tabs * width
    });
    $('a.tab_link').click(function () {
        $tabs.filter('.active').removeClass('active');
        $(this).parent().addClass('active');
        // make sure contentNum is a number and not a string
        contentNum = parseInt($(this).attr('rel'), 10);
        $('.main_inner').animate({
            marginLeft: '-' + (width * contentNum - width)
        }, 600);
        return false;
    });
    $('.previous a').click(function () {
        if(contentNum > 1) {
            // find previous tab, trigger a click on the link
            // subtract 2 because eq() uses zero based index
            $tabs.eq(contentNum - 2).find('a').trigger('click');
        }
        return false;
    });
    $('.next a').click(function () {
        if(contentNum < tabs) {
            // find next tab, trigger a click on the link
            // contentNum doesn't need + 1 because it is +1 relative to eq()
            // which is a zero based index
            $tabs.eq(contentNum).find('a').trigger('click');
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:16:47.100

该`#play`按钮有一个事件侦听器，该侦听器与开始内容滑动过程的匿名函数相关联。将该匿名函数移出一个命名函数，并在页面完成加载后调用它。

**但是**，最好不要依赖这些预打包的解决方案，而是努力*了解*代码的工作原理。帮自己一个忙，学习如何在没有谷歌搜索脚本复制和粘贴的帮助下做到这一点。**仅**使用在线示例作为参考。

# c - 在 main() 和用户定义的函数中初始化结构有什么区别？

> ID：15445832
> 
> 赞同：1
> 
> 时间：2013-03-16T05:12:06.683
> 
> 标签：c

伙计们。我是C语言的新手，今天我遇到了一个问题。我希望你们帮助我摆脱困境。

```
struct node {
    int a;
};
void
init_structure(struct node *c)
{
    c=(struct node *)malloc(sizeof(struct node));
    c->a=1;
}
int main(){
    struct node *ss;
    init_structure(ss);
    printf("%d\n",ss->a);
} 
```

我用 gcc 编译这段代码，并且没有报告错误。但是我运行 ./a.out 后的答案是**11873660**（我猜它可能是一个地址号），而不是我想要的 **1 。**
我在网上等。
谢谢各位大佬：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T05:14:05.343

`init_structure`正在分配和初始化结构就好了，但是在 C 中，参数是按值传递的（而不是通过引用），所以虽然`c`改变了，`ss`但不会随之改变。您可以改为使用返回值返回`c`和分配：`ss`

```
struct node *init_structure(void)
{
    struct node *c=(struct node *)malloc(sizeof(struct node));
    c->a=1;
    return c;
}
int main(void){
    struct node *ss;
    ss = init_structure();
    printf("%d\n",ss->a);
} 
```

另一种可以实现的方法是添加另一个间接级别：

```
void init_structure(struct node **c)
{
    **c=(struct node *)malloc(sizeof(struct node));
    (*c)->a=1;
}
int main(void){
    struct node *ss;
    init_structure(&ss);
    printf("%d\n",ss->a);
} 
```

这也有效，但当然更麻烦。

# java - 如何使用 ListView 数组调用 Activity

> ID：15445833
> 
> 赞同：0
> 
> 时间：2013-03-16T05:12:39.980
> 
> 标签：java, android

我正在使用 Sherlock 片段制作动作栏。我在操作栏中有 ListView，但我的 listview 可以调用活动..请帮助我谢谢.. :)

在这段代码中有一个使用数组列表的列表视图。我想 mylist 可以调用相同的活动。

所以它可以喜欢操作栏中的菜单。当我们点击列表视图时..他可以打电话给活动谢谢..请帮助我！

```
package iqbal.apps.visitkuningan;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleAdapter;

import com.actionbarsherlock.app.SherlockListFragment;

public class AppleFragment extends SherlockListFragment{

    /** An array of items to display*/
    String apple_versions[] = new String[]{
            "Mountain Lion",
            "Lion",
            "Snow Leopard",
            "Leopard",
            "Tiger",
            "Panther"
    };

    /** An array of images to display*/
    int apple_images[] = new int[]{
            R.drawable.mountainlion,
            R.drawable.lion,
            R.drawable.snowleopard,
            R.drawable.leopard,
            R.drawable.tiger,
            R.drawable.panther
    };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

        // Each row in the list stores country name, currency and flag
        List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();

        for(int i=0;i<5;i++){
                HashMap<String, String> hm = new HashMap<String,String>();
            hm.put("txt", apple_versions[i]);
            hm.put("img", Integer.toString(apple_images[i]  ) );
            aList.add(hm);
        }

        // Keys used in Hashmap
        String[] from = { "img","txt" };

        // Ids of views in listview_layout
        int[] to = { R.id.img,R.id.txt};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
        SimpleAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), aList, R.layout.listview_layout, from, to);

        // Setting the adapter to the listView
        setListAdapter(adapter);

        return super.onCreateView(inflater, container, savedInstanceState);
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:05:07.253

您需要在列表视图上使用 setOnItemClickListener()

```
 listview.setOnItemClickListener(new OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> arg0,View arg1, int position, long arg3) {
    Intent n = null; 
    switch (position){
       case 0: 
         n = new Intent(getActivity(), Class0.class);
         break;
       case 1: 
         n = new Intent(getActivity(), Class1.class);
         break;
    }
    if(null!=n)
      startActivity(n);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:25:46.700

ActionBar 中的列表导航不需要 ListFragment（或您的情况下的 SherlockListFragment）。您的代码正在为作为 Activity*内容*的 ListView 设置适配器。您想要的是设置ActionBar 的导航模式并为ActionBar 提供适配器。在您的 onCreate 中：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
actionBar.setListNavigationCallbacks(adapter, navigationListener); 
```

`adapter`是一个`SpinnerAdapter`实现。navigationListener 是一个`ActionBar.OnNavigationListener`实现。当用户从 ActionBar 的下拉列表中按下一个项目时，您的 navigationListener`onNavigationItemSelected`方法会被调用并传入所选项目的位置和 id。在该回调中，您可以实现启动另一个活动。

请参阅[ActionBar](https://developer.android.com/reference/android/app/ActionBar.html)和[ActionBar.OnNavigationListener](https://developer.android.com/reference/android/app/ActionBar.OnNavigationListener.html) -- ActionBarSherlock 反映了标准的 Android ActionBar API。

# java - 如何有两个不同的命令行输入？

> ID：15445836
> 
> 赞同：1
> 
> 时间：2013-03-16T05:12:58.460
> 
> 标签：java, command-line

使用命令行参数时，我对 java 很陌生。

我想知道如何同时接受文件输入和另一个字符串参数。

如

```
java myprogram thanks.txt forhelp

    if(args.length < 1) {
        System.out.println("Error, usage: java ClassName inputfile");
    System.exit(1);
    }

    Scanner in = new Scanner(new FileInputStream(args[0]));
    String s = in.next(); 
```

目前是我所拥有的，但我似乎只能让输入文件传入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:21:03.233

看一下代码：

```
 public static void main(String[] args){
     String file = args[0];
     String stringArg = args[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:22:17.057

命令行参数是`String`s。

字符串可以是文件名、端口号等——甚至是字符串。

它仅取决于您如何解析命令行参数。

```
import java.io.*;

public class Norder {
    public static void main(String[] args ){
        if(args.length < 2) {
                   return;
                }else{
                   String filename = args[0]; //the first is always a filename
                   String str = args[1]; //the second argument is always a string
                   BufferedReader reader = new BufferedReader(new FileReader(filename));
                   //do something with the reader object
                   br.close();
                }             
        }
} 
```

# split - MIPS；如何获取数字中的数字组？

> ID：15445839
> 
> 赞同：0
> 
> 时间：2013-03-16T05:13:17.213
> 
> 标签：split, numbers, mips

我试图找出一种从 MIPS 中的数字中获取数字组的方法。我的意思是，假设我的十六进制值为 0x123456789ABCDEF0，我试图一次加载 2 个组。例如；首先用值 12 加载 $t0，然后执行一些操作，然后是 34，然后是 56，然后是 78 等等，直到 F0。

所以，第一个问题是，假设整个值的大小是 64 位，每个组是 8 位，我应该在 .data 段中声明什么，因为它是十六进制的？

其次，我如何从十六进制值中获取 2 组？

亲切的问候

# c - C：尝试初始化结构中的字符数组时，分配错误中的类型不兼容

> ID：15445842
> 
> 赞同：-1
> 
> 时间：2013-03-16T05:14:01.177
> 
> 标签：c, arrays, structure, initializing

我正在尝试为有关结构的分配创建一个程序。这个想法是创建一个包含名字和姓氏、电话号码和电子邮件地址的变量的结构。我认为我的大部分代码都还可以——与 C 的现代编码标准相比，这可能是基本的，但这是我在课堂上的位置。

无论如何，我在尝试初始化电子邮件地址字段的 5 行中遇到编译错误，指出分配中的类型不兼容。但是，我在名字或姓氏字段上没有收到这些错误，我不明白为什么。

非常感谢您对为什么会发生这种情况的任何想法或程序其余部分的错误！在修复此编译错误之前，我无法真正调试其余部分，所以我不确定还有什么问题。

```
#include <stdio.h>
#include <string.h>

/*****************************************
Structure declaration, creating type cont
*****************************************/

typedef struct contact {
  char fname[20];
  char lname[20];
  int number[10];
  char email[30];
} cont;

/*****************************************
Start of main function
*****************************************/
int main() {

int iMenu; //variable required for the menu
int iStorage; //variable used to store array entry chosen by the user
int iEntry1, iEntry2, iEntry3, iEntry4, iEntry5 = 0; //variables used for flagging assigned entries
/*******************************************
because of the typedef declaration, the struct command 
isn't necessary in creating an instance of the structure.
*******************************************/
cont myContact[4]; 

/*******************************************
we initialize the arrays contained within the structures
*******************************************/

  strcpy(myContact[0].fname, "\0");
  strcpy(myContact[0].lname, "\0");
  myContact[0].number = 0;
  strcpy(myContact[0].email, "\0");
  strcpy(myContact[1].fname, "\0");
  strcpy(myContact[1].lname, "\0");
  myContact[1].number = 0;
  strcpy(myContact[1].email, "\0");
  strcpy(myContact[2].fname, "\0");
  strcpy(myContact[2].lname, "\0");
  myContact[2].number = 0;
  strcpy(myContact[2].email, "\0");
  strcpy(myContact[3].fname, "\0");
  strcpy(myContact[3].lname, "\0");
  myContact[3].number = 0;
  strcpy(myContact[3].email, "\0");
  strcpy(myContact[4].fname, "\0");
  strcpy(myContact[4].lname, "\0");
  myContact[4].number = 0;
  strcpy(myContact[4].email, "\0");

/*****************************************
Creation of the menu to allow the users
to add entries or view them
*****************************************/
while (iMenu != 3) {
printf("Please select one of the following menu options: \n");
printf("\n1\. Input new entries into the phonebook");
printf("\n2\. View entries stored in the phonebook");
printf("\n3\. Exit the Program\n");
scanf("%d", &iMenu);

/*******************************************
First menu option allows the selection of which
entry, and the storage of phonebook data
********************************************/
  if (iMenu == 1) {
    printf("Please input the entry in the phonebook you wish to change (0-4): \n");
    scanf("%d", iStorage);
    printf("Please input the first name of your new contact: \n");
    scanf("%s", myContact[iStorage].fname);
    printf("Please input the last name of your new contact: \n");
    scanf("%s", myContact[iStorage].lname);
    printf("Please input the phone number of your new contact: \n");
    scanf("%d", myContact[iStorage].number);
    printf("Please input the e-mail address of your new contact: \n");
    scanf("%s", myContact[iStorage].email);

    /**************************************
    Nested if statement sets the variable to
    flag if an entry has been made
    **************************************/
    if (iStorage == 0)
      iEntry1 = 1;
    else if (iStorage == 1)
      iEntry2 = 1;
    else if (iStorage == 2)
      iEntry3 = 1;
    else if (iStorage == 3)
      iEntry4 = 1;
    else if (iStorage == 4)
      iEntry5 = 1;
  }

  /***************************************
  Menu option 2 allows the user to display
  stored phonebook entries, using the iEntry
  variables as flags to determine which ones
  to display
  ***************************************/
  else if (iMenu == 2) {
    if (iEntry1 == 1)
      printf("%s %s phone number: %d e-mail address: %s", myContact[0].fname, myContact[0].lname, myContact[0].number, myContact[0].email);
    if (iEntry2 == 1)
      printf("%s %s phone number: %d e-mail address: %s", myContact[1].fname, myContact[1].lname, myContact[1].number, myContact[1].email);
    if (iEntry3 == 1)
      printf("%s %s phone number: %d e-mail address: %s", myContact[2].fname, myContact[2].lname, myContact[2].number, myContact[2].email);
    if (iEntry4 == 1)
      printf("%s %s phone number: %d e-mail address: %s", myContact[3].fname, myContact[3].lname, myContact[3].number, myContact[3].email);
    if (iEntry5 == 1)
      printf("%s %s phone number: %d e-mail address: %s", myContact[4].fname, myContact[4].lname, myContact[4].number, myContact[4].email);
  }
  else if (iMenu > 3) {
    printf("Invalid Entry.");
  }
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T05:26:48.837

您的编译器几乎肯定会抱怨这些行：

```
myContact[0].number = 0;
myContact[1].number = 0;
... 
```

*不是*这些：

```
strcpy(myContact[0].email, "\0");
strcpy(myContact[1].email, "\0");
... 
```

`struct contact`将其`number`字段声明为 type `int[10]`，但您试图为其分配一个`int`。

其他不请自来的建议：

`myContact`您可以更简单地初始化您的数组：

```
cont myContact[4] = { { { 0 } } }; 
```

当您初始化聚合类型的一部分（例如数组， a `struct`）时，编译器将自动对其所有剩余成员进行零初始化。例如，如果您有：

```
char s[100] = "hello"; 
```

那么前五个字节`s`将为`'h'`, `'e'`, `'l'`, `'l'`, `'o'`, 其余 95 个字节中的每一个都将具有值 0。

```
int iEntry1, iEntry2, iEntry3, iEntry4, iEntry5 = 0; 
```

这仅初始化`iEntry5 = 0`. `iEntry1`..`iEntry4`未初始化，这可能不是您想要的。

打印输入提示时，[您应该调用`fflush(stdout)`after](http://c-faq.com/stdio/fflush.html)。

另外，不要使用`scanf`. [它容易出错并且难以正确使用。](http://c-faq.com/stdio/scanfprobs.html)您特别需要关注缓冲区溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:26:37.310

每个联系人都有十个号码（`int number[10]`，从 0 到 9），您正在分配，就好像它很简单`int number`：

`myContact[0].number = 0;`

另外，不要这样做： `strcpy(myContact[0].fname, "\0");`

您可能想要“”，而不是“\0”，因为字符串末尾总是有一个隐含的 \0。

（我希望 fname 和 lname 只是作为练习。世界上许多人的名字不符合“名字 - 姓氏”范式）

# java - 立即选择微调器后禁用编辑文本

> ID：15445851
> 
> 赞同：0
> 
> 时间：2013-03-16T05:16:34.843
> 
> 标签：java, android

我正在制作一个计算器，并且我添加了一个新的运算符 1/x 来反转数字。当用户从微调器中选择此运算符时，应立即禁用第二个编辑文本，但我不知道如何执行此操作。请帮我！这是我的代码 -

**activity_main.xml**

```
android:layout_width="fill_parent"

android:layout_height="fill_parent"

android:orientation="vertical" >

<EditText

    android:id="@+id/edtNumber1"

    android:layout_width="fill_parent"

    android:layout_height="wrap_content"

    android:inputType="numberDecimal"

    android:hint="@string/hntNumber1"
/>

<Spinner

    android:id="@+id/sprOperator"

    android:layout_width="fill_parent"

    android:layout_height="wrap_content"

    android:entries="@array/sprItems"
/>

<EditText

    android:id="@+id/edtNumber2"

    android:layout_width="fill_parent"

    android:layout_height="wrap_content"

    android:inputType="numberDecimal"

    android:hint="@string/hntNumber2"
/>
<Button
    android:id="@+id/btnResult"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/lblBtnResult"
/>
<EditText
    android:id="@+id/edtResult"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="numberDecimal"

/>

<Button
    android:id="@+id/buttonAlert"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="EXIT"
     />

</LinearLayout> 
```

**MainActivity.java**

```
package com.example.my_cal;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

final Context context = this;

private Button button;

/** Called when the activity is first created. */

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    // Defining onclick listener for finding the result

    OnClickListener listener = new OnClickListener() {

       @Override

       public void onClick(View v) {

            Spinner spr = (Spinner) findViewById(R.id.sprOperator);

            EditText edtNumber1 = ( EditText) findViewById(R.id.edtNumber1);

            EditText edtNumber2 = ( EditText) findViewById(R.id.edtNumber2);

            EditText edtResult = ( EditText) findViewById(R.id.edtResult);

            String selectedItem = (String) spr.getSelectedItem();

            if(selectedItem.trim().equals("+")){

                float result = Float.parseFloat(edtNumber1.getText().toString())  + Float.parseFloat(edtNumber2.getText().toString());

edtResult.setText(Float.toString(result));

            }else if(selectedItem.trim().equals("-")){

                float result = Float.parseFloat(edtNumber1.getText().toString())  - Float.parseFloat(edtNumber2.getText().toString());

                edtResult.setText(Float.toString(result));

            }else if(selectedItem.trim().equals("x")){

                float result = Float.parseFloat(edtNumber1.getText().toString())  * Float.parseFloat(edtNumber2.getText().toString());

                edtResult.setText(Float.toString(result));

            }else if(selectedItem.trim().equals("/")){

                float result = Float.parseFloat(edtNumber1.getText().toString())  / Float.parseFloat(edtNumber2.getText().toString());

                edtResult.setText(Float.toString(result));

            }

            else if(selectedItem.trim().equals("1/x")){

float result = 1  / Float.parseFloat(edtNumber1.getText().toString());

                edtResult.setText(Float.toString(result));
            }
       }

    };

    button = (Button) findViewById(R.id.buttonAlert);

    // add button listener

    button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            context);

        // set title
        alertDialogBuilder.setTitle("Your Title");

        // set dialog message
        alertDialogBuilder

            .setMessage("Click yes to exit!")

            .setCancelable(false)

            .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    MainActivity.this.finish();
                }
              })
            .setNegativeButton("No",new 
```

DialogInterface.OnClickListener() {

```
 public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog

            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    });
    button = (Button) findViewById(R.id.buttonAlert);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            context);

        // set title
        alertDialogBuilder.setTitle("EXIT");

        // set dialog message
        alertDialogBuilder
            .setMessage("Are you sure want to exit ?")
            .setCancelable(false)
            .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    MainActivity.this.finish();
                }
              })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    });

    // Getting reference of the button btnResult
    Button btn = (Button) findViewById(R.id.btnResult);

    // Setting onclick listener
    btn.setOnClickListener(listener);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:26:08.850

我不太明白你的意思，但你可以隐藏编辑文本

```
 edtNumber2.setVisibility(View.GONE); 
```

或者

```
edtNumber2.setVisibility(View.INVISIBLE); 
```

并再次展示它

```
edtNumber2.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:30:27.463

做这个，

```
 EditText edit = (EditText) findViewById(R.id.EditText01);
    edit.setEnabled(false);
    edit.setInputType(InputType.TYPE_NULL);
    edit.setFocusable(false); 
```

And when any other option selected do this,

```
edit.setEnabled(true);
edit.setInputType(InputType.TYPE_CLASS_TEXT);
edit.setFocusable(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T05:28:36.387

用这个`edtNumber2.setEnabled(false);`

在你的情况下

```
else if(selectedItem.trim().equals("1/x")){

edtNumber2.setEnabled(false);

float result = 1  / Float.parseFloat(edtNumber1.getText().toString());

                edtResult.setText(Float.toString(result));
            } 
```

**编辑**

我重写了您的部分代码以实现您想要的

```
 public class MainActivity extends Activity {

final Context context = this;

private Button button;
private EditText edtNumber1;
private EditText edtNumber2;
private Spinner spr;

/** Called when the activity is first created. */

@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

setContentView(R.layout.activity_main);

        spr = (Spinner) findViewById(R.id.sprOperator);

        edtNumber1 = ( EditText) findViewById(R.id.edtNumber1);

        edtNumber2 = ( EditText) findViewById(R.id.edtNumber2);

        edtResult = ( EditText) findViewById(R.id.edtResult);

        spr.setOnItemSelectedListener(
            new OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                    String selectedItem = parent.getItemAtPosition(position).toString();
                    if(selectedItem.trim().equals("1/x")){
                        edtNumber2.setEnabled(false);
                    }else{
                        edtNumber2.setEnabled(true);
                    }                       
                }

                public void onNothingSelected(AdapterView<?> parent) {

                }
            });

// Defining onclick listener for finding the result

OnClickListener listener = new OnClickListener() {

   @Override

   public void onClick(View v) {

        String selectedItem = (String) spr.getSelectedItem();
        if(selectedItem.trim().equals("+")){
            float result = Float.parseFloat(edtNumber1.getText().toString())  + Float.parseFloat(edtNumber2.getText().toString());
            edtResult.setText(Float.toString(result));
        }else if(selectedItem.trim().equals("-")){
            float result = Float.parseFloat(edtNumber1.getText().toString())  - Float.parseFloat(edtNumber2.getText().toString());
            edtResult.setText(Float.toString(result));
        }else if(selectedItem.trim().equals("x")){
            float result = Float.parseFloat(edtNumber1.getText().toString())  * Float.parseFloat(edtNumber2.getText().toString());
            edtResult.setText(Float.toString(result));
        }else if(selectedItem.trim().equals("/")){
            float result = Float.parseFloat(edtNumber1.getText().toString())  / Float.parseFloat(edtNumber2.getText().toString());
            edtResult.setText(Float.toString(result));
        } else if(selectedItem.trim().equals("1/x")){
            float result = 1  / Float.parseFloat(edtNumber1.getText().toString());
            edtResult.setText(Float.toString(result));
        }

   }

    };
.
.
.
. 
```

希望这对您有所帮助。

# algorithm - TSP 的模拟退火成本函数

> ID：15445861
> 
> 赞同：1
> 
> 时间：2013-03-16T05:17:38.293
> 
> 标签：algorithm, artificial-intelligence, traveling-salesman, simulated-annealing

成本函数如何为 TSP 工作？假设我有一个距离为 100 的游览，我稍微更改了游览，对原来的游览做了 4 次更改，现在它的距离为 50。

成本函数会给我 4，因为那是变化的数量；还是50，因为距离的变化？或者，也许我错过了一些东西，但两者都没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:29:52.507

成本函数是**总距离**。

这正是您想要的最小化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-08T06:21:10.123

成本函数*是*总距离，是的，但它*也是*模拟退火中的能量参数$E$。不是“能量”$E$ 直接决定了转换到该状态的概率，而是`$\Delta{E}$`能量的变化（成本的变化）决定了概率`$P(\Delta{E})=exp(-\Delta{E}/T)$`。

因此，从 $E=100$ 到 $E=50$ 的转换将是`$\Delta{E}=-50$`（100% 概率）。

从 $E=100$ 到 $E=150$ 的转变将是 $\Delta{E}=50$，如果温度为 10，概率约为 0.7%。`$P(\Delta{E}=50)=e^{-50/10}$`.

# php - 如何选择最新的 ID 在同一个 PHP 文件的新表中创建新行？

> ID：15445862
> 
> 赞同：0
> 
> 时间：2013-03-16T05:18:00.190
> 
> 标签：php, mysql

我想通过输入名称在**RESTAURANT表中创建一家餐厅。**RestaurantID(RID) 是自动递增的。但同时，我想在**RATING**表中创建一个包含最新添加的 RID 的行。

其他帖子中的几个问题与我的情况不同，我不知道如何解决这个问题。不得不从这里寻求帮助..

这段代码的测试结果是：**{"success":0,"message":"Fail to create Rating table for this restaurant!"}**

餐厅名称已成功添加，但评分表不起作用。有什么想法吗？还是我应该反过来将 RID 添加到评级表中？

这是我的代码：

```
$response = array();  

$name = "test1"; 

if ($rid = addRestaurant($name)){
   echo "$rid"; // now it displays the right id
    if(addRating($rid) == true){
        $response["success"] = 1; 
        $response["message"] = "Restaurant Successfully Created!"; 
        echo json_encode($response); 
    }else{
        $response["success"] = 0; 
        $response["message"] = "Fail to create Rating table for this restaurant!"; 
        echo json_encode($response); 
    }
}else{
    $response["success"] = 0; 
    $response["message"] = "Fail to create Restaurant! Please Try Again Later!"; 
    echo json_encode($response); 
}

function addRestaurant($name){
// mysql inserting a new row 
    $result = mysql_query("INSERT INTO restaurants (Name)VALUES('$name')"); 

// check if row inserted or not 
    if ($result) { 
        $rid = mysql_insert_id();
        echo "$rid"; //this gives me correct RID of "84" latest one.
        return $rid;
    } else { 
        return false;
    }   
}

function addRating($rid){
            echo "$rid"; // here also the latest ID. but why return false?      
    $result = mysql_query("INSERT INTO `rating`(`Clealiness`, `Service`, `Quality`, `RID`) VALUES ('0', '0', '0', $rid");
    if ($result) {
        return true;
    } else {
        return false;
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:21:17.633

首先，**不要**使用`mysql_query`！它已被弃用（或很快将被弃用），并且很容易将[SQL 注入漏洞引入您的代码](http://xkcd.com/327/)。

相反，使用像[PDO](http://php.net/manual/en/book.pdo.php)这样的库。

从那里，一旦你执行 INSERT 查询，[你可以检索最后插入的 ID](http://php.net/manual/en/pdo.lastinsertid.php)，并在另一个查询中使用它。

一些伪代码：

```
$queryObj = $dbHandler->prepare('statement');
$queryObj->execute();
$last_id = $dbHandler->lastInsertId();
$dbHandler->prepare('another statement with $last_id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:31:44.103

这是一件容易的事。

如果查询成功执行，您的 addRestaurant 代码不应返回 true，而应返回最后插入的 id。你的代码应该像下面

```
$response = array();  

$name = "test1"; 

if ($rid = addRestaurant($name) == true){
    if(addRating($rid) == true){
        $response["success"] = 1; 
        $response["message"] = "Restaurant Successfully Created!"; 
        echo json_encode($response); 
    }else{
        $response["success"] = 0; 
        $response["message"] = "Fail to create Rating table for this restaurant!"; 
        echo json_encode($response); 
    }
}else{
    $response["success"] = 0; 
    $response["message"] = "Fail to create Restaurant! Please Try Again Later!"; 
    echo json_encode($response); 
}

function addRestaurant($name){
// mysql inserting a new row 
    $result = mysql_query("INSERT INTO restaurants (Name)VALUES('$name')"); 

// check if row inserted or not 
    if ($result) { 
        $rid = mysql_insert_id(); //This will return the last inserted id
        return $rid;
    } else { 
        return false;
    }   
}

function addRating($rid){
    //$test = mysql_query("SELECT MAX(RID) FROM restaurants");
    //$return = mysql_fetch_assoc($test); 
    //$rid = $return['MAX(RID)'];

    $result = mysql_query("INSERT INTO rating(`Clealiness`, `Service`, `Quality`, `RID`) VALUES (0, 0, 0, $rid");
    if ($result) {
        return true;
    } else {
        return false;
    }
?> 
```

希望这能解决您的问题。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T05:30:54.267

你的表结构在这里很重要。如果您正在为两个表的 ID 使用增量 ID，则可以使用 mysqli_insert_id ( [http://www.php.net/manual/en/mysqli.insert-id.php](http://www.php.net/manual/en/mysqli.insert-id.php) ) 从第一个表中获取最后插入的 ID询问。

1) 添加餐厅 2) 选择您的最后一个插入 id，如上面在您的代码中所做的 3) 附加到您的评分查询

试试 Julian H. Lam 的 PDO，因为它也很有效。

# scheme - 麻省理工学院计划中位数程序

> ID：15445863
> 
> 赞同：2
> 
> 时间：2013-03-16T05:18:13.947
> 
> 标签：scheme, median, mit-scheme

您将如何在不使用 list-ref 的情况下定义一个查找列表中位数的过程？例如，`(median '(1 2 2))`将返回 2 并`(median '(1 2 3 4 5 6))`返回 3.5。您可以假设它是一个排序整数列表。

这是一个家庭作业问题，所以请不要发布实际代码。我正在寻找的只是一些提示或一些伪代码来帮助我朝着正确的方向前进。如标题中所述，我正在使用 MIT 方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:25:05.120

你知道如何使用龟兔赛跑算法吗？如果是这样，在您的算法完成后，您的乌龟将位于列表的中间。

如果你*真的*被卡住了，[我有一个有效的实现](https://stackoverflow.com/a/13308315/13)。或者，这里有一些类似伪代码的东西：

```
(define (median lst)
  (if (null? lst) #f                         ;; oops, empty list
      (let loop ((tortoise <???>)
                 (hare <???>))
        (cond ((eq? tortoise hare) #f)       ;; oops, circular list
              ((null? hare) <???>)           ;; median value here
              ((null? (cdr hare)) <???>)     ;; average of middle two elements
              (else (loop <???> <???>))))))  ;; keep going 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:15:55.867

在中位数是列表中两个中间元素的平均值的情况下，使用 list-ref 将是低效的。原因是您将跳过列表的前半部分两次以找到两个中间元素。

一种解决方案是编写一个辅助函数`(drop-list a-list n)`来删除`n`列表的第一个元素。例如`(drop-list '(a b c d e) 2)`是`'(c d e)`。使用`drop-list`您现在可以执行以下操作：

1.  查找列表的长度
2.  如果长度是奇数，则使用 list-ref 选择中间元素
3.  如果长度是偶数，则使用 drop-list 删除中间两个元素之前的元素，然后计算结果的前两个元素的平均值。

# java - 如何在 java 中从任何用户（如 gmail 用户、yahoomail 用户等）发送电子邮件？

> ID：15445864
> 
> 赞同：2
> 
> 时间：2013-03-16T05:18:28.537
> 
> 标签：java, email

我完成了向最终用户发送邮件。但是当我当时使用 gmail 帐户时，我必须将 smtp.domain.com 更改为 smtp.gmail.com，如果我从 yahoomail.com 发送邮件，那么我必须将 smtp.gmail.com 更改为 smtp.mail。雅虎网。那么java中有没有任何解决方案可以从任何域用户发送邮件，这意味着我想让我的代码通用。所以任何人都有解决方案然后请向我提出建议。我的代码在下面

```
enter code here

import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMailSSL {

    public static void main(String[] args) {
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
                new javax.mail.Authenticator() {

                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication("xyz.123@gmail.com", "123456");
                    }
                });

        try {

            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("xyz.123@gmail.com"));
            message.setRecipient(Message.RecipientType.TO,
                     new InternetAddress("abc.456@gmail.com"));
            message.setSubject("mail to user");
            message.setText("Hello world.....");

            Transport.send(message);
            System.out.println("Done");
        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:14:02.137

从命令行运行这个程序......

```
>java SendMailSSL <Put desire mail server as argument eg smtp.domail.com> 
```

并从您的程序中访问此命令行参数....

```
 public static void main(String[] args) {
    Properties props = new Properties();
    props.put("mail.smtp.host", args[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:22:24.293

使用 java 属性 API。 [http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html) 使用 loadfromXML 选项来使用配置文件并使您的属性可配置。

或者，您可以将配置文件作为命令行参数传递并使其可配置。

或者从数据库中读取。

解决这个问题的方法很多。

# html - 将具有未知宽度和高度的 div 居中对齐的最佳方法？

> ID：15445865
> 
> 赞同：2
> 
> 时间：2013-03-16T05:18:46.423
> 
> 标签：html, css, css-expressions

假设我的页面上有一个 div：

```
<div class="center"></div> 
```

我的 CSS 看起来像：

```
.center{
    background:red;
    position:absolute;
    left:50%;
    top:50%;
    margin-left: ?
    margin-top: ?
} 
```

所以正如你在上面看到的，我唯一需要知道的是如何设置`margin-left`和`margin-top`值。如果我有一个已知的 div 宽度和高度`.center`（例如每个 300 像素），我会将值设置`margin-left`为该`margin-top`值的一半（均为 -150 像素）

`.center`但我的问题是，如果div 的宽度/高度未知（或者说它是动态的），我该如何设置这些值？

我可以使用某种 CSS 表达式还是有跨浏览器限制？最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T05:20:21.733

水平居中非常容易。利用

```
width: 50%; /* or anything other than auto */
margin-left: auto;
margin-right: auto; 
```

或者：

```
margin: 0 auto; 
```

垂直居中有点困难，并且很大程度上取决于 div 周围的其他元素。有关一些提示，请参阅[本文](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-16T05:21:41.557

此模式的最简单版本。

```
 .center-block
 {     
      margin: 0 auto
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T05:41:17.367

如果您的 div 没有固定大小，不幸的是，唯一的方法是使用 javascript。

例如[（jsFiddle 演示）](http://jsfiddle.net/LAEqq)：

Javascript(jQuery)

```
var $container = $('#centered');

var mLeft = $container.outerWidth() / 2;
var mTop = $container.outerHeight() / 2;

$container.css({
    'margin-left': -mLeft, 
    'margin-top': -mTop,
}); 
```

CSS：

```
html, body {
    height: 100%;
}
#centered {
    position: absolute;
    left: 50%;
    top: 50%;
    background: red;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T05:44:18.380

没有明确的宽度，没有可以使用的祖先元素，只有一个 div，剩下的唯一选择可能是使用 JavaScript 或 jQuery（如果这是一个选项）。

[使用 jQuery 的JSFiddle 演示](http://jsfiddle.net/Matt_Coughlin/nCLJR/)（动态设置边距）。

**CSS**

```
.center {
    position: absolute;
    left: 50%;
    top: 50%;
} 
```

**jQuery**

```
var leftOffset = $('.center').width() >> 1;
var topOffset = $('.center').height() >> 1;
$('.center').css('margin', '-' + topOffset + 'px 0 0 -' + leftOffset + 'px'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T05:26:17.700

使页面的 div 居中。必须设置宽度属性。

```
.center{
   background:red;
   margin: 0 auto;
   width:500px;
} 
```

# python - python脚本将变量发送到wix源路径

> ID：15445870
> 
> 赞同：0
> 
> 时间：2013-03-16T05:19:46.957
> 
> 标签：python, python-2.7, wix, wix3.7

我有一个生成的 GUI `wxpython`，用于选择`wix`项目创建 msi 所需的路径。当单击 GUI 中的*应用*按钮时，从 GUI 中选择的路径被写入注册表。选择的路径存储在一个变量中，比如*数据*，即：

```
data='C :\Sandbox\build\Windows\release\my.exe 
```

以及写入注册表，即：

```
HKEY_CURRENT_USER\Software\Automation\myapp 
```

现在我开发了 wix 项目来使用 msbuild 创建 msi。我希望 GUI 中的选定路径必须进入 wix 组件中的源路径。我的 wix 代码有点像下面，

```
<Component Id='MainExecutable' Guid='*'>
    <File Id='ExecutableFile' Name='my.exe' DiskId='1' Source='$(var.Sandbox)\my.exe' KeyPath='yes' Checksum='yes'/>
</Component> 
```

使用上面的代码，我收到一条错误消息，

```
 error CNDL0150: Undefined pre processor variable '$(var.Sandbox)' 
```

如何将 GUI 选择的变量“数据”传递到 wix 中的文件源路径？是否可以将注册表值发送到 wix？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:05:25.893

将 python 脚本中的变量“数据”作为 msbuild 属性传递给 wix。Python 脚本如下所示

```
data='C:\Sandbox\build\Windows\release\my.exe'
arg1 = '/t:Rebuild'
arg2 = '/p:Configuration=Release'
arg3 = '/p:Platform=x86'
arg4 = '/p:ExePath=data'
p = subprocess.call([self.msbuild,projpath,arg1,arg2,arg3]) 
```

并在您的**wixproject**中进行更改，如下所示。

```
<PropertyGroup>
    <DefineConstants>
    Sandbox=$(ExePath)
    </DefineConstants>
</PropertyGroup> 
```

并在您的**wxs**文件中更改组件的源路径，如下所示

```
<Component Id='MainExecutable' Guid='*'>
<File Id='ExecutableFile' Name='my.exe' DiskId='1' Source='$(var.Sandbox)\my.exe' KeyPath='yes' Checksum='yes'/>       
</Component> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:44:32.847

当您调用时，`candle.exe`您需要`data`通过名为`Sandbox`. 您可以使用如下所示的代码段来执行此操作：

```
from subprocess import call
call(["candle.exe", "-dSandbox=" + data]) 
```

当然，您还需要添加 .wxs 文件的路径等等。

# angularjs - 每次 AngularJS 中的 url 更改时调用哪个函数？

> ID：15445871
> 
> 赞同：20
> 
> 时间：2013-03-16T05:20:01.693
> 
> 标签：angularjs, angularjs-routing

我必须同时发生所有请求的队列，而无需等待 angularjs 中上一个请求的响应。
我有一个加载函数，每次更改 url 路由时都会显示加载 div，但在该函数中创建队列数组是不行的。

每次我更改 url 路由时，谁能告诉我在 angularjs 路由中调用了哪个函数？
这是路线代码：

```
angular.module('myApp', ['myApp.directives', 'myApp.services', 'myApp.filters']).config(
    function($routeProvider, $locationProvider, $httpProvider) {
        $locationProvider.html5Mode(false);
        $locationProvider.hashPrefix('!');

        $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

        var loading = function (data, headersGetter) {
            $('loadingDiv').show();
            return data;
        };
        $httpProvider.defaults.transformRequest.push(loading);

        $routeProvider.
        when('/', {
            templateUrl: 'elements/home/home.html',
            controller: homeCtrl
        });
   }); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-16T05:26:12.710

你可以使用类似的东西：

```
.run( function($rootScope, $location) {
   $rootScope.$watch(function() { 
      return $location.path(); 
    },
    function(a){  
      console.log('url has changed: ' + a);
      // show loading div, etc...
    });
}); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-16T11:08:56.070

`$route`服务有一系列你可以`$.on`在控制器中使用的事件：

```
$rootScope.$on("$routeChangeStart", function(args){})

$rootScope.$on("$routeChangeSuccess"....

$rootScope.$on("$routeChangeError".... 
```

见文档**[$route](https://docs.angularjs.org/api/ngRoute)**

您可以`ng-show`在元素上设置而不是使用 jQuery，并将变量设置为回调中的 true 和`$routeChangeStart`回调中的 false `$routeChangeSuccess`。

这些事件的一个很好的演示：[https ://github.com/johnlindquist/angular-resolve](https://github.com/johnlindquist/angular-resolve)

# php - 如何在php中将关联数组转换为一维数组

> ID：15445872
> 
> 赞同：-2
> 
> 时间：2013-03-16T05:20:03.103
> 
> 标签：php

我得到的数组如下

```
$teachers=array(array('post_id' => "81",'video_id' => array("81","73")), array('post_id' => "81",'video_id' => array("81","73"))); 
```

如果所有键值都相同，我只想显示一个键值（如上例），如下所示：

我想展示

```
{ post_id -> array([0]-> 81 [1]-> 73) } 
```

如果它与下面的示例不同，它应该显示两个数组..

```
{ $teachers=array(array('post_id' => "81",'video_id' => array("81","73")), 
array('post_id' => "81",'video_id' => array("81", "59")));} 
```

我想展示

```
{post_id -> array([0]-> 81 [1]-> 73 [2] -> 59) } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:29:35.310

```
function array_values_recursive($ary)  {
    $lst = array();
    foreach( array_keys($ary) as $k ) {
        $v = $ary[$k];
        if (is_scalar($v)) {
            $lst[] = $v;
        } elseif (is_array($v)) {
            $lst = array_merge($lst,array_values_recursive($v));
        }
    }
    return array_values(array_unique($lst)); // used array_value function for rekey
}
    $teachers=array(
        array('post_id' => "81",'video_id' => array("81","73")),
        array('post_id' => "81",'video_id' => array("81", "59")));

$flat = array_values_recursive($teachers);
print_r($flat); //OUTPUT : Array ( [0] => 81 [1] => 73 [2] => 59 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:26:11.960

在这种情况下，您仍然可以使用[array_unique](http://php.net/manual/en/function.array-unique.php)。

```
$teachers = array_unique($teachers); 
```

输出：

```
Array
(
    [0] => Array
        (
            [post_id] => 81
            [video_id] => Array
                (
                    [0] => 81
                    [1] => 73
                )
        )
) 
```

[http://codepad.org/eC4FR2fq](http://codepad.org/eC4FR2fq)

但是请注意，如果您有不同的密钥集，它可能无法工作，除了`post_id`并且`video_id`因为

> 注意：当且仅当 (string) $elem1 === (string) $elem2 时，才认为两个元素相等。换句话说：当字符串表示相同时。将使用第一个元素。

# android - Android：SyncException：目录不为空？

> ID：15445873
> 
> 赞同：0
> 
> 时间：2013-03-16T05:20:16.133
> 
> 标签：android, android-emulator

我有一个已启用的模拟器。我的应用`snapshot`程序没有错误，但**有时**当我想在该模拟器上测试我的应用程序时，安装失败，我在以下位置看到这些`console`：

> android com.android.ddmlib.SyncException：目录不为空

我尝试清理/构建项目，重新打开模拟器，重新启动 Eclipse，甚至重新启动我的 PC。但似乎他们无法解决这个问题。你知道是什么导致了这个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:55:30.070

我从那里重新启动模拟器，`snapshot`然后`uninstall`我的应用程序再试一次，没有出现问题。我不知道导致这个问题，但它似乎以这种方式解决。

# c# - 如何使用 C# 在 SQL Server 中删除数据库

> ID：15445879
> 
> 赞同：-4
> 
> 时间：2013-03-16T05:21:16.863
> 
> 标签：c#, sql-server-2008, sql-drop

亲爱的，我正在使用 SQL Server 2008。

在我的 Windows 应用程序中有包含所有数据库列表的组合框。

我想删除在组合框中选择的数据库。

但是当我运行我的查询时，会发生以下异常：

> *无法删除数据库“dm12”，因为它当前正在使用中*

这是代码

```
 USE dm12
 GO
 DROP DATABASE dm12
 GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:25:15.730

如果要删除`master`数据库，请先使用数据库，然后再删除数据库。

代替

```
USE dm12 
```

和

```
USE Master; 
```

确保在 SQL Server Management Studio 中没有使用相同的数据库连接打开任何查询选项卡。

如果您仍然遇到相同的异常，则只需完全关闭 SQL Server Management Studio。再次打开并正常连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T08:05:53.733

如果你有足够的权限，下面的代码几乎可以保证你可以成功删除数据库。但是为什么直接从应用层删除数据库，你如何控制有人意外删除数据库的风险......

将数据库更改为单用户并立即回滚将导致所有未完成的事务被回滚，并且与 dm12 数据库的任何其他连接都将立即断开。

```
 USE master;
    GO
    ALTER DATABASE dm12
    SET SINGLE_USER
    WITH ROLLBACK IMMEDIATE;
    GO
    DROP DATABASE dm12;
    GO 
```

# kendo-grid - 在任何 CRUD 操作后通过内联编辑重新加载 Kendo Grid

> ID：15445889
> 
> 赞同：4
> 
> 时间：2013-03-16T05:22:55.580
> 
> 标签：kendo-grid

我正在研究 Kendo Grid`CRUD Operations`并想使用它的内联编辑。在执行添加、删除或更新操作后，我想执行一些操作并刷新我的网格。

我已经看到了很多解决方案。他们建议了一些事件，例如`"Change" , "RequestEnd"`等。但是我的 RequestEnd 事件函数没有被调用，并且 Change Event 函数被调用，但是它在任何 CRUD 操作之前而不是在操作之后被调用。

同样，我试图检查`ParameterMap`在 Kendo Grid 的“”中执行了哪些操作，但它也在 CRUD 操作之前被调用。请建议我在任何 CRUD 操作之后实施网格重新加载的一些解决方案。这是我的代码：

```
@Imports [Shared].Models
@Imports [Shared].Enums
@code    

Layout = "~/Views/Shared/_AdminLayout.vbhtml"

@Styles.Render("~/Content/Kendo.min/css")  
@Scripts.Render("~/bundles/kendo")

Dim eventId As Guid = ViewData("EventId") 
```

结束代码

```
<div>
    <br />
    Shift Grid Demo
    <br />
</div>

<div id="divEventsGrid">

    <div id="example" class="k-content">
        <div id="TestShiftGrid" style="width: 660px;"></div>
    </div>

</div>

</section>

<pre>

<script type="text/javascript">

    $(document).ready(function () {

        var crudServiceBaseUrl = '@Url.Action("JsonGetShiftList", "ManageEvents")' + "?eventId=" + '@eventId',
                   dataSource = new kendo.data.DataSource({
                       transport: {
                           read: {
                               url: '@Url.Action("JsonGetShiftList", "ManageEvents")' + "?eventId=" + '@eventId',
                               dataType: "json"

                           },
                           update: {
                               url: '@Url.Action("JsonShiftUpdate", "ManageEvents")' + "?eventId=" + '@eventId',
                               dataType: "jsonp",

                           },

                           destroy: {
                               url: '@Url.Action("JsonShiftDelete", "ManageEvents")' + "?eventId=" + '@eventId',
                               dataType: "jsonp",
                               success: function (data) {
                                   if (data == true) {
                                       alert("Record Updated Successfully")
                                   }
                               }
                           },

                           create: {

                               url: '@Url.Action("JsonShiftCreate", "ManageEvents")' + "?eventId=" + '@eventId',
                               dataType: "jsonp",
                               type: "Post"
                           },
                           parameterMap: function (options, operation) {
                               if (operation !== "read" && options.models) {
                                   return { models: kendo.stringify(options.models) };

                               }                  
                           }                         
                       },

                       change: function (e) {

                           // alert(e.type); == is not working it is showing undefined..
                           // e.action is showing my current operation but before the operation not after. 
                           if (e.action == "add")
                           {
                               $("#TestShiftGrid").data("kendoGrid").dataSource.read();
                           }

                       },
                       //requestEnd is unable to call. ?
                       requestEnd: function (data) {

                           $("#TestShiftGrid").data("kendoGrid").dataSource.read(); 
                       },
                       batch: true,
                       pageSize: 15,
                       schema: {
                           model: {
                               id: "ShiftId",
                               fields: {
                                   EventId: { editable: false, nullable: true },
                                   ShiftId: { validation: { required: true } },
                                   ShiftDate: { validation: { required: true } },
                                   FromTime: { validation: { required: true } },
                                   ToTime: { validation: { required: true } },

                               }
                           }
                       }
                   });

        $("#TestShiftGrid").kendoGrid({
            dataSource: dataSource,
            navigatable: true,
            toolbar: ["create"],
            pageable: true,
            sortable: true,
            height: 300,
            columns: [
                    {
                        field: "ShiftDate",
                        title: "Shift Date"
                    },
                    {
                        field: "FromTime",
                        title: "From Time"

                    },
                    {
                        field: "ToTime",
                        title: "To Time"

                    },
                    {
                        command: ["edit", "destroy"],
                        title: "&nbsp;",
                        width: "190px"
                    },

            ],
            editable: "inline"
        });

    });

</script>
</pre> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T15:09:51.533

[数据源同步](http://docs.kendoui.com/api/framework/datasource#events-sync)事件似乎非常适合这一点，它在创建、更新和删除操作之后调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T19:48:47.140

您可以使用该`dataSource` `requestEnd`事件，如下所示：

```
requestEnd: function (e) {
        if (e.type != "read") {
            // refresh the grid
            e.sender.read();
        }
    } 
```

从文档中：

`Fired when a remote service request is finished.`

# actionscript-3 - 如何将所有警报消息定位在屏幕的特定位置？

> ID：15445894
> 
> 赞同：0
> 
> 时间：2013-03-16T05:24:39.490
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我开发了一个应用程序，其中包含如此多的警报消息，我想在屏幕的特定位置显示所有警报消息。我尝试了以下代码，但它适用于单个警报消息。有什么方法可以申请我的应用程序中的所有警报消息。

```
 myAlert = Alert.show('Hello World');
  PopUpManager.centerPopUp(myAlert);
  myAlert.x = 0;
  myAlert.y = 0; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T00:53:32.097

就像 www-flextras.com 建议的那样，您可以使用这样的类来放置逻辑以定位警报消息。

您需要等待`CREATION_COMPLETE`事件发生，然后才能设置警报的位置。请注意，您也可以`_alert.move(_nextX, _nextY)`在以下示例中使用。

```
package
{
    import flash.display.Sprite;

    import mx.controls.Alert;
    import mx.core.IFlexModuleFactory;
    import mx.events.FlexEvent;

    public class MyAlertFactory
    {
        private static const MAX_WIDTH:uint = 320;
        private static const MAX_HEIGHT:uint = 280;

        private static var _nextX:int = 0;
        private static var _nextY:int = 0;

        public static function show(text:String, title:String = "",
                                    flags:uint = 4, parent:Sprite = null,
                                    closeHandler:Function = null,
                                    iconClass:Class = null,
                                    defaultButtonFlag:uint = 4,
                                    moduleFactory:IFlexModuleFactory = null):Alert {

            var alert:Alert = Alert.show(text, title, flags, parent,
                closeHandler, iconClass, defaultButtonFlag, moduleFactory);
            alert.addEventListener(FlexEvent.CREATION_COMPLETE, handleAlertCreation);

            return alert;
        }

        private static function handleAlertCreation(event:FlexEvent):void
        {
            _nextX = (_nextX + 20) % MAX_WIDTH;
            _nextY = (_nextY + 15) % MAX_HEIGHT;

            var alert:Alert = Alert(event.currentTarget);
            alert.x = _nextX;
            alert.y = _nextY;
            alert.removeEventListener(FlexEvent.CREATION_COMPLETE, handleAlertCreation);
        }
} 
```

# r - 如何在 R 中转换 24 小时时间变量以执行回归模型？

> ID：15445898
> 
> 赞同：1
> 
> 时间：2013-03-16T05:25:23.140
> 
> 标签：r

我想为重复测量进行逻辑回归`R`。我想检查抑郁症和非抑郁症孩子一天中最后一餐的时间是否不同。我记录了所有科目（dep/non-dep）的 14 天进餐时间。我唯一遇到的麻烦是将这些时间变量转换为适当的形式来进行我们的分析。将它们转换为十进制数（例如 15.5）似乎不是一个好主意。请帮忙！

```
id  depressed mealtime     
B8         1 17:30:00       
B8         1 17:00:00      
B8         1 12:30:00      
B8         1     <NA>         
B8         1 19:45:00       
B8         1 19:30:00       
A1         0 19:30:00       
A1         0 18:45:00      
A1         0 19:30:00      
A1         0 18:30:00       
A1         0 20:30:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:37:58.303

为什么不将用餐时间变量转换为具有参考点的差异时间？例如使用`strptime`强制你的字符串`POSIXlt`，`difftime`你可以做类似的事情：

```
dat$mealtime <- strptime(dat$mealtime,'%H:%M:%S')
dat$difference <- difftime(dat$mealtime,time2=strptime('00:00:00','%H:%M:%S')) 
```

现在，您可以将新创建​​的变量用于回归，（我假设您`glm`使用 logit）

```
fit <- glm(depressed ~ difference,data=dat, family=binomial("logit")) 
```

*PS*：这里的数据是：

```
dat <- read.table(text='id  depressed mealtime     
B8         1 17:30:00       
B8         1 17:00:00      
B8         1 12:30:00      
B8         1     <NA>         
B8         1 19:45:00       
B8         1 19:30:00       
A1         0 19:30:00       
A1         0 18:45:00      
A1         0 19:30:00      
A1         0 18:30:00       
A1         0 20:30:00',header=TRUE) 
```

# spring - 休眠：无法在 DDL 上应用约束

> ID：15445909
> 
> 赞同：0
> 
> 时间：2013-03-16T05:26:24.430
> 
> 标签：spring, hibernate, tomcat, struts

我在 Tomcat 7.0 中使用 Struts/Springs/Hibernate，在尝试启动服务器时遇到了 hibernate 映射问题。

控制台将打印：

```
Mapping class: path.vo.ObjectVO -> TABLE_NAME 
```

对于 HibernateSessionFactory.xml 文件中的每个项目及其在 hibernate 文件夹中找到的相关 VO 对象。它将成功地遍历整个列表。

但是，一旦它看起来成功，它就会阻塞几个对象，从而产生以下错误：

```
WARN: Unable to apply constraints on DDL for path.vo.ObjectVO
java.lang.ClassNotFoundException: path.vo.ObjectVO 
```

奇怪的是，服务器过去运行良好。自从成功运行以来，我没有更改任何休眠配置文件、VO 对象或数据库模式本身。我的研究只导致人们修复了对我不起作用的配置文件问题。

任何帮助，将不胜感激。这是我正在使用的一些文件。

**HibernateSessionFactory.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<!-- Hibernate session factory -->
<bean id="sessionFactory"     class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">

    <property name="dataSource">
        <ref bean="dataSource"/>
    </property>

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>

    <property name="mappingResources">
        <list>
            <value>hibernate/ClassA.hbm.xml</value>
            <value>hibernate/ClassB.hbm.xml</value>
        </list>
    </property> 
</bean> 
```

**类A.hbm.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"     "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="path.to.ClassAVO" table="CLASSA">
    <id name ="Id" type="int">
        <column name="ID"/>
        <generator class="identity" />
    </id>
    <property name="somecolumn" type="string">
        <column name="Somecolumn" length="24" not-null="true" />
    </property>
 ...
</class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:36:53.583

1.  Hibernate 禁止两个 PO 映射到同一个表。
2.  VO 应该是包装数据并跨层传输而不是持久化。
3.  我建议你最好遵循开源社区熟悉的分层设计的良好实践，并且可以帮助你。

请参阅[在休眠中使用对象](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/objectstate.html)

# javascript - 拖放功能不允许所需的选择器

> ID：15445913
> 
> 赞同：1
> 
> 时间：2013-03-16T05:26:39.897
> 
> 标签：javascript, jquery, drag-and-drop, draggable

我正在使用下面的代码使我网站上的图像可拖动，但我无法选择我希望使用的选择器。虽然使用“.photo”时图像是可拖动的，但它使用的边界框比图像大，我宁愿使用“img”或“.img1”和“.img2”。

此外，自从我开始使用此代码以来，每次我释放图像时都会触发灯箱功能，而不是仅在单击时触发。

```
jQuery(function($){
    $('.photo').drag(function( ev, dd ){
        $( this ).css({
            top: dd.offsetY,
            left: dd.offsetX
        });
    });
}); 
```

这是用于放置在图像中的 HTML

```
<div class="photo">
<a href="http://www.coreytegeler.com/jb/3/images/full/011.jpg" rel="lightbox"><img class="img1" src="http://www.coreytegeler.com/jb/3/images/011.png"/></a></div> 
```

在此处查看演示：http: [//www.coreytegeler.com/jb/3/](http://www.coreytegeler.com/jb/3/)

我已经使用 Draggable 来实现这种效果，但这导致 Chrome/Safari 中出现了一个我无法解决的奇怪问题，因此我选择了一种新方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:08:12.577

[这](http://forums.asp.net/t/1684510.aspx/1?jQuery+Drag+and+Drop+Database)可能会帮助你

或者

检查 jQuery UI Droppable

```
http://jqueryui.com/demos/droppable/ 
```

# php - 动态mysql连接和数据库

> ID：15445914
> 
> 赞同：0
> 
> 时间：2013-03-16T05:26:45.470
> 
> 标签：php, mysql, database, dynamic

我正在尝试编写选择、连接和访问数据库的代码，但不工作：X

```
$mysql_storage = true;

if($mysql_storage){

    $databases = array(

        array("localhost","glibet_login","#####","glibet_site")
    );

    foreach($databases as $database){

        $makeconnection = $database[1];
        ${$makeconnection} = mysql_connect($database[0],$database[1],$database[2]);
        mysql_select_db($database[3], $database[1]);

    }
}

$query = "SELECT * FROM users WHERE email='marsalcorreialima@gmail.com'";
$littlequery = mysql_query($query, $glibet_login);
$littlefetch = mysql_num_rows($littlequery);
print $littlefetch; 
```

请告诉我这段代码是否至少有意义

警告：mysql_select_db() 期望参数 2 是资源，字符串在第 16 行的 /home/glibet/public_html/api/api_storage.php 中给出

编辑[已解决]！

```
mysql_select_db($database[3], ${$makeconnection}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:29:04.340

它应该是

```
$makeconnection = $database[1];
${$makeconnection} = mysql_connect($database[0],$database[1],$database[2]);
mysql_select_db($database[3], ${$makeconnection}); 
```

并停止使用`mysql_*`其已弃用的 . 使用`mysqli`OR `PDO`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:47:59.387

我认为您使连接过程有点复杂。可以通过以下方式更简单

```
$mysql_storage = true;
$makeconnection;

if($mysql_storage){
    $makeconnection = mysql_connect("localhost","glibet_login","#####");
    mysql_select_db("glibet_site", $makeconnection);
}

$query = "SELECT * FROM users WHERE email='marsalcorreialima@gmail.com'";
$littlequery = mysql_query($query, $makeconnection);
$littlefetch = mysql_num_rows($littlequery);
print $littlefetch; 
```

# python - 密码中的错误信息

> ID：15445916
> 
> 赞同：0
> 
> 时间：2013-03-16T05:27:14.907
> 
> 标签：python, string, key, translate, encryption

我现在正在用 python 做一个密码，我需要一些关于如何在另一个函数中调用另一个外部函数的帮助

这是外部功能……到目前为止，它 100% 正确工作！

```
def buildCoder(shift):
    import string
    import random
    from itertools import chain, islice
    from string import ascii_uppercase, ascii_lowercase   
    def _helper(letters):
        return dict(zip(letters, chain(islice(letters, shift, None), letters)))
    d = _helper(ascii_uppercase)
    d.update(_helper(ascii_lowercase))
    return d 
```

这是新功能：

```
def applyCoder(text, coder):
    buildCoder(int(n))
    coder = buildCoder(int(n))
    newtext = string.translate(text, buildCoder(int(n)))
    return newtext 
```

* * *

代码有问题 - 以下是测试用例下面的一些测试用例

```
>>> applyCoder("Hello, world!", buildCoder(3))
'Khoor, zruog!'
>>> applyCoder("Khoor, zruog!", buildCoder(23))
'Hello, world!' 
```

当这样的测试完成时，上面的结果应该会弹出......

但是，每当我调用上述函数时，我都会收到以下错误消息，`applyCoder("string",buildCoder(n))`它表示 n 未定义，但如果我调用该函数 - 例如`applyCoder("drink milk love life",buildCoder(5))`，它会给出以下输出：

```
 Traceback (most recent call last):
     File "<pyshell#24>", line 1, in <module>
     applyCoder("drink milk love life", buildCoder(5))
  File "C:\ProblemSet5\ProblemSet5\ps5_encryption.py", line 143, in applyCoder
    buildCoder(int(n))
NameError: global name 'n' is not defined 
```

那么我将如何最终修复这个功能 - `def applyCoder(text, coder):`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:49:02.340

n 指的是全局 n。

你在你的pythonshell中写了这样的东西：

```
n = ...

def applyCoder(text, coder):
    buildCoder(int(n))
    coder = buildCoder(int(n))
    newtext = string.translate(text, buildCoder(int(n)))
    return newtext

n = ... # or this 
```

但这应该是这样的：

```
def applyCoder(text, coder):
    newtext = string.translate(text, coder)
    return newtext 
```

它有帮助吗？

# android - Android动画如果margin-top设置为负值它不起作用？

> ID：15445918
> 
> 赞同：2
> 
> 时间：2013-03-16T05:27:49.883
> 
> 标签：android, android-layout

这是我将负边距设置为顶部的 xml 布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent">

   <include
     android:id="@+id/topNavBar"
     layout="@layout/top_nav_bar"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_marginTop="-80dp" />
</RelativeLayout> 
```

这是我的动画 XML

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android">
 <translate android:toXDelta="0" android:fromYDelta="-80" android:toYDelta="0" android:duration="400" android:fillAfter="true" />
 <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="400" android:fillAfter="true"/>
</set> 
```

和我的 JAVA 代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);
 topNavBar = (RelativeLayout)findViewById(R.id.topNavBar);
 slideDown = AnimationUtils.loadAnimation(this, R.anim.slide_down);
}

@Override
public void onClick(View v) {
 switch(v.getId()) {
   case R.id.topNavBtn:
  topNavBar.startAnimation(slideDown);
  break;
 }
} 
```

如果值为负数，我在显示导航栏时遇到问题。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:09:16.150

```
 <rotate
        android:duration="3000"
        android:fromDegrees="0"
        android:pivotX="5%"
        android:pivotY="5%"
        android:startOffset="10"
        android:toDegrees="360" >
    </rotate>

create folder named 'anim' in resource and create set and paste this code, by using animation listener you can use animation. 
```

# spring - 如何在 Spring 3 中将 DAO 对象注入另一个 DAO 类

> ID：15445919
> 
> 赞同：2
> 
> 时间：2013-03-16T05:28:00.163
> 
> 标签：spring

在我的应用程序中，我使用的是 Spring3 MVC 框架。我有一个 DAO 类 TestDAO1.java，其中我需要一个在 TestDAO2.java 类中声明的方法 getArticleList()。

据我所知，我们可以将服务层对象注入控制器，将 DAO 注入服务层。但是我们可以将 DAO 对象注入到 DAO 类中吗？

这里我想将 TestDAO2 类对象注入到 TestDAO1.java 类中。所以我可以使用 getArticleList() 方法。我该怎么做 ？

将 DAO 注入 DAO 是正确的方法还是标准？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T05:39:27.767

> 这里我想将 TestDAO2 类对象注入到 TestDAO1.java 类中。所以我可以使用 getArticleList() 方法。我该怎么做 ？

与将一个注入控制器的方式相同 - 例如使用`@Autowired`注释：

```
public class TestDAO2 {
    @Autowired private TestDAO1 dao1;
    .... 
```

注入的对象是服务还是另一个 DAO 没有区别。

> 将 DAO 注入 DAO 是正确的方法还是标准？

一般来说：**没有**。这种情况表明您的模型或 DAO 中*可能*存在一些设计问题。也许你`TestDAO1`做的太多了？尝试将此功能移动到**使用两个 DAO 的服务中**！

# c# - 如果用户重新启动应用程序，如何恢复状态？

> ID：15445923
> 
> 赞同：0
> 
> 时间：2013-03-16T05:28:19.447
> 
> 标签：c#, windows-phone-8, windows-phone-7.1, windows-phone

现在我有一个应用程序有几个页面，其中用户使用 ListPicker 选择某些值，这些值保存到公共字符串变量中。当用户到达最后一页时，几个文本块控件读取字符串变量并显示字符串。除此之外，还会显示一个计时器，当用户到达最后一页时开始计时。

现在，如果用户通过按主页按钮离开应用程序，然后使用应用程序切换器返回到它，最后一页会顺利显示，所有文本块都显示它们的变量并且计时器没有停止。但是，如果用户从主屏幕重新启动应用程序而不是切换到它，所有变量都会丢失并且应用程序会从第一页开始。

我想要做的是保存字符串变量和计时器，如果！= null，则让应用程序在启动时加载变量。如果它们存在，并且应用程序能够加载它们，请导航到最后一页并显示它们。否则，如果没有要加载的变量，只需继续正常操作即可。

我该怎么做呢？我读过关于隔离存储和保存状态的文章，但老实说，我什么也做不了，这真的让我发疯。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T03:50:05.617

您应该实施快速应用恢复。首先，您需要在 WMAppManifest.xml 中设置 ActivationPolicy="Resume"

接下来进入“App”类中的 App.xaml.cs 添加：private bool reset 然后您应该有一个用于初始化 RootFrame 的 InitializePhoneApplication 方法。添加这个：

```
RootFrame.Navigating += RootFrame_Navigating;
RootFrame.Navigated += RootFrame_Navigated; 
```

然后你可以去添加这些方法：

```
void RootFrame_Navigating(object sender, NavigatingCancelEventArgs e)
{
        if (reset && e.IsCancelable && e.Uri.OriginalString == "/MainPage.xaml")
    {
        e.Cancel = true;
        reset = false;
    }
}

void RootFrame_Navigated(object sender, NavigationEventArgs e)
{
    reset = e.NavigationMode == NavigationMode.Reset;
} 
```

如果您正确实施此操作，您的应用程序应该从您所在的最后一页恢复。

# shell - 环境变量和命令行工具

> ID：15445926
> 
> 赞同：0
> 
> 时间：2013-03-16T05:28:39.863
> 
> 标签：shell, command-line, environment-variables

我正在尝试使用一个名为`ccnd`. 我想将其日志发送到文件。该工具的文档说：

> 要开始 ccnd 将输出发送到日志文件而不是终端，请将`CCND_LOG`环境变量设置为您要写入的文件的路径。任何具有该名称的现有文件都将被覆盖。

所以这就是我所做的：

```
$ CCND_LOG='./ccnd.log'
$ ccnd 
```

但我仍然在终端中看到命令行工具的输出。如何使 CCND_LOG 在 ccnd 上生效？

我正在使用`bash`，这似乎是我的 Mac OS X 终端的默认设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T05:31:37.290

任何一个：

```
$ CCND_LOG="./ccnd.log" ccnd 
```

或者：

```
$ export CCND_LOG="./ccnd.log"
$ ccnd 
```

第一个设置命令的环境；第二个设置环境，直到它被改变。所有的环境变量也是shell变量；并非所有 shell 变量都是环境变量。在导出之前，变量只是一个 shell 变量；一旦它被导出，它就会成为环境的一部分。

如果您使用的是 C shell 衍生工具（例如`tcsh`），则必须使用该`setenv`命令来创建环境变量；第一个变体不是 C shell 的选项。

```
% setenv CCND_LOG ./ccnd_log
% ccnd 
```

* * *

如果您使用的是 bash，则前两个中的任何一个都应在命令期间设置环境。使用导出符号。然后运行`env | grep CCND`以检查它是否已设置。

我看到[CCNx 文档](http://www.ccnx.org/releases/latest/doc/)说：

> 所有 CCNx 程序都要求运行 ccnd：
> 
> ```
> bin/ccndstart 
> ```
> 
> 要开始 ccnd 将输出发送到日志文件而不是终端，请将`CCND_LOG`环境变量设置为您要写入的文件的路径。任何具有该名称的现有文件都将被覆盖。
> 
> 有关可用的其他环境变量（包括调试消息控件）的列表，请运行：
> 
> ```
> bin/ccnd -h 
> ```
> 
> ***请注意，您通常不应该直接运行 ccnd***，而是使用 `ccndstart`脚本。

（强调补充。）

你是跑步`ccnd`还是`ccndstart`？

# c++ - 如何获取 3d 维数组并将其转换为模型？

> ID：15445927
> 
> 赞同：2
> 
> 时间：2013-03-16T05:28:43.287
> 
> 标签：c++, arrays, opencv, model, 3d

我正在使用 Open CV，我能够从我的代码中提取多维数据和图像，但是显示它的简单方法是什么？我有一个 3D 数组：

```
line start [x] [y] [z]
line end   [x] [y] [z] 
```

线条之间的任何东西都将被一个坚固的平面填充。

给定这些点或我缺少的任何其他点，我可以使用某种功能轻松显示 3d 图像吗？

比如这个伪代码：

```
display_3d(x,y,z,angle) 
```

非常感谢任何帮助。我也在使用 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T10:23:03.880

首先，您需要找到点的[凸包](http://en.wikipedia.org/wiki/Convex_hull_algorithms)，这意味着找到一组点的明确且有效的表示。完成此操作后，您*将*需要对网格进行三角剖分，通常使用[delaunay triangulation](http://en.wikipedia.org/wiki/Delaunay_triangulation)。[QHull](http://www.qhull.org/)提供了这样的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T10:15:59.517

我不确定我是否理解正确，但为什么你有 3D 数组？？？

*   表示表面的 3D 点数组通常是 3D 点的 1D 数组：

    ```
     float points[n][3];
    // not float points[nx][ny][nz] !!! 
    ```

我不是 CV 用户，所以我会坚持使用（OpenGL）渲染，但您可以使用任何其他渲染。

1.如果点代表**凹平面**

*   **单机**！！！_
*   并且**按顺序排列**（没有混淆）
*   然后你可以在其他渲染中使用 GL_TRIANGLE_FAN 或任何类似的东西。

    ```
    float points[n]={ {x,y,z},{x,y,z},...};
    glBegin(GL_TRIANGLE_FAN);
    glVertex3fv(points[0]);
    glVertex3fv(points[1]);
    glVertex3fv(points[2]);
    ...
    glVertex3fv(points[n-1]);
    glEnd(); 
    ```

2.如果不是，那么您必须对数据进行三角测量

*   这不是一件容易的事，但有一些库可以做到这一点。
*   不确定OpenCV是否也可以做到这一点，寻找三角测量功能（耳朵掉落等）
*   我更喜欢我自己的三角测量例程（更适合调试和额外的多边形信息），但是当你不习惯使用算法时，它有点难以有效和正确地编码。

# c# - C# 强命名和版本控制

> ID：15445928
> 
> 赞同：1
> 
> 时间：2013-03-16T05:28:47.117
> 
> 标签：c#, versioning, updates, signing

我们需要让我编写的 C# 应用程序自动更新其主要 DLL 之一。这个想法是当 .exe 启动时，它首先检查互联网是否有更新 - 然后下载该更新

下载完成后，我们计划在执行之前对 DLL 执行签名检查

我是 .NET 程序集签名机制的新手，尤其是在版本化程序集方面（从 1.0 版到 1.1 版）

.NET 是否提供任何可以帮助我的东西？如何在强命名的约束下正确工作？（我可以吗？）

我希望在这个问题上获得指导和技术，而不是 API 和机制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:20:46.573

我觉得，您可能需要一个单独的进程（比如 update.exe）来完成这项工作。

原因：如果您有一个正在运行的进程（比如 MyApp.exe）并且它正在使用 X.dll（加载的模块），那么您将无法更新（替换）X.dll，因为它会引发异常

> System.IO.IOException：该进程无法访问文件“X.dll”，因为它正被另一个进程使用。

因此，您可能必须在加载 X.dll 模块之前执行此更新/替换。如果您需要控制加载程序集，则必须使用 Reflections Assembly.Load。如果没关系。

要获取 dll 的版本号，您可以使用：

```
Assembly assembly = Assembly.LoadFrom("X.dll");
Version ver = assembly.GetName().Version; 
```

要对程序集进行签名，您可以使用 signtool.exe 等外部工具。它是 Windows SDK 的一部分，它接受命令行参数，您可以在[此处找到有关它的更多信息](http://msdn.microsoft.com/en-us/library/aa387764.aspx)

# javascript - 最终用户可编辑文本替换占位符的简单解决方案是什么？

> ID：15445935
> 
> 赞同：0
> 
> 时间：2013-03-16T05:30:08.257
> 
> 标签：javascript, ruby, regex, replace

这是我要解决的问题：用户可以为网站上的某些内容显示自定义的 4 字符标题，例如`NEWS`. 我想添加对用户可以从[Font Awesome](http://fortawesome.github.com/Font-Awesome/)指定图标的方式的支持。

我正在考虑使用方括号，例如，用户会写`[camera]pic`，这将被翻译为`<i class="icon-camera"></i>pic`使用正确的 Font Awesome 图标显示。但是，我也希望能够转义标记，以便 (eg)`f[[x]`将打印为`f[x]`，而不是`f[<i class="icon-x"></i>`。文本占位符永远不会嵌套，但它们可能是相邻的（例如`[star][star][star][star]`）。我努力使用正则表达式*解决这个问题，并得出结论，正则表达式可能不是解决问题的合适方法。

对于这类问题，有没有可以用 Javascript 和 Ruby 干净地实现的简单解决方案？或者，是否有另一种简单的方法来表示满足我的顺序和可逃避要求的这些类型的文本占位符（例如，`${camera}pic`相反）？还是我必须手动解析它，一次一个字符？

* * *

* 至于我尝试过的正则表达式：`\[(\w+)\]`很简单，但不应该在`f[[x]`. `(\A|[^\[])\[(\w+)\]`是通过`f[[x]`，但对于`[x][y][z]`.

这是我的测试用例。假设将占位符替换为以 a 为前缀的占位符文本的简单转换`$`，则：

```
describe '#to_var' do
   it { helper.to_var('abcd').should == 'abcd' }
   it { helper.to_var('[foo][bar][baz]').should == '$foo$bar$baz' }
   it { helper.to_var('[[x]').should == '[x]' }
   it { helper.to_var('<[[x]>').should == '<[x]>' }
   it { helper.to_var('<[x]>').should == '<$x>' }   
end 
```

我想出的最接近的正则表达式是：

```
 icon_code_regex =  %r(
    (\A # beginning of string
     | # or
     [^\[]) # not a left bracket
    \[ # literal left bracket
    (\w+) # the good stuff
    \] # literal right bracket
  )x

str.gsub(icon_code_regex, '\1$\2').gsub('[[', '[') 
```

这失败了`[foo][bar][baz]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:55:38.220

Javascript解决方案：

```
var str = 'abcd [foo][bar][baz] [[x] <[[x]> <[x]>';

str = str.replace( /(\[)?\[(\w+)\]/g, function ( match, escaped, icon ) {
    return escaped ? '[' + icon + ']' : '$' + icon;
});

// "abcd $foo$bar$baz [x] <[x]> <$x>" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:55:02.110

只是为了演示，这里有一个更优雅的 JS 解决方案，它使用[`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

```
var output = str.replace(/\[(\w+)\]/g, function(match, icon, offset) {
    if (offset>0 && str.charAt(offset-1) == '[') // if previous existed and was [
        return match.slice(1); // return the match but without opening [
    // else
    return '<i class="icon-' + icon + '" />'; // or whatever you want to do
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-16T07:30:28.883

### 红宝石的解决方案

`[word]`您可以使用look-behind来防止子字符串`[[word]`匹配：

```
(?<!\[)\[(\w+)\] 
```

后视`(?<!\[)`只是检查`[`没有出现在我们要匹配的字符串之前。

[**演示**](http://rubular.com/r/otLFwocXHy)

### JS的解决方案

对于 JS 解决方法，因为它没有后视功能：

```
// Match one non-opening-bracket character, then the [word],
// but the closing bracket is not consumed, for the case
// of consecutive [word1][word2]
var regex = /(^|[^\[])\[(\w+)(?=\])/g;
var arr;

var output = "";
var lastAppend = 0;

while ((arr = regex.exec(inputString)) !== null) {
    // Append substring from index of lastAppend to right before opening [
    // lastAppend will either be at beginning of the string (0)
    // OR right after closing ] from previous match
    output += inputString.substring(lastAppend, arr.index + arr[1].length);
    output += "$" + arr[2];

    // Need to offset by 1 to skip the closing ] (not consumed)
    lastAppend = regex.lastIndex + 1;
}

output += inputString.substring(lastAppend); 
```

这很丑陋。我不确定是否有更优雅的方式。

# mongodb - 从 C# 驱动程序获取 MongoDB 服务器时间

> ID：15445936
> 
> 赞同：0
> 
> 时间：2013-03-16T05:30:11.093
> 
> 标签：mongodb, mongodb-.net-driver

1.  如何从 C# 驱动程序获取 MongoDB 当前服务器时间？

2.  如果我有多个分片和副本集，monogo 是否允许它们的时间不同步？

3.  至于情况2，如果几台服务器的时间不同步，我会得到哪个服务器时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:27:37.077

It is a very bad idea to run any cluster without synchronizing the clocks across all of them via NTP or something equivalent.

In a sharded cluster with replica sets for shards the number of problems you may run into if your clocks drift out of sync are numerous and difficult to diagnose.

Use `ntpd` and as an added advantage you can then use current time from your C# app server without worrying about it being different than the server time.

# widget - 如何制作小部件流量交换器脚本

> ID：15445938
> 
> 赞同：0
> 
> 时间：2013-03-16T05:30:35.480
> 
> 标签：widget, traffic

有谁知道如何制作像 Wahoha.com 和 2leep.com 网站上可用的流量小部件交换器脚本？..我有一个像他们这样的网站，但我不知道如何制作流量小部件交换器..

脚本如下所示：

```
<!-- mysite.com Widget Traffic Exchanger : Start --><script type="text/javascript" src="http://mysite.com/widget/menegak/5.js"></script><!-- mysite.com Widget Traffic Exchanger : End --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T07:43:33.200

你可以使用[HitLeap](http://hitleap.com/by/rarauthor)来做到这一点。

什么是 HitLeap？HitLeap 是一个流量交换，也称为自动点击服务我们帮助您提高您的网站点击率、排名（alexa、google）等等。我们的联盟计划提供高达 50% 的现金和流量佣金。它是如何工作的？注册后，您将提交所有要向其发送流量的网站。然后，您将通过查看其他人的网站获得免费流量。或者，您可以从我们这里购买流量套餐。

[从此链接注册](http://hitleap.com/by/rarauthor)

# jms - ActiveMQ - “随机”缓慢的订阅者 - 导致主题填满

> ID：15445941
> 
> 赞同：1
> 
> 时间：2013-03-16T05:31:34.360
> 
> 标签：jms, activemq, jms-topic

我有一个主题，其中有多个使用默认预取运行的订阅客户端。如果其中一个客户端速度很慢，它会减慢其他订阅的客户端。我想动态降低慢速消费者的预取限制，但由于客户端随机变慢，这需要动态完成。

我想对以下解决方案进行原型设计：为每个订阅者创建队列。线程池将从主题中删除事件并将事件复制到我的队列中。现在，由于我为每个订阅者设置了队列，因此每个客户端都是相互独立的。我将为每个队列设置预取限制。一旦达到该限制，我将放弃这些事件。缺点：现在每个队列都需要内存。

我想对上述解决方案或您认为可能适合我的情况的任何其他解决方案提出一些看法。

我在下面为我的用例添加了更多详细信息：
listener1 处理速度：142 rps - listener2 处理速度：10 rps

事件产生速度 - 100 rps

默认预取限制：32000

情况 1：当两个侦听器的预取限制相等时。在 ~ 761 秒内 - 主题在开始删除事件之前已满。

案例 2：当慢消费者的预取限制小于快速消费者的预取限制 listener2 预取限制：64K 以上解决方案效果很好

并非有时听众 2 的处理速度会增加，而听众 1 的处理速度会降低（注意处理速度不会完全反转，但我使用的是极值）并且 case2 不起作用。现在 listener1: 10 rps listener2: 142 rps 在开始丢弃事件之前，主题需要 1523 秒才能充满。一旦它开始丢弃事件，侦听器 1 也将以与侦听器 2 相同的速度开始处理。

我正在寻找让每个听众独立运行而不阻碍其他听众的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:28:39.993

您是否查看过 ActiveMQ 页面上处理慢速消费者的[文档。](http://activemq.apache.org/slow-consumer-handling.html)基本上，该策略是使用挂起消息限制策略让代理开始为移动缓慢并导致备份的消费者丢弃旧消息。由于缓慢的消费者会导致在 Broker 上构建消息，因此您开始达到配置限制，从而导致 Broker 减慢生产者的速度。通过制定未决消息限制，您可以防止减慢速度的堆积。

您还可以关闭生产者流控制以允许生产者继续以正常速率运行，并让消息假脱机到磁盘，直到磁盘也达到其限制，这也在[文档](http://activemq.apache.org/producer-flow-control.html)中进行了介绍。

# mysql - 如何创建触发器来连接字段

> ID：15445944
> 
> 赞同：3
> 
> 时间：2013-03-16T05:31:45.403
> 
> 标签：mysql, sql, database, sql-update

我有 1 个这样的表：

```
user
----------------------------------------
id | first_name | last_name | full_name
---------------------------------------- 
```

我想编写一个触发器，它将 first_name 和 last_name 连接到 full_name。

我试过下面的触发器：

```
delimiter |
create trigger fullname after insert on user
for each row
begin
update user set full_name=(select concat(first_name,last_name) from user where id=new.id)where id=new.id;
end;
| 
```

将数据插入用户表时显示此错误：

`#1442 - Can't update table 'user' in stored function/trigger because it is already used by statement which invoked this stored function/trigger.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-16T05:40:57.077

当 INSERT 触发器触发时，您不能更改表。但是，您可以在插入记录之前创建触发器。

```
DELIMITER |
CREATE TRIGGER `fullname` BEFORE INSERT ON `user`
FOR EACH ROW 
BEGIN
  SET NEW.full_name = CONCAT(NEW.first_name, ' ', NEW.last_name);
END |
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T05:46:42.353

对于您的情况，我建议您使用计算列而不是触发器，因为您需要为插入/更新创建触发器；

希望这可以帮到你。

```
 create table [users] 
    ( id int identity(1,1),
      First_Name varchar(100),
      Last_Name varchar(100),
      Full_Name as concat(First_Name,' ', Last_Name) persisted
   )
      Insert into [users]
      select 'Bob', 'Ryan'

```
 select * from [users]

    update users 
    set First_Name = 'Michael'
    where id=1

    select * from users 
``` 
```

# iphone - 为什么我们在浮点值比较中得到错误比较结果

> ID：15445948
> 
> 赞同：-1
> 
> 时间：2013-03-16T05:33:04.233
> 
> 标签：iphone, floating-point

我从服务器获取的 r,g,b 值都是整数值，我正在将这些整数值转换为以这种方式浮动

```
int a;
float b=a; 
```

然后我将这些浮点值除以 255.0f，然后与 0.51690 进行比较，但实际上我得到的比较结果是 0 而不是 1。

这里 r,g,b 值是 int 并且 appdelegate.userRed,appdelegate.userGreen, appdelegate.userBlue 是浮点数。

```
appdelegate.userRed=r;
appdelegate.userGreen=g;
appdelegate.userBlue=b;
NSLog(@"r is %d",r); 
```

> 结果：2013-03-16 10:56:33.488 ***** [2407:14003] r 为 128

```
float red=appdelegate.userRed/255.0;
float green=appdelegate.userGreen/255.0;
float blue=appdelegate.userBlue/255.0;
NSLog(@"red is %f",red); 
```

> 2013-03-16 10:56:35.642 ******* [2407:14003] 红色为 0.501961

```
 NSLog(@"comparision is %d",(red==0.501961)); 
```

> 2013-03-16 10:57:33.743 ****** [2407:14003] 比较为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:35:34.560

对于浮点比较，我们必须在值的末尾使用 f 或 F 。如下所示

```
NSLog(@"comparision is %d",(red==0.501961F)); 
```

没有 f 意味着它是单精度浮点数而不是双精度双精度数。

来自 C99 标准：

```
An unsuffixed floating constant has type double. If suffixed by the letter f or F, it has type float. 
```

对于浮点比较，

```
int compare_float(float f1, float f2)
{
    float precision = 0.00001;
    if (((f1 - precision) < f2) && 
        ((f1 + precision) > f2))
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:37:06.550

您的代码首先计算128 的`appdelegate.userRed/255.0`位置`appdelegate.userRed`。数学上，这是 128/255。但是，由于您在计算机中使用浮点运算，因此计算机必须返回一个可以在该浮点系统中表示的值，而不是精确的数学值。在这种情况下，`128/255.0`有 type `double`，`double`最接近 128/255 的是 0.5019607843137254832299731788225471973419189453125。

然后您的代码将该值分配给`red`. 因为`red`是 a `float`，所以值被转换为`float`。同样，该值必须四舍五入。最接近 0.5019607843137254832299731788225471973419189453125的`float`值为 0.501960813999176025390625。

然后你`red`比较`0.501961`。编译器将源文本转换为`0.501961`可表示为 a 的最接近的值`double`，即 0.50196099999999999052846533231786452233791351318359375。

由于 0.501960813999176025390625 不等于 0.50196099999999999052846533231786452233791351318359375，因此比较返回 false。

很难为您推荐替代方案，因为您没有解释为什么要进行这种比较。如果您只想检查`float`一个像素的值是否是整数 128`float`除以 255 的直接结果，那么我建议您使用`red==128/255.f`. （您可能还希望更改`appdeletegate.userRed/255.0`为，`appdelegate.userRed/255.f`以便名义上使用`float`，而不是`double`在整个代码中。）

但是，如果您正在做更多涉及浮点运算的事情，则还有其他注意事项。特别是，如果一个`float`值不是除以 255 的直接结果，而是额外算术的结果，那么该值很可能包含额外的舍入误差，直接比较它`128/255.f`不会产生所需的结果。

# c# - 如何在 .xls 文件中将数据字段拆分为两个单独的列

> ID：15445954
> 
> 赞同：0
> 
> 时间：2013-03-16T05:34:58.390
> 
> 标签：c#, asp.net, binary, xls

`.xls`我有以下代码可以在文件中写入数据。如何分隔这两个数据字段并存储在`.xls`文件的不同列中？

```
Response.BinaryWrite((byte[])dr["data"]);
Response.BinaryWrite((byte[])dr["data2"]); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:46:00.943

假设您已`DataTable`命名`dt`then

```
StringBuilder sb = new StringBuilder();

sb.Append("<table><tr>");

foreach (DataColumn dc in dt.Columns)
{
    sb.AppendFormat("<th>{0}</th>", dc.ColumnName);
}

sb.Append("</tr>");

foreach (DataRow row in dt.Rows)
{
    sb.Append("<tr>");

    foreach (DataColumn dc in dt.Columns)
        sb.AppendFormat("<td>{0}</td>", row[dc]);

    sb.Append("</tr>");
}

sb.Append("</table>");

    Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("content-disposition", "attachment;filename=MyFiles.xls");
    Response.Charset = "";
    Response.Write(sb.ToString()) 
```

# claims-based-identity - 将 ADFS 配置为 Thinktecture IdentityServer 2.0 中的身份提供者

> ID：15445955
> 
> 赞同：8
> 
> 时间：2013-03-16T05:34:58.227
> 
> 标签：claims-based-identity, adfs

我正在尝试设置一个示例：Web 应用程序通过 thinktecture 身份服务器 2.0 使用活动目录登录。

Active Directory 和 Thinktecture IdentityServer 都设置在同一台机器上。

我将 Thinktecture IdentityServer 配置为使用 Active Directory 联合身份验证服务作为身份提供者。Thintecture IdentityServer 成为回复方信任。

当我从 Web 应用程序请求登录操作时，ADFS 上记录了两个错误：

因为我没有足够的 10 个信誉，所以我将地址“ [https://xxxx/idsrv/](https://x.x.x.x/idsrv/) ”屏蔽为 idsrvAddress

**第一个：事件 ID：184**

已收到由密钥“idsrvAddress”标识的依赖方的令牌请求，但由于该密钥未标识任何已知的依赖方信任，因此无法满足该请求。键：idsrvAddress

此请求失败。

用户操作 如果此密钥表示应为其颁发令牌的 URI，请验证其前缀是否与在 AD FS 配置数据库中配置的信赖方信任相匹配。

**第二：事件ID：364**

在联合被动请求期间遇到错误。

附加数据

异常详细信息：Microsoft.IdentityServer.Web.InvalidScopeException：MSIS7007：请求的信赖方信任“idsrvAddress”未指定或不受支持。如果指定了信赖方信任，则您可能没有访问信任信赖方的权限。有关详细信息，请联系您的管理员。

请帮助我应该怎么做！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-28T15:35:14.910

问题很旧，但没有人回答，所以我决定分享这个提示。Microsoft.IdentityServer.Web.InvalidScopeException 也出现在我的案例中，解决方案是在指定依赖方标识符时仔细检查 ADFS 的正确大小写（大写/小写）。这显然是我正在使用的 ADFS 3.0 中的错误。

*   打开 AD FS 管理控制台
*   前往信赖方信托
*   右键单击信赖方信任定义，选择“属性”
*   项目清单
*   在显示的对话框中，选择“标识符”选项卡
*   从事件查看器错误消息中复制标识符
*   将其粘贴到“依赖方标识符”文本框中，单击“添加”。
    您可能需要删除旧标识符，如果它看起来相同，但使用不同的大小写编写。Dialog 阻止添加它，但在内部，ADFS 显然使用区分大小写的比较进行比较。

以上帮助我摆脱了错误。当然，您可能会面临不同的问题。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-05T11:56:03.070

如果您遇到错误“异常详细信息：Microsoft.IdentityServer.Web.InvalidScopeException：MSIS7007：未指定或不受支持请求的信赖方信任'idsrvAddress'。如果指定了信赖方信任，您可能没有权限访问信任依赖方。请联系您的管理员了解详细信息。”

请尝试从登录到域的系统登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T07:56:03.057

在配置 ADFS 和 WAP（Web 应用程序代理）以在访问 Web 上的 Outlook 之前对用户进行身份验证时，我们遇到了同样的问题。

问题是我们重新配置了 ADFS 上的依赖方信任（删除然后创建一个新的，而不是编辑），而没有重新配置 WAP 上已发布的 Web 应用程序。因此，每当您在 ADFS 上重新创建依赖方信任时，您都必须重新配置 WAP 上已发布的 Web 应用程序。

希望能帮助到你！

# .net - .NET 在 Server 2008 中永久缓存 DNS

> ID：15445962
> 
> 赞同：7
> 
> 时间：2013-03-16T05:36:36.447
> 
> 标签：.net, dns, windows-server-2008, .net-4.5

我遇到了一个问题，即我的 .NET Web 请求总是针对给定的 CNAME 访问相同的 IP。CNAME 绑定到多个 IP 地址，每次发生 DNS 查找时，这些 IP 地址都会以随机顺序返回（通过运行 nslookup 确认）。

我写了一个简单的应用程序来测试这个：

```
 public void TestDNS()
    {
        while (true)
        {
            var ipAddress = Dns.GetHostAddresses("mywebsite.com").First().ToString();

            Console.WriteLine(string.Format("Current: '{0}' at: '{1}'", ipAddress, DateTime.Now.ToLongTimeString()));

            Thread.Sleep(1000);
        }
    } 
```

我已经在 Server 2008 Datacenter、Server 2008 R2 Datacenter、Server 2012、Windows 7 和 Windows 8 上运行了这个应用程序。所有机器都有最新的更新和可用的服务包。

唯一失败的机器是 Server 2008。每台其他机器大约每分钟切换一次 IP 地址（TTL 为 1 分钟）。Server 2008 从不切换（运行了一个多小时）。

需要明确的是，在机器上运行 nslookup 和其他工具似乎表明 DNS 正在返回我所期望的内容。此问题似乎特定于 Server 2008 上的 .NET。

我已经尝试过这个相关[答案](https://stackoverflow.com/a/7277702/72838)中列出的项目，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T10:48:52.663

作为解决方法，ping 报告是否存在相同问题？

[http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)

如果您愿意接受变通办法，另一种可能的解决方案是搜索解析主机名的第 3 方库/代码或通过 [System.Diagnostics.Process();] 调用命令行。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:45:01.243

方法`GetHostAddresses()`返回一个类型为 的数组`IPAddress`。

> **返回值**
> 
> 类型：System.Net.IPAddress[]
> 
> 一个 IPAddress 类型的数组，其中包含由 hostNameOrAddress 参数指定的主机的 IP 地址。

将您的更改`var`为 IPAddress 数组。这是示例：

```
public static void DoGetHostAddresses(string hostname)
{
    IPAddress[] ips;

    ips = Dns.GetHostAddresses(hostname);

    Console.WriteLine("GetHostAddresses({0}) returns:", hostname);

    foreach (IPAddress ip in ips)
    {
        Console.WriteLine("    {0}", ip);
    }
} 
```

有关详细信息，请参阅[此页面。](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T14:25:08.227

您正在进行递归查询。如果您不希望 DNS 服务器缓存任何递归查询，请创建值 0x0 的新 DWORD“MaxCacheTTL”

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\DNS\Parameters

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:37:43.143

您是否在所有机器上运行相同的 .Net 环境，即您的代码被编译到相同的目标（x86 或 x64 ）和相同的 .Net 框架 2.0 或 3.5 或 4.0

# linux - 如何使用 bash 脚本将最新文件从本地机器复制到服务器？

> ID：15445970
> 
> 赞同：-2
> 
> 时间：2013-03-16T05:37:55.490
> 
> 标签：linux, bash, shell

大家好，我已经使用此代码生成备份文件，在目录中查找最新文件并使用 ip 将该最新文件复制到服务器。问题是，它没有将最新文件复制到服务器。如何执行此操作？

这是我使用的代码：

```
#!/bin/sh
#
#Defines our output file

OUTPUTDIR=/home/backup
OUTPUT=$OUTPUTDIR/backup-of-$(date +%d-%m-%Y).zip
BACKUPDIR="/home/user/Desktop/backup/"
LATESTFILE=ls -t1 | head -n1

#Display message about starting the backup
echo "Starting backup of directory $BACKUPDIR to file $OUTPUT"

#Start the backup
zip -r $OUTPUT $BACKUPDIR

#Checking the status of the last process:
if [ $? == 0 ]; then
#Display confirmation message
echo "The file:"
echo $OUTPUT
echo "was created as a backup"
else
#Display error message message
echo "There was a problem creating:"
echo $OUTPUT
echo "as a backup for:"
echo $BACKUPDIR
fi
echo "Please Enter The IP to save backup file"
read ip
echo "Connecting to" $ip. please wait...
scp $LATESTFILE user@$ip:/home/user/Desktop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:12:01.943

您忘记附上获取最后一个文件的命令：

```
LATESTFILE=$(ls -t1 | head -n1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:14:51.617

首先，我将更改以下行

```
LATESTFILE=ls -t1 | head -n1 
```

到

```
LATESTFILE=`ls -t1 $OUTPUTDIR | head -n1` 
```

并将该行移至请求IP之前。

“`”表示执行“`”字符之间的内容并返回结果。如果您将该行留在顶部，您将不会获得目录中的最新文件，因为它尚未创建。您还在当前目录上执行“ls”，它不应该在您的备份文件被写入的目录上吗？

还需要换线

```
scp $LATESTFILE user@$ip:/home/user/Desktop 
```

到

```
scp $OUTPUTDIR/$LATESTFILE user@$ip:/home/user/Desktop 
```

希望这可以帮助

# sql-server-2008 - 如何使用远程访问数据库创建链接服务器？

> ID：15445971
> 
> 赞同：-1
> 
> 时间：2013-03-16T05:38:00.247
> 
> 标签：sql-server-2008, ms-access

我想用 SQL Server 2008 创建 Access 文件的链接服务器对象。Access 文件位于 SQL Server 2008 以外的不同服务器上。

如果文件位于同一服务器上，我可以创建链接服务器对象。

请指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:56:13.793

您可以使用`OPENDATASOURCE`或`OPENROWSET`访问 Access DB。你必须在网络上共享文件

你可以从[这里获得更多信息](http://blog.extreme-advice.com/2009/03/02/read-xls-or-mdb-file-with-opendatasource-sql-server-2005/)

# jquery-mobile - 在 jquery 移动范围滑块中需要显示 6 位值

> ID：15445972
> 
> 赞同：3
> 
> 时间：2013-03-16T05:38:08.717
> 
> 标签：jquery-mobile

在范围滑块文本框中，我尝试显示 5000000 但它仅显示 500000 其余数字可用但不可见我尝试更改大小但 t​​exbox 它正在重新排列范围滑块的位置。

```
<form>
    <div data-role="rangeslider">
        <label for="minPrice">Price Range &#40;&pound;&#41;</label>
        <input type="range" name="minPrice" id="minPrice" min="0" max="5000000" value="0">
        <label for="maxPrice">Price Range &#40;&pound;&#41;</label>
        <input type="range" name="maxPrice" id="maxPrice" min="0" max="5000000" value="5000000">
    </div>
</form> 
```

如何在不重新排列滑块的情况下支持价值 5000000。所以任何人都有想法，以便我可以解决这个问题。我在提琴手[http://jsfiddle.net/8xVWY/100/中重新生成了这个问题](http://jsfiddle.net/8xVWY/100/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:35:51.450

我给你做了一个工作的例子：http: [//jsfiddle.net/Gajotres/8xVWY/110/](http://jsfiddle.net/Gajotres/8xVWY/110/)

jQuery Mobile 版本 1.4 + 的解决方案：http: [//jsfiddle.net/Gajotres/vJa7Z](http://jsfiddle.net/Gajotres/vJa7Z)

**HTML：**

```
<form>
    <div data-role="rangeslider" id="custom-slider">
        <label for="minPrice">Price Range &#40;&pound;&#41;</label>
        <input type="range" name="minPrice" id="minPrice" min="0" max="5000000" value="0">
        <label for="maxPrice">Price Range &#40;&pound;&#41;</label>
        <input type="range" name="maxPrice" id="maxPrice" min="0" max="5000000" value="5000000">
    </div>
</form> 
```

**CSS：**

```
#custom-slider .ui-rangeslider-sliders {
    margin: 0.5em 100px !important;
}

#custom-slider input.ui-input-text.ui-slider-input {
    width: 70px !important;
} 
```

# ruby-on-rails - 活动管理员的未定义方法“重新排序”

> ID：15445973
> 
> 赞同：0
> 
> 时间：2013-03-16T05:38:12.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, activeadmin

我正在尝试将活动管理员中的范围用于我的一个模型，我得到了这个`error undefined method reorder' for array.`

我已经在另一个具有活动管理员的模型中成功使用了范围，我无法调试为什么会出现这个问题。

这是来自活动管理员的代码：-

```
ActiveAdmin.register Startup do

    scope :reached do |startups|
        startups.all
    end

end 
```

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:53:23.407

您正在返回一个数组而不是 ActiveRecord 关系，我的猜测是您正试图将它链接到一个`.order`不起作用的方法。你想确定什么范围？

如果您只想要所有记录，则不需要范围。如果你想缩小你的创业公司，那么你应该使用类似的东西`Startup.where(#condition you want met)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:26:40.253

这是我在模型级别的关联。

在启动.rb

```
has_many :fund_requests, :dependent => :destroy 
```

在fund_request.rb

```
belongs_to :startup 
```

我试图确定达到状态（资金请求中的属性）的资金请求。

然而，像这样在模型级别工作的东西不适用于活动管理员

```
scope :reached do |startups|

     startups.fund_requests.where(status = ?', 'Pending')

end 
```

这给了我“重新排序”错误

像这样写它对我有用：-

```
scope :reached do |startups|
        startups.joins(:fund_requests).where(['fund_requests.status = ?', 'Pending'])
    end` 
```

我不知道为什么链接不起作用而连接起作用。

# ios - Monotouch - 显示一系列图像（太慢）

> ID：15445974
> 
> 赞同：1
> 
> 时间：2013-03-16T05:38:13.593
> 
> 标签：ios, opengl-es, uiview, xamarin.ios, cgcontext

我需要在 iOS 中将一系列图像显示为动画（使用 Monotouch）。使用 800x600 尺寸的图像，我可以让它们在我的 iPad 3 上显示的最快速度是 160 毫秒（6.25 fps）。我希望它在 15-30fps 范围内（每张图像 < 50ms）。从存储中读取图像需要 < 10 毫秒，因此绘制到屏幕的速度很慢。

```
 public override void Draw (RectangleF rect)
    {
        base.Draw (rect);
        var cgimg = UIImage.FromFile (filename).CGImage;
        CGContext g = UIGraphics.GetCurrentContext();
        g.DrawImage (new RectangleF (0, 0, cgimg.Width, cgimg.Height), cgimg);
    } 
```

将它们渲染为电影不会提供我想要的交互速度（来回擦洗帧）

这超出了硬件限制吗？（它似乎不应该是）。我需要使用 openGL 还是 Monogame？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:03:03.110

好的，这里有一些帮助：

1.  您不应该`UIImage`在绘图功能中加载 ，因为这种情况经常发生。将其设置为类中的成员变量，该时间将在对象的生命周期内发生一次，例如其构造函数`LayoutSubviews`，或`filename`设置变量时等。
2.  `CGImage`你也可以用同样的方式缓存它。
3.  在你的方法中加上一个`using`声明。`CGContext``Draw`

我认为你可以通过做这些事情来获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T15:09:42.343

在尝试了 OpenGL 之后，我最终直接绘制到了视图层。Instruments 说使用这种技术处理 800x600 图像的速度为 24 FPS。（iPad 3 上的 iOS 6.1）

```
this.Layer.Contents =  UIImage.FromFile( {filename}).CGImage;
SetNeedsDisplay (); 
```

这表现得很好，与我预期的差不多。如果第二次显示图像，性能会提高到 40+ FPS（我假设正在进行缓存）。

# python - Python 正则表达式和字符串替换

> ID：15445975
> 
> 赞同：0
> 
> 时间：2013-03-16T05:38:14.737
> 
> 标签：python, regex

我正在尝试在 Python 中转换字符串，例如：

```
string = 'void demofun(double* output, double db4nsfy[], double VdSGV[], int length)' 
```

进入

```
wrapper = 'void demofun(ref double output, double[] db4nsfy, double[] VdSGV, int length)' 
```

现在，在大多数情况下，我可以使用 , 的简单组合`while`来`string.find()`做到`string.replace()`这一点，因为我不需要干预变量名（例如`output`or `length`），但我想不通的是替换这些字符串：

`double db4nsfy[]`-->`double[] db4nsfy`

`double[] VdSGV`-->`double[] VdSGV`

我该怎么做？我知道我会用 Python 中的一些 RTFM 正则表达式找到我的答案，但我希望从一个实际的例子开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:43:29.393

你可以使用`re.sub`：

```
>>> import re
>>> re.sub(r'(\w+) (\w+)\[\]', r'\1[] \2', string)
    'void demofun(double* output, double[] db4nsfy, double[] VdSGV, int length)' 
```

*   `(\w+) (\w+)\[\]`匹配包含在捕获组和括号中的两个“单词”。
*   `\1`并`\2`参考这些组捕获的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:50:38.723

冗长，但没有正则表达式并处理指针和数组（也没有正则表达式）：

```
def new_arguments(func_string):
    def argument_replace(arguments):
        new_arguments = []
        for argument in arguments.split(', '):
            typ, var = argument.split()
            if typ.endswith('*'):
                typ = 'ref ' + typ.replace('*', '')
            if var.endswith('[]'):
                var = var.replace('[]', '')
                typ += '[]'
            new_arguments.append(' '.join([typ, var]))
        return ', '.join(new_arguments)

    func_name = func_string[:func_string.index('(')]
    arguments = func_string[func_string.index('(')+1:func_string.index(')')]

    return ''.join((func_name, '(', argument_replace(arguments), ')'))

string = 'void demofun(double* output, double db4nsfy[], double VdSGV[], int length)'
print new_arguments(string)
#void demofun(ref double output, double[] db4nsfy, double[] VdSGV, int length) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T05:52:50.340

这是一种没有正则表达式的直观方法。

```
s = 'void demofun(double* output, double db4nsfy[], double VdSGV[], int length)'
s = s.split()
for i in range(len(s)):
    if s[i][-3:] == '[],':
        s[i] = s[i][:-3] + ','
        s[i-1] = s[i-1] + '[]'
    elif s[i][-3:] == '[])':
        s[i] = s[i][:-3] + ')'
        s[i-1] = s[i-1] + '[]'
s = ' '.join(s)
print s
# void demofun(double* output, double[] db4nsfy, double[] VdSGV, int length) 
```

# java - Java 列表错误超出范围

> ID：15445976
> 
> 赞同：0
> 
> 时间：2013-03-16T05:38:17.550
> 
> 标签：java, list, outofrangeexception

```
 import java.util.*;

    class A
    {
        private ArrayList <B> bList;
        private Random generator = new Random();

        A(List<B> initialList)
        {
            bList = new ArrayList<B> ();
            int listSize = initialList.size();
            bList.ensureCapacity(listSize);

            for (B b : initialList)
            {
                int bIndex = generator.nextInt(listSize);
                bList.add(bIndex , b);
            }
        }
    }

    class B
    {
    } 
```

当我插入时，我遇到了一个超出范围错误的新错误`blist.add(bIndex , b);`

调试后，ensureCapacity 似乎没有完成它的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:48:32.117

查看`add`方法的文档：

> IndexOutOfBoundsException - 如果索引超出范围 (index < 0 || index > size())

将元素放入列表中会导致列表出现漏洞的位置是没有意义的。

`ensureCapacity`只是为这么多元素腾出了空间。这并不意味着他们真的在那里。

通过此更改，它应该可以工作：

```
int bIndex = generator.nextInt(bList.size()+1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:50:57.850

容量与大小不同。您确保新列表有足够的内部容量来容纳您用于`add`调用的索引，但随后您调用`add`的索引（可能和可能）大于列表的`size`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T06:12:42.387

您将随机收到此错误。因为您使用随机类创建索引（bIndex）。它将生成您提到的列表大小的索引（int bIndex = generator.nextInt（listSize））。有时它会产生大于0的随机数。这时你会得到这个错误。如果它创建 0，那么它不会给出错误。

您可以使用 for 循环代替 foreach。

```
for (int i = 0; i < listSize; i++) {
   B b = initialList.get(i);
   bList.add(i, b);
   System.out.println(bList.toString());
} 
```

# spring-mvc - Spring Mvc 选项实现

> ID：15445977
> 
> 赞同：0
> 
> 时间：2013-03-16T05:38:19.063
> 
> 标签：spring-mvc

从网站[http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html](http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html)，

我知道spring mvc中的选项标签实现如下

```
<tr>
    <td>Country:</td>
    <td>
        <form:select path="country">
            <form:option value="-" label="--Please Select"/>
            <form:options items="${countryList}" itemValue="code" itemLabel="name"/>
        </form:select>
    </td>
    <td></td>
</tr> 
```

我已经根据我的需要实现了这段代码，如下所示

```
<tr>
        <td>Country:</td>
        <td>
            <form:select path="minerals">
                <form:option value="-" label="--Please Select"/>
                <form:options items="${mineralList}" itemValue="code" itemLabel="name"/>
            </form:select>
        </td>
        <td></td>
    </tr> 
```

这里的**MineralList**是包含矿物名称的列表，由 Controller 类中的 refereceData() 方法返回。

我的模型类如下所示

```
class Stones{
String minerals;

public String getMinerals() {
    return minerals;
}
public void setMinerals(String minerals) {
    this.minerals = minerals;
}
} 
```

应用程序运行时，出现异常

bean 类 [java.lang.String] 的无效属性“代码”：Bean 属性“代码”不可读或具有无效的 getter 方法：getter 的返回类型是否与 setter 的参数类型匹配？

有什么解决办法请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:23:00.903

你得到这个是因为你告诉标签`name`在生成标签时使用列表中每个项目的属性`<option>`。但是您的列表由没有名称属性的字符串组成。

只需从标签中删除它，你会没事的，即：

```
<form:select path="minerals" items="${mineralList}" /> 
```

# python - 如何在 Python 请求中禁用安全证书检查

> ID：15445981
> 
> 赞同：354
> 
> 时间：2013-03-16T05:38:58.453
> 
> 标签：python, https, python-requests

我在用

```
import requests
requests.post(url='https://foo.com', data={'bar':'baz'}) 
```

但我得到一个 request.exceptions.SSLError。该网站有一个过期的证书，但我没有发送敏感数据，所以对我来说没关系。我想我可以使用像“verifiy=False”这样的论点，但我似乎找不到它。

* * *

## 回答 #1

> 赞同：645
> 
> 时间：2013-03-16T05:40:29.083

从[文档中](https://2.python-requests.org/en/master/user/advanced/#ssl-cert-verification)：

> `requests`如果设置 `verify`为 False，也可以忽略验证 SSL 证书。
> 
> ```
> >>> requests.get('https://kennethreitz.com', verify=False)
> <Response [200]> 
> ```

如果您正在使用第三方模块并想要禁用检查，这里有一个上下文管理器，`requests`它可以修改并更改它，使其`verify=False`成为默认值并抑制警告。

```
import warnings
import contextlib

import requests
from urllib3.exceptions import InsecureRequestWarning

old_merge_environment_settings = requests.Session.merge_environment_settings

@contextlib.contextmanager
def no_ssl_verification():
    opened_adapters = set()

    def merge_environment_settings(self, url, proxies, stream, verify, cert):
        # Verification happens only once per connection so we need to close
        # all the opened adapters once we're done. Otherwise, the effects of
        # verify=False persist beyond the end of this context manager.
        opened_adapters.add(self.get_adapter(url))

        settings = old_merge_environment_settings(self, url, proxies, stream, verify, cert)
        settings['verify'] = False

        return settings

    requests.Session.merge_environment_settings = merge_environment_settings

    try:
        with warnings.catch_warnings():
            warnings.simplefilter('ignore', InsecureRequestWarning)
            yield
    finally:
        requests.Session.merge_environment_settings = old_merge_environment_settings

        for adapter in opened_adapters:
            try:
                adapter.close()
            except:
                pass 
```

以下是你如何使用它：

```
with no_ssl_verification():
    requests.get('https://wrong.host.badssl.com/')
    print('It works')

    requests.get('https://wrong.host.badssl.com/', verify=True)
    print('Even if you try to force it to')

requests.get('https://wrong.host.badssl.com/', verify=False)
print('It resets back')

session = requests.Session()
session.verify = True

with no_ssl_verification():
    session.get('https://wrong.host.badssl.com/', verify=True)
    print('Works even here')

try:
    requests.get('https://wrong.host.badssl.com/')
except requests.exceptions.SSLError:
    print('It breaks')

try:
    session.get('https://wrong.host.badssl.com/')
except requests.exceptions.SSLError:
    print('It breaks here again') 
```

请注意，一旦您离开上下文管理器，此代码将关闭处理修补请求的所有打开的适配器。这是因为 requests 维护一个每个会话的连接池，并且每个连接只发生一次证书验证，所以会发生这样的意外情况：

```
>>> import requests
>>> session = requests.Session()
>>> session.get('https://wrong.host.badssl.com/', verify=False)
/usr/local/lib/python3.7/site-packages/urllib3/connectionpool.py:857: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecureRequestWarning)
<Response [200]>
>>> session.get('https://wrong.host.badssl.com/', verify=True)
/usr/local/lib/python3.7/site-packages/urllib3/connectionpool.py:857: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings
  InsecureRequestWarning)
<Response [200]> 
```

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2015-08-29T03:20:26.687

使用`requests.packages.urllib3.disable_warnings()`和方法`verify=False`。`requests`

```
import requests
from urllib3.exceptions import InsecureRequestWarning

# Suppress only the single warning from urllib3 needed.
requests.packages.urllib3.disable_warnings(category=InsecureRequestWarning)

# Set `verify=False` on `requests.post`.
requests.post(url='https://example.com', data={'bar':'baz'}, verify=False) 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2018-05-03T15:55:12.213

要添加到[Blender 的答案](https://stackoverflow.com/a/15445989/3357935)，您可以使用禁用所有请求的 SSL 证书验证`Session.verify = False`

```
import requests

session = requests.Session()
session.verify = False
session.post(url='https://example.com', data={'bar':'baz'}) 
```

请注意`urllib3`，（Requests 使用）[强烈反对](https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings)发出未经验证的 HTTPS 请求，并且会引发`InsecureRequestWarning`.

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2019-11-20T13:03:53.033

也可以从环境变量中完成：

```
export CURL_CA_BUNDLE="" 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-03-09T10:26:18.780

如果您想使用 verify=False 选项准确发送 post 请求，最快的方法是使用此代码：

```
import requests

requests.api.request('post', url, data={'bar':'baz'}, json=None, verify=False) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2021-02-15T11:45:11.217

如果您正在编写一个爬虫并且真的不关心 SSL 证书，您可以将其设置为全局：

```
import ssl

ssl._create_default_https_context = ssl._create_unverified_context 
```

**不要在生产中使用**

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-09-30T17:28:21.907

## 什么对我有用 Due [`verify=False`Bug](https://github.com/psf/requests/issues/3829)

由于在设置 环境变量 ( )时[`session.verify=False`](https://github.com/psf/requests/issues/3829)导致`urllib*`忽略的错误。所以我们将其设置为空。
`CURL_CA_BUNDLE`

```
import requests, os
session = requests.Session()
session.verify = False
session.trust_env = False
os.environ['CURL_CA_BUNDLE']="" # or whaever other is interfering with 
session.post(url='https://example.com', data={'bar':'baz'}) 
```

不确定我需要`trust_env`

# android - {"error":{"message":"(#100) 缺少消息或附件","type":"OAuthException","code":100}}

> ID：15445983
> 
> 赞同：2
> 
> 时间：2013-03-16T05:39:27.113
> 
> 标签：android, json, facebook, post, photo

这是我的代码

```
 private void postToWall(String msg) {
    Bundle parameters = new Bundle();

    JSONObject attachment = new JSONObject();

    String myjosn="{\"name\":\"LangGuage\",\"href\":\"http://www.hunkatech.com\",\"caption\":\" \",\"description\":\""+messageToPost+"\",\"media\":[{\"type\":\"image\",\"src\":\"http://hwsdemos.com/LangGuage/medal_1.png\",\"href\":\"http://www.hunkatech.com\"}],\"properties\":{\"Powered by:\":{\"text\":\"Hunka Technology Pvt. Ltd.\",\"href\":\"http://www.hunkatech.com\"}}}";  

            try {

        parameters.putString(Facebook.TOKEN, facebook.getAccessToken());

            parameters.putString("attachment",myjosn.toString());

        String response = facebook.request("me/feed", parameters, "POST");

        System.out.println("----responce" + response);

        if (response.contains("Duplicate status message")) {
            progressHandler.sendEmptyMessage(1);
            resp = 1;

        } else if (response == null || response.equals("")
                || response.equals("false") || response.contains("error")) {
            Log.d("error", "error response");
        } else {
            progressHandler.sendEmptyMessage(0);
            resp = 0;

        }

    } catch (Exception e) {
        Log.e(TAG, "Posting fail");

        e.printStackTrace();

    }

} 
```

我想在 Facebook 墙上发布带有图像的消息。我的 json 是正确的，我已经在 json 格式化程序编辑器上检查了它。我得到了以下异常。需要如何解决它的建议。

更新：我的消息和图片在以下代码的帮助下发布：

```
parameters.putString("link", "http://www.hunkatech.com");
parameters.putString("picture", "http://hwsdemos.com/LangGuage/medal_1.png");
parameters.putString("name", "LangGuage");// name of link
parameters.putString("captions", "hello");
parameters.putString("message", "This is my message!!"); 
```

但是我想将图像留给文本，但上面的代码给出的结果是消息下方的 Imgae。更新：我无法从 json 中发布任何内容。任何人都可以解决这个问题，我想发送将图像与 json 绑定的附件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:44:30.910

您可以尝试另外添加此参数：

```
parameters.putString("message", "this is my message"); 
```

编辑 ：

你可以试试 ：

```
parameters.putString("link", "http://www.hunkatech.com");
parameters.putString("picture", "http://hwsdemos.com/LangGuage/medal_1.png");
parameters.putString("name", "LangGuage");// name of link
parameters.putString("captions", "hello");
parameters.putString("message", "This is my message!!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:35:08.340

这里我是如何做到的。

```
private void publishFeedDialog() {
        System.out.println("Working");
        Bundle postParams = new Bundle();
        postParams.putString("name", "I am an Engineer");
        postParams.putString("caption",
                "Working very heard to make things work.");
        postParams
                .putString("description",
                        "This project is killing me, Still I am trying, and finally I got success.");
        postParams.putString("link", "http://www.kodebusters.com");
        postParams
                .putString(
                        "picture",
                        "http://cdn1.iconfinder.com/data/icons/iconslandsport/PNG/128x128/Soccer_Ball.png");

        new MYasync(postParams).execute();

    } 
```

在 AsyncTask 上运行您的网络调用，或者它可能通过异常

```
 class MYasync extends AsyncTask<Void, Void, Void> {

            Bundle params;
            private String res;

            public MYasync(Bundle params) {
                super();
                this.params = params;
            }

            @Override
            protected void onPostExecute(Void result) {
                System.out.println(res);
                super.onPostExecute(result);
            }

            @Override
            protected Void doInBackground(Void... pp) {
                try {
                    res = facebook.request("me/feed", params, "POST");

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }

        } 
```

# android - 我的应用程序不显示选项菜单按钮

> ID：15445985
> 
> 赞同：1
> 
> 时间：2013-03-16T05:39:34.047
> 
> 标签：android, optionmenu

我正在使用运行 Ice Cream Sandwich (4.0) 的 X-TREME 7' 平板电脑作为测试设备。在此平板电脑上安装我的应用程序后，我在屏幕上看不到菜单按钮。但是，当我在运行 Gingerbread(2.3.3) 的模拟器上测试相同的应用程序并按下 F2 按钮时，会弹出选项菜单。

有谁知道问题是由什么引起的并有解决方案吗？

我的项目清单包括：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="14" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:48:55.633

> 如果您正在为 Android 2.3 或更低版本进行开发，用户可以通过按菜单按钮来显示选项菜单面板。在 Android 3.0 及更高版本上，选项菜单中的项目由操作栏显示为屏幕操作项目和溢出选项的组合。从 Android 3.0 开始，不推荐使用菜单按钮（某些设备没有），因此您应该迁移到使用操作栏来提供对操作和其他选项的访问。

来源：http: [//developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:20:08.600

只需按照此菜单按钮 android 版本 > 3.0

`1\. Android no longer requires a dedicated Menu button, some devices don’t have one, and you should migrate away from using it.1`

`2\. Set targetSdkVersion to 14, then test your app on Android 4.0.`

`3.Add showAsAction="ifRoom" to menu items you’d like to surface in the action bar.`

`4.If the ActionBar doesn’t work for your app, you can remove it with Theme.Holo.NoActionBar or Theme.DeviceDefault.NoActionBar.`

来自 Andoid 博客的精美文章，告别[**菜单按钮**](http://android-developers.blogspot.in/2012/01/say-goodbye-to-menu-button.html)

# javascript - jquery mega 下拉菜单插件（dcMegaMenu）如何更改事件悬停以单击窗口调整大小

> ID：15445987
> 
> 赞同：0
> 
> 时间：2013-03-16T05:40:15.200
> 
> 标签：javascript, jquery, drop-down-menu

jquery mega 下拉菜单插件：（[http://www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/advanced-styling/](http://www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/advanced-styling/)）

[嗨，伙计们，我正在使用http://www.designchemical.com](http://www.designchemical.com)的 jquery mega 下拉菜单插件开发一个响应式网站。

在桌面上，默认情况下全宽窗口（980 像素以上宽度）我在插件选项中使用事件：“悬停”。但是我需要一个关于如何更改事件的解决方案：当窗口大小低于 980px 宽度时“单击”？

希望能在这里找到解决办法。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:52:44.403

试试这行：

```
jQuery(document).ready(function($) {
   if($(window).width() < 980){
      jQuery('#mega-menu').dcMegaMenu({
         event: 'click'
    });
   }
 }); 
```

或在窗口调整大小：

```
 jQuery(window).resize(function($) {
      if($(window).width() < 980){
        jQuery('#mega-menu').dcMegaMenu({
           event: 'click'
        });
       }
    }); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T12:01:12.153

```
$('#mega-menu-1').dcMegaMenu({
            rowItems: '3',
            speed: 600,
            effect: 'slide',
            event: 'click'
        }); 
```

事件：'click' 仅适用于水平巨型菜单。垂直巨型菜单中没有单击选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T02:12:04.093

1）创建一个函数来初始化megamenu，取决于宽度（对于这种情况，如果宽度大于966px，则会启动megamenu）

```
function init_megamenu() {
    var w = $(window).width();
    if (w >= 966) {
        $('#mega-menu-9').dcMegaMenu({
            rowItems: '3',
            speed: 'fast',
            effect: 'fade'
        });
    }
} 
```

2) 在文档准备好和窗口调整大小时调用 init_megamenu() 函数

```
$(document).ready(function() {
    // desktop menu
    init_megamenu();
});

$(window).resize(function() {
    // desktop menu
    init_megamenu();
}); 
```

# php - PHP PDO 致命错误：调用成员函数 prepare()

> ID：15445994
> 
> 赞同：0
> 
> 时间：2013-03-16T05:41:52.430
> 
> 标签：php

我正在尝试显示数据库中的一些信息，并且我有以下两个文件。当我运行时`index.php`，我得到这个错误：`Fatal error: Call to a member function prepare() on a non-object in C:\xampp\htdocs\pc\index.php on line 16`

你能告诉我如何解决这个问题吗

索引.php

```
include_once('database.php');

$db= new database();
$conn = $db->connect();
                         //Problem is in the folloing line
$query = $conn->prepare('SELECT * FROM admin WHERE admin_id = :id'); 
$query->execute(array('id' => 1));
?>
<table>
<tr>
<th>Name</th>
<th>Email</th>
</tr>

<?php
while( $rows = $query->fetch(PDO::FETCH_ASSOC)) {
    echo "<tr>";
    echo "<td>". $rows['admin_name'] ."</td>" ;
    echo "<td>". $rows['admin_email'] ."</td>" ;

    echo "</tr>";
}
?>

</table> 
```

数据库.php

```
class Database{

private $host = 'localhost';
private $dbname = 'school';
private $username = 'root';
private $password ='';  

public $con = '';

function __construct(){

    $this->connect();   

}

function connect(){

    try{

        $this->con = new PDO("mysql:host=$this->host;dbname=$this->dbname",$this->username, $this->password);
        $this->con->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);

    }catch(PDOException $e){

        echo 'We\'re sorry but there was an error while trying to connect to the database';
        file_put_contents('connection.errors.txt', $e->getMessage().PHP_EOL,FILE_APPEND);

    }
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:44:37.703

```
class Database{

private $host = 'localhost';
private $dbname = 'school';
private $username = 'root';
private $password ='';  

public $con = '';

function __construct(){

    $this->connect();   

}

function connect(){

    try{

        $this->con = new PDO("mysql:host=$this->host;dbname=$this->dbname",$this->username, $this->password);
        $this->con->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);

    }catch(PDOException $e){

        echo 'We\'re sorry but there was an error while trying to connect to the database';
        file_put_contents('connection.errors.txt', $e->getMessage().PHP_EOL,FILE_APPEND);

    }
    return $this->con; // This makes all the magic!!!
}   
} 
```

# android-layout - 阵列适配器错误

> ID：15445995
> 
> 赞同：0
> 
> 时间：2013-03-16T05:41:59.490
> 
> 标签：android-layout, listview, custom-adapter

您好我正在尝试实现自定义适配器。我收到以下错误：

```
03-16 05:23:22.003: E/AndroidRuntime(316): FATAL EXCEPTION: main
03-16 05:23:22.003: E/AndroidRuntime(316): java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView 
```

这就是我尝试填充我的 ListView 的方式：

```
 CustomListViewAdapter adapter = new CustomListViewAdapter(context, R.layout.list_item, rowItems); 
```

这是我得到错误的地方。

我在网上看到很多答案说你需要传入一个TextView，但我希望每一行都有一个图像和两个TextView。我正在关注本教程[http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/)并且他们的自定义布局工作正常，它不会抱怨. 我对每一行都使用了他们在教程中使用的相同自定义布局。为什么我在抱怨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:53:01.850

在您的代码中检查以下一项

`public class CustomListViewAdapter extends ArrayAdapter<RowItem>`

你写过 RowItem 吗？您可能忘记更改`ArrayAdapter<String>`为`ArrayAdapter<RowItem>`